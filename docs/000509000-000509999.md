# StackOverflow 问答 000509000-000509999

# windows - XAMPP 与基本 Windows

> ID：509005
> 
> 赞同：0
> 
> 时间：2009-02-03T21:38:01.567
> 
> 标签：windows, xampp, laconica

我正在为微博安装开源应用程序 Laconica。有使用 XAMPP 安装它的说明。现在我更喜欢直接安装 Windows。在这样做的过程中，我遇到了一些与缺少变量、不正确的数据库变量定义等有关的问题。现在我的同事想尝试使用 XAMPP。但我的问题是为什么 XAMPP 会解决我的问题？帮助设置的工具如何解决这些固有变量和数据库问题？我错过了什么吗？在我看来，XAMPP 正在将应用程序设置为在特定环境中工作，而我正在解决的问题与实际编写的 PHP 代码有关。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-02-03T21:57:22.790

XAMPP 将在一个包中包含运行 Laconica 所需的所有依赖项。您当前可能拥有不同版本的 PHP 或 Laconica 正在寻找的数据库。

XAMPP 不设置 apache、PHP 等。它*是*apache、PHP 等。

在不知道您的错误是什么的情况下，很难说 XAMPP 可能会解决什么问题，因为我们不知道您现在遇到了什么问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-28T14:54:58.503

对于早期版本的 Laconica，我们没有`E_NOTICE`为我们的开发环境设置——默认设置是`E_NOTICE`为 Ubuntu 系统关闭。因此，使用其他环境的人可能会看到我们没有看到的“错误”。

这已在以后的版本中得到纠正；我认为我们现在在启用通知错误方面做得很好。

您也可以将此行放在 config.php 中以关闭通知报告：

```
 error_reporting(E_ALL ^ E_NOTICE); 
```

您几乎绝对应该关闭浏览器的错误通知，如下所示：

```
 ini_set('display_errors', false); 
```

# javascript - jQuery：ajax函数的延迟间隔，直到上一次运行完成

> ID：509007
> 
> 赞同：3
> 
> 时间：2009-02-03T21:38:57.760
> 
> 标签：javascript, jquery, ajax, setinterval

**我已经使用setInterval**设置了 AJAX 页面刷新。有时，服务器速度很慢，以至于在前一个请求完成之前就发起了一个新请求。

我怎样才能防止这种情况？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-02-03T21:44:20.510

使用比刷新间隔更短的超时值。当请求超时时，它将调用错误处理程序，因此您需要区分处理程序中的超时错误和其他类型的错误。

```
 $.ajax({
   type: "POST",
   url: "some.php",
   data: "name=John&location=Boston",
   timeout: 5000, /* ms or 5s */
   success: function(msg){
     alert( "Data Saved: " + msg );
   }
 }); 
```

[jquery.com 上的文档](http://docs.jquery.com/Ajax/jQuery.ajax#options)。上述示例来自同一来源，但添加了超时值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-02-03T21:45:10.320

改用 setTimeout，只有在收到 AJAX 请求的结果后才启动另一个 setTimeout。这样，刷新仅在自上次刷新后的指定时间段后发生。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-02-03T22:32:27.307

代替使用固定的硬编码间隔：触发下一次刷新作为处理当前刷新的最后一步，例如在“成功”（或“完成”）事件回调中。

您可以添加一个变量来跟踪当前请求的发送时间，以便计算动态延迟：

1.  取当前时间 T1
2.  发送异步请求
3.  其他事情发生...
4.  异步请求返回，回调执行
5.  从当前时间减去 T1
6.  如果结果<您想要的请求间隔，设置延迟值> 0
7.  如果结果 >= 您想要的请求间隔，则设置延迟值 = 0
8.  使用延迟值调用 setTimeout，启动下一个周期

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-02-03T23:00:26.423

我可以告诉你的是，在你的代码中使用一个标志。喜欢（不是我实际推荐的只是一个简单的例子）

```
var isWorking = false;
function doRequest(){
  if(isWorking) return;
  isWorking = true;
  $.ajax({
    ...,
    success: workWithResponse
  });
}

function workWithResponse(){
  /* doAnythingelse */
  isWorking = false;
}

setInterval(doRequest,1000); 
```

类似的东西，它很原始，但你会避免竞争条件。问候。

# foxpro - FoxPro fxp 文件

> ID：509009
> 
> 赞同：3
> 
> 时间：2009-02-03T21:39:19.147
> 
> 标签：foxpro

我对 FoxPro 知之甚少，但有一个项目需要使用基于 FoxPro 的第三方应用程序和一个 .fxp 文件。第三方应用程序是一个销售点系统，该软件的制造商提供了一个 .fxp 文件，允许我们将产品信息导出为 XML 格式。

我遇到的问题是该软件无法安排 .fxp 文件定期运行，我们需要保持该 XML 文件更新。

我的问题是，可以在 FoxPro 之外执行 .fxp 文件吗？

或者，我可以创建自己的 FoxPro 应用程序来执行他们的 .fxp 文件并让它连接到 POS 数据库以执行导出。

欢迎任何想法或替代方案。

谢谢，布赖恩

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-02-03T21:42:34.490

编写另一个 FoxPro 程序并使用“DO file.fxp”运行它或将 FXP 文件导入项目中，将其设置为启动并构建。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-02-07T18:59:48.200

您可以直接从命令行调用 FXP 来启动 FoxPro。这将允许您通过 Windows 任务管理器或任何其他程序安排应用程序。

BAT 文件中的类似内容：“C:\Program Files\Microsoft Visual FoxPro 9\vfp9.exe”c:\clients\myProgram.fxp

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-02-19T13:42:49.113

如果您没有可用的 Visual Foxpro，请询问 fxp 的“制造商”提供可执行文件（内置于 VFP），以便您可以运行 fxp。

如果他们不愿意支持你，我可以提供一个“foxpro 脚本主机”，这是一个可以运行独立 FXP 的小型运行时环境。

希望这有帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-24T20:09:52.553

> 1.  可以在 FoxPro 之外执行 .fxp 文件吗？

FXP 文件是经过编译的 Foxpro/Visual Foxpro 源文件（PRG 文件）。
所以不，它只能用 FP/VFP 执行。

> 2.  或者，我可以创建自己的 FoxPro 应用程序来执行他们的 .fxp 文件并让它连接到 POS 数据库以执行导出。

首先，我们不知道 FXP 例程本身是否会连接到 POS 系统的数据表。我们只能假设它确实如此。
如果是这样，那么正如上面其他人所指出的，您确实可以编写自己的 FP/VFP 例程来运行 FXP。
您可能希望在 VFP9 中编写新例程，以便它的向后兼容性将支持现有 FXP 实用程序中的命令，而不管使用什么版本编写。

祝你好运

# ruby-on-rails - 验证用户的 API 凭证 - Rails、ActiveMerchant 和 PayPal Express Gateway

> ID：509021
> 
> 赞同：5
> 
> 时间：2009-02-03T21:40:47.067
> 
> 标签：ruby-on-rails, e-commerce, paypal, activemerchant

我正在构建一个使用 PayPal Express 的市场应用程序。我有一个表格供卖家输入他们的 PayPal API 凭据，但我需要一种方法来通过对 PayPal 进行某种调用来验证它们。

我在 ActiveMerchant 中使用 PaypalExpressGateway，除了标准的购买控制之外，我什么也没看到。是否可以使用任何类型的空操作？

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2011-01-20T09:41:28.800

为此，我正在使用[TransactionSearch操作。](https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_api_nvp_r_TransactionSearch)通过指定`STARTDATE=2100-01-01 00:00:00`它基本上会导致无操作。

它将为您验证凭据，而无需卖家提供任何其他输入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-11T08:49:10.963

我个人没有答案。但我知道 Railscasts.com 的 Ryan Bates 最近专门为 ActiveMerchant 和 Paypal 投放了六集（！）。[在railscasts.com](http://railscasts.com)查看第 141 到第 146集。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-12-17T08:12:54.670

出于安全原因，无法检查电子邮件是否为有效的贝宝帐户。如果确实需要帐户有效性，您可以随时进行小额交易，然后将其作废。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2011-01-23T04:26:43.990

好的，4小时后...

```
模块 ActiveMerchant #:nodoc:
  模块计费#:nodoc:
    类 PaypalExpressGateway < 网关

      def get_balance(options = {})
        提交'GetBalance'，build_get_balance_request（选项）
      结尾

    私人的
      def build_get_balance_request（选项）
        xml = Builder::XmlMarkup.new :indent => 2
        xml.tag！'GetBalanceReq', 'xmlns' => PAYPAL_NAMESPACE 做
          xml.tag！'GetBalanceRequest', 'xmlns:n2' => EBAY_NAMESPACE 做
            xml.tag！'n2：版本'，API_VERSION
            xml.tag！'n2:ReturnAllCurrencies', '1'
          结尾
        结尾

        xml.target！
      结尾
    结尾
  结尾
结尾

类 SellerMerchantValidator < ActiveModel::Validator
  def 验证（记录）
    paypal_attrs = ['paypal_api_username', 'paypal_api_password', 'paypal_api_signature']
    如果记录.paypal_merchant？&& (record.changed - paypal_attrs).size < record.changed.size #paypal_attrs 之一已更改
      响应 = record.gateway.get_balance
      除非 response.params['balance'].present?
        record.errors[:base] << "请检查 PayPal 详细信息并确保所有三个都正确输入。"
      结尾
    结尾
  结尾
结尾

```

感谢 Neils 检查 TransactionSearch 的想法。

请让我知道是否有更好的方法来检查任何 api 字段是否已更改。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2011-02-06T00:28:18.980

API 中还有对 GetBalance 的调用。 [一些示例代码](https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/library_code)

看起来是最简单（也是最快？）的方法。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-05-13T13:56:31.217

对，所以如果您想使用 ActiveMerchant 测试用户的凭据，请使用网关上的 transaction_search 方法

[https://github.com/Shopify/active_merchant/blob/cb72e0f9c58f57b1293e6e976229b26cfbfee6a8/lib/active_merchant/billing/gateways/paypal/paypal_common_api.rb](https://github.com/Shopify/active_merchant/blob/cb72e0f9c58f57b1293e6e976229b26cfbfee6a8/lib/active_merchant/billing/gateways/paypal/paypal_common_api.rb)

此示例将返回成功（确保填写您的测试凭据）

```
@username = ''
@password = ''
@signature = ''
gateway = ActiveMerchant::Billing::PaypalExpressGateway.new(
  login:      @username,
  password:   @password,
  signature:  @signature,
  test:       true
)

gateway.transaction_search({start_date: DateTime.now}) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2010-01-26T01:16:36.643

PayPal 确实有一个`AddressVerify`API。它确认邮政地址和邮政编码是否与指定 PayPal 帐户持有人的邮政编码相符。事实上，我现在正在我们的网站上实施它。

您可以在此处阅读更多相关信息：
[https ://www.x.com/docs/DOC-1162#id0862M0QH02L](https://www.x.com/docs/DOC-1162#id0862M0QH02L)

在这里：
[https ://cms.paypal.com/us/cgi-bin/?&cmd=_render-content&content_ID=developer/e_howto_api_nvp_r_AddressVerify](https://cms.paypal.com/us/cgi-bin/?&cmd=_render-content&content_ID=developer/e_howto_api_nvp_r_AddressVerify)

# multithreading - 在 F# 中关闭多线程或限制内核使用？

> ID：509022
> 
> 赞同：2
> 
> 时间：2009-02-03T21:40:52.623
> 
> 标签：multithreading, f#

有没有办法关闭多线程或限制 F# 应用程序使用的内核数量？我知道这不会在生产环境中完成，但我很好奇我是否必须在单核系统上实际安装应用程序才能看到它的性能。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-02-03T21:56:21.653

您可以通过设置当前进程的 ProcessorAffinity 值在应用程序的开头简单地设置它：

```
System.Diagnostics.Process.GetCurrentProcess().ProcessorAffinity <- nativeint 1 
```

这将有效地将用于该进程的内核限制为系统上的第一个 CPU。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-02-06T16:51:35.417

调整寄存器或使用 Process.ProcessorAffinty 直接修改 windows 进程调度程序。这是一种不好的做法，因为它依赖于平台，而且还可能产生难以确定原因的程序行为。如果可能，最好通过 .NET 本身执行此操作，而不使用 System.Diagnostics.Process 等 PInvoke 包装器。

如果您只希望您的应用程序使用单个线程，我建议通过将以下内容添加到您的 app.config 来将垃圾收集器设置为非并发：

```
<configuration>
   <runtime>
       <gcConcurrent enabled="false"/>
   </runtime>
</configuration> 
```

有关更多信息，请参阅我关于此主题的[帖子](http://www.atalasoft.com/cs/blogs/rickm/archive/2008/05/14/choosing-the-right-garbage-collector-settings-for-your-application-net-memory-management-part-4.aspx)。

如果要对线程数的上限和下限设置显式限制，最好使用[ThreadPool](http://msdn.microsoft.com/en-us/library/system.threading.threadpool_members.aspx)对象。通过使用[SetMaxThreads](http://msdn.microsoft.com/en-us/library/system.threading.threadpool.setmaxthreads.aspx)和[SetMinThreads](http://msdn.microsoft.com/en-us/library/system.threading.threadpool.setminthreads.aspx)，您可以安全地执行这些限制，而无需接触 Windows 系统调度程序。

使用 ThreadPool 的唯一重大限制是，在使用此方法时，您不能将最小线程数设置为小于计算机中的处理器数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-03T21:55:11.593

[您可以通过调整注册表](http://support.microsoft.com/default.aspx/kb/296930)来设置进程关联性，这将根据需要限制您的应用程序。

# c# - GridView 中的自定义标题

> ID：509029
> 
> 赞同：0
> 
> 时间：2009-02-03T21:42:50.527
> 
> 标签：c#, asp.net, gridview

我已经在我的 GridView 中使用 OnRowCreated 方法的标题行上的 SetRenderMethodDelegate 绘制了我的自定义标题。我在尝试将 LinkBut​​tons 添加到新标题行时遇到问题。

这是 RenderMethod 的样子：

```
private void RenderSelectionMode(HtmlTextWriter output, Control container)
{
    TableHeaderCell cell = new TableHeaderCell();
    cell.Attributes["colspan"] = container.Controls.Count.ToString();
    AddSelectionModeContents(cell);
    cell.RenderControl(output);

    output.WriteEndTag("tr");

    HeaderStyle.AddAttributesToRender(output);
    output.WriteBeginTag("tr");

    for(int i = 0; i < container.Controls.Count; i++)
    {
        DataControlFieldHeaderCell cell = (DataControlFieldHeaderCell)container.Controls[i];
        cell.RenderControl(output);
    }
}

private void AddSelectionModeContents(Control parent)
{
    // TODO: should add css classes

    HtmlGenericControl label = new HtmlGenericControl("label");
    label.InnerText = "Select:";

    selectNoneLK = new LinkButton();
    selectNoneLK.ID = "SelectNoneLK";
    selectNoneLK.Text = "None";
    //selectNoneLK.Attributes["href"] = Page.ClientScript.GetPostBackClientHyperlink(selectNoneLK, "");
    //selectNoneLK.Click += SelectNoneLK_Click;
    selectNoneLK.Command += SelectNoneLK_Click;

    selectAllLK = new LinkButton();
    selectAllLK.ID = "SelectAllLK";
    selectAllLK.Text = "All";
    //selectAllLK.Attributes["href"] = Page.ClientScript.GetPostBackClientHyperlink(selectAllLK, "");
    //selectAllLK.Click += SelectAllLK_Click;
    selectAllLK.Command += SelectAllLK_Click;

    parent.Controls.Add(label);
    parent.Controls.Add(selectNoneLK);
    parent.Controls.Add(selectAllLK);
} 
```

如您所见，我尝试了不同的方法来让我的 LinkBut​​tons 工作（虽然没有工作）。LinkBut​​tons 呈现为普通锚标记，如下所示：<a id="SelectNoneLK">None</a>

我知道 ID 看起来像这样的事实有问题，因为我为此使用了母版页，并且 ID 应该更长一些。

任何帮助，将不胜感激！

缺口

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-03T22:23:50.850

我猜想，由于单元格不是控件层次结构的一部分（您永远不会将其添加到表中），LinkBut​​ton 永远不会找到 IContainer 父级来重写其 ID。

我倾向于使用出色的[RenderPipe 控件](http://weblogs.asp.net/infinitiesloop/archive/2007/09/19/rendering-asp-net-controls-out-of-place.aspx)来解决这些类型的问题，它允许我在一个地方声明我的控件，但在其他地方渲染它们。

# javascript - 圆形图像叠加

> ID：509033
> 
> 赞同：0
> 
> 时间：2009-02-03T21:43:19.310
> 
> 标签：javascript, css

我有一个圆形的图像。

圆圈被分成 3 个相等的部分。

我有整个圆圈的图像。

我还有 3 张其他图像，每张都只是圆圈的一部分，但颜色为绿色。

我必须执行以下操作：

1.  显示原始圆形图像。

2.  屏幕上有 3 个按钮，每个按钮都链接到圆圈的 3 个部分。单击时，它将绿色图像覆盖在圆圈上。因此，如果您单击所有 3 个按钮，则整个圆圈将为绿色。如果您只单击第一个按钮，则只有圆圈的那个部分会是绿色的。

我该如何实施？是否可以一次叠加 2 张图像？我必须在这里玩 x 和 y 定位吗？（当前的绿色图像部分，如果将​​它们放在原始图像上，将与原始圆形图像完全对齐。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-02-03T22:30:48.683

这是一个直接用 JavaScript 和 jQuery 显示的解决方案。
直接的 JavaScript 使用按钮的 DOM0 onclick 处理程序，这是可以的，因为它们只触发一个事件。窗口的 onload 处理程序更是一个问题：每个文档只能有一个。
如您所见，[jQuery解决方案要短得多，但您必须包含 jQuery 库。](http://jquery.com/)它`$( function(){} )`代替了窗口加载处理程序，但您可以拥有任意数量的。

图像扇区 1.gif、扇区 2.gif 和扇区 3.gif 是透明的，除了对它们可见的圆的位。你也可以使用 .png ，但如果没有一些调整，这在 ie6 中是行不通的。

```
<!-- the markup -->
<div id="circle">
    <div id="sector1"></div>
    <div id="sector2"></div>
    <div id="sector3"></div>
</div>
<input type="button" id="button1" value="Sector 1">
<input type="button" id="button2" value="Sector 2">
<input type="button" id="button3" value="Sector 3"> 
```

_

```
/* the style */
#circle{
    width: 100px;
    height 100px;
    position: relative;
    background: url( images/circle.gif );
}

#sector1, #sector1, #sector1 {
    width: 100px;
    height 100px;
    top: 0;
    left: 0;
    position: absolute;
    display: none;
}
#sector1 {
    background: url( images/sector1.gif );
}
#sector2 {
    background: url( images/sector2.gif );
}
#sector2 {
    background: url( images/sector3.gif );
} 
```

_

```
//basic javascript solution
window.onload = function() {
    // get references to the buttons
    var b1 = document.getElementById( 'button1' );
    var b2 = document.getElementById( 'button2' );
    var b3 = document.getElementById( 'button3' );

    // get references to the sectors
    var s1 = document.getElementById( 'button1' );
    var s2 = document.getElementById( 'button2' );
    var s3 = document.getElementById( 'button3' );

    // add onclick events to the buttons which display the sectors
    b1.onclick = function() { s1.style.display = 'block'; }
    b2.onclick = function() { s2.style.display = 'block'; }
    b3.onclick = function() { s3.style.display = 'block'; }
}

//jQuery solution
$(function() {
    $('#button1').click( function() { $('#sector1').show() } );
    $('#button2').click( function() { $('#sector2').show() } );
    $('#button3').click( function() { $('#sector3').show() } );
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-03T21:45:20.490

带有部分圆圈的 3 幅图像对于非绿色的部分应该是透明的。然后所有 4 张图像可以始终叠加，并且按钮可以更改堆叠顺序。“显示”的将位于实心圆圈的顶部，而其他的将位于其下方。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-03T23:26:20.147

您还可以使用完整图像作为 div 的背景，然后在其上使用绿色或覆盖或其他 3 个 div，然后只需切换覆盖的可见性或类别。

我不会说比上述更好或更差，但不同。

# asp.net - Sharepoint 中的文档库 Versions.aspx

> ID：509038
> 
> 赞同：1
> 
> 时间：2009-02-03T21:44:35.237
> 
> 标签：asp.net, sharepoint, sharepoint-designer, sharepoint-api

1.我有一个用户想在 dispform.aspx(Item Details) 上查看当前项目的版本历史
2.版本历史必须显示每个版本的所有元数据。库有 5 列，每次版本更改时我都需要在这些列中显示数据。

我一直在尝试使用 SharePoint Designer 获取版本信息，但无法找到版本页面的存储位置。满足此要求的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-03T22:10:38.117

versions.aspx 文件存在于 12 个配置单元 C:\Program Files\Common Files\Microsoft Shared\web server extensions\12\TEMPLATE\LAYOUTS

这可以为您提供有关如何使用对象模型创建您自己的页面来提供此信息的信息。

这是一项非常重要的任务，需要具备 SharePoint 的编程级别知识。

# java - 当类名作为字符串时转换为未知类型

> ID：509042
> 
> 赞同：0
> 
> 时间：2009-02-03T21:45:31.520
> 
> 标签：java, reflection, casting

```
public class ExampleClass {
    public static void main(String[] args) {
        // TODO Auto-generated method stub
        Horse hr1 = new Horse();
        Horse hr2 = new Horse();
        Horse hr3 = new Horse();
        Horse hr4 = new Horse();
        Set hrSet = new HashSet();
        hrSet.add(hr1);
        hrSet.add(hr2);
        hrSet.add(hr3);
        hrSet.add(hr4);
        Horse hr;
        String hor = "sher_pkg.Horse";
        callHorse(hrSet,hor);
    }
    public static void callHorse(Set xSet,String clsName){
        try {
            Class hrt = Class.forName(clsName);

            Iterator hritr = xSet.iterator();
            while(hritr.hasNext()){
                exam(hrt.cast(hritr.next()));
            }
        } catch (ClassNotFoundException e) {
            e.printStackTrace();
        }
    }
    public static void exam(Object obj){ //I want to use exam(Horse hrr)
        System.out.println(obj);
    }
} 
```

这里考试函数的参数是一个`Object`. 但是我想让参数是......那么在“ ”方法调用`Horse`中必须做哪些改变？`exam(hrt.cast(hritr.next()))`我不想`Horse`在`callHorse()`...中明确使用类名那我该怎么办？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-02-05T04:20:44.547

注意：带有 " 序列的代码`if (x instanceof MyClass)`通常表明您没有足够地使用多态性。通常可以重构代码以摆脱对此进行测试的需要。但为了回答所提出的问题，我将忽略这一点。

你可以做你想做的事，但不能不做一些代码更改。方法重载无法满足您的需求，因为在 Java 中，方法重载是在编译时决定的。因此，如果您在一个类中有两个方法，其中两个方法具有相同的名称、相同的返回类型、但不同的参数类型，那么调用此重载方法的任何代码都必须明确将调用哪个方法。由于使用了显式强制转换，您当前的代码使用它提供的类型执行此操作，但完全动态版本没有。如果方法重载是在运行时决定的，那么你的代码就会做你想做的事。但是因为它是在编译时决定的，所以你的代码不会编译。

要解决您的问题，您可以使用泛型，也可以重构代码。首先，我将介绍一个测试工具，它显示了您开始使用的非常简化的版本：

```
public class Test {
  public void test(Object obj) {
    if (obj instanceof Horse) {
      Horse c = (Horse) obj;
      noise(c);
    }
    if (obj instanceof Cow) {
      Cow c = (Cow) obj;
      noise(c);
    }
  }

  public void noise(Horse h) {
    System.out.println("Neigh");
  }

  public void noise(Cow c) {
    System.out.println("Moo");
  }

  public static void main(String[] args) {
    Object o1 = new Horse();
    Object o2 = new Cow();
    Test tester = new Test();
    tester.test(o1);
    tester.test(o2);
  }
}

class Horse {}

class Cow {} 
```

此代码运行并执行您期望的操作。它打印“Neigh”，然后是“Moo”。

您正在尝试替换

```
 if (obj instanceof Horse) {
      Horse c = (Horse) obj;
      noise(c);
    } 
```

和

```
 if (obj instanceof Horse) {
      handleNoise(obj, Horse.class);
    } 
```

然后添加处理它的方法（简化）：

```
void handleNoise(Object obj, Class clazz) {
  noise(clazz.cast(obj));
} 
```

正如我之前所说，这不起作用，重载`noise`是在编译时决定的。编译器看到您正在转换，但在编译时不知道类型是什么。所以它不能选择重载并且编译失败。

解决这个问题的最好方法是使用多态性，因为多态性是在运行时决定的。也就是说，让所有这些类都实现一些接口，然后将相关代码移动到各个类中。这是一个执行此操作的示例：

```
public class Test {
  public void test(Animal obj) {
    obj.noise();
  }

  public static void main(String[] args) {
    Animal o1 = new Horse();
    Animal o2 = new Cow();
    Test tester = new Test();
    tester.test(o1);
    tester.test(o2);
  }
}

interface Animal {
  void noise();
}

class Horse implements Animal {
  public void noise() {
    System.out.println("Neigh");
  }
}

class Cow implements Animal {
  public void noise() {
    System.out.println("Moo");
  }
} 
```

注意测试方法是多么简单！如果您可以让每个项目实现一个接口来处理您在下面称为 stringProp 的内容，那么您可以简化部分方式：

```
if (obj instanceof Cust) {
  loopOverSet(c.getCustPhonSet());
} else if (obj instanceof Name) {
  loopOverSet(c.getCustNameSet());
}
// and so on for the rest... 
```

然后添加方法：

```
void loopOVerSet(Set cxSet) {
  if (cxSet != null && cxSet.size() > 0) {
    Iterator cxSetIterator = cxSet.iterator();
    while (cxSetIterator.hasNext())
    {
      ((StringProp)cxSetIterator.next()).stringProp();
    }
  }
} 
```

这假设先前重载的方法`stringProp`已被移动到各个类中`CustPhone`，`CustName`依此类推，并且这些类都实现了一些我`StringProp`在此接口定义方法的地方调用的接口`stringProp()`。由于此代码使用*覆盖*而不是*重载*，因此将在运行时决定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-03T21:56:41.530

你可能想看看泛型。

```
public static void callHorse(Set<Horse> xSet) {
    Iterator<Horse> hritr = xSet.iterator();
    while (hritr.hasNext()) {
        exam(hritr.next());
    }
}
public static void exam(Horse obj) { //I want to use exam(Horse hrr)
    System.out.println(obj);
} 
```

当然，在您的示例中，您总是可以只投射对象。为什么你不想这样做超出了我的范围。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-03T22:15:19.433

当你说：

```
exam(Horse hrr) 
```

您告诉编译器您希望它检查对exam() 的所有调用，并确保每个调用都提供一个Horse 对象作为参数。但是，在 callHorse() 中，您使用动态转换参数调用了exam()，编译器无法检查该参数。

您可以通过使用反射和动态调用exam() 方法来解决此问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-02-03T21:56:45.787

您可以在函数调用中显式转换 -

```
 try {
            Class hrt = Class.forName(clsName);

            Iterator hritr = xSet.iterator();
            while(hritr.hasNext()){
                    exam((Horse)hrt.cast(hritr.next()));
            }
    } 
```

但我不太确定您要在这里实现什么 - 如果您正在编写显式引用 Horses 的代码，为什么需要从字符串动态确定类类型？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-02-03T21:57:32.103

首先，您的集合应该使用泛型或明确定义为仅持有马对象。

```
(final Set xSet<Horse>, final String clsName){
...} 
```

解决这个问题，你就解决了 90% 的问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-02-03T22:11:45.353

看起来你的设计对于 Java 是错误的，你不能直接做你要求的事情。

也许您需要重塑您的代码以使用访问者模式？如果做不到这一点，您需要解释您的要求而不是您想要使用的解决方案。通过这种方式，我们可以根据您的要求告诉您正确的 Java 解决方案。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-02-03T22:12:47.223

我不确定避免在 callHorse 方法中引用“Horse”是否可行或可取。从 ClassNotFoundException 之后的 printstacktrace 来看，如果由于某种原因找不到该类，则会抛出一个硬错误。

出于同样的原因，如果 Set 中的某些东西不是 Horse，您难道不能只转换为“Horse”然后捕获 classcastexception 吗？

你能解释一下为什么你需要传入类名而不是类吗？

也许您也可以使用方法重载，但我必须对此进行测试，因为我不完全确定在这种情况下优先级是什么。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-02-03T22:19:35.087

如果您通过使用`Class.cast()`要传递给另一个函数的参数进行动态转换，那么在编译时对您传递的类型一无所知。这就是为什么您不能将`Horse`其用作定义方法的参数类型，而是以您的方式使用反射调用该方法。你的演员做的很少，除了验证——只要你没有得到一个`Exception`——你传入的集合完全由你以其`Class`名义传入的成员组成。

请注意，该`Class.cast()`方法是在 Java 5 中引入的，这意味着如果您可以访问`Class.cast()`. 泛型可以帮助清理问题，尽管它们不能解决您要解决的问题。

使用 Java 5`for`循环，您可以按如下方式重写循环：

```
 public static void callHorse(Set<?> xSet, String clsName) {
    try {
      Class<?> hrt = Class.forName(clsName);
      for (Object x : xSet) {
        exam(hrt.cast(x));
      }
    } catch (ClassNotFoundException e) {
      e.printStackTrace();
    }
  } 
```

这个版本不那么混乱，让你的演员更明显。您正在转换为完全任意的类型。只要可以从类路径加载类定义，强制转换可以是**任何类型。**因此，如果您的`exam()`方法接受一个参数，`Horse`则编译器知道它不能保证调用会成功并且代码无法编译。

即使你尝试重载，它也行不通。也就是说，如果您创建方法：

```
public static void exam(Object obj) {
  System.out.println("Object " + obj);
}

public static void exam(Horse obj) {
  System.out.println("Horse " + obj);
} 
```

该`exam(Object)`方法将**始终**是被调用的方法。尝试一下。

最重要的是，您尝试做的事情无法完成。在我们为您提供帮助之前，您需要向我们提供有关您的目标的更多信息。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-02-03T22:29:39.450

为什么不这样写呢？您的具体要求是什么？

```
public static void main(String[] args) {
    Set<Horse> horses = new HashSet<Horse>();
    horses.add(new Horse());
    horses.add(new Horse());
    horses.add(new Horse());
    horses.add(new Horse());

    callHorse(horses);
}

public static void callHorse(Set<Horse> horses) {
    for (Horse horse : horses) {
        exam(horse);
    }
}

public static void exam(Horse horse) {
    System.out.println(horse);
} 
```

根据您在exam() 方法中所做的事情，将其设为Horse 的实例方法也可能有意义，如下所示：

```
public static void main(String[] args) {
    Set<Horse> horses = new HashSet<Horse>();
    horses.add(new Horse());
    horses.add(new Horse());
    horses.add(new Horse());
    horses.add(new Horse());

    examineHorses(horses);
}

public static void examineHorses(Set<Horse> horses) {
    for (Horse horse : horses) {
        horse.examine();
    }
}

// in Horse.java
public class Horse {
    public void examine() {
        System.out.println(this);
    }
    ...
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-02-04T18:57:40.470

您的真正目标是拥有多个版本的考试（）方法，将不同的类型作为参数，并在运行时动态选择所需的版本吗？

您可以通过反射明确地做到这一点。这是一个示例程序。

```
import java.lang.reflect.*;

public class Test {

public static void exam( Object o ) {
  System.out.println( "Object version called" );
}

public static void exam( Test t ) {
  System.out.println( "Test version called" );
}

public static void main (String[] args) {

try {

  // Create an instance of Test but reference it as an Object

  Object untypedTest = new Test();

  // Calling exam directly will invoke the Object version

  exam( untypedTest );

  // But if we use reflection to select the version of exam
  // that takes the desired class name, we can invoke it without
  // even explicitly casting

  String className = "Test";

  Class[] examMethodParams = { Class.forName( className ) };

  Method examMethod = Test.class.getMethod( "exam", examMethodParams  );

  Object[] actualParams = { untypedTest };

  examMethod.invoke( null, actualParams );

} catch (Exception e) {
  e.printStackTrace();
}

}

} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-02-04T21:59:45.017

你好，

经过搜索，我发现无法执行运行时的动态类型转换。所以我试图弄清楚的似乎是荒谬的。

我试图降低方法1的圈复杂度。我试图创建一个方法2，其中包含在方法1中找到的重复模式的通用模式，并在必要时从方法1调用方法2......

第一种方法的模式是这样的..

```
if (obj instanceof Cust)
{
    Cust c = (Cust) obj;
    Set cxSet = c.getCustPhonSet();
    CustPhon cx;
    if (cxSet != null && cxSet.size() > 0)
    {
        Iterator cxSetIterator = cxSet.iterator();
        while (cxSetIterator.hasNext())
        {
            cx = (CustPhon) cxSetIterator.next();
            this.stringProp(cx);
        }
    }
    //....pattern continues here... CustPhon is replaced by various classes like CustNam etc... Also getCustPhonSet by getCustNamSet etc...
} 
```

所以我想为上述模式编写一个通用方法，如下所示：

```
public void dynamicIteration(Set xlSet, String clsName)
{
    if (xSet != null && xSet.size() > 0)
    {
        try{
            Class clsinstance = Class.forName(clsName);
            Iterator itr = generalSet.iterator();
            while(itr.hasNext())
            {
                this.stringProp(clsinstance.cast(itr.next()));// See this is wrong.. thats y i posted here by using a simple Horse example
            }
        }catch(ClassNotFoundException e)
        {
            e.printStackTrace();
        }
    }
} 
```

从方法 1 调用方法 2

```
//process customer email address
Set cxSet = c.getCustPhonSet();
className = "pkg.CustPhon";
dynamicIteration(cxSet,className);
// Similarly for other patterns 
```

通过这种方式，我必须能够降低圈复杂度

这就是我想要做的..

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2009-02-05T11:42:43.043

嘿，我认为这将解决问题。您需要确定它是哪个对象，以便您可以调用相应的操作，对吗？？？

由于我们使用最重要的概念，因此可以实现所需的功能。

我猜 Eddie 给出的可能是最合适的解决方案？

您覆盖各个类中的方法，以便在调用它时使用相应的方法。

你明白了吗？

# .net - Linq - 未找到或更改行

> ID：509045
> 
> 赞同：15
> 
> 时间：2009-02-03T21:46:35.870
> 
> 标签：.net, linq, linq-to-sql, .net-3.5

我有以下代码：

```
 Guid id = imageMetaData.ID;

        Data.LinqToSQL.Image dbImage = DBContext.Images.Where(x => x.ID == id).SingleOrDefault();

        dbImage.width = imageMetaData.Width;
        dbImage.height = imageMetaData.Height;

        DBContext.SubmitChanges(); 
```

查看 SQL Profiler，正在生成以下 SQL：

```
exec sp_executesql N'UPDATE [dbo].[Images]
SET [height] = @p0, [width] = @p1
WHERE 0 = 1',N'@p0 int,@p1 int',@p0=603,@p1=365 
```

为什么我的 where 语句不包含“where id=....”？？？

我究竟做错了什么？

我的应用程序抛出 ChangeConflictException 并显示消息...“未找到或更改行”

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2009-02-03T22:11:09.410

检查以确保您的模型与数据库匹配。如果它们不同步，我已经遇到过这个问题，在大多数情况下是可以为空的标志。查看这篇[文章](http://weblogs.asp.net/okloeten/archive/2008/04/28/6139181.aspx)以了解可能的原因。

我假设您使用的是 .net 3.5 (Visual Studio 2008) 的发行版。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2011-06-16T15:55:41.813

在以下位置找到解决方案：[http](http://social.msdn.microsoft.com/Forums/en-US/linqprojectgeneral/thread/c672c8ee-bf2a-41b4-bb8b-aa76cc5d9b95) : //social.msdn.microsoft.com/Forums/en-US/linqprojectgeneral/thread/c672c8ee-bf2a-41b4-bb8b-aa76cc5d9b95（由 Todd Fleenor 发布）

问题可以通过将表从服务器资源管理器重新拖动到设计器并重建来解决此错误。所以设计器与 SQL 表不同步......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T08:17:32.353

我遇到了同样的问题，只是删除了 .dbml 文件（设计器）中的表并再次从数据库中删除，然后构建了我的应用程序。它解决了我的问题。

# c# - 如何将属性添加到可以绑定的表适配器？

> ID：509046
> 
> 赞同：0
> 
> 时间：2009-02-03T21:46:51.487
> 
> 标签：c#, .net, asp.net, tableadapter

我有一个数据库表`TravelRequest`，其中包含字段`SignOffName`和`SignOffDate`. 我有一个`TravelRequestTable`基于此表的表适配器。我有一个 DetailsView 控件，它通过 ObjectDataSource 使用它。应该都是相当标准的东西。

我想要做的是添加一个名为`SignOffNameDate`表适配器的属性，该属性组合了两个字段*并*能够在 DetailsView 控件中绑定到它。我想以编程方式而不是在 SQL 中添加另一列，因为处理空值很棘手，并且取决于其他一些业务规则。

这是我尝试过的：

```
public partial class TravelRequestDS
{
    public partial class TravelRequestRow
    {
        public string SignOffNameDate
        {
            get { return CombineNameDate(SignOffName, SignOffDate); }
        }
    }
} 
```

当我以编程方式访问它时，此属性工作正常，但是当我尝试在我的 aspx 页面中绑定到它时：

```
<asp:DetailsView ID="DetailsView_TravelRequest" runat="server" AutoGenerateRows="False"
    DataKeyNames="TravelRequestID" DataSourceID="ObjectDataSource_TravelRequest">
        <Fields>
            <asp:BoundField DataField="SignOffNameDate"
                HeaderText="Sign Off" />
            ... 
```

我收到 System.Web.HttpException 异常，“在所选数据源上找不到名称为 'SignOffNameDate' 的字段或属性。”

任何想法我怎么能做到这一点？我需要添加到属性中的属性吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-02-03T22:01:00.147

如果您不想更改表结构，请更改将数据加载到适配器中的默认方法（通常称为 Fill），很可能您正在执行 Select * From [TravelRequest] 或选择各个字段，所以您可以要做的是将您的 TableAdapter 查询选择语句更改为类似

```
Select [YourCol1],[YourCol2], SignOffNameDate as Null From [TravelRequest] 
```

修改默认查询，并将 SignOffNameDate 选择为 null 将允许您设置此值

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2010-03-04T17:47:13.260

如果您的目标是在单个不可编辑的字段中显示组合结果，您可以这样做：

```
<asp:DetailsView ID="DetailsView_TravelRequest" runat="server" AutoGenerateRows="False"
    DataKeyNames="TravelRequestID" DataSourceID="ObjectDataSource_TravelRequest">
        <Fields>
            <asp:TemplateField HeaderText="Sign Off" SortExpression="SignOffDate">               
                    <ItemTemplate>
                        <asp:Label ID="Label1" runat="server" Text='<%# Bind("SignOffName") %>'></asp:Label>
                        <asp:Label ID="Label2" runat="server" Text='<%# Bind("SignOffDate") %>'></asp:Label>
                    </ItemTemplate>
            </asp:TemplateField>  
            ... 
```

# oracle - SQL Plus 更改当前目录

> ID：509048
> 
> 赞同：17
> 
> 时间：2009-02-03T21:47:33.763
> 
> 标签：oracle, sqlplus

windows下如何更改SQL Plus中的当前目录。

我正在尝试使用几个“@文件名”命令编写脚本。

我知道可以使用 File --> Open 命令打开脚本，这将更改当前目录，但我正在寻找一种自动无人值守的方法。

* * *

## 解析度

根据 Plasmer 的响应，我在 Windows 中设置了 SQLPATH 环境变量，并得到了对我来说足够好的东西。我没有尝试使用 HOST 命令设置它（我怀疑它会起作用）。

Pourquoi Litytestdata 的答案很好，但对我不起作用（目录相距太远）。当然，盖伊关于无法完成的回答也是正确的。我会投票给这两个，并接受 Plasmer 的回答。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2010-04-15T14:22:18.350

这就是我所做的。

定义一个变量来帮助你：

```
define dir=C:\MySYSTEM\PTR190\Tests\Test1

@&dir\myTest1.sql 
```

您不能`cd`在 SQL*Plus 中（您可以`cd`使用 host 命令，但由于它是子进程，因此该设置不会保留在您的父进程中）。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2009-02-03T22:05:24.163

我不认为您可以更改 SQL*Plus 中的目录。

您可以使用 代替更改目录，`@@filename`它会读取另一个脚本，该脚本的位置与当前脚本正在运行的目录相关。例如，如果您有两个脚本

```
C:\Foo\Bar\script1.sql
C:\Foo\Bar\Baz\script2.sql

```

如果它包含该行，则`script1.sql`可以运行`script2.sql`

```
@@Baz\script2.sql

```

有关. [_](http://www.orafaq.com/wiki/SQL%2aPlus_FAQ#What_is_the_difference_between_.40_and_.40.40.3F) _`@@`

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2009-02-03T22:42:14.387

您能否使用 SQLPATH 环境变量告诉 sqlplus 在哪里查找您尝试运行的脚本？我相信您也可以使用 HOST 在脚本中设置 SQLPATH。

如果两个脚本具有相同的名称并且两个目录都在 SQLPATH 中，则可能会出现问题。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-02-03T21:58:26.330

我不认为你可以！

```
/home/export/user1 $ sqlplus / 
> @script1.sql
> HOST CD /home/export/user2
> @script2.sql 
```

script2.sql 必须在`/home/export/user1`.

您要么使用完整路径，要么退出脚本并`sqlplus`从正确的目录重新开始。

```
#!/bin/bash
oraenv .
cd /home/export/user1
sqlplus / @script1.sql
cd /home/export/user2
sqlplus / @script2.sql 
```

（类似的东西 - 从记忆中做这个！）

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2018-06-10T13:21:18.913

对于 Oracle 的新 SQLcl，现在有一个 cd 命令和随附的 pwd。SQLcl 可以在这里下载：[http ://www.oracle.com/technetwork/developer-tools/sqlcl/overview/index.html](http://www.oracle.com/technetwork/developer-tools/sqlcl/overview/index.html)

这是一个简单的例子：

```
SQL>pwd
/Users/klrice/
NOT_SAFE>!ls *.sql
db_awr.sql  emp.sql     img.sql     jeff.sql    orclcode.sql    test.sql
db_info.sql fn.sql      iot.sql     login.sql   rmoug.sql

SQL>cd sql
SQL>!ls *.sql
003.sql             demo_worksheet_name.sql     poll_so_stats.sql
1.sql               dual.sql            print_updates.sql

SQL> 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-02-03T21:59:32.693

您是否尝试过为 sql plus 创建 Windows 快捷方式并设置工作目录？

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2016-08-11T21:18:37.070

我认为 SQLPATH 环境变量是最好的方法 - 如果您有多个路径，请输入以分号 (;) 分隔的路径。请记住，如果目录中存在同名的脚本文件，遇到的第一个（按路径输入的顺序）将被执行，第二个将被忽略。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2017-02-06T15:58:21.700

多年后，我遇到了同样的问题。我的解决方案是创建一个临时批处理文件和另一个 sqlplus 实例：

在第一个 SQL 脚本中：

```
:
set echo off
spool sqlsub_tmp.bat
prompt cd /D D:\some\dir
prompt sqlplus user/passwd@tnsname @second_script.sql
spool off
host sqlsub_tmp.bat
host del sqlsub_tmp.bat
: 
```

请注意，如果您想返回第一个，“second_script.sql”最后需要一个“exit”语句。

* * *

## 回答 #9

> 赞同：-2
> 
> 时间：2016-08-22T10:08:00.770

对我来说，shelling-out 可以完成这项工作，因为它使您可以在 shell 上运行 [a|any] 命令：

[http://www.dba-oracle.com/t_display_current_directory_sqlplus.htm](http://www.dba-oracle.com/t_display_current_directory_sqlplus.htm)

总之查看当前目录：

`!pwd`

更改

`!cd /path/you/want`

# java - 关于 servlet 映射的基本问题

> ID：509049
> 
> 赞同：1
> 
> 时间：2009-02-03T21:47:40.847
> 
> 标签：java, redirect, servlets, jakarta-ee, jboss

一般来说，我是 J2EE 和相关内容的新手。我正在尝试将特定的 Web 应用程序从 Sun One 服务器部署移动到 JBoss。该应用程序充满了许多 servlet，每个 servlet 都重定向到另一个。有太多的 servlet 让我无法在 web.xml 中分别输入每个 servlet 类到 URL 映射的映射。应用程序代码有许多重定向，它们在重定向 URL 中命名 servlet 类名称本身。到目前为止，当我在 JBoss 上运行它时，重定向到 URL 中带有 servlet 类名的 URL 似乎在 JBoss 上不起作用（它给出了 404：未找到，可能是因为 web.xml 中没有映射）。那么是否有任何配置设置可以设置为允许这种情况发生，或者应该在 web.xml 中手动输入每个 URLpattern-to-Servlet 映射？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-02-04T02:23:57.013

有两种解决方案。

*   正如我们所知，JBoss 在后台使用 Tomcat 作为 servlet 容器。您可以启用调用者 servlet，这将使您免于在 web.xml 中映射全部内容。但请注意，这样做会很幼稚，而且一点[也不鼓励](http://faq.javaranch.com/java/InvokerServlet)。

*   其次，您可以编写另一个 servlet/filter 并在您的 web.xml 中为每个 url 模式映射，可能是。然后，您的新 servlet 可以将请求转发到它应该的任何 servlet。

我希望你明白我的意思。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-03T22:17:00.413

不知道你是什么意思

> 应用程序代码有许多重定向，它们在重定向 URL 中命名 servlet 类名称本身

您在 servlet 类中是否有硬编码的 url？多少个servlet？如果您有硬编码的网址，它们可能都已损坏，因为上下文略有不同，或者应用程序名称等。你可以发布一个例子吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-03T22:39:42.597

好吧，代码中有一些硬编码的 URL，但即使我直接在浏览器中输入正确的 URL，我仍然会得到 404。大约有 30 个 servlet（保守的近似值）。例如：http: [//FQDN_SERVER.com/](http://FQDN_SERVER.com/) ?arg1=ABCD&arg2=XYZ 这里的 servlet-classname 实际上是没有“.class”扩展名的 servlet 的类名，这可能不是一个好习惯。但是代码中充满了这种重定向，如果我必须更改它，那么我必须在 web.xml 中为每个这些 servlet 添加一个新的 url 模式，并为每个这些 servlet 构造一个新的 red-rect URL。那么无论如何我可以避免这种情况，还是我必须经历上述提到的痛苦？

谢谢，马诺伊

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-02-03T22:41:16.557

抱歉，URL 模式看起来像这样[http://FQDN_SERVER.com/servlet-classname?arg1=ABCD&arg2=XYZ](http://FQDN_SERVER.com/servlet-classname?arg1=ABCD&arg2=XYZ)

# windows-vista - 如何从文件资源管理器中清除文件路径历史记录？

> ID：509050
> 
> 赞同：0
> 
> 时间：2009-02-03T21:48:19.767
> 
> 标签：windows-vista

在 Microsoft Vista 下，Windows 文件资源管理器会在其历史记录中保留路径和偶尔的文件。可以通过从保留当前目录列表的顶部框中选择下拉菜单来查看此历史记录。我想清除该列表，但我没有看到一个简单的方法来做到这一点。

澄清一下，我说的是文件资源管理器 (explorer.exe)，而不是 Internet Explorer (iexplorer.exe)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-02-03T21:56:33.887

好吧，即使您说您的意思是文件资源管理器而不是 Internet Explorer，您也几乎走在了正确的轨道上。如果您删除 Internet Explorer 历史记录，它也会删除资源管理器中的文件历史记录。

巴特

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-03T21:54:11.143

我确信有办法使用内置的 MS 工具来做到这一点，但是使用我的 XP 框来清除资源管理器中的文件路径之类的东西，我使用了一种叫做 Crap Cleaner ( [http://ccleaner.com](http://ccleaner.com) ) 的东西——擦除任何 Windows 搜索/预取数据/坏 reg 键等。

但是，我不知道它是否与 Vista 一样工作/执行。

*   尼古拉斯

# java - 如何解决未经检查的强制转换警告？

> ID：509076
> 
> 赞同：667
> 
> 时间：2009-02-03T21:57:47.563
> 
> 标签：java, generics, warnings

Eclipse 给我以下形式的警告：

> 类型安全：从 Object 到 HashMap 的未经检查的强制转换

这是来自对我无法控制返回对象的 API 的调用：

```
HashMap<String, String> getItems(javax.servlet.http.HttpSession session) {
  HashMap<String, String> theHash = (HashMap<String, String>)session.getAttribute("attributeKey");
  return theHash;
} 
```

如果可能的话，我想避免 Eclipse 警告，因为理论上它们至少表明存在潜在的代码问题。不过，我还没有找到消除这个问题的好方法。我可以将涉及的单行单独提取到方法中并添加`@SuppressWarnings("unchecked")`到该方法中，从而限制了我忽略警告的代码块的影响。有更好的选择吗？我不想在 Eclipse 中关闭这些警告。

在我来到代码之前，它更简单，但仍然引发了警告：

```
HashMap getItems(javax.servlet.http.HttpSession session) {
  HashMap theHash = (HashMap)session.getAttribute("attributeKey");
  return theHash;
} 
```

当您尝试使用您会收到警告的哈希时，问题出在其他地方：

```
HashMap items = getItems(session);
items.put("this", "that");

Type safety: The method put(Object, Object) belongs to the raw type HashMap.  References to generic type HashMap<K,V> should be parameterized. 
```

* * *

## 回答 #1

> 赞同：592
> 
> 时间：2009-02-03T22:07:09.120

当然，显而易见的答案是不要进行未经检查的演员表。

如果绝对有必要，那么至少尝试限制`@SuppressWarnings`注释的范围。根据它的[Javadocs](http://java.sun.com/javase/6/docs/api/java/lang/SuppressWarnings.html)，它可以处理局部变量；这样，它甚至不会影响整个方法。

例子：

```
@SuppressWarnings("unchecked")
Map<String, String> myMap = (Map<String, String>) deserializeMap(); 
```

没有办法确定是否`Map`真的应该有泛型参数`<String, String>`。你必须事先知道参数应该是什么（或者当你得到 a 时你会发现`ClassCastException`）。这就是代码生成警告的原因，因为编译器不可能知道是否安全。

* * *

## 回答 #2

> 赞同：185
> 
> 时间：2009-02-03T22:46:42.787

不幸的是，这里没有很好的选择。请记住，所有这些的目标是保持类型安全。“ [Java 泛型](https://books.google.co.uk/books?isbn=0596551509)”提供了一种处理非泛型遗留库的解决方案，在第 8.2 节中有一个特别称为“空循环技术”的方法。基本上，进行不安全的演员表，并抑制警告。然后像这样循环遍历地图：

```
@SuppressWarnings("unchecked")
Map<String, Number> map = getMap();
for (String s : map.keySet());
for (Number n : map.values()); 
```

如果遇到意外类型，您将获得一个运行时`ClassCastException`，但至少它会发生在靠近问题根源的地方。

* * *

## 回答 #3

> 赞同：114
> 
> 时间：2009-02-03T22:35:01.937

哇; 我想我找到了自己问题的答案。我只是不确定它是否值得！:)

问题是没有检查演员表。所以，你必须自己检查。您不能只使用 instanceof 检查参数化类型，因为参数化类型信息在运行时不可用，在编译时已被删除。

但是，您可以使用 instanceof 对散列中的每个项目执行检查，这样做，您可以构造一个类型安全的新散列。而且您不会引起任何警告。

感谢 mmyers 和 Esko Luontola，我已经参数化了我最初在这里编写的代码，因此它可以被封装在某个实用程序类中并用于任何参数化的 HashMap。如果您想更好地理解它并且对泛型不是很熟悉，我鼓励您查看此答案的编辑历史记录。

```
public static <K, V> HashMap<K, V> castHash(HashMap input,
                                            Class<K> keyClass,
                                            Class<V> valueClass) {
  HashMap<K, V> output = new HashMap<K, V>();
  if (input == null)
      return output;
  for (Object key: input.keySet().toArray()) {
    if ((key == null) || (keyClass.isAssignableFrom(key.getClass()))) {
        Object value = input.get(key);
        if ((value == null) || (valueClass.isAssignableFrom(value.getClass()))) {
            K k = keyClass.cast(key);
            V v = valueClass.cast(value);
            output.put(k, v);
        } else {
            throw new AssertionError(
                "Cannot cast to HashMap<"+ keyClass.getSimpleName()
                +", "+ valueClass.getSimpleName() +">"
                +", value "+ value +" is not a "+ valueClass.getSimpleName()
            );
        }
    } else {
        throw new AssertionError(
            "Cannot cast to HashMap<"+ keyClass.getSimpleName()
            +", "+ valueClass.getSimpleName() +">"
            +", key "+ key +" is not a " + keyClass.getSimpleName()
        );
    }
  }
  return output;
} 
```

这是很多工作，可能回报很少……我不确定我是否会使用它。对于人们是否认为值得或不值得发表任何评论，我将不胜感激。另外，我很感激改进建议：除了抛出 AssertionErrors 之外，我还能做些什么更好的事情？有更好的东西我可以扔吗？我应该将其设为已检查的异常吗？

* * *

## 回答 #4

> 赞同：53
> 
> 时间：2011-10-21T17:40:14.880

在 Eclipse Preferences 中，转到 Java->Compiler->Errors/Warnings->Generic types 并选中`Ignore unavoidable generic type problems`复选框。

这满足了问题的意图，即

> 我想避免 Eclipse 警告...

如果不是精神。

* * *

## 回答 #5

> 赞同：27
> 
> 时间：2009-02-03T22:54:33.597

您可以创建如下所示的实用程序类，并使用它来抑制未经检查的警告。

```
public class Objects {

    /**
     * Helps to avoid using {@code @SuppressWarnings({"unchecked"})} when casting to a generic type.
     */
    @SuppressWarnings({"unchecked"})
    public static <T> T uncheckedCast(Object obj) {
        return (T) obj;
    }
} 
```

您可以按如下方式使用它：

```
import static Objects.uncheckedCast;
...

HashMap<String, String> getItems(javax.servlet.http.HttpSession session) {
      return uncheckedCast(session.getAttribute("attributeKey"));
} 
```

关于这个的更多讨论在这里： [http ://cleveralias.blogs.com/thought_spearmints/2006/01/suppresswarning.html](http://cleveralias.blogs.com/thought_spearmints/2006/01/suppresswarning.html)

* * *

## 回答 #6

> 赞同：23
> 
> 时间：2011-03-01T23:04:58.450

这东西很难，但这是我目前的想法：

如果您的 API 返回 Object，那么您将无能为力——无论如何，您将盲目地转换对象。您让 Java 抛出 ClassCastExceptions，或者您可以自己检查每个元素并抛出 Assertions 或 IllegalArgumentExceptions 等，但这些*运行时*检查都是等效的。无论您在运行时做什么，都必须抑制*编译时未经检查的强制转换。*

我只是更喜欢盲投并让 JVM 为我执行运行时检查，因为我们“知道”API 应该返回什么，并且通常愿意假设 API 有效。如果需要，请在演员表上方的任何地方使用泛型。你并没有真正在那里购买任何东西，因为你仍然有单一的盲投，但至少你可以从那里开始使用泛型，这样 JVM 可以帮助你避免在其他代码片段中进行盲投。

在这种特殊情况下，大概您可以看到对 SetAttribute 的调用并看到类型正在进入，因此在退出时将类型盲转换为相同并不是不道德的。添加引用 SetAttribute 的注释并完成它。

* * *

## 回答 #7

> 赞同：17
> 
> 时间：2015-08-13T10:57:01.317

这是一个简短的示例，通过采用其他答案中提到的两种策略**来避免“未经检查的演员表”警告。**

1.  在运行时将感兴趣类型的类作为参数传递 ( `Class<T> inputElementClazz`)。然后你可以使用：`inputElementClazz.cast(anyObject);`

2.  对于 Collection 的类型转换，请使用通配符 ? 而不是泛型类型 T 来承认您确实不知道从遗留代码中期望什么样的对象（`Collection<?> unknownTypeCollection`）。毕竟，这就是“未经检查的演员表”警告想要告诉我们的：我们不能确定我们得到 a `Collection<T>`，所以诚实的做法是使用 a `Collection<?>`。如果绝对需要，仍然可以构建已知类型的集合（`Collection<T> knownTypeCollection`）。

下面示例中接口的遗留代码在 StructuredViewer 中有一个属性“input”（StructuredViewer 是树或表格小部件，“input”是它背后的数据模型）。这个“输入”可以是任何类型的 Java 集合。

```
public void dragFinished(StructuredViewer structuredViewer, Class<T> inputElementClazz) {
    IStructuredSelection selection = (IStructuredSelection) structuredViewer.getSelection();
    // legacy code returns an Object from getFirstElement,
    // the developer knows/hopes it is of type inputElementClazz, but the compiler cannot know
    T firstElement = inputElementClazz.cast(selection.getFirstElement());

    // legacy code returns an object from getInput, so we deal with it as a Collection<?>
    Collection<?> unknownTypeCollection = (Collection<?>) structuredViewer.getInput();

    // for some operations we do not even need a collection with known types
    unknownTypeCollection.remove(firstElement);

    // nothing prevents us from building a Collection of a known type, should we really need one
    Collection<T> knownTypeCollection = new ArrayList<T>();
    for (Object object : unknownTypeCollection) {
        T aT = inputElementClazz.cast(object);
        knownTypeCollection.add(aT);
        System.out.println(aT.getClass());
    }

    structuredViewer.refresh();
} 
```

当然，如果我们使用带有错误数据类型的遗留代码（例如，如果我们将数组设置为 StructuredViewer 的“输入”而不是 Java 集合），上述代码可能会产生运行时错误。

调用方法示例：

```
dragFinishedStrategy.dragFinished(viewer, Product.class); 
```

* * *

## 回答 #8

> 赞同：13
> 
> 时间：2009-02-04T16:59:20.037

在 HTTP Session 世界中，您无法真正避免强制转换，因为 API 是这样编写的（仅获取和返回`Object`）。

不过，只要做一些工作，您就可以轻松避免未经检查的演员表。这意味着它将变成一个传统的演员`ClassCastException`表，在发生错误时给予那里的权利）。未经检查的异常可能会在以后的任何时候变成 a`CCE`而不是强制转换的点（这就是它是单独警告的原因）。

将 HashMap 替换为专用类：

```
import java.util.AbstractMap;
import java.util.Collection;
import java.util.HashMap;
import java.util.Map;
import java.util.Set;

public class Attributes extends AbstractMap<String, String> {
    final Map<String, String> content = new HashMap<String, String>();

    @Override
    public Set<Map.Entry<String, String>> entrySet() {
        return content.entrySet();
    }

    @Override
    public Set<String> keySet() {
        return content.keySet();
    }

    @Override
    public Collection<String> values() {
        return content.values();
    }

    @Override
    public String put(final String key, final String value) {
        return content.put(key, value);
    }
} 
```

然后强制转换为该类而不是`Map<String,String>`所有内容都将在您编写代码的确切位置进行检查。以后不出意外`ClassCastExceptions`。

* * *

## 回答 #9

> 赞同：10
> 
> 时间：2017-09-01T20:22:35.333

在 Android Studio 中，如果您想禁用检查，您可以使用：

```
//noinspection unchecked
Map<String, String> myMap = (Map<String, String>) deserializeMap(); 
```

* * *

## 回答 #10

> 赞同：8
> 
> 时间：2009-02-03T23:19:04.047

在这种特殊情况下，我不会将 Maps 直接存储到 HttpSession 中，而是我自己的类的一个实例，它又包含一个 Map（类的实现细节）。然后你可以确定地图中的元素是正确的类型。

但是，如果您无论如何都想检查 Map 的内容是否属于正确类型，则可以使用如下代码：

```
public static void main(String[] args) {
    Map<String, Integer> map = new HashMap<String, Integer>();
    map.put("a", 1);
    map.put("b", 2);
    Object obj = map;

    Map<String, Integer> ok = safeCastMap(obj, String.class, Integer.class);
    Map<String, String> error = safeCastMap(obj, String.class, String.class);
}

@SuppressWarnings({"unchecked"})
public static <K, V> Map<K, V> safeCastMap(Object map, Class<K> keyType, Class<V> valueType) {
    checkMap(map);
    checkMapContents(keyType, valueType, (Map<?, ?>) map);
    return (Map<K, V>) map;
}

private static void checkMap(Object map) {
    checkType(Map.class, map);
}

private static <K, V> void checkMapContents(Class<K> keyType, Class<V> valueType, Map<?, ?> map) {
    for (Map.Entry<?, ?> entry : map.entrySet()) {
        checkType(keyType, entry.getKey());
        checkType(valueType, entry.getValue());
    }
}

private static <K> void checkType(Class<K> expectedType, Object obj) {
    if (!expectedType.isInstance(obj)) {
        throw new IllegalArgumentException("Expected " + expectedType + " but was " + obj.getClass() + ": " + obj);
    }
} 
```

* * *

## 回答 #11

> 赞同：8
> 
> 时间：2011-08-11T13:53:27.977

Esko Luontola 上述答案中的 Objects.Unchecked 实用程序函数是避免程序混乱的好方法。

如果您不想在整个方法上使用 SuppressWarnings，Java 会强制您将其放在本地。如果您需要对成员进行强制转换，则可能会导致如下代码：

```
@SuppressWarnings("unchecked")
Vector<String> watchedSymbolsClone = (Vector<String>) watchedSymbols.clone();
this.watchedSymbols = watchedSymbolsClone; 
```

使用该实用程序要干净得多，而且您在做什么仍然很明显：

```
this.watchedSymbols = Objects.uncheckedCast(watchedSymbols.clone()); 
```

***注意：*** 我觉得重要的是要补充一点，有时警告真的意味着你做错了，比如：

```
ArrayList<Integer> intList = new ArrayList<Integer>();
intList.add(1);
Object intListObject = intList; 

 // this line gives an unchecked warning - but no runtime error
ArrayList<String> stringList  = (ArrayList<String>) intListObject;
System.out.println(stringList.get(0)); // cast exception will be given here 
```

编译器告诉您的是，在运行时不会检查此转换，因此在您尝试访问通用容器中的数据之前不会引发运行时错误。

* * *

## 回答 #12

> 赞同：6
> 
> 时间：2015-03-09T23:43:39.510

警告抑制不是解决方案。您不应该在一个语句中进行两级转换。

```
HashMap<String, String> getItems(javax.servlet.http.HttpSession session) {

    // first, cast the returned Object to generic HashMap<?,?>
    HashMap<?, ?> theHash = (HashMap<?, ?>)session.getAttribute("attributeKey");

    // next, cast every entry of the HashMap to the required type <String, String>
    HashMap<String, String> returingHash = new HashMap<>();
    for (Entry<?, ?> entry : theHash.entrySet()) {
        returingHash.put((String) entry.getKey(), (String) entry.getValue());
    }
    return returingHash;
} 
```

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2009-02-03T22:04:45.647

快速猜测一下，如果您发布您的代码可以肯定地说，但您可能已经做了一些类似的事情

```
HashMap<String, Object> test = new HashMap(); 
```

当你需要做的时候会产生警告

```
HashMap<String, Object> test = new HashMap<String, Object>(); 
```

可能值得一看

[Java 编程语言中的泛型](http://java.sun.com/j2se/1.5/pdf/generics-tutorial.pdf)

如果您不熟悉需要做什么。

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2009-02-03T22:05:08.547

我可能误解了这个问题（一个例子和几行周围的行会很好），但你为什么不总是使用适当的接口（和 Java5+）？我看不出你为什么要转换为 a`HashMap`而不是 a `Map<KeyType,ValueType>`。事实上，我无法想象*有任何*理由将变量的类型设置为`HashMap`而不是`Map`.

为什么来源是`Object`？它是遗留集合的参数类型吗？如果是这样，请使用泛型并指定所需的类型。

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2009-02-03T22:47:49.523

如果我必须使用不支持泛型的 API。我尝试用尽可能少的行将这些调用隔离在包装例程中。然后我使用 SuppressWarnings 注释并同时添加类型安全强制转换。

这只是个人喜好，以保持事物尽可能整洁。

* * *

## 回答 #16

> 赞同：2
> 
> 时间：2010-10-14T09:28:19.927

拿这个来说，它比创建一个新的 HashMap 快得多，如果它已经是一个，但仍然安全，因为每个元素都会根据它的类型进行检查......

```
@SuppressWarnings("unchecked")
public static <K, V> HashMap<K, V> toHashMap(Object input, Class<K> key, Class<V> value) {
       assert input instanceof Map : input;

       for (Map.Entry<?, ?> e : ((HashMap<?, ?>) input).entrySet()) {
           assert key.isAssignableFrom(e.getKey().getClass()) : "Map contains invalid keys";
           assert value.isAssignableFrom(e.getValue().getClass()) : "Map contains invalid values";
       }

       if (input instanceof HashMap)
           return (HashMap<K, V>) input;
       return new HashMap<K, V>((Map<K, V>) input);
    } 
```

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2009-02-03T22:16:34.250

只需在投射之前对其进行类型检查。

```
Object someObject = session.getAttribute("attributeKey");
if(someObject instanceof HashMap)
HashMap<String, String> theHash = (HashMap<String, String>)someObject; 
```

对于任何询问的人，收到您不确定类型的对象是很常见的。大量遗留的“SOA”实现传递了您不应该总是信任的各种对象。（恐怖！）

**编辑**更改了一次示例代码以匹配海报的更新，并在一些评论之后我发现 instanceof 不能很好地与泛型配合使用。但是，更改检查以验证外部对象似乎与命令行编译器配合得很好。修订后的示例现已发布。

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2009-02-04T15:46:45.503

几乎计算机科学中的每个问题都可以通过添加间接级别*或其他东西来解决。

因此，引入一个比 a 更高级别的非泛型对象`Map`。没有上下文，它看起来不会很有说服力，但无论如何：

```
public final class Items implements java.io.Serializable {
    private static final long serialVersionUID = 1L;
    private Map<String,String> map;
    public Items(Map<String,String> map) {
        this.map = New.immutableMap(map);
    }
    public Map<String,String> getMap() {
        return map;
    }
    @Override public String toString() {
        return map.toString();
    }
}

public final class New {
    public static <K,V> Map<K,V> immutableMap(
        Map<? extends K, ? extends V> original
    ) {
        // ... optimise as you wish...
        return Collections.unmodifiableMap(
            new HashMap<String,String>(original)
        );
    }
}

static Map<String, String> getItems(HttpSession session) {
    Items items = (Items)
        session.getAttribute("attributeKey");
    return items.getMap();
} 
```

*除了太多的间接级别。

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2015-01-30T00:15:32.163

这是我在覆盖`equals()`操作时处理此问题的一种方法。

```
public abstract class Section<T extends Section> extends Element<Section<T>> {
    Object attr1;

    /**
    * Compare one section object to another.
    *
    * @param obj the object being compared with this section object
    * @return true if this section and the other section are of the same
    * sub-class of section and their component fields are the same, false
    * otherwise
    */       
    @Override
    public boolean equals(Object obj) {
        if (obj == null) {
            // this exists, but obj doesn't, so they can't be equal!
            return false;
        }

        // prepare to cast...
        Section<?> other;

        if (getClass() != obj.getClass()) {
            // looks like we're comparing apples to oranges
            return false;
        } else {
            // it must be safe to make that cast!
            other = (Section<?>) obj;
        }

        // and then I compare attributes between this and other
        return this.attr1.equals(other.attr1);
    }
} 
```

这似乎在 Java 8 中工作（甚至用 编译`-Xlint:unchecked`）

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2010-06-12T12:52:52.917

如果您确定 session.getAttribute() 返回的类型是 HashMap ，那么您不能将类型转换为该确切类型，而仅依赖于检查通用 HashMap

```
HashMap<?,?> getItems(javax.servlet.http.HttpSession session) {  
    HashMap<?,?> theHash = (HashMap<?,?>)session.getAttribute("attributeKey");
    return theHash;
} 
```

然后 Eclipse 会发出意外警告，但这当然会导致难以调试的运行时错误。我只在非操作关键的上下文中使用这种方法。

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2011-03-21T19:09:52.330

两种方法，一种完全避免标签，另一种使用顽皮但很好的实用方法。
问题是预泛化的集合......
我相信经验法则是：“一次投射一件事” - 这意味着在泛化世界中尝试使用原始类时，因为你不知道什么在这个 Map<?, ?> 中（实际上 JVM 甚至可能会发现它甚至不是一个 Map！），当你​​想到它时，很明显你不能转换它。如果你有一个 Map<String, ?> map2 那么 HashSet<String> keys = (HashSet<String>)map2.keySet() 不会给你一个警告，尽管这对编译器来说是一种“信仰行为”（因为它可能会变成一个 TreeSet）......但这只是一个***单一***的信仰行为。

PS反对以我的第一种方式进行迭代“很无聊”并且“需要时间”，答案是“没有痛苦就没有收获”：保证泛化集合包含 Map.Entry<String, String>s，什么都没有别的。您必须为此担保付费。当系统地使用仿制药时，这种付款方式很漂亮，采用编码合规性的形式，而不是机器时间！
一种思想流派可能会说，您应该设置 Eclipse 的设置以产生这种未经检查的强制转换错误，而不是警告。在这种情况下，您将不得不使用我的第一种方式。

```
package scratchpad;

import java.util.HashMap;
import java.util.Iterator;
import java.util.Map;
import java.util.Vector;

public class YellowMouse {

    // First way

    Map<String, String> getHashMapStudiouslyAvoidingSuppressTag(HttpSession session) {
      Map<?, ?> theHash = (Map<?, ?>)session.getAttribute("attributeKey");

      Map<String, String> yellowMouse = new HashMap<String, String>();
      for( Map.Entry<?, ?> entry : theHash.entrySet() ){
        yellowMouse.put( (String)entry.getKey(), (String)entry.getValue() );
      }

      return yellowMouse;
    }

    // Second way

    Map<String, String> getHashMapUsingNaughtyButNiceUtilityMethod(HttpSession session) {
      return uncheckedCast( session.getAttribute("attributeKey") );
    }

    // NB this is a utility method which should be kept in your utility library. If you do that it will
    // be the *only* time in your entire life that you will have to use this particular tag!!

    @SuppressWarnings({ "unchecked" })
    public static synchronized <T> T uncheckedCast(Object obj) {
        return (T) obj;
    }

} 
```

* * *

## 回答 #22

> 赞同：-1
> 
> 时间：2010-08-23T20:46:37.900

这使警告消失...

```
 static Map<String, String> getItems(HttpSession session) {
        HashMap<?, ?> theHash1 = (HashMap<String,String>)session.getAttribute("attributeKey");
        HashMap<String,String> theHash = (HashMap<String,String>)theHash1;
    return theHash;
} 
```

* * *

## 回答 #23

> 赞同：-4
> 
> 时间：2013-02-28T20:27:30.643

解决方案：在 Eclipse 中禁用此警告。不要@SuppressWarnings 它，完全禁用它。

上面介绍的几个“解决方案”是不合时宜的，为了抑制愚蠢的警告而使代码不可读。

# apache-flex - flex 3 网络服务

> ID：509078
> 
> 赞同：0
> 
> 时间：2009-02-03T21:58:15.317
> 
> 标签：apache-flex, web-services, actionscript

我在我的 flex 应用程序中使用 web 服务组件，但是当我通过我的应用程序使用相同的 web 服务调用时，我发现我一遍又一遍地使用相同的代码。

是否有创建 Web 服务组件的最佳实践？我是否应该将所有代码放在一个动作脚本类中，如果是的话，你有任何示例吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-02-03T22:15:28.963

您可以考虑为您的 Web 服务创建代理类。Flex 3 builder 会自动[为您完成，](http://livedocs.adobe.com/flex/3/html/help.html?content=data_4.html)但我发现它非常臃肿。您可以查看它并创建自己的简单代理。

我通常从创建这样的方法开始-

```
public function GetProducts(id:String, onSucess:Function, onFailure:Function) {
    //1\. Create web service component and set properties
    //2\. Call the WS and get a token
    //3\. Add a responder to the token with closures wrapping onSuccess and onFailure
} 
```

# iis - 下载文件后在空白屏幕上显示内容

> ID：509084
> 
> 赞同：1
> 
> 时间：2009-02-03T21:58:42.650
> 
> 标签：iis, file, download

我观察到在某些情况下，Web 浏览器会导航到空白页面，然后提示用户下载文件。在我目前的情况下，它正在导航到生成 Excel 文件的 URL。该文件的下载工作完美，但用户现在被困在一个空白页面上。我想弄清楚两件事：

1.  什么原因导致显示空白页？它不会一直发生。这是使用 GET 和 POST 之间的区别吗（我不记得看到超链接这样做，但表单通常这样做）？它与内容处置有关吗？在我目前的情况下，我将 Content-Disposition 设置为“内联”，因为我希望它显示在 IE 的浏览器中。Firefox（可能还有其他）当然会提示下载，因为它们无法内联显示。用户选择保存它的情况是出现空白屏幕。
2.  如果可能的话，我想在这个空白屏幕上显示一些内容，以向用户提供诸如“您的文件已生成，单击此处返回主屏幕”之类的消息。有没有办法我可以做到这一点？

我正在使用用 C++ 编写的 IIS 扩展，因此 ASP、PHP 等的解决方案将无济于事，除非它们普遍适用（尽管我不介意学习这些语言的解决方案！）。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-04T08:58:13.817

我认为您实际上回答了您自己的问题：将 content-disposition 设置为 inline 就是这样做的。想到的一种解决方案是*浏览器检测*：如果浏览器是 IE，则使用内联配置，否则使用附件。

顺便说一句，作为用户，我更喜欢那些让我可以选择是下载文件还是在浏览器中查看文件的网站（例如，访问 PDF 文件时）。在这种情况下，我会考虑使用一个链接/按钮来下载文件，并为 IE 浏览器添加第二个链接/按钮来查看它。

# sql-server-2005 - 使用 Log Parser 分析 SQL Server 2005 事务日志

> ID：509101
> 
> 赞同：1
> 
> 时间：2009-02-03T22:03:35.010
> 
> 标签：sql-server-2005, transactionloganalysis

是否可以使用 LogParser 2.2 分析 SQL Server 2005 事务日志？如果没有，有什么替代方案？Red Gate 的工具只分析 SQL Server 2000，而 Lumigent 的 Log Parser 无处可寻。

TIA 拉梅什

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-03T22:10:08.973

原因是 2005/2008 年的日志是专有的和不同的格式，并且 MSFT 尚未发布规范，因此还没有适用于 2005 年和 2008 年的日志解析器

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-04T23:37:55.660

如果您的数据库消耗了 75% 并且您的连接都在使用中，那么您可能首先检查活动监视器并查看哪些进程正在搅动和/或运行分析器，然后再担心日志文件。

编辑：对不起，最初错过了您提到您重新启动的部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-06T08:00:45.393

您需要在问题开始后、但在 SQL Server 阻止用户连接之前将 SQL Profiler 附加到 SQL 实例。尝试暂停服务几分钟以允许某些连接完成并断开连接，然后取消暂停服务并查看分析器是否可以连接。

还可以尝试在服务器上本地运行 SQL Profiler。虽然远程连接可能不起作用，但本地连接可能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-17T09:25:45.020

有一种产品可以满足我的需求，不幸的是它并不便宜。它允许您监控 SQL 2005/2008 的事务日志。我会喜欢一些开源的东西，但还找不到任何东西。

[http://www.apexsql.com/sql_tools_logapi.asp](http://www.apexsql.com/sql_tools_logapi.asp)

# php - Zend_Form + DHTML 内容

> ID：509112
> 
> 赞同：2
> 
> 时间：2009-02-03T22:06:41.557
> 
> 标签：php, zend-framework, zend-form

**将新**的 dhtml 内容动态添加到通过 Zend_Form 生成的表单的最佳方式是什么？例如，假设表单是这样创建的：

```
class formUser extends Zend_Form {
    public function __construct( $options = null ) {
        parent::__construct( $options );

        $page1 = new Zend_Form_Element_Text( 'page1' );
        $page1->setLabel( 'Page 1' );

        $submit = new Zend_Form_Element_Submit( 'submit' );
        $this->addElements( array( $page1, $submit ) );
    }
} 
```

在这里，表单创建了一个且只有一个名为“page1”的元素，**但如果我想在视图中添加一个“添加”按钮，该按钮将动态生成更多元素**，如 page2、page3、page4 等，同时将其与Zend_Form ?

[**这就是我说的效果**](http://mohamedshaiful.googlepages.com/add_remove_form.htm)

[这不是我，但他有同样的问题，也许措辞更好](http://www.zfforums.com/zend-framework-general-discussions-1/general-q-zend-framework-2/adding-dynamic-elements-zend-form-1687.html)

就我而言，它实际上是一个孩子和父母的关系。在这个区域附近，一个人可能有 0 或 15 个孩子，我不会挑眉。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-02-06T13:41:54.817

我现在没有时间详细介绍编码的细节，但我会这样做：

由于您希望表单的结构（而不​​仅仅是数据）是可编辑的，因此您必须实例化它并将其存储在会话中。

除了生成一些额外的 HTML 标记之外，您的 JavaScript 还必须对您的服务器进行 Ajax 调用。单击“添加”按钮时以这种方式调用的操作将更改`Zend_Form`会话中的实例存储。然后，Ajax 调用可以返回要插入的附加标记或整个表单标记的新版本。

在前一种情况下，由您的 JavaScript 代码来确保以浏览器显示与`Zend_Form`服务器上的表示一致的方式插入标记。在后一种情况下——返回整个表单——用户输入必须在 Ajax 调用中传输，否则当表单被新版本替换时它会丢失。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-03-22T16:10:19.753

在这里很好地描述了“cg”答案的实现。 [http://www.jeremykendall.net/2009/01/19/dynamically-adding-elements-to-zend-form/](http://www.jeremykendall.net/2009/01/19/dynamically-adding-elements-to-zend-form/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-04T00:46:36.833

完成任务的提示可能是定义一个隐藏输入，当您添加新元素时，您可以在其中增加“pageNb”。

然后过滤和验证您的表单，您可以使用循环在控制器中动态创建元素及其验证要求。

就像是 ：

// PHP

```
$userForm = new formUser();

for ($i = 0; $i < $_POST['pageNumber']; ++$i)
{
  $element = new Zend_Form_Element_Text('page' . $i);
  $element->addValidator('SomeValidator');

  $userForm->addElement($element);
}

if ($userForm->isValid($_POST]) 
{
 // bla bla bla
} 
```

// Javascript

```
function addNewInput ()
{
   pageNb = document.getElementbyId('pageNb').value;
   pageNb.value = ++pageNb;
   // here put the trick to create a new node/input element.
   newElement.id = pageNb.value;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-02-04T05:21:51.817

我认为您不需要任何特殊的 Zend 东西来解决这个问题 - 您发布的 javascript 示例会将 html 添加到您想要的页面中，然后当您提交它时，您将在发布的页面上拥有所有数据相同的。只需确保遵循您在开始时使用的命名方案。你甚至可以使用数组

```
$element->setIsArray(true); 
```

像这样创建 HTML

```
name="foo[]" id="foo" 
```

# jquery - 将 JQuery UI.Resizable() 和 UI.Draggable() 与 iFrame 一起使用时遇到问题

> ID：509118
> 
> 赞同：7
> 
> 时间：2009-02-03T22:07:56.967
> 
> 标签：jquery, html, css, iframe

我正在尝试使用 JQuery 创建一个对话窗口。到目前为止，我正在取得进展，但遇到了 iframe 的一些问题......我知道 iframe 通常不受欢迎，但它们是唯一能满足项目要求的东西。

无论如何，我可以成功实现可调整大小和可拖动的插件，但是如果用户快速拖动并将鼠标悬停在对话框内部 div 中包含的 iframe 上，我会遇到问题。有点难以解释，但下面的代码应该有助于显示正在发生的事情。

似乎一旦鼠标越过 iframe，iframe 就会窃取 mousedown 事件的焦点。我想知道是否有任何解决方法。

谢谢，克里斯

```
<div id="container" style="border: solid 1px Black; padding: 10px 10px 10px 10px; height: 520px; width: 420px;">
    <iframe id="if" src="http://google.com" style="width: 400px; height: 500px;"></iframe>
</div>

<script type="text/javascript" src="jquery-1.2.6.js"></script>
<script type="text/javascript" src="jquery.ui.all.js"></script>
<script type="text/javascript">

$(document).ready(function()
    {
        $("#container").draggable();
        $("#container").resizable(
            {
                alsoResize: "#if"
            }
        ).parent().draggable();
    }
); 
```

编辑：为了运行应用程序，需要下载代码中引用的 jquery 文件。不过，代码应该向后兼容以前的版本。

编辑：我稍微修改了代码以简化一些事情。[编辑：我找到了一种通过使用原型窗口](http://prototype-window.xilinus.com/documentation.html)库

来解决这个问题的替代方法。我宁愿使用 jQuery 而不是原型，因为许多基准测试要好得多，但由于我的时间紧迫，原型路线会做。如果有人有一些建议，我仍然有兴趣弄清楚这一点。再次感谢你的帮助。 编辑：如果我将 iframe 更改为 div，上面的代码可以完美运行。问题似乎只是涉及 iframe 时可拖动和可调整大小的扩展功能的方式。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-03-20T18:17:31.773

@aleemb：我不相信他在说什么。我认为问题出在 iframe 而不是可拖动和可调整大小的组合。

@regex：我也有同样的问题，它也表现在使用原型工具包的先前实现中。

我的实现使用 Iframe 作为画布，在其上放置可拖动对象。您可以看到该错误的方法是将鼠标移动得太快，以使光标离开可拖动 DIV 的边缘。DIV 停止移动，鼠标继续移动；通过将鼠标移回 DIV 的表面，它会再次拾取 DIV 并开始移动，即使您已经释放了对鼠标的点击。

我的怀疑是 Iframe 事件以某种方式干扰了 jquery 事件。

我的解决方案是在 iframe 和可拖动/可调整大小之间放置一个透明的 DIV 标签。

以这种方式，iframe 永远不会看到鼠标移动，因此不会干扰。

编辑：见代码示例：[http ://dpaste.com/hold/17009/](http://dpaste.com/hold/17009/)

韦斯

更新！我重新审视了这个问题，iframeFix 似乎在所有浏览器中都适用于可拖动对象，但可调整大小的对象没有等效的修复。

我使用此代码手动添加掩码 DIV：

```
$elements.resizable({ //mark it as resizable
    containment: "#docCanvas",
    start: function(event, ui) {
        //add a mask over the Iframe to prevent IE from stealing mouse events
        $j("#docCanvas").append("<div id=\"mask\" style=\"background-image:url(images/spacer.gif); position: absolute; z-index: 2; left: 0pt; top: 0pt; right: 0pt; bottom: 0pt;\"></div>");
    },
    stop: function(event, ui) {
        //remove mask when dragging ends
        $j("#mask").remove();
    }
}); 
```

和 HTML：

```
<div id="docCanvas" style="position: relative;">
    <iframe src="something.html"></iframe>
</div> 
```

spacer.gif 是一个 1x1 像素的透明 gif。

这解决了 IE7 和 IE8 的问题。IE6 在 z-index 方面存在问题，并且似乎无法确定 DIV 应该位于 IFrame 和可调整大小的 DIV 之间。我放弃了IE6。

韦斯

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-02-04T00:30:34.307

最近遇到了同样的[可调整大小/可重新拖动的问题](http://aleembawany.com/2009/01/25/jquery-resizable-draggable-bug-workaround/)。

```
// this will make <div id="box"> resizable() and draggable()
$('#box').resizable().parent().draggable();

// same but slightly safer since it checks parent's class
$('#box').resizable().parent('.ui-wrapper').draggable(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-03-10T16:39:27.100

在使用类似于@wes 建议的解决方案后，我找到了一个更简单的解决方案，不需要 javascript 代码。只需将以下内容添加到您的 CSS 中：

```
.ui-resizable-resizing:after
{
    content: '';
    position: absolute; 
    z-index: 999; 
    left: 0px; 
    top: 0px; 
    right: 0px;
    bottom: 0px;
} 
```

一旦用户开始调整大小，jQuery 添加 .ui-resizable-resizing 类，并添加一个覆盖。请注意，您需要在调整大小的对象上使用“位置：相对”。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-07-17T17:26:54.933

我相信您也可以通过将“iframeFix”参数添加到“选项”下的文档中描述的可拖动初始化来解决此问题[http://jqueryui.com/demos/draggable/](http://jqueryui.com/demos/draggable/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-08-15T12:50:53.647

不幸的是，iframeFix 存在一个问题，即一旦可拖动透明 div 就很难释放。我之前写过另一个更强大的版本，但不幸的是我丢失了代码......如果我设法解决问题，我将重新发布我的代码。

编辑：好的，我制定了一份手册但更好的方法......至少在我的情况下

当单击包含 div 时（onmousedown），您仍然会在 iframe 容器的顶部创建一个透明 div。这个透明的 div 位于 top:-90%，这应该将它带到 iframe 上（取决于您的样式，它可能更像 top:-100%;）。在透明 div 的 onmouseupEvent 上，添加删除透明 div 的代码。

JSFUNCTIONS function coverIframes() { $(".normalWindow").append(""); }

```
function uncoverIframes() {
    $(".cover").remove();
} 
```

透明 div div.cover { width:100%; 的 CSS 样式 高度：100%；最高：-90%；位置：相对；}

示例 HTML

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2010-11-17T09:26:58.547

试试这个

$('#Div').draggable({ iframeFix: true });

这应该工作

[http://docs.jquery.com/UI/API/1.8/Draggable](http://docs.jquery.com/UI/API/1.8/Draggable)

# file - PHP错误读取远程文件

> ID：509132
> 
> 赞同：2
> 
> 时间：2009-02-03T22:12:17.427
> 
> 标签：file

当我尝试做一个文件时（' [http://somewebsite.com](http://somewebsite.com) '）我得到一个错误

“在服务器配置中禁用 URL 文件访问”

我尝试使用 ini_set('allow_url_fopen', 'On'); 但这没有用。

我正在使用共享主机。有什么建议么？

我想做的就是阅读网站的html源代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-03T22:15:21.930

在 php 版本>4.3.4 和 <6，你[不能`allow_url_fopen`](http://www.php.net/manual/en/filesystem.configuration.php#ini.allow-url-fopen)在你的脚本中设置。尝试使用[curl](http://php.net/curl)代替。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-03T22:22:17.780

如果您的主机允许并读取自定义`.htaccess`文件，请尝试将以下行`.htaccess`放在项目的根目录下：

```
php_flag allow_url_fopen on
```

看看有没有效果...

# sharepoint - 创建一个新字段并更新内容类型（以及所有实现）

> ID：509133
> 
> 赞同：2
> 
> 时间：2009-02-03T22:12:27.003
> 
> 标签：sharepoint

我正在现有的 SharePoint 网站上做一些工作，我需要做的一部分是在现有的内容类型上创建一个新字段。

我将通过一项功能部署更改，因此我正在讨论是否使用 CAML 生成字段，然后以编程方式将其添加到现有内容类型，或者我是否可以通过功能接收器完成所有操作。

这样做的最佳/最干净（和最可重用）的解决方案是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-02-03T23:31:26.143

一种简单的方法是在功能接收器中执行此操作，获取对 SPContentType 的引用，将字段添加为 XML (SPContentType.Fields.AddFieldAsXml)，然后[更新将更改推送到子内容类型](http://msdn.microsoft.com/en-us/library/ms442695.aspx)

在已经存在的站点上修改内容类型确实很棘手。我首选的方法包括为所有内容类型提供解决方案，并在进行更改时重新部署该解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-03T23:32:19.013

我将假设您的*字段*是指一个新的**站点列**。在这种情况下，我会在后面的代码中完成这一切。创建网站栏所需的代码量非常少。如果您愿意，您还可以尝试从正在使用它的任何内容类型中删除站点列，但这是一项涉及更多的任务。

[从重用的角度来看，如果您在feature.xml](http://msdn.microsoft.com/en-us/library/ms475601.aspx)文件中设置属性，您可以使用这些属性来配置列名、列类型、目标内容类型等内容，然后拥有一个可以重用的类未来。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T21:51:00.067

您是否查看过[http://msdn.microsoft.com/en-us/library/ee537575.aspx](http://msdn.microsoft.com/en-us/library/ee537575.aspx)，尤其是`< AddContentTypeField>`标签？这将是一种声明性的方式来做到这一点。

# vb.net - WCF 自托管服务，服务停止时客户端清理

> ID：509140
> 
> 赞同：1
> 
> 时间：2009-02-03T22:13:18.627
> 
> 标签：vb.net, wcf, windows-services

我很想知道我将如何设置我的服务以在将安装该服务的服务器上完全停止。例如，当我每分钟有很多客户端连接并进行操作时，我想关闭服务进行维护，如何在服务的“OnStop”事件中执行此操作，然后让主服务主机拒绝任何新的客户端连接并让当前连接在它实际关闭其对客户端的服务之前完成，这将确保服务器关闭时服务器上的数据不会损坏。

现在我没有设置为单例，因为我需要服务的可扩展性。因此，我必须以某种方式让我的服务主机独立于知道创建了多少个服务类实例来执行此操作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-02-03T22:22:21.557

您只需在您创建的 ServiceHost 实例上调用 Dispose。完成此操作后，您将不再接受任何客户端，并且该服务将继续为已连接的客户端完成操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-03T22:59:35.100

我一直在想同样的事情。我发现这篇文章对如何正确关闭/处置为 ServiceHost 或客户端进行了非常深入的描述。

[http://www.danrigsby.com/blog/index.php/2008/02/26/dont-wrap-wcf-service-hosts-or-clients-in-a-using-statement/](http://www.danrigsby.com/blog/index.php/2008/02/26/dont-wrap-wcf-service-hosts-or-clients-in-a-using-statement/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2010-03-21T16:36:24.030

为了做到这一点。我必须创建自己的服务引用，并在 Windows 服务 OnStop 中启动新连接并更改 WCF 服务中的值以“关闭”（这只是服务在线或离线的共享布尔值）服务如此新客户端将无法连接（客户端将调用以查看服务器是否在线或离线的函数）并且现有连接将有时间完成，然后在所有客户端断开连接后，继续使用关闭 WCF 服务.Close 方法。

# asp.net - 让 Session 在 ASP.NET 中正常过期

> ID：509141
> 
> 赞同：9
> 
> 时间：2009-02-03T22:13:28.203
> 
> 标签：asp.net, session, redirect

我需要一种方法在重定向到页面之前/之后告诉 ASP.NET“终止当前会话并重新开始一个全新的会话”。

这是我正在尝试做的事情：

1) 在 ASP.NET 应用程序的母版页（或 Global.asax）中检测会话何时过期。

2) 如果会话过期，将用户重定向到一个页面，告诉他们他们的会话已过期。在此页面上，它将等待 5 秒，然后将用户重定向到应用程序的主页，或者如果他们愿意，他们可以单击链接更快地到达那里。

3) 用户到达主页并再次开始使用该应用程序。

好的，到目前为止，我已经涵盖了第 1 步和第 2 步。我有一个使用 IsNewSession 属性和 ASP.NET 会话 ID cookie 值检测会话到期的函数。如果它检测到过期的会话，它会重定向，等待五秒钟，然后尝试转到主页。

问题是，当它尝试重定向时，它会到达母版页中的部分以检测过期会话并返回 true。我试过调用 Session.Abandon()、Session.Clear()，甚至将会话设置为 NULL，但没有运气。

以前有人必须面对过这个问题，所以我相信社区会有一个好的解决方案。提前致谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-02-03T22:26:29.830

您所描述的问题发生是因为 asp.net 正在重用 sessionid，如果 sessionid 在您调用放弃（）时仍然存在于 auth cookie 中，它将只是重用它，您需要显式创建一个新的 sessionid afaik，例如：

```
 HttpCookie mycookie = new HttpCookie("ASP.NET_SessionId");
    mycookie.Expires = DateTime.Now.AddDays(-1);
    Response.Cookies.Add(mycookie); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2010-12-14T02:04:21.627

对于 ASP.NET MVC，这就是我正在使用的操作方法。

笔记：

*   返回一个简单的视图，没有其他可能意外重新创建会话的资源
*   我返回当前时间和会话 ID，以便您可以验证操作是否成功完成

    ```
    public ActionResult ExpireSession()
    {
        string sessionId = Session.SessionID;
        Session.Abandon();
        return new ContentResult()
        {
            Content = "Session '" + sessionId + "' abandoned at " + DateTime.Now
        };
    } 
    ```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2011-10-13T18:10:33.157

母版页中检测过期会话并重定向的代码应如下所示：

```
if (Session != null
    && Session.IsNewSession
    && Request.Cookies["ASP.NET_SessionId"] != null
    && Request.Cookies["ASP.NET_SessionId"].Value != "")
{
    Session.Clear();
    Response.Redirect(timeoutPageUrl);
} 
```

Calling session.Clear() before redirecting ensures that on the subsequent page, Session.IsNewSession will be false.

Also note that I am checking for an empty string in the value of of the ASP.NET_SessionId cookie. This helps to prevent a logout from being mistaken as an expired session, if you happen to call Session.Abandon() in your logout process. In that case, make sure you expire the old session cookie as a part of the logout process:

```
Response.Cookies["ASP.NET_SessionId"].Expires = DateTime.MinValue; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-09T19:01:41.673

添加 cookie 技巧也对我有用，如下所示：

```
 Sub Session_Start(ByVal sender As Object, ByVal e As EventArgs)
    ' Code that runs when a new session is started        
    If Session.IsNewSession Then
        'If Not IsNothing(Request.Headers("Cookie")) And Request.Headers("Cookie").IndexOf("ASP.NET_SessionId") >= 0 Then
        If Not IsNothing(Request.Headers("Cookie")) AndAlso Request.Headers("Cookie").IndexOf("ASP.NET_SessionId") >= 0 Then
            'VB code
            Dim MyCookie As HttpCookie = New HttpCookie("ASP.NET_SessionId")
            MyCookie.Expires = System.DateTime.Now.AddDays(-1)
            Response.Cookies.Add(MyCookie)

            'C# code
            'HttpCookie mycookie = new HttpCookie("ASP.NET_SessionId");    
            'mycookie.Expires = DateTime.Now.AddDays(-1);    
            'Response.Cookies.Add(mycookie);

            Response.Redirect("/timeout.aspx")
        End If
    End If       
End Sub 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2009-02-03T22:34:13.623

您是否在特殊的“您的会话已过期”页面中调用 Session.Abandon ？如果是这样，不要。

# asp.net - System.Web.Routing with WebForms - 在目标页面中获取变量

> ID：509144
> 
> 赞同：1
> 
> 时间：2009-02-03T22:14:01.197
> 
> 标签：asp.net, asp.net-mvc, routing

我通过路由设置了模式用户/{域}/{用户名}。一切正常，除了一件事。我不知道如何将域和用户名变量传递给我的重定向页面。下面是我的 IRouteHandler 实现中的 GetHttpHandler 方法。

```
 public IHttpHandler GetHttpHandler(RequestContext requestContext)
    {
        string basePath;
        basePath = "~/UserPage.aspx";
        string domain = requestContext.RouteData.GetRequiredString("domain");
        string username = requestContext.RouteData.GetRequiredString("username");

        string virtualPath =
            string.Format(basePath + "?domain={0}&username={1}", domain, username);
        return (Page)BuildManager.CreateInstanceFromVirtualPath(virtualPath, typeof(Page));

    } 
```

我从最后一行代码中得到错误：UserPage.aspx?domain=SOMEDOMAIN&username=SOMEUSER 不是有效的虚拟路径。

那么你应该如何将变量传递给目标页面呢？我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2010-09-23T13:35:22.837

似乎其他人也在采取将参数放入上下文 Items 集合的路线（没有双关语）。

[http://bbits.co.uk/blog/archive/2008/05/19/using-asp.net-routing-independent-of-mvc---passing-parameters-to.aspx](http://bbits.co.uk/blog/archive/2008/05/19/using-asp.net-routing-independent-of-mvc---passing-parameters-to.aspx)

我为具有特定参数的页面结合了其中的几种方法，我为接受该类型参数的页面创建了一个 UserNameRouteHandler。在我的 PageBase 类中，我检查了该参数的上下文项，然后设置了一个属性，以便从 PageBase 继承的页面可以使用它。

```
public class UserNameRouteHandler : IRouteHandler
{
    #region Implementation of IRouteHandler

    public IHttpHandler GetHttpHandler(RequestContext requestContext)
    {
        string pageName = requestContext.RouteData.GetRequiredString("PageName");

        string employeeUserName = requestContext.RouteData.GetRequiredString("UserName");

        if(!string.IsNullOrEmpty(employeeUserName))
        {
            requestContext.HttpContext.Items["UserName"] = employeeUserName;
        }

        pageName = pageName.ToLower() == "home" ? "default" : pageName;

        string virtualPath = string.Format("~/{0}.aspx", pageName);

        return (Page)BuildManager.CreateInstanceFromVirtualPath(virtualPath, typeof(Page));

    }

    #endregion
} 
```

在我的 PageBase 的 OnLoad 中，我将属性设置为需要它的页面可以拥有它......不过肯定是在寻找更优雅的解决方案。

```
protected override void OnLoad(EventArgs e)
{
    if (!IsPostBack)
    {
        if (Context.Items["UserName"] != null)
        {
            EmployeeUserName = Context.Items["UserName"].ToString();
        }
    }

    base.OnLoad(e);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-03T22:46:15.783

我想我自己解决了这个问题。找到这个循环

```
 foreach (KeyValuePair<string, object> token in requestContext.RouteData.Values)  
     {                  
         requestContext.HttpContext.Items.Add(token.Key, token.Value);  
     } 
```

来自[http://www.codethinked.com/post/2008/08/20/Exploring-SystemWebRouting.aspx](http://www.codethinked.com/post/2008/08/20/Exploring-SystemWebRouting.aspx) 它就像第 4 个代码示例。

**更新：**
不确定这是否可行...... requestContext.HttpContext 似乎是“只读的”。回到绘图板。

**更新 2：**
如果您添加对 System.Web.Abstractions 的引用，看起来这将起作用

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-03-17T03:40:56.727

开始乱搞，看到 IHttpHandler 接口为 GetHttpHandler 方法提供了 RequestContext。

所以，我修改了我的基页面类（我总是在 System.Web.UI.Page 和我自己的页面之间放置一个层，为此目的将其称为 BasePage 或类似名称）。所以我在 PVBasePage 上添加了一个公共属性来接收一个 RequestContext 对象。

```
public RequestContext RequestContext { get; set; } 
```

然后，我的路由类代码如下：

```
IHttpHandler IRouteHandler.GetHttpHandler(RequestContext requestContext)
{
    // create the page object as my own page...
    var page = BuildManager.CreateInstanceFromVirtualPath(VirtualPath
        , typeof(PVBasePage)) as PVBasePage;
    // pass in the request context
    page.RequestContext = requestContext;
    // return this page in the form of a IHttpHandler
    return page as IHttpHandler;
} 
```

因此，我没有像示例代码中那样直接将实例创建为 IHttpHandler，而是将其创建为我自己的页面。设置请求上下文属性，然后将页面作为 IHttpHandler 返回给调用者。

经过测试，它可以工作。呜呼！

然后在实例页面中，您可以点击 RequestContext.GetValues 集合来读出您传入的参数。

高温高压

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-12-02T08:26:49.187

@B.廷德尔

我刚刚使用与您类似的解决方案来解决这个问题。

位于： http: [//msmvps.com/blogs/luisabreu/archive/2008/03/12/using-the-routing-mvc-api-with-classic-asp-net.aspx](http://msmvps.com/blogs/luisabreu/archive/2008/03/12/using-the-routing-mvc-api-with-classic-asp-net.aspx)

```
foreach (var aux in requestContext.RouteData.Values)
{
    HttpContext.Current.Items[aux.Key] = aux.Value;
} 
```

所以实际上你不再使用 Request.QueryString 而是 Context.Items 集合

```
HttpContext.Current.Items["RouteName"] 
```

或者

```
Context.Items["RouteName"] 
```

# asp.net - 您多久使用一次自定义事件？

> ID：509156
> 
> 赞同：2
> 
> 时间：2009-02-03T22:15:38.700
> 
> 标签：asp.net, events

我一直在学习 ASP.NET 的一些新功能，超出了我目前的舒适程度，我试图从设计的角度准确地弄清楚自定义事件如何适应。我知道它们是如何工作的，以及观察者/订阅者模式，但似乎自定义事件并没有被谈论太多。似乎整个应用程序都可以通过在各处注册事件和响应来构建，然而，我们看到更多控制器类型的类以预定模式触发一些代码......它是 OOP，但仍然有点像程序。

所以从设计的角度来说，什么时候最好使用事件？是否有某些场景非常方便，但除此之外就没有了？或者是否有可能创建一个严重依赖它们的应用程序，程序员可以随心所欲地使用它们？

大多数情况下，我只是对它们属于“正确”设计的位置感到好奇，因为我可以轻松地重新想象我的一两个应用程序更依赖它们，而不是在单击按钮时触发控制器类逻辑。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-02-03T23:44:23.917

您在 asp.net 代码中看不到那么多自定义事件，主要是因为可以触发“事件”的事情往往是用户通过按钮或其他内置控件之一在客户端上所做的事情. 服务器本身并没有真正与代码“交互”，因为它以事件驱动的方式执行。

您可以通过其中一个常规控件获得回发。服务器上的执行在本质上往往是非常程序化的......这正是在 web 等无状态请求/响应环境中最有意义的模式。

asp.net 页面生命周期和服务器控件都有很多它们公开的事件，并且可能触发那些类似于 OO 的方面实际上只是支持其本质上是高度程序化和线性执行路径。

自定义服务器控件像内置控件一样公开自定义事件，这样页面开发人员就有了一种机制，他们可以通过该机制与控件进行交互，而无需紧密耦合......因此您可以找到大多数自定义事件。但是，只有当您确实有很多不同的页面可以使用该控件时，制作自定义服务器控件的成本才真正值得。

我也经常在用户控件中使用事件。虽然您可以将用户控件与服务器控件非常相似地对待，但通常用户控件在 OO 设计原则方面往往较弱。对于用户控件，您通常只是试图获得一点关注点分离和一些封装，但您仍然倾向于在托管页面和用户控件之间保持相当紧密的耦合。但是，有时用户控件可能需要向宿主页面发出信号，表明某些条件已经满足，在这种情况下，自定义事件是一种处理该信号的好方法，其耦合度比直接调用宿主页面上的方法要少。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-02-03T22:18:03.063

大多数情况下，我在构建自定义控件时使用自定义事件。

在 ASP.Net 中，我根本不使用自定义事件，因为即使使用自定义控件，我也会尝试更多地依赖现有的页面生命周期。

在 Windows 窗体中，我所做的几乎所有事情都被抽象为某个地方的控件，因此我经常使用它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-03T22:24:59.880

我在 ActionScript 3.0 中完成了很多自定义事件。我提到这一点是因为它的委托系统与 .NET 非常相似。

我正在创建一个可以一次将多个剪辑排队的 SWF 播放器。我的自定义时间轴控件将触发 ClipEnd 事件，我的主应用程序将侦听这些事件并推进播放列表。如果用户前进到新剪辑或应用程序自动执行，我的播放列表将触发 NewClip 事件。我的应用程序会监听这些并告诉时间轴开始播放下一个剪辑。所以我的时间线和播放列表通过自定义事件共生地联系在一起。

# algorithm - 遗传算法资源

> ID：509173
> 
> 赞同：41
> 
> 时间：2009-02-03T22:20:17.237
> 
> 标签：algorithm, resources, genetic-algorithm

最近我对遗传算法的话题很感兴趣，但是我找不到任何好的资源。如果您知道任何好的资源、书籍或网站，我将不胜感激。我对算法和人工智能有扎实的了解，但我正在寻找在遗传编程方面有很好介绍的东西。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2010-09-03T22:08:59.413

到目前为止对我来说最好的参考资料：

*   [David E. Goldberg的《搜索、优化和机器学习中的遗传算法》](https://rads.stackoverflow.com/amzn/click/com/0201157675)：经典之作，至今仍被许多人视为 GA 的圣经。
*   [梅兰妮·米切尔 (Melanie Mitchell ) 的遗传算法简介](https://rads.stackoverflow.com/amzn/click/com/0262631857)：比以前的参考资料更新，并包含可能更有趣的示例。
*   由 Poli、Langdon、McPhee编写的[遗传编程领域指南：这更像是一本实用指南，并且获得了非常好的评价。](https://rads.stackoverflow.com/amzn/click/com/1409200736)

此外，如果您是绝对的初学者，我建议您从[Hello World of Genetics Algorithms](http://www.generation5.org/content/2003/gahelloworld.asp)开始。没有什么比一个很好的干净示例更能开始了。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2009-02-03T23:19:11.660

我发现 Melanie Mitchell 的书《[遗传算法简介》](https://rads.stackoverflow.com/amzn/click/com/0262631857)非常好。为了更广泛地涵盖进化计算主题， Eiben 和 Smith 的《进化计算[简介》](https://rads.stackoverflow.com/amzn/click/com/3540401849)也是值得的。

如果您刚刚开始，我最近写了一篇可能有用的[介绍性文章。](http://blog.uncommons.org/2009/01/20/practical-evolutionary-computation-an-introduction/)

那篇文章和我的进化计算框架的[主页上](https://watchmaker.dev.java.net/)都有更多链接。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2010-08-13T05:38:17.540

我知道这是一个老问题，但尚未接受任何答案，所以我想我会添加自己的贡献。在我看来，所有与进化计算（遗传算法、进化策略、遗传编程等）相关的最好的免费资源之一是 Sean Luke 的在线书籍[Essentials of Metaheuristics](http://cs.gmu.edu/~sean/book/metaheuristics/)。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-02-04T13:24:53.870

这是一本关于该主题的不错的免费书籍

[http://www.lulu.com/items/volume_63/2167000/2167025/2/print/book.pdf](http://www.lulu.com/items/volume_63/2167000/2167025/2/print/book.pdf)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-02-03T22:25:00.397

这是 Roger Alsing 最近关于使用遗传算法构建“蒙娜丽莎的照片”的文章：[http ://rogeralsing.com/2008/12/07/genetic-programming-evolution-of-mona-lisa/](http://rogeralsing.com/2008/12/07/genetic-programming-evolution-of-mona-lisa/)

**编辑删除图片的热链接**见：[http ://rogeralsing.files.wordpress.com/2008/12/evolutionofmonalisa1.gif](http://rogeralsing.files.wordpress.com/2008/12/evolutionofmonalisa1.gif)

我已经实现了我自己的这个算法版本：

[![http://23.media.tumblr.com/NngfN9gsDhlsyws3NvFcuHfgo1_400.png](https://i.stack.imgur.com/l7Xvt.png)](https://i.stack.imgur.com/l7Xvt.png)
[（来源：[tumblr.com](http://23.media.tumblr.com/NngfN9gsDhlsyws3NvFcuHfgo1_400.png)）]

见[http://plindenbaum.blogspot.com/2008/12/random-notes-2008-12.html](http://plindenbaum.blogspot.com/2008/12/random-notes-2008-12.html)

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2009-02-03T23:40:42.863

[AI-Junkie.com](http://www.ai-junkie.com/ga/intro/gat1.html)上对遗传算法有很好的介绍，还有许多其他 AI 和机器学习技术的教程。遗传算法教程旨在“充分解释遗传算法，以便您能够在自己的项目中使用它们”，同时尽可能降低数学。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2014-04-17T18:55:44.957

## [聪明的算法：自然启发的编程食谱](http://www.cleveralgorithms.com/nature-inspired/index.html)

### 杰森布朗利博士。

这本书[以 PDF 格式免费提供](http://www.lulu.com/shop/jason-brownlee/clever-algorithms-nature-inspired-programming-recipes/ebook/product-17386095.html)。本书涵盖了大量受自然启发的算法，包括进化算法、群体算法和神经算法。

![封面](https://i.stack.imgur.com/vL80k.jpg)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-03-20T14:55:49.717

我很久以前写的简短介绍可以[在这里找到](http://gaul.sourceforge.net/intro.html)，但更好的简短介绍在[这里](http://www.obitko.com/tutorials/genetic-algorithms/)。

如需更大、更全面但有些过时的资源列表，请访问[comp.ai.genetic 常见问题解答](http://www.cse.dmu.ac.uk/~rij/gafaq/top.htm)。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-02-03T22:48:48.727

如果我可以插入我最喜欢的书之一， Steve Skiena[*的《算法设计手册》*](https://rads.stackoverflow.com/amzn/click/com/0387948600)中有一个关于遗传算法的精彩部分（加上许多其他有趣的启发式方法来解决各种类型的问题）。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-02-03T23:49:06.623

[OReilly 的Programming Collective Intelligence](http://oreilly.com/catalog/978059652932)一书有一章涵盖了遗传算法。它可能有点基本，但它是一个非常说明性的例子。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-09-16T17:33:37.750

[实用遗传算法](https://rads.stackoverflow.com/amzn/click/com/0471188735)

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2011-12-29T09:37:17.703

“遗传算法简介” [http://www.burns-stat.com/pages/Tutor/genetic.html](http://www.burns-stat.com/pages/Tutor/genetic.html)

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2013-04-30T20:30:18.020

对于介绍性方法（适用于囚徒困境），请参阅：

[http://www2.econ.iastate.edu/tesfatsi/holland.gaintro.htm](http://www2.econ.iastate.edu/tesfatsi/holland.gaintro.htm)

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2015-08-23T16:50:38.983

我用java泛型实现了一个遗传算法。[https://github.com/juanmf/ga](https://github.com/juanmf/ga)

考虑到 Individual、Gen、FitnessMeter 和暴露为 spring bean 的工厂的具体实现，它将应用 3 个操作符（Mutation、crossing、Selection）并进化种群。

```
/*This is all you have to add to the Spring App context 
 * before running the application
 */
@Configuration
public class Config {

    @Bean(name="individualFactory")
    public IndividualFactory getIndividualFactory() {
        return new Team.TeamFactory();
    }

    @Bean(name="populationFactory")
    public PopulationFactory getPopulationFactory() {
        return new Team.TeamPopulationFactory();
    }

    @Bean(name="fitnessMeter")
    public FitnessMeter getFitnessMeter() {
        System.out.println("getFitnessMeter");
        return new TeamAptitudeMeter();
    }
} 
```

[![在此处输入图像描述](https://i.stack.imgur.com/5ptwt.png)](https://i.stack.imgur.com/5ptwt.png) 这就是设计，grandt 内部有一个特定问题解决方案的实现，例如。

# c# - AccessViolationException 与 Windows 窗体中的 Web 浏览器

> ID：509181
> 
> 赞同：2
> 
> 时间：2009-02-03T22:23:25.000
> 
> 标签：c#, winforms, webbrowser-control, data-execution-prevention

我用 C# 编写了一个基本的 Windows 窗体应用程序，它具有嵌入式 Web 浏览器控件。我正在导航到一个页面以查看相机的提要。该应用程序在 Windows XP 上运行良好，但在 Vista 上却不行。

在 Vista 上，我得到一个 AccessViolationException。这似乎与数据执行保护有关。

[http://jtstroup.net/CommentView,guid,3fa30293-a3a4-4a1c-a612-058e751ad151.aspx](http://jtstroup.net/CommentView,guid,3fa30293-a3a4-4a1c-a612-058e751ad151.aspx)上的文章有几个解决方案。页面底部的修复，来自 Visual Studio 命令提示符的 editbin.exe /NXCOMPAT:NO YourProgram.exe 工作得很好。

但是，我想通过按照建议添加以下内容来使用构建后事件方法：

REM 将项目标记为 DEP 不符合要求 call "$(DevEnvDir)....\VC\bin\vcvars32.bat" call "$(DevEnvDir)....\VC\bin\editbin.exe" /NXCOMPAT:NO "$ (目标路径)"

但是，当我尝试通过调试器运行程序时，这不起作用（即我得到相同的异常）。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-03T22:43:37.627

关闭 Visual Studio 托管进程，或者将托管进程 (yourapp.vshost.exe) 标记为不符合 DEP？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-04T11:54:47.920

根据[这篇文章](http://blogs.msdn.com/gauravb/archive/2008/09/23/disable-dep-on-applications.aspx)：

> 因为在使用 Visual Studio 2008 的安装项目中观察到，添加项目输出源路径指向 c:\App\OBJ*.exePost 生成事件将更新 c:\app\BIN*.exe 而不是 OBJ。
> 
> 在设置和部署项目中手动添加构建创建新的设置项目 | 添加文件 | 选择 Bin 文件夹下的 Build EXE

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-04T00:02:38.560

问题。您正在尝试的 vista 版本。是64位的吗？如果是这样，请将代码仅编译为 x86 并尝试。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-02-04T02:42:55.273

您正在查看的页面是否包含 java 小程序`<applet>`？我遇到了这个确切的问题并追溯到它。这是由于使用 Microsoft 的 JVM 的 WebBrowser 控件，我相信它现在不受支持。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-02-04T03:38:28.577

它们是 ActiveX 控件，而不是小程序。

同样，如果我从 Visual Studio 命令提示符应用 editbin.exe，或者如果我使用上述构建后事件并关闭 Visual Studio 托管进程，则程序可以工作。

当我运行创建设置/部署项目，运行安装程序，然后尝试运行它仍然崩溃的程序时。客户端计算机可能没有 Visual Studio，因此我无法在部署后在目标计算机上运行 editbin.exe - 它需要在设置/部署项目中触发。所以我猜测要么来自主输出的构建后事件没有被触发，要么它是并且在部署项目中有重新启用 DEP 的东西。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-06T19:16:10.570

我不得不在我的后期构建事件中添加另一行

调用 "$(DevEnvDir)..\tools\vsvars32.bat" editbin.exe /NXCOMPAT:NO "$(TargetPath)" editbin.exe /NXCOMPAT:NO "$(ProjectDir)obj\$(ConfigurationName)\$(TargetFileName )"

这将编辑 obj 文件夹中的 exe。看来这就是我的部署项目使用的。

我从这里得到了这个想法。 [微软论坛](http://social.msdn.microsoft.com/Forums/eu/msbuild/thread/d5102d18-625f-4301-bd04-f243546cf6b3)

# asp.net - 重定向到该页面后，子文件夹 Default.aspx 中的 Page_Load 未命中

> ID：509185
> 
> 赞同：1
> 
> 时间：2009-02-03T22:24:01.333
> 
> 标签：asp.net

我有一个页面，该页面位于我的根目录的第一级文件夹中，名为 default.aspx。

我被重定向到该页面，如下所示：

1.  我有一个包含登录按钮的初始根 Default.aspx
2.  用户单击登录按钮并重定向到 Facebook 登录
3.  登录后，Facebook 重定向回我的第一级 Default.aspx（位于 root\firstlevelfolder\Default.aspx 内）

page_load 没有被击中。这是 VS 2008 中的 .NET 2.0 解决方案。在页面指令中将 AutoEventWireup 设置为 true。

不知道为什么，也没有见过这个错误。它与重定向到非根级 .aspx 页面有关吗？这可能是基本的东西，但我不确定它是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-02-03T22:29:15.957

`Trace="True"`在您`<%@ Page %>`的“第一级”Default.aspx 中添加一个。您要查看的部分是第二部分 - “跟踪信息”。查看该列表中是否有“开始加载”项。

另外，您的页面是继承自 System.Web.UI.Page 对象，还是您有自定义的基本页面？

```
public partial class _Default : System.Web.UI.Page //or do you have a different object here?
{
    ...
} 
```

如果 AutoEventWireup 为假，Page_Load 会被命中吗？

如果您直接从浏览器中点击它而没有将您重定向到那里的中间页面，那么您重定向到的页面是否可以工作？我认为您的问题的原因与该页面位于子目录中这一事实无关。

如果跟踪显示开始加载正在触发，那么您使用什么方法来确定页面加载不起作用？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-03T22:50:39.330

> 我的 page_load 第一行代码中的断点

您正在使用断点。仔细检查 Visual Studio 是否处于调试模式，并且您的浏览器指向 localhost:1234（其中 1234 是 VS Web 服务器分配的某个随机端口号）。另外，尝试做一个简单`Response.Write("Hello World")`的 in `Page_Load()`，看看页面顶部是否打印出任何内容。

> 您说要在根目录中尝试跟踪。

否。在您认为 Page_Load 未触发的页面中尝试。

此外，在 StackOverflow 上，其他人更容易关注对话，如果您可以使用“添加评论”功能回复问题，则帖子会更简洁。我发布另一个答案的原因是为了以防您不知道该功能并且您错过了评论。有关评论，请参阅[SO 社区常见问题解答项目](https://stackoverflow.com/questions/509379/how-do-comments-work-on-stackoverflow/509383)。

# sql-server - 帮助 sp_msforeachdb 类似查询

> ID：509189
> 
> 赞同：1
> 
> 时间：2009-02-03T22:25:00.457
> 
> 标签：sql-server, tsql, sp-msforeachdb

在我所在的地方，我们有一个在大型机系统上运行的软件包。大型机每晚都会转储到 sql server 中，这样我们的每个客户端在服务器中都有自己的数据库。服务器实例中还有一些其他数据库，以及一些没有数据的旧客户端数据库。

我们经常需要跨所有客户端运行报告或检查数据。我希望能够使用 sp_msforeachdb 或类似的东西运行查询，但我不确定如何从列表中过滤不需要的数据库。关于这如何工作的任何想法？

我们仍在使用 SQL Server 2000，但几个月后应该会迁移到 2005。

* * *

**更新：**
我认为我在问这个问题时做得很糟糕，所以我要澄清我的目标，然后发布我最终使用的解决方案。

我想在这里完成的是让从事查询以在他们的程序中使用的程序员更容易使用一个客户端数据库编写查询，然后几乎立即运行（测试）在所有 50 个客户端的数据库上设计和构建的代码左右客户端数据库，几乎没有修改。

考虑到这一点，这是我目前位于 Management Studio 中的代码（部分混淆）：

```
use [master]
declare @sql varchar(3900) 

set @sql = 'complicated sql command added here'

-----------------------------------
declare @cmd1 varchar(100)
declare @cmd2 varchar(4000)
declare @cmd3 varchar(100)
set @cmd1 = 'if ''?'' like ''commonprefix_%'' raiserror (''Starting ?'', 0, 1) with nowait'
set @cmd3 = 'if ''?'' like ''commonprefix_%'' print ''Finished ?'''
set @cmd2 = 
    replace('if ''?'' like ''commonprefix_%'' 
    begin 
        use [?]
        {0} 
    end', '{0}', @sql)

exec sp_msforeachdb @command1 = @cmd1, @command2 = @cmd2, @command3 = @cmd3 
```

这样做的好处是您所要做的就是将@sql 变量设置为您的查询文本。很容易变成存储过程。它是动态 sql，但同样：它仅用于开发（著名的遗言；））。缺点是您仍然需要转义查询中使用的单引号，并且很多时候您最终会`''?'' As ClientDB`在选择列表中放置一个额外的列，但除此之外它工作得很好。

除非我今天有另一个非常好的主意，否则我想把它变成一个存储过程，并将一个版本组合成一个表值函数，使用一个临时表将所有结果放在一个结果集中（仅用于选择查询）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-04T17:59:36.220

只需将要执行的语句包装在 IF NOT IN 中：

```
EXEC    sp_msforeachdb  "
IF      '?'     NOT IN ('DBs','to','exclude')   BEGIN
        EXEC    sp_whatever_you_want_to
END
" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-03T22:32:09.883

我们的每个数据库服务器都包含一个“DBA”数据库，其中包含充满此类元数据的表。

“数据库”表将保留服务器上所有数据库的列表，您可以放置​​标志列来指示数据库状态（实时、存档、系统等）。

然后，您的 SCRIPT 所做的第一件事就是访问您的 DBA 数据库以获取它应该运行的所有数据库的列表。

我们甚至有一个夜间维护脚本，可以确保服务器上的所有物理数据库也都输入到我们的“DBA.databases”表中，如果没有，就会提醒我们。（因为向该表添加一行应该是手动过程）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-03T22:36:49.233

采用 sp_msforeachdb 的定义并对其进行调整以适应您的目的怎么样？要获得定义，您可以运行它（首先按 ctrl-T 将结果窗格置于文本模式）：

```
sp_helptext sp_msforeachdb 
```

显然，您希望创建自己的存储过程版本，而不是覆盖原始版本；o)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-02-04T18:00:20.990

在 2005 SSIS 包中执行此类操作非常简单。也许您可以在某处的服务器上设置一个实例。

我们设置了多台服务器，因此我们有一个表来指示将调查哪些服务器。然后，除其他事项外，我们拉回所有数据库的列表。这用于备份脚本。

您可以维护此数据库列表并为您自己的目的添加一些字段。您可以有另一个包或步骤，这取决于您如何决定要报告哪些数据库以及是否可以以编程方式完成。

您可以在这里免费获取代码： [http ://www.sqlmag.com/Articles/ArticleID/97840/97840.html?Ad=1](http://www.sqlmag.com/Articles/ArticleID/97840/97840.html?Ad=1)

我们的系统基于此代码。

# c# - C# 模板和特殊构造函数

> ID：509193
> 
> 赞同：1
> 
> 时间：2009-02-03T22:26:02.407
> 
> 标签：c#, generics, oop, templates

我有一组类，它们都可以用作为特定接口实例的参数来构造。由于它们都可以由同一个对象构造（并且这种构造发生的过程在所有情况下都基本相同），我认为模板可能会起作用。基本上，我想做这样的事情：

```
public static void dostuff<T, U> (List<T> items)
{
    foreach (T item in items)
    {
        func(new U(item).SpecialMember);
    }
} 
```

当然，由于`U`是模板化的，因此无法编译，因此缺少`SpecialMember`构造`T`函数。

基本上，任何给定的接口实现`T`都具有某些特性。 `U`是`T which has an additional feature that is needed *and* which can be constructed from an any instance of`U` 的一个实现。

建议？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-02-03T22:46:58.917

不幸的是，虽然约束会让你*有一些*方法，但没有办法指定一个类型有一个带有特定参数的构造函数：你唯一需要的构造函数是一个无参数的构造函数。

就个人而言，我希望使用[“静态接口”](http://msmvps.com/blogs/jon_skeet/archive/2008/08/29/lessons-learned-from-protocol-buffers-part-4-static-interfaces.aspx)（仅可用于类型约束）的想法来看到这种变化，但目前你会得到的最好的是类型工厂或反射 - 或者可能是无参数构造函数*和*“初始化” " 接口中的方法。坦率地说，这些都不是很好的选择。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-02-03T22:37:04.723

您可以向通用参数添加[约束](http://msdn.microsoft.com/en-us/library/d5x73970(VS.80).aspx)，这将允许您访问 SpecialMember，例如：

```
public class SpecialObjFactory<T,U> where T : ISpecialMethod
where u : new()
{
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-03T22:27:13.013

你想要一个[工厂](http://en.wikipedia.org/wiki/Factory_method_pattern)模式。将工厂方法添加到返回 U 类型的 T 接口。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-02-03T22:44:21.543

您不能使用泛型来创建这样的对象。您可以像这样约束泛型类型：

```
public static void dostuff<T, U> (List<T> items) where T : SomeClass where U : SomethingElse
{
} 
```

但这只会让您访问这些类/接口的成员，而不是构造函数。

要扩展 Joel 的答案，您应该向 T 接口（在我的示例中为 SomeClass）添加一个方法，该方法接受一个 T 对象并返回一个新的 U 对象。类似于以下内容：

```
public class SomeClass    
{
    CreateInstanceOfSomethingElse() { return new SomethingElse(this); }
}

public static void dostuff<T, U> (List<T> items) where T : SomeClass, U : SomethingElse
{
    foreach (T item in items)
    {
        func(item.CreateInstanceOfSomethingElse().SpecialMember);
    }

} 
```

作为另一种完全不同的方法，您可以指定 doStuff 方法`Func<T, U>`也采用 a，它应该从 T 对象创建 U。

```
public static void dostuff<T, U> (List<T> items, Func<T, U> createU)
{
    foreach (T item in items)
    {
        func(createU(item).SpecialMember);
    }

} 
```

如果您的对象创建比简单的 Lamba 更复杂，这会变得混乱

`t => new U(t)`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-29T08:22:48.050

```
public static void dostuff<T, U> (List<T> items)
{
    foreach (T item in items)
    {
        U obj = ( U )System.Activator.CreateInstance( typeof( U ), item );
        func(obj.SpecialMember);
    }
} 
```

# c# - Ajax.BeginForm 刷新部分..？

> ID：509195
> 
> 赞同：1
> 
> 时间：2009-02-03T22:26:18.100
> 
> 标签：c#, asp.net-mvc

好的，我有一个使用 ajax 发布的表单...

```
<% using(Ajax.BeginForm(new AjaxOptions() { OnBegin="onBegin", OnSuccess = "onSuccess", OnFailure="onFailure"  })) { %> 
```

在服务器端，我从控制器传回一个 Json 对象。现在，当 OnSuccess 事件触发时，我可以使用“result.get_response().get_object()”访问 Json 对象...

我的问题是，我需要能够使用 Json 对象中的项目列表刷新页面上的部分内容...

关于我怎么能做到这一点的想法..？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-26T06:26:44.040

使用 jQuery，并旋转返回的 JSON 对象，构建任何你喜欢的东西。

例子：

```
 $.each(json, function(i, item) {
        //Add a dinner to the list on the right
        $('#dinnerList').append($('<li/>')
                              .attr("class", "dinnerItem")
                              .append($('<a/>').attr("href", "/Dinners/Details/" + item.ID)
                              .html(item.Name)).append("SomeThing"));
    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-15T10:06:09.357

我认为您会发现以下代码很有帮助。

首先，创建一个 AJAX 表单

*   RefreshAjaxList：当前控制器的名称ajax动作
*   string.empty（可选）
*   AJAX 选项
*   表单ID（可选）
*   单击状态时，我们将编辑状态调用服务器以更新状态
*   编辑状态后，我们调用提交按钮来调用`RefreshAjaxList`；按钮是`display:none`
*   在这个例子中，我有一个控制器：`AjaxController`有 2 个动作：

```
public ActionResult UpdateStatus(int contactId, Status contactStatus)
{  
    ContactRepository repo = new ContactRepository();
    repo.UpdateStatus(contactId, contactStatus);
    return Json("success:true");
}

[AcceptVerbs(HttpVerbs.Post)]
[ActionName("RefreshAjaxList")]
public ActionResult RefreshContact()
{
    ContactRepository repo = new ContactRepository();
    IList<Contact> list = repo.List();
    return PartialView("AjaxUc/AjaxList", repo.List());
} 
```

JavaScript：

```
var status = { active: 1, inactive: 0 };
function editStatus(cell, id, active) {
    if (active)
        cell.innerHTML = "<input type='radio' checked='true' name='active" + id + "' onclick='updateStatus(this, " + id + ", true);'>Active</input>" +
                             "<input type='radio' name='active" + id + "' onclick='updateStatus(this, " + id + ", false);'>Inactive</input>";
    else
        cell.innerHTML = "<input type='radio' name='active" + id + "' onclick='updateStatus(this, " + id + ", true);'>Active</input>" +
                             "<input type='radio' checked='false' name='active" + id + "' onclick='updateStatus(this, " + id + ", false);'>Inactive</input>";
}

function updateStatus(radio, id, active) {
    if (radio.checked != active) {
        if (confirm("Do you want to change the status of the contract?")) {
            if (active)
                cStatus = status.active;
            else
                cStatus = status.inactive;
            $.ajax({
                url: 'Ajax/UpdateStatus',
                dataType: "json",
                data: { contactId: id, contactStatus: cStatus },
                success: function(html) {
                    jQuery("#divAjaxList").submit();
                },
                error: function(request, desc, ex) {
                    alert(desc);
                }
            });
        }
    }
} 
```

您的 ASP 脚本：

```
<% using (Ajax.BeginForm("RefreshAjaxList", "abc", new AjaxOptions() { UpdateTargetId = "divContent" }, new { @id = "divAjaxList" }))
   {%>
<div id="divContent">
    <table>
        <tr>
            <th>
            </th>
            <th>
                Id
            </th>
            <th>
                FirstName
            </th>
            <th>
                LastName
            </th>
            <th>
                Phone
            </th>
            <th>
                Email
            </th>
            <th>
                Status
            </th>
        </tr>
        <% foreach (var item in Model)
           { %>
        <tr>
            <td>
                <%= Html.ActionLink("Edit", "Edit", new { id = item.Id })%>
                |
                <%= Html.ActionLink("Details", "Details", new { /* id=item.PrimaryKey */ })%>
            </td>
            <td>
                <%= Html.Encode(item.Id)%>
            </td>
            <td>
                <%= Html.Encode(item.FirstName)%>
            </td>
            <td>
                <%= Html.Encode(item.LastName)%>
            </td>
            <td>
                <%= Html.Encode(item.Phone)%>
            </td>
            <td>
                <%= Html.Encode(item.Email)%>
            </td>
            <td ondblclick="editStatus(this,<%=item.Id %>, <%= item.Status.GetHashCode() %>);">
                <%= item.Status== Status.Active ? "Active" :"Inactive" %>
            </td>
        </tr>
        <% } %>
    </table>
    <input type="submit" id="refresh" style="display:none" />
</div>
<% } %> 
```

如需更多信息，请发送邮件至 pnguyen2@firstlook.com 进行进一步讨论。

希望这可以帮助你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-04T05:45:39.383

为要显示的项目列表创建用户控件，并通过将 json 数据传递给 UC 将其呈现为部分。这将部分刷新

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2010-01-13T15:31:03.827

您还可以使用[JTemplate](http://jtemplates.tpython.com/)来呈现 JSON 数据

# iis - 有没有办法始终要求或强制站点上的“www”子域？

> ID：509205
> 
> 赞同：4
> 
> 时间：2009-02-03T22:29:22.633
> 
> 标签：iis, iis-6, subdomain

我想阻止用户说 example.com 而只去 www.example.com，我们使用的是 IIS 6。所以说他们去 example.com 它可以附加 www.example.com 等。

这是某个地方的设置，还是我必须对其进行编码以在子域登陆并相应地重定向时检查它们？

编辑：我知道最好的方法是远离 www 前缀，但无论出于何种原因，如果用户在 URL 中没有 www 的情况下启动课程（这是一个 LMS），则跟踪不适用于 .asmx 文件，即为什么我要强制使用“www”，因为如果有些人没有它，那么他们想知道为什么跟踪不起作用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-02-04T09:20:21.400

如果您使用 ASP.NET 创建一个 HttpModule，处理 BeginRequest 事件并将此代码添加到您的处理程序中：

```
HttpApplication application = (HttpApplication)source;
HttpContext context = application.Context;

if (context.Request.Url.Host == "example.com")
{
context.Response.Clear();
context.Response.Status = "301 Moved Permanently";
context.Response.AddHeader("Location", "http://www.example.com" + context.Request.RawUrl);
} 
```

请注意，我没有使用 Response.Redirect()，这是为了 SEO，因为 Response.Redirect() 总是返回状态 302，这意味着对象被临时移动，而状态 301 意味着对象被永久移动，这个将防止您的网页的 PageRank 在 www 和非 www 版本之间划分（如果搜索引擎爬虫可以使用 www 和非 www 网址访问页面，他们会将您的 PageRank 在两者之间划分，因此是使用 301 搜索引擎爬虫可以理解并将您的 PageRank 仅保留为您网站的 www 版本）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-02-03T23:02:15.173

由于两条记录都已指向正确的服务器...

...您可以简单地在 IIS 中设置一个新网站（需要服务器版本）并让它只响应 example.com（主机头设置）并让它重定向到想要的 url（检查重定向到主目录选项卡中的 url并输入 www.example.com)。然后原始站点应该处理它（您可以将它的主机头设置为更具体地回答 www.example.com）。

如果您不能在 Web 服务器上执行此操作，您的发布防火墙应该可以，或者您可以考虑更换它。您的 DNS 提供商还可能提供（双关语不是有意的）重定向服务（我猜对您而言与上述基本相同）。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-02-03T23:55:35.643

根据其他响应，安排从原始域名到带有`www.`前缀的站点的 301 重定向。

鉴于我实际上在 DNS 行业工作，我想分享我对`www.`辩论的看法：

现在，至少，恕我直言，首选版本的 URL 应该带有**前缀**`www.`。URL 的主机名部分就是这样，**它是一个主机名**。您的浏览器将搜索的唯一 DNS 资源记录是`A`（并且可能`AAAA`是 IPv6）记录，而生成的 IP 地址就是它将连接到的 IP 地址。

它**不是**网站地址 - 只有完整的 URL（带`http://`前缀）指定此主机期望在端口 80 上接收 HTTP 连接。

首先使用前缀的全部原因`www.`是允许将不同的协议分离到不同的主机。正如 Verisign 几年前（简要地）介绍他们的“SiteFinder”服务时所表明的那样，假设对 A 记录的每个请求都是为了使用 HTTP 协议是一个巨大的错误。

将 URL 的规范版本设置为*带有*前缀的URL`www.`也使 cookie 处理更容易，并允许更轻松地将静态内容拆分到内容交付网络（如 Yahoo!、Google 等所推荐的那样）。

现在，有一种 DNS 记录类型（`SRV`参见[RFC 2782](http://www.ietf.org/rfc/rfc2782.txt)），它使用服务和传输前缀来允许单个域名将不同的协议分派到不同的主机（以及 IP 地址）。

理想的 DNS 设置是如下所示的记录：

```
_http._tcp.example.com IN SRV 10 0 80 www.example.com. 
```

这表示所有通过 TCP/IP 对 HTTP URI 的请求都应发送到*hostname* `www.example.com`上的 TCP 端口 80 。请注意，使用此语法，您还可以让 HTTP 服务从端口 80 以外的端口自动服务器，而端口号不是 URL 的一部分。

记录是 SIP的`SRV`必需部分，通常用于 Jabber (XMPP)。但是 AFAIK 没有浏览器使用它。:(

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-02-03T22:32:11.817

联系您的主机（或您的域名注册商），让他们将其设置为使用或不使用 www。但是，如果您愿意，它应该以两种方式工作，或者只以一种方式工作。我假设您有一个主机并且没有运行您自己的 Web 服务器/域名注册，哈哈。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-02-03T22:41:21.533

这就是它的工作原理，不管你是否应该这样做。

这由 DNS 处理。通常，example.com 和 www.example.com 将指向同一个服务器，但它们并非必须如此。如果 www.example.com 没有显式注册，则请求将发送到 example.com 服务器，该服务器将决定 www.example.com 以及 mail.example.com、ftp.example 的含义.com、home.example.com、users.example.com 等等。

编辑：我意识到这个故事有点不完整，因为这些天 Apache 获得了您过去使用的 URL，它可能会从中解释一个子域，并将请求定向到虚拟站点。但这不应该是“www”级别的一个因素。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-02-03T22:59:41.200

网站完成此操作的典型方式是从 example.com 到 www.example.com 的 HTTP 重定向。您可以在用户访问 example.com 时返回 HTTP 状态代码 301（永久重定向）或 302（临时重定向），并在对[http://www.example.com](http://www.example.com)的响应中设置 HTTP 位置：字段。谷歌搜索“301 与 302”，看看你什么时候应该使用。

请注意，这是一项 HTTP 功能，而不是 DNS 提供的功能……但是，如果您使用他们的名称服务器，某些域名提供商会为您提供 HTTP 重定向功能。

请注意，您可以自己测试一下。访问[http://web-sniffer.net](http://web-sniffer.net)并输入 yahoo.com（或 microsoft.com 或任何主要网站）。您会看到他们使用名称的 www 版本响应重定向（在不太常见的情况下，某些网站会采用另一种方式，将 www 重定向到名称的非 www 版本）。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-02-03T23:02:45.407

当我不幸在微软的 web stack 上工作时，我使用[ISAPI_Rewrite](http://www.isapirewrite.com/)来强制 www. 前缀（除其他外）。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-02-03T23:58:56.633

在我的网站上，我只是将以下内容放入 .htaccess 文件中：

```
RewriteEngine on
RewriteBase /
RewriteCond   %{HTTP_HOST}   ^tafkas\.net$   [NC] 
RewriteRule   ^(.*)$  http://www.tafkas.net/$1   [L,R=301] 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-11-29T18:16:04.550

对于基于 Apache 的服务器，您可以使用此代码

```
RewriteEngine On    
RewriteCond %{HTTP_HOST} !^www\.yourdomain\.com$ [NC]    
RewriteRule (.*) http://www.yourdomain.com/$1 [R=301,L] 
```

Explanation: The first line just turns the rewrite engine on. The second line of code is to check the url entered by the user. The bash sign (!) means not equal to. The carrot sign (^) means the beginning of the statement to be checked. Backslash dot (.) refers to the special character of dot, which when used without backslash means 'anything'. The dollar sign at the end of the statement refers to the end of the url. The third statement states that if the input given by the users is not the one as given in statement two, then proceed as follows. (.*) means that anything and any number of times. This is used so as the save anything written by the user after yourdomain.com/ gets stored in the variable $1\. R=301 refers to the permanent redirection, and L states that this is the last in the series of status codes.

* * *

## 回答 #10

> 赞同：-3
> 
> 时间：2009-02-03T22:36:28.687

如前所述，添加 WWW 是相反的方向。如今，万维网是一种冗余。

您可以查看[http://no-www.org/](http://no-www.org/)了解更多信息。

* * *

## 回答 #11

> 赞同：-4
> 
> 时间：2009-02-03T22:32:05.077

这实际上是倒退。这就是他们在 1998 年的做法，但现在如果有任何东西，你应该[放弃 www](https://blog.codinghorror.com/the-great-dub-dub-dub-debate/)。

此外，example.com 专门用于发布示例 url。有人可能实际上拥有并使用您提供的那个。你怎么知道你没有用那个随机的例子将某人指向色情或恶意软件网站？

# sysadmin - 作为一名程序员，您希望在编程之外了解多少？

> ID：509209
> 
> 赞同：15
> 
> 时间：2009-02-03T22:30:46.890
> 
> 标签：sysadmin

我想知道你作为一个程序员所做的不是编程，而是你的任务所必需的（例如：本地设置、服务器设置、部署等）。我很想知道人们正在执行多少与编程无关的任务。

例如，在进行 Web 开发项目时，我经常：

*   安装服务器
*   管理用户权限/访问服务器
*   执行备份
*   配置 IIS/Apache
*   设置 FTP 站点

在非网络项目中，我经常：

*   编写构建脚本
*   设置源代码管理工具/程序
*   可能还有更多我没有想到的东西

有些任务比其他任务与编程更相关（例如编写构建脚本），但其他任务超出了我的专业领域（想到了域设置）。只是想知道有多少人在他们的工作中执行与编程无关的任务。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2009-02-03T22:39:11.180

可悲的现实是，非技术人员看着技术人员并期望他们了解与技术相关的一切，而不了解技术中存在我们可能一无所知的专业。

我经常认为它非常像专门研究某一学科的医生。所有医生都有医学领域的基本知识，但不知道其他专业的细节（心脏病专家对麻醉学了解不多，反之亦然）。

因此，虽然我认为人们期望技术专家无所不知是不合理的*，*但我确实认为他们期望我们在技术方面有所了解是合理*的*。

我认为这个问题的一个更重要的方面是，人们应该对他们应用技能的特定领域（金融、制造等）了解多少。我认为这*非常*重要，因为拥有这些领域知识使他们作为程序员更有价值，因为他们可以深入理解问题，从而为他们提供更全面的解决方案。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-02-03T22:43:08.767

预期的？几乎什么都没有，但是当你知道的更多时，每个人总是很高兴。

你在编程的狭隘范围之外了解得越多，你对你的雇主就越有价值。

我遇到的事情：

*   需求收集
*   编写用例
*   评估测试计划
*   与供应商谈判
*   税收法
*   收入确认规则
*   关于用户行为方式的想法
*   基本经济理论
*   可用性指南
*   不同国家消费者行为的差异
*   系统管理（完整的系统管理员）
*   数据库配置、优化、设置（基本上是 DBA）
*   监控系统
*   网络原理和技术（你会惊讶于数据包跟踪在调试某些东西时是多么方便......）
*   能够评估别人写的商业计划书
*   图像处理
*   如何分散情况并避免争论
*   如何逼迫某人并让他们在不想做某事时做出承诺
*   如何选择战斗

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-02-03T22:44:29.390

我认为我在编程工作中使用最多的非编程技能是写作。能够解释想法、设计、算法等真的很重要，而且你永远不能指望亲自去做（或有时间）。我花费大量时间编写设计文档和其他文档，以便其他工程师可以了解我的代码和算法。所以我真的很感谢我在学校有很好的写作课，可以把一个句子放在一起。:-)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-02-03T22:40:26.713

可能取决于您工作的公司的规模。作为主要在中小型企业工作的人，我还负责：

数据库创建、管理和调整支持我启动的内部应用程序管理网站证书设置外部托管，我相信还有更多

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-02-03T22:37:39.857

好吧，由于程序员的主要工具是他的计算机，我认为假设一些专业知识是公平的。您描述的大多数这类事情对于不熟悉计算机的人来说是困难的，但对于了解该领域并知道如何查找和阅读文档的人来说却很容易（即使没有以前的经验）。

在一个组织良好的大型企业或项目中，我希望有人更具体地熟悉这些管理事务来处理它们。但是，如果没有足够的人来保证全职工作，那么我认为让任何有能力的人来做这件事是不合理的；在这方面，程序员可能处于领先地位。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-02-03T22:40:07.573

我发现用户发现的绝大多数“错误”都是安装应用程序的系统的配置问题。让开发人员了解常见的机器和网络设置错误是非常可取的。

例如，如果应用程序发送电子邮件作为其操作的一部分，那么让开发人员了解 DNS 和 SMTP 配置很有用。

当然，这取决于您的业务规模，大型组织可能会通过使用其他专家来保护开发人员免受此影响。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-02-03T22:51:56.143

我意识到我从来没有被聘为实际工作，而是作为解决问题的人。无论我是弄清楚发生了什么，然后通过代码、软件或网络上的东西来修复它，这似乎都是对客户想要什么的主要看法。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-02-03T22:35:19.673

这将根据您所在的位置而有很大差异。我曾与对这些东西一无所知的人以及专家一起工作过。

了解这一点会对你有很大帮助。一般来说，了解代码运行的环境总是更好。不了解上下文会让你有些无助。

此外，通常存在与代码无关但与配置相关的错误，例如由于 apache 配置而导致页面未显示。如果您不了解环境，那么您在调试方面会非常不利。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-02-03T22:39:49.180

工作场所周围的人可能希望程序员成为他们的 IT HelpDesk 人员……这发生在我身边。啊。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-02-03T22:40:03.907

在我工作的地方，所有开发人员都应该能够使用 Subversion，并且必须能够在他们的 PC 上设置和配置 Apache 和 Tomcat。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-02-03T22:41:13.763

最大的挑战不是与启动和运行环境相关的技术问题，而是在小商店中有效开发软件所需的领域知识。对我来说，我在一个大部分孤立的开发环境中从事来自各种来源的许多不同项目。这意味着我需要快速掌握项目的领域，以便有效地开发解决方案。过去，我从事印刷会计解决方案、活动目录管理、研究调查数据库以及目前为慈善组织提供准 CRM 解决方案的工作。我希望我只需要知道设置我的开发和构建环境的具体细节。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2009-02-03T22:43:37.083

这通常取决于公司的规模。在一家小公司，你必须知道如何做所有事情，包括系统管理员和网络管理员，即使你的工作专注于编程。

在一家大公司，你可以看到宇宙的一小部分，而他们通常不喜欢你在你的盒子外面偷看。您不仅不需要学习所有东西，而且如果您尝试，他们通常会对您不满意。

但是，您对机器、它们的工作原理以及它们在操作环境中的运行方式了解得越多，就越容易诊断问题和编写更好的软件。您对编写应用程序的领域了解得越多，就越能更好地区分用户的需求和他们的愿望。

作为一名软件开发人员，最酷的事情之一就是你有一个终生的借口可以将你的鼻子伸入技术和各种业务领域。如果你已经转移到几个不同的行业，你往往会被各种有趣的花絮压得喘不过气来。总是有更多的东西要学...

保罗。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2009-02-03T22:45:58.683

让自己接触其他技术是件好事，但我真的认为不完全公开自己不是这些领域的专家（尤其是域设置）这一事实对你来说是个坏主意。我曾与那些认为自己可以完成所有任务但最终做得很差的人一起工作，以至于他们花费了所有的时间（和金钱）试图把它做好，顾问的报酬会比他们高出好几倍.

我曾在一家公司工作，负责“与计算机相关”的所有事情，包括域、PC、数据库、自定义软件、构建、MS Office、PowerPoint、Quickbooks……；开发和建造的中型公司；和一家大公司，我只专注于我的项目的 .Net 代码（其他人处理数据库，另一个人处理报告）。

迄今为止，中型公司一直是最好的体验（在大公司中相当新），在那里我被赋予了足够的责任来感到有用，并且可以轻松地与其他所有人联系以询问有关其他任务的问题。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2009-02-03T22:49:57.553

你并不孤单。我报名的职位是“ASP.NET Web 开发人员”……但是，我的工作包括：

*   Windows 服务器管理
*   有限的 Linux 管理（运行 top 以监控 CPU 利用率和更改 apache 配置）
*   LDAP 管理/调优
*   MS SQL Server 2005 管理/调优
*   数据库开发
*   水晶报表开发人员
*   Perl 脚本
*   C# Win32开发
*   C# / ASP.NET Web 开发
*   管理 Windows 服务器的用户访问权限
*   有限的网络故障排除

在一家不断追求最高“运营效率”的公司中，我的任务清单每天都在增长。我也没有编出那个清单。上面提到的所有项目，我在这家公司工作的过去 3 年里，要么接触过，要么支持过。

话虽这么说，在一个好的开发商店里，你应该有一个特定的任务。俗话说，万事通……万事通。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2009-02-03T22:50:51.217

这在很大程度上取决于您正在编程的内容。如果您正在开发低级设备驱动程序，那么了解底层硬件至关重要。如果您正在开发一个独立的 Java 应用程序，那么您对所使用的 JVM 和库的了解越多越好 - 但并不是绝对有必要了解很多。

一般来说，您对系统环境了解得越多越好。你的同事和管理层希望你知道多少取决于他们。

无知终将受到惩罚。如果不是你的同行和管理层，全世界都会这样做。查看任何一周的头条新闻或风险摘要，了解对系统环境的无知导致软件故障的示例。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2009-02-03T22:54:45.703

[咆哮模式开启] 哈，Excel 和 Word 的诅咒。

工作之余——尤其是朋友和家人，但有时在咨询或交付软件时，任何和所有非技术人员都希望您了解这些。*当有人*要求您查看他们在 Office 的某些方面遇到的一个小问题时，就会有一种内部的抱怨。并且因为它是客户，并且您希望显得乐于助人，所以您同意。

这只是一个全面的期望，因为你是一名开发人员，你对配置电子表格、修复 Word 模板以及任何和所有其他办公室技术人员任务具有天生的知识，此外，你可以将目光投向一些配置不当的 Office 混乱并立即诊断问题是什么。

我只能设法整理一个电子表格来安排我的重复发票并设置一个 Word 模板来编写它们。我也经常告诉人们——但从来没有人听过。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2009-02-03T23:04:48.333

这在很大程度上取决于您当前正在开发的软件类型

例如，当我为当地政府开发软件时，我必须学习诸如

*   登记动物（宠物）的规则是什么。什么是注册类型，适用哪些折扣，未按时注册的处罚是什么
*   市政费是如何计算的。每年如何提高利率（实际上，提高每年利率的算法及其实现是我迄今为止遇到的最复杂的任务）。
*   建筑许可证是如何发放的。可以执行哪些类型的检查。谁参与发放建筑许可证的过程（业主、建筑商、建筑师、官员等）
*   水表多久读一次。如何将水表分配给物业，水表上有多少个刻度盘，如何将水表从一个物业上拆下并连接到另一个物业
*   有哪些不同的养老金类型。根据养老金类型授予的不同折扣是什么。
*   有哪些不同类型的收据。存在哪些不同类型的终端打印机（用于打印小收据的那些）以及如何打印到它们。
*   什么是房产，地层子级，将房产划分为“地块”的规则是什么......

嗯，这只是我在项目的 2 年中学到的非编程知识的一部分。最不幸的是，现在我搬到了另一家公司，我几乎没有机会使用这些知识。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2009-02-03T23:23:24.193

我的职位是“高级软件工程师”。事实上，在过去几年的大部分时间里，我很少进行软件开发，但确实做了很多：

系统和网络管理

使用 HTML 进行静态网页开发（我不考虑那种编程，虽然我做过 PHP、CGI 和 JavaScript）。

正如其他人所说，服务台之类的东西，虽然不像过去那么多。

作为“任务负责人”，我应该具备一些人事/管理技能，尽管这通常会涉及编写月度报告。我也时不时地沉迷于 CMMi 的东西，这在理想的世界中可能有点相关，但通常只是保存记录，以便雇主可以竞标需要它的新合同。

在科学实验室工作，需要了解一些科学知识，特别是如果您想/需要编写代码进行科学计算。

在（美国）政府机构工作，有很多文书工作，需要了解很多政府法规（例如信息自由法）

幸运的是，我最近进行了内部调动，我正在做更多的开发工作，而不是其他东西！

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2011-06-15T02:20:10.523

就个人而言，我发现知道更多总是好的，它为下一个层次铺平了道路。生活中最艰难的事情是在整合点。字面上地。人们非常注重专业，但不要忘记您需要能够跨越两个领域的人。

# python - 理解切片符号

> ID：509211
> 
> 赞同：4150
> 
> 时间：2009-02-03T22:31:02.787
> 
> 标签：python, list, slice, iterable

我需要对 Python 的切片表示法有一个很好的解释（参考是​​一个加号）。

对我来说，这个符号需要一点了解。

它看起来非常强大，但我还没有完全理解它。

* * *

## 回答 #1

> 赞同：5838
> 
> 时间：2009-02-03T22:48:24.687

这真的很简单：

```
a[start:stop]  # items start through stop-1
a[start:]      # items start through the rest of the array
a[:stop]       # items from the beginning through stop-1
a[:]           # a copy of the whole array 
```

还有一个`step`值，它可以与上述任何一个一起使用：

```
a[start:stop:step] # start through not past stop, by step 
```

要记住的关键点是该`:stop`值表示*不在*所选切片中的第一个值。`stop`因此，和之间的差异`start`是所选元素的数量（如果`step`是 1，则默认值）。

另一个特点是`start`或者`stop`可能是一个*负数*，这意味着它从数组的末尾而不是开头开始计数。所以：

```
a[-1]    # last item in the array
a[-2:]   # last two items in the array
a[:-2]   # everything except the last two items 
```

同样，`step`可能是负数：

```
a[::-1]    # all items in the array, reversed
a[1::-1]   # the first two items, reversed
a[:-3:-1]  # the last two items, reversed
a[-3::-1]  # everything except the last two items, reversed 
```

如果项目比你要求的少，Python 对程序员很友好。例如，如果您要求`a[:-2]`并且`a`只包含一个元素，您会得到一个空列表而不是错误。有时您更喜欢错误，因此您必须意识到这可能会发生。

### 与`slice()`对象的关系

切片运算符`[]`实际上是在上面的代码中与`slice()`使用符号的对象一起使用的`:`（仅在 内有效`[]`），即：

```
a[start:stop:step] 
```

相当于：

```
a[slice(start, stop, step)] 
```

根据参数的数量，切片对象的行为也略有不同，类似于`range()`，即同时支持`slice(stop)`和`slice(start, stop[, step])`。要跳过指定给定参数，可以使用`None`, 以便 eg`a[start:]`等价于`a[slice(start, None)]`或`a[::-1]`等价于`a[slice(None, None, -1)]`。

虽然`:`基于 - 的符号对于简单的切片非常有帮助，但`slice()`对象的显式使用简化了切片的编程生成。

* * *

## 回答 #2

> 赞同：633
> 
> 时间：2009-02-03T22:49:04.247

[Python 教程](http://docs.python.org/tutorial/introduction.html#strings)讨论了它（向下滚动一点，直到你到达关于切片的部分）。

ASCII 艺术图对于记住切片的工作方式也很有帮助：

```
 +---+---+---+---+---+---+
 | P | y | t | h | o | n |
 +---+---+---+---+---+---+
 0   1   2   3   4   5   6
-6  -5  -4  -3  -2  -1 
```

> 记住切片如何工作的一种方法是将索引视为字符*之间*的指向，第一个字符的左边缘编号为 0。然后*n 个*字符的字符串的最后一个字符的右边缘具有索引*n*。

* * *

## 回答 #3

> 赞同：477
> 
> 时间：2009-02-03T23:08:22.477

枚举语法允许的可能性：

```
>>> seq[:]                # [seq[0],   seq[1],          ..., seq[-1]    ]
>>> seq[low:]             # [seq[low], seq[low+1],      ..., seq[-1]    ]
>>> seq[:high]            # [seq[0],   seq[1],          ..., seq[high-1]]
>>> seq[low:high]         # [seq[low], seq[low+1],      ..., seq[high-1]]
>>> seq[::stride]         # [seq[0],   seq[stride],     ..., seq[-1]    ]
>>> seq[low::stride]      # [seq[low], seq[low+stride], ..., seq[-1]    ]
>>> seq[:high:stride]     # [seq[0],   seq[stride],     ..., seq[high-1]]
>>> seq[low:high:stride]  # [seq[low], seq[low+stride], ..., seq[high-1]] 
```

当然，如果`(high-low)%stride != 0`，那么终点会比 低一点`high-1`。

如果`stride`为负数，则排序会发生一些变化，因为我们正在倒计时：

```
>>> seq[::-stride]        # [seq[-1],   seq[-1-stride],   ..., seq[0]    ]
>>> seq[high::-stride]    # [seq[high], seq[high-stride], ..., seq[0]    ]
>>> seq[:low:-stride]     # [seq[-1],   seq[-1-stride],   ..., seq[low+1]]
>>> seq[high:low:-stride] # [seq[high], seq[high-stride], ..., seq[low+1]] 
```

扩展切片（带有逗号和省略号）主要仅用于特殊数据结构（如 NumPy）；基本序列不支持它们。

```
>>> class slicee:
...     def __getitem__(self, item):
...         return repr(item)
...
>>> slicee()[0, 1:2, ::5, ...]
'(0, slice(1, 2, None), slice(None, None, 5), Ellipsis)' 
```

* * *

## 回答 #4

> 赞同：394
> 
> 时间：2011-01-18T21:37:57.723

上面的答案没有讨论切片分配。要理解切片分配，在 ASCII 艺术中添加另一个概念会很有帮助：

```
 +---+---+---+---+---+---+
                | P | y | t | h | o | n |
                +---+---+---+---+---+---+
Slice position: 0   1   2   3   4   5   6
Index position:   0   1   2   3   4   5

>>> p = ['P','y','t','h','o','n']
# Why the two sets of numbers:
# indexing gives items, not lists
>>> p[0]
 'P'
>>> p[5]
 'n'

# Slicing gives lists
>>> p[0:1]
 ['P']
>>> p[0:2]
 ['P','y'] 
```

一种启发式方法是，对于从零到 n 的切片，认为：“零是开头，从开头开始并在列表中取 n 个项目”。

```
>>> p[5] # the last of six items, indexed from zero
 'n'
>>> p[0:5] # does NOT include the last item!
 ['P','y','t','h','o']
>>> p[0:6] # not p[0:5]!!!
 ['P','y','t','h','o','n'] 
```

另一个启发式是，“对于任何切片，用零替换开头，应用前一个启发式来获取列表的末尾，然后计算第一个数字备份以从开头切掉项目”

```
>>> p[0:4] # Start at the beginning and count out 4 items
 ['P','y','t','h']
>>> p[1:4] # Take one item off the front
 ['y','t','h']
>>> p[2:4] # Take two items off the front
 ['t','h']
# etc. 
```

切片赋值的第一条规则是，由于切片*返回*一个列表，切片赋值*需要*一个列表（或其他可迭代的）：

```
>>> p[2:3]
 ['t']
>>> p[2:3] = ['T']
>>> p
 ['P','y','T','h','o','n']
>>> p[2:3] = 't'
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: can only assign an iterable 
```

切片分配的第二条规则，您也可以在上面看到，是列表的任何部分由切片索引返回，这与切片分配更改的部分相同：

```
>>> p[2:4]
 ['T','h']
>>> p[2:4] = ['t','r']
>>> p
 ['P','y','t','r','o','n'] 
```

切片分配的第三条规则是，分配的列表（可迭代）不必具有相同的长度；索引切片被简单地切掉并被分配的任何内容全部替换：

```
>>> p = ['P','y','t','h','o','n'] # Start over
>>> p[2:4] = ['s','p','a','m']
>>> p
 ['P','y','s','p','a','m','o','n'] 
```

要习惯的最棘手的部分是分配给空切片。使用启发式 1 和 2 很容易让您的头脑围绕*索引*一个空切片：

```
>>> p = ['P','y','t','h','o','n']
>>> p[0:4]
 ['P','y','t','h']
>>> p[1:4]
 ['y','t','h']
>>> p[2:4]
 ['t','h']
>>> p[3:4]
 ['h']
>>> p[4:4]
 [] 
```

然后，一旦您看到了这一点，对空切片的切片分配也很有意义：

```
>>> p = ['P','y','t','h','o','n']
>>> p[2:4] = ['x','y'] # Assigned list is same length as slice
>>> p
 ['P','y','x','y','o','n'] # Result is same length
>>> p = ['P','y','t','h','o','n']
>>> p[3:4] = ['x','y'] # Assigned list is longer than slice
>>> p
 ['P','y','t','x','y','o','n'] # The result is longer
>>> p = ['P','y','t','h','o','n']
>>> p[4:4] = ['x','y']
>>> p
 ['P','y','t','h','x','y','o','n'] # The result is longer still 
```

请注意，由于我们没有更改切片的第二个数字 (4)，因此即使我们分配给空切片，插入的项目也始终与“o”堆叠在一起。所以空切片分配的位置是非空切片分配位置的逻辑扩展。

稍微备份一下，当你继续我们的计算切片开始的过程时会发生什么？

```
>>> p = ['P','y','t','h','o','n']
>>> p[0:4]
 ['P','y','t','h']
>>> p[1:4]
 ['y','t','h']
>>> p[2:4]
 ['t','h']
>>> p[3:4]
 ['h']
>>> p[4:4]
 []
>>> p[5:4]
 []
>>> p[6:4]
 [] 
```

切片，一旦你完成，你就完成了；它不会开始向后切片。在 Python 中，除非您使用负数明确要求它们，否则您不会获得负跨度。

```
>>> p[5:3:-1]
 ['n','o'] 
```

“一旦你完成了，你就完成了”规则有一些奇怪的后果：

```
>>> p[4:4]
 []
>>> p[5:4]
 []
>>> p[6:4]
 []
>>> p[6]
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
IndexError: list index out of range 
```

事实上，与索引相比，Python 切片具有出奇的防错能力：

```
>>> p[100:200]
 []
>>> p[int(2e99):int(1e99)]
 [] 
```

这有时会派上用场，但也可能导致一些奇怪的行为：

```
>>> p
 ['P', 'y', 't', 'h', 'o', 'n']
>>> p[int(2e99):int(1e99)] = ['p','o','w','e','r']
>>> p
 ['P', 'y', 't', 'h', 'o', 'n', 'p', 'o', 'w', 'e', 'r'] 
```

根据您的应用程序，这可能……也可能不是……是您所希望的！

* * *

以下是我原始答案的文字。它对很多人有用，所以我不想删除它。

```
>>> r=[1,2,3,4]
>>> r[1:1]
[]
>>> r[1:1]=[9,8]
>>> r
[1, 9, 8, 2, 3, 4]
>>> r[1:1]=['blah']
>>> r
[1, 'blah', 9, 8, 2, 3, 4] 
```

这也可以澄清切片和索引之间的区别。

* * *

## 回答 #5

> 赞同：276
> 
> 时间：2014-07-12T13:19:03.707

> ## 解释 Python 的切片符号

简而言之，`:`下标符号 ( ) 中的冒号 ( `subscriptable[subscriptarg]`) 构成切片符号 - 它具有可选参数, `start`, :`stop``step`

```
sliceable[start:stop:step] 
```

Python 切片是一种有条不紊地访问部分数据的快速计算方法。在我看来，即使是一名中级 Python 程序员，也是必须熟悉的语言的一个方面。

## 重要定义

首先，让我们定义几个术语：

> **start：切片的开始索引，除非与***stop*相同，否则会包含该索引处的元素，默认为0，即第一个索引。如果为负数，则表示`n`从末尾开始。
> 
> **stop：**切片的结束索引，*不*包括该索引处的元素，默认为被切片的序列的长度，即直到并包括结尾。
> 
> **step：**索引增加的数量，默认为 1。如果它是负数，你正在反向切片迭代。

## 索引如何工作

您可以制作任何这些正数或负数。正数的含义很简单，但是对于负数，就像 Python 中的索引一样，您从末尾倒数*start*和*stop*，而对于*step*，您只需减少索引。此示例[来自文档的教程](https://docs.python.org/2/tutorial/introduction.html)，但我对其稍作修改以指示每个索引引用的序列中的哪个项目：

```
 +---+---+---+---+---+---+
 | P | y | t | h | o | n |
 +---+---+---+---+---+---+
   0   1   2   3   4   5 
  -6  -5  -4  -3  -2  -1 
```

## 切片的工作原理

要将切片表示法与支持它的序列一起使用，您必须在序列后面的方括号中至少包含一个冒号（[根据 Python 数据模型，它实际上](https://docs.python.org/2/reference/datamodel.html#object.__getitem__)[实现了`__getitem__`](https://docs.python.org/2/reference/datamodel.html#object.__getitem__)序列的方法。）

切片符号的工作方式如下：

```
sequence[start:stop:step] 
```

回想一下*start*、*stop*和*step*有默认值，因此要访问默认值，只需省略参数即可。

从列表（或任何其他支持它的序列，如字符串）中获取最后九个元素的切片表示法如下所示：

```
my_list[-9:] 
```

当我看到这一点时，我将括号中的部分读为“从末尾到末尾的第 9 个”。（其实我在心里把它缩写成“-9, on”）

## 解释：

完整的符号是

```
my_list[-9:None:None] 
```

并替换默认值（实际上，当为负`step`时，`stop`默认值为`-len(my_list) - 1``None`

```
my_list[-9:len(my_list):1] 
```

**冒号**,`:`告诉 Python 你给了它一个切片而不是一个常规索引。这就是为什么在 Python 2 中制作列表的浅拷贝的惯用方式是

```
list_copy = sequence[:] 
```

清除它们是：

```
del my_list[:] 
```

（Python 3 有一个`list.copy`and`list.clear`方法。）

### 当`step`为负时，默认值`start`和`stop`变化

默认情况下，当`step`参数为空（或`None`）时，将其分配给`+1`。

但是你可以传入一个负整数，列表（或大多数其他标准切片）将从末尾切片到开头。

因此，负切片将更改和的默认`start`值`stop`！

### 在源中确认这一点

我喜欢鼓励用户阅读源代码和文档。切片对象和此逻辑的[源代码可在此处找到](https://github.com/python/cpython/blob/master/Objects/sliceobject.c)。首先我们确定是否`step`为负：

> ```
>  step_is_negative = step_sign < 0; 
> ```

如果是这样，下限`-1` 意味着我们一直切到并包括开头，上限是长度减 1，这意味着我们从结尾开始。（请注意，它的语义*不同于*`-1`用户可以在 Python 中传递指示最后一项的索引。）*`-1`*

 *> ```
> if (step_is_negative) {
>     lower = PyLong_FromLong(-1L);
>     if (lower == NULL)
>         goto error;
> 
>     upper = PyNumber_Add(length, lower);
>     if (upper == NULL)
>         goto error;
> } 
> ```

否则`step`为正数，下限为零，上限（我们上升但不包括）切片列表的长度。

> ```
> else {
>     lower = _PyLong_Zero;
>     Py_INCREF(lower);
>     upper = length;
>     Py_INCREF(upper);
> } 
> ```

然后，我们可能需要应用默认值`start`和- 当为负时`stop`，默认值然后`start`计算为上限：`step`

> ```
> if (self->start == Py_None) {
>     start = step_is_negative ? upper : lower;
>     Py_INCREF(start);
> } 
> ```

和`stop`，下界：

> ```
> if (self->stop == Py_None) {
>     stop = step_is_negative ? lower : upper;
>     Py_INCREF(stop);
> } 
> ```

# 给你的切片一个描述性的名字！

您可能会发现将形成切片与将切片传递给`list.__getitem__`方法分开是很有用的（[这就是方括号的作用](https://docs.python.org/2/reference/datamodel.html#object.__getitem__)）。即使您不熟悉它，它也可以使您的代码更具可读性，以便可能必须阅读您的代码的其他人可以更容易地理解您在做什么。

但是，您不能只将一些用冒号分隔的整数分配给变量。您需要使用切片对象：

```
last_nine_slice = slice(-9, None) 
```

第二个参数 ,`None`是必需的，因此第一个参数被解释为`start`参数[，否则它将是`stop`参数](https://docs.python.org/2/library/functions.html#slice)。

然后，您可以将切片对象传递给您的序列：

```
>>> list(range(100))[last_nine_slice]
[91, 92, 93, 94, 95, 96, 97, 98, 99] 
```

有趣的是范围也需要切片：

```
>>> range(100)[last_nine_slice]
range(91, 100) 
```

# 内存注意事项：

由于 Python 列表切片会在内存中创建新对象，因此需要注意的另一个重要功能是`itertools.islice`. 通常，您需要迭代切片，而不仅仅是在内存中静态创建它。`islice`非常适合这个。需要注意的是，它不支持、 或的否定参数`start`，因此如果这是一个问题，您可能需要提前计算索引或反转可迭代对象。`stop``step`

```
length = 100
last_nine_iter = itertools.islice(list(range(length)), length-9, None, 1)
list_last_nine = list(last_nine_iter) 
```

现在：

```
>>> list_last_nine
[91, 92, 93, 94, 95, 96, 97, 98, 99] 
```

列表切片复制的事实是列表本身的一个特性。如果您正在对 Pandas DataFrame 之类的高级对象进行切片，它可能会返回原始视图，而不是副本。

* * *

## 回答 #6

> 赞同：154
> 
> 时间：2009-02-03T23:15:02.633

当我第一次看到切片语法时，有几件事对我来说并不是很明显：

```
>>> x = [1,2,3,4,5,6]
>>> x[::-1]
[6,5,4,3,2,1] 
```

反转序列的简单方法！

如果您出于某种原因想要以相反的顺序每隔一个项目：

```
>>> x = [1,2,3,4,5,6]
>>> x[::-2]
[6,4,2] 
```

* * *

## 回答 #7

> 赞同：106
> 
> 时间：2012-10-22T05:33:39.697

在 Python 2.7 中

在 Python 中切片

```
[a:b:c]

len = length of string, tuple or list

c -- default is +1\. The sign of c indicates forward or backward, absolute value of c indicates steps. Default is forward with step size 1\. Positive means forward, negative means backward.

a --  When c is positive or blank, default is 0\. When c is negative, default is -1.

b --  When c is positive or blank, default is len. When c is negative, default is -(len+1). 
```

了解索引分配非常重要。

```
In forward direction, starts at 0 and ends at len-1

In backward direction, starts at -1 and ends at -len 
```

当您说 [a:b:c] 时，您是在说取决于 c 的符号（向前或向后），从 a 开始并在 b 结束（不包括第 b 个索引处的元素）。使用上面的索引规则并记住你只会找到这个范围内的元素：

```
-len, -len+1, -len+2, ..., 0, 1, 2,3,4 , len -1 
```

但是这个范围在两个方向上无限地持续：

```
...,-len -2 ,-len-1,-len, -len+1, -len+2, ..., 0, 1, 2,3,4 , len -1, len, len +1, len+2 , .... 
```

例如：

```
 0    1    2   3    4   5   6   7   8   9   10   11
             a    s    t   r    i   n   g
    -9  -8  -7   -6   -5  -4   -3  -2  -1 
```

如果您选择的 a、b 和 c 允许在使用上述 a、b、c 的规则进行遍历时与上述范围重叠，您将获得一个包含元素的列表（在遍历期间被触及），或者您将获得一个空列表。

最后一件事：如果 a 和 b 相等，那么你也会得到一个空列表：

```
>>> l1
[2, 3, 4]

>>> l1[:]
[2, 3, 4]

>>> l1[::-1] # a default is -1 , b default is -(len+1)
[4, 3, 2]

>>> l1[:-4:-1] # a default is -1
[4, 3, 2]

>>> l1[:-3:-1] # a default is -1
[4, 3]

>>> l1[::] # c default is +1, so a default is 0, b default is len
[2, 3, 4]

>>> l1[::-1] # c is -1 , so a default is -1 and b default is -(len+1)
[4, 3, 2]

>>> l1[-100:-200:-1] # Interesting
[]

>>> l1[-1:-200:-1] # Interesting
[4, 3, 2]

>>> l1[-1:-1:1]
[]

>>> l1[-1:5:1] # Interesting
[4]

>>> l1[1:-7:1]
[]

>>> l1[1:-7:-1] # Interesting
[3, 2]

>>> l1[:-2:-2] # a default is -1, stop(b) at -2 , step(c) by 2 in reverse direction
[4] 
```

* * *

## 回答 #8

> 赞同：99
> 
> 时间：2011-09-06T06:50:08.920

[在http://wiki.python.org/moin/MovingToPythonFromOtherLanguages](http://wiki.python.org/moin/MovingToPythonFromOtherLanguages)找到这张很棒的桌子

```
Python indexes and slices for a six-element list.
Indexes enumerate the elements, slices enumerate the spaces between the elements.

Index from rear:    -6  -5  -4  -3  -2  -1      a=[0,1,2,3,4,5]    a[1:]==[1,2,3,4,5]
Index from front:    0   1   2   3   4   5      len(a)==6          a[:5]==[0,1,2,3,4]
                   +---+---+---+---+---+---+    a[0]==0            a[:-2]==[0,1,2,3]
                   | a | b | c | d | e | f |    a[5]==5            a[1:2]==[1]
                   +---+---+---+---+---+---+    a[-1]==5           a[1:-1]==[1,2,3,4]
Slice from front:  :   1   2   3   4   5   :    a[-2]==4
Slice from rear:   :  -5  -4  -3  -2  -1   :
                                                b=a[:]
                                                b==[0,1,2,3,4,5] (shallow copy of a)
```

* * *

## 回答 #9

> 赞同：69
> 
> 时间：2009-02-19T20:52:44.687

`for`使用了一下之后，我意识到最简单的描述是它与循环中的参数完全相同......

```
(from:to:step) 
```

其中任何一个都是可选的：

```
(:to:step)
(from::step)
(from:to) 
```

然后负索引只需要您将字符串的长度添加到负索引即可理解它。

无论如何，这对我有用......

* * *

## 回答 #10

> 赞同：53
> 
> 时间：2012-03-29T10:15:12.803

我发现更容易记住它是如何工作的，然后我可以找出任何特定的开始/停止/步骤组合。

首先理解是有启发性的`range()`：

```
def range(start=0, stop, step=1):  # Illegal syntax, but that's the effect
    i = start
    while (i < stop if step > 0 else i > stop):
        yield i
        i += step 
```

开始`start`，递增`step`，不到达`stop`。非常简单。

关于负步要记住的是，`stop`它始终是被排除的一端，无论它是更高还是更低。如果您希望以相反的顺序进行相同的切片，则单独进行反转会更清洁：例如`'abcde'[1:-2][::-1]`，从左侧切下一个字符，从右侧切下两个，然后反转。（另见[`reversed()`](http://www.python.org/dev/peps/pep-0322/)。）

序列切片是相同的，只是它首先对负索引进行归一化，并且永远不能超出序列：

**TODO** : 当 abs(step)>1 时，下面的代码有一个“永远不要超出序列”的错误；我*认为*我将其修补为正确的，但很难理解。

```
def this_is_how_slicing_works(seq, start=None, stop=None, step=1):
    if start is None:
        start = (0 if step > 0 else len(seq)-1)
    elif start < 0:
        start += len(seq)
    if not 0 <= start < len(seq):  # clip if still outside bounds
        start = (0 if step > 0 else len(seq)-1)
    if stop is None:
        stop = (len(seq) if step > 0 else -1)  # really -1, not last element
    elif stop < 0:
        stop += len(seq)
    for i in range(start, stop, step):
        if 0 <= i < len(seq):
            yield seq[i] 
```

不要担心`is None`细节——只要记住省略`start`和/或`stop`总是做正确的事情来给你整个序列。

规范化负索引首先允许从末尾独立计算开始和/或停止：`'abcde'[1:-2] == 'abcde'[1:3] == 'bc'`尽管`range(1,-2) == []`. 规范化有时被认为是“以长度为模”，但请注意它只添加一次长度：例如`'abcde'[-53:42]`只是整个字符串。

* * *

## 回答 #11

> 赞同：42
> 
> 时间：2009-02-06T21:16:28.940

我自己使用“元素之间的索引点”方法来思考它，但描述它的一种方式有时可以帮助其他人理解它是这样的：

```
mylist[X:Y] 
```

X 是您想要的第一个元素的索引。*Y 是您不*想要
的第一个元素的索引。

 ** * *

## 回答 #12

> 赞同：42
> 
> 时间：2013-02-04T07:20:03.337

```
Index:
      ------------>
  0   1   2   3   4
+---+---+---+---+---+
| a | b | c | d | e |
+---+---+---+---+---+
  0  -4  -3  -2  -1
      <------------

Slice:
    <---------------|
|--------------->
:   1   2   3   4   :
+---+---+---+---+---+
| a | b | c | d | e |
+---+---+---+---+---+
:  -4  -3  -2  -1   :
|--------------->
    <---------------| 
```

我希望这将帮助您在 Python 中对列表进行建模。

参考：[http ://wiki.python.org/moin/MovingToPythonFromOtherLanguages](http://wiki.python.org/moin/MovingToPythonFromOtherLanguages)

* * *

## 回答 #13

> 赞同：39
> 
> 时间：2015-03-24T16:08:36.130

这就是我教新手切片的方式：

**了解索引和切片之间的区别：**

Wiki Python 有这张惊人的图片，它清楚地区分了索引和切片。

![在此处输入图像描述](https://i.stack.imgur.com/o99aU.png)

这是一个包含六个元素的列表。为了更好地理解切片，将该列表视为一组放置在一起的六个框。每个盒子里都有一个字母。

索引就像处理盒子的内容。您可以检查任何框的内容。但是您不能一次检查多个框的内容。你甚至可以替换盒子里的东西。但是你不能在一个盒子里放两个球或一次更换两个球。

```
In [122]: alpha = ['a', 'b', 'c', 'd', 'e', 'f']

In [123]: alpha
Out[123]: ['a', 'b', 'c', 'd', 'e', 'f']

In [124]: alpha[0]
Out[124]: 'a'

In [127]: alpha[0] = 'A'

In [128]: alpha
Out[128]: ['A', 'b', 'c', 'd', 'e', 'f']

In [129]: alpha[0,1]
---------------------------------------------------------------------------
TypeError                                 Traceback (most recent call last)
<ipython-input-129-c7eb16585371> in <module>()
----> 1 alpha[0,1]

TypeError: list indices must be integers, not tuple 
```

切片就像处理盒子本身。您可以拿起第一个盒子并将其放在另一张桌子上。要拿起盒子，您只需要知道盒子的开始和结束的位置。

您甚至可以选择前三个框或后两个框或 1 到 4 之间的所有框。因此，如果您知道开头和结尾，则可以选择任意一组框。这些位置称为开始位置和停止位置。

有趣的是，您可以一次更换多个盒子。您也可以在任何您喜欢的地方放置多个盒子。

```
In [130]: alpha[0:1]
Out[130]: ['A']

In [131]: alpha[0:1] = 'a'

In [132]: alpha
Out[132]: ['a', 'b', 'c', 'd', 'e', 'f']

In [133]: alpha[0:2] = ['A', 'B']

In [134]: alpha
Out[134]: ['A', 'B', 'c', 'd', 'e', 'f']

In [135]: alpha[2:2] = ['x', 'xx']

In [136]: alpha
Out[136]: ['A', 'B', 'x', 'xx', 'c', 'd', 'e', 'f'] 
```

**用步骤切片：**

到目前为止，您已经连续挑选了箱子。但有时您需要谨慎选择。例如，您可以每隔一个箱子捡起一次。你甚至可以从最后拿起每三个盒子。这个值称为步长。这代表了您连续拾取之间的差距。如果您从头到尾挑选盒子，则步长应该是正数，反之亦然。

```
In [137]: alpha = ['a', 'b', 'c', 'd', 'e', 'f']

In [142]: alpha[1:5:2]
Out[142]: ['b', 'd']

In [143]: alpha[-1:-5:-2]
Out[143]: ['f', 'd']

In [144]: alpha[1:5:-2]
Out[144]: []

In [145]: alpha[-1:-5:2]
Out[145]: [] 
```

**Python 如何找出丢失的参数：**

切片时，如果您遗漏任何参数，Python 会尝试自动找出它。

如果你查看[CPython](http://en.wikipedia.org/wiki/CPython)的源代码，你会发现一个名为 PySlice_GetIndicesEx() 的函数，它为任何给定参数计算出切片的索引。这是 Python 中的逻辑等效代码。

此函数采用 Python 对象和可选参数进行切片，并返回请求切片的开始、停止、步长和切片长度。

```
def py_slice_get_indices_ex(obj, start=None, stop=None, step=None):

    length = len(obj)

    if step is None:
        step = 1
    if step == 0:
        raise Exception("Step cannot be zero.")

    if start is None:
        start = 0 if step > 0 else length - 1
    else:
        if start < 0:
            start += length
        if start < 0:
            start = 0 if step > 0 else -1
        if start >= length:
            start = length if step > 0 else length - 1

    if stop is None:
        stop = length if step > 0 else -1
    else:
        if stop < 0:
            stop += length
        if stop < 0:
            stop = 0 if step > 0 else -1
        if stop >= length:
            stop = length if step > 0 else length - 1

    if (step < 0 and stop >= start) or (step > 0 and start >= stop):
        slice_length = 0
    elif step < 0:
        slice_length = (stop - start + 1)/(step) + 1
    else:
        slice_length = (stop - start - 1)/(step) + 1

    return (start, stop, step, slice_length) 
```

这是切片背后的智能。由于 Python 有一个名为 slice 的内置函数，您可以传递一些参数并检查它计算缺失参数的智能程度。

```
In [21]: alpha = ['a', 'b', 'c', 'd', 'e', 'f']

In [22]: s = slice(None, None, None)

In [23]: s
Out[23]: slice(None, None, None)

In [24]: s.indices(len(alpha))
Out[24]: (0, 6, 1)

In [25]: range(*s.indices(len(alpha)))
Out[25]: [0, 1, 2, 3, 4, 5]

In [26]: s = slice(None, None, -1)

In [27]: range(*s.indices(len(alpha)))
Out[27]: [5, 4, 3, 2, 1, 0]

In [28]: s = slice(None, 3, -1)

In [29]: range(*s.indices(len(alpha)))
Out[29]: [5, 4] 
```

**注意：**这篇文章最初写在我的博客*[Python Slices 背后的智能](https://avilpage.com/2015/03/a-slice-of-python-intelligence-behind.html)*。

* * *

## 回答 #14

> 赞同：38
> 
> 时间：2013-04-28T19:49:39.690

Python切片符号：

```
a[start:end:step] 
```

*   对于`start`和`end`，负值被解释为相对于序列的结尾。
*   正索引表示要包含的最后一个元素*之后*`end`的位置。
**   空白值默认如下：`[+0:-0:1]`.*   使用否定步骤颠倒了对`start`和的解释`end`*

 *该符号扩展到（numpy）矩阵和多维数组。例如，要切片整个列，您可以使用：

```
m[::,0:2:] ## slice the first two columns 
```

切片保存数组元素的引用，而不是副本。如果要单独复制一个数组，可以使用[`deepcopy()`](https://stackoverflow.com/questions/6532881/how-to-make-a-copy-of-a-2d-array-in-python).

* * *

## 回答 #15

> 赞同：34
> 
> 时间：2013-04-05T01:59:41.697

您还可以使用切片分配从列表中删除一个或多个元素：

```
r = [1, 'blah', 9, 8, 2, 3, 4]
>>> r[1:4] = []
>>> r
[1, 2, 3, 4] 
```

* * *

## 回答 #16

> 赞同：33
> 
> 时间：2012-03-22T17:20:59.600

这只是一些额外的信息......考虑下面的列表

```
>>> l=[12,23,345,456,67,7,945,467] 
```

反转列表的其他一些技巧：

```
>>> l[len(l):-len(l)-1:-1]
[467, 945, 7, 67, 456, 345, 23, 12]

>>> l[:-len(l)-1:-1]
[467, 945, 7, 67, 456, 345, 23, 12]

>>> l[len(l)::-1]
[467, 945, 7, 67, 456, 345, 23, 12]

>>> l[::-1]
[467, 945, 7, 67, 456, 345, 23, 12]

>>> l[-1:-len(l)-1:-1]
[467, 945, 7, 67, 456, 345, 23, 12] 
```

* * *

## 回答 #17

> 赞同：29
> 
> 时间：2013-12-07T16:52:45.600

作为一般规则，使用大量硬编码索引值编写代码会导致可读性和维护混乱。例如，如果一年后你回到代码中，你会看着它，想知道你在写它的时候在想什么。显示的解决方案只是一种更清楚地说明您的代码实际在做什么的方式。通常，内置 slice() 创建一个切片对象，可以在任何允许切片的地方使用。例如：

```
>>> items = [0, 1, 2, 3, 4, 5, 6]
>>> a = slice(2, 4)
>>> items[2:4]
[2, 3]
>>> items[a]
[2, 3]
>>> items[a] = [10,11]
>>> items
[0, 1, 10, 11, 4, 5, 6]
>>> del items[a]
>>> items
[0, 1, 4, 5, 6] 
```

如果您有一个切片实例 s，您可以通过分别查看其 s.start、s.stop 和 s.step 属性来获取有关它的更多信息。例如：

> ```
> >>> a = slice(10, 50, 2)
> >>> a.start
> 10
> >>> a.stop
> 50
> >>> a.step
> 2
> >>> 
> ```

* * *

## 回答 #18

> 赞同：29
> 
> 时间：2017-03-01T02:31:43.323

[前面的答案没有讨论使用著名的NumPy](http://en.wikipedia.org/wiki/NumPy)包可以实现的多维数组切片：

**切片也可以应用于多维数组。**

```
# Here, a is a NumPy array

>>> a
array([[ 1,  2,  3,  4],
       [ 5,  6,  7,  8],
       [ 9, 10, 11, 12]])
>>> a[:2, 0:3:2]
array([[1, 3],
       [5, 7]]) 
```

逗号前的“ `:2`”作用于第一维，`0:3:2`逗号后的“”作用于第二维。

* * *

## 回答 #19

> 赞同：28
> 
> 时间：2017-01-09T12:52:44.083

* * *

## 回答 #20

> 赞同：18
> 
> 时间：2017-12-12T04:13:53.583

在我看来，如果您按照以下方式查看 Python 字符串切片符号（请继续阅读），您将更好地理解和记忆 Python 字符串切片符号。

让我们使用以下字符串...

```
azString = "abcdefghijklmnopqrstuvwxyz" 
```

对于那些不知道的人，您可以`azString`使用符号创建任何子字符串`azString[x:y]`

来自其他编程语言，这就是常识受到损害的时候。x 和 y 是什么？

我不得不坐下来运行几个场景，以寻求一种记忆技术，这将帮助我记住 x 和 y 是什么，并帮助我在第一次尝试时正确地分割字符串。

我的结论是 x 和 y 应该被视为围绕我们想要额外的字符串的边界索引。所以我们应该看到表达式为`azString[index1, index2]`，甚至更清晰为`azString[index_of_first_character, index_after_the_last_character]`。

这是该示例的可视化示例...

```
Letters   a b c d e f g h i j ...
         ↑ ↑ ↑ ↑ ↑ ↑ ↑ ↑ ↑ ↑
             ┊           ┊
Indexes  0 1 2 3 4 5 6 7 8 9 ...
             ┊           ┊
cdefgh    index1       index2 
```

因此，您所要做的就是将 index1 和 index2 设置为围绕所需子字符串的值。例如，要获取子字符串“cdefgh”，可以使用`azString[2:8]`，因为“c”左侧的索引是 2，而“h”右侧的索引是 8。

请记住，我们正在设定界限。这些边界是您可以放置​​一些括号的位置，这些括号将像这样包裹在子字符串周围......

ab **[** cdefgh **]** ij

这个技巧一直有效，而且很容易记住。

* * *

## 回答 #21

> 赞同：18
> 
> 时间：2019-08-23T14:10:39.220

我个人认为它像一个`for`循环：

```
a[start:end:step]
# for(i = start; i < end; i += step) 
```

`start`另外，请注意和的负值`end`是相对于列表末尾的，并且在上面的示例中由 计算`given_index + a.shape[0]`。

* * *

## 回答 #22

> 赞同：18
> 
> 时间：2020-07-23T05:22:23.373

### 切片规则如下：

```
[lower bound : upper bound : step size] 
```

**I-**转换`upper bound` 为`lower bound`常用符号。

**II-**然后检查`step size`是*正值*还是*负值*。

**(i)**如果`step size`是**正值**，`upper bound`则应**大于** `lower bound`，否则`empty string`打印。*例如*：

```
s="Welcome"
s1=s[0:3:1]
print(s1) 
```

输出：

```
Wel 
```

但是，如果我们运行以下代码：

```
s="Welcome"
s1=s[3:0:1]
print(s1) 
```

它将返回一个**空字符串**。

**(ii)**如果`step size`if 为**负值**，`upper bound`则应**小于** `lower bound`，否则`empty string`将被打印。例如：

```
s="Welcome"
s1=s[3:0:-1]
print(s1) 
```

输出：

```
cle 
```

但是如果我们运行以下代码：

```
s="Welcome"
s1=s[0:5:-1]
print(s1) 
```

输出将是一个**空字符串**。

因此在代码中：

```
str = 'abcd'
l = len(str)
str2 = str[l-1:0:-1]    #str[3:0:-1] 
print(str2)
str2 = str[l-1:-1:-1]    #str[3:-1:-1]
print(str2) 
```

在第一个中`str2=str[l-1:0:-1]`，`upper bound`小于**，**`lower bound`因此`dcb`被打印。

但是在 中`str2=str[l-1:-1:-1]`，`upper bound`不**小于**（在`lower bound`转换`lower bound`为**负值**时，即`-1`：因为`index`最后一个元素是 -1 和 3）。

* * *

## 回答 #23

> 赞同：16
> 
> 时间：2014-10-18T17:40:45.040

```
#!/usr/bin/env python

def slicegraphical(s, lista):

    if len(s) > 9:
        print """Enter a string of maximum 9 characters,
    so the printig would looki nice"""
        return 0;
    # print " ",
    print '  '+'+---' * len(s) +'+'
    print ' ',
    for letter in s:
        print '| {}'.format(letter),
    print '|'
    print " ",; print '+---' * len(s) +'+'

    print " ",
    for letter in range(len(s) +1):
        print '{}  '.format(letter),
    print ""
    for letter in range(-1*(len(s)), 0):
        print ' {}'.format(letter),
    print ''
    print ''

    for triada in lista:
        if len(triada) == 3:
            if triada[0]==None and triada[1] == None and triada[2] == None:
                # 000
                print s+'[   :   :   ]' +' = ', s[triada[0]:triada[1]:triada[2]]
            elif triada[0] == None and triada[1] == None and triada[2] != None:
                # 001
                print s+'[   :   :{0:2d} ]'.format(triada[2], '','') +' = ', s[triada[0]:triada[1]:triada[2]]
            elif triada[0] == None and triada[1] != None and triada[2] == None:
                # 010
                print s+'[   :{0:2d} :   ]'.format(triada[1]) +' = ', s[triada[0]:triada[1]:triada[2]]
            elif triada[0] == None and triada[1] != None and triada[2] != None:
                # 011
                print s+'[   :{0:2d} :{1:2d} ]'.format(triada[1], triada[2]) +' = ', s[triada[0]:triada[1]:triada[2]]
            elif triada[0] != None and triada[1] == None and triada[2] == None:
                # 100
                print s+'[{0:2d} :   :   ]'.format(triada[0]) +' = ', s[triada[0]:triada[1]:triada[2]]
            elif triada[0] != None and triada[1] == None and triada[2] != None:
                # 101
                print s+'[{0:2d} :   :{1:2d} ]'.format(triada[0], triada[2]) +' = ', s[triada[0]:triada[1]:triada[2]]
            elif triada[0] != None and triada[1] != None and triada[2] == None:
                # 110
                print s+'[{0:2d} :{1:2d} :   ]'.format(triada[0], triada[1]) +' = ', s[triada[0]:triada[1]:triada[2]]
            elif triada[0] != None and triada[1] != None and triada[2] != None:
                # 111
                print s+'[{0:2d} :{1:2d} :{2:2d} ]'.format(triada[0], triada[1], triada[2]) +' = ', s[triada[0]:triada[1]:triada[2]]

        elif len(triada) == 2:
            if triada[0] == None and triada[1] == None:
                # 00
                print s+'[   :   ]    ' + ' = ', s[triada[0]:triada[1]]
            elif triada[0] == None and triada[1] != None:
                # 01
                print s+'[   :{0:2d} ]    '.format(triada[1]) + ' = ', s[triada[0]:triada[1]]
            elif triada[0] != None and triada[1] == None:
                # 10
                print s+'[{0:2d} :   ]    '.format(triada[0]) + ' = ', s[triada[0]:triada[1]]
            elif triada[0] != None and triada[1] != None:
                # 11
                print s+'[{0:2d} :{1:2d} ]    '.format(triada[0],triada[1]) + ' = ', s[triada[0]:triada[1]]

        elif len(triada) == 1:
            print s+'[{0:2d} ]        '.format(triada[0]) + ' = ', s[triada[0]]

if __name__ == '__main__':
    # Change "s" to what ever string you like, make it 9 characters for
    # better representation.
    s = 'COMPUTERS'

    # add to this list different lists to experement with indexes
    # to represent ex. s[::], use s[None, None,None], otherwise you get an error
    # for s[2:] use s[2:None]

    lista = [[4,7],[2,5,2],[-5,1,-1],[4],[-4,-6,-1], [2,-3,1],[2,-3,-1], [None,None,-1],[-5,None],[-5,0,-1],[-5,None,-1],[-1,1,-2]]

    slicegraphical(s, lista) 
```

您可以运行此脚本并对其进行试验，以下是我从脚本中获得的一些示例。

```
 +---+---+---+---+---+---+---+---+---+
  | C | O | M | P | U | T | E | R | S |
  +---+---+---+---+---+---+---+---+---+
  0   1   2   3   4   5   6   7   8   9   
 -9  -8  -7  -6  -5  -4  -3  -2  -1 

COMPUTERS[ 4 : 7 ]     =  UTE
COMPUTERS[ 2 : 5 : 2 ] =  MU
COMPUTERS[-5 : 1 :-1 ] =  UPM
COMPUTERS[ 4 ]         =  U
COMPUTERS[-4 :-6 :-1 ] =  TU
COMPUTERS[ 2 :-3 : 1 ] =  MPUT
COMPUTERS[ 2 :-3 :-1 ] =  
COMPUTERS[   :   :-1 ] =  SRETUPMOC
COMPUTERS[-5 :   ]     =  UTERS
COMPUTERS[-5 : 0 :-1 ] =  UPMO
COMPUTERS[-5 :   :-1 ] =  UPMOC
COMPUTERS[-1 : 1 :-2 ] =  SEUM
[Finished in 0.9s] 
```

使用否定步长时，请注意答案向右移动 1。

* * *

## 回答 #24

> 赞同：14
> 
> 时间：2016-05-26T08:16:54.317

我的大脑似乎很乐意接受`lst[start:end]`包含`start`第 - 项的内容。我什至可以说这是一个“自然假设”。

但偶尔会出现疑问，我的大脑要求保证它不包含`end`-th 元素。

在这些时刻，我依靠这个简单的定理：

```
for any n,    lst = lst[:n] + lst[n:] 
```

这个漂亮的属性告诉我它`lst[start:end]`不包含`end`-th 项，因为它在`lst[end:]`.

请注意，这个定理对任何`n`人都是正确的。例如，您可以检查

```
lst = range(10)
lst[:-42] + lst[-42:] == lst 
```

返回`True`。

* * *

## 回答 #25

> 赞同：12
> 
> 时间：2017-09-04T16:00:44.923

在 Python 中，最基本的切片形式如下：

```
l[start:end] 
```

where`l`是一些集合，`start`是一个包含索引，并且`end`是一个排他索引。

```
In [1]: l = list(range(10))

In [2]: l[:5] # First five elements
Out[2]: [0, 1, 2, 3, 4]

In [3]: l[-5:] # Last five elements
Out[3]: [5, 6, 7, 8, 9] 
```

从头开始切片时，可以省略零索引，切片到末尾时，可以省略最终索引，因为它是多余的，所以不要冗长：

```
In [5]: l[:3] == l[0:3]
Out[5]: True

In [6]: l[7:] == l[7:len(l)]
Out[6]: True 
```

负整数在相对于集合末尾进行偏移时很有用：

```
In [7]: l[:-1] # Include all elements but the last one
Out[7]: [0, 1, 2, 3, 4, 5, 6, 7, 8]

In [8]: l[-3:] # Take the last three elements
Out[8]: [7, 8, 9] 
```

切片时可以提供超出范围的索引，例如：

```
In [9]: l[:20] # 20 is out of index bounds, and l[20] will raise an IndexError exception
Out[9]: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]

In [11]: l[-20:] # -20 is out of index bounds, and l[-20] will raise an IndexError exception
Out[11]: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9] 
```

请记住，切片集合的结果是一个全新的集合。此外，当在赋值中使用切片表示法时，切片赋值的长度不需要相同。分配切片之前和之后的值将被保留，并且集合将缩小或增长以包含新值：

```
In [16]: l[2:6] = list('abc') # Assigning fewer elements than the ones contained in the sliced collection l[2:6]

In [17]: l
Out[17]: [0, 1, 'a', 'b', 'c', 6, 7, 8, 9]

In [18]: l[2:5] = list('hello') # Assigning more elements than the ones contained in the sliced collection l [2:5]

In [19]: l
Out[19]: [0, 1, 'h', 'e', 'l', 'l', 'o', 6, 7, 8, 9] 
```

如果省略开始和结束索引，您将制作集合的副本：

```
In [14]: l_copy = l[:]

In [15]: l == l_copy and l is not l_copy
Out[15]: True 
```

如果在执行赋值操作时省略了开始和结束索引，则集合的整个内容将被引用的内容的副本替换：

```
In [20]: l[:] = list('hello...')

In [21]: l
Out[21]: ['h', 'e', 'l', 'l', 'o', '.', '.', '.'] 
```

除了基本切片之外，还可以应用以下表示法：

```
l[start:end:step] 
```

其中`l`是一个集合，`start`是一个包含索引，`end`是一个排他索引，并且`step`是一个步幅，可用于获取 中的每个*第 n 个*项目`l`。

```
In [22]: l = list(range(10))

In [23]: l[::2] # Take the elements which indexes are even
Out[23]: [0, 2, 4, 6, 8]

In [24]: l[1::2] # Take the elements which indexes are odd
Out[24]: [1, 3, 5, 7, 9] 
```

Using`step`提供了一个有用的技巧来反转 Python 中的集合：

```
In [25]: l[::-1]
Out[25]: [9, 8, 7, 6, 5, 4, 3, 2, 1, 0] 
```

也可以使用负整数`step`作为以下示例：

```
In[28]:  l[::-2]
Out[28]: [9, 7, 5, 3, 1] 
```

但是，使用负值`step`可能会变得非常混乱。此外，为了成为[Pythonic](https://en.wiktionary.org/wiki/Pythonic#Adjective)，您应该避免在单个切片中使用`start`、`end`和。`step`如果需要这样做，请考虑在两个任务中执行此操作（一个用于切片，另一个用于跨步）。

```
In [29]: l = l[::2] # This step is for striding

In [30]: l
Out[30]: [0, 2, 4, 6, 8]

In [31]: l = l[1:-1] # This step is for slicing

In [32]: l
Out[32]: [2, 4, 6] 
```

* * *

## 回答 #26

> 赞同：12
> 
> 时间：2018-04-04T09:52:18.243

我想添加一个*Hello, World!* 为初学者解释切片基础知识的示例。这对我帮助很大。

让我们有一个包含六个值的列表`['P', 'Y', 'T', 'H', 'O', 'N']`：

```
+---+---+---+---+---+---+
| P | Y | T | H | O | N |
+---+---+---+---+---+---+
  0   1   2   3   4   5 
```

现在该列表中最简单的部分是它的子列表。符号是`[<index>:<index>]`，关键是像这样阅读它：

```
[ start cutting before this index : end cutting before this index ] 
```

现在，如果您`[2:5]`从上面的列表中截取一部分，就会发生这种情况：

```
 |           |
+---+---|---+---+---|---+
| P | Y | T | H | O | N |
+---+---|---+---+---|---+
  0   1 | 2   3   4 | 5 
```

您在具有 index 的元素之前进行了剪切，并在具有 index 的元素**之前**进行了**另**`2`一次剪切。所以结果将是这两个切割之间的一个切片，一个 list 。**`5``['T', 'H', 'O']`**

 *** * *

## 回答 #27

> 赞同：11
> 
> 时间：2017-10-06T22:30:17.710

前面的大部分答案都解决了有关切片符号的问题。

用于切片的扩展索引语法是`aList[start:stop:step]`，基本示例是：

[![在此处输入图像描述](https://i.stack.imgur.com/IVkET.jpg)](https://i.stack.imgur.com/IVkET.jpg)：

更多切片示例：[15 个扩展切片](https://docs.python.org/2.3/whatsnew/section-slices.html)

* * *

## 回答 #28

> 赞同：9
> 
> 时间：2017-07-28T10:12:10.673

以下是字符串索引的示例：

```
 +---+---+---+---+---+
 | H | e | l | p | A |
 +---+---+---+---+---+
 0   1   2   3   4   5
-5  -4  -3  -2  -1

str="Name string" 
```

切片示例：[start:end:step]

```
str[start:end] # Items start through end-1
str[start:]    # Items start through the rest of the array
str[:end]      # Items from the beginning through end-1
str[:]         # A copy of the whole array 
```

下面是示例用法：

```
print str[0] = N
print str[0:2] = Na
print str[0:7] = Name st
print str[0:7:2] = Nm t
print str[0:-1:2] = Nm ti 
```

* * *

## 回答 #29

> 赞同：7
> 
> 时间：2017-12-19T06:12:23.670

如果您觉得切片中的负索引令人困惑，这里有一个非常简单的考虑方法：只需将负索引替换为`len - index`. 例如，将 -3 替换为`len(list) - 3`.

说明切片在内部做什么的最好方法是在实现此操作的代码中显示它：

```
def slice(list, start = None, end = None, step = 1):
  # Take care of missing start/end parameters
  start = 0 if start is None else start
  end = len(list) if end is None else end

  # Take care of negative start/end parameters
  start = len(list) + start if start < 0 else start
  end = len(list) + end if end < 0 else end

  # Now just execute a for-loop with start, end and step
  return [list[i] for i in range(start, end, step)] 
```

* * *

## 回答 #30

> 赞同：6
> 
> 时间：2018-07-23T13:06:55.537

基本的切片技术是定义起点、终点和步长——也称为步幅。

首先，我们将创建一个用于切片的值列表。

创建两个要切片的列表。第一个是从 1 到 9 的数字列表（列表 A）。第二个也是一个数字列表，从 0 到 9（列表 B）：

```
A = list(range(1, 10, 1)) # Start, stop, and step
B = list(range(9))

print("This is List A:", A)
print("This is List B:", B) 
```

索引 A 中的数字 3 和 B 中的数字 6。

```
print(A[2])
print(B[6]) 
```

**基本切片**

用于切片的扩展索引语法是 aList[start:stop:step]。start 参数和 step 参数都默认为 none - 唯一需要的参数是 stop。您是否注意到这类似于使用范围定义列表 A 和 B 的方式？这是因为 slice 对象表示由 range(start, stop, step) 指定的索引集。Python 3.4 文档。

如您所见，仅定义 stop 返回一个元素。由于 start 默认为 none，这意味着只检索一个元素。

重要的是要注意，第一个元素是索引 0，*而不是*索引 1。这就是我们在本练习中使用 2 个列表的原因。列表 A 的元素根据序号位置编号（第一个元素是 1，第二个元素是 2，等等），而列表 B 的元素是用于索引它们的数字（[0] 表示第一个元素 0， ETC。）。

使用扩展的索引语法，我们检索一系列值。例如，所有值都用冒号检索。

```
A[:] 
```

要检索元素的子集，需要定义开始和停止位置。

给定模式 aList[start:stop]，从列表 A 中检索前两个元素。

* * *

## 回答 #31

> 赞同：6
> 
> 时间：2019-05-27T20:25:41.547

我不认为[Python 教程](https://docs.python.org/3/tutorial/introduction.html#strings)图（在其他各种答案中引用）是好的，因为这个建议适用于积极的步伐，但不适用于消极的步伐。

这是图表：

```
 +---+---+---+---+---+---+
 | P | y | t | h | o | n |
 +---+---+---+---+---+---+
 0   1   2   3   4   5   6
-6  -5  -4  -3  -2  -1 
```

从图中，我希望`a[-4,-6,-1]`是，`yP`但它是`ty`。

```
>>> a = "Python"
>>> a[2:4:1] # as expected
'th'
>>> a[-4:-6:-1] # off by 1
'ty' 
```

始终有效的方法是考虑字符或插槽并将索引用作半开区间——如果步幅为正则为右开，如果步幅为负则为左开。

这样，我可以认为是`a[-4:-6:-1]`区间`a(-6,-4]`术语。

```
 +---+---+---+---+---+---+
 | P | y | t | h | o | n |
 +---+---+---+---+---+---+
   0   1   2   3   4   5  
  -6  -5  -4  -3  -2  -1

 +---+---+---+---+---+---+---+---+---+---+---+---+
 | P | y | t | h | o | n | P | y | t | h | o | n |
 +---+---+---+---+---+---+---+---+---+---+---+---+
  -6  -5  -4  -3  -2  -1   0   1   2   3   4   5 
```

* * *

## 回答 #32

> 赞同：3
> 
> 时间：2019-06-14T04:51:00.503

我对没有找到准确描述切片功能的在线资源或 Python 文档感到有些沮丧。

我接受了 Aaron Hall 的建议，阅读了 CPython 源代码的相关部分，并编写了一些执行切片的 Python 代码，其执行方式与在 CPython 中的执行方式类似。我已经在 Python 3 中对整数列表进行了数百万次随机测试来测试我的代码。

您可能会发现我的代码中对 CPython 中相关函数的引用很有帮助。

```
def slicer(x, start=None, stop=None, step=None):
    """ Return the result of slicing list x.  

    See the part of list_subscript() in listobject.c that pertains 
    to when the indexing item is a PySliceObject.
    """

    # Handle slicing index values of None, and a step value of 0.
    # See PySlice_Unpack() in sliceobject.c, which
    # extracts start, stop, step from a PySliceObject.
    maxint = 10000000       # A hack to simulate PY_SSIZE_T_MAX
    if step is None:
        step = 1
    elif step == 0:
        raise ValueError('slice step cannot be zero')

    if start is None:
        start = maxint if step < 0 else 0
    if stop is None:
        stop = -maxint if step < 0 else maxint

    # Handle negative slice indexes and bad slice indexes.
    # Compute number of elements in the slice as slice_length.
    # See PySlice_AdjustIndices() in sliceobject.c
    length = len(x)
    slice_length = 0

    if start < 0:
        start += length
        if start < 0:
            start = -1 if step < 0 else 0
    elif start >= length:
        start = length - 1 if step < 0 else length

    if stop < 0:
        stop += length
        if stop < 0:
            stop = -1 if step < 0 else 0
    elif stop > length:
        stop = length - 1 if step < 0 else length

    if step < 0:
        if stop < start:
            slice_length = (start - stop - 1) // (-step) + 1
    else:
        if start < stop:
            slice_length = (stop - start - 1) // step + 1

    # Cases of step = 1 and step != 1 are treated separately
    if slice_length <= 0:
        return []
    elif step == 1:
        # See list_slice() in listobject.c
        result = []
        for i in range(stop - start):
            result.append(x[i+start])
        return result
    else:
        result = []
        cur = start
        for i in range(slice_length):
            result.append(x[cur])
            cur += step
        return result 
```

* * *

## 回答 #33

> 赞同：2
> 
> 时间：2018-12-28T04:34:41.117

`range`如果我们可以将切片与给出索引的相关联，则很容易理解。我们可以将切片分为以下两类：

* * *

## 1.无步或步>0。例如，`[i:j]`或`[i:j:k]`(k>0)

假设序列是`s=[1,2,3,4,5]`。

*   如果`0<i<len(s)`并且`0<j<len(s)`, 那么`[i:j:k] -> range(i,j,k)`

例如，`[0:3:2] -> range(0,3,2) -> 0, 2`

*   如果`i>len(s)`或`j>len(s)`，那么`i=len(s)`或`j=len(s)`

例如，`[0:100:2] -> range(0,len(s),2) -> range(0,5,2) -> 0, 2, 4`

*   如果`i<0`或`j<0`，那么`i=max(0,len(s)+i)`或`j=max(0,len(s)+j)`

例如，`[0:-3:2] -> range(0,len(s)-3,2) -> range(0,2,2) -> 0`

再举一个例子，`[0:-1:2] -> range(0,len(s)-1,2) -> range(0,4,2) -> 0, 2`

*   如果`i`未指定，则`i=0`

例如，`[:4:2] -> range(0,4,2) -> range(0,4,2) -> 0, 2`

*   如果`j`未指定，则`j=len(s)`

例如，`[0::2] -> range(0,len(s),2) -> range(0,5,2) -> 0, 2, 4`

* * *

## 2\. 步长 < 0。例如，`[i:j:k]`(k<0)

假设序列是`s=[1,2,3,4,5]`。

*   如果`0<i<len(s)`并且`0<j<len(s)`, 那么`[i:j:k] -> range(i,j,k)`

例如，`[5:0:-2] -> range(5,0,-2) -> 5, 3, 1`

*   如果`i>len(s)`或`j>len(s)`，那么`i=len(s)-1`或`j=len(s)-1`

例如，`[100:0:-2] -> range(len(s)-1,0,-2) -> range(4,0,-2) -> 4, 2`

*   如果`i<0`或`j<0`，那么`i=max(-1,len(s)+i)`或`j=max(-1,len(s)+j)`

例如，`[-2:-10:-2] -> range(len(s)-2,-1,-2) -> range(3,-1,-2) -> 3, 1`

*   如果`i`未指定，则`i=len(s)-1`

例如，`[:0:-2] -> range(len(s)-1,0,-2) -> range(4,0,-2) -> 4, 2`

*   如果`j`未指定，则`j=-1`

例如，`[2::-2] -> range(2,-1,-2) -> 2, 0`

再举一个例子，`[::-1] -> range(len(s)-1,-1,-1) -> range(4,-1,-1) -> 4, 3, 2, 1, 0`

* * *

## 总之

[![在此处输入图像描述](https://i.stack.imgur.com/4DLrK.png)](https://i.stack.imgur.com/4DLrK.png)

# c# - C# - 子窗体关闭后刷新下拉菜单

> ID：509213
> 
> 赞同：0
> 
> 时间：2009-02-03T22:31:56.420
> 
> 标签：c#

我有多个“工人”表单的 ac# 应用程序。这些表单有许多组合框，它们在表单加载时从数据库中填充，旁边有“添加”按钮。当用户单击添加按钮时，管理表单被打开，允许用户将相应的值添加到数据库中。

例如，组合框可以是街道类型的列表。“Drive”不在数据库的街道类型表中，所以用户想添加它。他们单击添加按钮并加载管理表单，因此他们可以将“Drive”值添加到街道类型。当管理表单关闭时，我想在返回工作表单时重新填充组合框。

关于实现这一目标的最佳方法的任何见解？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-03T22:50:03.887

多谢你们。我使用了 ShowDialog，效果很好。

管理 adminForm = new Administration(); adminForm.tcAdministration.SelectedIndex = 1; adminForm.ExistingCaseNumber = this.ExistingCaseNumber; adminForm.ShowDialog();

this.PopulateComboBoxes();

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-30T01:44:33.733

你也可以这样做：Form1 frm = (Form1)Application.OpenForms["Form1"]; 这将允许您从另一个更新表单。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-03T22:35:13.073

创建可以管理列表的表单后，我将为表单的 Closed 事件添加一个事件处理程序。在该事件处理程序中，我将重新加载列表的数据源，然后将其重新绑定到组合框。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-02-03T22:38:45.237

一种方法是将表单创建为模态表单，您可以使用 this.Parent，并从那里访问一个更新组合框的公共方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-02-03T22:52:57.187

如果您从一开始就没有进行设置，则需要做更多的工作，但是如果您正在做正确的 MVP[~] 事情，那么该子“添加”表单应该会触发您的模型中的更新，您的控制器会观察到，它通过更新视图的该部分来做出反应。

[~] *Martin Fowler 已经不再使用模型-视图-演示者这个术语，但他仍然在监督控制器和监督演示者之间犹豫不决。*

几个参考：

*   [http://martinfowler.com/eaaDev/SupervisingPresenter.html](http://martinfowler.com/eaaDev/SupervisingPresenter.html)
*   [http://msdn.microsoft.com/en-us/magazine/cc188690.aspx](http://msdn.microsoft.com/en-us/magazine/cc188690.aspx)

# ruby-on-rails - 自动测试性能下降

> ID：509214
> 
> 赞同：1
> 
> 时间：2009-02-03T22:32:01.240
> 
> 标签：ruby-on-rails, autotest, zentest

多年来，我一直在使用[ZenTest](http://zentest.rubyforge.org/ZenTest/)来运行我的 Rails 项目中的所有测试，而且它总是很简单。但是，在我的 Mac 上，运行所有测试的时间突然增加了 3 倍。我们有 1219 次测试，在过去的一年里，它平均会在大约 300 秒内运行所有测试。但现在，它需要将近 900 秒：

```
Finished in 861.3578 seconds.

1219 tests, 8167 assertions, 0 failures, 0 errors
============================================================================== 
```

我想不出为什么会出现这种放缓的任何原因。我尝试更新到最新的 gem 版本，减少测试的日志输出并重新生成测试数据库，但都无济于事。任何人都可以提出一种提高性能的方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-02-03T23:18:33.737

当你消除了不可能的事情后，无论剩下的多么不可能，都必须是解释：如果它不是 gem，不是数据库（你检查过索引吗？），不是你的 Mac，不是 Rails（你最近升级了），可以吗？是代码？

我会检查 git/svn/cvs 日志以了解您最近所做的一些更改，并查找可能会减慢查询速度的任何内容。

如果您无法立即找到任何内容，请分析代码以查看时间的去向。这比仅仅记住你所做的改变要慢（这几乎总是在这种情况下得到解释），但可能会为你指明正确的方向。

性能问题可能会令人沮丧，因为任何数量的因素都会产生影响。数据库中缺少索引。网络延迟。内存不足的情况。不要放弃，记住[蒂尔顿定律](http://smuglispweeny.blogspot.com/2009/01/tiltons-law-solve-failure-first.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-02-04T05:23:53.530

你真的要在这里做更多的功课，我怀疑它的 ZenTest：

1.  几个月前，当东西很棒而且花花公子的时候，抓住你的代码版本。运行所有测试，将所有测试持续时间输出到电子表格或其他东西。

2.  获取您的代码库的当前版本并重复 1) 中的过程

3.  如果持续时间相同，则有关您的数据库配置或机器配置的某些内容已更改

4.  如果所有测试平均速度较慢，这很难诊断，但似乎每个测试中都有一段新代码在运行。

5.  如果少数新测试真的很慢，请修复它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-20T12:42:02.137

所以我终于解决了这个问题。以下是三个简单步骤的方法：

1.  插入 OSX Leopard CD
2.  从头开始完全重新安装 Leopard
3.  重新安装 Ruby、MySQL 等

完成此操作后，测试将在 260 秒内运行。

我不知道发生了什么，但它肯定似乎是某个地方的 MySQL 问题。

# apache-flex - Flex 3 - 如何支持 HTTP Authentication URLRequest？

> ID：509219
> 
> 赞同：10
> 
> 时间：2009-02-03T22:32:28.977
> 
> 标签：apache-flex, actionscript, base64, http-authentication, urlrequest

我有一个使用 URLRequest 将文件上传到服务器的 Flex 文件上传脚本。我想添加对 http 身份验证（服务器上受密码保护的目录）的支持，但我不知道如何实现这一点 - 我假设我需要以某种方式扩展类，但我有点迷失了。

我尝试修改以下内容（用 URLRequest 替换 HTTPService），但这没有用。

```
private function authAndSend(service:HTTPService):void{        
   var encoder:Base64Encoder = new Base64Encoder();        
   encoder.encode("someusername:somepassword");        
   service.headers = {Authorization:"Basic " + encoder.toString()};
   service.send();
} 
```

我应该指出，我对 ActionScript / Flex 并不了解，尽管我已经成功地修改了上传脚本。

**[编辑]** - 这是我的进度更新，基于下面的答案，虽然我仍然无法让它工作：

谢谢您的帮助。我试图实现你的代码，但我没有任何运气。

我在处理经过 HTTP 身份验证的位置时遇到的一般行为是，使用 IE7 一切都很好，但在 Firefox 中，当我尝试将文件上传到服务器时，它会显示 HTTP 身份验证提示 - 即使给出正确的详细信息，也会停止上传过程。

我相信 IE7 正常的原因是浏览器和 Flash 组件共享的会话/身份验证信息 - 但是，在 Firefox 中情况并非如此，我遇到了上述行为。

这是我更新的上传功能，包含您的更改：

```
private function pergress():void 
{
if (fileCollection.length == 0) 
  {
  var urlString:String = "upload_process.php?folder="+folderId+"&type="+uploadType+"&feid="+formElementId+"&filetotal="+fileTotal;
  if (ExternalInterface.available) 
    {
    ExternalInterface.call("uploadComplete", urlString);
    }
  }
if (fileCollection.length > 0) 
  {
  fileTotal++;
  var urlRequest:URLRequest = new URLRequest("upload_file.php?folder="+folderId+"&type="+uploadType+"&feid="+formElementId+"&obfuscate="+obfuscateHash+"&sessidpass="+sessionPass);
  urlRequest.method = URLRequestMethod.POST;
  urlRequest.data = new URLVariables("name=Bryn+Jones");
  var encoder:Base64Encoder = new Base64Encoder();
  encoder.encode("testuser:testpass");
  var credsHeader:URLRequestHeader = new URLRequestHeader("Authorization", "Basic " + encoder.toString());
  urlRequest.requestHeaders.push(credsHeader);

  file = FileReference(fileCollection.getItemAt(0));
  file.addEventListener(Event.COMPLETE, completeHandler);
  file.addEventListener(HTTPStatusEvent.HTTP_STATUS, onHTTPStatus);
  file.addEventListener(ProgressEvent.PROGRESS, onUploadProgress);
  file.upload(urlRequest);
  }
} 
```

如上所述，无论是否修改我的功能，我似乎都遇到了相同的结果。

我还可以问一下 crossdomain.xml 应该放在哪里 - 因为我目前没有，并且不确定将它放在哪里。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2009-02-03T23:19:20.613

URLRequest 的语法有点不同，但思路是一样的：

```
private function doWork():void
{
    var req:URLRequest = new URLRequest("http://yoursite.com/yourservice.ext");
    req.method = URLRequestMethod.POST;
    req.data = new URLVariables("name=John+Doe");

    var encoder:Base64Encoder = new Base64Encoder();        
    encoder.encode("yourusername:yourpassword");

    var credsHeader:URLRequestHeader = new URLRequestHeader("Authorization", "Basic " + encoder.toString());
    req.requestHeaders.push(credsHeader);

    var loader:URLLoader = new URLLoader();
    loader.load(req);
} 
```

要记住几件事：

*   最好的我可以说，出于某种原因，这仅适用于请求方法为 POST 的情况；标头没有使用 GET 请求设置。

*   有趣的是，除非至少一个 URLVariables 名称-值对与请求一起打包，否则它也会失败，如上所述。这就是为什么您看到的许多示例（包括我的示例）都附加了“name=John+Doe”——它只是 URLRequest 在设置任何自定义 HTTP 标头时似乎需要的一些数据的占位符。没有它，即使是经过适当身份验证的 POST 请求也会失败。

*   显然，Flash 播放器版本**9.0.115.0**完全阻止了所有 Authorization 标头（有关[此处](http://kb.adobe.com/selfservice/viewContent.do?externalId=kb403184)的更多信息），因此您可能也需要记住这一点。

*   您几乎肯定必须修改您的 crossdomain.xml 文件以适应您将要发送的标头。就我而言，我正在使用它，这是一个相当广泛的策略文件，因为它可以从任何域接受，所以在你的情况下，你可能想要更多地限制一些事情，这取决于你的安全意识如何.

跨域.xml：

```
<?xml version="1.0"?>
<cross-domain-policy>
    <allow-access-from domain="*" />
    <allow-http-request-headers-from domain="*" headers="Authorization" />
</cross-domain-policy> 
```

……这似乎行得通；[Adobe 可在此处](http://kb.adobe.com/selfservice/viewContent.do?externalId=kb403185)获得有关此信息的更多信息）。

上面的代码是用 Flash player 10（带有调试和发布 SWF）测试的，所以它应该适合你，但我想更新我的原始帖子以包含所有这些额外的信息，以防你遇到任何问题，因为机会似乎（遗憾地）你可能会。

希望能帮助到你！祝你好运。我会留意评论。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-07-31T06:38:04.737

FileReference.upload() 和 FileReference.download() 方法不支持 URLRequest.requestHeaders 参数。

[http://livedocs.adobe.com/flex/2/langref/flash/net/URLRequest.html](http://livedocs.adobe.com/flex/2/langref/flash/net/URLRequest.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-17T11:51:33.120

如果要上传文件，只需通过 UploadPostHelper 类使用 URLRequest 发送正确的标题和文件内容。这 100% 有效，我正在使用此类上传生成的图像和 CSV 文件，但您可以上传任何类型的文件。

此类仅准备带有标头和内容的请求，就好像您要从 html 表单上传文件一样。

[http://code.google.com/p/as3asclublib/source/browse/trunk/net/UploadPostHelper.as?r=118](http://code.google.com/p/as3asclublib/source/browse/trunk/net/UploadPostHelper.as?r=118)

```
_urlRequest = new URLRequest(url);
        _urlRequest.data = "LoG";
        _urlRequest.method = URLRequestMethod.POST; 

        _urlRequest.requestHeaders.push(new URLRequestHeader("X-HTTP-Code-Override", "true"));
        _urlRequest.requestHeaders.push(new URLRequestHeader("pragma", "no-cache"));

        initCredentials();
_loader.dataFormat = URLLoaderDataFormat.BINARY;
            //this creates a security problem, putting the content type in the headers bypasses this problem
            //_urlRequest.contentType = 'multipart/form-data; boundary=' + UploadPostHelper.getBoundary();
            _urlRequest.requestHeaders.push( new URLRequestHeader( 'Cache-Control', 'no-cache' ) );
            _urlRequest.requestHeaders.push(new URLRequestHeader('Content-Type', 'multipart/form-data; boundary=' + UploadPostHelper.getBoundary()));
            _urlRequest.data = UploadPostHelper.getPostData("file.csv", param[1]);

        _loader.load(_urlRequest); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-22T11:18:05.440

我不确定这一点，但您是否尝试将 username:password@ 添加到您的网址的开头？

" [http://用户名:password@yoursite.com/yourservice.ext](http://username:password@yoursite.com/yourservice.ext) "

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-07-28T14:19:35.420

```
var service : HTTPService  = new HTTPService ();
var encoder:Base64Encoder = new Base64Encoder();
encoder.insertNewLines = false;
encoder.encode("user:password");

service.headers = {Authorization:"Basic " + encoder.toString()};
service.method = HTTPRequestMessage.POST_METHOD;
service.request = new URLVariables("name=John+Doe");
service.addEventListener(FaultEvent.FAULT,error_handler );
service.addEventListener(ResultEvent.RESULT,result_handler);
service.url = 'http://blah.blah.xml?'+UIDUtil.createUID();
service.send(); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-26T18:52:12.277

看似相似的问题在[这里](http://thanksmister.com/?p=59)得到了解决。我敦促您也检查第一篇文章中链接到的[Flexcoders帖子。](http://www.mail-archive.com/flexcoders@yahoogroups.com/msg58372.html)

**问题**在于 FireFox 使用单独的浏览器窗口实例来发送文件上传请求。**解决方案**是将会话 ID 手动附加到请求 url。会话 ID 不是作为常规 GET 变量附加的，而是带有分号（我不知道这种语法的原因）。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-05-27T17:06:14.037

Flash 在您可以通过 http 请求传递什么样的标头方面非常有限（并且它在浏览器和操作系统之间发生变化）。如果您让它在一个浏览器/操作系统上运行，请确保在其他浏览器/操作系统上进行测试。

最好的办法是不要弄乱 HTTP 标头。

我们有同样的问题（从 Flash 上传到 Picasa 网络相册）并通过我们服务器上的代理发布。我们将额外的标头作为 post 参数传递，我们的代理做正确的事情。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2010-03-10T15:30:22.613

" [http://用户名:password@yoursite.com/yourservice.ext](http://username:password@yoursite.com/yourservice.ext) "

这在 IE ( [http://www.theregister.co.uk/2004/01/30/ms_drop_authentication_technique/](http://www.theregister.co.uk/2004/01/30/ms_drop_authentication_technique/) ) 中不起作用，并且在 Chrome 中似乎也不起作用。

可能无法在 Flash 中使用

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2010-07-08T21:55:18.983

这是使用 ASP.Net 时的变通方法，部分基于[此处](http://swfupload.org/forum/generaldiscussion/9)的工作。

我构建了一个将 Flex 对象动态写入页面的组件，以便它们可以在 UpdatePanels 中使用。如果您想要他们的代码，请给我留言。为了解决需要通过 URLRequest 发送身份验证 cookie 的页面中的上述问题，我将值添加为 flashVars。

此代码仅适用于我的对象，但您明白了

```
Dictionary<string, string> flashVars = new Dictionary<string, string>();     
flashVars.Add("auth", Request.Cookies["LOOKINGGLASSFORMSAUTH"].Value);
flashVars.Add("sess", Request.Cookies["ASP.NET_SessionId"].Value);
myFlexObject.SetFlashVars(flashVars); 
```

然后在 Flex 对象中，检查参数

```
if (Application.application.parameters.sess != null)
    sendVars.sess= Application.application.parameters.sess;
if (Application.application.parameters.auth != null)
    sendVars.au= Application.application.parameters.auth;

request.data = sendVars;
request.url = url;
request.method = URLRequestMethod.POST; 
```

最后将 cookie 填入 global.asax BeginRequest

```
if (Request.RequestType=="POST" && Request.Path.EndsWith("upload.aspx"))
{
    try
    {
        string session_param_name = "sess";
        string session_cookie_name = "ASP.NET_SESSIONID";
        string session_value = Request.Form[session_param_name]; // ?? Request.QueryString[session_param_name];
        if (session_value != null) { UpdateCookie(session_cookie_name, session_value); }
    }
    catch (Exception) { }

    try
    {
        string auth_param_name = "au";
        string auth_cookie_name = FormsAuthentication.FormsCookieName;
        string auth_value = Request.Form[auth_param_name];// ?? Request.QueryString[auth_param_name];

        if (auth_value != null) { UpdateCookie(auth_cookie_name, auth_value); }
    }
    catch (Exception) { }   

} 
```

希望这可以帮助某人避免我刚刚花费了 6 个小时来解决这个问题。Adobe 已将该问题视为无法解决，因此这是我最后的手段。

# asp.net - ASP.NET Web 服务命名空间子域重要吗？

> ID：509223
> 
> 赞同：4
> 
> 时间：2009-02-03T22:33:38.817
> 
> 标签：asp.net, web-services, namespaces

意思是有区别吗

```
<WebService(Namespace:="http://theurl.com/")> 
```

和

```
<WebService(Namespace:="http://www.theurl.com/")> 
```

?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-02-03T22:49:20.940

不知道你是不是在问两件事之一，所以我会提到两者。

**1.**命名空间是干什么用的？

原因都源于[W3C标准](http://www.w3.org/TR/REC-xml-names/)。

非常简短的回答：如果您正在做一些简单的 ASP.NET Web 服务，所有都通过 .NET 进行连接，您可能永远不会知道有什么区别。事实上，我看到的很多 Web 服务仍在使用 tempuri.org ;-) 太可惜了。如果您正在执行互操作或发布许多 Web 服务，则适当的命名空间可以保证类似命名服务的唯一性。

**2.**子域重要吗？

是的，不同的子域，因此，虽然在语义上是等价的，但它们是不同的命名空间。命名空间*可能*看起来像一个 Url，但事实并非如此。您可以轻松地将“urn:org.tempuri”之类的东西用作有效的命名空间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-03T23:00:29.543

这表示 Web 服务的 XML 命名空间，与实际地址无关。

所以是的，提到的命名空间是不同的。正如 C# 中的 System.Data 和 System 命名空间是不同的命名空间一样。

创建服务时选择哪一个重要吗？不，随便挑一个...

使用服务时选择哪一项重要吗？是的，使用创作者选择的那个。（在 WSDL 中有描述）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-03T22:40:52.720

简短的回答：没有。

长答案：也许。

如果您要自己使用 SOAP 协议。XML 返回的名称空间可能需要在代码中为“www.*”（一种安全“功能”）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-02-03T22:44:59.683

如果您可以将两者都输入浏览器并且它们可以工作，那么就没有区别。这在很大程度上取决于网站在主机上的设置方式。非“www”URL 的选项只是一个 DNS 条目。

# clojure - Clojure 读取行函数问题

> ID：509250
> 
> 赞同：5
> 
> 时间：2009-02-03T22:39:37.497
> 
> 标签：clojure

我试图在我的 Clojure 程序中获取控制台输入，但是当它到达程序的那个部分时它给了我这个错误。

```
Exception in thread "main" java.lang.ClassCastException:
clojure.lang.LineNumberingPushbackReader cannot be cast to java.io.BufferedReader 
```

“读取”功能有效，但这不是我需要的。这是我正在使用的代码。

```
(defn prompt-read [prompt]
  (print (format "%s: " prompt))
  (flush )
  (read-line)) 
```

编辑：

这显然只是我正在使用的版本。它是当前 Programming Clojure 示例代码中包含的版本，我将测试当前的发布版本，看看是否有问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-02-03T22:44:40.747

嗯，它似乎对我有用。您使用的是哪个版本的 Clojure 以及如何调用提示阅读？这是我要回来的（这`goo`是我的回应）：

```
user=> (defn prompt-read [prompt]
(print (format "%s: " prompt))
(flush )
(read-line))
#'user/prompt-read
user=> (prompt-read "foo")
foo: goo
"goo" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-09T13:26:33.520

读取行问题是一个已知错误。它是固定的。更新您的 Clojure 版本。

# events - 事件处理程序 javascript

> ID：509263
> 
> 赞同：0
> 
> 时间：2009-02-03T22:41:22.640
> 
> 标签：events, handlers

我有一些处理程序来调整框的大小，我想根据选择的句柄移动框。在循环中实现这一点的最佳方法是什么

```
for (var j = 0; j < allhand.length; j++) {
    aaa[allhand[j]].style.visibility = 'inherit'; 

    aaa[allhand[j]].onmousedown = function(e) {

        document.onmousemove = function(e) {
            // if bottom handle it's been moved then just inc height

            // if right handle it's been moved then just inc width... ?????

            // etc...
            return false;
        };
        document.onmouseup = function(e) {
            stop = false;
            return false;
        };
        return false;
    };
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-02-03T23:01:31.743

没有快速的答案，但在 Flex 中，我使用[Rogue Development 的对象句柄](http://www.rogue-development.com/objectHandles.html)很幸运。也许得到代码，看看？

# svn - SVN版本号上的字母后缀是什么意思？

> ID：509265
> 
> 赞同：9
> 
> 时间：2009-02-03T22:42:27.210
> 
> 标签：svn

我们有一个 svnversion 报告为 22625P。

“P”是什么意思？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2009-02-03T22:46:51.100

尝试`svnversion --help`

```
4123:4168     mixed revision working copy
4168M         modified working copy
4123S         switched working copy
4123P         partial working copy, from a sparse checkout
4123:4168MS   mixed revision, modified, switched working copy 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-05-13T13:13:46.030

也有可能您没有进行任何稀疏结帐，“P”表示“打孔”。工作副本经历了太多的 SVN 版本升级，或者任何清理无法修复的问题。可能最好检查一个新的工作副本。

PS：这种事情发生在那个时候的SVN版本上；我在 2010 年或以后看到的任何地方都没有发生这种情况，而且我经常使用很多 SVN 功能。

# ruby-on-rails - :finder_sql 的限制

> ID：509275
> 
> 赞同：2
> 
> 时间：2009-02-03T22:44:06.520
> 
> 标签：ruby-on-rails, ruby, activerecord, has-many, table-relationships

在 Rails 应用程序中，我在 has_many 声明中使用 :finder_sql 选项。rails 文档说，当我这样做时，“不添加 find_in_collection”。这是什么意思？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-02-04T00:31:04.760

这意味着当您与表之间存在 has_many 关系时，例如：

人 has_many :books, :finder_sql

你不会得到你通常会得到的 person.books.find* 方法。这种行为的原因是 activerecord 无法轻松地使用您将使用的 find* 方法组合 finder_sql，因此它不能真正为您提供该功能

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-02-04T08:15:09.627

这意味着它不支持在集合中查找实例的方法。文档称它为`find_in_collection`（其中“收藏”是您协会的名称）。一个例子在这里可能更有帮助：

```
class Author < ActiveRecord::Base
  has_many :posts

  has_many :special_posts, :class_name => "Post", 
           :finder_sql => "SELECT * FROM posts WHERE ..."
end

author.find_in_posts(30)          # it finds and returns post 30
author.find_in_special_posts(30)  # not supported because finder_sql is used here. 
```

# unit-testing - 自测代码与分离测试的优势是什么？

> ID：509283
> 
> 赞同：5
> 
> 时间：2009-02-03T22:45:32.663
> 
> 标签：unit-testing, refactoring, tdd

就个人而言，我总是将单元测试放在一个单独的项目中，因为这似乎是 MSTest 的设置方式。但我正在阅读Martin Fowler*的 Refactoring: Improvement the Design of Existing Code*，他似乎主张不仅将它们放在同一个项目中，而且还要将它们与他们正在测试的方法放在同一个类中。

老实说，除了哲学差异（测试文档还是杂乱无章？）之外，我真的很难想到这与将测试放在与代码本身不同的区域不同的方式。

是否有任何明确的理由来选择一个而不是另一个？或者这主要是哲学上的差异？

**更新**：我不一定以一种或另一种方式相信，但至少我知道这些论点是什么。我希望我可以选择每个人的答案，但我只能选择一个。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-02-03T23:04:53.153

或许拥有自测代码有一些优雅之处，但我倾向于和你一样的理念——代码分离胜过一些抽象美的概念。当你设计一个类时，你可以从根本上把它分成三个部分：

*   类做什么（例如，类的定义）
*   它是如何做到的（实现）
*   你如何使用它（文档和/或测试用例）

我将测试用例视为文档的目的，以及测试套件中安全网的一部分。当一个新程序员正在查看您的代码时，可能在您停止编写代码很久之后，文档很少是传达如何使用该类的最有效方式。它可以回答有关代码在特定情况下如何表现的问题，提供类及其方法的一般概述等，但测试用例提供了如何在*实际代码*中使用该类的具体示例。

因此，出于这个原因，我倾向于说他们应该留在课堂之外，因为这会加强这种程度的分离。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-02-03T22:56:40.083

将它们放在被测试的同一个类中可能会破坏流行的单元测试框架，因为 NUnit 不会测试没有默认无参数构造函数的类型。

将测试放在不同的文件但在同一个项目中更好，但仍然会导致您的主项目引用 NUnit.Framework.dll 等测试框架以及 Rhino.Mocks.dll 等任何模拟框架。

在被测类中进行测试也会增加分布式项目的大小。

将测试分离到一个单独的项目中，您不会遇到任何这些问题。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-02-03T23:08:24.130

将测试保存在单独的区域（子目录、项目等）是保留*仅*部署生产代码的选项的好方法，这通常是您想要做的。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-02-03T23:10:15.407

在您正在测试的同一类中进行测试有很多便利。很多时候（在开始 TDD 之前），我使用向类添加 Main 方法只是为了测试我编写的代码的功能。而且我没有删除 main 方法，因为放置测试代码非常有用。这很方便，就像将文档绑定到您的代码很方便一样。我不必在其他地方寻找或搜索测试代码。

话虽如此，TDD 的意义不仅仅在于测试/质量保证。更多的是让您思考您的设计/界面。从这个角度来看，将“测试”（也称为“设计”）代码放在单独的文件中是有意义的。您的“测试”代码是您班级的客户/用户。

如果在单独的文件中编写测试的目的是技术性的，即“因为单元测试框架是这样设计的”或者“否则你需要在你的主项目中包含一个引用”，或者“它可以提高性能” ，这听起来不太令人信服。如果是这样的话，事情就会大不相同。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-02-04T00:00:03.060

我看不出在同一个类中拥有测试代码和生产代码有什么好处。相反，我看到了一些缺点：

*   如果没有测试代码，就不可能部署和分发生产代码。因此，您可能需要发送 200KB 或更大的文件，而不是 100KB 的文件。（使用 TDD 时，测试代码的行数通常等于或大于生产代码的行数。）

*   测试的结构与生产代码的耦合过于紧密。测试和生产类之间不应存在 1:1 的关系。相反，测试和行为之间应该存在 1:1 的关系。

引自[http://blog.daveastels.com.s3.amazonaws.com/files/BDD_Intro.pdf](http://blog.daveastels.com.s3.amazonaws.com/files/BDD_Intro.pdf)

> “当你意识到这一切都是关于指定行为而不是编写测试时，你的观点会发生变化。突然间，为每个生产类创建一个 Test 类的想法是非常有限的。用它的方法测试你的每个方法的想法自己的测试方法（在 1-1 关系中）将是可笑的。”

我主要使用 Java 进行编程，并使用 Maven 来构建我的项目。在那里，我在与它们操作的生产类相同的模块和包中进行了测试，但在不同的目录中（/src/main/java 和 /src/test/java）。当 Maven 构建项目时，它会执行所有测试，但只有生产代码包含在二进制可分发包中。

* * *

**附录：10年后（2019）**

现在我主要在 Clojure 中工作，我发现有时在同一个文件中为函数旁边的函数编写测试很方便。这仅适用于小辅助方法的纯单元测试。（对于静态类型，其中一些测试可能是不必要的。）Clojure 可以从编译的生产构建中排除测试，从而避免二进制膨胀。由于`clojure.test`是标准库的一部分，因此在生产文件中编写简单的测试不需要额外的依赖项。

业务逻辑测试是所有测试的大部分，我仍然更喜欢将其保存在单独的文件中。这样就更容易专注于阅读生产代码或测试代码——系统是如何实现的与它应该做什么——而无需跳过大量交错的代码。由于用于设置数据库和其他依赖项的测试设置混乱，集成测试*始终位于单独的文件中。*

还有镜像方面：特别是在开始新东西时，我首先在测试文件中实现该功能。然后当结构开始稳定时，我提取其中的一部分成为生产代码。这种方法被称为[TDD，就好像你是认真的一样](https://cumulative-hypotheses.org/2011/08/30/tdd-as-if-you-meant-it/)。在代码 kata 中，我可能永远不会在删除项目之前提取生产代码，但在工作项目中，它最终会被拆分为生产和测试代码。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-02-03T22:54:54.517

我认为这主要是哲学上的差异。

将它们放在单独的项目中可能会有边际性能优势（因为您的测试没有部署到生产中），但它们可能并不*那么*重要。

还要记住，*重构*是很久以前写的（在 IT 术语中），所以从那时起，首选实践很可能会继续发展。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-03-30T02:51:40.293

以下是将测试代码直接放在它正在测试的类中的一些可能的实际好处。

以下所有要点基本上都是不同的效果，它们源于如何将测试与代码保持一致，这使得忽略测试变得更加困难。这提醒我们，代码和测试是高度相关的，同样重要。将它们结合起来有助于我们将两个概念合二为一，实现实现更好概念“压缩”的类型（类）（想想类有时如何被称为“抽象”，但“压缩”是我们并不总是想要的核心原因在我们的抽象中解耦）。

这使得我们编写代码的程序员不太可能暂时忘记考虑测试。这可能看起来像是首先更改代码而不考虑任何测试，然后在发布/推送/合并之前稍后运行测试，并看到它们仍然通过，而不考虑是否需要对他们刚刚的代码进行更多测试考虑到变化的性质，写道。

它使程序员更难懒惰。如果测试“一直在那边”，那么程序员必须找到测试代码，阅读它，找到他们刚刚查看/考虑更改的代码的相关部分。但是，如果您有一个更像是测试方法的方法，然后是它正在测试的方法，那么您将不得不非常懒惰地不想“感觉”找到测试。

如果程序员已经关心实际代码中的代码质量，那么这种方法可以帮助他们同样关心测试中的代码质量，因为两者之间的区别较小。这真的很重要，因为测试中的代码质量可以说比其余代码的代码质量更重要，因为有必要对测试代码进行非常好的照顾，以防止测试最终阻碍团队的发展而不是他们帮助他们，这实际上是使用测试最困难的部分。

如果你在做 TDD，甚至写了一些代码然后立即写一个测试，你会经常发现自己在测试和代码之间来回走动，试图比较两者。但如果他们在同一个班级，这使得比较两者的行为更加自然，并且对认知的要求更低。这也有助于测试不会阻碍您（在情感上和精力上）而不是对您的帮助，这可能会导致对测试感到沮丧并将它们全部删除。

它导致测试和代码之间更自然的代码重用。这有双重目的。它允许您将运行时断言和测试的想法合并到一个单一的东西中，至少在某些时候是这样。您这样做的方法是使用除了执行断言之外没有其他用途的方法，如果它们失败，则会抛出异常。然后，您可以自由地从代码中重用这些断言方法来验证合同，并在测试中验证代码。无论如何，验证合同并在违反合同时抛出异常被认为是好的做法，这使其更加自然。然后一些测试甚至可以变成这样简单的事情，它们只是以正确的方式执行正确的方法，然后这些方法在某种程度上测试自己，因为它们已经调用了这些断言方法。然后，您可以决定在发布代码时保留所有这些断言，以便更好地监控和报告生产，或者至少关闭其中一些断言以获得更快的代码。当需要更高级别的报告时，它们甚至可以根据需要在生产中启用。重用还有助于降低所需的测试代码总量，从而帮助我们更多地保持测试的价值。

测试可以是一种很好的文档形式。通过将测试与代码一起保存，您将文档与它正在记录的代码一起保存，这通常是程序员真正理解代码的最佳方式。

如果您已经在测试文件和正在测试的代码之间建立了一对一的映射，那么重构会变得更容易。如果你重命名一个类，你不需要再重命名它的测试。

将测试放在代码中可以更自然地对测试和正在测试的代码进行一对一的映射。有人说这很糟糕，因为测试应该测试行为而不是类/方法，但是当这种反对意见有效时，它实际上是一种代码味道。代码的编写方式应该对它所用的语言来说是自然的，并且几乎让它看起来好像该语言是为你的代码设计的。然后，代码应该将该概念与利用语言结构相结合，以使代码成为该语言中可能的实际最终行为的最自然的表达/规范。如果测试“代码”意味着您没有测试“行为”，那么您已经遇到了代码质量问题。在面向类型的编程中（想想面向对象的编程，在大多数现代 OO 语言中，这实际上是面向类的编程，实际上是面向类型的编程，因为类是您定义自己的类型的一种方式），这非常有意义，因为您当然希望每种类型都在技术水平（对该类型的值执行操作的准确性）。这是因为您创建的每个新类型本质上都会成为您编写代码所用语言的核心部分，并且您不希望您的编程语言本身出现错误，对吗？这也不排除直接编程最终用户功能，因为这些可以实现为自己的类型（想想每个网页的类型，或每个 API 命令的类型。所以某些类型将更接近最终用户，并且其他人会低得多，

# jquery - 使用 jQuery 选项卡掌握详细信息

> ID：509287
> 
> 赞同：1
> 
> 时间：2009-02-03T22:46:40.400
> 
> 标签：jquery, asp.net, gridview, master-detail

我正在尝试使用 jQuery 选项卡实现主详细信息解决方案。两个选项卡，第一个选项卡包含罗斯文客户，选择客户命令应显示 tab2 与客户的订单。

到目前为止，我得出的结论是，如果不使用某种 Ajax，就无法做到这一点。**我对么？**

我从 Matt，[Matt Berseth](http://mattberseth.com/blog/2008/06/masterdetail_with_the_gridview_1.html)那里得到了一些建议。

**有没有人有任何想法或样本可以分享如何实现这一点？**

我认为这样做的一种方法是在 GridView1 的 LinkBut​​ton 的 Client Click 事件中传递 CustomerId，然后关注 Tab2 并以某种方式通过 javascript 加载详细信息网格。我不太擅长 Javascript，所以我被困在这里。

建议和示例代码将非常有帮助。

谢谢

```
<div id="tabs">
<ul>
    <li><a href="#tabs-1">Customers</a></li>
    <li><a href="#tabs-2">Orders</a></li>
</ul>
<div id="tabs-1">

<asp:GridView ID="GridView1" runat="server" AllowPaging="True" 
AutoGenerateColumns="False" DataKeyNames="CustomerID" 
DataSourceID="SqlDataSource1" PageSize="20">
<Columns>
    <asp:TemplateField>
        <ItemTemplate>
            <asp:LinkButton ID="lbtnSelect" runat="server" 
Text="Select Link" />
        </ItemTemplate>
    </asp:TemplateField>
    <asp:CommandField ShowSelectButton="True" />
    <asp:BoundField DataField="CustomerID" HeaderText="CustomerID" ReadOnly="True" 
        SortExpression="CustomerID" />
    <asp:BoundField DataField="CompanyName" HeaderText="CompanyName" 
        SortExpression="CompanyName" />
    <asp:BoundField DataField="Region" HeaderText="Region" 
        SortExpression="Region" />
    <asp:BoundField DataField="PostalCode" HeaderText="PostalCode" 
        SortExpression="PostalCode" />
</Columns>
</asp:GridView>

</div>
<div id="tabs-2">
<asp:GridView ID="GridView2" runat="server" AutoGenerateColumns="False" 
        DataKeyNames="OrderID" DataSourceID="SqlDataSource2">
        <Columns>
            <asp:BoundField DataField="OrderID" HeaderText="OrderID" InsertVisible="False" 
                ReadOnly="True" SortExpression="OrderID" />
            <asp:BoundField DataField="CustomerID" HeaderText="CustomerID" 
                SortExpression="CustomerID" />
            <asp:BoundField DataField="OrderDate" HeaderText="OrderDate" 
                SortExpression="OrderDate" />
        </Columns>
    </asp:GridView>
</div>
</div>
<asp:SqlDataSource ID="SqlDataSource1" runat="server" 
ConnectionString="<%$ ConnectionStrings:NorthwindConnectionString %>" 
SelectCommand="SELECT [CustomerID], [CompanyName], [Region], [PostalCode] 
FROM [Customers]">
</asp:SqlDataSource>

<asp:SqlDataSource ID="SqlDataSource2" runat="server" 
ConnectionString="<%$ ConnectionStrings:NorthwindConnectionString %>" 
SelectCommand="SELECT [OrderID], [CustomerID], [OrderDate] 
FROM [Orders] WHERE ([CustomerID] = @CustomerID)">
<SelectParameters>
    <asp:ControlParameter ControlID="GridView1" Name="CustomerID" 
        PropertyName="SelectedValue" Type="String" />
</SelectParameters>
</asp:SqlDataSource> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-02-03T23:13:52.590

它绝对可以使用 jQuery 和 AJAX 并且可能非常好，但这需要一些重要的工作，因为您不能真正使用 GridView（除非您使用 UpdatePanel）。您可以做的是在回发后设置选定的选项卡。选项卡控件上有一个选项

```
$('#tabs').tabs({selected:1}); 
```

或者

```
$('#tabs').tabs();
$('#tabs').tabs('select', 1); 
```

如果您对执行 jquery AJAX 路由感兴趣，请发表评论，我可以提供示例。您可以使用 WCF 服务访问您的订单详细信息吗？

## 示例代码

我刚刚完成了一些基于此的示例代码，我将它上传到我的 MS Live SkyDrive。您将需要 WCF REST Starter Kit。 [jQuery-AjaxTabsView-Sample.zip](http://cid-473151cb8afe66ba.skydrive.live.com/self.aspx/.Public/jQuery-AjaxTabView-Sample.zip)

## 博客文章

我还写了描述该示例的博客文章。谢谢你的主意。 [http://bendewey.wordpress.com/2009/02/04/jquery-tab-view-using-ajax-and-wcf-rest-service/](http://bendewey.wordpress.com/2009/02/04/jquery-tab-view-using-ajax-and-wcf-rest-service/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-03T23:05:27.240

您将需要 AJAX，因为 JQuery 选项卡不会回发到服务器。如果您想要回发的选项卡式行为，[手动实现](http://www.codeproject.com/KB/custom-controls/TabControl.aspx)*它*相当容易，或者您可以为此下载各种各样的预构建控件。

如果有特殊原因要使用 JQuery 选项卡，[这里有一个](http://kuujinbo.info/ajax/jq_tabs.aspx)与 AJAX 片段一起使用的示例。您可能希望将单击事件从主列表中的网格连接起来，以将 ajax 内容加载到第二个选项卡，以及作为 ajax 回调的一部分自动切换到选项卡。

# c# - 如何判断我的进程是否以管理员身份运行？

> ID：509292
> 
> 赞同：32
> 
> 时间：2009-02-03T22:47:24.920
> 
> 标签：c#, .net, process, privileges

我想在进程以管理员身份运行时显示一些额外的 UI 元素，而不是在以管理员身份运行时显示一些额外的 UI 元素，类似于 Visual Studio 2008 在以管理员身份运行时在其标题栏中显示“管理员”的方式。我怎么知道？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2009-02-03T23:12:57.693

从技术上讲，如果要查看成员是否为本地管理员*帐户*，则可以通过[类](http://msdn.microsoft.com/en-us/library/e599ywa6.aspx)上的[属性](http://msdn.microsoft.com/en-us/library/system.security.principal.windowsidentity.user.aspx)获取当前用户的[安全标识符（SID）](http://en.wikipedia.org/wiki/Security_Identifier)，如下所示（静态[方法](http://msdn.microsoft.com/en-us/library/sfs49sw0.aspx)获取当前 Windows 用户）：[`User`](http://msdn.microsoft.com/en-us/library/system.security.principal.windowsidentity.user.aspx)[`WindowsIdentity`](http://msdn.microsoft.com/en-us/library/e599ywa6.aspx)[`GetCurrent`](http://msdn.microsoft.com/en-us/library/sfs49sw0.aspx)

```
WindowsIdentity windowsIdentity = WindowsIdentity.GetCurrent();

string sid = windowsIdentity.User.ToString(); 
```

该`User`属性返回用户的 SID，其中[有许多预定义的值，用于各种组和用户](http://support.microsoft.com/kb/243330)。

然后您将检查[SID 是否具有以下模式，表明它是本地管理员帐户（这是众所周知的 SID）](http://blogs.technet.com/b/heyscriptingguy/archive/2005/07/22/how-can-i-determine-if-the-local-administrator-account-has-been-renamed-on-a-computer.aspx)：

> **S-1-5-** {其他 SID 零件} **-500**

或者，如果您不想解析字符串，则可以使用[`SecurityIdentifier`](http://msdn.microsoft.com/en-us/library/system.security.principal.securityidentifier.aspx)该类：

```
// Get the built-in administrator account.
var sid = new SecurityIdentifier(WellKnownSidType.BuiltinAdministratorsSid, 
    null);

// Compare to the current user.
bool isBuiltInAdmin = (windowsIdentity.User == sid); 
```

但是，我怀疑您*真正*想知道的是当前用户是否是本地计算机管理员*组的成员。*[`WellKnownSidType`](http://msdn.microsoft.com/en-us/library/system.security.principal.wellknownsidtype.aspx)您可以使用of获取此 SID `BuiltinAdministratorsSid`：

```
// Get the SID of the admin group on the local machine.
var localAdminGroupSid = new SecurityIdentifier(
    WellKnownSidType.BuiltinAdministratorsSid, null); 
```

然后您可以检查用户的[`Groups`属性](http://msdn.microsoft.com/en-us/library/system.security.principal.windowsidentity.groups.aspx)以`WindowsIdentity`查看该用户是否是本地管理员组的成员，如下所示：

```
bool isLocalAdmin = windowsIdentity.Groups.
    Select(g => (SecurityIdentifier) g.Translate(typeof(SecurityIdentifier))).
    Any(s => s == localAdminGroupSid); 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-05-18T18:07:21.677

我认为这是一个很好的简单机制。

```
using System.Security.Principal;

WindowsIdentity identity = WindowsIdentity.GetCurrent();
WindowsPrincipal principal = new WindowsPrincipal(identity);
bool isAdmin = principal.IsInRole(WindowsBuiltInRole.Administrator); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-11-12T23:50:36.297

这是一个单一的班轮来做到这一点。

```
using System.Security.Principal;

static bool IsElevated => new WindowsPrincipal(WindowsIdentity.GetCurrent()).IsInRole(WindowsBuiltInRole.Administrator); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-14T16:37:57.103

我觉得根据上面 casperOne 的回答，我在尝试使用 WellKnownSidType.BuiltinAdministratorsSid 时遇到的困难很重要。根据WellKnownSiDType [MSDN](http://msdn.microsoft.com/en-us/library/system.security.principal.wellknownsidtype%28v=vs.110%29.aspx)，BuiltinAdministratorsSid “表示与管理员帐户匹配的 SID”。所以我希望 casperOne 的代码可以工作，并且猜测它可能在某些环境中可以工作。不幸的是，它在我的带有 .NET 2.0（遗留代码）的 Windows 2003 上没有。它实际上返回了 S-1-5-32-544，根据[这篇文章](http://support.microsoft.com/kb/243330)，它是管理员*组*的 sid 。因此，比较对我来说失败了。我将不得不对以“S-1-5-21”开头的字符串进行自己的比较（即 kb 243330 表示“21”

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2020-05-01T17:27:31.033

我使用简单的 try catch 语句在**“C:\Windows\”**文件夹中创建一个随机文件。如果出错，则应用程序正在以正常权限运行，否则以管理员权限运行。

```
 try
        {
            File.Create(string.Format(@"C:\Windows\{0}.txt", new Guid()), 0, FileOptions.DeleteOnClose);
            // Do as admin
        }
        catch
        {
            // Do as default
        } 
```

# regex - 如何将变量与我的 Perl 正则表达式的其余部分分开？

> ID：509304
> 
> 赞同：1
> 
> 时间：2009-02-03T22:50:17.210
> 
> 标签：regex, perl

我有一个正则表达式，其中变量`$m_strFirstName`位于不属于变量名的其他标识符字符旁边：

```
if($strWholeName =~ m/$m_strFirstName_(+)/) 
.... 
```

我正在尝试提取类似的内容：

*   strWholeName 是 'bob_jones' 或 'bob_smith'
*   m_strFirstName 是“鲍勃”
*   我想要字符串的“smith”或“jones”部分。
*   如果 strWholeName 是“frank_jones”我想忽略它，所以 if 语句将是错误的

明显地，

```
m/$m_strFirstName_(+)/ 
```

不会工作，因为正则表达式解释器不会按照我的意图处理 $m_strname 部分，所以有什么想法吗？

**编辑：我原来的问题不清楚，更新了。**

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-02-03T22:58:03.870

在变量名周围加上大括号：

```
if($strname =~ m/${m_strName}_(.+)/) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-02-04T15:38:17.080

乔希有正确的答案，但如果你打开严格和警告，你可以自己找到它。这是（基本上）你的脚本原来的样子：

```
my($strWholeName) = "Bob_Jones";
my($m_strFirstName) = "Bob";

if($strWholeName =~ m/$m_strFirstName_(.+)/) {
    print "Last name is <$1>\n";
} 
```

结果如下：

```
C:\temp>perl test.pl
Last name is <Bob_Jones> 
```

如果添加以下两行：

```
use strict;
use warnings; 
```

你会得到以下输出：

```
C:\temp>perl test.pl
Global symbol "$m_strFirstName_" requires explicit package name at test.pl line
7.
Execution of test.pl aborted due to compilation errors. 
```

根据乔希的回答添加大括号，您最终得到：

```
C:\temp>perl test.pl
Last name is <Jones> 
```

总是，总是，总是`use strict`和`use warnings`！

请参阅brian 的从*Mastering Perl*[中解决任何 Perl 问题的指南，](http://www252.pair.com/comdog/mastering_perl/Chapters/A2.brians_guide.html)了解更多漂亮的技巧。

 ** * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-02-05T12:37:13.200

```
if ($strWholeName =~ m/^\Q$m_strFirstName\E_(.+)/) 
```

与 Josh Kelley 的回答不同：

1.  您必须将正则表达式**锚定**到字符串的开头，否则例如`$strWholeName`“jeanne_smith”的a 将错误地匹配`$m_strFirstName`“anne”的a。
2.  您应该`$m_strFirstName`用`\Q`并`\E`引用**任何奇怪的字符**（除非您绝对确定它们不会出现 - 但为什么不这样做，因为它既便宜又保证安全）。Hynek Vychodil 在对 Josh 的回答的评论中提到了这一点。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-02-03T23:00:08.327

```
$foo = "yodeling yoda"
$bar = "ing yo"

if ($foo =~ /\Q$bar\E/)
{
  print "true"
} 
```

# c# - 是否有 3 个链接值（如 Hashtable）的预定义类？

> ID：509305
> 
> 赞同：2
> 
> 时间：2009-02-03T22:50:20.517
> 
> 标签：c#, .net, vb.net, .net-2.0, c#-2.0

是否有一个内置对象以与哈希表类似的方式处理 3 个链接值？即键、值1、值2？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-02-03T22:59:58.657

我也会说通用字典。

如果您不想做任何广泛的事情，只需从 Value1、Value2 中创建一个结构或某种元组，然后将它们作为字典键的值。就像是：

```
Dictionary<Key, ThatTinyStructYouHadToCreate> 
```

坏主意：如果您不喜欢该选项，就“内置”而言，DataTable 中的 DataRow 将为您提供该功能。虽然这是一种非常简单的设置方法，但它也是一种非常低效（就执行成本而言）的方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-02-03T22:54:01.087

您可以使用通用字典轻松制作一个。之类的东西`Dictionary<Key, KeyValuePair<Key, Value>>`，甚至`Dictionary<Key, object[]>`

# windows - 无法在 Vista 上设置 Ifilter 调试。收集管理器上的“写入值内容时出错”：DebugFilters

> ID：509306
> 
> 赞同：1
> 
> 时间：2009-02-03T22:50:26.320
> 
> 标签：windows, security, winapi, ifilter

我无法按照[这些说明](http://blogs.msdn.com/ifilter/archive/2007/02/06/debugging-ifilters-with-wds-3-0-and-windows-vista.aspx)在 Vista 上设置 Ifilter 调试。

我用regedit设置

```
HKLM\Software\Microsoft\Windows Search\Gathering Manager:Debug Filters 
```

到`1`，但是当我单击确定时，我收到此错误：

> 无法编辑 DebugFilters。写入值的内容时出错。

我尝试更改注册表分支上的权限——这似乎是一个权限问题。管理员条目已选中“特殊权限”，“读取”和“完整”显示为灰色。但是，我可以检查它们，但是当我单击 OK 保存更改时，我收到此错误：

> 无法保存对 Gathering Manager 的权限。访问被拒绝。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-03T23:31:49.403

我找到了答案。您必须右键单击注册表分支“文件夹”，选择权限，然后选择高级。在所有者选项卡上，将自己设置为所有者。这使您可以更改权限。

详情： [http ://www.tjitjing.com/blog/2007/02/regedit-cannot-create-value-error.html](http://www.tjitjing.com/blog/2007/02/regedit-cannot-create-value-error.html)

# windows-mobile - 从移动 IE 部署 .NET CF CAB 并抑制重启消息

> ID：509309
> 
> 赞同：0
> 
> 时间：2009-02-03T22:50:45.040
> 
> 标签：windows-mobile, compact-framework

使用我创建的 setup exe，我检测是否安装了 .NET CF 2.0。如果没有，我使用 CreateProcess() 启动移动 IE 并提供下载 .NET CF 2.0 CAB 的 URL 作为命令行参数。因此，会下载 .NAT CAB 并自动启动 .NET CF 安装。最后，安装提示我重新启动设备。

有人能告诉我如何抑制这个提示吗？我在一些帖子中读到，您可以使用 wceload 的 /noui 开关来抑制这种情况。但就我而言，我不直接启动 wceload。如何指定此开关以禁止重新启动对话框？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-03T23:19:16.620

是否可以预先修改设备注册表（例如，如果这是受控设备的公司部署）？如果是这样，您可以修改注册表以使 wceload 的默认命令行包含 /noui 和 /noaskdest 标志。如果这是针对任何人的一般部署，那么不，如果没有其他形式的用户干预（为他们提供更改注册表的应用程序，提供允许您通过的 ActiveX 控件），您就无法颠覆 wceload 的工作方式参数等）。

一个可能的选择是创建某种形式的可执行文件，他们可以下载而不是包含作为嵌入式资源的 CAB。在这种情况下，您可以提取它，然后使用适当的开关调用 wceload。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-04T00:56:26.127

谢谢克塔克。这就是我开始使用的方法：创建一个包含多个出租车的超级出租车，这对我来说并没有像预期的那样工作。这是一个线程： [http ://social.msdn.microsoft.com/Forums/en-US/windowsmobiledev/thread/c2067894-e7eb-46a7-82c7-227dee5f8d88](http://social.msdn.microsoft.com/Forums/en-US/windowsmobiledev/thread/c2067894-e7eb-46a7-82c7-227dee5f8d88)

事先修改设备注册表不是我的选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-03-05T08:32:22.900

如果您可以选择使用商业应用程序，可以查看[Mobile Packager](http://www.mobilepackager.com)。它可以完成您正在寻找的大部分事情。我希望它有所帮助。

# graphics - 你如何像蜡笔一样画画？

> ID：509310
> 
> 赞同：40
> 
> 时间：2009-02-03T22:50:47.177
> 
> 标签：graphics

[Crayon Physics Deluxe](http://www.crayonphysics.com/)是最近推出的一款商业游戏。观看主链接上的视频，了解我在说什么。

它允许您绘制形状并让它们与适当的物理反应。目标是使用您构建的装置和形状将球移动到屏幕上的星星。

虽然该游戏基本上是流行的[Box2D 物理引擎](http://www.box2d.org/)的封装，但它确实有一个功能，我很好奇它是如何实现的。

它的画看起来*很像*蜡笔。您可以看到蜡笔的纹理，当它绘制时，它的厚度和暗度会发生变化，就像实际蜡笔画的样子一样。

[![替代文字](https://i.stack.imgur.com/EUpx0.jpg)](https://i.stack.imgur.com/EUpx0.jpg)
^(（来源：[kloonigames.com](http://www.kloonigames.com/crayon/screenshots/crayon_small_01.jpg)）)^(（来源：)^([kloonigames.com](http://www.kloonigames.com/crayon/screenshots/crayon_small_02.jpg))^）
[![替代文字](https://i.stack.imgur.com/H2gNu.jpg)](https://i.stack.imgur.com/H2gNu.jpg)

背景纹理可[在此处](http://flickr.com/photos/felipeskroski/325477721/)免费获得。

将使用哪种算法以看起来像蜡笔的方式渲染这些线条？它是一个简单的纹理，应用了随机的厚度和黑暗，还是有更多的事情发生？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2009-02-04T01:40:59.720

我记得（很久以前）读过一个关于算法的简短描述：

*   对于线的一般形式，您在随机点将线段分成两部分，并将该点稍微远离它的位置（变化取决于该点到末端的距离）。递归/随机重复。**这样，你的线条不是“完美”的（直线）**

*   对于给定的部分，您可以通过延伸一个末端或另一个（或两者）来稍微“过冲”。**这样，你就没有完美的关节**。如果我没记错的话，最好的办法是扩展原来的四肢，但如果你想明显地分割它们，你可以为子段这样做。

*   用图案/印章画线

*   还有（已经提到的）以不同的开始和结束不透明度进行绘制的可能性（以模仿在绘图结束时释放笔的趋势）

*   您可以在线条的开头和结尾使用不同大小的图章（也可以模仿在绘图结束时松开笔的趋势）。为了同样的效果，你也可以画线两次，其中一个末端的变化很小（在这种情况下要小心 alpha，因为线会被画两次）

*   最后，对于给定的线，您可以多次进行先前的修改（即画线两次，有不同的变化）：如果人类犯了一些错误，他们往往会重复一条线。

问候

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-02-03T22:57:18.880

如果你把图像放大，你会看到一个重复的印章图案..当它从 a 移动到 b 时，它可能会使用一小部分 - 甚至可能会旋转它们..

路线的摇摆并不是那么难做到的。分成一堆随机段，选择稍微远离直接路线的位置并绘制样条线。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2009-02-04T02:09:16.590

这是[一篇](http://www.cs.usask.ca/~mould/npr.html)使用大量数学计算的论文，使用摩擦模型来模拟蜡在纸上的沉积。但我认为你最好的选择是使用重复模式，正如另一位读者提到的那样，并根据压力改变不透明度。

对于不完美的线条绘制部分，我有一篇[博客文章](http://stevehanov.ca/blog/index.php?id=33)描述了如何使用贝塞尔曲线进行绘制。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-02-04T00:54:03.153

您可以根据速度建立黑暗。这只是测量光标在这一帧和最后一帧之间行进的距离（记住勾股定理），然后当您在屏幕上绘制该线段时，根据您测量的距离调整 alpha（不透明度）。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2010-05-20T00:17:55.207

有一篇名为[Mimicking Hand Drawn Pencil Lines](http://webhome.cs.uvic.ca/~blob/papers/hla.pdf)的论文涵盖了您所追求的一些内容。虽然它没有提供算法的非常详细的视图，但作者确实涵盖了他们使用的步骤的基础知识。

本文包括对它们如何生成线条的高级描述，以及它们如何为线条生成纹理，并且它们得到的结果与您想要的相似。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-11-13T21:41:26.327

这篇关于[渲染图表系列看起来像 XKCD 漫画](http://jakevdp.github.io/blog/2012/10/07/xkcd-style-plots-in-matplotlib/)的文章有一个可能相关的扰动线的算法。它不包括计算蜡笔画线的纹理，但它确实提供了一种使直线看起来像人类一样不完美的方法。

示例输出：

![在此处输入图像描述](https://i.stack.imgur.com/KHRk5.png)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-07-02T19:36:31.247

我相信最简单的方法就是在整个过程中使用随机黑暗（可能是一些渐变）的纹理，并随机设置大小。

# java - 无法从命令行运行 swing

> ID：509318
> 
> 赞同：7
> 
> 时间：2009-02-03T22:52:49.357
> 
> 标签：java, swing

我在 windows 中使用命令行编译然后执行我的 java 程序。我已经访问了[http://java.sun.com/docs/books/tutorial/uiswing/start/compile.html](http://java.sun.com/docs/books/tutorial/uiswing/start/compile.html)并尝试编译 HelloWorldSwing.java 类。它有效，但是当我尝试“java HelloWorldSwing”时，它给了我一堆错误，并在线程“main”java.lang.NoClassDefFoundError：HelloWorldSwing（错误名称：开始/HelloWorldSwing）

我尝试使用 java start/HelloWorldSwing 运行，它显示 noClassDefFoundError。javac我也没有错误。这是教程中的代码：

```
import javax.swing.*;        

public class HelloWorldSwing {
    /**
     * Create the GUI and show it.  For thread safety,
     * this method should be invoked from the
     * event-dispatching thread.
     */
    private static void createAndShowGUI() {
        //Create and set up the window.
        JFrame frame = new JFrame("HelloWorldSwing");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        //Add the ubiquitous "Hello World" label.
        JLabel label = new JLabel("Hello World");
        frame.getContentPane().add(label);

        //Display the window.
        frame.pack();
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        //Schedule a job for the event-dispatching thread:
        //creating and showing this application's GUI.
        javax.swing.SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                createAndShowGUI();
            }
        });
    }
} 
```

编辑：使用 javaw

弹出窗口

“发生Java异常”

另一个窗口

“错误：找不到主类。错误：发生jni错误，请检查您的安装并重试。”

运行任何java程序从来没有任何问题，我错过了什么吗？有没有办法知道它是什么？

我还在 .java 和 .class 所在的同一路径中运行该命令。

我编译程序的路径中没有文件夹开始。

EDIT2 我用 java 尝试了 start/HelloWorldSwing 和 HelloWorldSwing。

我也没有得到 javac 的任何错误。当我使用 javaw 和 java 给我 NoClassDefFoundException 时，我得到 2 个弹出窗口，其中包含我之前输入的消息，然后谈论 ClassLoaders 等等。

EDIT3 我通过删除“包开始”让它工作；线。我该怎么做才能使它与它一起工作？

javaw 现在也可以工作了，因为我删除了 package 行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-02-03T22:57:55.867

你从哪里调用`java`命令？根据您的描述，HelloWorldSwing.class 位于“start”文件夹中，但不在包中。这很可能是错误的来源。尝试：

```
cd start
java HelloWorldSwing 
```

编辑：教程中的代码确实有一个“ `package start;`”声明。你删除了吗？如果没有，将 HelloWorldSwing 放入文件夹“start”并运行

```
java start.HelloWorldSwing 
```

从当前文件夹。

另请参阅[包教程](http://java.sun.com/docs/books/tutorial/java/package/packages.html)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-02-03T22:56:14.840

试试这个：

> *java HelloWorldSwing*

而不是：

> *java开始/HelloWorldSwing*

java 编译器（ javac ）的参数是一个文件（这就是 start/HelloWorldSwing.java 可能工作的原因），但 Java 解释器（ java ）的参数是一个类名。

这就是为什么您不在命令行中附加 .class 的原因，并且由于没有名为*start/HelloWorldSwing*的类，您会收到该错误消息 ( NoClassDefFoundError )，内容为“找不到具有该名称的类定义)。

为了让事情变得更简单，请从 .java 文件所在的同一目录编译并运行您的第一个程序。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-02-03T23:20:22.483

是的。该页面有一个小错误：

该类使用包，但在运行说明中未使用包

你可以做两件事：

a）删除包名称（删除行`pacakge start;`）并按指示运行

或者

b) 保留`package start;`代码中的行并将`-d`选项附加到`javac`并使用完整的类名。

我希望这有帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-02-03T22:57:20.470

尝试代码工作正常，确保您与 Java 文件位于同一目录中并执行

```
javac HelloWorldSwing.java
java HelloWorldSwing 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-02-03T23:05:33.700

您链接到的代码与您在问题中包含的代码不同。它在顶部有这一行：

```
package start; 
```

在 Java 中，包结构必须由目录结构镜像。因此，如果您的类位于名为“start”的包中，则编译后的类文件必须位于名为“start”的目录中。因此，请确保 HelloWorldSwing.class 在“开始”目录中，并从父目录运行以下命令：

```
java start.HelloWorldSwing 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2011-11-26T19:00:17.763

只需添加一行：

`import java.awt.*;`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-10-24T13:17:05.073

您可以通过以下方式编译它：

```
 javac HelloWorldSwing.java 
```

您可以通过以下方式运行它：

```
 java -cp . HelloWorldSwing.java 
```

这个真的很管用。

# ruby-on-rails - Rails：模型依赖类位置的最佳实践？

> ID：509321
> 
> 赞同：4
> 
> 时间：2009-02-03T22:53:13.490
> 
> 标签：ruby-on-rails, ruby, model, dependencies, location

我有一个运行良好的 Rails 应用程序，但我自己做这个的事实意味着一些可怜的草皮最终会看到这个并说，“你到底在想什么？你为什么把这个放在这里？！ ？！”

那个可怜的、可悲的灵魂会在哪里期望看到一系列除了一个模型类之外没有任何东西使用的类？显然，我可以将它与 TheModel 类一起放入 the_model.rb 中，但这可能会超出计划的两个类......

我想到了lib，但它不需要混乱每个人的世界观......

谢谢你。

我的前任谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-02-03T22:59:12.807

将它们留在原处，`the_model.rb`直到您在多个地方需要它们为止。如果您进行了不必要的重构，那么您就没有做最简单的事情。[你不会需要它](http://c2.com/cgi/wiki?YouArentGonnaNeedIt)的。

那时，一般模式是为“关注”创建一个目录。有关更多信息，请参阅[Jamis Buck 的这篇博客文章](http://weblog.jamisbuck.org/2007/1/17/concerns-in-activerecord)或[Peter Marklund](http://marklunds.com/articles/one/394)的这篇博客文章。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-31T22:37:53.203

一般来说：在将类名转换为文件系统位置时遵循 Rails 命名约定。（即：保持班级`FooHelper::Bar`在`foo_helper/bar.rb`）

您可以为只使用一次的小型辅助类设置例外，并将它们与您的模型保存在同一个文件中，但这些应该是例外。（但反之亦然，不要创建一千个单行文件）

使用模块和类命名空间对您有利。如果您有一个仅由您的模型使用（并依赖于）您的模型的辅助类，请将它们放入模型类的命名空间中：

```
class TheModel::HelperClass
end 
```

文件系统中的位置是`app/models/the_model/helper_class.rb`

不依赖于你的模型的东西可能仍然可以命名空间

```
module Bar
  class Foo
  end
end 
```

`bar/foo.rb`当然住在

你可能不应该害怕把不是模型的东西放进去`lib`——这就是这个目录的*用途*

我想说的[担忧](http://weblog.jamisbuck.org/2007/1/17/concerns-in-activerecord)虽然有用，但并不是真正的正确方法，因为这是一种将*单个*类拆分为多个文件的方法，而您似乎没有这样做。

# asp.net-mvc - ASP .NET MVC RC 中的 Html.Image 在哪里？

> ID：509352
> 
> 赞同：19
> 
> 时间：2009-02-03T23:02:40.087
> 
> 标签：asp.net-mvc

我在新的 MVC RC 版本中找不到 Html.Image 方法。请有人给我示例如何在 ASP .NET MVC RC 站点中呈现简单的图像。

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2009-02-03T23:11:54.607

需要自己编写或使用 Url.Content() 方法设置源属性。或者你可以使用我的。:-)

```
public static class HtmlHelperExtensions
{

    public static string Image( this HtmlHelper helper, 
                                string url,
                                string altText,
                                object htmlAttributes )
    {
        TagBuilder builder = new TagBuilder( "img" );
        builder.Attributes.Add( "src", url );
        builder.Attributes.Add( "alt", altText );
        builder.MergeAttributes( new RouteValueDictionary( htmlAttributes ) );
        return builder.ToString( TagRenderMode.SelfClosing );
    }
} 
```

用法：

```
<%= Html.Image( Url.Content( "~/Content/images/img.png" ),
               "alt text",
               new { id = "myImage", border = "0" } )
 %> 
```

**编辑**：自从我写了这篇文章后，我就不再使用它了。我会在这里留下答案，尽管为了后代。虽然我认为它或来自 Future 程序集的方法是一个合理的选择，但我发现自己只是使用带有 UrlHelper 提供的 url 的图像标签。当我将我的助手重构为一个独立的库时，这个库并没有成功。我将重新评估它是否进入（非期货）MVC 库。

```
<img src="<%= Url.Content( "~/content/..." ) %>"
     alt="alt text"
     class="has-border" /> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-02-03T23:04:22.330

纯 HTML 有什么问题？

```
<img src="" alt="" /> 
```

您可以使用 ViewData 集合或模型来填充 src 属性：

```
<img src="<%= ViewData["ImageSource"] %>" alt="" />

<img src="<%= ViewData.Model.ImageSource %>" alt="" /> 
```

编辑：

关于在路径中使用相对url（即使用“~”字符），将上面的代码更改为使用ResolveUrl。例如：

```
<img src="<%= ResolveUrl(ViewData.Model.ImageSource) %>" alt="" /> 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2011-07-11T18:28:00.727

现在我们可以返回 MvcHtmlString。

```
public static MvcHtmlString Image(this HtmlHelper helper, string url, string altText, object htmlAttributes)
        {
            TagBuilder builder = new TagBuilder("img");
            builder.Attributes.Add("src", url);
            builder.Attributes.Add("alt", altText);
            builder.MergeAttributes(new RouteValueDictionary(htmlAttributes));
            return MvcHtmlString.Create(builder.ToString(TagRenderMode.Normal));
        } 
```

剃须刀的用法：

```
@Html.Image( Url.Content( "~/Content/images/img.png" ),
               "alt text",
               new { id = "myImage", border = "0" } ) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-03-10T04:14:03.430

它在 MVC 期货中 - 他们在每个版本中都会更新。

RC2 期货在这里：[http ://aspnet.codeplex.com/Release/ProjectReleases.aspx?ReleaseId=24142](http://aspnet.codeplex.com/Release/ProjectReleases.aspx?ReleaseId=24142)

不要对在“未来”中使用某些东西感到内疚。它不会去任何地方——即使它曾经有过，你也可以访问源代码。

您需要对 future 中的某些事情保持谨慎（以防它们消失），但您可以确定 Image helper 不会去任何地方。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-10-04T10:13:19.367

```
public static class HtmlImageHelper
{
    public static IHtmlString Image(this HtmlHelper helper,
                            string src,
                            string alt)
    {
        TagBuilder builder = new TagBuilder("img");
        builder.Attributes.Add("src", VirtualPathUtility.ToAbsolute(src));
        builder.Attributes.Add("alt", alt);
        return new HtmlString(builder.ToString(TagRenderMode.SelfClosing));
    }
} 
```

`@Html.Image(@Model.Image, @Model.alt)`

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2009-02-03T23:09:05.207

如果您需要引用`~/Content/images/`文件夹中的图像，只需使用纯 HTML 即可轻松完成：

```
<img src="/Content/image/mypic.png" alt="a picture available anywhere" /> 
```

诀窍是属性`/`开头的“” `src`，它将告诉浏览器开始浏览站点根目录的文件夹。由于默认情况下 ASP.NET MVC 不会解析服务器上确实存在的文件的路由 url，因此将照常检索该文件。无论您是否拥有`Index`url或`Home``http://www.example.com/``http://www.example.com/Home``http://www.example.com/Home/Index`

# php - 新网站项目 Silverlight / PHP

> ID：509358
> 
> 赞同：-1
> 
> 时间：2009-02-03T23:04:15.963
> 
> 标签：php, silverlight

最近，我得到了一个类似 facebook 的项目来为我的客户开发。

大多数时候，当我谈到 Web 开发时，我使用 php，因为解决方案 PHP、apache、MySql 都是免费可用的解决方案，我一直在考虑使用 Silverlight 来开发 Web 应用程序，我想听听一些优点和在 Silverlight 中开发 Web 应用程序的缺点。你用什么来托管应用程序？其成本等比较了 LAMP 解决方案。

谢谢，埃里克。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-02-03T23:13:49.813

在不知道您正在构建的应用程序类型的情况下，我需要问：您为什么认为您需要 Silverlight？Flash 和 Silverlight 等围墙式解决方案的主要问题是它们不能很好地与浏览器的用户模型配合使用。书签和后退按钮之类的东西往往会做错事。你不能轻易地离开并回到你正在做的事情。杰夫和乔尔在他们的播客中对此大肆宣扬。

现在几乎所有你能想象到的需要 Silverlight/Flash 的东西都可以通过某种 javascript/jQuery UI 工具包/插件来处理。

尤其是 Silverlight 的渗透率仍然很低，即使 MS 在更新期间让您接受它也是如此。

我确实认为这些技术适用于某些类型的应用程序。特别是如果它们在图形或交互方面非常密集。在这种情况下，我会比 Silverlight 更早地关注 Flex。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-04T00:26:38.310

我会说决定从谁需要访问这个应用程序开始。如果它必须在各种浏览器和平台上运行，那么坚持使用 HTML、CSS 和 JavaScript 作为技术会更安全。如果您对 PHP 作为服务器端技术感到满意，那就坚持下去。您会发现 .NET 应用程序的学习曲线非常陡峭。

也就是说，对于较大的项目，.NET 倾向于推动您实现的稍微更好的实践会有所帮助。一些 PHP 项目从小规模开始，然后需要扩展暴露原始架构中的缺陷。同样的事情显然会发生在 .NET 上，但恕我直言，因为使用它的程序员往往会接受更严格的培训。当然，所有规则都有例外。

Silverlight 的吸引力虽然很大 - 用熟悉的 .NET 语言而不是 JavaScript 开发客户端代码的能力很有吸引力。就个人而言，从美学的角度来看，整个 HTML、CSS 和 JavaScript（带有 Ajax）设置是令人反感的 :-)

抢。

PS。与 LAMP 相比，开发环境和后端的成本会更高。只有您可以决定投资是否值得。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-04T13:17:14.527

在 SilverLight 中创建网站与使用 Flash 一样糟糕：

*   用户无法打印

*   用户不能收藏

*   搜索引擎无法索引特定的“页面”

Silverlight 的存在是为了制作传统 HTML/JS 无法实现的应用程序，而类似 Facebook 的应用程序不是其中之一。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-02-04T13:20:53.787

如果 facebook 本身使用 PHP，为什么不使用 PHP 开发呢？

# .net - XmlSerialization 和 Attributes - 防止属性被序列化

> ID：509359
> 
> 赞同：0
> 
> 时间：2009-02-03T23:04:16.120
> 
> 标签：.net, xml-serialization

有没有办法让 .NET 中的 XmlSerialization 在序列化时忽略某些属性？

例如，我有一个名为 IsValid 的公共 bool 属性，它是我不想序列化的对象的唯一属性。我怎么能这样做？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-02-03T23:07:52.087

在属性上添加[XmlIgnoreAttribute](http://msdn.microsoft.com/en-us/library/system.xml.serialization.xmlignoreattribute.aspx)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-02-03T23:08:35.160

只需将 [XmlIgnore] 应用于您要忽略的属性。

请参阅[http://msdn.microsoft.com/en-us/library/system.xml.serialization.xmlattributes.xmlignore.aspx](http://msdn.microsoft.com/en-us/library/system.xml.serialization.xmlattributes.xmlignore.aspx)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-03T23:08:15.690

使用[XmlIgnoreAttribute](http://msdn.microsoft.com/en-us/library/system.xml.serialization.xmlattributes.xmlignore.aspx)。

# asp.net - ASP.NET：登录控件上的密码恢复链接需要用户登录

> ID：509360
> 
> 赞同：0
> 
> 时间：2009-02-03T23:04:20.987
> 
> 标签：asp.net

我正在尝试在我的网站上对此进行测试，但效果不佳，因为我必须登录才能访问此页面。

是否有我没有设置或设置错误的配置设置？

编辑：rm 的回答让我[从 Microsoft 访问了这个链接](http://msdn.microsoft.com/en-us/library/ms178335.aspx)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-02-03T23:16:11.820

添加到 Arjan 的答案中，页面权限的设置在您的 web.config 文件中。

你应该这样做：

```
<configuration>
   <location path="YourPage.aspx">
      <system.web>
         <authorization>
            <allow users="?"/>
         </authorization>
      </system.web>
   </location>
</configuration> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-03T23:07:16.333

我猜测包含 PasswordRecovery 控件的页面位于访问控制文件夹中。

因此，当您尝试访问该页面时，您将再次被重定向到登录页面......

# javascript - document.ready 在 body 标签内

> ID：509369
> 
> 赞同：5
> 
> 时间：2009-02-03T23:05:45.493
> 
> 标签：javascript, jquery

我有一个包含通用 HTML 标头的 Web 应用程序，因此我想将特定于页面的脚本放在每个页面中，而不是让它为所有内容加载。我尝试将`document.ready()`其放在页面末尾附近`<body>`，它似乎工作正常。把它放在那里而不是放在里面有什么潜在的危险`<head>`吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-02-03T23:09:58.387

雅虎建议将所有脚本放在文档末尾以提高性能 - [http://developer.yahoo.com/performance/rules.html](http://developer.yahoo.com/performance/rules.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-02-03T23:09:03.223

没有任何。只要确保一切都以正确的顺序加载。

# asp.net - 从客户端脚本更新 ControlState？

> ID：509381
> 
> 赞同：0
> 
> 时间：2009-02-03T23:08:42.087
> 
> 标签：asp.net, custom-server-controls

我有一个 IScriptControl 需要跨回发保留来自用户的数据。目前我正在将数据写入隐藏字段，但我想切换到 ControlState。

所以我的问题是：是否可以从客户端脚本更新 ControlState 数据？

谢谢，

阿列科

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-02-03T23:13:49.237

并不真地。控制状态是序列化为二进制字符串并使用哈希和验证的对象数组的层次结构。它也可以完全加密。我敢肯定有人会指出一个例子，有人设法通过 JavaScript 操纵数据块，但我建议尽快找出一种方法来翻转硬盘上的位以获取你想要的数据想要而不是通过您的操作系统 API。

[但是，您可以使用UpdatePanel](http://msdn.microsoft.com/en-us/library/system.web.ui.updatepanel.aspx)之类的东西在幕后进行异步 (AJAX) 回发，并且 UpdatePanel 将处理每次修复控件状态。

# php - 在 PHP 中以编程方式更改 PDF 质量

> ID：509386
> 
> 赞同：0
> 
> 时间：2009-02-03T23:09:11.133
> 
> 标签：php, pdf

我可以以编程方式更改 PDF 的质量吗？

我有一个客户是报纸，当他们将论文的 PDF 表单提交到他们的网站时，他们提交的副本与他们发送到打印机的副本相同，其大小范围为 30-50Mb。我可以手动降低质量（对于网络来说仍然很高），它将是 3-5Mb，因此这将大大有助于我的托管。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-04T22:23:54.033

这似乎只需要 Adob​​e PDF SDK / 库。我与他们合作过很多次，但我从未尝试更改现有 PDF 的分辨率。图书馆很昂贵，所以它可能不是你的选择。

我想说 Perl 的 PDF::API2 捆绑了一个优化脚本，但我从未使用过该功能。可能值得一看。该模块本身非常彻底。虽然，这么大的 PDF 处理起来并不是那么快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-03T23:41:12.317

您应该检查[TCPDF](http://www.tecnick.com/public/code/cp_dpage.php?aiocp_dp=tcpdf)库或[php 文档](http://ar.php.net/pdf)。我从未在 php 中使用过 pdf，但我认为您可以使用 TCPDF 轻松完成所需的工作。如果您的 pdf 是由图像组成的，请查看[此示例](http://www.tecnick.com/pagefiles/tcpdf/example_009.phps)，也许会对您有所帮助。

问候

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-03T23:58:26.683

[Zend_Pdf](http://framework.zend.com/manual/en/zend.pdf.html)是用于阅读和操作现有 PDF 的最佳免费库，但它的深度不足以满足您的需求。我不相信有一个 PHP 库可以在那个级别处理 PDF 文件（也就是说，能够提取嵌入的图像并用较低质量的版本替换它们）。

# asp.net - 设置网页以搜索 SQL 数据库的最快和最简单的方法？

> ID：509387
> 
> 赞同：3
> 
> 时间：2009-02-03T23:09:20.883
> 
> 标签：asp.net, sql-server

我通常只从事系统管理项目和软件打包工作，对 Web 技术知之甚少，但我的任务是构建一个简单的网站，从用户输入中搜索 SQL 2005 数据库并列出结果。而已。

任何人都可以帮助我提供一些示例代码或类似代码吗？由于我们是纯微软公司，它将在 SQL 2005 和 IIS 上运行，所以我假设我需要使用 ASP.NET，但也许我的经验不足导致我走错了路。

任何帮助或建议将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-02-03T23:15:39.950

您可能想查看[ASP.NET 动态数据](http://www.asp.net/dynamicdata/)。这正是它设计的场景。

# vb.net - 意外的接口转换

> ID：509391
> 
> 赞同：1
> 
> 时间：2009-02-03T23:10:08.213
> 
> 标签：vb.net

我只是偶然发现这似乎有效：

```
Public Interface Ix
    ReadOnly Property TestProp()
End Interface

Public Interface Iy
    Property TestProp()
End Interface

Public Sub TestSub
    Dim x As Ix = Me.InstantiationNotImportant()
    Dim y As Iy = CType(x, Iy)
End Sub 
```

也许我今天写了太多代码，但这对我来说没有意义。我怎么可能将一个界面转换为另一个甚至略有不同的界面？

有什么想法吗？

**编辑：**看来我确实只是因为编码过多而头晕目眩。睡了一会儿，世界又变得有意义了。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-03T23:19:29.193

实例化很重要，因为该方法可以生成一个实现这两个接口的对象，从而使这段代码完全有意义。否则，我不确定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-03T23:28:29.333

就像加里所说的实例化很重要，因为如果我这样做：

```
public interface IX { }
public interface IY { }
public class Test : IX { } 
```

以下将不起作用。

```
IX xvar = new Test();
IY yvar = xvar as IY; \\Returns null.

IY yvar = (IY)xvar; \\Throws cast exception. 
```

它会运行，但 yvar 将为 null，因为无法进行强制转换，但如果您像这样声明 test：

```
public class Test : IX,IY { } 
```

它现在可以工作了，因为 Test 使用两个接口并且从 xvar 中的对象转换为 Y 是有效的。

# mysql - 在涉及多个表的 SQL 查询方面需要帮助 - 加入不是一个选项

> ID：509393
> 
> 赞同：0
> 
> 时间：2009-02-03T23:10:24.440
> 
> 标签：mysql

```
SELECT i.*, i.id IN (
  SELECT id
  FROM w 
  WHERE w.status='active') AS wish 
FROM i
INNER JOIN r ON i.id=r.id
WHERE r.member_id=1 && r.status='active' 
ORDER BY wish DESC 
LIMIT 0,50 
```

这是我正在尝试运行的查询。它不能很好地扩展，我想知道这里是否有人可以告诉我在哪里可以改进。我不将 w 加入 r 和 i，因为我需要显示 i 中未在 w 中表示的行。我尝试了左连接，但效果不太好。这更好，但还不理想。三张桌子都很大。这三个都在我要加入和选择的字段上编入索引。

任何评论、指示或建设性的批评将不胜感激。

编辑补充：

我应该把这个放在我原来的问题中。这是 SQLYog 返回的解释。

```
id|select_type       |table|type          |possible_keys|key      |key_len|ref  |rows|Extra|  
1 |PRIMARY           |r    |ref           |member_id,id |member_id|3      |const|3120|Using where; Using temporary; Using filesort  
1 |PRIMARY           |i    |eq_ref        |id           |id       |8      |r.id |1   |  
2 |DEPENDENT SUBQUERY|w    |index_subquery|id,status    |id       |8      |func |8   |Using where 
```

* * *

编辑 le dorfier - 更多评论...

> 我应该提到 w 的键是 (member_id, id)。所以每个id在w中可以存在多次，我只想知道是否存在。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-02-03T23:38:03.010

`WHERE x IN ()`与子查询的`INNER JOIN`a相同`SELECT DISTINCT`，通常，如果优化器不将`IN`a 转换为 a `JOIN`- 它应该：

```
SELECT i.*
FROM i
INNER JOIN (
    SELECT DISTINCT id
    FROM w 
    WHERE w.status = 'active'
) AS wish 
    ON i.id = wish.id
INNER JOIN r
    ON i.id = r.id
WHERE r.member_id = 1 && r.status = 'active' 
ORDER BY wish.id DESC 
LIMIT 0,50 
```

如果您不需要`DISTINCT`：

```
SELECT i.*
FROM i
INNER JOIN w 
    ON w.status = 'active'
    AND i.id = wish.id
INNER JOIN r
    ON i.id = r.id
    AND r.member_id = 1 && r.status = 'active' 
ORDER BY i.id DESC 
LIMIT 0,50 
```

请发布您的架构。

如果您使用 wish 作为存在标志，请尝试：

```
SELECT i.*, CASE WHEN w.id IS NOT NULL THEN 1 ELSE 0 END AS wish
FROM i
INNER JOIN r
    ON i.id = r.id
    AND r.member_id = 1 && r.status = 'active' 
LEFT JOIN w 
    ON w.status = 'active'
    AND i.id = w.id
ORDER BY wish DESC 
LIMIT 0,50 
```

您可以对子查询使用相同的技术`LEFT JOIN`。`SELECT DISTINCT`我假设您没有指定，`w.member_id`因为您想知道是否有任何成员有这个？在这种情况下，一定要使用`SELECT DISTINCT`. 您应该有一个索引`id`作为第一列`w`，以便执行：

```
SELECT i.*, CASE WHEN w.id IS NOT NULL THEN 1 ELSE 0 END AS wish
FROM i
INNER JOIN r
    ON i.id = r.id
    AND r.member_id = 1 && r.status = 'active' 
LEFT JOIN (
    SELECT DISTINCT w.id
    FROM w 
    WHERE w.status = 'active'
) AS w
    ON i.id = w.id
ORDER BY wish DESC 
LIMIT 0,50 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-03T23:18:27.247

请张贴解释列表。并解释表格和列的含义。

希望似乎是一个布尔值-您正在按它订购？

* * *

编辑：嗯，看起来它正在做它被指示做的事情。凯德似乎在广泛思考这一切可能意味着什么（他可能值得一票只是为了努力。）但我真的希望你告诉我们。

疯狂的猜测只会让每个人都感到困惑（包括你，我敢肯定。）

* * *

好的，根据新信息，这是我（稍微不那么疯狂）的猜测。

```
SELECT i.*,  
    CASE WHEN EXISTS (SELECT 1 FROM w WHERE id = i.id AND w.status = 'active' THEN 1 ELSE 0 END) AS wish  
FROM i  
INNER JOIN r ON i.id = r.id AND r.status = 'active'  
WHERE r.member_id = 1 
```

你想在 w 中的每场比赛都有一行吗？或者只是想知道 i.id 是否有活动的 w 记录？我假设第二个答案，所以你不需要 ORDER BY - 无论如何它只适用于一个 ID。而且由于您仅从 i 返回列，因此如果 r 中有多行，您只会得到重复的行。

如何发布您期望得到的正确答案？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-03T23:33:26.047

我应该把这个放在我原来的问题中。这是 SQLYog 返回的解释。
id|select_type|table|type|possible_keys|key|key_len|ref|rows|Extra|
1|PRIMARY|r|ref|member_id,id|member_id|3|const|3120|使用 where；使用临时的；使用文件排序
1|PRIMARY|i|eq_ref|id|id|8|r.id|1|
2|DEPENDENT SUBQUERY|w|index_subquery|id,status|id|8|func|8|使用 where

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-02-04T00:20:59.117

```
...
ORDER BY wish DESC 
LIMIT 0,50 
```

这似乎是一笔很大的开支。您正在按`wish`无法从索引中受益的计算列“”进行排序。这迫使它使用文件**排序**（如 EXPLAIN 所示）输出，这意味着它将整个结果集写入磁盘并使用非常慢的磁盘 I/O 对其进行排序。

当您发布这样的问题时，您不应该期望人们猜测您是如何定义表和索引的。获取完整定义非常简单：

```
mysql> SHOW CREATE TABLE w;
mysql> SHOW CREATE TABLE i;
mysql> SHOW CREATE TABLE r; 
```

然后将输出粘贴到您的问题中。

目前尚不清楚您对“ `wish`”列的目的是什么。" `IN`" 谓词是一个布尔表达式，所以它总是导致 0 或 1。但我猜你正在尝试使用 " `IN`" 以希望在不进行连接的情况下完成连接。如果您描述您要完成的工作，这将有所帮助。

试试这个：

```
SELECT i.*
FROM i
 INNER JOIN r ON i.id=r.id
 LEFT OUTER JOIN w ON i.id=w.id AND w.status='active'
WHERE r.member_id=1 AND r.status='active'
 AND w.id IS NULL
LIMIT 0,50; 
```

它使用额外的外部连接，但根据我对 EXPLAIN 的测试，它*不会产生文件排序。*

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-02-03T23:25:26.263

你试过这个吗？

```
SELECT i.*, w.id as wish FROM i
LEFT OUTER JOIN w ON i.id = w.id
  AND w.status = 'active'
WHERE i.id in (SELECT id FROM r WHERE r.member_id = 1 AND r.status = 'active')
ORDER BY wish DESC
LIMIT 0,50 
```

# delphi - Delphi 2009 可以构建返回数据集的 Web 服务吗？

> ID：509404
> 
> 赞同：2
> 
> 时间：2009-02-03T23:13:32.467
> 
> 标签：delphi, service, dataset, delphi-2009

在我读过的示例 Delphi Web 服务教程中，他们倾向于构建一个返回简单字符串或整数的 Web 服务，例如

[http://blogs.codegear.com/pawelglowacki/2008/12/18/38624](http://blogs.codegear.com/pawelglowacki/2008/12/18/38624)

但是，我读到可以在 .NET 中构建返回 DataSet 甚至对象的 Web 服务。这在 Delphi 2009 中是否可行，如果可以，我在哪里可以找到更多信息？

另外，您对在 Delphi 和 .NET 之间构建 Web 服务的工具有何看法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-04T01:16:04.467

是的，可以这样做；你可以通过使用 Delphi 的 DataSnap 和 SoapConnection 来做到这一点。DataSnap 是德尔福的多层解决方案。在 Delphi 2009 中，它看到了一个重大更新，并命名为 DataSnap 2009，但 DataSnap 2009 还不支持旧 DataSnap 的某些功能，例如使用 WebServices 进行通信。好消息是旧的 DataSnap 在 Delphi 2009 中仍然可用，并且您不必强制使用 DataSnap 2009。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-04T01:16:51.813

Delphi 2009 完全支持从 web 服务返回类和数据集。Datasnap 是支持数据集的框架，您可以在Delphi 产品经理 Nick Hodges的这段[视频中找到更多信息，Marco Cantù 的这份](http://dn.codegear.com/article/38587)[白皮书](http://dn.codegear.com/article/39227)（白皮书摘自他的书“<a href="http://www.marcocantu.com/ dh2009" rel="nofollow noreferrer">Delphi 2009 手册”和此[代码](http://cc.codegear.com/Item/26138)由 Bruno Lichot 编写。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-04T01:41:30.420

好的，请告诉我以下是否正确：

DataSnap 2009 可以传输数据集，但不支持通过 Web 服务进行通信。即客户端和服务器都必须用Delphi 2009 编写？

普通的旧 DataSnap 可以使用 Web 服务传输数据集，但需要 COM？

那么下一个问题是，使用什么来使用 Web 服务返回的数据集？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-02-04T22:13:39.997

据我所知，.Net 和 Java 客户端也可以访问 DataSnap 2009 服务器。

旧的 DataSnap 不将 COM 用于 SoapConnection，但 COM 用于其他类型的连接（例如套接字连接）。

> 那么下一个问题是，使用什么来使用 Web 服务返回的数据集？

在服务器端，您可以放置​​连接到数据集控件的 DatasetProviders，并为客户端提供数据集。在客户端，ClientDataset 用于接收服务器上的 DatasetProviders 提供的数据。

# python - 在 Python 中将 self 传递给类函数

> ID：509421
> 
> 赞同：5
> 
> 时间：2009-02-03T23:17:03.863
> 
> 标签：python, function, class

在 python 的类函数中为自引用传递值的原因是什么？例如：

```
class MyClass:
    """A simple example class"""
    i = 12345
    def f(**self**):
        return 'hello world' 
```

通过这样做，您不是在做编译器的工作吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-02-03T23:27:13.623

多年来，许多电子都为讨论这个问题献出了生命。

Guido（python 的创建者）在他的博客中对这个问题进行了权衡[，](http://neopythonic.blogspot.com/2008/10/why-explicit-self-has-to-stay.html)以回应去年提出的摆脱显式自我的[提议。](http://www.blueskyonmars.com/2008/10/28/python-without-explicit-self/)python FAQ 也[涵盖了这个问题](http://docs.python.org/faq/design.html#why-self)。

最后，如果你不介意一点灰色魔法，你可以[使用元类来摆脱它](http://www.voidspace.org.uk/python/articles/metaclasses.shtml)。尽管您有充分的理由不应该这样做（它破坏了属性，会使您更难理解其他人的代码，并且会使任何其他查看您的代码的 Python 程序员感到困惑）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-02-03T23:22:52.883

Guido 说： http: [//neopythonic.blogspot.com/2008/10/why-explicit-self-has-to-stay.html](http://neopythonic.blogspot.com/2008/10/why-explicit-self-has-to-stay.html)

# bash - 有多少种方法可以在部分子字符串上完成 Bash 别名？

> ID：509427
> 
> 赞同：0
> 
> 时间：2009-02-03T23:18:30.303
> 
> 标签：bash, user-interface, alias, shortcuts, code-completion

**问题：**我有一个问题显然没有被Stack Overflow 上[这个已经问过的 Bash 完成问题回答。](https://stackoverflow.com/questions/342969)问题是，如何在部分子字符串上获得 Bash 别名完成（对于任何别名）。

**示例：** 例如，假设我有以下别名：

```
open.alicehome="cd /usr/home/alice"
open.bakerhome="cd /usr/home/baker"
open.charliehome="cd /usr/home/charlie"
gohomenow="shutdown -now" 
```

我想懒洋洋地输入“baker{{TAB}}”来调用第二个别名。

我想懒洋洋地输入“home{{TAB}}”来获取上述所有别名的列表，然后我可以使用键盘（最佳）从中进行选择，或者通过输入区分三个选项的明确子字符串进行选择（低于最佳）。

.. 或者 ..

我想懒洋洋地输入“home”，然后反复按 {{TAB}} 直到出现我想要的特定别名，然后按 {{ENTER}} 执行它。

**随意发挥创意：** 如果你有办法做到这一点，即使它需要求助于极端的大师黑客，请随时分享并随时将你的大师黑客解释为一个五岁的孩子的水平将不得不尝试自己实施您的想法。

欢迎链接到现有网页或 RTFM。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-02-04T22:15:59.493

如果你真的想改变`bash`的标签行为，

```
# ~/.inputrc
# The default binding for [Tab] is ``complete'', which is what we're used to.
# ``menu-complete'' gives you irssi-like behavior: cycle through completions.
"\t": menu-complete 
```

这在[GNU Readline 库#Letting Readline Type For You](http://tiswww.case.edu/php/chet/readline/readline.html#SEC19)中有记录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-04T20:40:14.537

也许您可以通过自定义 bash_completion 设置实现您想要的，但我不会为您完成这项工作，好吗？:-)

如果您不知道我在说什么，请参阅[此处](http://www.caliban.org/bash/index.shtml#completion)和[此处](http://www.debian-administration.org/articles/316)了解详细信息。顺便说一句，我会觉得这很烦人

> 我想懒洋洋地输入“home”，然后反复按 {{TAB}} 直到出现我想要的特定别名，然后按 {{ENTER}} 执行它。

我认为这是 M$ 风格的“完成”（你是来 DOS/windows 环境的吗？）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-05T08:51:24.670

您可以为指定的子字符串生成匹配项`compgen -c -X'!*substring*'`

要将其包含在 bash 自动完成中，您可以在主目录中创建一个 .bash_completion 文件，其中包含以下内容：

```
_comp() {
    local cur

    cur=${COMP_WORDS[$COMP_CWORD]}

    COMPREPLY=( $( compgen -c -X '!*'$cur'*' ) )

}
complete -F _comp $nospace eval 
```

当您按下命令`<TAB>`的参数时，此匹配函数将运行`eval`。我还没有找到一种方法来为 bash 中的第一个命令搜索包含一个新的匹配函数，我只找到了关于如何为特定命令添加自定义完成的文档，就像`eval`上面一样。

但我有点怀疑这是多么有用......没有简单的方法可以从列表中选择您想要的匹配项。

# .net - Flex、.NET Web 服务和数字枚举

> ID：509435
> 
> 赞同：0
> 
> 时间：2009-02-03T23:19:41.020
> 
> 标签：.net, apache-flex, web-services

我们正在使用 Flex 3 来使用 .NET Web 服务。Web 服务使用枚举，我们使用 Flex Builder 自动生成 Web 服务对象。这是 .NET Web 服务枚举定义：

```
 /// <summary>
   /// User type
   /// </summary>
   public enum UserTypeEnum
   {
       Admin = 1,
       User = 3,
       Manager = 4
   } 
```

当 Flex 生成 Web 服务对象时，它会将它们视为字符串而不是整数值。

```
[Inspectable(category="Generated values", enumeration="Admin, User, Manager", type="String")]
public var _UserTypeEnum:String;public function toString():String
{
return _UserTypeEnum.toString();
} 
```

当我们从 Web 服务获取数据时，使用此枚举的任何属性都是 Null，而不是 'admin' 或 '1'。有什么办法可以使这项工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-04T00:11:04.673

请注意，枚举和 Web 服务存在问题。

看到这个[问题](https://stackoverflow.com/questions/505617/flags-with-web-services/505628#505628)。

*   应该在 Web 服务中使用 [Serializable,Flags]。
*   标志应该是二的倍数
*   枚举定义应该从 1 而不是 0 开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-08-14T23:49:54.243

在从 C 派生的语言（C#、C++、Java）中，an`enum`实际上是一组命名的整数值。

XML Schema 中没有对应的概念，因此 Web 服务中也没有这样的概念。

在您或其他任何人提到这个`<xs:enumeration/>`方面之前，这不是它的用途。`<xs:enumeration/>`提供类型的可能词法值的列表（枚举）。没有办法将数字与这些词法值相关联。以下`enum`：

```
public enum Enumeration1
{
    E1a = 1,
    E1b = 2,
    E1c = 4
} 
```

变为以下 XML 模式：

```
<s:simpleType name="Enumeration1">
    <s:restriction base="s:string">
        <s:enumeration value="E1a"/>
        <s:enumeration value="E1b"/>
        <s:enumeration value="E1c"/>
    </s:restriction>
</s:simpleType> 
```

注意没有 1、2 或 4。

这就是说这种类型的元素或属性将是一个字符串，并且可能具有值“E1a”、“E1b”或“E1c”之一。

如果客户端代理是从具有这种模式的 WSDL 构建的，并且代理代码生成器足够聪明，它可能会认为这最初是一种编程语言`enum`。在这种情况下，它将创建类型为

```
public enum Enumeration1
{
    E1a,
    E1b,
    E1c
} 
```

因为它无法访问整数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-03T23:25:59.587

[Adobe re: Flex 3 and enum's in WSDL 中列出了一些错误](http://www.google.com/search?hl=en&safe=off&rlz=1T4HPIA_en&q=+site:bugs.adobe.com+FLEX+wsdl+enum)。你确定你有最新的更新吗？

# java - 如何更改为使用 MXBean 定义的操作显示的输入描述

> ID：509440
> 
> 赞同：2
> 
> 时间：2009-02-03T23:22:03.823
> 
> 标签：java, annotations, jmx, jconsole

我正在使用 MXBean 来检测某个功能，并且我有一个接受 3 个输入参数的方法。

默认情况下，在 jconsole 上，参数显示为 p1、p2、p3 等。我有 @params 描述每个参数。我如何让 jConsole 使用这些？

```
public class Sample implements SampleMXBean {

    /**
     * method 1
     *
     * @param input1 Input One
     * @param input2 Input Two
     */
     public void getInput(int input1, int input2) {
       ...
       ...
     }
} 
```

我已经注册了上面的 MXBean ，当我启动这个操作的面板时，我得到一个带有“getInput”作为文本的按钮，以及两个名称为 p1 和 p2 的文本框，而不是“Input One”和“Input二”。

我需要使用任何注释来实现这一点吗？（顺便说一句，我使用的是 jdk1.6）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-05T01:34:31.323

你用的是弹簧吗？他们有一个[模块，可以使用](http://static.springframework.org/spring/docs/2.5.x/reference/jmx.html)*@ManagedOperation*和*ManagedOperationParameter*注释执行您所描述的操作。否则，当您在 JMX 中注册对象时，您需要自己创建适当的*javax.management.modelmbean.ModelMBeanOperationInfo类。*

[不过， JSR-255](http://tech.puredanger.com/java7/#jsr255)将来可能会解决这个问题。请参阅[此博客文章](http://weblogs.java.net/blog/emcmanus/archive/2007/08/defining_mbeans.html)

# python - python读取行不带\ n？

> ID：509446
> 
> 赞同：4
> 
> 时间：2009-02-03T23:23:57.080
> 
> 标签：python, file, newline

这适用于所有平台吗？我知道windows会\r\n，记得听到mac会\r而linux会\n。我在 Windows 上运行了这段代码，所以看起来不错，但你们中有人知道它是否跨平台吗？

```
while 1:
    line = f.readline()
    if line == "":
        break
    line = line[:-1]
    print "\"" + line + "\"" 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-02-03T23:34:39.820

首先，有[通用的换行支持](https://www.python.org/dev/peps/pep-0278/)

第二：只需使用`line.strip()`. `line.rstrip('\r\n')`如果要在行首或行尾保留任何空格，请使用 , 。

哦，还有

```
print '"%s"' % line 
```

或者至少

```
print '"' + line + '"' 
```

可能看起来更好一些。

您可以像这样遍历文件中的行（这不会像您的代码一样在文件中间的空行上中断）：

```
for line in f:
    print '"' + line.strip('\r\n') + '"' 
```

如果您的输入文件足够短，您可以使用`str.splitlines`默认情况下丢弃行尾的事实：

```
with open('input.txt', 'rU') as f:
    for line in f.read().splitlines():
        print '"%s"' % line 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-02-03T23:35:03.017

试试这个：

```
line = line.rstrip('\r\n') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-04T02:05:33.743

> 线=线[：-1]

如果一行是文件的最后一行，则该行不能有尾随换行符。

如上所述，尝试使用 rstrip() 的通用换行符。

# python - Python M2Crypto - 生成 DSA 密钥对并分离公共/私有组件

> ID：509449
> 
> 赞同：2
> 
> 时间：2009-02-03T23:25:04.720
> 
> 标签：python, cryptography, rsa, m2crypto

任何人都可以解释以下原因是什么：

```
>>> from M2Crypto import DSA, BIO
>>> dsa = DSA.gen_params(1024)
..+........+++++++++++++++++++++++++++++++++++++++++++++++++++*
............+.+.+..+.........+.............+.....................+.
...+.............+...........+.........................................
+.........+................+..........+......+..+.+...+..........+..+..
..+...+......+....+.............+.................+.......+.........+..
....+......+.+..+..........+........+.+...+..+...............+.........
..+.....+........+..........+++++++++++++++++++++++++++++++++++++++++++
++++++++*
>>> mem = BIO.MemoryBuffer()
>>> dsa.save_key_bio(mem, cipher=None)
1
>>> dsa.save_pub_key_bio(mem)
0
>>> print mem.getvalue()
-----BEGIN DSA PRIVATE KEY-----
MIIBIgIBAAKBgQDPGRFSTqqx8vet5kaW5m99A83REotTcX9HOv+zrqMxQpaTlinS
MDz49I4psDPJ+bWH7vySEdOYO2JGUj6kYZdz/ZwyNjphWNjQkaUrmfaVLzS3PHpW
aMrPEweLesf/PT4KXm2HaDbaW/g2Ds5h+Zlq9LDKcN2vfvyeiTCmf1esyQIVAO9I
ippU4PIdvJVO9HQRkqrD2bxPAoGBAIwVgM7dgNVwihJva6qeeh7ypy3ESNB9k8nY
fOnES+SqZGQbkPrJIusRCJNKERiMATJXNRMfBeWD8htNRezbgtr0OpuYSBurAQjp
hKKVI3DHSv7XT49BQ3tdJww8lQfkOhHOfFTG6U1dJhWdggp0WN3EjYlt77agRsjR
4t5sD1f3
-----END DSA PRIVATE KEY-----
-----BEGIN PUBLIC KEY-----
-----END PUBLIC KEY-----
>>> 
```

显然我错过了一些东西。M2Crypto 不存在的文档无济于事。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-02-04T00:35:25.280

调用 dsa.gen_key()，然后保存。您实际上并没有生成公钥。

```
>>> from M2Crypto import DSA, BIO
>>> dsa = DSA.gen_params(1024)
..+..etc
>>> mem = BIO.MemoryBuffer()
>>> dsa.gen_key()
>>> dsa.save_key_bio(mem, cipher=None)
1
>>> dsa.save_pub_key_bio(mem)
1
>>> print mem.getvalue()
-----BEGIN DSA PRIVATE KEY-----
MIIBuwIBAAKBgQDowiLFDXGwaWIOkZybeeqSXYZ8KCLmXg5XfnAtDBlVOokB91Rj
etc.
-----END DSA PRIVATE KEY-----
-----BEGIN PUBLIC KEY-----
MIIBtzCCASsGByqGSM44BAEwggEeAoGBAOjCIsUNcbBpYg6RnJt56pJdhnwoIuZe
Dld+cC0MGVU6iQH3VGNEzKycBVQeVYke3itZwQALSlT2JfUsmOjeZYIkc9l2YYob
rixObXfQyc0AOBM/J53F0F6R8+xvEwN/Hmdd9SjjbdZi8gve+dr9UfnKHXi0KPUF
s2ougGhXeEjTAhUAiW5bMzG8nCVjXErgwaDEx+JEdtECgYACba2quw3xibhT3JNd
sDh0gIRpHPQgIgxgzGv6A09Vdb4VgtWf0MYAo6gAhxsZIWWKzQ94Oe1nf7OhC+B+
VjT+PW+ExSrbJVONTN5ycE64O7+2L+q/hZSjjkxXgfcApqeVtZp4wKqbS976Kpch
WgNl0zdkvV8JddRs0oKQ0Bl7dwOBhQACgYEAgkdF/+ncobVcYXfXHBUH3H5SLD3y
u2zUWGhXM4/MUTwPromDOQ8Zd0H7myYhmQvVUb+J9mJHMIn7Guf4JDH+8d6rBpzo
U5yEGqgsSqYqgtStzDvsKHfqw3mvjvsktm66N/vm36eai2I6J15QibdtP0lb1Um8
EeECDTxWUWT93rs=
-----END PUBLIC KEY-----

>>> 
```

# .net - 自定义配置部分是否可以有任意 XML？

> ID：509455
> 
> 赞同：9
> 
> 时间：2009-02-03T23:26:18.853
> 
> 标签：.net, asp.net

假设我在 ASP.NET web.config 中定义了一个配置部分，例如：

```
<?xml version="1.0"?>
<configuration>
  <configSections>
    <sectionGroup name="system.web">
      <section name="MySettings" type="MyCompany.MyProject.Configuration.MySettings" allowLocation="true" allowDefinition="Everywhere" restartOnExternalChanges="false" />
    </sectionGroup>
  </configSections>
  <system.web>
    <MySettings knownProperty="some_value" unknownProperty="other_value" />
  </system.web>
</configuration> 
```

假设我`MySettings : System.Configuration.ConfigurationSection` **没有** `unknownProperty`定义：

```
using System.Configuration;

namespace MyCompany.MyProject.Configuration
{
    public class MySettings : ConfigurationSection
    {
      public MySettings() { }

      [ConfigurationProperty("knownProperty", DefaultValue="default_value")]
      public string KnownProperty
      {
        get { return (string)this["knownProperty"]; }
      }

      // I'm not defining unknownProperty here on purpose
    }
} 
```

无论如何运行应用程序而不会出现配置错误，抱怨无法识别的属性“unknownProperty”？

如果可能的话，我也可以用一种方法来捕捉该错误并忽略它。

换句话说，我希望 XML 具有一个未在它所绑定的匹配类型中定义的属性。可以在现有配置 API 的范围内完成吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-02-04T15:59:57.177

我很确定这是可能的，因为某些内置部分（如 WCF 和成员资格）可以毫无错误地执行此操作。OnDeserializeUnrecognizedAttribute 是否满足您的需求？

```
protected override bool OnDeserializeUnrecognizedAttribute(string name, string value){
//don't call base to avoid error
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-10-01T14:46:38.930

我正在使用下面的代码从我的 web.config ASP 文件中成功读取任何 XML 结构。请注意，仅支持读取。

```
using System;
using System.Collections.Generic;
using System.Text;
using System.Configuration;
using System.Xml;

/* In this file, you'll find an example on how to store an custom section in an .Net 
 * application configuration file that can contains arbitrary XML that can be retrieved 
 * as a raw System.Xml.XmlNode. In the specific example below, I wanted to be able to 
 * store arbitrary information about POP servers I retrieve email from, without having to 
 * write specific Configuration data for each different case. This is usefull for quick
 * application development.
 */

/* Config file sample : 
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
    <configSections>
        <sectionGroup name="MySection">
            <section name="MailRetrieve" type="ConsoleApplication1.MailRetrieveConfigurationSection, ConsoleApplication1"/>
        </sectionGroup>
    </configSections>

    <MySection>
        <MailRetrieve>
            <Hosts>
                <add username="projects@domain.com" popserver="mail.domain.com" password="1234">
                    <RawXml>
                        <AnElement>Arbitrary string one</AnElement>
                    </RawXml>
                </add>
                <add username="tasks@domain.com" popserver="mail.domain.com" password="1234"></add>
                <add username="bugs@domain.com" popserver="mail.domain.com" password="1234" >
                    <RawXml>
                        <OtherElement>Arbitrary string two</OtherElement>
                    </RawXml>
                </add>
            </Hosts>
        </MailRetrieve>
    </MySection>
  </configuration>
 */

/* Sample output : running the piece of code below, using config file above, gives :

        Custom XML for projects@domain.com__@__mail.domain.com:
        <RawXml><AnElement>Arbitrary string one</AnElement></RawXml>
        ************
        Custom XML for tasks@domain.com__@__mail.domain.com:
         - none -
        ************
        Custom XML for bugs@domain.com__@__mail.domain.com:
        <RawXml><OtherElement>Arbitrary string two</OtherElement></RawXml>
        --> Found OtherElement !
        ************
        Hit a key to finish

 */

namespace ConsoleApplication1 {
    class Program {
        static void Main(string[] args) {

            MailRetrieveConfigurationSection config = (MailRetrieveConfigurationSection)
                    (System.Configuration.ConfigurationManager.GetSection("MySection/MailRetrieve"));

            if (config != null) {
                foreach (HostConfigElement cfg in config.Hosts) {
                    System.Console.WriteLine("Custom XML for " + cfg.PopMailboxID + ":");
                    if (cfg.RawXml.Node != null) {
                        System.Console.WriteLine(cfg.RawXml.Node.OuterXml);
                        if (cfg.RawXml.Node.SelectSingleNode("OtherElement") != null) {
                            Console.WriteLine("--> Found OtherElement !");
                        }
                    }
                    else {
                        System.Console.WriteLine(" - none -");
                    }
                    System.Console.WriteLine("************");                    
                }
            }
            System.Console.WriteLine("Hit a key to finish");
            System.Console.ReadKey();
        }
    }

    public class MailRetrieveConfigurationSection : ConfigurationSection {
        [ConfigurationProperty("Hosts")]
        public MailRetrieveHostsConfigCollection Hosts {
            get {
                return ((MailRetrieveHostsConfigCollection)(base["Hosts"]));
            }
        }
    }

    [ConfigurationCollectionAttribute(typeof(HostConfigElement))]
    public class MailRetrieveHostsConfigCollection : ConfigurationElementCollection {
        protected override ConfigurationElement CreateNewElement() {
            return new HostConfigElement();
        }

        /// <summary>
        /// We want to have only one configuration per POP mailbox, wich key is host+username
        /// If more configuration is wanted, one must introduce an "id" attribute.
        /// </summary>        
        protected override object GetElementKey(ConfigurationElement element) {
            return ((HostConfigElement)(element)).PopMailboxID;
        }

        public void Add(HostConfigElement element) {
            this.BaseAdd(element);
        }

        public void Remove(string key) {
            this.BaseRemove(key);
        }

        public void Clear() {
            this.BaseClear();
        }

        public HostConfigElement this[int idx] {
            get { return (HostConfigElement)this[idx]; }
        }
    }

    public class MyCustomConfigurationElement : ConfigurationElement {

        public XmlNode Node = null;

        protected override void DeserializeElement(XmlReader reader, bool serializeCollectionKey) {                       
            XmlDocument doc = new XmlDocument();
            doc.Load(reader.ReadSubtree());
            Node = doc.FirstChild;
        }        
    }

    public class HostConfigElement : ConfigurationElement {

        /// <summary>
        /// A POP3 mailbox is distinguished from another using the server name and user name.
        /// </summary>
        public string PopMailboxID {
            get {
                return Username + "__@__" + PopServer; //
            }
        }

        [ConfigurationProperty("popserver", DefaultValue = "", IsRequired = true)]
        public string PopServer {
            get { return (string)this["popserver"]; }
            set { this["popserver"] = value; }
        }

        [ConfigurationProperty("username", IsRequired = true, Options = ConfigurationPropertyOptions.IsKey)]
        public string Username {
            get { return (string)this["username"]; }
            set { this["username"] = value; }
        }

        [ConfigurationProperty("password", DefaultValue = "", IsRequired = true)]
        public string Password {
            get { return (string)this["password"]; }
            set { this["password"] = value; }
        }

        [ConfigurationProperty("RawXml", IsRequired=false)]
        public MyCustomConfigurationElement RawXml {
            get { return (MyCustomConfigurationElement)this["RawXml"]; }
            set { this["RawXml"] = value; }
        }

    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-01-14T14:15:26.513

继丹尼尔的回答之后： -

```
protected override bool OnDeserializeUnrecognizedAttribute(string name, string value) {
    try {
        var lProperty = new ConfigurationProperty(name, typeof(String));
        Properties.Add(lProperty);
        base[name] = value;
        return true;
    } catch {
        return false;
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-05-12T00:43:12.697

这是我最终得到的最小代码示例：

```
public class XmlConfigurationSection : ConfigurationSection
{
    [ConfigurationProperty("xml", IsRequired = false)]
    public XmlElement Xml
    {
        get { return (XmlElement)this["xml"]; }
        set { this["xml"] = value; }
    }
}

public class XmlElement : ConfigurationElement
{
    public XmlNode Node = null;

    protected override void DeserializeElement(XmlReader reader, bool serializeCollectionKey)
    {
        XmlDocument doc = new XmlDocument();
        doc.Load(reader.ReadSubtree());
        Node = doc.FirstChild;
    }
} 
```

在这里获取xml元素

```
var xml = (System.Configuration.ConfigurationManager.GetSection("xmlSettings") as XmlConfigurationSection).Xml; 
```

WebConfig 设置如下：

```
<configuration>
  <configSections>
    <section name="xmlSettings" type="WebApp.XmlConfigurationSection" />
  </configSections>
    <xmlSettings>
      <xml>
        <anyxmlroot>...</anyxmlroot>
      </xml>
  </xmlSettings>
</configuration> 
```

# php - 从超类访问子变量而不实例化

> ID：509463
> 
> 赞同：1
> 
> 时间：2009-02-03T23:27:49.410
> 
> 标签：php, oop, static

我试图通过父类访问子类中的成员变量而无需实例化。

这是我的尝试之一，但`B::getStatic()`以`Access to undeclared static property`.

是否有另一种解决方案，可能没有静态？

```
class A {

    static public function getStatic() {

        return self::$myStatic;

    }

}

class B extends A {

    public static $myStatic = 5;

}

class C extends A {

    public static $myStatic = 6;

}

var_dump(B::$myStatic);
var_dump(B::getStatic());

var_dump(C::$myStatic);
var_dump(C::getStatic()); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-02-04T06:18:36.197

您遇到的概念称为“后期静态绑定”。在 PHP 5.3.0 之前，没有对此的支持。

如果您运行的是 5.3.0 或更高版本，请更新 getStatic() 方法：

> 静态公共函数 getStatic() {
> 
> ```
> return static::$myStatic; 
> ```
> 
> }

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-04T00:49:02.290

其他人是对的，因为变量在编译时不存在，所以您的代码无法完成。

做这样的事情的方法通常是使用抽象类（在 PHP5 及更高版本中可用，看起来像）。

A 类是抽象类，并且有一个 getStatic() 函数。类 B 和 C 将扩展 A 并具有 getStatic() 函数的定义。这样，当您调用 getStatic() 时，您将获得子类定义的值，因为 A 中没有定义。

这种方法的警告是你不能实例化 A 因为它是抽象的。您总是必须制作 B 或 C（或其子类）。

您还可以在 A 中创建一个 setter，并让子类使用它来设置值（而不是 '='s）。这将让您实例化 A 并且它可以在需要时设置值。您也许可以将 setter 设为私有，因此不能直接调用它，我不知道子类是否可以在 PHP 中使用私有函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-03T23:32:36.360

函数和变量的声明不匹配。

您需要将函数的声明移至 B

或者

将变量的声明移至 A。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-02-03T23:34:26.137

B 类从 A 类继承属性，而不是相反。

你为什么不在你`B::$myStatic`的例子中使用like？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-02-03T23:38:42.353

您必须将 myStatic 移入 A。您在 A 中的方法 getStatic 无法访问 A 中不存在的变量。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-02-04T00:22:59.487

从[PHP 手册](http://php.net/oop5.late-static-bindings)：

> 对当前类的静态引用，如`self::`或`__CLASS__`使用函数所属的类解析，如定义它的位置：

因此，由于该方法是在 A 中定义的，因此当您调用`getStatic()`或`B`尝试`C`返回`a::$myStatic`时，该方法不存在。即使它确实存在，您也只能取回该值，而不是子类中的任何覆盖值。

一种解决方案是后期静态绑定，但这仅在尚未发布的 PHP 5.3 中可用。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2009-02-03T23:32:23.707

`$myStatic`必须在 A 类中声明为静态：参见[此处](http://de2.php.net/language.oop5.static)。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2009-02-03T23:34:47.057

```
class A {
    public static $myStatic = 5;
}    
class B extends A {
    public static $myStatic = 3;
}
class C extends A {
    public static $myStatic = 1;
} 
```

然后只需使用 B::$myStatic ...

# c - Jpeglib 代码给出了乱码输出，即使是捆绑的示例代码？

> ID：509493
> 
> 赞同：2
> 
> 时间：2009-02-03T23:38:52.853
> 
> 标签：c, jpeg, libjpeg

我在 Ubuntu Intrepid 上，我正在使用 jpeglib62 6b-14。我正在编写一些代码，当我尝试运行它时，它只会在顶部出现黑屏和一些乱码输出。经过几个小时的调试，我把它归结为 JPEG 基础，所以我拿了示例代码，围绕它写了一小段代码，输出完全相同。

我确信 jpeglib 在这个系统上的更多地方使用，它只是存储库中的版本，所以我很犹豫说这是 jpeglib 或 Ubuntu 打包中的错误。

我把示例代码放在下面（大部分评论被删除）。**输入的 JPEG 文件是一个未压缩的 640x480 文件，有 3 个通道，所以它应该是 921600 字节（它是）。**输出图像是 JFIF，大约 9000 字节。

如果您能给我一点提示，我将不胜感激。

谢谢！

```
#include <stdio.h>
#include <stdlib.h>
#include "jpeglib.h"
#include <setjmp.h>

int main ()
{
  // read data
  FILE *input = fopen("input.jpg", "rb");
  JSAMPLE *image_buffer = (JSAMPLE*) malloc(sizeof(JSAMPLE) * 640 * 480 * 3);
  if(input == NULL or image_buffer == NULL)
    exit(1);
  fread(image_buffer, 640 * 3, 480, input);

  // initialise jpeg library
  struct jpeg_compress_struct cinfo;
  struct jpeg_error_mgr jerr;
  cinfo.err = jpeg_std_error(&jerr);
  jpeg_create_compress(&cinfo);

  // write to foo.jpg
  FILE *outfile = fopen("foo.jpg", "wb");
  if (outfile == NULL)
    exit(1);
  jpeg_stdio_dest(&cinfo, outfile);

  // setup library
  cinfo.image_width = 640;
  cinfo.image_height = 480;
  cinfo.input_components = 3; // 3 components (R, G, B)
  cinfo.in_color_space = JCS_RGB; // RGB
  jpeg_set_defaults(&cinfo); // set defaults

  // start compressing
  int row_stride = 640 * 3; // number of characters in a row
  JSAMPROW row_pointer[1]; // pointer to the current row data
  jpeg_start_compress(&cinfo, TRUE); // start compressing to jpeg

  while (cinfo.next_scanline < cinfo.image_height) {
    row_pointer[0] = & image_buffer[cinfo.next_scanline * row_stride];
    (void) jpeg_write_scanlines(&cinfo, row_pointer, 1);
  }

  jpeg_finish_compress(&cinfo);

  // clean up
  fclose(outfile);
  jpeg_destroy_compress(&cinfo);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-02-04T00:00:28.270

您正在将 JPEG 文件读入内存（无需解压缩）并像未压缩一样写出该缓冲区，这就是您得到垃圾的原因。您需要先解压缩图像，然后才能将其输入 JPEG 压缩器。

换句话说，JPEG 压缩器假定其输入是原始像素。

您可以使用 ImageMagick 将输入图像转换为原始 RGB：

```
convert input.jpg rgb:input.raw 
```

它的大小应该正好是 921600 字节。

**编辑：**当您声明输入**JPEG**文件为**uncompressed**时，您的问题具有误导性。无论如何，我编译了你的代码，它工作正常，正确压缩图像。如果您可以上传您用作输入的文件，则可以进一步调试。如果没有，我建议您使用 ImageMagick 从已知 JPEG 创建的图像来测试您的程序：

```
convert some_image_that_is_really_a_jpg.jpg -resize 640x480! rgb:input.jpg 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-04T00:30:03.950

您正在将输入文件读入压缩的内存中，然后在将其重新压缩到文件之前。您需要在再次压缩之前解压缩 image_buffer。或者，而不是在 jpeg 中阅读，而是阅读 .raw 图像

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-04T09:20:33.427

“输入的JPEG文件是未压缩的”到底是什么意思？Jpegs都是压缩的。

在您的代码中，似乎在循环中您将一行像素提供给 libjpeg 并要求它压缩它。它不是那样工作的。libjpeg 必须至少有 8 行才能开始压缩（有时甚至更多，取决于参数）。所以最好让 libjpeg 来控制输入缓冲区，不要为它做它的工作。

我建议您阅读 cjpeg.c 是如何工作的。我认为最简单的方法是将您的数据放入 libjpeg 已知的原始类型（例如 BMP），然后使用 libjpeg 将 BMP 图像读入其内部表示并从那里压缩。

# .net - .NET 和动态语言

> ID：509494
> 
> 赞同：4
> 
> 时间：2009-02-03T23:39:44.193
> 
> 标签：.net, dynamic-languages

当 Microsoft 开始发布 DLR 和相关语言时，您是否计划使用这些语言（例如 Iron Ruby 或 Iron Python）？

如果是这样，您这样做的动机是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-02-03T23:59:21.860

是的，我当然打算找一些非必要的项目来熟悉 IronRuby。

我确信有一些真正的项目会从使用动态语言的形式中受益，但我不相信在我用该语言编写一些有意义的代码之前我可以正确判断这一点，所以我认为需要有意识地努力打破鸡和蛋的情况。

我认为 IronRuby 将提供机会专注于语言中的新功能，而不会因新开发环境的差异而分心（我几乎是 C# 语言）。

我昨天在看[IronRuby: The Right Language for the Right Job](http://channel9.msdn.com/pdc2008/TL44/)，所以这可能会影响我的回答；-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-03T23:42:20.537

如果它们适合我正在从事的项目，我计划使用它们。如果该项目在 C# 中同样容易完成，我可能会坚持使用静态语言，因为该`dynamic`关键字将允许许多相同的功能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-03T23:54:37.517

在某些情况下是的。

主要动机是重用已经在 Ruby 和 Python 中实现的现有代码和库，从而更轻松地与用 C# 编写的其他代码交互。对我来说，这一切都与跨语言集成的好处有关。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-02-03T23:55:43.940

我不是 .NET 开发人员，但考虑到以下条件，我会使用它：

*   速度/内存消耗（与其他实现相关）；
*   可移植性（或：“它仍然是 Python/Ruby/etc 吗？同样的代码会在官方实现上运行吗？”）；
*   不错的额外功能（只要它们不会过多地破坏第 2 项）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-02-04T06:33:55.057

大多数这些语言都可以托管在您的应用程序中，这就是有趣的一点。

如果您正在编写一个允许您的用户为可扩展性编写脚本的应用程序，那么您应该考虑使用它们。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-10T14:42:27.667

我当然打算看看[黄瓜](http://cukes.info/)。同样，我认为至少看一下 Rails 和 Django 是我的疏忽。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2009-02-04T20:07:50.203

不。除了一些元编程（反射很烂）之外，动态语言对具有良好类型推断的静态类型语言没有任何吸引力。

一方面，由于 IDE 薄弱而导致的生产力损失非常痛苦。

# asp.net - ASP.NET“程序集所需的参考”错误

> ID：509495
> 
> 赞同：0
> 
> 时间：2009-02-03T23:39:59.213
> 
> 标签：asp.net, assemblies, asp.net-2.0, reference

我有一个使用数据层程序集**DAL**的 ASP.NET 页面**A**。我用标签引用了**DAL**程序集，因为没有要添加引用的项目。我将程序集本身复制到页面的 bin 文件夹中。 ****`<%@ Assembly Name="NGC.DAL" %>`****

 ****程序集 DAL 是一个引用`System`和`System.Data`.

现在当 A 在 DAL 中调用方法时，编译器会给出错误

**BC30652：包含类型“System.Data.IDbConnection”的程序集“System.Data，Version=2.0.0.0，Culture=neutral，PublicKeyToken=969db8053d3322ac，Retargetable=Yes”所需的参考。将一个添加到您的项目中。**

`System.Data`我尝试使用标签引用程序集，`<%@Import Namespace="System.Data" %>`并尝试将其复制到 bin 文件夹并使用
`<%@ Assembly Name="System.Data" %>`标签引用它，两者都直接在 A 中。没有任何效果。

为什么使用项目 C 的项目 A 需要引用 B**和**C 而不仅仅是 B，为什么上面的方法不起作用？

[此](http://social.msdn.microsoft.com/Forums/en-US/msbuild/thread/6a31606f-baf1-4c64-9008-41e1219d437c/)MSDN 线程涵盖了该问题，但没有显示有效的解决方案。

编辑：正如罗伯特瓦格纳建议的那样，我添加了对 web.config 的引用。现在我收到另一条错误消息。**BC30560：“CommandBehavior”在命名空间“System.Data”中不明确。**这很奇怪，因为 web.config 中的那个是我在页面内引用的唯一一个。

或许值得一提的是，`System.Data`在 DAL 程序集中引用和使用的都是来自于紧凑框架。但既然它是我唯一使用的，那么歧义从何而来？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-02-04T00:11:26.063

您很可能从 DAL dll 中的 System.Data 类继承，并在您的网站中使用该类。它需要一个引用才能解析这些类的引用，否则编译器将不知道类契约是什么。

您不需要像在 GAC 中那样复制 System.Data。

更好的方法是在 web.config 文件中添加引用：

```
 <system.web>
    <compilation debug="true">
      <assemblies>
         <add assembly="System.Data, Version=2.0.0.0, Culture=neutral,
              PublicKeyToken=B77A5C561934E089" />
      </assemblies>
    </compilation>
  </system.web> 
```

当您说“没有要添加引用的项目”时，您使用的是 Visual Studio 吗？如果是这样，为什么不使用 Web 应用程序或网站项目？

# multithreading - 在 Delphi 中，OutputDebugString 线程安全吗？

> ID：509498
> 
> 赞同：16
> 
> 时间：2009-02-03T23:41:15.343
> 
> 标签：multithreading, delphi, delphi-7, outputdebugstring

是

```
OutputDebugString(PAnsiChar('')); 
```

线程安全吗？

我/我们一直在线程中使用它进行调试，我从来没有想过我应该以不同的方式来做。

（德尔福 7）

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2009-02-03T23:55:23.647

好吧，并不是说它不是真的，它是，但只是为了让你不必只接受 Lieven 的话：

> 应用程序和调试器之间的数据传递是通过一个 4kbyte 的共享内存块完成的，其中一个 Mutex 和两个 Event 对象保护对它的访问。这些是涉及的四个内核对象。

[了解 Win32 OutputDebugString](http://www.unixwiz.net/techtips/outputdebugstring.html)是一篇关于此事的优秀文章。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2009-02-03T23:43:11.610

别担心，它是。

> 当应用程序调用 OutputDebugString() 时，它会执行以下步骤。请注意，任何时候的失败都会放弃整个事情并将调试请求视为无操作（字符串不会发送到任何地方）。
> 
> 1.  打开 DBWinMutex 并等到我们拥有对它的独占访问权限。
> 2.  将 DBWIN_BUFFER 段映射到内存中：如果找不到，则说明没有调试器在运行，因此忽略整个请求。
> 3.  打开 DBWIN_BUFFER_READY 和 DBWIN_DATA_READY 事件。与共享内存段一样，缺少对象意味着没有可用的调试器。
> 4.  等待 DBWIN_BUFFER_READY 事件发出信号：这表示内存缓冲区不再使用。大多数情况下，这个事件会在被检查时立即发出信号，但等待缓冲区不会超过 10 秒（超时放弃请求）。
> 5.  将最多约 4kbytes 的数据复制到内存缓冲区，并将当前进程 ID 也存储在那里。始终在字符串末尾放置一个 NUL 字节。
> 6.  通过设置 DBWIN_DATA_READY 事件告诉调试器缓冲区已准备好。调试器从那里获取它。
> 7.  释放互斥锁
> 8.  关闭 Event 和 Section 对象，尽管我们保留互斥体的句柄以备后用。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-04-07T06:43:54.657

不过，我曾经遇到过 ISAPI DLL 中的字符串问题。由于某些奇怪的原因，未设置 System.pas 中定义的 IsMultiThread 布尔值！

一旦线程运行多个线程，就会导致奇怪的 AccessViolations ... 一个简单的“IsMultiThread:=true;” 在一个单元初始化中修复了它。

# sql - SQL 删除不存在的地方

> ID：509504
> 
> 赞同：6
> 
> 时间：2009-02-03T23:43:41.267
> 
> 标签：sql, sql-server

我有一个这样的关系映射表：

属性大整数
产品大整数

要清除不再使用的关系，我想删除 productid = x 且 attributeid 不在 (@includedIds) 中的所有记录，如下例所示：

```
@attributetypeid bigint, 
@productid bigint,
@includedids varchar(MAX)  

DELETE FROM reltable 
WHERE productid = @productid AND 
attributetypeid = @attributetypeid AND 
attributeid NOT IN (@includedids); 
```

当使用包含超过 1 个 id 的 includedids 参数运行 SQL 时 - 像这样：25,26 - 我得到一个 SqlException 说：

将数据类型 varchar 转换为 bigint 时出错。

这当然是由于 , 在那个 varchar(max) 参数中......

我应该如何构造我的删除语句以使其工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-02-04T00:13:46.637

```
 SET QUOTED_IDENTIFIER ON
  GO
  CREATE FUNCTION [dbo].[ListToTable] (
  /*
  FUNCTION ListToTable
  Usage: select entry from listtotable('abc,def,ghi') order by entry desc
  PURPOSE: Takes a comma-delimited list as a parameter and returns the values of that list into a table variable.
  */
  @mylist varchar(8000)
  )
  RETURNS @ListTable TABLE (
  seqid int not null,
  entry varchar(255) not null)

  AS

  BEGIN
      DECLARE 
          @this varchar(255), 
          @rest varchar(8000),
          @pos int,
          @seqid int

      SET @this = ' '
      SET @seqid = 1
      SET @rest = @mylist
      SET @pos = PATINDEX('%,%', @rest)
      WHILE (@pos > 0)
      BEGIN
          set @this=substring(@rest,1,@pos-1)
          set @rest=substring(@rest,@pos+1,len(@rest)-@pos)
          INSERT INTO @ListTable (seqid,entry)  VALUES (@seqid,@this)
          SET @pos= PATINDEX('%,%', @rest)
          SET @seqid=@seqid+1
      END
      set @this=@rest
      INSERT INTO @ListTable (seqid,entry) VALUES (@seqid,@this)
      RETURN 
  END 
```

在 SQL Server 数据库中运行该脚本以创建函数 ListToTable。现在，您可以像这样重写您的查询：

```
@attributetypeid bigint, 
@productid bigint,
@includedids varchar(MAX)  

DELETE FROM reltable 
WHERE productid = @productid AND 
attributetypeid = @attributetypeid AND 
attributeid NOT IN (SELECT entry FROM ListToTable(@includedids)); 
```

其中@includedids 是您提供的逗号分隔列表。我在处理列表时一直使用这个函数。请记住，此功能不一定会清理您的输入，它只是在逗号分隔列表中查找字符数据并将每个元素放入记录中。希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-03T23:47:46.593

Joel Spolsky 在这里回答了一个非常相似的问题：[Parameterize an SQL IN clause](https://stackoverflow.com/questions/337704/parameterizing-a-sql-in-clause/337817#337817)

您可以尝试类似的方法，确保将您的 attributetypeid 转换为 varchar。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-03T23:49:49.587

您不能将列表作为参数传递（AFAIK）。

您可以重写 sql 以使用子查询，如下所示：

```
delete from reltable
WHERE productid = @productid AND 
attributetypeid = @attributetypeid AND 
attributeid NOT IN (select id from ... where ... ); 
```

?

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-02-04T00:06:47.710

可以将该逗号分隔的列表发送到用户定义的函数，该函数将其作为简单表返回。然后您的 NOT IN 可以查询该表。如果您需要我可以提供的 fn.. 自从我大量使用 sql 以来已经有大约 5 年了，我将不得不掸掉我大脑的那个部分..

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-02-04T00:43:58.837

Erland 有在 SQL 2005 中处理表列表的权威[指南，SQL 2008 为您提供](http://www.sommarskog.se/arrays-in-sql-2005.html)[基于表的参数](http://www.builderau.com.au/program/sqlserver/soa/Passing-table-valued-parameters-in-SQL-Server-2008/0,339028455,339282577,00.htm)。

附带说明一下，对于大型列表，我会避免使用 NOT IN 模式，因为它不会缩放，而是考虑使用左连接。

# c# - 如何右对齐 StatusStrip 中的控件？

> ID：509508
> 
> 赞同：98
> 
> 时间：2009-02-03T23:44:32.340
> 
> 标签：c#, winforms, statusstrip

我正在尝试右对齐[`StatusStrip`](http://msdn.microsoft.com/en-us/library/system.windows.forms.statusstrip.aspx). 我怎样才能做到这一点？

我没有看到要在`ToolStripItem`控件上设置的属性，该属性指定它们在 parent 上的物理对齐方式`StatusStrip`。

[如何让消息下拉右对齐？http://i.friendfeed.com/ed90b205f64099687db30553daa79d075f280b90](http://i.friendfeed.com/ed90b205f64099687db30553daa79d075f280b90)

* * *

## 回答 #1

> 赞同：241
> 
> 时间：2009-02-03T23:47:28.373

发布后几乎立即通过 MSDN 论坛找到它:)

您可以通过将属性设置为并将属性设置为 来使用[`ToolStripLabel`](http://msdn.microsoft.com/en-us/library/system.windows.forms.toolstripstatuslabel.aspx)伪右对齐控件。这将导致它填满所有可用空间并将所有控件推到右侧。`Text``string.Empty``Spring``true`[`ToolStripLabel`](http://msdn.microsoft.com/en-us/library/system.windows.forms.toolstripstatuslabel.aspx)

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2018-09-11T15:02:17.880

对我来说，它采取了两个简单的步骤：

1.  设置`MyRightIntendedToolStripItem.Alignment`为`Right`
2.  设置`MyStatusStrip.LayoutStyle`为`HorizontalStackWithOverflow`

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-02-04T00:03:21.447

作为补充说明，这是因为在 Win32 API 中，单元格要么是固定宽度，要么是填充剩余空间 -1

```
int statwidths[] = {100, -1};

SendMessage(hStatus, SB_SETPARTS, sizeof(statwidths)/sizeof(int), (LPARAM)statwidths);
SendMessage(hStatus, SB_SETTEXT, 0, (LPARAM)"Hi there :)"); 
```

如果我没记错的话，每个状态栏只能有一个填充单元格 (-1)。

您还可以添加第三个中间单元格并为其赋予填充属性以获得更一致的状态栏。一致，因为 Messages 在您所期望的左侧右侧有一个插图。[有点像在MSDN 页面上](http://msdn.microsoft.com/en-us/library/bb760728(VS.85).aspx#Size_and_Height)找到的 StatusBars 的 mspaint 镜头

不过，我喜欢创造性的方法：D

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-09-16T13:22:28.667

您可以使用以下逻辑`Button`在末尾显示 。`StatusStrip`

1.  添加一个`ToolstripLabel`到`StatusStrip`
2.  将文本设置为`string.Empty`
3.  设置`Padding`为`ToolstripLabel`

例如：

```
this.toolStripStatusLabel1.Padding = new Padding((int)(this.Size.Width - 75), 0, 0, 0); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-04-18T14:23:20.253

保留一个工具条标签，将 Spring 属性设置为 true 并在 BottomLeft 中为标签对齐文本

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-10-21T15:57:47.637

我发现您可以将 StatusStrip 布局设置为 Horizo​​ntalStackWithOverflow。然后，对于要在右侧的 StatusStrip 上的每个控件，将控件对齐设置为右。

我更喜欢这个，因为您不需要任何额外或虚拟控件来对齐。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-08-29T13:08:29.073

如果将状态条标签控件的 Spring 属性设置为 true，则该标签会占用 StatusStrip 中其他控件未使用的任何空间。

* * *

## 回答 #8

> 赞同：-3
> 
> 时间：2016-05-09T17:50:58.437

将 RightToLeft 工具条属性设置为 True。

# windows - Windows Server 故障转储分析

> ID：509514
> 
> 赞同：0
> 
> 时间：2009-02-03T23:47:54.690
> 
> 标签：windows, crash-dumps

我不确定这是回答这个问题的正确地点，但我的一个程序员朋友说我应该在这里试试这个。

我公司的主要应用程序托管在运行 Windows Server 2008 的终端服务器上。自上周四以来，我们已经看到这台服务器崩溃并重新启动了 3 次，而我们刚刚在上周二启用了这台服务器。我已经使用 WinDbg 程序来分析故障转储文件，但此时我的深度有点超出预期，我希望有人可以帮助我解决这个问题。

在我看来有问题的应用程序是 winoac.exe，它是 SmartWare 4.5 (www.smartware4.com) 的可执行文件。这是我们的应用程序运行的平台。如果这个应用程序有问题，除了向 SmartWare 投诉外，我能做些什么吗？

感谢任何可以提供帮助的人一百万。

以下是分析结果。

```
Microsoft (R) Windows Debugger Version 6.10.0003.233 X86
Copyright (c) Microsoft Corporation. All rights reserved.

Loading Dump File [C:\Users\esinnard\Desktop\Windows Dumps\1-29-09\MEMORY.DMP]
Kernel Summary Dump File: Only kernel address space is available

Symbol search path is: SRV*C:\ProgramData\Symbols*http://msdl.microsoft.com/download/symbols
Executable search path is: 
Windows Server 2008/Windows Vista SP1 Kernel Version 6001 (Service Pack 1) MP (8 procs) Free x86 compatible
Product: Server, suite: TerminalServer
Built by: 6001.18145.x86fre.vistasp1_gdr.080917-1612
Machine Name:
Kernel base = 0x81c41000 PsLoadedModuleList = 0x81d4e930
Debug session time: Thu Jan 29 12:49:43.870 2009 (GMT-6)
System Uptime: 0 days 11:18:08.929
Loading Kernel Symbols
...............................................................
................................................................
..............
Loading User Symbols
PEB is paged out (Peb.Ldr = 7ffd400c).  Type ".hh dbgerr001" for details
Loading unloaded module list
.....
*******************************************************************************
*                                                                             *
*                        Bugcheck Analysis                                    *
*                                                                             *
*******************************************************************************

Use !analyze -v to get detailed debugging information.

BugCheck 8E, {c0000005, 81c88043, 9cef0840, 0}

Page bd1f2 not present in the dump file. Type ".hh dbgerr004" for details
Page bc9c3 not present in the dump file. Type ".hh dbgerr004" for details
PEB is paged out (Peb.Ldr = 7ffd400c).  Type ".hh dbgerr001" for details
PEB is paged out (Peb.Ldr = 7ffd400c).  Type ".hh dbgerr001" for details
Probably caused by : RDPDD.dll ( RDPDD!OE2_TableEncodeOrderFields+11e )

Followup: MachineOwner
---------

7: kd> !analyze -v
*******************************************************************************
*                                                                             *
*                        Bugcheck Analysis                                    *
*                                                                             *
*******************************************************************************

KERNEL_MODE_EXCEPTION_NOT_HANDLED (8e)
This is a very common bugcheck.  Usually the exception address pinpoints
the driver/function that caused the problem.  Always note this address
as well as the link date of the driver/image that contains this address.
Some common problems are exception code 0x80000003\.  This means a hard
coded breakpoint or assertion was hit, but this system was booted
/NODEBUG.  This is not supposed to happen as developers should never have
hardcoded breakpoints in retail code, but ...
If this happens, make sure a debugger gets connected, and the
system is booted /DEBUG.  This will let us see why this breakpoint is
happening.
Arguments:
Arg1: c0000005, The exception code that was not handled
Arg2: 81c88043, The address that the exception occurred at
Arg3: 9cef0840, Trap Frame
Arg4: 00000000

Debugging Details:
------------------

PEB is paged out (Peb.Ldr = 7ffd400c).  Type ".hh dbgerr001" for details
PEB is paged out (Peb.Ldr = 7ffd400c).  Type ".hh dbgerr001" for details

EXCEPTION_CODE: (NTSTATUS) 0xc0000005 - The instruction at 0x%08lx referenced memory at 0x%08lx. The memory could not be %s.

FAULTING_IP: 
nt!RtlInitUnicodeString+1b
81c88043 f266af          repne scas word ptr es:[edi]

TRAP_FRAME:  9cef0840 -- (.trap 0xffffffff9cef0840)
ErrCode = 00000000
eax=00000000 ebx=fe414fd8 ecx=ffffffec edx=9cef0914 esi=fe40fcf0 edi=fe415000
eip=81c88043 esp=9cef08b4 ebp=9cef0924 iopl=0         nv up ei pl zr na pe nc
cs=0008  ss=0010  ds=0023  es=0023  fs=0030  gs=0000             efl=00010246
nt!RtlInitUnicodeString+0x1b:
81c88043 f266af          repne scas word ptr es:[edi]
Resetting default scope

DEFAULT_BUCKET_ID:  VISTA_DRIVER_FAULT

BUGCHECK_STR:  0x8E

PROCESS_NAME:  WINOAC.EXE

CURRENT_IRQL:  0

LAST_CONTROL_TRANSFER:  from 81c72fbe to 81cfc759

STACK_TEXT:  
9cef0400 81c72fbe 0000008e c0000005 81c88043 nt!KeBugCheckEx+0x1e
9cef07d0 81c9953a 9cef07ec 00000000 9cef0840 nt!KiDispatchException+0x1a9
9cef0838 81c994ee 9cef0924 81c88043 badb0d00 nt!CommonDispatchException+0x4a
9cef085c 9976011a 99771680 997708e8 00000000 nt!Kei386EoiHelper+0x186
9cef0924 9959efab 5d0102bb 00000006 00000002 RDPDD!OE2_TableEncodeOrderFields+0x11e
9cef0a0c 995aeaf8 5d0102bb 00000006 00000002 win32k!xxxRealDrawMenuItem+0x80b
9cef0abc 9958455b 5d0102bb 0110007e 9cef0b04 win32k!xxxDrawState+0x1c9
9cef0b2c 995853e1 5d0102bb fe40fc78 00c8d0d4 win32k!xxxDrawMenuItem+0x3f8
9cef0b98 9959f511 5d0102bb 00000000 fe414570 win32k!xxxMenuDraw+0x1f2
9cef0bf0 994ed1d6 00000017 5d0102bb 00000004 win32k!xxxMenuBarDraw+0x1bf
9cef0c38 9950c0f5 fe414570 5d0102bb 00000001 win32k!xxxDrawWindowFrame+0xf7
9cef0cb4 9950d73d fe414570 00000085 090402df win32k!xxxRealDefWindowProc+0x88b
9cef0ccc 994e673d fe414570 00000085 090402df win32k!xxxWrapRealDefWindowProc+0x2b
9cef0ce8 9950d6f4 fe414570 00000085 090402df win32k!NtUserfnNCDESTROY+0x27
9cef0d20 81c9897a 000200ba 00000085 090402df win32k!NtUserMessageCall+0xc6
9cef0d20 77089a94 000200ba 00000085 090402df nt!KiFastCallEntry+0x12a
WARNING: Frame IP not in any known module. Following frames may be wrong.
0012d7cc 00000000 00000000 00000000 00000000 0x77089a94

STACK_COMMAND:  kb

FOLLOWUP_IP: 
RDPDD!OE2_TableEncodeOrderFields+11e
9976011a 8b4518          mov     eax,dword ptr [ebp+18h]

SYMBOL_STACK_INDEX:  4

SYMBOL_NAME:  RDPDD!OE2_TableEncodeOrderFields+11e

FOLLOWUP_NAME:  MachineOwner

MODULE_NAME: RDPDD

IMAGE_NAME:  RDPDD.dll

DEBUG_FLR_IMAGE_TIMESTAMP:  4791923e

FAILURE_BUCKET_ID:  0x8E_RDPDD!OE2_TableEncodeOrderFields+11e

BUCKET_ID:  0x8E_RDPDD!OE2_TableEncodeOrderFields+11e

Followup: MachineOwner
---------

------------------------------------------------------------------------------------------

Microsoft (R) Windows Debugger Version 6.10.0003.233 X86
Copyright (c) Microsoft Corporation. All rights reserved.

Loading Dump File [C:\Users\esinnard\Desktop\Windows Dumps\1-29-09\MEMORY.DMP]
Kernel Summary Dump File: Only kernel address space is available

Symbol search path is: SRV*C:\ProgramData\Symbols*http://msdl.microsoft.com/download/symbols
Executable search path is: 
Windows Server 2008/Windows Vista SP1 Kernel Version 6001 (Service Pack 1) MP (8 procs) Free x86 compatible
Product: Server, suite: TerminalServer
Built by: 6001.18145.x86fre.vistasp1_gdr.080917-1612
Machine Name:
Kernel base = 0x81c41000 PsLoadedModuleList = 0x81d4e930
Debug session time: Thu Jan 29 12:49:43.870 2009 (GMT-6)
System Uptime: 0 days 11:18:08.929
Loading Kernel Symbols
...............................................................
................................................................
..............
Loading User Symbols
PEB is paged out (Peb.Ldr = 7ffd400c).  Type ".hh dbgerr001" for details
Loading unloaded module list
.....
*******************************************************************************
*                                                                             *
*                        Bugcheck Analysis                                    *
*                                                                             *
*******************************************************************************

Use !analyze -v to get detailed debugging information.

BugCheck 8E, {c0000005, 81c88043, 9cef0840, 0}

Page bd1f2 not present in the dump file. Type ".hh dbgerr004" for details
Page bc9c3 not present in the dump file. Type ".hh dbgerr004" for details
PEB is paged out (Peb.Ldr = 7ffd400c).  Type ".hh dbgerr001" for details
PEB is paged out (Peb.Ldr = 7ffd400c).  Type ".hh dbgerr001" for details
Probably caused by : RDPDD.dll ( RDPDD!OE2_TableEncodeOrderFields+11e )

Followup: MachineOwner
---------

7: kd> !analyze -v
*******************************************************************************
*                                                                             *
*                        Bugcheck Analysis                                    *
*                                                                             *
*******************************************************************************

KERNEL_MODE_EXCEPTION_NOT_HANDLED (8e)
This is a very common bugcheck.  Usually the exception address pinpoints
the driver/function that caused the problem.  Always note this address
as well as the link date of the driver/image that contains this address.
Some common problems are exception code 0x80000003\.  This means a hard
coded breakpoint or assertion was hit, but this system was booted
/NODEBUG.  This is not supposed to happen as developers should never have
hardcoded breakpoints in retail code, but ...
If this happens, make sure a debugger gets connected, and the
system is booted /DEBUG.  This will let us see why this breakpoint is
happening.
Arguments:
Arg1: c0000005, The exception code that was not handled
Arg2: 81c88043, The address that the exception occurred at
Arg3: 9cef0840, Trap Frame
Arg4: 00000000

Debugging Details:
------------------

PEB is paged out (Peb.Ldr = 7ffd400c).  Type ".hh dbgerr001" for details
PEB is paged out (Peb.Ldr = 7ffd400c).  Type ".hh dbgerr001" for details

EXCEPTION_CODE: (NTSTATUS) 0xc0000005 - The instruction at 0x%08lx referenced memory at 0x%08lx. The memory could not be %s.

FAULTING_IP: 
nt!RtlInitUnicodeString+1b
81c88043 f266af          repne scas word ptr es:[edi]

TRAP_FRAME:  9cef0840 -- (.trap 0xffffffff9cef0840)
ErrCode = 00000000
eax=00000000 ebx=fe414fd8 ecx=ffffffec edx=9cef0914 esi=fe40fcf0 edi=fe415000
eip=81c88043 esp=9cef08b4 ebp=9cef0924 iopl=0         nv up ei pl zr na pe nc
cs=0008  ss=0010  ds=0023  es=0023  fs=0030  gs=0000             efl=00010246
nt!RtlInitUnicodeString+0x1b:
81c88043 f266af          repne scas word ptr es:[edi]
Resetting default scope

DEFAULT_BUCKET_ID:  VISTA_DRIVER_FAULT

BUGCHECK_STR:  0x8E

PROCESS_NAME:  WINOAC.EXE

CURRENT_IRQL:  0

LAST_CONTROL_TRANSFER:  from 81c72fbe to 81cfc759

STACK_TEXT:  
9cef0400 81c72fbe 0000008e c0000005 81c88043 nt!KeBugCheckEx+0x1e
9cef07d0 81c9953a 9cef07ec 00000000 9cef0840 nt!KiDispatchException+0x1a9
9cef0838 81c994ee 9cef0924 81c88043 badb0d00 nt!CommonDispatchException+0x4a
9cef085c 9976011a 99771680 997708e8 00000000 nt!Kei386EoiHelper+0x186
9cef0924 9959efab 5d0102bb 00000006 00000002 RDPDD!OE2_TableEncodeOrderFields+0x11e
9cef0a0c 995aeaf8 5d0102bb 00000006 00000002 win32k!xxxRealDrawMenuItem+0x80b
9cef0abc 9958455b 5d0102bb 0110007e 9cef0b04 win32k!xxxDrawState+0x1c9
9cef0b2c 995853e1 5d0102bb fe40fc78 00c8d0d4 win32k!xxxDrawMenuItem+0x3f8
9cef0b98 9959f511 5d0102bb 00000000 fe414570 win32k!xxxMenuDraw+0x1f2
9cef0bf0 994ed1d6 00000017 5d0102bb 00000004 win32k!xxxMenuBarDraw+0x1bf
9cef0c38 9950c0f5 fe414570 5d0102bb 00000001 win32k!xxxDrawWindowFrame+0xf7
9cef0cb4 9950d73d fe414570 00000085 090402df win32k!xxxRealDefWindowProc+0x88b
9cef0ccc 994e673d fe414570 00000085 090402df win32k!xxxWrapRealDefWindowProc+0x2b
9cef0ce8 9950d6f4 fe414570 00000085 090402df win32k!NtUserfnNCDESTROY+0x27
9cef0d20 81c9897a 000200ba 00000085 090402df win32k!NtUserMessageCall+0xc6
9cef0d20 77089a94 000200ba 00000085 090402df nt!KiFastCallEntry+0x12a
WARNING: Frame IP not in any known module. Following frames may be wrong.
0012d7cc 00000000 00000000 00000000 00000000 0x77089a94

STACK_COMMAND:  kb

FOLLOWUP_IP: 
RDPDD!OE2_TableEncodeOrderFields+11e
9976011a 8b4518          mov     eax,dword ptr [ebp+18h]

SYMBOL_STACK_INDEX:  4

SYMBOL_NAME:  RDPDD!OE2_TableEncodeOrderFields+11e

FOLLOWUP_NAME:  MachineOwner

MODULE_NAME: RDPDD

IMAGE_NAME:  RDPDD.dll

DEBUG_FLR_IMAGE_TIMESTAMP:  4791923e

FAILURE_BUCKET_ID:  0x8E_RDPDD!OE2_TableEncodeOrderFields+11e

BUCKET_ID:  0x8E_RDPDD!OE2_TableEncodeOrderFields+11e

Followup: MachineOwner
---------

------------------------------------------------------------------------------------------

Microsoft (R) Windows Debugger Version 6.10.0003.233 X86
Copyright (c) Microsoft Corporation. All rights reserved.

Loading Dump File [C:\Users\esinnard\Desktop\Windows Dumps\2-3-09-2\MEMORY.DMP]
Kernel Summary Dump File: Only kernel address space is available

Symbol search path is: SRV*C:\ProgramData\Symbols*http://msdl.microsoft.com/download/symbols
Executable search path is: 
Windows Server 2008/Windows Vista SP1 Kernel Version 6001 (Service Pack 1) MP (8 procs) Free x86 compatible
Product: Server, suite: TerminalServer
Built by: 6001.18145.x86fre.vistasp1_gdr.080917-1612
Machine Name:
Kernel base = 0x81c13000 PsLoadedModuleList = 0x81d20930
Debug session time: Tue Feb  3 14:20:03.117 2009 (GMT-6)
System Uptime: 0 days 2:00:33.869
Loading Kernel Symbols
...............................................................
................................................................
.............
Loading User Symbols
PEB is paged out (Peb.Ldr = 7ffdc00c).  Type ".hh dbgerr001" for details
Loading unloaded module list
.....
*******************************************************************************
*                                                                             *
*                        Bugcheck Analysis                                    *
*                                                                             *
*******************************************************************************

Use !analyze -v to get detailed debugging information.

BugCheck 8E, {c0000005, 81c5a043, d60a5840, 0}

Page bce51 not present in the dump file. Type ".hh dbgerr004" for details
Page bce22 not present in the dump file. Type ".hh dbgerr004" for details
Page bb16b not present in the dump file. Type ".hh dbgerr004" for details
Page bce5a not present in the dump file. Type ".hh dbgerr004" for details
Page bce5a not present in the dump file. Type ".hh dbgerr004" for details
Page bce5a not present in the dump file. Type ".hh dbgerr004" for details
PEB is paged out (Peb.Ldr = 7ffdc00c).  Type ".hh dbgerr001" for details
PEB is paged out (Peb.Ldr = 7ffdc00c).  Type ".hh dbgerr001" for details
Probably caused by : win32k.sys ( win32k!OffBitBlt+97 )

Followup: MachineOwner
---------

0: kd> !analyze -v
*******************************************************************************
*                                                                             *
*                        Bugcheck Analysis                                    *
*                                                                             *
*******************************************************************************

KERNEL_MODE_EXCEPTION_NOT_HANDLED (8e)
This is a very common bugcheck.  Usually the exception address pinpoints
the driver/function that caused the problem.  Always note this address
as well as the link date of the driver/image that contains this address.
Some common problems are exception code 0x80000003\.  This means a hard
coded breakpoint or assertion was hit, but this system was booted
/NODEBUG.  This is not supposed to happen as developers should never have
hardcoded breakpoints in retail code, but ...
If this happens, make sure a debugger gets connected, and the
system is booted /DEBUG.  This will let us see why this breakpoint is
happening.
Arguments:
Arg1: c0000005, The exception code that was not handled
Arg2: 81c5a043, The address that the exception occurred at
Arg3: d60a5840, Trap Frame
Arg4: 00000000

Debugging Details:
------------------

Page bb16b not present in the dump file. Type ".hh dbgerr004" for details
Page bce5a not present in the dump file. Type ".hh dbgerr004" for details
Page bce5a not present in the dump file. Type ".hh dbgerr004" for details
Page bce5a not present in the dump file. Type ".hh dbgerr004" for details
PEB is paged out (Peb.Ldr = 7ffdc00c).  Type ".hh dbgerr001" for details
PEB is paged out (Peb.Ldr = 7ffdc00c).  Type ".hh dbgerr001" for details

EXCEPTION_CODE: (NTSTATUS) 0xc0000005 - The instruction at 0x%08lx referenced memory at 0x%08lx. The memory could not be %s.

FAULTING_IP: 
nt!RtlInitUnicodeString+1b
81c5a043 f266af          repne scas word ptr es:[edi]

TRAP_FRAME:  d60a5840 -- (.trap 0xffffffffd60a5840)
ErrCode = 00000000
eax=00000000 ebx=fe41afd8 ecx=ffffffec edx=d60a5914 esi=fe40f5e0 edi=fe41b000
eip=81c5a043 esp=d60a58b4 ebp=d60a5924 iopl=0         nv up ei pl zr na pe nc
cs=0008  ss=0010  ds=0023  es=0023  fs=0030  gs=0000             efl=00010246
nt!RtlInitUnicodeString+0x1b:
81c5a043 f266af          repne scas word ptr es:[edi]
Resetting default scope

DEFAULT_BUCKET_ID:  VISTA_DRIVER_FAULT

BUGCHECK_STR:  0x8E

PROCESS_NAME:  WINOAC.EXE

CURRENT_IRQL:  0

LAST_CONTROL_TRANSFER:  from 81c44fbe to 81cce759

STACK_TEXT:  
d60a5400 81c44fbe 0000008e c0000005 81c5a043 nt!KeBugCheckEx+0x1e
d60a57d0 81c6b53a d60a57ec 00000000 d60a5840 nt!KiDispatchException+0x1a9
d60a5838 81c6b4ee d60a5924 81c5a043 badb0d00 nt!CommonDispatchException+0x4a
d60a585c 999e2242 ff888010 00000000 00000000 nt!Kei386EoiHelper+0x186
d60a5924 999befab 1401009b 00000006 00000002 win32k!OffBitBlt+0x97
d60a5a0c 999ceaf8 1401009b 00000006 00000002 win32k!xxxRealDrawMenuItem+0x80b
d60a5abc 999a455b 1401009b 0110007e d60a5b04 win32k!xxxDrawState+0x1c9
d60a5b2c 999a53e1 1401009b fe40d168 00c8d0d4 win32k!xxxDrawMenuItem+0x3f8
d60a5b98 999bf511 1401009b 00000000 fe418398 win32k!xxxMenuDraw+0x1f2
d60a5bf0 9990d1d6 00000017 1401009b 00000004 win32k!xxxMenuBarDraw+0x1bf
d60a5c38 9992c0f5 fe418398 1401009b 00000001 win32k!xxxDrawWindowFrame+0xf7
d60a5cb4 9992d73d fe418398 00000085 0904035f win32k!xxxRealDefWindowProc+0x88b
d60a5ccc 9990673d fe418398 00000085 0904035f win32k!xxxWrapRealDefWindowProc+0x2b
d60a5ce8 9992d6f4 fe418398 00000085 0904035f win32k!NtUserfnNCDESTROY+0x27
d60a5d20 81c6a97a 0003001c 00000085 0904035f win32k!NtUserMessageCall+0xc6
d60a5d20 77049a94 0003001c 00000085 0904035f nt!KiFastCallEntry+0x12a
WARNING: Frame IP not in any known module. Following frames may be wrong.
0012d7cc 00000000 00000000 00000000 00000000 0x77049a94

STACK_COMMAND:  kb

FOLLOWUP_IP: 
win32k!OffBitBlt+97
999e2242 8b4d20          mov     ecx,dword ptr [ebp+20h]

SYMBOL_STACK_INDEX:  4

SYMBOL_NAME:  win32k!OffBitBlt+97

FOLLOWUP_NAME:  MachineOwner

MODULE_NAME: win32k

IMAGE_NAME:  win32k.sys

DEBUG_FLR_IMAGE_TIMESTAMP:  48d1b9ef

FAILURE_BUCKET_ID:  0x8E_win32k!OffBitBlt+97

BUCKET_ID:  0x8E_win32k!OffBitBlt+97

Followup: MachineOwner
--------- 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-04T00:00:54.523

您应该为可能存在的操作系统应用任何补丁（特别是如果他们提到它们与终端服务器或 RDP 相关）。您还应该联系 Microsoft 支持。

崩溃转储看起来像是在 RDP 驱动程序中发生了崩溃。

即使`winoac.exe`应用程序将错误数据传递给导致崩溃的 win32k.sys（显示子系统），设备驱动程序也不应该让系统崩溃——它们应该检测并适当地处理问题，即使这意味着应用程序崩溃。驱动程序永远不会崩溃，因此 MS 应该对此感兴趣，以便他们可以修复它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-05T08:18:38.450

除非 Smartware 开发了自己的驱动程序，否则用户模式应用程序永远不可能蓝屏 Windows NT 服务器。

因此，忽略所有这些信息，您要么查看有问题的设备驱动程序 - 步骤 1 - 查找并安装系统上驱动程序的任何更新，要么硬件开始出现故障。当他们依赖的实际硬件出现故障时，即使是无错误的驱动程序也可能需要进行错误检查。

win32k.sys 是 win32 子系统的内核驱动程序端，而不是专门的显示驱动程序。然而，调用堆栈确实暗示与绘图相关的某些东西崩溃了，因此，也许从更新系统视频驱动程序开始 - 或者如果它没有板载则更换视频卡可能会有所帮助。

# security - 创建并发布安全公告

> ID：509519
> 
> 赞同：0
> 
> 时间：2009-02-03T23:50:37.353
> 
> 标签：security, publishing

这个问题来自我对以下问题的经验：[https ://stackoverflow.com/questions/492748/new-responses-icon-on-so-crashes-ie7-closed](https://stackoverflow.com/questions/492748/new-responses-icon-on-so-crashes-ie7-closed)

在那个问题中，您将看到我在 IE 中调试此崩溃时所做的第四次努力，并且通过这样做，我可以看到利用和远程代码执行的潜在威胁。

所以，既然我已经花时间了，我想知道是否有人知道一个人必须采取的所有步骤和正确的流程/程序才能真正发布真正的安全咨询？我从来没有做过，几次快速搜索并没有找到关于这个主题的任何内容。

我发布问题已经一周了，所以这个漏洞已经长出了霉菌，但我还没有看到它得到解决，所以威胁仍然存在。

如果你以前做过这种事情，你愿意帮助别人吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-02-03T23:56:27.480

第一步是联系供应商。

一个快速的 google 显示了[这个页面](http://www.microsoft.com/technet/security/bulletin/alertus.aspx)，如果你点击“我需要向 Microsoft 报告一个可能的安全漏洞”，它会指示你发送邮件到 secure[at]microsoft.com。老实说，我会试一试。

请注意，在最初的“谢谢”邮件之后，您可能会或可能不会收到他们的任何回复，直到他们对问题的严重性和紧迫性做出决定，或者甚至直到您看到自己的计算机上弹出更新通知。

# apache-flex - Flex VideoDisplay 文本质量

> ID：509522
> 
> 赞同：0
> 
> 时间：2009-02-03T23:53:34.897
> 
> 标签：apache-flex, flash, video

我正在尝试在 flex 应用程序中显示任意 mp4 视频。通常视频上有文字。

有时，当我必须缩小视频（在客户端尺寸高度或宽度小于 videoHeight 或 videoWidth 时）保持纵横比时，Flash Player 会使文本看起来模糊。

有没有办法告诉 Flash 更准确地处理缩放？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-02-04T00:15:22.437

不知道这是否可行，但是：您可以尝试[在 VideoDisplay 上启用平滑](http://www.adobe.com/cfusion/communityengine/index.cfm?event=showdetails&productId=2&postId=3561)

# css - 无法使用 CSS 设置文本区域宽度

> ID：509529
> 
> 赞同：25
> 
> 时间：2009-02-03T23:56:30.680
> 
> 标签：css

我试图使用这个 CSS 来设置我的表单元素的宽度：

```
input[type="text"], textarea { width:250px; } 
```

如果您查看此 Firefox 屏幕截图，您会发现这些字段的宽度不同。我在 Safari 中得到了类似的效果。

[替代文字 http://screamingv.com/ss.png](http://screamingv.com/ss.png)

有什么解决方法吗？

更新：感谢您提供的信息。我现在确保两个元素上的填充/边距/边框设置相同。我仍然遇到问题。我发布的原始 CSS 被简化了......我还将 textarea 的高度设置为 200px。当我删除高度样式时，宽度匹配。奇怪的。这是没有意义的。

浏览器漏洞？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2009-02-04T01:09:27.193

尝试删除填充和边框。或者尝试使它们对两个元素都相同

```
input[type="text"],
textarea {
    width:250px;
    padding: 3px;
    border: none;
    } 
```

或者：

```
input[type="text"],
textarea {
    width:250px;
    padding: 0;
    border: 1px solid #ccc;
    } 
```

INPUT 和 TEXTAREA 元素通常有一些由浏览器应用的填充（因浏览器而异），这可以使事物看起来比指定的宽度更宽。

更新：也是`box-sizing: border-box;`一种方便的方法来设置填充和边框将占用而不是添加到的宽度。见： http: [//www.paulirish.com/2012/box-sizing-border-box-ftw/](http://www.paulirish.com/2012/box-sizing-border-box-ftw/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-06T11:45:34.393

这个答案晚了三年，但我在这里发布它以防万一其他人试图设置宽度`em's`而不是`pixels`遇到这个帖子（就像我刚刚做的那样）。确保字体大小相同，

例如

```
input, textarea {
    font-size:12px; 
    width:20em; 
    padding:0; 
    margin:0 
} 
```

否则文本区域的大小可能不同（FF12 上为真）。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-02-04T00:08:07.443

尝试边框：0；或边框：1px 实心#000；

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-02-04T00:08:52.277

这可能是由`<input>`和`<textarea>`元素的不同默认边距引起的。尝试使用这样的东西。

```
input[type="text"], textarea { 
    padding: 0;
    margin: 0;
    width:250px; 
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-08-29T06:31:52.703

我也在努力解决这种问题，这个问题是我谷歌搜索的第一个结果。最终对我有用的是设置`box-sizing: content-box`textarea - Drupal 7 默认设置为`border-box`这会导致从 textarea 的大小中减去填充和边框宽度。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-08-30T07:55:49.033

设置宽度 100%，然后使用最大宽度：

```
 textarea { 
          width:100%;
          max-width:250px;
     } 
```

// 移除边距和内边距，如果需要，可以添加。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-02-04T00:07:54.587

也许您在浏览器中的某处定义了用户特定的 css 覆盖，因为我刚刚对其进行了测试并且它按预期工作：http: [//jsbin.com/exase/edit](http://jsbin.com/exase/edit) （在 Windows 上测试。也许 Apple 原生小部件有一些怪癖？）

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2018-05-13T06:22:01.500

你可以使用：

```
input[type="text"], textarea { 
    -moz-box-sizing: border-box;
    -ms-box-sizing: border-box;
    -webkit-box-sizing: border-box;
    box-sizing: border-box;
} 
```

# csv - 我可以在 C++ Builder 中使用像（MSsql 或 mysql 或 BDE 数据库）这样的 CSV 文件吗？

> ID：509530
> 
> 赞同：2
> 
> 时间：2009-02-03T23:57:02.957
> 
> 标签：csv, c++builder

如果这个问题不是很具体，我提前道歉。

是否可以执行以下操作。

**当应用程序加载时**

将 CSV 文件的内容读入数据集。

**在应用程序运行时**

对该数据集进行操作，就像它是 mysql 或 mssql 或 bde 数据库一样（运行查询。插入记录。删除记录。更改记录。）

**当应用程序关闭时**- 将数据集写回 csv 文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-02-04T00:01:19.140

您可以将文件加载到 TClientDataset 中，对数据集进行操作并将更改应用回文件。

# c# - VB.Net 和 C#“作为新的 WebControl”之间的区别

> ID：509541
> 
> 赞同：2
> 
> 时间：2009-02-04T00:00:40.000
> 
> 标签：c#, .net, asp.net, vb.net, clr

我正在重构一些代码，其中一部分包括将其从 VB.Net 移动到 C#。

旧代码声明了这样的成员：

```
Protected viewMode As New WebControl 
```

新代码，我最终开始工作了，像这样：

```
protected WebControl _viewMode = new WebControl(HtmlTextWriterTag.Span); 
```

我可以假设`New`关键字的意思是：调用构造函数！但是 VB.Net 是如何调用我无法在 C# 中调用的构造函数（无参数构造函数）的？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-02-04T00:28:42.347

这在 VB 中而不是在 C# 中有效的原因与程序集无关。

WebControl 的默认构造函数受到保护。

VB 和 C# 对“受保护”的含义有不同的解释。

在 VB 中，您可以从派生自该类的任何类型的任何方法访问该类的受保护成员。

也就是说，VB 允许编译这段代码：

```
class Base
    protected m_x as integer
end class

class Derived1
    inherits Base
    public sub Foo(other as Base)
        other.m_x = 2
    end sub
end class

class Derived2
    inherits Base
end class 
```

因为“Derived1”是一个基，它可以访问“other”的受保护成员，它也是一个基。

C# 采取不同的观点。它不允许 VB 进行的“横向”访问。它说可以通过“this”或与包含该方法的类相同类型的任何对象来访问受保护的成员。

因为这里的“Foo”是在“Derived1”中定义的，所以C#将只允许“Foo”从“Derived1”实例访问“Base”成员。“其他”可能不是“Derived1”（例如，它可能是“Derived2”），因此它不允许访问“m_x”。

在您的代码的这种情况下，VB 允许“横向”访问“WebControl”构造函数。

然而，C# 没有。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-02-04T00:03:36.610

WebControl 的默认构造函数（隐含在 VB 行中）是使用跨度。您可以在 c# 和 VB.NET 中调用该构造函数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2010-12-03T10:24:12.863

在任何上下文中从派生类访问继承的受保护构造函数都会引发数据封装问题。

从历史上看，C# 从第一个版本开始就允许这种访问。但它在 VS 2005 中得到了修复。派生类现在只能从它们自己的构造函数中调用它们的基本受保护构造函数。

```
class Base
{
    protected Base()
    {
    }
}

class Derived : Base
{
    public Derived() : base() // Still allowed in VS 2005
    {
    }

    public void Main()
    {
        Base b = new Base(); // Allowed in VS 2003, but error in VS 2005
    }
} 
```

在 VB.NET 中，您可以通过两种方式初始化变量。首先是赋值运算符，然后是声明；第二个是“As New”声明。

在受保护的构造函数的情况下，“As New”总是可以正常工作。至于通过赋值进行初始化，它会引发编译错误。但是如果你在基类中有多个构造函数，赋值初始化也会起作用！

```
Class Base
    Protected Sub New()
    End Sub
End Class

Class Derived
    Inherits Base

    Public Sub Main()
        Dim foo As New Base // Allowed
        Dim moo As Base = New Base() // Error if Base has only one constructor
    End Sub
End Class 
```

VB.NET 允许这种访问的原因可能是与遗留代码的兼容性。

更多详情：http: [//blogs.msdn.com/b/peterhal/archive/2005/06/29/434070.aspx](http://blogs.msdn.com/b/peterhal/archive/2005/06/29/434070.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-30T02:35:16.737

Webcontrol wc = *tab* ;

# java - 如何从 Java 发送一封将在 Outlook 中自动过期的电子邮件？

> ID：509551
> 
> 赞同：2
> 
> 时间：2009-02-04T00:04:28.760
> 
> 标签：java, email, outlook

我熟悉从 Java 程序发送电子邮件。是否可以配置电子邮件以便 Outlook 识别它应该在特定时间过期？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-02-04T00:18:50.650

我相信 Outlook 尊重现已弃用的 Expiry-Date 标头。您可以将其添加到 MimeMessage 标头。值的格式是`"EEE, d MMM yyyy hh:mm:ss Z"`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-02-04T00:13:04.640

添加“到期日期”标头（参见[RFC1327](http://tools.ietf.org/rfc/rfc1327.txt)）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-05T18:44:33.693

使用 (joda-time) 格式向被`MimeMessage`调用者添加标头`"Expiry-Date"``"EEE MMM d HH:mm:ss yyyy Z"`

其他答案很好，但我使用了稍微不同的格式。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-11-22T11:09:14.117

标题字段：

*   Outlook 适用于过时的`"Expiry-Date"`
*   新的是`"Expires"`（在[RFC4021 2.1.49](https://www.rfc-editor.org/rfc/rfc4021#section-2.1.49 "RFC4021 2.1.49")和[RFC4021 2.1.50](https://www.rfc-editor.org/rfc/rfc4021#section-2.1.50 "RFC4021 2.1.50")中定义）

# .net - 哪些 .NET 库可用于发送即时消息？

> ID：509565
> 
> 赞同：1
> 
> 时间：2009-02-04T00:11:52.940
> 
> 标签：.net, instant-messaging

哪些 .NET 库可用于发送即时消息？如果你有过他们的经历，你的印象是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-02-04T00:20:38.650

我已将[DotMSN](http://www.xihsolutions.net/dotmsn/)用于 MSN Messenger。它工作得很好，而且很容易使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-04T00:27:01.523

我使用过 Jabber-Net（用于 XMPP）并且效果很好。 [http://code.google.com/p/jabber-net/](http://code.google.com/p/jabber-net/)

# php - 数据映射器 + 观察者模式

> ID：509566
> 
> 赞同：7
> 
> 时间：2009-02-04T00:11:54.470
> 
> 标签：php, datamapper, observer-pattern

我正在用 PHP 构建一个应用程序，并且我正在使用数据映射器模式进行数据库访问。我正在考虑使用观察者模式让我的所有映射器观察他们创建的实体，以便他们可以自动将任何更改保存回数据库，而无需我手动解析它们。

我只是想知道这是一个好主意，还是不好的做法等？

我通常使用一些在层次结构中链接在一起的对象，目前必须手动将每个对象解析到它的映射器，这相当乏味，所以只是想提出一个更好的解决方案。

谢谢，杰克

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-02-04T07:02:33.893

对我来说绝对是个好主意。您所做的类似于[工作单元](http://martinfowler.com/eaaCatalog/unitOfWork.html)模式，该模式旨在跟踪您对映射对象所做的更改并在完成后提交（通常作为单个事务）。

我相信像[Outlet](http://www.outlet-orm.org)和[Repose](http://repose-php.org)这样的项目在 PHP 中为您提供了这一点，并减轻了一些映射的痛苦，但我没有亲自使用它们。

顺便说一句，如果您希望沿着[领域驱动设计](http://domaindrivendesign.org)路径走下去并从它带来的干净隔离中受益，那么听起来您的对象层次结构可能会从被视为[聚合中受益。](http://domaindrivendesign.org/discussion/messageboardarchive/Aggregates.html)

--

编辑：看起来[eZ Components](http://ezcomponents.org/docs/tutorials/PersistentObject)也有一个相当全功能的 PHP [ORM](http://en.wikipedia.org/wiki/Object-relational_mapping)解决方案，而[Doctrine 2.0](http://www.doctrine-project.org/blog/php-5-3-and-doctrine-2-0-teaser)也在以这种方式形成。

--

编辑 2：对于您正在讨论的问题，我*不会*看 Propel 或 Creole。Creole 不是 ORM，而更像是一个类似于 PDO 的 DB 抽象层——该项目现在正式“死亡”。Propel 使用 ActiveRecord 模式，而不是 DataMapper 模式，因此您的域对象最终承担了更多的持久性责任，并且 AFAIK 它不包括工作单元设施。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-04T21:08:18.770

如果您正在研究 ORM，请查看[Propel](http://propel.phpdb.org/trac/)和[Creole](http://creole.phpdb.org/trac/)。

# perl - 如何在 Perl 中获取文件的最后修改时间？

> ID：509576
> 
> 赞同：68
> 
> 时间：2009-02-04T00:16:03.853
> 
> 标签：perl, file-io

假设我有一个文件句柄`$fh`。[我可以使用有关文件的大量附加信息](http://perldoc.perl.org/functions/-X.html "Perl -X 操作数")来检查它的存在或`-e $fh`文件大小。如何获得其最后修改的时间戳？`-s $fh`

* * *

## 回答 #1

> 赞同：106
> 
> 时间：2009-02-04T00:50:27.670

调用内置函数会`stat($fh)`返回一个数组，其中包含有关传入的文件句柄的以下信息（来自[perlfunc 手册页`stat`](http://www.perl.com/doc/manual/html/pod/perlfunc/stat.html)）：

```
 0 dev      device number of filesystem
  1 ino      inode number
  2 mode     file mode  (type and permissions)
  3 nlink    number of (hard) links to the file
  4 uid      numeric user ID of file's owner
  5 gid      numeric group ID of file's owner
  6 rdev     the device identifier (special files only)
  7 size     total size of file, in bytes
  8 atime    last access time since the epoch
  9 mtime    last modify time since the epoch
 10 ctime    inode change time (NOT creation time!) since the epoch
 11 blksize  preferred block size for file system I/O
 12 blocks   actual number of blocks allocated 
```

此数组中的元素编号 9 将为您提供自纪元以来的最后修改时间（*格林威治标准时间 1970 年 1 月 1 日 00:00*）。从中您可以确定当地时间：

```
my $epoch_timestamp = (stat($fh))[9];
my $timestamp       = localtime($epoch_timestamp); 
```

或者，您可以使用内置模块`File::stat`（自 Perl 5.004 起包含）以获得更面向对象的界面。

并且为了避免前面示例中需要的**幻数**`Time::localtime`9，另外使用另一个内置模块（从 Perl 5.004 开始也包括在内）。这些共同导致一些（可以说）更清晰的代码：

```
use File::stat;
use Time::localtime;
my $timestamp = ctime(stat($fh)->mtime); 
```

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2009-02-04T00:24:51.807

使用内置的[stat](http://perldoc.perl.org/functions/stat.html)函数。或者更具体地说：

```
my $modtime = (stat($fh))[9] 
```

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2009-02-04T00:25:28.140

```
my @array = stat($filehandle); 
```

修改时间以 Unix 格式存储在 $array[9] 中。

或明确：

```
my ($dev, $ino, $mode, $nlink, $uid, $gid, $rdev, $size,
    $atime, $mtime, $ctime, $blksize, $blocks) = stat($filepath);

  0 dev      Device number of filesystem
  1 ino      inode number
  2 mode     File mode  (type and permissions)
  3 nlink    Number of (hard) links to the file
  4 uid      Numeric user ID of file's owner
  5 gid      Numeric group ID of file's owner
  6 rdev     The device identifier (special files only)
  7 size     Total size of file, in bytes
  8 atime    Last access time in seconds since the epoch
  9 mtime    Last modify time in seconds since the epoch
 10 ctime    inode change time in seconds since the epoch
 11 blksize  Preferred block size for file system I/O
 12 blocks   Actual number of blocks allocated 
```

时代是格林威治标准时间 1970 年 1 月 1 日 00:00。

更多信息在*[stat](http://perldoc.perl.org/functions/stat.html)*中。

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2009-02-04T00:25:27.407

您需要 stat 调用和文件名：

```
my $last_mod_time = (stat ($file))[9]; 
```

Perl 也有不同的版本：

```
my $last_mod_time = -M $file; 
```

但该值与程序启动的时间有关。这对于排序之类的事情很有用，但您可能想要第一个版本。

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2009-02-12T19:05:31.970

如果您只是比较两个文件以查看哪个更新，那么`-C`应该可以：

```
if (-C "file1.txt" > -C "file2.txt") {
{
    /* Update */
} 
```

也有`-M`，但我不认为这是你想要的。幸运的是，几乎不可能通过 Google 搜索有关这些文件操作符的文档。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2009-02-04T00:25:05.113

您可以使用 stat() 或 File::Stat 模块。

```
perldoc -f stat 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2009-02-04T00:26:17.187

我认为您正在寻找`stat`功能 ( `perldoc -f stat`)

特别地，在返回列表的索引 9（即第 10 个字段）处找到的项目是文件的最后修改时间，以秒为单位。

所以：

`my $last_modified = (stat($fh))[9];`

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2013-07-03T02:04:20.003

在我的[FreeBSD](https://en.wikipedia.org/wiki/FreeBSD)系统上，`stat`只是返回一个祝福。

```
$VAR1 = bless( [
                 102,
                 8,
                 33188,
                 1,
                 0,
                 0,
                 661,
                 276,
                 1372816636,
                 1372755222,
                 1372755233,
                 32768,
                 8
               ], 'File::stat' ); 
```

您需要`mtime`像这样提取：

```
my @ABC = (stat($my_file));

print "-----------$ABC['File::stat'][9] ------------------------\n"; 
```

或者

```
print "-----------$ABC[0][9] ------------------------\n"; 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2018-03-10T18:35:30.933

这是一个非常古老的线程，但我尝试使用该解决方案，但无法从 File::stat 中获取信息。(Perl 5.10.1)

我必须执行以下操作：

```
my $f_stats = stat($fh);
my $timestamp_mod = localtime($f_stats->mtime);
print "MOD_TIME = $timestamp_mod \n"; 
```

只是想我分享一下，以防其他人遇到同样的麻烦。

# .net - 如何在 BindingSource.Filter 之后获取 DataGridView 的可见行数？

> ID：509578
> 
> 赞同：10
> 
> 时间：2009-02-04T00:16:33.493
> 
> 标签：.net, xml, winforms, datagridview, c#-2.0

我有一张桌子，上面有 1640 件物品。我设置

```
bindingSource.Filter = "some filter query string"; 
```

并且大多数行消失了，例如留下 400 行。我希望能够告诉用户“显示 1640 个项目中的 400 个”，因为他们单击了一些文本框，这些文本框更改了过滤器字符串，因此哪些行在 dataGridView 对象中可见（很像 iTunes，但用于医疗数据，而不是流派/艺术家/专辑过滤歌曲）。

我尝试了 bindingSource.Count，无论过滤器字符串设置为什么，它始终为 1640（即使根据需要显示的行数更少）。我尝试遍历 dataGridView.Rows 中的所有行并仅计算可见的行，但总和仍为 1640。

我在哪里可以获得这些信息？

请注意，我没有使用 SQL，但 bindingSource.DataSource 是来自围绕 DataTable 的 DataView 的 DataSource（来自从 XML 读取的数据集）。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-11-12T09:22:14.223

试试这个：`datagridviewname.Rows.GetRowCount(DataGridViewElementStates.Visible);`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-02-04T01:00:06.353

贾里德，

我最近不得不做这件事。对我有用的是在我应用过滤器后使用 DataGridView.Rows.Count 属性。

您是否将数据源设置为 BindingSource 或 DataGridView 的 DataSource 属性？它应该是 BindingSource。

HTH-杰

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-06T20:07:21.653

我搞砸了别的东西。杰是对的：

```
dataGridViewCases.Rows.Count 
```

有效，如下所示：

```
bindingSource.Count 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-11-11T09:13:39.047

你只需要使用你的 bindingSource 的 Count 属性...

```
ExampleBindoneSource.Count() 
```

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2009-02-04T00:59:18.603

如何将过滤后的项目添加到单独的 DataTable 中并对过滤后的项目进行计数。

# javascript - 变量赋值在 JavaScript 中是如何工作的？

> ID：509579
> 
> 赞同：101
> 
> 时间：2009-02-04T00:17:03.227
> 
> 标签：javascript

所以前几天我在玩，只是想看看大规模赋值在 JavaScript 中是如何工作的。

首先我在控制台中尝试了这个例子：

```
a = b = {};
a.foo = 'bar';
console.log(b.foo); 
```

结果是“栏”显示在警报中。这很公平，`a`实际上`b`只是同一对象的别名。然后我想，我怎样才能让这个例子更简单。

```
a = b = 'foo';
a = 'bar';
console.log(b); 
```

这几乎是一回事，不是吗？好吧，这一次，它返回的结果`foo`不像`bar`我对第一个示例的行为所期望的那样。

为什么会这样？

**注意**这个例子可以用下面的代码进一步简化：

```
a = {};
b = a;
a.foo = 'bar';
console.log(b.foo);

a = 'foo';
b = a;
a = 'bar';
console.log(b);
```

（我怀疑 JavaScript 对待诸如字符串和整数之类的原语与散列不同。散列返回一个指针，而“核心”原语返回它们自己的副本）

* * *

## 回答 #1

> 赞同：116
> 
> 时间：2009-02-04T00:27:29.087

在第一个示例中，您正在设置现有对象的属性。在第二个示例中，您正在分配一个全新的对象。

```
a = b = {}; 
```

`a`现在`b`是指向同一个对象的指针。所以当你这样做时：

```
a.foo = 'bar'; 
```

它也设置`b.foo`自`a`和`b`指向同一个对象。

*然而！*

如果您改为这样做：

```
a = 'bar'; 
```

你是说现在`a`指向一个不同的对象。`a`这对之前指出的内容没有影响。

在 JavaScript 中，分配变量和分配属性是两种不同的操作。最好将变量视为指向对象的指针，当您直接分配给变量时，您不会修改任何对象，而只是将变量重新指向不同的对象。

但是分配一个属性，比如`a.foo`，将修改`a`指向的对象。当然，这也会修改指向该对象的所有其他引用，因为它们都指向同一个对象。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2009-02-04T01:44:15.937

Squeegy 已经令人满意地回答了您的问题 - 它与对象与原语无关，而是与变量的重新分配与在同一引用对象中设置属性有关。

答案和评论中似乎有很多关于 JavaScript 类型的混淆，所以这里简单介绍一下 JavaScript 的类型系统：

在 JavaScript 中，有两种根本不同的值：原语和对象（没有像“哈希”这样的东西）。

字符串、数字和布尔值以及`null`和`undefined`是原语，对象是可以具有属性的一切。甚至数组和函数也是常规对象，因此可以包含任意属性。它们只是在内部 [[Class]] 属性上有所不同（函数还有一个称为 [[Call]] 和 [[Construct]] 的属性，但是，嘿，这是细节）。

原始值可能表现得像对象的原因是由于自动装箱，但原始值本身不能包含任何属性。

这是一个例子：

```
var a = 'quux';
a.foo = 'bar';
document.writeln(a.foo); 
```

这将输出`undefined`：`a`保存一个原始值，在分配属性时将其提升为对象`foo`。但是这个新对象会立即被丢弃，所以 的值`foo`就丢失了。

可以这样想：

```
var a = 'quux';
new String(a).foo = 'bar'; // we never save this new object anywhere!
document.writeln(new String(a).foo); // a completly new object gets created 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-02-04T00:24:36.847

您或多或少是正确的，只是您所说的“哈希”实际上只是对象的简写语法。

在第一个例子中，*a*和*b*都指向同一个对象。在第二个示例中，您将*a*更改为引用其他内容。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-08-02T08:03:50.120

这是我的答案版本：

```
obj = {a:"hello",b:"goodbye"}
x = obj
x.a = "bonjour"

// now obj.a is equal to "bonjour"
// because x has the same reference in memory as obj
// but if I write:
x = {}
x.a = obj.a
x.b = obj.b
x.a = "bonjour"

// now x = {a:"bonjour", b:"goodbye"} and obj = {a:"hello", b:"goodbye"}
// because x points to another place in the memory 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-02-04T00:26:07.407

您将 a 设置为指向一个新的字符串对象，而 b 一直指向旧的字符串对象。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-02-04T00:27:21.070

在第一种情况下，您更改了变量中包含的对象的某些属性，在第二种情况下，您为变量分配了一个新值。那是根本不同的事情。变量`a`和`b`并没有被第一次赋值以某种方式神奇地链接起来，它们只是包含相同的对象。在第二个示例中也是如此，直到您为`b`变量分配新值。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-02-04T00:35:40.943

区别在于简单类型和对象。

任何对象（如数组或函数）都是通过引用传递的。

任何简单类型（如字符串或数字）都会被复制。

我总是有一个方便的 copyArray 函数，所以我可以确定我没有为同一个数组创建一堆别名。

# .net - 带有 .NET OracleCommand 的多行 PL/SQL 命令

> ID：509580
> 
> 赞同：0
> 
> 时间：2009-02-04T00:18:04.520
> 
> 标签：.net, oracle

我正在使用 System.Data.OracleClient.OracleCommand 创建一个表并用一些数据填充它。我正在使用的查询在 PS/SQL Developer 中运行正常，但是当我尝试从 .NET 应用程序中执行它时，我收到了这个错误：

```
ORA-06550: line 1, column 20:
PLS-00103: Encountered the symbol "" when expecting one of the following:

   begin function package pragma procedure subtype type use
   <an identifier> <a double-quoted delimited-identifier> form
   current cursor 
```

第 20 列正是第一行结束的地方。一旦我从命令中删除行尾字符（\r\n），它就开始工作了。

我想知道是否有一些隐藏的配置参数可以为 Oracle 启用多行查询？

这是一些代码：

```
 var text = @"declare cnt number;
begin

 select count(*) into cnt from all_tables
 where table_name = 'TABLE_A';

if cnt = 1 then
   begin 
      execute immediate 'truncate table TABLE_A';
      execute immediate 'drop table TABLE_A';
   end;
end if;

execute immediate 'create table TABLE_A as 
 (SELECT DISTINCT v.ID, g.ext_id FROM VIEW_A v
 JOIN TABLE_B B ON v.id = B.Id
 WHERE YEAR1 = ''2008'')';

end;");

            var createTempTable = new OracleCommand(text, conn);
            createTempTable.CommandType = CommandType.Text;
            conn.Open();

            try
            {
                createTempTable.ExecuteNonQuery();
            }
            catch(Exception ex)
            {
                throw;
            }
            finally
            {
                conn.Close();    
            } 
```

谢谢你的帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-02-04T05:00:08.833

我认为您只需要丢失 '\r' 字符。

# user-interface - 帮助我理解这个 UI 术语

> ID：509590
> 
> 赞同：1
> 
> 时间：2009-02-04T00:21:16.450
> 
> 标签：user-interface, air, rich-internet-application

来自对[Balsamiq](http://www.balsamiq.com/) （一种用于创建模型的Adob​​e AIR 应用程序）的创建者[Peldi Guilizzoni的](http://www.peldi.com/blog/)[采访：](http://www.flashmagazine.com/community/detail/balsamiq_mockups_-_a_solid_case_for_air/)

> **然后你开始制作第一个版本的 Balsamiq Mockups。开发过程中是否有任何障碍？**
> 
> 哈！总是有障碍，这是编码乐趣的一部分，不是吗？
> 
> 让我想想。我想我重写了几次基础类（模型、输入管理器、基本 UI 组件等），直到我对它们感到满意为止。首先，我从每个 UI 控件开始处理用于移动和调整自身大小的鼠标事件，然后将所有鼠标处理移动到位于视图顶部的透明 InputManager 画布（类似于我为 Connect 的白板所做的）。在我能够创建一个适用于我的工具的策略之前，我还必须学习和消化所有不同的运行时蒙皮选项，这需要一段时间。

*   基础类是框架中核心类的通用术语吗？
*   “模型、UI 组件、输入管理器”是用户界面开发中的常见主题吗？它们究竟由什么组成？
*   当他说他“将鼠标处理移动到视图顶部的透明 InputManager 画布上”时，他是什么意思？什么是视图和 InputManager 画布。
*   他为什么要进行运行时蒙皮？不能提前剥皮吗？他可以探索哪些其他选择？

我正在尝试了解他的设计架构。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-02-04T08:58:50.897

他在做模型。所以对他来说，每个 UI 组件基本上都是一个矩形（或其他形状），需要绘制并对输入做出反应。输入可以来自不同的来源（鼠标、键盘、准备多点触控？），因此输入管理器很有意义。在模型中，大多数组件将具有相同的简单行为，因此将其提取到单独的对象是有意义的。在模型中，在运行时更改皮肤是有意义的

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-04T00:28:56.667

我不明白这个问题。对于您的第一点，是的。为什么要挑这个人？他的申请很不错。MFC == Microsoft 基础类。其次，我认为它们非常简单，它们大致类似于 MVC，它只是类似模式的变体。至于第三个，那是他的应用程序特有的；您可能需要更多地了解 AIR 中的开发是如何发生的，才能确切了解他的意思。但总的来说，这听起来并不难理解。最后，我不知道。问他。:) 这是一个非常简洁的应用程序。

他还接受了 Startup Success Podcast 的采访：

[http://startuppodcast.wordpress.com/tag/balsamiq-mockups/](http://startuppodcast.wordpress.com/tag/balsamiq-mockups/)

# r - 具有多个时间序列的 csv 文件

> ID：509595
> 
> 赞同：4
> 
> 时间：2009-02-04T00:23:09.283
> 
> 标签：r, time-series

我已经导入了一个包含大量数据列和部分的 csv 文件。

```
v <- read.csv2("200109.csv", header=TRUE, sep=",", skip="6", na.strings=c("")) 
```

文件的布局是这样的：

```
Dataset1
time, data, .....
0       0
0       <NA>
0       0

Dataset2
time, data, .....
00:00   0
0       <NA>
0       0 
```

（不同数据集的标题完全相同。

现在，我可以绘制第一个数据集：

```
plot(as.numeric(as.character(v$Calls.served.by.agent[1:30])), type="l") 
```

我很好奇是否有更好的方法：

1.  无需转换即可将所有数字读取为数字。

2.  以某种有意义的方式处理文件中的不同数据集。

任何提示将不胜感激。谢谢你。

* * *

状态更新：

我还没有在 R 中真正找到一个好的解决方案，但是我已经开始在 Lua 中编写一个脚本来将每个单独的时间序列分成一个单独的文件。我暂时将其保持打开状态，因为我很好奇 R 将如何处理所有这些文件。我每天会收到 8 个文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-03-27T06:57:58.293

我个人会做的是在将文件读入 R 之前用某种脚本语言制作一个脚本来分离不同的数据集，并且可能还会进行一些必要的数据转换。

如果您想在 R 中进行拆分，请查找`readLines`-太高级，用于读取单个数据帧`scan`。`read.csv2`您可以将不同的数据集写入不同的文件，或者如果您有野心，可以创建类似文件的 R 对象，这些对象可用于`read.csv2`底层大文件的正确部分并从中读取。

一旦您处理了将数据集分成不同的文件，请`read.csv2`在这些文件上使用（或任何`read.table`最好的变体 - 如果这些不是选项卡而是固定宽度的字段，请参阅`read.fwf`）。如果`<NA>`在您的文件中指示“不可用”，请务必将其指定为`na.strings`. 如果您不这样做，R 会认为您在该字段中有非数字数据，但是使用 right `na.strings`，您会自动将该字段转换为数字。您的一个字段似乎可以包含时间戳`00:00`，因此您需要使用`colClasses`并指定一个类，您的时间戳格式可以转换为该类。如果内置`Date`类不起作用，只需定义您自己的`timestamp`类和进行`as.timestamp`转换的函数即可。

# c# - 表达评估设计问题

> ID：509598
> 
> 赞同：4
> 
> 时间：2009-02-04T00:24:18.550
> 
> 标签：c#, oop

我为评估表达式的系统建模。现在，这些表达式中的操作数可以是多种类型之一，包括一些原始 .NET 类型。在定义我的 Expression 类时，我想要某种程度的类型安全，因此不想对操作数对象类型使用“对象”，所以我正在考虑定义一个没有任何内容的抽象操作数基类并创建一个子类每种类型的操作数。你觉得这怎么样？

此外，只有某些类型的操作数对其他类型有意义。最后，只有一些运算符对特定的操作数有意义。我真的想不出在编译时实现这些规则的方法，所以我想我必须在运行时进行这些检查。

关于如何更好地做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-02-04T00:33:24.287

我不确定基于 C 的语言是否具有此功能，但是 Java 有几个对此确实有意义的包。

JavaCC 或 java 编译器编译器允许您定义一种语言（例如您的表达式）并构建相应的 java 类。DemeterJ 是一个更加用户友好的（如果不是更多实验性和学术性的软件包）——它允许您非常轻松地指定表达式语言，并附带一个用于定义访问者和策略的库，以对生成的类结构进行操作。如果你有能力切换到 Java，我可能会尝试。否则，我会寻找其中一种技术的 C# 克隆。

如果您沿着这条路线走，要考虑的另一件事是，一旦您在最终结果的某个合理近似范围内生成了类结构，您就可以对所有生成的类进行子类化，并将所有应用程序特定的登录构建到子类中。这样，如果您真的需要为表达式语言重新生成一个新模型，您的逻辑将相对独立于您的类层次结构。

更新：实际上，虽然我没有使用过它，但它看起来好像其中一些东西被移植到了 .NET 技术，所以我不确定它可能是什么形状：

[http://www.ccs.neu.edu/home/lieber/inside-impl.html](http://www.ccs.neu.edu/home/lieber/inside-impl.html)

祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-04T00:40:55.160

我最近构建了一个动态表达式评估器。正如您所建议的那样，我发现有效的是创建具有有意义的派生类（NumericOperand、StringOperand、DateOperand 等）的 BaseOperand，具体取决于您的实现，泛型也可能有意义（操作数）。

通过访问者模式的实现，您可以执行您喜欢的任何类型的验证。

我非常需要推出自己的解决方案，但是已经有许多选项可用于处理表达式。您可能想看看其中一些以获得灵感或避免重新发明轮子。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-04T01:25:41.467

`Expression`3.5的怎么样？我最近使用它编写了一个表达式解析器/编译器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2010-10-29T18:41:49.123

我找到了一种使用 EXPRESSIONOASIS 框架处理对象类型的好方法。他们使用自定义数据结构来承载对象的类型。因此，在用正则表达式和给定表达式解析操作数之后，他们决定类型并将此类型存储为通用类的属性，可以随时用于获取类型。

[http://code.google.com/p/expressionoasis/](http://code.google.com/p/expressionoasis/)

# production - 您最严重的生产错误是什么？

> ID：509601
> 
> 赞同：3
> 
> 时间：2009-02-04T00:25:02.197
> 
> 标签：production

您最严重的生产错误是什么？这可能是您在实时系统中促成或解决的任何错误。

[移动我对答案的回应]

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-02-04T00:25:46.503

我的第一个项目是我校外的项目，一个软件公司的大型销售补偿系统。我们在最终的求和例程中有一个错误，它会试图从下一张薪水中减去任何拥有的钱。在某些情况下，追溯计算增加了上个月的欠款金额，借方将被记录下来，然后永远不会从下一次薪水中减少。第一个月可能开始为 3.23 美元，下个月将增加到 6.46 美元。你可以看到这是怎么回事。尽管我们很早就听说过一些用户投诉，但我们将它们视为“用户错误”——销售计划很复杂，任何人都很容易误解应该支付的正确金额。但几个月后，丢失的钱太大而无法忽视——超过 2,000 美元，000 未支付的工资单。代码修复很简单，需要为数百名员工进行数月的工资计算，而不是太多。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-02-04T00:58:24.237

我在一个电子商务网站上工作，其中客户端数据作为 CSV 转储从遗留后端系统提供。我们只有一个样本数据集可供使用（尽管重复请求完整的数据集）所以我们第一次看到完整的数据是在它启动的那天早上在现场网站上。所有字符串都在 CSV 文件中引用，但数字没有。我们没有意识到的是，遗留系统在更大的数字中插入了一个逗号——所以在我们预期的地方，比如 1099.99，我们得到了 1,099.99。当然，CSV 解析器会看到逗号并将值设为 1。想象一下，当大件商品的订单开始进入时，客户会感到惊讶，这些商品显然以每件 1 英镑的低价出售。代码很快得到修复，幸运的是他们的条款允许他们拒绝订单。学过的知识：

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-02-04T01:34:45.303

我们有一个电子商务系统，当它被移动到生产服务器时（通过我们超级棒的手动复制/粘贴/编辑设置过程），高级开发人员 - 唯一可以访问服务器的人 - 忘记连接系统到支付网关。销售额达到 18,000 美元之后，客户注意到他们的银行账户并不比我们开始时的大。

自那天以来的流程改进：

不是一个。

我们是如何解决问题的：

告诉客户根据他们的电子邮件通知联系所有客户

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-02-04T00:43:06.560

在对我构建的系统进行实时更新期间，我丢失了大约 7 个用户的一些用户注册数据。这听起来并没有那么糟糕，只是它注册了 180 亿美元的 IPO。我们能够通过发出的自动电子邮件追踪信息，但是在那小小的打嗝上流下了几滴汗珠。

# javascript - 如何解析使用 YUI 数据源返回的 NULL 值

> ID：509620
> 
> 赞同：2
> 
> 时间：2009-02-04T00:29:46.353
> 
> 标签：javascript, yui, datasource, yui-datatable

我正在使用 YUI 数据表和数据源在我的一个项目中呈现数据。返回的数据恰好为 NULL，YUI 数据源无法解析它。

下面是datasource和datatable的声明代码。为了便于阅读，我将每个声明分开。

**列描述声明**

```
var columnDescription = 
    [
        {key:'Requirements'},
        {key:'abc'},
        {key:'xyz'}
    ]; 
```

此 columnDescription 在下面的函数中设置。

**数据源声明**

```
var dataSrcSample = new YAHOO.util.FunctionDataSource(getDataGrid);
myDataSource.connMethodPost = true;
myDataSource.responseType = YAHOO.util.DataSource.TYPE_JSON;
myDataSource.responseSchema = {
    fields:['Requirements', 
        {key:'abc',parser:YAHOO.util.DataSource.parseString},
        {key:'xyz',parser:YAHOO.util.DataSource.parseString}]
}; 
```

**getDataGrid**函数调用服务器端以从服务器获取数据。

下面是表定义本身。

```
YAHOO.example.sampleTable = function()
{
    var columnDesc=columnDescription;
    var myDataSource = dataSrcSample;
    var oConfigs = 
    {
        width:'100%'
    };

    var myDataTable = new YAHOO.widget.DataTable("tableContainerDiv", columnDesc, myDataSource, oConfigs);
}(); 
```

**tableContainerDiv**在 html 页面中声明。这是容器 div。从服务器获取 JSON 数据的函数。

```
function getDataGrid()
{
      //calls backend and gets the data
} 
```

该函数返回具有一些空值的 json 字符串。数据源构造函数抱怨以下问题。

*   ERROR_DATAINVALID
*   ERROR_DATANULL

我查看了 yui[文档](http://developer.yahoo.com/yui/docs/YAHOO.util.DataSourceBase.html#method_DataSourceBase.parseString)，发现字符串解析器没有解析空值。我想知道是否有任何方法可以解析这些数据。我必须要 handleResponse 解析原始数据吗？任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-09T18:12:00.937

首先确保您需要 parser:YAHOO.util.DataSource.parseString 字段。我还没有看到你的 JSON 结构。所以我无法对此发表评论。

其他选项是使用自定义格式化程序。类似以下代码段的内容将起作用。

```
var customFormatter = function(elCell, oRecord, oColumn, sData) {
    elCell.innerHTML = '';
    try {
        var strData = YAHOO.lang.JSON.parse(sData);
        // set the elCell.innerHTML based on the strData 
    } catch {
        // don't to anything
    }
}

myDataSource.responseSchema = {fields:['Requirements', 'abc', 'xyz']};

var columnDescription = 
                    [
                        {key:'Requirements'},
                        {key:'abc',
                         formatter: customFormatter
                        },
                        {key:'xyz',
                         formatter: customFormatter
                        }
                     ]; 
```

# ajax - 浏览器中的 AJAX 命令行界面

> ID：509630
> 
> 赞同：2
> 
> 时间：2009-02-04T00:32:40.357
> 
> 标签：ajax, django, command-line, extjs

我正在构建一个 Web 应用程序以允许用户查看和操作数据，尤其是数字和地理数据。输出清晰和专业（数据网格、谷歌地图覆盖等）很重要。但就用户界面而言，我宁愿从命令行界面的灵活性开始，然后再构建 GUI 样式的表单。

您能否提供任何提示、技巧或建议来创建可以驱动界面其余部分的基于 AJAX 的命令行界面？指向现有应用程序的指针也很棒。

我使用的堆栈是服务器端的 Django/Python 和浏览器中的 ExtJS。如果可能的话，我想将命令路由到 Django shell，然后添加一些额外的函数来将结果输出到数据网格、地图等。

谢谢！

**@Soviut**感谢您的快速回复。恐怕我不能说得那么清楚。我想使用 shell 在服务器端触发命令，然后反馈到客户端的输出。

这是我刚刚找到的一个示例：http: [//shell.appspot.com/](http://shell.appspot.com/)

只是我希望它不仅在 shell 内生成文本输出，而且还生成将被其他 AJAX 侦听器用于数据网格和地图的输出。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-02-04T01:19:15.537

[goosh](http://www.goosh.org/)是命令行 Web 应用程序的一个很好的例子。我与它的创作无关，但我已经将它的部分设计用于工作中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-04T00:54:40.373

获取Firefox 的[Firebug](http://getfirebug.com/)。它具有用于监视 DOM 和网络流量的控制台，并具有用于直接调用的命令行。[这对于在JQuery](http://www.jquery.com/)和我认为是 ExtJS等框架中测试 ajax 命令特别有效。网络流量面板特别有用，因为它可以看到经常被 ajax 库吞噬的 AJAX 错误。

# asp.net-mvc - 哪个更快 asp.net mvc json 或 json.net？

> ID：509632
> 
> 赞同：15
> 
> 时间：2009-02-04T00:34:38.107
> 
> 标签：asp.net-mvc, json, json.net

我想知道是否有人对 Asp.net MVC 中的 JSON() 函数进行了任何基准测试，以及它与 JSON.NET 的比较如何？还有哪一个输出最好的 json 字符串？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-06-02T05:14:50.677

[这里](http://james.newtonking.com/archive/2008/10/27/json-net-3-5-beta-1-big-performance-improvements-compact-framework-support-and-more.aspx)有一个性能比较。ASP.NET MVC 使用 JavaScriptSerializer。

Json.NET 让您可以更好地控制输出 JSON（尤其是日期前后），并且还可以选择打印缩进的 JSON。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-02-04T08:50:17.403

我正在使用 MVC json，这是一个非常好的选择。我过去使用过 json.net，它很好，但由于 3 方 DLL asp.net 3 + 对 json 的使用效果很好，所以会产生开销。

试试看 ..

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2010-11-23T18:23:01.607

[ServerStack](http://www.servicestack.net/)框架的作者为 .NET 和 Mono 引入了新的[JSON 序列化](http://www.servicestack.net/mythz_blog/?p=344)程序，他们的基准测试引用了比 JSON.NET 和 WCF JSON 序列化程序更高的性能。乍一看，它不支持 JSON.NET 的几个重要特性：缩进的序列化文本，而且看起来需要更多代码。

# actionscript-3 - 在 ActionScript 中包装 Vararg 方法

> ID：509638
> 
> 赞同：0
> 
> 时间：2009-02-04T00:37:42.920
> 
> 标签：actionscript-3, variadic-functions, proxy-classes

我有一个可变参数方法，我想充当另一个可变参数方法的代理，但我不知道该怎么做。这是基本代码：

```
class MyClass {

   public function a(...args:*):* {
      // other code
      b(args);
      // other code
   }

   public function b(...args:*):* {
      // do stuff with args
   }

} 
```

我正在从 Java 移植代码，其中类型系统知道参数实际上应该是字符串，而不是数组，因此它可以通过直接传递参数来确定调用 b()，并且一切都按照你的方式工作预计。

但是在 ActionScript 中，当通过代理方法调用时，参数数组会被包装到另一个数组中。

因此，当直接调用 b() 时，数组只有一层深。但是当通过 a() 调用 b() 时，数组有两层深。

有谁知道解决这个问题的技巧？

（注意：在我的真实代码中，a() 和 b() 实际上是在不同的类中，我真的不想触及 b() 的实现。我可以将 a() 重写为我心中的内容，但 b() 不应该改变。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-02-04T01:03:59.140

好吧，我不能声称自己擅长 ActionScript（多年未使用它..）

但如果没有别的，你可以做类似的事情..

```
class Test {
    function a(...args:*):* { b.apply(this, args); }
    function b(...args:*):* { trace(args[1]); }
} 
```

在以前的版本中，您可以使用“参数”通过 apply 方法传递所有传递的参数，但这似乎已在 AS3 中删除。

# c# - DNS 区域文件的有效字符是什么？如何清理用户输入？

> ID：509640
> 
> 赞同：1
> 
> 时间：2009-02-04T00:40:53.023
> 
> 标签：c#, dns, bind

我正在开发一个接口，以允许我们的客户自行更新他们的 DNS。

我有两个问题：

1.  什么构成有效的有效主机和目标记录？(A, CNAME, MX, TXT) 即如果用户输入........作为主机和目标DNS服务器不会这样。
2.  有没有我可以用来清理用户输入的正则表达式？

顺便说一句，它是 BIND9 DNS 和 C# Web 应用程序。

谢谢，

凯尔

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-02-06T09:22:17.757

域名*标签*在技术上可以包含任何八位字节值，但*通常*它们只包含字母数字以及连字符和下划线字符。

这来自[RFC 1035](http://www.ietf.org/rfc/rfc1035.txt)第 2.3.1 节中的建议：

> 标签必须遵循 ARPANET 主机名的规则。它们必须以字母开头，以字母或数字结尾，并且只有字母、数字和连字符作为内部字符。长度也有一些限制。标签不得超过 63 个字符。

下划线字符是最近添加的，通常用于`SRV`记录的标签部分。

`.`如果您要让用户创建自己的子域，您也可以允许使用 " " 字符。

可能的*值*是：

*   `A`记录 - 必须是点分四线 IP 地址
*   `CNAME`记录 - 必须是其他一些合法标签
*   `MX`记录 - 16 位整数优先级字段和合法主机名。注意：有些人贴上标签，这些标签本身只指向`CNAME`唱片。这是不受欢迎的。
*   `TXT`记录 - 你喜欢的任何东西！

请注意，在每种情况下，如果您确实允许任何不在正常集中的字符，如果它们被存储在 BIND 格式区域文件中，则需要对其进行转义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-09T09:01:12.677

答案过去很容易，但现在不再那么容易了。

您几乎可以使用任何 Unicode 字符，但它们应该经过规范化和编码过程。

请参阅 RFC 3490 (IDNA)、RFC 3454 (Stringprep)、RFC 3491 (Nameprep)、RFC 3492 (Punycode)

或者使用 Wikipedia 了解全局（[http://en.wikipedia.org/wiki/Internationalized_domain_name](http://en.wikipedia.org/wiki/Internationalized_domain_name)）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-09T08:01:29.653

不要忘记 AAAA，即 IPv6 地址（请记住，距离我们用完 IPv4 地址仅剩两年时间......）。

对于合法名称，请阅读 RFC 1123，第 2.1 节。**域名**可以是**任何东西**，**主机**名有更严格的语法（参见 RFC 1123）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-04-30T06:10:22.760

除了上面的建议，如果有人仍然面临从 godaddy 导入区域文件到 route53 的问题，请删除评论。我花了几个小时才发现写成“;comment line here”的注释导致路由 53 系统无法正确解析区域文件。

# c++ - C++ 'true' 和 'false' 关键字在 Visual C++ 6.0 中突然不是真或假

> ID：509642
> 
> 赞同：5
> 
> 时间：2009-02-04T00:41:15.970
> 
> 标签：c++, visual-c++

我的编译器（VC++ 6.0 sp6）显然已经疯了。在某些代码中，我看到' `bool mybool = true;`'评估并分配为假，反之亦然。将 true/false 关键字更改为 1/0 使其工作正常。相同的代码可以在其他地方很好地编译，而无需更改 true/false 关键字。

什么可能导致这种情况？我的第一个想法是 RAM 或磁盘损坏，但一切都很好。我离重新格式化驱动器并重新安装所有东西不远了，但我很害怕我仍然会看到同样的不当行为。

某个地方的宏或链接库在技术上是否有可能搞砸 ' `true`' 和 ' `false`' 的含义？

更新：谜团解开了。我机器上的环境变量标志设置为“false”，并且由一些预处理器代码插入的方式重新定义了关键字。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-02-04T00:45:59.643

预处理器宏当然可以做到这一点，尽管这会非常令人惊讶。检查是否是这种情况的一种方法是

```
#ifdef true
#  error "true is defined as a macro"
#endif
#ifdef false
#  error "false is defined as a macro"
#endif 
```

回复评论：

找到一个您看到此行为的非头文件，最好是一个包含很少 #include 的文件。

在包含列表的中间，放置#ifdef #error 指令。

如果错误跳闸，您知道它在包含的前半部分，如果不是，则在后半部分。将一半分成两半并重复。当您将其缩小到一个标题时，打开该标题。如果该标头包含任何标头，则对其包含的标头列表重复该过程。最终你应该能够找到 #defines 。乏味，我同意。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-02-04T00:53:39.317

缓冲区溢出和写入未初始化的内存也可以解释这种行为。例如，如果您在相邻的内存位置分配了一个数组和 bool，并且意外写入超出了数组的边界。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-02-04T01:07:31.347

如果您在调试器中检查变量值时看到此问题，并且您正在运行发布版本，则它可能只是调试系统的工件。检查这一点的最简单方法是添加一些代码，如下所示：

```
if (mybool)
    printf("mybool is true\n");
else
    printf("mybool is false\n"); 
```

您将能够快速确定调试器是否准确。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-02-04T01:23:21.363

首先，VC6 是古老且有缺陷的。在某些情况下，它只会生成不正确的代码，这可能是您问题的答案。如果您有选择，请不要使用 VC6。

其次，您所看到的很可能只是优化的结果。您的代码行为正确吗？如果是这样，只是调试器会感到困惑，因为执行的代码与源代码不同（由于优化）。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-02-04T00:46:45.663

头文件很可能正在通过宏翻转值 - 尽管我无法猜测。该文件是否有可能被编译为 C 而其他文件被编译为 C++，并且在某处有一些 #ifdef/#define 代码试图“修复”真/假值，但它们弄错了吗？

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2009-02-04T02:33:59.393

我隐约记得使用 VC6，您可以单独运行预处理器并查看其输出。它可能是编译器开关。

无论如何，这几乎可以肯定是#defines 出错的结果。如果它是内存覆盖，正如建议的那样，您可能会看到其他同样奇怪的行为。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-02-04T00:49:26.237

从技术上讲，重新定义 bool 是可行的，但我不明白为什么您的特定环境将是唯一出现此问题的环境。

也许有人正在和你一起玩？

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-02-04T04:21:50.580

像这样的问题很可怕，因为你真的没有地方开始。

我要做的第一个测试是在您的项目的所有源代码中搜索同时匹配“#define”和“true”或“#define”和“false”的内容。如果你身边有人知道 Perl，那应该是一个快速的脚本。

您是否依赖于链接一些可能已更改的外部库？如果您怀疑您链接的某些东西有些奇怪，您可以尝试以下步骤：

*   制作一个检查真/假值的程序。
*   编译这个程序，确保将这个程序与你的源代码的所有库链接起来。
*   运行你的程序，看看你的最小程序是否显示出影响你的问题的真/假错误。

如果该最小程序存在错误，则您已将问题隔离为您正在使用链接进行的操作。之后的下一个明显测试是将程序与标准 C++ 库链接，以测试您的编译器是否存在某种错误。

最后，在重新格式化您的机器之前，让其他人编译您的代码。这真的很容易，如果 Perl 脚本没有任何结果，我肯定会向同事寻求帮助。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-02-04T00:47:04.743

检查`#define true 0`和`#define false 1`

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-02-04T00:56:20.543

即使在 Visual Studio 2003 中，有时也会发生在我身上。但我不知道这件事的确切原因。在检查函数的返回值时会发生这种情况。即使我从函数返回 true，但在调用函数中分配返回值时，true 被转换为 false，false 被转换为 true。

在这种情况下，我会检查其他一些输出参数。

# user-interface - 浏览、子布局：树、表单还是两者兼而有之？

> ID：509645
> 
> 赞同：0
> 
> 时间：2009-02-04T00:43:08.510
> 
> 标签：user-interface, forms, tree

这是我认为的 UI 范式问题。

**如何显示儿童信息？**

浏览是一棵树吗？你有表格吗（双击浏览）？还是其他方式，或东西的混合物？

我正在与培训师讨论浏览布局。他们不喜欢树（用于显示子记录），但我还不相信它太混乱了。还谈到了在浏览器下方有一个部分来显示所需信息（上下文是浏览器中的选定记录）。

向用户获取信息的乐趣。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-04T00:53:50.097

虽然这不是绝对的，但树视图通常不是答案。当您知道要查找的内容时，它们浏览起来很尴尬，而当您不知道时，浏览起来就更尴尬了。用户似乎更喜欢平面列表，一个简单的搜索功能可能足以将他们带到他们需要去的地方。如果您需要显示的数据确实需要保持分层，您可能还想考虑下钻界面的可行性。

编辑：刚刚发现[这个](http://ripul.blogspot.com/2005/10/tree-view-removal-surgery_112919819961257081.html)，看起来它有一些有用的指针来改进一个简单的树视图界面。

# c# - 在 C# 中添加 Wordnet.net 字典

> ID：509649
> 
> 赞同：1
> 
> 时间：2009-02-04T00:45:23.780
> 
> 标签：c#, .net, ms-word

如何在我的应用程序中添加 Wordnet 词典或 msword 词典？我正在.NET C# 中开发应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-04T10:50:02.670

我假设你想添加拼写检查？

如果是这样，有几个选择

使用 MS Word

*   使用单词拼写检查器
    [http://www.codeproject.com/KB/cs/spellcheckdemo.aspx](http://www.codeproject.com/KB/cs/spellcheckdemo.aspx) [http://www.codeproject.com/KB/office/SpellCheckUsingWord.aspx](http://www.codeproject.com/KB/office/SpellCheckUsingWord.aspx)

*   使用内置的 WPF 拼写检查器（如果您使用的是 wpf） [http://www.dev102.com/2008/03/25/customize-spellcheck-on-wpf-text-controls/](http://www.dev102.com/2008/03/25/customize-spellcheck-on-wpf-text-controls/)

*   使用免费源
    [http://sourceforge.net/projects/netspell/](http://sourceforge.net/projects/netspell/)

*   购买一个
    [http://www.wintertree-software.com/spell-check/csharp/index.html](http://www.wintertree-software.com/spell-check/csharp/index.html) [http://www.keyoti.com/products/rapidspell/dotnet/](http://www.keyoti.com/products/rapidspell/dotnet/)

你能提供更多关于你的要求的信息吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-10-28T07:10:47.613

如果你想在 :NET 中进行拼写检查、断字或需要一个词库，你可以试试 NHunspell。它是 OpenOffice、Google Chrome 和 Firefox 拼写检查器 Hunspell 的 .NET 版本，并具有所有这些功能。它可以使用 OO 字典。

[NHunspell 项目主页](http://nhunspell.sourceforge.net/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-06T00:20:58.317

据我所知，MS Word 没有真正的字典。它有一个拼写检查器和一个词库。

你的意思是你想要一个词库？

如果您想要一本真正的字典，也许您可​​以考虑对字典 Web 服务进行标注，例如
[http://services.aonaware.com/DictService/](http://services.aonaware.com/DictService/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-02-06T01:10:36.080

您可以查看在您的应用程序中使用 WordNet 数据文件，它们只是似乎遵循非常基本结构的文本文件。如果您下载 Windows 应用程序，您可以看到它使用的数据文件。或者，您可以将它们导入数据库（通过 SSIS 或其他方式），以使您在编码时更轻松：

*   SQLite -> 自包含单文件数据库，您可以通过 .NET 应用程序查询

*   Sql Express -> 您可以使用您的应用程序部署的免费版本的 SQL Server。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2011-06-30T16:42:45.927

看到这个问题的朋友，请参考以下 [链接](http://wordnet.princeton.edu/wordnet/related-projects/#.NET)。它指出了读取 WordNet 数据库的各种 C# 实现。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2011-12-16T18:22:52.677

此处列出的 API：[http](http://wordnet.princeton.edu/wordnet/related-projects/#.NET) ://wordnet.princeton.edu/wordnet/related-projects/#.NET，Matt Gerber 的 ( [http://ptl.sys.virginia.edu/ptl/members/matthew-gerber/software #WordNet_API](http://ptl.sys.virginia.edu/ptl/members/matthew-gerber/software#WordNet_API)）是最好的。

这不是一个很好的 API，但它工作正常，这是我需要的一个好的开始。

我还没有尝试过[Proxem 的 Antelope](http://www.proxem.com/Default.aspx?tabid=119)，因为它看起来更像是一个重量级的应用程序，而不是一个简单的 API。不过，它可能更强大。

还有一个 SharpWordNet 库作为[SharpNLP](http://sharpnlp.codeplex.com/)项目的一部分，我还没有尝试过。

# .net - 仅使用原始类型的本机互操作的开销

> ID：509662
> 
> 赞同：4
> 
> 时间：2009-02-04T00:49:22.243
> 
> 标签：.net, c, performance, interop, pinvoke

我正在考虑将我的 C# 项目中的一小部分代码移植到 C/ASM 以获得性能优势。（这部分代码使用了许多按位运算，并且是少数几个使用本机代码可能会真正提高性能的地方之一。）然后我计划通过 P/Invoke 在单独的 DLL 中简单地调用本机函数。现在，将在托管代码和本机代码之间传递的唯一数据将是纯原始类型（bool、int、long、一维数组等）。所以我的问题是：仅使用原始类型的 P/invoke 会有任何重大开销吗？我知道在使用更复杂的类型时会产生大量开销，因为它们需要编组（固定/复制），但也许在我的情况下它会相对有效（甚至与从本机 DLL 本身调用代码相比）？如果有人能为我澄清这个问题，解释性能优势/命中的程度及其背后的原因，将不胜感激。完成整个任务的另一种方法也将受到欢迎，但由于 C# 缺乏对内联汇编/CIL 的支持，我不相信有一个。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-02-04T01:09:45.650

从 MSDN（[http://msdn.microsoft.com/en-us/library/aa712982.aspx](http://msdn.microsoft.com/en-us/library/aa712982.aspx)）：

“PInvoke 每次调用的开销在 10 到 30 个 x86 指令之间。除了这个固定成本之外，封送处理会产生额外的开销。在托管和非托管代码中具有相同表示的 blittable 类型之间没有封送处理成本。例如，有在 int 和 Int32 之间进行转换是免费的。”

因此，它相当便宜，但您应该像往常一样仔细测量以确保您从中受益，并记住任何维护开销。顺便说一句，对于任何复杂的互操作，我会推荐 C++/CLI（“托管”C++）而不是 P/Invoke，尤其是在您熟悉 C++ 的情况下。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-04T01:02:28.690

我似乎记得听说每个 P/Invoke 调用至少有 30 个机器操作开销。但是忽略理论，分析您的选择并选择最快的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-04T01:03:37.953

我会亲自设置一个使用 C# 和非托管 C++ 编写的简单表达式的测试工具，然后分析应用程序以查看您正在使用哪种性能增量。

其他需要考虑的事情是，您将在应用程序中引入维护问题，特别是如果您有初级开发人员希望维护代码。确保您知道在性能以及代码清晰度和可维护性方面您正在获得什么以及您正在失去什么。

顺便说一句，JIT 处理的 C# 代码在算术运算方面的性能应该与 C++ 相当。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-02-04T00:57:23.210

`ngen`通过在最终用户的计算机上使用（作为安装过程的一部分），您可以生成 .NET 程序集的已编译、优化版本。

根据我的经验，正确格式化的 C#（例如，将分配保持在循环之外）会表现得非常好。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-06-18T17:54:48.737

此链接提供了一些见解： http: [//www.codeproject.com/Articles/253444/PInvoke-Performance](http://www.codeproject.com/Articles/253444/PInvoke-Performance)

还要注意应用 [SuppressUnmanagedCodeSecurity] 属性时的性能差异。

# csv - 使用 csv 文件的 tclientdataset 的数据提供程序是什么？

> ID：509680
> 
> 赞同：1
> 
> 时间：2009-02-04T00:55:01.810
> 
> 标签：csv, c++builder

我有一个 tclientdataset。它用于从 csv 文件中获取数据。在应用程序运行之前，该 csv 文件可能不存在。我在 tbutton 中有以下代码...

```
ClientDataSet1->FileName = "c:\\testdata.csv";
ClientDataSet1->Open();

 AddFiles(Edit1->Text);
 ClientDataSet1->SaveToFile("c:\\testdata.csv"); 
```

当我运行应用程序时，我收到“缺少数据提供者或数据包”错误。我将数据提供程序设置为“Microsoft Text Driver (*.txt; *.csv)”，但仍然出现错误。

我错过了什么或做错了什么？我真的不想创建 dsn 或做任何手动的预运行工作。我希望应用程序完成所有这些。所以我可以把它移到另一台电脑上，它就可以工作了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-02-05T01:46:25.450

没有答案，所以我会回答并提供更新。我已经能够成功使用客户端数据集。我需要使用 clientdataset->createdataset() 创建它。

但它不会生成 CSV 文件。它生成一些其他类型的文件。

如果我可以让它生成一个理想的 CSV 文件，但现在我可以坚持它的工作方式。

# algorithm - 将直引号转换为弯引号的想法

> ID：509685
> 
> 赞同：14
> 
> 时间：2009-02-04T00:57:08.403
> 
> 标签：algorithm, language-agnostic, typography

我有一个包含“直”（普通，ASCII）引号的文件，我正在尝试将它们转换为真正的[引号字形](http://en.wikipedia.org/wiki/Quotation_mark_glyphs)（“弯”引号，U+2018 到 U+201D）。由于从两个不同的引号字符到单个引号字符的转换首先是有损的，显然没有办法自动执行这种转换；尽管如此，我怀疑一些启发式方法将涵盖大多数情况。所以计划是一个脚本（在 Emacs 中），它执行以下操作：对于每个直引号字符，

1.  如果可能的话，猜猜要使用哪个花引号字符
2.  要求用户（我）确认，或做出选择

这个问题是关于第一步：对于普通的英文文本（例如小说），什么是好的算法（一组启发式算法，更像是）？以下是一些初步的想法，我相信它们适用于双引号（**欢迎反例！**）：

1.  如果双引号位于行首，则猜测它是开引号。
2.  如果双引号位于行尾，请猜测结束引号。
3.  如果双引号前面有空格，请猜测开头的引号。
4.  如果双引号后跟一个空格，请猜一个结束引号。
5.  如果双引号不属于上述类别之一，则猜测它与最近使用的双引号“相反”。

单引号比较棘手，因为 a`'`可能是开头引号、结尾引号*或*撇号，我们希望单独留下撇号（不能写“mustn't”）。一些与上面相同的规则也适用，但 'tis 可能的撇号出现在单词（或行）的开头，尽管它不像过去的 'twas 那样常见。我想不出可以正确处理片段的规则，例如 [“我喜欢 '70 年代的节目'”，她说]。例如，它可能需要查看的不仅仅是相邻字符，还需要计算引号之间的距离……</p>

还有什么想法吗？如果没有涵盖所有可能的情况，也可以；目标是尽可能智能，但仅此而已。:-)

**编辑**：还有一些可能值得考虑的事情（或者可能无关紧要，不确定）：

*   **引号可能并不总是成对匹配**：对于单引号，很明显为什么如上所述。但即使对于双引号，当引用延伸超过一个段落时，通常的排版约定（不要问我为什么）是用引号开始每个段落，即使它在前一个没有关闭一。所以**简单地保持一个在两种状态之间交替的状态机是*行不通*的！**
*   嵌套引用（在上面的“我喜欢 '70 年代的演出'”示例中提到）：这可能会使任何一种引用*都不能*在空格之前或之后。
*   英式/美式标点样式：逗号在引号内还是在引号外？
*   许多文字处理器（例如 Microsoft Word）已经进行了类似这样的某种转换。尽管它们并不完美，而且常常令人讨厌，但了解它们的工作原理可能会很有启发性……

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-02-04T01:13:34.237

一个好的起点是使用状态机：

*   从位置 0 开始，遍历字符
*   找到报价后，进入“已报价”状态（打开报价）
*   如果处于“引用”状态并且遇到引用，则返回“开始”状态（结束引用）

您可以在每个状态转换时做出额外的决定。

例如，您可以尝试通过识别已知的连词来规范化单引号，并在处理之前将它们转换为不同的字符，而不是文本字符。

我的 0.02 美元

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-02-04T01:29:03.440

> 如果可能的话，猜猜要使用哪个花引号字符

在一般情况下，它不是。

大多数自动转换器使用的简单算法只是查看您在 ' 或 " 之前键入的前一个字母。如果它是空格、行首、左括号或其他开引号，请选择开引号，否则关闭。这种方法是它可以在键入时运行，因此当它选择错误时，您通常可以更正它。

> 我们想单独留下撇号

我同意！但没有多少人这样做。将撇号变成左单引号是正常的排版做法。就我个人而言，我更喜欢让它们保持原样，以将它们与封闭的引号区分开来，使文本更容易（我发现）阅读，并且可以自动处理。

然而，这确实只是我的口味，并且仅仅因为字符被 Unicode 标准定义为撇号而通常被认为是不合理的。

> 'tis可能的撇号在单词的开头

确实。在没有大量文化背景的情况下，在经典的 Fish 'n' Chips 等案例中，没有办法从潜在的公开报价中分辨出撇号。

（更不用说素数、冲调、声门塞音和撇号的各种其他用途......）

当然，最好的办法是安装一个可以直接输入智能引号的键盘布局。我在 AltGr+[] 上有 ''，在 AltGr+Shift+[] 上有“”，在 AltGr+[Shift]+dash 上有 –-，等等。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-02-04T02:57:55.883

看起来你最初的帖子涵盖了我要在这里写的大部分想法，这就是我剩下的......

对于撇号示例（“我喜欢 '70s show'”，她说），引号不太可能直接嵌套在相同类型的引号内。你可以利用这一点。

在我看来，最好的方法是让代码只处理明确的情况（双引号非常简单）。对于有多种可能选择的人，将他们的位置存储在一个列表中，并在完成时检查它。您可能会在那里找到一些更容易编码的案例，或者您可能只是决定手动修复它们。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-02-04T01:11:50.027

1.  基本的事情是总是试图找到匹配的对。鉴于每个报价都有一个匹配的报价，您可以让您的程序仅在不确定哪个是匹配的报价时寻求您的帮助。

2.  开头的引号总是在一行的开头或*前面*有一个空格。右引号*后面*总是有一个空格。如果您找到带有以下引号的冒号，则它可能是结束引号。

3.  如果引号后面的字母是大写的，则可能是开头引号。

4.  如果引号前面有标点符号，则可能是结束引号。

5.  尝试迭代地进行。该程序应该首先询问您可以确定分配给函数的所有引号。（只是为了确保它没有出错。）

6.  在第二轮中，就像所有引号一样，不确定它们是开引号还是撇号。对于所有开盘报价，它必须自动找到收盘报价。

另一个可能不太复杂的想法可能是：

1.  通过向用户询问每个可能是引用或非引用的内容来查找所有**非引用。**

2.  所有剩余的报价都应该很容易转换。开始引号前面有一个空格或换行符，后面有一个关闭。

最后一点想法：

您应该像仅按段落处理一样将流程分开。如果您的程序出错，这可能会导致语言的复杂性，您更容易纠正它，并且程序可以从新段落重新开始。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-02-04T02:00:32.333

我不想这么说，但最好的做法可能是研究 Word 的功能并复制它。即使在某些情况下它是错误的，它也代表了许多人已经习惯的标准。要模拟的一种行为是在您替换弯曲的引号后，撤消 (Ctrl-Z) 立即恢复为直引号。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-02-04T03:16:55.267

这是一个可能有助于双引号的正则表达式：

```
/([^\s\(]?)"(\s*)([^\\]*?(\\.[^\\]*)*)(\s*)("|\n\n)([^\s\)\.\,;]?)/gms 
```

它将在每个段落处重新开始，它会识别成对的引号（如果有用的话，还允许您检查引号前后的间距是否正确）。

```
Numbered element    identification  
  1               non-white-space before quote quote  
  2               white-space after leading quote  
  5               white-space before trailing quote  
  6               trailing quote (or double-newline, i.e. start of a paragraph  
  7               character after trailing quote if not whitespace or right   paren 
```

我认为将其扩展到您的其他情况是合理的（我只是还没有需要。）

这是javascript语法。它非常快，但我没有做比我的“足够好”更多的优化。它将在大约一秒钟内完成一本 400 页的书。我认为在程序上很难匹配它的速度。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-02-04T05:27:10.170

[计算语言学](http://xkcd.com/114/)有人吗？

有人提到如果你有大量的文化背景，这可能是可行的。因此，该问题的过度杀伤但最准确的自动化解决方案是[浅解析](http://en.wikipedia.org/wiki/Shallow_parsing)。这需要一个你正在处理的任何语言和模式的语料库（例如通用英语[的布朗语料库）。](http://en.wikipedia.org/wiki/Brown_Corpus)

根据语料库中出现的花引号的句法上下文开发花引号分类器。最后，给你的分类器一个直接引用的任意句法上下文，然后弹出最可能的引用字符！

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-02-04T02:37:33.943

[“我喜欢 '70 年代的演出'”，她说]

我最初认为也许在文本上使用多次传递来获得上下文洞察力可能会有所帮助，但这并不能解决所有情况。

您可以做的最好的事情是列出可能的单词集/表达式列表，例如 'twas、'tis、'70's 等，然后将它们放入字典中并对其进行自动更正，以将直线转换为卷曲，反之亦然。拼写检查无论如何都会对每个单词进行，不是吗？（抱歉，这对您的 emacs 问题没有帮助）

据我所知，OO 忽略了弯曲的单引号。

[维基百科](http://en.wikipedia.org/wiki/Quotation_mark_glyphs)有一些关于这些讨厌的东西的信息。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-10-11T11:18:09.483

尝试 Shift + Ctrl + " （双引号键），这在 Windows 10 上对我有用，使用名为 Kalipso 的程序。

# c# - 使用嵌入式资源加载 NHibernate 编程映射文件

> ID：509686
> 
> 赞同：0
> 
> 时间：2009-02-04T00:57:09.357
> 
> 标签：c#, .net, nhibernate, mapping

我的应用程序同时支持 Oracle 和 MS SQL 数据库，它们实现的架构略有不同。我遇到的一个问题是一个在 MS SQL 下具有自动增量主键的类，但在 Oracle 下具有手动插入的主键。

现在，该类的两个不同映射如下所示：

甲骨文：

```
<class lazy="false" name="EntityPropertyName" table="entity_property_name" >
<id name="ID" column="id" type="Int32" unsaved-value="-1">
  <generator class="increment" />
</id>
<property name="Name" column="name"/> 
```

微软 SQL：

```
<class lazy="false" name="EntityPropertyName" table="entity_property_name" >
<id name="ID" column="id" type="Int32" unsaved-value="-1">
  <generator class="native">
  </generator>
</id>
<property name="Name" column="name"/> 
```

这不是世界上最糟糕的事情，因为我可以将它们放入不同的映射文件并在运行时加载正确的映射文件。

```
NHibernate.Cfg.Configuration cfg = new NHibernate.Cfg.Configuration();

            if (newDBType == CompanyName.AppName.Data.Enum.DatabaseType.MsSqlServer)
            {
                cfg.Properties["dialect"] = "NHibernate.Dialect.MsSql2000Dialect";
                cfg.Properties["connection.driver_class"] = "NHibernate.Driver.SqlClientDriver";
                cfg.AddFile("DataTypes\\MSSQLTypes.hbm.xml");
            }
            else
            {
                cfg.Properties["dialect"] = "NHibernate.Dialect.Oracle9Dialect";
                cfg.Properties["connection.driver_class"] = "NHibernate.Driver.OracleClientDriver";
                cfg.AddFile("DataTypes\\OracleTypes.hbm.xml");
            }

            cfg.Properties["connection.provider"] = "NHibernate.Connection.DriverConnectionProvider";

            cfg.Properties["connection.connection_string"] = connectionString;

            cfg.AddAssembly("CompanyName.AppName.Data");

            Sessions = cfg.BuildSessionFactory(); 
```

不过，我不喜欢这种策略的一点是，我现在在程序的 bin 目录中有一些丑陋的 XML 文件，这些文件必须存在，否则应用程序将无法工作。如果我可以像使用主映射文件一样将不同的文件嵌入到资源中会更好，但选择是否在运行时加载每个文件。

有没有办法做到这一点，或者可能有不同的方法来解决这个问题？

* * *

编辑：谢谢你，克里斯蒂安！您确实理解了这个问题，我只是不知道 NHibernate 可以像那样加载资源。考虑一下，我认为 AddAssembly 方法必须有某种方法来枚举和加载它找到的资源是有意义的！

我的解决方案最终是：

```
NHibernate.Cfg.Configuration cfg = new NHibernate.Cfg.Configuration();

            if (newDBType == CompanyName.AppName.Data.Enum.DatabaseType.MsSqlServer)
            {
                cfg.Properties["dialect"] = "NHibernate.Dialect.MsSql2000Dialect";
                cfg.Properties["connection.driver_class"] = "NHibernate.Driver.SqlClientDriver";
                cfg.AddInputStream(Assembly.GetExecutingAssembly().GetManifestResourceStream("CompanyName.AppName.Data.DataTypes.MSSQLTypes.hbm.xml"));
            }
            else
            {
                cfg.Properties["dialect"] = "NHibernate.Dialect.Oracle9Dialect";
                cfg.Properties["connection.driver_class"] = "NHibernate.Driver.OracleClientDriver";
                cfg.AddInputStream(Assembly.GetExecutingAssembly().GetManifestResourceStream("CompanyName.AppName.Data.DataTypes.OracleTypes.hbm.xml"));
            }

            cfg.Properties["connection.provider"] = "NHibernate.Connection.DriverConnectionProvider";

            cfg.Properties["connection.connection_string"] = connectionString;

            cfg.AddInputStream(Assembly.GetExecutingAssembly().GetManifestResourceStream("CompanyName.AppName.Data.DataTypes.Types.hbm.xml"));

            Sessions = cfg.BuildSessionFactory(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-02-04T01:04:53.023

我可能错过了你的关键点。NHibernate 在如何向它提供映射文件方面非常灵活。例如

```
cfg.AddInputStream(assembly.GetManifestResourceStream("MyNamespace.MyEmbeddedresource.hbm.xml")); 
```

或自定义构建的 xml 字符串：

```
cfg.AddXml(myCustomBuildXmlString); 
```

您也可以直接以编程方式添加映射，但这有点棘手。

# syntax - 将一种语法嵌入到另一种语法中：是笨拙还是聪明？

> ID：509689
> 
> 赞同：2
> 
> 时间：2009-02-04T00:57:35.610
> 
> 标签：syntax, comparison, comments, cross-domain

**背景：**最近在查看“结构化文本编辑器”时，我注意到他们使用了一个技巧来更改 python/perl/c++/java 等。通过将 XML 潜入相应语言的注释中，形成一个“结构化”大纲。

我记得曾经在 Windows bat 文件中看到过这个技巧。bat 文件的 REM 语句用于“隐藏”一些 perl 代码。

**问题：**您是否见过有人使用编程或标记语言的注释来嵌入完全不同语言的语法的实例？如果是，您能否提供该示例的链接或解释它是什么？

如果你还没有，这里有一个例子：

*   [使用此技巧的编辑器文件格式示例。](http://leoeditor.com/appendices.html#format-of-leo-files)

**问题：**这种“技巧”是一个聪明有用的想法吗？如果是这样，你能列举一个你使用这个技巧的特殊实例吗？如果不是，你能描述为什么你认为这是一个坏主意吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-02-04T01:10:14.603

您说的是[polyglots](http://en.wikipedia.org/wiki/Polyglot_(computing))，这是计算机编程的一个绝对迷人的方面，也是对某些脚本/编程语言的模棱两可性质的精彩练习。虽然绝对是一个有趣的概念，但它们很少出现在新奇领域之外。然而，从编码员的角度来说，让你的工作在几个截然不同的环境中发挥作用绝对是一项壮举。然而，由于多语种人通常通过评论依赖各种技巧和变通方法，这几乎总是超出了可行性范围。但是，如果您还没有看到他们可以做什么，那么绝对值得一看；我会推荐[这个](http://mauke.ath.cx/stuff/poly.html)。

信不信由你，该单个文件将正确编译（以某种方式、形状或形式）为十五种不同的语言：

1.  HTML
2.  重击
3.  zsh
4.  C89
5.  C99
6.  C++
7.  生成文件
8.  红宝石
9.  Tcl
10.  Perl
11.  哈斯克尔
12.  Python
13.  JavaScript
14.  脑残
15.  空白

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-02-04T01:07:28.087

我不能给你一个完整的答案，但是 Netbean 喜欢在他们的 Java 生成代码中使用这个技巧。

问题是，Java 源代码应该是应用程序之间的媒介。通过为某些评论添加含义，您将被迫仅使用 Netbeans。当然这些评论可以被其他程序忽略，但是如果这些评论被移动或改变了怎么办？我已经在 Netbeans 中做到了，然后当我尝试将文件加载回 Netbeans 时发生了一些奇怪的事情。我不得不花时间修复我认为不可见的语法（在评论中！）。

就个人而言，如果现有文件需要多次非本地修改，我永远不会为它添加更多含义（意思是，可以在一个评论中具有含义，但从该评论到该评论没有意义）。在大多数情况下，我肯定会添加另一个包含所需元数据的文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-04T01:38:45.590

这种恐怖插入了有效的 XHTML、HTML 和 HTML3.2 之前的 tagoup '隐藏' 标记与 CSS 注释：

```
<style type="text/css"><!--/*--><![CDATA[/*><!--*/
    ...
/*]]>*/--></style> 
```

当我开始看到它实际使用时，我感到羞愧。这只是作为一种练习。对不起。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-02-04T01:53:33.157

我已经看到这个技巧（在评论中隐藏东西）用于在编辑器中折叠，在各种工具中进行文档标记，以及在建模工具中为往返工作留下面包屑。

我见过的另一个用途是在[Cog](http://nedbatchelder.com/code/cog/)中，一个代码生成器。你在注释中编写 python，然后 Cog 运行 python 来生成代码。这很有趣，因为重点是永远不需要/不想修改生成的代码，因此它不会遇到与您遇到的相同的烦恼，例如，当您不小心弄乱“折叠”注释时，折叠编辑器在不同的编辑器中。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-02-04T02:00:44.470

Visual Studio 有一种称为 T4 的形式。不幸的是，文档有点粗略。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-02-04T02:07:07.843

Python 文档中使用的一种最喜欢的标记是[Restructured Text](http://docutils.sourceforge.net/rst.html)。它是一种通用的简化标记语言，如 Markdown 或 Textile，但它具有良好的文档结构，并且可以轻松用于生成 HTML 或 PDF 文档。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-02-04T03:19:31.317

Donald Knuth 的 WEB 和 CWEB 在 TeX 中嵌入了 Pascal (WEB) 和 C (CWEB)。以下是 METAFONT 源代码中的示例：

```
@ The following system-independent code makes the |xord| array contain a
suitable inverse to the information in |xchr|. Note that if |xchr[i]=xchr[j]|
where |i<j<@'177|, the value of |xord[xchr[i]]| will turn out to be
|j| or more; hence, standard ASCII code numbers will be used instead of
codes below @'40 in case there is a coincidence.

@<Set init...@>=
for i:=first_text_char to last_text_char do xord[chr(i)]:=@'177;
for i:=@'200 to @'377 do xord[xchr[i]]:=i;
for i:=0 to @'176 do xord[xchr[i]]:=i; 
```

# search - 你如何列出 Vim 搜索的匹配项？

> ID：509690
> 
> 赞同：107
> 
> 时间：2009-02-04T00:57:37.903
> 
> 标签：search, vim

当我点击时，我想列出比赛：

```
/example 
```

这样我就可以立即看到所有匹配项的位置。

* * *

## 回答 #1

> 赞同：240
> 
> 时间：2009-02-04T01:10:06.740

```
:g//p 
```

更长的形式：

```
:global/regular-expression/print 
```

你可以省略模式/正则表达式，Vim 将重新使用之前的搜索词。

*琐事：*[grep](https://en.wikipedia.org/wiki/Grep)工具以该命令序列命名。

* * *

## 回答 #2

> 赞同：52
> 
> 时间：2009-02-06T14:48:43.340

您还可以执行以下操作：

`g/pattern/#`

这将打印您想要的模式和行号。

* * *

## 回答 #3

> 赞同：46
> 
> 时间：2009-02-13T09:10:31.363

如果您想查看此列表并在匹配之间快速跳转，请考虑使用

`:vimgrep example %`

或者

`:grep example %`

这将使用所有匹配项填充“错误列表”，以便您可以`:copen`将它们全部列出在快速修复缓冲区中，在特定行上按 enter 以跳转到该匹配项，或使用类似`:cn`and之类的命令`:cp`来回移动。

有关详细说明，请参阅[我对类似问题的回复](https://stackoverflow.com/questions/537431/redirection-to-a-file-of-a-search-in-vim/545243#545243)

* * *

## 回答 #4

> 赞同：37
> 
> 时间：2014-01-08T16:14:19.263

刚学了一个新的：`Location List`！在当前文件中
键入`:lvim foo %`要搜索的内容并将所有匹配项输入到*位置列表中*。 键入以在快速修复窗口中打开位置列表，该窗口像往常一样完全可导航。 使用/ to 遍历列表（使用*tpope/unimpaired*映射以获得最佳体验）`foo``foo` *`:lopen`
`:lnext``:lprevious`*

 *** * *

## 回答 #5

> 赞同：17
> 
> 时间：2012-03-21T18:47:45.443

另一种可能性是使用包含文件搜索命令。

```
[I 
```

这将列出光标下所有出现的单词。它可能超出您的需要，因为它还会搜索当前文件中包含的任何文件。

但是这个命令的好处是搜索结果显示除了每个匹配的行号之外还显示匹配数的计数。

```
:help include-search 
```

看到很多变种。

关于

```
:g//p 
```

这可以进一步减少到

```
:g// 
```

因为，正如其他人所说， p(rint) 是默认操作。

* * *

## 回答 #6

> 赞同：13
> 
> 时间：2016-08-18T13:54:00.997

您可以获得一个漂亮的`quickfix`窗口，其中包含当前搜索模式的匹配项

```
:vim // %
:copen 
```

如果您以前只使用`/pattern`

**编辑**：刚刚发现这也适用于所有打开的缓冲区

```
:bufdo vimgrepadd // %
:copen 
```

* * *

## 回答 #7

> 赞同：10
> 
> 时间：2009-02-04T01:01:41.000

使用`:set hlsearch`将以黄色突出显示所有匹配项，使您可以轻松扫描文件以查找匹配项。不过，这可能不是您想要的，在搜索之后， :g//p 会给您列出的匹配项

* * *

## 回答 #8

> 赞同：9
> 
> 时间：2009-02-04T07:21:26.490

详细说明这一点......而不是

```
/example
:g//p 
```

也可以直接写

```
:g/example/p 
```

或者，因为 p(rint) 是 :g(lobal) 命令的默认操作，所以可以缩短为

```
:g/example 
```

除了 p(rint)，其他动作也是可能的，例如 d(elete)。请参阅：帮助：全球

* * *

## 回答 #9

> 赞同：6
> 
> 时间：2015-08-31T10:16:08.170

```
g/pattern 
```

如果你有`:set number`，上面的命令也会显示行号。

如果你还没有`:set number`，那么

```
g/pattern/# 
```

将显示行号。

* * *

## 回答 #10

> 赞同：5
> 
> 时间：2017-05-27T19:40:08.517

```
 " put in your ~/.vimrc file
    " START search related configs and helps
    "
    " ignore case when searching
    set ignorecase

    " search as characters are entered, as you type in more characters, the search is refined
    set incsearch

    " highlight matches, in normal mode try typing * or even g* when cursor on string
    set hlsearch

    " yank those cheat commands, in normal mode type q: than p to paste in the opened cmdline
    " how-to search for a string recursively
    " :grep! "\<doLogErrorMsg\>" . -r
    "
    " how-to search recursively , omit log and git files
    " :vimgrep /srch/ `find . -type f \| grep -v .git \| grep -v .log`
    " :vimgrep /srch/ `find . -type f -name '*.pm' -o -name '*.pl'`
    "
    " how-to search for the "srch" from the current dir recursively in the shell
    " vim -c ':vimgrep /srch/ `find . -type f \| grep -v .git \| grep -v .log`'
    "
    " how-to highlight the after the search the searchable string
    " in normmal mode press g* when the cursor is on a matched string

    " how-to jump between the search matches - open the quick fix window by
    " :copen 22

    " how-to to close the quick fix window
    " :ccl

    " F5 will find the next occurrence after vimgrep
    map <F5> :cp!<CR>

    " F6 will find the previous occurrence after vimgrep
    map <F6> :cn!<CR>

    " F8 search for word under the cursor recursively , :copen , to close -> :ccl
    nnoremap <F8> :grep! "\<<cword>\>" . -r<CR>:copen 33<CR>

    " omit a dir from all searches to perform globally
    set wildignore+=**/node_modules/**

    " use perl regexes - src: http://andrewradev.com/2011/05/08/vim-regexes/
    noremap / /\v
    "
    " STOP  search related configs and helps 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-11-13T23:56:15.497

我为此写了一段代码。它实际上避免了`vimgrep`. 它甚至适用于未命名的文件。而且更容易使用。

```
function! Matches(pat)
    let buffer=bufnr("") "current buffer number
    let b:lines=[]
    execute ":%g/" . a:pat . "/let b:lines+=[{'bufnr':" . 'buffer' . ", 'lnum':" . "line('.')" . ", 'text': escape(getline('.'),'\"')}]"
    call setloclist(0, [], ' ', {'items': b:lines}) 
    lopen
endfunction 
```

当您使用模式调用它时，它会打开包含所有匹配项的位置窗口。

这可能是一个命令

```
command! -nargs=1 Mat call Matches(<f-args>) 
```

所以你需要做的就是输入`:Mat pattern`

我还使用以下映射来获取当前视觉选择的匹配项。

```
vnoremap Y "xy:call Matches(@x)<CR> 
```

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2017-10-12T13:45:10.847

Ctrl-f 列出所有搜索结果：

```
nmap <C-f> :vimgrep /<C-r>//g %<CR> \| !:copen <Enter> 
```

# python - Python 商与余数

> ID：509710
> 
> 赞同：-3
> 
> 时间：2009-02-04T01:05:46.750
> 
> 标签：python, modulo

python 2.6 文档状态`x % y`定义为 x / y 的余数（[http://docs.python.org/library/stdtypes.html#numeric-types-int-float-long-complex](http://docs.python.org/library/stdtypes.html#numeric-types-int-float-long-complex)）。我不清楚到底发生了什么，因为：

```
for i in range(2, 11):
    print 1.0 % i 
```

打印“1.0”十次，而不是我预期的“0.5、0.333333、0.25”等（1/2 = 0.5 等）。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-02-04T01:10:12.497

取模是在整数上下文中执行的，而不是小数（余数是整数）。所以：

```
1 % 1  = 0  (1 times 1 plus 0)
1 % 2  = 1  (2 times 0 plus 1)
1 % 3  = 1  (3 times 0 plus 1)

6 % 3 = 0  (3 times 2 plus 0)
7 % 3 = 1  (3 times 2 plus 1)
8 % 3 = 2  (3 times 2 plus 2)

etc 
```

> *如何获得 x / y 的实际余数？*

我认为您的意思是进行常规浮点除法？

```
for i in range(2, 11):
    print 1.0 / i 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-02-04T01:37:06.890

我认为您可以通过执行以下操作获得所需的结果：

```
for i in range(2, 11):
    print 1.0*(1 % i) / i 
```

如其他人所解释的，这将计算（整数）余数。然后再除以分母，得到商的小数部分。

请注意，我将模运算的结果乘以 1.0 以确保完成浮点除法运算（而不是整数除法，这将导致 0）。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-02-04T02:08:57.387

您混淆了[除法](http://en.wikipedia.org/wiki/Division_(mathematics))和[模数](http://en.wikipedia.org/wiki/Modular_arithmetic)。

“0.5、0.333333、0.25”等，正如我所料（1/2 = 0.5 等）。

这就是*除法*的结果。

不是*模数*。

模数 ( `%`) 是整数除法后的余数。

Your sample values are simple division, which is the `/` operator. Not the `%` operator.

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-02-04T01:11:49.483

将 1 除以一个大于它的数字会不会导致 0 余数为 1？

人群中的数论家可能会纠正我，但我认为模数/余数仅在整数上定义。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-06-13T11:00:00.763

We can have 2 types of division, that we can define through the return types:

Float: a/b. For example: 3/2=1.5

```
def division(a,b):
    return a/b 
```

Int: a//b and a%b. For example: 3//2=1 and 3%2=1

```
def quotient(a,b):
    return a//b
def remainder(a,b):
    return a%b 
```

# html - 为什么溢出：隐藏在 a 中不起作用？

> ID：509711
> 
> 赞同：155
> 
> 时间：2009-02-04T01:06:05.827
> 
> 标签：html, css

我有一个表格单元格，我总是希望它具有特定的宽度。但是，它不适用于大的无空格文本字符串。这是一个测试用例：

```
td {
  border: solid green 1px;
  width: 200px;
  overflow: hidden;
}
```

```
<table>
  <tbody>
    <tr>
      <td>
        This_is_a_terrible_example_of_thinking_outside_the_box.
      </td>
    </tr>
  </tbody>
</table>
```

如何让文本在框的边缘被切断，而不是让框展开？

* * *

## 回答 #1

> 赞同：217
> 
> 时间：2009-02-04T02:04:40.297

这是[同样的问题](https://stackoverflow.com/questions/480722/how-can-i-set-a-td-width-to-visually-truncate-its-displayed-contents)。

您需要在表格元素以及表格单元格上设置`table-layout:fixed` *合适*`overflow:hidden`的宽度`white-space: nowrap`。

* * *

## 例子

### 固定宽度列

表格的宽度必须与固定宽度单元格相同（或更小）。

**使用一个固定宽度的列：**

```
* {
  box-sizing: border-box;
}
table {
  table-layout: fixed;
  border-collapse: collapse;
  width: 100%;
  max-width: 100px;
}
td {
  background: #F00;
  padding: 20px;
  overflow: hidden;
  white-space: nowrap;
  width: 100px;
  border: solid 1px #000;
}
```

```
<table>
  <tbody>
    <tr>
      <td>
        This_is_a_terrible_example_of_thinking_outside_the_box.
      </td>
    </tr>
    <tr>
      <td>
        This_is_a_terrible_example_of_thinking_outside_the_box.
      </td>
    </tr>
  </tbody>
</table>
```

**具有多个固定宽度的列：**

```
* {
  box-sizing: border-box;
}
table {
  table-layout: fixed;
  border-collapse: collapse;
  width: 100%;
  max-width: 200px;
}
td {
  background: #F00;
  padding: 20px;
  overflow: hidden;
  white-space: nowrap;
  width: 100px;
  border: solid 1px #000;
}
```

```
<table>
  <tbody>
    <tr>
      <td>
        This_is_a_terrible_example_of_thinking_outside_the_box.
      </td>
      <td>
        This_is_a_terrible_example_of_thinking_outside_the_box.
      </td>
    </tr>
    <tr>
      <td>
        This_is_a_terrible_example_of_thinking_outside_the_box.
      </td>
      <td>
        This_is_a_terrible_example_of_thinking_outside_the_box.
      </td>
    </tr>
  </tbody>
</table>
```

### 固定和流体宽度列

**必须设置**表格的宽度，但任何额外的宽度都由流体单元简单地采用。

**具有多列，固定宽度和流体宽度：**

```
* {
  box-sizing: border-box;
}
table {
  table-layout: fixed;
  border-collapse: collapse;
  width: 100%;
}
td {
  background: #F00;
  padding: 20px;
  border: solid 1px #000;
}
tr td:first-child {
  overflow: hidden;
  white-space: nowrap;
  width: 100px;
}
```

```
<table>
  <tbody>
    <tr>
      <td>
        This_is_a_terrible_example_of_thinking_outside_the_box.
      </td>
      <td>
        This_is_a_terrible_example_of_thinking_outside_the_box.
      </td>
    </tr>
    <tr>
      <td>
        This_is_a_terrible_example_of_thinking_outside_the_box.
      </td>
      <td>
        This_is_a_terrible_example_of_thinking_outside_the_box.
      </td>
    </tr>
  </tbody>
</table>
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2009-02-04T01:23:40.190

TD就是这样。我相信这可能是因为 TD 元素的“显示”属性固有地设置为“表格单元”而不是“块”。

在您的情况下，替代方法可能是将 TD 的内容包装在 DIV 中，并将宽度和溢出应用于 DIV。

```
<td style="border: solid green 1px; width:200px;">
    <div style="width:200px; overflow:hidden;">
        This_is_a_terrible_example_of_thinking_outside_the_box.
    </div>
</td> 
```

可能需要处理一些填充或单元格填充问题，您最好删除内联样式并改用外部 css，但这应该是一个开始。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2015-02-04T21:14:22.537

将 CSS `table-layout:fixed;`（有时`width:<any px or %>`）应用到 TD 上的 TABLE 和`white-space: nowrap; overflow: hidden;`样式。*然后在正确*的单元格或列元素上设置 CSS 宽度。

值得注意的是，固定布局表格的列宽由表格第一行中的单元格宽度决定。如果第一行有 TH 个元素，并且宽度应用于 TD（而不是 TH），则宽度仅应用于 TD 的内容（可以忽略空白和溢出）；无论设置的 TD 宽度如何，表格列都将均匀分布（因为 [在第一行的 TH 上] 没有指定宽度）并且列将具有 [计算] 相等的宽度；该表不会根据后续行中的 TD 宽度重新计算列宽。设置表格将遇到的第一个单元格元素的宽度。

或者，设置列宽的最安全方法是在表格中使用`<COLGROUP>`和`<COL>`标记，并在每个固定宽度 COL 上设置 CSS 宽度。当表格预先知道列宽时，与单元格宽度相关的 CSS 效果会更好。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2009-02-04T01:22:39.087

我不熟悉具体问题，但您可以在 td 中粘贴一个 div 等并在其上设置溢出。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2014-05-09T12:56:00.427

最佳解决方案是将 div 放入宽度为零的表格单元格中。Tbody 表格单元格的宽度将继承自 thead 定义的宽度。位置：相对和负边距应该可以解决问题！

这是截图： [https ://flic.kr/p/nvRs4j](https://flic.kr/p/nvRs4j)

```
<body>
<!-- SOME CSS -->
<style>
    .cropped-table-cells,
    .cropped-table-cells tr td { 
        margin:0px;
        padding:0px;
        border-collapse:collapse;
    }
    .cropped-table-cells tr td {
        border:1px solid lightgray;
        padding:3px 5px 3px 5px;
    }
    .no-overflow {
        display:inline-block;
        white-space:nowrap;
        position:relative; /* must be relative */
        width:100%; /* fit to table cell width */
        margin-right:-1000px; /* technically this is a less than zero width object */
        overflow:hidden;
    }
</style>

<!-- CROPPED TABLE BODIES -->
<table class="cropped-table-cells">
    <thead>
        <tr>
            <td style="width:100px;" width="100"><span>ORDER<span></td>
            <td style="width:100px;" width="100"><span>NAME<span></td>
            <td style="width:200px;" width="200"><span>EMAIL</span></td>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td><span class="no-overflow">123</span></td>
            <td><span class="no-overflow">Lorem ipsum dolor sit amet, consectetur adipisicing elit</span></td>
            <td><span class="no-overflow">sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</span></td>
    </tbody>
</table>
</body> 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2009-02-04T01:08:27.150

好吧，这是一个适合您的解决方案，但我真的不明白它为什么会起作用：

```
<html><body>
  <div style="width: 200px; border: 1px solid red;">Test</div>
  <div style="width: 200px; border: 1px solid blue; overflow: hidden; height: 1.5em;">My hovercraft is full of eels.  These pretzels are making me thirsty.</div>
  <div style="width: 200px; border: 1px solid yellow; overflow: hidden; height: 1.5em;">
  This_is_a_terrible_example_of_thinking_outside_the_box.
  </div>
  <table style="border: 2px solid black; border-collapse: collapse; width: 200px;"><tr>
   <td style="width:200px; border: 1px solid green; overflow: hidden; height: 1.5em;"><div style="width: 200px; border: 1px solid yellow; overflow: hidden;">
    This_is_a_terrible_example_of_thinking_outside_the_box.
   </div></td>
  </tr></table>
</body></html> 
```

即，将单元格内容包装在 div 中。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2019-07-24T16:55:20.110

最简单、最简单的解决方案：

```
table { table-layout: fixed }

table td {     
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis; 
} 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2010-04-30T01:34:18.543

您必须设置表格的样式属性：`width`并`table-layout: fixed;`让“溢出：隐藏；” 属性正常工作。

Imo 这比使用带有`width`样式属性的 div 效果更好，尤其是在将其用于动态调整大小计算时，表格将具有更简单的 DOM，这使得操作更容易，因为不需要对填充和边距进行更正

另外，您不必为所有单元格设置宽度，而只需为第一行中的单元格设置宽度。

像这样：

```
<table style="width:0px;table-layout:fixed">
<tr>
    <td style="width:60px;">
        Id
    </td>
    <td style="width:100px;">
        Name
    </td>
    <td style="width:160px;overflow:hidden">
        VeryLongTextWhichShouldBeKindOfTruncated
    </td>
</tr>
<tr>
    <td style="">
        Id
    </td>
    <td style="">
        Name
    </td>
    <td style="overflow:hidden">
        VeryLongTextWhichShouldBeKindOfTruncated
    </td>
</tr>
</table> 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2012-01-23T16:51:27.647

我刚刚遇到了类似的问题，一开始不得不使用`<div>`内部`<td>`（John MacIntyre 的解决方案由于各种原因对我不起作用）。

**请注意**，尽管这`<td><div>...</div></td>`不是 div 的有效位置，所以我使用的是`<span>`with `display:block;`set。它现在验证良好并且可以正常工作。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2018-09-13T15:04:19.653

```
<style>
    .col {display:table-cell;max-width:50px;width:50px;overflow:hidden;white-space: nowrap;}
</style>
<table>
    <tr>
        <td class="col">123456789123456789</td>
    </tr>
</table> 
```

显示 123456

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-07-05T08:55:56.660

为了更简单，我建议在 td 内放置一个 textarea ，它会自动管理溢出

`<td><textarea autofocus>$post_title</textarea></td>`

需要改善

# c# - 用于保存 Word 文档的 IIS 权限

> ID：509723
> 
> 赞同：2
> 
> 时间：2009-02-04T01:11:36.520
> 
> 标签：c#, asp.net, vbscript, iis-6

我们的 ASP.NET/C# 允许用户编辑和管理托管在服务器上的 Word (OpenXML) 文档。我正在使用客户端`VBScript`功能来处理一些编辑功能，包括将文档保存到服务器上的文件夹中。对于保存功能，我使用以下函数调用：

```
Document.SaveAs "http://server/savefolder/savefile.docx" 
```

我已将保存文件夹的“完全控制”权限授予用户`NETWORK SERVICE`和`IUSR_MACHINE`用户。然而上面的调用失败了。返回的错误号是`5096`。错误消息是一些没有任何意义的胡言乱语。

服务器是Windows 2003，IIS版本是6.0。我已经在服务器上安装了 OpenXML SDK 2.0 CTP。

我可以成功阅读和打印文档。

有人告诉我我做错了什么吗？或者需要进行哪些其他设置？

* * *

顺便说一句，错误消息（我的帖子中的“乱码”）是：

"EOALPHABETICARABICARABICABJADARABICALPHABAHTTEXTCAPSCARDTEXTCHARFORMATCHI"

不，我不是在编造这个！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-09-18T09:38:43.910

就我而言，在 Access 中使用 VBA 代码驱动 Word 邮件合并时，发生了错误 5096，其描述为“EOALPHABETICARABICARABICABJADARABICALPHABAHTTEXTCAPSCARDTEXTCHARFORMATCHI”。原因是试图将同名（包括路径）的文档保存为打开的文档。

错误行：

```
objApp.ActiveDocument.SaveAs saveAsName 
```

其中`objApp`是表示 Word 应用程序的对象变量，`saveAsName`是存储名称的字符串变量，我试图将文件另存为`"C:\temp\testdoc.docx"`.

如果存在同名文件但未打开，则上面的代码会静默覆盖它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-07T00:52:42.013

事实证明 WebDAV 在 IIS 6.0 中默认没有打开。一旦我打开它，我就可以很好地保存文件。

感谢您的所有回答！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-06T15:02:47.790

我会尝试在客户端上运行[Fiddler](http://www.fiddlertool.com/Fiddler2/version.asp)，同时尝试保存文档以了解实际情况。我想知道它是否正在尝试执行 HTTP PUT（而不是 POST）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-02-06T15:32:00.990

您是否授予对 IIS 管理器中文件夹的写入权限？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-02-04T01:37:30.773

只是猜测......如果vbscript在客户端运行，代码可能在用户帐户下运行，而不是在服务器的IIS帐户下运行。因此，除非您授予该用户写入权限，否则 vbscript 可能不适用于此。

由于您使用的是 ASP.NET，因此您可以尝试编写一个 Web 服务来接收 Word 文档数据并将其保存到服务器上。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-02-05T08:34:23.490

您使用的保存文件夹是否在网站根目录之外，即从互联网“隐藏”？

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2011-11-24T16:14:29.533

这个问题很老但仍然活跃？您使用 http://... url 保存文件，我认为您应该使用文件 URL 将其保存为

```
Document.SaveAs "\\server\savefolder\savefile.docx" 
```

格茨

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2011-04-07T11:21:39.663

只是为了添加到SI的信息......

当我的代码尝试将具有**相同名称的 MS Word 文档保存到与****已经**在另一个 Word 实例中打开的 Word 文档相同的位置时，我也得到了**5096** - **EOALPHABETICARABICARABICABJADARABICALPHABAHTTEXTCAPSCARDTEXTCHARFORMATCHI错误。**

 ****尽管与此线程不完全相关，但我希望它可以帮助偶然发现此线程的其他人！

问候，杜安，

# assembly - 如何比较两个相似的 g++ -S 汇编输出？

> ID：509726
> 
> 赞同：1
> 
> 时间：2009-02-04T01:12:35.253
> 
> 标签：assembly, diff, g++

diff 失败，因为程序集列表中的标签略有不同。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-02-04T01:43:53.990

`-S`您可以编译为目标文件，反汇编目标文件，然后比较它们，而不是直接比较该选项生成的程序集列表。（或者，您可以直接对已编译目标代码的 hexdump 进行比较，但这会更痛苦）。这摆脱了大多数标签，因此它应该更容易与 diff 进行比较。例如：

```
g++ file1.cc -c -o file1.o
g++ file2.cc -c -o file2.o
objdump -d file1.o > file1.s
objdump -d file2.o > file2.s
diff file1.s file2.s 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-04T01:28:34.037

您可以使用简单的 sed 去除标签，并将它们全部替换为“标签”或空格（并使用“diff -w”）。

这不会考虑使用不同寄存器但操作相同的地方。这可能很常见，向函数添加变量会导致寄存器在整个代码中重新分配到不直接相关的位置。

处理这种情况的唯一方法是编写一个程序来专门寻找和处理这些情况。我认为您不会找到任何适用于所有条件的“简单”解决方案。

# cocoa - 如何将 cstring 转换为 NSString？

> ID：509728
> 
> 赞同：26
> 
> 时间：2009-02-04T01:14:47.887
> 
> 标签：cocoa

我已经能够找到类似的方法，`-[NSString stringWithCString:encoding:]`但是当 cstring 是指针时它们似乎不能很好地发挥作用。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2009-02-08T12:37:07.613

首先，不要使用`initWithCString`，它已被弃用。

有几种方法可以做到这一点：

```
const *char cString = "Hello";
NSString *myNSString = [NSString stringWithUTF8String:cString]; 
```

如果您需要另一种编码，如 ASCII：

```
const *char cString = "Hello";
NSString *myNSString = [NSString stringWithCString:cString encoding:NSASCIIStringEncoding]; 
```

如果你想查看所有可用的字符串编码，在 Xcode 中，按住**command + 选项**然后**双击**上面的`NSASCIIStringEncoding`代码块。

您将能够看到 Apple 在何处声明了字符串编码类型的枚举。比试图在文档中找到它要快一点。

您可能需要的其他一些：

```
NSASCIIStringEncoding
NSUnicodeStringEncoding // same as NSUTF16StringEncoding
NSUTF32StringEncoding 
```

查看 Apple 的[NSString 类参考](http://developer.apple.com/mac/library/documentation/cocoa/reference/Foundation/Classes/NSString_Class/Reference/NSString.html)（编码位于页面底部）

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2014-09-18T06:14:39.933

使用现代的 Objective-C（至少从 Xcode 5 开始）你可以这样做：

```
char const* cString = "Hello";
NSString *myNSString = @(cString); 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2009-02-04T01:19:33.163

`stringWithCString:encoding:`从给定的 C 字符串创建一个 NSString。要从 NSString 创建 C 字符串，请使用`UTF8String`方法（通常首选）或`cStringUsingEncoding:`（如果您需要 UTF-8 以外的编码）。

# ruby - 学习更高级的 Ruby OOP 结构的最佳方式是什么？

> ID：509729
> 
> 赞同：3
> 
> 时间：2009-02-04T01:15:20.537
> 
> 标签：ruby, oop, resources

所以我已经成为一个相当熟练的 Rails 开发人员，我发现我的瓶颈现在是我对更复杂的 Ruby 结构缺乏了解。我正在尝试构建一些插件，并查看一些复杂的插件，他们的 OOP 魔法对我来说是希腊语。（我从来没有接受过太多正式的 OOP 培训，所以这是问题的一部分。）

我想更好地理解：

*   将方法从一个地方发送到另一个地方（包括、扩展等）
*   元编程和覆盖方法（超级）
*   类继承、模块等

严肃的 Ruby 书籍似乎太多了。有没有一种实用的方法来学习这些东西，既能扩展我的能力，又不会让我在语言的内部工作中不堪重负？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-02-04T01:22:50.460

最好的方法是使用它并通过查看其他人的代码来学习。

我认为没有比[官方文档页面](http://www.ruby-lang.org/en/documentation/)更好的起点了。

对不起，如果我让你失望了，但是没有*简单*的方法来学习所有这些结构。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-02-04T01:28:19.107

您还可以在一些书籍中掠夺，例如，镐： [http ://whytheluckystiff.net/ruby/pickaxe/](http://whytheluckystiff.net/ruby/pickaxe/)

特别看一下 OOP 和元编程部分。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-02-04T01:31:42.937

我发现[ruby​​ 测验](http://rubyquiz.com)是提高您对 ruby​​ 知识的绝佳资源。您可以购买书籍版本或仅使用网站上的条目。不同的问题将有助于使用语言的不同部分。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-02-04T17:27:42.023

我发现Dave Thomas 的[这些](http://www.pragprog.com/screencasts/v-dtrubyom/the-ruby-object-model-and-metaprogramming)截屏视频非常适合，此外，它的标题很实用，所以你不能错过 :D

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-03-27T03:55:04.693

这个[Peepcode 插件模式 pdf](http://peepcode.com/products/rails-2-plugin-patterns)实际上回答了我所有的问题；我试图做的是编写一个插件，所以它正是我需要的信息。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-02-04T02:02:09.863

开始的最好方法是了解类层次结构在内部是如何真正工作的，这样你就知道什么时候调用。换句话说，您需要了解元类。

这里有两个资源最能帮助我理解这个概念：[为什么解释](http://whytheluckystiff.net/articles/seeingMetaclassesClearly.html)和[另一个](http://practicalruby.blogspot.com/2007/02/ruby-metaprogramming-introduction.html)

您也可以尝试这些[ruby​​ plus](http://www.bestechvideos.com/2008/07/01/ruby-plus-59-ruby-metaclasses-part-5)截屏视频。还有很多关于你似乎感兴趣的其他话题

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-02-04T02:01:07.713

您还可以尝试学习另一种语言的基础知识（例如 Java 或 C#）。

我认为学习一门新语言可以是一种非常有效和有趣的方式来熟悉解决问题的不同方法（在你的情况下是面向对象的编程概念）。

一旦你知道如何编码，学习一门新语言的基础知识就相对容易而且非常有趣，所以你往往在一开始就取得非常快的进步

当你试图掌握对你来说新的概念时，在一个同样新的框架中理解它们可能会更容易。这样你就可以专注于你想要学习的概念，而不是你可以用你的语言以不同的方式解决这个问题的方式，等等......

# c# - win api 和 c# - 桌面

> ID：509733
> 
> 赞同：2
> 
> 时间：2009-02-04T01:17:04.807
> 
> 标签：c#, winapi, virtual-desktop

好的，所以我在网上找到了这个类，它“创建”了第二个不运行任何东西的桌面（即没有调用 explorer.exe 等等）。

但是，这个新创建的桌面拒绝关闭并返回原始桌面。我不知道是怎么回事。因此，如果有人可以在他们的机器上试用它，那将非常有帮助。

注意：假设所有 win api 标头都已声明并工作。

“锁定”当前桌面的类：

```
namespace Locker
{
    class CLocker
    {
        public static int DesktopHandle;                    // Hold desktop handle.
        public static int oldDesktopHandle;
        public static int DesktopInputID;                   // Hold desktop input id.
        public static int DesktopThreadID;                  // Hold desktop thread id.
        static string DesktopName = "DL.Locker.Desktop";    // Hold the name of new created desktop.
        static FileStream TaskMan;                          // Hold the file stream object to control task manager.
        static string FastSwitching = string.Empty;         // Hold the original value of fast switching i.e. welcome screen
        static string ShutdownWithoutLogin = string.Empty;  // Hold the original value of showinh the shutdown button on welcome screen.

        /// <summary>
        /// Enabled used to enable or disable the locker
        /// </summary>
        public static bool Enabled
        {
            set
            {
                SetProcessPriorityHigh();                       // Set the process priority to high.
                if (value)                                      // Enable or disable the locker?
                {
                    CreateNewDesktop();                         // Creating new desktop.
                    StartProcess(Application.ExecutablePath);   // Starting the locker form, to allow the user to enter login info.
                }
                else
                {
                    DestroyDesktop();                           // Destroy the desktop.
                    ExitProcess(0);                             // Exit the current process, if desktop attached with no process, default desktop will be activated.
                }
            }
        }

        public static bool NeedBootStrapping()
        {
            Console.WriteLine((GetDesktopName() != DesktopName).ToString());
            return (GetDesktopName() != DesktopName);
        }

        static string GetDesktopName()
        {
            int DLength = 0, DHandle = GetThreadDesktop(GetCurrentThreadId());
            StringBuilder DName = new StringBuilder();
            GetUserObjectInformation(DHandle, UOI_NAME, DName, 0, ref DLength);
            if (DLength != 0) GetUserObjectInformation(DHandle, UOI_NAME, DName, DLength, ref DLength);
            Console.WriteLine(DName.ToString());
            return (DName.ToString());
        }

        static void CreateNewDesktop()
        {
            DesktopThreadID = GetThreadDesktop(GetCurrentThreadId());
            DesktopInputID = OpenInputDesktop(0, false, DESKTOP_SWITCHDESKTOP);
            DesktopHandle = CreateDesktop(DesktopName, "", 0, 0, GENERIC_ALL, 0);
            if (DesktopHandle != 0)
            {
                SetThreadDesktop(DesktopHandle);
                SwitchDesktop(DesktopHandle);
            }
        }

        public static void DestroyDesktop()
        {
            SwitchDesktop(DesktopInputID);
            DesktopInputID = 0;
            SetThreadDesktop(DesktopInputID);
            DesktopThreadID = 0;
            CloseDesktop(DesktopHandle);
            DesktopHandle = 0;
        }

        static void StartProcess(string Path)
        {
            MessageBox.Show("Hello from startProcess");
            DestroyDesktop();
        }

        static void SetProcessPriorityHigh()
        {
            SetThreadPriority(GetCurrentThread(), THREAD_BASE_PRIORITY_MAX);
            SetPriorityClass(GetCurrentProcess(), REALTIME_PRIORITY_CLASS);
        }
    }
} 
```

和 main() 函数：

```
static void Main()
        {
            if (CLocker.NeedBootStrapping())
                CLocker.Enabled = true;        // Check if we need boot strapping or not, if true then a new desktop will created.
            else  // Run application as usual.
            {
                MessageBox.Show("Hello, this is your new desktop");
                CLocker.Enabled = false;
            }
        } 
```

**更新：**此代码无法编译。它在“当前上下文中不存在”的字样下方出现了大约 40 条红色波浪线。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-08-22T03:23:45.077

不要在隐藏的桌面实例上弹出需要用户输入才能清除的消息框。这通常也是在服务中托管 UI 代码的失败。

此外，在运行代码之前研究所有非托管 API 调用是个好主意。

# ruby-on-rails - Rails ActiveRecord：自动别名/附加后缀？

> ID：509741
> 
> 赞同：1
> 
> 时间：2009-02-04T01:24:28.427
> 
> 标签：ruby-on-rails, ruby, activerecord, attributes

我有一个遗留数据库，其中包含一堆白痴命名的列，例如：

```
some_field_c
some_other_field_c
a_third_field_c
```

我非常想创建一个 Rails ActiveRecord 子类，它会自动将这些属性别名为其名称减去下划线和“c”。但是，当我尝试：

```
attributes.each_key do | key |
  name = key
  alias_attribute key.to_sym, key[0, (key.length -2)].to_sym if key =~ /_c$/
end 
```

在我的类定义中，出现“未定义的局部变量或方法‘属性’”错误。我也尝试过覆盖这些方法：

```
方法缺失
回应？
```

但我也一直在这条路线上遇到错误。

所以我的问题（实际上是问题）是/是：

1.  我想要做的甚至可能吗？
2.  如果是这样，最好的方法是什么（迭代别名或覆盖方法缺失）？
3.  如果不是太麻烦，那么如何做#2 的非常简短的代码示例会很棒。

提前感谢这篇文章收到的任何答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-02-04T01:51:40.790

您的问题可能`attributes`是一个实例方法，而您是在类的上下文中执行此操作的。最接近您想要的类方法是`column_names`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-04T01:53:14.330

您可以执行以下操作：

```
methods.each do |method|
  if method.ends_with("_c") then
    self.send(:defind_method,method.slice(0,-2)){self.send(method)}
  end
end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-04T05:46:38.460

嗯......我做了这个我认为非常优雅的小解决方案......

不确定这是否可行，但我将 method_missing 别名为仍然允许 active_record 这样做：

```
module ShittyDatabaseMethods
  alias :old_method_missing :method_missing

  def method_missing(method)
    if methods.include?("#{method}_c")
      send("#{method}_c".to_sym)
    else
      old_method_missing(method)
    end
  end

end

class Test
  attr_accessor :test_c
  include ShittyDatabaseMethods
end 
```

您可能无法将您的模块命名为“ShittyDatabaseMethods”，但您明白了；）一旦您定义了该模块并将其填充到 lib 中，您只需要包含此模块即可：D

很想知道这是否适合你:)

# python - 将目录更改为 Python 脚本的目录

> ID：509742
> 
> 赞同：15
> 
> 时间：2009-02-04T01:24:43.887
> 
> 标签：python, scripting, directory

如何将目录更改为包含我的 python 脚本的目录？到目前为止，我发现我应该使用`os.chdir`and `sys.argv[0]`。我确信有更好的方法来编写我自己的函数来解析 argv[0]。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2009-02-04T01:30:18.853

```
os.chdir(os.path.dirname(__file__)) 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2014-05-11T16:56:16.607

`os.chdir(os.path.dirname(os.path.abspath(__file__)))`应该这样做。

`os.chdir(os.path.dirname(__file__))`如果脚本是从它所在的目录运行的，则该脚本将不起作用。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2009-02-04T03:47:25.317

有时`__file__`没有定义，这种情况你可以试试`sys.path[0]`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-11-12T10:37:18.237

在 Windows 操作系统上，如果你调用类似***python somefile.py***的东西，这个***os.chdir(os.path.dirname(__file__))***会抛出一个 WindowsError。但这应该适用于所有情况：

```
import os
absFilePath = os.path.abspath(__file__)
os.chdir( os.path.dirname(absFilePath) ) 
```

# language-agnostic - 当可以使用库函数时使用 system() 函数是不好的做法吗？为什么？

> ID：509743
> 
> 赞同：6
> 
> 时间：2009-02-04T01:25:10.487
> 
> 标签：language-agnostic, system-calls

假设正在开发的应用程序需要一些功能，可以通过对命令行程序进行系统调用或利用库来实现。假设效率不是问题，那么简单地对程序进行系统调用而不是使用库是不好的做法吗？这样做有什么缺点？

具体来说，这种情况的一个示例是需要从 Web 服务器下载文件的应用程序，可以使用 cURL 程序或 libcURL 库。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-02-04T01:49:07.660

除非您只为一个操作系统编写代码，否则无法知道您的系统调用是否会工作。当有系统更新或操作系统升级时会发生什么？如果有库可以执行相同的功能，则
**永远不要使用系统调用。**

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-02-04T01:40:22.827

由于依赖性问题，我更喜欢库，即当您调用它时可执行文件可能不存在，但库会存在（假设在您的平台上启动进程时会处理外部库引用）。换句话说，与系统调用相比，使用库似乎可以保证在更多环境中获得更稳定、更可预测的结果。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-02-04T01:51:08.857

有几个因素需要考虑。一个关键是外部程序是否会出现在安装了您的软件的所有系统上的可靠性。如果它可能会丢失，那么最好在程序中执行它。

考虑到这一点，您可能会认为加载到您的程序中的额外代码是令人望而却步的——您不需要为应用程序中这样一个很少使用的部分添加代码膨胀。

system() 函数很方便，但也很危险，尤其是因为它通常会调用 shell。更直接地调用程序可能会更好——在 Unix 上，通过 fork() 和 exec() 系统调用。[注意，系统调用与调用函数非常不同`system()`，顺便说一句！] OTOH，您可能需要担心确保程序中所有打开的文件描述符都已关闭 - 特别是如果您的程序是某种代表其他程序运行的守护程序用户；如果您不使用特殊权限，这不是什么大问题，但最好不要让被调用的程序访问您不想要的任何东西。您可能需要查看`fcntl()`系统调用和`FD_CLOEXEC`标志。

通常，如果您将功能构建到程序中，则更容易控制事物，但这不是一个简单的决定。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-02-04T01:29:22.410

安全是一个问题。恶意 cURL 可能会对您的程序造成严重破坏。这取决于这是一个以编码速度为主要关注点的个人程序，还是一个以安全性为主要考虑因素的商业应用程序。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-02-04T02:10:30.673

系统调用更难安全地进行。

各种有趣的字符都需要正确编码才能传入参数，编码类型可能因平台甚至命令版本而异。因此，进行包含任何用户数据的系统调用需要大量的完整性检查，并且很容易出错。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-02-04T02:23:56.903

是的，如上所述，请记住系统调用（如 fcntl() 和 open()）和 system() 调用之间的区别。:)

在 ac 程序原型设计的早期阶段，我经常对 grep 和 sed 等程序进行外部调用，以使用 popen() 来操作文件。它不安全，不安全，而且肯定不便携。但它可以让你快速上手。这对我来说很有价值。它让我专注于程序真正重要的核心，这通常是我最初使用 c 的原因。

在高级语言中，您最好有一个很好的理由。:)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-02-04T03:14:21.047

我没有做任何一个，而是使用命令行参数和标准输入在你的应用程序周围建立一个 Unix 并构建一个脚本框架。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2011-05-18T04:38:51.130

其他人提到了优点（可靠性、安全性、安全性、便携性等）——但我会扔掉另一个。表现。通常，调用库函数甚至生成一个新线程要比启动一个全新的进程快很多倍（然后您仍然必须正确检查/验证它的执行并解析它的输出！）

# javascript - 如何让 YUI 数据源解析数据集中的 Null 值？

> ID：509748
> 
> 赞同：1
> 
> 时间：2009-02-04T01:27:37.127
> 
> 标签：javascript, ajax, yui, datasource, yui-datatable

我正在使用 YUI 数据表和数据源在我的一个项目中呈现数据。返回的数据恰好为 NULL，YUI 数据源无法解析它。

下面是datasource和datatable的声明代码。为了便于阅读，我将每个声明分开。

**列描述声明**

```
var columnDescription = 
    [
        {key:'Requirements'},
        {key:'abc'},
        {key:'xyz'}
    ]; 
```

此 columnDescription 在下面的函数中设置。

**数据源声明**

```
var dataSrcSample = new YAHOO.util.FunctionDataSource(getDataGrid);
myDataSource.connMethodPost = true;
myDataSource.responseType = YAHOO.util.DataSource.TYPE_JSON;
myDataSource.responseSchema = {
    fields:['Requirements', 
        {key:'abc',parser:YAHOO.util.DataSource.parseString},
        {key:'xyz',parser:YAHOO.util.DataSource.parseString}]
}; 
```

**getDataGrid**函数调用服务器端以从服务器获取数据。下面是表定义本身。

```
YAHOO.example.sampleTable = function()
{
    var columnDesc=columnDescription;
    var myDataSource = dataSrcSample;
    var oConfigs = 
    {
        width:'100%'
    };

    var myDataTable = new YAHOO.widget.DataTable("tableContainerDiv", columnDesc, myDataSource, oConfigs);
}(); 
```

**tableContainerDiv**在 html 页面中声明。这是容器 div。从服务器获取 JSON 数据的函数。

```
function getDataGrid()
{
      //calls backend and gets the data
} 
```

该函数返回具有一些空值的 json 字符串。数据源构造函数抱怨以下问题。

*   ERROR_DATAINVALID
*   ERROR_DATANULL

我查看了 yui[文档](http://developer.yahoo.com/yui/docs/YAHOO.util.DataSourceBase.html#method_DataSourceBase.parseString)，发现字符串解析器没有解析空值。我想知道是否有任何方法可以解析这些数据。我必须要 handleResponse 解析原始数据吗？任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-02-10T06:58:10.043

您可能需要创建自己的解析器吗？

```
function parseNull(value) {
    // This exact logic may be incorrect, depends on what you get for value in the null case
    if (value=='null') {
        return null;
    }
    YAHOO.util.DataSource.parseString(value);
} 
```

然后你可以指定：

```
{key:'abc',parser:parseNull} 
```

使用新的解析器

# c# - 在下拉菜单中使用 C# 加载 excel 列数据

> ID：509749
> 
> 赞同：0
> 
> 时间：2009-02-04T01:27:45.270
> 
> 标签：c#, visual-studio, excel

我想使用 c# 将 excel 中的列加载到可选择的下拉菜单中。我可以访问该文件，并且可以在 C# 中加载该文件，但不确定如何实现我想要的。建议？（我正在使用 Visual Studio 2008）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-02-04T04:00:33.043

您可以使用 OleDb 托管数据提供程序来使用 ADO.NET 读取 Excel 电子表格，就像使用数据库一样。

```
using System.Data.OleDb;

DataTable dt = new DataTable();
string connString = @"Provider=Microsoft.Jet.OLEDB.4.0;Data Source=c:\Book1.xls;Extended Properties='Excel 8.0;HDR=NO'";
using (OleDbConnection conn = new OleDbConnection(connString))
{
    conn.Open();                
    //Where [F1] = column one, [F2] = column two etc, etc.
    OleDbCommand selectCommand = new OleDbCommand("select [F1] AS [id] from [Sheet1$]",conn);
    OleDbDataAdapter adapter = new OleDbDataAdapter();
    adapter.SelectCommand = selectCommand;
    adapter.Fill(dt);
}

listBox1.DataSource = dt;
listBox1.DisplayMember = "id"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-02-04T02:39:08.777

您可以实现类似这样的 PIA 解决方案（假设第一个工作表的“A”列中有 5 个项目）：

```
using Excel = Microsoft.Office.Interop.Excel;

...

worksheet = workbook.Worksheets[1] as Excel.Worksheet;

Excel.Range range;
range = worksheet.get_Range("A1", "A5") as Excel.Range;
foreach (Excel.Range cell in range.Cells)
{
    myComboBox.Items.Add(cell.Value2 as string);
} 
```

如果在运行时不知道下拉列表中的项目的确切数量，则需要搜索范围以找到结尾；[在此处](http://www.experts-exchange.com/Programming/Languages/.NET/Visual_Basic.NET/Q_23167324.html)查看此示例。

此示例使用 Office 2007 PIA，如果您使用的是旧版本，则语法应该非常接近，但可能会有所不同。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-04T02:13:37.377

据我所知，您只有两种选择：

*   允许您从 Excel 对象模型读取和写入的[主互操作程序集(PIA)。](http://msdn.microsoft.com/en-us/library/15s06t57(VS.80).aspx)
*   构建[Visual Studio Tools for Office](http://msdn.microsoft.com/en-us/office/aa905533.aspx) (VSTO) 解决方案，它可以有效地让您为 Excel 电子表格编写“代码隐藏”。如果您实际上在 excel 中做了大量工作，并且您当前的应用程序实际上只是创建电子表格 UI 的扩展，这取决于您要实现的目标。

# iphone - iPhone：是否可以更改应用程序的 Documents 文件夹中的数据？

> ID：509755
> 
> 赞同：0
> 
> 时间：2009-02-04T01:31:08.883
> 
> 标签：iphone

我正在构建一个 iPhone 游戏，我将玩家的游戏数据存储在应用程序的 Documents 文件夹中。使用 encodeWithCoder 将游戏数据序列化到磁盘。使用这种方法，我是否面临恶意玩家手动更改游戏数据的风险？

我知道越狱的手机可以让你通过 ssh 访问你的手机。所以理论上，玩家可以通过 ssh 进入他的手机，找到游戏数据，然后使用 vi 对其进行编辑以调整他们的数据？

我有一部破手机进行测试，我现在正在尝试，但每次尝试编辑它似乎都会损坏文件并使其无法被游戏读取。

我还尝试将数据文件 scp 到我的开发机器，使用 xcode 打开它，调整值，然后将其发送回应用程序。但是我在看到新值出现在游戏中时没有任何成功。

那么我可以免受这种类型的攻击吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-04T01:44:23.067

如果您真的担心它，请对其进行加密。

我说如果因为要越狱手机来破解你的应用程序的人数是如此微不足道，那就不值得担心了。如果以及何时值得担心，您可以更改它。

这对我来说听起来像是过早的优化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-04T01:37:30.927

不，在越狱的 iPhone 上，用户可以做任何他喜欢做的事情，甚至可以更改您的文件。唯一保存的地方是您控制的服务器上的互联网。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-04T14:17:03.967

同意，这听起来像一个小问题。为什么用户要在越狱设备上经历十六进制编辑他们的分数的麻烦？上一次我什至想到做类似的事情是在 Apple II+ 上使用 Neuromancer。

如果您确实遇到需要受信任的本地数据作为某些在线竞赛的一部分的情况，您可以尝试使用 Keychain API 将其存储在设备上，尽管本地用户可能也可以访问这些数据。

# silverlight - 通过 Silverlight 访问 SharePoint Web 服务

> ID：509758
> 
> 赞同：4
> 
> 时间：2009-02-04T01:31:44.527
> 
> 标签：silverlight, web-services, sharepoint

我在通过 Silverlight 访问 SharePoint Webservice 时遇到问题。

> 尝试向 URI“ [http://sample:8000/_vti_bin/Authentication.asmx](http://sample:8000/_vti_bin/Authentication.asmx) ”发出请求时出错。这可能是由于在没有适当的跨域策略或不适合 SOAP 服务的策略的情况下尝试以跨域方式访问服务。您可能需要联系服务的所有者以发布跨域策略文件并确保它允许发送与 SOAP 相关的 HTTP 标头。有关更多详细信息，请参阅内部异常。

一些问题：

1.  如何通过 Sharepoint Designer 正确部署 clientaccesspolicy.xml？只需在设计器中打开站点，添加文件然后发布？
2.  应部署 clientaccesspolicy.xml 的站点使用表单身份验证。我无法使用 Sharepoint Designer 在那里发布。因此，我为该站点创建了新区域，该区域使用 Windows 身份验证并在那里发布了 clientaccesspolicy.xml。两者都使用相同的内容数据库，不是吗？
3.  如果将发布 clientaccesspolicy.xml，如何允许匿名访问此文件？

问候安东卡尔奇克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-04T13:01:37.023

这里回答我的问题 1\. 和 2.：

1.  在 Sharepoint Designer 中，您可以通过以下方式打开站点：文件 -> 打开站点 -> 在文本字段“站点名称：”中输入站点的 URL。比将 clientaccesspolicy.xml 拖放到站点的根目录中。
2.  如果您有表单身份验证，则此步骤不需要创建新区域（但由于某些原因它可能很有用）。您只需打开网络浏览器并输入您网站的 URL。然后填写文本字段（始终使用具有管理员权限的用户）并选中“自动登录”。之后，Sharepoint 设计器将使用此凭据来指定 URL。

如果你能帮助我解决问题 Nr。3，或者你有其他的解决方案，我如何从Silverlight访问clientaccesspolicy.xml，贴吧！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-10-20T20:37:27.333

我们在项目中处理此问题的方式是使用 HTTP 处理程序。我们使用一个特性将 clientaccesspolicy.xml 文件放在 _layouts 目录（在共享点站点之间共享）（您也可以手动将其复制到那里）。

然后我们将 HTTP 处理程序添加到 web.config 处理程序部分。在我们的处理程序中，我们检查请求是否针对 /clientaccesspolicy.xml，如果是，我们重写路径：

```
if (path.ToLowerInvariant() == "/clientaccesspolicy.xml")
{
    HttpContext.Current.RewritePath("/_layouts/clientaccesspolicy.xml");
} 
```

我不确定这是否会绕过安全性，因此它可能无法完全解决您的问题。但至少它为您提供了访问此文件的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-07-24T01:03:03.280

Keep in mind that clientaccesspolicy.xml must be at the **domain root**. In your example it would have to availble from [http://sample:8000/clientaccesspolicy.xml](http://sample:8000/clientaccesspolicy.xml). If you can't open it from your browser at that URL, your Silverlight client won't find it either.

The easiest way to get the file in the right place is to just copy it there via FTP or explorer. The file should be available to anonymous users (read only of course).

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-02-04T13:06:27.747

1.  那也行。
2.  应该是的，前提是您还没有以某种方式设置一个全新的站点。
3.  它不应该是安全风险。如果您需要通过 WindowsAuth 对服务进行身份验证，那么您也应该对 clientaccesspolicy.xml 进行身份验证。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2010-12-07T09:24:11.383

我找到了实现sharepoint httpHandler的更真实的方法：它自己返回clientaccesspolicy.xml的所有内容

```
 public void ProcessRequest(HttpContext context) {
        if (context.Request.Path.ToLowerInvariant() == "/clientaccesspolicy.xml")            {
            context.Response.Write(@"<?xml version='1.0' encoding='utf-8' ?><access-policy><cross-domain-access> "+
            @"<policy> <allow-from http-request-headers='*'> <domain uri='*' /> </allow-from> <grant-to> "+
            @"<resource path='/' include-subpaths='true' /> </grant-to> </policy> "+
            @"</cross-domain-access> </access-policy>");
        }
    } 
```

# c# - C# 调用一个我还不知道名字的方法？反射？

> ID：509759
> 
> 赞同：0
> 
> 时间：2009-02-04T01:32:21.937
> 
> 标签：c#, web-services

假设我有以下（相当常见的）模型

客户端调用 Web 服务请求 -> 请求添加到服务器队列 -> 服务器通过 Web 服务调用 3rd 方应用程序 -> 3rd 方应用程序通知服务器事件处理已完成 -> 服务器通知客户端请求已完成

我想知道的是“服务器通过 Web 服务调用 3rd 方应用程序”阶段。第 3 方应用程序公开了在应用程序内部配置的 Web 服务方法。例如，我可能会在这个应用程序中创建一个名为“MultiplyByTwo”的方法。然后我单击“GO”，它会使用 BeginCalculateMultiplyByTwo 和 EndMultiplyByTwo 等方法生成一个 Web 服务（使用 IAsync 模型）。这很棒。

现在我正在创建一个队列对象，以便多个客户端可以请求此服务并让服务器将它们排队以进行顺序执行。所以这个队列对象将有一个类似 runNext() 的方法，它将调用 3rd 方应用程序上的 Web 服务。只要我知道被调用的方法的名称（在这种情况下为 BegingCaculateMultiplyByTwo），这很好，但是如果我想动态更改方法的名称怎么办？

因此，在第 3 方应用程序中，我更改了我的 Web 服务方法并将其称为“MultiplyByThree”。这将公开 BeginMultiplyByThree 和其他一些具有可预测命名方案的方法。如何设置我的类以动态调用我还不知道名称的方法？

理想情况下，如果我可以在 app.config 文件中设置要调用的方法的名称，那就太好了。

我想这是我可以通过反射实现的吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-02-04T01:44:41.927

你当然可以通过反射来做到这一点：

```
MyClass o = new MyClass();
MethodInfo method = o.GetType().GetMethod("UnknownMethod", 
    BindingFlags.Instance | BindingFlags.Public);
MyRetValue retValue = (MyRetValue)
    method.Invoke(o, new object[] { "Arg1", 2, "Arg3" }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-02-04T01:58:03.430

要扩展罗伯特的答案，您可以使用泛型和其他东西：

```
public TReturn DynamicInvoker<T, TReturn>(T obj, string methodName, param[] args){
  MethodInfo method = obj.GetType.GetMethod(methodName, BindingFlags.Instance | BindingFlags.Public);
  (TResult)method.Invoke(obj, args);
} 
```

如果您想让它变得完全可怕，您可以将其作为对象的静态方法来实现。您也可以将`BindingFlags`作为方法参数传递。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-04T01:44:18.013

也许[这](https://web.archive.org/web/1/http://articles.techrepublic%2ecom%2ecom/5100-10878_11-6127542.html?tag=rbxccnbtr1)会有所帮助——它是一个使用反射的动态 Web 服务方法执行器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-02-04T02:52:50.073

只有当您已经拥有一个知道所有需要调用的方法的代理（例如来自 wsdl.exe）时，反射才会起作用。如果您没有代理，那么您在反思方面就不走运了。例如，如果您的中间层需要能够调用它还不知道的 Web 服务中的方法。

另请注意，如果 Web 服务方法采用非原语，反射也将更难进行。

**WSDL** - Web 服务描述语言。

这意味着 Web 服务是自描述的。WSDL.exe 所做的只是创建和编译代理类和方法，因此您不必直接使用 xml。

并不是说您想自己动手，而是 Web 服务本质上只是一种 RPC 机制，它使用 xml 来处理请求和结果。所以您不需要使用花哨的代理对象，您只需将 xml 发送到 Web 服务并接收 xml 响应并解释它。

# delphi - 寻找记忆泡泡

> ID：509767
> 
> 赞同：3
> 
> 时间：2009-02-04T01:37:36.810
> 
> 标签：delphi, memory, profiling

这要么简单得可笑，要么太复杂。. . .

在我们的应用程序中，有一个表单可以从数据库中加载一些数据并将其显示在网格中（简单地说）。刷新数据时，总内存使用量增加了大约 50K（毫无疑问取决于显示的数据量）。听起来像是内存泄漏，但是当我们关闭应用程序时，FastMM 设置为**ReportMemoryLeakOnShutDown := True**，它不会报告任何异常的内存泄漏。

所以看起来我们有一个记忆泡泡或记忆袋。每次运行时都会积累更多内存的东西。就像一个*TList 不断添加新项目*，但旧项目永远不会被删除。然后在关闭过程中，所有项目都被销毁。网格中显示的行数并没有增加，但是在幕后有很多对象列表使这项工作有效，所以它可以在任何地方。

所以我的问题是，是否有人知道找出应用程序的哪些部分正在使用多少内存的好技巧。. . . 我可以想到很多乏味的方法（我正在这样做 - 检查我能找到的每个列表），所以我希望有人有我没有想到的技巧或技术。

提前致谢！

**更新：**每次刷新都会额外使用 10-50K 的内存。用户报告说应用程序最终会停止响应。它确实像内存泄漏，但 FastMM（内存管理器）没有看到任何泄漏。我会尝试一些其他的记忆工具。. .

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-02-04T08:04:12.550

只需按 F8 键通过关键部分并查看进程使用图（Mark Russinovich 的 Process Explorer 对此非常有效）。当你找到罪魁祸首的方法时，重复这个过程，但下降到那个方法。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-02-04T08:31:12.077

[AQTime 之](http://www.automatedqa.com/products/aqtime/index.asp)类的工具可以报告快照之间的内存/对象使用差异。这可能会帮助您找出持续增长的因素。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-02-04T10:10:24.543

看起来有一些内存是通过自定义 AllocMem() 调用分配的，绕过了 FastMM。

这可以是迈达斯。[安德烈亚斯对此有一个解决方案](http://andy.jgknet.de/blog/?p=431)

或者其他一些分配某些东西但没有释放的 InitXXX WinAPI 调用。或者项目使用的一些其他第三方或windows dll。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-02-04T01:41:28.610

每次刷新数据时都会发生这种情况还是仅第一次发生？如果这只是第一次，则系统可能只是为您的应用程序保留内存，尽管此时它没有被使用。（也许在某些时候新旧数据同时存在于内存中？）

有许多工具可以为您提供有关内存泄漏的信息，您是否尝试过不同的工具？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-02-04T02:01:52.657

我不是 FastMM 专家，但我想在内存管理器获得内存之后，在你释放对象/组件之后，它会保留一些零或标志以备将来使用，我不知道，避免了向操作系统询问更多内存的需要任何时候，就像一个缓存。

您如何创建相同的表单/打开相同的数据，连续 N 次？每次会增加50K吗？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-02-04T08:33:09.060

一旦我遇到了同样的问题。该应用程序肯定在泄漏，但我没有收到有关关机的报告。这样做的原因是我在项目的使用部分中包含了 sharemem。

您是否尝试过完整的 FastMM 版本？我发现调整它的设置可以让我获得更详细的内存使用信息。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-02-04T22:07:42.753

正如 Lars Truijens 所提到的，AQTime 提供了实时内存消耗图，因此在运行时，您可以在刷新数据时查看哪些对象正在使用更多内存。

# windows - 如果从命令提示符运行，powershell 脚本会在“if”子句中退出

> ID：509778
> 
> 赞同：0
> 
> 时间：2009-02-04T01:43:53.100
> 
> 标签：windows, command-line, powershell

我对两个看似相同的脚本之间的差异感到惊讶。

首先.ps1：

```
"A"
if ($true) { "B" } 
"C" 
```

第二个.ps1：

```
"A"
if ($true) { "B" 
} 
"C" 
```

现在打开一个 CMD 窗口，并像这样运行这些脚本：

```
    powershell - <first.ps1
    powershell - <秒.ps1

```

首先产生：

```
一种
乙
C

```

而第二个只产生

```
一种

```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-02-04T02:31:13.223

不知道为什么重定向到输入不起作用，但是如果您只是将脚本指定为 powershell 的输入参数，它似乎可以工作：

```
C:\fa2>powershell.exe C:\fa2\tc.ps1
Comparison starts
There was a difference
Comparison over 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-02-04T02:47:16.637

这必须是一个错误。

在 cmd.exe 情况下的重定向中，如果 if 和 else 块单独都在一行上，则该函数正常且正确地完成：

```
$candidate = '.\foo.txt'
$current= '.\bar.txt'

"Comparison starts"
if ($(diff $(get-content $current) $(get-content $candidate)).length -gt 0){"There was a difference"} 
else {"There was not a difference"}
"Comparison over" 
```

但是，如果任一块被拆分为多行并且采用该分支，则脚本将中止且没有警告/输出。

我会在[PowerShell 反馈站点 (connect.microsoft.com)](https://connect.microsoft.com/feedback/default.aspx?SiteID=99)上报告此问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-02-05T04:36:20.693

编辑：

是的，杰证明了这一点。根本问题是 Powershell 不支持 '<' 运算符。我整天都在网上搜索一些官方文档，但没有找到。我只是突然想到检查一些旧笔记，我发现 v1 中不支持对此的引用。它只支持'>'。

如果我发现比我记忆更正式的东西，我会尝试更新。留下原始文本只是为了完成。

* * *

我不认为这里接受的答案是完全正确的。

看看 Lee Holmes 的博客：[链接](http://www.leeholmes.com/blog/RedirectingBinaryOutputInPowerShell.aspx)

他是 Powershell 团队的开发人员之一，并编写了 Powershell Cookbook，只是为了稍微相信他的话。

我在一些复杂而古老的 Bat 脚本中遇到了这种问题，这些脚本依赖于一些时髦的二进制重定向。Powershell 会运行 Bat 文件，但在发生二进制重定向的地方它会停止。使用 [Process]:Start 如博客文章中所述，效果非常好，并允许我解析 Bat 文件的输出，就像任何其他表现良好的脚本一样进行引导。

在你的情况下，我假设“diff”是一个实际的 exe 而不是一个函数，它输出二进制而不是文本。

附带说明一下，我真的不需要像您正在做的那样将脚本的输出重定向到 Powershell。似乎有点适得其反。您编写了一个 powershell 脚本，不使用专门提供的参数来处理运行输入似乎是一种浪费。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-02-10T06:43:10.970

我不认为这是一个错误。尝试在控制台上输入这些行中的每一行，您将看到发生了什么。当您键入并打开括号并且不关闭它时，PowerShell 会进入多行输入模式。要退出此模式，您需要一个右括号和一个空行。如果您在“C”之前或之后有一个空行，它应该可以工作。

当然，也许它是一个错误，并且与多行输入具有相同的效果。:)

我自己无法让它工作，powershell 忽略了我发送给它的内容。

# asp.net - ASP.NET connectionStringName 和 MemberShip 提供者名称

> ID：509782
> 
> 赞同：0
> 
> 时间：2009-02-04T01:44:20.510
> 
> 标签：asp.net, asp.net-membership

*“显然它有效”*

除了良好实践之外，您能否说出不给出这两个的原因：

connectionStringName 和 Membership Provider name 相同的字符串值？

这可能是一个问题吗？

如：

```
 <membership defaultProvider="MySqlConnection" userIsOnlineTimeWindow="45">
         <providers>
            <clear />
            <add name="MySqlConnection" 
            type="System.Web.Security.SqlMembershipProvider"
            connectionStringName="MySqlConnection"

            applicationName="HQChannel" 
            enablePasswordRetrieval="true" 
            enablePasswordReset="true"
            requiresQuestionAndAnswer="false" 
            requiresUniqueEmail="true" 
            passwordFormat="Hashed" 
            minRequiredNonalphanumericCharacters="0"

            minRequiredPasswordLength="6" />
         </providers>
    </membership> 
```

根据这篇[文章](https://stackoverflow.com/questions/508316/asp-net-membership-staying-authenticated-issues)

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-04T02:01:42.940

由于以下原因，我不会将其命名为与连接字符串相同的名称：

*   我用命名空间前缀命名连接字符串，这样您就知道它们与哪个程序集相关（例如：MyApp.Web.MySqlConnection）
*   MySqlConnection 并不意味着 MembershipProvider
*   它可能会引起混乱

# asp.net - 如何在左键按下时检测鼠标移动

> ID：509784
> 
> 赞同：0
> 
> 时间：2009-02-04T01:44:27.873
> 
> 标签：asp.net, javascript, stylesheet

一旦 mousedown 事件触发，我想使用 javascript 来检测鼠标位置。按住左键时，我似乎没有收到 onmousemove 事件。光标变成了一个带有十字的圆圈。

我的整个目标是在 mousedown 上检测光标的起始位置，并更改带有溢出集的 div 中图像的左上角样式（一种假平移效果）。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-02-04T01:49:15.820

设置[ondragstart](http://msdn.microsoft.com/en-us/library/ms536928(VS.85).aspx)处理程序：

```
function dragstart(ev)
{
    if (!ev) ev = window.event;
    ev.returnValue = false;
    return false;
}

image.ondragstart = dragstart; 
```

# objective-c - 哪个对初学者更容易：RubyCocoa 或 ObjC/Cocoa

> ID：509787
> 
> 赞同：2
> 
> 时间：2009-02-04T01:45:19.367
> 
> 标签：objective-c, ruby, cocoa, ruby-cocoa

我过去听过一些关于哪个更成熟的辩论：RubyCocoa 或 Obj-C/Cocoa ......但我觉得答案直接超过了真正欣赏答案的“新手”。

所以问题是：对于一个完全没有编程经验的初学者来说，学习 Ruby 和通过桥梁探索 Cocoa 更容易（然后可能处理 Obj-C）还是直接跳到 Objective-C 和可可。

这两个社区都很强大并且拥有大量资源，但正如许多人所指出的那样，Obj-C 的语法令人生畏。也许对于一个真正的初学者来说，学习 Ruby 然后学习 Objective-C 会更容易？

**更新**：我很抱歉，但是当我说“学习 Ruby 并探索 Cocoa”时，我并不是要通过 RubyCocoa 学习编程，而是要学习 Ruby（一旦感到足够自信）开始探索 Cocoa，并有可能利用他们不断增长的处理 Obj-C 的技能。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-02-04T01:59:54.940

我不建议学习使用 RubyCocoa 编程。

我喜欢 Ruby，并认为它是一种学习编程的好语言，但是 RubyCocoa 桥的文档记录不够好，我推荐它作为学习环境。您将同时学习一般编程概念、Cocoa 框架和 RubyCocoa 的怪癖。有很多东西要塞进你的脑袋里。

如果您已确定并决心从 Cocoa 开始，请从学习 Objective-C 开始。否则，您可以从学习 Ruby 开始，然后在您作为一名程序员感觉更舒服一点后过渡到 Objective-C。一旦你完成了所有这些，你就可以使用 RubyCocoa，但是你会知道它不会让你发疯。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-02-04T03:05:47.490

我将从 Apple 所宣扬的内容开始：Objective-C/Cocoa

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-02-04T02:01:23.033

[编写代码是容易的部分](http://theocacao.com/document.page/428)

没有意义：

1.  试着看看哪个容易，如果你选择简单的方法，你总是会弄错的。不要害怕困难，因为困难就是不要害怕。

2.  根据我添加的帖子，尝试以这种方式比较语言/方法，认为在这种情况下什么是简单/好/难的是语法问题，最终归结为解释，美丽在旁观者的眼中。

3.  根据他们最终将尝试使用该技术做什么，您会发现在一种方法或另一种方法中，某些东西比其他方法“更容易”......容易是一件很难定义的事情

4.  只有一个问题很重要：在接触这两种方法中的任何一种之前，人们知道什么？ - 你说：

    对于一个完全没有编程经验的初学者

我的答案：

经常在我住的地方附近有游客问：

“我如何从这里到达地名 X？”

这里的人通常会回答：

“如果我是你，并且我试图到达地名 X，我就不会从这里开始......”

所以..你的问题的答案是：

**两者都不**

初学者应该始终按照@Tafkas 所说的那样学习编程的基础知识……（不一定需要学习 OOP 语言……而是编程……），然后再决定学习和/或实施什么。（这+需求收集）

..否则学习这些语言/技术技能的人将只是另一组脚本小子，他们正在成为复制粘贴代码猴子

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-02-04T01:49:14.790

从 RubyCocoa 开始的问题是你最终会同时学习 ruby​​ 和 cocoa 以及两者之间的交互。我会说学习 ruby​​，或者学习 Objective-C/Cocoa。直接跳入 RubyCocoa 会让你大吃一惊。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-02-04T02:06:48.060

听起来你的目标是学习使用 Cocoa 编程，使用 Ruby 或 Objective-C 作为语言。

虽然我从未使用过 Ruby（或 RubyCocoa，就此而言），但我的理解是 Cocoa 是用 Objective-C 作为主要语言编写的，而桥梁（Python 和 Ruby）排在第二位。虽然它们通常工作得很好，但在使用来自 Objective-C 的 Cocoa 时不存在一些粗糙的边缘。

我会说你应该走 Objective-C/Cocoa 路线。首先从另一种语言开始可能还不错——如果你想学习 C（这将很有用，因为 Objective-C 是 C 的超集），或者如果你想走 OO 路线，则从 Java 之类的东西开始。

这并不是说 RubyCocoa 不起作用或没有用。它的功能很棒，但我不认为它是开始使用 Cocoa 编程的地方。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-02-04T04:56:03.647

我建议，如果您要认真为 OSX 和/或 iPhone 编写应用程序，我强烈建议您使用 Objective-C 和 Cocoa。

原因很简单：

*   Apple 关于 Objective-C 的文档非常好。
*   您将从 Stack Overflow 的社区获得更多帮助，因为 Objective-C/Cocoa 开发人员比 RubyCocoa 多。（从我目前所见）。
*   Objective-C 开发人员非常善于互相帮助，我找不到更好的开发人员团队，他们对学习这门语言的新人张开双臂。
*   如果您需要，可以使用出色的开发人员书籍以及外部培训。
*   我看到的最大问题是您不能使用 RubyCocoa 为 iPhone 开发。但是如果你学习了 Objective-C/Cocoa，你几乎可以直接进入 Cocoa Touch。

无法保证 Apple 会像使用 Cocoa 一样更新 RubyCocoa。

不要误会我的意思，学习 Ruby 是一门很棒的语言，我认为学习它不会出错。但是现在，如果您现在可以选择学习任何一个，或者选择 Objective-C/Cocoa。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-02-04T02:54:56.437

如果你想为 OS X 或以后的 iPhone 构建严肃的应用程序，我认为使用 RubyCocoa 会让你走上更艰难的道路。

主要原因只是能够找到您可能遇到的常见编程问题的答案。Objective-C/Cocoa 周围有一个蓬勃发展的社区，有很多论坛支持、代码片段、示例等。如果您了解 Objective-C，那么您将无限容易地快速学习如何使用 Cocoa。您的同事也可以更轻松地对您的代码进行故障排除并在您遇到困难时帮助您。Objective-C 真的不难学，特别是如果你对 OO 概念有一定的基础。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-02-04T01:49:07.567

我建议从 oo 语言开始，例如 c++ 或 java。在了解了oo的基本概念之后，学习objective-c应该不难。

ruby cocoa 的问题在于，不能保证苹果将来会支持这一点。他们过去已经放弃了可可-爪哇桥。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-02-04T02:11:44.137

我认为这取决于初学者已经知道多少。如果您已经了解面向对象编程，那么您绝对应该学习objective-c。考虑消息传递、委托和类别等范式将有助于理解 Cocoa 系统。如果您掌握了几种语言，但没有面向对象编程，那么您可能也有足够的经验通过 Cocoa 学习 OOP，但要了解它处理事情的方式与 C++ 等语言不同。如果你的编程经验很少，那么短期内 ruby​​ 可能会更好。

Objective-c 的另一个需要牢记的优点是手动引用计数内存管理范式。它可能比 malloc/free 更容易处理，但它不允许 Java 和脚本语言产生的懒惰。

# iphone - CGContext - 有没有办法重置当前上下文

> ID：509790
> 
> 赞同：15
> 
> 时间：2009-02-04T01:46:22.720
> 
> 标签：iphone, cocoa-touch, core-graphics

在我的 iPhone 项目中，我有一个 UIView，我在其中实现了 drawRect 方法：

```
- (void)drawRect:(CGRect)rect {
    CGContextRef context = UIGraphicsGetCurrentContext(); 
```

在该方法中，我使用此上下文绘制了一大堆线条、图像和文本。问题是当我重新使用这个视图时，上下文不会被重置。有没有一种方法可以调用以某种方式重置上下文？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2009-02-04T02:34:02.217

您可能想查看 CGContextSaveGState(context) 和 CGContextRestoreGState(context)。它们将让您推送和弹出上下文的当前状态。

如果您的视图被“损坏”，请检查您的视图的 contentMode 设置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2011-06-10T14:35:12.810

你也可以使用`CGContextClearRect(context, CGRectMake(0, 0, width, height));`

# packaging - 将单个自动工具项目分组到另一个“项目”的最佳方法是什么？

> ID：509802
> 
> 赞同：0
> 
> 时间：2009-02-04T01:53:16.777
> 
> 标签：packaging, autotools

我将创建一个“库”，并希望使用 autotoolset 管理每个单独的项目。此外，我希望能够同时构建整套库。

个别图书馆：

*   *libyarconveniencezzz*
*   libyarfoo
*   自由行
*   利比亚巴兹

我怀疑我可能只需要手工编写一个顶级 Makefile，然后让每个单独的库/便利库成为它自己的 autotoolset 包。

我做过类似的事情（四五年前），但我丢失了参考代码。我真正记得的唯一一件事是花了几个月的时间在自动工具中摸索，然后才按我想要的方式进行所有设置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2010-02-05T08:07:09.357

我使用以下代码构建了几个由 autotools 管理的包（尽管它们都创建“普通”二进制文件而不是“库库”）：

配置.ac：

```
AC_INIT(bigpackage, 1.0, bigpackage@email.org)
AM_INIT_AUTOMAKE
AC_CONFIG_FILES(Makefile)
AC_CONFIG_SUBDIRS([package1 package2 package3])
AC_OUTPUT 
```

生成文件.am：

```
SUBDIRS = package1 package2 package3 
```

然后可以像往常一样设置所有这些：

```
touch NEWS README AUTHORS ChangeLog
autoreconf -i
./configure
make 
```

我不一定称它为“最佳方式”，但它可以工作并且很好地将所有标志传递给子包。

# wcf - 在 WCF 中命名通用 DataContract

> ID：509803
> 
> 赞同：19
> 
> 时间：2009-02-04T01:53:22.597
> 
> 标签：wcf, dynamic, naming, datacontract

我使用通用类作为响应数据协定。一切都很好，这大大简化了我的 WCF 服务的设计。

每个请求都有一个标准响应对象，其签名如下：

*   状态（枚举）
*   消息（字符串）
*   结果 (T)

下面是响应类：

```
[DataContract]
    public class Response<T>
    {
        public Response() {}

        public Response(T result)
        {
            this.result = result;
            if (result != null)
            {
                this.status = Status.StatusEnum.Success;
            }
            else
            {
                this.status = Status.StatusEnum.Warning;
            }
        }

        public Response(T result, Status.StatusEnum status)
        {
            this.status = status;
            this.message = message;
        }

        public Response(T result, Status.StatusEnum status, string message)
        {
            this.status = status;
            this.message = message;
            this.result = result;
        }

        [DataMember]
        public Status.StatusEnum status { get; set; }

        [DataMember]
        public string message { get; set; }

        [DataMember]
        public T result { get; set; }
    } 
```

这非常有效。我唯一的问题是 WCF 客户端为这个对象“ResponseOfAccountnT9LOUZL”赋予了一个非常糟糕的名称

有没有办法解决这个问题？

我应该将此类用作继承的抽象类吗？我宁愿没有多个类使我的代码混乱。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2009-02-04T02:40:21.083

好的找到[答案](http://codeidol.com/csharp/wcf/Data-Contracts/Generics/)

您可以使用以下语法指定序列化版本：

> [DataContract(Name = "MyClassOf{0}{1}")]
> 
> 我的班级 { }

因此，如果我有一个名为 Response 的类，它采用 Generic T 参数，我会使用

> [DataContract(Name = "ResponseOfType{0}")]
> 
> 类响应{}

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2010-06-30T11:28:56.850

```
[DataContract(Name = "ReturnObjectOfType{0}")]
    public class ReturnObject<T>
    {....

//Iservice
[OperationContract]
        ReturnObject<AdresKisiBilgi> BeldeAdresKisiBilgiSorgula(string tcKimlikNo);

//Service
public ReturnObject<HbysBusiness.MernisGuvenService.AdresKisiBilgi> BeldeAdresKisiBilgiSorgula(string tcKimlikNo)
        {
            return new MernisBiz().BeldeAdresKisiBilgiSorgula(tcKimlikNo);
        }

client:
 public ReturnObjectOfAdresKisiBilgi BeldeAdresKisiBilgiSorgula(string tcKimlikNo)
        {.... 
```

谢谢哈利

# algorithm - 派系问题算法设计

> ID：509808
> 
> 赞同：12
> 
> 时间：2009-02-04T01:57:08.050
> 
> 标签：algorithm, graph-theory, clique-problem

我的算法课中的一项任务是设计一个详尽的搜索算法来解决集团问题。也就是说，给定大小为*n的图，算法应该确定是否存在大小为**k*的完整子图。我想我已经得到了答案，但我不禁认为它可以改进。这是我所拥有的：

# 版本 1

**输入**：由数组 A[0,... *n* -1] 表示的图，要查找的子图的大小*k*。

**输出**：如果存在子图则为真，否则为假

**算法**（在类似 python 的伪代码中）：

```
def clique(A, k):
    P = A x A x A //Cartesian product
    for tuple in P:
        if connected(tuple):
            return true
    return false

def connected(tuple):
    unconnected = tuple
    for vertex in tuple:
        for test_vertex in unconnected:
            if vertex is linked to test_vertex:
                remove test_vertex from unconnected
    if unconnected is empty:
        return true
    else:
        return false 
```

# 版本 2

**输入**：大小为 n x n 的邻接矩阵，k 是要查找的子图的大小

**输出**：大小为 k 的 A 中的所有完整子图。

**算法**（这次是函数式/Python 伪代码）：

```
//Base case:  return all vertices in a list since each
//one is a 1-clique
def clique(A, 1):
    S = new list
    for i in range(0 to n-1):
        add i to S
    return S

//Get a tuple representing all the cliques where
//k = k - 1, then find any cliques for k
def clique(A,k):
    C = clique(A, k-1)
    S = new list
    for tuple in C:
        for i in range(0 to n-1):
            //make sure the ith vertex is linked to each
            //vertex in tuple
            for j in tuple:
                if A[i,j] != 1:
                    break
            //This means that vertex i makes a clique
            if j is the last element:
                newtuple = (i | tuple) //make a new tuple with i added
                add newtuple to S
    //Return the list of k-cliques
    return S 
```

有没有人有任何想法、意见或建议？这包括我可能错过的错误以及使其更具可读性的方法（我不习惯使用太多伪代码）。

# 版本 3

幸运的是，我在提交作业之前和我的教授谈过了。当我给他看我写的伪代码时，他笑着告诉我我做的*工作*太多了。其一，我不必提交伪代码；我只需要证明我理解这个问题。第二，他想要蛮力解决方案*。*所以我上交的东西看起来像这样：

**输入**：一个图 G = (V,E)，找到*k的 clique 的大小*

**输出**：如果集团确实存在则为真，否则为假

**算法**：

1.  求笛卡尔积 V ^k。
2.  对于结果中的每个元组，测试每个顶点是否相互连接。如果全部连接，则返回 true 并退出。
3.  返回 false 并退出。

**更新**：添加了第二个版本。我认为这正在变得更好，尽管我没有添加任何花哨的动态编程（我知道）。

**更新 2**：添加了更多评论和文档以使第 2 版更具可读性。这可能是我今天上交的版本。感谢大家的帮助！我希望我能接受多个答案，但我接受了对我帮助最大的人的答案。我会让你们知道我的教授的想法。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-02-04T02:31:31.647

一些评论：

*   您只需要考虑 n-choose-k 顶点组合，而不是所有 k 元组（其中 n^k 个）。
*   `connected(tuple)`看起来不对。您不需要`unconnected`在循环内重置吗？
*   正如其他人所建议的那样，有更好的方法来强制执行此操作。考虑以下递归关系：如果前 k 个顶点形成一个 clique 并且顶点 (k+1) 与前 k 个顶点中的每一个相邻，则 (k+1)-子图是一个 clique。您可以在两个方向上应用它：
    *   从 1-clique 开始，然后逐渐扩大 clique，直到获得所需的大小。例如，如果 m 是当前 clique 中最大的顶点，则尝试添加顶点 {m+1, m+2, ..., n-1} 以得到一个大一个顶点的 clique。（这类似于深度优先树遍历，其中树节点的子节点是大于当前团中最大顶点的顶点。）
    *   从所需大小的子图开始，并使用递归关系检查它是否是一个集团。设置一个[记忆](http://en.wikipedia.org/wiki/Memoization)表来存储结果。
*   （实施建议）使用邻接矩阵（0-1）来表示图中的边。
*   （初始剪枝）丢弃所有度数小于k的顶点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-02-04T02:39:54.173

我曾经实现了一种算法来查找图中的所有最大团，这与您的问题类似。我这样做的方式是基于这篇论文：[http](http://portal.acm.org/citation.cfm?doid=362342.362367) ://portal.acm.org/citation.cfm?doid=362342.362367 - 它描述了一个回溯解决方案，我发现它作为指南非常有用，尽管我从那张纸。你需要订阅才能获得，但我想你的大学会有一个可用的。

不过，关于那篇论文的一件事是，我真的认为他们应该将“未设置”命名为“已经考虑设置”，因为否则它太令人困惑了。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-02-04T02:48:47.430

算法“对于每个顶点的 k 元组，如果它是一个团，则返回 true”肯定有效。然而，它是蛮力，这可能不是算法课程所要寻找的。相反，请考虑以下事项：

1.  每个顶点都是一个 1-clique。
2.  对于每个 1-clique，连接到 1-clique 中的顶点的每个顶点都有助于 2-clique。
3.  对于每个 2-clique，连接到 2-clique 中每个顶点的每个顶点都有助于 3-clique。
4.  ...
5.  对于每个 (k-1)-clique，连接到 (k-1) clique 中每个顶点的每个顶点都对 k-clique 有贡献。

这个想法可能会导致更好的方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-02-04T02:03:57.490

令人惊讶的是，将内容作为问题输入会向您展示您刚刚写的内容。这一行：

```
P = A x A x A  //Cartesian product 
```

应该是这样的：

P = A ^k //笛卡尔积

> A^k 是什么意思？您正在服用矩阵产品吗？如果是这样，A 是邻接矩阵吗（你说它是 n+1 个元素的数组）？

在 setbuilder 表示法中，它看起来像这样：

> P = {(x0, x1, ... xk) | x0 ∈ A 和 x1 ∈ A ...和 ​​xk ∈ A}

它基本上只是 A 的笛卡尔积 k 次。在纸上，我把它写成 k 是 A 的上标（我刚刚想出了如何使用降价来做到这一点）。

另外，A 只是每个单独顶点的数组，不考虑邻接。

# .net - 'Insert = true' 在 Castle Active Record 关联中是什么意思

> ID：509826
> 
> 赞同：1
> 
> 时间：2009-02-04T02:05:13.557
> 
> 标签：.net, castle-activerecord, dao

我正在使用 Castle Active Record 进行项目。今天我偶然发现了 AR 协会的“Insert = true”属性参数，但我无法确定它的实际作用。

```
[BelongsTo("UserId",Insert = true)]
public ARUser User {
  get { return mUser; }
  set { mUser = value; }
} 
```

有人可以给我一个线索吗？我在文档中找不到答案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-02-04T02:32:17.200

是的，您会在一些 AR 属性上找到 Insert 和 Update 属性。

我必须做一些测试以确保我理解文档。

将 Update 和 Insert 都设置为 false 表示该属性将对您的数据库访问是只读的（使用公共 setter 可能会令人困惑。）

```
[Property(Insert=false, Update=false)]
public virtual string Name { get; set; } 
```

将 update 设置为 true 并将 insert 设置为 false 表示设置此属性然后插入元素不会在数据库中设置该值。

```
[Property(Insert=false)]
public virtual DateTime Created { get; set; } 
```

至于使用场景，就靠你自己了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-04T02:20:49.187

来自[文档](http://www.castleproject.org/ActiveRecord/documentation/v1rc1/manual/attributedocs/Generated_BelongsToAttribute.html)- 设置为 false 以在插入此 ActiveRecord 类的实体时忽略此关联。

# printing - 从嵌入式系统打印

> ID：509828
> 
> 赞同：6
> 
> 时间：2009-02-04T02:05:39.950
> 
> 标签：printing, embedded

我们正在使用 ARM9/RTOS 系统制作实验室仪器。客户询问如何从 ARM9 系统打印简单报告。在这种情况下，我们在 RTOS 中支持 USB 主机。我正在考虑在通用 PCL 中打印位图，希望这将涵盖最广泛的打印机。有没有更好的方法来解决这个问题？我假设 RTOS 没有打印机驱动程序，我不想支持很多打印机。

我们的系统还支持 USB 设备模式，因此您可以插入照片打印机，我们的设备看起来就像是 U 盘。所以这会起作用，但它有点笨拙。这将是一个 C/C++ 嵌入式系统

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-02-04T03:55:34.613

假装是数码相机并与 PictBridge 打印机接口实际上听起来很聪明。它将消除处理不同打印机驱动程序的需要，如果我对技术的理解是正确的，您甚至可以直接从您的设备控制打印机的操作。

另一方面，作为使用过大量计算机化实验室仪器（示波器等）的人，我发现从以太网/Web 界面保存屏幕截图的功能更加有用。打印已死。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-02-05T19:15:14.923

您是否查看过所有示波器供应商都在做什么？他们都有打印选项（我认为），我不知道他们正在做什么来解决这个问题。

上次我参与此类事情时，我们使用串行端口与使用 PCL 的 HP 打印机通信。这适得其反，因为每个人都很快停止制造串行打印机！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-04T05:37:07.030

*大多数打印机本身都*支持PostScript ，因此您可以通过网络发送它，但它比直接 ASCII 麻烦得多。有图书馆，但它们很笨重。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-02-13T00:17:09.867

由于您的设备可能看起来像一个 USB 记忆棒，一个简单的解决方案是生成一个 JPEG 图像格式的报告，然后打开打印机并打印它。这样，想要无纸化输出的人可以按原样使用图像，其他人都可以打印。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-02-04T03:46:13.227

如果我理解正确，您可以编写一个格式化的文本文件并通过 Windows 在“usb 棒”模式下执行“打印”命令。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-02-04T03:55:16.640

对于简单的报告，最好坚持使用直接 ASCII。如果您需要一些图形，PCL 将是 B/W 激光打印机的不错选择，但我不确定它对于更常见的喷墨打印机有多普遍。

编辑：[PCL 参考手册](http://h20000.www2.hp.com/bc/docs/support/SupportManual/bpl13210/bpl13210.pdf)可从 HP 获得 PDF 格式。

# .net - WCF Web 服务组件是否必须与 Web 耦合？

> ID：509849
> 
> 赞同：1
> 
> 时间：2009-02-04T02:15:44.783
> 
> 标签：.net, wcf, rest

我正在学习 WCF Web 服务，我担心我所看到的所有耦合。在我看来，我应该能够编写一个组件，然后几乎可以在任何地方使用它——进程内、跨 Intranet 或从 ASP.NET 页面，并且只需要更改它的托管方式。

一旦您开始使用 System.ServiceModel.Web，尽管您开始使用以下内容装饰您的 ServiceOperations：

```
[OperationContract]
[WebGet]
string EchoWithGet(string s); 
```

那就是将方法与网络耦合。您可以在要在进程内托管的服务中使用类似的合同吗？

在我正在查看的一些示例中，我还看到了如下代码：

```
public class FavoriteMovieService : IFavoriteMovie
{
  MyFavoriteMovie item = new MyFavoriteMovie();

  public MyFavoriteMovie GetItem()
  {
    if(item == null)
      throw new WebProtocolException(HttpStatusCode.NotFound, "Not found.", null);
    return item;
  }
} 
```

如果您在进程内托管，您不希望在您的服务代码中抛出这样的异常，对吗？

是否还有编写 WCF Web 服务的好方法，以及不需要与 Web 如此紧密耦合的 RESTful 服务？它似乎违背了 WCF 的全部目的。

我意识到我可能只是误解了一些东西，因为我是做这类 WCF 服务的新手，但我很好奇。

请赐教。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-04T03:38:44.723

是的，您可以将该合同与非 Web 端点一起使用。如果您使用可识别此功能的端点（WebHttpBinding as of .NET 3.5 sp1），它将仅使用 RESTful 命令。否则，它将像任何其他数据合约一样运行。如果您使用命名管道，它会很好 inproc。顺便说一句，使用 WebHTTPBinding 将完全破坏服务主机中任何其他端点公开元数据的能力。如果您需要这样做，您应该创建两个单独的服务主机。一个用于 RESTful 服务，一个用于其他所有服务。那是几个小时的调试。

至于错误，它有点人为的例子。我会让 WCF 处理所有通信级别的错误，并且只抛出您可以在另一个端点处理的错误。否则，返回带有其他端点可以实际处理的某种错误代码的消息。此外，只要异常使您的对象处于一致状态，就吃掉它，不要让通道出错。

在相关说明中，我发现为 inproc 调用创建接口解析器对象更容易。它的行为（大部分）类似于 servicehost，除了我不需要客户端，我可以要求对象为我解析接口。对于 inproc 调用，WCF 开销有点大。

# powershell - PowerShell - 如何使用“Set-StrictMode -version latest”测试变量值？

> ID：509853
> 
> 赞同：19
> 
> 时间：2009-02-04T02:20:13.837
> 
> 标签：powershell, scripting

我刚刚开始编写一些 PowerShell 脚本，并且在测试变量的值时遇到了问题。我尝试在启用所有警告的情况下运行所有​​内容，尤其是在我学习的时候，以捕捉愚蠢的错误。所以，我正在使用 CTPV3 并使用“set-strictmode -version latest”设置严格模式。但是我在检查传入变量的值时遇到了障碍。这些变量可能已经设置，也可能尚未设置。

```
# all FAIL if $var is undefined under "Set-StrictMode -version latest"
if ( !$var ) { $var = "new-value"; } 
if ( $var -eq $null ) { $var = "new-value"; } 
```

除非我关闭严格模式，否则我无法找到一种方法来测试变量是否具有在变量丢失时不会导致警告的值。而且我不想为了测试变量而到处打开和关闭严格模式。我敢肯定我会忘记在某个地方重新打开它，它看起来非常混乱。这不可能。我错过了什么？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2009-02-04T02:26:28.303

你真的在这里测试两件事，存在和价值。而存在性测试是在严格模式操作下引起警告的原因。所以，分开测试。记住 PowerShell 将变量视为另一个提供程序（就像文件或注册表提供程序一样），并且所有 PowerShell 变量都作为*文件存在于**驱动器*的根*文件夹*中，称为“变量：”，很明显，您可以使用与您通常会使用它来测试是否存在任何其他*文件*。因此，使用：**`test-path`**

 **```
if (!(test-path variable:\var)) {$var = $null} # test for EXISTENCE & create
if ( !$var ) { $var = "new-value"; }           # test the VALUE 
```

请注意，当前的严格模式可以在子作用域中更改，而不会影响父作用域（例如，在脚本块中）。因此，您可以编写一个脚本块来封装移除严格模式和设置变量，而不会影响周围程序的严格性。由于范围可变，这有点棘手。我能想到的两种可能：

#1 - 从脚本块返回值

```
$var = & { Set-StrictMode -off; switch( $var ) { $null { "new-value" } default { $var } }} 
```

或 #2 - 使用范围修饰符

```
& { Set-StrictMode -off; if (!$var) { set-variable -scope 1 var "new-value" }} 
```

可能最糟糕的部分是 $var 容易出错、重复使用（有和没有前导 $）。这似乎很容易出错。所以，我会使用一个子程序：

```
function set-Variable-IfMissingOrNull ($name, $value)
{
$isMissingOrNull = !(test-path ('variable:'+$name)) -or ((get-variable $name -value) -eq $null)
if ($isMissingOrNull) { set-variable -scope 1 $name $value }
}
set-alias ?? set-Variable-IfMissingOrNull
#...
## in use, `var` must not have a leading $ or the shell attempts to read the possibly non-existant $var
set-Variable-IfMissingOrNull var "new-value"
?? varX 1 
```

这最后可能是我编写脚本的方式。

**编辑：**在考虑了你的问题一段时间后，我想出了一个更简单的函数，它更符合你的编码风格。试试这个功能：

```
function test-variable
{# return $false if variable:\$name is missing or $null
param( [string]$name )
$isMissingOrNull = (!(test-path ('variable:'+$name)) -or ((get-variable -name $name -value) -eq $null))
return !$isMissingOrNull
}
set-alias ?-var test-variable
if (!(?-var var)) {$var = "default-value"} 
```

希望有帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-02-13T06:01:45.480

首先，我喜欢罗伊的回答，完整而简洁。我只是想提一下，您似乎只是在尝试仅设置已设置的变量。这似乎是只读变量或常量的工作。

要将变量设为只读变量、常量，请使用

```
Set-Variable 
```

从`get-help Set-Variable -full`

```
-- ReadOnly: Cannot be deleted or changed without the Force parameter.
-- Constant: Cannot be deleted or changed. Constant is valid only when
creating a new variable. You cannot set the Constant option on an
existing variable. 
```

# apache-flex - 今天的 ColdFusion 应用程序——明年的 Flex。明年最大限度地重复使用逻辑层的考虑因素？

> ID：509855
> 
> 赞同：7
> 
> 时间：2009-02-04T02:20:31.950
> 
> 标签：apache-flex, architecture, coldfusion

我已经开始设计一个完全基于 Web 的 ColdFusion 应用程序。没有太多使用 Flash 表单或 AJAX。

第一个版本是一个严格的网络应用程序。版本 2 将是一个 Flex 前端。

我想设计和构建一些东西，以便 Flex 层可以使用现有的逻辑。如果这意味着我必须在版本 1 中做额外的工作，那也没关系。我想强化一次逻辑代码而不是重构。

现在有哪些值得考虑/设计/实施的事情将极大地帮助能够以这种方式设计应用程序？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-02-04T03:50:00.363

一个重要的建议是尽可能地利用 ColdFusion 组件 (CFC)，这取决于您来自哪里（因为这是一个相当大的问题）；CFC 架构非常出色、用途广泛且功能强大，它与 Flex 集成得非常好（并且在未来的 Flex 和 CF 版本中会做得更好），因此在设计组件层时，您可以考虑到这一点，您将很高兴你做到了。

自从我编写 CF 代码以来已经有一段时间了，但是在我使用它完成的最后一个大型项目中，我花了很多时间从 CFC 中设计一个功能层，以供普通的 ol' Web 应用程序使用，就像听起来一样就像你正在做的那样——然后，当需要为网站的一个子部分安装 Ajax UI 时（它可能是 Flex，但在我的情况下，它恰好是一个 YUI 实现），我创建了一个公开暴露的 CFC 的外观层，其工作是包装和暴露第一层提供的功能的专门子集。这样做使我能够以对需要它的服务所特有的方式利用和扩展现有代码，而不必直接公开底层（第一层）CFC。

我相信其他人会有更多（并且可能更详细）的建议，但这是我首先要为您提供的一个重要建议——学习、了解和使用 CF 组件。祝你好运！

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-02-04T13:58:14.460

我同意 Christian 的观点，你能做的最好的事情就是将数据库逻辑或应用程序的任何其他逻辑都放在 CFC 中，更具体地说，我建议使用 web 服务。这样做的主要原因是，它将允许您最终拥有您的 cf 代码，这是您的所有数据库持久性和逻辑在与您提供 flex 应用程序的服务器不同的服务器上，并且还允许代码重用于其他应用程序. 将您的 cfc 编写为 Web 服务的另一个好处是您可以将它们用作 Web 服务或使用 AMF（远程对象）直接作为 Flex 中的组件。当然，这些好处真正适用于您的程度取决于您的情况，但这是一个很好的计划。

但主要的建议是将您的应用程序视为具有表示层以及逻辑和持久层。如果您正在做出决定，它会进入逻辑层。如果您正在显示屏幕或做任何与演示有关的事情，它会进入该层。将这些东西分开将使您可以更轻松地切换您的表示层以供以后使用。

此外，捕获任何抛出的错误并将消息作为结果（带有任何结果，例如在结构中）从所有方法返回也很有用。Flex 有一个坏习惯，就是告诉你出了什么问题，但不传递错误信息。这将帮助您更轻松地调试和处理任何抛出的错误。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-02-20T04:27:54.030

查看[马特伍德沃德](http://www.mattwoodward.com/blog/index.cfm?event=showEntry&entryId=3C07CFAC-9769-4960-B7102C31456F9BF3)关于该主题的演讲，内容非常丰富：

还有一些一般的事情要添加到其他人提供的答案中：

*   将您的数据交互封装在 CFC 中（通常在委托给网关和 DAO 的服务中）
*   在大多数情况下，您需要创建“bean”CFC 来表示您的业务对象（用户、小部件等），这些将作为 ActionScript 类传输到 Flex。您需要向它们添加 cfproperty 标记以使它们可序列化为 ActionScript（区分大小写和顺序！），因此在创建它们时要注意这一点，以防止以后不得不处理它，并使用其中一个代码[Adobe CF Extensions for Eclipse](http://www.adobe.com/products/coldfusion/flex/)或[Illudium PU36](http://cfcgenerator.riaforge.org/)等生成工具 为您完成。
*   创建一个远程外观 CFC（或一组 CFC，具体取决于应用程序的大小），将方法委托给您的服务 - 这是您将方法的访问权限设置为“远程”的地方 - 通常是您想要执行此操作的唯一地方（感觉就像你做了很多委派，但集中所有远程服务是值得的）
*   当您使用 HTML 进行开发时，请将您的远程外观 CFC 视为您的 API，并使您的 HTML 视图尽可能“愚蠢”。可以这样想：您在 CF 视图中编写的任何逻辑都必须在 Flex 视图中复制。如果您只使用远程 API 构建项目，您将对 Flex 将如何与应用程序交互有一个很好的感觉。
*   查看[ColdSpring](http://www.coldspringframework.org)，它提供了许多强大的功能来管理您要创建的所有对象！

我并没有声称自己是架构专家，而且我知道我在这里抛出了很多行话来保持简短，但是在 CF 博客上搜索一下应该会找到很多关于我提到的设计模式的信息。祝你好运！

# git - git patch 分支子范围的最佳方法是什么？

> ID：509859
> 
> 赞同：24
> 
> 时间：2009-02-04T02:22:23.007
> 
> 标签：git

在 Subversion 中，使用“svn merge -ra:b mybranch”可以很容易地从一个分支合并一系列变更集/差异。但是在 git 中，我发现只能从一个分支中挑选一个提交来将该补丁应用到我当前的工作分支。所以我想知道是否有一种快速的方法可以将错误修复分支中的两个标签之间的所有提交一次性应用到我当前的主分支？

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2009-02-04T07:59:03.857

执行您要查找的操作的最简单方法是使用`git rebase`. 这是一个食谱。假设标签 A 是您要选择的补丁系列所基于的提交，标签 B 是该系列中最后一个补丁的提交。此外，假设 br 是当前分支的名称以及应该应用新补丁系列的分支。

```
# Checkout a new temporary branch at the current location
git checkout -b tmp

# Move the br branch to the head of the new patchset
git branch -f br B

# Rebase the patchset onto tmp, the old location of br
git rebase --onto tmp A br 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2011-12-30T09:50:36.773

我发现这样做的最简单方法是：

```
git cherry-pick starthash..endhash 
```

请注意，这两个点没有将它们与哈希标签分开的空格。此外，这不会是cherry-pick `starthash`，而是在`starthash`up to and include 之后的所有内容`endhash`。包括`starthash`做`git cherry-pick starthash^..endhash`。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-02-04T02:35:18.940

据我所知，你不能*git merge*这种方式。合并旨在加入具有共同历史的两个分支，而不是用于获取多个提交或补丁系列。我觉得樱桃采摘基本上是你所要求的。

您可以使用*git cherry*（不是*cherry-pick*！）来找出应该将哪些提交插入到您的分支中，然后*git cherry-pick*它们。您还可以明确要求*git cherry-pick*记录这些提交的来源，以防您从公共分支中挑选。这可能是处理这个问题的最好方法。（另一个可能是通过*git format-patch*导出它们，然后使用 git-am/git-apply 导入它们，但这可能会更慢，而且它不会记录提交的来源。）

编辑：“公共”（分支）应该被理解为不受历史编辑影响的东西。当然，您可以在开发闭源软件时执行此操作，而无需公开代码。

# c++ - 在 C++ DLL 和 Cpp/CLI 控制台项目之间传输对象向量

> ID：509863
> 
> 赞同：2
> 
> 时间：2009-02-04T02:25:29.567
> 
> 标签：c++, c++-cli, interop

我有一个与 C++ 服务器对话的 C++ 库应用程序，我正在创建我的自定义类对象的向量。但是当我尝试返回我的自定义类 obj 向量时，我的 Cpp/CLI 控制台应用程序（与本机 C++ 交互）会引发内存冲突错误。

代码示例 -

在我的原生 C++ 类中 -

```
std::vector<a> GetStuff(int x)
{
   -- do stuff
   std::vector<a> vec;
   A a;
   vec.push_back(a);
--- push more A objs
   return vec;
} 
```

在我的 Cpp/CLI 类中

```
public void doStuff()
{
   std::vector<a> vec;
   vec = m_nativeCpp->GetStuff(4);   // where nativeCpp is a dynamically allocated class in nativecpp DLL, the app throws up a memory violation error here!
} 
```

确切的错误信息

> CLIConsole.exe 中发生了“System.AccessViolationException”类型的未处理异常——这是我的控制台 cpp/CLI 项目
> 
> 附加信息：试图读取或写入受保护的内存。这通常表明其他内存已损坏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-02-04T03:30:48.797

看看[这篇支持文章](http://support.microsoft.com/default.aspx?scid=kb;en-us;172396)。我认为发生的事情是您在 CLI 中的向量尝试从 DLL 访问内部向量数据，但由于不同的静态变量而未能这样做。我想唯一好的解决方案是通过 DLL 边界传递简单的数组，`&vector[0]`然后返回它。

但是在 A 类的复制构造函数中可能还会发生一些神奇的事情。如果它们丢失并且类有指针作为成员，您很容易得到相同的错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-02-04T22:03:06.617

我假设本机代码位于单独编译的单元中，例如 .dll。首先要担心的是使用不同分配器（新/删除）的本机代码，当它使用 /MT 编译或链接到另一个版本的 CRT 时，您会得到它。

接下来要担心的是 STL 迭代器调试。您应该确保两个模块都使用相同的 _HAS_ITERATOR_DEBUGGING 设置进行编译。如果本机代码是使用旧版本的 CRT 构建的，它们将是不同的，即发布模式构建。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-04T02:41:19.583

我不确定，但这可能有效：不是返回向量，而是在堆上创建向量并返回指向它的指针。

# php - Zend Framework findBy 魔术方法？

> ID：509868
> 
> 赞同：2
> 
> 时间：2009-02-04T02:28:17.597
> 
> 标签：php, zend-framework

而不是`$this->fetchAll('email = ?',$email)->current()`在模型类中使用，有没有办法做`$this->fetchByEmail($email)`或`$this->findByEmail($email)`？

已经有一个像这样的魔法方法了`Zend_Log`，而不是`$myLogger->log("Something went wrong",Zend_Log::CRIT)`你只是写`$myLogger->crit("Something went wrong")`它，它会自动被映射（通过方法中的一些时髦的反射`__call()`）。

有人知道在任何`Zend_Db`课程中是否有类似的东西，还是我必须写一些东西来为我做这件事？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-02-04T03:01:07.467

对于您想要的特定功能，您需要构建一个自定义函数。老实说，神奇的 __call() 函数背后的逻辑并不难。

这样的事情应该可以解决问题：

```
public function __call($function, $args)
{
    // Expects findBy to be the first part of the function
    $criteria = substr($function, 6);
    $criteria = strtolower($criteria);

    $select = $this->select()
                ->from($this->_name)
                ->where($criteria . ' = ?', $args);
} 
```

显然，如果您希望它处理更复杂的情况，例如数组或多个标准参数，则需要实现更好的检查，但这应该提供基本思想。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-04T03:10:50.787

根据文档，您必须自己完成 [http://framework.zend.com/manual/en/zend.db.table.html#zend.db.table.extending.finders](http://framework.zend.com/manual/en/zend.db.table.html#zend.db.table.extending.finders)

所以我建议创建自己的或使用 gabriel1836 发布的

# ruby-on-rails - 更好的关联表现

> ID：509870
> 
> 赞同：2
> 
> 时间：2009-02-04T02:30:48.730
> 
> 标签：ruby-on-rails, activerecord, associations

现在我有一个名为 Campaigns 的表，它有很多 Hits，如果我打电话说：

```
Campaign.find(30).hits
```

这需要 4 秒或 4213 毫秒。

如果我改为调用它：

```
广告系列 = Campaign.find(30)
广告系列点击数

```

它是否仍然加载所有点击数，然后计数？或者它是否看到我正在计数并避免加载所有点击？（目前是 300,000+ 行）。

我试图找出一种聪明的方法来加载/计算我的点击量。我正在考虑向我的 Campaign.rb 模型添加一个方法，例如：

```
def self.total_hits
   find :first, :select => 'COUNT(id) as hits', :conditions => ["campaign_id = ?", self.id]
结尾

```

我知道查询不会从`hits`表中加载，但这只是从自制查询中计算它的一个示例，与 Ruby on Rails 为我做这件事相反。

这个 memcache 查询会更有效吗？（我让它运行，但似乎没有更好/更快/更慢，只是速度相同。）

```
def self.hits
    Rails.cache.fetch("Campaign_Hits_#{self.campaign_id}", :expires_in => 40) {
      find(:first, :select => 'COUNT(id) as hits', :conditions => ["campaign_id = ?", self.campaign_id]).hits
    }
结尾

```

任何建议都会很棒！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-02-04T02:47:46.917

怎么样：

```
Campaign.find(30).hits.count 
```

您还可以考虑添加以下内容`hit.rb`（假设广告系列和点击之间存在一对多的关系）。

```
belongs_to :campaign, :counter_cache => true 
```

然后，您需要在`campaigns`表中有一列名为`hits_count`. `hits`如果您只获得计数，这将完全避免命中。

您可以检查[API](http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html)以获取完整的概要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-04T02:36:42.197

我的 ActiveRecord 可能有点生疏，如果是这样，请原谅我，但 IIRC`Campaign.find(30).hits`至少是两个单独的查询。怎么`Campaign.find(30, :include => [ :hits ]).hits`做？那应该执行一个查询。

# air - Flex Builder Profiler 能否与 AIR 应用程序一起使用？

> ID：509886
> 
> 赞同：1
> 
> 时间：2009-02-04T02:40:44.810
> 
> 标签：air, flexbuilder, profiler

我正在尝试在 Flex Builder 中分析我的 AIR 应用程序。应用程序正在启动，但探查器未启动。是否真的可以在 FlexBuilder 中分析 AIR 应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-02-04T11:49:15.437

Yes. You may need to switch to the profiler view via the link in the top right of Builder.

# apache - OS X 10.5 Leopard 和 OS X 10.5 Leopard Server 上的库存 Apache 之间的区别？

> ID：509887
> 
> 赞同：1
> 
> 时间：2009-02-04T02:40:54.343
> 
> 标签：apache, macos, osx-leopard

有第一手经验的人能否告诉我 OS X 10.5 Leopard 和 OS X 10.5 Leopard Server 附带的 Apache 安装之间是否有任何区别？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-02-07T09:41:28.170

OS X Server Leopard 版本支持额外的模块，例如 Wiki 和博客服务器、mod_jk、聚光灯搜索，以及更多集成的一些功能。

您还可以获得一个不错的 GUI 来管理您的网站和功能。

# php - mysqli_stmt::bind_param 和 mysqli_stmt::prepare

> ID：509895
> 
> 赞同：0
> 
> 时间：2009-02-04T02:44:56.657
> 
> 标签：php, mysql, mysqli

好的，所以我想做一个准备好的插入，例如：

```
prepare("INSERT INTO `analyzeditemsdetails` SET 
                                     analyzeditem_id = ? ,
                                     start_time = ? ,
                                     end_time = ? 
                                      "); 
```

start_time 和 end_time 作为 sql 日期存储在数据库中。在下一条语句中填写 ?：

```
$stmt->bind_param('i??',
                           $this->sqlid, 
                           $item['start_time'], 
                           $item['end_time'] 
                           ); 
```

所以基本上我应该为 sql 日期调用 bind_param 方法吗？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-02-04T03:16:02.117

我认为这将是 s （字符串）。

```
$stmt->bind_param('iss',
                           $this->sqlid, 
                           $item['start_time'], 
                           $item['end_time'] 
                           ); 
```

# mysql - 备份持久性存储。我有哪些选择？

> ID：509899
> 
> 赞同：0
> 
> 时间：2009-02-04T02:47:00.367
> 
> 标签：mysql, performance, architecture, persistence, uptime

我有一项接受来自提供商的回调的服务。 **动机**：我不想丢失任何回调（当然，除非我的网络无法访问）。

假设发生了不可能的事情，并且我的 mysql 服务器在一段时间内无法访问，我想在重试几次但失败后回退到辅助持久性存储。

我有哪些选择？队列，内存缓存？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-04T07:46:08.437

你说你正在接收“回调”——你还没有弄清楚它们是什么。什么是协议？是否通过网络。

如果是 HTTP，那么我会说最好的方法是，如果您的应用程序无法将数据写入永久存储，它应该向调用者返回一个错误（如果协议中存在“稍后再试”），谁应该稍后再试。

像回调这样的异步进程应该始终能够处理下游故障并将其请求排队。

我曾与一家支付服务提供商合作过（Paypal）。如果您无法完全处理请求，只需将错误发送回调用方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-04T03:13:18.770

我推荐某种作业队列服务器。我个人使用 Starling 并取得了很好的效果。它使用 memcache 协议，因此很容易用作持久队列。 [Github 上的 Starling](http://github.com/starling/starling/tree/master)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-04T03:26:14.140

我之前已经为此在 SQLite 中放置了一个队列。不过，在我的例子中，它是为了防止与 MySQL 服务器的网络链接丢失——数据是本地生成的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-02-04T03:27:18.397

您可以拥有一个备份 MySQL 服务器，并将连接切换到该服务器，以防主要服务器出现故障。如果它只是一个故障转移存储，您可能会在应用程序服务器上本地运行它。

# asp.net - 我可以通过哪些方式对拥有服务 URL 的最终用户隐藏 WSDL

> ID：509905
> 
> 赞同：0
> 
> 时间：2009-02-04T02:48:15.293
> 
> 标签：asp.net, web-services

我有一个可公开访问的 .NET Web 服务，因为它需要通过[Flex](http://www.adobe.com/products/flex/)访问。它目前只有读操作。

> [http://www.example.com/webservices/weather.asmx?wsdl](http://www.example.com/webservices/weather.asmx?wsdl)

我想将一些仅限管理员的 Web 方法添加到同一个 Web 服务，例如`UpdateWeather`和`StartRainstorm`. 显然我不希望我的最终用户能够改变天气模式。

所以我只想隐藏wsdl，这样就不能通过标准`?wsdl`参数访问它。最终我会增加更好的安全性等，但我现在需要一个快速修复。我想如果他们不知道方法名称，他们将无法访问它。

我希望能够禁用 WSDL 生成 - 我可以通过添加[`<add name="Documentation" />`](http://msdn.microsoft.com/en-us/library/ms242494.aspx)到我的 web.config 来做到这一点。但是我希望能够以其他只有我知道的“秘密”方式访问 WSDL，这样我就不必继续访问服务器了。我怎么能做到这一点。如果它是一个秘密 URL 或一个秘密参数或其他什么，我很好。

我现在[通过混淆](http://encyclopedia2.thefreedictionary.com/Security+by+obfuscation)方法对这种安全性很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-04T03:22:26.490

为什么不创建另一个 Web 服务？看起来更简单

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-04T03:24:08.390

您可以做的一件事是为管理合同公开另一个端点。然后关闭该管理端点上的 WSDL 发布者。最终，如果您愿意，您可以只在管理端点上配置安全性。

这是假设您使用的是 WCF。

**更新：** 查看此[WCF 入门教程](http://msdn.microsoft.com/en-us/library/ms734712.aspx)。一旦您对它有所了解，您就会更喜欢 WCF 而不是 ASP.NET/ASMX 服务。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T17:17:54.707

对于更新参考，您可以使用您的开发服务器。除非您提供公共访问权限，否则生产服务器无法公开 wsdl 文档。

或者，如果您有权访问 wcf 程序集，则可以对 wcf 程序集使用 svcutil。这将生成要在您的应用程序中使用的语言代码。

如果您真的非常想将 wsdl 暴露给有限的用户，您可以使用 iis url 重写来阻止来自未经授权的 IP 地址的访问。

# vb.net - 测试 IO.Stream 交互

> ID：509910
> 
> 赞同：1
> 
> 时间：2009-02-04T02:51:31.403
> 
> 标签：vb.net, unit-testing, dependency-injection, io

我的业务逻辑层中有一个接受流的方法，该流在 GUI 中来自用户上传文件，我感兴趣的是哪种方法可以适当地测试该方法是否适当地使用此流来做出决策。

```
public Sub Initialize(ByVal uploadStream As Stream)
    ''// Logic using uploadStream
End Sub 
```

出于测试目的，我希望将模拟流注入此方法，但我发现在使用流时缺乏抽象。

直觉告诉我需要创建一个 Stream 包装器，这将允许我 DI 包装器的接口来测试我的逻辑与流 wapper 的交互。

最好的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-02-04T03:02:35.327

如果您只是想要一种传入“假”上传的方法，您可以在测试工具中构造一个[MemoryStream](http://msdn.microsoft.com/en-us/library/system.io.memorystream.aspx)并将其传入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-04T03:06:27.457

我也倾向于使用 MemoryStream。对于某些测试，您可能希望重载 Read 方法以返回少于请求的字节数。（我认为 MemoryStream 将始终返回请求的字节数，除非它到达流的末尾，但网络流甚至可以在流结束之前返回比请求更少的字节。）

# wordpress - 将子域映射到 Wordpress 页面

> ID：509917
> 
> 赞同：0
> 
> 时间：2009-02-04T02:55:27.823
> 
> 标签：wordpress, mod-rewrite

将子域映射到 Wordpress 页面的任何建议或最佳实践：

```
http://my-page.mydomain.com -> http://mydomain.com/my-page 
```

我也不想进行重定向，只需保留原始子域 URL，直到单击不同的链接，然后删除子域。

我正在使用带有 mod_rewrite 的 Apache 2、带有漂亮 URL 的 wordpress 2.7 和 php 5。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-10T11:23:16.153

如前所述，我将使用 mod_rewrite 来完成这项工作。类似下面的东西应该在 my-page.mydomain.com 虚拟主机中工作

```
 RewriteEngine on
  RewriteRule (.*)  http://mydomain.com/my-page$1 [P,L] 
```

这将要求您启用 mod_proxy。请在 Apache 网站[http://httpd.apache.org/docs/2.2/mod/mod_proxy.html上阅读这样做的安全隐患](http://httpd.apache.org/docs/2.2/mod/mod_proxy.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-04T03:04:04.840

网址重写。我会从[这里开始](http://httpd.apache.org/docs/2.0/misc/rewriteguide.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-02-04T13:27:30.730

你想要的可以用 mod_rewrite 来实现。

请记住，谷歌会将这两个页面检测为重复页面，这可能会损害您的页面排名。

# jakarta-ee - 选择嵌入式 EJB 3.x 容器在 Tomcat 上运行 Java EE 5 应用程序

> ID：509922
> 
> 赞同：5
> 
> 时间：2009-02-04T03:02:02.647
> 
> 标签：jakarta-ee, embedded, jms, ejb, openejb

如果我的问题听起来太笼统，我很抱歉 - 我自己正在做所有的初步研究，但没有什么可以替代真实的经验......

我的目标是将遗留的 Java EE 应用程序（EJB 3.x 之前的版本）移植到具有嵌入式 EJB 容器的 Tomcat。我目前的选择如下：

*   JBoss 可嵌入 EJB
*   Apache OpenEJB
*   OW2 联盟 EasyBeans
*   还要别的吗？

我期待使用 JMS（带有 MDB）、会话 bean（有状态和无状态）、JPA，我对使用带有 Seam 的 JSF 感到非常兴奋。

现在，鉴于上述选择，使用一个或另一个嵌入式 EJB 提供程序有什么优势吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-03-01T07:15:36.347

以下是我自己的作业结果——希望有人发现对嵌入式 EJB 提供程序的分析有助于决定是否使用以及使用哪个容器。

我选择了 Apache OpenEJB，因为它提供了丰富的功能集，部分支持 EJB 3.1，并且似乎是最活跃和最全面的产品。

像往常一样，哪种产品最适合您实际上取决于您的实际需求、目标和环境。

**嵌入式 JBoss**

*   *许可证*：LGPL
*   *爪哇*：JDK 5.0
*   *Tomcat集成*：是的，修改server.xml
*   *Tomcat 版本*：5.0 及以上（？）
*   *部署到 Tomcat*：嵌入式战争
*   *功能列表*：JNDI（本地）、JBoss TS、JBoss Messaging、JCA、JNDI、EJB、JPA、本地 TX 数据源/连接池、EJB 安全 JNDI 配置：通过在 Tomcat 的 JNDI 实例之上分层来覆盖 Tomcat 的 JNDI 实现；Tomcat JNDI 是只读的
*   *部署类型*：仅限 JAR
*   *管理支持*：否
*   *支持*：有限，建立在 JBoss 5.0 核心的顶级 JBoss 微容器之上，支持 Tomcat 上的 Seam 选项
*   *JMS Provider*：与 JBoss 5.x 相同的配置文件。JMS 在 hsqldb-persistence-service.xml 中配置，可以调整它以与其他数据库一起使用
*   *XA 连接池*：否
*   *EJB 计时器服务*：否
*   *持久性提供者：*休眠
*   *限制*：没有远程 JMS；仅限本地接口；仅限本地的 JBoss JNDI 实现
*   *文档*：有限
*   *EJB 3.1*：否

**Apache OpenEJB 3.1**

*   *许可证：* 阿帕奇许可证
*   *Java:*JDK 5.0 或 6.0
*   *Tomcat集成*：是的，修改启动shell脚本
*   *Tomcat 版本：*Tomcat 6.x 或 5.5
*   *部署到Tomcat：*war文件
*   *功能列表：*EJB 3.0 和 3.1、JTA、JAX-WS、JMS、J2EE 连接器、JPA、JNDI。OpenEJB 使用其他几个开源框架，例如提供 JPA 和 CMP 持久性的 OpenJPA、用于 JMS/MDB 的 ActiveMQ 和用于 JAX-WS 功能的 Apache CXF。
*   *JNDI 配置：*灵活的 JNDI 命名模式
*   *部署类型：*Collapsed EAR (war), JAR
*   *管理支持：* ActiveMQ JMX mbeans
*   *支持：*社区支持、邮件列表和论坛、Apache Geronimo 的 EJB 容器
*   *JMS 提供者：*ActiveMQ
*   *XA 连接池：*是
*   *EJB 定时器服务：*是
*   *持久性提供者：*OpenJPA、Hibernate
*   *限制：*OpenEJB 使用 OpenJPA 提供 JPA 和 CMP 持久性，OpenJPA 当前需要 JavaAgent 才能正常工作。
*   *文档：*有限但比其他更好
*   *EJB 3.1：*部分

**易豆**

*   *许可证：*LGPL
*   *Java:*JDK 5.0 或 6.0
*   *Tomcat 集成*：是
*   *Tomcat 版本：*Tomcat 6.x 或 5.5
*   *部署到Tomcat：*war文件
*   *功能列表：*EJB 3.0、JAX-WS、OSGi 支持
*   *JNDI 配置：* ?
*   *部署类型：*JAR
*   *管理支持：* ?
*   *支持：*社区支持和专业支持、邮件列表、JIRA、JOnAS 应用服务器的 EJB 容器
*   *JMS 提供者：* ?
*   *XA 连接池：*？
*   *EJB 定时器服务：*是
*   *持久性提供者：*OpenJPA、Hibernate、TopLink、EclipseLink
*   *限制：*
*   *文件：*有限
*   *EJB 3.1：*否

# language-agnostic - 我怎样才能更好地意识到如何解决一个特定的问题？

> ID：509928
> 
> 赞同：4
> 
> 时间：2009-02-04T03:06:33.027
> 
> 标签：language-agnostic

我现在已经可以很流利地使用几种不同的语言，但我似乎很难真正找出解决特定问题的最佳方法。有哪些方法可以更好地解决编程的实际问题。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-02-04T03:10:58.867

经验。解决全新的问题很难。解决问题的最好方法是尝试找到一个你以前解决过的问题，并且是相似的，并让你的解决方案适应新的问题。因此，除非您有许多不同类型问题的经验，否则很难解决您遇到的新问题。访问这样的网站并阅读问题及其答案是了解其他人如何解决他们遇到的问题的好方法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-02-04T03:11:43.047

基本上，“做它”。当你必须做出选择时，只要做出任何选择（抛硬币除外）。

一旦你有一些有用的东西，然后坐下来，对你做错了什么以及如何做得更好而挠头。

如果您完全不知道该怎么做，请完全解决部分问题并继续前进。

我建议看看[这本书](http://gettingreal.37signals.com/toc.php)。他们不是街区里最好的孩子，尽管他们希望我们认为他们是……但他们在 Basecamp 上做得很好。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-02-04T14:26:50.440

当你只有一把锤子时，一切都开始像钉子了。

因此，请确保您精通算法和数据结构。当您研究它们时，请仔细考虑特定算法适合哪些用途。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-02-04T03:43:21.347

*   **问别人。**你办公室里的某个人，Twitter 或 SO，甚至你的妻子。没有技术知识的人通常会想出更简单的解决方案。

如果您*必须*自己解决，请尝试以下方法之一：

*   快速搜索试图解决您问题的其他人或项目。如果他们有博客、文档或源代码，您也许可以从他们的实现中学习。

*   想出至少两个解决方案并选择最好的一个。

*   假设在文明世界被核战争/天网/Seinfeld 永久无休止的重播之前，您有 15 分钟的时间解决问题，您可能会想到一些更简单的事情，它可以完成 99% 的工作。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-02-04T03:52:29.923

![替代文字](https://press.princeton.edu/images/k669.gif)

这本书是解决问题时要通过的一套启发式方法。[在维基百科](http://en.wikipedia.org/wiki/How_to_Solve_It)上阅读它。在[亚马逊](https://rads.stackoverflow.com/amzn/click/com/069111966X)上购买。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-02-04T03:10:21.630

通过解决实际问题。熟能生巧。

如果你有时间精通**多种语言**，我猜你没有花太多时间做任何实际工作。如果你有工作，可能是时候换一份新工作了。如果您还在上学，您是否有兴趣为自己开始一个项目或为您经常使用的项目做贡献？

了解您难以解决哪些类型的问题可能会有所帮助。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-02-04T03:11:53.513

去寻找一个开源或免费项目，让你感到兴奋并做出贡献。通过注册我最喜欢的视频游戏修改代码，我学到了很多东西。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-02-04T03:12:16.277

经验。

学习真的只到此为止。找点有趣的小东西。去做吧。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-02-04T03:30:59.357

似乎对很多人都有效的一种方法是选择使用《[编程挑战](http://www.programming-challenges.com/pg.php?page=index)》之类的书作为指南，并专注于解决特定类型的问题。例如，如果您在图形问题或动态规划等领域较弱，请在在线评委上找到一组问题并解决它们。您将开始识别模式并能够对问题进行分类。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2009-02-04T03:33:01.850

*   谷歌寻求答案。很可能其他人以前解决过相同的问题或类似的问题。
*   问一下。:)
*   阅读一些关于设计模式的教科书或在线文章。
*   问题可能有很多解决方案，有些更简单，有些更复杂。不要以为只有一种解决方案而陷入困境。只需使用在您的应用程序上下文中最有意义的最简单的解决方案即可。
*   经过多年的经验，您将能够为大多数问题想出自己的解决方案。:)

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2009-02-04T03:34:04.203

学习[算法](http://en.wikipedia.org/wiki/Algorithm)！

搜索并获取尽可能多的示例、有关主题编程或其他方面的书籍等。

通过玩战术游戏也可以提高解决问题的能力。

这些使我享受解决问题的乐趣，并在解决问题方面变得更好（不一定擅长）：

[国际象棋](http://en.wikipedia.org/wiki/Chess)和[igo](http://senseis.xmp.net/)

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2009-02-04T03:54:23.070

我喜欢这种通用方法：

1.  列出可能的解决方案及其优缺点
    （这将促使您简要了解所有解决方案）
2.  选择最好的并在其上进行设计
    （如果您发现任何重大障碍，请重新考虑其他选项）
3.  实施

最重要的是，在每一步，*学习*

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2009-02-04T04:10:09.467

如果可以的话，最好的方法可能是向**大师**学习。特别是如果您能找到熟悉您解决的问题的人。

一般来说，我们手头的工具越多，解决问题的选择就越多。我同意始终编码并始终交付有效的东西（无论它多么不优雅）很重要。但我认为我们需要在多个方面增加我们的技能/知识：

*   语言技能（深入了解您的语言）
*   编程范式（命令式、对象式、函数式）
*   框架知识
*   算法
*   模式
*   日期结构
*   方法论（敏捷、DDD、BDD、?DD）
*   工具
*   ETC

您可以通过即时学习获得很多技能，但我通常在任何时候都有一个我想要更深入了解的宠物主题，通常这意味着拿到这本书并阅读它覆盖覆盖。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2009-02-04T14:38:03.240

通过 Project Euler 努力工作，并查看其他人对问题的解决方案。几乎每个问题都会以您不会想到的方式得到解决，而且通常效率更高。

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2009-02-05T04:51:16.247

我认为成为一名优秀的问题解决者不仅仅需要原始经验——因为我见过经验丰富的*糟糕问题解决者。*

这里有一些提示，但您可以在网络上找到更多提示。

*   查看一些问题并找出它们*的共同点*。你对问题解决方案的理解越广泛，就越能将其应用于其他问题。
*   尝试发现优秀的问题解决者用来解决问题的方法。但不要假设任何人都垄断了解决问题
*   如果您阅读 Richard Feynman 的 [书](https://rads.stackoverflow.com/amzn/click/com/0393061329)，您会注意到他考虑了许多不同的途径来实现他的目标。不要过早地缩小你的方法
*   要乐观。假设您可以找到任何问题的解决方案。你的心态很重要。享受解决问题的过程会更容易
*   不要用头撞墙。如果您似乎没有使用一种方法取得进展，请尝试另一种方法
*   一直在寻找更多解决问题的方法以及对问题解决过程本身的更多见解
*   愿意工作。解决一些问题还是需要很多努力的
*   你知道的研究领域越多，你的观点就越多。我有很强的数学背景，我发现它对很多问题都非常有用。物理、音乐或任何不同的观点都可能有用

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2009-02-04T03:10:43.143

1.  练习解决问题。

2.  参加算法或离散数学课程。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2009-02-04T03:51:09.287

这里有一些我过去用来帮助我理解特定问题及其解决方案的工具。我今天并不总是使用它们，但它们帮助我学习如何思考如何解决问题并提出解决方案。

1.  [Class-Responsibility-Collaboratio](http://en.wikipedia.org/wiki/Class-Responsibility-Collaboration_card) n (CRC) 卡 每个班级一张卡，详细说明班级的责任以及它与哪些其他班级协作。使用卡片，您可以为解决方案布局您的设计，并查看您在哪里有过多的耦合或过多的责任。它们允许您在提交代码之前以轻量级的方式考虑设计。

2.  [用例](http://en.wikipedia.org/wiki/Use_case) 描述用户与系统交互的实际结构化用例，甚至是更简短的故事或故事卡片。我仍然使用故事，尽管我在 wiki 中捕获它们。这允许您以非正式的方式捕获与系统的交互。故事基本上是您需要与客户就应该做什么进行对话的占位符。使用收集的故事，您开始掌握代码的整体意图。您还可以开始了解事物如何相互作用以及与其他事物的作用。这真的是设计的开始。

3.  [UML 图](http://en.wikipedia.org/wiki/Unified_Modeling_Language)——尤其是交互图 有一段时间我经常使用这些。它确实有助于了解事物在引擎盖下实际上是如何协同工作的。我仍然会非正式地绘制一些复杂的交互，以确保我不会错过任何重要的事情。经历了很多这些真的帮助我思考我的对象是如何交互的，现在从交互的角度思考是一种第二天性。

4.  类图——代码的真正高级视图。这些允许您从结构上查看代码，特别是如果您可以将图表分解为组件或架构层。大多数情况下，我现在使用这些来在必要时向其他人解释代码。但是，在开始时，如果您正在为代码的鸟瞰图而苦苦挣扎，那么这些提供了非常好的可视化效果。

如果你尝试这些，我能给你的最好建议是遵循“规则”，直到你真正掌握了正在发生的事情。一旦你觉得你对它们提供的东西有了更好的理解，你可以使用或不使用它们，或者修改你使用它们的方式，只保留有用的东西，让其他东西离开。

# search - 有谁知道在网上详细描述 Lucene 索引格式的体面文档在哪里？

> ID：509929
> 
> 赞同：2
> 
> 时间：2009-02-04T03:10:00.383
> 
> 标签：search, full-text-search, lucene

我主要对引擎本身的内部运作感到好奇。我找不到有关索引格式本身的任何信息（IE 的详细信息，就好像您要构建自己的兼容实现一样）以及它是如何工作的。我已经浏览了代码，但是对于必须在某处描述的内容，它有点难以接受，因为周围有很多与其他语言兼容的端口。谁能提供一个像样的链接？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-02-04T03:32:26.547

你见过这个： http: [//lucene.apache.org/java/2_4_0/fileformats.html](http://lucene.apache.org/java/2_4_0/fileformats.html)？这是我找到的最详细的。

尽管[Lucene in Action](http://www.manning.com/hatcher2/)确实缺少该链接中的细节，但我发现它是一个有用的伴侣，可以在了解细节的同时掌握大局概念。

# java - 你有推荐的 Netbeans 插件吗？

> ID：509931
> 
> 赞同：19
> 
> 时间：2009-02-04T03:10:25.733
> 
> 标签：java, netbeans, plugins, netbeans-plugins

这是问题的副本：[https ://stackoverflow.com/questions/2826/do-you-have-any-recommended-plugins-for-eclipse](https://stackoverflow.com/questions/2826/do-you-have-any-recommended-plugins-for-eclipse)

但现在适用于 netbeans（我不是 eclipse 爱好者。CTRL+TAB 不会更改页面。）

拜托，我很好奇。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-02-04T03:36:25.323

我向任何 Vi/Vim 用户推荐[jVi](http://jvi.sourceforge.net/)插件，效果很好...

我也喜欢[PHP](http://wiki.netbeans.org/PHP)、[Ruby](http://wiki.netbeans.org/Ruby)、[Subversion](http://subversion.netbeans.org/)和[Git](http://www.nbgit.org/)插件...

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-02-04T15:11:11.177

[SQE 插件](https://kenai.com/projects/sqe/pages/Home)（集成了[FindBugs](http://findbugs.sourceforge.net/)、[PMD](http://pmd.sourceforge.net/)和[CheckStyle](http://checkstyle.sourceforge.net/)）非常有用。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2010-08-14T23:18:33.287

[路径工具](http://plugins.netbeans.org/PluginPortal/faces/PluginDetailPage.jsp?pluginid=676)插件。

它为 Netbeans 添加了四个有用的操作：

*   **复制路径操作**将选定节点的文件/文件夹的完整路径复制到剪贴板。
*   **探索操作**启动操作系统文件资源管理器
*   **Shell On Path Action**启动 OS shell
*   **编辑操作**启动外部编辑器

Path Tools 插件的网页看起来不是很活跃，但它在 Netbeans 6.9.1 中运行没有问题（在我的机器上运行）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-02-04T07:23:25.490

我喜欢 RegEx 插件，而且我肯定会安装 Twitter 集成插件 ( [http://plugins.netbeans.org/PluginPortal/faces/PluginDetailPage.jsp?pluginid=15661](http://plugins.netbeans.org/PluginPortal/faces/PluginDetailPage.jsp?pluginid=15661) )

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-02-04T03:25:24.830

恕我直言，这不是不喜欢 Eclipse 的好理由。

无论如何，有很多，这取决于你在做什么。我在用

*   春天，春天MVC，春天Webflow
*   JSF、ICEFaces 和视觉
*   颠覆
*   Groovy Grails
*   C/C++
*   休眠
*   UML
*   PHP
*   网络应用程序
*   老板
*   RESTful Web 服务、SOA
*   Java 文档
*   蚂蚁，马文
*   Python
*   还有一些，但这些都是值得注意的。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-02-04T03:23:42.133

自动项目。

完全建立一个项目/“工作区”它是 ANT 文件。

更易于维护。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-02-04T07:34:47.837

六

[http://www.netbeans.org/kb/55/vi-integration.html](http://www.netbeans.org/kb/55/vi-integration.html)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2010-01-20T14:06:37.280

Enclojure 是一个很好的插件。将 Clojure 动态语言很好地集成到 Netbeans 环境中（包括 Netbeans 中的 REPL 权限！）。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-02-04T12:42:33.800

Groovy 插件很棒！[http://groovy.codehaus.org/NetBeans+Plugin](http://groovy.codehaus.org/NetBeans+Plugin)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2010-08-14T23:25:53.223

[http://coffeecokeandcode.blogspot.com/2008/05/special-copypaste.html](http://coffeecokeandcode.blogspot.com/2008/05/special-copypaste.html)

它是一个复制和粘贴插件，有时当我编写 word 文档和需要复制代码颜色的东西时，我会与人们分享我的代码。您还可以将其复制为 html 和 css 以粘贴到网页中。

[http://openjdk.java.net/tools/svc/jconsole/](http://openjdk.java.net/tools/svc/jconsole/) 非常适合监控您的程序，提供了一些很酷的功能来进行一般监控

# c++ - CRecordset - 在 Update() 之后获取自动生成的 ID

> ID：509938
> 
> 赞同：4
> 
> 时间：2009-02-04T03:12:37.930
> 
> 标签：c++, mfc, odbc

刚刚在 MFC CRecordset (ODBC/Dynaset) 上调用了 Update()，我该怎么做才能在不再次访问数据库的情况下提取自动生成的 ID？理想情况下，无论它是什么都可以在 SQL Server 和 MS Access 中工作（因此查询最后一个身份可能不起作用......）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-02-17T23:17:42.030

做不到。有必要再次访问数据库以提取@@Identity。真可惜。

# c++ - 可扩展的 PPP 协议。需要有关状态机的帮助

> ID：509943
> 
> 赞同：1
> 
> 时间：2009-02-04T03:17:22.053
> 
> 标签：c++, networking, ppp, scalable

我正在设计可扩展的 PPP [意味着它可以扩展到以太网、HDLC、ATM 等]。我一直在确定状态机是否由 PPP 堆栈处理 [意味着我为 PPPStack 设计了基类，其中存在 FSM、编码、解码等] 或 PPPoE [派生自我的 PPP 基类 PPPStack]。

我正在使用 C++ 设计 PPP，以便它可以扩展到 oE、oATM 等。

PPP 帧编码在 PPP 本身和 PPPoE [其中 PPP 帧在发现和会话开始后添加] 中完成。

这是我第一次写 Scalable，如果任何参与 Scalable Architecture 的人也希望听到他们的观点：)

非常感谢你提前

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-02-04T03:44:22.293

PPP 确实有一个状态机，实际上有几个。该链接由状态机启动、授权和维护。

然而，LCP（链路控制协议）是您需要处理的更复杂的状态机。

有很多关于 PPP 的资源，恐怕我在你的帖子中看到的唯一问题是

“我一直在确定状态机是由 PPP 堆栈还是 PPPoE 处理的。”

答案是 PPP 确实有几个状态机。

PPPoE 可能还有一两个状态机，但我还没有检查过。

以下是一些可能对您有所帮助的资源：

非常好的文档，具有良好的 LCP 状态转换表：
[http ://scholar.lib.vt.edu/theses/available/etd-04252000-20310024/unrestricted/chapter4.pdf](http://scholar.lib.vt.edu/theses/available/etd-04252000-20310024/unrestricted/chapter4.pdf)

优秀的幻灯片概述谈论 PPP 的许多方面：
[http ://www.cs.huji.ac.il/~sans/students_lectures/PPP-Intro.ppt](http://www.cs.huji.ac.il/~sans/students_lectures/PPP-Intro.ppt)

此外，谷歌搜索可能会有用：
[http ://www.google.com/search?q=ppp%20state%20machine](http://www.google.com/search?q=ppp%20state%20machine)

祝你好运，如果我不明白，请随时修改您的问题。

-亚当

# java - 优化 Hibernate 实体保存？

> ID：509950
> 
> 赞同：1
> 
> 时间：2009-02-04T03:22:54.443
> 
> 标签：java, hibernate, transactions

有没有办法减少 SQL 插入和 SQL 更新中不必要的/空字段？

例如，我有一个单一的休眠实体类映射到一个有 10 列的表。数据的填充实际上分两个阶段完成。当用户提交请求时，我会将请求信息插入到带有 hibernate 实体的表中，但只填充 7 个字段。经过一些处理（例如等待其他用户交互），我将填充剩余的 3 个字段（使用之前插入的 id）。

如果我坚持使用单个实体类，对于第二次更新，我执行的步骤如下：

1）加载id标识的实体

2) 保存实体，它会生成似乎正在发送所有字段的 sql。

或者，我创建了两个实体类，并指向同一个表并分别保存它们。

有人有更好的建议吗？

肯特

编辑：

我真正想要实现的是以下效果： insert t(id,field1,field2) (?,?,?) update t set field3=? 字段4=？哪里id=？

我现在使用 dynamicUpdate=true 可以达到的最好效果是 insert t(id,field1,field2) (?,?,?) select field1,field2,field3,field4 from t where id=? 更新 t 设置字段 3=？字段4=？哪里id=？

有没有办法消除该选择语句？插入后，原始持久对象不会存储在内存中的任何位置。

附加说明。实体类使用 Hibernate 验证进行注释。我目前正在尝试达到上述预期效果，所以我将它们注释掉。但是当我重新打开它们时，由于@NotNull 和@NotEmpty 而出现验证错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-02-04T04:14:52.827

如果添加注释：

```
@org.hibernate.annotations.Entity(dynamicUpdate = true) 
```

在您的实体顶部，只有已更改的字段才会发送到数据库。

# javascript - 将相同的事件处理代码附加到jquery中的多个事件

> ID：509963
> 
> 赞同：16
> 
> 时间：2009-02-04T03:32:24.737
> 
> 标签：javascript, jquery

我有一个输入元素，我想将更改和按键事件与输入绑定，但是这两个事件的事件处理代码是相同的。是否有任何简短的方法可以做到这一点，而不是两次编写相同的代码。好吧，我可以写一个方法，但想看看是否有更简单的方法来做到这一点

```
$("#inpt").change(function(){
   some code
});

$("#inpt").keypress(function(){
   same code
}); 
```

有什么办法可以绑定这两个事件吗？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2009-02-04T03:36:56.210

您可以使用 jQuery on 方法。

```
$("#inpt").on( "change keypress", function () {
     code
}); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-02-04T03:34:13.423

您可以保存该函数并将其绑定到两者：

```
var fn = function(){ /*some code*/ };
$("#inpt").change(fn).keypress(fn); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2011-07-25T23:05:39.570

~~您也可以使用“现场”事件而不是“绑定”事件。'live' 事件将涵盖动态创建的元素。~~（在 1.7 中已弃用）

Kaless1n 和 Matthew，要绑定到多个元素，请使用“Attribute Starts With Selector”：

```
var fn = function() { /*some code*/ };

$('input[id^="foo_"]').click(fn).keyup(fn).keydown(fn); 
```

这将绑定到“id”以“foo_”开头的所有“输入”元素。例如，您可以将“输入”更改为任何其他元素和/或具有“名称”属性的“id”。

# c# - 如何在文档中找到未知的 XML 名称空间？

> ID：509967
> 
> 赞同：1
> 
> 时间：2009-02-04T03:33:29.930
> 
> 标签：c#, .net, xsd, schema, xml-namespaces

具体来说（深吸一口气）：您将如何在实例的（属性）`XmlDocument`中没有适用的模式的 C#/.NET 中查找所有 XML 名称空间？`XmlSchemaSet``Schemas`

我的 XPath 魔法缺乏做这种事情的复杂性，但与此同时我会继续寻找......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2011-01-27T17:09:03.600

我发现从给定 XmlDocument 检索所有名称空间的最简单方法是通过所有节点查找唯一 Prefix 和 NamespaceURI 值的 XPath。

我有一个辅助例程，用于在 XmlNamespaceManager 中返回这些唯一值，以便在处理复杂的 Xml 文档时更简单。

代码如下：

```
private static XmlNamespaceManager PrepopulateNamespaces( XmlDocument document )
{
    XmlNamespaceManager result = new XmlNamespaceManager( document.NameTable );
    var namespaces = ( from XmlNode n in document.SelectNodes( "//*|@*" )
                       where n.NamespaceURI != string.Empty
                       select new
                       {
                           Prefix = n.Prefix,
                           Namespace = n.NamespaceURI
                       } ).Distinct();

    foreach ( var item in namespaces )
        result.AddNamespace( item.Prefix, item.Namespace );

    return result;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-08-01T11:47:56.960

您需要获取文档中所有不同名称空间的列表，然后将其与模式集中的不同名称空间进行比较。

但是命名空间声明名称通常不会在 XPath 文档模型中公开。但是给定一个节点，您可以获得它的命名空间：

```
// Match every element and attribute in the document
var allNodes = xmlDoc.SelectNodes("//(*|@*)");
var found = new Dictionary<String, bool>(); // Want a Set<string> really
foreach (XmlNode n in allNodes) {
  found[n.NamespaceURI] = true;
}
var allNamespaces = found.Keys.OrderBy(s => s); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2020-08-25T16:13:07.283

这是 Marks c# 到 vb.net 的快速转换（对于那些遗留程序）：

```
 Friend Function SetupNameSpacesFromFile(ByVal xmlDoc As XmlDocument) As XmlNamespaceManager

        Dim result As XmlNamespaceManager = New XmlNamespaceManager(xmlDoc.NameTable)
        Dim n As XmlNode
        Dim d As Dictionary(Of String, String) = New Dictionary(Of String, String)

        For Each n In xmlDoc.SelectNodes("//*|@*")
            If n.NamespaceURI <> String.Empty Then
                If Not d.ContainsKey(n.Prefix) Then
                    d.Add(n.Prefix, n.NamespaceURI)
                End If
            End If
        Next

        For Each item As KeyValuePair(Of String, String) In d
            result.AddNamespace(item.Key, item.Value)
        Next

        Return result
    End Function 
```

# .net - 您可以推荐什么库来从 .Net 中的网络摄像头捕获图像？

> ID：509975
> 
> 赞同：1
> 
> 时间：2009-02-04T03:38:26.800
> 
> 标签：.net, vb.net

您可以推荐什么库来从 .Net 中的网络摄像头捕获图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-02-04T03:41:09.837

DirectShow 很不错。[在这里](https://stackoverflow.com/questions/342774/c-streaming-webcam-video)看这个问题

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-04T03:49:08.993

Windows Image Acquisition 使用[wiaCommandTakePicture](http://msdn.microsoft.com/en-us/library/ms630806.aspx) (VB.NET 根据你的标签:))

[正如Hanselman 在 coding4fun](http://blogs.msdn.com/coding4fun/archive/2006/10/31/912546.aspx)的这个项目中所展示的那样

我粘贴了 C# 代码，但您也可以阅读网站上的 VB.NET 替代品：

```
CommonDialogClass class1 = new CommonDialogClass();
Device d = class1.ShowSelectDevice(WiaDeviceType.UnspecifiedDeviceType, true,false);
if (d != null)
{
    settings.DeviceID = d.DeviceID;
    settings.Save();
}

Item item = device.ExecuteCommand(CommandID.wiaCommandTakePicture);
foreach (string format in item.Formats)
{
    if (format == jpegGuid)
    {
        WIA.ImageFile imagefile = item.Transfer(format) as WIA.ImageFile;
        filename = GetFreeFileName();
        if (string.IsNullOrEmpty(filename) == false)
        {
            imagefile.SaveFile(filename);
        }
        this.picLastImage.Load(filename);
        return filename;
    }
} 
```

# asp.net - 比 HttpHandlers 更快的东西？

> ID：509978
> 
> 赞同：18
> 
> 时间：2009-02-04T03:40:39.213
> 
> 标签：asp.net, performance, httphandler

在 ASP.NET 网站上执行方法的最快方法是什么？

这个场景很简单：我有一个方法，当一个网页被点击时应该执行。页面上没有发生任何其他事情，唯一呈现的输出是“完成”消息。我希望处理尽可能快。

每一次点击都是独一无二的，所以缓存不是一种选择。

我的计划是使用 HttpHandler 并在 web.config (mypage.ashx) 而不是常规的 .aspx 页面中对其进行配置。这应该会显着减少开销。

所以我的问题是：有没有比使用 HttpHandlers 更快的方法来实现这一点？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2009-02-04T03:53:47.470

根据您正在做的事情，我不希望看到比仅使用 HttpHandler 有很多改进。我将首先编写 HttpHandler 并查看它的执行情况。如果您需要它更快，请尝试更仔细地查看您在处理请求时实际执行的操作并查看可以优化的内容。例如，如果您正在对数据库进行任何日志记录，请尝试写入本地数据库而不是通过网络写入。如果它仍然不够快，那么也许考虑写一些较低级别的东西。不过，在那之前，我会坚持使用你最容易写的东西。

作为参考，我在 ASP.NET 中编写了一个广告服务器（使用 HttpHandlers），它可以在负载下在 0-15 毫秒内提供广告（包括定位和记录展示到本地数据库）。我以为我正在做很多处理-但恕我直言，这是一个很好的响应时间。

* * *

**几个月后更新**：

如果您清除默认包含的所有 HttpModules，这将消除相当多的开销。默认情况下，通过机器级 web.config 文件将以下 HttpModules 包含在每个站点中：

*   输出缓存
*   会话（用于会话状态）
*   Windows身份验证
*   表单身份验证
*   护照认证
*   角色管理器
*   网址授权
*   文件授权
*   匿名识别
*   轮廓
*   错误处理程序
*   服务模式

就像我上面说的，我的广告服务器不使用任何这些，所以我刚刚在该应用程序的 web.config 中完成了这个：

```
<httpModules>
   <clear />
</httpModules> 
```

如果您需要其中的一些，但不是全部，您可以删除不需要的：

```
<httpModules>
   <remove name="PassportAuthentication" />
   <remove name="Session" />
</httpModules> 
```

**ASP.NET MVC 注意：** ASP.NET MVC 需要会话状态模块，除非您执行特定的解决方法。有关详细信息，请参阅此问题：[如何在 ASP.NET MVC 中禁用会话状态？](https://stackoverflow.com/questions/884852/how-can-i-disable-session-state-in-asp-net-mvc)

**IIS7 更新：**不幸的是，在 IIS7 中事情并不那么简单。这是[在 IIS7 中清除 HTTP 模块的方法](https://serverfault.com/questions/72338/iis7-lock-violation-error-http-handlers-modules-and-the-clear-element)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-02-04T04:06:13.967

I'm not sure what your exact scenario is, but if all your page is doing is processing some data, you don't really need an aspx page or an http handler at all. You could write an ASMX web service or WCF service to do what you need and this would most likely be less overhead. The WCF service doesn't even have to be hosted in ASP.NET. You can host it from a Windows service or console app, and call it in-proc using named pipes. This would probably reduce the overhead for calling the data processing code significantly.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-07-08T14:18:11.063

If you really have to use asp.net, you can also just hook into AuthorizeRequest step and intercept the request from there, do your processing and write your *Done* response directly.

# groovy - 关于 Groovy 中“&”的问题

> ID：509981
> 
> 赞同：14
> 
> 时间：2009-02-04T03:43:03.577
> 
> 标签：groovy

像这样
**：**

```
map = ['a':1,'b':2]
doubler = this.&doubleMethod
map.each(doubler)
println map 
```

这里的“&”是干什么用的？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2009-02-04T04:25:32.773

运算符`.&`是一个*方法引用*，即它将指示的方法转换为闭包，以便可以将其传递给其他需要闭包作为参数的方法。

# c++ - 如何允许 64 位窗口上的 32 位应用程序执行 Windows\System32 中提供的 64 位应用程序

> ID：509989
> 
> 赞同：4
> 
> 时间：2009-02-04T03:48:42.350
> 
> 标签：c++, windows-vista, 64-bit, 32-bit, vista64

假设您有一个应用程序，您希望用户能够浏览 system32 目录并在其中执行程序（如 telnet）。

当您需要支持 XP 以上作为客户端并支持 2k 以上作为服务器时，支持此功能的最佳方法是什么？

*写完所有这些后，我想知道是否需要太多时间/精力来提供浏览器来执行此操作，他们可以从资源管理器中复制它。仍然需要启动能力。*

我发现了一些关于[Nynaeve](http://www.nynaeve.net/?p=133)的讨论。

到目前为止，似乎有以下选项

1.  在 Windows 中创建一个 sysnative 文件夹，它允许您浏览/执行 64 位。问题是：
    *   仅适用于 Vista/Longhorn，因此不支持 XP 64
    *   导致路径命名不同，不能在多个版本上使用相同的路径。
    *   将激活整个窗口，而不仅仅是我们的应用程序
    *   安装应用程序时可能不适合（可能不适合）
    *   如果有 32 位和 64 位版本，则仅允许通过路径明确指定要启动的应用程序版本
2.  在显示文件列表或执行用户运行命令时，使用 windows API 暂时禁用重定向。问题是：
    *   仅在 64 位上可用 - 必须与 GetProcAddress 混淆
    *   仅在某些服务包下可用
    *   必须单独确定应该实施的所有位置
    *   用户将需要提供有关这是 64 位应用程序还是 32 位应用程序的单独信息。

如果有人有一些示例代码可以显示 Windows OpenFile 对话框（例如使用 MFC CFileDialog），它可以原生地显示 XP/Vista 并允许查看 64 位 system32 目录，那就太棒了。

如果有人有启动命名应用程序的示例，那也很棒！

编辑：
目前我们使用 CreateProcess 来启动应用程序（这是失败的）。

```
err = CreateProcess((wchar_t*)exeName.c_str(), (wchar_t*)cmdLine.c_str(), NULL, NULL, FALSE, CREATE_SEPARATE_WOW_VDM, NULL, workingDir.c_str(), &startupInfo, &processInfo); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-02-05T03:16:09.933

我选择了选项 2，对于那些可能感兴趣的人；这是我对基于 MS 的注释管理禁用 Wow64 重定向的范围版本的快速破解。如果 API 可用，将重定向，期望 kernel32.dll 已经可用。

```
class Wow64RedirectOff {
    typedef BOOL (WINAPI *FN_Wow64DisableWow64FsRedirection) ( __out PVOID *OldValue );
    typedef BOOL (WINAPI *FN_Wow64RevertWow64FsRedirection) ( __in  PVOID OldValue );

public:
    Wow64RedirectOff() {
        LPFN_Disable = (FN_Wow64DisableWow64FsRedirection)GetProcAddress(
            GetModuleHandle(TEXT("kernel32")),"Wow64DisableWow64FsRedirection");
        if( LPFN_Disable ) {
            LPFN_Disable(&OldValue);
        }
    }

    ~Wow64RedirectOff() {
        if( LPFN_Disable ) {
            FN_Wow64RevertWow64FsRedirection LPFN_Revert = (FN_Wow64RevertWow64FsRedirection)GetProcAddress(
                GetModuleHandle(TEXT("kernel32")),"Wow64RevertWow64FsRedirection");
            if( LPFN_Revert ) {
                LPFN_Revert(OldValue);
            }
        }
    }

private:
    FN_Wow64DisableWow64FsRedirection LPFN_Disable;
    PVOID OldValue; 
}; 
```

因此用法将是

```
Wow64RedirectOff scopedRedirect;
//CFileOpen
//CreateProcess 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-02-04T21:26:20.247

您是否被重定向到 Windows/SysWoW64？我可以从 32 位托管可执行文件中的 OpenFile 从 Windows/System32 启动 64 位应用程序。

# python - 编写集成高斯的 Python 函数的最佳方法是什么？

> ID：509994
> 
> 赞同：6
> 
> 时间：2009-02-04T03:49:20.070
> 
> 标签：python, scipy, gaussian, integral

在尝试使用 scipy 的 quad 方法来积分高斯（假设有一个名为 gauss 的高斯方法）时，我在将所需的参数传递给 gauss 并让 quad 对正确的变量进行积分时遇到问题。有没有人有一个很好的例子来说明如何使用带多维函数的四边形？

但这让我想到了一个更宏大的问题，即总体上整合高斯的最佳方法。我没有在 scipy 中找到高斯积分（令我惊讶）。我的计划是编写一个简单的高斯函数并将其传递给 quad（或者现在可能是一个固定宽度的积分器）。你会怎么办？

编辑：固定宽度意味着类似于 trapz 的东西，它使用固定的 dx 来计算曲线下的面积。

到目前为止，我得到的是一个 make___gauss 方法，它返回一个 lambda 函数，然后可以进入四边形。这样我可以在积分之前用我需要的平均值和方差来制作一个正常的函数。

```
def make_gauss(N, sigma, mu):
    return (lambda x: N/(sigma * (2*numpy.pi)**.5) *
            numpy.e ** (-(x-mu)**2/(2 * sigma**2)))

quad(make_gauss(N=10, sigma=2, mu=0), -inf, inf) 
```

当我尝试传递一个通用高斯函数（需要用 x、N、mu 和 sigma 调用）并使用四边形填充一些值时

```
quad(gen_gauss, -inf, inf, (10,2,0)) 
```

参数 10、2 和 0 不一定匹配 N=10、sigma=2、mu=0，这提示了更扩展的定义。

scipy.special 中的 erf(z) 需要我准确定义 t 最初是什么，但很高兴知道它在那里。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2009-02-04T12:32:51.073

好的，您似乎对几件事感到很困惑。让我们从头开始：您提到了一个“多维函数”，但接下来继续讨论通常的单变量高斯曲线。这*不是*一个多维函数：当你对它进行积分时，你只积分了一个变量 (x)。区分很重要，因为有*一个*称为“多元高斯分布”的怪物，它是一个真正的多维函数，如果集成，则需要对两个或多个变量进行积分（它使用我之前提到的昂贵的蒙特卡洛技术）。但是您似乎只是在谈论常规的单变量高斯，它更容易使用，集成等等。

单变量高斯分布有两个参数，`sigma`和`mu`， 是我们将表示的单个变量的函数`x`。您似乎还携带了一个标准化参数`n`（这在几个应用程序中很有用）。归一化参数通常*不*包含在计算中，因为您可以在最后将它们重新添加（请记住，积分是线性运算符：）`int(n*f(x), x) = n*int(f(x), x)`。但如果您愿意，我们可以随身携带；我喜欢正态分布的符号是

`N(x | mu, sigma, n) := (n/(sigma*sqrt(2*pi))) * exp((-(x-mu)^2)/(2*sigma^2))`

`x`（读作“给定`sigma`,`mu`和的正态分布`n`由...给出”）到目前为止，一切都很好；这与您拥有的功能相匹配。请注意，这里唯一*真正的变量*是`x`：其他三个参数对于任何特定的高斯都是*固定的。*

现在来看一个数学事实：可以证明，所有高斯曲线都具有相同的形状，它们只是稍微移动了一点。所以我们可以使用`N(x|0,1,1)`称为“标准正态分布”的 ，并将我们的结果转换回一般的高斯曲线。所以如果你有 的积分`N(x|0,1,1)`，你可以简单地计算任何高斯的积分。这个积分出现得如此频繁，以至于它有一个特殊的名字：*误差函数* `erf`。由于一些旧约定，它不*完全是* `erf`; 还有一些加法和乘法因素也被随身携带。

如果`Phi(z) = integral(N(x|0,1,1), -inf, z)`；也就是说，`Phi(z)`是从负无穷到 的标准正态分布的积分`z`，那么根据误差函数的定义，它是真的

`Phi(z) = 0.5 + 0.5 * erf(z / sqrt(2))`.

同样，如果`Phi(z | mu, sigma, n) = integral( N(x|sigma, mu, n), -inf, z)`; 也就是说，是给定参数,和从负无穷大到`Phi(z | mu, sigma, n)`的正态分布的积分，那么根据误差函数的定义，它是真的`mu``sigma``n``z`

`Phi(z | mu, sigma, n) = (n/2) * (1 + erf((x - mu) / (sigma * sqrt(2))))`.

如果您想了解更多细节或证明这一事实，请查看[有关普通 CDF 的 Wikipedia 文章。](http://en.wikipedia.org/wiki/Normal_distribution#Cumulative_distribution_function)

好的，这应该是足够的背景解释。回到你的（编辑的）帖子。您说“ scipy.special 中的 erf(z) 将要求我准确定义 t 最初是什么”。我不知道你的意思是什么；（时间？）在哪里`t`进入这个？希望上面的解释稍微揭开了误差函数的神秘面纱，现在更清楚为什么误差函数是适合这项工作的函数。

你的 Python 代码没问题，但我更喜欢闭包而不是 lambda：

```
def make_gauss(N, sigma, mu):
    k = N / (sigma * math.sqrt(2*math.pi))
    s = -1.0 / (2 * sigma * sigma)
    def f(x):
        return k * math.exp(s * (x - mu)*(x - mu))
    return f 
```

使用闭包可以预先计算常量`k`和`s`，因此每次调用返回的函数时需要做的工作更少（如果您正在集成它，这可能很重要，这意味着它将被多次调用）。另外，我避免使用任何求幂运算符`**`，这比仅仅写出平方要慢，并将除法提升到内部循环之外并用乘法替换它。我没有看过它们在 Python 中的实现，但是从我上次使用原始 x87 程序集调整内部循环以获得纯速度，我似乎记得加、减或乘法每个大约需要 4 个 CPU 周期，除以大约36，约 200 的幂。那是几年前的事了，所以对这些数字持保留态度；尽管如此，它还是说明了它们的相对复杂性。同样，计算`exp(x)`蛮力方法是一个非常糟糕的主意。在编写一个好的实现时，您可以采取一些技巧`exp(x)`，使其比一般`a**b`风格的幂运算更快、更准确。

我从未使用过常量 pi 和 e 的 numpy 版本；我一直坚持使用普通的旧数学模块版本。我不知道为什么你可能更喜欢任何一个。

我不确定你`quad()`打电话的目的是什么。`quad(gen_gauss, -inf, inf, (10,2,0))`应该将重新归一化的高斯从负无穷积分到正无穷大，并且应该总是吐出 10（你的归一化因子），因为高斯在实线上积分为 1。任何远离 10 的答案（我不希望*正好是*10 `quad()`，因为毕竟只是一个近似值）意味着某处搞砸了……很难说在不知道实际返回值和可能的内部工作原理的情况下搞砸了什么`quad()`。

希望这已经揭开了一些混乱的面纱，并解释了为什么错误函数是您问题的正确答案，以及如果您好奇的话如何自己做这一切。如果我的任何解释不清楚，我建议先快速浏览一下维基百科；如果您仍有疑问，请随时提问。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2009-02-04T04:11:03.257

scipy 附带“误差函数”，即高斯积分：

```
import scipy.special
help(scipy.special.erf) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2011-01-18T13:49:59.387

高斯分布也称为正态分布。scipy norm 模块中的 cdf 函数可以满足您的需求。

```
from scipy.stats import norm
print norm.cdf(0.0)
>>>0.5 
```

[http://docs.scipy.org/doc/scipy/reference/generated/scipy.stats.norm.html#scipy.stats.norm](http://docs.scipy.org/doc/scipy/reference/generated/scipy.stats.norm.html#scipy.stats.norm)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-02-04T04:10:36.423

我假设您正在处理多元高斯；如果是这样，SciPy 已经拥有您正在寻找的功能：它被称为 MVNDIST（“MultiVariate Normal DISTribution”）。SciPy 文档一如既往地糟糕，所以我什至无法找到该函数的埋藏位置，但[它在在某处](http://www.google.com/search?q=site%3Ascipy.org+MVNDST+&ie=utf-8&oe=utf-8&aq=t)。文档很容易成为 SciPy 中最糟糕的部分，过去一直让我感到沮丧。

单变量高斯仅使用良好的旧误差函数，其中有许多实现可用。

至于解决一般问题，是的，正如 James Thompson 所提到的，您只想编写自己的高斯分布函数并将其提供给 quad()。但是，如果您可以避免广义积分，那么这样做是个好主意——针对特定函数（如 MVNDIST 使用）的专用积分技术将比标准的蒙特卡罗多维积分快得多，后者可能非常慢为高精度。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-02-04T03:59:32.280

为什么不总是进行从 -infinity 到 +infinity 的整合，以便您始终知道答案？（开玩笑！）

我的猜测是，SciPy 中还没有固定高斯函数的唯一原因是它是一个简单的函数。您关于编写自己的函数并将其传递给 quad 以进行集成的建议听起来很棒。它使用公认的 SciPy 工具来执行此操作，它对您来说是最少的代码工作，并且即使其他人从未见过 SciPy，它也非常易读。

固定宽度的积分器到底是什么意思？您的意思是使用与 QUADPACK 使用的算法不同的算法吗？

编辑：为了完整起见，这类似于我尝试使用平均值为 0 且标准差为 1 从 0 到 + 无穷大的高斯：

```
from scipy.integrate import quad
from math import pi, exp
mean = 0
sd   = 1
quad(lambda x: 1 / ( sd * ( 2 * pi ) ** 0.5 ) * exp( x ** 2 / (-2 * sd ** 2) ), 0, inf ) 
```

这有点难看，因为高斯函数有点长，但写起来还是很简单的。******************