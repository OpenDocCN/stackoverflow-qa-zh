# StackOverflow 问答 10662000-10662999

# .htaccess - 重写子目录

> ID：10662001
> 
> 赞同：0
> 
> 时间：2012-05-19T03:10:19.373
> 
> 标签：.htaccess, redirect

我使用 IPB 创建了一个网站，我相信它是用 PHP 编写的，URL 是目前的论坛，我想要的是要重写的 URL

并且当用户转到索引以强制用户使用而不是

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T03:34:45.913

确保启用了 mod_rewrite 并在您的 conf 文件中设置了 AllowOverride All，并将这些规则放在您的 web 目录根目录下的 .htaccess 文件中：

```
RewriteCond %{HTTP_HOST} !^www
RewriteRule ^(.*)$ http://www.thereviewforum.com/$1 [R]

RewriteCond %{HTTP_HOST} ^thereviewforum
RewriteRule ^forum(.*) http://community.thereviewforum.com$1 [R,L] 
```

**使用完整的 .htaccess 文件进行**编辑：****

 **```
RewriteEngine On 
RewriteBase /

RewriteCond %{HTTP_HOST} ^thereviewforum.com
RewriteRule ^(.*)$ http://www.thereviewforum.com/$1 [R] 

RewriteCond %{HTTP_HOST} ^www.thereviewforum 
RewriteRule ^forum/?(.*) http://community.thereviewforum.com/$1 [R,L]

RewriteCond %{REQUEST_FILENAME} !.*\.(jpeg|jpg|gif|png|ico)$ 
RewriteCond %{REQUEST_FILENAME} !-f 
RewriteCond %{REQUEST_FILENAME} !-d 
RewriteRule . /index.php [L] 
```**

# jquery - JQUERY淡出马奎

> ID：10662003
> 
> 赞同：0
> 
> 时间：2012-05-19T03:10:38.277
> 
> 标签：jquery

```
function UYARIAYAR(kevent,RENGa){
$('marquee').fadeOut(10);
$('.olays').html(kevent).css({"color":RENGa}).fadeIn(100).animate({opacity: 1}, 2200,function(){ 
$(this).animate({opacity: 0.8}, 1800,function(){
$(this).animate({pacity: 0.6}, 800,function(){
$(this).animate({opacity: 0.4}, 800,function() { 
$(this).animate({opacity: 0.0}, 800).css({"color":"#600"}).fadeOut(1);
})})})})
setTimeout('$("marquee").fadeIn().start();',8000);
}

function uyari(tur,mesaj){
var mesajimiz = null;
var font_renk = null;
    switch($.trim(tur)){
    case 'hata' : mesajimiz = 'Yaptıgınız İşlemde Hata Meydana Geldi'; font_renk='red'; break;
    default  : mesajimiz = 'Yaptıgınız İşlem Okey Canım'; font_renk='green'; break;
        }
    UYARIAYAR(mesajimiz,font_renk)
}

$(document).ready(function(e) {
    uyari('hata',null);
}); 
```

一切都很好，但当 MARQUEE Dom 回来时，它并没有开始停止滚动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T03:25:16.697

`<marquee>`标签**不是**标准的html（[见这里](http://en.wikipedia.org/wiki/Marquee_element)），因此它的行为很可能在不同的平台上发生变化，所以 jQuery 在淡出它时失败并不奇怪。

我建议**不要**使用它，也不要使用任何滚动动画，因为这样的动画被证明非常分散注意力并且通常非常丑陋。

另一个建议：我会替换这段代码：

```
setTimeout('$("marquee").fadeIn().start();',8000); 
```

有了这个：

```
setTimeout(function(){
    $("marquee").fadeIn();
}, 8000); 
```

（它做同样的事情，但它更具可读性，你不必双引号）。

**编辑：**

`$( ... ).fadeIn().start()`不是一个函数 - 只是使用`$( ... ).fadeIn()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T03:14:42.010

尝试在 jQuery 中使用 stop()。

[http://api.jquery.com/stop/](http://api.jquery.com/stop/)

# javascript - 如何使用加号和减号更改手风琴标题？

> ID：10662009
> 
> 赞同：5
> 
> 时间：2012-05-19T03:11:35.467
> 
> 标签：javascript, jquery

我不喜欢默认的 Accordion 图标，我想更改它们。这个链接在这里：

[http://jqueryui.com/demos/accordion/#option-header](http://jqueryui.com/demos/accordion/#option-header)

显示更改标题的选项，但需要指定图标。我不需要图标。我只需要一个简单`(+)`的`(-)`

我怎么能用手风琴做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-19T03:22:50.257

Hiya**工作示例演示** [http://jsfiddle.net/zM5Vj/](http://jsfiddle.net/zM5Vj/) **或** [http://jsfiddle.net/zM5Vj/show/](http://jsfiddle.net/zM5Vj/show/)

希望这会有所帮助，当手风琴折叠时会显示+，而在打开手风琴的情况下。

有一个不错的！

**相应地添加 + 和 - 的Jquery 代码**其余完整代码在小提琴中，如果您愿意，我可以复制粘贴整个代码。请告诉我进展如何！

```
$(function(){
 $('#accordion .fullChild>a.opener').text('+').addClass('box');

  $('#accordion .opener').click(function() {
  if($(this).text() == "-") {
  $(this).text("+");
  }
  else {
  $('#accordion .opener').text("+");
  $(this).text("-");
  }
});
}); 
```

# dns - 仅来自我的机器的网站 DNS 问题

> ID：10662012
> 
> 赞同：0
> 
> 时间：2012-05-19T03:13:14.390
> 
> 标签：dns, hosting, web-hosting

我在英国使用 fasthosts 创建了一个关于 m6.net 托管的新网站。当我尝试从笔记本电脑加载网站时，我得到了一个 fasthosts 登录页面。

如果我从另一台机器访问该网站，它似乎工作正常 - [http://www.validdomainauctions.com](http://www.validdomainauctions.com)。

这表明托管不是问题，但我不确定为什么域会重定向到 domain-holding.co.uk 上的页面，该页面说明以下内容：

> 当您访问validdomainauctions.com 时会显示此“网站持有”页面，因为所有者已注册域名（或设置子域），但尚未创建网站。
> 
> 如果没有此页面，网站访问者会看到“找不到页面”错误。保留页面确认域的 DNS 已正确设置。

我试过用 Chrome、IE 和 Mozilla 加载网站，问题都是一样的，所以不可能是浏览器。我试过清除缓存等，但没有解决任何问题。

我已经调用了**ipconfig /flushdns**也没有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T05:48:03.880

在完全困惑了一周之后，问题似乎已经解决了。快乐的时光。

# algorithm - 查找未排序数组的中位数

> ID：10662013
> 
> 赞同：63
> 
> 时间：2012-05-19T03:13:41.407
> 
> 标签：algorithm, heap, median

要找到未排序数组的中位数，我们可以在 O(nlogn) 时间内为 n 个元素创建一个最小堆，然后我们可以一个一个地提取 n/2 个元素以获得中位数。但是这种方法需要 O(nlogn) 时间。

我们可以通过某种方法在 O(n) 时间内做同样的事情吗？如果可以的话，请告诉或建议一些方法。

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-05-19T03:23:58.880

您可以使用[Median of Medians](http://en.wikipedia.org/wiki/Median_of_medians)算法在线性时间内找到未排序数组的中值。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2015-04-11T12:52:36.567

我已经支持@dasblinkenlight 的答案，因为中位数算法实际上在 O(n) 时间内解决了这个问题。我只想补充一点，这个问题也可以通过使用堆在 O(n) 时间内解决。通过使用自下而上，可以在 O(n) 时间内完成构建堆。看下面的文章有详细的解释[堆排序](http://www.cs.umd.edu/~meesh/351/mount/lectures/lect14-heapsort-analysis-part.pdf)

假设您的数组有 N 个元素，您必须构建两个堆：一个包含前 N/2 个元素的 MaxHeap（如果 N 是奇数，则为 (N/2)+1）和一个包含剩余元素的 MinHeap。如果 N 是奇数，那么您的中位数是 MaxHeap 的最大元素（通过获得最大值 O(1)）。如果 N 是偶数，那么你的中位数是 (MaxHeap.max()+MinHeap.min())/2 这也需要 O(1)。因此，整个操作的实际成本是堆构建操作，即 O(n)。

顺便说一句，当您事先不知道数组元素的数量时，此 MaxHeap/MinHeap 算法也有效（例如，如果您必须为整数流解决相同的问题）。[您可以在以下文章整数流的中值中](http://www.ardendertat.com/2011/11/03/programming-interview-questions-13-median-of-integer-stream/)查看有关如何解决此问题的更多详细信息

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-05-19T03:24:15.073

[快速选择](http://en.wikipedia.org/wiki/Selection_algorithm)在 O(n) 中工作，这也用于快速排序的分区步骤。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2014-03-31T00:58:51.107

`O(n)`快速选择算法可以在线性 ( ) 运行时间内找到数组的第 k 个最小元素。这是python中的一个实现：

```
import random

def partition(L, v):
    smaller = []
    bigger = []
    for val in L:
        if val < v: smaller += [val]
        if val > v: bigger += [val]
    return (smaller, [v], bigger)

def top_k(L, k):
    v = L[random.randrange(len(L))]
    (left, middle, right) = partition(L, v)
    # middle used below (in place of [v]) for clarity
    if len(left) == k:   return left
    if len(left)+1 == k: return left + middle
    if len(left) > k:    return top_k(left, k)
    return left + middle + top_k(right, k - len(left) - len(middle))

def median(L):
    n = len(L)
    l = top_k(L, n / 2 + 1)
    return max(l) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-04-24T15:26:17.660

答案是***“不，无法在线性时间内找到任意未排序数据集的中值”***。作为一般规则（据我所知），最好的方法是中位数的中位数（以获得一个不错的开始），然后是快速选择。参考：[ [https://en.wikipedia.org/wiki/Median_of_medians][1]](https://en.wikipedia.org/wiki/Median_of_medians][1])

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-19T08:12:28.503

可以使用 O(n) 中的快速选择算法来完成，请参考 K 阶统计（随机算法）。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-12-31T23:09:13.103

正如维基百科所说，Median-of-Medians 理论上是 o(N)，但在实践中并未使用它，因为寻找“好”枢轴的开销使其太慢。
[http://en.wikipedia.org/wiki/Selection_algorithm](http://en.wikipedia.org/wiki/Selection_algorithm)

这是用于查找数组中第 k 个元素的 Quickselect 算法的 Java 源代码：

```
/**
 * Returns position of k'th largest element of sub-list.
 * 
 * @param list list to search, whose sub-list may be shuffled before
 *            returning
 * @param lo first element of sub-list in list
 * @param hi just after last element of sub-list in list
 * @param k
 * @return position of k'th largest element of (possibly shuffled) sub-list.
 */
static int select(double[] list, int lo, int hi, int k) {
    int n = hi - lo;
    if (n < 2)
        return lo;

    double pivot = list[lo + (k * 7919) % n]; // Pick a random pivot

    // Triage list to [<pivot][=pivot][>pivot]
    int nLess = 0, nSame = 0, nMore = 0;
    int lo3 = lo;
    int hi3 = hi;
    while (lo3 < hi3) {
        double e = list[lo3];
        int cmp = compare(e, pivot);
        if (cmp < 0) {
            nLess++;
            lo3++;
        } else if (cmp > 0) {
            swap(list, lo3, --hi3);
            if (nSame > 0)
                swap(list, hi3, hi3 + nSame);
            nMore++;
        } else {
            nSame++;
            swap(list, lo3, --hi3);
        }
    }
    assert (nSame > 0);
    assert (nLess + nSame + nMore == n);
    assert (list[lo + nLess] == pivot);
    assert (list[hi - nMore - 1] == pivot);
    if (k >= n - nMore)
        return select(list, hi - nMore, hi, k - nLess - nSame);
    else if (k < nLess)
        return select(list, lo, lo + nLess, k);
    return lo + k;
} 
```

我没有包含比较和交换方法的源代码，因此很容易更改代码以使用 Object[] 而不是 double[]。

在实践中，您可以期望上述代码为 o(N)。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-10-17T07:30:50.180

让问题成为：在未排序的数组中找到第 K 个最大的元素。

将数组分成 n/5 组，每组由 5 个元素组成。

现在 a1,a2,a3....a(n/5) 代表每组的中位数。

x = 元素 a1,a2,.....a(n/5) 的中位数。

现在，如果 k<n/2，那么我们可以删除中位数大于 x 的组中的最大元素、第二大元素和第三大元素。我们现在可以使用 7n/10 个元素再次调用该函数并找到第 k 个最大值。

否则，如果 k>n/2，那么我们可以删除组中中位数小于 x 的最小、第二小和第三小元素。我们现在可以用 7n/10 个元素再次调用函数并找到第 (k-3n/10) 个最大值。

时间复杂度分析：在大小为 n 的数组中找到第 k 个最大的 T(n) 时间复杂度。

T(n) = T(n/5) + T(7n/10) + O(n)

如果你解决了这个问题，你会发现 T(n) 实际上是 O(n)

n/5 + 7n/10 = 9n/10 < n

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-06-16T19:43:41.693

请注意，构建堆实际上需要 O(n) 而不是 O(nlogn)，您可以使用摊销分析来检查这一点，或者只需在 Youtube 中进行检查。Extract-Min 需要 O(logn)，因此，提取 n/2 将花费 (nlogn/2) = O(nlogn) 摊销时间。

关于您的问题，您可以简单地查看[Median of Medians](https://en.wikipedia.org/wiki/Median_of_medians)。

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2021-04-19T08:30:55.973

给定两个大小分别为**m**和**n的排序数组****nums1**和**nums2**，返回两个排序数组的中位数。

 ****示例 1：

```
Input: nums1 = [1,3], nums2 = [2]
Output: 2.00000
Explanation: merged array = [1,2,3] and median is 2. 
```

代码：

```
class Solution:
    def findMedianSortedArrays(self, nums1: List[int], nums2: List[int]) -> float:
        merged_array = sorted(nums1 + nums2)
        if len(merged_array) % 2 == 0:
            index = int(len(merged_array)/2)
            output =  (merged_array[index - 1] +  merged_array[index])/2
        else: 
            index = int(len(merged_array)/2)
            output = merged_array[index]
        return output 
```****

# android - 用户按下后退按钮后加载时应用程序崩溃

> ID：10662018
> 
> 赞同：0
> 
> 时间：2012-05-19T03:14:35.850
> 
> 标签：android, storage

我正在编写我的第一个应用程序，其想法是用户在 getText 中输入一个数字，单击一个按钮，将用户输入添加到以前的结果中，并将其显示到屏幕上。我尝试将数据存储在 SharedPreferences 中，当用户按下主页按钮然后返回应用程序时它可以工作，但是如果他们按下后退按钮然后返回应用程序，应用程序就会崩溃。有什么建议吗？

```
public class Calc extends Activity {

int points = 0;

SharedPreferences data;
public static String filename = "Points";

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    data = getSharedPreferences(filename, 0);

    points = data.getInt("key", 0);

    final TextView myTextView = (TextView) findViewById(R.id.mytextview);

    myTextView.setText("" + points);

    Button Button = (Button) findViewById(R.id.add);
    final EditText Edit = (EditText) findViewById(R.id.input);

    Button.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            int temp = 0;

            try {
                temp = Integer.parseInt(Edit.getText().toString());
            } catch (NumberFormatException nfe) {
                System.out.println("Could not parse " + nfe);
            }

            points = points + temp;

            if (points > 9999) {
                myTextView.setText("10000+");
            } else {
                myTextView.setText("" + points);
            }

            Edit.setText("");

            SharedPreferences.Editor editor = data.edit();
            editor.putInt("key", points);
            editor.commit();
        }
    });

}
} 
```

崩溃日志：

```
05-19 03:24:02.352: D/dalvikvm(1120): GC_EXTERNAL_ALLOC freed 759 objects / 55808 bytes in 63ms
05-19 03:24:05.812: D/dalvikvm(1120): GC_EXTERNAL_ALLOC freed 193 objects / 9224 bytes in 50ms
05-19 03:24:08.842: W/KeyCharacterMap(1120): No keyboard for id 0
05-19 03:24:08.842: W/KeyCharacterMap(1120): Using default keymap: /system/usr/keychars/qwerty.kcm.bin
05-19 03:24:11.052: W/IInputConnectionWrapper(1120): showStatusIcon on inactive InputConnection
05-19 03:24:14.952: E/dalvikvm-heap(1120): 16704000-byte external allocation too large for this process.
05-19 03:24:14.999: E/GraphicsJNI(1120): VM won't let us allocate 16704000 bytes
05-19 03:24:15.022: D/AndroidRuntime(1120): Shutting down VM
05-19 03:24:15.061: W/dalvikvm(1120): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
05-19 03:24:15.223: E/AndroidRuntime(1120): FATAL EXCEPTION: main
05-19 03:24:15.223: E/AndroidRuntime(1120): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example/com.example.Calc}: android.view.InflateException: Binary XML file line #2: Error inflating class <unknown>
05-19 03:24:15.223: E/AndroidRuntime(1120):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
05-19 03:24:15.223: E/AndroidRuntime(1120):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
05-19 03:24:15.223: E/AndroidRuntime(1120):     at android.app.ActivityThread.access$2300(ActivityThread.java:125)
05-19 03:24:15.223: E/AndroidRuntime(1120):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
05-19 03:24:15.223: E/AndroidRuntime(1120):     at android.os.Handler.dispatchMessage(Handler.java:99)
05-19 03:24:15.223: E/AndroidRuntime(1120):     at android.os.Looper.loop(Looper.java:123)
05-19 03:24:15.223: E/AndroidRuntime(1120):     at android.app.ActivityThread.main(ActivityThread.java:4627)
05-19 03:24:15.223: E/AndroidRuntime(1120):     at java.lang.reflect.Method.invokeNative(Native Method)
05-19 03:24:15.223: E/AndroidRuntime(1120):     at java.lang.reflect.Method.invoke(Method.java:521)
05-19 03:24:15.223: E/AndroidRuntime(1120):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
05-19 03:24:15.223: E/AndroidRuntime(1120):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
05-19 03:24:15.223: E/AndroidRuntime(1120):     at dalvik.system.NativeStart.main(Native Method)
05-19 03:24:15.223: E/AndroidRuntime(1120): Caused by: android.view.InflateException: Binary XML file line #2: Error inflating class <unknown>
05-19 03:24:15.223: E/AndroidRuntime(1120):     at android.view.LayoutInflater.createView(LayoutInflater.java:513)
05-19 03:24:15.223: E/AndroidRuntime(1120):     at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:56)
05-19 03:24:15.223: E/AndroidRuntime(1120):     at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:563)
05-19 03:24:15.223: E/AndroidRuntime(1120):     at android.view.LayoutInflater.inflate(LayoutInflater.java:385)
05-19 03:24:15.223: E/AndroidRuntime(1120):     at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
05-19 03:24:15.223: E/AndroidRuntime(1120):     at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
05-19 03:24:15.223: E/AndroidRuntime(1120):     at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:198)
05-19 03:24:15.223: E/AndroidRuntime(1120):     at android.app.Activity.setContentView(Activity.java:1647)
05-19 03:24:15.223: E/AndroidRuntime(1120):     at com.example.Calc.onCreate(Calc.java:32)
05-19 03:24:15.223: E/AndroidRuntime(1120):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
05-19 03:24:15.223: E/AndroidRuntime(1120):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
05-19 03:24:15.223: E/AndroidRuntime(1120):     ... 11 more
05-19 03:24:15.223: E/AndroidRuntime(1120): Caused by: java.lang.reflect.InvocationTargetException
05-19 03:24:15.223: E/AndroidRuntime(1120):     at android.widget.FrameLayout.<init>(FrameLayout.java:79)
05-19 03:24:15.223: E/AndroidRuntime(1120):     at java.lang.reflect.Constructor.constructNative(Native Method)
05-19 03:24:15.223: E/AndroidRuntime(1120):     at java.lang.reflect.Constructor.newInstance(Constructor.java:446)
05-19 03:24:15.223: E/AndroidRuntime(1120):     at android.view.LayoutInflater.createView(LayoutInflater.java:500)
05-19 03:24:15.223: E/AndroidRuntime(1120):     ... 21 more
05-19 03:24:15.223: E/AndroidRuntime(1120): Caused by: java.lang.OutOfMemoryError: bitmap size exceeds VM budget
05-19 03:24:15.223: E/AndroidRuntime(1120):     at android.graphics.Bitmap.nativeCreate(Native Method)
05-19 03:24:15.223: E/AndroidRuntime(1120):     at android.graphics.Bitmap.createBitmap(Bitmap.java:468)
05-19 03:24:15.223: E/AndroidRuntime(1120):     at android.graphics.Bitmap.createBitmap(Bitmap.java:435)
05-19 03:24:15.223: E/AndroidRuntime(1120):     at android.graphics.Bitmap.createScaledBitmap(Bitmap.java:340)
05-19 03:24:15.223: E/AndroidRuntime(1120):     at android.graphics.BitmapFactory.finishDecode(BitmapFactory.java:488)
05-19 03:24:15.223: E/AndroidRuntime(1120):     at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:462)
05-19 03:24:15.223: E/AndroidRuntime(1120):     at android.graphics.BitmapFactory.decodeResourceStream(BitmapFactory.java:323)
05-19 03:24:15.223: E/AndroidRuntime(1120):     at android.graphics.drawable.Drawable.createFromResourceStream(Drawable.java:697)
05-19 03:24:15.223: E/AndroidRuntime(1120):     at android.content.res.Resources.loadDrawable(Resources.java:1709)
05-19 03:24:15.223: E/AndroidRuntime(1120):     at android.content.res.TypedArray.getDrawable(TypedArray.java:601)
05-19 03:24:15.223: E/AndroidRuntime(1120):     at android.view.View.<init>(View.java:1885)
05-19 03:24:15.223: E/AndroidRuntime(1120):     at android.view.ViewGroup.<init>(ViewGroup.java:291)
05-19 03:24:15.223: E/AndroidRuntime(1120):     at android.widget.FrameLayout.<init>(FrameLayout.java:83)
05-19 03:24:15.223: E/AndroidRuntime(1120):     ... 25 more 
```

主要的.xml

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@drawable/background" >

    <ImageView
        android:id="@+id/title"
        android:layout_width="wrap_content"
        android:layout_height="75dp"
        android:layout_gravity="center_horizontal|top"
        android:paddingLeft="25dip"
        android:paddingRight="25dip"
        android:src="@drawable/title" />

    <EditText
        android:id="@+id/input"
        android:layout_width="150dp"
        android:layout_height="wrap_content"
        android:layout_gravity="center_horizontal|bottom"
        android:layout_marginBottom="80dp"
        android:ems="10"
        android:inputType="number" />

    <Button
        android:id="@+id/add"
        android:layout_width="100dp"
        android:layout_height="wrap_content"
        android:layout_gravity="center_horizontal|bottom"
        android:layout_marginBottom="20dp"
        android:text="Add Points" />

    <TextView
        android:id="@+id/youHave"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center_horizontal|top"
        android:layout_marginTop="100dp"
        android:background="#AA968454"
        android:padding="10dp"
        android:text="You have"
        android:textColor="#ffffffff" />

    <TextView
        android:id="@+id/mytextview"
        android:layout_width="200dp"
        android:layout_height="100dp"
        android:layout_gravity="center_horizontal|top"
        android:layout_marginTop="150dp"
        android:background="#AA968454"
        android:gravity="center"
        android:textColor="#ffffffff"
        android:textSize="60dp" />

</FrameLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T04:55:57.803

我猜你有关于你的活动的图像。那是什么

> “05-19 03:24:15.223: E/AndroidRuntime(1120): 由: java.lang.OutOfMemoryError: bitmap >size 超出 VM 预算引起

[尝试使用较小的图像或在将图像加载到位图对象时](https://stackoverflow.com/questions/477572/android-strange-out-of-memory-issue-while-loading-an-image-to-a-bitmap-object/823966#823966)参考 奇怪的内存不足问题以获得替代解决方案。

我首先建议您删除您的 imageview 以检查这是否是问题所在。如果问题得到纠正，请查看上面链接中的解决方案。

# python - Python素数列表错误？

> ID：10662026
> 
> 赞同：3
> 
> 时间：2012-05-19T03:17:35.057
> 
> 标签：python, list, primes

我尝试了几种不同的方法来获得 10001 素数。

```
def isPrime(value):
  if ((2**value)-2)%value==0:
    return True

def nthPrime(n):
  count = 0
  value = 1
  while count < n:
    value += 1
    if isPrime(value):
      count += 1
  return value 
```

当 10001 是参数时，它返回 103903。当我期待 104743 时。

我试过了：

```
primes = []
for i in range(2,105000):
  if ((2**i) - 2) % i == 0:
    primes.append(i)

print primes[10001] ---> 103903 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T03:22:14.330

我相信你的初筛是错的。尝试使用一个 isPrime 函数，该函数采用该数字对每个较小的素数进行模数。如果其中任何一个为 0，则该数字是合数（不是素数）。据我所知，没有单一的比较可以告诉你一个数字是否是素数，就像你的 isPrime 函数假设的那样。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-19T03:26:04.093

这是欧拉计划吗？这对我来说似乎很熟悉。

你的 isPrime 函数是错误的，就像 TEOUltimus 说的那样，没有一种方法可以判断一个数字是否是素数。

[Python中的简单素数生成器](https://stackoverflow.com/questions/567222/simple-prime-generator-in-python)

我猜这几乎回答了你的问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-10-02T11:13:19.210

**您可以创建一个函数来生成素数，这可能会很慢，但它会起作用。**

这是我这样做的功能：

```
def PrimesSieve(limit):
    np=set()
    p=[2]
    for i in xrange(1,limit+1,2):
            if i == 1: continue
            if {i} & np: continue
            beg=2 if i % 2 == 0 else 0
            for j in xrange(beg,int(limit)+1,i):
                    np.add(j)
            p.append(i)
    return p 
```

# git - git登台服务器

> ID：10662028
> 
> 赞同：1
> 
> 时间：2012-05-19T03:18:33.433
> 
> 标签：git, version-control, workflow, staging

我们正在努力建立一个 git 环境，对于我们的工作流程，我们希望执行以下操作：

![在此处输入图像描述](../Images/aee3792a809355f0c516769f03644e64.png)

问题是我希望能够轻松地挑选我想要从暂存阶段推送到生产的更改。例如，如果 dev1 正在处理功能 1，而 dev2 正在处理功能 2，我可能只想将功能 1 的更改推送到生产环境。这可能吗？我什至可能遇到 dev1 正在处理功能 3 和功能 4 的情况，但我只想将功能 4 推向生产。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T03:20:39.993

签出这个

[http://nvie.com/posts/a-successful-git-branching-model/](http://nvie.com/posts/a-successful-git-branching-model/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T03:23:43.050

每个开发人员维护自己的分支可能是最容易的，他们负责保持更新到您的主分支的当前版本。甚至每个“特征是一个独特的合并候选者”一个分支。然后，作为生产分支的所有者，您可以选择合并哪些分支以及何时合并。让每个人都推入一个共享的暂存树，在生产过程中**不要**使用简单的单向阶段，这听起来像是一个错误的秘诀。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-19T03:24:06.327

这是很常见的。我经常这样做。

使用的方法是让开发人员创建所谓的*功能分支*（或只是*分支*。

这是使用以下命令完成的：

```
git checkout -b my_new_feature 
```

*然后他们可以处理该功能，其他人都可以获得该代码，但在该分支合并*到您的主分支之前，它不会与任何其他分支混合，如下所示：

```
git checkout master
git merge my_new_feature 
```

不同的开发人员可以在不同的功能上工作，无论需要多长时间，然后您可以在有意义的时候合并到 master（并推送到 staging）。

# c# - 实体框架数据加载策略对比

> ID：10662029
> 
> 赞同：3
> 
> 时间：2012-05-19T03:18:48.333
> 
> 标签：c#, entity-framework, lazy-loading, entity-framework-4.3

我正在阅读这本书`Programming Entity Framework: DbContext`，我刚刚阅读了有关三种数据加载类型的章节：

*   延迟加载（默认）
*   渴望加载
*   显式加载

现在我问自己在哪种情况下哪种数据加载更好。一个具体的比较会很好！我还没有找到。

例如，我在客户端的模块上使用默认的延迟加载。该模块处理销售代表并暗示这些相关表格：

*   代表
*   代表区
*   代表_先决条件
*   用户
*   Reps_Languages
*   等等

在模块上，我使用所有这些表来调度约会（一次大约 150 个约会到 50 个代表），但速度很慢。使用不同的加载策略真的会提高性能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T08:17:37.793

延迟加载似乎最适合没有单独数据层的小型应用程序。一旦应用程序增长并开始将其分成单独的层，延迟加载就变得不那么有用了。当数据到达 UI 层时，DBcontext 早已被破坏，当您在数据层中时，指定要加载的属性并不是什么大问题。

延迟加载被关闭以进行验证，因此如果一个属性被标记为必需并且您只加载了父级，那么总是会抛出一个非常令人沮丧的错误。

延迟加载也使调试变得相当棘手，因为在使用查询之前不会执行查询，因此您无法轻松检查查询的结果。我通常在我的 EF 查询中添加一个 ToList() 或类似的，以便我可以轻松地检查结果。

# ide - IDE中允许我跳过自动生成的键盘快捷键和/或方法的名称是什么？

> ID：10662034
> 
> 赞同：1
> 
> 时间：2012-05-19T03:20:08.143
> 
> 标签：ide, keyboard-shortcuts, rubymine, end-tag

这个问题与[之前的问题](https://stackoverflow.com/questions/10661886/how-do-i-skip-past-an-automatically-generated-end-tag-in-my-ide-without-lifti)有关，该问题是出于所有实际目的而回答的，一位同事告诉我，我只需要按“结束”键即可将光标跳到行尾。但是第二位响应者告诉我其他 IDE 对此的能力（他的话）：“在某些 IDE 中，按 tab 键会将光标移动到当前自动替换元素中的下一个占位符，如果没有更多的占位符，会带来您超过了自动替换文本的结尾。”

这种能力叫什么？

如果您或我在 Aptana 或 RubyMine（我最喜欢的两个 IDE）中编写一些代码，我将很快展示一个示例......

```
 <table summary="Subject detail view">
    <tr>
      <th>Name*</th>**
    </tr>
  </table> 
```

我们最终会遇到单个星号所在的位置（*）。我们将到达这一点并被迫使用我们的鼠标点击自动生成的`</endtag>`，或我们的键盘箭头，或者最近的“结束”键，它会将我们的光标跳过到行尾。

但是我不能像我朋友告诉我的那样用标签来做吗？为了能够做到这一点，我需要知道这个键盘快捷键叫什么。我需要一个可搜索的关键字。任何有关键盘/IDE 快捷方式等的额外反馈也将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T14:31:58.233

RubyMine（以及它所基于的 IntelliJ IDEA 平台）还没有这个特性。YouTrack 问题跟踪器中有一个开放的功能请求：

*   **IDEA-74666** [添加 Eclipse 样式 Paren/Bracket/Quote Completiton](http://youtrack.jetbrains.com/issue/IDEA-74666)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T01:14:35.527

我已经找到了这个问题的所有答案之王，这是我自己的。

*创建自己的宏。这是多么容易做到这一点是愚蠢的（至少使用 Komodo Edit）。*

例如，要在 Komodo Edit 中执行此操作，首先进行设置，使光标位于您需要自定义命令的位置，无论它可能是什么。

因此，假设您在带有光标的 xml 标记的末尾（“|”）符号所在的位置

```
<xmltag>blahblah|</xmltag> 
```

现在 </endtag> 已自动生成，只是为了确保您知道这一点。

现在，转到工具，宏，开始录制。点击它。放松，您可以随意多次执行此操作……顺便说一下，它只记录击键，所以只能使用键盘执行此操作。*要在不使用箭头键的情况下跳到标签末尾，请使用“结束”键*。我并不是要侮辱你的智慧，但如果你不知道这一点，你需要使用 End 键而不是箭头，因为未来的标签可以是任意长度。

好的，这样做：

```
<xmltag>blahblah</xmltag>
| 
```

所以你在那里。好的，现在转到工具、宏，然后停止录制。

接下来，单击工具、宏，然后保存宏。

然后，转到您的宏库（相同的工具子菜单），您应该在工具箱中看到您命名的包含宏的文件。

右键单击它，属性，键绑定选项卡，然后在“新”表单中设置您的自定义命令。申请。好的。你完成了。

测试一下，拍拍自己的后背，你刚刚学到了一些非常、非常、非常有用的东西。

顺便说一句，这是我创建的另一个。

```
<!-- | --> 
```

那也是一个宏命令。显然，您可以使用简单的宏命令创建整个表单。

# dotcloud - dotcloud supervisord twistd 提前退出

> ID：10662044
> 
> 赞同：3
> 
> 时间：2012-05-19T03:22:32.760
> 
> 标签：dotcloud, supervisord

我正在尝试在 dotcloud 上设置一个 twistd 守护进程：

我的 supervisord.conf 文件：

```
[program:apnsd]
command=/home/dotcloud/env/bin/twistd --logfile /var/log/supervisor/apnsd.log apnsd -c gp_config.py
directory=/home/dotcloud/current/apnsd 
```

但是，它看起来像命令'exits early'，然后提示Supervisor尝试并重新启动，然后由于twistd dameon在后台运行而失败。

从supervisord日志：

```
more supervisord.log
2012-05-19 03:07:52,723 CRIT Set uid to user 1000
2012-05-19 03:07:52,723 WARN Included extra file "/etc/supervisor/conf.d/uwsgi.c
onf" during parsing
2012-05-19 03:07:52,723 WARN Included extra file "/home/dotcloud/current/supervi
sord.conf" during parsing
2012-05-19 03:07:52,922 INFO RPC interface 'supervisor' initialized
2012-05-19 03:07:52,922 WARN cElementTree not installed, using slower XML parser
 for XML-RPC
2012-05-19 03:07:52,923 CRIT Server 'unix_http_server' running without any HTTP
authentication checking
2012-05-19 03:07:52,932 INFO daemonizing the supervisord process
2012-05-19 03:07:52,934 INFO supervisord started with pid 144
2012-05-19 03:07:53,941 INFO spawned: 'apnsd' with pid 147
2012-05-19 03:07:53,949 INFO spawned: 'uwsgi' with pid 149
2012-05-19 03:07:54,706 INFO exited: apnsd (exit status 0; not expected)
2012-05-19 03:07:55,712 INFO spawned: 'apnsd' with pid 175
2012-05-19 03:07:55,712 INFO success: uwsgi entered RUNNING state, process has s
tayed up for > than 1 seconds (startsecs)
2012-05-19 03:07:56,261 INFO exited: apnsd (exit status 1; not expected)
2012-05-19 03:07:58,267 INFO spawned: 'apnsd' with pid 176
2012-05-19 03:07:58,783 INFO exited: apnsd (exit status 1; not expected)
2012-05-19 03:08:01,790 INFO spawned: 'apnsd' with pid 177
2012-05-19 03:08:02,840 INFO success: apnsd entered RUNNING state, process has s
tayed up for > than 1 seconds (startsecs) 
```

从 apnsd 日志：

```
dotcloud@hack-default-www-0:/var/log/supervisor$ more apnsd-stderr---supervisor
-m7GnKV.log
INFO:root:Reactor Type: <twisted.internet.pollreactor.PollReactor object at 0x10
a09d0>
DEBUG:root:Creating listener: apnsd.listeners.line.LineProtocolFactory
INFO:root:Listening on Line Protocol on :1055
DEBUG:root:Listener Created: <apnsd.listeners.line.LineProtocolFactory instance
at 0x12fc8c0>
DEBUG:root:Creating App Factory: apnsd.daemon.APNSFactory
INFO:root:Connecting to APNS Server, App: apns_dev:AAA.com.company.www
INFO:root:apns_dev:AAA.com.company.www -> Started connecting to APNS con
nector...
INFO:root:Registering Application: apns_dev:GoParcel...
DEBUG:root:Creating App Factory: apnsd.daemon.APNSFactory
INFO:root:Connecting to APNS Server, App: apns_dev:T365ED94A9.com.appitems.parce
ls
INFO:root:apns_dev:T365ED94A9.com.appitems.parcels -> Started connecting to APNS
 connector...
INFO:root:Registering Application: apns_dev:GoParcelVictor...
Another twistd server is running, PID 172

This could either be a previously started instance of your application or a
different application entirely. To start a new one, either run it in some other
directory, or use the --pidfile and --logfile parameters to avoid clashes.

Another twistd server is running, PID 172
--More--(42%) 
```

工人状态失败：

```
./dotcloud run hack.worker supervisorctl status
USER PATH IS:  C:\Users\Taras/.dotcloud\dotcloud.conf
# supervisorctl status
apnsd                            FATAL      Exited too quickly (process log may
have details) 
```

但是扭曲的过程在那里（ps -ef）：

```
dotcloud   171     1  0 03:13 ?        00:00:00 /home/dotcloud/env/bin/python /home/dotcloud/env/bin/twistd --logfile /var/log/supervisor/apnsd.log apnsd -c gp_config.py 
```

尝试通过包装脚本启动进程时（并使用 exec 以便不创建子进程）时，我遇到了类似的问题。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-19T18:14:45.157

Supervisor 期望受控进程保留在前台，但`twistd`默认情况下分叉到后台。因此，主管认为它已经退出，并尝试重新启动它。

您应该从`twistd`以下`--nodaemon`选项开始：`twistd`将留在前台，并且主管会很高兴！

# ios - 在 iPad 上创建浮动视图

> ID：10662047
> 
> 赞同：0
> 
> 时间：2012-05-19T03:23:09.437
> 
> 标签：ios, uisplitviewcontroller, presentmodalviewcontroller

我的 iPad 应用程序有一个 SplitViewController、一个 MasterViewController 和一个 DetailViewController。从 DetailViewController 中，我需要创建一个临时视图（使用 PaletteViewController：UIViewController 管理，并在 xib 文件中设计），用户可以在屏幕上移动以便能够看到向后的内容。

在 DetailViewController.m 中：

```
@synthesize paletteViewController=_paletteViewController;

(...)

- (IBAction) loadPalette: (id) sender{
    if (_paletteViewController == nil) {
        self.paletteViewController = [[PaletteViewController alloc] init];
    }
    self.paletteViewController.delegate=self;
    [self.paletteViewController setModalPresentationStyle:UIModalPresentationFormSheet];
    [self presentModalViewController:self.paletteViewController animated:YES];

(...) 
```

我收到一条错误消息：由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“应用程序试图以模态方式呈现活动控制器。

任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T04:06:02.777

我认为您在您的中`paletteViewController`，并且您正在以模态方式展示 paletteViewController 而不是 plaetteViewController 。这怎么可能。你可以在细节视图或其他东西（一些父视图）上显示调色板视图控制器。

# android - 如何在android中的谷歌地图上为不同的点使用不同的图像？

> ID：10662049
> 
> 赞同：1
> 
> 时间：2012-05-19T03:23:15.233
> 
> 标签：android, google-maps, google-maps-markers

如何为地图上的第二点使用不同的图像

```
package com.Android.WiC_MobileApp;

import java.util.ArrayList;
import java.util.List;

import com.Android.WiC_MobileApp.MapMarkerActivity;
import com.Android.WiC_MobileApp.R;
import com.Android.WiC_MobileApp.MapMarkerActivity.SitesOverlay;
import com.google.android.maps.GeoPoint;
import com.google.android.maps.ItemizedOverlay;
import com.google.android.maps.MapActivity;
import com.google.android.maps.MapView;
import com.google.android.maps.MyLocationOverlay;
import com.google.android.maps.OverlayItem;

import android.app.Activity;
import android.content.Intent;
import android.graphics.drawable.Drawable;
import android.os.Bundle;
import android.view.KeyEvent;
import android.view.View;
import android.widget.Button;
import android.widget.Toast;

public class MapMarkerActivity extends MapActivity {

     private MapView map=null;
      private MyLocationOverlay me=null;

      @Override
      public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.particular_entry);

        map=(MapView)findViewById(R.id.map);

        map.getController().setCenter(getPoint(FeedListViewActivity.lat,
                FeedListViewActivity.lng));
        map.getController().setZoom(13);
        map.setBuiltInZoomControls(true);

        Drawable marker1=getResources().getDrawable(R.drawable.marker);

        Drawable marker2=getResources().getDrawable(R.drawable.ic_launcher);

        marker1.setBounds(0, 0, marker1.getIntrinsicWidth(),
                                marker1.getIntrinsicHeight());

        map.getOverlays().add(new SitesOverlay(marker1));

        me=new MyLocationOverlay(this, map);
        map.getOverlays().add(me);
      }

      @Override
      public void onResume() {
        super.onResume();

        me.enableCompass();
      }   

      @Override
      public void onPause() {
        super.onPause();

        me.disableCompass();
      }   

      @Override
      protected boolean isRouteDisplayed() {
        return(false);
      }

      @Override
      public boolean onKeyDown(int keyCode, KeyEvent event) {
        if (keyCode == KeyEvent.KEYCODE_S) {
          map.setSatellite(!map.isSatellite());
          return(true);
        }
        else if (keyCode == KeyEvent.KEYCODE_Z) {
          map.displayZoomControls(true);
          return(true);
        }

        return(super.onKeyDown(keyCode, event));
      }

      private GeoPoint getPoint(double lat, double lon) {
        return(new GeoPoint((int)(lat*1000000.0),
                              (int)(lon*1000000.0)));
      }

      public class SitesOverlay extends ItemizedOverlay<OverlayItem> {
        private List<OverlayItem> items=new ArrayList<OverlayItem>();

        public SitesOverlay(Drawable marker) {
          super(marker);

          boundCenterBottom(marker);

          items.add(new OverlayItem(getPoint(MyLocationActivity.myLocationLatitude,
                                              MyLocationActivity.myLocationLongitude),
                                    "YL", "Your Location"));

          items.add(new OverlayItem(getPoint(FeedListViewActivity.lat,
                                              FeedListViewActivity.lng),
                                    "SL",
                                    "Store Location"));

          populate();
        }

        @Override
        protected OverlayItem createItem(int i) {
          return(items.get(i));
        }

        @Override
        protected boolean onTap(int i) {
          Toast.makeText(MapMarkerActivity.this,
                          items.get(i).getSnippet(),
                          Toast.LENGTH_SHORT).show();

          return(true);
        }

        @Override
        public int size() {
          return(items.size());
        }
      }

} 
```

在 SitesOverlay(Drawable marker) 方法中，我添加了 2 个覆盖项，我两者都有所不同....我找到了一些其他类型的代码来实现这个....使用 draw 方法....但是如何在这个中实现案例....请帮助...谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T19:20:16.093

要简单地回答您的问题，您所要做的就是将此行添加到您的 onCreate 方法中：

```
map.getOverlays().add(new SitesOverlay(marker2)); 
```

我认为我不太了解您所面临的问题，因为我无法理解您对问题的描述。我要提到的是，您应该使用要使用的标记构造一个 SitesOverlay，然后构造一个 OverlayItem，然后将该 OverlayItem 添加到 SitesOverlay，然后将 SitesOverlay 添加到 map.getOverlays.add(...); 我已经修改了你的大部分代码以澄清我上面的意思。希望这可以帮助！不要犹豫，问我任何进一步的问题。

```
package com.Android.WiC_MobileApp;

import java.util.ArrayList;
import java.util.List;

import com.Android.WiC_MobileApp.MapMarkerActivity;
import com.Android.WiC_MobileApp.R;
import com.Android.WiC_MobileApp.MapMarkerActivity.SitesOverlay;
import com.google.android.maps.GeoPoint;
import com.google.android.maps.ItemizedOverlay;
import com.google.android.maps.MapActivity;
import com.google.android.maps.MapView;
import com.google.android.maps.MyLocationOverlay;
import com.google.android.maps.OverlayItem;

import android.app.Activity;
import android.content.Intent;
import android.graphics.drawable.Drawable;
import android.os.Bundle;
import android.view.KeyEvent;
import android.view.View;
import android.widget.Button;
import android.widget.Toast;

public class MapMarkerActivity extends MapActivity {

 private MapView map=null;
  private MyLocationOverlay me=null;

  @Override
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.particular_entry);

    map=(MapView)findViewById(R.id.map);

    map.getController().setCenter(getPoint(FeedListViewActivity.lat,
            FeedListViewActivity.lng));
    map.getController().setZoom(13);
    map.setBuiltInZoomControls(true);

    Drawable marker1=getResources().getDrawable(R.drawable.marker);

    Drawable marker2=getResources().getDrawable(R.drawable.ic_launcher);

    SitesOverlay sitesOverlay1 = new SitesOverlay(marker1);
    OverlayItem item1 = new OverlayItem(getPoint(MyLocationActivity.myLocationLatitude,
                                          MyLocationActivity.myLocationLongitude),
                                "YL", "Your Location");
    sitesOverlay1.addOverlay(item1);
    map.getOverlays().add(sitesOverlay1);

    SitesOverlay sitesOverlay2 = new SitesOverlay(marker2);
    OverlayItem item2 = new OverlayItem(getPoint(FeedListViewActivity.lat,
                                          FeedListViewActivity.lng),
                                "SL",
                                "Store Location"));
    sitesOverlay2.addOverlay(item2);
    map.getOverlays.add(sitesOverlay2)

    me=new MyLocationOverlay(this, map);
    map.getOverlays().add(me);
  }

  @Override
  public void onResume() {
    super.onResume();

    me.enableCompass();
  }   

  @Override
  public void onPause() {
    super.onPause();

    me.disableCompass();
  }   

  @Override
  protected boolean isRouteDisplayed() {
    return(false);
  }

  @Override
  public boolean onKeyDown(int keyCode, KeyEvent event) {
    if (keyCode == KeyEvent.KEYCODE_S) {
      map.setSatellite(!map.isSatellite());
      return(true);
    }
    else if (keyCode == KeyEvent.KEYCODE_Z) {
      map.displayZoomControls(true);
      return(true);
    }

    return(super.onKeyDown(keyCode, event));
  }

  private GeoPoint getPoint(double lat, double lon) {
    return(new GeoPoint((int)(lat*1000000.0),
                          (int)(lon*1000000.0)));
  }

  public class SitesOverlay extends ItemizedOverlay<OverlayItem> {
    private List<OverlayItem> items=new ArrayList<OverlayItem>();

    public SitesOverlay(Drawable marker) {
      super(boundCenterBottom(marker));
      populate();
    }

    private void addOverlay(OverlayItem overlayItem)
    {
     items.add(overlayItem);
    }

    @Override
    protected OverlayItem createItem(int i) {
      return(items.get(i));
    }

    @Override
    protected boolean onTap(int i) {
      Toast.makeText(MapMarkerActivity.this,
                      items.get(i).getSnippet(),
                      Toast.LENGTH_SHORT).show();

      return(true);
    }

    @Override
    public int size() {
      return(items.size());
    }
  } 
```

}

# ios - 无法在 iOS 中使计时器无效

> ID：10662053
> 
> 赞同：-1
> 
> 时间：2012-05-19T03:23:55.690
> 
> 标签：ios, timer, invalidation

我是编程新手，在以下方面我已经被困了一段时间：

当我运行附加的代码时，一切似乎都正常，然后进度条再次开始计数。控制台不断打印失效确认字符串，但计时器似乎一直在滚动。我感谢您的帮助。

```
#import "ViewController.h"

@interface ViewController ()

@end

@implementation ViewController
@synthesize doneYet;
@synthesize cooking;
@synthesize hidebutton;

- (void)viewDidLoad;
{
    [super viewDidLoad];
    [doneYet setProgress:doneYet.progress=0.0];
    // Do any additional setup after loading the view, typically from a nib.
}

- (void)viewDidUnload
{
    [self setDoneYet:nil];
    [self setHidebutton:nil];
    [self setCooking:nil];
    [super viewDidUnload];
    // Release any retained subviews of the main view.
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
}

-(void)startTimer
{CurrentTimer=[NSTimer scheduledTimerWithTimeInterval:1 target:self selector:@selector(timerFired) userInfo:Nil repeats:YES];}

-(void)timerFired

{ if (doneYet.progress<1) {

    [doneYet setProgress:doneYet.progress+0.1];
}

else if (doneYet.progress=1) 

{
    (void) [CurrentTimer invalidate];
    NSLog(@"invalidated CurrentTimer");
    hidebutton.hidden = FALSE;
    cooking.hidden = TRUE;
    [doneYet setProgress:doneYet.progress=0.0];
}
}

- (IBAction)Eggtimer:(id)sender 
{   
    [self startTimer];
    hidebutton.hidden = TRUE;
    cooking.hidden = FALSE;
    ;}    

@end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T03:32:59.223

这似乎是个问题

```
else if (doneYet.progress=1) 
```

有两个原因：

*   相等比较运算符 is`==`和 not `=`（这是分配运算符）
*   您正在比较一个`float`数字以获得一个精确值，这永远不会好，因为浮点数不精确，您应该检查`progress >= 1.0`，否则您可能会超过 1.0（例如 1.0000001）并跳过停止条件

另外在停止条件下你做

```
[doneYet setProgress:doneYet.progress=0.0]; 
```

但以前应该是

```
[doneYet setProgress:0.0]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T19:45:50.163

您可以做的一件事是将您的 startTimer 更改为

```
-(void)startTimer
{
    [CurrentTimer invalidate];
    CurrentTimer=[NSTimer scheduledTimerWithTimeInterval:1 target:self selector:@selector(timerFired) userInfo:Nil repeats:YES];
} 
```

这将使旧计时器无效，并且只有一个计时器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-19T03:51:58.607

我认为你应该这样做，`retain`对象`NSTimer`。

`CurrentTimer=[[NSTimer scheduledTimerWithTimeInterval:1 target:self selector:@selector(timerFired) userInfo:Nil repeats:YES] retain];`

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-19T18:34:08.257

**我的错误在于将命令 startTimer 的按钮指定为 FirstResponder。**

很抱歉将您的时间和建议用于不是代码中错误的结果。

**再次感谢所有提供建议的人。这对初学者来说意义重大！**

# git - git-receive-pack 是如何工作的？

> ID：10662056
> 
> 赞同：14
> 
> 时间：2012-05-19T03:24:12.707
> 
> 标签：git

我想知道[git-receive-pack](https://git-scm.com/docs/git-receive-pack)是如何工作的，因为我完全不知道它会发生什么。谁能解开这个谜团？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-19T03:36:09.033

[根据手册页](http://schacon.github.com/git/git-receive-pack.html)：

```
http://schacon.github.com/git/git-receive-pack.html 
```

> 此命令通常不由最终用户直接调用。该协议的 UI 在 git send-pack 端，程序对用于将更新推送到远程存储库。对于拉取操作，请参阅 git-fetch-pack(1)。
> 
> 该命令允许在远程端创建和快速转发 sha1 refs（heads/tags）（严格来说，它是本地端 git-receive-pack 运行，但对于坐在 send-pack 端的用户，它正在更新遥控器。困惑吗？）

即使是编写手册页的人也认为它令人困惑，所以不要责怪自己你不理解它！

基本上，这是接收远程服务器上提交的代码的一部分，这些提交在`send-pack`您执行`git push`.

了解它背后的细节并不重要——正如文档所说，这不是你应该真正输入的命令。

如果您真的对它的内部工作方式非常感兴趣，那么可以从几个好的起点开始：

[Git（软件）上的](http://git-scm.com/book)[维基百科页面](http://en.wikipedia.org/wiki/Git_%28software%29)， [Git 网站本身](http://git-scm.com/)，或 [*免费*](http://git-scm.com/book)[书籍 Pro Git](http://git-scm.com/book)[](http://git-scm.com/book)

 *或者，您可以随时在 github 上的源代码中[查找该命令的“c”代码。](https://github.com/git/git/blob/master/builtin/receive-pack.c)

[http://git-scm.com/](http://git-scm.com/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-07-30T02:48:15.087

在 git 的存储库中有相当详细的接收包协议文档。你可以在这里看到它[https://github.com/git/git/blob/master/Documentation/technical/pack-protocol.txt](https://github.com/git/git/blob/master/Documentation/technical/pack-protocol.txt)。*

# javascript - 下拉菜单返回空错误

> ID：10662061
> 
> 赞同：1
> 
> 时间：2012-05-19T03:24:42.650
> 
> 标签：javascript, null, drop-down-menu

当我运行 Firefox 错误控制台时，我在下拉菜单中收到此错误：ddmenuitem 为空。除此之外，该页面似乎运行良好。

我收到的错误在它说的那一行： ddmenuitem.style.visibility = 'visible';

```
 var timeout  = 500;
    var closetimer  = 0;
    var ddmenuitem  = 0;

    // open hidden layer
    function mopen(id)
    {   
        // cancel close timer
        mcancelclosetime();

        // close old layer
        if(ddmenuitem) ddmenuitem.style.visibility = 'hidden';

        // get new layer and show it
        ddmenuitem = document.getElementById(id);
        ddmenuitem.style.visibility = 'visible';

    }
    // close showed layer
    function mclose()
    {
        if(ddmenuitem) ddmenuitem.style.visibility = 'hidden';
    }

    // go close timer
    function mclosetime()
    {
        closetimer = window.setTimeout(mclose, timeout);
    }

    // cancel close timer
    function mcancelclosetime()
    {
        if(closetimer)
        {
            window.clearTimeout(closetimer);
            closetimer = null;
        }
    }

    // close layer when click-out
    document.onclick = mclose; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T04:00:39.030

没有元素`id=m2`：`<a href="photo_gallery_pg1.html" onmouseout="mclosetime()" onmouseover="mopen('m2')">`

# java - 使用 JComboBox 从数组中调用信息？

> ID：10662064
> 
> 赞同：1
> 
> 时间：2012-05-19T03:25:29.493
> 
> 标签：java, arrays, swing, jcombobox

如何从 JComboBox 中获得与多个数组选择相关的选择？

```
import javax.swing.*;
import java.awt.event.*;
import java.awt.*;
import java.io.*;
import java.util.*;

class ContactsReader extends JFrame
{
public JPanel mainPanel;
public JPanel buttonPanel;
public JPanel displayPanel;

public JLabel titleLabel;
public JLabel nameLabel;
public JLabel ageLabel;
public JLabel emailLabel;
public JLabel cellPhoneLabel;
public JLabel comboBoxLabel;

public JButton exitButton;

public JTextField nameTextField;
public JTextField ageTextField;
public JTextField emailTextField;
public JTextField cellPhoneTextField;

public JComboBox<String> contactBox;

public String[] getContactNames;
public String[] displayContactNames;

public File contactFile;
public Scanner inputFile;

public String selection;

public ContactsReader()
{
    super("Contacts Reader");
    setSize(400,400);
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    setLayout(new BorderLayout());

    buildPanel();

    add(mainPanel, BorderLayout.CENTER);

    pack();
    setVisible(true);

} 

public void buildPanel()
{
    titleLabel = new JLabel("Please enter contact information");
    mainPanel = new JPanel(new BorderLayout());

    buttonPanel();
    displayPanel();

    mainPanel.add(titleLabel, BorderLayout.NORTH);
    mainPanel.add(buttonPanel, BorderLayout.SOUTH);
    mainPanel.add(displayPanel, BorderLayout.CENTER);
}

public void buttonPanel()
{
    //create submit and exit buttons
    exitButton = new JButton("Exit");
    exitButton.addActionListener(new exitButtonListener());

    buttonPanel = new JPanel(); //create button panel

    buttonPanel.add(exitButton);    //add exit button to panel
}

public void displayPanel()
{
    String nameHolder;

    int count = 0;

    nameLabel = new JLabel("Name");
    ageLabel = new JLabel("Age)");
    emailLabel = new JLabel("Email");
    cellPhoneLabel = new JLabel("Cell Phone #");
    comboBoxLabel = new JLabel("Select a Conact");

    nameTextField = new JTextField(10);
    nameTextField.setEditable(false);
    ageTextField = new JTextField(10);
    ageTextField.setEditable(false);
    emailTextField = new JTextField(10);
    emailTextField.setEditable(false);
    cellPhoneTextField = new JTextField(10);
    cellPhoneTextField.setEditable(false);

    try{
        contactFile = new File("ContactData.txt");
        inputFile = new Scanner(contactFile);   
    }
    catch (Exception event){}

    while (inputFile.hasNext())
    {
        nameHolder = inputFile.nextLine();
        count++;
    }
    inputFile.close();

    String getContactNames[] = new String[count];
    String displayContactNames[] = new String[count/4];

    try{
        contactFile = new File("ContactData.txt");
        inputFile = new Scanner(contactFile);   
    }
    catch (Exception event){}

    for (int i = 0; i < count; i++)
    {
        if (inputFile.hasNext())
        {
            nameHolder = inputFile.nextLine();
            getContactNames[i] = nameHolder;

            if (i % 4 == 0)
            {
                displayContactNames[i/4] = getContactNames[i];
            }

        }
    }

    inputFile.close();

    contactBox = new JComboBox<String>(displayContactNames);
    contactBox.setEditable(false);
    contactBox.addActionListener(new contactBoxListener());

    displayPanel = new JPanel(new GridLayout(10,1));

    displayPanel.add(comboBoxLabel);
    displayPanel.add(contactBox);
    displayPanel.add(nameLabel);
    displayPanel.add(nameTextField);
    displayPanel.add(ageLabel);
    displayPanel.add(ageTextField);
    displayPanel.add(emailLabel);
    displayPanel.add(emailTextField);
    displayPanel.add(cellPhoneLabel);
    displayPanel.add(cellPhoneTextField);

}       

private class exitButtonListener implements ActionListener
{
    public void actionPerformed(ActionEvent e)
    {
        System.exit(0); //set exit button to exit even when pressed
    }
}

private class contactBoxListener implements ActionListener
{
    public void actionPerformed(ActionEvent e)
    {
        //get selection from dropdown menu
        selection = (String) contactBox.getSelectedItem();
    }
}

public static void main(String[] args)
{

    new ContactsReader();   //create instance of Contact Reader
}

} 
```

我希望选择将姓名、年龄、电子邮件和手机号码发送到相应的文本字段。我可以找到一个选择，但不知道如何让它选择正确的数组选择并将其发送到文本字段。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-19T03:27:47.570

不要让 JComboBox 只保存字符串，而是让它保存自定义类的对象，这些对象包含您在选择它时需要的所有信息。然后使用选定的对象来填充您的 JTextField。

例如，考虑创建一个名为 Contact 的类，

```
public class MyContact {
  String name;
  Date dateOfBirth; // in place of age
  String email;
  String cellPhone;

  //...
} 
```

然后创建一个`JComboBox<MyContact>`

当一个项目被选中时，调用相应的`getXXX()`getter方法来提取信息来填充JTextField。您将希望为 JComboBox 提供一个自定义 CellRenderer，以便它可以很好地显示联系人。

例如：

```
import java.awt.Component;
import java.awt.event.*;
import javax.swing.*;

public class MyComboEg extends JPanel {
   private static final MyData[] data = {
         new MyData("Monday", 1, false),
         new MyData("Tuesday", 2, false),
         new MyData("Wednesday", 3, false),
         new MyData("Thursday", 4, false),
         new MyData("Friday", 5, false),
         new MyData("Saturday", 6, true),
         new MyData("Sunday", 7, true),
   };   
   private JComboBox<MyData> myCombo = new JComboBox<MyData>(data);
   private JTextField textField = new JTextField(10);
   private JTextField valueField = new JTextField(10);
   private JTextField weekendField = new JTextField(10);

   public MyComboEg() {
      add(myCombo);
      add(new JLabel("text:"));
      add(textField);
      add(new JLabel("value:"));
      add(valueField);
      add(new JLabel("weekend:"));
      add(weekendField);

      myCombo.setRenderer(new DefaultListCellRenderer(){
         @Override
         public Component getListCellRendererComponent(JList list,
               Object value, int index, boolean isSelected, boolean cellHasFocus) {
            String text = value == null ? "" : ((MyData)value).getText();
            return super.getListCellRendererComponent(list, text, index, isSelected,
                  cellHasFocus);
         }
      });
      myCombo.setSelectedIndex(-1);

      myCombo.addActionListener(new ActionListener() {

         @Override
         public void actionPerformed(ActionEvent arg0) {
            // MyData myData = (MyData) myCombo.getSelectedItem();
            MyData myData = myCombo.getSelectedItem();
            textField.setText(myData.getText());
            valueField.setText(String.valueOf(myData.getValue()));
            weekendField.setText(String.valueOf(myData.isWeekend()));
         }
      });
   }

   private static void createAndShowGui() {
      MyComboEg mainPanel = new MyComboEg();

      JFrame frame = new JFrame("MyComboEg");
      frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
      frame.getContentPane().add(mainPanel);
      frame.pack();
      frame.setLocationByPlatform(true);
      frame.setVisible(true);
   }

   public static void main(String[] args) {
      SwingUtilities.invokeLater(new Runnable() {
         public void run() {
            createAndShowGui();
         }
      });
   }
}

class MyData {
   private String text;
   private int value;
   private boolean weekend;

   MyData(String text, int value, boolean weekend) {
      this.text = text;
      this.value = value;
      this.weekend = weekend;
   }
   public String getText() {
      return text;
   }
   public int getValue() {
      return value;
   }
   public boolean isWeekend() {
      return weekend;
   }

} 
```

# jquery - 从 jQuery 插件动态加载的 CSS - 必须加载 CSS，因为它是函数所必需的

> ID：10662070
> 
> 赞同：2
> 
> 时间：2012-05-19T03:26:53.717
> 
> 标签：jquery, css, jquery-plugins

我为导航菜单创建了一个 jQuery 插件。在 JavaScript 中，在 jQuery 插件 JavaScript 文件（位于文件顶部）中，我动态加载与插件相关的 CSS。然后`$(document).ready(function()`我将插件附加到一个 HTML 元素，一个 DIV。

问题是当插件启动时，它会根据应用于元素的 CSS 计算一些 outerWidth()。在某些浏览器中，插件在 CSS 完全加载并应用于 HTML 之前执行。发生这种情况时，宽度计算不正确。通常，它获取窗口的宽度，而不是从 li 或 ul 元素中获取。

我在插件 JavaScript 文件中有如下代码：

```
function includeCSS(p_file) {
    var v_css = document.createElement('link');
    v_css.rel = 'stylesheet'
    v_css.type = 'text/css';
    v_css.href = p_file;        
    document.getElementsByTagName('head')[0].appendChild(v_css);
}

includeCSS("Scripts/jQuery/plugins/jquery-mmm-1.0/menu.css"); 
```

我曾尝试在 jQuery init 方法中加载 css，但这也有类似的问题。

我需要从 jQuery 插件 JavaScript 文件中指定 CSS（以方便最终用户）。

在解决这个问题时，我直接链接到 HTML 页面中的 CSS。在这样做的同时，事情进展顺利。问题肯定是当我动态加载 CSS 并随后要求将此 CSS 应用于插件的计算时。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-19T03:48:01.100

大多数插件都向开发人员提供了在 head 部分中包含 CSS 和 JavaScript 的说明。大多数熟悉 jQuery 的 Web 开发人员都习惯了这种约定。它不仅运行良好，而且其他 JavaScript、CSS 和 HTML 验证问题之间的冲突也更少，这在野外应该是可以预料的。虽然有经验的专业开发人员可能会花时间验证他们的代码并以深思熟虑的方式构建他们的网站，但整个 Internet 社区是非常多样化的，而且许多人并不总是遵守这些原则。

话虽如此，您可以使用 AJAX 请求将 CSS 下载为文本/纯内容，然后在成功处理程序中，将 CSS 添加到`<style>`块中，然后调用宽度计算函数：

**使用 AJAX 检索 CSS 的解决方案：**

`<style>`通过将 CSS 加载到 JavaScript 字符串中，然后动态构建元素，确保在任何 JavaScript 运行之前加载 CSS 。

```
$.ajax({ "url" : "/css/yourstyle.css",
    success: function(data) {
        // assume data is "body { background-color:yellow; }";
        $('head').append('<style id="testtest"></style>');
        $('head').find("#testtest").html( cssString );

        // now fire your width-calculating function here
    }
}); 
```

这种方法的一个问题可能包括样式由于其操作顺序而无法正确呈现。通常，内联样式的优先级高于样式块，而样式块的优先级高于外部样式表。由于您的 CSS 现在作为样式块而不是外部样式表加载，因此它可能会覆盖或以其他方式使您不打算覆盖的样式无效。

这可能会迫使您的用户不得不修改他们的 CSS 以包含更具体的 CSS 规则或在 CSS 规则中使用 !important 标识符。

此外，请确保开发人员可以轻松地重新配置 CSS 文件的位置。你的路径是相对的，如果我在不同的文件夹中有 HTML 文件，他们可能无法找到你的 CSS 文件。

总而言之，这种方法可以很好地工作，但是您应该准备好在这种解决方案中投入更多的时间和维护，并处理 CSS 解释方式的差异。祝你好运！:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T03:45:32.863

解决该问题的一种方法是加载`CSS`with [.get()](http://api.jquery.com/jQuery.get/)并在该操作完成后调用剩余的代码！

**查询**

```
var css = "foobar.css";
var callback = function() {
  alert("CSS is now included");
  // your jquery plugin for a navigation menu
};

$.get(css, function(data){
  $("<style type=\"text/css\">" + data + "</style>").appendTo(document.head);
  callback();
}); 
```

# php - PHP 日期 / GMT 怪异

> ID：10662076
> 
> 赞同：0
> 
> 时间：2012-05-19T03:29:28.523
> 
> 标签：php, date, timezone, gmt

要么我疯了，要么我根本不知道我在做什么。我倾向于后者。

我正在尝试转换：1316826000，我非常有信心应该是 Sat, 24 Sep 2011 01:00:00 GMT

[http://www.onlineconversion.com/unix_time.htm](http://www.onlineconversion.com/unix_time.htm)证实了这一点。

[http://www.unixtimestamp.com/index.php](http://www.unixtimestamp.com/index.php)告诉我 09 / 23 / 11 @ 8:00:00pm EST，到目前为止一切顺利。我碰巧在 EST，这是我想从 PHP 中得到的结果。

当我执行 date('l, M d, Y, h:ia', $iTime) 时，我得到：2011 年 9 月 23 日，星期五，上午 12:00，整整 20 个小时。

我已经使用 date('c') 确认了服务器的时间是正确的。日期（'c'）输出为：2012-05-19T03:19:20+00:00。服务器位于中央时区，目前是晚上 10:20。5月18日。

echo date_default_timezone_get() 输出“GMT”（使用 date_default_timezone_set('GMT') 在脚本中的其他位置设置）

我错过了什么？到目前为止，我所读到的任何内容都无法解释我如何得到比应有的结果晚 20 小时的结果。它是快一个小时还是慢一个小时，我至少可以把它当作某种 DST 白痴，但是 20？疯狂！谢谢阅读！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-22T02:46:39.750

检查您的 php.ini 对 date.timezone 的说明。在 unix 中，它通常在这里：`/etc/php.ini` 然后使用 PHP 识别的适当时区： [http ://www.php.net/manual/en/timezones.php](http://www.php.net/manual/en/timezones.php)

`date.timezone = 'America/New_York'`

然后重新加载您的网络服务器。

Unix 时间仅表示自纪元以来的秒数。与时区无关。对于您从 GMT 移开的每个区域，时区只需从 unix 时间添加或减去 1 小时（3600 秒）。一个例子：

```
$userTimezone = new DateTimeZone('America/New_York');
$gmtTimezone = new DateTimeZone('GMT');
$myDateTime = new DateTime('2014-01-22 11:44', $gmtTimezone);
$offset = $userTimezone->getOffset($myDateTime);
echo $offset; 
```

这将输出：-14400 或 4 小时。纽约和格林威治标准时间有什么区别

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-22T02:12:30.080

[在Joda-Time](http://www.joda.org/joda-time/) 2.3 库中使用一些 Java 代码，因为我不懂 PHP……</p>

```
long m = 1316826000L;

DateTime dateTimeUtc = new DateTime( m * 1000L, DateTimeZone.UTC );
DateTime dateTimeNewYork = dateTimeUtc.toDateTime( DateTimeZone.forID( "America/New_York" ) );

System.out.println( "dateTimeUtc: " + dateTimeUtc );
System.out.println( "dateTimeNewYork: " + dateTimeNewYork ); 
```

我可以告诉你，从 1970 UTC/GMT（Unix 纪元）开始的 1316826000 秒是……</p>

```
dateTimeUtc: 2011-09-24T01:00:00.000Z
dateTimeNewYork: 2011-09-23T21:00:00.000-04:00 
```

因此，正如评论者所说，这将是美国东部标准时间晚上 8 点，但美国东部标准时间当天没有生效。DST（[夏令时](http://en.wikipedia.org/wiki/Daylight_saving_time)）（愚蠢，正如您正确指出的那样）一直有效到当年的[11 月 9日（2011 年）。](http://www.timeanddate.com/worldclock/timezone.html?n=179)因此，一天中的时间提前一小时，到晚上 9 点。

在 GMT/UTC 中，这意味着第二天早上 1 点。

美国东海岸的标准时间比 UTC/GMT 晚 5 小时。使用 DST，它比 UTC/GMT 晚 4 小时（更近一小时）。

你感到困惑的地方：

*   您的**时间格式/转换不正确**。
    我无法帮助，因为我不知道 PHP。
*   您应该为此类工作使用**合格的日期时间库。**
    日期时间工作是复杂、棘手、令人困惑且容易出错的。
    [这个问题](https://stackoverflow.com/questions/1325850/date-and-time-helper-for-php-like-joda-time-in-java)讨论了用于 PHP 的 Joda-Time (for Java) 类库的可能性。
*   您使用**了三个字母的时区代码。避免这些**。
    这些代码既不是标准化的也不是唯一的——有常见的重复。相反，请使用[正确的时区名称](http://joda-time.sourceforge.net/timezones.html)。在美国东海岸的情况下，“America/New_York”。此外，在这种情况下，您将时区区域和规则（美国东海岸）与这些规则的特定应用（EST）混淆了。说“America/New_York”意味着“在该日期生效的任何时区规则，而说“EST”（如果解释为[美国东部标准时间](http://en.wikipedia.org/wiki/Eastern_Time_Zone)）意味着“UTC-05:00”。所以要么（a）使用时区名称，例如“America/New_York”，或 (b) 使用特定的偏移量，例如“-05:00”。

# android - imageview的图像不删除？

> ID：10662077
> 
> 赞同：0
> 
> 时间：2012-05-19T03:30:23.850
> 
> 标签：android

在从 xml.as 上的 ImageView 获取 id 后我有一个 ImageView 我们设置了打开画廊和相机选项的 clicklistener 您可以设置来自相机的图像以及画廊 ain #2

```
 profileimage = (ImageView) findViewById(R.id.profileimage);
    profileimage.setBackgroundResource(R.drawable.no_img);

  protected void onActivityResult(int requestCode, int resultCode,
        Intent intent) {
    super.onActivityResult(requestCode, resultCode, intent);
    if (resultCode == RESULT_CANCELED) {
        // TODO
        return;
    }
    Log.e("request code", "1:" + requestCode);
    switch (requestCode) {
    case CAMERA_SELECT:
        Log.e("in camera select", "1");
        // Get the camera data
        cameracalling(intent);

        break;
    case Gallery_Select:
        ongallerycalling(intent,resultCode);

    }
}

private void cameracalling(Intent intent){

     Bitmap photo = (Bitmap) intent.getExtras().get("data"); 
     profileimage.setImageBitmap(photo);
 }

profileimage.buildDrawingCache();

Bitmap bmap = profileimage.getDrawingCache();

ByteArrayOutputStream bao = new ByteArrayOutputStream();

bmap.compress(Bitmap.CompressFormat.JPEG, 90, bao);

byte [] ba = bao.toByteArray();

bitmapString=Base64.encodeBytes(ba);

Drawable draw = LoadImageFromWebOperations("" + objUserInformationSitesList.getProfileImage());

profileimage.setBackgroundDrawable(draw); 
```

我们正在将位图字符串正确发送到服务器上的图像上传，但是当我们下次打开这个屏幕时，我们上传图像的 web 服务调用将提供所有数据（实际上是这个用户配置文件屏幕）。当我们设置服务器图像时，默认图像也设置在背景上

`objUserInformationSitesList`此对象包含解析 Web 服务后的所有信息。在个人资料图片后面，默认图片也是我在 #1 上设置的

如果我无法正确解释，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T03:47:16.650

在 onclicklistener profileimage.setBackgroundResource(0) 中使用；

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T06:59:47.310

您应该替换以下行：

```
profileimage.setBackgroundResource(R.drawable.no_img); 
```

用这条线：

```
profileimage.setImageResource(R.drawable.no_img); 
```

您将图像设置为可绘制的背景，然后将位图设置为图像源。所以 imageview 背景不会改变。您应该将图像设置为图像资源。

# javascript - 传递提示框的输入值

> ID：10662080
> 
> 赞同：2
> 
> 时间：2012-05-19T03:31:00.247
> 
> 标签：javascript, input, popup, prompt

是否可以像这样传递提示框的输入值？

```
<script type="text/javascript">
function prompt_box()
{
var naam=prompt("Please enter your name:","Type your name here.")
document.location = 'delete.php?target=' + naam;
}
</script> 
```

还是我必须使用表格？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T03:39:29.837

这是将返回的值传递`prompt`给变量的正确方法。

```
var value = prompt("Please enter your name:", "Type your name here."); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-03-13T13:26:01.437

如果您使用 javascript 创建一个窗口提示，它会要求您输入一些内容。所以你必须以这种方式实现你的代码才能得到提示，

```
<html>
<body>

<p>Click the button to demonstrate the prompt box.</p>

<button onclick="myFunction()">Try it</button>

<p id="demo"></p>

<script>
function myFunction() {
  var name = prompt("Please enter your name", "Micheal");
  if (name != null) {
    document.getElementById("demo").innerHTML =
    "Hello " + name + "! How are you today?";
  }
}
</script>

</body>
</html>
```

# .htaccess - 301 在数据库驱动的网站上重定向 htaccess

> ID：10662083
> 
> 赞同：0
> 
> 时间：2012-05-19T03:31:29.177
> 
> 标签：.htaccess, redirect, http-status-code-301

我使用 IPB 创建了一个网站，我相信它是用 PHP 编写的。

我正在尝试使用 301 突出重定向，但是当我尝试使用来自网络的任何重定向时，我会收到 500 服务器错误

损坏的网址是“http://thereviewforum.com/index.php?/page/index.html/_/monthly-top-10/top-10-free-vpn-service-providers-r17”

我想将用户和搜索机器人引导到 [http://thereviewforum.com/monthly_top_10.html/_/monthly-top-10/top-10-free-vpn-service-providers-r17](http://thereviewforum.com/monthly_top_10.html/_/monthly-top-10/top-10-free-vpn-service-providers-r17)

再次非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T03:36:10.767

我认为你可以这样做**（以下不起作用。请参阅下面的工作示例）：**

```
Redirect 301 /index.php?/page/index.html/_/monthly-top-10/top-10-free-vpn-service-providers-r17 http://thereviewforum.com/monthly_top_10.html/_/monthly-top-10/top-10-free-vpn-service-providers-r17 
```

**编辑：**

你是对的，以上不起作用。我猜不考虑查询字符串。我应该先测试一下。这是我测试以确保它有效的示例。

```
RewriteEngine on
RewriteCond %{REQUEST_URI} ^/index.php$
RewriteCond %{QUERY_STRING} ^/page/index.html/_/monthly-top-10/top-10-free-vpn-service-providers-r17$
RewriteRule .? /monthly_top_10.html/_/monthly-top-10/top-10-free-vpn-service-providers-r17 [L,R=301] 
```

# ruby-on-rails - 如何将postgreSQL数据库导出到excel

> ID：10662085
> 
> 赞同：0
> 
> 时间：2012-05-19T03:31:50.507
> 
> 标签：ruby-on-rails, postgresql

我有一个使用 postgres 并在 heroku 上托管的 rails 应用程序。

我正在尝试找到一种在网页上制作按钮的方法，该按钮可以将数据库导出到 excel 文件中。

有没有人这样做过？任何建议表示赞赏。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T03:36:23.747

将数据从 pgsql 导出到 csv

使用 apache poi 从 csv 读取并创建 excel

访问[此处](http://poi.apache.org/poi-ruby.html) 了解有关使用 ruby​​ 的 poi 的更多信息

# apache - ErrorDocument 自行工作，添加其他任何内容都会导致 500 - .htaccess

> ID：10662087
> 
> 赞同：0
> 
> 时间：2012-05-19T03:32:35.937
> 
> 标签：apache, .htaccess

我需要一些关于我的 .htaccess 文件的帮助。

我想处理一些可能性，将非 www 转换为 www，重定向一些文件，设置缓存等。

ErrorDocument 404 /404.php 本身就可以正常工作，但是任何时候我尝试添加任何其他部分都会导致“500 内部服务器错误”

所有部分的示例：

```
//Rewrite to www
Options +FollowSymLinks
RewriteEngine on
RewriteCond %{HTTP_HOST} ^mydomain.com[nc]
RewriteRule ^(.*)$ http://www.mydomain.com/$1 [r=301,nc]

//301 Redirect Old File
Redirect 301 /index.html /

//Caching schema
<FilesMatch "\.(.css)$">
Header set Cache-Control "public, max-age=86400"
</FilesMatch>

//Custom 404 errors
ErrorDocument 404 /404.php 
```

有任何想法吗？非常感激。

编辑：评论只是为了展示-以下不起作用：

```
Redirect 301 /index.html /
ErrorDocument 404 /404.php

Options +FollowSymLinks
RewriteEngine on
RewriteCond %{HTTP_HOST} ^mydomain.com.com[nc]
RewriteRule ^(.*)$ http://www.mydomain.com.com/$1 [r=301,nc]
Redirect 301 /index.html http://www.mydomain.com.com
ErrorDocument 404 /404.php 
```

等等

# eclipse - 监听 Eclipse 编辑器事件

> ID：10662092
> 
> 赞同：1
> 
> 时间：2012-05-19T03:34:19.923
> 
> 标签：eclipse, events, eclipse-plugin

我正在为 Eclipse 编写一个插件，我想知道如何监听任何活动编辑器的编辑器文本更改事件。

基本上，我希望在任何打开的编辑器中修改任何文本时触发侦听器事件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T03:48:22.960

您想要访问`Document`与编辑器关联的 JFace 对象并添加一个`IDocumentListener`，这应该可以帮助您入门。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T18:42:24.083

听起来真的很不一般。也非常具有侵入性和危险性。你为什么要听任何编辑器的任何输入？强烈建议不要这样做。这不应该仅限于同一模型的一堆编辑器（IEditorInput）吗？

```
IWorkbenchPage page = PlatformUI.getWorkbench()
            .getActiveWorkbenchWindow().getActivePage();
    IEditorReference[] editorReferences = page.getEditorReferences(); 
```

从 editorReferences 尝试找出添加侦听器的方法。IEditorReference 是一个句柄，并不意味着编辑器被激活。当您打开 eclipse 时，编辑器会被延迟激活（当它们被点击打开时）。因此激活所有打开的编辑器也会导致性能问题。

# c++ - Cayley 表中的标识属性

> ID：10662093
> 
> 赞同：0
> 
> 时间：2012-05-19T03:34:36.667
> 
> 标签：c++, finite-group-theory

我正在做一个项目，该项目需要我辨别我的文本文件中的 cayley 表是否具有恒等、关联、逆和阿贝尔属性。我目前正在研究恒等函数，虽然我相信我必须使用两个嵌套for 循环遍历表格的行和列。我找不到任何可能将我推向正确方向的东西，不胜感激。谢谢杰西卡

只是想添加一个更新：这是我最终想出的，发布以防万一它仍然可以使用工作。非常感谢。

```
group_el Group::getIdentity()
{
for (int i=0; i<order; i++)
   {
    bool identIsi = true;
    for (int j=0; j<order; j++)
       {
        if ((op(i,j)==i) && (op(j,i)==i))  //if i*j =i same as j*i = i then i is identity
          {
            return i; 
          }
        else 
          {
            identIsi = false;
          }
       }
    } 
```

返回 NO_IDENTITY；}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T04:58:51.403

C++ 不会是最容易使用的语言，但它是可行的。

几年前我上了一门抽象代数课，据我回忆，你只需要写出每个可能组合的表达式（因为有些组是不可交换的，你需要做`A*B`and `B*A`，`*`任意运算符在哪里）并从那里工作。

为了降低复杂性，我会按以下顺序进行：

1.  扫描身份元素。（应该）只有一个，一旦你确定了它的值，其余的计算应该会变得更容易一些。
2.  扫描两个相乘的元素以给出标识元素。这两个元素（按正确顺序）是相反的。
3.  确定该群是否是阿贝尔群将很简单。只需遵循阿贝尔群的定义即可。

# android - Flex Mobile 监听事件

> ID：10662096
> 
> 赞同：0
> 
> 时间：2012-05-19T03:34:57.780
> 
> 标签：android, ios, flash, apache-flex, flex4

Flex Mobile 应用程序中是否有一种方法可以监听 a 中的`<s:View>`事件`<s:ViewNavigator>`？假设我有以下应用程序结构：

* * *

主要应用：

```
<s:TabbedViewNavigatorApplication xmlns:fx="http://ns.adobe.com/mxml/2009" 
                  xmlns:s="library://ns.adobe.com/flex/spark"
                  creationComplete="databaseConnection(event)">

  <s:ViewNavigator id="tasks" width="100%" height="100%"
                       label="Tasks" firstView="views.TasksView"
                       title="Tasks" icon="@Embed('assets/icons/tasks.png')">
  </s:ViewNavigator>
</s:TabbedViewNavigatorApplication> 
```

view.TasksView：

```
<s:View xmlns:fx="http://ns.adobe.com/mxml/2009" 
        xmlns:s="library://ns.adobe.com/flex/spark">

  <s:Button label="New View" click="{navigator.pushView(views.AddTask)}"/>
</s:View> 
```

视图.AddTask：

```
<s:View xmlns:fx="http://ns.adobe.com/mxml/2009" 
        xmlns:s="library://ns.adobe.com/flex/spark"
                creationComplete="{dispatchEvent(new Event("happened"))}">

  <fx:Metadata>
    [Event(name="happened", type="flash.events.Event")]
  </fx:Metadata>
</s:View> 
```

假设我想`happened`在我的主应用程序中侦听事件。我怎样才能听到这样的事件？

感谢您的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T07:34:16.310

是的，你可以，它可以这样做：

首先在您的应用程序中将此属性添加到您的根标记：

```
initialize="attachNavigationListeners(event)" 
```

下一个方法将向需要自定义事件的导航器添加一个完整的事件：

```
private function attachNavigationListeners(event : FlexEvent) : void {
    navigator.addEventListener(Event.COMPLETE,attachViewListeners);
} 
```

然后我们需要在导航器完成时添加视图侦听器，我有这个单独的，所以你可以根据需要在这里拥有尽可能多的视图，可以使用 switch 语句：

```
private function attachViewListeners(event : Event) : void {
    if(navigator.activeView is FirstView) {
          addListenersToFirstView();
    }
} 
```

将侦听器添加到相关视图：

```
private function addListenersToFirstView() : void{
    if(navigator.activeView is Firstview) {
          var view: Firstview = navigator.activeView);
          view.addEventListener("happened", handleHappened);
     }
} 
```

最后处理事件：

```
private function handleHappened(event:Event) : void{
    // I hope something really did happen :)
} 
```

**笔记**

显然我只是概述了这里需要的所有步骤，我没有提供一个完整的工作示例来复制和粘贴，但是你会知道你在做什么来问这个问题我希望这可以帮助你，你也已经展示了如何从您的视图中分派事件。

我也使用了字符串“happened”，但你会有一个像 CustomEvent.HAPPENED 这样的 const 或适合你的东西，以避免以这种方式使用字符串。

# asp.net-mvc-3 - 在实体框架中使用 SqlQuery 时，别名列未映射到实体上的属性

> ID：10662105
> 
> 赞同：3
> 
> 时间：2012-05-19T03:37:38.660
> 
> 标签：asp.net-mvc-3, entity-framework-4

我正在使用一个原始 SQL 语句，我有一个名为“距离”的别名列，我想将值存储到实体部分类的新属性中。但是，当我执行查询时，实体框架会映射除此别名列之外的所有内容。我应该怎么做才能将别名列距离映射到我班级的属性距离？

**部分类**

```
 [MetadataType(typeof(ParishMD))]
    public partial class Parish
    {

        public List<SelectListItem> States { get; set; }
        public double Distance { get; set; }

        .........
    } 
```

**控制器类方法**

```
string SQL = "select * from (select *, Distance = ((ACOS(SIN({0} * PI() / 180) * SIN(lat * PI() / 180) + COS({0} * PI() / 180) * COS(lat * PI() / 180) * COS(({1} - Long) * PI() / 180)) * 180 / PI()) * 60 * 1.1515) from dbo.Parish) t where Distance < 10 order by Distance asc";

 SqlParameter latParam = new SqlParameter("latitude", latitude);
 SqlParameter lngParam = new SqlParameter("longitude", longitude);
 object[] parameters = new object[] { latitude, longitude };

 var parishes = db.Parish.SqlQuery(SQL, parameters); 
```

我在映射到数据库表的 EDMX 文件中映射了此类的大约 12 个属性，并且这些属性已正确映射。*Distance*属性不是我表上的列，因此它不在 EDMX 中。不确定这是否是我不映射的原因。

谢谢你的帮助！

跳蚤

# javascript - 如何使用 Javascript 从另一个选项卡刷新选项卡

> ID：10662107
> 
> 赞同：9
> 
> 时间：2012-05-19T03:38:01.850
> 
> 标签：javascript

当您创建新帖子时，我希望实现类似于 Wordpress 的功能。它允许您通过打开一个新标签来预览您的帖子。如果在那之后，您编辑帖子并再次预览它，而不是打开另一个选项卡，它会刷新先前打开的选项卡（前提是它仍然打开）。

从一些研究看来，我可以打开一个新窗口并为其命名，如下所示：

`window.open(url,"foobar");`

但是，我以后如何刷新此选项卡？`location.reload()`似乎没有将名称作为参数。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-19T03:41:03.727

如果我没记错的话，这是这样做的方法：

```
var win = window.open(url, "foobar");
win.location.reload(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T03:41:49.407

我认为您正在寻找属性 window.opener。见[http://www.w3schools.com/jsref/prop_win_opener.asp](http://www.w3schools.com/jsref/prop_win_opener.asp)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-11-14T07:24:31.090

您可以通过“存储”事件来做到这一点。更多详情请关注

[选项卡或窗口之间的通信](https://stackoverflow.com/questions/28230845/communication-between-tabs-or-windows)

[https://developer.mozilla.org/en-US/docs/Web/Events/storage](https://developer.mozilla.org/en-US/docs/Web/Events/storage)

# php - 需要帮助使用 PHPMailer 发送电子邮件

> ID：10662108
> 
> 赞同：1
> 
> 时间：2012-05-19T03:38:19.103
> 
> 标签：php, character-encoding, phpmailer

我正在使用 PHPMailer 发送电子邮件。除了一件事，一切都很好。如果主题包含 UTF-8 字符，则无法发送电子邮件。我已经设置了`$mail->CharSet="UTF-8"`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-19T05:53:27.713

尝试对主题进行编码以处理 utf8 字符...

```
$sendsubject= "=?utf-8?b?".base64_encode($subject)."?=";
$mail = new PHPMailer();
$mail->Subject = $sendsubject; 
```

# php - 将所选选项插入表中

> ID：10662110
> 
> 赞同：0
> 
> 时间：2012-05-19T03:38:27.777
> 
> 标签：php

我有这段代码，我正在尝试将选定的状态放在子目录表中。到目前为止，它返回一个空值。我不确定这是否清楚，但我想要的只是：从选择选项中选择一个状态并提交它。我想将选定的州名放入我的表子目录中。

```
enter <?php
include("connect.php");
$state = $row['states']; //Select name
if (isset($_POST[submit])){
$query = "INSERT INTO subcat (sub_name) VALUES ('$state')";
mysql_query($query) or die(mysql_error());
}
?>
<form action="" method="post" name="form">
<?php
$sql = mysql_query("SELECT * FROM   state");
echo "<select name='states'>
<option value=''>Select a state</option>";
while ($row = mysql_fetch_assoc($sql)) {
echo "<option value='$row[id]'>$row[name]</option>";
}
echo "</select>";
?>
<input type="submit" name="submit" value="Continue" />
</form> here 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T04:03:06.083

更改`$state = $row['states']`为`$state = $_POST['states']`

```
<?php

include("connect.php");    
if (isset($_POST[submit]))
{
   $state = $_POST['states']; //Select name
   $query = "INSERT INTO subcat (sub_name) VALUES ('$state')";
   mysql_query($query) or die(mysql_error());
}

?>
<form action="" method="post" name="form">
<?php
$sql = mysql_query("SELECT * FROM   state");
echo "<select name='states'>
<option value=''>Select a state</option>";
while ($row = mysql_fetch_assoc($sql)) {
echo "<option value='$row[id]'>$row[name]</option>"; // if you want to 
//get the name into table, then use like this 
//echo "<option value='$row[name]'>$row[name]</option>";  or  
//echo "<option>$row[name]</option>";
}
echo "</select>";
?>
<input type="submit" name="submit" value="Continue" />
</form> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T04:09:31.257

试试这个：

```
enter <?php
include("connect.php");
if (isset($_POST[submit])){
$state = $_POST['states'];
$query = "INSERT INTO subcat (sub_name) VALUES ('".mysql_real_escape_string($state)."')";
mysql_query($query) or die(mysql_error());
}
?>
<form action="" method="post" name="form">
<?php
$sql = mysql_query("SELECT * FROM   state");
echo '<select name="states" id="states">
<option value="">Select a state</option>';
while ($row = mysql_fetch_assoc($sql)) {
echo '<option value="'.$row['name'].'">'.$row['name'].'</option>';
}
echo '</select>';
?>
<input type="submit" name="submit" value="Continue" />
</form> here 
```

不要忘记使用 mysql_real_escape_string 来防止 SQL 注入。我已经替换了 $state = $row['states']; $state = $_POST['states'];

我不知道你从哪里得到 $row...

以上将状态名称插入数据库。

# php - 从字符串导入电子邮件

> ID：10662116
> 
> 赞同：1
> 
> 时间：2012-05-19T03:40:22.223
> 
> 标签：php

我想让我的用户将一串电子邮件粘贴到文本中，然后在提交时将它们导入到数据库表中。

似乎电子邮件的典型语法以及通常在 TO 字段中键入的方式是：

```
"Fname Lname" <abc@email.com>, "Fname Lname" <abc@gmail.com>, 
```

我想在提交时我需要通过一些循环来解析它。如何检测名称/电子邮件对中断？有没有办法也做一些基本的电子邮件验证？

* * *

更新：

我意识到有时字符串可能会稍微偏离，例如缺少名称：

```
Fname Lname" <abc@email.com>, abc@gmail.com, 
```

甚至

```
<abc@email.com>, abc@gmail.com, 
```

甚至

```
abc@email.com, abc@gmail.com, 
```

如果缺少名称，如何使其更健壮并注意中断？电子邮件应该一直在那里！否则它只需要忽略一个实例并继续下一个联系人。但我想我可以在创建联系人数组后进行验证......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T04:05:42.423

我不擅长`preg_match`，所以我尝试了另一种方式。如果您的字符串始终处于这种模式，您可以尝试以下操作：

```
$str = '"Fname Lname" <abc@email.com>, "Fname Lname" <xyz@gmail.com>';

$pairs = explode( ",", $str );

foreach( $pairs as $pair ) {

  $pair = explode( "<", $pair );
  $pair['0'] = trim( str_replace( "\"", "", $pair['0'] ) );
  $pair['1'] = trim( rtrim( $pair['1'], ">" ) );

  print_r( $pair ); // Save it to database here
} 
```

## [在这里测试](http://codepad.org/p2xGjt8t)

# 编辑：

*（输入字符串的变化）*

```
$str = '"Fname Lname" <abc@email.com>, abc@gmail.com';

$pairs = explode( ",", $str );

foreach( $pairs as $pair ) {

  if( strpos($pair, '<') ) {

    $output = explode( "<", $pair );
    $output['0'] = trim( str_replace( "\"", "", $output['0'] ) );
    $output['1'] = trim( rtrim( $output['1'], ">" ) );

  } else {

    $output = array();
    $output['0'] = '';
    $output['1'] = $pair;

  }

  print_r($output); // Save it to database here
} 
```

## [在这里测试](http://codepad.org/3oSo40YL)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T03:49:34.547

您可以使用[preg_match_all()](http://php.net/manual/en/function.preg-match-all.php)和[for](http://php.net/manual/en/control-structures.for.php)来做到这一点：

**PHP 示例**

```
<?php

$string = '"Fname Lname" <abc@email.com>, "Fname Lname" <abc@email.com>,';
preg_match_all('!"(.*?)"\s+<\s*(.*?)\s*>!', $string, $matches);
$arr = array();
for ($i=0; $i<count($matches[0]); $i++) {
  $arr[] = array(
    'name' => $matches[1][$i],
    'email' => $matches[2][$i],
  );
}

?> 
```

**输出：**

```
print_r($arr);

Array (
  [0] => Array (
    [name] => Fname Lname
    [email] => abc@email.com
  )
  [1] => Array (
    [name] => Fname Lname
    [email] => abc@email.com
  )
) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-19T03:51:21.407

`[1]`以下正则表达式将分别在键和子数组中创建一个包含名称和电子邮件的数组`[2]`：

```
<?php

$data = '"Fname Lname" <abc@email.com>, "Fname Lname" <abc@gmail.com>,';
preg_match_all('/\"(.*?)\"\s\<(.*?)\>/', $data, $arr, PREG_PATTERN_ORDER);
print_r($arr);

?> 
```

至于电子邮件验证，在 php 5.2 及更高版本中，您可以使用[`filter_var($variable, FILTER_ID)`](http://www.php.net/manual/en/function.filter-var.php); 具体来说：

```
if (filter_var($email_string, FILTER_VALIDATE_EMAIL)) { 
    // do stuff
} 
```

[描述在这里](http://php.net/manual/en/filter.examples.validation.php#example-4686)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-19T03:50:06.747

```
preg_match("/<[a-zA-Z0-9\\-_\\.]@[a-zA-Z0-9\\-]\\.([a-z]{3})(\\.[a-z]{2})>/i", "", $emails); 
```

问候，

# android - iOS 和 Android 中的文件命名指南

> ID：10662120
> 
> 赞同：0
> 
> 时间：2012-05-19T03:41:55.363
> 
> 标签：android, iphone

我想知道是否有某种为 iPhone 和 android 命名图像的设置指南。

例如，iPhone 图像项通常由设计师使用（小写字母、数字、@、_）命名。

> 常规图片资源：colorroll.png

&

> 视网膜图片资源：colorroll@2x.png

另一方面，android通常只会使用（小写字母，nums，_），并且在将鼠标悬停在android上时，通常会在名称中添加roll

主要问题是是否有某种最佳准则可以为设计师和程序员分开并保持秩序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T08:09:56.363

我最近将一个 iOS 应用程序移植到 Android，其中包含 1,000 多个从静态 XML 文件（实际上是 pLists）引用的资源。编辑 plist 不是一种选择。

看看来自 Alex2k8 [here的答案](https://stackoverflow.com/questions/2679699/what-characters-allowed-in-file-names-on-android)

此外，ADT 不允许包含空格、大写字符或以数字开头的资源文件名（此列表可能并不详尽，它们只是我在这 1000 个奇怪资源中找到的那些。

为了解决这个问题，我编写了一个实用程序来重命名磁盘上的所有文件。它将文件名转换为小写，用下划线替换非法字符和空格，并在以数字开头的文件名上加上前缀“num”。这些文件是我放入资源文件夹的文件。

在我的应用程序中，我编写了一个辅助函数来做同样的事情，所以当我需要加载资源时。我调用了辅助函数，使用相同的算法将 plist 中的文件名转换为合法的 Android 版本，然后将其传递给框架加载器。

例如，iOS 文件名可能是“9\. Enlarge view 100m.png”。该实用程序将其重命名为 num9_enlarge_view_100m.png"。辅助函数仅使用字符串构建器，将 iOS 文件名上的 .replace() 方法作为字符串参数传递给它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T03:56:07.220

IIRC 在 Android 资源文件名被假定为全部小写。

不过不要引用我的话，我是一个新的 Android 开发者。

# mysql - MySQL - 无法使用 count(*) 获得左外连接来返回 count = 0 的项目

> ID：10662121
> 
> 赞同：4
> 
> 时间：2012-05-19T03:42:00.807
> 
> 标签：mysql, sql

我有这个架构：

```
mysql> describe suggested_solution_comments;
+-----------------------+----------------+------+-----+---------+----------------+
| Field                 | Type           | Null | Key | Default | Extra          |
+-----------------------+----------------+------+-----+---------+----------------+
| comment_id            | int(10)        | NO   | PRI | NULL    | auto_increment |
| problem_id            | int(10)        | NO   |     | NULL    |                |
| suggested_solution_id | int(10)        | NO   |     | NULL    |                |
| commenter_id          | int(10)        | NO   |     | NULL    |                |
| comment               | varchar(10000) | YES  |     | NULL    |                |
| solution_part         | int(3)         | NO   |     | NULL    |                |
| date                  | date           | NO   |     | NULL    |                |
| guid                  | varchar(50)    | YES  | UNI | NULL    |                |
+-----------------------+----------------+------+-----+---------+----------------+
8 rows in set (0.00 sec)

mysql> describe solution_sections;
+---------------------+---------------+------+-----+---------+----------------+
| Field               | Type          | Null | Key | Default | Extra          |
+---------------------+---------------+------+-----+---------+----------------+
| solution_section_id | int(10)       | NO   | PRI | NULL    | auto_increment |
| display_order       | int(10)       | NO   |     | NULL    |                |
| section_name        | varchar(1000) | YES  |     | NULL    |                |
+---------------------+---------------+------+-----+---------+----------------+ 
```

我的查询是这样的：

```
select   s.display_order, 
         s.section_name, 
         s.solution_section_id ,
         count(c.comment_id) AS comment_count    
FROM solution_sections s left outer join suggested_solution_comments c 
           ON (c.solution_part = s.solution_section_id) 
where      problem_id = 400    
group by   s.display_order, s.section_name, s.solution_section_id   
order by   display_order; 
```

它仅返回计数 > 0 的行，但如果计数为 0，则不返回这些行。

知道如何让它返回所有行吗？:)

谢谢！！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-19T03:47:31.697

这是因为`where problem_id = 400`删除了没有对应行的`suggested_solution_comments`行。将条件从`where`过滤器移到`on`子句应该可以解决问题：

```
select s.display_order, s.section_name, s.solution_section_id ,count(c.comment_id) 
AS comment_count
from solution_sections s     
left outer join suggested_solution_comments c 
ON (c.solution_part = s.solution_section_id) AND problem_id = 400
group by s.display_order, s.section_name, s.solution_section_id   
order by display_order; 
```

# ruby-on-rails - 'updated_at' 比当前时间早 2 小时时的电子邮件通知

> ID：10662124
> 
> 赞同：0
> 
> 时间：2012-05-19T03:43:09.560
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

如果 SomeModel 2 小时未更新，我想发送电子邮件通知。实施它的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T03:48:40.503

保存模型后，将后台作业排队以从该时间开始运行 2 小时以发送电子邮件。当新作业入队时，删除仍在队列中的所有未运行的作业。

[`resque-scheduler`](https://github.com/bvandenbos/resque-scheduler)假设您已经启动并运行了 redis，提供了一种非常简单的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T04:23:06.053

我个人认为@x1a4 提出的解决方案有些矫枉过正。鉴于 2 小时的相对较大的窗口，我会定期运行一项作业（例如，每 10-15 分钟一次），然后在所有模型中搜索 updated_at <= 2.hours.ago 并发送电子邮件。

至于安排该作业每 15 分钟运行一次，有几个选项。如果您使用的是 Resque，则可以使用[resque-scheduler 。](https://github.com/bvandenbos/resque-scheduler)您也可以使用标准的系统 cron，但每次作业运行时启动 Rails 都会产生相当大的开销。我还[编写了一个分布式调度程序 gem](https://github.com/flippa/allora)（即可以在多台机器上运行的 cron，但就像它只在一台机器上运行一样），它在后台使用 Redis。

# nosql - Cassandra 超级列族模式创建

> ID：10662125
> 
> 赞同：4
> 
> 时间：2012-05-19T03:43:10.903
> 
> 标签：nosql, cassandra, time-series

我正在尝试创建一个超级列族，它将复制这样的结构。

```
{ 'hd':
    '2008/12/12 10:03': { metric1: 'blah', metric2: 'blah'}
    '2008/12/2 9:03': { metric1: 'blah', metric2: 'blah'}
   'cpu':
    '2008/12/12 10:03': { metric1: 'blah', metric2: 'blah'}
    '2008/12/2 9:03': { metric1: 'blah', metric2: 'blah'}
} 
```

我目前的尝试如下所示：

```
create column family Timestep
with column_type = 'Super'
and comparator = 'AsciiType'
and subcomparator = 'DateType'
and default_validation_class = 'DoubleType'
and key_validation_class = 'AsciiType'
and column_metadata = [
    {column_name : metric1, validation_class : DoubleType}
    {column_name : metric2, validation_class : DoubleType}
]; 
```

但是，如果我尝试在 cassandra-cli 中运行上述内容：

```
java.lang.RuntimeException: org.apache.cassandra.db.marshal.MarshalException: unable to coerce 'open' to a  formatted date (long) 
```

也许我不理解什么是超级列族，但任何帮助都会很棒。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-19T17:37:05.580

*强烈*建议您不要使用超级柱，尤其是在新设计中。它们从来都不是没有问题的，现在它们已被弃用，并且更有能力被复合键取代。

您的数据可以在 CQL 3 中像这样很好地表示，例如：

```
CREATE TABLE Timestep (
    hardware ascii,
    when timestamp,
    metric1 double,
    metric2 double,
    PRIMARY KEY (hardware, when)
); 
```

或者，根据您的期望，使用以下方法可能更有意义：

```
CREATE TABLE Timestep (
    hardware ascii,
    metricname ascii,
    when timestamp,
    value double,
    PRIMARY KEY (hardware, metricname, when)
) WITH COMPACT STORAGE; 
```

有关这些如何在 Cassandra 中转换为存储引擎范围的行的更多信息，请参阅[本文](http://www.datastax.com/dev/blog/schema-in-cassandra-1-1)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-20T07:56:57.370

我可以知道您使用的是哪个 API 吗？如果是赫克托，那我可能会帮助你。但我个人建议你不要使用超级列，因为从超级列中获取子列列表是一件令人头疼的事情。此外，还有很多与性能相关的问题。此外，超级列正在被弃用。所以最好使用复合键。

# python - 如何从 Python 中的外部类更改内部类中的字段？

> ID：10662129
> 
> 赞同：0
> 
> 时间：2012-05-19T03:45:01.183
> 
> 标签：python, django, oop

假设我有一个像

```
class SomeModel(BaseModel):
    class Meta:
        # foo = ('one', 'two') # I want to modify this.

    def __init__(self, some_arg, *args, **kwargs)
        super(SomeModel, self).__init__(*args, **kwargs)

        # From here I want to somehow set SomeModel.Meta.foo to some_arg 
```

我创建了一个实例，`SomeModel(some_arg=('one', 'two'))`我想修改`SomeModel.Meta.foo`为`('one', 'two')`.

如果有人想知道我为什么要这样做，这是我目前在 Django 中遇到的一个[问题](https://stackoverflow.com/questions/10660994/how-do-i-set-fields-in-modelform-externally-in-django)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T03:54:34.707

在 Django 中，`Meta`一旦创建模型，内部类就不再存在，因为元类将其剥离。您将需要找到另一种方法来执行此操作。

# visual-studio-2010 - 无法安装 .NET Framework 3.5

> ID：10662131
> 
> 赞同：8
> 
> 时间：2012-05-19T03:45:22.700
> 
> 标签：visual-studio-2010, visual-studio-2008, windows-7, .net-3.5

我已经安装了 Microsoft Visual Studio 2008 SP1 和 VS 2010 SP1。我正在使用 Windows 7。

然后，我在控制面板中的已安装程序中注意到只有以下是已安装的 .NET Framework：

*   Microsoft .NET Compact Framework 2.0 SP2
*   Microsoft .NET 紧凑型框架 3.5
*   Microsoft .NET Framework 4 客户端配置文件
*   Microsoft .NET Framework 4 扩展。

由于某些原因，当我为 Visual Studio 2008 安装 PowerCommands 时，它说我需要安装 .NET Framework 3.5。

当我尝试使用 dotnetfx35.exe 时，它​​只是解压缩安装程序，但不会继续安装过程。

这仅仅是因为我使用的是 Windows 7 吗？或者是否有设置 .NET Framework 3.5 的正确方法？

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-03-17T16:23:43.527

较新的操作系统（Windows 7+ afaik）不（不能）使用 .NET 3.5 框架的安装文件。此外，3.5 框架不一定显示在添加/删除程序中。相反，您“打开”该功能。另一个细节是 .NET 3.5 包括 3.0 和 2.0 框架。换句话说，.NET 框架 3.0 和 2.0 不需要单独安装。

要在 Windows Server 2008 R2 中“添加”/验证 .NET 3.5 的安装：

> 转到控制面板>程序>打开或关闭Windows功能>角色>添加角色服务（右侧的小按钮）>确保选中“.NET Framework 3.5.1”>单击“下一步”，直到您可以单击“安装”。

该过程在 Windows 7 中应该类似。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T08:13:12.967

即使您已经为某些应用程序安装了 DOTNET 4.0 版本，您也需要 3.5 .net 框架。

只需从这里下载并安装 DOT NET 3.5 SP1（不仅仅是 3.5）[1 这里](http://www.microsoft.com/en-us/download/details.aspx?id=22)

（注意：有关更多详细信息，请参阅[Stack Overflow - .dot 网络框架](https://stackoverflow.com/questions/2642301/do-you-need-both-net-3-5-and-4-0-installed-or-just-net-4)！）

# django - django 中的 Jinja globals - 使用棺材

> ID：10662135
> 
> 赞同：1
> 
> 时间：2012-05-19T03:47:11.170
> 
> 标签：django, global-variables, jinja2

我有一些我想从我的模板中访问的辅助函数，但无法访问这些函数。将 Jinja2 与 Coffin 一起使用（这很好，除了我似乎无法访问我的全局函数）。

我在 jinja.py 中注册我的对象

```
from coffin.template import Library
register = Library()

@register.object(name='tester')
def tester():
    return 'TESTING YAA!!'

print (register.jinja2_globals) 
```

我的模板 tester.html 如下所示：

```
{{  tester() }} 
```

但这就是发生的事情：

```
>>> from apps import jinja
{'tester': <function tester at 0x3133938>}
>>> jinja.tester()
'TESTING YAA!!' 
```

导入工作正常，函数注册正确，但无法使用 render_to_response 或 render_to_string 访问：

```
>>> from coffin.template.loader import render_to_string as rts
>>> rts('tester.html')
Traceback (most recent call last):
  File "<console>", line 1, in <module>
  File "/pydev/drew/iame/lib/python2.6/site-packages/Coffin-0.3.7.dev-py2.6.egg/coffin/template/loader.py", line 55, in render_to_string
    return template.render(context_instance)
  File "/pydev/drew/iame/lib/python2.6/site-packages/Coffin-0.3.7.dev-py2.6.egg/coffin/template/__init__.py", line 56, in render
    return super(Template, self).render(**context)
  File "/pydev/drew/iame/lib/python2.6/site-packages/jinja2/environment.py", line 894, in render
    return self.environment.handle_exception(exc_info, True)
  File "/pydev/drew/iame/iame_cms/apps/templates/tester.html", line 1, in top-level template code
    {{  tester() }}
UndefinedError: 'tester' is undefined 
```

但在我的模板中无法访问:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T11:53:28.477

要加载您的库，它必须位于标准位置，即 Django 期望此类库的位置：

[https://docs.djangoproject.com/en/dev/howto/custom-template-tags/#code-layout](https://docs.djangoproject.com/en/dev/howto/custom-template-tags/#code-layout)

即，类似`my_app/templatetags/customlib.py`.

# javascript - 如何将文件从 iOS 上传到我的网站？

> ID：10662137
> 
> 赞同：1
> 
> 时间：2012-05-19T03:47:20.540
> 
> 标签：javascript, ios, upload, web, zk

我有一个网站，使用他们所在操作系统的“选择文件”界面从用户那里接收文件。这适用于 Windows、Mac 和 Linux，但不适用于 iOS。当我单击应该加载界面的按钮时，没有任何反应。我想我必须以特定的方式为 iOS 做这件事。我们正在使用 ZK 框架来开发网站，但是如果您知道如何以其他方式进行上传，请告诉我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-04T09:58:46.613

在 iOS 5.X 之前，无法通过 html 输入标签上传文件。您必须创建一个基于 PhoneGap/Cordova 的本机应用程序才能创建要上传的图像/视频。但这需要付出很大的努力。您绝对应该考虑以下选项：

自 iOS 6.0 版以来，Apple 增加了对输入类型文件元素的支持。在此处查看更多详细信息：[http ://www.mobilexweb.com/blog/iphone-5-ios-6-html5-developers](http://www.mobilexweb.com/blog/iphone-5-ios-6-html5-developers)

这种方式似乎很合适，因为现在 iOS 6 的采用率非常高（接近 80%）：[http ://david-smith.org/iosversionstats/](http://david-smith.org/iosversionstats/)

# java - 如何在 Java OWLAPI 中实现这个类表达式？

> ID：10662145
> 
> 赞同：4
> 
> 时间：2012-05-19T03:48:23.387
> 
> 标签：java, ontology, owl

这是一个用于演示应用程序的类表达式示例：

```
Lecturer
and (hasResearch some (relatedTo some Semantic_Web))
and (teaches at-least 3 Course)
and (hasTitle value "Assist.Prof.") 
```

我通过这些方法创建 OWLAPI 对象（从字符串创建 OWL 对象）。

```
 OWLClass lecturer = m.createOWLClassFromString("Lecturer");
 OWLObjectProperty hasResearch = m.createOWLObjectPropertyFromString("hasResearch");
 OWLObjectProperty teaches = m.createOWLObjectPropertyFromString("teaches");
 OWLNamedIndividual sWeb = m.createOWLNamedIndividualFromString("Semantic_Web");
 OWLClass course = m.createOWLClassFromString("Course");
 OWLDataProperty hasTitle = m.createOWLDataPropertyFromString("hasTitle"); 
```

如何在 Java 上实现该类表达式？

[编辑 #1] 我得到了实现：

```
OWLClass lecturer = m.createOWLClassFromString("Lecturer");
        OWLObjectProperty hasResearch = m.createOWLObjectPropertyFromString("hasResearch");
        OWLObjectProperty isRelatedToResearch = m.createOWLObjectPropertyFromString("isRelatedToResearch");
        OWLObjectProperty teaches = m.createOWLObjectPropertyFromString("teaches");
        OWLNamedIndividual sWeb = m.createOWLIndividualFromString("Semantic_Web");
        OWLClass course = m.createOWLClassFromString("Course");
        OWLClass researchArea = m.createOWLClassFromString("ResearchArea");
        OWLDataProperty hasTitle = m.createOWLDataPropertyFromString("hasTitle");
        OWLDatatype dt = m.getDataFactory().getRDFPlainLiteral();
        OWLLiteral asstprof = m.getDataFactory().getOWLLiteral("Asst. Prof. Dr.",dt);

        OWLClassExpression relateToSomeResearchArea = df.getOWLObjectSomeValuesFrom(isRelatedToResearch, researchArea);
        OWLClassExpression hasResearchRelateToSomeResearchArea = df.getOWLObjectSomeValuesFrom(hasResearch,relateToSomeResearchArea);
        OWLClassExpression teachesAtLeastThreeCourse = df.getOWLObjectMinCardinality(3, teaches, course);
        OWLClassExpression hasTitleAsstProf = df.getOWLDataHasValue(hasTitle, asstprof);

        Set s1 = new HashSet();
        s1.add(lecturer);
        s1.add(hasResearchRelateToSomeResearchArea);
        s1.add(teachesAtLeastThreeCourse);
        s1.add(hasTitleAsstProf);

        OWLObjectIntersectionOf iof = df.getOWLObjectIntersectionOf(s1);

        System.out.println(iof.getNestedClassExpressions()); 
```

# css - 带有 if 的 knockout.js 数据绑定循环

> ID：10662156
> 
> 赞同：0
> 
> 时间：2012-05-19T03:51:17.220
> 
> 标签：css, foreach, knockout.js

是否有使用 knockout.js 和/或 CSS 的最佳实践来防止在 foreach 循环中创建的额外 div 在浏览器中显示其额外的空白高度？

来源：

```
<div data-bind="foreach: jobs" >
  <div data-bind="if: JobPhase.Id() == 3">
    <div data-bind="text: JobPhase.Id"></div>                            
  </div>
</div> 
```

结果：

```
<div data-bind="if: JobPhase.Id() == 3"></div>
<div data-bind="if: JobPhase.Id() == 3"></div>
<div data-bind="if: JobPhase.Id() == 3"></div>
<div data-bind="if: JobPhase.Id() == 3">
  //This one matched so it will display the content.
</div> 
```

前三个项目不匹配，但我仍然看到它们的空白。想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T12:26:22.320

在您的解决方案中，div 将被渲染，并将被渲染为空，这不是一个很好的做法。您应该使用另一个**“if”**语句。就像在[***示例***](http://jsfiddle.net/dmitry_zaets/r9jpN/)中一样。

```
<div data-bind="foreach: jobs" >  
  <!-- ko if: Id == 3 -->  
    <div data-bind="text: Id"></div>                         
  <!-- /ko-->
</div> 
```

因此，您将能够仅在需要时创建 div 块，而不是一直创建它们。

# php - 输出html而不是图像的代码？

> ID：10662159
> 
> 赞同：0
> 
> 时间：2012-05-19T03:51:36.250
> 
> 标签：php, wordpress

这是我所指的代码：

```
<?php if ( is_archive() ) { echo '<img src="'.bloginfo('template_url').'/images/test.png" />'; }?> 
```

这是代码输出的内容：`http://site.com/wp-content/themes/themename`

我希望它在代码中输出实际图像。我忽略了其中的哪一部分？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T04:01:34.257

`bloginfo()`不输出字符串。它直接将其回显到输出流。所以，代码应该是：

```
<?php if ( is_archive() ) { ?>
   <img src="<?php bloginfo('template_url'); ?>/images/test.png" />'; 
<?php  }  ?> 
```

否则，您可以使用`get_bloginfo()`：

```
<?php if ( is_archive() ) { echo '<img src="'.get_bloginfo('template_url').'/images/test.png" />'; }?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T03:58:01.027

你有没有试过这个：

```
$template_url = get_bloginfo('template_url');

<?php if ( is_archive() ) { echo '<img src="'.$template_url.'/images/test.png" />'; } ?> 
```

# ajax - $newElems.imagesLoaded 不是函数当我在 Masonry 中使用灯箱时

> ID：10662160
> 
> 赞同：1
> 
> 时间：2012-05-19T03:51:40.470
> 
> 标签：ajax, fancybox, jquery-masonry, infinite-scroll

我正在制作一个像 pinterest 这样的音乐分享网站。

我使用 Masonry 来制作网格布局和 Infinite-Scroll 加载下一页。当我单击音乐专辑时，它会弹出一个灯箱（使用 fancybox）并使用 ajax 加载一些信息。

在第一页上，一切正常。但是当我点击一个音乐专辑，关闭它并向下滚动页面后，新加载的部分有这个问题：`$newElems.imagesLoaded is not a function`

我不知道如何解决这个问题。

任何帮助将不胜感激！

这是我的代码：

```
var $container = $('#container');
// masonry init
$container.imagesLoaded(function(){
  $container.masonry({
    itemSelector: '.item',
    columnWidth: 100
  });
});
// ancybox fancybox
function init(){
    $("a.inline").fancybox({ 

         'transitionIn' : 'fade',
                 'transitionOut' : 'none',
                 'speedOut' : 0,
                 'hideOnOverlayClick': true,
                 'hideOnContentClick': false,
                 'overlayColor' : '#FFF',
                 'overlayOpacity' : 0.5,
                 'showCloseButton' : true,
                 'showNavArrows' : false
         });
}

init();

$container.infinitescroll({
  // infinitescroll init
  navSelector  : '#page-nav',    
  nextSelector : '#page-nav a',  
  itemSelector : '.item',    
  loading: {
      finishedMsg: 'No more pages to load.',
      img: 'http://i.imgur.com/6RMhx.gif'
    }
  },
  // infinitescroll callback
  function( newElements ) {
    var $newElems = $( newElements ).css({ opacity: 0 });
    $newElems.imagesLoaded(function(){
      $newElems.animate({ opacity: 1 });
      $container.masonry( 'appended', $newElems, {
       isAnimated: false
       }, function () {
          // for new loaded part
              init();
         });

    });
  }
); 
```

# iphone - 十六进制数的整数值作为 NSString

> ID：10662163
> 
> 赞同：0
> 
> 时间：2012-05-19T03:52:25.353
> 
> 标签：iphone, xcode

> **可能重复：**
> [Objective C 将十六进制字符串解析为整数](https://stackoverflow.com/questions/3648411/objective-c-parse-hex-string-to-integer)

我需要表示十六进制数的 NSString 的整数值。例如，如何获取 NSString @"A" 的 int 值 (10)？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-19T04:16:44.990

```
{
  int value;
  [[NSScanner scannerWithString @"A"] scanHexInt: &value];
  // use value here
} 
```

那将是最简单的代码。方法 scanHexInt 返回一个 Bool 指示您想要处理的成功。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T04:02:35.687

您可以使用`sscanf`带有`%`格式说明符的 将其解析为十六进制整数：

```
NSString *str = @"A";
...
int value;
if (sscanf([str UTF8String], "%x", &value) == 1)
{
    // Parsing succeeded
}
else
{
    // Parsing failed, handle error
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-19T04:15:03.023

你必须对 NSStrings 小心一点，因为它们可以包含 Unicode 字符。确保逐个字符地遍历字符串，并确保每个字符都是有效的十六进制文字，即集合 0-9,af,AF 中的一个字符。

完成之后（您可以使用 NSString 方法 characterAtIndex: 查看单个字符），然后使用 ASCII / UTF-8 标准按顺序排列数字和字母对您有利的事实是一件相当容易的事情。

具体来说，从数字字符“0”中减去的任何数字字符都将返回其整数值。同样，如果从 'a'-'f' 中减去 'a'，或从 'A'-'F' 中减去 'A'，然后加 10，则得到十六进制字符的整数版本 (10-15)。

```
unichar a = [@"A" characterAtIndex: 0];

if ( a >= '0' && a <= '9' ) a -= '0';
else if ( a >= 'a' && a <= 'z' ) a = ( a - 'a' ) + 10;
else if ( a >= 'A' && a <= 'Z' ) a = ( a - 'A' ) + 10;
else { /* error, raise exception or whatever */ };

// now a == 10 (0x0A) 
```

# jquery - 可调整大小的Jquery布局不起作用

> ID：10662167
> 
> 赞同：6
> 
> 时间：2012-05-19T03:54:48.250
> 
> 标签：jquery, html, resizable, jquery-layout

我无法设置 jquery-layout 插件的选项。默认渲染正确，但选项不正确。我尝试在准备好的文档上设置可调整大小和可滑动，但是当我警告可调整大小时它返回 false。谁能发现这里出了什么问题？

js：

```
$(document).ready(function() {  
var myLayout = $('body').layout({
   west: {
   resizable: true,
   resizeWhileDragging:   true,
   slidable:              true
   }

});
alert(myLayout.options.west.resizable); //returns false
}); 
```

html:

```
<body>

<div class="ui-layout-center">Center
    <div id="board">        
    </div>  
    <button onclick="set_board();">New Game!</button>
    <button onclick="execute_turn();">Turn!</button>
</div>
<div class="ui-layout-east">East</div>
<div class="ui-layout-west">West</div>
</body> 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-03-25T08:23:09.213

当**jqueryui**也包含在内时，它对我有用，就像在[http://layout.jquery-dev.net/demos/simple.html](http://layout.jquery-dev.net/demos/simple.html)的 jquery-layout Simple 演示中一样。

确保您首先包含`jquery-ui`，然后`jquery.layout`，否则它将不起作用。

例子：

```
<script src="lib/jquery/jquery-ui-1.10.4.js"></script>
<script src="lib/jquery/jquery.layout-1.3.0-rc30.79.js"></script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-12-10T15:39:36.593

# Webpack 用户的 2018 年更新

正如@codeless 提到的，您需要在布局之前加载“jquery-ui”（首先显式导入“jquery-ui”），但请确保您还加载了 jquery-ui 的“可调整大小”和“可拖动”模块

```
import 'jquery-ui/ui/widgets/resizable';
import 'jquery-ui/ui/widgets/draggable'; 
```

否则窗格调整大小将不起作用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-19T04:32:43.430

您正在初始化布局插件两次...尝试合并 myLayout 定义和初始化选项：

```
$(document).ready(function() {
var myLayout = $('body').layout({
   west: {
   resizable: true,
   resizeWhileDragging:   true,
   slidable:              true
   }

});
alert(myLayout.options.west.resizable); //returns false
}); 
```

# java - 使用 Akka 微内核的一些常见用例是什么？

> ID：10662168
> 
> 赞同：7
> 
> 时间：2012-05-19T03:55:39.133
> 
> 标签：java, scala, akka

根据 akki.io 上的文档，我没有看到 MicroKernel 解决了哪些常见用例？有没有人有一些简单的现实世界用例？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-19T11:22:22.697

Akka 微内核模块为您提供了一个非常轻量且免费的“应用程序服务器”包，因此可以轻松分发和运行您的 Akka 应用程序。

在此处阅读更多信息：http: [//doc.akka.io/docs/akka/2.0.1/modules/microkernel.html](http://doc.akka.io/docs/akka/2.0.1/modules/microkernel.html)

# css - 现在是 2012 年。我可以开始疯狂地使用 CSS3 吗？

> ID：10662170
> 
> 赞同：0
> 
> 时间：2012-05-19T03:56:02.963
> 
> 标签：css

我正在开发一个社交媒体网络，因此用户群有望成为普通乔（而不是公司）的用户群。许多可追溯到 2009 年的文章指出，由于支持有限，您不应完全依赖 CSS3。今天仍然如此吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T03:58:29.700

这取决于您要支持的浏览器。这个问题有点过于宽泛，无法直接回答，因为某些 CSS3 元素比其他元素受到更广泛的支持，这意味着您需要逐案处理。

在使用各种 CSS3 元素之前检查一些类似的网站：

[http://caniuse.com/](http://caniuse.com/)

[http://html5please.com/](http://html5please.com/)

我的总体建议是使用它！有很多令人兴奋和有趣的功能，但如果您需要支持一些旧浏览器，请注意添加优雅降级。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T04:01:45.200

“未来已经到来——只是分布不是很均匀。”

——[威廉·吉布森](http://en.wikiquote.org/wiki/William_Gibson)

答案是肯定的，不是的，这取决于。

# asp.net - ModalDialog 的返回值始终未定义

> ID：10662172
> 
> 赞同：1
> 
> 时间：2012-05-19T03:56:52.917
> 
> 标签：asp.net, modal-dialog, return-value, undefined

由于某种原因，模态对话框返回的值总是“未定义”。

我的主页（aspx）：

```
<%@ Page Title="Home Page" Language="VB" AutoEventWireup="false" CodeFile="Default.aspx.vb" Inherits="_Default" %>

<html>
<head></head>
<body>

<script type="text/javascript">

function openWindows () {
    var getval;
    getval = window.showModalDialog('../WebSite/popups/uploader.htm');
    document.getElementById("Input").value = getval;
   }
</script>

<input id="Input" runat="server" />
<input type="button" id="Button1" runat="server" onclick="openWindows()" value="Choose Image"/>
</form>
</body>
</html> 
```

所以在这种情况下，getval 的值总是“未定义”

我的对话框（HTML）代码：

```
<html>
<head>
    <script type="text/javascript">
        function ReturnValues() {
            var objfile = document.getElementById("fileup").value
            document.getElementById("TxtInput").value = objfile
            var vReturnValue = document.getElementById("TxtInput").value;
            window.ReturnValue = vReturnValue;
            window.close();
        }

    </script>
</head>
<body>
    <form id="Formuploader" method="post" runat="server">
        <input id="TxtInput" type="hidden" runat="server" /><br />
        <button id="btnSaveImage" runat="server" onclick="ReturnValues()">Save Image</button>
    </form>
    </body>
    </html> 
```

在这里， ReturnValue 确实具有所需的值。但是一旦 ModalDialog 关闭，主窗口中的 getval 变量就会变得未定义。

任何帮助是极大的赞赏。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T04:08:43.327

当你返回值时，这样做：

```
window.returnValue = vReturnValue; 
```

使用小写`returnValue`，不要`ReturnValue`。

此外，您的模式对话框没有关闭。要解决此问题，请将您的按钮更改为链接。

```
<a href="#" id="btnSaveImage" runat="server" target="_self" onclick="ReturnValue()">
        Save Image</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T04:10:21.537

试试这个：

```
window.opener.document.getElementById("Input").value = getval; 
```

# xpath - 用 yql 和 xpath 不能得到结果

> ID：10662174
> 
> 赞同：1
> 
> 时间：2012-05-19T03:57:17.110
> 
> 标签：xpath, yql

我想用 yql 获取网页的一部分。我尝试了几个查询。除一个查询外，大多数查询都可以返回正确的结果。

这是查询：

```
select * from html where url="http://www.cngold.org/img_date/livesilvercn_rmb.html" and xpath='//div[6]/div[2]/div/div[2]/table/tbody/tr[4]/td[6]' 
```

我希望得到价格，但实际上得到的是空的结果。

如果我用 yql 检索整个页面并检查该元素的 xpath，这次 xpath 是

```
//div[3]/div/div[2]/a/div/div[2]/table/tbody/tr[4]/td[6] 
```

为什么会有这么多差异？

我应该如何处理这种情况？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-07-14T14:28:19.753

YQL 无法获取动态计算的值。在这种情况下，你最好使用[phantom.js](http://phantomjs.org/)。

这个答案[https://stackoverflow.com/a/7978072/1337392](https://stackoverflow.com/a/7978072/1337392)提供了几种工具，您可以使用它们进行 HTML 报废。

希望能帮助到你！

# ruby-on-rails - 如何新登录到已安装的 linode（使用堆栈脚本）？

> ID：10662177
> 
> 赞同：0
> 
> 时间：2012-05-19T03:57:41.653
> 
> 标签：ruby-on-rails, deployment, linode

我刚开始使用 linode 并运行了[这个堆栈脚本](http://www.linode.com/stackscripts/view/?StackScriptID=4531) ，我尝试使用我指定的用户名和密码进行 ssh，但无济于事，我仍然只能使用 root 进行 ssh。有任何想法吗？

这是我的环境：Ubuntu 11.10 64bit 这是我的堆栈脚本：'Rails Enviroments with RVM, Nginx and Passenger' StackScript at revision 21741

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T06:06:59.773

Sounds like the user you specified may not have permissions to ssh into that box.

Try:

```
ssh -v your_user@your_host.com 
```

And see if that helps you understand what may be happening.

# javascript - 如何传递函数来比较项目？

> ID：10662181
> 
> 赞同：0
> 
> 时间：2012-05-19T03:58:46.723
> 
> 标签：javascript, jquery, comparison, anonymous-function, icomparer

我想将一个比较器传递给一个函数，但不确定这是否可以通过 Javascript 实现。C# 中有一个 IComparer 概念可以做到这一点。这可以用Javascript完成吗？

```
function someAction (comparer) {
    var newList = [];
        $.each(list, function (index, item) {
            if comparer on item is true then { //psuedo code
                newList.push(item);
            }
        });
}

someAction(item.PropA > 5); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-19T04:05:04.063

```
`function someAction (comparer) {
    var newList = [];
        $.each(list, function (index, item) {
            if (comparer(item)) {
                newList.push(item);
            }
        });
}
someAction(function (item) { return item.PropA > 5 });` 
```

`PS：正如@BrokenGlass 建议的那样，您可以避免重新发明轮子并使用该`filter`功能。`

 `* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T04:05:10.837

只需调用函数：

```
 if (comparer(item)) { ... } 
```

JavaScript 中对函数的所有引用都是等价的，因此任何引用都可以用来调用函数，就像可以使用任何其他引用一样。换句话说，函数是一流的对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-19T04:05:38.423

您可能正在寻找[`filter`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/filter)JavaScript 中已经存在的 ：

```
var newList = list.filter(function(item) {
  return item.PropA > 5;
}); 
````

# php - Javascript 变量中的 PHP 数组 - JS 元素

> ID：10662191
> 
> 赞同：-1
> 
> 时间：2012-05-19T04:02:01.243
> 
> 标签：php, javascript

我有一个 Javascript 变量，我正在为其设置一个 PHP 变量。

```
function cancel(number) {
    var message = "<?= $message[" + number + "]; ?>";
} 
```

$message 是一个数组。“数字”是我要设置消息的数组元素。基本上，我想使用 Javascript 变量作为元素选择器将 Javascript 变量设置为 PHP 变量。因此，如果“数字”为 2，它将选择：

```
$message[2]; 
```

但是，上述方法不起作用，我什至不确定这是否可能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T04:03:21.840

它不是。使用 XHR 从服务器检索值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-19T04:06:06.947

这似乎根本不可能；PHP 在服务器端进行评估，javascript 在客户端进行评估。因此 PHP 会将其视为`$message["+number+"]`，并尝试在 的索引处查找值`"+number+"`。您可能必须执行 AJAX 请求之类的操作才能获取您要查找的数据。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-19T04:04:57.857

你正在做的事情是不可能的；由于php是服务端语言，所以先执行，后执行js；没有任何方法可以控制先执行哪个。您必须使用 AJAX 检索变量。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-19T04:05:17.607

使用这种方法您根本无法做到这一点。PHP 是服务器端代码，意味着它运行在服务器上，而 JavaScript 是客户端代码，意味着它运行在客户端或您的浏览器上。

一旦 PHP 运行，它会生成一个 HTML 文档并将该文档作为响应发送给浏览器。一旦完成，您可以将数据返回到服务器的唯一方法是通过表单 POST 发送、通过 AJAX 发送或通过脚本标记远程发送。

考虑查看 Internet 上的一些示例，了解如何通过表单和 AJAX 将数据 POST 回服务器。很明显，您正在为如何正确构建程序的一些概念而苦苦挣扎，查看一些示例将是您学习和掌握这些技术的好方法。

*   [PHP 提交表单示例](http://www.tizag.com/phpT/examples/formvar.php)
*   [PHP 教程](http://php.net/manual/en/tutorial.php)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-19T04:07:33.703

像这样的东西会起作用：

```
<script type="text/javascript">
var messages = <?= json_encode($message) ?>;

function cancel(number) {
    var message = messages[number];
}
</script> 
```

当然，这会在 JavaScript 源代码中输出整个数组。如果它很大，那么最好使用 AJAX。

提示：如果您“查看源代码”，那么您的方法为什么不起作用应该是非常明显的。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-05-19T04:05:14.610

您需要使用 AJAX 调用来解决您的问题。

# asp.net-mvc - 我应该让 MVC 处理我的网站图标请求吗？

> ID：10662199
> 
> 赞同：4
> 
> 时间：2012-05-19T04:04:12.370
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我应该这样做：

```
 // Best practice to avoid MVC handling the favicon request
  routes.IgnoreRoute("{*favicon}", new { favicon = @"(.*/)?favicon.ico(/.*)?" }); 
```

或这个：

```
[OutputCache(Duration = 3600, Location = OutputCacheLocation.Client)] 
public ActionResult Favicon() {     
   var icon = Server.MapPath("~/content/ico/favicon.ico");     
   return File(icon, "image/x-icon"); 
} 

and 

<link rel="shortcut icon" 
   type="image/x-icon" 
   href="@Url.Action("Favicon", "SomeController")" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T04:10:03.737

我看不出有任何理由在这里使用所有控制器、动作、路由、actionResult 的东西。第一个选项更简单。

# actionscript-3 - 让 flex 编译器警告同名变量失去作用域

> ID：10662200
> 
> 赞同：1
> 
> 时间：2012-05-19T04:04:14.293
> 
> 标签：actionscript-3, apache-flex, warnings

想象一下，你有一个带有成员变量的类

```
private var radius:Number; 
```

然后在一个方法中创建一个同名的局部变量

```
private function func():void{
    var radius:Number = 5;
} 
```

我可以让 Flex 编译器警告我这种情况吗？我实际上可能想使用成员变量而不是我刚刚定义的这个局部变量？

编辑：我猜 flex 编译器不能这样做。制作 as3 lint 工具会很难做到这一点吗？我的意思是，我会编码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T12:43:10.043

您可以在以下位置的 Flex SDK 的 flex-config.xml 文件中找到编译器警告列表：

```
frameworks/flex-config.xml 
```

在 Flex SDK 4.6 中，flex-config.xml 中没有列出满足您要求的警告。

查看Adob​​e 帮助文档中的查看警告和错误，了解有关 Flex 编译器警告的更多信息[。](http://help.adobe.com/en_US/flex/using/WS2db454920e96a9e51e63e3d11c0bf67670-7fd5.html#WS2db454920e96a9e51e63e3d11c0bf69084-7eaf)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T16:12:01.733

FlexPMD 已经这样做了。

> 这个局部变量隐藏了一个类属性

在 FlashDevelop 中，它被称为“分析项目源代码”，问题是，它有太多的错误警报，或者不是很重要的警告，以至于这个问题可能会被忽视。

您可以通过编辑位于 Program Files/FlashDevelop/Tools/flexpmd 中的文件 default-ruleset.xml（或者您可以创建另一个并在 Program Settings -> Code Analyzer 上进行设置）来自定义此规则集。

此外，为了让事情变得更容易，您可以在 Tools -> Keyboard Shortcuts -> FlashToolsMenu.AnalyzeProject 中创建快捷方式

# c++ - 无法访问 C++ std::set 中对象的非常量成员函数

> ID：10662206
> 
> 赞同：2
> 
> 时间：2012-05-19T04:05:14.830
> 
> 标签：c++, stl, iterator, set, constants

Message是我做的一门课。我在传递给 messageTimeOut （和其他一些函数）的主函数中有一组它们。在使用 itorator 的 messageTimeOut 中，我遍历它们并访问不同的成员函数。但是，我只能访问迭代器指向的 Message 的 const 成员函数。如果我尝试访问非 const 成员函数，则会收到错误消息：

> “在函数‘void messageTimeOut(threadParameters*)’中：main.cpp:74:33：错误：将‘const Message’作为‘void Message::setTimedOut(bool)’的‘this’参数传递会丢弃限定符[-fpermissive]。 ”</p>

我无法访问 const Message 对象的非 const 成员函数是有道理的，但我如何才能使它成为非 const Message 对象，以便我可以访问非 const 成员函数并更改 Message？谢谢

我的部分代码：

```
 [ . . . ]

void messageTimeOut( threadParameters* params )
{
     set<Message>::iterator it = params->messages->begin();
     [ . . . ]
    for ( ; it != params->messages->end(); ++it )
    {
        if ( (it->createdTime() + RESPONSE_WAIT) < GetTickCount() ) 
        {
            it->setTimedOut(true); // error 
        }
    }
    ReleaseMutex(sentQueueMutex);
}

     [ . . . ]

int main()
{
    threadParameters rmparameters;
    set<Message> sentMessages;
     [ . . . ]

    rmparameters.logFile = &logFile;
    rmparameters.socket = socketDesciptor;
    rmparameters.messages = &sentMessages;
      [ . . . ]

    messageTimeOut( rmparameters );
      [ . . . ]

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-19T04:18:44.387

你不能。

std::set 中的元素始终是常量，因为否则用户可以通过修改属于该集合的元素来修改集合中的顺序。

请注意，您调用的函数不会更改顺序并不重要，因为 std::set 无法检查这一点。

解决此问题的常用方法是从集合中删除元素，对其进行修改，然后重新插入。另一种方法是使用地图，即使这可能会迫使您复制一些数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T04:17:34.770

您不应该能够修改 std::set 的内容。这是一个简化的测试用例：

```
#include <set>
#include <iostream>

void print(int & data) {}

int main() {
    std::set<int> objects;

    objects.insert(3);
    print(*objects.find(3));
} 
```

Clang 会报告以下错误：

```
blah.cc:14:2: error: no matching function for call to 'print'
        print(*objects.find(3));
        ^~~~~
blah.cc:4:6: note: candidate function not viable: 1st argument ('const int') would lose const qualifier
void print(int & data) {
     ^ 
```

因此，看起来使用集合并不是在这里做出的正确决定。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T12:45:14.560

集合中的对象是 const 意味着它们是不可变的。这里有一些选项

```
1) Create copies of the messages in a new set
2) Remove the messages, mutate them, and put them back.
3) Remove the "timeout" field from the message. 
```

其中我更喜欢数字 3。您试图改变消息的事实是“不良代码气味”。如果您要避免所有数据更改，而是创建一个新结构（例如 std::map），那么您可以减少线程同步的数量。

# windows - Perl 代码检查我所有当前在 Windows 上运行的应用程序

> ID：10662207
> 
> 赞同：1
> 
> 时间：2012-05-19T04:05:15.850
> 
> 标签：windows, perl, server-side, perl-module

我正在学习 perl 编程语言。我正在寻找一个代码或一个想法来检查我所有当前正在运行的应用程序。这应该为 Windows 应用程序实现。它也可以是 shell 脚本，但只需要跟踪 Windows 应用程序。

请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T01:23:11.137

If you want a list of running applications (like the Applications tab in the Task Manager), you want to enumerate the open windows, rather than look at processes.

I was able to make this work with ActivePerl 5.12 (x64). First I installed Win32::GuiTest (`ppm install Win32::GuiTest`).

```
use Win32::GuiTest qw/:FUNC/;
use strict;
use warnings;

my @windowlist = FindWindowLike(undef, undef, undef, undef, 1);

foreach my $whandle (@windowlist)
{
    if (IsWindowVisible($whandle))
    {
        my $wintitle = GetWindowText($whandle);
        my $winclass = GetClassName($whandle);
        unless($wintitle eq "" || ($wintitle eq "Program Manager" && $winclass eq "Progman"))
        {
            print GetWindowText($whandle)."\n";
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T14:45:34.347

像 MS-DOS 中的任务列表这样的东西**[有用](http://technet.microsoft.com/en-us/library/bb491010.aspx)**吗？

它基本上吐出 Windows 任务管理器的“进程”选项卡。您可以使用`tasklist`' 的内置过滤，或者如果您真的想使用 perl，您可以将输出通过管道传输到 perl 脚本。

# c# - 无法在 EMGU CV 中绘制 SharpGL（openGL 包装器）对象

> ID：10662209
> 
> 赞同：0
> 
> 时间：2012-05-19T04:05:17.757
> 
> 标签：c#, opengl, emgucv

我一直在使用 emgu cv(opencv wrapper 从网络摄像头捕获图像并使用它的功能来处理这些图像。我还检测手并跟踪手的运动......

现在，我需要根据手的位置来绘制一种地球或者只是一个物体，sharpGL非常适合透视变换等。我的问题是我无法做到这一点。

我不知道该怎么对sharpGL说“你这个家伙，在这个手部跟踪窗口内画那个对象”我想做的事不可能吗？我很绝望......任何帮助都会很棒。提前致谢

如果您仍然对我的意思感到困惑，请观看此视频 (http://www.youtube.com/watch?v=ccL4t36sVvg)

到目前为止，我刚刚将这段代码[http://blog.damiles.com/2008/10/opencv-opengl/](http://blog.damiles.com/2008/10/opencv-opengl/)翻译成 C#

这是代码片段

```
private void openGLControl_OpenGLInitialized(object sender, EventArgs e)
        {
            //  TODO: Initialise OpenGL here.

            //  The texture identifier.
            uint[] textures = new uint[1];

            //  Get the OpenGL object.
            OpenGL gl = openGLControl1.OpenGL;

            //texture.Create(gl);

            //  Get one texture id, and stick it into the textures array.
            gl.GenTextures(1, textures);

            //  Bind the texture.
            gl.BindTexture(OpenGL.GL_TEXTURE_2D, textures[0]);

            //  A bit of extra initialisation here, we have to enable textures.
            gl.Enable(OpenGL.GL_TEXTURE_2D);

            //  Specify linear filtering.
            gl.TexParameter(OpenGL.GL_TEXTURE_2D, OpenGL.GL_TEXTURE_MIN_FILTER, OpenGL.GL_NEAREST);
            gl.TexParameter(OpenGL.GL_TEXTURE_2D, OpenGL.GL_TEXTURE_MAG_FILTER, OpenGL.GL_NEAREST);

            gl.PixelStore(OpenGL.GL_UNPACK_ALIGNMENT, 1);

            //  Set the clear color.
            gl.ClearColor(1.0f, 1.0f, 1.0f, 1.0f);
        }

private void openGLControl_Resized(object sender, EventArgs e)
        {
            //  TODO: Set the projection matrix here.

            //  Get the OpenGL object.
            OpenGL gl = openGLControl1.OpenGL;
            //  Set the projection matrix.
            gl.MatrixMode(OpenGL.GL_PROJECTION);

            //  Load the identity.
            gl.LoadIdentity();

            //  Create a perspective transformation.
            gl.Perspective(60.0f, (double)Width / (double)Height, 0.01, 100.0);

            //  Use the 'look at' helper function to position and aim the camera.
            gl.LookAt(-5, 5, -5, 0, 0, 0, 0, 1, 0);

            //  Set the modelview matrix.
            gl.MatrixMode(OpenGL.GL_MODELVIEW);
        } 
```

最后绘制一个 3D 对象

```
private void openGLControl_OpenGLDraw(object sender, PaintEventArgs e)
        {
            //  Get the OpenGL object.
            OpenGL gl = openGLControl1.OpenGL;

            if (capture == null)
            {
                this.start_capture();
            }

            if (capture != null)
            {
                Image<Bgr, Byte> ImageFrame = capture.QueryFrame();

                //I'm trying to use some algorithm using the code from sample (sharpGLTextureExample)
                //first, I make an Bitmap object that I take from queryframe(convert it to bitmap first)
                Bitmap image = new Bitmap(ImageFrame.ToBitmap());

                //  Clear the color and depth buffer.
                gl.Clear(OpenGL.GL_COLOR_BUFFER_BIT | OpenGL.GL_DEPTH_BUFFER_BIT);
                //ImageFrame.Draw(new Rectangle(2, 2, 2, 2), new Bgr(Color.Aqua), 2);

                //  Load the identity matrix.
                gl.LoadIdentity();

                //then, Lock the image bits (so that we can pass them to OGL).
                BitmapData bitmapData = image.LockBits(new Rectangle(0, 0, image.Width, image.Height),
                ImageLockMode.ReadOnly, PixelFormat.Format32bppArgb);

                gl.BindTexture(OpenGL.GL_TEXTURE_2D, textures[0]);
                //gl.TexImage2D(OpenGL.GL_TEXTURE_2D, 0, (int)OpenGL.GL_RGBA, ImageFrame.Width, ImageFrame.Height, 0, OpenGL.GL_RGBA, OpenGL.GL_UNSIGNED_BYTE, ImageFrame);
                gl.TexImage2D(OpenGL.GL_TEXTURE_2D, 0, (int)OpenGL.GL_RGBA, ImageFrame.Width, ImageFrame.Height, 0, OpenGL.GL_RGBA, OpenGL.GL_UNSIGNED_BYTE, bitmapData.Scan0);

                //gl.Begin(OpenGL.GL_QUADS);

                //gl.TexCoord(0, 0); gl.Vertex(-1, -1, 0);
                //gl.TexCoord(1, 0); gl.Vertex(1, -1, 0);
                //gl.TexCoord(1, 5); gl.Vertex(1, 1, 0);
                //gl.TexCoord(0, 1); gl.Vertex(-1, 1, 0);
                //gl.End();

                //gl.Flush();

                //texture.Bind(gl);
                //
                //CamImageBox.Image = ImageFrame;
            }

        } 
```

但输出总是返回一个白色的，没有纹理......

我也考虑使用Texture类，但是没用..因为没有输入参数是框架的方法...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-12T23:01:34.820

根据您的代码和[http://basic4gl.wikispaces.com/2D+Drawing+in+OpenGL](http://basic4gl.wikispaces.com/2D+Drawing+in+OpenGL)的帮助，我让 SharpGL 显示来自 EmguCV 的视频

```
public partial class FormSharpGLTexturesSample : Form
{
    Capture capture;
    public FormSharpGLTexturesSample()
    {
        InitializeComponent();

        //  Get the OpenGL object, for quick access.
        SharpGL.OpenGL gl = this.openGLControl1.OpenGL;

        //  A bit of extra initialisation here, we have to enable textures.
        gl.Enable(OpenGL.GL_TEXTURE_2D);
        gl.Disable(OpenGL.GL_DEPTH_TEST);

        //  Create our texture object from a file. This creates the texture for OpenGL.

        capture = new Capture(@"Video file here");
    }

    private void openGLControl1_OpenGLDraw(object sender, RenderEventArgs e)
    {
        //  Get the OpenGL object, for quick access.
        SharpGL.OpenGL gl = this.openGLControl1.OpenGL;
        int Width = openGLControl1.Width;
        int Height = openGLControl1.Height;

        gl.Clear(OpenGL.GL_COLOR_BUFFER_BIT);
        gl.LoadIdentity();

        var frame = capture.QueryFrame();
        texture.Destroy(gl);
        texture.Create(gl, frame.Bitmap);

        //  Bind the texture.
        texture.Bind(gl);

        gl.Begin(OpenGL.GL_QUADS);

        gl.TexCoord(0.0f, 0.0f); gl.Vertex(0, 0, 0);
        gl.TexCoord(1.0f, 0.0f); gl.Vertex(Width, 0, 0);
        gl.TexCoord(1.0f, 1.0f); gl.Vertex(Width, Height, 0);
        gl.TexCoord(0.0f, 1.0f); gl.Vertex(0, Height, 0);

        gl.End();

        gl.Flush();
    }

    //  The texture identifier.
    Texture texture = new Texture();

    private void openGLControl1_Resized(object sender, EventArgs e)
    {
        SharpGL.OpenGL gl = this.openGLControl1.OpenGL;
        //  Create an orthographic projection.
        gl.MatrixMode(MatrixMode.Projection);
        gl.LoadIdentity();

        // NOTE: Basically no matter what I do, the only points I see are those at
        // the "near" surface (with z = -zNear)--in this case, I only see green points
        gl.Ortho(0, openGLControl1.Width, openGLControl1.Height, 0, 0, 1);

        //  Back to the modelview.
        gl.MatrixMode(MatrixMode.Modelview);
    }
} 
```

我希望它有所帮助。

经过一些实验，我可以使用 TexImage2D 但只有图像的宽度和高度是 2 的幂

代替：

```
var frame = capture.QueryFrame();
texture.Destroy(gl);
texture.Create(gl, frame.Bitmap); 
```

可以换成下面的block来更新图片的数据。我想知道如何消除调用 Resize 的需要。

```
var frame = capture.QueryFrame();
frame = frame.Resize(256, 256, Emgu.CV.CvEnum.INTER.CV_INTER_NN);
Bitmap Bitmap = frame.Bitmap;
BitmapData bitmapData = Bitmap.LockBits(new Rectangle(0, 0, Bitmap.Width, Bitmap.Height),
    ImageLockMode.ReadOnly, PixelFormat.Format24bppRgb);

gl.BindTexture(OpenGL.GL_TEXTURE_2D, textures[0]);
gl.TexImage2D(OpenGL.GL_TEXTURE_2D, 0, OpenGL.GL_RGBA, Bitmap.Width, Bitmap.Height, 0, OpenGL.GL_BGR, OpenGL.GL_UNSIGNED_BYTE, bitmapData.Scan0);

gl.TexParameter(OpenGL.GL_TEXTURE_2D, OpenGL.GL_TEXTURE_MIN_FILTER, OpenGL.GL_LINEAR); // Required for TexImage2D
gl.TexParameter(OpenGL.GL_TEXTURE_2D, OpenGL.GL_TEXTURE_MAG_FILTER, OpenGL.GL_LINEAR); // Required for TexImage2D 
```

# c# - 是否可以捕获用户响应 FB 事件邀请并将用户重定向到我的页面/应用程序？

> ID：10662213
> 
> 赞同：1
> 
> 时间：2012-05-19T04:05:53.713
> 
> 标签：c#, facebook, facebook-graph-api, facebook-c#-sdk

是否可以捕获用户响应 FB 事件邀请并将用户重定向到我的页面/应用程序？

我正在使用 c# 创建 FB 活动邀请。

Tnx 艾隆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T14:26:51.687

艾隆

如果用户响应来自您的应用或网站的请求，您只需添加一个 javascript 重定向。

如果用户在 facebook 中响应请求，您将无法以任何方式捕获或控制响应，除了读取图形 api 中的响应。

# ruby-on-rails - Rails：仅当模型 Y 中存在值 A 时，如何在模型 X 中输入值 A？

> ID：10662216
> 
> 赞同：3
> 
> 时间：2012-05-19T04:06:19.687
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我正在尝试构建一个注册模块，用户只有在他们的电子邮件已经在现有数据库中时才能注册。

楷模：

1.  用户
2.  老用户

用户的条件将是

```
if OldUser.find_by_email(params[:UserName]) exists, allow user registration.
If not, then indicate error message. 
```

这在 PHP 中非常简单，我可以运行一个函数来执行 mysql 查询。但是，我无法弄清楚如何在 Rails 上做到这一点。看起来我必须创建一个自定义验证器函数，但对于这样一个简单的条件似乎有点过头了。

做起来应该很简单。我错过了什么？

任何指针？

编辑1：

dku.rajkumar 的这个解决方案稍作修改即可工作：

```
validate :check_email_existence
    def check_email_existence
      errors.add(:base, "Your email does not exist in our database") if OldUser.find_by_email(self.UserName).nil?
    end 
```

对于这种情况，在模型中还是在控制器中进行验证更好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T04:11:15.467

你可以这样做

```
if OldUser.find_by_email(params[:UserName])
   User.create(params) // something like this i guess
else
   flash[:error] = "Your email id does not exist in our database."
   redirect_to appropriate_url
end 
```

**更新：**模型中的验证，因此验证将在调用时完成`User.create`

```
class User < ActiveRecord::Base

  validates :check_mail_id_presence

// other code
// other code

  private

  def check_mail_id_presence
     errors.add("Your email id does not exist in our database.") if OldUser.find_by_email(self.UserName).nil?
  end

end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T04:13:15.803

我建议从[设计](https://github.com/plataformatec/devise)开始。

见[https://github.com/plataformatec/devise](https://github.com/plataformatec/devise)

即使您有此类不寻常的需求，您通常也可以适应它。一旦你了解它，它就会非常强大、可靠且经过调试，你可以用它做各种各样的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-19T04:30:43.490

Bellow 只是用户注册相关操作的初始实现 .../app/controller/UsersController。

```
 def new
  @user = User.new
 end
 def create
  @user = User.new(params[:user])
  @old_user = User.find_by_email(user.email)
  if @old_user 
     if @user.save
      # Handle successful save
     else
     render 'new' # and render some error message telling why registration was not succeed 
     end
  else
   # render some page with some sort of error message of 'new' new users
  end
 end 

```

**更新：** 查看以下资源以获取更多信息：

*   [Ruby on Rails 教程](http://ruby.railstutorial.org/)
*   [Rails：从头开始的用户/密码验证，第 I/II 部分](http://rubysource.com/rails-userpassword-authentication-from-scratch-part-i/)

# php - 弯曲（或成角度）概率

> ID：10662218
> 
> 赞同：0
> 
> 时间：2012-05-19T04:07:27.663
> 
> 标签：php, math

在几乎任何编程语言中，如果我执行 $number = rand(1,100)，那么我创建了一个平坦概率，其中每个数字都有 1% 的机会出现。

如果我试图抽象一些奇怪的东西，比如将火箭发射到太空中，那么我想要一个弯曲（或成角度）的概率图。 **但我不想要一个“阶梯式”图表。** （重要：我不是数学书呆子，所以可能有些术语或概念我完全跳过或不知道！）虽然角度图很好。

因此，如果我想要一个给出 1 到 100 的结果的概率... 1 将是最常见的结果。2 下一个最常见的。在一条直线上直到某个点 - 假设 50，然后图表角度，并且滚动 51 的概率小于滚动 49 的概率。然后它再次在 75 处倾斜，因此得到高于 75 的结果的概率不是只是 25%，而是一个非常小的数字，具体取决于图表，可能只有 10% 或 5% 左右。

这个问题有意义吗？我特别想看看如何在 PHP 中做到这一点，但我敢打赌，所需的逻辑将是相当可移植的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T00:34:45.957

对您的问题的简短回答是，是的，这是有道理的，是的，这是可能的。

您所说的技术术语是概率密度函数。直观地说，它就是它听起来的样子：它是一个函数，它告诉您，如果您抽取随机样本，这些样本将聚集的密集程度（以及这些集群的样子）。您识别为“平面”的函数也称为均匀的密度；标准库中通常内置的另一个非常常见的分布是“正态”或高斯分布。你已经看到了，它也被称为钟形曲线分布。

但是受到一些限制，您可以拥有任何您喜欢的发行版，并且从另一个发行版构建一个相对简单。

这就是好消息。坏消息是它是数学书呆子的领域。概率密度函数背后的想法非常直观且易于理解，但使用它们的全部功能只有通过一点微积分才能解锁。例如，您的函数的限制之一是总概率必须是统一的，这与说曲线下的面积必须正好是 1 相同。在您描述的确切情况下，该函数都是直线，因此您并不严格需要微积分来帮助您解决该限制……但在一般情况下，您确实可以。

要寻找的两个好术语是“转换方法”（有几个）和“拒绝采样”。拒绝抽样背后的基本思想是你有一个可以使用的函数（在这种情况下，你的均匀分布）和一个你想要的函数。您使用均匀分布来制作一堆点 (x,y)，然后使用您想要的函数作为测试与 y 坐标来接受或拒绝 x 坐标。

但是，如果没有图片，这几乎没有任何意义，不幸的是，所有谈论这个问题的最佳方式都是基于微积分的。下面的链接有一个很好的描述和很好的插图。

[http://www.stats.bris.ac.uk/~manpw/teaching/folien2.pdf](http://www.stats.bris.ac.uk/~manpw/teaching/folien2.pdf)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T04:27:47.070

本质上，您只需要选择一个随机数，然后输入一个可能是指数的函数来选择该数字。

弄清楚您希望结果的加权程度将使您使用的公式不同。

假设 PHP 有一个随机的双精度函数，我将称它为随机的。

$num = 100 * pow(随机(), 2);

这将导致随机数自身相乘两次，并且由于它返回一个介于 0 和 1 之间的数字，因此它会变小，从而增加成为较小数字的机会。要获得准确的比例，您只需要使用这种格式即可。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-19T04:28:08.200

对我来说，您似乎需要一个[对数函数](http://en.wikipedia.org/wiki/Logarithm)（它是弯曲的）。你仍然会拉一个随机数，但你得到的值在大多数情况下会更接近 1 而不是 100。所以我想这可以工作：

```
function random_value($min=0, $max=100) {
    return log(rand($min, $max), 10) * 10;
} 
```

但是，您可能需要自己调查以确保。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-19T07:56:30.760

实现弯曲概率的最简单方法是考虑如何将游戏中的奖品分配给许多赢家和输家。为了简化您的示例，我选择了 16 个玩家和 4 个奖品。然后我制作一个带有奖品符号的数组（1,2,2,3,3,3,3,3,4,4,4,4,4,4,4）并从中随机选择一个数字大批。从数学上讲，奖品 1 = 1:16、奖品 2 为 3:16、奖品 3 为 5:16 和奖品 4 为 7:16 的概率。

# java - Riak/Java - 使用 AND 条件和排序对二级索引进行 MapReduce 查询的最佳实践

> ID：10662221
> 
> 赞同：1
> 
> 时间：2012-05-19T04:07:45.967
> 
> 标签：java, mapreduce, riak, sorted

我正在尝试使用**Java**和**Secondary Indexes在****Riak**`Map/Reduce`上实现一个功能。具体来说，我正在尝试根据特定索引键实现条件 + 排序结果。该函数将用于拥挤的桶中（以亿级存储项目的顺序**）**。******`AND`******

 ******虽然 Riak 本身并不支持`AND`条件和排序，但我想听听关于如何实现这一点的不同观点（考虑到如此大存储桶上的性能问题）。

假设我有以下数据：

```
key: key1
index-field1_bin: car
index-field2_int: 1

key: key2
index-field1_bin: car
index-field2_int: 3

key: key3
index-field1_bin: bike
index-field2_int: 4

key: key4
index-field1_bin: car
index-field2_int: 2 
```

在 Java 中，您将如何检索满足以下条件的项目：

```
index-field1_bin == car
3 <= index-field2_int <= 4 
```

然后将它们排序为`index-field2_int ASC`.

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T02:22:55.223

我可能已经找到了解决方案，但我仍然需要对其进行一些认真的基准测试。

```
IndexQuery iq = new BinValueQuery(BinIndex.named("field1"),
        "bucketName", "car");
Function mapFunction = new JSSourceFunction(
        "function(v) {" +
            "var range = v.values[0].metadata.index.field2;" +
            "if (range <= 4 && range >= 2) {" +
                "return [v.values[0]];" +
            "}" +
            "return [];" +
        "}");
Function reduceFunction = new JSSourceFunction(
        "function(v) {" +
            "return [v.sort(function(a, b) {" +
                                 "return a.metadata.index.field2 - b.metadata.index.field2;" +
                            "}" +
                     ")];" +
         "}");
MapReduceResult result = RiakUtils.getClient().mapReduce(iq)
                            .addMapPhase(mapFunction)
                            .addReducePhase(reduceFunction)
                            .execute();

// Print the results
System.out.println(result.getResultRaw()); 
```

基本上，一个查询获取所有“汽车”项目，然后我使用它们的范围（地图）过滤这些项目并通过`MapReduce`操作对它们进行排序（减少）。******

# spring - 视图中的休眠打开会话：每个请求的事务？

> ID：10662227
> 
> 赞同：13
> 
> 时间：2012-05-19T04:09:03.993
> 
> 标签：spring, hibernate, sessionfactory, open-session-in-view

我在 Tomcat 上使用 Hibernate 和 Spring。我一直在阅读和重新阅读经常指向该主题的[JBoss wiki 页面](https://community.jboss.org/wiki/OpenSessioninView)，这很有帮助。但这给我留下了一些问题。

1.  为每个请求启动事务的想法让我很困扰。我想我可以将过滤器限制为某些控制器——也许将我所有需要事务的控制器放在伪“tx”路径或其他东西下。但是，如果您不知道是否需要交易，那么使用交易不是一个坏主意吗？如果我只是在一些请求中进行读取——很可能来自缓存的读取——没有事务我不是更好吗？

2.  我已经阅读了提到他们如何在服务层处理事务的帖子，我想用 Spring 来做这件事。但是过滤器代码是什么样的呢？我仍然希望会话在我的视图中可用以进行一些延迟加载。

3.  如果我所要做的就是调用`sessionFactory.getCurrentSession()`我的过滤器，它如何“释放”回会话工厂以供重用？（即使在使用事务时，我也希望看到 a`session.close()`或其他东西。）谁告诉会话工厂该会话可以重用？

4.  也许是`beginTransaction()`在请求期间将给定数据库连接绑定到给定会话的调用？否则，会话会根据需要从池中提取数据库连接，对吗？

感谢您对我所有问题的耐心等待。

（如果你的答案是指向 Spring 文档的链接，那你只会让我哭泣。你不希望这样，是吗？如果人们不再回答与 Spring 相关的问题，我会付真金白银的。方式。）

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-05-19T11:31:43.013

您的担忧是有效的，wiki 页面上提供的解决方案过于简单。事务不应该在 Web 层进行管理 - 它应该在服务层进行处理。

正确的实现会打开一个会话并将其绑定到过滤器中的一个线程。没有交易开始。会话被置于刷新模式从不 - 只读模式。服务调用会将会话设置为自动刷新模式并启动/提交事务。一旦服务方法完成，会话刷新模式将恢复为从不。

还有一个选项可以不打开过滤器中的会话。每个服务层调用都会打开一个单独的会话和事务 - 服务调用完成后，会话不会关闭，而是注册为延迟关闭。Web 请求处理完成后，会话将关闭。

Spring 提供了[OpensessionInViewFilter](http://static.springsource.org/spring/docs/2.5.x/api/org/springframework/orm/hibernate3/support/OpenSessionInViewFilter.html)，其工作方式如上所述。所以忽略 jboss wiki 文章，只配置 OpensessionInViewFilter - 一切都会好起来的。

SessionFactory.getCurrentSession() - 在内部创建会话并将其分配给本地线程。每个请求/线程都有自己的会话。Web 请求处理完成后，会话将关闭。在您的代码中，您只需要使用 SessionFactory.getCurrentSession() 而不必关闭它。jboss wiki 页面上的代码示例是错误的——它应该在 finally 块中有一个 SessionFactory.getCurrentSession().close()。或者他们可能正在使用 JTA 事务并将休眠配置为与 JTA 事务一起打开/关闭会话。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T00:32:26.083

如果过滤器为每个请求创建一个会话，这不是问题，因为会话来自会话池，它们将被重用。从操作系统的角度来看，什么都没有发生。

事实上，休眠会话是与数据库服务器的 tcp（或套接字/管道）连接。创建 db conn 的成本很大程度上取决于 sql 类型（postgresql 在这方面非常糟糕，尽管它在任何方面都非常好）。但这并不意味着什么，因为hibernate重用了数据库连接。

简单的休眠过滤器解决方案也会为每个请求在会话上启动一个新事务。从 SQL 的角度来看，它是事务：它是一个“BEGIN”和“COMMIT”查询。它总是很昂贵，应该减少。

恕我直言，一个可能的解决方案是，如果事务仅在当前请求的第一个查询中启动。也许春天有一些有用的东西。

# java - 通过网络发送基本信息

> ID：10662228
> 
> 赞同：0
> 
> 时间：2012-05-19T04:09:14.207
> 
> 标签：java, sockets

我目前正在开发一种游戏，其中两个客户端需要与服务器程序进行通信（我正在编写客户端和服务器）。客户端需要能够发送服务器基本整数，而服务器需要发送字符串和更高级的对象。

我该怎么做呢？不幸的是，我的编程知识并不十分广泛。起初我尝试使用 Sockets，但对它们有点困惑——尤其是如何准确地从它们发送或读取信息并将其放入程序中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T09:26:49.607

我认为使用套接字对您的应用程序来说很好。我会看一下可用的 Java 套接字示例的优秀集合：

*   [客户端/服务器套接字示例](http://zerioh.tripod.com/ressources/sockets.html)
*   [Sun/Oracle 套接字通信文档](http://www.oracle.com/technetwork/java/socket-140484.html#server)
*   [Oracle 的简单回显服务器](http://docs.oracle.com/javase/tutorial/networking/sockets/readingWriting.html)
*   [简单的套接字示例](http://darksleep.com/player/SocketExample/)
*   [如何创建客户端-服务器套接字通信？](http://www.kodejava.org/examples/216.html)

我从谷歌搜索“java socket example”中得到了这些。还有很多。

如果您有更具体的问题，那么我会提出*另一个*问题，显示*简洁*的代码示例、输出和您遇到的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T04:53:29.043

套接字并不难。前段时间我写了一个 P2P 聊天应用程序，其中我使用 TCP（用于发送消息）和 UDP 套接字（用于广播、主机状态等）。

使用的数据类型非常基本（后来我将其扩展为支持图像），类似于您的需求。

您可以在 source forge 中查看项目：http: [//sourceforge.net/projects/isytok/](http://sourceforge.net/projects/isytok/)

跳过视图类，并检查网络包中的 NetworkClient 和 NetworkServer 类以启动。

祝你好运！

# .net - 在 WindowForms 中显示文本

> ID：10662230
> 
> 赞同：0
> 
> 时间：2012-05-19T04:10:02.810
> 
> 标签：.net, vb.net, winforms

我有代码将下拉列表中的值附加到文本框。但我不确定为什么这不会在文本框中显示任何类型的文本。

```
Try
    ' Add the selected text to the end of the text already in txtExpression textbox
    txtExpression.AppendText(cboOpenParen.SelectedText)
Catch ex As Exception

Finally

End Try 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T04:21:51.300

你不应该使用`.SelectedText`属性...

使用`.Text`属性....

代码：

```
Try
    ' Add the selected text to the end of the text already in txtExpression textbox
    txtExpression.AppendText(cboOpenParen.Text)
Catch ex As Exception

Finally

End Try 
```

# php - 根据键匹配过滤两个多维数组，但每个数组具有不同的结构 - 输出到新的合并数组

> ID：10662241
> 
> 赞同：0
> 
> 时间：2012-05-19T04:13:32.983
> 
> 标签：php, arrays, multidimensional-array

我试图仅提取与特定字段匹配的数组项，然后我需要将两者合并为一个仅包含我需要的数据的数组。

我有两个数组，它们的结构如下所示。只有Array #1 的 CATEGORY_ID 与 Array #2 的 Key 匹配的*product_count应该是输出。*

**Array #1：** - 许多 Array #1 CATEGORY_ID 将不存在于 Array #2 关键字段中。

```
 0 => Array (4)
      0 => 3
      CATEGORY_ID => 10
      1 => 1
      product_count => 8
    1 => Array (4)
      0 => 4
      CATEGORY_ID => 111
      1 => 6
      product_count => 109
    ... 
```

**阵列#2：**

```
 10 => Category Name 1
    110 => Category Name 2
    8 =>  Category Name 3
    109 =>  Category Name 4
    111 =>  Category Name 5
    3 =>  Category Name 6
    132 =>  Category Name 7
   ... 
```

**最终输出应该看起来像：**我可能会做错这一切，所以我愿意接受任何建议..

```
 10 =>   [0] => Category Name 1
            [1] => 8 // product_count
    111 =>  [0] => Category Name 5
            [1] => 109 // product_count
    ... 
```

我正在运行一个 foreach() 来提取每个类别的产品计数。如您所见，我的两个数组通过数据反映了这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T04:38:48.787

你必须做一个 foreach 循环，我相信：

```
$new_array = array();
foreach($array1 as $part) {
    $new_array[$part["CATEGORY_ID"]] = array( $array2[$part["CATEGORY_ID"]], $part["product_count"] );
} 
```

我想我明白了你想要什么的要点。我也不认为有一个实际的 PHP 函数可以做你想做的事。

# sql-server-2008 - SQL查询查找公共数据

> ID：10662244
> 
> 赞同：0
> 
> 时间：2012-05-19T04:14:24.883
> 
> 标签：sql-server-2008

我在 SQL Server 2008 中有一个包含 和 列的`serial, ida, idb`表`remark`。

示例数据：

```
serial   ida      idb      remark
1        3        4        null
2        3        6        null
3        3        7        null
4        2        3        null
5        4        7        null
6        4        6        null 
```

我想`idb`从`ida`3 和 4 中选择常见的。我在这里很困惑如何为此编写 SQL 查询。

一点帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T04:29:09.523

```
SELECT t1.idb
FROM mytable AS t1, mytable AS t2
WHERE t1.ida = 3 AND t2.ida = 4 AND t1.idb = t2.idb 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T04:20:19.230

```
Select idb from mytable
Where ida = 3
intersect
Select idb from mytable
Where ida = 4 
```

# javascript - HeaderTemplate 中的 CheckBox 验证 ItemTemplate CheckBox

> ID：10662245
> 
> 赞同：2
> 
> 时间：2012-05-19T04:14:55.667
> 
> 标签：javascript, asp.net, validation, gridview

问题：

如果用户选中了您在屏幕一中看到的复选框，我正在尝试验证下拉列表。

问题：

那么，如果用户从标题中选择了所有复选框，我该如何验证复选框？如您所见，屏幕两个。如果我选择所有复选框，那么我希望启动验证，如屏幕一所示。

**输出：**

**屏幕一：** ![在此处输入图像描述](../Images/fb244e4589bbc55181ae18dc1cc6e563.png)

**屏幕 2**

![在此处输入图像描述](../Images/cfa8b4cb513106b6b92c2fe9e862fe2f.png)

**//aspx**

```
<asp:GridView ID="gv" runat="server" AutoGenerateColumns="False" DataKeyNames="Id"
    OnRowDataBound="gv_RowDataBound">
    <Columns>
        <asp:BoundField DataField="ID" ControlStyle-Width="250px" HeaderText="ID" SortExpression="ID" />
        <asp:BoundField DataField="FirstName" ControlStyle-Width="250px" HeaderText="FirstName"
            SortExpression="FirstName" />
        <asp:BoundField DataField="LastName" ControlStyle-Width="250px" HeaderText="LastName"
            SortExpression="LastName" />
        <asp:TemplateField  HeaderText="Reject">
         <HeaderTemplate >
            Reject<br />
            <asp:CheckBox ID="checkboxall"  runat="server" />

              <asp:DropDownList ID="drpPaymentMethod_header" runat="server">
                    <asp:ListItem Value="-1">Please select reason</asp:ListItem>
                    <asp:ListItem Value="0">Month</asp:ListItem>
                    <asp:ListItem Value="1">At End</asp:ListItem>
                    <asp:ListItem Value="2">At Travel</asp:ListItem>
                </asp:DropDownList>

        </HeaderTemplate>
            <ItemTemplate>
                <asp:CheckBox ID="checkbox1" CssClass="selectreject"  runat="server" />
                <asp:DropDownList ID="drpPaymentMethod" runat="server">
                    <asp:ListItem Value="-1">Please select reason</asp:ListItem>
                    <asp:ListItem Value="0">Month</asp:ListItem>
                    <asp:ListItem Value="1">At End</asp:ListItem>
                    <asp:ListItem Value="2">At Travel</asp:ListItem>
                </asp:DropDownList>
                <asp:RequiredFieldValidator ID="rfv" InitialValue="-1" ControlToValidate="drpPaymentMethod" ForeColor="Red" SetFocusOnError="true"
                    Enabled="false" Display="dynamic" runat="server" ErrorMessage="Please select reason"></asp:RequiredFieldValidator>
            </ItemTemplate>
        </asp:TemplateField>
        <asp:TemplateField HeaderText="Value">
            <ItemTemplate>
                <asp:TextBox ID="txt_Value" runat="server" Width="58px" Text="0"></asp:TextBox>
            </ItemTemplate>
        </asp:TemplateField>
    </Columns>
</asp:GridView> 
```

**//CS**

```
protected void gv_RowDataBound(object sender, GridViewRowEventArgs e)
        { 
            if (e.Row.RowType == DataControlRowType.DataRow)
            {
                CheckBox checkbox1 = e.Row.FindControl("checkbox1") as CheckBox;
                RequiredFieldValidator rfv = e.Row.FindControl("rfv") as RequiredFieldValidator;
                DropDownList drpPaymentMethod = (DropDownList)e.Row.FindControl("drpPaymentMethod");
                // you can just pass "this" instead of "myDiv.ClientID" and get the ID from the DOM element
                checkbox1.Attributes.Add("onclick", "UpdateValidator('" + checkbox1.ClientID + "','" + drpPaymentMethod.ClientID + "','" + rfv.ClientID + "');");
                if (!checkbox1.Checked)
                    drpPaymentMethod.Attributes.Add("disabled", "disabled");
            }
            if (e.Row.RowType == DataControlRowType.Header)
            {
                CheckBox checkboxall = e.Row.FindControl("checkboxall") as CheckBox;
                //how to get the reference here ( rfv ?????????)
                //checkboxall.Attributes.Add("onclick", "UpdateValidatorAll('" + checkboxall.ClientID + "','" + drpPaymentMethod.ClientID + "','" + rfv.ClientID + "');");

            } 
        } 
```

//js

```
$(document).ready(function () {

            var checkbox1 = "#<%=gv.ClientID%> input[id*='checkbox1']:checkbox";
            var checkboxall = $("input[id$='checkboxall']");

            $(checkboxall).click(function () {  
                if (checkboxall.is(':checked')) {
                    $('.selectreject > input').attr("checked", checkboxall.attr("checked"));   
                }
                else {
                    $('.selectreject > input').attr("checked", false); 
                }

            });

        }); 

        function UpdateValidator(chkID, drpID, validatorid) {

            //enabling the validator only if the checkbox is checked
            var enableValidator = $("#" + chkID).is(":checked");

            if (enableValidator)
                $('#' + drpID).removeAttr('disabled');
            else
                $('#' + drpID).attr('disabled', 'disabled');

            var vv = $('#' + validatorid).val();
            ValidatorEnable(document.getElementById(validatorid), enableValidator);
        }

        function UpdateValidatorAll(....) // i havent write the code for this function (select All checkbox) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T10:02:55.853

试试这个：ASPX：

```
<asp:GridView ID="gv" runat="server" AutoGenerateColumns="False" DataKeyNames="Id"
    OnRowDataBound="gv_RowDataBound">
    <Columns>
        <asp:BoundField DataField="ID" ControlStyle-Width="250px" HeaderText="ID" SortExpression="ID" />
        <asp:BoundField DataField="FirstName" ControlStyle-Width="250px" HeaderText="FirstName"
            SortExpression="FirstName" />
        <asp:BoundField DataField="LastName" ControlStyle-Width="250px" HeaderText="LastName"
            SortExpression="LastName" />
        <asp:TemplateField>
            <HeaderTemplate>
                Reject<br />
                <asp:CheckBox ID="checkboxall" runat="server" />
                <asp:DropDownList ID="drpPaymentMethod_header" runat="server">
                    <asp:ListItem Value="-1">Please select reason</asp:ListItem>
                    <asp:ListItem Value="0">Month</asp:ListItem>
                    <asp:ListItem Value="1">At End</asp:ListItem>
                    <asp:ListItem Value="2">At Travel</asp:ListItem>
                </asp:DropDownList>
            </HeaderTemplate>
            <ItemTemplate>
                <asp:CheckBox ID="checkbox1" runat="server" />
                <asp:DropDownList ID="drpPaymentMethod" CssClass="gridDropDown" runat="server">
                    <asp:ListItem Value="-1">----</asp:ListItem>
                    <asp:ListItem Value="0">Month</asp:ListItem>
                    <asp:ListItem Value="1">At End</asp:ListItem>
                    <asp:ListItem Value="2">At Travel</asp:ListItem>
                </asp:DropDownList>
                <asp:RequiredFieldValidator ID="rfv" CssClass="gridRfv" InitialValue="-1" ControlToValidate="drpPaymentMethod"
                    Enabled="false" Display="Static" runat="server" ErrorMessage="RequiredFieldValidator"></asp:RequiredFieldValidator>
            </ItemTemplate>
        </asp:TemplateField>
        <asp:TemplateField HeaderText="Value">
            <ItemTemplate>
                <asp:TextBox ID="txt_Value" runat="server" Width="58px" Text="0"></asp:TextBox>
            </ItemTemplate>
        </asp:TemplateField>
    </Columns>
</asp:GridView>
<asp:Button ID="Button1" runat="server" Text="Button" /> 
```

CS：

```
protected void gv_RowDataBound(object sender, GridViewRowEventArgs e)
    {
        if (e.Row.RowType == DataControlRowType.DataRow)
        {
            CheckBox checkbox1 = e.Row.FindControl("checkbox1") as CheckBox;
            RequiredFieldValidator rfv = e.Row.FindControl("rfv") as RequiredFieldValidator;
            DropDownList drpPaymentMethod = (DropDownList)e.Row.FindControl("drpPaymentMethod");
            // you can just pass "this" instead of "myDiv.ClientID" and get the ID from the DOM element
            checkbox1.Attributes.Add("onclick", "UpdateValidator('" + checkbox1.ClientID + "','" + drpPaymentMethod.ClientID + "','" + rfv.ClientID + "');");
            if (!checkbox1.Checked)
                drpPaymentMethod.Attributes.Add("disabled", "disabled");
        }

        if (e.Row.RowType == DataControlRowType.Header)
        {
            CheckBox checkboxall = e.Row.FindControl("checkboxall") as CheckBox;

            checkboxall.Attributes.Add("onclick", "UpdateValidatorAll('" + checkboxall.ClientID + "');");

        }
    } 
```

JavaScript：

```
<script src="Scripts/jquery-1.4.1.min.js" type="text/javascript"></script>
<script type="text/javascript">
    function UpdateValidator(chkID, drpID, validatorid) {
        //enabling the validator only if the checkbox is checked
        var enableValidator = $("#" + chkID).is(":checked");

        if (enableValidator)
            $('#' + drpID).removeAttr('disabled');
        else
            $('#' + drpID).attr('disabled', 'disabled');

        var vv = $('#' + validatorid).val();

        ValidatorEnable(document.getElementById(validatorid), enableValidator);
    }

    function UpdateValidatorAll(chkID) {
        //enabling the validator only if the checkbox is checked
        var enableValidator = !$("#" + chkID).is(":checked");

        $('.gridDropDown').each(function (index) {
            if (enableValidator)
                $(this).removeAttr('disabled');
            else
                $(this).attr('disabled', 'disabled');
        });

        $('.gridRfv').each(function (index) {
            var cont = $(this).get();
            ValidatorEnable(cont[0], enableValidator);

        });

    }
</script> 
```

# maven - maven从jar中读取属性文件

> ID：10662248
> 
> 赞同：0
> 
> 时间：2012-05-19T04:15:10.287
> 
> 标签：maven

我在 jar 文件中有一个属性文件。我如何使用 Maven 读取该文件。我曾尝试使用 properties-maven-plugin，但看起来您必须指定文件的位置。它是一个独立的应用程序，所以我也看不到目标文件夹中的 jar 文件。

# ruby-on-rails - 如何阻止 meta_search 在我的模型上定义搜索？

> ID：10662251
> 
> 赞同：3
> 
> 时间：2012-05-19T04:15:29.163
> 
> 标签：ruby-on-rails, meta-search, tire

我正在使用 active_admin 并将 meta_search 引入我的项目。（我不想用于其他任何事情）。

它似乎在我所有的模型上定义了搜索方法，这意味着当我包含轮胎时，我不能使用它的搜索方法。

它如何定义方法似乎也有些奇怪 - method_defined？说搜索方法没有定义，但是当我调用它时，我得到了 meta_search 一个。即使我在类中定义了自己的搜索方法，当我调用 Document.search 时，我仍然会得到 meta_search。

编辑：我会对处理这类事情的一般方法感兴趣 - 我已经通过使用 Model.tire.search 解决了这个特殊问题（因为轮胎也可以通过这种方式访问​​），但我仍然讨厌我的宝石我什至不使用都可以迫使我在项目的其余部分中使用解决方法。

编辑：我不知道在答案的答案中包含代码块的好方法，所以我会把它放在这里。

```
# Meta_search loaded, tire is not
1.9.3p125 :001 > require "tire"   #=> true
1.9.3p125 :002 > Document.send(:include, Tire::Model::Search)
=> Document(...)
1.9.3p125 :003 > Document.search
  Document Load (2.1ms)  SELECT "documents".* FROM "documents" 
  # I get meta_search, as I should

# Tire loaded (and the include Tire::Model::Search is inside the class definition), meta_search is not loaded
1.9.3p125 :001 > Document.search
# I get tire, as I should
1.9.3p125 :002 > require "meta_search"   #=> true
1.9.3p125 :003 > Document.search
# I still get tire, all is well

# Tire loaded, meta_search is not loaded
1.9.3p125 :001 > require "meta_search"   #=> true
1.9.3p125 :002 > Document.search
  Document Load (1.8ms)  SELECT "documents".* FROM "documents" 
# I get meta_search, even though Document.search was already defined!

# Tire loaded, meta_search is not loaded, RAILS_ENV="production"
Loading production environment (Rails 3.2.2)
1.9.3p125 :001 > require "meta_search"
=> true 
1.9.3p125 :002 > Document.search
# I get tire! 
```

我对此的解释是，meta_search 如何在类尚未实际加载时检测是否已定义搜索存在错误。万岁！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-30T20:09:34.587

相关的2行：

[https://github.com/ernie/meta_search/blob/master/lib/meta_search.rb#L55](https://github.com/ernie/meta_search/blob/master/lib/meta_search.rb#L55)

[https://github.com/ernie/meta_search/blob/master/lib/meta_search/searches/active_record.rb#L46](https://github.com/ernie/meta_search/blob/master/lib/meta_search/searches/active_record.rb#L46)

我不认为这是一个错误，事情就是这样。

在场景 3 中，在开发环境中，您不预加载模型。当您需要 'meta_search' 时，它将在`ActiveRecord::Base`. 然后你说`Document`，加载模型，将首先继承定义的搜索方法，所以当它包含轮胎搜索模块时，它会将搜索别名为元搜索。

在生产模式（场景 4）和场景 2 中，您在元搜索之前预加载文档模型，因此 Tire 将定义搜索。现在要求元搜索只会对新加载的类产生影响。

您可以看到定义 gem 的顺序不计算在内。但是您可以在 gem 要求之后取消定义搜索方法。

```
# application.rb
# ...
Bundler.require(:default, Rails.env) if defined?(Bundler)
# now move search out of the way
ActiveRecord::Base.instance_eval { undef :search } 
```

所以以后我们加载一个模型类并包含轮胎，搜索将正确地转到轮胎，无论是在开发还是生产中。

这并不理想，因为非轮胎模型的搜索方法不会委托给元搜索，实际上它不会被定义。所以可能第二种解决方案是最好的：在这里你用一个在运行时检查轮胎的方法覆盖搜索方法：

```
class ActiveRecord::Base
  def self.search(*args, &block)
    if respond_to?(:tire)
       tire.search(*args, &block)
    else
       metasearch(*args, &block)
    end
  end
end 
```

这有帮助吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T06:03:24.487

简短但不令人满意的答案：将轮胎移到 Gemfile 中的 active_admin 上方。如果方法已经定义， meta_search 和轮胎都避免定义`search`方法，因此确保首先加载轮胎应该这样做。

或者，*在*轮胎和 meta_search 都被加载后（例如在 Rails 初始化程序中），你可以重新定义 ActiveRecord::Base.search 来做`tire.search`：

`method_defined?`检查是否定义了实例方法，而`search`在这种情况下是类方法。查看是否定义了类方法的唯一真正方法是`Document.methods.include?(:search)`. 同样，当您重新定义 时`search`，您是否确保将其设为类方法（例如`def self.search`）？

不幸的是，“我的依赖项的依赖项是猴子修补我的代码”问题是 Ruby 中的一个主要烦恼，并且在某种程度上是不可避免的。图书馆作者有很大的灵活性来做他们想做的事，但他们经常滥用权力以“让事情更容易使用”。

# php - 将表单值作为 POST 传递并获取 JSON 作为响应

> ID：10662252
> 
> 赞同：0
> 
> 时间：2012-05-19T04:15:38.197
> 
> 标签：php, json, rest

大家好，这是我的表单设置：

```
<form class="form" id="getstat" name="getstat" method="post" action="stat101.php" />
<pre>Enter the Message ID and hit the submit button:</pre>
<!-- <input type="text" name="msgid" /> -->
<textarea name="msgids" id="msgid" wrap="physical" cols="40" rows="10"></textarea><br 
/>
<input type="submit" name="submit" value="Check Status">
</form> 
```

我的 stat101.php 看起来像：

```
$user="101";
$pass="xxx";
extract($_POST);
$ids=$_POST['msgid'];
$url="http://url.com";

$c = curl_init();
curl_setopt($c, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($c, CURLOPT_HTTPHEADER, array('Accept: application/json', 'Content-Type: 
application/json'));
curl_setopt($c, CURLOPT_URL, "$url".$user.'/'.$pass.'
/VALUEOFIDS');
$content = curl_exec($c);
curl_close($c);
print_r($content); 
```

如果我对“VALUEOFIDS”进行硬编码，上面的代码就可以工作，但我不知道如何通过从表单的输入“msgid”发布来让它工作。我需要模拟的带有 json 格式响应的 URL 是：[http](http://url.com/) ://url.com/ {key}/{secret}/{msgid}。我很难获得正确的代码。

我需要模仿的是： curl -H "Accept: application/json" [https://api.url.com/server/search/](https://api.url.com/server/search/) $1/$2/$3

当我在 bash 中执行此操作时，它工作正常。

先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T04:45:58.753

输入和文本区域将它们的值传递给 $_POST 数组，并将它们的名称作为键。您的代码示例使用 id 而不是名称从请求中获取值。尝试使用以下内容：

```
// trim whitespace and carriage returns made possible by the textarea.
$ids = trim($_POST['msgids']); 

...

curl_setopt($c, CURLOPT_URL, "$url".$user.'/'.$pass.'/'.$ids); 
```

# javascript - HTML5 Canvas - 并排有 2 个 Canvas 对象

> ID：10662255
> 
> 赞同：0
> 
> 时间：2012-05-19T04:16:37.597
> 
> 标签：javascript, html, canvas

我知道您可以将画布层叠在一起，就像您在 Photoshop 中制作图像一样，但是您可以将画布对象上下或并排放置吗？

我正在寻找一个图表，它允许您选择一个空间，并根据您选择的颜色，它会根据该选择更改块。

这是我的想法： Canvas #1 - 绘制方格纸 Canvas #2 - Canvas #1 的右侧 - 有 4 种颜色选择的选项卡。我会根据彩色图像计算出这些的 xy 以获取颜色。帆布 1 块颜色将反映这种选择。

这是进行此实施的好方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T21:48:11.733

是的，您可以将画布放在上方、下方和并排放置。画布是一个 HTML 元素，可以像使用 CSS 的任何其他元素一样定位。

我可能会尽量避免为您的颜色选择选项卡使用画布，除非出于某种您没有提到的原因绝对有必要这样做。如果您使用标准 DOM 元素，您将能够直接绑定到单击事件，而不必计算鼠标相对于画布中图形的位置。

[以下是不使用画布创建 UI 组件](https://stackoverflow.com/questions/6856953/does-it-make-sense-to-create-canvas-based-ui-components/6859061#6859061)的一些充分理由。

# android - android 使用“controller.query(activity);” 在得分循环中

> ID：10662263
> 
> 赞同：0
> 
> 时间：2012-05-19T04:18:51.080
> 
> 标签：android, controller, scoreloop

我正在尝试实现一个内置控制器，它是 scoreloop 库的一部分。该文件指出：

**基本用法：**

如果之前没有被接受，要调用 TOS 对话框，可以使用以下代码：

```
 final TermsOfServiceController controller = new TermsOfServiceController(new TermsOfServiceControllerObserver() {
 @Override
 public void termsOfServiceControllerDidFinish(final TermsOfServiceController controller, final Boolean accepted) {
    if(accepted != null) {
        // we have conclusive result.
        if(accepted) {
            // user did accept
        }
        else {
            // user did reject
        }
    }
 }
 });
 controller.query(activity); 
```

但是当我将它粘贴到我的代码中时，我得到以下语法错误：

![标记的语法错误，错误的构造](../Images/fbb9a937aece23ef4a469c6052cbbe67.png) ![令牌上的语法错误](../Images/fe469334eb63b7b1ff4bcdf3c0e162d7.png)

我用错了吗？这将如何以及在哪里使用任何想法？

编辑：将语句移动到我要显示对话框的方法后，我现在收到以下错误：

![新错误](../Images/7ef5a378ac72ad2f8d1e96a5367f7dd1.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T04:36:47.180

您似乎正在调用`controller.query(activity)`一个需要声明的类主体。将语句移动`controller.query(activity)`到要显示对话框的方法。

# c - 当值可能相同时避免写入是否更快

> ID：10662266
> 
> 赞同：4
> 
> 时间：2012-05-19T04:20:44.120
> 
> 标签：c, memory, smp

在 SMP 机器上，#2 与 #1 相比有性能优势：

1) x = 0;

或者

2) 如果 (x) x = 0；

我在想管理 CPU 之间的缓存一致性的幕后开销可能会有一些成本。我疯了吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-19T04:39:24.893

即使使用单线程代码，如果对象位于写时复制内存中（例如，文件的私有映射，或分叉后的几乎任何可写内存），后者也有优势。我怀疑您所询问的优势也是真实的，至少在 x86 等自动处理内存一致性的系统上。在此类机器上，写入可能位于另一个 cpu 缓存中的内存将使缓存副本（实际上是整个缓存行）无效。只是阅读不会有任何害处。当然，如果这是可能被多个线程修改和共享的内存，那么无论如何它都需要受到同步机制的保护，那么您可能会失去大部分或全部优势。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-19T04:24:14.503

即使您正在阅读，它也必须管理缓存一致性，所以我认为它不会给您带来任何好处。它还将在很大程度上取决于编译器的功能。如果您真的在乎，我会在您使用的系统上对其进行基准测试。

# mouseevent - 如何在 OpenGL 中通过鼠标单击绘制多边形？

> ID：10662271
> 
> 赞同：1
> 
> 时间：2012-05-19T04:22:03.210
> 
> 标签：mouseevent, mouseclick-event, onmouseclick

当鼠标单击我在屏幕上创建的按钮时，我希望我的程序绘制一个多边形。我应该把绘制多边形命令放在哪里？我知道我无法放入我的鼠标功能，因为下次我的显示回调运行时它的效果会丢失，它必须在我的显示功能中。但是我可以在我的显示功能中设置一个 if 条件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T05:46:40.930

希望这对您有所帮助，就像它帮助了我一样。一旦您将鼠标坐标转换为您的 3D 对象可以使用的东西（参见下面的代码）并将其存储在某处，您就可以使用变换在存储的坐标**处在循环中绘制您的对象。**我在我的 OpenGL 程序的 init 函数中初始化了我的形状、颜色等，但只有在我在键盘上选择了一个数字然后在我的视口中单击某处时才绘制它。重复这些步骤将该对象移动/转换到新坐标。

```
void MouseButton(int button, int state, int x, int y)
{
if (button == GLUT_LEFT_BUTTON)
{
    leftmousebutton_down = (state == GLUT_DOWN) ? TRUE : FALSE;     
    if(leftmousebutton_down)
    {
        cout << "LEFT BUTTON DOWN" << endl;
        //pTransInfo[0].vTranslate  = Vector3( 0.5f, 0.5f, 0.5f ); // center of scene
        GLint viewport[4]; //var to hold the viewport info
        GLdouble modelview[16]; //var to hold the modelview info
        GLdouble projection[16]; //var to hold the projection matrix info
        GLfloat winX, winY, winZ; //variables to hold screen x,y,z coordinates
        GLdouble worldX, worldY, worldZ; //variables to hold world x,y,z coordinates

        glGetDoublev( GL_MODELVIEW_MATRIX, modelview ); //get the modelview info
        glGetDoublev( GL_PROJECTION_MATRIX, projection ); //get the projection matrix info
        glGetIntegerv( GL_VIEWPORT, viewport ); //get the viewport info

        winX = (float)x;
        winY = (float)viewport[3] - (float)y;
        winZ = 0;

        //get the world coordinates from the screen coordinates
        gluUnProject( winX, winY, winZ, modelview, projection, viewport, &worldX, &worldY, &worldZ);

        cout << "coordinates: worldX = " << worldX << " worldY = " << worldY << " worldZ = " <<  worldZ << endl; //THIS IS WHAT YOU WANT, STORE IT IN AN ARRAY OR OTHER STRUCTURE
    }
} 
```

}

# uml - 我应该如何解释 UML 类图？

> ID：10662272
> 
> 赞同：3
> 
> 时间：2012-05-19T04:22:05.367
> 
> 标签：uml

我使用类图创建了一个设计。但是，我被要求对类图进行一些解释。

IMO，类图是公平的。例如，如果一个类被标记为“Cat”，我要解释一下，这个“Cat”类代表“Cat”吗？

解释 UML 类图的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T14:09:31.150

说类`Cat`代表猫是您可以做的一件事，但这可能不是很令人兴奋。更有趣的解释可能是：关联、抽象类、接口、继承等。您正在使用任何设计模式吗？也许解释一下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-06T10:33:32.340

无论 uml 图的类型如何，您都应该始终用自然语言添加一些解释。

至少解释一下解决方案的一些关键方面： this 有一个 this 的引用 this 从这个类继承，不需要重写这个操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-14T06:36:11.677

我希望这个能帮上忙！

假设您必须向您的客户解释这个类图，而不是您的经理。想想你将如何定义该图中每个类的所有职责。给出它的属性、方法、父类和子类等的单行定义（在需要时也可以详细说明）。

定义什么是流程以及一个类如何链接到另一个类。例如：

你的类 ' **cat** ' 是否与类**Animal**或接口**IAnimal**有任何关联。你可以想得更多，做得更好。

# php - PHP字符串模式替换

> ID：10662273
> 
> 赞同：1
> 
> 时间：2012-05-19T04:22:19.480
> 
> 标签：php, regex

我有一组这样的字符串：

```
Pants [+$50]
Shirts [+$10]
Jeans [+$5]
Jackets [+$100] 
```

如何删除这些行中的“[xxx]”并只留下项目名称（没有尾随空格）？我被告知要定义一个正则表达式，不知道它是如何工作的......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T04:25:59.760

这实际上是一个令人困惑的正则表达式，因为`[`和`]`是特殊字符：

```
$str = 'Pants [+$50]';
$str = rtrim(preg_replace('/\[[^\]]*\]/', '', $str));

// 'Pants' 
```

基本上，partern`\[[^\]]*\]`意味着匹配一个文字`[`，后跟 0 个或多个不`]`跟 a 的字符`]`。[preg_replace](http://php.net/manual/en/function.preg-replace.php)中的第二个字符串是它被替换的内容。在这种情况下，我们要删除空字符串。然后我们使用[rtrim](http://php.net/manual/en/function.rtrim.php)修剪任何尾随空格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T04:27:56.080

**试试这个：**

*正则表达式*

```
(?im)[ \t]*\[[^\]\[]+\][ \t]*$ 
```

*代码*

```
$result = preg_replace('/^(.+?)[ \t]*\[[^\][]+\][ \t]*$/im', '$1', $subject); 
```

# c# - 使用具有分层解决方案架构的 C# 还原 SQL Server 数据库

> ID：10662274
> 
> 赞同：0
> 
> 时间：2012-05-19T04:22:27.337
> 
> 标签：c#, sql-server, database-restore

我有 3 层应用程序。我正在尝试使用 C# 代码备份 SQL Server 数据库。我从 UI 传递了选定的文件夹路径并在数据层中执行代码。在选择数据库的地方，它给了我一个错误。

> 未能为此请求检索数据。连接类型无效。
> 在 Microsoft.SqlServer.Management.Smo.Enumerator.Process(Object connectionInfo, Request request)
> 在 Microsoft.SqlServer.Management.Smo.ExecutionManager.GetEnumeratorData(Request req)
> 在 Microsoft.SqlServer.Management.Smo.SqlSmoObject.GetDbCollat​​ion(String dbname )
> 在 Microsoft.SqlServer.Management.Smo.SqlSmoObject.InitializeStringComparer() 的 Microsoft.SqlServer.Management.Smo.SqlSmoObject.GetDbComparer(Boolean inServer
> )

我创建了一个带有一层的示例项目并执行代码。它工作正常。我找不到问题

我使用的代码如下；

```
public void BackupData(string filePath)
    {
        Backup sqlBackup = new Backup();

        sqlBackup.Action = BackupActionType.Database;
        sqlBackup.BackupSetDescription = "ArchiveDataBase:" +
                                         DateTime.Now.ToShortDateString();
        string fileName = "\\ArchiveDataBase.bak";
        sqlBackup.BackupSetName = "Archive";

        sqlBackup.Database = "SanasaLibrarySystem";

        BackupDeviceItem deviceItem = new BackupDeviceItem(filePath + fileName, DeviceType.File);
        DataConnection dataConnection = new DataConnection();
        ServerConnection connection = new ServerConnection(dataConnection.DataBaseConnection);
        Server sqlServer = new Server(connection);

        Database db = sqlServer.Databases["SanasaLibrarySystem"];

        sqlBackup.Initialize = true;
        sqlBackup.Checksum = true;
        sqlBackup.ContinueAfterError = true;

        sqlBackup.Devices.Add(deviceItem);
        sqlBackup.Incremental = false;

        sqlBackup.ExpirationDate = DateTime.Now.AddDays(3);
        sqlBackup.LogTruncation = BackupTruncateLogType.Truncate;

        sqlBackup.FormatMedia = false;

        sqlBackup.SqlBackup(sqlServer);

    } 
```

# magento - Magento 与 Nginx 和 Varnish - 302、cookie 和重定向？

> ID：10662275
> 
> 赞同：2
> 
> 时间：2012-05-19T04:22:53.550
> 
> 标签：magento, redirect, cookies, nginx, varnish

我正在测试 Varnish 以增加 Magento 的加载时间，到目前为止，缓存效果非常好。我可以为 index.php 提供 32-35 页/秒的速度，而为目录页面提供的最大速度为 1200/秒。但是，我遇到了一个我真的在努力解决的问题。这几天我一直在努力解决这个问题。将产品添加到购物车时，它会重定向到主页，然后显示“商品 XXX 已添加到您的购物车”。我可以看到 Varnish 获取 302 以将其返回到我从中添加项目的页面，但它总是弹回主页。添加产品进行比较时也存在同样的问题，但这永远不会添加到要比较的项目列表中。

您可以在此处查看该站点：http: [//test.autoracks.com](http://test.autoracks.com)

这是我的 default.vcl：

```
 # default backend definition.  Set this to point to your content server.
        backend default {
          .host = "127.0.0.1";
          .port = "8080";
        }

        # admin backend with longer timeout values. Set this to the same IP & port as your default server.
        backend admin {
          .host = "127.0.0.1";
          .port = "8080";
          .first_byte_timeout = 18000s;
          .between_bytes_timeout = 18000s;
        }

        # add your Magento server IP to allow purges from the backend
        acl purge {
          "localhost";
          "127.0.0.1";
        }

        sub vcl_recv {
            if (req.restarts == 0) {
                if (req.http.x-forwarded-for) {
                    set req.http.X-Forwarded-For =
                    req.http.X-Forwarded-For ", " client.ip;
                } else {
                    set req.http.X-Forwarded-For = client.ip;
                }
            }

            if (req.request != "GET" &&
              req.request != "HEAD" &&
              req.request != "PUT" &&
              req.request != "POST" &&
              req.request != "TRACE" &&
              req.request != "OPTIONS" &&
              req.request != "DELETE" &&
              req.request != "PURGE") {
                /* Non-RFC2616 or CONNECT which is weird. */
                return (pipe);
            }

            # purge request
            if (req.request == "PURGE") {
                if (!client.ip ~ purge) {
                    error 405 "Not allowed.";
                }
                purge("obj.http.X-Purge-Host ~ " req.http.X-Purge-Host " && obj.http.X-Purge-URL ~ " req.http.X-Purge-Regex " && obj.http.Content-Type ~ " req.http.X-Purge-Content-Type);
                error 200 "Purged.";
            }

            # switch to admin backend configuration
            if (req.http.cookie ~ "adminhtml=") {
                set req.backend = admin;
            }

            # we only deal with GET and HEAD by default    
            if (req.request != "GET" && req.request != "HEAD") {
                return (pass);
            }

            # normalize url in case of leading HTTP scheme and domain
            set req.url = regsub(req.url, "^http[s]?://[^/]+", "");

            # static files are always cacheable. remove SSL flag and cookie
            if (req.url ~ "^/(media|js|skin)/.*\.(png|jpg|jpeg|gif|css|js|swf|ico)$") {
                unset req.http.Https;
                unset req.http.Cookie;
            }

            # not cacheable by default
            if (req.http.Authorization || req.http.Https) {
                return (pass);
            }

            # do not cache any page from
            # - index files
            # - ...
            #if (req.url ~ "^/(index)") {
            #    return (pass);
            #}

            # as soon as we have a NO_CACHE cookie pass request
            if (req.http.cookie ~ "NO_CACHE=") {
                return (pass);
            }

            # normalize Aceept-Encoding header
            # http://varnish.projects.linpro.no/wiki/FAQ/Compression
            if (req.http.Accept-Encoding) {
                if (req.url ~ "\.(jpg|png|gif|gz|tgz|bz2|tbz|mp3|ogg|swf|flv)$") {
                    # No point in compressing these
                    remove req.http.Accept-Encoding;
                } elsif (req.http.Accept-Encoding ~ "gzip") {
                    set req.http.Accept-Encoding = "gzip";
                } elsif (req.http.Accept-Encoding ~ "deflate" && req.http.user-agent !~ "MSIE") {
                    set req.http.Accept-Encoding = "deflate";
                } else {
                    # unkown algorithm
                    remove req.http.Accept-Encoding;
                }
            }

            # remove Google gclid parameters
            set req.url = regsuball(req.url,"\?gclid=[^&]+$",""); # strips when QS = "?gclid=AAA"
            set req.url = regsuball(req.url,"\?gclid=[^&]+&","?"); # strips when QS = "?gclid=AAA&foo=bar"
            set req.url = regsuball(req.url,"&gclid=[^&]+",""); # strips when QS = "?foo=bar&gclid=AAA" or QS = "?foo=bar&gclid=AAA&bar=baz"

            return (lookup);
        }

        # sub vcl_pipe {
        #     # Note that only the first request to the backend will have
        #     # X-Forwarded-For set.  If you use X-Forwarded-For and want to
        #     # have it set for all requests, make sure to have:
        #     # set bereq.http.connection = "close";
        #     # here.  It is not set by default as it might break some broken web
        #     # applications, like IIS with NTLM authentication.
        #     return (pipe);
        # }
        # 
        # sub vcl_pass {
        #     return (pass);
        # }
        # 
        sub vcl_hash {
            set req.hash += req.url;
            if (req.http.host) {
                 set req.hash += req.http.host;
            } else {
                set req.hash += server.ip;
            }
            if (!(req.url ~ "^/(media|js|skin)/.*\.(png|jpg|jpeg|gif|css|js|swf|ico)$")) {
                call design_exception;
            }
            return (hash);
        }
        # 
        # sub vcl_hit {
        #     if (!obj.cacheable) {
        #         return (pass);
        #     }
        #     return (deliver);
        # }
        # 
        # sub vcl_miss {
        #     return (fetch);
        # }

        sub vcl_fetch {
            if (beresp.status == 500) {
               set beresp.saintmode = 10s;
               restart;
            }
            set beresp.grace = 5m;

            # add ban-lurker tags to object
            set beresp.http.X-Purge-URL = req.url;
            set beresp.http.X-Purge-Host = req.http.host;

            if (beresp.status == 200 || beresp.status == 301 || beresp.status == 404) {
                if (beresp.http.Content-Type ~ "text/html" || beresp.http.Content-Type ~ "text/xml") {
                    if ((beresp.http.Set-Cookie ~ "NO_CACHE=") || (beresp.ttl < 1s)) {
                        set beresp.ttl = 0s;
                        return (pass);
                    }

                    # marker for vcl_deliver to reset Age:
                    set beresp.http.magicmarker = "1";

                    # Don't cache cookies
                    unset beresp.http.set-cookie;
                } else {
                    # set default TTL value for static content
                    set beresp.ttl = 4h;
                }
                return (deliver);
            }

            return (pass);
        }

        sub vcl_deliver {
            # debug info
            if (resp.http.X-Cache-Debug) {
                if (obj.hits > 0) {
                    set resp.http.X-Cache = "HIT";
                    set resp.http.X-Cache-Hits = obj.hits;
                } else {
                   set resp.http.X-Cache = "MISS";
                }
                set resp.http.X-Cache-Expires = resp.http.Expires;
            } else {
                # remove Varnish/proxy header
                remove resp.http.X-Varnish;
                remove resp.http.Via;
                remove resp.http.Age;
                remove resp.http.X-Purge-URL;
                remove resp.http.X-Purge-Host;
            }

            if (resp.http.magicmarker) {
                # Remove the magic marker
                unset resp.http.magicmarker;

                set resp.http.Cache-Control = "no-store, no-cache, must-revalidate, post-check=0, pre-check=0";
                set resp.http.Pragma = "no-cache";
                set resp.http.Expires = "Mon, 31 Mar 2008 10:00:00 GMT";
                set resp.http.Age = "0";
            }
        }

        # sub vcl_error {
        #     set obj.http.Content-Type = "text/html; charset=utf-8";
        #     synthetic {"
        # <?xml version="1.0" encoding="utf-8"?>
        # <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
        #  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
        # <html>
        #   <head>
        #     <title>"} obj.status " " obj.response {"</title>
        #   </head>
        #   <body>
        #     <h1>Error "} obj.status " " obj.response {"</h1>
        #     <p>"} obj.response {"</p>
        #     <h3>Guru Meditation:</h3>
        #     <p>XID: "} req.xid {"</p>
        #     <hr>
        #     <p>Varnish cache server</p>
        #   </body>
        # </html>
        # "};
        #     return (deliver);
        # }

        sub design_exception {
        } 
```

如果我把 nginx 放在前面，我应该一切正常。对此的任何帮助将不胜感激，我真的很想让这个工作！

谢谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T10:39:00.250

此问题位于 Magento Core 中。由于该方法`getCurrentUrl`使用 Nginx 端口号构建 URL（在 Varnish 后面通常不为 80）。稍后，当重定向 URL 被解码时，由于端口号，它作为“内部 URL”失败。

解决方案（不修改 Magento 核心）是将 Nginx 设置为侦听端口 80，将 Varnish 设置为其他端口。然后使用 iptables 将传入流量映射到 Varnish。

我在一篇关于[保持 Magento 对 Varnish 满意](http://erikeng.se/post/magento-behind-varnish.html)的博文中对此进行了介绍。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T20:53:09.483

当我使用 siege 使用本地 apache 服务器测试 varnish 时，测试有时会发送与我预期的测试不同的响应 url。我不知道为什么我从来没有（用我的眼睛）目睹错误的页面加载，即使我在开发其他东西时一直使用相同的 vcl 运行它。但我按照清漆网站上的建议安装了 64 位操作系统。我的问题消失了。你用的是32位系统吗？

# python - 无法让 doc 测试在 python 中通过

> ID：10662278
> 
> 赞同：-2
> 
> 时间：2012-05-19T04:23:20.297
> 
> 标签：python, testing, syntax

下面的代码，不知道我做错了什么。它是一个员工数据库。下面继承自 Employee 类。不太确定该怎么做才能让它通过，除非我的代码是错误的。我收到此错误“ SyntaxError：关键字 arg 后的非关键字 arg”

```
class Manager(EmpSalaried): #inherits from EmpSalaried 
    def __init__(self, salary=0.0, firstName="", lastName="", ssID="", DOB=datetime.fromordinal(1), 
            startDate=datetime.today(), 
            manage=[]): #manage attribute added for manager
        Employee.__init__(self, salary, firstName, lastName, ssID, DOB, startDate)
        self.manage = manage

    def __str__(self):
        """
        >>> import datetime
        >>> e = Manager(10, 'Bob', 'Quux', '123', startDate=datetime.datetime(2009, 1, 1),          
        ['Michael', 'Bob', 'Hello'])
        >>> print e
        10, Bob Quux, 123, 0001-01-01 00:00:00, 2009-01-01 00:00:00, Michael, Bob, Hello
        >>> b = Manager(2000, 'Bob', 'Lol', '1234', startDate=datetime.datetime(2009, 1, 1),     
        ['Michael', 'Bob', 'Hello'])
        >>> print b
        2000, Bob Lol, 1234, 0001-01-01 00:00:00, 2009-01-01 00:00:00

        """
        return Employee.__str__(self) + ', ' + str(self.manage) #need to convert to a string in order to add to string 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T04:44:47.563

Doctest 的格式与运行交互式会话的方式相同。您可以运行交互式会话并复制它，您将获得所有结果。这可能是一个有效的会话：

```
>>> import datetime
>>> print Manager(10, 'Bob', 'Quux', '123', datetime.datetime(2009, 1, 1),
... ['Michael', 'Bob', 'Hello'])
10, Bob Quux, 123, 0001-01-01 00:00:00, 2009-01-01 00:00:00, Michael, Bob, Hello
>>> print Manager(2000, 'Bob', 'Lol', '1234', datetime.datetime(2009, 1, 1),     
... ['Michael', 'Bob', 'Hello'])
2000, Bob Lol, 1234, 0001-01-01 00:00:00, 2009-01-01 00:00:00 
```

你所做的有各种各样的语法错误；

*   对于其中的 doctest 部分，如果您要继续该语句，则下一行必须以`... `（与常规会话完全相同）开头；
*   您的`Manager`实例化无效（真正的 Python `SyntaxError`），因为您有`startDate=...`（关键字参数）后跟非关键字参数（“经理”的值）。这是阻止它运行的主要问题。这也是异常告诉你的。

如果您无法在 doctest 中弄清楚，请*在普通 Python session 中运行它*。在那里玩。

您的代码中还有许多其他重大问题；这里有几个：

*   `EmpSalaried`与`Employee`：那是什么？
*   由于使用了可变的默认参数，如果您`manage`在创建时未指定参数`Manager`，它们将获得相同的列表。这不是你想要的。

# linq - Orderby 不对 Linq 中包含数字的字符串进行排序

> ID：10662280
> 
> 赞同：0
> 
> 时间：2012-05-19T04:23:23.620
> 
> 标签：linq, entity-framework, linq-to-sql, iqueryable

我在数据库中有一个字符串字段，将数字保存为字符串。当我想根据 Linq 中的此字段进行订购时，如下所示，但 orderby**无法**正常工作。它像这样订购

1 - 2 - 3 - 25 - 11 - 30 - 50 ===> 1 - 11 - 2 - 25 - 3 - 30 - 50

```
 IQueryable<Tbl_Melk> Melks =
   from melk in Tbl_Melk
   where melk.Mantaghe == Mantaghe && melk.Hoze == Hoze && melk.Block == Block
   orderby melk.Melk
   select melk; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T04:34:51.557

实际上，这是正确的顺序，因为它按字母顺序对值进行排序。除非您将其强制转换为数字类型，否则 LINQ 无法判断数据是否包含数字。查看这个问题，了解一种按您想要的方式排序的方法。

[Linq - 按数字排序，然后按字母排序](https://stackoverflow.com/questions/5120970/linq-order-by-number-then-letters)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T04:38:33.293

莫里斯说的是对的，你可以试试这个：

```
var Melks = from melk in Tbl_Melk.ToList()
let integer = int.Parse(melk)
orderby integer
where melk.Mantaghe == Mantaghe && melk.Hoze == Hoze && melk.Block == Block
orderby melk.Melk
select melk; 
```

但是这样你就会失去性能和 IQuerable 接口。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-09-01T06:00:25.863

LeftPad 用零填充字符串。

出于我的想法，缺乏不支持 LeftPad 的 EntityFramework：

```
....
orderby SqlFunctions.Replicate("0", 10 - melk.Melk.Length) + melk.Melk 
```

# binaryfiles - 如何将 mod 制作成二进制可执行文件？

> ID：10662283
> 
> 赞同：0
> 
> 时间：2012-05-19T04:24:22.783
> 
> 标签：binaryfiles

我见过人们制作可执行文件以添加额外的自用功能，我对他们可以在没有源代码的情况下修改软件的事实感到困惑。你能告诉我这怎么可能？好吧，我知道有像 SoftICE、OllyDbg 或 IDA 这样的工具，但我认为这些工具只能让您修改一些字段或只是更改一些关键的跳转点，它们如何在原始可执行文件中添加实现新功能的额外 dll？我对详细过程很感兴趣，有人可以给我一些指导吗？

# php - PHP MYSQL 查询问题 页面无法加载

> ID：10662284
> 
> 赞同：1
> 
> 时间：2012-05-19T04:24:40.893
> 
> 标签：php, mysql

这个片段导致文件抛出 500 错误，我不明白为什么。

```
<head>    
<?php

        $link = mysql_connect('****', '***', '*****');
        $db_selected = mysql_select_db('***', $link);
        if (!$db_selected) {
            echo 'error';
        }
        $adchan = $_COOKIE['adtail'];
        $adarray = json_decode($adchan);
        if($adarray->{'subcat'} != 'main'){
                $sql = "SELECT term_id FROM wp_terms WHERE slug='$adarray->{'subcat'}'";
                $result = mysql_query($sql);
                    while($row = mysql_fetch_array($result))
                  {
                    $id = $row['term_id'];
                    $sql2 = "SELECT option_value FROM wp_10_options WHERE option_name='$id'";
                    $result2 = mysql_query($sql2);
                        while($row2 = mysql_fetch_array($result2))
                      {
                          echo "<meta http-equiv='Refresh' content='".$row2['option_value']."'>";
                      }

                }
        }
        else{

                $sql = "SELECT term_id FROM wp_terms WHERE slug='$adarray->{'cat'}'";
                $result = mysql_query($sql);
                    while($row = mysql_fetch_array($result))
                  {
                    $id = $row['term_id'];
                    $sql2 = "SELECT option_value FROM wp_options WHERE option_name='$id'";
                    $result2 = mysql_query($sql2);
                        while($row2 = mysql_fetch_array($result2))
                      {
                          echo "<meta http-equiv='Refresh' content='".$row2['option_value']."'>";
                      }

                }
        }
    ?>
</head> 
```

谁能明白为什么？

更新

```
<?php
error_reporting(-1);

        $adchan = $_COOKIE['adtail'];
        $adarray = json_decode($adchan);
        var_dump($adarray);
        print $adarray['cat'];
        ?> 
```

它运行良好，直到打印，也就是我收到 500 错误的时候。输出是：

```
object(stdClass)#1 (4) { ["cat"]=> string(9) "lifestyle" ["subcat"]=> string(12) "arts-culture" ["page"]=> string(4) "main" ["zone"]=> string(22) "lifestyle/arts-culture" } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T04:40:44.697

500 是内部服务器错误。有时，这是因为文件访问权限问题。你的文件访问权限是777吗？如果是，您可以尝试将权限更改为 644、640 或 755，看看问题是否会消失。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T04:52:53.193

我不知道。但是，这可能是因为`mysql_fetch_array`级联。你放在`mysql_fetch_array`另一个里面`mysql_fetch_array`。

并假设它有效，但它会给你带来糟糕的表现。

这可能对你更好。（在 if 部分的内部）

```
 $sql = "SELECT a.term_id,b.option_value FROM wp_terms a LEFT JOIN option_value b ON b.option_name=a.term_id WHERE a.slug='{$adarray->subcat}'";
                $result = mysql_query($sql);
                while($row = mysql_fetch_array($result))
                {
                    $id = $row['term_id'];
                    if(isset($row['option_value']))
                        echo "<meta http-equiv='Refresh' content='".$row['option_value']."'>";

                } 
```

# javascript - 用于 chrome 和 firefox 的垃圾收集器 javascript 方法

> ID：10662292
> 
> 赞同：2
> 
> 时间：2012-05-19T04:26:53.870
> 
> 标签：javascript, firefox, google-chrome, garbage-collection

是否有任何 JavaScript 方法可以显式清理 chrome 和 Firefox 中的浏览器内存，因为执行 null 不会将内存减少到原来的样子。

谢谢。

# language-agnostic - 我应该尽可能避免使用魔术字符串吗？

> ID：10662299
> 
> 赞同：5
> 
> 时间：2012-05-19T04:28:26.930
> 
> 标签：language-agnostic, coding-style, magic-string

我有下一段代码：

```
 internal static string GetNetBiosDomainFromMember(string memberName)
    {
        int indexOf = memberName.IndexOf("DC=", StringComparison.InvariantCultureIgnoreCase);
        indexOf += "DC=".Length;
        string domaninName = memberName.Substring(indexOf, memberName.Length - indexOf);

         if (domaninName.Contains(","))
         {
             domaninName = domaninName.Split(new[] { "," }, StringSplitOptions.None)[0];
         }

         return domaninName;
     } 
```

我正在为 AD 进行一些解析，所以我有一些字符串，例如“DC=”、“objectCategory=”、“LDAP://”、“”、“。” 谁谁。我发现上面的代码比下面的代码更具可读性：（你可能会发现相反的，让我知道。）

```
 private const string DcString = "DC=";
    private const string Comma = ",";

    internal static string GetNetBiosDomainFromMember(string memberName)
    {
        int indexOf = memberName.IndexOf(DcString, StringComparison.InvariantCultureIgnoreCase);
        indexOf += DcString.Length;
        string domaninName = memberName.Substring(indexOf, memberName.Length - indexOf);

         if (domaninName.Contains(CommaString))
         {
             domaninName = domaninName.Split(new[] { CommaString }, StringSplitOptions.None)[0];
         }

         return domaninName;
     } 
```

即使我可能有“DC”和“DC =”，我也应该考虑这个变量的名称或将它们分成两部分:(。然后我的问题是： **我应该尽可能避免使用魔法字符串吗？**

**更新**。

**一些结论：**

*   有一些方法可以完全避免使用字符串，这可能会更好。为了实现它，可以使用：静态类、枚举器、数字常量、IOC 容器甚至反射。
*   常量字符串可帮助您确保没有任何拼写错误（在所有对字符串的引用中）。
*   标点符号的常量字符串没有任何全局语义。使用它们会更具可读性，因为它们是**","**。如果该常量将来可能会发生变化，则可以考虑在这种情况下使用常量，例如将**“，”**更改为**“。”** （有一个常量可以帮助你进行重构，尽管现代工具作为**resharper**不需要常量或变量就可以做到这一点）。
*   如果您只使用它字符串一次，则不需要将其变为常量。但是请考虑一个常量可以记录并显示在文档中（如 Javadocs）。这对于非平凡的字符串值可能很重要。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T04:31:22.643

我当然会为“DC”和“objectCategory”等实际名称创建常量，但不会为标点符号。这样做的目的是确保您没有任何拼写错误等，并且您可以轻松找到使用该魔术字符串的地方的所有参考。标点符号并不是其中的一部分。

为了清楚起见，我假设魔术字符串是您必须处理的事情，您无法选择将它们设为由常量定义的数字。正如对您问题的评论一样，如果可能的话，这总是更可取的。但有时，如果您必须与需要它的其他系统交互，则必须使用字符串。

# c# - 将 DataGridView 与 IList 绑定 ，编辑然后只保存更改？

> ID：10662305
> 
> 赞同：1
> 
> 时间：2012-05-19T04:31:15.670
> 
> 标签：c#, winforms, data-binding, datagridview, datatable

我有以下服务等级：

```
public class MyService 
{
    List<MyModel> GetData() { .... }
    void Save(List<MyModel> changedRows) { .... }
} 
```

是否可以将 DataGridView 的数据源绑定到返回的列表`myService.GetDate()`；然后用户在 DataGridView 中编辑并单击“SaveAll”按钮通过调用函数提交所有更改`myService.Save(???)`？

是否可以获取已更改行的列表并将其传递给`myService.Save(list)`？

这似乎是一个常见问题，但我找不到太多信息。我使用了错误的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T05:39:58.737

我能想到的几个选项：

`MyModel`1）您可以将类包装在`MyModelView`包含`MyModel`属性和`Status`枚举属性（插入、更新、删除）的类中。当您获得 时`List<MyModel>`，您可以创建并填充一个`List<MyModelView>`并将该新列表绑定到 datagridview。每当用户编辑行时，您都会`Status`根据用户操作（插入、更新、删除）更新属性。请注意，这还需要一些额外的工作来[过滤](http://msdn.microsoft.com/en-us/library/system.windows.forms.bindingsource.filter.aspx)掉已删除的行，因为您可能不希望显示已删除的行。

2）您将`List<MyModel>`直接绑定到datagridview，但有一个单独`List<MyModelView>`的仅包含更改的行。任何时候有变化，你都会在这个单独的列表中跟踪变化。

# php - 从索引中删除错误的索引链接

> ID：10662306
> 
> 赞同：1
> 
> 时间：2012-05-19T04:31:17.917
> 
> 标签：php, google-analytics, yii, robots.txt

当我在页面上的内容选项卡下输入我的谷歌分析时，我看到这样的索引链接：

/index.php/my_controller/index/my_controller_page/23/my_controller_sort/status.desc。

我如何从谷歌中删除这些以及如何首先防止它们被索引或生成。请注意，这是使用 Yii 框架。

编辑 1：问题出现在 CLinkPager 和 CListView 中。扩展 CListView（建议如下）仅部分解决了 Sort by ... 标准上的问题。为了解决 CLinkPager 的问题（当您没有为分页定义重写规则时），我修改了源 CLinkPager.php：

```
return '<li class="'.$class.'">'.CHtml::link($label,$this->createPageUrl($page),array('rel'=>'nofollow')).'</li>'; 
```

和作品。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T04:44:02.257

您似乎正在使用`CGridView`或`CListView`其他一些内置小部件来显示可排序的项目列表，并且 Google 正在跟踪排序链接。

根据这是哪个小部件，可能有更好的方法，但您可能需要扩展负责渲染的类以手动执行此操作。

如果您正在使用`CListView`，[本主题](http://www.yiiframework.com/forum/index.php/topic/11594-clistview-sort-links-nofollow/)可能会有所帮助。

如果您使用 a `CGridView`，您将扩展`CDataColumn`并覆盖其方法，以便在调用时作为第三个参数[`renderHeaderCellContent`](http://www.yiiframework.com/doc/api/1.1/CDataColumn#renderHeaderCellContent-detail)传递。`array('rel' => 'nofollow')``getSort()->link(...)`

# python - Python 和 CGI ：防止刷新时重新发送表单数据

> ID：10662307
> 
> 赞同：2
> 
> 时间：2012-05-19T04:31:21.940
> 
> 标签：python, html, cgi

我是 Python 新手（不知何故，我 2 天前开始研究 Python）。

我尝试用 CGI 编写一个简单的交互式网页，并使用 HTML 表单来获取用户输入。但是，众所周知，如果我刷新网页，表单数据会再次重新提交。我只是不知道如何防止这种情况发生。

同样的问题，但是在php/javascript中，已经讨论过并且可以找到解决方案，但是我想找到python案例的答案。

我希望这里有人可以解决我的问题。由于我对这门语言不是很熟悉，所以我希望不仅给我一个描述性的解决方案，还可以给我一些必要的代码。

非常感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T10:55:42.617

您的问题不是特定于 Python 的，而是关于一般 Web 应用程序设计模式的。

1.  将`GET`s 用于不更改 Web 应用程序状态的请求（查看、查询等）。在响应中呈现页面。
2.  用于`POST`任何修改状态的请求（提交、编辑、删除）。
3.  永远不要在响应中呈现任何内容，提供[303 See Other](http://en.wikipedia.org/wiki/HTTP_303)重定向到`POST`可以看到结果的页面。[例如，如果用户在页面http://example.com/blog/123](http://example.com/blog/123)上添加了评论，则`POST`处理程序可以是[http://example.com/submitcomment](http://example.com/submitcomment)，但它应该只返回到[http://的重定向example.com/blog/123#comment5](http://example.com/blog/123#comment5)。

这就是@mikep 所说的Post-Redirect-Get。

关于相关说明：帮自己一个忙，跳过 CGI。有许多用于 Python 的漂亮而干净的 Web 框架。如果您正在构建一个大型应用程序，请尝试 Flask 或 Bottle（较小的框架）或直接使用 Django。在 Stack Overflow 上搜索不同框架的优缺点。

跳过CGI。很难构建一个好的和可维护的 CGI 应用程序，有太多的事情需要处理，如果在框架中已经考虑过的事情。

一段时间以来，我一直在浪费时间支持 CGI 应用程序，而切换到框架是一种解脱。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-19T05:25:52.013

您可能想查看这些讲座：[http ://www.udacity.com/overview/Course/cs253/CourseRev/apr2012](http://www.udacity.com/overview/Course/cs253/CourseRev/apr2012)

第 2 周将解决您的疑问。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-19T05:51:24.297

看看[POST-REDIRECT-GET](http://en.wikipedia.org/wiki/Post/Redirect/Get) Web 编程模式。

# ruby-on-rails-3 - 在 composition_of 类中使用非持久字段

> ID：10662312
> 
> 赞同：1
> 
> 时间：2012-05-19T04:32:34.587
> 
> 标签：ruby-on-rails-3, activerecord

我在 Booking 对象中有信用卡信息，由于 PCI 合规性，我无法将其存储在数据库中。所以我可以保存一些字段（客户姓名），但我不能保存一些字段（卡号等）。

我的问题：如何获取未保存到我的committed_of 类（在本例中为CreditCard）的数据。

我试过添加：

```
attr_accessor :card_number
composed_of :credit_card, :mapping => [%w(card_number card_number), %w(first_name, first_name)] 
```

预订。first_name 流过，因为它是数据库列，但 card_number 没有。

关于如何正确进入系统的任何建议？我想我可以直接去卡，但我觉得这势必会导致一些隐藏的问题，因为我是：

1.  向值对象添加可变性
2.  规避幕后发生的一切

有什么建议么？

# r - R：重命名数据框中的变量子集

> ID：10662314
> 
> 赞同：2
> 
> 时间：2012-05-19T04:33:23.790
> 
> 标签：r, rename, base, gsub

我正在重命名数据框中的大多数变量，但我的方法并没有给我留下深刻的印象。

因此，SO 上的任何人是否有比下面介绍的仅使用基础的更智能或更快的方法？

```
 data(mtcars)
  # head(mtcars)

  temp.mtcars <- mtcars
  names(temp.mtcars) <- c((x <- c("mpg", "cyl", "disp")), 
                           gsub('^', "baR.", setdiff(names (mtcars),x)))
  str(temp.mtcars)
  'data.frame': 32 obs. of  11 variables:
   $ mpg     : num  21 21 22.8 21.4 18.7 18.1 14.3 24.4 22.8 19.2 ...
   $ cyl     : num  6 6 4 6 8 6 8 4 4 6 ...
   $ disp    : num  160 160 108 258 360 ...
   $ baR.hp  : num  110 110 93 110 175 105 245 62 95 123 ...
   $ baR.drat: num  3.9 3.9 3.85 3.08 3.15 2.76 3.21 3.69 3.92 3.92 ...
   $ baR.wt  : num  2.62 2.88 2.32 3.21 3.44 ...
   $ baR.qsec: num  16.5 17 18.6 19.4 17 ...
   $ baR.vs  : num  0 0 1 1 0 1 0 1 1 1 ...
   $ baR.am  : num  1 1 1 0 0 0 0 0 0 0 ...
   $ baR.gear: num  4 4 4 3 3 3 3 4 4 4 ...
   $ baR.carb: num  4 4 1 1 2 1 4 2 2 4 ... 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-19T06:39:48.783

**仅使用基本 R 编辑答案**

该软件包`plyr`有一个方便的功能`rename()`，可以满足您的要求。您修改后的问题指定仅使用基础 R。一种简单的方法是简单地复制代码`plyr::rename`并创建自己的函数。

```
rename <- function (x, replace) {
  old_names <- names(x)
  new_names <- unname(replace)[match(old_names, names(replace))]
  setNames(x, ifelse(is.na(new_names), old_names, new_names))
} 
```

该函数`rename`接受一个命名向量的参数，其中向量的元素是新名称，向量的名称是现有名称。有很多方法可以构建这样一个命名向量。在下面的示例中，我只是使用`structure`.

```
x <- c("mpg", "disp", "wt")
some.names <- structure(paste0("baR.", x), names=x)
some.names
       mpg       disp         wt 
 "baR.mpg" "baR.disp"   "baR.wt" 
```

现在您已准备好重命名：

```
mtcars  <- rename(mtcars, replace=some.names) 
```

结果：

```
'data.frame':   32 obs. of  11 variables:
 $ baR.mpg : num  21 21 22.8 21.4 18.7 18.1 14.3 24.4 22.8 19.2 ...
 $ cyl     : num  6 6 4 6 8 6 8 4 4 6 ...
 $ baR.disp: num  160 160 108 258 360 ...
 $ hp      : num  110 110 93 110 175 105 245 62 95 123 ...
 $ drat    : num  3.9 3.9 3.85 3.08 3.15 2.76 3.21 3.69 3.92 3.92 ...
 $ baR.wt  : num  2.62 2.88 2.32 3.21 3.44 ...
 $ qsec    : num  16.5 17 18.6 19.4 17 ...
 $ vs      : num  0 0 1 1 0 1 0 1 1 1 ...
 $ am      : num  1 1 1 0 0 0 0 0 0 0 ...
 $ gear    : num  4 4 4 3 3 3 3 4 4 4 ...
 $ carb    : num  4 4 1 1 2 1 4 2 2 4 ... 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-19T23:57:46.470

我会使用`ifelse`：

```
names(temp.mtcars) <- ifelse(names(mtcars) %in% c("mpg", "cyl", "disp"),
                             names(mtcars),
                             paste("bar", names(mtcars), sep = ".")) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-19T10:25:47.983

几乎相同但没有`plyr`：

```
data(mtcars)

temp.mtcars <- mtcars

carNames <- names(temp.mtcars)
modifyNames <- !(carNames %in% c("mpg", "cyl", "disp"))

names(temp.mtcars)[modifyNames] <- paste("baR.", carNames[modifyNames], sep="") 
```

输出：

```
str(temp.mtcars)
'data.frame':   32 obs. of  11 variables:
$ mpg     : num  21 21 22.8 21.4 18.7 18.1 14.3 24.4 22.8 19.2 ...
$ cyl     : num  6 6 4 6 8 6 8 4 4 6 ...
$ disp    : num  160 160 108 258 360 ...
$ baR.hp  : num  110 110 93 110 175 105 245 62 95 123 ...
$ baR.drat: num  3.9 3.9 3.85 3.08 3.15 2.76 3.21 3.69 3.92 3.92 ...
$ baR.wt  : num  2.62 2.88 2.32 3.21 3.44 ...
$ baR.qsec: num  16.5 17 18.6 19.4 17 ...
$ baR.vs  : num  0 0 1 1 0 1 0 1 1 1 ...
$ baR.am  : num  1 1 1 0 0 0 0 0 0 0 ...
$ baR.gear: num  4 4 4 3 3 3 3 4 4 4 ...
$ baR.carb: num  4 4 1 1 2 1 4 2 2 4 ... 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-03-05T04:34:02.627

您可以使用包`rename.vars`中的功能`gdata`。当您只想替换变量名称的子集并且名称向量的顺序与 data.frame 中名称的顺序不同时，它很有效。

改编自帮助文件：

```
library(gdata)
data <- data.frame(x=1:10,y=1:10,z=1:10)
names(data)
data <- rename.vars(data, from=c("z","y"), to=c("Z","Y"))
names(data) 
```

转换 data.frame 名称：

```
[1] "x" "y" "z" 
```

到

```
[1] "x" "Y" "Z" 
```

即，请注意这如何处理子集以及名称字符串与 data.frame 中名称的顺序不同的事实。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-12-11T02:29:07.833

```
names(df)[match(
                c('old_var1','old_var2'),
                names(df)
               )]=c('new_var1', 'new_var2') 
```

# ios - 想要在静态 TableViewCells 内部的 Touch up 上触发 IBAction

> ID：10662319
> 
> 赞同：3
> 
> 时间：2012-05-19T04:35:15.467
> 
> 标签：ios, xcode, static, tableviewcell

我在情节提要上有一个静态 TableViewCells。这些单元格中只有标签。我想在触摸时触发 IBAction 事件。我现在正在做的是创建一个全尺寸的白色按钮并链接到 IBAction。But it doesn't show highlighted color when the cell is selected because cell is behind the button.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T04:39:28.787

UITableViewCells 有一个专门用于处理行触摸的委托方法[-tableView:didSelectRowAtIndexPath:](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UITableViewDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intfm/UITableViewDelegate/tableView%3adidSelectRowAtIndexPath%3a)

如果您需要每个单元格上的自定义按钮，请子类化 UITableViewCell 而不是通过故事板。尽管故事板可能会节省时间，但在涉及到细节的 iOS 编程时，故事板确实是一个限制因素。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-19T06:04:53.363

Try adding this in your cellForRowAtIndexPath (when you initialize each cell):

```
cell.selectionStyle = UITableViewCellSelectionStyleBlue; 
```

Does this fix it?

# java - Netbeans 不断重启

> ID：10662322
> 
> 赞同：9
> 
> 时间：2012-05-19T04:35:51.477
> 
> 标签：java, windows, netbeans-7, netbeans-plugins, nokia-s40

我已经安装了 Nokia sdk 1.1 并选择将 sdk 与 Netbeans IDE 集成。之后我尝试关闭 Ide，但 Ide 不断重启并重新安装插件。什么可以解决问题？我尝试重新启动计算机，但仍然没有任何变化。Ide 不会停止重新启动。谢谢![在此处输入图像描述](../Images/4087e33d2fe8fd7e1757e24db5dfeb73.png)

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-06-02T08:55:19.673

我遇到了同样的问题。发生这种情况是因为 NetBeans 没有足够的更新权限。通过任务管理器杀死 NetBeans -> 右键单击​​快捷方式 -> 以管理员身份运行。现在，当您关闭 NetBeans 时，它不会再重新启动。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-17T01:23:37.007

我有类似的问题，*Netbeans*在关闭后会自动重新启动。我发现它尝试在程序启动时更新**JUnit**插件但无法成功完成。然后，我以管理员身份运行*Netbeans*，问题现在解决了。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-01-11T22:04:59.940

显然这个问题是由更新失败引起的。就我而言，解决方案是转到 Netbeans 的安装路径并完全清空子文件夹 enterprise\update\download。之后它再次正常启动，然后重新尝试安装更新成功

这个网站对我有用：

[http://blog.ginchen.de/en/2013/09/26/netbeans-startet-nach-dem-schliessen-sofort-neu/](http://blog.ginchen.de/en/2013/09/26/netbeans-startet-nach-dem-schliessen-sofort-neu/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-27T10:27:17.353

对于 Mac OS 用户：您可以通过使用以下代码创建 AppleScript 来解决此问题：

```
do shell script "/Applications/NetBeans/NetBeans\\ 8.0.1.app/Contents/MacOS/netbeans" with administrator privileges 
```

（根据需要调整 NetBeans 安装路径），并将其导出为应用程序。当您启动它时，系统会在启动 NetBeans 之前要求管理员权限，更新程序按预期工作，并且 NetBeans 一直停止重新启动......

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-06-01T18:00:00.440

右键单击快捷方式转到属性单击高级选中“以管理员身份运行”框

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-09-19T23:24:40.140

只需启动任务管理器并终止 Netbeans 进程。现在您的 Netbeans IDE 将停止重新启动。现在以管理员身份运行 Netbeans IDE。现在它不会重新启动。享受！该解决方案对我有用。我希望它适用于每个人:)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-07-15T16:47:57.963

有两种方法：

1-您可以从任务管理器结束任务“更新”。这次它解决了您的问题，但是当您再次打开 Netbeans 时，您将遇到同样的问题。

2- 以管理员身份运行 Netbeans。它将让更新程序完成更新，并将永远解决问题。

# asp.net - Orchard CMS 1.4.1 中的访问被拒绝

> ID：10662328
> 
> 赞同：2
> 
> 时间：2012-05-19T04:38:01.017
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, orchardcms

我使用适当的数据库将我的一个解决方案转换为 Orchard 1.4.1。

`Q1: Whenever I run or goto any link by clicking menu item then it always hits to AccountController/AccessDenied method of Orchard.Users. why?`

`Q2: How to resolve this?`

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T16:10:46.253

有两种情况可能会发生这种情况：

1.  **您从 1.3（或更早）版本更新到 1.4.1。**如果是这种情况 - 检查[1.4 升级信息。](http://docs.orchardproject.net/Documentation/Orchard-1-4-Release-Notes) *编辑：实际上这可能不是你的情况——在这种情况下你会得到 404，而不是 AccessDenied。*
2.  **您正在使用最近的 1.x 开发分支的源代码。**有一个新模块正在开发中，可以将某些页面的可见性限制为特定用户。如果是这种情况 - 转到管理屏幕并将页面“查看”权限分配给匿名角色。

# macos - 如何在 mac 上显示特定的隐藏文件？

> ID：10662329
> 
> 赞同：0
> 
> 时间：2012-05-19T04:38:01.303
> 
> 标签：macos, file, hidden

比如通过文件扩展名？

例如，我不想查看 .DS_STORE 文件，但我想查看所有 .htaccess 文件。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T04:46:29.980

打开终端并输入

```
 ls -a | grep -G .YOUR_EXTENSION$ 
```

有关正则表达式的更多信息，请参见[http://www.robelle.com/smugbook/regexpr.html](http://www.robelle.com/smugbook/regexpr.html)`man grep``man ls`

# mysql - 两个不同应用程序之间的 M2M

> ID：10662330
> 
> 赞同：0
> 
> 时间：2012-05-19T04:38:26.563
> 
> 标签：mysql, django, django-models

我在不同的应用程序中有两个模型：

```
# Groups app
class Group(models.Model):
    name = models.CharField(max_length=256)
    abbreviation = models.CharField(max_length=32)
    admin = models.ManyToManyField('UserProfile')

# UserProfile app
class UserProfile(models.Model):
    user = models.OneToOneField(User)
    groups = models.ManyToManyField(Group) 
```

换言之，一个用户可能属于多个群组（User M2M to Groups），而且一个群组可能有一个或多个管理员（Group M2M to Users）。因此，我在`syncdb`这里遇到了麻烦。在这里进行的最佳方式是什么？我应该 1) 合并`Groups`到`UserProfile`应用程序中吗？或 2)`ALTER TABLE`事后的用户声明以建立 M2M 链接之一？或 3) 别的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T04:42:30.133

[https://docs.djangoproject.com/en/dev/ref/models/fields/#foreignkey](https://docs.djangoproject.com/en/dev/ref/models/fields/#foreignkey)

```
class Group(models.Model):
    name = models.CharField(max_length=256)
    abbreviation = models.CharField(max_length=32)
    admin = models.ManyToManyField('userprofile.UserProfile') 
```

# android - 将参数从 C++ 传递到 android 中的程序集

> ID：10662334
> 
> 赞同：1
> 
> 时间：2012-05-19T04:38:57.693
> 
> 标签：android, gcc, assembly, java-native-interface, arm

我正在尝试将四个以上的参数从我的 C++ 代码传递给程序集。

C++ 函数如下所示：

```
static float armFunction(float, float, float, float, float); 
```

我可以毫无问题地从寄存器 r0-r3 中检索前四个参数。

我希望我的第五个浮点参数在堆栈上，我应该能够使用堆栈指针 sp 访问它，例如我尝试在 r4 中加载我的第五个参数，例如：

```
ldr r4, [sp] 
```

甚至：

```
ldr r4, [sp, #-0x4] 
```

但这不起作用，并且汇编代码立即退出，并带有一些堆栈损坏输出。

我的完整汇编代码如下所示：http: [//pastie.org/3933875](http://pastie.org/3933875)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T13:58:23.873

我的 asm 代码从 C 到 asm 的 JNI 调用中读取第 5 个参数没有问题。这是我的 asm 函数的前 2 行：

```
 stmfd    sp!,{r4-r12,lr}
  ldr      r12,[sp,#40]   @ first stack variable 
```

在不需要保留任何寄存器的情况下，第 5 个参数位于堆栈顶部：

```
 ldr r12,[sp] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T15:27:23.203

The problem with your code is that is modifies r4 without restoring it. The parameter is on the top of the stack.

# jquery - 滚动时文本如何改变颜色？

> ID：10662335
> 
> 赞同：1
> 
> 时间：2012-05-19T04:38:59.993
> 
> 标签：jquery, css, scroll, css-transitions

我一直在尝试弄清楚导航中的文本和此站点 [http://www.tokiolab.it/](http://www.tokiolab.it/)上的徽标在您滚动时如何改变颜色。

当你很容易到达不同的部分时，我可以改变颜色，但是在这个网站上，当你滚动时，文本和徽标是半黑半白的，反之亦然。

它似乎正在使用某种透明背景？关于如何获得这种效果的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T04:42:50.620

术语称为：“视差”

您会在 tokiolab 网站上注意到他们使用以下图片：

*   [http://www.tokiolab.it/img/en_nav_portfolio.png](http://www.tokiolab.it/img/en_nav_portfolio.png)
*   [http://www.tokiolab.it/img/en_nav_contatti.png](http://www.tokiolab.it/img/en_nav_contatti.png)
*   [http://www.tokiolab.it/img/en_nav_mission.png](http://www.tokiolab.it/img/en_nav_mission.png)

他们使用类似视差的效果将这些图像放在不同的“层”上，因此当您向下滚动时，看起来图像正在改变颜色，而实际上它只是另一层上的不同背景图像。

您可以使用一些不同的插件，例如：

*   [http://www.ianlunn.co.uk/plugins/jquery-parallax/](http://www.ianlunn.co.uk/plugins/jquery-parallax/)
*   [http://johnpolacek.github.com/scrollorama/](http://johnpolacek.github.com/scrollorama/)
*   [http://www.davecranwell.com/content/jquery-scroll-parallax-plugin](http://www.davecranwell.com/content/jquery-scroll-parallax-plugin)
*   [http://curtain.victorcoulon.fr/#intro](http://curtain.victorcoulon.fr/#intro)
*   [http://joelb.me/scrollpath/](http://joelb.me/scrollpath/)

可能需要一些修补，但前几个可以让你朝着正确的方向前进！

# iframe - 滚动溢出时不在视口中时 iOS 上的 iframe 问题

> ID：10662339
> 
> 赞同：2
> 
> 时间：2012-05-19T04:39:52.927
> 
> 标签：iframe, scroll, overflow, viewport

根据此处的此博客文章（[http://www.david-lewis.com/css/css-that-c](http://www.david-lewis.com/css/css-that-can-affect-performance-on-ipad-web-apps-or-phonegap/) ​​an-affect-performance-on-ipad-web-apps-or-phonegap/ ），iOS 中有一个错误5 我不知道如何解决。

基本上就像标题所说的那样，如果您的网站有一部分是滚动的（我正在使用 new `-webkit-overflow-scrolling`），并且如果有一个 iframe 超出视口，它将不会加载它。

上面链接的博客文章说：

> **iFrame**
> 
> **它是什么**：在溢出：滚动元素中使用 iFrame 来显示视频或地图之类
> **的内容有什么症状**：如果您有一个 iframe 在溢出：滚动元素中位于视口之外（尤其是在使用 -webkit-overflow-scrolling 时：触摸）然后滚动到它时它不会呈现有
> **什么解决方法**：不知道，请给我答案

有谁知道如何解决这一问题？我一直在网上寻找治疗方法，但没有运气。好像是如果点击iframe，点击后会显示出来。

在我看来，这对于开发网络应用程序的人来说是一个巨大的问题。有谁知道修复？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T14:49:41.100

好吧，我讨厌将此作为官方“答案”，但截至发帖时，还没有修复...

我假设如果您使用 JavaScript 从 iframe 中提取 HTML，将代码放在同一个位置，并以某种方式让 CSS 也可以使用它，它会起作用。但是该死的，在像 iPhone 这样的慢速设备上做这件事的工作量太大了。

# android - 如何在android中为视图翻转器实现Flipboard ipad翻页动画？

> ID：10662344
> 
> 赞同：12
> 
> 时间：2012-05-19T04:41:45.533
> 
> 标签：android, viewflipper

试图实现翻页动画与 Flipboard ipad 应用程序完全一样。我参考了一些博客和以下链接：

[Android：如何为 android 活动制作翻转动画，就像 iphone 从左到右水平翻转一样？](https://stackoverflow.com/questions/8499767/android-how-to-make-the-flip-animation-for-android-activity-as-like-iphone-fli)

[如何在android中做翻页/翻页/卷曲效果](https://stackoverflow.com/questions/3839117/how-to-do-page-flip-turn-curl-effect-in-android)

但只能实现正常的页面卷曲效果。有没有办法在android中实现类似于flipboard ipad应用程序的视图翻转器的翻页效果？Flipboard ipad 应用程序动画如下链接所示：

[Flipboard ipad 应用程序](http://www.youtube.com/watch?v=v2vpvEDS00o&feature=youtube_gdata_player)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-23T01:19:18.743

试试这个： http: [//openaphid.github.com/blog/2012/05/21/how-to-implement-flipboard-animation-on-android/](http://openaphid.github.com/blog/2012/05/21/how-to-implement-flipboard-animation-on-android/)

它可能不符合您的要求，因为它使用 OpenGL ES。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-28T09:17:20.973

[这](http://oreilly.com/javascript/archive/flashhacks.html)是一个很好的教程来解释这个原理（它是用 Flex 实现的，但也适用于 android）。

# python - Python用字母数字字符串列表排序？

> ID：10662350
> 
> 赞同：0
> 
> 时间：2012-05-19T04:42:45.157
> 
> 标签：python, list, sorted

这是问题所在，我正在使用该`sorted`函数来排列字母数字字符串列表。所述字符串必须在其中以字母分隔的数字。

例如：`sortqns(['s1q1', 's10q1', 's1q2', 's10q10', 's10q2'])`

```
def cmpqn(a, b):
    if len(a) > len(b):
      return 1
    if len(a) < len(b):
      return -1
    if len(a) == len(b):
      return 0

def sortqns(qnlist):
    new = sorted(qnlist, cmp=cmpqn) 
    return new 
```

退货`['s1q1', 's1q2', 's10q1', 's10q2', 's10q10']`

我的问题是对第二个数字进行排序：

```
sortqns(['s12q1', 's1q2', 's1q1'])

Returns ['s1q2', 's1q1', 's12q1'] 
```

代替：

```
Returning ['s1q1', 's1q2', 's12q1'] 
```

在第一个示例中，如果前两个项目也被交换，我想要的回报将是关闭的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-19T05:07:10.583

列表中的排序算法是稳定的。稳定的排序算法保持具有相同键的记录的相对顺序。因此，在您的代码中，当两个元素具有相同的长度时，它们将出现在结果中并保持它们的相对顺序。

我认为以下解决方案很有帮助。

```
def sortqns(qnlist):
    return sorted(qnlist, key = lambda x: (len(x), x)) 
```

# ember.js - 在 Ember.js 的模板中，当您在 #each 块中时，如何引用父上下文中的值？

> ID：10662353
> 
> 赞同：10
> 
> 时间：2012-05-19T04:43:42.157
> 
> 标签：ember.js

我在模板中有一种情况，我想在每个块内对父上下文中的值使用 if 块。

编码：

```
App = Ember.Application.create({});

App.view = Ember.View.extend({
    foo: [1, 2, 3],
    bar: true
}); 
```

模板：

```
<script type="text/x-handlebars">
{{#view App.view}}
    {{#each foo}}
        {{#if bar}}
            {{this}}
        {{/if}}
    {{/each}}
{{/view}}
</script> 
```

这不起作用，因为在 each 循环内引用的名称的范围仅限于迭代元素。您如何在父上下文中引用事物？

演示：http: [//jsfiddle.net/hekevintran/sMeyC/1/](http://jsfiddle.net/hekevintran/sMeyC/1/)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-23T01:53:48.807

我找到了更好的解决方案。

从 Ember.js 视图层指南（[http://emberjs.com/guides/understanding-ember/the-view-layer/](http://emberjs.com/guides/understanding-ember/the-view-layer/)）：

> Ember 中的车把助手也可以指定变量。例如，{{#with controller.person as tom}} 形式指定后代范围可以访问的 tom 变量。即使子上下文具有 tom 属性，tom 变量也会取代它。
> 
> 这种形式有一个主要好处：它允许您缩短长路径而不会失去对父范围的访问。
> 
> 这在 {{#each}} 助手中尤为重要，它提供了一个 {{#each person in people}} 表单。在这种形式中，后代上下文可以访问 person 变量，但仍与模板调用 each 的范围相同。

模板：

```
<script type="text/x-handlebars" >
    {{#view App.view}}
        {{#each number in view.foo}}
            {{#if view.bar}}
                {{number}}
            {{/if}}
        {{/each}}
    {{/view}}
</script>​ 
```

演示：http: [//jsfiddle.net/hekevintran/hpcJv/1/](http://jsfiddle.net/hekevintran/hpcJv/1/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-07-20T01:25:45.887

hekevintran 的回答意味着您可以使用`#with`. 我们在 JavaScript 中也有类似的问题`this`。在 JavaScript 中，有时您会看到这样的代码来解决它。

```
var self = this;
doSomething(function() {
  // Here, `this` has changed.
  if (self.bar) {
    console.log(this);
  }
}); 
```

在 Ember 风味的车把中，类似的事情正在发生`view`。假设您有 App.MyOuterView 和其中的另一个视图。你可以像这样解决它。

```
{{#with view as myOuterView}}
  {{#each foo}}
    {{#if myOuterView.bar}}
      {{this}}
    {{/if}}
  {{/each}}
{{/with}} 
```

与 JavaScript 类似，您基本上可以重命名`view`为其他名称，这样它就不会被内部视图遮蔽。 `{{#each person in people}}`只是其中的一个特例。但是重命名 using`{{#with view as myView}}`是解决此问题的更通用的解决方案/解决方法，它也适用于对`view`帮助程序的嵌套调用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-02-14T22:11:23.017

我也被这件事难住了。该线程和其他线程（[在 ember.js 中使用容器视图 - 如何从子视图访问父变量](https://stackoverflow.com/questions/15705805/using-a-container-view-in-ember-js-how-to-access-parent-variables-from-child-v)）帮助我解决了问题。我使用乔纳森的建议做 {#with} 并且还发现我应该通过调用控制器来访问我的变量。我的工作是这样的：

```
// I use the #which command to preserve access to the outer context once inside the #each
{{#with view as myOuterView}}
  {{#each myInnerArray}}
    //here, i get my 'name' property from the *controller* of myOuterView
    {{myOuterView.controller.name}}
    // stuff i did in inner array
  {{/each}
{{/with} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-20T17:15:13.393

无需将`if`内部`each`放在首位：

```
<script type="text/x-handlebars">
  {{#view App.view}}
    {{#if view.bar}}
      {{#each view.foo}}
        {{this}}
      {{/each}}
    {{/if}}
  {{/view}}
</script> 
```

演示：http: [//jsfiddle.net/ppanagi/NQKvy/35/](http://jsfiddle.net/ppanagi/NQKvy/35/)

# objective-c - 什么是子例程和便利初始化程序？

> ID：10662354
> 
> 赞同：-1
> 
> 时间：2012-05-19T04:43:47.160
> 
> 标签：objective-c, function, initialization, subroutine, initializer

我大约 8 个月前开始学习编程，从 C、OOP 开始，现在到 iOS，这是我的目标。在大多数情况下，一切都很顺利，我已经开始通过在 xcode 上编写小型应用程序来练习。只是像子例程和便利初始化程序这样的小术语有时会让我失望。任何人都可以为我定义这些术语，并给我一个简单的例子来说明它们的用法吗？在我的演示中，我不必使用它们，但是我学习的讲座中提到了它们，但是它们并没有很好地解释它们。网上也没有太多关于这些条款的信息。顺便说一句，我知道这些术语完全不相关

任何帮助表示赞赏，谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T14:26:31.390

**便利初始化程序**是一个接受参数的初始化程序，因此您可以使用 nil 以外的值初始化对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T04:51:49.793

Objective-C 中的“子例程”称为[方法](http://memegenerator.net/instance/20248546)，它由说明符、返回值和参数组成。类方法只能发送给声明类，而实例方法需要调用实例。

示例类方法可能如下所示：

```
+(void)doMagicWithString:(NSString*)magicString; 
```

并简单地调用：

```
[MyDeclaringClass doMagicWithString:@"Example"]; 
```

+ 表示它的类方法状态，doMagicWithString: 是方法的实际名称，magicString 是它的参数。

示例实例方法可能如下所示

```
-(CFRabbit*)beVewyQuiet:(BOOL)quiet imHuntingWabbits:(CFHunter*)hunter; 
```

在 C 中看起来像这样：

```
CFRabbit* beVewyQuiet(bool quiet, CFHunter* hunter); 
```

此方法返回 CFRabbit* 类型的对象，并且只能由类的活动实例调用，如下所示：

```
[self.myInstanceOfDeclaringClass beVewyQuiet:YES imHuntingWabbits:nil]; 
```

“便利初始化器”（便利方法）只是一个消息，它用一个快速简单的类方法替换`+alloc`和。`-init`例如，[NSArray](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSArray_Class/NSArray.html#//apple_ref/occ/clm/NSArray/array)的`+array`方法返回一个空数组，或者[NSDictionary](https://developer.apple.com/library/ios/documentation/cocoa/reference/Foundation/Classes/NSDictionary_Class/Reference/Reference.html#//apple_ref/occ/clm/NSDictionary/dictionary)的`+dictionary`方法返回一个空字典。

而在此之前，它需要这样的消息：

```
myArray = [NSArray alloc] init]; //long and unnecessary 
```

# javascript - 下载音乐文件而不是在浏览器中播放

> ID：10662357
> 
> 赞同：0
> 
> 时间：2012-05-19T04:44:41.560
> 
> 标签：javascript, file, download

我正在尝试在我的网站上制作一个下载器，它开始下载选定的文件，但问题是它是一个音乐文件，它只是在新窗口中打开并开始播放。

脚本是（不要担心下一部分的 id 部分）：

```
function downloadsong(id){
    var url = ("/music/downloadablesongs/linkin-park/Minutes-to-Midnight/wake.mp3");
    window.open(url,'Download')
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T05:54:32.513

如果您可以配置托管文件的服务器，您应该能够操作 HTTP 标头以包含“Content-Disposition”标头。这将提示用户代理（浏览器）保存文件，而不是让它自动检测/解释内容。

基本格式是：

```
Content-Disposition: attachment; filename=$file_name.ext 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T04:47:18.940

这取决于用户的浏览器。通常，插件或内置浏览器功能会接管并播放它，而不是让浏览器下载。

您可以做的是让文件不带扩展名（即 remove `.mp3`）。这样，它就不会被插件拾取。不利的一面是必须手动添加扩展程序，从而为用户带来额外的工作。

# c# - 如何在运行时在 mousemove 上移动控件？

> ID：10662363
> 
> 赞同：1
> 
> 时间：2012-05-19T04:45:32.683
> 
> 标签：c#, winforms, controls, mousemove

我有一个 WinForm 应用程序，我正在尝试使用 移动 Form 中的图片框`MouseMove Event`，但我不知道在 MouseMove 上应该做的正确计算是什么，当我第一次使用图片框时，它的位置会以一种毫无意义的方式发生变化在移动图片框位置时正确移动。

`OuterPanel`这是一个包含图片框的面板名称`picBox`，这里是我使用的代码：

```
private void picBox_MouseMove(object sender, MouseEventArgs e)
{
    if (e.Button == MouseButtons.Left)
    {
        Point p = OuterPanel.PointToClient(MousePosition);
        picBox.Location = this.PointToClient(p);
    }
} 
```

PS：目标是放大后的移动图像，如Windows照片查看器

![在此处输入图像描述](../Images/0e8ab2d602519d790ab977c47a84585b.png)

**更新**：`ConvertFromChildToForm`方法

```
private Point ConvertFromChildToForm(int x, int y,Control control)
{
    Point p = new Point(x, y);
    control.Location = p;
    return p;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-19T04:49:33.103

您必须管理三个事件才能正确完成：

*   `MouseDown`
*   `MouseMove`
*   `MouseUp`

[这是一个相关的SO问题..](https://stackoverflow.com/a/4935314/1118933)

您的代码`picBox`：

```
private void picBox_MouseDown(object sender, MouseEventArgs e)
{
    if (e.Button == MouseButtons.Left)
    {
        Point p = ConvertFromChildToForm(e.X, e.Y, picBox);
        iOldX = p.X;
        iOldY = p.Y;
        iClickX = e.X;
        iClickY = e.Y;
        clicked = true;
    }
}

private void picBox_MouseMove(object sender, MouseEventArgs e)
{
    if (clicked)
    {
        Point p = new Point(); // New Coordinate
        p.X =  e.X + picBox.Left;
        p.Y =  e.Y + picBox.Top;
        picBox.Left = p.X - iClickX;
        picBox.Top = p.Y - iClickY;
    }
}

private void picBox_MouseUp(object sender, MouseEventArgs e)
{
    clicked = false;   
}

private Point ConvertFromChildToForm(int x, int y, Control control)
{
    Point p = new Point(x, y);
    control.Location = p;
    return p;
} 
```

`ConvertFromChildToForm`方法从[`Mur Haf Soz`](https://stackoverflow.com/users/1015648/mur-haf-soz)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-10T21:26:50.123

随着使用

> ControlMoverOrResizer

[在本文](http://www.codeproject.com/Tips/709121/Move-and-resize-controls-on-a-form-at-runtime-with)中的类中，您只需一行代码就可以在运行时进行可移动和可调整大小的控制！：） 例子：

```
ControlMoverOrResizer.Init(button1); 
```

现在 button1 是一个可移动且可调整大小的控件！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-30T14:33:00.727

试试这个。很美丽。

```
const uint WM_NCLBUTTONDOWN = 161;
const uint HTCAPTION = 2;

[DllImport("user32.dll")]
public static extern bool ReleaseCapture();
[DllImport("user32.dll")]
public static extern IntPtr SendMessage(IntPtr window, uint message, IntPtr wParam, IntPtr lParam);

public Form1()
{
    PictureBox picBox = new PictureBox();
    picBox.Text = "this control is crazy!";
    picBox.BackColor = Color.Red;
    picBox.SetBounds(8, 8, 128, 64);
    picBox.MouseDown += OnMouseDown;
    Controls.Add(picBox);
}

private void OnMouseDown(object sender, MouseEventArgs e)
{
    ReleaseCapture();
    SendMessage((sender as Control).Handle, WM_NCLBUTTONDOWN, (IntPtr) HTCAPION, IntPtr.Zero);
} 
```

问题只是您必须使用 WinApi。它不会让标签移动。不知道为什么。

# javascript - 在 html5 中使用 canvas 动力学来绘制许多文本并编辑它们

> ID：10662366
> 
> 赞同：1
> 
> 时间：2012-05-19T04:45:59.730
> 
> 标签：javascript, jquery, canvas, kineticjs

当我点击卡片上的文字时，我希望能够像这个网站一样编辑文字：

[http://www.vistaprint.com/vp/ns/studio3.aspx?pf_id=064&combo_id=120585&free_studio_gallery=true&referer=http%3a%2f%2fwww.vistaprint.com%2fvp%2fns%2fdefault.aspx%3fdr%3d1% 26rd%3d1%26GNF%3d0%26GP%3d5%252f19%252f2012%2b12%253a36%253a37%2bAM%26GPS%3d2448654652%26GNF%3d1%26GPLSID%3d&rd=1](http://www.vistaprint.com/vp/ns/studio3.aspx?pf_id=064&combo_id=120585&free_studio_gallery=true&referer=http%3a%2f%2fwww.vistaprint.com%2fvp%2fns%2fdefault.aspx%3fdr%3d1%26rd%3d1%26GNF%3d0%26GP%3d5%252f19%252f2012%2b12%253a36%253a37%2bAM%26GPS%3d2448654652%26GNF%3d1%26GPLSID%3d&rd=1)

这是我的代码：

```
$(document).ready(function () {

    var Total_layers = 0;

    var Text = {};
    /*set up stage for drawing image*/
    var stage = new Kinetic.Stage({
        container: "container",
        width: 600,
        height: 400
    });
    // var Layer = {};
    /*create a layer object for placing text image over it and place it over the stage*/
    var layer = new Kinetic.Layer();
    //Layer[Total_layers]
    /*Text Property*/
    var New_Text = "Company Name";
    var Text_Font = "Arial";
    var Text_Color = "Black";

    var Text_Size = "30";
    var Text_Pos_X = 200;
    var Text_Pos_y = 100;
    var Selected_Text = new Kinetic.Text({});
    var current_layer = 0;
    // var text_selected = 1;

    /*Add event for them*/
    //var formElement = document.getElementById("New Text");

    // formElement.addEventListener('change', Text_Changed, false);

    var formElement = document.getElementById("selectFontSize");
    formElement.addEventListener('change', Text_Size_Changed, false);
    /*This Function will be Executed when the Size of the Text in consideration is changed*/
    function Text_Size_Changed(e) {
        var target = e.target;
        Text_Size = target.value;
        Text_Pos_X = 200; //Text[Total_layers].x;
        Text_Pos_Y = 100; //Text[Total_layers].y;
        //DeleteLayer(Total_layers);
        layer.remove(Selected_Text);
        Draw_text(Total_layers);
    }

    /*Function to swap the Kinetic Text object and get the selected Text object to The Top*/
    function swap_layers(Selected_text) {

        var temp = new Kinetic.Text({});

        for (var i = 1; i <= Total_layers; i++) {

            if (Text[i] == Selected_text) {

                temp = Text[i];
                Text[i] = Text[Total_layers];
                Text[Total_layers] = temp;
                break;
            }
        }
    }

    /*Add different Events to the Text objects once They are instantiated*/

    function add_events(dest_Text) {

        dest_Text.on("mouseover", function () {
            document.body.style.cursor = "pointer";
        });
        dest_Text.on("mouseout", function () {
            document.body.style.cursor = "default";
        });
        dest_Text.on("click", function () {

            $("#selectFontSize").change(function () {
                dest_Text.setFontSize($("#selectFontSize").val());
                layer.draw(); // vì gọi layer.draw nên tất cả text trong layer đó đều dc vẽ lại 
            });
            $("#selectFontFamily").change(function () {
                swap_layers(dest_Text);
                //dest_Text.setFontFamily($("#selectFontFamily").val());

                //layer.draw();
            });

        });

    }

    /*Draw the Text over the layer depening upon the Text_object_Number*/
    function Draw_text(Text_object_Number) {

        /*Set the Properties of the Topmost object that is been modified and which will be added to the layer*/
        Text[Text_object_Number] = new Kinetic.Text({

            x: Text_Pos_X,
            y: Text_Pos_Y,
            text: New_Text,
            fontSize: Text_Size,
            fontFamily: Text_Font,
            textFill: Text_Color,
            align: "center",
            verticalAlign: "middle",
            draggable: "true"

        });

        /*Adds all the Text objects onto the layer and adds the events to every Text object */
        //for (var i = 1; i <= Text_object_Number; i++) {
        layer.add(Text[Text_object_Number]);
        add_events(Text[Text_object_Number]);
        //}
        stage.add(layer);
    }
    $("#add_text").click(function () {
        Total_layers++;
        Text[Total_layers] = new Kinetic.Text({
            x: Text_Pos_X,
            y: Text_Pos_y,
            text: New_Text,
            fontSize: 30,
            fontFamily: Text_Font,
            textFill: Text_Color,
            align: "center",
            verticalAlign: "middle",
            draggable: "true"
        });
        add_events(Text[Total_layers]);
        layer.add(Text[Total_layers]);
        stage.add(layer);
    });

    /*Adding an image to the present Context*/
    var imageObj = new Image();
    //alert("abc");
    imageObj.onload = function () {
        var T_shirt = new Kinetic.Image({
            x: 60,
            y: 0,
            image: imageObj,
            width: 550,
            height: 400,
            name: "image"
        });

        layer.add(T_shirt);
        stage.add(layer);
    }
    imageObj.src = "../../Content/Image/imagepreview1.jpg";
}); 
```

我尝试了很多方法，但我仍然无法解决这个问题。

如何通过在 html5 中使用 canvas kineticjs 来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T18:29:58.780

恕我直言，最好的解决方案是使用简单的 JavaScript 提示：

```
myText.on('click', function(evt) {
    this.setText(prompt('New Text:'));
    layer.draw(); //redraw the layer containing the textfield
}); 
```

在这个线程中查看我的答案：[动态 js 中的可编辑文本选项](https://stackoverflow.com/questions/13271436/editable-text-option-in-kinetic-js/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T16:58:59.393

您不能直接在画布上编辑文本，但您可以通过事件更改它。因此，您需要的是在画布旁边创建的输入表单，您可以使用 javascript 从表单中读取。

```
 <input type=text id=changeText/> 
```

这样，当您单击某些文本时，将出现一个新的输入标签，您可以输入它，并且画布内的文本会随着您的输入而改变。

```
 mytext.on('click', function(){ ... create new input element at the side ... });
 //add some jQuery
 $('#changeText').onchange( mytext.setText($('$changeText').val())); 
```

# c# - 如何授予godaddy服务器虚拟主机上文件的访问权限？

> ID：10662367
> 
> 赞同：0
> 
> 时间：2012-05-19T04:46:13.600
> 
> 标签：c#, asp.net, web-services, hosting

我在 godaddy 服务器上托管我的 .net 网络服务。我已授予文件夹的读/写权限。但它不提供对任何文件的授予权限。

因此，当我尝试将任何文件从我的网络服务上传到服务器时，它会给我一个错误

```
"You dont have rights to access D:\Hosting\957031\html " 
```

可能是什么问题？

我该如何解决？

谢谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T05:06:07.897

很可能 IIS 用户没有足够的权限在 html 文件夹中创建/写入文件。您应该为此联系您的托管服务提供商。

# imap - 如何通过 spring/amqp/rabbit 收听数千个 imap 空闲收件箱

> ID：10662370
> 
> 赞同：0
> 
> 时间：2012-05-19T04:46:56.443
> 
> 标签：imap, jakarta-mail, rabbitmq, spring-integration, spring-amqp

用例是让服务器连接到数千个用户的电子邮件帐户并在 java 中嗅探传入的邮件，最好使用 java mail 和 spring integration/amqp/rabbit mq 类型的可扩展基础架构。以及 imap 空闲类型连接并根据需要添加服务器处理节点。

使用 imap 空闲入站适配器可以轻松实现单个入站通道。您可以在 XML 中配置一些。但是，如果您需要一个包含数千个这些适配器的持久侦听器/iapidlechannel 适配器队列，并且需要动态添加新的用户连接以进行服务器处理。这将是一个挑战。还需要故障处理，如果 java 侦听器死亡或服务器重新启动所有这些侦听器，它们的配置也会重新启动与重建数千个这些连接并在某些连接失去空闲接收能力而不重建空闲接收的所有用户连接时恢复。

任何想法都受到欢迎，因为搜索了很多但找不到任何东西？这似乎是关于打开电子邮件接收连接的重要可伸缩性问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-22T06:15:29.177

另一种选择可能是看看像 Akka 这样的演员执行异步 io。您需要放弃 JavaMail 包并自己解析 imap 命令，但是有很多包可以做到这一点。很想听听您是否有更好的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T07:12:50.697

如果您想使用 IMAP IDLE 命令通过 JavaMail 侦听新邮件，则每个邮箱需要一个线程，这可能会影响您的可伸缩性。即使保持数千个连接打开也可能是一个问题。

你没有说你需要多快对新消息做出反应。除非您有近乎实时的要求，否则最好每隔一段时间轮询一部分邮箱，最终循环遍历所有邮箱。

您需要自己处理容错问题，使用检查点或事务或任何适合您的应用程序的方法。

# android - 如何在android的非活动类中实现“完成”之类的东西？

> ID：10662372
> 
> 赞同：5
> 
> 时间：2012-05-19T04:47:02.947
> 
> 标签：android, android-alertdialog, activity-finish

此对话框询问您是否要安装其他应用程序...因此，当单击无按钮时，它必须返回上一个屏幕

```
 downloadDialog.setNegativeButton(stringButtonNo,
            new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialogInterface, int i) {
                         finish();
                }
            }); 
```

这给出了错误：

未为类型 new DialogInterface.OnClickListener(){} 定义方法 finish()

我怎样才能达到我想要的？？？

```
package com.Android.barcode;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.widget.TextView;

public class BarcodeActivity extends Activity {
    public static String upc;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        IntentIntegrator.initiateScan(this);
    }

    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        switch (requestCode) {
        case IntentIntegrator.REQUEST_CODE: {
            if (resultCode != RESULT_CANCELED) {
                IntentResult scanResult = IntentIntegrator.parseActivityResult(
                        requestCode, resultCode, data);
                if (scanResult != null) {
                    upc = scanResult.getContents();

                    Intent intent = new Intent(BarcodeActivity.this, BarcodeResult.class);
                    startActivity(intent);
                    // put whatever you want to do with the code here
/*                  TextView tv = new TextView(this);
                    tv.setText(upc);
                    setContentView(tv);*/
                }
            }
            break;
        }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-19T05:06:14.110

由于您不想从该活动创建该对话框：您有两个选择

1) 将 Intent 回调到您希望用户去的活动。

```
Intent intent = new Intent(getBaseContext(), theActivity.class); 
getApplication().startActivity(intent) ; 
```

要不然

2) 为包含对话框的类创建一个构造函数。

```
public class ABC {
    Context iContext=null;
   public ABC(Context con){
    iContext=con;
   }
 ....

} 
```

使用活动的上下文调用类。喜欢`ABC(Cont)`。然后`((Activity)iContext).finish()`在该类中使用以完成该活动。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-19T05:08:38.983

如果您的类具有在其中分配**Context的****构造函数，那么您可以使用这种方式**

 **```
 AlertDialog.Builder adb=new AlertDialog.Builder(context);
                adb.setTitle("Are You Sure Want To Delete?");
                adb.setPositiveButton("OK", new AlertDialog.OnClickListener() {
                    public void onClick(DialogInterface dialog, int which) {

                    }});
                adb.setNegativeButton("CANCEL", new AlertDialog.OnClickListener() {
                    public void onClick(DialogInterface dialog, int which) {
                        ((Activity) context).finish();
                    }});
                adb.show(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-19T04:56:55.690

> 未为类型 new DialogInterface.OnClickListener(){} 定义方法 finish()

可能会出现此错误，因为`DialogInterface.OnClickListener`没有任何此类方法。如果你想完成你的活动，你必须使用

```
ActivityName.this.finish(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-19T05:04:38.910

最好的解决方案是对任何类型的对话框使用对话框片段，它只会在您的活动中打开一个对话框。并在侦听器上删除此对话框。请查看以下链接：

[http://developer.android.com/reference/android/app/DialogFragment.html](http://developer.android.com/reference/android/app/DialogFragment.html)

它也被 Android 人推荐。**

# c# - 如何使 String.Format 与 Javascript 中的资源文件值结合使用？

> ID：10662373
> 
> 赞同：1
> 
> 时间：2012-05-19T04:47:05.317
> 
> 标签：c#, javascript, asp.net

我在 Asp.net 中有一个资源文件，我正在从那里读取值，如下所示

```
var val1 = '<% = Resources.Test.FirstValue%>';  //Hello
var val2 = '<% = Resources.Test.SecondValue%>';  //World          
alert(val1);
alert(val2); 
```

它确实工作正常。但是假设我想在 C# 中使用 String.Format 函数，以便将其设置为“Hello - World”，如下所示

```
var val3 = '<%= string.Format("{0} - {1}",<% = Resources.Test.FirstValue%>,<% = Resources.Test.SecondValue%> %>'; 
```

它引发了一些编译时错误

```
Invalid expression term '<'
Invalid expression term '='
) expected
; expected
Invalid expression term ')' 
```

我不能在 Javascript 中以这种方式使用服务器端功能。但是，以下工作

```
var val3 = '<%= string.Format("{0} - {1}","Hello","World") %>'; 
```

好吧，我知道这个问题可以使用 javascript 本身来解决。我只是想知道如何让 C# 的 String.Format 函数与资源文件值一起在 Javascript 中工作。

因此，请仅提供与 String.Format 和 Resource 文件值有关的更正/解决方案。

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T05:09:45.633

为此，您只需要 1 组`<%=`和`%>`。您还缺少`)`.`string.Format`

```
var val3 = '<%= string.Format("{0} - {1}", Resources.Test.FirstValue, Resources.Test.SecondValue) %>'; 
```

但是，一组`<%=`和之间的所有内容`%>`都是 C#，它不支持进一步使用这些模板运算符。结束前一组后，您只需要再次使用这些运算符：

```
var val3 = '<%= Resources.Test.FirstValue %> - <%= Resources.Test.SecondValue %>'; 
```

# qt - 有没有简单的方法来复制 QPainter 状态？

> ID：10662374
> 
> 赞同：0
> 
> 时间：2012-05-19T04:47:06.893
> 
> 标签：qt

我想用 QPainter 实现 cairo 的 push_group/pop_group，但是 QPainter 在 begin() 使用新的painterDevice 时重置了它的所有状态，所以我必须手动保存/恢复所有状态。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-19T04:51:49.560

是的，只需检查[`QPainter::save()`](http://qt-project.org/doc/qt-4.8/qpainter.html#save)和[`QPainter::restore()`](http://qt-project.org/doc/qt-4.8/qpainter.html#restore)。

如果要在多个 QPainter 的生命周期之间保存/恢复，则必须手动进行。您可以只创建一个`PainterState`封装画家状态（笔、画笔、变换等）的类，然后存储一个`QStack<PainterState>`.

有一个 QPainterState 类，但它仅供内部使用，我认为它仅适用于单个 QPainter。如果您对 QPainterState 成员感兴趣（此处复制太多），请参阅源代码（“qpainter_p.h”）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-11T11:06:46.670

构造 QPainter 对象时，您可以将其绘制到[QPicture](http://doc.qt.io/qt-5/qpicture.html)。然后它可以在需要时重新加载并绘制到真正的 QPaintDevice。

```
QPicture picture;
QPainter painterQueued;
painterQueued.begin(&picture);           // paint in picture
painterQueued.drawEllipse(10,20, 80,70); // draw an ellipse
painterQueued.end();                     // painting done

QImage myImage;
QPainter painterTarget;
painterTarget.begin(&myImage);               // paint in myImage
painterTarget.drawPicture(0, 0, picture);    // draw the picture at (0,0)
painterTarget.end();                         // painting done 
```

您可以将许多 QPicture 对象排列在列表、堆栈等中，并在需要时重播它们。

# ubuntu - 在 Linux 中，如何在 Qt Creator 中添加一个使用 su 权限的构建步骤，而不会在构建时获得错误的密码尝试？

> ID：10662375
> 
> 赞同：7
> 
> 时间：2012-05-19T04:47:07.313
> 
> 标签：ubuntu, qt-creator, sudo, qmake

我的目标是成功地将一个文件夹链接到 /opt/ 目录——这需要使用 sudo 运行。

我试过这个：

```
 system(sudo ln -s $$OUT_PWD/xampp /opt/lampp):message("You should manually link LAMPP") 
```

但是从 qt-creator 构建它不会提示输入 sudo 密码，因此我无法让它链接文件夹。我在编译器输出中收到“错误的密码尝试...”错误。然后我用构建步骤尝试了这些：

```
make
sudo make install 
```

看看它是否会在那里提示我，但它在`make install`步骤中失败并出现相同的错误，详细信息如下：

```
00:31:20: Starting: "/usr/bin/sudo" make install
sudo: no tty present and no askpass program specified
sudo: no tty present and no askpass program specified
Sorry, try again.
sudo: no tty present and no askpass program specified
sudo: no tty present and no askpass program specified
Sorry, try again.
sudo: no tty present and no askpass program specified
sudo: no tty present and no askpass program specified
Sorry, try again.
sudo: 3 incorrect password attempts
00:31:20: The process "/usr/bin/sudo" exited with code 1. 
```

当我从终端`system()`使用时，qmake 脚本中的函数可以正常工作，因为它会在命令之前提示我；但为了快速测试的目的，我觉得在 Qt Creator 中使用 CTRL-B 构建也应该使用 sudo 命令......`qmake && make && make install``sudo ln...`

有没有办法从 Qt Creator 中得到提示，或者解决这个问题？就像将 sudo 通行证存储在 Qt Creator 中（尽管它是有风险的）......或者也许让它在会提示我的终端上运行构建步骤？`prompt()`qmake 中的功能是否可以收集 sudo 密码？

欢迎任何建议...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T20:37:47.330

经过大量研究：

```
ssh-askpass Sudo Password | sudo -S bash ./script 
```

就像一个魅力，它要求在一个单独的窗口/提示框中输入密码。我在自定义构建步骤下添加了它。重要的是要`sudo`知道它将期望通过`-S`选项输入密码。

```
echo "password" | sudo -S bash ./script 
```

也适用于 bash 脚本，但是您可能认为将 sudo 密码存储在脚本中是不安全的。据说读取权限应该可以解决这个问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-06-15T14:53:01.207

正如 Cameron Tinker 的评论所述，您可以设置 Qt Creator 以使用命令 gnome-terminal 和参数 -e "sudo make install" 进行部署。

效果和跑步一样`gnome-terminal -e "sudo make install"`

图片是这个配置在 Qt Creator 中的截图：）

[Qt Creator 与 sudo make install 步骤与 gnome 终端项目设置](https://i.stack.imgur.com/EM5VB.png)

![](../Images/07bd279b81617d9c0688de7104ce81d5.png)

`gksudo`不再推荐或默认安装在 Ubuntu 上

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-01-15T01:39:10.433

@Logan您可以`sudo`直接使用`ssh-askpass`（GUI密码请求对话框）及其`-A`选项，这可以使用`SUDO_ASKPASS`环境变量覆盖`/usr/bin/ssh-askpass`可能在`/etc/sudo.conf`^([1])中配置的值（如@herophuong的建议`gksudo`或`kdesudo`来自@herophuong的建议）。这可以解决您答案中第二种解决方案的安全风险，该解决方案`"password"`使任何可以观察命令行参数的东西都可以看到。等效于您的第一个解决方案变为：

```
sudo -A -s ./script 
```

不要忘记这*可能*`sudo`会提供凭据缓存，因此，如果最近使用过（默认为 5 分钟？），重复调用会使用该缓存的密码值，而不是发出另一个密码请求。 *如果出于理智/安全原因，不希望使用**没有其他参数的脚本（或其他地方）立即清除任何缓存的凭据（该使用不需要密码），以便任何后续**使用****都****需要身份验证。***`sudo -K``sudo`**

 ***[`visudo`1 -如果您想编辑`/etc/sudo.conf`添加，请记住以 root 身份使用：]

```
# Path to askpass helper program
Path askpass /usr/bin/ssh-askpass 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T13:51:10.983

我认为您应该使用`gksudo`（在 GNOME 中）或`kdesudo`（在 KDE 中）。然后，这些命令将使用一个窗口提示您输入密码。***

# iphone - 无法让可扩展单元格中的 uitoolbar 隐藏

> ID：10662376
> 
> 赞同：0
> 
> 时间：2012-05-19T04:47:08.587
> 
> 标签：iphone, ios, ios5, uitableview

您好，我目前正在使用[Simon Lee 的精彩教程](http://locassa.com/index.php/animate-uitableview-cell-height-change/)来扩展我的细胞。一切正常。

我的单元格是 100 像素，当展开时单元格变为 144 像素高。在添加的 44px 中，我放置了一个带有条形按钮的工具栏。我已经让按钮工作了，但有一个问题。

当单元格展开时，我可以点击任何 100px 并关闭单元格，但是当单元格关闭时，点击单元格的下部 44px 会导致条形按钮执行其操作。我假设如果从站点隐藏时它仍然处于启用状态。

我在情节提要中禁用了用户交互，但在选择单元格时无法打开它，反之亦然！如果有人能指出我正确的方向，那就行​​了！

西蒙说了一些关于做以下事情的事情，但我不太确定在哪里实现它！我到处都试过了！

```
for(NewsCell *cell in [self.tableView visibleCells]) {
    BOOL cellIsSelected = [selectedIndexes objectForKey:indexPath];
    [cell.detailToolbar setUserInteractionEnabled:cellIsSelected];
} 
```

这是我的一些代码：

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath {
// If our cell is selected, return double height

if([self cellIsSelected:indexPath]) {

return 144.0;

}

// Cell isn't selected so return single height

return 100.0;
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath  *)indexPath
{

// Deselect
[self.tableView deselectRowAtIndexPath:indexPath animated:YES];

self.tableView.clipsToBounds = YES;

// Store cell 'selected' state keyed on indexPath
NSNumber *selectedIndex = [NSNumber numberWithBool:isSelected];
[selectedIndexes setObject:selectedIndex forKey:indexPath]; 

// This is where magic happens...
[self.tableView beginUpdates];
 [self.tableView endUpdates];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T06:58:35.193

didSelectRowAtIndexPath 中 tableView 的 clipsToBounds 对我来说有点奇怪

```
self.tableView.clipsToBounds = YES; 
```

您是否将单元格的 clipoToBounds 设置为 YES？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T04:37:32.490

我自己想通了。事实证明，我所要做的就是将单元格中的用户交互设置为关闭。并为选定的单元格打开它。

```
for(NewsCell *cell in [self.tableView visibleCells]) {
        BOOL cellIsSelected = isSelected;
        [cell.detailToolbar setUserInteractionEnabled:cellIsSelected];
} 
```

# java - 由于缺少变量而导致的编译器错误（变量在不同的类中定义）

> ID：10662377
> 
> 赞同：1
> 
> 时间：2012-05-19T04:47:12.000
> 
> 标签：java, compilation, compiler-errors, scope

我是java编程的初学者，正在尝试制作一个石头剪刀布游戏。我为缺乏评论表示歉意。

这是我的主程序，它调用其他两个对象。

```
 import java.util.*;

  public class RPSMain extends RPSPlayer{
   RPSPlayer player = new RPSPlayer();
   RPSGame gameObject = new RPSGame ();
   public void main () {

     Random generator = new Random ();
     Scanner sc = new Scanner(System.in);
     System.out.print ("Number of Rounds: ");
     int rounds = sc.nextInt();

    //Call and process all of the methods found in RPSPlayer and RPSGame
     for (int i = 0; i < rounds; i++){
        player.makeThrow();
        gameObject.makeThrow();
        gameObject.announceWinner (compThrow, getPThrow);
     }
    //Final Output
     System.out.print (gameObject.bigWinner(winner, rounds));
  }
//accessor to return round to RPSGame
   public static int getRound (int round){
     this.round = round;
     return round;
  }
} 
```

我的第一个对象是玩家输入他们想要的投掷次数，并在那里进行处理。

```
 import java.util.*;

  public class RPSPlayer {

  public static void main (String args[]) {
     Random generator = new Random ();
     Scanner sc = new Scanner(System.in);
  }
//This method gets the throw, and loops if throw is not within 1 and 3
  public static int makeThrow (){
     Scanner sc = new Scanner (System.in);
     int playerThrow;
     do{
        System.out.print ("Enter your throw (1=Rock, 2=Paper, 3=Scissors)");
        playerThrow = sc.nextInt();
     } while (playerThrow > 3 && playerThrow < 1);
     return playerThrow;
  }

    //Accessor method
  public static int getThrow (int playerThrow){
    this.playerThrow = playerThrow;
     return playerThrow;
  }

 } 
```

最后一个对象是所有计算发生的地方。有很多变量无法正确编译，我不太明白为什么......

```
 import java.util.*;

 public class RPSGame extends RPSPlayer{
  RPSPlayer player = new RPSPlayer();
  RPSGame game = new RPSGame ();
  RPSMain mainRPS = new mainRPS();
   public static void main (String args[]) {

     Random generator = new Random ();
     Scanner sc = new Scanner(System.in);
     int rounds = mainRPS.getRound(rounds);
   }
   //Random Throw Generator
   public static int makeCompThrow (){
     int Max = 3;
     int Min = 1;

     int compThrow =   Min + (int)(Math.random() * ((Max - Min) + 1));
     return compThrow;
  }

   //  Get the throw from the player in RPSPlayer
       public static int getPlayerThrow (){
     RPSPlayer player = new RPSPlayer();
     int getPThrow = player.makeThrow();
     return getPThrow;
  }

 //Does all of the calculatoins and ouputs who threw what.
   public static int announceWinner (int compThrow, int getPThrow) {
     int winner = 0;

     if (getPThrow == 1){
        System.out.println ("Player throws ROCK.");
     }
     else if (getPThrow == 2){
        System.out.println ("Player throws PAPER.");
     }
     else if (getPThrow == 3){
        System.out.println ("Player throws SCISSORS.");
     }

     if (compThrow == 1){
        System.out.println ("Computer throws ROCK.");
     }
     else if (compThrow == 2){
        System.out.println ("Computer throws PAPER.");
     }
     else if (compThrow == 3){
        System.out.println ("Computer throws SCISSORS.");
     }

     if (getPThrow == compThrow){
        winner = 3;
     }
     else if (getPThrow == 1 && compThrow == 3){
        winner = 1;
     }
     else if (getPThrow == 1 && compThrow == 2){
        winner = 2;
     }
     else if (getPThrow == 2 && compThrow == 1){
        winner = 1;
     }
     else if (getPThrow == 2 && compThrow == 3){
        winner = 2;
     }
     else if (getPThrow == 3 && compThrow == 1){
        winner = 2;
     }
     else if (getPThrow == 3 && compThrow == 2){
        winner = 1;
     }  

     return winner;
   }

//Final Output with imported values of 'rounds' and 'winner'
   public int bigWinner (int winner, int rounds){
     int tie = 0;
     int playerWins = 0;
     int compWins = 0;

     if (winner == 1){
        playerWins = playerWins + 1;
     }

     else if (winner == 0){
        tie = tie + 1;
     }

     else if (winner == 3){
        compWins = compWins + 1;
     }
     System.out.println ("You win " +playerWins+ ". Computer wins " +(compWins)+ ".");
     if (playerWins > compWins){
        System.out.print ("You win!"); 
     }
     if (playerWins < compWins){
        System.out.print ("Computer wins!"); 
     }

     if (playerWins == compWins){
        System.out.print ("It's a tie!"); 
     }
     return tie;
  }

 } 
```

再次编译时，在加入 WATTO Studios 的建议后出现 2 个新错误，这些是编译器错误：

```
RPSMain.java:23: cannot find symbol
symbol  : variable winner
location: class RPSMain
     RPSGame.bigWinner(winner, rounds);
                       ^
RPSMain.java:23: non-static method bigWinner(int,int) cannot be referenced 
from a static context
     RPSGame.bigWinner(winner, rounds); 
```

如果我从 RPSGame 引用，为什么它找不到变量“赢家”，为什么它仍在 RPSMain 中搜索变量？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T04:55:45.820

对于这些错误，在您的`RPSMain`班级中，您正在尝试从其他班级访问变量。你的代码在这里...

```
 for (int i = 0; i < rounds; i++){
    player.makeThrow();
    gameObject.makeThrow();
    gameObject.announceWinner (compThrow, getPThrow);
 } 
```

其实应该是这个...

```
 for (int i = 0; i < rounds; i++){
    int playerThrow = player.makeThrow();
    int compThrow = gameObject.makeCompThrow();
    gameObject.announceWinner (compThrow, playerThrow );
 } 
```

请注意，当我们调用类似的方法时`makeThrow()`，我们会捕获变量并调用它`playerThrow`。现在我们可以在方法中使用这个变量了`announceWinner()`。`compThrow`变量也是如此。

你在你的`RPSGame.bigWinner(winner, rounds);`生产线上做同样的事情——它的抱怨是`winner`不存在的。这是真的-`winner`不是 in 中的变量`RPSMain`，它只是 in 中的变量`RPSGame`-您不能像这样在不同的类之间共享变量。

您的`gameObject.announceWinner()`方法返回一个`int`代表实际获胜者的值。如果要使用此返回值，则需要将其捕获到变量中。目前你有这样的代码`RPGMain`......

```
for (int i = 0; i < rounds; i++){
   int playerThrow = player.makeThrow();
   int compThrow = gameObject.makeCompThrow();
   gameObject.announceWinner (compThrow, playerThrow );
}
System.out.print (gameObject.bigWinner(winner, rounds)); 
```

如果要保留`int`从`announceWinner()`方法返回的值，则必须通过进行以下调整来捕获它...

```
for (int i = 0; i < rounds; i++){
   int playerThrow = player.makeThrow();
   int compThrow = gameObject.makeCompThrow();
   int winner = gameObject.announceWinner (compThrow, playerThrow );
   System.out.print (gameObject.bigWinner(winner, rounds));
} 
```

现在这表示从返回的值`gameObject.announceWinner()`将存储在类中调用的局部变量`winner`中`RPGMain`。现在当它尝试在下一行`winner`的方法中使用该变量时`gameObject.bigWinner()`，它知道该值。

要修复您的`non-static method bigWinner(int,int) cannot be referenced from a static context`错误，您需要更改以下行...

```
public int bigWinner (int winner, int rounds){ 
```

有这个词`static`，像这样......

```
public static int bigWinner (int winner, int rounds){ 
```

或者，更好的是，`static`从代码中的任何地方删除这个词。如果您是 Java 新手，那么尝试使用`static`变量和方法只会让事情变得更加复杂，而它们确实需要如此复杂，而且我看不出您为什么需要它们出现`static`在您的程序中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T05:00:47.863

`compThrow`是的`getPThrow`局部变量`RPSGame`。你不能在`RPSMain`. 使用它们的一种方法是`RPSMain`通过方法调用将它们作为参数发送并重新声明变量`RPSMain`以接受这些。

其他更可取的解决方案是让它们在 class 中受保护的实例变量`RPSPlayer`。这样，它们将可供两者使用，也可`RPSGame`通过`RPSMain`继承使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-19T05:00:13.317

心理提示：您似乎拥有大量的静态方法，以及一些完全由静态方法组成的类，但您仍然实例化该类并调用这些方法，就好像它们是对象实例的一部分一样。

一般来说，调用静态方法时，应该使用静态引用：

```
RSPGame.makeCompThrow(); 
```

而不是这个

```
RSPGame game = new RSPGame().
game.makeCompThrow(); 
```

这应该生成编译器警告。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-21T14:36:57.987

I'll nitpick your `makeThrow` method:

```
} while (playerThrow > 3 && playerThrow < 1); 
```

that will never loop, because no number is smaller than 1 AND (`&&`) bigger than 3. It should read

```
} while (playerThrow > 3 || playerThrow < 1); 
```

Bigger than 3 OR (`||`) smaller than 1\. Now it should work as intended.

# objective-c - IOS objective-c 上的形状识别

> ID：10662384
> 
> 赞同：0
> 
> 时间：2012-05-19T04:47:55.510
> 
> 标签：objective-c, ios5, xcode4, shape-recognition

IOS SDK上形状识别的最佳库是什么？openCV 是否与 IOS SDK 一起使用？

我想识别线条、正方形和圆圈 我不需要识别字母或数字

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T05:04:38.960

是的，OpenCV 可以与官方 iOS SDK 配合使用；它在 Xcode 上效果最好（不过，使用非官方工具链正确安装它是相当复杂的）。

# jsf - 与 primefaces 集成时无法加载 jsf.page

> ID：10662386
> 
> 赞同：1
> 
> 时间：2012-05-19T04:48:56.710
> 
> 标签：jsf, spring-security, glassfish, primefaces

我在想实现 jsf 2.0、primefaces 3.1.1 和 springframework 3.0.2 时遇到问题，在身份验证登录页面成功后我无法加载我的 jsf 页面

netbeans 6.9.1
glassfish 服务器 3.0.1
primefaces 3.0.1
jsf 2.0
springframework 3.0.2

**这是我的 web.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="3.0" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd">
<context-param>
    <param-name>javax.faces.PROJECT_STAGE</param-name>
    <param-value>Production</param-value>
</context-param>
<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>/WEB-INF/app-config.xml</param-value>
</context-param>
<context-param>
    <param-name>javax.faces.FACELETS_LIBRARIES</param-name>
    <param-value>/WEB-INF/springsecurity.taglib.xml</param-value>
</context-param>
<filter>
    <filter-name>springSecurityFilterChain</filter-name>
    <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
</filter>
<servlet>
    <servlet-name>Spring MVC Dispatcher Servlet</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <init-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/app-config.xml</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
</servlet>
<listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener>
<servlet>
    <servlet-name>Faces Servlet</servlet-name>
    <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>
<filter-mapping>
    <filter-name>springSecurityFilterChain</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping>
<servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>*.jsf</url-pattern>
</servlet-mapping>
<servlet-mapping>
    <servlet-name>Spring MVC Dispatcher Servlet</servlet-name>
    <url-pattern>*.htm</url-pattern>
</servlet-mapping>
<welcome-file-list>
    <welcome-file>faces/index.jsp</welcome-file>
    <welcome-file>index.jsp</welcome-file>
</welcome-file-list>
</web-app> 
```

**jsf页面**

```
<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
  <html xmlns="http://www.w3.org/1999/xhtml"
  xmlns:h="http://java.sun.com/jsf/html"
  xmlns:p="http://primefaces.org/ui"
  xmlns:sec="http://www.springframework.org/security/tags"
  xmlns:f="http://java.sun.com/jsf/core">
  <h:head>
  </h:head>
  <h:body>

    <sec:authorize url="/admin/*">
        This session will be visible to an admin only.<br/>
        You are an Administrator.<br/>
    </sec:authorize>
    <sec:authorize url="/users/*">
        This session will be visible to an Customer only.<br/>
        You are an Customer.<br/>
    </sec:authorize>

    <p:layout style="min-width:400px;min-height:200px;" id="layout">
        <p:layoutUnit position="west" resizable="true" size="100" minSize="40" maxSize="200">
            Left
        </p:layoutUnit>

        <p:layoutUnit position="center">
            <h:form>
                <p:panel header="F.C. Barcelona" footer="Visca el Barca!">
                    <h:outputText value="FC Barcelona is one of only three clubs never to have been relegated from La Liga and is the most successful club in Spanish football along with Real Madrid,
                                  having won twenty La Liga titles, a record twenty-five Spanish Cups, eight Spanish Super Cups, four Eva Duarte Cups and two League Cups.
                                  They are also one of the most successful clubs  in European football having won fourteen official major trophies in total,
                                  including ten UEFA competitions. They have won three UEFA Champions League titles, a record four UEFA Cup Winners' Cups,
                                  a record three InterCities Fairs Cups (the forerunner to the UEFA Europa League), three UEFA Super Cups and one FIFA Club World Cup.
                                  The club is also the only European side to have played continental football in every season since its inception in 1955." />
                </p:panel> </h:form>
        </p:layoutUnit>
    </p:layout>

    <h:outputLink value="#{request.contextPath}/j_spring_security_logout">Logout</h:outputLink>
</h:body>
</html> 
```

**错误信息**

```
WARNING: StandardWrapperValve[Faces Servlet]: PWC1406: Servlet.service() for servlet    Faces Servlet threw exception
java.lang.NullPointerException
    at org.springframework.faces.webflow.FlowViewStateManager.saveView(FlowViewStateManager.java:181)
    at com.sun.faces.application.view.WriteBehindStateWriter.flushToWriter(WriteBehindStateWriter.java:225)
    at com.sun.faces.application.view.FaceletViewHandlingStrategy.renderView(FaceletViewHandlingStrategy.java:418)
    at com.sun.faces.application.view.MultiViewHandler.renderView(MultiViewHandler.java:131)
    at org.springframework.faces.webflow.FlowViewHandler.renderView(FlowViewHandler.java:99)
    at com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:121)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:594)
    at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1539)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:343)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
    at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:163)
    at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:237)
    at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:167)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:256)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:279)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
    at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
    at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
    at com.sun.enterprise.web.WebPipeline.invoke(WebPipeline.java:98)
    at com.sun.enterprise.web.PESessionLockingStandardPipeline.invoke(PESessionLockingStandardPipeline.java:91)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:162)
    at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:330)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:174)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:828)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:725)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1019)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:225)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:662) 
```

有人给我这个问题的建议..？
谢谢阿贡：D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T11:16:17.117

这是Spring Webflow 2.3.0 中[的一个错误](https://jira.springsource.org/browse/SWF-1461)，已在 Spring Webflow 2.3.1 中修复。所以显然你使用的是 Spring Webflow 2.3.0，你需要将它升级到 2.3.1。

# dependency-injection - RavenDB 和构造函数注入

> ID：10662388
> 
> 赞同：4
> 
> 时间：2012-05-19T04:49:24.120
> 
> 标签：dependency-injection, ravendb, constructor-injection

在我的项目中，我有以下`PageCache`实体，它存储在 RavenDB 中：

```
public class PageCache
{
    private readonly IHtmlDocumentHelper htmlDocumentHelper;

    public string Id { get; set; }
    public string Url { get; set; }

    public PageCache(IHtmlDocumentHelper htmlDocumentHelper, string url)
    {
        this.htmlDocumentHelper = htmlDocumentHelper;
        this.Url = url;
    }
} 
```

我正在使用 Castle Windsor`IHtmlDocumentHelper`在运行时注入实现。这个成员用于`PageCache`类内部定义的方法中，为了简单起见，我从上面的代码片段中删除了它。

当我使用构造函数创建`PageCache`对象时，一切正常。但在我的代码的其他地方，我`PageCache`从 RavenDB 加载对象：

```
public PageCache GetByUrl(string url)
{
    using (var session = documentStore.OpenSession())
    {
        return session.Query<PageCache>()
                      .Where(x => x.Url == url)
                      .FirstOrDefault();
    }
} 
```

我的问题是我从 RavenDB 返回的对象没有`htmlDocumentHelper`成员集，导致`PageCache`依赖它的方法无法使用。

换句话说：当我从存储在 RavenDB 中的文档中加载对象时，它不会使用我的构造函数来构建对象，因此不会通过构造函数注入来初始化私有成员。

我在这里做错了吗？你会如何解决这样的问题？

* * *

我最终使用了下面 Ayende 提出的解决方案。我在评论中提到的循环依赖问题仅在我`DocumentStore`在 Windsor 中使用`UsingFactoryMethod()`. 当我使用Windsor`DependsOn()`并直接在.`OnCreate()``DocumentStore``Register()`

我的容器现在正在初始化如下：

```
WindsorContainer container = new WindsorContainer();

container.Register(
    // Register other classes, such as repositories and services.
    // Stripped for the sake of clarity.
    // ...

    // Register the CustomJsonConverter:
    Component.For<CustomJsonConverter>().ImplementedBy<CustomJsonConverter>(),

    // The following approach resulted in an exception related to the circular
    // dependencies issue:
    Component.For<IDocumentStore>().UsingFactoryMethod(() =>
        Application.InitializeDatabase(container.Resolve<CustomJsonConverter>()))

    // Oddly enough, the following approach worked just fine:
    Component.For<IDocumentStore>().ImplementedBy<DocumentStore>()
        .DependsOn(new { Url = @"http://localhost:8080" })
        .OnCreate(new Action<IDocumentStore>(store =>
            store.Conventions.CustomizeJsonSerializer = serializer =>
                serializer.Converters.Add(container.Resolve<CustomJsonConverter>())))
        .OnCreate(new Action<IDocumentStore>(store =>
            store.Initialize()))
        .OnDestroy(new Action<IDocumentStore>(store =>
            store.Dispose()))
    ); 
```

虽然它似乎工作正常，但我觉得不得不`container.Resolve<CustomJsonConverter>()`从`container.Register()`方法内部调用很奇怪。

这是注册依赖项的合法方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T11:47:08.877

克里斯蒂安，我们不能使用你的 ctor，我们不知道在里面放什么。

相反，您可以使用此技术告诉 RavenDB 如何创建对象：http: [//james.newtonking.com/projects/json/help/CustomCreationConverter.html](http://james.newtonking.com/projects/json/help/CustomCreationConverter.html)

然后你可以使用 documentStore.Conventison.CustomizeSerializer 连接它

# php - 用php过滤掉mysql查询中的空列

> ID：10662390
> 
> 赞同：-1
> 
> 时间：2012-05-19T04:49:56.783
> 
> 标签：php, mysql

这是我用来检查特定 mysql 查询是否返回任何空列并因此将它们过滤掉的 27 个循环之一。但它似乎没有工作。任何帮助将非常感激.....

```
foreach($array as $row) {
            if(!empty($row['TROVE'])) {
            $trove = print "<th>TROVE</th>";
            break;
        }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T04:58:28.817

而不是在x个循环中检查...检查查询中的条件非常有效，例如...

```
where TROVE is not null or TROVE <> '' 
```

# django - 如何在 Django 视图中获取 /test/?grid-view 或 /test/?list-view'

> ID：10662391
> 
> 赞同：0
> 
> 时间：2012-05-19T04:50:12.607
> 
> 标签：django, django-views, django-urls

我有一个可以通过jQuery通过列表或网格视图查看的页面，但我希望URL显示它是什么视图 - 特别是当用户分页时，他们不必重新单击他们想要查看的内容 - 所以像这样的东西：`/test/?grid_view`或`/test/?list_view`。

我一直在尝试使用`request.GET.get`，但它似乎不起作用。这是我到目前为止所拥有的：

```
def test (request):
    grid_view = request.GET.get('grid_view')
    list_view = request.GET.get('list_view')
    if grid_view:
        return render_to_response('grid_view.html', {}, context_instance=RequestContext(request))
    elif list_view:
        return render_to_response('list_view.html', {}, context_instance=RequestContext(request))
    else:
        return render_to_response('default_view.html', {}, context_instance=RequestContext(request)) 
```

然后在我的主模板中，我会将不同的视图指向`<a href="/?list_view/">list view</a>`等。可能有更好的方法来做到这一点，因此任何建议也受到赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T09:20:59.980

一个空字符串被评估为 False，这就是您的 GET 请求查询字符串参数将包含的内容。

您可以将代码修改为：

```
if 'grid_view' in request.GET or 'grid_view/' in request.GET:
    pass
elif 'list_view' in request.GET or 'list_view/' in request.GET:
    pass 
```

或者：

```
if request.GET.has_key('grid_view') or request.GET.has_key('grid_view/'):
# ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T05:03:53.730

这不是 GET 参数。用于`request.META['QUERY_STRING']`获取查询字符串。

# python - 太空入侵者克隆中的多个导弹/子弹（首先使用 python 进行游戏）

> ID：10662395
> 
> 赞同：0
> 
> 时间：2012-05-19T04:51:03.913
> 
> 标签：python, oop, pygame

我是一名初学者程序员，我的第一语言是 Python 2.7，我正在尝试制作一个太空入侵者类型的游戏，但我想一次拥有多个子弹，但无法找到一种方法来做到这一点。所以我在这里做了我自己的方式是我的代码在你看到它之后会解释更多

```
 if event.type ==pygame.KEYDOWN and event.key==K_SPACE:
            if m < 5:
                m+=1

            if m==1:
                m1a=1
                m1x=ls

            if m==2:
                m2a=1
                m2x=ls

            if m==3:
                m3a=1
                m3x=ls

            if m==4:
                m4a=1
                m4x=ls

            if m==5:
                m5a=1
                m5x=ls

            print m
#missle 1
    if m1a==1:
        screen.blit(rship,(m1x,m1))
        if m1>=0:
            m1-=1
        else:
            m-=1
            m1a=0
            m1=460
#missle 2
    if m2a==1:
        screen.blit(rship,(m2x,m2))
        if m2>=0:
            m2-=1
        else:
            m-=1
            m2a=0
            m2=460
#missle 3
    if m3a==1:
        screen.blit(rship,(m3x,m3))
        if m3>=0:
            m3-=1
        else:
            m-=1
            m3a=0
            m3=460
#missle 4
    if m4a==1:
        screen.blit(rship,(m4x,m4))
        if m4>=0:
            m4-=1
        else:
            m-=1
            m4a=0
            m4=460
#missle 5
    if m5a==1:
        screen.blit(rship,(m5x,m5))
        if m5>=0:
            m5-=1
        else:
            m-=1
            m5a=0
            m5=460 
```

我敢肯定它很可笑，但我只是在学习，但问题是第一枚和第二枚导弹都很好，第三枚和之后的导弹就搞砸了。当你发射第三个时，它会将第二个移动到你拍摄的位置，然后如果你再次发射，代码不会回到 1，它会保持在 2，并且会出现更多故障。如果您需要我尝试更好地解释它，我很乐意。只是想学习。

完整代码在这里：pastebin.com/FnPaME6N

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T05:57:30.240

你应该制作你的“子弹”[精灵](http://www.pygame.org/docs/ref/sprite.html)，然后将它们添加到一个名为或其他东西的[组中。](http://www.pygame.org/docs/ref/sprite.html#pygame.sprite.Group)`bullets`调用`update`组上的方法将一次性更新所有项目符号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T05:01:11.360

这是一些工作代码，但我不会称之为伟大。

```
import pygame
import math
from pygame.locals import *
background_colour = (122, 100, 155)
(width, height) = (500, 500)

pygame.init()

#ship = pygame.image.load('lolol.jpeg')\
rship = pygame.image.load('js.jpg')
mis = pygame.image.load('lot.jpg')
screen = pygame.display.set_mode((width, height))
pygame.display.set_caption('A.N.T.O.N.I.A.')
screen.fill(background_colour)
pygame.display.flip()
running = True

MAX_MISSILES = 5

ls = 250  # Horizontal ship location

LEFT = False
RIGHT = False

def move(ls, RIGHT, LEFT):
    '''Moves the ship 3 pixels to the left or right.

    Only moves if just one direction key is down, and not both.
    Also, will not move if the ship is at either horizontal screen edge.

    ls is the ship location.

    '''
    if LEFT and not RIGHT:
        if ls >= 10:
            ls -= 3
    elif RIGHT and not LEFT:
        if ls <= 440:
            ls += 3
    return ls

def fire_missile(ls, missiles):
    '''Fire a missile, as long as we are not at the maximum number.

    We use a list to hold our missile locations.

    '''
    if len(missiles) >= MAX_MISSILES:
        return
    else:
        missiles.append((ls, 460))

def draw_missiles(missiles):
    '''Draw all the missiles.'''
    if missiles:
        for missile in missiles:
            screen.blit(mis, (missile))

def move_missiles(missiles):
    '''If there are any missiles, move them up 1 pixel, and append
    them to the newlist.  The new list will replace the old list.

    '''
    if missiles:
        newmissiles = []
        for missile in missiles:
            # Do not append the missile to the new list if it is going
            # off the screen
            if missile[1] > 0:
                newmissiles.append((missile[0], missile[1] - 1))
        return newmissiles
    else:
        return missiles

missiles = []

while running:
    screen.blit(rship, (ls, 450))
    pygame.display.flip()
    screen.fill(background_colour)
    for event in pygame.event.get():
        if event.type == pygame.QUIT:
            pygame.quit()
            running = False
        if event.type == pygame.KEYDOWN and event.key == K_ESCAPE:
            # You can now quit with the escape key.
            pygame.quit()
            running = False
        if event.type == pygame.KEYDOWN and event.key == K_LEFT:
            LEFT = True
        # LEFT is True untli you let up in the LEFT key
        if event.type == pygame.KEYUP and event.key == K_LEFT:
            LEFT = False
        if event.type == pygame.KEYDOWN and event.key == K_RIGHT:
            RIGHT = True
        if event.type == pygame.KEYUP and event.key == K_RIGHT:
            RIGHT = False
        if event.type == pygame.KEYDOWN and event.key == K_SPACE:
            fire_missile(ls, missiles)
    ls = move(ls, RIGHT, LEFT)
    draw_missiles(missiles)
    missiles = move_missiles(missiles) 
```

每当您发现自己在其中创建带有数字的变量时，这都是代码异味，这意味着您可能应该使用不同的数据类型。

正如已经建议的那样，您可能想要查看 sprite 和 group 模块，但这至少可以完成您目前尝试做的事情。

# c# - 从 MembershipUserCollection 获取单个 MembershipUser

> ID：10662397
> 
> 赞同：1
> 
> 时间：2012-05-19T04:51:47.040
> 
> 标签：c#, asp.net, asp.net-membership

我正在通过编写示例应用程序来学习 ASP.Net MVC3 EF4。我正在使用标准的会员资格提供程序。我在会员提供程序中有 requiresUniqueEmail="true"，因此每个会员用户不超过 1 封电子邮件。

我想通过他们的电子邮件地址找到特定用户。有一个功能可以帮助：

```
MembershipUserCollection users = Membership.FindUsersByEmail(model.Email); 
```

由于我有独特的电子邮件，我如何从 MembershipUserCollection 中获取 MembershipUser？我知道我可以做一个 foreach 循环：

```
foreach (MembershipUser user in users)
{
username = user.UserName;
} 
```

但是有没有更快的方法来访问第一行？

这不起作用： MembershipUser user = users[0];

但这正是我正在寻找的。

谢谢！！

更新：这可行，但我仍然对上述问题的答案感兴趣：

```
string username1 = Membership.GetUserNameByEmail(model.Email);
MembershipUser user = Membership.GetUser(username1); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T04:56:54.023

因为每个用户都有唯一的电子邮件，为什么要使用`MembershipUserCollection`Class

相反，您可以直接使用

```
 string userName = Membership.GetUserNameByEmail(model.Email);

    MembershipUser oMu = Membership.GetUser(userName); 
```

`oMu`对象将为您提供具有您传入的电子邮件地址的用户的所有属性`GetUserNameByEmail(model.Email)`

**根据相关更新进行编辑**

我认为加载只有一条记录的集合是无关紧要的，与字符串用户名（在我的示例中使用）相比，内存消耗会更多，而且您在查找单个记录时遇到问题（您正在使用循环，获取详细信息时不必要的延迟）。此外，减少了代码行（编译代码变得更容易和更快。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T04:54:27.423

尝试使用`First()`Linq 扩展方法，如下所示：

```
using System.Linq;
...
var user = Membership.FindUsersByEmail(model.Email).Cast<MembershipUser>.First(); 
```

`MembershipUser`（如果您碰巧使用一个，您也可以转换为您的自定义子类）。

# android - 设计复杂的布局(Scrollview, Listview..)

> ID：10662401
> 
> 赞同：0
> 
> 时间：2012-05-19T04:52:13.700
> 
> 标签：android, listview, scrollview

我只是想知道如何创建下面给出的此布局的副本 ![在此处输入图像描述](../Images/a6cdce1e0ac67f1947fc4f2b39ddda26.png)

我试过了

```
public class Utility {
        public void setListViewHeightBasedOnChildren(ListView listView) {
            ListAdapter listAdapter = listView.getAdapter(); 
            if (listAdapter == null) {
                // pre-condition
                return;
            }

            int totalHeight = 0;
            for (int i = 0; i < listAdapter.getCount(); i++) {
                View listItem = listAdapter.getView(i, null, listView);
                listItem.measure(0, 0);
                totalHeight += listItem.getMeasuredHeight();
            }

            ViewGroup.LayoutParams params = listView.getLayoutParams();
            params.height = totalHeight + (listView.getDividerHeight() * (listAdapter.getCount() - 1));
            listView.setLayoutParams(params);
        } 
```

但它修复了 ListView 的高度。

如果您说使用*HeaderView/FooterView*可以完成这项工作，那么如何？

如果您说采用自定义布局（线性或相对），那么我也不能在 ScrollView 中采用 ScrollView。

还有其他解决方法吗？

**注意**：ListView 中的数据将是*动态的（可以更多基于查询）*。

# java - 识别由给定三个单词的任意组合组成的单词的程序

> ID：10662402
> 
> 赞同：0
> 
> 时间：2012-05-19T04:52:51.877
> 
> 标签：java

我正在尝试编写一个 java 程序，它将一个字符串作为输入并检查它是否有效。决定的规则是：

1）字符串是可识别的当且仅当它包含单词“pi”，“ka”，“chu”作为其片段，以任何顺序重复任意次数。2）如果它包含任何其他片段（或子序列），那么它是无法识别的

对于 ex-“皮卡丘”仅由“pi”、“ka”、“chu”组成，因此它是可识别的。“kachupi”仅由“ka”、“chu”、“pi”组成，因此可识别。“pipi”也是可识别的”，因为它包含两次“pi”。“pich”不可识别，因为有“ch”不是指定的子序列之一。

我在下面发布我的java代码。但它不能正常工作。请检查并帮助。提前致谢！

```
import java.util.Scanner;

public class RecognisingWords {

    public static void main(String[] args) throws Exception 
    {

        Scanner inp= new Scanner(System.in);
        String str;
        int len;
        System.out.println("Enter the string to be tested:");
        str=inp.nextLine();
        System.out.println(str);

        while(str !=null)
        {

        if(str.startsWith("pi"))
        {
            len=str.length();
            str= str.substring(2,len);          
        }

        else if(str.startsWith("ka"))
        {
            len=str.length();
            str= str.substring(2,len);          
        }

        if(str.startsWith("chu"))
        {
            len=str.length();
            str= str.substring(3,len);          
        }

        else
        {
            System.out.println("Unrecognisable Sequence");
            break;
        }

        }

        if(str == null)
        {
            System.out.println("Recognisable Sequence");
        }

    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T05:00:01.123

您需要进行两项更改：

一、改变

```
if(str.startsWith("chu")) 
```

至

```
else if (str.startsWith("chu")) 
```

否则像“pipi”这样的字符串将无法通过测试。

第二，

```
while(str !=null) 
```

永远不会失败，因为`str`永远不会`null`。您需要测试是否为空：

```
while (str.length() > 0) 
```

# php - 自动填充这个 html 字段？

> ID：10662409
> 
> 赞同：0
> 
> 时间：2012-05-19T04:54:23.600
> 
> 标签：php, html, autofill

自动填充此字段的最简单方法是什么？

```
<input type="text" name="start_price" value="<?=$item_details['start_price'];?>" size="8"></td> 
```

我需要保留 $item_details 因为它会传递给其他代码，但在某些情况下，我想将其自动填充为 0.00 以使我更容易，因为我将使用 0.00 列出一些拍卖

我正在编辑一个由 php 用来生成一些代码的模板，所以理想情况下，我只想对模板进行一些更改，而不必深入研究代码本身

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T05:51:37.550

这样的事情听起来可能会解决您的问题：

```
<?php
  // Whatever logic determines a "special case" stores a boolean value 
  // into the variable $special_case
  $input_value = !$special_case ? $item_details['start_price'] : '0.00';
?>
<input type="text" name="start_price" value="<?php echo $input_value; ?>" size="8"> 
```

# java - 扑克手经销商的无限循环

> ID：10662411
> 
> 赞同：2
> 
> 时间：2012-05-19T04:55:02.617
> 
> 标签：java, poker

我一直在尝试用这种方法让套牌发牌，但是一旦发牌了 52 张牌，它就会进入无限循环。

我知道这是因为我让它生成一个随机数，直到它得到一张尚未设置的卡片，但是一旦设置了所有卡片，条件将永远不会为真，因此是无限循环。

即使我知道我的问题，我也不知道如何解决它。我已经尝试了几个小时。一旦它达到 52 张卡，我想抛出一个豁免，但是一旦它进入无限循环，它就永远不会达到那个 if 语句。

```
public PlayingCard deal() {

    Random swift = new Random();
    int index = swift.nextInt(DECK_SIZE);
    cardsInDeck = DECK_SIZE;
    int i = 51;

    while (this.deck[index] == false||i==cardsInDeck) {index = swift.nextInt(DECK_SIZE);}
    if(i==cardsInDeck) { throw new RuntimeException("Empty Deck");}

    PlayingCard.CardRank[] Ranking = PlayingCard.CardRank.values();
    PlayingCard.CardSuit[] Suiting = PlayingCard.CardSuit.values();

    PlayingCard.CardRank Rank = Ranking[index % 13];
    PlayingCard.CardSuit Suit = Suiting[index % 4];

    PlayingCard selected = new PlayingCard(Suit, Rank);
    this.deck[index] = false;
    i++;
    cardsInDeck--;

    return selected;

} 
```

==================================================== ============================

整个代码

导入 java.util.Random；

公共类 DeckOfCards {

```
public static final int DECK_SIZE = 52;
//Instance Variables
private boolean[] deck; //An implicit set of 52 Playing-Cards
private int cardsInDeck;//Number of cards currently in the deck
private Random dealer;  //Used to rendomly select a card to be dealt

//Constructor
public DeckOfCards() {
    this.deck = new boolean[DECK_SIZE];
    int index = 0;
    for (PlayingCard.CardSuit Suit : PlayingCard.CardSuit.values()) {
        for (PlayingCard.CardRank Rank : PlayingCard.CardRank.values()) {
            PlayingCard card = new PlayingCard(Suit, Rank);
            deck[index] = true;
            index++;
        }
    }
}

//Collect all 52 Playing-Cards into the deck
public void shuffle() {
    /*Random shuffle = new Random();
    for (int j = 0; j < this.deck.length; j++) {
    int k = shuffle.nextInt(this.deck.length);
    boolean temp = this.deck[j];
    this.deck[j] = this.deck[k];
    this.deck[k] = temp;*/
    int index = 0;
    for (PlayingCard.CardSuit Suit : PlayingCard.CardSuit.values()) {
        for (PlayingCard.CardRank Rank : PlayingCard.CardRank.values()) {
            PlayingCard card = new PlayingCard(Suit, Rank);
            deck[index] = true;
            index++;
        }

    }
}

//Simulate dealing a randomly selected card from the deck
//Dealing from an empty deck results in a RuntimeException
public PlayingCard deal() {

    Random swift = new Random();
    int index = swift.nextInt(DECK_SIZE);
    cardsInDeck = DECK_SIZE;
    int i = 0;

    while (this.deck[index] == false&&i>0) {index = swift.nextInt(DECK_SIZE);}
    if(i>cardsInDeck) { throw new RuntimeException("Empty Deck");}

    PlayingCard.CardRank[] Ranking = PlayingCard.CardRank.values();
    PlayingCard.CardSuit[] Suiting = PlayingCard.CardSuit.values();

    PlayingCard.CardRank Rank = Ranking[index % 13];
    PlayingCard.CardSuit Suit = Suiting[index % 4];

    PlayingCard selected = new PlayingCard(Suit, Rank);
    this.deck[index] = false;
    i++;
    cardsInDeck--;

    return selected;

} 
```

==================================================== =================

```
public static void main(String[] args) {
    DeckOfCards myDeck = new DeckOfCards();
    myDeck.shuffle();

    for (int p = 1; p <= 4; p++) {
        for (int c = 1; c <= 13; c++) {
            System.out.print(myDeck.deal() + "  ");
        }
        System.out.println();
    }

    try {
        System.out.println(myDeck.deal());
    } catch (RuntimeException rte) {
        System.out.println(rte.getMessage());
    }
} 
```

}

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-19T06:33:31.430

> 我一直在尝试用这种方法让套牌发牌，但是一旦发牌了 52 张牌，它就会进入无限循环。

处理一副纸牌的简单方法是：

1.  将所有卡片放在一个`ArrayList`.
2.  调用[`Collections.shuffle()`](http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html#shuffle%28java.util.List,%20java.util.Random%29)该列表；
3.  按照它们在洗牌列表中出现的顺序发牌。

代码将比您现在拥有的代码简单得多，并且更容易调试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T05:01:05.867

你有没有尝试过这样的事情

```
 while ((this.deck[index] == false||i==cardsInDeck)&&i<52) 
```

?

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-19T06:12:29.727

一旦开始选择随机索引，就为时已晚。您需要先测试甲板是否有任何卡片。

```
if (cardsInDeck <= 0) ...throw an exception?...
while (this.deck[index] == false) {index = swift.nextInt(DECK_SIZE);} 
```

您需要`cardsInDeck`正确初始化（设置为`DECK_SIZE`not in `deal`but in`shuffle`和构造函数）。您希望不变量`cardsInDeck`等于`deck[index]==true`.

# php - 是否有使用 PHP 将内容发布到 Facebook 页面的 Facebook API？

> ID：10662419
> 
> 赞同：-1
> 
> 时间：2012-05-19T04:57:08.980
> 
> 标签：php, facebook

我有一个旅游网站，每当我发布新优惠时，我想自动更新我们网站的 Facebook 页面。

有没有我可以使用的 API？是否有任何推荐的教程显示如何执行此操作？

我们的内容使用 PHP 发布。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T06:56:09.377

是的，有很多方法可以做到这一点。

最常见的是为您的网站创建 Facebook 应用程序。 **[https://developers.facebook.com/apps](https://developers.facebook.com/apps)**

根据您用于开发的语言，从此 URL 下载 Facebook 开发工具包。 **[https://developers.facebook.com/docs/sdks/](https://developers.facebook.com/docs/sdks/)**

此 SDK 将具有所需的类和函数调用，以帮助您将网页中的内容提交到 Facebook 页面。

来看看吧。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T06:49:50.213

试试这个例子

```
$data = array(
        "link" => $link,
        "access_token" => $pages,
        "picture" => $image,
        "name"=> $title,
        "description"=> $description
);

$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, "https://graph.facebook.com/".$pageID."/feed");
curl_setopt($ch, CURLOPT_HEADER, false);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_POST, true);
curl_setopt($ch, CURLOPT_POSTFIELDS, $data);
$op = curl_exec($ch);
 if (!$op) {
  echo "Curl Error : ".curl_error($ch);
  curl_close($ch);
  exit;
}

curl_close($ch);
$res = get_object_vars(json_decode((string)$op));
print_r($res); 
```

# iphone - UITabBarViewController 不会按预期显示

> ID：10662421
> 
> 赞同：1
> 
> 时间：2012-05-19T04:57:26.483
> 
> 标签：iphone, uitabbarcontroller

我的目标：单击视图 A 中的按钮将带我进入视图 1，它是包含视图 2 和视图 3 的 UITabBarViewController。

我正在做的是：

```
-(void) goToView1 {
    View1 *controller = [[View1 alloc] initWithNibName:@"View1"bundle:nil];
    [self.navigationController pushViewController:controller animated:YES];
} 
```

并且所有 xib 文件都在下图中进行了描述 ![在此处输入图像描述](../Images/61ce74d14de2bae41e8612c6ce524fe8.png)

但是，运行应用程序后，我得到的是

![在此处输入图像描述](../Images/5e34f7fc3b1c476b5a0bd1d02470972e.png)

有人可以就这个问题给我建议吗？

欢迎所有评论。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T07:23:54.193

您已使用 UITabBarViewController 并尝试导航到视图。如果要导航到视图，请使用 UINavigationController

# c# - 如何将 xaml 页面内容保存到 windows phone 中的 jpeg 图像中？

> ID：10662422
> 
> 赞同：1
> 
> 时间：2012-05-19T04:57:28.870
> 
> 标签：c#, .net, windows-phone-7, xaml, windows-phone-7.1

我有一个 xaml 页面，我有一个滚动查看器。页面内容的高度超过了正常的屏幕高度，因此要查看内容，您必须向下滚动。我需要将滚动查看器中的内容保存到 jpeg 图像中。我该怎么做？

```
<grid height=800>
<scroll viewer height= 2000>
<other contents>
</scrollviewer>
</grid> 
```

在这里我需要将内容保存在滚动查看器中吗？我知道如何保存屏幕截图，但在滚动查看器的情况下这不会奏效。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T08:16:27.100

[我建议您使用ScrollToVerticalOffset](http://msdn.microsoft.com/en-us/library/system.windows.controls.scrollviewer.scrolltoverticaloffset.aspx)方法滚动并分段截屏。

# java - 如何使pdf在itext中只读

> ID：10662424
> 
> 赞同：2
> 
> 时间：2012-05-19T04:57:48.730
> 
> 标签：java, pdf-generation, itext

我的代码如下

```
public static void main(String[] args) {
        try 
        {
            PdfReader reader = new PdfReader("D:\\SF_Users.pdf");
            int n = reader.getNumberOfPages();
            Rectangle psize = reader.getPageSize(1);
            Document document = new Document(psize);
            PdfWriter writer = PdfWriter.getInstance(document,
                    new FileOutputStream("D:\\new.pdf"));
            document.open();
            PdfContentByte pdf = writer.getDirectContent();
            document.newPage();
            PdfImportedPage page = writer.getImportedPage(reader, 1);
            pdf.addTemplate(page, .5f, 0, 0, .5f, 60, 120);
            document.close();
        } catch (Exception de) {
        }
    } 
```

在这里我可以在写作时阅读pdf我想让它只读

谢谢你

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-20T13:19:40.987

您是否尝试过使用`PdfEncryptionSettings`API？

> 文档的打开权限可以是 AllowPrinting、AllowModifyContents、AllowCopy、AllowModifyAnnotations、AllowFillIn、AllowScreenReaders、AllowAssembly 和 AllowDegradedPrinting。

# python - Python In Maya - 仅通过代码重新创建现有形状

> ID：10662426
> 
> 赞同：0
> 
> 时间：2012-05-19T04:58:05.733
> 
> 标签：python, maya

嗨，我目前正在使用 Maya 学习 Python 脚本。我正在寻找一种将模型存储在代码中的方法，以便我可以使用代码访问我的独特模型。（我了解如何编写python氨基酸序列，只是不了解如何存储maya对象并在maya中使用python访问它们）

我已经学会了如何访问脚本编辑器以及如何添加特定的形状，例如 polySphere() 等。我想做的是制作一个特定的模型，然后选择模型并获取用于重新创建所有选定项目的代码，然后我可以在脚本中运行该代码以在另一个场景中重新创建该形状。

例如：我目前正在制作一些氨基酸，虽然对氨基酸进行建模并不难，但当我想制作它们的链时，编写一个重新创建这些特定氨基酸的脚本会非常有帮助（3d 模型) 顺序。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T09:51:28.457

这是许多初级到中级 Maya 用户都会遇到的问题。它源于这样一个事实，即他们并没有真正掌握 Maya 的实际工作方式。这里的诀窍是你实际上以错误的方式看待它。在我们深入了解答案之前，最好是我定义脚本，这样您就不会感到困惑。Maya 中的脚本是**maya.cmds**模块，即 Maya 的脚本层。Python 还在**maya.OpenMaya**中公开了 Mayas 编程层，稍后会详细介绍。

现在 Mayas 脚本界面起初有点奇怪，因为它不是完成这项工作的工具。Maya 真正的编程环境是**节点**，脚本界面只是为您提供了一种编程方式来布局节点。因此，Mayas 脚本接口是一种[元编程](http://en.wikipedia.org/wiki/Metaprogramming)接口。您不会通过查看脚本参考来解决这个问题，而是查看*超图*或[节点参考](http://download.autodesk.com/global/docs/maya2013/en_us/Nodes/index.html)。这意味着乍一看做你想做的事情有点不直观。

所以你的问题在这一点上发生了变化（假设你想像我上面定义的那样编写脚本，并且 Maya 手册定义了它）。我可以使用哪些类型的节点来构建这条氨基酸链？

好吧，基本上你剩下两个选项，使用粒子和粒子实例化或使用快照节点（快照节点是*唯一*可以在运行时进行复制和更改*dg*形状的工厂节点）。一旦你掌握了粒子实例化的原理，它就可以超级快速和直观地工作，而且几乎可以肯定，它可以通过这种方式处理数十万个分子。使用快照节点有点复杂，你不能很容易地为它制作动画。您用来绑定所有这些的节点是一个表达式节点，它是 Mayas 自定义数据处理程序（没有表达式不是 MEL）。

现在，如果您真的想做代码，我建议您不要这样做，那么您需要使用 Mayas API 创建一个节点，并结合脚本。脚本构建节点记住，因此构建连接和用户界面是一个脚本，而 API 只构建节点内部。这是更直接的编码，难以有效地利用您的时间。

也可以使用事件并按需重建该死的东西。这样做的问题是，你会有玛雅在你身上呕吐，并一路与你战斗，让你的生活变得悲惨。

# processing - 将 (0,0) 设置为左 下角而不在 Processing(.org) 中切换 X 轴和 Y 轴

> ID：10662427
> 
> 赞同：1
> 
> 时间：2012-05-19T04:58:11.303
> 
> 标签：processing

我想更改二维处理草图中的坐标系，将 (0,0) 放在左下角而不是左上角。以下代码将 (0,0) 移动到左下角：

```
transform(0, height);
rotate(radians(-90)); 
```

但是，它也使 X 轴成为垂直轴。有没有一种简单的方法可以将 (0,0) 移动到左下角*并*保持 X 轴水平？

我考虑过的一个选项是使用 P3D 与旋转和旋转Y 的组合，但更喜欢 2d 情况的解决方案。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T11:00:00.580

你可以简单地翻译而不旋转：

```
transform(0, height); 
```

并将您的坐标处理为翻转： boolean useVFlip = true;

```
void setup(){
  size(400,400);
}
void draw(){
  background(255);

  if(useVFlip) translate(0,height);
  drawAxes(100);

  translate(width * .5, useVFlip ? (height-mouseY)*-1 : mouseY);
  triangle(0,0,100,0,100,100);
}
void keyPressed(){   useVFlip = !useVFlip; }
void drawAxes(int size){
  pushStyle();
  strokeWeight(10);
  stroke(192,0,0);
  line(0,0,size,0);
  stroke(0,192,0);
  line(0,0,0,size);
  popStyle();
} 
```

如果它更容易获得翻转坐标，您可以使用[scale()](http://processing.org/reference/scale_.html)方法翻转整个坐标系： boolean useVFlip = true;

```
void setup(){
  size(400,400);
}
void draw(){
  background(255);

  if(useVFlip){
    scale(1,-1);
    translate(0,-height);
  }
  drawAxes(100);

  translate(width * .5, useVFlip ? height-mouseY : mouseY);
  triangle(0,0,100,0,100,100);
}
void keyPressed(){   useVFlip = !useVFlip; }
void drawAxes(int size){
  pushStyle();
  strokeWeight(10);
  stroke(192,0,0);
  line(0,0,size,0);
  stroke(0,192,0);
  line(0,0,0,size);
  popStyle();
} 
```

你可以对[PMatrix2D](http://processing.googlecode.com/svn/trunk/processing/build/javadoc/core/processing/core/PMatrix2D.html)做同样的事情，但不确定你对它们有多熟悉： boolean useCustomCS = true; PMatrix2D 自定义CS；

```
void setup(){
  size(400,400);
  customCS = new PMatrix2D(  1,  0,  0,
                             0, -1,height);
  fill(0);
}
void draw(){
  background(255);

  if(useCustomCS) applyMatrix(customCS);
  drawAxes(100);

  translate(width * .5, useCustomCS ? height-mouseY : mouseY);
  text("real Y:" + mouseY + " flipped Y: " + (height-mouseY),0,0);
  triangle(0,0,100,0,100,100);
}
void keyPressed(){   useCustomCS = !useCustomCS; }
void drawAxes(int size){
  pushStyle();
  strokeWeight(10);
  stroke(192,0,0);
  line(0,0,size,0);
  stroke(0,192,0);
  line(0,0,0,size);
  popStyle();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-17T13:43:23.747

尝试以下操作：

`translate(0,height);`

`scale(1,-1);`

# servlets - 在哪里可以找到 JBoss servlet api 的源代码

> ID：10662432
> 
> 赞同：0
> 
> 时间：2012-05-19T04:58:39.470
> 
> 标签：servlets, jboss

我想调试一个在 JBoss-servlet-api_3.0_spec-1.0.0.final.jar 中的类（javax.servlet.http.Cookie），但是在我从 github 下载了 JBoss 源代码之后：[https://github .com/jbossas/jboss-as/](https://github.com/jbossas/jboss-as/)，我发现那个类的源代码没有。谁能告诉我它在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T10:16:57.457

你可以在 Maven 中心找到

[http://search.maven.org/#artifactdetails%7Corg.jboss.spec.javax.servlet%7Cjboss-servlet-api_3.0_spec%7C1.0.0.Final%7Cjar](http://search.maven.org/#artifactdetails%7Corg.jboss.spec.javax.servlet%7Cjboss-servlet-api_3.0_spec%7C1.0.0.Final%7Cjar)

底部的 -sources.jar

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T07:17:15.343

看起来 jbossweb 仍然没有迁移到 GIT。它仍然托管在旧的 SVN 存储库上。

您正在寻找的是这里 [http://anonsvn.jboss.org/repos/jbossas/projects/specs/tags/jboss-servlet-api_3.0_spec-1.0.0.Final/src/main/java/javax/servlet /http/Cookie.java](http://anonsvn.jboss.org/repos/jbossas/projects/specs/tags/jboss-servlet-api_3.0_spec-1.0.0.Final/src/main/java/javax/servlet/http/Cookie.java)

主分支版本是 [http://anonsvn.jboss.org/repos/jbossweb/trunk/java/javax/servlet/http/Cookie.java](http://anonsvn.jboss.org/repos/jbossweb/trunk/java/javax/servlet/http/Cookie.java)

对于所有其他分支，请参阅 [http://anonsvn.jboss.org/repos/jbossweb/branches/](http://anonsvn.jboss.org/repos/jbossweb/branches/)

# php - PHP 表达式问题

> ID：10662435
> 
> 赞同：1
> 
> 时间：2012-05-19T04:59:49.383
> 
> 标签：php

我正在尝试在 PHP 中做正则表达式，但我一直被窃听。我想要它，所以它是 AZ、0-9 和下划线 (_)，但下划线不能用于文本的边缘。只在里面。

这是我所拥有的：

```
if (!ereg("^[a-zA-Z0-9_]{3,16}$",$username)) {
// Does not match
}else{
// Good job, within rules!
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-19T05:01:46.273

我不确定这是否是最好的方法，但它应该有效：

```
^[a-zA-Z0-9][a-zA-Z0-9_]{1,14}[a-zA-Z0-9]$ 
```

我减少了你的界限，`2`因为你在字符串的开头/结尾占了两个字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T05:26:19.863

首先，`ereg`已弃用。改为使用`preg_match`。

其次，您要匹配至少三个字符但不超过 16 个字符的任何字母、数字和下划线字符串，只要它不以下划线开头或结尾。@Blender 的解决方案将起作用。但是，一旦您使用`preg_match`，因此使用 PCRE，您就可以访问让您更紧凑地执行此操作的功能：用于处理前导或尾随下划线的环视断言，以及`\w`已经为您预定义为字母、数字和下划线：

```
if (!preg_match('/^(?!_)\w{3,16}(?<!_)$/', $username)) {
    // Does not match
} else {
    // Good job, within rules!
} 
```

# xquery - 在 xquery 中标记字符串

> ID：10662441
> 
> 赞同：1
> 
> 时间：2012-05-19T05:00:49.143
> 
> 标签：xquery, tokenize

> **可能的重复：**
> [Xquery 中的标记](https://stackoverflow.com/questions/10641546/tokenizing-in-xquery)

让字符串 a =“ [http://ontheland.com/letus/tag/present?page=20&type=0](http://ontheland.com/letus/tag/present?page=20&type=0) ”，需要在我想将“20”作为整数的地方标记这个字符串。主要问题是如何标记“&”。我一直在尝试使用**"&"**，但没有用。你能帮助解决这个确切的问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T10:32:10.000

你需要使用 & 作为 & 的实体：

```
let $a := <a><![CDATA[http://ontheland.com/letus/tag/present?page=20&type=0]]></a>
return xs:int(tokenize(tokenize($a,'&amp;')[1],'=')[last()]) 
```

You can try this example live at [http://www.zorba-xquery.com/html/demo#H8dHNTZwa2AnbIWhKEfMQ9HKT84=](http://www.zorba-xquery.com/html/demo#H8dHNTZwa2AnbIWhKEfMQ9HKT84=)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T05:59:01.937

除非该字符串是 CDATA，否则您的 XML 格式不会正确，并且您的 xquery 可能无法正常工作。如果是 CDATA，您应该能够通过使用`&`.

例子：

**XML**

```
<a><![CDATA[http://ontheland.com/letus/tag/present?page=20&type=0]]></a> 
```

**XPath**（用于 XQuery）

```
xs:int(tokenize(tokenize(/a,'&')[1],'=')[last()]) 
```

**结果**

```
20 
```

* * *

***使用 Saxon HE 测试***

# c++ - 如何约束 3D 旋转（欧拉）

> ID：10662445
> 
> 赞同：5
> 
> 时间：2012-05-19T05:01:14.373
> 
> 标签：c++, animation, 3d

约束 3D 旋转的正确/最佳方法是什么（使用欧拉角和/或四元数）？

看来我的做法有问题。我将旋转应用于骨骼层次结构中的骨骼以进行动画处理，并且骨骼有时会明显地“跳”到错误的方向，并且各个 Euler 组件会环绕到其范围的另一端。

我使用欧拉角来表示当前方向，转换为四元数进行旋转，并独立夹紧每个欧拉角轴。这是 C++ 伪代码，基本上显示了我在做什么：

```
Euler min = ...;
Euler max = ...;

Quat rotation = ...;
Euler eCurrent = ...;

// do rotation
Quat qCurrent = eCurrent.toQuat();
qCurrent = qCurrent * rotation;
eCurrent = qCurrent.toEuler();

// constrain
for (unsigned int i = 0; i < 3; i++)
    eCurrent[i] = clamp(eCurrent[i], min[i], max[i]); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T13:49:52.887

欧拉角的一个问题是有多种方法可以表示相同的旋转，因此您可以轻松创建一系列平滑的旋转，但表示该旋转的角度可能会跳来跳去。如果角度跳入和跳出约束范围，那么您将看到您所描述的效果。

想象一下，仅涉及 X 旋转，并且您已将 X 旋转限制在 0 到 180 度之间。还想象一下，将四元数转换为欧拉角的函数给出了 -180 到 180 度的角度。

然后你有这个旋转序列：

```
True rotation    After conversion    After constraint
179              179                 179
180              180                 180
181             -179                 0 
```

可以看到，即使旋转是平滑变化的，结果也会突然从一侧跳到另一侧，因为转换函数强制结果在一定范围内表示。

将四元数转换为欧拉角时，请找到最接近先前结果的角度。例如：

```
eCurrent = closestAngles(qCurrent.toEuler(),eCurrent);
eConstrained = clampAngles(eCurrent,min,max); 
```

记住下次的 eCurrent 值，并将 eConstrained 旋转应用于您的骨架。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T05:31:33.200

这里的问题是您应用的约束与应用的旋转无关。从概念的角度来看，这就是您要实现的目标：

*   假设骨骼处于无约束状态。
*   应用旋转
*   骨骼是否超出限制？如果是，将其旋转到不再受约束的位置

钳制欧拉旋转的代码是您将骨骼向后旋转的部分。但是，此代码忽略了原始骨骼旋转，因此您会看到奇怪的行为，例如您看到的捕捉。

一个简单的方法是这样做：

*   假设骨骼处于无约束状态
*   应用旋转
*   测试骨骼是否超出约束
*   如果是，我们需要找到约束停止移动的位置。
    1.  将旋转减半，反向应用
    2.  骨骼是否超出约束？如果是，请转到 1
    3.  如果不是，则将旋转减半，然后将其应用到正向。转到 2
*   继续这样做，直到您在约束​​角度的某个公差范围内

现在这将起作用，但是因为您的旋转四分位数被应用于所有角度，所以当这些约束中的任何一个为净时，旋转将停止，即使在其他地方有自由也是如此。

相反，如果您彼此独立地应用旋转，那么您将能够可靠地使用您的夹紧或上述技术来遵守约束，并尽可能靠近您的目标旋转。- -

# android - 无效的堆地址和致命信号 11

> ID：10662446
> 
> 赞同：43
> 
> 时间：2012-05-19T05:01:14.087
> 
> 标签：android, android-asynctask, heap-memory

每隔一段时间，我的应用程序就会崩溃，我的日志会显示：

```
@@@ ABORTING: INVALID HEAP ADDRESS IN dlfree
Fatal signal 11 (SIGSEGV) at 0xdeadbaad (code=1) 
```

有时`code=2`，但总是`Fatal signal 11`和`invalid heap address`。

我已经尝试研究这意味着什么以及如何解决它。[这个线程是最有帮助的](https://stackoverflow.com/q/4973310/420015)；但是，我仍然没有解决方案。

当我运行几个`AsyncTasks`下载几个图像时会发生错误。

这是我的主要`AsyncTask`

```
public class FetchArtistImages extends AsyncTask<Void, Integer, String[]> implements Constants {

private final WeakReference<Context> contextReference;

public FetchArtistImages(Context context) {
    contextReference = new WeakReference<Context>(context);
}

@Override
protected String[] doInBackground(Void... params) {
    String[] projection = new String[] {
            Audio.Artists._ID, Audio.Artists.ARTIST
    };
    String sortOrder = Audio.Artists.DEFAULT_SORT_ORDER;
    Uri uri = Audio.Artists.EXTERNAL_CONTENT_URI;
    Cursor c = contextReference.get().getContentResolver()
            .query(uri, projection, null, null, sortOrder);
    ArrayList<String> artistIds = new ArrayList<String>();
    if (c != null) {
        int count = c.getCount();
        if (count > 0) {
            final int ARTIST_IDX = c.getColumnIndex(Audio.Artists.ARTIST);
            for (int i = 0; i < count; i++) {
                c.moveToPosition(i);
                artistIds.add(c.getString(ARTIST_IDX));
            }
        }
        c.close();
        c = null;
    }
    return artistIds.toArray(new String[artistIds.size()]);
}

@Override
protected void onPostExecute(String[] result) {
    for (int i = 0; i < result.length; i++) {
            new LastfmGetArtistImages(contextReference.get()).executeOnExecutor(
                    AsyncTask.THREAD_POOL_EXECUTOR, result[i]);
    }
    super.onPostExecute(result);
} 
```

尽管我已经尝试过研究这是怎么回事，但在修复它时我仍然发现自己迷失了方向。如果有人有一些见解，我肯定会很高兴看到它。每次我都不会抛出错误`execute`，`AsyncTasks`但我找不到太多的模式来帮助找出发生这种情况的原因。SO about 上还有其他几个线程`fatal signal 11`，但在我的情况下它们并没有提供太多帮助。

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-08-04T23:10:02.433

我刚刚遇到了同样的问题，并让它处于可重现的状态。这是我得到的错误：

> 08-04 17:37:05.491：A/libc(4233)：@@@ 中止：dlfree 中的无效堆地址 08-04 17:37:05.491：A/libc(4233)：致命信号 11 (SIGSEGV) 在 0xdeadbaad （代码=1）

它归结为同时从两个不同的线程进行的函数调用。

更具体地说，这个函数是 BluetoothSocket 的 close() 方法。

[我在这个网站上](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.1_r2/android/bluetooth/BluetoothSocket.java#BluetoothSocket.close%28%29)检查了源代码，调用不同步（不确定这是否改变了，因为它来自 Android 2.1）。

无论如何，您是否有类似的场景，即从多个线程进行函数调用？从您显示的源代码中无法确定。

你也试过不使用 THREAD_POOL_EXECUTOR 吗？根据[android 开发指南](http://developer.android.com/reference/android/os/AsyncTask.html)：

> 首次引入时，AsyncTask 在单个后台线程上串行执行。从 DONUT 开始，这被更改为允许多个任务并行运行的线程池。从 HONEYCOMB 开始，任务在单个线程上执行，以避免并行执行导致的常见应用程序错误。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-06-13T17:52:17.760

我昨天有同样的错误。它总是发生，但并不总是始终如一。到目前为止，还没有提到对我来说是什么原因造成的。

我想我可能有类似的问题，因为我也在处理线程，但是我删除了所有线程并且问题仍然存在。最后，在一堆打印语句之后，我能够将其追踪到我实例化的一个类，该类有一个指针作为私有成员，但我忘了初始化指针。

后来当那个类被破坏时，它试图删除指针，但是由于指针没有初始化为NULL，它可能有也可能没有垃圾值，所以有时它不会导致崩溃，有时它会。这可能是因为当垃圾值是不属于我的内存位置时，或者当它属于我删除重要的东西时，它会导致崩溃/错误。

这是我遇到的问题的精简示例：

```
class BadFoo
{
public:
    BadFoo() {} // BAD! We didn't initialize the pointer
    ~BadFoo() {
        if (myPtr) {
            delete myPtr;
        }
    }
    // OTHER MEMBER FUNCTIONS HERE

private:
    int* myPtr;
}

class GoodFoo
{
public:
    GoodFoo() : myPtr(NULL) {} // GOOD! Can't be garbage value now
    ~GoodFoo() {
        if (myPtr) {
            delete myPtr;
        }
    }
    // OTHER MEMBER FUNCTIONS HERE

private:
    int* myPtr;
} 
```

有趣的是，这个崩溃并没有发生在我的 Transformer Prime 上，而是发生在我的 Nexus4 上。只是表明我们应该在多个设备上进行测试！到目前为止，Nexus 在帮助我追踪错误方面获胜，因为它似乎更加挑剔。

# sql-server - 在数据库中保存欧元货币值

> ID：10662447
> 
> 赞同：-1
> 
> 时间：2012-05-19T05:01:20.807
> 
> 标签：sql-server

我想在数据库中以 12.230,30 等格式存储欧元值。如果有人有解决方案，请帮助我

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T05:05:56.353

通常，数据值作为数值存储在数据库中，稍后会应用格式。

对于货币，因为您需要精确的 2 位小数点值（欧元金额通常为整欧元和欧元金额的 1/100），您需要选择一个数据库字段类型，将小数点数限制为2\. 要使用的确切字段类型取决于您使用的数据库。

# android - Android：添加新类后无法解决R

> ID：10662450
> 
> 赞同：1
> 
> 时间：2012-05-19T05:02:06.880
> 
> 标签：android

我在 Eclipse 中收到以下错误：`r cannot be resolved`. 然而，在我将自己的库作为资源添加到我的项目之后，它就出现了。似乎 eclipse 无法解析使用哪个 R，库之一或项目之一。另请注意，该库在项目设置中标有*is library*复选框。此外，每当我从参考列表中删除我的库时，eclipse 都不会显示任何错误，但在编译 logCat 时会显示`Class Not Found`异常。我该如何解决这个问题？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T05:07:27.603

R 是一个自动生成的类。如果您清理项目，错误应该会消失。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-19T05:16:14.173

R.java 不会为您的项目自动生成，请检查是否有任何 XML 文件有问题或检查控制台是否有任何**XML 问题，**它会显示与 XML 相关的内容或检查**导入包**的问题。如果它与任何 XML 错误无关，请检查在您的项目中导入该库项目。你可能会得到一些与以下内容相关的导入：**com.android.R**然后如果你看到这个就删除它，然后再次管理导入。

# android - 如何将 ITelephony.aidl 添加到 Eclipse？

> ID：10662451
> 
> 赞同：2
> 
> 时间：2012-05-19T05:02:34.537
> 
> 标签：android, eclipse

这无疑是一个非常简单的问题，但不幸的是我环顾四周并没有找到解决方案。

我想导入 ITelephony.aidl 以便我可以使用

导入 com.android.internal.telephony.ITelephony；

有人可以给我方向或指向我的教程吗？

提前致谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-19T05:10:40.410

您可以从[此处](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.1_r2/com/android/internal/telephony/ITelephony.java)下载 ITelephony.aidl并在您的项目 src 中创建 com/android/internal/telephony 包，然后将下载的 ITelephony.AIDL 复制到您的包中的 com/android/internal/telephony 中
![IT电话.AIDL](../Images/2b81f017829e35f7aa74040aa77bc811.png)

更多信息[阻止来电](http://androidsourcecode.blogspot.in/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T05:09:36.583

它不是您必须包含的公共 API [`yourself from here`。](http://code.google.com/p/auto-answer/source/browse/trunk/src/com/#com/android/internal/telephony)供进一步参考[`check this answer`](https://stackoverflow.com/questions/4446469/the-import-android-os-servicemanager-cannot-be-resolved)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-04T19:11:37.973

1.  [从这里](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.1_r2/com/android/internal/telephony/ITelephony.java)下载 ITelephony.java 文件
2.  创建文件夹结构 src/com/android/internal/telephony 并将上面的 ITelephony.java 文件复制到此文件夹中。
3.  现在将 com.android.internal.telephony.ITelephony 类导入您的项目。

干杯！！！查纳卡

# mysql - 在 django 中进行批量 SQL 插入

> ID：10662452
> 
> 赞同：1
> 
> 时间：2012-05-19T05:02:37.830
> 
> 标签：mysql, django, django-models

假设我有一个包含 100 万个电子邮件地址的 CSV 文件。我需要遍历文件并添加每个条目，例如：

```
with open(file) as csv:
    for item in csv:
        Email.objects.create(email=item) 
```

这看起来像这样通过 django ORM 创建 1M 对象并将它们插入数据库会非常慢。有没有比这更好的方法，还是我应该离开 django 来完成这项任务并直接使用 db 来完成？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-19T05:11:55.173

您也可以尝试使用新的[bulk_create](https://docs.djangoproject.com/en/1.4/ref/models/querysets/#bulk-create)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T05:16:43.160

恕我直言，如果它只是一次性插入（1M 记录不会花你几个小时），我认为速度不会有很大问题。如果将来您将使用 django api 来访问这些对象，那么您可能应该避免使用 SQL 级别的插入，而是通过 django 的方法来完成，就像 livar 建议的那样（如果使用 django 1.4）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-19T05:04:45.447

这是您应该使用 DB-API 来完成的事情，因为您绕过了创建所有模型对象。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-19T05:41:07.710

此外`bulk_create`，只要您的数据库后端支持，您就可以将所有插入放入一个事务中：

```
from django.db.transaction import commit_on_success
#  with commit_on_success(), open(file) as csv: # in Python2.7
with commit_on_success():
    for item in csv:
        Email.objects.create(email=item) 
```

另请注意，`bulk_create`将具有相同值的项目视为相同，因此

```
Email.objects.bulk_create([Email(email=item), Email(email=item)]) 
```

实际上创建一行而不是两行

由于更多的 SQL 周转，事务解决方案仍然比`bulk_create`一个慢，但您不必`Email()`在内存中创建所有一百万个实例（生成器在这里似乎不起作用）

此外，您可以[直接在 SQL 级别执行此操作](https://stackoverflow.com/questions/2838828/bulk-insert-problem-in-mysql)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-19T09:37:41.640

您可能想查看[Django DSE](http://djangopackages.com/packages/p/dse/)包，它显然是一个高效的批量插入/更新库。

# c# - 如何访问 Task.Factory.StartNew 中的 HttpContext.Current？

> ID：10662456
> 
> 赞同：21
> 
> 时间：2012-05-19T05:03:18.173
> 
> 标签：c#, asp.net, .net, c#-4.0, asp.net-4.0

我想在我的 asp.net 应用程序中访问 HttpContext.Current

```
Task.Factory.Start(() =>{
    //HttpContext.Current is null here
}); 
```

我该如何解决这个错误？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-05-19T05:09:20.140

`Task.Factory.Start`将启动一个新的`Thread`，因为它`HttpContext.Context`是线程的本地，它不会自动复制到新的`Thread`，所以你需要手动传递它：

```
var task = Task.Factory.StartNew(
    state =>
        {
            var context = (HttpContext) state;
            //use context
        },
    HttpContext.Current); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-19T09:05:40.033

您可以使用闭包使其在新创建的线程上可用：

```
var currentContext = HttpContext.Current;

Task.Factory.Start(() => {
    // currentContext is not null here
}); 
```

但请记住，任务可能会超过 HTTP 请求的生命周期，并且在请求完成后访问 HTTPContext 时可能会导致有趣的结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-28T14:00:47.593

正如[大卫](https://stackoverflow.com/a/10663842/2055187)指出的那样， HttpContext.Current 不会一直有效。就我而言，大约 20 次中有 1 次 CurrentContext 将为空。以下面结束。

```
string UserName = Context.User.Identity.Name;

System.Threading.Tasks.Task.Factory.StartNew(() =>
{
    UserName ...
} 
```

# mysql - mysql substring_index 反向

> ID：10662458
> 
> 赞同：5
> 
> 时间：2012-05-19T05:03:54.500
> 
> 标签：mysql, string

在 MYSQL 中，给定一个带点的字符串，我想选择最后一个点之前的所有内容。例如：输入

```
www.java2s.com

```

输出：

```
www.java2s

```

substring_index 似乎相反：

```
mysql> SELECT SUBSTRING_INDEX('www.java2s.com', '.', -1);
+--------------------------------------------+
| SUBSTRING_INDEX('www.java2s.com', '.', -1) |
+--------------------------------------------+
| com |
+--------------------------------------------+

```

可以这样做吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-19T05:51:21.943

```
 select substr('www.java2s.sth.com', 1, (length('www.java2s.sth.com')- 
    length(SUBSTRING_INDEX(('www.java2s.sth.com'), '.', -1))-1));` 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-04-29T17:17:21.507

如果您正在寻找更好的解决方案，它是：

```
SET @domain = "www.java2s.com";
SELECT SUBSTRING(@domain, 1, LENGTH(@domain)-LOCATE('.', REVERSE(@domain))); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-19T05:07:48.947

用这个

```
SELECT SUBSTRING_INDEX('www.java2s.com', '.', 2) 
```

更通用

```
SELECT SUBSTRING_INDEX('www.java2s.com', '.', ( LENGTH('www.java2s.com') - LENGTH(REPLACE('www.java2s.com', '.', '')))  ) 
```

# c - fork() 后如何同步写入文件？

> ID：10662459
> 
> 赞同：2
> 
> 时间：2012-05-19T05:04:36.357
> 
> 标签：c, file, asynchronous, network-programming

我将在 C 中实现一个服务器作为课程项目。服务器应同时为多个客户端提供服务。项目描述表明 fork() 应该用于为多个客户提供服务。每个孩子都应该在一个公共文件中写一些东西。如何同步处理？有没有像 Java 那样只有一个线程可以同时使用一个函数的机制？

# scala - 在 Scala 中转置任意集合

> ID：10662462
> 
> 赞同：9
> 
> 时间：2012-05-19T05:04:43.753
> 
> 标签：scala, collections, functional-programming, generic-programming, transpose

我必须经常在 Scala 中转置一个“矩形”集合集合，例如：映射列表、列表映射、映射映射、列表集、集合映射等。因为集合可以统一被视为从特定域到共域的映射（例如：List[A]/Array[A] 是从 Int 域到 A 共域的映射，Set[A] 是从 A域到布尔共域等），我想编写一个干净的通用函数来执行转置操作（例如：将列表映射转换为映射的转置列表）。但是，我遇到了麻烦，因为除了 () 运算符之外，Scala 似乎没有统一的 API 来将集合抽象地视为映射？

所以我最终为每种类型的集合编写了一个单独的转置，如下所示：

```
def transposeMapOfLists[A,B]( mapOfLists: Map[A,List[B]] ) : List[Map[A,B]] = {
  val k = ( mapOfLists keys ) toList
  val l = ( k map { mapOfLists(_) } ) transpose;
  l map {  v => ( k zip v ) toMap }
}

def transposeListOfMaps[A,B]( listOfMaps: List[Map[A,B]]) : Map[A,List[B]] = {
  val k = ( listOfMaps(0) keys ) toList
  val l = ( listOfMaps map { m => k map { m(_) } } ) transpose;
  ( k zip l ) toMap
}

def transposeMapOfMaps[A,B,C]( mapOfMaps: Map[A,Map[B,C]] ) : Map[B,Map[A,C]] = {
  val k = ( mapOfMaps keys ) toList
  val listOfMaps = k map { mapOfMaps(_) }
  val mapOfLists = transposeListOfMaps( listOfMaps )
  mapOfLists map { p => ( p._1, ( k zip p._2 ) toMap ) }
} 
```

有人可以帮我将这些方法统一为一个通用的集合转置吗？它还将帮助我（我相信其他人）在此过程中学习一些有用的 Scala 特性。

ps：我忽略了异常处理并假设输入集合是矩形的，即所有内部集合的域元素构成相同的集合。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-19T18:22:34.877

我确信以下使用类型类的凌乱版本可以清理很多，但它可以作为一个快速的概念验证。如果没有依赖方法类型，我看不到一种简单的方法来获得正确的返回类型（我相信这是可能的），所以你必须使用`-Xexperimental`：

```
trait Mapping[A, B, C] {
  type M[D] <: PartialFunction[A, D]
  def domain(c: C): Seq[A]
  def fromPairs[D](ps: Seq[(A, D)]): M[D]
  def codomain(c: C)(implicit ev: C <:< PartialFunction[A, B]) =
    domain(c).map(c)
  def toPairs(c: C)(implicit ev: C <:< PartialFunction[A, B]) =
    domain(c).map(a => (a, c(a)))
}

implicit def seqMapping[A, B <: Seq[A]] = new Mapping[Int, A, B] {
  type M[C] = Seq[C]
  def domain(c: B) = 0 until c.size
  def fromPairs[C](ps: Seq[(Int, C)]) = ps.sortBy(_._1).map(_._2)
}

implicit def mapMapping[A, B, C <: Map[A, B]] = new Mapping[A, B, C] {
  type M[D] = Map[A, D]
  def domain(c: C) = c.keys.toSeq
  def fromPairs[D](ps: Seq[(A, D)]) = ps.toMap
}

def transpose[A, B, C, M, N](m: M)(implicit
  pev: M <:< PartialFunction[A, N],
  qev: N <:< PartialFunction[B, C],
  mev: Mapping[A, N, M],
  nev: Mapping[B, C, N]
) = nev.fromPairs(nev.domain(mev.codomain(m).head).map(b =>
    b -> mev.fromPairs(mev.toPairs(m).map { case (a, c) => a -> c(b) })
)) 
```

现在进行一些测试：

```
scala> println(transpose(List(Map("a" -> 1, "b" -> 13), Map("b" -> 99, "a" -> 14))))
Map(a -> Vector(1, 14), b -> Vector(13, 99))

scala> println(transpose(Map('a' -> List(1, 2, 3), 'z' -> List(4, 5, 6))))
Vector(Map(a -> 1, z -> 4), Map(a -> 2, z -> 5), Map(a -> 3, z -> 6))

scala> println(transpose(Map("x" -> Map(4 -> 'a, 99 -> 'z), "y" -> Map(4 -> 'b, 99 -> 's))))
Map(4 -> Map(x -> 'a, y -> 'b), 99 -> Map(x -> 'z, y -> 's)) 
```

所以它按预期工作。

# jquery - jQuery zClip - 如何更改 div 的高度？

> ID：10662472
> 
> 赞同：0
> 
> 时间：2012-05-19T05:06:44.833
> 
> 标签：jquery, css, styles, zclip

我正在尝试修改此输出；

```
<div class="snippet-clipboard" style="position: absolute; width: 30px; height: 20px; z-index: 99; left: 771px; top: 362px; "><embed id="ZeroClipboardMovie_1" src="zclip/ZeroClipboard.swf" loop="false" menu="false" quality="best" bgcolor="#ffffff" width="30" height="20" name="ZeroClipboardMovie_1" align="middle" allowscriptaccess="always" allowfullscreen="false" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer" flashvars="id=1&amp;width=30&amp;height=20" wmode="transparent"></div> 
```

我想将片段剪贴板类的高度从 20px 更改为 30px 但我似乎做不到，我假设它在 jquery.zclip.js （[链接](http://www.steamdev.com/zclip/js/jquery.zclip.js)）中。

如果有人可以帮助我，那就太好了！

编辑; 这是 jquery.zclip.js 的摘录：

```
// create floating DIV above element
        this.div = document.createElement('div');
        this.div.className = "zclip";
        this.div.id = "zclip-" + this.movieId;
        $(this.domElement).data('zclipId', 'zclip-' + this.movieId);
        var style = this.div.style;
        style.position = 'absolute';
        style.left = '' + box.left + 'px';
        style.top = '' + box.top + 'px';
        style.width = '' + box.width + 'px';
        style.height = '' + box.height + 'px';
        style.zIndex = zIndex; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T06:27:42.447

尝试这个

```
width="30" height="30" 
flashvars="id=1&amp;width=30&amp;height=30" 
```

# google-code-prettify - 谷歌代码美化认为 css #id 是行注释。我究竟做错了什么？

> ID：10662474
> 
> 赞同：1
> 
> 时间：2012-05-19T05:07:14.793
> 
> 标签：google-code-prettify

示例 CSS

```
#wrap{margin:20px} 
```

代码美化将整行包装在`.com`

```
<span class="com">#wrap{margin:20px}</span> 
```

[有人在这里](http://code.google.com/p/google-code-prettify/issues/detail?id=171)有类似的问题。

有人回答“您正在加载 lang-css.js 吗？”。

这是我在页脚中加载的内容。

```
<script src="/js/google-code-prettify/lang-css.js"></script>
<script src="/js/google-code-prettify/prettify.js"></script> 
```

我可以用网络检查器看到它们。我尝试更改顺序并从标题中加载它们。我正在使用最新版本。

非常感谢所有帮助:)

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T21:29:49.660

您链接到 javascript 文件的顺序很重要。您需要首先调用基本代码 (prettify.js)，然后是 css 特定代码 (lang-css.js)。您可以将脚本标签放在头部或文档末尾...两者都可以，但放置在文档末尾会加快页面加载速度。

```
<script src="/js/google-code-prettify/prettify.js"></script>
<script src="/js/google-code-prettify/lang-css.js"></script> 
```

您还需要确保在文档头部链接样式表。

```
<link rel="stylesheet" type="text/css" href="/css/prettify.css"> 
```

您还需要在 pre 标签中添加正确的类。如果不将类“lang-css”添加到 <pre> 标记，则不会调用 lang-css.js 中包含的语法高亮功能。

```
<pre class="prettyprint lang-css linenums"> 
```

最后，确保在页面加载时调用“prettyPrint()”函数。

```
<body onload="prettyPrint()"> 
```

# javascript - 有没有办法确定 JavaScript 函数是否有副作用？

> ID：10662477
> 
> 赞同：4
> 
> 时间：2012-05-19T05:07:34.333
> 
> 标签：javascript, function, functional-programming, scope, side-effects

给定一个 Javascript 函数，是否可以验证该函数没有副作用；即，该函数不会更改在函数范围之外声明的任何变量的值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-19T05:29:00.987

您需要为 JavaScript 编写效果分析，这需要 JavaScript 的效果语义。一些需要考虑的事情：

*   代码是否访问具有副作用的原始操作？（例如内存写入、磁盘写入、文件 IO、更新任何全局状态？）
*   如果代码确实写入变量，它们是否会逃脱本地范围？（即它是在 ST 还是 IO monad 中？）
*   是否通过共享变量进行任何通信？

人们已经为不纯的语言编写了类型系统来静态确定是否存在副作用。[Ben Lippmeier 的论文](http://www.cse.unsw.edu.au/~benl/papers/thesis/lippmeier-impure-world.pdf)涵盖了很多领域。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-19T05:16:20.087

如果它访问任何未在函数中定义的变量，当然它会影响任何可能具有相同名称的全局变量。

您可以查看 JSLint 和 ADSafe 并针对这些工具运行您的文件。

[http://www.jslint.com/](http://www.jslint.com/)

[http://www.adsafe.org/](http://www.adsafe.org/)

HTH。

# cassandra - 使用赫克托，如何删除一系列超级列？

> ID：10662481
> 
> 赞同：1
> 
> 时间：2012-05-19T05:08:27.353
> 
> 标签：cassandra, hector

我有一个超级列族，随着时间的推移需要删除一系列超级列。我四处搜寻，似乎没有找到使用赫克托的解决方案。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T16:57:27.870

您必须先进行列切片以获取要删除的列，然后循环并生成突变列表。然后，您可以在一次 Hector 调用中将所有这些突变发送到 Cassandra：

```
Mutator<..> mutator = HFactory.createMutator(keyspace, serializer);

SuperSlice<..> result = HFactory.createSuperSliceQuery(keyspace, ... serializers ...)
                                .setColumnFamily(cf)
                                .setKey(key)
                                .setRange("", "", false, Integer.MAX_VALUE)
                                .execute()
                                .get();

for (HSuperColumn<..> col in result.getSuperColumns())
    mutator.addDeletion(key, cf, col.getName(), serializer);

mutator.execute(); 
```

# android - 将子精灵附加到动画精灵和引擎

> ID：10662493
> 
> 赞同：2
> 
> 时间：2012-05-19T05:10:11.237
> 
> 标签：android, andengine

我正在尝试使用 AndEngine 学习游戏编程。我创建了以不同间隔生成的动画精灵。我希望他们向我的球员射击。我已经搜索过，试图了解其他人是如何做到这一点的，并尝试了我认为可以让我开始的代码，但没有成功。有人可以向我指出正确的方向，以完成附加子精灵并让它在 AndEngine 中以不同的间隔拍摄。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-20T05:29:22.423

你小时候不需要附加子弹，[这](http://jimmaru.wordpress.com/2012/05/19/jimvaders-my-own-invaders-clone-thingie-tutorial/)是非常好的教程，它正在射击子弹:)，你很幸运！

# javascript - 如何在js中调用使用jquery定义的函数？

> ID：10662497
> 
> 赞同：1
> 
> 时间：2012-05-19T05:10:47.513
> 
> 标签：javascript, jquery

这是示例jquery代码

```
$(document).ready(function(){

  $('#myId').change(function(){
      regularJSfunc('data1','data2');
    });

} 
```

现在我想触发 $('#myId').change 的函数调用，我可以通过 java 脚本来实现吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-19T05:11:51.720

jQuery 实际上为您提供了一种方法：

```
$("#myId").trigger("change"); 
```

或者您可以仅将它链接到您已经必须立即调用它的代码：

```
$("#myId").on("change", function(){
  regularJSfunc( 'data1', 'data2' );
}).trigger("change"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-16T22:59:22.767

使用触发器在加载脚本上立即调用此函数。所以最好使用[triggerHandler](http://api.jquery.com/triggerHandler/)：

```
$('#myId').bind('change', function(){
    regularJSfunc( 'data1', 'data2' );
});

$('#myId').triggerHandler('change'); //call function 
```

# java - 如何继续切换案例程序，同时询问用户是否要继续（是或否）？

> ID：10662498
> 
> 赞同：-6
> 
> 时间：2012-05-19T05:11:20.940
> 
> 标签：java, swing, loops, joptionpane

这是代码：

```
 import javax.swing.*;

public class SwitchCase {

    /** * @param args */
    public static void main(String[] args) {

        int dec = 0, num, rem, org, pow, length = 0, i = 1, input;
        LOOPA: {
            input = Integer
                    .parseInt(JOptionPane
                            .showInputDialog("Press 1 for binary to decimal conversion \n "
                                    + "Press 2 for decimal to binary conversion\n"
                                    + "Press 3 for octal to decimal conversion\n"
                                    + "Press 4 for decimal to octal conversion\n"));

            switch (input) {

            case 1:
                num = Integer.parseInt(JOptionPane
                        .showInputDialog("Enter binary number"));
                org = num;
                while (num != 0) {
                    num = num / 10;
                    length++;
                }
                pow = length - 1;
                System.out.print("decimal Equivalent is: ");
                while (pow >= 0) {
                    rem = org % 10;
                    dec = dec + (rem * i);
                    i = i * 2;
                    pow--;
                    org = org / 10;
                }
                System.out.print(dec);
                break LOOPA;

            // decimal to binary conversion

            case 2:
                int addTwo = 2,
                bin;
                num = Integer.parseInt(JOptionPane
                        .showInputDialog("Enter decimal number"));

                while (num != 0) {
                    rem = num % 2;
                    num = num / 2;

                    addTwo = (addTwo * 10) + rem;
                }
                System.out.print("Binary Equivalent is: ");

                while (addTwo != 2) {
                    bin = addTwo;
                    bin = bin % 10;
                    System.out.print(bin);
                    addTwo = addTwo / 10;
                }
                break LOOPA;

            case 3: // octal to decimal conversion

                num = Integer.parseInt(JOptionPane
                        .showInputDialog("Enter octal number"));
                org = num;
                while (num != 0) {
                    num = num / 10;
                    length++;
                }
                pow = length - 1;
                System.out.print("decimal Equivalent is: ");
                while (pow >= 0) {
                    rem = org % 10;
                    dec = dec + (rem * i);
                    i = i * 8;
                    pow--;
                    org = org / 10;
                }
                System.out.print(dec);

                break LOOPA; // decimal to octal conversion

            case 4:
                int addEight = 8,
                octal;
                num = Integer.parseInt(JOptionPane
                        .showInputDialog("Enter decimal number"));

                while (num != 0) {
                    rem = num % 8;
                    num = num / 8;

                    addEight = (addEight * 10) + rem;
                }
                System.out.print("Octal Equivalent is: ");

                while (addEight != 8) {
                    octal = addEight;
                    octal = addEight % 10;
                    System.out.print(octal);

                    addEight = addEight / 10;
                }
                break LOOPA;
            default:
                System.out.print("do u want to continue");
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T05:20:47.900

由于您的代码未格式化太多以至于无法理解，因此这是解决问题的简单方法。尝试在这些方面工作：

```
BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
String s;
switch(yourVariable)
{

      case 1:
      //do something
      System.out.println("Do you wish to continue(y/n)?");
      s = br.readLine();
      if(s.equals("n"))
               break;

      //so on
} 
```

*但是我如何在 switch 语句之外使用它？*

```
do
{
    switch(yourVariable)
          {

          }
    System.out.println("Do you wish to continue(y/n)?");
    s = br.readLine();
}while(s.equals("y"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-19T05:17:49.533

> 如何继续 switch case 程序，同时询问用户是否要继续（是或否）？

使用循环。

# try-catch - try ... catch ... [finally] 是如何工作的？

> ID：10662503
> 
> 赞同：2
> 
> 时间：2012-05-19T05:12:50.480
> 
> 标签：try-catch

它几乎在每种语言中都可以找到，而且我大部分时间都在使用它。我不知道它是内部的，想知道它是如何工作的。

它如何在任何语言的运行时在本机级别工作？

*例如：如果在 try 中发生 stackoverflow 或 dividebyzero，那么 catch 如何防止程序下降？*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T08:30:56.433

声明“在任何语言的运行时处于本机级别”是矛盾的。异常处理的所有本机部分都依赖于平台，而不是语言。异常处理的某些部分甚至依赖于硬件（例如，除以零总是硬件异常。）

在 .NET、Windows、x86 上除以零的特定情况下，它是这样的：

*   您的应用程序尝试除以零。
*   CPU 保存一些应用程序状态并执行位于陷阱表中“除错”地址的代码（这恰好是陷阱表的第 0 个元素。）
*   陷阱处理程序代码（它是 Windows 内核的一部分）触发机制最终（在执行程序中）引发除以零的 SEH 异常，该异常将传播到对象管理器，然后传播到 .NET 运行时。
*   mscoree.dll 中的 .NET 运行时代码将除以零作为来自 COM 对象的 HRESULT COR_E_DIVIDEBYZERO。
*   .NET 将 HRESULT 转换为 System.DivideByZeroException。
*   您的代码将异常视为到“最近”封闭的 catch 块或 finally 块的美化长跳转。
*   您要么处理异常，要么将其从您的代码中传播出去，然后您的应用程序崩溃。

通常，您可以将异常视为带有指向某些线程本地状态信息（异常）的指针的长跳转。跳远的目标通常在编译时就知道了。

也不是每种语言都内置了异常处理。例如，C 没有结构化的异常处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T05:17:05.893

当抛出异常并且控制从 try 块传递到处理程序时，运行时调用自 try 块开始以来构造的所有自动对象的析构函数。这个过程称为**堆栈展开**。

# android - 从 Android 中的 SQLite 数据库获取数据？

> ID：10662505
> 
> 赞同：-1
> 
> 时间：2012-05-19T05:12:55.743
> 
> 标签：android

我是 android 新手，当我按下第一个按钮时，我如何创建两个按钮，它会转到下一页并获取用户输入并将其存储到 sqlite 数据库中，然后按下第二个按钮，它会从数据库中获取存储的数据并显示数据在表格视图中

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T05:19:54.157

研究这个例子，它显示了来自 sqlite 的记录，一个简单的教程。

```
import java.util.ArrayList;

import android.app.ListActivity;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteException;
import android.os.Bundle;
import android.util.Log;
import android.widget.ArrayAdapter;

public class CRUDonDB extends ListActivity {

    private final String SAMPLE_DB_NAME = "myFriendsDb";
    private final String SAMPLE_TABLE_NAME = "friends";

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        ArrayList<String> results = new ArrayList<String>();
        SQLiteDatabase sampleDB = null;

        try {
            sampleDB =  this.openOrCreateDatabase(SAMPLE_DB_NAME, MODE_PRIVATE, null);

            sampleDB.execSQL("CREATE TABLE IF NOT EXISTS " +
                    SAMPLE_TABLE_NAME +
                    " (LastName VARCHAR, FirstName VARCHAR," +
                    " Country VARCHAR, Age INT(3));");

            sampleDB.execSQL("INSERT INTO " +
                    SAMPLE_TABLE_NAME +
                    " Values ('Makam','Sai Geetha','India',25);");
            sampleDB.execSQL("INSERT INTO " +
                    SAMPLE_TABLE_NAME +
                    " Values ('Chittur','Raman','India',25);");
            sampleDB.execSQL("INSERT INTO " +
                    SAMPLE_TABLE_NAME +
                    " Values ('Solutions','Collabera','India',20);");

            Cursor c = sampleDB.rawQuery("SELECT FirstName, Age FROM " +
                    SAMPLE_TABLE_NAME +
                    " where Age > 10 LIMIT 5", null);

            if (c != null ) {
                if  (c.moveToFirst()) {
                    do {
                        String firstName = c.getString(c.getColumnIndex("FirstName"));
                        int age = c.getInt(c.getColumnIndex("Age"));
                        results.add("" + firstName + ",Age: " + age);
                    }while (c.moveToNext());
                } 
            }

            this.setListAdapter(new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1,results));

        } catch (SQLiteException se ) {
            Log.e(getClass().getSimpleName(), "Could not create or Open the database");
        } finally {
            if (sampleDB != null) 
                sampleDB.execSQL("DELETE FROM " + SAMPLE_TABLE_NAME);
                sampleDB.close();
        }
    }
} 
```

# .net - .NET 是否具有 Python 的 issubset 方法的等价物？

> ID：10662509
> 
> 赞同：2
> 
> 时间：2012-05-19T05:13:44.880
> 
> 标签：.net, python, set

**更新：**

正如@Blender 在 Python 中指出的那样`set('aab').issubset(set('abb')) == True`。对于我的情况，这需要返回 false。需要考虑每个字符的数量。

* * *

基本上我有两个字符串，我想确定一个是否是另一个的子集。例子：

```
String A: abcd
String B: dbace
String A is a subset of string B 
```

字符可以按任何顺序排列，并且可以有重复的字符数。我曾尝试对字符串排序，然后使用 String.StartsWith，但这在某些情况下不起作用。例子：

```
String A: abcdd
string B: abbcdd
Ordering these and using StartsWith returns false because string B has two "b"s 
```

我环顾四周，发现 Python 的 issubset 方法似乎可以满足我的要求，所以我很好奇是否有人在 .NET 中遇到过它的等价物（或有人自己提出的有效方法）。

注意：我正在寻找子集，而不是字谜。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-19T05:21:45.340

我所知道的没有任何内置的东西可以按照您的意愿行事。严格来说，这不是一个真正的子集，因为它应该像在 Python 中那样进行集合比较（集合中的每个项目都是唯一的），但它应该很容易制作。

```
public static bool IsSubsetOf<TSource>(this IEnumerable<TSource> lhs, IEnumerable<TSource> rhs)
{
    // O(m+n)
    var contents = rhs.ToList();
    foreach (var item in lhs)
    {
        if (!contents.Remove(item))
            return false;
    }
    return true;
} 
```

```
"aab".IsSubsetOf("abb");      // false
"foo".IsSubsetOf("food");     // true
"foo".IsSubsetOf("goof");     // true
"bar".IsSubsetOf("barf");     // true
"abcd".IsSubsetOf("dbace");   // true
"abcdd".IsSubsetOf("abbcdd"); // true 
```

如果你想要真正的系列机制，那也很简单。

```
public static bool IsTrueSubsetOf<TSource>(this IEnumerable<TSource> lhs, IEnumerable<TSource> rhs)
{
    return new HashSet<TSource>(lhs).IsSubsetOf(rhs);
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-19T05:24:14.907

我认为最好的解决方案是对它们进行排序并按`Contains`方法检查子集。

```
new String(A.OrderBy(o=> o)).Contains(new String(B.OrderBy(o=>o))) 
```

**更新：**

```
new String(A.OrderBy(o=> o)
            .Distinct())
     .Contains(new String(B.OrderBy(o=>o)
                           .Distinct())) 
```

# iphone - 比较 NSDictionary

> ID：10662510
> 
> 赞同：0
> 
> 时间：2012-05-19T05:14:17.137
> 
> 标签：iphone, ios5

我想比较两个字典及其键和值。我的以下代码返回错误。

```
NSLog(@"%@",[[NSUserDefaults standardUserDefaults] objectForKey:@"doc_GETNEWS"]);
NSLog(@"%@",[[NSUserDefaults standardUserDefaults] objectForKey:@"doc_GETNEWS_next"]);

    if([[NSUserDefaults standardUserDefaults] objectForKey:@"doc_GETNEWS_next"]!=nil)
    {

        NSDictionary *firstCache=[[NSUserDefaults standardUserDefaults] objectForKey:@"doc_GETNEWS"];
        NSDictionary *secondCache=[[NSUserDefaults standardUserDefaults] objectForKey:@"doc_GETNEWS_next"];

        NSLog(@"%@",firstCache);
        NSLog(@"%@",secondCache);
        //not equal then store it to main cache
        if(![firstCache isEqualToDictionary:secondCache])
        {
            [[NSUserDefaults standardUserDefaults] setObject:secondCache forKey:@"doc_GETNEWS"];
            [[NSUserDefaults standardUserDefaults] synchronize];
        }
    } 
```

我收到错误

```
if(![firstCache isEqualToDictionary:secondCache]) 
```

在这个声明中。like

```
[__NSCFArray isEqualToDictionary:]: unrecognized selector sent to instance 0x85247a0

Terminating app due to uncaught exception 'NSInvalidArgumentException', 
reason: '-[__NSCFArray isEqualToDictionary:]: unrecognized selector 
sent to instance 0x85247a0' 
```

不是这样：我在两个 NSLOG 中都成功获取了数据。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-19T05:22:22.053

该错误意味着您的`firstCache`对象实际上不是一个`NSDictionary`但实际上是一个`NSArray`.

# php - 在服务器上配置站点

> ID：10662511
> 
> 赞同：-2
> 
> 时间：2012-05-19T05:14:19.473
> 
> 标签：php, apache, zend-framework, putty, filezilla

我正在研究 Zend Framework，并将其配置到我的 Ubuntu 11.04 中。我为它创建了虚拟主机，它成功地运行到我的本地主机中。

现在最近我从我的客户那里得到了在服务器上配置相同代码的任务。所以我的问题是如何将它配置到服务器上，它是否需要虚拟主机以及它的过程是什么。我的机器上有 File Zilla 和 Putty SSH 客户端。

所以请帮助我。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T12:24:08.267

要将 Zend 应用程序投入生产，您只需将其放在根域中，例如在 example.org 或 mysite.example.org 的根目录中，但不要放在 url 为 example.org/testApp/myApp 的目录中。
请参阅 Zend 框架文档。

# visual-studio-2010 - 在 Visual Studio 的项目页面中找不到更多选项

> ID：10662519
> 
> 赞同：1
> 
> 时间：2012-05-19T05:16:27.803
> 
> 标签：visual-studio-2010, visual-studio, visual-c++

我在 GoogleCode 上玩某人的项目。当我添加`include<string>`并编译它时，我得到了

```
1>  Toolbar.cpp
1>C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\include\xlocale(323): error C2220: warning treated as error - no 'object' file generated
1>C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\include\xlocale(323): warning C4530: C++ exception handler used, but unwind semantics are not enabled. Specify /EHsc 
```

从 [/EH（异常处理模型）](http://msdn.microsoft.com/en-us/library/1deeycx5%28v=vs.80%29.aspx)，我知道我必须使用异常处理模型。但是在这个项目的属性页中，“配置属性”下只有四个字段：

```
General
Debugging
VC++ Directories
NMake 
```

与 Visual Studio 创建的新 Win32 项目不同，我找不到`C\C++`. `makefile`我应该在文件中设置异常处理模型吗？如果我想将此模式设置为`Yes(/EHSC)`. 提前致谢。

* * *

这是此项目根文件夹中的 makefile.msvc 文件。由于它很长，而且我发现很难将其文本内容格式化为代码示例，因此我将其上传到上传提供商。链接在这里。如果有比这样做更好的选择，请告诉我。 [我的 MakeFile.msvc](http://www.scribd.com/doc/94104567/Make-File)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T05:37:13.260

是的，因为你有一个`make`( `nmake`) 项目，你应该在`makefile`.

发布 makefile 或相关片段，我们可以指出添加标志的位置。通常它将是引用的行或命名或类似`cl.exe`的变量。`CFLAGS`这取决于`makefile`选择的创建者是哪个约定。

# javascript - Javascript禁用输入字段

> ID：10662524
> 
> 赞同：2
> 
> 时间：2012-05-19T05:17:20.153
> 
> 标签：javascript, input, field

好久没来了 我正在处理一个热门项目，但我似乎无法弄清楚如何禁用输入文本字段。情况是我填写了一个表单，然后在提交时我将表单留在原处，但禁用输入字段，因此无法更改。因此用户可以继续查看他们提交的内容。

```
<html> 
    <head> 
    <script> 
    function enableDisable() {
        var disable = true; 
        var arglen = arguments.length; 
        var startIndex = 0; 
        var frm = document.example1; //change appropriate form name

        if (arglen > 0){ 
            if (typeof arguments[0] == "boolean") { 
                disable = arguments[0]; 
                if (arglen > 1) {
                    startIndex = 1; 
                }
            } 
            for (var i = startIndex; i < arglen; i++) {
                obj = eval("frm." + arguments[i]); 
                if (typeof obj=="object") {
                    if (document.layers) {
                        if (disable) { 
                            obj.onfocus = new Function("this.blur()"); 
                            if (obj.type == "text") {
                                obj.onchange = new Function("this.value=this.defaultValue"); 
                            }
                        }
                        else {
                            obj.onfocus = new Function("return");
                            if (obj.type == "text") {
                                obj.onchange = new Function("return");
                            }
                        }
                    }
                    else {
                        obj.disabled=disable;
                    }
                }
            }
        }
    } 
    </script> 
    </head> 
    <body> 
        <form name="example1"> 
            Text Field: <input type="text" name="text1"> 
            <br> 
            <input type="submit" name="control1" onclick="enableDisable(this.submit, 'text1', 'submit', 'select1')"> 
        </form> 
    </body> 
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T05:30:50.877

我认为您希望文本字段成为只读字段。

**禁用文本字段**和**只读文本**字段之间存在差异。

READONLY 和 DISABLED 都删除了输入字段的功能，但程度不同。READONLY 锁定字段：用户不能更改值。DISABLED 做同样的事情，但更进一步：用户不能以任何方式使用该字段，不能突出显示要复制的文本，不能选中复选框，不能提交表单。事实上，如果提交表单，甚至不会发送禁用字段。

因此，您应该查看这篇文章以获取有关相同内容的更多信息。 [http://www.htmlcodetutorial.com/forms/_INPUT_DISABLED.html](http://www.htmlcodetutorial.com/forms/_INPUT_DISABLED.html)

# php - Yii 用户身份验证和会话不起作用

> ID：10662525
> 
> 赞同：2
> 
> 时间：2012-05-19T05:17:21.050
> 
> 标签：php, yii, yii-components

我正在 Yii 中建立一个网站，但我被困在用户身份验证步骤中。无论我做什么，我都无法对用户进行身份验证或在会话中存储一些值。

我的 UserIdentity 组件如下：

```
class UserIdentity extends CUserIdentity
{
    private $_id;

    public function authenticate(){
        if(($userRecord = Admin::model()->findByAttributes(array('username'=>$this->username)))===null){
            return $this->errorCode=self::ERROR_USERNAME_INVALID;
        }
        if($userRecord->password!=hash('sha256', $this->password)){
            return $this->errorCode=self::ERROR_PASSWORD_INVALID;
        }
        $this->_id=$userRecord->id;
        $this->setState('title', $userRecord->username);
        Yii::app()->session['clientId'] = $userRecord->clientId;
        Yii::app()->session['id'] = $userRecord->id;
        Yii::app()->session['loggedin'] = true;

        return $this->errorCode=self::ERROR_NONE;
    }

    public function getId(){
        return $this->_id;
    }

} 
```

我的`Yii:app()->user->isGuest`总是返回 true 并且`Yii::app()->user->id`什么也不返回。

这就是我尝试使用`Yii::app()->session['loggedin']`来进行身份验证的原因。但即使这样也行不通。当我像这样访问会话数组时，`Yii::app()->session`我得到了错误`Property "CWebUser.session" is not defined.`。

这真是令人沮丧。我是 Yii 的新手。请帮忙。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-19T06:14:10.287

使用[`login`](http://www.yiiframework.com/doc/api/1.1/CWebUser#login-detail)CWebUser 的功能。

按照[本教程](http://www.yiiframework.com/doc/guide/1.1/en/topics.auth#login-and-logout)。

# php - 从 rss 链接每 30 秒更改一次网页

> ID：10662526
> 
> 赞同：-1
> 
> 时间：2012-05-19T05:17:29.237
> 
> 标签：php, javascript, html, rss

我希望能够从 rss 提要中获取链接并将页面显示 30 秒，以便 rss 提要获得第一个链接显示 30 秒然后继续下一个链接直到结束，如果最后刷新页面和再来一遍...

一个人将如何去做这样的事情 html php javascript 谁能指出我正确的方向来实现这一点，或者如果已经有解决方案

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T05:27:11.020

您可以尝试将代码放入 setInterval 循环中，如下所示：

```
var refresh = setInterval(30000, function() {
   var obj = $.ajax({
    url: 'url', 
    data: { data }, 
    type: 'GET',
        }).done(function(msg) {
       console.log('ajax asynchronous request finished');
      });
   var rss = obj.responseText;
}); 
```

# javascript - 滚动到 80% 时加载 ajax

> ID：10662528
> 
> 赞同：30
> 
> 时间：2012-05-19T05:17:31.770
> 
> 标签：javascript, jquery, ajax, scroll, scrollbar

我正在使用以下代码，当滚动条到达底部时它正在工作，

```
if($(window).scrollTop() == $(document).height() - $(window).height()){ 
```

但是，我希望当我达到滚动的 70% 而不是 100 时触发 ajax。

* * *

## 回答 #1

> 赞同：92
> 
> 时间：2012-05-19T05:27:24.300

如果您当前的检查在滚动到页面底部时触发，您可以尝试一些基本的算术：

```
if ($(window).scrollTop() >= ($(document).height() - $(window).height())*0.7){
                                          //where 0.7 corresponds to 70% --^ 
```

确保添加一个检查以不触发多个同时发生的 Ajax 请求，如果您还没有这样做的话。

这超出了问题的范围，但是如果您想要一个如何防止同时触发多个请求的示例：

声明一个全局变量，例如`processing`.

然后将其合并到您的函数中：

```
if (processing)
    return false;

if ($(window).scrollTop() >= ($(document).height() - $(window).height())*0.7){
    processing = true; //sets a processing AJAX request flag
    $.post("url", '<params>', function(data){ //or $.ajax, $.get, $.load etc.
        //load the content to your div
        processing = false; //resets the ajax flag once the callback concludes
    });
} 
```

这是一个使用 var 跟踪滚动功能是否存在活动 Ajax 请求的简单示例，并且它不会干扰您可能拥有的任何其他并发 Ajax 请求。

编辑：[JSFiddle 示例](http://jsfiddle.net/ult_combo/YXLxG/)

请注意，使用 % 来测量文档高度可能不是一个好主意，考虑到每次加载某些内容时文档的高度都会增加，从而触发 Ajax 请求相对远离页面底部（绝对大小明智的）。

我建议使用固定值偏移量来防止这种情况（200-700 左右）：

```
if ($(window).scrollTop() >= $(document).height() - $(window).height() - 700){
                                 // pixels offset from screen bottom   --^ 
```

示例：[JSFiddle](http://jsfiddle.net/ult_combo/YXLxG/2/)

**编辑：**要使用百分比重现第一个代码中的问题，请将 50`div`秒加载到其中。当你加载下一个`div`时，它只会增加文档总高度的 2%，这意味着一旦你将这 2% 滚动回文档高度的 70%，就会触发下一个请求。在我的固定示例中，定义的底部偏移仅在用户位于屏幕底部定义的绝对像素范围内时才会加载新内容。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-05-19T05:26:53.893

快速谷歌搜索`get percentage scrolled down`将[这个页面](http://iwearshorts.com/blog/measuring-user-scroll-with-jquery/)作为第一个结果（使用下面的代码，或多或少地满足您的需求）。我觉得你在这里问之前没有尝试任何研究。

```
$(document).scroll(function(e){

    // grab the scroll amount and the window height
    var scrollAmount = $(window).scrollTop();
    var documentHeight = $(document).height();

    // calculate the percentage the user has scrolled down the page
    var scrollPercent = (scrollAmount / documentHeight) * 100;

    if(scrollPercent > 50) {
        // run a function called doSomething
       doSomething();
    }

    function doSomething() { 

        // do something when a user gets 50% of the way down my page

    }

}); 
```

# forms - 是什么阻止了某人在拥有签名的策略文档后将数千个文件上传到 Amazon S3？

> ID：10662532
> 
> 赞同：1
> 
> 时间：2012-05-19T05:18:35.163
> 
> 标签：forms, security, upload, amazon-s3

我觉得我必须在这里遗漏一些东西，因为在我看来，一旦有人拥有您[签署的政策文件](http://aws.amazon.com/articles/1434?_encoding=UTF8&jiveRedirect=1)，是否有任何东西阻止他们继续将数千份文件上传到您的 S3 存储桶？我在这里错过了什么吗？有什么东西可以使签名仅对一次上传有效吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T20:58:10.373

保单文档包含一个过期字段，您设置该字段以限制保单的有效期。

从亚马逊网站：

expiration - 格林威治标准时间 (GMT) 时间戳，指定策略文档何时到期。政策文件过期后，上传表格将不再有效。

```
{"expiration": "2009-01-01T00:00:00Z",
  "conditions": [ 
    {"bucket": "s3-bucket"}, 
    ["starts-with", "$key", "uploads/"],
    {"acl": "private"},
    {"success_action_redirect": "http://localhost/"},
    ["starts-with", "$Content-Type", ""],
   ["content-length-range", 0, 1048576]
 ]
} 
```

我以为我在某个地方读到过，一个桶的最大寿命是 36 小时，但我刚才看的时候找不到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T21:58:41.307

S3 中没有任何内容可以限制拥有您的政策文档的人可以上传的文件数量。

如果这是一个问题，那么我建议您使用其他东西来包装 S3 上传，以检查您的客户允许上传的文件数量。

# c++ - 陷入无限递归

> ID：10662533
> 
> 赞同：0
> 
> 时间：2012-05-19T05:19:22.677
> 
> 标签：c++, recursion, maze

我有这个函数来解决 C++ 中的迷宫，但是当我运行程序时，我在递归中得到了错误的访问错误。我认为 in 可能是一个无限循环。我不知道哪里出了问题。

```
bool Solve_Maze(int coorx,int coory) {
    if((Map[coorx][coory]==Start)||(Map[coorx][coory]==path)) {
        Map[coorx][coory]=wall;
        Solve_Maze(coorx+1,coory);
        Solve_Maze(coorx-1,coory);
        Solve_Maze(coorx,coory+1);
        Solve_Maze(coorx,coory-1);
    }else if(Map[coorx][coory]==End) {
        cout<<"You Solved the Maze!"<<endl;
        delete Map;
        return(true);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T05:27:54.367

1）您没有在 if 语句中返回任何值
2） Map[coorx][coory] ​​在所有函数调用中始终分配给 wall .. wall 是否指全局状态？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-19T05:49:32.933

我将函数更改为返回 void，因为该值未正确返回堆栈。在这种情况下，您将只使用全局**found**变量来检查是否找到了结尾。（这将要求您在每次运行该函数之前设置“found = false”）。

```
bool found = false; 
```

您还想做一些输入验证

```
if( coorx > maxX || coorx < 0 || coory > maxY || coory < 0) return; 
```

您需要将 maxX 和 maxY 替换为比 coorx 和 coory 的最大值多 1 的值。这将确保您不会遇到错误的访问错误。

```
bool found = false; // this will be global scope or pass it by reference
Solve_Maze(x,y);
// if(found) - found will be true if you found the end

void Solve_Maze(int coorx,int coory) {
    if( coorx > maxX || coorx < 0 || coory > maxY || coory < 0) return;
    else if(((Map[coorx][coory]==Start)||(Map[coorx][coory]==path))) {
        Map[coorx][coory]=wall;
        Solve_Maze(coorx+1,coory);
        Solve_Maze(coorx-1,coory);
        Solve_Maze(coorx,coory+1);
        Solve_Maze(coorx,coory-1);
    }else if(Map[coorx][coory]==End) {
        cout<<"You Solved the Maze!"<<endl;
        delete Map;
        found = true;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-19T05:23:03.880

在调试器（gdb 或 dbx）中运行它。使用 -g 标志进行编译，以便可以调试您的程序。如果您不知道如何使用调试器，请搜索“dbx cheatsheet”。您可以隔离它卡在循环中的位置（如果您的猜测是正确的）并逐步完成。您需要足够精通调试器来执行此操作以及实际执行此操作所需的总时间少于您已经花在思考上的时间。

没有讽刺的意思 - 人们确实经常高估学习调试器的工作，所以我想真正断言即使对于一个简单的问题它也是值得的，并且为大问题带来了巨大的回报。

# java - 如何在屏幕抓取时使用 cookie？

> ID：10662539
> 
> 赞同：0
> 
> 时间：2012-05-19T05:20:43.557
> 
> 标签：java, android

我想从登录页面后面的 PHP 网页中抓取数据。怎样才能让我只登录一次，然后无需再次登录就可以访问后续页面上的数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T09:15:16.980

我建议使用操作系统内置的[Android HttpClient` 库。](http://developer.android.com/reference/org/apache/http/client/HttpClient.html)默认情况下，他们会自动管理您的 cookie。引用他们的文档：

> HTTP 客户端的接口。**HTTP 客户端封装了在处理cookie**、身份验证、连接管理和其他功能时执行 HTTP 请求所需的大量对象。HTTP 客户端的线程安全取决于特定客户端的实现和配置。

# jquery - jQuery.animate() 在 Internet Explorer 中失败

> ID：10662541
> 
> 赞同：0
> 
> 时间：2012-05-19T05:21:18.533
> 
> 标签：jquery, internet-explorer, jquery-animate

如果这在其他地方得到了回答，请原谅我——我一直在疯狂地研究，但我发现的“修复”没有一个对我有用。

基本上，我使用 jQuery.animate() 将 li 标签内的 div 向下移动约 150px。它以顶部开始：-150 并使用溢出隐藏：隐藏。在包含 li 的鼠标悬停时，它应该动画到 top:0。这一切在 Chrome 和 FF 中都非常有效，但在 IE 中，我什么也得不到。我尝试使用 IE 开发人员工具栏，并在没有任何错误的情况下进行了跟踪。似乎由于某种原因，“顶部”属性在动画函数中永远不会改变，但我不明白为什么或需要改变什么来修复它。非常感谢任何帮助。

这是代码：

/edit le final

最后通过使用动画的 div 的“height”属性而不是“top”来解决这个问题。再加上 padding 和 border-width 属性，我基本上可以得到相同的效果。仍然不完全确定为什么“top”属性不起作用，但是 c'est la vie。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T05:40:47.103

在 IE 8 中测试的Hiya**工作演示**:) [http://jsfiddle.net/EbRgW/](http://jsfiddle.net/EbRgW/) **或** [http://jsfiddle.net/EbRgW/show/](http://jsfiddle.net/EbRgW/show/)

好读：[http ://api.jquery.com/jQuery.noConflict/](http://api.jquery.com/jQuery.noConflict/)

`var $jq = jQuery.noConflict();`会在你的情况下解决问题。

这会有所帮助，

**jQuery代码**

```
$(document).ready(function() { //http://api.jquery.com/jQuery.noConflict/
    var $jq = jQuery.noConflict();
    $jq('.accordion li').hover(function() {
        $jq(this).children('.accordion-textbox').stop().animate({
            top: '0px'
        }, 600);
    }, function() {
        $jq(this).children('.accordion-textbox').stop().animate({
            top: '-150px'
        }, 200);
    });
}); 
```

# android - 如何在 Android 中设置字体？

> ID：10662543
> 
> 赞同：8
> 
> 时间：2012-05-19T05:21:40.670
> 
> 标签：android, textview

我开发了一个 Andriod RSS 阅读器应用程序。我使用自定义列表视图来列出 RSS 标题及其图像。现在我想更改 RSS 标题的字体。如何将字体设置为我的标题文本视图？

这是我在其中设置标题 Textview 的适配器类。

适配器.java

```
public class InternationalAdapter extends BaseAdapter {

    private Activity activity;
    private ArrayList<HashMap<String, String>> data;
    private static LayoutInflater inflater=null;
    public ImageLoader imageLoader; 

    public InternationalAdapter(Activity a, ArrayList<HashMap<String, String>> d) {
        activity = a;
        data=d;
        inflater = (LayoutInflater)activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        imageLoader=new ImageLoader(activity.getApplicationContext());
    }

    public int getCount() {
        return data.size();
    }

    public Object getItem(int position) {
        return position;
    }

    public long getItemId(int position) {
        return position;
    }

    public View getView(int position, View convertView, ViewGroup parent) {
        View vi=convertView;
        if(convertView==null)

            vi = inflater.inflate(R.layout.list_row, null);

        TextView title = (TextView)vi.findViewById(R.id.title); // For this Textview I want to set Typeface.
        TextView date = (TextView)vi.findViewById(R.id.artist);

        ImageView thumb_image=(ImageView)vi.findViewById(R.id.list_image);

        HashMap<String, String> news = new HashMap<String, String>();
        news = data.get(position);

        // Setting all values in listview
        title.setText(International.Title[position]);
        date.setText(International.Date[position]);
        imageLoader.DisplayImage(International.image[position], thumb_image);
        return vi;
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-19T05:34:52.973

你可以用这个，

```
 public class InternationalAdapter extends BaseAdapter {

            private Activity activity;
            private ArrayList<HashMap<String, String>> data;
            private static LayoutInflater inflater=null;
            public ImageLoader imageLoader; 

            public InternationalAdapter(Activity a, ArrayList<HashMap<String, String>> d) {
                activity = a;
                data=d;
                inflater = (LayoutInflater)activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
                imageLoader=new ImageLoader(activity.getApplicationContext());
            }

            public int getCount() {
                return data.size();
            }

            public Object getItem(int position) {
                return position;
            }

            public long getItemId(int position) {
                return position;
            }

            public View getView(int position, View convertView, ViewGroup parent) {
                View vi=convertView;
                if(convertView==null)

                    vi = inflater.inflate(R.layout.list_row, null);

                TextView title = (TextView)vi.findViewById(R.id.title); // For this Textview I want to set Typeface.
                TextView date = (TextView)vi.findViewById(R.id.artist);
//Added Here
        Typeface font = Typeface.createFromAsset(
        activity.getAssets(), 
        "fonts/androidnation.ttf");
    title .setTypeface(font);

                ImageView thumb_image=(ImageView)vi.findViewById(R.id.list_image);

                HashMap<String, String> news = new HashMap<String, String>();
                news = data.get(position);

                // Setting all values in listview
                title.setText(International.Title[position]);
                date.setText(International.Date[position]);
                imageLoader.DisplayImage(International.image[position], thumb_image);
                return vi;
            }
        } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-19T05:37:21.583

像这样试试

```
Typeface font = Typeface.createFromAsset(
    getContext().getAssets(), 
    "fonts/androidnation.ttf");
title .setTypeface(font); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-04-21T20:55:23.690

来源：[https ://segunfamisa.com/posts/custom-fonts-with-android-support-library](https://segunfamisa.com/posts/custom-fonts-with-android-support-library)

像下面这样设置字体通常不起作用（[未找到 Android 运行时异常字体资源](https://stackoverflow.com/questions/33888127/android-runtime-exception-font-asset-not-found)）

```
Typeface font = Typeface.createFromAsset(activity.getAssets(), "fonts/montserrat_regular.ttf"); 
```

并可能导致如下错误：

```
java.lang.RuntimeException: Font asset not found fonts/montserrat_regular.ttf 
```

因此，您可以使用[此处给出的新方法](https://segunfamisa.com/posts/custom-fonts-with-android-support-library)

# 脚步：

## 1.在项目的资源文件夹中创建一个文件夹，`res/font`然后将字体粘贴到那里

### 您也可以创建一个字体系列

Font family是Android中引入的东西，用于定义一组字体及其对应的样式。因此，系统可以确定常规、粗体和斜体样式和粗细配置使用什么字体资源。典型的字体系列如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<font-family xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto">

<!-- regular -->
<font
    android:font="@font/josefinslab_regular"
    android:fontStyle="normal"
    android:fontWeight="400"

    app:font="@font/josefinslab_regular"
    app:fontStyle="normal"
    app:fontWeight="400" />

<!-- italic -->
<font
    android:font="@font/josefinslab_italic"
    android:fontStyle="italic"
    android:fontWeight="400"

    app:font="@font/josefinslab_italic"
    app:fontStyle="italic"
    app:fontWeight="400" />

</font-family> 
```

### 笔记

需要注意的一个非常重要的事情是，我们必须同时使用 android 和 app 命名空间来定义属性。应用程序命名空间确保该功能向后兼容。

## 2\. 以编程方式使用字体

```
Typeface typeface = ResourcesCompat.getFont(this, R.font.app_font);
myTextView.setTypeface(typeface); 
```

来源：[https ://segunfamisa.com/posts/custom-fonts-with-android-support-library](https://segunfamisa.com/posts/custom-fonts-with-android-support-library)

希望这可以帮助 ：）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-19T05:26:44.270

```
EditText edittext =(EditText) findViewById(R.id.ed);
String path="F:\\MTCORSVA.TTF";
Typeface tf=Typeface.createFromFile(path);
edittext.setTypeface(tf); 
```

你可以用这个:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-19T05:47:09.130

使用下面给出的custome textview并在那里设置字体

```
 public class MyTextView extends TextView{

 public MyTextView(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
        init();
        rotate();
    }

    public MyTextView(Context context, AttributeSet attrs) {
        super(context, attrs);
        init();
        rotate();
    }

    public MyTextView(Context context) {
        super(context);
        init();
        rotate();
    }

    private void rotate() {
        // TODO Auto-generated method stub
        setSelected(true);
    }

    private void init() {
        if (!isInEditMode()) {
            Typeface tf = Typeface.createFromAsset(getContext().getAssets(), "fonts/TrajanPro-Regular.otf");
            setTypeface(tf);
        }
    }

   } 
```

并且在您的 listview 行 xml 中意味着在**list_row** 布局中添加 textview 作为

```
 <YourpackageName.MyTextView
    android:layout_marginTop="10dip" android:id="@+id/title"
    android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true"
        android:textSize="22px"
        android:textColor="#34A4c5"
        android:ellipsize="marquee"
        android:maxWidth="220dp" 
        android:fadingEdge="horizontal"
        android:marqueeRepeatLimit="marquee_forever"
        android:scrollHorizontally="true"  
        android:singleLine="true"
        android:layout_marginLeft="10dp"
        android:textAppearance="?android:attr/textAppearanceLarge"
        android:layout_marginRight="10dp"></YourpackageName.MyTextView> 
```

这里使用了更多属性，您可以删除不需要的属性，并在您的**getview**方法中将其定义为

```
 MyTextView title = (MyTextView)vi.findViewById(R.id.title); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-02-06T12:25:38.850

您可以使用此库更改任何视图上的字体，只需将字体文件名与绑定 xml 代码一起传递。[https://github.com/ChathuraHettiarachchi/TypeFaced](https://github.com/ChathuraHettiarachchi/TypeFaced)

1.文本视图

2.edittext

3.开关

4.切换

5.按钮

6.单选按钮

7.复选框

```
<com.chootdev.typefaced.TypeFacedTextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Hello World!"
        app:textView_font="YOUR_FONT_NAME.ttf/> 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2017-07-20T17:36:41.540

我们也可以使用这个方法：

```
t.setTypeface(Typeface.MONOSPACE,Typeface.BOLD); 
```

这里等宽字体是一种字体。

# magento - 如何发布magento网站？

> ID：10662545
> 
> 赞同：1
> 
> 时间：2012-05-19T05:21:52.747
> 
> 标签：magento, web, web-deployment

我使用 magento 开发了一个网站。我如何在服务器上发布？如果asp.net发布后代码都转换成dll。但这里 magento 它是如何工作的？我如何配置自己的网站？

提前致谢...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T05:31:42.607

有很多方法可以做到这一点。从最简单到最复杂：

*   在服务器上简单的压缩和解压。使用 mysqldumps 迁移数据库。
*   使用 FTP 程序推送文件。最好带有比较查看器，例如 Beyond Compare
*   如果您在同一个盒子或本地服务器上使用 QA 环境或临时站点，您可以利用`rsync`将更改从一个目录推送到另一个目录。
*   创建一个源代码控制存储库并使用您的生产站点根目录作为您的 Magento 应用程序的检出点（可能是您最好的选择，以方便使用）。
*   利用源代码控制，但使用 Apache Ant 等构建工具进行部署。
*   使用 Capistrano、Hudson/Jenkins 或 CruiseControl 等工具实施持续集成

无论如何，您确实想使用源代码控制 - 因此直接从 SVN/Git/Hg 或其他工具进行部署是最有意义的，因为它最容易管理并且您只需很少的努力。让您的存储库可公开访问就像使用 GitHub 或 Beanstalkapp 等免费服务一样简单。付费级别为您提供私人回购或多个用户。

持续集成将是您在瞬息万变且每天发生许多部署的站点上进行快速部署的最佳选择。一些工具比较：

[http://en.wikipedia.org/wiki/Comparison_of_Continuous_Integration_Software](http://en.wikipedia.org/wiki/Comparison_of_Continuous_Integration_Software)

我希望这会有所帮助。我已经使用上述所有方法部署了 Magento。除了在本地模块中使用升级脚本之外，真的没有优雅的方式来推送数据库。您可以使用 Maatkit 之类的工具来区分表，或者在某些极端情况下，我看到开发人员使用 Magento 的内置表前缀在 qa 和生产环境之间切换。

# c# - C#中的十六进制格式

> ID：10662552
> 
> 赞同：-1
> 
> 时间：2012-05-19T05:23:20.470
> 
> 标签：c#, vb.net, vb.net-to-c#

> **可能重复：** [C# - 将一串十六进制值转换为十六进制](https://stackoverflow.com/questions/5647328)

我将以下代码从 Visual Basic 转换为 C#。但是我怎么知道如何在 C#中使用**Hex ？**

```
private string ConvertStringToHex(string sText)
{
    int lCount;
    string sHex;
    string sResult;
    for (lCount = 1; (lCount <= sText.Length); lCount++)
    {
        sHex = Hex(Convert.ToInt32(sText.Substring((lCount - 1), 1)));
        if ((sHex.Length == 1))
        {
            sHex = ("0" + sHex);
        }
        sResult = (sResult + sHex);
    }
    return sResult;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-19T05:31:34.620

如果您只是想转换为十六进制，那么您可以这样做：

```
int val = Convert.ToInt32(sText);
string hexval = val.ToString("X"); 
```

`Hex()`[是一个函数，用于返回表示 VB/ VB.NET](http://en.wikipedia.org/wiki/Visual_Basic_.NET)中可用数字的十六进制值的字符串。

请参阅*[十六进制函数 (Visual Basic)](https://web.archive.org/web/20130802011513/http://msdn.microsoft.com/en-us/library/963zt96e(v=vs.80).aspx)* (MSDN)。

# fonts - 中文和日文字体示例？

> ID：10662553
> 
> 赞同：-2
> 
> 时间：2012-05-19T05:23:30.003
> 
> 标签：fonts, typeface

我可以在我的应用程序中使用 diff EN 字体，但无法对 JP 或 CH 字体使用相同的任何解决方案..？

问题是我尝试了 10-12 diff JP CH 字体，但没有显示尝试过的 ttf 和 ttc 字体，这可能是什么问题..？

这是键盘字体不匹配的问题吗？

英文示例[http://www.androidhive.info/2012/02/android-using-external-fonts/](http://www.androidhive.info/2012/02/android-using-external-fonts/)

```
tf3 = Typeface.createFromAsset( getAssets(), "EN_3.TTF");
en3b.setTypeface(tf3); 
```

// 工作正常

```
tf4 = Typeface.createFromAsset( getAssets(), "CN_1.TTC");
cn1b.setTypeface(tf4); 
```

// 保持空白 // 尝试了许多 TTC 和 TTF 字体

```
tf7 = Typeface.createFromAsset( getAssets(), "JP_1.TTC");
jp1b.setTypeface(tf7); 
```

// 保持空白 // 尝试了许多 TTC 和 TTF 字体

```
<?xml version="1.0" encoding="utf-8"?> 
```

// 我的每个 XML 都以此开头，所以我是否使用 UTF-8 编码 .. ？

```
===== SOLUTION FOUND ======

UPGRADING EMULATOR FROM 2.2 to 2.3.3 SOLVED PROBLEM

MODS CAN CLOSE THIS Q 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T05:27:20.803

UTF-8 而不是你的拉丁语。大多数已建立的字体（arial，我们最喜欢的；times new roman）都支持这些字符，但您需要将您的环境（或渲染文件）设置为 utf-8 字符集

# php - 如何在列表页面中格式化日期

> ID：10662555
> 
> 赞同：1
> 
> 时间：2012-05-19T05:23:41.333
> 
> 标签：php, date, formatting, yii, listings

我是 Yii 框架的新手，刚开始在现有网站上工作。我有一个列表页面，我的要求是添加一个新字段“review_date_time”，我可以设法在列表中显示它。现在我的问题是如何更改日期的格式以及如果表格字段中没有日期，如何显示空格。如果没有日期，现在它正在显示 0000-00-00 00:00:00。

我的上市代码

```
 $this->widget('zii.widgets.grid.CGridView', array(
    'id' => 'series-grid',
    'dataProvider' => $model->search(),
    'filter' => $model,
    'columns' => array(
                    array('header' => 'Category', 'name' => 'category.title'),
                    'exam_year',
                    'title',
                    'review_date_time',
                    array(
                        'class' => 'CButtonColumn',
                    ),
    ),
 )); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T05:49:29.207

如果它显示*0000-00-00 00:00:00*则意味着该值是 db 表中的默认值，因此您必须使用 CDataColumn 的[`value`属性](http://www.yiiframework.com/doc/api/1.1/CDataColumn#value-detail "http://www.yiiframework.com/doc/api/1.1/CDataColumn#value-detail")：

```
$this->widget('zii.widgets.grid.CGridView', array(
 'id' => 'series-grid',
 'dataProvider' => $model->search(),
 'filter' => $model,
 // 'nullDisplay'=>'',
 'columns' => array(
                array('header' => 'Category', 'name' => 'category.title'),
                'exam_year',
                'title',
                // 'review_date_time',
                array(
                    'name'=>'review_date_time',
                    'value'=>'$data->review_date_time=="0000-00-00 00:00:00"?"":$data->review_date_time'
                )
                array(
                    'class' => 'CButtonColumn',
                ),
 ),
)); 
```

或者尝试 CGridView 的[`nullDisplay`属性](http://www.yiiframework.com/doc/api/1.1/CGridView#nullDisplay-detail "http://www.yiiframework.com/doc/api/1.1/CGridView#nullDisplay-detail")（如果您存储 null 并覆盖 afterFind 以将 null 格式化为 0000-00-00 00:00:00）：

```
$this->widget('zii.widgets.grid.CGridView', array(
'id' => 'series-grid',
'dataProvider' => $model->search(),
'filter' => $model,
'nullDisplay'=>'',
'columns' => array(
                array('header' => 'Category', 'name' => 'category.title'),
                'exam_year',
                'title',
                'review_date_time',
                array(
                    'class' => 'CButtonColumn',
                ),
 ),
)); 
```

# mysql - 为大文件加载数据文件（无警告，无错误，无行影响）

> ID：10662558
> 
> 赞同：4
> 
> 时间：2012-05-19T05:24:44.137
> 
> 标签：mysql, csv, file-io

我尝试了以下脚本：

```
LOAD DATA LOCAL INFILE 'myfile.csv'
    REPLACE INTO TABLE `mydb`.`mytable`
    CHARACTER SET latin1 FIELDS TERMINATED BY ','
    OPTIONALLY ENCLOSED BY '"' ESCAPED BY '"'
    LINES TERMINATED BY '\r\n'
    IGNORE 1 LINES (`field1`, `field1`, `field1`, `field1`, `field1`, `field1`); 
```

当我使用 500K 记录的文件时，它可以工作，但是当我尝试使用 400 万记录的 csv 文件时，它会返回：

```
Query OK, 0 rows affected (2.79 sec) 
Records: 0  Deleted: 0  Skipped: 0  Warnings: 0 
```

当然，在 2.70 秒内不会添加任何内容！

我的 RAM 是 4GB，我的输入文件（大的）是 370MB。

任何人都可以提出解决方案吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-19T18:13:34.423

大文件中的行尾可能不是“\r\n”。

`LINES TERMINATED BY '\r\n'`将格式更改为`'\n'`.

# c# - C# 中的处理器、内核和各种其他功能

> ID：10662559
> 
> 赞同：1
> 
> 时间：2012-05-19T05:24:48.127
> 
> 标签：c#, .net

我正在编写一个资源密集型应用程序，并且我试图找到一种方法让所述应用程序的用户决定应用程序应该使用哪些资源。

这里的部分问题是知道 CPU 的能力 -> 我想如果用户希望应用程序在 AMD Phenom II X6 上使用 5 个内核，我可以将所有东西都扔在这 5 个内核上。另一方面，如果处理器是 Intel i7 或 AMD FX-8510，则其中一些内核共享各种组件。那么我应该怎么做，以确保我不会意外地将某些东西安排到超线程调度程序，或者到那种程度？

我试图避免 CPU 阻塞的情况，因为我把所有东西都扔到了错误的部分（这是一个老问题）。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T06:20:29.377

操作系统中的线程调度程序具有所有必要的信息（物理 CPU 内核的数量、哪些逻辑内核共享资源、哪些内核停放在安全能量上、是否启用了超线程、哪些内核使用涡轮频率、其他程序使用了哪些资源等...) 用于高效的 CPU 资源分配。你的程序对这些事情一无所知，所以你能做的最好的事情就是让操作系统决定如何分配资源。即使您的程序没有任何特殊支持，用户也可以根据需要通过设置进程优先级或处理器亲和性来限制程序使用的资源。

您可以尝试的一件事是根据 CPU 内核数（由 Environment.ProcessorCount 返回）创建线程数。如果您认为每个物理核心调度一个线程（而不是每个逻辑核心一个线程）会执行得更好，您可以使用 Process.GetCurrentProcess().ProcessorAffinity 属性 - 在具有超线程的 CPU 上将其设置为 0x55555555，但这也可以使事情比以前更糟（如果未来的某个 CPU 将每个物理核心有 3 个逻辑核心而不是 2 个，或者如果另一个程序将处理器关联设置为相同的核心怎么办？）。

# java - Java：使用哈希集将动态生成的文本框的 Atore 值存入数据库

> ID：10662562
> 
> 赞同：-1
> 
> 时间：2012-05-19T05:25:05.547
> 
> 标签：java, mysql, netbeans-7, hashset

我已经动态创建了文本框，输入的数量由用户给出。这些文本框包含用户的姓名和联系电话。现在我想将这些姓名和联系电话存储到数据库中。谁能告诉我如何将数据从动态生成的文本框保存到数据库中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T05:34:46.647

动态生成的文本框？？好吧，我假设您正在讨论 JTextField 或 JTextArea。

首先，您必须检索这些值。

其次，使用 JDBC 或 ORM 将它们存储到数据库表中。

没有明确的问题，这就是我所能提供的。

# java - 有没有更快的方法来获取屏幕截图中的颜色？

> ID：10662568
> 
> 赞同：5
> 
> 时间：2012-05-19T05:26:14.980
> 
> 标签：java, image, image-processing, screenshot, awtrobot

我有一段代码，它的作用是找到图像（或屏幕部分）的颜色，如果 RG 和 B 颜色大于 127，它会将 1 放在 2D int 数组的相应位置。这是我现在拥有的部分，但它显然非常慢。有一个更好的方法吗？

```
private void traceImage(){
    try{
        Robot r = new Robot();
        b = new int[470][338];
        for(int y = 597; y < 597+469; y++)
        {
            for(int x = 570; x < 570+337; x++)
            {
                if(r.getPixelColor(x,y).getRed() > 127 &&
                   r.getPixelColor(x,y).getGreen() > 127 && 
                   r.getPixelColor(x,y).getBlue() > 127)
                {
                    b[y-597][x-570] = 1;
                }
                else
                {
                    b[y-597][x-570] = 0;
                }
            }
        }
    }
    catch(Exception ex){System.out.println(ex.toString());}
} 
```

必须有一种更快的方法来使用上面的值来做到这一点。`b`是 int 数组，它在这个段中被初始化。`r`是我用来查找屏幕上像素颜色的机器人。`x`并且`y`应该是不言自明的。

谢谢米凯拉！这是我根据您的回答得到的最终结果：

```
private void traceActionPerformed(java.awt.event.ActionEvent evt) {
    try{
        Robot r = new Robot();
        BufferedImage image = r.createScreenCapture(new Rectangle(597,570,470,337));
        b = new int[image.getWidth()][image.getHeight()];
        for(int y=0;y<image.getWidth();y++){
            for(int x=0;x<image.getHeight();x++){
                if(image.getRGB(y,x)==-1){
                    b[y][x]=0;
                }
                else{
                    b[y][x]=1;                 
                }
            }
        }
        System.out.println("Done");
    }
    catch(Exception ex){System.out.println(ex.toString());}
} 
```

if else 语句中的 -1 显然找到了我想要的黑色像素的值。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-19T05:32:21.697

您应该使用[Robot.createScreenCapture() 一次性](http://docs.oracle.com/javase/1.4.2/docs/api/java/awt/Robot.html#createScreenCapture%28java.awt.Rectangle%29)捕获整个子图像。

然后您将能够更快地查询子图像中的各个像素，例如使用[BufferedImage.getRGB(x,y)](http://docs.oracle.com/javase/1.4.2/docs/api/java/awt/image/BufferedImage.html#getRGB%28int,%20int%29)

有趣的是，您的特定操作具有非常快速的按位实现：只需执行`((rgb & 0x808080) == 0x808080)`

# jquery - 动态插入 iframe 的网页的 Html 看起来与原始页面略有不同

> ID：10662578
> 
> 赞同：3
> 
> 时间：2012-05-19T05:28:04.543
> 
> 标签：jquery, css, debugging, node.js, iframe

我有一个网页，我抓取了 html，通过 socket.io 通过 websockets 将它发送到另一个带有空 iframe 的页面，然后动态地将 html 插入 iframe。

我用来插入 html 的代码如下：

```
frame.open();
frame.write(html);
frame.close(); 
```

但是，DOM 元素的某些大小和间距似乎与原始页面略有不同。

这是两个屏幕截图，向您展示我的意思。很难看出差异，但顶部的搜索栏长度略有不同，每首歌曲的标题与大缩略图的距离也略有不同：

原始页面：

![在此处输入图像描述](../Images/1e03f55a6cbc4365a0046f3eaed43d69.png)

带有动态插入 html 的 iframe 的页面

![在此处输入图像描述](../Images/4699947e5945ebbaaf0d29ca2e749598.png)

html 中的唯一区别是将相对 url 更改为绝对 url。除此之外，html、浏览器和窗口大小都是相同的。此外，css 样式是相同的。

这里发生了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T06:30:56.043

一些默认设置（如边距和填充）在怪癖和标准模式之间有所不同。
因此请确保 DOCTYPE 声明与原始声明相同。

或者更正式地说，如果原始页面有任何触发标准模式的 DOCTYPE 声明，那么 iframe 中的源代码也需要具有类似的 DOCTYPE。（不必相同，只要它们触发相同的模式即可。）

# android - Android - 有没有办法在显示的字符串的一部分中编辑颜色？

> ID：10662585
> 
> 赞同：0
> 
> 时间：2012-05-19T05:29:50.417
> 
> 标签：android

我有一部分代码在对象上调用 toString，而 toString 基本上会吐出将在屏幕上显示的字符串。

我想更改字符串一部分的颜色。

我刚刚尝试过这样的事情：

```
 String coloredString =  solutionTopicName + " (" + commentCount +  ")";
        Spannable sb = new SpannableString( coloredString );
        ForegroundColorSpan fcs = new ForegroundColorSpan(Color.rgb(140, 145, 160));
        sb.setSpan(new ForegroundColorSpan(Color.BLUE), solutionTopicName.length(), solutionTopicName.length()+3, Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);

        return sb.toString(); 
```

但我仍然看到相同的颜色没有变化。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T05:44:18.850

是的，有可能

使用[Spannable](http://developer.android.com/reference/android/text/Spannable.html)来做到这一点。

`setSpan()`将完成这项工作。

```
Spannable mString = new SpannableString("multi color string ");        

mString.setSpan(new ForegroundColorSpan(Color.BLUE), 5, 7, Spannable.SPAN_EXCLUSIVE_EXCLUSIVE); 
```

更新：

```
String coloredString = " (" + solutionTopicName + commentCount +  ")";
        Spannable sb = new SpannableString( coloredString );
        ForegroundColorSpan fcs = new ForegroundColorSpan(Color.rgb(140, 145, 160));
        sb.setSpan(new ForegroundColorSpan(Color.BLUE), solutionTopicName.length(), solutionTopicName.length()+3, Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);

        //textView.setText(sb);
    return sb; 
```

最新的：

```
 String solutionTopicName= "Hello";
 String commentCount= "hi how are you";
 String coloredString =  solutionTopicName+"(" + commentCount +  ")";
 Spannable sb = new SpannableString( coloredString );
 sb.setSpan(new ForegroundColorSpan(Color.BLUE), coloredString.indexOf("("), coloredString.indexOf(")")+1, Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);
  mTextView.setText(sb); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T05:46:45.933

```
I would like to change the color of one part of the string. Is that at all possible? 
```

是的，您可以更改字符串特定部分的颜色。有一个`SpannableStringBuilder`类你可以使用它。

你可以做这样的事情。

```
SpannableStringBuilder sb = new SpannableStringBuilder("This is your String");
ForegroundColorSpan fcs = new ForegroundColorSpan(Color.rgb(140, 145, 160));
sb.setSpan(fcs, 0, 10, Spannable.SPAN_INCLUSIVE_INCLUSIVE);
textView.setText(sb); 
```

这是setspan方法的定义。

```
setSpan(Object what, int start, int end, int flags)
Mark the specified range of text with the specified object. 
```

`setSpan`方法将索引作为参数和`Object`Class 的实例。因此任何类的实例都可以根据您的要求作为参数传入。我们使用实例`ForegroundColorSpan`来改变文本的颜色。您可以传递`Clickable`实例以使字符串的某些部分可点击。

# c++ - 指向已释放位置的指针是未定义的行为吗？

> ID：10662587
> 
> 赞同：-6
> 
> 时间：2012-05-19T05:30:08.733
> 
> 标签：c++, pointers, undefined-behavior

指向已释放位置的指针是未定义的行为吗？

[http://ideone.com/Qp3uY](http://ideone.com/Qp3uY)

```
int *p = new int;

*p = 10;

delete p;

*p = 10;

cout << *p << endl; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-19T05:37:41.597

仅存在指向已释放位置的指针本身并不是未定义的行为。尝试取消引用该指针确实会产生未定义的行为。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-19T05:31:27.180

取消引用已删除的指针是未定义的操作。不要这样做。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-19T09:38:59.957

这是未定义的行为：

> 如果标准库中的释放函数的参数是一个不是空指针值的指针，则释放函数将释放指针引用的存储空间，使所有指向*释放存储空间*的任何部分的指针都无效。使用无效指针值（包括将其传递给释放函数）的效果是未定义的。- C++ '03 3.7.3.2

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-19T06:30:00.987

当您分配内存以创建新指针时，就像在第一行中所做的那样

```
int *p = new int; 
```

您要求操作系统生成一些内存供您使用，只要您愿意。然后你可以在那个地方放一些东西，就像你做的那样

```
*p = 10; 
```

您可以根据需要使用此内存，然后您可以通过调用 告诉操作系统您已完成它，`delete`就像您在下一行中所做的那样。

```
delete p; 
```

操作系统现在拥有可用的内存，但它可能会也可能不会对这些内存做些什么。如果你分配了一堆其他内存，那么新的内存范围有*可能*包括这块内存。操作系统可能会将这个内存交给其他东西，也可能不会 - 它不会告诉你，这就是为什么说仍然使用内存中的那个地方是*未定义的行为。*

```
*p = 10; 
```

然后，您可以重用这个内存位置，再次将其设置为 10。在此期间没有发生任何其他事情，这是一个相当微不足道的程序，因此操作系统尚未对该内存块执行任何其他操作，因此在这种情况下设置它不会产生任何更大的效果。

```
cout << *p << endl; 
```

同样，操作系统现在拥有内存，但此时它不太可能对它做任何事情。这就像在您的住宿正式结束后住在酒店房间一样。您可能会也可能不会呆在那里，因为您不知道房间之后是否正在被其他人使用，或者它是否仍然是空的。你可能会被赶出去，或者你可能是安全的。

# javascript - 从 Javascript 调用代码隐藏

> ID：10662592
> 
> 赞同：3
> 
> 时间：2012-05-19T05:30:47.410
> 
> 标签：javascript, asp.net, button, onclick

点击一个按钮，我调用了一个 JavaScript 函数。获得值后，我需要从代码隐藏中获得的值中执行一些操作。我应该如何调用代码隐藏？

我的aspx：

```
function openWindow(page) {
  var getval = window.showModalDialog(page);
  document.getElementById("<%= TxtInput.ClientID %>").value = getval; 
  //After this I need to perform stuff 'Upload(TxtInput.value)' into database from the code-behind
} 
```

调用该函数的按钮按如下方式设置：

```
<button class="doActionButton" id="btnSelectImage" runat="server" onclick="openWindow('../rcwksheet/popups/uploader.htm')">Select Image</button> 
```

我想要的代码背后（VB）：

```
Public Sub btnSaveImage_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnSelectImage.ServerClick
  Dim inputFile As String = Me.TxtInput.Value
  //do more stuff here
End Sub 
```

所以：

1.  有没有办法从 JavaScript 调用代码隐藏？
2.  我可以以某种方式使用按钮的“onclick”属性首先转到 JavaScript，然后转到代码隐藏吗？
3.  触发 TxtInput.Value 的代码隐藏调用“onchange”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T06:21:14.710

是的，有办法。

首先，您可以在设置返回值后使用javascript提交表单`TxtInput`。

```
function openWindow(page) {
  var getval = window.showModalDialog(page);
  document.getElementById("<%= TxtInput.ClientID %>").value = getval; 
  document.forms[0].submit();
} 
```

然后在您的代码后面，您可以`TxtInput`在页面加载事件中处理 ' 值。

```
protected void Page_Load(object sender, EventArgs e)
{
    if (Page.IsPostBack)
    {
        if (this.Input.Value != string.Empty)
        {
            this.Input.Value += "blah";
        }
    }
} 
```

注意：您可能需要[识别导致回发的控制](https://stackoverflow.com/questions/7319691/identifying-control-that-caused-postback)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T05:38:49.007

您可以将服务器端代码放入 Web 服务中，在您的 aspx 页面上的 asp:ScriptManager 中进行服务引用，然后您可以通过调用从 javascript 调用/执行 Web 服务：

```
WebServiceClassName.MethodName(javascriptvariable, doSomethingOnSuccess) 
```

这是一个这样做的链接：

[http://msdn.microsoft.com/en-us/magazine/cc163499.aspx](http://msdn.microsoft.com/en-us/magazine/cc163499.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-19T06:28:31.623

您可以调用 __doPostBack 事件。

```
function openWindow(page) {
  var getval = window.showModalDialog(page);
  document.getElementById("<%= TxtInput.ClientID %>").value = getval; 
__doPostBack('btnSelectImage', getval);
} 
```

在服务器端的代码后面，您可以获得值：

在 PageLoad 方法中：

```
if (Request.Form["__EVENTTARGET"] == "btnSelectImage")
{
    //get the argument passed
    string parameter = Request["__EVENTARGUMENT"];
    //fire event
    btnSaveImage_Click(this, new EventArgs());
} 
```

# objective-c - Xcode/打印点

> ID：10662595
> 
> 赞同：-1
> 
> 时间：2012-05-19T05:31:28.483
> 
> 标签：objective-c, cocoa

我正在尝试打印“。” 当我按下显示“。”的按钮时

基本上我想抓住“。” 关于 NSString 格式

所以如果我这样做

> NSString *dec = [发送者当前标题];

它只是在我尝试运行时崩溃。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T05:49:19.137

在 Cocoa 中，所有控件都通过使用目标动作机制发送它们已被操作的通知。“目标”是任何其他对象，“动作”是该对象响应的任何选择器。按钮也不例外。

例如，您可以定义：

```
-(void)buttonClicked:(id)sender {
  NSLog(@"Button was clicked!");
} 
```

您可以通过调用`-setTarget:`和`-setAction:`相应的方式将其连接到按钮的目标操作。`self`如果您是从处理该操作的类内部执行此操作，则目标将是：

```
[button setTarget:self];
[button setAction:@selector(buttonClicked:)] 
```

现在，当按下按钮时，您将在控制台中获得 NSLog() 输出。

要更新标签的值而不是使用 NSLog() 打印某些内容，您可能可以弄清楚，但是：

```
-(void)buttonClicked:(id)sender {
  [label setText:@"."];
} 
```

您应该阅读 Apple 的文档，其中详细介绍了这些内容。

[https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CocoaFundamentals/CommunicatingWithObjects/CommunicateWithObjects.html#//apple_ref/doc/uid/TP40002974-CH7-SW14](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CocoaFundamentals/CommunicatingWithObjects/CommunicateWithObjects.html#//apple_ref/doc/uid/TP40002974-CH7-SW14)

PS：stackoverflow 适用于所有编程语言，因此请务必使用相关编程语言标记您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T05:49:26.920

试试这个。

```
 UIButton *resultButton = (UIButton *)sender;
 NSString *dec = resultButton.currentTitle; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-19T05:50:30.770

尝试这样的事情

```
 NSString *strdec = [sender titleLabel].text; 
```

# c# - 触发更新面板中网格视图中的按钮

> ID：10662600
> 
> 赞同：0
> 
> 时间：2012-05-19T05:32:38.160
> 
> 标签：c#, asp.net

我在更新面板中有一个gridview，它工作正常。但是，单击编辑按钮时，我想打开编辑表单。但是编辑按钮单击不起作用。当我调试它时，该方法工作正常，但是页面没有回发。我尝试过使用触发器，但无济于事。

```
 <asp:UpdatePanel ID="upnlgrid" runat="server" UpdateMode="Conditional" >
    <ContentTemplate>
    <asp:GridView ID="gvGroupMaster" runat="server" AutoGenerateColumns="False" OnSelectedIndexChanging="gvGroupMaster_SelectedIndexChanging" OnSelectedIndexChanged="gvGroupMaster_SelectedIndexChanged" OnRowDataBound="gvGroupMaster_RowDataBound"  AllowSorting="true" OnPageIndexChanging="gvGroupMaster_PageIndexChanging" OnSorting="gvGroupMaster_Sorting" 
ShowHeader="True" CssClass="tabledata" Width="100%" DataKeyNames="igroup_id">
                         <AlternatingRowStyle CssClass="pointer" />
<RowStyle CssClass="even pointer" />
<HeaderStyle CssClass="headings" />

                        <Columns>

                        <asp:TemplateField HeaderText="Sort Order" ItemStyle-CssClass="colmn1" SortExpression="isort_position" >
                           <ItemTemplate>
                          <%-- <asp:ImageButton ID="btnSort" OnClick="btnSortClick" imageurl="../images/order-sort-btnup.png" runat="server"></asp:ImageButton>--%>
           <asp:Button ID="btnSort" class="sortord pointer" runat="server" OnClick="btnSortClick" ></asp:Button>
           <asp:Button ID="btnSortDown" class="sortorddown pointer" runat="server" OnClick="btnSortDownClick"></asp:Button>

                             </ItemTemplate>
                            </asp:TemplateField>

                       <asp:TemplateField  HeaderText="Group Name" SortExpression="strgroup_name" ItemStyle-CssClass="colmn2" >

                            <ItemTemplate>
                            <asp:Label ID="lblGroupName" runat="server"
            Text='<%# Bind("strgroup_name") %>'></asp:Label>

                             </ItemTemplate>
                            </asp:TemplateField>

                             <asp:TemplateField HeaderText="Short Name" SortExpression="strgroup_sname" ItemStyle-CssClass="colmn3" >

                            <ItemTemplate>

                            <asp:Label ID="lblShortName" runat="server"
            Text='<%# Bind("strgroup_sname") %>'></asp:Label>

                            </ItemTemplate>
                            </asp:TemplateField>
                            <asp:TemplateField HeaderText="Under" SortExpression="iparent_id" ItemStyle-CssClass="colmn4">

                            <ItemTemplate>
                             <asp:Label ID="lblUnder" runat="server"
            Text='<%# Bind("strunder") %>'></asp:Label>

                            </ItemTemplate>
                            </asp:TemplateField>

                             <asp:TemplateField HeaderText="Nature Of Group" SortExpression="strnature_of_group" ItemStyle-CssClass="colmn5">

                            <ItemTemplate>
                             <asp:Label ID="lblNatureOfGroup" runat="server"
            Text='<%# Bind("strnature_of_group") %>'></asp:Label>

                            </ItemTemplate>
                            </asp:TemplateField>

                             <asp:TemplateField HeaderText="Affect Gross Profit" SortExpression="straffect_gross_profits" ItemStyle-CssClass="colmn6">

                            <ItemTemplate>

                             <asp:Label ID="lblAffectGrossProfits" runat="server" Text='<%# Bind("straffect_gross_profits") %>'></asp:Label>

                            </ItemTemplate>
                            </asp:TemplateField>
                             <asp:TemplateField HeaderText="Nett DrCr Report" SortExpression="strnett_drcr_report"  ItemStyle-CssClass="colmn7">

                            <ItemTemplate>
                             <asp:Label ID="lblNettDrcrReport" runat="server"
            Text='<%# Bind("strnett_drcr_report") %>'></asp:Label>

                            </ItemTemplate>
                            </asp:TemplateField>

                            <asp:TemplateField HeaderText="Created By" SortExpression="icreated_by"  ItemStyle-CssClass="colmn8">

                            <ItemTemplate>
                             <asp:Label ID="lblCreatedBy" runat="server"
            Text='<%# Bind("strcreated_by") %>'></asp:Label>

                            </ItemTemplate>
                            </asp:TemplateField>

                             <asp:TemplateField HeaderText="Created On" SortExpression="dtcreated_on"  ItemStyle-CssClass="colmn9">

                            <ItemTemplate>
                             <asp:Label ID="lblCreatedOn" runat="server"
            Text='<%# Bind("dtcreated_on") %>'></asp:Label>

                            </ItemTemplate>
                            </asp:TemplateField>

                             <asp:TemplateField HeaderText="Last Updated On" SortExpression="dtupdated_on" ItemStyle-CssClass="colmn10">
                            <ItemTemplate>
                             <asp:Label ID="lbLastUpdatedOn" runat="server"
            Text='<%# Bind("dtupdated_on") %>'></asp:Label>

                            </ItemTemplate>
                            </asp:TemplateField>

                            <asp:TemplateField HeaderText="Actions" ItemStyle-CssClass="colmn11">

                             <ItemTemplate>
                             <asp:Button id="btnInfo" runat="server" class="infoicon" Text='<%# Eval("igroup_id") %>'  OnClick="infoclick"/>
                             &nbsp;&nbsp;
                             <asp:Button id="btnEdit" runat="server" class="editicon"  CausesValidation="false" Text='<%# Eval("igroup_id") %>'  OnClick="editclick"/>
                            &nbsp;&nbsp;
                             <asp:Button id="btnDelete" runat="server" class="deleteicon" Text='<%# Eval("igroup_id") %>' OnClick="deleteclick"/>
                             </ItemTemplate>
                             </asp:TemplateField>
                        </Columns>

                    </asp:GridView>
                   </ContentTemplate>

  </asp:UpdatePanel> 
```

编辑点击的代码隐藏

```
 protected void editclick(object sender, EventArgs e)
{
    try
    {

       //int rindex = (((GridViewRow)(((Button)(sender)).Parent.BindingContainer))).RowIndex;
        Button EditButton = (Button)gvGroupMaster.Rows[(((GridViewRow)(((Button)(sender)).Parent.BindingContainer))).RowIndex].FindControl("btnEdit");
        edit(EditButton.Text.ToString());
        this.Session["edit"] = EditButton.Text.ToString();

    }
    catch
    {
    }
}

protected void edit(string editid)
{
    try
    {
        GroupMasterClass gm = new GroupMasterClass();
        CompanyMasterClass co = new CompanyMasterClass();
        gm.igroup_id = Convert.ToInt32(editid);
        ResultClass objres = gm.fn_GetGroupByIdForEdit();
        if (objres.bStatus)
        {
            eslist<GroupMasterClass> OBJLIST = objres.objData as eslist<GroupMasterClass>;
            if (OBJLIST.Count > 0)
            {
                co.strcompany_code = Request.Cookies["userinfo"]["companycode"].ToString();
                ResultClass objress = co.fn_GetNameNumberStyle();
                if (objress.bStatus)
                {
                    eslist<CompanyMasterClass> OBJLISTS = objress.objData as eslist<CompanyMasterClass>;
                    if (OBJLISTS.Count > 0)
                    {
                        addfrm.Visible = true;
                        gridmain.Visible = false;
                        if (OBJLISTS[0].strname_style.ToString() == "PC")
                        {
                            txtGroupName.Text = misc.ToTitleCase(OBJLIST[0].strgroup_name);
                            txtGroupSname.Text = misc.ToTitleCase(OBJLIST[0].strgroup_sname);
                        }
                        if (OBJLISTS[0].strname_style.ToString() == "UC")
                        {
                            txtGroupName.Text = (OBJLIST[0].strgroup_name).ToUpper();
                            txtGroupSname.Text = (OBJLIST[0].strgroup_sname).ToUpper();
                            txtGroupName.Style.Add("text-transform", "uppercase");
                            txtGroupSname.Style.Add("text-transform", "uppercase");
                        }
                        if (OBJLISTS[0].strname_style.ToString() == "UG")
                        {
                            txtGroupName.Text = (OBJLIST[0].strgroup_name).ToUpper();
                            txtGroupSname.Text = (OBJLIST[0].strgroup_sname).ToUpper();
                        }
                    }
                }

                txtUnder.Text = OBJLIST[0].strunder;
                txtNotes.Text = OBJLIST[0].strnotes;
                for (int i = 0; i < OBJLIST.Count; i++)
                {
                    CompanyMasterClass cm = new CompanyMasterClass();
                    string p = OBJLIST[0].strcompany_code.ToString();
                    string t = string.Empty;
                    string code = string.Empty;
                    int count = 0;
                    string[] availcompanycode = p.Split(',');

                    foreach (string k in availcompanycode)
                    {
                        t = k.ToString();
                        code += "'" + t.ToString() + "'" + ",";

                        count++;
                    }
                    cm.strcompany_code = code.TrimEnd(',');

                    ResultClass objrest = cm.fn_GetCompanyListByCompanycode();

                    if (objres.bStatus)
                    {
                        eslist<CompanyMasterClass> OBJLISTS = objrest.objData as eslist<CompanyMasterClass>;
                        if (OBJLISTS.Count > 0)
                        {
                            // listboxsource.Items.Clear();
                            listboxdestination.DataTextField = "strcompany_name";
                            listboxdestination.DataValueField = "strcompany_code";
                            listboxdestination.DataSource = OBJLISTS;
                            listboxdestination.DataBind();
                        }
                    }

                    ListItem itemnature = new ListItem();
                    if (OBJLIST[i].strnature_of_group == "A")
                        itemnature.Text = "Assets";

                    else if (OBJLIST[i].strnature_of_group == "E")
                        itemnature.Text = "Expenses";
                    else if (OBJLIST[i].strnature_of_group == "I")
                        itemnature.Text = "Income";
                    else if (OBJLIST[i].strnature_of_group == "L")
                        itemnature.Text = "Liabilities";

                    // itemnature.Value = OBJLIST[i].igroup_id.ToString();

                    ddlNature.Items.Add(itemnature);

                    ListItem itemaffects = new ListItem();
                    if (OBJLIST[i].straffect_gross_profits == "N")
                        itemaffects.Text = "No";

                    else if (OBJLIST[i].straffect_gross_profits == "Y")
                        itemaffects.Text = "Yes";
                    //itemaffects.Value = OBJLIST[i].igroup_id.ToString();

                    ddlGrossProfit.Items.Add(itemaffects);

                    ListItem itemnett = new ListItem();
                    if (OBJLIST[i].strnett_drcr_report == "N")
                        itemnett.Text = "No";

                    else if (OBJLIST[i].strnett_drcr_report == "Y")
                        itemnett.Text = "Yes";
                    // itemnett.Value = OBJLIST[i].igroup_id.ToString();

                    ddlNett.Items.Add(itemnett);

                    ListItem itemlock = new ListItem();
                    if (OBJLIST[i].strlock_status == "N")
                        itemlock.Text = "No";

                    else if (OBJLIST[i].strlock_status == "Y")
                        itemlock.Text = "Yes";
                    // itemnett.Value = OBJLIST[i].igroup_id.ToString();

                    ddlNett.Items.Add(itemlock);

                }

            }
        }

    }
    catch
    {

    }
} 
```

有任何想法吗？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T07:13:03.783

尝试使用`Button editbtn = (Button)sender;`而不是`Button EditButton = (Button)gvGroupMaster.Rows[(((GridViewRow)(((Button)(sender)).Parent.BindingContainer))).RowIndex].FindControl("btnEdit");`

# google-chrome - Chrome toDataURI 错误

> ID：10662601
> 
> 赞同：3
> 
> 时间：2012-05-19T05:33:10.233
> 
> 标签：google-chrome, data-uri

直到大约一天前，Canvas2Image JS 库和 .toDataURI JS 方法还在 Chrome 中工作。[http://www.nihilogic.dk/labs/canvas2image/](http://www.nihilogic.dk/labs/canvas2image/)现在，使用 Chrome 版本 19.0.1084.46，如果您尝试在引用的页面上单击保存 PNG 以下载 HTML5 画布元素的 PNG 版本，它不会提示下载 - 但会生成 MIME 类型错误。这是故意的 - 也许是出于安全原因，还是一个错误？（它继续在 Firefox 中工作。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T06:04:24.227

这是 Google Chrome v19 中的一个错误，因为它在 v18 和 v20 中运行良好。我相信它很快就会修好。

# sql-server - 找出丢失的存储过程

> ID：10662607
> 
> 赞同：0
> 
> 时间：2012-05-19T05:34:14.353
> 
> 标签：sql-server, tsql, stored-procedures

我有 2 个数据库，一个在本地，另一个在云中，需要将存储过程从本地同步到在线。现在的问题是本地存储过程很少，我需要将它们迁移到在线，有 500 多个过程。是否有任何查询以找出本地但在线的程序，我无法覆盖从本地到在线的所有程序，因为已经在线的程序已更新

我也将在线数据库备份到我的本地。它的名字是 db2

假设我现有的本地数据库是 db1 ，我需要找出在 locak 但不在在线的程序

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T05:38:12.673

试试看

```
SELECT p1.name, p2.name
FROM db1.sys.procedures p1
full outer join db2.sys.procedures p2 on p1.name = p2.name
where p1.name is null or p2.name is null 
```

它为您提供不在两个数据库中的所有过程名称。

# jquery - 我怎样才能让 $.each 等到 .trigger('click') 事件加载所有内容？

> ID：10662613
> 
> 赞同：8
> 
> 时间：2012-05-19T05:36:07.363
> 
> 标签：jquery

在 $.getJSON 成功函数中，我首先触发另一个元素的点击事件：

```
$('#' + data[0].ID).trigger('click'); 
```

触发的点击事件有自己的 $.getJSON 方法将一堆数据加载到 div 中。触发事件后的下一行：

```
$.each(data[0].ListEntries, function (key, val) {
        //this relies on the triggered click event 
        //having completely loaded all data!
} 
```

起初 $.each 似乎没有做任何事情，但我在触发事件后立即添加了一个警报。响应警报后，$.each 中的代码显示了它应该做什么。

我猜 $.each 在单击事件完成加载数据之前正在运行。

setTimeout 暂停足够长的时间让 click 事件加载数据，但我宁愿不设置任意时间：

```
setTimeout(function() { 
    $.each(data[0].ListEntries, function (key, val) {
        //this relies on the triggered click event 
        //having completely loaded all data!
    }
}, 1000); 
```

我还尝试了 $.when 和 $.then 无济于事（尽管在 $.each 之前添加警报 $.then 会导致 $.each 工作延迟）：

```
$.when($('#' + data[0].ID).trigger('click')).then(function () {
    $.each(data[0].ListEntries, function (key, val) {
        //this relies on the triggered click event 
        //having completely loaded all data!
    }) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-19T06:12:07.727

您可以为此使用自定义事件。您可以将您`$.each`放入事件的侦听器中，然后您的[`$.getJSON`](http://api.jquery.com/jQuery.getJSON/)成功处理程序可以触发该事件：

```
$('#x').click(function() {
    var _this = this;
    $.getJSON(url, data, function(data) {
        // do things to data...
        _this.trigger('data-loaded');
    });
});
$('#x').on('data-loaded', function() {
    $.each(...)
});
$('#x').click(); 
```

演示：http: [//jsfiddle.net/ambiguous/FeYTB/](http://jsfiddle.net/ambiguous/FeYTB/)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-19T07:07:15.783

*整理得更清晰*

`.trigger()`返回一个 jQuery 对象，因此您无法选择执行`$.when() ... $.then()`.

另一方面，`.triggerHandler()`, 将返回您选择的对象，从而可以执行延迟的技巧。

您的代码分为三个功能，简化如下。调用路径是 1,2,3，最重要的返回路径是 3,2,1。

(1) 最高级别（JSON 成功）函数将包括以下几行：

```
function() {
    ...
    $.when($('#' + data[0].ID).triggerHandler('click')).done(function() {
        $.each(data[0].ListEntries, function (key, val) {
            ...
        });
    });
    ...
}; 
```

(2) (1) 触发的点击处理程序如下：

```
$("img.Button").on("click", function () {
    return GetModels(this.id);//here `return` passes on the jqXHR object, up the return path.
}); 
```

(3) 并且 (1) 所依赖的包含 JSON 的最低级别函数将具有以下一般形式：

```
function GetModels(id) {
    ...
    var jqXHR = getJSON(function(){...});
    ...
    return jqXHR;//it is vital to retutn the jqXHR object arising from the json call.
} 
```

备注：

*   `.when()`返回路径将由 (3) 中的调用产生的 jqXHR 对象作为 (1) 中的方法的“承诺”参数传递`.getJSON()`。因此，(1) 中的链接`.done()`在触发作为其参数提供的函数之前被迫等待 jqXHR 被解析（即完成）。
*   点击处理程序不假设它是如何被调用的。它只是返回 jqXHR 对象。因此，当使用 调用时`.triggerHandler()`，单击处理程序可以附加其他行为，而不会影响正常的单击操作。
*   It would be simpler to call `GetModels()` directly from (1), cutting out the middle-man (2), which is fine if `GetModels()` behaviour is uniquely wanted. If, however, (1) needs to be responsive to any future changes to the triggered click handler (2), then the above approach needs to be adopted.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-19T05:46:58.753

你为什么不试试

```
$('#' + data[0].ID).live('click', function (){
   $.each(data[0].ListEntries, function (key, val) {
            // your stuff here 
    });
}); 
```

所以`$.each`只有在点击被触发后才会运行。

# java - Ant taskdef - PermGen 空间不足

> ID：10662614
> 
> 赞同：4
> 
> 时间：2012-05-19T05:36:32.793
> 
> 标签：java, ant, typedef, out-of-memory, taskdef

使用创建子项目的 Ant 任务，例如 `<antcall>`并且`<ant>`可能由于以下错误之一而在重复调用时导致构建失败：

*   java.lang.OutOfMemoryError: PermGen 空间
*   java.lang.OutOfMemoryError：Java 堆空间

仅当正在调用的任务之一使用`<typedef>`or定义时才会发生错误`<taskdef>`，并且在使用与 Ant 捆绑在一起的任务（例如`<javadoc>`.

有没有办法在`OutOfMemoryError`不增加最大 Java 堆大小的情况下避免这种情况？虽然增加堆大小暂时有效，但如果添加更多内存密集型任务，问题仍然会重新出现。

* * *

以下示例任务和关联`build.xml`文件 `OutOfMemoryError`在我的 Linux 机器上导致 Java 堆设置为 10 MB（用于测试）。Ant 任务构造了一个需要大量内存的对象（在本例中为闭包模板大豆模块的 Guice 注入器），然后使用`<antcall>`.

### CreateGuiceInjectorTask.java

```
import com.google.inject.Guice;
import com.google.inject.Injector;
import com.google.template.soy.SoyModule;

import org.apache.tools.ant.Task;

/** Custom Ant task that constructs a Guice injector. */
public final class CreateGuiceInjectorTask extends Task {
  private Injector injector;

  public CreateGuiceInjectorTask() {
    injector = Guice.createInjector(new SoyModule());
  }

  public void execute() {
    System.out.println("Constructed Guice injector...");
  }
} 
```

### 构建.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<project name="out-of-memory-test" basedir=".">

  <property name="build.dir" location="${basedir}/build" />
  <property name="CreateGuiceInjectorTask.jar"
      location="${build.dir}/CreateGuiceInjectorTask.jar" />

  <taskdef name="create-injector"
      classname="CreateGuiceInjectorTask"
      classpath="${CreateGuiceInjectorTask.jar}" />

  <target name="call-create-injector">
    <create-injector />
  </target>

  <target name="test"
      description="Create multiple injectors until out of memory">
    <antcall target="call-create-injector" />
    <antcall target="call-create-injector" />
    <antcall target="call-create-injector" />
    <antcall target="call-create-injector" />
    <antcall target="call-create-injector" />
    <antcall target="call-create-injector" />
    <antcall target="call-create-injector" />
    <antcall target="call-create-injector" />
    <antcall target="call-create-injector" />
    <antcall target="call-create-injector" />
    <antcall target="call-create-injector" />
    <antcall target="call-create-injector" />
    <antcall target="call-create-injector" />
  </target>
</project> 
```

### 测试输出：

```
$ ant test

test:

call-create-injector:
[create-injector] Constructed Guice injector...

call-create-injector:
[create-injector] Constructed Guice injector...

...

call-create-injector:

BUILD FAILED
Could not create type create-injector due to java.lang.OutOfMemoryError: Java heap space 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-19T12:34:37.733

使用[此处描述](http://blog.kdgregory.com/2010/08/ant-taskdef-and-running-out-of-permgen.html)[的 Keith Gregory 的](https://stackoverflow.com/users/42126/kdgregory)方法，我能够解决内存问题，至少对于您发布的简单示例代码而言。

概括地说，问题是每次通过`antcall`Ant 使用 taskdef 时都会使用不同的类加载器，因此您很快就会吃光您的 permgen。要确认这一点，您可以修改您的类以打印类加载器哈希码 - 您将在每次迭代中看到它的不同。

解决方法是将您的 taskdef 打包为[antlib](http://ant.apache.org/manual/Types/antlib.html)并使用 antlib 命名空间来加载它。结果是使用了 Ant 自己的类加载器。为此，您必须将类放在 Ant 类路径中。

为了测试这一点，我将您的测试类放在包命名空间（称为 memtest）中，编译，然后在包目录中添加一个 antlib.xml，如下所示：

```
<antlib>
  <taskdef name="create-injector" classname="memtest.CreateGuiceInjectorTask" />
</antlib> 
```

buildfile 项目声明更改为

```
<project name="out-of-memory-test" basedir="." default="test" xmlns:mt="antlib:memtest"> 
```

和目标

```
<target name="call-create-injector">
  <mt:create-injector />
</target> 
```

为了进行测试，我将所需的一切都放在了 Ant 类路径中。它成功地运行了许多 antcall，并且类加载器哈希码的调试打印确认使用了预期的单个实例。

Ant 文档中有一条[关于 antlib 命名空间的注释](http://ant.apache.org/manual/Types/antlib.html#antlibnamespace)说“在未来的 Ant 版本中，可能会删除资源位于默认类路径中的要求”。根据如何实施，解决方法可能会在未来中断。

# php - 我必须在 php.ini 中进行哪些更改才能将上传的文件移动到远程服务器？

> ID：10662615
> 
> 赞同：0
> 
> 时间：2012-05-19T05:36:40.470
> 
> 标签：php

我的 php 应用程序在具有负载平衡的主从服务器中运行。有时上传请求会重定向到从服务器，文件只会上传到从服务器。它不会与主服务器同步。我想把slave的apache服务器的文件上传路径改成master。在不修改我的应用程序的情况下，我应该在 php.ini 中做什么来实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T06:44:22.207

php.ini 无法处理（据我所知）。我能想到的唯一选择是：

a) 我使用的唯一解决方案是有一个单独安装的文件系统来上传文件 - 这样任何一个系统都可以将文件上传到基本上相同的地方。（确保基本目录限制中的 file_system 是您启用的 - 所以 oyu 许多人需要 ot mod php.ini 。）

b) 负载均衡器需要将一种类型的调用重定向到始终相同的服务器（即主服务器）。我不是负载平衡方面的专家，所以不知道这是否可能。

（而您的问题排除的 c 是将应用程序分成两部分。）

# java - 为静态最终变量赋值

> ID：10662619
> 
> 赞同：4
> 
> 时间：2012-05-19T05:37:10.093
> 
> 标签：java, static

```
public class A{
    public static final int j;
    public static int x; 
    static{ 
         j=9; 
    }
    public A(int j)
    {
         j = j;
    }
    protected void print()
    {
           System.out.println(j);
    }
} 
```

在 Eclipse 中尝试上面的代码时，eclipse 显示“对变量 j 的赋值没有效果”显示为在构造函数中初始化变量“j”。

请告诉我为什么变量 j 没有效果。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-19T05:59:30.583

该参数`j`正在*遮蔽*类成员`j`。尝试按如下方式更改您的代码：

```
public A(int j)
{
     A.j = j;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-19T06:01:46.397

The class variable j (static final int j) is assigned the value 9 in the static block. That is all valid.

In the constructor, the parameter j, is assigned to itself and that has no effect. The alternative (and I suspect what you meant) is:

```
public A(int j)
{
     A.j = j;
} 
```

Here the parameter j is assigned to the class variable j. However, Java will complain here as the class variable is final. If you remove the final keyword, this will of course work as well. However, now it gets interesting:

The value of class j, will be 9 as long as no instance of class A is created. The moment an instance of the class is created through the new operator, all instances of the class A will have the same value for the class variable j (dependant on what you sent the constructor).

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-19T05:40:21.473

将变量分配给自身具有什么都不做的净值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-19T05:39:27.007

因为`final`变量只能被赋值一次，这意味着在JVM执行`static`变量期间一次，而构造函数是在每次创建对象时执行的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-19T05:49:20.157

您可能想阅读一下[这个](https://bugs.eclipse.org/bugs/show_bug.cgi?id=310264)。它说在某些情况下，*生成的警告是不正确的*，就像你的情况一样。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-19T07:10:02.993

使用`this.j = j;`

使用`j = j`时，两个“j”是一样的，只是构造函数的参数，而不是A类的字段。如果要A的字段j，请使用`this.j`。

# .net - 卸载前要求关闭 Winforms 应用程序

> ID：10662621
> 
> 赞同：1
> 
> 时间：2012-05-19T05:37:18.440
> 
> 标签：.net, winforms, windows-installer, uninstallation

答案可能涉及自定义卸载操作，但它似乎是一个主要的过度站点，并且是每个应用程序都想要的东西，所以我想我会看看是否有一些容易我遗漏的东西。

我有几个使用 C#、Winform 项目在 Visual Studio 2008 中创建的项目。一种使用单击一次安装，一种使用安装项目。它们都允许您在卸载时保持应用程序运行。在 Windows 7 上，您确实会收到警告，但可以选择让它继续运行……在 XP 上甚至没有警告。

说我疯了，但是想到我的所有程序文件都被删除了，我的应用程序仍在运行，这听起来根本不是一个好的设计。想起 GPF 的记忆，或者 .NET 对 DLL 使用延迟加载的方式，在需要加载 DLL 并且消失时也可能是一个问题。

**那么，如果您的应用程序仍在运行，是否有一种简单的方法不允许卸载？**

我正在使用 C#，但我正在使用 VB.NET 单实例类来确保我的应用程序只运行一次，所以也许可以利用它而不是创建一个互斥锁来检查？

此外，我的应用程序只允许“每个用户”安装，而不是“所有用户”，所以我不必担心我的应用程序在另一个会话中运行（如果是，可以继续运行，因为它应该是 100%自己的副本）。

**编辑：**由于我没有找到其他任何东西，我已经尝试了互斥锁的想法，但它不起作用。这是我的代码：

在应用程序中，我有这个来创建命名互斥体并在应用程序运行时保持活动状态：

```
 System.Threading.Mutex m = new System.Threading.Mutex(true, "SafeShare");

        SingleInstanceApplication.Run(TabForm, NewInstanceHandler);

        GC.KeepAlive(m); 
```

在卸载操作中，我有这个循环，直到它们退出（因为提供取消选项似乎并不容易）：

```
 while (true)
            {
                bool createdNew;
                System.Threading.Mutex m = new System.Threading.Mutex(true, "SafeShare", out createdNew);
                m.ReleaseMutex();
                if (createdNew)
                    break;
                MessageBox.Show(null,"Close XXX and click OK to continue uninstall.","Uninstall");
            } 
```

createdNew 从未在卸载操作中设置，几乎就像它在不同的会话或其他东西下运行一样。我没有尝试将 Global\ 添加到互斥锁名称中，但这对我的应用程序来说无论如何都不起作用，因为我会按用户进行安装，因此即使卸载了一个安装，一个安装也应该能够在另一个会话上继续运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T22:00:07.530

简短的回答是没有简单的方法可以做到这一点，因为这不是微软希望你做的事情。

我的答案确实最终使用了互斥锁，一旦我得到正确的代码，它似乎工作正常。

在我做的应用程序中：

```
System.Threading.Mutex m = new System.Threading.Mutex(true, "MyMutexNameHere");
SingleInstanceApplication.Run(TabForm, NewInstanceHandler);
GC.KeepAlive(m); 
```

SingleInstanceApplication.Run 行是运行您的应用程序的行，我使用的是 VB.NET 框架。

在自定义卸载操作中，我执行以下操作：

```
while (true)
{
   bool createdNew;
   System.Threading.Mutex m = new System.Threading.Mutex(true, "MyMutexNameHere", out createdNew);
   m.Close();
   if (createdNew)
      break;
   MessageBox.Show(null,"Close XXX and click OK to continue uninstall.","Uninstall");
} 
```

起初我使用 m.ReleaseMutex() 而不是 m.Close() ，我发现它引发了异常，因为我不拥有互斥锁。Close 是我应该使用的，只是为了确保我的副本在我再次检查之前已关闭（否则 createNew 永远不会是真的，如果它第一次不是真的）。

# prolog - PROLOG 谓词顺序

> ID：10662625
> 
> 赞同：1
> 
> 时间：2012-05-19T05:37:27.550
> 
> 标签：prolog, clpfd

我有大量的方程，我试图用 PROLOG 来求解。但是，我遇到了一个小问题，因为它们没有以任何有用的顺序指定 - 也就是说，在定义它们之前使用了一些（如果不是很多）变量。这些都在同一个谓词中指定。PROLOG 可以处理以随机顺序指定的谓词吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T09:02:54.897

绝对... ni（意大利语，是*与否*）

也就是说，理想情况下，Prolog 要求您指定*必须*计算的内容，而不是*如何*计算，以相当一般的逻辑形式（[Horn 子句](http://en.wikipedia.org/wiki/Horn_clause)）写下控制解的*方程*。

但这个理想还很遥远，而这正是我们作为程序员发挥作用的地步。您应该尝试对公式进行*拓扑排序*，如果您想要 Prolog 只需应用算术/算法。

但在这一点上，Prolog 并不比任何其他过程语言更有用。它只是使进行这种拓扑排序更容易，因为可以[读取](http://www.swi-prolog.org/pldoc/doc_for?object=read/1)公式（内置它是一个完整的 Prolog 解析器！），轻松识别和量化变量，转换，评估等术语（元语言功能，强点序言）。

如果您可以使用[CLP(FD)](http://www.swi-prolog.org/pldoc/doc_for?object=section%282,%27A.7%27,swi%28%27/doc/Manual/clpfd.html%27%29%29) ，情况会发生变化。只是一个例子，一个双向阶乘（很酷，不是吗？），来自[Markus Triska](http://web.student.tuwien.ac.at/~e0225855/)为 SWI-Prolog 开发的闪亮实现的文档：

```
You can also use CLP(FD) constraints as a more declarative alternative for ordinary integer arithmetic with is/2, >/2 etc. For example:

:- use_module(library(clpfd)).

n_factorial(0, 1).
n_factorial(N, F) :- N #> 0, N1 #= N - 1, F #= N * F1, n_factorial(N1, F1).

This predicate can be used in all directions. For example:

?- n_factorial(47, F).
F = 258623241511168180642964355153611979969197632389120000000000 ;
false.

?- n_factorial(N, 1).
N = 0 ;
N = 1 ;
false.

?- n_factorial(N, 3).
false.

To make the predicate terminate if any argument is instantiated, add the (implied) constraint F #\= 0 before the recursive call. Otherwise, the query n_factorial(N, 0) is the only non-terminating case of this kind. 
```

因此，如果您在 CLP(FD) 中编写方程式，您将有更多机会按原样解决您的“方程式系统”。SWI-Prolog 对用于解决 CLP(FD) 的低级细节进行了专门的调试。

高温高压

# html - 当字段值之一错误或留空时，不想提交表单

> ID：10662628
> 
> 赞同：-2
> 
> 时间：2012-05-19T05:37:55.480
> 
> 标签：html, jsp, jakarta-ee, jdbc, struts

我在我的 Web 应用程序中使用 Struts 框架，当我单击单选按钮医生时，我在编码中遇到问题，嗯，它要求提供 docid，因此配置文件将被更新，但如果用户不提供 id 并选择医生并保存配置文件，患者的菜单由于 bean 中的 getter setter 更改了医生和用户成为医生，这些值只是更新功能不起作用..病理学家也一样..

```
<html:form action="upAction" enctype="multipart/form-data">
<table>
<tr class="show" id="admhide">
            <td align="left" valign="middle" nowrap><bean:message key="sp.type"/></td>
            <td align="left" nowrap><html:radio property="type" value="Patient" name="reg" styleId="patradio" onclick="show(this.value);"/>Patient
                <html:radio property="type" value="Doctor" name="reg" styleId="docradio" onclick="show(this.value);"/>Doctor
                <html:radio property="type" value="Pathologist" name="reg" styleId="pathradio" onclick="show(this.value);"/>Pathologist</td>
        </tr>
<tr class="hide" id="doctor">
            <td align="left" valign="middle" nowrap><bean:message key="sp.docid"/></td>
            <td nowrap align="left" ><html:text property="docid"  name="reg" styleId="docid"/></td>
        </tr>
        <tr class="hide" id="patho">
            <td align="left" valign="middle" nowrap><bean:message key="sp.pathoid"/></td>
            <td nowrap align="left" ><html:text property="pid" name="reg" styleId="pathid"/></td>
        </tr>
        <tr>
            <td colspan="2" align="center" valign="middle" nowrap><html:submit styleClass="button2" property="method"><bean:message key="userform.upd"/></html:submit></td>
            </tr>

  </table>
</html:form> 
```

请帮助我如何做到这一点，以便如果用户填写错误的 docid 或没有 docid 表单，请不要在 getter setter 中设置其余值并且不会提交 .. 谢谢 ..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T05:49:57.933

我认为您需要对空字段应用 JavaScript 检查。转到此链接以了解 Javascript 验证： [http ://www.w3schools.com/js/js_form_validation.asp](http://www.w3schools.com/js/js_form_validation.asp)

对于错误的 Doc Id，提交表单时，您需要先在代码中检查 Doc Id，然后再保存其他详细信息，否则会返回同一页面并显示“错误的 docid”等错误。

# api - Google Charts Tools - Scatter and Table Combo Interaction，为什么是单向的？

> ID：10662632
> 
> 赞同：0
> 
> 时间：2012-05-19T05:38:15.157
> 
> 标签：api, events, charts, google-visualization

这是我关于堆栈溢出的第一个问题。我根据他们的例子制作了一个谷歌图表工具散点图/表格组合。当我单击表格中的一行时，会选择散点图中的对应点（这很好）。但它不能反过来工作。我无法在散点图中选择一个点并让它选择表中的相应行。有谁知道为什么这不能按预期工作？我的代码如下：

```
 <html>
      <head>
        <script type="text/javascript" src="https://www.google.com/jsapi"></script>
        <script type="text/javascript">
      google.load("visualization", "1", {packages:["corechart", "table"]});
      function drawChart() {
        var data = google.visualization.arrayToDataTable([
          ['Age', 'Weight'],
          [ 8,      12],
      [ 4,      5.5],
      [ 11,     14],
      [ 4,      5],
      [ 3,      3.5],
      [ 6.5,    7],
      [ 6.5,    7]
    ]);

    var options = {
      title: 'Age vs. Weight comparison',
      hAxis: {title: 'Age', minValue: 0, maxValue: 15},
      vAxis: {title: 'Weight', minValue: 0, maxValue: 15},
      legend: 'none'
    };

    var chart = new    google.visualization.ScatterChart(document.getElementById('chart_div'));
    var table = new google.visualization.Table(document.getElementById('table_div'));
    chart.draw(data, options);
    table.draw(data);

    google.visualization.events.addListener(chart, 'select', function() {
    table.setSelection(chart.getSelection());});

    google.visualization.events.addListener(table, 'select', function() {
    chart.setSelection(table.getSelection());});

  }
     google.setOnLoadCallback(drawChart);

    </script>
  </head>
  <body>
    <div id="chart_div" style="width: 500px; height: 500px;"></div>
    <div id="table_div" style="width: 500px; height: 500px;"></div>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T09:47:11.117

因为`getSelection()`返回散点图的列和行，只返回表的行，所以有点冲突。事实证明，如果你只是从散点图中传递行信息，你确实可以选择表格行，你只需要以下内容：

```
table.setSelection([{row: chart.getSelection()[0].row}]); 
```

这需要您单击的第一个项目并传递一个仅包含行数据的对象。

[来自这里](http://www.mail-archive.com/google-visualization-api@googlegroups.com/msg01654.html)的灵感和[这里](http://jsfiddle.net/cchana/GXp4e/2/)的工作示例。

# java - 如何将 RapidMiner 集成到 PHP Web 应用程序中？

> ID：10662637
> 
> 赞同：1
> 
> 时间：2012-05-19T05:40:19.173
> 
> 标签：java, php, rapidminer

我在 RapidMiner 中有一个实现，它根据 Bloom 的分类法对问题进行分类。我需要使用由 PHP 开发的 Web 应用程序生成的数据，并在 Web 应用程序的界面中显示结果。

所以我想知道PHP中的应用程序是否有可能与RapidMiner通信以处理数据并在界面中显示RapidMiner提供的结果。

我知道 RapidMiner 是用 Java 实现的，并且可以选择使用 Java 桥来通信 PHP 和 JAVA，但我不确定这是否是一个解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T00:34:52.297

为什么不尝试与 xml 通信，例如，PHP 应用程序通过 xml 向 rm 发送一个问题列表，然后处理它并返回一个 xml 提要。我认为这可能是最简单的解决方案。就性能而言，如果它是最好的解决方案，我不能说一种或另一种

# bash - 计算单词列表中的每个单词在文件中出现的次数？

> ID：10662645
> 
> 赞同：7
> 
> 时间：2012-05-19T05:41:09.150
> 
> 标签：bash, grep

我有一个文件，`list.txt`其中包含单词列表。我想检查每个单词在另一个文件中出现的次数`file1.txt`，然后输出结果。所有数字的简单输出就足够了，因为我可以`list.txt`使用电子表格程序手动添加它们，但如果脚本在每行末尾添加数字`list.txt`，那就更好了，例如：

```
bear 3
fish 15 
```

我试过这个，但它不起作用：

```
cat list.txt | grep -c file1.txt 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-19T06:01:04.657

您可以在一个循环中执行此操作，该循环一次从单词列表文件中读取一个单词，然后计算数据文件中的实例。例如：

```
while read; do
    echo -n "$REPLY "
    fgrep -ow "$REPLY" data.txt | wc -l
done < <(sort -u word_list.txt) 
```

“秘方”包括：

1.  使用隐式 REPLY 变量；
2.  使用进程替换从单词列表文件中收集单词；和
3.  确保您正在搜索数据文件中的整个单词。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-19T09:44:38.663

这个 awk 方法只需要遍历每个文件一次：

```
awk '
  # read the words in list.txt
  NR == FNR {count[$1]=0; next}
  # process file1.txt
  {
    for (i=0; i<=NF; i++) 
      if ($i in count)
        count[$i]++
  }
  # output the results
  END {
    for (word in count)
      print word, count[word]
  }
' list.txt file1.txt 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-19T08:26:22.373

这可能对您有用（GNU sed）：

```
tr -s ' ' '\n' file1.txt |
sort |
uniq -c |
sed -e '1i\s|.*|& 0|' -e 's/\s*\(\S*\)\s\(\S*\)\s*/s|\\<\2\\>.*|\2 \1|/' |
sed -f - list.txt 
```

解释：

*   拆分`file1.txt`成单词
*   对单词进行排序
*   数单词
*   创建一个`sed`脚本来匹配单词（最初将每个单词归零）
*   运行上面的脚本`list.txt`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-09-11T14:21:38.140

单行命令

```
cat file1.txt |tr " " "\n"|sort|uniq -c |sort -n -r -k 1 |grep -w -f list.txt 
```

命令的最后一部分告诉 grep 从列表中读取要匹配的单词（-f 选项），然后匹配整个单词（-w），即如果 list.txt 包含汽车，grep 应该忽略回车。

但是请记住，您对整个单词的看法和 grep 的看法可能不同。例如。虽然 car 不会与carriage 匹配，但会与 car-wash 匹配，注意单词边界会考虑“-”。grep 将除字母、数字和下划线之外的任何内容作为单词边界。这应该不是问题，因为这符合英语单词的公认定义。

# delphi - 如何在 DataSnap 服务器/客户端应用程序中使用 NTLM 身份验证？

> ID：10662646
> 
> 赞同：3
> 
> 时间：2012-05-19T05:41:16.850
> 
> 标签：delphi, datasnap, indy10

看起来[Indy 10 Tiburon 已经有了实验性的 NTLM 支持](http://www.delphipraxis.net/topic157784.html)。

如何激活 DataSnap 服务器/客户端应用程序的 NTLM 身份验证并使用目标 DataSnap 服务器的登录信息（用户名、密码、域）？

# mysql - MySQL GROUP BY rand()？

> ID：10662647
> 
> 赞同：2
> 
> 时间：2012-05-19T05:41:34.943
> 
> 标签：mysql, sql

所以，我遇到了有趣的问题。我确信有一个简单的解决方案，但我不确定它是什么。:)

基本上，想象一个非常简单的数据库，如下所示：

```
----------------
T1
----------------
  r  |  nID
---------------
  1  |   A
  2  |   B
----------------

----------------
T2
----------------
 nID |  val
---------------
  A  |   XXX
  B  |   L
  B  |   M
  B  |   N
  B  |   P
---------------- 
```

基本上，表 2 引用了表 1。现在，我想从 A 或 B 中选择一个随机行。但是，我想首先随机化 A 和 B，然后选择一个关联的值。

换句话说，掷硬币：正面，`XXX`。尾巴，`L, M, N,`或`P`.

我当前的查询连接了两个表，orders by `RAND()`，然后是`LIMIT 1`。但是，这使得选择 B 值的可能性比选择 A 值的可能性大得多。我正在使用 PHP，所以我可以轻松地运行两个查询，但是运行一个查询会更整洁，所以我想看看你们推荐什么。

有什么解决办法吗？=)

# 编辑：

这是我当前的查询，但它不起作用。不知道为什么！

```
SELECT *
FROM t2
WHERE
    nID =
    (
        SELECT nID
        FROM t1
        ORDER BY RAND()
        LIMIT 1
    )
ORDER BY RAND()
LIMIT 1 
```

# 编辑2：

为了演示我遇到的问题，我创建了一个测试用例。首先，我创建了以下表格：

![T1 和 T2](../Images/f0d240641d1d363f1e87e28ab79ba72e.png)

我希望选择的几率与选择、、或的几率`XXX`相同。我的查询应该这样做，对吗？所以我测试了它。以下脚本运行查询 5000 次，并对结果进行计数。它们应该是大约 50-50，出现大约 2500 次，其他所有内容也出现大约 2500 次。`L``M``N``P``XXX`

```
$a = 0;
$b = 0;
$i = 0;
while ($i < 5000)
{
    $query = mysql_query("
        SELECT *
        FROM t2
        WHERE
            nID =
            (
                SELECT nID
                FROM t1
                ORDER BY RAND()
                LIMIT 1
            )
        ORDER BY RAND()
        LIMIT 1
        ") or die(mysql_error());

    $result = mysql_fetch_array($query);
    if ($result['val'] == 'XXX')
    {
        $a++;
    }
    else
    {
        $b++;
    }

    $i++;
}

echo "XXX - $a<br />";
echo "Other - $b<br />"; 
```

结果如下：

```
XXX - 937
Other - 4063 
```

让我们再次运行它。

```
XXX - 968
Other - 4032 
```

让我们再运行一​​次。

```
XXX - 932
Other - 4068 
```

鉴于我的查询，这几乎不是我们期望看到的 50-50 分裂。这到底是怎么回事？谢谢你们的帮助，伙计们！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T17:32:04.203

您会期望问题中的子查询将在每个外部查询中运行一次，但看起来情况并非如此。我认为以下内容可能会给您您所追求的：

```
SET @randID = (SELECT nID
FROM T1
ORDER BY RAND()
LIMIT 1);

SELECT VAL
FROM T2
WHERE nID = @randID
ORDER BY RAND()
LIMIT 1; 
```

[（SQL 小提琴）](http://sqlfiddle.com/#!2/1f1e8/12)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-20T18:17:37.887

您的示例内部查询被多次评估，如果您希望它选择 A 或 B*一次*，您需要重写它，例如作为 a `JOIN`;

```
SELECT q2.nID, q2.val
FROM ( SELECT nID FROM T1 ORDER BY RAND() LIMIT 1 ) q1
JOIN T2 q2 ON q1.nID = q2.nID
ORDER BY RAND()
LIMIT 1 
```

如果您使用的是小表，则此查询应该没问题，但请阅读[此处以](http://www.titov.net/2005/09/21/do-not-use-order-by-rand-or-how-to-get-random-rows-from-table/)了解为什么不应该将`ORDER BY RAND()`其用于大表。

演示[在这里](http://sqlfiddle.com/#!2/d2921/19)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-19T05:52:11.357

请尝试下面给出的查询

```
SELECT `table2`.*  FROM `table2` WHERE table2.field1 = (Select table1.field2 from table1 order by RAND() limit 0,1) LIMIT 0,1 
```

在这里，我假设两个表的列名称为 field1 和 field2，因此请根据您的表结构使用字段名称。

谢谢

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-19T06:10:52.940

```
SELECT
    CASE rq.r WHEN '1' THEN t1q.r ELSE t2q.nID END AS Col1,
    CASE rq.r WHEN '1' THEN t1q.nID ELSE t2q.val END AS Col2
FROM
    (SELECT CASE WHEN RAND() < 0.5 THEN '1' ELSE '2' END AS r) AS rq
    JOIN (SELECT * FROM T1 ORDER BY RAND() LIMIT 1) as t1q
    JOIN (SELECT * FROM T2 ORDER BY RAND() LIMIT 1) as t2q 
```

观察：此查询效率低下，因为它需要从两个表中选择一个随机行，即使只使用了一个。也许存在更好的方法。

# sql-server-2008 - sql group by、转换

> ID：10662648
> 
> 赞同：1
> 
> 时间：2012-05-19T05:41:35.510
> 
> 标签：sql-server-2008

我的 sql 表中有两个`bit`类型列用于员工考勤，以及休假的类型`1 for Medical Leave or 2 for Paid Leave`，其中的值就像，

```
FirstHalfLeave   Type      SecondHalfLeave  Type
 ------------    ----       -------------   ----
      0(Absent)   1             1             2
      1(Present)  1             1             2 
```

我需要将这两个字段相加以使其离开一天，并且我需要显示确切的结果，例如

```
 Type          Days
  ----         ------
MedicalLeave     0.5
PaidLeave        1.0 
```

为此我尝试过

```
select cast(
       sum(
             (
               CAST(StaffAttendance.FirstHalfStatus as Integer) + 
               CAST(StaffAttendance.SecondHalfStatus as integer)
             ) 
             / 2.0
       ) as float
   ) as TotalLeave
   ,case when StaffAttendance.FirstHalfLeaveType = 2 OR 
StaffAttendance.SecondHalfLeaveType=2 then 'Paid Leave'
   else 'Medical Leave'
   end as Status
from StaffAttendance
where MONTH(StaffAttendance.date)=MONTH(GetDate())
group by StaffAttendance.FirstHalfLeaveType,StaffAttendance.SecondHalfLeaveType 
```

但它的分组不好，我不知道如何做到这一点，任何人都可以在这里帮助我，提前谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T06:41:44.083

```
SELECT SUM(sa.LeaveDays)/COUNT(sa.LeaveDays),sa.Status
FROM
    (
        SELECT CAST(FirstHalfStatus AS FlOAT) LeaveDays,CASE WHEN FirstHalfLeaveType=2 THEN 'Paid Leave' ELSE 'Medical Leave' END as Status,date
        FROM StaffAttendance        
        UNION ALL
        SELECT CAST(SecondHalfStatus AS FlOAT),CASE WHEN SecondHalfLeaveType=2 THEN 'Paid Leave' ELSE 'Medical Leave' END as Status,date
        FROM StaffAttendance
    ) AS sa
WHERE MONTH(sa.date)=MONTH(GetDate())   
GROUP BY sa.Status 
```

# c - 需要帮助从 ltp 测试套件文件 tst_res.c 理解这个宏

> ID：10662650
> 
> 赞同：0
> 
> 时间：2012-05-19T05:42:17.210
> 
> 标签：c, macros

这个宏有什么作用？我无法理解它的定义：

```
#define PAIR(def) [def] = { .name = #def, .val = def, }, 
```

来自：ltp-full-20120401/lib/tst_res.c 第 183 行

您可以从此[链接获取源代码](http://sourceforge.net/projects/ltp/files/LTP%20Source/ltp-20120401/ltp-full-20120401.bz2/download)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T05:49:35.907

看起来它是用来初始化结构数组的。

```
#define PAIR(def) [def] = { .name = #def, .val = def, }, 
```

如下使用的宏`PAIR(FOOBAR)`将扩展为：

```
[FOOBAR] = { .name = "FOOBAR", .val = FOOBAR, }, 
```

`.name`并且`.val`将是`struct`数组元素类型的成员。

# jsf - p:fileUpload NullPointerException

> ID：10662653
> 
> 赞同：1
> 
> 时间：2012-05-19T05:42:58.803
> 
> 标签：jsf, file-upload, glassfish, primefaces, nullpointerexception

我是 JSF 开发的新手，我正忙于构建一个需要上传文件的项目，但是每次运行上传器时，我都会收到 java.lang.NullPointerException 任何人都可以帮我解决这个问题，我已经广泛搜索了互联网并且找不到有效的解决方案。

我正在使用 NetBeans 7.1.1 和 GlassFish 进行部署。

我的代码如下：

我已将以下 jar 添加到我的库中：primefaces-3.2.jar commons-io-2.3.jar commons-fileupload-1.2.2.jar

这是我的 XHTML

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
xmlns:h="http://java.sun.com/jsf/html"
xmlns:p="http://primefaces.org/ui">
<h:head>
  <link href="${request.contextPath}/styles.css" type="text/css" rel="stylesheet"/>
  <title>Tutor Management System</title>

</h:head>
<h:body>

         <h:form enctype="multipart/form-data">  

    <p:messages showDetail="true"/>  

    <p:fileUpload value="#{myBean.file}" mode="simple" />  

    <p:commandButton value="Submit" ajax="false"  
                actionListener="#{myBean.upload}"/>  

</h:form>  

</h:body>
</html> 
```

这是我的支持豆

```
package BackingBean;

/**
 *
 * @author chrissalerno24
 */
import java.io.*;
import java.util.Map;
import javax.enterprise.context.SessionScoped;
import javax.faces.application.FacesMessage;
import javax.faces.bean.ManagedBean;
import javax.faces.context.ExternalContext;
import javax.faces.context.FacesContext;
import org.primefaces.model.UploadedFile;

@ManagedBean(name="myBean")
public class MyBean implements java.io.Serializable {  

    private UploadedFile file; 
    private static final String MBN = "usernameApplication";
    ExternalContext externalContext = FacesContext.getCurrentInstance().getExternalContext();
    Map<String, Object> sessionMap = externalContext.getSessionMap();

    public UploadedFile getFile() {  
        return file;  
    }  

    public void setFile(UploadedFile file) {  
        this.file = file;  
    }  

    public void upload() {  
        FacesMessage msg = new FacesMessage("Succesful", file.getFileName() + " is uploaded.");  
        FacesContext.getCurrentInstance().addMessage(null, msg);  
    }
} 
```

这是我的 web.xml 文件

```
<?xml version="1.0" encoding="UTF-8"?>

<web-app xmlns="http://java.sun.com/xml/ns/javaee"
     xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
     xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"
     version="3.0">

    <filter>
        <filter-name>PrimeFaces FileUpload Filter</filter-name>
        <filter-class>org.primefaces.webapp.filter.FileUploadFilter</filter-class>
    </filter>

    <filter-mapping>
        <filter-name>PrimeFaces FileUpload Filter</filter-name>
        <servlet-name>Faces Servlet</servlet-name>
    </filter-mapping>

    <session-config>
        <session-timeout>
            30
        </session-timeout>
    </session-config>

    <error-page>
        <error-code>404</error-code>
        <location>/404.jsf</location>
    </error-page>

    <context-param>  
    <param-name>primefaces.THEME</param-name>  
    <param-value>aristo</param-value>  
</context-param>  

</web-app> 
```

我正在使用 PrimeFaces 3.2、JSF 2.0 和 GlassFish 3.1.1

任何帮助将不胜感激。

这是堆栈跟踪：

```
SEVERE: Received 'java.lang.NullPointerException' when invoking action listener '#{myBean.upload}' for component 'j_idt9'
SEVERE: java.lang.NullPointerException
    at BackingBean.MyBean.upload(MyBean.java:38)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at com.sun.el.parser.AstValue.invoke(AstValue.java:254)
    at com.sun.el.MethodExpressionImpl.invoke(MethodExpressionImpl.java:302)
    at org.jboss.weld.util.el.ForwardingMethodExpression.invoke(ForwardingMethodExpression.java:39)
    at org.jboss.weld.el.WeldMethodExpression.invoke(WeldMethodExpression.java:50)
    at javax.faces.event.MethodExpressionActionListener.processAction(MethodExpressionActionListener.java:153)
    at javax.faces.event.ActionEvent.processListener(ActionEvent.java:88)
    at javax.faces.component.UIComponentBase.broadcast(UIComponentBase.java:769)
    at javax.faces.component.UICommand.broadcast(UICommand.java:300)
    at javax.faces.component.UIViewRoot.broadcastEvents(UIViewRoot.java:794)
    at javax.faces.component.UIViewRoot.processApplication(UIViewRoot.java:1259)
    at com.sun.faces.lifecycle.InvokeApplicationPhase.execute(InvokeApplicationPhase.java:81)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:593)
    at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1542)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:281)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
    at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
    at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161)
    at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
    at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:849)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:746)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1045)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:228)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:680)

SEVERE: JSF1073: javax.faces.event.AbortProcessingException caught during processing of INVOKE_APPLICATION 5 : UIComponent-ClientId=j_idt6:j_idt9, Message=java.lang.NullPointerException
SEVERE: java.lang.NullPointerException
javax.faces.event.AbortProcessingException: java.lang.NullPointerException
    at javax.faces.event.MethodExpressionActionListener.processAction(MethodExpressionActionListener.java:182)
    at javax.faces.event.ActionEvent.processListener(ActionEvent.java:88)
    at javax.faces.component.UIComponentBase.broadcast(UIComponentBase.java:769)
    at javax.faces.component.UICommand.broadcast(UICommand.java:300)
    at javax.faces.component.UIViewRoot.broadcastEvents(UIViewRoot.java:794)
    at javax.faces.component.UIViewRoot.processApplication(UIViewRoot.java:1259)
    at com.sun.faces.lifecycle.InvokeApplicationPhase.execute(InvokeApplicationPhase.java:81)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:593)
    at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1542)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:281)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
    at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
    at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161)
    at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
    at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:849)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:746)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1045)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:228)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:680)
Caused by: java.lang.NullPointerException
    at BackingBean.MyBean.upload(MyBean.java:38)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at com.sun.el.parser.AstValue.invoke(AstValue.java:254)
    at com.sun.el.MethodExpressionImpl.invoke(MethodExpressionImpl.java:302)
    at org.jboss.weld.util.el.ForwardingMethodExpression.invoke(ForwardingMethodExpression.java:39)
    at org.jboss.weld.el.WeldMethodExpression.invoke(WeldMethodExpression.java:50)
    at javax.faces.event.MethodExpressionActionListener.processAction(MethodExpressionActionListener.java:153)
    ... 33 more 
```

uploadFile 中断的确切行如下：

```
FacesMessage msg = new FacesMessage("Succesful", file.getFileName() + " is uploaded."); 
```

这是我的 faces-config.xml 文件：

```
<?xml version='1.0' encoding='UTF-8'?>

<!-- =========== FULL CONFIGURATION FILE ================================== -->

<faces-config version="2.0"
    xmlns="http://java.sun.com/xml/ns/javaee" 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-facesconfig_2_0.xsd">
    <managed-bean>
        <managed-bean-name>StudentBean</managed-bean-name>
        <managed-bean-class>BackingBean.TutorBackingBean</managed-bean-class>
        <managed-bean-scope>session</managed-bean-scope>
    </managed-bean>
    <managed-bean>
        <managed-bean-name>LoginBean</managed-bean-name>
        <managed-bean-class>BackingBean.LoginBackingBean</managed-bean-class>
        <managed-bean-scope>request</managed-bean-scope>
    </managed-bean>
    <managed-bean>
        <managed-bean-name>LecturerBean</managed-bean-name>
        <managed-bean-class>BackingBean.LecturerBackingBean</managed-bean-class>
        <managed-bean-scope>session</managed-bean-scope>
    </managed-bean>
    <managed-bean>
        <managed-bean-name>ApplicationBean</managed-bean-name>
        <managed-bean-class>BackingBean.ApplicationBackingBean</managed-bean-class>
        <managed-bean-scope>session</managed-bean-scope>
    </managed-bean>
    <managed-bean>
        <managed-bean-name>myBean</managed-bean-name>
        <managed-bean-class>BackingBean.MyBean</managed-bean-class>
        <managed-bean-scope>session</managed-bean-scope>
    </managed-bean>
    <managed-bean>
        <managed-bean-name>AdminBean</managed-bean-name>
        <managed-bean-class>BackingBean.AdminBackingBean</managed-bean-class>
        <managed-bean-scope>session</managed-bean-scope>
    </managed-bean>

</faces-config> 
```

克里斯萨勒诺24

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-19T10:54:38.983

您的托管 bean 没有任何作用域。这种方式 JSF 默认为`@NoneScoped`. `#{myBean}`因此，EL 中的每一次评估都会创建一个新的评估。现在，当您选择一个文件并提交按钮时，实际上创建了两个。该文件设置在第一个上，并且在第二个上调用操作方法（根本没有文件）。

您需要将其放在更广泛的范围内，例如请求范围。

```
import javax.faces.bean.ManagedBean;
import javax.faces.bean.RequestScoped;

@ManagedBean
@RequestScoped
public class MyBean {
    // ...
} 
```

* * *

顺便说一句，你有一个悬垂的`import javax.enterprise.context.SessionScoped;`. 这是特定于 CDI 的，并且仅当您通过 CDI`@Named`而不是 JSF管理 bean 时才有效`@ManagedBean`。确保为 bean 范围使用正确的包。也就是`javax.faces.bean.SessionScoped`你需要一个会话范围的 JSF 托管 bean 的情况。

# vb.net-2010 - NullReferenceException 未处理“未将对象引用设置为对象的实例。”

> ID：10662656
> 
> 赞同：0
> 
> 时间：2012-05-19T05:44:32.797
> 
> 标签：vb.net-2010

这是我在 ojt 中的项目。我在 ds(DataSet) 中遇到问题，错误说它为空，现在，我的问题是，我该如何解决这个问题？

```
Private Sub RefreshData()
    If Not con.State = ConnectionState.Open Then
        con.Open()
    End If

    Dim dt As New DataTable("SELECT ID as [ID], " & _
                                         "fname as [NAME], lname " & _
                                     "FROM asdf ORDER by ID")
    If ds IsNot Nothing And ds.Tables("asdf") IsNot Nothing Then****this part is were i        get the error***
        da.Fill(dt, "asdf")
    End If
    con.Close()
    maxrows = ds.Tables("asdf").Rows.Count
    inc = -1
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T05:50:41.813

DataTable 构造函数接收数据表的名称，这是可选的。您需要实例化 DataAdapter。

```
Private Sub RefreshData()
    Dim Sql="SELECT ID as [ID],fname as [NAME], lname FROM asdf ORDER by ID"
    Dim con as new OleDbConnection("your_connection_string_here")
    Dim da as new OleDbDataAdapter(Sql,con)
    Dim dt As New DataTable
    da.Fill(dt)
    ...
End Sub 
```

# c# - 我可以使用 Microsoft Lync API 与 Communicator 2007/2007 R2 进行通信吗？

> ID：10662661
> 
> 赞同：6
> 
> 时间：2012-05-19T05:45:43.857
> 
> 标签：c#, lync, office-communicator

我正在将 IM Presence 信息编码到我公司的一个 Silverlight 应用程序中。到目前为止，我找到的唯一解决方案是 CodePlex (Silverlight.OCS)。它“还可以”，但它已经过时了。

Lync SDK 使得在 silverlight 中获取 Presence 信息变得非常容易。不幸的是，我们网络上 99% 的用户仍在使用 Office Communicator (R2)，因此无法使用开箱即用的 Lync 方法（xaml 中的控件：PresenceIndicator...）。

所以，我很好奇 Lync SDK 是否包含与 Office Communicator 通信的方式？

如果是这样，我将如何 a) 检查正在运行的客户端，然后 b) 连接到该客户端 - 无论是 Lync 还是 Communicator。很感谢任何形式的帮助！最后但并非最不重要 - 如果可能的话，我正在寻找 C# 代码。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T10:56:26.787

不能针对 Office Communicator 使用 Lync 2010 SDK，只能针对 Lync 2010。

SDK 的前身是 Office Communicator 自动化 API (OCAA)。它是基于 COM 的 API，适用于 Communication 2007 和 2007 R2。它仍然受支持...暂时！

[您可以在此处](http://www.microsoft.com/en-us/download/details.aspx?displaylang=en&id=10176)下载 API 。MSDN 登陆页面在[这里](http://msdn.microsoft.com/en-us/library/bb758719%28office.12%29.aspx)。

至于获取存在信息...嗯，希望这可能对您有所帮助（免责声明我太年轻，无法完成任何 OCS API 工作；）

[获取联系记录](http://msdn.microsoft.com/en-us/library/bb758739%28v=office.12%29)：

```
 private IMessengerContact FindContact(string userID)
{
    IMessengerContact contact = null;
    // Try the local contact list first
    try
    {
        contact = (IMessengerContact)communicator.GetContact(userID, "");
    }
    catch
    {
        contact = null;
    }

    // For a nonlocal contact, try the SIP Provider of Communicator
    if (contact == null || contact.Status == MISTATUS.MISTATUS_UNKNOWN)
    {
        try
        {
            contact =
                (IMessengerContact)communicator.GetContact(userID,
                communicator.MyServiceId);
            return contact;
        }
        catch
        {
            contact = null;
            return contact;
        }
    }
    else
    {
        return contact;
    }
} 
```

返回联系人的状态：

IMessengerContact接口定义了一个属性[Status](http://msdn.microsoft.com/en-us/library/bb758775%28v=office.12%29)，它包含许多[MISTATUS](http://msdn.microsoft.com/en-us/library/bb787250%28v=office.12%29)值[之一。](http://msdn.microsoft.com/en-us/library/bb787207%28v=office.12%29)

# php - 使用 PHP 将 CSV 文件导入 MySQL

> ID：10662662
> 
> 赞同：1
> 
> 时间：2012-05-19T05:45:46.580
> 
> 标签：php, mysql, fgetcsv

`fgetcsv`我正在尝试使用该函数将 CSV 数据导入 MySQL 数据库。

```
if(isset($_POST['submit'])) {
     $fname = $_FILES['sel_file']['name'];
     $var = 'Invalid File';
     $chk_ext = explode(".",$fname);

     if(strtolower($chk_ext[1]) == "csv") {
         $filename = $_FILES['sel_file']['tmp_name'];
         $handle = fopen($filename, "r");
     $res = mysql_query("SELECT * FROM vpireport");
     $rows = mysql_num_rows($res);
     if($rows>=0) {
        mysql_query("DELETE FROM vpireport") or die(mysql_error());

        for($i =1;($data = fgetcsv($handle, 10000, ",")) !== FALSE; $i++) {
            if($i==1)
            continue;
            $sql = "INSERT into vpireport
                                    (item_code,
                                     company_id,
                                     purchase,
                                     purchase_value) 
                                     values
                                    (".$data[0].",
                                     ".$data[1].",
                                     ".$data[2].",
                                     ".$data[3].")";
            //echo "$sql";
            mysql_query($sql) or die(mysql_error());
        }
    }

     fclose($handle);
    ?>
     <script language="javascript">
     alert("Successfully Imported!");
     </script>
     <?
 } 
```

问题是它卡在导入过程之间并显示以下错误：

> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 'S',0,0)' 附近使用正确的语法

每次只导入部分文件。仅导入 10000 行文件中的 200-300 行。

这是我的表的 DDL：

```
create table vpireport (
    id int not null auto_increment,
    item_code int,
    company_id int,
    purchase double,
    primary key(id),
    foreign key(company_id) references users(userid)
); 
```

到目前为止我还没有找到问题，任何帮助表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-19T06:22:23.993

您可能需要转义引号，这可以使用[PDO](http://php.net/pdo)和[prepared statements](http://us.php.net/manual/en/pdo.prepared-statements.php)完成。

为简洁起见，我跳过了示例中的大部分代码，只关注`for`循环。

```
<?php

    // Use PDO to connect to the DB
    $dsn = 'mysql:dbname=YOUR_DB;host=localhost';
    $user = 'DB_USERNAME';
    $password = 'DB_PASSWORD';

    try {
        $dbh = new PDO($dsn, $user, $password);
    } catch (PDOException $e) {
        echo 'Connection failed: ' . $e->getMessage();
    }

    for($i =1;($data = fgetcsv($handle, 10000, ",")) !== FALSE; $i++) {
        // The query uses placeholders for data
        $sql = "INSERT INTO vpireport
                    (item_code,company_id,purchase,purchase_value) 
                VALUES
                    (:item_code,:company_id,:purchase,:purchase_value)";
        $sth = $dbh->prepare($sql);

        // The data is bound to the placeholders
        $sth->bindParam(':item_code', $data[0]);
        $sth->bindParam(':company_id', $data[1]);
        $sth->bindParam(':purchase', $data[2]);
        $sth->bindParam(':purhcase_value', $data[3]);

        // The row is actually inserted here
        $sth->execute();
        $sth->closeCursor();
    } 
```

但是，这不会消除任何有问题的字符，因此如果这会造成问题，您可能需要查看某种数据清理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T05:58:38.860

取消注释 //echo "$sql"; 看看最后一个查询是什么（有错误） - 可能是 csv 数据包含奇怪的字符或查询被切断。

顺便说一句：您也可以通过 mysql 导入 csv 文件：http:
[//dev.mysql.com/doc/refman/5.1/en/load-data.html](http://dev.mysql.com/doc/refman/5.1/en/load-data.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-19T12:58:23.200

```
$row = 1;

if (($handle = fopen("albums.csv", "r")) !== FALSE) {
    while (($data = fgetcsv($handle, 1000, ',','"')) !== FALSE) {
            if($row!=1){    
                $num = count($data);
                $albumIndex=0;

                //Insert into tbl_albums 

                $sqlAlbums="INSERT INTO tbl_albums(albumName) VALUES ('".$data[$albumIndex]."')";
                $resultAlbums=mysql_query($sqlAlbums);

                }
            }
            $row++;

            }
        }
fclose($handle); 
```

# iphone - iPhone：使用苹果示例代码 AVCam 在捕获视频后打开新的视图控制器

> ID：10662665
> 
> 赞同：4
> 
> 时间：2012-05-19T05:46:12.357
> 
> 标签：iphone

我正在使用苹果示例代码 AVCam 来捕获视频

但是我想在按下停止捕获视频按钮后导航到另一个视图

但我无法做到这一点

请建议我完成这项任务的正确方法

我正在 AVCam 示例代码方法中进行以下编码

```
- (void)captureManagerRecordingFinished:(AVCamCaptureManager *)captureManager
{
    CFRunLoopPerformBlock(CFRunLoopGetMain(), kCFRunLoopCommonModes, ^(void) 
    {

        [[self recordButton] setTitle:@"Record"];
        [[self recordButton] setEnabled:YES];

    });

    [self dismissModalViewControllerAnimated:YES];

    NextViewController *test=[[NextViewController alloc]init];
    [self.navigationController pushViewController:test animated:YES];

} 
```

请告诉我哪里出错或任何其他方式来完成这项任务

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T07:51:58.820

AVCam 没有实现开箱即用的 NavigationController，因此推送视图控制器将不起作用。

不过，做起来并不难

打开 MainWindow.xib 在 Window 下方添加一个导航控制器项，并确保 Cam View Controller 是导航控制器的子级 - 参见下图： ![在此处输入图像描述](../Images/b4fac60df47809ae4ee11e94fb5f77c9.png)

右键单击 Window 项目并确保 rootViewController 项目链接到 NavigationController，而不是链接到 Cam View Controller ![在此处输入图像描述](../Images/c9a199e751af3fc389f2a14810d94274.png)

编译并运行 - 推送视图控制器现在应该可以工作了。

# android - 平板电脑上最常见的安卓版本有统计数据吗？

> ID：10662678
> 
> 赞同：5
> 
> 时间：2012-05-19T05:49:20.133
> 
> 标签：android, version, tablet

我知道以下链接（[此处](http://developer.android.com/resources/dashboard/platform-versions.html)），它显示了各种 Android 版本的最新覆盖范围（运行不同级别的设备的比例）。但是，它涵盖了整个 Android，包括手机和平板电脑。

我想知道是否只有平板电脑有类似的东西。我有一个仅对特定屏幕尺寸有意义的应用程序，而手机并没有真正削减它。因此，我正在寻找仅针对平板电脑的最佳 Android 版本。

如果信息不可用，我可能不得不选择 2.3.3，基于上面的链接，但我更喜欢一些硬数据，因为我*怀疑*最常见的平板电脑版本可能会偏向更高版本（由于它们最近的外观和功能）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T06:09:55.033

您可能还希望查看这些比较：

*   [http://socialcompare.com/en/comparison/android-versions-comparison](http://socialcompare.com/en/comparison/android-versions-comparison)

*   [http://socialcompare.com/en/comparison/mobile-os-comparison-developer-view](http://socialcompare.com/en/comparison/mobile-os-comparison-developer-view)

*   [http://socialcompare.com/en/comparison/android-3-honeycomb-tablets](http://socialcompare.com/en/comparison/android-3-honeycomb-tablets)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T06:00:38.123

谷歌不提供你所要求的，因为他们在平板电脑和手机上没有区别。如果您有机会找到类似的东西，您必须浏览主要品牌的平板电脑，看看他们支持哪些版本。我不知道 Flurry 或其他一些数据源是否收集了此类信息，但我非常怀疑。

编辑：我找到了这个[链接](http://blog.flurry.com/bid/81151/Amazon-Lights-the-Android-World-on-Fire)。根据数据，我们可以计算出最受欢迎的版本。

点燃 36% = 2.3

三星 Galaxy Tab 36% = 库存 2.2，升级 2.3

华硕变压器 7% = 升级 4.x

Acer 7% = 不同版本，很多都高于 2.3

摩托罗拉 = 2.3 以上

其他 10% = 未知

这些数据来自2012年1月

# jquery - jquery获取图像宽度第一次返回0

> ID：10662684
> 
> 赞同：0
> 
> 时间：2012-05-19T05:50:05.120
> 
> 标签：jquery, width, photo

我的代码：

```
(function($){
    $.fn.extend({
        popupbox: function(options) {

            //Settings list and the default values
            var defaults = {
                photo_url : "",
                photo_id  : ""
            };

            var options = $.extend(defaults, options);

            return this.each(function() {
                var o = options;

                //Assign current element to variable
                var obj = $(this);

                var photo_pic = $('#photo_box_img');

                photo_pic.attr("src", o.photo_url);

                photo_pic.load(function() {

                    var pic_width = photo_pic.width();
                    var pic_height = photo_pic.width();

                    console.log(pic_width);

                }

            });

        }
    });
})(jQuery); 
```

我第一次`click`使用上面的`image`按钮`click() function`返回**0**但`next time`它......为什么会这样？`shows``proper width`

# android - 选项卡主机滚动并使用 Horizo ntalScrollview 居中

> ID：10662685
> 
> 赞同：1
> 
> 时间：2012-05-19T05:50:24.793
> 
> 标签：android, tabs, scrollview, android-tabhost, tabwidget

我有 6 个选项卡，当我单击任何选项卡时，它应该将重力设置为中心。我怎样才能做到这一点..？

这是代码，但它没有效果..请帮助..

```
 Calendar c = Calendar.getInstance(); 
    int day = c.get(Calendar.DAY_OF_WEEK);

    try{

    int screenWidth = getWindowManager().getDefaultDisplay().getWidth();
    int scrollX = (th.getTabWidget().getChildAt(day-2).getLeft() - (screenWidth/2))
                   +(th.getTabWidget().getChildAt(day-2).getWidth()/2);
    hsv.scrollTo(scrollX,0);

    //hsv is horizontalScrollView from the xml file
    //th is the tabhost
    th.setCurrentTab(day-2);
    }catch(Exception e){
        th.setCurrentTab(2);
    } 
```

请告诉我可能出了什么问题..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T21:22:09.260

尝试这个。有用

```
public void centerTabItem(int position) {
        tabHost.setCurrentTab(position);
        final TabWidget tabWidget = tabHost.getTabWidget();
        final int screenWidth = getWindowManager().getDefaultDisplay().getWidth();
        final int leftX = tabWidget.getChildAt(position).getLeft();
        int newX = 0;

        newX = leftX + (tabWidget.getChildAt(position).getWidth() / 2) - (screenWidth / 2);
        if (newX < 0) {
            newX = 0;
        }
        horizontalScrollView.scrollTo(newX, 0);
    } 
```

# javascript - 如何设置按钮以使用 jQuery、AJAX、JSON 和 MVC 调用不同的按钮？

> ID：10662689
> 
> 赞同：0
> 
> 时间：2012-05-19T05:50:44.967
> 
> 标签：javascript, jquery, asp.net-mvc, asp.net-mvc-3

我想要一个类似下面的屏幕：

```
 <div id="statusText></div> 

   <button type="button" id="transferData1"
       data-href="/Tools/Data/TransferData1">Transfer Data 1</button>
   <button type="button" id="transferData2"
       data-href="/Tools/Data/TransferData2">Transfer Data 2</button>
   <button type="button" id="transferData3"
       data-href="/Tools/Data/TransferData3">Transfer Data 3</button> 
```

单击每个按钮时都会调用 MVC 操作方法，然后让它返回一些状态。当我有多个按钮时，是否有一种简单的方法可以使用 jQuery、Ajax 和 JSON 进行设置？

到目前为止，我有以下脚本：

```
<script type="text/javascript">
    $(document).ready(function () {
        $('#transferData')
            .click(function () {
                xxx
            });

    });
</script> 
```

但是我怎样才能使这个脚本适用于不同的按钮 ID 并使用 Ajax 调用不同的操作方法呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T06:07:38.200

There's a couple of options

1) use a form, give each button a value and differentiate which button was pushed server side by looking at the value posted back for that button. There's a a nice way to clean this up/split into multiple server side actions by using ActionFilters (http://www.dotnetcurry.com/ShowArticle.aspx?ID=724). If it needs to be ajax then you could use the unobtrusive ajax extensions in mvc3.

2) use jquery to override the click method of the buttons, call the action manually then use the result

```
$('[data-href]').click(function() { 
  $.ajax({ url: $(this).attr('data-href') })
    .success(function(data) {});
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T06:15:09.910

如果您想知道该过程，那么我认为最简单和最合适的方法是将每个按钮绑定到表单，如果您还想发布一些值，否则不需要它。form1 for button1 form2 for button2 and form3 for button3 。从那里开始事情应该很容易。

每个按钮都有一个 jquery 按钮单击事件，有一个单一的操作方法，将按钮名称传递给操作方法，并根据按钮名称处理请求并返回 json 结果。

# jquery - 使用 jQuery 删除表格行

> ID：10662691
> 
> 赞同：18
> 
> 时间：2012-05-19T05:51:06.803
> 
> 标签：jquery

以下是我的代码

### 脚本

```
$(document).ready(function(){
    $('#click').click(function(){
        $('#table').append('<tr><td>&nbsp;</td></tr>');
    })
    $('#remove').click(function(){
        $('#table').remove('<tr><td>&nbsp;</td></tr>');
    })
}) 
```

### HTML

```
<table width="100%" border="1" cellspacing="0" cellpadding="0" id="table">
    <tr>
        <td>&nbsp;</td>
    </tr>
    <tr>
        <td>&nbsp;</td>
    </tr>
</table>
<div id="click">click</div>
<div id="remove">remove</div> 
```

当我添加一行时效果很好，但我不知道如何删除表格的最后一行。您也可以查看在线[演示](http://jsfiddle.net/2mZnR/)。

我怎样才能做到这一点？

此外，我希望当用户还单击任何行时它会自行删除。我试过了，但是有问题。如果您单击该行，它会自行删除，但是当您通过单击#click 添加行时，该行不会通过单击它来自行删除。

这是我的代码：

### 脚本

```
$(document).ready(function(){
    $('#click').click(function(){
        $('#table').append('<tr><td>&nbsp;</td></tr>');
    })
    $('#remove').click(function(){
        $('#table tr:last').remove();
    })
    $('#table tr').click(function(){
        $(this).remove();
    });
}) 
```

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-05-19T05:54:36.863

如果要删除 的最后一个表行`#table`，则需要使用选择器定位它，然后调用`$.remove()`它：

```
$('#remove').on("click", function(){
    $('#table tr:last').remove();
}) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-19T05:54:50.777

您不能像那样删除，您必须指定要删除的节点`$('#table tr:first')`并将其删除 `remove()`

```
$('#remove').click(function(){
    $('#table tr:first').remove();
}) 
```

[http://jsfiddle.net/2mZnR/1/](http://jsfiddle.net/2mZnR/1/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-19T06:03:51.337

A demo is at [http://jsfiddle.net/BfKSa/](http://jsfiddle.net/BfKSa/) **or** in case you are binding, add and delete to every row, this **different demo** [http://jsfiddle.net/xuM4N/](http://jsfiddle.net/xuM4N/) come in handy.

API: remove => [http://api.jquery.com/remove/](http://api.jquery.com/remove/)

As you mentioned: This will delete the "delete the last row of the table"

`$('#table tr:last').remove();` will do the trick for your case.

### Code

```
$(document).ready(function(){
    $('#click').click(function(){
        $('#table').append('<tr><td>foo add&nbsp;</td></tr>');
    })
    $('#remove').click(function(){
        $('#table tr:last').remove();
    })
}) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-07-13T08:14:04.730

`tr`您可以在单击按钮时使用表格类从表格中删除最后一个。

```
$('#remove').on("click", function(){
    $('.tbl tr:last').remove();
});
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<table class="tbl" width="100%" border="1" cellspacing="0" cellpadding="0" >
    <tr>
        <td>&nbsp;</td>
    </tr>
    <tr>
        <td>&nbsp;</td>
    </tr>
</table>
<button id="remove">remove</button>
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-19T05:57:11.730

使用选择器找到最后一行，然后像这样删除该行：

```
$('#table > tr:last').remove(); 
```

这将删除表中的最后一行。如果要删除第一个怎么办？

```
$('#table > tr:first').remove(); 
```

而已。有 jQuery 的 codeschool 在线课程。你会在那里找到很多有价值的东西，包括选择器和 DOM 操作。这是一个链接：http: [//jqueryair.com/](http://jqueryair.com/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-07-13T10:06:24.990

如果您想在单击表格行时删除行本身，那么

```
$('table tr').on("click", function(){
    $(this).remove();
}); 
```

如果要在表格末尾单击单击按钮添加行

```
 $('#click').click(function(){
    $('#table').append('<tr><td>Xyz</td></tr>');
}) 
```

# android - Android 从数据库表中填充单选按钮

> ID：10662692
> 
> 赞同：0
> 
> 时间：2012-05-19T05:51:07.487
> 
> 标签：android, database, sqlite, radio-button

我已按照本教程学习[本教程](http://mobileyogi.in/mobile-programming/populating-radio-buttons-in-android-with-database-data/)并设置了我的 DatBas 和主要活动以适应本教程。我收到一个错误：

> E/AndroidRuntime(281): java.lang.RuntimeException: 无法启动活动 ComponentInfo{com.xxx.xxx/com.xxx.xxx.Tamar_appActivity}: java.lang.NullPointerException

Tamar_appActivity 代码是：

```
 DatBas db = new DatBas(this);
    TamarDatabaseCursor c = db.getActress();

    if (c.moveToFirst())
        DisplayRadioButton(c);
    else
        Toast.makeText(this, "No title found", Toast.LENGTH_LONG).show();
    db.close();

}

public void DisplayRadioButton(Cursor c) {
    for (int i = 1; i < (c.getColumnCount()); i++) {
        RadioGroup radiogroup = (RadioGroup)      findViewById(R.id.NameSelectGroup);
        RadioButton rdbtn = new RadioButton(this);
        rdbtn.setId(i);
        rdbtn.setText(c.getString(i));
        radiogroup.addView(rdbtn);
    }

} 
```

数据库代码是：

```
public class DatBas {

public static final String KEY_ROW_ID = "_id";
public static final String KEY_IMAGE_PATH = "uri";
public static final String KEY_NAME = "name";
public static final String KEY_GENDER = "gender";
public static final String KEY_BORN_DATE_YEAR = "age_year";
public static final String KEY_BORN_DATE_MONTH = "age_month";
public static final String KEY_BORN_DATE_DAY = "age_day";

private static final String DATABASE_NAME = "TamatDB";
private static final String DATABASE_TABLE_SETTINGS = "settings";

private static final int DATABASE_VERSION = 20;

private TamarDatabase thdb;
private static Context tcontext;
private SQLiteDatabase tdb;

private static class TamarDatabase extends SQLiteOpenHelper {

    public TamarDatabase(Context context) {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);
    }

    @Override
    public void onCreate(SQLiteDatabase db) {
        String ctSettings = "CREATE TABLE " + DATABASE_TABLE_SETTINGS
                + " ( " + KEY_ROW_ID
                + " INTEGER PRIMARY KEY AUTOINCREMENT, "
                + KEY_IMAGE_PATH + " TEXT NOT NULL, " + KEY_NAME
                + " TEXT NOT NULL, " + KEY_GENDER + " TEXT NOT NULL, "
                + KEY_BORN_DATE_YEAR + " TEXT NOT NULL, "
                + KEY_BABY_DATE_MONTH + " TEXT NOT NULL, "
                + KEY_BABY_DATE_DAY + " TEXT NOT NULL);";
        db.execSQL(ctSettings);

    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        db.execSQL("DROP TABLE IF EXISTS " + DATABASE_TABLE_SETTINGS);
        onCreate(db);
    }
}

public DatBas(Context c) {
    tcontext = c;
}

public DatBas open() throws SQLiteException {
    thdb = new TamarDatabase(tcontext);
    tdb = thdb.getWritableDatabase();
    return this;
}

public void close() {
    thdb.close();
}

public long createEntrySettings(String bbdy, String bbdm, String bbdd,
        String pt, String bg, String bfName) {
    ContentValues cv2 = new ContentValues();
    cv2.put(KEY_IMAGE_PATH, pt);
    cv2.put(KEY_NAME, bfName);
    cv2.put(KEY_GENDER, bg);
    cv2.put(KEY_BORN_DATE_YEAR, bbdy);
    cv2.put(KEY_BORN_DATE_MONTH, bbdm);
    cv2.put(KEY_BORN_DATE_DAY, bbdd);

    return tdb.insert(DATABASE_TABLE_SETTINGS, null, cv2);
}

public Cursor getDataSettings() {
    String[] columns = new String[] { KEY_ROW_ID, KEY_IMAGE_PATH,
            KEY_NAME, KEY_GENDER, KEY_BORN_DATE_YEAR,
            KEY_BORN_DATE_MONTH, KEY_BORN_DATE_DAY };
    Cursor c = tdb.query(DATABASE_TABLE_SETTINGS, columns, null, null,
            null, null, null);
    String results = "";

    int iRawId = c.getColumnIndex(KEY_ROW_ID);
    int iBIPath = c.getColumnIndex(KEY_IMAGE_PATH);
    int iBName = c.getColumnIndex(KEY_NAME);
    int iGender = c.getColumnIndex(KEY_GENDER);
    int iBBDateYear = c.getColumnIndex(KEY_BORN_DATE_YEAR);
    int iBBDateMonth = c.getColumnIndex(KEY_BORN_DATE_MONTH);
    int iBBDateDay = c.getColumnIndex(KEY_BORN_DATE_DAY);

    for (c.moveToFirst(); !c.isAfterLast(); c.moveToNext()) {
        results = results + " the kind is " + " " + c.getString(iRawId)
                + " the kind is " + " " + c.getString(iBIPath)
                + " the kind is " + " " + c.getString(iBName)
                + " the kind is " + " " + c.getString(iGender)
                + " the kind is " + " " + c.getString(iBBDateYear)
                + " the kind is " + " " + c.getString(iBBDateMonth)
                + " the kind is " + " " + c.getString(iBBDateDay) + "\n";
    }
    return c;
}

public String getDataSettingsBabyName() {
    String[] columns = new String[] { KEY_ROW_ID, KEY_NAME};
    Cursor c = tdb.query(DATABASE_TABLE_SETTINGS, columns, null, null,
            null, null, null);
    String results = "";

    int iRawId = c.getColumnIndex(KEY_ROW_ID);
    int iBName = c.getColumnIndex(KEY_NAME);

    for (c.moveToFirst(); !c.isAfterLast(); c.moveToNext()) {
        String[] resultsS = new String[]{c.getString(iRawId), c.getString(iBName)       
        };
    }
    return results;
}

public static class TamarDatabaseCursor extends SQLiteCursor{

    /** The query for this cursor */
    private static final String QUERY = 
        "SELECT _id, uri, baby_name, gender, age_year, age_month, age_day" +
        " FROM settings";

    /** Cursor constructor */
    private TamarDatabaseCursor(SQLiteDatabase db, SQLiteCursorDriver driver,
            String editTable, SQLiteQuery query) {
        super(db, driver, editTable, query);
    }
    /** Private factory class necessary for rawQueryWithFactory() call */

    private static class Factory implements SQLiteDatabase.CursorFactory{
        public Cursor newCursor(SQLiteDatabase db,
                SQLiteCursorDriver driver, String editTable,
                SQLiteQuery query) {
            return new TamarDatabaseCursor(db, driver, editTable, query);
        }
    }
    /* Accessor functions get one per database column */

    public int getActressId(){return getInt(getColumnIndexOrThrow("actress.actressId"));}

}

public TamarDatabaseCursor getActress()
{
SQLiteDatabase d = getReadableDatabase();
TamarDatabaseCursor c = (TamarDatabaseCursor)d.rawQueryWithFactory
        (new TamarDatabaseCursor.Factory(), TamarDatabaseCursor.QUERY, null, null);
c.moveToFirst();
return c;
}

private SQLiteDatabase getReadableDatabase() {
    // TODO Auto-generated method stub
    return null;
}

public DatBas delete() {
    tdb.delete(DATABASE_TABLE, null, null);
    tdb.delete(DATABASE_TABLE_SETTINGS, null, null);
    return null;
}
} 
```

主要的 XML 是：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="#3691c9"
android:orientation="vertical" >

<RadioGroup
    android:id="@+id/sideGroup"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:orientation="horizontal"
    android:weightSum="100" >

    <RadioButton
        android:id="@+id/rbtnLeft"
        android:layout_width="160dp"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:layout_weight="50"
        android:text="xxx" />

    <RadioButton
        android:id="@+id/rbtnRight"
        android:layout_width="160dp"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:layout_weight="50"
        android:text="xxx" />
</RadioGroup>

<RadioGroup
    android:id="@+id/kindGroup"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:orientation="horizontal"
    android:weightSum="100" >

    <RadioButton
        android:id="@+id/rbtnN"
        android:layout_width="160dp"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:layout_weight="50"
        android:text="xxx" />

    <RadioButton
        android:id="@+id/rbtnP"
        android:layout_width="160dp"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:layout_weight="50"
        android:text="xxx" />
</RadioGroup>

<TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center"
    android:text="TextView"
    android:textColor="#363636"
    android:textSize="25dp" />

<TextView
    android:id="@+id/textView2"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:gravity="center"
    android:text="TextView"
    android:textColor="#363636"
    android:textSize="40dp"
    android:textStyle="bold" />

<Button
    android:id="@+id/button2"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:text="Start" />

<Button
    android:id="@+id/button3"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:text="Pause" />

<Button
    android:id="@+id/Button4"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:text="Resume" />

<Button
    android:id="@+id/button1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:text="Stop" />

<RadioGroup
    android:id="@+id/NameSelectGroup"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" >

    <RadioButton
        android:id="@+id/bNameSelect"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:orientation="horizontal"
        android:text="RadioButton" />
</RadioGroup>

<ImageButton
    android:id="@+id/imageButton1"
    android:layout_width="38dp"
    android:layout_height="37dp"
    android:src="@android:drawable/ic_menu_manage" />

<ImageView
    android:id="@+id/imageView1"
    android:layout_width="160dp"
    android:layout_height="160dp"
    android:layout_gravity="center"
    android:src="@android:drawable/gallery_thumb" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T11:28:30.377

我必须设置一个`getReadableDatabase()`方法：

```
 public SQLiteDatabase getReadableDatabase() throws SQLiteException {
    thdb = new TamarDatabase(tcontext);
    tdb = thdb.getReadableDatabase();
    return tdb;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T06:01:00.047

I would hazard a guess that `findViewById(R.id.babyNameSelectGroup);` is returning null, and when you try to `radiogroup.addView(rdbtn);` you get the NPE.

Have you done `setContentView(R.layout.yourmainlayout);` before you try to access a view contained in your layout?

**EDIT**

Your are looking for `babyNameSelectGroup`, which doesn't appear to exist in your layout (thus giving you the NPE). Maybe it should be `NameSelectGroup`?

# java - 使用 blobstore 在 gaej 中解析 csv 文件

> ID：10662695
> 
> 赞同：0
> 
> 时间：2012-05-19T05:51:34.877
> 
> 标签：java, google-app-engine, csv, blobstore

我已经使用 blobstoreService 将 csv 文件上传到 blobstore。现在如何使用 blobkey 解析这个 csv 文件。这就是我在输入流中读取这个文件的方式

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T06:20:36.127

您可以通过[BlobKey(String blobKey)作为](https://developers.google.com/appengine/docs/java/javadoc/com/google/appengine/api/blobstore/BlobKey.html)[BlobstoreInputStream(BlobKey blobKey)](https://developers.google.com/appengine/docs/java/javadoc/index?com/google/appengine/api/blobstore/BlobstoreInputStream.html)的构造函数参数获取文件[InputStream](http://docs.oracle.com/javase/7/docs/api/java/io/InputStream.html)。

例如：

```
BlobstoreInputStream is = new BlobstoreInputStream(new BlobKey("YOU_BLOB_KEY")); 
```

对于解析[CSV](http://en.wikipedia.org/wiki/Comma-separated_values)文件，您可以考虑使用[opencsv](http://opencsv.sourceforge.net/)的[CSVReader](http://opencsv.sourceforge.net/apidocs/au/com/bytecode/opencsv/CSVReader.html)。

例如：

```
CSVReader csvReader = new CSVReader(new InputStreamReader(is));
List<String[]> rows = csvReader.readAll(); 
```

# objective-c - 如何在 Objective-C 中做相当于 println 的操作？

> ID：10662697
> 
> 赞同：1
> 
> 时间：2012-05-19T05:52:03.277
> 
> 标签：objective-c

在 Java 中，我会这样做：

```
String temp = ".";
System.out.println(temp); 
```

我如何在 Objective-C 中做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-19T05:54:53.353

```
NSString *temp = @".";    
NSLog(@"%@", temp); 
```

NSLog 格式说明符：

```
%@ Object, calls the Object's description method
%d, %i signed int
%u unsigned int
%f float/double
%p for pointers to show the memory address
%zu value of type size_t (for sizeof(variable function)
%s C strings
\u can used for arbitrary unicode chars example:NSLog(@"\u03c0");//π 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-19T05:58:39.427

Objective-C 并没有真正拥有自己的专用打印功能。NSLog 将打印您提供的内容以及一堆调试信息。对于直接打印，C`printf()`仍然是基本标准。作为等效于您的代码，我会写：

```
NSString *temp = @".";
printf("%s\n", [temp UTF8String]); 
```

# directx - 提交命令缓冲区 DX 与 OpenCL

> ID：10662701
> 
> 赞同：0
> 
> 时间：2012-05-19T05:52:40.193
> 
> 标签：directx, opencl

我想知道在 OpenCL 和 DirectX 中提交命令缓冲区是否有区别。据我所知，在 OpenCL 中提交命令缓冲区是在调用 cFlush 或 clFinish 时执行的。[在http://msdn.microsoft.com/en-us/library/windows/hardware/ff569747(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/hardware/ff569747%28v=vs.85%29.aspx)中解释了在 DirectX 中提交命令缓冲区。

我的问题是：OpenCL 和 DirectX 命令缓冲区提交在概念上是否相同？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T16:38:23.100

我对DX不熟悉。但是 OpenCL 提交系统不需要 clFlush 和 clFinish 来运行队列中的命令。

每次将内核或操作提交到 OpenCL 队列时，只要它可以异步到 CPU 弹出，就会立即对其进行处理。clFlush() 命令只是强制命令进入队列。clFinish() 确保在将控制权返回给 CPU 之前队列中的所有作业都已完成（这是一个阻塞调用）。

例如，这将证明可以完美地工作：

```
clEnqueueWriteBuffer()
clEnqueueNDRangeKernel()
clEnqueueReadBuffer()
sleep(10)
//continue the processing 
```

但正确的方法是通过调用 clFinish() （确保队列为空）或通过 clEvent 子系统（检查排队的任务是否已完成）来检查它：

```
clEnqueueWriteBuffer()
clEnqueueNDRangeKernel()
clEnqueueReadBuffer()
clFinish()
//continue the processing 
```

# visual-studio-2010 - 如何创建 Visual Studio 加载项来生成文件？

> ID：10662705
> 
> 赞同：6
> 
> 时间：2012-05-19T05:54:18.640
> 
> 标签：visual-studio-2010, code-generation, add-in

我想创建一个 Visual Studio 加载项来生成文件。

例如，我想在 ASP.NET MVC 中创建类似于“添加控制器”对话框的内容。当您在 Visual Studio 中的 MVC 项目中右键单击“Controller”文件夹时，会出现此问题。

但是，我不想创建控制器文件，而是想在文件夹中创建“处理程序”、“请求”和“回复”类，以实现服务总线。

一遍又一遍地创建这些类变得有点麻烦，所以我想自动化它。是一个加载项去这里的方式吗？我是否还需要使用宏和/或 T4 模板？

如果我可以通过右键单击文件夹然后选择 Add->Handler 或类似的东西来运行加载项，那就太好了。我确信一定有办法做这样的事情，但我还没有通过谷歌找到好的资源。

作为参考，我已经查看了这些网页以获取信息：

*   [http://msdn.microsoft.com/en-us/vstudio/bb968855.aspx](http://msdn.microsoft.com/en-us/vstudio/bb968855.aspx)
*   [http://msdn.microsoft.com/en-us/library/80493a3w.aspx](http://msdn.microsoft.com/en-us/library/80493a3w.aspx)
*   [http://msdn.microsoft.com/en-us/library/7k3w6w59.aspx](http://msdn.microsoft.com/en-us/library/7k3w6w59.aspx)
*   [http://www.c-sharpcorner.com/UploadFile/mgold/AddIns11292005015631AM/AddIns.aspx](http://www.c-sharpcorner.com/UploadFile/mgold/AddIns11292005015631AM/AddIns.aspx)
*   [http://www.codeproject.com/Articles/16515/Creating-a-Custom-Tool-to-Generate-Multiple-Files](http://www.codeproject.com/Articles/16515/Creating-a-Custom-Tool-to-Generate-Multiple-Files)
*   [http://www.olegsych.com/2010/03/t4-tutorial-integrating-generated-files-in-visual-studio-projects/](http://www.olegsych.com/2010/03/t4-tutorial-integrating-generated-files-in-visual-studio-projects/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-25T15:08:44.617

您可以创建模板，让您几乎可以做任何您想做的事情。

*   [创建 Vs 模板](http://msdn.microsoft.com/en-us/library/ms247121.aspx)

*   [项目模板](http://msdn.microsoft.com/en-us/library/tsyyf0yh.aspx)

您可以轻松地使用内置的自定义模板，并且可以从中提取它们

```
...\Documents\Visual Studio 20[XY]\Templates\ 
```

文件夹以通过复制迁移它们。

# javascript - 如何将鼠标事件从 Java Script 通知到 Cocoa？

> ID：10662714
> 
> 赞同：0
> 
> 时间：2012-05-19T05:55:43.837
> 
> 标签：javascript, objective-c, macos, cocoa, webview

```
[scriptObject evaluateWebScript:@"mouseClickCallBack =  function() { SampleWebViewApp. mouseClickCallBack(); } "]; 
```

我有一个`WebView`并且我能够捕获`mouseEvents`using `JavaScript`。现在我想`textarea`在鼠标点击的位置插入，因为我必须添加`textarea`，我想将它添加到。我将如何`Objective C`通知`events`from `JavaScript`to `Objective C`。这`MAC OSX (cocoa)`不是为了`iPhone`。我应该用什么`delegates`来`webview`完成这个？

请提出任何替代方案来完成同样的任务？

我已经通过这个链接。

[如何从 Javascript 调用 Objective-C？](https://stackoverflow.com/questions/1662473/how-to-call-objective-c-from-javascript) 但它是为了`UIWebView`

我实现了以下API`WebView`

```
+ (BOOL)isSelectorExcludedFromWebScript:(SEL)selector
{
    if ((selector == @selector(mouseClickCallBack)) 
    {
        return NO;
    }
    return YES;
} 
```

但我不确定我应该在哪里调用 mouseClick 的以下代码。

```
WebScriptObject *scriptObject;
   [scriptObject evaluateWebScript:@"mouseClickCallBack =  function() { SampleWebViewApp.mouseClickCallBack(); } "]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T17:12:58.390

我可以使用警报解决这个问题`JavaScript`，这些警报在 WebView UIDelegate 中处理。

```
- (void)webView:(WebView *)sender runJavaScriptAlertPanelWithMessage:(NSString *)message initiatedByFrame:(WebFrame *)frame 
```

请参考以下链接。

[JavaScript alert() 在嵌入式 WebView 中不起作用](https://stackoverflow.com/questions/2101611/javascript-alert-not-working-in-embedded-webview)

# javascript - PhoneGap 显示加速度计值

> ID：10662719
> 
> 赞同：1
> 
> 时间：2012-05-19T05:57:31.387
> 
> 标签：javascript, jquery, html, mobile, cordova

我正在使用 phonegap 获取加速度计的值并打印它，但我不确定如何在主体中显示它。我也在使用 JQuery。此代码取自 Cordova (PhoneGap) 网站上的加速度计示例。

```
<!DOCTYPE html>
<html>
  <head>
    <title>Acceleration Example</title>

    <script type="text/javascript" charset="utf-8" src="cordova-1.7.0.js"></script>
    <script type="text/javascript" charset="utf-8">

    // Wait for Cordova to load
    //
    document.addEventListener("deviceready", onDeviceReady, false);

    // Cordova is ready
    //
    function onDeviceReady() {
        navigator.accelerometer.getCurrentAcceleration(onSuccess, onError);
    }

    // onSuccess: Get a snapshot of the current acceleration
    //
    function onSuccess(acceleration) {
        alert('Acceleration X: ' + acceleration.x + '\n' +
              'Acceleration Y: ' + acceleration.y + '\n' +
              'Acceleration Z: ' + acceleration.z + '\n' +
              'Timestamp: '      + acceleration.timestamp + '\n');
              document.writeln(
              'Acceleration X: ' + acceleration.x + '\n' +
              'Acceleration Y: ' + acceleration.y + '\n' +
              'Acceleration Z: ' + acceleration.z + '\n' +
              'Timestamp: '      + acceleration.timestamp + '\n');
    }

    // onError: Failed to get the acceleration
    //
    function onError() {
        alert('onError!');
    }

    </script>
  </head>
  <body>
    <h1>Example</h1>
    <p>getCurrentAcceleration</p>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T06:03:30.400

在 HTML 标记中，使用此代码。

```
<p id="ax"></p>
<p id="ay"></p>
<p id="az"></p> 
```

以及 javascript 代码中的 onSuccess(acceleration) 函数。你应该使用这个命令

```
document.getElementById("ax").innerHTML = acceleration.x;
document.getElementById("ay").innerHTML = acceleration.y;
document.getElementById("az").innerHTML = acceleration.z; 
```

或者像这样使用 jQuery

```
$("ax").html(acceleration.x);
$("ay").html(acceleration.y);
$("az").html(acceleration.z); 
```

# ruby - 红宝石块问题循环变量

> ID：10662725
> 
> 赞同：0
> 
> 时间：2012-05-19T05:58:06.907
> 
> 标签：ruby, block, ruby-1.9.3

```
comics = load_comics( '/comics.txt' )

Popup.make do
  h1 "Comics on the Web"
  list do
    comics.each do |name, url|
      link name, url
    end
  end
end 
```

我是红宝石新手。这是来自 ruby​​ 网站的一段代码。

我在菜单中找不到什么“链接”和“列表”关键字。谁能解释一下这两个关键字，这两个关键字的定义在哪里。

我也对他们如何读取变量名称和 url 感到困惑，他们是通过同一行的空格读取它还是什么？所以如果我有 Comics1 link_of_comics_site_1 Comics2 link_of_comics_site_2 Comics3 link_of_comics_site_3

所以对于第一次迭代，name=Comics1 和 url =link_of_comics_site_1

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T06:08:03.037

这不仅仅是鲁比。这是使用 ruby​​ 附加方法生成 HTML 的网页模板。

但据推测，调用的结果`load_comics`是一个哈希，其中键是名称，值是 URL。你可以自己做一个：

```
my_comics_hash = { "name1" => "url1", "name2" => "url2" } 
```

然后您可以以相同的方式对其进行迭代：

```
my_comics_hash.each do |name, url|
  puts "Name #{name} goes with URL #{url}"
end 
```

在您的代码中，它在弹出窗口中构建了一个 HTML 列表，但这是相同的想法。该`each`方法*迭代*一个集合——在这种情况下是一个哈希——并在该集合中的每个项目上运行一些代码——在这种情况下，每个键/值对。当你调用时`each`，你传递给它一个内部的代码块`do`...... `end`；这是在每个项目上运行的代码。当前项目被传递给代码块，该代码块声明一个变量以将其保存在单词之后的管道内`do`。由于我们正在迭代键/值对，我们可以声明两个变量，键在第一个中，值在第二个中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T06:18:04.847

在 ruby​​ 函数中，**括号**是可选的，而“;” 语句结束也是可选的。ej

```
link "click here" , "http://myweb.com" 
```

相当于：

```
link("click here", "http://myweb.com"); 
```

但是，如果您在一行中有多个语句，则“;” 是必须的，ej

```
 link("click here1", "http://myweb.com"); link("click here2", "http://myweb.com"); 
```

在您的代码中，它可以写成

```
 link(name, url) 
```

要不就

```
 link(name, url); 
```

或者

```
 link name, url 
```

但强烈建议在函数参数周围加上**括号**以提高可读性，除非您有其他原因。这 ”;” 在红宝石世界并不常见。

# .net - 应用程序状态迁移框架 - .Net

> ID：10662726
> 
> 赞同：1
> 
> 时间：2012-05-19T05:58:12.873
> 
> 标签：.net, process-migration

我梦想能够在一台计算机上使用应用程序，关闭我当前的会话，并能够在另一台计算机上重新打开该会话。主要是由于特定于特定机器的本机资源等，据我所知，仅在 .Net 中序列化进程并将其移动到另一台机器是不可能的。行不通的原因太多了。现在可能最接近这个的是虚拟机，但这不是我想要的。

我的具体问题是：是否有一个基于 .Net 的框架可以帮助启用这种类型的应用程序？如果不在 .Net 中，是否有没有建立在 .Net 上的框架，也许我可以从中获得架构见解？

我想这样的框架必须将对原生资源的访问推送到应用程序的外围，抽象公共原生资源（文件 I/O、图形上下文），并构建“可休眠”子系统构建块才能启动/停止应用程序。这可能不会让 .Net 的大部分框架部分仍然可用，因为它不会使用抽象，但我可以接受。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T06:31:34.920

好吧，我整天都在写几乎那种应用程序。使用良好的“服务器-客户端”模式。服务器跟踪所有数据，连接的客户端获取最新数据。这也解决了多个用户协同处理相同数据的问题。唯一缺少的部分是存储导航状态和当前“未保存”的数据。这很容易在应用程序退出时存储，但这通常与我编写的应用程序类型无关。

不需要特殊的框架。

# ffmpeg - 以相同格式编码音频和视频然后合并

> ID：10662735
> 
> 赞同：1
> 
> 时间：2012-05-19T05:59:38.937
> 
> 标签：ffmpeg, codec, mkv

我正在使用**ffmpeg**从图像和 mkvmerge 创建视频，然后将这些视频合并到一个视频中。我现在发现自己需要在这些幻灯片之间合并一个视频剪辑（有或没有声音）。问题是如果视频剪辑有声音，则 mkvmerge 无法合并文件，因为其他幻灯片没有声音。然后我决定用无声的声音生成幻灯片视频（我创建了一个无声的 mp3 文件并在从图像创建视频时使用它）。现在，当视频剪辑没有 mp3 声音时，就会出现另一个问题。在这种情况下，mkvmerge 再次失败并抱怨不同的音频格式。我需要 ffmpeg 命令的帮助，该命令将所有视频部分转换为相同的音频和视频格式，以便我可以轻松使用 mkvmerge 合并视频或**mkvmerge**命令允许我合并具有不同音频编解码器的文件。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T14:05:57.240

> 现在，当视频剪辑没有 mp3 声音时，就会出现另一个问题。在这种情况下，mkvmerge 再次失败并抱怨不同的音频格式。我需要 ffmpeg 命令的帮助，该命令将所有视频部分转换为相同的音频和视频格式

```
ffmpeg -i in.mkv -c:a libmp3lame out.mkv 
```

# vb.net - 两个表单线程合二为一：“Splash Form”后面的“MainForm”加载

> ID：10662746
> 
> 赞同：0
> 
> 时间：2012-05-19T06:02:22.950
> 
> 标签：vb.net, vb.net-2010

两种形式 1.“SplashForm” 2.“MainForm”

当“SplashForm”进程结束时，我想加载“MainForm”作为“SplashForm”进程的后台进程我只想显示应该已经加载的“MainForm”代码

VB代码：

```
Imports System
Imports System.Threading

Public Class MultiThreading
    ' Global declaration 
    Dim mf As New MainForm
    'Thread Declaration
    Dim tm As New Thread(AddressOf LoadProcess)
    Dim ts As New Thread(AddressOf Splashprocess)

    Private Sub Epaper_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
        Me.Opacity = 0
        tm.Start()
        ts.Start()
    End Sub

    Sub  LoadProcess()
        mf.Show()
        mf.Hide()
    End Sub

    Sub Splashprocess()
        For i As Integer = 0 To 1000
            Me.Opacity += 0.01
        Next
        If Me.Opacity = 1 Then
            mf.Show()
            Me.Hide()
        End If
    End Sub
    End Class 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T06:28:43.923

为什么不从主窗体调用 SplashScreen？你的主窗体一开始应该是不可见的。加载主表单后，您可以首先将启动画面显示为独立表单（不是子表单），然后继续加载主表单。完成所有过程后，关闭启动画面并显示主窗体。

因此，您将避免使用自制线程。

这是一个伪代码示例：

```
In Main_Form class                // which is invisible
{
    When Main_Form is loaded
    {
        Show SplashScreen

        Proceed on loading everything else

        Hide SplashScreen
        Show Main_Form
    }
} 
```

# javascript - javascript 事件无法识别我的函数

> ID：10662750
> 
> 赞同：0
> 
> 时间：2012-05-19T06:02:56.170
> 
> 标签：javascript, html, dom

我有一个用于设置用户位置的 ajax 脚本，表单输入是

```
<select id="region" onchange="city('/ajax-city.php')" ...>
   <option>

<select ..\>
   <option...> 
```

当第一个选择列表中的一个选项发生更改（onchange）时，将向服务器发送 ajax 请求并处理响应并`<select>`更新第二个选项。

这是用于更新的函数`<select>`

```
var city = function(page)
{
    if(xhro){ // stands for Xml Http Request Object
      var fv = document.getElementById('region').value;
      var obj = document.getElementById('city-element');
      obj.innerHTML="<span style=\"display:block; width:200px; float:right; padding:0 10px 10px 0; font-family:Tahoma; font-size:12px;\"> please wait.. </span>";
      xhro.open("POST",page);
      xhro.setRequestHeader('Content-Type','application/x-www-form-urlencoded');
      xhro.onreadystatechange = function()
      {
        if(xhro.readyState==4 && xhro.status==200)
        {
            obj.innerHTML = "<select name=\"city\"  onchange=\"subcity('ajax-subcity.php')\" id=\"city\" >"+xhro.responseText+"</select>";
        }
      }
      xhro.send("city=" + fv);
} 
```

如您所见，我的函数添加了 onchange 属性，以便在`<select name="city">`触发 onchange 事件时发送另一个 ajax 请求，但是当我单击下一个选项时`<select name="city">`，在 firebug 的控制台中我收到此错误

```
subcity is not a function 
```

`subcity("ajax-subcity.php");`

当我在控制台中键入该函数时，firebug 会识别它，我认为当 ajax 请求更新 DOM 元素时，事件不会像页面正常加载时那样处理。

但这只是一个建议，考虑到该函数`city()`已被处理并更新`<select name="city>"`，但在下一个级别（`subcity()`）中没有更新发生

并且创建`<option ..>`s 是使用 php 脚本完成的。

它认为问题不在 subcity() 函数中，因为它在 firebug 中工作 BTW 很高兴被提及。

```
var subcity = function(page){
alert("problem solved");
if(xhro){
    var fv = document.getElementById('city').value;
    var obj = document.getElementById('subcity-element');
    obj.innerHTML="<span style=\"display:block; width:200px; float:right; padding:0 10px 10px 0; font-family:Tahoma; font-size:12px;\"> please wait</span>";
    xhro.open("POST",page);
    xhro.setRequestHeader('Content-Type','application/x-www-form-urlencoded');
    xhro.onreadystatechange = function(){
        if(xhro.readyState==4 && xhro.status==200){
            obj.innerHTML = "<select name=\"subcity\" id=\"subcity\" >"+xhro.responseText+"</select>";
        }
    }
    xhro.send("city=" + fv);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T06:49:47.070

我引用 ：

```
 if(xhro.readyState==4 && xhro.status==200){
            obj.innerHTML = "<select name=\"subsity\" id=\"subcity\" >"+xhro.responseText+"</select>";
        } 
```

更改您在选择中使用的子**城市**ID，请使用**“子城市”**而不是“子城市”，否则它将覆盖您的子城市功能！

**id 由 javascript 使用，这就是为什么它们必须是唯一的。**，它不仅适用于 CSS。

编辑 ：

对城市和城市功能做同样的事情

PS：你的代码是一团糟，认真的！修理它。

# iphone - iphone:Apply voice modulation and save that modulated sound file

> ID：10662756
> 
> 赞同：2
> 
> 时间：2012-05-19T06:04:05.673
> 
> 标签：iphone, objective-c, ios5, xcode4.2

In my app I am using DIRAC framework for voice modulation now I want to save that modulated sound file to my document directory. I am a little confused as to how to save that modulated file?

Here is my code that modulate the sound file and play that file.

```
-(IBAction)uiPitchSliderMoved:(UISlider *)sender;
 {
    [mDiracAudioPlayer stop];   // only required in LE!
    [mDiracAudioPlayer changePitch:powf(2.f, (int)sender.value / 12.f)];
    uiPitchLabel.text = [NSString stringWithFormat:@"%d", (int)sender.value];
    NSLog(@"pitchlabel=%@",uiPitchLabel.text);
    [mDiracAudioPlayer play];   // only required in LE!
 } 
```

I wnat to save the audio file when pitch rate is changed.

# php - How do I load PHP 5.4.3 with Apache 2.2.3?

> ID：10662759
> 
> 赞同：-2
> 
> 时间：2012-05-19T06:04:35.267
> 
> 标签：php, linux, apache

I have downloaded and installed PHP 5.4.3 via source. I used the following command line:

```
./configure --with-apxs2 --with-pgsql 
```

I have apache 2.2.3 installed, as per:

```
[root@localhost httpd-2.4.2]# apachectl -v
Server version: Apache/2.2.3
Server built:   Apr  4 2010 17:19:54
[root@localhost httpd-2.4.2]# 
```

But I get the following error when trying to start my server:

> Starting httpd: httpd: Syntax error on line 206 of /etc/httpd/conf/httpd.conf: Cannot load /usr/lib/httpd/modules/libphp5.so into server: /usr/lib/httpd/modules/libphp5.so: undefined symbol: zend_parse_parameters [FAILED]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T06:26:43.473

你在configure之后在php-source目录下执行make和make install了吗？必须这样做才能为 apache 安装模块。

# c# - 如何快速将数组初始化为-1？

> ID：10662769
> 
> 赞同：3
> 
> 时间：2012-05-19T06:05:56.407
> 
> 标签：c#

我知道我不应该优化程序的每一个点，让我们假设我必须优化数组初始化。

所以我写了比较`for loop`的程序`Array.Clear`

```
using System;
using System.Diagnostics;

namespace TestArraysClear
{
    class Program
    {
        static void Main(string[] args)
        {
            int[] a = new int[100000];
            Stopwatch sw = Stopwatch.StartNew();
            for (int i = 0; i < 10; i++)
            {
                sw.Reset(); 
                sw.Start();
                for (int j = 0; j < a.Length; j++)
                {
                    a[j] = 0;
                }
                sw.Stop();
                Console.WriteLine("for " + sw.ElapsedTicks);
                sw.Reset();
                sw.Start();
                Array.Clear(a, 0, a.Length);
                sw.Stop();
                Console.WriteLine("Array.Clear " + sw.ElapsedTicks);
            }
        }
    }
} 
```

我机器上的输出：

```
for 1166
Array.Clear 80
for 1136
Array.Clear 91
for 1350
Array.Clear 71
for 1028
Array.Clear 72
for 962
Array.Clear 54
for 1185
Array.Clear 46
for 962
Array.Clear 55
for 1091
Array.Clear 55
for 988
Array.Clear 54
for 1046
Array.Clear 55 
```

所以`Array.Clear`大约比 . 快 20 倍`for loop`。但`Array.Clear`初始化为`0`. 我可以以`-1`某种方式将数组初始化为具有相同的性能吗？

**upd：**我不是在寻找一些“极端不安全”的代码。我正在寻找像`Array.Clear`. 我只是想知道 .NET 提供快速 0 初始化，但 .NET 不提供对其他值的初始化。那么为什么.NET 比“-1”更喜欢“0”呢？

**upd**我想重置现有的数组。所以我正在寻找`Array.Clear`将数组重置为的模拟，而`-1`不是`0`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-19T06:44:23.373

可能有一种方法可以通过非托管数组（指针）将连续的内存块设置为相同的值（例如，无论 int '-1' 映射到它的 4 字节内存时是什么）。

本文讨论了一种比托管 for 循环更快的方法（给出的示例是 byte[] 数组）： [http ://techmikael.blogspot.com/2009/12/filling-array-with-default-value.html](http://techmikael.blogspot.com/2009/12/filling-array-with-default-value.html)

另外，这里： [什么是 C# 中的 memset 等价物？](https://stackoverflow.com/questions/1897555/what-is-the-equivalent-of-memset-in-c)

正如其他海报所提到的，这样做似乎有点极端，通常使用 for 循环初始化数组所需的速度不会有问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-19T06:10:34.863

好吧，*最快*的方法是使用静态初始化：

`int[] a = {-1, -1, -1, -1, ...}`

您总是可以编写一个程序来为您生成源代码，例如

```
var sb = new StringBuilder("int[] a = {");
for (int i = 0; i < 10000; ++i)
    sb.append(i != 10000 -1 ? "-1," : "-1");
sb.append("};"); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-19T08:03:28.113

我不知道它是否快，而是一种更简洁的初始化数组的方法。

```
int[] a = Enumerable.Range(0, 100000).Select(s => -1).ToArray(); 
```

**更新：** 或更准确地说

```
int[] a = Enumerable.Repeat(-1, 100000).ToArray(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-19T06:10:46.437

没有这样的事情 - 看到[这个问题](https://stackoverflow.com/questions/6828154/c-sharp-equivalent-to-javas-arrays-fill-method)和[这个](https://stackoverflow.com/questions/1014005/how-to-populate-instantiate-a-c-sharp-array-with-a-single-value)问题。

`Clear()`疯狂的理论 -如果该方法在非托管代码中实现，则数组可能会更快。但请注意@JeffMercado 关于更大样本量的评论。

# variables - Pic programming: what is the variable type of a port bit in MikroC?

> ID：10662771
> 
> 赞同：1
> 
> 时间：2012-05-19T06:06:15.127
> 
> 标签：variables, pic, mikroc

I'm programming in C in the MikroC IDE for a pic16f887 and I want more versatility with pins such as being able to put them into an array, passing them as arguments to functions...etc.

So I was wondering what the "type" of a pin such as `PORTB.F1` is? How would I store bits into an array?

Would this work?

```
const char pinArr[3] = {PORTB.F1, PORTC.F1, PORTD.F1}; 
```

Thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-02T07:18:59.100

您可以定义您的引脚并改用预定义的名称。这要容易得多。例如：

```
#define front_sensor                PORTE.F0
#define left_sensor                 PORTE.F1
#define right_sensor                PORTE.F2 
```

或者

```
unsigned char sensor = PORTE.F0; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T09:30:01.317

我假设您正在尝试使用一组输入引脚来执行此操作。数字输入引脚应读取为 int，特别是 0 或 1。您的`char`数组可能无法作为输入为 0 的引脚工作，将被读取为 NULL 字符，这将表示字符串的结尾任何期望正常的 c 字符串的东西。但是，应该没有什么可以阻止您使用`int`数组。

# css - 使用 css3 制作虚线以运行

> ID：10662772
> 
> 赞同：0
> 
> 时间：2012-05-19T06:06:42.290
> 
> 标签：css

最近在我的项目中，我遇到了链接中的图像![](../Images/545aecd08e621f455d008b018e728dc4.png)。这就像将音乐，艺术，歌手等行业中的才华横溢的人联系在一起，。是否可以使用 CSS3 动画、过渡或变换使虚线运行...？如果是如何做出这样的效果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T08:27:33.663

```
border: 1px dashed red; 
```

然后使用其他方法正确定位它

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T13:21:15.340

这是可能的，但是您需要考虑在不同的浏览器上会发生什么。Css 动画尚未（完全）在所有浏览器中得到支持。css 转换也没有完全集成，所以在 IE 中你会看到一个带有一些随机水平线的破碎页面。

但是您想使用它，您需要单独为每一行设置动画。查看此网站以获取有关动画[http://css3.bradshawenterprises.com/的信息](http://css3.bradshawenterprises.com/)

对于 16 行，这将是可怕的。但是可以使用下面的代码来完成。

```
.line {
 border-top: 1px solid red;
 height: 1px;
}

#line1 {
 position absolute;
 width: 200px;
 -moz-transform:rotate(45deg);
 -webkit-transform:rotate(45deg);
 transform:rotate(45deg);
 -webkit-animation:move_line1 1s infinite;
 -moz-animation:move_line1 1s infinite;
 animation:move_line1 1s infinite;
}

#line2 {
 ...
}

@keyframes move_line1 {
 0% {
  top: 300px;
  left: 300px;
 }
 100% {
  top: 280px; /* Based on the rotation you can calculate the new x and y with sine and cosine */
  left: 280px;
 }
}

@keyframes move_line2 {
 ...
} 
```

您基本上会将以下内容添加到您的html中

```
<div id="line1" class="line> </div>
<div id="line2" class="line> </div>
... 
```

# javascript - Implementing drag and drop with image array using JavaScript in HTML5?

> ID：10662774
> 
> 赞同：4
> 
> 时间：2012-05-19T06:07:16.810
> 
> 标签：javascript, html, drag-and-drop

I want to create a list of images that can be dragged and dropped into a container. Then I want to iterate the list of images and render them. The code below works only for images that are outside of the array(`boxA`). How do I implement this design as to have the images that are inside the array to be drag-and-drop-able inside the container (`boxB`)?

```
<!DOCTYPE HTML>
    <html>
    <head>
<style type="text/css">
html, body {
    margin-left:auto;
    margin-right:auto;
    width:980px;    
}

#boxA { background-color: #6633FF; width:75px; height:75px;  }
#boxB{
    float:right;
    padding:10px;
    margin:10px;
}
#boxB { background-color: #FF6699; width:500px; height:500px; }
#lolo {
    padding:10px;
    width:800px;
    list-style:none;
    float:left;
}

#lolo ul{
    display:inline; 
}
#lolo ul li{
    display:inline; 
}
</style>
    <script type="text/javascript">
    function dragStart(ev) {
       ev.dataTransfer.effectAllowed='move';
       ev.dataTransfer.setData("Text", ev.target.getAttribute('id'));
       ev.dataTransfer.setDragImage(ev.target,0,0);
       return true;
    }
    function dragEnter(ev) {
       event.preventDefault();
       return true;
    }
    function dragOver(ev) {
        return false;
    }
    function dragDrop(ev) {
       var src = ev.dataTransfer.getData("Text");
       ev.target.appendChild(document.getElementById(src));
       ev.stopPropagation();
       return false;
    }
    <-- this my array -->
    var myArray = new Array;
    myArray[0] = '<img src="image/pic1.png">'
    myArray[1] = '<img src="image/pic2.png">'
    myArray = ev.dataTransfer.getData("text");
    function lala(){
    for (var i=0; i < myArray.length; i++)
    {
         document.write("<ul>" + "<li>" + myArray[i] + "</li>" + "</ul>");

    }
    }</script>
    </head>

    <body>
    <!-- this the HTML code -->
    <div id="boxA" draggable="true" 
       ondragstart="return dragStart(event)">
    </div>
        <div id="lolo">
    <script>
      lala();
     </script>
     </div>
    <div id="boxB" ondragenter="return dragEnter(event)" ondrop="return dragDrop(event)" 
         ondragover="return dragOver(event)">
     </div>
    </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T14:48:38.777

为图像提供 'id' 并为 div 'lolo' 使用 ondragstart 处理程序

`myArray[0] = '<img id="img1" src=........`

`myArray[1] = '<img id="img2" src=........`

`.....`

`<div id="lolo" ondragstart="return dragStart(event)">` `......` `</div>` `

# php - csv data import into mysql database using php

> ID：10662775
> 
> 赞同：3
> 
> 时间：2012-05-19T06:07:30.250
> 
> 标签：php, mysql, fgetcsv

Hi I need to import a csv file of 15000 lines. I m using the fgetcsv function and parsing each and every line.. But I get a timeout error everytime. The process is too slow and data is oly partially imported. Is there any way out to make the data import faster and more efficient?

```
if(isset($_POST['submit']))
{

 $fname = $_FILES['sel_file']['name'];
 $var = 'Invalid File';
 $chk_ext = explode(".",$fname);

 if(strtolower($chk_ext[1]) == "csv")
 {

     $filename = $_FILES['sel_file']['tmp_name'];
     $handle = fopen($filename, "r");
 $res = mysql_query("SELECT * FROM vpireport");
 $rows = mysql_num_rows($res);
 if($rows>=0)
{
    mysql_query("DELETE FROM vpireport") or die(mysql_error());

    for($i =1;($data = fgetcsv($handle, 10000, ",")) !== FALSE; $i++)
    {
        if($i==1)
        continue;
        $sql = "INSERT into vpireport
                                (item_code,
                                 company_id,
                                 purchase,
                                 purchase_value) 
                                 values
                                (".$data[0].",
                                 ".$data[1].",
                                 ".$data[2].",
                                 ".$data[3].")";
        //echo "$sql";
        mysql_query($sql) or die(mysql_error());
    }
}

 fclose($handle);
?>
 <script language="javascript">
 alert("Successfully Imported!");
 </script>
 <? 
```

} The problem is everytime it gets stuck in between the import process and displays the following errors:

Error 1 : Fatal Error: Maximum time limit of 30 seconds exceeded at line 175.

Error 2 :

You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'S',0,0)' at line 1

This error I m not able to detect...

The file is imported oly partial everytime.. oly around 200 300 lines out of a 10000 lines..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T06:10:44.487

在页面顶部设置：

```
set_time_limit ( 0 ) 
```

它将使页面无休止地运行。但是，不建议这样做，但如果您别无选择，那就无能为力了！

您可以在[此处查阅文档](http://php.net/manual/en/function.set-time-limit.php)。

为了让它更快，您需要检查您发送的各种 SQL 并查看您是否创建了正确的索引。

如果您正在调用用户定义的函数并且这些函数引用全局变量，那么您可以通过将这些变量传递给函数并更改代码以使函数引用那些传递的变量来最小化所花费的时间。引用全局变量比引用局部变量慢。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-19T06:15:07.983

您可以为每 500 行 csv 构建一个批量更新字符串，然后如果您在每行上执行 mysql 插入，则立即执行它。它会更快。

另一种解决方案是读取带有偏移量的文件：

1.  阅读前 500 行，
2.  将它们插入数据库
3.  重定向到 csvimporter.php?offset=500
4.  返回 1\. 步骤，这次读取从偏移量 500 开始的 500 行。

另一种解决方案是将超时限制设置为 0：

```
set_time_limit(0); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-19T06:26:06.613

您可以使用 LOAD DATA INFILE 这是一个 mysql 实用程序，这比 fgetcsv 快得多

更多信息可在

[http://dev.mysql.com/doc/refman/5.1/en/load-data.html](http://dev.mysql.com/doc/refman/5.1/en/load-data.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-19T06:21:11.687

只需在您的 php 导入页面的开头使用这个 @

```
ini_set('max_execution_time',0); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-19T06:23:14.743

如果这是一次性练习，PHPMyAdmin 支持通过 CSV 导入。 [导入-a-csv-file-to-mysql-via-phpmyadmin](http://vegdave.wordpress.com/2007/05/19/import-a-csv-file-to-mysql-via-phpmyadmin/)

他还指出了利用 MySQL 的用户`LOAD DATA LOCAL INFILE`。这是一种将数据导入数据库表的非常快速的方法。[加载数据 Mysql Docs 链接](http://dev.mysql.com/doc/refman/5.0/en/load-data.html)

编辑：

这是一些伪代码：

```
// perform the file upload 
$absolute_file_location = upload_file();

// connect to your MySQL database as you would normally
your_mysql_connection();

// execute the query
$query = "LOAD DATA LOCAL INFILE '" . $absolute_file_location . 
         "' INTO TABLE `table_name`
         FIELDS TERMINATED BY ','
         LINES TERMINATED BY '\n'
         (column1, column2, column3, etc)";
$result = mysql_query($query); 
```

显然，您需要确保良好的 SQL 实践以防止注入等。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-19T07:52:39.023

**问题：**
将数据插入表的方式对性能有巨大影响。对于您的每一条记录，您都会向服务器发送一个 INSERT 请求，15000 个 INSERT 请求是巨大的！

**解决方案:** :
你应该像 mysqldump 那样对数据进行分组。在您的情况下，您只需要三个插入语句而不是 15000，如下所示：

在循环之前写：

`$q = "INSERT into vpireport(item_code,company_id,purchase,purchase_value)values";`

并在循环内将记录连接到查询，如下所示：

```
$q .= "($data[0],$data[1],$data[2],$data[3]),"; 
```

在循环内部检查计数器是否等于 5000 OR 10000 OR 15000 然后将数据插入`vpireprot`表中，然后`INSERT INTO...`再次将 $q 设置为。
运行查询并享受！

# mongodb - Change all my documents nested document value

> ID：10662779
> 
> 赞同：3
> 
> 时间：2012-05-19T06:07:41.557
> 
> 标签：mongodb

In mongos shell how would I go through and change every document in `reviews.category` to "category 2"

My Documents Structure:

```
{
   "_id": ObjectId("4fb3f443b1445d24fc000000"),
   "reviews": {
     "0": {
       "category": "category 1"
    },
     "1": {
       "category": "category 1"
    },
     "2": {
       "category": "category 1"
    },
     "3": {
       "category": "category 1"

    } 
  }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-19T08:43:03.117

您必须自己在应用程序代码中执行此操作，方法是查询文档并遍历所有嵌套文档；然后将其保存回 MongoDB。

为了防止出现这种情况，请查看[http://www.mongodb.org/display/DOCS/Atomic+Operations上的比较和交换部分](http://www.mongodb.org/display/DOCS/Atomic+Operations)

目前有一个开放的票证可以将此功能添加到 MongoDB。您可能想要投票：[https ://jira.mongodb.org/browse/SERVER-1243](https://jira.mongodb.org/browse/SERVER-1243)

# jquery - 访问包含 html 元素的字符串元素

> ID：10662780
> 
> 赞同：1
> 
> 时间：2012-05-19T06:07:48.340
> 
> 标签：jquery, html, dom

我有一个包含 html 元素的字符串，如下所示

```
var elements = "<div class='instance' id=''><h1></h1></div>"; 
```

如何使用它才能做到这样

```
$('instance').prop('id',5);
$('instance h1').html('hello all'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T06:11:08.290

您可以将其直接加载到新的 jQuery 对象中：

```
$(elements).find("h1").html("Hello All").appendTo("body"); 
```

此外，`5`不是有效的`id`- 请不要在`id`值的开头使用数字。

# c - 分配 malloc'ed 数组到 stack'ed 数组

> ID：10662781
> 
> 赞同：2
> 
> 时间：2012-05-19T06:07:56.093
> 
> 标签：c, pointers, malloc, heap-memory, stack-memory

`child_prog()` 我试图从to返回一个数组`main()`。代码如下所示：

```
#include<stdio.h>
#include<stdlib.h>
int* child_prog(int some_input);

void main(void){
  int C[10];
  int some_input;
  C = child_prog(some_input);
}

int* child_prog(int some_input){
  static int out[10];
  // ...
  // ... some wizardry
  return out;
} 
```

现在编译器生成一个错误，指出它不能将返回的值分配给`C`（这是一个类型） （这是一个类型）。确实，当我创建 10 个内存时，该程序运行良好。但我不明白为什么编译器不能将返回的值分配给（一个定义为的数组，因此是一个指针）（一个定义为的数组，因此又是一个指针）。`int[]``child_prog``int*``C``int*``malloc``ints``C``C[10]``child_prog``static int out[10]`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-19T06:09:32.683

1.  您不能分配给数组。你需要`memcpy`它。
2.  `int*`!=`int[]`虽然第一个是可能指向一个s序列的指针**，**第二个**是一个**s序列`int``int`**`int`**
***   您可以使用`int *C;`并传递数组的长度（如果在编译时未知）作为输出参数。*   `static int out[10];`不是`malloc`ed，而是静态的。**

 *** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T06:24:22.560

一种解决方案是将 C 声明为：

```
int *C; 
```

正如 Binyamin 所说，您无法更改数组的地址，因为它是静态分配的，而这正是您要尝试的：

```
C = child_prog(some_input); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-19T06:26:38.090

*   的类型意味着它指向的内存`int []`是`int * const`一个常量，尝试更改它会导致编译器错误。显然不等于`int *`。
*   变量`out`in`child_prog()`是静态分配的，这意味着它不在堆栈上，而是在全局数据部分的某个位置。因此，无论您调用多少次`child_prog()`，您总是会返回相同的内存位置。
*   因此，要复制数组，`memcpy(dest,src,bytes)`如果要保存从`child_prog()`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-19T06:34:14.560

```
#include<stdio.h>
#include<stdlib.h>

#define SUCCESS    0 
#define FAILURE    1 

int child_prog(int some_input, int *output, int output_size);

void main(void){
  int C[10];
  int some_input;
  C = child_prog(some_input, c, 10);
}

int  child_prog(int some_input, int *output, int output_size)
{
  static int source[10];
      ...
      .../*some wizardry*/

  memcpy(output, source, output_size);

     ... if (erronous Condition)
             return FAILURE;
         else

  return SUCCESS;
} 
```**

# ruby - 宝石没有输出预期的文本

> ID：10662785
> 
> 赞同：0
> 
> 时间：2012-05-19T06:08:45.610
> 
> 标签：ruby, rubygems, irb

我已经完成了[本教程的](http://guides.rubygems.org/make-your-own-gem/)**第一个宝石**部分。但是，当我尝试修改我的 hola.rb 时，在**需要更多宝石部分：**

 **```
class Hola
  def self.hi(language = :english)
    translator = Translator.new(language)
    translator.hi
  end
end

require 'hola/translator' 
```

并添加了这个 translate.rb 文件：

```
class Hola::Translator
  def initialize(language)
    @language = language
  end

  def hi
    case @language
    when :spanish
      "hola mundo"
    else
      "hello world"
    end
  end
end 
```

如果我在 IRB 中输入这些命令，我​​应该得到相同的输出：

```
% irb -Ilib -rhola
irb(main):001:0> Hola.hi(:english)
=> "hello world"
irb(main):002:0> Hola.hi(:spanish)
=> "hola mundo" 
```

但是，我没有得到正确的结果。我尝试修改我的 gemspec 并重新安装 gem，但没有成功。你认为我在这种情况下做错了什么？

```
stanley@ubuntu:~/Github/webdev_class/ruby/hola_stanley/lib$ irb -Ilib -rhola
irb(main):001:0> Hola.hi(:english)
=> "hello world"
irb(main):002:0> Hola.hi(:spanish)
=> "hello world"
irb(main):003:0> quit 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T13:58:52.763

我不明白，出了什么问题，但是您确定没有类型并且您请求了您期望的文件吗？

我会稍微修改一下代码：

```
class Hola::Translator
  def initialize(language, exceptions = false)
    @language = language
    @exceptions = exceptions
  end

  def hi
    case @language
    when :spanish
      "hola mundo"
    when :english
      "hello world"
    else
      raise ArgumentError, "Unsupported language #{@language.inspect}" if @exceptions
      "hello world"
    end
  end
end 
```

您支持两种语言：西班牙语和英语。检测到其他语言，如果您收到错误或替代（英文）文本，您可以选择。

您可以从以下方式开始：

```
 class Hola
     def self.hi(language = :english)
       translator = Translator.new(language, true) ## <-- Modified
       translator.hi
     end
   end

   require 'hola/translator' 
```

期望的一个优点：您可以看到，哪个文件真正调用了异常。

其他一些评论：

*   我建议将其定义`Hola`为模块，而不是类。
*   相反，`raise`您可以定义一个记录器并报告错误。

例子：

```
require 'log4r'
module Hola
  LOG = Log4r::Logger.new('Hola')
  class Translator
    def initialize(language)
      @language = language
    end

    def hi
      case @language
      when :spanish
        "hola mundo"
      when :english
        "hello world"
      else
        LOG.error("Unsupported language #{@language.inspect}")
        "hello world"
      end
    end
  end

  def self.hi(language = :english)
    translator = Translator.new(language)
    translator.hi
  end

end #module Hola

p Hola.hi
p Hola.hi(:english)
p Hola.hi(:spanish)
p Hola.hi(:german)

puts "Activate Hola-warnings"
Hola::LOG.outputters << Log4r::StdoutOutputter.new('stdout')
p Hola.hi
p Hola.hi(:english)
p Hola.hi(:spanish)
p Hola.hi(:german) 
```

激活记录器后，您会被告知，如果您有一个类型`:spanish`（这是我所期望的错误）。**

# jquery - 使用 Jquery 设置 Form 元素 - OnClick 事件不会捕获它

> ID：10662786
> 
> 赞同：0
> 
> 时间：2012-05-19T06:08:57.770
> 
> 标签：jquery, forms

我在下面使用下面的样式设置我的复选框和单选按钮。

[http://blogs.digitss.com/javascript/jquery-javascript/jquery-fancy-custom-radio-and-checkbox/](http://blogs.digitss.com/javascript/jquery-javascript/jquery-fancy-custom-radio-and-checkbox/)

在我合并它之后，复选框中的 onclick 事件无法捕获它，

```
 <div class="checkbox" style="background-position: 50% 0px; ">
<input type="checkbox" value="Corn Salsa" name="toppings[]" onClick="showmsg()"></div>

//javascript code
function showmsg()
{
alert("yes its working");
} 
```

我确信我在 javascript 中没有任何错误，因为当我在 firebug 错误控制台中尝试时它没有抛出任何错误，但我知道甚至没有捕获 onclick 事件。:(

那是因为 DIV 标签掩盖了复选框吗？你能指导我如何捕获复选框的 onclick 吗？

编辑：哦不，我只是以这个脚本为例..

但我的问题不是这个：D，我很抱歉 ab，查看下面的 url，你可以看到我使用 jquery 插件来设置复选框的样式，但是 onclick 函数不会调用它。

[http://goo.gl/eGxYL](http://goo.gl/eGxYL)

看上面的网址，

你可以看到工作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T06:13:44.067

```
<script type="text/javascript" >
         function showmsg()
            {
            alert("yes its working">
            }
</script> 
```

是错的。

```
<script type="text/javascript" >
         function showmsg()
            {
            alert("yes its working");
            }
</script> 
```

是正确的。

除此之外，代码应该可以工作。Javascript onClick 事件在正常情况下不会打扰 DOM。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T06:20:23.387

Hiya**演示** [http://jsfiddle.net/y7TZW/](http://jsfiddle.net/y7TZW/)

打字错误：`)`而不是`>`:)

推荐：有没有想过使用`.click`事件？像这个[http://jsfiddle.net/y7TZW/1/](http://jsfiddle.net/y7TZW/1/)（这将在所有复选框中保存 onClick 事件）只是一个建议。

API 点击：http: [//jsfiddle.net/y7TZW/1/](http://jsfiddle.net/y7TZW/1/)

希望这可以帮助，

**代码**

```
<script type="text/javascript">

//javascript code
function showmsg() { 
    alert("yes its working"); 
} 

</script> 
```

# php - SimpleXML 动态元素名称

> ID：10662795
> 
> 赞同：1
> 
> 时间：2012-05-19T06:10:47.403
> 
> 标签：php, simplexml

```
echo $xml->SLOT1->Effect;
echo $xml->SLOT2->Effect;
echo $xml->SLOT3->Effect; 
```

有没有办法通过使用`for`循环来简化这个？我试过了，但它没有回应：

```
for ($x = 1; $x <= 3; $x++) {
   echo $xml->SLOT[$x]->Effect;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T06:23:14.913

您可以使用

```
$xml->{"SLOT".$x}->Effect; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T06:26:32.043

```
for ($x = 1; $x <= 3; $x++) {
   echo $xml->{SLOT.$x}->Effect;
} 
```

# android - 如何取消选中在Android中删除项目的复选框？

> ID：10662798
> 
> 赞同：1
> 
> 时间：2012-05-19T06:11:14.207
> 
> 标签：android, list, listview

在我的应用程序中，单击“删除”按钮后，“订购”页面中的项目将被删除。但是，在 ListView 中也应取消选中已删除的项目。请帮助我取消选中已删除的项目。

我试过了，这是我的代码：

```
 public View getView(final int position, View convertView, ViewGroup parent) 
    {

      final  ViewHolder holder;

        if (convertView == null) 
        {
            convertView = inflater.inflate(R.layout.selecteditemlistview, null);
            holder = new ViewHolder();

            holder.textViewSelectedText = (TextView)convertView.findViewById(R.id.selectedtext);
            holder.price=(TextView)convertView.findViewById(R.id.selectitemprice);
            holder.image=(ImageView)convertView.findViewById(R.id.selectitemimage);
            holder.qty=(EditText)convertView.findViewById(R.id.selectqty);
            holder.total=(TextView)convertView.findViewById(R.id.price);               
            holder.delete = (Button) convertView.findViewById(R.id.delete);

            holder.uncheck = (CheckBox)convertView.findViewById(R.id.bcheck);

            convertView.setTag(holder);
        }
        else 
        {
            holder = (ViewHolder) convertView.getTag();
        }
        String amount=holder.qty.getText().toString();
        final Double price1=Double.parseDouble(itemprice.get(position));
        int qut=Integer.parseInt(holder.qty.getText().toString());
        Double total=(price1*qut);
        holder.textViewSelectedText.setText(arr1.get(position));
        holder.price.setText(itemprice.get(position));
        holder.image.setImageBitmap(itemimage.get(position));
        holder.total.setText(String.valueOf(total));

        holder.delete.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {
                 arr1.remove(position);
                 itemimage.remove(position);
                 itemprice.remove(position);
                 notifyDataSetChanged();
                 holder.uncheck.setChecked(false);
            }

        }); 
```

提前致谢。

这是我的 Logcat：

```
 05-19 12:10:17.355: D/AndroidRuntime(721): Shutting down VM
      05-19 12:10:17.365: W/dalvikvm(721): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
      05-19 12:10:17.375: E/AndroidRuntime(721): FATAL EXCEPTION: main
      05-19 12:10:17.375: E/AndroidRuntime(721): java.lang.NullPointerException
      05-19 12:10:17.375: E/AndroidRuntime(721):    at com.customer.CustomAdapter$1.onClick(CustomAdapter.java:114)
      05-19 12:10:17.375: E/AndroidRuntime(721):    at android.view.View.performClick(View.java:2408)
      05-19 12:10:17.375: E/AndroidRuntime(721):    at android.view.View$PerformClick.run(View.java:8816)
      05-19 12:10:17.375: E/AndroidRuntime(721):    at android.os.Handler.handleCallback(Handler.java:587)
      05-19 12:10:17.375: E/AndroidRuntime(721):    at android.os.Handler.dispatchMessage(Handler.java:92)
      05-19 12:10:17.375: E/AndroidRuntime(721):    at android.os.Looper.loop(Looper.java:123)
      05-19 12:10:17.375: E/AndroidRuntime(721):    at android.app.ActivityThread.main(ActivityThread.java:4627)
      05-19 12:10:17.375: E/AndroidRuntime(721):    at java.lang.reflect.Method.invokeNative(Native Method)
      05-19 12:10:17.375: E/AndroidRuntime(721):    at java.lang.reflect.Method.invoke(Method.java:521)
      05-19 12:10:17.375: E/AndroidRuntime(721):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
      05-19 12:10:17.375: E/AndroidRuntime(721):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
      05-19 12:10:17.375: E/AndroidRuntime(721):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T06:19:07.147

更改以下行的顺序：

```
 notifyDataSetChanged();
             holder.uncheck.setChecked(false); 
```

至

```
 holder.uncheck.setChecked(false);
             notifyDataSetChanged(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T06:24:01.323

试试这个

```
holder.uncheck.setChecked(false);
             notifyDataSetChanged(); 
```

# jquery - 使用 jQuery 删除行

> ID：10662801
> 
> 赞同：1
> 
> 时间：2012-05-19T06:11:58.710
> 
> 标签：jquery

我想要以下功能：

当用户单击任何行时，它将被删除。

我尝试了以下方法，但是有一个问题。如果您单击该行，它会被很好地删除，但是当您通过单击添加行时，`#click`当我单击它时该行不会被删除。

这是我的代码：

**脚本**

```
$(document).ready(function(){
$('#click').click(function(){
    $('#table').append('<tr><td>&nbsp;</td></tr>');
})
$('#remove').click(function(){
    $('#table tr:last').remove();
})
$('#table tr').click(function(){

$(this).remove();

});
}) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-19T06:16:45.893

[`click`](http://api.jquery.com/click)只是转发到[`bind`](http://api.jquery.com/bind)，并且只绑定到*在创建时*`bind`与 jQuery 对象中的元素匹配的内容。您可能想使用它的参数：*[`on`](http://api.jquery.com/on)`selector`*

 *```
$('#table').on('click', 'tr', function() {
    $(this).remove();
}); 
```

**在 JSFiddle 上试试[。](http://jsfiddle.net/hug5H/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T06:17:20.723

[您应该使用on](http://jqapi.com/#p=on) (tr)将点击处理程序绑定到每一行

> .on() 方法将事件处理程序附加到当前选定的元素集

```
$('your-table').on('click','tr',function(){
   $(this).remove();        
}); 
```

**[演示](http://jsfiddle.net/dhirajbodicherla/UQTfS/)**

希望这可以帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-19T06:17:49.437

因为您没有将事件分配给附加的行。尝试像这样附加行：

```
$('#click').click(function(){
    $('#table').append('<tr><td>&nbsp;</td></tr>');
    $('#table tr:last').click(function(){
        $(this).remove();
    });
}) 
```*

# eclipse-plugin - table 从行中获取单元格

> ID：10662802
> 
> 赞同：0
> 
> 时间：2012-05-19T06:12:00.447
> 
> 标签：eclipse-plugin, swt, eclipse-rcp, jface

我有一张 3 行 3 列的表。现在我想添加 2 行的第 2 列单元格的控件。这意味着它是单元格中的文本还是组合框。如何获取第二行的第二列并在 SWT JFace 中动态删除组件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T20:39:24.110

您使用 TableViewer 吗？

获取项目的 SWT 方式首先按行索引，而不是按列索引。获取第二行第三列的文本是这样完成的：

```
table.getItem(1).getText(2); 
```

要显示自定义控件，例如组合框，您必须手动绘制它或使用 SWT 的[TableEditor](http://help.eclipse.org/indigo/index.jsp?topic=/org.eclipse.platform.doc.isv/reference/api/org/eclipse/swt/custom/TableEditor.html)。

另请查看本教程： http: [//www.eclipse.org/articles/Article-Table-viewer/table_viewer.html](http://www.eclipse.org/articles/Article-Table-viewer/table_viewer.html)

# android - Android 中的 InetAddress

> ID：10662805
> 
> 赞同：7
> 
> 时间：2012-05-19T06:12:27.387
> 
> 标签：android

如何在android中打印网站的IP地址？我可以在 netbean 中使用 system.out.println() 运行 inetaddress 并打印它。下面是我的示例编码。

```
public String getHostAddress () {
        InetAddress addr=null;
        try {
            addr= InetAddress.getByName("www.google.com");
        }

        catch (UnknownHostException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
            }
        return addr.getHostAddress();
    } 
```

它总是显示不幸的是，您的程序已停止。可能知道有什么办法可以在android中获取访问网站的IP地址吗？

```
05-19 14:22:39.008: I/dalvikvm(1062): threadid=3: reacting to signal 3
05-19 14:22:39.049: I/dalvikvm(1062): Wrote stack traces to '/data/anr/traces.txt'
05-19 14:22:39.688: I/dalvikvm(1062): threadid=3: reacting to signal 3
05-19 14:22:39.828: I/dalvikvm(1062): Wrote stack traces to '/data/anr/traces.txt'
05-19 14:22:39.929: D/AndroidRuntime(1062): Shutting down VM
05-19 14:22:39.948: W/dalvikvm(1062): threadid=1: thread exiting with uncaught exception (group=0x409c01f8)
05-19 14:22:40.039: E/AndroidRuntime(1062): FATAL EXCEPTION: main
05-19 14:22:40.039: E/AndroidRuntime(1062): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.android.destinationurl/com.android.destinationurl.DestinationURL}: android.os.NetworkOnMainThreadException
05-19 14:22:40.039: E/AndroidRuntime(1062):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
05-19 14:22:40.039: E/AndroidRuntime(1062):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
05-19 14:22:40.039: E/AndroidRuntime(1062):     at android.app.ActivityThread.access$600(ActivityThread.java:123)
05-19 14:22:40.039: E/AndroidRuntime(1062):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
05-19 14:22:40.039: E/AndroidRuntime(1062):     at android.os.Handler.dispatchMessage(Handler.java:99)
05-19 14:22:40.039: E/AndroidRuntime(1062):     at android.os.Looper.loop(Looper.java:137)
05-19 14:22:40.039: E/AndroidRuntime(1062):     at android.app.ActivityThread.main(ActivityThread.java:4424)
05-19 14:22:40.039: E/AndroidRuntime(1062):     at java.lang.reflect.Method.invokeNative(Native Method)
05-19 14:22:40.039: E/AndroidRuntime(1062):     at java.lang.reflect.Method.invoke(Method.java:511)
05-19 14:22:40.039: E/AndroidRuntime(1062):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
05-19 14:22:40.039: E/AndroidRuntime(1062):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
05-19 14:22:40.039: E/AndroidRuntime(1062):     at dalvik.system.NativeStart.main(Native Method)
05-19 14:22:40.039: E/AndroidRuntime(1062): Caused by: android.os.NetworkOnMainThreadException
05-19 14:22:40.039: E/AndroidRuntime(1062):     at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1099)
05-19 14:22:40.039: E/AndroidRuntime(1062):     at java.net.InetAddress.lookupHostByName(InetAddress.java:391)
05-19 14:22:40.039: E/AndroidRuntime(1062):     at java.net.InetAddress.getAllByNameImpl(InetAddress.java:242)
05-19 14:22:40.039: E/AndroidRuntime(1062):     at java.net.InetAddress.getByName(InetAddress.java:295)
05-19 14:22:40.039: E/AndroidRuntime(1062):     at com.android.destinationurl.DestinationURL.getHostAddress(DestinationURL.java:57)
05-19 14:22:40.039: E/AndroidRuntime(1062):     at com.android.destinationurl.DestinationURL.onCreate(DestinationURL.java:40)
05-19 14:22:40.039: E/AndroidRuntime(1062):     at android.app.Activity.performCreate(Activity.java:4465)
05-19 14:22:40.039: E/AndroidRuntime(1062):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
05-19 14:22:40.039: E/AndroidRuntime(1062):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
05-19 14:22:40.039: E/AndroidRuntime(1062):     ... 11 more
05-19 14:22:40.248: I/dalvikvm(1062): threadid=3: reacting to signal 3
05-19 14:22:40.283: I/dalvikvm(1062): Wrote stack traces to '/data/anr/traces.txt'
05-19 14:22:40.608: I/dalvikvm(1062): threadid=3: reacting to signal 3
05-19 14:22:40.698: I/dalvikvm(1062): Wrote stack traces to '/data/anr/traces.txt'
05-19 14:22:42.078: I/Process(1062): Sending signal. PID: 1062 SIG: 9 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-19T06:25:49.610

简单地，

这是您在 URL 上的错误，请更正它..

**“www.google.com”**您的网址中有 4 个 w...

并在您的 android 应用程序的清单文件中添加 Use-Permission `<uses-permission android:name="android.permission.INTERNET">` ..

这个是对的。。

`addr = InetAddress.getByName("www.google.com");`

**编辑：**用于`AsyncTask`网络操作

```
String netAddress = null;
 try
  {
   netAddress = new NetTask().execute("www.google.com").get();
  }
  catch (Exception e1)
   {
    e1.printStackTrace();
   } 
```

而这个是**NetTask**类..

```
public class NetTask extends AsyncTask<String, Integer, String>
    {
        @Override
        protected String doInBackground(String... params)
        {
            InetAddress addr = null;
            try
            {
                addr = InetAddress.getByName(params[0]);
            }

            catch (UnknownHostException e)
            {
                            e.printStackTrace();
            }
            return addr.getHostAddress();
        }
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-19T06:25:38.893

**您在wwww** .google.com中输入了错误的 URL 。

```
addr= InetAddress.getByName("www.google.com"); 
```

更正后它起作用了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-19T06:17:10.543

确保您拥有所需的所有权限。也许您的应用程序停止是因为它没有适当的权限。检查您的 XML 清单中是否具有 Internet 访问权限。

```
<uses-permission android:name="android.permission.INTERNET"> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-09-30T14:18:55.517

这是因为您正在主线程上进行网络调用。

```
String address = "";
AsyncTask.execute(new Runnable() {
    @Override
    public void run() {
        address = InetAddress.getByName("www.google.com");
    }
}); 
```

# ruby-on-rails - Rails 3教程第11章HTML未显示关注/取消关注按钮

> ID：10662809
> 
> 赞同：1
> 
> 时间：2012-05-19T06:13:51.283
> 
> 标签：ruby-on-rails, ruby-on-rails-3, railstutorial.org

这是我的 show.html.erb 文件。

```
<% provide(:title, @user.name) %>
<div class="row">
    <aside class="span4">
        <section>
            <h1>
                <%= gravatar_for @user %>
                <%= @user.name %>
            </h1>
        </section>
        <section>
            <%= render 'shared/stats' %>
        </section>
    </aside>
    <div class="span8">
        <%= render 'follow_form' if signed_in? %>
    <% if @user.microposts.any? %>
      <h3>Microposts (<%= @user.microposts.count %>)</h3>
      <ol class="microposts">
        <%= render @microposts %>
      </ol>
      <%= will_paginate @microposts %>
    <% end %>
  </div>
</div> 
```

_follow.html.erb 部分文件：

```
<%= form_for(current_user.relationships.build(followed_id: @user.id),
             remote: true) do |f| %>
  <div><%= f.hidden_field :followed_id %></div>
  <%= f.submit "Follow", class: "btn btn-large btn-primary" %>
<% end %> 
```

_unfollow.html.erb 部分文件：

```
<%= form_for(current_user.relationships.find_by_followed_id(@user),
             html: { method: :delete },
             remote: true) do |f| %>
  <%= f.submit "Unfollow", class: "btn btn-large" %>
<% end %> 
```

而我的 _follow_form.html.erb 部分：

```
<% unless current_user?(@user) %>
  <div id="follow_form">
  <% if current_user.following?(@user) %>
    <%= render 'unfollow' %>
  <% else %>
    <%= render 'follow' %>
  <% end %>
  </div>
<% end %> 
```

编辑：我还想说我正在使用 Bootstrap。当我检查用户页面时，两个类 span4 和 span8 都出现了，但是“follow_form”应该是一个完整的空白。

编辑：这个问题是几年前回答的:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T07:08:43.453

我遇到了同样的问题，您可以通过以下更改来纠正此问题：

步骤 1）在 app/views/users/show.html.erb 中更改代码：

```
<div class = "span8">
    <%= render 'follow_form' if signed_in? %>      
        <% if @user.microposts.any? %> 
```

对此：

```
<div class = "span8">
    <%= render 'shared/follow_form' if signed_in? %>      
        <% if @user.microposts.any? %> 
```

步骤 2) 在部分 app/views/shared/_follow_form.html.erb

从此更改代码：

```
<% unless current_user?(@user) %>
  <div id="follow_form">
  <%if current_user.following?(@user) %>
    <%= render 'unfollow' %>
  <% else %>
    <%= render 'follow' %>
  <% end %>
  </div>
<% end %> 
```

对此：

```
<% unless current_user?(@user) %>
  <div id="follow_form">
  <%if current_user.following?(@user) %>
    <%= render 'shared/unfollow' %>
  <% else %>
    <%= render 'shared/follow' %>
  <% end %>
  </div>
<% end %> 
```

# android - 为什么接收 Intent 调用 onPause()

> ID：10662812
> 
> 赞同：0
> 
> 时间：2012-05-19T06:14:20.887
> 
> 标签：android, android-intent, onpause

根据[Android 的 Activity lifecyle](http://developer.android.com/reference/android/app/Activity.html#ActivityLifecycle)，只有在另一个 Activity 调用到前台时才会调用方法 Activity.onPause() 。我的应用程序只有一个活动，它本身是用 android:launchMode="singleTask" 设置的。

根据下面的stackstrace，接收到一个新的Intent会触发Activity.onPause()。

**谁能解释为什么？**

**堆栈跟踪：**

```
android.app.Activity.performPause(Activity.java:3877)
android.app.Instrumentation.callActivityOnPause(Instrumentation.java:1191)
android.app.ActivityThread.performNewIntents(ActivityThread.java:1736)
android.app.ActivityThread.handleNewIntent(ActivityThread.java:1746)
android.app.ActivityThread.access$2300(ActivityThread.java:117)
android.app.ActivityThread$H.handleMessage(ActivityThread.java:982)
android.os.Handler.dispatchMessage(Handler.java:99)
android.os.Looper.loop(Looper.java:130)
android.app.ActivityThread.main(ActivityThread.java:3691)
java.lang.reflect.Method.invokeNative(Native Method)
java.lang.reflect.Method.invoke(Method.java:507)
com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:907)
com.android.internal.os.ZygoteInit.main(ZygoteInit.java:665)
dalvik.system.NativeStart.main(Native Method) 
```

问候，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T03:39:57.200

这种行为是预期的。我查看了 Android 源代码 (v2.3.7)，在收到 Intent 之前，活动已暂停。

# bash - 如何绘制具有三个变量的简单直方图？

> ID：10662813
> 
> 赞同：1
> 
> 时间：2012-05-19T06:14:38.210
> 
> 标签：bash, shell, unix

我是 unix 和 shell 的新手。我想知道如何用三个变量绘制一个简单的直方图，这些变量将从文件中读取。变量是范围从 1 到 100 的随机数，它们将进入 Y 刻度，X 刻度将是 10 分钟的时间戳。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T11:55:52.050

假设数据仅包含整数。

**编辑2：**

```
#!/bin/bash
limit=40
xtoggle=true
pad=5
xtitle='Seconds'
footnote='5 second intervals'
ytitle='Number (1-100)'
printf '  %*s\n' "$((limit/2 + ${#ytitle}/2 + pad))" "$ytitle"

printf ' %*d' "$pad" 0
for ((i = 5; i <= limit; i += 5))
do
    printf '%5d' "$i"
done
printf '\n\n'

while read -r -a data
do

    printf -v bar '%*s' "$limit" ''
    for i in "${data[@]}"
    do
        bar=${bar:0:i}x${bar:i+1}
    done
    if $xtoggle
    then
        xc=''
        xtoggle=false
    else
        xc="${xtitle:x++:1}"
        xtoggle=true
    fi
    printf '%-*s' "$pad" "$xc"
    printf '%s\n' "$bar"
done < bardata
if $xtoggle
then
    printf '\n'
fi
for ((i = x; i <= ${#xtitle}; i++))
do
    printf '%s\n\n' "${xtitle:i:1}"
done
printf '\n%s\n' "$footnote" 
```

有了这些数据：

```
0 5 10
10 13 16
14 3 25
8 4 12
2 20 11
5 17 19
7 8 7
14 19 30
27 22 18
11 19 23
3 33 13
8 5 1
36 18 12 
```

这是输出：

```
 Number (1-100)
     0    5   10   15   20   25   30   35   40

     x    x    x
S              x  x  x
        x          x          x
e        x   x   x
       x        x        x
c         x           x x
            xx
o                  x    x          x
                       x   x    x
n               x       x   x
        x         x                   x
d     x   x  x
                 x     x                 x
s

5 second intervals 
```

**以前的编辑：**

```
while read -r -a data
do

    for i in "${data[@]}"
    do
        printf -v bar '%*s' "$i" ''

        bar=${bar// /*}

        printf '%s\n' "$bar"
    done
    printf '\n'
done < inputfile 
```

对于此数据：

```
10 12 13
4 5 6
8 4 7 
```

这是输出：

```
**********
************
*************

****
*****
******

********
****
******* 
```

**原始答案**（下面的间接技巧都不是必需的。）：

```
while read -r -a data
do

    for i in "${!data[@]}"
    do
        printf -v "bar$i" '%*s' "${data[i]}" ''

        temp=bar$i
        declare "bar$i"=${!temp// /*}

        printf '%s\n' "${!temp}"
    done
    printf '\n'
done < inputfile 
```

# android - 在 ICS 中更改 tabhost 工作的背景但在较低版本中导致问题

> ID：10662818
> 
> 赞同：0
> 
> 时间：2012-05-19T06:15:49.773
> 
> 标签：android, transparent, android-tabhost, tabwidget, android-4.0-ice-cream-sandwich

为了使tabhost透明，我实现了以下代码..

```
 for(int i = 0; i < th.getTabWidget().getTabCount(); i++)
    {
    th.getTabWidget().getChildAt(i).setBackgroundColor(Color.TRANSPARENT);
    } 
```

这在 ICS 中成功地将所有选项卡的背景更改为透明，但是当我在 2.2 和 2.3 上测试它时，前 3 个选项卡背景是透明的，最后 3 个不是（我总共有 6 个选项卡）（顺便说一下，第一个 3 个选项卡是该活动开始时出现的那些）

是什么原因造成的，我该如何解决...请帮助..

应用您的建议后，这就是我包含在代码中的内容，

```
 th.setOnTabChangedListener(new OnTabChangeListener(){
        @Override
        public void onTabChanged(String tabId) {
            manageTabBackgrounds();
        }

        private void manageTabBackgrounds() {
            // TODO Auto-generated method stub
            for(int i = 0; i < th.getTabWidget().getTabCount(); i++)
            {
            th.getTabWidget().getChildAt(i).setBackgroundColor(Color.TRANSPARENT);
            }
        }           
    }); 
```

然而，这似乎对标签没有影响......请指导..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T08:14:57.313

确保你在TabChanged上做...

将您拥有的内容粘贴到函数中（例如，“manageTabBackgrounds”，然后：

```
yourTabHostInstance.setOnTabChangedListener(new OnTabChangeListener(){
    @Override
    public void onTabChanged(String tabId) {
        manageTabBackgrounds();
    }           
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T14:19:58.103

这终于对我有用了..

```
 th.setOnTabChangedListener(new OnTabChangeListener(){
        @Override
        public void onTabChanged(String tabId) {
            // TODO Auto-generated method stub
             for(int i=0;i<th.getTabWidget().getChildCount();i++)
                {
                   th.getTabWidget().getChildAt(i).setBackgroundColor(Color.TRANSPARENT); //unselected
                }
                th.getTabWidget().getChildAt(th.getCurrentTab()).setBackgroundColor(Color.TRANSPARENT); // selected
        }
        }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-19T13:42:39.090

你试过这个吗？

```
<TabWidget
        android:id="@android:id/tabs"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:background="@color/transparent">
    </TabWidget> 
```

# excel - 正则表达式匹配 Excel 公式

> ID：10662823
> 
> 赞同：0
> 
> 时间：2012-05-19T06:16:52.477
> 
> 标签：excel

在我要解决的一个问题中，我必须用等效的单元格引用替换 Excel 公式中的范围值，例如，如果我有一个 Excel 公式：

=总和（F10：F14）

我必须将其替换为：

=总和（F10，F11，F12，F13，F14）。

我正在尝试匹配有助于我找到的正则表达式

1.  如果 Excel 公式已使用包含以下模式的模式定义：“Sum”和“：”
2.  提取范围内的单元格，如 F10:F14

不知何故，我被困在第 1 点:-)

为此，我创建了以下模式：

```
Regex formulaMatcher = new Regex(@"=*SUM\([\w]*[\w,]*[\w]+:[\w]+[\w]*[\w,]*\)*");
foreach (Match m in formulaMatcher.Matches("=SUM(F55,F151:F159)"))
    m.Value.Dump(); 
```

现在，上述模式非常适用于公式：

```
 // =SUM(F15,F25,F31:F35)
        // =SUM(F10:F12,F26,F31)
        // =SUM(F45,F55,F61:F63,F40)
        // =F14-SUM(F16:F17)
        // =SUM(F35:F37)
        // =SUM(F10:F13)-F11
        // =SUM(F27:F29)/3
        // =F19-F21+SUM(F22:F23)
        // =ROUND(F43-SUM(F23:F42),2)
        // =SUM(F174:F178)+F134+F120+F97 
```

但它失败了：SUM(F81:F89,F105:F113,F128:F135)，即公式中涉及多个范围运算符的情况

请帮助我找出如何实现上述结果？

干杯，阿尼尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T19:47:16.823

Excel 可以让您拥有单元格块和单个单元格，这些单元格可以作为 @mgibsonbr 的答案，我可以：

```
^=SUM\((\w+\d+)((:\w+\d+)|(,\w+\w+)*)((,\w+\d)((:\w+\d+)|(,\w+\w+)*))*\)$ 
```

这也确保您只有两个单元格用于一个范围......即。不是 a2:a3:a4

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T06:34:13.810

首先，我建议使用更简单的正则表达式，例如：

```
Regex formulaMatcher = new Regex(@"=*SUM\(.*?[\w]+:[\w]+.*?\)*"); 
```

（我不知道 excel 是否支持非贪婪量词，如果不支持，使用`*`代替`*?`，也可以工作 - 但效率较低）

这也将匹配除间隔之外`SUM`的**任何**内容，这可能是也可能不是您想要的。如果它**必须**是单元格或间隔，则正则表达式将变得更加复杂，但它是可行的：您只需将其分解为这两个简单的情况或一起：

*   一个间隔、零个或多个间隔或以逗号开头的单元格；
    *   `\w+:\w+(,\w+(:\w+)?)*`
*   一个单元格，零个或多个以逗号开头的单元格，一个以逗号开头的间隔，零个或多个间隔或以逗号开头的单元格）。
    *   `\w+(,\w+)*,\w+:\w+(,\w+(:\w+)?)*`

**编辑：**没关系，您可以将其简化为：

*   零个或多个以逗号结尾的单元格
    *   `(\w+,)*`
*   一个间隔
    *   `\w+:\w+`
*   零个或多个以逗号开头的单元格或间隔
    *   `(,\w+(:\w+)?)*`

结果：

```
Regex formulaMatcher = new Regex(@"=*SUM\((\w+,)*\w+:\w+(,\w+(:\w+)?)*\)*"); 
```

PS我不确定您是否必须转义命令或冒号。

# iphone - iPhone中的“wait_fences：未能收到回复：10004003”

> ID：10662825
> 
> 赞同：0
> 
> 时间：2012-05-19T06:17:17.583
> 
> 标签：iphone, ios, xcode

当我在 UIAlertView 的单击事件中弹出到根视图控制器时，我的应用程序崩溃。

我的代码如下：

```
- (void)alertView:(UIAlertView *)actionSheet clickedButtonAtIndex:(NSInteger)buttonIndex {
    if (buttonIndex == 0 && ([errorCodeNew  isEqualToString:@"IPH_I_LGN_002"])){

     [self.navigationController popToRootViewControllerAnimated:YES];

    AppDelegate *appDelegate =  (AppDelegate*)[[UIApplication sharedApplication] delegate];
    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
    [defaults setObject:@"3" forKey:@"CurrentSize"];

    NSMutableArray *nsmarrJpName;
    DatabaseLogic *logic = [[DatabaseLogic alloc] init];
    appDelegate.anket_id = [logic getAnketID];

    nsmarrJpName = [[NSMutableArray alloc]initWithArray:[logic getDetailScreenItems:[logic getAnketID]] copyItems:YES];

    for (int i = 0;  i < [nsmarrJpName count]; i++) {
        NSString *strKey = [nsmarrJpName objectAtIndex:i];
        [defaults setObject: [NSNumber numberWithBool:YES] forKey:strKey];
        NSLog(@"key : %@", strKey);
    }

    [nsmarrJpName removeAllObjects];
    [nsmarrJpName release];

    appDelegate.strUserFlg = [logic getUserType];

    [logic release]; logic = nil;

    //start download process
    [[NSNotificationCenter defaultCenter] postNotificationName:LOGIN_COMPLETE_NOTIFICATION object:self userInfo:nil];
    }else{
        NSLog(@"cancel");
    }
} 
```

我试过`clickedButtonAtIndex`用`didDismissWithButtonIndex`方法替换。但我没有得到任何结果。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T06:46:40.880

尝试将 [self.navigationController popToRootViewControllerAnimated:YES] 移动到函数的底部（即在所有其他代码运行之后）。

# android - 在后台执行位图转换

> ID：10662830
> 
> 赞同：0
> 
> 时间：2012-05-19T06:18:07.677
> 
> 标签：android, gridview, bitmap

在我的应用程序中，我想在后台执行位图转换，因为我面临内存泄漏问题。我知道，它可以用异步任务完成，但不知道如何做到这一点。下面我发布我的代码。

```
package com.android.album3;

import java.io.File;
import java.net.MalformedURLException;
import java.net.URL;
import java.util.ArrayList;
import android.app.Activity;
import android.app.ProgressDialog;
import android.content.Intent;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.os.Bundle;
import android.os.Environment;
import android.util.Log;
import android.view.View;
import android.view.Window;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.GridView;

public class Album3Activity extends Activity 
{
File [] mediaFiles;
File imageDir;
static GridView gridView;
ImageAdapter adapter;
Intent in;
String name = null;
ArrayList<Bitmap> bmpArray = new ArrayList<Bitmap>();
ArrayList<String> fileName = new ArrayList<String>();
public static final String TAG = "Album3Activity";
public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    imageDir = new File(Environment.getExternalStorageDirectory().toString()+
             "/diplomat");
    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    if(imageDir.exists())
    {
        setContentView(R.layout.grid);
        mediaFiles = imageDir.listFiles();
        //Log.d("Length of images",""+mediaFiles.length);
        for(File file : mediaFiles)
        {
            bmpArray.add(convertToBitmap(file));
            fileName.add(readFileName(file));
            Log.d(TAG + "bmpArray Size", ""+bmpArray.size());
            Log.d(TAG, "call to convertToBitmap");
        }//for

        adapter = new ImageAdapter(this, bmpArray, fileName);
        gridView = (GridView)findViewById(R.id.gridview);
        gridView.setAdapter(adapter);
        gridView.setOnItemClickListener(new OnItemClickListener() 
        {

        public void onItemClick(AdapterView<?> arg0, View arg1, int position,
                long arg3) 
        {
            in = new Intent(getApplicationContext(), FullScreen.class);
            in.putExtra("id", position);
            startActivity(in);
        }//onItemClick
    });
    }//if
    else
    {
        setContentView(R.layout.no_media);
        //Toast.makeText(Album3Activity.this, "No files available", Toast.LENGTH_SHORT).show();
    }//else
}//onCreate

public static Bitmap convertToBitmap(File file) 
{
    URL url = null;
    try 
    {
        url = file.toURL();
    }//try 
    catch (MalformedURLException e1) 
    {
        Log.d(TAG, e1.toString());
    }//catch

    Bitmap bmp = null;
    try
    {
       bmp = BitmapFactory.decodeStream(url.openStream());
       //bmp.recycle();
    }//try
    catch(Exception e)
    {
        Log.d(TAG, "Exception: "+e.toString());
    }//catch
    return bmp;
}//convertToBitmap

public String readFileName(File file)
{
    String name = file.getName();
    return name;
}//readFileName
}//class 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T06:42:21.450

您正面临类似内存的问题，因为您的图像尺寸很大，您已经像这样使用 BitmapFactory 解码此图像

```
BitmapFactory.Options option = new BitmapFactory.Options();
                option.inSampleSize = 2;//any integer value greater than 1
                Bitmap bm = BitmapFactory.decodeFile(root.getPath() + "/"
                        + imageName,option);
                imageView.setImageBitmap(bm); 
```

如果设置为大于 1 的值，则请求解码器对原始图像进行二次采样，返回较小的图像以节省内存。样本大小是对应于解码位图中的单个像素的任一维度中的像素数。例如， inSampleSize == 4 返回的图像是原始宽度/高度的 1/4，像素数的 1/16。任何 <= 1 的值都被视为 1。注意：解码器将尝试满足此请求，但生成的位图可能具有与所请求的尺寸不同的尺寸。此外，2 的幂通常更快/更容易让解码器兑现。

# ios - Core Data 多对多关系和数据完整性

> ID：10662831
> 
> 赞同：0
> 
> 时间：2012-05-19T06:18:08.630
> 
> 标签：ios, core-data, many-to-many

我正在使用 Core Data 和多对多关系：一个建筑物可以有多个部门，一个部门可以在多个建筑物中。之前使用过数据库，我不确定如何在 Core Data 中实现这一点，但我在 Core Data Programming Guide 中找到了这一点：

> 如果您有数据库管理背景并且这引起您的担忧，请不要担心：如果您使用 SQLite 存储，Core Data 会自动为您创建中间连接表。

但是，实际上并没有任何数据完整性。我尝试插入一些建筑对象，它们现在只有一个属性（数字），并且每次我设置它相关的部门对象（关系）。这导致数据库包含具有相同建筑物编号的多个建筑物对象，所有这些都与不同的部门对象相关。理想情况下，每个建筑物编号将有一个对象，其中包含位于其中的所有不同部门。

所以，我的问题是：Core Data 能否以某种方式保持数据完整性，或者我应该在插入之前检查具有该编号的建筑对象是否已经存在？看起来我必须手动检查它，但如果 Core Data 可以为我做这件事会很酷。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T06:30:17.283

Core Data 为您维护数据完整性。我可以向您保证（根据 Core Data 的大量经验）您不必手动检查完整性。仔细检查您的关系和删除规则是如何在 Xcode 的核心数据模型编辑器中设置的。我无法确切说明您提供的详细信息可能有什么问题，但是如果您四处寻找，您会发现它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T10:30:08.413

melsam**写**的是对的。除了他的回答，我建议你使用反向关系。关于逆，Apple 说：

> 您通常应该对两个方向的关系进行建模，并适当地指定反向关系。如果进行更改，Core Data 使用此信息来确保对象图的一致性（请参阅“操作关系和对象图完整性”）。有关您可能不想在两个方向上建模关系的一些原因以及如果不这样做可能出现的一些问题的讨论，请参阅“单向关系”。</p>

要理解的一个关键点是，当您使用 Core Data 时，您使用的是对象。因此，当您保存上下文或明确说明要处理的上下文还处理未决更改时，完整性标准就会得到解决（请参阅`processPendingChanges`方法）。

关于您的问题，我想您必须创建一个获取请求并检索您正在寻找的对象（例如，您可以为每个对象提供一个特定的 id 并使用您想要的 id 设置一个谓词）。如果 fetch 请求检索到一些对象，那么您可以更新它们。如果没有，请使用 . 创建一个新对象`insertNewObjectForEntityForName:inManagedObjectContext:`。最后保存上下文。

我建议您阅读[Efficiently Importing Data](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreData/Articles/cdImporting.html#//apple_ref/doc/uid/TP40003174-SW1)。

希望能帮助到你。

# php - 如何更改表中的 SHA1 和 SALT 加密密码

> ID：10662834
> 
> 赞同：0
> 
> 时间：2012-05-19T06:18:45.557
> 
> 标签：php, zend-framework, sha1, salt

我在 mysql 中有一个表，其中包含字段 id、用户名、密码和盐：

*例子：*

**编号**：1

**用户名**：管理员

**密码**：11ca8949f9462890f2535c9a43ac52b8c10a9342

**盐**：8d17f0de29daed0f3b4cd38f980683d01ec50729

没有。像这样的记录。

我的问题是：如何更改该表中所有用户的密码。

我想为每个用户创建一个新密码。这意味着我需要一个新的 SHA1 哈希和盐。我怎样才能做到这一点。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T06:38:54.450

假设您希望每个人都拥有相同的固定密码，并且哈希仅由连接密码和盐的 SHA1 校验和组成，这将是所有需要的：

```
UPDATE users SET password = SHA1(CONCAT('newpassword', salt)); 
```

这保留了原始的盐（这不是一个真正的问题），但是给每个人提供相同的密码当然是非常不安全的。如果您想为每个用户生成不同的密码，您将需要生成代码并将其单独发送给他们，并且该代码也可能会更新每个用户的散列密码条目。

或者，您可以临时添加一列“newpassword”，使用类似于上面使用该列的 UPDATE 命令，然后删除它。但这并不能解决如何为用户获取新密码的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T06:32:44.900

如果您在数据库中没有明文形式的原始密码（您当然不应该！），这不会是一个一步的过程。

您需要做的是添加另一列，并为其命名，如“hashtype” - 此名称表示条目是否已从旧哈希升级到新哈希。

然后在您的登录代码中，在用户提交密码并正确地对存储的数据库哈希进行哈希处理后，使用用户输入的密码根据您的新方法生成一个新哈希，更新数据库中的哈希，并将哈希类型设置为新.

否则，您可以做一些疯狂的事情，例如清除所有用户密码并通过电子邮件或其他方式强制重置密码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-05T05:28:22.583

如果你有登录代码，那么你可以调试它并检查它是如何工作的。为其创建适当的脚本并使用以下查询更新密码。

```
update be_users set password=SHA1( CONCAT(  '$sha1',  '$newsalt' )), salt='your salt' where username='your username'; 
```

**试试这个**

# java - Collections.synchronizedMap

> ID：10662835
> 
> 赞同：4
> 
> 时间：2012-05-19T06:18:48.363
> 
> 标签：java

来自[javadocs](http://docs.oracle.com/javase/7/docs/api/java/util/Collections.html#synchronizedMap%28java.util.Map%29)

```
Map m = Collections.synchronizedMap(new HashMap());
      ...
  Set s = m.keySet();  // Needn't be in synchronized block
      ...
  synchronized(m) {  // Synchronizing on m, not s!
      Iterator i = s.iterator(); // Must be in synchronized block
      while (i.hasNext())
          foo(i.next());
  } 
```

两个查询：

1) m.keySet() 返回的 Set 也是一个集合包装器还是只是一个不同步的集合？

**编辑：**

2）是否有必要在 m in 上同步

```
 synchronized(m) {  // Synchronizing on m, not s! 
```

我们不能在 s 而不是 m 上同步吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-19T06:28:37.463

1：是的，它返回一个与 Map 共享互斥锁的同步集。

2：是的，您需要在迭代时手动锁定。如果您在调用 next() 之间不进行更改，您仍然会遇到问题。请记住，HashMap 规范的一部分是，如果另一个线程（例如，`m.put("foo", "bar");` 在您的两次调用之间进行了一次调用） `i.next()`，`next()`则将抛出 ConcurrentModificationException。为了防止这种情况，您锁定整个地图，这样在您完成迭代器之前没有人可以更改它。仅锁定集合不会阻止任何人添加到地图中。

如果您需要在可能发生并发访问时进行迭代，您应该查看 ConcurrentMap 的实现以使您的生活更轻松。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-19T06:27:51.187

1) 返回的集合是一个`SynchronizedSet`使用相同互斥锁锁定的集合。

2)~~映射不会在自身上同步，而是在单独的互斥对象上同步，因此在映射上同步不会阻止有权访问映射的其他线程对其进行修改。这只有在修改地图的*所有*代码都在地图上同步时才有效。~~ 地图确实在自身上同步，但奇怪的是使用单独的`mutex`变量引用自身。因此，在地图上同步将防止通过同步包装器对地图进行其他修改。请注意，该方法返回的同步集合中使用了相同的互斥锁`keySet()`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-19T06:31:24.693

编辑：之前错了。

1.  它是`SynchronizedSet`SynchronizedMap 实例本身的同步对象。
2.  有必要在 m 上进行同步，以确保您在循环中时地图不会从您下方更改。

请记住 - Set 只是原始地图支持的视图。所以我们要确保地图不会改变。

[查看代码](http://www.docjar.org/html/api/java/util/Collections.java.html)很有启发性。1999 行有 SynchronizedMap 的声明。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T08:00:54.877

只需使用一些源代码完善答案。

[http://www.docjar.com/html/api/java/util/Collections.java.html](http://www.docjar.com/html/api/java/util/Collections.java.html)

1）是的，它是一个集合包装器（私有静态类的一个实例`SynchronizedSet`），如类代码中所示`line 2054`。`Collections`

```
2051        public Set<K> keySet() {
 2052               synchronized (mutex) {
 2053                   if (keySet==null)
 2054                       keySet = new SynchronizedSet<>(m.keySet(), mutex);
 2055                   return keySet;
 2056               }
 2057           } 
```

请注意，此 SynchronizedSet 使用与所返回的 SynchronizedMap 相同的互斥锁 `Collections.synchronizedMap(new HashMap());`。

2) 必须在 m 而不是 s 上进行同步，因为返回的 Set(SynchronizedSet) 中的所有操作`Set s = m.keySet();`都在同一个互斥锁（返回的同步映射）上同步，而不是在返回的集合上同步。这可以从以下几点看出：

a) 返回的 Map (SynchronizedMap) 中的所有操作 `Collections.synchronizedMap(new HashMap());`都在返回的 map iteslf 上同步为互斥锁，从以下代码行可以看出，从 2004、2010、2035 行可以看出。：

```
1992       public static <K,V> Map<K,V> synchronizedMap(Map<K,V> m) {
 1993           return new SynchronizedMap<>(m);
 1994       } 
```

SynchronizedMap 类定义为：

```
1999        private static class SynchronizedMap<K,V>
 2000           implements Map<K,V>, Serializable {
 2001          ...
 2002   
 2003           private final Map<K,V> m;     // Backing Map
 2004           final Object      mutex;        // Object on which to synchronize
               ...
               SynchronizedMap(Map<K,V> m) {
 2007               if (m==null)
 2008                   throw new NullPointerException();
 2009               this.m= m;
 2010               mutex = this;
 2011           }
                ...
 2034           public V put(K key, V value) {
 2035               synchronized (mutex) {return m.put(key, value);}
 2036           }
                ...
            } 
```

b）当我们通过 map 迭代时，`Iterator i = s.iterator();` 我们应该在 m 而不是 s 上同步它，因为返回的 Set(SynchronizedSet) in`Set s = m.keySet();`中的操作在同一个互斥锁（返回的同步映射）上同步，而不是在 s 上同步，如第 2054 行所示。

```
2051        public Set<K> keySet() {
 2052               synchronized (mutex) {
 2053                   if (keySet==null)
 2054                       keySet = new SynchronizedSet<>(m.keySet(), mutex);
 2055                   return keySet;
 2056               }
 2057           } 
```

# nsimageview - 将标题和图像都添加到 NSStatusItem

> ID：10662839
> 
> 赞同：1
> 
> 时间：2012-05-19T06:19:16.343
> 
> 标签：nsimageview, nsstatusitem, nsstatusbar

我一直在试图弄清楚如何将文本和图像添加到 NSStatusItem。这是我正在尝试做的一个模型：

[http://cl.ly/GjTO](http://cl.ly/GjTO)

我尝试使用 statusIetm.view 并添加子视图，我尝试设置 title 和 image 属性以获得乐趣，即使我知道这不起作用。'我不是试图添加一个自定义窗口的状态项，但在第一张图片中找到的温度和条件图标。如果有人有任何想法，我很想听听他们的意见。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-07T19:22:14.580

```
statusItem = [[NSStatusBar systemStatusBar] statusItemWithLength:NSVariableStatusItemLength];
NSImage *statusImage = [NSImage imageNamed:@"icon.png"]; // must be 19x19 max
[statusItem setImage:statusImage];
NSImage *altStatusImage = [NSImage imageNamed:@"icon.png"];
[statusItem setAlternateImage:altStatusImage];
[statusItem setHighlightMode:YES];
[statusItem setAttributedTitle:attrString];
[statusItem setTitle:@"Loading..."];
[statusItem setMenu:statusMenu]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-08-05T23:59:50.620

您可以在没有这样的自定义视图的情况下执行此操作：

```
button.imagePosition = NSControl.ImagePosition.imageLeft 
```

*感谢[这个答案。](https://stackoverflow.com/a/56368854/486182)*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-19T06:24:09.577

尝试创建自定义 NSView 并使用 [statusItem setView:myCustomView] 进行设置；

# java - xmlSignature java中的XSLT转换？

> ID：10662841
> 
> 赞同：9
> 
> 时间：2012-05-19T06:19:34.897
> 
> 标签：java, xslt, xml-signature

我有一个 XML 文档。我正在使用 xmlsignature 对文档的一部分进行签名。在找到摘要之前，*我想应用 XSLT 转换。*

根据我阅读的内容，XSLT 将**XML 文档转换为另一种格式（也可以是 XML）。**现在我很困惑，
**转换后的新文件在哪里可用？**

**如果我想将它显示给用户，如何从这个新创建的文档中检索值？**

**我的 XML 文档**

```
<r1>
 <user>asd</user>
 <person>ghi</person>
</r1> 
```

**转换代码**

```
Transform t=fac.newTransform(Transform.XPATH,new XPathFilterParameterSpec("/r1/user")); 
```

根据 xpath 转换，只要用户元素的值发生更改，就不应该验证 xmlsignature。如果 person 元素的值发生变化，则应验证 Signature。但是当我更改 person 元素的值时，签名不会被验证。为什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-28T11:55:17.123

签署文档时使用的 xslt 转换与计算签名时如何选择源 XML 中的节点有关。

[Dave的](https://stackoverflow.com/users/3095/dave)[这个问题/答案](https://stackoverflow.com/a/3748642/993133)与使用xpath2 对 XML 文档的部分进行签名有关。[这个答案中 Sean Mullans 的帖子的链接](http://markmail.org/message/tdgioazns7l4yg6d#query:java%20xpath%20xml%20dsig%20bug+page:1+mid:tgw5kr7uscwkcran+state:results)表明xpath2 更适合签署文档的某些部分，因为 xpath 表达式的评估是按节点完成的。

因此，基于[sun dsig 示例](http://docs.oracle.com/javase/6/docs/technotes/guides/security/xmldsig/XMLDigitalSignature.html)，您可以使用以下方法替换**参考**创建：

```
List<XPathType> xpaths = new ArrayList<XPathType>();
xpaths.add(new XPathType("//r1/user", XPathType.Filter.INTERSECT));

Reference ref = fac.newReference
  ("", fac.newDigestMethod(DigestMethod.SHA1, null),
        Collections.singletonList
          (fac.newTransform(Transform.XPATH2, 
                  new XPathFilter2ParameterSpec(xpaths))),
             null, null); 
```

这允许**//r1/user**受到签名保护，而文档的其余部分可以被更改。

xpath/xpath2 选择的问题是可以为**/some/node/that/does/not/exist**生成签名。您修改测试文档并确保签名按您期望的方式工作是正确的。

您可以在测试程序中通过生成签名然后在验证之前篡改 xml 节点来测试文档：

```
NodeList nlt = doc.getElementsByTagName("user");
nlt.item(0).getFirstChild().setTextContent("Something else"); 
```

* * *

xpath 选择器的更可靠替代方法可能是将 ID 放在您希望签名的 xml 文档元素上，例如：

```
<r1>
 <user id="sign1">asd</user>
 <person>ghi</person>
</r1> 
```

然后将此 ID 引用为封装传输的第一个参数中的 URI：

```
Reference ref = fac.newReference
  ("#sign1", fac.newDigestMethod(DigestMethod.SHA1, null),
    Collections.singletonList
      (fac.newTransform(Transform.ENVELOPED,(TransformParameterSpec) null)),
          null, null); 
```

* * *

对于输出，签名操作将一个新的 Signature 元素添加到您在内存中加载的 DOM。您可以通过像这样转换输出来流式传输输出：

```
TransformerFactory tf = TransformerFactory.newInstance();
Transformer trans = tf.newTransformer();
trans.setOutputProperty(OutputKeys.INDENT, "yes");

trans.transform(new DOMSource(doc), new StreamResult(System.out)); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-19T08:31:17.680

XSLT 规范没有定义结果文档会发生什么。这是由您选择的 XSLT 处理器的 API 规范定义的。例如，如果您使用 JAXP 接口从 Java 调用 XSLT，您可以要求将结果作为内存中的 DOM 树或将其序列化为磁盘上的指定文件。

您已将您的问题标记为“Java”，这是您为处理环境提供的唯一线索。我的猜测是您想转换为 DOM，然后使用 DOM 接口从新文档中获取值。尽管如果您使用的是 XSLT 2.0 和 Saxon，那么 s9api 接口比本机 JAXP 接口更有用。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-19T09:24:25.823

xslt 部分只定义了转换定义，没有别的。看看这个：

[java xslt教程](https://stackoverflow.com/questions/968040/java-xslt-tutorial)

在 Francois Gravel 中回答 input.xml 文件是要转换的文件，transform.xslt 是描述如何转换 xml 文件的 xslt 定义。output.out 是结果，这可能是 xml，但也可以是 html，平面文件...

这是我使用 xslt 时开始的地方：

[http://www.w3schools.com/xsl/default.asp](http://www.w3schools.com/xsl/default.asp)

也看看这个：

[http://www.w3schools.com/xsl/tryxslt.asp?xmlfile=cdcatalog&xsltfile=cdcatalog](http://www.w3schools.com/xsl/tryxslt.asp?xmlfile=cdcatalog&xsltfile=cdcatalog)

# windows - Windows Azure 分页大数据集解决方案

> ID：10662842
> 
> 赞同：1
> 
> 时间：2012-05-19T06:19:35.743
> 
> 标签：windows, node.js, azure

我正在使用 Windows Azure 表存储来存储数百万个实体，但是我试图找出可以轻松实现两件事的最佳解决方案：

1）对实体的搜索，将检索该实体以及该实体任一侧的至少（pageSize）个实体

2) 如果实体两侧的实体数量超过 (pageSize) 个实体，则显示下一页或上一页链接，这将持续到开始或结束。

3) 顺序是逆时间顺序

我决定 PartitionKey 将是用户提供的 Title，因为每个容器在系统中都是唯一的。RowKey 是 Steve Marx 的词典算法：

[http://blog.smarx.com/posts/using-numbers-as-keys-in-windows-azure](http://blog.smarx.com/posts/using-numbers-as-keys-in-windows-azure)

当转换为 javascript 而不是 c# 时，它看起来像这样：

垫（新日期（100000000 * 86400000）.getTime（）-新日期（）.getTime（），19）+“_”+ uuid（）

uuid() 是一个 javascript 函数，它返回一个 guid，pad 加零，长度不超过 19 个字符。所以系统中的记录看起来像这样：

```
PK                                   RK
TEST    0008638662595845431_ecf134e4-b10d-47e8-91f2-4de9c4d64388
TEST    0008638662595845432_ae7bb505-8594-43bc-80b7-6bd34bb9541b
TEST    0008638662595845433_d527d215-03a5-4e46-8a54-10027b8e23f8
TEST    0008638662595845434_a2ebc3f4-67fe-43e2-becd-eaa41a4132e2 
```

此模式允许插入的每个新实体都位于满足上述第 3 点的列表顶部。

通过一种在系统中添加新记录的好方法，我想我会创建一个机制来查看 RowKey 的前半部分，即 0008638662595845431_ 部分，并根据已找到项目的方向进行大于或小于比较。换句话说，要获取 0008638662595845431 之前的行，我会执行如下查询：

```
var tableService = azure.createTableService();
var minPossibleDateTimeNumber = pad(new Date(-100000000*86400000).getTime() - new Date().getTime(), 19);

tableService.getTable('testTable', function (error) {
    if (error === null) {
        var query = azure.TableQuery
            .select()
            .from('testTable')
            .where('PartitionKey eq ?', 'TEST')
            .and('RowKey gt ?', minPossibleDateTimeNumber + '_')
            .and('RowKey lt ?', '0008638662595845431_')
            .and('Deleted eq ?', 'false'); 
```

如果返回的结果大于 1000 并且 azure 给了我一个延续令牌，那么我想我会记住最后一项 RowKey 即数字部分 0008638662595845431。所以现在下一个查询将记住的值作为起始值等。

我正在使用 Windows Azure Node.Js SDK，语言是 javascript。

任何人都可以看到这种方法的陷阱或问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T07:26:45.917

我看不出这如何有效和高效地工作，尤其是在获取前一页的行时。

为了提高效率，“key”的前缀需要是一个连续递增或递减的值，而不是基于时间戳。时间戳生成的值会有重复和漏洞，这使得将页面大小映射到行数在最好的情况下效率低下，在最坏的情况下难以确定。

此外，这种潜在的算法依赖于单个分区键，从而破坏了表的可伸缩性。

这里的挑战是有一种方法来生成一个连续递增的密钥。一种解决方案是使用 SQL 数据库并对单行执行原子更新，以便按顺序生成递增或递减值。类似于 UPDATE ... SET X = X + 1 并返回 X。也许使用存储过程。

所以密钥可能是一个零左填充的串行生成的数字。拆分使得数字的前 N ​​位是分区键，其余 M 位是行键。

```
For example 
PKey    RKey
00001   10321
00001   10322
….
00954   98912 
```

现在，由于行是按顺序排列的，因此可以使用页面大小的确切键范围编写查询。

警告。在生成序列密钥和写入表存储之间发生故障的风险很小。在这种情况下，桌子上可能会有孔。但是，您的分页算法应该能够通过指定略大于所需的页面大小或通过调整范围重试来轻松检测和解决此类实例。

# php - php yii 的教程？

> ID：10662849
> 
> 赞同：-3
> 
> 时间：2012-05-19T06:20:47.427
> 
> 标签：php, yii

yii 是一个相当新的框架。我正在为它寻找体面的教程。

如果有视频，那就太好了。

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-19T06:31:11.853

检查下方的链接。[另外， Yii 官网](http://www.yiiframework.com/tutorials/)提供的文档对理解核心概念很有帮助：

*   [Yii 框架入门](http://www.larryullman.com/2009/10/31/getting-started-with-the-yii-framework/)
*   [Yii 维基](http://www.yiiframework.com/wiki/)
*   [Yii 快速入门 - 第一个应用程序](http://www.yiiframework.com/doc/guide/1.1/en/quickstart.first-app)
*   [YII 相关网站](http://www.yiiframework.com/wiki/98/yii-related-sites/)

**电子书**

*   [yii.1.1.application.development.cookbook](https://rads.stackoverflow.com/amzn/click/com/B005JCCIAE)

# android - 在 android 4.0.3 中使用键盘遇到困难？

> ID：10662854
> 
> 赞同：2
> 
> 时间：2012-05-19T06:21:29.020
> 
> 标签：android, android-keypad, keypad, numeric-keypad

我一直在开发一个应用程序屏幕，其中包含数字类型输入的编辑文本。它正常工作，发生的情况是——当用户触摸editetxt时，一个数字键盘打开，占据整个屏幕，当用户在键盘中按下next时，这个键盘关闭，并弹出一个占据半屏的新键盘。

我不知道如何听键盘下一个按钮。

我真正想要的是如何禁用其中一个键盘。？我使用的代码是简单的edittext：

```
 <EditText
        android:id="@+id/teedittext"
        android:layout_width="85dip"
        android:layout_height="wrap_content"
        android:numeric="integer" >

    </EditText> 
```

请帮助我，我是新手吗？我更喜欢禁用第一个键盘？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T07:30:38.940

好的，我自己得到了答案 这个代码片段让我很开心：

```
 teedittext.setOnFocusChangeListener(new EditText.OnFocusChangeListener() {

       @Override
        public void onFocusChange(View v, boolean hasFocus) {
                // TODO Auto-generated method stub
                InputMethodManager imm =(InputMethodManager) getSystemService(                                  INPUT_METHOD_SERVICE);
                        imm.hideSoftInputFromWindow(((EditText)findViewById(v.getId())).getWindowToken(), 0); 
                  } 
```

# javascript - Backbone.js 模型以前的方法不起作用？

> ID：10662855
> 
> 赞同：2
> 
> 时间：2012-05-19T06:21:38.003
> 
> 标签：javascript, backbone.js

奇怪的是，我注意到以前的模型方法并没有像我想象的那样工作..它一直返回与 get 相同的值。我认为我的代码有问题，或者当更改事件被触发时，backbone.js 没有升级 this._previousAttributes。

```
model = new Backbone.Model()

model.set({attr1: 123})

alert(model.previous("attr1"))  //alert 123 instead of undefined
alert(model.get("attr1"))

model.set({attr1: 312})

alert(model.previous("attr1"))  //alert 321 instead of 123
alert(model.get("attr1")) 
```

[http://jsfiddle.net/wLKBk/](http://jsfiddle.net/wLKBk/)

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-19T06:38:18.887

该[`previous`方法](http://backbonejs.org/#Model-previous)仅在`"change"`事件发生时有用：

> **以前的** `model.previous(attribute)`
> 
> 在`"change"`事件期间，此方法可用于获取更改属性的先前值。

该`previous`方法仅在`"change"`事件处理程序内部有用；类似的事情适用于[`hasChanged`](http://backbonejs.org/#Model-hasChanged),[`changedAttributes`](http://backbonejs.org/#Model-changedAttributes)和[`previousAttributes`](http://backbonejs.org/#Model-previousAttributes)。

`previous`当您不在事件处理程序中时，您正在尝试使用，所以您会胡说八道。如果您想知道模型中发生了什么变化并且您需要知道`"change"`事件处理程序之外的内容，那么您必须[自己跟踪它](https://stackoverflow.com/a/10221162/479863)。

# java - Mongodb java api：WriteResult#getN()

> ID：10662858
> 
> 赞同：10
> 
> 时间：2012-05-19T06:22:18.947
> 
> 标签：java, mongodb

我正在使用带有 Java API 的 MongoDB 编写一些 Java 代码，但我不确定 Javadoc 的某些部分。

在多线程上下文中，我使用[DBCollection.html#update(com.mongodb.DBObject, com.mongodb.DBObject)](http://api.mongodb.org/java/2.6/com/mongodb/DBCollection.html#update%28com.mongodb.DBObject,%20com.mongodb.DBObject%29)更新**唯一**文档，但我看到两个线程可以尝试同时写入。在这种情况下，我观​​察到只完成了一次写入，因为 Mongodb 似乎使用乐观写入锁，但我想以编程方式找出写入是在哪个线程中写入的，而哪个不是。由于“无更新”行为是沉默的（我的意思是没有例外或其他什么），我搜索了 API 以某种方式回答我的问题，经过一些测试发现了这个方法：[WriteResult#getN()](http://api.mongodb.org/java/2.6/com/mongodb/WriteResult.html#getN%28%29)

```
public int getN()
    Gets the "n" field
    Returns: 
```

描述是，嗯……并不是很详尽。我的测试表明，赢得写入的线程有一个返回 1 和另一个 0 的 getN()。

所以我的问题是：有人可以证实这一点吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-19T22:26:37.990

来自 GetLastError()[文档](http://www.mongodb.org/display/DOCS/getLastError+Command#getLastErrorCommand-ReturnValue)

命令的返回值是一个具有各种字段的对象。下面列出了常用字段；可能还有其他领域。

*   ok - true 表示 getLastError 命令成功完成。这并不表示没有最后一个错误。

*   err - 如果非空，则表示发生了错误。值是错误的文本描述。

*   code - 如果设置，则指示发生的错误代码。connectionId - 连接的 ID
*   lastOp - 上次操作的 op-id

对于更新：

*   n - 如果完成了更新，这是更新的文档数。

因此，在这种情况下，'get "n" field' 表示获取 n，即更新的文档数。如果没有将“multi”设置为 true，它只能是 0 或 1。

# jquery - 在几个字符后插入元素

> ID：10662861
> 
> 赞同：2
> 
> 时间：2012-05-19T06:22:35.883
> 
> 标签：jquery

> **可能重复：**
> [Jquery 或 javascript 在 <div> 中的 x 个字符后添加一个换行符 <br />](https://stackoverflow.com/questions/7068653/jquery-or-javascript-to-add-one-line-break-br-after-x-amount-of-characters-i)

我想`br`在元素的内容中插入一个标签五个字符。例如，从此：

```
<p>qwertyuiopasdfghjklzxcvbnm</p> 
```

对此：

```
<p>qwert<br />yuiopasdfghjklzxcvbnm</p> 
```

我怎么能用 jQuery 做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T06:29:11.380

只需用这个函数替换 innerHTML（在 document.ready() 上触发）：

```
$(document).ready(function() {
    $('p').html($('p').html().substring(0,5)+'<br/>'+$('p').html().substring(5));
}
); 
```

你可以在 jfiddle 上试试：http: [//jsfiddle.net/KwpGr/1/](http://jsfiddle.net/KwpGr/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T06:26:15.227

您可以使用隐式回调`$.html()`：

```
/* Be sure to specify which paragraph this applies to */
$("p").html(function(i,v){
  return v.replace( /^([\w]{5})/, "$1<br/>" );
}); 
```

演示：http: [//jsbin.com/orovom/2/edit](http://jsbin.com/orovom/2/edit)

# android - 在 Emulator 2.2 上安装 android market

> ID：10662863
> 
> 赞同：0
> 
> 时间：2012-05-19T06:22:42.030
> 
> 标签：android, android-emulator

我必须构建一个包含推送通知功能的应用程序。我在网上阅读了一篇文章。我需要为此目的在我的模拟器上安装 android market。有人可以指导我在模拟器 2.2 上安装 android market 应用程序的过程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T06:24:34.453

据我所知，根本不可能在模拟器上安装 Android Market 应用程序。

为此，您需要在真实设备上测试您的应用程序。

# javascript - 在 jquery 中再次调用相同的 ajax 请求时避免先前的 ajax 请求

> ID：10662871
> 
> 赞同：2
> 
> 时间：2012-05-19T06:24:02.670
> 
> 标签：javascript, jquery

我想在 jquery 中再次调用相同的 ajax 请求时避免以前的 ajax 请求

```
<input type="text" id="username" onkeyup = "userName(this)" >

function userName(e) {
    $.ajax({
        type:"POST",
        url:BasePath + "/users/userName",
        data:"name=" + $.trim($(e).val()),
        success:function (resp) {
        if (resp == 1) {
            $('#div.error_message').html('Username already taken...').show();
        } else {
            $('#div.error_message').hide();
        }
        }
    });
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T06:28:51.497

您可以使用 .abort()

```
<input type="text" id="username" onkeyup = "userName(this)" >

<script>var xhr=null;
function userName(e) {
     if(xhr)xhr.abort();//first time it will not be aborted
     xhr=$.post(BasePath + "/users/userName",{"name": $.trim($(e).val())},function (resp) {
        if (resp == 1) {
            $('#div.error_message').html('Username already taken...').show();
        } else {
            $('#div.error_message').hide();
        }
        });
}</script> 
```

使用 $.post 代替 $.ajax，因为它是 $.ajax 的简化和缩写形式

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T06:28:50.913

```
var ajaxReq;
function userName(e) {

    if(ajaxReq){
       ajaxReq.abort();
       //OR you may return from here as
       //another request is already in progress
    }

    ajaxReq = $.ajax({
        type:"POST",
        url:BasePath + "/users/userName",
        data:"name=" + $.trim($(e).val()),
        success:function (resp) {
            if (resp == 1) {
               $('#div.error_message').html('Username already taken...').show();
           } else {
               $('#div.error_message').hide();
          }
          ajaxReq=null;
        }
    });
} 
```

# c++ - 如何创建一个在失败时创建空对象的构造函数（c++）？

> ID：10662873
> 
> 赞同：3
> 
> 时间：2012-05-18T23:19:42.700
> 
> 标签：c++, initialization

如何创建一个在失败时创建空对象的构造函数 (c++)。

我想创建一个行为类似于[DCMTK](http://dicom.offis.de/dcmtk.php.en)[`DicomImage`](http://support.dcmtk.org/docs/classDicomImage.html)库中的类的类。

```
#include "diregist.h"   /* required to support color images */
DicomImage *image = new DicomImage("test.dcm");

if (image != NULL)
{
    if (image->getStatus() == EIS_Normal)
    {
        Uint8 *pixelData = (Uint8 *)(image->getOutputData(8 /* bits per sample */));

        if (pixelData != NULL)
        {
            /* do something useful with the pixel data */
        }
    } 
    else
        cerr << "Error: cannot load DICOM image (" << DicomImage::getString(image->getStatus()) << ")" << endl;
}
delete image; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T23:35:19.420

不容易。您可以`DicomImage::operator new()`在 DicomImage 类的声明中覆盖。然后，可能失败并返回 NULL 的实际逻辑将进入 operator new() 主体，而不是实际的构造函数。一旦进入构造函数，返回 NULL 为时已晚，此时对象已经创建。问题是 operator new() 不接收构造函数参数，因此您可能没有失败所需的信息。

另一种方法是让工厂方法或工厂类实际创建您的实例，因此您的代码如下所示：

```
DicomImage* pImage = CreateDicomImage( "stuff" ); 
```

但是，因为您的问题中包含“异常处理”......并且至少让答案更适合程序员 SE（而不是 stackoverflow）问题，我确实想指出您可以而且应该利用 C++ 中的异常处理。

当您返回 NULL 时，您会强制所有客户端代码在调用 new DicomImage() 之后立即添加错误检查逻辑，这会降低可读性，因为错误检查最终会与实际应用程序逻辑混合在一起。

拥有如下所示的代码不是更好吗？

```
std::unique_ptr< DicomImage > pImage( new DicomImage( "stuff" ) );
pImage->DoSomeCommand();
pImage->DoSomeOtherCommand(); 
```

...如果创建失败，不必担心“假设”条件。您可以通过使用 C++ 异常处理并让构造函数在创建失败时抛出异常来实现这一点。围绕处理这些东西的代码块设置 try-catch 块，而 try 块中的内容是纯应用程序逻辑。如果图像创建失败，则不会检查污染代码的错误，也不会崩溃。

...并且通过使用智能指针，您还可以保证如果以后发生任何故障，pImage 将始终被删除。因此，您无需担心在退出函数之前必须调用 delete。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T00:03:02.237

使用 DicomImage 的代码并没有按照您的想法执行。

示例代码

```
if (image != NULL)
{ 
```

是针对无异常环境的防御性编程，当系统内存不足时返回 NULL。

启用异常后， new 将抛出内存不足异常。如果异常被禁用，那么 new 将返回 NULL。

要回答您的问题，构造函数不能返回 NULL。

但是，静态工厂方法可以返回 NULL。

```
class Foo
{
public:
    static Foo* MakeFoo()
    {
       Foo* foo = NULL;
       if (LifeIsGood())
           foo = new Foo();
       return foo;
    }
private:
    Foo();
};

Foo* myFoo = Foo::MakeFoo();
if (myFoo)
    BeFooish(myFoo); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T23:44:28.690

我不认为构造函数可以做到这一点 - 这个 url 说构造函数不能返回 null

[http://social.msdn.microsoft.com/forums/en-US/csharplanguage/thread/1450ed84-277f-46d3-b2ea-8352986f877c](http://social.msdn.microsoft.com/forums/en-US/csharplanguage/thread/1450ed84-277f-46d3-b2ea-8352986f877c)

也许有一个“黑客”，但它可能是不合法的 你可能已经知道所有这些，但以防万一：（1）构造函数不能返回值，以及（2）我认为它没有任何控制权在分配给调用构造函数的实例的内存上，但构造函数可以将类成员设置为 NULL 值。

此 URL 有一个解决方法 - 如果您确实需要使用 NULL（不推荐）将构造函数设为私有并使用“工厂方法”（函数）：

[构造函数可以返回 NULL 值吗？](https://stackoverflow.com/questions/2859062/can-a-constructor-return-a-null-value)

我知道这与你的问题是分开的，但我只是想确保有人知道编译器关于 new 的行为：

根据此 URL，最新的编译器不应该使用 new 运算符返回 NULL（应该抛出异常），尽管允许旧的编译器这样做：

[http://www.parashift.com/c++-faq-lite/new/new-never-returns-null.html](http://www.parashift.com/c++-faq-lite/new/new-never-returns-null.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-20T03:27:51.703

您不能在创建对象时返回 null，但是您可以更改 operator == 和！= 的行为 尝试以下代码，我没有尝试过。

```
bool MyClass::operator==(const MyClass &other) const {
    if(&other == null){
        if(/* your validations */){
            return true;//it is null
        }else{
            return false;//
        }       
    }
    return (*this == other);//it is not compare with null
}
bool MyClass::operator!=(const MyClass &other) const {
    if(&other == null){
        if(/* your validations*/){
            return true;//is not null
        }else{
            return false;
        }       
    }
    return !(*this == other);//it is not compare with null
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-19T03:44:10.083

您不能，并且根据 的文档判断`DicomImage`，您真的不想模拟该类的接口。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-19T07:08:56.150

使用 new() 运算符执行此操作并不是覆盖 new() 运算符的真正目的。从您的示例中，我不确定您是否允许更改客户端代码；但是，如果您可以控制客户端代码，则只需使用工厂方法即可使用构造函数：

```
class Foo {

  Foo(int arg) {...}

  static Foo *new_Foo(int arg) {
    if (! I_like(arg)) return null;
    return new Foo(arg);
  }

}

// ...
// in the client

Foo *foo =
// nope:
// new Foo(3);
// do this instead:
Foo.new_Foo(3); 
```

# javascript - 使用 JavaScript 验证表单

> ID：10662891
> 
> 赞同：1
> 
> 时间：2012-05-19T06:26:36.373
> 
> 标签：javascript, html, forms, login

我是一个初学者，我已经编写了一个验证表单的代码：

```
function validateForm(){
var x=document.forms["myForm"]["fname"].value;
if (x==null || x==""){
alert("First name must be filled out");
return false;
  }}
  <!-- html part-->
<form name="myForm" action="demo_form.asp" onsubmit="return validateForm()" method="post">
First name: <input type="text" name="fname">
<input type="submit" value="Submit">
</form><br> 
```

此代码的问题是按下提交按钮会触发该`validateForm`功能。对象失去焦点时如何调用函数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T05:54:11.790

这是我的问题的确切解决方案。当对象失去焦点时，用户会收到某种通知：

```
<script>
function validate(){
var y = document.getElementById("errorResponse");
var x=document.forms["myForm"]["fname"].value;
    if (x==null || x==""){
        y.innerHTML = "Error";
    }
}
</script> 
```

HTML 表单是：

```
<form name="myForm">
First name: <input type="text" name="fname" onBlur = "validate()">
<div id = "errorResponse"></div>
<input type="submit" value="Submit">
</form> 
```

可以在 CSS 中将 div 设计为红色以引起用户注意，并且可以玩更多的技巧。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T06:35:04.263

通过以下方式替换您的输入元素的代码

```
<input type="text" onblur="return validateForm();" name="fname"> 
```

我想这就是你要找的

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-19T08:22:10.100

```
<html>
<head>
<script type="text/javascript">
      function validateForm(oForm){
    var els = oForm.elements;
    for(var i = 0; i < els.length; i++){
       if('string' === typeof(els[i].getAttribute('data-message'))){
          return valEl(els[i]);
       }
    }
} 

function valEl(el){
    var method = el.getAttribute('data-valMethod');
    if('req' === method && (el.value === null || el.value === '')){
           alert(el.getAttribute('data-message'));
           return false;
    }
} 
</script>
</head>
<body>
<form name="myForm" action="#" onsubmit="return validateForm(this)" method="post">
First name: 
    <input data-message="First name must be filled out" data-valMethod="req" onchange="return valEl(this)"; name="fname"><br />
<input type="submit" value="Submit">
</form>
</body>

</html>​​​​​​​​​​​​​​​​​​​ 
```

如果表单元素上存在所需的数据消息属性，我将其拆分为一个函数，该函数可以验证“onchange”上的元素，另一个函数可以触发 form.onsubmit() 上每个元素的验证。
由于 HTML5 的 Data-* 属性对于这些事情非常方便 :-)

这样您就可以避免将表单和元素的名称存储在验证脚本中，因为您将引用传递给元素本身。这总是一件好事。

从这里您可以扩展 valEl 函数以适应其他类型的验证。

到目前为止，唯一的限制是每个元素只能有一种类型的验证，但这应该很容易解决。

快乐编码。/G

PS [http://jsfiddle.net/ePPnn/11/](http://jsfiddle.net/ePPnn/11/)示例代码

# iphone - 从ios中的CGPoints数组绘制矩形

> ID：10662894
> 
> 赞同：1
> 
> 时间：2012-05-19T06:27:21.107
> 
> 标签：iphone, sdk

我想从给定的 CGPoint 数组中绘制矩形。我想从 imageView 中裁剪该矩形。我已经完成了图像的裁剪并将所有点从“touchMove”委托方法存储到数组中。现在我想从这些存储的 CGpoints 中绘制区域。是可以从点画出矩形吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T14:22:11.703

您应该使用 CGContex。阅读：[http ://www.edumobile.org/iphone/ipad-development/draw-circle-triangle-and-rectangle-in-iphone/](http://www.edumobile.org/iphone/ipad-development/draw-circle-triangle-and-rectangle-in-iphone/)

# c# - C# 解析字符串拆分

> ID：10662895
> 
> 赞同：1
> 
> 时间：2012-05-19T06:27:27.537
> 
> 标签：c#, string, parsing, split, whitespace

我有一个由两列组成的文件，它们将存储为字典，其中第一列将是键，第二列将是值。第二列由空格分隔，可以是任意数量的空格或制表符。

如何使用 Split() 函数将其存储在我的字典中？

```
 recipesFile = new StreamReader(recipesRes.Stream);
        char[] splitChars = {'\t', ' '};

        while (recipesFile.Peek() > 0)
        {
            string recipesLine = "";
            recipesLine = recipesFile.ReadLine();
            string[] recipesInLine = recipesLine.Split(splitChars);

            recipes.Add(recipesInLine[0], recipesInLine[1]);
        } 
```

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-19T06:31:55.237

```
recipesLine.Split(splitChars, StringSplitOptions.RemoveEmptyEntries); 
```

此外，您的代码通常可以缩短为

```
var myDictionary = File.ReadLines(myFileName)
    .Select(l => l.Split(new []{'\t', ' '}, StringSplitOptions.RemoveEmptyEntries))
    .ToDictionary(a => a[0], a => a[1]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T06:32:18.857

由于您的条目使用*多个*空白字符分隔并`Split`拆分为*单个*字符，因此您需要删除空条目。为此目的有一个单独的[`String.Split`重载：](http://msdn.microsoft.com/en-us/library/ms131448)

```
string[] recipesInLine = recipesLine.Split(splitChars, 
                                           StringSplitOptions.RemoveEmptyEntries); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-19T06:32:29.070

首先，使用 file.readlines 方法。然后你可以在线路上使用 linq。[http://msdn.microsoft.com/en-us/library/dd383503.aspx](http://msdn.microsoft.com/en-us/library/dd383503.aspx)

Jon Skeet 和 Marc Gravell 在这里都有使用 linq 读取文件的好例子， [Reading a file line by line in C#](https://stackoverflow.com/questions/1271225/c-sharp-reading-a-file-line-by-line)。

然后使用 ToDictionary - Yuriy 的答案是一个很好的解决方案。

# css - CSS“概述”Webkit 和 Gecko 上的不同行为行为

> ID：10662902
> 
> 赞同：36
> 
> 时间：2012-05-19T06:28:03.493
> 
> 标签：css, firefox, webkit, gecko

我正在进行一项实验，我发现“大纲”CSS2 属性在 Webkit 和 Gecko 上的实现方式不同

在下面的脚本中，我在另一个 div 内有一个绝对位置 div，但它浮动在它之外。Webkit 上的大纲勾勒出实际的父 div，而在 Gecko 上，它会扩展以覆盖子项。

[http://jsfiddle.net/KrCs4/](http://jsfiddle.net/KrCs4/)

我错过了什么吗？我需要在 Gecko 上覆盖一个属性吗？还是应该将其报告为错误？

Webkit 截图：

![Webkit 截图](../Images/3a12fdd42a884481582f570776381f36.png)

火狐截图：

![火狐截图](../Images/9172d04e3dd6e3b85bf41b68d920d472.png)

编辑：

已确认这是一个错误，这里有一个解决方法：http: [//jsfiddle.net/7Vfee/](http://jsfiddle.net/7Vfee/)（您需要确保父级的位置：相对或绝对以使此解决方法起作用。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-02-25T22:39:30.457

我有同样的问题，所以我把它从使用轮廓换成使用盒子阴影：

```
box-shadow: 0px 0px 0px 1px #FFF; 
```

代替

```
outline:1px #dcdcdc solid; 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-05-19T06:41:09.930

Gecko 的这种不一致的行为是众所周知的，并且有充分的记录，尽管奇怪的是不是在 MDN，而是在[SitePoint Reference](http://reference.sitepoint.com/css/outline)：

> Firefox 3.5 及以下版本将围绕超出其边界的元素内容而不是围绕元素的实际设置尺寸绘制轮廓。

这将继续影响所有版本的 Firefox。目前我没有看到可行的解决方法，除了`div`从它的父级中删除你的绝对定位并将它相对于......其他东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-10-30T16:33:20.617

我已经使用这个而不是绝对定位进行了修复：

```
transform: translate(x,y); 
```

```
.outer {
    position: absolute;
    top: 20px;
    left: 20px;
    height: 50px;
    width: 100px;
    background: blue;
    border: 3px solid green;
    outline: 3px dotted red;
}
.inner {
    position: absolute;
    transform: translate(80px, 15px);
    width: 40px;
    height: 20px;
    background: yellow;
}
```

```
<div class="outer">
    <div class="inner">
    </div>
</div>
```

# java - 有没有办法使用 Java OpenID 识别用户是“Yahoo”、“Google Accounts”还是“Google Marketplace”用户？

> ID：10662903
> 
> 赞同：0
> 
> 时间：2012-05-19T06:28:18.860
> 
> 标签：java, openid, google-account, identify, google-apps-marketplace

我开发了一个 Java Web 应用程序，用户可以在其中使用他/她的 (Yahoo)/(Google)/(Google Marketplace) 帐户登录。它是使用 OpenID 完成的。我实际上使用了 Google 本身提供的示例代码（编写第一个 Google Marketplace 应用程序）。

现在，我必须确定用户是否是（Google Marketplace）用户。

我怎样才能做到这一点？

# ios - 附加图像并发布到 JSON API

> ID：10662907
> 
> 赞同：2
> 
> 时间：2012-05-19T06:28:40.950
> 
> 标签：ios, json, wordpress

如何创建带有图像的帖子并将其作为 iPhone 应用程序的特色图像附加？

我正在使用带有[JSON API 插件的 wordpress](http://wordpress.org/extend/plugins/json-api/)

我创建帖子的网址：<--[对此的参考](http://wordpress.org/extend/plugins/json-api/other_notes/#2.2.-Pages-controller-methods)

```
http://www.example.com/api/create_post/?nonce=eea4bb4ce5&status=publish&title=Test&content=test%20content&categories=animals 
```

现在我需要将手机图库中的图片附加到此网址。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T04:47:42.733

试试这个。使用 JSON POST 方法。您可以像这样附加所有参数。

```
-(void)uploadImage
{

    NSString *method =  @"";
    NSString *username   = @"";
    NSString *token   = @"";

    NSString *urlString = [NSString stringWithFormat:@"%@",@"yoururl"];

    NSMutableURLRequest *request = [[[NSMutableURLRequest alloc] init] autorelease];
    [request setURL:[NSURL URLWithString:urlString]];
    [request setHTTPMethod:@"POST"];

    NSMutableData *body = [NSMutableData data];

    // file
    NSData *imageData = UIImageJPEGRepresentation( imageView.image, 0.8);
    NSString *boundary = [NSString stringWithString:@"---------------------------14737809831466499882746641449"];
    NSString *contentType = [NSString stringWithFormat:@"multipart/form-data; boundary=%@",boundary];
    [request addValue:contentType forHTTPHeaderField: @"Content-Type"];

    [body appendData:[[NSString stringWithFormat:@"--%@\r\n", boundary] dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:[[NSString stringWithString:@"Content-Disposition: form-data; name=\"image\"; filename=\".jpg\"\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:[[NSString stringWithString:@"Content-Type: application/octet-stream\r\n\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:[NSData dataWithData:imageData]];
    [body appendData:[[NSString stringWithString:@"\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];

    //  parameter username
    [body appendData:[[NSString stringWithFormat:@"--%@\r\n", boundary] dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:[[NSString stringWithFormat:@"Content-Disposition: form-data; name=\"username\"\r\n\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:[username dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:[[NSString stringWithString:@"\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];

    //  parameter token
    [body appendData:[[NSString stringWithFormat:@"--%@\r\n", boundary] dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:[[NSString stringWithFormat:@"Content-Disposition: form-data; name=\"auth_token\"\r\n\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:[token dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:[[NSString stringWithString:@"\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];

    //    //  parameter method
    [body appendData:[[NSString stringWithFormat:@"--%@\r\n", boundary] dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:[[NSString stringWithFormat:@"Content-Disposition: form-data; name=\"method\"\r\n\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:[method dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:[[NSString stringWithString:@"\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];

    // close form
    [body appendData:[[NSString stringWithFormat:@"--%@--\r\n", boundary] dataUsingEncoding:NSUTF8StringEncoding]];

    // setting the body of the post to the reqeust
    [request setHTTPBody:body];

    // now lets make the connection to the web
    NSData *returnData = [NSURLConnection sendSynchronousRequest:request returningResponse:nil error:nil];
    NSString *returnString = [[NSString alloc] initWithData:returnData encoding:NSUTF8StringEncoding];

    NSLog(@"%@",returnString);
    [returnString release];
} 
```

希望这可以帮助你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T06:57:48.453

要完全满足您的要求，您需要使用**POST 方法****在 Web 服务上发送图像文件**

 **首先从**照片库**中选择图像或从**相机**中获取图像并使用以下代码制作该图像的数据。

```
 NSString *imgName = [NSString stringWithFormat:@"ImageTest"];
   NSData *imgData=UIImagePNGRepresentation(imgView.image);

   NSString* urlstring = [NSString stringWithFormat:@"http://www.example.com/api/create_post/?nonce=eea4bb4ce5&status=publish&title=Test&content=test%20content&categories=animals&imageFile=%@",imgName];
   NSLog(@"URL >> %@",urlstring);

   NSURL url = [NSURL URLWithString:[urlstring stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]];

    //===============================================        
    NSMutableURLRequest postRequest = [[[NSMutableURLRequest alloc] init] autorelease];
    [postRequest setURL:url];
    [postRequest setHTTPMethod:@"POST"];

    NSString boundary = [NSString stringWithString:@"---------------------------14737809831466499882746641449"];
    NSString *contentType = [NSString stringWithFormat:@"multipart/form-data; boundary=%@",boundary];
    [postRequest addValue:contentType forHTTPHeaderField: @"Content-Type"];

    NSMutableData  *body = [[NSMutableData alloc] init];
    [postRequest addValue:contentType forHTTPHeaderField: @"Content-Type"];
    [body appendData:[[NSString stringWithFormat:@"\r\n--%@\r\n", boundary] dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:[[NSString stringWithString:@"Content-Disposition: form-data; name=\"userfile\"\r\n\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:[[NSString stringWithFormat:@"\r\n--%@\r\n",boundary] dataUsingEncoding:NSUTF8StringEncoding]]; 
```

**imgName**这是此代码中**非常重要的对象**，它是您需要在 Web 服务中传递的图像，如上所示。

```
 [body appendData:[[NSString stringWithString:[NSString stringWithFormat:@"Content-Disposition: form-data; name=\"userfile\"; filename=\"%@.png\"\r\n",imgName]] dataUsingEncoding:NSUTF8StringEncoding]]; //img name
        [body appendData:[[NSString stringWithString:@"Content-Type: application/octet-stream\r\n\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];

        // Add Image imgData is Declare as Above.
        [body appendData:[NSData dataWithData:imgData]];

    [body appendData:[[NSString stringWithFormat:@"\r\n--%@--\r\n",boundary] dataUsingEncoding:NSUTF8StringEncoding]];
    [postRequest setHTTPBody:body];

    NSURLResponse *response;
    NSError error = nil;

    NSData* data = [NSURLConnection sendSynchronousRequest:postRequest returningResponse:&response error:&error];
    NSString *result=[[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding];
  //  NSString * jsonRes = [NSString stringWithContentsOfURL:url encoding:NSUTF8StringEncoding error:nil];

    NSLog(@"result = %@",[result JSONValue]); 
```

它与我完美合作！我希望你能从这里得到帮助！**

# php - 如何检查文件是否为图像？

> ID：10662915
> 
> 赞同：10
> 
> 时间：2012-05-19T06:29:31.177
> 
> 标签：php, image

我可以检查某个文件是否是图像吗？如何在 PHP 中做到这一点？

如果文件不是图像，我想发出警告消息。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-19T06:40:00.603

此外[`getimagesize()`](http://www.php.net/manual/en/function.getimagesize.php)，您还可以使用[`exif_imagetype()`](http://php.net/manual/en/function.exif-imagetype.php)

> exif_imagetype() 读取图像的第一个字节并检查其签名。
> 
> 当找到正确的签名时，将返回适当的常量值，否则返回值为 FALSE。返回值与 getimagesize() 在索引 2 中返回的值相同，但 exif_imagetype() 快得多。

对于这两个函数，如果文件未被确定为图像，则返回 FALSE。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-19T06:36:33.683

在 PHP 中你可以像下面这样

```
if ((($_FILES['profile_picture']['type'] == 'image/gif') || ($_FILES['profile_picture']['type'] == 'image/jpeg') || ($_FILES['profile_picture']['type'] == 'image/png'))) 
```

在Javascript中你可以像下面这样

```
function checkFile() {
   var filename = document.getElementById("upload_file").value;
   var ext = getExt(filename);
 //  alert(filename.files[0].filesize);
  // alert(ext);
   if(ext == "gif" || ext == "jpg" || ext=="png")
      return true;
   alert("Please upload .gif, .jpg and .png files only.");
   document.getElementById("upload_file").value='';
   return false;
}

function getExt(filename) {
   var dot_pos = filename.lastIndexOf(".");
   if(dot_pos == -1)
      return "";
   return filename.substr(dot_pos+1).toLowerCase();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-19T07:17:38.890

在 `php`我们可以使用`filetype ( string $filename )` 和`mime_content_type ( string $filename )`

但是`mime_content_type ( string $filename )`是`deprecated`

[http://php.net/manual/en/function.filetype.php](http://php.net/manual/en/function.filetype.php)

在`javascript`我们可以使用自定义函数

[http://my-sliit.blogspot.in/2009/04/how-to-check-upload-file-extension.html](http://my-sliit.blogspot.in/2009/04/how-to-check-upload-file-extension.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-19T06:43:07.447

我会这样做以找出...

```
$type =array('jpg','gif');

foreach($type as $val){

if($_FILES['filename']['type'] == 'image/$val')
{
echo "its an image file";
}
else{
echo "invalid image file"
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-02-13T06:54:02.987

更好更快的方法是使用[exif_imagetype()](http://php.net/manual/en/function.exif-imagetype.php)。像这样的东西应该做的工作：

```
$valid_formats = array(IMAGETYPE_GIF, IMAGETYPE_JPEG, IMAGETYPE_PNG);
$file_format = exif_imagetype($filename);

if(!in_array($file_format, $valid_formats))
    echo("File format is not valid"); 
```

# php - SQL查询根据month_year获取行

> ID：10662919
> 
> 赞同：0
> 
> 时间：2012-05-19T06:30:22.150
> 
> 标签：php, mysql, sql

我有一个现有的 MySQL 数据库，其中有一列名为 month_year。它的日期/时间数据格式如下：- *1974 - 1982、11/2001 - 2008、03/2007 至 1987 年和 11/2001 - 02/2007。*

我的网站用户将选择一个日期，我需要根据该日期是否符合 DB 中的标准给他一些选项。

例如：

```
up to 1987 in DB means all dates upto 1987
11/2001 - 2008 means all dates between this
03/2007 on - means all dates after this. 
```

我需要一个 SQL 查询来获取所有符合此条件的行。我想我需要一些正则表达式来实现这一点，但我不确定。任何帮助都会很棒！

提前致谢。

**补充：**我没有选择更改数据库。用户将选择**2011 年**和**10 月（十月）**。现在我必须根据他的意见给他选择。我将不得不获取所有月年列满足这一点的行。

列如下所示：

**月年**

```
1974 - 1982
1988 - 10/1999
1988 - 10/1999
11/1999 - 10/2001
11/2001 - 2008
11/2001 - 2008 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T11:44:03.950

尝试使用正则表达式进行这种比较是不明智的。你会得到一个非常复杂的正则表达式，下次你看代码时你和其他人都不会理解。

相反，将字符串解析为它们的组件，然后对组件进行处理。这会生成更长的代码，但更容易遵循的代码。

您需要解析为第一个和最后一个日期的“跨度”表达式。让我在 SQL Server 中为您提供解决方案。我选择这种方言只是因为它对我来说更容易；我认为您可以很容易地将其调整为 mysql（日期和字符串的函数似乎在每个数据库中具有不同的名称）。

以下查询将列月 1、年 1、月 2 和年 2 添加到数据中：

```
select t.*,
       (case when charindex('/', part1) > 0 -- have month or not?
             then cast(left(part1, charindex('/', part1)) as int)
             else 1
        end) as Month1,
       (case when charindex('/', part1) > 0 -- have month or not?
             then cast(substring(part1, charindex('/', part1), 100) as int)
             else cast(part1 as int)
        end) as Year1,
       (case when charindex('/', part2) > 0 -- have month or not?
             then cast(left(part2, charindex('/', part2)) as int)
             else 1
        end) as Month2,
       (case when charindex('/', part2) > 0 -- have month or not?
             then cast(substring(part2, charindex('/', part2), 100) as int)
             else cast(part2 as int)
        end) as Year2
from (select t.*,
             left(t.span, charindex(t.span, '-')-2) as part1,
             substring(t.span, charindex(t.span, '-')+2) as part2
      from t
     ) 
```

您现在可以使用这些表达式进行所需的比较。有一个警告：将年数和年数与月数混合可能会产生意想不到的结果。当用户指定诸如 9/2008 - 2010 之类的内容时，您需要特别小心。这是 2010 年的所有月份吗？还是只是第一个月？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T07:19:34.093

你有没有尝试过

```
SELECT * FROM table WHERE month_year="1974 - 1982" 
```

更改“1974 - 1982”以适应其他值。虽然这看起来很明显，但肯定还有更多的东西？！

# android - 当用户点击通知时如何运行一些代码？

> ID：10662921
> 
> 赞同：0
> 
> 时间：2012-05-19T06:30:24.640
> 
> 标签：android, notifications, android-asynctask, progressdialog

我有一些线程可以打开进度对话框并下载文件。当线程下载文件时，它会更新进度条。但是如果进度对话框被隐藏，线程会创建一个通知并在通知中更新进度条。我想做这个：当用户点击通知时，Android 会打开 Activity 并显示进度对话框。我怎样才能做到这一点？

这是我下载文件的方法：

```
 public void downloadAction(int id) {
    if(id<0 || id>data.length) { IO.showNotify(MusicActivity.this, getResources().getStringArray(R.array.errors)[4]); return; }
    final int itemId = id;

    AsyncTask<Void, Integer, Boolean> downloadTask = new AsyncTask<Void, Integer, Boolean>() {
        ProgressDialog progressDialog = new ProgressDialog(MusicActivity.this);
        String error = null;
        int nId = -1;
        int progressPercent = 0;
        boolean notificated = false;
        int urlFileLength;
        String FILE_NAME = fileName(data.getName(itemId));

        @Override
        protected void onPreExecute() {
            progressDialog.setTitle(data.getName(itemId));
            progressDialog.setIndeterminate(false);
            progressDialog.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);
            progressDialog.setCancelable(true);
            progressDialog.setOnCancelListener(new OnCancelListener() {
                public void onCancel(DialogInterface dialog) {
                    cancel(true);
                }
            });

            progressDialog.setButton(Dialog.BUTTON_POSITIVE, getResources().getString(R.string.hide), new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int which) {
                    progressDialog.hide();
                }
            });
            progressDialog.setButton(Dialog.BUTTON_NEGATIVE, getResources().getString(R.string.cancel), new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int which) {
                    if(progressDialog.isShowing()) { cancel(true); progressDialog.dismiss();}
                }
            });

            progressDialog.show();
            progressDialog.setProgressNumberFormat("");                             
        }

        @Override
        protected Boolean doInBackground(Void... params) {
            int localFileLength, len;
            int fullProgress = 0;
            byte[] bytes = new byte[1024];
            File rootDir = new File(PATH);

            if(!rootDir.isDirectory()) rootDir.mkdir();

            try {
                URLConnection urlConnection = new URL(data.getUrl(itemId)).openConnection();
                urlConnection.setConnectTimeout(20000);
                urlConnection.setReadTimeout(60000);

                localFileLength = (int) new File(FILE_NAME).length();
                urlFileLength = urlConnection.getContentLength();

                if (urlFileLength == 169 || urlFileLength == 0 || urlFileLength == -1) {
                    error = getResources().getStringArray(R.array.errors)[5];
                    return false;
                }
                if (urlFileLength == localFileLength) {
                    error = getResources().getString(R.string.file_exist);
                    return false;
                } else {
                    publishProgress(0, urlFileLength);
                    InputStream in = urlConnection.getInputStream();
                    OutputStream out = new FileOutputStream(FILE_NAME);

                    while((len=in.read(bytes))!=-1) {
                        if(!isCancelled()) {
                            out.write(bytes, 0, len);
                            fullProgress += len;
                            publishProgress(fullProgress);
                        } else {
                            new File(FILE_NAME).delete();
                            error = getResources().getString(R.string.stopped);
                            return false;                               
                        }
                    }

                }

            } catch (MalformedURLException e) {
                new File(FILE_NAME).delete();
                error = getResources().getStringArray(R.array.errors)[2];
            } catch (IOException e) {
                new File(FILE_NAME).delete();
                error = getResources().getStringArray(R.array.errors)[3];
            }

            return true;
        }

        @Override
        protected void onProgressUpdate(Integer ... progress) {
            int tmp;

            if (progress.length==2) {
                progressDialog.setProgress(progress[0]);
                progressDialog.setMax(progress[1]);
            } else if(progress.length==1) {
                if(!progressDialog.isShowing()) {
                    if(!notificated) {
                        nId = NotificationUtils.getInstace(MusicActivity.this).createDownloadNotification(data.getName(itemId));
                        notificated = true;
                    } else {
                        tmp = (int) (progress[0]/(urlFileLength*0.01));
                        if(progressPercent!=tmp) {
                            progressPercent = tmp;
                            NotificationUtils.getInstace(MusicActivity.this).updateProgress(nId, progressPercent);
                        }
                    }
                } else {
                    progressDialog.setProgress(progress[0]);
                }
            }
        }

        @Override
        protected void onPostExecute(Boolean result) {
            if(result==true && error == null) {
                if(progressDialog.isShowing()) {
                    IO.showNotify(MusicActivity.this, getResources().getString(R.string.downloaded) + " " + PATH);
                    progressDialog.dismiss();
                } else if (nId!=-1) {
                    NotificationUtils.getInstace(MusicActivity.this).cancelNotification(nId);
                    NotificationUtils.getInstace(MusicActivity.this).createMessageNotification(data.getName(itemId) + " " + getResources().getString(R.string.finished));
                }
            } else {
                if(progressDialog.isShowing()) {
                    IO.showNotify(MusicActivity.this, error);
                    progressDialog.dismiss();
                } else if (nId!=-1){
                    NotificationUtils.getInstace(MusicActivity.this).cancelNotification(nId);
                    NotificationUtils.getInstace(MusicActivity.this).createMessageNotification(getResources().getString(R.string.error) + "! " + error);
                }
            }

        }

        @Override
        protected void onCancelled() {
            IO.showNotify(MusicActivity.this, getResources().getString(R.string.stopped));
        }

    };

    if(downloadTask.getStatus().equals(AsyncTask.Status.PENDING) || downloadTask.getStatus().equals(AsyncTask.Status.FINISHED))
        downloadTask.execute();
} 
```

这是创建通知的两种方法：

```
public int createDownloadNotification(String fileName) {
    String text = context.getString(R.string.notification_downloading).concat(" ").concat(fileName); 
    RemoteViews contentView = createProgressNotification(text, text);
    contentView.setImageViewResource(R.id.notification_download_layout_image, android.R.drawable.stat_sys_download);

    return lastId++;
}

private RemoteViews createProgressNotification(String text, String topMessage) {
    Notification notification = new Notification(android.R.drawable.stat_sys_download, topMessage, System.currentTimeMillis());
    RemoteViews contentView = new RemoteViews(context.getPackageName(), R.layout.notification_download_layout);
    contentView.setProgressBar(R.id.notification_download_layout_progressbar, 100, 0, false);
    contentView.setTextViewText(R.id.notification_download_layout_title, text);

    notification.contentView = contentView;
    notification.flags = Notification.FLAG_NO_CLEAR | Notification.FLAG_ONGOING_EVENT | Notification.FLAG_ONLY_ALERT_ONCE;

    Intent notificationIntent = new Intent(context, NotificationUtils.class);
    PendingIntent contentIntent = PendingIntent.getActivity(context, 0, notificationIntent, 0);

    notification.contentIntent = contentIntent;

    manager.notify(lastId, notification);
    notifications.put(lastId, notification);

    return contentView;
} 
```

请帮帮我...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T06:58:30.693

我不确定，但在我的通知代码中我没有`notification.contentIntent = contentIntent;`，而且您似乎在该 `manager.notify(lastId, notification);`行之前错过了这个：

```
notification.setLatestEventInfo(context, MyNotifyTitle, MyNotifiyText, contentIntent ); 
```

MyNotifyTitle 是通知的标题，MyNotifyText 是文本。在 contentIntent 之前添加它们

```
MyIntent.putExtra("extendedTitle", notificationIntent );
MyIntent.putExtra("extendedText" , notificationIntent ); 
```

希望这可以帮助。

# javascript - 是否有无限的内容滚动会水平滚动？

> ID：10662922
> 
> 赞同：3
> 
> 时间：2012-05-19T06:30:48.703
> 
> 标签：javascript, scroll, pagination

是否有无限的内容滚动代码会水平滚动？它也被称为自动分页、取消分页、无限页面、无限滚动、无限分页等。它似乎在博客网站 tumblr 和许多在线新闻来源上非常流行。但是找不到可以水平滚动的。[例子](http://www.infinite-scroll.com/)

还有一个类似于 tumblr 的版本，它不会告诉你它正在加载下一页吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T11:01:27.190

代码将完全相同。

只需调整您的 css 以使项目水平*显示*而不是垂直显示。

# android - android 添加日历事件在 android 4.0 中崩溃

> ID：10662944
> 
> 赞同：1
> 
> 时间：2012-05-19T06:34:24.293
> 
> 标签：android, events, calendar, android-4.0-ice-cream-sandwich

以下是我用来在我的 android 应用程序中添加事件的代码

```
Intent intent = new Intent(Intent.ACTION_INSERT);
intent.setType("vnd.android.cursor.item/event");
intent.putExtra(Events.TITLE, summary);
intent.putExtra(Events.DESCRIPTION, summary);
intent.putExtra(Events.EVENT_LOCATION, "");     
intent.putExtra(CalendarContract.EXTRA_EVENT_BEGIN_TIME, beginCal.getTimeInMillis());
intent.putExtra(CalendarContract.EXTRA_EVENT_END_TIME, endCal.getTimeInMillis());
intent.putExtra(Events.ALL_DAY, allDayFlag);
intent.putExtra(Events.STATUS, 1);
intent.putExtra(Events.VISIBLE, 0);
intent.putExtra(Events.HAS_ALARM, 1);
startActivity(intent); 
```

这段代码在 android 4.0 模拟器中运行良好，但是当我在安卓 4.0 的三星 Galaxy S II 中检查时，它崩溃了，错误日志似乎如下

```
Error ( 4489): android.content.ActivityNotFoundException: No Activity found to handle Intent { act=android.intent.action.INSERT typ=vnd.android.cursor.item/event (has extras) } 
```

如何纠正这个错误

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T11:23:21.740

试试`using Intent.ACTION_EDIT`吧。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T12:07:29.347

我尝试了以下方式并且工作正常

```
ContentResolver cr = getContentResolver();
ContentValues values = new ContentValues();
values.put(Events.DTSTART, startTime);
values.put(Events.DTEND, endTime);
values.put(Events.TITLE, summary);
values.put(Events.DESCRIPTION, summary);
values.put(Events.CALENDAR_ID, calID);
values.put(Events.EVENT_TIMEZONE, "America/Los_Angeles");
values.put(Events.EVENT_LOCATION, "");  
values.put(Events.ALL_DAY, allDayFlag);
values.put(Events.STATUS, 1);
values.put(Events.HAS_ALARM, 1);
Uri uri = cr.insert(Events.CONTENT_URI, values); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-19T06:44:02.283

您的日历应用程序中可能没有配置任何日历。尝试在设备附带的本机日历应用程序中创建一个事件。如果在创建事件时产生任何错误。

如果**是**，则缺少配置的日历可能是问题所在。

如果**否**，即如果您可以在本机应用程序中成功创建事件，那么您的代码可能存在问题。

但是我在你的代码中注意到的一件事是你没有指定 calendar_id，这个事件应该是在其中创建的。

在日历中创建事件时，Calendar_id 是必填字段。试着把这个东西放在你的代码中。

# visual-c++ - Visual C++ 从 Cedit 获取字符串

> ID：10662946
> 
> 赞同：1
> 
> 时间：2012-05-19T06:34:58.240
> 
> 标签：visual-c++, cedit

这可能是一个非常基本的问题，但我似乎无法理解。我正在开发一个 VisualC++ 项目，我基本上想从 GUI 中获取一个字符串，然后将其用作文件名。到目前为止，我已经编写了以下内容，其中 IDC_FILE_NAME 是编辑控件框的 ID，但我不确定这是否是实现此目的的方法。

```
m_pFileName = (CEdit*)GetDlgItem( IDC_FILE_NAME );

CString fName =_T(" ");
GetDlgItemTextA(IDC_FILE_NAME, fName); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T14:58:09.930

> 但我不确定这是否是实现这一目标的方法。

答案是肯定的和否定的。是的，如果使用得当，不，不是你这样做。除非您想强制使用 UNICODE 或 ANSI，否则不要使用 UNICODE/ANSI 特定版本的函数。您的代码应如下所示：

```
 CString csText;
    GetDlgItemText(IDC_FILE_NAME, csText); 
```

注意**GetDlgItemText**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-29T01:01:20.580

这已经用 VS2015 进行了测试：

```
//
// Get string from CEdit m_ceDate;
// where
// DDX_Control(pDX, IDC_EDIT_DATE, m_ceDate);

char cdateBuf[128];
UINT nCountOfCharacters = GetDlgItemText(IDC_EDIT_DATE, cdateBuf, 16);
CString csDate = cdateBuf; 
```

# sharepoint - SharePoint 2010 - 使用循环工作流创建列表项 - 限制为 5？

> ID：10662949
> 
> 赞同：2
> 
> 时间：2012-05-19T06:35:20.913
> 
> 标签：sharepoint, sharepoint-2010, sharepoint-designer, sharepoint-workflow

在 SharePoint Server 2010 的列表中借助工作流创建新列表项（行）时遇到了一点问题。以下是事实。

## 我想做的事：

1.  在主列表中创建一个项目。在创建此项目时，用户必须输入一个数字，该数字指定应在二级列表中创建的列表项目的数量。
2.  创建主列表中的项目后，工作流程就会启动。
3.  此工作流应在二级列表中创建用户之前指定的列表项数量。

## 到目前为止我所拥有的：

由于我只能使用 SharePoint Designer，因此无法创建 for 循环（我不得不说，它非常弱且烦人，因为它会简化很多事情）。但是，到目前为止，我所拥有的是以下内容，并且在一定程度上起作用：

1.  主列表上的工作流程：
    *   这个在创建项目或更新现有项目时开始。
    *   它在二级列表上创建一个新的列表项。其中，它传递刚刚创建的项目的 ID、应在辅助列表中创建的项目数以及计数器值（初始值为 1）。
2.  二级列表上的工作流程：
    *   将计数器值增加 1
    *   保存主列表中对应列表项的 ID。
    *   保存应在二级列表中创建的项目数。
    *   并且（如果计数器小于应该创建的项目）更新主列表中相应项目的计数器（这就是我之前传递 ID 的原因）。
    *   随着主列表中的项目更新，工作流会以新的计数器值重新开始。

实际上，这与[论坛投稿](http://social.msdn.microsoft.com/Forums/en-US/sharepointworkflow/thread/77703498-e3f0-4df4-ace5-dade2f25d157)中描述的原理相同。

## 问题：

现在问题来了：尽管循环有效，但问题是在二级列表中最多只创建了 5 个项目，但我从未在任何地方声明过。例如，如果我在主列表中创建一个项目并输入数字 10，则计数器将在 5 处停止，并且仅在辅助列表中创建 5 个项目。但是，如果我输入一个小于 5 的数字，则一切正常。例如，如果我想在二级列表中创建 3 个项目，它只创建 3 个项目，并且计数器停止在 3，因为它应该。

## 问题：

由于我对 SharePoint 很陌生（我来自 PHP/SQL 世界，如您所知，循环绝对没有问题），我的问题是，在创建列表项方面是否存在任何预定义的限制工作流程，如果是，我可以如何以及在何处更改它们（如果可能的话）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T16:45:51.907

[该页面](http://social.technet.microsoft.com/Forums/en-US/sharepoint2010customization/thread/626a021e-ee19-4fdf-a739-2ecb660fee88/)说内置了五个限制以减少服务器压力并防止无限循环。

我现在找不到它，但有人说可以通过添加“暂停持续时间”一分钟作为循环工作流程的最后一步来避免这种情况。

# javascript - 为我的搜索框创建参数化 URL

> ID：10662952
> 
> 赞同：0
> 
> 时间：2012-05-19T06:36:10.227
> 
> 标签：javascript, url, node.js, express

我有一个 html 页面，它显示所有内容（我的意思是所有内容，表单提交，主页，表单结果.. 等等。很多 DOM 操作）它完全基于 ajax。我面临的问题是，我有一个搜索框，用户在其中输入一个 job_id 并显示有关该工作的所有信息，都在同一个 url 下

www.hostname.com/index.html

但我需要的是，当用户搜索 job_id 时，我的 url 应该类似于

www.hostname.com/index.html?jobid='abcd'

这样用户就可以将此网址添加为书签并通过链接获取信息。我只有一个 html 页面 (index.html)，我打算保持这种状态。我将如何去做？这样，如果用户输入 www.hostname.com/index.html，他会以默认外观进入 index.page，如果他输入 www.hostname.com/index.html?jobid='abcd'，则仅输出显示jobid。

PS：我正在使用 expressJS

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T08:07:12.820

一个简单且向后兼容的解决方案是使用`location.hash`( [docs](https://developer.mozilla.org/en/DOM/window.location) ) 来保存您的参数。一些应用程序（如 URL 缩短器）将删除哈希。

对于现代浏览器，您应该查看[pushState](https://developer.mozilla.org/en/DOM/Manipulating_the_browser_history#The_pushState%28%29.C2.A0method)，它允许您实际更改 URL。

# jquery - 指定无法输入的字符

> ID：10662958
> 
> 赞同：1
> 
> 时间：2012-05-19T06:37:13.620
> 
> 标签：jquery, keycode

我想要做的是确保“”是不会输入到输入框中的字符我有各种按键代码将用户限制为 az 和 0-9 但有些我似乎无法让它工作一种我可以限制为不输入几个字符而不是指定需要输入的内容的方式。

[http://jsfiddle.net/cG4aV/](http://jsfiddle.net/cG4aV/) - 尝试限制输入键（有效），“”（无效）

它也不适用于任何通过换档激活的键...

有任何想法吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T06:43:30.050

我看到它适用于 Chrome，但不适用于 Firefox。尝试替换`keyCode`for `which`，它已针对所有浏览器进行了规范化。

[更新了 fiddle](http://jsfiddle.net/mgibsonbr/cG4aV/1/)，现在应该在两个浏览器中都可以使用。

[在event.which](http://api.jquery.com/event.which/)上引用 jQuery 文档：

> event.which 属性规范了 event.keyCode 和 event.charCode。建议观看 event.which 进行键盘按键输入。有关更多详细信息，请阅读 MDC 上的 event.charCode。

因此，测试 就足够了`which`，无需检查`keyCode`or `charCode`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T06:47:37.453

判断代码跨浏览器的正确表达式是

```
var code = (e.keyCode ? e.keyCode : e.which); 
```

它对我有用`firefox 12`

[工作演示](http://jsfiddle.net/joycse06/cG4aV/4/)

但你应该更好地`e.which`按照[jQuery doc](http://api.jquery.com/event.which/)使用

> event.which 属性规范了 event.keyCode 和 event.charCode。建议观看 event.which 进行键盘按键输入。

# elasticsearch - 即使转义，ElasticSearch 也会返回所有文档

> ID：10662959
> 
> 赞同：0
> 
> 时间：2012-05-19T06:37:52.317
> 
> 标签：elasticsearch

我有一个使用正则表达式转义查询的方法，用星号包装整个查询，然后将查询发送到 ElasticSearch。

一切都很好，除非用户在查询中只发送一个星号而不是我返回所有文档。我调试了代码，发送到服务器的查询是“*\**”，预期的行为是所有包含星号的文档都将被返回，但行为

我错过了什么？

谢谢

# javascript - 使 div 出现而不是滑动到位置

> ID：10662965
> 
> 赞同：0
> 
> 时间：2012-05-19T06:39:07.573
> 
> 标签：javascript, jquery, jquery-animate, progress

我有一个进度条，它应该转到六个缩略图之一，具体取决于您单击哪一个。从某种意义上说，它可以正常工作，并且可以正常工作。问题是，我需要它在移动时消失，并在停止移动时重新出现。我尝试使用`hide`，但这并不完全奏效。脚本是

```
 $(function(){
  $("#content div:not(.control)").bind('touchstart click', function() {
   $(".control").animate({ top: $(this).offset().top, height: $(this).height() });
  });
   }); 
```

有人可以帮我找到最好的方法吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T06:54:52.780

如果我做对了，也许会这样做：

```
$("#content div:not(.control)").bind('touchstart click', function() {
  // first, we hide .control, then do animation, then in the callback we do fadeIn
  $(".control").hide().animate({
    top: $(this).offset().top,
    height: $(this).height()
    }, function() {
       $(this).fadeIn();
    }
  );
}); 
```

# php - $_FILES 错误 - 未定义索引：图像

> ID：10662966
> 
> 赞同：-1
> 
> 时间：2012-05-19T06:39:18.997
> 
> 标签：php, indexing, undefined

上传图片.php

```
 define ('MAX_FILE_SIZE', 1024 * 50); 

  if ((isset($_POST['MM_insert'])) && ($_POST['MM_insert'] =="uploadImg")) {

    // make sure it's a genuine file upload  
    if (is_uploaded_file($_FILES['image']['tmp_name'])) {
      // replace any spaces in original filename with underscores
      $filename = str_replace(' ', '_', $_FILES['image']['name']);
      // ...
    }
  } 
```

HTML 模板：

```
<form action="UploadImage.php" method="post" 
      enctype="multipart/form-data"  name="uploadImg" id="uploadImg">
  <p>
    <input type="hidden" name="MAX_FILE_SIZE" value="MAX_FILE_SIZE" />
    <label for="image">Upload image:</label>
    <input type="file" name="image" id="image" /> 
  </p>

  <p>
    <input type="submit" name="upload" id="upload" value="Upload" />
  </p>

  <input type="hidden" name="MM_insert" value="uploadImg" />
</form> 
```

这给出了一个错误；`undefined index: image in ....... UploadImage.php` 我也给出了 enctype 表单属性...bt 它给出了一个未定义的索引错误:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T19:27:06.237

你能发布整个php吗？您的 php 代码中没有 session_start() 。

编辑：

`define ('MAX_FILE_SIZE', 1024 * 50);` 必须以 KB 为单位，而不是 MB...

尝试

```
define ('MAX_FILE_SIZE', 1024000 * 50); 
```

# joomla2.5 - joomla 中的模块或组件

> ID：10662972
> 
> 赞同：0
> 
> 时间：2012-05-19T06:40:00.633
> 
> 标签：joomla2.5

我想在 joomla 中构建一个购物车系统，我无法决定购物车会话对象应该去哪里以及我应该为此构建什么模块或组件。这个结账时的购物车应该被转移到贝宝和其他支付网关。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T19:32:16.370

你应该尝试一下，好用又好用，除了有一堆插件/模块来支持其他支付网关......

# php - 我正在努力的 CSS PHP

> ID：10662973
> 
> 赞同：0
> 
> 时间：2012-05-19T06:40:02.100
> 
> 标签：php, css

我很难弄清楚我刚买的新剧本的主题是怎么回事。

我的网站是 azngirls.com（别担心它不是色情的哈哈），如果您转到首页，您会看到顶部或标题栏上有一个导航栏，显示登录 - 注册（忘记密码）等。该栏应该在顶部没有任何间隙，但如果您访问网站的其他部分，例如[http://azngirls.com/tos](http://azngirls.com/tos) - 您会看到该导航栏与实际顶部之间存在间隙当您向下滚动时，它看起来很尴尬。每次我编辑 php 文件中最小的东西时都会出现这个问题，因为即使我更改了一个单词或字母，它也会突然显示出那个间隙。

我遇到的另一个问题是在同一页面上 - 在右侧的侧栏中有一个浏览器插件的“显示我”按钮，但是当我点击链接时，它会将我带到 404 页面，但是当我点击页脚菜单中的工具链接将我带到一个有效的页面。

非常感谢你们可以提供的任何帮助！真的很感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T06:43:30.270

`<body>`你有一个巨大的空行，在和`<meta>`标签之间填充了空格。并且您`<meta>`在正文中包含了一个标签，因为它应该在`<head>`标签中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T06:47:54.170

正如@tpaksu 建议的那样，您的html 完全搞砸了。您的问题很容易解决，只需将以下代码添加到您的样式表中。

```
.content-infobox {
  top: 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-19T06:53:39.293

在相应的 ID 上使用此代码

```
 #id{ 
        margin:0px;
} 
```

# javascript - 使用 Plone 添加/编辑弹出窗口

> ID：10662982
> 
> 赞同：1
> 
> 时间：2012-05-19T06:42:06.057
> 
> 标签：javascript, ajax, plone

我想在弹出对话框中打开 Plone 中的添加/编辑页面。

这将与通过从原始翻译源粘贴来大量填充多语言内容的列表结合使用。

Plone 4 提供了一些高级的弹出功能。

*   是否可以在弹出对话框中打开添加/编辑（jQuery 工具覆盖？）

*   此功能是否存在限制（验证等）

*   它发生在`<IFRAME>`?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T09:38:55.860

我自己还没有尝试过，但是使用它应该可以正常工作[`plone.app.jquerytools`](https://crate.io/packages/plone.app.jquerytools/)，这是 Plone 4.x 用于所有弹出窗口的方法。

如果您不希望 KSS 工作，这应该一切正常，包括验证。叠加层被加载到 a`<div>`中，而不是`<iframe>`.

对于覆盖，您只需指定一个表单选择器来选择页面的哪个部分是编辑表单，并告诉工具当您用完表单时要做什么（例如，编辑成功）。大概您想重新加载当前页面。像这样的东西可以解决问题：

```
$('li#contentview-edit a').prepOverlay({
    subtype: 'ajax',
    filter: '#content>*',
    formselector: 'form',
    noform: 'reload',
    closeselector: '[name=form.button.Cancel]'
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-20T10:30:17.067

你可能想看看 ploneformgen。在快速编辑模式下添加表单字段时，此产品会将添加/编辑表单加载到叠加层中。

# javascript - 焦点输入模糊事件不起作用

> ID：10662984
> 
> 赞同：2
> 
> 时间：2012-05-19T06:42:22.317
> 
> 标签：javascript, jquery, html

我的代码

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<title>Untitled Document</title>
<script src="js/jquery.js"></script>
<script>
$(function(){
$("input").blur(function(){$(this).focus();});});</script>
</head>

<body>
<input type="text" >
</body>
</html> 
```

它没有将输入集中在模糊事件上。为什么？建议解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T07:22:05.373

试试这个代码:)

```
<script type="text/javascript">

    $(function(){
        $("input").blur(function(){
            setTimeout(function(){  $("input").focus(); }, 20);
        });
        $("input").focusout(function(){
            setTimeout(function(){  $("input").focus(); }, 20);
        });
    });

</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T06:46:34.217

尝试这样的事情

```
 <script>
    $(function(){
    $("input").blur(function(){

    setTimeout(function() {$(this).focus();}, 20);
          });
    });
 </script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-19T08:23:20.207

试试这个，它对我很有效：

```
<script>
$(function(){
    $("input").blur(function(){
        (function(that) {
            setTimeout(function(){
                var oldTabIndex = that.attr('tabindex');
                that.attr("tabindex", 1);
                $(window).focus();
                if (!that.is(':focus')) {
                    that.focus();
                }
                that.attr('tabindex', oldTabIndex);
            }, 50);
        })($(this));
    });
});
</script> 
```

# android - SOAP 和 RESTful 解析之间的区别

> ID：10662987
> 
> 赞同：0
> 
> 时间：2012-05-19T06:42:59.070
> 
> 标签：android, rest

Restful 和 Soap 的主要区别是什么？

任何人都可以用例子解释宁静吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T06:56:34.150

1.  REST 是一种基于简单规则的架构风格，用于说明如何使用 HTTP，而 SOAP 是一种更加复杂和限制性更强的架构，具有大量（有时是可选的）规则，能够以复杂的编程为代价创建高级别的安全性。您必须为您的应用程序发明 REST 中的任何安全性。

2.  是的 - RESTful 服务本质上更快。同样，您需要在 REST 中使用的任何多个中间架构都必须自己完成。

根据有关该主题的许多文章，SOAP 有它的位置，并且不太可能消失。恕我直言，人们认为的大多数 Web 服务都可以在 RESTful 架构中做得更好。

请检查以下链接以获取 Restful 网络服务。

[您的解决方案在这里](https://stackoverflow.com/a/6978711/614807)

[http://timewasted.net/?p=127](http://timewasted.net/?p=127)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T07:54:36.057

让我们以一个简单的 Web 服务为例：查询电话簿应用程序以获取
给定用户的详细信息。我们所拥有的只是用户的 ID。

使用 Web 服务和 SOAP，请求将如下所示：

```
Soap Request:

<?xml version="1.0"?> <soap:Envelope xmlns:soap="http://www.w3.org/2001/12/soap-envelope"
soap:encodingStyle="http://www.w3.org/2001/12/soap-encoding">
<soap:body pb="http://www.acme.com/phonebook">
<pb:GetUserDetails>
<pb:UserID>12345</pb:UserID>
</pb:GetUserDetails>
</soap:Body>
</soap:Envelope> 
```

.

```
And with REST? 

The query will probably look like this:

http://www.acme.com/phonebook/UserDetails/12345 
```

**如果你想使用 SOAP，你必须首先定义什么是 GetUserDetails，它应该做什么？但是，如果您使用 REST，则 GET 方法已经在 HTTP 中定义。只是利用它。**

如果我错了请纠正..

# git - 将 GitHub 存储库与本地目录同步

> ID：10662991
> 
> 赞同：1
> 
> 时间：2012-05-19T06:43:37.383
> 
> 标签：git, github

我在 github 上创建了一个存储库。我的初始存储库内容如下：

```
D:\github\Learn-PyQt>目录
计算.py
连接.py
货币计算器.py
改进信号.py

```

就我的远程 git 存储库而言，上述所有文件都是最新的。我的意思是我已经`git add, git commit, git push`在我的存储库上成功执行了。

现在，经过上述步骤后，我错误地`Connections.py`从系统（本地机器）中删除了该文件。删除后我还没有推送任何东西。

现在，由于文件存在于我的 github 存储库中，有什么方法可以执行命令并更新上面提到的本地目录的内容。

我知道可以删除当前存储库并执行一个操作，`git clone`但我不想从我的存储库中下载所有文件。只是被删除的那一个。所以，像`git sync currentdirectory`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T06:47:02.703

简单地

```
git checkout -- Connections.py 
```

您将取回上次推送或上次添加到索引中的该文件的内容（减去自上次推送以来您可能进行的任何本地修改）。

简而言之，[`git checkout`](http://schacon.github.com/git/git-checkout.html)可以用于文件或路径，而不仅仅是像提交或标记这样的完整树。

如果您在意识到您的文件已被删除之前进行了多次提交，那么您将不得不应用“[在 Git 存储库中恢复已删除文件](https://stackoverflow.com/questions/953481/restore-a-deleted-file-in-a-git-repo)”的解决方案之一。

我特别喜欢，对于缺少某些文件的目录：

```
 git ls-files -d | xargs git checkout -- 
```

（[`git ls-files -d`](http://schacon.github.com/git/git-ls-files.html)将显示已删除的文件）

# c#-4.0 - C#中没有循环的数组列表

> ID：10662999
> 
> 赞同：0
> 
> 时间：2012-05-19T06:44:41.257
> 
> 标签：c#-4.0

我想知道如何在没有 for、foreach 或任何 LINQ 等循环的情况下初始化数组。

从以下代码中，需要使用控制台应用程序在 .Netframework 中查找长度小于 2m 的汽车。

```
{
    ArrayList = CarType new ArrayList();

    CarType.Add(new CarList("Ford"));
    ((CarList)CarType[0]).Cars.Add(new Car("Focus", 2));
    ((CarList)CarType[0]).Cars.Add(new Car("Fiesta", 1));

    CarType.Add(new CarList("Peugeout"));
    ((CarList)CarType[1]).Cars.Add(new Car("206", 1));
    ((CarList)CarType[1]).Cars.Add(new Car("407", 2));

    RemoveLargeCars(CarType);
}

public static ArrayList RemoveLargeCars (ArrayList CarType)
{
    //Array List should be here
    return CarType;

} 
```

它有两个类，如下所示。

```
class Car
{
    public string name;
    public float length;

    public Car(string newName, float newLength)
    {
        this.name = newName;
        this.length = newLength;
    }
}

Class CarList
{
    public string CarType;
    public ArrayList Pipes;

    public CarList(string newCarType)
    {
        carType = newCarType;
        Cars = new ArrayList();
    }
} 
```

你能告诉我如何解决这个问题。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T06:58:19.367

使用静态`Adapter`方法`ArrayList`

```
CarType = ArrayList.Adapter(CarList); 
```

但这可能在内部使用了一个循环，你无法摆脱它们，但至少这隐藏了它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T08:21:55.657

好吧，首先你应该使用通用列表类型`List<T>`而不是`ArrayList`，这将使代码更简单。（最好的做法是推荐属性而不是公共字段）：

```
class Car {

  public string Name { get; set; }
  public float Length { get; set; }

  public Car(string newName, float newLength) {
    Name = newName;
    Length = newLength;
  }

}

class CarList {

  public string CarType { get; set; }
  public List<Car> Cars { get; set; }

  public CarList(string newCarType, List<Car> newCars) {
    CarType = newCarType;
    Cars = newCars;
  }

  public CarList(string newCarType) : this(newCarType, new List<Car>()) {}

} 
```

现在使用`List<CarList>`：

```
List<CarList> CarType = new List<CarList>();

CarList ford = new CarList("Ford");
CarType.Add(ford);
ford.Cars.Add(new Car("Focus", 2));
ford.Cars.Add(new Car("Fiesta", 1));

CarList peugeot = new CarList("Peugeout");
CarType.Add(peugeot);
peugeot.Cars.Add(new Car("206", 1));
peugeot.Cars.Add(new Car("407", 2));

List<CarList> smallCars = RemoveLargeCars(CarType); 
```

您可以使用扩展方法轻松地根据条件过滤掉汽车：

```
public static List<CarList> RemoveLargeCars(List<CarList> CarType) {
  return CarType.Select(
    t => new CarList(t.CarType, t.Cars.Where(c => c.Length < 2f).ToList() 
  ) .ToList();
} 
```

请注意，该方法不会更改原始列表，而是创建一个新列表。