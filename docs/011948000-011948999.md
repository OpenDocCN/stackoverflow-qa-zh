# StackOverflow 问答 11948000-11948999

# scala - 如何更改构建定义的 Scala 版本？

> ID：11948002
> 
> 赞同：3
> 
> 时间：2012-08-14T07:53:50.677
> 
> 标签：scala, sbt

我正在开发一个简单的 SBT 项目，其中包括用于对 Scala Parallel 集合进行基准测试的 InputTasks。

我已经定义了 InputKeys 并在遇到问题时开始编写任务。

由于我的基准测试需要**Scala 2.10.0-M5**，我尝试在我的`build.sbt`：

```
name := "scala-parallel-collection-benchmark"

version := "1.0.0"

organization := "com.google.summer"

scalaVersion := "2.10.0-M5" 
```

但是，在编译时出现以下错误：

```
[info] Loading project definition from C:\Users\Administrator\scala-parallel-collection-benchmark\project
[info] Compiling 1 Scala source to C:\Users\Administrator\scala-parallel-collection-benchmark\project\target\scala-2.9.1\sbt-0.11.3\classes...
[error] C:\Users\Administrator\scala-parallel-collection-benchmark\project\Build.scala:47: value tasksupport is not a member of scala.collection.parallel.mutable.ParArray[Int]
[error]                 collection.tasksupport = new ForkJoinTaskSupport(new ForkJoinPool(par))
[error]                            ^
[error] one error found
[error] {file:/C:/Users/Administrator/scala-parallel-collection-benchmark/project/}default-e0b2a2/compile:compile: Compilation failed 
```

看来它仍然使用**Scala 2.9.1**来编译它。

如何设置 SBT 以便它使用 Scala 2.10.0-M5 编译我的代码？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-14T16:49:37.993

`scalaVersion`仅影响用于编译“实际”源代码（通常位于`src/...`）的 Scala 版本。您的错误来自构建定义的一部分（在 下`project/`），它始终使用构建 sbt 的 Scala 版本进行编译。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-14T17:25:34.633

您不能修改用于编译项目定义的 Scala 版本，因为它必须是与用于编译 SBT 本身的版本兼容的版本二进制文件。在这方面正在研究一些灵活性，但是，现在，它是固定的。

该设置`scalaVersion`将更改用于编译项目本身的 Scala 版本。该项目可以使用完全不同的版本进行编译，事实上，您甚至可以让 SBT 使用多个 Scala 版本编译您的项目。

* * *

## 回答 #3

> 赞同：-5
> 
> 时间：2012-08-15T05:14:41.780

您可以在文件“project/build.properties”中更改 scala 版本，例如 sbt.version=0.11.2

# mysql - 在 mysql 上分区表时出现错误 #1526

> ID：11948005
> 
> 赞同：1
> 
> 时间：2012-08-14T07:53:55.750
> 
> 标签：mysql, partitioning

对不起，我不懂英语，但我需要帮助:(

我通过 ALTER TABLE 语句使用 LIST COLUMNS 分区我的表：

```
table member_list: 
id int,
name varchar(255),
company varchar(255),
cell_phone varchar(20) 
```

没有关键我目前有超过 900.000 条记录。插入后，我尝试按 LIST COLUMNS 分区表：

```
alter table member_list
partition by list columns(company)(
    partition p1 values in ('Lavasoft','Cakewalk','Lycos'),
    partition p2 values in ('Adobe','Vivoo','Apple Systems','Sibelius'),
    partition p3 values in ('Finale','Borland','Macromedia','FPT'),
    partition p4 values in ('Chami','Yahoo','Google','Altavista')
) 
```

运行后：

**#1526 - 表没有来自 column_list 的值的分区**

MySQL 向我返回了这个错误，我无法从 Oracle 页面找到支持。我希望你能帮助我。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-03-12T03:25:32.220

**#1526 - 表没有来自 column_list 的值的分区**

错误消息告诉您，在您为分区选择的列之一中的数据中存在一个值，该值未在您定义的分区中考虑。

在这种情况下，“公司”字段中有一些内容不能放入任何分区中。例如，根据某些记录，company="Blackberry"。MySQL 不能将此行放入您的任何分区中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-15T10:38:30.540

LIST 分区只允许整数值。如果要使用带有 varchar 分区的列，请使用 HASH 或 KEY PARTITIONS。此外，分区只能用于具有主要或唯一属性的列。

# puzzle - 长度为 k 的可能二进制字符串的数量

> ID：11948007
> 
> 赞同：2
> 
> 时间：2012-08-14T07:54:12.850
> 
> 标签：puzzle

我的一个朋友最近被问到这个问题：

您必须计算可能有多少个长度为“K”的二进制字符串。约束：每个 0 的左边都有一个 1。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T08:04:15.560

这个问题可以改写：如果没有两个连续的 0，有多少个长度为 K 的二进制序列是可能的，但第一个元素应该是 1（否则约束失败）。让我们忘记第一个元素（我们可以这样做，因为它总是固定的）。然后我们得到了一个非常有名的任务，听起来像这样：“长度为 K-1 且没有连续 0 的二进制序列的数量是多少。” 可以找到解释，例如，[here](http://radio-weblogs.com/0122027/2003/08/20.html)

那么答案将是 F(K+1)，其中 F(K) 是从 (1 1 2 ...) 开始的第 K 个斐波那契数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T20:31:38.007

`∑ From n=0 to ⌊^K/[2]⌋ of (K-n)Cn`; n 是字符串中零的个数

这个想法是将每个 0 与 1 分组并找到字符串的组合数，对于 n 个零，将有 n 个分组到它们，因此字符串变成 (kn) 个元素长。不能有超过^K / [2 个]零，因为在每个零的最左边没有足够的零。
例如`111111[10][10]1[10]`，对于 K = 13，n = 3

# c# - httpRequest 暂时冻结了我的应用程序

> ID：11948010
> 
> 赞同：0
> 
> 时间：2012-08-14T07:54:29.947
> 
> 标签：c#, .net, wpf, oauth, httprequest

好的，在我继续之前，让我声明我的背景是网络脚本；所以应用程序对我来说很陌生。我对 .NET 知之甚少，而且我一直在滑冰，因为我的知识有限。

无论如何，在我的应用程序中，我有一个 OAuth httpRequest。请求本身运行良好，它从 Web API 获取我需要的数据。但是，问题是每当我单击激活请求的按钮时，我的程序都会冻结几秒钟，直到请求完成。我还有另一个请求，它每 60 秒自动完成一次。这当然意味着每 60 秒，我的程序就会冻结几秒钟。如何解决这个问题？

```
 private string twitchCallAPI(string accessKey, string accessSecret, string endpointURI, string httpMethod)
    {
        OAuthHttpWebRequest httpRequest = new OAuthHttpWebRequest();
        httpRequest.ConsumerToken = new OAuthToken { Token = this.twitchConKey, TokenSecret = this.twitchConSecret };
        httpRequest.Token = new OAuthToken() { Token = accessKey, TokenSecret = accessSecret };
        httpRequest.SetUri(endpointURI);
        httpRequest.Method = httpMethod;

        try
        {
            using (var response = httpRequest.GetResponse())
            {
                using (var reader = new StreamReader(response.GetResponseStream()))
                {
                    return reader.ReadToEnd();
                }
            }
        }
        catch (WebException ex)
        {
            using (var reader = new StreamReader(ex.Response.GetResponseStream()))
            {
                System.Windows.MessageBox.Show(reader.ReadToEnd());
            }
        }
        catch (Exception ex)
        {
            System.Windows.MessageBox.Show(ex.ToString());
        }

        return string.Empty;
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T07:57:37.090

您可以使用[后台工作人员](http://msdn.microsoft.com/en-us/library/cc221403%28v=vs.95%29.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T07:59:33.823

简而言之，在任务中请求并使用 UI 同步上下文更新 UI 线程

```
TaskFactory.StartNew(()=>
{
    //do web request
})
.ContinueWith(() =>
{
    this.TextBlock1.Text = "Complete"; 
}, TaskScheduler.FromCurrentSynchronizationContext()); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T07:56:27.280

您可以尝试使用 Async 方法，即使用不同的线程来等待请求的响应。它是您可以探索的解决方案。

[http://msdn.microsoft.com/en-us/library/86wf6409%28v=vs.100%29.aspx](http://msdn.microsoft.com/en-us/library/86wf6409%28v=vs.100%29.aspx)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-14T08:23:09.443

您可以使用 await 关键字：

```
private async void OnButtonClick()
{
   TextBox.Text = await twitchCallAPIAsync(accessKey, accessSecret, endpointURI, httpMethod);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-14T07:57:29.213

主要原因是您的应用程序正在等待您启动的方法完成。您必须看一下“异步”概念。

执行“异步”方法的程序会继续其工作流程，并且不会等待该方法产生结果。

# java - java 7中的下划线和二进制文字。!!!??

> ID：11948012
> 
> 赞同：-5
> 
> 时间：2012-08-14T07:54:40.540
> 
> 标签：java, java-7

结果会怎样？

```
int i=1_00_00;  
int b=0b1_00; 
```

它会显示下划线吗？

```
if(i.equals(10000)){   
    System.out.println(i);
} 
```

它将二进制转换为十进制吗？

```
if(b.equals(8)){  
    System.out.println(b);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T07:59:45.327

`_`只是为了提高可读性。您可以使用`.equals`或任何带有原语的方法，只需打印出值，您无需先检查它们。

> 它会显示下划线吗？

没有办法将下划线存储在原语中（除了 char ch = '_'）

> 它会将二进制转换为十进制吗？

所有数字都以二进制形式存储，所以这并不是什么新鲜事。;)

# php - 随机产品 magento 每次显示 2 个固定产品

> ID：11948016
> 
> 赞同：0
> 
> 时间：2012-08-14T07:54:48.747
> 
> 标签：php, magento

我正在使用 magento 的默认随机产品块。因为它在今天之前工作正常。但现在每次只显示两个固定产品。我设置了 5 个产品的限制。

突然，它的行为很奇怪。

这是我在随机块中的代码

```
 protected function _getProductCollection()
    {
        if (is_null($this->_productCollection)) {
            $collection = Mage::getResourceModel('catalog/product_collection');
            Mage::getModel('catalog/layer')->prepareProductCollection($collection);
            $collection->getSelect()->order('rand()');
            $collection->addStoreFilter();
            $numProducts = $this->getNumProducts() ? $this->getNumProducts() : 0;
            $collection->setPage(1, $numProducts)->load();

            $this->_productCollection = $collection;
        }
        return $this->_productCollection;
    } 
```

这是我在主页 CMS 页面中的块代码。

> {{block type="catalog/product_list_random" name="product_random" num_products="5" template="catalog/product/random.phtml"}}

这是我在模板文件中的调用。

```
$_productCollection=$this->getLoadedProductCollection(); 
```

一件更烦人的事情是，如果我在管理站点中将产品设置为新产品，该产品显示在随机产品列表中。这到底是怎么回事？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T11:41:48.197

哎呀！那又是一个重新索引问题！！！！

重新索引后，随机产品块按预期工作。

发生了什么，Magento 只从新创建/更新的产品中挑选随机产品。

只是在晚上重新索引的猜测让我的夜晚。

# windows - Windows 命令提示符：如何传递多行字符串参数

> ID：11948025
> 
> 赞同：22
> 
> 时间：2012-08-14T07:55:31.350
> 
> 标签：windows, command-prompt

我有一个接受字符串参数的程序。我创建了一个执行程序的批处理文件和一个多行字符串参数。在多行字符串之后我还有第二个参数。

```
C:\>MyProgram "This is a
multiline text" parameter2 
```

当我运行它时，命令中只包含第一行字符串，随后的行和第二个参数被忽略。有没有办法传递多行字符串参数？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-14T08:01:11.240

您的问题与 [-Windows：如何在命令提示符下指定多行命令重复？](https://stackoverflow.com/questions/605686/windows-how-to-specify-multiline-command-on-command-prompt)

> 在 Windows 命令提示符中，^ 用于转义命令行中的下一个字符。
> 
> 例如，（More? 是一个提示）：

```
C:\>cd "c:\Program Files" ^
More? "\Common Files"

C:\>MyProgram "This is a " ^  
More? "multiline text" parameter2 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-10-08T08:30:58.387

该例程将多行写入 .txt 的驱动器和目录中的文本文件 ASM.txt `F:\Backup_Info`。请注意，它将使用空格然后`^`符号给出一个行空间，如图所示，每个语句之间需要一个行空间：

```
(echo To Do is to Understand^

Who Dares Wins^

 ^

Baz) > F:\Backup_Info\ASM.txt 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-04-02T10:01:38.120

您可以将 ^ 的输出保存为变量

```
set br= ^
<</br (newline)>>
<</br>> 
```

例子：

```
@echo off
setlocal enableExtensions enableDelayedExpansion
rem cd /D "%~dp0"
set br= ^

rem br, can't be saved to a var. by using %..%;

set "t=t1!br!t2!br!t3"

for /f "usebackq tokens=* delims=" %%q in ('!t!') do (
    echo %%q
)

:scIn
rem endlocal
pause
rem exit /b 
```

; 输出：

```
t1
t2
t3
Press any key to continue . . . 
```

# jquery - 选择最近的类点击按钮

> ID：11948029
> 
> 赞同：2
> 
> 时间：2012-08-14T07:56:00.260
> 
> 标签：jquery

单击button1时，我想用“divtoexpand”类扩展最近的div。

我怎样才能做到这一点？

HTML：

```
<div class="test">
    <div class="menu">
        <div class="button1"></div>
    </div>
</div>
<div class="divtoexpand"></div>

<div class="test">
    <div class="menu">
        <div class="button1"></div>
    </div>
</div>
<div class="divtoexpand"></div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T07:57:23.130

```
$('.button1').on('click', function() {
  $(this).closest('div.test').next('div.divtoexpand').slideDown();
}); 
```

**[演示](http://jsfiddle.net/sBFL4/4/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T07:58:48.197

如果您需要更通用的方法，可以尝试以下方法：

```
$('.button1').on('click', function() {
  $(this).parents().next('.divtoexpand').slideDown();
}) 
```

[演示](http://jsfiddle.net/pWvSd/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T08:01:42.190

首先，我会给你的按钮一个 ID。然后您可以在单击按钮时进行显示：

```
 <div class="test">
     <div class="menu">
         <div class="button1" id="foo"></div>
     </div>
 </div>
 <div class="divtoexpand" id="bar"></div>

 <script>
   $("#foo").click(function(){
     $("#bar").show()   
   });  
 </script> 
```

# java - java中的TreeSet无法正确显示数据

> ID：11948034
> 
> 赞同：0
> 
> 时间：2012-08-14T07:56:20.040
> 
> 标签：java, tostring

```
public class Book {
    String title;

    public Book(String t) {
        title = t;
    }
}

public class Bookcomparator implements Comparator<Book> {
    public int compare(Book one, Book two) {
        return (one.title.compareTo(two.title));
    }
}

public class TreesetTest {
    public void go() {
        Book b1 = new Book("How");
        Book b2 = new Book("Remix");
        Book b3 = new Book("Finding ");

        Bookcomparator bc = new Bookcomparator();
        TreeSet<Book> set = new TreeSet<Book>(bc);
        set.add(b1);
        set.add(b2);
        set.add(b3);

        System.out.println(set);
    }
}

public class Test {
    public static void main(String args[]) {
        TreesetTest t = new TreesetTest();
        t.go();
    }
} 
```

当我运行这个程序时，它显示

```
[first.Book@c2ea3f, first.Book@a0dcd9, first.Book@1034bb5] 
```

请有人帮助我。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-14T07:57:43.987

您必须覆盖类`toString()`中的方法`Book`：

```
@Override
public String toString() {
    return this.title;
} 
```

或尝试更高级的东西：

```
@Override
public String toString() {
    return "[Book: title='" + this.title + "']";
} 
```

在 prints 中找到的默认实现[`Object.toString()`](http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#toString())不是很有用`first.Book@c2ea3f`。

# jquery - jquery中HTML5的电子邮件模式错误

> ID：11948038
> 
> 赞同：1
> 
> 时间：2012-08-14T07:56:44.750
> 
> 标签：jquery, html

我有一个表单，所以当用户单击编辑按钮时，文本替换为输入 type="email" 并且还匹配给定的电子邮件模式

```
 <label for="name-c">Email-Id:</label>
             <label class="email">abc@xyz.com</label>
                 <button class="edit">edit</button> 
```

jQuery代码：

```
$('.edit').click(function () {
  var email=$('.email').text();
   $('.email').replaceWith(function () {
     var pattern = /^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,6}$/;
     return '<input type="email" id="email" name="email" title="Enter email like abc@xyz.com" required placeholder="abc@xyz.com"   pattern="' + pattern + '"'+'class="ui-input-text ui-body-c ui-corner-all ui-shadow-inset"/>'});
     $('#email').val(email);}); 
```

我收到错误消息，尽管它是正确的，但请输入给定的模式。但是当我通过简单的放置`input type="email"`和模式匹配时，它的匹配。我完全混淆了我的代码不正确的地方。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T08:23:07.230

我认为你不需要模式。当您指定时，`type="email"`它是控制该值的导航器。我使用默认参数测试 [here][1]，它适用于我的 chrome 和 firefox。但是当我添加像“。*”这样的模式时，检查失败了，这很奇怪。

在 W3C 给出的规范中，它们允许属性模式，但是当您向下滚动到[值](http://www.w3.org/TR/html-markup/input.email.html#input.email.attrs.value.single)时，它们的值将使用指定的值进行检查。

所以你不需要添加模式检查是隐式的。

编辑 ：

试试这个正则表达式 ^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?: .[a-zA-Z0-9-]+)+$ 我采用 w3c 规范中定义的正则表达式，并将最后的 * 更改为 +。

编辑 ：

最后我发现了错误，实际上当您在此处使用 jquery 添加输入时，它错过了反斜杠，解决方案[http://jsfiddle.net/KaBut/6/](http://jsfiddle.net/KaBut/6/)

# mysql - mysql period(.) 搜索模式

> ID：11948042
> 
> 赞同：0
> 
> 时间：2012-08-14T07:56:51.383
> 
> 标签：mysql, regex

我需要一个场景，需要根据其中的周期数对结果进行排序。

字段值为：

```
aa.bb.ee.tt
aa.tt.ee
aa.tt 
```

如果我只想搜索包含在单个周期内的值，查询将是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T08:09:39.737

如果列名是***str***，并且您**输入 substr = "."** 在下面的 SQL 中，你会得到你想要的。按 str 列中的句点数排序

```
SELECT (LENGTH(str) - LENGTH(REPLACE(str, substr, ''))) / LENGTH(substr) AS cnt
...
ORDER BY cnt DESC 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T08:50:00.370

由于没有内置的 MySQL 函数来计算字符串中字符的出现次数，我们可以使用以下步骤来完成：

1.  计算原始字符串中的字符数
2.  暂时‘删除’你要统计的字符，再统计字符串
3.  从第二个中减去第一个计数以获得出现次数

前任。

```
SELECT CHAR_LENGTH('hello') - CHAR_LENGTH(REPLACE('hello', 'l', '')) AS `COUNT` 
```

返回 2

如果你想订购结果，

```
SELECT CHAR_LENGTH(colName) - CHAR_LENGTH(REPLACE(colName, xChar, '')) AS `COUNT`
FROM tableName
ORDER BY `COUNT` DESC 
```

在哪里

`colName`是包含您的字符串的列的名称
`xChar`是您要查找的字符

顺便说一句，使用`CHAR_LENGTH()`而不是`LENGTH()`因为返回**以字节为单位测量**`LENGTH()`的字符串的长度。返回以字符为**单位测量**的字符串长度。**`CHAR_LENGTH()`**

 ***** * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T08:04:45.213

```
private void CheckPeriod(string stringLine)  
{  
int counter = 0;

foreach (char c in stringLine)  
{  
if(c == ".")  
{  
counter = counter + 1;  
}    
}  

if(counter == 1)  
{  
//Do code  
}  
} 
```

希望这会有所帮助，或指向正确的方向

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T08:07:23.780

嗯，你可以像

```
 SELECT * FROM TABLE_NAME WHERE COL_NAME REGEXP "[A-Za-z0-9]*\.[A-Za-z0-9]*" 
```

用于获取单个周期值并以相同方式为多个周期结果添加更多周期****

# java - Oracle NoSQL 数据库 - 使用它进行开发

> ID：11948043
> 
> 赞同：1
> 
> 时间：2012-08-14T07:56:58.823
> 
> 标签：java, c++, sql, oracle, oracle-nosql

我最近接触到了[Oracle NoSQL 数据库](http://www.oracle.com/technetwork/products/nosqldb/downloads/index.html?ssSourceSiteId=ocomen)。
似乎只能从 Java 连接到它（[更多信息在这里](http://docs.oracle.com/cd/NOSQL/html/index.html)）。是否可以使用其他语言的数据库，例如：Python、Erlang、C++ 等？`11G`或者它就像可以通过 ODBC、Oracle 驱动程序等访问的常用数据库？

任何对此有更多信息的人，我将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T08:01:26.777

看看这个：[https ://github.com/yeysus/14a](https://github.com/yeysus/14a)

我不知道目前的开发状态，交互的支持可能会受到限制，因为 Java 是这个 DB 的主要语言。

如果它是关于没有 Java 的 NoSQL 并且您可以选择，那么像 MongoDB 或 CouchDB 之类的东西可能是更好的选择！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-30T08:16:28.637

对不起，旧帖。但是，我仍然会继续回应，以防万一其他人面临类似问题。

Oracle NoSQL 确实有适用于 python、javascript 的驱动程序。请参阅以下链接：

Python：[https](https://pypi.python.org/pypi/nosqldb) ://pypi.python.org/pypi/nosqldb JavaScript：[https ://www.npmjs.com/package/nosqldb-oraclejs](https://www.npmjs.com/package/nosqldb-oraclejs)

# .net - 是否可以在工具提示的内容中有一个可点击的按钮并在不关闭工具提示的情况下使用它？

> ID：11948044
> 
> 赞同：1
> 
> 时间：2012-08-14T07:57:01.103
> 
> 标签：.net, wpf, events, tooltip

在我的 WPF 应用程序中，我有一个工具提示，它显示了许多带有分页的消息。用户应该能够通过按下下一步按钮来查看下一条消息。问题是当单击下一个按钮时，工具提示会关闭。有没有办法让它保持打开并处理事件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T08:09:51.220

Click 是一个路由事件，它会冒泡到`Tooltip`in`VisualTree`并`Tooltip`在此事件发生时关闭。所以我建议你停止这种冒泡。

将`RoutedEventArgs`Handled 属性设置为 true

```
void NextButtonClicked(object sender, RoutedEventArgs e)
{
    //Application logic
    e.Handled = true;
} 
```

# c# - 字符串生成器输出

> ID：11948047
> 
> 赞同：0
> 
> 时间：2012-08-14T07:57:05.287
> 
> 标签：c#, stringbuilder

我目前有一个字符串生成器，它从内存中的 XSLT 转换中获取输出。我遇到的问题是，当我将字符串生成器转换`.ToString()`为返回将所有引号更改为的内容时`\"`，例如。`<?xml version=\"1.0\" encoding=\"utf-16\"?>`，然后这会导致将数据重新加载到`XDocument`.

```
StringBuilder OutputXML = new StringBuilder();
XSLTTransformer.Transform(XmlDoc.CreateReader(), writer);
return OutputXML.ToString(); 
```

我试过`.Replace("\\\"", "")`但是这不起作用，所以我怎样才能防止/替换这些事件并保持字符串`"`这样输出`<?xml version="1.0" encoding="utf-16"?>`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T08:00:16.697

你怎么看这个字符串？

因为听起来您可能正在调试器中查看它，并且调试器将'"'表示为'\"'。

所以字符串本身很好，如果呈现给用户，保存到文件等，它将正常工作。它只是在调试器中看起来被转义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T07:59:05.883

`\"`只是一个转义序列`"`

仅在字符串`"`中，但在调试器中以这种方式显示。所以不用担心。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T08:00:00.570

您可以在字符串之前逐字使用字符串，这样它就会完全按原样解释它们，只需在字符串前面使用“@”即可。

[http://www.c-sharpcorner.com/uploadfile/harishankar2005/verbatim_literals11262005010742am/verbatim_literals.aspx](http://www.c-sharpcorner.com/uploadfile/harishankar2005/verbatim_literals11262005010742am/verbatim_literals.aspx)

# sql - 在 select 子句中从子表中选择列

> ID：11948050
> 
> 赞同：0
> 
> 时间：2012-08-14T07:57:12.517
> 
> 标签：sql, sql-server

SQL server 有没有办法让子记录显示为主表的 select 子句的字段？

假设有一个主表 Sales 和一个名为 Purchaseditems 的子表。

SaleId 在 Purchaseitems 表中被引用。

因此，对于销售，有很多购买物品。如果是这样，我如何编写查询以在 select 子句中选择每个销售及其购买的商品？

这是一种从子表中动态选择列的方式。这在 SQL Server 中可行吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T08:01:34.953

不确定我是否在这里得到了错误的想法，但这不仅仅是一个简单的连接：

```
select s.saleid, p.* 
from sales s, purchaseditems p
where s.salesid = p.salesid; 
```

# javascript - 问题 - 在 queryloader2 加载页面前 1 秒显示页面

> ID：11948055
> 
> 赞同：0
> 
> 时间：2012-08-14T07:57:31.637
> 
> 标签：javascript, jquery, html

我在我的网站（[链接](http://goo.gl/9Xt2b)）上使用查询加载器。由于某种原因，主页会在查询加载器完成其工作之前的一秒钟内出现（在显示网站之前加载图像的进度条）。

我认为这是因为页面是在加载查询加载器脚本之前加载的，但不知道如何解决这个问题。目前，代码在 [queryloader2 网站](http://www.gayadesign.com/diy/queryloader2-preload-your-images-with-ease/)`$(document).ready`上的建议中 ，我在我的 head 标签中调用脚本（位于 js/scripts.js 中）。

```
$(document).ready(function () {
    $("body").queryLoader2();

    $('.activity-title a').click(function() {
        var region = $(this).attr('data-region');

        $('.textzone:visible').fadeOut(2000, function () {
            $('#' + region).fadeIn(2000);
        });

        return false;            
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-20T21:55:17.733

很抱歉提出一个旧线程，但对于任何面临这个问题的人，这是我的修复.. 我在 Body 标签打开后添加了一个覆盖 div

```
<div id="preloader"></div> 
```

并添加了这个 CSS

```
 #preloader {
    position:fixed;
    top:0;
    left:0;
    right:0;
    bottom:0;

    background-color:#fff; /* change if the mask should have another color then white */
    z-index:99; /* makes sure it stays on top */
} 
```

并添加`onLoadComplete: hidePreLoader`到 QueryLoader 选项

然后在该功能上，一旦完成就隐藏覆盖。

```
function hidePreLoader() {
        $("#preloader").hide();
    } 
```

差不多就是这样，希望它可以帮助那里的人:)

# perl - 替换一组文件中的一组字符串的脚本

> ID：11948058
> 
> 赞同：1
> 
> 时间：2012-08-14T07:57:38.877
> 
> 标签：perl, shell

对于 myfolder 中可用的一组 java 文件，我想替换：

```
ColorTee.testh = new TestH(A,"JavaFileName".class);
ColorTee.testh.addFile(C,"/folder1/folder2/folder3/file","myFile") 
```

和：

```
ColorTee.testh = new TestH(Z,A,"JavaFileName".class);
ColorTee.testh.addFile(C,/folder3/file,"myfile"); 
```

知道“myfile”与一个文件不同

并`import com.soft.test.event;`在之后添加

```
import java.io.File; 
```

并尝试：

```
#!/bin/bash
for file in *.java
do
  echo 
  sed -i -e "" "$file"
done 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T08:07:22.777

未测试，不知道post中是否有错误但/folder3/file在java中似乎无效

```
perl -i.bak -pe '
    s/ColorTee\.testh = new TestH\(A,B\);/ColorTee.testh = new TestH(Z,A,F);/;
    s^ColorTee\.testh\.addFile\(C,"/folder1/folder2/folder3/file","myFile"\)^ColorTee.testh.addFile(C,/folder3/file,"myfile");^;
    s/import java.io.File;/import java.io.File;\nimport com.soft.test.event;/;
  ' *.java 
```

-i.bak => 将备份 *.java.bak 中的原始文件在命令中删除 .bak 以禁用备份

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T08:18:09.507

使用follow shell命令替换它。我不知道你的模式是否一直保持不变。你可以随意更改替换部分。

用替换字符串替换模式：

```
sed -e s/repexpr/replacement string/ "$file".bak >> "$file"; 
```

添加换行符，您可以使用

```
sed '/import java.io.File;/a\import com.soft.test.event;' "$file" 
```

就像是。

```
for file in *.java
do  
    mv "$file" "$file".bak
    sed -e s/TestH\(A/TestH\(Z,A/ "$file".bak >> "$file"
    mv "$file" "$file".bak
    sed '/import java.io.File;/a\import com.soft.test.event;' "$file".bak >> "$file"
    rm  "$file".bak
done 
```

抱歉，但我不知道如何使用多行替换。你可以做两次。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T08:07:55.397

没有特别的困难：

```
for file in *.java
do
    sed -i.bak -e \
    "s#import java.io.File;#import java.io.File;\nimport com.soft.test.event;#;s#ColorTee.testh = new TestH(A,\"JavaFileName\".class);#ColorTee.testh = new TestH(Z,A,\"JavaFileName\".class);#g;s#ColorTee.testh.addFile(C,\"/folder1/folder2/folder3/file\",\"myFile\")#ColorTee.testh.addFile(C,/folder3/file,\"$file\");#g" "$file"    
done 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T09:46:21.453

这将满足您的要求

```
use strict;
use warnings;

use Tie::File;

my $dir = 'myfolder';
opendir my $dh, $dir or die $!;
my @files = map "$dir/$_", grep /.java$/, readdir $dh;

my @lines = (
  'ColorTee.testh = new TestH',
  'ColorTee.testh.addFile',
  'import java.io.File',
);
do { s/\s+/\\s+/g; s/\./\\./g; } for @lines;

for my $file (@files) {

  tie my @text, 'Tie::File', $file or die $!;

  for (my $i = 0; $i < $#text; $i++) {

    if ($text[$i] =~ /$lines[0]/ and $text[$i+1] =~ /$lines[1]/) {
      $text[$i] =~ s/\(A,\s*"JavaFileName"/(Z,A,"JavaFileName"/;
      $text[$i+1] =~ s|folder1/folder2/folder3/|folder3/|;
      $i += 2;
    }
    elsif ($text[$i] =~ /$lines[2]/) {
      splice @text, $i+1, 0, 'import com.soft.test.event;';
      $i += 1;
    }
  }

  untie @text;
  print "$file updated\n";
} 
```

# html - SpringMVC：在要删除的表单中指定方法的问题

> ID：11948064
> 
> 赞同：3
> 
> 时间：2012-08-14T07:58:02.693
> 
> 标签：html, spring, spring-mvc

我正在尝试删除服务器上的资源，并希望通过网页上的普通链接来执行此操作。

我了解单击链接时，我们无法向服务器发送 DELETE 请求，因此我尝试使用

```
<form id="aux_form" action="environment/">
   <input type="hidden" name="_method" value="delete">
   <input type="hidden" name="id" value="${env.id}">
</form> 
```

我的 Spring 控制器方法带有注释

```
@RequestMapping(value = "/environment/", method = RequestMethod.DELETE) 
```

但是，我收到错误消息*“请求的资源不允许指定的 HTTP 方法（不支持请求方法 'GET'）。”* 所以我知道我的控制器方法没有被调用并且删除请求没有正确映射。

如果有人能告诉我如何正确发送此删除请求，将不胜感激。

谢谢 ：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T12:47:22.410

这应该有效：

在您的 web.xml 文件中注册此过滤器，这会将表单中的 _method 隐藏参数转换为`DELETE`Http 请求：

```
<filter>
    <filter-name>HttpMethodFilter</filter-name>
    <filter-class>org.springframework.web.filter.HiddenHttpMethodFilter</filter-class>
</filter>

<filter-mapping>
    <filter-name>HttpMethodFilter</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping> 
```

现在您的请求可以由这种类型的处理程序处理：

```
@RequestMapping(value = "/environment/", method = RequestMethod.DELETE) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T08:08:05.570

您不能从`<form>`标签发送 DELETE 请求。在您的代码中，您仍然将其作为 GET 发送。

您应该应用基于 ajax 的解决方案。

```
$.ajax({
    url: '/environment/',
    type: 'DELETE',
    success: function(result) {
        // Do something with the result
    }
}); 
```

或将您的`@RequestMapping`注释映射到 GET。

# php - Social Engine 从数据库中获取数据并打印出来

> ID：11948065
> 
> 赞同：1
> 
> 时间：2012-08-14T07:58:03.127
> 
> 标签：php, zend-framework, zend-db, socialengine

我尝试在 SE4 中创建一个模块，并按照教程（[如何创建模型并从 MySQL 获取数据以在 SE4 中显示](http://chuangyeideas.wordpress.com/2011/08/24/how-to-create-a-model-and-get-data-from-mysql-to-display-in-se4/)）但似乎无法在我的视图中打印出我的数据库输出。这是代码：

数据库转储，我使用 engine4_ 前缀，因为我的所有其他表都以这种方式命名

```
-- phpMyAdmin SQL Dump
-- version 2.11.11.3
-- http://www.phpmyadmin.net
--
-- Host: localhost
-- Generation Time: Aug 14, 2012 at 11:32 AM
-- Server version: 5.5.23
-- PHP Version: 5.3.14

SET SQL_MODE="NO_AUTO_VALUE_ON_ZERO";

--
-- Database: `xyzeljubko`
--

-- --------------------------------------------------------

--
-- Table structure for table `engine4_zki_pitanja`
--

CREATE TABLE IF NOT EXISTS `engine4_zki_pitanja` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `test` varchar(20) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=2 ;

--
-- Dumping data for table `engine4_zki_pitanja`
--

INSERT INTO `engine4_zki_pitanja` (`id`, `test`) VALUES
(1, 'Stringcina'); 
```

我的模块名为`zki`，这是我创建的两个模型，`/Zki/Models/pitanje.php`

```
<?php 
    class Zki_Model_Pitanje extends Core_Model_Item_Abstract
    {
        protected $_owner_type = 'user';
    }
?> 
```

和模型`Zki/Models/DbTable/pitanja.php`（复数）

```
<?php 
    class Zki_Model_DbTable_Pitanja extends Engine_Db_Table
    {
        protected $_rowClass = 'Zki_Model_Pitanje';
    }
?> 
```

作为控制器，这里是`Zki/Controllers/pitanjeController.php`

```
<?php 

    class Zki_PitanjeController extends Core_Controller_Action_Standard
    {
        public function indexAction()
        {
            // default action
        }

        public function viewtestAction()
        {
            // uzmi tabelu
            // getDbTable(TABLENAME, MODULENAME);
            $table = Engine_Api::_()->getDbTable('pitanja', 'zki');

            // neki filtering, select i to
            // docs: http://framework.zend.com/manual/en/zend.db.select.html
            $select = $table->select(); // ->where("user_id = $id", 1)->order('creation_date');

            // dohvati podatke
            $result = $table->fetchAll($select);
            $this->view->pitanja = $result;
        }
    }
?> 
```

最后是我的观点`Zki/Views/scripts/pitanje/viewtest.tpl`

```
<?php 
    foreach($this->pitanja as $pitanje) {
        echo 'Id pitanja: ' . $pitanje->id . ' and test string is ' . $pitanje->test . '. Endline. <br/>';
    }
?> 
```

但似乎不起作用。我不确定如何调试此问题，但似乎微不足道。谁能帮我意识到我在这个问题上哪里错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T20:00:47.563

1.  您是否已将`id`列设为主要？
2.  文件名应以大写字母开头。
3.  检查日志（控制面板 > 统计信息 > 日志浏览器）是否有错误。

# html - 使用具有多种样式的@font-face

> ID：11948079
> 
> 赞同：5
> 
> 时间：2012-08-14T07:58:54.547
> 
> 标签：html, css, fonts

Google 网络字体中的 Droid Serif 字体具有以下样式：

```
DroidSerif.ttf
DroidSerif-Bold.ttf
DroidSerif-BoldItalic.ttf
DroidSerif-Italic.ttf 
```

我想使用`@font-face`CSS 声明在“Droid Serif”下导入所有这些样式，`font-family`并使用该`font-weight`属性来指定我是否想要粗体和/或斜体，而不必在不同的情况下单独导入它们`font-family`：

```
@font-face {
    font-family: 'Droid Serif';
    src: url('../fonts/DroidSerif.ttf');
}

@font-face {
    font-family: 'Droid Serif Bold';
    src: url('../fonts/DroidSerif-Bold.ttf');
}

@font-face {
    font-family: 'Droid Serif BoldItalic';
    src: url('../fonts/DroidSerif-BoldItalic.ttf');
}

@font-face {
    font-family: 'Droid Serif Italic';
    src: url('../fonts/DroidSerif-Italic.ttf');
} 
```

这可能吗？

PS 我已经尝试了每种谷歌网络字体的导入技术，但它们都不适用于 IE 9。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T12:24:26.457

本文有助于解释 @fontface 的防弹使用。仔细阅读，你会发现一些对 IE 有帮助的东西。

[http://paulirish.com/2009/bulletproof-font-face-implementation-syntax/](http://paulirish.com/2009/bulletproof-font-face-implementation-syntax/)

我个人使用字体松鼠并参考各种文件类型以使所有浏览器都满意。我不确定你能做到你的要求，据我所知你不能。

这也有助于解释 @fontface 的字体权重 - 除非字体指定它具有一定的权重，否则您将无法更改它。[http://css-tricks.com/watch-your-font-weight/](http://css-tricks.com/watch-your-font-weight/)

# asp.net - 使用 VB.net 进行文件下载和 AD 检查

> ID：11948080
> 
> 赞同：2
> 
> 时间：2012-08-14T07:58:58.417
> 
> 标签：asp.net, vb.net, download, ftpwebrequest

感谢您对此的帮助。

我有一个 ftp 站点和管理站点中文件的网络工具 (vb.net)。

ftp 站点和工具使用 AD 组（内联网）来检查权限。

有些目录受到限制，有些则不受限制。

在我使用的下载工具上：

```
 My.Computer.Network.DownloadFile(urlPath, userProfileLocal & fileNameLab.Value, domainNameHid.Value, "", True, 60000, True, FileIO.UICancelOption.DoNothing) 
```

*urlPath*可能等于`ftp://ftp.net/foo/bar/myfile.zip`

对于*userProfileLocal*我正在尝试使用`Dim userProfileLocal As String = Environment.GetEnvironmentVariable("USERPROFILE") & "\documents"`

*fileNameLab.Value*预填充在隐藏输入中，是文件名

*domainNameHid.Value*已预先填充，看起来像`DOMAIN\jimmmy`

因为我希望使用 AD，所以我将密码值保留为空白。

我发现[这个](http://msdn.microsoft.com/en-us/library/ack30t8y%28v=vs.80%29.aspx)说我应该使用 ICredentials 代替用户名和密码，但是我在实现[ICredentials](http://msdn.microsoft.com/en-us/library/system.net.icredentials%28v=vs.80%29.aspx)部分时遇到了问题，甚至不确定这是否正确。

其余的我认为是占了。

我不断收到错误`Access to the path 'C:\Windows\system32\config\systemprofile' is denied.`

*首先*，这不是我要走的路。我希望这`GetEnvironmentVariable("USERPROFILE") & "\documents"`会创建文档文件夹的路径......有没有更好的方法来做到这一点？为什么不能只提示浏览到某个位置或使用默认位置？

*其次*，...嗯，第二个与我没有权限下载到我自己的磁盘有关。但是如果第一个可以解决，那么我认为这也可以。

我认为我的 AD 要求正在搞砸应该是一项简单任务的工作。有人可以为 ICredentials 的示例指出正确的方向（如果这是我需要的），或者让我知道我在这里做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T17:27:25.003

我只是想回应一下，让那些正在寻找的人知道我找到了答案。

我最终使用了以下代码，而不是上面使用的代码：

```
 Dim mydocsdir = Environment.GetFolderPath(Environment.SpecialFolder.MyDocuments)
            Response.AppendHeader("Content-Disposition", "attachment; filename=" & fileNameLab.Value)
            Response.Clear()
            Response.WriteFile(Path.Combine(mydocsdir, fileNameLab.Value)) 
```

这就像一个魅力。

我需要特别感谢[Darin Dimitrov](https://stackoverflow.com/questions/6184291/choose-file-download-location?rq=1)，他在另一篇文章中提供了答案。他的回答实际上是我认为可能的简单答案......但我的 VB.Net 经验虽然现在很少，但仍在增长。

# php - JQuery UI 1.8.10 无法读取未定义的属性“3”

> ID：11948082
> 
> 赞同：12
> 
> 时间：2012-08-14T07:59:05.733
> 
> 标签：php, jquery, jquery-ui, jquery-selectors

我使用 JQuery UI 1.8.10 和最新的 jquery。

我的代码是：

```
<script src="http://code.jquery.com/jquery-latest.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.10/jquery-ui.js"></script>
<script type="text/javascript" src="/cms/ww.admin/login/login.js"></script>
</head>
<body>

<div id="header"></div>
<?php
    if(isset($_REQUEST['login_msg']))
    {
        require SCRIPTBASE.'cms/ww.incs/login-codes.php';
        $login_msg = $_REQUEST['login_msg'];
        if(isset($login_msg_codes[$login_msg]))
        {
            echo '<script>$(function(){$("<strong>'.htmlspecialchars($login_msg_codes[$login_msg]).'</strong>").dialog({modal:true});});</script>';
        }

?> 
```

为什么这会给出未定义错误的无法读取属性“3”？

给出错误的文件是`jquery-ui.js on line 186`

好的，现在我将其更改为：

```
</head>
<body>

<div id="header"></div>
<div id="login-msg"></div>
<?php
if(isset($_REQUEST['login_msg'])){
require SCRIPTBASE.'cms/ww.incs/login-codes.php';
$login_msg=$_REQUEST['login_msg'];
if(isset($login_msg_codes[$login_msg])){
   echo '<script>$(function(){
                    $("#login-msg").html("<strong>'.htmlspecialchars($login_msg_codes[$login_msg]).'</strong>").dialog({modal:true});});</script>';
}
}
 ?> 
```

但仍然是同样的错误

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-14T09:36:52.317

这是您的 jQueryUI 中的一个错误，它使用 :data 选择器（如果您在调用堆栈中向上，您会看到它），它已被弃用/与最新的 jQuery 不兼容。试试这个 jQueryUI：

```
http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.22/jquery-ui.min.js 
```

这里的例子：

[http://jsfiddle.net/techunter/RyUVq/](http://jsfiddle.net/techunter/RyUVq/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T10:11:14.967

你发现了一个错误/不兼容！！

这不起作用 jquery (1.8.0)：http: [//jsfiddle.net/mZPWS/](http://jsfiddle.net/mZPWS/)

较旧的 jquery 版本（1.7.2）正在工作：http: [//jsfiddle.net/mZPWS/1/](http://jsfiddle.net/mZPWS/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T09:18:33.963

它可能不是您的问题的根源，但也许为您的 .dialog() 小部件设置一个 div 可以帮助您。

您的 js 行`$("<strong>'.htmlspecialchars($login_msg_codes[$login_msg]).'</strong>").dialog({modal:true}`似乎使用了一条简单的消息，在大多数情况下都有效。

您可以尝试改用此行进行更改：

```
$(function()
{
    $("#header") // or any div you have
    .html("<strong>'.htmlspecialchars($login_msg_codes[$login_msg]).'</strong>")
    .dialog({modal:true});
}); 
```

另外，请确保您的“/cms/ww.admin/login/login.js”不是错误的来源，js 错误控制台很容易丢失，并且可以将您指向 jquery-ui.js，而错误在其他地方.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-12T15:05:24.887

我确认不兼容问题。尝试使用 jquery-1.8.0 和 jquery-ui-1.8.4

# jpeg - vips 在大图像上失败

> ID：11948084
> 
> 赞同：1
> 
> 时间：2012-08-14T07:59:13.157
> 
> 标签：jpeg, tiff

我的 tiff 金字塔图像转换失败，出现以下错误：

> JPEGPreEncode：条带/平铺对于 JPEG 来说太大

我一直在使用以下命令：

```
vips tiffsave 1000x512.v newHUGEfile.tiff --compression jpeg --vips-progress --vips-cache-trace --bigtiff 
```

有没有办法避免这种症状？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T11:54:50.070

你的测试图像有多大？jpeg 编码器在任何轴上都不能超过 65536 像素。如果您的图像比这宽，则不能将其写为 jpeg 压缩的条形图像。

尝试添加`--tile`. 这将写入一个平铺的 tiff 图像，其中每个平铺是一个单独的 256x256 像素区域。现在 jpeg 压缩器将永远不会一次看到大块，它应该可以工作。

# ruby-on-rails-3 - Rails 大量号召性用语，数据丢失

> ID：11948086
> 
> 赞同：-1
> 
> 时间：2012-08-14T07:59:24.580
> 
> 标签：ruby-on-rails-3

我想知道解决这种情况的最佳策略是什么，假设我有这个动作：

```
class BetsController < ApplicationController
  def create
    @bet = Bet.new(params[:bet])
    # some other operation
  end
end 
```

有时我会收到大量关于此操作的调用，我可能会丢失数据，我应该每次都生成一个线程吗？有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T10:25:20.297

缩放是一个相当大的话题，提供一个完全适合您需求的答案是不可能的。

但只是为了让你开始：

*   如果操作本身需要很长时间才能执行，那么您应该考虑进行一些离线工作 - 本质上您应该保存所需的信息并让一些离线工作人员运行所有队列请求并一次处理一个。这种方法可能需要重新设计您的应用程序。您应该考虑用户如何在他们可能失败或返回某些结果的情况下获得有关其操作的反馈。
*   如果操作非常短并且这只是负载问题，那么您应该考虑其他扩展方法 - 带有负载平衡的附加服务器等。

我知道这远非完整的答案，但这是一个非常大的话题......

# java - 如何在 JVM 级别捕获 OutOfMemory 错误？

> ID：11948088
> 
> 赞同：2
> 
> 时间：2012-08-14T07:59:24.623
> 
> 标签：java, exception-handling, jvm, out-of-memory

`OutOfMemory`假设有一个大型 Java 应用程序，如果发生错误，我想优雅地关闭它。现在我看到以下问题：

*   一些组件捕获并“吞下”所有组件，`Throwables`包括`OutOfMemory`
*   如果一个线程没有捕获`OutOfMemory`它就退出并且我们不知道`OutOfMemory`发生了什么

我可以以某种方式注册一个“JVM 级”处理程序来捕获任何`OutOfMemory`可能发生在 JVM 中的 JVM 吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T08:02:39.537

> 一些组件捕获并“吞下”所有 Throwable，包括 OutOfMemory

他们不应该那样做，我会修复他们。

> 如果一个线程没有捕获 OutOfMemory，它就会退出并且我们不知道 OutOfMemory 发生了

我也会解决的。

您可以注册一个 UncaughtExceptionHandler。

唯一的选择可能是在 OOME 上触发一个脚本，该脚本会关闭您的程序。这可以从命令行完成。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T08:02:38.723

内存不足问题是错误，这意味着您无法从中恢复正确的 JVM 状态，因此您无法进行任何终结。相反，您可以尝试监视您的应用程序内存消耗，并在可用内存级别太低时尝试正确关闭它（我想这就是您想要的）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T09:46:32.837

永远不要发现错误！所以，RTFM！;)

错误非常奇怪，所以它们应该抛出到 main 并停止 VM。

异常是可抛出的，可以“处理”（SocketTimeoutException、NullpointerException 等）。错误是无法处理的可抛出对象（在最常见的情况下）。如果抛出 OutOfMemoryError，你想做什么？你能延长你的记忆@执行时间吗？垃圾收集器通常会在抛出 OOME 之前运行多次。

所以在你的特殊情况下：很高兴，你有足够的内存来创建 OutOufMemoryError-Object 来看看 VM-Death 的原因是什么。

**重构你的代码！;)**

# c# - 如何将 PDF 文件路径添加到 SQL 数据库并访问它们？（ C＃ ）

> ID：11948098
> 
> 赞同：0
> 
> 时间：2012-08-14T07:59:56.667
> 
> 标签：c#, sql

我必须构建一个可以从本地网络上的文件夹中搜索和显示 PDF 文件的软件。我的主管要求有一个数据库并将 PDF 文件的路径存储在那里（不是 PDF 本身，因为数量很大），所以我可以从软件中搜索和打开它们。

如果您能给我一些解决问题的想法，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T08:04:08.913

你不是已经解决了吗？您可以拥有一个应用程序，例如服务，甚至是一个命令行应用程序，可以轮询/手动查看指定的文件夹，从那里您将获得完整的文件位置并将其保存到您的数据库中。当您需要搜索 PDF 时，您可以针对您的数据库执行与您的条件相匹配的 PDF 的查询。

您甚至可以从文件路径中删除文件名并查询该文件而不是文件路径并将文件路径存储在不同的列中（假设您使用的是关系数据库）。

**编辑**

根据您对另一个答案的评论，我会坚持使用 SQL Server。据我了解，您希望自动“编目”放置在该文件夹中的 PDF，您可以通过编写一个简单的[windows service](http://www.switchonthecode.com/tutorials/creating-a-simple-windows-service-in-csharp)来做到这一点。从该 Windows 服务中，您可以使用 ORM（如 Entity Framework）或 ADO.net 将您的更改持久保存到数据库中。从您希望显示结果的应用程序（无论是 Web 应用程序还是 Win 表单应用程序），您只需查询数据库中的正确列

资源：

[实体框架](http://www.google.co.uk/url?sa=t&rct=j&q=entity%20framework%20tutorial&source=web&cd=1&sqi=2&ved=0CEwQFjAA&url=http%3A%2F%2Fmsdn.microsoft.com%2Fen-us%2Flibrary%2Fbb386876.aspx&ei=1AkqULiNLovgtQbvsICAAw&usg=AFQjCNGHLeUe7NP3kCC_HraFqnEpeBBo2A)

[Linq 到实体](http://www.google.co.uk/url?sa=t&rct=j&q=querying%20in%20linq%20entity%20framework%20c%23&source=web&cd=1&ved=0CEwQFjAA&url=http%3A%2F%2Fmsdn.microsoft.com%2Fen-us%2Flibrary%2Fbb386964.aspx&ei=_gkqUOrmAdHGtAbl7oGwBQ&usg=AFQjCNEluu1qy2AKy7mfHcDpqHUJgNq8hw)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T08:19:38.913

阅读有关使用数据库的一些 ORM。例如，实体框架。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T08:26:15.617

```
 private string[,] GetImagesFromServerFolder()
    {
        IntPtr token;
        if (
            !NativeMethods.LogonUser([Server_Login_Name], [Server_Location],
                                     [Server_Login_Password], NativeMethods.LogonType.NewCredentials,
                                     NativeMethods.LogonProvider.Default, out token))
        {
            throw new Win32Exception();
        }

        try
        {
            IntPtr tokenDuplicate;

            if (!NativeMethods.DuplicateToken(
                token,
                NativeMethods.SecurityImpersonationLevel.Impersonation,
                out tokenDuplicate))
            {
                throw new Win32Exception();
            }

            try
            {
                using (WindowsImpersonationContext impersonationContext =
                    new WindowsIdentity(tokenDuplicate).Impersonate())
                {
                    /******************* CODE FROM HERE *******************/

                    List<string> files = new List<string>(Directory.GetFiles(_PHYSICAL SERVER LOCATION_));

                    return files;

                    /******************* CODE TO HERE *******************/
                }
            }
            finally
            {
                if (tokenDuplicate != IntPtr.Zero)
                {
                    if (!NativeMethods.CloseHandle(tokenDuplicate))
                    {
                        // Uncomment if you need to know this case.
                        ////throw new Win32Exception();
                    }
                }
            }
        }
        finally
        {
            if (token != IntPtr.Zero)
            {
                if (!NativeMethods.CloseHandle(token))
                {
                    // Uncomment if you need to know this case.
                    ////throw new Win32Exception();
                }
            }
        }
    } 
```

**然后，这将返回所有 .pdf 文件和位置的列表，**
然后您可以在数据库中对其进行处理。

然后，运行列表中的所有文件（在您的主要运行方法中）；

```
List<string> file = GetImagesFromServerFolder();  
foreach (var s in file)  
{  
        const string connStr = "INSERT INTO tblPdfLocations (location) VALUES (@location)";
        //Store the connection details as a string
    string connstr =
        String.Format(@"SERVER=[LOCATION]; UID=[USERNAME]; pwd=[PASSWORD]; Database=[DATABASE]");

    //Initialise the connection to the server using the connection string.
    _sqlConn = new SqlConnection(connstr);

        var sqlComm = new SqlCommand(connStr, _sqlConn) {CommandType = CommandType.Text};
        sqlComm.Parameters.Add(new SqlParameter("@location", SqlDbType.VarChar, 50)).Value = s;

        sqlComm.ExecuteNonQuery();
        _sqlConn.Close();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T08:36:13.143

我想提供与提供的其他答案不同的观点，因为 - PDF、Word、JPEG 等文件等文档的存储和检索完全属于“内容管理”（CM）应用程序的领域。尽管在 IT 大世界中相对较新，但这些应用程序已经成熟并提供工业级解决方案。他们使用数据库后端并提供大量设施——您感兴趣的是纯粹将 CM 用作内容存储库。您不必查看大供应商（即 Oracle Webcenter）提供的产品 - 有免费且支持良好的替代品，例如 Drupal 和 Joomla。他们每个人都有 API，我认为这些 API 将允许您从第三方应用程序连接到他们的存储库。

您应该寻找一种可以随着公司需求而增长的解决方案，而不是重新发明已经存在的东西。

# c# - 如何获取鼠标位置并在客户端使用

> ID：11948108
> 
> 赞同：0
> 
> 时间：2012-08-14T08:00:35.793
> 
> 标签：c#, .net, winforms

我正在制作一个具有 ListView 的表单。每当鼠标悬停在 ListView 中的一个 listView 项上方时，我想显示一个“图片窗口”。我通过使用“ListView”的“ItemMouseHover”事件实现了这一点。我想在鼠标位置附近显示这个“图片窗口”。但是，我无法从 itemmousehover 事件中获取鼠标位置。有人可以说如何实现这一目标吗？

注意：我使用的是 .Net 4.0

**编辑：** “Danbystrom”给出了确切的答案。但我发现根本原因是其他的。请参阅我的答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T08:06:08.333

静态方法 Control.MousePosition 将为您提供屏幕空间中的坐标。然后，您可以使用 Control.PointToClient 实例方法将其转换为客户端坐标。

```
var pt = listView.PointToClient( Control.MousePosition ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T09:04:13.693

仅当您在“StartPosition”属性中选择“手动”而不是“WindowsDefaultLocation”时，新窗口才会按照您的意愿放置。否则“操作系统”会尝试将新窗口的位置放在靠近鼠标位置的某个位置。如果新窗口将鼠标隐藏在该位置，那么它将尝试通过一些附近的点，这将导致闪烁。

# java - Java Swing - 用户警报

> ID：11948113
> 
> 赞同：5
> 
> 时间：2012-08-14T08:00:47.567
> 
> 标签：java, swing

我正在尝试通过将窗口调到前面然后在屏幕上为用户闪烁图标来建立用户警报机制。关于这种方法，我有两个问题：

1.  如何在 Java 中找到当前所在的窗口，然后将其最小化并置于最前面？
2.  Java中是否有一种机制可以让我简单地显示图标一两秒钟然后将其隐藏在屏幕中间？如果没有，实现这一目标的方法是什么？

非常感谢任何回复。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-14T08:18:57.580

> 如何在 Java 中找到当前所在的窗口，然后将其最小化并置于最前面

```
Window[] allWindows = Window.getWindows(); 
```

*   `Top-Level Containers`从当前 JVM返回所有数组，例如`J/Frame`, `J/Dialog`( `JOptionPane`), `J/Window`,

*   你可以测试（例如）`if (allWindows[i] instanceof JFrame) {`

*   然后[WindowState](http://docs.oracle.com/javase/7/docs/api/java/awt/event/WindowStateListener.html)返回[WindowEvent](http://docs.oracle.com/javase/7/docs/api/java/awt/event/WindowEvent.html)

> 通过将窗口调到前面，然后在屏幕上为用户闪烁图标

使用 undecodated `JDialog`(works `toFront`, `toBack`) with

*   只创建一次

*   `setDefaultCloseOperations(HIDE_ON_CLOSE)`

*   用于`Swing Timer`隐藏`JDialog`

> Java中是否有一种机制可以让我简单地显示图标一两秒钟然后将其隐藏在屏幕中间？如果没有，实现这一目标的方法是什么？

*   看看`Java Translucent Window`，放在那里`Icon`（`JLabel`或`JButton`）

用于在两个或多个之间`Swing Timer`隐藏或切换来闪烁（三个或四个为好）`Icon``Icons`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T14:42:33.683

我认为获取窗口祖先的最简单方法是： [SwingUtilities.getWindowAncestor(yourComponent);](http://docs.oracle.com/javase/6/docs/api/javax/swing/SwingUtilities.html#getWindowAncestor%28java.awt.Component%29)

# java - 在mapper文件中访问mybatis sql中的public static final字符串

> ID：11948115
> 
> 赞同：10
> 
> 时间：2012-08-14T08:00:51.333
> 
> 标签：java, sql, parameters, constants, mybatis

我有一个写在 MyBatis 映射器文件中的 sql，如下所示：

```
<select id="somesql">
   select a,b,c from tbl_name where d = ?
</select> 
```

的占位符值`d`应该是在名为的文件中声明的常量`Constants.java`：

```
public static final String d = "d_value"; 
```

如何在不实际在 `<select>`构造中传递参数的情况下用值替换占位符？我试过`#{com.pkg.name.Constants.d}`了，但没有用。

**没有硬编码！！！**

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2016-08-03T10:06:29.183

```
<select id="getConvenienceStoreList" resultType ="Store">
    SELECT * FROM Store
    WHERE type = ${@foo.product.constant.StoreType@CONVENIENCE_STORE}
    ORDER BY id
    LIMIT #{start}, #{limit}
</select> 
```

参考：http: [//qiita.com/ApplePedlar/items/12dc389cc32f3db5557a](http://qiita.com/ApplePedlar/items/12dc389cc32f3db5557a)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-23T17:47:41.790

据我所知，使用 MyBatis 的开箱即用行为，你不能。

您可以尝试[为 ParameterHandler 编写一个拦截器](http://www.mybatis.org/core/configuration.html#plugins)并在那里注入值，但这并不总是可行的，因为您只能在参数处理程序上使用两种方法：

*   `getParameterObject`它返回发送到查询的参数（可以是常量、字符串、映射、自定义对象甚至 null，因为在您的示例中，您不发送参数）
*   `setParameters`如果您知道参数在准备好的语句中的位置（大多数情况下您可能不知道），我想您可以尝试设置参数。

我的建议是将它作为参数传递给您的查询。MyBatis 的拦截器功能没有很好的文档记录，因此您可能无法从一开始就获得正确的工作组合，最终您可能会遇到比其价值更多的麻烦。

# postgresql - PostgreSQL - 在返回结果集的存储过程中编写动态 sql

> ID：11948131
> 
> 赞同：13
> 
> 时间：2012-08-14T08:02:12.953
> 
> 标签：postgresql, resultset, plpgsql, execute, dynamic-sql

如何编写包含返回结果集的动态构建的 SQL 语句的存储过程？这是我的示例代码：

```
CREATE OR REPLACE FUNCTION reporting.report_get_countries_new (
  starts_with varchar,
  ends_with varchar
)
RETURNS TABLE (
  country_id integer,
  country_name varchar
) AS
$body$
DECLARE
  starts_with ALIAS FOR $1;
  ends_with ALIAS FOR $2;
  sql VARCHAR;
BEGIN

    sql = 'SELECT * FROM lookups.countries WHERE lookups.countries.country_name >= ' || starts_with ;

    IF ends_with IS NOT NULL THEN
        sql = sql || ' AND lookups.countries.country_name <= ' || ends_with ;
    END IF;

    RETURN QUERY EXECUTE sql;

END;
$body$
LANGUAGE 'plpgsql'
VOLATILE
CALLED ON NULL INPUT
SECURITY INVOKER
COST 100 ROWS 1000; 
```

此代码返回错误：

```
ERROR:  syntax error at or near "RETURN"
LINE 1: RETURN QUERY SELECT * FROM omnipay_lookups.countries WHERE o...
        ^
QUERY:  RETURN QUERY SELECT * FROM omnipay_lookups.countries WHERE omnipay_lookups.countries.country_name >= r
CONTEXT:  PL/pgSQL function "report_get_countries_new" line 14 at EXECUTE statement 
```

我尝试了其他方法而不是这个：

```
RETURN QUERY EXECUTE sql; 
```

方式一：

```
RETURN EXECUTE sql; 
```

方式二：

```
sql = 'RETURN QUERY SELECT * FROM....
/*later*/
EXECUTE sql; 
```

在所有情况下都没有成功。

最终，我想编写一个包含动态 sql 语句并从动态 sql 语句返回结果集的存储过程。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-08-21T01:17:58.707

有改进的余地：

```
CREATE OR REPLACE FUNCTION report_get_countries_new (starts_with text
                                                   , ends_with   text **= NULL**)
  **RETURNS SETOF lookups.countries** AS
$func$
DECLARE
   sql text := 'SELECT * FROM lookups.countries WHERE country_name >= **$1**';
BEGIN
   IF ends_with IS NOT NULL THEN
      sql := sql || ' AND country_name <= **$2**';
   END IF;

   RETURN QUERY EXECUTE sql
   **USING starts_with, ends_with**;
END
$func$ LANGUAGE plpgsql;
-- the rest is default settings 
```

### 要点

*   PostgreSQL 8.4 引入了**`USING`**for 子句`EXECUTE`，这有几个原因。[在手册中回顾](http://www.postgresql.org/docs/current/interactive/plpgsql-statements.html#PLPGSQL-STATEMENTS-EXECUTING-DYN)：

    > 命令字符串可以使用参数值，这些参数值在命令中引用为`$1, $2`等。这些符号指的是`USING`子句中提供的值。这种方法通常比将数据值作为文本插入到命令字符串中更可取：它避免了将值转换为文本并返回的运行时开销，并且由于不需要引用或逃脱。

    IOW，即使使用`quote_literal()`.
    请注意，`$1, $2`在查询字符串中，指的是`USING`子句中提供的值，*而不是*函数参数。

*   当您返回`SELECT * FROM lookups.countries`时，您可以简化**`RETURN`**声明，如下所示：

    ```
    RETURNS SETOF lookups.countries 
    ```

    在 PostgreSQL 中，自动为每个表定义了一个复合类型。用它。结果是函数取决于类型，如果您尝试更改表，则会收到错误消息。在这种情况下删除并重新创建函数。

    这可能是可取的，也可能不是可取的——通常是这样！如果您更改表，您希望了解副作用。按照您的方式，您的函数将静默中断并在下一次调用时引发异常。

*   如果您像演示的那样为声明中的第二个参数提供[**显式默认值**](http://www.postgresql.org/docs/current/interactive/sql-createfunction.html)，则可以（但不必）简化调用，以防您不想设置上限`ends_with`。

    ```
    SELECT * FROM report_get_countries_new('Zaire'); 
    ```

    代替：

    ```
    SELECT * FROM report_get_countries_new('Zaire', NULL); 
    ```

    请注意此上下文中的[函数重载](http://www.postgresql.org/docs/current/interactive/xfunc-overload.html)。

*   `~~'plpgsql'~~`即使可以容忍（目前），也不要引用语言名称。这是一个标识符。

*   您可以在声明时分配一个变量。节省了额外的步骤。

*   参数在标题中命名。删除无意义的行：

    ```
     starts_with ALIAS FOR $1;
     ends_with ALIAS FOR $2; 
    ```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-14T08:57:00.307

使用[quote_literal()](http://www.postgresql.org/docs/current/interactive/functions-string.html)避免[SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)(!!!) 并修复您的引用问题：

```
CREATE OR REPLACE FUNCTION report_get_countries_new (
  starts_with varchar,
  ends_with varchar
)
RETURNS TABLE (
  country_id integer,
  country_name varchar
) AS
$body$
DECLARE
  starts_with ALIAS FOR $1;
  ends_with ALIAS FOR $2;
  sql VARCHAR;
BEGIN

    sql := 'SELECT * FROM lookups.countries WHERE lookups.countries.country_name ' || quote_literal(starts_with) ;

    IF ends_with IS NOT NULL THEN
        sql := sql || ' AND lookups.countries.country_name <= ' || quote_literal(ends_with) ;
    END IF;

    RETURN QUERY EXECUTE sql;

END;
$body$
LANGUAGE 'plpgsql'
VOLATILE
CALLED ON NULL INPUT
SECURITY INVOKER
COST 100 ROWS 1000; 
```

这是在 9.1 版本中测试的，工作正常。

# ruby - 如何在 Yaml 中解析这个？

> ID：11948132
> 
> 赞同：0
> 
> 时间：2012-08-14T08:02:34.327
> 
> 标签：ruby, parsing, yaml

假设我有这个例子：

```
Example:
  number:
    cuarenta
    cuarenta y uno
    cuarenta y dos
    cuarenta y tres
    cuarenta y cuatro
    cuarenta y cinco
    cuarenta y seis
    cuarenta y siete
    cuarenta y ocho
    cuarenta y nueve 
```

我想解析这个，以便我将这些数字中的每一个都放在一起，比如“cuaranta y nueve”。我很难想象如何做到这一点，因为在 YAML 中，你变成了一个与“名词”相关联的字符串。

我的 yaml 解析器如下所示：

```
 File.open(Rails.root + 'lib/words/yamlicious.yml', 'r') do |file|
    YAML::load(file).each do |topic, word_types|
      temp_topic = Topic.create! name: topic
      temp_words = word_types.map{|type, words| words.split(' ').map {|word| Word.create type: type, word: word, topics: [temp_topic] } }
      temp_topic.words << temp_words
    end
  end 
```

请注意，`split`这部分会破坏它，因为这样我会根据我的示例创建一个单词，即三个单词“cuarenta”、“y”和“uno”。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T08:51:27.300

要保留换行符，您必须使用[管道字符](http://www.yaml.org/YAML_for_ruby.html#single_ending_newline)：

```
Example:
  number: |
    cuarenta
    cuarenta y uno
    cuarenta y dos
    … 
```

现在你可以`split("\n")`

# android - 如何修复 TextView 字体回退？

> ID：11948138
> 
> 赞同：5
> 
> 时间：2012-08-14T08:02:55.620
> 
> 标签：android, fonts, textview, typeface

我有一个本地化为多种语言的程序。它在 Android 4.x 上运行良好，但在 Android 2.3.x 上存在字体渲染问题。这是一个重现它的小例子。任何帮助将不胜感激。

主要活动布局。这里没什么特别的。只有两个 TextView 视图：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    android:padding="10dp" >

    <TextView
        android:id="@+id/text_view1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_marginTop="80dp"
        tools:context=".MainActivity" />

    <TextView
        android:id="@+id/text_view2"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_marginTop="80dp"
        tools:context=".MainActivity" />

</LinearLayout> 
```

主要活动：

```
package com.font_test;

import android.app.Activity;
import android.graphics.Typeface;
import android.os.Bundle;
import android.widget.TextView;

public class MainActivity extends Activity {

    private static final String TEXT = 
            "\u0440\u0443\u0441\u0441\u043A\u0438\u0439" + 
            "\n" + 
            "pyccknn";

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        // Set textview 1
        final Typeface typeface1 = Typeface
                .createFromAsset(getAssets(), "fonts/chelsea.ttf");
        final TextView tv1 = (TextView) findViewById(R.id.text_view1);
        tv1.setTypeface(typeface1);
        tv1.setTextSize(40);
        tv1.setBackgroundColor(0x280000ff);
        tv1.setText(TEXT);

        // Set textview 2
        final Typeface typeface2 = Typeface.SANS_SERIF;
        final TextView tv2 = (TextView) findViewById(R.id.text_view2);
        tv2.setTypeface(typeface2);
        tv2.setTextSize(40);
        tv2.setBackgroundColor(0x280000ff);
        tv2.setText(TEXT);
    }
} 
```

自定义字体 chelsea.ttf 来自这里[http://www.dafont.com/chelsea.font](http://www.dafont.com/chelsea.font)。没什么特别的，我也可以用其他字体复制它。

TEXT 字符串包含两行，第一行包含不在 chelsea 字体中的 unicode 字符，第二行包含在字体中的字符。第一个文本视图使用自定义字体呈现，第二个文本视图使用常用的 san serif 字体（包含 TEXT 的所有 unicode 字符）。

Android 4.x 正确呈现它，在需要时故障转移到库存字体：

![在此处输入图像描述](../Images/5f3d5306fce041957fc9641bfdd0f208.png)

但是，Android 2.3.x 无法正确呈现它。它确实回退到股票字体（好），但使用了导致字符间距过大的奇怪指标：

![在此处输入图像描述](../Images/6fc37d0e29a788889dcc4cf6b1d747d7.png)

任何建议如何解决它？如果需要，我愿意接受丑陋的解决方法。

# javascript - 将 .exr 高度图解析为 mongoDB 数据库

> ID：11948140
> 
> 赞同：1
> 
> 时间：2012-08-14T08:03:06.387
> 
> 标签：javascript, parsing, node.js, mongodb

对于我目前正在创建的基于 2d 自上而下的瓷砖游戏，我需要将保存高度图数据的 .exr 文件解析到我的 mongodb 中（或将其转换为其他格式，然后读入数据库）。

这基本上是我使用 Terragen 制作的游戏世界的代表。

我想我需要读出每个像素的高度图数据，然后将其转换为数据库中的 ax,y 平铺。

如果我能做到这一点，我应该留下一个二维数组，上面附有各种 x、y 坐标和高程。从那里，我应该能够确定游戏世界中那个地方的瓷砖类型，并继续前进。

但是，我不知道如何从这个 .exr 文件中提取数据，然后将其读入我的 mongoDB 数据库上的二维地理空间索引数组。

我希望有人能帮帮忙！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T05:11:02.457

好的，我将回复部分答案。如果有人有完整的答案，请添加它，我会更新。

为了解决这个问题，我将 .exr 文件带入 Photoshop，然后保存为 32 位 .tif 文件。从这里，我下载了 GDAL (http://www.gdal.org/) 并安装了 gdal_translate 实用程序。

然后，该实用程序能够获取 .tif 数据并将其分割成多个 .png 文件供我使用。

最后，我将每个 .png 文件分别解析到我的数据库中，将后续数据添加到我在解析所有 png 文件时运行的每个“像素”。

最终得到一个具有非常精确的高程数据的二维地理空间阵列。

# javascript - 为什么这个 javascript 在浏览器中不起作用？

> ID：11948143
> 
> 赞同：0
> 
> 时间：2012-08-14T08:03:17.833
> 
> 标签：javascript, html

我在 .js 文件中有以下代码：

```
$.extend(KhanUtil, {
    // takes a number and returns the sign of that number
   steveSign: function(num){
        num = parseFloat(num)
        if (num>=0){return 1}
        else{return -1}
    },

  // takes a function, a lower bound for a zero,an upper bound for a zero, and locates  
  // that zero by iteratively halving the interval.
steveRoot: function(f,xmin,xmax){
    var l = xmin
    var r = xmax
    var z = 0
    for (i=0;i<6;i++){
        z = (l + r)/2
        if (KhanUtil.steveSign(f(l)) === KhanUtil.steveSign(f(z))){ l = z}
        else{r = z}    
    }
    return z
},

}); 
```

在我的 html 文件中，我定义`var f = function(x){return x**2 - 2}`并运行`steveRoot(f,1,2)`，但我的浏览器崩溃了。为什么会这样？

编辑：

我发布了我的全部代码，因为它是在评论中要求的。感谢一堆试图帮助我的家伙。奇怪的是代码运行良好，十分之九。它只是偶尔“废话”。这里有很多随机变量，但我无法想象为什么 steveRoot 会关心获得一个稍微不同的函数。当我不包含调用 steveRoot 的变量时，代码工作得很好，并且永远不会出错。

HTML 文件：

```
<!DOCTYPE html>
<html data-require="math graphie graphie-helpers play polynomials steveMath">
    <head>
      <title>Piecewise-defined function</title>
      <script src="../khan-exercise.js"></script>
  </head>
  <body>
      <div class="exercise">
          <div class="vars">

  <var id = "n">randRange(2,4)</var>
  <var id = "abscissas">makeXList()</var>
  <var id = "ordinates">makeYList(-9,9,abscissas.length)</var>
  <var id = "points">makeCoordinates(abscissas,ordinates)</var>
  <var id = "f">(function(x){return niceFunction(x,points)})</var>
  <var id = zeros>steveRoot(f,-10,10)</var>

          </div>

          <div class="problems">
              <div id="problem-type-or-description">
                  <p class="problem">You are going to have to answer 5</p>
                  <p class="question">Answer 5</p>
                  <div class="graphie" id="grid">
                graphInit({
                    range: 10,
                    scale: 20,
                    tickStep: 1,
                    axisArrows: "<->"
                });

            a =style({
                        stroke: "red",
                         strokeWidth: 2
                    }, function() {
                        plot( function( x ) { return niceFunction(x,points);
                        }, [ -10, 10 ] );
                    });;
            a.plot();
            </div>

                  <p class="solution">5</p>
              </div>

          </div>

          <div class="hints">
              <!-- Any hints to show to the student. -->
          </div>
      </div>
  </body> 
```

.js 文件：

```
$.extend(KhanUtil, {

//randomLines is a piecewise linear function in x, where the partition points are given by    list_of_points.  
//list_of_points is an array of arrays, for example [[1,5],[2,-1],[3,4]] would indicate the points (1,5), (2,-1), and (3,4)
//are on the curve.  The points must be arranged in order of increasing abscissa.

randomLines: function(x,list_of_points)
{

    for (i=0;i<list_of_points.length-1;i++)
    {
        var x_1 = list_of_points[i][0]
        var y_1 = list_of_points[i][1]
        var x_2 = list_of_points[i+1][0]
        var y_2 = list_of_points[i+1][1]
        var m = (y_2-y_1)/(x_2-x_1)
        var y = m*(x - x_1) + y_1

        if (x > x_1 && x <= x_2){return y}
    }
    if (x<=list_of_points[0][0]){return 0}
    if (x>list_of_points[list_of_points.length-1][0]){return 0}
},

//randomLinesFunc: function(list_of_points){
//   var f = function(x){
//  return randomLines(x,list_of_points)
//  }
//  
//  return f
//},

numInt: function(f,x){
    var delta = .01
    var sum = 0
    var i = 0
    while ((delta*i-10)<=x)

        {sum = sum+delta*f(-10+i*delta)
         i++
        }
    return sum
    },

peace: function(x){return 2},

////////////////////////////////////////////////

//randRangeNZCU takes (min,max,n) and returns an array of nonzero numbers between max and min 
//with successive numbers being distinct.  For example [-1,2,-1] could show up, but [2,2,5] will not.
// NZCU stands for NonZeroConsecutiveUnique.
randRangeNZCU: function(min,max,n){
    excluded = [0]
    array = [KhanUtil.randRangeExclude(min,max,excluded)]
    for (i=1;i<n;i++){
        excluded = [0,array[i-1]]
        array.push(KhanUtil.randRangeExclude(min,max,excluded))
    }
    return array

},
// makeCoordinates takes two arrays of the same length and returns the array of ordered pairs.
// Example:  makeCoordinates([1,2,3],[4,5,6]) = [[1,4],[2,5],[3,6]]
makeCoordinates:  function(array1,array2){
    array = []
    for (i=0;i<array1.length;i++){
        array.push([array1[i],array2[i]])
    }
    return array
},

steveCubic: function(x){return -Math.pow(x,3)/2+3*x/2},

//niceFunction is a C^1 function which connects the points in "points".  It is designed to be used 
//in my "curveSketchingIntuition" exercise.  Every point in the list will have 0 slope, except the first and last point.
niceFunction: function(x,points){

    len = points.length

    var x1 = points[0][0]
    var x2 = points[1][0]
    var y1 = points[0][1]
    var y2 = points[1][1]
    var k = (y1 - y2)/Math.pow(x1-x2,2)

    if (x<x2){return k*Math.pow(x-x2,2)+y2}

    for (i=1;i<len-2;i++){
        var x1 = points[i][0]
        var x2 = points[i+1][0]
        var y1 = points[i][1]
        var y2 = points[i+1][1]

        xNew = (x-x1)*2/(x2-x1)-1
        yNew = (KhanUtil.steveCubic(xNew)+1)*(y2-y1)/2+y1
        if (x>=x1 && x<x2){return yNew}

        }

    var x1 = points[len-2][0]
    var x2 = points[len-1][0]
    var y1 = points[len-2][1]
    var y2 = points[len-1][1]
    var k = (y2 - y1)/Math.pow(x1-x2,2)
    if (x>=x1){return k*Math.pow(x-x1,2)+y1}

},

makeXList: function(){
array = [-10]
i=0
while(array[i]<10){
    x = array[i]+3*KhanUtil.randRange(1,3)
    if (x<10){array.push(x)}
    i=i+1
    }
array.push(10)
return array

},

makeYList:function(min,max,n){
    excluded = [0]
    array = [KhanUtil.randRangeExclude(min,max,excluded)]
    excluded.push(array[0])
    array.push[KhanUtil.randRangeExclude(min,max,excluded)]
    excluded = [0]
    for (i=1;i<n;i++){
        if (array[i-2]<array[i-1]){
            array.push(KhanUtil.randRangeExclude(min,array[i-1]-1,excluded))
            }
        else{array.push(KhanUtil.randRangeExclude(array[i-1]+1,max,excluded))}
        }

    return array

},

newtonRoot: function(f,a){
    var z = a
    var m = (f(z+.01)-f(z-.01))/.02
    for(i=0;i<2;i++){
        z = z-f(z)/m
        m = (f(z+.01)-f(z-.01))/.02
    }
    return z
},

steveSign: function(num){
    num = parseFloat(num)
    if (num>=0){return 1}
    else{return -1}
},

steveRoot: function(f,xmin,xmax){
    var l = xmin
    var r = xmax
    var z = 0
    for (i=0;i<6;i++){
        z = (l + r)/2
        if (KhanUtil.steveSign(f(l)) === KhanUtil.steveSign(f(z))){ l = z}
        else{r = z}    
    }
    return z
},

locateZeros: function(f,points){
    var len = points.length
    var list = []

    for(i=0;i<len-1;i++){
       var x0 = points[i][0]
       var x1 = points[i+1][0]
       var y0 = points[i][1]
       var y1 = points[i+1][1]
      // var m = (y1-y0)/(x1-x0)
      // var a = -y0/m+x0
      // var z = KhanUtil.steveRoot(f,1,2)
       list.push(KhanUtil.steveSign(f(x0)))

    }
    return list
}, 
```

});

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T08:05:22.187

1.  在 javascript`x**2`中无效。( `SyntaxError: Unexpected token *`)

2.  您需要运行的`KhanUtil.steveRoot(f,1,2);`不仅仅是`steveRoot(f,1,2);`.

# java - JUnit：为测试类设置事务边界

> ID：11948147
> 
> 赞同：2
> 
> 时间：2012-08-14T08:03:29.537
> 
> 标签：java, spring, junit, junit4, spring-test

我想在任何测试方法开始之前启动数据库事务，并在运行所有测试结束时回滚所有事务。

怎么做？我应该使用什么注释？

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations = {"/testApplicationContext.xml"})
public class MyTests{

   public void setUp(){
    //Insert temporary data to Database
   }

   @Test
   public void testOne(){
     //Do some DB transactions
   }

   @Test void testTwo(){
     //Do some more DB transactions
   }

   public void tearDown(){
   //Need to rollback all transactions
   }

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-14T08:06:54.713

在 Spring 中，只需`@Transactional`在测试用例类上添加注释：

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations = {"/testApplicationContext.xml"})
@Transactional   //CRUCIAL!
public class MyTests{ 
```

查看[官方文档](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/testing.html)以获取非常深入的详细信息，包括`@TransactionConfiguration`、`@BeforeTransaction`和`@AfterTransaction`其他功能。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-14T08:10:31.860

使用@Before 在任何测试之前启动方法，使用@After 在每次测试之后启动方法。在方法或类上使用@Transactional spring 的注释来启动事务，并使用@Rollback 来回滚事务中完成的所有事情。

```
@Before   
public void setUp(){
    //set up, before every test method
}

@Transactional
@Test
public void test(){
}

@Rollback
@After
public void tearDown(){
   //tear down after every test method
} 
```

同样的[问题也以另一种方式解决](https://stackoverflow.com/a/4098541/685962)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T08:05:45.590

`@Before`对必须在每个测试方法之前运行并在每个测试方法之后运行的方法使用注释`@After`。

你可以把[这篇文章](http://selftechy.com/2011/05/17/junit4-before-vs-beforeclass-after-vs-afterclass)作为参考。

# java - 是否可以在接口中初始化数组？

> ID：11948148
> 
> 赞同：5
> 
> 时间：2012-08-14T08:03:43.360
> 
> 标签：java, arrays, collections, interface, initialization

`for`是否可以使用指令在接口中初始化数组？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-14T08:28:52.350

> 简单的问题 - 是否可以在界面中初始化数组？

是的。

> 这可行，但我想通过“for”指令初始化数组。好的，谢谢帮助

这不是一个简单的问题；）

您不能严格执行此操作，因为您不能将静态块添加到接口。但是你可以有一个嵌套的`class`or `enum`。

恕我直言，这可能比有用的更令人困惑，如下所示：

```
public interface I {
    int[] values = Init.getValue();

    enum Init {;
        static int[] getValue() {
            int[] arr = new int[5];
            for(int i=0;i<arr.length;i++)
                arr[i] = i * i;
            return arr;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-14T08:05:52.547

你为什么不试试看呢？

```
public interface Example {
    int[] values = { 2, 3, 5, 7, 11 };
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-14T08:11:54.027

是的，但前提是它是静态的。事实上，在接口中声明的任何变量都将自动是静态的。

```
public interface ITest {
    public static String[] test = {"1", "2"}; // this is ok
    public String[] test2 = {"1", "2"}; // also ok, but will be silently converted to static by the compiler
} 
```

但是你不能有静态初始化器。

```
public interface ITest {
    public static String[] test;
    static {
        // this is not OK. No static initializers allowed in interfaces.
    }
} 
```

显然，接口中不能有构造函数。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-14T08:17:01.087

是的，这是可能的。见代码：

```
public interface Test {
  int[] a= {1,2,3};
}

public class Main {
  public static void main(String[] args) {

    int i1 = Test.a[0];
    System.out.println(i1);
  }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-14T09:02:43.233

Firstly, I agreed with existing answers.

Further, I don’t think it’s a good idea to define data in an interface. See "Effective Java":

> Item 19: Use interfaces only to define types
> 
> The constant interface pattern is a poor use of interface.

To export constants in interface is bad idea.

# python - Python ImportError：找不到符号 - 用于自定义 C++ 模块

> ID：11948149
> 
> 赞同：1
> 
> 时间：2012-08-14T08:03:44.997
> 
> 标签：python, cython

我在 C++ 中创建了 2 个模块，并通过 Cython 在 Python 中导入了它们。第一个模块称为 Generator，它包含 2 个类：MersenneTwister，实现生成伪随机数的算法，以及作为单例的 Generator 类，创建 MersenneTwister 对象。第二个模块称为 KMeans，包含一个调用 KMeans 的函数，该函数实现了用于聚类数据的 K-Means 算法。对于这两个模块，我创建了相应的 .pyx 文件，其中通过 cython 编译确定，然后使用 g++ 创建了 .so 文件，然后在 python 中导入了 KMeans.so 文件，接收：ImportError: ./KMeans.so ：未定义符号：_ZN9Generator8instanceEv

我已经使用以下命令编译了 .cpp 文件：g++ -shared -pthread -fPIC -fwrapv -fno-strict-aliasing -o file.so file.cpp

```
# KMeans.pyx files 

include "Generator.pyx"
from libcpp.vector cimport vector
cdef import from "KMeans.h" :

           cdef struct Pair:

               vector[vector[double]] C
               vector[unsigned int] J

               Pair(vector[vector[double]] _C, vector[unsigned int] _J)

           cdef double s(vector[double] X, vector[double] c)
           cdef void   AddToCodeword(vector[double] X, vector[double] c)
           cdef Pair KMeans(unsigned int k, vector[vector[double]] X) except +

def KMean(unsigned k, X):

   cdef Pair returnValue = KMeans(k, X)

   return returnValue.C, returnValue.J

#Generator.pyx file

cdef extern from "mt.h":

    cppclass MersenneTwister:

       MersenneTwister()

       #public members
       double random() 
       void init_genrand(unsigned long s)
       void init_by_array(unsigned long* init_key, int key_length)
       unsigned long genrand_int32()
       long genrand_int31()
       double genrand_real1()
       double genrand_real2()
       double genrand_real3()
       double genrand_res53()

       #private members
       unsigned long* mt_
       int mti_
       unsigned long* init_key_
       int key_length_ 
       unsigned long s_
       int seeded_by_array_ 
       int seeded_by_int_

#static members
cdef extern from "mt.h" namespace "MersenneTwister":

       int N                    = 624
       int M                    = 397
       unsigned long MATRIX_A   = 0x9908b0dfUL
       unsigned long UPPER_MASK = 0x80000000UL
       unsigned long LOWER_MASK = 0x7fffffffUL

cdef extern from "generator.h" namespace "Generator":

    MersenneTwister *_ptr_
    MersenneTwister *instance()
    MersenneTwister *instance(unsigned int seed) 
```

# header - WKHTMLTOPDF：如何在第一页禁用页眉

> ID：11948158
> 
> 赞同：9
> 
> 时间：2012-08-14T08:04:18.490
> 
> 标签：header, wkhtmltopdf

wkhtml 不会像应有的那样在每个页面上重复表格元素“th”。所以我认为可以简单地使用 --header-html 选项并以这种方式手动添加表头。但我不希望它们出现在第一页，因为已经有表头，加上其他一些第一页的东西......我找到了一些 JS 解决方案，但它对我来说太复杂了，因为我只知道最基本的JS ...有什么想法吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-14T10:33:17.563

你试过JS解决方案吗？其实没那么复杂。我刚刚用一个长的 html 文件进行了测试，该文件包含一个分成许多不同页面的表，我设法使用这个头文件从第 1 页和第 3 页中删除了标题：

```
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <script>
        function subst() {
          var vars={};
          var x=document.location.search.substring(1).split('&');
          for (var i in x) {var z=x[i].split('=',2);vars[z[0]] = unescape(z[1]);}
          var x=['frompage','topage','page','webpage','section','subsection','subsubsection'];
          for (var i in x) {
            var y = document.getElementsByClassName(x[i]);
            for (var j=0; j<y.length; ++j) y[j].textContent = vars[x[i]];

            if(vars['page'] == 1){ // If page is 1, set FakeHeaders display to none
               document.getElementById("FakeHeaders").style.display = 'none';
            }

            if(vars['page'] == 3) { // If page is 3, set FakeHeaders display to none
                document.getElementById("FakeHeaders").style.display = 'none';
            }
          }
        }
        </script>
    </head>
    <body style="border:0;margin:0;" onload="subst()">
        <table style="border-bottom: 1px solid pink; width: 100%; margin-bottom:5px;" id="FakeHeaders">
          <tr>
            <th>Your awesome table column header 1</th>
            <th>Column 2</th>
            <th style="text-align:right">
                Page <span class="page"></span>/<span class="topage"></span>
            </th>
          </tr>
        </table>
    </body>
</html> 
```

他们的关键点是表“标题”包含在 ID 为“FakeHeaders”的表中。javascript 函数 subst() 在加载正文时运行，并在函数期间检查当前页面是否为 1 或当前页面是否为 3，如果是，则将 FakeHeaders 设置为不可见。您将需要使用边距和 CSS 以使其看起来像您想要的那样，但这应该可以工作。

这是 wkhtmltopdf 的一个已知问题，很可能不会很快解决，请参阅[问题跟踪器中的问题 566](http://code.google.com/p/wkhtmltopdf/issues/detail?id=566 "第 566 期")。我认为 JavaScript 选项是唯一可用的解决方法，但是如果您的输入 html、样式和页面大小/边距非常可预测，您可以尝试使用 div 或手动拆分表格 - 但请注意，这真的很烦人。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-03-17T13:28:36.577

如果您可以将第一页单独拆分为单独的 html，则可以通过在 WKHTMLTOPDF 中使用“封面”来实现。

```
PDFKit.new(url, :header_html => header_url, :cover => cover_url). 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-07-23T17:32:52.217

我遇到了类似的问题，我曾使用`WKHTMLTOPDF`页眉/页脚，我想将它们从封面中删除。问题是页眉/页脚的最大高度仍然出现在包括封面在内的所有页面上。

点击我的想法并节省了一天的解决方案是我生成了两个`WKHTMLTOPDF`文件，一个在所有页面上都有页眉/页脚，另一个没有任何页眉/页脚。然后，我从生成的文件中选择没有页眉/页脚的封面页，`WKHTMLTOPDF`并从其他`WKHTMLTOPDF`生成的文件中选择所有页面上的页眉/页脚的其余页面。我使用`PDF Merger`库`PHP`来合并两个`WKHTMLTOPDF`生成的“PDF”文件的选定页面，以`PDF`在其余页面上生成带有封面和页眉/页脚的单个文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-11T15:55:38.593

```
<script type="text/javascript"> 
    var pdfInfo = {};
    var x = document.location.search.substring(1).split('&');

    for (var i in x) { var z = x[i].split('=',2); pdfInfo[z[0]] = unescape(z[1]); }

    function getPdfInfo() {
        var page = pdfInfo.page || 1;

        if(page != 1) {
            document.getElementById('pHeader').style.display = 'none';
        }
    }
    getPdfInfo();
</script> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-08-16T15:36:31.213

出于某种原因，Nenotlep 的回答对我不起作用。它只删除了页码..

所以我创建了一个带有显示的类：无；并简单地添加了它。它以这种方式工作。

```
function pagination() {
  var vars = {};
  var x = document.location.search.substring(1).split('&');
  for (var i in x) {
    var z = x[i].split('=', 2);
    vars[z[0]] = unescape(z[1]);
  }
  var x = ['frompage', 'topage', 'page', 'webpage', 'section', 'subsection', 'subsubsection'];
  for (var i in x) {
    var y = document.getElementsByClassName(x[i]);
    for (var j = 0; j < y.length; ++j) y[j].textContent = vars[x[i]];

    if (vars['page'] == 1) {
      var element = document.getElementById("pager");
      element.classList.add("pager-hidden");
    }
  }

}
```

```
.pager {
  font-size: 0.09375in;
  padding-right: 1.00003in;
  text-align: right;
  letter-spacing: 0.01042in;
  padding-bottom: 0.37501in;
}

.pager.pager-hidden {
  display: none;
}
```

```
<body onload="pagination()">

  <div class="pager" id="pager">
    <div class="pager-pages">Page <span class="page"></span> / <span class="topage"></span></div>
  </div>

</body>
```

# css - CSS 嵌套跨度和宽度属性

> ID：11948160
> 
> 赞同：2
> 
> 时间：2012-08-14T08:04:33.157
> 
> 标签：css, nested, width, html

我对嵌套跨度以及 CSS 如何应用宽度属性有疑问。HTML 是这样的，'wide' 类设置宽度。box 类给它一个边框。仅当我将宽和框放在一起时才应用宽度。有人可以向我解释为什么会这样吗？我是 CSS 爱好者，也许这是我错过的一些基本规则。

```
<span class="wide"><span  class="box">Not wide</span></span>
<span class="wide box"><span>Wide</span></span>
<span><span class="wide box">Wide</span></span>
<span class="box"><span class="wide">Not wide</span></span> 
```

你可以在这里看到效果：http: [//jsfiddle.net/7hXUu/2/](http://jsfiddle.net/7hXUu/2/)

感谢您的任何见解，亚伦

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T08:08:45.263

原因是使用`float:left;`. 但我不知道究竟是什么原因造成的。

您可以`span, a`通过使用`display:block;`或为元素应用宽度`display:inline-block;`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T10:30:26.473

[宽度不能应用于内联元素，但是](http://www.w3.org/TR/CSS2/visudet.html#inline-width)[浮动内联元素](http://www.w3.org/TR/CSS2/visudet.html#float-width)的渲染行为是不同的：

> 如果`'width'`计算为`'auto'`，则使用的值是“收缩到适合”的宽度......那么收缩到适合的宽度是： `min(max(preferred minimum width, available width), preferred width)`

那不是全部。你的浮动容器跨越每个建立新的[块格式化上下文](http://www.w3.org/TR/CSS2/visuren.html#block-formatting)，影响[浮动元素定位](http://www.w3.org/TR/CSS2/visuren.html#float-position)的计算结果。如果有足够多的请求，我可能会逐步完成，但这绝对是一个不切实际的场景。

底线是：对于脑筋急转弯问题来说，这是一个很好的意大利面条代码，但在现实生活中使用起来很糟糕。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-14T08:08:24.320

该类`box`具有`float: left`，将元素转换为浮动元素，与默认`span`的 内联元素相反。该`width`属性不适用于内联元素。

对元素进行`width`应用的另一种方法是对其进行设置。`span``display: inline-block`

# extjs - ExtJs - 在展开时重新加载商店

> ID：11948161
> 
> 赞同：0
> 
> 时间：2012-08-14T08:04:34.933
> 
> 标签：extjs, tree, store

如何重新加载商店？

如何将新的对应路径传递给代理（nodeParam）？

编辑：

我的树有`name`和`path`和`children`属性。但是，由于`children: []`是空的，因此没有显示可单击的箭头。

我希望显示箭头，然后请求在`path`(/abc/def) 处等待的数据。

我读到有人使用在发出新请求时被删除的虚拟数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T11:38:49.670

空孩子`"childr‌​en":[]`导致没有箭头。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T16:48:25.233

不确定您对自己的回答是否意味着您已经弄清楚了。无论如何，如果将“leaf”属性设置为 false 并省略“children”属性，它将起作用。

# r - 在依赖于“i”的 for 循环中命名文件

> ID：11948162
> 
> 赞同：0
> 
> 时间：2012-08-14T08:04:36.090
> 
> 标签：r

是否可以在 for 循环中保存文档，以便第 i 次运行将保存一个名为 i.txt 的文档？我尝试了明显的：

```
for (i in 1:10) {
...
write.table(temp,file="i.txt",sep="\t", col.names=NA)
} 
```

但这只是保存了一个名为 i.txt 的文件。有什么方法可以轻松做到这一点？谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-14T08:06:21.503

当您编写时，`file="i.txt"`您正在创建一个固定字符串，即`"i.txt"`.

您需要添加一些代码来获取当前值`i`并在字符串中使用它。一种选择是使用`paste`：

```
paste(i, ".txt", sep="") 
```

`paste0`或者使用`sep=""`默认使用的新的（在 R 2.15.0 中）快捷功能

因此，尝试：

```
for (i in 1:10) {
...
write.table(temp,file=paste0(i, ".txt"),sep="\t", col.names=NA)
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-14T09:32:23.317

如果您想要更多格式选项，请查看 sprintf()

```
i <- c(1, 2, 10, 99, 100)
paste("file", i, ".txt", sep = "")
[1] "file1.txt"   "file2.txt"   "file10.txt"  "file99.txt"  "file100.txt"
sprintf("file%i.txt", i)
[1] "file1.txt"   "file2.txt"   "file10.txt"  "file99.txt"  "file100.txt"
sprintf("file%02i.txt", i)
[1] "file01.txt"  "file02.txt"  "file10.txt"  "file99.txt"  "file100.txt"
sprintf("file%03i.txt", i)
[1] "file001.txt" "file002.txt" "file010.txt" "file099.txt" "file100.txt" 
```

# c++ - JavaScript 位操作到 C++ 位操作

> ID：11948166
> 
> 赞同：0
> 
> 时间：2012-08-14T08:04:48.227
> 
> 标签：c++, bitwise-operators

以下伪和 JavaScript 代码是算法实现的摘录，我想将其转换为 C++。

伪代码：

```
for b from 0 to 2|R| do
for i from 0 to |R| do
if BIT-AT(b, i) = 1 then // b’s bit at index i 
```

JavaScript 代码：

```
for (var b = 0; b < Math.pow(2, orders[r].length); b++) // use b's bits for directions
   {
   for (var i = 0; i < orders[r].length; i++)
    {
    if (((b >> i) & 1) == 1) {  // is b's bit at index i on? 
```

我不明白这段代码的最后一行发生了什么，上面给出的 JavaScript 代码的 C++ 代码应该是什么。到目前为止，我写的是：

```
for (int b = 0; b < pow(2, orders.at(r).size()); b++) 
{
  for (int i = 0; i < orders.at(r).size(); i++)
    {
     if (((b >> i) & 1) == 1)***//This line is not doing what it is supposed to do according to pseudo code*** 
```

最后一行是给我分段错误。

- 编辑：我很抱歉问题出在其他地方，此代码工作正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T08:10:31.453

```
(((b >> i) & 1) == 1)
     |     |
     |     |
     |    bitwise AND between the result of the shift and number 1.
     |
    shift b by i bits to the right 
```

之后，将结果与数字 1 进行比较。

因此，例如，如果`b`是 8，并且`i`是 2，它将执行以下操作：

1.  将 8（即`00001000`）向右移动 2 位。结果将是`00000100`。
2.  应用按位 AND: `00000100 BITWISE_AND 00000001`，结果将是`0`。
3.  将其与 1 进行比较。因为`0 =/= 1`，您不会输入最后一个`if`。

至于这背后的逻辑，如果变量的位数是，代码`((b >> i) & 1) == 1)`返回，否则。`true``i``b``1``false`

而且我相信c++代码会是一样的，除了我们在c++中没有`Math`类，你必须`var`用相应的类型替换s。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T08:14:32.637

`>>`是右移运算符，即取左操作数并将其位 n 位置向右移动（由右操作数定义）。

所以本质上，`1 << 5`将`1`移至`100000`.

在您的示例`(b >> i) & 1 == 1`中，将检查是否由于逻辑和 ( ) 而设置了第 i 位 (1 `&`)。

至于您的代码，您可以（几乎）直接在 C 或 C++ 中使用它。`Math.pow()`会变成`pow()`inside `math.h`，但是（在这种情况下）您可以简单地使用左移运算符：

```
for (int b = 0; b < (1 << orders[r].length); ++b) // added the brackets to make it easier to read
    for (int i = 0; i < orders[r].length; ++i)
        if (((b >> i) & 1) == 1) {
            // ...
        } 
```

`1 << orders[r].length`本质上与 相同`pow(2, orders[r].length)`，但没有任何函数调用。

# javascript - 使用 javascript 禁用 onclick 属性

> ID：11948167
> 
> 赞同：7
> 
> 时间：2012-08-14T08:04:54.123
> 
> 标签：javascript, css, html, onclick

一旦其中一个被激活，我如何禁用另一个 onclick 事件。两个 div 都设置为 display:none; 在 CSS 中。这可能真的很简单，但我是编程新手。

HTML

```
<a id="leftbutton" href="#" onclick="showDiv(this.id); return false;">click me</a>
<a id="righttbutton" href="#"onclick="showDiv(this.id); return false;">click me</a> 
```

Javascript

```
function showDiv(id)
{   
  if(id == "leftbutton"){
     document.getElementById('orangediv').style.display = 'block';
     }else{
     document.getElementById('greendiv').style.display = 'block';
}} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-14T08:17:19.513

这应该可以解决问题：

```
function showDiv(id)
{   
  if(id == "leftbutton"){
     document.getElementById('orangediv').style.display = 'block';
     document.getElementById('righttbutton').onclick = null;
     }else{
     document.getElementById('greendiv').style.display = 'block';
     document.getElementById('leftbutton').onclick = null;
}} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T08:49:10.890

您可以将 href 属性设置为 div 的 id，单击后应该可见。 `showDiv`函数可以获取整个元素作为参数，然后您也可以访问它的属性。第二个参数可以是你应该隐藏的元素的 id，

```
 <a id="leftbutton" href="orangediv" onclick="showDiv(this,'rightbutton');return false">click me</a>
   <a id="righttbutton" href="greendiv"onclick="showDiv(this,'leftbutton');return false">click me</a> 
```

在js中：

```
var showDiv =function(el, toHide){
  document.getElementById( el.href ).style.display = 'block';
  document.getElementById( toHide ).style.display = 'none';
  el.onclick = null; //remove onclick declaration from this anchor.

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T08:11:27.883

这些方面的东西：

```
function showDiv(id){   
var o = document.getElementById('orangediv');
var g = document.getElementById('greendiv');
if  (id == "leftbutton"){
     o.style.display = 'block';
}else{
    g.style.display = 'block';
}
o.writeAttribute('onclick','');
g.writeAttribute('onclick','');
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T08:11:28.860

只需将另一个元素的onclick属性设置为null；

```
if  (id == "leftbutton"){
        document.getElementById('orangediv').style.display = 'block';
        document.getElementById('righttbutton').onclick = null;
    }
    else{
        document.getElementById('greendiv').style.display = 'block';
        document.getElementById('leftbutton').onclick = null;
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-14T08:09:31.063

像这样的例子：

```
function showDiv(id){   

  if  (id == "leftbutton"){
  document.getElementById('orangediv').style.display = 'block';
  document.getElementById('rightbutton').onclick = "#";
}else{
  document.getElementById('greendiv').style.display = 'block';
  document.getElementById('leftbutton').onclick = "#";
}} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-14T08:11:48.723

```
function showDiv(id) {
    if ( showDiv.executed ) {
        return false;
    }

    if  ( id === "leftbutton" ) {
       document.getElementById('orangediv').style.display = 'block';
    } else {
       document.getElementById('greendiv').style.display = 'block';
    }

    showDiv.executed = true;
}

showDiv.executed = false; 
```

这样做，您总是可以通过简单地设置`showDiv.executed`来重新启用显示`false`。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-14T08:12:45.273

您可以测试是否显示其他元素：

```
function showDiv(id)
{ 
  if  (id == "leftbutton" && (document.getElementById('greendiv').style.display == 'none'))
  {
      document.getElementById('orangediv').style.display = 'block';
  }
  else if(id == "rightbutton" && (document.getElementById('orangediv').style.display == 'none'))
  {
      document.getElementById('greendiv').style.display = 'block';
  }
} 
```

# knockout.js - 如何在 knockout.js 中缩短名称？

> ID：11948169
> 
> 赞同：2
> 
> 时间：2012-08-14T08:04:59.720
> 
> 标签：knockout.js

我想，我需要自定义绑定，

如果文本长于 n 个字符，则放置“...”并在鼠标悬停时显示工具提示。

```
<div data-bind="shortenText:name, maxLength:10" ></div> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-07T16:56:13.253

使用带有 text-overflow: ellipsis 属性的 css3 类

```
.truncate {
    width: 140px;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-15T09:13:34.887

我可以编写没有工具提示的自定义绑定：

```
ko.bindingHandlers.truncatedText = {
    update: function (element, valueAccessor, allBindingsAccessor) {
        var value = ko.utils.unwrapObservable(valueAccessor()),
        length = ko.utils.unwrapObservable(allBindingsAccessor().length) || ko.bindingHandlers.truncatedText.defaultLength,
        truncatedValue = value.length > length ? value.substring(0, Math.min(value.length, length)) + " ..." : value;

        ko.bindingHandlers.text.update(element, function () { return truncatedValue; });
    },
    defaultLength: 15
}; 
```

# android - 水平滚动视图中图片位置的问题

> ID：11948175
> 
> 赞同：0
> 
> 时间：2012-08-14T08:05:26.960
> 
> 标签：android, image, position, android-relativelayout, horizontalscrollview

好吧，我有以下代码，它加载 5 张图片和 5 个复选框，每张图片一个：

```
hLayout.postDelayed(new Runnable() {

                        DisplayMetrics metrics = getActivity().getResources().getDisplayMetrics();
                        int width = metrics.widthPixels;
                        int height = metrics.heightPixels;

                        @Override
                        public void run() {

                            if (coupons != null) {
                                int coupSize = coupons.size();
                                final int itemWidth = (width / 2);
                                final int itemHeight = (height / 2);
                                hLayout.removeAllViews();
                                for (int i = 0; i < coupSize ; i++) {
                                    Coupon coupon = coupons.get(i);
                                    if (coupon.getImage() != null) {
                                        RelativeLayout parent = new RelativeLayout(getActivity());
                                        RelativeLayout.LayoutParams linearparams = new RelativeLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
                                        parent.setLayoutParams(linearparams);
                                        final CheckBox cb = new CheckBox(getActivity());
                                        final ImageView iv = new ImageView(getActivity());
                                        //iv.setScaleType(ScaleType.CENTER_INSIDE);
                                        LayoutParams checkBoxParams = new LayoutParams();
                                        cb.setId(i);
                                        checkBoxParams.height = LayoutParams.WRAP_CONTENT;
                                        checkBoxParams.width = LayoutParams.WRAP_CONTENT;
                                        cb.setOnCheckedChangeListener(changeListener);
                                        RelativeLayout.LayoutParams imageParams = new RelativeLayout.LayoutParams(itemWidth, itemHeight);
                                        imageParams.height = itemHeight;
                                        imageParams.width = itemWidth;
                                        imageParams.addRule(RelativeLayout.BELOW, cb.getId());
                                        parent.addView(cb, checkBoxParams);
                                        parent.addView(iv, imageParams);
                                        hLayout.addView(parent);
                                        ImageUtil.loadImage(coupon.getImage(), iv, itemWidth, itemHeight, "", false, getActivity());
                                    }
                                }
                            }

                        }
                    }, 200); 
```

第一个复选框和图像在他们的位置。问题在于其他图像比第一张图片略低。除了第一张图片，它们都对齐了，但低于它们应有的位置（它们应该与第一张图片对齐）。我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T13:44:36.553

解决方法： if (cb.getId() == 0) { imageParams.topMargin = 72; }

# clojure - Hiccup 中的条件句，我可以让它更惯用吗？

> ID：11948179
> 
> 赞同：3
> 
> 时间：2012-08-14T08:05:41.080
> 
> 标签：clojure, noir, hiccup

Clojure初学者在这里！我在 Noir 项目中为我的 Hiccup 代码添加了 Flash 消息支持。

我要做的是检查是否设置了每个特定的消息字符串。如果没有消息，那么我不想显示包含该消息的特定 flash 元素。

```
(defpartial success-flash [msg]
            [:div.alert.notice.alert-success
             [:a.close {:data-dismiss "alert"} "x"]
             [:div#flash_notice msg]])

(defpartial error-flash [msg]
            [:div.alert.notice.alert-error
             [:a.close {:data-dismiss "alert"} "x"]
             [:div#flash_notice msg]])

[..]

(defpartial layout [& content]
            (html5
              [:head
                [...]
              [:body
               (list
                [...]
                [:div.container
                 (let [error-msg (session/flash-get :error-message)
                       error-div (if (nil? error-msg) () (error-flash error-msg))
                       success-msg (session/flash-get :success-message)
                       success-div (if (nil? success-msg) () (success-flash success-msg))]
                       warning-msg (session/flash-get :warning-message)
                       warning-div (if (nil? warning-msg) () (warning-flash warning-msg))]

                   (list error-div success-div warning-div content))])])) 
```

免责声明：我完全同意，您可能永远不会遇到一次需要多个特定闪光灯的情况，但请让我尝试找出更好、更实用的方法来实现这一点.

我相信有一种处理类似情况的模式。基本上我检查几个表达式的值，用这些值做一堆东西，然后根据结果采取行动。你可以用越来越可怕的（cond）来解决这个问题，但我的解决方案至少更干净一些。

提示？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-14T14:27:07.230

你也可以使用`when-let`.

```
(defpartial layout
  [& contents]
  (html5
    [:body
     (when-let [msg (session/flash-get :error-message)]
       (error-flash msg))
     (when-let [msg (session/flash-get :warning-message)]
       (warning-flash msg))
     (when-let [msg (session/flash-get :success-message)]
       (success-flash msg))
     contents)) 
```

我不是打嗝专家，但我认为这应该可行。我发现它对正在发生的事情更清楚一点，尽管它稍微冗长一些。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-14T08:44:43.777

该模式称为映射值。下面是一个使用`keep`函数应用映射值模式然后过滤它们的示例

```
(use 'clojure.contrib.core)

(def flash-message
[[:error-message error-flash]
 [:success-message success-flash]
 [:warning-message warning-flash]])

(keep (fn [m f] (-?>> m (session/flash-get) (f))) flash-message) 
```

# java - 您建议如何过滤包含大量列表中定义的冒犯性词语的评论

> ID：11948189
> 
> 赞同：3
> 
> 时间：2012-08-14T08:06:30.410
> 
> 标签：java, spring, hibernate, search, filtering

简而言之：

JAVA/休眠/AJAX/SpringMVC

我希望用户发布的每条评论都应该在服务器端读取，**然后再将其存储到数据库**中，**如果评论包含令人反感的文本，则拒绝该评论**。

令人反感的文本列表非常庞大（可能有数千个）。查看此示例列表： http: [//onlineslangdictionary.com/lists/most-vulgar-words/](http://onlineslangdictionary.com/lists/most-vulgar-words/)

我猜想迭代这个列表并执行如下函数并不是那么快。有没有其他方法可以更快地完成此过滤器？您认为搜索超过千分之一的项目会对 CPU/RAM 资源产生重大影响吗？欢迎任何建议！

```
for(String offensiveText : offensiveTextList ){     
    if(commentText.contains(offensiveText )){
         //reject comment
    }
} 
```

更新：攻击性项目列表可以包含由其中的几个单词组成的项目（例如 3 个单词的文本，并且**可以**包含停用词）。它甚至可以包含非字母字符，如 *&^%。

如果评论包含相应的冒犯性项目（完全相同的**字母**），则认为它被拒绝

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-14T08:25:21.727

您可能需要为此使用一些自然语言处理库。如果您要将评论中的每个*M*个单词与列表中的*N*个冒犯性单词进行比较，那么您的算法复杂度将是`O(MN) = O(N^2)`，这是相当高的。

看看[Lucene 堆栈](https://lucene.apache.org/)，您可能会发现一些非常好的想法，例如如何标记评论并通过删除无意义的单词来减少输入。

另请参阅论文：[“区分事实信息与新闻文章中带有词语或短语的侮辱性或辱骂性信息”](http://dspace.bracu.ac.bd/bitstream/handle/10361/96/Distinguishing%20between%20factual%20information%20and%20insulting%20or%20abusive.pdf?sequence=1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T08:11:29.420

我相信更好的解决方案是将文本中的单词放在一个集合中，然后检查整个集合以查看交集是否有任何元素。

您还可以检查最常见的英语单词并删除它们（I, and, the etc.）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T08:14:33.480

您准备了一个字符串，其中一个接一个地附加了独特的攻击性单词。

然后检查`offensivewordsString.contains(commentedText).`

在 commentedText 中将只包含主要词

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T08:15:20.737

单词表也是基于语言的吗？也许值得先只扫描发帖人的语言，如果它是干净的就让他们通过，然后在服务器不忙的时候，在发帖后安排程序搜索其他令人反感的外语单词。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-14T08:16:03.143

您可以将攻击性WordList 加载到某种内存缓存中，例如HashSet，然后将您的评论文本拆分为单词，然后检查HashSet 中的每个单词是否存在。

与每次遍历整个攻击性列表相比，hashset 查找使用的资源更少。

我假设您的攻击性词语相对静态 - 如果列表在线更新，请注意线程。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-14T08:23:37.460

1.  把你所有的冒犯的话放进Set；

    `Set<String> offensiveWords = new HashSet<String>();`

2.  从评论中删除所有 ""the","a","by" "on" 等词。

3.  `String[] word`按空格字符拆分您的评论。

4.  检查是否`Set<String> offenciveWords`包含来自的单词`String[] word`

它会给你更快的性能。

# ruby-on-rails - rails 控制器内的命令行语句

> ID：11948192
> 
> 赞同：6
> 
> 时间：2012-08-14T08:06:53.170
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2

如何在我们的 rails 控制器中执行 rails 命令行语句

eg：我需要执行这个语句

> $rails 新测试 -d postgresql

从我的导轨控制器

> 定义索引
> 
> /*执行命令行语句的代码*/
> 
> 结尾

希望清楚..

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-14T08:20:17.970

如果你想在控制器中运行 shell 命令，只需使用“system”

例如：

```
system "rails new test -d postgresql" 
```

要不然

```
exec "rails new test -d postgresql" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-14T08:17:32.317

使用反引号来屏蔽，如下所示：
`rails new test -d postgresql`

为此使用作业队列可能更聪明。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-14T08:17:33.960

要在控制器中运行命令行语句，我们可以使用`system`命令

```
system "cd {path_to_folder}; rails new test -d postgresql" 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-07-18T13:24:02.987

就像[PradeepKumar](https://stackoverflow.com/users/1584224/pradeepkumar)说的（会评论它，但由于代表不能）：

> 系统“cd {path_to_folder}; rails new test -d postgresql”

您必须在同一指令中声明要运行的所有命令（由 a 分隔`;`）。我没有这样做（将`cd`访问目录的命令与我的 runnable 和两个不同调用中的实际执行行分开），我得到的结果不是我想要的。例如，如果您尝试运行：

```
system "cd {path_to_folder}" 
```

进而：

```
system "rails new test -d postgresql" 
```

rails 命令不会在*path_to_folder*的上下文中执行，而是在命令行界面的默认位置（例如`C:\Users\Me`）或 Rails 程序的环境中执行。

此外，我在命令执行时遇到错误，我通过`&`在命令末尾添加 a 来修复该错误。在这种情况下，指令有两个命令，我将它添加到第一个命令的末尾（在 之前`;`）。

# eclipse-plugin - 自定义 Eclipse 插件部署，弹出对 Package Explorer 的贡献

> ID：11948194
> 
> 赞同：1
> 
> 时间：2012-08-14T08:06:55.993
> 
> 标签：eclipse-plugin

我开发了一个简单的插件来生成一些例程代码。这个插件对包资源管理器的弹出菜单有贡献。从开发环境（来自 Eclipse RCP）运行时，它按预期工作`Launch as Eclipse application`——适当的菜单项出现在菜单中，并且它的调用符合预期。

但是，我很难将它部署到不同的 Eclipse 实例中。

开发的插件使用导出向导导出，生成一个单独的 jar 文件。这个 jar 文件已被放置到另一个 Eclipse 安装（新解包）的 dropings 目录中。当这个 Eclipse 实例启动时，Package Explorer 的弹出菜单不包含贡献的菜单项。来自 Eclipse Installation Details 的信息显示插件存在于 Plug-Ins 选项卡上，并且 Configuration 选项卡将其列为`tg.companion (1.0.0.201208132302) "Companion Object Generator" [Starting]`.

我错过了什么？为什么贡献的菜单项不显示？

谢谢。

* * *

对于`locationURI`菜单贡献是`popup:org.eclipse.jdt.ui.PackageExplorer`，对于属性的价值`allPopups`是`true`。

该插件未签名。

* * *

这是可能会有所启发的插件文件。

插件.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<?eclipse version="3.4"?>
<plugin>
   <extension point="org.eclipse.ui.menus">
      <menuContribution
            allPopups="true"
            locationURI="popup:org.eclipse.jdt.ui.PackageExplorer">
         <command
               commandId="tg.companion.handler.generator"
               label="TG Create Companion Object"
               style="push"
               tooltip="Creates a companion object to the selected entity object, and provides DAO/RAO implementations">
         </command>
      </menuContribution>
   </extension>
   <extension point="org.eclipse.ui.commands">
      <command
            defaultHandler="tg.companion.handler.GenerateCompanionObjects"
            id="tg.companion.handler.generator"
            name="Generate Comanion">
      </command>
   </extension>
</plugin> 
```

清单.MF：

```
Manifest-Version: 1.0
Bundle-ManifestVersion: 2
Bundle-Name: Companion Object Generator
Bundle-SymbolicName: tg.companion;singleton:=true
Bundle-Version: 1.0.0.qualifier
Bundle-Activator: tg.companion.Activator
Bundle-Vendor: TG
Require-Bundle: org.eclipse.ui,
 org.eclipse.core.runtime,
 org.eclipse.jdt.core;bundle-version="3.8.1",
 org.eclipse.core.resources;bundle-version="3.8.0",
 org.eclipse.core.expressions;bundle-version="3.4.400"
Bundle-RequiredExecutionEnvironment: JavaSE-1.6
Bundle-ActivationPolicy: lazy 
```

命令处理程序：

```
package tg.companion.handler;

import org.eclipse.core.commands.AbstractHandler;
import org.eclipse.core.commands.ExecutionEvent;
import org.eclipse.core.commands.ExecutionException;
import org.eclipse.core.commands.IHandler;
import org.eclipse.core.resources.IFolder;
import org.eclipse.core.resources.IProject;
import org.eclipse.jdt.core.ICompilationUnit;
import org.eclipse.jdt.core.IJavaProject;
import org.eclipse.jdt.core.IPackageFragment;
import org.eclipse.jdt.core.IPackageFragmentRoot;
import org.eclipse.jdt.core.IType;
import org.eclipse.jdt.core.JavaCore;
import org.eclipse.jdt.core.JavaModelException;
import org.eclipse.jface.dialogs.MessageDialog;
import org.eclipse.jface.viewers.ISelection;
import org.eclipse.jface.viewers.IStructuredSelection;
import org.eclipse.swt.widgets.Shell;
import org.eclipse.ui.handlers.HandlerUtil;

public class GenerateCompanionObjects extends AbstractHandler implements IHandler {

    @Override
    public Object execute(final ExecutionEvent event) throws ExecutionException {
        final Shell shell = HandlerUtil.getActiveShell(event);
        final ISelection sel = HandlerUtil.getActiveMenuSelection(event);
        final IStructuredSelection selection = (IStructuredSelection) sel;

        final Object firstElement = selection.getFirstElement();
        if (firstElement instanceof ICompilationUnit) {
            createOutput(shell, (ICompilationUnit) firstElement);
        } else {
            MessageDialog.openWarning(shell, "Companion Object Generation Warning", "Please select an entity object for generating a corresponding companion.");
        }
        return null;
    }

    private void createOutput(final Shell shell, final ICompilationUnit cu) {
         // does code generation work using Java Model
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T15:23:57.587

终于，问题解决了！

在仔细检查项目结构后，发现 build.properties 文件（出于某种原因）没有检查 plugin.xml。结果，plugin.xml 未包含在导出向导生成的 jar 文件中。

修改 build.properties 文件以包含 plugin.xml 后，生成的 jar 文件将其包含并部署，没有任何问题。

有趣的是，插件导出向导甚至没有警告插件.xml 的排除，这是我个人所预料的。

# ember.js - 模型的驼峰类名

> ID：11948196
> 
> 赞同：0
> 
> 时间：2012-08-14T08:07:07.710
> 
> 标签：ember.js, ember-data

是否有可能拥有一个名称包含多个单词的模型，例如 UserProfile，并在与 User 的 OneToMany 关系中使用它，例如 User.hasMany(UserProfile)。目前，我怀疑要么我没有在模型中正确设置某些东西，要么它只是没有像现在那样工作。这是小提琴[http://jsfiddle.net/kristaps_petersons/y75eQ/17/](http://jsfiddle.net/kristaps_petersons/y75eQ/17/)。

非常感谢您的帮助:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T08:09:40.313

你只需要在你的固定装置中处理关系 ID，我认为这会起作用。第二件事是为用户定义一个ID。事实上，fixtures 中定义的结构必须类似于您将从服务器接收到的 JSON。

我已经更新了小提琴：http: [//jsfiddle.net/Sly7/y75eQ/19/](http://jsfiddle.net/Sly7/y75eQ/19/)

# android - 在哪里以及如何在 Android 应用程序中有效地存储大量对象？

> ID：11948199
> 
> 赞同：0
> 
> 时间：2012-08-14T08:07:14.403
> 
> 标签：android, database, storage, reference-application

在 android 应用程序中存储大量静态对象的最佳方法是什么？

这是一个参考应用程序。一个对象可以有很多孩子。

数据库会很好，但是当安装应用程序时，我必须从一堆插入中初始化所有内容，这导致在应用程序存储中拥有两次信息（大量插入，和数据库信息）。我发现了一些使用预先填充的内容设置初始数据库的解决方法，但通常这似乎不是一个好习惯。

我想我不能使用 strings.xml 文件，因为我不能在那里创建复杂的对象（例如，数量取决于对象的孩子）。

存储和访问这些对象的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T08:17:43.203

您可以在 XML 中定义所有这些，它可能是相当大和复杂的 XML，但可以做到。尽管 XML 有利于初始存储和数据复制，但它不适合（快速和频繁的）数据访问。
如果您有一个**庞大**而**复杂**的数据结构，您需要**经常**访问并且**速度**很重要，那么您唯一的选择可能就是 DB。
因此，将初始化数据存储在 XML 中，初始化一次 DB 并从 DB 运行您的应用程序。
如果对象的数量不是很高，那么您可以使用**内存数据库**，这将大大提高性能。
另一种选择：您可以让中央数据库在线可用并且应用程序连接到**远程在线**中央数据库获取初始化数据。

# jsf - 在 webapp 中保存图像

> ID：11948202
> 
> 赞同：0
> 
> 时间：2012-08-14T08:07:22.873
> 
> 标签：jsf, security

我有一个网络应用程序，它将上传的图像保存在服务器 HD 上并从那里检索它。我的问题是这种方法有多安全？通过实施这种方法，服务器是否会受到攻击？或者，我曾考虑将 db 中的图像 bytearray 保存为 BLOB，但我在 JSF 中从 db 动态检索图像时遇到了很多问题。请帮助我，一点建议可能会有所帮助。

我在用着：

*   玻璃鱼 3.x
*   JSF 莫哈拉 2.3.1
*   EJB 3.0
*   EclipseLink 2.3.0

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T13:01:48.710

> *My question is how secure is this approach?*

Depends on how **you** wrote the code.

* * *

> *Will the server be vulnerable by implementing this approach?*

As said, depends on how you wrote the code. If you're for example allowing the enduser to specify a random absolute path where to store or retrieve the file, then you've obviously a security hole.

* * *

> *Alternatively, I have considered saving images bytearray in db as BLOB but I have experienced loads of problems retrieving images dynamically from db in JSF.*

Just press `Ask Question` button on right top here and elaborate the concrete problem in detail and if the question is asked the smart way, you'll likely get answers how to fix the problem.

# c# - System.Windows.Forms.SaveFileDialog 将 FileName 设置为没有路径的文件标题。为什么？

> ID：11948203
> 
> 赞同：0
> 
> 时间：2012-08-14T08:07:22.903
> 
> 标签：c#, .net, savefiledialog

我看到 SaveFileDialog 的奇怪行为。我希望 FileName 属性包含新文件的完整路径。而且我不知道如何知道在哪里保存文件。对话框对象转储如下（在用户选择文件之后）：

```
_autoUpgradeEnabled true    bool
_customPlaces   Count = 0   System.Windows.Forms.FileDialogCustomPlacesCollection
AddExtension    true    bool
AutoUpgradeEnabled  true    bool
charBuffer  null    System.Windows.Forms.UnsafeNativeMethods.CharBuffer
CheckFileExists false   bool
CheckPathExists true    bool
CustomPlaces    Count = 0   System.Windows.Forms.FileDialogCustomPlacesCollection
DefaultExt  ""  string
defaultExt  null    string
DereferenceLinks    true    bool
DialogCaption   ""  string
dialogHWnd  0   System.IntPtr
FileName    "temp.flg"  string
fileNames   {string[1]} string[]
FileNames   {string[1]} string[]
FileNamesInternal   {string[1]} string[]
Filter  "TIFF (*.tif)|*.tif|Multipage image (*.tif)|*.tif|GIF (*.gif)|*.gif|PNG (*.png)|*.png|JPEG (*.jpg)|*.jpg|Bitmap (*.bmp)|*.bmp|VASoftOnline Flow Chart (*.flg)|*.flg"    string
filter  "TIFF (*.tif)|*.tif|Multipage image (*.tif)|*.tif|GIF (*.gif)|*.gif|PNG (*.png)|*.png|JPEG (*.jpg)|*.jpg|Bitmap (*.bmp)|*.bmp|VASoftOnline Flow Chart (*.flg)|*.flg"    string
FilterExtensions    {string[1]} string[]
filterIndex 7   int
FilterIndex 7   int
FilterItems {System.Windows.Forms.FileDialogNative.COMDLG_FILTERSPEC[7]}    System.Windows.Forms.FileDialogNative.COMDLG_FILTERSPEC[]
ignoreSecondFileOkNotification  false   bool
initialDir  null    string
InitialDirectory    ""  string
Instance    16449536    System.IntPtr
okNotificationCount 0   int
Options 2052    int
options -2147481594 int
RestoreDirectory    false   bool
securityCheckFileNames  false   bool
SettingsSupportVistaDialog  true    bool
ShowHelp    false   bool
supportMultiDottedExtensions    false   bool
SupportMultiDottedExtensions    false   bool
title   null    string
Title   ""  string
UseVistaDialogInternal  true    bool
ValidateNames   true    bool
CreatePrompt    false   bool
OverwritePrompt true    bool 
```

您可以在转储中看到 FileName = "temp.flg" 没有任何有关路径的信息。有人在他的软件中看到过这个问题吗？有解决方法的想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T08:20:42.447

在[SaveFileDialog 的文档中，](http://msdn.microsoft.com/en-us/library/system.windows.forms.savefiledialog.aspx)您可以找到如何使用流保存文件的示例：

```
Stream myStream ;
SaveFileDialog saveFileDialog1 = new SaveFileDialog();
saveFileDialog1.Filter = "txt files (*.txt)|*.txt|All files (*.*)|*.*"  ;
saveFileDialog1.FilterIndex = 2 ;
saveFileDialog1.RestoreDirectory = true ;
if(saveFileDialog1.ShowDialog() == DialogResult.OK)
{
   if((myStream = saveFileDialog1.OpenFile()) != null)
   {
       // Code to write the stream goes here.
       myStream.Close();
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T08:14:02.533

`FileName`将包含文件的文件名。如果你想要文件*路径*，你可以使用这个：

```
FileInfo fileInfo = new FileInfo(saveFileDialog.FileName);
fileInfo.DirectoryName //Full path to file 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-08-14T08:24:03.373

对话框返回的文件名应该是*包含*路径的完整文件名。也许您得到的是相对路径而不是绝对路径，但我不确定为什么会这样。在本地我已经对此进行了测试，并且每次都能看到完整的路径。

但是，还有一些其他的东西可能会有所帮助：`SaveFileDialog`该类有一个名为的方法`OpenFile`，您可以使用它来创建文件并返回 a`Stream`供您写入：

```
var dlg = new SaveFileDialog();
if (dlg.ShowDialog() == DialogResult.OK)
{
    using (var stream = dlg.OpenFile())
    {
        // save here!
    }
} 
```

# svn - SVN 身份验证不起作用

> ID：11948207
> 
> 赞同：0
> 
> 时间：2012-08-14T08:07:31.810
> 
> 标签：svn

我在启用“密码数据库”的情况下设置了 SVN，我仍然可以登录而无需进行身份验证：

```
#> cat authz
     [aliases]
     [groups]

#> cat passwd
     [users]
     somePrivateUser = SomeUserPass

#> cat svnserve.com
     [general]
     anon-access=none
     auth-access=write
     password-db=passwd
     realm=MyReals 
```

**这有效并检查代码：**

```
svn://somePrivateUser:SomeUserPass@server/mySvnPath/ 
```

**但这也是如此：**

```
svn://AnonFakeTest24323424@server/mySvnPath/ 
```

**和这个：**

```
svn://server/mySvnPath/ 
```

**和这个：**

```
svn://root@server/mySvnPath/ 
```

我不确定我哪里出错了，我已经重新启动了几次服务器，一切正常，但无论如何我都可以在没有实际被服务器验证的情况下检查代码。请指教。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T05:18:43.677

我想通了，当我测试安全性时，我不知道 TortoiseSVN 缓存了该帐户，即使您尝试使用另一个帐户，它仍然使用您添加的第一个帐户。因此，实际上，它是安全的并且就是一旦你在 TortoiseSVN 中添加了一个帐户，你就不能更改帐户。

@pikand - 感谢您如此快速地响应，我会更深入地查看 authz 以获得额外的安全性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T08:17:55.607

在我的 authz conf 中，我为根路径定义了访问级别：

```
[/] 
* = 
somePrivateUser = rw
readOnlyUser = r 
```

* 代表匿名访问。

# android - 激活gps提示phonegap应用

> ID：11948210
> 
> 赞同：3
> 
> 时间：2012-08-14T08:07:35.373
> 
> 标签：android, cordova, gps

我搜索并发现在android上编程可以在应用程序中提示出现打开gps。使用这个：android.provider.Settings.ACTION_LOCATION_SOURCE_SETTINGS

我想为 phonegap 应用程序做同样的事情，但我还没有找到任何东西。只是如何制作通知窗口而不是 gps 提示。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-11T10:49:18.400

您必须编写一个插件来调用您要执行的本机 Java 代码。请在此处阅读有关如何执行此操作的信息以及相关的 phonegap[文档](https://stackoverflow.com/questions/19365052/call-android-service-from-html5-button-phonegap)[。](http://docs.phonegap.com/en/3.1.0/guide_hybrid_plugins_index.md.html#Plugin%20Development%20Guide)

希望能帮助到你！

# php - Joomla -- 查找菜单项的所有翻译

> ID：11948218
> 
> 赞同：2
> 
> 时间：2012-08-14T08:08:24.543
> 
> 标签：php, joomla, multilingual

我正在使用 Joomla 2.5 和语言切换模块和插件来构建一个多语言站点。

主要问题是：切换语言总是会导致翻译主页，而不是翻译菜单项。所以我遇到了查找菜单项的所有翻译的问题。

基于内部结构，语言过滤器仅过滤具有合适语言设置的页面项目。因此，每个菜单项、链接或 url 都是唯一的，不可能为每个翻译的菜单项定义类似“根”菜单项的内容。是否可以创建一个在菜单项创建表单中插入新按钮的插件？

问候菲利普

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T07:14:34.557

得到它的工作！搜索“翻译”并没有导致正确的结果，而是搜索“关联”解决了它。我在查看 com_menus 文件的代码时找到了答案：

```
$associations = MenusHelper::getAssociations( $active->id ); 
```

就是这样，我只需要通过以下方式注册 MenusHelper 类：

```
JLoader::register('MenusHelper', JPATH_ADMINISTRATOR . '/components/com_menus/helpers/menus.php'); 
```

# java - 关于websphere Thread Hung的问题

> ID：11948223
> 
> 赞同：1
> 
> 时间：2012-08-14T08:08:58.800
> 
> 标签：java, multithreading, websphere

我在我们的开发应用程序中面临着 java 线程挂起的问题。以下是日志跟踪：  

```
020 SystemOut     O --------------------------------------------------------------------------------
[8/1/12 11:00:21:136 CDT] 00000023 ThreadMonitor W   WSVR0605W: Thread "WebContainer : 6" (00000027) has been active for 731757 milliseconds and may be hung.  There is/are 2 thread(s) in total in the server that may be hung.
[8/1/12 11:00:24:626 CDT] 00000021 FreePool      E   J2CA0045E: Connection not available while invoking method createOrWaitForConnection for resource jdbc/RTNCTR_DEV.
[8/1/12 11:00:24:636 CDT] 00000021 SystemOut     O 
[8/1/12 11:00:24:636 CDT] 00000021 SystemOut     O -------------------------------------------------------------------------------- 
```

无法找到此问题的根本原因，请提供可能的解决方案，请在我被卡住的情况下请各位大神指教..!!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T14:08:40.690

对于初学者，您想通过请求[javacore thread dump](http://java.sun.com/developer/technicalArticles/Programming/Stacktrace/)来查找该特定线程的卡住位置。

在 UNIX 平台上，您只需在进程 ID 上发出 kill -3。在 Windows 上，您需要使用[wsadmin 命令](http://www-01.ibm.com/support/docview.wss?uid=swg21384926)（它也适用于 UNIX，但不如 kill -3 快）。

在结果文件中搜索`WebContainer : 6`，该线程的堆栈跟踪将向您显示线程在应用程序或 WebSphere 中的哪个位置卡住了。

请参阅[WebSphere Application Server 中 javacore 文件的问题确定](http://www-01.ibm.com/support/docview.wss?uid=swg21181068)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T22:09:17.827

看起来它在等待与数据源“jdbc/RTNCTR_DEV”的连接时被卡住了。我的猜测是您没有可用的连接，或者您的应用程序正在泄漏它们。做 beny23 之前所说的检查连接是否有效（也许在重新启动之后），如果它确实有效并且突然停止（比如在 10 次查询之后），那么您就有泄漏。如果它们根本不起作用，请查看 WAS 中的数据源配置。

如果它是泄漏，那么通过您的应用程序并找到您没有将连接返回到池或关闭连接的位置 - 这一切都取决于您的应用程序的工作方式。

我们也遇到了类似的问题。原来通过在数据源上添加自定义设置以将连接设置设置为 false 来解决。我们当然首先确定泄漏连接的不是我们的应用程序。

# ruby-on-rails - 如何使用 wicked_pdf 在 PDF 中使用外部图像

> ID：11948228
> 
> 赞同：1
> 
> 时间：2012-08-14T08:09:08.163
> 
> 标签：ruby-on-rails, wicked-pdf

我想将一些外部图像嵌入到 pdf 中，我正在使用标签来执行此操作，但图像不显示在 pdf 中。如何在pdf中显示外部图像

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-14T09:25:22.773

尝试使用这个版本的[wkhtmltopdf](http://code.google.com/p/wkhtmltopdf/downloads/detail?name=wkhtmltopdf-0.9.9-OS-X.i368&can=2&q=)。

这可能会解决您的问题。

# asp.net-mvc - ASP.NET MVC 3 AJAX 请求返回 404 Not Found 错误

> ID：11948232
> 
> 赞同：0
> 
> 时间：2012-08-14T08:09:38.130
> 
> 标签：asp.net-mvc, asp.net-mvc-3, jquery, asp.net-ajax, http-status-code-404

这是我的代码（问题如下）：

看法

```
// This function is called by another function when radioButtonGroup.change().
var requestValues = function (form) {
    var option = form.find("input:radio:checked").attr("value");

    // This seemingly shows the correct url for the action method desired.
    alert("Form Action: " + form[0].action + "\nForm Method: " + form[0].method);

    if (form.valid()) {
        $.ajax({
            url: form[0].action,
            type: form[0].method,
            data: option,
            success: function (result) {
                alert("Had success.");
                $('#createForm').replaceWith(result);
            },
            error: function (xhr) {
                alert("An error occurred: " + xhr.status + " " + xhr.statusText);
            }
        });
    }
    return false;
}

...(other code here)...

@using (Html.BeginForm("CreateForm", "MyController", FormMethod.Post, 
                        new { @id = "optionForm" }))
{
    <div id="options">
        @foreach (MyOption op in Model.GetOptions()) {
            <div class="editor-field">
            @Html.RadioButton("formOption", op.OptionType, false, 
                new { @id = op.ID, @title = @op.Description })
            <label for="@op.ID">@op.Name</label>
            </div>
        }
    </div>
    <input type="submit" value="Select" style="display:none;" />
} 
```

控制器

```
[HttpPost]
public PartialViewResult CreateForm(MyOptionType formOption) {
    MyViewModel model = new MyViewModel();
    model.ApplyOptionValues(formOption);
    return PartialView("_CreateForm", model);
} 
```

注册路线

```
// Default
routes.MapRoute(
    "Default", // Route name
    "{controller}/{action}/{id}", // URL with parameters
     new { controller = "Home", action = "Index", id = UrlParameter.Optional } // Parameter defaults
); 
```

我的问题是，当我单击单选按钮时，AJAX 请求会执行，但出现“404 Not Found”错误（即使`alert`jQuery 函数中似乎显示了适当的 url）。我昨天花了一整天的时间在这上面，我不知道到底出了什么问题。我在 IIS Express 上运行 ASP.NET MVC 3 应用程序，但我没有使用区域（无论如何我都知道）。有人对如何解决这个问题有任何建议吗？谢谢。

编辑

警报框显示以下消息：

> 表单操作：`https://localhost:44300/MyController/CreateForm`
> 
> 表单方式：post

编辑

这是重新创建错误的整个测试视图和测试控制器：

看法

```
<h2>TestAction</h2>

<script type="text/javascript">
    $(document).ready(function () {
        $("#optionForm input[name='radioOption']").change(function () {
            requestValues($(this).closest("form"));
        });

        var requestValues = function (form) {
            var option = form.find("input:radio:checked").attr("value");

            alert("Form Action: " + form[0].action + "\nForm Method: " + form[0].method);

            if (form.valid()) {
                $.ajax({
                    url: form[0].action,
                    type: form[0].method,
                    data: option,
                    success: function (result) {
                        alert("AJAX success.");
                        //$('#createForm').replaceWith(result);
                    },
                    error: function (xhr) {
                        alert("An error occurred: " + xhr.status + " " + xhr.statusText);
                    }
                });
            }
            return false;
        }
    });
</script>

@using (Html.BeginForm("CreateForm", "Test", FormMethod.Post, new { @id = "optionForm" })) {
    @Html.RadioButton("radioOption", "value1", false, new { @id = "radioButton1" })
    <label for="radioButton1">Radio Button 1</label>
    @Html.RadioButton("radioOption", "value2", false, new { @id = "radioButton2" })
    <label for="radioButton2">Radio Button 2</label>
    @Html.RadioButton("radioOption", "value3", false, new { @id = "radioButton3" })
    <label for="radioButton3">Radio Button 3</label>

    <input type="submit" value="Select" style="display:none;" />
}

<div id="createForm"></div> 
```

控制器

```
public class TestController : Controller {
    public ActionResult TestAction() {
        return View();
    }

    [HttpPost]
    public ActionResult CreateForm(string option) {
        return View("TestAction");
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-14T09:08:43.203

```
@using (Html.BeginForm("CreateForm", "MyController", FormMethod.Post, new { id = "optionForm" })) 
```

应该：

```
@using (Html.BeginForm("CreateForm", "My", FormMethod.Post, new { id = "optionForm" })) 
```

请记住，在 ASP.NET MVC 帮助程序中，您不应传递`Controller`后缀。假设。

所以正确的网址应该是：

```
https://localhost:44300/My/CreateForm 
```

并不是：

```
https://localhost:44300/MyController/CreateForm 
```

你显然在哪里`MyController`上课：

```
public class MyController: Controller
{
    public ActionResult CreateForm(MyOptionType formOption)
    {
        ...
    }
} 
```

# java - 将附件添加到带有链接的 pdf 文件

> ID：11948236
> 
> 赞同：2
> 
> 时间：2012-08-14T08:09:40.200
> 
> 标签：java, pdf, itext

如何将文件附加到现有 pdf，包括主页上的附件链接？

我正在使用 Itext 并且到目前为止仅在文档级别上附加。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T09:11:54.017

使用下面的代码创建附件，请把代码扔掉，因为我只花了几分钟，理解它并删除不必要的代码。

有一个 RESOURCE 变量，它指向您要附加的所有 pdf 或文件。在这种情况下，它是 public static final String RESOURCE = "chapter16/%s.pdf";

如果第 16 章文件夹包含您要附加​​的 pdf，%s 将替换为您提供的文件名，文件格式为 .pdf（如果您要附加 pdf 文件）

它在我的系统中工作和测试。[我从这里](http://itextpdf.com/examples/iia.php?id=289)引用了这段代码

```
// I create the list which has the list of files names i want to attach
ArrayList<String> strList = new ArrayList<String>();
strList.add("Strings"); // its the same file I'm attaching four times
strList.add("Strings"); // where "Strings" is the name of the file
strList.add("Strings");
strList.add("Strings"); 
```

* * *

```
import java.io.ByteArrayOutputStream;
import java.io.FileOutputStream;
import java.io.IOException;
import java.sql.SQLException;
import java.util.ArrayList;

import com.itextpdf.text.Chunk;
import com.itextpdf.text.Document;
import com.itextpdf.text.DocumentException;
import com.itextpdf.text.List;
import com.itextpdf.text.ListItem;
import com.itextpdf.text.Paragraph;
import com.itextpdf.text.pdf.PRStream;
import com.itextpdf.text.pdf.PdfAnnotation;
import com.itextpdf.text.pdf.PdfArray;
import com.itextpdf.text.pdf.PdfDictionary;
import com.itextpdf.text.pdf.PdfName;
import com.itextpdf.text.pdf.PdfReader;
import com.itextpdf.text.pdf.PdfWriter;

/**
 * Creates a PDF listing of attachments
 * The attachments can be extracted.
 */
public class AttachFiles {

    /** Path to the resources. */
    public static final String RESOURCE = "chapter16/%s.pdf";
    /** The filename of the resulting PDF. */
    public static final String FILENAME = "ResultingFile.pdf";
    /** The path to the resulting PDFs */
    public static final String PATH = "chapter16/%s";
    /** The filename of the PDF */
    public static final String RESULT = String.format(PATH, FILENAME);

    /**
     * Creates a PDF listing  
     * @throws IOException 
     * @throws DocumentException 
     * @throws SQLException
     */
    public static void main(String[] args) throws IOException, DocumentException, SQLException {
        AttachFiles attachFiles = new AttachFiles();
        FileOutputStream os = new FileOutputStream(RESULT);
        os.write(attachFiles.createPdf());
        os.flush();
        os.close();
        attachFiles.extractAttachments(RESULT);
    }

    /**
     * Extracts attachments from an existing PDF.
     * @param src   the path to the existing PDF
     * @param dest  where to put the extracted attachments
     * @throws IOException
     */
    public void extractAttachments(String src) throws IOException {
        PdfReader reader = new PdfReader(src);
        PdfArray array;
        PdfDictionary annot;
        PdfDictionary fs;
        PdfDictionary refs;
        for (int i = 1; i <= reader.getNumberOfPages(); i++) {
            array = reader.getPageN(i).getAsArray(PdfName.ANNOTS);
            if (array == null) continue;
            for (int j = 0; j < array.size(); j++) {
                annot = array.getAsDict(j);
                if (PdfName.FILEATTACHMENT.equals(annot.getAsName(PdfName.SUBTYPE))) {
                    fs = annot.getAsDict(PdfName.FS);
                    refs = fs.getAsDict(PdfName.EF);
                    for (PdfName name : refs.getKeys()) {
                        FileOutputStream fos
                            = new FileOutputStream(String.format(PATH, fs.getAsString(name).toString()));
                        fos.write(PdfReader.getStreamBytes((PRStream)refs.getAsStream(name)));
                        fos.flush();
                        fos.close();
                    }
                }
            }
        }
    }

    /**
     * Creates the PDF.
     * @return the bytes of a PDF file.
     * @throws DocumentExcetpion
     * @throws IOException
     * @throws SQLException 
     */
    public byte[] createPdf() throws DocumentException, IOException, SQLException {
        // step 1
        Document document = new Document();
        // step 2
        ByteArrayOutputStream baos = new ByteArrayOutputStream();
        PdfWriter writer = PdfWriter.getInstance(document, baos);
        // step 3
        document.open();
        // step 4
        document.add(new Paragraph("This is a list pdf attachments."));
        PdfAnnotation annot;
        ListItem item;
        Chunk chunk;
        List list = new List();
        // I create the list which has the list of files names i want to attach
        ArrayList<String> strList = new ArrayList<String>();
        strList.add("Strings"); // its the same file I'm attaching four times
        strList.add("Strings");
        strList.add("Strings");
        strList.add("Strings");

        for (String strWord : strList) {
            annot = PdfAnnotation.createFileAttachment(
                    writer, null, "Name", null,
                    String.format(RESOURCE, strWord), String.format("%s.pdf", strWord));
            item = new ListItem("Name");
            item.add("\u00a0\u00a0");
            chunk = new Chunk("\u00a0\u00a0\u00a0\u00a0");
            chunk.setAnnotation(annot);
            item.add(chunk);
            list.add(item);
        }
        document.add(list);
        // step 5
        document.close();
        return baos.toByteArray();
    }
} 
```

# wpf - WPF - 切换多个窗口的可见性

> ID：11948240
> 
> 赞同：1
> 
> 时间：2012-08-14T08:10:08.453
> 
> 标签：wpf, windows, user-interface

我将首先解释我的 WPF 应用程序的 UI。

我创建了一个窗口，其中包含许多用户始终可见的按钮（我们称之为主窗口），每个按钮都会打开一个与任务相关的新窗口。我想要做的是，每当单击按钮时，主窗口应该被隐藏（可见性：折叠）并且应该显示新窗口。第二个窗口还将包含一个按钮，该按钮将隐藏第二个窗口并显示主窗口。根据与之关联的命令，将要打开的第二个窗口也将具有不同的尺寸，因此我将为每个窗口设置不同的窗口

TLDR 我希望能够在多个窗口之间切换，这样一次只能看到一个窗口，我如何管理多个窗口之间的切换？？

注意：我可以从主窗口显示第二个窗口，但是从第二个窗口显示主窗口怎么样......无法得到它......或者如果有人可以向我展示一种不同的方法来实现这个：除了多个窗口

此外，这是对 UI 的扩展，我想在此页面上以这种结晶形式显示按钮：[http](http://postimage.org/image/4yibiulsh/) ://postimage.org/image/4yibiulsh/ 任何人都可以指导我进行正确的实现，我有浏览过许多站点，也尝试通过混合创建这些站点，但我不是 UI 人员....请在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T09:11:37.900

我将创建一个“窗口管理器”，它将订阅打开/关闭的更改。在这种情况下，您不必重载 Window 类。示例（为我工作）。

```
public class WindowsManager
{
    static readonly List<Window> Windows=new List<Window>();

    public static T CreateWindow<T>(T window) where T:Window
    {
        Windows.Add(window);
        window.Closed += WindowClosed;
        window.IsVisibleChanged += WindowIsVisibleChanged;
        return window;
    }

    static void WindowIsVisibleChanged(object sender, DependencyPropertyChangedEventArgs e)
    {
        var mainWindow = Application.Current.Windows.OfType<MainWindow>().Single();
        mainWindow.Visibility = Equals(e.NewValue, true) ? Visibility.Hidden : Visibility.Visible;
    }

    static void WindowClosed(object sender, System.EventArgs e)
    {
        var window = (Window) sender;
        window.Closed -= WindowClosed;
        window.IsVisibleChanged -= WindowIsVisibleChanged;
        Windows.Remove(window);
    }
} 
```

如何使用：

```
 private void button1_Click(object sender, RoutedEventArgs e)
    {
        WindowsManager.CreateWindow(new Child1()).Show();
    }

    private void button2_Click(object sender, RoutedEventArgs e)
    {
        WindowsManager.CreateWindow(new Child2()).Show();
    } 
```

因此，当子窗口关闭时，WindowsManager 将收到通知并更新主窗口的可见性

**UPD1。** 添加了从 VisibleChanged 取消订阅的行

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T08:22:40.803

您可以为此使用多种方法。

要轻松切换回主窗口：将 MainWindow 的引用注入您的 SecondWindow（或您要显示的任何其他窗口），并在该窗口的关闭事件中将 MainWindow 的可见性设置回可见。

您是否也考虑过将所有内容都保留在同一个窗口中，但设置不同的面板来设置可见和不可见？这可能具有相同的效果，但它不那么复杂......

希望有帮助...

# macos - 可可：如何将视图渲染到图像？

> ID：11948241
> 
> 赞同：8
> 
> 时间：2012-08-14T08:10:10.830
> 
> 标签：macos, cocoa

我想知道是否有任何方法可以将视图呈现为图像？就像屏幕截图一样，但我可以为该方法指定任何视图。我知道如何在 ios 中做到这一点。[保存视图内容](https://stackoverflow.com/questions/4213529/saving-uiview-contents-in-ios-4-with-real-size-of-the-images-inside-i-e-scale)，但我如何在 mac os 中做到这一点？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-14T15:33:41.590

有几种方法，但它们都不是完美的。许多问题都与 Layer Backed 视图有关。

如果您没有图层支持或托管视图，则可以使用以下代码：

```
 NSData* data = [mainView dataWithPDFInsideRect:[mainView bounds]];
    NSImage *img = [[NSImage alloc] initWithData:data]; 
```

如果您使用基于图层的视图：

直到 10.8 对我来说最好的方法是

```
 NSSize mySize = mapImage.bounds.size;
        NSSize imgSize = NSMakeSize( mySize.width, mySize.height );
        NSBitmapImageRep *bir = [mapImage bitmapImageRepForCachingDisplayInRect:[mapImage bounds]];
        [bir setSize:imgSize];
        [mapImage cacheDisplayInRect:[mapImage bounds] toBitmapImageRep:bir];
        caheImg = [[NSImage alloc]initWithSize:imgSize];
        [caheImg addRepresentation:bir]; 
```

但在 10.8 中`bitmapImageRepForCachingDisplayInRect`停止使用 Layer Backed 视图。

有一个选项可以对您的屏幕进行截图并切出您的视图：

```
+ (NSImage*) screenCacheImageForView:(NSView*)aView
{
    NSRect originRect = [aView convertRect:[aView bounds] toView:[[aView window] contentView]];

    NSRect rect = originRect;
    rect.origin.y = 0;
    rect.origin.x += [aView window].frame.origin.x;
    rect.origin.y += [[aView window] screen].frame.size.height - [aView window].frame.origin.y - [aView window].frame.size.height;
    rect.origin.y += [aView window].frame.size.height - originRect.origin.y - originRect.size.height;

    CGImageRef cgimg = CGWindowListCreateImage(rect,
                                           kCGWindowListOptionIncludingWindow,
                                           (CGWindowID)[[aView window] windowNumber],
                                           kCGWindowImageDefault);
    return [[NSImage alloc] initWithCGImage:cgimg size:[aView bounds].size];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-28T11:16:59.890

我在我的应用程序中使用此代码，效果很好。

但是，如果我将应用程序拖到辅助监视器上，屏幕截图会被丢弃，并且我会捕获错误的矩形。

以下代码修复了该问题（我还从计算中删除了一些多余的数学，其中一个字段被减去然后添加）以防将来有人遇到这个问题：

```
NSRect originRect = [aView convertRect:[aView bounds] toView:[[aView window] contentView]];

NSArray *screens = [NSScreen screens];
NSScreen *primaryScreen = [screens objectAtIndex:0];

NSRect rect = originRect;
rect.origin.y = 0;
rect.origin.x += [aView window].frame.origin.x;
rect.origin.y = primaryScreen.frame.size.height - [aView window].frame.origin.y - originRect.origin.y - originRect.size.height; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-05-16T13:55:48.643

@Remizorr 的答案在 ObjectiveC 中有效，就像在 macOS High Sierra 10.13.4 下解释的那样。- Xcode 9.2。

它也适用于 layerBacked 视图 ( `wantsLayer = true`)。

这是更新的 Swift 版本：

```
extension NSView {

func snapshotImage() -> NSImage? {

    guard let window = window,
        let screen = window.screen,
        let contentView = window.contentView else { return nil }

    let originRect = self.convert(self.bounds, to:contentView)
    var rect = originRect
    rect.origin.x += window.frame.origin.x
    rect.origin.y = 0
    rect.origin.y += screen.frame.size.height - window.frame.origin.y - window.frame.size.height
    rect.origin.y += window.frame.size.height - originRect.origin.y - originRect.size.height
    guard window.windowNumber > 0 else { return nil }
    guard let cgImage = CGWindowListCreateImage(rect, .optionIncludingWindow, CGWindowID(window.windowNumber), CGWindowImageOption.bestResolution) else { return nil }

    return NSImage(cgImage: cgImage, size: self.bounds.size)
}

} 
```

注意：这甚至适用于 WKWebView 并且它确实拍摄了 WKWebView 视频播放的快照（WKWebViews takeSnapshot 没有）;)。

# android - 在android的Webview中显示古吉拉特语

> ID：11948243
> 
> 赞同：1
> 
> 时间：2012-08-14T08:10:13.730
> 
> 标签：android, android-emulator, android-widget

我想为显示故事构建应用程序，其中故事**名称**和故事内容应该以古吉拉特语显示**。**

我用过**Shruti.ttf**字体

对于**storyname**，我使用了textview，对于**storycontent** ，我使用了webview

```
Typeface font = Typeface.createFromAsset(this.getAssets(), "shruti.ttf");
poetryTitleText.setTypeface(font);
poetryTitleText.setText("Snow White"); 
```

它工作得很好。

但是为了在 webview 中显示**故事内容**，我使用了 HTML 页面并在`<style>`HTML 的标签中设置了字体名称。但它显示方形图标。

模拟器不会以古吉拉特语显示字体。即使我从**R.string**文件发送古吉拉特语字符串。

帮我。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-03T07:15:25.330

-我为您找到了 2 个解决方案，我不确定是否有用，但您可以尝试一下

1.) 使用 Textview 代替 webview

```
Html.fromHtml(username + " shared "
                    + "<font color=\"#47C4E3\">" + objnews.news_title
                    + "</font>"); 
```

-将此代码设置为 Textview.settext(..above code..)

**2.）使用此代码**设置webview的jeader ：-

`Map<String, String> headers = new HashMap<String, String>(); headers.put("Accept-Language", "Your fonts"); mWebView.loadUrl("http://developer.android.com", headers);`

-谢谢！请告诉我这是否是您想要的正确路径？

# android - android 磁力链接数据过滤器

> ID：11948244
> 
> 赞同：1
> 
> 时间：2012-08-14T08:10:13.977
> 
> 标签：android, intentfilter, magnet-uri

当用户在浏览器中选择磁力链接时，我想从我的应用程序启动 Android 活动。

根据[文档](http://developer.android.com/guide/topics/manifest/data-element.html)，

> URI 由每个部分的单独属性指定：
> scheme://host:port/path 或 pathPrefix 或 pathPattern

磁铁链接的问题在于它们具有不同的模式，例如`magnet:?xt=.....`.

我尝试过这样的事情

```
<intent-filter> 
    <action android:name="android.intent.action.VIEW" />
    <category android:name="android.intent.category.DEFAULT" />
    <category android:name="android.intent.category.BROWSABLE" />
    <data 
        android:scheme="magnet"
        android:host="*"
    />
</intent-filter> 
```

但它不起作用（当我在浏览器中打开磁力链接时，活动没有启动）。你能帮我正确地为磁铁链接声明一个意图过滤器吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T08:35:14.517

我得到这个为我工作：

```
<intent-filter> 
    <action android:name="android.intent.action.VIEW" />
    <category android:name="android.intent.category.DEFAULT" />
    <category android:name="android.intent.category.BROWSABLE" />
    <data 
        android:scheme="magnet"
    />
</intent-filter> 
```

基本上，我删除了`android:host`

# markdown - Markdown 创建页面和目录？

> ID：11948245
> 
> 赞同：521
> 
> 时间：2012-08-14T08:10:22.390
> 
> 标签：markdown, tableofcontents

我开始使用markdown做笔记。

我使用**标记**来查看我的降价笔记及其美丽。

但是随着我的笔记越来越长，我发现很难找到我想要的东西。

我知道markdown可以创建表格，但它是否能够创建目录，跳转到部分，或者在markdown中定义页面部分？

或者，是否有可以做这些事情的降价阅读器/编辑器。搜索也是一个很好的功能。

简而言之，我想让它成为我很棒的笔记工具和功能，就像写书等一样。

* * *

## 回答 #1

> 赞同：565
> 
> 时间：2015-01-14T22:22:06.957

你可以试试这个。

```
# Table of Contents
1\. [Example](#example)
2\. [Example2](#example2)
3\. [Third Example](#third-example)
4\. [Fourth Example](#fourth-examplehttpwwwfourthexamplecom)

## Example
## Example2
## Third Example
## [Fourth Example](http://www.fourthexample.com) 
```

* * *

## 回答 #2

> 赞同：329
> 
> 时间：2015-10-30T09:53:52.910

这是一个有用的方法。应该在任何 MarkDown 编辑器中生成可点击的引用。

```
# Table of contents
1\. [Introduction](#introduction)
2\. [Some paragraph](#paragraph1)
    1\. [Sub paragraph](#subparagraph1)
3\. [Another paragraph](#paragraph2)

## This is the introduction <a name="introduction"></a>
Some introduction text, formatted in heading 2 style

## Some paragraph <a name="paragraph1"></a>
The first paragraph text

### Sub paragraph <a name="subparagraph1"></a>
This is a sub paragraph, formatted in heading 3 style

## Another paragraph <a name="paragraph2"></a>
The second paragraph text 
```

产生：

# 目录

1.  [介绍](https://stackoverflow.com/questions/11948245/markdown-to-create-pages-and-table-of-contents/33433098#introduction)
2.  [某段](https://stackoverflow.com/questions/11948245/markdown-to-create-pages-and-table-of-contents/33433098#paragraph1)
    1.  [分款](https://stackoverflow.com/questions/11948245/markdown-to-create-pages-and-table-of-contents/33433098#subparagraph1)
3.  [另一段](https://stackoverflow.com/questions/11948245/markdown-to-create-pages-and-table-of-contents/33433098#paragraph2)

## 这是介绍

一些介绍文字，格式为标题 2 样式

## 某段

第一段文字

### 分款

这是一个子段落，格式为标题 3 样式

## 另一段

第二段文字

* * *

## 回答 #3

> 赞同：107
> 
> 时间：2017-05-10T18:50:34.180

对于[Visual Studio Code用户来说，今天（](https://code.visualstudio.com/) **2020 年**）使用的最佳选择是[Markdown All in One](https://marketplace.visualstudio.com/items?itemName=yzhang.markdown-all-in-one)插件。

要安装它，请启动 VS Code 快速打开 (`Control/⌘</kbd>+`P`), paste the following command, and press enter.`

```
ext install yzhang.markdown-all-in-one 
```

要生成 TOC，请打开命令面板（`Control/⌘</kbd>+`Shift`+`P`) and select the `Select Markdown: Create Table of Contents`option.`

* * *

另一种选择是[Markdown TOC](https://marketplace.visualstudio.com/items?itemName=joffreykern.markdown-toc)插件。

要安装它，请启动 VS Code 快速打开 (`Control/⌘</kbd>+`P`), paste the following command, and press enter.`

```
ext install markdown-toc 
```

要生成 TOC，请打开命令面板（`Control/⌘</kbd>+`Shift`+`P`) and select the `Markdown TOC:Insert/Update` option or use `Control/⌘</kbd>+`M``T`.``

* * *

## 回答 #4

> 赞同：43
> 
> 时间：2012-08-19T23:38:30.947

[MultiMarkdown Composer](http://multimarkdown.com/)似乎确实会生成一个目录以在编辑时提供帮助。

也可能有一个或另一个库可以生成 TOC：请参阅[Python Markdown TOC Extension](https://python-markdown.github.io/extensions/toc/)。

* * *

## 回答 #5

> 赞同：31
> 
> 时间：2015-04-03T13:28:49.567

有两种方法可以在您的降价文档中创建您的**TOC （摘要）。**

# 1\. 手动

```
# My Table of content
- [Section 1](#id-section1)
- [Section 2](#id-section2)

<div id='id-section1'/>
## Section 1
<div id='id-section2'/>
## Section 2 
```

# 2\. 以编程方式

例如，您可以使用为您生成摘要的脚本，看看我在 github 上的项目 - **[summaryMD](https://github.com/velthune/summarizeMD)** -

我也尝试过其他脚本/npm 模块（例如[doctoc](https://github.com/thlorenz/doctoc)），但没有人用工作锚重现 TOC。

* * *

## 回答 #6

> 赞同：30
> 
> 时间：2014-03-02T17:45:48.100

您可以尝试使用[这个 ruby​​ 脚本](https://gist.github.com/albertodebortoli/9310424)从 markdown 文件生成 TOC。

```
 #!/usr/bin/env ruby

require 'uri'

fileName = ARGV[0]
fileName = "README.md" if !fileName

File.open(fileName, 'r') do |f|
  inside_code_snippet = false
  f.each_line do |line|
    forbidden_words = ['Table of contents', 'define', 'pragma']
    inside_code_snippet = !inside_code_snippet if line.start_with?('```')
    next if !line.start_with?("#") || forbidden_words.any? { |w| line =~ /#{w}/ } || inside_code_snippet

    title = line.gsub("#", "").strip
    href = URI::encode title.gsub(" ", "-").downcase
    puts "  " * (line.count("#")-1) + "* [#{title}](\##{href})"
  end
end 
```

* * *

## 回答 #7

> 赞同：27
> 
> 时间：2017-09-08T22:09:11.850

```
# Table of Contents
1\. [Example](#example)
2\. [Example2](#example2)
3\. [Third Example](#third-example)

## Example [](#){name=example}
## Example2 [](#){name=example2}
## [Third Example](#){name=third-example} 
```

如果您额外使用 markdown，请不要忘记您可以为链接、标题、代码围栏和图像添加特殊属性。
[https://michelf.ca/projects/php-markdown/extra/#spe-attr](https://michelf.ca/projects/php-markdown/extra/#spe-attr)

* * *

## 回答 #8

> 赞同：17
> 
> 时间：2016-10-25T04:57:18.670

不同 Markdown 解析器生成的锚标签是不均匀的。

如果你正在使用 Markdown 解析器 GFM（GitHub Flavored Markdown）或 Redcarpet，我编写了一个 Vim 插件来处理目录。

### 特征

1.  为 Markdown 文件生成目录。

    支持的 Markdown 解析器：

    *   GFM（GitHub 风格的 Markdown）
    *   红地毯
2.  更新现有目录。

3.  保存时自动更新现有目录。

### 截图

![vim-markdown-toc](../Images/f9f8c003bfe2fa07e5ff079286365c75.png)

### 用法

**生成目录**

将光标移动到要附加目录的行，然后在下面键入适合您的命令。该命令将在光标进入目录后生成标题。

1.  `:GenTocGFM`

    以 GFM 链接样式生成目录。

    此命令适用于 GitHub 存储库中的 Markdown 文件，例如 README.md，以及 GitBook 的 Markdown 文件。

2.  `:GenTocRedcarpet`

    以 Redcarpet 链接样式生成目录。

    此命令适用于 Jekyll 或其他任何使用 Redcarpet 作为其 Markdown 解析器的地方。

    您可以[在此处](http://mazhuang.org/2015/12/05/diff-between-gfm-and-redcarpet/)查看以了解 GFM 和 Redcarpet 样式目录链接之间的区别。

**手动更新现有目录**

通常你不需要这样做，现有的目录默认会在保存时自动更新。如果要手动执行，只需使用`:UpdateToc`命令即可。

### 下载和文件

[https://github.com/mzlogin/vim-markdown-toc](https://github.com/mzlogin/vim-markdown-toc)

* * *

## 回答 #9

> 赞同：15
> 
> 时间：2017-02-15T12:32:25.500

您还可以使用`pandoc`“[瑞士军刀”将“一种标记格式转换为另一种”](http://pandoc.org/index.html)。`--toc`如果您提供参数，它可以在输出文档中自动生成目录。

**提示：**如果您想要`html`输出目录，您还需要提供`-s`生成独立文档的目录。

示例 shell 命令行：

```
./pandoc -s --toc input.md -o output.html 
```

* * *

## 回答 #10

> 赞同：11
> 
> 时间：2019-04-25T10:36:39.120

在 Visual Studio Code (VSCode) 中，您可以使用扩展[Markdown All in One](https://marketplace.visualstudio.com/items?itemName=yzhang.markdown-all-in-one)。

安装后，请按照以下步骤操作：

1.  按`CTRL`+ `SHIFT`+`P`
2.  选择*Markdown：创建目录*

编辑：现在我使用 DocToc 生成目录，有关详细信息，请参阅[我的其他答案](https://stackoverflow.com/a/62729669/334569)。

* * *

## 回答 #11

> 赞同：11
> 
> 时间：2019-02-22T14:34:29.237

在 Gitlab 上，markdown 支持这个：`[[_TOC_]]`

* * *

## 回答 #12

> 赞同：10
> 
> 时间：2018-04-12T13:23:52.823

您可以使用这个 bash one-liner 来生成它。假设您的降价文件名为`FILE.md`.

```
echo "## Contents" ; echo ; 
cat FILE.md | grep '^## ' | grep -v Contents | sed 's/^## //' | 
  while read -r title ; do 
    link=$(echo $title | tr 'A-Z ' 'a-z-') ; 
    echo "- [$title](#$link)" ; 
    done 
```

* * *

## 回答 #13

> 赞同：10
> 
> 时间：2019-12-05T23:28:15.173

* * *

## 回答 #14

> 赞同：10
> 
> 时间：2016-07-26T21:45:39.963

为了我们这些在[Atom](https://atom.io/)`README.md`中制作文件的人的利益（我是如何找到这个线程的）：

```
apm install markdown-toc 
```

[https://atom.io/packages/markdown-toc](https://atom.io/packages/markdown-toc)

* * *

## 回答 #15

> 赞同：8
> 
> 时间：2014-08-03T07:27:25.627

如果您想使用 javascript/node.js 工具，请查看[markdown-toc](https://github.com/jonschlinkert/markdown-toc)。

* * *

## 回答 #16

> 赞同：6
> 
> 时间：2013-05-21T01:37:37.387

我刚刚为 编写了一个扩展`python-markdown`，它使用它的解析器来检索标题，并将 TOC 输出为带有本地链接的 Markdown 格式的无序列表。该文件是

*   [md_toc.py](http://sourceforge.net/p/sdaaubckp/code/HEAD/tree/extensions/python-markdown/md_toc.py)（以前是~~[md_toc.py](http://sdaaubckp.svn.sourceforge.net/viewvc/sdaaubckp/extensions/python-markdown/md_toc.py?view=markup)~~）

...它应该放在`markdown/extensions/`markdown安装的目录中。然后，您所要做的就是键入`<a>`带有`id="..."`属性的锚标记作为参考 - 所以对于这样的输入文本：

```
$ cat test.md 
Hello
=====

## <a id="sect one"></a>SECTION ONE ##

something here

### <a id='sect two'>eh</a>SECTION TWO ###

something else

#### SECTION THREE

nothing here

### <a id="four"></a>SECTION FOUR

also... 
```

...扩展名可以这样调用：

```
$ python -m markdown -x md_toc test.md 
* Hello
    * [SECTION ONE](#sect one)
        * [SECTION TWO](#sect two)
            * SECTION THREE
        * [SECTION FOUR](#four) 
```

...然后您可以将此目录粘贴回您的降价文档中（或在您的文本编辑器中有一个快捷方式，调用当前打开的文档上的脚本，然后将生成的目录插入同一文档中）。

请注意，旧版本`python-markdown`没有`__main__.py`模块，因此，上述命令行调用不适用于这些版本。

* * *

## 回答 #17

> 赞同：6
> 
> 时间：2016-10-07T11:27:13.733

[Typora](http://www.typora.io/ "泰波拉")通过添加到您的文档来生成*目录。*`[TOC]`

* * *

## 回答 #18

> 赞同：5
> 
> 时间：2015-06-05T04:31:03.700

我编写了一个解析markdown文件并将目录输出为markdown列表的python脚本：[md-to-toc](https://github.com/amaiorano/md-to-toc)

与我发现的其他脚本不同，md-to-toc 正确支持重复标题。它也不需要互联网连接，因此它适用于任何 md 文件，而不仅仅是那些可从公共 repo 获得的文件。

* * *

## 回答 #19

> 赞同：5
> 
> 时间：2020-11-03T04:48:56.640

如果使用**Sublime Text 编辑器**，**MarkdownTOC 插件**效果很好！看：

1.  [https://packagecontrol.io/packages/MarkdownTOC](https://packagecontrol.io/packages/MarkdownTOC)
2.  [https://github.com/naokazuterada/MarkdownTOC](https://github.com/naokazuterada/MarkdownTOC)

安装后，转到 Preferences --> Package Settings --> MarkdownTOC --> Settings -- User，自定义您的设置。以下是您可以选择的选项：[https](https://github.com/naokazuterada/MarkdownTOC#configuration) ://github.com/naokazuterada/MarkdownTOC#configuration 。

我推荐以下内容：

```
{
  "defaults": {
    "autoanchor": true,
    "autolink": true,
    "bracket": "round",
    "levels": [1,2,3,4,5,6],
    "indent": "\t",
    "remove_image": true,
    "link_prefix": "",
    "bullets": ["-"],
    "lowercase": "only_ascii",
    "style": "ordered",
    "uri_encoding": true,
    "markdown_preview": ""
  },
  "id_replacements": [
    {
      "pattern": "\\s+",
      "replacement": "-"
    },
    {
      "pattern": "&lt;|&gt;|&amp;|&apos;|&quot;|&#60;|&#62;|&#38;|&#39;|&#34;|!|#|$|&|'|\\(|\\)|\\*|\\+|,|/|:|;|=|\\?|@|\\[|\\]|`|\"|\\.|\\\\|<|>|{|}|™|®|©|%",
      "replacement": ""
    }
  ],
  "logging": false
} 
```

要插入目录，只需单击文档顶部要插入目录的位置，然后转到工具 --> Markdown TOC --> 插入目录。

它将插入如下内容：

```
<!-- MarkdownTOC -->

1\. [Helpful Links:](#helpful-links)
1\. [Sublime Text Settings:](#sublime-text-settings)
1\. [Packages to install](#packages-to-install)

<!-- /MarkdownTOC --> 
```

请注意`<!-- -->`它为您插入的 HTML 注释。这些是特殊标记，可帮助程序了解 ToC 的位置，以便**在您每次保存时自动更新它！**所以，让这些完好无损。

要获得额外的花哨，请在其周围添加一些HTML 标记`<details>`，`<summary>`以使 ToC 可折叠/可扩展，如下所示：

```
<details>
<summary><b>Table of Contents</b> (click to open)</summary>
<!-- MarkdownTOC -->

1\. [Helpful Links:](#helpful-links)
1\. [Sublime Text Settings:](#sublime-text-settings)
1\. [Packages to install](#packages-to-install)

<!-- /MarkdownTOC -->
</details> 
```

现在，你得到了这个超酷的效果，如下图所示。在我的[主要 eRCaGuy_dotfiles 自述文件](https://github.com/ElectricRCAircraftGuy/eRCaGuy_dotfiles)中查看它，或者在我的[Sublime_Text_editor 自述文件](https://github.com/ElectricRCAircraftGuy/eRCaGuy_dotfiles/tree/master/Sublime_Text_editor)中查看它。

1.  折叠： [![在此处输入图像描述](../Images/4ce7022039eb9e9c9a89353670062cb2.png)](https://i.stack.imgur.com/CwTu3.png)
2.  扩展： [![在此处输入图像描述](../Images/64e6a47974ff734aa1b911fd139f893a.png)](https://i.stack.imgur.com/wNH0R.png)

有关其使用和限制的更多信息，请务必阅读我在[该自述文件中关于](https://github.com/ElectricRCAircraftGuy/eRCaGuy_dotfiles/tree/master/Sublime_Text_editor)**MarkdownTOC**插件的注释。

* * *

## 回答 #20

> 赞同：4
> 
> 时间：2014-11-12T05:39:04.430

我刚开始做同样的事情（在 Markdown 中做笔记）。我将 Sublime Text 2 与[MarkdownPreview 插件](https://github.com/revolunet/sublimetext-markdown-preview)一起使用。内置的 markdown 解析器支持`[TOC]`.

* * *

## 回答 #21

> 赞同：4
> 
> 时间：2019-12-05T18:09:41.450

**只需使用带有插件的文本编辑器即可。**

您的编辑器很可能有一个**包/插件**来为您处理这个问题。例如，在*Emacs*中，您可以安装[markdown-toc](https://github.com/ardumont/markdown-toc) TOC 生成器。然后在您编辑时，只需反复调用`M-x markdown-toc-generate-or-refresh-toc`. 如果您想经常这样做，那值得一键绑定。它擅长生成简单的 TOC，而不会用 HTML 锚污染您的文档。

其他编辑器也有类似的插件，所以流行的列表是这样的：

*   **Emacs**：[降价目录](https://github.com/ardumont/markdown-toc)
*   **Vim** :[降价目录](https://github.com/mzlogin/vim-markdown-toc)
*   **原子**：[markdown-toc](https://atom.io/packages/markdown-toc)
*   **VSCode**：[降价目录](https://marketplace.visualstudio.com/items?itemName=AlanWalk.markdown-toc)

* * *

## 回答 #22

> 赞同：4
> 
> 时间：2021-10-06T06:06:52.257

作为手工制作链接列表的替代方案，让我们概述**所有可用的开箱即用解决方案**以插入目录（请评论并扩展以保持最新）：

在**Gollum v5**中，markdown 支持这一点：

```
<!-- assure you have a blank line before -->
[[_TOC_]] 
```

这也适用于**Azure DevOps wiki**。

* * *

由于Gitlab[作为降价引擎从](https://gitlab.com/gitlab-org/gitlab-docs/-/merge_requests/108)**Redcarpet**切换到 Kramdown ，它们现在支持以下语法

```
- TOC
{:toc} 
```

见[https://about.gitlab.com/handbook/markdown-guide/#table-of-contents-toc](https://about.gitlab.com/handbook/markdown-guide/#table-of-contents-toc)

* * *

[**从 4.7开始的**MultiMarkdown****](http://fletcher.github.io/MultiMarkdown-5/table-of-contents.html)**具有以下宏：**

 **```
{{TOC}} 
```

* * *

*我知道，我对这个答案有点晚了。但是，我自己错过了这样的概述。我[对 Nicolas Thery](https://stackoverflow.com/review/suggested-edits/29908067)将其扩展到概述的回答的编辑被拒绝了。*

* * *

## 回答 #23

> 赞同：3
> 
> 时间：2019-04-11T14:21:06.650

如果您的 Markdown 文件要显示在 bitbucket.org 上的存储库中，您应该`[TOC]`在您想要目录的位置添加。然后它将自动生成。更多信息在这里：

[https://confluence.atlassian.com/bitbucket/add-a-table-of-contents-to-a-wiki-221451163.html](https://confluence.atlassian.com/bitbucket/add-a-table-of-contents-to-a-wiki-221451163.html)

* * *

## 回答 #24

> 赞同：2
> 
> 时间：2018-09-01T09:45:39.063

有一个名为[mdtoc.rb](https://github.com/alexharv074/markdown_toc)的 Ruby 脚本可以自动生成 GFM Markdown 目录，它与此处发布的其他一些脚本相似但略有不同。

给定一个输入 Markdown 文件，例如：

```
# Lorem Ipsum

Lorem ipsum dolor sit amet, mei alienum adipiscing te, has no possit delicata. Te nominavi suavitate sed, quis alia cum no, has an malis dictas explicari. At mel nonumes eloquentiam, eos ea dicat nullam. Sed eirmod gubergren scripserit ne, mei timeam nonumes te. Qui ut tale sonet consul, vix integre oportere an. Duis ullum at ius.

## Et cum

Et cum affert dolorem habemus. Sale malis at mel. Te pri copiosae hendrerit. Cu nec agam iracundia necessitatibus, tibique corpora adipisci qui cu. Et vix causae consetetur deterruisset, ius ea inermis quaerendum.

### His ut

His ut feugait consectetuer, id mollis nominati has, in usu insolens tractatos. Nemore viderer torquatos qui ei, corpora adipiscing ex nec. Debet vivendum ne nec, ipsum zril choro ex sed. Doming probatus euripidis vim cu, habeo apeirian et nec. Ludus pertinacia an pro, in accusam menandri reformidans nam, sed in tantas semper impedit.

### Doctus voluptua

Doctus voluptua his eu, cu ius mazim invidunt incorrupte. Ad maiorum sensibus mea. Eius posse sonet no vim, te paulo postulant salutatus ius, augue persequeris eum cu. Pro omnesque salutandi evertitur ea, an mea fugit gloriatur. Pro ne menandri intellegam, in vis clita recusabo sensibus. Usu atqui scaevola an.

## Id scripta

Id scripta alterum pri, nam audiam labitur reprehendunt at. No alia putent est. Eos diam bonorum oportere ad. Sit ad admodum constituto, vide democritum id eum. Ex singulis laboramus vis, ius no minim libris deleniti, euismod sadipscing vix id. 
```

它生成这个目录：

```
$ mdtoc.rb FILE.md 
#### Table of contents

1\. [Et cum](#et-cum)
    * [His ut](#his-ut)
    * [Doctus voluptua](#doctus-voluptua)
2\. [Id scripta](#id-scripta) 
```

另请参阅我关于此主题的博客[文章。](https://alexharv074.github.io/2018/08/28/auto-generating-markdown-tables-of-contents.html)

* * *

## 回答 #25

> 赞同：2
> 
> 时间：2016-02-13T12:37:55.120

基于 albertodebortoli 答案创建了具有附加检查和替换标点符号的功能。

```
# @fn       def generate_table_of_contents markdown # {{{
# @brief    Generates table of contents for given markdown text
#
# @param    [String]  markdown Markdown string e.g. File.read('README.md')
#
# @return   [String]  Table of content in markdown format.
#
def generate_table_of_contents markdown
  table_of_contents = ""
  i_section = 0
  # to track markdown code sections, because e.g. ruby comments also start with #
  inside_code_section = false
  markdown.each_line do |line|
    inside_code_section = !inside_code_section if line.start_with?('```')

    forbidden_words = ['Table of contents', 'define', 'pragma']
    next if !line.start_with?('#') || inside_code_section || forbidden_words.any? { |w| line =~ /#{w}/ }

    title = line.gsub("#", "").strip
    href = title.gsub(/(^[!.?:\(\)]+|[!.?:\(\)]+$)/, '').gsub(/[!.,?:; \(\)-]+/, "-").downcase

    bullet = line.count("#") > 1 ? " *" : "#{i_section += 1}."
    table_of_contents << "  " * (line.count("#") - 1) + "#{bullet} [#{title}](\##{href})\n"
  end
  table_of_contents
end 
```

* * *

## 回答 #26

> 赞同：2
> 
> 时间：2016-10-26T07:39:37.490

我不确定，markdown 的官方文档是什么。交叉引用可以只写在括号中`[Heading]`，也可以用空括号写`[Heading][]`。

两者都使用[pandoc](http://pandoc.org/)工作。所以我创建了一个快速的 bash 脚本，它将`$__TOC__`在 md 文件中替换为它的 TOC。（您将需要 envsubst，这可能不是您的发行版的一部分）

```
#!/bin/bash
filename=$1
__TOC__=$(grep "^##" $filename | sed -e 's/ /1\. /;s/^##//;s/#/   /g;s/\. \(.*\)$/. [\1][]/')
export __TOC__
envsubst '$__TOC__' < $filename 
```

* * *

## 回答 #27

> 赞同：2
> 
> 时间：2021-02-12T15:09:02.753

这是一个用于生成目录的简单 bash 脚本。不需要特殊的依赖，但是`bash`.

[https://github.com/Lirt/markdown-toc-bash](https://github.com/Lirt/markdown-toc-bash)

它可以很好地处理标题中的特殊符号、标题中的降价链接并忽略代码块。

* * *

## 回答 #28

> 赞同：2
> 
> 时间：2019-01-28T03:02:38.593

对我来说，@Tum 提出的解决方案就像一个有 2 个级别的目录的魅力。但是，对于第 3 级，它不起作用。它没有像前 2 个级别那样显示链接，而是显示纯文本`3.5.1\. [bla bla bla](#blablabla) <br>`。

我的解决方案是对@Tum 解决方案（非常简单）的补充，适用于需要 3 级或更多级目录的人。

在第二层，一个简单的制表符将为您正确缩进。但它不支持 2 个选项卡。相反，您必须使用一个选项卡并`&nbsp;`自己添加任意数量的选项卡，以便正确对齐第 3 级。

这是一个使用 4 个级别的示例（级别越高，越糟糕）：

```
# Table of Contents
1\. [Title](#title) <br>
    1.1\. [sub-title](#sub_title) <br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1.1.1\. [sub-sub-title](#sub_sub_title)
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1.1.1.1\. [sub-sub-sub-title](#sub_sub_sub_title)

# Title <a name="title"></a>
Heading 1

## Sub-Title <a name="sub_title"></a>
Heading 2

### Sub-Sub-Title <a name="sub_sub_title"></a>
Heading 3

#### Sub-Sub-Sub-Title <a name="sub_sub_sub_title"></a>
Heading 4 
```

这给出了以下结果，其中目录的每个元素都是指向其相应部分的链接。还要注意`<br>`为了添加新行而不是在同一行上。

# 目录

1.  标题
    1.1。小标题
           1.1.1。子标题
                     1.1.1.1。子子子标题

# 标题

标题 1

## 字幕

标题 2

### 子子标题

标题 3

子子子标题

标题 4

* * *

## 回答 #29

> 赞同：2
> 
> 时间：2016-11-16T01:05:20.733

[MultiMarkdown 4.7](http://fletcher.github.io/MultiMarkdown-5/table-of-contents.html)有一个插入目录的 {{TOC}} 宏。

* * *

## 回答 #30

> 赞同：1
> 
> 时间：2014-09-23T13:59:29.947

根据您的工作流程，您可能需要查看[捷联](http://ndossougbe.github.io/strapdown/)

[这是原始版本 ( http://strapdownjs.com](http://strapdownjs.com) )的一个分支，它添加了目录的生成。

如果您不想在 html 文件中编写，repo 上有一个 apache 配置文件（可能尚未正确更新）以即时包装纯 markdown。

* * *

## 回答 #31

> 赞同：1
> 
> 时间：2019-01-24T19:05:08.300

我使用了[https://github.com/ekalinin/github-markdown-toc](https://github.com/ekalinin/github-markdown-toc)，它提供了一个命令行实用程序，可以从 Markdown 文档自动生成目录。

没有插件、宏或其他依赖项。安装实用程序后，只需将实用程序的输出粘贴到文档中您想要目录的位置。使用非常简单。

```
$ cat README.md | ./gh-md-toc - 
```

* * *

## 回答 #32

> 赞同：1
> 
> 时间：2020-07-04T13:22:45.180

您可以使用[DocToc 从命令行](https://github.com/ge11232002/doctoc)生成目录：

```
doctoc /path/to/file 
```

要使链接与 Bitbucket 生成的锚点兼容，请使用`--bitbucket`参数运行它。

* * *

## 回答 #33

> 赞同：1
> 
> 时间：2018-08-29T19:24:17.943

使用[toc.py](https://gist.github.com/live-wire/fdcd9adaf4738fcabb0af47a28b7b279)，它是一个很小的 ​​python 脚本，它为你的 markdown 生成一个目录。

用法：

*   在您的 Markdown 文件中添加`<toc>`您希望放置目录的位置。
*   `$python toc.py README.md`（使用您的降价文件名而不是*README.md*）

干杯!

* * *

## 回答 #34

> 赞同：1
> 
> 时间：2017-02-06T09:53:05.503

如果您碰巧使用**Eclipse**，您可以使用`Ctrl`+ `O`（大纲）快捷方式，这将显示等效的目录并允许在部分标题中搜索（自动完成）。

您也可以打开大纲视图（窗口 -> 显示视图 -> 大纲），但它没有自动完成搜索。

* * *

## 回答 #35

> 赞同：0
> 
> 时间：2021-03-19T14:05:24.660

我正在使用这个网站[Markdown-TOC Creator](https://ecotrust-canada.github.io/markdown-toc/)，其中有些人可以粘贴他的整个 Markdown 条目，并且该网站会自动创建所有必需的标签和 TOC（目录），因此有些人可以轻松地将其复制粘贴到他自己的文档中。

* * *

## 回答 #36

> 赞同：0
> 
> 时间：2017-12-15T19:27:07.367

您可以在第一行然后在底部使用 [TOC]，您唯一需要做的就是确保标题使用相同的更大字体。目录会自动出现。（但这只出现在一些markdown编辑器中，我没有全部尝试）

* * *

## 回答 #37

> 赞同：0
> 
> 时间：2019-09-11T14:24:06.320

这是我用来生成目录的简短**PHP代码，并使用锚来丰富任何标题：**

```
$toc = []; //initialize the toc to an empty array
$markdown = "... your mardown content here...";

$markdown = preg_replace_callback("/(#+)\s*([^\n]+)/",function($matches) use (&$toc){
    static $section = [];
    $h = strlen($matches[1]);

    @$section[$h-1]++;
    $i = $h;
    while(isset($section[$i])) unset($section[$i++]);

    $anchor = preg_replace('/\s+/','-', strtolower(trim($matches[2])));

    $toc[] = str_repeat('  ',$h-1)."* [".implode('.',$section).". {$matches[2]}](#$anchor)";
    return str_repeat('#',$h)." <strong>".implode('.',$section).".</strong> ".$matches[2]."\n<a name=\"$anchor\"></a>\n";
}, $markdown); 
```

然后您可以打印处理后的降价和目录：

```
 print(implode("\n",$toc));
   print("\n\n");
   print($markdown); 
```

* * *

## 回答 #38

> 赞同：0
> 
> 时间：2021-11-04T06:56:40.750

如果您使用的是[折扣](http://www.pell.portland.or.us/%7Eorc/Code/discount/)降价，请启用一个标志`-ftoc`以自动生成并用于`-T`添加目录，例如：

```
markdown -T -ftoc <<EOT
#heading 1

content 1

##heading 2

content 2
EOT 
```

会产生

```
<ul>
 <li><a href="#heading-1">heading 1</a>
 <ul>
  <li><a href="#heading-2">heading 2</a></li>
 </ul>
 </li>
</ul>
<a name="heading-1"></a>
<h1>heading 1</h1>
... 
```

显然你也可以使用`markdown -toc`，这`man`没有提到，但`USAGE`信息确实（由非法选项触发，如`markdown -h`）。

* * *

我花了一段时间阅读源代码来弄清楚这一点，所以我主要是为了将来的我写下来。我在`discount`包中使用 Arch Linux 上的折扣降价。`man`并没有真正告诉你这是折扣，而是在下面提到了大卫帕森斯`AUTHOR`。

```
markdown --version
# markdown: discount 2.2.7 
```

* * *

## 回答 #39

> 赞同：0
> 
> 时间：2018-10-16T12:17:35.927

只需添加幻灯片的数量！它适用于降价 ioslides 和revealjs 演示文稿

```
## Table of Contents

 1\. [introduction](#3)
 2\. [section one](#5) 
```

* * *

## 回答 #40

> 赞同：0
> 
> 时间：2021-10-28T13:55:01.033

`nodejs`这是一个生成目录并考虑重复标题的小脚本：

```
const fs = require('fs')
const { mdToPdf } = require('md-to-pdf');

const stringtoreplace = '<toc/>'

const processTitleRepetitions = (contents, titleMap) => {
  for (const content of contents) {
    titleMap[content.link] = typeof titleMap[content.link] === 'undefined'
      ? 0
      : titleMap[content.link] + 1
    if (titleMap[content.link] > 0) {
      content.link = `${content.link}-${titleMap[content.link]}`
    }
  }
}

const convertContentToPdf = async (targetFile) => {
  const pdf = await mdToPdf({path: targetFile}).catch(console.error)
  if(pdf) {
    const pdfFile = `${targetFile.replace(/\.md/, '')}.pdf`
    fs.writeFileSync(pdfFile, pdf.content)
    return pdfFile
  }
  throw new Error("PDF generation failed.")
}

const generateTOC = (file, targetFile) => {
  // Extract headers
  const fileContent = fs.readFileSync(file, 'utf-8')
  const titleLine = /((?<=^)#+)\s(.+)/
  const contents = fileContent.split(/\r?\n/).
    map(line => line.match(titleLine)).
    filter(match => match).
    filter(match => match[1].length > 1).
    map(regExpMatchArray => {
      return {
        level: regExpMatchArray[1].length, text: regExpMatchArray[2],
        link: '#' + regExpMatchArray[2].replace(/(\s+|[.,\/#!$%^&*;:{}=\-_`~()]+)/g, '-').toLowerCase(),
      }
    })
  const titleMap = {}
  processTitleRepetitions(contents, titleMap)
  // Write content
  let toctext = '## Table of Contents\n'
  // Find the toplevel to adjust the level of the table of contents.
  const topLevel = contents.reduce((maxLevel, content) => Math.min(content['level'], maxLevel), 1000)
  levelCounter = {}
  contents.forEach(item => {
    let currentLevel = parseInt(item.level)
    levelCounter[currentLevel] = levelCounter[currentLevel] ? levelCounter[currentLevel] + 1 : 1
    Object.entries(levelCounter).forEach(e => {
      if(currentLevel < parseInt(e[0])) {
        levelCounter[e[0]] = 0
      }
    })
    const level = Array(currentLevel - topLevel).fill('\t').join('')
    const text = `${levelCounter[currentLevel]}. [${item['text']}](${item['link']}) \n`
    toctext += level + text
  })

  const updatedContent = fileContent.toString().replace(stringtoreplace, toctext)
  fs.writeFileSync(targetFile, updatedContent)
  convertContentToPdf(targetFile).then((pdfFile) => {
    console.info(`${pdfFile} has been generated.`)
  })
}

const args = process.argv.slice(2)

if(args.length < 2) {
  console.error("Please provide the name of the markdown file from which the headers should be extracted and the name of the file with the new table of contents")
  console.info("Example: node MD_TOC.js <source_md> <target_md>")
  process.exit(1)
}

const source_md = args[0]
const target_md = args[1]

generateTOC(source_md, target_md) 
```

要使用它，您需要注入`<toc/>`您的降价文件。

以下是如何使用它：

```
generateTOC('../README.md', '../README_toc.md') 
```

第一个参数是源 markdown 文件，第二个参数是带有 markdown 的文件。

* * *

## 回答 #41

> 赞同：-12
> 
> 时间：2013-06-19T18:31:55.457

嗯...使用 Markdown 的标题！？

那是：

# 这相当于<h1>

## 这相当于 <h2>

### 这相当于<h3>

许多编辑会向您展示目录。您还可以使用 grep 获取标题标签并创建自己的标签。

希望有帮助！

--JF**

# sql-server - SQL Server 中的多个连接表上没有重复行的 SELECT 语句

> ID：11948246
> 
> 赞同：1
> 
> 时间：2012-08-14T08:10:30.567
> 
> 标签：sql-server, sql-server-2008, group-by

我有 3 个表连接在一起，我想在 B.val3 上选择不同的行。我用这样的东西：

```
SELECT A.val1,A.val2, B.val1, B.val2, B.val3, C.val1, C.val2
FROM A INNER JOIN
B ON A.val1 = B.val1 INNER JOIN
C ON A.val1 = C.val1 
```

这个语句现在给我 24 行重复的 B.val3，当我使用时`SELECT DISTINCT A.val1,A.val2, B.val1,...`，检索所有 24 条记录，但我只想要检索的 B.val3 上的不同行（8 行）

当我使用类似的东西时：

```
SELECT DISTINCT A.val1,A.val2, B.val1,
...
C ON A.val1 = C.val1 GROUP BY B.val3 
```

我收到一个错误：

```
Msg 8120, Level 16, State 1, Line 13
Column 'A.val1' is invalid in the select list because it is not contained in either an aggregate function or the GROUP BY clause. 
```

**编辑：结构和数据**

表A如下：val2是B的外键，val3是C的外键

```
val1   val2    val3
-----  -----   -----
1       100     200
2       100     201
3       101     200
4       102     200
5       102     201 
```

表 B：

```
val1   val2    val3
-----  -----   -----
100     a2      aaa
101     b2      bbb
102     c2      ccc 
```

表 C：

```
val1   val2    
-----  -----   
200     a3      
201     b3 
```

我想得到类似的东西：

```
A.val1  A.val2  A.val3  B.val1  B.val2  B.val3  C.val1  C.val2
-----   -----   -----   -----   -----   -----   -----   -----
1       100      200     100      a2     aaa      200    a3
3       101      200     101      b2     bbb      200    a3      
4       102      201     102      c2     ccc      201    b3 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-14T08:15:18.117

你可以尝试这样的事情：

```
 select * 
    from 
    (
    SELECT A.val1,A.val2, B.val1, B.val2, B.val3, C.val1, C.val2
            , row_number() over 
            (
                partition by b.val3 
                order by A.val1, A.val2, B.val1, B.val2, C.val1, C.val2
            ) r
    FROM A 
    INNER JOIN B ON A.val1 = B.val1 
    INNER JOIN C ON A.val1 = C.val1
    ) x
    where x.r = 1 
```

或者

```
 SELECT max(A.val1)
    ,max(A.val2)
    , max(B.val1)
    , max(B.val2)
    , B.val3
    , max(C.val1)
    , max(C.val2)
    FROM A 
    INNER JOIN B ON A.val1 = B.val1 
    INNER JOIN C ON A.val1 = C.val1
    group by b.val3 
```

取决于您要达到的目标。如果那些不做你所追求的，请你能提供更多关于你希望做什么/示例数据的信息吗？

您所拥有的问题是选择Distinct B.Val3时，可能有多个记录关联：

*   表 B 中 V3 列中的值是否唯一？
*   表 A 和/或 C 的 V1 列中的值是否唯一？

如果上述任何一个问题的答案是否定的，您需要为 SQL 提供一种方法来决定在选择要为其他列显示哪些数据时选择多个可能的记录/结果中的哪一个。

* * *

**编辑**

根据上面给出的示例数据，请找到一个脚本来复制示例信息并显示解决方案：

```
if object_id('a') is not null drop table a
if object_id('b') is not null drop table b
if object_id('c') is not null drop table c
go
create table b 
(
    val1 int not null identity(100,1) primary key clustered
    , val2 nvarchar(2) not null
    , val3 nvarchar(3) not null
)
go
create table c
(
    val1 int not null identity(200,1) primary key clustered
    , val2 nvarchar(2) not null
)
go
create table a
(
    val1 int not null identity(1,1) primary key clustered
    , val2 int not null constraint fk_a_b foreign key references b(val1)
    , val3 int not null constraint fk_a_c foreign key references c(val1)
)
go

--ids 100 - 105
insert b
select 'a2', 'aaa'
union all select 'b2', 'bbb'
union all select 'c2', 'ccc'
union all select 'c3', 'ccc' --val3 is not unique
union all select 'c4', 'ccc' --
union all select 'b3', 'bbb' --

--ids 200 - 204
insert c
select 'a3'
union all select 'b3'
union all select 'c3'
union all select 'd3'
union all select 'e3'

insert a
select 100, 200
union all select 100, 200
union all select 100, 201
union all select 101, 200
union all select 102, 200
union all select 102, 201
union all select 103, 201
union all select 104, 201
union all select 105, 201
union all select 105, 202
union all select 105, 203
union all select 105, 204

--what does the full result set look like?
SELECT  A.val1 aval1
,       A.val2 aval2
,       B.val1 bval1
,       B.val2 bval2
,       B.val3 bval3
,       C.val1 cval1
,       C.val2 cval2  
FROM A 
INNER JOIN B 
    ON A.val2 = B.val1 
INNER JOIN C 
    ON A.val3 = C.val1 

--now show unique B's
select Aval1, Aval2, Bval1, Bval2, Bval3, Cval1, Cval2     
from      
(     
    SELECT  A.val1 aval1
    ,       A.val2 aval2
    ,       B.val1 bval1
    ,       B.val2 bval2
    ,       B.val3 bval3
    ,       C.val1 cval1
    ,       C.val2 cval2       
    , row_number() over              
    (                 
        partition by b.val3                  
        order by b.val1, c.val1 --try playing with this to see how the results change / see what fits your requirements           
    ) r     
    FROM A 
    INNER JOIN B 
        ON A.val2 = B.val1 
    INNER JOIN C 
        ON A.val3 = C.val1    
) x     
where x.r = 1 

--what wasn't included in the unique B result set, but was in the full set?
select Aval1, Aval2, Bval1, Bval2, Bval3, Cval1, Cval2     
from      
(     
    SELECT  A.val1 aval1
    ,       A.val2 aval2
    ,       B.val1 bval1
    ,       B.val2 bval2
    ,       B.val3 bval3
    ,       C.val1 cval1
    ,       C.val2 cval2       
    , row_number() over              
    (                 
        partition by b.val3                  
        order by b.val1, c.val1 --try playing with this to see how the results change / see what fits your requirements           
    ) r     
    FROM A 
    INNER JOIN B 
        ON A.val2 = B.val1 
    INNER JOIN C 
        ON A.val3 = C.val1    
) x     
where x.r > 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T13:20:56.067

看起来您正在从 B 中获取行，A 中的第一个匹配项，然后 C 中的任何匹配项。

你可以这样做：

```
select *
from B join
     (select A.*, row_number() over (partition by A.val2 order by A.val1) as seqnum
      from A
     ) A
     on B.val1 = A.val2 and
        A.seqnum = 1 join
     C
     on A.val3 = C.val1 
```

# xcode - 避免向右滑动和向左滑动进入推式 Segue

> ID：11948248
> 
> 赞同：-1
> 
> 时间：2012-08-14T08:10:31.543
> 
> 标签：xcode, ipad, master-detail

我有一个适用于 iPad 的标准 MasterDetailApplication。从 DetailViewcontroller（如果 iPad 处于纵向模式）将推送 Segue“图像视图”。“图像视图”的大小为：iPad 全屏。通过向右或向左滑动，MasterView 将出现在“Image View”的左侧。我怎样才能避免这种情况？

如果 iPad 处于横向模式，Allpication 将返回主从视图。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T13:14:21.807

在 UISplitViewController 中有一个属性来指定是否可以通过滑动手势显示和关闭隐藏的视图。

属性名称是presentsWithGesture

```
 self.splitViewController.presentsWithGesture=NO; 
```

设置此属性 NO 将禁用手势识别器

# java - 嵌入浏览器（safari、firefox、chrome）+ 在 Java 中访问 DOM

> ID：11948254
> 
> 赞同：1
> 
> 时间：2012-08-14T08:10:49.143
> 
> 标签：java, webkit

有没有办法：

1.  在某种 Java 框架中嵌入浏览器视图（我在 Mac OSX 上）

2.  告诉浏览器渲染一个页面

3.  让 Java 可以访问 DOM（即删除节点、创建新节点、使用 CSS 样式创建新节点、更改节点的 innerHTML）...

谢谢！

我相信 WebKit 将是最简单的，但我并不依附于它。Chrome的核心渲染引擎Safari，Firefox就可以了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T08:32:29.817

看看这个：[http](http://www.teamdev.com/jxbrowser/) ://www.teamdev.com/jxbrowser/，或者通过[Qt Jambi](http://qt-jambi.org/)尝试[Qt WebKit](https://doc.qt.io/qt-4.8/qtwebkit-guide.html)。

更新：这看起来也很好：http: [//sourceforge.net/projects/mozswing/](http://sourceforge.net/projects/mozswing/)

# php - 贝宝表格非加密

> ID：11948257
> 
> 赞同：1
> 
> 时间：2012-08-14T08:11:00.277
> 
> 标签：php, html, encryption, paypal, shop

我记得当我之前在 Paypal 中创建一个按钮时，它给了我一个标准格式的 HTML 表单，但现在一切都被加密了。有没有办法获得未加密的格式？

因为我需要通过 jQuery 手动更改价格金额。同时，在网站上这样做安全吗？谢谢

加密版本是这样的：

![在此处输入图像描述](../Images/71b6a3f95d45f53d188826358f8be3e8.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T18:35:22.830

实际上最简单的方法是点击按钮创建器上的第 2 部分。在顶部，它写着类似于“将此按钮保存在贝宝”的内容。取消选中，然后当您到达显示您的代码的页面时，按“删除代码保护”。就那么简单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T08:16:41.737

旧的表单 API 仍受 PayPal 支持，但当您想设置新的付款按钮时，他们不提供它作为选项。如果您已经有一个旧表格，您可以仔细调整它以适应您的新场景。

PayPal 将人们推离表单的原因是因为用户可以轻松地编辑价格，就像您使用 JavaScript 或使用当今可用的众多浏览器调试工具之一一样。这意味着某人很容易将价格编辑为较低的金额，或在提交之前调整表单中的其他字段之一。

如果您希望能够收取不同的金额，您可能需要查看 PayPal API，它可以让您在服务器端进行设置，没有简单的 HTML 编辑的危险。

# java - 从一个 JTable 中清除数据也会删除另一个 JTable

> ID：11948258
> 
> 赞同：2
> 
> 时间：2012-08-14T08:11:04.540
> 
> 标签：java, swing, jtable, tablemodel

我正在使用 Swing 在 Java 中做一个应用程序。我有两个表，我必须将内容从一个表复制到另一个（复制）。问题是如果我清除目标表行，那么我的源表行也会被删除。

如果我按 CopyAll，那么我会将所有内容从 复制`Table-A`到`Table-B`. 如果我按清除，那么我必须清除`Table-B`。但问题`Table-A`也正在得到解决。

**用于复印**

```
public void copyAll() {
   TableModel tableAModel = tableA.getModel();
   tableB.setModel(tableAModel);
   repaint();
} 
```

**用于清除行（我正在为`table-B`）**

```
public void clearTableB() {
   DefaultTableModel clearTableData = (DefaultTableModel) tableB.getModel();
   clearTableData.setNumRows(0);
} 
```

我认为在 copyAll() 方法中复制时遇到了问题。我正在获取`tableA`模型，然后在`clearTable()`方法中清除它。

如果上述`copyAll()`方法是错误的，请告诉我我该如何实现`copyAll()`，`removeTableB()`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T08:12:55.863

您已经复制了`TableModel`两个表之间的值。这意味着两个表共享相同的数据。如果删除 的内容`TableModel`，两个表都会丢失它们的数据。

您应该创建两个单独`TableModel`的实例，并使它们保持同步（例如，`TableModel`每次更新模型时使用侦听器作为触发事件）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-14T08:53:43.713

在您的副本版本中，您将第一个表的模型设置为第二个表。所以这两个表共享相同的模型。您应该复制模型：

```
public void copyAll() {
    final TableModel tableAModel = tableA.getModel();
    final DefaultTableModel copy = new DefaultTableModel(tableAModel.getRowCount(), 0);
    for (int column = 0; column < tableAModel.getColumnCount(); column++) {
        copy.addColumn(tableAModel.getColumnName(column));
        for (int row = 0; row < tableAModel.getRowCount(); row++)
            copy.setValueAt(tableAModel.getValueAt(row, column), row, column);
    }
    tableB.setModel(copy);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-14T08:13:46.907

两个表都使用相同的模型。你必须给表 B 它自己的模型，手动复制值。您当前`copyAll`的方法复制对表模型的*引用*，它不复制*内容*。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-14T08:50:10.230

如果您正在使用`DefaultTableModel`您可以使用它从模型中获取`Vector`数据。`getDataVector()``clone()`

```
public void copyAll() {
   TableModel tableAModel = tableA.getModel(), tableModelB;
   Vector tableModelBDataVector = ((DefaultTableModel)tableAModel).getDataVector();
   int tableModelAColumnCount = tableAModel.getColumnCount();
   Vector<String> tableModelAColumnVector = new Vector<String>(tableModelAColumnCount);
   for (int i = 0; i < tableModelAColumnCount; i++)
     tableModelAColumnVector.add(tableAModel.getColumnName(i));
   tableModelB = new DefaultTableModel((Vector)tableModelBDataVector.clone(), (Vector)tableModelAColumnVector.clone());
   tableB.setModel(tableModelB);
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-14T08:12:58.033

那是因为您共享了两个表的 TableModel。在复制方法中，您应该创建模型的克隆并将该克隆用于第二个表。

# coronasdk - newTextField 在组中重叠 newRect

> ID：11948259
> 
> 赞同：1
> 
> 时间：2012-08-14T08:11:09.080
> 
> 标签：coronasdk

我对 Corona SDK 有疑问。我希望我的 newRect 与 newTextField 控件重叠。我的代码：

```
local localGroup = display.newGroup()

local txtOne = display.newTextField( display.contentWidth/2 - 140, 260, 280, 60)
 local txtTwo= display.newTextField( display.contentWidth/2 - 140, 360, 280, 60)
 local rect= display.newRect( display.contentWidth/2 - 140, 160, 200, 360)

localGroup:insert(txtOne)
 localGroup:insert(txtTwo)
 localGroup:insert(rect) 
```

结果我有： txtOne 和 txtTwo 总是与我的 rect 对象重叠。但我希望 rect 对象位于 txtOne 和 txtTwo 之上。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T00:15:20.510

根据[文档](http://docs.coronalabs.com/api/library/native/newTextField.html#TOC)

> 因为本机文本字段不是 OpenGL 画布的一部分，所以它们不服从 Corona 显示对象层次结构。它们总是出现在正常显示对象的上方，并且不能插入到显示组中。

所以你不能把 rect 对象放在前面。

如果你愿意，你可以解决它。只需在不需要时隐藏文本字段

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-14T10:07:48.293

阅读[此](http://developer.coronalabs.com/reference/index/objecttofront)链接。

试试： rect:toFront()

阅读[此](http://developer.coronalabs.com/node/2600)链接以创建文本字段。

# jms - 调度 MDB

> ID：11948265
> 
> 赞同：0
> 
> 时间：2012-08-14T08:11:27.817
> 
> 标签：jms, scheduler, jboss-mdb

我正在寻找一种安排 MDB 的方法。我的要求是 MDB 设置为从公司提供系统。该系统每晚都会进行维护，但其他系统对此一无所知，可能会继续尝试为其提供服务。持久队列非常棒，因为它可以让我的消息被丢弃，直到系统重新上线。

我怎么能做到这一点？我已经遇到过这个问题：[安排消息驱动的 bean 在特定时间访问队列？](https://stackoverflow.com/questions/10413467/schedule-a-message-driven-bean-to-access-a-queue-during-certain-times)但它使用 java 7，最糟糕的是，如果服务器重新启动，消息会丢失（消息从 JMS 队列中取出并保存在内存中，直到计时器处理它）。

另一个用途是实现“重试”队列。如果出现错误，我想重试处理我的消息，但不是立即，仅在一定时间后。

有什么想法可以让我的 MDB 离线一段时间吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T20:00:27.847

大多数 JBoss 版本都发布了一个[管理 MBean](http://jbossas4.sourcearchive.com/documentation/4.2.3.GA/classorg_1_1jboss_1_1ejb3_1_1mdb_1_1MdbDelegateWrapper.html)，允许您停止在 MDB 上的交付。但是，如果您使用 EJB3，它们会自动启动，因此如果在 MDB 的停电期间启动，您将需要注册一个启动类以在启动时停止启动 MDB。一旦过了这个问题，您就可以安排一个简单的[石英作业](http://docs.jboss.org/ejb3/docs/tutorial/1.0.7/html/Quartz_scheduler_integration.html)来根据您的交付窗口启动和停止 MDB。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T07:43:07.163

好吧，看起来没有办法以通用方式暂停 MDB。就像大多数人会回答的那样，最好的解决方案是使用**DLQ**（或**DMQ**）。

现在，如果我想在消息上引入计时器，我将生产者的生存时间设置为我希望消息等待的时间。然后我将它发送到一个普通队列，比如说*没有*消费者的等待队列。过期后，消息将发送到默认目标（对于 Glassfish MQ， **mq.sys.dmq**，请确保创建一个 jms 资源，并将*mq.sys.dmq*作为*imqDestinationName*）。我有一个 MDB 监听错误队列并负责再次发送消息。现在，如果我想“关闭”一个队列一段时间，当消息到达队列时，我会检查当前时间是否允许。只需将生存时间设置为下一个开放时间之前的时间量并将其发送到 waitingQueue。

我从一开始就没有使用它的原因是我陷入了一些陷阱。以下是在使用带有 Glassfish 3.1.1 及其嵌入式 MQ 的 DMQ 时需要设置的一些有用属性。

**imq.message.expiration.interval=1**用于在向 DMQ 发送超时消息之前每个队列的轮询间隔。默认值为 60 秒。如果您像我一样想以很少的延迟测试您的应用程序，那么这就是您所需要的。

# php - socket_accept 似乎挂在第一个连接上

> ID：11948268
> 
> 赞同：2
> 
> 时间：2012-08-14T08:11:42.600
> 
> 标签：php, sockets

我正在尝试在端口 8195 上创建一个简单的侦听器。当我在 PHP CLI 条件下尝试以下代码块时，它只显示一次“测试”，然后挂起。如果我删除文件“votifier.run”，该文件设计为开/关开关，它仍然会继续挂起。它从不显示“客户端已连接”。

此外，如果我在脚本运行时尝试通过端口 8195 上的 Telnet 连接到主机，我只会收到一条连接失败消息。就像它正在寻找一种联系，只是不放弃。

```
// Set the IP and port to listen to
$address = 'localhost';
$port = 8195;

// Create a TCP Stream socket
$sock = socket_create(AF_INET, SOCK_STREAM, 0);
// Bind the socket to an address/port
socket_bind($sock, $address, $port);
// Start listening for connections
socket_listen($sock);

// Loop continuously
while ( file_exists('votifier.run') ) {
    echo 'Test';
    $client = socket_accept($sock);
    if( $client ) {
            echo 'Client connected';
            // Don't hang on slow connections
            socket_set_timeout($client, 5);

            // Send them our version
            socket_write("VOTIFIER MCWEBLINK\n");

            // Read the 256 byte block
            $block = socket_read($client, 256);
            ... 
```

**答案：** socket_accept() 通常会挂起，直到建立连接。如果进行了连接尝试，脚本将继续，但因为套接字是在 localhost 上创建的，所以它只接受*来自*localhost 的连接。

解决方法是使用您的外部 IP 而不是“localhost”或“127.0.0.1”。然后你可以 Telnet 到它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T08:16:57.363

我只是在这里猜测，但是您尝试绑定的地址可能不是主机名吗？

> 如果套接字属于 AF_INET 系列，则地址是采用点分四进制表示法的 IP（例如 127.0.0.1）。

**编辑**

好的，我已使用您的脚本并尝试重现您的错误，但无法重现。它有几个缺陷，但没有一个会导致 telnet 客户端的连接尝试失败。

由于上述都不适用，让我们一一检查清单：

*   加载/编译的套接字模块
*   localhost 确实解析为 127.0.0.1
*   该端口未被任何其他正在运行的应用程序占用
*   没有任何类型的防火墙规则会阻止 telnet 客户端和您的服务器之间的通信
*   允许您连接的机器连接到服务器主机（如果不是，请尝试同一主机）
*   在while循环中检查的文件确实存在
*   您确定脚本中没有另一个致命错误会阻止您发布的代码段运行

这些都是我能想到的所有可能的错误来源，atm。首先尝试修复小缺陷，然后检查清单。

```
if( $client ) {
    echo 'Client connected';
    // Don't hang on slow connections
    socket_set_option(
        $client,
        SOL_SOCKET,
        SO_RCVTIMEO | SO_SNDTIMEO,
        array('sec' => 5, 'usec' => 0)
    );

    // Send them our version
    socket_write($client, "VOTIFIER MCWEBLINK\n");
                 ^^^^^^^

    // Read the 256 byte block
    $block = socket_read($client, 256); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T10:33:51.933

你应该使用线程。如果客户端从不发送任何内容，您的代码将在 read() 方法中阻塞。每个接受的套接字都应该在一个新线程中完全处理。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-02T16:38:49.017

您可能想检查一下： [Minecraft Topsites 的 PHP Votifier 示例](http://topg.org/php_votifier)

它解释了代码是如何工作的，它是进行加密、填充 256 个空格并发送数据包的基本功能。您可以使用它进行一些工作，因为您可能想要改进它。

您可以在此处查看该插件的运行 php 的现场演示：http: [//topg.org/test_votifier](http://topg.org/test_votifier)

# jquery - 对数据表中的两个列标题进行排序

> ID：11948270
> 
> 赞同：1
> 
> 时间：2012-08-14T08:11:52.477
> 
> 标签：jquery, twitter-bootstrap, jquery-datatables

这是我的 HTML 表格结构。![在此处输入图像描述](../Images/d0d376aa922f7630ffcce56d1ec04f9b.png)

我正在使用带有 Twitter Bootstrap 的数据表对表进行排序。我需要对该列中的 User#、Ticket 字段应用排序。也适用于全名、名字和姓氏字段。全名字段将基于名字和姓氏。怎样才能做到这一点？我为此添加了[jsfiddle](http://jsfiddle.net/rajeswarik/XdzeF/10/)。

```
$(document).ready(function() {
    $('table#student').dataTable({
        "bPaginate": false,
        "aoColumnDefs": [
      { "bSortable": false, "aTargets": [ 0, 6 ] }
    ] });
}); 
```

# javascript - 信息寡妇在折线上有不同的信息谷歌地图api v3

> ID：11948273
> 
> 赞同：0
> 
> 时间：2012-08-14T08:12:07.193
> 
> 标签：javascript, google-maps-api-3, infowindow, polyline

我需要在一个信息窗口上显示不同的数据，当有人点击一个可用的折线时，弹出一个信息窗口，

我已经为此研究了许多解决方案，这是我遇到的一个例子，

[Google Maps API - 数组和 InfoWindows 的问题](https://stackoverflow.com/questions/6784426/google-maps-api-trouble-with-arrays-and-infowindows)

但是这个解决方案似乎对我不起作用，当我单击折线时它不显示信息窗口。请帮助我...我使用了不同的代码，它只显示数组的最后一个元素..我所做的是我通过 for 循环添加折线。请帮我解决这个问题..这是我的代码，

```
 var map;
    var polylinesIn = [];
    var infowindow = new google.maps.InfoWindow();
    var infowindowArray = [];
    function initialize() {

        var styles = [{ featureType: "landscape", stylers: [{ color: "#000514"}] }, { featureType: "administrative.country", stylers: [{ weight: 0.1 }, { color: "#009acd"}] }, { featureType: "water", stylers: [{ color: "#1f4fa5dc"}] }, { featureType: "road", stylers: [{ color: "#000514"}] }, { featureType: "administrative.locality", stylers: [{ color: "#7cfc00" }, { visibility: "off"}] }, { featureType: "landscape.man_made", stylers: [{ visibility: "off"}] }, { featureType: "poi", stylers: [{ visibility: "off"}] }, { featureType: "administrative.province", stylers: [{ visibility: "on"}]}];

        var mapOptions = {
            center: new google.maps.LatLng(7.3, 80.6333),
            zoom: 3,
            mapTypeId: google.maps.MapTypeId.ROADMAP
        };

        var map = new google.maps.Map(document.getElementById("map_canvas"),
        mapOptions);

        map.setOptions({ styles: styles });

        var lineSymbolIn = {
            path: google.maps.SymbolPath.CIRCLE,
            scale: 2,
            strokeColor: '#FF8000'
        };

        for (var i = 0; i < 5; i = i + 1) {

            var conentVal = i.toString();
            //var infowindow = new google.maps.InfoWindow();
            var netTrafficIn = [
            new google.maps.LatLng(53.3333866 + i, -6.247401 + i),
            new google.maps.LatLng(7.3, 80.6333)];

            var polylineIn = new google.maps.Polyline({
                path: netTrafficIn,
                icons: [{ icon: lineSymbolIn, offset: '100%'}],
                strokeColor: "  #FF8000",
                strokeOpacity: 1.0,
                strokeWeight: 1,
                geodesic: true

            });
            polylineIn.setMap(map);
            polylinesIn[i]=polylineIn;
            animateCircleIn(i);

            addInfowindow(i.toString());
            createInfoWindow(i);                                         
        }

    }

    function addInfowindow(contentVal) {
        infowindow = new google.maps.InfoWindow({ content: contentVal });
        infowindowArray.push(infowindow);
    }

    function createInfoWindow(id) {
        google.maps.event.addListener(polylinesIn[id], 'click', (function (id) {
            return function () {
                infowindowArray[id].open(map, polylinesIn[id]);
            }
        })(id));

    }

    function animateCircleIn(id) {
        var count = 0;
        offsetId = window.setInterval(function () {
            count = (count + 1) % 200;

            var icons = polylinesIn[id].get('icons');
            icons[0].offset = (count / 2) + '%';
            polylinesIn[id].set('icons', icons);
        }, 20);

    } 
```

非常感谢 ：）

好吧，我做了一些更改，就像 yal 建议的那样，但仍然没有出现 infowindows..请帮助..非常感谢 :)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T08:45:30.703

您链接到的另一个问题描述了您的问题。您必须使用您迭代的变量的副本，以便它不会更改其值。我在您之前的问题中向您展示过：[在多个测地线折线上设置动画符号](https://stackoverflow.com/questions/11931415/animate-symbol-on-multiple-geodesic-polylines)

您可以将事件附加到已经执行此操作的函数 animateCircle ：

```
function animateCircleIn(id) {
    var count = 0;
    offsetId = window.setInterval(function () {
        count = (count + 1) % 200;

        var icons = polylinesIn[id].get('icons');
        icons[0].offset = (count / 2) + '%';
        polylinesIn[id].set('icons', icons);
    }, 20);

        google.maps.event.addListener(polylinesIn[id], 'click', function (event) {
            infowindow.content = "x" + id.toString();
            infowindow.position = event.latLng;
            infowindow.open(map); //,flightPath);
        });
} 
```

但这里真正的问题是，您没有从上一个问题或您在问题中链接的问题中学到任何东西。您应该阅读“javascript 闭包”。我真的希望这是你最后一次问这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T08:36:50.520

以下代码有效：

```
 (function (id) {
                google.maps.event.addListener(polylinesIn[id], 'click', function (event) {
                    infowindow.content = "x" + id.toString();
                    infowindow.position = event.latLng;
                    infowindow.open(map); //,flightPath);
                });
            })(i) 
```

我在 for 循环中添加了这个闭包，解决了这个问题。谢谢你给我指出正确的方向，伙计们.. :)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T16:26:58.243

问题是您对所有折线使用相同的 infoWindow。当您在这部分代码中更改 infowindow 的值时

```
google.maps.event.addListener(polylinesIn[id], 'click', function (event) {
            infowindow.content = "x" + id.toString();
            infowindow.position = event.latLng;
            infowindow.open(map); //,flightPath);
    }); 
```

您通过引用更改第一个的值，并且所有带有折线的信息窗口也会更改。您在函数中使用的信息窗口不是实例化的信息窗口的副本，而是引用。

在这种情况下，您可以尝试两种不同的方法。`infowindow = new google.maps.InfoWindow();`首先是通过在函数内部使用为您想要的每条折线创建一个信息窗口。

或者您可以创建一个新的范围。在这种情况下，我建议您阅读这篇文章：[Google Maps API - Trouble with Arrays and InfoWindows](https://stackoverflow.com/questions/6784426/google-maps-api-trouble-with-arrays-and-infowindows)

# asp.net-mvc-3 - 我在哪里存储我的 Razor 电子邮件模板？

> ID：11948274
> 
> 赞同：0
> 
> 时间：2012-08-14T08:12:17.750
> 
> 标签：asp.net-mvc-3, razor, email

我想确保遵循 ASP .NET MVC 3 上下文中的最佳实践。当在 MVC 3 Web 应用程序上执行某些操作时，我使用 Razor 模板引擎生成自动电子邮件。

我为电子邮件创建了一个单独的类库，这个类库将包含生成电子邮件时将使用的模型以及一个消息工厂，它将使用适当的视图和模型生成必要的消息文本。

我不确定应该将视图模板存储在哪里。我想将它们存储为 CSHTML，因为这将允许项目中的开发人员（Razor 的新手）在创建邮件模板时使用 IntelliSense。

我认为我不能将它们存储在类库的文件夹中，因为这会使部署更加复杂。如果我将它们存储在 MVC 3 Web 应用程序根目录中的文件夹中，互联网上任何知道正确路径的人都可以访问它们。我现在考虑两种选择：

1.  将它们存储在 app_data 文件夹中，但这似乎不整洁。

2.  将它们存储在 MVC 的 Views 文件夹中名为“EmailTemplates”的文件夹中。我认为这是最好的选择，因为您不能直接浏览它（没有控制器），我们的开发人员可以轻松访问它们并使用 IntelliSense。

选项 2 是最好的选择吗，将这些邮件模板放在此处会是一种罪过吗？然后我会直接通过本地文件系统访问这些文件，但我不确定一旦部署到生产环境中是否会出现安全问题（也许使用 app_data 文件夹可以防止这种情况发生）。我想要最小的部署配置。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T20:22:20.400

像往常一样，没有一个正确的答案，这都是关于哲学和方法的，但最重要的（在我看来）——实用性。IE 如果它有效、易于维护、易于理解 - 为什么不这样做呢？

在您的情况下，我会将其放在 App_Data 文件夹下 - 根据定义，这是应用程序使用的所有数据所在的位置。数据库在那里，配置 XML 在那里等等。所以为什么不使用该文件夹来达到您的目的。

您可以像这样在 C# 代码中轻松访问它：`System.Web.HttpContext.Current.Server.MapPath(@"~/App_Data")` . 我不认为任何其他（由您自己创建）文件夹会更好或更糟......它只是 App_Data 专门用于这些目的，但这并不意味着您不能做其他事情，这在您的应用程序中是有意义的.

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T06:46:41.057

在做了更多的研究和一些实验之后，Views 文件夹似乎是我的电子邮件模板的最佳位置。这是我的推理：

*   电子邮件模板将仅由 Web 应用程序使用，没有其他用途。

*   MVC 应用程序将在其下运行的应用程序池至少有权读取 Views 文件夹中的文件夹。这意味着我不需要在部署期间为文件夹提供任何特殊权限。（尽管 App_Data 文件夹也是如此）。

*   IntelliSense 在 App_Data 文件夹中不起作用，但在 Views 文件夹中起作用。由于该项目的开发人员是 Razor 的新手，因此 IntelliSense 将使他们的工作变得更轻松。也只是使模板的开发更容易。

*   尽管我为模板邮件程序创建了一个单独的项目，但也可以将邮件模板的模型与您的 MVC 模型一起存储。

# cordova - 在 PhoneGap 中为多平台移动应用程序编写一次代码

> ID：11948275
> 
> 赞同：1
> 
> 时间：2012-08-14T08:12:18.773
> 
> 标签：cordova, cross-platform, dry

我一直在研究 phonegap 和许多其他移动应用程序制作解决方案。由于 phonegap 声称支持最多种类的技术，它似乎非常有吸引力。但是，在查找入门指南时，有单独的 iPhone、Android 等开发指南。

所以我想知道开发跨平台应用程序的方法是什么？是否可以一次编写代码并在 phonegap 支持的所有平台上使用？你是用纯 html/css/js 编写的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T08:40:14.713

PhoneGap vs 'native'（vs Titanium 和其他）已经写了很多[见右侧的'相关'栏]。单独指南的原因是您需要这些特定环境来最终构建您的应用程序（将您的 html/css/js 与 PhoneGaps 平台特定代码合并）。PhoneGap Build 试图解决这个问题：它为您构建应用程序（作为 Web 服务）。

开发本身发生在 html/css/js 中。您的 js 代码将可以访问手机上的 js 通常无法使用的功能（例如相机），通过一组不同平台的 PhoneGap 代码提供的接口。如果 PhoneGap 不提供某些功能，您可以自己添加（或找到执行此操作的第三方插件），但这需要您编写依赖于平台的代码。在我使用它的时候，我无法通过 PhoneGap Build（为您构建的网络工具）使用自定义库。

就个人而言，我完全放弃了 PhoneGap 的想法。你没有原生的“UI”，而是留下了你可以在 HTML/css/js 中做的事情。在我看来，这不仅在许多方面受到限制（关于外观和速度），它也不太“直截了当”和“稳定”。这导致了许多奇怪且难以解决的“错误”（该应用程序有效，但只要用户不移动并以“预期”方式轻敲他/她的手指，就会出现故障，我不喜欢那样， 亲自）。解决这些问题需要很多时间，我觉得这样做并不有趣。我说的是单一电话，单一平台。你可以想象如果你在另一个上尝试这个会发生什么。

此外，使用PhoneGap 会使您依赖另一个第三方（即PhoneGap）。此外，您编写的代码和学习的技能在移动层面上并不那么“标准”，因此可重用性较低，我怀疑这种情况是否会很快改变。支持和文档也较少，工具也是如此。最后，开发原生代码让你更接近实际平台，我认为这很重要，因为它们各有优缺点和特点。

Android 和 iOS 现在占所售智能手机的 85%。所以目前，我的策略是针对这两个。学习曲线肯定会更大，特别是如果您来自网络并且已经具备 html/css/js 技能。但是一旦“达到标准”，我认为开发一个应用程序两次原生可以与PhoneGap所需的所有调试竞争，时间上（假设你希望你的PhoneGap应用程序至少有一定程度的体面）。在质量方面，您的原生应用程序会更好。当然。

但是，这只是一种观点，也是一种可能会随着时间而改变的观点。我的策略（专注于原生开发）主要基于我在 PhoneGap 方面的经验。还有其他方法，例如 Titanium，它们各有优缺点，您至少也可以看看这些方法。

编辑：对长篇大论感到抱歉。毋庸置疑，它的相关性以及是否同样适用于您，完全取决于您来自哪里（技能等）以及您要去哪里（是否坚持使用一个或两个平台甚至是一种选择） .

# php - Plupload - 对安全性的怀疑

> ID：11948276
> 
> 赞同：0
> 
> 时间：2012-08-14T08:12:19.483
> 
> 标签：php, javascript, security, file-upload, plupload

[http://www.plupload.com](http://www.plupload.com) - “*允许您使用 HTML5 Gears、Silverlight、Flash、BrowserPlus 或普通表单上传文件，提供一些独特的功能，例如上传进度、图像大小调整和分块上传。* ”这是使用的上传器在当前的 WordPress v3.4.1 和我认为最好的一个。

它带有 upload.php 文件（完整文件：http://ideone.com/xbPUS [）](http://ideone.com/xbPUS)。

我怀疑它的安全性：当我的服务器上有 upload.php 时，即使我没有为 Plupload 设置任何 Javascript，任何人仍然可以相对轻松地发送请求到 upload.php 文件并随时上传任何内容......对或错？

我该如何防止呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-14T08:19:18.750

这不是安全问题。在互联网上，您可以尝试将任何您想要的内容上传到支持 POST 方法的服务器（地址）。接受或拒绝此类上传取决于服务器端软件 - 一直都是这样。当然，对于谁上传什么（使用令牌、授权等）可能会有一些限制，但这取决于您（作为开发人员）来处理。

至于来自 plupload 的 upload.php 文件，我认为这只是一个快速而肮脏的例子，这使得尝试 plupload 更容易一些。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T08:22:55.550

我认为您希望 Wordpress 与 upload.php 一起使用，而不是相反。因此，如果有人直接调用upload.php，它将失败。您能否设置一些仅在您的 Wordpress 功能中可用的特定信息。在 upload.php 中，您可以询问此信息，如果不可用，它将停止。希望这是你需要的。

# image - 如何在 Visual Studio 中使用 opencv 查看图像数据？

> ID：11948277
> 
> 赞同：2
> 
> 时间：2012-08-14T08:12:21.807
> 
> 标签：image, visual-studio-2010, debugging, opencv

我在 VS2010 中编写了一个 OPENCV 项目，结果不是我预期的那样，所以我运行调试器来查看问题出在哪里。当我想查看加载的图像中的数据时，我不知道该怎么做，所以如果我想查看图像中的数据，我应该怎么做？在 matlab 中查看图像的不同通道非常简单，即

```
a=imread('test.jpg');
p1 = a(:,:,1)
p2 = b(:,:,2)

.
. 
```

在opencv中我写了同样的东西，但我不知道如何像Matlab一样一次看到所有元素。

```
a= imread("test.jpg")
split(a,planes);
    vector<Mat> T1;
    T1 = planes[0]; 
```

// 调试代码时如何查看T1里面的数据？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-14T09:01:12.310

我认为这就是您正在寻找的 - 这是一个很棒的 Visual Studio 插件

[https://bitbucket.org/sergiu/opencv-visualizers](https://bitbucket.org/sergiu/opencv-visualizers)

只需下载安装程序，确保 VS 已关闭，运行它，重新打开 VS，瞧！现在，当您指向 OpenCV 数据结构时，会显示各种不错的信息。

限制：我发现多通道图像存在一些问题（它只显示第一个通道），并且在显示大型矩阵时也有问题。如果您想查看大矩阵中的原始数据，可以使用带有调试变量的旧 VS 技巧：在断点处停止，转到 Watch 选项卡，然后在此处写入

```
((float*)myMat.data) ,10 
```

其中 float 是矩阵类型，myMat 是您的矩阵，10 是您要打印的值的数量。它将在 myMat.data 的内存位置显示前 10 个值。如果你没有正确选择数据类型，你会看到垃圾。在我的示例中，myMat 的类型为 cv::Mat。

永远不要忘记可视化工具的力量：

```
imshow("Image", myMat); 
```

如果您的数据适合图像。您可以使用 contrib 模块的颜色图来增强您的可视化工具。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-06-13T00:45:03.080

我真的不敢相信还没有人建议[Image Watch](http://visualstudiogallery.msdn.microsoft.com/e682d542-7ef3-402c-b857-bbfba714f78d)。这是有史以来最神奇的插件。它在调试时向您显示包含所有 Mat 变量（图像（灰色和颜色）、矩阵）的视图，其中包含缩放或对比度拉伸等有用的东西，您甚至可以直接在插件中实时应用更复杂的功能。它使任何类型的图像操作的调试变得轻而易举，如果您使用 cv::Mat 矩阵进行计算和线性代数，它会非常有帮助。

![在此处输入图像描述](../Images/195b073edbc4abd4c81da72312659049.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-26T15:11:50.410

下载 imagewatch 后使用监视窗口中的命令 (imagesLoc._Myfirst)[0]

向量中图像的索引

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-15T15:39:39.937

如果您不想使用 Visual Studio 的插件或扩展，可以通过键入以下内容在调试监视选项卡中逐个访问元素：

T1.data[T1.step.buf[0]*i + T1.step.buf[1]*j];

其中 i 是您要查看的行， j 是列。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-04T09:30:59.857

我建议使用[NativeViewer](http://sourceforge.net/projects/nativeviewer/)扩展。它实际上在预览窗口中显示图像的内容，而不仅仅是格式正确的信息。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-08-30T08:21:11.093

You can use the immediate window and the extenshion method like this one

```
 /// <summary>
    /// Displays image
    /// </summary>
    public static void Display (this Mat m, Rect rect = default, string windowName = "")
    {
        if (string.IsNullOrEmpty(windowName))
        {
            windowName = m.ToString();
        }
        var img = rect == default ? m : m.Crop(rect);

        double coef = Math.Min(1600d / img.Width, 800d / img.Height);

        Cv2.ImShow(windowName, img.Resize(new Size(coef * img.Width, (coef * img.Height) > 1 ? coef * img.Height : 1)));
        Cv2.WaitKey();
    } 
```

Then you stop at a breakpoint and call yourImage.Display() in the immediate window.

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-08-14T19:22:08.277

如果您可以使用 CLion，则可以使用 OpenCV Image Viewer 插件，该插件在单击调试时显示矩阵。

[https://plugins.jetbrains.com/plugin/14371-opencv-image-viewer](https://plugins.jetbrains.com/plugin/14371-opencv-image-viewer)

[![在此处输入图像描述](../Images/787bac33acdb8ea12f584634bd357333.png)](https://i.stack.imgur.com/wC0tS.gif)

# java - 将 POST 数据从一个 servlet 调用到另一台服务器

> ID：11948279
> 
> 赞同：0
> 
> 时间：2012-08-14T08:12:44.840
> 
> 标签：java, http, gwt, servlets, http-headers

我正在从我的 GWT-Client 提交 JSON 数据并将其传递给我的 GWT-Server。我想将数据重新提交到另一台服务器，并希望从另一台服务器响应 GWT-Client。

我只是不知道我该怎么做。我尝试了下面的代码但没有工作。

我的代码是：

```
@Override
protected void doPost(HttpServletRequest request,
        HttpServletResponse response) throws ServletException, IOException {
    System.out.println("POST");

    StringBuffer jb = new StringBuffer();
    URL oracle = new URL("http://www.google.com");

    HttpURLConnection connection = null;
    connection = (HttpURLConnection) oracle.openConnection();
    connection.setRequestMethod("GET");
    connection.setDoOutput(true);
    connection.setDoInput(true);
    request.getInputStream();

    OutputStream wr = connection.getOutputStream();

    InputStream in = request.getInputStream();
    byte[] buffer = new byte[512];
    int read = in.read(buffer, 0, buffer.length);
    while (read >= 0) {
        wr.write(buffer, 0, read);
        read = in.read(buffer, 0, buffer.length);
    }

    wr.flush();
    wr.close();

    BufferedReader in1 = new BufferedReader(new InputStreamReader(
            connection.getInputStream()));
    String inputLine;
    while ((inputLine = in1.readLine()) != null) {
        jb.append(inputLine);
    }
    response.setContentType("text/html");
    // Get the printwriter object from response to write the required json
    // object to the output stream
    PrintWriter out = response.getWriter();
    // Assuming your json object is **jsonObject**, perform the following,
    // it will return your json object
    out.print(jb.toString());
    out.flush();
    in1.close();
} 
```

请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T08:39:29.293

在阅读响应之前，您必须将请求发送到其他服务器

```
URL oracle = new URL("http://www.anotherserver.com/");

HttpURLConnection connection = null;
connection = (HttpURLConnection) oracle.openConnection();
connection.setRequestMethod("POST");
connection.setDoOutput(true);
connection.setDoInput(true);

OutputStream wr = connection.getOutputStream ();

InputStream in = request.getInputStream();
byte[] buffer = new byte[512]; 
int read = in.read(buffer,0, buffer.length);
while (read >= 0) {
   wr.write(buffer,0, read);
   read = in.read(buffer,0,buffer.length);
}

wr.flush ();
wr.close ();

BufferedReader in = new BufferedReader(new InputStreamReader(
        connection.getInputStream()));
String inputLine;
while ((inputLine = in.readLine()) != null) {
    jb.append(inputLine);
} 
```

另请参阅[使用 java.net.URLConnection 触发和处理 HTTP 请求](https://stackoverflow.com/questions/2793150/how-to-use-java-net-urlconnection-to-fire-and-handle-http-requests)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T08:46:01.593

此外，您可以使用[Apache httpclient](http://hc.apache.org/httpclient-3.x/)，实现您的要求非常简单，例如：

```
public static void main(String[] args) {
    HttpClient client = new DefaultHttpClient();
    HttpPost post = new HttpPost("http://www.anotherserver.com/");
    try {
        List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(1);
        nameValuePairs.add(new BasicNameValuePair("key",
                "value"));
        post.setEntity(new UrlEncodedFormEntity(nameValuePairs));

        HttpResponse response = client.execute(post);
        BufferedReader rd = new BufferedReader(new InputStreamReader(
                response.getEntity().getContent()));
        String line = "";
        while ((line = rd.readLine()) != null) {
            System.out.println(line);
        }

    } catch (IOException e) {
        e.printStackTrace();
    }
} 
```

# windows-runtime - 强制重新评估实时过滤的 IListDataSource

> ID：11948281
> 
> 赞同：0
> 
> 时间：2012-08-14T08:12:51.090
> 
> 标签：windows-runtime, winjs

我在使用 createFiltered() 创建的 WinJS.Binding.List 上使用实时过滤投影。

过滤谓词对由侦听 Windows.ApplicationModel.Search.SearchPane.getForCurrentView().onquerysubmitted 的事件处理程序设置的字符串变量进行操作。

当搜索字符串更改时，如何触发对过滤投影的重新评估？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-14T17:04:59.767

您需要更改谓词过滤器用于检查项目的变量，然后调用`notifyReload()`源列表。这是一个小代码片段来演示：

```
 var mainList = new WinJS.Binding.List(["one", "two", "three"]);

    var filterString = "t";

    function filter(item) {
        var result = item.indexOf(filterString) > -1;
        console.log("Filter: " + item + " " + result);
        return result;
    };

    var filteredList = mainList.createFiltered(filter);

    filterString = "e";
    mainList.notifyReload(); 
```

当`notifyReload`被调用时，谓词将被重新应用以重新生成过滤列表的内容。在这个片段中，调用`console.log`将让您看到过滤器是如何被重新应用的。

# performance - Magento - many of same cache requests

> ID：11948284
> 
> 赞同：3
> 
> 时间：2012-08-14T08:12:57.270
> 
> 标签：performance, magento, caching

today I realized that the Magento doest a lot of same requests to my memcached server, it's requesting the key **Zend_LocaleC_en_GB_currencynumber_** . Do you anyone know where is it generated and how can I improve it? It's probably somehow related to rendering of price box but I dont see reason why it's 50 times in a page. Thanks, Jaro.

Edited: So far I did quick fix Zend_Cache_Backend_Memcached::load

```
public function load($id, $doNotTestCacheValidity = false)
{
    if ( isset($GLOBALS[$id]) ) {
        return $GLOBALS[$id];
    }

    $tmp = $this->_memcache->get($id);
    if (is_array($tmp) && isset($tmp[0])) {
        $GLOBALS[$id] = $tmp[0];
        return $tmp[0];
    }
    return false;
} 
```

It's not nice but seems to be working. At least many of requests agains memcached server disappeared. Jaro.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T20:50:08.523

It is one of the known issues in Zend Framework community. It even was reported as an improvement for 1.0.3 release (http://framework.zend.com/issues/browse/ZF-2311).

You fix make sense for Magento where a lot of calls to Zend_Currency is performed and connection to memcached having some limitations or slow enough.

For instance on most of the projects we are using memcached and haven't experienced too big loss in page load time with this calls.

However you can fix it in Magento to make a workaround with ZF:

1.  Rewrite core/locale model in your module

2.  Override currency() method

    ```
    public function currency($currency)
    {
         if (!isset(self::$_currencyCache[$this->getLocaleCode()][$currency])) {
            $currencyObject = parent::currency($currency);
            $currencyObject->setFormat(array(
                'format' => Zend_Locale_Data::getContent($this->getLocale(), 'currencynumber')
            ));
            return $currencyObject;
         }
         return parent::currency($currency);
    } 
    ```

# c# - 使用包含检索实体的通用存储库和实体框架逻辑

> ID：11948288
> 
> 赞同：5
> 
> 时间：2012-08-14T08:13:09.070
> 
> 标签：c#, entity-framework-5

我有两个[Entity Framework 5](http://msdn.microsoft.com/en-us/data/ef.aspx) Get() 方法，它们执行**(i)**通过 ID 获取单个实体，以及**(ii)**通过过滤器获取单个实体，并使用任何预先加载的螺栓。请参阅下面的代码：

```
internal readonly FallenNovaContext Context;
private readonly DbSet<TEntity> _dbSet;

internal GenericRepository(FallenNovaContext context)
{
    Context = context;
    _dbSet = context.Set<TEntity>();
}

// (i) Get by ID.
public TEntity GetById(int id)
{
    return _dbSet.Find(id);
}

// (ii) Get by filter and optional eager loading includes.
public TEntity Get(
    Expression<Func<TEntity, bool>> filter = null,
    IEnumerable<string> includePaths = null)
{
    IQueryable<TEntity> query = _dbSet;

    if (filter != null)
    {
        query = query.Where(filter);
    }

    if (includePaths != null)
    {
        query = includePaths.Aggregate(query, (current, includePath) => current.Include(includePath));
    }

    return query.SingleOrDefault();
} 
```

随着应用程序的增长，现在所有这些都可以正常工作，我发现我正在编写许多需要两者混合的非泛型方法 - 更具体地说，我想要一个通用的通过 ID 获取并且还能够急切加载相关实体。

所以方法签名看起来像这样：

```
 public TEntity GetById(
     int id,
     IEnumerable<string> includePaths)
 {
       // ???
 } 
```

我可以这样称呼：

```
 User user = UnitOfWork.UserRepository.GetById(117, new List<string>() { "UserRole", "UserStatus" }); 
```

或者像这样：

```
 Car car = UnitOfWork.CarRepository.GetById(51, new List<string>() { "Make", "Model", "Tyres" }); 
```

任何有关我如何使用 Entity Framework 5 为***TEntity GetById(int id, IEnumerable includePaths)***方法的逻辑编码的建议的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T08:26:28.027

首先，为实体编写一个基类，它定义了主键字段。像下面这样的东西可能会起作用：

```
public abstract class BaseEntity
{
    public int Id {get;set;}
} 
```

然后，为您的存储库编写一个基类；在此基础存储库中定义所有通用方法。让这个存储库有一个实体类型的通用参数：

```
public class RepositoryBase<TEntity> where TEntity : BaseEntity
{
   public TEntity GetById(
     int id,
     params Expression<Func<TEntity, object>>[] includeList)
     {
            TEntity entity = null;
            ObjectQuery<TEntity> itemWithIncludes = context.Set<TEntity>() as ObjectQuery<TEntity>;
            foreach (Expression<Func<TEntity, object>> path in includeList)
            {
                itemWithIncludes = ((IQueryable)itemWithIncludes.Include(path)) as ObjectQuery<T>;
            }

            IQueryable<TEntity> items = itemWithIncludes.AsQueryable<TEntity>();
            entity = items.Where(p => p.Id == id).SingleOrDefault();
            return entity;
     }
} 
```

更新：@Bern 询问除了声明基类之外，是否还有其他方法可以找到主键。以下问题涉及此问题。

[Entity Framework 4：如何找到主键？](https://stackoverflow.com/questions/2958921/entity-framework-4-how-to-find-the-primary-key)

[首先是实体框架代码。查找主键](https://stackoverflow.com/questions/7253943/entity-framework-code-first-find-primary-key)

另一方面，我不知道 EF 5 中是否还有其他方法。

# file - 对 node.js 文件系统感到困惑

> ID：11948290
> 
> 赞同：10
> 
> 时间：2012-08-14T08:13:18.060
> 
> 标签：file, node.js

我分两步使用 nodejs 写入文件：

1.首先判断文件是否存在，使用`fs.exists`函数；

2.然后使用`fs.writeFile`直接写入文件；

但是现在我注意到有更多的函数用于写入文件，比如`fs.open`or `fs.close`，我应该在写入时使用这些函数来打开还是关闭文件？

此外，我注意到有 have`fs.createReadStream`和function ，它们和和有`fs.createWriteStream`什么区别？`fs.writeFile``fs.readFile`

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-08-14T09:11:54.123

以下是我将如何解释这些差异：

**低级：**

[fs.open](http://nodejs.org/api/fs.html#fs_fs_open_path_flags_mode_callback)和[fs.close](http://nodejs.org/api/fs.html#fs_fs_close_fd_callback)处理文件描述符。这些是低级函数，表示对[open(2)](https://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man2/open.2.html) BSD 系统调用的映射调用。由于您将拥有一个文件描述符，因此您可以将它们与[fs.read](http://nodejs.org/api/fs.html#fs_fs_read_fd_buffer_offset_length_position_callback)或[fs.write](http://nodejs.org/api/fs.html#fs_fs_write_fd_buffer_offset_length_position_callback)一起使用。

请注意，所有这些都是异步的，并且也有同步版本：[fs.openSync](http://nodejs.org/api/fs.html#fs_fs_opensync_path_flags_mode)、[fs.closeSync](http://nodejs.org/api/fs.html#fs_fs_closesync_fd)、[fs.readSync](http://nodejs.org/api/fs.html#fs_fs_readsync_fd_buffer_offset_length_position)、[fs.writeSync](http://nodejs.org/api/fs.html#fs_fs_writesync_fd_buffer_offset_length_position)，您不会使用回调。异步版本和同步版本之间的区别在于，`fs.openSync`只有在打开文件的操作完成时才会返回，而`fs.open`会立即返回并且您将在回调中使用文件描述符。

这些低级函数使您可以完全控制，但意味着更多的编码。

**中级：**

[fs.createReadStream](http://nodejs.org/api/fs.html#fs_fs_createreadstream_path_options)和[fs.createWriteStream](http://nodejs.org/api/fs.html#fs_fs_createwritestream_path_options)创建可以连接到事件的流对象。这些事件的示例是“数据”（当读取了一块数据，但该块只是文件的一部分）或“关闭”。这样做的好处是您可以读取文件并在数据进入时对其进行处理，即您不必读取整个文件，将其保存在内存中然后进行处理。这在处理大文件时很有意义，因为您可以在处理块中的位而不是处理整个文件（例如内存中的整个 1GB 文件）中获得更好的性能。

**高水平：**

[fs.readFile](http://nodejs.org/api/fs.html#fs_fs_readfile_filename_encoding_callback)和[fs.writeFile](http://nodejs.org/api/fs.html#fs_fs_writefile_filename_data_encoding_callback)对整个文件进行操作。所以你会打电话`fs.readFile`，节点会读入整个文件，然后在你的回调中向你展示整个数据。这样做的好处是您不需要处理不同大小的块（例如使用流时）。写入时，节点将写入整个文件。这种方法的缺点是在读/写时，您必须将整个文件保存在内存中。例如，如果您正在转换一个日志文件，您可能只需要几行数据，使用流您可以做到这一点，而无需在开始写入之前等待文件被完全读入。

还有[fs.readFileSync](http://nodejs.org/api/fs.html#fs_fs_readfilesync_filename_encoding)和[fs.writeFileSync](http://nodejs.org/api/fs.html#fs_fs_writefilesync_filename_data_encoding)不会使用回调，而是在返回之前等待读/写完成。使用它的好处是，对于小文件，您可能不想在文件返回之前做任何事情，但对于大文件，这意味着 CPU 在等待文件 I/O 完成时会空闲。

希望这是有道理的，并且在回答您的问题时，`fs.writeFile`您不需要`fs.open`或`fs.close`.

# python - 在本地安装 tkinter 和 python

> ID：11948295
> 
> 赞同：11
> 
> 时间：2012-08-14T08:13:44.637
> 
> 标签：python, linux, tkinter, tcl, tk

我在服务上使用 linux。而且我没有root权限。我将 python-3.2.3 本地安装到“/home/sam/install_sam”。当我导入 tkinter 模块时。我收到以下错误：

```
ImportError: No module named _tkinter, please install the python-tk package 
```

我知道我需要安装 Tkinter 模块。因为我没有root权限。我不能像以下命令一样使用：

```
apt-get install python-tk
sudo apt-get install python-tk 
```

我在goolge上搜索。[我从这里](http://www.tcl.tk/software/tcltk/download.html)**得到 tcl/tk** 。我使用以下命令安装它们。

```
cd ~/Downloads/tcl8.5.11/unix
./configure --prefix=/home/sam/install_sam/tcl
make
make install

cd ~/Downloads/tk8.5.11/unix
./configure --prefix=/home/sam/install_sam/tk 
            --with- tcl=/home/sam/Downloads/tcl8.5.11/unix
make
make install

cd ~/Downloads/Python3.2.3/
export LD_LIBRARY_PATH=/home/sam/install_sam/tcl/lib:/home/sam/install_sam/tk/lib
export LD_RUN_PATH=/home/sam/install_sam/tcl/lib:/home/sam/install_sam/tk/lib
./configure --prefix=/home/sam/install_sam/python 
make
make install 
```

我仍然收到错误：**INFO: Can't locate Tcl/Tk libs and/or headers**。我应该如何为 python 配置 tcl/tk

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-27T00:14:50.610

在构建 Python 3 之前，使用 CPPFLAGS 环境变量设置 tcl 和 tk 的包含目录。这对我有用。

```
export CPPFLAGS="-I/home/sam/install_sam/tcl/include -I/home/sam/install_sam/tk/include" 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-29T08:58:37.003

最后。我将 tcl/tk 和 python 安装在同一路径中。它现在可以工作了。命令如下：

```
cd ~/Downloads/tcl8.5.11/unix
./configure --prefix=/home/sam/install_sam/python3
make
make install

cd ~/Downloads/tk8.5.11/unix
./configure --prefix=/home/sam/install_sam/python3
            --with-tcl=/home/sam/Downloads/tcl8.5.11/unix
make
make install

export LD_LIBRARY_PATH=/home/sam/install_sam/python3/lib
cd ~/Downloads/Python3.2.3/3
./configure --prefix=/home/sam/install_sam/python3 
make
make install 
```

有人可以告诉我**如何以第一种方式为 python 配置 tcl/tk（在问题中提到）**。我会很感激

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-04T13:09:06.040

```
sudo apt-get install tcl-dev tk-dev 
```

为我工作，虽然我最终拉了一个 docker 图像并使用它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-05-09T00:48:28.593

在我的情况下，我已经`import tkinter`在我的 Python3 环境中正常工作，但是我必须使用预编译的 Python 和它自己的不包含依赖项的环境（Blender fyi）（我需要 tkinter 来运行`matplotlib`）。

在我的情况下，修复非常简单：

1.  在**工作**python 中，`import tkinter`检查它的安装位置`tkinter.__file__`。这将是类似的`path/to/site-packages/tkinter`

2.  将`tkinter`文件夹复制到`site-packages`目标安装的

3.  然后`import _tkinter`就不行了。再次使用文件技巧，找到丢失的`.so`文件，在我的 Ubuntu 中类似于 `path/to/python3.7/lib-dynload/_tkinter.cpython-37m-x86_64-linux-gnu.so'

4.  再次，将文件复制到目标安装`.so`的对应文件中。**确保源 Python 版本和目标 Python 版本兼容**。`lib-dynload`

 **为确保您的目标 python 找到复制的文件，请确保目标路径列在`sys.path`.

希望这可以帮助！
干杯，
安德烈斯**

# linux - 从源代码构建 X 服务器

> ID：11948298
> 
> 赞同：3
> 
> 时间：2012-08-14T08:13:48.760
> 
> 标签：linux

我有一个运行 Ubuntu 的 Virtual Box。我想研究 Xserver，所以我需要知道如何在我的 VM 上获取 Xserver 的源代码和依赖库，以便我可以通过一些更改来构建和测试 Xserver。

有人可以指导我应该如何开始或任何可以获取一些信息的链接。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-17T11:20:04.297

尝试先安装 libgcrypt11-dev 软件包（11 可能会根据您的存储库而变化）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T08:19:20.980

[您可以从http://www.x.org/wiki/Releases/Download?action=show&redirect=Mirrors](http://www.x.org/wiki/Releases/Download?action=show&redirect=Mirrors) 下载 XServer 源代码
当您运行配置文件时，所有依赖项将自动列出。

# ios - 尝试在 iPhone 上的 Phonegap 中使用外部链接时出错

> ID：11948306
> 
> 赞同：2
> 
> 时间：2012-08-14T08:14:07.857
> 
> 标签：ios, cordova, cordova-2.0.0

我正在尝试`http://192.168.1.142/jasmine-device_2/login.html`在 phonegap 中使用外部链接（）`cordova2.0.0`

它适用于这个本地

```
self.viewController.wwwFolderName = @"www";
self.viewController.startPage = @"index.html"; 
```

`ERROR:Start Page at 'http://192.168.1.142/jasmine-device_2/login.html' was not found.` 但在下面显示错误

```
self.viewController.wwwFolderName = @"http://192.168.1.142/jasmine-device_2";
self.viewController.startPage = @"login.html"; 
```

如何在 iPhone 中使用外部链接。此外，此外部链接在`android`phonegap 中运行良好。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T09:25:23.133

你是否在 plist 文件中添加了 url，如果没有，试试这个

转到plist文件（在xcode /Supporting Files/cordova.plist中），您需要将字符串添加为ExternalHosts的子节点。为此，首先单击 ExternalHosts 标签左侧的小箭头，使箭头指向下方（这很重要）。然后右键单击 ExternalHosts 标签并单击“添加行”。然后将新行值设置为您想要的任何值

# c++ - 如何让 FLTK 1.3.0 在 Ubuntu Linux 中支持中文？

> ID：11948307
> 
> 赞同：0
> 
> 时间：2012-08-14T08:14:16.240
> 
> 标签：c++, linux, ubuntu, utf-8, fltk

我想用 GUI 写一个程序，所以我使用 FLTK。但是中文显示为“？？？？？？” 在 Ubuntu Linux 中。WinXP 没问题。

我知道 FLTK 支持 UTF8，我保证代码源是 UTF8。

我该做什么？更改系统设置或更改我的 C++ 代码？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T07:54:33.073

在 main 中添加代码：

```
putenv("LANG=zh_CN.UTF-8"); 
```

并确保您的环境没有其他关于“UTF-8”的设置

# java - 在上传服务器端之前加密文件上传内容

> ID：11948310
> 
> 赞同：2
> 
> 时间：2012-08-14T08:14:32.320
> 
> 标签：java, javascript, gwt, servlets, applet

`FileUpload`控制 (GWT) 将使用 servlet 在服务器上上传文件。有一些安全线程需要在上传到服务器之前使用证书在客户端（在浏览器中）进行文件加密。

要求如：

```
-> Get content of file at client side
-> Encrypt the content at client side
-> Write that file with encrypted content on disk using servlet 
```

所以我发现了一些使用[javascript](https://stackoverflow.com/questions/750032/reading-file-contents-on-the-client-side-in-javascript-in-various-browsers) & [applet的链接](https://stackoverflow.com/questions/1599018/java-applet-to-upload-a-file)

如果有另一种解决方案并为我提供正确的方法。

实际上到目前为止，服务器端的加密处理可能会产生安全问题。证书安装在客户端计算机上，因此出于安全原因，最好在客户端执行所有加密操作。

# iphone - ios coreplot 多个y轴

> ID：11948317
> 
> 赞同：0
> 
> 时间：2012-08-14T08:14:46.480
> 
> 标签：iphone, ios, core-plot

我一直在寻找这个问题的答案 3 天，但无法弄清楚。

我需要在图表中添加 3 个散点图，这是我的代码：

```
CPTXYAxis *x = [[CPTXYAxis alloc] init];
CPTXYAxis *lefty = [[CPTXYAxis alloc] init];
CPTXYAxis *righty = [[CPTXYAxis alloc] init];

x.coordinate = CPTCoordinateX;
lefty.coordinate = CPTCoordinateY;
righty.coordinate = CPTCoordinateY;

CPTAxisSet *axisSetTmp = [[CPTAxisSet alloc] init]; 
```

用于初始化并创建 3 个不同的绘图空间，例如：

```
float xAxisMin = 0;
float xAxisMax = 350;
float yAxisMin = 0;
float yAxisMax = 50;

// We modify the graph's plot space to setup the axis' min / max values.
CPTXYPlotSpace *plotSpace = (CPTXYPlotSpace *)self.graph.defaultPlotSpace;
plotSpace.xRange = [CPTPlotRange plotRangeWithLocation:CPTDecimalFromFloat(xAxisMin) length:CPTDecimalFromFloat(xAxisMax - xAxisMin)];
plotSpace.yRange = [CPTPlotRange plotRangeWithLocation:CPTDecimalFromFloat(yAxisMin) length:CPTDecimalFromFloat(yAxisMax - yAxisMin)];
x.plotSpace = plotSpace; 
```

最后创建我的情节，如：

```
CPTScatterPlot *plot = [[CPTScatterPlot alloc] init];
plot.dataSource = self;
plot.identifier = @"mainplot";
plot.dataLineStyle = lineStyle;
plot.plotSymbol = nil;
plot.plotSpace = plotSpace; 
```

当我运行它时，添加了 3 行但我只有 1 个 y 轴。无法弄清楚问题所在。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T00:25:57.143

1.  您是否将新轴添加到图表中？

    ```
    graph.axisSet.axes = [NSArray arrayWithObjects:x, lefty, righty, nil]; 
    ```

2.  如果所有坐标轴和绘图都具有相同的绘图范围，则可以为所有坐标轴和绘图使用相同的绘图空间。新图表以您可以使用的图表开头 ( `defaultPlotSpace`)。使用`-addPlotSpace:`方法向图形添加额外的绘图空间。

# java - 在 Web 应用程序部署时仅读取 .properties 文件一次

> ID：11948321
> 
> 赞同：1
> 
> 时间：2012-08-14T08:14:58.703
> 
> 标签：java, servlets, configuration, properties, jboss7.x

拥有一个 Java Web 应用程序，如何在部署应用程序时只读取一次属性文件（稍后将它们存储在某个单例中）？这意味着，配置更改将需要重新部署。

否则，是否有其他方法可以防止应用程序不断读取 .properties 文件？以前我的 web.xml 文件中有设置，但现在需要 .properties。

用于从 JBoss 配置路径读取应用程序设置的代码：

```
File f = new File(System.getProperty("jboss.server.config.dir"), 
                  "myappsettings.properties");
Properties p = new Properties();
p.load(new FileInputStream(f));
try {
   db_name = p.getProperty("DATABASE_NAME"));
   file_path = p.getProperty("FILE_PATH"));
   ...
} catch (Exception e) {
   ...
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T08:28:14.907

从 JEE6 开始，ServletContextListener 的另一种替代方法是使用单例启动 bean：

```
@Singleton
@Startup    
public class PropertyRegistry {

  @PostConstruct
  private void init(){
    //do something
  }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-14T08:18:19.623

实现你自己的[`ServletContextListener`](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletContextListener.html)：

```
public class PropertiesReadingListener implements ServletContextListener {
    @Override
    public void contextInitialized(ServletContextEvent event) {
        //read properties here...
        event.
          getServletContext().
          setAttribute("db_name", p.getProperty("DATABASE_NAME"));
    }

    @Override
    public void contextDestroyed(ServletContextEvent event) {
    }
} 
```

您必须在以下位置引用此类`web.xml`：

```
<listener>
    <listener-class>com.example.PropertiesReadingListener</listener-class>
</listener> 
```

# algorithm - 最坏情况运行时间计算

> ID：11948322
> 
> 赞同：6
> 
> 时间：2012-08-14T08:15:00.393
> 
> 标签：algorithm, complexity-theory, big-o

它来自家庭作业，但我要求一种通用方法。

计算以下代码的最坏情况运行时间。

```
int sum = 0;
for (int i = 0; i*i < N; i++)
    for (int j = 0; j < i*i; j++)
        sum++; 
```

答案是 N^3/2，谁能帮我解决这个问题？

有没有通用的方法来计算这个？

```
This is what I thought:

when i = 0, sum++ will be called 0 time
when i = 1, sum++ will be called 1 time
when i = 2, sum++ will be called 4 times
...
when i = i, sum++ will be called i^2 times

so the worst time will be
0 + 1 + 4 + 9 + 16 + ... + i^2 
```

但接下来呢？我在这里迷路了...

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-14T08:19:40.723

您想计算最内层循环将运行多少次。

外层将从 i = 0 运行到 i = sqrt(N)（因为 i*i < N）。对于外部迭代的每次迭代，内部迭代将运行 i^2 次。

因此，内部运行的总次数是：

```
1^2 + 2^2 + 3^2 + ... + sqrt(N)^2 
```

有一个公式：

```
1^2 + 2^2 + ... + k^2 = k(k+1)(2k+1) / 6 = O(k^3). 
```

在您的情况下，k = sqrt(N)。

这总复杂度是`O(sqrt(N)^3) = O(N^(3/2))`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-05T17:38:49.673

您的算法可以转换为以下形状：

```
int sum = 0;
for (int i = 0; i < Math.sqrt(N); i++)
    for (int j = 0; j < i*i; j++)
        sum++; 
```

因此，我们可以直接而正式地执行以下操作：

![在此处输入图像描述](../Images/0a75d71dc2a29267610b6b36f82acede.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T08:24:26.367

您以错误的方式处理此问题。要计算最坏时间，您需要找到将执行的最大操作数。因为在双循环中只有一个操作，所以找出内部循环将执行多少次就足够了。

您可以通过检查循环的限制来做到这一点。对于外循环，它是：

```
i^2 < N => i < sqrt(N) 
```

您的内部循环的限制是

```
j < i^2 
```

您可以在第二个等式中代入`j < N`.

因为这些是嵌套循环，所以您将它们的限制相乘以获得最终结果：

```
sqrt(N)*N = N^3/2 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T08:19:39.077

然后计算这个总和

(i^2)/2 * N^(1/2) = N/2 * N^(1/2) = N^(3/2)

# windows - ANSI C for Windows 中的简单删除文件程序

> ID：11948324
> 
> 赞同：4
> 
> 时间：2012-08-14T08:15:10.837
> 
> 标签：windows, file-handling, ansi-c

正在寻找一个简单的程序来删除用 ANSI C 编写的文件。
例如，您将如何使用 C 删除“C:\test.txt”中的文件？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-14T08:18:50.997

`remove()`您可以使用该功能从操作系统中删除文件。像这样：

```
#include <stdio.h>
int main(){
    if(remove("HELLO.txt") == -1)
        perror("Error in deleting a file");
    return 0;
} 
```

该`remove()`函数在 中定义`stdio.h`。[这是一些文档。](http://www.cplusplus.com/reference/clibrary/cstdio/remove/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T08:18:03.857

使用该`remove`功能。我相信它在“stdio.h”中

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T08:34:57.320

删除或取消链接

删除在“stdio.h”中声明

取消链接在“unistd.h”中声明

unlink 是 posix 函数，remove 是 ansi C 函数。它们在 Windows 中都可以正常工作。

unlink 只删除文件，remove 可以用来删除目录。

# iphone - Flash 中的默认按钮高亮，类似于 iOS UIButton

> ID：11948327
> 
> 赞同：0
> 
> 时间：2012-08-14T08:15:21.423
> 
> 标签：iphone, ios, actionscript-3, flash

iOS 有一个默认的 UIButton 高亮机制，它真正减少了制作原型所需的初步设计工作。Flash有类似的东西吗？

**请注意，我不是要求在 iOS 上使用它，问题是针对将在网络上运行的 Flash 应用程序**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T10:35:56.983

默认情况下在 Flash 中是不可能的。如果要创建高亮效果 SimpleButton 或 MovieClip，则必须创建效果。必须实现使用 MotionScript 或 Actionscripts 效果。

# json - json不匹配模型

> ID：11948330
> 
> 赞同：1
> 
> 时间：2012-08-14T08:15:53.580
> 
> 标签：json, extjs, model, grid, store

在 EXTJS 中，我将为我的网格使用模型和存储。现在是有时json与模型不匹配的问题。然后在我的模型中将有更少的信息。发生这种情况时，EXTJS 不会在网格中显示任何数据。所以我找了一个修复程序，发现了这个：

```
Ext.define('App.Reader', {
extend: 'Ext.data.reader.Json',

extractData: function(root) {
    var me = this,
        values  = [],
        records = [],
        Model   = me.model,
        i       = 0,
        length  = root.length,
        idProp  = me.getIdProperty(),
        node, id, record;

    if (!root.length && Ext.isObject(root)) {
        root = [root];
        length = 1;
    }

    for (; i < length; i++) {
        node   = root[i];
        values = me.extractValues(node);
        id     = me.getId(node);

        record = new Model(values, id, node);
        records.push(record);

        if (me.implicitIncludes) {
            me.readAssociated(record, node);
        }

    }

    return records;
},

extractValues: function(data) {
    var fields = this.getFields(),
        i      = 0,
        length = fields.length,
        output = {},
        field, value;

    for (; i < length; i++) {
        field = fields[i];
        value = this.extractorFunctions[i](data);

        if(value === undefined)
        {
            Ext.iterate(fields, function(key, val) {
                if (data[key] === undefined & i==val) {
                    console.log( "Model field <" + key.name + "> does not exist in data/node.");
                    value = "INVALID OR MISSING FIELD NAME";
                    var p = 0;
                    for(var prop in data) {
                        if(p==i){
                            if(data.hasOwnProperty(prop))console.log("Instead of <" + key.name + "> we have <" + prop + "> with value <" + data[prop]+ ">");
                        }
                        p++;
                    }
                }
            }, this);
        }

        output[field.name] = value;
    }

    return output;
}

});

var myReader = new App.Reader({
type:'json'
}); 
```

我在网上找到了这个。但是当我将它与 EXTJS 4.1.1 一起使用时，ext-all 中出现错误：TypeError: j is undefined。

我应该在哪里寻找解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T16:53:23.123

没有必要做一些复杂的事情来解决这个微不足道的问题。阅读[Ext.data.Model](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.Model)和[Ext.data.Field](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.Field)，正确配置您的模型，一切就绪。

# vb.net - 在 vb.net 中以表单形式列出所有面板对象？

> ID：11948331
> 
> 赞同：0
> 
> 时间：2012-08-14T08:15:59.447
> 
> 标签：vb.net, controls

我只想知道如何在不使用每个循环的情况下列出所有面板对象并防止递归过程..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T08:26:29.400

在 C# 中：

```
form.GetType().GetFields(BindingFlags.NonPublic | BindingFlags.Public | BindingFlags.Instance).
Where(fi => fi.FieldType.Equals(typeof(Panel))) 
```

我使用了反射，因为您写了您不想要递归方法，但是并非您表单中的所有面板都可以这样被发现。如果您在没有定义类成员的情况下创建面板（即使在设计器中也可以完成），您将无法使用此方法获得它。

递归方法：

```
Panel[] GetPanels(Control container)
{
    List<Panel> panels = new List<Panel>();
    foreach (Control child in container.Controls)
    {
       if (child is Panel)
            panels.Add(child as Panel);
       panels.AddRange(GetPanels(child));
    }
    return panels.ToArray();
} 
```

编辑：上述方法未优化。它正在创建太多列表，不能用作“懒惰”。这是另一个改进的版本：

```
IEnumerable<Panel> GetPanelsLazy(Control container)
{
    foreach (Control child in container.Controls)
    {
        if (child is Panel)
            yield return child as Panel;

        foreach (var panel in GetPanelsLazy(child))
        {
            yield return panel;
        }                
    }
} 
```

# javascript - 在构造函数中定义函数会比将其附加到原型消耗更多的内存吗？

> ID：11948333
> 
> 赞同：2
> 
> 时间：2012-08-14T08:16:12.253
> 
> 标签：javascript, google-chrome, prototype

这可能是最安全的方式（*案例 A*）：

```
var myClass = function() { };
myClass.prototype = {
    doSomething : function() { alert('Something'); }
}; 
```

这是替代方案（*案例 B*）：

```
var myClass = function() {
    this.doSomething = function() { alert('Something'); };
}; 
```

我的印象是，通过如案例 B 所示执行此操作，doSomething 将成为一个成员，并且该函数将为我实例化的每个 myClass 对象定义一次，以便它将在 100 个实例的内存中存在 100 次，而在案例 A 函数只存在于内存中的一个地方，不同的实例只会引用原型。

**我是否正确理解这一点？**

**作为一个额外的问题**：在案例 B 中执行此操作时，chrome 开发人员为我提供了 doSomething 的智能感知，但我必须扩展 __proto__ 才能看到它。为什么它没有出现在对象本身上？也就是说，为什么原型成员没有显示在对象上，而是被困在 __proto__ 上？如果 __proto__ 堆栈会被展平并直接显示在对象上，我会更喜欢。是否有另一个案例会允许这种情况发生？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T08:23:17.800

首先，在情况 B 中，您只是在创建一个全局函数，而不是将其附加到实例。你的意思是：

```
this.doSomething = function() { } 
```

其次，第一个会更快。虽然我现在找不到链接，但 jQuery honcho John Resig 写了一篇详细的博客文章，展示了方法的原型继承与实例上声明的方法的速度测试。继承明显更快。

在精神方面，我一直非常喜欢继承。这是可重用、跨实例功能的地方。将它添加到每个实例的唯一好处是允许您在构造函数中在一个方便的闭包内声明方法，但仅此而已。

如果这是您喜欢模式 B 的原因，则可以在仍然 a) 继承方法的同时执行此操作；b) 不要在每次实例化时重新声明它们。

```
function SomeClass() {
    if (!SomeClass.prototype.someMethod) {
        SomeClass.prototype.someMethod = function() {}
    }
} 
```

不过，这会稍微减慢初始实例化速度，因为它负责设置原型 - 而不是实例化过程的真正工作。

在您的两种情况下，还需要注意程序上的差异：

```
 function SomeClass(name) {}
 SomeClass.prototype.someMethod = function() {};
 var instance = new SomeClass();
 console.log(!!instance.someMethod); //true
 console.log(instance.hasOwnProperty('someMethod')); //false 
```

最后一行是假的，因为该方法是继承的，而不是实例拥有的。使用您的模式 B，这将解决为 true。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T08:24:03.760

1.  正确：在原型中定义方法将创建 1 个函数对象，并且每个实例都将引用该 1 个函数。在构造函数中定义它为每个实例创建一个新函数

2.  您的代码需要一些工作。您定义构造函数的方式，该`doSomething`函数被定义**为一个全局**添加`var`来对抗它。尽管如此，这仍然没有设置`doSomething`为属性，它只是在构造函数（闭包）范围内声明的函数。这就是为什么它没有作为方法出现在您的实例中的原因：该函数未附加到`this`，但即使像这样修复此问题，您仍然为每个实例创建新的函数对象：

* * *

```
 function MyConstructor()//capitalize constructors - conventions are important
 {
     var someMethod = function(){/*..*/};
     this.someMethod = someMethod;
 } 
```

Utkanos 指出了继承和原型方法的含义（`.hasOwnProperty`），他在这方面是绝对正确的（+1）。我只想补充一点，`hasOwnProperty`返回 false 的方法是一件小事。一般来说，在迭代对象时，检查哪些属性和方法已设置，哪些未设置。在大多数情况下，您想要的是属性，而不是方法。所以实际上最好将它们设置在原型级别：

```
for(var name in obj)
{
    if (obj.hasOwnProperty(name))
    {
        //do stuff, here the methods are set @ prototype level
    }
    if (obj.hasOwnPrototype(name) && typeof obj[name] !== 'function')
    {
        //same stuff, but requires extra check when methods are assigned by constructor
    }
} 
```

# perl - Perl 中的多维数组

> ID：11948337
> 
> 赞同：-3
> 
> 时间：2012-08-14T08:16:31.773
> 
> 标签：perl, multidimensional-array

有没有办法在 Perl 中创建/模拟 3D（或更高维）数组？
我试图在网上搜索，但一无所获。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-14T08:29:03.800

看看[perldoc perllol](http://perldoc.perl.org/perllol.html)。这代表“Perl 列表列表”，它是一种多维数据结构的名称。

考虑`@array`。如果不是在`@array`' 元素中放置简单的值，而是放置对数组的引用，那么您现在就有了一个可以像数组数组或二维数组一样处理的数据结构。想要3d？没问题。你可以去任何你想要的深度。

```
@array = (
    [ 'A', 'B', 'C' ],
    [ 'D', 'E', 'F' ],
    [ 'G', 'H', 'I' ],
); # A 2D structure represented as a LoLs.

@array = (
    [ [ 'A', 'B', 'C' ], [ 'D', 'E', 'F' ], [ 'G', 'H', 'I' ] ],
    [ [ 'J', 'K', 'L' ], [ 'M', 'N', 'O' ], [ 'P', 'Q', 'R' ] ],
    [ [ 'S', 'T', 'U' ], [ 'V', 'W', 'X' ], [ 'Y', 'Z', 'a' ] ],
); # A 3D structure.

@array = (
    [ [ [ 'A', 'B' ], [ 'C', 'D' ] ], [ [ 'E', 'F' ], [ 'G', 'H' ] ] ],
    [ [ [ 'I', 'J' ], [ 'K', 'L' ] ], [ [ 'M', 'N' ], [ 'O', 'P' ] ] ],
); # A 4D structure. 
```

您的想象力和可用 RAM 是数据结构可以变得多复杂或可以容纳多少维的唯一限制。它甚至不必是统一的：

```
@array = ( [ 'a', 'b' ], 'c', [ 'd', 'e', [ 'f', 'g', 'h' ] ] ); 
```

链表怎么样：

```
$head->[ 'a', [ 'b', [ 'c', [ 'd', [ 'e', [ 'f', [ 'g', undef ] ] ] ] ] ] ]; 
```

所有这些都只处理简单的标量值与数组引用相结合。您还可以使用散列引用、代码引用、全局引用、对象引用，甚至标量引用。有很多可用的电源。

其他有用的阅读材料是[perldoc perlreftut](http://perldoc.perl.org/perlreftut.html)、[perldoc perlref](http://perldoc.perl.org/perlref.html)和[perldoc perldsc （数据结构食谱）](http://perldoc.perl.org/perldsc.html)，以及以下书籍：[Intermediate Perl](http://shop.oreilly.com/product/0636920012689.do)、[Programming Perl](http://shop.oreilly.com/product/9780596004927.do)，甚至有些过时的[Mastering Algorithms with Perl](http://shop.oreilly.com/product/9781565923980.do)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T08:28:20.453

二维数组将是一个引用其他数组的数组。[perldoc perllol](http://p3rl.org/lol)有详细的操作方法。

根据这个基本原理，可以制作更复杂的数据结构，比如哈希数组的哈希数组……你明白了。

# perl - 什么是打印< 可能重复： 用 <<'ESQ' 帮助我理解这个 Perl 语 问问题 问问题 2012-08-14T08:16:33.347 45160 次 This question shows research effort; it is useful and clear 9 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. 可能重复： 用 <<'ESQ' 帮助我理解这个 Perl 语句 https://stackoverflow.com/questions/4151279/perl-print-eof中的语句到底在做什么？我遇到了以前的帖子，但不明白他要解释什么。那是什么PETE？谁能解释每一行？代码是如何工作的？ print < <eof; 1="" 2="" 3="" 4="" 5="" 11="" 23="" this="" is="" a="" multiline="" string="" eof="" print="" <<pete;="" pete="" 这两者之间有什么区别和相似之处？代替pete我使用了许多其他词，例如dog，每次都一样。="" selenium="" 本身不支持小程序，您必须找到外部工具来扩展="" 以供小程序使用。试试http:="" docs.codehaus.org="" display="" fest="" perl="" 回答="" answer="" useful="" 这称为here-doc。它基本上抓取从下一行到结束标记行的所有内容，并将其作为标准输入呈现给您正在运行的程序。结束标记线由="" .="" 后面的文本控制<<。="" 例如，在bash（我比="" 更熟悉）中，命令：="" cat="" <<eof="" hello="" goodbye="" 将运行cat，然后将两行发送到其标准输入（hello="" 和="" 行）。perl="" 也有这个特性，尽管语法略有不同（正如你所期望的，因为它是一种不同的语言）。尽管如此，它仍然足够接近解释仍然成立。="" wikipedia="" 有一个条目，如果您知道它被称为="" here-doc，您可能会发现它，但否则很难弄清楚。="" eof在您的特定情况下，使用and之间没有区别pete，heredoc="" 标记（后面的位<<）和标准输入的结尾之间存在关系。="" 例如，如果您的输入行之一是eof，则您不能真正将其用作标记，因为标准输入会过早终止：="" section="" contains="" the="" line="" ...="" but="" then="" has="" more="" stuff="" and="" following="" real="" 在这种情况下，您可以使用pete（或任何其他没有出现在文本中单独一行的内容）。="" 还有其他选项，例如在标记周围使用引号（以便缩进看起来更好）以及使用单引号或双引号来控制变量替换。="" 如果您转到该perlop页面并搜索<<eof，希望一切都会变得清晰。="" 于="" 2012-08-14t08:20:06.427="" 请参阅quote="" quote-like="" operators（解释得很好）。="" 2012-08-14t08:21:38.343="" related="" c#="" -="" 使用="" azure="" brokeredmessage="" 在不知道类型的情况下获取正文="" libuv="" 正确启动并运行="" libuv，以便可以使用它编译程序="" jquery="" 在="" rails="" 响应中返回="" js="" 并让它在没有="" .js.erb="" 文件的情况下执行="" javascript="" 如何用="" 字符串中的索引替换字符？="" 创建通用类型项目列表="" php="" 如何使用="" doctrine="" order="" by="" 字段中不支持="" abs()="" sql="" 的事实构建解决方法？="" algorithm="" 概率空间和预期运行时间：它们是什么？="" 团结+拦截+假货="大火球" r中的子集html字符串以删除日期="" c="" 如何在="" 中链接目标文件？因“架构="" x86_64="" 的未定义符号”而失败="" reference="" php × 1429865="" c++ × 756500="" nginx × 49975="" mongodb × 159057="" mybatis × 3233="" anaconda × 13410="" pycharm × 14671="" python × 1902243="" vscode × 56040="" docker × 110988="" github × 49000="" flask × 49129="" ffmpeg × 24037="" jmeter × 16910="" matplotlib × 63493="" bootstrap × 54641<="" h1="">> ID：11948338
> 
> 赞同：9
> 
> 时间：
> 
> 标签：perl

> **可能重复：**
> [用 <<'ESQ' 帮助我理解这个 Perl 语句](https://stackoverflow.com/questions/3414515/help-me-understand-this-perl-statement-with-esq)

[https://stackoverflow.com/questions/4151279/perl-print-eof](https://stackoverflow.com/questions/4151279/perl-print-eof)中的语句到底在做什么？我遇到了以前的帖子，但不明白他要解释什么。那是什么`PETE`？谁能解释每一行？代码是如何工作的？

```
print <<EOF;
This is
a multiline
string
EOF

print <<PETE;
This is
a multiline
string
PETE 
```

这两者之间有什么区别和相似之处？代替`PETE`我使用了许多其他词，例如`DOG`，每次都一样。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-08-14T08:20:06.427

这称为here-doc。它基本上抓取从下一行到结束标记行的所有内容，并将其作为标准输入呈现给您正在运行的程序。结束标记线由 . 后面的文本控制`<<`。

例如，在`bash`（我比 Perl 更熟悉）中，命令：

```
cat <<EOF
hello
goodbye
EOF 
```

将运行`cat`，然后将两行发送到其标准输入（hello 和 goodbye 行）。Perl 也有这个特性，尽管语法略有不同（正如你所期望的，因为它是一种不同的语言）。尽管如此，它仍然足够接近解释仍然成立。

Wikipedia 有[一个条目，](http://en.wikipedia.org/wiki/Here_document)如果您知道它被称为 here-doc，您可能会发现它，但否则很难弄清楚。

`EOF`在您的特定情况下，使用and之间没有区别`PETE`，heredoc 标记（后面的位`<<`）和标准输入的结尾之间存在关系。

例如，如果您的输入行之一是`EOF`，则您不能真正将其用作标记，因为标准输入会过早终止：

```
cat <<EOF
This section contains the line ...
EOF
but then has more stuff
and this line following is the real ...
EOF 
```

在这种情况下，您可以使用`PETE`（或任何其他没有出现在文本中单独一行的内容）。

还有其他选项，例如在标记周围使用引号（以便缩进看起来更好）以及使用单引号或双引号来控制变量替换。

如果您转到该[`perlop`](http://perldoc.perl.org/perlop.html)页面并搜索`<<EOF`，希望一切都会变得清晰。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-08-14T08:21:38.343

请参阅[Quote 和 Quote-like Operators](http://perldoc.perl.org/perlop.html#Quote-and-Quote-like-Operators)（解释得很好）。</eof;>

# c# - Linq 上的 EntityCommandException 与 group by 和 count

> ID：11948341
> 
> 赞同：1
> 
> 时间：2012-08-14T08:16:41.620
> 
> 标签：c#, linq, join, linq-group

当我尝试打印出 LINQ 结果时，我遇到了 EntityCommandException。这是我的代码：

```
var contacts = from c in db.mydata
               join r in db.contacts on c.user equals r.user 
               group c by new { c.user, r.name }
               into g
               orderby g.Count() descending
               select new { name= g.Key.name , counter = g.Count() } ;

foreach (var co in contacts )
{
    Console.Write(co.name);
} 
```

例外是在 foreach 行。如果在我 print 的 foreach 循环中`Console.Write(co.counter);`，异常不会出现。

# c# - C# Surface (WPF) / Soundeffects -> 字典

> ID：11948344
> 
> 赞同：0
> 
> 时间：2012-08-14T08:16:59.723
> 
> 标签：c#, mediaelement, pixelsense, soundeffect

由于 Microsoft Surface 应用程序中缺少声音效果，我尝试在字典中使用声音文件 (.wav) 构建“声音库”。

声音文件很短。

路径 = PathToFile

我的“声音库”：

```
Dictionary<string, MediaElement> soundBank = new Dictionary<string, MediaElement>(29);
soundBank = new Dictionary<string, MediaElement>(20);
        soundBank.Add("1", new MediaElement());
        soundBank.Add("2", new MediaElement());
        soundBank.Add("3", new MediaElement());
        soundBank.Add("4", new MediaElement());
        soundBank.Add("A", new MediaElement());
        soundBank.Add("BE", new MediaElement());
        soundBank.Add("CF", new MediaElement());
...

foreach (var item in soundBank)
        {
            Console.WriteLine(item.Key);
            //soundBank[item.Key] = new MediaElement();
            soundBank[item.Key].Source = new Uri(path);
            soundBank[item.Key].LoadedBehavior = MediaState.Manual;
            soundBank[item.Key].UnloadedBehavior = MediaState.Manual;
            soundBank[item.Key].Volume = 1;
            soundBank[item.Key].MediaEnded += new System.Windows.RoutedEventHandler(mp_MediaEnded); 
```

如果我尝试播放多个声音（on_button_click），声音会延迟或根本不播放：

```
public void play(string key)
    {

        soundBank[key].Stop();
        soundBank[key].Play();

    }
    void mp_MediaEnded(object sender, System.Windows.RoutedEventArgs e)
    {
        ((MediaElement)e.Source).Stop();
    } 
```

SoundPlayer 和 MediaPlayer 不适合，因为它们会停止所有其他播放的声音。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T13:29:22.863

我现在正在为我的项目使用[irrKlang 库：](http://www.ambiera.com/irrklang/index.html)

它非常易于使用：

```
using IrrKlang;
...

ISoundEngine engine = new ISoundEngine();

...

engine.Play2D(@"C:\Users\Public\Documents\sound.wav"); 
```

最终简单的解决方案^^

# php - 验证密码 yii 框架

> ID：11948350
> 
> 赞同：3
> 
> 时间：2012-08-14T08:17:19.953
> 
> 标签：php, authentication, yii

在模型 BaseUser.php 中，我`$verifyPassword`在规则中定义并添加了它

```
public function rules() {
        return array(
            array('name, email, phone_code, phone, country, language, password, role, status', 'required'),
            array('verifyPassword','required', 'on'=>'insert'),
            array('country, role, status, payment', 'numerical', 'integerOnly'=>true),
            array('name, email, active_key', 'length', 'max'=>50),
            array('phone_code', 'length', 'max'=>5),
            array('phone', 'length', 'max'=>30),
            array('language', 'length', 'max'=>10),
            array('password', 'length', 'max'=>32),
            array('verifyPassword', 'length', 'max'=>32),
            array('device_token, token', 'length', 'max'=>100),
            array('created', 'safe'),
            array('country', 'haveToSelect'),
            array('email', 'unique', 'message' => Yii::t('app',"This user's email adress already exists.")),
            array('verifyPassword', 'compare', 'compareAttribute'=>'password'),
            array('device_token, active_key, token, payment, created', 'default', 'setOnEmpty' => true, 'value' => null),
            array('id, name, email, phone_code, phone, country, language, password, role, device_token, active_key, status, token, payment, created', 'safe', 'on'=>'search'),
        );
    } 
```

在 ProfileController.php 中

```
public function actionIndex()
    {  

        $data = Yii::app()->session['Authentication'];
        $idUserLogin = $data->id;

        $dataUser = Users::model()->findByPk($idUserLogin);

        if (isset($_POST['Users'])) {
            $dataUser->setAttributes($_POST['Users']);

            if($dataUser->save()) {
                Yii::app()->user->setFlash('success',Yii::t('app','Change profile successful!'));
                $this->refresh();
            }
        } 
```

我成功注册了一个新帐户，但在另一个使用 profile'user 的功能中...更改后我无法保存。

例如，在按下保存按钮时功能更改配置文件中......没有任何变化......没有任何警报......没有验证通知。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-14T10:17:23.253

我解决了这个问题...

我改变了规则：

```
public function rules() {
    return array(
        array('name, email, phone_code, phone, country, language, password, role, status', 'required'),
        array('verifyPassword','required', 'on'=>'register'),
        array('country, role, status, payment', 'numerical', 'integerOnly'=>true),
        array('name, email, active_key', 'length', 'max'=>50),
        array('phone_code', 'length', 'max'=>5),
        array('checkAgree', 'required', 'requiredValue' => 1, 'message' => 'You must have to agree with...', 'on'=>'register'),
        array('phone', 'length', 'max'=>30),
        array('language', 'length', 'max'=>10),
        array('password', 'length', 'max'=>32),
        array('verifyPassword', 'length', 'max'=>32),
        array('device_token, token', 'length', 'max'=>100),
        array('created', 'safe'),
        array('country', 'haveToSelect'),
        array('email', 'unique', 'message' => Yii::t('app',"This user's email adress already exists.")),
        array('verifyPassword', 'compare', 'compareAttribute'=>'password', 'on'=>'register'),
        array('device_token, active_key, token, payment, created', 'default', 'setOnEmpty' => true, 'value' => null),
        array('id, name, email, phone_code, phone, country, language, password, role, device_token, active_key, status, token, payment, created', 'safe', 'on'=>'search'),
    );
} 
```

我在注册场景中检查“verifyPassword”

在我的控制器中我定义：

```
$user = new User('register') 
```

# c# - 请求 https 的代理错误

> ID：11948352
> 
> 赞同：2
> 
> 时间：2012-08-14T08:17:28.173
> 
> 标签：c#, https, proxy, httpwebrequest

我正在使用这段小代码来访问远程 Uri：

```
Uri uri = "http://www.myurl.com";
WebRequest wreq = WebRequest.Create(uri);
((HttpWebRequest)wreq).UserAgent = "Mozilla/5.0 (Windows NT 5.1) AppleWebKit/537.1 (KHTML, like Gecko) Chrome/21.0.1180.75 Safari/537.1";
wreq.Proxy = WebRequest.DefaultWebProxy; 
```

这适用于所有“http”Uri。但是，当切换到以下类型的 Uri (https) 时，我收到请求身份验证的代理错误 407（异常日志表明凭据错误）。你知道我该如何处理吗？

```
Uri uri = "https://www.myurl.com";
WebRequest wreq = WebRequest.Create(uri);
((HttpWebRequest)wreq).UserAgent = "Mozilla/5.0 (Windows NT 5.1) AppleWebKit/537.1 (KHTML, like Gecko) Chrome/21.0.1180.75 Safari/537.1";
wreq.Proxy = WebRequest.DefaultWebProxy; 
```

最好的祝福，

Al_th

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T08:45:39.690

试试这个

```
private string GetPageSource(string url)
{
    string htmlSource = string.Empty;
    try
    {
        System.Net.WebProxy myProxy = new System.Net.WebProxy("Proxy IP", 8080);
        using (System.Net.WebClient client = new System.Net.WebClient())
        {
            client.Proxy = myProxy;
            client.Proxy.Credentials = new System.Net.NetworkCredential("username", "password");
            htmlSource = client.DownloadString(url);
        }
    }
    catch (WebException ex)
    {
        // log any exceptions
    }
    return htmlSource;
} 
```

# java - 我可以使用 apache poi 将图像保存在 excel 中吗？

> ID：11948357
> 
> 赞同：2
> 
> 时间：2012-08-14T08:17:42.970
> 
> 标签：java, apache-poi

我正在使用 apache poi excel api 生成报告。在我的一些报告中，我需要提供小图标和标题标签。

是否可以使用 apache poi 将图像保存在 excel 中？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-14T10:54:15.133

是的，POI 能够将图像插入 Excel 文件。有关详细信息，请参阅[关于添加图像的 POI 文档](http://poi.apache.org/spreadsheet/quick-guide.html#Images)

POI 对图像的支持在今年夏天有了很大改善，在 PI 3.9 发布之前（很快！）

# c# - 当预订数量达到座位数时，如何在此 GridView 中显示事件已关闭？

> ID：11948358
> 
> 赞同：1
> 
> 时间：2012-08-14T08:17:49.950
> 
> 标签：c#, asp.net, gridview, sql-server-2008-r2

我是一名新的 ASP.NET 开发人员，我正在努力解决一个我不知道如何解决的奇怪问题。我正在开发一个基于 Web 的小型事件管理系统。这些事件将在 GridView 中列出。现在，我正在寻找一种方法来突出显示该事件或在它旁边放置一个符号，当预订数量达到该事件的座位数时，它会显示（关闭）。怎么做？

我有以下数据库设计：

```
Events Table: ID, Title, Description, Location, StartDateTime, EndDateTime, NumberOfSeats, IsActive
BookingDetails Table: BookingID, EventID, NetworkID 
```

*（IsActive 是一个标志，显示事件是否仍处于活动状态或变为非活动状态）*

我的 ASP.NET 代码：

```
<asp:GridView ID="ListOfAvailableEvents_GrivView" runat="server" AutoGenerateColumns="False"
                    DataKeyNames="ID" CellPadding="4" DataSourceID="SqlDataSource1" ForeColor="#333333"
                    GridLines="None" AllowPaging="True" PageSize="10">
                    <Columns>
                        <asp:TemplateField HeaderText="Title">
                            <ItemTemplate>
                                <asp:LinkButton ID="lnkTitle" runat="server" Text='<%# Eval("Title") %>' OnClick="lnkTitle_Click"></asp:LinkButton>
                            </ItemTemplate>
                        </asp:TemplateField>
                        <asp:BoundField DataField="Description" HeaderText="Description" SortExpression="Description" />
                        <asp:BoundField DataField="Location" HeaderText="Location" SortExpression="Location" />
                        <asp:BoundField DataField="StartDateTime" HeaderText="Start Date & Time" SortExpression="StartDateTime" />
                        <asp:BoundField DataField="EndDateTime" HeaderText="End Date & Time" SortExpression="EndDateTime" />
                    </Columns>
                </asp:GridView>
<asp:SqlDataSource ID="SqlDataSource1" runat="server" ConnectionString="<%$ ConnectionStrings:PM_RegistrationSysDBConnectionString %>"
                    SelectCommand="SELECT     ID, Title, Description, Location, StartDateTime, EndDateTime
                            FROM         dbo.Events
                            WHERE     (IsActive = 1)
                            ORDER BY ID DESC"></asp:SqlDataSource> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T08:27:13.740

我只需将 CSS 类字段与 IsActive 属性和 CSS 样式绑定以呈现信息。

```
<asp:TemplateField HeaderText="Status">
     <ItemTemplate>
          <asp:LinkButton ID="lnkStatus" runat="server" CssClass='status<%# Eval("IsActive")%>'></asp:LinkButton>
      </ItemTemplate>
 </asp:TemplateField> 
```

CSS：

```
.statusTrue { background: green; }

.statusFalse { background: red; } 
```

# eclipse - 在 OS X 中编译的 java 文件的位置

> ID：11948366
> 
> 赞同：0
> 
> 时间：2012-08-14T08:18:08.907
> 
> 标签：eclipse, macos, google-app-engine

我正在使用带有 Google App Engine SDK 的 Eclipse Juno 版本。

我正在尝试查找已编译的 java 文件的位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T08:26:15.687

将您的应用部署到 Google App Engine，然后查看日志以确定暂存目录。

> ------------ 部署前端 ------------
> 
> 准备部署：在以下位置创建暂存目录：'/var/folders/ws/jfsjfe34094fsfk_qy4l505353fs/T/appcfg2472932957495.tmp'

然后转到 eclipse，运行本地开发服务器，并确保您使用/访问了您想要查看的 JSP 页面。

然后转到`/var/folders/ws/jfsjfe34094fsfk_qy4l505353fs/T/`（此目录仅比之前创建的暂存目录高一级）。

您应该会看到类似于以下内容的目录：`Jetty_127_0_0_1_8888_war____.g1qk12`. 进入目录，再往下走，你应该会看到你编译的 JSP 文件！

# javascript - 用 jeditable 控制 textarea 的大小

> ID：11948371
> 
> 赞同：4
> 
> 时间：2012-08-14T08:18:22.767
> 
> 标签：javascript, jquery, css, html, textarea

**我的目标：**允许使用 jquery 插件 jeditable 对描述进行内联编辑。

**我的问题：** textarea 输入比原来的 div 大，导致滚动条出现。

**尝试的解决方案：**

```
$('.editableDescription').editable('http://jsfiddle.net/echo/jsonp/', {

id: 'data[Chantier][id]',
name: 'data[Chantier][Description]',
type: 'textarea',
height: $(".editableDescription").height() + "px",
width:  $(".editableDescription").width()+ "px",
onblur: 'submit',
tooltip: ''

});​ 
```

我尝试使用 jquery 获取包装器 div 的大小，但仍然失败！

**jsFiddle：**[jsFiddle](http://jsfiddle.net/FShmW/7/)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-14T09:18:23.573

首先，您需要从 中删除`height:250px;`，`.longtext`否则 Jeditable 会将其作为`<textarea>`.

然后我确保它`.longtext`具有与将嵌套在其中的相同的样式`<textarea>`，例如`line-height, font-size, font-family`.

而且我假设您的文档中可能会有不止一个`.longtext`，因此您需要将 different`heights`应用于 different `<textarea>s`。所以我改变了这个：

```
$('.editableDescription').editable('http://jsfiddle.net/echo/jsonp/',
{
        id        : 'data[Chantier][id]',
        name      : 'data[Chantier][Description]',
        type      : 'textarea',
        height:($(".editableDescription").height()) + "px",
        width: ($(".editableDescription").width()) + "px",
        onblur: 'submit',
        tooltip   : ''
}); 
```

对此：

```
$('.editableDescription').each(function()
{
    $(this).editable('http://jsfiddle.net/echo/jsonp/',
    {
        id:'data[Chantier][id]',
        name:'data[Chantier][Description]',
        type:'textarea',

        height:$(this).height()+'px',
        /* here it will take the height of the currently active .longtext */

        width:$(this).width()+'px',
        onblur:'submit',
        tooltip: ''
   });
}); 
```

**[演示](http://jsfiddle.net/FShmW/8/)**

基本上就是这样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T08:25:08.987

您可以尝试将 CSS 溢出属性设置为隐藏

# web-services - Delphi WSDL Import 不解析扩展派生的类型

> ID：11948375
> 
> 赞同：2
> 
> 时间：2012-08-14T08:18:47.757
> 
> 标签：web-services, delphi, soap, xsd, wsdl

使用 Delphi 2007 我正在尝试导入 wsdl 以供客户端使用。

我已经在 处导入了 WSDL `https://services.rdc.nl/voertuigscan/2.0/wsdl`，它导入了一个 xsd 来定义它的类型。在导入的xsd中，还有几个额外的导入和包含的xsd，其中定义了如下类型：

```
<xs:complexType name="BedragExtended">
  <xs:simpleContent>
    <xs:extension base="ct:Bedrag">
      <xs:attribute name="Bron" type="Bron"/>
    </xs:extension>
  </xs:simpleContent>
</xs:complexType> 
```

类型 ct:Bedrag 在包含的 XSD 中定义为：

```
<xs:simpleType name="Bedrag">
  <xs:restriction base="xs:decimal">
    <xs:totalDigits value="9"/>
    <xs:fractionDigits value="2"/>
  </xs:restriction>
</xs:simpleType> 
```

但是，BedragExtended 类型导入为：

```
// ************************************************************************ //
// XML       : BedragExtended, global, <complexType>
// Namespace : http://nsp.rdc.nl/RDC/voertuigscan
// ************************************************************************ //
BedragExtended = class(TRemotable)
private
  FBron: Bron;
  FBron_Specified: boolean;
  procedure SetBron(Index: Integer; const ABron: Bron);
  function  Bron_Specified(Index: Integer): boolean;
published
  property Bron: Bron  Index (IS_ATTR or IS_OPTN) read FBron write SetBron stored Bron_Specified;
end; 
```

如您所见，没有提及 Bedrag 类型的基础值，但 wsdl 导入生成的 .pas 文件顶部的标题显示正确的 xsd 已被解析。如何让 Delphi 正确生成 BedragExtended 类型？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T15:59:28.730

在所有语言中看到这种行为是相当典型的（至少我知道）。简单类型通常不映射到类。唯一值得注意的例外是使用枚举方面的简单类型，在这种情况下，您可能会获得类型安全的枚举（Java 和 .NET）。

这在某种程度上是意料之中的，因为`BedragExtended`它是一个带有属性的字符串。不幸的是，在 XSD 1.0 中，您不能同时进行扩展（设置属性）和限制（限制词法空间），因此这种实现很常见，它是一种复杂类型（获取属性）但内容很简单（基本上是某种文本）。

# javascript - Phonegap 应用程序错误 - 连接到服务器不成功

> ID：11948378
> 
> 赞同：1
> 
> 时间：2012-08-14T08:18:50.107
> 
> 标签：javascript, jquery, cordova

我有以下问题，我对 Phonegap 有点陌生！在我的索引页面上，我有三个函数，它们将创建一个 Javascript 提示，询问用户的姓名、电子邮件和标题（职位），并将每个函数存储到 localStorage。像这样的三个项目：

```
function promptName(){
  var salesPName = prompt("Bitte geben Sie Ihren Namen","");
  if(salesPName == null || salesPName == ""){
    promptName()
  }else{
    localStorage.setItem("salesP", salesPName);
  }
} 
```

然后使用`$(document).ready`我调用这三个函数：

```
$(document).ready(function(){
  if(!localStorage.getItem("salesP")){
    promptName();
    promptEmail();
    promptPosition();
  }
}); 
```

这一切都运行良好，但是当部署到我的 Android 设备时，我会收到提示，但在完成所有三个操作之前，我会收到一个错误对话框，说明：

> 与服务器的连接不成功（file:///android_asset/www/appname/index.html）

删除提示会删除错误，但我需要此功能。我尝试了不同的调用函数的方法，例如在`body`标签的`onload`事件上或使用`.load()`. 我仍然收到此错误。我考虑过设置一个 Javascript 间隔以在几秒钟后（一旦加载页面）调用它，因为我确信问题是由于 Javascript 的阻塞性质造成的。有没有人遇到过这个？

请注意，我在文件中添加了以下内容`com.mypackage.xxx.java`（根据 [phonegap 的建议，连接到服务器不成功](https://stackoverflow.com/questions/6550889/phonegap-connection-to-server-unsuccessful)）

```
super.setIntegerProperty("loadUrlTimeoutValue", 10000); 
```

我仍然遇到问题！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T08:44:54.057

在没有任何工作的`setTimeout()` 情况下，我像这样围绕着我的状况...

```
$(document).ready(function(){

        setTimeout(function (){if(!localStorage.getItem("salesP")){
            // item doesn't exist... so let's raise some dialogs to capture the name, email address and title
            promptName();
            promptEmail();
            promptPosition();
            }
        }, 5000)

}); 
```

现在它工作正常......有点软糖但是那又怎样，如果有人对更好的解决方案有任何想法或对此有任何反对意见，请告诉我

# python - 一次迭代两个大数组

> ID：11948387
> 
> 赞同：3
> 
> 时间：2012-08-14T08:19:22.237
> 
> 标签：python, performance, loops

我必须遍历两个 1000x1000 大的数组。我已经将分辨率降低到 100x100 以加快迭代速度，但 ONE 阵列仍然需要大约 15 分钟！因此，我尝试同时对两者进行迭代，为此我发现了这一点：

```
for index, (x,y) in ndenumerate(izip(x_array,y_array)): 
```

但后来我得到了错误：

```
ValueError: too many values to unpack 
```

这是我完整的python代码：我希望你能帮助我更快地完成这个，因为这是我的硕士论文，最后我必须运行它大约100次......

```
area_length=11
d_circle=(area_length-1)/2

xdis_new=xdis.copy()
ydis_new=ydis.copy()
ie,je=xdis_new.shape

while (np.isnan(np.sum(xdis_new))) and (np.isnan(np.sum(ydis_new))):
xdis_interpolated=xdis_new.copy()
ydis_interpolated=ydis_new.copy()
# itx=np.nditer(xdis_new,flags=['multi_index'])
# for x in itx:
    # print 'next x and y'
for index, (x,y) in ndenumerate(izip(xdis_new,ydis_new)):
    if np.isnan(x):
        print 'index',index[0],index[1]
        print 'interpolate'
        # define indizes of interpolation area
        i1=index[0]-(area_length-1)/2
        if i1<0:
            i1=0
        i2=index[0]+((area_length+1)/2)
        if i2>ie:
            i2=ie
        j1=index[1]-(area_length-1)/2
        if j1<0:
            j1=0
        j2=index[1]+((area_length+1)/2)
        if j2>je:
            j2=je
        # -->
        print 'i1',i1,'','i2',i2
        print 'j1',j1,'','j2',j2

        area_values=xdis_new[i1:i2,j1:j2]
        print area_values

        b=area_values[~np.isnan(area_values)]

        if len(b)>=((area_length-1)/2)*4:

            xi,yi=meshgrid(arange(len(area_values[0,:])),arange(len(area_values[:,0])))

            weight=zeros((len(area_values[0,:]),len(area_values[:,0])))
            d=zeros((len(area_values[0,:]),len(area_values[:,0])))
            weight_fac=zeros((len(area_values[0,:]),len(area_values[:,0])))
            weighted_area=zeros((len(area_values[0,:]),len(area_values[:,0])))

            d=sqrt((xi-xi[(area_length-1)/2,(area_length-1)/2])*(xi-xi[(area_length-1)/2,(area_length-1)/2])+(yi-yi[(area_length-1)/2,(area_length-1)/2])*(yi-yi[(area_length-1)/2,(area_length-1)/2]))
            weight=1/d
            weight[where(d==0)]=0
            weight[where(d>d_circle)]=0
            weight[where(np.isnan(area_values))]=0

            weight_sum=np.sum(weight.flatten())
            weight_fac=weight/weight_sum
            weighted_area=area_values*weight_fac

            print 'weight'
            print weight_fac
            print 'values'
            print area_values
            print 'weighted'
            print weighted_area

            m=nansum(weighted_area)
            xdis_interpolated[index]=m
            print 'm',m

        else:
            print 'insufficient elements'

    if np.isnan(y):
        print 'index',index[0],index[1]
        print 'interpolate'
        # define indizes of interpolation area
        i1=index[0]-(area_length-1)/2
        if i1<0:
            i1=0
        i2=index[0]+((area_length+1)/2)
        if i2>ie:
            i2=ie
        j1=index[1]-(area_length-1)/2
        if j1<0:
            j1=0
        j2=index[1]+((area_length+1)/2)
        if j2>je:
            j2=je
        # -->
        print 'i1',i1,'','i2',i2
        print 'j1',j1,'','j2',j2

        area_values=ydis_new[i1:i2,j1:j2]
        print area_values

        b=area_values[~np.isnan(area_values)]

        if len(b)>=((area_length-1)/2)*4:

            xi,yi=meshgrid(arange(len(area_values[0,:])),arange(len(area_values[:,0])))

            weight=zeros((len(area_values[0,:]),len(area_values[:,0])))
            d=zeros((len(area_values[0,:]),len(area_values[:,0])))
            weight_fac=zeros((len(area_values[0,:]),len(area_values[:,0])))
            weighted_area=zeros((len(area_values[0,:]),len(area_values[:,0])))

            d=sqrt((xi-xi[(area_length-1)/2,(area_length-1)/2])*(xi-xi[(area_length-1)/2,(area_length-1)/2])+(yi-yi[(area_length-1)/2,(area_length-1)/2])*(yi-yi[(area_length-1)/2,(area_length-1)/2]))
            weight=1/d
            weight[where(d==0)]=0
            weight[where(d>d_circle)]=0
            weight[where(np.isnan(area_values))]=0

            weight_sum=np.sum(weight.flatten())
            weight_fac=weight/weight_sum
            weighted_area=area_values*weight_fac

            print 'weight'
            print weight_fac
            print 'values'
            print area_values
            print 'weighted'
            print weighted_area

            m=nansum(weighted_area)
            ydis_interpolated[index]=m
            print 'm',m

        else:
            print 'insufficient elements'

    else:
        print 'no need to interpolate'

xdis_new=xdis_interpolated
ydis_new=ydis_interpolated 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T08:43:06.133

一些忠告：

*   分析您的代码以查看最慢的部分。它可能不是迭代，而是每次都需要完成的计算。
*   尽可能减少函数调用。Python 中的函数调用不是免费的。
*   将最慢的部分重写为 C 扩展，然后在 Python 代码中调用该 C 函数（请参阅[扩展和嵌入 Python 解释器](http://docs.python.org/extending/)）。
*   [这个页面](http://wiki.python.org/moin/PythonSpeed/PerformanceTips/)也有一些很好的建议。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T09:11:31.700

您特别要求在一个循环中迭代两个数组。这是一种方法

```
l1 = ["abc", "def", "hi"]
l2 = ["ghi", "jkl", "lst"]
for f,s in zip(l1,l2):
    print "%s : %s" %(f,s) 
```

以上是python 3，python 2可以用izip

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T09:02:20.733

您可以将其用作`for`循环：

`for index, x in ndenumerate((x_array,y_array)):`

但这对你没有多大帮助，因为你的电脑不能同时做两件事。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T09:09:17.930

分析绝对是确定所有时间实际花在哪里的良好开端。

我通常使用该`cProfile`模块，因为它需要最少的开销并为我提供了足够多的信息。

```
import cProfile
import pstats
cProfile.run('main()', "ProfileData.txt", 'tottime')
p = pstats.Stats('ProfileData.txt')   
p.sort_stats('cumulative').print_stats(100) 
```

在您的示例中，您必须将代码包装到一个`main()`函数中，以便能够在文件的最后使用此代码段。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-14T09:00:53.597

评论 #1：您不想`ndenumerate`在`izip`迭代器上使用，因为它会输出迭代器，这不是您想要的。

评论#2：

```
i1=index[0]-(area_length-1)/2
if i1<0:
    i1=0 
```

可以简化`i1 = min(index[0]-(area_length-1)/2, 0)`，并且您可以将您的存储`(area_length+/-1)/2`在特定变量中。

想法#1：尝试迭代数组的平面版本，即使用类似的东西

```
for (i, (x, y)) in enumerate(izip(xdis_new.flat,ydis_new.flat)): 
```

您可以通过 获取原始索引`divmod(i, xdis_new.shape[-1])`，因为您应该首先按行进行迭代。

想法#2：只在 上迭代`nans`，即用 索引你的数组`np.isnan(xdis_new)|np.isnan(ydis_new)`，这可以为你节省一些迭代

**编辑#1**

*   您可能不需要在循环中初始化`d`,`weight_fac`和`weighted_area`单独计算它们。

*   您`weight[where(d>0)]`可以简化为`weight[d>0]`

*   你需要`weight_fac`吗？您不能只计算`weight`然后将其标准化吗？那应该可以为您节省一些临时数组。

# erlang - Erlang：在没有主管的情况下编写应用程序可以吗？

> ID：11948392
> 
> 赞同：3
> 
> 时间：2012-08-14T08:19:53.070
> 
> 标签：erlang

对于我开发的某些特定应用程序，我不需要主管。**不**使用一个可以吗？

医生说`start/2`那个

> “应该返回 {ok,Pid} 或 {ok,Pid,State} 其中 Pid 是最高监督的 pid”

所以我不确定不启动主管并返回一些无效的pid是否可以（我试过了，没有发生任何不好的事情）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-14T13:19:01.573

`{ok, self()}`在您开始进行版本升级之前，返回一个或类似的东西可以正常工作。此时，您需要使用具有空子列表的主管。（`application`and`supervisor`行为没有冲突的回调函数，所以你可以把它们放在同一个模块中。）

`start`只是为了确保：您正在应用程序模块的回调函数中进行某种初始化，对吗？如果没有，您可以`mod`从文件中删除指令，`.app`甚至不会调用回调，因此不会有监督者，无论是真的还是假的。

# android - android：地图上一些标记的质量很差

> ID：11948398
> 
> 赞同：0
> 
> 时间：2012-08-14T08:20:18.110
> 
> 标签：android, android-mapview, markers

我在标记上遇到了一些麻烦`mapview`。我在每个可绘制文件夹（`ldpi`, `mdpi`, ）中有 3 个图像（png `hdpi`）。我初始化一次标记可绘制。
我有字段`private Drawable drawable;`，所以我在任何地方都使用它：

```
restaurantsOverlay = new SimpleItemizedOverlay(drawable, mapView);
...
restaurantsOverlay.addOverlay(overlayItem);
...
mapOverlays.add(restaurantsOverlay); 
```

我还在`draw`我的班级中覆盖了隐藏默认阴影的方法

```
@Override
    public boolean draw(Canvas canvas, MapView mapView, boolean shadow, long when)
    {
        super.draw(canvas, mapView, false);
        return true;
    } 
```

但是一些标记质量很差，而另一些则很好。我能理解为什么。

![在此处输入图像描述](../Images/0ee3ffedbfe88e932ff974e05204d4a1.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T08:30:55.047

我以前也发生过类似的事情。在您提供的图片上，您可以看到丑陋的标记具有完全黑色的阴影。发生这种情况是因为在另一个之上有多个标记。在我的情况下，这是因为我有一个循环在地图中多次放置标记。

在您的情况下，我必须查看代码，但我确信 99% 的情况就是这个问题。

# silverlight - 查找点击了哪个按钮

> ID：11948400
> 
> 赞同：0
> 
> 时间：2012-08-14T08:20:38.407
> 
> 标签：silverlight, buttonclick, windows-phone-7.1.1

在我的 Windows Phone 应用程序中，我在一页中有一个 LoadMore 按钮。loadmore 按钮`style`在 `<phone:PhoneApplicationPage.Resources>`章节中定义。我在该页面中有 2 个列表框，并且两个列表框使用相同的样式。当我单击 loadmore 按钮时，如何识别 Listbox 引发事件的 LoadMore 按钮？

```
<phone:PhoneApplicationPage.Resources>
        <Style x:Key="ListBoxStyle" TargetType="ListBox">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="Foreground" Value="{StaticResource PhoneForegroundBrush}"/>
            <Setter Property="ScrollViewer.HorizontalScrollBarVisibility" Value="Disabled"/>
            <Setter Property="ScrollViewer.VerticalScrollBarVisibility" Value="Visible"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="BorderBrush" Value="Transparent"/>
            <Setter Property="Padding" Value="0"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="ListBox">
                        <ScrollViewer x:Name="ScrollViewer">
                            <StackPanel>
                                <ItemsPresenter/>
                                    <Button Content="Load More..." Name="btnLoadMore" Visibility="Visible" Background="White" Foreground="#FF176DDC" Click="btnLoadMore_Click"></Button>
                            </StackPanel>
                        </ScrollViewer>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </phone:PhoneApplicationPage.Resources> 
```

如何找到单击列表框的按钮？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T11:04:52.343

在我看来，以一种风格拥有这种功能是错误的方法。尝试将`ListBox`and`Button`放入 a`UserControl`中，它本身会公开一个用于加载更多数据的事件。然后在内部处理`Click`按钮的 -event 并引发`UserControl`'s `LoadMore`-event。

# c# - Outlook 加载项属性错误

> ID：11948407
> 
> 赞同：4
> 
> 时间：2012-08-14T08:21:30.677
> 
> 标签：c#, outlook, vsto, outlook-addin

我正在尝试获取电子邮件的**SMTP 地址**，并且我编写了代码以避免获取 x.500 地址。`PropertyAccessor.GetProperty(PR_SMTP_ADDRESS)`我通过访问where获得 SMTP 地址`PR_SMTP_ADDRESS = @"http://schemas.microsoft.com/mapi/proptag/0x39FE001E"`；

但是，这适用于某些笔记本电脑，而有些则给出错误提示

> “属性[http://schemas.microsoft.com/mapi/proptag/0x39FE001E](http://schemas.microsoft.com/mapi/proptag/0x39FE001E)未知或找不到。”

知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T13:32:03.937

如果您需要**SMTP 地址**[`Outlook.Recipient`](http://msdn.microsoft.com/en-us/library/office/ff867569.aspx)，您可以从 X.500创建一个并将其解析[`Recipient.AddressEntry`](http://msdn.microsoft.com/en-us/library/office/ff863677.aspx)为[`Outlook.ExchangeUser`](http://msdn.microsoft.com/en-us/library/office/ff866281.aspx).

```
string address = string.Empty;
Outlook.Recipient recipient = mailItem.Application.Session.CreateRecipient(mailItem.SenderEmailAddress);
if (recipient != null && recipient.Resolve() && recipient.AddressEntry != null) 
{
    Outlook.ExchangeUser exUser = recipient.AddressEntry.GetExchangeUser();
    if (exUser != null && !string.IsNullOrEmpty(exUser.PrimarySmtpAddress))
      address = exUser.PrimarySmtpAddress;
} 
```

您收到的错误`PR_SMTP_ADDRESS`表明邮件属性中不存在 MIME 属性，您需要另一种方法来确定发件人的 SMTP 地址。您不能假设 MIME 属性将始终存在。

# vb.net - 有没有办法让我的 VB.NET 程序执行某种“垂死的呼吸”动作？

> ID：11948412
> 
> 赞同：1
> 
> 时间：2012-08-14T08:22:04.497
> 
> 标签：vb.net, events, exception, error-handling, fatal-error

是否有可能在发生致命错误时触发某种全局操作/事件？如果发生致命或未处理的异常会导致程序关闭或崩溃。这样的事情可能吗？

如果这很重要，我正在使用 VS2010 在 VB.NET v4 中编程。此外，我的应用程序的所有用户都将作为管理员进行身份验证（如果这很重要？）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T08:27:52.453

这取决于您正在编写什么样的应用程序，但这些可能会有所帮助：

*   [`Application.ApplicationExit`](http://msdn.microsoft.com/en-us/library/system.windows.forms.application.applicationexit.aspx)
*   [`Application.ThreadException`](http://msdn.microsoft.com/en-us/library/system.windows.forms.application.threadexception.aspx)
*   [`AppDomain.UnhandledException`](http://msdn.microsoft.com/en-us/library/system.appdomain.unhandledexception.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T08:27:45.453

是的，有[AppDomain.UnhandledException Event](http://msdn.microsoft.com/en-us/library/system.appdomain.unhandledexception.aspx#Y0)。不，您不需要任何权限即可使用它。

# python - 模块在对象内部不可用（错误：“功能”对象没有属性“选择”）

> ID：11948416
> 
> 赞同：1
> 
> 时间：2012-08-14T08:22:26.700
> 
> 标签：python, scope

我有一个非常奇怪的问题，我不明白。我正在扩展[pwman3](https://github.com/oz123/pwman3)，并使用模块选择。[我将它导入到ui.py](https://github.com/oz123/pwman3/blob/test/pwman/ui/cli.py)文件的顶部。

但是，当我运行代码时，出现以下错误：

> 错误：“函数”对象没有属性“选择”

相关代码为：

```
import select

...snip...

class PwmanCli(cmd.Cmd):
...snip ...

    def print_node(self, node):
        width = str(_defaultwidth)
        print "Node %d." % (node.get_id())
        print ("%"+width+"s %s") % (typeset("Username:", ANSI.Red),
                                    node.get_username())
        print ("%"+width+"s %s") % (typeset("Password:", ANSI.Red),
                                    node.get_password())
        print ("%"+width+"s %s") % (typeset("Url:", ANSI.Red),
                                    node.get_url())
        print ("%"+width+"s %s") % (typeset("Notes:", ANSI.Red),
                                    node.get_notes())
        print typeset("Tags: ", ANSI.Red),
        for t in node.get_tags():
            print "%s " % t.get_name(),
        print

        def heardEnter():
            #import select # this fixes the problem ...
            i,o,e = select.select([sys.stdin],[],[],0.0001)
            for s in i:
                if s == sys.stdin:
                   input = sys.stdin.readline()
                        return True
                return False

        def waituntil_enter(somepredicate,timeout, period=0.25):
            mustend = time.time() + timeout
            while time.time() < mustend:
                  if somepredicate():
                     break
                  time.sleep(period)
                  self.do_cls('')
        print "Type Enter to flush screen (autoflash in 5 sec.)"
        waituntil_enter(heardEnter(), 5) 
```

如果我`import select`在函数内部做，`heardEnter`一切正常。但我仍然想知道是什么导致了这种行为。
很高兴听到一些专家的声音。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T08:41:15.497

可能名称之间有冲突，尝试将import语句更改为`from select import select`

# objective-c - glReadPixels -> NSData -> 保存图像

> ID：11948417
> 
> 赞同：1
> 
> 时间：2012-08-14T08:22:29.163
> 
> 标签：objective-c, opengl, save, writetofile

我创建了 NSBitmapImageRep 女巫，我用 glReadPixels 信息填充。它看起来像这样：

```
 NSBitmapImageRep *imageRep = [[NSBitmapImageRep alloc] initWithBitmapDataPlanes:NULL pixelsWide:width pixelsHigh:height bitsPerSample:8 samplesPerPixel:3 hasAlpha:NO isPlanar:NO colorSpaceName:NSDeviceRGBColorSpace bytesPerRow:3 * width bitsPerPixel:0];
    glReadPixels(0, 0, width, height, GL_RGB, GL_UNSIGNED_BYTE, [imageRep bitmapData]); 
```

然后将其转换为 NSData 并写入文件。但我得到颠倒的图像。我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T15:30:45.370

画成一个翻转的`NSImage`. 这会将倒置的图像绘制到正确的方向。然后，您可以获得 tiff 表示，您可以使用另一个with将`NSImage`其更改为其他图像类型。使用新的图像表示来制作一个新对象，并将新对象保存到文件中。`NSBitmapImageRep``imageRepWithData:``NSData``representationUsingType:properties:``NSData`

```
 NSRect rect = self.bounds;
    NSSize size = rect.size;
    GLsizei width = (GLsizei)size.width;
    GLsizei height = (GLsizei)size.height;
    NSBitmapImageRep* imgRep = [[NSBitmapImageRep alloc] initWithBitmapDataPlanes:NULL pixelsWide:width pixelsHigh:height bitsPerSample:8 samplesPerPixel:3 hasAlpha:NO isPlanar:NO colorSpaceName:NSDeviceRGBColorSpace bytesPerRow:width*3 bitsPerPixel:0];
    glReadPixels(0, 0, width, height, GL_RGB, GL_UNSIGNED_BYTE, [imgRep bitmapData]);
#ifdef __MAC_10_8
    NSImage* image = [NSImage imageWithSize:size flipped:YES drawingHandler:^(NSRect dstRect){
        return [imgRep drawInRect:dstRect];
    }];
#else
    NSImage* image = [[NSImage alloc] initWithSize:size];
    [image lockFocusFlipped:YES];
    [imgRep drawInRect:rect];
    [image unlockFocus];
#endif
    NSData* tiff = [image TIFFRepresentation]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T17:15:25.430

bytesPerRow 应该是`(width*3+3)&~3`

# android - Eclipse中android xml布局的横向预览

> ID：11948418
> 
> 赞同：4
> 
> 时间：2012-08-14T08:22:34.357
> 
> 标签：android, eclipse, adt, screen-orientation

在 Eclipse（ADT 插件）中，有一个简洁的功能可以以图形形式预览 xml 布局。我`android:screenOrientation="landscape"`为我的设置，`Activity`我认为它会以这种方式显示。但预览似乎仅锁定为纵向。有没有办法改变它？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-14T08:31:24.673

顶部有一个栏，可让您自定义预览。设备、方向等

![在此处输入图像描述](../Images/e33250020daeeff370e599fac0cde1f0.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-14T08:26:18.220

在上面的菜单中，您可以选择翻转方向，那里有横向模式

# java - Blogger JSON API 添加帖子

> ID：11948420
> 
> 赞同：2
> 
> 时间：2012-08-14T08:22:38.903
> 
> 标签：java, android, api, request, blogger

我想使用 Blogger API 将帖子添加到我的博客。我成功获得了使用 Blogger API 的权利，并在 Google API 控制台中激活了它们。我使用[本](https://developers.google.com/google-apps/tasks/oauth-and-tasks-on-android#account)教程来获取 access_token。我发现[了这个问题](https://stackoverflow.com/questions/8067467/how-often-do-google-auth-tokens-expire-on-android-or-how-not-to-bother-grandm)，所以在请求之前我获得了新的 request_token。

当我第一次请求添加帖子时，我收到了错误：**401 "message": "Invalid Credentials", "location": "Authorization"**。

当我第二次请求使用新令牌添加帖子时，出现错误：**403“消息”：“超出每日限制。请注册”**

我的请求代码是：

```
final JSONObject obj = new JSONObject();
obj.put("id", mUserID);

final JSONObject requestBody = new JSONObject();
requestBody.put("kind", "blogger#post");
requestBody.put("blog", obj);
requestBody.put("title", msg[0]);
requestBody.put("content", msg[0] + " " + msg[1]);

final HttpPost request = new HttpPost("https://www.googleapis.com/blogger/v3/blogs/" +   mUserID + "/posts");
request.addHeader("Authorization", "Bearer " + mToken);
request.addHeader("Content-Type", "application/json");
request.setEntity(new StringEntity(requestBody.toString()));
final HttpResponse response = mHttpClient.execute(request);

final HttpEntity ent = response.getEntity();
Log.i(SocialPoster.LOG, EntityUtils.toString(ent));
ent.consumeContent(); 
```

**UPDATE** 找到解决方案：只需在请求的 URL 中添加“？key={MY_API_KEY}”即可解决问题

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T08:35:49.400

您链接的教程网站状态

> “API Key 是强制性的，因为它标识了您的应用程序，因此允许 API 扣除配额并使用为您的项目定义的配额规则。您需要在 Tasks 服务对象上指定 API Key。”

```
useTasksAPI(String accessToken) {
  // Setting up the Tasks API Service
  HttpTransport transport = AndroidHttp.newCompatibleTransport();
  AccessProtectedResource accessProtectedResource = new GoogleAccessProtectedResource(accessToken);
  Tasks service = new Tasks(transport, accessProtectedResource, new JacksonFactory());
  service.accessKey = INSERT_YOUR_API_KEY;
  service.setApplicationName("Google-TasksSample/1.0");

  // TODO: now use the service to query the Tasks API
} 
```

在我看来，您缺少 API 密钥、错误地使用它、将其错误地放置在代码中或以错误的方式将其提供给服务。

我没有查看这里的代码，但这是 Google 的示例代码，用于您尝试执行的操作。[使用此代码](http://code.google.com/p/google-api-java-client/source/browse/tasks-android-sample/src/main/java/com/google/api/services/samples/tasks/android/TasksSample.java?repo=samples)测试您的 API 密钥。

# database - 数据库设计方法

> ID：11948422
> 
> 赞同：0
> 
> 时间：2012-08-14T08:22:46.373
> 
> 标签：database, database-design, yii

我必须为网站上的 3 种类型的用户配置文件设计一个数据库。它们是个人资料中每个用户可能填写或不填写的各种字段。示例：联系电话字段（数量为 3）、提供的服务字段（数量为 10）、认证 (6)。用户可以不填写任何字段或填写所有字段。什么是更好的方法：

1）制作固定数量的列，例如 :contactnumber1 , contactnumber2 , contactnumber3 。允许 user 的空白条目。

2）或者制作一个单独的表格联系号码，将每个条目映射到一个用户 id 。这意味着同一个用户 id 有多个条目。这将确保没有一列是空白的。但是，为了显示信息，我必须同时遍历多个“索引”表（~8-9），返回结果并发布相同的结果。

在第一种方法中，我必须使用较少数量的表，但很多用户很有可能将他们的记录留空。

我在 PHP-YII 框架中构建。考虑性能和可扩展性作为标准的最佳方法是什么？

还是他们这样做的另一种方式？

# java - Netweaver/Java Web 服务和 .NET 消费者之间的二进制序列化

> ID：11948428
> 
> 赞同：0
> 
> 时间：2012-08-14T08:23:07.150
> 
> 标签：java, .net, web-services, abap

我正在进行一个通过 Netweaver / Java（我认为是 7.01 SP3）将 ABAP 功能公开为 Web 服务的项目。我们在 .NET 4 UI 层上使用它。我们正在处理一些大型消息结构（12MB 序列化 XML），它们在各个层之间穿梭需要花费太多秒数。

我们正在多个方面解决这种性能问题：

*   磁盘、网络、CPU 和内存都很好，而且还远未饱和。
*   我们正在努力试用 WCF 流模式
*   我们可以在 Web 服务的服务器上尝试 gzip 压缩
*   最后，这个问题的重点：有没有办法启用可互操作的二进制序列化？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T16:38:16.527

假设您已经尝试了所有方法来减小有效负载大小并将其拆分为更小的部分（12 MB XML，真的！），我会说这取决于您在 ABAP 端需要的 XML 处理类型。您可以尝试实现自己的 ICF HTTP 处理程序并使用一些 REST 样式的接口。如果您真的想要传输二进制数据（例如，您从存档系统检索的一些文档），这将特别有趣，因为您可以通过 HTTP 传输文档而不会出现 XML-binary-ugliness。即使您必须使用填充 WSDL-y Web 服务，您也可以尝试从该接口重构二进制部分，只需通过 Web 服务发送一些 (GU)ID 并让客户端从您的自定义 ICF 处理程序中获取二进制部分.

# jquery - Jquery slideToggle透明度问题

> ID：11948438
> 
> 赞同：0
> 
> 时间：2012-08-14T08:23:43.393
> 
> 标签：jquery, opacity, slidetoggle

我正在使用 jquery slideToggle 在我的页面中拉下一个面板。问题是我无法在滑动中设置透明度“关闭”或（不透明度 1），这使得它与背景内容混合并弄乱了。我不希望我的下拉面板有任何透明度。我如何做到这一点。

这是我的代码，

```
$("#breakdown").click(function(){
   $("#breakdown_panel").slideToggle("slow");
}); 
```

其中 #breakdown 是一个按钮，而 #breakdown_panel 是一个 div 元素。

这是CSS

```
#breakdown_panel {
    position:absolute;
    margin-top:-6px;
    color: white;
    background: rgba(71,71,71, 1);
    height: 200px;
    display: none;
    width: 400px;
    filter: alpha(opacity=100);
    opacity: 1;
} 
```

这是有问题的重叠的图像。 [http://i50.tinypic.com/35i4w79.jpg](http://i50.tinypic.com/35i4w79.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T08:39:09.980

```
$("#breakdown").click(function(){

    $("#breakdown_panel").animate({
        opacity:1,
        height: 'toggle'
      }, 2000, function() {
        // Animation complete.
      });
}); 
```

也许有人有一个最简单的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T08:33:13.100

我不确定这是否可行，但试一试。

```
$("#breakdown_panel").toggle("slide") 
```

或者

```
$("#breakdown_panel").toggle("blind") 
```

# java - Confluence API：如何找出页面使用了哪些 css/js 资源？

> ID：11948442
> 
> 赞同：0
> 
> 时间：2012-08-14T08:23:58.263
> 
> 标签：java, confluence

我们有一个可以导出 Confluence 空间的内部插件。空间 css 文件已包含在内，但这远未完成。我浏览了 Confluence API，但找不到任何可以告诉我页面（包括宏）需要正确呈现的资源。基本上我需要一些能让我为 css 和 js 重现以下内容的东西：

```
<!-- include system css resources -->

<link type="text/css" rel="stylesheet" href="/s/en_GB/3277/32/34/_/download/superbatch/css/batch.css" media="all">
<!--[if lt IE 9]>
<link type="text/css" rel="stylesheet" href="/s/en_GB/3277/32/34/_/download/superbatch/css/batch.css?conditionalComment=lt+IE+9" media="all">
<![endif]-->
<!--[if IE 9]>
<link type="text/css" rel="stylesheet" href="/s/en_GB/3277/32/34/_/download/superbatch/css/batch.css?conditionalComment=IE+9" media="all">
<![endif]-->
<!--[if lte IE 9]>
<link type="text/css" rel="stylesheet" href="/s/en_GB/3277/32/34/_/download/superbatch/css/batch.css?conditionalComment=lte+IE+9" media="all">
<![endif]-->
<link type="text/css" rel="stylesheet" href="/s/en_GB/3277/32/34/_/download/superbatch/css/batch.css?media=print" media="print">
<!--[if lt IE 9]>
<link type="text/css" rel="stylesheet" href="/s/en_GB/3277/32/4e59e07231dd67576ce6f003b6a8095e/_/download/contextbatch/css/page/batch.css?conditionalComment=lt+IE+9" media="all">
<![endif]-->
<link type="text/css" rel="stylesheet" href="/s/en_GB/3277/32/4e59e07231dd67576ce6f003b6a8095e/_/download/contextbatch/css/page/batch.css" media="all">
<link type="text/css" rel="stylesheet" href="/s/en_GB/3277/32/75877fb710740f0fb2358dd832691580/_/download/contextbatch/css/plugin.quick.comment.pre/batch.css" media="all">
<!--[if lt IE 9]>
<link type="text/css" rel="stylesheet" href="/s/en_GB/3277/32/767f156fe1e9f3d7a21cf551551d1dd8/_/download/contextbatch/css/viewcontent,main/batch.css?conditionalComment=lt+IE+9" media="all">
<![endif]-->
<link type="text/css" rel="stylesheet" href="/s/en_GB/3277/32/767f156fe1e9f3d7a21cf551551d1dd8/_/download/contextbatch/css/viewcontent,main/batch.css" media="all">
<link type="text/css" rel="stylesheet" href="/s/en_GB/3277/32/62d979954d4d69b0a4870d806bfe4e43/_/download/contextbatch/css/atl.general/batch.css" media="all">
<link type="text/css" rel="stylesheet" href="/s/en_GB/3277/32/1.3.4-SNAPSHOT/_/download/batch/com.jfb.confluence.plugins.latex:styles/com.jfb.confluence.plugins.latex:styles.css" media="all">
<link type="text/css" rel="stylesheet" href="/s/en_GB/3277/32/1.0-SNAPSHOT/_/download/batch/com.jfb.confluence.plugins.numcapt:styles/com.jfb.confluence.plugins.numcapt:styles.css" media="all">
<link type="text/css" rel="stylesheet" href="/s/en_GB/3277/32/2.0.2/_/download/batch/com.atlassian.confluence.plugins.pagetree:pagetree-resources/com.atlassian.confluence.plugins.pagetree:pagetree-resources.css" media="all">
<link type="text/css" rel="stylesheet" href="/s/en_GB/3277/32/5/_/styles/colors.css?spaceKey=HELP" media="all">
<link type="text/css" rel="stylesheet" href="/s/en_GB/3277/32/4.2.1/_/download/resources/com.atlassian.confluence.plugins.doctheme:documentation/default-theme.css" media="all">
<link type="text/css" rel="stylesheet" href="/s/en_GB/3277/32/4.2.1/_/download/resources/com.atlassian.confluence.plugins.doctheme:documentation/splitter.css" media="all">

<!-- end system css resources --> 
```

有任何想法吗？这一定是可能的！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T19:09:43.063

看看[这个](http://www.adaptavist.com/display/Plugins/Theme+Builder)插件。它被称为 Theme Builder，如果没记错的话，它实际上是 Confluence 在他们的文档中推荐的。我帮助为我的公司设置了 Confluence，我真的很想试一试，但没有时间。我可以将它描述为 Confluence 的 IDE。与任何其他 IDE 一样，它有助于很好地组织您的文件，并且它还包括一个 GUI，使您可以更轻松地设置不同页面的样式，因此您不必每次都手动输入。

我不想听起来像商业广告，他们在他们的网站上（在我给你的地址）上有一个两分钟的视频，基本上是通过他们的主要功能的一个小幻灯片，并且在举例说明它的作用方面做得更好比以往任何时候都可以。我建议您跳到 0:48 秒，因为这是功能幻灯片开始的地方 - 在此之前是通过他们一些更臭名昭著的客户的快速幻灯片。

祝你好运！:)

PS主题生成器是免费的！

# ios - 使用 MFMessageComposeViewController 发送短信后 UITextField 光标消失

> ID：11948446
> 
> 赞同：0
> 
> 时间：2012-08-14T08:24:20.690
> 
> 标签：ios, uitextfield, mfmessagecomposeview

如果用户使用 MFMessageComposeViewController 在我的应用程序中发送 SMS，则 UITextFields 的光标消失了。

有没有办法防止这种情况或至少将光标带回来？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T07:51:23.073

它与在 MFMessageComposeViewController 的已完成委托方法上显示 UIAlertView 有关。尽管我在关闭模式视图后显示 UIAlertView，但它导致了该错误。

删除 UIAlertView 解决了这个问题。现在我正在考虑设计我自己的警报弹出窗口并显示它而不是默认的 UIAlertView。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-25T19:10:52.373

我有一个类似的问题。当登录失败时，有一个登录屏幕显示 UIAlertView。关闭警报视图后，光标从用户名和密码字段中消失了。我通过在情节提要上重新创建相同的视图控制器和视图层次结构来解决此问题。

故事板最初是在 Xcode 4 中创建的，后来转换为 Xcode 5。也许 Xcode 搞砸了。

# javascript - 如何使用 javascript / jQuery 对箭头键导航进行单元测试

> ID：11948449
> 
> 赞同：0
> 
> 时间：2012-08-14T08:24:27.027
> 
> 标签：javascript, jquery, unit-testing, keyboard-events

我们正在开发几个小部件，并且要求我们必须支持键盘导航（可访问性）。我们已经为规范添加了键盘导航，一切都很好，但我们还想使用单元测试来测试它是否有效。

我们尝试过的是对其进行测试

*   selenium，但 selenium 似乎不记录箭头键
*   busterJS，使用线程[Simulate left and right arrow key event with javascript](https://stackoverflow.com/questions/5516600/simulate-left-and-right-arrow-key-event-with-javascript)中给出的解决方案。但是在这里我们得到不同的异常，表明我们正在做一些非法的事情。
*   使用 jQuery trigger() 触发事件，结果与上一次尝试相同。

我可以理解，使用键代码触发键盘事件可能被浏览器制造商视为危险，因此被禁止（如果这是这里的核心问题）。如果确实如此，是否可以在 IE10、Chrome 或 Firefox 中设置一些选项来启用触发事件的可能性？

欢迎任何意见，我也可能在这里寻找完全错误的方向，所以如果您对如何在 javascript 中对键盘导航进行单元测试有一些想法，请随时赐教:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T12:05:37.210

好吧，一些解决方案出现了，

1.  “当用户说什么都没有改变时，假设他在撒谎”这句老话再次被证明是真实的。我在[“使用 javascript 模拟左右箭头键事件”](https://stackoverflow.com/questions/5516600/simulate-left-and-right-arrow-key-event-with-javascript)线程中重新测试了该解决方案，并**完全**按照那里描述的解决方案进行操作（IE10 除外）。

    为了让它在 IE10 中工作，我需要在解决方案中切换 if 测试的顺序，因为 IE10 显然只支持 document.createEvent()，即使 document.createEventObject 的计算结果为 true。

2.  I also found a solution for [Selenium](http://seleniumhq.org/).
    Even though selenium does not record the arrow key navigation, you can specify a keyDown command, set an element locator as your target and the escaped keyCode as your value (\37 = left, \38 = up, \39 = right, \40 = down)
    How to specify selenium element locators is described in the [Selenium documentation](http://release.seleniumhq.org/selenium-remote-control/0.9.2/doc/dotnet/Selenium.html)

For both solutions to work, you need to attach the elements you want to use for your test to the DOM.

# php - 不使用 scandir() 或 readdir 映射文件系统

> ID：11948454
> 
> 赞同：1
> 
> 时间：2012-08-14T08:24:50.870
> 
> 标签：php, windows, iis, filesystems

我有各种我想使用 PHP 映射的文件夹和文件。将它们存储在数据库中并不是真正的选择，它们必须存储在 Windows 文件系统中。

不幸的是，由于驱动器的限制（它是一个网络驱动器）。我无法使用 scandir() 和 set_include_path()，因为我收到“open_basedir 限制生效”错误消息。我无法解决这个问题，因为我无法访问允许我在安全属性中添加 IIS_IUSR 的安全权限。我应该补充一点，作为普通用户，我对驱动器上的所有内容具有完全的读/写访问权限。

我需要一个在 PHP 要求时运行的工具，而不是按计划运行的工具。

我考虑过的一种方法是使用用 C# 编写的服务，并在需要时让 PHP 调用它。我只是不确定将它们粘合在一起的方法。

如果有人对如何做到这一点有任何更好的建议，请说。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T08:32:42.240

如果您对可以遍历的路径有限制（例如 open_basedir），则无法读取该目录之外的内容，因此您必须改用“外部”内容。由于您使用的是 Windows，而我在该操作系统上几乎没有经验，因此我会选择最简单的解决方案：只需调用“dir”程序。我认为这可能有效，但不幸的是，我无法对其进行测试：

```
<?php
$output = `dir /s C:\directory\to\traverse`;

var_dump( $output ); 
```

# mysql - INDEX Mysql 的字符串

> ID：11948457
> 
> 赞同：1
> 
> 时间：2012-08-14T08:24:55.620
> 
> 标签：mysql, database, indexing, full-text-search

我有一个包含超过五百万条记录的大型数据库，这个数据库有三个字段（ID、名称、文本），该字段`ID`有一个主键，该字段`name`有一个`FULLTEXT`索引。

我想为我的网站创建一个在字段中搜索的搜索引擎`name`，我使用`FULLTEXT`索引但缺点是不接受少于四个字符的关键字，所以我决定删除它并`INDEX KEY`在字段上放一个`name`并使用以下内容要求：

```
EXPLAIN SELECT * FROM table WHERE locate ('search', name) > 0; 
```

问题是这个应用程序没有使用索引 KEY 字段名称，但是这个请求：

```
EXPLAIN SELECT name FROM table WHERE locate ('search', name) > 0; 
```

使用`INDEX KEY`，不知道为什么当我选择所有字段时 MYSQL 不使用索引。

在您看来如何解决这个问题，如果可能的话，一个更好的选择。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T08:32:39.090

您可以在 mysql 配置中设置全文索引的最小字符数。我现在不在我的电脑上找一个例子，但是这个页面可能会对你有所帮助：http: [//dev.mysql.com/doc/refman/5.1/en/fulltext-fine-tuning.html](http://dev.mysql.com/doc/refman/5.1/en/fulltext-fine-tuning.html)

更新：

回到我的电脑。所以关于mysql为什么会在`SELECT name FROM table WHERE locate ('search', name) > 0;`语句上使用索引就很简单了。当您在名称字段上创建索引时，索引包含实际名称字段，即名称字段的值，因此当您仅选择名称字段时，mysql 可以进行搜索并从索引中检索所需的所有数据。因此，在这种情况下，mysql 必须执行一项操作来检索与索引中的搜索值匹配的数据并返回它们。

然而`SELECT name FROM table WHERE locate ('search', name) > 0;`，也需要其他数据字段。由于只有名称字段的值存储在索引中，mysql 将不得不读取索引然后读取表来检索其他字段。所以在这种情况下，mysql必须匹配索引中的值，然后在表上找到值，然后返回它们。这意味着 mysql 必须执行 2 次操作，与之前的场景相比，这是两倍的工作量。

由于 500 万行仍然非常小，因此 mysql 循环遍历表并检索行可能更快。当您添加更多行时，一旦循环遍历表的成本高于读取索引然后查找表上的值的成本，mysql 可能会开始使用索引。

希望这是有道理的。

# sql-server-2008 - 无法从 SQL Server 2008 调用 RICHTEXT.RichtextCtrl（在 Windows 2008 Server x64 上）

> ID：11948461
> 
> 赞同：0
> 
> 时间：2012-08-14T08:25:09.887
> 
> 标签：sql-server-2008, tsql, activex, richtextbox, 64-bit

我想在我的 SQL-Server 中使用休闲功能：

```
CREATE FUNCTION RTF2TXT(@in varchar(8000)) RETURNS  varchar(8000) AS 
BEGIN

DECLARE @object int
DECLARE @hr int
DECLARE @out varchar(8000)

-- Create an object that points to the SQL Server
EXEC @hr = sp_OACreate 'RICHTEXT.RichtextCtrl', @object OUT
EXEC @hr = sp_OASetProperty @object, 'TextRTF', @in
EXEC @hr = sp_OAGetProperty @object, 'Text', @out OUT
EXEC @hr = sp_OADestroy @object
RETURN @out

END
GO 
```

问题是，我总是从函数中得到 NULL。它无法创建 RICHTEXT.RichtextCtrl-Object。我认为，问题在于，这是一个 x64 服务器。有人知道我该如何解决这个问题吗？

我已经成功完成了：

```
sp_configure 'show advanced options', 1
GO
RECONFIGURE
GO
sp_configure 'Ole Automation Procedures', 1
GO
RECONFIGURE WITH OVERRIDE
GO 
```

启用 OLE。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T08:28:33.877

我以前使用 CLR 存储过程做过类似的事情。这是您的选择吗？

# groovy - 带有 groovy 的 DSL -> 将值传递给 metaClass 方法

> ID：11948474
> 
> 赞同：2
> 
> 时间：2012-08-14T08:26:07.317
> 
> 标签：groovy, dsl

我正在尝试为某些特定任务编写迷你 DSL。为此，我一直在尝试解决如下问题（不使用括号）：

```
give me 5 like romanLetter    
give me 5 like word 
```

其中第一行将返回“V”，第二行将返回“五”

我对第一部分的定义*给了我 5*看起来像这样

```
def give = { clos -> clos() } 
def me = { clos ->  [:].withDefault { it 
                println it} 
         } 
```

然后*给我 5*张照片 5

问题是如何在右侧添加更多元类方法。例如

```
give me 5 like romanLetter -> prints V OR 
give me 5 like word -> prints five 
```

我的直觉是我将*like*定义为

```
Object.metaClass.like = {orth -> if (orth.equals("roman")){ println "V"} 
                                 else {println "five"} } 
```

这个 metaClass 方法*只有*在左侧有一个返回值要应用时才有效，对吧？我尝试在左侧的所有闭包中添加一个 return 语句，但我总是收到

```
groovy.lang.MissingPropertyException: No such property: like 
for class: com.ontotext.paces.rules.FERulesScriptTest ... 
```

你知道我该怎么做吗？

=========================================

这是我所要求的应用程序。我想制定如下规则

```
add FEATURE of X opts A,B,C named Y 
```

其中*add*是闭包，*of，opts*和*named*是 MetaClass 方法（至少我是这么想的），*X，A，B，C，Y*是最有可能是字符串的参数，而*FEATURE*是 MetaClass 属性，或者是没有的闭包参数或带参数的闭包。

如果*FEATURE*不带参数，那么*add*将*FEATURE*作为参数并返回一个值就足够了

Object.metaClass.of 将使用参数 X 执行

Object.metaClass.opts 将在带有参数 A、B、C 的 OF 值返回时执行

Object.metaClass.named 将在 opts 返回的带有参数 Y 的值上执行

*这些元类方法中的每一个都将其参数设置为映射中的值，在调用命名*时将其传递给 JAVA 方法。

我不确定这是解决此类问题的最佳解决方案，但目前在我看来是这样。问题是，如果 FEATURE 本身不是一个属性，而是一个带有参数的闭包（例如 feature1 ARG1）。然后

```
add feature1 ARG1 of X opts A,B,C named Y 
```

这就是我坚持的情况。*add feature1 ARG1*是*给我 5*部分，我正在尝试将其余部分添加到其中。

==================================================== ======

示例：我需要同时具备以下两项工作：

```
add contextFeature "text" of 1,2,3 opts "upperCase" named "TO_UPPER"
add length named "LENGTH" 
```

在第一种情况下，通过解析规则，每当调用*opts、named*的每个元类方法时，我都会在以下映射中填写相应的值：

```
params = [feature: "text",
        of: 1,2,3,
        opts: "upperCase",
        named: "TO_UPPER"] 
```

*填充这张地图的那些，在解析命名*时发生，我调用一个java方法setFeature（params.of，params.named，params.opts，params.feature）

在第二种情况下，长度预定义为长度 =“长度”，参数值将仅

```
params = [feature : length, 
    of: null,
    opts: null,
    named: "LENGTH"] 
```

由于 of 为 null，将调用另一个 java 方法，即 addSurfaceFeature(params.feature, params.named)。第二种情况或多或少是直截了当的，但第一种是我无法管理的。

提前致谢！Ⅳ

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T10:21:28.827

你可以做这种事情......这会让你接近吗？

```
def contextFeature( type ) {
  "FEATURE_$type"
}

// Testing

new IvitaParser().parse {
  a = add text of 1,2,3 opts "upperCase" named "TO_UPPER"
  b = add length named "LENGTH"
  c = add contextFeature( "text" ) of 1,2,3 opts "upperCase" named "TO_UPPER"
}

assert a == [feature:'text', of:[1, 2, 3], opts:'upperCase', named:'TO_UPPER']
assert b == [feature:'length', of:null, opts:null, named:'LENGTH']
assert c == [feature:'FEATURE_text', of:[1, 2, 3], opts:'upperCase', named:'TO_UPPER']

// Implementation

class IvitaParser {
  Map result

  def parse( Closure c ) {
    c.delegate = this
    c.resolveMethod = Closure.DELEGATE_FIRST
    c()
  }

  def propertyMissing( String name ) {
    name
  }

  def add( String param ) {
    result = [ feature:param, of:null, opts:null, named:null ]
    this
  }

  def of( Object... values ) {
    result.of = values
    this
  }

  def named( String name ) {
    result.named = name
    result
  }

  def opts( String opt ) {
    result.opts = opt
    this
  }
} 
```

你甚至可以去掉定义中的引号：

```
a = add text of 1,2,3 opts upperCase named TO_UPPER
b = add length named LENGTH 
```

由于 propertyMissing 方法只是将未知属性转换为其名称的字符串

# iphone - 如何在 UIWebView 应用程序上显示 Admob？

> ID：11948475
> 
> 赞同：0
> 
> 时间：2012-08-14T08:26:08.877
> 
> 标签：iphone, ios5, xcode4, uiwebview, admob

我之前曾尝试在基于 TabbarView 的应用程序上显示 Admobs 广告。但是当我尝试在基于 UIWebView 的应用程序上实现相同的功能时，事情似乎无法正常工作。

我试图在里面添加代码，`-(void)viewDidLoad`但应用程序崩溃了。

我在应用程序中使用的方法包括：

*   `(void) viewDidAppear:(BOOL)animated`
*   `(void) viewDidDisappear:(BOOL)animated`
*   `(void) loading`

我应该在哪里实现它以在我的应用程序中查看？

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T09:16:10.443

在从 XIB 初始化 viewController 之后，您可以在 application:didFinishLaunchingWithOptions: 方法的末尾将 admob 的横幅视图添加到窗口。

```
GADBannerView *bannerView;
bannerView = [[[GADBannerView alloc] initWithFrame:CGRectMake(0, 0, 320, 50)] autorelease];
bannerView.adUnitID = @"YOUR_ADMOB_ID";
bannerView.rootViewController = self.viewController; 
[self.window addSubview:bannerView];
[bannerView loadRequest:[GADRequest request]]; 
```

这样，admob 横幅将始终位于屏幕顶部。

# ruby-on-rails - 关系 => 通过多态路径？

> ID：11948485
> 
> 赞同：1
> 
> 时间：2012-08-14T08:26:42.203
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1

我的模型是：

```
class City < ActiveRecord::Base
  belongs_to :region
  has_many  :activities
  has_many  :restaurants
end

class Activity < ActiveRecord::Base
    belongs_to :city
end 
```

我想要访问所有城市的所有活动。从上一个关于stackoverflow的问题中，我读到我不能这样做@cities.activities，而是我做了以下事情：

通过关联添加 has_many 到 Region

```
class Region < ActiveRecord::Base
  has_many :activities, :through => :cities
end

@activities = @region.activities.find_all_by_homepage_city(true) 
```

但是当我调用变量@activities 时使用多态路径。

```
- @activities.each do |b|
              %li 
                =link_to b.name, polymorphic_path([@region, @city, b]) 
```

我收到消息 "not method for region_activity_path" 。这是正确的，因为没有资源：资源之后的活动：区域

```
resources :regions do 
  resources :cities do
  resources :activities 
```

我可以在区域之后添加活动资源，但我的网址不正确。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T11:44:46.370

有一个约定，除非严格需要，否则在生成路线时不应超过 2 个级别。

我建议你`choose simple route for activity`而不是 3 级路线:)

如果你还需要的话——

```
rake routes | grep activi

region_city_activities GET      /regions/:region_id/cities/:city_id/activities(.:format)          {:action=>"index", :controller=>"activities"}
                           POST     /regions/:region_id/cities/:city_id/activities(.:format)          {:action=>"create", :controller=>"activities"}
  new_region_city_activity GET      /regions/:region_id/cities/:city_id/activities/new(.:format)      {:action=>"new", :controller=>"activities"}
 edit_region_city_activity GET      /regions/:region_id/cities/:city_id/activities/:id/edit(.:format) {:action=>"edit", :controller=>"activities"}
      region_city_activity GET      /regions/:region_id/cities/:city_id/activities/:id(.:format)      {:action=>"show", :controller=>"activities"}
                           PUT      /regions/:region_id/cities/:city_id/activities/:id(.:format)      {:action=>"update", :controller=>"activities"}
                           DELETE   /regions/:region_id/cities/:city_id/activities/:id(.:format)      {:action=>"destroy", :controller=>"activities"}

rails c

-> app.polymorphic_path([Region.last, City.first, Activity.last])
 => "/regions/28/cities/1/activities/12"
-> app.polymorphic_path([Region.last, City.first, Activity.new])
 => "/regions/28/cities/1/activities" 
```

# java - 上次调用方法时如何节省时间

> ID：11948486
> 
> 赞同：1
> 
> 时间：2012-08-14T08:26:44.097
> 
> 标签：java, android

如何节省调用某个方法的时间。如果我创建一个公历，然后使用`long variable =calendar.getTimeInMillis()`此变量保存时间，则继续运行。如何解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T08:33:26.670

采用 ：

```
long t1 = System.currentTimeMillis(); 
```

# ajax - PlayFramework 严格的路由和ajax

> ID：11948487
> 
> 赞同：1
> 
> 时间：2012-08-14T08:26:45.707
> 
> 标签：ajax, playframework-2.0

问题可能很明显，但我仍然找不到合适的解决方案。

让我们假设有一个控制器只有一种方法：

```
class MyController extends Controller {
    public static Result sum(int op1, int op2) {
        return ok(op1 + op2);
    }
} 
```

Routes 文件也很简单：

```
GET /sum    controllers.MyController.sum(op1: Integer, op2: Integer) 
```

好吧，现在我可以从模板调用：

```
@controllers.routes.MyController.sum(1, 2) 
```

这将被翻译成

```
localhost:9000/sum?op1=1&op2=2 
```

，或直接将此网址粘贴到浏览器中。这工作得很好。

但是当我决定使用 ajax 来做这件事时，一切都变糟了。我不是 js-guru，所以我使用 jQuery 编写小的（我认为很糟糕：）对象，它将 onClick 处理程序添加到按钮。这里是：

```
entityController.setSumURL = function(sumURL) {
    this.sumURL = sumURL;
}

entityController.bindSumButton = function(buttonId, op1, op2) {
    $.get(entityController.sumURL, {op1: op1, op2, op2}, function(){
        alert("Done!");
    });
} 
```

其中 entityController.sumURL 应该是 /sum 方法的 url。通常当我渲染页面视图时，我会写这样的东西：

```
@()
....
entityController.setSumURL("@controllers.routes.MyController.sum()")
.... 
```

但我不能这样做，因为 sum 方法具有强制参数，并且无法获取地址，因为绑定的 url 可以依赖传递给路由中定义的函数的参数。

所以问题是如何只从不带参数的 url 获取路径，或者如何重新组织整个过程以避免这种情况？

我的解决方案是从出现在路由中的函数中删除参数并直接从请求中查询它们，但是我的项目正在增长，有时很难理解哪些参数传递给方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T10:44:57.963

Check out the [zen tasks](https://github.com/playframework/Play20/tree/master/samples/java/zentasks) sample application.

In particular:

*   the [javascriptRoutes](https://github.com/playframework/Play20/blob/master/samples/java/zentasks/app/controllers/Application.java) method in the controller
*   the references to jsRoutes in the [coffeescript](https://github.com/playframework/Play20/blob/master/samples/java/zentasks/app/assets/javascripts/main.coffee)
*   the [routes](https://github.com/playframework/Play20/blob/master/samples/java/zentasks/conf/routes) config

You may want to compile this app and look at the output javascript rather than the coffeescript if you're not familiar with coffeescript.

Also, if you're reloading parts of the page using ajax, you may want to bind your jQuery using

```
$('.somePermanentContainer').on('click', 'selectorForClickable', function()...) 
```

otherwise you'll find it's no longer bound when that part of the DOM is reloaded.

# networking - 如何将远程服务器添加到我的网络？

> ID：11948489
> 
> 赞同：0
> 
> 时间：2012-08-14T08:26:57.573
> 
> 标签：networking, ip, virtual

我有几个虚拟机在网络**A**的服务器上运行。但是，我需要它们表现得好像它们是网络**B**的一部分（IP-s、主机名等）。最好的方法是什么？

编辑：用于虚拟化的 QEMU + KVM。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T08:31:44.847

我认为您需要查看[VPN 网络](http://en.wikipedia.org/wiki/Virtual_private_network)。然后，您可以联系您的服务器，就好像它们在同一个网络中一样。

# localization - 对动态构建的短语进行本地化的推荐模式是什么？

> ID：11948499
> 
> 赞同：1
> 
> 时间：2012-08-14T08:27:48.980
> 
> 标签：localization, globalization, phrase

给定一个基于参数动态构建的短语，其中存在或删除部分，有哪些可能的支持本地化的解决方案？例如，考虑以下两个带有粗体部分的短语，表示动态插入的部分：

*   狗被**发现**了，有**一个狗窝**，正在**追球**。
*   那条狗是**白色**的，正在**绕圈子跑**。

对于英语，这可以通过简单地连接短语部分来解决，或者可能在资源文件中包含一些可以根据参数选择的标记填充字符串。但是，一旦您需要针对其他语言进行本地化或拥有更多参数，这些解决方案将无法工作或很快变得丑陋。在上面的示例中，假设狗的外观是唯一始终存在的部分，则本地化资源实现可能包含以下资源字符串：

```
 AppearanceOnly:    The dog is %appearance%.
 ActivityOnly:      The dog is %appearance% and is %activity%.
 AssessoryOnly:     The dog is %appearance% and has %accessory%.
 AccessoryActivity: The dog is %appearance%, has %accessory% and is %activity%. 
```

虽然这可行，但所需的字符串数量会根据参数的数量呈指数增长。

一直在广泛寻找可能有助于我应对这一挑战的最佳实践。*我*找到的唯一解决方案是简单地改写短语——但你会失去自然的句子结构，我真的不想这样做：

*   狗：**斑点**、**狗窝**、**追球**

建议、链接、想法、示例或“你疯了，改写它！” 欢迎反馈:) 谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T09:03:16.877

最好的方法可能是将句子分成单独的句子，例如“The dog is spot”。这只狗有一个狗窝。狗在追球。” 这可能看起来很无聊，但如果你要替换除第一个之外的所有出现的“狗”，你就有一个严重的代词问题。在许多语言中，要使用的代词取决于它所指的名词。（即使在英语中，也不清楚狗是他、她还是它。）

分开的原因是不同的语言有不同的动词系统。例如，在俄语中，您不能真正将三个句子组合成一个句子，其中三个动词共享一个主语。（在俄语中，你不使用现在时的动词“to be”——相反，你只会说“Dog – spot”的等价物，并且没有对应于“to have”的动词——相反，你使用相当于“at dog doghouse”。芬兰语与“to have”类似。在“强制”本地化中，有时会使用对应于“拥有”或“拥有”的词来处理此类问题，但委婉地说，结果看起来很奇怪。）

此外，语言对主语、动词和宾语有不同的自然顺序。您最初的方法隐含地假设了 SVO 订单。您不应该假设正常的、未标记的词序总是以主题开头。而不是使用像“%subject% %copula% %appearance%”这样的句子模式（其中 %copula% 是英语中的“is”、“are”或“am”），您需要调用一个带有两个参数的函数，subject和外观，返回一个句子，它有一个依赖于语言的系词，或者没有系词，并且有一个由语言规则决定的词序。是的，它变得复杂；一旦你处理，生成语句的本地化变得相当复杂除了结构上非常相似的语言之外的任何东西。

# ios - 通知中的应用程序图标会出现一个红色图标

> ID：11948503
> 
> 赞同：0
> 
> 时间：2012-08-14T08:28:01.417
> 
> 标签：ios, ipad, uilocalnotification

我目前正在开发的应用程序允许用户设置提醒。

这在 iPad/iPad 模拟器上显示为通知。一切都很好，除了通知旁边的应用程序图标。它总是红色的，尽管我已经为应用程序图标提供了图像。

例如：在图像中，可以看到日历和提醒应用程序图标。我该如何做同样的事情。

![在此处输入图像描述](../Images/537c4029899404009632add85ab365a4.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T09:14:46.507

红色图标是 Apple 在其示例项目中使用的图标。您可能忘记更改捆绑包中的 Icon-Small-50 图像。这将解释这个红色图标如何只出现在通知中心。

# knockout.js - Knockoutjs 绑定到 Property vs Property()

> ID：11948511
> 
> 赞同：1
> 
> 时间：2012-08-14T08:28:47.340
> 
> 标签：knockout.js

我可以用两种不同的方式编写一个 knockoutjs 数据绑定表达式：

```
1\. <div data-bind="text: FirstName"></div>
2\. <div data-bind="text: FistName()"></div> 
```

请注意第二个示例中 FirstName 之后的两个括号。它们似乎都有效。有区别吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T08:42:14.027

它们是有区别的。

它们只有*在*`FirstName`是`ko.observable`. 如果它是一个普通值，则只有第一个变体有效。

可观察对象不直接保存其值。它是一个*提供*对值的访问的函数。因此必须*调用*它来获取值（即，严格正确的是`text: FistName()`）。

但是淘汰赛是有帮助的，并且可以预料到这一点。因此，如果您自己没有这样做，它将为您调用 observable。

对此负责的是辅助函数`ko.utils.unwrapObservable()`，它接受一个参数，确定它是可观察值还是普通值，并在两种情况下都返回其值。

Knockout 在您定义的每个绑定上都使用此函数，因此您自己调用 observable ( `text: FistName()`) 或让 knockout 在幕后执行 ( `text: FirstName`) 都没有关系。

* * *

**怪癖：**

Knockout 解析绑定表达式`<binding>: <expr>`并确定`<expr>`是简单标识符还是更复杂的标识符。

无论何时`<expr>`是一个简单的标识符——比如——`FirstName`敲除将`unwrapObservable()`自动应用，因为情况是明确的。

但无论何时`<expr>`更复杂——比如`'Dear ' + FirstName`——knockout 从表达式构造一个自定义函数。现在事情变得模棱两可，您需要自己调用可观察对象，如下所示`'Dear ' + FirstName()`：

比较：http: [//jsfiddle.net/Tomalak/cU4qw/](http://jsfiddle.net/Tomalak/cU4qw/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T08:36:58.040

我建议您阅读以下文章： [[关于 KnockoutJS 的 10 件事]](http://www.knockmeout.net/2011/06/10-things-to-know-about-knockoutjs-on.html)

引用文章：

> 大多数绑定将调用`ko.utils.unwrapObservable`传递给它的值，这将安全地返回可观察对象和不可观察对象的值。但是，在绑定中，如果您在表达式中使用可观察对象，则需要将其作为函数引用。同样，在代码中，您通常需要将 observables 引用为函数，除非您实际上想要传递 observable 本身（而不是值）。

```
<div data-bind="visible: someFlag">...</div>
<div data-bind="visible: !someFlag()">...</div> 
```

# android - 轻弹或抛球

> ID：11948515
> 
> 赞同：1
> 
> 时间：2012-08-14T08:29:08.277
> 
> 标签：android, flicker

我目前正在创建一个项目，允许用户拖动球并将球弹向球门（足球点球/篮球射击游戏）。我一直在寻找如何轻弹将创建轨迹甚至投掷的球进入用户想要的方向。

我修改了在下面路径上传的项目，但没有成功。我能够停止机器人的不断移动，在屏幕的任何部分拖动图像，但我无法创建另一个更改。

[http://obviam.net/index.php/moving-images-on-the-screen-with-androi/](http://obviam.net/index.php/moving-images-on-the-screen-with-androi/)

我需要一个类似于踢球或轻弹球或扔纸游戏的例子。

谢谢你。

# ios - Phonegap - 将联系人添加到 iPad - 空联系人

> ID：11948518
> 
> 赞同：1
> 
> 时间：2012-08-14T08:29:25.230
> 
> 标签：ios, cordova, ios-simulator

在 iPad 5.1 模拟器上，我正在尝试将联系人添加到电话簿，如下所示：

```
contact = navigator.contacts.create()
contact.displayName = "Plumber"
contact.save() 
```

联系人已保存，但为空联系人。我在这里做错了吗？

我们正在使用cordova-2.0.0。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T20:36:30.883

我必须做的是这样的事情......

```
 var contact = navigator.contacts.create();
    var fullName = new ContactName();

            fullName.givenName = "John";
            fullName.familyName = "Doe";
            fullName.formatted = "John Doe";
            contact.name = fullName;
    contact.save(); 
```

这应该允许您使用名称保存联系人。

[http://docs.phonegap.com/en/2.0.0/cordova_contacts_contacts.md.html#Contacts](http://docs.phonegap.com/en/2.0.0/cordova_contacts_contacts.md.html#Contacts)

如果您前往联系人对象部分，您可以找到更多关于添加联系人的示例。

# c# - Uri.IsWellFormedUriString 用于相对 Hashbang url 兼容性

> ID：11948523
> 
> 赞同：8
> 
> 时间：2012-08-14T08:29:52.857
> 
> 标签：c#, .net, ajax, uri, hashbang

在以下测试中，为什么（仅）最后一个测试失败？

```
 [Fact]
    public void IsWellFormedUriString_AbsolutNonHashTagUri_ReturnsTrue()
    {
        Assert.True(Uri.IsWellFormedUriString("http://www.RegularSite.org/Home", UriKind.Absolute));
    }

    [Fact]
    public void IsWellFormedUriString_RelativeNonHashTagUri_ReturnsTrue()
    {
        Assert.True(Uri.IsWellFormedUriString("Home", UriKind.Relative));
    }

    [Fact]
    public void IsWellFormedUriString_AbsolutHashTagUri_ReturnsTrue()
    {
        Assert.True(Uri.IsWellFormedUriString("http://www.w3.org/#!Home", UriKind.Absolute));
    }

    [Fact]
    public void IsWellFormedUriString_RelativeHashTagUri_ReturnsTrue()
    {
        // Fails!
        Assert.True(Uri.IsWellFormedUriString("#!Home", UriKind.Relative));
    } 
```

**如果在 Absolute 版本中`Uri`识别[Hashbangs](http://en.wikipedia.org/wiki/Shebang_%28Unix%29)`IsWellFormedUriString`，为什么在 Relative 版本中不识别？我错过了什么？**

注意：[这](https://stackoverflow.com/a/6107682/687857)没有帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-01T00:38:24.693

这不能像您期望的那样工作的原因是 hashbang 不是[URI Scheme](http://en.wikipedia.org/wiki/URI_scheme)的一部分。该方法期望 URI 格式的分层部分，并且哈希标记（以及随后的 hashbang）不是确定相对和绝对路径的分层部分的成员。

< > 是必填部分
[ ] 是可选部分

`<scheme name> : <hierarchical part> [ ? <query> ] [ # <fragment> ]`

作为绝对 URI 的示例；如果我没记错的话，查询会被忽略，其中包括片段和哈希标记

`http://domain.com/path/to/something/?query=1#fragment`

这里也为您提供更多信息。这都是来自MSDN描述的`Uri.IsWellFormedUriString()`方法

> 通过尝试使用字符串构造 URI 来指示字符串是否格式正确，并确保字符串不需要进一步转义。

评论：

> 默认情况下，该字符串被视为符合[RFC 2396](http://www.ietf.org/rfc/rfc2396.txt)和[RFC 2732](http://www.ietf.org/rfc/rfc2732.txt)格式。如果启用了国际资源标识符 (IRI) 或国际化域名 (IDN) 解析，则该字符串被视为符合[RFC 3986](http://www.ietf.org/rfc/rfc3986.txt)和[RFC 3987](http://www.ietf.org/rfc/rfc3987.txt)的格式正确。
> 
> 如果出现以下任一情况，则认为字符串格式不正确，导致方法返回 false
> 
> 以下是一些失败的例子：
> 
> [http://www.contoso.com/path???/file](http://www.contoso.com/path???/file) name
> 该字符串未正确转义。
> 
> c:\directory\filename
> 该字符串是一个绝对 Uri，表示一个隐式文件 Uri。
> 
> file://c:/directory/filename
> 该字符串是一个绝对 URI，路径前缺少斜杠。
> 
> http:\host/path/file
> 该字符串包含未转义的反斜杠，即使它们将被视为正斜杠
> 
> www.contoso.com/path/file
> 该字符串表示分层绝对 Uri，不包含“://”

# android - GPS 和 GPRS 是否在睡眠模式下部分锁定并被禁用？

> ID：11948524
> 
> 赞同：0
> 
> 时间：2012-08-14T08:29:57.107
> 
> 标签：android, gps, sleep, gprs

我找不到信息。当手机屏幕关闭时，Android系统是否会自动禁用GPS和GPRS（移动数据）并在睡眠模式下部分锁定？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T17:46:27.160

答案在这里：http: [//developer.android.com/reference/android/os/PowerManager.html](http://developer.android.com/reference/android/os/PowerManager.html)（参见描述标志的表格后的备注）：如果您持有部分唤醒锁，CPU 将保持开启，因此您能够接收 GPS 更新。它有效，我在 GPS 飞行记录应用程序中使用此功能。

# sql - 使用Ebean导入xx.sql文件执行

> ID：11948525
> 
> 赞同：1
> 
> 时间：2012-08-14T08:30:10.820
> 
> 标签：sql, playframework-2.0, ebean

有什么方法可以执行直接从 Ebean 中的 SQL 文件（xx.sql）读取的 SQL？

例如，如果我有一个包含多个 SQL 语句（文件中已写入值）的 SQL 文件，有没有办法使用 Ebean 来执行这个 SQL 文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T09:37:54.767

您至少有两个开箱即用的选项：

1.  播放[进化](http://www.playframework.org/documentation/2.0.2/Evolutions)旨在更新数据库模式，因此您也可以使用它们来插入初始数据（如果它们是平面的，并且不包含与尚未创建的对象的关系），MySQL 的示例进化：

    ```
    # --- !Ups
    INSERT INTO your_table (some_field) VALUES ('New value');

    # --- !Downs
    DELETE FROM your_table WHERE some_field = 'New value`; 
    ```

2.  使用 Global 对象并使用普通 Ebean 的方式插入初始数据：

    ```
    public void onStart(Application app) {
        if (YourModel.find.findRowCount() == 0) {
            YourModel newItem = new YourModel();
            newItem.someField = "New value";
            newItem.save();

            YourModel newItem2 = new YourModel();
            // etc.... 
        }
    } 
    ```

对于第二种方法，您可以检查如何使用[Zentask 示例的全局对象](https://github.com/playframework/Play20/blob/master/samples/java/zentasks/app/Global.java)读取包含初始数据的 YAML 文件（带有示例的文件放在`conf`目录中）

**编辑：**

仔细看[initial-data.yml](https://github.com/playframework/Play20/blob/master/samples/java/zentasks/conf/initial-data.yml)，任务和项目之间也有关系，所以它们是固定`id`值。所以你需要在你的 yaml 中做同样的事情：

```
projects:

    - !!models.Project
        id:         1
        name:       Play 2.0   
        folder:     Play framework

tasks:

    - !!models.Task
        title:      Fix the documentation
        done:       false
        folder:     Todo
        project:    !!models.Project
                        id: 1 
```

# entity-framework - 如何使用实体框架创建一些测试数据

> ID：11948526
> 
> 赞同：0
> 
> 时间：2012-08-14T08:30:11.260
> 
> 标签：entity-framework, entity-framework-4

我在 C# 中使用 EF 4 和 MVC，

当我的应用程序加载时，我想加载创建一些实体以添加到我的数据库中，那么使用 EF 添加 thsi 功能的最佳位置在哪里？`Global.asax`在开始应用程序？

类的合理命名约定是什么... BootStrap？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T09:37:15.523

如果您有现有数据库，则不应将初始化包含到您的应用程序中。如何在现有数据库中进行这项工作的唯一方法是在`Application_Start`. 初始化必须检查您要插入的每个实体是否存在，并且仅当实体不存在时才插入数据。因为您的数据库已经存在，所以每次重新启动应用程序时都必须运行初始化逻辑。为避免这种情况，您还需要数据库中的一些标志来标记初始化已经完成（插入的实体之一可以被视为“标志”，但前提是应用程序无法删除该实体）。

EF 通常仅在创建数据库或数据库迁移后播种数据。

编辑：如果您在测试数据库上创建测试数据，您应该对每次模型更改（或迁移）和自定义数据库初始化程序以播种数据时重新创建数据库感到满意。

# html - 如何防止链接搜索跨标签溢出？

> ID：11948528
> 
> 赞同：0
> 
> 时间：2012-08-14T08:30:15.327
> 
> 标签：html, regex, url

如何防止链接搜索跨标签溢出？

我有一个本地网站，其页面包含各种类的超链接，并且想知道如何防止搜索结果溢出多个标签。（我需要对特定链接类型的地址进行批量修改。）

例如，我的页面可能包含链接列表，例如

```
Best solution:<br>
<a href="aaa.html" class="xxx">AAA</a><br> but see also
<a href="bbb.html" class="yyy">BBB</a><br> and
<a href="ccc.html" class="zzz">CCC</a><br>. 
```

现在，当我尝试使用正则表达式搜索词在网站上仅搜索“zzz”类的链接时

```
<a href="+[].html" class="zzz"> 
```

我的结果包括长字符串，例如

`<a href="aaa.html" class="xxx">AAA</a><br> but see also <a href="bbb.html" class="yyy">BBB</a><br> and <a href="ccc.html" class="zzz>`

发生的事情是搜索引擎（Funduc Search & Replace，如果有帮助的话）找到`<a href=`第一个链接（aaa.html）的匹配类，第三个链接的匹配类（ccc.html），并包括其间的所有内容。

我必须使用什么表达式来确保只有具有正确类的文件的链接才会出现在搜索结果中？

例如，

```
<a href="ccc.html" class="zzz> 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T08:52:55.270

一次或多次出现的`+`修饰符在大多数正则表达式引擎中都渴望匹配。这意味着，`[a-z]+`意味着“尽可能多地匹配 a 或 b 或 ... 或 z”。

Perl 正则表达式引擎有一个特殊`+?`的惰性匹配修饰符，因此`[a-z]+?`意味着“尽可能少匹配 a..z”。

简单地说，您可以从“任何字符”中排除`"`,`>`以匹配：

```
[^">]+ 
```

正则表达式将如下所示：

```
<a href="([^">]+.html)" class="zzz"> 
```

更精确的 perl 版本：

```
<a\s+.*?\bhref\s*=\s*"(.+?\.html)"\s*class\s*=\s*"zzz".*?> 
```

这里`()`是捕获组。

我没有尝试过`Funduc Search and Replace for Windows`，希望它有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T08:45:24.277

使用 DOM 库（最好是支持 XPath 的库）而不是正则表达式。正则表达式不太适合处理 HTML。

# android - 在 Android SQLite 中处理日期的首选方式是什么？为什么？

> ID：11948529
> 
> 赞同：3
> 
> 时间：2012-08-14T08:30:30.740
> 
> 标签：android, sqlite, datetime, optimization

我知道关于这个主题还有另一个[类似的问题](https://stackoverflow.com/questions/7363112/best-way-to-work-with-dates-in-android-sqlite)，但我个人对接受的答案不满意，所以这个问题还要求解释以证明首选方法的合理性。接受的答案说“推荐的做法是使用文本字段在 SQL lite 中存储日期”，但这对我来说没有意义。我没有足够的知识来反驳更明确的答案，但我的理解是字符串使用更多的内存并且在计算上比整数更难处理。使用 Unix 时间戳（存储为整数）而不是文本来存储日期/时间不是更好吗？不是，与文本相比，使用 Unix 时间戳有什么缺点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T08:36:31.257

就我个人而言，我不会那么担心。我总是使用带有 unix 时间戳的整数，你是对的，它们会使用更少的内存。它们也很容易解释，但只能精确到秒，仅此而已。如果您需要更精确的东西（毫秒等），那么您需要发挥创造力。

但是存储为纯文本很好，SQLite 没有存储日期时间的功能，因此[http://www.sqlite.org/datatype3.html#datetime](http://www.sqlite.org/datatype3.html#datetime)建议的三个选项是`TEXT, REAL and INT`.

鉴于这些是他们实际告诉您存储日期和时间的方式，并且鉴于没有官方说法更可取，我不会太担心。选择你觉得舒服的和最适合你需要的。

# email - 我如何确保我的研究项目收到垃圾邮件？

> ID：11948531
> 
> 赞同：10
> 
> 时间：2012-08-14T08:30:37.513
> 
> 标签：email, spam

我正在处理的项目遇到一个不寻常的问题 - 我需要接收垃圾邮件。有谁知道如何进入垃圾邮件发送者的电子邮件列表？

出于好奇 - 我很想知道在电子邮件服务器上应用反向 dns 和 SPF 是否真的会阻止垃圾邮件和/或火腿，所以我编写了一个 smtp 服务器来检查它们。我只需要被垃圾邮件。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-14T08:39:55.637

在您喜欢的搜索引擎中搜索“输入电子邮件以赢取”并输入您的电子邮件。谁知道，除了收到垃圾邮件之外，您还可能赢得一些东西 :)

**编辑：** 还要确保您正在使用的邮件服务器尚未进行任何垃圾邮件过滤。我们公司的“公共”地址每天都会收到大量未经过滤的垃圾邮件。

想一想，您还可以设置一个虚拟网页，其中包含垃圾邮件的电子邮件地址，并使其被搜索引擎索引。这就是我们收到垃圾邮件的方式。虽然我们不是专门找的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-01T03:58:57.680

```
One way is to put your email address on as many forums as you can. Like this:

stevej@exegro.info
kjones@exegro.info
clane@exegro.info
nadav.kozlovsky@exegro.info
SKL@exegro.info
glenn@exegro.info
robn@exegro.info

Spammer are sure to pick this up. 
```

# iphone - ViewController 切换动画就像在 Path.app 中一样

> ID：11948535
> 
> 赞同：0
> 
> 时间：2012-08-14T08:30:52.520
> 
> 标签：iphone, ios, animation, path

有没有开源代码实现Path.app中出现的viewController切换动画？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T09:12:36.793

这里有一堆不同的供您查看 - [http://bitly.com/bundles/o_27ukkruo5l/1](http://bitly.com/bundles/o_27ukkruo5l/1)

我最近使用了 JASidePanel，效果很好。希望有帮助。

# c++ - 如何在 C++ 中将字符串转换为具有 6 位精度的双精度？

> ID：11948540
> 
> 赞同：0
> 
> 时间：2012-08-14T08:31:12.410
> 
> 标签：c++, floating-point, double, string-conversion

我想知道如何将字符串转换`"1234.123456"`为`double`or `float`。我需要至少 3 位精度（即小数点后 3 位，无论该点之前的位数如何）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-14T08:56:23.397

确切的值 1234.123456 不能以任何常用的机器浮点格式表示。您所能做的就是选择您需要的准确度并使用它。（在大多数现代机器上，`double`精度为 16 位。但这并不意味着所有 16 位值都可以精确表示。）

至于转换，只需执行转换任何类型的操作即可：

```
std::istringstream s( "1234.123456" );
double d;
s >> d; 
```

并阅读 [http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)。它将解释安全使用机器浮点所需了解的基本最低要求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T08:58:26.600

```
#include<stdlib.h> 

int main()
{
    double dnum = atof( "1234.123456" ) ;

    printf ( "%f\n" , dnum ) ;

    return 0 ;
} 
```

# android - SQLite填充的ListView中的Android onItemClicklistener，返回ClassCastException错误

> ID：11948541
> 
> 赞同：0
> 
> 时间：2012-08-14T08:31:12.930
> 
> 标签：android, sqlite, listview, classcastexception, onitemclicklistener

我已经被一个问题困扰了一天，但我仍然不知道该怎么做。我正在尝试在 Android 中制作一个 Google Maps 加油站查找器应用程序，我决定先制作，`ListView`然后再通过它`Latitude`和`Longitude`要绘制的值。

`ListView`我成功地用我的数据库中的数据填充了`SQLite`，但我似乎无法正确使用`OnItemClickListener`.

所以这是我的问题...

我似乎无法传递我单击的项目的`Latitude`和`Longitude`值。使用我当前的代码，每次单击某个项目时，应用程序都会关闭，LogCat 会给我一个`java.lang.ClassCastException : java.lang.Integer`在线站`stationList = (Station) list.getItemAtPosition(position);`（参见`OnItemClickListener`代码）。

任何人都可以帮我通过我的纬度和经度`ListView`吗？谢谢，麻烦您了。:)

NearGas活动

```
public class NearGasActivity extends Activity{

static final String KEY_NAME = "search"; // parent node
static final String KEY_ID = "id";
static final String KEY_STATNAME = "name";
static final String KEY_STATLOC = "location";
static final String KEY_LATITUDE = "latitude";
static final String KEY_LONGITUDE = "longitude";

LocationManager locationManager;
Location currentLocation = null;
GeoPoint currentPoint;

DatabaseHandler db = new DatabaseHandler(this);

double latPoint;
double lonPoint;

int currLatitude;

ListView list;
LazyAdapter adapter;

List<Station> listOfStations;

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.nearme);

    getLastLocation();
    areaList(currentLocation);

}

public void areaList(Location location) {

    listOfStations = db.getAllStations();

    int currLatitude = (int) (location.getLatitude() * 1e6);
    int currLongitude = (int) (location.getLongitude() * 1e6);

    double diffLat;
    double diffLon;

    ArrayList<HashMap<String, String>> searchList = new ArrayList<HashMap<String, String>>();

    for (Station b : listOfStations){

        if ( b.getStationLocationLat() != null || b.getStationLocationLon() != null ) {
            try {

            latPoint = Double.parseDouble(b.getStationLocationLat());
            lonPoint = Double.parseDouble(b.getStationLocationLon());

            } catch (NumberFormatException e) {

            }
        }

        diffLat = Math.abs(currLatitude - (latPoint * 1e6));
        diffLon = Math.abs(currLongitude - (lonPoint * 1e6));               

        /* 2000 measurement units. Made-up. */
        if (((diffLat) < 2000) && ((diffLon) < 2000)){

            HashMap<String, String> map = new HashMap<String, String>();

            map.put(KEY_ID, b.getStationCode());
            map.put(KEY_STATNAME, db.getGasByCode(b.getStationGasCode()).getName());
            map.put(KEY_STATLOC, b.getStationLocationDesc());
            map.put(KEY_LATITUDE, b.getStationLocationLat());
            map.put(KEY_LONGITUDE, b.getStationLocationLon());

            songsList.add(map);

        }

    }       

    list = (ListView)findViewById(R.id.list);

    adapter = new LazyAdapter(this, sList);        
    list.setAdapter(adapter);

    // Click event for single list row
    list.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {

            Station stationList = (Station) list.getItemAtPosition(position);

            double latitude = Double.parseDouble(stationList.getStationLocationLat());
            double longitude = Double.parseDouble(stationList.getStationLocationLon());

            Toast toast = Toast.makeText(NearGasActivity.this, "Test Message: " + lat, Toast.LENGTH_SHORT);
            toast.show();

        }
    });
} 
```

懒惰适配器

```
 public class LazyAdapter extends BaseAdapter {

private Activity activity;
private ArrayList<HashMap<String, String>> data;
private static LayoutInflater inflater=null;

public LazyAdapter(Activity a, ArrayList<HashMap<String, String>> d) {
    activity = a;
    data=d;
    inflater = (LayoutInflater)activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);

}

public int getCount() {
    return data.size();
}

public Object getItem(int position) {
    return position;
}

public long getItemId(int position) {
    return position;
}

public View getView(int position, View convertView, ViewGroup parent) {
    View vi=convertView;
    if(convertView==null)
        vi = inflater.inflate(R.layout.list_row, null);

    TextView name = (TextView)vi.findViewById(R.id.name); // station name
    TextView location = (TextView)vi.findViewById(R.id.location); // station location address
    TextView latitude = (TextView)vi.findViewById(R.id.latitude);
    TextView longitude = (TextView)vi.findViewById(R.id.longitude);

    HashMap<String, String> search = new HashMap<String, String>();
    search = data.get(position);

    // Setting all values in listview
    name.setText(search.get(NearGasActivity.KEY_STATNAME));
    location.setText(search.get(NearGasActivity.KEY_STATLOC));
    latitude.setText(search.get(NearGasActivity.KEY_LATITUDE));
    longitude.setText(search.get(NearGasActivity.KEY_LONGITUDE));

    return vi;
   }
  } 
```

提前致谢。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T08:56:36.877

更改

```
Station stationList = (Station) list.getItemAtPosition(position); 
```

和

```
LazyAdapter la = (LazyAdapter) list.getAdapter();
Station stationlist = (Station) la.getItemAtPosition(position); // *Convert HashMap to Station 
```

*并且您必须从 HashMap 转换为 Station。如果您分享您的 Station 课程，我可以提供帮助。

最后，在您的 LazyAdapter 类中，您必须像这样添加 getItemAtPosition(int position) 方法：

```
public HashMap getItemAtPostion(int position){
     return data.get(position);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T13:41:26.773

在您的适配器中，我发现以下内容：

```
public Object getItem(int position) {
    return position;
} 
```

此方法应在提供的位置返回实际`Station`对象，而不是它的位置。

强制转换异常是因为您的方法返回一个 int ，运行时无法将其强制转换为`Station`对象。

所以，这里是你需要做的：

1-将实施更改`getItem(int position)`为：

```
public Station getItem(int position) {
    HashMap station_data = data.get(position);
    Station s = new Station(station_data);
    return s;
} 
```

2- 在`Station`接受`HashMap<String,String>`.

# java - 在 android 的活动中使用服务

> ID：11948544
> 
> 赞同：1
> 
> 时间：2012-08-14T08:31:20.523
> 
> 标签：java, android, service, android-activity

是否可以在活动中创建服务（能够访问所有按钮、文本视图、功能等）而不创建单独的服务文件？我尝试了这样的事情，但它没有启动该服务。基本上，我有一个在活动上运行的应用程序，现在我希望它在后台运行，但不想花费太多工作来修复代码。

编辑：这是我从放置服务而不是活动中得到的 logcat 错误消息。

```
08-14 10:00:25.076: V/Tagging(3122): On Create
08-14 10:00:25.076: V/Tagging(3122): Service Starting
08-14 10:00:25.086: D/ActivityManager(1580): isSketcherDisabledInCurrentTask():false, ActivityRecord{4109a2a0 com.jimmyc.summer.wificollection/.WiFiLocationApp}
08-14 10:00:25.086: W/ActivityManager(1580): Unable to start service Intent { cmp=com.jimmyc.summer.wificollection/.WiFiLocationApp$MyService }: not found 
```

像这样的东西。。

```
public class mainActivity extends Activity {

  onCreate(){
    Intent intent = new Intent(this, HelloService.class);
    startService(intent);
  }

  public class HelloService extends Service {

    onCreate(){
    }

    onStartCommand(){
    }

  }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T08:36:36.353

是的，这是可能的。您只需要在清单中注册您的服务

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T08:44:07.787

是的，有可能。

您需要做的就是将 由 执行的代码移动`activity`到`service`并以您在`onCreate`.

该服务应该在一个单独的类中，该类从 android 清单扩展 Service。此服务也应在清单中提及。

您也可以通过这种方式将按钮添加到服务中，并让它们执行服务中的功能。因此，您可以在后台运行服务，并在控制该服务的 Activity 中使用 UI。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T04:25:01.180

我最终将活动绑定到班级，这成功了。

# sql - 如何选择此示例中未使用的代码

> ID：11948549
> 
> 赞同：0
> 
> 时间：2012-08-14T08:31:39.277
> 
> 标签：sql, sql-server, sql-server-2008, select

我在数据库的表中有一个`int`列。`SQL`我在这张表中保留了一些代码。对于我的代码的示例范围是：(1, 9)。
我不需要在这个范围内使用代码。

示例：
使用的代码是：

```
Select code from MyTable  -- result is 2,6,7,8,9 
```

未使用的代码是：1,3,4,5

现在，我该如何选择此代码？预期结果是：`1,3,4,5`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T08:33:45.310

为您的范围生成一个数字列表（这里我使用`VALUES`子句），然后半加入“使用”列表

```
SELECT
    *
FROM
   (VALUES (1), (2), (3), (4), (5), (6), (7), (8), (9)) X (Num)
WHERE
   NOT EXISTS (SELECT * FROM MyTable M WHERE M.Code = X.Num) 
```

编辑：

您可以用任何数字表生成代码替换 VALUES 子句。例子：

*   [优化 SQL Server 上的数字表创建？](https://stackoverflow.com/q/4864758/27535)
*   [创建和填充数字表的最佳方法是什么？](https://stackoverflow.com/q/1393951/27535)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T09:04:42.120

恕我直言，您应该在数据库的查找表中维护有效代码列表，并将使用的代码作为另一个表中的外键字段（您的帖子中的 MyTable）。

假设您创建了一个表来保存名称为 LookUpTable 的代码，该表具有代码 id 和代码。在另一张表中，您将代码 id 作为外键。然后，您可以使用以下查询：

```
SELECT  LOOKUPTABLE.Code 
FROM    LOOKUPTABLE LEFT JOIN FOREIGNKEYTABLE ON LOOKUPTABLE.ID = FOREIGNKEYTABLE.CodeID 
WHERE FOREIGNKEYTABLE.USERID IS NULL 
```

# javascript - 创建 Javascript 表单以获取用户输入

> ID：11948554
> 
> 赞同：0
> 
> 时间：2012-08-14T08:31:51.663
> 
> 标签：javascript, forms, variables, submit

我有以下代码：

```
var stereo_form =new Ext.form.FormPanel({
            id: "stereoInfo_panel",
            autoDestroy:true,
            frame: true,
            width: 410,
            items:[{
            xtype: 'textfield',
            fieldLabel: 'DEM Resolution',
            name: 'resolution'

        },{
            xtype: 'textfield',
            fieldLabel: 'Matching Level',
            name: 'matching'

        },{
            xtype: 'textfield',
            fieldLabel: 'Size of DEM',
            name: 'size'

        }],
            buttons: [{
                text: 'Confirm',
                handler: function(){//HELP ME!
                }
        }]
    }); 

    var w =new Ext.Window({
        id: "stereoInfo_win",
        title: "Stereo Reconstruction Parameters",
        layout: 'form',
        height: 160,
        width: 350,
        items: stereo_form

    });

w.show();
w.focus(); 
```

3个问题：

1.  我希望脚本的其余部分在显示此表单时暂停运行，直到按下按钮。
2.  当按下按钮时，我希望表单被销毁。
3.  按下按钮时，我希望将 3 个值传递给变量。

任何人都可以帮忙吗？

PS我只想将值分配给全局变量，而不是服务器端文件...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T08:05:42.207

通过创建具有关联窗口和按钮的表单来解决此问题，如下所示：

```
var stereo_form =new Ext.form.FormPanel({
        id: "stereoInfo_panel",
        autoDestroy:true,
        labelWidth: 300,
        frame: true,
        width: 515,
        items:[{
            xtype: 'textfield',
            fieldLabel: 'DEM Resolution (Enter between 0.002 - 0.1 metres)',
            name: 'resolution',
            regex: /^0[.](1|0[1-9][0-9]*|00[2-9][0-9]*)$/,
            regexText: 'Only values between 0.002 - 0.1 allowed',
            value: '0.005' //sets a default value

        },{
            xtype: 'textfield',
            fieldLabel: 'Pyramid Level (Enter either 0 or 1)',
            regex: /^[0-1]$/,
            regexText: 'Only values of 0 or 1 allowed',
            name: 'matching',
            value: '0' //sets a default value

        },{
            xtype: 'textfield',
            fieldLabel: 'Size of DEM (Enter between 0 - 50.00 metres)',
            name: 'size',
            value: '20.00' //sets a default value

        }],
            buttons: [{
                text: 'Confirm',
                handler: function()
                        {
                        var values = stereo_form.getForm().getValues();
                        res = values.resolution;
                        pyramid = values.matching;
                        distance = values.size;
                        user1 = "Resolution of DEM in X and Y directions (metres) = " + res;
                        user2 = "Minimum (biggest) image pyramid level for matching (one level = img/2) = " + pyramid;
                        user3 = "Maximum distance from camera to be reconstructed - Cartesian DEM only (metres) = " + distance;
                        loadXMLDoc("/stereo_proc4.php?left="+leftrel_safe+"&right="+rightrel_safe+"&res="+res+"&pyramid="+pyramid+"&distance="+distance,state_Change);
                        w.close();
                        }

        }]
    }); 

    var w =new Ext.Window({
        id: "stereoInfo_win",
        title: "Stereo Reconstruction Parameters",
        layout: 'form',
        height: 152,
        width: 515,
        items: stereo_form

    });

w.show();
w.focus(); 
```

# python - Python：类如何从函数继承？

> ID：11948555
> 
> 赞同：0
> 
> 时间：2012-08-14T08:31:57.560
> 
> 标签：python

这是一段我无法理解的代码：

```
class COWMeta(type):
    pass

class COWDictMeta(COWMeta):
    .... 
```

我知道如何在 python 中创建一个新类：

```
class MyClass(BaseClass):
    ... 
```

但正如手册所述，“类型”是功能。

> type(...)模块
> 的函数 type(object) -> 对象的类型 type(name, bases, dict) -> 一个新类型 `__builtin__`

类如何从函数继承？那段代码是什么意思？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T08:42:05.027

`type`是python中的基本对象*类型*。像 python 中的许多对象类型一样，它充当创建新类型的构造函数，但以最简单的形式，它将返回现有对象的类型。然后它*看起来*像一个函数。例如，将此与`int()`和进行比较。`list()`

在 python 中，您可以创建*新*类型，也称为元类，允许您在 Python 中执行各种强大而有趣的技巧。基于类定义`type`意味着您正在创建一个新的元类。

请参阅[Python 中的元类是什么？](https://stackoverflow.com/questions/100003/what-is-a-metaclass-in-python)有关什么是元类的深入答案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T08:45:12.340

`type`不是一个功能，例如：

```
def foo():
    pass 
```

是一个函数。它可以像函数一样调用（也像 Python 中的许多其他对象一样），但它实际上被*编码*为一个类。`type`本身可以向您展示这种差异：

```
>>> type(type)
<class 'type'>
>>> type(foo)
<class 'function'> 
```

文档称它为“功能”不是因为它是如何*实现*的，而是因为它是常用*的*。这与，例如，大体相似，虽然文档*没有*[`itertools.permutations`](http://docs.python.org/library/itertools.html#itertools.permutations)明确调用函数，但暗示它是一个：

 *> 返回可迭代的元素的连续 r 长度排列。

但是`itertools.permutations`作为一个类实现：

```
>>> type(itertools.permutations)
<class 'type'> 
```*

# web-services - 为什么这个加密的信息被破坏了？

> ID：11948557
> 
> 赞同：1
> 
> 时间：2012-06-18T13:59:23.267
> 
> 标签：web-services, encryption

我使用以下代码使用 3-DES 算法使用密钥加密字符串：

```
private bool Encode(string input, out string output, byte[] k, bool isDOS7)
    {
        try
        {
            if (k.Length != 16)
            {
                throw new Exception("Wrong key size exception");
            }
            int length = input.Length % 8;
            if (length != 0)
            {
                length = 8 - length;
                for (int i = 0; i < length; i++)
                {
                    input += " ";

                }
            }
            TripleDESCryptoServiceProvider des = new TripleDESCryptoServiceProvider();

            des.Mode = CipherMode.ECB;
            des.Padding = PaddingMode.Zeros;
            des.Key = k;
            ICryptoTransform ic = des.CreateEncryptor();

            byte[] bytePlainText = Encoding.Default.GetBytes(input);
            MemoryStream ms = new MemoryStream();
            CryptoStream cStream = new CryptoStream(ms,
                ic,
                CryptoStreamMode.Write);

            cStream.Write(bytePlainText, 0, bytePlainText.Length);
            cStream.FlushFinalBlock();
            byte[] cipherTextBytes = ms.ToArray();
            cStream.Close();
            ms.Close();
            output = Encoding.Default.GetString(cipherTextBytes);

        }
        catch (ArgumentException e)
        {
            output = e.Message;
            //Log.Instance.WriteToEvent("Problem encoding, terminalID= "+objTerminalSecurity.TerminalID+" ,Error" + output, "Security", EventLogEntryType.Error);
            return false;
        }
        return true;
    } 
```

我将输出参数原样发送到 WCF http-binding webservice，我注意到实际编码的字符串看起来不同，看起来有一些 \t 和 \n 但字符大致相同。

这是怎么回事，为什么服务器会得到不同的编码字符串？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T17:15:30.933

通常密文是 base64 编码的，以便在传输过程中保持二进制安全。

此外，我不会将 3DES 与 ECB 一起使用。太糟糕了，你一定是从某个地方复制粘贴的。在 cbc 模式下使用 AES，并考虑添加 cmac 或 hmac。

# android - 为什么eclipse无法启动？它在配置中显示错误日志

> ID：11948560
> 
> 赞同：2
> 
> 时间：2012-08-14T08:32:18.340
> 
> 标签：android, eclipse, launch

我正在使用 eclipse 3.7.2 来开发 Android 应用程序……直到我从帮助选项卡安装了新的更新并安装了用于代码管理的 Subversive 插件之前，一切都运行良好。

错误如下：

![Eclipse 错误窗口](../Images/a633d56c7ea664f3f5878c688d1432b3.png)

我打开了上面路径中提到的错误文件，但我猜不出丢失的文件是什么，该文件包含以下内容：

```
 !SESSION 2012-08-14 11:23:27.945 -----------------------------------------------
     eclipse.buildId=M20120208-0800
     java.version=1.6.0_30
     java.vendor=Sun Microsystems Inc.
     BootLoader constants: OS=win32, ARCH=x86, WS=win32, NL=en_US
     Framework arguments:  -product org.eclipse.epp.package.java.product
     Command-line arguments:  -os win32 -ws win32 -arch x86 -product org.eclipse.epp.package.java.product

      !ENTRY org.eclipse.osgi 2 0 2012-08-14 11:23:28.945
      !MESSAGE One or more bundles are not resolved because the following root constraints are not resolved:
      !SUBENTRY 1 org.eclipse.osgi 2 0 2012-08-14 11:23:28.945
      !MESSAGE Bundle  reference:file:plugins/org.eclipse.ui.navigator.resources_3.4.300.v20110928-1505.jar was  not resolved.
      !SUBENTRY 2 org.eclipse.ui.navigator.resources 2 0 2012-08-14 11:23:28.945
      !MESSAGE Missing required bundle org.eclipse.jface_[3.6.0,4.0.0).
      !SUBENTRY 1 org.eclipse.osgi 2 0 2012-08-14 11:23:28.945
      !MESSAGE Bundle reference:file:plugins/org.eclipse.compare.win32_1.0.200.I20110510-0800.jar was not resolved.
       !SUBENTRY 2 org.eclipse.compare.win32 2 0 2012-08-14 11:23:28.945
       !MESSAGE Missing required bundle org.eclipse.jface_[3.5.0,4.0.0).
          !SUBENTRY 1 org.eclipse.osgi 2 0 2012-08-14 11:23:28.945
       !MESSAGE Bundle reference:file:plugins/org.eclipse.ui.workbench_3.7.1.v20120104-1859.jar was not resolved.
       !SUBENTRY 2 org.eclipse.ui.workbench 2 0 2012-08-14 11:23:28.945
       !MESSAGE Missing required bundle org.eclipse.jface_[3.5.0,4.0.0).
       !SUBENTRY 1 org.eclipse.osgi 2 0 2012-08-14 11:23:28.945
       !MESSAGE Bundle reference:file:plugins/org.eclipse.mylyn.commons.ui_3.7.1.v20120425-0100.jar was not resolved.
        !SUBENTRY 2 org.eclipse.mylyn.commons.ui 2 0 2012-08-14 11:23:28.945
        !MESSAGE Missing required bundle org.eclipse.jface_0.0.0.
        !SUBENTRY 1 org.eclipse.osgi 2 0 2012-08-14 11:23:28.945
        !MESSAGE Bundle reference:file:plugins/org.eclipse.mylyn.commons.notifications_0.9.1.v20120412-0100.jar was not resolved.

          ...etc etc 
```

那么有人可以帮忙吗？

提前感谢您的帮助和感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T09:29:27.777

检查插件`org.eclipse.jface`。它似乎是一个旧版本。插件抱怨是因为它们需要 3.5+ 或 3.6+ 版本。

您可以使用 Eclipse 插件注册表视图来检查插件或 OSGI 控制台。查看我之前为类似问题所做的[答案，以了解有关控制台的更多详细信息。](https://stackoverflow.com/a/7777020/207764)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T11:50:33.820

好的，如果您不想重新安装（实际上重置似乎更正确）eclipse然后下载
`org.eclipse.jface.databinding_1.5.0.I20100907-0800.jar`
`org.eclipse.jface.text_3.7.2.v20111213-1208.jar`

```
org.eclipse.jface_3.7.0.v20110928-1505.jar 
```

并将它们放入`eclipse_installed_directory/plugins/`并享受；）
如果错误仍然出现，请告诉我

# nhibernate - Nhibernate - QueryOver。IsLike 具有多个条件

> ID：11948563
> 
> 赞同：3
> 
> 时间：2012-08-14T08:32:29.010
> 
> 标签：nhibernate, queryover

我不知道如何创建具有多个条件的 IsLike 查询。

```
criteria =  criteria.Add(Restrictions.Like("IpAdress", "%" + request.Keyword + "%") ||
            Restrictions.Like("MacAdress", "%" + request.Keyword + "%") ||
            Restrictions.Like("al.SerialNumber", "%" + request.Keyword + "%")); 
```

如何将上面的查询转换为 IQueryOver 格式？

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-14T09:23:54.617

您尚未发布实体的外观，但您可以按照以下方式编写一些内容：

```
query.Where(Restrictions.Disjunction()
    .Add(Restrictions.On<Type>(x => x.IpAddress).IsLike(request.Keyword))
    .Add(Restrictions.On<Type>(x => x.MacAdress).IsLike(request.Keyword))
    .Add(Restrictions.On<Type2>(x => x.SerialNumber).IsLike(request.Keyword))); 
```

或者您可以使用`||`运算符而不是析取：

```
query.Where(
    Restrictions.On<Type>(x => x.IpAddress).IsLike(request.Keyword) ||
    Restrictions.On<Type>(x => x.MacAdress).IsLike(request.Keyword) ||
    Restrictions.On<Type2>(x => x.SerialNumber).IsLike(request.Keyword)); 
```

以下是一些类似的 SO 问题以获取更多信息：
[queryover and (x like 'a' or y like 'a')](https://stackoverflow.com/questions/4541546/queryover-and-x-like-a-or-y-like-a)
[QueryOver Or with Subquery](https://stackoverflow.com/questions/7957733/queryover-or-with-subquery)

# asp.net - 复选框列表只检查有限的项目

> ID：11948567
> 
> 赞同：0
> 
> 时间：2012-08-14T08:32:34.953
> 
> 标签：asp.net, checkboxlist

我有一个复选框列表，我想为你设置一个上限，你可以检查。这是我所做的。

```
 int numSelected = 0;
            foreach (ListItem li in chkMultiBrand.Items)
            {
                if (li.Selected)
                {
                    numSelected = numSelected + 1;
                }
            }
            for (int i = 0; i < chkMultiBrand.Items.Count; i++)
            {
                if (numSelected >= Convert.ToInt32(objLimit.UPPERLIMIT))
                {
                    chkMultiBrand.Items[i].Selected = false;
                }
            } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T09:25:57.670

我假设如果超过了最大数量，您想*取消选中*最后一个选中的框，这样应该可以

```
public void chk_SelectedIndexChanged(object sender, EventArgs e)
{
     int numSelected = 0;
     foreach (ListItem li in chkMultiBrand.Items)
     {
         if (li.Selected)
         {
             numSelected = numSelected + 1;
         }
     }
     if (numSelected >= Convert.ToInt32(objLimit.UPPERLIMIT))
     {
          string[] control = Request.Form.Get("__EVENTTARGET").Split('$');
          int index = control.Length - 1;
          ListItem lastChecked = (ListItem) chkMultiBrand.Items[Int32.Parse(control[index])];
          lastChecked.Selected = false;
     }
 } 
```

虽然如果可能的话我可能会尝试做这个客户端 - 像这样[http://jsfiddle.net/CXfgS/2/](http://jsfiddle.net/CXfgS/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T09:07:33.907

如果我正确阅读此内容，因为您的代码代表您所做的是

1.  计算整个列表中选中框的数量
2.  如果先前计数中的数字大于允许的最大值，则将所有内容设置为 false

您需要组合循环 - 这并不完美，因为它不跟踪选择项目的顺序，因此只有前 X 个复选框将保持选中状态，并且任何后续项目都将被取消选中。

```
 int numSelected = 0;
        foreach (ListItem li in chkMultiBrand.Items)
        {
            if (numSelected >= Convert.ToInt32(objLimit.UPPERLIMIT))
            {
                li.Selected = false;
            }
            if (li.Selected)
            {
                numSelected = numSelected + 1;
            }
        } 
```

# sql-server-2008 - 从多个结果中添加 2 行具有不同名称的行

> ID：11948581
> 
> 赞同：0
> 
> 时间：2012-08-14T08:33:14.987
> 
> 标签：sql-server-2008

我有一个非常简单的 SQL -

```
SELECT      QUEUE,
            COUNT (QUEUE) AS 'TOTAL'
FROM        MY_TABLE
GROUP BY    QUEUE 
```

这会产生 10 行数据，例如 -

```
First Queue    15  
Second Queue   23  
Third Queue    48  
Fourth Queue   12  
etc 
```

我需要做的是将第一个队列的结果添加到第二个队列的结果中，然后将第二个队列的名称更改为新的第二个队列，所以我应该以 -

```
New Second Queue   38  
Third Queue        48  
Fourth Queue       12  
etc 
```

我写 SQL 的时间不长，花了很多时间试图解决这个问题，但没有成功。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T08:53:04.817

```
select queue,
       count(*) as total
from
  (
  select case queue
           when 'First Queue' then 'New Second Queue'
           when 'Second Queue' then 'New Second Queue'
           else queue
         end as queue
  from YourTable
  ) as Q
group by queue 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T08:50:25.093

尝试这个：

```
with cte as(
SELECT      QUEUE,
            COUNT (QUEUE) AS 'TOTAL',
            ROW_NUMBER() over(order by QUEUE) as rownum
FROM        MY_TABLE
GROUP BY    QUEUE)
select 'New '+QUEUE [QUEUE],TOTAL+(select TOTAL from cte where rownum=1) [TOTAL]
 from cte where rownum=2
 union all
 select QUEUE,TOTAL from cte where rownum>2 
```

# iphone - 自动选择选择器行

> ID：11948583
> 
> 赞同：0
> 
> 时间：2012-08-14T08:33:19.597
> 
> 标签：iphone, objective-c, ios

在得到这个答案后，我一直在寻找很长一段时间，但似乎无法找到解决方案......每当我打开我的选择器时，我需要稍微拉动屏幕以便第一行得到“选择”，否则它将返回一个空白字符串。有没有办法默认自动选择第一行，这样你就不需要做这个动作了？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T08:40:29.487

利用

```
- (void)selectRow:(NSInteger)row inComponent:(NSInteger)component animated:(BOOL)animated 
```

设置您想要的任何默认值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T08:39:34.667

你可以使用：

```
[pickerView selectRow:0 inComponent:0 animated:NO] 
```

在您的 viewDidLoad 方法中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T08:45:50.527

您只需在 .h 文件中声明 NSString

```
NSString *strVal; 
```

然后在您的 viewDidLoad 方法中将您的默认值分配给字符串

```
strVal=your default value; 
```

和你的委托方法：

```
- (void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row inComponent:

(NSInteger)component
{
    strVal=assign element;
} 
```

# c++ - 如何在 Visual Studio 2010 C++ 中最好地组织依赖关系？

> ID：11948584
> 
> 赞同：0
> 
> 时间：2012-08-14T08:33:21.057
> 
> 标签：c++, visual-studio-2010, dependency-management

我是 Visual Stuido 的新手，我想知道如何在 Visual Studio 2010 C++ (Express Edition) 中最好地组织项目的依赖关系。

主要问题如下：项目 P 需要 lib L，因此我将依赖项 L 添加到 P。L 位于我的系统中的某个位置。我将 P 提交给我们的版本控制。我的同事检查了 P，但 P 的配置不适合他的系统（L 位于他系统的其他位置）。所以他调整了配置并将更改提交给 P。我检查了 P，现在它不适合我的系统。

我来自 Java 和 Eclipse。在 Eclipse 中，您可以为整个 IDE 的 PATH_TO_L 全局设置一个变量。在项目配置中，依赖项现在是变量 PATH_TO_L 而不再是路径。所以我和我的同事可以使用完全相同的资源，包括项目配置。我们所要做的就是设置变量 PATH_TO_L。好的。

更好的是Maven。因此，您不必关心将正确的依赖项复制到正确的位置，因为 Maven 会为您完成所有工作。

我搜索了一点解决方案。一种可能的解决方案是使用属性表并将模板属性表添加到我们的版本控制中。但是版本控制中的模板使用起来不舒服，我必须调整每个项目的设置。不是全局设置。

我尝试使用系统环境变量，但我认为 Visual Studio 2010 不使用它们。

所以这就是问题所在。您如何在 Visual Studio 2010 中组织您的项目？有没有理想的方法？是否有像 Maven 这样的东西，或者是否有可能在 Visual Studio 中使用像 nexus 这样的存储库管理器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T08:49:51.693

您在正确的轨道上，使用属性表。
您可以使用属性表来引用环境变量。一个例子是[here](http://msdn.microsoft.com/en-us/library/ak4435es)。
我会将库的路径添加到名为`Microsoft.Cpp.<platform>.user`. 因为这是默认包含的。更多信息在[这里](http://msdn.microsoft.com/en-us/library/ee855621.aspx)。

一旦你熟悉了属性表，它并没有看起来那么糟糕。我实际上开始喜欢 msbuild 系统。但我不知道任何类似 maven for msbuild 的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T09:05:49.647

如今，很多人都在使用元构建系统，例如 CMake、SCons ......

在其他有用的功能中，您可以设置一些以后可以重复使用的变量，例如路径。这样，您的同事和您自己将拥有相同的 CMake 配置，但具有个性化的路径。

而且，由于这些脚本是简单的文本文件，它们与版本控制配合得很好（比 MSVC xml 配置好得多）

# javascript - 在 JavaScript 文件中包含 JavaScript 文件

> ID：11948585
> 
> 赞同：0
> 
> 时间：2012-08-14T08:33:22.160
> 
> 标签：javascript

> **可能重复：**
> [在 JavaScript 文件中包含 JavaScript 文件？](https://stackoverflow.com/questions/950087/include-javascript-file-inside-javascript-file)

我有两个 js 文件 a.js 和 b.js 我想在 javascript 文件 b.js 中包含 a.js。

如何包含这个，请帮助我？

# html - 圆圈在 IE8 中无法正确显示

> ID：11948588
> 
> 赞同：0
> 
> 时间：2012-08-14T08:33:32.267
> 
> 标签：html, internet-explorer-8, css

我需要在 IE8 中绘制一个倾斜的椭圆。

使用 PIE.js 显示边框半径

要在其他浏览器中显示，请使用以下代码：

```
.levelConfidenceCircleBlue {
    position: relative;
    float: left;
    width: 19px;
    height: 18px;
    background: none;
    z-index: 10;
    margin-top: -8px;
    margin-left: 5px;
    margin-right: 2px;
}

.levelConfidenceCircleBlue:before,
.levelConfidenceCircleBlue:after {
    position: absolute;
    content: "";

    width: 15px;
    height: 18px;
    left: 0px;
    background: #00A7E7;
    -moz-border-radius: 50px/63px;
    border-radius: 50px/63px;
    -webkit-transform: rotate(26deg);
       -moz-transform: rotate(26deg);
        -ms-transform: rotate(26deg);
         -o-transform: rotate(26deg);
            transform: rotate(26deg);
    -webkit-transform-origin: 0 100%;
       -moz-transform-origin: 0 100%;
        -ms-transform-origin: 0 100%;
         -o-transform-origin: 0 100%;
            transform-origin: 0 100%;
} 
```

调整使用 IE8 hack：

```
<! - [if IE 8]>
.levelConfidenceCircleBlue:before,
.levelConfidenceCircleBlue:after {
    position: absolute;
    content: "";

    width: 15px;
    height: 18px;
    left: 0px;

    background: none;
    border-radius: 60px 40px 60px 40px;
    -pie-background: #00A7E7;
}
<! [endif] -> 
```

没有改变。但是，如果您将其更改为：

```
<! - [if IE 8]>    
.levelConfidenceCircleBlue {
        position: relative;
        float: left;
        width: 19px;
        height: 18px;
        background: none;
        z-index: 10;
        margin-top: -8px;
        margin-left: 5px;
        margin-right: 2px;
    }

    .levelConfidenceCircleBlue:before,
    .levelConfidenceCircleBlue:after {
        position: absolute;
        content: "";

        width: 15px;
        height: 18px;
        left: 0px;

        background: none;
        border-radius: 60px 40px 60px 40px;
        -pie-background: #00A7E7;
    }
<! [endif] -> 
```

它在 IE9 中的 IE8 中正确显示 - 显示正方形，在其他浏览器中 - 不显示任何内容。除了没有hacks的常规课程/ *** /和\ 0 /不起作用。

你能告诉我如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T09:35:50.077

问题已经解决了。
问题是连接了 PIE.js。

连接改为：

```
updatePIEButtons = function () {
    if ($.browser.msie && $.browser.version == 8) {

        $(".levelConfidenceCircleBlue").each(function () {
                PIE.detach(this);
                PIE.attach(this);
            });
        }
        else {
            $("[other classes]").each(function () {
                PIE.detach(this);
                PIE.attach(this);
            });
        }
    }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T08:42:17.617

您的 IE 条件标记似乎是错误的。

```
<!--[if IE 8]> IE 8.0 <![endif]--> 
```

# git - 从 git repo 获取时，hudson 挂起

> ID：11948598
> 
> 赞同：1
> 
> 时间：2012-08-14T08:34:20.290
> 
> 标签：git, hudson

我在 Hudson 上设置了一个构建作业来构建一个 Git 项目。
Hudson 在 Win 2K8 R2 VM 服务器上从控制台运行，而不是作为服务运行。
Git 访问是通过 SSH 进行的。
作业成功完成克隆，但在表示它正在从远程服务器获取时挂起（正在进行的处理）。
当我检查作业工作区时，我看到克隆是 compelte，因为我可以看到内容和非空的 .git 文件夹。它只是没有从那里开始。
Hudson 通过 NT 用户登录，其 ssh 密钥已添加到服务器。
在哈德逊之外，在 git bash 上，我可以完全克隆而不会出现任何错误。
有什么问题？

请参阅下面的控制台输出。[2-3小时后，没有错误信息]

> 由用户 my-userid
> Checkout:workspace / D:\CITool\Hudson\jobs\project1\workspace - hudson.remoting.LocalChannel@1f676cb
> 使用策略：默认
> Checkout:workspace / D:\CITool\Hudson\jobs\project1\workspace - hudson.remoting.LocalChannel@1f676cb
> 克隆远程 Git 存储库
> 克隆存储库来源
> 从 ssh://admin@server.domain.com/project1 获取上游更改

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T09:44:45.007

关于在哪里寻找问题的一些想法：

*   SSH 会出现各种登录缓慢的问题。尝试在客户端禁用 GSSAPI 或在服务器上禁用 DNS 反向查找。
*   磁盘已满/配额问题
*   git clone 之后 Hudson 做了什么？也许这就是它实际悬挂的地方。

关于调试：

*   您能否在 Hudson 使用的相同环境中重现该问题？同一台机器，同一用户，并且不使用“git bash”，因为它可能具有非常不同的环境设置。
*   在 Hudson 中，尝试获取详细的 git 输出。您可能需要自定义（命令行）构建步骤而不是 SCM 步骤。

# android - 将数组列表传递到 SQLite 数据库

> ID：11948600
> 
> 赞同：0
> 
> 时间：2012-08-14T08:34:26.277
> 
> 标签：android, sqlite

我有以下代码：

```
 ArrayList NumList = getIntent().getParcelableArrayListExtra ("name");
    ArrayList<String> results = new ArrayList<String>();
    SQLiteDatabase sampleDB = null;

    try {
        sampleDB =  this.openOrCreateDatabase(SAMPLE_DB_NAME, MODE_PRIVATE, null);

        sampleDB.execSQL("CREATE TABLE IF NOT EXISTS " +
                SAMPLE_TABLE_NAME +
                " (FirstName VARCHAR);");

        sampleDB.execSQL("INSERT INTO " +
                SAMPLE_TABLE_NAME +
                " Values (NumList);"); 
```

我想要做的是将 NumList 传递到表中。上面的代码显示一个错误，说“没有这样的列：NumList)”我将如何传递这些信息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T08:54:55.217

试试这个：

```
sampleDB.execSQL("INSERT INTO " +
            SAMPLE_TABLE_NAME +
            " ( FirstName ) Values ('"+NumList+"');"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T09:12:42.457

试试这个：

```
for(String str: NumList){
sampleDB.execSQL("INSERT INTO " +
            SAMPLE_TABLE_NAME +
            " ( FirstName ) Values ('"+str+"');");
} 
```

# ruby-on-rails - 2 个控制器，1 个共享视图 - 如何使用 form_for

> ID：11948601
> 
> 赞同：0
> 
> 时间：2012-08-14T08:34:31.017
> 
> 标签：ruby-on-rails, ruby, model-view-controller

我有 1 个模型供 2 个控制器使用 - 1 个由普通用户使用，1 个由管理员用户使用。两个控制器中的新建/创建、编辑/更新操作相同。我有一个所有操作都使用的共享视图，但问题在于该共享视图中的 form_for：对于普通用户，我必须使用：

```
form_for @my_model, do |f| 
```

对于管理员，我将不得不使用：

```
form_for [:admin, @my_model] do |f| 
```

如何使用 2 个控制器重用视图？也许有更好的设计方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T08:49:21.247

我不确定您的设计模式是否是最好的。我想您正在使用 partial 来共享视图，您实际上可以`locals`在您的 partial 中传递一个参数`render`：

```
# user
<%= render :partial => "form", :locals => { :zone => @my_model } %>

# admin
<%= render :partial => "form", :locals => { :zone => [:admin, @my_model] } %>

# your form_for tag in the shared view
form_for(zone) do |f| 
```

我不确定这是否有效，但希望它能给你一个提示。

您应该为此尝试使用[管理命名空间方法](https://stackoverflow.com/questions/107674/backend-administration-in-rails)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T08:47:07.520

我想你应该记得[部分](http://guides.rubyonrails.org/layouts_and_rendering.html#using-partials).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T12:12:08.190

据我了解，您的控制器基本相同（新建/创建、编辑/更新）。我建议添加一个[before_filter](http://apidock.com/rails/ActionController/Filters/ClassMethods/before_filter)来测试用户是否是管理员，然后才可以访问销毁操作。（我猜这是不同的方法）。

```
#Controller
before_filter :admin => :only => [:destroy] 
```

# grails - 即使我编写了自己的 currentTimeMillis 方法，如何从 TimeStamp 中转义？

> ID：11948606
> 
> 赞同：0
> 
> 时间：2012-08-14T08:34:53.220
> 
> 标签：grails, timestamp

我有一个像这样的 inetgration 测试用例：

```
void testSomething() {
       def cardTable = new CardStorage();
        cardTable.cardSecurityCode = "something"
        def date = new Date() 
        System.metaClass.static.currentTimeMillis = { 
            Calendar cal = Calendar.getInstance();
            cal.set(Calendar.HOUR_OF_DAY,11);
            cal.set(Calendar.MINUTE,0);
            cal.set(Calendar.SECOND,0);
            cal.set(Calendar.MILLISECOND,0);
            return date.getTime()
        } 
        assert cardTable.save(flush:true) //this works.
} 
```

该行 :`cardTable.save(flush:true)` 正在工作。它断言`true`. 但问题是该`dateCreated`字段仍然与 ( `new Date()`) 相同。我想知道，这怎么会发生。因为我已经`currentTimeMillis`按照我的要求对方法进行了编码。但仍然 grails 没有接受它。但我确定我的新`currentTimeMillis`功能正在运行（因为在其中出错，会导致编译错误）。

我在哪里失踪？如何禁用时间戳功能以单独进行测试？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T09:27:14.193

核心库中的 Java 代码`new Date()`不会也永远不会接受您在 Groovy 元类代码中所做的更改。

我可以推荐使用[joda-time](http://grails.org/plugin/joda-time) (make `dateCreated`a `DateTime`) 并[通过它的方式设置当前时间](http://joda-time.sourceforge.net/userguide.html#Change_the_Current_Time)。

更好的方法不是将您的代码绑定到当前时间，而是将时间从外部传递到您的课程中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T00:19:57.327

不要使用'dateCreated'，grails 会自动为你填写。

# mysql - if/else 循环 mysql 查询

> ID：11948608
> 
> 赞同：0
> 
> 时间：2012-08-14T08:35:00.427
> 
> 标签：mysql, ruby-on-rails-3, if-statement

我有一个表`jos_stock`，其中包含`prev_balance`和`rem_balance`.. 我有一个查询，如果`rem_balance = 0`它会显示`prev_balance`，如果 rem_balance > 0 rem_balance 的值当然会显示。

**这是我的查询：**

```
SELECT if(jos_stock.rem_balance > 0, 
          jos_stock.rem_balance, 
          jos_stock.prev_balance) AS balance
from jos_stock 
```

这个查询没问题..但我想做的是如果 rem_balance = 0 prev_balance 将显示，如果 prev_balance = 0 它将显示前一个余额，直到值不等于 0

任何问题都不要害羞地问..提前谢谢...

# java - 对记录器的更改可能会丢失

> ID：11948612
> 
> 赞同：2
> 
> 时间：2012-08-14T08:35:15.003
> 
> 标签：java, findbugs

我有一个 java 命令行工具，它在一开始就关闭登录，然后解析命令行，稍后可能会再次打开登录，具体取决于命令行处理的结果。

主要方法是这样开始的：

```
public static void main(final String[] args){
    java.util.logging.LogManager.getLogManager().reset();
    java.util.logging.Logger globalLogger = java.util.logging.Logger
            .getLogger(java.util.logging.Logger.GLOBAL_LOGGER_NAME);
    globalLogger.setLevel(java.util.logging.Level.OFF);
    [... parse command line and possibly turn logging back on] 
```

现在 Findbugs 给出一个“*麻烦*”的警告，上面写着：

> 对记录器的更改可能会在 com.bmw.fnw.DBMainDialog.main(String[]) 中丢失

从[查找错误描述](http://findbugs.sourceforge.net/bugDescriptions.html#LG_LOST_LOGGER_DUE_TO_WEAK_REFERENCE) 中，我了解到记录器可能会在不应该出现的时候出现。

**我该怎么做才能正确关闭记录器？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T08:43:22.903

只要您需要它（可能在您的程序的整个生命周期内），只需对记录器进行强引用。

您提供的链接已经解释了原因：在 OpenJDK 中，logManager 在内部仅保留弱引用。因此，只要没有强引用，记录器就可以进行垃圾收集。所以你设置了配置，但没有强引用。它可能被垃圾收集。当您再次获得 Logger 时，会实例化一个新的 Logger。通过持有强引用来防止垃圾收集。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T08:41:14.340

您是否按照 Find Bugs 描述中的说明使用 OpenJDK？

自从他们谈论弱引用以来，我想到的是，您可以在某处创建此记录器的静态引用，以避免在垃圾收集期间丢失它。

为了测试这个问题，你可以在代码中称自己为垃圾收集器，看看它是否改变了任何东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T07:01:24.347

我遇到了完全相同的问题，也无法摆脱警告。我不知道 FindBugs 是否只是在惹我们生气，但持有强引用似乎无济于事。

为了摆脱警告，我简单地包含了 log4j。然后，您可以将 -Dlog4j.configuration=< FILE_PATH > 设置为 jvm 参数的一部分。FILE_PATH 是 log4j.properties 文件的路径。参考：[通过 JVM 参数进行 log4j 配置？](https://stackoverflow.com/questions/778933/log4j-configuration-via-jvm-arguments)

这将停止向您发出警告，您仍然可以配置调试级别。希望这可以帮助！

啊~

# mysql - 如何创建 CSV 文件，以便将其数据导入 mysql 数据库

> ID：11948613
> 
> 赞同：-1
> 
> 时间：2012-08-14T08:35:16.560
> 
> 标签：mysql, csv, mysqlimport

我有一个大城市列表，我希望它插入到 Mysql DB 表中，

我正在寻找一种方法来为这些城市列表创建一个 csv 文件，以便我可以将该文件导入 Mysql 表中......

更新：我的 Mysql 表中有表结构

```
id, name, IsActive 
```

我创建了一个 csv 文件，其中包含例如值

```
xyz,1
abc,1
sdf,1 
```

等等...

现在，当我尝试将其导入到我的 mysql 表中时，它会提示我错误消息为“第 1 行 CSV 输入中的无效字段计数”

请建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T08:44:31.593

如果需要，您可以在 Microsoft excel 中执行此操作，只需将您的城市列表放入其中，按照您希望插入的方式组织它，然后将其保存为 csv 文件，这里是关于此事的链接：[http://office .microsoft.com/en-us/excel-help/import-or-export-text-txt-or-csv-files-HP010099725.aspx](http://office.microsoft.com/en-us/excel-help/import-or-export-text-txt-or-csv-files-HP010099725.aspx)。如果你没有 Microsoft Excel，你可以在这里下载 openoffice：[http](http://www.openoffice.org/download/) ://www.openoffice.org/download/你也可以用他们的 Excel 做同样的事情。

# c# - 当我单击按钮时动态创建的文本框值丢失

> ID：11948614
> 
> 赞同：0
> 
> 时间：2012-08-14T08:35:21.550
> 
> 标签：c#, asp.net

我已经动态创建了一个文本框，当我单击按钮时，我得到了文本框的值。但是当我单击按钮时，在动态文本框中输入的值变为空。

下面是我的 ASPX 代码：

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="WebForm1.aspx.cs" Inherits="Reports.WebForm1" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
<title></title>
</head>
<body>
<form id="form1" runat="server">
<div>

</div>

<asp:DropDownList ID="DropDownList1" runat="server" 
    onselectedindexchanged="DropDownList1_SelectedIndexChanged" AutoPostBack = "true">
    <asp:ListItem>Text</asp:ListItem>
    <asp:ListItem>Check</asp:ListItem>
</asp:DropDownList> 

<asp:Button ID="Button1" runat="server" onclick="Button1_Click" Text="GetTextBoxValue" />   
</form>
</body>
</html> 
```

**代码隐藏：**

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;

namespace Reports
{
public partial class WebForm1 : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {

    }

    protected void Button1_Click(object sender, EventArgs e)
    {
        TextBox TB = new TextBox();
        TB.ID = "abc";
        form1.Controls.Add(TB);
        Response.Write(Request.Form["abc"]);
    }

    protected void DropDownList1_SelectedIndexChanged(object sender, EventArgs e)
    {
        createcontrol();
    }

    protected void createcontrol()
    {
        if (DropDownList1.SelectedValue.ToLower().Trim() == "text")
        {
            TextBox TB = new TextBox();
            TB.ID = "abc";
            form1.Controls.Add(TB);
        }
    }
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T08:46:34.587

当您在 .NET 中使用动态控件并希望在回发后可以访问它们的值时，您需要在页面的 Page_Init 方法中创建它们。本质上它不起作用，因为 ViewState 在您创建控件时已经设置。有关此主题的详细信息，请参阅本指南[http://www.4guysfromrolla.com/articles/081402-1.aspx](http://www.4guysfromrolla.com/articles/081402-1.aspx)。要解决此问题，请将您的 Textbox 实例化代码提升到 Page_Init 方法，一切都应该很好。

# java - 从 Android 设备上的 libGDX 引擎上的游戏发送电子邮件？

> ID：11948615
> 
> 赞同：2
> 
> 时间：2012-08-14T08:35:26.730
> 
> 标签：java, android, email, libgdx

在我的游戏调试版本中，我想通过电子邮件从许多用户那里获取有关游戏进度的实际信息。如您所知，libGDX 中的代码是在没有 Android 上下文的情况下使用本机 Java 编写的。您对我的问题有什么建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T09:33:08.900

请参阅 libgdx wiki 上的此页面：[与平台特定代码](http://code.google.com/p/libgdx/wiki/ApplicationPlatformSpecific)交互。您需要做的是使用您需要的方法创建一个接口。然后在您的 Android 项目中创建一个实现该接口的类。（以及其他项目，如果需要，如果不需要，只需创建什么都不做的虚拟文件）然后实例化启动游戏的适当类，并将对象传递给游戏并在那里使用它。

只需按照指南进行操作，然后您就可以在游戏中使用 Android 内容（通过界面）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T18:49:23.317

您可以尝试使用[ACRA（Android 应用程序崩溃报告）](http://code.google.com/p/acra/)。它会自动向您发送有关应用程序中每个错误的崩溃报告，这本身就非常有用。正如我所看到的，它具有[声明您自己的变量的方法，这些变量将被发送](http://code.google.com/p/acra/wiki/AdvancedUsage#Adding_your_own_variables_content_or_traces_in_crash_reports)。这可能是你想要的。它也是[libgdx 推荐的](http://code.google.com/p/libgdx-users/wiki/ACRA)。

# jquery - 使用 Jquery 在 ViewBag 中设置值

> ID：11948620
> 
> 赞同：20
> 
> 时间：2012-08-14T08:35:43.000
> 
> 标签：jquery, asp.net-mvc, viewbag

我只想问，有没有办法使用jquery动态设置viewbag值？我在我的脚本中尝试这段代码，

```
$(".btn").on("click",function(){
@ViewBag.Id = $(this).attr("id")
}); 
```

我不知道它是否正确但是当我尝试运行我的 MVC 3 项目时，这个错误出现在我的萤火虫中

```
Syntax Error
    = $(this).attr("id") 
```

请帮忙。谢谢

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-08-14T09:00:07.840

您误解了 ViewBag 的工作原理。

在 MVC 中工作时，当您打开一个网页时，（大致）会发生以下情况：

1.  运行 FooController 的方法“索引”。最后，返回一个视图。
2.  然后，您的 MVC 应用程序将为您找到视图，并根据在相关 .aspx 文件中找到的 HTML 开始呈现它。如果程序遇到诸如“@ViewBag.Id”之类的项目，它基本上会用“.Id”值进行字符串替换。（比这复杂一点，但为了论证，它基本上是进行字符串替换）。
3.  渲染后，HTML 文档被发送到您的浏览器，然后浏览器显示它。

当您的浏览器获取该页面时，您的 ViewBag 基本上已经“超出范围”。这是因为您的 ASP (MVC) 应用程序使用 ViewBag，但 Javascript 仅在 Web 浏览器文档中有一个范围（这是应用程序**在**ViewBag 超出范围后返回给浏览**器**的 HTML 代码。 Javascript 不是 MVC 应用程序的一部分，只是生成的网页。

 **所以简短的回答是，不，你不能那样做。尝试将其视为进行内联字符串替换。您只能将 ViewBag 值放入 HTML 页面，反之则不行。

假设你的Id是5，aspx文件中的代码如下：

```
$(".btn").on("click",function(){
    @ViewBag.Id = $(this).attr("id")
}); 
```

将作为

```
$(".btn").on("click",function(){
    5 = $(this).attr("id")
}); 
```

由于您的浏览器只看到最后一部分，所以它在 J​​avascript 中没有意义。在您的情况下，语法错误仅表示您的变量尚未初始化，并且您正在尝试访问`null`.**

# c# - 随机 GLU 错误 100155：镶嵌坐标太大

> ID：11948623
> 
> 赞同：0
> 
> 时间：2012-08-14T08:36:01.260
> 
> 标签：c#, opengl, glu

我有一个`OpenGL`程序（C#，使用`PInvokes`to`opengl32.dll`并`glu32.dll)`使用 60 FPS 绘制一个矩形`tessellation`（我知道我也没有，这是用于测试目的）。

绘图时不时地“闪烁”，并且从以下位置出现错误`tesselator`：

> “100155：镶嵌坐标太大”。

我不改变多边形。它的 4 个点被初始化一次，并被反复重新镶嵌（再次，仅用于测试目的），除非在某些时候它失败。

该测试在 Windows 7 上运行，并使用多个显示适配器和驱动程序进行了测试，结果都相同。

有任何想法吗？它是 Windows 端的一些错误实现吗？我做错了什么（我知道我没有附加代码，所以很难说，但是这样的问题是否存在常见的陷阱？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T06:58:25.630

数字我将 2 个值点而不是 3 个值点传递给 GLU tesselator，显然它不喜欢它:-)

通过重新创建添加零作为 Z 值的点数组来解决此问题。

不过，如果 tesselator 也支持 2D，那就太好了。

# javascript - 对同一类中的所有元素单击一次

> ID：11948632
> 
> 赞同：1
> 
> 时间：2012-08-14T08:36:34.630
> 
> 标签：javascript, jquery

我正在尝试编写代码来自动将另一行添加到表单中。对于每个带有 lastName 类的表单输入，它应该只执行一次。

下面的代码有效。但它执行不止一次。我希望代码只为每个带有 lastName 类的表单输入执行一次。我对 jquery 和 javascript 没有经验，所以我不确定如何解决这个问题。

```
 function AutoAdd() {
    $('.lastName').focus(function(e){
    $('#add_new',pupils_form).parent().before(pupils_row);

    AutoAdd();
    });
    };
    AutoAdd(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T08:41:50.580

您可以使用以下[`one`](http://api.jquery.com/one/)方法：

> 将处理程序附加到元素的事件。每个元素最多执行一次处理程序。

```
$('.lastName').one('click', function(e){
      $('#add_new',pupils_form).parent().before(pupils_row);
}); 
```

此外，当您为输入绑定处理程序时，您可以将处理程序放在函数之外，请注意您的函数会调用自身并连续运行。如果要在页面加载时执行处理程序，可以触发事件：

```
$('.lastName').focus(function(e){
      $('#add_new',pupils_form).parent().before(pupils_row);
}).focus() 
```

* * *

对于动态生成的元素，您应该委托事件，请尝试以下操作：

```
$(document).on('focus', '.lastName', function(){
     $('#add_new',pupils_form).parent().before(pupils_row);
}) 
```

您可以使用`data-*`属性，请尝试以下操作：

```
<input type='text' class='lastName' data-run='go'/> 
```

```
$(document).on('focus', '.lastName', function(){
     if ( $(this).data('run') == 'go') {
           $('#add_new',pupils_form).parent().before(pupils_row);
           $(this).data('run', 'stop')
     }
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T08:42:31.250

你在这里有一个**无限**的调用堆栈。你的`AutoAdd`意志一次又一次地呼唤自己，然后......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T09:29:05.597

为了避免`AutoAdd`在新创建的行上运行你的函数，你可以使用 jQuery 的`on()`-function 而不是`focus()`：

```
$('#the-form').on('focus', '.lastName', function () {
    $('#add_new',pupils_form).parent().before(pupils_row);
}); 
```

`on()`实际上附加到表单（您会想要更改选择器`#the-form`）并侦听从所述表单的子级冒出的事件。

# android - 使用 OAuth2.0 在 Android 应用程序中集成 picasa 的最佳方式

> ID：11948633
> 
> 赞同：1
> 
> 时间：2012-08-14T08:36:34.780
> 
> 标签：android, picasa

我正在编写一个需要从 android 应用程序访问 picasa 的应用程序。我想使用 OAuth2.0 进行授权。

看到文档，但我很困惑，使用 google-api-java-client1.10.3.jar 请建议如何集成。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-11T12:53:19.347

您可以将此 android 模块用于 oauth2.0 [https://github.com/Hafiz-Waleed-Hussain/EasySocial](https://github.com/Hafiz-Waleed-Hussain/EasySocial)

# asp.net - 使用 IIS 7.5 在 Sharepoint 2007 中设置 MVC 3 应用程序后，Web 应用程序提供 DLL？

> ID：11948635
> 
> 赞同：0
> 
> 时间：2012-08-14T08:36:37.353
> 
> 标签：asp.net, asp.net-mvc-3, sharepoint, iis-7, web-config

我目前正在开发一个 sharepoint 2007 Web 应用程序，并且我正在尝试在同一网站内创建一个 MVC 3 网站，该网站在 .Net Framework 4.0（集成模式）上运行。

最初，我们遇到了一些问题，因为 web.config（对于主站点 [Sharepoint 2007]）具有为 .net 框架 2.0 注册的 dll，即使对于 MVC 3 应用程序也是如此。我们通过更新 .Net Framework 中的 web.config 解决了这个问题，因此在为 .Net 2.0 和 4.0 注册的 dll 上的正确版本。

问题已解决，我能够毫无问题地访问 MVC 和主站点，现在突然之间，在重新启动我的 VM 后，当我访问我的主站点时，提供了一个 DLL（是的，浏览器下载了一个 dll文件 ！！）。

我的另外 3 位同事就是这种情况。任何专家的建议都会非常有帮助。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T00:45:28.743

嘘！经过几天的 IIS 和广泛的谷歌搜索，结果证明为 _vti_bin 文件夹的处理程序映射授予“执行”权限可以解决问题。我很惊讶以前没有人遇到过这个问题，或者可能与 rake 脚本（部署包脚本）有关。

无论如何，感谢所有查看我问题的人。希望这个答案对某人有所帮助！

# wpf - WPF在执行点击之前完成按钮动画

> ID：11948636
> 
> 赞同：0
> 
> 时间：2012-08-14T08:36:37.727
> 
> 标签：wpf, animation, button, click

我有一个带有彩色动画的按钮和一个点击事件。coloranimation 在 1 秒内将按钮的背景从灰色变为橙色，然后将其反转。在点击事件中，我加载了很多东西（大约需要 4-5 秒）。

我的问题是，当我单击按钮时动画开始，但在几毫秒后立即停止（单击事件开始），并且在单击事件完成后，它也完成了动画。我希望首先完成动画，然后执行点击事件。

我用谷歌搜索了很多，发现动画完成事件并且它正在工作，但是是否有可能为此制定一个基本解决方案，我可以将其用于程序中的所有按钮？

感谢您提前回复！

BR，佐利

编辑： - - - - - - - - - - - - - - - - - - - - - - -

做这样的事情：

```
PreviewMouseDown()
{
    AnimateTheButton();
    //Wait for the animation to be finished
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T15:36:39.977

好的，如果您想要漂亮且可重复使用的解决方案，请查看我为您写的内容。只需将此类添加到您的解决方案中即可。

```
public sealed class AnimatedButton : Button
{
    private bool _isAnimationRunning;

    public static readonly DependencyProperty AnimationProperty =
        DependencyProperty.Register("Animation", typeof(Storyboard), typeof(AnimatedButton));

    public Storyboard Animation
    {
        get { return (Storyboard) GetValue(AnimationProperty); }
        set { SetValue(AnimationProperty, value); }
    }

    protected override void OnPreviewMouseDown(System.Windows.Input.MouseButtonEventArgs e)
    {
        _isAnimationRunning = true;
        if (Animation != null)
        {
            var clonedAnimation = Animation.Clone(); // Else we cannot subscribe Completed event
            clonedAnimation.Completed += OnAnimationComplete;
            clonedAnimation.Begin(this);
        }
        base.OnPreviewMouseDown(e);
    }

    protected override void OnClick()
    {
        if (Animation != null && _isAnimationRunning)
        {
            return;
        }
        base.OnClick();
    }

    private void OnAnimationComplete(object sender, EventArgs eventArgs)
    {
        _isAnimationRunning = false;
        OnClick();
    }
} 
```

用法。只需将其插入应用程序资源：

```
<Application.Resources>
    <Style x:Key="{x:Type controls:AnimatedButton}" TargetType="{x:Type TestWpf:AnimatedButton}">
        <Setter Property="Animation">
            <Setter.Value>
                <Storyboard Duration="0:0:2">
                    <DoubleAnimation From="0.2" To="1" Storyboard.TargetProperty="Opacity">
                    </DoubleAnimation>
                </Storyboard>
            </Setter.Value>
        </Setter>
    </Style>
</Application.Resources> 
```

然后你可以像通常的按钮一样使用它：

```
<local:AnimatedButton Click="OnAnimatedButtonClicked">
    Super cool button
</local:AnimatedButton> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-11-27T07:17:30.667

[https://stackoverflow.com/a/11955887/12258498](https://stackoverflow.com/a/11955887/12258498)

我不止一次收到 OnClick 事件。我已经修复了两种方法：

```
protected override void OnClick()
{
    if (Animation != null && _isAnimationRunning)
    {
        return;
    }
  //  base.OnClick(); 
}

private void OnAnimationComplete(object sender, EventArgs eventArgs)
{
    _isAnimationRunning = false;
    // OnClick();
    base.OnClick();
} 
```

# actionscript-3 - 使用来自另一个域的远程加载类 SWF

> ID：11948637
> 
> 赞同：0
> 
> 时间：2012-08-14T08:36:45.823
> 
> 标签：actionscript-3, apache-flex, cross-domain

这与从同一个域加载 SWF**无关。**

有一个小的 SWF 文件应该从`SharedObject`. 它驻留在专用域中（我们称之为域 A）。

有几个应用程序需要以共享方式访问上述数据（即来自不同域（B、C、D、...）的所有应用程序。当然，`SharedObject`在应用程序中使用 from 是不行的，因为`SharedObject`是每个域。

*   从域 BI 中的应用程序正在从域 A 加载策略文件。策略文件允许通过“*”和域“B”的所有域。
*   我`allowDomain("A")`在应用程序中允许域 A via
*   我允许通过数据处理 SWF 中的域 B`allowDomain("B")`
*   我正在像这样添加**loaderContext**`new LoaderContext(true, new ApplicationDomain(), SecurityDomain.currentDomain);`：我明确需要加载的 SWF 来保留它自己的域“A”上下文，以便`SharedObject`将写入“A”命名空间而不是托管应用程序的命名空间（“B”），因此“ `new ApplicationDomain()`”

数据处理 SWF 使用`SWFLoader`.

如果我理解正确，以上所有内容都应该能够访问加载的 SWF 的类成员。正如您现在可能已经猜到的那样，它并没有真正起作用。当我尝试将 SWFLoader 的内容转换为 SWF 的文档类时，这是`null`由于安全问题（我尝试加载`ApplicationDomain.currentDomain`并且效果很好，所以我知道类是相同的，但这不是我需要的）

我错过了什么？或者是否有更好的解决方案在不同域的应用程序之间本地共享数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T10:41:00.040

[http://jodieorourke.com/view.php?id=115&blog=news](http://jodieorourke.com/view.php?id=115&blog=news)

显然，过度安全是不好的。

# unity3d - 您可以在 Unity3D 中发送和接收数据吗？

> ID：11948639
> 
> 赞同：1
> 
> 时间：2012-08-14T08:36:49.210
> 
> 标签：unity3d

我想知道我是否可以向数据库发送和接收数据，例如（用户名和高分），或者在 Unity 3D 中接收确认消息，或者更新奖励和特价点等。

任何帮助将不胜感激！请指导我参考或提供代码片段，因为我不是高级游戏开发人员。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T08:43:36.973

是的，特别是我建议查看[WWW 类](http://docs.unity3d.com/Documentation/ScriptReference/WWW.html)。

当然，您可能需要在基础上有更好的基础——在这种情况下，我会推荐 C# 教程、unity3d 论坛和大量的汗水。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-27T09:03:53.627

您可以使用 javascript 统一通过 http 发送数据。最简单的方法是创建 http 服务器并从统一与该服务器交互。阅读一个很好的教程： [http ://unity-tutorials.blogspot.com/](http://unity-tutorials.blogspot.com/)

# asp.net - 弹出窗口打开时关闭当前浏览器窗口或选项卡

> ID：11948640
> 
> 赞同：1
> 
> 时间：2012-08-14T08:36:49.880
> 
> 标签：asp.net, extjs, popup

所以，我在一个网站上看到过这种方法（不过我不记得了），它的工作原理是这样的：

首先，有一个带有简单登录表单的简单页面。但是当您单击表单的登录按钮时，如果用户和密码的验证是肯定的并且服务器的响应也是肯定的，则会出现一个新的弹出窗口（其中包含用 javascript - [ExtJS](http://www.sencha.com/products/extjs/)编写的应用程序）和浏览器的当前选项卡（即登录表单页面）关闭。

在我看来，这是一种极好的方法，因为它`ExtJS`是一种单页应用程序模式，强大到足以运行 full `AJAX`，没有可见的重定向。此外，弹出式场景消除了浏览器页面控制按钮（后退、前进、刷新）并且地址栏是只读的。

现在，我试图通过使用 ASP.NET 作为服务器端脚本语言的帮助来重现这一点，其中 ExtJS 作为主要应用程序。因此，结果将如下所示：

1.  带有登录表单的登录页面 - HTML5 + CSS3
2.  应用程序页面（弹出窗口） - 纯 ExtJS
3.  一个网络服务[——ServiceStack](http://servicestack.net/)

Web 服务公开用于登录目的的方法以及其他方法，并且它始终返回`JSON`响应。在打开弹出窗口和关闭窗口之前，必须设置会话变量（如果登录成功）。

问题来了：

**如果登录成功，如何完成打开弹出窗口并关闭当前窗口/选项卡的场景？**任何帮助、提示、参考、建议、批评都是我所期待的。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T09:04:44.283

打开另一个窗口后，您应该能够关闭当前窗口。

```
window.open('new window url'); window.close(); 
```

我在我的盒子上试过这个，它在 chrome 和 safari 上运行良好

```
<input type="button" onClick="window.open('popop.html'); window.close();" value="open" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T12:06:55.123

如果您真的不需要，请远离打开弹出窗口。所有现代浏览器都设置为默认阻止您打开弹出窗口。

AFAIK 唯一 100% 打开新窗口（具有目标属性）的场景是用户单击的超链接。
`window.open()`甚至`document.getElementById("hiddenLink").click()`被某些浏览器阻止。

这样做有什么真正的好处，还是只是该网站的虚假新颖性？您陈述的原因都适用于单窗口方案。

# c# - MVC3 C# 自定义 HtmlHelper 用于客户端和服务器端的输入验证

> ID：11948643
> 
> 赞同：3
> 
> 时间：2012-08-14T08:37:00.503
> 
> 标签：c#, asp.net-mvc-3, validation, html-helper

我已经看到了一些与此类似的问题，但它们似乎适用于旧版本的 MVC，我没有运气弄清楚如何将它们应用于 MVC3。

基本上我已经编写了一个不错的小 htmlhelper，它将显示当前模型的选定参数，就像这样`@Html.DisplayFor()`做一样，除了我的旁边有一个编辑按钮（请原谅这些示例中缺少样式！）：

![按钮示例](../Images/eaaf03236863b6f2d1d856ef685544a2.png)

单击此按钮时，它将执行其中一个“弹出窗口”，其中显示编辑器字段，并且页面的其余部分使用一些简单的 jquery 变灰：

![弹出示例](../Images/a563977634ff7e208d1c83aa3d125fe1.png)

这是我的帮手：

```
 public static HtmlString PopUpEditorFor<TModel, TProperty>(this HtmlHelper<TModel> html, Expression<Func<TModel, TProperty>> expression, bool textarea = false)
    {
        string id = html.ViewContext.ViewData.TemplateInfo.GetFullHtmlFieldId(ExpressionHelper.GetExpressionText(expression));

        ModelMetadata metadata = ModelMetadata.FromLambdaExpression(expression, html.ViewData);

        var Display = new TagBuilder("span");
        Display.MergeAttribute("class", "Display");
        Display.InnerHtml = metadata.Model.ToString();

        var Edit_Button = new TagBuilder("span");
        Edit_Button.MergeAttribute("class", "Edit_Button");
        Edit_Button.InnerHtml = " Edit";// change to use resources file 

        var Display_Container = new TagBuilder("div");
        Display_Container.MergeAttribute("class", "Display");
        Display_Container.InnerHtml = Display.ToString(TagRenderMode.Normal) + Edit_Button.ToString(TagRenderMode.Normal);

        var legend = new TagBuilder("legend");
        legend.InnerHtml = "Edit " + metadata.DisplayName ?? metadata.PropertyName;

        var Editor_Box_Input = new TagBuilder("input");
        Editor_Box_Input.MergeAttribute("class", "Editor_Box");
        Editor_Box_Input.MergeAttribute("id", id);
        Editor_Box_Input.MergeAttribute("name", id);
        Editor_Box_Input.MergeAttribute("type", "text");
        Editor_Box_Input.MergeAttribute("value", metadata.Model.ToString());

        var Editor_Box_Textarea = new TagBuilder("textarea");
        Editor_Box_Input.MergeAttribute("class", "Editor_Box");
        Editor_Box_Input.MergeAttribute("id", id);
        Editor_Box_Input.MergeAttribute("name", id);
        Editor_Box_Input.MergeAttribute("type", "text");
        Editor_Box_Textarea.InnerHtml = metadata.Model.ToString();

        var Buttons = new TagBuilder("div");
        Buttons.MergeAttribute("class", "Buttons");
        Buttons.InnerHtml = QuestJSButton(html, "Cancel", "Option Cancel").ToString() + QuestJSButton(html, "Save", "Submit Save").ToString();

        var fieldset = new TagBuilder("fieldset");
        fieldset.InnerHtml += legend.ToString(TagRenderMode.Normal);
        fieldset.InnerHtml += !textarea 
            ? Editor_Box_Input.ToString(TagRenderMode.SelfClosing) 
            : Editor_Box_Textarea.ToString(TagRenderMode.Normal);
        fieldset.InnerHtml += Buttons.ToString(TagRenderMode.Normal);

        var form_styled = new TagBuilder("div");
        form_styled.MergeAttribute("class", "Editor form_styled");
        form_styled.InnerHtml = fieldset.ToString(TagRenderMode.Normal);

        var Editor_BG = new TagBuilder("div");
        Editor_BG.MergeAttribute("class", "Editor_BG");
        Editor_BG.InnerHtml = form_styled.ToString(TagRenderMode.Normal);

        var PopUp_Editor = new TagBuilder("div");
        PopUp_Editor.MergeAttribute("class", "PopUp_Editor");
        PopUp_Editor.MergeAttribute("id", id);
        PopUp_Editor.InnerHtml = Editor_BG.ToString(TagRenderMode.Normal) + Display_Container.ToString(TagRenderMode.Normal);

        return PopUp_Editor.ToString(TagRenderMode.Normal).ToHtmlString();
    } 
```

这就像一个普通的助手一样被调用：

```
@Html.PopUpEditorFor(model => model.property) 
```

并生成以下 html：

```
 <div class="PopUp_Editor" id="property_id">
          <div class="Display">
            <span class="Display">property_value</span>
            <span class="Edit_Button">Edit</span>
          </div>
          <div class="Editor_BG">
            <div class="Editor form_styled">
              <fieldset>
                <legend>Edit Salutation</legend>
                <input class="Editor_Box" id="property_id" name="property_id" type="text" value="property_value" />
                <div class="Buttons">
                  <span class="Option Cancel">Cancel</span>
                  <span class="Submit Save">Save</span>
                </div>
              </fieldset>
            </div>
          </div>
        </div> 
```

这很好用，除了我想让 MVC3 很棒的客户端/服务器端验证与它一起工作，我不知道如何去做。我的目标是在显示和输入下方显示任何验证错误消息，并且对于输入来获取设置样式所需的类，因为任何其他 htmlhelper 输入将是在这样的验证错误的情况下：

![验证示例](../Images/de094c9b55fc302d43e0d7459b1f0709.png)

**更新**

我很确定我需要做的就是让我的助手包含必要的 html 属性和 span 元素，这是当您使用“编辑”模板添加视图时自动生成的 HTML：

```
<div class="editor-field">
<input class="text-box single-line" data-val="true" data-val-email="This is not a valid e-mail address." data-val-required="You must provide an e-mail address." id="Email_Address" name="Email_Address" type="text" value="example@domain.com" />
</div>
<div class="editor-validation">
<span class="field-validation-valid" data-valmsg-for="Email_Address" data-valmsg-replace="true"></span>
</div> 
```

所以基本上我需要知道将它应用于我的助手的正确方法是什么，如果可能的话，让框架为我完成大部分工作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-01T15:43:34.190

HtmlHelper 上有一个方法，您可以在帮助方法中使用该方法来获取模型属性的验证属性。

```
IDictionary<string, object> valAttributes = htmlHelper.GetUnobtrustiveValidationAttributes(propertyName, metaData); 
```

然后，您可以遍历该集合并合并这些属性，就像您已经对其他属性所做的那样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T08:56:37.460

毫无疑问，您需要在客户端上运行一些 javascript（通常是 jQuery）来获得您所说的令人敬畏的客户端验证。有时这可以由框架生成，有时您需要自己编写。

你看过布拉德威尔逊的这个例子吗？[http://bradwilson.typepad.com/blog/2010/10/mvc3-unobtrusive-validation.html](http://bradwilson.typepad.com/blog/2010/10/mvc3-unobtrusive-validation.html)

这是另一个既完整又很简短的示例：http: [//www.falconwebtech.com/post/2012/04/21/MVC3-Custom-Client-Side-Validation-with-Unobtrusive-Ajax.aspx](http://www.falconwebtech.com/post/2012/04/21/MVC3-Custom-Client-Side-Validation-with-Unobtrusive-Ajax.aspx)

**编辑：**如果您想使用标准验证，请确保您引用了这些脚本：

您需要在 web.config 中使用它：

```
<appSettings>
    <add key="ClientValidationEnabled" value="true"/>
    <add key="UnobtrusiveJavaScriptEnabled" value="true"/>
</appSettings> 
```

这在您的页面（或母版页）中：

```
<script src="@Url.Content("~/Scripts/jquery.unobtrusive-ajax.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script> 
```

最后，请记住，如果您正在动态更改内容（例如，通过 ajax 或其他方式加载某些内容），那么您需要像这样重新解析不显眼的验证：

```
$.validator.unobtrusive.parse($('formid')); 
```

# silverlight - Silverlight 对齐网格

> ID：11948644
> 
> 赞同：1
> 
> 时间：2012-08-14T08:37:04.263
> 
> 标签：silverlight, silverlight-4.0, designer, silverlight-toolkit

我正在创建一个视觉设计器，我需要像 mocking Bird ( [Demo](https://gomockingbird.com/mockingbird/) ) 提供的 snap to grid 功能。是否有任何项目、用户控件或资源可以帮助我尽快在 Silverlight 中开发相同的内容。

我已经能够完成从工具箱（Listbox）到设计器屏幕中心的画布的拖放操作。但是在设计器中具有网格和网格功能的对齐功能非常棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T09:45:08.203

在您的 MouseMove 例程中，您需要进行额外的调整以允许捕捉。

```
void MainImage_MouseMove(object sender, MouseMoveEventArgs args){

    // ... assume you have calculated newX and newY already

    adjustSnap(ref newX, ref newY);

    // ... position your element

}

bool _isSnapOn = true;

void adjustSnap(ref double x, ref double y)
{
    const double gridWidth = 100;
    const double gridHeight = 100;

    if (_isSnapOn) 
    {

        if (x % gridWidth < gridWidth/2)
            x -= x % gridWidth;
        else
            x += (gridWidth - x % gridWidth);

        if (y % gridHeight < gridHeight / 2)
            y -= y % gridHeight;
        else
            y += (gridHeight - y % gridHeight);
    }
} 
```

# c - 我正在尝试编写一个从串行端口获取信息的程序（它不是文件）。

> ID：11948648
> 
> 赞同：-1
> 
> 时间：2012-08-14T08:37:41.547
> 
> 标签：c, serial-port

我从 C 语言开始。我正在尝试编写一个从串行端口获取信息的程序（它不是文件）。串口不断发送信息。我写了一个小程序，但我不断收到分段错误：11。主要目标是获取我们通过串行端口获取的信息以存储在文件中。谢谢您的帮助。

```
#include <stdio.h>   
#include <string.h>  
#include <unistd.h>  
#include <fcntl.h>   
#include <errno.h>   
#include <termios.h> 
#include <stdlib.h>
#include <unistd.h>
#include <termios.h>
#include <sys/ioctl.h>

int open_port();

main()
{

    printf("\n\nStarting...\n\n");
    open_port();

    return (1);
}

int open_port()
{
    int fd;
    int bytes;
    int string;

    char *input;

    struct termios options;

    /* open usb entry */
    fd = open("/dev/cu.usbserial-FTF6001E", O_RDWR | O_NOCTTY | O_NDELAY);

    /* check it could be opened */
    if (fd == -1)
    {
        perror("\n\nopen_port: Unable to open /dev/cu.usbserial-FTF6001E - ");
    }    
    else{

        ioctl(fd, FIONREAD, &bytes);
        printf("\n\nbytes: %d\n\n", bytes);

        fcntl(fd, F_SETFL, 0);

        /* get port options currently set*/
        tcgetattr(fd, &options);

        options.c_cflag &= ~PARENB;
        options.c_cflag &= ~CSTOPB;
        options.c_cflag &= ~CSIZE;
        options.c_cflag |= CS8;

        /* Set the baud rates to 19200...*/
        cfsetispeed(&options, B9600);
        cfsetospeed(&options, B9600);

        /* Enable the receiver and set local mode...*/
        options.c_cflag |= (CLOCAL | CREAD);

        /*Set the new options for the port...*/
        tcsetattr(fd, TCSANOW, &options);

        *input = (char) malloc (string * sizeof(char));

        if (input == 0){

            fputs("\n\nUps! Failed to allocate memory!!!\n\n",stdout);

        }

        if ( fgets (input , 100 , fd) != NULL ){
            puts (input);
            fclose (fd);
        }

        printf("input = %s", input);

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T08:45:50.407

你的问题出在这里：

```
*input = (char) malloc (string * sizeof(char)); 
```

首先，您要分配给`input`，而不是`*input`。因为`input`还不是指向任何地方的有效指针，`*input`所以是未定义的行为。

然而，即使你解决了这个问题，你也会遇到问题^((a))。您的`string`变量尚未初始化，因此将设置为程序启动时堆栈上的任何垃圾。`malloc`这意味着无论如何您都不太可能获得正确数量的内存返回。

此外，您将返回值`malloc`转换为 a `char`！您永远不应该在 C 中`malloc`转换（例如 to `char *`）的返回值，因为它隐藏了某些错误，这些错误可能会在以后导致其他问题。

您*当然*不应该将其转换为 a `char`，因为这几乎肯定会丢失信息。显式转换是您告诉编译器您知道自己在做什么-我认为这在这里不太准确:-)

事实上，我不确定你为什么要动态分配内存，因为你只读取了 100 个字节。抛弃`malloc`并定义`input`如下：

```
char input[100];
input[0] = '\0'; 
```

* * *

^((a))甚至可能还有*更多*问题，它们只是我立即想到的问题。但是，我建议先修复这些，因为它们绝对是您的段错误的原因。

然后，如果仍有问题，请返回另一个问题。

# c# - 在 C# 中捕获本机 C++ 异常

> ID：11948651
> 
> 赞同：7
> 
> 时间：2012-08-14T08:37:55.090
> 
> 标签：c#, c++, .net, exception

我有一些本机 C++ 类库，我用 C++ .NET 封装了它们，然后我从 C# 调用（三层！）。

我可以从 C++ .NET 中抛出异常并愉快地在 C# 中捕获它们。问题是我可以捕获我的本地 C++ 异常的唯一方法是捕获 System.Exception，这很好，但是在从 std::exception 到 System.Exception 的转换中，我丢失了关于错误的绝大多数信息（对于例如错误消息！）。我可以在 C++ .NET 层中捕获本机异常并作为 .NET 异常重新抛出，但这是一种侵入式解决方案，需要我在每个 C++ .NET 方法调用周围放置 try-catch 块（以捕获本机异常并重新抛出） .

是否有其他解决方案可以做到这一点，或者我只是不得不把手弄脏......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T09:10:24.373

您将不得不亲自动手，但是您可以通过创建一个预处理器宏来封装所有重复的 catch 逻辑，从而大大减少工作量。

我假设您将要捕获几种不同类型的异常，例如 MFC CException、std::exception 以及 SEH 异常。

您***可能***还想编写包装函数以返回 HRESULTS 并使用 SetErrorInfo（即转换为 COM 错误代码和错误信息） - 您可能会决定这为 .Net 提供了一个更清晰的接口，可以很好地将其转换为 .Net 异常。这将避免对 C++.Net 层的需求，并允许您使用 P/Invoke，并使其可从 VBA 调用。

或者您可能不会...只是指出选项！

# javascript - 手机相册应用

> ID：11948653
> 
> 赞同：1
> 
> 时间：2012-08-14T08:38:06.977
> 
> 标签：javascript, touch, gallery

我必须为手机应用程序制作一个照片库，我可以在其中从一张照片滑动到另一张照片。这是一个[例子](http://www.photoswipe.com/latest/examples/04-jquery-mobile.html#Gallery1)。

不幸的是我不能使用这个库，因为我需要全屏的惯性滚动效果，你应该可以捏放大。

有什么帮助吗？我该怎么做？有小费吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T09:08:58.000

看看[http://swipejs.com](http://swipejs.com)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T10:06:53.457

您可以尝试**[Galleria](http://galleria.io/)**或从**[5 个 jQuery Mobile Gallery 插件中选择一个](http://www.jquery4u.com/mobile/5-jquery-mobile-gallery-plugins/)**

# powershell - 使用 Powershell 以特定用户身份运行脚本块

> ID：11948655
> 
> 赞同：1
> 
> 时间：2012-08-14T08:38:09.350
> 
> 标签：powershell, deployment

将 Start-Process / Start-Job cmdlet 与 -Credential $cred 一起使用时，我无处可去

# 问题

我在部署中使用了一个服务帐户（无人值守模式）。以前它已添加到本地管理员组。我想通过从管理员组中删除该用户并明确分配文件夹权限给该用户来减少可能造成的损害。

*   我宁愿得到一个权限错误，也不愿执行一些意外的事情。删除项目 "$notdefined\*"

但是，在同一个 powershell 脚本中，我希望能够提升以执行以下操作：

*   sc.exe
*   需要管理员用户的应用程序池重启。

## 我失败的尝试之一

```
$job = Start-Job -ScriptBlock { 

param(
    [string]$myWebAppId
)

Import-Module WebAdministration

Write-Host "Will get the application pool of: IIS:\Sites\$myWebAppId and try to restart"
$appPoolName = Get-ItemProperty "IIS:\Sites\$myWebAppId" ApplicationPool 
Restart-WebAppPool "$($appPoolName.applicationPool)" 
Write-Host "restart of apppool succeeded."

} -Credential $cred -ArgumentList @("appname")

Write-Host "started completed"

Wait-Job $job

Write-Host "wait completed"

Receive-Job $job -Verbose

Write-Host "receive completed" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T19:27:46.197

我最终使用 WinRM quickconfig 启用了 WinRM

然后我就可以使用 Invoke-Command

```
 $cred = new-object -typename System.Management.Automation.PSCredential -argumentlist $username, $password

Invoke-Command {
    param(
        [string]$WebAppName 
    )
     #elevated command here

} -comp $computerName -cred $cred  -ArgumentList @("$myWebAppId") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T10:26:55.747

嗨，这可能是一个可能对您有用的示例，如果有效，请告诉我。

```
$global:credentials = new-object -typename System.Management.Automation.PSCredential 

$job = Start-Job -ScriptBlock {Get-Service} -Credential $credentials

Wait-Job $job

Receive-Job $job 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T21:43:18.267

虽然在 PowerShell 2.0 中没有快速简便的方法来执行此操作，但 3.0 版（目前在 RC 中，很可能是 RTW，因为明天 Windows 8 RTW 将出现在 MSDN/Technet 上）支持使用自定义身份配置远程端点的概念. 这将通过`Register-PSSessionConfiguration`您希望运行命令的计算机上的 cmdlet 来完成，该计算机可能是本地计算机。然后，在使用时`Invoke-Command`，提供一个带有`-Session`参数的会话。会话是使用`New-PSSession`cmdlet 创建的，它允许您指定计算机和配置名称（与自定义身份相关联）。

清如泥？

# ruby-on-rails - Omniauth + Google + Faraday + 背后代理 = 怎么设置代理？

> ID：11948656
> 
> 赞同：2
> 
> 时间：2012-08-14T08:38:12.673
> 
> 标签：ruby-on-rails, omniauth, rest-client, faraday

我的生产服务器是**Ubuntu 12**。
我正在使用**Devise + OmniAuth**来处理 Google 身份验证。
但是，当 Google 将控件返回给我的应用程序时，我收到一个错误**"Network is unreachable"**。
我认为这是因为服务器位于代理后面。

这是错误描述：

```
-------------------------------
Request:
-------------------------------

  * URL       : http://efiling.uipv.org/users/auth/google_oauth2/callback?state=f4eaca9fbed2a77c0baac50cdbdccab7eee671179bb8fc43&code=4/YRcyYZzkrfNh8mEBbenxaxyx5EjN.4snirEA-93MXOl05ti8ZT3a9mXdIcgI
  * IP address: 213.160.144.239
  * Parameters: {"state"=>"f4eaca9fbed2a77c0baac50cdbdccab7eee671179bb8fc43", "code"=>"4/YRcyYZzkrfNh8mEBbenxaxyx5EjN.4snirEA-93MXOl05ti8ZT3a9mXdIcgI"}
  * Rails root: /home/test/efiling2
  * Timestamp : 2012-08-14 11:22:27 +0300

-------------------------------
Session:
-------------------------------

  * session id: "5b45534889547514b01f59e39f21f74a"
  * data: {"session_id"=>"5b45534889547514b01f59e39f21f74a",
   "_csrf_token"=>"GJAFgiVO3zd/INIW6DqDh/VYGlvoZ8WuEKAX1HseJwA="}

-------------------------------
Environment:
-------------------------------

  * CONTENT_LENGTH                                 : 0
  * DOCUMENT_ROOT                                  : /home/test/efiling2/public
  * HTTP_ACCEPT                                    : text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
  * HTTP_ACCEPT_ENCODING                           : gzip, deflate
  * HTTP_ACCEPT_LANGUAGE                           : ru-ru,ru;q=0.8,en-us;q=0.5,en;q=0.3
  * HTTP_CACHE_CONTROL                             : max-age=0
  * HTTP_CONNECTION                                : keep-alive
  * HTTP_COOKIE                                    : _eFiling2_session=BAh7CkkiD3Nlc3Npb25faWQGOgZFRiIlNWI0NTUzNDg4OTU0NzUxNGIwMWY1OWUzOWYyMWY3NGFJIhBfY3NyZl90b2tlbgY7AEZJIjFHSkFGZ2lWTzN6ZC9JTklXNkRxRGgvVllHbHZvWjhXdUVLQVgxSHNlSndBPQY7AEZJIhRvbW5pYXV0aC5wYXJhbXMGOwBGewBJIhRvbW5pYXV0aC5vcmlnaW4GOwBGIidodHRwOi8vZWZpbGluZy51aXB2Lm9yZy8%2FbG9jYWxlPXVrSSITb21uaWF1dGguc3RhdGUGOwBGIjVmNGVhY2E5ZmJlZDJhNzdjMGJhYWM1MGNkYmRjY2FiN2VlZTY3MTE3OWJiOGZjNDM%3D--08b5e8bcf347ac5c845922cbf85f31a24907c100
  * HTTP_HOST                                      : efiling.uipv.org
  * HTTP_USER_AGENT                                : Mozilla/5.0 (Windows NT 5.1; rv:14.0) Gecko/20100101 Firefox/14.0.1
  * HTTP_VIA                                       : 1.1 proxy.ukrpatent.org (squid/3.1.19)
  * HTTP_X_FORWARDED_FOR                           : 10.11.10.56
  * PASSENGER_APP_SPAWNER_IDLE_TIME                : -1
  * PASSENGER_APP_TYPE                             : rack
  * PASSENGER_CONNECT_PASSWORD                     : [FILTERED]
  * PASSENGER_DEBUGGER                             : false
  * PASSENGER_ENVIRONMENT                          : development
  * PASSENGER_FRAMEWORK_SPAWNER_IDLE_TIME          : -1
  * PASSENGER_FRIENDLY_ERROR_PAGES                 : true
  * PASSENGER_GROUP                                :
  * PASSENGER_MAX_REQUESTS                         : 0
  * PASSENGER_MIN_INSTANCES                        : 1
  * PASSENGER_SHOW_VERSION_IN_HEADER               : true
  * PASSENGER_SPAWN_METHOD                         : smart-lv2
  * PASSENGER_USER                                 :
  * PASSENGER_USE_GLOBAL_QUEUE                     : true
  * PATH_INFO                                      : /users/auth/google_oauth2/callback
  * QUERY_STRING                                   : state=f4eaca9fbed2a77c0baac50cdbdccab7eee671179bb8fc43&code=4/YRcyYZzkrfNh8mEBbenxaxyx5EjN.4snirEA-93MXOl05ti8ZT3a9mXdIcgI
  * REMOTE_ADDR                                    : 213.160.144.239
  * REMOTE_PORT                                    : 62175
  * REQUEST_METHOD                                 : GET
  * REQUEST_URI                                    : /users/auth/google_oauth2/callback?state=f4eaca9fbed2a77c0baac50cdbdccab7eee671179bb8fc43&code=4/YRcyYZzkrfNh8mEBbenxaxyx5EjN.4snirEA-93MXOl05ti8ZT3a9mXdIcgI
  * SCGI                                           : 1
  * SCRIPT_NAME                                    :
  * SERVER_ADDR                                    : 10.10.18.3
  * SERVER_NAME                                    : efiling.uipv.org
  * SERVER_PORT                                    : 80
  * SERVER_PROTOCOL                                : HTTP/1.1
  * SERVER_SOFTWARE                                : nginx/1.2.2
  * UNION_STATION_SUPPORT                          : false
  * _                                              : _
  * action_dispatch.cookies                        : {"_eFiling2_session"=>"BAh7CkkiD3Nlc3Npb25faWQGOgZFRiIlNWI0NTUzNDg4OTU0NzUxNGIwMWY1OWUzOWYyMWY3NGFJIhBfY3NyZl90b2tlbgY7AEZJIjFHSkFGZ2lWTzN6ZC9JTklXNkRxRGgvVllHbHZvWjhXdUVLQVgxSHNlSndBPQY7AEZJIhRvbW5pYXV0aC5wYXJhbXMGOwBGewBJIhRvbW5pYXV0aC5vcmlnaW4GOwBGIidodHRwOi8vZWZpbGluZy51aXB2Lm9yZy8/bG9jYWxlPXVrSSITb21uaWF1dGguc3RhdGUGOwBGIjVmNGVhY2E5ZmJlZDJhNzdjMGJhYWM1MGNkYmRjY2FiN2VlZTY3MTE3OWJiOGZjNDM=--08b5e8bcf347ac5c845922cbf85f31a24907c100"}
  * action_dispatch.parameter_filter               : [:password, :efile, /RAW_POST_DATA/]
  * action_dispatch.remote_ip                      : 213.160.144.239
  * action_dispatch.request.content_type           :
  * action_dispatch.request.parameters             : {"state"=>"f4eaca9fbed2a77c0baac50cdbdccab7eee671179bb8fc43", "code"=>"4/YRcyYZzkrfNh8mEBbenxaxyx5EjN.4snirEA-93MXOl05ti8ZT3a9mXdIcgI"}
  * action_dispatch.request.path_parameters        : {}
  * action_dispatch.request.query_parameters       : {"state"=>"f4eaca9fbed2a77c0baac50cdbdccab7eee671179bb8fc43", "code"=>"4/YRcyYZzkrfNh8mEBbenxaxyx5EjN.4snirEA-93MXOl05ti8ZT3a9mXdIcgI"}
  * action_dispatch.request.request_parameters     : {}
  * action_dispatch.request.unsigned_session_cookie: {"session_id"=>"5b45534889547514b01f59e39f21f74a", "_csrf_token"=>"GJAFgiVO3zd/INIW6DqDh/VYGlvoZ8WuEKAX1HseJwA=", "omniauth.params"=>{}, "omniauth.origin"=>"http://efiling.uipv.org/?locale=uk", "omniauth.state"=>"f4eaca9fbed2a77c0baac50cdbdccab7eee671179bb8fc43"}
  * action_dispatch.secret_token                   : f7fa3943c0fc9f3b40a9bc5b0260fa43979de183fc338c08ec96277d6aeab1ce7973c188f93e978d4a513a08d871888520f41671d06a15315ffc6c3d43a1abfa
  * action_dispatch.show_exceptions                : true
  * exception_notifier.options                     : {:sender_address=>"\"Efiling\" <alex_drobazko@uipv.org>", :exception_recipients=>["drobazko@gmail.com"], :email_prefix=>"[Efiling Error Report] ", :sections=>["request", "session", "environment", "backtrace"], :background_sections=>["backtrace", "data"], :verbose_subject=>true, :normalize_subject=>false, :ignore_exceptions=>["ActiveRecord::RecordNotFound", "AbstractController::ActionNotFound", "ActionController::RoutingError"], :ignore_crawlers=>[], :ignore_if=>#<Proc:0xa55f0b4@/home/test/.rvm/gems/ruby-1.9.3-p194/gems/exception_notification-2.6.1/lib/exception_notifier.rb:30 (lambda)>}
  * omniauth.origin                                : http://efiling.uipv.org/?locale=uk
  * omniauth.params                                : {}
  * omniauth.strategy                              : #<OmniAuth::Strategies::GoogleOauth2:0xafdbca4>
  * rack.errors                                    : #<IO:0x9a598f4>
  * rack.input                                     : #<PhusionPassenger::Utils::RewindableInput:0xafc2718>
  * rack.multiprocess                              : true
  * rack.multithread                               : false
  * rack.request.cookie_hash                       : {"_eFiling2_session"=>"BAh7CkkiD3Nlc3Npb25faWQGOgZFRiIlNWI0NTUzNDg4OTU0NzUxNGIwMWY1OWUzOWYyMWY3NGFJIhBfY3NyZl90b2tlbgY7AEZJIjFHSkFGZ2lWTzN6ZC9JTklXNkRxRGgvVllHbHZvWjhXdUVLQVgxSHNlSndBPQY7AEZJIhRvbW5pYXV0aC5wYXJhbXMGOwBGewBJIhRvbW5pYXV0aC5vcmlnaW4GOwBGIidodHRwOi8vZWZpbGluZy51aXB2Lm9yZy8/bG9jYWxlPXVrSSITb21uaWF1dGguc3RhdGUGOwBGIjVmNGVhY2E5ZmJlZDJhNzdjMGJhYWM1MGNkYmRjY2FiN2VlZTY3MTE3OWJiOGZjNDM=--08b5e8bcf347ac5c845922cbf85f31a24907c100"}
  * rack.request.cookie_string                     : _eFiling2_session=BAh7CkkiD3Nlc3Npb25faWQGOgZFRiIlNWI0NTUzNDg4OTU0NzUxNGIwMWY1OWUzOWYyMWY3NGFJIhBfY3NyZl90b2tlbgY7AEZJIjFHSkFGZ2lWTzN6ZC9JTklXNkRxRGgvVllHbHZvWjhXdUVLQVgxSHNlSndBPQY7AEZJIhRvbW5pYXV0aC5wYXJhbXMGOwBGewBJIhRvbW5pYXV0aC5vcmlnaW4GOwBGIidodHRwOi8vZWZpbGluZy51aXB2Lm9yZy8%2FbG9jYWxlPXVrSSITb21uaWF1dGguc3RhdGUGOwBGIjVmNGVhY2E5ZmJlZDJhNzdjMGJhYWM1MGNkYmRjY2FiN2VlZTY3MTE3OWJiOGZjNDM%3D--08b5e8bcf347ac5c845922cbf85f31a24907c100
  * rack.request.query_hash                        : {"state"=>"f4eaca9fbed2a77c0baac50cdbdccab7eee671179bb8fc43", "code"=>"4/YRcyYZzkrfNh8mEBbenxaxyx5EjN.4snirEA-93MXOl05ti8ZT3a9mXdIcgI"}
  * rack.request.query_string                      : state=f4eaca9fbed2a77c0baac50cdbdccab7eee671179bb8fc43&code=4/YRcyYZzkrfNh8mEBbenxaxyx5EjN.4snirEA-93MXOl05ti8ZT3a9mXdIcgI
  * rack.run_once                                  : false
  * rack.session                                   : {"session_id"=>"5b45534889547514b01f59e39f21f74a", "_csrf_token"=>"GJAFgiVO3zd/INIW6DqDh/VYGlvoZ8WuEKAX1HseJwA="}
  * rack.session.options                           : {:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :id=>"5b45534889547514b01f59e39f21f74a"}
  * rack.url_scheme                                : http
  * rack.version                                   : [1, 0]
  * warden                                         : Warden::Proxy:92171780 @config={:default_scope=>:user, :scope_defaults=>{}, :default_strategies=>{:user=>[:rememberable, :database_authenticatable]}, :intercept_401=>false, :failure_app=>#<Devise::Delegator:0xbf7cb04>}

  * Process: 31617

  * Server : STORK

-------------------------------
Backtrace:
-------------------------------

  /home/test/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/net/http.rb:762:in `initialize'
  /home/test/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/net/http.rb:762:in `open'
  /home/test/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/net/http.rb:762:in `block in connect'
  /home/test/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/timeout.rb:54:in `timeout'
  /home/test/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/timeout.rb:99:in `timeout'
  /home/test/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/net/http.rb:762:in `connect'
  /home/test/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/net/http.rb:755:in `do_start'
  /home/test/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/net/http.rb:744:in `start'
  /home/test/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/net/http.rb:1284:in `request'
  rest-client (1.6.7) lib/restclient/net_http_ext.rb:51:in `request'
  faraday (0.8.2) lib/faraday/adapter/net_http.rb:73:in `perform_request'
  faraday (0.8.2) lib/faraday/adapter/net_http.rb:36:in `call'
  faraday (0.8.2) lib/faraday/request/url_encoded.rb:14:in `call'
  faraday (0.8.2) lib/faraday/connection.rb:226:in `run_request'
  oauth2 (0.8.0) lib/oauth2/client.rb:88:in `request'
  oauth2 (0.8.0) lib/oauth2/client.rb:131:in `get_token'
  oauth2 (0.8.0) lib/oauth2/strategy/auth_code.rb:29:in `get_token'
  omniauth-oauth2 (1.1.0) lib/omniauth/strategies/oauth2.rb:100:in `build_access_token'
  omniauth-oauth2 (1.1.0) lib/omniauth/strategies/oauth2.rb:75:in `callback_phase'
  omniauth (1.1.0) lib/omniauth/strategy.rb:219:in `callback_call'
  omniauth (1.1.0) lib/omniauth/strategy.rb:175:in `call!'
  omniauth (1.1.0) lib/omniauth/strategy.rb:157:in `call'
  sass (3.1.20) lib/sass/plugin/rack.rb:54:in `call'
  exception_notification (2.6.1) lib/exception_notifier.rb:34:in `call'
  warden (1.2.1) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.1) lib/warden/manager.rb:34:in `catch'
  warden (1.2.1) lib/warden/manager.rb:34:in `call'
  actionpack (3.0.9) lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
  actionpack (3.0.9) lib/action_dispatch/middleware/head.rb:14:in `call'
  rack (1.2.5) lib/rack/methodoverride.rb:24:in `call'
  actionpack (3.0.9) lib/action_dispatch/middleware/params_parser.rb:21:in `call'
  actionpack (3.0.9) lib/action_dispatch/middleware/flash.rb:182:in `call'
  actionpack (3.0.9) lib/action_dispatch/middleware/session/abstract_store.rb:149:in `call'
  actionpack (3.0.9) lib/action_dispatch/middleware/cookies.rb:302:in `call'
  activerecord (3.0.9) lib/active_record/query_cache.rb:32:in `block in call'
  activerecord (3.0.9) lib/active_record/connection_adapters/abstract/query_cache.rb:28:in `cache'
  activerecord (3.0.9) lib/active_record/query_cache.rb:12:in `cache'
  activerecord (3.0.9) lib/active_record/query_cache.rb:31:in `call'
  activerecord (3.0.9) lib/active_record/connection_adapters/abstract/connection_pool.rb:354:in `call'
  actionpack (3.0.9) lib/action_dispatch/middleware/callbacks.rb:46:in `block in call'
  activesupport (3.0.9) lib/active_support/callbacks.rb:416:in `_run_call_callbacks'
  actionpack (3.0.9) lib/action_dispatch/middleware/callbacks.rb:44:in `call'
  rack (1.2.5) lib/rack/sendfile.rb:106:in `call'
  actionpack (3.0.9) lib/action_dispatch/middleware/remote_ip.rb:48:in `call'
  actionpack (3.0.9) lib/action_dispatch/middleware/show_exceptions.rb:47:in `call'
  railties (3.0.9) lib/rails/rack/logger.rb:13:in `call'
  rack (1.2.5) lib/rack/runtime.rb:17:in `call'
  activesupport (3.0.9) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.2.5) lib/rack/lock.rb:13:in `block in call'
  <internal:prelude>:10:in `synchronize'
  rack (1.2.5) lib/rack/lock.rb:13:in `call'
  actionpack (3.0.9) lib/action_dispatch/middleware/static.rb:30:in `call'
  railties (3.0.9) lib/rails/application.rb:168:in `call'
  railties (3.0.9) lib/rails/application.rb:77:in `method_missing'
  passenger (3.0.14) lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
  passenger (3.0.14) lib/phusion_passenger/abstract_request_handler.rb:516:in `accept_and_process_next_request'
  passenger (3.0.14) lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
  passenger (3.0.14) lib/phusion_passenger/rack/application_spawner.rb:206:in `start_request_handler'
  passenger (3.0.14) lib/phusion_passenger/rack/application_spawner.rb:171:in `block in handle_spawn_application'
  passenger (3.0.14) lib/phusion_passenger/utils.rb:470:in `safe_fork'
  passenger (3.0.14) lib/phusion_passenger/rack/application_spawner.rb:166:in `handle_spawn_application'
  passenger (3.0.14) lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  passenger (3.0.14) lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  passenger (3.0.14) lib/phusion_passenger/abstract_server.rb:180:in `start'
  passenger (3.0.14) lib/phusion_passenger/rack/application_spawner.rb:129:in `start'
  passenger (3.0.14) lib/phusion_passenger/spawn_manager.rb:253:in `block (2 levels) in spawn_rack_application'
  passenger (3.0.14) lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
  passenger (3.0.14) lib/phusion_passenger/spawn_manager.rb:246:in `block in spawn_rack_application'
  passenger (3.0.14) lib/phusion_passenger/abstract_server_collection.rb:82:in `block in synchronize'
  <internal:prelude>:10:in `synchronize'
  passenger (3.0.14) lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
  passenger (3.0.14) lib/phusion_passenger/spawn_manager.rb:244:in `spawn_rack_application'
  passenger (3.0.14) lib/phusion_passenger/spawn_manager.rb:137:in `spawn_application'
  passenger (3.0.14) lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
  passenger (3.0.14) lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
  passenger (3.0.14) lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
  passenger (3.0.14) helper-scripts/passenger-spawn-server:99:in `<main>' 
```

如您所见，法拉第无法连接网络。

**如何设置 faraday 或 rest_client 以使用代理设置？**

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T13:49:46.097

我已经通过使用猴子修补 Oauth2 解决了问题。

```
require 'faraday'
module OAuth2
  # The OAuth2::Client class
  class Client 
    # The Faraday connection object
    def connection
        options[:connection_opts].merge!({:proxy => 'http://10.10.16.8:3128'})  
      @connection ||= begin
        conn = Faraday.new(site, options[:connection_opts])
        conn.build do |b|
          options[:connection_build].call(b)
        end if options[:connection_build]
        conn
      end
    end 
  end
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-12-12T16:29:54.143

这是一个更好的解决方案：

```
Rails.application.config.middleware.use OmniAuth::Builder do
  provider :google_oauth2, 'login', 'password' {
    scope: ['userinfo.email'],
    access_type: 'online',
    client_options: {connection_opts: {proxy: 'http://myproxy:3128'}}
  }
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T12:30:47.803

放入初始化器

```
 RestClient.proxy = "http://proxy.example.com/" 
```

# android - 如何使用 AsyncHttpClient Android 上传多个文件

> ID：11948660
> 
> 赞同：7
> 
> 时间：2012-08-14T08:38:25.027
> 
> 标签：android, post, multipart, android-async-http

我知道我可以从 AsyncHttpClient 上传单个文件

[http://loopj.com/android-async-http/](http://loopj.com/android-async-http/)

```
File myFile = new File("/path/to/file.png");
RequestParams params = new RequestParams();
try {
    params.put("profile_picture", myFile);
} catch(FileNotFoundException e) {} 
```

但是我必须通过多部分发布将多个文件上传到服务器。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-02-17T18:57:27.807

您可以将文件数组作为文件键的值传递。为此，请遵循以下代码：

```
File[] myFiles = { new File("pic.jpg"), new File("pic1.jpg") }; 
RequestParams params = new RequestParams();
try {
    params.put("profile_picture[]", myFiles);
} catch(FileNotFoundException e) {

} 
```

此外，如果您想要一个动态数组，您可以使用 ArrayList 并使用 .toArray() 方法转换为 File[] 类型

```
ArrayList<File> fileArrayList = new ArrayList<>();

//...add File objects to fileArrayList

File[] files = new File[fileArrayList.size()];  
fileArrayList.toArray(files); 
```

希望这有帮助。=D

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T09:35:35.250

创建 SimpleMultipartEntity 对象并为要上传的每个文件调用 addPart。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-08-28T08:19:42.033

```
 File[] files = lst.toArray(new File[lst.size()]);

    try {
        params.put("media[]", files);
    } catch (FileNotFoundException e) {
        e.printStackTrace();
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-11T12:09:36.237

您应该将所有文件作为参数传递给 params。例如：

```
params.put("file_one", myFiles1);
params.put("file_two", myFiles2) 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2014-04-21T11:13:28.740

您应该使用以下代码：

```
public static void fileUpLoad(String url,File file,AsyncHttpResponseHandler asyncHttpResponseHandler){
    RequestParams requestParams=new RequestParams();

    try{
        requestParams.put("profile_picture", file,"application/octet-stream");
        client.post(url, requestParams, new AsyncHttpResponseHandler());
    } catch (Exception e) {
        e.printStackTrace();
    }
} 
```

# ios - 未创建 SQLite 表

> ID：11948661
> 
> 赞同：0
> 
> 时间：2012-08-14T08:38:28.467
> 
> 标签：ios, sqlite

我的 viewDidLoad() 中有以下代码：

```
// Create a string containing the full path to the sqlite.db inside the documents folder
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];
NSString *databasePath = [documentsDirectory stringByAppendingPathComponent:@"sqlite.db"];

// Check to see if the database file already exists
bool databaseAlreadyExists = [[NSFileManager defaultManager] fileExistsAtPath:databasePath];

// Open the database and store the handle as a data member
if (sqlite3_open([databasePath UTF8String], &databaseHandle) == SQLITE_OK)
{
    // Create the database if it doesn't yet exists in the file system
    if (!databaseAlreadyExists)
    {
        // Create the PERSON table
        const char *sqlStatement = "CREATE TABLE IF NOT EXISTS PERSON (ID INTEGER PRIMARY KEY AUTOINCREMENT, FIRSTNAME TEXT, LASTNAME TEXT, BIRTHDAY DATE)";
        char *error;
        if (sqlite3_exec(databaseHandle, sqlStatement, NULL, NULL, &error) == SQLITE_OK)
        {
            // Create the ADDRESS table with foreign key to the PERSON table
            sqlStatement = "CREATE TABLE IF NOT EXISTS ADDRESS (ID INTEGER PRIMARY KEY AUTOINCREMENT, STREETNAME TEXT, STREETNUMBER INT, PERSONID INT, FOREIGN KEY(PERSONID) REFERENCES PERSON(ID))";
            if (sqlite3_exec(databaseHandle, sqlStatement, NULL, NULL, &error) == SQLITE_OK)
            {
                NSLog(@"Database and tables created.");
            }
            else
            {
                NSLog(@"Error: %s", error);
            }
        }
        else
        {
            NSLog(@"Error: %s", error);
        }
    }
}

sqlite3_close(databaseHandle); 
```

我希望这两个表都在文件夹 /Users/ ******* /Library/Application Support/iPhone Simulator/5.1/Applications/ ******* /Documents/ 中创建。

但是当我去那个文件夹并输入 sqlite3 和 .schema 时，什么都没有出现。我确实看到 sqlite.db 是在该文件夹中创建的。

你知道为什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T07:26:52.800

复制数据库后，以编程方式创建表..它肯定会工作！！！！

# sql - 我可以找到包含列名 X 的表吗？

> ID：11948663
> 
> 赞同：1
> 
> 时间：2012-08-14T08:38:30.487
> 
> 标签：sql, oracle11g

我有这个大型数据库，有人让我找出哪些表的列名为 X。这可能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-14T08:41:46.960

您可以像这样查询[all_tab_columns](http://docs.oracle.com/cd/B19306_01/server.102/b14237/statviews_2094.htm)：

```
SELECT table_name
FROM all_tab_columns
WHERE column_name LIKE '%your_search_column_name%' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T08:41:08.333

看看`All_tab_columns`系统表。

[http://docs.oracle.com/cd/B19306_01/server.102/b14237/statviews_2094.htm](http://docs.oracle.com/cd/B19306_01/server.102/b14237/statviews_2094.htm)

```
 SELECT
      TABLE_NAME, COLUMN_NAME
   FROM
      ALL_TAB_COLUMNS
   WHERE 
      COLUMN_NAME = ... 
```

# c# - 媒体文件的站点代码 URL

> ID：11948664
> 
> 赞同：2
> 
> 时间：2012-08-14T08:38:31.143
> 
> 标签：c#, sitecore, sitecore6

我有一个在 sitecore 媒体库中自动创建 PDF 文件的功能。我想在另一个网页上显示一个链接以下载或查看此 PDF。

```
Sitecore.Data.Database context= Sitecore.Configuration.Factory.GetDatabase("master");
Sitecore.Data.Items.MediaItem item = (Sitecore.Data.Items.MediaItem)context.GetItem("/sitecore/Media Library/Requests/"+ddlRequests.SelectedValue+".pdf"); 
```

要获取项目链接，我使用以下行。这条线显然不会执行。

```
Sitecore.Resources.Media.MediaManager.GetMediaUrl(item); 
```

任何想法我在这里做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T08:51:23.853

看起来您的代码`.pdf`在没有查询的情况下应该可以正常工作。在媒体库中选择一个 pdf 文件，然后在`content`选项卡上检查属性的值是什么`Item Path`。这是您应该在查询中使用的（所以很可能没有`.pdf`）：

```
Sitecore.Data.Database db = Sitecore.Configuration.Factory.GetDatabase("master");
Sitecore.Data.Items.MediaItem item = (Sitecore.Data.Items.MediaItem)db.GetItem("/sitecore/Media Library/Requests/" + ddlRequests.SelectedValue);
Sitecore.Resources.Media.MediaManager.GetMediaUrl(item); 
```

# google-apps-script - Google Apps 脚本 HTML 服务附加 HTML

> ID：11948666
> 
> 赞同：1
> 
> 时间：2012-08-14T08:38:55.837
> 
> 标签：google-apps-script

嗨 GAS StackOverflow 指南，

您如何在此处提到的初始 doGet 之后附加另一个 HTML 代码/文件？ [https://developers.google.com/apps-script/html_service#HTMLFiles](https://developers.google.com/apps-script/html_service#HTMLFiles)

它说它可以使用 HtmlOutput 类追加，但没有成功：

```
function doSomething() {
//append another HTML file
return HtmlService.createHtmlOutputFromFile('headers');
}

function doSomething2() {
//append another HTML file
return HtmlService.createHtmlOutputFromFile.append('headers');
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T12:54:16.330

HtmlOutput 上的 append 方法用于在初始 doGet 函数中进行附加（如果您正在逐段构建 HTML）。以后您不能使用它来追加更多内容，但您可以使用在任何其他客户端 JavaScript 中使用的常规 document.append() 来执行此操作。像这样的东西：

**在客户端**

```
google.script.run.withSuccessHandler(function(x) { document.append(x); }).doSomething2() 
```

**在服务器上**

```
function doSomething2() { return "the stuff I want to append"; } 
```

# javascript - Javascript 中的日期转换

> ID：11948667
> 
> 赞同：1
> 
> 时间：2012-08-14T08:38:57.287
> 
> 标签：javascript, date

```
alert(new Date("8/14/2012 4:24:34 PM"));
Tue Aug 14 2012 16:24:34 GMT+0800 (Malay Peninsula Standard Time)

alert(new Date("14/08/2012 4:31:29 PM"));
Invalid Date 
```

我从 datejs 尝试了 date.parseExact，它不起作用。

有没有其他方法可以将“14/08/2012 4:31:29 PM”转换为 Date 对象？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T08:43:07.100

使用正则表达式快速交换怎么样？

```
alert(new Date("14/08/2012 4:31:29 PM".replace(/^(\d+)\/(\d+)/,'$2/$1'))); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T08:48:45.617

您尝试过使用 datejs 库提供的 Date.parse 函数而不是 Date.parseExact

```
Date.parse("14/08/2012 4:31:29 PM") 
```

# c# - Windows 服务注销

> ID：11948669
> 
> 赞同：0
> 
> 时间：2012-08-14T08:39:02.080
> 
> 标签：c#, windows, windows-services

作为我们部署脚本的一部分，我们的 windows 服务是

1.  停止
2.  未注册
3.  挂号的
4.  开始

问题是有时注销需要注销并登录。

什么时候需要这样做，有什么办法可以避免吗？目前脚本有时会失败，我们不得不手动执行此操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T09:03:43.730

您只需要终止 Windows 服务进程以避免它被“标记为删除”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T09:10:50.003

从[这个页面](http://www.rodneybeede.com/How_to_delete_a_Windows_service_without_restarting.html)：

当服务在仍然停止时未注册时，似乎会发生这种情况。

使用注册表项进行*破解*可能是最后的手段；我会尝试等到服务停止。

# javascript - innerHTML 分配在 UIWebView 中不起作用

> ID：11948670
> 
> 赞同：1
> 
> 时间：2012-08-14T08:39:02.643
> 
> 标签：javascript, ios, uiwebview, innerhtml

我在 UIWebView 中的 innerHTML 有一个奇怪的问题尝试在 innerHTML 中分配后，所有内容都消失了。

原来innerHTML的元素不是空的，包含了带图片的文字，并分成了段落。

如果我这样做：

```
NSString *jsString = [[NSString alloc] initWithFormat:@"document.getElementsByTagName('div')[0].innerHTML='qwerty';"];
[webview stringByEvaluatingJavaScriptFromString:jsString]; 
```

我有空的innerHTML！

如果我这样做：

```
NSString *jsString = [[NSString alloc] initWithFormat:@"document.getElementsByTagName('div')[0].innerHTML=document.getElementsByTagName('div')[0].innerHTML;"];
[webview stringByEvaluatingJavaScriptFromString:jsString]; 
```

我有空的innerHTML！

如果我这样做：

```
NSString *jsString = [[NSString alloc] initWithFormat:@"document.getElementsByTagName('div')[0].textContent=document.getElementsByTagName('div')[0].innerHTML;"];
[webview stringByEvaluatingJavaScriptFromString:jsString]; 
```

在我的元素中，我看到带有文本表示 HTML 标签的文本（如预期的那样）

但我不``t understand why assignment to innerHTML don`工作！

# objective-c - PDF 创建和文本格式化

> ID：11948671
> 
> 赞同：0
> 
> 时间：2012-08-14T08:39:03.843
> 
> 标签：objective-c, ios, pdf, formatting

在 iPhone 上以编程方式创建 PDF 时有关文本格式的问题。

我有一个格式化`NSString`的标签`(\t)`。在调试输出上，它看起来很完美，但是当这个字符串用于生成 PDF 时，选项卡已经消失并被一个空格替换。有什么想法吗？

（试过像Courier这样的字体，没有运气，而且页面边界足够大，还有足够的空间来显示文字）

这是我用来制作 PDF 的代码：

```
- (void)drawStuffInContext:(CGContextRef)ctx {
    UIFont *font = [UIFont fontWithName:@"Arial" size:10];

    CGRect textRect = CGRectInset(kPDFPageBounds, 36, 36);
    [textHolder drawInRect:textRect withFont:font];

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T12:06:45.253

你不是很清楚地描述你到底在做什么。

但我要尝试的第一件事是：

*   自己用空格替换你的标签 - 每个标签使用尽可能多的空格让你开心。
*   然后将此新字符串/文本转换为 PDF。

# android - 列表视图中的按钮操作

> ID：11948677
> 
> 赞同：2
> 
> 时间：2012-08-14T08:39:31.847
> 
> 标签：android

我有一个带有自定义适配器的列表视图。适配器的布局有一些充当按钮的 ImageView。我为这些实现了 onclicklistner

```
listView.setOnItemClickListener(new OnItemClickListener() {

    public void onItemClick(AdapterView<?> arg0, View arg1,int arg2, long arg3) {

        ImageView btn = (ImageView) arg1.findViewById(R.id.btn);
        btn.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
            // TODO Auto-generated method stub
            // for the  button action
            Log.d("Button Action", "Clicked");
            }
        });

    }

} 
```

当我第一次单击按钮时，它不会做任何事情。我必须单击两次才能使按钮工作。为什么是这样。谁能指出我的错误

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T08:43:52.700

检查这是带有按钮的自定义列表视图的非常好的示例...

[带按钮的自定义 ListView](http://www.codemobiles.com/forum/viewtopic.php?t=876)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T08:51:51.577

我建议您查看 Aze 的上述链接，它真的很棒。

我认为第一个按钮单击将焦点放在列表项上。

# javascript - 缩放更改时的缩放标记

> ID：11948678
> 
> 赞同：1
> 
> 时间：2012-08-14T08:39:32.960
> 
> 标签：javascript, google-maps, google-maps-markers, scaling

对于圣诞市场，我目前正在制作 Google Maps 地图。我加载了代表不同大小的市场摊位的不同图标的精灵：

![在此处输入图像描述](../Images/87c9ad39099751e1c0f2afe636efe5d3.png)

（灰色版本是停用状态）：
[http ://www.felixkittler.de/area51/googlemaps/buden.html](http://www.felixkittler.de/area51/googlemaps/buden.html)

到目前为止一切正常，只要用户不放大或缩小 - 如果是这样，展位没有缩放，因此看起来太大或太小。

我想我可能会预定义另一组图标，包含相同的标记，但带有缩放的标记图像。不幸的是，我无法让它工作：

```
for(i=0; i<markerSizes.length; i++){
    var aktiv = new google.maps.MarkerImage(
        "http://www.felixkittler.de/area51/googlemaps/buden/SPRITE.png", 
        new google.maps.Size(markerSizes[i], 27, "px", "px"),
        new google.maps.Point(85, i*30),
        new google.maps.Point(0, 0),
        new google.maps.Size(markerSizes[i]*2, 14) //this doesn't work!!!
    );
    gicons_aktiv.push(aktiv);
} 
```

我还没有跟踪 zoom_changed 事件，但我设置了一个应该使用缩放图标的文件版本：
[http](http://www.felixkittler.de/area51/googlemaps/buden_scaled.html) ://www.felixkittler.de/area51/googlemaps/buden_scaled.html （按比例放大（x2） 116 和 125）。

任何想法如何解决这个问题？由于这不是我使用的唯一精灵，我想避免上传同一个精灵的多个分辨率，放大或缩小会更方便。

谢谢！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T10:04:38.500

所以，我只是自己发现了。
感谢 Marc Ridey 的[这篇博](http://blog.mridey.com/2010/03/using-markerimage-in-maps-javascript.html)文！

原始尺寸的标记图像：

```
var original = new google.maps.MarkerImage(
    "http://www.path/to/sprite.png", 
    new google.maps.Size(markerSizes[i], 24), //marker height=24, width in array
    new google.maps.Point(0, i*30), // each row of the sprite grid is 30px tall
    new google.maps.Point(0, 0),
    null // use file dimensions 168 x 270px
); 
```

用于显示缩小 50% 的标记的标记图像：

```
var half = new google.maps.MarkerImage(
    "http://www.path/to/sprite.png", 
    new google.maps.Size(markerSizes[i]/2, 12),
    new google.maps.Point(0, i*15),
    new google.maps.Point(0, 0),
    new google.maps.Size(84, 135) // original dimension of sprite: 168 x 270 px
); 
```

希望这对任何人都有帮助（：

# php - PHP - Wordpress - 插件小部件更新功能 - 更新数组值 [Foreach 循环不起作用]

> ID：11948682
> 
> 赞同：3
> 
> 时间：2012-08-14T08:39:39.300
> 
> 标签：php, function, foreach, wordpress

我正在开发一个带有小部件的 wordpress 插件。目前，小部件的更新功能如下所示。

```
function update($new, $old){
    $instance = $old;
    //Update Values
    $instance['element-one'] = $new['element-one'];
    $instance['element-two'] = $new['element-two'];
    $instance['element-three'] = $new['element-three'];
    $instance['element-four'] = $new['element-four'];
    //Return New Instance
    return $instance; 
```

这按预期工作。但是我有一长串元素，为了代码的简洁，我试图用一个简单的函数来实现它们，如下所示：

```
function update($new, $old){
    $instance = $old;
    //Update Values
    foreach($instance as $k => $v){
        $instance[$k] = $new[$k];
    }
    //Return New Instance
    return $instance; 
```

虽然这似乎不起作用。如果我使用此功能，则不会更新小部件值。所以只是为了测试它是否按我想要的方式工作......我写了一个运行良好的示例脚本。脚本如下。

```
$a = array(
  'a' => '1',
  'b' => '2',
  'c' => '3'
);

$b = array(
  'a' => 'A',
  'b' => 'B',
  'c' => 'C'
);

function swap_values($old, $new){
  $result = $old;
  foreach($result as $k => $v){
    $result[$k] = $new[$k];
  }
  return $result;
}

$res = swap_values($a, $b);
var_dump($res); 
```

该脚本运行良好，它交换了数组的值，但似乎由于某种原因这在 wordpress 中表现不佳。

我在做这件事时意识到的另外一些奇怪的事情是

*   如果假设我在小部件的`$instance`数组中声明了一些元素`form function`，并且更新函数正在更新它们，就像`$instance['old'] = $instance['new'];`它工作正常一样。另外，如果我安装并激活了插件，然后我更改更新功能以使用`foreach loop`它们工作正常。
*   但是，在我将更新函数更改为使用 foreach 循环之后，如果我向`$instance`数组中添加更多元素，它们不会被更新，而之前声明的元素是。
*   此外，如果我在单独的 wordpress 安装上安装并激活此插件 [在更新更新功能以使用 foreach 循环之后]，则似乎没有任何元素更新。

我确信我缺少一些非常小的东西。您的任何帮助或建议将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T03:16:56.147

我找到了一个简单的解决方案：不要在小部件的扩展中包含更新功能。

核心只是简单地返回 $new_instance 变量作为默认值（wp-includes/widgets.php）：

```
function update($new_instance, $old_instance) {
    return $new_instance;
} 
```

我已经在自己的小部件中成功测试了这一点，并确定制作自己的更新功能对于过滤用户输入很有用，但似乎没有必要。

# iphone - IOS sudzc arc empty 第二个响应，第一次工作没有问题

> ID：11948686
> 
> 赞同：0
> 
> 时间：2012-08-14T08:40:25.197
> 
> 标签：iphone, ios, sudzc

我在我的 iPhone 项目中使用从 sudzc 生成的 acr 代码。我已经导入了丢失的 h 文件，修复了 body 标签，一切正常……对于任何函数的第一次调用。我在代码中的多个位置调用函数，例如在 viewDidLoad 中：

```
TestWsdlService_ManagerService* service = [TestWsdlService_ManagerService service];
 [service getAttended:self action:@selector(getEventsHandler:) email: @"testmail@bla.com" password: @"testpass"]; 
```

第一次通话效果很好。日志记录已启用，因此我看到了正确的帖子和正确的响应。当我再次调用相同的函数时，我只看到正确的帖子，但它给了我一个空响应的错误（没有 xml，什么都没有）：

```
2012-08-14 10:26:55.574 Test[1768:11603] nserror Error Domain=CXMLErrorDomain Code=1 

"Unknown error" UserInfo=0x6e5fea0 {NSLocalizedDescription=Unknown error}
2012-08-14 10:26:55.580 Test[1768:11603] Error: Unknown error 
```

我也用这样的单例尝试过：

```
static TestSoapSingleton *sharedInstance = nil;

+ (TestSoapSingleton *)sharedInstance {
    if (sharedInstance == nil) {
        sharedInstance = [[super allocWithZone:NULL] init];
    }

    return sharedInstance;
}

- (id)init
{
    self = [super init];

    if (self) {
        self.manager = [TestWsdlApi_ManagerService service];
        self.manager.logging = YES;
        self.username =@"testmail@blub.com";
        self.password = @"test pass";
    } 
```

但最后我得到了同样的错误。该错误在 initWithData 函数的 CXMLDocument.m 中引发，因为 inData 为空 (size=0)。同样在SoapRequest.m 中的connectionDidFinishLoading 函数中，receivedData 是空的。

我尝试调试 SoapRequest.m 并检测到，在函数的第一次和第二次调用中调用了 didReceiveResponse，但仅在第一次调用了 didReceiveData。

如果我像这样在彼此后面进行两个方法调用：

```
TestWsdlService_ManagerService* service = [TestWsdlService_ManagerService service];
     [service getAttended:self action:@selector(getEventsHandler:) email: @"testmail@bla.com" password: @"testpass"];

TestWsdlService_ManagerService* service2 = [TestWsdlService_ManagerService service];
     [service2 getAttended:self action:@selector(getEventsHandler:) email: @"testmail@bla.com" password: @"testpass"]; 
```

它也可以正常工作。

希望有人有解决办法，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T17:21:07.770

几个小时后，我发现了错误...网络服务器问题/会话问题。zend::auth 适配器出现问题，但我想知道为什么 ksoap2 api 正在处理会话事物而 nsurlconnection 不是^^

# ios - UILocalNotification - 每 2 周重复一次

> ID：11948687
> 
> 赞同：0
> 
> 时间：2012-08-14T08:40:26.087
> 
> 标签：ios, cocoa-touch, uilocalnotification, repeat

我怎样才能有一个每 2 周重复一次的重复间隔？

[Pocket Lists](http://itunes.apple.com/us/app/pocket-lists/id482537116?ls=1&mt=8)使用`UILocalNotification`s 并且他们以某种方式实现了它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T08:50:41.203

你不能用repeatInterval 做到这一点。

你可以做的是：

在推送时处理本地通知，只需添加一个新的本地通知即可在两周内触发。

# javascript - 动态 iframe 在 Firefox 上不可见

> ID：11948691
> 
> 赞同：1
> 
> 时间：2012-08-14T08:40:33.450
> 
> 标签：javascript, html, firefox, iframe, firefox-addon

我正在尝试使用[KangoExtensions](http://kangoextensions.com/)构建浏览器扩展。

我将以下 iframe 附加到正文：

```
<iframe id="iframe" name="iframe" allowtransparency="yes"
    style="position: absolute; top: -41px; left: 0px; right: 0px; width: 100%; height: 41px; z-index: 10000; border: 0px none;">
</iframe> 
```

附加 iframe 后，我尝试编写内容：

```
window.onload= function(){
   $(iframe).ready(function(){
                var iframeDocument = false;
                if(iframe.contentDocument) {
                    iframeDocument = iframe.contentDocument;
                } else if(iframe.contentWindow) {
                    iframeDocument = iframe.contentWindow.document;
                } else if(window.frames['iframe'].document) {
                    iframeDocument = window.frames['iframe'].document;
                }
                if(iframeDocument) {
                    iframeDocument.open();
                    iframeDocument.write(content);
                }
            });
 }; 
```

该扩展适用于所有浏览器（Chrome、Opera、IE），但在 Firefox 中它不会向 iframe 写入任何内容。如果我使用`iframeDocument.body.innerHTML = content;`内容可见几毫秒然后消失。我只看到一个灰色（ish）矩形。

在 Firefox 扩展中使用 iframe 可以做什么有一些限制吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T08:24:05.070

当您尝试修改 iframe 时，似乎没有强制加载它。

更改`$(iframe).ready(function(){...})`为`iframe.addEventListener('load', function(){...})`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-22T08:56:40.367

您可以使用

```
$(iframe).load('data form server', function(){
    // ...
}) 
```

# ios - 这段代码是什么意思？

> ID：11948692
> 
> 赞同：0
> 
> 时间：2012-08-14T08:40:52.267
> 
> 标签：ios, nsnotificationcenter

```
[[NSNotificationCenter defaultCenter] addObserver:self 
                                         selector:@selector(requestAddressUpdatedNotification:) 
                                             name:MTAddressUpdatedNotification 
                                           object:nil]; 
```

谁能告诉我如果我在我的程序中编写这段代码会发生什么？

`requestAddressUpdatedNotification`什么时候调用该方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T08:44:05.410

代码通知默认值在发生 a 时`NSNotificationCenter`通知您的对象 ( `self`)`MTAddressUpdatedNotification NSNotification`并触发`requestAddressUpdatedNotification:`必须`@implementation…@end`在同一类中定义的方法（在 内）。

# magento - 如何在magento的左侧导航中添加悬停效果子菜单？

> ID：11948693
> 
> 赞同：0
> 
> 时间：2012-08-14T08:40:54.683
> 
> 标签：magento, navigation

我有 vertnav/left.phtml 文件代码，

```
 <div class="vertnav-container">

<div class="">

    <h4 class="no-display"><?php echo $this->__('Category Navigation:') ?></h4>

 <?php $store_categories = $this->toLinearArray($this->getStoreCategories()) ?>

  <?php if ($count = count($store_categories)): ?>

    <ul id="vertnav">

  <?php endif; ?>
     <?php foreach ($store_categories as $i => $_category): ?><?php $class = array() ?>
   <?php if ($count == 1): ?>
    <?php $class[] = 'only' ?>
     <?php elseif (! $i): ?>
     <?php $class[] = 'first' ?>
  <?php elseif ($i == $count-1): ?>
          <?php $class[] = 'last' ?>
    <?php if (isset($store_categories[$i+1]) && $this->isCategoryActive($store_categories[$i+1])) $class[] = 'prev'; ?>
 <?php if (isset($store_categories[$i-1]) && $this->isCategoryActive($store_categories[$i-1])) $class[] = 'next'; ?>
     <?php echo $this->drawOpenCategoryItem($_category, 0, $class) ?>
  <?php endforeach ?>
   <?php if ($count): ?>
    </ul>
 <?php endif; ?>
</div>
 </div> 
```

并根据我的要求将 System > Configuration > Catalog > Category Vertical Navigation 设置为 2，但现在鼠标悬停在显示的类别子类别上时应该显示

那么我该如何对其进行自定义并为此添加悬停效果代码呢？

请帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T18:45:39.963

If you take a closer look at the `drawOpenCategoryItem` of the `Mage_Catalog_Block_Navigation` you might notice that the method does a check whether the given category is part of the current category path. So only when this check returns `true`, the children categories of this category will be rendered. For other categories the script will not go into that part of the code.

This sounds to be case if I understand your question correctly.

```
 if (in_array($category->getId(), $this->getCurrentCategoryPath())){
        $children = $category->getChildren();
        $hasChildren = $children && $children->count();

        if ($hasChildren) {
            $htmlChildren = '';
            foreach ($children as $child) {
                $htmlChildren.= $this->drawOpenCategoryItem($child);
            }

            if (!empty($htmlChildren)) {
                $html.= '<ul>'."\n"
                        .$htmlChildren
                        .'</ul>';
            }
        }
    } 
```

Additional to this information. The `drawOpenCategoryItem()` is never actually called upon in the whole PHP codebase.

So to have these rollover effects you need to have code that generates the full tree structure, or at least a big enough part of it. Regarding the `System > Configuration > Catalog > Category Vertical Navigation`. I guess you customized that yourself?

To give you a few pointers. You might want to have a look at the following methods. These are used for the rendering of the top menu and are actually doing the thing you are planning to implement.

`Mage_Catalog_Block_Navigation::renderCategoriesMenuHtml()` `Mage_Catalog_Block_Navigation::_renderCategoryMenuItemHtml()`

Hopes this helps you getting things underway.

# mysql - 在 mysql 中使用 @variable 作为 vb.net 中的命令

> ID：11948694
> 
> 赞同：-1
> 
> 时间：2012-08-14T08:41:00.173
> 
> 标签：mysql, vb.net

我在 VB.NET 2008 下使用过这种类型的查询，但每次我运行它时，它总是给我一个致命错误，它告诉我声明我使用的 @variable。下面是示例代码：

```
select js.year, js.week, js.rem_balance,
       case when js.rem_balance = 0 
                then @prev_rem_balance 
            else js.rem_balance 
       end as rem_balance_zero_or_prev,
       @prev_rem_balance := js.rem_balance
from test_jos_stock js
       inner join (SELECT @prev_rem_balance := 0) as t
order by year,week; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T08:45:40.590

您需要在选择语句之前声明参数：

```
DECLARE @prev_rem_balance INT; --or whatever datatype it is 
```

然后将其设置为特定值：

```
SET @prev_rem_balance = 1234; 
```

# java - Applet Java 控制台中的标准输出

> ID：11948695
> 
> 赞同：0
> 
> 时间：2012-08-14T08:41:02.843
> 
> 标签：java, windows, applet, console, stdout

我签名的 Java 小程序加载了一个本地 DLL。DLL 将跟踪打印到标准输出。当我在 Eclipse 下运行小程序时，我在 Eclipse 控制台中看到了这些痕迹。但是当我在 Web 浏览器中将其作为小程序运行时，我在 Java 控制台中看不到它们。有可能吗？

```
<applet name="name" id="game" archive="my.jar" code="path/to/main.class" mayscript="" title="Java"> 
    <param name="separate_jvm" value="true"> 
    <param name="java_arguments" value="-Xmx384m -Dsun.java2d.noddraw=true -XX:CompileThreshold=1500 -Xincgc -XX:+UseConcMarkSweepGC -XX:+UseParNewGC -Dcom.sun.management.jmxremote -Xss6m"> 
    <div class="nojava"> 
        <h1> 
            Please Update Java</h1> 
    </div> 
</applet> 
```

Windows，如果重要的话，最好是 Firefox

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T10:33:08.910

至少在我的经验中，DLL 通常转到浏览器的`stdout`。`stdout`因此，如果您只想查看这些消息，那么我建议您从命令行启动浏览器（至少在 Linux 上）并查看打印的内容。不知道这将如何在 Windows 上完成。

为 DLL重定向`stdout`会带来麻烦：来自多个页面的多个小程序可以由同一个插件进程执行，并且由于 CI/O 流是每个进程的，将它们重定向到一个小程序会重定向它们。它可能可以完成（使用管道和`dup2`在本机端），但是如果小程序在非常受控的环境中执行，您应该只遵循该路线，您可以排除与其他小程序的不良交互。

当然，正确的解决方案是让 DLL 不打印到标准输出，而是使用一些回调。如果您可以访问 DLL 的源代码，那是我更喜欢的解决方案。如果没有，也许您可​​以与 DLL 的作者交谈。在某些平台上（我了解 Linux），您可以通过使用插入器库拦截和修改某些库调用来获得类似的效果，但这绝不是可移植的。另一方面，本机 DLL 也不太便携，因此这可能对您有用。

# android - 如何从未绑定的不同类中取消绑定服务

> ID：11948699
> 
> 赞同：0
> 
> 时间：2012-08-14T08:41:18.940
> 
> 标签：android, android-service

我正在创建一个音乐播放器应用程序，我在其中创建了一个`Service`用于播放曲目的应用程序。

用于控制我正在使用的播放器`bindService()`

下面是代码，我使用 ServiceController 类来绑定（inistService() 内部）和 unbind（releaseService() 内部）：

```
public class ServiceController {

    MusicServiceAidl aidlObject;
    CallMService serviceConnection = new CallMService();
    Context context;

    public ServiceController(Context c) {
        this.context = c;
    }

    class CallMService implements ServiceConnection {

        @Override
        public void onServiceConnected(ComponentName name, IBinder boundService) {
            aidlObject = MusicServiceAidl.Stub
                    .asInterface((IBinder) boundService);
            Toast.makeText(context, "Service Connected",
                    Toast.LENGTH_SHORT).show();
        }

        @Override
        public void onServiceDisconnected(ComponentName paramComponentName) {
            aidlObject = null;
            Toast.makeText(context, "Service Disconnected",
                    Toast.LENGTH_SHORT).show();
        }
    }

    public void initService() {
        try {

            Intent serviceIntent = new Intent();
            serviceIntent.setClassName("com.example.async",
                    com.example.async.PlayTrack.class.getName());
            boolean ret = context.bindService(serviceIntent, serviceConnection,
                    Context.BIND_AUTO_CREATE);
            Toast.makeText(context, "Service bound with " + ret,
                    Toast.LENGTH_SHORT).show();
        } catch (Exception e) {
            Toast.makeText(context,
                    "initService(): " + e.toString(), Toast.LENGTH_LONG).show();
        }
    }

    public void releaseService() {
        context.unbindService(serviceConnection);
        serviceConnection = null;
        Toast.makeText(context, "Service Released",
                Toast.LENGTH_SHORT).show();
    }

    public String getTrackName() throws RemoteException{
        return aidlObject.getTrackName();
    }

    public String getAlbumName() throws RemoteException{
        return aidlObject.getAlbumName();
    }

    public String getArtistName() throws RemoteException{
        return aidlObject.getArtistName();
    }

    public void playPreviousTrack() throws RemoteException{
        aidlObject.playPreviousTrack();
    }

    public void playNextTrack() throws RemoteException{
        aidlObject.playNextTrack();
    }

} 
```

要调用这个绑定类，我正在使用：

```
ServiceController serviceController = new ServiceController(getApplicationContext());
serviceController.initService();
serviceController.releaseService(); 
```

问题是我试图从不同的类停止服务，即我想`releaseService`从不同的类调用。但很明显，它给出了`IllegalArgumentException`.

**编辑：** 当我运行以下代码时：

```
public void onBackPressed() {
    try {
        Intent intent = new Intent(this,
                Class.forName("com.example.async.PlayTrack"));
        stopService(intent);
        serviceController.releaseService();
    } catch (Exception e) {
        Log.e("Listing.java", e.toString());
        Toast.makeText(Listing.this,
                "Listing->onBackPressed: " + e.toString(), Toast.LENGTH_SHORT)
                .show();
    }
} 
```

我得到以下异常

```
java.lang.IllegalArgumentException: Service not registered: com.example.async.classes.ServiceController$CallMService@40547298 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T09:03:36.003

使用应用程序上下文而不是活动上下文进行绑定和取消绑定。您可以使用`getApplicationContext()`.

# android - eglSwapBuffers 不稳定/缓慢

> ID：11948702
> 
> 赞同：8
> 
> 时间：2012-08-14T08:41:32.697
> 
> 标签：android, opengl-es-2.0, egl

我在使用 NDK 和 egl 命令的 android 平板电脑上的渲染时间非常短。我已经定时调用`eglSwapBuffers`并且花费了可变的时间，经常超过设备帧速率。我知道它与刷新同步，但大约是 60FPS，而且这里的时间远低于此。

我在调用 swap 之间发出的唯一命令是`glClear`，所以我知道这不是我正在绘制的任何东西导致问题。即使只是通过清除帧速率下降到 30FPS（虽然不稳定）。

在同一台设备上，一个简单的 Java GL 程序很容易以 60FPS 的速度呈现，因此我知道这从根本上不是硬件问题。我查看了用于设置 GL 上下文的 Android Java 代码，但看不到任何显着差异。我也玩过每个配置属性，虽然有些稍微改变了速度，但没有一个（我能找到）改变这个可怕的帧速率下降。

为了确保事件轮询不是问题，我将渲染移到了一个线程中。该线程现在只进行渲染，因此只是重复调用 clear 和 swap。缓慢的性能仍然存在。

我不知道要检查什么，正在寻找有关问题可能是什么的建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-01T17:03:11.347

确实没有足够的信息（例如您正在测试的设备，您的确切配置等）来回答这个 100% 可靠的问题，但是这种行为通常是由窗口和表面像素格式不匹配引起的，例如。16 位 (RGB565) 与 32 位。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-24T14:26:43.527

`FB_MULTI_BUFFER=3`环境变量将启用飞思卡尔 i.MX 6 (Sabrelite) 板上的多缓冲以及一些最近的 LTIB 版本（没有 X）。您的 GFX 驱动程序可能需要这样的东西。

# git - Git 从本地开发服务器上拉取实时服务器

> ID：11948703
> 
> 赞同：1
> 
> 时间：2012-08-14T08:41:40.230
> 
> 标签：git

关于这个问题，我已经在谷歌上浏览了几个小时，但我似乎仍然找不到任何东西。

我们刚刚在工作中设置了一个本地开发服务器，我们希望在其上存储 git 存储库。我可以坐在这里解释几天为什么以及如何。但最终这就是我想要的工作流程：

*   开发人员在他们的副本上工作
*   提交到开发（或登台服务器）
*   实时服务器从登台服务器“拉”。

在我看来，登台服务器需要在线等才能正常工作 - 这是正确的吗？或者有没有一种方法可以通过反向 SSH 或其他方式从实时服务器中提取（我刚刚编造了）。

对不起 - 我是 Git 和服务器的菜鸟，所以请温柔:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T09:49:13.200

这里有几个随机的想法：

*   您可以使用相同的存储库进行实时和开发。一个分支将是`live`，另一个将是`development`。您可以在一个存储库中轻松合并这两个分支。不需要推/拉。
*   您可以在一台服务器上的两个文件夹中设置两个存储库，一个用于`live`，另一个用于`development`。并且在它们之间推/拉而不使用SSH，只是在本地。
*   如果您计划使用两台带有 SSH 的服务器，您可能会发现下面的文章[很有趣](http://tumblr.intranation.com/post/766290565/how-set-up-your-own-private-git-server-linux)。

但坦率地说，如果对工作流程的安全性没有特殊要求（即，将实时和开发分为两个物理位置），我相信第一种方法可以满足您的需求——这就是分支的使用方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T08:54:38.170

在服务器配置方面可能有比我更好的人。但据我所知，你可以先在自己的机器上玩：

*   例如，在名为“liveserver”的文件夹中创建一个 repo

*   将其克隆为一个名为“devserver”的文件夹中的裸仓库。这个不是直接修改的。

*   现在将它作为非裸文件克隆到名为“user1”、“user2”的文件夹中，然后从它们提交、拉取、推送数据，看看你的开发服务器和实时服务器上会发生什么。

至于服务器的 SSH 配置，我知道我曾经在遇到问题时使用过 github 文档（因为这是他们的工作，他们解释得很好）但老实说，我从来没有真正研究过这部分

# wpf - Caliburn Micro：此应用程序的最佳方法

> ID：11948704
> 
> 赞同：1
> 
> 时间：2012-08-14T08:41:42.217
> 
> 标签：wpf, caliburn.micro

我是 WPF 和 Caliburn Micro 的新手，需要一些关于如何组织我的应用程序的建议。

该应用程序是数据挖掘框架的配置编辑器。在应用程序中，将有一个主窗口，左栏中有一个网格和一个树视图，右栏中有不同的设置编辑器。右侧显示的特定编辑器取决于在树视图中选择的项目。每个编辑器都包含几个控件（在一种情况下最多约 200 个）。

在编辑器之间切换时，我认为以前的编辑器应该隐藏/停用而不是关闭以提高切换速度。

我现在想知道的是组织这个应用程序的最佳方式是什么以及我如何在编辑器之间切换？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T12:24:22.730

假设您使用的是 ViewModel 优先方法，您是否检查过 ISceens 和 Screen 实现？当前的 Caliburn.Micro 下载包含一个带有屏幕协调器实现 (SimpleMDI) 的演示项目

您可以使用主视图模型中的激活/停用功能来处理“属性”视图之间的切换。

主视图模型应源自 caliburn 提供的`Conductor<T>.Collection.OneActive`T 应为 IScreen 的实现。这允许您的主视图模型一次只能激活一个屏幕。

基本上，如果您将“选定项目”绑定到主视图模型中的属性，您可以观察属性更改通知（使用 NotifyOfPropertyChange），然后使用某种例程来决定切换到哪个视图。

Caliburn 将缓存视图（在您的指挥器上使用 GetChildren），以便您可以在它们之间切换 - 保持性能。

我使用类似这样的东西来根据数据库和可用库动态实例化我的控件（请注意，我的示例有点令人困惑，因为 CurrentView 实际上是一种自定义类型，并不是真正的视图 - 它只是一个描述控件的数据库对象已被选中..我可能应该更改它！）

```
public MainPageViewModel : Caliburn.Micro.Conductor<IScreen>.Collection.OneActive
{
    #region Property Changed handler

    public override void NotifyOfPropertyChange(string propertyName)
    {
        base.NotifyOfPropertyChange(propertyName);

        // A property changed, update the views if it's the CurrentView property
        UpdateViews(propertyName);
    }

    #endregion

    private void UpdateViews(string propertyName)
    {
        // If the selected item in my list changes, it's bound to CurrentView and contains
        // the fully qualified typename of the ViewModel that the items 'screen' should use
        if (propertyName == "CurrentView")
        {
            // If the selected item changes we need to load the control or retrieve it from the
            // control cache, making sure to update the cache and the active view dictionary
            try
            {                    
                var controlType = Type.GetType(CurrentView.QualifiedTypeName, true);

                // Check to see if the view is already loaded
                var view = GetChildren().FirstOrDefault(x => x.GetType() == controlType);

                // If it is, just activate it
                if (view != null)
                {
                    ActivateItem(view);
                }
                else
                {
                    // Otherwise it's not loaded, load it and activate it
                    view = (IScreen)Activator.CreateInstance(controlType);
                    ActivateItem(view);

                }
         // etc...
    } 
} 
```

# firefox - Firefox中表格行的盒模型解释

> ID：11948709
> 
> 赞同：1
> 
> 时间：2012-08-14T08:41:52.233
> 
> 标签：firefox, css

首先：桌子，不是我的设计，我很抱歉。

我们有这个网站，出售的产品以表格布局显示。该网站已经上线，但似乎还没有经过足够彻底的测试。开发商放假了，我得修一下。问题在于盒子模型的解释，这里举个例子：

铬渲染： ![铬渲染](../Images/bc4695e8510061089fdf9ff9265ec2e9.png)

带有萤火虫覆盖的 Firefox 渲染： ![火狐渲染](../Images/3daf954f8ea35a872817a7c26de80540.png)

发生的事情是 Chrome 将填充添加到 td 的高度（高度：55px + padding-top：5px + padding bottom：10px = 70px），而 Firefox 保持给定的高度并在内部添加填充。我认为盒子模型问题是 IE 的问题，但唉。

然而，糟糕的部分是我似乎无法修复它。td 有一个`colspan="2"`，我*认为*它会干扰css。

```
td.productFooter {
    background-color: #C4BFB9;
    height: 55px;
    padding-bottom: 10px;
    padding-top: 5px;
} 
```

我试图改变`display`to `inline-block`（和一些其他选项），这会正确设置高度，但后来我失去了我的`background-color`（默认回到表格本身的背景颜色）。如果我设置`display: block`，高度很好，但背景只为第一个单元格着色，它会忽略`colspan="2"`.

根据[MDN](https://developer.mozilla.org/en-US/docs/CSS/box-sizing) `-moz-box-sizing: content-box;`应该修复它，但这根本没有任何作用。

有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T09:21:25.850

我作弊了，但它有效。`div`在 ,里面添加了一个`td`，`position:relative;height:55px;`并且解决了它。我知道，这并不是一个非常好的解决方案，但它会一直持续到新网站上线（从现在起三周后）。

```
<td class="productFooter" colspan="2" >
    <div style="position:relative;height:55px">
    *all the content*
    </div>
</td> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T03:37:07.943

这看起来像[https://bugzilla.mozilla.org/show_bug.cgi?id=248239](https://bugzilla.mozilla.org/show_bug.cgi?id=248239)已在 Firefox 16 中修复。这将在 10 月 9 日发布。

因此，根据您的时间范围，最简单的方法可能是等到那时。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T09:01:10.953

我的建议：放弃桌子。只使用 CSS 编写表格样式的布局并不需要很长时间 - 特别是如果信息是从像产品数据这样的数据库生成的。只需事先自己编写代码，然后将其应用到实时站点。

# android - 如何在 iPhone 和 Android 中管理大约 400,000 条记录的数据库？

> ID：11948718
> 
> 赞同：6
> 
> 时间：2012-08-14T08:42:19.393
> 
> 标签：android, iphone

我需要一个在 iPhone 和 Android 中包含大约 400,000 条记录的数据库。这样做有什么最好的方法吗？可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T08:51:15.847

**是的，**这是可能的。

您可以将数据库放在`asset`或`raw`文件夹中。然后在**First Run****复制您的数据库**。

 **您可以检查数据库是否已经存在或看不到这个[答案](https://stackoverflow.com/a/10880645/1289716)

请参阅此[答案](https://stackoverflow.com/a/10419043/1289716)以了解如何复制大型数据库。

**但是，如果您对互联网访问**没有问题，您可以开发简单的网络**服务**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T08:52:27.443

400,000 条记录是相当多的。甚至它所占用的存储量也可能非常高，然后就会出现在其上运行查询的问题。以下是一些优化速度的建议：

**如果你真的需要它在设备上**

1.  按字母顺序（或其他方式）将条目拆分为多个表。这样，对以 A 开头的记录的任何查询将只需要在数据库的一小部分中搜索，而不是全部 400,000 条记录。这将提高查询速度。您可能无法按字母顺序拆分数据，但这只是一个示例。

**如果不能在设备上安装它**

1.  获得一个可以快速运行查询的高端服务器，并编写一个小的 PHP 脚本来与它交互并获取您的数据。这将大大提高速度，并具有无需在每次数据更改时都更新应用程序的额外优势（每次数据更改时下载具有 400,000 个条目的数据库的应用程序不会受到用户的欢迎）

您还可以参考[这篇](http://penguinman-techtalk.blogspot.in/2010/08/loading-large-reference-database-in.html)文章，了解有关在 Android 上处理大型数据库的更多信息。

此外，我在另一篇 SO 帖子上读到，由于性能原因，软限制为 10000 条记录。您可能无法绕过它。**

# windows - 使用 Doxygen 自定义 XML 标签

> ID：11948719
> 
> 赞同：4
> 
> 时间：2012-08-14T08:42:19.970
> 
> 标签：windows, doxygen

参考此解决方案： [使用 Doxygen 的自定义标签](https://stackoverflow.com/questions/537043/custom-tags-with-doxygen)

如果我使用 XML (c#) 样式进行记录，这似乎不起作用。我试图添加一个“更改”标签：

`ALIASES = "change=\xrefitem change \"Change\" \"Changes\""`

但是，当我在文档中使用它时：

```
<change>Bojan Hrnkas, 14.08.2012: Optimized performance.</change> 
```

HTML 输出如下所示：

`<change>Bojan Hrnkas, 14.08.2012: Optimized performance.</change>`

有没有办法为 xml 标签实现别名？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T08:29:42.160

实现此目的的一种方法是使用[`INPUT_FILTER`](http://www.doxygen.nl/manual/config.html#cfg_input_filter)配置文件选项将自定义 XML 命令替换为别名。例如，定义

```
ALIASES = "change=\xrefitem change \"Change\" \"Changes\"" 
```

我们可以`INPUT_FILTER`用来查找和替换

```
<change>Text</change> 
```

和

```
\change Text 
```

从[这个 SO question](https://stackoverflow.com/q/10988993/623518)中，人们可以使用 sed 使用类似的东西来执行这种转换

```
sed 's/<change>\(.*\)<\/change>/\1/' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T07:49:25.737

我可以确认使用 XML 样式文档时不支持自定义标签。我的解决方案是混合两种样式，所以现在我有了 <summary> 和 @change{}。不是很好，但它的工作原理。

# sql - RODBC：sqlUpdate() 无法识别索引列

> ID：11948721
> 
> 赞同：9
> 
> 时间：2012-08-14T08:42:21.033
> 
> 标签：sql, r, rodbc

我的数据库表大致如下所示：

```
+-----+-------+--------------------+-----------+----------+
| ID1 | ID2   | FilePath1          | FilePath2 | Status   |
+-----+-------+--------------------+-----------+----------+
| 1   | Test1 | MyFolder\R\Folder1 | NULL      | Open     |
| 2   | Test2 | MyFolder\R\Folder2 | NULL      | Open     |
| 3   | Test3 | MyFolder\R\Folder3 | NULL      | Finished |
| 4   | Test4 | MyFolder\R\Folder4 | NULL      | Finished |
+-----+-------+--------------------+-----------+----------+ 
```

第一列 (ID1) 定义为 PK。但是，ID2 也是唯一的。

现在我希望能够使用from package更改`FilePath2`和`Status`使用 R。所以我尝试以下方法：`sqlUpdate()``RODBC`

```
db.df <- data.frame(ID1=1, ID2='Test1',
                    FilePath2='MyFolder\R\Folder5', Status='Finished',
                    stringsAsFactors=FALSE)

sqlUpdate(myconn, db.df, tablename='mytable', index='ID2', verbose=TRUE) 
```

其中`db.df`是一个数据框，其中一行和列名对应于数据库表中的行名（但是，在这种情况下，我省略了一些列，如果可能的话，我也`FilePath1`更愿意省略`ID1`）。我的目标是获得以下内容：

```
+-----+-------+--------------------+--------------------+----------+
| ID1 | ID2   | FilePath1          | FilePath2          | Status   |
+-----+-------+--------------------+--------------------+----------+
| 1   | Test1 | MyFolder\R\Folder1 | MyFolder\R\Folder5 | Finished |
| 2   | Test2 | MyFolder\R\Folder2 | NULL               | Open     |
| 3   | Test3 | MyFolder\R\Folder3 | NULL               | Finished |
| 4   | Test4 | MyFolder\R\Folder4 | NULL               | Finished |
+-----+-------+--------------------+--------------------+----------+ 
```

我收到以下错误：

```
Error in sqlUpdate(myconn, db.df, tablename = 'mytable', index = 'ID2',  : 
index column(s) ID2 not in database table 
```

这个问题的原因可能是什么？

* * *

编辑：我通过发送直接 SQL 查询绕过了这个问题：

```
out.path <- 'MyFolder\\\\R\\\\Folder5'
update.query <- paste("UPDATE mytable ", 
                  "SET FilePath2='", out.path, "', Status='Finished' ",
                  "WHERE ID2='Test1'", sep="")
dummy <- sqlQuery(myconn, update.query) 
```

虽然这可能不是一个简洁的方式，但它做了它应该做的事情。但是，我仍然不明白这是怎么回事`sqlUpdate`，所以我希望有人能解释一下。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-03-07T19:48:28.013

`sqlUpdate`使用更新 MySQL 中的表时，我遇到了类似的问题。`case`我通过在 R-MySQL 连接中设置属性来修复它。

这是详细信息：

在 MySQL 中：

```
create table myTable (
myName1 INT NOT NULL PRIMARY KEY,
myName2 VARCHAR(10) NOT NULL,
);

insert into myTable values(111, 'Test1')
insert into myTable values(222, 'Test2') 
```

在 R 中：

```
myDF <- data.frame(myName1 = 111, myName2 = 'Test3')
sqlUpdate(myConn, myDF, tablename='myTable', index = 'myName1', verbose=TRUE)

#> Error in sqlUpdate(myConn, myDF, tablename='myTable', index = 'myName1', verbose=TRUE) : 
  index column(s) myName1 not in data frame 
```

原因是 RMySQL 连接中的（默认？）属性具有：

```
> attr(myConn, "case")
[1] "tolower" 
```

`myName1`因此， myDF 中的colname将大小写更改为`myname1`inside ，因此它与给定索引`sqlUpdate`不匹配。`myName1`

请注意，如果使用 更改呼叫，它将不起作用`index = 'myname1'`。会报错`index column(s) myName1 not in database table`。因为在 MySQL 表中，colname 是 myName。

解决方案是在连接时或连接后将 case 属性设置为“nochange”：

```
attr(myConn, "case") <- 'nochange' 
```

以下是更多详细信息：

`debugonce(sqlUpdate)`给出：

```
 cnames <- colnames(dat)
    cnames <- mangleColNames(cnames)
    cnames <- switch(attr(channel, "case"), nochange = cnames, 
        toupper = toupper(cnames), tolower = tolower(cnames))
    cdata <- sqlColumns(channel, tablename)
    coldata <- cdata[c(4L, 5L, 7L, 9L)]
    if (is.character(index)) {
        intable <- index %in% coldata[, 1L]
        if (any(!intable)) 
            stop("index column(s) ", paste(index[!intable], collapse = " "), 
                " not in database table")
        intable <- index %in% cnames
        if (any(!intable)) 
            stop("index column(s) ", paste(index[!intable], collapse = " "), 
                " not in data frame")
        indexcols <- index
    } 
```

注意对和的`intable`调用。`cname``coldata`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-04T22:05:45.890

sqlUpdate 对我有用。我唯一需要改变的是 db.df - 需要将`\`字符加倍，这样它就不会试图用它来转义代码。我的测试表如下所示：

```
CREATE TABLE mytable  (
    ID1 INT NOT NULL PRIMARY KEY,
    ID2 VARCHAR(10) NOT NULL,
    FilePath1 VARCHAR(50) NOT NULL,
    FilePath2 VARCHAR(50) NULL,
    Status VARCHAR(15) NOT NULL)

insert into mytable values(1,'Test1','MyFolder\R\Folder1',NULL,'Open')
insert into mytable values(2,'Test2','MyFolder\R\Folder2',NULL,'Open')
insert into mytable values(3,'Test3','MyFolder\R\Folder3',NULL,'Finished')
insert into mytable values(4,'Test4','MyFolder\R\Folder4',NULL,'Finished') 
```

我能够在更新中没有 ID1 或 FilePath1 字段的情况下运行更新。如果您阅读文档 (?sqlUpdate)，它会声明：“*首先它会查找表的主键，然后查找数据库认为最适合唯一定义行的列*”，因此您没有使用主键，但如果您不知道 ID2 是唯一的，最好使用该主键。

```
db.df <- data.frame(ID2='Test1', FilePath2='MyFolder\\R\\Folder5', Status='Finished',                    stringsAsFactors=FALSE)
sqlUpdate(myconn, db.df, tablename='mytable', index='ID2', verbose=TRUE) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-22T15:36:38.840

在某些情况下，尤其是在传递多个列时，您需要将列结构显式指定为列名。

示例：sqlUpdate(myconn, db.df, tablename='mytable', index=names('ID2'), verbose=TRUE)

更新：所以有时它似乎仍然失败。我使用的新工作是：

这允许您在需要时传递列列表。不知道为什么它是挑剔的方式。

indexNames<-list("ID2")

sqlUpdate(myconn, db.df, tablename='mytable', index=as.character("ID2"), verbose=TRUE)

# c++ - 使用at函数替换字符串中的字符？

> ID：11948730
> 
> 赞同：0
> 
> 时间：2012-08-14T08:43:33.710
> 
> 标签：c++, string

我有一个字符串 CorrAns = "Text"，我想用另一个字符串中的字符替换特定位置的字符。我使用了以下内容：

```
CorrAns.replace(1,1,OtherString.at(pos)); 
```

但是它给出错误，最好的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T08:49:01.980

只需全面使用`at`（或`[]`操作员）：

```
corrAns[1] = otherString[pos]; 
```

（请注意，`at`很少有您想要的语义。如果边界错误是前提条件失败，通常情况下，您最不想要的就是异常。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T08:49:25.957

你的语法是错误的。replace() 函数有几种方法。检查以下：

[http://www.ansatt.hig.no/frodeh/ooprog/string2.html](http://www.ansatt.hig.no/frodeh/ooprog/string2.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T08:50:04.993

`replace`没有超载`size, size, char`。你要

```
CorrAns.replace(1, 1, 1, OtherString.at(pos)); 
```

或者

```
CorrAns.replace(1, 1, OtherString.substr(pos, 1)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T08:51:11.420

直接的方法是：

```
CorrAns[1] = OtherString[pos]; 
```

如果您坚持使用替换功能，请查看 [此参考](http://www.cplusplus.com/reference/string/string/replace/)。一个正确的调用如下所示：

```
CorrAns.replace(1, 1, 1, OtherString.at(pos)); 
```

# c# - 带有 .NET 网站项目的 YUI Compressor

> ID：11948733
> 
> 赞同：0
> 
> 时间：2012-08-14T08:43:42.327
> 
> 标签：c#, .net, yui, yui-compressor

我看到了几个关于如何使用 YUI 压缩器来缩小~~“Web 应用程序”~~ “网站”项目中的 js 和 css 文件的示例。我想知道如何在 .NET 上的~~“网站”~~ “Web 应用程序”项目中使用它。主要问题是网站项目似乎不支持构建后指令的配置。

任何帮助表示赞赏。

**编辑：** 在我的初始版本中，我已经为网站交换了 Web 应用程序。我实际上有一个网站应用程序，需要知道如何将 YUI Compressor 与它集成。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T09:20:27.763

ASP.NET Web 应用程序确实支持构建后事件。转到 Web 应用程序设置页面。

![在此处输入图像描述](../Images/c5f97ea583823469a4e48888417cffcf.png)

单击“构建事件”按钮，此窗口将打开。

![在此处输入图像描述](../Images/11e343989307c54e06370a27bd142e7c.png)

单击“编辑后期构建”按钮以打开后期构建编辑器。

# sql-server - 带有验证的备份在数据库“主”中提供 CREATE DATABASE 权限被拒绝

> ID：11948738
> 
> 赞同：1
> 
> 时间：2012-08-14T08:44:16.317
> 
> 标签：sql-server, database

我有一个应用程序正在通过网络执行数据库的 SQL 备份。使用 SQL 2008 SP2 会产生以下错误。

```
An error has occured and the operation could not be completed successfully.

CREATE DATABASE permission denied in the database 'master'
VERIFY DATABASE is terminating abnormally.

10 percent processed.
...
Processed 68272 pages for database 'Db01', file 'Db01' on file 1.
100 percent processed.  
Processed 6 pages for database 'Db01', file 'Db01_log' on file 1.
BACKUP DATABASE successfully processed 68278 pages in 4.276 seconds

Please retry. 
```

然而，备份文件已创建，但该消息会误导用户，他们总是认为该过程未成功完成。

sql server 在网络服务服务下运行，我尝试将网络服务的权限分配给主数据库，但它仍然产生错误。

使用 SQL Server Management Studio 进行备份并验证备份工作正常且没有错误。

如何防止错误发生？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T10:23:53.567

检查备份集表以查看正在运行备份的帐户。然后发出`grant create database to [that login]`该登录名创建数据库权限（如果它通过 AD 组获得访问权限，您可能必须先创建登录名）。

# c++ - .NET DataGridView ScrollBar visiblechanged

> ID：11948739
> 
> 赞同：1
> 
> 时间：2012-08-14T08:44:25.753
> 
> 标签：c++, .net, datagridview, scrollbar

我正在 c++/cli 中创建自定义 datagridview 控件，并在调整窗口大小时使用动态列缩放（它适合 100% 的窗口直到某个大小）。

问题是当垂直滚动条可见时如何捕捉事件？它使用了一些空间，并且我的动态缩放会自动获得水平滚动条，但是我想让其中一个列在垂直滚动条变得可见时自动调整大小。

是否可以不实现 DataGridView::VerticalScrollBar？

# java - 一个简单的创建用户语句失败？

> ID：11948742
> 
> 赞同：1
> 
> 时间：2012-08-14T08:44:41.437
> 
> 标签：java, jdbc, oracle11g

像以前一样，`Java-Oracle11g-JDBC (OJDBC)`编写代码。Java 代码尝试执行`executeUpdate()`下面的语句并发生错误。但是 Oracle 11g 执行它没有任何问题（通过它的 GUI）。

陈述-

```
 CREATE USER Person identified by 2012; 
```

错误（即 PrintStackTrace 的一部分） -

> ```
> java.sql.SQLSyntaxErrorException: ORA-00911: invalid character 
> ```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T08:48:55.603

Oracle 不喜欢末尾的分号。您不希望在 OJDBC 查询中使用分号，尽管它在 Oracle GUI 中工作。

# facebook - Facebook：如何从用户的访问令牌中获取应用程序 ID - 使用 /app?access_token=TOKEN？

> ID：11948745
> 
> 赞同：5
> 
> 时间：2012-08-14T08:44:42.670
> 
> 标签：facebook, facebook-graph-api, oauth-2.0

我们允许用户仅使用 facebook 访问令牌作为凭证来访问我们的后端（使用 REST api over https 和 json 回复），所以我们想做两件事：

1.  验证访问令牌并找到用户的 id - 这只是对[https://graph.facebook.com/me?access_token=TOKEN的调用](https://graph.facebook.com/me?access_token=TOKEN)

2.  确保此访问令牌属于我们的 facebook 应用程序。您可以调用 [https://graph.facebook.com/app?access_token=TOKEN](https://graph.facebook.com/app?access_token=TOKEN)，但这似乎是一个未记录的功能（而且有时相当慢）。

谁能告诉我这实际上是否是一种可能会留在那里的标准方法？或者是否有另一种方法来做我们想做的事情：验证用户的访问令牌是否有效并且来自我们的 facebook 应用程序。

你可以打电话给我/权限和我？字段=已安装，但这些似乎都没有告诉我我们正在检查哪个 facebook 应用程序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T19:00:32.463

[您应该按照文档](https://developers.facebook.com/docs/authentication/)（客户端或服务器端）中的描述实现身份验证流程。基本上，您可以通过使用您的应用程序对用户进行身份验证来获得一个新的访问令牌，并将该令牌用于对您的服务器的请求。通过这种方式，您可以确定令牌“属于”您的应用程序。要做的步骤：

1.  使用您的应用 ID 初始化您选择的 Facebook SDK。
2.  检查用户是否已经授权您的应用程序。
3.  如果用户已经授权您的应用程序，您将获得他或她的 Facebook 用户 ID 以及令牌（“属于”您的应用程序），如果没有：验证用户并获取令牌。

[文档](https://developers.facebook.com/docs/authentication/)为您提供示例代码和大量详细信息：

*   对于客户端身份验证，尤其是[Status & Sessions](https://developers.facebook.com/docs/reference/javascript/)
*   对于服务器端身份验证，请查看[4\. 交换用户访问令牌的代码](https://developers.facebook.com/docs/authentication/server-side/)

**更新：**

您提到的功能[在此处](https://developers.facebook.com/docs/authentication/applications/)记录（向下滚动到*2\. Make requests to API*）：

> 应用程序访问令牌允许您以应用程序而不是用户的身份发出请求。要检索应用程序的详细信息，请在以下位置执行 HTTP GET：
> [https ://graph.facebook.com/app?access_token=APP_ACCESS_TOKEN](https://graph.facebook.com/app?access_token=APP_ACCESS_TOKEN)

因此，该功能可能会保留。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-10-17T05:49:32.320

这是旧的，但我最近也有同样的担忧。我认为最直接的方法是使用`debug_token`.

```
GET graph.facebook.com/debug_token?
 input_token={token-to-inspect}
 &access_token={app-token-or-admin-token} 
```

参考：[https ://developers.facebook.com/docs/facebook-login/manually-build-a-login-flow#checktoken](https://developers.facebook.com/docs/facebook-login/manually-build-a-login-flow#checktoken)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-14T16:24:40.077

您可以在每个请求中传递signed_request insted of access_token。参数 signed_request 基于您的应用程序的密钥，您可以简单地验证它。阅读有关签名请求的[文档。](http://developers.facebook.com/docs/authentication/signed_request/)

# android - 在任何 Intent 开始之前执行逻辑。决定应该启动哪个 Intent

> ID：11948761
> 
> 赞同：0
> 
> 时间：2012-08-14T08:45:43.200
> 
> 标签：android, android-intent

我希望能够在任何 Intent 启动之前立即执行一些代码（逻辑）。例如..我想决定应该从 Intent 列表中的哪一个开始。这在 Android 中可能吗？例如。我有意图登录和意图 MainWindow。如果用户尚未登录，我想显示登录意图..否则主窗口。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T09:23:21.810

通常，此功能是使用您的 Login 实现的`Activity`。如果用户需要授权，则检查`onCreate`方法，如果不需要 - 立即启动 MainWindow （和`finish()`Login `Activity`）。

# proxy - scrapy代理获取scrapy.http.response.Response没有属性'encoding'

> ID：11948762
> 
> 赞同：1
> 
> 时间：2012-08-14T08:45:50.093
> 
> 标签：proxy, scrapy

我现在使用 Scrapy 通过 http 代理抓取一个站点。我按照[http://mahmoud.abdel-fattah.net/2012/04/07/using-scrapy-with-proxies/](http://mahmoud.abdel-fattah.net/2012/04/07/using-scrapy-with-proxies/)的说明进行操作。但是当我运行我的蜘蛛时，我得到了以下错误：

**错误：下载[http://xxx.xxx.xxx](http://xxx.xxx.xxx)时出错：不是 gizpped 文件。**

然后我在setting.py的DOWNLOADER_MIDDLEWARES中添加了如下语句：

**'scrapy.contrib.downloadermiddleware.httpcompression.HttpCompressionMiddleware'：无**

在此之后，调试信息表明我正确抓取了网页，但是在处理页面时，出现以下错误：

**“响应”对象没有属性“编码”**

请给我一些提示如何解决这个问题。提前感谢大家。

# c# - 在 ViewModel 中向实体类添加属性

> ID：11948765
> 
> 赞同：1
> 
> 时间：2012-08-14T08:45:51.000
> 
> 标签：c#, inheritance, properties, overloading, derived-class

我有一个带有 ProfileUser EntityCollection 的配置文件。在这个类中，我有一个 Profile_ID 和一个 Profile 关系和一个 User_ID 但没有 USer 关系，因为 User 在另一个数据库中。

在我想通过 User.Username 访问的 Datagrid

我试过这个，但是ofc它不起作用......

```
public EntityCollection<ProfileUser> ProfileUsers
    {
        get
        {
            if (profile != null) return profile.ProfileUser;
            else return null;
        }
        set
        {
            profile.ProfileUser = value;
        }
    } 
```

这里是我的自定义类

```
public class ProfileUserExtended : ProfileUser
{
    public Operator User
    {
        get
        {
            return OperatorManager.GetByGuId(this.User_ID);
        }
    }
} 
```

当然我不能通过基类来构造派生类。但我需要这个运算符成为我绑定到的集合的一部分......

我希望你能理解我的问题并能提供帮助。

**编辑：** 这个转换器为我解决了问题：

```
public class OperatorConverter:IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        try
        {
            if (!(value is Guid)) return null;
            if (!(parameter is string)) return null;

            var guid = (Guid)value;
            var par = (string)parameter;

            var op = OperatorManager.GetByGuId(guid);
            if (op == null) return null;

            var prop = op.GetType().GetProperty(par);
            if (prop == null) return null;

            return prop.GetValue(op, null);
        }
        catch (Exception e)
        {
            throw (e);
        }
    }

    public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        throw new System.NotImplementedException();

    }
} 
```

在 XAML 中：

```
<DataGridTextColumn Header="Name" Binding="{Binding Path=User_ID,Converter={StaticResource ResourceKey=operatorConverter},ConverterParameter='Name'}" IsReadOnly="True" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T16:33:52.587

以下是实现与您需要做的类似的多个绑定的三种方法。

1）一个包装类：

```
public class ProfileUserWrapper : DependencyObject
{
    public ProfileUserWrapper(ProfileUser thebrain) { TheUser = thebrain; }

    public ProfileUser TheUser { get; private set; }

    public Operator User { get { if (_user != null)return _user; return _user = OperatorManager.GetByGuId(TheUser.User_ID); } }
    private Operator _user = null;
} 
```

现在，`public EntityCollection<ProfileUser> ProfileUsers`您可以公开例如`IEnumerable<ProfileUserWrapper>`：

```
public EntityCollection<ProfileUser> ProfileUsers // your original code
{
    get{ if (profile != null) return profile.ProfileUser; else return null;}
    set { profile.ProfileUser = value; }
}

public IEnumerable<ProfileUserWrapper> ProfileUsers2
{
    get { return ProfileUsers.Select(user => new ProfileUserWrapper(user));
} 
```

然后绑定到 ProfileUsers2，并且您的一些绑定应该从“Address”更改为“TheUser.Address”，但这几乎肯定会起作用。

2）第二个，智能转换器，例如：

```
public class OperatorPicker : IValueConverter
{
    public object Convert(object value, System.Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        var pu = value as ProfileUser;
        if (pu != null)
            return OperatorManager.GetByGuId(pu.User_ID);
        return null;
    }

    public object ConvertBack(object value, System.Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        throw new System.NotImplementedException();
    }
} 
```

写起来几乎再简单不过了。现在您可以在 XAML 绑定中使用转换器：

```
<Window.Resources>
    <myextra:OperatorPicker x:Key="conv1" />
</Window.Resources>

<Grid>
    <ListBox x:Name="lbxFirst" ItemsSource="{Binding ProfileUsers}">
        <ListBox.ItemTemplate>
            <DataTemplate>
                <StackPanel Orientation="Horizontal">
                    <TextBlock Margin="5" Text="{Binding User_ID}" />
                    <TextBlock Margin="5" Text="{Binding Login}" />
                    <TextBlock Margin="5" Text="{Binding Address}" />
                    <TextBlock Margin="5" Text="{Binding Path=., Converter={StaticResource conv1}}" />
                </StackPanel>
            </DataTemplate>
        </ListBox.ItemTemplate>
    </ListBox>
</Grid> 
```

但是这样一来，你就会得到`Operator`它自己的对象。允许您绑定到以这种方式返回的运算符的属性将非常困难，因为 Binding 的路径已经固定在“。”，并且您无法更改它，因为必须向 Converter 传递 ProfileUser 实例。

3) 第三，最复杂但完全没有任何包装器的工作是基于**附加属性、转换器和两个绑定**，但您也可以在两个附加属性和一个更改回调上执行此操作。我更喜欢前一种方式，所以这里是：

```
public class DummyClass : DependencyObject
{
    public static readonly DependencyProperty TheOperatorProperty = DependencyProperty.RegisterAttached(
        "TheOperator", typeof(Operator), typeof(DummyClass),
        new FrameworkPropertyMetadata(null, FrameworkPropertyMetadataOptions.AffectsRender)
    );

    public static Operator GetTheOperator(DependencyObject elem) { return (Operator)elem.GetValue(TheOperatorProperty); }
    public static void SetTheOperator(DependencyObject elem, Operator value) { elem.SetValue(TheOperatorProperty, value); }
}

    ... xmlns:myextra="clr-namespace:...." ....

<Window.Resources>
    <myextra:OperatorPicker x:Key="conv1" />
</Window.Resources>

<Grid>
    <ListBox x:Name="lbxFirst" ItemsSource="{Binding ProfileUsers}">
        <ListBox.ItemTemplate>
            <DataTemplate>
                <StackPanel x:Name="aparent" Orientation="Horizontal"
                            myextra:DummyClass.TheOperator="{Binding Path=., Converter={StaticResource conv1}}">
                    <TextBlock Margin="5" Text="{Binding User_ID}" />
                    <TextBlock Margin="5" Text="{Binding Login}" />
                    <TextBlock Margin="5" Text="{Binding Address}" />
                    <TextBlock Margin="5"
                               Text="{Binding Path=(myextra:DummyClass.TheOperator).OperatorCodename, ElementName=aparent}" />
                </StackPanel>
            </DataTemplate>
        </ListBox.ItemTemplate>
    </ListBox>
</Grid> 
```

请注意，在 StackPanel 级别有一个新的绑定。这个可以放在数据模板中的任何地方，甚至是文本框本身**。**请注意它如何通过转换器将 ProfileUser 转换为 Operator。`Path=.`不是必需的，但我添加了它以便显示绑定的确切含义。请注意最后一个文本框绑定是如何指定的：它是对附加属性的绑定（通过元素名称），而不是对原始数据的绑定！

这次我测试了所有东西，它在我这边工作，在 ProfileUser 上没有 DependencyObject 继承。`DummyClass`它对继承感到满意。如果你尝试这个，请像往常一样给我留言:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T08:58:49.480

**编辑：这是一个很好的解决方案，但事实证明它要求**目标数据对象从**DependencyObject**继承，但事实并非如此。在这里，数据对象可能继承自 EntityObject 并且无法更改，因为它是源 DAO 对象:)

话虽如此，让我们玩一下附加属性：

* * *

[有时您可以使用Attached Properties](http://msdn.microsoft.com/en-us/library/ms749011.aspx)很容易地解决它。绑定引擎不仅可以绑定到普通属性或依赖属性。实际上它可以绑定到 5 个或更多的东西，其中最简单的一个是 Att.Props。

附加属性是在某个随机类（称为 ABC）中定义的“虚拟”或更确切地说是“假”属性（我们将其命名为“IsZonk”），但以特殊方式注册，以便绑定引擎将其视为出现在您指定的目标类上（比如说 XYZ）。任何通过绑定访问 XYZ 上的 IsZonk 的尝试都会导致绑定引擎将请求退回到 ABC 类。此外，在 ABC 类中生成的方法调用将获得请求源自的确切 XYZ 对象。

通过这种方式，您可以轻松地使用新数据甚至新功能**扩展现有对象，甚至无需修改它们。**这很像 3.5 版本中添加到 C# 中的“静态扩展方法”。

```
namespace Whatever {

public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();

        lbxFirst.DataContext = new MyModel();
    }
}

public class MyModel
{
    public IEnumerable<ProfileUser> ProfileUsers
    {
        get
        {
            var tmp = new[]
            {
                new ProfileUser{ User_ID = "001", Login = "Adelle", Address = "123 Shiny Street" },
                new ProfileUser{ User_ID = "002", Login = "Beatrice", Address = "456 Sleepy Hill" },
                new ProfileUser{ User_ID = "003", Login = "Celine", Address = "789 Rover Dome" },
            };

            tmp[0].SetValue(ProfileUserExtras.UserProperty, new Operator { RelatedUser = tmp[0], OperatorCodename = "Birdie", PermissionLevel = 111 });
            tmp[1].SetValue(ProfileUserExtras.UserProperty, new Operator { RelatedUser = tmp[1], OperatorCodename = "Twin", PermissionLevel = 222 });
            tmp[2].SetValue(ProfileUserExtras.UserProperty, new Operator { RelatedUser = tmp[2], OperatorCodename = "Trident", PermissionLevel = 333 });

            return tmp;
        }
    }
}

public class ProfileUser : DependencyObject
{
    public string User_ID { get; set; }
    public string Login { get; set; }
    public string Address { get; set; }
    //- Operator User {get{}} -- does NOT exist here
}

public class Operator
{
    public ProfileUser RelatedUser { get; set; }
    public string OperatorCodename { get; set; }
    public int PermissionLevel { get; set; }
}

public static class ProfileUserExtras
{
    public static readonly DependencyProperty UserProperty = DependencyProperty.RegisterAttached(
        "User",             // the name of the property
        typeof(Operator),   // property type
        typeof(ProfileUserExtras), // the TARGET type that will have the property attached to it

        new FrameworkPropertyMetadata(null, FrameworkPropertyMetadataOptions.AffectsRender) // whatever meta you like
    );
}

} 
```

最后一件事是在 XAML 中使用它：

```
.... xmlns:myextra="clr-namespace:Whatever" ....

<ListBox x:Name="lbxFirst" ItemsSource="{Binding ProfileUsers}">
    <ListBox.ItemTemplate>
        <DataTemplate>
            <StackPanel Orientation="Horizontal">
                <TextBlock Margin="5" Text="{Binding User_ID}" />
                <TextBlock Margin="5" Text="{Binding Login}" />
                <TextBlock Margin="5" Text="{Binding Address}" />
                <TextBlock Margin="5" Text="{Binding Path=(myextra:ProfileUserExtras.User).OperatorCodename}" />
                <TextBlock Margin="5" Text="{Binding Path=(myextra:ProfileUserExtras.User).PermissionLevel}" />
            </StackPanel>
        </DataTemplate>
    </ListBox.ItemTemplate>
</ListBox> 
```

请注意绑定中附加属性的表示法。它**必须用括号括起来，**而且几乎总是需要一个命名空间前缀，否则绑定引擎会在其他地方寻找其他东西。通过添加括号，您表明此属性是“附加属性”而不是普通属性。

# vba - 如何捕获从 VBA 代码启动的 Windows shell 脚本错误？

> ID：11948771
> 
> 赞同：5
> 
> 时间：2012-08-14T08:46:12.947
> 
> 标签：vba, error-handling, batch-file

我正在使用以下`Shell`功能从 VBA 启动批处理脚本：

```
myRes = Shell("myScript.cmd") 
```

有没有办法知道它是否运行成功或是否有执行错误？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-15T07:35:45.580

我建议您尝试使用[WshShell](http://msdn.microsoft.com/en-us/library/aew9yb99)对象而不是本机 Shell 函数。

```
Dim wsh As Object
Set wsh = VBA.CreateObject("WScript.Shell")
Dim waitOnReturn As Boolean: waitOnReturn = True
Dim windowStyle As Integer: windowStyle = 1 'or whatever suits you best
Dim errorCode As Integer

errorCode = wsh.Run("myScript.cmd", windowStyle, waitOnReturn)

If errorCode = 0 Then
    MsgBox "Execution successful. No error to report."
Else
    MsgBox "Program exited with error code " & errorCode & "."
End If 
```

虽然请注意：

> 如果`bWaitOnReturn`设置为 false（默认），则 Run 方法在启动程序后立即返回，自动返回 0（不被解释为错误代码）。

所以要检测程序是否执行成功，你需要`waitOnReturn`像我上面的例子一样设置为True。否则无论如何它都会返回零。

[我的这个较早的答案](https://stackoverflow.com/questions/8902022/wait-for-shell-to-finish-then-format-cells/8906912#8906912)也可能会有所帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-14T09:26:28.313

如果您认为该命令将在成功时返回 0，则可以捕获错误级别：http: [//www.devx.com/vb2themax/Tip/18663](http://www.devx.com/vb2themax/Tip/18663)

> # 获取进程的退出码
> 
> 在少数情况下，特别是在从 VB 应用程序中运行 MsDos 批处理文件时，您可能希望`ERRORLEVEL`通过外部应用程序确定集合。你不能用一个简单的 Shell 语句来做，但是有了`GetProcessExitCode`API 函数的支持，这项工作就变得容易了：
> 
> ```
> Private Declare Sub Sleep Lib "kernel32" (ByVal dwMilliseconds As Long)
> Private Declare Function OpenProcess Lib "kernel32" (ByVal dwDesiredAccess As _
>     Long, ByVal bInheritHandle As Long, ByVal dwProcessId As Long) As Long
> Private Declare Function GetExitCodeProcess Lib "kernel32" (ByVal hProcess As _
>     Long, lpExitCode As Long) As Long
> Const STILL_ACTIVE = &H103
> Const PROCESS_QUERY_INFORMATION = &H400
> 
> Private Sub cmdRunNotepad_Click()
>     Dim hTask As Long
>     Dim hProcess As Long
>     Dim exitCode As Long
> 
>     hTask = Shell("Notepad", vbNormalFocus)
>     hProcess = OpenProcess(PROCESS_QUERY_INFORMATION, False, hTask)
> 
>     ' loop until the process returns a valid exit code
>     Do
>         ' relinquish this CPU time slice
>         Sleep 100
>         DoEvents
>         ' query for exit code
>         GetExitCodeProcess hProcess, exitCode
>     Loop While exitCode = STILL_ACTIVE
> 
>     MsgBox "Exit code = " & exitCode, vbInformation
> 
> End Sub 
> ```
> 
> 弗朗切斯科·巴莱纳

或者你可以尝试这样的事情：

```
myRes = Shell("cmd /c myScript.cmd&&echo success") 
```

这里有更多关于条件执行的信息：[http ://www.robvanderwoude.com/condexec.php](http://www.robvanderwoude.com/condexec.php)

但在这两种情况下，您都依赖退出代码。

# nhibernate - 使用 OnTransactionCompleted 事件确定 ActiveRecord.TransactionScope 是否成功

> ID：11948777
> 
> 赞同：0
> 
> 时间：2012-08-14T08:46:47.533
> 
> 标签：nhibernate, castle-activerecord

我正在使用以下代码使用 Castle ActiveRecord v1.0.3 执行删除操作（呃，旧版！）。

```
public void Delete(anObject instance)
{
    try
    {
        using (var scope = new ActiveRecord.TransactionScope(TransactionMode.Inherits, OnDispose.Rollback))
        {
            ...(DB Operations)

            scope.VoteCommit();

            MethodCallBecauseOfSuccess();
        }
    }
    catch (NHibernate.TransactionException ex)
    {
        MethodCallBecauseOfFailure();
    }
} 
```

问题是，由于 TransactionMode.Inherits，此方法的使用者可以将对此方法的调用包装在他们自己的 ActiveRecord.TransactionScope 中。在他们这样做的情况下，异常不会发生在 scope.VoteCommit() 点，因此 MethodCallBecauseOfSuccess() 被错误地调用。

这是我正在使用的遗留代码，因此此时我无法重新处理正在使用的代码，我只能更改此方法。

所以我现在正在查看 TransactionScope.OnTransactionCompleted 事件，这样如果事务范围消失到调用方法中，我仍然可以在它完成时捕获，并调用适当的方法，例如：

```
public void Delete(anObject instance)
{
    try
    {
        using (var scope = new TransactionScope(TransactionMode.Inherits, OnDispose.Rollback))
        {
            scope.OnTransactionCompleted += (sender, args) => 
                                        {
                                            //if FAIL
                                            MethodCallBecauseOfFailure();
                                            //else SUCCEED
                                            MethodCallBecauseOfSuccess();
                                        };

            ...(DB Operations)

            scope.VoteCommit();
        }
    }
    catch (NHibernate.TransactionException ex)
    {
        ...     
    }
} 
```

不幸的是，我似乎无法确定 TransactionScope 是失败还是成功。匿名方法的参数是 sender = Parent（我认为！）事务范围，并且 args = empty。当然，我可以访问当前 TransactionScope 的范围。可供检查的属性很少。

**有什么方法可以判断它是失败还是成功？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T02:37:09.170

属性 HasSessionError 有帮助吗？

```
try
{
    using (TransactionScope scope = new TransactionScope(TransactionMode.Inherits, OnDispose.Rollback))
    {
        scope.OnTransactionCompleted += (sender, args) => 
                                    {
                                        TransactionScope sender2 = (TransactionScope)sender;
                                        if(sender2.HasSessionError)
                                          MethodCallBecauseOfFailure();
                                        else
                                          MethodCallBecauseOfSuccess();
                                    };

        ...(DB Operations)

        scope.VoteCommit();
    }
}
catch (NHibernate.TransactionException ex)
{
    ...     
} 
```

问候

胡伊·尤卡

# javascript - D3，谷歌地图，选择 d3 元素

> ID：11948780
> 
> 赞同：0
> 
> 时间：2012-08-14T08:46:54.417
> 
> 标签：javascript, google-maps-api-3, map, selection, d3.js

根据此[示例](http://bl.ocks.org/1125458)，我正在尝试添加标记选择（即添加 .on("click"...) 到标记变量）。但是，当您将鼠标移到 google maps 画布上时，您会得到可以拖动的手，并且您不能使用它选择任何 svg 元素。

有没有办法（临时）禁用该功能，以便您可以单击 D3 元素？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T16:29:25.230

I'm working on building a map like this right now. I haven't used Google's markers (rather d3 SVG circles) but I found mouseover/click/etc events had to be on objects in the overlayMouseTarget layer of the map:

```
var overlay = new google.maps.OverlayView();

overlay.onAdd = function() {

    var layer = d3.select(this.getPanes().overlayMouseTarget)
        .append("div")
        .attr("class", "providers");
             ...
} 
```

I think the gMaps demo on d3js.org uses a different layer.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-11T10:09:47.350

您可以使用 var overlay = new google.maps.OverlayView(); overlay.onAdd 函数

```
 overlay.onAdd = function () {
    var layer = d3.select(this.getPanes().overlayMouseTarget)
        .append("div")
        .attr("class", "stations");
   } 
```

绘制自定义标记`overlay.draw`

并将`overlay.setMap()`我们的叠加层绑定到地图……</p>

更多信息可以在[https://developers.google.com/maps/documentation/javascript/overlays找到](https://developers.google.com/maps/documentation/javascript/overlays)

# php - Spotify 创建播放列表 API php

> ID：11948781
> 
> 赞同：0
> 
> 时间：2012-08-14T08:47:03.323
> 
> 标签：php, javascript, spotify

谁能帮我创建 Spotify 创建播放列表 PHP 库或 JavaScript 方法？我用谷歌搜索了很多没有人发布的关键字来创建播放列表以创建新的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T15:01:52.847

无法创建播放列表，但您可以通过在链接中使用此格式来触发要在桌面播放器中启动的歌曲列表：

`spotify:trackset:PlaylistName:49MsPNQCOmxvIYi9AdoPzY,6fUlrsHaz4QfCNF31rk2dU,5KiTsR2h8jnzkvTeucxoAn,6kidUwWb8tB9ktfy7U76iX,6mlUEdb90RqwUisnp65lG7,6KOEK6SeCEZOQkLj5M1PxH,3psrcZoGRaWh6FMGael1NX,3EHLii6bnZxJxsCfLlIb83,0xJtHBdhpdLuClaSQYddI4,6fsdOFwa9lTG7WKL9sEWRU`

不过，它不会首先将您带到一个不错的 spotify html 页面，而只是直接到播放器。

**更新**

截至今天，有一个用于创建播放列表的 api：[https ://developer.spotify.com/web-api/create-playlist/](https://developer.spotify.com/web-api/create-playlist/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-27T15:05:47.343

Spotify[最近发布了一个 API](https://developer.spotify.com/web-api/create-playlist/)来实现这一点。

> ## 创建播放列表
> 
> 为 Spotify 用户创建播放列表。（在您添加曲目之前，播放列表将为空。）
> 
> **端点**
> `POST https://api.spotify.com/v1/users/{user_id}/playlists`
> 请求参数
> 路径参数 值
> user_id：用户的 Spotify 用户 ID。
> 
> ## 示例请求
> 
> `curl -X POST "https://api.spotify.com/v1/users/thelinmichael/playlists" -H "Authorization: Bearer {your access token}" -H "Content-Type: application/json" --data "{\"name\":\"A New Playlist\", \"public\":false}"`

其他参数和选项的说明可通过链接获得。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T09:42:13.047

没有用于创建播放列表的 Web API。如果你真的想这样做，你需要使用 libSpotify 和它的包装器（搜索 libSpotify php 包装器会得到你需要的东西）。

# android - GCM 返回 404 错误

> ID：11948785
> 
> 赞同：0
> 
> 时间：2012-08-14T08:47:17.547
> 
> 标签：android, google-cloud-messaging

我想向我的设备发送 natification 消息，但我有这个错误

```
 com.google.android.gcm.server.InvalidRequestException: HTTP Status Code: 404 
```

我不确定为什么。

这是我的代码

```
package com.avilyne.gcm;

import java.io.IOException;
import java.util.ArrayList;
import java.util.List;

import javax.servlet.ServletException;

import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

import com.google.android.gcm.server.Message;
import com.google.android.gcm.server.MulticastResult;
import com.google.android.gcm.server.Sender;

public class GCMBroadcast extends HttpServlet {
    private static final String myApiKey = "AIzaSyAHUdHy-7o-XJS59mhAzUUoTqn-EUb9s88";
    private static final String regID = "APA91bHUcUuv3ViHfIkZg7YyKeiq3Ta1WVqEWrdIs9AZwdQ2nfSA2r-9BcH4WxRnAb0mHXEqEi7WMngPKQyrzcP5EhCFLqsprJpscHLIyi8gK80SdMpHluLBk3iRUCQTShY8szNvy3f4IBiGZv75ioe-Ai8wnZLqKw";
    private List<String> androidTargets = new ArrayList<String>();
    private static final long serialVersionUID = 1L;

    public GCMBroadcast() {

        super();

        androidTargets.add(regID);

    }

    /*protected void doGet(HttpServletRequest req, HttpServletResponse resp)
            throws ServletException, IOException {

            doPost( req, resp);*/

    @Override
    protected void doPost(HttpServletRequest req, HttpServletResponse resp)
            throws ServletException, IOException {

        String userMessage = "";
        userMessage = req.getParameter("Message");

        Sender sender = new Sender(myApiKey);
        Message message = new Message.Builder().addData("Message", userMessage)
                .build();

        MulticastResult result = sender.send(message, androidTargets, 1);

        if (result.getResults() != null) {
            int canonicalRegId = result.getCanonicalIds();
            if (canonicalRegId != 0) {

            }
        } else {
            int error = result.getFailure();
            System.out.println("Broadcast failure: " + error);
        }

        req.setAttribute("Message", userMessage);

        req.getRequestDispatcher("index.jsp").forward(req, resp);
    }

} 
```

当我在没有 doGet 方法的情况下尝试此代码时，它会返回“HTTP 状态 405 - 此 URL 不支持 HTTP 方法 GET”此错误。İf ı 添加 doGet 方法并在 doGet 中调用 doPost 方法。它返回“HTTP 状态 500 - HTTP 状态代码：404（未找到

# 未找到

## 错误 404

)"

当我尝试将消息发送到服务器时收到的完整错误消息是：

```
 com.google.android.gcm.server.InvalidRequestException: HTTP Status Code: 404(<HTML>
<HEAD>
<TITLE>Not Found</TITLE>
</HEAD>
<BODY BGCOLOR="#FFFFFF" TEXT="#000000">
<H1>Not Found</H1>
<H2>Error 404</H2>
</BODY>
</HTML>)
    at com.google.android.gcm.server.Sender.sendNoRetry(Sender.java:367)
    at com.google.android.gcm.server.Sender.send(Sender.java:261)
    at com.avilyne.gcm.GCMBroadcast.doPost(GCMBroadcast.java:49)
    at com.avilyne.gcm.GCMBroadcast.doGet(GCMBroadcast.java:35)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1001)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:585)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source) 
```

我不知道为什么我会收到这个错误。任何人都可以帮忙吗？该文档没有说明 404 代码。

即web.xml代码；

```
 <?xml version="1.0" encoding="UTF-8"?>
    <web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd" id="WebApp_ID" version="3.0">
      <servlet>
        <servlet-name>GCMBroadcast</servlet-name>
        <servlet-class>com.avilyne.gcm.GCMBroadcast</servlet-class>
      </servlet>
      <servlet-mapping>
        <servlet-name>GCMBroadcast</servlet-name>
        <url-pattern>/GCMBroadcast</url-pattern>
      </servlet-mapping>
      <welcome-file-list>
        <welcome-file>index.jsp</welcome-file>
      </welcome-file-list>
    </web-app> 
```

那就是 index.jsp 代码；

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<%
    // retrieve our passed CollapseKey and Message parameters, if they exist.

    String message  = "Generic Broadcast Message";

    Object msgObj =  request.getAttribute("Message");

    if (msgObj != null) {
        message = msgObj.toString();
    }

%>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Android GCM Broadcast</title>

</head>
<body>

    <h2>GCM Broadcast Demo</h2>

    <form action="GCMBroadcast" method="post">
        <label>Broadcast Message </label>

        <br/><textarea name="Message" rows="3" cols="60" ><%=message %> </textarea> 
        <br/><input type="submit" name="submit" value="Submit" />
        </form>   
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T15:03:05.613

为类发件人发布您的代码。但很可能您有错误的 GCM 服务器 URL。它应该是一个 HTTPS POST 请求，用于：

```
https://android.googleapis.com/gcm/send 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T19:09:28.330

I was getting the same error when I tried to send a message via GCM (I did it from PHP, but I don't think that really matters here).

Here is a link to my question:

[Google GCM server returns 404 error](https://stackoverflow.com/questions/11451143/google-gcm-server-returns-404-error/11702291#11702291)

I already found out what my problem was(and answered my own question :) ). Error appeared every time I tried to pass null value to GCM. I replaced null by empty string and all is good. I don't know why, documentation doesn't say anything about this problem, but that is it.

So this may be why you are getting this error or maybe you just have bad link to the GCM server.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T16:03:39.160

Google 提供的 com.google.android.gcm.server.Sender 类中嵌入了 URL。最好的选择可能是通过 Eclipse 调试会话单步执行 doPost() 以查看错误是否实际发生在 sender.send() 时刻、result.getResults() 时刻或事先某处。

可能是在这些点之前发生了错误（“消息”和“CollapseKey”值是否正确传递？），并且仅在该过程的后期被捕获，为您提供您看到的堆栈跟踪。

# primefaces - 如何删除primefaces旋转木马上的项目？

> ID：11948787
> 
> 赞同：1
> 
> 时间：2012-08-14T08:47:25.673
> 
> 标签：primefaces

我是primefaces的新手，我想知道：如果单击删除按钮，如何删除primefaces轮播上的项目？

谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T08:47:11.607

将@Daniel 的答案变成正确的答案：

只需从列表中删除项目 myList.remove(item)

# tridion - 如何比较 Tridion 中的任何两个项目，无论是组件还是页面

> ID：11948790
> 
> 赞同：7
> 
> 时间：2012-08-14T08:47:39.437
> 
> 标签：tridion, tridion-2011

目前我们有比较给定项目的版本之间的比较功能。

现在我如何在选择时比较任何两个给定项目（使用相似架构的两个组件；或页面）？

我试图提供源项目和目标项目的 tcmid，例如

`"http://sdltridion/WebUI/Editors/CME/Views/Popups/Compare/CompareDialog.aspx#root=<tcm-source>&id1=<tcm-destination>&id2=&popup=UID_393"`但它只考虑了根，即 tcm:56-1520，并提供了最新版本和之前版本的 tcm:56-1520 项目之间的比较。

如何比较使用相似架构实现的两个不同组件？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-14T08:50:48.860

SDL Tridion 不提供不同项目之间的比较，只有同一项目的版本之间的比较。

如果您需要在不同的项目之间进行比较（可能会很有趣知道它的用例是什么），那么您必须自己创建一些东西。最重要的是，您首先要定义要比较的确切内容，因为会有很多您可能不感兴趣的差异（不同的 TCM URI、不同的位置、不同的标题/文件名等）。因此，不可能进行直接的 XML 比较。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-14T12:37:24.503

正如 Bart 所说，Tridion 的比较工具仅适用于同一项目的不同版本，我同意他的观点，即迫使您想要比较不同项目的原因可能有点令人费解。

不过，有一些类似 Microsoft 的工具[，](http://msdn.microsoft.com/en-us/library/aa302294.aspx)您可以将其用于自己的目的。

ñ

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T06:55:20.857

另一种方法是复制两个组件的 XML 源代码，并使用 winmerge 等第三方工具查找差异。

# tomcat - 服务器崩溃的原因有哪些？

> ID：11948795
> 
> 赞同：0
> 
> 时间：2012-08-14T08:48:27.380
> 
> 标签：tomcat, web-applications, crash, webserver, tomcat7

我想知道 Tomcat 服务器何时崩溃，我知道 Web 应用程序中的内存已满或异常会导致崩溃，但其他可能的原因是什么？

我正在开发一个 Web 应用程序，我确信我的应用程序不会过度填充内存。应用程序也没有异常（在我的 catalina.out 文件中没有发现异常），我的服务器刚刚停止。

顺便说一句，我有一个“recover-tomcat.sh”shell 文件，它检查 Tomcat 的状态并在必要时重新启动它。它看起来像这样：

```
#!/bin/bash
SERVICE=/etc/init.d/tomcat7
STOPPED_MESSAGE=" * Tomcat servlet container is not running."
PID_FILE_MESSAGE=" * Tomcat servlet engine is not running, but pid file exists."

if [ "`$SERVICE status`" == "$STOPPED_MESSAGE" ];
then
{
     print "tomcat not running"  
     $SERVICE start
}
else
    if [ "`$SERVICE status`" == "$PID_FILE_MESSAGE" ];
    then
    {
        $SERVICE restart
    }
    fi
fi 
```

另一个相关的问题是，收到消息的原因是什么？

```
* Tomcat servlet engine is not running, but pid file exists. 
```

cron 每 5 分钟调用一次恢复文件，我的 crontab 文件如下所示：

```
SHELL=/bin/bash
# monitor tomcat every 5 minutes
*/5 * * * * sudo /bin/recover-tomcat.sh 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T10:39:37.903

> 完整的内存[可能导致崩溃]

是的。

> 或 Web 应用程序中的异常 [可能导致崩溃]

不。

你有什么*症状*？

# java - hh:mm 格式的时间输入

> ID：11948796
> 
> 赞同：0
> 
> 时间：2012-08-14T08:48:31.450
> 
> 标签：java

我正在用 Java 创建一个应用程序，我有一个要输入开始时间的文本字段和另一个要输入结束时间的文本字段。在这些条目之后，我想以 hh:mm 的形式查看时差。

例子：

> 开始时间：12:00
> 结束时间：14:30
> 
> 结果：2:30

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T09:09:19.633

从您的日期字段中获取以毫秒为单位的时间。从“到”日期减去“从”日期。例如

```
toDate.getTime() - fromDate.getTime() 
```

然后你有以毫秒为单位的时差，简单的计算成秒、小时、天等的问题。

```
milliseconds / 1000 
```

几秒钟等

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T09:27:23.020

这将有助于您了解[SimpleDateFormat](http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html)来解析和格式化 Date 对象。

要解析文本字段中的日期，请使用

```
 // use "hh:mm" if you work in 12-hour format or
    // use "HH:mm" if you work in 24-hour format
    SimpleDateFormat dateFormat = new SimpleDateFormat("HH:mm");
    try
    {
        Date date = dateFormat.parse(startTextField.getText());
    }
    catch (ParseException e)
    {
        //TODO don't forget process exception
        e.printStackTrace();
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T16:14:15.123

到目前为止给出的两个答案都是正确的，但我认为它们最好一起使用。

像这样：

```
SimpleDateFormat dateFormat = new SimpleDateFormat("HH:mm");
try {
    Date startDate = dateFormat.parse(startTextField.getText());
    Date endDate = dateFormat.parse(endTextField.getText());

    long differenceMillis = endDate.getTime() - startDate.getTime();

    resultTextField.setText(dateFormat.format(new Date(differenceMillis)));
} catch (ParseException e) {
    resultTextField.setText("ERROR");
} 
```

有关所有编码方案，请参阅[此 Javadoc 。](http://docs.oracle.com/javase/1.4.2/docs/api/java/text/SimpleDateFormat.html)请注意，此方法将减少天数的差异，并且仅报告小时数。

# jquery - 让一个 div 在另一个前面滚动？

> ID：11948803
> 
> 赞同：0
> 
> 时间：2012-08-14T08:48:57.533
> 
> 标签：jquery, html, css

我一直在尝试让一个 div 在另一个之前滚动。

但是，我有点卡住了。

#wrapper div 在加载时与 #header div 重叠。

这是一个[小提琴](http://jsfiddle.net/MichaelT/QY6Dv/1/)

此外，当我将其传输到 Sublime Text 2 时，它根本不起作用——我什至看不到图像。

这是我在 ST2 中看到的。

HTML：

```
<!DOCTYPE HTML>
<html lang="en-UK">
    <head>
        <link rel="stylesheet" type="text/css" href="DivTest.css" />
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>

<script type="text/javascript">

var header_w=$('#header').height();

$('#wrapper').css('margin-top',header_w+'px');

$(window).resize(function()
{
    header_w=$('#header').height();

    $('#wrapper').css('margin-top',header_w+'px');
});
</script>
        <title></title>
    </head>
    <body>

    <div id="header">
        <img src="http://davesizer.com/blogs/wp-content/uploads/2010/03/eva_jump.jpg" alt="Dog">
    </div>
    <div id="wrapper">
    <div id="outer">
        <div id="content"></div>
    </div></div>

    </body>
</html> 
```

CSS

```
html,
body
{
    margin:0;
    width:100%;
}
#header
{
    position:fixed;
    top:0;
    left:0;
    width:100%;
    height:auto;
    background-size:100%;
}
#header img
{
    width:100%;
    display:block;
    z-index:99;
}
#wrapper
{
    width:100%;
    background-color:lightgrey;
    z-index:100;
    position:absolute;
}
#outer
{
    margin:30px auto;
    padding-top:20px;
    position:relative;
    width:90%;
    height:1500px;
    background-color:red;
}
#inner
{
    margin:0 auto;
    width:200px;
    height:250px;
    background-color:lightblue;
    top:20px
}​ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T09:01:46.967

所以也许这个？

```
$(document).ready(function() {
    var header_h = $('#header').height();
    $('#wrapper').css('margin-top', header_h + 'px');
    $(window).scroll(function() {
        var header = $('#header');
        var opac = Math.max(0, 1 - $(window).scrollTop() / header.height());
        header.css('opacity', opac);
    });
}); 
```

和[小提琴](http://jsfiddle.net/lalatino/RP9sB/)

# c# - 将具有可变行数的 RDLC 表导出为图像时设置高度

> ID：11948806
> 
> 赞同：2
> 
> 时间：2012-08-14T08:49:02.900
> 
> 标签：c#, rdlc, report-viewer2010

我有带有简单表格的 RDLC 报告。我正在使用`LocalReport.Render`方法将报告导出到图像。这里我需要在设备信息参数中指定报表的高度。我的设备信息字符串如下所示（参数在`string.Format`方法中设置）：

```
<DeviceInfo>
    <ColorDepth>{0}</ColorDepth>
    <DpiX>{1}</DpiX>
    <DpiY>{2}</DpiY>
    <MarginBottom>0in</MarginBottom>
    <MarginLeft>0in</MarginLeft>
    <MarginRight>0in</MarginRight>
    <MarginTop>0in</MarginTop>
    <OutputFormat>{3}</OutputFormat>
    <PageHeight>{4}in</PageHeight>
    <PageWidth>{5}in</PageWidth>
</DeviceInfo> 
```

输出格式设置为“图像”。设备信息 xml 的解释在[这里](http://msdn.microsoft.com/en-us/library/ms155373%28v=sql.90%29.aspx)。

由于表的行数可变，我不想设置特定的高度，但我想报告计算生成图像的高度。我可以通过将行高乘以行数来近似高度，但有时我的行的高度不相等。将 PageHeight 设置为 0 会生成具有固定高度（大约 800 像素）的图像。

图表也是如此 - 我必须指定高度，以便图像可以倾斜。

有没有办法让报告自己生成计算高度？

# git - GitHub for Mac：无法提交和同步或仅提交，因为我必须先添加文件

> ID：11948807
> 
> 赞同：2
> 
> 时间：2012-08-14T08:49:06.797
> 
> 标签：git, github, github-for-mac

我无法从 GitHub for Mac App 提交和同步文件，因为该应用程序说我必须之前添加文件，但我希望该应用程序为我执行此操作。我不想`git add -A`每次都去候机楼。我的合作伙伴可以提交和同步，GitHub for Mac 应用程序会为他添加文件。

这是应用程序返回的错误：

```
Git Error:

On branch master Changes not staged for commit: (use "git add ..." to
update what will be committed) (use "git checkout -- ..." to discard
changes in working directory)

modified: .gitignore

... more files here :)

no changes added to commit (use "git add" and/or "git commit -a")
(256) 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T17:46:00.160

因此，如果我正确理解了您的问题...您不想使用`git add`正确的额外步骤吗？如果是这样，那么这对于 Git 来说是不可避免的。这是一个非常重要的步骤，因此完全避免它是相对不可能的。

您可能想设置一个`git commit -a`自动为您执行的别名，但实际上，这一步是不可避免的，无需键入或使用别名。

另外，很抱歉，如果这属于评论（由于某种原因不能对主要问题发表评论）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-30T18:35:31.583

我只是通过删除

```
~/Library/Application Support/GitHub for Mac/ 
```

目录，然后重新启动应用程序。我所做的可能是矫枉过正，但它对我有用。

# java - 使用 JPA 对字符串类型的 DB 字段进行算术运算

> ID：11948809
> 
> 赞同：0
> 
> 时间：2012-08-14T08:49:07.380
> 
> 标签：java, jpa, criteria-api

是否有任何适当的方法可以使用 CriteriaBuilder 类的算术方法（sum、avg 等）和 Entity 类的 String 属性（VARCHAR 列）？

这里是相关领域：

```
@Column(name="GRADE")
private String grade; 
```

我想做的是：

```
Expression ex = criteriaBuilder.avg(root.get("grade"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T08:54:02.820

不能对字符串 (VARCHAR) 数据类型使用**聚合函数。**

在 Oracle 的参考[http://docs.oracle.com/cd/E12839_01/doc.1111/e12048/funcbltag.htm](http://docs.oracle.com/cd/E12839_01/doc.1111/e12048/funcbltag.htm)

Hibernate中聚合函数的正常使用是通过使用hibernate`projections`

```
List results = session.createCriteria(SomeClass.class)
    .setProjection( Projections.projectionList()        
        .add( Projections.avg("someCloumn") )       
    )
    .list(); 
```

这也仅适用于**数据类型**为**bitint、float 和 int**的列。

# objective-c - ARC - 重组应用程序以防止因内存而崩溃

> ID：11948811
> 
> 赞同：0
> 
> 时间：2012-08-14T08:49:11.777
> 
> 标签：objective-c, memory, uiviewcontroller, automatic-ref-counting

我遇到了我自己找不到解决方案的问题，所以我需要你的帮助。下面我将解释我的应用程序结构，然后解释我的问题。

RootViewController 类管理屏幕上可见的视图。在 RootViewController 的 viewDidLoad 方法中，分配了另外两个视图控制器。一种称为 DocumentViewer，可作为 modalViewController 从应用程序的任何位置添加到视图中。另一个称为 MapViewController，包含一个带有循环视频、图像和几个按钮的视图。这些按钮中的每一个都会导致 MapViewController.view 从 RootViewController.view 中删除，并在 RootViewController 中分配另一个 ViewController，然后将其视图添加到 RootControllers 视图中。为了让您能够跟进，我将把这些 ViewControllers 称为 NewViewController。此视图切换是由 RootViewController 中名为 switchViews 的方法引起的。

由 NewViewControllers 控制的视图现在每个都在导航栏中包含一个分段控件。在这个 ViewController 的 viewDidLoad 方法中，分配了另外四个 viewController，其中三个包含一个 webView，最后一个包含五个屏幕大小的图像。所有内容都存储在一个名为 viewArray 的数组中。每次更改分段控件的值时，都会调用一个方法，该方法会删除数组中具有超级视图的所有视图，该超级视图始终仅是当前可见的视图，然后将该视图添加为存储在 viewArray 中的子视图segmentedControl 元素的索引，因此索引为 0 的段加载 [viewArray objectAtIndex:0]。导航栏中的一个按钮调用 RootViewController 中的 switchViews 方法来移除当前视图并再次添加 MapViewController.view。

所以这是我的应用程序，你可能已经猜到我遇到了内存警告问题。例如，当我在 NewViewControllers 视图中并调用 DocumentViewer 并将 pdf 加载到它的 webView 中时，我收到内存警告并且应用程序崩溃。

由于我是第一次使用 ARC，而且我在 Objective-C 方面也不是很有经验，所以我不知道在哪里将 viewController 分配设置为 nil 或类似的东西以将内存使用率保持在可接受的水平。

谁能告诉我我需要在哪里进行更改或卸载内容以防止我的应用程序崩溃？或者可能发布一个教程链接，解释如何防止此类问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T09:08:12.310

一个起点是清除和删除不可见的视图。

同样，使用工具运行，以便您了解分配的来源——从一个视图跳到另一个视图，并寻找在您离开视图时没有释放的增长或对象（堆射击分析对此很有用）。在许多情况下，您应该能够在没有堆增长的情况下从视图导航并返回。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T09:03:01.270

ARC 不是魔法：只是自动的。您仍然必须确保没有保留周期，否则内存将永远不会被回收，并且如果无法再访问这些对象，您实际上就会发生泄漏。

# nuget - 阻止发布到公共 NuGet 库

> ID：11948815
> 
> 赞同：5
> 
> 时间：2012-08-14T08:49:15.430
> 
> 标签：nuget

我们使用 NuGet 来打包我们的内部依赖项。我们正在为这些设置一个私有 NuGet 存储库。

但是，我担心有人可能会不小心将我们的某个包发布到公共 NuGet 存储库。

我可以防止这种情况吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-04-10T12:51:10.090

您可以使用引用内部 NuGet Gallery 实例的值定义`NuGet.config`文件。`DefaultPushSource`将配置文件放在内部包文件旁边`nuspec`。

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <config>
    <add key="DefaultPushSource" value="https://nuget.example.com" />
  </config>
</configuration> 
```

> 通常，最接近文件夹 nuget.exe 的 NuGet.config 文件从 wins 运行，下面的部分将介绍详细信息。
> 
> NuGet 首先从默认位置加载 NuGet.config，然后从当前驱动器的根目录开始加载任何名为 NuGet.config 的文件，并以当前目录结束。
> 
> [链接多个配置文件](https://docs.nuget.org/consume/nuget-config-file#chaining-multiple-configuration-files "链接多个配置文件")
> 
> NuGet Config Defaults 文件还允许指定默认推送源。如果 nuget.exe 的命令行参数中未提供，这将是默认的推送源。如果在 NuGet Config Defaults 文件中没有指定默认推送源，则 nuget.org 是默认的 nuget.exe 推送源。不过，使用新配置，管理员可以将默认推送源更改为内部包源。这将有助于防止意外将包发布到 nuget.org。
> 
> [默认 NuGet.exe 推送源](https://docs.nuget.org/consume/nuget-config-defaults#sample-nugetdefaults.config "默认 NuGet.exe 推送源")

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-08-14T20:39:36.503

不，你不能。你不需要。

意外地，如果有人将 nuget 包发布到错误的服务器，这意味着某人对多个 nuget 服务器（假设您的本地画廊和 nuget.org）拥有**相同的API 密钥。**这种情况的概率相同，`Guid.NewGuid()`会生成两个相等的 GUID。一个用于您的本地 nuget 服务器，第二个用于其他人将包发布到公共 nuget 服务器。

或在现实中的意外意味着“意外”。没有解决办法。

# android - 孩子们没有在自定义 ViewGroup 中设置 layout_width/-height

> ID：11948816
> 
> 赞同：0
> 
> 时间：2012-08-14T08:49:20.373
> 
> 标签：android, children, viewgroup

我制作了一个自定义的 ViewGroup，除了当我将视图拖放到这个 ViewGroup 时，编辑器说它不能将 layout_width 和 layout_height 设置为子项。可能是什么原因造成的？

我只覆盖了两种方法——onLayout 和 onMeasure。我相信我在 onMeasure 中犯了一个错误，因为我还不明白它应该如何测量孩子。

无论如何，这是我的 onMeasure：

```
@Override
protected void onMeasure(final int widthMeasureSpec, final int heightMeasureSpec) {
    super.onMeasure(widthMeasureSpec, heightMeasureSpec);

    final int childWidthMeasureSpec = MeasureSpec.makeMeasureSpec(
            MeasureSpec.getSize(widthMeasureSpec), MeasureSpec.AT_MOST);
    final int childHeightMeasureSpec = MeasureSpec.makeMeasureSpec(
            MeasureSpec.getSize(heightMeasureSpec), MeasureSpec.AT_MOST);

    int count = getChildCount();

    for (int i = 0; i < count; ++i) {
        View child = getChildAt(i);

        child.measure(childWidthMeasureSpec, childHeightMeasureSpec);
    }

    setMeasuredDimension(mWidth, mHeight);
} 
```

那么，如何让我的 viewgroup 的孩子获取 layout_with 和 layout_height 参数呢？

PS 我知道我的 ViewGroup 是固定的宽度和高度，但这就是我想要的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T10:02:29.427

事实证明我应该使用 MeasureSpec.EXACTLY。不知道它的存在。

```
child.measure(MeasureSpec.EXACTLY | childWidth, MeasureSpec.EXACTLY | childHeight); 
```

PS如果有人有更好的评论答案 - 我会接受它作为答案。我很想阅读更多信息；）

# javascript - lua 或 javascript 中的 M2M

> ID：11948818
> 
> 赞同：0
> 
> 时间：2012-08-14T08:49:20.920
> 
> 标签：javascript, lua

对于 Javascript 和 Lua 中哪个更好的 M2M 应用程序？当谈到 M2M 应用程序时，每个人都在谈论 LUA。我非常了解 javascript。那么值得学习 Lua 并在以后实现 M2M 应用程序而不是 javascript 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T16:31:02.497

Lua 几乎在所有方面都比 JavaScript 更好（尽管审美偏好类似于 C 的语法），*而且*它更小、更快、更容易嵌入和扩展。因此，纯粹根据它们的技术优势在两种语言之间进行选择，这几乎是不费吹灰之力。

然而，JavaScript 比 Lua 更广为人知。如果您的客户和/或您所在行业的专业人士（尤其是那些将使用您的工具的人）已经了解 JavaScript，那么您不能轻易忽视这一点。

也就是说，我开发了一个分布式网络测试工具，我们通过 TCL 编写了它的脚本，只是因为测试人员已经知道它，我们为这个决定后悔了多年。应该使用Lua。

简而言之，如果可以，请使用 Lua。如果必须，请使用 JavaScript；这不是一门糟糕的语言，但 Lua，对要点的要点，简直是更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T16:57:31.763

Javascript 在 M2M 中的优势在于它使用 JSON 自动进行序列化和反序列化。尽管 Javascript 有一些[缺点](http://wtfjs.com/)，但 JSON 足够有用，它被广泛使用，即使 Javascript 不是。

Javascript 的另一个优点是它支持任何有浏览器的东西，包括所有的桌面和智能手机，并且有很多特性，比如 TCP 和 UI。

Lua 总的来说是一种更好的语言，它的 VM 小得多，因此它可以适应存储和内存更少的嵌入式系统，还有一个版本更小，叫做 eLua。但它很小的一个原因是它没有太多外部功能：您必须自己添加序列化、TCP 和 UI，或者找到适合的库。您可能需要付出更多努力才能移植到某些平台，就像我曾经为 Android 所做的那样，例如，在这些平台上 Javascript 会更容易。

# mysql - 自动锁定mysql数据库中的用户帐户

> ID：11948822
> 
> 赞同：-2
> 
> 时间：2012-08-14T08:49:33.933
> 
> 标签：mysql

当用户在 mysql 数据库中使用错误的用户名/密码尝试 3 次后登录失败时，我想自动锁定用户帐户。

我试过了

```
CREATE TRIGGER updateTrigger 
BEFORE UPDATE ON users 
FOR EACH ROW
BEGIN IF NEW.is_code=1 AND NEW.times_logged_in>=3
THEN SET NEW.is_active=0;
END IF;
END; 
```

但我得到

> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以获取在第 1 行的“END”附近使用的正确语法

请帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T10:28:47.080

您可能忘记在创建触发器语句之前更改分隔符。

```
DELIMITER //
CREATE TRIGGER ...

END //
DELIMITER ; 
```

# eclipse - Eclipse 中的错误

> ID：11948824
> 
> 赞同：3
> 
> 时间：2012-08-14T08:49:38.173
> 
> 标签：eclipse

我正在尝试将 Dali 插件安装到 Eclipse，但 eclipes 说它已经安装了。然后我尝试仅安装 Dali 图表编辑器，但之后当我尝试创建配置文件以休眠时出现错误：

```
An error has occurred. See error log for more details.
org/eclipse/jpt/jpa/core/JpaProject 
```

然后我删除了大理插件。
之后，我在 lib 目录下创建了一个新项目和 .jars 文件，在 eclipse 中刷新了项目，左键单击到 jar 文件，然后出现错误：

```
An error has occurred. See error log for more details.
org/eclipse/jpt/common/utility/internal/StatefulCommandExecutor 
```

怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T13:27:28.223

在启动 eclipse 后尝试安装插件，`-clean`然后在新的工作区上尝试相同的选项。此外，在尝试上述任何操作之前运行 Eclipse 更新。它有帮助吗？

如果没有其他工作，请尝试从此处下载的 Indigo SR2 的全新下载开始：http: [//www.eclipse.org/downloads/packages/release/indigo/sr2](http://www.eclipse.org/downloads/packages/release/indigo/sr2)

# wpf - WPF在加载图像时抛出“无法定位资源”异常

> ID：11948829
> 
> 赞同：89
> 
> 时间：2012-08-14T08:50:03.620
> 
> 标签：wpf, resources

我有一个 WPF 窗口，其中包含本地系统中一个文件的背景图像。所以 XAML 文件看起来像这样：

```
 <Window.Background>
    <ImageBrush ImageSource="/MYASSEMBLY;component/Resources/MyPic.png"/>
 </Window.Background> 
```

在 XAML 设计器中，它实际上显示了此背景图像，因此该图像确实存在于 MYASSEMBLY\Resources 文件夹中。但是，在`InitializeComponent()`我启动应用程序时的函数调用中，它会引发异常

> 找不到资源“resources/mypic.png”。

所以我现在完全迷路了。设计和运行时的目录是否不同，因此运行时中不存在？

* * *

## 回答 #1

> 赞同：227
> 
> 时间：2012-08-14T08:54:12.200

在解决方案资源管理器中，将图像文件的`Build Action`属性设置为`Resource`. 然后**清理**解决方案并重建它。

# silverlight - Silverlight binding does not work dynamically

> ID：11948843
> 
> 赞同：0
> 
> 时间：2012-08-14T08:51:27.827
> 
> 标签：silverlight, binding

I am Silverlight newbie and I can't make the simple Silverlight binding sample work!

I need to make a view-model, that shows the number of documents in the list, while it is loading.

I made a base-class, that implements INotifyPropertyChanged:

```
public abstract class BaseViewModel : INotifyPropertyChanged {

    protected BaseViewModel() {}

    #region INotifyPropertyChanged Members

    protected void OnPropertyChanged(string propertyName) {
        PropertyChangedEventHandler handler = PropertyChanged;

        if (handler != null)
        {
            handler(this, new PropertyChangedEventArgs(propertyName));
        }
    }

    public event PropertyChangedEventHandler PropertyChanged;

    #endregion
} 
```

I made a child-class, that has "CountDocs" property:

```
public class DocumentViewModel : BaseViewModel {

    public DocumentViewModel () {
    ...
    }

...

    public int CountDocs {
        get { return countDocs; }
        set {
            if (countDocs != value) {
                countDocs = value;
                OnPropertyChanged("CountDocs");
            }
        }
    }

    public int countDocs;

} 
```

I have DocumentViewModel.xaml with the following contents:

```
<UserControl 
...
xmlns:vm="clr-namespace: ... .ViewModels" >
...
<UserControl.Resources>
    <vm:DocumentViewModel  x:Key="viewModel"/>
</UserControl.Resources>
...
<TextBlock x:Name="CounterTextBlock" Text="{Binding Source={StaticResource viewModel}, Path=CountDocs}"></TextBlock> 
```

That is I mentioned namespace of my child-class, I made a resource of my child class with key "viewModel", and I entered binding of textblock, to this object's property "CountDocs".

The problem is that the CountDocs property fills the TextBlock only once: on load. But then I set CountDocs, and it does not fill the TextBlock.

I have tried to use the Mode property of binding, to use DataContext, but I still can't make it work.

Is there something wrong with the binding? How to make the ViewModel update when the CountDocs property of my object is changed?

Thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T09:18:47.723

If I understand the details of your question, you may be updating a UI bound value on a background thread (as documents load).

You need to make that happen on the UI thread or the change will not be visible. In one of our WPF apps random updates were disappearing until we realised this.

We do a lot of multi-threading in our Silverlight (and WPF) apps so to avoid this problem, we implemented our notify helper in a base class like the one below (other stuff trimmed out). It dispatches all notify messages on the main UI thread. Give it a try:

```
public class ViewModelBase : INotifyPropertyChanged
{
    protected delegate void OnUiThreadDelegate();

    public event PropertyChangedEventHandler PropertyChanged;

    protected virtual void SendPropertyChanged(string propertyName)
    {
        if (this.PropertyChanged != null)
        {
            // Ensure property change is on the UI thread
            this.OnUiThread(() => this.PropertyChanged(this, new PropertyChangedEventArgs(propertyName)));
        }
    }

    protected void OnUiThread(OnUiThreadDelegate onUiThreadDelegate)
    {
        // Are we on the Dispatcher thread ?
        if (Deployment.Current.Dispatcher.CheckAccess())
        {
            onUiThreadDelegate();
        }
        else
        {
            // We are not on the UI Dispatcher thread so invoke the call on it.
            Deployment.Current.Dispatcher.BeginInvoke(onUiThreadDelegate);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T12:11:36.373

Ok since you created your ViewModel instance in your XAML, you'll need to access and use that ViewModel.

If you have another instance, that instance won't update your binding. Only the instance created in your Resources would be used.

Now you said you set the CountDocs property but I don't see any code for that. Whereever you do that, you have to use the ViewModel instance from your Resources.

This is why I like to instantiate my view model in my constructor of my view and keep a reference to it. Also unless you plan to have many data sources attached to your bindings, you can simply set the LayoutRoot.DataContext to you ViewModel instance and remove the Source attribute in your binding.

> ViewModelBase _vm = null;
> public MyView()
> {
> _vm = new DocumentViewModel();
> this.LayoutRoot.DataContext = _vm;
> }

In XAML, `<TextBlock x:Name="CounterTextBlock" Text="{Binding CountDocs}"></TextBlock>`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T08:40:53.390

As we found out in the comments to your question, you had your ViewModel instantiated twice, and changed the property value on the one which was not actually bound to the view.

How can that be? You're either using an MVVM framework that wires up ViewModels to Views automatically, or it happens somewhere in your code where you're not aware of. Put a breakpoint in the constructor, and when it hits, analyze the Call Stack in Visual Studio.

# android - 使用 NDK 在 Android 上进行本地化/本地化

> ID：11948844
> 
> 赞同：2
> 
> 时间：2012-08-14T08:51:31.390
> 
> 标签：android, c++, localization, android-ndk

我将我的 C++ iOS 游戏引擎移植到了 Android 上，它在返回到 Android 2.2 的设备上运行良好，但在支持本地化时遇到了问题。

C++ 引擎加载使用 poedit 创建的 .po (gettext) 本地化文件，并将它们放入`std::wstring`. 这在我支持的其他平台上工作得非常好，但在 Android 上不起作用，因为 NDK 不正确支持 wchar/wstring。有关我当前（非常基本）的实现，请参见[github 。](https://github.com/pixelballoon/pixelboost-engine/tree/develop/src/common/pixelboost/util/localisation)

现在，我想我可以手动将多字节字符串转换为自定义的`std::basic_string<uint_32>`. 如建议 - [Android NDK C++ 'wstring' 支持](https://stackoverflow.com/questions/7696704/android-ndk-c-wstring-support)

这在大多数情况下都很好，但是人们如何处理字符串格式？虽然我的大部分字符串只是文本，不需要任何格式，但有些字符串类似于“*干得好 %1$s，你得分 %2$d！* ”。

人们如何在没有`swprintf`支持的情况下处理这些字符串的格式？

是否有推荐的方法来可靠地处理跨平台本地化而不依赖 wchar/wstring 支持（我认为无论如何都不推荐 - 但似乎没有人建议不依赖不适合的 20MB+ 库的可行替代方案移动的）？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T19:43:57.553

我已经设法让它发挥作用。我没有在整个应用程序中使用宽字符串，而是将其转换为在整个应用程序中使用 UTF8。这让我可以`sprintf`正常使用（当然有某些例外，比如限制字符串长度不起作用）。然后我在字体渲染器中将字符串转换为 UTF32，这样我就不必即时解码 UTF8。

[本地化](https://github.com/pixelballoon/pixelboost-engine/tree/develop/src/common/pixelboost/util/localisation)和[字体渲染器](https://github.com/pixelballoon/pixelboost-engine/tree/develop/src/common/pixelboost/graphics/renderer/font)的实现刚刚上传到[github](https://github.com/pixelballoon/pixelboost-engine/)

参考

[视频游戏中的 Unicode 使用](https://gamedev.stackexchange.com/questions/33126/unicode-usage-in-video-games)
[UTF8 无处不在](http://www.utf8everywhere.org/)

# .net - 覆盖所有子类中的基方法调用而不继承每个子类（VB.NET）

> ID：11948851
> 
> 赞同：1
> 
> 时间：2012-08-14T08:52:19.343
> 
> 标签：.net, vb.net, inheritance, virtual, overriding

出于测试目的，我需要覆盖当前在基类中实现的特定方法调用。

```
 Public Overridable Function CreateFactory(Of TFactory As {IManagerFactory(Of IManager), Class})() As TFactory 
```

我想避免必须为该基类的每个现有子类创建一个继承类（即从 CLBase 等继承的 CLAccountManager 的 CLTestableAccountManager）。

```
Public Class CLTestableAccountManager
  Inherits CLAccountManager

    Public Overrides Function CreateFactory(Of TFactory As {IManagerFactory(Of IManager), Class})() As TFactory 
```

虽然这可行，但由于适用于许多类，它会导致大量重复代码。该方法只能在单元测试的上下文中使用时被覆盖，所以我不应该真正触及基类实现（它是虚拟的/可覆盖的）。

不幸的是，我不能简单地做类似的事情

```
Public Class CGenericBaseOverrider(Of TBase As {CLBase})
  Inherits TBase 
```

实现一个通用的方法来覆盖 CLBase 的所有子类的方法。

谁能指出我如何解决这个问题的方向？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T08:56:26.397

你可以使用组合而不是继承吗？

换句话说，为了测试目的，创建一个实现相同接口的类型（如果你没有接口，则引入一个接口）并将所有调用委托*给*你`CreateFactory`拥有的任何生产代码 - 但为此执行你的自定义行为一通电话。

# c# - Silverlight Windows Phone http C#

> ID：11948853
> 
> 赞同：0
> 
> 时间：2012-08-14T08:52:33.023
> 
> 标签：c#, silverlight, windows-phone-7, http

我为 Windows Phone 开发应用程序我使用 Visual Studio express 2010 c# for Windows Phone How to do request to web page wrom c# code。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T08:55:27.943

无需从您那里获得任何代码（通常是您尝试过的问题），我可以给您几个链接...您可以使用[HpptWebRequest](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest%28v=vs.95%29.aspx)或[WebClient](http://msdn.microsoft.com/en-us/library/system.net.webclient.aspx)类。 [这](http://blogs.msdn.com/b/silverlight_sdk/archive/2008/04/01/using-webclient-and-httpwebrequest.aspx)是两者的教程。

# asp.net - IIS 波浪号漏洞问题

> ID：11948857
> 
> 赞同：3
> 
> 时间：2012-08-14T08:52:40.197
> 
> 标签：asp.net, security, iis, url-rewriting

这是我们在我们的一个网站上遇到的问题：

**使用 Windows 文件系统速记字符和状态返回代码的文件/目录名称暴力破解**

```
It is possible to find an unknown filename up to six characters by using shorthand file characters such as ~1 and
    *Example: site.com/admin/uplo*~1*/.aspx
This attack relies on reading different error codes the webserver responds with when the file(s) exist or not. Let’s say the file upload.aspx exists in the directory admin. Our attacks responses would look like this:
    site.com/admin/uplo*~1*/.aspx – IIS returns HTTP 404 File Not Found (valid file)
    site.com/admin/uplp*~1*/.aspx – IIS returns HTTP 400 Bad Request (invalid file)
        *Note that IIS 7.x responds with different error codes (0×0 when valid) instead of http status codes 
```

**更多详情** [http://www.alertlogic.com/internet-information-server-iis-exploitation-2/](http://www.alertlogic.com/internet-information-server-iis-exploitation-2/)

**一种可能的解决方案：** ...如果可能，您可能希望考虑使用 URL 重写来不允许接受任何带有波浪字符的 URL ...

**问题：** 如何做到这一点？为了丢弃网站上所有 URL 中的 ~ 字符，应该在 url 重写规则中使用什么正则表达式（ASP.NET 3.5）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-27T15:07:12.923

可以通过执行以下任一操作来修复它：

```
1\. Install .NET 4.0 on the web server. 
```

或者

```
2\. Install and configure IIS URLScan module (do not allow ~ chars in the URL by adding ~ to [DenyUrlSequences] section). 
```

在这里找到更多有用的信息： [http ://weblogs.asp.net/scottgu/archive/2010/09/18/important-asp-net-security-vulnerability.aspx](http://weblogs.asp.net/scottgu/archive/2010/09/18/important-asp-net-security-vulnerability.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-07T08:48:09.487

需要在 IIS 上禁用 8.3 文件名生成。简单的注册表更改，但您需要复制所有受影响的目录，因此需要停止 IIS。

[如何在 NTFS 分区上禁用 8.3 文件名创建](http://support2.microsoft.com/kb/121007)

[NtfsDisable8dot3NameCreation](http://technet.microsoft.com/en-us/library/cc778996.aspx)

# c# - 是否可以在打印前预览图像

> ID：11948858
> 
> 赞同：0
> 
> 时间：2012-08-14T08:52:41.463
> 
> 标签：c#, asp.net, printing

我正在使用`MICR`打印字体创建支票。对于从 gridview 中选择的记录，我正在创建一个检查。示例代码如下

```
public void print()
{
    try
    {
        PrivateFontCollection PFC = new PrivateFontCollection();
        PFC.AddFontFile(Server.MapPath("ADVMICR.TTF"));
        FontFamily fm = new FontFamily(PFC.Families[0].Name, PFC);
        Font PrintFont = new Font(fm, 12);

        PrintDocument pd = new PrintDocument();
        pd.PrintPage += new PrintPageEventHandler(pd_PrintPage);
        //Specify the printer to use.  HP LaserJet P2035
        pd.PrinterSettings.PrinterName = "HP LaserJet P2035";
        pd.Print();
    }
    catch (Exception Ee)
    {

    }
}

public void pd_PrintPage(object sender, PrintPageEventArgs e)
{
       e.Graphics.DrawString("PAY TO THE ORDER OF", drFont, drawBrush, 15.0F, 120.0F);
        e.Graphics.DrawString(FirstName + "," + MiddleInitial + ":" + LastName, drnarrowFont1, drawBrush, 145.0F, 117.0F);
        e.Graphics.DrawString(CompanyName, drarialblackFont, drawBrush, 140.0F, 30.0F);
        e.Graphics.DrawString(Address1, drsmallFont, drawBrush, 140.0F, 45.0F);
        e.Graphics.DrawString(City + "," + StateName, drsmallFont, drawBrush, 140.0F, 55.0F);
        e.Graphics.DrawString(Country + "," + ZipCode, drsmallFont, drawBrush, 140.0F, 69.0F);
        e.Graphics.DrawString("DATE", drFont, drawBrush, 595.0F, 70.0F);
        e.Graphics.DrawString(strDateTime, drnarrowFont, drawBrush, 650.0F, 65.0F);
        e.Graphics.DrawString("MEMO", drFont, drawBrush, 15.0F, 262.0F);
        e.Graphics.DrawString(iCheckno.ToString().PadLeft(4, (char)48), drFont, drawBrush, 730.0F, 20.0F);
        e.Graphics.DrawString(strFractionCode1, drnarrowFont, drawBrush, 720.0F, 40.0F);
        e.Graphics.DrawString("DOLLARS", drFont, drawBrush, 700.0F, 170.0F);
} 
```

我想按照这里的打印前预览

[http://projects.erikzaadi.com/jQueryPlugins/jQuery.printElement/](http://projects.erikzaadi.com/jQueryPlugins/jQuery.printElement/)

如果从 gridview 中选择了两条记录，我想分页显示它们。有人能帮我吗。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T09:04:37.003

这些链接肯定会帮助你。

[在 C# 中打印和打印预览位图](https://stackoverflow.com/questions/4246905/print-print-preview-a-bitmap-in-c-sharp)

[http://msdn.microsoft.com/en-us/library/e2k43zdy(v=vs.90).aspx](http://msdn.microsoft.com/en-us/library/e2k43zdy(v=vs.90).aspx)

[http://www.c-sharpcorner.com/uploadfile/mgold/pritingincsharp11222005040630am/pritingincsharp.aspx](http://www.c-sharpcorner.com/uploadfile/mgold/pritingincsharp11222005040630am/pritingincsharp.aspx)

# php - 无法从android中的php获取Json？

> ID：11948864
> 
> 赞同：2
> 
> 时间：2012-08-14T08:53:12.180
> 
> 标签：php, android, json

我得到了这个 Logcat：

```
08-14 11:42:55.923: W/System.err(1137): org.json.JSONException: Value {"error":0,"success":0,"tag":"helloworld"} of type org.json.JSONObject cannot be converted to JSONArray 
```

我该如何解决这个问题？

```
08-14 11:42:55.923: W/System.err(1137):     at org.json.JSON.typeMismatch(JSON.java:111) 
```

我使用的代码是：

```
public class MainActivity extends Activity {

    TextView tv;
    HttpClient client;
    JSONObject json;
final static String URL = "http://192.168.1.9/sumit/hello.php";
    //final static String URL = "http://json.org/example.html";
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        tv = (TextView) findViewById(R.id.tv1);
        client = new DefaultHttpClient();

        Log.e("my","check");
        new Read().execute("tag");
//      StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder()
//              .detectAll().penaltyLog().build();
//      StrictMode.setThreadPolicy(policy);

    }

    public JSONObject myData() throws ClientProtocolException, IOException,
            JSONException {

        StringBuilder url = new StringBuilder(URL);
        HttpGet get = new HttpGet(url.toString());
        HttpResponse r = client.execute(get);
        int status = r.getStatusLine().getStatusCode();
        if (status == 200) {
            HttpEntity e = r.getEntity();
            String data = EntityUtils.toString(e);
            JSONArray datastream = new JSONArray(data);
            JSONObject message = datastream.getJSONObject(0);
            return message;
        } else {
            Toast.makeText(MainActivity.this, "error encountered",
                    Toast.LENGTH_SHORT).show();
            return null;
        }

    }

    class Read extends AsyncTask<String, Integer, String> {

        @Override
        protected String doInBackground(String... params) {
            // TODO Auto-generated method stub
            try {
                json = myData();

                                    return json.getString(params[0]);

            } catch (ClientProtocolException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (JSONException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

            return null;
        }

        @Override
        protected void onPostExecute(String result) {
            // TODO Auto-generated method stub
            tv.setText(result);

        }

    }

} 
```

生成的 JSON 代码：

```
{"tag":"hello","success":0,"error":0} 
```

用于生成的代码：

```
<?php

    // response Array
    $response = array("tag" => helloworld, "success" => 0, "error" => 0);

   echo json_encode($response);

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T09:05:07.980

因为你得到的不是`JSONArray`——而是`JSONObject`

JSONArray 在您的情况下将如下所示：

```
[{"error":0,"success":0,"tag":"helloworld"}] 
```

它是一个包含一个元素的数组（即`JSONObject`，它包含字段）。

我不太了解php（而且我不知道它是如何`json_encode`工作的），但试试这个：

```
<?
    $response = array(array("tag" => helloworld, "success" => 0, "error" => 0));
    echo json_encode($response);
?> 
```

# .htaccess - .htaccess 并不总是加载

> ID：11948865
> 
> 赞同：0
> 
> 时间：2012-08-14T08:53:14.373
> 
> 标签：.htaccess, cakephp, osx-mountain-lion, slim

好的，所以我最近将我的 imac 从 Lion 升级到了 Mountain lion osx (10.8)。我一直在使用默认的 apache 设置和 vhosts 等进行 php 开发，因为升级安装将很多设置更改为我的 httpd.conf 文件。

目前，我有两个项目在进行中，一个使用 CakePHP 设置，另一个使用 SlimFramework，这两个 php 框架都带有 .htaccess 文件。

我遇到了一些问题，其中 cakephp htaccess 加载并按预期工作，但 slimframework 没有。这两个都在 Lion 上工作，我很困惑为什么他们会受到不同的对待。

mod_rewrite 模块已加载，已启用，并且我的 AllowOverides 设置为 ALL。什么会导致 SlimFramework 文件无法加载？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T10:56:50.257

好吧，经过几个小时的谷歌搜索，我发现了这篇博文 petercompernolle.com/2012/07/26/fixing-httpdconf-in-osx-mountainlion

它描述了山狮升级后修复 apache 所涉及的问题和修复，包括您可能遇到的 HTAccess 问题。

摘自文章

> 然后几个小时后，我想通了。它不再存储在 /etc/apache2/httpd.conf 中。出于某种原因，Apple 改变了一些长期有效的东西，而是在 /Library/Server/Web/Config/apache2/sites 中创建了一大堆文件。端口 80 上的任何内容都有一个 .conf 文件，我在 Server.app 中创建的站点的另一个 .conf 文件，以及为我在 Server.app 中所做的每次更改所做的一大堆其他备份。

# php - 代码在 jsfiddle 中工作，但在 localserver 中没有

> ID：11948868
> 
> 赞同：0
> 
> 时间：2012-08-14T08:53:41.903
> 
> 标签：php, javascript, jquery, html, jsfiddle

请帮我解决这个问题...

我有一个与代码[http://jsfiddle.net/LTYa2/14/](http://jsfiddle.net/LTYa2/14/)的链接，它在 jsfiddle 中工作正常......但如果我把同样的东西放在 localhost 它没有任何特定的原因？我还检查了 javascripts 和 jquery 一切嵌入正确（其他jsfiddle代码工作正常）......

谁能指导我如何放置此代码

```
$('q.clickMe1').click(function () {
// find first of following DIV siblings
// with class "textBox" and toggle it

$(this).nextAll('div.sri1:first').show();
$('div.sri1:visible').not($(this).nextAll('div.sri1:first')).toggle();
}); 
```

html代码

```
<q class="clickMe1">Hire</q>
<br />
<div class="sri1"> - This text will be toggled</div>

 <q class="clickMe1">Manage</q>
 <br />
 <div class="sri1"> - This text will be toggled 2</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T08:56:41.500

jsFiddle`onload`默认情况下将代码包装在其中，这就是它起作用的原因。[这](http://jsfiddle.net/LTYa2/19/)是小提琴，因为我禁用了 onload 包装，所以它不起作用。

为了让它适合你，像这样包装它：

```
$(document).ready(function() {
    $('q.clickMe1').click(function () {
        // find first of following DIV siblings
        // with class "textBox" and toggle it
        $(this).nextAll('div.sri1:first').show();
        $('div.sri1:visible').not($(this).nextAll('div.sri1:first')).toggle();
    });
}); 
```

假设您使用的是 jQuery 1.7 或更高版本，您可以避免这种包装，`.on()`而是像这样使用：

```
$(document).on('click', 'q.clickMe1', function () {
    //...your code here
}); 
```

[更新了小提琴](http://jsfiddle.net/LTYa2/20/)- 没有 onload 并且仍在工作。

# php - 将 php 变量传递给 jQuery

> ID：11948875
> 
> 赞同：1
> 
> 时间：2012-08-14T08:54:06.350
> 
> 标签：php, javascript, jquery

> **可能重复：**
> [通过 PHP 解析 JavaScript 文件](https://stackoverflow.com/questions/3943198/parse-a-javascript-file-through-php)

我一直在尝试将 php 变量传递给 jQuery ，但没有多大成功。这是我用来传递数据的代码部分：

```
 $('#submitAuto').click(function(){
          var isDelete = $("#autoDelete").val();
          var userID = "<?php echo $userData ; ?>" ; 
```

但我发现 userID 值是字符串，`<?php echo $userData ; ?>`而不是 $userData 值。

我该如何处理这个问题？

任何建议都将受到欢迎，在此先感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T09:01:31.827

将 JavaScript 移动到`<script>`标签内并放置在 PHP 文件中。

您的服务器不会运行 PHP，除非它具有 .php 文件扩展名。

像这样使用也可能是一个好主意`json_encode()`：

```
var userID = <?php echo json_encode($userData); ?>; 
```

这可以阻止字符串中有趣字符的任何问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T08:56:58.990

从行中删除“”

var userID = <?php echo $userData; ?>

您不应该在 js 中获取 php 代码，您应该将 userData 的值放在页面上的 html 元素中，然后您可以使用 document.getElementByID 等读取它。

您可以让隐藏字段获取 userdata 的值，然后您可以在 javascript 的帮助下读取 userdata 变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T09:01:38.673

任何包含 PHP 代码的文件都必须由 PHP 解析以将代码转换为其他内容，然后才能将其从服务器发送到客户端，因为 PHP 仅在服务器上运行。

通常这意味着文件必须以 结尾`.php`，并且仅将 PHP 代码粘贴到`.js`文件中是行不通的，除非您将服务器配置为`.js`通过 PHP 运行文件。

大多数情况下，只需将`.js`文件重命名为即可，或者您可以将 javascript 包含在带有脚本标签的文件中，或者将服务器配置更改为也解析文件。在 Apache 中，您可以添加到 .htaccess ：`.php``.php``.js`

```
AddType application/x-httpd-php .js
AddHandler x-httpd-php5 .js
<FilesMatch "\.(js|php)$">
SetHandler application/x-httpd-php
</FilesMatch> 
```

# c# - 从 sql 数据库中获取数据并添加到列表视图列？

> ID：11948879
> 
> 赞同：1
> 
> 时间：2012-08-14T08:54:16.477
> 
> 标签：c#, database

我是 C# 程序员，我尝试将 sql 数据库数据添加到我的列表视图中，但出现错误（无法在同一位置添加或插入）

```
ListViewItem i = new ListViewItem();
Invoke(new Action(() => listBox1.Items.Clear()));
con = new SqlConnection("Data Source=LEO-PC\\SQLEXPRESS;Initial Catalog = Datashare;Integrated Security = True");
cmd = new SqlCommand("select * from shareTable", con);
con.Open();
SqlDataReader sqlRead;
try
{
    sqlRead = cmd.ExecuteReader();
    while (sqlRead.Read())
    {

        string fileNameStr = (string)sqlRead["filePath"];
        string author = (string)sqlRead["authorName"];
        DateTime uploadTime = (DateTime)sqlRead["dateSend"];
        string date = Convert.ToString(uploadTime); ;

        Invoke(new Action(() => i.SubItems.Add(author)));
        Invoke(new Action(() => i.SubItems.Add(fileNameStr)));
        Invoke(new Action(() => i.SubItems.Add(date)));
        listView1.Items.Add(i);
    }
}
catch (Exception ex)
{
    MessageBox.Show(ex.Message);
}
finally
{
    con.Close();
} 
```

# css - Css：将图像立即放在标题和副标题的右侧

> ID：11948880
> 
> 赞同：0
> 
> 时间：2012-08-14T08:54:17.890
> 
> 标签：css, positioning

假设我有这个 html 代码：

```
<img src="pic.jpg"/>
<h1>Title!</h1>
<h5>A subtext</h5>
<hr/> 
```

什么css代码会给我以下结果？

![css_example](../Images/de9d40e9a1e2c074f734928fc173ce5e.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T09:02:55.167

```
<div id="container">

<div class="content_left">
  <h1>Title!</h1>
  <h5>A subtext</h5>
  <hr/>
</div>
<div class="content_right">
  <img src="pic.jpg"/>
</div>
<div> 
```

CSS：

```
#container {
  width: yourwidth;
  height: yourheight;
}

.content_right {
  float:right;
  width: width of image;
}
.content_left {
  float:left;
  width: width of text;
} 
```

当然，这只是可以做到这一点的众多方法中的一种......

# javascript - 如何组合这些功能

> ID：11948886
> 
> 赞同：0
> 
> 时间：2012-08-14T08:54:42.913
> 
> 标签：javascript, jquery

将有 14 个类似的功能，我需要将它们组合起来，因为这些功能相互影响，请帮帮我

```
$(".mieszkanie").click(function() {
        var num = this.id.replace(/c_07_/, "").substr(0, 3);
        $('.pdf').attr({ 
            href: "img/rzuty/mieszkania/pietro07rzuty/" + num + ".pdf"
        });
        $('.karta img').attr({ 
            src: "img/rzuty/mieszkania/pietro07rzuty/" + num + ".png",
            alt: "mieszkanie" + num
        });
    });

$(".mieszkanie").click(function() {
        var num = this.id.replace(/c_10_/, "").substr(0, 3);
        $('.pdf').attr({ 
            href: "img/rzuty/mieszkania/pietro10rzuty/" + num + ".pdf"
        });
        $('.karta img').attr({ 
            src: "img/rzuty/mieszkania/pietro10rzuty/" + num + ".png",
            alt: "mieszkanie" + num
        });
    }); 
```

HTML

```
<div id="div10p" class="okno clearfix rzutyWraper">
        <h2>RZUT 10 PIĘTRA</h2> 
        <div id="rzuty10p" class="rzuty">
            <span id="c_10_248" class="mieszkanie" title=""></span>
            <span id="c_10_247" class="mieszkanie" title=""></span>
            <span id="c_10_249" class="mieszkanie" title=""></span>
            <span id="c_10_250" class="mieszkanie" title=""></span>
            <span id="c_10_252" class="mieszkanie" title=""></span>
            <span id="c_10_251a" class="mieszkanie" title=""></span>
            <span id="c_10_251b" class="mieszkanie" title=""></span>
        </div>      
        <div class="karta">
            <div class="kartaPanel">
                <button class="close">zamknij</button>
                <a class="pdf" href="" onclick="this.target='_blank'">pobierz</a>
            </div>
            <img src="" alt="mieszkanie" />
        </div>
    </div>

    <!-- PIETRO 07 -->
    <div id="div07p" class="okno clearfix rzutyWraper">
        <h2>RZUT 7 PIĘTRA</h2> 
        <div id="rzuty07p" class="rzuty">
            <span id="c_07_001" class="mieszkanie" title=""></span>
            <span id="c_07_002a" class="mieszkanie" title=""></span>
            <span id="c_07_002b" class="mieszkanie" title=""></span>
            <span id="c_07_003" class="mieszkanie" title=""></span>
            <span id="c_07_004" class="mieszkanie" title=""></span>
            <span id="c_07_005" class="mieszkanie" title=""></span>
            <span id="c_07_006a" class="mieszkanie" title=""></span>
            <span id="c_07_006b" class="mieszkanie" title=""></span>
            <span id="c_07_008" class="mieszkanie" title=""></span>
        </div>      
        <div class="karta">
            <div class="kartaPanel">
                <button class="close">zamknij</button>
                <a class="pdf" href="" onclick="this.target='_blank'">pobierz</a>
            </div>
            <img src="" alt="mieszkanie" />
        </div>
    </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T09:04:34.933

检查这个正则表达式。

```
/.+_(\d+)_(.+)/.exec('c_10_249'); 
```

结果将是

```
["c_10_249", "10", "249"] 
```

然后每个具有“mieszkanie”类的元素只有一个回调。

```
$(".mieszkanie").click(function() {
    var nums =  /._(\d+)_(.+)/.exec( this.id );
        var num2 = nums[2].substr(0, 3);
    $('.pdf').attr({ 
        href: "img/rzuty/mieszkania/pietro"+nums[1]+"rzuty/" + num2 + ".pdf"
    });
    $('.karta img').attr({ 
        src: "img/rzuty/mieszkania/pietro"+nums[1]+"rzuty/" + num2 + ".png",
        alt: "mieszkanie " + num2
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T09:00:46.063

```
$(".mieszkanie").click(function() {
        var num = this.id.substr(5, 8);
        $('.pdf').attr({ 
            href: "img/rzuty/mieszkania/pietro07rzuty/" + num + ".pdf"
        });
        $('.karta img').attr({ 
            src: "img/rzuty/mieszkania/pietro07rzuty/" + num + ".png",
            alt: "mieszkanie" + num
        });
    }); 
```

根据您的 HTML，如果您的 HTML 是一致的，这将适用于所有人，不需要正则表达式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T09:01:24.247

`.replace()`接受正则表达式，因此您可以执行以下操作：

```
this.id.replace(/c_[0-9]{1,2}_/, ""); 
```

# c - 更改 HBITMAP 分辨率以减小文件大小

> ID：11948890
> 
> 赞同：1
> 
> 时间：2012-08-14T08:55:01.157
> 
> 标签：c, winapi, sockets, bitmap, resolution

我将桌面的屏幕截图创建为位图文件。

在win32 C中降低这个大图像文件（~3 MB）的分辨率的最佳方法是什么？

我想通过网络发送它，所以文件应该更小。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T13:04:14.440

使用[StretchBlt](http://msdn.microsoft.com/en-us/library/windows/desktop/dd145120%28v=vs.85%29.aspx)调整位图大小或使用 gdi+ api 将位图转换为 jpeg。请查看[http://www.daniweb.com/software-development/cpp/threads/327090/how-to-convert-screenshotbmp-to-jpeg#](http://www.daniweb.com/software-development/cpp/threads/327090/how-to-convert-screenshotbmp-to-jpeg#)。

# java - SocketTimeoutException：在 Jar 中读取超时

> ID：11948894
> 
> 赞同：0
> 
> 时间：2012-08-14T08:55:18.800
> 
> 标签：java, eclipse, soap, jar, collabnet

我正在尝试将文件上传到 Sourceforge 并在 Eclipse 中使用 Java 中的 Collabnet API 和 SOAP 为其创建文件版本，这工作正常，直到我将类打包到 jar 中，将其添加到构建路径中，然后尝试通过 Ant Java 任务执行它。然后我得到下面给出的故障 fi_sfSoap.upLoadFile 挂起然后超时。这不是文件的大小，起初我以为是文件路径，但文件可以从 jar 内部由文件阅读器读取。任何帮助将不胜感激！

```
File latest_release = new File(file_path);
    if(!latest_release.canRead()){
        System.out.println("File does not Exist");
}else{
        DataSource ds = new FileDataSource(latest_release);
        DataHandler dh = new DataHandler(ds);
    try{
            String file_id = fi_sfSoap.uploadFile(sessionId, dh);
            f_sfSoap.createFrsFile(sessionId, release_id, fileName, "application/zip", file_id);
        }catch(Exception e){
            e.printStackTrace();
        }

    } 
```

错误信息

```
 [java] AxisFault
    [java]  faultCode: {http://schemas.xmlsoap.org/soap/envelope/}Server.userException
    [java]  faultSubcode: 
    [java]  faultString: java.net.SocketTimeoutException: Read timed out
    [java]  faultActor: 
    [java]  faultNode: 
    [java]  faultDetail: 
    [java]  {http://xml.apache.org/axis/}stackTrace:java.net.SocketTimeoutException: Read timed out
    [java]  at java.net.SocketInputStream.socketRead0(Native Method)
    [java]  at java.net.SocketInputStream.read(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T10:43:09.087

猜测您的文件太大而无法上传。

BTW`!latest_release.canRead()`并不明确表示该文件不存在。它可能存在但由于访问控制而无法访问。

# json - 如何使用 JPA 和 Hibernate 自动序列化和反序列化 JSON 字符串？

> ID：11948895
> 
> 赞同：8
> 
> 时间：2012-08-14T08:55:18.833
> 
> 标签：json, hibernate, jpa, orm, jackson

我有具有列“首选项”的数据类/表“用户”

```
CREATE table "user"; 
ALTER TABLE "user" ADD COLUMN preferences TEXT; 
```

首选项类型是 TEXT，我在那里存储 JSON。

```
public class User extends AbstractEntity{
public String preferences;
} 
```

所以`user.preferences`价值是`"{notifyByEmail:1, favouriteColor:"blue" }"`

我怎样才能用一些注释来包装它，这样我就可以像访问它一样

```
user.preferences.notifyByEmail 
```

或无需包装成数据对象

```
user.preferences.get("notifByEmail");
user.preferences.set("notifByEmail",true); 
```

我想可能有一些杰克逊注释可以添加到字段中，例如

```
@JsonGenerate
public String preferences; 
```

我对 JPA 还很陌生，文档也很丰富。

我相信我的情况很常见。谁能举个例子？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2017-01-05T08:39:11.173

可以使用 JPA Converter 实现这一点。

实体;

```
@Id
@GeneratedValue
Long id;

@Column(name = "mapvalue")
@Convert(converter = MapToStringConverter.class)
Map<String, String> mapValue; 
```

转换器：

```
@Converter
public class MapToStringConverter implements AttributeConverter<Map<String, String>, String> {

    ObjectMapper mapper = new ObjectMapper();

    @Override
    public String convertToDatabaseColumn(Map<String, String> data) {
        String value = "";
        try {
            value = mapper.writeValueAsString(data);
        } catch (JsonProcessingException e) {
            e.printStackTrace();
        }
        return value;
    }

    @Override
    public Map<String, String> convertToEntityAttribute(String data) {
        Map<String, String> mapValue = new HashMap<String, String>();
        TypeReference<HashMap<String, Object>> typeRef = new TypeReference<HashMap<String, Object>>() {
        };
        try {
            mapValue = mapper.readValue(data, typeRef);
        } catch (IOException e) {
            e.printStackTrace();
        }
        return mapValue;
    }

} 
```

保存数据：

```
Map<String, String> mapValue = new HashMap<String, String>();
mapValue.put("1", "one");
mapValue.put("2", "two");
DataEntity entity = new DataEntity();
entity.setMapValue(mapValue);
repo.save(entity); 
```

该值将存储在数据库中

```
{"1":"three","2":"two"} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-15T13:14:27.433

老实说，我认为您最好的解决方案是为您的属性创建一个单独的表（首选项）。

```
+------------+
| preference |
+------------+---------+------+-----+
| Field      | Type    | Null | Key |
+------------+---------+------+-----+
| user_id    | bigint  | NO   | PRI |
| key        | varchar | NO   | PRI |
| value      | varchar | NO   |     |
+------------+---------+------+-----+ 
```

您可以像这样将其映射到您的实体中：

```
@Entity
public class User
{
    @Id
    private Long id;

    @ElementCollection
    @MapKeyColumn(name = "key")
    @Column(name = "value")
    @CollectionTable(name = "preference",
        joinColumns = @JoinColumn(name = "user_id"))
    private Map<String, String> preferences;
} 
```

通过这种方式，您的数据库更加规范化，您不必胡乱使用“创造性解决方案”，例如将首选项存储为 JSON。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-11-01T11:29:29.023

使用 Hibernate 持久化 JSON 对象非常容易。

> 您不必手动创建所有这些类型，只需使用以下依赖项通过 Maven Central 获取它们：
> 
> ```
> <dependency>
>     <groupId>com.vladmihalcea</groupId>
>     <artifactId>hibernate-types-52</artifactId>
>     <version>${hibernate-types.version}</version> 
> </dependency> 
> ```
> 
> 有关更多信息，请查看[Hibernate Types 开源项目](https://vladmihalcea.com/the-hibernate-types-open-source-project-is-born/)。

现在，您需要`@TypeDef`在类级别或**package-info.java**包级别描述符中添加此注释以使用[`JsonType`](https://vladmihalcea.com/map-string-jpa-property-json-column-hibernate/)Hibernate 类型：

```
@TypeDef(
    name = "json",
    typeClass = JsonType.class
) 
```

实体映射将如下所示：

```
@Type(type = "json")
@Column(columnDefinition = "jsonb")
private String preferences; 
```

就是这样！

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-10-19T18:34:28.670

如果您真的需要类似的东西，最推荐的是执行以下操作：

```
public class User extends AbstractEntity{
  @JsonIgnore //This variable is going to be ignored whenever you send data to a client(ie. web browser)
  private String preferences;

  @Transient //This property is going to be ignored whenever you send data to the database
  @JsonProperty("preferences") //Whenever this property is serialized to the client, it is going to be named "perferences" instead "preferencesObj"
  private Preferences preferencesObj;

  public String getPreferences() {
    return new ObjectMapper().writeValueAsString(preferencesObj);
  }

  pbulic void setPreferneces(String preferences) {
    this.preferences = preferences;
    this.preferncesObj = new ObjectMapper().readValue(preferences, Preferences.class);
  }

  pubilc Preferences getPreferencesObj() {
    return preferencesObj;
  }

  public void setPreferencesObj(Preferences preferencesObj) {
    this.preferencesObj = preferencesObj;
  }
} 
```

补充笔记：

*   也许可以删除私有属性“首选项”，只使用 getter 和 setter。
*   我没有测试那个代码。
*   上面的代码旨在使用 Jackson ObjectMapper 和 Hibernate 模块。

# javascript - 文档中的多个条件语句

> ID：11948897
> 
> 赞同：6
> 
> 时间：2012-08-14T08:55:20.410
> 
> 标签：javascript, html, css, conditional-comments

我有一个脚本我想在每个浏览器中运行，除了 9 以下的 IE 版本，显然，这个条件语句适用于 IE：

```
<!--[if gt IE 8]>
    JavaScript stuff here
<![endif]--> 
```

但是该代码不会在除 IE9 之外的任何其他浏览器中执行。

有没有办法一起使用多个条件语句，例如

```
<!--[if gt IE 8 OR !IE]>
    JavaScript stuff here
<![endif]--> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T09:16:59.313

您使用这样的条件注释：

```
<!--[if gte IE 9]><!-->
    <script></script>
<!--<![endif]--> 
```

有两种类型的条件注释：一种是从所有浏览器中注释掉整个块（上面的第一个版本），另一种是只注释掉“条件”（这里是这个版本）。

因此，所有非 IE 浏览器都可以看到`<script></script>`评论之外的内容，v9 之前的 IE 会解析评论并知道忽略该 HTML。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T09:27:42.663

您最好使用**特征检测**而不是条件注释。例如，根据[此处](http://msdn.microsoft.com/en-us/library/ie/hh801214%28v=vs.85%29.aspx)找到的 Microsoft 文档， Internet Explorer 10 将完全忽略脚本中的任何条件注释，例如：

```
 <!--[if IE]>
    This content is ignored in IE10.
  <![endif]--> 
```

您可以通过添加以下内容来修补它：

```
<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE9"> 
```

但这不是一个长期的解决方案。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-14T10:00:26.220

您可以使用逻辑运算符来“加入”条件语句，如此处所解释[的](http://msdn.microsoft.com/en-us/library/ms537512%28v=vs.85%29.aspx#syntax)`[if (gt IE 5)&(lt IE 7)]`或。`[if (IE 6)|(IE 7)]`

使用条件语句来*注释内容*看起来令人困惑，我想知道为什么有这么多答案建议这样做。这是我熟悉的符号，还有[更多关于 quirksmode 的示例](http://www.quirksmode.org/css/condcom.html)：

```
<!--[if IE]>
According to the conditional comment this is IE<br />
<![endif]-->
<!--[if !IE]> -->
According to the conditional comment this is not IE<br />
<!-- <![endif]--> 
```

此语法[在 MS 规范中](http://msdn.microsoft.com/en-us/library/ms537512%28v=vs.85%29.aspx)被推荐，具有更多功能，如*自定义版本矢量检测*。请记住，尽管出于所有意图和目的，IE10 将被检测为非 IE 浏览器，并且必须作为一个来引用（希望没有更重要的怪癖需要首先使用条件语句进行寻址）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T09:11:59.507

我认为这个页面应该可以帮助你：

[http://www.cssplay.co.uk/menu/conditional.html](http://www.cssplay.co.uk/menu/conditional.html)

具体来说：

```
I have found that the following code will allow you to target non-IE browsers

<!--[if !IE]><!-->
<h1>You are NOT using Internet Explorer</h1>
<!--<![endif]-->

..and finally to target non-IE and a specific IE browser
(or any combinations using lte lt or gt gte).

<!--[if IE 6]><!-->
<h1>You are using EITHER Internet Explorer version 6<br />
OR a non-IE browser</h1>
<!--<![endif]-->
<h1>You are using
<!--[if IE 6]>IE6 and not <!-->
a non-IE browser
<!--<![endif]--></h1> 
```

# android - Android - 一个按钮的两个 onClickListener

> ID：11948899
> 
> 赞同：0
> 
> 时间：2012-08-14T08:55:31.547
> 
> 标签：android, button, onclicklistener

我正在使用 iSpeech 的 TTS API，在他们的示例 android 项目中，他们有两个按钮和两个 onClickListener，一个用于启动语音，一个用于停止。我想将它保留在一个按钮上，以便在 android 屏幕上留出更多空间，这样如果语音停止，按下按钮就会启动它，如果它已经启动，按下按钮就会停止它。

有很多与此类似的问题，答案表明最好将其保留给一个听众一个按钮，但我对此并不满意，因为问题是针对多个听众的，而我的只有两个听众。

那么我真的坚持使用两个按钮（我希望不是），还是有办法用一个按钮来管理它？

**编辑** 似乎我的想法受到给出的例子的限制。对于这种情况，一个听众似乎就足够了。谢谢你的回答：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T08:58:21.640

它非常简单，在第一次单击时将按钮的文本更改为停止，onClickListener 使用 if - else 用于启动和停止。并在输入任何条件时首先更改按钮的文本。

您可以使用 on 按钮和一个 OnClickListener 来管理它... jst 使用按钮的文本

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T09:00:56.287

您可以有一个侦听器，并有一个带有标志的 if-else 语句来使用相同的按钮来启动和停止。像这样的东西：

```
if(isSpeaking)
{
    //Stop speaking
    isSpeaking = false;
}
else 
{
    //Start speaking
    isSpeaking = true;
} 
```

您也可以使用 setText() 在开始和停止讲话时更改按钮上的文本。

# google-app-engine - 如何使用 ID 删除 NDB 实体？

> ID：11948901
> 
> 赞同：6
> 
> 时间：2012-08-14T08:55:40.303
> 
> 标签：google-app-engine, app-engine-ndb

基于此文档[https://developers.google.com/appengine/docs/python/ndb/entities#deleting_entities](https://developers.google.com/appengine/docs/python/ndb/entities#deleting_entities) 好，我仍然不确定为什么我不能在 NDB 上进行删除：

```
def get(self):
  id = self.request.get("delete")
  ndb.Key('category', id).delete() 
```

是的，我知道如何使用 id 进行选择

```
ndb.Key('category', id).get() 
```

但它仍然无法正常工作......

```
key = ndb.Key('category', id).get()
key.delete() 
```

这个也不起作用：

```
category.key.delete() 
```

有事吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-14T09:03:09.140

试试这个：

```
ndb.Key(category, int(id)).delete() 
```

您需要将 id 转换为整数才能构建数字 (id) 键而不是名称键。

# android - Android套接字通信-第一次尝试后无法将数据发送到套接字

> ID：11948902
> 
> 赞同：1
> 
> 时间：2012-08-14T08:55:56.287
> 
> 标签：android, sockets

我在我的应用程序中使用套接字通信，我需要一些帮助来解决我面临的问题。

我正在使用套接字向设备发送数据，在解析该数据后，我需要将结果返回给服务器设备，但我发送响应的函数崩溃了。以下是我正在使用的功能：

# 通过 Socket 发送：

```
public static void sendRequest(final  String ip,final int port,final byte[] message){

    Thread thread =  new Thread(new Runnable() {
        public void run() {
            try {
                socket = new Socket(ip, port);
                try {
                    OutputStream target = socket.getOutputStream();
                    target.write(message);
                    target.flush();

                    Log.e("SocketConnectionHandler", "S: Send");

                    socket.close();
                    Log.e("SocketConnectionHandler", "S: Closed.");
                } catch (Exception e) {
                    Log.e("SocketConnectionHandler", "S: Error", e);
                }

            } catch(Exception e){
                e.printStackTrace();
            }
        }
    });
    thread.start();
} 
```

# 从套接字读取：

```
thread =  new Thread(new Runnable() {
        public void run() {
            try {
                serverSocket = new ServerSocket(JmDNSHandler.usedPort);
                while(state){
                        client = serverSocket.accept();
                        client.setKeepAlive(true);

                        // LOGS
                        Log.d("","receivedBufferSize : "+serverSocket.getReceiveBufferSize());
                        Log.d("","is connected : "+client.isConnected());
                        Log.d("","port : "+client.getPort());
                        Log.d("","local port : "+client.getLocalPort());
                        Log.d("","ipadress : "+client.getInetAddress().toString());

                        DNSUtils.clientIP = client.getInetAddress().toString();
                        DNSUtils.clientPort = client_getPort();

                        InputStream is = client.getInputStream();

                        Log.d("","is Size : "+is.available());

                        byte[] bytes = toByteArray(is);
                        for(int i=0;i<bytes.length;i++){
                            Log.d("","bytes["+i+"] : "+bytes[i]);
                        }

                        if(bytes!=null)
                            getPacketType(bytes[4], bytes);

                 }

                 client.close();
                 serverSocket.close();
                 Log.d("","client socket : "+client.isClosed() + " serverSocket : "+serverSocket.isClosed());

             } catch (UnknownHostException e) {
                 e.printStackTrace();
             } catch (IOException e) {
                 e.printStackTrace();
             }
        }
    });
    thread.start(); 
```

实际上，在我将第一个字节 [] 发送给客户端后，应用程序崩溃了，他试图在解析字节 [] 后向我发送响应。所以例外是：

```
 08-14 11:50:03.421: W/System.err(18303): java.net.UnknownHostException: Unable to resolve host "/192.168.***.**": No address associated with hostname
08-14 11:50:03.421: W/System.err(18303):    at java.net.InetAddress.lookupHostByName(InetAddress.java:436)
08-14 11:50:03.421: W/System.err(18303):    at java.net.InetAddress.getAllByNameImpl(InetAddress.java:245)
08-14 11:50:03.421: W/System.err(18303):    at java.net.InetAddress.getAllByName(InetAddress.java:220)
08-14 11:50:03.431: W/System.err(18303):    at java.net.Socket.tryAllAddresses(Socket.java:108)
08-14 11:50:03.431: W/System.err(18303):    at java.net.Socket.<init>(Socket.java:177)
08-14 11:50:03.431: W/System.err(18303):    at java.net.Socket.<init>(Socket.java:149)
08-14 11:50:03.431: W/System.err(18303):    at com.stampii.stampii.remoteservices.GetActivatedCollections$1.run(GetActivatedCollections.java:56)
08-14 11:50:03.431: W/System.err(18303):    at java.lang.Thread.run(Thread.java:864)
08-14 11:50:03.441: W/System.err(18303): Caused by: libcore.io.GaiException: getaddrinfo failed: EAI_NODATA (No address associated with hostname)
08-14 11:50:03.441: W/System.err(18303):    at libcore.io.Posix.getaddrinfo(Native Method)
08-14 11:50:03.441: W/System.err(18303):    at libcore.io.ForwardingOs.getaddrinfo(ForwardingOs.java:55)
08-14 11:50:03.441: W/System.err(18303):    at java.net.InetAddress.lookupHostByName(InetAddress.java:421)
08-14 11:50:03.441: W/System.err(18303):    ... 7 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T11:36:39.543

正如@user370305 提到的，问题是作为 IP 返回的字符串`"/192.168.***.**"`。删除`/`字符串开头的 后一切正常。

# java - 如何从netbeans中的另一个内部框架打开内部框架

> ID：11948903
> 
> 赞同：1
> 
> 时间：2012-08-14T08:56:01.967
> 
> 标签：java, swing, netbeans

我在主框架中创建了一个内部框架，我想从旧框架中打开另一个内部框架。

我不知道该怎么做。有什么建议么？

我尝试了许多不同的方法来打开另一个内部框架：

*   我使用了 setVisible(true) 方法，但它不起作用。
*   我创建了 mainFrame 的对象，但没有得到正确的方法。

我用谷歌搜索并搜索了 Stack Overflow，但找不到任何答案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-14T09:05:03.837

好吧，您可以从 Java 教程[How to Use Internal Frames开始](http://docs.oracle.com/javase/tutorial/uiswing/components/internalframe.html)

但是一个可能的过程可能是这样的

```
JInternalFrame newFrame = JInternalFrame();
newFrame.setBounds(10, 10, 100, 100);
newFrame.setVisible(true);
getParent().add(newFame); // assuming our current class is a JInternalFrame on a JDeskTop 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T09:18:19.703

你可以做这样的事情：

```
public class InternalFrameDemo extends JFrame {
    static int openFrameCount = 0;
    static final int xOffset = 30, yOffset = 30;

    JDesktopPane desktop;

    public InternalFrameDemo() {
        super("InternalFrameDemo");
        final int inset = 50;
        final Dimension screenSize = Toolkit.getDefaultToolkit().getScreenSize();
        setBounds(inset, inset, screenSize.width - inset * 2, screenSize.height - inset * 2);

        // Set up the GUI.
        desktop = new JDesktopPane(); // a specialized layered pane
        createFrame(); // create first "window"
        setContentPane(desktop);
    }

    protected void createFrame() {
        final JInternalFrame frame = new JInternalFrame("Document #" + ++openFrameCount);
        frame.setLocation(xOffset * openFrameCount, yOffset * openFrameCount);
        frame.setSize(200, 100);
        frame.setVisible(true);
        frame.getContentPane().add(createButton());
        desktop.add(frame);
        try {
            frame.setSelected(true);
        } catch (final java.beans.PropertyVetoException e) {
        }
    }

    private JButton createButton() {
        return new JButton(new AbstractAction("New") {
            @Override
            public void actionPerformed(final ActionEvent e) {
                createFrame();
            }
        });
    }

    private static void createAndShowGUI() {
        JFrame.setDefaultLookAndFeelDecorated(true);
        final InternalFrameDemo frame = new InternalFrameDemo();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setVisible(true);
    }

    public static void main(final String[] args) {
        javax.swing.SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                createAndShowGUI();
            }
        });
    }
} 
```

[InternalFrameDemo.java](http://docs.oracle.com/javase/tutorial/displayCode.html?code=http://docs.oracle.com/javase/tutorial/uiswing/examples/components/InternalFrameDemoProject/src/components/InternalFrameDemo.java)的改编

# sqlite - 基于时间格式“HH:mm:ss”的 SQLite SELECT 记录

> ID：11948904
> 
> 赞同：1
> 
> 时间：2012-08-14T08:56:12.577
> 
> 标签：sqlite, select

这是我的 SQLite 数据库表：

```
+----+-----------+----------+
| ID | StartTime | EndTime  |
+----+-----------+----------+
|  1 | 07:00:01  | 23:00:00 |
|  2 | 23:00:01  | 07:00:00 |
+----+-----------+----------+ 
```

现在我在创建 sql 查询以选择它们时遇到问题。

*   `Time1`='14:00:00'

我用了

```
SELECT * FROM 'table' 
WHERE StartTime <= '14:00:00'
AND EndTime >= '14:00:00'; 
```

选择`Time1`返回的结果是**正确**的，我得到了我想要的。

**但**

*   `Time2`='07:00:00'
*   `Time3`='06:00:00'

对于`Time2`and `Time3`，我似乎无法确定`SELECT`语句条件应该是什么？

**问题**

处理这种情况的算法和 SQLite 语句应该是什么，即何时返回 , `Time1`only `ID 1`，何时返回`Time2`and `Time3`, only `ID 2`？

我正在使用 Java 执行 SQLite 语句，因此我不确定是否支持所有函数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T11:57:00.273

这是一个示例查询（[SQLFiddle](http://sqlfiddle.com/#!7/5a4a5/3)）：

```
select * from t where 
(
(StartTime<=EndTime) and 
 ('07:00:00' between StartTime and EndTime)
)
 or
(
(StartTime>EndTime) and 
 ( 
    ('07:00:00' between StartTime and '23:59:59')
     or
    ('07:00:00' between '00:00:00' and EndTime)

 )
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T09:38:21.297

检查这个

```
SELECT * FROM table 
WHERE StartTime <= TIME_FORMAT("14:00:00","%H:%i:%s") 
AND EndTime >= TIME_FORMAT("14:00:00","%H:%i:%s"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T09:04:43.713

尝试这个

```
SELECT * FROM table 
WHERE HOUR(StartTime) <= HOUR('14:00:00')
AND HOUR(EndTime) >= HOUR('14:00:00'); 
```

# ruby-on-rails - Rails select_tag onchange ajax 请求

> ID：11948913
> 
> 赞同：16
> 
> 时间：2012-08-14T08:56:42.887
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我正在尝试制作一个表单，在选择某些元素后将元素添加到表单中。例如，在用户选择一个国家后，我希望有一个 ajax 调用，在其中找到与该国家相关的所有地区/州，然后将其插入到表单的选择元素中。然后，一旦用户选择了一个区域/状态，将发生相同的过程，并且另一个元素将添加到表单中以响应所选值。作为旁注，我想不引人注目地做这一切。到目前为止，我认为这是：

```
<%= form_tag(find_school_path, :method=>'get', :class => 'form-horizontal', :id => 'find_by_country_form') do %>

    <%= label_tag :country_selection, "Country" %>
    <%= select_tag :country_selection, options_from_collection_for_select(@countries, :id, :name), :prompt => "Country" %>

<% end %> 
```

然后在该视图的 javascript 文件中，我在选择一个国家/地区时处理 ajax 调用：

```
$('#country_selection').change(function(){
  $.ajax({
    url: "find/country_selection",
    type: "GET",
    data: {'country=' + $('#country_selection option:selected').value() },
  })
}); 
```

然后，在我的控制器内部，我有上述`url:`路由：

```
def country_selection
    @country = Country.find(params[:country])
    @regions = @country.regions

    respond_to do |format|
       format.js {  }
    end
end 
```

最后，在我的 country_selection.js.erb 文件中，我有：

```
$('#country_selection').after('<%= label_tag :region_selection, "State/Region" %><%= select_tag :region_selection, options_from_collection_for_select(@regions, :id, :name), :prompt => "State/Region" %>'); 
```

我还没有让这个工作。我什至不确定我这样做的方式是否正确。当我点击选择并更改选项时，页面上没有任何变化。

**解决方案**

我的代码基本没问题，但是 '.change' 事件没有被识别。我将其更改为 '.live('change', function() {...})' 并且效果很好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T09:01:25.210

这不是我见过的最整洁的代码，但从根本上我认为它没有任何问题。

我会在那里发出一些警报，以便您可以缩小问题所在。您可以在 change 函数中添加一个以确保它被命中，您可以在 country_selection.js.erb 中添加一个以确保它被命中。这会有所帮助。

我还将更改 country_selection.js.erb 以在 div 容器中呈现您希望新选择所在的部分，这样您可以将该代码放入部分中，它会更整洁一些。您可以将参数传递给将成为所选国家/地区的部分。

# java - 使用 Java 生成 word 和 powerpoint 文档的最佳实践

> ID：11948914
> 
> 赞同：1
> 
> 时间：2012-08-14T08:56:45.317
> 
> 标签：java, ms-word, apache-poi, powerpoint, docx4j

我有一个 docx 格式的 word 文档，在 Word 2007 中创建。我需要打开此文档并在文档中的某些位置添加文本、图像和表格。

我也需要用 Powerpoint 做同样的事情。

我在谷歌搜索他们在文档中使用字符串并搜索并替换它们时看到了解决方案。我不认为那是这样做的方法。

我发现的另一个解决方案是在 word 文档中插入书签，然后在书签之后附加数据。这是通过 Apache POI 库完成的。这个解决方案看起来更好。但是如果我需要将相同的数据放在文档的不同部分会发生什么。我不想为插入相同的数据定义多个唯一的书签。

所以基本上我正在寻找一种方法来创建单词模板并定义可以注入数据的关键字。

**更新** 找到了这个[http://code.google.com/p/xdocreport/](http://code.google.com/p/xdocreport/)它几乎完全符合我的要求。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T07:58:01.397

您可能还想查看[Docmosis](http://www.docmosis.com)和[JODReports](http://jodreports.sourceforge.net) ，因为它们可以从 Doc/DocX 模板生成文档。他们使用占位符来做你所追求的。他们还可以制作表格/页眉/页脚/图像等。请注意，我为制作 Docmosis 的公司工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T09:55:09.177

另一种解决方案可能是使用映射到 CustomXMLParts 的 ContentControls - 这样您就可以从 MS Word 和/或 PowerPoint（例如 Java）外部更新 XML，并且内部的内容将自动更新。

# c# - 提取 HTML 文本

> ID：11948919
> 
> 赞同：0
> 
> 时间：2012-08-14T08:57:28.357
> 
> 标签：c#, html

我正在解决一个问题。我将提取 som HTML 文本并将它们存储为 Anchor 对象。例如：

```
<html>
<head>
<title>{dynamihead/}</title>
</head>

<body>
{repeatinghtml}
<p>{repeatinganchor1/}</p>
<p>{repeatinganchor2/}</p>
<p>{repeatinganchor3/}</p>
<p>{repeatinganchor4/}</p>
{/repeatinghtml}
</body>
</html> 
```

我想提取 {} 锚点。如果它是一个自我终止的 achour，我想创建 {dynamihead/} 只是这个锚对象。但是如果它包含 childAnchours 我想提取像

```
{repeatinghtml}
    <p>{repeatinganchor1/}</p>
    <p>{repeatinganchor2/}</p>
    <p>{repeatinganchor3/}</p>
    <p>{repeatinganchor4/}</p>
{/repeatinghtml} 
```

我想提取所有子锚并将它们放在主锚的集合中。我已经拒绝了 Anchor 类，但我在字符串处理方面不太熟练，所以我无法提取我想要的文本。这是一个 Winform 应用程序，它将加载模板 HMLT 文件，对其进行处理并将信息插入到 ancours 和发送电子邮件 i html 格式中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T09:04:47.000

尝试查看[HtmlAgility](http://htmlagilitypack.codeplex.com/)库。即使乍一看看起来很简单，也有[很多理由要避免使用正则表达式来解决此类问题](https://stackoverflow.com/a/1732454/566608)，并且八个字符串操作可能还不够。

# winapi - DIB 部分的神秘访问冲突/跳过语句/静默失败

> ID：11948920
> 
> 赞同：1
> 
> 时间：2012-08-14T08:57:35.323
> 
> 标签：winapi, gdi

我正在制作这样的 DIB 部分：

```
BITMAPINFO bmi;
bmi.bmiHeader.biSize = sizeof(BITMAPINFO);
bmi.bmiHeader.biWidth = MY_WIDTH;
bmi.bmiHeader.biHeight = -MY_HEIGHT; // Order pixels from top to bottom
bmi.bmiHeader.biPlanes = 1;
bmi.bmiHeader.biBitCount = 32; // last byte not used, 32 bit for alignment
bmi.bmiHeader.biCompression = BI_RGB;
bmi.bmiHeader.biSizeImage = 0;
bmi.bmiHeader.biXPelsPerMeter = 0;
bmi.bmiHeader.biYPelsPerMeter = 0;
bmi.bmiHeader.biClrUsed = 0;
bmi.bmiHeader.biClrImportant = 0;
bmi.bmiColors[0].rgbBlue = 0;
bmi.bmiColors[0].rgbGreen = 0;
bmi.bmiColors[0].rgbRed = 0;
bmi.bmiColors[0].rgbReserved = 0;

hbm = CreateDIBSection(hdc, &bmi, DIB_RGB_COLORS, (void**)&pixels, NULL, 0); 
```

绘画时：

```
HDC hdcMem = CreateCompatibleDC(hdc);

HBITMAP hbmOld = (HBITMAP)SelectObject(hdcMem, hbm);
onFrame(pixels);
BitBlt(hdc, 0, 0, MY_WIDTH, MY_HEIGHT, hdcMem, 0, 0, SRCCOPY);
SelectObject(hdcMem, hbmOld);
DeleteDC(hdcMem); 
```

onFrame():

```
void onFrame(pixel *pixels) {
// This is where all the drawing takes place
pixel *p;
// +0.005 each frame
static float frameOffset = 0;
float px; // % of the way across the bitmap
float py; // % of the way down the bitmap
for (int x = 0; x < MY_WIDTH; ++x) {
    for (int y = 0; y < MY_HEIGHT; ++y) {
        p = &pixels[y * MY_WIDTH + x];
        px = float(x) / float(MY_WIDTH);
        py = float(y) / float(MY_HEIGHT);
        p->r = 0;//(unsigned char)(((cos(px + frameOffset * 10) / sin(py + frameOffset)) * cos(frameOffset * 3) * 10) * 127 + 127);
        p->g = 255;//~p->r;
        p->b = 255;
    }
}
frameOffset += 0.005f;
} 
```

有时，Visual Studio 调试器只是退出paint 方法而不执行所有语句（！），有时会出现访问冲突，有时一切都已执行但没有任何反应（窗口只是保持白色）。它永远不会起作用。我基于来自[http://www.daniweb.com/software-development/cpp/code/241875/fast-animation-with-the-windows-gdi的代码](http://www.daniweb.com/software-development/cpp/code/241875/fast-animation-with-the-windows-gdi); 那里的代码有效，但我的代码显然略有不同。对我来说一个大问题是我不知道如何调试问题：我不知道如何检查对象，访问冲突在 ntdll.dll 中（所以没有堆栈跟踪），并且当它失败时不那么引人注目它默默地失败了。BitBlt 返回 true（在实际调用的 1/4 次运行中）。我尝试在 onFrame() 调用之前和之后调用 GdiFlush，但这并没有真正帮助。究竟是什么导致了这个问题？

# mongodb - Different result from document manager in Symfony2

> ID：11948927
> 
> 赞同：1
> 
> 时间：2012-08-14T08:58:06.807
> 
> 标签：mongodb, symfony

I'm trying to write some functional tests in Symfony2 with MongoDB, but I can't figure out the problem that I am having. In test I edit an object via form, and than fetch it with the document manager, but **I keep getting unchanged data**. If I look into DB, the data is properly changed.

What am I missing?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T15:08:02.327

It would help to see your full test case, but I assume you're doing the following:

*   Fetching the object via the document manager service in your test case
*   Simulating a form submission using the HTTP test client (see: [here](http://symfony.com/doc/current/book/testing.html#functional-tests))
*   Fetching the object via the document manager again

Since changes are showing up in the database, it's safe to assume that the form is properly binding and your controller is properly flushing the changes. Assuming the form submission happens within its own kernel context, the document manager it uses internally is not the same instance as the document manager you're using explicitly in your test case.

If you're doing an initial fetch before the document is modified, your document manager will not be aware of any changes made to the document elsewhere unless you `refresh()` the document or `clear()` the document manager of all managed documents before re-querying. The [detaching documentation](http://doctrine-mongodb-odm.readthedocs.org/en/latest/reference/working-with-objects.html#detaching-documents) explains this a bit more.

If the bullets above correctly describe your test case, I would suggest clearing the document manager before re-querying and asserting the result. Alternatively, you could probably change the test to avoid querying at all before simulating the form submission. Any test fixtures you're using can likely be abstracted out of the test case itself (e.g. inserted during a `setUp()` method, after which you clear the document manager).

# java - 马歇尔 XML 文件

> ID：11948928
> 
> 赞同：0
> 
> 时间：2012-08-14T08:58:14.493
> 
> 标签：java

```
<?xml version="1.0" encoding="UTF-8"?>
<parent>
  <parents-arg>
    <child>
      <arg>
        <local>
          <method>
            <name>responseData</name>
            <arg>
              <local>
                <method>
                  <name>AAAAAA</name>
                  <local>
                    <boolean>0</boolean>
                  </local>
                </method>
              </local>
            </arg>
          </method>
          <method>
            <name>success</name>
            <local>
              <boolean>1</boolean>
            </local>
          </method>
        </local>
      </arg>
    </child>
  </parents-arg>
</parent> 
```

我想整理上面的 XMl 文件。但是当我使用 Jaxb 时，它正在创建一个具有多个名为 local 的 staic 类的 bean 类。那么我该如何编组上面的xml。我使用以下命令编组`xml xjc -extension -p parser Marshall.xsd`（[http://www.oracle.com/technetwork/articles/javase/index-140168.html](http://www.oracle.com/technetwork/articles/javase/index-140168.html)）

# c# - 有没有标准的分数乘法？

> ID：11948929
> 
> 赞同：2
> 
> 时间：2012-08-14T08:58:17.613
> 
> 标签：c#, fractions, multiplication

我需要同时访问分母和分子，所以我不能只将两个浮点数相乘。我应该编写自己的类并使用运算符重载 (*) 还是他们的已知库提供该类？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T09:00:47.420

c# 中没有现成的类。不过，自己编写应该很容易。我会那样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T09:02:02.950

恐怕你得自己写。[这](http://www.vcskicks.com/code-snippet/fraction.php)是分数结构的链接

来自链接的代码：

```
public struct Fraction
{
    public int Numerator;
    public int Denominator;
    public static Fraction Zero = new Fraction(0, 0);

    public Fraction(int numerator, int denominator)
    {
        this.Numerator = numerator;
        this.Denominator = denominator;

        //If denominator negative...
        if (this.Denominator < 0)
        {
            //...move the negative up to the numerator
            this.Numerator = -this.Numerator;
            this.Denominator = -this.Denominator;                        
        }
    }

    public Fraction(int numerator, Fraction denominator)
    {
        //divide the numerator by the denominator fraction
        this = new Fraction(numerator, 1) / denominator;
    }

    public Fraction(Fraction numerator, int denominator)
    {
        //multiply the numerator fraction by 1 over the denominator
        this = numerator * new Fraction(1, denominator);
    }

    public Fraction(Fraction fraction)
    {
        this.Numerator = fraction.Numerator;
        this.Denominator = fraction.Denominator;
    }

    private static int getGCD(int a, int b)
    {
        //Drop negative signs
        a = Math.Abs(a);
        b = Math.Abs(b);

        //Return the greatest common denominator between two integers
        while (a != 0 && b != 0)
        {
            if (a > b)
                a %= b;
            else
                b %= a;
        }

        if (a == 0)
            return b;
        else
            return a;
    }

    private static int getLCD(int a, int b)
    {
        //Return the Least Common Denominator between two integers
        return (a * b) / getGCD(a, b);
    }

    public Fraction ToDenominator(int targetDenominator)
    {
        //Multiply the fraction by a factor to make the denominator
        //match the target denominator
        Fraction modifiedFraction = this;

        //Cannot reduce to smaller denominators
        if (targetDenominator < this.Denominator)
            return modifiedFraction;

        //The target denominator must be a factor of the current denominator
        if (targetDenominator % this.Denominator != 0)
            return modifiedFraction;

        if (this.Denominator != targetDenominator)
        {
            int factor = targetDenominator / this.Denominator;
            modifiedFraction.Denominator = targetDenominator;
            modifiedFraction.Numerator *= factor;
        }

        return modifiedFraction;
    }

    public Fraction GetReduced()
    {
        //Reduce the fraction to lowest terms
        Fraction modifiedFraction = this;

        //While the numerator and denominator share a greatest common denominator,
        //keep dividing both by it
        int gcd = 0;
        while (Math.Abs(gcd = getGCD(modifiedFraction.Numerator, modifiedFraction.Denominator)) != 1)
        {
            modifiedFraction.Numerator /= gcd;
            modifiedFraction.Denominator /= gcd;
        }

        //Make sure only a single negative sign is on the numerator
        if (modifiedFraction.Denominator < 0)
        {
            modifiedFraction.Numerator = -this.Numerator;
            modifiedFraction.Denominator = -this.Denominator;
        }

        return modifiedFraction;
    }

    public Fraction GetReciprocal()
    {
        //Flip the numerator and the denominator
        return new Fraction(this.Denominator, this.Numerator);
    }

    public static Fraction operator +(Fraction fraction1, Fraction fraction2)
    {
        //Check if either fraction is zero
        if (fraction1.Denominator == 0)
            return fraction2;
        else if (fraction2.Denominator == 0)
            return fraction1;

        //Get Least Common Denominator
        int lcd = getLCD(fraction1.Denominator, fraction2.Denominator);

        //Transform the fractions
        fraction1 = fraction1.ToDenominator(lcd);
        fraction2 = fraction2.ToDenominator(lcd);

        //Return sum
        return new Fraction(fraction1.Numerator + fraction2.Numerator, lcd).GetReduced();
    }

    public static Fraction operator -(Fraction fraction1, Fraction fraction2)
    {
        //Get Least Common Denominator
        int lcd = getLCD(fraction1.Denominator, fraction2.Denominator);

        //Transform the fractions
        fraction1 = fraction1.ToDenominator(lcd);
        fraction2 = fraction2.ToDenominator(lcd);

        //Return difference
        return new Fraction(fraction1.Numerator - fraction2.Numerator, lcd).GetReduced();
    }

    public static Fraction operator *(Fraction fraction1, Fraction fraction2)
    {
        int numerator = fraction1.Numerator * fraction2.Numerator;
        int denomenator = fraction1.Denominator * fraction2.Denominator;

        return new Fraction(numerator, denomenator).GetReduced();
    }

    public static Fraction operator /(Fraction fraction1, Fraction fraction2)
    {
        return new Fraction(fraction1 * fraction2.GetReciprocal()).GetReduced();
    }

    public double ToDouble()
    {
        return (double)this.Numerator / this.Denominator;
    }

    public override string ToString()
    {
        return Numerator + "/" + Denominator;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T09:04:40.483

定义一个简单的对象将是一种处理问题的简单方法。

```
public class Fraction
{
    decimal Denominator {get;set;}
    decimal Numerator {get;set;}

    public Fraction(decimal denum, decimal num)
    {
        Denominator = denum;
        Numearator = num;
    }
     //this way you can instantiate a fraction object with any value of your choice
} 
```

之后就是： Fraction f = new Fraction(5, 2);

# configuration - 使用 augeas 编辑 yum.conf/exclude

> ID：11948933
> 
> 赞同：1
> 
> 时间：2012-08-14T08:58:43.707
> 
> 标签：configuration, puppet, augeas

我正在尝试使用我在 puppet 中再次使用的 augeas 工具编辑我的 yum.conf 的排除部分。

问题是这样做：

```
# augtool
augtool> set /files/etc/yum.conf/main/exclude[last()+1] 'kernel*'
augtool> save
Saved 1 file(s)
augtool> set /files/etc/yum.conf/main/exclude[last()+1] 'python*'
augtool> save
Saved 1 file(s)
augtool> 
```

写出：

```
exclude=kernel*
exclude=python* 
```

在*/etc/yum.conf*文件中。

yum.conf 的 exclude 部分只支持空格分隔的列表。那么我怎样才能欺骗 augeas 在这里使用空间分离呢？还是我做错了什么？

覆盖整个排除选项不是解决方案，因为其中可能已经有其他条目。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T15:11:30.947

您在 Augeas 中遇到了一个记录为[#275 的问题：yum.aug 不会将 'exclude' 或 'includepkg' 分解为 yum repositories 的序列](https://fedorahosted.org/augeas/ticket/275)。问题是镜头不会将值拆分为多个节点，而是将其视为一个带有空格的节点。

在 Augeas 中做到这一点的唯一方法是用一个空格分隔的字符串替换整行，这正是你不想做的：

```
set /files/etc/yum.conf/main/exclude 'kernel* python*' 
```

我会在上面的票上提到这一点，所以我们知道有更多的需求，因为我们可能只需要接受打击，因为没有向后兼容性，就像在类似的情况下一样。

我们还没有它的补丁，但是一旦我们这样做了，您就可以在您的系统上使用更新的 yum.aug。将它放在下面`/usr/share/augeas/lenses`将覆盖打包的版本。

# c++ - std::bind 与 std::less_equal

> ID：11948934
> 
> 赞同：1
> 
> 时间：2012-08-14T08:58:44.587
> 
> 标签：c++, c++11, bind

我尝试编译这个函数：

```
#include <algorithm>
#include <cmath>
#include <functional>
#include <vector>

void foo(unsigned n)
{
  std::vector<unsigned> some_vector;
  /* fill vector ... */
  auto le_sqrt_n = std::bind(std::less_equal<unsigned>, 
                             std::placeholders::_1, 
                             unsigned(sqrt(n))
                             );
  auto it = std::find_if(some_vector.rbegin(), some_vector.rend(), le_sqrt_n);
  /* do something with the result ... */
} 
```

使用 gcc 4.6.3：

```
g++ -std=c++0x test_bind_02.cc 
```

并得到这个错误：

```
test_bind_02.cc: In function ‘void foo(unsigned int)’:
test_bind_02.cc:10:55: error: expected primary-expression before ‘,’ token
test_bind_02.cc:13:9: error: unable to deduce ‘auto’ from ‘&lt;expression error>’
test_bind_02.cc:14:77: error: unable to deduce ‘auto’ from ‘&lt;expression error>’ 
```

**我的（可能是愚蠢的）错误是什么？**

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-14T09:00:41.373

你不打电话`std::less_equal<unsigned>` `c-tor`。此代码工作正常。

[http://liveworkspace.org/code/7f779d3fd6d521e8d4012a4066f2c40f](http://liveworkspace.org/code/7f779d3fd6d521e8d4012a4066f2c40f)

`std::bind`有两种形式。

```
template< class F, class... Args >
/*unspecified*/ bind( F&& f, Args&&... args );
template< class R, class F, class... Args >
/*unspecified*/ bind( F&& f, Args&&... args ); 
```

因为是 struct 你应该作为完全构造的对象`std::less_equal`传递给这个函数。`F`作品代码是

```
#include <algorithm>
#include <cmath>
#include <functional>
#include <vector>

void foo(unsigned n)
{
  std::vector<unsigned> some_vector;
  /* fill vector */
  auto le_sqrt_n = std::bind(std::less_equal<unsigned>(),
                 std::placeholders::_1, 
                 unsigned(sqrt(n))
                 );
  auto it = std::find_if(some_vector.rbegin(), some_vector.rend(), le_sqrt_n);
} 
```

# jquery - 使用 jquery 插件添加 ui 不起作用

> ID：11948937
> 
> 赞同：0
> 
> 时间：2012-08-14T08:59:00.290
> 
> 标签：jquery, jquery-plugins, jquery-selectors

我的插件

```
$.fn.myplugin=function(){

var element=$('<div/>').addClass('select').appendTo(this);

return this;
} 
```

和脚本

```
$('<div/>').myplugin().appendTo('body'); 
```

问题是没有附加元素。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T09:10:05.377

看来你的代码是好的。

```
$.fn.myplugin = function() {
    // hello is for just view purpose
    $('<div>hello</div>').addClass('select').appendTo(this);
    return this;
}

$('<div/>').myplugin().appendTo('#target')​; // here instead of '#target' use 'body' 
```

**[演示](http://jsfiddle.net/7ZAds/6/)**

### 供收藏

```
$.fn.myplugin = function() {
    return $.each(this, function() {
       $('<div>hello</div>').addClass('select').appendTo(this);
    });        
} 
```

### 笔记

将所有代码放入`$(document).ready({ .. })`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T09:11:49.007

添加准备好的文档也可以在这里提供帮助

```
 $(document).ready(function() {
            $('<div/>').myplugin().appendTo('body');
    }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T09:12:01.270

它按原样工作：http: [//jsfiddle.net/7n2Bd/](http://jsfiddle.net/7n2Bd/)

但是如果你传递一个元素的集合，你就会遇到问题。试试这个：

```
$.fn.myplugin=function() {
    return this.each(function() {
        $('<div>').addClass('select').appendTo(this);
    });
}; 
```

# php - CodeIgniter - 路由和分页

> ID：11948938
> 
> 赞同：0
> 
> 时间：2012-08-14T08:59:05.227
> 
> 标签：php, codeigniter

这是我第一次尝试在 CI 中进行分页，我遇到了一个小问题，可能是由路由引起的。

我的规则如下：

```
$route['User/(:num)/(:any)'] = 'User/index/$1';
$route['user/(:num)/(:any)'] = 'User/index/$1'; 
```

那些被翻译成类似`http://site.com/index.php/user/1/tomek`.

现在我的分页控制器：

```
$config['base_url'] = site_url('user').'/'.$user.'/'.$data['user'][0]['nick'].'/';
$config['total_rows'] = $this->rating_model->countOwned($user);
$config['per_page'] = 2;
$config['enable_query_strings'] = true;
$this->pagination->initialize($config);
...
$data['owns'] = $this->rating_model->getOwned($data['user'][0]['id'],$config['total_rows'],$config['per_page']); 
```

在我的模型中，我使用了简单的`limit`：

```
public function getOwned($user,$limit,$start) {
    $this->db->limit($limit,$start);
    ... 
```

链接和所有工作正常，但它们不起作用。我得到一个类似 的网址`http://site.com/index.php/user/1/tomek/2`，但物品仍然完好无损。我的错误在哪里？

编辑>完整的控制器代码：

```
public function index($user = null) {
        $session_data = $this->session->userdata('user_data');
        $this->db->cache_off();

        if($session_data) :

            $this->load->helper(array('form', 'url'));
            $this->load->library('pagination');
            $this->load->model('user_model');
            $this->load->model('rating_model');
            $this->load->model('games_model');

            if($user) {
                $user = $user;
            } else {
                $user = $session_data['id'];
            }

            //vars
                $data['user'] = $this->user_model->getUser($user);
                $data['title'] = $data['user'][0]['nick'].' · Profil użytkownika';
                $data['age'] = $this->user_model->getAge($data['user'][0]['birth']);
                $data['sex'] = $this->user_model->getSex($data['user'][0]['sex']);

                $config['base_url'] = site_url('user').'/'.$user.'/'.$data['user'][0]['nick'].'/';
                $config['total_rows'] = $this->rating_model->countOwned($user);
                $config['per_page'] = 4;
                $config['enable_query_strings'] = true;
                $this->pagination->initialize($config);

                $data['pages'] = $this->pagination->create_links();

                $data['rates'] = $this->rating_model->countRates($user);
                $data['rates2'] = $this->rating_model->countGrades($user);

                $data['developers'] = $this->games_model->getDevelopers();
                $data['genres'] = $this->games_model->getGenres();
                $data['platforms'] = $this->games_model->getPlatforms();

                $data['nowPlaying'] = $this->rating_model->getNowPlaying($data['user'][0]['id']);

                $data['owns'] = $this->rating_model->getOwned($data['user'][0]['id'],$config['total_rows'],$config['per_page']);

                //load
                $this->template->load('template','theme/yourAccount/main', $data);

        else :

                $this->load->view('unlogged');

        endif;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T10:47:42.160

问题实际上出在`uri_segment`. 我不得不指出，url的哪一部分是页码。像这样：`$config['uri_segment'] = 5;`我加载我的页面：

```
$data['owns'] = $this->rating_model->getOwned($data['user'][0]['id'],4,$this->uri->segment(5)); 
```

效果很好。谢谢大家的帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T09:13:55.010

以下网址“http://site.com/index.php/user/1/tomek/2”需要：$route['User/(:num)/(:any)/(:num)'] = '用户/索引/$1/$2/$3';

您可能可以将 index 排除在路线之外。因为这是它调用的标准函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T03:11:41.867

Hope this will help. 2 important factors in pagination are the uri segment and the limit offset for the query. It may also help you if you will try to complete the $config's(not necessary those used for formatting) like the $cofig['uri_segment'].

Try to check this link and check the structure and algorithm, it might help. [Codeigniter, setting up pagination](https://stackoverflow.com/questions/13572085/codeigniter-setting-up-pagination/13576738#13576738)

# c# - 单击 Gridview 更新按钮时清除会话

> ID：11948943
> 
> 赞同：-1
> 
> 时间：2012-08-14T08:59:21.967
> 
> 标签：c#, asp.net, session, gridview, sqldatasource

我有一个页面 ( `Order.aspx`) 显示具有特定 的订单`FileNo`，下面我从我的 ( `Default.aspx`) 调用此页面：

```
 LinkButton clickedButton = (LinkButton)sender;
    Session["FileNo"] = clickedButton.Text;
    Response.Redirect("~/Order.aspx"); 
```

在此订单页面中有一个带有以下 sqldatasource 的 gridview 控件，以下 Datasource 已成功运行并更新数据库，但突然开始使用 null FileNo 更新数据库。我不明白我什么时候`Session["FileNo"]`被清除。我可以提供任何要求的额外代码。

```
<asp:SqlDataSource ID="sds_OrderDetail" OnSelected="sds_OrderDetail_Selected" runat="server"
    ConnectionString="<%$ ConnectionStrings:MyDbConn %>" DeleteCommand="DELETE FROM [OrderDetail] WHERE [RowNo] = @RowNo"
    InsertCommand="INSERT INTO [OrderDetail] ([FileNo], [PONumber], [MaterialCode], [MaterialDescription], [MaterialCategory], [UnitOfMeasure], [Quantity], [ContainerType], [LoadingDate]) VALUES (@FileNo, @PONumber, @MaterialCode, @MaterialDescription, @MaterialCategory, @UnitOfMeasure, @Quantity, @ContainerType, @LoadingDate)"
    SelectCommand="SELECT * FROM [OrderDetail] WHERE ([FileNo] = @FileNo)" UpdateCommand="UPDATE [OrderDetail] SET [FileNo] = @FileNo, [PONumber] = @PONumber, [MaterialCode] = @MaterialCode, [MaterialDescription] = @MaterialDescription, [MaterialCategory] = @MaterialCategory, [UnitOfMeasure] = @UnitOfMeasure, [Quantity] = @Quantity, [ContainerType] = @ContainerType, [LoadingDate] = @LoadingDate WHERE [RowNo] = @RowNo">
    <SelectParameters>
        <asp:SessionParameter DefaultValue="-1" Name="FileNo" SessionField="FileNo" Type="Int32" />
    </SelectParameters>
    <DeleteParameters>
        <asp:Parameter Name="RowNo" Type="Int32" />
    </DeleteParameters>
    <InsertParameters>
        <asp:Parameter Name="FileNo" Type="Int32" />
        <asp:Parameter Name="PONumber" Type="String" />
        <asp:Parameter Name="MaterialCode" Type="String" />
        <asp:Parameter Name="MaterialDescription" Type="String" />
        <asp:Parameter Name="MaterialCategory" Type="String" />
        <asp:Parameter Name="UnitOfMeasure" Type="String" />
        <asp:Parameter Name="Quantity" Type="Int32" />
        <asp:Parameter Name="ContainerType" Type="String" />
        <asp:Parameter Name="LoadingDate" Type="String" />
    </InsertParameters>
    <UpdateParameters>
        <asp:Parameter Name="FileNo" Type="Int32" />
        <asp:Parameter Name="PONumber" Type="String" />
        <asp:Parameter Name="MaterialCode" Type="String" />
        <asp:Parameter Name="MaterialDescription" Type="String" />
        <asp:Parameter Name="MaterialCategory" Type="String" />
        <asp:Parameter Name="UnitOfMeasure" Type="String" />
        <asp:Parameter Name="Quantity" Type="Int32" />
        <asp:Parameter Name="ContainerType" Type="String" />
        <asp:Parameter Name="LoadingDate" Type="String" />
        <asp:Parameter Name="RowNo" Type="Int32" />
    </UpdateParameters>
</asp:SqlDataSource> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T10:33:30.850

代码不会突然停止工作。一定有什么东西（即使它很小）使它不再工作。以下是您可以尝试找出问题所在的几件事。

1.  尝试注释掉自上次工作以来更改的内容，并开始以最少的更改取消注释代码。

2.  在整个解决方案中查找所有出现的 Session 和 Session["File"] 并在每次出现时设置一个断点并通过您的应用程序进行调试，以查看它究竟在哪里失去了它的价值。

3.  如果您不希望 FileNo 为空，请更改 SQL 中的表结构并且不允许其中包含空值。它增加了额外的验证层，并确保没有损坏的数据进入数据库。归根结底，这关乎数据是否有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T11:59:47.747

除选择参数外，其他所有参数都应包括 FileNo 作为 SessionParameter，Session["FileNo"] 未清除，未使用。

# android - 用于拼写检查的 Google 自定义搜索 API

> ID：11948945
> 
> 赞同：0
> 
> 时间：2012-08-14T08:59:24.847
> 
> 标签：android, spell-checking, google-custom-search

我想使用 Google 自定义搜索 API 来获取我的 android 应用程序中单词或短语的拼写建议。我找到了这个功能[https://developers.google.com/custom-search/docs/xml_results?hl=en#results_xml_tag_Spelling](https://developers.google.com/custom-search/docs/xml_results?hl=en#results_xml_tag_Spelling)但我不明白如何使用它..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-27T12:20:09.717

调用高级搜索，然后查看 Spelling-Suggestion 中是否有价值： [https](https://developers.google.com/custom-search/docs/xml_results?hl=en#XML_Results_for_Regular_and_Advanced_Search_Queries) ://developers.google.com/custom-search/docs/xml_results?hl =en#XML_Results_for_Regular_and_Advanced_Search_Queries 如上例所示，q=socer建议是足球

# php - 如何从另一个 div 中获得相同的、只是洗牌的内容

> ID：11948949
> 
> 赞同：1
> 
> 时间：2012-08-14T08:59:30.883
> 
> 标签：php, javascript, arrays

注册.php

```
$allCaps=array("img01.png", "img02.png", "img03.png"....);  // 20 images
shuffle($allCaps);  // this is critical point
$fiveCaps = array_slice($allCaps, 0, 5);

<td id="box01">
<?php
shuffle($fiveCaps);
echo "<img src=\"captcha/imgs/".$fiveCaps[0]."\">";
echo "<img src=\"captcha/imgs/".$fiveCaps[1]."\">";
... //all five images from $fiveCaps are placed here
?>  
</td>

<td id="box02">
<script type="text/javascript">
$("#box02").load("register.php #box01")
</script> </td> 
```

在 box02 中，我想要（并且期望）与 box01 中相同的图像（只是洗牌）。
但是一些其他图像出现在 box02 中，而这些图像在 box01 中不存在
如果我删除“critical_point_line” - 两个框中的图像是相同的，但当然，总是只有 $allCaps 中的前五个图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T09:09:57.863

你为什么用jquery来洗牌，为什么不直接这样

```
 <td id="box-1">
        <?php $lista = shuffle($fivecaps);
            foreach($lista as &$imgcode){
                echo '<img src=\"captcha/imgs/"'.$imgcode.'"\">';
            }
        ?>
    </td>
    <td id="box-2">
        <?php $listb = shuffle($fivecaps);
            foreach($listb as &$imgcode){
                echo '<img src=\"captcha/imgs/"'.$imgcode.'"\">';
            }
        ?>
    </td> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T09:11:33.140

仅使用 php 函数有什么问题？

```
<?php
$allCaps=array("img01.png", "img02.png", "img03.png"....);  // 20 images
shuffle($allCaps);  // this is critical point
$fiveCaps = array_slice($allCaps, 0, 5);

function printRandom($caps)
{
  shuffle($caps);
  foreach($caps as $cap)
  {
    echo "<img src=\"captcha/imgs/".$cap."\">";
  }
}
?>     

<td id="box01">
<?php
   printRandom($fiveCaps);
?>  
</td>

<td id="box02">
<?php
   printRandom($fiveCaps);
?>  
</td> 
```

您的代码中的问题指出您可能不完全理解 jQuery 的选择器；执行以下代码：

```
$("#box02").load("register.php #box01") 
```

不会加载 的新实例，而只是将(我们刚刚从 PHP 代码中填充`register.php`的内容复制到`#box1``#box02`

如果你想洗牌变量并用 Javascript 打印它，你需要找到一种方法将它从 PHP 传递到 Javascript。一个很好的方法是使用[JSON（JavaScript Object Notation](http://nl.wikipedia.org/wiki/JSON)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T09:07:02.097

```
 <td id="box02">
    <!-- just leave this empty -->
   </td> 
```

并将其放在您的 onload 中：

```
$("#box02").html($('#box1').html()); // <-- wouldn't this make it a lot easier? 
```

如果你想要 div `box1`in `box2`，你为什么不直接复制 html`box1`呢？这使它更快（少了一次服务器调用）并且更容易阅读。

# objective-c - 目标 c 语法：@property 关键字

> ID：11948952
> 
> 赞同：-5
> 
> 时间：2012-08-14T08:59:47.647
> 
> 标签：objective-c, ios

> **可能重复：**
> [属性与实例变量](https://stackoverflow.com/questions/719788/property-vs-instance-variable)

有人可以告诉我有什么区别：

```
@interface SplitApp6DetailViewController : UIViewController <UISplitViewControllerDelegate, MKMapViewDelegate>{
sqlite3         *databaseHandle;
} 
```

和

```
@interface SplitApp6DetailViewController : UIViewController <UISplitViewControllerDelegate, MKMapViewDelegate>
@property (nonatomic) sqlite3* databaseHandle; 
```

我对这两种方法感到困惑。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T09:01:32.667

您可以将@property 方法与@synthesize 结合使用来自动生成getter 和setter。

这是一种新的做事方式，它使使用 getter/setter 变得更加容易，因为您不必自己编写它们。实例变量（在大括号之间定义，如上面的示例）也为您创建，因此除非您想支持旧版本的系统，否则无需手动执行此操作。

更多信息[在这里](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ObjectiveC/Chapters/ocProperties.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T09:04:22.817

一种是用实例变量声明一个类，第二种是用一个属性声明一个类。

# python - Python：嵌套 If 循环

> ID：11948953
> 
> 赞同：-5
> 
> 时间：2012-08-14T08:59:48.973
> 
> 标签：python, loops, if-statement

这让我发疯了 :) 我正在尝试根据月份从列表中求和值，我尝试了一些事情，但非常需要指导。

我正在尝试：第 1 个月至第 12 个月。

从列表 (EC_PlanData) 中迭代读取 PlanWeek(4) 值，然后求和

然后根据求和值计算平滑平均值。

这是我的代码：

```
G_counter = 1
j = i
m = 1
Plantotal = 0
PlanMonth = 0
DFD = []
EC_PlanData = [500,500.... etc] # 52 values

PlanWeek = range(j,j+3)
Month = range(m,13,1)

## Define Variables
ym, xh, xm, N1, Z1, N2, Z2 = 0,0,0,0,0,0,0

for month in Month:      # for each month 1 - 13
    for i,e in enumerate(list_1):      # read through list
        PlanMonth = PlanMonth + i+3    # sum 4 weekly values
        DFD.append(PlanMonth)          # append sum value to DFD list
        if i == 1:                     # if G_counter = 1, which it always is
            IFX.append(PlanMonth)      # also append to IFX list

    Plantotal= Plantotal+PlanMonth     # calculations here on are
    for i,e in enumerate(DFD):         # evaluated after appending above
        y = e

    ym = Plantotal / m                 # These are calculating a smoothing average
    xh = xh + m
    xm = xh / m      
    N1 = (m-xm) * (y-ym)
    Z1 = (m-xm) * (m-xm)
    N2 = N2 + N1
    Z2 = Z2 + Z1

    if Z2 == 0:                        # Decision on FC value
        FC = 0                         # This or
    else:
        FC = ym -(N2/Z2)*xm + (N2/Z2)*(m+1) # This

    J +=4                              # Advances on 4 time periods
    M +=1                              # Advances on 1 Month
    PlanMonth = 0                      # Resets PlanMonth variable 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T10:45:15.150

您必须意识到 12 不除以 52，并且每个月没有 4 周。所以举一个例子，你可以微调以获得你想要的东西，我已经定义了一周属于它的星期四所属的同一个月。这与 ISO 8601 对一年中第一周的定义非常吻合。如果还有一周，那么我把那一周加到 12 月。

```
import datetime
from itertools import groupby

def get_week(date):
    return date.isocalendar()[1]

def group_by_month(weeks, year):
    """
    Group a list containing one item per week, starting with week 1, by month.

    If there are too few items to fill a year, stop after last item.
    If there are more items than weeks in the year, stop before new year.
    """
    day = datetime.timedelta(days=1)
    week = datetime.timedelta(days=7)

    # Find first Thursday (it's in week 1 by ISO 8601)
    date = datetime.date(year, 1, 1)
    while date.weekday() != 3:
        date += day

    # Create list of one day from each week
    thursdays = []
    while date.year == year:
        thursdays.append(date)
        date += week

    # Check if the last day is in the last week and if not, 
    # add the week of the last day
    last = tursdays[-1]
    if get_week(last.replace(day=31)) != get_week(last):
        # this will not be a Thursday, but what the hey
        thursdays.append(last.replace(day=31))

    # The thursdays are already sorted by month, so 
    # it's OK to use groupby without sorting first
    for k, g in groupby(zip(weeks, thursdays), key=lambda x: x[1].month):
        yield [x[0] for x in g]

list_1 = [500] * 52

print map(sum, group_by_month(list_1, 2012)) 
```

结果：

```
[2000, 2000, 2500, 2000, 2500, 2000, 2000, 2500, 2000, 2000, 2500, 2000] 
```

您还应该知道一年可能包含[53 周](http://en.wikipedia.org/wiki/ISO_week_date#First_week)这一事实，如果是这样，您必须提供 53 项列表而不是 52 项列表。如果你不这样做，第 53 周就会被忽略。

# android - android: 具有 100 多个 webview 的 ViewPager

> ID：11948954
> 
> 赞同：1
> 
> 时间：2012-08-14T08:59:50.050
> 
> 标签：android, android-viewpager, viewpage

我的 viewpager 有 604 个 webviews，我想在每次用户滚动寻呼机时加载 5 个页面，如下所示：

{...[4][5][6][7][8]...}

我假设用户选择的当前页面是第 6 页，所以我想在所选页面之前和之后加载 2 页。我使用了这个内置方法`viewPager.setOffscreenPageLimit(3)`，但它没有按预期运行！

所以，任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T09:24:03.743

在处理这么多复杂的 Fragment 时，您应该确保使用[FragmentStatePagerAdapter](http://developer.android.com/reference/android/support/v4/app/FragmentStatePagerAdapter.html)。

要提前加载两页也设置`viewPager.setOffscreenPageLimit(2)`了而不是`3`.

您还应该确保在`getItem()`适配器的方法中`fragments will only be created as needed`.

# javascript - JavaScript 不能从单独的文件中工作

> ID：11948955
> 
> 赞同：0
> 
> 时间：2012-08-14T08:59:54.417
> 
> 标签：javascript, jquery, asp.net-mvc-3

我试图将我的 JS 移动到一个单独的文件中，而不是直接在页面上。但是，由于某种原因，我无法让它工作。

我想根据下拉选择更新站点。我现在的做法是这样的：

看法：

```
<script type="text/javascript">
$(document).ready(function () {
    $("#EntityType").change(function () {
        /* Get the selected value of dropdownlist */
        var selectedID = $(this).val();

        /* Request the partial view with .get request. */
        $.get('/Entity/Create_DropDownList/' + selectedID, function (data) {

            /* data is the pure html returned from action method, load it to your page */
            $('#entity_form_attributes').html(data);
            /* little fade in effect */
            $('#entity_form_attributes').fadeIn('fast');
        });
    });
});
</script>

    <div class="editor-field">
        @Html.DropDownList("EntityType", (SelectList)ViewData["Types"])
    </div>

    <div id="entity_form_attributes"></div> 
```

这是有效的。部分视图按原样加载到 div 标记中。但是如果创建一个 JavaScript 文件然后将脚本移动到该文件中，它就会失败。从一个共享的起始站点，我包含了 JavaScript 文件。

谁能看到我做错了什么。该应用程序是 MVC3 应用程序。是否有我必须设置的设置/属性才能使其工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T09:03:36.827

> 谁能看到我做错了什么。

是的，您在此处对 url 进行了硬编码，而不是使用 Url 助手来生成它。你不应该这样做：

```
$.get('/Entity/Create_DropDownList/' 
```

当您在 IIS 中部署应用程序时，这将中断，因为您的 url 错误。由于这个硬编码的 url，您省略了在开头包含虚拟目录名称。

因此，在 ASP.NET MVC 应用程序中处理 url 时，请始终使用 Url 助手。因此，在您的情况下，您可以在视图中将此 url 生成为 HTML5`data-*`属性：

```
@Html.DropDownList(
    "EntityType", 
    (SelectList)ViewData["Types"], 
    new { data_url = Url.Action("Create_DropDownList", "Entity") }
) 
```

然后在您单独的 javascript 文件中简单地检索此 url 并使用它：

```
$("#EntityType").change(function () {
    /* Get the selected value of dropdownlist */
    var selectedID = $(this).val();

    /* Get the url from the data-url HTML attribute */ 
    var url = $(this).data('url');

    /* Request the partial view with .get request. */
    $.get(url, { id: selectedID }, function (data) {
        /* data is the pure html returned from action method, load it to your page */
        $('#entity_form_attributes').html(data);
        /* little fade in effect */
        $('#entity_form_attributes').fadeIn('fast');
    });
}); 
```

# c# - 处理这种逻辑的更优雅的方式

> ID：11948956
> 
> 赞同：1
> 
> 时间：2012-08-14T08:59:59.230
> 
> 标签：c#, .net, if-statement, logic

```
private bool SearchFilter(object sender)
{
    CommDGDataSource item = sender as CommDGDataSource;
    if (FilterPropertyList.IsErrorFilter)
    {
        if (!item.Error)
            return false;
    }
    if (FilterPropertyList.IsDestinationFilter)
    {
        if (!(item.Destination == FilterPropertyList.Destination))
            return false;
    }
    if (FilterPropertyList.IsSourceFilter)
    {
        if (!(item.Source == FilterPropertyList.Source))
            return false;
    }

    return true;
} 
```

上面的代码运行良好，但我想知道是否有更优雅的方式来编写上面的代码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T09:13:34.780

您可以通过进行如下的小改动来提高可读性

```
private bool SearchFilter(object sender)
{
    CommDGDataSource item = sender as CommDGDataSource;

    if (FilterPropertyList.IsErrorFilter && !item.Error)
        return false;

    if (FilterPropertyList.IsDestinationFilter && item.Destination != FilterPropertyList.Destination)
        return false;

    if (FilterPropertyList.IsSourceFilter && item.Source != FilterPropertyList.Source)
        return false;

    return true;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-14T09:24:20.293

我不认为弄乱布尔表达式有什么好处，除了我的[评论](https://stackoverflow.com/questions/11948956/more-elegant-way-of-handling-this-logic/11949374#comment15920040_11948956)中提到的简单修改。如果你最终得到丑陋的代码，那么你的设计就不是那么好。

在这种情况下，您可能可以通过以下方式重构责任：

*   创建过滤器*对象列表*
*   在这些对象中实现逻辑

像这样的伪代码：

```
foreach (var filter in filters)
    if !filter.Filter(item) return false;
return true; 
```

```
public interface IFilter
{
    bool Filter(CommDGDataSource item);
}

public class ErrorFilter : IFilter
{
    public bool Filter(CommDGDataSource item)
    {
        return item.Error;
    }
}

public class DestinationFilter : IFilter
{
    public string Destination { get; set; }

    public bool Filter(CommDGDataSource item)
    {
        return item.Destination == Destination;
    }
}

//etc.. 
```

# java - 突出显示包含 HTML 的字段

> ID：11948958
> 
> 赞同：3
> 
> 时间：2012-08-14T09:00:10.097
> 
> 标签：java, solr, escaping, lucene-highlighter

我有一个可能包含 HTML 代码作为用户输入的字段。如果我使用简单的荧光笔，它不会在添加`<em>`标签之前转义输入。例如，如果输入是

```
"This is a <caption>" 
```

我搜索“标题”，我得到：

```
"This is a <<em>caption</em>>" 
```

但我想得到：

```
"This is a &lt;<em>caption</em>&gt;" 
```

当呈现为 HTML 时，它看起来与突出显示匹配单词的输入相同。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T15:13:14.533

One technique is to use some other sentinel string to indicate highlighting. See [`hl.simple.pre` and `hl.simple.post`](http://wiki.apache.org/solr/HighlightingParameters/#hl.simple.pre.2BAC8-hl.simple.post). That way you can perform escaping first, without losing your highlighting, and then replace the sentinels with highlighting markup as a final step.

For example, the Sunspot Solr client for Ruby uses `@@@hl@@@` for the `hl.simple.pre` param, and `@@@endhl@@@` for the `hl.simple.post` param. Using these values…</p>

*   Solr returns: `This is a <@@@hl@@@caption@@@endhl@@@>`
*   HTML escaping: `This is a &lt;@@@hl@@@caption@@@endhl@@@&gt;`
*   Replace the sentinels: `This is a &lt;<em>caption</em>&gt;`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-03-06T14:20:31.380

Solr 4.3.1 具有启用特定编码器的选项，用于高亮显示生成 XML/HTML 转义片段。放

```
<str name="hl.encoder">html</str> 
```

在 solrconfig.xml 中的 /config/requestHandler[@name="/select"]/lst[@name="defaults"] 下方。也可以通过&hl.encoder=html在url中设置参数。标准 solrconfig.xml 包含此编码器的定义

```
<!-- Configure the standard encoder -->
<encoder name="html" class="solr.highlight.HtmlEncoder" /> 
```

示例：“X < Y < Z”将突出显示为

```
X &lt; <em>Y</em> &lt; Z 
```

搜索“Y”时。Solr XML 响应包含

```
X &amp;lt; &lt;em&gt;Y&lt;/em&gt; &amp;lt; Z 
```

当然，在 str 元素中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T09:13:52.077

您可以使用 String.replace 替换`"<<"`with`"&lt;<"`和`">>"`with `">&gt;"`。如果您想要任何更具体的替换，您也可以指定它们

# c# - ClickOnce 发布错误

> ID：11948963
> 
> 赞同：0
> 
> 时间：2012-08-14T09:00:25.290
> 
> 标签：c#, visual-studio-2010, clickonce, publish, windows-server-2008-r2

有我的问题：

我一直在尝试使用带有 Visual Studio 2010 的 ClickOnce 发布 WPF 应用程序。目标网络服务器是安装了 II7.5 的 webServer 2008R2。

但我的问题是当我尝试在远程服务器上发布应用程序时出现此错误：

```
Unable to create the Web site 'http://MyWebSite/DeployApp'. The components for communicating with FrontPage Server Extensions are not installed. 
```

我一直在环顾四周，发现FPSE不适用于iis7.0或7.5，只有RTR存在，在微软网站上，我发现的唯一东西[就是](http://msdn.microsoft.com/en-us/library/ms229001.aspx)根本没有帮助。

那么你有什么想法来解决这个问题，或者使用 clickOnce 在我的网络服务器上发布的另一种方法。

如果您需要更多信息，请询问他们，我会尽量在最好的时间内将它们提供给您。

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T09:08:53.860

我认为从 IIS 7.0 开始，FPSE 不再可用（或至少不再推荐）。

考虑另一种部署方式（WebDAV 或 FTP），我认为有一种方法仍然可以使用 FPSE。

也检查一下；[http://forums.asp.net/p/1545957/3780968.aspx](http://forums.asp.net/p/1545957/3780968.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T07:12:23.793

如前所述，不再支持 FPSE。仅当您想使用 HTTP 发布时才需要这些。

现在您应该使用 FTP 而不是 HTTP 来发布您的应用程序。将您的发布文件位置设置为[ftp://yourserver.com/yourftpfolder/yourappname](ftp://yourserver.com/yourftpfolder/yourappname)（文件应该通过 FTP 到达的任何位置），然后将您的安装 URL 设置为客户的 http 链接（如[http:// myserver.com/myapp](http://myserver.com/myapp)，或者您访问该 FTP 文件夹）。

# javascript - jquery单选按钮更改问题

> ID：11948965
> 
> 赞同：1
> 
> 时间：2012-08-14T09:00:30.367
> 
> 标签：javascript, jquery, html, jquery-selectors, radio-button

我有 2 个单选按钮，我通过单选按钮使一些字段处于活动/非活动状态。但是当我通过 ajax 从表单发送数据然后第二次打开我的表单而不重新加载页面时，单选按钮已损坏，即它们不提供活动/非活动功能。因此，例如，当我单击按钮 2 时，field3 变为活动状态，我输入所需的数据并通过 ajax 将其发送到服务器，但是当我第二次打开对话框时，单选按钮 2 仍然处于活动状态并且当我尝试更改 ot到单选按钮 1 字段 1,2 仍然处于非活动状态，但是当我重新加载页面时，一切正常。怎么了？这是我的html代码：

```
<a href="javascript:void(0)" class="add">click here</a>

<div id="dialog-form" title="title">
    <p class="validateTips">All form fields matched with (*) are required</p>
    <form>
        <fieldset>
            <div>
                <div>
                    <label for="name">Name(*)</label>
                    <textarea id="myName" class="text ui-widget-content ui-corner-all"></textarea>
                </div>
            </div>
            <div>
                <label for="perc">percent(*)</label>
                <input type="number" id ="perc"  step="0.5" />
            </div>
            <div> 
            <table>
                <tr>
                <td>
                    <input type="radio" id="but1" name="group1" value="1">1<br>
                </td>
                <td>
                    <input type="radio" id="but2" name="group1" value="2">2<br>
                </td>
                </tr>
                <tr>
                    <td>
                        <table>
                            <tr>
                                <label for="field1">field1 (*)</label>    
                                <input type="text" id="field1" value="" class="group1" > <br>    
                            </tr>
                            <tr>
                                <label for="field2">field2 (*)</label>    
                                <input type="text" id="field2" value="" class="group1" > <br>    
                            </tr>

                        </table>
                    </td>
                    <td>
                            <label for="field3">field3 (*)</label>
                            <input id="field3" type="text" value="" class="group2" >
                    </td>
                </tr>
            </table>
           </div>

        </fieldset>
    </form>
</div> 
```

这是 jQuery 代码，它通过单选按钮更改字段的活动：

```
$(document).ready(function() {
    $("input:radio").on("click", function() {
            makeFieldsActive($(this));
        }); 
});

function makeFieldsActive(elem) {

    $("input:text").prop("disabled", true);
     $("input.group" + elem.val()).prop("disabled", false);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T13:40:12.873

这里有两种可能性（至少）：

您可以清空对话框的内容并再次附加它，您可以确保默认情况下已设置所有内容。最简单的尝试是创建新的 html 页面，内容将是您的表单（不需要通常的 html 标签），并将其加载到您的 div 中。这与重新加载页面相同。但也要小心，当您重新加载页面时，某些浏览器倾向于保留表单数据，因此它可能不是您实际需要的解决方案：

```
$("#dialog-form").empty().load("form.html"); 
```

另一种方法是使用将所有输入重置为默认值的功能：

```
$("input").prop("disabled",false); 
```

那么你会把这段代码放在哪里呢？我建议您在打开对话框时这样做，有一个专门用于此目的的事件，称为 dialogopen ：

```
$("#dialog-form").dialog(
{
    open: function(event,ui)
    {
        // reset form
    }
}); 
```

您也可以稍后使用以下命令进行设置：

```
$("#dialog-form").on("dialogopen",function(event,ui)
{
     // reset form
}); 
```

**但是 .dialog() 小部件默认应该这样做**，所以尝试添加

```
$("#dialog-form").dialog();` 
```

# javascript - 在 jqGrid 中为子网格行添加事件？

> ID：11948976
> 
> 赞同：0
> 
> 时间：2012-08-14T09:00:59.650
> 
> 标签：javascript, jqgrid

我在 jqGrid 中有一个子网格，它工作得非常好。但是，我想为 onSelectRow 添加一个事件，就像我在主网格中一样。那可能吗？我的网格定义：

```
 $("#skeppsdagbok_grid").jqGrid({
        datatype: 'local',
        mtype: 'GET',
        colNames: [
                'Datum',
                'Tid',
                'Tkn',
                'Lat',
                'Tkn',
                'Long',
                'Kurs',
                'Fart',
                'Anteckning',
                'Sign',
                'OK',
                'Skapad'],
        colModel: [
              { name: 'Datum', sortable: false, width: 70, formatter: 'date' },
              { name: 'Tid', sortable: false, width: 65, formatter: 'date', formatoptions: { srcformat: 'H:i:s', newformat: 'ShortTime'} },
              { name: 'LatitudTecken', sortable: false, width: 10 },
              { name: 'Latitud', sortable: false, width: 50 },
              { name: 'LongitudTecken', sortable: false, width: 10 },
              { name: 'Longitud', sortable: false, width: 50 },
              { name: 'Kurs', sortable: false, width: 50 },
              { name: 'Fart', sortable: false, width: 50 },
              { name: 'Anteckning', sortable: false, width: 100 },
              { name: 'Sign', sortable: false, width: 50 },
              { name: 'OK', sortable: false, width: 30, formatter: 'checkbox' },
              { name: 'Skapad', sortable: false, width: 100 }
            ],
        rowNum: -1,
        rownumbers: true,
        ignoreCase: true,
        viewrecords: true,
        gridview: true,
        shrinkToFit: false,
        width: 750,
        height: 465,
        caption: 'Skeppsdagbok',
        jsonReader: {
            root: "rows",
            page: "page",
            total: "total",
            records: "records",
            repeatitems: true,
            cell: "cell",
            id: "id",
            subgrid: {
                root: "rows",
                repeatitems: true,
                cell: "cell",
                id: "id"
            }
        },
        subGrid: true,
        subGridUrl: '@Url.Action("GetGamlaSkeppsdagboksrader")',
        subGridModel: [
            {
                name: [
                'Datum',
                'Tid',
                'Tkn',
                'Lat',
                'Tkn',
                'Long',
                'Kurs',
                'Fart',
                'Anteckning',
                'Sign',
                'OK',
                'Skapad'],
                width: [
                    70,
                    35,
                    20,
                    50,
                    20,
                    50,
                    40,
                    40,
                    150,
                    50,
                    50,
                    100
                ]
            }
        ],
        onSelectRow: function (id) {
            getSkeppsdagboksanteckning(id);
        }
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T09:37:49.540

我认为您可以将子网格用作网格，然后您可以使用与 jqGrid 关联的事件。查看此[链接](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3asubgrid_as_grid)以供进一步参考。

# actionscript - mouseEnabled + MOUSE_OVER 冲突

> ID：11948977
> 
> 赞同：0
> 
> 时间：2012-08-14T09:01:01.180
> 
> 标签：actionscript, mouseevent, labels

我正在努力使我的动画工作，其中屏幕的单独区域会唤起在悬停时出现/消失的状态，并且如果单击则转到其他地方，如果您单击它一秒钟就会出现转到该标签，然后返回到开始。有什么建议么？

```
//mouse overs (i've only left 1 instance of each event listener here)
comic.addEventListener(MouseEvent.MOUSE_OVER,BubbleHover);
//mouse outs
comic.addEventListener(MouseEvent.MOUSE_OUT,BubbleOut);
//mouse down
comic.addEventListener(MouseEvent.CLICK,BubbleClick);

//
// Take the playhead to where the user hovers. 
//
function BubbleHover(evtObj:MouseEvent) {
    var LabelName:String = evtObj.target.name + "Bubble";
    trace(evtObj.target.name +" bubble appeared"); //state which bubble appears
    //go to the section clicked on...
    gotoAndStop(LabelName);

}
//
// Return to the beginning bubble
//
function BubbleOut(evtObj:Event):void{

    gotoAndStop("lookBubble");
}

//
// Go to the Label Page 
//
function BubbleClick(evtObj:Event){

    var MovieClipPage = evtObj.target.name +"_page";
    if (mouseEnabled) {  
        mouseEnabled=false;
        trace(mouseEnabled); // returns false but then returns to "lookBubble"
    }
    gotoAndStop(MovieClipPage);
    mouseEnabled(true);

} 
```

据我了解正在发生，当播放头转到 BubbleClick 标签时，`MouseEvent.MOUSE_OUT`正在发生。有什么想法可以绕过这个吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T07:27:00.900

是的，不幸的是，您似乎在 actionscript 中发现了少数怪癖之一。问题在于，如果影片剪辑具有鼠标退出事件并且鼠标位于该对象上方。将 mouseEnabled 和 mouseChildren 设置为 false 无关紧要，out 事件仍会触发。

处理此问题的方法是使用一些 bool (isReallyEnabled) 手动检查状态或删除事件侦听器。

# android - Android 的 html 电子邮件中不显示水平线

> ID：11948978
> 
> 赞同：0
> 
> 时间：2012-08-14T09:01:06.740
> 
> 标签：android, html, email

我想画一条水平线来分隔 HTML 中的数据，以便在我的 android 应用程序中**发送电子邮件。**为此，我使用

```
 <hr align="left" size="4" width="370" color="maroon" /> 
```

但是该行没有显示在电子邮件中。在此处执行[http://www.w3schools.com/html/tryit.asp?filename=tryhtml_intro](http://www.w3schools.com/html/tryit.asp?filename=tryhtml_intro) 它可以工作。为什么会发生这种情况以及如何解决这个问题？

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T12:53:42.347

`Html.fromHtml()`不支持`<hr>`

# html - 移动应用程序的 XML 或 JSON 中的基本字符串格式

> ID：11948987
> 
> 赞同：1
> 
> 时间：2012-08-14T09:01:26.577
> 
> 标签：html, xml, json, string-formatting

从提供 XML 或 JSON 的 RESTful 样式服务传达基本文本格式（例如换行符）的最合适方法是什么？内容将在 iOS 和 Android 上呈现为原生文本（即不是 Web 视图）。

对于**XML**，我可以看到三个选项：

**选项 #1**：使用 CDATA 标记和 HTML，然后解析 HTML，例如：

```
<element>
    <![CDATA[
    This is the text that requires basic formatting. <br />
    Maybe it also requires a paragraph: <p>Hello World!</p>
    ]]>
</element> 
```

**选项 #2**：删除 CDATA 并允许格式化标记成为 XML 文件的一部分，然后解析 HTML：

```
<element>
    This is the text that requires basic formatting. 
    <br />
    Maybe it also requires a paragraph: 
    <p>
        Hello World!
    </p>
</element> 
```

**选项 #3**：使用一些由应用程序解析并替换为适当的本机格式的自定义语法。

对于**JSON**，我可以看到两个选项：

**选项 #1**：在 JSON 中包含 HTML：

```
{
    "content": "This is the text that requires basic formatting. <br />
    Maybe it also requires a paragraph: <p>Hello World!</p>"    
} 
```

**选项#2**：使用一些由应用程序解析并替换为适当的本机格式的自定义语法（与 XML**选项#3**相同）。

如果这些解决方案倾向于“hacky”，那么使用 WebView 并直接呈现 HTML 可能*是最合适的方法。*

# c# - 需要一种方法来区分 ShDocVw.InternetExplorer 选项卡对象

> ID：11948992
> 
> 赞同：4
> 
> 时间：2012-08-14T09:01:35.227
> 
> 标签：c#, internet-explorer, tabs, shdocvw

我正在使用`ShDocVw`互操作程序集来获取[`InternetExplorer`](http://msdn.microsoft.com/en-us/library/aa752084%28v=vs.85%29.aspx)对象。

```
foreach(InternetExplorer IE in new ShellWindowsClass())
{
   Console.Log(IE.HWND.ToString() + Environment.NewLine);
} 
```

结果是 - 同一窗口报告的所有选项卡都`HWND`等于`MainWindowHandle`该窗口的进程。事实上，我在这些对象中找不到*任何*可以将它们彼此区分开来的不同信息。

而且我需要将这些实例与真实选项卡相关联，以便将它们与 Windows 事件匹配（主要是窗口焦点更改）。`Frame Tab`找到这个对象和相应的或`TabWindowClass`窗口实例之间的链接会很棒。

任何想法如何实现这一目标？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T13:19:01.820

好的，这并不完美，但这是我想出的：

1.  `HWND`从对象获取[`InternetExplorer`](http://msdn.microsoft.com/en-us/library/aa752084%28v=vs.85%29.aspx)，这是**窗口**的句柄。
2.  使用[`EnumChildWindows`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633494%28v=vs.85%29.aspx)或[`FindWindowEx`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633500%28v=vs.85%29.aspx)遍历其子窗口并找到具有类的子窗口`Frame Tab`。你会得到一个-**选项卡**`IntPtr tabHandle`的句柄。我个人更喜欢这里，因为它不会使用回调，而是循环迭代......**`FindWindowEx`**
***   然后，`FindWindowEx`再次使用`tabHandle`#2 中发现的来找到一个有 class 的孩子`TabWindowClass`。你会得到`IntPtr tabTitleHandle`- 这是包含**选项卡窗口标题**的窗口（包括位置名称 +“ - internet explorer smth”，我写“smth”，因为这个文本可能会有所不同，因为可以自定义 MSIE 分发）。*   使用`GetWindowText`on`tabTitleHandle`获取窗口标题。*   现在，遍历集合`InternetExplorer`中的对象`ShellWindowsClass`，首先检查 PID - 我们只需要比较由同一进程创建的实例，然后检查您是否在 #4 中获得了窗口标题`.StartsWith(IE.LocationName + " - ")`。注意“ - ”，因为我们可以假设会有一些识别浏览器本身的文本，但由于它可以自定义 - 不能真正猜到它。如果窗口标题以位置名称开头，我们将假设它们相互关联。**

 **正如我所说，这并不完美（因为最后一场比赛是按标题进行的），但这是我迄今为止获得的最好成绩。希望它会有所帮助。我仍在等待完美的解决方案，继续挖掘！;)**