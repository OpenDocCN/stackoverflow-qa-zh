# StackOverflow 问答 10000000-10000999

# php - PHP按字段排序数组？

> ID：10000005
> 
> 赞同：51
> 
> 时间：2012-04-03T19:25:46.213
> 
> 标签：php, arrays, sorting

> **可能重复：**
> [如何通过内部键对多维数组进行](https://stackoverflow.com/questions/2545544/how-to-sort-a-multidemensional-array-by-an-inner-key)
> [排序 如何在 php 中对数组的数组进行排序？](https://stackoverflow.com/questions/2978447/how-to-sort-an-array-of-arrays-in-php)

如何对数组进行排序，例如：`$array[$i]['title'];`

数组结构可能如下：

```
array[0] (
  'id' => 321,
  'title' => 'Some Title',
  'slug' => 'some-title',
  'author' => 'Some Author',
  'author_slug' => 'some-author'
);

array[1] (
  'id' => 123,
  'title' => 'Another Title',
  'slug' => 'another-title',
  'author' => 'Another Author',
  'author_slug' => 'another-author'
); 
```

那么数据是根据数组中的**标题字段以****ASC 顺序显示的吗？**

 *** * *

## 回答 #1

> 赞同：130
> 
> 时间：2012-04-03T19:28:39.140

[`usort`](http://www.php.net/manual/en/function.usort.php)为此目的明确构建的使用。

```
function cmp($a, $b)
{
    return strcmp($a["title"], $b["title"]);
}

usort($array, "cmp"); 
```**

# php - PHP 中的数组似乎删除了元素

> ID：10000007
> 
> 赞同：1
> 
> 时间：2012-04-03T19:26:05.400
> 
> 标签：php, arrays

我正在构建一个包含复杂数据的应用程序，我使用数组。一些数据直接来自 postgresql 数据库，一些来自计算和处理。

我最初构建了包含所有这些的数组，并且一切都进行得很好。

稍后在处理过程中，我有以下代码。这是我的代码的一部分。

```
 foreach ($this -> detailTables as $key => $detTable) {
        foreach ($detTable['columns'] as $key2 => $column) {
            if ($column['isID'] == 't') {
                $detTable['mainid'] = $column['columnName'];
            }
            if ($column['lookupTable'] != '') {
                $select = array('table' => $column['lookupTable'], 'id' => $column['lookupID'], 'disp' => $column['lookupDisplay']);
                $detTable['lookups'][] = $select;
            }
        }
        logw($key . ' mainid 1', $detTable['mainid']);
        logw($key.' lookups 1', $detTable['lookups']);
    }

    foreach ($this -> detailTables as $key => $detTable) {
        logw($key . ' mainid 2', $detTable['mainid']);
        logw($key.' lookups 2', $detTable['lookups']);
    } 
```

基本上，我正在扫描 detailTables 及其列以确定和设置**mindid**和**查找**数组的值

在第二个 foreach 段中，我只是记录值以查看是否持续存在。

我的日志文件内容如下。

> 列 mainid 1 = columnID
> 数组列查找 1
>  数组 0
>   table = 表
>   id = tableID
>   disp = tableName
> 
> tabs mainid 1 = tabID
> array tabs lookups 1
>  array 0
>   table = tables
>   id = tableID
>   disp = tableName

第二部分的输出为

> 列 mainid 2
> 列查找 2
> 选项卡 mainid 2
> 选项卡查找 2

我无法弄清楚为什么两个日志部分不相同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-03T19:36:06.097

根据我对您的结构的理解，您需要在第一次通过后重置迭代

```
 }
    logw($key . ' mainid 1', $detTable['mainid']);
    logw($key.' lookups 1', $detTable['lookups']);
}
//reset variables here
foreach ($this -> detailTables as $key => $detTable) {
    logw($key . ' mainid 2', $detTable['mainid']);
    logw($key.' lookups 2', $detTable['lookups']);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-03T19:34:49.030

`$detTable`应该是参考。所以你应该把第一行改成

```
 foreach ($this -> detailTables as $key => &$detTable) { 
```

# java - RESTful servlet URL - web.xml 中的 servlet 映射

> ID：10000008
> 
> 赞同：2
> 
> 时间：2012-04-03T19:26:09.137
> 
> 标签：java, rest, servlets, spring-mvc, url-pattern

我觉得这是一个常见问题，但我研究过的任何东西都没有奏效......

在我的 web.xml 中，我有一个所有 REST 调用的映射 -

```
 <servlet-mapping>
    <servlet-name>springmvc</servlet-name>
    <url-pattern>/rest/*</url-pattern>
  </servlet-mapping> 
```

如果 URL 是，这很好用 -

```
GET /rest/people 
```

但如果是则**失败**

```
GET /rest/people/1 
```

我收到一条`400 Bad Request`错误消息`The request sent by the client was syntactically incorrect ()`。我不确定它是否能进入 Spring servlet 进行路由......

我怎样才能通配符开头的**任何东西**`/rest`，以便可以适当地处理它？

换句话说，我希望以下所有内容都有效 -

```
GET /rest/people
GET /rest/people/1
GET /rest/people/1/phones
GET /rest/people/1/phones/23 
```

**编辑**- 根据要求的控制器代码

```
@Controller
@RequestMapping("/people")
public class PeopleController {

    @RequestMapping(method=RequestMethod.GET)
    public @ResponseBody String getPeople() {
        return GsonFactory.getInstance().toJson(LookupDao.getInstance().getPeople());
    }

    @RequestMapping(value="{id}", method=RequestMethod.GET)
    public @ResponseBody String getPerson(@PathVariable String id) {
        return GsonFactory.getInstance().toJson(LookupDao.getInstance().getPerson(id));
    }
} 
```

**回答**

@matsev我是否在那里似乎并不重要`/`。

当我将变量名转置以供公众查看时，我更改了几件事以使其正常工作。

**原来的**

```
@RequestMapping(value="{id}", method=RequestMethod.GET)
public @ResponseBody String getPerson(@PathVariable String userId) {
    return GsonFactory.getInstance().toJson(LookupDao.getInstance().getPerson(userId));
} 
```

**我发布的内容**

```
@RequestMapping(value="{id}", method=RequestMethod.GET)
public @ResponseBody String getPerson(@PathVariable String id) {
    return GsonFactory.getInstance().toJson(LookupDao.getInstance().getPerson(id));
} 
```

**变量名不匹配让我陷入...我将其留在这里作为对所有人的警告...匹配您的变量名！**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-03T19:44:28.383

尝试在`/`之前添加一个`{id}`：

```
@RequestMapping(value="/{id}", method=RequestMethod.GET) 
```

没有它，id 将直接附加到人员 url，例如`/rest/people1`，而不是`/rest/people/1`.

# php - 如何使用 PHP 取消对 Windows Auth 用户的身份验证

> ID：10000014
> 
> 赞同：2
> 
> 时间：2012-04-03T19:26:28.813
> 
> 标签：php, windows, iis-7, windows-authentication

如果用户使用 windows auth 登录到我的站点，我如何注销该人以便他们必须再次进行身份验证？（这是使用 IIS）

例如，用户这样登录：

![授权](../Images/a0fb478de23f4bfeb78a0a5cbe1ad017.png)

然后`$_SERVER`变量包含：

```
[REMOTE_ADDR] => 172.34.567.891
[REMOTE_HOST] => 172.34.567.891
[REMOTE_PORT] => 44601
[REMOTE_USER] => DOMAIN\username 
```

除非计算机重新启动，或者他使用不同的浏览器，否则不会再次要求用户使用 Windows auth 输入他的用户名或密码。

如何**强制**用户再次使用 PHP 进行身份验证？

* * *

## 更新：

我找到了一种方法来做到这一点，但它只适用于 chrome （所有其他浏览器只会抛出 401 未经授权，即使登录是正确的）：

我的代码：

`logout.php`

```
 //clear session
    //then:
    $user = isset($_SESSION['userName']);
    $userNotSet = (!$user || (is_array($user) && count($user) == 0));

    if(!isset($_SESSION['401']) && $userNotSet) {
        $_SESSION['401'] = true;
        $realm = 'mysite';
        header('HTTP/1.1 401 Unauthorized');
        header('WWW-Authenticate: Digest realm="'.$realm.
           '",qop="auth",nonce="'.uniqid().'",opaque="'.md5($realm).'"');
        exit;
    }
    elseif($userNotSet) {
        header('HTTP/1.1 401 Unauthorized');
        list($domain, $user) = explode("\\", $_SERVER['REMOTE_USER']);
        $_SESSION['userName'] = $user;
        $_SESSION['LoggedIn'] = true;
    }
    else    {
        header('Location: '.WEBROOT.INDEX);
    }
    exit; 
```

为什么这在 Chrome 之外的任何其他浏览器中都不起作用？有没有跨浏览器的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T06:02:38.890

如果您使用带有 HTTP Basic Auth 的 PHP，那么`$_SERVER`您需要使用和测试两个变量：`$_SERVER['PHP_AUTH_USER']`& `$_SERVER['PHP_AUTH_PW']`。

要强制显示浏览器的 HTTP 基本身份验证登录对话框，请发送 401 标头。不管用户是否登录，您都可以随时发送 401 标头来强制用户重新输入他们的凭据。

此代码显示了基础知识：

```
<?php

// If the force_login request variable exists, then we want the user to
// re-enter their login details.
if (isset($_GET['force_login']) && $_GET['force_login'] == 1) {
    header('WWW-Authenticate: Basic realm="realm"'); 
    header('HTTP/1.0 401 Unauthorized'); 
    exit;
}

// Login process
if (!$_SERVER['PHP_AUTH_USER']) {
    // The browser has not supplied $_SERVER['PHP_AUTH_USER'], so we need 
    // the user to log in 
    header('WWW-Authenticate: Basic realm="realm"'); 
    header('HTTP/1.0 401 Unauthorized'); 
    exit;

} else {
    // Test that the username/password combination are correct
    $expectedUsername = 'test';
    $expectedPassword = '1234';
    if ($_SERVER['PHP_AUTH_USER'] != $expectedUsername 
            && $_SERVER['PHP_AUTH_PW'] != $expectedPassword ) { 
        // not valid username/password - try again!
        header('WWW-Authenticate: Basic realm="realm"'); 
        header('HTTP/1.0 401 Unauthorized'); 
        exit;
    }
} 
// End login process

// The user is logged in here. we can display the page content
echo '<a href="?force_login=1">Force login</a>'; 
```

（附带说明，如果您使用的是 HTTP 基本身份验证，请确保您也使用 SSL！）

# mongodb - MongoDB 文档中的数组是否始终保持有序？

> ID：10000019
> 
> 赞同：1
> 
> 时间：2012-04-03T19:26:50.907
> 
> 标签：mongodb

我可以找到充分的证据表明 MongoDB 始终按照插入或更新文档时给定的顺序保存，但我无法在 MongoDB 的文档中明确说明。

所以我会继续问 [可能是愚蠢的] 问题：MongoDB 文档中的数组是否按照插入/更新时指定的顺序保存？

和分片/复制/等。不影响此排序，*对*吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-03T19:30:25.147

如果您正在谈论**文档字段的数组值的**顺序，那么是的，该顺序始终保持不变。[看到这个问题](https://stackoverflow.com/questions/9013916/do-arrays-stored-in-mongodb-keep-their-order)。

如果您谈论集合中文档的顺序，据我所知，您不应该指望任何顺序。如果你需要一个命令，你应该实现你自己的`created_at`或`sequence_index`字段。

# jquery - AJAX 发布到谷歌电子表格

> ID：10000020
> 
> 赞同：25
> 
> 时间：2012-04-03T19:26:51.433
> 
> 标签：jquery, ajax, google-apps-script, google-sheets

我正在尝试将表单数据发布到谷歌电子表格。目前，如果表单已通过验证，则会发生以下情况：

```
if (validateForm === true) {
        $.ajax({
            type: 'post',
            url: 'https://docs.google.com/spreadsheet/ccc?key=0AlwuDjMUxwhqdGp1WU1KQ0FoUGZpbFRuUDRzRkszc3c',
            data: $("#workPLZ").serialize(),
            success: alert($("#workPLZ").serialize())
        });
    }
    else {} 
```

我使用成功设置来验证我的表单数据是否被正确序列化（它是）并且它是成功的。但是，我的谷歌电子表格没有更新（没有数据通过）。我在这里使用了示例代码，将 doGet 更改为 doPost ( [http://mashe.hawksey.info/2011/10/google-spreadsheets-as-a-database-insert-with-apps-script-form-postget-submit- method/](http://mashe.hawksey.info/2011/10/google-spreadsheets-as-a-database-insert-with-apps-script-form-postget-submit-method/) )，并公开了谷歌电子表格（任何人都可以编辑）。我按照说明，将代码复制到 googledocs，然后运行 ​​setUp 两次（第一次请求许可，第二次运行，我没有注意到任何事情发生）。谁能帮我？我觉得我超级接近。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-04-04T16:00:38.320

好吧，我想出了一个解决方案。在被告知跨域 AJAX 问题后，我决定继续使用文章作者在[http://mashe.hawksey.info/2011/10/google-spreadsheets-as上使用的方法。 -a-database-insert-with-apps-script-form-postget-submit-method/](http://mashe.hawksey.info/2011/10/google-spreadsheets-as-a-database-insert-with-apps-script-form-postget-submit-method/)。

要将数据发布到您的 google 电子表格，首先制作电子表格并将工作表名称（左下角）更改为 DATA。接下来，在电子表格中打开脚本编辑器（工具 ==> 脚本编辑器）并粘贴文章中的脚本。将“doGet(e)”更改为“doPost(e)”。运行两次设置脚本。第一次它会请求运行权限（授予它），然后第二次选择运行它，你不会得到任何弹出指示它已经运行（我在编辑器中运行了我的，所以上面说“运行 setUp”代码输入区域，但仅此而已）。之后，在脚本编辑器中选择“发布”，然后选择“发布为服务”。单击“允许任何人调用此服务”单选按钮和“允许匿名访问”复选框。复制网址（重要！) 并单击“启用服务”。这是“困难的部分”。

在您的 HTML 表单中，您提交的每个元素都必须有一个“名称”属性（例如 ）这个名称是数据的发送方式 - 每个条目都附加到它的名称上。确保您收集的每条表单数据都有一个名称，并且该名称作为电子表格的一列输入（这就是它将数据从表单映射到电子表格的方式）。对于您的表单，将要发布的方法和操作设置为您的“发布为服务”URL（我告诉您保存），如下所示：

```
<form id="formID" method="post" action="URL" target="hidden_iframe"> 
```

我包含了一个表单 ID，因此我可以选择表单并使用 jquery 提交它。在您的 HTML 中，在上述表单之前，添加您隐藏的 iframe：

```
<iframe name="hidden_iframe" id="hidden_iframe" style="display:none;"></iframe> 
```

设置某种形式的表单验证（不是必需的，但如果每个字段都没有填写，您将在电子表格中获得不完整的数据），如果经过验证，则调用 jquery .submit()。例如：

```
 if (formValidation === true){
           $("#formID").submit();
    }
    else {} 
```

就是这样。祝你好运！

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2014-07-06T09:00:37.170

由于 Google Apps 脚本现在有一个[ContentService](https://developers.google.com/apps-script/guides/content)可以返回 JSON 响应，因此可以在不使用隐藏 iframe 的情况下发出 ajax 请求。作为原始解决方案的文章作者，我[发布了该技术的更新版本，其中包括一个 ajax 示例](http://mashe.hawksey.info/2014/07/google-sheets-as-a-database-insert-with-apps-script-using-postget-methods-with-ajax-example/)

用户可能还想考虑切换到这个新版本，因为它利用了其他新的 Google Apps 脚本服务，特别是：

*   使用[LockService](http://googleappsdeveloper.blogspot.co.uk/2011/10/concurrency-and-google-apps-script.html)防止并发写访问；和
*   切换到新的[PropertiesService](http://googleappsdeveloper.blogspot.co.uk/2014/02/more-apps-script-apis-and-features.html)来存储脚本数据

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-04-03T02:08:16.143

我将向您展示将数据发送到没有 AJAX 的 Google SpreadSheet 的简单方法，既不是 Google Form，也不是 PHP……只是 Google SpreadSheet 和 HTML，甚至是 Android。

1.  创建一个新的 Google 电子表格。
2.  打开工具/脚本编辑器

您只需要编辑器中的两个文件一个 HTML 和一个 Code.gs：

举个例子：

3.  转到文件/新 HTML 名称此文件=Index.html：

    ```
    <!DOCTYPE html>
    <html>
    <head>
    <base target="_top">

    <script>
    function Enviar(){

    var txt1=document.getElementById("txt1").value;
    var txt2=document.getElementById("txt2").value;
    var txt3=document.getElementById("txt3").value;
    google.script.run.doSomething(txt1,txt2,txt3);
    }
    </script>
    </head>

    <body>
    Prueba de Envio de informacion<br>
    <input type="text" value="EMAIL" name="txt1" id="txt1"><br>
    <input type="text" value="CEDULA" name="txt2" id="txt2"><br>
    <input type="text" value="NOMBRE" name="txt3" id="txt3"><BR>
    <Button name="btn1" onClick="Enviar();">Enviar</button>
    </body>

    </html> 
    ```

有 3 个字段要发送：EMAIL、CEDULA、NOMBRE

4.  在同一个 ScriptEditor 中，转到 de Code.gs 文件并键入：

    ```
    function doGet() {
    return HtmlService.createHtmlOutputFromFile('Index')
    .setSandboxMode(HtmlService.SandboxMode.IFRAME);
    }

    function doSomething(s1,s2,s3){

    Logger.log('datos:'+s1+"  "+s2+"  "+s3);
    var enlace="https://docs.google.com/spreadsheets/d/
    1XuAXmUeGz2Ffr11R8YZNihLE_HSck9Hf_mRtFSXjWGw/edit";
    var ss = SpreadsheetApp.getActiveSpreadsheet();
    var ss = SpreadsheetApp.openByUrl(enlace);
    var sheet = ss.getSheets()[0];
    sheet.appendRow([s1, s2, s3]);
    Logger.log(ss.getName());
    } 
    ```

enlace 是您的电子表格的网址

5.  发布为应用程序并获取新脚本的 url。现在您可以将此 url 用作嵌入到您的 HTML 应用程序或 android 应用程序中。而已。将要求用户获得打开此脚本的权限

# linux - 这些 LAMP 权限是否安全？

> ID：10000023
> 
> 赞同：0
> 
> 时间：2012-04-03T19:26:57.033
> 
> 标签：linux, apache, security, ubuntu, permissions

我有一个 LAMP 服务器，我在其中运行以下命令来设置 /var/www 中文件的权限：

```
groupadd web
usermod -a -G web my_user
chown -R root:web /var/www
chmod -R 775 /var/www
chmod -R g+s /var/www 
```

我的目标是让“web”组的任何成员都可以写入所有文件。是否有一种安全的方法可以在不更改文件所有权的情况下允许文件上传（例如在 Wordpress 中）？注意：这是一个私人服务器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T12:56:34.433

仅对目录应用权限的一种方法是使用该`find`命令。例如：

```
# Set the owner and group on everything.
chown -R root:web /var/www

# Make *directories* read/write/execute and set the `sgid` bit.
find /var/www -type d -print | xargs chmod g+rwxs 
```

您不想运行`chmod -R 775 /var/www`，因为这将使您的所有文件都可执行，这可能不是您想要的。

# javascript - Handlebars EACH 迭代器错误

> ID：10000024
> 
> 赞同：0
> 
> 时间：2012-04-03T19:26:57.520
> 
> 标签：javascript, handlebars.js

我是 Handlebars 的新手，虽然我找到了一种解决方法，但我想知道为什么一个注册的助手可以工作而一个不能。不起作用的示例是来自 HB 文档的示例。

HTML：

```
<ul class="global-nav clearfix">
  {{#each data}}
 <li><a href="{{href}}">{{text}}</a></li>
 {{/each}}
</ul>
...
<ul class="content-nav clearfix">
  {{#each data}}
  <li><a href="{{href}}">{{text}}</a></li>
  {{/each}}
</ul> 
```

数据：

```
var nav = [
  {
    name: 'global',
    selector: $('.global-nav'),
    data: [
      {
        text: 'Page 1',
        href: 'page1.html'
      }, {
        text: 'Page 2',
        href: 'page2.html'
      }
    ],

    name: 'content',
    selector: $('.content-nav'),
    data: [
      {
        text: 'Section 1',
        href: '#section1'
      }, {
        text: 'Section 2',
        href: '#section2'
      }
    ]
  }
]; 
```

编译器：

```
$.each(nav, function() {
  var obj = this,
      src = obj.selector.html(),
      template = Handlebars.compile(src),
      html = template(obj.data);

  obj.selector.html(html);
}); 
```

HB 助手（不起作用 - 上下文未定义）：

```
Handlebars.registerHelper('each', function(context, options) {
  var ret = "";

  for(var i=0, j=context.length; i<j; i++) {
    ret = ret + options.fn(context[i]);
  }

  return ret;
}); 
```

HB Helper（使用`this`而不是上下文工作）：

```
Handlebars.registerHelper('each', function(context, options) {
  var ret = "";

  for(var i=0, j=this.length; i<j; i++) {
    ret = ret + options.fn(this[i]);
  }

  return ret;
}); 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T09:33:37.620

在查看 JS 的其余部分之前，我能否指出 JSON 看起来是错误的。

名称、选择器和数据在您的 JSON 中第二次出现时会被覆盖。如果这只是因为粘贴到 SO 时省略了一些位，那么请忽略我；o)

但如果那*是*真正的 JSON，那么在查看任何功能性内容之前需要对其进行更改

```
<script>
var nav = [
{
  name: 'global',
  selector: $('.global-nav'),
  data: [
    {
      text: 'Page 1',
      href: 'page1.html'
    }, {
      text: 'Page 2',
      href: 'page2.html'
    }
  ]
}, // this line 
{  // and this line added
  name: 'content',
  selector: $('.content-nav'),
  data: [
    {
      text: 'Section 1',
      href: '#section1'
    }, {
      text: 'Section 2',
      href: '#section2'
    }
  ]
}
];
</script> 
```

# ios - 有没有办法将 MKMapView 地图设置为低于 1 的 alpha 并将其标记设置为 1？

> ID：10000030
> 
> 赞同：4
> 
> 时间：2012-04-03T19:27:30.390
> 
> 标签：ios, mkmapview, mkannotationview

我想要一张褪色的地图，但带有完全不透明的标记。这可能吗？

我在我的 XIB 中将地图设置为 0.5 不透明度，但没有看到以编程方式更改 alpha 的方法（添加到添加的标记或 viewForAnnotation 方法）。

# visual-studio-2010 - 如何在 Visual Studio 的即时窗口中执行 500 个相同的分配？

> ID：10000031
> 
> 赞同：3
> 
> 时间：2012-04-03T19:27:37.830
> 
> 标签：visual-studio-2010

我终于设法重现了一个非常难以捉摸的错误。我已将 Visual Studio 附加到该过程。为了进一步调试它，我需要对集​​合中大约 500 个元素执行相同的分配，有点像这样：

```
for (int i = 0; i < coll.Length; i++)
    coll[i].Something = coll[i].Other; 
```

`for`但是，在即时窗口中是不合法的。也不是一次性粘贴多个语句。有没有一种不涉及使用 AutoHotkey 之类的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-03T19:35:29.543

我认为在即时窗口中执行类似的操作不是一个好主意 - 您可能希望多次重现该错误，因此您需要一遍又一遍的声明。最好尝试创建一个自动测试，将上述语句作为测试数据准备的一部分。

# jquery - 使用 jQuery 向右/向左滑动表格

> ID：10000033
> 
> 赞同：0
> 
> 时间：2012-04-03T19:27:46.377
> 
> 标签：jquery, html-table, slide

我将通过`AJAX`aka获得一个表格，`jQuery.getJSON`具体取决于表格应该向右或向左滑动之前或之后的数据。我是 jQuery 的绝对初学者。Normaly 我会用*普通*的javascript 来做，但我想学习 jQuery。

为了让两张桌子滑动，我尝试了[这个答案](https://stackoverflow.com/questions/596608/jquery-slide-right-to-left)中的代码，我也尝试了[这个](https://stackoverflow.com/questions/4229422/jquery-slideright-effect)。

但这一切并没有下滑。不知道为什么。

我的下一个尝试是应用`float:left`到第一个表并设置，`width`但在这种特殊情况下，我在填充或边距方面遇到了一些问题。也许与我正在使用的模板有关。

但是，我怎样才能设法将新内容从右到左滑入表格中，反之亦然？

* * *

```
 <div class="content">
    <script type="text/javascript">
function load(url) {
    document.body.style.cursor='wait';
    jQuery.getJSON(url, function(data) {
        document.body.style.cursor='default';
        var html = "";
        var yes=0;
        for(var i=0;i<data['data'].length;i++)
            if(data['data'][i].state)
                yes++;

        var nav=document.getElementsByClassName('quick-nav')[0].getElementsByTagName('a');
        nav[0].href=data['navi']['last'];
        nav[1].href=data['navi']['next'];

        html+='<table class="Status" cellspacing="0">';
        html+='<tr><th style="width:120px;">Name</th><th style="width:120px;">Vorname</th><th>zugesagt</th><th style="width:100px;">&nbsp;</th></tr>';

        for(var i=0;i<data['data'].length;i++) {
            var user=data['data'][i];
            var status=user.state?"ja":"nein";
            html+='<tr class="'+(user.default?'':'un')+'regel"><td>'+user.lastname+'</td><td>'+user.firstname+'</td><td><img src="/images/'+status+'.png" alt="" title="'+status+'"/>'+status+'</td><td class="'+status+'">&nbsp;</td></tr>';
        }

        html+='</table>';

        document.getElementsByClassName('teilnahme-liste')[0].innerHTML+=html;
    });
}
</script>
<div class="quick-nav">
  <a href="/path/10.04.2012" onclick="load(this.href); return false;">&laquo; Woche früher</a>
  <a href="/path/24.04.2012" onclick="load(this.href); return false;" style="float:right;">Woche später &raquo;</a>
</div>
<div class="teilnahme-liste">
    <h2>...</h2>
  <style type="text/css">
.Status img {
    line-height: 1em;
    margin: -4px 0.4em 0 0;
    vertical-align: middle;
}
</style>
  <table class="Status" cellspacing="0">
    <tr>
      <th style="width:120px;">Name</th>
      <th style="width:120px;">Vorname</th>
      <th>zugesagt</th>
      <th style="width:100px;">&nbsp;</th>
    </tr>
    <tr class="regel">
      <td>Mustermann</td>
      <td>Max</td>
      <td><img src="/images/ja.png" alt="" title="ja"/>ja</td>
      <td class="ja">&nbsp;</td>
    </tr>
    <tr class="regel">
      <td>Müller</td>
      <td>Lieschen</td>
      <td><img src="/images/nein.png" alt="" title="nein"/>nein</td>
      <td class="nein">&nbsp;</td>
    </tr>
    <tr class="unregel">
      <td>Schmitt</td>
      <td>Tobias</td>
      <td><img src="/images/ja.png" alt="" title="ja"/>ja</td>
      <td class="ja">&nbsp;</td>
    </tr>
  </table>
</div><input type="submit" name="op" value="Speichern" class="form-submit" />  </div>
</div>
  </div>

    </div></div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-03T21:06:06.747

这样的事情呢？它只使用 CSS 和 jQuery（没有 jQuery UI 效果）。

[http://jsfiddle.net/u8mkb/3/](http://jsfiddle.net/u8mkb/3/)

```
$(document).ready(function() {
 $("#btnTest").click(function() {
    $("#state-holder").slideBabySlide(function() {});
 });
});

$.fn.slideBabySlide = function(callback) {
return this.each(function() {
    var $this = $(this);

    $this.animate({ opacity: 0, left: '-700px' }, 200, function() {
        $(this).css("left", 700);

        $("#whatever").show();

        $(this).animate({ opacity: 1, left: '0px' }, 300, function() {

            if ($.isFunction(callback)) callback();
        });
    });
});
}; 
```

​ 使用 table 而不是 div 更新 - [http://jsfiddle.net/u8mkb/4/](http://jsfiddle.net/u8mkb/4/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T10:10:16.387

这是我的解决方案。请注意，我使用德语单词 neu=new 和 alt=old：

```
var neu=jQuery(jQuery(".Status")[1]);
var alt=jQuery(jQuery(".Status")[0]);
alt.css({ opacity: 1, left: '0px'});
neu.css({ opacity: 1, left: '700px'});
// move the element higher
neu.css("margin-top",(alt[0].offsetTop-neu[0].offsetTop)+"px");

neu.animate({ opacity: 1, left: '0px' }, 400);
alt.animate({ opacity: 0, left: '700px' }, 400, null, function(){
    alt.remove();
    neu.css("margin-top","");
}); 
```

我还添加了这一行 css：

```
.Status {
    position:relative;
} 
```

# c# - 当嵌入其中的表单关闭时如何关闭选项卡？

> ID：10000045
> 
> 赞同：1
> 
> 时间：2012-04-03T19:28:56.193
> 
> 标签：c#, winforms

我的表单嵌入在标签页的顶部。当我关闭标签页顶部的表单时，如何也关闭标签页？

当我将表单放在标签页上时的代码更像这样：

```
client c = new client(car_name, owner);   //here client is another winform class
c.TopLevel = false;
c.Visible = true;
c.BackColor = Color.Ivory;
c.FormBorderStyle = FormBorderStyle.None;
c.Dock = DockStyle.Fill;
tabControl1.TabPages[tab_index].Controls.Add(c); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-03T19:34:57.267

使用 FormClosing 事件：

```
private void ClientForm_FormClosing(object sender, FormClosedEventArgs e)
    {
      ((TabControl)((TabPage)this.Parent).Parent).TabPages.Remove((TabPage)this.Parent);
    } 
```

# php - .htaccess 将 .js 文件视为 php

> ID：10000049
> 
> 赞同：0
> 
> 时间：2012-04-03T19:29:10.220
> 
> 标签：php, .htaccess

我编写了一个非常简单的 MVC FW，因此所有请求都被路由到索引文件，并且索引文件将请求分派给控制器。

我有以下.htaccess：

```
RewriteEngine On
RewriteBase /SlotDemo
RewriteCond %{REQUEST_FILENAME} -s [OR]
RewriteCond %{REQUEST_FILENAME} -l [OR]
RewriteCond %{REQUEST_FILENAME} -d

RewriteRule ^.*$ - [NC,L]
RewriteRule ^.*$ index.php [NC,L] 
```

它工作得很好，但由于某种原因，它试图路由我的 .js 文件，就好像它们是 php 文件一样（尝试将它们路由到 index.php，这当然会导致错误）。

我应该添加/删除什么以使其像对待 css 文件一样对待“.js”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-03T19:37:19.590

您可以像这样轻松地将这两个规则合并为一个：

```
# If the request is not for a valid directory
RewriteCond %{REQUEST_FILENAME} !-d
# If the request is not for a valid file
RewriteCond %{REQUEST_FILENAME} !-f
# If the request is not for a valid link
RewriteCond %{REQUEST_FILENAME} !-l
# forward the URI to front controller index.php 
RewriteRule ^ index.php [L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-03T19:59:16.133

CSS 和 JavaScript 文件应该被平等对待，检查您的请求是否存在拼写错误或大小写差异。（例如：jQuery.js 与 jquery.js 不同）

# java - 是否有将 XML (LOM) 绑定到 XML+RDF 的 java 库？

> ID：10000064
> 
> 赞同：1
> 
> 时间：2012-04-03T19:30:55.117
> 
> 标签：java, xml, xslt, rdf

对于一个教育项目，我需要一些代码（如果存在）将 XML 文件（特别是 LOM 元数据，但只是 xml 很好）转换为 XML+RDF。

我需要它，因为我正在使用 RDF 存储（4store）来查询三元组并使搜索速度更快。

我读到使用 XSLT 可以将任何 xml 转换为另一个 xml，所以如果您知道有一个实际的类、库或代码，请告诉我。

谢谢你们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-12T05:37:24.770

回答我自己的问题..

我正在为 LOM 文件使用键/值绑定。所以，这部分元数据：

```
 <general>
    <identifier xmlns="http://ltsc.ieee.org/xsd/LOM">
       <catalog>oai</catalog>
       <entry>oai:archiplanet.org:ap_44629</entry>
    </identifier> 
```

目录和条目将像这样转换：

s = 我的图表的 URI，它包含我的文件名或标识符。

p = "lom.general.identifier.catalog"

v = "oai"

,,,,,,

s = 我的图表的 URI，它包含我的文件名或标识符。

p = "lom.general.identifier.entry"

v = "oai:archiplanet.org:ap_44629"

因此，它会为 RDF 文件生成所有三元组。我认为这种方法将有助于查询特定的值或属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T11:23:51.137

我的建议是使用软件库将 XML 转换为 RDF/XML，因为映射可能并不简单，而且 RDF/XML 具有不同的 XML 语义。

有大量不同的 RDF API 用于不同的技术栈，包括

dotNetRDF、耶拿、芝麻、ARC、雷德兰

[http://semanticweb.org/wiki/Tools](http://semanticweb.org/wiki/Tools)

您还需要定义如何将 LOM 元数据序列化为 RDF。这里有一篇很好的文章：

[http://www.downes.ca/xml/rss_lom.htm](http://www.downes.ca/xml/rss_lom.htm)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-10T18:50:07.830

IEEE LOM 不是简单的结构。它包含分层分类法，在映射时应考虑到这些分类法。[在这里](http://data.opendiscoveryspace.eu/ODS_LOM2LD/ODS_SecondDraft.html)，您可以找到有关如何将每个 IEEE LOM 元素映射为 RDF 的说明（如果是这种情况）。

关于转换，您可以使用 XML java 库读取 XML 文件，并根据我提到的本体使用 Jena 创建最终的 RDF/XML 文件。lom 本体可在[此处获得](http://lov.okfn.org/dataset/lov/vocabs/lom)

# javascript - 扩展javascript函数范围

> ID：10000069
> 
> 赞同：4
> 
> 时间：2012-04-03T19:31:17.377
> 
> 标签：javascript, dynamic, scope

是否可以动态扩展javascript函数范围？我尝试了以下但没有成功：

```
function foo()
{
    var bar = 12;
    return function(x)
    {
        return eval(x);
    }
}

var e = foo();

console.log(e("bar"));           // 12
console.log(e("bar = 42;"));     // 42
console.log(e("bar"));           // 42
console.log(e("var baz = 99;")); // undefined
console.log(e("baz"));           // ReferenceError: baz is not defined 
```

但是，如果我`var`从该行中删除，`baz = 99`则 baz 变量将变为全局变量（这对我来说非常有意义）：

```
...
console.log(e("baz = 99;"));     // 99
console.log(e("baz"));           // 99
console.log(baz);                // 99 (so baz is just a global) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-03T20:00:10.937

每次调用`e("var baz = 4")`时，它都会在该函数调用的堆栈上创建一个变量，因此下次调用它时它将不可用。

如果您需要将变量动态添加到范围，我会使用 Rayno 的建议，使用地图。[http://jsfiddle.net/UVSrD/](http://jsfiddle.net/UVSrD/)

```
function foo()
{
    var scope = {};
    return function(x)
    {
        return eval(x);
    }
}

var e = foo();

console.log(e("scope.bar = 12")); // 12
console.log(e("scope.bar")); // 12
console.log(e("scope.baz = 14")); // 14
console.log(e("scope.baz;")); // 14
// Not a global
console.log(typeof scope) // undefined 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-03T19:35:38.780

您正在使用以下代码创建一个闭包：

```
function foo()
{
    var bar = 12;
    return function(x)
    {
        return eval(x);
    }
} 
```

当您传入 bar 时，您会覆盖已经启动到 12 的 bar 变量。我不确定您要完成什么，但使用闭包将保留外部函数变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-03T19:54:31.080

eval 将在它被调用的任何地方运行。您看到的行为是因为在这一行：

```
console.log(e("var baz = 99;")); // undefined 
```

您在返回函数的本地范围内创建一个 var baz = 99 。var name = value 的返回值；什么都不是，你得到未定义的。当您随后致电时

```
console.log(e("baz"));           // ReferenceError: baz is not defined 
```

您返回一个未定义 baz 的新函数。

这有点酷：[http ://www.bennadel.com/blog/1926-Exploring-Javascript-s-eval-Capabilities-And-Closure-Scoping.htm](http://www.bennadel.com/blog/1926-Exploring-Javascript-s-eval-Capabilities-And-Closure-Scoping.htm)

# android - 如何在jax-ws中处理用户名和密码的android请求

> ID：10000072
> 
> 赞同：0
> 
> 时间：2012-04-03T19:31:30.920
> 
> 标签：android, web-services, ksoap2

我尝试创建web服务，android appliaction的webservice客户端代码如下：

```
String SOAP_ACTION = "";
String METHOD_NAME = "operation1";
String NAMESPACE = "http://service.livebackup.com/";
String URL = "http://192.168.1.3:8084/test/webService?wsdl";

Button signin;
Thread t;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    signin = (Button) findViewById(R.id.btn_sign_in);
    signin.setOnClickListener(new OnClickListener() {
          public void onClick(View v) {
                showDialog(0);
                t=new Thread() {
                    public void run() {
                            tryLogin();
                      }

                };
          t.start();
          }
    });

}

private void tryLogin() {
    // TODO Auto-generated method stub
    EditText etxt_user = (EditText) findViewById(R.id.txt_username);
    EditText etxt_pass = (EditText) findViewById(R.id.txt_password);
    String username = etxt_user.getText().toString();
    String password = etxt_pass.getText().toString();

    callWebService(username,password);
}

private void callWebService(String username, String password) {
    // TODO Auto-generated method stub

    //String result = "ishan";
     try {
         int no=2;
         SoapObject request = new SoapObject(NAMESPACE,METHOD_NAME);
      AndroidHttpTransport androidHttpTransport = new AndroidHttpTransport(URL);

       PropertyInfo p1 = new PropertyInfo();
       Check C = new Check();//use check KvmSerializable{
       C.UserName=username;
       C.PassWord=password;

       p1.setName("C");
       p1.setValue(C);
       p1.setType(C.getClass());
       request.addProperty(p1);
               SoapSerializationEnvelope envelope =new SoapSerializationEnvelope(SoapEnvelope.VER11);
           envelope.dotNet=false;
                       envelope.setOutputSoapObject(request);
                   androidHttpTransport.call(SOAP_ACTION, envelope);
                   Log.v("Ok","wait for response");
                   Object results =(Object)envelope.getResponse();

                   Log.v("Ok","Connection has response object" +results);

                   Log.v("Ok","jj");
                   //to get the data String resultData=result.getProperty(0).toString();
                   String temp = results.toString();

                   Log.v("Ok","Connection has response" +temp);
     }
     catch (Exception e) {
        // TODO: handle exception
            System.out.println("Error:" +e.getClass().getName()+":"+e.getMessage());

    }

} 
```

检查类如下：

```
public class Check implements KvmSerializable{

 public String UserName;
 public String PassWord;

 public Check(){}

 public Check(String userName, String passWord) {
        super();
        UserName = userName;
        PassWord = passWord;
    }

 @Override
public Object getProperty(int arg0) {
    // TODO Auto-generated method stub

     switch(arg0)
     {
     case 0:
         return UserName;
     case 1:
         return PassWord;
     }

    return null;
}

@Override
public int getPropertyCount() {
    // TODO Auto-generated method stub
    return 2;
}

@Override
public void getPropertyInfo(int index, Hashtable arg1, PropertyInfo info) {
    // TODO Auto-generated method stub

     switch(index)
     {
     case 0:
         info.type = PropertyInfo.INTEGER_CLASS;
         info.name = "UserName";
         break;
     case 1:
         info.type = PropertyInfo.INTEGER_CLASS;
         info.name = "PassWord";
         break;

     default:break;
     }

}

@Override
public void setProperty(int index, Object value) {
    // TODO Auto-generated method stub

    switch(index)
    {
    case 0:
        UserName = value.toString();
        break;
    case 1:
        PassWord = value.toString();
        break;
    default:
        break;
    }
}
} 
```

我的问题：我在服务器端使用 net beans jax-ws，如何处理来自 android ws -client 的用户名和密码请求，

我只完成了 request.addproperty("userName",username);

请帮忙..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T18:00:38.157

首先，在您的客户端中： `UserName`and`PassWord`是字符串，但您将它们视为 int。在`Check`课堂上这样做：

```
@Override
public void getPropertyInfo(int index, Hashtable arg1, PropertyInfo info) {
    switch(index) {
        case 0:
            info.type = PropertyInfo.STRING_CLASS;
            info.name = "UserName";
            break;
        case 1:
            info.type = PropertyInfo.STRING_CLASS;
            info.name = "PassWord";
            break;
        default:
            break;
} 
```

`wsdl`在 URL 字符串的末尾删除：

```
String URL = "http://192.168.1.3:8084/test/webService/"; 
```

在您的服务器中：查看[http://www.ibm.com/developerworks/webservices/library/ws-android/index.html](http://www.ibm.com/developerworks/webservices/library/ws-android/index.html)

希望能帮助到你。

# haskell - 选择哪种 FRP 包？

> ID：10000074
> 
> 赞同：27
> 
> 时间：2012-04-03T19:31:51.743
> 
> 标签：haskell, frp, reactive-banana

我刚刚开始研究 Haskell 中的函数响应式编程世界，我想在反应设置中尝试 GUI 编程（使用 gtk，因为大量绑定）。

现在，我一直在研究 Grapefruit、Reactive-Banana 和 Buster，我想要任何关于使用任何一种或其他包装的快乐/恐怖的证明。

我只有这些初步意见：

*   我不介意自己将 FRP 包绑定到 gtk，因为我对抽象的后端想法（Grapefruit 有）有一种矛盾的感觉。

*   虽然我发现类型理论很有趣，但我也重视实际程序的简单编码，这似乎让 grapfruit-records 有点偏离..

也就是说，除非你们中的一些人当然说服我不这么想:-)

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-03T20:44:59.417

如果您只想使用常规 FRP，并与 GUI 框架保持密切联系，而不是对其使用“预制”抽象，那么在我看来，reactive-banana 是最可行的选择。它明确地针对与现有框架的绑定，专为“现实世界”使用而设计（不做任何过于实验性的、语义上可能导致问题的事情）等等。

您可以查看[reactive-banana-wx](http://hackage.haskell.org/package/reactive-banana-wx)以了解如何将基于事件的框架绑定到 reactive-banana。这很简单；我曾经写过一个到 Gtk2Hs 的快速绑定（不幸的是，现在丢失了代码），并且文件没有超过 50 行。这几乎是对 reactive-banana-wx 代码的直接音译。

我建议不要使用 Buster，原因很简单，因为它[自 2009 年以来就没有更新过](http://hackage.haskell.org/package/buster)，并且不是基于 GHC 7 构建的。

其他“面向生产”的 FRP 框架是[钠](http://hackage.haskell.org/package/sodium)（类似于 reactive-banana，但它具有[动态事件切换](http://apfelmus.nfshost.com/blog/2011/05/15-frp-dynamic-event-switching.html)（[即将进入 reactive-banana](http://apfelmus.nfshost.com/blog/2012/01/01-frp-api-0-5.html)，但尚未出现）和用于并发的“分区”概念；但是，它刚刚问世，尚未被采用）和[netwire](http://hackage.haskell.org/package/netwire)（箭头 FRP，与反应性香蕉和钠完全不同的生物）。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-04-03T20:49:20.210

我自己一直在试验 FRP，到目前为止，唯一对我有用的是 Reactive-Banana。我从来没有研究过 Grapefruit 或大多数其他的，因为它们已经过时了，而且似乎根本不会更新或支持它们。我确实简要地查看了 netwire，但坦率地说，其中所有的箭头理论让我感到厌烦，我在弄清楚如何做一些简单的事情时遇到了很多麻烦。

相比之下，我设法获得了一组用 Reactive-Banana 编写的非常好的 SDL 绑定，一路上只有一些小问题。支持 Reactive-Banana 的另一件事是 Heinreich 在社区中非常活跃，并且在遇到问题时经常会提供有用的答案。只要看看这里的各种反应性香蕉问题，你就会发现他已经回复了很多问题，而且他通常非常活跃于 Haskell 邮件列表中的 FRP 讨论。

# java - 尽管读取了 HTML 解析，但它们不返回任何数据

> ID：10000081
> 
> 赞同：0
> 
> 时间：2012-04-03T19:32:33.197
> 
> 标签：java, html, parsing, scope, jericho-html-parser

我遇到以下问题。我编写了一个读取已知结构的 html 文件的 java 片段（见下文）。我将其拆分为元素并使用 jericho 解析器获取它们的文本。然后，当我打印文本以确保检索正确时，我将每个元素添加到 ArrayList 中（**显然检索是正确的**）。您可以从 html 结构中猜到​​，如果 ArrayList 的元素 i 是 Email **，那么元素 i+1 就是 value**。我认为这是一个范围问题，但无法弄清楚。你能帮我吗？我正在使用以下代码来获取值：

```
private static void setVariables() 
{
    count=0;
    for(String s:str)
    {

       if(s.contains("Email"))
       {
          email=getValue(email, count);

       }
     }      
}

private static String getValue(String var, int count) 
{
    var=str.get(count+1);
    count++;
    return var;

}

private static void getElementsText(Source source) 
{

    List<Element> elementListTd = source.getAllElements(HTMLElementName.TD);

    //Scroll through the list of elements "td" page
      int i=0;
    for (Element element : elementListTd) {
        if (element.getAttributes() != null) {
            String td = element.getAllElements().toString();
            String tag = "td";
         //   System.out.println("TD: " + td);
          //  System.out.println(element.getContent());
            String contentsAttributes = element.getTextExtractor().toString();
          //  System.out.println("line "+i+" "+contentsAttributes);
            if(!contentsAttributes.isEmpty())
            {   
            str.add(contentsAttributes);
            }

        }
    }

    str.add(" ");
    setVariables();
}

public static void main(String[] args) throws FileNotFoundException, IOException 
{

  FileReader fr=new FileReader("32EPS 2012-ABSTRACT ~ 1333134955.html");
  BufferedReader br=new BufferedReader(fr);

  getTextFromFile(br);
  Source source = new Source(html_txt);
  getElementsText(source);

} 
```

HTML：

```
<tr><td class='text11' nowrap>Email</td><td class='text11'>peraueb@dummy.com<td></tr>
<tr><td class='text11' nowrap>Gender</td><td class='text11'>Mr<td></tr> 
```

# javascript - 带参数的 Javascript 事件处理程序

> ID：10000083
> 
> 赞同：114
> 
> 时间：2012-04-03T19:32:36.860
> 
> 标签：javascript, events, event-handling, handler

我想做一个`eventHandler`传递事件和一些参数的。问题是该函数没有获取元素。这是一个例子：

```
doClick = function(func){
    var elem = .. // the element where it is all about
    elem.onclick = function(e){
        func(e, elem);
    }
}
doClick(function(e, element){
    // do stuff with element and the event
}); 
```

`elem`必须在匿名函数之外定义。如何让传递的元素在匿名函数中使用？有没有办法做到这一点？

那么`addEventListener`呢？我似乎根本无法通过事件传递`addEventListener`我吗？

**更新**

我似乎用“这个”解决了这个问题

```
doClick = function(func){
    var that = this;
    this.element.onclick = function(e){
        func(e, that);
    }
} 
```

其中包含`this.element`我可以在函数中访问的内容。

**addEventListener**

但我想知道`addEventListener`：

```
function doClick(elem, func){
    element.addEventListener('click', func(event, elem), false);
} 
```

* * *

## 回答 #1

> 赞同：119
> 
> 时间：2012-04-03T19:41:07.750

我不完全了解您的代码要做什么，但是您可以利用函数闭包的优势在任何事件处理程序中使变量可用：

```
function addClickHandler(elem, arg1, arg2) {
    elem.addEventListener('click', function(e) {
        // in the event handler function here, you can directly refer
        // to arg1 and arg2 from the parent function arguments
    }, false);
} 
```

根据您的确切编码情况，您几乎总是可以使某种闭包保留对变量的访问。

根据您的评论，如果您要完成的是：

```
element.addEventListener('click', func(event, this.elements[i])) 
```

然后，您可以使用自执行函数 (IIFE) 来执行此操作，该函数在闭包执行时捕获您想要的参数并返回实际的事件处理函数：

```
element.addEventListener('click', (function(passedInElement) {
    return function(e) {func(e, passedInElement); };
}) (this.elements[i]), false); 
```

有关 IIFE 如何工作的更多信息，请参阅以下其他参考资料：

[Javascript在匿名函数中包装代码](https://stackoverflow.com/questions/19610586/javascript-wrapping-code-inside-anonymous-function/19610626#19610626)

[JavaScript 中的立即调用函数表达式 (IIFE) - 传递 jQuery](https://stackoverflow.com/questions/12332353/immediately-invoked-function-expression-iife-in-javascript-passing-jquery)

[JavaScript 自执行匿名函数有哪些好的用例？](https://stackoverflow.com/questions/23124067/what-are-good-use-cases-for-javascript-self-executing-anonymous-functions)

最后一个版本可能更容易看到它在做什么：

```
// return our event handler while capturing an argument in the closure
function handleEvent(passedInElement) {
    return function(e) {
        func(e, passedInElement); 
    };
}

element.addEventListener('click', handleEvent(this.elements[i])); 
```

* * *

也可以用于[`.bind()`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/bind)向回调添加参数。您传递给`.bind()`的任何参数都将添加到回调本身将具有的参数之前。所以，你可以这样做：

```
elem.addEventListener('click', function(a1, a2, e) {
    // inside the event handler, you have access to both your arguments
    // and the event object that the event handler passes
}.bind(elem, arg1, arg2)); 
```

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2018-02-27T18:40:54.610

这是一个古老的问题，但却是一个普遍的问题。所以让我在这里添加这个。

使用**[箭头函数语法](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/Arrow_functions)**，您可以更简洁地实现它，因为它是词法绑定的并且可以链接。

箭头函数表达式是正则函数表达式的语法紧凑替代方案，尽管它没有绑定到 this、arguments、super 或 new.target 关键字。

```
const event_handler = (event, arg) => console.log(event, arg);
el.addEventListener('click', (event) => event_handler(event, 'An argument')); 
```

**如果需要清理事件监听器：**

```
// Let's use use good old function sytax
function event_handler(event, arg) {
  console.log(event, arg);
}

// Assign the listener callback to a variable
var doClick = (event) => event_handler(event, 'An argument'); 

el.addEventListener('click', doClick);

// Do some work...

// Then later in the code, clean up
el.removeEventListener('click', doClick); 
```

**这是疯狂的单线：**

```
// You can replace console.log with some other callback function
el.addEventListener('click', (event) => ((arg) => console.log(event, arg))('An argument')); 
```

**更温顺的版本**：更适合任何理智的工作。

```
el.addEventListener('click', (event) => ((arg) => {
  console.log(event, arg);
})('An argument')); 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2015-01-05T13:54:51.723

您可以尝试使用 bind 方法，我认为这可以实现您的要求。如果没有别的，它仍然非常有用。

```
function doClick(elem, func) {
  var diffElem = document.getElementById('some_element'); //could be the same or different element than the element in the doClick argument
  diffElem.addEventListener('click', func.bind(diffElem, elem))
}

function clickEvent(elem, evt) {
  console.log(this);
  console.log(elem); 
  // 'this' and elem can be the same thing if the first parameter 
  // of the bind method is the element the event is being attached to from the argument passed to doClick
  console.log(evt);
}

var elem = document.getElementById('elem_to_do_stuff_with');
doClick(elem, clickEvent); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-06-16T08:48:18.933

鉴于对原始问题的更新，似乎在传递事件处理程序时上下文（“this”）存在问题。这里解释了基础知识，例如 [http://www.w3schools.com/js/js_function_invocation.asp](http://www.w3schools.com/js/js_function_invocation.asp)

您的示例的简单工作版本可以阅读

```
var doClick = function(event, additionalParameter){
    // do stuff with event and this being the triggering event and caller
}

element.addEventListener('click', function(event)
{
  var additionalParameter = ...;
  doClick.call(this, event, additionalParameter );
}, false); 
```

另请参阅 [Javascript call() & apply() vs bind()？](https://stackoverflow.com/questions/15455009/javascript-call-apply-vs-bind)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-12-31T09:57:51.007

简短的回答：

```
x.addEventListener("click", function(e){myfunction(e, param1, param2)});

... 

function myfunction(e, param1, param1) {
    ... 
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-07-04T09:27:17.953

尝试，

```
const handleOnChange = (event, otherParameter) => {
    console.log(`${event.target.value}`);
    console.log(`${otherParameter}`);
}

<Select onchange= (event) => {
    handleOnChange(event, otherParameter);
}> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-03T19:50:19.740

`this`里面`doThings`是窗口对象。试试这个：

```
var doThings = function (element) {
    var eventHandler = function(ev, func){
        if (element[ev] == undefined) {
            return;
        }

        element[ev] = function(e){
            func(e, element);
        }
    };

    return {
        eventHandler: eventHandler
    };
}; 
```

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2016-11-16T13:30:04.680

```
let obj = MyObject();

elem.someEvent( function(){ obj.func(param) } );

//calls the MyObject.func, passing the param. 
```

# wpf - WPF TabControl 与 Pages

> ID：10000092
> 
> 赞同：2
> 
> 时间：2012-04-03T19:33:24.567
> 
> 标签：wpf, tabcontrol

我正在创建一个资源密集型仪表板应用程序，该应用程序将具有许多数据可视化领域。我认为最好使用框架并使用 WPF 页面一次加载所需的页面。这些页面也会有不同的数据上下文、安全限制等。但是，另一位开发人员说我可以使用 TabControl 完成同样的事情。

TabControl 是否在应用程序启动时一次加载所有选项卡中的所有项目？或者，我可以像 WPF 页面一样根据需要延迟加载它们（页面仅在导航到时加载内容）？此外，您可以为 TabControl 中的每个项目设置不同的数据上下文吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-03T19:51:10.190

在 WPF 中，您可以使用 UI 虚拟化，这意味着只有可见控件被初始化和呈现。据我所知，`TabControl`默认情况下不支持 UI 虚拟化，但也许您可以手动添加它或使用其他控件。也许您想看看下面的[文章](http://msdn.microsoft.com/en-us/library/cc716879.aspx)，其中介绍了一些性能提示。还提到 UI 和数据虚拟化之间存在差异。不显示控件并不意味着底层数据不在内存中。您的所有绑定目标都将被加载，但不会呈现控件。

对于您的第二个问题：是的，每个人都`TabItem`可以拥有自己的`DataContext`. 如果您使用 TabControls`ItemsSource`绑定项目列表，则`DataContext`for each 将是列表中的`TabItem`一项。如果你手动添加`TabItems`，你可以`DataContext`这样设置：

```
<TabControl>
    <TabItem DataContext="{Binding Context1}" />
    <TabItem DataContext="{Binding Context2}" />
</TabControl> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-03T20:37:34.397

它比你想象的要复杂。如果您绑定到选项卡集合（想想 MVVM），那么选项卡只有在被选中时才会创建。如果您离开一个选项卡并返回一个集合，它会再次构建。如果您在 XAML 中创建选项卡，则这些选项卡都是在加载窗口时构建的。是的，每个选项卡可以有不同的 DataContext。我为延迟加载所做的是绑定到 TabItem 属性 IsSelected，如果它为 false，则类中的所有属性都只返回一个（快速）静态类型兼容的值。如果 IsSelected 更改为 true，则我加载实际值并调用 NotifyPropertyChanged（并保存实际值）。

如果我加载一个大对象并且一个选项卡是一个摘要，我会使用它。选项卡不会虚拟化，但如果您有很大的列表，那么请务必在选项卡中使用虚拟化。您可以使用 BackgroundWorker 创建属性，但一旦它返回并绑定该返回值，UI 就会锁定，直到 UI 控件被呈现。对我来说，单帧与标签的重用是 UI 的事情。只是为了分解代码，我通常会加载带有框架和页面的选项卡（并且我通常将数据传递到 ctor 中的页面以加载动态内容）。

# r - 对 R 中的所有参数进行约束的最小化

> ID：10000098
> 
> 赞同：4
> 
> 时间：2012-04-03T19:34:05.553
> 
> 标签：r

我想`Y = x1 + x2 + x3 + x4 + x5`使用普通最小二乘法最小化一个简单的线性函数，其约束条件是所有系数的总和必须等于 5。如何在 R 中实现这一点？我见过的所有软件包似乎都允许对单个系数进行约束，但我不知道如何设置影响系数的单个约束。我不依赖于 OLS；如果这需要迭代方法，那也很好。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-03T20:20:22.173

基本数学如下：我们从

```
mu = a0 + a1*x1 + a2*x2 + a3*x3 + a4*x4 
```

我们想找到`a0`-最小化和我们的响应变量`a4`之间的SSQ 。`mu``y`

如果我们将最后一个参数 (say `a4`) 替换为 (say)`C-a1-a2-a3`以遵守约束，我们最终会得到一组新的线性方程

```
mu = a0 + a1*x1 + a2*x2 + a3*x3 + (C-a1-a2-a3)*x4
   = a0 + a1*(x1-x4) + a2*(x2-x4) + a3*(x3-x4) + C*x4 
```

（注意`a4`已经消失了……）

像这样的东西（未经测试！）在 R 中实现它。

1.  原始数据框：

    ```
    d <- data.frame(y=runif(20),
                    x1=runif(20),
                    x2=runif(20),
                    x3=runif(20),
                    x4=runif(20)) 
    ```

2.  创建一个转换版本，其中除最后一列之外的所有内容都将最后一列“扫除”，例如`x1 -> x1-x4; x2 -> x2-x4; ...`

    ```
    dtrans <- data.frame(y=d$y,
                         sweep(d[,2:4],
                               1,
                               d[,5],
                               "-"),
                         x4=d$x4) 
    ```

3.  重命名为`tx1`, `tx2`, ... 以尽量减少混淆：

    ```
    names(dtrans)[2:4] <- paste("t",names(dtrans[2:4]),sep="") 
    ```

4.  系数总和约束：

    ```
    constr <- 5 
    ```

5.  现在用偏移量拟合模型：

    ```
    lm(y~tx1+tx2+tx3,offset=constr*x4,data=dtrans) 
    ```

使这个更通用并不难。

与简单地为固定优化程序指定约束相比，这需要更多的思考和操作。另一方面，（1）它可以很容易地被包装在一个方便的函数中；(2) 它*比*调用通用优化器效率更高，因为问题仍然是线性的（实际上比您开始使用的维度小一维）。它甚至可以用大数据来完成（例如`biglm`）。（实际上，我想到如果这是一个线性模型，你甚至不需要偏移量，尽管使用偏移量意味着你完成后不必计算`a0=intercept-C*x4`。）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-03T23:55:21.697

既然你说你对其他方法持开放态度，这也可以用二次规划（[QP](http://en.wikipedia.org/wiki/Quadratic_programming)）来解决：

最小化二次目标：平方误差之和，

受线性约束：您的权重总和必须为 5。

假设 X 是您的 n×5 矩阵，Y 是长度（n）的向量，这将解决您的最佳权重：

```
library(limSolve)
lsei(A = X,
     B = Y,
     E = matrix(1, nrow = 1, ncol = 5),
     F = 5) 
```

# iphone - 如何将 uint32_t 存储在 plist 中

> ID：10000102
> 
> 赞同：1
> 
> 时间：2012-04-03T19:34:13.163
> 
> 标签：iphone, ios, plist, uint32

我有一个 plist，我也想从我的服务器保存一些响应详细信息，但是变量的类型是 uint32_t 并且 plist 没有很多类型选项可供选择，除了数字 - 字符串 - 数组 - 字典等等

那么最好的做法是什么？转换？如果是这样，我将如何去做。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-03T19:42:27.287

解码时，`integer`将自动选择最佳尺寸，无论是 32 位还是 64 位。编码时，您应该专门调用`[NSNumber numberWithUnsignedInt: ...]`或类似的方法来创建`NSNumber`正确大小的。但是，它将被编码为`integer`无论如何。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-03T19:38:06.627

```
[ NSNumber numberWithInt: value ] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-03T19:37:52.570

如何将整数写入 plist 可以在这里找到：http: [//ipgames.wordpress.com/tutorials/writeread-data-to-plist-file/](http://ipgames.wordpress.com/tutorials/writeread-data-to-plist-file/)

# php - 如何使用zend mail来操作邮件消息？

> ID：10000103
> 
> 赞同：0
> 
> 时间：2012-04-03T19:34:16.847
> 
> 标签：php, zend-framework, zend-mail

这是一个示例电子邮件。我**想做的是使用zend邮件过滤掉带有特定标题和主题的电子邮件**，这是我的注册表达式

```
 $pattern_subject = "#delivery errors|delivery failure|delivery has failed|delivery notification|delivery problem|delivery status notif|failure delivery|failure notice|mail delivery failed|mail delivery system|mail status report|mail system error|mail transaction failed|mailserver notification|mdaemon notification|nondeliverable mail|returned email|returned mail|returned mail|returned to sender|returning message to sender|spam eater|undeliverable|undelivered mail|warning: message#i";

$pattern_body = "#554 delivery error|554 TRANSACTION FAILED|Action: failed|Delivery attempts will continue to be made for|delivery temporarily suspended|Invalid recipient|is not a valid mailbox|Mail rejected by Windows Live Hotmail for policy reasons|mailbox is full|Mailbox quota usage exceeded|mailbox unavailable|my badmailfrom list|no mailbox here by that name|no such address|No such user here|not yet been delivered|Over quota|PERM_FAILURE: DNS Error: Domain name not found|Recipient address rejected|retry timeout exceeded|Status: 4.4.1|The account or domain may not exist, they may be blacklisted, or missing the proper dns entries.|The following address doesn't exist|The message that you sent was undeliverable to the following|The recipient name is not recognized|This Gmail user does not exist|This is a permanent error|Unrouteable address|unrouteable mail domain|User mailbox exceeds allowed size|User unknown in virtual alias table|User unknown#i"; 
```

一个用于主体，一个用于主体，我怎么能

1）使用它们来过滤邮件并仅获取与reg exp匹配的内容？

2）获取不同部分的邮件，我需要的是分开的

> 接收日期、标题、正文

这是我尝试过的代码（忽略了 imap 设置），但它只打印出标题而不是过滤。

```
foreach ($mail as $message) {   
foreach ($message->getHeaders() as $name => $value) {
    if (is_string($pattern_subject)) {
        echo "$name: $value\n";
        echo "<br>";
        }

}

} 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T06:12:02.333

此示例向您展示如何获取电子邮件部分，并按主题过滤消息，对`$body`.

```
/* @var $message Zend_Mail_Message */
    foreach ($mail as $i => $message) {
        if (!preg_match($pattern_subject, $message->subject)) {
            continue;
        }

        echo $message->date . "\n";
        echo $message->subject . "\n";
        $body = null;
        foreach (new RecursiveIteratorIterator($message) as $part) {
            if (strtok($part->contentType, ';') == 'text/plain') {
                $body = $part;
                break;
            }
        }
        echo $body."\n";
    } 
```

# android - 如何在 ArrayAdapter 中使用哈希图中的键和值？

> ID：10000108
> 
> 赞同：4
> 
> 时间：2012-04-03T19:34:40.650
> 
> 标签：android

我有一个带有键值对示例的哈希图：-

（msisdn，值）

43664xxxxxxx,2 43665xxxxxxx,3

现在我想在 ListView 中显示此信息，但我不知道如何将数据从 Hashmap 提供给 ArrayAdapter ？

这是我的适配器，注意我想用来自 Hashmap 的数据替换 myList 一个连接的键+值。

1.  将上面的 hashmap 传递给适配器，将 myList 替换为 hashmap

    `adapter=new ArrayAdapter(this,android.R.layout.simple_list_item_1,myList); setListAdapter(adapter);`

谢谢

没有 HASHMAP

```
packagelistmodified.org;

importjava.util.Arrays;
importjava.util.ArrayList;
importjava.util.HashMap;
importjava.util.List;
importjava.util.Map;

importandroid.app.ListActivity;
importandroid.os.Bundle;
importandroid.os.Handler;
importandroid.os.Message;
importandroid.view.View;
importandroid.widget.AdapterView;
importandroid.widget.ArrayAdapter;
importandroid.widget.ListView;
importandroid.widget.TextView;
importandroid.widget.AdapterView.OnItemLongClickListener;
importandroid.view.GestureDetector.OnGestureListener;
importandroid.view.GestureDetector;
importandroid.view.MotionEvent;
importandroid.widget.Toast;

publicclasslistmodifiedextendsListActivityimplements
OnGestureListener{
publicArrayList<String>myList=new
ArrayList<String>(Arrays.asList(items));
privateTextViewselection;//MAIN.xml
publicArrayAdapter<String>adapter;//myadapter
publicOnItemLongClickListeneritemDelListener;
privateGestureDetectorgestureScanner;
publicintlongClickedItem=0;//checkiflongClickisselectedor
not
privateStringitemSelected;//fordeletefunction
privatestaticfinalbyteUPDATE_LIST=100;
publicAdapterView<?>parent;//usedbyOnLitemLongClickListener
publicintposition;

//tieitemstoanarraylistcalledmyList
publicstaticString[]items={"lorem","ipsum","dolor",
"sit","amet",
"consectetuer","adipiscing","elit","morbi","vel",
"ligula","vitae","arcu","aliquet","mollis",
"etiam","vel","erat","placerat","ante",
"porttitor","sodales","pellentesque","augue","purus"};

@Override
publicvoidonCreate(Bundleicicle){
super.onCreate(icicle);

OnItemLongClickListeneritemDelListener=new
OnItemLongClickListener(){

//@Override
publicbooleanonItemLongClick(AdapterView<?>parent,Viewarg1,
intposition,longarg3){
//TODOAuto-generatedmethodstub
itemSelected=parent.getItemAtPosition(position).toString();
adapter.remove(itemSelected);
Toast.makeText(listmodified.this,"positionis:"+position,
Toast.LENGTH_SHORT).show();
myList.remove(this);//removethecurrentobject,positionthrows
anexception
adapter.notifyDataSetChanged();

returnfalse;
}};

setContentView(R.layout.main);

//DEFINEMYOWNVIEWTIETOARRAYLISTmyListWHICHCONTAINSSTRINGS
adapter=new
ArrayAdapter<String>(this,android.R.layout.simple_list_item_1,myList);
setListAdapter(adapter);

//AVIEWOFTHELISTNECESSARYFORDELETION

selection=(TextView)findViewById(R.id.selection);

//PARTOFLONGCLICKSELECTEDCODE
//CALLSIMPLEMENTEDMETHODS-detectgesturescheckingmylistitems
gestureScanner=newGestureDetector(this);
getListView().setOnTouchListener(newView.OnTouchListener(){
@Override
publicbooleanonTouch(Viewv,MotionEventevent){
returngestureScanner.onTouchEvent(event);
}
});

//UPDATEVIEWDELETEWHENONLONGCLICKISPRESSED
getListView().setOnItemLongClickListener(itemDelListener);

}

//LISTITEMPRESSCHECKING
publicvoidonListItemClick(ListViewparent,Viewv,
intposition,longid){
selection.setText(myList.get(position));
//checktoseeifLONGCLICKISPRESSED
if(longClickedItem!=-1){
Toast.makeText(listmodified.this,"Ashortclickdetected",
Toast.LENGTH_SHORT).show();

}
longClickedItem=0;
}

//IMPLEMENTEDBYGESTURE
@Override
publicbooleanonDown(MotionEventarg0){
//TODOAuto-generatedmethodstub
returnfalse;
}

@Override
publicbooleanonFling(MotionEvente1,MotionEvente2,float
velocityX,
floatvelocityY){
//TODOAuto-generatedmethodstub
returnfalse;
}

//CHECKSONLONGPRESSEVENTSSETLONGPRESSTO-1,
//COOLICANUSETHISTOSEEIFALONGCLICKWASSELECTEDLATERON

@Override
publicvoidonLongPress(MotionEvente){
//TODOAuto-generatedmethodstub
Toast.makeText(listmodified.this,"Alongclickdetected",
Toast.LENGTH_SHORT).show();

if(e.getAction()==MotionEvent.ACTION_DOWN)
{

longClickedItem=-1;

}

}

@Override
publicbooleanonScroll(MotionEvente1,MotionEvente2,float
distanceX,
floatdistanceY){
//TODOAuto-generatedmethodstub
returnfalse;
}

@Override
publicvoidonShowPress(MotionEvente){
//TODOAuto-generatedmethodstub

}

@Override
publicbooleanonSingleTapUp(MotionEvente){
//TODOAuto-generatedmethodstub
returnfalse;
}
privateHandlerupdateListHandler=newHandler(){
@Override
publicvoidhandleMessage(Messagemsg){
switch(msg.what){
caseUPDATE_LIST:
intposition=msg.arg1;
myList.remove(position);
adapter.notifyDataSetChanged();
Toast.makeText(listmodified.this,"OnSingleTapUp",
Toast.LENGTH_SHORT).show();
break;

}
;
};
};

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-03T19:54:17.460

> 我不知道如何将数据从 Hashmap 提供给 ArrayAdapter ？

使用`new ArrayList<String>(myHashMap.keySet())`，假设`myHashMap`是`HashMap<String, Something>`。

# ios - 在 Interface Builder 中使用 UIButton 创建自定义切换

> ID：10000120
> 
> 赞同：0
> 
> 时间：2012-04-03T19:35:25.833
> 
> 标签：ios, uikit, interface-builder

这可能吗？没有它似乎是粗制滥造的。

我正在尝试在 IB 中创建一个切换按钮（不是 UISwitch）。例如，静音按钮，静音时会显示声音被禁用，当您按下它时，该指示器会消失（但仍然是相同的底层图形），并且每次按下时都会在这些状态之间切换。

此功能可以使用 selected 属性来实现，但是您不能像在代码中那样更改 IB 中的 Selected AND Highlighted 属性，因此无论何时按下按钮，无论状态如何，突出显示的图像都是相同的，看起来可怕和故障。

有没有办法只用 IB 来解决这个问题，还是我必须制作一个自定义类以避免手动加载所有这些按钮？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-03T20:50:54.983

您是否考虑过将 UIButton 子类化以添加您需要的东西？

# java - 在没有 trait Object 的情况下在 Scala 中重用 Java 泛型集合

> ID：10000126
> 
> 赞同：1
> 
> 时间：2012-04-03T19:35:51.187
> 
> 标签：java, scala, generics, collections, traits

我正在尝试重用我编写的 Java 泛型集合，看起来很像这样：

```
public class Blah<T>
   implements List<T>
{
...
   public void test(T[] array) {
   ...
   }
...
} 
```

当从使用上述内容的 Scala 泛型集合中使用时，我收到编译错误，我注意到 Blah 类方法需要的不是 T，而是带有 java.lang.Object 的 T！

```
Object MyStaticObject {
   def test[T](array: Array[T]) = { 
      val x = new Blah[T]();
      x.test(array) // <- error here: Overloaded method with alternatives test[T with java.lang.Object] ... cannot be applied
} 
```

有没有办法避免这种情况而无需在 Scala 中重写 Blah 类？（这行得通，但我有太多这样的 Java 代码，而不是移植整个东西......）

也许某种隐含的定义可以起到拯救作用？谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-03T20:23:36.340

限制`def test[T <: AnyRef]` 可以解决问题。

没错，通用 java 方法不应该接受 ，例如`int[]`( `Array[Int]`) 参数。 `Blah[Int]`将被视为`Blah<Integer>`, `Array[Int]` is `int[]`, which is , which is not `Integer[]`。

# php - jQuery Droppable - 在元素被删除后创建更新语句

> ID：10000127
> 
> 赞同：0
> 
> 时间：2012-04-03T19:35:51.760
> 
> 标签：php, javascript, jquery, ajax, jquery-ui

我想在我的数据库中做一个更新语句，在一个元素被放置在一个 jQuery UI 可放置元素上之后。

```
$("#pictures th div").droppable({drop: function(ev, ui) { 
    alert('You filled this box with a picture');
    var this_id = $(ui.draggable).attr("alt");
    var draggableId = ui.draggable.attr("id"); 
} 
```

我知道如何获取我需要的信息（参见上面的代码），但是我现在如何将它们放入数据库中？

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-03T19:43:51.873

此时，您可以使用 jQuery 的 $.post() 方法发布到您编写的 PHP 文件。在 $.post() 中，您可以将想要写入数据库的 id 传递给您。

所以是这样的：

```
$.post("/save.php", { imageId: this_id, draggedId: draggableId }, function (data) {
    alert("success!");
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-14T14:49:24.160

将变量值发布到其他页面 lyk 这个：

```
 $.ajax({
 type: "POST",
 url: "data.php",
 data: "Cat=" + id + "&Wid=" + WID
 }); 
```

然后在 data.php 页面上获取值 lyk 这个：

```
 $Cat=$_POST['Cat'];
    $WID=$_POST['Wid']; 
```

只需使用插入查询将它们存储在数据库中，希望对您有所帮助。

# javascript - 奇怪的 js / canvas 问题 - 代码示例在本地不起作用

> ID：10000128
> 
> 赞同：0
> 
> 时间：2012-04-03T19:36:05.553
> 
> 标签：javascript, html, canvas

这是最好的 js 图形绘制东西 - [http://thejit.org/static/v20/Jit/Examples/Other/example2.html](http://thejit.org/static/v20/Jit/Examples/Other/example2.html)

它是如此令人印象深刻，以至于我想玩一下它，但是在下载了所有文件后，它就无法正常工作了。

所以我确实把这个`html`（连同所有其他文件）页面放在了网络服务器（码头）上，但仍然没有结果：

![http://i40.tinypic.com/35lhlxd.png](../Images/7aa24f4450b3da37f5c4c8de4b2e4e2a.png)

使用 Chrome 打开文件并正确添加`--allow-file-access-from-file`也不能解决问题

显然我做错了什么，但我不知道是什么，所以我将非常感谢任何输入。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T09:03:08.930

不知何故，从下载页面下载的 .zip 文件中提供的 html 文件与直接从在线示例页面下载的 html 文件不同（这个文件使用了**混淆**的（原文如此！）javascript 文件`jit-yc.js`来代替“正常”和**良好的文档** `jit.js`:)）。

所以，如果有人想尝试 JIT（好的图形绘制工具没有太多竞争 - [http://arborjs.org/](http://arborjs.org/)似乎是唯一的一个） - 使用官方下载链接是唯一有效的方法；）

# iphone - 是否有现有的 iOS 组件可以输入 UITextView？

> ID：10000135
> 
> 赞同：1
> 
> 时间：2012-04-03T19:36:56.257
> 
> 标签：iphone, ios, ipad, user-interface

> **可能重复：**
> [是否有与 NSTokenField 控件等效的 iPhone？](https://stackoverflow.com/questions/1307553/is-there-an-iphone-equivalent-to-the-nstokenfield-control)

我希望用户能够输入标签并使它们成为“单位”。下面的屏幕截图来自 OS X 上的 Sparrow.app，但它给出了我正在寻找的东西的想法。是否存在执行此操作的现有组件？搜索 UITextView 和标签并不会带来太多好处。

更新：哦，是的，StackOverflow 也这样做：

![所以例子](../Images/34331ec598dcd0355420039da4b0f9db.png)

![来自 Sparrow.app 的示例](../Images/70fef6e76d14edd433629a85abe8a632.png)

# python - 使用自定义 cmd 选项运行 web.py 应用程序

> ID：10000139
> 
> 赞同：2
> 
> 时间：2012-04-03T19:37:28.590
> 
> 标签：python, web.py

我想使用 web.py 为一些更大的库构建一个 http 接口，它还提供了一个带有可选参数的命令行脚本。

当我尝试结合 optparse 的简单 web.py 教程示例时，我遇到的问题是 web.py 总是将第一个 cmd 参数作为端口，这不是我想要的。有没有办法告诉 web-py 不要检查命令行参数。这是一个例子：

```
#!/usr/bin/env python
# encoding: utf-8
"""
web_interface.py: A simple Web interface

"""

import optparse
import web

urls = ("/.*", "hello")
app = web.application(urls, globals())

class hello:
    def GET(self):
        return 'Hello, world!\n'

if __name__ == "__main__":
    p = optparse.OptionParser()
    p.add_option('--test', '-t', help="the number of seed resources")
    options, arguments = p.parse_args()
    print options.test
    app.run() 
```

...我想按如下方式运行：

```
python web_interface.py -t 10 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-03T20:04:17.830

这有点骇人听闻，但我想您可以这样做：

```
import sys
...

if __name__ == "__main__":
    p = optparse.OptionParser()
    p.add_option('--test', '-t', help="the number of seed resources")
    options, arguments = p.parse_args()
    print options.test

    # set sys.argv to the remaining arguments after
    # everything consumed by optparse
    sys.argv = arguments

    app.run() 
```

# mysql - 为什么这个简单的查询需要永远？

> ID：10000141
> 
> 赞同：0
> 
> 时间：2012-04-03T19:37:31.170
> 
> 标签：mysql, subquery, where-in

为什么这个 MySQL 查询在一个有 17k 行的表上需要永远（并且永远不会完成）？

```
SELECT * FROM files_folders WHERE file IN (SELECT file FROM files_folders WHERE folder = 123); 
```

基本上，一个文件可以位于多个文件夹中（一个物理文件及其副本）。我正在尝试获取文件夹 123 中的所有文件。现在在我的示例中，文件夹 123 中有 2 个文件。ID #4222 和 ID #7121。但是这两个文件可能在其他文件夹以及文件夹 123 中。

我这样做是错误的方式还是我遗漏了什么？

**编辑**：这是表结构的示例。

```
+--------------+
| file | folder|
+------+-------+
| 1    | 1     |
| 2    | 1     |
| 1    | 2     |
| 3    | 2     |
| 4    | 3     |
+------+-------+ 
```

所以我想选择文件夹 1 中的所有文件（及其副本），这些文件将返回：

```
+--------------+
| file | folder|
+------+-------+
| 1    | 1     |
| 2    | 1     |
| 1    | 2     |
+------+-------+ 
```

因为文件 1 在文件夹 1 和 2 中。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-03T19:45:10.973

对于每个文件，MySQL 需要检查是否`ID`在子查询返回的结果中。它需要`O(N)`.

它需要为`N`文件完成。

所以你的查询的复杂性是`O(N^2)`. 17k ^ 2 = ~`4*10^8`所以大约需要一分钟，也许更短。

为什么您的查询不是

```
SELECT ID FROM files_folders WHERE Folder = 123 
```

?

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-03T20:02:38.753

使用自联接：

```
SELECT 
  ff.* 
FROM 
  files_folders AS ff
  INNER jOIN files_folders AS f ON f.ID=ff.ID
WHERE
  f.Folder=123
; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-04T06:14:35.740

为什么要使用子查询？我认为根本不需要。您可以直接从表中选择

```
SELECT * FROM files_folders WHERE Folder = 123 
```

第二件事：

> “因为文件也可以在另一个文件夹中”

使用子查询是什么意思？

# android - 以不同方式处理返回和主页按钮

> ID：10000143
> 
> 赞同：0
> 
> 时间：2012-04-03T19:37:45.237
> 
> 标签：android

我有一个有两个屏幕的应用程序，我们可以称它们为列表和详细信息。

如果用户在详细信息并按主页以最小化应用程序然后切换回来我想留在视图中并恢复，但如果他按返回我想返回列表，我想我可以保存“完成” - 按钮这样。但是......这样做的正确方法是什么？

目前我已经覆盖了 onPause 和 onSaveInstance 但似乎它们在两种情况下都被调用了。

我正在考虑像他一样覆盖 onKeyDown ；[How to control Activity flow - Back button vs Home button](https://stackoverflow.com/questions/3623704/how-to-control-activity-flow-back-button-versus-home-button)，但这似乎不是一种“好”的方式，所以我想我会检查其他人是否有其他想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-03T19:41:45.783

做两个活动，列表和细节。当您在详细信息活动中按返回键时，它将完成并显示列表活动。

# java - java/jdk 中的 MVC 示例

> ID：10000149
> 
> 赞同：-1
> 
> 时间：2012-04-03T19:38:03.103
> 
> 标签：java, model-view-controller

有人可以给我一个基于 MVC 设计模式的 java/jdk 库中的应用程序/框架/工具的示例吗？我最近在一次采访中被问到这个问题。我回答说大部分java swing组件都是基于MVC设计的。但面试官说他正在寻找比这更复杂的东西。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-03T19:42:17.077

如果您使用对象作为模型、jsps 作为视图、servlet 作为控制器，则可以将 Java 基础 Java EE 堆栈视为 MVC。

[Spring MVC](http://static.springsource.org/spring/docs/2.0.x/reference/mvc.html)将是基于 MVC 的流行库的另一个示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-03T20:02:21.137

Struts 可能是使用中最大的、最流行的纯 MVC 框架，尽管它正在经历它的时代，而更 AOP 的 SPRING 也已经存在。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T18:05:13.037

正如您所指出的，在谈论 JavaSE 时，MVC 框架是 Swing（或至少是接近它的东西）。我真的不明白他对“更复杂的东西”的意思，但还有其他选项，如 EclipseRCP。

Eclipse 是众所周知的 IDE，但基本上，它是一个构建在框架上的桌面应用程序，每个用户都可以使用它来构建他/她的自定义桌面应用程序，因为它是开源的。它比 Swing“更复杂”（尽管 Swing 足够复杂），因为它们是开箱即用的多层组合。从 OSGI 实现（这是最基本的软件）到顶层，您可以在其中找到视图、编辑器、透视图、命令、附加组件等结构。

一般来说，我们可以说在 EclipseRCP 中间层中，V 是 Eclipse SWT 库（组件），C 是 Eclipse JFace 库，M 是您自己的应用程序的模型。在顶层，我在上一段中提到的所有“复杂”结构（视角、视图、编辑器等）也是 C 的一部分，但处于更高的层次。

对于 JavaSE（不包括 Swing）的 MVC 框架，这是我能想到的最接近的事情。它的最后一个版本（Eclipse E4）已经很好地清理了复杂性，所以我不知道这是否“足够复杂”来回答这个问题。如果您想了解更多信息，请阅读[有关 Eclipse E4 的教程](http://www.vogella.de/articles/Eclipse4RCP/article.html)。

顺便说一下，使用 Netbeans 平台，您还可以按照 MVC 方法（或至少类似的方法）实现基于[桌面的应用程序，并且它基于 Swing。](http://platform.netbeans.org/tutorials/nbm-crud.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-03T19:44:00.663

[Apache Struts](http://struts.apache.org/)就是这种框架的一个例子。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-18T12:43:08.753

我过去也为 mvc 苦苦挣扎，现在我学到了很多，请参阅本教程[mvc 简单程序（添加两个数字）](http://padmanlabs.blogspot.in/2012/08/mvc-architecture-simple-java.html)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-03T19:51:16.463

Apache OFBiz，但我不建议将其用于商业用途。

# r - 关于根据给定的数据格式创建数据集

> ID：10000150
> 
> 赞同：0
> 
> 时间：2012-04-03T19:38:05.257
> 
> 标签：r

我也在学习使用 topicmodels 包和 R，并通过使用探索了它的示例数据集之一

> > str（测试数据）
> > 
> > 'data.frame'：3104 obs。5个变量：
> > 
> > $ Article_ID: int 41246 41257 41268 41279 41290 41302 41314 41333 41344 41355 ...
> > 
> > $ 日期 : chr "1-Jan-96" "2-Jan-96" "3-Jan-96" "4-Jan-96" ...
> > 
> > $ Title : chr “国家较小的监狱努力应对囚犯人数的激增” “联邦陷入困境，犹豫不决” “漫长而代价高昂的前奏对改变总统竞选的情节几乎没有影响” “波斯尼亚塞族的最高领导人现在受到来自内部的攻击“……
> > 
> > $ 主题 : chr “监狱被顽固的罪犯压得喘不过气来” “联邦预算僵局对各州的影响” “1996 年总统选举的竞争者” “从内部批评的波斯尼亚塞族领导人” ...
> > 
> > $主题代码：int 12 20 20 19 1 19 1 1 20 15 ...

如果我想在 R 中按照上述格式创建数据集，该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-03T22:50:40.917

`test.data`是一个 data.frame，是少数基本的 R 对象之一。您可能应该从这里开始：[http](http://cran.r-project.org/doc/manuals/R-intro.pdf) ://cran.r-project.org/doc/manuals/R-intro.pdf 。

一些用于创建 data.frames 的函数是`data.frame`, `read.table`, `read.csv`. 例如，对于其中的每一个，您都可以通过键入来访问他们的文档`?data.frame`。祝你好运。

# warnings - 警告：无法修改标头信息 - 标头已由（输出开始于 /home/

> ID：10000152
> 
> 赞同：5
> 
> 时间：2012-04-03T19:38:19.173
> 
> 标签：warnings, wordpress-theming

我创建了一个 wordpress 网站。它运行良好，但现在显示错误如下：

警告：无法修改标头信息 - 标头已由 /home/ 中的（输出开始于 /home/ ****** /public_html/wp-content/themes/ ***** *** /includes/classy-options-init.php:1）发送******* / public_html/wp-includes/pluggable.php 在第 866 行

什么是确切的问题请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-03T19:42:19.340

阅读有关如何解决此极其通用的错误消息的信息：

[https://wordpress.org/support/article/faq-troubleshooting/#how-do-i-solve-the-headers-already-sent-warning-problem](https://wordpress.org/support/article/faq-troubleshooting/#how-do-i-solve-the-headers-already-sent-warning-problem)

同样，这条消息几乎没有给我们任何东西。除了pluggable.php 中的# 行之外，问题还不如阅读“这不起作用”。尝试使用谷歌搜索“pluggable.php on line 866”以查看一些可能的原因，因为这就是您目前所要做的。

此外，请查看您的 Web 服务器（apache？）错误日志，看看您是否从中获得了更多信息。

最后，看看 SO 上涉及 pluggable.php 的其他问题。他们可能是也可能不是这个问题的骗子。例如：

[无法修改标头信息 - 标头已由...发送 WordPress 问题](https://stackoverflow.com/questions/7381661/cannot-modify-header-information-headers-already-sent-by-wordpress-issue)

# c# - 无法加载文件或程序集“ConsoleApplication1”

> ID：10000154
> 
> 赞同：0
> 
> 时间：2012-04-03T19:38:29.530
> 
> 标签：c#, visual-studio-2010

我刚刚打开一个新的 C# 项目，但是当我想编译它时，我给出了标题错误。我搜索此错误但没有找到任何结果。

* * *

我要做什么？

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace ConsoleApplication1
{
    class Program
    {
        static void Main(string[] args)
        {
            Console.WriteLine("hello world!");
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-03T20:02:02.620

*   尝试清理项目。
*   确保启动项未设置为不存在的 ConsoleApplication1。
*   无论您的项目的主要形式是什么，在解决方案资源管理器中右键单击它并选择“设置为启动...”。
*   确保 Program.cs（或 Program.vb）文件未尝试加载 ConsoleApplication1。

# macos - Snow Leopard 中的弹出框 UI

> ID：10000156
> 
> 赞同：1
> 
> 时间：2012-04-03T19:38:45.010
> 
> 标签：macos, user-interface, osx-snow-leopard

如何在 Snow Leopard 中获得[类似 popover的行为？](http://developer.apple.com/library/mac/#documentation/AppKit/Reference/NSPopover_Class/Reference/Reference.html)

![在此处输入图像描述](../Images/2ac856894ba4b00d3b162d9c958ebead.png)

`NSPopover`仅在 Lion 中可用，但是在 10.6 中是否有任何好的第三方库可以实现类似的行为？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-03T20:47:12.987

试试 Matt Gemmell 的 MAAttachedWindow。您可以在此页面上找到它：

[http://mattgemmell.com/source/](http://mattgemmell.com/source/)

Matt 通过 NSStatusItem 提供了一个项目的链接；修改它以适应您的想法可能不会太费力。

# r - 更干净地修改 R 中数据框中的列 - 可能使用 with() 或 apply()？

> ID：10000157
> 
> 赞同：1
> 
> 时间：2012-04-03T19:38:50.430
> 
> 标签：r, coding-style, apply

我理解 R 中重复事物的答案通常是“ `apply()`”而不是循环。对于我经常创建的一些讨厌的代码，是否有更好的 R 设计模式？

因此，从 HTML 中提取表格数据，我通常需要更改数据类型，并最终运行类似这样的操作，以将第一列转换为日期格式（从十进制），并将第 2-4 列从带有逗号千位分隔符的字符串转换比如“2,400,000”到数字“2400000”。

```
X[,1] <- decYY2YY(as.numeric(X[,1]))
X[,2] <- as.numeric(gsub(",", "", X[,2]))
X[,3] <- as.numeric(gsub(",", "", X[,3]))
X[,4] <- as.numeric(gsub(",", "", X[,4])) 
```

我不喜欢我在这里的左侧和骑行侧都重复了 X[,number]，或者我对 2-4 重复了基本相同的语句。

是否有一种非常 R 风格的方法可以减少 X[,2] 的重复性但仍然无循环？某种说法是“将其应用于第 2、3、4 列——将当前列重新分配给修改后的版本的函数？”

我不想创建一个完整的、可重复的清理函数，真的，只是一个快速的匿名函数，它可以减少重复。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-03T20:15:17.560

假设 X 是一个数据框，我会这样做：

```
X[2:4] <- lapply(X[2:4], function (x) as.numeric(gsub(",", "", x))) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-03T19:45:15.047

就像是

```
comma2numeric <- function(x) { as.numeric(gsub(",","",x)) }
X[,2:4] <- apply(X[,2:4],2,comma2numeric) 
```

是一个开始。 `transform`是一个很好的就地修改习语，但它使用名称而不是列号进行操作。

**编辑**：第 1 行缺少右括号

# amazon-web-services - 如果决策者没有运行会发生什么

> ID：10000161
> 
> 赞同：1
> 
> 时间：2012-04-03T19:39:08.217
> 
> 标签：amazon-web-services, amazon-swf

初始化工作流时，将调用[@Execute](http://docs.amazonwebservices.com/amazonswf/latest/awsflowguide/annotations.html#annotations.execute)任务，以便决策者可以决定任务流。

*   当决策程序未运行时会发生什么情况，SWF 是否可以启动决策程序并执行流程。
*   如果有多个决策者进程会发生什么，SWF 如何知道将请求处理到哪一个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-03T21:35:14.073

Amazon SWF 不需要决定由哪个决策者处理请求，因为您的工作是确保决策者正在运行并轮询新任务：

[http://docs.amazonwebservices.com/amazonswf/latest/developerguide/swf-dg-basic.html#swf-dev-comm-proto](http://docs.amazonwebservices.com/amazonswf/latest/developerguide/swf-dg-basic.html#swf-dev-comm-proto)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-15T06:55:22.463

```
What happens when a decider process is not running, can the SWF start the decider process and execute the flow. 
```

不，如果决策程序没有运行，工作流将根本不会启动。

```
What happens if there are multiple decider processes, how does SWF know which one to handle the request to. 
```

在启动工作流时，您创建要启动的决策程序/工作流的实例。这个实例实际上决定了调用哪个工作流。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-05T20:27:13.513

在实践中，我发现当决策者进程未运行时，有时工作流会进入“DecisionTaskStarted”状态，即使没有决策者接受决策任务。这使得工作流看起来没有运行。大概决策任务将超时，并且工作流将安排一个新的决策任务，该任务将被您的决策者拾取（如果它现在正在运行）。

如果您有多个决策者正在运行，那么首先获取决策任务的那个将处理它。如果您想将不同的决策任务分配给不同的决策者，请为工作流提供不同的“task_list”。具有“task_list”的决策者将仅对具有相同 task_list 的自己的工作流进行操作。

# r - 从 CRAN 中的 obliqueRF 包调用 obliqueRF 时出现错误，它可能是什么，或者我该如何进一步研究它？

> ID：10000164
> 
> 赞同：2
> 
> 时间：2012-04-03T19:39:13.960
> 
> 标签：r

***我玩了一段时间，并通过将 data.frame 更改为矩阵来修复它********

我加载了包并遵循了我运行的函数文档：

```
m.ob = obliqueRF(x=some.data.frame, y=as.factor(some.vector))
tests regularization parameter "lambda" for 10^(c(-5:5)) with separate explicit ridge regressions.
Error in is.nan(as.vector(x)) : 
default method not implemented for type 'list' 
```

我不确定为什么会发生这种情况，因为 some.data.frame （我检查过）是一个 data.frame 而 some.vector 是一个适当的向量？

***我玩了一段时间，并通过将 data.frame 更改为矩阵来修复它********

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T14:55:20.460

将 data.frame 更改为矩阵

# oracle - 使用批处理脚本连接到 oracle db 运行选择命令并将所有数据输出到平面文件

> ID：10000165
> 
> 赞同：0
> 
> 时间：2012-04-03T19:39:23.490
> 
> 标签：oracle, batch-file

我正在尝试为 Windows (XP) 创建一个批处理文件，它将有几个 sql，当它运行时它将 1\. 与 oracle 连接 2\. 设置用户 ID/密码/模式 3\. 在循环中运行每个 sql 和 4\. 输出每个 sql 输出到自己的平面文件。

我已经启动了脚本

```
@ECHO off

SET STATE=fl
TABLE1=AGENCY
set SQL1="SELECT Column_ID||CHR(31)||column_ENTITY_CD||CHR(31) FROM AGENCY"
set TABLE2=FIRM
set SQL2="SELECT  Column_ID||CHR(31)||Column_NM||CHR(31) FROM FIRM"
set TABLE3=FL_CO_LOB
Set SQL3="SELECT Column_ID||CHR(31)||Column_LOB_CODE||CHR(31) FROM FL_CO_LOB"
...
SET NumberOfTables=19
SETLOCAL ENABLEDELAYEDEXPANSION

 FOR /l %%A IN (1,1,%NumberOfTables%) DO (

    echo !SQL%%A!

  )
 endlocal 
```

我可以从变量中获取 SQL，但不知道如何连接到 oracle 并运行 sql 并将输出获取到定义的文件。

请给我一些指导。

需要注意的一件事是 echo 正在打印，包括双引号。但如果我没有它们，那么它只会打印第一个单词而不是整个查询。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-03T20:15:19.883

如果您已经在工作站上安装了 oracle 客户端，那么您可以使用 SQLPlus.exe 进行数据库的命令行操作。您的 TNSNAMES.ORA 文件需要是最新的，并且 tnsping 需要能够找到您的服务。

我认为你需要改变你的方法。您要运行的脚本需要提供给 SQLPlus.exe 程序，而不是半交互地交付。

我建议创建一个 .sql 脚本而不是创建环境变量

您的批处理文件行可能如下所示：

```
@ECHO off

SET STATE=fl
set TABLE1=AGENCY
set TABLE2=FIRM

echo SELECT Column_ID^|^|CHR(31)^|^|column_ENTITY_CD^|^|CHR(31) FROM %TABLE1% > tablecommands.sql
echo SELECT  Column_ID^|^|CHR(31)^|^|Column_NM^|^|CHR(31) FROM %TABLE2% >> tablecommands.sql
echo SELECT Column_ID^|^|CHR(31)^|^|Column_LOB_CODE^|^|CHR(31) FROM FL_CO_LOB >> tablecommands.sql
...
<until your 19 SQL statements are declared>

SQLPlus User/Password@Database @tablecommands.sql 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-14T06:53:25.560

在批处理文件中的 sql 命令之前添加 sqlplus login 命令。它执行并写入批处理文件所在的日志文件

语法：sqlplus -s **ora_user_name** / **ora_user_password** [as sysdba]@ **ora_sid** @" **path_to_sql_file** " > output.log

前任。sqlplus -s scott/tiger@xe @"D:\Oralcle\scripts\sql_file.sql" > output.txt

# jquery - Jquery 切换 UI 元素的可见性，但如果没有单击该 div 的任何部分，则使其不可见

> ID：10000167
> 
> 赞同：1
> 
> 时间：2012-04-03T19:39:44.160
> 
> 标签：jquery, toggle

这类似于 facebook 和 google 通知按钮，您单击它们并弹出一个窗口，如果您再次单击该按钮或单击不属于通知 div 的任何部分，则会关闭。

我的问题是我找不到取消单击对象或单击对象的事件。

这就是我现在所拥有的，只有重新单击按钮才能关闭弹出的内容。

```
notifycounter.click(function() {
    return imagepanel.toggle();
}); 
```

这是我尝试过的，但两个事件都没有触发：

```
notifycounter.focusin(function() {
  return imagepanel.toggle();
});
notifycounter.focusout(function() {
  return imagepanel.hide();
}); 
```

通知计数器是一个 h3

图像面板是一个 img

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-03T19:43:22.643

试试这个。

```
notifycounter.click(function(e) {
    imagepanel.toggle();
    e.stopPropagation();//this will stop the event bubbling
});

$(document).click(function(){
   if(imagepanel.is(':visible')){
      imagepanel.hide(); 
   }
}); 
```

您可以像这样优化它。

```
notifycounter.click(function(e) {
    imagepanel.toggle();
    e.stopPropagation();//this will stop the event bubbling

    if(imagepanel.is(':visible')){
        $(document).one('click.imagepanel', function(){
             imagepanel.hide(); 
        });
    }
    else{
        $(document).unbind('click.imagepanel');
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-03T19:41:45.940

您可以绑定到`document`元素并检查事件的目标是否是正确的元素：

```
$(document).on('click', function (event) {
    if (event.target == 'my-element-id') {
        //the element was clicked-on
    } else {
        //something other than the element was clicked-on
        $('#my-element-id').hide();
    }
}); 
```

您还可以使用`event.stopPropagation()`阻止事件传播到`document`元素：[http ://api.jquery.com/event.stopPropagation/](http://api.jquery.com/event.stopPropagation/)

```
$('#my-element-id').on('click', function (event) {
    event.stopPropagation();
});
$(document).on('click', function () {
    $('#my-element-id').hide();
}); 
```

只有点击元素以外的元素`#my-element-id`才会触发`document`点击事件处理程序。

请注意，这`.on()`是 jQuery 1.7 的新版本，在这种情况下，`.bind()`如果您使用的是旧版本，则可以替换为：http: [//api.jquery.com/on](http://api.jquery.com/on)

# javascript - Firefox 中 CSV 文件的数据 URI 未放置 .csv 扩展名

> ID：10000173
> 
> 赞同：6
> 
> 时间：2012-04-03T19:40:14.457
> 
> 标签：javascript, data-uri

我在我的 javascript 文件中定义了一个“下载文件”href：

```
 $("#downloadTag").html("<a href=data:text/csv;charset=utf-8," + encodeURIComponent(data) + ">Download</a>"); 
```

在 chrome 中，它按预期工作，即当我点击这个下载链接时，它给出的文件名是“download.csv”。但是，在 Firefox 中，它会添加一些乱码，例如“puzdb.part”。

有人可以指出我做错了什么吗？

谢谢

编辑：这是 jsfiddle 演示：http: [//jsfiddle.net/kLJz9/](http://jsfiddle.net/kLJz9/)

编辑＃2：我注意到在Windows上它也没有为chrome添加.csv扩展名，firefox的行为仍然相同（即.part扩展名）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T18:13:51.347

对于 Chrome，您可以通过将下载属性添加到锚标记来指定文件名/扩展名。

```
<a href="URI" download="MyFile.csv">Download</a> 
```

此属性仅适用于 chrome v 14+，不适用于其他浏览器。

我也在寻找解决这个问题的方法，但我希望这会有所帮助。

编辑：

下载属性应该可以解决您在 Windows 机器和 chrome 上遇到的问题。

# c# - 在 Windows 中使用目录有哪些不同的方法？

> ID：10000174
> 
> 赞同：1
> 
> 时间：2012-04-03T19:40:14.753
> 
> 标签：c#, windows, directory-structure

我从用户那里获取目录并存储在数据库中。我真的需要验证它们是否正确。现在我有可以以有效方式使用的目录列表。

仅驱动器名称 - （带或不带正斜杠或反斜杠）

```
X: 
```

使用 direcory 驱动 - （带有正斜杠或反斜杠，带有和不带尾随正斜杠或反斜杠）

```
X:\Test 
```

只有两个正斜杠或反斜杠（没有尾随正斜杠或反斜杠）

```
\\teela\admin$ 
```

IP 地址 - （带或不带正斜杠或反斜杠）

```
\\192.168.1.13 
```

带目录的 IP 地址 - （带正斜杠或反斜杠，带或不带尾随正斜杠或反斜杠）

```
\\192.168.1.13\test 
```

你能告诉我这是完整的列表还是我们可以用其他方式编写目录？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-03T20:29:50.610

您可以使用[NDepend.Helpers.FileDirectoryPath](http://filedirectorypath.codeplex.com/)库为您处理此问题。它包括一个路径有效性检查 API。

# ruby-on-rails - 展示同类产品 RoR

> ID：10000176
> 
> 赞同：0
> 
> 时间：2012-04-03T19:40:34.113
> 
> 标签：ruby-on-rails

我有四个模型。

产品类别分类图片

产品.rb

```
has_many  :images 
has_many  :categorizations
has_many  :categories, :through => :categorizations 
```

类别.rb

```
has_many :categorizations
has_many :products, :through => :categorizations 
```

分类.rb

```
belongs_to :category
belongs_to :product 
```

图片.rb

```
belongs_to :product 
```

当用户点击查看产品时，我希望在底部有一个部分显示类似产品的图像（基于相同的类别/类别）。

我想我的问题是有太多嵌套关系，我不知道如何提取这些关系。

任何帮助表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-03T20:56:50.083

想想您当前正在使用的对象以及您需要访问的对象。在这种情况下，我假设您`@product`在控制器中进行了设置，并且您似乎想要一个集合`@similar_products`，然后在页面底部循环遍历该集合。

我们有一个产品在一开始就可以使用。由此，我们想要与产品属于同一类别的产品。所以，在你的控制器做

```
@similar_products = @product.categories.inject({}) do |result_hash, category|
    result_hash[category.name.to_sym] => category.products.reject {|p| p == @product}
    result_hash
end 
```

所以我们最终得到的是这样的东西：

```
{:category_1 => [product1, product2, product3], :category_2 => [product4,product5]...} 
```

我可能会建议通过将 result_hash 分配更改为

```
result_hash[category.name.to_sym] => category.products[0..4] 
```

现在，在您看来，如果您愿意，您可以按类别循环浏览产品：

```
<% @similar_products.each do |k,product_array| # remember that the key is the name and the value is an array %>
    <% product_array.each do |product| %>
        <img src="<%= product.image.path %>" />
    <% end %>
<% end %> 
```

# c++ - 从数组更改为包含数组的结构

> ID：10000180
> 
> 赞同：0
> 
> 时间：2012-04-03T19:41:13.613
> 
> 标签：c++, arrays, deque

我正在更改我的代码，以便它更适合我。

我有：

```
deque<array<array<int,4>,4>> visited; 
```

我现在有 ：

```
deque<New_Array> visited; 
```

其中 New_Array 是：

```
struct New_Array {
    array<array<int,4>,4> pinak;
    int h;
}Jim; 
```

我的数组是这样的：

```
array<array<int,4>,4> myarray; 
```

**问题是**我有一个这样的 else-if 函数：

`else if (find(visited.begin(), visited.end(), myarray)==visited.end())`

此函数检查数组是否在访问的堆栈双端队列中。如果不是，则 else 函数起作用。但是现在，访问的双端队列必须包含结构，而不是数组。 **如何转换此函数**以使用双端队列的新容器？

我做了这个改变，所以每个数组都可以用一个数字（h）连接。我需要检查数组，我不在乎数字。

**编辑：**

错误 C2678：二进制“==”：未找到采用“New_Array”类型的左操作数的运算符（或没有可接受的转换）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-03T19:53:11.843

也许你可以使用`std::find_if`：

```
else if (find_if(visited.begin(), visited.end(), 
         [&myarray](const NewArray& newArray) {
           return myarray == newArray.pinak;
         }) == visited.end()) 
```

`std::find_if(Iterator first, Iterator last, Predicate pred)`返回一个迭代器，指向范围 [first,last) 中的第一个元素，对其应用 pred 为真。

第一个和第二个参数 ,`visited.begin()`和`visited.end()`指定我们应该检查`std::deque<NewArray>`命名的`visited`.

所以，我们遍历被`std::deque`调用`visited`的，依次测试每个元素。

对于双端队列的每个元素，我们应用这个谓词：

```
[&myarray](consts NewArray& newArray) { return myarray == newArray.pinak } 
```

此语法是 lambda 表达式。它创建了一个对象，该对象随后可以由`()`操作员调用（`find_if`事实上，确实如此）。

lambda 的第一部分列出了可用于表达式主体的变量。在这种情况下`[&myarray]`，通过 const 引用使该变量在主体中可用。

下一部分是`operator()`:的参数列表`(const NewArray& newArray)`。它与任何其他功能具有相同的含义。

最后，表达式的主体将传入的元素`visited`与变量进行比较`myarray`。为了确定相等性，我们将数组与`pinak`传入结构的成员进行比较。

简而言之，`find_if`功能：

*   遍历每个元素`visited`。对于每个元素，它：
*   调用列出的函数，该函数
*   将元素的`pinak`成员与`myarray`

`find_if`然后返回一个指向所选元素的迭代器，或者`.end()`如果没有比较相等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-03T19:45:54.780

如果我正确阅读了您的问题，您需要做的是为您的结构定义一个相等运算符。然后 Find 可以在其搜索中使用该运算符。

# php - 更改页面标题不适用于 facebook 元标签

> ID：10000187
> 
> 赞同：1
> 
> 时间：2012-04-03T19:41:45.347
> 
> 标签：php, facebook, joomla

我正在尝试为 facebook 设置我的元标签，但我在更改页面上有喜欢按钮，这意味着标题总是不同的。我的元标记看起来像：

```
<meta property="og:title" content="<?php echo $listing['Listing']['title']?>" /> 
```

或我放在那里的任何代码。它在调试器中显示我的标题，例如：

```
<?php echo $listing['Listing']['title']?> 
```

简直可悲，倒昏迷中的内容，这就是标题。为什么？为什么它不接受该 php 代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T06:04:22.477

您将代码发布到哪个文件中？看起来它不是应该在的地方......我建议将标签放入您的模板（/templates/yourtemplate/index.php）

或者，有很多扩展可以为你处理这个问题：[http ://extensions.joomla.org/search?q=facebook+open+graph](http://extensions.joomla.org/search?q=facebook+open+graph)

# qt - 如何将 UTF-8 数据转换为 QString

> ID：10000194
> 
> 赞同：3
> 
> 时间：2012-04-03T19:42:06.030
> 
> 标签：qt, utf-8

通过服务器 API，我正在使用结构成员获取联系信息：

字符显示名称[USERNAME_MAX_SIZE];

其中一个名字是带有特殊字符的欧洲名字：“Per Spånt”

displayName的结构如下：

![在此处输入图像描述](../Images/9828b11082ee8d99b7b28149f4d59ba8.png)

当我通过“fromUtf8”函数将“displayName”导入 QString 时，我得到以下 QString： ![在此处输入图像描述](../Images/60026a4af01c369e50c7c02292438c80.png)

如何在不将特殊字符转换为两个奇怪字符的情况下将正确的字符串放入我的 QString 中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-03T19:57:50.047

FWIW，这对我使用 Qt 4.7.4 有效且无效。

```
#include <iostream>
#include <string>

#include <QDebug>
#include <QString>

int main()
{
    char name[7] = "Sp__nt";
    name[2]=-61;
    name[3]=-91;

    std::cout << name << std::endl;                           // works

    qDebug() << QString::fromUtf8( name );                    // does not work
    qDebug() << QString::fromAscii( name );                   // works
    qDebug() << QString::fromLatin1( name );                  // works
    qDebug() << QString::fromStdString( name );               // works

    return 0;
} 
```

# iphone - 如何在 Xcode 中让网页适合 iPhone 屏幕

> ID：10000195
> 
> 赞同：0
> 
> 时间：2012-04-03T19:42:12.787
> 
> 标签：iphone, objective-c, parsing, webpage

我正在尝试使用 Xcode 使网页适合 iPhone 屏幕，但在屏幕底部我放置了一个文本框以允许用户输入用户名。这意味着 webview 框比使用全屏时要小一些。我知道如何使网页适合全屏，但是如何将其放入小于整个 iPhone 屏幕的框架中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-03T20:52:58.040

尝试这个：

```
CGFloat x = 0;
CGFloat y = 0;
CGFloat width = self.view.frame.size.width;
CGFloat height = self.view.frame.size.height - 30;
UIWebView *webView = [[UIWebView alloc] initWithFrame:CGRectMake(x, y, width, height)];
[self.view addSubview:webView]; // Add the webview to the main view 
```

这将使`webView`30 点的高度小于您将其添加到的主视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-03T19:47:05.420

从 IB 中的 UIView 开始，它是屏幕的完整大小，然后将 Web 视图和文本字段放入其中。然后，您应该能够调整 Web 视图的大小。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-03T19:47:25.637

用框架初始化：

```
UIWebView *webView = [[UIWebView alloc] initWithFrame:CGRectMake(x, y, width, height)]; 
```

# php - 有没有办法检查数组中的所有元素在php中是否为空

> ID：10000202
> 
> 赞同：1
> 
> 时间：2012-04-03T19:42:34.487
> 
> 标签：php, arrays

有没有办法检查数组中的所有元素在 PHP 中是否为空？

例如，我有一个数组`array(null,null,null,null)`- 有没有办法检查这种情况？

我正在寻找一种更好的方法，而不仅仅是遍历整个数组并检查每个元素。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-03T19:48:58.727

完成这项工作的另一种简单方法是使用该`max()`函数。

```
max(array( 3, 4, null, null  ) )      # is 4
max(array( null, null, null, null)    # is null 
```

因此，您可以发出简单的`if( is_null(max($array)) ) { ... }`呼叫。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-03T19:50:37.320

试试这个：

```
$nulls = array(null,null,null,null,null,null,null,null);
var_dump(array_unique($nulls) === array(null)); // prints true 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-03T19:50:08.710

[`array_filter`](http://www.php.net/manual/en/function.array-filter.php)会工作：

```
function checkIsset($val) {
    return isset($val);
}
$arr = array(null, null, null, ..., null);
$filteredArr = array_filter($arr, 'checkIsset');
if (count($filteredArr)) {
  //not all null
} else {
  //all null
} 
```

或者`if (empty($filteredArr))`如果你想要相反的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-01-08T23:16:10.957

```
if ($arr && count(array_filter($arr, 'is_null')) === count($arr)) {
   echo "Array is all NULLs\n";
} 
```

只有当 的所有元素`$arr`都是 NULL 时，才会调用 echo。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-04-03T19:46:46.900

您可以使用[`array_filter()`](http://www.php.net/manual/en/function.array-filter.php)

像这样：

```
$nulls = array(null,null,null,null,null);
if(count(array_filter($nulls)) == 0){
  echo "all null (or false)";
} 
```

不知道您对这个数组的期望是什么，但这与空值混为一谈......

# c# - Dapper Oracle Number(10,0) 作为 Decimal Parser 错误返回

> ID：10000203
> 
> 赞同：2
> 
> 时间：2012-04-03T19:42:39.417
> 
> 标签：c#, oracle, dapper

我有一个 POCO：

```
public class Role
{
   public Int32 Id { get; set; }
   public string Name { set; get; }
} 
```

Oracle 表是`Id NUMBER(10,0)`和`Name VARCHAR2(100 CHAR)`

Dapper 插入得很好，但是当我读取记录时，它会将 Id 带为十进制，并且出现解析器错误。不，我不能在 POCO 类中将 Int32 Id 更改为十进制 Id。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T17:35:27.100

感谢 Alex 我安装了 ODP.net 并且它工作正常。

# map - 如何找到openlayers中两个标记之间的距离？

> ID：10000207
> 
> 赞同：1
> 
> 时间：2012-04-03T19:43:04.453
> 
> 标签：map, openlayers

嗨，我想知道如何找到 openlayers 中两个标记之间的距离。

```
var distance = distanceBetweenMarkers(latLon1, latLon2){
//code to find the distance between latLon1, latLon2

} 
```

请帮帮我...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T08:48:29.663

从[1] 中创建点`LonLat`并调用`distanceTo`方法。`Geometry.Point`

```
p1 = new OpenLayers.Geometry.Point(latLon1.lon,latLon1.lat);
p2 = new OpenLayers.Geometry.Point(latLon2.lon,latLon2.lat);
len = p1.distanceTo(p2); 
```

1 - [http://dev.openlayers.org/docs/files/OpenLayers/Geometry/Point-js.html#OpenLayers.Geometry.Point.distanceTo](http://dev.openlayers.org/docs/files/OpenLayers/Geometry/Point-js.html#OpenLayers.Geometry.Point.distanceTo)

# mips - MIPS 代码表现滑稽 - 关于打印语句的简单案例

> ID：10000211
> 
> 赞同：0
> 
> 时间：2012-04-03T19:43:21.367
> 
> 标签：mips

我在尝试调试我的代码以使打印语句出现故障时遇到了真正的问题。我正在使用 MARS MIPS 模拟器。以下代码打印：

程度！测试学位！测试

什么时候应该打印

程度！测试

```
.data

test:       .ascii      "degree!\n"

test4:      .ascii      "test\n"

.text
main:
la  $a0, test
li  $v0, 4
syscall 

la  $a0, test4
li  $v0, 4
syscall 

j EXIT

EXIT: 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-03T22:25:37.123

字符串不是以空值结尾的。使用`.asciiz`代替`.ascii`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-03T22:25:48.037

您需要使用`.asciiz`而不是`.ascii`获取以 NULL 结尾的字符串。

# windows-phone-7 - 在 Wp7 中将 TextBlock 绑定到本地数据库中的字段

> ID：10000214
> 
> 赞同：0
> 
> 时间：2012-04-03T19:43:29.813
> 
> 标签：windows-phone-7, windows-phone

我是 wp7 开发的新手。我正在尝试使用隔离存储的本地数据库将文本块绑定**到**本地数据库字段。

我使用以下代码....

```
<TextBlock x:Name="field_name" TextWrapping="Wrap" Text="{Binding fieldName}">
</TextBlock> 
```

这里的字段名称是一个数据库列，使用 LINQ to SQL 将数据检索到一个可观察的集合中。

datacontext 方法适用于列表框，但不适用于 TextBlock 单独...

有任何想法吗..？谢谢..！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-03T19:46:44.687

您必须将文本块的 DataContext 属性设置为它应该绑定到的对象。

```
field_name.DataContext = MyObjectFromDatabase 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-03T20:06:16.707

不要直接绑定。

你想要做的是：

看法：

```
<TextBlock x:Name="field_name" TextWrapping="Wrap" Text="{Binding fieldName}">
</TextBlock> 
```

视图模型：

```
public class ViewModel:INotifyPropertyChanged
{

public ViewModel()
{
//Load DB and set the fieldName property here
}
public string FieldName
{
get{return _fieldName;}
set{_fieldName=value;
   OnPropertyChanged("FieldName");
}

protected void OnPropertyChanged(string propertyName)
{
    if(PropertyChanged!=null)
        PropertyChanged(this,new PropertyChangedEventArgs(propertyName));
}
public event public event PropertyChangedEventHandler PropertyChanged;

} 
```

这就是所谓的 MVVM (ModelViewViewModel)。ViewModel 绑定到视图的 DataContext，然后您可以将 ViewModel 的属性绑定到视图中的元素。有很多框架可以使这更容易：

1.  MVVMLite - 在 codeplex.com 上
2.  Caliburn.Micro - 在 codeplex.com 上

这一切都可以帮助您将 ViewModel 绑定到 View 并提供一堆帮助程序，因此您编写的代码更少。如果您要进行任何基于 Xaml 的编码，您确实需要对 MVVM 进行编码，因为这是对此类技术进行编码的事实上的“标准”方式。

# python - Python 输入验证

> ID：10000220
> 
> 赞同：2
> 
> 时间：2012-04-03T19:43:58.197
> 
> 标签：python, input, validation

我有一个菜单，除非输入是 d 或 D，否则将返回“e”。我想在不创建另一个变量并在一行上执行的情况下执行此操作

```
encrypt = 'd' if (raw_input("Encrypt or Decrypt a file(E/d):") == ('d' or 'D')) else 'e' 
```

[编辑] 好的，这是一个更难的

我该怎么做

```
file_text = 'a.txt' if (raw_input("File name(a.txt):")=='a.txt' else [What I typed in] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-03T19:47:40.693

使用`in`运算符：

```
encrypt = 'd' if raw_input("Encrypt or decrypt a file (E/d):") in ('d', 'D') else 'e' 
```

或者，您可以将输入转换为小写并将其与“d”进行比较：

```
encrypt = 'd' if raw_input("Encrypt or decrypt a file (E/d):").lower() == 'd' else 'e' 
```

最后，如果要确保它们输入 e 或 d，可以将其包装在 while 循环中：

```
while True:
    encrypt = raw_input("Encrypt or decrypt a file (E/d):")

    # Convert to lowercase
    encrypt = encrypt.lower()

    # If it's e or d then break out of the loop
    if encrypt in ('e', 'd'):
        break

    # Otherwise, it'll loop back and ask them to input again 
```

编辑：要回答你的第二个问题，我猜你可以使用 lambda 吗？

```
file_text = (lambda default, inp: default if inp.lower() == default else inp)("a.txt", raw_input("File name(a.txt):")) 
```

虽然，这显然有点迟钝，也太“聪明”了一半。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-03T19:59:40.187

不是很认真，而是另一种单行解决方案（我认为它不可读）：

```
encrypt = {'d':'d','D':'d'}.get(raw_input("Encrypt or decrypt a file (E/d):"), 'e') 
```

至少它很短。有时字典实际上对类似情况很有用（如果有更多选择）。

# windows - 在 Apache 服务器上远程执行独立的 .exe [CGI]

> ID：10000223
> 
> 赞同：0
> 
> 时间：2012-04-03T19:44:16.683
> 
> 标签：windows, perl, apache, cgi, executable

我有一个我创建的可执行程序，它是一个服务器。我希望能够通过同一机器主机的网站在 Windows Server 2008 机器上启动和停止该程序的实例。

我希望实现的功能是：从任何地方我可以访问我的网站来启动和停止服务器代码的实例，而不是不断地远程桌面进入它只是为了启动/停止它。

我试过使用 Perl，但是当我运行代码时，它看起来像是打印出程序所做的一些信息（所以它正在工作），但随后似乎停止了。而我希望它启动程序的一个实例作为它自己的进程。

珀尔：

```
#!C:/Perl64/bin/perl.exe
print "Content-type: text/plain\n\n";

exec('C:\file.exe'); 
```

我不确定我应该使用哪种语言，或者是否有完全其他更好的方法来实现我的目标。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-03T21:31:39.363

`exec`是错误的选择，线程也是。只需[在后台启动该过程](http://p3rl.org/Proc%3a%3aBackground)。你没有说你通常会如何停止服务器。如果它有自己的停止命令，则与启动相同；否则[`kill`](http://p3rl.org/kill)的过程。

# string - 平方子序列

> ID：10000226
> 
> 赞同：13
> 
> 时间：2012-04-03T19:44:27.717
> 
> 标签：string, algorithm, dynamic-programming

如果一个字符串可以通过连接相同字符串的两个副本获得，则该字符串称为方字符串。例如，“abab”、“aa”是方串，而“aaa”、“abba”则不是。给定一个字符串，该字符串有多少个子序列是方串？字符串的子序列可以通过从其中删除零个或多个字符并保持剩余字符的相对顺序来获得。子序列不必是唯一的。

例如字符串 'aaa' 将有 3 个正方形子序列

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-05T21:59:56.073

观察 1：方串的长度总是偶数。

观察 2：长度为 2n (n>1) 的每个正方形子序列是两个较短子序列的组合：长度为 2(n-1) 的子序列和长度为 2 的子序列之一。

首先，找到长度为 2 的子序列，即字符串中出现两次或多次的字符。我们称这些*对*。对于每个长度为 2（1 对）的子序列，记住序列中第一个和最后一个字符的位置。

现在，假设我们有所有长度为 2(n-1) 的子序列，并且我们知道每个字符串中第一部分和第二部分的开始和结束位置。我们可以使用观察 2 找到长度为 2n 的序列：

遍历所有长度为 2(n-1) 的子序列，找到其中第一项位于第一部分的最后位置和第二部分的第一个位置之间且第二项位于第二部分的最后位置。每次找到这样的一对时，将其与当前长度为 2(n-2) 的子序列组合成一个新的长度为 2n 的子序列。

重复最后一步，直到不再找到新的正方形子序列。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-05T20:11:09.423

伪代码：

```
total_square_substrings <- 0

# Find every substring
for i in 1:length_of_string {

    # Odd strings are not square, continue
    if((length_of_string-i) % 2 == 1)
        continue;

    for j in 1:length_of_string {
        # Remove i characters from the string, starting at character j
        substring <- substr(string,0,j) + substr(string,j+1,length_of_string);

        # Test all ways of splitting the substring into even, whole parts (e.g. if string is of length 15, this splits by 3 and 5)
        SubstringTest: for(k in 2:(length_of_substring/2))
        {           
            if(length_of_substring % k > 0)
                continue;

            first_partition <- substring[1:partition_size];

            # Test every partition against the first for equality, if all pass, we have a square substring
            for(m in 2:k)
            {           
                if(first_partition != substring[(k-1)*partition_size:k*partition_size])
                    continue SubstringTest;
            }

            # We have a square substring, move on to next substring
            total_square_substrings++;
            break SubstringTest;
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T20:42:49.077

这是使用 LINQ 的解决方案：

```
IEnumerable<string> input = new[] {"a","a","a"};

// The next line assumes the existence of a "PowerSet" method for IEnumerable<T>.
// I'll provide my implementation of the method later.
IEnumerable<IEnumerable<string>> powerSet = input.PowerSet();

// Once you have the power set of all subsequences, select only those that are "square".
IEnumerable<IEnumerable<string>> squares = powerSet.Where(x => x.Take(x.Count()/2).SequenceEqual(x.Skip(x.Count()/2)));

Console.WriteLine(squares); 
```

这是我的 PowerSet 扩展方法，以及 PowerSet 所需的“选择”扩展方法：

```
public static class CombinatorialExtensionMethods
{
    public static IEnumerable<IEnumerable<T>> Choose<T>(this IEnumerable<T> seq, int k)
    {
        // Use "Select With Index" to create IEnumerable<anonymous type containing sequence values with indexes>
        var indexedSeq = seq.Select((Value, Index) => new {Value, Index});

        // Create k copies of the sequence to join
        var sequences = Enumerable.Repeat(indexedSeq,k);

        // Create IEnumerable<TypeOf(indexedSeq)> containing one empty sequence
        /// To create an empty sequence of the same anonymous type as indexedSeq, allow the compiler to infer the type from a query expression
        var emptySequence =
            from item in indexedSeq
            where false
            select item;
        var emptyProduct = Enumerable.Repeat(emptySequence,1);

        // Select "Choose" permutations, using Index to order the items
        var indexChoose = sequences.Aggregate( 
            emptyProduct,
            (accumulator, sequence) =>  
            from accseq in accumulator  
            from item in sequence
            where accseq.All(accitem => accitem.Index < item.Index)
            select accseq.Concat(new[] { item }));

        // Select just the Value from each permutation
        IEnumerable<IEnumerable<T>> result = 
            from item in indexChoose
            select item.Select((x) => x.Value);

        return result;
    }

    public static IEnumerable<IEnumerable<T>> PowerSet<T>(this IEnumerable<T> seq)
    {
        IEnumerable<IEnumerable<T>> result = new[] { Enumerable.Empty<T>() };
        for (int i=1; i<=seq.Count(); i++)
        {
            result = result.Concat(seq.Choose<T>(i));
        }
        return result;
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-13T12:35:57.560

我最初导出所有可能的子序列，然后我将检查导出的子序列是否是正方形子序列

```
 import java.io.*;
 import java.util.*;

  public class Subsequence { 
  static int count;
  public static void print(String prefix, String remaining, int k) {

    if (k == 0) {
        //System.out.println(prefix);
        if(prefix.length() %2 == 0 && check(prefix) != 0 && prefix.length() != 0)
        {
            count++;
            //System.out.println(prefix);
        }
        return;
    }
    if (remaining.length() == 0) 
        return;

    print(prefix + remaining.charAt(0), remaining.substring(1), k-1);
    print(prefix, remaining.substring(1), k);
 }

 public static void main(String[] args) 
 {
    //String s = "aaa";
    Scanner sc = new Scanner(System.in);
    int t=Integer.parseInt(sc.nextLine());
    while((t--)>0)
    {
        count = 0;
        String s = sc.nextLine();
        for(int i=0;i<=s.length();i++)
        {
             print("",s,i);
        }
        System.out.println(count);
     }
 }

 public static int check(String s)
 {
    int i=0,j=(s.length())/2;

    for(;i<(s.length())/2 && j < (s.length());i++,j++)
    {
        if(s.charAt(i)==s.charAt(j))
        {
                continue;
        }

        else
           return 0;
    }

    return 1;
}

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-06-09T06:13:15.257

```
import java.io.*;
import java.util.*;

public class Solution {
    /*
        Sample Input:
        3 
        aaa 
        abab 
        baaba

        Sample Output:
        3 
        3 
        6
    */
    public static void main(String[] args) {
        //Creating an object of SquareString class
        SquareString squareStringObject=new SquareString();
        Scanner in = new Scanner(System.in);
        //Number of Test Cases
        int T = in.nextInt();
        in.nextLine();
        String[] inputString=new String[T];
        for(int i=0;i<T;i++){
            // Taking input and storing in String Array
            inputString[i]=in.nextLine();
        }
        for(int i=0;i<T;i++){
            //Calculating and printing the number of Square Strings
            squareStringObject.numberOfSquareStrings(inputString[i]);
        }
    }
}
class SquareString{
    //The counter maintained for keeping a count of Square Strings
    private int squareStringCounter;
    //Default Constructor initialising the counter as 0
    public SquareString(){
        squareStringCounter=0;
    }
    //Function calculates and prints the number of square strings
    public void numberOfSquareStrings(String inputString){
        squareStringCounter=0;
        //Initialising the string part1 as a single character iterated over the length
        for(int iterStr1=0;iterStr1<inputString.length()-1;iterStr1++){
            String str1=""+inputString.charAt(iterStr1);
            String str2=inputString.substring(iterStr1+1);
            //Calling a recursive method to generate substring
            generateSubstringAndCountSquareStrings(str1,str2);
        }
        System.out.println(squareStringCounter);
    }
    //Recursive method to generate sub strings
    private void generateSubstringAndCountSquareStrings(String str1,String str2){
        for(int iterStr2=0;iterStr2<str2.length();iterStr2++){
            String newStr1=str1+str2.charAt(iterStr2);
            if(isSquareString(newStr1)){
                squareStringCounter++;
            }
            String newStr2=str2.substring(iterStr2+1);
            generateSubstringAndCountSquareStrings(newStr1,newStr2);
        }
    }
    private boolean isSquareString(String str){
        if(str.length()%2!=0)
            return false;
        String strPart1=str.substring(0,str.length()/2);
        String strPart2=str.substring(str.length()/2);
        return strPart1.equals(strPart2);
    }
} 
```

# crystal-reports - 如何使用水晶报表在一页中重复组部分？

> ID：10000228
> 
> 赞同：0
> 
> 时间：2012-04-03T19:44:28.730
> 
> 标签：crystal-reports, crystal-reports-2008

我正在研究学校管理系统，我想使用 Visual Studio 2008 在 vb.net 中使用 Crystal Report 工具打印学生的费用收据。我的要求是在收据空白页出现后，在一页中打印两次费用收据。我想在那个空白部分重复上面的收据。请帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-03T20:19:21.837

处理此问题的一种方法是子报表。将子报表放置在您希望重复出现的位置，添加子报表链接以选择要显示的内容，并添加数据源、分组级别等。

另一种解决方案是提供返回两行的数据源，例如 SQL 选择语句或虚拟表。将其连接到您的数据源并为虚拟表中的字段插入分组级别。我在这个答案中用更笼统的术语概述了它：[https ://stackoverflow.com/a/7520428/893113](https://stackoverflow.com/a/7520428/893113)

换句话说，Crystal 没有提供自动执行此操作的方法。

# assembly - 来自两个字节的汇编十六进制表示

> ID：10000230
> 
> 赞同：1
> 
> 时间：2012-04-03T19:44:34.550
> 
> 标签：assembly, x86, nasm

我想输入一个像 415A6B31 这样的字符串，汇编函数应该返回 AZk1 所以我必须每两个字节转换为一个字节...... 41 = A 5A = z 等等

如何在组装中制作它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T00:29:22.243

看看你正在处理的数字。字符串是十六进制的是吗？查找十六进制值 0-9 是 0x30 到 0x39，用 0xF 得到 0-9 是吗？将 0x41 与 0xF 相加不会导致 0xA，因此对于字符串中的每个字节

```
if(byte>0x39) byte = byte - 7;
byte=byte&0xF; 
```

这会给你半字节（nybbles）0x4、0x1、0x5、0xA 等。然后将半字节组合成字节

```
(0x4<<8)|0x1 = 0x41, (0x5<<4)|0xA = 0x5A, etc. 
```

C语言符号：

```
<< means shift left
& means and
| means or
- means subtract
0x means the number is in hexadecimal 
```

# jquery - 如何在 Jquery 中使用换行符从多行文本框中选择文本？

> ID：10000231
> 
> 赞同：2
> 
> 时间：2012-04-03T19:44:51.537
> 
> 标签：jquery

```
<textarea style="height: 300px;"  class="jqueryFindBody" cols="20" rows="2">
1
2
3
</textarea> 
```

在上面的 asp.net 文本框中，如果我用自己的文本替换它的文本，换行符会丢失

```
 $('.jqueryFindBody').text($('.jqueryFindBody').text()); 
```

我尝试使用 html 而不是文本，但换行符总是丢失。如何保留换行符？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-03T19:47:03.160

怎么用`.val()`？[http://api.jquery.com/val](http://api.jquery.com/val)

```
$('.jqueryFindBody').val($('.jqueryFindBody').val()); 
```

这是一个演示：http: [//jsfiddle.net/tXnaj/](http://jsfiddle.net/tXnaj/)

# 更新

如果要`textarea`在 HTML 中显示元素的值，则需要将结束行字符解析为`<br />`标签。你可以用一个简单的正则表达式来做到这一点：

```
$('.jqueryFindBody').val().replace(/\r|\n/g, '<br />'); 
```

这会找到所有的`\n`and`\r`字符，然后用`<br />`标签替换。

这是一个演示：http: [//jsfiddle.net/tXnaj/2/](http://jsfiddle.net/tXnaj/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-03T19:53:22.453

文本框中的换行符表示为 \n 和 \r （换行符和回车符）这里也讨论了该主题：[jQuery convert line breaks to br (nl2br equivalent)](https://stackoverflow.com/questions/2919337/jquery-convert-line-breaks-to-br-nl2br-equivalent)

# facebook - Facebook 评论社交插件是否有可以添加评论的 API？

> ID：10000234
> 
> 赞同：3
> 
> 时间：2012-04-03T19:45:10.900
> 
> 标签：facebook, facebook-graph-api, comments, facebook-comments

在网站上安装 Facebook 评论插件后，是否可以通过 Graph（或其他）API 以编程方式添加和删除评论？例如，如果发布者（使用他们的 FB 个人资料）想要播种评论。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-25T00:40:17.783

答案是否定的，这是不可能的，设计使然。

使用[Graph Explorer ，您可以在](https://developers.facebook.com/tools/explorer/)[此处](https://developers.facebook.com/docs/reference/api/using-comments/#creating)测试 Comments 对象的详细 API 调用：

```
POST {object_id}/comments?message='graph-test-1' 
```

...这（假设您有一个正确配置的评论插件）导致：

```
{
  "error": {
    "message": "(#100) Comments may not be added to a comment plugin", 
    "type": "OAuthException", 
    "code": 100
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-03T20:27:20.233

In theory, all comments made through the plugin have id's which can be accessed via the graph api.

For example: [https://graph.facebook.com/comments/?ids=http://developers.facebook.com/docs/reference/plugins/comments](https://graph.facebook.com/comments/?ids=http://developers.facebook.com/docs/reference/plugins/comments)

&&

[https://developers.facebook.com/docs/reference/api/Comment/](https://developers.facebook.com/docs/reference/api/Comment/)

Posting like or comment to that id should generate a comment in that array. I have never done this, but i will give it shot and post back with any sample code i can get working. "via PHP SDK 3.1.1"

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-18T08:20:39.257

facebook的graph API不能用来给评论插件添加评论，只有网页版的评论社交插件可以做到。

# javascript - 在您的网站上编写电子邮件联系按钮的最佳做法是什么

> ID：10000240
> 
> 赞同：1
> 
> 时间：2012-04-03T19:45:37.213
> 
> 标签：javascript, html, email, href, mailto

我不想使用 mailto：因为我个人觉得它打开我从未使用过的 Outlook 时很烦人。

```
<a href="mailto:homer@example.com">Email Homer</a> 
```

我应该让按钮打开一个只包含电子邮件地址的新页面吗？有没有办法让它自动复制？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-03T19:47:21.397

我还可以让用户选择简单地复制/粘贴：

```
<a href="mailto:homer@example.com">Email Homer</a> (homer@example.com) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-03T19:55:26.260

你基本上有两个选择。使用 mailto，它将使用用户定义的电子邮件应用程序（可以是 Outlook、雅虎、gmail 等）。这是最快的编程，因为您不做任何事情，只需添加链接即可完成。
另一种是创建自己的电子邮件页面。这样做的缺点是你需要做更多的工作。优点是您可以指定更多字段以提供更多信息（例如，订单号、电话等）。这将使用您的电子邮件服务器，而不是客户的，因此请确保客户在表单中添加他的电子邮件地址作为必填项（也可能是验证）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-03T20:02:48.593

我将创建一个单独的网页（如联系我们），在其中放置联系表格（发件人姓名、电子邮件、主题和消息）。在此页面上，您还可以使用链接/按钮[“复制到剪贴板”](https://stackoverflow.com/questions/400212/how-to-copy-to-the-clipboard-in-javascript)发布您的电子邮件地址。

# java-6 - 使用更少的 .replace() 调用运行多个字符串替换

> ID：10000244
> 
> 赞同：0
> 
> 时间：2012-04-03T19:46:03.360
> 
> 标签：java-6

我想将以下代码压缩为对`.replace()`. 看起来`.replace()`不会这样做。我是对的还是我只是读错了文档？

```
public void setBody(String body) {
    this.body = body.replace("“", "\"").replace("”", "\"").replace("—", "-").replace("’", "'").replace("‘", "'");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-03T19:51:22.860

你说的对。要解决这个问题，您应该创建一个 StringBuilder 并一次遍历字符串 1 个字符，如果正确则将字符添加到 stringBuilder 中，如果错误则替换。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-03T19:52:52.690

您应该可以使用`body.replace(['"', '—', '‘'], ['\"', '-', "'"])`.

# java - Entitymodifiers 运行但没有变化

> ID：10000246
> 
> 赞同：0
> 
> 时间：2012-04-03T19:46:22.627
> 
> 标签：java, android, andengine

我正在制作一个棋盘游戏，但我被困在一个已经让我消磨了 3-4 个小时的问题上。任何地方都没有文档，所以我只是在没有运气的情况下进行猜测。

考虑一下：

```
public void highlightBlockTest(BoardCoordinate bc) {
  Log.i("highlightBlock()", "entered.");

  Point p = new Point(bc.getPuzzlePiece().getDestination());
  Rect rect = getBoardCoordinateRectFromPoint(p);

  int x = rect.getX();
  int y = rect.getY();
  int w = rect.getWidth();
  int h = rect.getHeight();

  Entity e = new Entity(0, 0);
  Rectangle r;

  r = new Rectangle(x, y, w, 5);
  e.attachChild(r);
  r = new Rectangle(x, y, 5, h);
  e.attachChild(r);
  r = new Rectangle(x + w - 5, y, 5, h);
  e.attachChild(r);
  r = new Rectangle(x, y + h - 5, w, 5);
  e.attachChild(r);

  SequenceEntityModifier sem = new SequenceEntityModifier(
      new DelayModifier(1f),
      new AlphaModifier(1f, 0.0f, 1.0f, new IEntityModifierListener() {
        @Override
        public void onModifierStarted(IModifier<IEntity> arg0, IEntity arg1) {
          System.out.println("Alpha start!");
        }

        @Override
        public void onModifierFinished(IModifier<IEntity> arg0, IEntity arg1) {
          System.out.println("Alpha stop!");
        }
      })
  ); 

  e.registerEntityModifier(sem);
  this.mScene.attachChild(e);

  return;
} 
```

此代码应该为特定块绘制一个“突出显示”矩形。矩形绘制正常，但 AlphaModifier 不会将其值应用于相关实体。DelayModifier 工作得很好。

我添加了 ModifierListener 只是为了查看它是否被调用，并且确实如此；我在 Logcat 中看到“Alpha 开始”和“Alpha 停止”。但是突出显示的矩形仍然存在，在板上清晰可见。

作为最后的手段，我还添加了一个 MoveModifier 以在 5 秒内将矩形向右移动 50 像素，并且矩形瞬间移出屏幕。

为什么这些修饰符没有按预期工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T11:09:44.967

您需要设置混合功能，调用`.setBlendFunction(GL10.GL_SRC_ALPHA, GL10.GL_ONE_MINUS_SRC_ALPHA);`实体。

# c# - resharper 如何识别其智能感知包含哪些文件？

> ID：10000247
> 
> 赞同：11
> 
> 时间：2012-04-03T19:46:27.557
> 
> 标签：c#, resharper, intellisense

Resharper 的一个众所周知的问题是它无法识别使用自定义任务生成的 C# 文件（导致智能感知失败）。有谁知道如何在不将文件添加到项目的情况下解决此问题？

### （顺便说一句，包括项目中生成的文件或创建单独的程序集以及其他此类**有缺陷**的建议是**完全不可能**的）。

*   我们可以为此编写一个 Resharper 插件吗？我们有相当多的开发人员无法使用 Resharper，所以这将是值得的。
*   我们能否以某种方式将 obj/*.g.cs 文件添加到 Resharpers 非基于 msbuild 的 csproj 解析器（潜伏在 Resharper 中的某处）？
*   Resharper 使用的方法是如何解析 .cs 文件列表以包含在某处记录的吗？

由于这个问题多年来一直被经验和报告，现在肯定有人已经破解了吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-03-15T20:26:17.627

我找到了 Resharper 的扩展：[ReSharper.ExternalCode](https://github.com/jberd126/resharper-externalcode)。

Antlr 提示：添加`obj\Debug`Resharper -> 代码检查 -> 外部代码并重新加载解决方案。

它对我有用。

# .net - WCF 1 个会话 = 1 个线程？

> ID：10000248
> 
> 赞同：2
> 
> 时间：2012-04-03T19:46:27.793
> 
> 标签：.net, wcf, session

如果我运行我的 WCF 服务（托管在 II7 中）并在 contextinstance 上使用 PerSession，一个会话是否与一个线程相同？当客户端没有进行任何调用但在服务上有会话时会发生什么？会话是否仍在线程中？

如果我更改为 PerCall，我假设每次调用都会获得一个线程，并且在调用结束时会返回该线程。

我在哪里可以找到这些信息？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-03T20:46:41.830

[我相信你可以在这里](http://msdn.microsoft.com/en-us/magazine/cc163590.aspx)找到答案和很好的解释。

乍一看，您会出于可伸缩性原因使用 PerCall，而**将****PerSession**用于通常的 Web 场景。

*   使用**PerSession**时，客户端第一次调用服务实现的实例将保留在服务器上。每个客户端都有自己的会话，每个客户端只在一个线程**（！）**上执行。**所以，是的 1 Session == 1 Thread 默认情况下**。但是您也可以更改**ConcurrencyMode**，因此在一个会话中客户端可以进行许多并发调用。

*   如果是**PerCall**服务实例将在调用完成后立即处理。

[编辑（与大卫尼尔森讨论后）]：

**（！）**这并不意味着相同的线程！这只意味着 ThreadPool 将使用可用线程来运行服务代码。但是如果启动 1000 个并发客户端，ThreadPool 会分配很多线程，这涉及到资源，比如内存。

**用代码解释线程使用：**

我创建了简单的计算器服务来展示 WCF 服务是如何工作的。

```
[ServiceBehavior(InstanceContextMode = InstanceContextMode.PerSession)]
public class CalculatorService : ICalculatorService
{
    private int _threadIdOnCreating = Thread.CurrentThread.ManagedThreadId;
    public int AccumulatedValue { get; private set; }
    public int Accumulate(int valueToAdd)
    {
        AccumulatedValue += valueToAdd;

        Console.WriteLine(
string.Format("Accumulated: {0}. ThreadIdOnServiceCreating:{1} CurrentThreadId:{2}",
            AccumulatedValue, _threadIdOnCreating, Thread.CurrentThread.ManagedThreadId));

        return AccumulatedValue;
    }
} 
```

我使用参数 2 运行 Accumulate 方法五次，然后创建新的客户端代理并执行相同操作。下面是输出，证明服务器保留了服务实现的实例（创建时的threadId），但是方法在不同的线程上运行，取自ThreadPool。

```
I'm calculator
Accumulated: 2\. ThreadIdOnServiceCreating:6 CurrentThreadId:6
Accumulated: 4\. ThreadIdOnServiceCreating:6 CurrentThreadId:7
Accumulated: 6\. ThreadIdOnServiceCreating:6 CurrentThreadId:6
Accumulated: 8\. ThreadIdOnServiceCreating:6 CurrentThreadId:7
Accumulated: 10\. ThreadIdOnServiceCreating:6 CurrentThreadId:6
Accumulated: 2\. ThreadIdOnServiceCreating:9 CurrentThreadId:9
Accumulated: 4\. ThreadIdOnServiceCreating:9 CurrentThreadId:6
Accumulated: 6\. ThreadIdOnServiceCreating:9 CurrentThreadId:9
Accumulated: 8\. ThreadIdOnServiceCreating:9 CurrentThreadId:6
Accumulated: 10\. ThreadIdOnServiceCreating:9 CurrentThreadId:8 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-03T21:11:08.127

“如果我运行我的 WCF 服务（托管在 II7 中）并在 contextinstance 上使用 PerSession，一个会话是否与一个线程相同？

不，请求将由线程池处理。

“当客户端没有进行任何调用但在服务上有会话时会发生什么？会话是否仍在占用线程？”

不，如果没有服务请求，会话不会占用线程。WCF“会话”只是数据；状态绑定到会话 ID。它与线程无关。

# python - 无法使用 py2exe 作为“域\计算机名”pyodbc 登录

> ID：10000256
> 
> 赞同：4
> 
> 时间：2012-04-03T19:46:53.530
> 
> 标签：python, sql-server, py2exe, pyodbc

好的，所以我有一个连接到 mssql 数据库的脚本，我需要作为我已经完成的服务运行，但是当我将它作为服务运行时，它会覆盖我在连接到数据库时输入的凭据广告计算机帐户。

当我自己运行它而不是作为服务运行时，它运行完美。

我的连接字符串是：

`'DRIVER={SQL Server};SERVER=MyServer;DATABASE=MyDB;UID=DOMAIN\myusername;PWD=A;Trusted_Connection=True'`

错误是：

`Error: ('28000', "[28000] [Microsoft][ODBC SQL Server Driver][SQL Server]Login failed for user 'DOMAIN\COMPUTERNAME')`

有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-03T20:36:46.660

在我从事的最后一个项目中，我发现`DRIVER={SQL Server};SERVER=SERVERNAME;DATABASE=DBName`在受信任模式下启动数据库连接就足够了。

如果它仍然不起作用，则可能是

1）mssql服务器上的账号`DEEPTHOUGHT` 设置不正确。

2）服务中的runAs设置不正确（为什么错误消息提到'ComputerName'而不是'DEEPTHOUGHT'？）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-03T20:15:09.997

以下连接字符串将使用 Windows 身份验证，使用运行服务的帐户对数据库进行身份验证。将服务帐户更改为具有数据库访问权限的帐户：

`'DRIVER={SQL Server};SERVER=SERVERNAME;DATABASE=DBName;Trusted_Connection=yes'`

要更改服务帐户：

*   开始 -> 运行 -> services.msc
*   右键单击服务-> 属性
*   登录选项卡
*   确定/应用以保存更改

![更改服务帐户的窗口截图](../Images/2285dc74186642c517b6e38d5ab33034.png)

# .net - 使用 httpwebrequest 进行流连接

> ID：10000261
> 
> 赞同：0
> 
> 时间：2012-04-03T19:47:14.420
> 
> 标签：.net, vb.net, httpwebrequest, twitter, http-streaming

在尝试了一个 tTCPClient 之后，我创建了一个到流 API 的 httpwebrequest 连接，但它从未结束过工作。我关心的是我的代码是否正确，我实际上是在读取新数据并且是否保持连接。最初我一直在读入缓冲区，并在最大大小后将所有内容加载到文件中，但认为读取一行会更简单，因为每个条目都由换行符分隔发送。

```
rStream = webrequest.GetResponse().GetResponseStream
rStream = New GZipStream(rStream, CompressionMode.Decompress)
If rStream.CanRead then
   Dim bufferPit(8100) as byte
   Do
      Dim dStream as StreamReader = New StreamReader(rStream)
      While not dStream.EndOfStream
          rData = dStream.ReadLine()
          pTools.appendToFile(rData)
      End While
   .....//some other exception handling
   Loop While rStream.CanRead 
```

看起来我一直在阅读，但不确定我是否在这里阅读冗余数据。还有一个问题是，如果我要使用线程来 appendToFile，那会保持与流的连接吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-03T21:24:21.690

你在滥用[CanRead](http://msdn.microsoft.com/en-us/library/system.io.stream.canread.aspx)。最好再看看文档。CanRead 只告诉您流是否可以被读取，而不是它是否有数据，因此不应该在循环条件下使用。

此外，您需要在完成后关闭流。

# ruby - 如何使用 Mechanize 从 html 页面上的“table”标签中的“td”标签获取文本

> ID：10000267
> 
> 赞同：0
> 
> 时间：2012-04-03T19:47:28.053
> 
> 标签：ruby, mechanize

如何使用 Mechanize gem 从 html 页面上的“table”中获取“td”标签中的文本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-03T21:28:09.830

I almost always use mechanize with [nokogiri](http://nokogiri.org/). This [guide](http://www.engineyard.com/blog/2010/getting-started-with-nokogiri/) helped me get started.

Something like this should work (Untested):

```
require 'mechanize'
require 'nokogiri'

agent = Mechanize.new
page = agent.get("http://www.google.com/")
doc = Nokogiri::HTML(page.body, "UTF-8")
doc.xpath('//td').each do |node|
  puts node.text
end 
```

More information on nokogiri [here](http://ruby.bastardsbook.com/chapters/html-parsing/)

# asp.net-mvc-3 - 如何找到属性没有被修改或改变？

> ID：10000271
> 
> 赞同：0
> 
> 时间：2012-04-03T19:47:39.397
> 
> 标签：asp.net-mvc-3, c#-4.0, object

我有视图模型，我正在绑定我的视图调用“EditProfile”。现在，一旦用户单击菜单栏中的“EditProfile”链接，我通过调用 get restful 服务加载所有配置文件信息，用户可以看到他/她的配置文件。

用户可以更改他们想要的任何字段，但我只想发布用户更改的字段。

我知道如何比较两个属性，但不知道如何从视图模型中只提取修改后的属性。以前有人遇到过这种情况吗？

我的视图模型中的属性是：

```
 public class UserViewModel
 {
  public string FirstName { get; set; } 
  public string LastName { get; set; }
  public string Email { get; set; }
  public string Profession { get; set; }
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-03T19:52:52.860

过去我`INotifyPropertyChanged`为 ViewModel 实现过。我记录了在 PropertyChanged 事件触发后哪个属性发生了变化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-03T20:20:34.187

为什么不采取另一种方法 - 发布所有内容（以便模型可用）并在您的对象上简单地具有“IsDirty”属性，这些属性足够聪明，可以只提交对数据库的更改（就像实体框架默认情况下所做的那样）

您可以简单地形成自己的 jQuery .post() 参数，但除非您有大量数据 - 为什么？它使视图模型难以阅读（您怎么知道在什么场景下发布了什么），因此典型的方法是发布单独的视图模型或发布我认为基本表单更容易的所有内容。

# php - 如何检测php中的文本文件换行符？

> ID：10000272
> 
> 赞同：0
> 
> 时间：2012-04-03T19:47:39.597
> 
> 标签：php, arrays, string

我有一个在记事本中创建的 txt 文件，例如包含以下行：

```
lao_esan_ubon_444
chantrick
solikh
knalpoot
tanduy_007
Mario3010 
```

现在我需要将每一行放入一个数组单元格中，如下所示：

```
array('lao_esan_ubon_444','chantrick','solikh','knalpoot','tanduy_007','Mario3010'); 
```

我怎样才能用 PHP 做到这一点（对于长列表）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-03T19:50:54.107

使用[`file`功能](http://php.net/manual/en/function.file.php)。

```
$array = file('somefile.txt', FILE_IGNORE_NEW_LINES | FILE_SKIP_EMPTY_LINES); 
```

请注意，`flags`参数 ( `FILE_IGNORE_NEW_LINES | FILE_SKIP_EMPTY_LINES`) 仅在 PHP 5 或更高版本中可用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-03T19:57:58.910

```
<?php
$data=file_get_contents("your file name");
$array=explode("\n",$data);
?> 
```

希望这可以帮助

# unicode - 如何在具有可靠渲染的 Web 中使用 unicode 字符

> ID：10000280
> 
> 赞同：0
> 
> 时间：2012-04-03T19:48:49.427
> 
> 标签：unicode, font-face, google-font-api

我在网络中使用 unicode 符号作为图形组件。

我需要相信这个 unicode 字符的呈现方式。

这里有一个我正在尝试构建[的简化示例。](http://jsfiddle.net/fguillen/arf3s/)

您可以看到 unicode 字符在不同的计算机中呈现不同。

**OSX下的Chrome**： ![OSX下的Chrome](../Images/87c21fea7f634a373d45292370fe4b2a.png)

**Windows下的Chrome**： ![Windows 下的 Chrome](../Images/888acc330855642200ab2f883d4d4711.png)

我只需要支持现代浏览器，因此允许使用*@font-face*和*google 字体*。

> ## 更新
> 
> 我知道问题是选择的字体没有特殊字符，找到一个与它们兼容并与*@font-face*或*googlefonts*兼容的解决方案将是解决方案，但这是真正的问题：**如何找到具有此特征的字体**。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T01:44:01.707

最可能的答案是您选择的字体没有为这些 un​​icode 代码点定义字形（[并且从仔细阅读字体来看，似乎是这种情况](http://www.google.com/webfonts/specimen/Fredoka+One)），您将需要切换到为这些代码定义了字形*的*字体-点。

当字体没有为 Unicode 代码点定义字形时，由平台决定如何处理它。Windows 过去只为未定义的任何内容显示一个方形框，但从 Windows Vista（或者可能是 Windows 7）开始，它现在将显示系统默认字体的字形（如果可用）。对于 unicode 字符，您最有可能看到的是系统默认字体的版本——当然，在 Windows 和 Mac 上是不一样的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T03:07:07.817

您应该尝试找到一种字体，a) 包含您需要的所有字符，b) 可以通过`@font-face`.

您现在使用的是[Fedoka One](http://www.google.com/webfonts/specimen/Fredoka+One)字体，但它包含的字符库非常有限。您尝试显示的前四个字符不存在（甚至没有“⋕”，因为尽管视觉相似，但它与 Ascii 字符“#”完全不同）。由于`font-family`规则接下来指定`fantasy`，浏览器将尝试它们被设置为用作通用幻想字体的任何花哨字体，而且它可能也没有得到它们 - 幻想字体往往具有有限的曲目。然后浏览器会走自己的路，可能会使用各种字体。

这四个字符在字体中是罕见的，包含它们的字体在风格上与 Fedoka One 没有相似之处。因此，您可能需要重新考虑该方法。

在 HTML 中使用特殊字符的一些注意事项：[http ://www.cs.tut.fi/~jkorpela/html/characters.html](http://www.cs.tut.fi/~jkorpela/html/characters.html)

# ruby-on-rails - 如何将虚拟“计数”列添加到 rails 中的选择查询？

> ID：10000282
> 
> 赞同：1
> 
> 时间：2012-04-03T19:48:55.857
> 
> 标签：ruby-on-rails, activerecord

我有一个帖子模型，并发布 has_many :comments, :as => :commentable （多态）。我正在寻找一种可以获取所有帖子的方法，并在记录上有一个虚拟属性，该属性将显示该帖子有多少评论。

我在想我可以这样做：

```
Post.select("posts.*, count(comments.id) as post_comments").joins(:comments) 
```

但是，这只返回一条记录，post_comments 设置为整个数据库中的所有评论，而不仅仅是那些属于该记录的评论......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-16T11:46:11.510

实际上，您缺少的是组子句。您需要按站点分组，否则 count() 聚合会将所有内容折叠为一条记录，如您所见。

尝试这个：

```
Post.select("posts.*, count(comments.id) as post_comments")
    .joins(:comments)
    .group('posts.id') 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-03T21:17:10.730

我认为问题在于您`count(comments.id)`只计算了整个连接表。您可以使用嵌套查询解决此问题：

```
Post.select("posts.*, (SELECT count(comments.id) FROM comments WHERE comments.post_id=posts.id) AS post_comments") 
```

在这种情况下，您不需要连接，因为外部查询中没有使用 comments 表。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-03T19:58:47.677

我会用 Post 模型中的变量来做到这一点。第一个我会尝试以某种方式找到我正在寻找的帖子（你可以通过你想要的任何参数找到它，下面我展示了搜索 id 参数的示例）。

```
@post = Post.find(params[:id]) 
```

当你找到你要找的帖子时，找出评论号很容易，尝试类似...

```
@comments = @post.comments.size 
```

...wich将返回一个整数。

# r - 如何更改 direct.label 中的字体大小？

> ID：10000286
> 
> 赞同：15
> 
> 时间：2012-04-03T19:49:11.987
> 
> 标签：r, ggplot2, font-size

我无法更改 direct.label（来自 directlabels 包）ggplot2 图中的字体大小。请参阅下面的可重现示例 - 将标签旋转 45 度，使其粗体、衬线和 50% 透明（下面代码末尾列表中的所有其他参数）没有问题 - 但我无法控制字体大小。（我真的不希望他们 25 岁，这只是为了测试......）

有什么我遗漏的东西，还是这是一个错误？

```
library(ggplot2)
library(scales)
library(directlabels)
df <- data.frame(x = rnorm(26), y=rnorm(26), let=letters)
p <- ggplot(df, aes(x, y, color=let)) + geom_point() 
direct.label(p, 
    list("top.points", rot=45, fontsize=25, 
        fontface="bold", fontfamily="serif", alpha=0.5)) 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-15T18:51:25.523

我想通了，你`cex`用来改变字体大小。

```
df <- data.frame(x = rnorm(26), y=rnorm(26), let=letters)
p <- ggplot(df, aes(x, y, color=let)) + geom_point() 
direct.label(p, 
    list("top.points", rot=45, cex=6, 
          fontface="bold", fontfamily="serif", alpha=0.5)) 
```

那会给你， ![jjj](../Images/78684138784e8a3776019a14903d1772.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-10T01:12:05.117

这是一种不同的路线，但你会考虑在 ggplot2 中做这一切吗？

```
ggplot(df, aes(x, y, color=let)) + 
       geom_point() + 
       geom_text(df, mapping=aes(x, y, label=let, colour=let), 
       size=5, vjust=-.55, hjust=.55, angle = 45, fontface="bold", 
       family ="serif", alpha=0.5) + opts(legend.position = "none") 
```

这会给你这个，你可以使用调整字体大小`size` ![在此处输入图像描述](../Images/0d5ba2ffdd3b79915196dedb1bce7f3e.png)

# php - 我想在子类别上显示特定类别的名称

> ID：10000287
> 
> 赞同：0
> 
> 时间：2012-04-03T19:49:14.747
> 
> 标签：php, wordpress

我只想显示特定类别的子类别。假设我有一个类别“城市”，其子类别是“伦敦”和“纽约”。

我想通过提及父母的名字来显示这些孩子。

在 wordpress 网站上搜索了 codex，但没有帮助。请帮我。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-03T19:52:43.857

这就是你说的不是吗？[http://codex.wordpress.org/Template_Tags/wp_list_categories](http://codex.wordpress.org/Template_Tags/wp_list_categories)特别注意“child_of”参数来选择父类别的（id）。

# matlab - 如何在 MATLAB 中遍历类中的每个对象（例如 VB For Each X in Y）？

> ID：10000289
> 
> 赞同：1
> 
> 时间：2012-04-03T19:49:20.753
> 
> 标签：matlab, com, interop, foreach, com-interop

提前道歉，我在这里可能有一些术语错误。我是面向对象编程的新手。

我正在尝试通过 COM API 从 MATLAB 控制 Siemens Solid Edge ST2（一个 CAD/CAM 程序）。从 VB6 或 VB.NET 执行此操作时，通过 objEdges 集合对象对每个循环执行某种操作，很容易识别（比如说）类“objEdge”的所有对象：

```
Dim objEdges As SolidEdgeGeometry.Edges
objEdges = objCurve3D.GetType().InvokeMember("Edges", _
  Reflection.BindingFlags.GetProperty, Nothing, objCurve3D, args)

For Each objEdge In objEdges
  objProf.IncludeEdge(objEdge)
Next 
```

我正在尝试从 MATLAB 做同样的事情。我使用 成功加载了 Solid Edge COM 服务器`h = actxserver('SolidEdge.Application')`，可以通过 API 执行打开文档、创建几何图形等操作，但我只是不确定这个 Visual Basic“object for-each”的 MATLAB 等价物（因为缺少更好的名字）。

看起来MATLAB Central 论坛上的[用户](http://www.mathworks.com/matlabcentral/answers/4434-for-each-object-in-object)**Julian**也有同样的问题，但他们没有给他答案。请注意，这与 this[不是](https://stackoverflow.com/questions/408080/is-there-a-foreach-in-matlab-if-so-how-does-it-behave-if-the-underlying-data-c)*同*一个问题，后者正在查看标准数组上的 for-each 循环，而不是 COM 对象。

 *非常感谢人们可以提供的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T16:45:53.807

我知道我不应该回答我自己的问题，但我想我昨晚破解了这个问题，并认为最好把它贴在这里供其他人使用。

据我所知，VB.NET“对象中的每个对象”类型的循环是循环遍历容器对象的元素的简写，或者正如 Microsoft 所说的，“集合类”。请参阅 MSDN[参考资料](http://msdn.microsoft.com/en-us/library/61h34247%28v=vs.80%29.aspx)[1、2](http://msdn.microsoft.com/en-us/library/cy13e6ex%28v=vs.80%29.aspx)。（**编辑**：无法发布到第三个 MSDN 页面（用于方法）的链接，因为我没有足够的业力来发布两个以上的超链接。您可以从前面链接的集合类页面中获取它。）**`Item()`**

 **这些对象包含其他对象的集合，始终具有一个属性（在 MATLAB 中是一个*字段*）`Count`和一个方法`Item(k)`，该方法返回集合中的第*k*个对象。因此，对象 Cell 将具有集合类 Cells，对象 Line2D 将具有集合类 Lines2D，或者在我的情况下，在 Solid Edge COM API 的 3D 曲线内，每个 Edge 对象都收集在 Edges 集合类（容器）中。

因此，要在没有此速记的 MATLAB 中复制该行为，您只需直接使用该`Count`字段和`Item()`方法即可。（下面的示例代码使用`IncludeEdge()`2D 草图（轮廓）对象上的方法`objProfile`将 3D 曲线的每个部分（边）投影到 2D 草图。）

```
objEdges = objCurve.Edges(1) ; % get handle for Edges container class
numEdges = objEdges.Count ; % number of edges in curve

for k = 1:NumEdges, ; % loop through each Edge object in the curve
  objProfile.IncludeEdge(objEdges.Item(k)); % project current edge to sketch
end 
```

我不确定的一件事是，是否*每个*COM API 都使用 Microsoft 的具有`Count`属性和`Item()`方法的约定，或者名称是否可能更改。但这似乎解决了我的问题。***

# jquery - jquery asp加载内容

> ID：10000295
> 
> 赞同：0
> 
> 时间：2012-04-03T19:49:42.347
> 
> 标签：jquery, asp.net

（我在 asp.net 工作）我正在寻找一种方法来拥有一个带有 jquery.toggle 的 div（加/减按钮）

仅当 div 可见时才需要加载 div 的内容（需要在页面加载时隐藏）。

我是否“需要”拥有一个包含我的 div 内容的页面

或者我可以在 div 中使用更新面板。并调用面板加载他的内容。

我不想重新加载我的页面，因为我在页面中有多个块 div，如果用户需要，可以加载它们。而且他们每个人里面都有太多的数据。

任何提示，
坦克你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-03T19:56:51.140

我会定期使用 ajax 从 web 服务或 pagemethod（实际上是 web 服务...）加载此类内容，单击扩展图标 (+) 调用服务，返回数据（作为 JSON）然后应用到加载页面时在隐藏的 div 中加载的模板，并将其插入到在单击事件中切换为可见的 div 中...

如果这符合您的需求，那就太好了；如果没有，请更具体地说明您要完成的工作。

[编辑：根据要求的代码示例]

```
<div>
<asp:Repeater ID="CategoryRepeater" runat="server">
    <HeaderTemplate><div id="CategorySpace"></HeaderTemplate>
    <ItemTemplate>
        <div id="CategoryHeaderRow_<%# Eval("CATEGORY_NM").ToString().Replace(" ","_").Strip("(,),-,/") %>" class="CategoryHeader">
            <input type="hidden" id="CategoryID" runat="server" value='<%# Eval("CATEGORY_ID") %>' />
            <!-- THIS IS THE EXPANSION ICON -->
            <input type="button" id="expandCategory_<%# Eval("CATEGORY_NM").ToString() %>" class="CategoryExpandButton" value="+" onclick="expandCategory(this,'<%# ((CRMS.PageBase)this.Page).UserId %>','<%# Eval("CATEGORY_ID") %>');" isloaded="<%#(string)Eval("LOAD_ON_DEMAND_CD")=="N"?"Y":"N" %>" />

            <span id="CategoryCount_<%# Eval("CATEGORY_NM").ToString().Replace(" ","_").Strip("(,),-,/")  %>" class="CategoryLabel" style="width:50px;"><%# Eval("Count_Qy")%></span>
            <span id="CategoryName" class="CategoryLabel"><%# Eval("CATEGORY_NM") %></span>
            <img id="InfoIcon_<%# Eval("CATEGORY_NM") %>" src="images/InfoIcon.png" alt="<%# Eval("CATEGORY_INFO_TX") %>" class="CategoryInfo" />
        </div> 
        <div id="categoryItems_<%# Eval("CATEGORY_NM").ToString().Replace(" ","_").Strip("(,),-,/") %>"  class="hidden itemsContainer " style="width:990px;overflow:scroll;">
            <div id="categoryItems" runat="server">
            </div>
        </div>

    </ItemTemplate>
    <FooterTemplate></div></FooterTemplate>
</asp:Repeater>
</div> 
```

扩展图标的点击事件会触发这个 JavaScript：

```
/*
Expands the ToDo Categories and initiates ajax call for
lazy loading ToDo Items when needed
*/
function expandCategory(sender, UserID, CategoryID) {
    window.status = "";
    var senderID = "#" + sender.id;
    var action = $(senderID).val();

    $(senderID).val($(senderID).val() == "+" ? "-" : "+");
    var CategoryItemsID = "#" + sender.id.replace("expandCategory", "categoryItems");
    $(CategoryItemsID).toggleClass("hidden");

    if (action == "+"
            && sender.isloaded == "N") {
        //Find any controls with a pq_Value attribute and 
        //use those values with the selected category id 
        //to load items. 
        var params = $('[pq_Value]');
        var inputParameters = "";
        for (x = 0; x < params.length; x++) {
            inputParameters += "{" + params[x].p_Name + "|" + params[x].p_Type + "|" + $(params[x]).attr("pq_Value") + "}";
        }
        PageMethods.LoadCategoryItems(UserID, CategoryID, inputParameters, 0, RecieveCategoryData, RecieveCategoryError);
        //Set Is Loaded to (Y)es
        sender.isloaded = "Y";
    }
} 
```

当您调用`PageMethods.LoadCategoryItems...`这应该是一个典型的 ajax 调用，将内容发送回另一个 JavaScript 函数：

```
function RecieveCategoryData(msg) {
    var msgs = msg.split('||');
    if (msgs.length == 7) {
        var category_name = msgs[0].replace(/ /g, "_");

        //strip undesirable characters from the name: (,),-,/ 
        category_name = category_name.replace(/\(/g, "").replace(/\)/g, "").replace(/\-/g, "").replace(/\//g, "");
        var UserID = msgs[1];
        var jsonData = jQuery.parseJSON(msgs[6]);

        var container = $("#categoryItems_" + category_name);
        var categoryCountLabel = $("[id*=CategoryCount_" + category_name + "]")[0]
        var categoryCount = categoryCountLabel.innerText;

        if (parseInt(msgs[4]) < 52) {
            var header = $("#" + category_name + "_Header").html();
            $(container).html(header);
        }
        //var ItemContainer = $("#" + category_name + "_Items");

        var templateText;
        var x = 0;
        var y = 0;
        var fieldName;
        var fieldToken;
        var jsonValue;
        for (i = 0; i < jsonData.length; i++) {
            templateText = document.getElementById(category_name + "_Template").innerHTML;

            //templateText = $("#" + category_name + "_Template").html();
            templateText = templateText.replace("[{ACTIVE_USER_ID}]", UserID);
            templateText = templateText.replace("[{numDataRow}]", i % 2 == 0 ? "evenDataRow" : "oddDataRow");

            //templateText = templateText.replace("[target]","'" + targetString + "'");

            x = templateText.indexOf('[{');
            while (x < templateText.length && x > -1) {
                y = templateText.indexOf('}]', x + 2);
                fieldToken = templateText.substring(x, y + 2);
                fieldName = fieldToken.replace('[{', '').replace('}]', '').toUpperCase();
                jsonValue = jsonData[i][fieldName];

                if (fieldName == "REMARK_TX" && jsonValue != null) {
                    jsonValue = jsonValue.substring(0, jsonValue.length <= 35 ? jsonValue.length : 35);
                }

                if (jsonValue != null &&
                    jsonValue.toString().indexOf("\Date") > -1
                    ) {
                    if (fieldName != "UPDATED_DT") {
                        jsonValue = new Date(parseInt(jsonValue.substr(6))).format("MM/dd/yyyy");
                    } else {
                        jsonValue = new Date(parseInt(jsonValue.substr(6))).format("MM/dd/yyyy h:mm:ss tt");
                    }
                } else if (jsonValue == null) {
                    jsonValue = "";
                }

                //identify if the value is blank and it is being inserted
                //into a hyperlink (determined by the ");" following the 
                //replacement token.
                //If so, insert the "disabled='true'" attribute to the string.
                if (jsonValue == ""
                    && templateText.substring(y + 2, y + 4) == ");") {
                    var strDisable = " disabled='true'";
                    var split = y + 5;
                    var beginning = templateText.substring(0, split);
                    var ending = templateText.substring(split);
                    templateText = beginning + strDisable + ending;

                }

                templateText = templateText.replace(fieldToken, jsonValue);

                x = templateText.indexOf('[{');
            }
            //$("#" + category_name + "_Items").append(templateText);
            $(container).append(templateText);
        }

        if (parseInt(msgs[4]) < parseInt(msgs[5])) { //if there are more records remaining to get...
            PageMethods.LoadCategoryItems(msgs[1], msgs[2], msgs[3], msgs[4], RecieveCategoryData, RecieveCategoryError);
        }

        if (getParameterByName("showCount")) {
            if (parseInt(msgs[4]) < parseInt(msgs[5])) {
                window.status = "Loading " + msgs[4] + " of " + msgs[5] + ".";
            } else if (parseInt(msgs[4]) == parseInt(msgs[5])) {
                window.status = "Load Complete: " + msgs[5] + " records.";
            } else { //if (parseInt(categoryCount) != parseInt(msgs[4] 
                window.status = "expecting records: " + categoryCount + " showing records: " + parseInt(msgs[4]);
            }
        }

        //format currency cells to $x,xxx.cc
        //var test = $(".jq_currFormat");
        $(".jq_currFormat").each(function () {
            var num = $(this).text();
            if (num.indexOf("]") == -1) {
                num = num.toString().replace(/\$|\,/g, '');
                if (isNaN(num)) num = "0";
                sign = (num == (num = Math.abs(num)));
                num = Math.floor(num * 100 + 0.50000000001);
                cents = num % 100;
                num = Math.floor(num / 100).toString();
                if (cents < 10) cents = "0" + cents;
                for (var i = 0; i < Math.floor((num.length - (1 + i)) / 3); i++)
                    num = num.substring(0, num.length - (4 * i + 3)) + ',' + num.substring(num.length - (4 * i + 3));
                $(this).text((((sign) ? '' : '-') + '$' + num + '.' + cents));
                $(this).removeClass("jq_currFormat");
            }
        });

    }
} 
```

此函数将识别和复制正在显示的数据类别的模板，并使用 JSON 中的实际值查找和替换数据标记。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-03T20:00:45.787

我已经这样做了很多次，我通常将我的 div 隐藏在 javascript 的最顶部，然后在任何有意义的事件上显示。加载 div 的方式没有区别，我有时觉得烦人的唯一一件事就是找到合适的 div，因为我们仍然使用 ASP.NET 重写控件名称的方式。这很容易通过在 jQuery 中使用带有选择器的结尾来解决。

高温高压

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-03T20:01:08.470

如果您只想隐藏/显示一些信息，您可以通过隐藏和显示 div 中的数据来使用它，如下所示

```
<a href="#" id="link">Show</a>

<div id="divMore" style="display:none;">
    <p>some content goes here</p>
</div> 
```

和脚本是

```
$(function(){
    $("#link").click(function(){       
       if($(this).text()=="Show") 
       {
           $("#divMore").slideDown();
           $(this).text("Hide");
       }
       else
       {
           $("#divMore").slideUp();
           $(this).text("Show");
       }           
    });    
});​ 
```

这是一个示例[http://jsfiddle.net/VdPAz/8/](http://jsfiddle.net/VdPAz/8/)

如果您必须根据页面中的某些元素显示一些大型动态内容（例如：单击用户名时在表格中显示付款历史记录），您可以执行 jQuery 加载来获取该数据

```
 var userId=5; // read from the page/source of click
 $("#divMore").load("getuserdata.php?userid="+userId); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-03T20:24:53.407

**当然，您可以为此使用 UserControl。**

这将是 A 的代码：

```
<tr>
    <td>
        <asp:UpdatePanel runat="server" ID="uppShowB" UpdateMode="Conditional">
            <ContentTemplate>
                <br />
                <asp:LinkButton runat="server" ID="btnShowB" Text="(+)"
                    OnClick="btnShowB_Click"></asp:LinkButton>
                <wuc:BControl runat="server" ID="wucBControl" />
            </ContentTemplate>
        </asp:UpdatePanel>
    </td>
</tr>

//Invocation of the javascript function that will show ControlB as a jquery Dialog
protected void btnShowB_Click(object sender, EventArgs e)
{
    ScriptManager.RegisterStartupScript(this.uppShowB, typeof(UpdatePanel), "popupB", "ShowB('" + this.wucBControl.GetPanelId() + "," + this.btnShowB.ClientID + "');", true);
} 
```

在 ControlB 中，您必须将所有内容都放在 Panel 中，并确保它的样式具有 display:none

```
<asp:Panel runat="server" ID="pnlBPanel" CssClass="Invisible">

</asp:Panel>

//and in the css:

.Invisible
{
    display: none;
}

//and in the cs:
public string GetPanelId()
{
    return this.pnlPopUpDetalles.ClientID;
} 
```

最后，显示 ControlB 的 javascript 函数：（它显示为没有标题，位于切换 (+) 按钮下方。也许坐标需要一些调整）

```
function ShowB(panelClientId, btnToggleClientId)
{        
    ancho = 250;
    alto = 'auto';
    var x = $("#btnToggleClientId").offset().left + $("#btnToggleClientId").outerWidth() - ancho;
    var y = $("#btnToggleClientId").offset().top + $("#btnToggleClientId").outerHeight() - $(document).scrollTop();            
    var $dialog = $("#panelClientId")
        .dialog({
            autoOpen: false,
            hide: "puff",                   
            width: ancho,
            height: alto,
            draggable: false,
            resizable: true,
            closeOnScape : true,
            position: [x,y]                    
        });
    $dialog.dialog("open");            
    $("#panelClientId").siblings(".ui-dialog-titlebar").hide();

    $("#panelClientId").focus();

    $("body")
      .bind(
       "click",
       function(e){
            if(
                 $("#panelClientId").dialog("isOpen")
                 && !$(e.target).is(".ui-dialog, a")
                 && !$(e.target).closest(".ui-dialog").length
              )
            {
             jQuery("#panelClientId").dialog("close");
            }
       });                        
    return false;
} 
```

# java - WriteInt-RandomAccessFile - java

> ID：10000296
> 
> 赞同：2
> 
> 时间：2012-04-03T19:49:51.127
> 
> 标签：java, random-access

我正在尝试使用 RandomAccessFile 类在 java 中（在 linux 上）编写一个程序来写入文件。

由于某些非常奇怪的原因，它不起作用。最简单的代码不起作用。尝试使用时：

```
RandomAccessFile file = new RandomAccessFile("a.txt", "rw");
file.writeInt(3);
file.close(); 
```

它把文件留空或用乱码填充

我认为这与我不熟悉的一些编码问题有关。

有人对此有任何想法吗？

谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-03T20:11:34.767

它只是将一个 32 位整数写入文件（在您的情况下，它是字节序列 00 00 00 03）。如果你想把它写成一个字符串，你需要

```
 RandomAccessFile file = new RandomAccessFile("a.txt", "rw");
    file.writeBytes(Integer.toString(3));
    file.close(); 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-04-03T19:55:43.870

最好通过像这样的教程来学习如何使用随机访问文件

[http://www.java-tips.org/java-se-tips/java.io/how-to-use-random-access-file.html](http://www.java-tips.org/java-se-tips/java.io/how-to-use-random-access-file.html)

# linux - 各种操作模式下的 ARM MMU 操作

> ID：10000298
> 
> 赞同：4
> 
> 时间：2012-04-03T19:50:00.503
> 
> 标签：linux, arm, mmu

在我提出问题之前，我将提出与该主题相关的理解，

1.  **Linux 内核模式**对应于**ARM 管理员模式**。
2.  **Linux 用户模式**对应于**ARM 用户模式**。
3.  在**内核模式**（启用 MMU）中，Linux 使用**相对地址**而不是物理地址。即，**物理地址 = 相对地址 - PAGE_OFFSET + PHYS_OFFSET**
4.  在**用户模式**（启用 MMU）中，Linux 使用**虚拟地址**而不是物理地址。即，**物理地址 = 使用 pte 、 pmd 、 pgd 的 MMU 转换（虚拟地址）**

问题：

1.  是否在主管模式下启用了 MMU（用于内核地址）。

2.  如果启用，那么这是否意味着相同的 MMU 在翻译主管模式和用户模式时以不同的方式运行。

3.  如果 MMU 在不同的模式下以不同的方式发挥作用，请给我指点一下 mmu 的功能是如何在各种模式下发挥作用的。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T14:33:01.470

1：是的。启用 MMU 可以在所有模式下启用它（尽管需要针对安全/非安全状态单独完成，但这超出了 Linux 的范围）。

2：是的，因为它可以对特权（内核）和用户模式具有不同的访问权限。可以在 ARM1176 技术参考手册中找到一个有点过时但概念上有用的表格来证明这一点。[http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.ddi0333h/Caceaije.html](http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.ddi0333h/Caceaije.html)

3：MMU 在所有模式下的功能都相同。好的，为了完整性：有一个叫做“域”的概念，内核可以使用它来完全绕过访问权限检查。不过，这在最新的处理器中已被弃用，并且不再用于 ARM11 和 Cortex-A 处理器。

# jquery - jquery像喷雾一样生长效果

> ID：10000299
> 
> 赞同：1
> 
> 时间：2012-04-03T19:50:03.047
> 
> 标签：jquery, spray

嗨，我想知道这里的喷雾页面上是否有与示例 2/演示 2 相同的 jquery 增长功能。

[http://labs.adobe.com/technologies/spry/samples/effects/grow_sample.html](http://labs.adobe.com/technologies/spry/samples/effects/grow_sample.html)

不想使用喷雾，因为我的大部分网站效果都使用 jquery。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-03T19:53:22.453

`scale`可以使用 jQueryUI 中的效果来实现这一点。

[更多信息](http://docs.jquery.com/UI/Effects/Scale)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T18:56:11.433

我使用这个`.animate()`方法。

在此处查看[演示](http://jsfiddle.net/mrobin/FWwUv/)。

```
<div class="outer">
  <div class="inner">&nbsp;</div>
</div>

$('div.inner').animate({
    'margin':'100px'
}, 1000);​ 
```

**完整效果的**步骤****

 **1.  没有内容时增加边距。
2.  然后当动画完成时，删除边距
3.  设置实际的最终宽度和
4.  然后附加您要显示的内容。**

# iphone - 未知的 GDB 错误

> ID：10000303
> 
> 赞同：1
> 
> 时间：2012-04-03T19:50:11.830
> 
> 标签：iphone

```
Error loading /System/Library/Extensions/AudioIPCDriver.kext/Contents/Resources/AudioIPCPlugIn.bundle/Contents/MacOS/AudioIPCPlugIn:  dlopen(/System/Library/Extensions/AudioIPCDriver.kext/Contents/Resources/AudioIPCPlugIn.bundle/Contents/MacOS/AudioIPCPlugIn, 262): Symbol not found: _CFXMLNodeGetInfoPtr
Referenced from: /System/Library/Frameworks/Security.framework/Versions/A/Security
Expected in: /Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.0.sdk/System/Library/Frameworks/CoreFoundation.framework/CoreFoundation
in /System/Library/Frameworks/Security.framework/Versions/A/Security 
```

我不知道这个错误在日志导航器中意味着什么，当我按下我的应用程序上的播放按钮来播放音频文件并使用**NSTimer显示多个****UIViewControllers**时它会显示。

 **当我使用异常断点调试应用程序时，当我点击应用程序上的播放按钮时，它会崩溃并显示相同的消息。

这是否与泄漏内存或其他有关。

这是什么意思。任何想法请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-03T22:06:44.920

这是 iOS 5 模拟器的一个错误.. 当您尝试播放声音时，它发生在模拟器上，在设备上尝试，您不会有任何问题。**

# php - PHP根据关联数组中的多个关联删除相似数组

> ID：10000305
> 
> 赞同：1
> 
> 时间：2012-04-03T19:50:18.350
> 
> 标签：php, filter, associative-array, multidimensional-array

我有这种类型的关联数组。

```
Array
(
 [0] => Array
    (
        [bookedArea] => Comp Pool
        [laneBooked] => 1
        [paidBy] => Edmonton Aurora Synchronized Swim Club
        [startTime24hr] => 16:00
        [finishTime24hr] => 18:00
    )

 [1] => Array
    (
        [bookedArea] => Comp Pool
        [laneBooked] => 2
        [paidBy] => Edmonton Aurora Synchronized Swim Club
        [startTime24hr] => 16:00
        [finishTime24hr] => 18:00
    )

 [2] => Array
    (
        [bookedArea] => Comp Pool
        [laneBooked] => 3
        [paidBy] => Keyano Swim Club
        [startTime24hr] => 16:00
        [finishTime24hr] => 18:00
    )
) 
```

我想创建一个新数组，根据多个关联删除类似条目。startTime24hr、finishTime24hrbookedArea 和paidBy 如果所有 4 个都不相同，则不应将其删除。另外，我想捕获新关联数组中的第一条和最后一条通道。

```
Array
  (
    [0] => Array
     (
        [bookedArea] => Comp Pool
        [firstLaneBooked] => 1
        [lastLaneBooked] => 2
        [paidBy] => Edmonton Aurora Synchronized Swim Club
        [startTime24hr] => 16:00
        [finishTime24hr] => 18:00
     )
    [2] => Array
     (
        [bookedArea] => Comp Pool
        [firstLaneBooked] => 3
        [lastLaneBooked] => 3
        [paidBy] => Keyano Swim Club
        [startTime24hr] => 16:00
        [finishTime24hr] => 18:00
     )
  ) 
```

我发现这可以帮助我只过滤一个关联。但是我还需要3个。

```
$copy = $array; // create copy to delete dups from the array you wish to filter from
$newFilteredArray = array(); // new filtered array.
$item1 = 'startTime24hr'; // the association you want to filter with.
for( $i=0; $i<count($array); $i++ ) {
    if ( in_array( $array[$i][$item1], $newFilteredArray ) ) {
        unset($copy[$i]);
    }
    else {
        $newFilteredArray [] = $array[$i][$item1]
    }
}
print_r($copy); 
```

* * *

编辑----谢谢亚历山大帮助我得到正确的迭代。

我一直在努力将开始和结束车道插入我的过滤数组。我已经注释掉了我让它发挥作用的尝试。当它未注释时，我得到：`Notice: Undefined index: startTime24hr` 它似乎处于无限循环中。但是，如果您评论我的东西，则没有通知。有人能帮忙吗？函数 array_push_assoc($array, $key, $value){ $array[$key][] = $value; 返回$数组；}

```
$CPfilteredArray = array();
$lanes = 0;
for($i = 0; $i < count($compPoolArray); $i++) {
  $add = true;
  // $lanesAdded = false;
  // $lanes = $lanes + 1;
  // $startLane = $compPoolArray[$i]["laneBooked"];
  for($j = 0; $j < count($CPfilteredArray); $j++) {
    if(($compPoolArray[$i]["startTime24hr"] === $CPfilteredArray[$j]["startTime24hr"])
        && ($compPoolArray[$i]["finishTime24hr"] === $CPfilteredArray[$j]["finishTime24hr"])
        && ($compPoolArray[$i]["bookedArea"] === $CPfilteredArray[$j]["bookedArea"])
        && ($compPoolArray[$i]["paidBy"] === $CPfilteredArray[$j]["paidBy"])) {
            $add = false;
            // $lanes = $lanes + 1;
            // $lanesAdded = True;
    }
  }
    if($add) {
        $CPfilteredArray[] = $compPoolArray[$i];
        // if ($lanesAdded){
        //     $lastLane = $startLane + $lanes;
        //     $CPfilteredArray[$i] = array_push_assoc($CPfilteredArray, 'firstLane', $startLane);
        //     $CPfilteredArray[$i] = array_push_assoc($CPfilteredArray, 'lastLane', $lastLane);
        // }
        // else {
        //     $CPfilteredArray[$i] = array_push_assoc($CPfilteredArray, 'firstLane', $startLane);
        //     $CPfilteredArray[$i] = array_push_assoc($CPfilteredArray, 'lastLane', $startLane);
        // }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-03T20:15:36.887

这也可能有效：（您可以替换序列化函数以仅序列化选定的元素）

```
<?php 

$arr=array(
        0=>array("a"=>1, "b"=>"hello"),
        1=>array("a"=>2, "b"=>"hellooo"),
        2=>array("a"=>1, "b"=>"hello"),
        );

function removeDuplicates( &$arr ){
    $index=array();
    $result=array();
    foreach ($arr as $key=>$val){
        $k=serialize($val);
        if(!isset($index[$k])){
            $index[$k]=$key;
            $result[$key]=$val;
        }
    }
    return $result;
}

$result=removeDuplicates($arr);

print_r($arr);
print '<br>';
print_r($result);
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-03T20:05:52.447

两个循环循环完成这项工作。

```
$filteredArray = array();
for($i = 0; $i < count($array); $i++) {
  $add = true;
  for($j = 0; $j < count($filteredArray); $j++) {
    if(($array[$i]["startTime24hr"] === $filteredArray[$j]["startTime24hr"])
        && ($array[$i]["finishTime24hr"] === $filteredArray[$j]["finishTime24hr"])
        && ($array[$i]["bookedArea"] === $filteredArray[$j]["bookedArea"])
        && ($array[$i]["paidBy"] === $filteredArray[$j]["paidBy"])) {
       $add = false;
    }
  }
  if($add) $filteredArray[] = $array[$i];
} 
```

调用的结果数组`$filteredArray`包含过滤后的元素。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-03T20:08:07.720

我知道它并没有真正回答（不允许发表评论......）你的问题，但如果你从数据库中检索数据，你可以使用查询来检索分组值。它可能看起来像这样（伪SQL）

```
SELECT
     bookedArea
    ,paidBy
    ,startTime24hr
    ,finishTime24hr
    ,MIN(laneBooked)
    ,MAX(laneBooked)
FROM 
    reservation -- ??
WHERE
--condition
GROUP BY
    bookedArea
    ,paidBy
    ,startTime24hr
    ,finishTime24hr 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-03T20:13:40.400

如果您确实知道用于合并数组值的元素，您还可以使用哈希图在插入时进行合并。因此，一旦将元素添加到数组中，您就会创建一个散列

```
$bookings = array();
$hash = md5($arr['bookedArea'] . $arr['paidBy'] . $arr['startTime24hr'] . $arr['finishTime24hr']);
if ( array_key_exists($hash, $bookings) ){
    //add just another lane to the booking
}
else{
    //create a new booking entry
} 
```

这样你的代码可能会更有效率。

# html - 防止 HTML5 视频更改 Chrome 的图标和标题

> ID：10000308
> 
> 赞同：1
> 
> 时间：2012-04-03T19:50:27.273
> 
> 标签：html, google-chrome, html5-video, favicon

我有一个嵌入了 HTML5 视频的网站。但是，只要 Chrome 访问带有此类视频的站点，它就会覆盖页面`<title>`和快捷方式图标以显示暂停/播放符号和视频的播放时间。无论如何要防止这种情况发生？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T21:11:22.380

我有最新的 Chrome，但没有看到您提到的图标。我认为您可能有一个 Chrome 扩展程序可以做到这一点。你能检查一下吗？

# php - codeigniter 控制器无法识别传递的变量

> ID：10000328
> 
> 赞同：1
> 
> 时间：2012-04-03T19:51:42.670
> 
> 标签：php, javascript, html, codeigniter

我不知道我是否正确地提出了这个问题，但让我试着更好地解释自己。
我的页面上有以下菜单，一旦选择了新选择，就会输出新结果： ![选择菜单](../Images/8c1929b6d88ba2eeb31dc74657e69759.png)

`Izaberite pol:`并分别`Izaberite studente:`包含 3 个选项。`oba, zenski, muski``oba, stari, novi`

我添加了一些 Javascript 来识别选项更改并自动调用控制器操作：

```
$("select.filter").change(function () {
    var str = "";
    $("select option:selected").each(function () {
        str += $(this).attr('value') + "/";
    });
    window.open("http://vipassana-srbija.comli.com/index.php/login/trust/"+str,"_self");
}); 
```

从 Javacript 代码中可以看出，它将调用控制器的登录信任函数：

```
public function trust($tabela="letnji",$pol="oba", $student="oba"){

    $data['rezultat']=  $this->prijava_model->zgrabi_tabelu($tabela,$pol,$student);
    $data['tabela']=$tabela;
    $data['pol']=$pol;
    $data['student']=$student;

    $prijavljen = $this->session->userdata('prijavljen');
    if($prijavljen)
    {
        $this->load->view('prijava/trust.php', $data);  
    }
    else
    {
        redirect('login');
    }
} 
```

此外，您会注意到它使用了`Prijava_model`模型的`zgrabi_tabelu`功能：

```
function zgrabi_tabelu($tabela,$pol,$student){
    $upit_rezultat=array();

    if($pol=="oba" && $student="oba")
        $upit = $this->db->get($tabela);
    else if($pol!="oba" && $student!="oba")
        $upit=$this->db->get_where($tabela,array('pol'=>$pol,'stari_novi_student'=>$student));
    else if($pol!="oba" && $student=="oba")
        $upit=$this->db->get_where($tabela, array('pol'=>$pol));
    else if( $pol=="oba" && $student!="oba")
        ;//$upit=$this->db->get_where($tabela, array('stari_novi_student'=>$student));

    foreach($upit->result() as $red){
        array_push($upit_rezultat, $red);
    }

    return $upit_rezultat;
} 
```

而且我认为模型的`zgrabi_tabelu`功能存在问题，因为每个可能的组合都可以正常工作，除了最后一个，当我尝试通过仅更改最后一个选择菜单来获取数据时，`Izaberite studente:`所有其他选项都保持不变：

![不工作1](../Images/b36d69b60801e02390e5d3b0da0257c8.png) ***&&*** ![不工作2](../Images/d470885ad9733a43fa3d86e4b531af55.png) ***不会工作***

但是当我将以前的字段更改`Izaberite pol:`为旁边的任何内容时，`Oba`它会正常工作：

![作品](../Images/378ff2a59ccc8aa8bdf24a2bea7cb4b5.png)

最后让我为您提供菜单项的 HTML：

```
<div>
    <label>Izaberite kurs:</label>
    <select class="kurs" id="kurs_datum">
        <option value="letnji" selected='selected'>Letnji kurs(27.6 - 7.7.2012)</option>
        <option value="jesenji" >Jesenji kurs(10.10 - 21.10.2012)</option>
    </select>
</div>
<div>   
    <label>Izaberite pol:</label>
    <select class="filter" id="pol">
        <option value="oba" selected='selected'>Oba</option>
        <option value="zenski" >Ženski</option>
        <option value="muski" >Muški</option>
    </select>
</div>
<div>
    <label>Izaberite studente:</label>
    <select class="filter" id="student">
        <option value="oba" selected='selected'>Oba</option>
        <option value="novi" >Novi</option>
        <option value="stari" >Stari</option>
    </select>
</div> 
```

希望这是有道理的。如有必要，我很乐意进一步澄清这一点。
任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-03T20:51:26.777

在你的 jquery 调用中打开一个新窗口，我想你想删除那个逗号并在那里放一个斜杠

所以改变这个：

```
window.open("http://vipassana-srbija.comli.com/index.php/login/trust/"+str,"_self"); 
```

到：

```
window.open("http://vipassana-srbija.comli.com/index.php/login/trust/"+str+"/_self"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-03T21:27:47.040

```
function zgrabi_tabelu($tabela,$pol,$student){
$upit_rezultat=array();

if($pol=="oba" && $student="oba")
    $upit = $this->db->get($tabela);
else if($pol!="oba" && $student!="oba")
    $upit=$this->db->get_where($tabela,array('pol'=>$pol,'stari_novi_student'=>$student));
else if($pol!="oba" && $student=="oba")
    $upit=$this->db->get_where($tabela, array('pol'=>$pol));
else if( $pol=="oba" && $student!="oba")
    ;//$upit=$this->db->get_where($tabela, array('stari_novi_student'=>$student));

foreach($upit->result() as $red){
    array_push($upit_rezultat, $red);
}

return $upit_rezultat;
} 
```

你在第一行遗漏了一个 = ......

```
if($pol=="oba" && $student="oba") 
```

应该

```
if($pol=="oba" && $student=="oba") 
```

我相信 IF 函数会返回 false，因为它是一个 false 运算符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-03T21:27:33.827

附加说明，您将视图称为 '$this->load->view('prijava/trust.php', $data);' - trust.php 不应该只是信任 - CI 在视图中“要求”时将 .php 添加到末尾。

# c# - 如何发送 Request.Form

> ID：10000331
> 
> 赞同：0
> 
> 时间：2012-04-03T19:52:00.770
> 
> 标签：c#, asp.net

我的代码做的很糟糕。我将所有数据发布到实际页面并放入 html 输入：

```
private void GetPostedForm()
{
    System.Text.StringBuilder displayValues = new System.Text.StringBuilder();
    System.Collections.Specialized.NameValueCollection postedValues = Request.Form;

    for (int i = 0; i < postedValues.AllKeys.Length; i++)
    {
        String nextKey = postedValues.AllKeys[i];
        if (nextKey.Substring( 0, 2 ) != "__")
        {
            displayValues.Append( "<input type='hidden' name='" + nextKey + "' value='" + postedValues[i] + "'/>" );
        }
    }
    hiddensPost.InnerHtml = displayValues.ToString();
} 
```

但是此页面中的 html 输入对我来说毫无用处。我在两个旧页面之间放置一个页面（“A”发送表单到“B”）。现在我需要将“A”发送到“X”，然后发送到“B”。

问题是：如何将请求的表单放入实际表单中以发送到下一页而不用 HTML 做所有这些混乱？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-03T20:24:50.613

If you can, just change the method to `GET` and pass the QueryString along from page to page.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-03T20:13:50.727

您可以将步骤（A，X，B）及其可见输入放入单独的 asp-panels（pnlA，pnlX，pnlB）

然后只需切换面板的可见性处于您想要的状态。ViewState将为您完成（将控件状态存储到表单中的一个隐藏字段中，以便再次使用输入发布[）](http://msdn.microsoft.com/en-us/library/ms972976.aspx)

因此您可以使用一个 html 表单（著名的 asp.net 表单）发布 3 次用户输入的数据

另一个解决方案在[这里](http://msdn.microsoft.com/en-us/library/wdb4eb30%28v=vs.80%29.aspx)，asp.net 向导控件

# node.js - 使用 requirejs 优化器时是否可以在 html 文件中配置内容？

> ID：10000333
> 
> 赞同：1
> 
> 时间：2012-04-03T19:52:18.317
> 
> 标签：node.js, requirejs

我看到可以使用 onBuildWrite 获取 js 文件的内容，但我需要一种将值注入到我们的根 html 页面的方法，这可能吗？例如，我们想将我们的 less 文件换成 css 版本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T06:26:34.717

使用 node.js 是可能的：

```
var fs = require('fs');
// read html file
var fileContents = fs.readFileSync('index.html', 'utf8');
// replace rel attribute for less file with rel for css
fileContents = fileContents.replace(/stylesheet\/less/gi, 'stylesheet');
// replace file name
fileContents = fileContents.replace(/css\/application.less/gi, 'css/application.css');
// remove less runtime compiler (if needed)
fileContents = fileContents.replace(/<script.*?\bless\b[^"']*?\.js.*?<\/script>/g, '');
// write file back
fs.writeFileSync('index.html', fileContents, 'utf8'); 
```

只需将其添加为构建脚本的一部分，同时调用 r.js。

# linux - 如何使用调试版的 libc

> ID：10000335
> 
> 赞同：68
> 
> 时间：2012-04-03T19:52:25.263
> 
> 标签：linux, gdb, libc, debug-symbols, ldd

**问题的简短版本：** 如何让 gdb 使用调试符号`libc`？

**更长的版本：** 我正在使用 gdb 调试一个程序，我想查看有关`libc`. 但是，在调试过程中的某些时候，我会得到如下输出：

```
Catchpoint 2 (call to syscall futex), 0x00007ffff772b73e in ?? () from /lib/libc.so.6
(gdb) bt
#0  0x00007ffff772b73e in ?? () from /lib/libc.so.6
#1  0x00007ffff767fb90 in ?? () from /lib/libc.so.6
#2  0x00007ffff767a4c0 in vfprintf () from /lib/libc.so.6
#3  0x00007ffff768565a in printf () from /lib/libc.so.6
.... 
```

当我`info sharedlibrary`在断点处运行 gdb 时，我看到：

```
(gdb) info sharedlibrary
From                To                  Syms Read   Shared Object Library
0x00007ffff7dddaf0  0x00007ffff7df6704  Yes (*)     /lib64/ld-linux-x86-64.so.2
0x00007ffff7bc53e0  0x00007ffff7bd1388  Yes (*)     /lib/libpthread.so.0
0x00007ffff79ba190  0x00007ffff79bd7d8  Yes (*)     /lib/librt.so.1
0x00007ffff76538c0  0x00007ffff7766c60  Yes (*)     /lib/libc.so.6
0x00007ffff6c1fd80  0x00007ffff6c303c8  Yes (*)     /lib/libgcc_s.so.1
(*): Shared library is missing debugging information. 
```

当我跑步时，`ldd`我看到：

```
linux-vdso.so.1 =>  (0x00007ffff7fde000)
libpthread.so.0 => /lib/libpthread.so.0 (0x00007ffff7dbf000)
librt.so.1 => /lib/librt.so.1 (0x00007ffff7bb6000)
libc.so.6 => /lib/libc.so.6 (0x00007ffff7833000)
/lib64/ld-linux-x86-64.so.2 (0x00007ffff7fdf000) 
```

我正在使用 Ubuntu 10.04，我认为`libc`带有调试符号的版本在`/usr/lib/debug/lib`. 我尝试将我的`LD_LIBRARY_PATH`变量设置为在路径的前面，但这似乎没有什么不同。

我不完全清楚程序如何选择要加载的共享库，无论是在运行时设置还是在编译时设置（我有点假设运行时，但现在我不确定）。`libc`因此，感谢有关如何让 gdb 使用调试版本的信息。

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2012-04-04T06:12:55.057

> 我认为带有调试符号的 libc 版本在 /usr/lib/debug/lib 中。我尝试将我的 LD_LIBRARY_PATH 变量设置为在路径的前面，但这似乎没有什么不同。

这些*不是*您要寻找的机器人。

中的库`/usr/lib/debug`不是*真正的*库。相反，它们*仅*`.text`包含调试信息，但不包含`.data`真实的`libc.so.6`. [您可以在此处](http://sourceware.org/gdb/onlinedocs/gdb/Separate-Debug-Files.html)阅读有关单独的 debuginfo 文件的信息。

里面的文件`/usr/lib/debug`来自`libc6-dbg`包，GDB会*自动*加载它们，只要它们与你安装的`libc6`版本相匹配。如果你的`libc6`和`libc6-dbg`不匹配，你应该得到 GDB 的警告。

您可以通过设置来观察 GDB 试图读取的文件`set verbose on`。以下是您应该在何时`libc6`和`libc6-dbg`做匹配时看到的内容：

```
(gdb) set verbose on
(gdb) run
thread_db_load_search returning 0
Reading symbols from /lib64/ld-linux-x86-64.so.2...Reading symbols from /usr/lib/debug/lib/ld-2.11.1.so...done.
thread_db_load_search returning 0
done.
thread_db_load_search returning 0
Loaded symbols for /lib64/ld-linux-x86-64.so.2
Reading symbols from system-supplied DSO at 0x7ffff7ffb000...done.
WARNING: no debugging symbols found in system-supplied DSO at 0x7ffff7ffb000.
thread_db_load_search returning 0
Reading in symbols for dl-debug.c...done.
Reading in symbols for rtld.c...done.
Reading symbols from /lib/librt.so.1...Reading symbols from /usr/lib/debug/lib/librt-2.11.1.so...done.
thread_db_load_search returning 0
... etc ... 
```

更新：

> 例如我看到
> `Reading symbols from /lib/libc.so.6...(no debugging symbols found)...done`

这意味着您的 GDB 没有搜索`/usr/lib/debug`。可能发生的一种方法是，如果您设置`debug-file-directory`不`.gdbinit`正确。

这是默认设置：

```
(gdb) show debug-file-directory
The directory where separate debug symbols are searched for is "/usr/lib/debug". 
```

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2013-11-16T15:13:50.940

确保您已经安装了 libc 的调试符号：

```
sudo apt-get install libc6-dbg 
```

如果您在 x64 系统上调试 x86 代码：

```
sudo apt-get install libc6:i386
sudo apt-get install libc6-dbg:i386 
```

# php - 忽略 joomla 标签或将它们视为 netbeans 中的有效标签

> ID：10000336
> 
> 赞同：-1
> 
> 时间：2012-04-03T19:52:26.477
> 
> 标签：php, netbeans, joomla, dtd

在 netbeans 中开发 joomla 项目时，它认为 joomla 标签如下：

```
<jdoc:includes type="modules" name="kkk" /> 
```

作为无效标签，是否有任何方法可以修改 html dtd 或忽略 netbeans 中的某些标签？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T18:21:08.480

这已被添加到 Netbeans 错误跟踪器中。

[https://netbeans.org/bugzilla/show_bug.cgi?id=207296](https://netbeans.org/bugzilla/show_bug.cgi?id=207296)

# sql-server - 在 LINQ 查询中使用 DateTime?.Value.TimeOfDay

> ID：10000338
> 
> 赞同：8
> 
> 时间：2012-04-03T19:52:41.503
> 
> 标签：sql-server, asp.net-mvc, linq, entity-framework, timespan

我正在尝试在 ASP.NET MVC 3 上使用 LINQ 进行查询。

我有一个模型，我们称之为事件。此 Event 对象具有 DateTime? 的 Date 属性。我想要的是获取 2 个 TimeSpan 之间的事件。

现在我的代码如下所示：

```
TimeSpan From = new TimeSpan(8,0,0);
TimeSpan Until = new TimeSpan(22,0,0);

var events =
    from e in db.Events
    where e.Date.Value.TimeOfDay >= From,
          e.Date.Value.TimeOfDay <= Until
    select e; 
```

抛出异常，告诉我“LINQ to Entities 不支持指定的类型成员 'TimeOfDay'。”

我无法解决这个问题，而且我整天都在尝试。请帮助我，我很沮丧。:(

编辑：

我忘了在这里写 e.Date.Value 之后的“TimeOfDay”。无论如何，我在我的代码中做了。

我不能使用 DateTime 因为我必须过滤在一天中的特定时间之间发生的事件，尽管事件的日期。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-03T20:07:47.173

使用[LINQ-to-Entities 的日期和时间规范函数](http://msdn.microsoft.com/en-us/library/bb738563(VS.100).aspx)。具体来说，看

```
CreateTime(hour, minute, second) 
```

如果您在调用规范函数时需要帮助，请查看[如何：调用规范函数](http://msdn.microsoft.com/en-us/library/dd456873.aspx)。

# c++ - 没有变量的 C++ WriteProcessMemory

> ID：10000340
> 
> 赞同：-3
> 
> 时间：2012-04-03T19:52:48.130
> 
> 标签：c++, windows

我想使用 Dword 或 Int 在 C++ 中执行 WriteProcessMemory，而不将其存储在变量中我找到了一种方法来做到这一点，但我只能用字节来做到这一点。有谁知道如何做到这一点？？这个使用字节工作。

```
WriteProcessMemory(hProcess, (void*)(BasePointer + 0x728),"\x90\x90", 4, NULL); 
```

感谢大家的帮助，我做了一个函数，它的工作非常好

```
void WriteMemory(DWORD Address,DWORD NewValue, int NewValueSize)
{
    WriteProcessMemory(hProcess, (void*)Address, (void*)&NewValue, NewValueSize, NULL);
}

int main()
{
    srand(time(0));
    GetProcess();
    WriteMemory((BasePointer + 0x6F8),2+rand()%65500,2);
    CloseHandle(hProcess);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-03T20:03:43.507

将数据放入一个数组，并有一个小循环从数组中获取每个项目，将其写入目标进程，然后移动到下一个：

```
struct data {
    DWORD offset;
    DWORD length;
    char data[256];
};

data items[] = {
    {0x728, 4, "\x90\x90"},
    // ...
};

for (int i=0; i<elements(items); i++)
    WriteProcessMemory(hProcess, (void *)(BasePointer + items[i].offset), items[i].data, items[i].length, NULL); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-03T22:39:06.090

您的代码使用字节“工作”的原因是您使用的是*字符串文字*。字符串文字是 char 数组，如果上下文需要，char 数组会自动转换为指向第一个元素的指针，就像您尝试将一个作为`WriteProcessMemory`.

您可以将任何您想要的值写为字符串文字，包括一个四字节的 DWord，只要您愿意**一次一个字节地表达它**。例如，`"\x70\x71\x72\x73"`。在 Windows 上，这相当于指向 DWord 值 0x73727170 的指针。不过，您可能不想这样做；表达这样的数字很乏味。

C++ 不提供任何用于拥有非 char 类型的文字数组的工具。只是对它的需求不多。对文字 char 数组的需求很高，因为每个人都处理文本，所以我们想要在代码中用简单的方法来表达它。尽管每个人都使用数字，但我们很少需要在代码中表达数字数据块，尤其是中间表达式。

你还没有给出你的问题要解决的实际问题。您只是在问是否有可能做某事。我很抱歉成为坏消息的承担者，但答案是**您所要求的不能在 C++ 中完成**。你只需要像其他人一样声明一个变量。变量很便宜；在需要时随时使用它们。尽管如此，我们还是[向您展示了通过使用子例程来保持代码简洁的方法](https://stackoverflow.com/a/9930116/33732)。如果这是您的目标，宏还可以帮助缩短您的代码。

另请注意，代码中的字符串文字是一个由*三个*字符组成的数组——引号之间的两个字符，加上编译器自动包含在所有字符串文字末尾的 nul 字符。你告诉函数你已经提供了一个指向一个*四*字节块的指针，这是错误的。函数写入另一个进程的第四个字节将具有未指定的值。

# php - php urlencode 编码错误？

> ID：10000341
> 
> 赞同：1
> 
> 时间：2012-04-03T19:52:49.617
> 
> 标签：php, urlencode

如果我尝试对网址进行编码

```
http://herthabsc.de/index.php?id=3631&tx_ttnews[tt_news]=13144&cHash=9ef2e9ee006fb16188ebf764232a0ba9 
```

with `urlencode()`or`http_build_query()`它给了我结果

```
http%3A%2F%2Fherthabsc.de%2Findex.php%3Fid%3D3631%26%23038%3Btx_ttnews%5Btt_news%5D%3D13144%26%23038%3BcHash%3D9ef2e9ee006fb16188ebf764232a0ba9 
```

但这不是应该的。有已知的错误吗？还是wordpress使用中的问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-03T20:37:12.060

您已经对 URL 进行了双重编码。在您的输出字符串上运行`urldecode()`会给我以下信息：`http://herthabsc.de/index.php?id=3631&#038;tx_ttnews[tt_news]=13144&#038;cHash=9ef2e9ee006fb16188ebf764232a0ba9`

**编辑：** 尝试以下

```
urlencode(html_entity_decode('http://herthabsc.de/index.php?id=3631&#038;tx_ttnews[tt_news]=13144&#038;cHash=9ef2e9ee006fb16188ebf764232a0ba9')); 
```

# asp.net - 捕获 sql 参数并将其显示在 asp.net 报告中

> ID：10000346
> 
> 赞同：0
> 
> 时间：2012-04-03T19:53:01.363
> 
> 标签：asp.net

我有一个根据日期范围显示数据的报告：开始日期和结束日期。这些是提供给数据集的参数。有没有办法拦截这些参数并将它们提供给报告？

这是我的代码：

```
reportViewer1.LocalReport.DataSources.Clear(); 
ReportDataSource rds2 = new ReportDataSource("DataSet1", ods); 
reportViewer1.LocalReport.DataSources.Add(rds2); 
ods.SelectMethod = "GetTransactionByDateRange"; 
ods.TypeName = "ConsumablesTransactionLogBLL"; 

ods.SelectParameters.Add("sd", System.TypeCode.String, dateRange[0]); 
ods.SelectParameters.Add("ed", System.TypeCode.String, dateRange[1]); 
reportViewer1.LocalReport.ReportPath = Server.MapPath("~/Reports/Consumables_By_Range.rdlc"); 
```

谢谢，

理庄

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-03T20:53:48.353

创建参数并将它们绑定到报告

```
 Microsoft.Reporting.WebForms.ReportParameter sd = new Microsoft.Reporting.WebForms.ReportParameter("sd",dateRange[0]);
  Microsoft.Reporting.WebForms.ReportParameter ed = new Microsoft.Reporting.WebForms.ReportParameter("ed",dateRange[1]);

  reportViewer1.LocalReport.SetParameters(new ReportParameter[] { sd, ed}}); 
```

在 RDLC 中，您需要在 ReportData 窗口中设置参数以匹配名称。

# xslt - 使用 XSLT 2.0 在命名模板中使用节点参数

> ID：10000350
> 
> 赞同：0
> 
> 时间：2012-04-03T19:53:10.767
> 
> 标签：xslt, xslt-2.0

我正在尝试使用 XSLT 2.0 生成以 RDF/XML 编码的内容的 XHTML 视图。我想使用命名模板来模块化并简化我的 XSL 样式表。

我最初尝试将节点传递给我的命名模板显然不起作用。

我是 XSLT 的新手，但网络搜索让我相信我的问题是因为 XSL 传递的是结果树片段 (RTF) 而不是节点。这绝对是 XSLT 1.0 的问题，但它是 2.0 的问题吗？不幸的是，我不知道如何在 stackoverflow 和类似网站上应用针对 XSL 节点传递问题的解决方案。

我想用 XSLT 2.0 做什 么？

我应该采取什么方向？

```
<xsl:template match="rdf:RDF">
  <xsl:variable name="report" select="owl:NamedIndividual[@rdf:about='&ex;quality_report']"/>
  <table>
    <tr>
      <xsl:for-each select="owl:NamedIndividual[@rdf:about=$report/mdsa:hasProductScope/@rdf:resource]">
        <td>
          <xsl:call-template name="quality_label">
            <xsl:with-param name="product_scope" select="."/>
          </xsl:call-template>
        </td>
      </xsl:for-each>
    </tr>
  </table>
</xsl:template>

<xsl:template name="quality_label">
  <xsl:param name="product_scope"/>
  <table>
    <xsl:for-each select="owl:NamedIndividual[@rdf:about=$product_scope/mdsa:scopeDataEntity/@rdf:resource]">
      <tr><td>
      <!-- CALL ANOTHER NAMED TEMPLATE TO PROCESS DATA ENTITY -->
      </td></tr>
    </xsl:for-each>
  </table>
</xsl:template> 
```

我也试过了

```
<xsl:with-param name="entity" select="current()"/> 
```

示例 RDF/XML

```
 <owl:NamedIndividual rdf:about="&ex;modis_aqua_aod_product_scope">
    <rdf:type rdf:resource="&mdsa;ProductScope"/>
    <mdsa:scopeDataEntity rdf:resource="&ex;modis_aqua_global_data_entity"/>
    <mdsa:scopeDataEntity rdf:resource="&ex;modis_aqua_global_land_only_data_entity"/>
    <mdsa:scopeDataEntity rdf:resource="&ex;modis_aqua_e_conus_data_entity"/>
    <mdsa:scopeDataEntity rdf:resource="&ex;modis_aqua_w_conus_data_entity"/>
    <mdsa:scopeDataEntity rdf:resource="&ex;modis_aqua_central_america_data_entity"/>
    <mdsa:scopeDataEntity rdf:resource="&ex;modis_aqua_south_america_data_entity"/>
    <mdsa:scopeDataEntity rdf:resource="&ex;modis_aqua_s_south_america_data_entity"/>
    <mdsa:scopeDataEntity rdf:resource="&ex;modis_aqua_africa_above_equator_data_entity"/>
    <mdsa:scopeDataEntity rdf:resource="&ex;modis_aqua_equatorial_africa_data_entity"/>
    <mdsa:scopeDataEntity rdf:resource="&ex;modis_aqua_africa_below_equator_data_entity"/>
    <mdsa:scopeDataEntity rdf:resource="&ex;modis_aqua_europe_mediterranean_data_entity"/>
    <mdsa:scopeDataEntity rdf:resource="&ex;modis_aqua_eurasian_boreal_data_entity"/>
    <mdsa:scopeDataEntity rdf:resource="&ex;modis_aqua_east_asia_midlatitudes_data_entity"/>
    <mdsa:scopeDataEntity rdf:resource="&ex;modis_aqua_peninsular_southeast_asia_data_entity"/>
    <mdsa:scopeDataEntity rdf:resource="&ex;modis_aqua_indian_subcontinent_data_entity"/>
    <mdsa:scopeDataEntity rdf:resource="&ex;modis_aqua_australian_continent_data_entity"/>
    <mdsa:scopeVariable rdf:resource="urn:nasa:eosdis:variable:MYD08_D3.051:Optical_Depth_Land_And_Ocean_Mean"/>
  </owl:NamedIndividual>

  <owl:NamedIndividual rdf:about="&ex;quality_report">
    <rdf:type rdf:resource="&mdsa;QualityReport"/>
    <dcterms:identifier rdf:datatype="http://www.w3.org/2001/XMLSchema#string">01ffc5bfba33e7139ffbd4b7185f9b0e</dcterms:identifier>
    <mdsa:hasProductScope rdf:resource="&ex;modis_terra_aod_product_scope"/>
    <mdsa:hasProductScope rdf:resource="&ex;modis_aqua_aod_product_scope"/>
  </owl:NamedIndividual> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-03T21:09:52.913

您传递给命名模板的元素是一个名为 owl:namedIndividual 的元素。被调用的模板试图找到这个元素的子元素，它也被称为 owl:namedIndividual，但是你的 owl:namedIndividual 元素没有这个名字的子元素。

如果您养成在参数和变量声明中使用“as”属性的习惯，例如 as="element(owl:namedIndividual)"，则可以轻松诊断出此类问题。这往往会使错误脱颖而出并提供更好的诊断；如果你将它与模式感知结合起来，你甚至会在编译时收到错误通知。

# ruby-on-rails - Ajax队列骨干js

> ID：10000352
> 
> 赞同：10
> 
> 时间：2012-04-03T19:53:20.100
> 
> 标签：ruby-on-rails, ajax, backbone.js, ruby-on-rails-3.2

我在 Rails 3.2.2 上运行 Backbone js 0.9.2，我有一个添加成本行的页面。成本有 3 个文本字段：标题、描述和价格。

我正在节省模糊的每一项成本。

`model.save()`以非常短的间隔被多次调用。它发出一个`create(post)`请求，然后`update(put)`很快发出一个请求。我遇到的问题是 PUT 请求有时会在 POST 之前到达服务器，结果是该模型被创建并持续了两次（重复）。

为了节省模糊是请求的行为，所以我需要一种方法来排队请求。我读过一些关于 Spine js 的东西，他们通过某种队列来解决它。我也看过[这个](https://github.com/jbutz/Backbone.Sync.AjaxQueue)，但似乎无法弄清楚。

感觉这应该是一个常见问题，使用“单页应用程序”但找不到任何相关信息。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-04T08:18:24.703

您可以覆盖 save 方法并创建一个带有[延迟对象](http://api.jquery.com/category/deferred-object/)的队列。例如，

```
var MDef = Backbone.Model.extend({
    url: "/echo/json/?delay=3",

    initialize: function() {
        this.queue = $.Deferred();
        this.queue.resolve();
    },

    save: function(attrs,options) {
        var m = this; 
        console.log("set "+JSON.stringify(attrs));

        // this.queue = this.queue.pipe with jquery<1.8
        this.queue = this.queue.then(function() {
            console.log("request "+JSON.stringify(attrs));
            return Backbone.Model.prototype.save.call(m, attrs, options);
        });            
    }
});

var m = new MDef();
m.save({title: "a title"});
m.save({description: "a description"});
m.save({price: "a price"}); 
```

还有一个小提琴：http: [//jsfiddle.net/nikoshr/8nEUm/](http://jsfiddle.net/nikoshr/8nEUm/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-03T20:12:01.197

`debounce`来自[underscore.js](http://underscorejs.org/#throttle)的用户。

> 创建并返回传递函数的新去抖动版本，该版本将推迟其执行，直到自上次调用以来等待毫秒过去后。

这样它只会在最后一个`blur`事件之后触发一次。

# oracle - 具有多个表的 Oracle 查询

> ID：10000355
> 
> 赞同：4
> 
> 时间：2012-04-03T19:53:24.840
> 
> 标签：oracle

我正在尝试显示具有职责的志愿者信息以及分配的绩效。我想显示这些信息。但是，当我运行查询时，它没有从相同的性能中收集不同的日期。而且availability_date也混在一起了。它是正确的查询吗？我不确定这是正确的查询。你能给我一些反馈吗？谢谢。

![在此处输入图像描述](../Images/bd5e0635320d1967bca5afe49916be80.png)

查询在这里。

```
SELECT Production.name, performance.performance_date, volunteer_duty.availability_date, customer.name "Customer volunteer", volunteer.volunteerid, membership.name "Member volunteer", membership.membershipid
FROM Customer, Membership, Volunteer, volunteer_duty, duty, performance_duty, performance, production
WHERE  
Customer.customerId (+) = Membership.customerId AND
Membership.membershipId = Volunteer.membershipId AND
volunteer.volunteerid = volunteer_duty.volunteerid AND
duty.dutyid = volunteer_duty.dutyid AND
volunteer_duty.dutyId = performance_duty.dutyId AND
volunteer_duty.volunteerId = performance_duty.volunteerId AND
performance_duty.performanceId = performance.performanceId AND
Performance.productionId = production.productionId 
```

--添加图像--结果： ![在此处输入图像描述](../Images/9aad059a1b2e7018130876aa6794b2ca.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-03T20:08:14.647

该查询似乎是合理的，因为它似乎在所有表之间具有适当的连接条件。我不清楚您对结果有什么问题；如果您更详细地解释和/或显示数据的相关子集，可能会有所帮助。

但是，由于您说存在与 相关的一些问题`availability_date`，我的第一个想法是您希望在该列上设置一些条件，以确保在给定表演日期有志愿者可以完成给定职责。这可能意味着简单地添加`volunteer_duty.availability_date = performance.performance_date`到查询条件。

我更一般的建议是从头开始编写查询，一次添加一个表，并使用 ANSI 连接语法。这将更清楚哪些条件与哪些连接相关，并且如果您一次添加一个表，希望您会看到结果出错的点。

例如，我可能会从这个开始：

```
SELECT production.name, performance.performance_date
  FROM production
       JOIN performance ON production.productionid = performance.productionid 
```

如果这给出了有意义的结果，那么我将继续添加一个连接`performance_duty`并运行该查询。等等。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-03T20:07:49.373

我建议您明确编写 JOINS，而不是使用 WHERE-Syntax。

使用 INNER JOINs 您描述的查询可能如下所示：

```
SELECT *
FROM volunteer v
INNER JOIN volunteer_duty vd ON(v.volunteerId = vd.colunteerId)
INNER JOIN performance_duty pd ON(vd.dutyId = pd.dutyId AND vd.volunteerId = pd.colunteerId)
INNER JOIN performance p ON (pd.performanceId = p.performanceId) 
```

# tfs - 在 TFS API 中将 WorkItem 恢复（或撤消保存的更改）到旧版本

> ID：10000356
> 
> 赞同：3
> 
> 时间：2012-04-03T19:53:24.807
> 
> 标签：tfs, tfs-sdk

我正在寻找使用 TFS API 为 TFS 工作项创建“撤消”机制 - 这将撤消已提交的更改。基本上，在将新数据（也使用 API）保存到工作项之后，我希望可以选择将 WorkItem 恢复到以前的版本。

像这样的伪代码......

1) 获取 Id:xxxxxx 的当前工作项

2）获取这个最新工作项的“revision id”并存储在“PreviousRevId”中

3）修改字段值

4)保存

5）无论出于何种原因，我们不再需要这些更改（为简洁起见，排除了有关原因的域逻辑）

6）恢复到旧版本（“PreviousRevId”）并使其成为当前（最新）版本

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-03T22:23:06.123

看看我创建的 Work Item History Visualizer。通过获取工作项 ID，您可以提取所有工作项字段的历史记录。

[http://geekswithblogs.net/TarunArora/archive/2011/08/21/tfs-sdk-work-item-history-visualizer-using-tfs-api.aspx](http://geekswithblogs.net/TarunArora/archive/2011/08/21/tfs-sdk-work-item-history-visualizer-using-tfs-api.aspx)

但这只会帮助您获取信息，其余的您必须构建自己的控件来构建还原功能。

**编辑：** ****还值得检查这个 Visual Studio 扩展 **** [http://visualstudiogallery.msdn.microsoft.com/d127b275-b7b6-4504-b01e-58b4a010ff53](http://visualstudiogallery.msdn.microsoft.com/d127b275-b7b6-4504-b01e-58b4a010ff53) 这让您可以看到历史日期的工作项目。为您提供您所追求的基线影响。高温高压**

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T00:26:08.093

没有自动恢复的方法，但它是一个简单的 foreach 循环遍历字段以将它们更新为以前的值。您还必须担心链接和附件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-03T21:23:44.663

我不认为这可以通过 SDK 来实现，您可以直接对数据库执行此操作，但这当然不推荐，无论如何保存工作项的主要 2 个表是 WorkItemsWere 和 WorkItemsLates 请参见以下内容：

![在此处输入图像描述](../Images/18a3e51cbc4ad782ae4e4faabdd5ff87.png)**

# python - 确定调用了哪个函数

> ID：10000358
> 
> 赞同：0
> 
> 时间：2012-04-03T19:53:30.127
> 
> 标签：python, function

```
def f():
   return

g=f 
```

g.func_name 是“f”

我如何得到“g”？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-03T19:57:39.583

[你不能。](http://docs.python.org/faq/programming.html#how-can-my-code-discover-the-name-of-an-object)

**编辑：** [`gc.get_referrers`](http://docs.python.org/library/gc.html#gc.get_referrers)存在，但不会告诉你哪个函数对象的引用被用来调用它，所以它对你没有帮助。此外，使用该函数时有一些注意事项，我不知道它是否适用于 CPython 以外的实现。不鼓励在生产代码中使用它。

*最后一点，尽管关于您是否可以确定*对象名称的常见问题解答可能并不完全正确，但它对您是否*应该*死心塌地的见解。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-03T20:01:01.637

当*f*由*def*创建时，同时创建*__name__属性。*该属性被分配给函数对象，并且无论您随后将函数分配给什么，它都会持续存在。

通常，对象不知道它指向哪些变量。

但是，我们确实有像 gc.get_referrers() 这样的工具，而不是使用特定于实现的逻辑来查找对对象的所有引用：

```
>>> def f(x):
    return x**2

>>> g = f

>>> import gc
>>> gc.get_referrers(f)[0].keys()
['g', 'f', '__builtins__', '__package__', 'gc', '__name__', '__doc__'] 
```

另一种技术是扫描命名空间以查找特定对象的所有实例：

```
>>> [key for key, value in globals().items() if value == f]
['g', 'f'] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-03T20:02:28.253

您可以通过使用`inspect`模块检查源代码来做到这一点，并且只有在某些限制下（至少，您需要能够获得提到相关名称的行）。

你绝对不应该这样做，除非你真的知道你为什么需要它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-03T20:04:35.520

```
a = 1
b = 1
c = 1 
```

1的名字是什么？这个问题还有意义吗？

函数是与任何其他对象一样的对象，例如`1`or `"cats"`。它有一个`__name__`属性可以告诉你它最初被定义为什么名称，但可以为它分配其他名称，并且在这些分配的对象上不保留任何记录。

您可以搜索它的所有局部和全局变量，但这不会找到所有可能的引用；对函数的引用可以保存在诸如字典或列表之类的容器中，作为对象属性，作为其他模块中的全局变量，可能还有我现在没有想到的其他地方。哦！关闭。不过，这是要点：

```
def f():
    pass

g = f

allvars = dict(globals())
allvars.update(locals())
funcnames = [key for (key, value) in allvars.iteritems() if value is f]
# returns ['g', 'f'] 
```

# c - strcat 和 malloc

> ID：10000359
> 
> 赞同：0
> 
> 时间：2012-04-03T19:53:31.877
> 
> 标签：c, string, malloc

目前，我需要将 strcat() 2 个字符串放在一起。问题是我必须这样做 3 次。（总共 6 个串联）。过程是这样的，使用循环重复 3 次：

1.  malloc 一个字符串
2.  使用for循环，调用strcat 2次
3.  释放字符串

问题是，即使在我释放字符串并重新 malloc 之后，strcat 似乎仍在继续连接前一个字符串。

例如：

**AA BB CC DD EE FF 的预期输出**

*   strcat 字符串 1：AABB
*   strcat 字符串 2：CCDD
*   strcat 字符串 3：EEFF

**实际输出：**

*   strcat 字符串 1：AABB
*   strcat 字符串 2：AABBCCDD
*   strcat 字符串 3：AABBCCDDEEFF

有谁知道它为什么这样做？

```
void sendInitialHand(card * deck) {

    char * stringToSend;
    playerNode * curNode;
    curNode = housePlayers.head;

    for (int i=0; i<housePlayers.playerCount; i++) {

        stringToSend = malloc(sizeof(char)*6);

        for (int j=0; j<52; j++) {
            if (deck[j].inPlay == curNode->playerFD) {
                strcat(stringToSend, deck[j].identifier);
            }
        }

        for (int j=0; j<52; j++) {
            if (deck[j].inPlay == 10) {
                strcat(stringToSend, deck[j].identifier);
            }
        }    

        printf("[NETWORK] Send %d the following: %s\n", curNode->playerFD, stringToSend);
        //send(curNode->playerFD, stringToSend, 6, 0);
        free(stringToSend);
        curNode = curNode->next;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-03T19:58:31.857

之后`ptr=malloc(…)`，之前`strcat()`，用 初始化空间`*ptr = '\0';`。返回的内存`malloc()`通常不归零。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-03T19:56:56.990

使用 printf 语句检查你的循环结构，很可能你没有释放你认为的东西。将根据代码编辑答案..

你只是重新malloc，它只是说嘿我要在这里写..这就是你已经说过的。尝试释放/重新初始化变量

# java - Java - TCP 服务器无法从 TCP 客户端读取

> ID：10000361
> 
> 赞同：1
> 
> 时间：2012-04-03T19:53:59.440
> 
> 标签：java, tcp

我正在尝试让客户端和服务器使用 TCP 相互通信。原始代码运行良好，直到我对其进行修改以添加更多功能。现在，当客户端写入服务器时，服务器似乎永远不会收到任何消息。

这是客户端和服务器的输出：

客户：欢迎来到Cubby！从以下选项中选择： 然后列出选项。然后将选择写入控制台以进行调试。然后程序要求输入用户名，用户输入一个。然后控制台等待。

服务器：服务器输出它正在等待客户端连接。然后它会在客户端连接时显示确认。然后它什么也不做。它应该将客户端发送的选择写入控制台。

```
#Client#

import java.math.BigInteger;
import java.nio.file.Path;
import java.nio.file.Paths;
import java.io.*;
import java.net.*;
import java.security.*;
import java.util.*;
public class Client {

private static boolean useSockets = true;   // Easy for debugging; turns sockets on/off

public static void main(String[] args) throws Exception {

    Socket echoSocket = null;  // Client to server socket connection object
    PrintWriter out = null;    // Out prints to the socket
    BufferedReader in = null;  // In reads from the socket
    int portno = 4444;         // The port number of the server we are connecting to

        //This assumes the server is also run on a local machine
        InetAddress server_name = InetAddress.getLocalHost();

        try {
            echoSocket = new Socket(server_name, portno);
        } catch (UnknownHostException e) {
            System.err.println("Don't know about host.");
            System.exit(1);
        } catch (IOException e) {
            System.err.println("Couldn't get I/O for the connection.");
            System.exit(1);
        }

        //Out will write to the socket and in will read from the socket
        out = new PrintWriter(echoSocket.getOutputStream());
        in = new BufferedReader(new InputStreamReader(echoSocket.getInputStream()));

    //Read input from the console
    BufferedReader stdIn = new BufferedReader(new InputStreamReader(System.in));
    Scanner keyboard = new Scanner(System.in);
    //At this point we assume that a TCP connection has been made to the server
    //We now ask the user for a username and password. 
    //If it is the users first time logging in then an account is created.

    String choice = welcomeMessage(keyboard);
    System.out.println(choice);
    if(choice.equals("1")){
        out.println(choice);
        New_Userlogin(in, out, stdIn);
    }
    else if (choice.equals("2")){
        out.print(choice);
        Current_Userlogin(in, out, stdIn);
    }
    else{
        //Exit the program
    }

    //User has access to Cubby at this point

    //Operating System stuff
    String os = System.getProperty("os.name").toLowerCase();
    String path = System.getProperty("user.home");

    if (os.indexOf("win") >= 0) {
        path = path+"\\Cubby";
    } else if (os.indexOf("mac") >= 0 || os.indexOf("nix") >= 0 || os.indexOf("nux") >= 0) {
        path = path+"/Cubby";
    } else {
        System.out.println("Your OS is not supported");
    }

    //Create the Cubby folder if it doesn't exist
    File f = new File(path);
    if(!f.exists()){
        f.mkdir();
    }

    Path dir = Paths.get(path);
    WatchDir monitordir = new WatchDir(dir, true);
    monitordir.processEvents();

    // talking with server handled in WatchDir

    //user requests to quit
    //sign off from server

    if (useSockets)
    {
        out.close();
        in.close();
        echoSocket.close();
    }
    stdIn.close();
}

public static String welcomeMessage(Scanner keyboard){
    System.out.println("Welcome to Cubby!");
    System.out.println("Select from one of the options below: ");
    String choice = "0";
    while((!choice.equals("1")) & (!choice.equals("2")) & (!choice.equals("3"))){
        System.out.println("1\. Create an account: ");
        System.out.println("2\. Login with an existing account: ");
        System.out.println("3\. Exit: ");
        choice = keyboard.nextLine();
    }
    return choice;
}

public static void New_Userlogin(BufferedReader in, PrintWriter out, BufferedReader stdIn) throws Exception{
    while(true){
        System.out.println("Please enter a username: ");
        String username = stdIn.readLine();
        out.print(username);
        int serv_rep = in.read();
        if(serv_rep == 0){
            System.out.println("Username already taken");
        }
        else{
            System.out.println("Account successfully created");
            while(true){
                System.out.println("Enter a password: ");
                String password = stdIn.readLine();
                System.out.println("Confirm Password: ");
                String password_check = stdIn.readLine();
                if(!password.equals(password_check)){
                    System.out.println("Passwords did not match. Try again");
                }
                else{
                    String hashPass = generateHash(password);
                    password = "0000000000000000000";
                    out.print(hashPass);
                    break;
                }
                break;
            }
        }
    }
}

public static void Current_Userlogin(BufferedReader in, PrintWriter out, BufferedReader stdIn) throws Exception{
    String loginResponse = "invalid";

    while (loginResponse != "Good")
    {
        System.out.println("Please enter your username: ");
        String username = stdIn.readLine(); // read in username

        System.out.println("Please enter your password:");
        String password = stdIn.readLine();

        // Hash the password
        String hashPass = generateHash(password);
        password = "0000000000000000000";

        if (useSockets)
        {
            // Now we need to send the username and hashedpw to the server for validation
            out.print(username + "\n" + hashPass);

            // Now we need to wait for a valid reply from the server
            loginResponse = in.readLine();
        }

        loginResponse = "Good";

        if (loginResponse != "Good")
        {
            System.out.println("Invalid username and password");
        }
    }
}

private static String generateHash(String password) throws Exception
{
    byte[] hashPass = null;
    String hashedPassString = null;

    String saltedpw = "!The$Salt^^~" + password;

    System.out.println(saltedpw);

    MessageDigest sha = MessageDigest.getInstance("SHA-256");
    hashPass = sha.digest(saltedpw.getBytes("UTF-8"));

    BigInteger number = new BigInteger(1, hashPass);
    hashedPassString = number.toString(16);

    System.out.println(hashedPassString);

    // For security, Java recommends setting the plaintext pw to all 0s after use
    saltedpw = "0000000000000000000000000000000000";
    password = "0000000000000000000000000000000000";

    return hashedPassString;
}

}

#Server#
import java.net.*;
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.sql.Statement;
import java.util.Scanner;
import java.io.*;

public class Server {
//global variable to store the last IP used by the Client
public static int LAST_IP;

public static void main(String[] args) throws IOException, ClassNotFoundException, SQLException {
    checkDir();

    //First a socket is created on the given port, 4444
    ServerSocket serverSocket = null;
    try {
        serverSocket = new ServerSocket(4444);
    } catch (IOException e) {
        System.err.println("Could not listen on port: 4444");
        System.exit(1);
    }

    //Then the server does an accept. The server will idle until it 
    //finds a client to accept it. As it stands, this code will only work
    //for one client at a time. There does exist code out there to allow for
    //multiple clients if we want to look into that.
    Socket clientSocket = null;
    try {
        System.out.println("Waiting for a client to connect");
        clientSocket = serverSocket.accept();
    } catch (IOException e) {
        System.err.println("Accept failed.");
        System.exit(1);
    }
    System.out.println("Server connected to client");
    PrintWriter out = new PrintWriter(clientSocket.getOutputStream(), true);
    BufferedReader in = new BufferedReader(new InputStreamReader(clientSocket.getInputStream()));

    //The first thing from the client should be a number indicating whether or not
    //we need to log the user in or create a new account

    //The first is an int indicating new user or an existing user
    String choice = null;
   // if(in.ready()){
    Scanner keyboard = new Scanner(clientSocket.getInputStream());
    choice = keyboard.next();
    System.out.println(choice);
    //}

    if(choice.equals("1")){
        String username = in.readLine();
        createNewUser(username);
    }
  //  else{
    //  String username = in.readLine();
        //String password = in.readLine();
        //if(testCredentials(username, password)){
            //out.print("Good");
        //}

    out.close();
    in.close();
    clientSocket.close();
    serverSocket.close();
}

public static void checkDir(){
    File f = new File("Users");

    //If this is the first time the server is run, there wont be any folder
    //If the folder exists, then we leave it alone.
    if(!f.exists()){
        f.mkdir();
    }
}

public static String createNewUser(String name){
    //Query the SQL database looking for a username that matches the one a user 
    //has requested. If there is no username, then return 1\. If a match was found
    //return 0;
    System.out.println("Successfully got to the new User login");

    return "0";
}
public static boolean testCredentials(String username, String pass) throws FileNotFoundException, ClassNotFoundException, SQLException
{   
}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-03T19:58:43.997

根据@asgs 的要求，我将其发布为答案，以防其他人偶然发现此问题：

您应该尝试在使用`out.flush()`.

# c# - Java android客户端与C#服务器的通信

> ID：10000365
> 
> 赞同：1
> 
> 时间：2012-04-03T19:54:15.383
> 
> 标签：c#, android, client

我目前正在编写一个具有客户端服务器架构的应用程序。

客户端是 Java android 应用程序服务器是 C# 应用程序。

客户端将从服务器中提取数据，但在某些情况下，也会将一些数据推送到 C# 服务器。

服务器需要转发客户端的数据是数据结构列表（可能是 XML 的形式？），有时是二进制数据，如文件。

客户端和服务器通过无线网络进行通信。

速度和可扩展性是我在系统设计中的首要任务，...

我必须自己编写服务器和客户端。我将使用套接字进行通信。

我需要您对我应该使用的协议形式提出建议，以便在 Java 客户端和 C# 服务器之间交换数据。

我是否应该在 java 和 C# 中编写类似的数据结构（这似乎是多余的）并将它们序列化？

还是我应该交换 xml ？

我还不确定最好的方法是什么.. 基本上会有来自客户端的命令和服务器将响应数据

请就这个话题给我建议，通过 wifi 传输的数据可能大到几场演出，所以速度非常重要。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-03T20:04:57.470

我相信`WCF`这可能是合适的，`WCF`使用肥皂，所以 Java 实现应该可以很好地工作。 `WCF`还支持流式传输，因此可以传输大文件，尽管我不确定 Java 是否支持流式传输协议。

至于性能，您可能会受到设备速度而不是协议的限制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-03T20:13:26.720

请看一下 TechEd 2011 的本次会议：“我的客户正在使用 iPhone/Android，但我是 Microsoft Guy。现在怎么办？”

[http://channel9.msdn.com/Events/TechEd/NorthAmerica/2011/DPR304](http://channel9.msdn.com/Events/TechEd/NorthAmerica/2011/DPR304)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-03T22:02:44.903

如果您想在客户端和服务器之间共享代码（并且如果序列化/反序列化有意义），可能值得研究[MonoDroid 。](http://xamarin.com/monoforandroid)

由于我不知道您在构建什么，我建议您在继续之前阅读 REST。它应该为您提供宝贵的指导，告诉您如何创建一个可以被各种客户端轻松使用的漂亮 API。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-03T22:13:49.623

好吧，总是有 JSON。它应该在两端都得到很好的支持，并且易于您的服务器生成和客户端使用。不确定它是否有助于解决您的带宽问题...

# jquery - jquery追加截断

> ID：10000368
> 
> 赞同：1
> 
> 时间：2012-04-03T19:54:18.320
> 
> 标签：jquery

我在 Jquery 中有一个选择列表框，我正在做类似的事情：

```
 $("#Deg").append(degtems); 
```

当我多次调用上述代码时，它一直在附加。我如何截断然后追加。

感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-03T19:55:34.717

先打电话[`.empty()`](http://api.jquery.com/empty/)：

```
$("#Deg").empty().append(degtems); 
```

..或者你可以简单地使用[`.html()`](http://api.jquery.com/html/)@KevinB在[下面](https://stackoverflow.com/users/400654/kevin-b)指出的：

```
$("#Deg").html(degtems); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-03T19:56:09.147

尝试使用 .html：

```
$("#Deg").html(degtems); 
```

它本质上只是这样做：

```
$("#Deg").empty().append(degtems); 
```

*   [http://api.jquery.com/html](http://api.jquery.com/html)
*   [http://api.jquery.com/empty](http://api.jquery.com/empty)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-03T19:56:18.737

首先使用`.empty`select 元素上的方法删除所有子元素：

```
$("#Deg").empty()

....
$("#Deg").append(degtems); 
```

# mysql - MySQL 错误 1248，创建正确的查询。初学者Q

> ID：10000372
> 
> 赞同：1
> 
> 时间：2012-04-03T19:54:29.850
> 
> 标签：mysql

我在以下查询中遇到了一些困难。

```
SELECT maker, speed 
FROM  
(
    SELECT * 
    FROM product 
    NATURAL JOIN laptop
) 
WHERE hd > 30; 
```

我正在尝试查找硬盘驱动器大于 30 GB 的笔记本电脑的制造商和速度。

我有两个关系笔记本电脑和产品。笔记本电脑有元组（制造商、型号、类型），笔记本电脑有元组（型号、速度、内存、高清、屏幕和价格）。

我认为我在做什么。

*   通过自然连接将产品与笔记本电脑连接起来，我认为并且确实（当自己提交时）给了我笔记本电脑的关系，但还有两个列制造商和类型。
*   然后，我尝试从 HD 大小大于 30 的表中选择制造商和速度。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-03T19:57:13.853

子句中的子查询`FROM`需要一个表别名：

```
SELECT maker, speed 
FROM  
(
    SELECT * 
    FROM product 
    NATURAL JOIN laptop
  /* include an alias with AS */
) AS products_sub
WHERE hd > 30; 
```

[从文档：](http://dev.mysql.com/doc/refman/5.0/en/join.html)

> table_subquery 也称为 FROM 子句中的子查询。此类子查询必须包含别名，以便为子查询结果提供表名。下面是一个简单的例子；另见第 12.2.9.8 节，“FROM 子句中的子查询”。

但是，对于您的示例，根本不需要子查询。

```
SELECT maker, speed 
FROM products NATURAL JOIN laptop
WHERE hd > 30; 
```

请注意，`NATURAL JOIN`通常不建议使用 s，最好明确说明`ON`子句中加入的列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T06:07:40.600

```
 SELECT maker, speed 
  FROM products   JOIN laptop 
  WHERE hd > 30; 
```

# php - 如果文件不存在（没有@），如何在包含期间防止错误

> ID：10000374
> 
> 赞同：1
> 
> 时间：2012-04-03T19:54:35.203
> 
> 标签：php

嗨伙计们，你能帮我下一步吗？

我有下一个代码

> 索引.php

```
set_include_path(get_include_path()
            .PATH_SEPARATOR.'application/controllers'
            .PATH_SEPARATOR.'application/models'
            .PATH_SEPARATOR.'application/views');
spl_autoload_register();
$front = new Controller;
$front->route(); 
```

> 控制器.php

```
public function route(){
    if(class_exists($this->getController())){...}...... 
```

我有一个办法。Insted 使用`spl_autoload_register();`I can write

```
function __autoload($classname) {
 @include_once $classname.'.php';
} 
```

但是根据 php 文档，我想使用 spl_autoload_register... 如果您需要完整的代码，我很乐意演示它。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-03T20:05:47.830

你可以只使用file_exists，我想......

[http://php.net/manual/en/function.file-exists.php](http://php.net/manual/en/function.file-exists.php)

```
if( file_exists( 'path/to/' . $classname / '.php' ) )
{
  include_once( $classname.'.php' );
} 
```

为什么要自动加载不存在的类？

你也可以试试这个：

```
if( !include_once( $classname.'.php' ) )
{
  //throw error, or do something... or nothing
  throw new Exception( "Autoload for $classname failed. Bad path." );
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-03T20:13:11.943

这是我使用的代码（我希望它会给你一个想法）：

```
<?php
Class ClassAutoloader {

  function __construct() {
    spl_autoload_register(array($this, 'loader'));
  }

  private function loader($className) {

    $classPath = dirname(__FILE__).DIRECTORY_SEPARATOR.'classes'.DIRECTORY_SEPARATOR;
    if(file_exists( $classPath.strtolower($className).'.php' )) {
      include $classPath.strtolower($className).'.php' ;
    } else if(file_exists( $classPath.$className.DIRECTORY_SEPARATOR.strtolower($className).'.php' )) {
      include $classPath.$className.DIRECTORY_SEPARATOR.strtolower($className).'.php';
    }
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-03T20:05:07.980

你可以关闭错误

```
 <?PHP 
 error_reporting(E_ALL & ~E_WARNING)
 ?> 
```

# javascript - grails中的CORS - 所有请求都失败了吗？

> ID：10000376
> 
> 赞同：5
> 
> 时间：2012-04-03T19:54:42.950
> 
> 标签：javascript, ajax, grails, groovy, cors

我正在尝试在 grails 中设置 CORS 支持，并且正在使用以下过滤器：

```
class CorsFilters {
    def filters = {
        all(controller:'*', action:'*') {
            before = {
                response.setHeader("Access-Control-Allow-Origin", "*")
            }
        }
    }
} 
```

从测试来看，似乎为所有请求正确设置了响应标头，但是当我从外部对 localhost 或我可用的某些服务器发出请求时，我收到以下错误：

```
XMLHttpRequest cannot load http://server:8080\. Origin http://jsbin.com is not allowed by Access-Control-Allow-Origin. 
```

[这个现场示例](http://jsbin.com/oxiyi4)适用于我的 Chrome 实例，所以我不知道这里会发生什么。在失败的请求中，我试图直接点击 tomcat。

可能会发生什么导致此失败？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-03T20:31:57.817

看起来 Grails 过滤器默认情况下在过滤器链中运行得太晚而无法使用。

如果您生成 web.xml 模板并在 sitemesh 下添加过滤器，则可以。

```
<filter>
    <filter-name>CORSFilter</filter-name>
    <filter-class>com.blah.CorsFilter</filter-class>
</filter>
<filter-mapping>
    <filter-name>CORSFilter</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping> 
```

和

```
class CorsFilter implements Filter {
    public void init(FilterConfig fConfig) throws ServletException { }

    public void destroy() { }

    public void doFilter(
            ServletRequest request, ServletResponse response,
            FilterChain chain) throws IOException, ServletException {

        ((HttpServletResponse) response).addHeader(
                "Access-Control-Allow-Origin", "*"
        )
        chain.doFilter(request, response)
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-03T23:58:41.883

您可以动态设置原点。我还建议在适用时添加整套标题。

```
response.setHeader('Access-Control-Allow-Origin', request.getHeader("Origin"))
response.setHeader('Access-Control-Allow-Methods', 'POST, PUT, GET, OPTIONS, PATCH')
response.setHeader('Access-Control-Allow-Headers', 'X-Additional-Headers-Example')
response.setHeader('Access-Control-Allow-Credentials', 'true')
response.setHeader('Access-Control-Max-Age', '1728000') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-03T20:07:54.613

`Access-Control-Allow-Origin`根据您的情况，应该包含确切的域名（顺便说一句，对于某些浏览器`'*'`也可以）`jsbin.com`。

# xml - 如何将 .xml 格式的维基百科文件索引到 solr

> ID：10000378
> 
> 赞同：0
> 
> 时间：2012-04-03T19:54:44.417
> 
> 标签：xml, solr, indexing, wikipedia

我想将维基百科的 xml 文件索引到 Solr 中。

但是我收到一个错误，它无法索引。Solr 具有特定的 xml 文件格式。我更改了`schema.xml`和`data-config.xml`文件以适应维基百科文件的标签。

仍然无法索引文件。我的实际意图是索引维基百科，它是一个 30 GB 的 xml 文件。

我将如何将所有维基百科文件索引到 Solr 中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-03T20:27:14.163

[There's an example section in the `DataImportHandler` documentation for exactly this: indexing Wikipedia.](http://wiki.apache.org/solr/DataImportHandler#Example%3a_Indexing_wikipedia)

Basically, you use the `DataImportHandler` and some XPath to pull the metadata you care about out of the Wikipedia XML, and put it in flat Solr field listings.

# jquery - 应用缩放时在 chrome 中使用简单模态的问题

> ID：10000381
> 
> 赞同：1
> 
> 时间：2012-04-03T19:54:51.237
> 
> 标签：jquery, simplemodal

当 chrome 自定义下拉菜单中的缩放设置为 90% 时，在 chrome（版本 18.0.1025.142 m）中使用简单模式时出现问题。模态永远不会得到全尺寸。

将缩放级别设置为 90%，然后单击[简单模式网页上](http://www.ericmmartin.com/projects/simplemodal/)的示例之一。

我该如何解决这个问题，或者是否有已知的修复/解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T02:45:52.930

我找到了解决该问题的方法，并在此处报告：[http ://code.google.com/p/simplemodal/issues/detail?id=82](http://code.google.com/p/simplemodal/issues/detail?id=82)

# css - 我可以用 CSS 得到这些弯曲的角落吗？

> ID：10000382
> 
> 赞同：2
> 
> 时间：2012-04-03T19:54:52.107
> 
> 标签：css, html

我需要创建这个布局，我想尽可能多地使用 CSS，而不是使用图像等。

因此，我怎样才能在 CSS 中做到这一点？（如果有的话？）

如您所见，后面有图像，按钮覆盖有填充。我正在苦苦挣扎的一点是在按钮上方和左侧的图像上以及按钮右侧的底部创建曲线（我已经在下图中指出了它们）。

任何帮助都会很棒。

谢谢

![在此处输入图像描述](../Images/09cc355469896e1e03678f082f2522db.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-03T20:04:27.627

我知道足够多的 CSS 是危险的，所以我不能详细说明每一步，但我认为你可以这样处理它：

将背景图像拆分为两个单独的图像，两个图像都在灰色框顶部的高度处的 z-index 为 0。我认为您可以使用两个`div`引用具有不同偏移量的相同原始图像的两个 （类似于 CSS Sprites），但我不知道如何做到这一点的细节。下部的左边缘`div`将从灰色框结束的地方开始。围绕每个“图像”的左下角`div`。

在 z-index 为 1 处添加灰色框，并进行适当的舍入，然后在 z-index 为 2 处添加蓝色框，再次进行适当的舍入。

包含所有这些的块元素的背景也必须是灰色的以匹配灰色边框并正确填充最右边箭头指向的灰色。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-03T20:15:32.243

您根本不必拆分图像，只需拆分容器 div。

让我详细说明一下：您可以将图像设置为背景图像，而不是将其放在 img 标签的 src 属性中。这种技术在处理 CSS 精灵时最常用。

所以，如果你有一个恒定宽度和高度的最上面的 div，如果你尝试在其中应用背景图像，你会发现它非常适合。

在底部，你有两个 div 或任何你喜欢的块元素，只要确保设置固定的宽度和高度，这样背景就会被应用*，*你将能够真正看到它。

然后你所要做的就是摆弄 css background-position 来调整 SE 图像块。

我将把一个小演示放在一起，以更好地说明这个想法。在顶部有一个大 div，底部有两个较小的 div 之后，其中两个共享相同的背景图像，但背景位置不同，您可以安全地添加一些 css3 边框半径以满足您的圆度需求。您还可以使用[http://css3generator.com/ 之](http://css3generator.com/)类的工具轻松地在所有浏览器上添加兼容层。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-03T20:03:36.177

使用纯 css 很容易实现。您显示的页面分为 3 个 div，没有任何边距。您只需要为每个 div 设置正确的边框半径。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-03T19:57:55.117

这是背景图像的功能，如果这就是你的意思，它是一个 css 元素，但它不是选择器的单独属性，至少在标准 CSS 中不是。等到 CSS3 变得更加流行，然后是角半径或类似的东西。

好吧，它可能是 3 个可能是 3 个单独的 div，一个“烧”到背景图像中的孔，或者一个 div 被覆盖在按钮上。

**弄清楚它是如何完成的最好方法是阅读您找到它的页面的来源。**

为方便起见：如果您有基于 webkit 的浏览器，如 chrome 或 safari，则启用开发模式鼠标在“右键单击”按钮上并选择检查元素。否则，您可以倒在页面源代码上，直到找到所需的内容。

# vb.net - VB.NET 无法连接到 Oracle 服务器

> ID：10000383
> 
> 赞同：0
> 
> 时间：2012-04-03T19:55:10.023
> 
> 标签：vb.net, oracle

运行以下功能时，我收到以下错误。catch 表示它打开连接的行 (Me.OracleConn.Open())。

我已确保服务器存在于 TNSNAMES.ora 文件中。

```
Imports NetOracle = System.Data.OracleClient
...
Private Property OracleConn As NetOracle.OracleConnection
...
    Private Function Connect_To_Oracle() As Boolean
        Connect_To_Oracle = False

        Try

            'Me.OracleConn = New NetOracle.OracleConnection
            Me.OracleConn = New System.Data.OracleClient.OracleConnection
            Me.OracleConn.ConnectionString = "Data Source = (DESCRIPTION=" & _
                      "(ADDRESS_LIST=(ADDRESS = (PROTOCOL = TCP)(HOST = servername.net)(PORT = ####)))" & _
                      "(CONNECT_DATA=(SERVER=DEDICATED)(SERVICE_NAME = risk)));" & _
                      "User Id=user_name;Password=password;"

            Me.OracleConn.Open()
            Connect_To_Oracle = True
        Catch ex As Exception
            MsgBox("Oracle Connection Error:" & ex.Message)
        End Try

    End Function 
```

![在此处输入图像描述](../Images/a4d522f04f8e671b2bf3295b4a741134.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-03T20:01:30.890

检查 $ORACLE_HOME 的权限：阅读更多内容：http: [//oraclepoint.com/oralife/2010/08/19/oracle-odbc-connection-issue-of-system-exception-ocienvcreate-failed-with-return-代码 1-on-windows-with-asp/](http://oraclepoint.com/oralife/2010/08/19/oracle-odbc-connection-issue-of-system-exception-ocienvcreate-failed-with-return-code-1-on-windows-with-asp/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T03:42:18.110

您是否尝试过使用没有 TNSNames 的 ODP.Net？我发现这比在系统上处理 txt 文件要容易得多...

连接字符串看起来像这样：

```
Data Source=(DESCRIPTION=(ADDRESS_LIST=(ADDRESS=(PROTOCOL=TCP)(HOST=MyHost)(PORT=MyPort)))(CONNECT_DATA=(SERVER=DEDICATED)(SERVICE_NAME=MyOracleSID)));User Id=myUsername;Password=myPassword; 
```

它与您放在 TNSNAMES 上的信息基本相同，但您将连接信息放在 web.config 上。

# wpf - 使用没有混合呕吐的资源进行主题化

> ID：10000385
> 
> 赞同：3
> 
> 时间：2012-04-03T19:55:25.243
> 
> 标签：wpf, expression-blend, blend

WPF 很棒，因为我应该能够在整个应用程序中使用 {StaticResource MyBackground} 而不是“White”，然后通过更改资源定义重新定义整个应用程序的外观。

问题是如果您在子控件中有对全局资源的引用，Expression Blend 将无法正常工作。有没有其他方法可以为您的应用程序设置主题？我不愿意失去 Blend 设计器的支持，或者在每个控件中复制一段代码/xaml。我发现他们没有修复如此严重的错误令人震惊。

有任何想法吗？

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-03T23:43:03.173

所以我没有尝试过，但听起来它会起作用。此外，信息有点过时了。请让我知道它是否解决了问题。:)

在[Blend 博客](http://blogs.msdn.com/b/expression/archive/2008/04/09/creating-a-wpf-blend-project-that-loads-resources-in-code.aspx)中，将以下两个块添加到您的项目文件中：

```
<DesignTime Condition="'$(SolutionPath)'!='' AND Exists('$(SolutionPath)')">true</DesignTime>

…. 
<ApplicationDefinition Condition="'$(DesignTime)'=='true' AND '$(BuildingInsideVisualStudio)'!='true' AND '$(BuildingInsideExpressionBlend)'!='true'" Include="App.xaml"> 
      <Generator>MSBuild:Compile</Generator> 
      <SubType>Designer</SubType> 
</ApplicationDefinition> 
```

基本上，这会将您的 app.xaml 有条件地包含到您的项目中，以便在设计时使用它，而不是在构建时使用。我猜他们假设人们使用 msbuild 来生成生产代码，而不是单击构建编译按钮。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-03T22:20:41.557

如果您改用 DynamicResources，似乎此错误会消失。

在 b) 中解释：http: [//blogs.msdn.com/b/unnir/archive/2009/03/31/blend-wpf-and-resource-references.aspx](http://blogs.msdn.com/b/unnir/archive/2009/03/31/blend-wpf-and-resource-references.aspx)

有人在较早的 SO 问题中发布了这个链接，关于同一个错误，但由于某种原因，它没有得到支持，并且在其他答案下方丢失。

# jquery - .off 不解除绑定动画结束事件

> ID：10000398
> 
> 赞同：0
> 
> 时间：2012-04-03T19:56:29.740
> 
> 标签：jquery, css, css-animations

好的，所以我正在制作一个动画菜单，可以来回滑动/扩展选项卡，并且看起来很流畅。除了解除绑定到单击选项卡的动画结束事件之外，我已经完成了所有工作。所以几乎你单击一个选项卡，在动画结束时附加一个侦听器，在单击下一个选项卡时，我想将侦听器取消绑定到先前单击的选项卡。但是，由于某种原因，我无法启动 .off 函数。这是我下面的代码

```
var $featuredTab = this.$('.featured'),
    $tabContainer = $(e.target).parent(),
    $menu = this.$el,
    index = $tabContainer.index(),
    count = $tabContainer.parent().children().length; 

    if($featuredTab.length > 0) {
        $menu.off('animationend webkitAnimationEnd MSAnimationEnd oAnimationEnd', $featuredTab, function() {
            console.log('off');
            //do stuff
        });
    }

    $tabContainer.addClass('featured');

    $menu.on('animationend webkitAnimationEnd MSAnimationEnd oAnimationEnd', $tabContainer, function(e) {
            console.log(e.originalEvent);
            //do stuff
    }); 
```

关于为什么关闭事件没有触发的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-03T19:58:19.907

假设您将第二个参数视为选择器，那么您使用`on`不正确。第二个参数是一个选择器（字符串），您将在其中传递一个对象。第二个（选择器）和第三个（数据）参数是可选的。

看看这里 - [http://api.jquery.com/on/](http://api.jquery.com/on/)

不过你可以试试这个。

```
$menu.off('animationend webkitAnimationEnd MSAnimationEnd oAnimationEnd'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-03T20:11:23.350

因为`off()`不会触发事件。

> 该`off()`方法删除了附加的事件处理程序`.on()`。

看起来您想取消绑定以前附加到菜单的任何事件：

```
// this removes ALL events
$menu.off('animationend webkitAnimationEnd MSAnimationEnd oAnimationEnd'); 
```

如果您只想删除您的事件，请参阅文档中的[此示例](http://api.jquery.com/off/#example-3)。

# visual-studio-2010 - 如果您在调试解决方案时检查它，Visual Studio 不会将类加载到编辑器中

> ID：10000399
> 
> 赞同：1
> 
> 时间：2012-04-03T19:56:32.067
> 
> 标签：visual-studio-2010, vb.net-2010

我们使用 Visual Studio 2010 和 Team Foundation server 2010 进行源代码控制。我们的 VB 解决方案有几个项目。（一个 EXE 和几个 DLL）。

这是问题所在：1) 程序员 A 对 VB 类进行了更改并将其签入。

2) 正在调试应用程序的程序员 B 在编辑器中进入该类并检查它。

他立即收到一条消息，说“您的操作导致检查出某些文件，并且已经在开发环境中加载了来自源代码控制的新版本。” 当您说 OK 时，类中的每一行都带有工具提示“无法在调试时应用此更改”下划线

所以他停止调试。

3) 程序员 A 所做的更改已签出并在磁盘上但未加载到编辑器中。因此，如果程序员 B 更改文件并将其签入，则程序员 A 所做的更改将丢失。

4) 如果解决方案暂停，则不会发生这种情况。此外，如果您关闭 class.vb 并重新打开它，它会从磁盘中检索新的。

我们丢失了一些代码更改，因为人们在调试时检查了最近更新的代码。

关于如何使其正常工作的任何想法，这就是我们如何在程序调试时将新签出的源代码加载到编辑器中

谢谢，

斯蒂芬辛普森

# android - 媒体播放器、进度条

> ID：10000400
> 
> 赞同：11
> 
> 时间：2012-04-03T19:56:37.307
> 
> 标签：android, seekbar

这是播放媒体时更新 ProgressBar 的正确方法吗？我想在 MediaPlayer 中会有一个回调，但我找不到它。

```
mediaPlayer.start();
final SeekBar progress = (SeekBar) dialog.findViewById(R.id.seekBar1);
progress.setMax(mediaPlayer.getDuration());
new CountDownTimer(mediaPlayer.getDuration(), 250) {
  public void onTick(long millisUntilFinished) {
    progress.setProgress(progress.getProgress() + 250);
  }
  public void onFinish() {}
}.start(); 
```

最好的祝福。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-04-03T20:02:11.693

就个人而言，我开始一个线程，`getCurrentPosition()`每 200 毫秒左右检查一次，直到`onCompletion()`事件被触发：

```
private class MediaObserver implements Runnable {
  private AtomicBoolean stop = new AtomicBoolean(false);

  public void stop() {
    stop.set(true);
  }

  @Override
  public void run() {
    while (!stop.get()) {
      progress.setProgress(mediaPlayer.getCurrentPosition());
      Thread.sleep(200);
    }
  }
}

private MediaObserver observer = null;

public void runMedia() {
  mediaPlayer.setOnCompletionListener(new MediaPlayer.OnCompletionListener{
    @Override
    public void onCompletion(MediaPlayer mPlayer) {
      observer.stop();
      progress.setProgress(mPlayer.getCurrentPosition());
    }
  });
  observer = new MediaObserver();
  mediaPlayer.start();
  new Thread(observer).start();
} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-04-03T20:39:51.017

看看**[android.widget.MediaController](https://android.googlesource.com/platform/frameworks/base/+/master/core/java/android/widget/MediaController.java#409)**，它有一个进度条。

如果合适，他们使用递归调用自身的处理程序。您可以将延迟设置为您希望更新进度条的频率。

请注意，控制器可以显示或隐藏，也可以由用户拖动，当然，视频可以停止。这些是`!mDragging && mShowing && mVideoView.isPlaying()`在另一个递归调用更新栏之前进行各种检查 ( ) 的原因。

```
protected Handler mHandler = new Handler()
{
    @Override
    public void handleMessage(Message msg)
    {
        int pos;
        switch (msg.what)
        {
            // ...

            case SHOW_PROGRESS:
                pos = setProgress();
                if (!mDragging && mShowing && mVideoView.isPlaying())
                {
                    msg = obtainMessage(SHOW_PROGRESS);
                    sendMessageDelayed(msg, 1000 - (pos % 1000));
                }
                break;

             // ...
        }
    }
}; 
```

要开始使用：

```
mHandler.sendEmptyMessage(SHOW_PROGRESS); 
```

它会自行停止，但您应该使用以下命令取消最后一个待处理的请求：

```
mHandler.removeMessages(SHOW_PROGRESS); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-07-13T09:16:40.110

最有效的方法是使用 JRaymond 的答案和[EventBus](https://github.com/greenrobot/EventBus)

```
private class MediaObserver implements Runnable {
    private AtomicBoolean stop = new AtomicBoolean(false);
    public void stop() {
        stop.set(true);
    }

    @Override public void run() {
        while (!stop.get()) {
            try {
              if (player.isPlaying())
                 sendMsgToUI(player.getCurrentPosition(),
                             player.getDuration());
            } catch (Exception e){e.printStackTrace();}
            try { 
              Thread.sleep(100);
            } catch (InterruptedException e) { e.printStackTrace(); }
        }
    }
}

private MediaObserver observer = null;

public void runMedia() {
    observer = new MediaObserver();
    new Thread(observer).start();
}

//handles all the background threads things for you
private void sendMsgToUI(int position) {
    ChangingEvent event = new ChangingEvent(position);
    EventBus.getDefault().post(event);
} 
```

ChangeEvent 类看起来像这样：

```
public class ChangingEvent {
  private int position;

  public ChangingEvent(int position) {
      this.position= position;
  }

  public int getPosition() {
      return position;
  }
} 
```

在您的活动或片段中，您所要做的就是

```
class YouClass extends Activity {
  private EventBus eventBus = EventBus.getDefault();
}

@Override protected void onCreate(Bundle savedInstanceState) {
    //your code
    eventBus.register(this);
}
//eventbus that updates UI
public void onEventMainThread(ChangingEvent event) {
    //seekbar or any other ui element
    seekBar.setProgress(event.getPosition());
} 
```

# python - python数据库位置

> ID：10000401
> 
> 赞同：-4
> 
> 时间：2012-04-03T19:56:38.893
> 
> 标签：python

当然，假设程序运行在与数据库相同的目录下。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-03T20:02:00.123

您不需要提供 的绝对路径`open()`，而是可以提供从当前工作目录打开的文件的相对路径。

您可以使用它来消除对`databasepath`变量的需求，只要脚本从与数据库相同的目录运行（或始终具有与数据库相同的相对路径）。

您可能会发现该[`os.getcwd()`](http://docs.python.org/library/os.html#os.getcwd)函数可用于确定脚本的工作目录是什么。

# eclipse - eclipse indigo 无法创建新服务器 jboss 5.1

> ID：10000402
> 
> 赞同：2
> 
> 时间：2012-04-03T19:56:43.780
> 
> 标签：eclipse, jakarta-ee, jboss, application-server

我已经安装了 Eclipse EE Indigo，我想创建一个新的 Jboss 服务器实例，版本 5.1，但是这个选项不可用。我可以创建的最新版本的 Jboss 服务器是 5.0。

我是否需要在 Eclipse 中安装一些东西才能创建 Jboss 5.1 服务器？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-03T21:38:24.603

> 我已经安装了 Eclipse EE Indigo，我想创建一个新的 Jboss 服务器实例，版本 5.1，但是这个选项不可用。我可以创建的最新版本的 Jboss 服务器是 5.1。

所以...您想为版本 5.1 创建服务器实例，但您可以创建的最新版本是 5.1？这没有任何意义。真的是7.1吗？

> 我是否需要在 Eclipse 中安装一些东西才能创建 Jboss 5.1 服务器？

是的，您需要在 Eclipse 中安装 JBoss Tools。

在 Eclipse (Indigo) 中单击“帮助”->“安装新软件”，然后将此 URL 添加为存储库：http: [//download.jboss.org/jbosstools/updates/development/indigo/](http://download.jboss.org/jbosstools/updates/development/indigo/)

如果我没记错的话，您需要的是“Web 和 Java EE 开发”。或“全选”以确保。

这对我有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-29T17:35:42.420

您必须安装 JBossAS 工具。

单击“帮助”->“Eclipse Marketplace ...”->在“查找”输入字段中键入“jboss”->单击“开始”

第一个或第二个应该是 JBoss Tools (Juno) 或 (Indigo)，具体取决于您使用的版本。

点击“安装”

不要安装所有东西，你只需要“JBossAS Tools”。

接受许可协议。您可能会被要求信任未签名的内容或类似内容。几分钟后，系统会询问您是否要重新启动 Eclipse，请执行此操作。

瞧，您在“JBoss 社区”下有了新的服务器组。

您可以使用这些工具创建 JBoss 5.1.0.GA 或 JBoss AS 7.1.1.Final。

祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-15T15:32:38.400

要安装 JBossAS 工具，您也可以按照以下步骤操作。

*   转到服务器选项卡
*   之后，添加新服务器
*   在新窗口中，单击*“下载其他服务器适配器”*
*   选择**JBossAs**，安装并重新启动 eclipse。

# vb.net - VB.NET IDE 调试器在“Exit Sub”上退出

> ID：10000403
> 
> 赞同：0
> 
> 时间：2012-04-03T19:56:43.890
> 
> 标签：vb.net, treeview, solidworks

在当前的项目中，我有两个应用程序基本上做同样的事情。在第一个应用程序的 UI 中，我开发了一个继承 TreeView 控件的类。我使用了 DrawMode 属性的 OwnerDrawsAll 值，并自定义了 TreeView 的外观。在应用程序 1 中，它运行良好，我非常高兴。几个月来我没有遇到任何问题，并且在那段时间经常使用它。

在第二个应用程序中，我必须进行相同的修改，因此我使用了相同的自定义 TreeView 类。在应用程序 2 中，在 TreeView 第一次进入 DrawNode 事件期间，一切正常，直到我到达 DrawMode 事件处理程序的“Exit Sub”行。如果我尝试单步执行，该应用程序会在没有警告的情况下完全崩溃。因为它发生在“Exit Sub”语句中，所以我不能将它包含在 Try/Catch 中。引发 DrawNode 事件的语句包含在 Try/Catch 块中，但不会被捕获。

我已经用相同的结果注释掉了 DrawNode 事件处理程序中的所有功能。代码如下：

```
Public Class TabularTreeView
    Inherits System.Windows.Forms.TreeView

Private Sub DrawMyNode(ByVal sender As Object, ByVal e As System.Windows.Forms.DrawTreeNodeEventArgs) Handles MyBase.DrawNode

    Try
        'Draw the node as default
        e.DrawDefault = True

        '...commented out and still fails....

    Catch ex As Exception
        MsgBox(ex.Message)
    End Try

End Sub   '<---this statement is where the debugger fails!

End Class 
```

这些应用程序有两个不同之处。App 1 是一个程序，编译为 x86 作为目标平台。App 2 是一个名为 SolidWorks 的程序的插件，因此是一个 .dll，编译的目标平台是 AnyCPU。自定义 TreeView 类位于为 AnyCPU 编译的库中。

请帮忙！我不想失去迄今为止所做的工作！

上海

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-06T09:29:21.480

我也注意到了这种行为。在我的情况下通过替换`Exit Sub`来修复它`Return`

# textmate - 为 TextMate 设置捆绑包：运行命令的位置

> ID：10000404
> 
> 赞同：0
> 
> 时间：2012-04-03T19:56:45.277
> 
> 标签：textmate, sml, textmatebundles

我有一个快速的问题。如何更改 TextMate 中特定捆绑包的“搜索位置”？我安装了标准 ML，我希望能够直接从 TextMate 运行它，但是当我尝试运行时，它说找不到 SML。我知道 SML 在哪里，它不会出现在搜索的位置上。我怎样才能改变这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T19:55:22.400

如果您知道 SML 在哪里，请将可执行 SML 程序的别名放入 TextMate 正在搜索的位置之一，它应该会运行。

# zend-framework - LDAP 连接器在使用 INI 配置而不是 PHP 数组时停止工作

> ID：10000406
> 
> 赞同：0
> 
> 时间：2012-04-03T19:56:51.687
> 
> 标签：zend-framework, ldap, ini

我有这个功能：

```
<?php
private function spawnAdapter($credentials) {

    //$ldapConfig = array("server1" => array(
    //  "host" => "172.16.100.32",
    //  "useStartTls" => 1,
    //  "accountDomainName" => "schoolxp",
    //  "accountDomainNameShort" => "schoolxp",
    //  "accountCanonicalForm" => 3,
    //  "baseDn" => "DC=schoolxp",
    //));

    // We must retrieve the LDAP servers from the conf
    $ldapConfig = $this->_config->ldap->toArray();

    // Remove the log path, otherwise the adapter will think this is
    // one of our servers and fail.
    unset($ldapConfig['log']);   

    $adapter = new Zend_Auth_Adapter_Ldap(
        $ldapConfig, 
        $credentials['username'], 
        $credentials['password']
    );

    return $adapter;

}
?> 
```

还有一个如下所示的ini配置文件：

```
[production]
ldap.log.enabled = 1
ldap.log.path = "../logs/ldap.log"
; Place your Active Directory Server Settings Here.
ldap.server1.host = "172.16.100.32"
ldap.server1.useStartTls = 1
ldap.server1.accountDomainName = "schoolxp"
ldap.server1.accountDomainNameShort = "schoolxp"
ldap.server1.accountCanonicalForm = 3
ldap.server1.baseDn = "DC=schoolxp" 
```

当 PHP 数组用于 Auth_Adapter 时，代码工作正常，但是如果我切换到使用 INI 配置，它会失败并出现未知错误。

我在 INI 文件数组和 PHP 数组上都运行了 print_f，它们是相同的，但是 LDAP 适配器仍然在日志文件中引发异常。

有趣的是，日志中的连接字符串对于 INI 文件和数组是相同的。对于那些感兴趣的人，这里是日志文件： http: [//pastebin.com/V5Nyz9FK](http://pastebin.com/V5Nyz9FK)

任何有关情况的信息将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-03T20:17:16.917

在我看来，LDAP 适配器试图连接到错误的端口 (0)。请尝试使用以下方法指定它：

```
ldap.server1.port = 389 
```

或您使用的任何端口。

# class - 智能指针和析构函数

> ID：10000412
> 
> 赞同：9
> 
> 时间：2012-04-03T19:57:28.097
> 
> 标签：class, boost, destructor, smart-pointers

我想知道当我不再使用原始指针时是否需要在类中编写析构函数？只是提高智能指针。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-03T20:07:51.973

提升智能指针本身与对析构函数的需求没有任何关系。他们所做的只是消除您对他们有效管理的已分配内存调用 delete 的需要。话虽如此，如果在您开始使用智能指针之前，您在析构函数中的所有操作都是调用 delete 和 delete[] 以释放动态分配的类成员的内存，并且您现在已将所有这些常规指针切换为智能指针，您可以可能只是切换到一个空的析构函数，因为它们现在会在超出范围时自行清理。

但是，如果出于某种原因，您有一个需要进行清理的类（文件清理、套接字、其他资源等），您仍然需要提供一个析构函数来执行此操作。

让我知道这是否有帮助。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-03T20:21:43.517

每个资源类型都应该有一个 RAII 类来管理该资源。如果您还有一个具有深拷贝语义的智能指针（很容易做到），那么您在 99.9% 的时间里都需要管理资源。我不知道为什么`unique_ptr`不做深拷贝，也不做任何boost智能指针，但是如果你有这两个东西，你就不需要写拷贝构造函数、移动构造函数、赋值运算符、移动赋值运算符，也不需要析构函数。您可能需要也可能不需要提供其他构造函数（包括默认构造函数），但这少了五个出错的地方。

```
#include <memory>

template<class Type, class Del = std::default_delete<Type> >
class deep_ptr : public std::unique_ptr<Type, Del> {
public: 
     typedef std::unique_ptr<Type, Del> base;
     typedef typename base::element_type element_type;
     typedef typename base::deleter_type deleter_type;
     typedef typename base::pointer pointer;

     deep_ptr() : base() {}
     //deep_ptr(std::nullptr_t p) : base(p) {}  //GCC no has nullptr_t?
     explicit deep_ptr(pointer p) : base() {}
     deep_ptr(pointer p, const typename std::remove_reference<Del>::type &d) : base(p, d) {} //I faked this, it isn't quite right
    deep_ptr(pointer p, typename std::remove_reference<Del>::type&& d): base(p, d) {}
    deep_ptr(const deep_ptr& rhs) : base(new Type(*rhs)) {}
    template<class Type2, class Del2>
    deep_ptr(const deep_ptr<Type2, Del2>& rhs) : base(new Type(*rhs)) {}
    deep_ptr(deep_ptr&& rhs) : base(std::move(rhs)) {}
    template<class Type2, class Del2>
    deep_ptr(deep_ptr<Type2, Del2>&& rhs) : base(std::move(rhs)) {}

    deep_ptr& operator=(const deep_ptr& rhs) {base::reset(new Type(*rhs)); return *this;}
    template<class Type2, class Del2>
    deep_ptr& operator=(const deep_ptr<Type2, Del2>& rhs) {base::reset(new Type(*rhs)); return *this;}
    deep_ptr& operator=(deep_ptr&& rhs) {base::reset(rhs.release()); return *this;}
    template<class Type2, class Del2>
    deep_ptr& operator=(deep_ptr<Type2, Del2>&& rhs) {base::reset(rhs.release()); return *this;}
    void swap(deep_ptr& rhs) {base::swap(rhs.ptr);}
    friend void swap(deep_ptr& lhs, deep_ptr& rhs) {lhs.swap(rhs.ptr);}
}; 
```

有了这个类（或类似的），你根本不需要太多！

```
struct dog {
   deep_ptr<std::string> name;
};

int main() {
    dog first; //default construct a dog
    first.name.reset(new std::string("Fred"));
    dog second(first); //copy construct a dog
    std::cout << *first.name << ' ' << *second.name << '\n';
    second.name->at(3) = 'o';
    std::cout << *first.name << ' ' << *second.name << '\n';
    second = first; //assign a dog
    std::cout << *first.name << ' ' << *second.name << '\n';
} 
```

如[http://ideone.com/Kdhj8所示](http://ideone.com/Kdhj8)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-04-03T20:02:08.487

您应该始终考虑提供析构函数。您将使用它来释放您的班级持有的任何资源。我的 smart_ptr 类析构函数通常是空的，但并非总是如此。文件流、数据库连接等都需要适当的清理。

# java - 从 Java 程序执行控制台脚本

> ID：10000423
> 
> 赞同：1
> 
> 时间：2012-04-03T19:58:26.817
> 
> 标签：java, linux, bash

我正在考虑从 java 程序中调用 bash 脚本。我需要在一分钟内执行一次，但与来自 DB 的客户端数量一样多（大约 1000 个）。

这将是类似的东西`curl -o /dev/null -s -t "%{total_time}" | awk ...`。我相信这最好用 bash 脚本而不是 Java 来实现，因为它不会那么轻量级，但需要在 java 代码中使用很多东西来重现行为。

我知道 Runtime.exec()，但它每次都会创建一个系统进程。我想创建 1-10 个这样的进程是可以的，但是 1000 个系统进程是不可接受的。

这样做的更好方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-03T20:38:59.747

您可以将 Runtime.exec 等待结束 (waitFor()) 与固定大小的线程池同时使用。

# ruby-on-rails - 嵌入文档中的 Mongoid 外键

> ID：10000425
> 
> 赞同：0
> 
> 时间：2012-04-03T19:58:29.880
> 
> 标签：ruby-on-rails, mongodb, mongoid

假设我有两个模型：board，属于用户，以及嵌入到 board 中的共享

板子.rb

```
belongs_to :user
embeds_one :sharing 
```

可以在共享字段中设置外键“user_id”，例如：

```
belongs_to :user, :foreign_key => 'sharing.user_id' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-03T21:36:21.417

是的，只需在嵌入式共享模型中添加 user_id 作为字段。

# python - 如何在 django 错误电子邮件中包含服务器主机名？

> ID：10000428
> 
> 赞同：3
> 
> 时间：2012-04-03T19:58:36.713
> 
> 标签：python, django

标题几乎概括了这个问题。我有一个基于 django 的站点在多个服务器之间进行负载平衡。尽管所有服务器都应该相同，但 $#%& 会发生......如果 django 发送的错误电子邮件包含服务器的主机名，那将非常有用。这将如何实现？

ps 如果这有什么不同的话，那就是 python 2.7.2 上的 django 1.3。

更新：

我可以得到主机名，这不是问题。问题是如何将其添加到错误电子邮件中。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-03T21:33:55.510

您可以使用[`SERVER_EMAIL`](https://docs.djangoproject.com/en/dev/ref/settings/#server-email)or[`EMAIL_SUBJECT_PREFIX`](https://docs.djangoproject.com/en/dev/ref/settings/#email-subject-prefix)设置。

在您的 settings.py 中：

```
 import socket
 SERVER_ADMIN = 'alerts+{0}@mydomain.com'.format(socket.gethostname()) 
```

或者

```
 import socket
 EMAIL_SUBJECT_PREFIX = '[my_django_app - {0}] '.format(socket.gethostname()) 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-03T20:09:18.857

如果您想要 httpd 服务器名称，您可以从请求中获取它。

```
site_name = request.META['SERVER_NAME'] 
```

这不一定是机器的主机名，但它是站点的 Apache/IIS 指令中的服务器名称别名。或者，如果您绝对需要服务器的机器名称：

```
import socket
host_name = socket.gethostname() 
```

更新：

现在您有了特定服务器的主机名，您可以通过多种方式将其添加到错误电子邮件中。您可以编写自己的错误通知系统，或者正如@sdolan 提到的那样，您`SERVER_ADMIN`可以`EMAIL SUBJECT_PREFIX`更改`settings.py`. 或者，您可以更改`SERVER_EMAIL`指令。您可以使用`"{0}".format(socket.gethostname())`语法，也可以使用字符串列表的字符串连接`"".join(string_parts_list)`。

```
# settings.py
import socket
SERVER_EMAIL = "".join(['webmaster@', socket.gethostname(), '.com']) 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-04-03T20:02:20.747

Python 的`socket.gethostname()`（[套接字文档](http://docs.python.org/library/socket.html#socket.gethostname)）是一种方法。

```
from socket import gethostname; print gethostname() 
```

您还可以从`os.uname()`( [os docs](http://docs.python.org/library/os.html) )获取一些参数

```
import os; print os.uname()[1] 
```

会得到“节点名”。

# c# - C# 等效于 C++/CLI 数据类型

> ID：10000433
> 
> 赞同：0
> 
> 时间：2012-04-03T19:58:48.960
> 
> 标签：c#, function, c++-cli, type-conversion

什么是 C# 等价物？

```
private array<__int32>^ func()
{
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-03T20:04:01.137

虽然我从未使用 C++/CLI 编程，但我认为这些是您正在寻找的类型：

*   简单数组：`int[]`
*   动态扩展数组：`List<int>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-03T20:05:07.283

正确的类型应该是：

```
private int[] func()
{
} 
```

甚至

```
private List<int> func()
{
} 
```

# jquery - 单击使用 jQuery 加载的链接

> ID：10000435
> 
> 赞同：5
> 
> 时间：2012-04-03T19:58:52.730
> 
> 标签：jquery, onload

这是我的代码的人为示例：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1"/>    
        <title></title>
        <link rel="shortcut icon" href="favicon.ico" type="image/x-icon"/>
        <link rel="stylesheet" type="text/css" href=".css"/>
    </head>
    <body>
        <div>
            <a href="http://www.google.com" class="foo">YahOO</a>
        </div>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
       <script type="text/javascript">
            $("document").ready(function() {
                $("#foo").trigger('click');
            });
        </script>
    </body>
</html> 
```

我希望在页面加载后立即触发链接。以上不起作用，不正确？怎么可能做到这一点？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-03T19:59:57.020

您在元素上设置了类`foo`，而不是`id`您需要使用`.foo`. 此外，正如@JusticeErolin 指出的那样，文档就绪处理程序不需要引号。尝试这个：

```
$(document).ready(function() {
    $(".foo").trigger('click');
}); 
```

作为参考，`$("#foo")`将寻找一个带有 的元素`id="foo"`，在您的页面中应该只有一个元素，因为 id 应该是唯一的。

`$(".foo")`将查找带有 的元素`class="foo"`，您可以拥有任意数量的元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-04-14T10:48:28.880

我尝试了很多选项，但我找到了一个对我有用的选项：

```
$(document).ready(function(){ 
     $('#upload-file')[0].click(function(){
     }); 
}); 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2014-11-15T15:36:47.630

您必须等到控件加载到页面上

将此添加到页面底部

```
<script>
$(document).ready(function(e){
$("#whateverElement").click();
});
</script> 
```

# python - 是否有 Python 方法来计算对数正态均值和方差？

> ID：10000436
> 
> 赞同：8
> 
> 时间：2012-04-03T19:58:58.690
> 
> 标签：python, matlab, statistics

我试图了解是否有内置的 python 函数来计算对数正态均值和方差。我只需要这些信息，然后将其输入到`scipy.stats.lognorm`覆盖在直方图顶部的绘图中。

简单地使用`numpy.mean`and`numpy.std`似乎不是正确的想法，因为对数正态均值和方差是特定的并且与 numpy 方法完全不同。在 Matlab 中，他们有一个方便的函数`lognstat`，称为返回对数正态分布的均值和方差，我似乎无法在 Python 中找到类似的方法。编写解决方法很容易，但我想知道这个方法是否存在于库中。谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-03T21:33:30.783

不管它值多少钱，`lognstat`matlab 中所做的一切都是这样的：

```
import numpy as np

def lognstat(mu, sigma):
    """Calculate the mean of and variance of the lognormal distribution given
    the mean (`mu`) and standard deviation (`sigma`), of the associated normal 
    distribution."""
    m = np.exp(mu + sigma**2 / 2.0)
    v = np.exp(2 * mu + sigma**2) * (np.exp(sigma**2) - 1)
    return m, v 
```

`scipy.stats`在or中可能有它的功能`scikits-statsmodels`，但我不知道它是临时的。无论哪种方式，这只是几行代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-03T20:59:47.360

（目前我的笔记本上没有 rpy 安装，所以我无法尝试）

您可以考虑安装[Rpy](http://rpy.sourceforge.net/)，它是 R 的 python 接口。

然后你也许可以使用这个 R 函数[http://rss.acs.unt.edu/Rdoc/library/stats/html/Lognormal.html](http://rss.acs.unt.edu/Rdoc/library/stats/html/Lognormal.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-12-20T15:58:32.610

相当于乔金顿答案的**python**将是：

```
from scipy.stats import lognorm

# Mean of normal distribution
mu = 0
# Standard Deviation of normal distribution
sigma = 1

mean, var, *rest = lognorm.stats(sigma, moments='mvsk', scale=np.exp(mu)) 
```

其中**mean 和 var****分别是 lognorm distribution**的 loc 和 scale参数。

# networking - 混合 TCP 和 UDP

> ID：10000437
> 
> 赞同：10
> 
> 时间：2012-04-03T19:59:00.037
> 
> 标签：networking, tcp, udp

我想制作一个在 Internet 上运行的多人游戏，而不仅仅是像 LAN 这样的低延迟、高吞吐量环境。

在我的游戏的某些网络方面，UDP 显然更适合，例如传输有关不同玩家的位置和速度的信息。必须尽可能快地接收此数据，重新发送丢弃的数据包将无济于事，因为该数据在到达客户端时已无关紧要。丢弃一些数据包是完全可以的。

然而，我的游戏还有一些其他方面严格要求有序、有保证的交付。数据包的自动分段（分解并重新组合以获取大量数据）也将非常有用。似乎 TCP 完成了所有这些工作。除非数据严格有序并且没有丢失的数据包，否则数据根本没有用处。在某些情况下，此类数据的延迟不可避免地会受到影响，但这是不可避免的。

因此，与其在 UDP 之上实现类似 TCP 的功能（使用数据缓冲区、用数字标记数据包以确定它们的顺序、数据包确认系统），这将是大量工作以确保其正确有效地工作，我'想同时使用 TCP 和 UDP。

但是我听说如果同时使用TCP和UDP会互相争夺带宽，使用TCP会增加UDP丢包率。这是真的吗？混合这两种协议时，我还需要处理其他问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-03T21:07:12.247

您可以查看[http://www.zeromq.org/](http://www.zeromq.org/)，一个很好的开源智能传输层库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-03T20:01:16.583

如果你有困难，我建议在你和你的网络代码的胆量之间增加一个抽象层。尝试像“ **RakNet** ”这样的多人网络库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-01T06:06:57.263

通常 - 使用 TCP 不会增加 UDP 数据包的丢弃率。它宁愿反过来 - 大量的 UDP 流量会限制 TCP 流量，因为真正的流氓 UDP 实现会限制整个网络带宽 - 而 TCP 会尝试最大化感知带宽的吞吐量。因此，将它们一起使用不会真的伤害到您，只要您最终不会持续地在车站打到可用的黑白。超出此范围可能会导致一些缓冲延迟——如果 UDP 或 TCP 应用程序对延迟敏感，这将损害它们。希望有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-09-27T10:47:37.817

Try iperf and you will see that if one TCP connection for download has to share a 100 Mb/s line with an application forcing 100 Mb/s UDP download traffic, then you will measure roughly a TCP throughput of 50 Mb/s and receive about half the number of sent UDP packets (i.e., a UDP drop rate of about 50%).

# python - Flask-Login 包因导入 Google App Engine 的测试平台而损坏

> ID：10000441
> 
> 赞同：1
> 
> 时间：2012-04-03T19:59:19.007
> 
> 标签：python, google-app-engine, unit-testing, flask

当使用带有[Flask](http://flask.pocoo.org/) 0.8 的Google App Engine 1.6.4[测试平台](https://developers.google.com/appengine/docs/python/tools/localunittesting)，特别是[Flask-Login](http://packages.python.org/Flask-Login/) 0.1 包（[source](http://packages.python.org/Flask-Login/_modules/flaskext/login.html)）时，我在命令行单元测试中遇到了一个奇怪的问题。

下面是一个演示该问题的示例。注意注释行 ( `from google.appengine.ext import testbed`)。注释此行时，测试按预期工作。

当取消注释该行时，[`@login_required`](http://packages.python.org/Flask-Login/_modules/flaskext/login.html#login_required)装饰器`Flask-Login`停止识别登录用户，即`current_user.is_authenticated()`返回 False。罪魁祸首似乎是进口`testbed`。

```
#!/usr/bin/env python2.7
import unittest
import sys
from flask import Flask, current_app, url_for
from flaskext import login

sys.path.append('/usr/local/google_appengine')

# Go ahead and uncomment this:
# from google.appengine.ext import testbed

app = Flask('test')
app.secret_key = 'abc'

login_manager = login.LoginManager()
login_manager.setup_app(app)
login_manager.login_view = 'index'

class User(login.UserMixin):
    def get_id(self):
        return "1"

@login_manager.user_loader
def load_user(user_id):
    return User()

@app.route('/')
@login.login_required
def index():
    pass

@login_manager.unauthorized_handler
def unauthorized():
    raise Exception("Unauthorized.")

class MyTest(unittest.TestCase):
    def setUp(self):
        self.app = app
        self.client = app.test_client()

    def test_user(self):
        with self.app.test_request_context():
            logged_in = login.login_user(User())
            r = self.client.get('/')

if __name__ == '__main__':
    unittest.main() 
```

具体的例外是：

```
ERROR:test:Exception on / [GET]
Traceback (most recent call last):
  File "/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/Flask-0.8-py2.7.egg/flask/app.py", line 1504, in wsgi_app
    response = self.full_dispatch_request()
  File "/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/Flask-0.8-py2.7.egg/flask/app.py", line 1264, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/Flask-0.8-py2.7.egg/flask/app.py", line 1262, in full_dispatch_request
    rv = self.dispatch_request()
  File "/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/Flask-0.8-py2.7.egg/flask/app.py", line 1248, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/Flask_Login-0.1-py2.7.egg/flaskext/login.py", line 479, in decorated_view
    return current_app.login_manager.unauthorized()
  File "/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/Flask_Login-0.1-py2.7.egg/flaskext/login.py", line 250, in unauthorized
    return self.unauthorized_callback()
  File "./test.py", line 34, in unauthorized
    raise Exception("Unauthorized.")
Exception: Unauthorized. 
```

我期望的行为是导入（和使用）对 Flask 上下文堆栈没有影响，并且通过扩展，即使已导入`testbed`Flask-Login 将继续在单元测试环境中工作。`testbed`

我已经盯着这个看了一会儿，但无济于事，如果有任何关于这个问题的潜在解决方案的见解和建议，我将不胜感激。

感谢您的阅读。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-03T20:13:57.277

测试平台为许多 GAE 服务使用单独的存根，包括数据存储和用户服务。

我对烧瓶不熟悉，但如果登录需要用户存在于数据库中，它会失败，因为测试台使用单独的数据库。您必须首先将用户数据加载到测试平台数据库中。

此外，如果您包含测试平台，则必须先进行一些初始化调用来设置存根，然后才能使用它。 [https://developers.google.com/appengine/docs/python/tools/localunittesting](https://developers.google.com/appengine/docs/python/tools/localunittesting)

# ruby-on-rails - 从 delay_job 执行时，Ruby on Rails fb_graph 使用未定义的方法字节大小失败

> ID：10000443
> 
> 赞同：1
> 
> 时间：2012-04-03T19:59:37.223
> 
> 标签：ruby-on-rails, ruby, delayed-job, httparty, fb-graph

我正在使用 Facebook 的组合`omniauth`并`delayed_job`与 Facebook 集成。我有一个`Authentication`看起来有点像这样的模型：

```
class Authentication < ActiveRecord::Base

  def account
    @account ||= FbGraph::User.me(token)
  end

  def post_to!(opts = {})
    account.feed!(opts)
  end

end 
```

那么从控制台我可以做这样的事情：

```
auth.post_to :message => 'Foo bar', :link => 'http://google.com' 
```

... 一切正常，更新已发布到我的 Facebook 提要。

但是，在应用程序中，我创建了一个完全执行上述操作的自定义延迟作业，只是每次都会失败，并出现以下错误堆栈：

```
undefined method `bytesize'' for nil:NilClass
  /Users/aaron/.rvm/gems/ruby-1.9.2-p290@bb/gems/activesupport-3.1.3/lib/active_support/whiny_nil.rb:48:in `method_missing''
  /Users/aaron/.rvm/gems/ruby-1.9.2-p290@bb/gems/httpclient-2.2.4/lib/httpclient/http.rb:830:in `block in escape''
  /Users/aaron/.rvm/gems/ruby-1.9.2-p290@bb/gems/activesupport-3.1.3/lib/active_support/core_ext/string/output_safety.rb:142:in `gsub''
  /Users/aaron/.rvm/gems/ruby-1.9.2-p290@bb/gems/activesupport-3.1.3/lib/active_support/core_ext/string/output_safety.rb:142:in `gsub''
  /Users/aaron/.rvm/gems/ruby-1.9.2-p290@bb/gems/httpclient-2.2.4/lib/httpclient/http.rb:829:in `escape''
  /Users/aaron/.rvm/gems/ruby-1.9.2-p290@bb/gems/httpclient-2.2.4/lib/httpclient/http.rb:822:in `block in escape_query''
  /Users/aaron/.rvm/gems/ruby-1.9.2-p290@bb/gems/httpclient-2.2.4/lib/httpclient/http.rb:818:in `each''
  /Users/aaron/.rvm/gems/ruby-1.9.2-p290@bb/gems/httpclient-2.2.4/lib/httpclient/http.rb:818:in `collect''
  /Users/aaron/.rvm/gems/ruby-1.9.2-p290@bb/gems/httpclient-2.2.4/lib/httpclient/http.rb:818:in `escape_query''
  /Users/aaron/.rvm/gems/ruby-1.9.2-p290@bb/gems/httpclient-2.2.4/lib/httpclient/http.rb:809:in `create_query_part_str''
  /Users/aaron/.rvm/gems/ruby-1.9.2-p290@bb/gems/httpclient-2.2.4/lib/httpclient/http.rb:538:in `set_content''
  /Users/aaron/.rvm/gems/ruby-1.9.2-p290@bb/gems/httpclient-2.2.4/lib/httpclient/http.rb:447:in `init_request''
  /Users/aaron/.rvm/gems/ruby-1.9.2-p290@bb/gems/httpclient-2.2.4/lib/httpclient/http.rb:705:in `new_request''
  /Users/aaron/.rvm/gems/ruby-1.9.2-p290@bb/gems/httpclient-2.2.4/lib/httpclient.rb:997:in `create_request''
  /Users/aaron/.rvm/gems/ruby-1.9.2-p290@bb/gems/httpclient-2.2.4/lib/httpclient.rb:866:in `do_request''
  /Users/aaron/.rvm/gems/ruby-1.9.2-p290@bb/gems/httpclient-2.2.4/lib/httpclient.rb:756:in `request''
  /Users/aaron/.rvm/gems/ruby-1.9.2-p290@bb/gems/httpclient-2.2.4/lib/httpclient.rb:666:in `post''
  /Users/aaron/.rvm/gems/ruby-1.9.2-p290@bb/gems/fb_graph-2.4.7/lib/fb_graph/node.rb:55:in `block in post''
  /Users/aaron/.rvm/gems/ruby-1.9.2-p290@bb/gems/fb_graph-2.4.7/lib/fb_graph/node.rb:122:in `handle_response''
  /Users/aaron/.rvm/gems/ruby-1.9.2-p290@bb/gems/fb_graph-2.4.7/lib/fb_graph/node.rb:54:in `post''
  /Users/aaron/.rvm/gems/ruby-1.9.2-p290@bb/gems/fb_graph-2.4.7/lib/fb_graph/connections/feed.rb:15:in `feed!''
  /Users/aaron/Sites/bb/app/models/authentication.rb:40:in `post_to!''
  /Users/aaron/Sites/bb/lib/share_activity_job.rb:39:in `block in perform''
  /Users/aaron/Sites/bb/lib/share_activity_job.rb:11:in `each''
  /Users/aaron/Sites/bb/lib/share_activity_job.rb:11:in `perform'' 
```

我已经正式到了开始将昂贵的计算机扔出窗外的地步。任何人都可以提供任何关于它为什么失败的见解，为什么它在从控制台执行时工作但在从自定义延迟作业执行时失败？

任何帮助是极大的赞赏。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T15:07:36.437

解决方案很简单。您必须在代码中使用**to_str**：

```
auth.post_to message: message.to_str, link: 'http://google.com' 
```

# python - 如何使用 minidom 检查 Python 中标签的结尾？

> ID：10000445
> 
> 赞同：0
> 
> 时间：2012-04-03T19:59:53.153
> 
> 标签：python

我正在尝试从 XML 创建一个表达式。从顶部节点读取我想将节点一个接一个地放入堆栈，一旦我点击一个结束标记，我想弹出堆栈中的所有元素。如何检查标签的结尾？

TIA,

约翰

回答：

好的，我想我有解决方案，使用这样的递归函数：

```
def findTextNodes(nodeList):
    for subnode in nodeList:
        if subnode.nodeType == subnode.ELEMENT_NODE:
            print("element node: ",subnode.tagName)
            # call function again to get children
            findTextNodes(subnode.childNodes)
            print('subnode return: ', subnode.tagName)
        elif subnode.nodeType == subnode.TEXT_NODE:
            print("text node: ",subnode.data) 
```

当“子节点返回”时，它会碰到结束标签！。

谢谢大家！。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-03T20:35:29.110

`minidom`构建一个 DOM。DOM 中没有标签，因为 XML 已完全解析为节点。DOM 中的一个节点代表整个 XML 元素。

听起来你想要的只是节点的孩子（或者`ELEMENT_NODE`可能是类型的孩子）。

由于您正在谈论将它们推入堆栈并将它们从堆栈中弹出，因此听起来您希望它们与它们在文档中出现的顺序相反。在这种情况下，您可能想要类似`reversed([child for child in node.childNodes if child.nodeType == child.ELEMENT_NODE])`.

如果您想要*所有*孩子（包括节点的孩子的孩子等等），那么递归解决方案是最简单的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-03T20:09:36.283

minidom 在内存中构建整个 DOM。因此它不会在遇到结束标签时通知您

1）您可以考虑切换到[http://docs.python.org/library/pyexpat.html](http://docs.python.org/library/pyexpat.html)并使用 xmlparser.EndElementHandler 来观察结束标记。您还需要使用 StartElementHandler 来构建您的堆栈。

2) 利用 minidom 生成的 DOM 树：只需从中选择节点。（不使用任何堆栈）

# sass - 如何将特定蓝图组件导入 Compass？

> ID：10000453
> 
> 赞同：0
> 
> 时间：2012-04-03T20:00:13.453
> 
> 标签：sass, compass-sass, blueprint-css

我可以使用 screen.scss 中的以下代码将整个蓝图 css 框架加载到我的项目中：

```
@import "compass";
@import "blueprint";
@include blueprint; 
```

但是，我只想包含特定组件，例如“蓝图/网格”和“蓝图/按钮”：

```
@import "compass";
@import "blueprint/grid";
@import "blueprint/buttons";
@include blueprint; 
```

当我尝试仅导入这些部分时，出现以下错误：

```
error resources/sass/screen.scss (Line 12: Undefined mixin 'blueprint'.) 
```

有谁知道如何包含蓝图的一部分，但不是全部？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T10:59:56.940

蓝图 mixin 位于根样式表中。这意味着您所做的一切都是正确的，但是您仍然需要执行 @import "blueprint" 来获取主 mixin。

```
@import "compass";
@import "blueprint";
@import "blueprint/grid";
@import "blueprint/buttons";
@include blueprint; 
```

# php - 为多个查询锁定 innoDB 中的行

> ID：10000459
> 
> 赞同：0
> 
> 时间：2012-04-03T20:00:50.937
> 
> 标签：php, mysql, sql

所以我正在研究 innoDB 的行锁定，似乎`SELECT...FOR UPDATE`是去查询锁定。在我的文件中，我有三个查询。两次更新，然后是插入。有没有办法确保每个连接的行都被锁定，然后这三个查询可以在其他人可以更改行之前运行？

以下是查询：

```
"UPDATE table SET r=r+2 WHERE r > '$l' AND home='$home'";

"UPDATE table SET l=l+2 WHERE l > '$l' AND home='$home'";

"INSERT INTO table (value, home, l, r, value2)
            VALUES ('$value', '$home', '$l'+1, '$l'+2, value2) "; 
```

澄清一下：我想锁定 home=$home 的所有行，然后在三个查询后释放它们。我想确保在任何其他连接可以对这些行具有写入能力之前执行三个查询。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-03T20:16:18.467

使用事务，您的更改在您明确提交之前对其他人不可见。

更多信息：[关于事务的 msql 文档](http://dev.mysql.com/doc/refman/5.0/en/sql-syntax-transactions.html)

# iphone - 延迟加载 Twitter 个人资料图片不起作用

> ID：10000463
> 
> 赞同：0
> 
> 时间：2012-04-03T20:01:07.580
> 
> 标签：iphone, objective-c, xcode, macos

我正在尝试创建一个简单的 Twitter 客户端，延迟加载 Twitter 图像。我可以在 UITableView 中获取和显示推文，但我无法加载图像。

这就是我得到的，文本和用户名正确加载但没有图像：

![在此处输入图像描述](../Images/b5c4823ffc55915c4719bc8e794034ca.png)

我认为问题可能出在此方法中，该方法在图像加载后由委托调用并应在表格视图单元格中显示图像：

```
// Called by ImageDownloader when image is ready to be displayed
- (void)imageDidLoad:(NSString *)downloadedImageUrl downloadedImage:(UIImage *)downloadedImage
{
    for (Tweet *tweet in self.tweets) {
        if (tweet.userProfileImageUrl == downloadedImageUrl) {
            tweet.userProfileImage = downloadedImage;
            UITableViewCell *tweetCell = [self.tableView cellForRowAtIndexPath:tweet.uiTableViewCellIndexPath];
            tweetCell.imageView.image = downloadedImage;
        }
    }
} 
```

但我在下面粘贴了更多我的代码，以确保......

* * *

我为我的推文定义了一个简单的类：

```
@interface Tweet : NSObject
{
    NSString *userName;
    NSString *text;
    NSString *userProfileImageUrl;
    UIImage *userProfileImage;
    NSIndexPath *uiTableViewCellIndexPath;
}

@property (nonatomic, retain) NSString *userName;
@property (nonatomic, retain) NSString *text;
@property (nonatomic, retain) NSString *userProfileImageUrl;
@property (nonatomic, retain) UIImage *userProfileImage;
@property (nonatomic, retain) NSIndexPath *uiTableViewCellIndexPath;
@end 
```

我还实现了一个简单的图像下载器类：

```
@protocol ImageDownloaderDelegate

- (void)imageDidLoad:(NSString *)downloadedImageUrl downloadedImage:(UIImage *)downloadedImage;

@end

@interface ImageDownloader : NSObject
{
    NSString *imageUrl;
    UIImage *downloadedImage;
    id <ImageDownloaderDelegate> __unsafe_unretained delegate;
    NSMutableData *activeDownload;
    NSURLConnection *imageConnection;
}

@property (nonatomic, retain) NSString *imageUrl;
@property (nonatomic, retain) UIImage *downloadedImage;
@property (unsafe_unretained) id <ImageDownloaderDelegate> delegate;
@property (nonatomic, retain) NSMutableData *activeDownload;
@property (nonatomic, retain) NSURLConnection *imageConnection;

- (void)startDownload;
- (void)cancelDownload;

@end 
```

有了这个实现：

```
#import "ImageDownloader.h"

#define kImageWidth 48
#define kImageHeight 48

@implementation ImageDownloader

@synthesize imageUrl;
@synthesize downloadedImage;
@synthesize delegate;
@synthesize activeDownload;
@synthesize imageConnection;

#pragma mark

- (void)startDownload
{
    self.activeDownload = [NSMutableData data];
    self.imageConnection = [[NSURLConnection alloc] initWithRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:self.imageUrl]] delegate:self];
}

- (void)cancelDownload
{
    [self.imageConnection cancel];
    self.imageConnection = nil;
    self.activeDownload = nil;
}

#pragma mark -
#pragma mark Download support (NSURLConnectionDelegate)

- (void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error
{
    // Clear the activeDownload property to allow later attempts
    self.activeDownload = nil;

    // Release the connection now that it's finished
    self.imageConnection = nil;
}

- (void)connectionDidFinishLoading:(NSURLConnection *)connection
{
    // Set userProfileImage and clear temporary data/image
    UIImage *image = [[UIImage alloc] initWithData:self.activeDownload];
    if (image.size.width != kImageWidth || image.size.height != kImageHeight) {
        CGSize itemSize = CGSizeMake(kImageWidth, kImageHeight);
        UIGraphicsBeginImageContext(itemSize);
        CGRect imageRect = CGRectMake(0.0, 0.0, itemSize.width, itemSize.height);
        [image drawInRect:imageRect];
        self.downloadedImage = UIGraphicsGetImageFromCurrentImageContext();
        UIGraphicsEndImageContext();
    } else {
        self.downloadedImage = image;
    }

    self.activeDownload = nil;

    // Release the connection now that it's finished
    self.imageConnection = nil;

    // Call our delegate and tell it that our image is ready for display
    [delegate imageDidLoad:self.imageUrl downloadedImage:self.downloadedImage];
}

@end 
```

在我的主控制器中，我加载了推文：

```
// Fetch the Twitter timeline and assigns tweets to the tweets property
- (void)fetchTweets
{
    self.tweets = [[NSMutableArray alloc] init];

    NSString *userTimelineUrl = @"https://api.twitter.com/1/statuses/user_timeline.json?include_entities=true&include_rts=true&screen_name=richardknop&count=25";

    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
        NSData *data = [NSData dataWithContentsOfURL:[NSURL URLWithString:userTimelineUrl]];

        NSError *error;

        NSArray *tweetJsonObjects = [NSJSONSerialization JSONObjectWithData:data options:kNilOptions error:&error];
        for (NSUInteger i = 0; i < [tweetJsonObjects count]; i++) {
            Tweet *tweet = [[Tweet alloc] init];
            tweet.userName = [[[tweetJsonObjects objectAtIndex:i] objectForKey:@"user"] objectForKey:@"name"];
            NSString * textString = [[tweetJsonObjects objectAtIndex:i] objectForKey:@"text"];
            tweet.text = textString;
            tweet.userProfileImageUrl = [[[tweetJsonObjects objectAtIndex:i] objectForKey:@"user"] objectForKey:@"profile_image_url"];
            [self.tweets addObject:tweet];
        }

        dispatch_async(dispatch_get_main_queue(), ^{
            [self.tableView reloadData];
        });

    });
} 
```

这是我加载表格视图内容的方式：

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    int count  = [self.tweets count];
    return count;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *cellIdentifier = @"TweetCell";

    UITableViewCell * tweetCell = [tableView dequeueReusableCellWithIdentifier:cellIdentifier];
    if (tweetCell == nil) {
        tweetCell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:cellIdentifier];
    }

    if ([self.tweets count] > 0) {

        Tweet *tweet = [self.tweets objectAtIndex:indexPath.row];
        tweet.uiTableViewCellIndexPath = indexPath;

        tweetCell.textLabel.text = tweet.text;
        tweetCell.detailTextLabel.text = tweet.userName;

        // Only load cached images; defer new downloads until scrolling ends
        if (!tweet.userProfileImage) {
            if (self.tableView.dragging == NO && self.tableView.decelerating == NO) {
                [self startImageDownload:tweet.userProfileImageUrl];
            }
            // If a download is deferred or in progress, return a placeholder image
            tweetCell.imageView.image = [UIImage imageNamed:@"Placeholder.png"];
        } else {
            tweetCell.imageView.image = tweet.userProfileImage;
        }

    }

    return tweetCell;
} 
```

如果推文图像，此方法开始下载：

```
- (void)startImageDownload:(NSString *)userProfileImageUrl
{
    BOOL downloadAlreadyInProgress = NO;
    for (ImageDownloader *storedImageDownloader in self.imageDownloadsInProgress) {
        if (storedImageDownloader.imageUrl == userProfileImageUrl) {
            downloadAlreadyInProgress = YES;
        }
    }

    if (downloadAlreadyInProgress == NO) {
        ImageDownloader *imageDownloader = [[ImageDownloader alloc] init];
        imageDownloader.imageUrl = userProfileImageUrl;
        imageDownloader.delegate = self;
        [self.imageDownloadsInProgress addObject:imageDownloader];
        [imageDownloader startDownload];
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-03T20:29:14.353

要么您删除了代码的重要部分，因为它太长而无法发布，或者您错过了`NSURLConnectionDataDelegate`（以前称为`NSURLConnectionDelegate`）协议中最重要的方法。您填写`self.activeDownload`实际数据的地方。

```
- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data {
    [self.activeDownload appendData:data];
} 
```

# iphone - 如何使用 Core Audio Converter Services 将使用 AVAudioRecorder 录制的 Apple IMA4 CAF 文件转换为 WAV 文件？

> ID：10000464
> 
> 赞同：4
> 
> 时间：2012-04-03T20:01:08.270
> 
> 标签：iphone, wav, avaudiorecorder, caf, ima4

注意：我是音频菜鸟，如果我说错了，请原谅我！

我需要将使用 AVAudioRecorder 录制的 Apple IMA4 CAF 音频文件转换为 WAV 文件**从我的应用程序**中转换为 WAV 文件。需要保留采样率。

我的应用需要支持 3.x，所以我不能使用 AVAssetReader/Writer。我注意到，当使用 AVAudioRecorder 直接录制线性 PCM WAV 文件时，即使没有录制音频，也总是使用 CPU（可能是由于缺乏硬件编码支持），所以这也不是一个选项。这个想法是我可以在 IMA4 中录制，因为它在什么都不做时使用 0% CPU，然后将输出文件转换为 WAV。

[Core Audio Converter Services](https://developer.apple.com/library/ios/#documentation/MusicAudio/Reference/AudioConverterServicesReference/Reference/reference.html)引起了我的注意，但我只是不知道如何正确使用它，所以如果有人以前使用过它，您能否分享有关将 CAF 文件转换为 WAV 文件需要做什么的信息/代码？

# java - 使用 return 语句的良好编程习惯

> ID：10000468
> 
> 赞同：2
> 
> 时间：2012-04-03T20:01:29.743
> 
> 标签：java

我是一名学习计算机科学的初级程序员，我多次被告知在循环中使用 return 语句不是一个好的编程习惯，应该避免。如今，我阅读了 Java 库中的大量代码来了解一切是如何工作的，我惊讶地发现循环中的 return 语句无处不在。

有谁可以解释我为什么应该避免在循环中使用 return 语句？

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-03T20:23:29.517

大多数人喜欢看一个方法并假设一个单一的出口点。当您在循环中间插入返回时，它会稍微打破流程并破坏这个假设。这就是为什么许多人会提出“不干净”的论点。它确实没有什么脏东西，但它迫使程序的“人类”读者更深入地研究该方法，以便更清楚地了解它的流程。你可以做的任何事情来减少人们为了理解你的逻辑流程而必须做的心理推理，这被认为是一件好事。

如果我可以在不阅读其内部结构的情况下浏览一个方法，同时全面了解它的作用和退出位置，那么作者做得很好。当一种最初意味着好的方法随着时间的推移而发展并迫使维护者在练习中在心理上兼顾多种状态以理解它时，就会出现问题。

一个很好的例子是经典的保护条款，它被一些人认为是好的做法。这是一种在继续之前检查状态或参数有效性的方法。如果一个方法给出了错误的东西，那么我们不想继续。看到这个假代码：

```
public void doSomethingCool(Object stuff) {
  if(weWereNotExpectingThis(stuff)) return; //guard clause

  while(somethingHappens()) {
      doSomethingCool();
  }
  return;
} 
```

有人走过来说，“嘿，酷！我们可以在方法中间使用 return 语句！” 他们做出改变，变成：

```
public void doSomethingCool(Object stuff) {
  if(weWereNotExpectingThis(stuff)) return; //guard clause

  while(somethingHappens()) {
    if(somthingHasChanged()) return; //because my team likes early exits, Yay!
    else {
      doSomethingCool();
    }
  }
  return;
} 
```

仍然不是太破旧，但越来越多的变化进入，你最终会得到这个：

```
public void doSomethingCool(Object stuff) {
  if(weWereNotExpectingThis(stuff)) return; //guard clause

  while(somethingHappens()) {
    if(somthingHasChanged()) return;
    else if(weDetectNewInput()) {
      doSomethingCool();
    } else {
      doSomethingBoring();
      if(weDetectCoolInput()) {
        doSomethingCool();
        continue;
      }
      return;
    }
  }
  return;
} 
```

现在你明白这是怎么回事了。很难一目了然地理解我们跳到哪里或发生了什么。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-03T20:03:02.837

这一切都归结为“干净的代码”。这句话对不同的人意味着不同的东西。在方法的底部有一个 return 语句被认为是干净的；这是主观的。

也就是说，方法可以有多个返回语句并且仍然被认为是干净的。这完全取决于您和您的团队的容忍度，更重要的是，您的高级开发人员认为干净。

当您跨越可接受的返回习惯和不可读/容易出错的代码之间的界限时，很难量化。一种安排如下的方法

```
method {

 if(!x) return;

  for(...) {
    if (x && y) return

    for(...) {
        if (z) return;
    }
  }

  if (a) return;

  ...
  return;
} 
```

不管你怎么看，它几乎都不干净。

换句话说，太多的 return 语句是一种代码味道，可能有问题的代码需要重新审视

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-03T20:13:52.227

长期以来不鼓励循环中的 return 语句的原因是因为一种称为[结构化编程](http://en.wikipedia.org/wiki/Structured_programming)的范式，这基本上意味着程序中的执行流程应该简单且易于从任何地方遵循。当时，GOTO 仍在广泛使用，并且正在对代码的可读性造成噩梦；作为反对它的一部分，人们常说每个代码块应该只有一个退出点，唯一的跳转应该是条件分支、循环和函数调用。许多人仍然相信这一点，因此不喜欢循环中的 break 语句、异常和 return 语句。

我自己的观点是，能够理解特定代码块的*作用*比能够遵循其确切的执行流程更重要。（我经常使用[函数](http://en.wikipedia.org/wiki/Functional_programming)式语言进行编程，并尝试以函数式风格编写代码，即使我不是。）因此，我认为循环中的 return 语句很好。这最终是一个品味问题。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-03T21:54:35.920

由于我还不能评论其他答案，我不得不发布一个新答案。我会非常小心地说任何哲学“总是”是正确的。这都是关于权衡的。如果添加第二条 return 语句可以帮助您避免不必要地使用 break 语句和布尔标志来管理您的程序流，那么这可能是正确的做法。

然而，其他评论者认为返回语句、中断和标志的网络是一种“代码味道”是正确的——看看你的方法是否可以分解成更小、更模块化的部分。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-03T20:05:52.447

那些坚持“单归”宗教的人会竭尽全力干净利落地打破循环，设置旗帜以表明该归来了。

接受这种警告的最好方法是考虑是否有充分的理由过早返回，或者是否表明在考虑如何构建代码时草率。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-03T21:00:59.283

如果目标是干净的代码和可读性，恕我直言，最好的方法是当场退出一个函数，即`return`在任何满足条件的地方，而不是最后只有一个`return`。

这在函数的琐碎示例中可能并不明显，但在真正复杂工作的函数中，对我来说 1）更容易理解发生了什么 2）更容易阅读 3）IMO 它不容易出错 - 许多有时检测到错误并需要尽快修复。如果你`return`最终保留一个，我已经多次看到“快速而肮脏”的修复可能会破坏代码。

但这是我个人的看法。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-03T20:03:59.810

在过去，它可能会混淆编译器和虚拟机，但现在不再如此了，所以这通常是一种安全的做法。我认为人们也会提出普遍的“糟糕的实践”论点，即如果你是一个真正优秀的程序员，你会找到一种更优雅的方式来做同样的事情。

干杯

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-04-03T20:06:24.613

我认为许多人认为它更清洁（和更安全的风格）的原因是；随着函数变得越来越复杂（随着应用程序的增长，它们经常这样做），函数中间的退出点可能更难追踪，可能会变得混乱并可能导致细微的错误。

但是，与所有“规则”一样，在某些例外情况和情况下，函数中间的 return 比等待到结束可能导致的可能的 if ( !error ) 块要干净得多。

# c# - 清除 C# 性能测试的缓冲区？

> ID：10000469
> 
> 赞同：1
> 
> 时间：2012-04-03T20:01:30.233
> 
> 标签：c#, sql-server, performance, .net-4.0, buffer

在 SQL Server 中，当我想检查性能时，我*清除所有缓冲区*- 以获得真实结果：我使用

```
 CHECKPOINT 1
  DBCC DROPCLEANBUFFERS
  dbcc FREEPROCCACHE 
```

然后我检查之间*的差异*`GetDate()'s`

我应该在 C# 中使用什么命令来清除任何缓冲区/“速度助手”机制？ *（我打算使用秒表）。*

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-03T20:14:28.107

.NET 程序有很多“缓存”，并不是所有的都可以清除。您的 CPU 缓存不仅由您的进程填充，还由您计算机上运行的其他进程填充。您在第一次调用函数时会产生编译函数的抖动，这使得第一次迭代比任何其他迭代都长得多。如果您使用任何类型的 I/O，那么您也拥有这些缓存和缓冲区。

此外，您为什么要清除缓存？他们在那里帮助你。在现实世界中，缓存命中将有助于您的性能 - 为什么不在考虑缓存和缓冲区的同时衡量程序的性能呢？

无论如何，我认为您应该使用分析器而不是 a`Stopwatch`来衡量您的表现。SQL Server 也是如此。

# ruby-on-rails - 在使用 capistrano 部署 Rails 期间无法识别 git 存储库

> ID：10000489
> 
> 赞同：6
> 
> 时间：2012-04-03T20:02:44.133
> 
> 标签：ruby-on-rails, git, deployment, capistrano

我试图弄清楚为什么我在尝试部署我的 rails 应用程序时从远程 git 存储库中收到错误。它告诉我它不是一个 git 存储库，但我可以毫无问题地推拉它。然而，我最近遇到了 git 没有被 bash 发现的问题，但这只是我安装 macports 时出现的路径变量问题（我认为）。现在已经修复了。提前感谢您提供的任何帮助！错误输出如下：

```
my-MacBook-Pro:project myUser$ cap deploy:update
  * executing `deploy:update'
 ** transaction: start
  * executing `deploy:update_code'
    updating the cached checkout on all servers
    executing locally: "git ls-remote git@server.example.ca/usr/local/git_root/project.git master"
fatal: 'git@server.example.ca/usr/local/git_root/project.git' does not appear to be a git repository
fatal: The remote end hung up unexpectedly
*** [deploy:update_code] rolling back
  * executing "rm -rf /usr/local/www/sites/project.example.ca/releases/20120403193900; true"
    servers: ["project.example.ca"]
    [project.example.ca] executing command
    [project.example.ca] rvm_path=/usr/local/rvm /usr/local/rvm/bin/rvm-shell 'ruby-1.9.2-p290@project' -c 'rm -rf /usr/local/www/sites/project.example.ca/releases/20120403193900; true'
    command finished in 639ms
Command git ls-remote git@server.example.ca/usr/local/git_root/project.git master returned status code pid 1815 exit 128 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-03T20:06:44.053

看起来您的 Git URL 格式错误：

```
git ls-remote git@server.example.ca/usr/local/git_root/project.git master 
```

应该：

```
git ls-remote git@server.example.ca:/usr/local/git_root/project.git master 
```

它们遵循 SCP 协议（​​有关更多信息，请参见[git-clone](http://jk.gs/git-clone.html)手册页）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-26T13:37:06.047

您的密钥必须对 ssh-agent 可用

我有同样的问题。解决了 "ssh-add yourkey" ，其中 yourkey 是 id_rsa 的路径，您可以检查：ssh-add -L，如果确定将返回您的公钥

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T19:13:04.083

原来问题是存储库地址格式错误，正如上述用户所建议的那样。但是，通过向存储库地址添加“ssh:”前缀解决了该问题。感谢您的建议！

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-04-03T20:06:07.143

您可以尝试删除本地存储库并重新克隆它吗？

# php - 如何在 Code Igniter 中关闭/打开内存缓存

> ID：10000491
> 
> 赞同：0
> 
> 时间：2012-04-03T20:02:49.963
> 
> 标签：php, codeigniter, libmemcache

我想通过一个常量全局处理 memcache 功能，例如：define('CACHE_ON',1) 或 define ('CACHE_ON',0)。我们在获取/保存记录时在模型中使用 load->driver 函数。是否有任何功能可以打开/关闭缓存功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T07:40:49.660

您可以定义自己的常量，然后加载 memcache 驱动程序，或者在事件`CACHE_ON`为 0 时加载 dummy：

```
<?php
// Wherever you load your "cache" driver...
$this->load->driver('cache');
if (defined('CACHE_ON') && !CACHE_ON)
{
    $this->cache_driver =& $this->cache->dummy;
}
else
{
    $this->cache_driver =& $this->cache->memcache;
} 
```

如果您`memcache`直接引用了驱动程序，则必须重构一些代码。没有全局开关，但您可以通过重构创建自己的开关。

# android - 尝试从数据库中选择微调器中的选项

> ID：10000492
> 
> 赞同：0
> 
> 时间：2012-04-03T20:02:50.540
> 
> 标签：android, database, android-spinner

我正在根据我的数据库中的数据填充几个字段。我无法弄清楚如何使用数据库中的数据来选择微调器中的项目。Spinner 有四个选项，当将数据输入数据库时​​，我选择一个。现在，当我调用 db 时，我希望该选项显示为微调器中选择的选项。基本上我试图让数据库中的选项成为微调器中显示的选项。注释掉的行是我尝试过的，但不起作用。有任何想法吗？

```
 truckNumber = (Spinner) findViewById(R.id.truck_number);
    drivable = (RadioButton) findViewById(R.id.drivable);
    notDrivable = (RadioButton) findViewById(R.id.not_drivable);
    truck = (RadioButton) findViewById(R.id.truck);
    trailer = (RadioButton) findViewById(R.id.trailer);
    aa = new ArrayAdapter<String>(this,
            android.R.layout.simple_spinner_item, trucks);
    bb = new ArrayAdapter<String>(this,
            android.R.layout.simple_spinner_item, trailers);
    newTime = new Time();
    edit= new Inspection();
    long something = edit.returnID();
    updateDB= new InspectionDBAdapter(this);
    if(something>0)
    {
        updateDB.open();    
        Cursor result= updateDB.getOneInspection(something);
        result.moveToFirst();
        int odo=result.getColumnIndex("odometer");
        int firstDriver=result.getColumnIndex("driver");
        int secondDriver=result.getColumnIndex("codriver");
        int driveCondition=result.getColumnIndex("status");
        int vehicleType=result.getColumnIndex("vehicle_type");
        int truckNum=result.getColumnIndex("vehicle_id");
        driver.setText(result.getString(firstDriver));
        odometer.setText(result.getString(odo));
        coDriver.setText(result.getString(secondDriver));
    //  truckNumber.setAdapter(aa.getPosition(result.getString(truckNum).to));
    //  truckNumber.setSelection(result.getString(truckNum).toString());
        if(result.getString(driveCondition).equals("1"))
            drivable.setChecked(true);
        else
            notDrivable.setChecked(true);

        if(result.getString(vehicleType).equals("truck"))
            truck.setChecked(true);
        else
            trailer.setChecked(true);

        result.close();
        updateDB.close();
    } 
```

[更新：在如何按值而不是按位置设置 Spinner 的选定项目中](https://stackoverflow.com/questions/2390102/how-to-set-selected-item-of-spinner-by-value-not-by-position)找到了答案？. 第二个答案 48 票

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-03T20:13:18.920

但是，我并不完全理解您的问题

```
truckNumber.setAdapter(aa.getPosition(result.getString(truckNum).toString)); 
```

甚至不能编译。您可能希望这样做

```
truckNumber.setAdapter(aa); 
```

# php - 从 html 输入字符串中删除带有完整 base_url 的协议和结果

> ID：10000494
> 
> 赞同：1
> 
> 时间：2012-04-03T20:02:55.287
> 
> 标签：php, regex, while-loop, preg-replace

我希望从通过 html input=text 提供的输入中去除 base_url 并从 _POST 中提取。输入本身很可能包含完整的 uri，但也/很可能是一个端口分配，后跟几个路径分隔符。

示例：[https:](https://lab1.sfo1.transparentpixel.com:554/rtmp/) //lab1.sfo1.transparentpixel.com:554/rtmp/ _definst_

我需要最多 3 个结果实例化，这些值最终被放入一个数组中。

因此，为了在一个独立的脚本中进行测试，我最终得到了以下代码：

旧的历史回顾：

```
<?php
$var1 = "https://lab1.sfo1.transparentpixel.com:1935/rtsp/_definst_";
$var2 = "http://lab1.sfo1.transparentpixel.com:1935/rtmp/_definst_";
$var3 = "lab1.sfo1.transparentpixel.com";

$count = 1;
while ( $count <= 3 )
{
$test[] = 'var'.$count.' = ' . preg_replace(array("#^.*/([^\:]+)\:.*#"), '$1', ${var.$count});
$count++;
}

var_dump($test);
?> 
```

编辑后更正：

```
<?php

    $url1 = "https://lab1.sfo1.transparentpixel.com:1935/rtsp/_definst_";
    $url2 = "http://lab1.sfo1.transparentpixel.com:1935/rtmp/_definst_";
    $url3 = "lab1.sfo1.transparentpixel.com";

$count = 1;
while ( $count <= 3 )
{
$test[] = 'url'.$count.' = ' . preg_replace(array("#^.*/([^\:]+)\:.*#"), '$1', ${url.$count});
$count++;
}

print_r($test);
?> 
```

我的结果：

```
$ php tpixel_url_replace.php 
Array
(
    [0] => url1 = lab1.sfo1.transparentpixel.com
    [1] => url2 = lab1.sfo1.transparentpixel.com
    [2] => url3 = lab1.sfo1.transparentpixel.com
) 
```

虽然这按我的预期工作，但我肯定会错过一些迭代。有人愿意澄清我可能忽略的事情吗？是的，我知道我可以使用 str_replace，但是在整个方案中运行 preg_ over str_ 的成本是最小的。

我只是在寻找洞察力，因为我 100% 确定我不是任何关于 reg-ex 或 preg_replace 的大师。

输入？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-03T23:03:19.083

我希望我能正确理解你的问题。您在使用正则表达式或循环 URL 的代码时遇到问题吗？或两者？

我将假设两者...

我建议您仅匹配要提取的内容，而不是匹配整个事物并将要提取的位分组。考虑到这一点，正则表达式可能如下所示：

`[^/]+\.[^/:]{2,3}`

用英语说：

> 匹配除正斜杠之外的任何内容，直到出现一个点，然后匹配除正斜杠或冒号之外的 2 到 3 个以上的任何内容

这看起来很简单，但我认为它可以满足您的需求。

这是一些 php 代码，它以各种格式创建一个 url 数组，然后循环遍历每个格式并提取我认为你想要的位。我已经改用使用`preg_match`而不是`preg_replace`因为我认为在这种情况下它更有意义：

```
<?php
    $urls = array(
                "https://lab1.sfo1.transparentpixel.co.jp:1935/rtsp/_definst_",
                "http://lab1.sfo1.transparentpixel.com:1935/rtmp/_definst_",
                "http://lab1.sfo1.transparentpixel.com/rtmp/_definst_",
                "lab1.sfo1.transparentpixel.com",
                "someurl.com:1935/rtmp/_definst_",
                "someurl.com/_definst_",
                "http://someurl.co.uk");

    foreach($urls as $url)
    {
        preg_match('%[^/]+\.[^/:]{2,3}%m', $url, $matches);         
        echo $matches[0]; // instead of this you could do $test[] = $matches[0];  
    }
?> 
```

您会注意到我正在使用[foreach 循环](http://php.net/manual/en/control-structures.foreach.php)遍历数组，这意味着我们不限于您的示例中的固定迭代次数。

这个的输出是：

```
lab1.sfo1.transparentpixel.co.jp
lab1.sfo1.transparentpixel.com
lab1.sfo1.transparentpixel.com
lab1.sfo1.transparentpixel.com
someurl.com
someurl.com
someurl.co.uk 
```

# internet-explorer-8 - iframe 和 IE8 仿真

> ID：10000496
> 
> 赞同：0
> 
> 时间：2012-04-03T20:02:57.963
> 
> 标签：internet-explorer-8, svg, emulation

好吧，

我们的应用程序使用 SVG 来显示图形，使用不受支持的 Adob​​e 插件、Firefox 和 Chrome 可以很好地显示这些图形。但是，IE9 被淘汰了，因为它不支持 SMIL 动画。

所以现在（使用 IE9 时）我试图通过模拟 IE8 来显示图形，以恢复我们漂亮的闪亮动画。

```
<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE8" /> 
```

当我将页面加载到它自己的选项卡中时，使用了正确的插件并且我的动画工作！耶！但是...这个页面需要在我们的应用程序中放置在它自己的 iframe 中。当放置在自己的框架中时，IE8 仿真似乎崩溃了。即使框架中的用户代理返回为

```
"Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 6.1; WOW64; Trident/5.0; SLCC2; .NET CLR 2.0.50727; .NET CLR 3.5.30729; .NET CLR 3.0.30729; Media Center PC 6.0; .NET4.0C; .NET4.0E; InfoPath.3)" 
```

它似乎没有受到尊重，因为原生 SVG 正在启动，我的动画被破坏了。

所以我的问题是，之前有没有人处理过这个问题（使用不同的仿真渲染特定的帧）——或者我是在没有桨的河流上吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T08:22:18.793

您可能想尝试[FakeSMILe](http://leunen.me/fakesmile/)是否在 IE9+ 中工作，以及它是否支持足以让您的内容正常工作。FakeSMILe在 javascript 中实现了[SMIL 的一个子集。](http://leunen.me/fakesmile/status.html)它真的很[容易使用](http://leunen.me/fakesmile/faq.html#dev)，并且不应该干扰原生 svg 动画支持。

# php - 包含文件中的非全局变量如何在相对 url 中可用而在包含的 php 文件的完整 url 中不可用？

> ID：10000498
> 
> 赞同：0
> 
> 时间：2012-04-03T20:03:12.420
> 
> 标签：php

当我包含 vars.php 时：

```
$var='hello'; 
```

在 index.php 中：

```
require 'vars.php';
echo $var; 
```

它工作得很好，即使 $var 不是全局的。但是当 index.php 看起来像这样时：

```
require 'http://site.com/vars.php'; 
```

echo $var 不起作用。我怎样才能让它工作呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-03T20:09:13.623

你不能。 `require 'http://site.com/vars.php';`尝试获取*web 服务器在 site.com 呈现*的 PHP 脚本的*输出*- 它不再是 PHP 代码。你不能让 web 服务器以这种方式返回 PHP 源代码，你不应该尝试。

 *你为什么要这样做？如果可能，最好在包含中使用相对路径。这样您就可以移动您的应用程序代码，或将其部署在不同的服务器上，而无需编辑硬编码的路径名。

无论如何，我认为这可能是您想要做的（使用绝对文件系统路径而不是相对路径）：

```
require '/path/to/site.com/files/vars.php'; 
```

在 Linux 上，此目录名称通常为`/var/www`. 在 Windows 上，路径将以驱动器号和冒号开头。

重要的是要了解您的声明`require 'vars.php';`不是相对*URL* - 它是相对*文件系统路径*。*

# java - 挂在java进程构建器启动的进程

> ID：10000499
> 
> 赞同：0
> 
> 时间：2012-04-03T20:03:29.027
> 
> 标签：java

我正在制作一个在 Windows 上运行的 Web 应用程序，Apache Tomcat 上的 JSP，它应该将 Office 文件转换为 PDF。为此，我在 Word 上创建了将文件保存为 PDF 格式的宏，并且这些宏已经过测试。我的应用程序在测试机器上正确运行。我所做的类似于以下内容（抱歉，现在无法访问代码）：

```
String arr[3] = {wordPath,macroName,fileToconvertPath};
new ProcessBuilder(arr).start(); 
```

我正在检索标准和错误输出。在测试机器中它按预期工作，也在服务器中打印 arr 变量并在命令行中使用它并且它工作。但是，当从应用程序调用时，Word 在任务管理器中作为进程打开，但永远不会按预期结束。

编辑：

这是实际的代码：

```
 public boolean changeFormatMSOffice(String inF, String WORD) {
        System.out.println("changeFormatMSOffice(" + inF + "," + WORD + ")");
        String macro = "";
        ArrayList<String> wordArr = new ArrayList<String>(java.util.Arrays.asList(TO_PDF_WORD.replace(" ", "").split(",")));
        ArrayList<String> excelArr = new ArrayList<String>(java.util.Arrays.asList(TO_PDF_EXCEL.replace(" ", "").split(",")));
        ArrayList<String> ppArr = new ArrayList<String>(java.util.Arrays.asList(TO_PDF_PP.replace(" ", "").split(",")));
        String extension = inF.substring(inF.lastIndexOf(".")).replace(".", "").trim();
        BufferedWriter out;
        String cmdArr[] = new String[3];
        List<String> cmdList = new ArrayList<String>();
        cmdList.add(WORD);
        cmdArr[0] = WORD;
    String saveFile = "";
    if (wordArr.contains(extension)) {
        macro = "/msaveAsPDF";
        cmdList.add(macro);
        cmdList.add(inF);
        //cmdArr[1] = "/m" + macro;
        cmdArr[2] = inF; // aplica conversion sobre el archivo al que apunta inF
    } else if (excelArr.contains(extension) || ppArr.contains(extension)) {
        if (excelArr.contains(extension)) {
            macro = "/mSaveXLSAsPDF";
        } else {
            macro = "/msavePPTAsPDF";
        }
        cmdList.add(macro);
        int fileNum = 0;
        saveFile = "\"" + DOCUMENTS_PATH + (DOCUMENTS_PATH.substring(DOCUMENTS_PATH.length() - 1).equals(File.separator) ? "" : File.separator) + fileNum + ".txt\"";
        while (new File(saveFile).exists()) {
            fileNum++;
            saveFile = "\"" + DOCUMENTS_PATH + (DOCUMENTS_PATH.substring(DOCUMENTS_PATH.length() - 1).equals(File.separator) ? "" : File.separator) + fileNum + ".txt\"";
        }
        try {
            out = new BufferedWriter(new FileWriter(saveFile));
            out.write(inF);
            out.close();
            cmdList.add(saveFile);
            cmdArr[2] = saveFile; // aplica converion sobre la ruta que esta escrita en la direccion del saveFile
        } catch (Exception e) {
            System.err.println(e.toString());
        }
    }

    cmdArr[1] = macro; //macro a usar
    String cmd = "\"" + cmdArr[0] + "\" " + cmdArr[1] + " \"" + cmdArr[2] + "\"";
    System.out.println(cmd);
    try {
        ProcessBuilder proc = new ProcessBuilder(cmdList);
        System.out.println("PreWaitForList");
        Process pro = proc.start();
        StreamGobbler g1 = new StreamGobbler("stdin", pro.getInputStream());
        StreamGobbler g2 = new StreamGobbler("stderr", pro.getErrorStream());
        g1.start();
        g2.start();
        pro.waitFor();
        //Process proc = Runtime.getRuntime().exec(cmdArr);
        //proc.waitFor();
        System.out.println("AfterWaitFor");
        try {
            if (!saveFile.equals("")) {
                new File(saveFile).delete();
            }
        } catch (Exception e) {
        }
        return true;
    } catch (Exception e) {
        System.err.println(e.toString());
        return false;
    }
} 
```

这是 StreamGobbler 的实现：

```
public class StreamGobbler implements Runnable {

    String name;
    InputStream is;
    Thread thread;

    public StreamGobbler(String name, InputStream is) {
        this.name = name;
        this.is = is;
    }

    public void start() {
        thread = new Thread(this);
        thread.start();
    }

    public void run() {
        try {
            InputStreamReader isr = new InputStreamReader(is);
            BufferedReader br = new BufferedReader(isr);

            while (true) {
                String s = br.readLine();
                if (s == null) {
                    break;
                }
                System.out.println("[" + name + "] " + s);
            }

            is.close();

        } catch (Exception ex) {
            System.out.println("Problem reading stream " + name + "... :" + ex);
            ex.printStackTrace();
        }
    }
} 
```

# java - Java - 在 Windows 中连接到 RDP 服务器

> ID：10000501
> 
> 赞同：1
> 
> 时间：2012-04-03T20:03:34.867
> 
> 标签：java, windows, remote-desktop, rdp, mstsc

我正在尝试通过 RDP 连接并使用从 PROPERTIES 文件中获取的凭据对特定服务器进行身份验证自动化一些身份验证。

在 Windows 上，内置的 RDP 客户端是 mstsc.exe，但您似乎无法像在 linux 和 Mac 上那样通过命令行提供登录凭据。

在 Windows 上是否有任何解决方法，使用 mstsc.exe，我可以在其中自动进行身份验证，而无需用户进行任何交互？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-08-29T14:41:42.780

You can store the RDP credentials using the cmdkey tool

```
 cmdkey.exe /generic:servername /user:username /pass:pass 
```

Once you have run this, your mstsc call will be able to auto login:

```
 mstsc.exe /v:servername 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-03T20:09:09.263

您可以使用自定义连接文件吗？然后将其传递给 MSTSC EG：

```
mstsc customfile.RDP 
```

这是 RDP 文件的样子，我保存了凭据，注意 FULL ADDRESS 字段和 USERNAME 字段。

```
 screen mode id:i:2
use multimon:i:0
desktopwidth:i:1680
desktopheight:i:1050
session bpp:i:32
winposstr:s:0,3,0,0,800,600
compression:i:1
keyboardhook:i:2
audiocapturemode:i:0
videoplaybackmode:i:1
connection type:i:2
displayconnectionbar:i:1
disable wallpaper:i:1
allow font smoothing:i:0
allow desktop composition:i:0
disable full window drag:i:1
disable menu anims:i:1
disable themes:i:0
disable cursor setting:i:0
bitmapcachepersistenable:i:1
full address:s:###.###.###.###:####
audiomode:i:0
redirectprinters:i:1
redirectcomports:i:0
redirectsmartcards:i:1
redirectclipboard:i:1
redirectposdevices:i:0
redirectdirectx:i:1
autoreconnection enabled:i:1
authentication level:i:2
prompt for credentials:i:0
negotiate security layer:i:1
remoteapplicationmode:i:0
alternate shell:s:
shell working directory:s:
gatewayhostname:s:
gatewayusagemethod:i:4
gatewaycredentialssource:i:4
gatewayprofileusagemethod:i:0
promptcredentialonce:i:1
use redirection server name:i:0
username:s:<USERNAME> 
```

将其传递给 mstsc.exe 调用。我会尝试查看密码的存储位置。

I wouldn't call this super secure either. I think the password is stored encrypted, it'll be a few minutes until I figure out how.

What are you trying to accomplish exactly? MSTSC doesn't return values based on authentication. So, I'm not sure what you plan on capturing.

# c++ - printf 和多个字符串的不良行为

> ID：10000502
> 
> 赞同：2
> 
> 时间：2012-04-03T20:03:35.047
> 
> 标签：c++, printf, inet

当我将 printf/printf_s 与两个字符串一起使用时，两个 %s 变量的输出相同。

```
IN_ADDR oldIP;
oldIP.S_un.S_addr = iptable[j]->ipAddress;
IN_ADDR newIP;
newIP.S_un.S_addr = adapterTbl->table[i].dwAddr;
printf_s("index %d old: %s new: %s", 
          adapterTbl->table[i].dwIndex, inet_ntoa(oldIP),
           inet_ntoa(newIP)); 
```

输出是：

```
index 11 old: 192.168.1.1 new: 192.168.1.1 
```

现在，我通过在 print 语句之前中断来检查 oldip 和 newip 的值是否不同，并且我还尝试制作以下函数并在 print 语句中使用它（而不是 inet_ntoa）：

```
char *convertIP (DWORD ip)  
{  
    IN_ADDR *addr = new IN_ADDR;
    memset(addr, 0, sizeof(IN_ADDR));
    addr->S_un.S_addr = (u_long) ip;
    return inet_ntoa(*addr);
} 
```

输出是：

```
192.168.1.1
192.168.1.2
index 11 old: 192.168.1.1 new: 192.168.1.1 
```

为什么我会看到这种行为，我该如何解决？
谢谢 ：）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-03T20:07:34.020

`inet_ntoa`返回：

> 一个静态分配的缓冲区，后续调用会覆盖

（这来自 Linux 联机帮助页。）

您不能在函数中使用它两次，只有第二次调用的输出是可见的（并且您不知道两个调用中的哪一个是第二次调用 - 未指定函数参数的评估顺序）。

做两个单独`printf`的 s，或将输出复制`inet_ntoa`到本地缓冲区并输出那些。

从[POSIX](http://pubs.opengroup.org/onlinepubs/007904975/functions/inet_addr.html)：

> *inet_ntoa* ()的返回值可能指向静态数据，这些静态数据可能会被后续对*inet_ntoa* () 的调用覆盖。

所以这种行为可能并不局限于Linux，你不能依赖它*不*覆盖静态缓冲区。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-03T20:20:27.133

由于 Mat 描述的原因，您必须`inet_ntoa`在执行下一次调用之前使用一次调用的结果。

这是一种简单的方法：

```
IN_ADDR oldIP;
oldIP.S_un.S_addr = iptable[j]->ipAddress;
IN_ADDR newIP;
newIP.S_un.S_addr = adapterTbl->table[i].dwAddr;
std::string s_old(inet_ntoa(oldIP));
std::string s_new(inet_ntoa(newIP));
printf_s("index %d old: %s new: %s", 
      adapterTbl->table[i].dwIndex, s_old.c_str(),
       s_new.c_str()); 
```

请注意，`string`构造函数会复制传入的 C 字符串。因此，当`inet_ntoa`再次调用时，它可以自由地覆盖其先前存储的值。

# python - 如何在没有 django 的情况下使用 sorl-thumbnail？

> ID：10000504
> 
> 赞同：0
> 
> 时间：2012-04-03T20:03:36.583
> 
> 标签：python, django, sorl-thumbnail

就我而言，我有机会生成图像缩略图并在将它们上传到管理员计算机上的服务器 (Amazon S3)*之前进行一些后处理。*
我知道 sorl 在生成缩略图之前会检查它是否存在，但是使用了一种复杂的命名方案，所以我希望有一种方法可以直接从我的脚本中访问 sorl。

官方文档没有说明单独使用 sorl-thumbnail，有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-03T23:04:02.127

除非您正在做一些复杂的事情，否则我会考虑使用[ImageMagick](http://www.imagemagick.org/script/index.php)进行这种离线处理。对于像缩放图像和合成徽标这样的简单任务，编写 ImageMagick 单行代码更快更容易：

```
convert in.jpg -scale 200x200 logo.png -gravity SouthEast -composite out.jpg 
```

而不是在 PIL 中实现相同的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-03T22:55:25.363

我建议您查看 sorl-thumbnail 的来源。真的所有 sorl-thumbnail 都是 PIL（python 图像库）的包装器。尽管我确信您可以找到一种可能将 sorl-thumbnail 与 django 分离的方法，但这将是不平凡的。也就是说，如果您说将其设置为管理命令（结果是完整的 django 环境），您将能够使用 sorl-thumbnail 文档中记录的低级 api。

这就是说，你可能会更好地弄清楚 sorl-thumbnail 如何与 PIL 接口并以解耦的方式复制那部分代码，因为你将不得不进行额外的后期处理（可能再次使用 PIL），而 sorl-thumbnail 可以'反正也不行。

还要记住所有这些，我不确定你的意图是什么......这些都不是你可以设置为在网络服务器上运行的东西。您不能在连接到 django 服务器的客户端计算机上运行 python 脚本，这简直是不可能的。但是，如果您只是将其分发给某些同事或其他东西，则完全可以生成一个 python 程序来生成带水印的缩略图。

如果您确实试图让任意人访问您的网站并通过网络界面向您上传带水印/缩略图的文件......那么您将需要开始一些认真的 javascript 学习。

# delphi - 无法修改“发票日期”字段

> ID：10000515
> 
> 赞同：2
> 
> 时间：2012-04-03T20:04:09.703
> 
> 标签：delphi, ms-access, delphi-7

我有以下 ms 访问 2003 表：

```
Invoice_Master
(
   Invoice_Id  Autonumber,
   Customer_Id  integer,
   Invoice_Date  Date/Time not null,
.
.
.
); 
```

和以下代码（Delphi 7）

```
procedure TfmInvoiceMaster.adoMasterEditNewRecord(DataSet: TDataSet);
begin
  inherited;
  adoMasterEditInvoice_Date.AsDateTime := Date;
end; 
```

当我尝试添加新记录时，我以异常错误 sys 结束：

> 无法修改“发票日期”字段。

请问有什么问题

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-03T20:38:54.660

你这样做是错的。:)

您应该改用该`AfterEdit`事件。从帮助文件中`TDataSet.AfterEdit`：

> 编写 AfterEdit 事件处理程序以在数据集进入编辑模式后立即执行特定操作。AfterEdit 在启用记录编辑、重新计算计算字段并调用数据事件处理程序以处理记录更改后由 Edit 调用。

像这样使用它：

```
procedure TfmInvoiceMaster.adoMasterAfterEdit(DataSet: TDataSet);
begin
  // No inherited call! This is an event handler, not an overridden method
  adoMasterEditInvoice_Date.AsDateTime := Date;
end; 
```

但是，从您的文本中，您似乎想要在插入记录时执行此操作，而不是编辑（“当我尝试添加新记录时，我以异常错误 sys 结束：”）。如果是这种情况，请使用`AfterInsert`相同的方式：

```
procedure TfmInvoiceMaster.adoMasterAfterInsert(DataSet: TDataSet);
begin
  // No inherited call! This is an event handler, not an overridden method
  adoMasterEditInvoice_Date.AsDateTime := Date;
end; 
```

# css - A标签上居中文本的IE位置

> ID：10000516
> 
> 赞同：0
> 
> 时间：2012-04-03T20:04:12.003
> 
> 标签：css

我正在使用这个 CSS 将一行文本（链接）与背景图像对齐，因此文本完全垂直居中，它在 Safari 中工作正常，但在 IE 中，文本向下 1 个像素。该类直接应用于 A 标记。

```
.menu{
height:20px;
padding-right:10px;
padding-top:4px;

font-size:12px;
text-decoration:none;
font-family: Arial, Helvetica, sans-serif;
color:#333;

background-image:url(/admin/icon.gif);
background-position:right;
background-repeat:no-repeat;
display:inline-block;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-03T20:09:29.233

您可以尝试重置浏览器的样式.. 这是一个可能有帮助的链接[http://sixrevisions.com/css/css-tips/css-tip-1-resetting-your-styles-with-css-reset /](http://sixrevisions.com/css/css-tips/css-tip-1-resetting-your-styles-with-css-reset/)

重置列表：[http ://www.cssreset.com/](http://www.cssreset.com/)

每个版本的 IE 也有 hacks 来做些细微的改变。 [http://mathiasbynens.be/notes/safe-css-hacks](http://mathiasbynens.be/notes/safe-css-hacks)

如果对于旧版本，请查看 ChromeFrame :)

# c++ - 与 boost::python 并行运行两个 python 脚本

> ID：10000524
> 
> 赞同：2
> 
> 时间：2012-04-03T20:04:28.330
> 
> 标签：c++, parallel-processing, boost-python, cpython

当涉及到脚本部分时，我的（游戏）应用程序使用 Boost.Python 有问题。如果您不连接到外部服务器，我有一个在同一进程中运行的客户端线程和一个服务器线程。

这就是我的问题出现的地方：似乎 Python 解释器无法在客户端线程中与服务器线程中的脚本并行执行脚本，因为它会导致应用程序崩溃。

所以我的问题是：是否有可能在 Python 解释器中并行运行两个（或更多）脚本？我整天都在搜索，发现了很多关于 Py_NewInterpreter 的信息，但这并不能解决我的问题，因为它使用 GIL，我不希望解释器锁定其他脚本的执行，因为它会导致客户端延迟和/或服务器端。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-03T21:56:12.877

`GIL`到今天为止，在同一进程中使用 python 线程时，您无法避免交互。

您可能想查看`multiprocessing`模块，该模块旨在轻松生成 Python 进程，因此不与`GIL`.

另一种选择是`GIL`在包装的 C/C++ 函数中显式释放不需要的时候。这可以使用`PyEval_SaveThread`和`PyEval_RestoreThread`函数来完成。

# php - javascript - 从 mysql 获取附加字段并显示在表中

> ID：10000526
> 
> 赞同：0
> 
> 时间：2012-04-03T20:04:39.547
> 
> 标签：php, javascript, mysql, forms

我有一个 javascript，它从 mysql 获取数据并在我的 html 表单中显示它而无需刷新页面。鉴于我不了解 javascript，我得到了以下脚本，这得到了 StackOverflow 社区的大力协助，即@Brant Olsen。

该脚本可以完美地获取 3 个 mysql 结果字段。我想为此添加额外的 2 个字段并将它们显示在我的 html 表单中。

工作脚本是：

```
<script type="text/javascript">  
  function showUser(userNumber, str)  
  {  
    if (str=="")  
    {  
      document.getElementById("txtHint" + userNumber).innerHTML="";  
      return;  
    }    
    if (window.XMLHttpRequest)  
    {// code for IE7+, Firefox, Chrome, Opera, Safari  
      xmlhttp=new XMLHttpRequest();  
    }  

    xmlhttp.onreadystatechange=function()  
    {  
      if (xmlhttp.readyState==4 && xmlhttp.status==200)  
      {  
        //document.getElementById("txtHint" + userNumber).innerHTML=xmlhttp.responseText; 
        var responseText = xmlhttp.responseText; 
        var description = responseText; 
        var warehouse = ""; 
        var sellingUnits = ""; 
        if (responseText.indexOf("NOT A VALID") == -1) 
        { 
          description = responseText.substring(12, responseText.indexOf(",Warehouse:"));  
          warehouse = responseText.substring(responseText.indexOf(",Warehouse:")+11, responseText.indexOf(",SellingUnits:"));  
          sellingUnits = responseText.substring(responseText.indexOf(",SellingUnits:")+14);  
        } 

        document.getElementById("whse" + userNumber).innerHTML = warehouse;  
        document.getElementById("txtHint" + userNumber).innerHTML = description;  
        document.getElementById("su" + userNumber).innerHTML = sellingUnits; 

      }  
    }  
    xmlhttp.open("GET","getdata1.php?q="+str,true);  
    xmlhttp.send(); 
  } 
</script> 
```

**getdata1.php 是：**

```
<?php 
 $q=$_GET["q"]; 

$con = mysql_connect('localhost', 'dbuser', 'dbpass'); 
 if (!$con) 
   { 
   die('Could not connect: ' . mysql_error()); 
   } 

mysql_select_db("dbname", $con); 

$sql="SELECT Category, Description,SellingUnits,Grouping,CasesPerPallet,ShrinksPerPallet FROM skudata WHERE packcode = '".$q."'"; 
$result = mysql_query($sql); 
$rows=mysql_num_rows($result); 

if($rows==0){echo "<font color=red><b>NOT A VALID PRODUCT CODE</b></font>";} else { 
while($row = mysql_fetch_array($result)) 
 { 
   echo "Description:" . $row['Description'] . ",Warehouse:" . $row['Grouping'] . ",SellingUnits:" . $row['SellingUnits']; 
 } 
} 

mysql_close($con); 
 ?> 
```

我已经使用要传递给 html 表单的附加字段更改了 getdata1.php：

```
$sql="SELECT Category, Description,SellingUnits,Grouping,CasesPerPallet,ShrinksPerPallet,if(SellingUnits='cs', CasesPerPallet,ShrinksPerPallet) as SUQTY FROM skudata WHERE packcode = '".$q."'"; 
$result = mysql_query($sql); 
$rows=mysql_num_rows($result); 

if($rows==0){echo "<font color=red><b>NOT A VALID PRODUCT CODE</b></font>";} else { 
while($row = mysql_fetch_array($result)) 
 { 
   echo "Description:" . $row['Description'] . ",Warehouse:" . $row['Grouping'] . ",SellingUnits:" . $row['SellingUnits'] . ",SUQTY:" . $row['SUQTY'] . ",Category:" . $row['Category']; ; 
 } 
} 
```

从这里开始，我正在努力正确编码另外两个字段。表格行的示例如下：

```
<tr id="r1">  
    <td>
        <input type=checkbox name=kvi1 id=kvi1 value=1>
    </td>
    <td>
        <input size=10  type=number id=sku1 name=sku1 onchange="showUser(1, this.value)"><a href="sku.php" target="_blank"><img src=q.png border=0></a>
    </td>
    <td>
        <div align="left" id="txtHint1">&nbsp;</div>
    </td>
    <td>
        <div align="left" id="whse1">&nbsp;</div>
    </td>
    <td>
        <div align="left" id="su1">&nbsp;</div>
    </td>
    <td>
        <div align="left" id="suqty1">&nbsp;</div>
    </td>
    <td>
        <div align="left" id="category1">&nbsp;</div>
    </td>
</tr> 
```

我已经按如下方式编辑了javascript但没有成功，有人可以帮忙吗？

```
<script type="text/javascript">  
  function showUser(userNumber, str)  
  {  
    if (str=="")  
    {  
      document.getElementById("txtHint" + userNumber).innerHTML="";  
      return;  
    }    
    if (window.XMLHttpRequest)  
    {// code for IE7+, Firefox, Chrome, Opera, Safari  
      xmlhttp=new XMLHttpRequest();  
    }  

    xmlhttp.onreadystatechange=function()  
    {  
      if (xmlhttp.readyState==4 && xmlhttp.status==200)  
      {  
        //document.getElementById("txtHint" + userNumber).innerHTML=xmlhttp.responseText; 
        var responseText = xmlhttp.responseText; 
        var description = responseText; 
        var warehouse = ""; 
        var sellingUnits = ""; 
        var SUQTY = ""; 
        var Category = ""; 
        if (responseText.indexOf("NOT A VALID") == -1) 
        { 
          description = responseText.substring(12, responseText.indexOf(",Warehouse:"));  
          warehouse = responseText.substring(responseText.indexOf(",Warehouse:")+11, responseText.indexOf(",SellingUnits:"));  
          sellingUnits = responseText.substring(responseText.indexOf(",SellingUnits:")+11, responseText.indexOf(",SUQTY:")); 
          suqty = responseText.substring(responseText.indexOf(",SUQTY:")+11, responseText.indexOf(",Category:")); 
          category = responseText.substring(responseText.indexOf(",Category:")+14);  
        } 

        document.getElementById("whse" + userNumber).innerHTML = warehouse;  
        document.getElementById("txtHint" + userNumber).innerHTML = description;  
        document.getElementById("su" + userNumber).innerHTML = sellingUnits; 
        document.getElementById("suqty" + userNumber).innerHTML = SUQTY; 
        document.getElementById("category" + userNumber).innerHTML = Category; 

      }  
    }  
    xmlhttp.open("GET","getdata1.php?q="+str,true);  
    xmlhttp.send(); 
  } 
</script> 
```

谢谢，瑞安

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-03T23:06:24.730

我知道您不会喜欢这个答案，因为它需要您重新编写代码，但我会尽力提供帮助。

实际上，通过 ajax 调用在 PHP 和 JS 之间发送的这种性质的任何类型的数据都应该使用 >= PHP5.3 中的原生 JSON。这样做的好处是 Ajax 和 PHP 可以来回传递数据，而无需在应用程序级别进行任何真正的解析。而且它非常容易改变。如果您需要再次更改它，这是完美的。

**注意：如果您的 PHP 版本低于 5.3 并且您没有努力安装 JSON 插件，请不要使用下面的代码。此外，JSON 对象在旧版浏览器中也不是原生的。[http://caniuse.com/json](http://caniuse.com/json)**

# PHP端

使 while 循环内的回显如下所示：

```
echo json_encode(array(
    "description" => $row['Description'],
    "warehouse" => $row['Grouping'],
    "sellingunits" => $row['SellingUnits'],
    "suqty" => $row['SUQTY'],
    "category" => $row['Category']
)); 
```

# JS端

```
var data = {};
if (responseText.indexOf("NOT A VALID") == -1) { 
    data = JSON.parse(responseText);
}
// Check the values or just place an empty string if undefined
document.getElementById("whse" + userNumber).innerHTML = data.warehouse || '';  
document.getElementById("txtHint" + userNumber).innerHTML = data.description || '';  
document.getElementById("su" + userNumber).innerHTML = data.sellingunits || ''; 
document.getElementById("suqty" + userNumber).innerHTML = data.suqty || ''; 
document.getElementById("category" + userNumber).innerHTML = data.category || ''; 
```

# php - 我需要转义 text/plain 或 text/javascript 吗？

> ID：10000528
> 
> 赞同：0
> 
> 时间：2012-04-03T20:04:45.597
> 
> 标签：php, javascript, security, xss

假设我有这样的事情：

```
if ($command === 'txt') {
    header('Content-type: text/plain;charset=utf-8');
    echo $result;
    exit();
} else ($command === 'js') {
    $json = array( $result );
    header('Content-type: text/javascript;charset=utf-8');
    echo $callback . '(' . substr(json_encode($json), 1, -1) . ');';
    exit();
} 
```

我可以`htmlspecialchars`在 echo 语句上使用吗，如果它被解释为 html，它会搞砸，另一方面，如果浏览器将它解释为 html，它们不会留下有人可能尝试进行 xss 攻击的风险。

我该怎么办？我不应该担心`htmlspecialchars`吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-03T20:06:10.123

不，你不应该使用`htmlspecialchars`. 这些都没有意义，因为`htmlspecialchars`旨在避免 HTML 注入。但是，如果您使用 JSON，您的客户端代码需要注意它如何使用返回值。

例如，将其注入`innerHTML`是不安全的。

# mysql - 是否有使用 Perl 从 MySql 中提取数据的“一次性”方法？

> ID：10000530
> 
> 赞同：-2
> 
> 时间：2012-04-03T20:04:50.997
> 
> 标签：mysql, perl, dbi

我有一个 MySql 数据库，其中包含多语言网站的所有文本，每种不同的语言都在一个单独的列中。（例如，列 'en'，id 1 = 'Hello'，列 'fr'，id 1 = 'Bonjour'，等等）

我正在使用 Perl/DBI 脚本，它根据用户语言和所需部分以通常的方式从数据库中提取文本，方法是准备查询、执行查询，然后将结果记录复制到数组中。不过，这一切对我来说似乎非常麻烦且效率低下。

这是我现在使用的业务端。

```
omy (@TEXT, $getText);
$getText = $dbh->prepare("SELECT `$language` FROM text WHERE Page_Section = ? ORDER BY line_number");
$getText->execute('Section_Name');
while($_ =  $getText->fetchrow_array){push(@TEXT, $_)};
$getText->finish;

print qq~
<p>$TEXT[0]</p>
<p>$TEXT[1]</p>
<p>$TEXT[2]</p>
~; 
```

这种方法对我来说的问题是，如果我想从数据库中删除其中一行，或者添加几行新行怎么办？它弄乱了整个脚本，它只是从一开始就通过数组“盲目地”递增。在这个例子中，如果我删除了数据库中的第二行并想插入两个新行，我将不得不重写脚本的相关部分，否则它会以错误的顺序打印。

我当然可以通过“绝对”ID 提取每一行文本，但这需要一个单独的“执行”语句和“fetchrow_array”行来处理我想要的每一位文本。

有没有更简洁的方法，比如一次性“拉和打印”方法，我可以抓取单个字段并根据 ID 输出它们？像..（警告 - 伪代码来了）

```
$query = $dbh->prepare(SELECT 'language' FROM 'text' WHERE 'id' = ?);

print qq~
<p>$query->execute(0)</p>
<p>$query->execute(1)</p>
<p>$query->execute(2)</p>
~;
$query->finish; 
```

你明白了.. ;) 这样的事情可能吗？提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-03T20:29:52.653

是的，这绝对是可能的。它们被称为“子程序”。

```
sub selectrow_array {
   my $sth = shift;
   $sth->execute(@_)
      or return ();
   my $row = $sth->fetch();
      or return ();
   $sth->finish()
      or return ();
   return @$row;
}

my $sth = $dbh->prepare(q{SELECT 'language' FROM 'text' WHERE 'id' = ?});

for my $i (0..2) {
   printf "<p>%s</p>\n", selectrow_array($sth, $i);
} 
```

* * *

也就是说，这样的 sub 已经作为`dbh`.

```
my $sth = $dbh->prepare(q{SELECT 'language' FROM 'text' WHERE 'id' = ?});

for my $i (0..2) {
   printf "<p>%s</p>\n", $dbh->selectrow_array($sth, undef, $i);
} 
```

# javascript - 单击按钮时运行功能

> ID：10000534
> 
> 赞同：-4
> 
> 时间：2012-04-03T20:05:11.327
> 
> 标签：javascript

我将此脚本添加到我的页面它是一个投票包含一个我想要的按钮当用户单击按钮它运行一个功能

**JavaScript 嵌入代码：**

```
 <script type="text/javascript" charset="utf-8" src="http://static.polldaddy.com/p/6061322.js"></script>
   <noscript><a href="http://polldaddy.com/poll/6061322/">أختار مرشحك للرئاسة</a></noscript> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-03T20:07:08.280

只需替换您的函数名称

```
<a href="http://polldaddy.com/poll/6061322/" onclick="functioneName()"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-03T20:13:11.753

像这样使用jquery：

```
$('.pds-vote-button').bind('click', function() {
  //call your function
}); 
```

您可能想要解除绑定已经发生的事情....

# javascript - Google Docs 是如何在点击后粘贴的？

> ID：10000537
> 
> 赞同：3
> 
> 时间：2012-04-03T20:05:24.787
> 
> 标签：javascript, clipboard, google-docs

我想实现一个点击粘贴功能，类似于 Google Docs 中的功能。

当用户通过上下文菜单或键盘快捷键（使用 onpaste 事件和朋友）启动时，我可以让粘贴工作，但我无法弄清楚如何获得点击粘贴样式的驱动来导致要粘贴的系统剪贴板的内容 - 而且，从我读过的内容来看，这实际上是不可能的！

有人知道谷歌是如何做到这一点的吗？:-)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-03T20:24:33.687

您是否阅读了这篇似乎解释了使用不同浏览器访问剪贴板的文章？[谷歌文档和剪贴板访问](http://googlesystem.blogspot.com/2012/03/google-docs-and-clipboard-access.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-03T20:52:40.100

我知道这实际上不是一个解决方案，而是一种解决方法。但也许你会觉得它值得并且会满足你的需要。

不能模拟 [Ctrl]+[V] 的按键吗？它适用于*大多数*浏览器和操作系统，但请始终记住，这些密钥可以随时在操作系统级别更改。

有时，除了这种解决方法之外的任何解决方案对您的脚本来说都可能过于繁琐，而且有时您只是不想拥有太多事件/侦听器。

# image - 共轭梯度二维图像重建 Matlab

> ID：10000538
> 
> 赞同：0
> 
> 时间：2012-04-03T20:05:25.537
> 
> 标签：image, matlab, gradient, 3d-reconstruction

我正在做一个项目，我应该使用共轭梯度法在 matlab 的帮助下给定图像的正弦图来重建 SPECT 图像。我已经意识到需要求解线性方程 Ax=b，其中 b 是一个 N 维向量，其中包含包装成向量的已知正弦图值，x 是包含要重建的未知图像的 M 维向量，并且 A是系统向量。我可以很容易地用我拥有的正弦图构造b，但我真的不知道我应该如何得到A。我想要的图像是128X128，正弦图是128X32（即32个投影）。

有人对我如何使用matlabs PCG函数的帮助来重建我的图像有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T12:57:51.680

投影矩阵 A 的第 n 列是第 n 个像素的氡变换，即其第 n 个元素为 1，所有其他元素为零。这对于 matlab radon 函数是可行的，但我怀疑它是否非常有效，因为 A 将是稀疏的，我猜循环将需要相当长的时间，尽管 128x128x128x32 应该仍然是可管理的并且（稀疏）矩阵可以缓存在.mat 文件，只要您的几何形状没有改变。

您可以尝试其他 matlab 脚本，例如[http://www2.imm.dtu.dk/~pch/AIRtools/](http://www2.imm.dtu.dk/~pch/AIRtools/) 通过调用获得 A

```
N=128;               % 128x128 pixels
p=128;               % Number of rays per projection
alpha=(0:32)*180/32; % List of projection angles in degrees
A=paralleltomo(N, alpha, p); 
```

我希望这会有所帮助。

# php - PHP“未找到异常”

> ID：10000539
> 
> 赞同：19
> 
> 时间：2012-04-03T20:05:34.553
> 
> 标签：php, exception

我有一个有趣的问题。在试图了解为什么某个网站向浏览器返回 http 代码 500 时，我发现了该消息

```
PHP Fatal error:  Class 'MZ\\MailChimpBundle\\Services\\Exception' not found in /var/www/website/vendor/bundles/MZ/MailChimpBundle/Services/MailChimp.php on line 41 
```

在apache日志中。查看提到的行：

```
throw new Exception('This bundle needs the cURL PHP extension.'); 
```

我现在了解如何使站点正常工作，但我仍然想知道为什么引发异常的代码（这会导致更有用的日志消息）失败。可能是什么原因？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-04-03T21:07:20.993

MZMailChimpBundle不包含命名[空间](https://github.com/miguel250/MZMailChimpBundle)`Exception`中`MZ\MailChimpBundle\Services`命名的类。

由于这个简单的事实以及异常应该发出的错误消息与集成问题有关（检查 curl 库），我认为这是一个错误。

原文有意思`\Exception`，不在`Exception`这里。这是一个在命名空间中可能发生的常见错误。要修复文件，请使用别名/导入`\Exception`为`Exception`：

```
namespace MZ\MailChimpBundle\Services;
use Exception; 
```

和/或更改以下`new`行[`MZMailChimpBundle/Services/MailChimp.php`](https://github.com/miguel250/MZMailChimpBundle/blob/master/Services/MailChimp.php)：

```
throw new \Exception('This bundle needs the cURL PHP extension.'); 
```

另请参阅相关问题：[如何使用 php 的“根”命名空间？](https://stackoverflow.com/q/6593621/367456)和一个具有相同*Class 'Namespace\Example' not found 的*错误消息：[Calling a static method from a class in another namespace in PHP](https://stackoverflow.com/q/6579040/367456)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2020-04-07T09:08:11.550

扩展@hakre 答案，您可以通过以下方式简化其用法：

```
use \Exception as Exception; 
```

这样你就可以抛出异常而无需记住反斜杠，例如：

```
throw new Exception('This bundle needs the cURL PHP extension.'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-03T20:18:38.117

在我看来，该行试图在当前命名空间中抛出用户定义的异常，而不是 PHP 本身的内置异常类

# ruby - 命令行界面 Ruby

> ID：10000540
> 
> 赞同：2
> 
> 时间：2012-04-03T20:05:41.683
> 
> 标签：ruby

说我有代码：

```
print(">>> ")
command = gets 
```

我想做的是`command`像在 Ruby 中通常那样执行变量，方法是在要执行的代码周围加上反引号。我该怎么做？如果我做：

```
`command` 
```

它只是尝试执行 word 命令。如何执行变量？？？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-03T20:13:12.070

只需像使用字符串一样插入它：

```
`#{command}` 
```

# c# - .NET NetworkStream.Length 缺乏支持的解决方法

> ID：10000541
> 
> 赞同：0
> 
> 时间：2012-04-03T20:05:44.507
> 
> 标签：c#, asyncsocket, .net

...基本上正是标题所说的。NetworkStream.Length 未实现。有什么替代方案？

我正在尝试进行一系列递归的异步回调，这些回调包含对 NetworkStream.BeginRead(...) 的调用。要知道我何时达到基本情况并收到所有字节，我需要知道流中字节的长度。有解决方法吗？

代码（此代码的入口点是在 TcpListern.BeginAcceptTcpClient 调用之后编写的。：

```
private void StartRead(IAsyncResult ar)
{
   try
   {
      //Do an initial read:
      AsyncClient client = (AsyncClient)ar.AsyncState;
      int amountRead = 0;
      try
      {
         amountRead = client.ClientStream.EndRead(ar);
      }
      catch (IOException io)
      {
         ProcessDebugLog("Async read complete", io);
         client.ClientStream.Close();
         return;
      }
      string text = Encoding.UTF8.GetString(client.Bytes, 0, amountRead);

      //If TCP segmentation has occurred, more blocks will have
      // to get read in:
      if (client.ClientStream.Position < client.ClientStream.Length /*EXCEPTION HERE*/)
      {
         try
         {
            client.ClientStream.BeginRead(client.Bytes, 0, client.Bytes.Length, StartRead, client);
         }
         catch (IOException io)
         {
            ProcessDebugLog("Async read complete", io);
            client.ClientStream.Close();
         }
      }
      else
      {
         client.ClientStream.Close();
      }
   }
   catch (Exception ex)
   {
      ProcessDebugLog("ERROR - StartRead", ex);
   }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-03T20:07:44.690

> ...基本上正是标题所说的。NetworkStream.Length 未实现。有什么替代方案？

您继续阅读直到流结束。没有其他选择 - 在流关闭之前，*总是*可以有更多数据。

如果您控制协议，那么如果一个流可以包含多个“消息”，您应该为每条消息添加长度前缀。（您可以使用分隔符作为替代，但这更麻烦。）

请注意，在获得所有数据之前，您不应该*从*二进制解码为文本，*或者*您应该使用[`Decoder`](http://msdn.microsoft.com/en-us/library/system.text.decoder.aspx)能够保持“未完成”字符状态的 a ——以防您的读取最终在字符中途分裂。

# html - 隐藏选择框的布局

> ID：10000543
> 
> 赞同：0
> 
> 时间：2012-04-03T20:05:49.060
> 
> 标签：html, layout, drop-down-menu

我需要隐藏选择框的标准布局而不禁用它，因为我有它的背景图像。我想要的效果类似于“-webkit-appearance: none”，它可以工作，但我需要它在 Firefox 和 IE 上工作。

我怎么能这样做？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-03T20:14:04.407

没有这样的风格`IE`。因为`Firefox`你可以使用`-moz-appearance`.

见：[http ://help.dottoro.com/lcglsvea.php](http://help.dottoro.com/lcglsvea.php)

# ios - 导航栏标题和视图控制器视图之间的弹出窗口中的额外蓝色部分

> ID：10000544
> 
> 赞同：1
> 
> 时间：2012-04-03T20:05:49.993
> 
> 标签：ios, uiviewcontroller, uinavigationcontroller, uipopovercontroller

我正在使用 UIPopoverController 从选定的 UITableViewCell 中显示一个弹出框。问题是弹出框标题区域太高了。似乎在导航栏下方和视图控制器的视图上方，UITextView 上方出现了一个额外的蓝色圆角矩形。为什么它在那里，我该如何摆脱它？

弹出框控制器的内容视图控制器是一个 UINavigationController。UINavigationController 的根视图控制器是一个 UIViewController。UIViewController 的视图是一个 UITextView。

UIViewController 将其 title 属性设置为“UIViewController title”。UITextView 将其文本设置为“UITextView text\n\nUITextView text\n\nUITextView text”。弹出窗口中没有其他按钮或视图。

我的 iOS 模拟器的弹出窗口截图：

![在此处输入图像描述](../Images/31d94a0d1cb436ef7887aad95ce111ff.png)

我正在使用 iOS 5.1, Xcode 4.3.1 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T23:27:19.263

解决方案：在 UIViewController 中将 WantsFullScreenLayout 设置为 YES。

# ibm-integration-bus - WMB ESQL 将常量传递给 passthru

> ID：10000547
> 
> 赞同：0
> 
> 时间：2012-04-03T20:05:56.693
> 
> 标签：ibm-integration-bus, extended-sql

我正在研究 IBM Websphere Message Broker v6.0 并在 ESQL 中编写消息流。我正在使用 passthru 在数据库上触发选择查询。

现在的问题是 passthru 使用 ' 来开始和结束它的参数字符串。我们在 SQL 中使用 ' 来表示常量——比如 WHERE T1.col1 = 'Y'。因此，当我在 passthru 参数中使用 ' 时，它会将其视为字符串的结尾。

这是 ESQL 代码：

`SET result1 = passthru ('select CASE WHEN T2.X_FLG = 'Y' AND (SELECT D2.RGN FROM V1.X AS D2
WHERE D2.DLR = V.DLR AND (D2.RGN = '500' OR D2.RGN = '600')) FROM V1
<left join all the tabels>');`

现在的问题是 passthru 参数字符串以第一个 ' 结尾，即 Y 之前 - 数据库选择查询的参数。ESQL 编译器给我编译器错误，说它是一个语法错误。

是否有一些字符要在 ' 之前附加，以便将其识别为字符 ' 而不是作为字符串的结尾来传递？像 \' 或 /' 之类的东西？我已经尝试了所有这些，但似乎没有任何效果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T19:29:44.020

弄清楚了！还有另一个子句（我应该说）允许我们将常量值传递给 SQL 语句，它是在 SQL 查询的 ' 完成后编写的。我们需要常量值的地方应该有？它标记了插入的位置。插入按照我们在“values”标签中放置常量值的顺序进行。所以，上面的 passthru 查询可以写成：

```
SET result1 = passthru ('select CASE WHEN T2.X_FLG = ? AND (SELECT D2.RGN FROM V1.X AS D2
WHERE D2.DLR = V.DLR AND (D2.RGN = ? OR D2.RGN = ?)) FROM V1
<left join all the tables>' to Database.{datasource_name} values('Y','500','600'); 
```

记住，? 不应括在括号中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T18:49:34.220

试试这样设置

```
passthru ('select CASE WHEN T2.X_FLG = '||VariableName||' 
```

具有值 Y 的变量名

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-20T08:16:20.373

```
SET result1 = passthru ('select CASE WHEN T2.X_FLG = ''Y'' AND (SELECT D2.RGN FROM V1.X AS D2 WHERE D2.DLR = V.DLR AND (D2.RGN = ''500'' OR D2.RGN = ''600'')) FROM V1 <left join all the tabels>'); 
```

我的意思是说使用双单引号`(''string value'')`这将被视为一个值而不是查询的终止。希望这会奏效。

请注意这不是双引号，它的单引号两次。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-02-14T07:25:26.723

你可以写成

```
passthru('select CASE WHEN T2.X_FLG = ?', 'Y') 
```

您分别在查询后 simplay put`?`和逗号分隔值。

# tcl - tcl 在命名空间名称中使用变量

> ID：10000548
> 
> 赞同：1
> 
> 时间：2012-04-03T20:06:00.110
> 
> 标签：tcl

Tcl 8.4。

我有这`namespace`棵树：

```
namespace eval menu_tree {

    #--------------------------------------------------------------------------
    ## Main Menu
    namespace eval main_menu {
        variable title "Main Menu"
    }

    #--------------------------------------------------------------------------
    ## Setup Menu
    namespace eval setup_menu {
        variable title "Show Setup Information"
    }

    #--------------------------------------------------------------------------
    ## Help Menu
    namespace eval help_menu {
        variable title "Show Help Information"
    }
} 
```

这个想法是有一个这样的功能：

```
proc print_title {menu} {
    puts $menu::title
} 
```

这适用于全局变量。但是，据我所知，需要使用带有命名空间名称的“$”。我试图在网上找到答案，但没有任何结果。有谁知道该怎么做，如果它甚至可能？

谢谢你，-伊利亚。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-03T21:04:15.553

好吧，这里的关键方法是记住“原始 Tcl”根本没有那个“$”语法糖*。* 获取变量内容的原始方法是单参数调用`set`：

```
set foo bar ;# sets variable "foo" to contain the value "bar"
puts [set foo] ;# prints the value contained in variabe "foo" 
```

因此，您可能应该使用类似的东西

```
proc print_title {menu} {
    puts [set ${menu}::title]
} 
```

以便`${menu}::title`扩展为变量的名称，然后`set`检索该变量的值。

注意在单词“menu”周围使用花括号——没有它们，Tcl 会尝试取消引用名为“menu::title”的变量，这可能不是您想要的。

另一件需要注意的事情是`print_title`高度依赖于“menu”参数的内容：在它展开之后，`set`命令必须看到一个它应该能够解析的字符串，这受制于[一组规则](http://www.tcl.tk/man/tcl8.5/TclCmd/namespace.htm#M26)。在了解更多细节之前，很难获得进一步的建议。

有关该vs主题的更多信息，请参阅[此问题。](https://stackoverflow.com/q/7299320/720999)`$``set`

# ruby-on-rails - Backbone + Rails 集合获取

> ID：10000549
> 
> 赞同：3
> 
> 时间：2012-04-03T20:06:00.900
> 
> 标签：ruby-on-rails, backbone.js

以前，我的 Backbone 路由器是这样的：

```
class App.Routers.ThingsRouter extends Backbone.Router
  routes: '': 'index'
  routes: 'previews/:id': 'show'

  initialize: ->
    @collection = new App.Collections.ThingsCollection
    @collection.fetch

  index: ->
    view = new App.Views.ThingsIndex(collection: @collection)
    $('#app-container').html(view.render().el)

  show: (id) ->
    @model = @collection.get(id)
    view = new App.Views.ThingsShow(model: @model)
    $('#app-container').html(view.render().el) 
```

当导航到 时`http://localhost`，我会`index`渲染视图，当单击单个元素时，我会`show`渲染视图。但是，如果我`http://localhost/things/1`直接访问（即通过输入 URL），则`show`不会呈现视图。我意识到这是因为视图是在`@collection.fetch`完成之前渲染的。我将路由器更改为以下内容：

```
class App.Routers.ThingsRouter extends Backbone.Router
  routes: '': 'index'
  routes: 'previews/:id': 'show'

  initialize: ->
    @collection = new App.Collections.ThingsCollection

  index: ->
    @collection.fetch success: =>
      view = new App.Views.ThingsIndex(collection: @collection)
      $('#app-container').html(view.render().el)

  show: (id) ->
    @collection.fetch success: =>
      that.model = that.collection.get(id)
      view = new App.Views.ThingsShow(model: @model)
      $('#app-container').html(view.render().el) 
```

哪个工作正常。但是，由于每次切换路由时都会重新获取集合，因此显然会有一点延迟。这是很好的 Backbone 做法吗？不确定是否有更好的方法来做到这一点。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-03T22:04:45.223

这是 jQuery 的[Deferred()](http://www.erichynds.com/jquery/using-deferreds-in-jquery/)方法的一个很好的用例。

只需创建一个 Deferred 对象并将其附加到路由器。然后在 initialize 方法中获取集合并调用`resolve()`Deferred 对象。您的 index 和 show 方法可以订阅`done`回调并实例化视图。在获取集合之前，不会运行此完成的回调。如果它已经被提取，那么它会立即运行。

```
class App.Routers.ThingsRouter extends Backbone.Router
  routes: '': 'index'
  routes: 'previews/:id': 'show'

  initialize: ->
    @collectionFetched = new $.Deferred
    @collection = new App.Collections.ThingsCollection
    @collection.fetch success: ->
      @collectionFetched.resolve()

  index: ->
    that = this
    @collectionFetched.done ->
      view = new App.Views.ThingsIndex(collection: that.collection)
      $('#app-container').html(view.render().el)

  show: (id) ->
    that = this
    @collectionFetched.done ->
      that.model = that.collection.get(id)
      view = new App.Views.ThingsShow(model: that.model)
      $('#app-container').html(view.render().el) 
```

# ios - iOS 正弦波生成 - 可听见的咔嗒声

> ID：10000552
> 
> 赞同：3
> 
> 时间：2012-04-03T20:06:13.223
> 
> 标签：ios, core-audio, audiounit, synthesis, synthesizer

我正在为 iOS 创建一个合成器。在玩耍并尝试学习核心音频之后，我遇到了一个我无法理解的问题。我的正弦波会定期发出咔哒声，我猜这与相位有关。我查看了有关该主题的几本指南和书籍，并且都表明我做得正确。

如果有人愿意为我查看我的代码，将不胜感激。

```
static OSStatus renderInput(void *inRefCon, AudioUnitRenderActionFlags *ioActionFlags, const AudioTimeStamp *inTimeStamp, UInt32 inBusNumber, UInt32 inNumberFrames, AudioBufferList *ioData)
{

    // Get a reference to the object that was passed with the callback
    // In this case, the AudioController passed itself so
    // that you can access its data.
    AudioController *THIS = (AudioController*)inRefCon;

    // Get a pointer to the dataBuffer of the AudioBufferList
    AudioSampleType *outA = (AudioSampleType *)ioData->mBuffers[0].mData;

    float freq = THIS->Frequency;   
    float phase = THIS->sinPhase;

    float envValue;
    float sinSignal;

    // The amount the phase changes in  single sample
    double phaseIncrement = 2 * M_PI * freq / kGraphSampleRate;

    // Loop through the callback buffer, generating samples
    for (UInt32 i = 0; i < inNumberFrames; ++i) {       

        sinSignal = sin(phase);

        envValue = THIS->env.tick();

        // Put the sample into the buffer
        // Scale the -1 to 1 values float to
        // -32767 to 32767 and then cast to an integer
        outA[i] = (SInt16)(((sinSignal * 32767.0f) / 2) * envValue);

        phase = phase + phaseIncrement;

        if (phase >= (2 * M_PI * freq)) {
            phase = phase - (2 * M_PI * freq);
        }
    }

    // Store the phase for the next callback.
    THIS->sinPhase = phase;

    return noErr;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-03T20:19:01.157

相位可能在错误的点溢出

替换这个：

```
if (phase >= (2 * M_PI * freq)) {
    phase = phase - (2 * M_PI * freq); 
} 
```

和

```
if (phase >= (2 * M_PI)) { 
    phase = phase - (2 * M_PI); 
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-03T21:09:20.413

如果您的频率不完全是整数值，则此行：

```
phase = phase - (2 * M_PI * freq); 
```

将以不等于 2pi 的量调整和旋转相位，从而产生不连续性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-05T05:20:14.717

对于这些类型的问题，一个很好的调试技术是在示波器或波形编辑器中查看您的音频。准确查看点击发生的时间和频率通常会提供一些关于点击发生原因的线索。

相同的技术可以用于不是“音频”信号的信号，例如包络发生器等。只要确保你关掉你的扬声器！

# sql - 当它应该为空时，vb中的sql select语句返回值

> ID：10000554
> 
> 赞同：0
> 
> 时间：2012-04-03T20:06:20.827
> 
> 标签：sql, vb.net, ms-access

我的代码似乎表现得我不明白。有时它会按预期返回 null ，有时它会在它应该为 null 时返回一个值。有人怎么解释这个？这是从访问中选择并在消息框中显示结果的代码：

```
cmd5.Connection = cnn

cmd5.CommandText = "SELECT receipt_num " & _
         "FROM brought_coffee, farmer where crop_year= " & yr & " and " & _
         "brought_date=#" & dtt & "# and farmer_centre='" & ctr & _
         "' and farmer.farmer_num=brought_coffee.farmer_num"

myData5 = cmd5.ExecuteReader

While myData5.Read()
   chkdb = myData5(0).ToString
End While

MsgBox("the check" & chkdb)
myData5.Close() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-03T20:34:07.283

这个问题已经在评论中回答了，但我会在这里重复它以匹配我们的问答格式：

> 如果找到一行，它看起来返回一个空值，并且receipt_num 为空值。如果它没有找到一行，myData5.Read() 将为 false 并且 chkdb 将具有先验值。

因此，要真正解决问题，您可以在每次运行查询之前重置变量，或者您可以使用[Count() 聚合函数](http://www.techonthenet.com/access/functions/numeric/count.php)来显示返回的行数，并查找零而不是 null。

我还想解决您代码中一个非常严重的安全问题。您不应该使用字符串连接将查询值替换为您的 sql 字符串。你想要更像这样的东西：

```
Using cnn As New OleDbConnection("connection string here"), _
      cmd5 As New OleDbCommand("", cnn)

    cmd5.CommandText = _
         "SELECT receipt_num " & _
         "FROM brought_coffee, farmer " & _
         "WHERE crop_year= ? " & _
             "and brought_date= ? and farmer_centre= ? " & _
             "and farmer.farmer_num=brought_coffee.farmer_num"

    cmd5.Parameters.Add("crop_year", OleDbType.Integer).Value = yr
    cmd5.Parameters.Add("brougt_date", OleDbType.Date).Value = dtt
    cmd5.Parameters.Add("farmer_centre", OleDbType.VarChar).Value = ctr

    cnn.Open()        
    chkdb = Cstr(cmd5.ExecuteScalar())
End Using

MsgBox("the check" & chkdb) 
```

# sql - 一个存储过程中的多个存储过程并等待

> ID：10000561
> 
> 赞同：0
> 
> 时间：2012-04-03T20:07:10.700
> 
> 标签：sql, stored-procedures

我看过几篇与此类似的帖子，但没有一个给出严格的答案。抱歉，如果这是一个愚蠢的问题，我已经自学了 SQL，并且仍在学习。

我有一个用户从 Excel 文档启动的存储过程。该存储过程运行其他几个存储过程。这些内部存储过程需要依次运行。我的问题是，存储过程 2 会在开始之前等待存储过程 1 完成吗？

我需要确保第二个在第一个完成之前不会启动。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-03T20:27:34.293

正如 Ben 指出的那样，指定您正在使用的数据库会很有帮助，因为每个数据库对 SQL 的过程扩展（Oracle 中的 PL/SQL，SQL Server 中的 T-SQL 等）都是不同的。话虽这么说，但是，我不知道有任何数据库会做任何事情，除了存储过程 1 运行完成，然后运行存储过程 2。任何过程语言都是如此，无论过程的第 N 行是什么在该过程的第 N+1 行上的任何内容可以运行之前运行完成。

# asp.net-mvc-3 - 如何告诉 MVC 3 中的无障碍验证使用不同的模型？

> ID：10000562
> 
> 赞同：2
> 
> 时间：2012-04-03T20:07:12.043
> 
> 标签：asp.net-mvc-3, unobtrusive-javascript

我正在将一个应用程序从 MVC 1 升级到 MVC 3。我以前使用的是 xVal，我正在尝试使用新的 Unobstructive 验证。在我现有的代码中，我经常有以下内容。

```
<%=Html.ClientSideValidation<Applicant>() %> 
```

然而，我传递给页面的模型是一个包含附加信息的 ViewModel。通过新的验证，它想查看我传递给页面的模型以查找验证器。当我使用 HTML Helpers 包含前缀时，我可以更改我的引用。如果我这样做，它会进行验证。但是，我想告诉页面使用我的实体模型和我的视图模型，这样我就不必更改所有现有的控制器来查找这个前缀。

这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T16:27:04.687

您可以使用不同的模型来呈现您的字段并对其进行验证。当传递给视图的模型与您要发布的操作方法使用的模型不同时，这很有用。要发布到的操作方法和“客户端验证”都应该引用相同的模型，以确保客户端和服务器端验证都有效。我是 Mvc Controls Toolkit 项目的协调员。在那里，有一些工具可以动态创建 html 对象，您可以使用这些工具来呈现不一定是页面 ViewModel 的任意模型的字段。特别是您可能会使用[crossHelper 扩展方法](http://mvccontrolstoolkit.codeplex.com/wikipage?title=In-Line%20Transformations)。但是，我不是 100% 确定这正是您所要求的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T00:21:57.327

考虑到您不想执行大量编辑，您可以编写一个自定义 HTML Helper 来包含您为您谈论的前缀。

如果您向我提供更多信息，我可以帮助您编写帮助程序。但是您将不得不更改实际的助手调用。

# java - 检查是否在 GWT 中回答了 ValueListBoxes

> ID：10000564
> 
> 赞同：0
> 
> 时间：2012-04-03T20:07:19.450
> 
> 标签：java, gwt, listbox

我正在创建一个供用户填写的调查，其中一个要求是实现一个进度条，在用户回答问题时填满。

我无法完全理解的错误是列表框。如果我选择一个值，计数器就会上升，但如果我选择*另一个*值，计数器会再次增加，此时它应该保持相同的值。

下面的基本示例：

*   选择值

    *   真的
    *   错误的

完成百分比：0%（默认下拉列表，“选择值”作为默认值）

*   真的

    *   选择值
    *   错误的

完成百分比：2%

*   错误的
    *   选择值
    *   真的

完成百分比：4%（应该是 2%，因为问题已经回答）

这是更改处理程序的代码：

```
 final ValueChangeHandler<Boolean> booleanChangeHandler = new ValueChangeHandler<Boolean>()
        {
            @Override
            public void onValueChange(final ValueChangeEvent<Boolean> event)
            {
               Boolean value = event.getValue();
               changeAnsweredQuestionTotal(String.valueOf(value));  
            }                
        }; 
```

这会改变进度条。我还用它来检查文本框是否已填写。

```
public void changeAnsweredQuestionTotal(String value)
{
    //Window.alert(value);
    boolean isEmpty = (value == null) || value.equalsIgnoreCase("Null") ? true : value.isEmpty();
    Integer answered;
    Integer totalQuestions;

    String text = this.getQuestionsAnswered().getText().substring(0, 2);
    text= text.replaceAll("\\s+", "");  

    answered = text.isEmpty() ? 0 : Integer.valueOf(text);
    answered = (answered < 0) ? 0 : answered;
    totalQuestions = this.getTotalQuestions().getValue().isEmpty() ? 0 : Integer.valueOf(this.getTotalQuestions().getValue());

    String result;

    if (isEmpty)
    {
        answered = answered - 1;
        answered = (answered < 0) ? 0 : answered;
        result = answered + " questions answered. ";
    }
    else
    {
        if (!value.equalsIgnoreCase("null"))
        {      
            answered = answered > totalQuestions ? totalQuestions : answered + 1;
        }
        result = answered + " questions answered. "; 
    }

    Integer percent = (answered*100)/totalQuestions;
    percent = (percent > 100) ? 100 : percent;
} 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-03T21:38:36.377

首先，我认为您的方法“changeAnsweredQuestionTotal”过于复杂，如果您决定将来使用它，则需要对其进行重构。

在下文中，我将描述我将如何解决它。我相信还有其他方法。

这个想法是为答案设置一个计数器（在这种情况下为 a `Map<String,Integer>`）。关键是控件名称（例如 question1 或 question2 ...），值可以是 0 或 1，具体取决于是否回答。

您应该`ValueChangeHandler`为每个列表小部件自定义。该处理程序将知道“源”（将用作计数器中的键）并且将知道根据值更新计数器。

最后，您再创建一个处理程序、一个实例，并分配给所有列表小部件以更新进度条。

这是自定义处理程序的代码：

```
public class QuestionChangeHandler<T> implements ValueChangeHandler<T>{

  private String source;

  private Map<String, Integer> counter;

  public QuestionChangeHandler(String source, Map<String, Integer> counter) {
    super();
    this.source = source;
    this.counter = counter;
  }

  @Override
  public void onValueChange(ValueChangeEvent<T> event) {
    T value = event.getValue();
    if (value == null) {
      counter.put(source, Integer.valueOf(0));
    } else {
      counter.put(source, Integer.valueOf(1));
    }
  }

  /**
   * @return the source
   */
  public String getSource() {
    return source;
  }

} 
```

这是带有两个列表的小型工作应用程序：

```
public class AnswersApp implements EntryPoint {

  private VerticalPanel mainPanel = new VerticalPanel();
  private Label answersLabel = new Label("Answers");
  private Label answerNumber = new Label("0");

  private ValueListBox<Boolean> question1 = new ValueListBox<Boolean>(new BooleanRenderer(), new BooleanKeyProvider());
  private ValueListBox<Boolean> question2 = new ValueListBox<Boolean>(new BooleanRenderer(), new BooleanKeyProvider());

  private ValueChangeHandler<Boolean> updateHandler;

  private HashMap<String, Integer> counter = new HashMap<String, Integer>();

  public void onModuleLoad() {
    initUpdateHandler();
    List<Boolean> values = new ArrayList<Boolean>();
    values.add(Boolean.TRUE);
    values.add(Boolean.FALSE);
    question1.setAcceptableValues(values);
    question2.setAcceptableValues(values);
    question1.addValueChangeHandler(new QuestionChangeHandler<Boolean>("q1", counter));
    question2.addValueChangeHandler(new QuestionChangeHandler<Boolean>("q2", counter));

    question1.addValueChangeHandler(updateHandler);
    question2.addValueChangeHandler(updateHandler);

    mainPanel.add(question1);
    mainPanel.add(question2);
    mainPanel.add(answersLabel);
    mainPanel.add(answerNumber);

    RootPanel.get().add(mainPanel);
  }

  private void initUpdateHandler() {
    updateHandler = new ValueChangeHandler<Boolean>() {

      @Override
      public void onValueChange(ValueChangeEvent<Boolean> event) {
        recalculateAnswers();

      }
    };

  }

  private void recalculateAnswers() {
    Set<String> keys = counter.keySet();
    int answers = 0;
    for (String key : keys) {
      Integer value = counter.get(key);
      if (value != null && value.intValue() == 1) {
        answers++;
      }
    }
    answerNumber.setText(Integer.toString(answers));
  }
} 
```

这里的结果是答案的数量，我相信你可以从那里继续。

# java - 接口：使用的利润

> ID：10000578
> 
> 赞同：0
> 
> 时间：2012-04-03T20:08:07.630
> 
> 标签：java, php, interface

首先，我的无所不在的语言是PHP，我正在考虑学习Java。

所以让我把我的问题分成两个密切相关的部分。

这是第一部分。

假设我有一个域模型类。它有一些 getter、setter、一些查询方法等。有一天我想有可能比较它们。所以它看起来像：

```
class MyEntity extends AbstractEntity
{
    public function getId()
    {
        // get id property
    }

    public function setId($id)
    {
        // set id property
    }

    // plenty of other methods that set or retrieve data

    public function compareTo(MyEntity $anotherEntity)
    {
        // some compare logic
    }
} 
```

如果是 Java，我应该实现一个`Comparable`接口。但为什么？多态性？可读性？或者是其他东西？如果是 PHP——我应该`Comparable`为自己创建接口吗？

所以这里是第二部分。

我的同事告诉我，Java 的经验法则是为类的每个行为方面创建接口。例如，如果我想将此对象表示为一个字符串，我应该用类似的东西来说明这种行为`implements Stringable`，如果是 PHP ，则`Stringable`如下所示：

```
interface Stringable
{
    public function __toString();
} 
```

这真的是经验法则吗？这种方法有什么好处？在 PHP 中值得吗？在Java中？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-03T20:11:00.977

> 如果是 Java，我应该实现一个 Comparable 接口。但为什么？

好吧，您已经提供了一种将“this”与另一个实例进行比较的方法......如果您实现`Comparable`了，您就是在告诉系统的其余部分您支持该功能，以便比较可以用于排序、查找“最大”或“最小”值等......都在对您的类型一无所知的例程中。

> 我的同事告诉我，Java 的经验法则是为类的每个行为方面创建接口。

这对我来说听起来有些过分。（您的示例不是一个好示例，因为已经存在`toString()`。`Object`）不要无缘无故地随机创建接口 - 但如果您希望该行为由不需要了解您的具体类型的代码使用，请创建它们，仅关于它支持什么。可测试性就是一个很好的例子——如果你编写了一个“身份验证器”类，那么你可以想象在你的生产代码*中*交换不同的身份验证器，*或者*在测试其他使用身份验证的组件时模拟/伪造身份验证器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-03T20:31:57.570

实施的一个非常实际的原因`Comparable`是能够执行以下操作

```
List<MyEntity> entities = // ( initialize and populate )

Collections.sort(entities); 
```

无需编写一行排序代码。

这说明了使用接口的基本理念，即允许其他人使用您的代码，并且（对您个人更有用）允许您的代码以可靠的方式使用其他人的代码。

至于“类的**每个**行为方面的接口”，这听起来像是矫枉过正，或者可能是矫枉过正。您希望接口有意义，因此，例如，`TelephoneThatIsAlsoAToaster`接口不好——您应该有两个接口：`Telephone`和`Toaster`. 另一方面，您不应该拥有大量的接口、、、`Pluggable`...`Visible`等`HasButtons`。`Flammable`必要的详细程度将取决于应用程序。

# mod-rewrite - （取消）在 mod_rewrite 中设置 cookie

> ID：10000587
> 
> 赞同：3
> 
> 时间：2012-04-03T20:08:37.067
> 
> 标签：mod-rewrite, cookies

我想使用 mod_rewrite 删除一个 cookie，但不幸的是，后续请求（Chrome、FF、Safari）保留了旧的 cookie 值。

Doku ( [http://httpd.apache.org/docs/2.4/rewrite/flags.html#flag_co](http://httpd.apache.org/docs/2.4/rewrite/flags.html#flag_co) ) 说：

```
[CO=NAME:VALUE:DOMAIN:lifetime:path:secure:httponly] 
```

所以我的 RewriteRule 是

```
RewriteRule .* target/ [R=301,CO=NAME:INVALID:.dev.local:-1] 
```

有胶水有什么问题吗？

干杯。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-03T20:54:08.493

这终于对我有用：

```
RewriteRule .* target/ [R=301,CO=NAME:INVALID:;:-1] 
```

希望它可以帮助某人。

# c# - 检测贝塞尔曲线平行线中的“扭结”

> ID：10000590
> 
> 赞同：10
> 
> 时间：2012-04-03T20:08:41.777
> 
> 标签：c#, math, bezier

我希望有人可以帮助我找出一种计算成本低廉的方法来检测与贝塞尔曲线平行绘制的直线中的扭结，如您在此处看到的

![与贝塞尔曲线平行的线扭结](../Images/88f1b1dad93c21552f0108db6bf50462.png)

我想要做的是能够确定扭结的交叉点，在交叉点之前具有起点的段以及在扭结之后具有终点的第一段。这样我可以简单地删除任何不必要的段并调整第一个和最后一个段以在交叉点相遇。

抱歉，如果我使用了不正确的术语。但据我了解，我定位这些线段的方式是确定贝塞尔曲线（黄色）的线段的单位向量并将其乘以偏移量并找到法线向量以创建两个新的起点和终点对于偏移段（白色）。

数学不是我的强项，所以我希望有人能推动我朝着正确的方向前进。

编辑：图像实际上已由 HTML 调整大小，所以如果你很难看到我在说什么，这里是直接链接：http: [//i.stack.imgur.com/xtils.png](https://i.stack.imgur.com/xtils.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-03T22:28:56.327

作为第一个近似值，计算[Bezier 曲线](http://en.wikipedia.org/wiki/B%C3%A9zier_curve)的[曲率半径](http://en.wikipedia.org/wiki/Radius_of_curvature_%28mathematics%29)。如果偏移大于或等于曲率半径，您应该寻找扭结。

具体来说，对于具有控制点的三次贝塞尔曲线`P0, P1, P2, P3`：

```
B(t) = P0 * (1-t)^3 + P1 * 3*t*(1-t)^2 + P2 * 3*t^2*(1-t) + P3 * t^3
-> B'(t)  = (P1-P0) * 3*(1-t)^2 + (P2-P1) * 6*t*(1-t) + (P3-P2) * 3*t^2 
-> B''(t) = (P2+P0-2*P1) * 6*(1-t) + (P3+P1-2*P2) * 6*t

let:  cross2d(p, q) = p.x*q.y - p.y*q.x
then, radius of curvature = |B'(t)|^3 / cross2d(B'(t), B''(t)) 
```

我以带符号的形式留下了曲率半径；该标志应指示您可以预期扭结的曲线一侧。

注意：您可以有零曲率半径，或无限曲率半径；与之相比可能会`|B'(t)|^3`更好`signed_offset * cross2d(B'(t), B''(t))`。

# php - 如何加载 yml 文件而不是 xliff 来翻译 Symfony 应用程序

> ID：10000591
> 
> 赞同：3
> 
> 时间：2012-04-03T20:08:46.500
> 
> 标签：php, symfony, translation

我正在尝试使用 Symfony2 制作多语言应用程序，并且我目前正在尝试使用 yml 文件而不是 xliff 进行翻译（我猜这是默认的）。

基于 Symfony 的文档 php，yml 和 xliff 文件被接受。

我找不到的是我必须将翻译文件设置为 yml 的位置。

当我删除`messages.fr.xliff`并创建`messages.fr.yml`一个异常时：

```
[WARNING 1549] failed to load external entity "/home/ggirtsou/www/app.dev/src/ggirtsou/MyBundle/Resources/translations/messages.fr.xliff" (in n/a - line 0, column 0) 
```

我曾经`$this->get('session')->setLocale('fr');`将语言环境设置为法语。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-03T20:40:20.603

每当您添加或移动翻译文件时，您都需要清除缓存。仅编辑它们时无需这样做。

# sql - 奇怪的 DB2 作用域

> ID：10000592
> 
> 赞同：0
> 
> 时间：2012-04-03T20:08:58.037
> 
> 标签：sql, select, scope, db2

创建两个表，其中一些 id 重叠。

```
create table outer_table (
    id integer,
    overlap_in smallint default 0
);
create table inner_table (
    inner_id integer
); 
```

接下来，用 id 填充它们，一些常见的。

```
insert into outer_table(id) values 0, 1, 2, 3, 4, 5, 6, 7, 8, 9;
insert into inner_table(inner_id) values 0, 1, 2; 
```

接下来，更新重叠指示器。但是，错误地，您输入了错误的列名，您只写了“id”而不是“inner_id”，并且您决定不使用别名。

```
update outer_table o
set o.overlap_in = 1
where o.id in (select id from inner_table); 
```

结果：

1.  没有 SQL 错误
2.  它在 outer_table 的所有行中将overlap_in 字段更新为 1

这还算正常吗？任何解释为什么 db2 允许这样做？

注意：DB2 版本：

```
>db2level
DB21085I  Instance "....." uses "64" bits and DB2 code release "SQL09075"
with level identifier "08060107".
Informational tokens are "DB2 v9.7.0.5", "...", "IP23285", and Fix Pack
"5". 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-03T20:25:27.490

这是正常的预期行为。与大多数编程语言一样，标识符在 SQL 中以这种方式解析。如果最内层范围内不存在标识符，则名称解析向外工作。如果在最内层范围内没有名为“id”的列，则在该范围之外解析列名。在这里，“id”被解析为 o.id。您应该始终使用表前缀！

假设你写了

```
where exists (
  select * from inner_table
  where inner_table.inner_id = id
) 
```

您当然希望将标识符“id”解析为 o.id，就像在您的示例中一样。如果在子查询中不能引用查询中其他表的列，那将是愚蠢的。

也就是说，如果某些 SQL 实现可以对这样的标记查询进行完整性检查，那也很好，因为如果子查询中只提到一个带有 FROM 子句的列，它通常应该是子查询中表中的一列. 如果不是，这通常是一个错字（但仍然是一个合法的查询）。

# c# - Zebra 中的 C# 打印标签 - 服务器端/客户端

> ID：10000593
> 
> 赞同：0
> 
> 时间：2012-04-03T20:08:59.883
> 
> 标签：c#, asp.net, windows-server-2008, intranet, zebra-printers

我有一个使用 EPL 语言使用 Zebra tlp 2844 打印标签的 Intranet 应用程序。我使用[SharpZebra](http://sharpzebra.codeplex.com/)来执行此代码。当我使用连接在我机器的 lpt1 中的打印机调试我的代码时，一切正常......但我需要在服务器（Windows server 2008）中发布我的代码并使用另一台连接了另一台打印机的机器打印。我该怎么做？我尝试共享打印机并添加到服务器，但不起作用...当我尝试打印时，似乎找不到打印机...我需要做更多的事情吗？

我google了一下，没有找到好的答案...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T03:27:32.303

我通常将 EPL 或 ZPL 保存到文件中，然后对打印机的 UNC 路径执行“复制文件”。如果 SharpZebra 允许您将其保存为文件，您可能会尝试这样做。只需将原始文件复制到打印机就可以很好地工作。（我没有使用 SharpZebra）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T14:42:24.860

如果您可以将收据设计保存为原始 ZPL 文本，您应该能够打开文件并通过 telnet 连接将其发送到打印机。这将使您可以打印到任何联网的斑马打印机，而无需在服务器上安装驱动程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T18:44:27.180

我买了一台打印服务器，这解决了我的问题。我在打印服务器中连接了打印机，系统的服务器识别了这台打印机。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-11T18:44:12.320

与套接字之间的通信。您将条形码字符串发送到套接字中的客户端。在客户端，创建一个套接字。这在un端口中监听，并​​接收数据，并将其放入串行端口。

# iphone - 哪种结构更适合这种情况，if-else 还是 switch？

> ID：10000596
> 
> 赞同：1
> 
> 时间：2012-04-03T20:09:03.787
> 
> 标签：iphone, objective-c, xcode, if-statement, switch-statement

哪种结构更适合这种情况，if-else 还是 switch？

```
- (id)hexEvaluator:(double)remainder
{
    if(remainder == 0) {return [NSNumber numberWithInt:0];}
    else if(remainder == 1) {return [NSNumber numberWithInt:1];}
    else if(remainder == 2) {return [NSNumber numberWithInt:2];}
    else if(remainder == 3) {return [NSNumber numberWithInt:3];}
    else if(remainder == 4) {return [NSNumber numberWithInt:4];}
    else if(remainder == 5) {return [NSNumber numberWithInt:5];}
    else if(remainder == 6) {return [NSNumber numberWithInt:6];}
    else if(remainder == 7) {return [NSNumber numberWithInt:7];}
    else if(remainder == 8) {return [NSNumber numberWithInt:8];}
    else if(remainder == 9) {return [NSNumber numberWithInt:9];}
    else if(remainder == 10) {return @"A";}
    else if(remainder == 11) {return @"B";}
    else if(remainder == 12) {return @"C";}
    else if(remainder == 13) {return @"D";}
    else if(remainder == 14) {return @"E";}
    else if(remainder == 15) {return @"F";}
    else return nil;

    switch ((int)remainder) 
    {
        case 0:  return [NSNumber numberWithInt:0]; break;
        case 1:  return [NSNumber numberWithInt:1]; break;
        case 2:  return [NSNumber numberWithInt:2]; break;
        case 3:  return [NSNumber numberWithInt:3]; break;
        case 4:  return [NSNumber numberWithInt:4]; break;
        case 5:  return [NSNumber numberWithInt:5]; break;
        case 6:  return [NSNumber numberWithInt:6]; break;
        case 7:  return [NSNumber numberWithInt:7]; break;
        case 8:  return [NSNumber numberWithInt:8]; break;
        case 9:  return [NSNumber numberWithInt:9]; break;
        case 10: return @"A";; break;
        case 11: return @"B";; break;
        case 12: return @"C";; break;
        case 13: return @"D";; break;
        case 14: return @"E";; break;
        case 15: return @"F";; break;

        default: return nil; break;
    }
} 
```

另外，附带说明：为什么不允许开关表达式（在我的情况下为余数）为“双”类型？我必须将其转换为“int”才能编译。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-03T20:20:10.910

绝对是一个 if 语句。我会去掉所有额外的行：

```
- (id)hexEvaluator:(double)remainder
{
    if (remainder < 10)
    {
        return [NSNumber numberWithInt:(int)remainder];
    }
    else if (remainder < 16)
    {
        return [NSString stringWithFormat:@"%X", (int)remainder)];
    }
    return nil;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-03T20:17:56.713

**简而言之：** if*语句更适合*这种情况，因为它提供了更复杂的条件。

* * *

## 示例代码

在您的情况下，示例代码可以替换您的方法的功能：

```
if (remainder < 10 ) {
    return [NSNumber numberWithInt:(int)reminder]; 
} else if (remainder < 16) {
    // Will return: "A", "B", "C", "D", "E" or "F"
    return [NSString stringWithFormat:@"%X", (int)remainder];
} else {
    return nil;
} 
```

还有其他方法可以将基数为 10 的 int 转换为十六进制值，通过使用`%x`（对于小写字母）或`%X`（对于大写字母），您可以获得字符串形式的十六进制值。简单的

* * *

## 其他解决方案

根据您使用计算结果的方式，您可以重构并制作更好的代码。

如果您仅使用结果（数字或字符串）向用户显示，那么您的 NSNumbers 也可能会替换为 NSStrings 并且可以删除第一个 if 语句：

```
if (remainder < 16) {
    // Will return: "1", "2", "3", "4", ...,  "A", "B", "C", "D", "E" or "F"
    return [NSString stringWithFormat:@"%X", (int)remainder]; 
} else {
    return nil;
} 
```

另一方面，如果您将结果用于某些计算，那么您可能应该考虑使用更容易比较的数据类型（您如何比较`[NSNumber numberWithInt:9]`？`@"A"`）

也许在这样的代码中直接使用十六进制值：

```
int hex = 0xC;
NSLog(@"hex = %X", hex); // Output: hex = C
NSLog(@"int = %d", hex); // Output: hex = 12 
```

这使得比较更容易：

```
NSLog(@"%@ than 9", (hex > 0x9 ? @"bigger" : @"smaller")); // bigger than 9
NSLog(@"%@ than F", (hex > 0xF ? @"bigger" : @"smaller")); // smaller than F 
```

根据您重构代码的方式，您可能应该将其重命名以更清楚地表达您的意图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-03T20:12:35.143

它不能是双重的，因为您的案例标有 int 并且它的类型不匹配。

尽管 switch 看起来更好，但我相信删除 { } 的 if 语句更好。这样一来，每行只有一个语句，并且所有良好实践都得以保留。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-03T20:23:23.897

这可能会有所帮助

```
- (id)hexEvaluator:(double)remainder
{
    return remainder <= 9 ? [NSNumber numberWithInt:(int)remainder] : [NSString stringWithFormat:@"%X", (int)remainder)]; 
} 
```

# c# - 如果Both Checkboxes flag false 怎么办？

> ID：10000597
> 
> 赞同：1
> 
> 时间：2012-04-03T20:09:05.853
> 
> 标签：c#, visual-studio-2008, checkbox, messagebox

我对谷歌查询的代码感到沮丧，所以我只会问你们所有的专家。

我有一个 <500 行的程序，它在树中列出了 clearcase 中的文件，现在我想单击它们并将它们签入/签出。我可以通过命令行或插件完成的结帐部分（::whew:: clearcase 不容易编程）无论如何我必须勾选一个用于签入一个用于结帐，如果两者都没有被选中（都是错误的）我希望它通知用户。我有以下代码，它可以工作......除了它总是显示“未选择”消息，因为一个标志总是错误的。

```
if (checkBox1.checked == true
{
   MessageBox.Show("this")
}
if (checkBox2.checked == true 
{
   MessageBox.Show("THAT")
}
if (checkbox1.checked == false | checkbox2.checked == false)
{
   MessageBox.show("You didn't select this or THAT")
} 
```

在第一个选择之后它总是说“那个”或“这个”然后“你没有选择这个或那个”

我还设置了复选框，这样当您选中一个时，它会取消选中另一个，但两者都可能是错误的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-03T20:11:47.653

您想检查它们是否都是错误的，这是通过逻辑 AND 完成的。竖线表示 OR 条件。

```
if (checkbox1.checked == false && checkbox2.checked == false)
{
    MessageBox.show("You didn't select this or THAT")
} 
```

那应该做你正在寻找的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-03T20:15:32.923

关于什么

```
(checkbox1.checked == false & checkbox2.checked == false) 
```

垂直线是 OR 而 & 符号是 AND

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-03T20:11:44.700

尝试

```
if (checkBox1.checked == true)
{ 
    MessageBox.Show("this") 
} 
else if (checkBox2.checked == true)
{ 
    MessageBox.Show("THAT") 
} 
else 
{ 
    MessageBox.show("You didn't select this or THAT") 
} 
```

或更好：

```
if (checkBox1.checked)
{ 
    MessageBox.Show("this") 
} 
else if (checkBox2.checked)
{ 
    MessageBox.Show("THAT") 
} 
else 
{ 
    MessageBox.show("You didn't select this or THAT") 
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-03T20:12:08.107

使用 if-else 语句而不仅仅是 if 语句。这样它将在执行第一条语句后停止。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-03T20:12:27.470

```
if (checkBox1.checked)
{
   MessageBox.Show("this")
}
else if (checkBox2.checked)
{
   MessageBox.Show("THAT")
}
else
{
   MessageBox.show("You didn't select this or THAT")
} 
```

# ios - 运行 iPhone 应用程序时在 Zapp 上构建错误（使用 KIF 测试套件）

> ID：10000600
> 
> 赞同：0
> 
> 时间：2012-04-03T20:09:10.387
> 
> 标签：ios, continuous-integration, integration-testing, kif-framework

我正在开发一个用于测试 KIF 框架和 Zapp 的示例项目。该项目（具有目录方案和集成测试方案）在 XCode 上构建良好并在模拟器上运行。

该项目的 GitHub 网址在这里：[https ://github.com/dolphyfernandes/DirectoryApp](https://github.com/dolphyfernandes/DirectoryApp)

我正在尝试运行 Zapp 以进行持续集成 (CI)。通过 Zapp 和 Directory 方案运行的项目运行良好。但是当我将方案下拉菜单更新为集成测试时，构建失败。

以下是 Zapp 上的错误日志

```
ld: library not found for -lKIF
Command /Developer/Platforms/iPhoneSimulator.platoform/Developer/usr/bin/clang failed with exit code 1
** BUILD FAILED **
The following build commands failed:
LD "build/Applications/Directory (Integration Tests).app/Directory (Integration Tests)" normal i386
(1 failure) 
```

![在此处输入图像描述](../Images/41bbfdf03cdec4ba23abd1f3dd844d19.png)

谁能帮我解决这个问题？似乎一切都应该正常工作。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T18:31:42.897

我找到了问题的解决方案。

我在谷歌群组上发布了同样的问题，并在那里得到了一些帮助。KIF 设置的文档不能直接与 Zapp 一起使用。 [https://groups.google.com/d/msg/kif-framework/biRg1-W1O70/vGYWlyAilsEJ](https://groups.google.com/d/msg/kif-framework/biRg1-W1O70/vGYWlyAilsEJ)

Zapp 使用 KIF 的解决方案是 Zapp 项目需要将 libKIF.a 作为应用程序测试目标的目标依赖项。

您可以执行以下操作：

**第 1 步：**将 KIF 项目拖到您的主项目下，如图所示嵌套。 ![在此处输入图像描述](../Images/b1bb22445721529bc79e858fac14a677.png) - - - - - -> ![在此处输入图像描述](../Images/b61cac5eec45ddb69f678de8538c2635.png)

**第 2 步：**单击 XCode 左上角的编辑方案，并将 KIF 目标添加到测试方案的构建中，如图所示。 ![在此处输入图像描述](../Images/119d126a9dd8b10ba29d069f79032f2b.png)

**第 3 步：**通过选择 test target > Build Phases 并单击 Add 按钮添加 KIF，将 KIF 添加到 Target Dependencies。

这应该适用于 Zapp，现在它可以正常工作而没有任何构建错误。

如有任何问题，请随时添加到线程中！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T17:42:02.657

@leonardoborges .. 我在等你 :)

我准备了这个 pdf 以防万一有人需要它。PDF 有详细的分步说明，希望不会遗漏任何内容。

看看它，让我知道您是否需要更多信息。

[http://www.files.com/set/50e715498087f](http://www.files.com/set/50e715498087f)

谢谢！

# magento - Magento - 模块约定 mysql4 或资源

> ID：10000603
> 
> 赞同：7
> 
> 时间：2012-04-03T20:09:27.450
> 
> 标签：magento

在资源方面，核心 Magento 中似乎有两种风格的文件夹结构。有很多使用 mysql4 文件夹和其他简单使用 Resource 文件夹。

即安装脚本将住在这里：Mycompany_Mymodule_Model_Resource_Setup。

这是否有原因，遗留或其他原因 - 或者这只是不同核心开发人员之间的编码风格？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-03T21:11:59.360

首先：Magento 的文件夹结构之所以存在，**只是**因为它的自动加载器的实现。如果您试图从 Magento 中放置文件的位置获取太多含义，您会发疯的，并且不同的模块似乎遵循不同的约定。自动装载机将寻找

```
Mage_Core_Model_Foo_Bar 
```

在

```
Mage/Core/Model/Foo/Bar.php 
```

所以我将在下面讨论命名约定，这将间接解决文件位于特定文件夹中的原因。

最初所有的数据库资源都是按照`Mysql4`约定命名的。我已经与一些原始开发人员进行了交谈，其目的是表明该资源用于当时的“标准”Mysql 4 数据库。如果一个资源使用了一个特定的特性，比如 Mysql 5，那么他们就会使用一个`Mysql5`约定。

随着 Magento Inc. 经历了通常的启动流失，其他开发人员接手了原始开发人员离开的地方，对此的想法发生了变化。Magento 1.6 版本为企业版支持多个 RDBMS 奠定了基础，改变了这些资源的工作方式和命名方式。

[保持了向后兼容性](http://www.magentocommerce.com/answers/discussion/518/What-do-I-Need-to-do-with-my-Model-Resources-for-the-Magento-1.6-Release/p1)，但大多数旧`Mysql4`资源被重命名为使用 generic `Resource`，并引入了一种支持多 RDBMS的[新方法。](http://www.magentocommerce.com/blog/creating-adapters-for-rbdms/)

# java - 为现有项目设计 DAO 模型

> ID：10000605
> 
> 赞同：3
> 
> 时间：2012-04-03T20:09:32.147
> 
> 标签：java, dao

我见过的大多数 DAO 示例都包含仅涉及一张表的简单查询。

我正在重构一个没有 DAO 的项目，该项目有很多使用多个表的 SQL 查询。我的问题是**如何最好地为 DAO 设计模型？**在下面的示例中，我可以创建一个涵盖每个特定查询的对象。但是，我不确定这是否是好的做法。例如，让一个对象代表每个数据库表会更好吗？

CustomerPaymentDAO 覆盖此查询：

```
select
    a.username,
    p.creation_date,
    p.amount,
    c.card_type
from
    account      a,
    payment      p,
    payment_type t,
    payment_card c
where
... 
```

CustomerPurchaseDAO 覆盖此查询：

```
select
    a.username,
    i.name,
    i.cost,
    c.name,
    v.value
from
    account      a,
    item         i,
    category     c,
    voucher      v
where
... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-03T20:26:50.033

Generally speaking, there are two options:

1.  Create an entity corresponding to each table and specify necessary relationships (many-to-many, many-to-one, one-to-one).

2.  In the database create a view for each query, and create entities on per view basis (in your example - two views + two entities).

The second case is fine for read-only objects. If you need to create/update/delete entities then you need to create an entity corresponding to each single table.

# c++ - C++ 链表遍历

> ID：10000608
> 
> 赞同：1
> 
> 时间：2012-04-03T20:09:37.030
> 
> 标签：c++, linked-list

我们的讲师展示了几个处理链表的函数示例（显示所有项目、删除位置、插入为头部、插入为尾部......）

现在，在这些示例中，我注意到他使用了不同的遍历方法。在某些情况下，他会使用

```
while(head !=0)
{
    head=head->link;
} 
```

在其他情况下，他使用从一个节点移动到另一个节点。

```
while(head->link !=0)
{
    head=head->link;
} 
```

这让我很困惑。是否有理由在某些操作中使用一个而不是另一个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-03T20:10:44.830

`head`如果最初是，则第二个变体将导致段错误`NULL`。

除此之外，第一个变体将迭代`N`次数（其中`N`是列表中的项目数）。第二个变体只会迭代`N-1`次数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-03T20:14:12.787

第一个变体将在遍历后使“head”指向“null”值。第二个变体假设 head 必须指向一个好的（非 NULL） head 值以开始，并且会让 head 指向一个具有 null 的元素`link`。因此，第二个变体对于查找列表的最后一个元素很有用，而第一个变体对于计算列表中的项目数很有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-03T20:15:37.573

第二个例子实际上有两个问题。始终使用第一个。

第一个问题正如 Oli Charlesworth 所说，如果在 head 为 NULL 的情况下进入循环，它将导致空指针取消引用（分段错误）。

第二个问题是循环顶部和`head=head->link;`语句之间的任何代码都不会出现在链表的最后一个节点上。所以如果这个更新语句位于循环的末尾（这是通常的做事方式），那么最后一个节点将被完全绕过。因此，如果您的代码是这样的：

```
while(head->link !=0)
{
    dostufftoNode(head);
    head=head->link;
} 
```

然后将为除最后一个节点之外的每个节点调用 dostufftoNode() 函数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-03T20:16:59.443

```
while(head !=0)
{
    head=head->link;
} 
```

这将

1.  检查头部是否不为空
2.  设置头对头->链接
3.  去一个

这将总共迭代 n 次

```
while(head->link !=0)
{
    head=head->link;
} 
```

这将

1.  检查 head->link 是否不为空
2.  设置头对头->链接
3.  去一个

这将总共迭代 n-1 次

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-03T20:15:10.197

在第一种情况下，他涵盖了列表最初可能为空（head = nil）的情况。您通常会在循环之前进行任何内部处理

```
 head = head->link 
```

线。

在第二种情况下，大概他知道列表最初不是空的。在这种情况下，您通常会在

```
 head = head->link 
```

行，尽管如果有原因，您也可以在之前做一些。当然，这也可能不是一个有意识的决定，因为教授也是人；-)

# sql - 批量删除数据库表中的记录

> ID：10000609
> 
> 赞同：1
> 
> 时间：2012-04-03T20:09:41.853
> 
> 标签：sql, oracle

我想一次删除多条记录。

我有两张桌子，一张包含

```
comments: comment_id, comment, author_id
news_comments: news_id, comment_id 
```

我想从评论表中 author_id = 1 的 news_comments 中删除所有记录。

我试过这样做，但它给了我一个关于返回多个项目的子查询的错误：

```
delete from news_items where comment_id = 
(select comment_id from comments where author_id = 1) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-03T20:11:17.530

```
delete from news_items where comment_id IN 
(select comment_id from comments where author_id = 1)
                                        ^^
                                        IN 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-03T20:11:42.413

尝试这个

```
delete from news_items where comment_id in 
(select comment_id from comments where author_id = 1) 
```

# add-in - 从加载项的富文本框中获取选定的单词

> ID：10000610
> 
> 赞同：0
> 
> 时间：2012-04-03T20:09:50.573
> 
> 标签：add-in, infopath, selectedtext

我有一个 VSTO 加载项，它有一个菜单和按钮。在我的信息路径表单中，我有多个可由用户编辑的富文本框。在编辑时，如果用户在任何富文本框中选择一个单词或句子并单击加载项中的按钮，我需要在下拉列表中添加这些选定的文本。

如何从富文本框中获取选定的文本？所选内容可能在任何一个可用的富文本框中，因此我需要知道上下文以识别富文本框，然后仅获取所选文本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T21:13:29.263

在您的 btn_Clicked 事件中，尝试此代码。它应该从鼠标所在的位置开始抓取文本，并在当前块的末尾结束。

```
var curCaret = richTextBox1.CaretPosition;
var curBlock = richTextBox1.Document.Blocks.Where(x => x.ContentStart.CompareTo(curCaret) == -1 && x.ContentEnd.CompareTo(curCaret) == 1).FirstOrDefault(); 
```

# c# - 我的动态创建的 ListViewItems 没有显示在我的 ListView 中

> ID：10000613
> 
> 赞同：0
> 
> 时间：2012-04-03T20:10:00.713
> 
> 标签：c#, .net, listview, dynamic, listviewitem

我正在动态创建 ListViewItem 后代：

```
class Application : ListViewItem {
. . .
class LegacyApplication : Application { 
```

我首先将这些存储在对象列表中：

```
private List<object> legacyApps = new List<object>(); 
```

..这边走：

```
if (ldbc.appIsLegacy(sPathOfExe)) {
  legacyApp = new LegacyApplication(sApp, sTitle, sDesc, sIconFileName, sPathOfExe, appCategoriesForCurrentApp);
} 
legacyApps.Add(legacyApp); 
```

...然后我以这种方式将它们添加到主窗体上的 ListView 中：

```
foreach (LegacyApplication LegApp in legacyApps) {
  this.listApplications.Items.Add(LegApp);
} 
```

...但 ListView 不显示它们。它显示我创建的 ListView 组（并且每个 ListViewItem 都分配给这些组之一），但不显示 ListViewItems 本身......

更新了请求的信息：

ListViewItem 后代的构造函数如下所示：

```
public LegacyApplication(String AAppName, String ATitle, String ADesc, String AIconFileName, String APathOfExe, List<String> ACategories) {
  base.Name = String.Format("legapplvi{0}", AAppName);
  base.Text = ATitle; // "Title" is a short description - between exe name and Description 
  base.ToolTipText = ADesc;
  base.EnsureVisible();
  // "base" above means ListViewItem; "base" below refers to our Application class*
  base.Categories = ACategories;
  base.ExePath = APathOfExe;
  base.IconFileName = AIconFileName;
} 
```

*   它将以下属性添加到 ListViewItem：

public string ExePath public string IconFileName public string Category public List Categories

LegacyApplication 没有向（我们的）Application 类添加更多属性。

我不确定下面的受访者所说的“子项”是什么意思 - ListViewItems 是 ListView 组的子项，也许......？

更新了未经请求的信息（TMI？）：

好的，我想我可以通过这种方式添加列，一旦所有组都分配给 ListView：

```
for(var item in listApplications.Groups)    {
       listApplications.Columns.Add(item)    
} 
```

...但是现在，如何将特定的 ListViewItems 添加到特定的列？

让它（某种）工作后更新：

注释掉这个：

```
listApplications.View = View.Details; 
```

...获取要显示的项目。但是，文本被截断，这导致我在这里提出另一个问题：

[我需要显示我的 ListViewItems 的整个文本（未截断）](https://stackoverflow.com/questions/10002783/i-need-to-display-the-entire-text-of-my-listviewitems-not-truncated)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T08:05:35.387

您是否尝试先创建一个 ListViewItem 然后添加到 List 而不是使用 this.listApplications.Items.Add(LegApp);

您能否通过代码片段提供更多详细信息

# c - 编写一个小 C 程序以在输入的时间内关闭窗口

> ID：10000617
> 
> 赞同：3
> 
> 时间：2012-04-03T20:10:46.557
> 
> 标签：c, windows

`N`我想编写一个程序以在几秒钟内关闭窗口。`system()`我知道关闭窗口的最简单方法是调用

```
shutdown -s -t XXXX 
```

其中 XXXX 是给定时间。但是`system()`只接受字符串作为参数。如何调用`system("shutdown -s -t 7200")`用户输入的7200？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-03T20:14:01.600

我会[`InitiateSystemShutdown`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa376873.aspx)改用。您*可以*使用`ExitWindows`or `ExitWindowsEx`，但它们都不直接支持原始问题中询问的延迟，因此您必须添加代码来执行延迟（例如，使用`SetTimer`）。这当然是可能的，但会带来额外的工作而没有完成任何额外的回报。

如果您坚持使用`system`，您可以使用`sprintf`（或类似的东西）来创建您传递给的字符串`system`：

```
char buffer[256];

sprintf(buffer, "shutdown -s -t %d", seconds);
system(buffer); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-03T20:17:27.403

看看[`scanf()`](http://pubs.opengroup.org/onlinepubs/007904975/functions/scanf.html)and [`sprintf()`](http://pubs.opengroup.org/onlinepubs/7908799/xsh/sprintf.html)，例如：

```
#define MAX_LENGTH 50
/* ... */
int shutdownTime;
char shutdownCall[MAX_LENGTH];

scanf("%d", &shutdownTime);
if (shutdownTime < 0) 
    return NEGATIVE_TIME_ERROR;
sprintf(shutdownCall, "shutdown -s -t %d", shutdownTime);
system(shutdownCall); 
```

# emacs - 使用 yasnippet 显示键绑定

> ID：10000619
> 
> 赞同：4
> 
> 时间：2012-04-03T20:10:50.113
> 
> 标签：emacs, yasnippet

我正在设置一个新的 .emacs 环境。但是在我上次的设置中，yasnippet 菜单显示了键绑定。但现在没有了。这似乎很奇怪。我相信我有最新版本的 yasnippet。如果我尝试通过键绑定进行扩展，我现在已经（例如在 python 缓冲区中执行“def TAB”）确实表明键绑定有效。但它没有显示。

这是我添加到我的 .emacs 文件中的内容：

```
; Add Yasnippets
(add-to-list 'load-path
          "~/.emacs.d/plugins/yasnippet")
(require 'yasnippet)
(yas/global-mode 1) 
```

和截图： ![在此处输入图像描述](../Images/eff721685142ad8db7fde0c3046ca075.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T08:42:14.777

我不确定，我的也有这个`.emacs`

`(yas/initialize)`

# c - 如何将字符串拆分为字符串数组？

> ID：10000621
> 
> 赞同：1
> 
> 时间：2012-04-03T20:10:58.857
> 
> 标签：c, string, split

例如：

输入（字符串）：`foo $$ foo ## foo []`

搜索（字符串）：`foo`

输出（数组）：`$$ ,## ,[]`

我尝试过这个：

```
char * str = "foo $$ foo ## foo []";
    char * s = "foo";

    int buf_len = 0;
    int len = strlen(s);
    int i = 0;

    char ** buffer = malloc(MAX_BUFFER_SIZE);
    char * tmpbuf = malloc(MAX_BUFFER_SIZE);
    char * p = str;
    char ** buf = buffer;
    char * tbuf = tmpbuf;

    while(*p)
    {
        if(*p == *s) 
        {
            while(*p == *(s + i)) 
            { 
                i++;
                p++;
            }

            if(i == len) 
            {
                *buf ++ = tbuf;
                memset(tbuf,0,buf_len);
                i = buf_len = 0;
            }
        }
        else 
        {
            *tbuf ++= *p;
            buf_len ++;
        }

        p++;
    }

    *buf ++= NULL;

    int x;
    for(x = 0; buffer[x]; x++)
    {
        printf("%s\n", buffer[x]);
    }

    free(buffer);
    free(tmpbuf); 
```

显示以下输出：

```
$$ ## []
## []
[] 
```

但预期是：

```
$$  
##  
[] 
```

如何解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-03T21:09:30.250

这是一个将字符串拆分为字符串数组的函数：

```
#include <assert.h>
#include <string.h>

/*
 * Split a string by a delimiter.
 *
 * This function writes the beginning of each item to @pointers_out
 * (forming an array of C strings), and writes the actual string bytes
 * to @bytes_out.  Both buffers are assumed to be big enough for all of the
 * strings.
 *
 * Returns the number of strings written to @pointers_out.
 */
size_t explode(const char *delim, const char *str,
               char **pointers_out, char *bytes_out)
{
    size_t  delim_length        = strlen(delim);
    char   **pointers_out_start = pointers_out;

    assert(delim_length > 0);

    for (;;) {
        /* Find the next occurrence of the item delimiter. */
        const char *delim_pos = strstr(str, delim);

        /*
         * Emit the current output buffer position, since that is where the
         * next item will be written.
         */
        *pointers_out++ = bytes_out;

        if (delim_pos == NULL) {
            /*
             * No more item delimiters left.  Treat the rest of the input
             * string as the last item.
             */
            strcpy(bytes_out, str);
            return pointers_out - pointers_out_start;
        } else {
            /*
             * Item delimiter found.  The bytes leading up to it form the next
             * string.
             */
            while (str < delim_pos)
                *bytes_out++ = *str++;

            /* Don't forget the NUL terminator. */
            *bytes_out++ = '\0';

            /* Skip over the delimiter. */
            str += delim_length;
        }
    }
} 
```

用法：

```
#include <stdio.h>
/* ... */

#define BIG_ENOUGH 1000

int main(void)
{
    char    *items[BIG_ENOUGH];
    char     item_bytes[BIG_ENOUGH];
    size_t   i;
    size_t   count;

    count = explode("foo", "foo $$ foo ## foo []", items, item_bytes);

    for (i = 0; i < count; i++)
        printf("\"%s\"\n", items[i]);

    return 0;
} 
```

输出：

```
""
" $$ "
" ## "
" []" 
```

这不会产生您要求的确切输出，因为我不确定您要如何处理`"foo"`字符串开头的周围空格和项目分隔符（在您的示例中为 ）的出现。相反，我模仿了PHP 的[explode](http://php.net/manual/en/function.explode.php)函数。

* * *

我想指出我的`explode`函数是如何影响内存管理的。由调用者确保缓冲区足够大。这对于快速脚本来说很好，但在更严肃的程序中可能会很烦人，你必须做一些数学才能正确使用这个函数。我本可以编写一个更“健壮”的实现来执行自己的分配，但是：

*   这会使实施混乱。

*   它没有给调用者使用他们自己的内存分配器的选项。

所以实现`explode`我做的方式是“不好的”，因为它很难正确使用，更糟糕的是，*容易使用不正确*。另一方面，它是“好的”，因为它将功能和内存管理的关注点分开。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-03T21:58:46.200

`tbuf`这是因为`buf`当您说：

```
*buf ++ = tbuf; 
```

您所做的是保存对当前位置的引用`tbuf`（或者`tmpbuf`如果您喜欢）。

`tmpbuf`填充除分隔符以外的所有内容。

在循环结束时类似于：

```
 01234567 <- offset
tmpbuf = "$$ ## []"

buf[0] = tmpbuf+0;
buf[1] = tmpbuf+3;
buf[2] = tmpbuf+6; 
```

或者*非常*简化的内存表：

```
 memory
       address        value   
tmpbuf -> 0x01       [   $] <- buffer[0] points here
          0x02       [   $]
          0x03       [    ]
          0x04       [   #] <- buffer[1] points here
          0x05       [   #]
          0x06       [    ]
          0x07       [   [] <- buffer[2] points here
          0x08       [   ]]
          0x09       [    ]
          ...
buffer -> 0x3A       [0x01]
          0x3B       [0x04]
          0x3C       [0x07]
          0x3D       [    ]
          0x3E       [    ]
          ... 
```

***编辑***

为了它的奔腾；指针，动态，方式，不使用`strstr()`.

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

int is_needle(char *hay, char *needle)
{
    while (*hay && *++hay == *++needle);
    return *needle == '\0';
}

char *find(char *hay, char *needle)
{
    while (*hay) {
        if (*hay == *needle && is_needle(hay, needle))
            return hay;
        ++hay;
    }
    return hay;
}

int pushstr(char ***vs, size_t *vslen, char *val, size_t slen)
{
    char **vsp = *vs + *vslen;

    if ((*vsp = realloc(*(*vs + *vslen), slen + 1)) == NULL) {
        perror("pushstr.1"); exit(1);
    }

    memcpy(*vsp, val, slen);
    *(*vsp + slen) = '\0';

    if ((*vs  = realloc(*vs, sizeof(char*) * (++*vslen + 1))) == NULL) {
        perror("pushstr.2"); exit(1);
    }
    *(*vs + *vslen) = NULL;

    return *vslen;
}

int main(void)
{
    char *hay    = "foo $$ foo ## foo [] fox @@ foo ??";
    char *needle = "foo";
    char *np;
    char **vs;
    size_t vslen = 0;
    size_t nlen  = strlen(needle);

    if ((vs = malloc(sizeof(char*))) == NULL) {
        perror("main");
        return 1;
    }
    *vs = NULL;

    while (*(np = find(hay, needle))) {
        if (np != hay) {
            pushstr(&vs, &vslen, hay, np - hay);
            hay = np + nlen;
        } else {
            hay += nlen;
        }
    }
    if (np != hay)
        pushstr(&vs, &vslen, hay, np - hay);

    while (*vs)
        printf("V: '%s'\n", *vs++);
    vs -= vslen;

    while (*vs)
        free(*vs++);
    vs -= vslen;
    free(vs);

    return 0;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-03T20:50:25.937

这是一个任务`strstr()`。我稍微更改了您的代码以使用它。

```
int add_to_buf(char *str, size_t len, char ***buf)
{
  if (len <= 0) return 0;
  **buf = malloc (len);
  strncpy (**buf, str, len);
  ++*buf;
  return 1;
}

int main()
{
  char *str = "foo $$ foo ## foo []";
  char *s = "foo";

  char **buffer = malloc (MAX_BUFFER_SIZE*sizeof(*buffer)), **buf = buffer;
  char *start, *end;

  int s_len = strlen (s);

  start = str;
  end = strstr (str, s);
  while (end) {
    add_to_buf (start, end-start, &buf);
    start = end + s_len;
    end = strstr (start, s);
  }
  add_to_buf (start, strlen (str) - (start-str), &buf);
  *buf = 0;

  for (buf = buffer; *buf; ++buf)
      printf ("%s\n", *buf);

  free (buffer);
  return 0;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-03T20:56:01.767

您为一个简单的程序使用了太多的指针，而您使用它们的方式使其难以理解。我看到的一个直接错误是您正在使用`buffer**`（字符串数组），但您只分配了一个字符串。你就是这个用来存储令牌的字符串数组，它会在某处造成一些内存冲突。

由于您要打印令牌，因此无需将它们存储在单独的数组中。这将做：

```
#include<stdio.h>
#include<string.h>

int main(int ac, char*argv[]) {
char str[] = "foo $$ foo ## foo []";
char * s = "foo";   
char *p;

p = strtok(str, " "); // tokenize

while(p!=NULL)
{
if(strcmp(p, s)) //print non matching tokens
printf("%s\n", p);
p = strtok(NULL, " ");
}

return 0;
} 
```

请注意，这里的分隔符是空格，这使得这里更容易。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-03T20:29:28.607

[strtok](http://pubs.opengroup.org/onlinepubs/009604599/functions/strtok.html)函数是为此任务设计的：

```
#include <string.h>
...
char *token;
char *line = "LINE TO BE SEPARATED";
char *search = " ";

/* Token will point to "LINE". */
token = strtok(line, search);

/* Token will point to "TO". */
token = strtok(NULL, search); 
```

# git - 重新设置主题分支而不是合并的缺点是什么？

> ID：10000624
> 
> 赞同：7
> 
> 时间：2012-04-03T20:11:07.047
> 
> 标签：git, branching-and-merging, git-rebase, git-merge

我目前的模式是`merge`在完成后将主题分支放到我的主要开发分支中。日志最近看起来有点疯狂，我正在考虑改用使用`rebase`。

`rebase`使用而不是`merge`主题/功能分支可能有哪些缺点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-03T20:14:44.783

使用 rebase 的主要缺点是你应该（必须）只在本地使用 rebase。也就是说，一旦某个东西被推送，之后就不要再变基了。重写历史很好而且很花哨，但是当你开始在遥控器上搞砸历史的那一刻，事情变得非常混乱。

**编辑**

另一个缺点是真实的历史实际上已经丢失了。这意味着，除其他外，不可能（轻松地）回到主题分支，因为它看起来像是主分支的一部分。它还使还原更改更加痛苦，因为您必须一次挑选一个提交，尽力记住哪些来自原始主题分支。如果你使用交互式 rebase，或者更糟——压缩你的提交——那么这可能是一个非常令人头疼的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-03T20:40:56.070

缺点包括在开发过程中的修订与它们的实际状态不匹配，失去使用类似标志隐​​藏合并之间提交的能力`--first-parent`，以及如果您打算稍后重新设置分支，则难以共享您的分支。如果您的日志看起来很疯狂，请`git help log`再次查看。很有可能，有一个标志组合可以让它看起来像你想要的那样，而不会在需要时牺牲灵活性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-01-31T21:02:28.180

另一个原因：通常更难解决冲突。如果您在一个功能中有多个提交，您可能多次更改了相同的代码。如果发生冲突，您将不得不多次修复它。通过合并，您只需执行一次。

# javascript - 创建坐标网格数组

> ID：10000628
> 
> 赞同：0
> 
> 时间：2012-04-03T20:11:27.467
> 
> 标签：javascript

我对我的数组创建有点困惑。我有一个带有 x:y 坐标的项目列表以及它们的尺寸（以网格大小为单位）......例如：

```
x: 1
y: 7
width: 2 tiles
height: 2 tiles 
```

所以我试图做的想法是创建一个“被占用”的 x:y 网格数组。但是循环这样的数据，所以被占用的瓷砖将是：

```
x: 1
y: 7
//
x: 2
y: 7
//
x: 1
y: 8
//
x: 2
y: 8 
```

因为在上面的示例中，该项目是 2 x 2 块（正方形）。

我的对象的结构是这样的（显示在 console.log(sdata);）

```
7: Array[4]
0: "1"
1: "7"
2: "2"
3: "2" 
```

所以是的，我正在尝试创建一个数组来存储这种网格参考。希望我解释了我想要了解的内容，但我不知道如何构造一个循环来创建数组。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-03T20:41:11.400

[http://jsfiddle.net/rlemon/JeeV2/](http://jsfiddle.net/rlemon/JeeV2/)这是一个如何生成这种类型的“网格”占用数据的示例。

```
var chords = [ // instead of arrays we'll use objects.. they're nicer. 
    {
    x: 1,
    y: 7,
    h: 2, // height
    w: 2}, // width
{ // ohh look a second plot point.
    x: 4,
    y: 1,
    h: 3,
    w: 2},
];

var occupied = { // will be your cells points occupied
    x: [],
    y: []    
};
chords.forEach(function(chord) { // now lets loop the chords and produce the occupied array
    occupied.x.push( chord.x );
    occupied.x.push( chord.x + (chord.w-1) ); // expand the width of the cell - initial point
    occupied.y.push( chord.y );
    occupied.y.push( chord.y + (chord.h-1) ); // expand the height of the cell - initial point
});
console.log( occupied );
// outputs
​Object
    x: Array[4]
        0: 1
        1: 2
        2: 4
        3: 5

    y: Array[4]
        0: 7
        1: 8
        2: 1
        3: 3 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-03T20:29:20.203

生成的`outputArray`数组是表单中的对象集合`{ x: value, y: value}`。

```
var inputArray = [ [1,7,2,2], ... ];
var outputArray = [];
for(var i = 0; i < inputArray.length; i++) {
    var item = {
      x: inputArray[i][0],
      y: inputArray[i][1],
      width: inputArray[i][2],
      height: inputArray[i][3]
    };
    for(var xx = 0; xx < item.width; xx++) {
        for(var yy = 0; yy < item.height; yy++) {        
            outputArray.push({
                x: item.x + xx,
                y: item.y + yy
            });
        }
    }
} 
```

​我添加了`x`、`y`和属性以使其更易于理解`width`。`height`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-03T20:31:30.470

```
function range(a, b) {
    /*
        range(5) -> [0,1,2,3,4]
        range(1,4) -> [1,2,3]
    */
    if (b===undefined)
        var start=0, stop=a;
    else
        var start=a, stop=b;

    var R = [];
    for(var i=start; i<stop; i++)
        R.push(i);
    return R;
} 
```

然后是两条线：

```
range(x, x+width).map(function(x) {
    return range(y, y+height).map(function(y) {
        return {x:x, y:y}; // anything you'd like
    })
}) 
```

结果（通过 JSON.stringify 获得）：

```
[
    [ {"x":1,"y":7}, {"x":1,"y":8} ],
    [ {"x":2,"y":7}, {"x":2,"y":8} ]
] 
```

# c++ - 编写一个函数来分配一个上三角矩阵

> ID：10000635
> 
> 赞同：0
> 
> 时间：2012-04-03T20:11:53.703
> 
> 标签：c++, multidimensional-array, matrix

我正在尝试编写一个函数来分配一个上三角矩阵。它应该返回一个指向分配数组的第一个元素的指针。我还需要使用动态分配来确保分配所需的确切内存量，但我不太确定如何做到这一点......任何提示或建议将不胜感激！我是 C++ 的菜鸟。无论如何，如果有帮助，这是我的代码！

```
#include <iostream>

using namespace std;

int main ()
{
int a[3][3],i,j;  //creating two dimensional array
int d; 
int * p;  
cout<<"Please Enter the 9 elements of matrix (with spaces): ";  
for(i=0;i<3;i++)  
   for(j=0;j<3;j++)  
        cin>>d,&a[i][j];  

cout<<"\nThe matrix is\n ";  
for(i=0;i<3;i++)
{  
   cout<<"\n";  
   for(j=0;j<3;j++)  
        cout<<d,a[i][j];  
}  

cout<<"\nSetting zero in upper triangular matrix\n";  
for(i=0;i<3;i++){  
   cout<<"\n";  
   for(j=0;j<3;j++)  
        if(j>=i)  
          cout<<d,a[i][j];  
        else  
          cout<<0;   
}   

  return 0;  
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-03T20:26:31.610

As per oli's comment I think you are looking to do

cin >> d; a[i][j] = d;

vs

cin>>d,&a[i][j];

I suggest reading something like .... [http://www.cplusplus.com/doc/tutorial/basic_io/](http://www.cplusplus.com/doc/tutorial/basic_io/)

theres your first issue

dynamic allocation is done through code like new and malloc try reading...

[http://www.cplusplus.com/doc/tutorial/dynamic/](http://www.cplusplus.com/doc/tutorial/dynamic/)

as for how to store your upper matrix... I would recommend just using a normal 2d matrix chances are it will work better with most matrix libraries out there.

Good luck with your homework.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-03T20:20:32.347

通常，在分配大小为 N 的上三角矩阵时，您会分配 N + N-1 ... + 1（查找整数和）元素，然后您需要创建访问机制（可能是此处的意图），以便当你想要元素 M(i,j) 你得到第 i 行第 j 列中的元素，尽管（几乎）一半的元素丢失了；或者在使用矩阵的任何矩阵操作代码中使用矩阵时手动执行此操作。

您将一维数组视为前 N 个元素是第一行，接下来的 N-1 个元素是第二行的（右 N-1 个元素），依此类推。

因为这个问题看起来和闻起来都像家庭作业，我认为这与适当的暗示差不多。

# redirect - 将域名重定向到同一个域？

> ID：10000637
> 
> 赞同：0
> 
> 时间：2012-04-03T20:11:58.137
> 
> 标签：redirect, apache2

我想将以下域名 :haloservers.net,haloservers.nl 和 servers.xgclan.com 重定向到域名 www.haloservers.us 我尝试将下面的代码放在 htaccesses 文件中，但这不起作用。

```
RewriteEngine On
RewriteCond %{HTTP_HOST} ^(www\.?)haloservers.net$
RewriteRule ^(.*)$ http://www.haloservers.us/$1 [R=301,L]

RewriteCond %{HTTP_HOST} ^(www\.?)haloservers.nl$
RewriteRule ^(.*)$ http://www.haloservers.us/$1 [R=301,L]

RewriteCond %{HTTP_HOST} ^(servers\.)xgclan.com$
RewriteRule ^(.*)$ http://www.haloservers.us/$1 [R=301,L] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-03T20:39:18.677

尝试：

```
RewriteEngine On
RewriteCond %{HTTP_HOST} ^(www\.)?haloservers\.net [NC]
RewriteRule ^(.*)\.html$ http://haloservers.us/$1 [R=301,L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T19:38:19.890

下面的代码解决了这个问题。

```
RewriteEngine on
RewriteBase /
RewriteCond %{HTTP_HOST} ^(.*)haloservers(.nl|.net)$ 
RewriteRule ^(.*) http://www.haloservers.us/$1 [L,R=301]
RewriteEngine On RewriteCond %{HTTP_HOST} ^(www\.)?haloservers(.nl|.net) [NC]
RewriteRule ^(.*)\.html$ http://haloservers.us/$1 [R=301,L] 
```

我从 col-dejong @ [http://gathering.tweakers.net/forum/list_messages/1497390/last得到了我的解决方案](http://gathering.tweakers.net/forum/list_messages/1497390/last)

# python - 使用织物运行子进程时出现 EOFError

> ID：10000642
> 
> 赞同：3
> 
> 时间：2012-04-03T20:12:09.010
> 
> 标签：python, ssh, subprocess, fabric

当我尝试 chown 目录时，Fabric 给了我一个 EOFError。仅当我从 fabric 之前立即运行的 python 脚本运行子进程时才会发生这种情况。

从我的fabfile：

```
...
with settings(warn_only=True):
    run('python my_scripts/import_local.py')
sudo('chown www-data:www-data /opt/mm/my_project/uploads -R') 
```

如果我将下面的行注释掉，`my_scripts/import_local.py`我不会收到任何错误：

```
 p = subprocess.Popen(command.split(), stdout=subprocess.PIPE,
                         stderr=subprocess.PIPE)
    result = p.communicate()[0].splitlines()
    if result:
        print result 
```

使用留下的子进程行，我得到了这个回溯（使用 --show=debug 运行）：

```
[xx.xx.xxx.xxx] sudo: sudo -S -p 'sudo password:'  /bin/bash -l -c "cd /opt/mm/my_project/current && source environment.sh && chown www-data:www-data /opt/mm/my_project/uploads -R"
Traceback (most recent call last):
  File "/Users/jesse.aldridge/.virtualenvs/my_project/lib/python2.6/site-packages/fabric/main.py", line 682, in main
    *args, **kwargs
  File "/Users/jesse.aldridge/.virtualenvs/my_project/lib/python2.6/site-packages/fabric/tasks.py", line 232, in execute
    task.run(*args, **new_kwargs)
  File "/Users/jesse.aldridge/.virtualenvs/my_project/lib/python2.6/site-packages/fabric/tasks.py", line 105, in run
    return self.wrapped(*args, **kwargs)
  File "/Users/jesse.aldridge/Dropbox/my_code/my_project/fabfile.py", line 162, in do_reimport
    sudo('chown www-data:www-data /opt/mm/my_project/uploads -R')
  File "/Users/jesse.aldridge/.virtualenvs/my_project/lib/python2.6/site-packages/fabric/network.py", line 343, in host_prompting_wrapper
    return func(*args, **kwargs)
  File "/Users/jesse.aldridge/.virtualenvs/my_project/lib/python2.6/site-packages/fabric/operations.py", line 976, in sudo
    user=user)
  File "/Users/jesse.aldridge/.virtualenvs/my_project/lib/python2.6/site-packages/fabric/operations.py", line 867, in _run_command
    combine_stderr)
  File "/Users/jesse.aldridge/.virtualenvs/my_project/lib/python2.6/site-packages/fabric/operations.py", line 753, in _execute
    channel.get_pty(width=cols, height=rows)
  File "/Users/jesse.aldridge/.virtualenvs/my_project/lib/python2.6/site-packages/ssh/channel.py", line 158, in get_pty
    self._wait_for_event()
  File "/Users/jesse.aldridge/.virtualenvs/my_project/lib/python2.6/site-packages/ssh/channel.py", line 1084, in _wait_for_event
    raise e
EOFError
Disconnecting from xx.xx.xxx.xxx... done. 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-03T17:12:10.737

运行时会发生什么：

```
$ ssh xx.xx.xxx.xxx -t'sudo -S -p "sudo password:"  /bin/bash -l -c "cd /opt/mm/my_project/current && source environment.sh && chown www-data:www-data /opt/mm/my_project/uploads -R"' 
```

# mysql - mySQL分层分组排序

> ID：10000643
> 
> 赞同：2
> 
> 时间：2012-04-03T20:12:17.077
> 
> 标签：mysql

我有一个基本上看起来像这样的模式：

```
CREATE TABLE `data` (
  `id` int(10) unsigned NOT NULL,
  `title` text,
  `type` tinyint(4),
  `parent` int(10)
) 
```

该`type`字段只是一个枚举，其中 1 是父类型，2 是子类型（实际上有很多类型，其中一些应该表现得像父母，有些应该像孩子一样）。该`parent`字段指示一条记录是另一条记录的子项。

我知道这对于我想要构建的查询可能并不理想，但这是我必须使用的。

我想对数据进行排序和分组，以便父记录按 排序`title`，每个父记录下分组的是按 排序的子记录`title`。像这样：

```
 ID | title       |type |parent 
--------------------------------
 4  | ParentA     | 1   |
 2  | ChildA      | 2   | 4
 5  | ChildB      | 2   | 4
 7  | ParentB     | 1   |
 9  | ChildC      | 2   | 7
 1  | ChildD      | 2   | 7 
```

* * *

****编辑****

我们应该能够将这个`type`领域完全排除在外。如果`parent`不为空，则应将其分组在其父级之下。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-03T20:34:18.797

```
SELECT * FROM `data` ORDER BY COALESCE(`parent`, `id`), `parent`, `id` 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-03T20:31:04.790

这是经过测试可在 SQL Server 上运行的解决方案。在 MySQL 上应该基本相同

```
select Id, Title, [Type], Id as OrderId from Hier h1 where [Type] = 1
union
select Id, Title, [Type], Parent as OrderId from Hier h2 where [Type] = 2
order by OrderId, [Type] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-03T20:39:56.237

你说你想让它按标题排序，对吗？

```
SELECT id, title, parent
FROM
  ( SELECT id, title, parent,
    CASE WHEN parent is null THEN title ELSE CONCAT((SELECT title FROM `data` d2 WHERE d2.id = d.parent), '.', d.title) END AS sortkey
    FROM `data` d
   ) subtable
ORDER BY sortkey 
```

编辑：编辑以`type`从查询中删除。

# python - 如何在 Python 中轻松地为自定义格式化数据创建解析器

> ID：10000649
> 
> 赞同：4
> 
> 时间：2012-04-03T20:12:56.810
> 
> 标签：python, parsing

文件中的格式化数据类似于[YAML](http://en.wikipedia.org/wiki/YAML)，并希望为其创建语法和解析器。在 Python 中执行此操作的简单方法是什么？有没有一种工具可以让您为数据定义语法并根据语法进行解析？

PS 我知道更简单的方法可能是将数据格式更改为 JSON 或其他类型，但现在无法更改

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-03T20:14:40.660

查看pyparsing。这是一个非常简单的库，但它也非常强大。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-03T20:17:36.950

我之前已经将[PLY](http://pypi.python.org/pypi/ply/3.4)与[easyply](http://pypi.python.org/pypi/easyply/1.1)结合使用，并且喜欢它 - 也许，您会发现它与您的自定义格式一起使用很整洁。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-03T20:36:00.333

也许你会发现[funcparselib](https://github.com/vlasovskikh/funcparserlib)值得。它具有用于标记化和语法定义的简单语法。

[PyParsing](http://pyparsing.wikispaces.com/)可能较慢，但功能强大且众所周知。

# ios - 在通用应用程序中加载 iPad 笔尖

> ID：10000651
> 
> 赞同：3
> 
> 时间：2012-04-03T20:13:05.767
> 
> 标签：ios, ipad, xib, universal

我设置了一个`BOOL`调用`isUsingiPad`来检测我的用户何时使用 iPad。我用这个来做到这一点：

```
UIDevice* userDevice = [UIDevice currentDevice];
if (userDevice.userInterfaceIdiom == UIUserInterfaceIdiomPad) {
    isUsingiPad = YES;
} 
```

当我的应用程序第一次启动时，它会检查正在使用的设备是否已通过我的注册。如果有，那么它将用户发送到我的应用程序的主视图控制器。但是......当注册用户（使用 iPad）注册、关闭应用程序，然后重新打开它时，它们会被发送到 iPhone 笔尖而不是 iPad。我的应用程序中的每个视图都有 2 个笔尖。一款用于 iPhone，一款用于 iPad。有一个 View Controller 控制每组 2 个。我已经放置了代码来处理它是 iPhone 还是 iPad。我的问题是：我应该添加什么来确保用户每次都能使用 iPad 笔尖？我在哪里添加这个？我可以编辑这个问题以包含任何必要的代码。提前致谢。

编辑：更新`-(BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:`的方法。

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {    

self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
// Override point for customization after application launch.

UIDevice* userDevice = [UIDevice currentDevice];
if (userDevice.userInterfaceIdiom == UIUserInterfaceIdiomPad) {
    isUsingiPad = YES;
}

if (!isUsingiPad) {
    self.viewController= [[PassportAmericaViewController alloc] initWithNibName:@"PassportAmericaViewController" bundle:nil];
} else {
    self.viewController = [[PassportAmericaViewController alloc] initWithNibName:@"PassportAmericaViewController-iPad" bundle:nil];
}

self.window.rootViewController = self.viewController;

[self.window addSubview:navigationController.view];

[self.window makeKeyAndVisible];

return YES;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-03T20:20:03.483

这就是 Apple 在应用程序模板中用来实现这一点的方法，它在您的`AppDelegates` `applicationDidFinishLaunchingWithOptions`:

现在确保您的用户每次都返回到正确的屏幕，这取决于您的设置，您可能希望在`viewDidLoad`或中初始化它`viewDidAppear`。

```
 - (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    // Override point for customization after application launch.
    if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone) {
        self.viewController = [[ViewController alloc] initWithNibName:@"ViewController_iPhone" bundle:nil];
    } else {
        self.viewController = [[ViewController alloc] initWithNibName:@"ViewController_iPad" bundle:nil];
    }
    self.window.rootViewController = self.viewController;
    [self.window makeKeyAndVisible];
    return YES;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T12:04:35.020

为了在通用应用程序中为 iPad/iPhone 动态加载 nib，您应该使用以下命名约定：-

*   iPhone - MyNibName.xib
*   iPad - MyNibName~ipad.xib

这样做你不需要做任何手动加载或 if 语句。

# ivy - ivy - 如何通过添加一行来下载所有源

> ID：10000655
> 
> 赞同：1
> 
> 时间：2012-04-03T20:13:13.380
> 
> 标签：ivy

我不想修改每一行来告诉 ivy 下载它可以下载所有 jar 的所有源。有没有一种方法可以只添加一行或属性来告诉 ivy 获取它可以获得的所有 jars/binaries 的所有源，以便我们的团队在需要时更容易单步执行代码。

我想我正在寻找像 mavens "mvn dependency:sources" 这样的东西，所以我可以有一个单独的 ant 目标或其他东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T23:15:28.563

**您可以在ivy.xml**文件中设置默认配置映射，如下所示：

```
<configurations defaultconfmapping="compile->default;sources->sources">
    <conf name="compile" description="Compile classpath"/>
    <conf name="sources" description="Source jars"/>
</configurations> 
```

这将创建两组文件。编译类路径依赖项和源 jar。

# arrays - 从 MATLAB 结构数组中查询变量

> ID：10000660
> 
> 赞同：3
> 
> 时间：2012-04-03T20:13:24.597
> 
> 标签：arrays, matlab, struct

我在 MATLAB 中有一个结构数组，所有这些结构都具有相同的结构（相同的字段）。我想要一种快速的方法来编译一个数组，该数组包含整个结构数组中特定字段的所有值。有没有办法在不使用循环的情况下做到这一点？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-03T21:01:11.983

假设您的数组已命名`a`并且您有一个 field `b`。访问`a.b`会为您提供.`b`中每个元素的字段值列表`a`。如果你想把它变成一个列表，只需将列表包装在`[]`. 那是：

```
>> a = [struct('a', 1, 'b', 10, 'c', 100), struct('a', 2, 'b', 20, 'c', 200)];
>> a
a = 
1x2 struct array with fields:
    a
    b
    c
>> a.b
ans =
    10
ans =
    20
>> [a.b]
ans =
    10    20
>> [a.c]
ans =
   100   200 
```

如果您有一个结构矩阵，则可以使用上述方法获取一个向量，然后使用以下方法将其重塑为矩阵：

```
>> reshape([a.b], size(a))
ans =
    10   111
    20   222 
```

# jquery - jQuery 中 .css 方法中的 += 运算符

> ID：10000662
> 
> 赞同：1
> 
> 时间：2012-04-03T20:13:27.000
> 
> 标签：jquery

有没有办法在 css 运算符中实现 += 运算符（假设示例中的 ui.value 具有数值）

像这样的东西（不起作用）：

```
$("#resume_holder").contents().find('body').children().css('font-size', +=ui.value); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-03T20:15:53.953

尝试：

```
$("#resume_holder")
    .contents()
    .find('body')
    .children()
    .css('font-size', '+=' + ui.value); 
```

（如果你使用 jQuery >= 1.6）

根据css的文档：

> 从 jQuery 1.6 开始，.css() 接受类似于 .animate() 的相对值。相对值是一个以 += 或 -= 开头的字符串，用于增加或减少当前值。例如，如果一个元素的 padding-left 为 10px，.css( "padding-left", "+=15" ) 将导致总 padding-left 为 25px。

**示例： http:** [//jsfiddle.net/JMRPf/](http://jsfiddle.net/JMRPf/)（我知道微不足道，但证明它有效）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-03T20:16:32.223

您可以将 font-size 的实际值保存到变量中，添加 ui.value，然后将其重新分配：

```
var crtFontSize = parseInt($("#resume_holder").contents().find('body').children().css('font-size'));
crtFontSize += ui.value;
$("#resume_holder").contents().find('body').children().css('font-size', crtFontSize + 'px'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-03T20:15:57.827

您可以使用`animate`jquery的方法，但会逐渐显示结果..有问题吗？

```
$("#resume_holder").contents().find('body').children().animate('font-size', ui.value); 
```

这会将当前字体大小更改为`ui.value`包含的内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-03T20:16:26.700

简短的回答，不。

但是，这可以按如下方式完成（未经测试）：

```
$("#resume_holder").contents().find('body').children().each(function() {
    $(this).css('font-size', $(this).css('font-size') + ui.value);
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-03T20:16:46.013

不确定，`css`但您可以尝试使用`animate`方法来实现它。

```
$("#resume_holder").contents().find('body').children()
.animate({ fontSize: '+='+ui.value }); 
```

# javascript - Google Chrome - context.canvas.width/context.canvas.width 导致“蓝色层”

> ID：10000666
> 
> 赞同：5
> 
> 时间：2012-04-03T20:13:48.837
> 
> 标签：javascript, google-chrome, canvas, html5-canvas

我今天从 Chrome 版本 17 升级到 Chrome：18.0.1025.142。

我注意到我正在开发的一个网络应用程序有一个奇怪的蓝色层，它在加载时出现，然后在你开始滚动时消失。

我已经在我的 JS 中追踪到以下几行：

```
 context.canvas.width = canWidth;
                context.canvas.height = canHeight; 
```

canWidth 和 canHeight 是动态生成的。

注释掉这些行会阻止蓝色图层渲染，但这不是解决方法，因为我需要使用动态生成的值来控制画布宽度/高度。

我还尝试将 context.canvas.width 和 context.canvas.height 硬编码为 600，这也产生了蓝层问题。

这在以前版本的 Chrome 上不是问题，我在 FireFox 中也没有任何问题。

关于问题可能是什么的任何建议？

编辑：

这是上述代码所在的代码块（nodeLeft 和 nodeTop 在其他地方生成）：

```
 context.clearRect ( 0 , 0 ,canWidth, canHeight );
                context.canvas.width = canWidth;
                context.canvas.height = canHeight;                                 
                context.beginPath();
                context.moveTo(x, y);
                context.lineTo(nodeLeft, nodeTop);
                context.strokeStyle = "#000000";
                context.lineCap = "round";
                context.stroke(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-03T20:23:31.267

您可以发布比您提供的两行更多的代码吗？我相信这不仅仅是你设置宽度/高度的地方。

我有一个绘图应用程序，我已经打开和关闭了一段时间，在其中我做的事情非常相似。唯一的区别是我`context.scale(0,0);`在设置宽度和高度之前调用。我在任何带有蓝色覆盖层的 Google Chrome 版本中都没有问题。您是否可能在设置宽度和高度之前修改上下文的比例值？

例如，这就是我所拥有的，将画布设置为完整文档绘图区域的文档宽度/高度：

```
context.scale(0,0);
context.canvas.width = $(document).width();
context.canvas.height = $(document).height(); 
```

编辑：如果您想测试蓝色覆盖以查看它是您的浏览器还是您的代码，我提到的修补网站位于[http://drawcomix.com 。](http://drawcomix.com)

**编辑：**根据您的附加评论...

我在网上看到教程建议清除画布的最佳方法是设置高度/宽度。这并不完全正确。在文档加载时，这可能是最快/最简单的方法，但是在鼠标移动时，您最好执行以下操作：

```
context.save();
context.setTransform(1,0,0,1,0,0);
context.clearRect(0,0,width,height); // width/height of canvas
context.restore(); 
```

`setTransform`如果您不在画布上执行任何转换，则可能不需要。

我相信我在 Pro HTML5 Programming (Apress) 中找到了这个解决方案，但我不确定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T22:45:58.430

**编辑：**

好的，我得到了它。似乎是某些 AMD 显卡的问题。我可以在催化剂控制中心关闭铬的高性能模式。这解决了我最烦人的事情......希望它会在下一个版本中得到修复。

有关更多信息，请参阅：[http ://code.google.com/p/chromium/issues/detail?id=121658](http://code.google.com/p/chromium/issues/detail?id=121658)

* * *

这不是一个解决方案，但我面临同样的问题，这让我发疯。我正在努力确定它。我在不同的机器上测试了不同的浏览器：

**问题：**

*   蓝色图层（我只在 Chrome 未最大化时才看到它们）
*   y 滚动条错位（有时仅在我切换选项卡时才会显示）
*   扭曲的形状。画布的大小和绘制的图像/形状因 chrome 和其他浏览器而异。意味着，Chrome 上的画布/形状更小，它主要是缩小宽度。

**结论 1：** 似乎并非在每台装有 Chrome 18.xx 的机器上都会发生这种情况似乎是硬件问题，但实际上无法进一步限制它。

**结论 2：** 如果我将画布的大小设置为 200 高度/宽度，则不会出现问题。如果我将其设置为高于 200，它将使画布/矩形变形并出现其他问题。

**结论 3：** 只有在画布上绘制了某些内容或设置了某些内容（即填充样式）时，才会出现问题。

这是我使用的测试片段：

```
<canvas id="canvas" width="300" height="300" style="background-color:orange"></canvas>
...
ctx.fillRect (10, 10, 55, 50); 
```

# xcode - Xcode 图像/像素实时操作

> ID：10000670
> 
> 赞同：-1
> 
> 时间：2012-04-03T20:13:59.667
> 
> 标签：xcode, image

您好我正在寻找执行以下操作：对于游戏，根据当前视图创建一些效果。代码需要抓取视图的一部分然后对其进行操作。我需要的是“玻璃”，所以当角色走到玻璃后面（或玻璃应该在的地方）时，代码会抓取玻璃后面的图像并将其拉伸并重新打印到玻璃应该在的地方，以产生效果走在镜头后面。

做这个的最好方式是什么？

我以前从未尝试过这样的事情，所以任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-03T20:52:21.847

我想您是在询问 cocoa 框架的图像处理功能，在这种情况下，我建议您研究 CoreImage：

[http://developer.apple.com/library/mac/#documentation/graphicsimaging/Conceptual/CoreImaging/ci_intro/ci_intro.html#//apple_ref/doc/uid/TP30001185](http://developer.apple.com/library/mac/#documentation/graphicsimaging/Conceptual/CoreImaging/ci_intro/ci_intro.html#//apple_ref/doc/uid/TP30001185)

NSBox 在播放器视图上绘制，生成的合成在绘制之前应用了 CIFilter（失真）。

# css - 使标签移动到新行，而不使用“display:block”

> ID：10000674
> 
> 赞同：23
> 
> 时间：2012-04-03T20:14:07.807
> 
> 标签：css

我希望[此页面](http://carolineelisa.com/)上的导航链接每个都出现在自己的行上：

A. 不使用“ `display:block`” - 因为这会使悬停动画占据容器的整个宽度，而不仅仅是`<a>`元素。

B. 不使用`<br>`标签，因为我最终希望在较小的屏幕上创建一个具有水平导航的响应式站点。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-04-03T20:18:00.740

你试过`float:left; clear:left`吗？

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-03T20:19:12.770

将导航包装在 ul, li 中：

```
<ul>
    <li><a href="#">Link 1</a></li>
    <li><a href="#">Link 2</a></li>
    <li><a href="#">Link 3</a></li>
    <li><a href="#">Link 4</a></li>
</ul> 
```

CSS：

`ul {list-style: none} li {display: block}`

这使您可以相应地设置锚点样式，同时强制它们断线。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-03T20:20:12.960

`<a>`您可以将's包装在's 中`<div>`并将 CSS 应用于`div`'s 到`float:left`, `clear:left`;

```
div.anchorContainer
{
    float:left;
    clear:left;
}

<div class="anchorContainer">
    <a href="#">text</a>
</div>

<div class="anchorContainer">
    <a href="#">text</a>
</div>

<div class="anchorContainer">
    <a href="#">text</a>
</div> 
```

# ruby-on-rails - 将 rake 后台任务保存到日志？（使用 Resque）

> ID：10000678
> 
> 赞同：1
> 
> 时间：2012-04-03T20:14:27.403
> 
> 标签：ruby-on-rails, ruby-on-rails-3, logging, rake

我猜这很简单，但仍然......我有一个 Resque 的后台任务失败并且输出太长而无法在终端窗口中看到......我认为是时候记录它了。我通过执行它

```
bundle exec env rake resque:work QUEUE='*' 
```

问题是 - 如何将该输出保存到日志文件？

我查看了日志记录（development.log，当然它没有显示在那里，b/c 它发生在 rake 端）......

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-03T20:19:49.850

看看这个拉取请求：

[https://github.com/sj26/resque/commit/05e4c5e6f92fe62b25db40984b20dad4b9f870d8](https://github.com/sj26/resque/commit/05e4c5e6f92fe62b25db40984b20dad4b9f870d8)

并阅读自述文件。您是否尝试设置 VVERBOSE=1？

* * *

您可以将输出发送到文件：

```
bundle exec env rake resque:work QUEUE='*' >> log/resque.log 
```

我在我的服务器上运行 resque

```
nohup bundle exec rake resque:work QUEUE=general PIDFILE=tmp/pids/resque_worker_QUEUE.pid & >> log/resque_worker_QUEUE.log 2>&1 
```

不能告诉你这是最好的方法，但它确实有效。

# windows-8 - 是否可以将 Microsoft Kinect SDK 与 Metro Style 应用程序一起使用？

> ID：10000683
> 
> 赞同：2
> 
> 时间：2012-04-03T20:14:55.777
> 
> 标签：windows-8, kinect, microsoft-metro

我想知道是否可以将 Kinect SDK 与 Metro Style 应用程序一起使用，以及智能手机和平板电脑是否支持 Kinect。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T06:22:51.077

我认为这是可能的，并且有人已经做到了。但据我所知，不是直接在 Metro UI 上（2012 年 4 月 4 日）

Microsoft 于[`Kinect for Windows 7 SDK`](http://www.microsoft.com/en-us/kinectforwindows/develop/)2011 年 6 月发布。因此，我们知道 Microsoft 的目标是利用 Kinect 进行 PC 控制。由于 Windows 8 比任何其他以前的 Windows 版本更受触控驱动，因此他们的目标应该是引入 Kinect 作为 Windows 8 控制设备之一。

此外，XBOX 上已经引入了 Metro UI。我们可以看到 Kinect 与 XBOX Metro UI 配合得非常好。鉴于 Kinect 可以很好地与 Windows 7 和 XBOX 上的 Metro UI 配合使用，不难想象 Kinect 可以与`Windows 8`. 特别是我们知道大多数`.Net 4.5`应用程序应该仍然在Windows 8的传统桌面界面上运行。（youtube上的[视频](http://www.youtube.com/watch?v=2nyLDaB-t4c)还展示了他们如何通过使用服务在Windows 8传统桌面界面和Metro Application上使用Kinect）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-10T16:08:33.790

我们开发了一个名为“KinectMetroApp”的项目，该项目有助于使用 kinect 控制 Windows 8 上的 Metro UI。请在下面找到描述该项目的帖子。

[http://wiseteamtn.wordpress.com/2012/03/27/kinect-your-metro-style-app/](http://wiseteamtn.wordpress.com/2012/03/27/kinect-your-metro-style-app/)

此外，最近在第 9 频道上发表的一篇文章也谈到了这个话题。

[http://channel9.msdn.com/coding4fun/kinect/Kinect-your-Metro](http://channel9.msdn.com/coding4fun/kinect/Kinect-your-Metro)

# mysql - MySQL Sub Query 将查询连接到现有查询

> ID：10000685
> 
> 赞同：0
> 
> 时间：2012-04-03T20:15:04.767
> 
> 标签：mysql

我有一个查询，我正在寻找一种方法来执行子查询并将结果作为最后一列加入

像这样：我当前的查询有效并且类似于：

```
SELECT * FROM users_table JOIN randomjoin here WHERE blah 
```

我运行并希望集成到第一个查询中的第二个查询是：

```
SELECT COUNT(*) FROM #__community_fields_values WHERE field_id="16" AND value="'. $row->username .'" 
```

所以我想做的是在结果中创建一个额外的列来显示另一个查询的计数。重点是我可以按最后一列对结果进行排序

有人可以帮我弄清楚吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-03T20:17:56.620

您可以`JOIN`针对子查询，只要它获得别名。

```
SELECT 
  users_table.*,
  usercount.num
FROM 
  users_table
  LEFT JOIN (
    /* Added the value column and a GROUP BY to the subquery to return usernames & counts. */
    SELECT 
      COUNT(*) AS num, 
      value 
    FROM #__community_fields_values 
    WHERE field_id=16 
    GROUP BY value
  ) usercount ON users_table.username = usercount.value 
```

# linux - 在 Linux 中启用 MMU

> ID：10000693
> 
> 赞同：2
> 
> 时间：2012-04-03T20:15:28.170
> 
> 标签：linux, arm, mmu

1.  在 ARM Linux 中，正是在哪一点启用了 mmu。即，在哪个文件中（arch/arm/kernel/setup.c 中的程序集文件或 paging_init()）

2.  ARM linux 是否支持在不分页的情况下运行。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-04T12:31:30.083

看看[这个](http://amitshah.bizhat.com/arm/arm_linux_boot-1.html)（死的）和[这个](https://jsevy.com/linux/ARM_Linux_boot_sequence.html)关于 ARM Linux 启动过程的页面。它们可能有些过时，但应该非常接近。

1.  MMU 在[arch/arm/kernel/head.S](https://elixir.bootlin.com/linux/v4.19/source/arch/arm/kernel/head.S#L449)中启用`__enable_mmu`。
2.  你甚至可以在没有 MMU 的情况下运行；uCLinux 项目已在几年前合并到主线中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-09-26T23:37:59.273

实际上，如果您在 ARM 系统上使用 Linux 在嵌入式系统上工作，那么通常在引导加载程序中没有 MMU，当引导加载程序切换到内核时，然后在[arch/arm/boot/compressed/head.S](https://elixir.bootlin.com/linux/v4.19/source/arch/arm/boot/compressed/head.S#L696)`__setup_mmu`中，我们在功能中设置了 MMU 。

首先创建用于页面转换的页表，然后我们从 MMU 设置开始。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-03T20:26:18.647

I don't know the answer to the first question offhand. I would have browse sources.

The ELDK I am using on a custom ARM board does not have paging, and Linux works just fine.

# mapping - 在 Apache CXF JAX-RS 中映射扩展内容类型

> ID：10000699
> 
> 赞同：5
> 
> 时间：2012-04-03T20:15:40.103
> 
> 标签：mapping, cxf, content-type, jax-rs

JAX-RS 提供了一种在`@Produces`. `Accept`) 向调用者返回信息时。

我的（工作）客户，就像客户经常做的那样，要求我通过 URL 中的扩展名指定内容类型，例如`api/widgets.json`. 这将迫使我有各种`getWidgetsXXX()`方法，一种是 with `@Produces("application/json")`，另一种是 with `@Produces("application/xml")`，等等。

但是我使用的是 Apache CXF，我很高兴地发现我可以[配置 CXF](http://cxf.apache.org/docs/jaxrs-services-configuration.html)`jaxrs.extensions`以使用init 参数将各种扩展映射到内容类型！

```
<!-- registers extension mappings -->
<init-param>
  <param-name>jaxrs.extensions</param-name>
  <param-value>
    xml=application/xml
    json=application/json
  </param-value>
</init-param> 
```

但是我绝对找不到关于它在现实世界中如何工作的文档。我天真地以为我可以用带有扩展名的路径注释一个方法，它会模仿`Accepts`标题：

```
@Path("/widgets.{extension}")
@GET
@Produces({ "application/json", "application/xml" })
public List<Widget> getWidgets(); 
```

所以我用 调用它`api/widgets.json`，它返回 XML！这特别奇怪，因为 JAX-RS 指定默认内容类型是列出的第一个。

我在哪里可以找到如何使用 CXF 扩展内容类型映射？

PS我没有使用Spring。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T11:55:09.713

`<jaxrs:server>`在您的作品中添加以下内容：

```
<jaxrs:extensionMappings>
    <entry key="json" value="application/json" />
    <entry key="xml" value="application/xml" />
</jaxrs:extensionMappings> 
```

来源：[http ://cxf.apache.org/docs/jax-rs.html#JAX-RS-Debugging](http://cxf.apache.org/docs/jax-rs.html#JAX-RS-Debugging)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-06-21T22:23:06.967

不知道这是否对您有帮助，但我也面临同样的问题，在我的 JAX-RS 服务中引入类似的东西。我使用**JAX-RS_Content_Negotiation**实现了这个功能以下位置有关于它的详细信息。

[https://docs.jboss.org/resteasy/docs/3.0.6.Final/userguide/html/JAX-RS_Content_Negotiation.html](https://docs.jboss.org/resteasy/docs/3.0.6.Final/userguide/html/JAX-RS_Content_Negotiation.html)

您只需将您的媒体类型映射到您想要的值

```
 <context-param>
        <param-name>resteasy.media.type.mappings</param-name>
        <param-value>
          html : text/html, json : application/json, xml :           
           application/xml
       </param-value>
 </context-param>

 @GET
        @Path("/second/{param}")
        @Produces({MediaType.APPLICATION_JSON,MediaType.APPLICATION_XML})
        public Response printStudent(@PathParam("param") String msg) {

} 
```

现在我可以像这样访问我的服务，并且响应是根据我放在最后的扩展名

[http://localhost:8080/RESTfulExample/rest/message/second/bill.json](http://localhost:8080/RESTfulExample/rest/message/second/bill.json)

您可以将 .xml 或 .json 放在 url 的末尾，服务将相应地生成响应。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T21:21:12.083

在您的情况下，我会声明该方法 @Produces 内容类型`*/*`（即完整的通配符），然后自己进行内容协商。您可能正在查看这样的方法签名：

```
@javax.ws.rs.GET
@javax.ws.rs.Path("{filename}")
@javax.ws.rs.Produces("*/*")
javax.ws.rs.core.Response getDirectoryOrFileContents(
        @javax.ws.rs.PathParam("filename") String filename,
        @javax.ws.rs.core.Context javax.ws.rs.core.HttpHeaders headers); 
```

这使您可以访问所需的文件名 - 一种猜测要传递的媒体类型的方法 - 以及完整的 HTTP 标头集（提示：use `headers.getAcceptableMediaTypes()`），这是另一种方式。如何平衡这两者可能是“有趣的”。（我必须这样做的代码非常特定于我的应用程序的内部模型，因此可能对您没有用处。）然后您通过构造 a 返回结果`Response`，这使您可以非常密切地控制客户端的内容回来。

是的，这比让 CXF 为您处理所有这些工作要做更多的工作（它通常会生成大量样板来完成所有这些工作），但在复杂的情况下，您会为控制感到高兴。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-31T11:17:47.343

正如您所猜测的那样，扩展名模仿了`Accept`标题。但是，您不得在`@Path`注释中声明扩展：

```
@Path("/widgets")
@GET
@Produces({ "application/json", "application/xml" })
public List<Widget> getWidgets(); 
```

然后您可以致电`widgets.xml`或`widgets.json`

# c# - 在c#中以块的形式读取整个文件

> ID：10000701
> 
> 赞同：4
> 
> 时间：2012-04-03T20:15:56.793
> 
> 标签：c#, swift-mt

我有一份来自银行的文件，其结构非常特殊。其中有账号（25）、账户余额开始（60F）、账户余额停止（62F）、交易（61代表交易，86代表本次交易明细）。

```
:20:STARTSUM
:25:/PL2321109943011
:28C:0330/001
:60F:C100PLN38,74
:62F:C103PLN38,74
-

:20:STARTSUM
:25:/PL24160011982002123456001
:28C:0403/001
:60F:C030403PLN36000,00
:61:0304030403CN100,00S723NONREF//CENT30403H000200
:86:723>00PRZELEW OTRZYMANY ELIXIR>20Fakt VAT 1 nr 00911/03
:86:723>3010501445>3125-00001201467436
:86:723>32Firma XXXXXXXXXXă>33Krakow
:61: 0304030403DN1000,00S223NONREF//CENT30403H002342
:86:223>00PRZEL KRAJ MULTICASH>20000004020 20021224 Fa. 0095
:86:223>21007203-FIRMA SP. Z O>308510101010>311234567890123456
:86:223>32FRIMA XXXXXXXXXX UL. GNI>33EZNIENSKA 1
:86:223>3885101010101234567890123456
:86:223>6085101010101234567890123456
:61:0304030403CN100,00S723NONREF//CENT30403H000230
:86:723>00PRZELEW OTRZYMANY ELIXIR>20Fakt VAT 1 nr 00911/03
:86:723>308510101010>311234567890123456
:86:723>32Firma XXXXXXXXXXă>33Krakow
:86:223>3885101010101234567890123456
:86:223>6085101010101234567890123456
:62F:C030403PLN35200,00
-

:20:STARTSUM
:25:/PL2321109944011
:28C:0330/001
:60F:C120330PLN43,45
:62F:C120330PLN43,45
-

:20:STARTSUM
:25:/PL1109945011
:28C:0330/001
:60F:C1230PLN3,50
:62F:C1230PLN3,50
- 
```

每个块之间总是有 2 行中断。我想将这些块放入我创建的对象中。

```
string[] test = File.ReadAllLines(file);
foreach (var s in test) {

} 
```

我怎样才能以正确的方式接近它？通常我会`foreach`逐行尝试将块拆分为空的 2 行，然后通过执行多个 if/else 语句来进一步。但也许有简单/更好的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-03T20:22:53.513

```
string[] blocks = (file.ReadAllText(file)).split(new string[] {"\n\n\n"}, StringSplitOptions.None) 
```

应该为你把它分成块。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-03T20:26:31.620

查看使用 StreamReader 并使用您的逻辑来查找您要查找的内容。

```
StreamReader _sr = new StreamReader("YourFile");
_sr.ReadLine(); 
```

# c++ - 如果选择上面的 if 语句， else-is 会解决吗？

> ID：10000703
> 
> 赞同：0
> 
> 时间：2012-04-03T20:16:04.143
> 
> 标签：c++, if-statement

在这组语句中：

```
if(robot1Count < 12) {
    robot1Count++;
}
else if(robot1Count < 24) {
    robot1Count++;
}
else if(robot1Count < 36) {
    robot1Count++;
}
else if(robot1Count < 48) {
    robot1Count++;
}
else {
    robot1Count = 0;
} 
```

想象一下这是一个无限循环，这个循环会不会从 0 遍历到 48，变成 0。我想知道的是，如果第一个块被执行，后面的所有块会被忽略吗？或者我应该将第二个更改为 else if(robot1Count < 24 && robot1Count >= 12) ？或者那不重要？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-03T20:17:53.517

> 我想知道的是，如果执行第一个块，是否会忽略以下所有块？

是的，它们都将被忽略。甚至不会评估条件。但你知道，你可以自己测试一下！

```
if(robot1Count < 12) {
    printf("< 12");
    robot1Count++;
}
else if(robot1Count < 24) {
    printf(">= 12 && < 24");
    robot1Count++;
}
else if(robot1Count < 36) {
    printf(">= 24 && < 36");
    robot1Count++;
}
else if(robot1Count < 48) {
    printf(">= 36 && < 48");
    robot1Count++;
}
else {
    printf(">= 48");
    robot1Count = 0;
} 
```

然后您可以看到哪些消息被打印到控制台，然后您就会知道并感受到发生了什么！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-03T20:19:45.293

这：

```
if (cond1)
    stuff1;
else if (cond2)
    stuff2;
else if (cond3)
    stuff3;
else
    stuff4; 
```

与此**相同**：

```
if (cond1) {
    stuff1;
}
else {
    if (cond2) {
        stuff2;
    }
    else {
        if (cond3) {
            stuff3;
        }
        else {
            stuff4;
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-03T20:20:25.730

是的——语句的`if`分支和`else`分支`if`是互斥的——如果`if`分支执行`else`不执行（反之亦然）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-03T20:18:48.807

当然它们会被忽略，除非您将“else if”切换为“if”

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-03T20:23:57.410

如果上面的代码处于无限循环中

例子

```
int robot1Count = 0;
while (1 != 2) {

if(robot1Count < 12) {
    robot1Count++;
}
else if(robot1Count < 24) {
    robot1Count++;
}
else if(robot1Count < 36) {
    robot1Count++;
}
else if(robot1Count < 48) {
    robot1Count++;
}
else {
    robot1Count = 0;
}
} 
```

在一个循环中，这将增加到 48 并返回到 0

每次执行循环时，它只会命中 robots1Count++

# git - 如何删除错误的提交，同时保留以后的提交？

> ID：10000716
> 
> 赞同：1
> 
> 时间：2012-04-03T20:16:54.520
> 
> 标签：git

假设我按时间顺序提交了这些提交：

1.  一种
2.  b
3.  C

现在，我想摆脱`b`但保留 c，这样我就有了：

1.  一种
2.  C

我该怎么做呢？

*`b`（和之间没有冲突`c`）*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-03T20:41:51.737

如果您已经将更改推送到远程，您可以使用：

```
$ git revert <hash of commit b> 
```

创建一个新的提交`d`，删除提交的更改`b`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-03T20:19:20.700

假设您尚未推送到远程存储库，您可以进行交互式变基。看这里：

[http://book.git-scm.com/4_interactive_rebasing.html](http://book.git-scm.com/4_interactive_rebasing.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-03T20:22:16.277

如果您只需要来自 HEAD 的一个提交，则可以在不同的分支上使用 cherry-pick 来仅带来该提交：

```
$ git checkout -b working
$ git reset --hard <hash of the commit `a`>
$ git cherry-pick <hash of the commit `c`> 
```

硬重置将工作副本更改回提交时的状态，然后樱桃选择将提交中引入的更改`c`直接应用到工作副本之上。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-03T20:47:31.990

git rebase 的帮助讨论了这个确切的案例！看看这个：

```
A range of commits could also be removed with rebase. If we have the
   following situation:

           E---F---G---H---I---J  topicA

   then the command

       git rebase --onto topicA~5 topicA~3 topicA

   would result in the removal of commits F and G:

           E---H'---I'---J'  topicA

   This is useful if F and G were flawed in some way, or should not be
   part of topicA. Note that the argument to --onto and the <upstream>
   parameter can be any valid commit-ish. 
```

# sql - 从大表引用的小表中删除

> ID：10000718
> 
> 赞同：1
> 
> 时间：2012-04-03T20:17:10.457
> 
> 标签：sql, sql-server, performance, sql-delete

想象一个跟踪客户之间付款的数据库。

假设我有一个 Customer 表：

```
Customer 
----------
CustomerID
Name 
```

和一个事务表

```
Transaction
------------
BuyerID
SellerID
Amount 
```

其中 BuyerID 和 SellerID 都是对 Customer 表的 CustomerID 列的外键引用。

在我当前（类似）的情况下，事务表很大（5 亿行），尽管客户表很小（2000 行）。但是，从 Customer 表中删除一行需要很长时间，因为数据库必须扫描 Transaction 表以查看 Customer 是否有任何引用 Transactions（实际上，它必须执行两次 - 一次检查 BuyerID一个用于卖方 ID）。Transaction 表未在 BuyerID 或 SellerID 上编制索引（真实表在买方、卖方和其他一些列的组合上编制索引）

我知道我可以删除所有外键约束，删除行，然后重新添加约束。这会比仅`DELETE FROM`启用外键更快吗？有没有其他方法可以加快我缺少的删除操作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-03T20:31:01.653

你应该索引`BuyerID`并`SellerID`在你的`Transaction`表中......

要进一步解释为什么应该索引外键，[请阅读 Kimberly Tripp 关于该主题的优秀文章](http://sqlskills.com/BLOGS/KIMBERLY/post/When-did-SQL-Server-stop-putting-indexes-on-Foreign-Key-columns.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-03T20:29:59.293

继续添加额外的两个索引。不理会约束。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-03T20:40:29.123

一般来说，如果我有客户的销售交易，我不想删除它们或客户。这正是您具有外键约束的原因，因此您不会删除客户。那只是弄乱了您的财务报告（为什么 2011 年的销售额突然下降了 20%，哦，我们从数据库中删除了一些记录，这不是一个好的对话。）。在这种情况下，您想要的是让客户不活动而不是通常删除它们。

鉴于 Ryan 说这是一个开发中的数据库，而不是生产中的数据库，其他人可能会同时向其中输入数据，我会删除 FK，将我打算删除的客户 ID 放入工作表中，然后执行对父表和所有子表的删除。这样你可以根据需要从5亿行的表中批量删除。然后，当你完成后，重新打开 FK。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-03T20:27:32.717

如果我正在处理 5 亿行，我要做的第一件事是 - 删除外键引用并集中存储过程之类的地方来控制删除功能。

# visual-studio - visual studio swprintf 使我所有的 %s 格式化程序都需要 wchar_t * 而不是 char *

> ID：10000723
> 
> 赞同：5
> 
> 时间：2012-04-03T20:17:22.630
> 
> 标签：visual-studio, printf

我有一个多平台项目，在 mac 上编译得很好，但在 windows 上，我所有带有 %s 的 swprintf 调用都在寻找 wchar_t 而不是 char * im 传递它。结果 M$ 认为让 %s 在宽字符函数中代表 char * 以外的东西会很有趣...... [http://msdn.microsoft.com/en-us/library/hf4y5e3w.aspx](http://msdn.microsoft.com/en-us/library/hf4y5e3w.aspx)

无论如何，我正在寻找一种创造性的编码技巧，这比在每个宽字符串调用周围都放置 ifdef else 更好

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-03T20:54:45.763

更新：VS 2015 CTP6 恢复了更改，微软再次采取了与标准不同的行为。

* * *

[Visual Studio 14 CTP1](http://blogs.msdn.com/b/vcblog/archive/2014/06/18/crt-features-fixes-and-breaking-changes-in-visual-studio-14-ctp1.aspx) ~~及更高版本~~将始终`%s`视为窄字符串 ( `char*`)，除非您定义`_CRT_STDIO_LEGACY_WIDE_SPECIFIERS`. 它还添加了 T 长度修饰符扩展，它映射到 MS 所说的“自然”宽度。对于`sprintf` `%Ts`is`char*`和 for `swprintf` `%Ts`is `wchar_t*`。

* * *

在 Visual Studio 13 和更早版本中， `%s`/`%c`映射到函数/格式字符串的自然宽度，并且`%S`/`%C`映射到与自然相反的宽度：

```
printf("%c %C %s %S\n", 'a', L'B', "cd", L"EF");
wprintf(L"%c %C %s %S\n", L'a', 'B', L"cd", "EF"); 
```

您还可以通过使用长度修饰符来强制指定宽度：`%ls`, `%lc`, `%ws`and `%wc`always 表示`wchar_t`and`%hs`和`%hc`are always `char`。[（此处](http://msdn.microsoft.com/en-us/library/aa272936%28v=vs.60%29.aspx)记录了 VS2003和[此处](http://msdn.microsoft.com/en-us/library/tcxf1dw6%28v=vs.71%29.aspx)的VC6 （不确定以及何时真正添加）） `%ws`

在 Win9x 与 WinNT 的时代，映射`%s`到函数的自然宽度非常方便，通过使用[`tchar.h`标头](http://msdn.microsoft.com/en-us/library/c426s321.aspx)，您可以从同一源构建窄版本和宽版本。何时将映射中`_UNICODE`的函数定义为`tchar.h`宽函数 and `TCHAR`is `wchar_t`，否则使用窄函数 and `TCHAR`is `char`：

```
_tprintf(_T("%c %s\n"), _T('a'), _T("Bcd")); 
```

Windows SDK 头文件和其中存在的少数格式函数（wsprintf、wvsprintf、wnsprintf 和 wvnsprintf）使用了类似的约定，但它们由`UNICODE`and`TEXT`而不是`_UNICODE`and `_T`/控制`_TEXT`。

如果您想支持较旧的 Windows 编译器，您可能有 3 个选择来使多平台项目在 Windows 上运行：

**1)**在 Windows 上编译为窄字符串项目，这可能不是一个好主意，在您的情况下，swprintf 仍会将 %s 视为 wchar_t*。

**2)**使用类似于 inttypes.h 格式字符串工作方式的自定义定义：

```
#ifdef _WIN32
#define PRIs "s"
#define WPRIs L"hs"
#else
#define PRIs "s"
#define WPRIs L"s" 
#endif
printf("%" PRIs " World\n", "Hello");
wprintf(L"%" WPRIs L" World\n", "Hello"); 
```

**3)**创建您自己的自定义版本的 swprintf 并将其与 Visual Studio 13 及更早版本一起使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-03T20:25:31.237

Use the `%ls` format which always means `wchar_t*`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-11-22T00:36:42.877

您可以使用“%Ts”格式说明符，也可以定义_CRT_STDIO_LEGACY_WIDE_SPECIFIERS=1。

读这个：

[http://blogs.msdn.com/b/vcblog/archive/2014/06/18/crt-features-fixes-and-break-changes-in-visual-studio-14-ctp1.aspx](http://blogs.msdn.com/b/vcblog/archive/2014/06/18/crt-features-fixes-and-breaking-changes-in-visual-studio-14-ctp1.aspx)

# php - 在 Lithium 中调用 MySQL 函数

> ID：10000727
> 
> 赞同：3
> 
> 时间：2012-04-03T20:17:35.683
> 
> 标签：php, mysql, crud, lithium

如何在[Lithium Framework 的](http://www.lithify.me/)CRUD中调用 MySQL 函数（如**GeomFromText()**或**SELECT AS**） ？使用*database->read()*很不方便（我经常更改数据库列）并且将函数包含在变量的值中只会被转义。

 ** * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-03T22:07:41.343

您是否尝试将功能放在字段选项中？

例如，我这样做：

```
Model::first(array(
    'fields' => 'max(id)'
)); 
```

为了澄清，在您的查询中，试试这个（我没有测试过这个）：

```
Model::first(array(
     'fields' => array('field1 as myField', 'GeomFromText("POINT(x y)") as geom')
)); 
```*

# php - Facebook Auth 对话框 - 调整显示的文本

> ID：10000728
> 
> 赞同：0
> 
> 时间：2012-04-03T20:17:36.590
> 
> 标签：php, facebook, api, authentication

只是想知道是否有人可以指出我如何在 Facebook Auth Dialog 上更改某些文本的正确方向。我附上了我希望更改的信息的[屏幕截图](http://i.stack.imgur.com/X3mcm.png)，我知道这是可能的，因为我已经在 Pinterest 应用程序等应用程序上看到了它。

似乎无法在任何地方看到突出显示的部分！[https://developers.facebook.com/docs/opengraph/authentication/](https://developers.facebook.com/docs/opengraph/authentication/)

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-03T20:44:20.463

Auth Dialog 使用 iFrame/单独的窗口，因此无法操作（设计方面）。

如果您只是更改权限和文本等，请在此处使用应用设置和身份验证设置：

[https://developers.facebook.com/apps](https://developers.facebook.com/apps)

如果您真的想重新设计屏幕，那么您唯一的选择是将 Facebook iFrame 嵌入到您的内容之上并使其透明（不是好的做法）。出于多种原因，Auth 对话框必须托管在 Facebook 的服务器上，因此我确信如果没有丑陋的变通方法，这将无法完成。

**更新** 您似乎想更改应用程序请求的权限。使用 HTML 作为登录按钮非常容易。只需将其添加到您的元素中：

```
scope="user_about_me,publish_actions...(any other permissions you want)" 
```

但是，我担心您可能想要更进一步并实际显示如下内容：

> 这个应用程序分享你跑过的路线、你跑过的循环和 Facebook 上的其他活动

尽管使用 Open Graph 添加“动作”很容易实现，但您不能简单地写出文本。它会根据您的操作为您生成它。

**这是你想要的？如果是这样，我将更详细地解释如何实现它**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T08:30:07.797

您可以从 Facebook 上的应用设置更改对话框上的副本。设置-> 身份验证对话框。

# php - 数组驱动我循环（y）

> ID：10000732
> 
> 赞同：0
> 
> 时间：2012-04-03T20:17:46.217
> 
> 标签：php, arrays, loops

请原谅我标题中的双关语（呵呵），但这真的让我发疯了！这是我的代码：

```
for ($i=0;$i < $a;$i++){

    $total = (array)$orders -> Total -> Line[$i];

    echo '<pre>';
    print_r($total);
    echo '</pre>';
} 
```

...它输出以下内容：

```
Array
(
    [@attributes] => Array
        (
            [type] => Subtotal
            [name] => Subtotal
        )

    [0] => 299.99
)

Array
(
    [@attributes] => Array
        (
            [type] => Shipping
            [name] => Shipping
        )

    [0] => 13.36
)

Array
(
    [@attributes] => Array
        (
            [type] => Tax
            [name] => Tax
        )

    [0] => 0.00
)

Array
(
    [@attributes] => Array
        (
            [type] => GiftCertificate
            [name] => Gift certificate discount (117943:@CAC7HXPXFUNNJ3MTGC:63.35 117372:@DK9T9TMTCTCTUWF9GC:250.00)
        )

    [0] => -313.35
)

Array
(
    [@attributes] => Array
        (
            [type] => Total
            [name] => Total
        )

    [0] => 0.00
) 
```

我的问题是：如何将每个美元金额 [0] 保存到根据数组 ['type'] 命名的相应变量中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-03T20:22:58.163

而不是一个变量（可以用变量变量来完成），我建议将它们放入一个数组中，由属性`$prices`键控。`type`

```
$prices = array();
for ($i=0;$i < $a;$i++){

    $total = (array)$orders -> Total -> Line[$i];

    echo '<pre>';
    print_r($total);
    echo '</pre>';

    // Append the price to an array using its type attribute as the 
    // new array key
    $prices[$total['@attributes']['type']] = $total[0];
} 
```

当然，未经测试，但我相信它会完成这项工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-03T20:22:51.013

可能是这样的？

```
$total_amount_by_type = array();
for ($i=0;$i < $a;$i++){

    $total = (array)$orders -> Total -> Line[$i];

    $total_amount_by_type[$total->type] = $total[0]

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-03T20:27:52.853

您是否正在寻找这样的[东西](http://php.net/manual/en/language.variables.variable.php)：

```
for ($i=0;$i < $a;$i++){
    $total = (array)$orders -> Total -> Line[$i];

    // will create variables $Tax, $GiftCertificate etc
    ${$total['@attributes']['type']} = $total[0];

    echo '<pre>';
    print_r($total);
    echo '</pre>';
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-03T20:21:59.197

`$var[] = array('type' => $total['@attributes']['type'], 'amount' => $total[0])`

# mysql - MySQL为什么在插入时我的自动增量不是从1开始？

> ID：10000736
> 
> 赞同：4
> 
> 时间：2012-04-03T20:17:57.607
> 
> 标签：mysql, insert, auto-increment

为什么当我使用 jdbc 插入我的数据库时，我的表 auto_increments 会被抬高。

填充完全空表的示例：

**狗桌**

```
DogId DogName
3     Woofer
4     Kujo
5     Spike 
```

**所有者表**

```
OwnerId DogID OwnerName
6       3     George
7       4     John
8       5     Sam 
```

期望的结果

**狗桌**

```
DogId DogName
1     Woofer
2     Kujo
3     Spike 
```

**所有者表**

```
OwnerId DogID OwnerName
1       1     George
2       2     John
3       3     Sam 
```

**实际代码：**

```
 public void insertStuff(Something d)
  {
    Connection con = null;

    try
    {
      Class.forName("com.mysql.jdbc.Driver");
      con = (Connection) DriverManager.getConnection(
          "jdbc:mysql://" + this.getServer() + "/" + this.getDatabase(), user,
          password);
      con.setAutoCommit(false);

      Statement s1 = (Statement) con.createStatement();
      s1.executeUpdate("INSERT IGNORE INTO DOG (DOG_NAME) VALUES(\""
          + d.getDogName() + "\")");

      Statement s2 = (Statement) con.createStatement();
      s2.executeUpdate("INSERT IGNORE INTO OWNER (DOG_ID,OWNER_TITLE) VALUES ("
          + "(SELECT DOG_ID FROM DEVICE WHERE DOG_NAME =\""
          + d.getDogName()
          + "\"),\"" + d.getOWNER() + "\")");

      Statement s3 = (Statement) con.createStatement();
      s3.executeUpdate("INSERT IGNORE INTO KENNEL " + "("
          + "KENNEL_NAME,+ "OWNER_ID) " + "VALUES " + "( \""
          + d.getKennelName()
          + "\","
          + "\""
          + ","
          + "(SELECT OWNER_ID FROM OWNER WHERE OWNER_TITLE=\""
          + d.getOWNER() + "\")" + ")");

      }

      con.commit();

    }
    catch (Exception e)
    {
      if (con != null)
        try
        {
          con.rollback();
        }
        catch (SQLException e1)
        {
          // TODO Auto-generated catch block
          e1.printStackTrace();
        }

      e.printStackTrace();
    }
    finally
    {
      if (con != null)
        try
        {
          con.close();
        }
        catch (SQLException e)
        {
          // TODO Auto-generated catch block
          e.printStackTrace();
        }
    }
  } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-03T20:24:34.210

在事务中插入一行，然后退出事务也会影响自动增量值。

您始终可以`auto_increment`直接重置 mysql 上的值：

```
alter table <tablename> auto_increment = <some_number>; 
```

但老实说，这有什么关系？这些值必须是唯一的，但它们不应指示顺序。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-01-28T06:41:14.830

```
ALTER TABLE Owner AUTO_INCREMENT = 1; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-03T20:26:04.163

Only two scenarios I know about are:

(1) some records have been deleted

(2) there is some trigger on table that modify such id

Please note that even you made fresh inserts to empty table, if there were previously some rows, emptying table don't reset auto-increment ID counter and it continues on order from last issued number, not from the number of actual records in table...

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-03T20:21:33.843

很可能您以前从 Dog/Owner 表中删除了增加自动增量数的行。您需要重置它（或者只是对这些表执行 DROP/CREATE 并重新插入数据）：

```
ALTER TABLE Dog AUTO_INCREMENT = 1;
ALTER TABLE Owner AUTO_INCREMENT = 1; 
```

另一种实现相同目的的方法是运行 truncate：

```
TRUNCATE Dog;
TRUNCATE OWNER; 
```

这将删除数据并重置索引。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-06-11T07:26:32.173

AUTO_INCREMENT 变量是新插入记录的 id。如果您插入了 10 条记录，AUTO_INCREMENT 将设置为 11。现在，如果您从表中删除所有记录并尝试插入新记录，它将使用 AUTO_INCREMENT 值。所以新的 id 将是 11 。您可以通过更改表来更新它

```
ALTER TABLE <tablename> AUTO_INCREMENT = 1; 
```

# android - 我应该使用什么应用内广告框架？

> ID：10000739
> 
> 赞同：0
> 
> 时间：2012-04-03T20:18:22.673
> 
> 标签：android, admob, adsense, ads, mopub

我对在我的 Android 应用中使用什么应用内广告模型感到有点困惑。我用谷歌搜索过，搜索过 stackoverflow，但没有明确的答案。似乎有一些解决方案，但 AdSense、AdMob 第一代和第二代似乎最受欢迎。尽管我对其他解决方案持开放态度，但有知识的人能否解释它们之间的区别以及何时使用其中一种。为了记录，我正在开发一个带有流式视频的应用程序。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-03T20:25:26.447

[MoPub](http://www.mopub.com/ "Mopub") serves ads and also aggregates and serves ads from other advertisers, and I've had good fill rates and stability with them.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T23:43:50.070

Admob 和 Adsense 都是不错的选择，具体取决于您要做什么。Admob 是一个移动网络，Adsense 与 Digital 合作。但是，我听说我们的许多发布商抱怨填充率和平均有效每千次展示费用（反之亦然）低，以及发布商支持不佳。我会推荐Tapit。在填充率 (90%) 和良好的 eCPM 方面，我们已经看到了很好的结果。我们的运作方式与 Admob 非常相似，但我们以提供出色的支持以及与高质量的广告商合作而自豪。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T15:07:31.933

我目前正在使用我在 Google、AdMob 和 AirPush SDK 系统上发布的应用程序。

我可以说 AdMob 是基于应用程序内部的横幅，您可以单击此横幅仅运行您的应用程序，而 AirPush 基于不同的广告商技术、推送通知、SmartWall 和图标推送。

AirPush 是一个侵入性系统，因为即使您的应用程序没有运行，您也会在您的家庭桌面上收到通知、图标链接。

无论如何，我更喜欢 AirPush，因为它具有高填充率和高 eCPM ..为您翻译：您比 AdMob 获得更多的钱（低填充率和平均 eCPM）

即使有些用户不喜欢这种方法，AirPush 系统和支持也非常专业。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-22T16:47:22.713

如果它是游戏或冗长的视频，我建议在多个广告网络之间交替。AdMob 仍然是最好的。没有其他广告网络能与他们的填充率或 eCPM 相匹配。但我觉得 AdMob 在一个阶段后会限制 eCPM。所以我目前正在尝试整合多个广告 notworks 在每 30 秒后一个接一个地显示在同一个地方。几天后将发布结果。

# java - BCrypt 在应用引擎应用程序中非常慢

> ID：10000740
> 
> 赞同：4
> 
> 时间：2012-04-03T20:18:26.313
> 
> 标签：java, performance, google-app-engine, permissions, classloader

我正在使用 Eclipse 开发 GWT/app 引擎应用程序。从 1.6.3 升级到应用引擎 1.6.4 后出现以下问题。升级后，我的应用程序根本无法工作。不幸的是，我删除了旧的应用引擎插件，所以我无法回滚到 1.6.3。经过 2 小时的头撞墙后，我决定重新创建我的 Eclipse 项目。该项目再次运行，除了以下异常：

我正在使用 BCrypt 来实现密码的单向哈希编码。在昨天之前，这工作得很好，密码编码和检查发生得非常快——可能在几毫秒内。现在这些操作大约需要 2 分钟！使用调试器，我暂停了应用程序，看看我是否能弄清楚发生了什么。每次我暂停时，我都会得到一个堆栈跟踪，如下所示：

```
 Thread [798744730@qtp-2080190228-3] (Suspended) 
    Class<T>.forName0(String, boolean, ClassLoader) line: not available [native method] 
    Class<T>.forName(String) line: 186  
    RuntimeHelper.checkRestricted(boolean, String, String, String) line: 63 
    Runtime.checkRestricted(boolean, String, String, String) line: 63   
    BCrypt.encipher(int[], int) line: 496   
    BCrypt.key(byte[]) line: 558    
    BCrypt.crypt_raw(byte[], byte[], int) line: 622 
    BCrypt.hashpw(String, String) line: 681 
    BCrypt.checkpw(String, String) line: 749 
```

BCrypt.encipher() 如下：（第 496 行在下面的行注释中显示）

```
private final void encipher(int lr[], int off) {
    int i, n, l = lr[off], r = lr[off + 1];

    l ^= P[0];
    for (i = 0; i <= BLOWFISH_NUM_ROUNDS - 2;) {
        // Feistel substitution on left word
        n = S[(l >> 24) & 0xff];
        n += S[0x100 | ((l >> 16) & 0xff)];
        n ^= S[0x200 | ((l >> 8) & 0xff)];
        n += S[0x300 | (l & 0xff)];
        r ^= n ^ P[++i];  //*** LINE 496 *****

        // Feistel substitution on right word
        n = S[(r >> 24) & 0xff];
        n += S[0x100 | ((r >> 16) & 0xff)];
        n ^= S[0x200 | ((r >> 8) & 0xff)];
        n += S[0x300 | (r & 0xff)];
        l ^= n ^ P[++i];
    }
    lr[off] = r ^ P[BLOWFISH_NUM_ROUNDS + 1];
    lr[off + 1] = l;
} 
```

根据我暂停调试器的时间，BCrypt 中的不同行是 Runtime.checkRestricted() 的调用者，但似乎 Runtime.checkRestricted() 被连续调用。由于这是在嵌入式循环中调用的，我认为这就是原因。然后，我开始寻找如何避免发生此 checkRestricted() 调用。没运气。

我有一个有点复杂的应用程序结构，其中包含三个 Google Web 应用程序（Eclipse 项目）。我会打电话给他们：

根据

店铺

应用程序

其中 Store 依赖于 Base，而 App 同时依赖于 Store 和 Base。我使用 Ant 任务将 Base 和 Store 项目构建到 JAR 文件中，并将它们复制到 App/war/WEB-INF/lib 文件夹。

最初，我在它自己的 Eclipse 项目中有 BCrypt，我的 ANT 任务也将 JAR 并将其复制到 App/war/WEB-INF/lib。这在过去的几个月里一直运行良好，直到现在。为了解决当前的问题，我尝试将 BCrypt 类（它只包含 1 个类）直接移动到 Base 项目中，结果相同，然后再次进入 Store 项目，结果相同。由于我的应用程序目前仅从 Store 项目调用 BCrypt 方法，我认为这两种方法都可能有效。他们在功能上做到了，但仍然需要 2 分钟才能完成一次 encipher() 调用。

从堆栈跟踪中，当我单击 Runtime 或 RuntimeHelper 时，它们会返回 Source Not Found，而我在 Google 搜索中找不到任何关于它们的信息。

问题：

为什么 BCrypt 中的每一行都要进行 checkRestricted() 调用？这似乎不正常。

更重要的是，关于如何解决这个问题的任何想法？

我不知道接下来要看什么。即使您不知道最终的解决方案，任何想法都将受到欢迎。

非常感谢。

瑞克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T09:16:42.947

我刚刚在 GAE 代码项目中创建了一张票：[http ://code.google.com/p/googleappengine/issues/detail?id=7277&thanks=7277&ts=1333530915](http://code.google.com/p/googleappengine/issues/detail?id=7277&thanks=7277&ts=1333530915)

也许，我们在那里得到了答案，因为官方教程也提供了使用 BCrypt：[http ://code.google.com/p/google-web-toolkit-incubator/wiki/LoginSecurityFAQ](http://code.google.com/p/google-web-toolkit-incubator/wiki/LoginSecurityFAQ)

Google 修复了该错误并于今天发布了新版本 (1.6.4.1)： [http ://code.google.com/p/googleappengine/downloads/detail?name=appengine-java-sdk-1.6.4.1.zip](http://code.google.com/p/googleappengine/downloads/detail?name=appengine-java-sdk-1.6.4.1.zip)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T07:45:55.460

是的。1.6.4 中有回归

请参阅[Google 应用引擎 1.6.4 在本地是否较慢？](https://stackoverflow.com/questions/10016909/is-google-app-engine-1-6-4-slower-in-local)Google 员工在 GAE SDK 上发表的评论。

# oracle-apex - 在顶点页面中保持值状态

> ID：10000751
> 
> 赞同：2
> 
> 时间：2012-04-03T20:19:15.377
> 
> 标签：oracle-apex

当我转到另一个页面并返回时，有谁知道将状态保持在顶点页面中？它不会保留在字段中输入的值，它看起来都是空的。我很感激任何人都可以提供帮助。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T14:15:54.863

你的 ApEx 版本是多少？

默认情况下，当您提交页面时，项目值会自动设置为会话状态，因此您应该在返回页面时再次找到它们。

![在此处输入图像描述](../Images/477afa7e09628c3c4de1fd670945070b.png)请注意，Firefox 在页面刷新时保留表单元素值，因此显示的值可能与真正处于会话状态的值不对应......解决方案是在页面安全属性中将*«Form Auto Complete»*属性设置为*“Off”*，或`$('#wwvFlowForm').attr('autocomplete','off');`在页面加载时使用。

如果您想在不提交页面的情况下手动将值设置为会话状态：

*   来自 PL/SQL，您可以使用`APEX_UTIL.SET_SESSION_STATE`（参见[文档](https://docs.oracle.com/en/database/oracle/application-express/18.2/aeapi/SET_SESSION_STATE-Procedure.html#GUID-ECF66FA6-91DF-4463-A7DC-EFFB3E49A5D1)）
*   从 JavaScript 中，您必须调用一个虚拟应用程序进程，例如：

> ```
> setItemInSessionState: function(p_item, p_value) {    
>       var l_get = new htmldb_Get(null,$('#pFlowId').val(),'APPLICATION_PROCESS=dummy',0);
>       l_get.add(p_item, p_value);
>       l_get.get();
> } 
> ```

*最后，您可以通过更改项目源选项卡中的“维护会话状态”*属性来选择维护每个会话或跨会话的用户的会话状态。如果您的数据很敏感，您可以为您的项目设置*«会话状态保护»*属性为*“是”*。

还有很多其他解决方案可以在页面之间保留项目值：将 URL 中的值传递到隐藏项目、顶点集合、基本数据库存储、cookie 等。

如果这不能回答您的问题，您可能会提供更多详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-03T20:22:26.810

也许您应该使用会话来保存输入，然后当客户端返回该页面时，您只需将存储的数据放入会话中。

# facebook - ShareKit2.0 打开 Facebook 手机，但无法重定向。Safari 说页面无效

> ID：10000756
> 
> 赞同：3
> 
> 时间：2012-04-03T20:19:35.083
> 
> 标签：facebook, cordova, sharekit, phonegap-plugins, ios5

我在 PhoneGap 项目中使用[ShareKit2.0](https://github.com)（不要与已失效的原始 ShareKit 混淆）。我已成功发送推文，但 Facebook 共享无法正常工作。

当窗口打开并选择“Facebook”按钮时，浏览器将打开以登录 facebook 移动网站。然后它会请求应用程序的授权。然后我点击“ok”，出现错误：

无法打开页面 Safari 无法打开该页面，因为该页面无效。

该页面的 URL 是： [https ://m.facebook.com/dialog/permissions.request?refid=0](https://m.facebook.com/dialog/permissions.request?refid=0)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T17:44:57.030

You need to add a uri scheme for your app, in your apps Info.plist file, the file will be at the root of your application and called YOURAPPNAME-Info.plist you need to add the following

```
<array>
<dict>
    <key>CFBundleURLName</key>
    <string></string>
    <key>CFBundleURLSchemes</key>
    <array>
        <string>fbYOURFBAPPID</string>
        <string>app://flickr</string>
    </array>
</dict>
</array> 
```

Replacing YOURFBAPPID with whatever your facebook APP id is.

# amazon-ec2 - 我如何知道 Amazon EC2 操作何时完成？

> ID：10000757
> 
> 赞同：6
> 
> 时间：2012-04-03T20:19:43.047
> 
> 标签：amazon-ec2, amazon-web-services, ec2-ami

**除了轮询之外**，我如何知道长时间运行的 Amazon EC2 操作何时完成？例如，使用`CreateImage`API 函数可能需要几分钟时间。

现在我正在这样做：

```
// MAKE THE API CALL
var createRequest = new CreateImageRequest().WithInstanceId("i-123456").WithName("MyNewAMI");
var createResponse = myAmazonEC2Client.CreateImage(createRequest);
var imageId = createResponse.CreateImageResult.ImageId;

// ICKY POLLING CODE
bool isImaging = true;
while (isImaging)
{
    var describeRequest = new DescribeImagesRequest().WithImageId(imageId);
    var describeResponse = myAmazonEC2Client.DescribeImages(describeRequest);
    isImaging = describeResponse.DescribeImagesResult.Image.Single().ImageState == "pending";
    Thread.Sleep(10000); // sleep for 10 seconds
}

// CreateImage IS COMPLETE; MOVE ON WITH OUR WORK 
```

我讨厌这个。打电话后`CreateImage`，我想以某种方式得到通知，一切都完成了，然后继续前进。这可能吗？在此示例中，我使用的是 AWS .NET SDK，但我并不是专门寻找 C# 解决方案。

**更新：**交叉发布到[AWS 论坛](https://forums.aws.amazon.com/thread.jspa?threadID=91178)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-03T21:02:42.327

亚马逊中的一些事件可以配置为向 SNS 主题发送通知。例如，当使用 Auto Scaling 时，您可以在服务器启动和终止时收到通知。据我所知，没有办法为 CreateImage 等其他服务触发这些通知。我过去一直在寻找这种类型的功能，但没有运气。我试图这样做是为了创建一个以特定顺序启动服务器的脚本。我最后只是轮询他们的 API，因为我找不到任何方法来注册这些事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T22:06:11.503

[James Hunter Ross](https://forums.aws.amazon.com/profile.jspa?userID=134337)[在 AWS 论坛上](https://forums.aws.amazon.com/message.jspa?messageID=333652#333652)回答了这个问题，如下所示：

> 轮询就是了。也就是说，既然你已经启动了一个 C# 程序，为什么不让它产生一个轮询进程，按照你的意愿通知你呢？在某些方面，您似乎快完成了。
> 
> （当然，如果 AWS 内置了这样的功能，那就太好了。）

我无法为他找到 StackOverflow 个人资料，但如果他出现，我将对其进行编辑以表扬他。

# drupal - Drupal 7：如何导入 RSS 提要？

> ID：10000761
> 
> 赞同：2
> 
> 时间：2012-04-03T20:19:54.970
> 
> 标签：drupal, rss, drupal-7

我有一个 RSS 提要，我想将每个项目作为内容集成到其中。我已经创建了一个新的内容类型，但我确定如何导入内容。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-03T20:26:13.103

Use the [Aggregator](http://drupal.org/documentation/modules/aggregator) module to do it for you. Good luck.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-03T20:25:57.940

[Feeds module](http://drupal.org/project/feeds) will allow you to import content/create nodes from rss.

# symfony - Symfony2 Swiftmailer 不发送

> ID：10000763
> 
> 赞同：20
> 
> 时间：2012-04-03T20:20:09.273
> 
> 标签：symfony, swiftmailer

我无法使用 symfony2 和 swiftmailer 发送电子邮件。我对如何调试这个问题也有点迷茫。下面是代码。首先，我正在创建一个要显示的表单。在提交（请求-> 方法 == 发布）时，我尝试发送电子邮件。我没有收到任何错误，它把我带到了感谢页面，但是，我没有收到任何电子邮件。我已经在 prod 和 dev 上进行了测试。在开发中，我在提交后打开了分析器，它显示了 0 封电子邮件。任何帮助表示赞赏！谢谢！

```
public function contactAction(Request $request)
{
    $defaultData = array('name' => 'Name', 'email' => 'Email', 'subject' => 'Subject', 'message' => 'Message');
    $form = $this->createFormBuilder($defaultData)
        ->add('name', 'text')
        ->add('email', 'email')
        ->add('subject', 'text')
        ->add('message', 'textarea')
        ->getForm();

    if($request->getMethod() == 'POST') {
        $form->bindRequest($request);
        $data = $form->getData();
        $message = \Swift_Message::newInstance()
            ->setSubject($data['subject'])
            ->setFrom('no-reply@mysite.com')
            ->setTo('email@mysite.com')
            ->setBody($this->renderView('AdaptiveSiteBundle:Default:email.txt.twig', array('name' => $data['name'], 'message' => $data['message'])))
        ;
        $this->get('mailer')->send($message);

        return $this->redirect($this->generateUrl('thankyou'));
    } 

    return array("form" => $form->createView());
} 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-10-09T22:18:14.243

你可以发布parameters.yml吗？

还要确保禁用假脱机，以便可以立即发送电子邮件。如果您在 Swiftmailer 配置下有一个假脱机条目，请将其删除，例如：

```
快速邮件：
    运输：%mailer_transport%
    主机：%mailer_host%
    用户名：%mailer_user%
    密码：%mailer_password%
    假脱机：{类型：内存}

```

应该：

```
快速邮件：
    运输：%mailer_transport%
    主机：%mailer_host%
    用户名：%mailer_user%
    密码：%mailer_password%

```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-04-11T06:51:58.483

您可能设置了邮件假脱机设置。如果是这种情况，您需要运行：

```
php app/console swiftmailer:spool:send 
```

发送假脱机电子邮件。

查看[http://symfony.com/doc/master/cookbook/email/spool.html](http://symfony.com/doc/master/cookbook/email/spool.html)了解更多信息。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-09-19T07:28:50.690

您可以在此处找到有关如何使用 symfony2 发送电子邮件的完整过程。我刚刚测试过它似乎工作正常。

~~[http://tutorial.symblog.co.uk/docs/validators-and-forms.html#sending-the-email](http://tutorial.symblog.co.uk/docs/validators-and-forms.html#sending-the-email)~~

[http://symfony.com/doc/current/email.html](http://symfony.com/doc/current/email.html)

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-04-05T12:32:47.453

我经常在 config_dev.yml 中设置以下配置，以防止在测试期间发送邮件，也许你做过同样的事情并忘记了？

如果这是在 config_dev.yml 中，请将其设置为 false：

```
swiftmailer:
  disable_delivery:  true 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2016-08-10T06:58:22.617

除了上述解决方案，我建议您从使用 swiftmailer 代码的功能中删除`die`或删除。`exit`如果您的代码正确，这将解决您的问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-06-06T16:19:41.003

我在接收带有 ovh、siwftmailer 和 fosUserBundle 的电子邮件时遇到问题，

请考虑将其添加到您的 config.yml

```
fos_user:
    from_email:
            address:        noreply@yourdomain.com
            sender_name:    yourname 
```

如果您不这样做，fos 用户包将发送带有 noreply@exemple.com 的电子邮件，并且 OVH 将其标记为垃圾邮件。

来源：[https ://github.com/FriendsOfSymfony/FOSUserBundle/blob/master/Resources/doc/emails.md](https://github.com/FriendsOfSymfony/FOSUserBundle/blob/master/Resources/doc/emails.md)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-04-28T07:55:24.240

配置.yml

```
# Swiftmailer Configuration
swiftmailer:
    transport:  smtp
    encryption: ssl
    auth_mode:  login
    host:       smtp.xx.eu
    username:   username
    password:   password 
```

控制器/动作

```
$messageObject = \Swift_Message::newInstance()
            ->setSubject('Subject')
            ->setFrom('username@xx.eu')
            ->setTo('xxx@stackoverflow.eu')
            ->setBody('message');
$this->get('mailer')->send($messageObject); 
```

# nginx - PHP-FPM + nginx 1.1.15 自定义错误页面

> ID：10000766
> 
> 赞同：1
> 
> 时间：2012-04-03T20:20:11.817
> 
> 标签：nginx, php

我有一个 PHP-FPM 配置为 nginx 1.1.15 的后端。我需要为来自 PPH-FPM 的错误自定义 40x、50x 错误页面。

例如，我从 php 脚本发送 403 标头并希望 nginx 显示自定义页面。nginx配置如下：

 `````
 error_page  403 /403.html;
    location = /403.html {
        root   html;
        allow  all;
    } 
````  `但是当我从 php 发送 403 标头时，nginx 显示它是本机的“403 Forbidden”页面，而不是我的自定义页面。

更新：对不起。我没有给出nginx的完整配置。我在 nginx 中处理 404 并将所有查询传递给单个脚本。此脚本发送 403 标头。所以 nginx 不显示自定义 403 页面。当我请求现有脚本时，绕过 nginx conf 中的 404 规则，然后返回自定义错误页面。这是我的 nginx.conf 的一部分

```
 error_page 404 = @myhandler;

    location @myhandler {
        fastcgi_pass 127.0.0.1:9000;
        fastcgi_param SCRIPT_FILENAME script.php;
        include fastcgi_params;
    }

    error_page  403 /403.html;
    location = /403.html {
        root   html;
        allow  all;
    }

    location ~ \.php$ {
        fastcgi_pass   127.0.0.1:9000;
        fastcgi_param  SCRIPT_FILENAME  $fastcgi_script_name;
        include        fastcgi_params;
    } 
```

UPD：我找到了解决方案。

```
**recursive_error_pages on;**
error_page 404 = @myhandler;

location @myhandler {
    fastcgi_pass 127.0.0.1:9000;
    fastcgi_param SCRIPT_FILENAME script.php;
    include fastcgi_params;
    **error_page  403 /403.html;**
} 
`````

# iphone - iPhone App，服务端组件，解析集成

> ID：10000774
> 
> 赞同：0
> 
> 时间：2012-04-03T20:20:48.350
> 
> 标签：iphone, ios, push-notification

这将是我的第一个具有任何复杂性的 iOS 应用程序。在我开始尝试之前，我想概述一下组件和结构以获得一些反馈。

从用户的角度来看，应用程序监控当地湖泊的水位，并在水位变化用户指定的量时接收推送通知。我认为使用 Parse 将最容易管理用户数据，我将在 Nodester 上尝试一个 Node.js 服务器端组件（我知道一些基本的 JS，并认为它是一种很好的新兴语言，可以熟悉）。这是我看到它的工作方式......

*   用户在设备上创建一个帐户并指定`lakeLevelChange`他们将收到推送通知的金额。用户的数据被推送到 Parse 的数据管理。
*   服务器端组件每天会运行这个程序 3-6 次：
    *   `currentLakeLevel`通过 HTTP 请求拉取
    *   从 Parse 中提取用户数据
    *   `currentLakeLevel`将 与指定的用户进行比较`lakeLevelChange`
    *   如果差异为 => `lakeLevelChange`，则按满足其指定条件的每个用户发送推送通知 HTTP Post 请求
*   Parse 接收 POST 请求并向 APNS 服务器发送推送通知
*   客户端收到推送通知

它实际上在输入时听起来并不复杂。这是构建此功能的正确方法吗？我错过了什么吗？非常感谢您的建议！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-03T20:39:27.610

有点逻辑问题：

> 服务器端组件每天将运行此程序 3-6 次：
> 通过 HTTP 请求拉取 currentLakeLevel。
> 从 Parse 中提取用户数据
> 将 currentLakeLevel 与用户指定的 lakeLevelChange 进行比较
> 如果差异为 => lakeLevelChange，则根据满足其指定条件的每个用户发送推送通知 HTTP Post 请求

您实际上还需要为每个用户存储最后警报的级别。否则，增量更改可能会超出用户的阈值，并且永远不会触发警报。

想象一下，如果我说我想在液位变化 6 英寸时收到警报。然后，您记录七个事件，其中水平每次上升一英寸。你从来没有观察到超过 6 英寸*的变化*，但*总变化*超过了我的通知阈值，我可能是想让你通知我。

因此，当您触发警报时，您需要存储当前级别，然后在每个更改事件上，将其与*您通知他们*的最后一个级别进行比较。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-03T20:36:00.677

你错过了不愉快的道路。这是程序员从不走的路，而程序总是在走。没有什么事情会按照我们的计划进行，所以我们必须为失败做好计划。问问自己这样的问题，“当服务器因维护或中断而断电并错过其 3-6 次预定运行中的一个或全部时会发生什么？” “是否应该将错过的处决排队并发送一堆错过的通知？” “当用户更改了他们指定为 lakeLevelChange 的内容但收音机已关闭和/或服务器请求无法完成时会发生什么？” “当 Parse 获取垃圾数据或产生垃圾日期时会发生什么？” 只询问其中的几个将引导您走向最佳设计。

# javascript - 浏览器之间的javascript鼠标事件兼容性问题

> ID：10000775
> 
> 赞同：1
> 
> 时间：2012-04-03T20:20:54.890
> 
> 标签：javascript, html, mouseevent, cross-browser

我是网络开发的新手。我有一个代码应该在单击图像时更改图像，并在释放时将图像更改回来。它还计算被点击的次数。我在 Safari 上构建和测试这段代码，我没有遇到任何问题。它在 Safari 上按预期工作。但是它在 Chrome 和 IE 上不起作用（我没有测试任何其他浏览器）。

我通常使用 HTML5 Boilerplate，但是我减少了代码以便我可以在这里显示（这个版本也不起作用）。

我已经给出了下面页面的代码。我应该怎么做才能使它在每个浏览器上都能正常工作。它在浏览器上的行为不同的原因是什么？

提前致谢

```
<!html>
<html>
<head>

      <title></title>
    <script type="text/javascript">
    var count = 0;

    function incrementCount()
    {
        count++;
        document.getElementById( "count").innerHTML = count;

    }

    function pushTheButton()
    {
        document.images("bigRedButton").src = "img/pressed.gif";
        return true;
    }

    function releaseTheButton()
    {
        document.images("bigRedButton").src = "img/unpressed.gif";
        return true;
    }
    </script>
</head>

<body>
      <div role="main">
        <p>
            <img src = "img/unpressed.gif" name="bigRedButton" onmousedown="pushTheButton()" onmouseup="releaseTheButton()" onclick="incrementCount()"/>
            </br>
            Click Count:<p id="count">0</p>
        </p>
      </div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-03T20:32:45.790

在 Chrome 中进行测试时，请记住使用其 JavaScript 控制台来监视错误。在这种情况下，它返回以下内容：

*未捕获的类型错误：对象# 的属性“图像”不是函数*

当您尝试访问 document.images("bigRedButton") 时，您的问题在第 18 行和第 24 行—— document.images 是一个数组（或者可能是一个对象），而不是一个函数。它应该是：

document.images["bigRedButton"].src

我不知道为什么它可以在 Safari 上运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-03T20:36:09.327

[http://www.w3schools.com/jsref/coll_doc_images.asp](http://www.w3schools.com/jsref/coll_doc_images.asp)

document.images 记录了一个整数索引的图像数组。可以肯定的是，您应该使用：

```
document.images[0].src = ... 
```

尽管在许多情况下也可以使用名称访问图像。

# c++ - OpenGL 3： glBindVertexArray 使 GL_ELEMENT_ARRAY_BUFFER 无效

> ID：10000776
> 
> 赞同：8
> 
> 时间：2012-04-03T20:21:13.623
> 
> 标签：c++, opengl, nvidia, opengl-3

我确信如果你通过绑定一个缓冲区`glBindBuffer()`，你可以放心地假设它保持绑定，直到目标通过另一个调用反弹`glBindBuffer()`。因此，当我发现调用`glBindVertexArray()`将绑定到 GL_ELEMENT_ARRAY 目标的缓冲区设置为 0 时，我感到非常惊讶。

这是最小的 C++ 示例代码：

```
GLuint buff;
glGenBuffers(1, &buff);
std::cout << "Buffer is " << buff << "\n";
glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, buff);
GLuint vao;
glGenVertexArrays(1, &vao);

GLint bound_buff;
glGetIntegerv(GL_ELEMENT_ARRAY_BUFFER_BINDING, &bound_buff);
std::cout << "Bound before glBindVertexArray: " << bound_buff << "\n";

glBindVertexArray(vao);    
  // ^- an implicit glBindBuffer(GL_ELEMENT_ARRAY_BUFFER,0); ?

glGetIntegerv(GL_ELEMENT_ARRAY_BUFFER_BINDING, &bound_buff);
std::cout << "Bound after glBindVertexArray: " << bound_buff << "\n"; 
```

我在初始化 OpenGL 3.2 设备上下文后立即运行此代码并获得以下输出：

```
 Buffer is 1
 Bound before glBindVertexArray: 1
 Bound after glBindVertexArray: 0 
```

另一方面，调用*不会*更改 GL_ARRAY_BUFFER。我检查了 OpenGL 3.2 规范 (2.10)`glBindVertexArray`并没有发现任何意外的副作用。

1.  这种行为是否符合规范？
2.  如果是这样，调用 to 会产生哪些其他副作用`glBindVertexArray`？
3.  这背后的原因是什么？

我在带有 296.10 WHQL 驱动程序的 Win XPx64 机器上的 nvidia 卡上对此进行了测试。使用 nvidia GT330M 在 OS X Lion 上进行的快速测试给出了相同的结果。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-07T16:09:39.613

[顶点数组对象](http://www.opengl.org/wiki/Vertex_Array_Object)封装了渲染顶点数据所需的所有状态*。因此，它们必须封装与属性（通过`glVertexAttribPointer`）、GL_ELEMENT_ARRAY_BUFFER（调用所需）等关联的缓冲区`glDrawElement*`。

> 但是，我仍然对在文档中找不到任何关于这种副作用的提及这一事实感到有些困惑。

规范清楚地解释了这一点，尽管它需要了解规范是如何工作的。

OpenGL 是一个状态的集合，这意味着所有的 OpenGL 函数（除了那些实际渲染的东西）都会修改 OpenGL 的状态。当你调用 时`glVertexAttribPointer`，这个函数在概念上修改了一些内部 OpenGL 状态。

[OpenGL 对象](http://www.opengl.org/wiki/OpenGL_Object)由它们封装的 OpenGL 状态片段定义。因此，如果一个函数修改了对象封装的状态，那么该函数修改了对象本身。绑定一个对象意味着用该对象的当前状态替换它们封装的当前状态。

ARB_vertex_array_object规范根据它们封装的状态定义 VAO [。](http://www.opengl.org/registry/specs/ARB/vertex_array_object.txt)它基本上指向 OpenGL 状态表之一并说：“VAO 就是所有这些。” 此功能的核心 3.x 版本实际上修改了状态表以使其更加清晰（行为相同，解释略有不同）：

> **OpenGL 3.3 规范，第 2.10 节：**
> 
> 生成的顶点数组对象是一个新的状态向量，包括表 6.4 和 6.5 中列出的所有状态值。

我不打算重印表 6.4 和 6.5；你可以自己查一下。但它们显然包括`GL_ELEMENT_ARRAY_BUFFER_BINDING`和各种`GL_VERTEX_ATTRIB_ARRAY_BUFFER_BIDNING`（它们是缓冲区对象）。

* 注意：VAO 不包含[`glVertexAttrib`](http://www.opengl.org/wiki/GLAPI/glVertexAttrib)函数设置的状态。如果未启用属性数组，这些可能会影响渲染。

# pyside - 单击按钮时弹出窗口

> ID：10000778
> 
> 赞同：0
> 
> 时间：2012-04-03T20:21:18.103
> 
> 标签：pyside

我想创建一个代码，它将显示一个带有按钮的窗口，单击该按钮将创建另一个带有一些字段的窗口（如 QLabel、QLineEdit、QSpinBox 等）。但是，我不知道如何创建该弹出窗口...

这是我的代码：

```
#!/usr/bin/env python
# -*- coding: utf-8 -*-

import sys                      # Needed for PySide
from PySide.QtCore import *
from PySide.QtGui import *

class Form(QDialog):
    def __init__(self, parent=None):
        super(Form, self).__init__(parent)

        # Create widgets
        self.label1 = QLabel("Label1")
        self.button_open = QPushButton("Open popup")

        self.button = QPushButton("Go!")
        self.qbtn = QPushButton('Quit')

        # Create layout and add widgets
        layout = QVBoxLayout()
        layout.addWidget(self.label1)
        layout.addWidget(self.button_open)

        # Buttons layout
        hbox_buttons = QHBoxLayout()
        hbox_buttons.addStretch(1)
        hbox_buttons.addWidget(self.button)
        hbox_buttons.addWidget(self.qbtn)

        # Main layout
        layout.addStretch(1)
        layout.addWidget(self.button_open)
        layout.addLayout(hbox_buttons)

        self.setLayout(layout)

        # Add buttons slots
        self.button_open.clicked.connect(self.popup)
        self.button.clicked.connect(self.function_runner)
        self.qbtn.clicked.connect(QCoreApplication.instance().quit)

    def popup (self, parent=__init__):
        new_win = # I wonder what should be here

if __name__ == '__main__':
    # Create the Qt Application
    app = QApplication(sys.argv)

    # Create and show the form
    form = Form()
    form.show()

    # Run the main Qt loop
    sys.exit(app.exec_()) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T17:18:16.683

我不知道这是否是最好的方法，但我可以在一夜之间弄清楚......我希望它会帮助那些陷入类似问题的人。

所以，我（简单地）为第二个窗口创建了一个单独的代码，并用

```
from subprocess import call
call("./my_2nd_window_code.py") 
```

# javascript - 更新div中href内的部分文本值

> ID：10000779
> 
> 赞同：0
> 
> 时间：2012-04-03T20:21:21.970
> 
> 标签：javascript, jquery

是否可以使用 jquery 更新下面 div 中的文本“changethis”？我认为 .html 方法在这里不够用，因为我只想更新 html 的一部分，而不是全部。

```
<div id="test">
<a title="http://stackoverflow.com" href="http://stackoverflow.com">changethis</a>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-03T20:24:15.293

```
$('#test a').html('newText'); 
```

或者

```
$('#test a').text('newText'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-03T20:23:38.133

这个

```
$("#test a").html("changed it"); 
```

将产生：

```
<div id="test">
<a title="http://stackoverflow.com" href="http://stackoverflow.com">changed it</a>
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-03T20:24:57.960

I would advise either using a second div element within the link. Or if possible select the link element itself.

The other option is to hardcode the anchor tag into your write code

```
.html("<a title='http://stackoverflow.com' href='http://stackoverflow.com'>"+newtext+"</a>"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-03T20:24:09.210

您应该能够使用 Jquery 的内置[.text() 函数](http://api.jquery.com/text/)

例如`$('#test a').text('New Text');`

# linux - 与 Wifi 断开连接时无法在 Linux 上使用 ioctl 获取 mac 地址

> ID：10000790
> 
> 赞同：1
> 
> 时间：2012-04-03T20:22:13.610
> 
> 标签：linux, mac-address, ioctl

我使用这种方法得到一个mac地址：

```
#include <sys/ioctl.h>
#include <net/if.h> 
#include <unistd.h>
#include <netinet/in.h>
#include <string.h>

int main()
{
    ifreq ifr;
    ifconf ifc;
    char buf[1024];
    int success = 0;

    int sock = socket(AF_INET, SOCK_DGRAM, IPPROTO_IP);
    if (sock == -1) { /* handle error*/ };

    ifc.ifc_len = sizeof(buf);
    ifc.ifc_buf = buf;
    if (ioctl(sock, SIOCGIFCONF, &ifc) == -1) { /* handle error */ }

    ifreq* it = ifc.ifc_req;
    const ifreq* const end = it + (ifc.ifc_len / sizeof(ifreq));

    for (; it != end; ++it) {
        strcpy(ifr.ifr_name, it->ifr_name);
        if (ioctl(sock, SIOCGIFFLAGS, &ifr) == 0) {
            if (! (ifr.ifr_flags & IFF_LOOPBACK)) { // don't count loopback
                if (ioctl(sock, SIOCGIFHWADDR, &ifr) == 0) {
                    success = 1;
                    break;
                }
            }
        }
    }

    unsigned char mac_address[6];

    if (success) memcpy(mac_address, ifr.ifr_hwaddr.sa_data, 6);
} 
```

（取自[How to get MAC address of your machine using a C program?](https://stackoverflow.com/questions/1779715/how-to-get-mac-address-of-your-machine-using-a-c-program)）

但是，当我从 Wifi 网络断开连接时，对 ioctl 的第一次调用会返回一个空列表。

你能解释一下这种行为吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T17:01:11.200

所描述的行为是由于 SIOCGIFCONF 返回已启动并正在运行的接口这一事实。

[归功于](https://stackoverflow.com/users/22985/batchyx)Batchy

# php - Facebook PHP：用户退出 Facebook 后，他们无法与其他用户一起登录我的应用程序

> ID：10000792
> 
> 赞同：3
> 
> 时间：2012-04-03T20:22:24.717
> 
> 标签：php, facebook

抱歉标题混乱，情况是这样...

1.  用户使用 Facebook 登录我的应用
2.  用户退出 facebook....其他人来到计算机...
3.  第二个用户尝试访问我的应用程序（不同的 Facebook 帐户，同一台计算机）
4.  他们不能...相反，脚本会获取前一个用户的访问令牌。

我正在使用 facebook PHP SDK。

当用户第一次尝试登录时，我执行以下操作；

```
unset($_REQUEST);
unset($_COOKIE); //don't know if both are necessary
session_destroy(); 
```

然而不知何故，新的 fb 帐户仍然被识别为最后一个帐户（我得到了以前登录的用户访问令牌，当我尝试使用它时抛出异常，因为该用户不再登录）。

我需要使用注销功能吗？我假设将用户从 facebook 中注销，这不是我想要做的，只是在我的应用程序中从一个新用户开始。

有任何想法吗？由于我正在清除所有内容，因此我真的不知道这些数据的持久性。希望它是我想念的愚蠢的东西，但我想我会问，以防有人知道任何事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T10:46:27.210

这似乎最终奏效了：

```
$fb_key = 'fbsr_'.$facebookConfig['app_id'];
setcookie($fb_key, '', time()-3600);
$facebook->destroySession(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T10:25:05.817

谢谢，但我不想让用户退出 facebook，只是退出我的应用程序。– Sabrina Gelbart 4 月 4 日 10:40

通过 $this->facebook->destroySession(); 与您的问题相矛盾 让用户退出 facebook 而不是 facebook，如果另一个用户想使用这台计算机，他们应该从他们的 facebook 帐户注销 = 新用户可以登录到您的网站。

您不希望用户的 facebook 在从您注销时从 facebook.com 注销，对吗？这会让我很沮丧

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-03T20:55:07.137

萨布丽娜

使用有效的用户访问令牌注销应该可以正常工作。这是我使用的“除非允许离线访问”

* * *

```
$user = $facebook->getUser();
$access_token = $_SESSION['fb_135669679827333_access_token'];
if ($user) {
  try {
    // Proceed knowing you have a logged in user who's authenticated.
    $user_profile = $facebook->api('/me');
  } catch (FacebookApiException $e) {
    error_log($e);
    $user = null;
  }
}
if ($user) {
  $params = array (
  access_token => ''.$access_token.''
  );
  $logoutUrl = $facebook->getLogoutUrl($params);
} else {
$params = array(
  scope => 'read_stream,publish_stream,publish_actions,read_friendlists'
  //redirect_uri => $url
  );
  $loginUrl = $facebook->getLoginUrl($params);
}; 
```

# css - 如何动态切换 div id

> ID：10000793
> 
> 赞同：0
> 
> 时间：2012-04-03T20:22:24.853
> 
> 标签：css, html, web

我有 4 个相邻的 div，每个都包含一个链接。我想动态切换“当前”的id，

例如。

```
<div name="1" id="current">
<a>
link
</a>
</div>
<div name="2">
<a>
link
</a>
</div>
<div name="3">
<a>
link
</a>
</div>
<div name="4">
<a>
link
</a>
</div> 
```

单击链接时，如何动态更改哪个是当前链接？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-03T20:27:05.303

Don't do this. Element IDs should not change based on the state of the web page. Use another attribute instead, like `class="current"`.

If you're using jQuery, which I highly recommend, you can do this as follows:

```
$('div.tab a').click(function() {
  $('div.tab').removeClass('current');
  $(this).closest('div.tab').addClass('current');
  return false;
}); 
```

To make this code work, you need to add `class="tab"` to your `<div>` elements. This is a good idea especially if you have other `<div>` elements on the page. If you do this, the current tab would then have an attribute `class="tab current"`. jQuery knows how to handle this properly.

Also, I would consider using the `id` attribute instead of the `name` attribute, and giving your `<a>` tags a `href` attribute so that browsers will show them as clickable elements. For example:

```
<div id="tab1" class="tab">
  <a href="#">tab 1</a>
</div> 
```

* * *

Here's an example of how to include this script (assuming that you have JQuery saved as a file `jquery.js` in the same directory as the HTML page):

```
<!DOCTYPE html>
<html>
  <head>
    <title>Testing jQuery</title>
    <script type="text/javascript" src="jquery.js"></script>
    <script type="text/javascript">
      $(function() {
        $('div.tab a').click(function() {
          $('div.tab').removeClass('current');
          $(this).closest('div.tab').addClass('current');
          return false;
        });
      });
    </script>
  </head>
  <body>
    <div id="tab1" class="tab current">
      <a href="#">tab1 link</a>
    </div>
    <div id="tab2" class="tab">
      <a href="#">tab2 link</a>
    </div>
    <div id="tab3" class="tab">
      <a href="#">tab3 link</a>
    </div>
    <div id="tab4" class="tab">
      <a href="#">tab4 link</a>
    </div>
  </body>
</html> 
```

A couple of notes about that:

*   Really, it's better to put your site's JavaScript in a separate file and include it with `<script type="text/javascript" src="filename.js"></script>`, but including it "inline" like I've done is fine for small projects or just playing around with stuff.

*   The `$(function() { ... });` is shorthand for `$(document).ready(function() { ... });`, which means the code inside that block will be executed as soon as the browser has finished loading the HTML document structure. For example, you don't want your JavaScript to execute before the browser has finished downloading the rest of the page.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-03T20:24:48.583

您可以更改除 id 之外的所有内容！

# c# - 如何取消 TabControl 的选择事件

> ID：10000798
> 
> 赞同：0
> 
> 时间：2012-04-03T20:22:38.477
> 
> 标签：c#, winforms, tabcontrol

我正在处理 WinForms TabControl 的取消选择事件中的选项卡更改。但是，在某些情况下，我会删除我在切换到它之前单击的选项卡。

设想

我目前有选项卡 1 和选项卡 2 我在选项卡 1 我单击选项卡 2 选项卡 1 取消选择事件从选项卡集合中删除选项卡 2 在 OnPaint 崩溃，因为它试图转到不再存在的选项卡。(ArgumentOutOfRangeException)。它在遇到选择事件之前崩溃。

我不想查看选项卡计数是否在取消选择时发生了变化，因为我只想在我将要使用的选项卡不再存在时取消。

任何帮助将不胜感激。

```
 private void TabControl_Deselecting( object sender, TabControlCancelEventArgs ) {
       DoSomeWork();
    } 
```

假设 DoSomeWork 删除了我单击的选项卡。我怎样才能知道它是否确实删除了我打算去的标签？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-03T20:50:56.327

没有复制。场景很奇怪，但我不能让它崩溃。请务必取消取消选择。

```
 private void tabControl1_Deselecting(object sender, TabControlCancelEventArgs e) {
        if (e.TabPageIndex == 0 && tabControl1.TabCount > 1) {
            tabControl1.TabPages[1].Dispose();
            e.Cancel = true;
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-03T20:29:55.247

我想到的一种可能的解决方案：

如果您确定在Select 事件`Tab1`之前引发了 Deselect 事件，我会*尝试*声明我的自定义选项卡控件并覆盖它，就像这个**伪代码**：`Tab2`*`OnPaintMethod`*

 ***```
public class MyCustomTab : TabItem
{
   ...

   protected override OnPaint(....)
   {
      if(this.Parent == null) return;

       base.Paint(...);
   }    
} 
```

清除`TabControl`您应该添加该类型的 TabItems。***

# css - css div 在 Chrome (18) 和 Firefox (11) 中对齐，但在 Safari (5.1) 中不对齐。不知道为什么

> ID：10000806
> 
> 赞同：0
> 
> 时间：2012-04-03T20:23:04.757
> 
> 标签：css, firefox, google-chrome, html, safari

在 Firefox 和 Chrome 中，“filters_area” div 在“tabs” div 下正确左对齐，与浏览器窗口的左侧对齐。然而，在 Safari 中，“filters_area” div 与“tabs” div 的右边缘左对齐。任何想法为什么这个 div 在 Safari 中的对齐方式不同？这是代码；

```
<div id="tabs" class="ui-tabs ui-widget ui-widget-content ui-corner-all">
<ul id="tab_list" class="ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all">
<li class="ui-state-default ui-corner-top ui-tabs-selected ui-state-active">
<span id="Items">Items</span>
</li>
<span id="tab_options">
<span id="help_link" href="#help">help</span>
&nbsp;|&nbsp;
<span id="myaccount">settings</span>
&nbsp;|&nbsp;
<a href="logout">log out</a>
</span>
</ul>
</div>
<div id="instructions_area">
<input id="search_box" type="text" value="Search..." name="search">
<div id="filters_area">
<span id="Everything" class="filter active_filter">On Hand</span>
</div>
</div> 
```

CSS

```
#tabs {
border      : 0px;
height      : 34px;
}

#tab_list {
border      : 0px;
display     : block;
}

#instructions_area  {
background  : #FFF url( '../images/products_top.png' ) repeat-x ;
height      : 40px;
line-height : 32px;
padding-left: 10px;
}

#filters_area {
color       : #555;
height      : 40px;
font-size   : 14px;
float       : left;
line-height : 32px;
}

#search_box {
border      : 1px solid #AAEE22;
color       : #390;
height      : 18px;
float       : right;
font-size   : 12px;
font-weight : bold;
margin      : 4px 10px 0px 0px;
width       : 175px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T21:00:31.460

我也应该在此处包含 JavaScript 代码。我最终使用 Firebug for Firefox 浏览了该站点，并取消选择了页面上每个元素的某些属性，直到我注意到一个影响 Safari 中 filters_area 部分对齐的属性。结果发现 ul id "tab_list" 从 jquery 文件中获取了 0.2em 的填充。这导致 Safari 强制 filters_area 不对齐，但对于 IE、Chrome 或 Firefox 来说不是问题。我删除了 0.2 em 填充，Safari 工作正常。感谢所有建议的修复。他们帮助阐明了最可行的解决途径。

# android - 在 MonoDroid 中隐藏软键盘

> ID：10000807
> 
> 赞同：3
> 
> 时间：2012-04-03T20:23:14.073
> 
> 标签：android, xamarin.android, android-softkeyboard

我有一个带有一堆 EditTexts 和一个按钮的 Activity。当用户单击按钮时，基于 EditTexts 输入的答案会出现在按钮的标题中。在 buttonclick 处理程序中，我将焦点更改为按钮，光标从 EditText 具有焦点的任何内容中消失，但软键盘仍保留在屏幕上。如何强制软键盘消失？

```
EditText1.ClearFocus();    
EditText2.ClearFocus();    
EditText3.ClearFocus();
calc_btn.Focusable  =   true;
calc_btn.RequestFocus(); 
```

我已经看到了几个关于如何在 Java 中执行此操作的答案，但我无法弄清楚如何将它们转换为 C#。

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-03T20:44:02.443

你可以这样做：

```
var inputManager = (InputMethodManager)GetSystemService(InputMethodService);
inputManager.HideSoftInputFromWindow(editText.WindowToken, HideSoftInputFlags.None); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T09:12:34.457

[Jon O](https://stackoverflow.com/users/429108/jon-o)上面的回答是完美的。这就是你使用它的方式。

```
Window.SetSoftInputMode(SoftInput.StateHidden); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-06T12:30:27.770

```
protected override void OnCreate (Bundle bundle)
    {
        base.OnCreate (bundle);

        SetContentView (Resource.Layout.Main);

        Button button = FindViewById<Button> (Resource.Id.button1);
        button.Click+= onClick;
        EditText es=FindViewById<EditText>(Resource.Id.editText1);
        es.EditorAction += (object sender, TextView.EditorActionEventArgs e) => 
        {

            if ( e.ActionId == Android.Views.InputMethods.ImeAction.Done )
            {
                var editText = sender as EditText;
                var inputManager = GetSystemService(InputMethodService) as InputMethodManager;
                inputManager.HideSoftInputFromWindow(editText.WindowToken, 0);
            }

        };
        EditText es1=FindViewById<EditText>(Resource.Id.editText2);
        es1.EditorAction += (object sender, TextView.EditorActionEventArgs e) => 
        {
            if ( e.ActionId == Android.Views.InputMethods.ImeAction.Done )
            {
                var editText = sender as EditText;
                var inputManager = GetSystemService(InputMethodService) as InputMethodManager;
                inputManager.HideSoftInputFromWindow(editText.WindowToken, 0);
            }
        };

    } 
```

我在上面的代码中使用了给定的方法。我不想显示两个文本框的软键盘。它不起作用，我写错了吗？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-03T20:31:54.510

这对[你](http://androidapi.xamarin.com/?link=M%3aAndroid.InputMethodServices.InputMethodService.InputMethodImpl.HideSoftInput#)有用吗？

这里似乎有一个方法：

`public override void HideSoftInput (int flags, Android.OS.ResultReceiver resultReceiver)`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-06T10:32:36.340

这是一个完全可行的解决方案：

```
using Android.Views.InputMethods;

yourEditTextObject.EditorAction += (object sender, TextView.EditorActionEventArgs e) => 
        {
            if ( e.ActionId == Android.Views.InputMethods.ImeAction.Done )
            {
                var editText = sender as EditText;
                var inputManager = GetSystemService(InputMethodService) as InputMethodManager;
                inputManager.HideSoftInputFromWindow(editText.WindowToken, 0);
            }
        }; 
```

# mysql - MySQL 错误 1248，创建正确的查询。x3 自然连接

> ID：10000809
> 
> 赞同：1
> 
> 时间：2012-04-03T20:23:28.630
> 
> 标签：mysql

我刚刚问了一个关于别名的问题，并了解到 FROM 子句中的子查询必须通过输入“AS [别名名称]”来进行别名。现在我仍然遇到同样的问题。

我正在尝试自然加入 4 个关系产品、笔记本电脑、个人电脑和打印机。

我可以做得`SELECT * FROM product NATURAL JOIN pc;`很好很容易。但我正在尝试做

```
SELECT * FROM product NATURAL JOIN pc, laptop, printer; 
```

当我尝试时，我知道这可能行不通。

所以我目前在

```
SELECT * 
FROM (
 SELECT * FROM (
   SELECT * FROM product NATURAL JOIN pc AS prod_pc
 ) AS prod_pc_lap NATURAL JOIN laptop
) NATURAL JOIN printer; 
```

但我不断收到 1248 错误。

请注意，每个关系主键都是“模型”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-03T21:16:11.017

`,`子句中的逗号`FROM`（或多或少）相当于`CROSS JOIN`. 因此，您的查询相当于：

```
SELECT * 
FROM 
    product 
  NATURAL JOIN 
    pc
  CROSS JOIN
    laptop
  CROSS JOIN 
    printer ; 
```

* * *

如果你愿意`NATURAL JOIN`，你可以拥有：

```
SELECT * 
FROM product 
  NATURAL JOIN pc
  NATURAL JOIN laptop
  NATURAL JOIN printer; 
```

以上可能会返回 0 行（除非您的产品同时是 pc、笔记本电脑和打印机）。您可以尝试替换`NATURAL JOIN`为 `NATURAL LEFT JOIN`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-03T21:09:49.840

为什么不这样：

```
SELECT p.model, COALESCE(pr.price, l.price, pc.price, 0) AS price
FROM product p
LEFT OUTER JOIN printer pr ON pr.model = p.model
LEFT OUTER JOIN laptop l ON l.model = p.model
LEFT OUTER JOIN pc ON pc.model = p.model 
```

该`COALESCE()`函数将按顺序评估每个参数并返回它看到的第一个非空值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T06:30:12.560

对于您的情况，我想内部连接也可以。无论如何，对于任何类型的连接，您都可以使用if is same`using(key)`来代替。`on tbl1.key = tbl2.key``key`

所以你的查询看起来像

```
SELECT *
FROM   product
       INNER JOIN pc
USING  (model)
       INNER JOIN laptop
USING  (model)
       INNER JOIN printer
USING  (model); 
```

# java - Android Media.insertImage 并从 sd 卡中检索图像

> ID：10000813
> 
> 赞同：0
> 
> 时间：2012-04-03T20:23:33.850
> 
> 标签：java, android

我正在尝试将位图保存到 sd 卡并使用 Media.insertImage 中返回的字符串，稍后创建位图的实例。但是重新创建它是行不通的。它正在正确保存位图，因为我可以在图库应用程序中看到它，但我无法正确获取位图路径或其他东西。任何帮助我都会非常感激。这就是我正在做的事情。

```
 Bitmap image = Bitmap.createBitmap(this.getWidth(), this.getHeight(), Bitmap.Config.RGB_565);
        this.draw(new Canvas(image));
        String s = Images.Media.insertImage(Mycontext.getContentResolver(), image, "mytitle", null); 
```

我稍后会在上面的 loc = s 应用程序中尝试重新创建它：

```
Bitmap bmp = BitmapFactory.decodeFile(loc); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-03T20:58:47.460

采用：

`Images.Media.getBitmap(Mycontext.getContentResolver(), Uri.parse(loc))`

# javascript - 用于前端 HTML 的 Neo4j

> ID：10000817
> 
> 赞同：1
> 
> 时间：2012-04-03T20:23:49.140
> 
> 标签：javascript, html, graph, neo4j, graph-databases

我一直在检查 Neo4j 和图形数据库，并且非常喜欢这个想法。我一直在想是否可以将整个网页制作成图形数据库。`<div />`例如，一个 div 标签通过事件（单击、鼠标悬停等）或组成不同的关系（如`hides`or ）与另一个标签有关系（或边缘）`deletes`。

我知道 KnockoutJS 很好，但并不是我真正想要的。我更多的是寻找将数据库转换为完全包含事件等的 HTML 页面。

这可能吗？

# c++ - 缩放到桌面特定部分的应用程序

> ID：10000818
> 
> 赞同：0
> 
> 时间：2012-04-03T20:23:53.140
> 
> 标签：c++, linux, qt, opengl, desktop

我想（主要出于教学目的）创建一个 linux 应用程序，它应该允许用户在屏幕上选择一个矩形（该区域内的任何窗口）并将其缩放到屏幕上。

我应该从哪里开始？我已经使用 C# 在 Windows 上做了类似的事情（基本上我拍摄了该区域的快照并使用 Image 控件对其进行了缩放），但在 linux 上我不知道从哪里开始。

我正在考虑将 QT 用于主窗口，也许是带有 Qt 的 openGL，但我需要有关这种方法是否正确的信息以及一些入门技巧。使用 QT 和 openGL 是一种很好的方法吗？我应该使用什么 api/功能在屏幕上绘制并复制它的特定区域（并缩放它）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T19:48:46.903

我认为使用 Qt 是一个好主意。[Qt屏幕截图示例](http://doc-snapshot.qt-project.org/4.8/desktop-screenshot.html)可能是一个好的开始。然后创建一个简单的 QApplication 来根据鼠标位置显示缩放部分应该是可行的，即使对于第一个 Qt 项目也是如此！

我真的建议您使用 QtCreator 在 linux 上进行开发，它是一个非常棒的 IDE。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-03T20:27:32.853

使用[Mono](http://www.mono-project.com/Main_Page)将您的 c# 代码移植到 Linux 怎么样？GUI 工具包有[很多选项](http://www.mono-project.com/Main_Page)，您可以重用 Windows 应用程序中的一些代码。

# javascript - Ajax回调函数导致我传递了太多未使用的参数

> ID：10000831
> 
> 赞同：1
> 
> 时间：2012-04-03T20:24:50.733
> 
> 标签：javascript, ajax

这是一个代码设计问题。

最初我是这样使用 Ajax 的：

**原始 Ajax 调用**

```
Ajax.repeatUse( ajaxSerialize( this.form_element ) + '&ajax_type=ControlSignIn', ajaxTypeRespond, this.response_element ); 
```

`ajaxTypeRespond`成功的 ajax 调用的回调函数在哪里。

问题是，我必须将所需的参数传递给回调函数，在这种情况下只有`this.response_element`. 这很尴尬，因为它实际上并没有在 ajax 调用中使用，而是简单地传递给回调函数的调用。

此外，随着功能的增长，此参数列表会不断增长。

我想要做的只是返回 responseText，然后将所需的参数组合成一个像这样的新函数调用。

**需要 Ajax 调用**

```
var server_response_text = AjaxNew.use( ajaxSerialize( this.form_element ) + '&ajax_type=ControlSignIn' );
ajaxType( server_response_text, this.response_element, 'respond' ); 
```

现在的问题是， server_response_text 没有定义，因为它不是同步函数（ Ajax ）。有没有办法等到设置好后再打电话`ajaxType`

我有 IE 10230 错误的循环..它与这个问题无关..但我发现这个例子很难删除。下面是我的带有循环的 Ajax 函数。

**Ajax 函数**

```
var Ajax = function()
{
};

Ajax.create = function()
{
    var request;
    try
    {
        request = new XMLHttpRequest();
    }
    catch( error )
    {
        try 
        {
            request = new ActiveXObject( "Msxml2.XMLHTTP" );
        }
        catch( error )
        {
            try
            {
                request = new ActiveXObject( "Microsoft.XMLHTTP" );
            }
            catch( error )
            {
                request = false;
            }
        }
    }
    return request;
};

Ajax.use = function( param, ajax_func, element )
{
    var object = Ajax.create();
    object.open( "POST", CONSTANT.GATEWAY, true );
    object.setRequestHeader( "Content-type", "application/x-www-form-urlencoded" );
    object.setRequestHeader( "Content-length", param.length );
    object.setRequestHeader( "Connection", "close" );
    object.onreadystatechange = function()
    {
        if( this.readyState === 4 )
        {
            if( this.status === 200 )
            {
                ajax_func( this.responseText, element );
                return true;
            }
            else
            {
                Ajax.repeatUse( ajax_func, element );
                return false;
            }
        }
    };
    object.send( param );
    return true;
};

Ajax.repeatUse = function( param, ajax_func, element )
{
    var state = false,
        count = 1;
    while( state === false && count <= 5 )
    {
        state = Ajax.use( param, ajax_func, element );
        if( count !== 1 )
        {
            alert( 'Ajax Object Use Failed ');
        }
        count++;
    }
    return state;
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-03T21:22:30.087

你能把`element`参数组合在一个闭包中吗？因此，您*不会*同时传递`responseText`和传递`element`给回调，而是预先将元素[*关闭*](http://en.wikipedia.org/wiki/Closure_%28computer_science%29)到函数，然后将其传递。

所以你的功能没有通过`element`：

```
Ajax.use = function( param, ajax_func ) {
    ...
            if( this.status === 200 )
            {
                ajax_func( this.responseText );
                return true;
            }
            else
            {
                Ajax.repeatUse( param, ajax_func );
                return false;
            }
        }
    };
    ...
};

Ajax.repeatUse = function( param, ajax_func ) {
    ...
        state = Ajax.use( param, ajax_func );
    ...
}; 
```

并使用：

```
function createCallback (element, callback) {
    return function (responseText) {
        // Here you can use both element and responseText
        // What we do is call the 'original' callback,
        // with both element and responseText
        callback(responseText, element);
    };
}

var data = ajaxSerialize( this.form_element ) + '&ajax_type=ControlSignIn';

Ajax.repeatUse( data, createCallback (this.response_element, ajaxTypeRespond) ); 
```

您可以通过简单地将更多参数传递给`createCallback()`.

# javascript - nodejs ExpressJS routes only working for index

> ID：10000837
> 
> 赞同：12
> 
> 时间：2012-04-03T20:24:59.207
> 
> 标签：javascript, node.js, express

I have routes in separate folder for expressjs. The setup is working fine for the 'index' page, but not for any additional routes.

This is my index.js, inside my routes folder.

```
 module.exports = function(db) {

    return {
        index: function(req, res, next) {
            res.send('index');
        }
    }
} 
```

This is my join.js, inside my routes folder.

```
 module.exports = function(db) {

    return {
        join: function(req, res, next) {
            res.send('join');
        }
    }
} 
```

In my app.js, I define my routes like this:

```
 var routes = require('./routes')(db);
          app.get('/', routes.index);
          app.get('/join', routes.join); 
```

When I go to `http://localhost:3000` but when I go to `http://localhost:3000/join` i get `Cannot GET /join`

If I define my route for join like this:

```
 app.get('/join', function(req, res){
     res.send('join 2');
 }); 
```

This works.

Any idea what I'm doing wrong here?

Thank you!

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-10T21:12:20.597

我遇到了类似的问题，但后来想起这都是“只是 javascript”，并且能够混淆答案。

如果你想在多个文件中定义你的路由（而不是将它们全部塞进一个 routes/index.js 文件），你可以用一种 hackish 的方式构建路由对象（如下所示）：

```
var express = require('express')
  , routes = {
       index: require('./routes').index
     , events: require('./routes/events.js').events
  }
  , hbs = require('hbs'); 
```

注意：你*不需要*express 和 hbs 定义（第一行和最后一行），我只是把它放在那里给你一点上下文。此代码片段直接来自我的 app.js 文件的顶部。

注意`.index`和`.events`链接到`require()`函数调用。那是关键。我的 events.js 文件只有一个导出（事件）：

```
exports.events = function(req, res){
  console.log('in events');
  res.render('events', { events: events, title: "EVENTS" });
  console.log('events done');
}; 
```

由于该`require()`函数本质上是抓取一个文件并需要（导入）任何非私有变量（即附加到特殊`exports`对象的变量）并将它们公开给包含`require()`调用的文件，所以我可以只抓取特定的函数我'我从我在通话中包含的文件中`require()`要求。如果我在所需文件中定义了多个导出，我想我可以像这样抓住它们（尚未测试）：

```
routes = {
    index: require('./routes').index
  , events: require('./routes/events.js').events
  , favorites: require('./routes/events.js').favorites
  , upcoming: require('./routes/events.js').upcoming
} 
```

我怀疑如果他们阅读您的代码，这会让拥有一堆 nodeJS 或 MVC 的人经历动脉瘤（我打赌它会包含相同的文件 3 次，但我不太确定）。也许最好这样做：

```
routes = {
    index: require('./routes').index
  , events: require('./routes/events.js').events
  , favorites: require('./routes/favorites.js').favorites
  , upcoming: require('./routes/upcoming.js').upcoming
} 
```

否则，为什么不把它们全部放在索引中呢？不过不太确定，这只是我使用 Node 及其任何相关技术的第二天......

如果您在 var 声明之后立即抛出 console.log 语句，也可能会对您有所帮助：

```
console.log(routes); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-21T18:09:27.997

routes/index.js 文件有效而您的 routes/join.js 文件无效的原因是 Node 的模块加载规则。查看[模块/文件夹的文档作为模块](http://nodejs.org/api/modules.html?#modules_folders_as_modules)

它说它将尝试按顺序加载这些文件。`package.json`, `index.js`, `index.node`.

您可以通过在目录中创建 package.json 文件来更改它加载的文件。将`main`属性设置为新文件的名称。

如何使路线以您想要的方式工作的一个例子是[另一个问题](https://stackoverflow.com/a/8871101/136584)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-03T18:46:06.393

如果你只是说

```
var routes = require('./routes') 
```

默认情况下，节点会开始寻找索引文件（无论是 index.js 还是 index.node）。如果你想使用你的加入文件，你需要明确地说出来：

```
var join = require('./routes/join') 
```

现在我认为 join.join 应该可以工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-04T07:39:35.830

我测试了一个类似的场景，它对我有用。

我猜这个错误可能在你的 routes.js 文件中。你可能正在做：

```
routes.index = require('./index')(db);
routes.join = require('./join')(db); 
```

也许你忘记调用for的方法`join`，只是在做`require(./join)`。只是一个猜测。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-09-06T19:42:59.937

有类似的问题。

只有我的“/”路线有效。当尝试创建“/about”时，我会收到 404 错误。

结果当我使用 express-generator 时它写道：

```
app.use('/about', ...etc ) 
```

相反，它应该是：

```
app.all('/about', ...etc ) 
```

我知道这不是完全相同的问题，但这适用于那些发现自己在这里寻找与“唯一索引有效......”问题相同的问题的流浪者。

# sql - How to separate date and time from a datetime?

> ID：10000839
> 
> 赞同：1
> 
> 时间：2012-04-03T20:25:08.570
> 
> 标签：sql, sql-server

I have a table with a datetime record. I need to select the record using date or time.

Let's say that I have this format `1/1/2001 13:33:00` in the database

My question is: If I enter the date, the time or both, I should obtain the rows that have either same date or the same time. **How can I achieve this**?

The convert function `CONVERT(VARCHAR(10), Travel.Travel_DateTime, 110)` returns the dates if their time is like the default `00:00:00`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-03T20:28:02.057

（请注意，我假设 MySQL）

只需使用[DATE](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_date)和[TIME](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_time)函数：

```
SELECT blah FROM tbl WHERE DATE(some_datetime_field) = '2012-04-02'; 
```

这将选择任何行，使得 some_datetime_field 的日期部分是 2012 年 4 月 4 日。

同样的想法也适用于 TIME：

```
SELECT blah FROM tbl WHERE TIME(some_datetime_field) = '14:30:00'; 
```

因此，要获取日期为 2012 年 4 月 5 日或时间为下午 2:30 的所有行，只需将两者结合起来：

```
 SELECT blah FROM tbl WHERE DATE(some_datetime_field) = '2012-04-02' OR TIME(some_datetime_field) = '14:30:00'; 
```

**- -编辑 - -**

对于 SQL 服务器，您应该能够使用：

```
CONVERT(DATE, some_datetime_field) = '2012-04-02' 
```

（来自[如何仅从 SQL Server 日期时间数据类型返回日期部分](https://stackoverflow.com/questions/113045/how-to-return-the-date-part-only-from-a-sql-server-datetime-datatype)）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-03T20:33:17.810

说你正在传递日期和时间`l_DATE`和`l_TIME`变量..

那么您可以使用以下查询..

```
select * from your_table 
where to_char(date_field,'DD/MM/YYYY') = l_DATE 
   or to_char(date_field ,'HH:MI:SS') = l_TIME 
```

如果您使用 Oracle 数据库作为 DBMS，那么您可以使用上述查询，它应该会给您想要的答案/结果...

# sql - 从 1 月到 12 月对日期进行排序（格式为“2001 年 1 月”）

> ID：10000842
> 
> 赞同：1
> 
> 时间：2012-04-03T20:25:24.137
> 
> 标签：sql, sql-server-2008, tsql

我有这个查询，它返回一个带有 Date(column) 作为 nvarchar 数据类型的结果集。

```
SELECT DISTINCT 
    DateName( month , DateAdd( month , (CONVERT(int,DateField1)) - 1 , '2000-01-01' ) ) 
    +' '+ DateName( year , DateAdd( year , (CONVERT(int,DateField2)), '2000-01-01' ) ) AS [Date] 
FROM dbo.table1 
WHERE DateName( year , DateAdd( year , (CONVERT(int,DateField2)), '2000-01-01' ) )= 2009. 
```

这里 DateField1 和 DateField2 是 table1 中的列。

我得到如下所示的结果

```
--------------
Date
--------------
March 2009
June 2009
August 2009
September 2009
July 2009
May 2009
November 2009
December 2009
February 2009
April 2009
January 2009
October 2009 
```

我想对从 2009 年 1 月到 2009 年 12 月的结果集进行排序。

帮助表示赞赏。

谢谢席德

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-03T21:03:04.680

您可以只转换最终结果（在这种情况下，我已将调用包装在子查询中，而不是按转换顺序）

```
SELECT *
FROM
(
    SELECT DISTINCT 
        CAST(
            DateName( month , DateAdd( month , (CONVERT(int,DateField1)) - 1 , '2000-01-01' ) ) 
            +' '+ DateName( year , DateAdd( year , (CONVERT(int,DateField2)), '2000-01-01' ) ) 
        AS DATETIME) AS   [Date] 
    FROM dbo.table1 
    WHERE DateName( year , DateAdd( year , (CONVERT(int,DateField2)), '2000-01-01' ) )= 2009
) AS MyDate
ORDER BY Date 
```

SQL Server 将能够适当地转换它：[这是展示演员作品的小提琴](http://sqlfiddle.com/#!3/d41d8/331)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-03T20:31:44.977

1.  您可以按原始字段排序（如果我没看错，则为 DateField2、DateField1）
2.  您可以将 Monthname 形成回一个日期并对此进行排序。
3.  您可以在 order by 子句中的选择中组合您的计算。

# c# - 按日期时间对数据表中的日期时间行进行分组 - C#

> ID：10000848
> 
> 赞同：4
> 
> 时间：2012-04-03T20:25:37.413
> 
> 标签：c#, linq, datetime, datatable, group-by

我有一个 LARGE 数据表（500k-1m 行），无需详细说明，这是最终用户需要/希望能够查看所有数据的要求。这是在本地服务器上，所以带宽等对我来说不是问题。

我在 DataTable 中有一个 DateTime 字段，我需要对其进行分组，让我解释一下分组的含义……这可能不是您认为的意思（通过查看此处的其他问题！）。

```
 var table = new DataTable();
        table.Columns.Add("EventTime", typeof(DateTime));
        table.Columns.Add("Result", typeof(String));
        table.Columns.Add("ValueOne", typeof(Int32));
        table.Columns.Add("ValueTwo", typeof(Int32));
        table.Rows.Add("2012-02-06 12:41:45.190", "A", "7", "0");
        table.Rows.Add("2012-02-06 12:45:41.190", "B", "3", "89");
        table.Rows.Add("2012-02-06 12:59:41.190", "C", "1", "0");
        table.Rows.Add("2012-02-06 13:41:41.190", "D", "0", "28");
        table.Rows.Add("2012-02-06 17:41:41.190", "E", "0", "37");
        table.Rows.Add("2012-02-07 12:41:45.190", "F", "48", "23"); 
```

我希望对上表进行分组，以便得到“ValueOne”列的总和和“ValueTwo”列的平均值。我需要分组稍微灵活一点，以便我可以指定我想要按分钟分组（只有第一行和最后一行会被分组，其余的只会提供它们的值），或者按天（除了最后一行将被分组为一行）等。

我已经尝试了几次，但我无处可去。我的 LINQ 知识不是很好，但我认为我能够做到这一点！

注意：数据表已经在机器上用于无法更改的计算/视图，所以说“别再傻了，用 SQL 过滤！！！” 是一个有效的答案，对我没用！:-D

另外，如果您在标题中错过了它，我需要在 C# 中使用它 - 我正在使用 .NET 4.0 ...

提前致谢，假设您决定提供帮助！:-)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-03T20:55:48.290

其他三个答案很接近，但是正如您所指出的，它们将在一分钟的同一秒内发生的事件分组，而不是在同一秒内发生的事件，这正是您想要的。试试这个：

```
var query = from r in table.Rows.Cast<DataRow>()
        let eventTime = (DateTime)r[0]
        group r by new DateTime(eventTime.Year, eventTime.Month, eventTime.Day, eventTime.Hour, eventTime.Minute, eventTime.Second)
            into g
        select new {
                g.Key,
                Sum = g.Sum(r => (int)r[2]),
                Average = g.Average(r => (int)r[3])
            }; 
```

您可以调整传递给 DateTime 构造函数的信息，以按不同的时间部分进行分组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-03T20:32:28.627

您唯一需要更改的是要分组的属性。

```
var query = from x in DataSource
            group x by x.EventTime.Minute into x
            select new
            {
              Unit = x.Key,
              SumValueOne = x.Sum(y => y.ValueOne),
              AverageValueTwo = x.Average(y => y.ValueTwo), 
            }; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-03T20:38:18.407

像这样的东西应该工作：

```
DataTable dt = GetDataTableResults();

var results = from row in dt.AsEnumerable()
              group row by new { EventDate = row.Field<DateTime>("EventTime").Date } into rowgroup
              select new
              {
                  EventDate = rowgroup.Key.EventDate,
                  ValueOne = rowgroup.Sum(r => r.Field<int>("ValueOne")),
                  ValueTwo = rowgroup.Average(r => r.Field<decimal>("ValueTwo"))
              }; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-03T20:38:41.837

这是您的基线代码的样子：

```
var query = table.Rows.Cast<DataRow>()
    .GroupBy(r => ((DateTime)r[0]).Second)
    .Select(g => new
                 {
                    g.Key, 
                    Sum = g.Sum(r => (int)r[2]),
                    Average = g.Average(r => (int)r[3])
                 }); 
```

为了增加灵活性，你可以有这样的东西：

```
IEnumerable<IGrouping<object, DataRow>> Group(IEnumerable<DataRow> rows, GroupType groupType)
{
    // switch case would be preferable, but you get the idea.
    if(groupType == GroupType.Minutes) return rows.GroupBy(r => ((object)((DateTime)r[0]).Minute));
    if(groupType == GroupType.Seconds) return rows.GroupBy(r => ((object)((DateTime)r[0]).Second));
    ...
}

var baseQuery = table.Rows.Cast<DataRow>();
var grouped = Group(baseQuery, groupType);
var query = grouped
    .Select(g => new
                 {
                    g.Key, 
                    Sum = g.Sum(r => (int)r[2]),
                    Average = g.Average(r => (int)r[3])
                 }); 
```

# java - Appending file results in overwrite (Java)

> ID：10000850
> 
> 赞同：4
> 
> 时间：2012-04-03T20:25:56.057
> 
> 标签：java, file, new-operator

So I am creating a CSV file and everytime an action occurs I would like to write the data to the file. The problem I am having is that it will overwrite the data when entering the second time. How do I add the data to the end of the file?

```
 public boolean save_to_csv(){

    //check if directory exists, if not create the folder
    File folder = new File(Environment.getExternalStorageDirectory() + "/HKA_CAL");
    //Environment.getExternalStorageDirectory() get the location of external storage
    boolean success = true;
    if(!folder.exists())
    {
       success = folder.mkdir();
    }         
    if (success) 
    { 
        //success is true if folder has successfully been created
        //now we can create/check if the file exists

        File stored_hka = new File(Environment.getExternalStorageDirectory()+"/HKA_CAL/Stored_values.csv");
        boolean file_existed=true;

        try{
            if(!stored_hka.exists()){
                stored_hka.createNewFile();
                file_existed=false;
            }
            FileOutputStream fOut = new FileOutputStream(stored_hka);
            OutputStreamWriter myOutWriter = new OutputStreamWriter(fOut);
            if(!file_existed){
                //if the file did not exist we need to write the titles of the csv
                myOutWriter.append("Calibration Tracking\r\n");
                myOutWriter.append(",ZERO1,,Zero2,,cal1,,cal2,,CALIBRATION FACTORS\r\n");
                myOutWriter.append("Date,Stab,Read,Stab,Read,Stab,Read,Stab,Read,Unit S/N,F Zero,F Offset,F Factor\r\n");
            }
            myOutWriter.append("Date"
                    +","+get_step3_stab()+","+get_step3_read()
                    +","+get_step6_stab()+","+get_step6_read()
                    +","+get_step8_stab()+","+get_step8_read()
                    +","+get_step11_stab()+","+get_step11_read()
                    +","+get_sn_num()+","+get_f_zero()
                    +","+get_f_offset()+","+get_f_factor()+"\r\n"
                    );
            myOutWriter.close();
            fOut.close();
        }
        catch(Exception e){
            return false;
        }

        return true;
    }
    else 
    {
        return false;
    }

} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-03T20:28:08.313

Instead of doing

```
new FileOutputStream(stored_hka); 
```

do

```
new FileOutputStream(stored_hka, true); 
```

This will open the file `stored_hka` in append mode instead of overwriting the contents. See the javadoc for [FileOutputStream(String name, boolean append)](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/FileOutputStream.html#FileOutputStream%28java.lang.String,%20boolean%29) for more information

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-03T20:27:33.620

When you construct your [FileWriter](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/FileWriter.html) or [FileOutputStream](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/FileOutputStream.html) there's a constructor argument which allows you to put it in append mode:

```
new FileOutputStream( "/path/to/file", true ) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-03T20:29:25.540

change

```
FileOutputStream fOut = new FileOutputStream(stored_hka); 
```

to

```
FileOutputStream fOut = new FileOutputStream(stored_hka, true); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-03T20:30:01.577

Use the FileOutputStream [constructor](http://docs.oracle.com/javase/7/docs/api/java/io/FileOutputStream.html#FileOutputStream%28java.io.File,%20boolean%29) that includes a boolean for appending

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-09-23T05:49:15.117

```
FileInputStream("valid path of file", true); 
```

It will open a file in append mode. Boolean value is for whether you want to open a file in append mode or not.

# javascript - 带有链接的 click()

> ID：10000852
> 
> 赞同：3
> 
> 时间：2012-04-03T20:25:58.080
> 
> 标签：javascript, html, click, dom-events

我有一个页面，里面有几个链接，都是这样的：

```
<a href="/" class="answer-item" rel="0">10</a> 
```

我想使用该`click()`功能来模拟用户对其中之一的点击，但它似乎在我的测试中不起作用。

```
//Evaluate a mathematical expression from another part of the page
var numberAnswer = eval(document.getElementById("question-title").getElementsByTagName("b")[0].innerHTML);

//Builds an array with the links that may match the expression
var choices = document.getElementsByClassName('answer-item');

//Iterates through array to find a match then clicks it
for(var i in choices){
    if(choices[i].innerHTML == numberAnswer){
        choices[i].click();
        break;
    }
} 
```

我确定这`choices[i]`是正确的元素。

Firefox 什么都不做，Opera 什么都不做，并且 click() 在 Chrome 中不可用（我认为）。

另外，我尝试以`dispatchEvent()`这种形式使用：

```
var evt = document.createEvent('MouseEvents');
evt.initMouseEvent("click", true, true, window, 0, 0, 0, 0, 0, false, false, false, false, 0, null);
choices[i].dispatchEvent(evt); 
```

这显然`true`在 Firefox 和 Chrome 中返回，但没有改变任何东西。

最麻烦的部分是只有`href`属性的链接可以正常工作`.click()`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-03T20:35:45.887

**编辑**

根据评论区的讨论，这个答案中使用的行为似乎是非标准的，或者至少在用户代理之间不一致。我正在进一步研究这个问题；如果您使用此答案中的信息，请仔细检查您在所有浏览器中的代码，以确保其按预期工作。

* * *

**编辑 2**

根据 OP 的评论，这里有一种“让它发生”的方法。它有一些缺点，即你的绑定事件不能调用`preventDefault`——这个方法不会尊重它。您可以构建某种可能能够处理此问题的事件包装器......无论如何，这是代码和小提琴：

HTML：

```
<br><br>
<!-- I am totally misusing this API! -->
<a href="http://jsfiddle.net/echo/js/?delay=0&js=The link was followed;" id="progra_link">Some link with an event that uses preventDefault()</a>
<br><br>
<button id="doit_btn">Programmatically click the link</button> 
```

脚本：

```
function do_program_click () {
    var lnk = document.getElementById('progra_link');
    var loc = lnk.href;
    if (!loc)
        return false;            
    // call this to fire events
    lnk.click();

    // then follow the link
    document.location = loc;
    return;
};
function addEvent(element, evnt, funct){
  if (element.attachEvent)
   return element.attachEvent('on'+evnt, funct);
  else
   return element.addEventListener(evnt, funct, false);
}

// bind an event to the link to test force event trigger
addEvent(
    document.getElementById('progra_link'),
    'click',
    function (e) {
        e.preventDefault();
        alert('Testing element click event, default action should have been stopped');
        return false;
    }
);
// bind event to the leeroy button
addEvent(
    document.getElementById('doit_btn'),
    'click',
    do_program_click
); 
```

jsfiddle：http: [//jsfiddle.net/CHMLh/](http://jsfiddle.net/CHMLh/)

* * *

**原始答案**

您的示例代码不完整。如果我只学习基础知识，它可以正常工作：

```
<script>
   var lnk = document.getElementById('test');
   lnk.click();
</script>
<a id="test" href="/" class="answer-item" rel="0">test link</a> 
```

jsFiddle：http: [//jsfiddle.net/cgejS/](http://jsfiddle.net/cgejS/)

我会重新评估您正在处理正确的 dom 元素的假设。

在不相关的说明中，这是：

```
var numberAnswer = eval(document.getElementById("question-title").getElementsByTagName("b")[0].innerHTML); 
```

... 什么？`eval`是邪恶的——如果您出于任何原因使用它，请质疑您是否有正确的方法。您是否试图从字符串中获取整数？请参阅`parseInt`（[文档](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/parseInt)），这项工作的正确工具：

```
// this line is still failure-prone...
var ele = document.getElementById("question-title").getElementsByTagName("b")[0];
var numberAnswer = 0;
if (ele)
   numberAnswer = parseInt(ele.innerHTML); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-03T20:39:54.847

简单的。

HTML（请注意，我添加了一个“id”标签）：

`<a id="answer-item" href="/" class="answer-item" rel="0">10</a>`

JS：

```
document.getElementById('answer-item').click(); 
```

# api - Google Map Geocode API returns only top 6 results...How do I get more?

> ID：10000857
> 
> 赞同：1
> 
> 时间：2012-04-03T20:26:18.533
> 
> 标签：api, google-maps

I am using the following uri's to connect to Google Api from a C# class. I left the address that I am currently having trouble with in it as an example.

[http://maps.googleapis.com/maps/api/geocode/xml?address=Mt%20Vernon&sensor=false](http://maps.googleapis.com/maps/api/geocode/xml?address=Mt%20Vernon&sensor=false)

[http://maps.googleapis.com/maps/api/geocode/xml?address=Mt%20Vernon,%20IN&sensor=false](http://maps.googleapis.com/maps/api/geocode/xml?address=Mt%20Vernon,%20IN&sensor=false)

The first link only returns what appears to be the top 6 results. The second link is the result I actually need. I understand that I can force the user to supply the state, but the requirements that I am under are explicit that only the city need be entered.

I have searched for a way to increase the result set to no avail. At this point I am looking for any ideas short of switching to some other services (which I am not opposed to if google, indeed has this short coming).

Thanks for whatever help you might be able to provide.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-03T22:29:26.370

如果您在搜索参数中包含 USA，则包含来自 Indiana 的 Mt. Vernon 结果：

```
http://maps.googleapis.com/maps/api/geocode/xml?address=Mt%20Vernon,USA&sensor=false 
```

不确定它是否有帮助，因为它可能对不同的查询有不同的行为，但它确实满足了原始问题。

# javascript - Javascript 未从地址栏运行

> ID：10000862
> 
> 赞同：2
> 
> 时间：2012-04-03T20:26:43.047
> 
> 标签：javascript

我编写了以下 Javascript 代码：

```
var outerFrame = document.getElementById("myframe");
    var outerDoc = outerFrame.contentDocument || outerFrame.contentWindow.document;
    var innerFrame = outerDoc.getElementsByName("frame").item(0);
    var innerDoc = innerFrame.contentDocument || innerFrame.contentWindow.document;
    var arr=[10,11,12,13,14,15,16,17,18,19,110,111,112,113,114,115,116,117,118,119]; 
    for(i=0;i<20;i++){
        var randomVal = Math.floor((Math.random()*5));
        if (innerDoc.getElementsByName("point"+arr[i])[randomVal]) {innerDoc.getElementsByName("point"+arr[i])[randomVal].checked = true; }
        } 
```

我希望人们能够通过将其复制粘贴到地址栏来在特定网站上运行它。一个小小的谷歌搜索告诉我我需要在它之前附加'javascript：'。但是，它不起作用；当我尝试从地址栏执行代码时没有任何反应。当我从控制台执行代码时，代码运行良好。

尝试从地址栏执行时出现的错误是：

> 未捕获的异常：ReferenceError：文档未定义

有什么帮助吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-03T20:29:50.860

我很确定你想要的是这个问题：[Firefox 6 javascript in addressbar](https://stackoverflow.com/questions/7375288/firefox-6-javascript-in-addressbar)；tl;dr Firefox（以及其他）不再允许您在地址栏中运行 javascript 片段。

# javascript - 如何从 json 请求中显示当前标题

> ID：10000874
> 
> 赞同：0
> 
> 时间：2012-04-03T20:27:32.530
> 
> 标签：javascript, json, while-loop, brightcove

我正在寻找在我的页面上选择的特定项目的标题：

```
function response(jsonData) {
    var items = jsonData["items"];
    var tDiv = document.getElementById("dynamicVideos");
    var uDiv = document.getElementById("videoInfo");
    var i=0;        

    while (i<items.length) {        

        var str = "";
        str += '<div class="tvVideo">';
        str += '<div class="thumb" onClick="playTitleFromList(' + items[i].id + ')"><img src="' + items[i].thumbnailURL + '"/></div>';
        str += '<p class="vidTitle">' + items[i].name + ' (' + formatTime(items[i].length) + ')'+ '</p>';
        str += '<p class="vidDescription">' + items[i].shortDescription + '</p>';
        str += '</div>';

        tDiv.innerHTML += str;

        i++;
    }

    var str2 = "";
    str2 += '<div class="videoTitle">';
    str2 += '<h3 id="videoTitle">' + items[0].name + '</h3>';
    str2 += '</div><!-- Video Title -->';
    str2 += '<div class="videoDescription">';
    str2 += '<p id="videoDescription">' + items[0].longDescription + '</p>';
    str2 += '</div><!-- Video Description -->';
    str2 += '<div class="divide"></div>';
    str2 += '<div id="videoDonate"></div>';
    str2 += '<div id="videoTAF"></div>';
    str2 += '<div id="videoTime"></div>';

    uDiv.innerHTML += str2;
} 
```

代码的底部应显示所选视频的信息，因为顶部代码块返回视频列表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-03T20:33:16.100

如果“选择”是指您单击的最后一项，则需要添加代码以`playTitleFromList`使用数据填充您的页面。该函数将需要访问其中的相同数据，`jsonData`因此它具有所需的值。该函数当前传递了需要查找的 ID；或者，您可以更改代码，以便将`i`其作为参数而不是作为参数传递，`id`以便您可以仅访问数组中的项目。

# heroku - Heroku 支持 Rails 3.2.3 的 jruby 吗？

> ID：10000887
> 
> 赞同：0
> 
> 时间：2012-04-03T20:28:17.987
> 
> 标签：heroku, jruby, ruby-on-rails-3.2

heroku 是否支持 jruby。我正在尝试在 heroku 上使用 jruby 实现 Rails 3.2.3 应用程序，但出现以下错误

```
2012-04-03T20:21:02+00:00 app[web.1]: /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:251:in `require': Please install the postgresql adapter: `gem install activerecord-postgresql-adapter` (no such file to load -- java) (LoadError) 
```

我该如何解决这个问题？这是我的`Gemfile`

```
source 'https://rubygems.org'

gem 'rails', '3.2.3'

# Bundle edge Rails instead:
# gem 'rails', :git => 'git://github.com/rails/rails.git'

gem 'activerecord-jdbcmysql-adapter'
gem 'activerecord-jdbcpostgresql-adapter'
gem 'devise'
gem 'jruby-openssl'
gem 'json'

# Gems used only for assets and not required
# in production environments by default.
 group :assets do
   gem 'sass-rails',   '~> 3.2.3'
   gem 'coffee-rails', '~> 3.2.1'

 # See https://github.com/sstephenson/execjs#readme for more supported runtimes
 gem 'therubyrhino'

gem 'uglifier', '>= 1.0.3'
end

gem 'jquery-rails' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T15:01:31.067

我也一直在研究这个问题，发现这个链接很有帮助 [https://github.com/jkutner/jruby-trinidad-heroku](https://github.com/jkutner/jruby-trinidad-heroku)

它展示了如何在 trindad/jruby git clone git://github.com/jkutner/jruby-trinidad-heroku.git BUNDLER_GEMFILE=Jemfile bundle gem install heroku heroku create --stack cedar --buildpack [http 上运行机架应用程序： //github.com/heroku/heroku-buildpack-java](http://github.com/heroku/heroku-buildpack-java) git push heroku master

我意识到您正在尝试制作导轨，而不是机架，但我认为这将是一个不错的起点。如果你能让这个工作，那么你可以尝试只引入rails（没有db），然后慢慢建立它。

除非有人在 heroku 上有一个更完整的关于 jRuby 的 Rails 示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T16:22:14.663

Heroku 支持构建包，因此我们可以运行大多数语言。您可以使用 JRuby 构建包来安装您的应用程序：[http ://carlhoerberg.github.com/blog/2012/03/29/run-jruby-on-heroku/](http://carlhoerberg.github.com/blog/2012/03/29/run-jruby-on-heroku/)

# java - 检查java中是否存在char

> ID：10000888
> 
> 赞同：1
> 
> 时间：2012-04-03T20:28:20.233
> 
> 标签：java

如果我有一个包含“Cat”的字符串，我怎么能事先检查每个单独的 charAt 案例中是否存在任何内容。这是示例代码

```
 for (int i = 0; i < array.length; i++)
    {
        System.out.println();
        for (int j = 0; j < size; j++)
        {
            System.out.print(array[j].charAt(i) + " ");
        }
    } 
```

一旦我达到 3，你会得到一个越界异常。有没有办法打印一个空白空间？

编辑：对不起，我根本不清楚。有多个垂直打印的字符串。所以假设最大的字符串大小为 10，最小的大小为 4。每个字符串的前四个字符打印正常。但是当第五个字符不存在时，会出现越界错误。有什么办法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-03T20:29:28.893

你有`i`错误`j`的方法，仅此而已。

你应该有：

```
System.out.print(array[i].charAt(j) + " "); 
```

为了让你的代码更健壮，你应该重写内部循环直到它达到 的长度`array[i]`，而不是一个预定义的`size`变量。

**更新：**如果你想垂直打印字符串数组（所以每个字符串都在一列中），你的代码应该是这样的：

```
for (int i = 0; i < size; i++)             // i is the loop variable for the character count, we'll print one line for each character
{
    for (int j = 0; j < array.length; j++) // for every string in the array
    {
        char c = ' ';                      // print out a space character by default to keep the columns aligned
        if ( array[j].length() > i )       // but if the array[j] still has characters left
            c = array[j].charAt(i);        // print that character instead
        System.out.print(c + " ");         // here
    }
    System.out.println();                  // and close the line
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-03T20:49:49.617

> 如果每个单独的 charAt 案例中存在任何内容，我怎么能事先检查。

除了 biziclop 已经提到的索引问题之外，您还必须在执行`charAt`.
我的意思是`for (int j = 0; j < size; j++)`这里`size`应该是`array[j].length()`为了这个工作。

但是为什么要麻烦循环迭代呢？
你可以做`System.out.print(array[i] + " ");`

# ruby-on-rails - Rails：使用不同模型的 SQL 搜索

> ID：10000889
> 
> 赞同：0
> 
> 时间：2012-04-03T20:28:27.270
> 
> 标签：ruby-on-rails, ruby-on-rails-3, search

我有这样的模型：

```
scope :search_posts, lambda { |query|
  mega_posts.where( "title LIKE ? OR category_id LIKE ? OR author_id LIKE ?", 
                    "%#{query}%",
                    "%#{query}%",
                    "%#{query}%"
  )
} 
```

每篇文章都有一个类别和一个作者。所以，我希望有可能在我的查询中按类别名称或作者姓名（而不是按 id）找到我的帖子。我该怎么做？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-03T20:56:54.033

最基本的答案是加入。如果您已正确设置关联，则应该可以正常工作：

```
mega_posts.joins(:category).where("posts.title LIKE :query OR categories.name LIKE :query", :query => query) 
```

编辑：如果有多个关联模型。您可以进行多个联接：

```
mega_posts.joins(:category, :author).where('posts.title LIKE :query OR categories.name LIKE :query OR authors.name LIKE :query', :query => query) 
```

甚至可以嵌套连接：

```
Category.joins(:posts => [:author]) 
```

或者自己写出连接，以防它们比 Rails 更复杂容易支持：

```
Post.joins('left join categories as c on c.id = posts.category_id').where('c.name = ?', 'foo') 
```

或者，如果您要进行非常复杂的搜索，您可能需要查看搜索引擎，例如 Sphinx 或 SOLR。

# r - 对多个文件应用 strsplit 函数

> ID：10000893
> 
> 赞同：0
> 
> 时间：2012-04-03T20:28:55.350
> 
> 标签：r, lapply, strsplit

请有人在我的代码的第 4 步中发现我做错了什么（strsplit）？

我在目录中有 3 个文件，名称分别为 '101_E45_N66.csv'、'102_E46_N76.csv'、'103_E47_N86.csv'

我正在列表中读取它们并尝试拆分名称并在每个文件中添加 3 个新列，例如，'id'=101, 'easting' = E904690, 'Northing' = N936410

我从我之前的问题中知道我可以如何为单个文件执行如下操作：

```
filename <- '101_E45_N66.csv'
    ## spliting name "101_E45_N66.csv" to create 3 new coloumn within dataframe
            s = strsplit(filename,"_",,fixed=TRUE)[[1]] 
    df1= cbind(df[,c("type","date")],ID=s[1],name1=s[2],name2=s[3],df[,3:ncol(df)]) 
```

但是，当我尝试创建一个 lapply 函数以应用于列表时，我不确定我做错了什么，因为它似乎只使用了文件名中的 1 个，并在我编写时在所有 3 个同名文件中添加了列文件回到目录中（请参阅我的代码的第 4 步），我使用的代码是：

```
 mycsv = dir(pattern=".csv")

n <- length(mycsv) 

## step 1 - read file 
mylist <- vector("list", n) 

for(i in 1:n) mylist[[i]] <- read.csv(mycsv[i],header = TRUE,skip =5, nrow = length(count.fields(mycsv[i])) - 12) 

## step 2 - Change coloumn name
mylist <- lapply(mylist, function(x) {names(x) <- c("type","date","v1","v2","v3","v4","v5","v6","v7") ; return(x)}) 

## step 3 - changing type coloumn for weekday/weekend

mylist <- lapply(mylist, function(x) {
    f = c("wd", "we", "we", "wd", "wd", "wd", "wd")
    x$type = rep(f,52, length.out = 30)
    return(x)
}) 

## Step 4 - spliting filename to create 3 new coloumn within dataframe

    mylist <- lapply(mylist, function(x) {
            s = strsplit(mycsv[i],"_",,fixed=TRUE)[[1]]
    d = cbind(x[,c("type","date")],ID=s[1],Easting=s[2],Northing=s[3],x[,3:ncol(x)])
    return(d)
})  
    ## Step 5- writre the data back in the directory
      for(i in 1:n)    
        write.csv(file = paste("file", i, ".csv", sep = ""),    mylist[i], row.names = F) 
```

您能否建议我在第 4 步中做错了什么？

非常感谢，
阿扬

我的样本数据：

```
> dput (mylist)
list(structure(list(type = c("wd", "we", "we", "wd", "wd", "wd", 
"wd", "wd", "we", "we", "wd", "wd", "wd", "wd", "wd", "we", "we", 
"wd", "wd", "wd", "wd", "wd", "we", "we", "wd", "wd", "wd", "wd", 
"wd", "we"), date = structure(c(1L, 11L, 18L, 9L, 26L, 30L, 22L, 
5L, 14L, 15L, 6L, 23L, 27L, 19L, 2L, 10L, 16L, 7L, 24L, 28L, 
20L, 3L, 12L, 17L, 8L, 25L, 29L, 21L, 4L, 13L), .Label = c("Fri 1 Jan", 
"Fri 15 Jan", "Fri 22 Jan", "Fri 29 Jan", "Fri 8 Jan", "Mon 11 Jan", 
"Mon 18 Jan", "Mon 25 Jan", "Mon 4 Jan", "Sat 16 Jan", "Sat 2 Jan", 
"Sat 23 Jan", "Sat 30 Jan", "Sat 9 Jan", "Sun 10 Jan", "Sun 17 Jan", 
"Sun 24 Jan", "Sun 3 Jan", "Thu 14 Jan", "Thu 21 Jan", "Thu 28 Jan", 
"Thu 7 Jan", "Tue 12 Jan", "Tue 19 Jan", "Tue 26 Jan", "Tue 5 Jan", 
"Wed 13 Jan", "Wed 20 Jan", "Wed 27 Jan", "Wed 6 Jan"), class = "factor"), 
    v1 = c(322L, 89L, 242L, NA, 136L, 113L, 70L, 134L, 232L, 
    NA, 127L, 124L, 120L, 162L, 179L, 374L, 477L, NA, 147L, 136L, 
    152L, 196L, 384L, 491L, 136L, NA, 143L, 172L, 226L, 509L), 
    v2 = c(409L, 71L, 206L, NA, 104L, 57L, NA, 98L, 201L, NA, 
    74L, 94L, 69L, 98L, 117L, 277L, 445L, NA, 131L, 90L, 83L, 
    NA, 329L, 473L, 73L, NA, 104L, 113L, 136L, 427L), v3 = c(367L, 
    54L, 211L, NA, 107L, 69L, 51L, 63L, 157L, NA, 56L, 115L, 
    96L, 100L, 118L, 250L, 388L, NA, 124L, 85L, 96L, 118L, 313L, 
    431L, 79L, NA, 93L, 135L, 134L, 290L), v4 = c(343L, 60L, 
    183L, NA, 110L, 53L, 32L, 77L, 123L, NA, 37L, 100L, 64L, 
    68L, 99L, 199L, 333L, NA, 107L, 71L, 81L, 89L, 219L, 393L, 
    43L, NA, 72L, 96L, 127L, NA), v5 = c(231L, 42L, 79L, NA, 
    74L, 58L, 48L, 59L, 78L, NA, 62L, 74L, 63L, 59L, 74L, 110L, 
    134L, NA, 74L, 82L, 59L, 73L, 135L, 170L, 53L, NA, 61L, 72L, 
    67L, 186L), v6 = c(140L, 41L, 57L, NA, 104L, 92L, 89L, 94L, 
    68L, NA, 116L, 131L, NA, 110L, 125L, 89L, 89L, NA, 113L, 
    124L, 115L, 116L, 95L, 77L, 126L, NA, 110L, 122L, 119L, 122L
    ), v7 = c(90L, 104L, 82L, NA, 368L, 258L, NA, 289L, 117L, 
    NA, 395L, 416L, 397L, 391L, 400L, 132L, 101L, NA, 397L, 426L, 
    418L, 411L, 151L, 66L, 396L, NA, 457L, 437L, 428L, 128L)), .Names = c("type", 
"date", "v1", "v2", "v3", "v4", "v5", "v6", "v7"), row.names = c(NA, 
-30L), class = "data.frame"), structure(list(type = c("wd", "we", 
"we", "wd", "wd", "wd", "wd", "wd", "we", "we", "wd", "wd", "wd", 
"wd", "wd", "we", "we", "wd", "wd", "wd", "wd", "wd", "we", "we", 
"wd", "wd", "wd", "wd", "wd", "we"), date = structure(c(1L, 11L, 
18L, 9L, 26L, 30L, 22L, 5L, 14L, 15L, 6L, 23L, 27L, 19L, 2L, 
10L, 16L, 7L, 24L, 28L, 20L, 3L, 12L, 17L, 8L, 25L, 29L, 21L, 
4L, 13L), .Label = c("Fri 1 Jan", "Fri 15 Jan", "Fri 22 Jan", 
"Fri 29 Jan", "Fri 8 Jan", "Mon 11 Jan", "Mon 18 Jan", "Mon 25 Jan", 
"Mon 4 Jan", "Sat 16 Jan", "Sat 2 Jan", "Sat 23 Jan", "Sat 30 Jan", 
"Sat 9 Jan", "Sun 10 Jan", "Sun 17 Jan", "Sun 24 Jan", "Sun 3 Jan", 
"Thu 14 Jan", "Thu 21 Jan", "Thu 28 Jan", "Thu 7 Jan", "Tue 12 Jan", 
"Tue 19 Jan", "Tue 26 Jan", "Tue 5 Jan", "Wed 13 Jan", "Wed 20 Jan", 
"Wed 27 Jan", "Wed 6 Jan"), class = "factor"), v1 = c(322L, 89L, 
242L, NA, 136L, 113L, 70L, 134L, 232L, NA, 127L, 124L, 120L, 
162L, 179L, 374L, 477L, NA, 147L, 136L, 152L, 196L, 384L, 491L, 
136L, NA, 143L, 172L, 226L, 509L), v2 = c(409L, 71L, 206L, NA, 
104L, 57L, NA, 98L, 201L, NA, 74L, 94L, 69L, 98L, 117L, 277L, 
445L, NA, 131L, 90L, 83L, NA, 329L, 473L, 73L, NA, 104L, 113L, 
136L, 427L), v3 = c(367L, 54L, 211L, NA, 107L, 69L, 51L, 63L, 
157L, NA, 56L, 115L, 96L, 100L, 118L, 250L, 388L, NA, 124L, 85L, 
96L, 118L, 313L, 431L, 79L, NA, 93L, 135L, 134L, 290L), v4 = c(343L, 
60L, 183L, NA, 110L, 53L, 32L, 77L, 123L, NA, 37L, 100L, 64L, 
68L, 99L, 199L, 333L, NA, 107L, 71L, 81L, 89L, 219L, 393L, 43L, 
NA, 72L, 96L, 127L, NA), v5 = c(231L, 42L, 79L, NA, 74L, 58L, 
48L, 59L, 78L, NA, 62L, 74L, 63L, 59L, 74L, 110L, 134L, NA, 74L, 
82L, 59L, 73L, 135L, 170L, 53L, NA, 61L, 72L, 67L, 186L), v6 = c(140L, 
41L, 57L, NA, 104L, 92L, 89L, 94L, 68L, NA, 116L, 131L, NA, 110L, 
125L, 89L, 89L, NA, 113L, 124L, 115L, 116L, 95L, 77L, 126L, NA, 
110L, 122L, 119L, 122L), v7 = c(90L, 104L, 82L, NA, 368L, 258L, 
NA, 289L, 117L, NA, 395L, 416L, 397L, 391L, 400L, 132L, 101L, 
NA, 397L, 426L, 418L, 411L, 151L, 66L, 396L, NA, 457L, 437L, 
428L, 128L)), .Names = c("type", "date", "v1", "v2", "v3", "v4", 
"v5", "v6", "v7"), row.names = c(NA, -30L), class = "data.frame"), 
    structure(list(type = c("wd", "we", "we", "wd", "wd", "wd", 
    "wd", "wd", "we", "we", "wd", "wd", "wd", "wd", "wd", "we", 
    "we", "wd", "wd", "wd", "wd", "wd", "we", "we", "wd", "wd", 
    "wd", "wd", "wd", "we"), date = structure(c(1L, 11L, 18L, 
    9L, 26L, 30L, 22L, 5L, 14L, 15L, 6L, 23L, 27L, 19L, 2L, 10L, 
    16L, 7L, 24L, 28L, 20L, 3L, 12L, 17L, 8L, 25L, 29L, 21L, 
    4L, 13L), .Label = c("Fri 1 Jan", "Fri 15 Jan", "Fri 22 Jan", 
    "Fri 29 Jan", "Fri 8 Jan", "Mon 11 Jan", "Mon 18 Jan", "Mon 25 Jan", 
    "Mon 4 Jan", "Sat 16 Jan", "Sat 2 Jan", "Sat 23 Jan", "Sat 30 Jan", 
    "Sat 9 Jan", "Sun 10 Jan", "Sun 17 Jan", "Sun 24 Jan", "Sun 3 Jan", 
    "Thu 14 Jan", "Thu 21 Jan", "Thu 28 Jan", "Thu 7 Jan", "Tue 12 Jan", 
    "Tue 19 Jan", "Tue 26 Jan", "Tue 5 Jan", "Wed 13 Jan", "Wed 20 Jan", 
    "Wed 27 Jan", "Wed 6 Jan"), class = "factor"), v1 = c(322L, 
    89L, 242L, NA, 136L, 113L, 70L, 134L, 232L, NA, 127L, 124L, 
    120L, 162L, 179L, 374L, 477L, NA, 147L, 136L, 152L, 196L, 
    384L, 491L, 136L, NA, 143L, 172L, 226L, 509L), v2 = c(409L, 
    71L, 206L, NA, 104L, 57L, NA, 98L, 201L, NA, 74L, 94L, 69L, 
    98L, 117L, 277L, 445L, NA, 131L, 90L, 83L, NA, 329L, 473L, 
    73L, NA, 104L, 113L, 136L, 427L), v3 = c(367L, 54L, 211L, 
    NA, 107L, 69L, 51L, 63L, 157L, NA, 56L, 115L, 96L, 100L, 
    118L, 250L, 388L, NA, 124L, 85L, 96L, 118L, 313L, 431L, 79L, 
    NA, 93L, 135L, 134L, 290L), v4 = c(343L, 60L, 183L, NA, 110L, 
    53L, 32L, 77L, 123L, NA, 37L, 100L, 64L, 68L, 99L, 199L, 
    333L, NA, 107L, 71L, 81L, 89L, 219L, 393L, 43L, NA, 72L, 
    96L, 127L, NA), v5 = c(231L, 42L, 79L, NA, 74L, 58L, 48L, 
    59L, 78L, NA, 62L, 74L, 63L, 59L, 74L, 110L, 134L, NA, 74L, 
    82L, 59L, 73L, 135L, 170L, 53L, NA, 61L, 72L, 67L, 186L), 
        v6 = c(140L, 41L, 57L, NA, 104L, 92L, 89L, 94L, 68L, 
        NA, 116L, 131L, NA, 110L, 125L, 89L, 89L, NA, 113L, 124L, 
        115L, 116L, 95L, 77L, 126L, NA, 110L, 122L, 119L, 122L
        ), v7 = c(90L, 104L, 82L, NA, 368L, 258L, NA, 289L, 117L, 
        NA, 395L, 416L, 397L, 391L, 400L, 132L, 101L, NA, 397L, 
        426L, 418L, 411L, 151L, 66L, 396L, NA, 457L, 437L, 428L, 
        128L)), .Names = c("type", "date", "v1", "v2", "v3", 
    "v4", "v5", "v6", "v7"), row.names = c(NA, -30L), class = "data.frame")) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-03T21:41:09.717

问题是您尝试索引调用`i`中不存在的文件名。`lapply`

由于您需要 and 的通用索引`mylist`，因此`mycsv`您可以使用简单的循环，或者如果您坚持在`lapply`这里调用，请尝试以下操作：

```
lapply(1:length(mylist), function(i) {
    mylist.i <- mylist[[i]]
    s = strsplit(mycsv[i], "_" , fixed = TRUE)[[1]]
    d = cbind(mylist.i[, c("type", "date")], ID = s[1], Easting = s[2], Northing = s[3], mylist.i[, 3:ncol(mylist.i)])
    return(d)
}) 
```

请注意，如果没有`mycsv`我无法对此进行测试，也不会尝试检查您代码的其他部分。

# java - Hibernate：在持久化集合中重用持久化类

> ID：10000896
> 
> 赞同：0
> 
> 时间：2012-04-03T20:29:14.150
> 
> 标签：java, hibernate

我正在使用休眠并正在编写代码来填充一个空数据库。假设我在坚持句子、短语和字母。由于字母出现在短语和句子中，我将让每个字母都有一个`LetterEntity`对其的引用，`SentenceEntity`并且每个`SentenceEntity`字母都有一个字母集合。

```
@OneToMany(cascade={CascadeType.PERSIST, CascadeType.MERGE}, fetch=FetchType.LAZY)
@JoinColumn(name="sentenceid")
@Sort(type=SortType.NATURAL)
public SortedSet<LetterEntity> getLetters() {
    return this.letters;
} 
```

到目前为止没有问题。由于我还希望`PhraseEntity`有一个字母子集，并且短语可能会重叠，因此一个字母可能包含多个短语。为此，我需要一个额外的关系表。

```
@OneToMany(fetch = FetchType.LAZY)
@JoinTable(name = "phrase_letters", joinColumns = @JoinColumn(name = "phraseid"), inverseJoinColumns = @JoinColumn(name = "letterid"))
@Sort(type=SortType.NATURAL)
public SortedSet<TypeEntity> getLetters() {
    return this.letters;
} 
```

当我填充数据库时，我只是设置`setSentenceId`了 Letter 以将其添加到句子集合中。但是，当我也将 Letter 添加到短语 using`setLetters`时，Hibernate 会尝试再次保留该 Letter，但出现异常。如何在没有 Hibernate 尝试再次持久化的情况下将字母添加到短语中？

更新：我发现阅读双射关联非常有帮助。

[http://docs.jboss.org/hibernate/orm/4.1/manual/en-US/html_single/#collections-bidirectional](http://docs.jboss.org/hibernate/orm/4.1/manual/en-US/html_single/#collections-bidirectional)

虽然不是我的问题的一部分，但我建立了许多双射关联。我发现它们部分是必要的，因为它使批量插入更快。当您将元素添加到集合时，Hibernate 会发出更新查询。

更新：我是个白痴。短语和字母之间的关系是多对多的，实际上我得到了一个例外，因为我违反了一个关键约束。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-03T22:10:24.117

你是如何建立你的关系的。下面的代码似乎适合您的情况，可以正常工作。

```
 LetterEntity letter = new LetterEntity();
    PhraseEntity phrase = new PhraseEntity();
    SentenceEntity sentence = new SentenceEntity();

    sentence.getLetters().add(letter);
    s.persist(sentence);
    phrase.getLetters().add(letter);
    s.persist(phrase); 
```

# facebook - 如何使用 fb app 减慢发帖速度？

> ID：10000900
> 
> 赞同：0
> 
> 时间：2012-04-03T20:29:22.873
> 
> 标签：facebook, facebook-graph-api, cron, facebook-php-sdk, crontab

下面是我的应用程序的代码

```
 $response1 = $facebook->api('/294120253958442' . '/feed','POST',$WallPost); sleep(5);
        $response2 = $facebook->api('/134804409926272' . '/feed','POST',$WallPost); sleep(15);
        $response3 = $facebook->api('/202619002037' . '/feed','POST',$WallPost); sleep(8);
        $response4 = $facebook->api('/30410040944' . '/feed','POST',$WallPost); sleep(6);
        $response5 = $facebook->api('/103561223082520' . '/feed','POST',$WallPost); sleep(12); 
```

我将此文本与睡眠计时器一起使用，但问题是有些帖子正确发布但有些帖子立即发布有没有完美的解决方案我必须提出近 123 个 api 请求，人们会喜欢和评论

所以问题是有什么办法让 fb 认为这是正常的请求，就像我使用 sleep() 但它不能正常工作？

**注意：我在我选择的群组中发布了我必须授权发布的帖子，我只是分享我想分享的消息，它不是垃圾邮件以获取更多信息，请在投票前讨论谢谢**

**更新**

以下是我的朋友 zerkms 要求的完整文件代码 :)

```
 //making fb instance so that we can make api calls 
        require_once 'library/facebook.php';

            // Create our Application instance.
            $facebook = new Facebook(array(
              'appId' => '1498*53*179__47',
              'secret' => 'Shhh... Its Seceret ;)',
              'cookie' => true,
            )); 

        //Prepare Wall post

            //connecting to mysql server and database than get the data 
                $con1 = mysql_connect("localhost","user","pass;)");
                    if (!$con1)
                      {
                          die('Could not connect: ' . mysql_error());
                          }

                mysql_select_db('db:P');

                //get last post info
                $query = mysql_query("SELECT * FROM info:) LIMIT 1");
                $row = mysql_fetch_array($query);
                $last_post = $row["last_post"];

                //get current post data 
                $query1 = mysql_query("SELECT * FROM post_data;) WHERE ID=$last_post  LIMIT 1");
                $row1 = mysql_fetch_array($query1);

            //store table data in variable 
                $pmessage = $row1["message"];
                $plink = $row1["link"];
                $pname = $row1["name"];
                $pcaption = $row1["caption"];
                $pdescription = $row1["description"];
                $ppicture = $row1["picture"];
                $psource = $row1["source"];

            //long life access_token

                $long_life_token = "AAACITTZBnadsBAEKaetzal7w*pk0yBgeaRMZAit8iZAbhqyXVX*3IYCZB_changed_CtS3CrqBmLa9rPueABbZAmZClX1bwZDZD";

        //'picture' => $ppicture, 'source' => $psource include this latter

                    // compile the post for for user
                        $WallPost = array(
                            'access_token' => $long_life_token,
                            'message' => $pmessage,
                            'link' => $plink,
                            'name' => $pname,
                            'caption' => $pcaption,
                            'description' => $pdescription);  

        //making api call so that it can post on target wall
        $response = $facebook->api('/me' . '/feed','POST',$WallPost);

            $last_post_update = $last_post + 1;

    //update info table that post posted and next time we use next post for posting

        mysql_query("UPDATE info SET last_post=$last_post_update WHERE id='1'");

    //posting to groups wall with sleeping time support poster.xls
            $response1 = $facebook->api('/*941*0*395844*' . '/feed','POST',$WallPost); sleep(5);
            $response* = $facebook->api('/1348044099***7*' . '/feed','POST',$WallPost); sleep(15);
            $response3 = $facebook->api('/*0**1900*037' . '/feed','POST',$WallPost); sleep(8);
            $response4 = $facebook->api('/30410040944' . '/feed','POST',$WallPost); sleep(*);
            $response5 = $facebook->api('/1035*1**308*5*0' . '/feed','POST',$WallPost); sleep(1*);
            $response* = $facebook->api('/10*477739430335' . '/feed','POST',$WallPost); sleep(1*);
            $response7 = $facebook->api('/84**05480*' . '/feed','POST',$WallPost); sleep(1*);
            $response8 = $facebook->api('/187350*04**08**' . '/feed','POST',$WallPost); sleep(11);
            $response9 = $facebook->api('/4*39***49744' . '/feed','POST',$WallPost); sleep(10);
            $response10 = $facebook->api('/171***10**51' . '/feed','POST',$WallPost); sleep(13);
            $response11 = $facebook->api('/1*9197031*7*' . '/feed','POST',$WallPost); sleep(14);
            $response1* = $facebook->api('/10054*45**870*5' . '/feed','POST',$WallPost); sleep(*);
            $response13 = $facebook->api('/*45144714*93' . '/feed','POST',$WallPost); sleep(9);
            $response14 = $facebook->api('/17343**7*717815' . '/feed','POST',$WallPost); sleep(*);
            $response15 = $facebook->api('/111915**5557801' . '/feed','POST',$WallPost); sleep(9);
            $response1* = $facebook->api('/133*0138**55770' . '/feed','POST',$WallPost); sleep(7);
            $response17 = $facebook->api('/158797974189338' . '/feed','POST',$WallPost); sleep(10);
            $response18 = $facebook->api('/*33*3078**94*08' . '/feed','POST',$WallPost); sleep(1*);
            $response19 = $facebook->api('/17410*979300***' . '/feed','POST',$WallPost); sleep(1*);
            $response*0 = $facebook->api('/157*481*430*458' . '/feed','POST',$WallPost); sleep(9);
            $response*1 = $facebook->api('/1*3941*97*85181' . '/feed','POST',$WallPost); sleep(11);
            $response** = $facebook->api('/1**089951*37501' . '/feed','POST',$WallPost); sleep(14);
            $response*3 = $facebook->api('/315**3*451*59*4' . '/feed','POST',$WallPost); sleep(10);
            $response*4 = $facebook->api('/***37895044*1*3' . '/feed','POST',$WallPost); sleep(7);
            $response*5 = $facebook->api('/*3*054393471390' . '/feed','POST',$WallPost); sleep(*);
            $response** = $facebook->api('/*440*1515*14491' . '/feed','POST',$WallPost); sleep(1*);
            $response*7 = $facebook->api('/184*7409490*430' . '/feed','POST',$WallPost); sleep(9);
            $response*8 = $facebook->api('/1*8978959817*19' . '/feed','POST',$WallPost); sleep(7);
            $response*9 = $facebook->api('/154*101413***7*' . '/feed','POST',$WallPost); sleep(7);
            $response30 = $facebook->api('/191***8809093*1' . '/feed','POST',$WallPost); sleep(*);
            $response31 = $facebook->api('/137*33949*59387' . '/feed','POST',$WallPost); sleep(7);
            $response3* = $facebook->api('/114474*38**4551' . '/feed','POST',$WallPost); sleep(10);
            $response33 = $facebook->api('/133*715934049*1' . '/feed','POST',$WallPost); sleep(9);
            $response34 = $facebook->api('/18**559*5137*33' . '/feed','POST',$WallPost); sleep(9);
            $response35 = $facebook->api('/1879447979*4870' . '/feed','POST',$WallPost); sleep(7);
            $response3* = $facebook->api('/1*1**94*7*37*85' . '/feed','POST',$WallPost); sleep(9);
            $response37 = $facebook->api('/175**51*91144**' . '/feed','POST',$WallPost); sleep(11);
            $response38 = $facebook->api('/15900418749*799' . '/feed','POST',$WallPost); sleep(11);
            $response39 = $facebook->api('/14487*885*10753' . '/feed','POST',$WallPost); sleep(*);
            $response40 = $facebook->api('/***9**507048858' . '/feed','POST',$WallPost); sleep(11);
            $response41 = $facebook->api('/*3*15140013*073' . '/feed','POST',$WallPost); sleep(9);
            $response4* = $facebook->api('/*07474*4***9741' . '/feed','POST',$WallPost); sleep(13);
            $response43 = $facebook->api('/151079718*78488' . '/feed','POST',$WallPost); sleep(7);
            $response44 = $facebook->api('/117*81001*43907' . '/feed','POST',$WallPost); sleep(8);
            $response45 = $facebook->api('/13*50*91*8*7594' . '/feed','POST',$WallPost); sleep(7);
            $response4* = $facebook->api('/1781*9*7**3*845' . '/feed','POST',$WallPost); sleep(1*);
            $response47 = $facebook->api('/3*9089400705' . '/feed','POST',$WallPost); sleep(9);
            $response48 = $facebook->api('/183898734978809' . '/feed','POST',$WallPost); sleep(8);
            $response49 = $facebook->api('/133453830051738' . '/feed','POST',$WallPost); sleep(10);
            $response50 = $facebook->api('/19*5151003*9374' . '/feed','POST',$WallPost); sleep(*);
            $response51 = $facebook->api('/1750793**574*93' . '/feed','POST',$WallPost); sleep(7);
            $response5* = $facebook->api('/*57554**4*7*93*' . '/feed','POST',$WallPost); sleep(13);
            $response53 = $facebook->api('/***3458071*0538' . '/feed','POST',$WallPost); sleep(9);
            $response54 = $facebook->api('/13430*43000*404' . '/feed','POST',$WallPost); sleep(11);
            $response55 = $facebook->api('/*77199875*3*5**' . '/feed','POST',$WallPost); sleep(10);
            $response5* = $facebook->api('/*54157594*37337' . '/feed','POST',$WallPost); sleep(13);
            $response57 = $facebook->api('/*8449745159*533' . '/feed','POST',$WallPost); sleep(*);
            $response58 = $facebook->api('/31487*4*1878045' . '/feed','POST',$WallPost); sleep(13);
            $response59 = $facebook->api('/*4943*4117707*1' . '/feed','POST',$WallPost); sleep(11);
            $response*0 = $facebook->api('/**7*8*5799989*5' . '/feed','POST',$WallPost); sleep(9);
            $response*1 = $facebook->api('/18*530908489557' . '/feed','POST',$WallPost); sleep(10);
            $response** = $facebook->api('/*877553*458415*' . '/feed','POST',$WallPost); sleep(10);
            $response*3 = $facebook->api('/*4844*48185*9*4' . '/feed','POST',$WallPost); sleep(*);
            $response*4 = $facebook->api('/1*5504393489378' . '/feed','POST',$WallPost); sleep(1*);
            $response*5 = $facebook->api('/1*4**58035**757' . '/feed','POST',$WallPost); sleep(9);
            $response** = $facebook->api('/*5403158795****' . '/feed','POST',$WallPost); sleep(9);
            $response*7 = $facebook->api('/179015*454*7358' . '/feed','POST',$WallPost); sleep(1*);
            $response*8 = $facebook->api('/*4407333937' . '/feed','POST',$WallPost); sleep(11);
            $response*9 = $facebook->api('/*14810578534008' . '/feed','POST',$WallPost); sleep(*);
            $response70 = $facebook->api('/*3*148493075*99' . '/feed','POST',$WallPost); sleep(8);
            $response71 = $facebook->api('/11193144**4495*' . '/feed','POST',$WallPost); sleep(7);
            $response7* = $facebook->api('/*375**97*9*3871' . '/feed','POST',$WallPost); sleep(13);
            $response73 = $facebook->api('/185**997144*979' . '/feed','POST',$WallPost); sleep(*);
            $response74 = $facebook->api('/1009957133*09**' . '/feed','POST',$WallPost); sleep(9);
            $response75 = $facebook->api('/15*71780480*458' . '/feed','POST',$WallPost); sleep(15);
            $response7* = $facebook->api('/19*783437031189' . '/feed','POST',$WallPost); sleep(1*);
            $response77 = $facebook->api('/1**0985*0795384' . '/feed','POST',$WallPost); sleep(9);
            $response78 = $facebook->api('/17173853951707*' . '/feed','POST',$WallPost); sleep(5);
            $response79 = $facebook->api('/1*1300933893455' . '/feed','POST',$WallPost); sleep(8);
            $response80 = $facebook->api('/1110945*899***1' . '/feed','POST',$WallPost); sleep(5);
            $response81 = $facebook->api('/18019587*0*1**4' . '/feed','POST',$WallPost); sleep(10);
            $response8* = $facebook->api('/15*805038117037' . '/feed','POST',$WallPost); sleep(14);
            $response83 = $facebook->api('/1300774704*5043' . '/feed','POST',$WallPost); sleep(10);
            $response84 = $facebook->api('/1*753918398*981' . '/feed','POST',$WallPost); sleep(13);
            $response85 = $facebook->api('/114514**1938101' . '/feed','POST',$WallPost); sleep(14);
            $response8* = $facebook->api('/1*3744*9038*735' . '/feed','POST',$WallPost); sleep(14);
            $response87 = $facebook->api('/10*10*97*150035' . '/feed','POST',$WallPost); sleep(*);
            $response88 = $facebook->api('/190**98943**081' . '/feed','POST',$WallPost); sleep(14);
            $response89 = $facebook->api('/17*47151*7***44' . '/feed','POST',$WallPost); sleep(9);
            $response90 = $facebook->api('/***8744437*8715' . '/feed','POST',$WallPost); sleep(*);
            $response91 = $facebook->api('/*****74477455*3' . '/feed','POST',$WallPost); sleep(13);
            $response9* = $facebook->api('/194974453897*45' . '/feed','POST',$WallPost); sleep(1*);
            $response93 = $facebook->api('/1873*78579**744' . '/feed','POST',$WallPost); sleep(1*);
            $response94 = $facebook->api('/*7**3183*1*351*' . '/feed','POST',$WallPost); sleep(8);
            $response95 = $facebook->api('/**0808*579778*3' . '/feed','POST',$WallPost); sleep(10);
            $response9* = $facebook->api('/*093457*5759184' . '/feed','POST',$WallPost); sleep(5);
            $response97 = $facebook->api('/*49****71754051' . '/feed','POST',$WallPost); sleep(9);
            $response98 = $facebook->api('/190487**0971307' . '/feed','POST',$WallPost); sleep(11);
            $response99 = $facebook->api('/1445955*8938380' . '/feed','POST',$WallPost); sleep(8);
            $response100 = $facebook->api('/*03438579**9*81' . '/feed','POST',$WallPost); sleep(7);
            $response101 = $facebook->api('/1147779*8*091**' . '/feed','POST',$WallPost); sleep(*);
            $response10* = $facebook->api('/1*8*89**7*40*08' . '/feed','POST',$WallPost); sleep(10);
            $response103 = $facebook->api('/*9*88*835781' . '/feed','POST',$WallPost); sleep(7);
            $response104 = $facebook->api('/1870*49980*47**' . '/feed','POST',$WallPost); sleep(7);
            $response105 = $facebook->api('/*358741898*8*48' . '/feed','POST',$WallPost); sleep(1*);
            $response10* = $facebook->api('/10***9409443*31' . '/feed','POST',$WallPost); sleep(*);
            $response107 = $facebook->api('/34*5*104*03*917' . '/feed','POST',$WallPost); sleep(10);
            $response108 = $facebook->api('/*45847838808173' . '/feed','POST',$WallPost); sleep(7);
            $response109 = $facebook->api('/184*7780157*777' . '/feed','POST',$WallPost); sleep(8);
            $response110 = $facebook->api('/1*83030*3*17*53' . '/feed','POST',$WallPost); sleep(9);
            $response111 = $facebook->api('/*58**851758958*' . '/feed','POST',$WallPost); sleep(8);
            $response11* = $facebook->api('/3197*341805**18' . '/feed','POST',$WallPost); sleep(10);
            $response113 = $facebook->api('/384*10481*0789*' . '/feed','POST',$WallPost); sleep(11);
            $response114 = $facebook->api('/180*4030*050*81' . '/feed','POST',$WallPost); sleep(11);
            $response115 = $facebook->api('/31308*5754048*8' . '/feed','POST',$WallPost); sleep(*);
            $response11* = $facebook->api('/311589115534*57' . '/feed','POST',$WallPost); sleep(8);
            $response117 = $facebook->api('/*3313*5434*00*3' . '/feed','POST',$WallPost); sleep(1*);
            $response118 = $facebook->api('/17*455045804750' . '/feed','POST',$WallPost); sleep(14);
            $response119 = $facebook->api('/*5**9457441*873' . '/feed','POST',$WallPost); sleep(1*);
            $response1*0 = $facebook->api('/15917*340789449' . '/feed','POST',$WallPost); sleep(11);
            $response1*1 = $facebook->api('/*37933149591088' . '/feed','POST',$WallPost); sleep(1*);
            $response1** = $facebook->api('/*15*93915**17*8' . '/feed','POST',$WallPost); sleep(14);
            $response1*3 = $facebook->api('/317348881**8*35' . '/feed','POST',$WallPost); sleep(13);
            $response1*4 = $facebook->api('/*77331**89**49*' . '/feed','POST',$WallPost); sleep(11);
            $response1*5 = $facebook->api('/15*3939948*9*94' . '/feed','POST',$WallPost); sleep(7);

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-03T20:44:19.473

尝试改用函数： *未测试*

```
function r1(){
    $response1 = $facebook->api('/294120253958442'.'/feed','POST',$WallPost);
}
function r2(){
    $response2 = $facebook->api('/134804409926272'.'/feed','POST',$WallPost);
}
function r3(){
    $response3 = $facebook->api('/202619002037'.'/feed','POST',$WallPost); 
}
function r4(){
    $response4 = $facebook->api('/30410040944'.'/feed','POST',$WallPost); 
}
function r5(){
    $response5 = $facebook->api('/103561223082520'.'/feed','POST',$WallPost);
}
r1();sleep(5);
echo date('h:i:s') . "\n";  // time stamps should echo 5 seconds apart.
r2();sleep(5);
echo date('h:i:s') . "\n";
r3();sleep(5);
echo date('h:i:s') . "\n";
r4();sleep(5);
echo date('h:i:s') . "\n";
r5();sleep(5);
echo date('h:i:s') . "\n"; 
```

或者，如果在睡眠发生“Windows 服务器”后睡眠返回 null，您可以设置一个计时器来触发这些功能。空闲时间花在循环上，不是最好的方法。

```
function r1(){
    $response1 = $facebook->api('/294120253958442'.'/feed','POST',$WallPost);
}
function r2(){
    $response2 = $facebook->api('/134804409926272'.'/feed','POST',$WallPost);
}
function r3(){
    $response3 = $facebook->api('/202619002037'.'/feed','POST',$WallPost);
}
function r4(){
    $response4 = $facebook->api('/30410040944'.'/feed','POST',$WallPost); 
}
function r5(){
    $response5 = $facebook->api('/103561223082520'.'/feed','POST',$WallPost);
}
$i=1;
function timer(){
    $now = time();
    while ($now + 5 > time()) {
        // do nothing
    }
    if($i<5){
        $i++;r'.$i.'(); echo 'posted'.date('h:i:s') . "\n"; timer();
    }else{
        $i=1; echo 'starting over'; timer();
    }
} 
```

# ruby-on-rails - Rails 执行 if 和 else 语句

> ID：10000906
> 
> 赞同：0
> 
> 时间：2012-04-03T20:29:37.287
> 
> 标签：ruby-on-rails

我正在尝试在我的应用程序中设置电子邮件验证过程，并且我生成一个令牌就好了，并在用户注册时向他们发送电子邮件。但是当我点击验证链接时，'users_controller/confirm' 操作中的 if 和 else 语句都会被执行。我被重定向到 root_path 但用户记录中的两个字段被修改。当我从 rails 控制台运行 find_by_token 时，它会返回预期的用户。我正在使用 mysql 并且想知道查询中是否存在某种延迟会导致两者都执行。

```
 def confirm
    if User.find_by_token(params[:token]).nil?
      redirect_to root_path
    else
      @user = User.find_by_token(params[:token])
      cookies[:auth_token] = @user.auth_token
      User.skip_callbacks = true
      @user.update_attribute(:token, "")
      @user.update_attribute(:confirmed, 1)
      User.skip_callbacks = false
      reset_session
      redirect_to routes_path
    end
  end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T06:38:14.937

您可以使用过滤器之前检查和重定向这样

```
 before_filter :find_user

  def confirm
    #your action code
  end

  private
  def find_user
    @email = User.find_by_token params[:token].to_s
    redirect_to root_path, notice: 'Your token is wrong!' if @email.nil?
  end 
```

这样，您的操作代码将仅针对有效记录运行。

# c# - 如何防止请求中出现“潜在危险的 Request.Form”

> ID：10000908
> 
> 赞同：2
> 
> 时间：2012-04-03T20:29:39.940
> 
> 标签：c#, .net, html, security

我在我的页面中添加了一个[FreeTextBox](http://www.freetextbox.com/)控件，它允许用户插入 HTML 标记。好吧，当我发送到服务器时，我收到以下错误：

> 从客户端检测到潜在危险的 Request.Form 值 (GestisciPagine1_txtTestoPagina="...t homepage `<br><br>`")。

我需要更改哪个选项以避免这种情况？我只想更改此控件。是否可以？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-03T20:32:04.320

> 我需要更改哪个选项以避免此控件仅适用于此控件？

您不能按控件执行此操作。您需要在[页面级别或整个应用程序中执行此](http://www.asp.net/whitepapers/request-validation)操作：

```
<%@ Page Title="Home Page" Language="C#" ValidateRequest="false" %> 
```

# python - python的新手从文件中创建两个字典需要特定的行

> ID：10000917
> 
> 赞同：1
> 
> 时间：2012-04-03T20:30:00.983
> 
> 标签：python, dictionary

我正在尝试使用以这种格式排列的文件构建两个单独的字典：

我需要把名字倒过来，所以名字然后姓氏，对于第一个字典，我需要把名字作为键，把第一个块中的其他名字作为值，即字符串列表。

第二个字典我需要再次使用名字作为键，将它们所属的组或组作为值。

我已经想出了如何使用逗号反转名称来拆分它们，但是我最终得到了所有名称的列表，这些名称实际上根本无法帮助我将它们分开。

我真的很困惑如何迭代它以提取这些特定行，然后将它们作为键与其他特定行作为值相关联。特别困惑我如何将名字作为键，然后将以下名称作为值，然后跳过空白行并重新开始，但使用新键。

文本文件格式：

没有项目符号的文本文件的格式完全像这样，如果只包含第一个块，则所需的输出 diciotanries 将如下所示：

```
Person_to_friends = {'Leah Connors' : ['Frank Connors', 'Shawn Patterson', 'John Patterson']} 
Persons_to_networks = {'Leah Connors' : ['Flying Club']} 
```

当我尝试测试您的代码时，我收到了一个索引错误

*   康纳斯，利亚
*   飞行俱乐部
*   康纳斯，弗兰克
*   帕特森，肖恩
*   帕特森，约翰

*   科斯莫，卡尔文

*   帆船小伙伴
*   闪避球组
*   帕特森，肖恩
*   帕特森，莎莉

*   康纳斯，弗兰克

*   赛艇学校
*   康纳斯，利亚
*   康纳斯，罗伯特

`Cosmo, Calvin`应该是第二个块的`Connors, Frank`一部分和第三个块的一部分，块之间有一个空格。有些东西不工作。我不知道为什么它一直在创造一个空间。

这是我到目前为止所拥有的，但我认为我真的很遥远..请帮助

```
def load_profiles(profiles_file, person_to_friends, person_to_networks):
f = open('profiles.txt')
lines = f.readlines()
new = []
line_number = 0
while line_number < len(lines)+1:
    prev_line = lines[line_number-1]
    line = lines[line_number]
    from_line = lines[line_number+1]
    if ',' in line and ',' not in from_line and from_line.isspace() == False:
        key = reverse_name(line)
    elif ',' not in line and line.isspace()==False:
        new.append(line.strip('\n'))
        try:
            person_to_networks[key].append(new)
        except KeyError:
            person_to_networks[key] = [new]            
    elif  line.isspace()== True:
        line_number = from_line
            line_number += 1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T00:06:09.637

```
import itertools
import collections

person_to_networks = collections.defaultdict(set)
person_to_friends = collections.defaultdict(set)

def format_name(name):
    return name.split(',')[1][1:] + ' ' + name.split(',')[0]

with open('exampletext') as f:
    #cheap hack so that we detect the need for a new leader on the first line
    lines = [''] + [line.strip() for line in f]

for line in lines:
    if line == '': 
        new_leader = True
    else:
        if new_leader:
            leader = format_name(line)
            new_leader = False
        else:
            if ',' in line:
                person_to_friends[leader].add(format_name(line))
            else:
                person_to_networks[leader].add(line)

print 'Person to Networks'
for p in person_to_networks:
    print '%s: %r' % (p, [e for e in person_to_networks[p]])

print '\nPerson to Friends'
for p in person_to_friends:
    print '%s: %r' % (p, [e for e in person_to_friends[p]]) 
```

输出：

```
Person to Networks
Frank Connors: ['Rowing school']
Calvin Cosmo: ['Sailing buddies', 'Dodge ball group']
Leah Connors: ['Flying Club']

Person to Friends
Frank Connors: ['Robert Connors', 'Leah Connors']
Calvin Cosmo: ['Sally Patterson', 'Shawn Patterson']
Leah Connors: ['Frank Connors', 'John Patterson', 'Shawn Patterson'] 
```

当前的“示例文本”：

```
Connors, Leah
Flying Club
Connors, Frank
Patterson, Shawn
Patterson, John

Cosmo, Calvin
Sailing buddies
Dodge ball group
Patterson, Shawn
Patterson, Sally 

Connors, Frank 
Rowing school
Connors, Leah
Connors, Robert 
```

# c++ - 一个大类中的两个类共享数据

> ID：10000918
> 
> 赞同：1
> 
> 时间：2012-04-03T20:30:01.560
> 
> 标签：c++, class, inheritance

我有一个包含其他两个类的对象的类。我需要其中一个类能够从另一个类中获取数据。这是一个例子。

```
class Nom{ /*says what we're eating*/ };
class Chew{ /*stuff that needs to know about what we are eating from nom*/ };

class BigBurrito 
{
   Nom n;
   Chew c;
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-03T20:32:27.270

将指针传递给`Nom`into的实例`Chew`怎么样？沿着这些思路：

```
class Nom {};

class Chew
{
private:
    Nom *m_nom;
public:
    Chew(Nom *nom)
    : m_nom(nom)
    {}
};

class BigBurrito
{
private:
    Nom m_nom;
    Chew m_chew;
public:
    BigBurrito()
    : m_chew(&m_nom)
    {}
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-03T20:33:44.423

您可以将指向另一个类的指针作为该类的成员

```
class Nom{
   Chew* chew;
};
class Chew{ /*stuff that needs to know about what we are eating from nom*/ };

class BigBurrito 
{
   Nom n;  //contains pointer to c
   Chew c;
}; 
```

或通过参数将其传递给执行操作的函数。

```
class Nom
{
   void performOperationOnChew(Chew& c);
};
class Chew{ /*stuff that needs to know about what we are eating from nom*/ };

class BigBurrito 
{
   Nom n;
   Chew c;
   void doTheOperation()
   {
      n.performOperationOnChew(c);
   }
}; 
```

第二个选项是更干净的 OOP，因为`Chew`在逻辑上不属于`Nom`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-03T20:31:38.957

只需将`n`( `Nom`) 的引用传递给您的`Chew`构造函数。

# c++ - 为什么我在使用 Boost UUID 时会收到来自 Valgrind 的未初始化值警告？

> ID：10000920
> 
> 赞同：5
> 
> 时间：2012-04-03T20:30:13.543
> 
> 标签：c++, boost, valgrind, boost-uuid

我有一堂有成员的课：

```
std::string mName;
boost::uuids::uuid mId; 
```

在构造函数中，我写道：

```
mName = boost::lexical_cast<std::string>(mId); 
```

Valgrind 写道：

```
==30714== Use of uninitialised value of size 8
==30714==    at 0x69E92FC: ??? (in /usr/lib/libstdc++.so.6.0.16)
==30714==    by 0x69E93EE: std::ostreambuf_iterator<char, std::char_traits<char> > std::num_put<char, std::ostreambuf_iterator<char, std::char_traits<char> > >::_M_insert_int<unsigned long>(std::ostreambuf_iterator<char, std::char_traits<char> >, std::ios_base&, char, unsigned long) const (in /usr/lib/libstdc++.so.6.0.16)
==30714==    by 0x69E9705: std::num_put<char, std::ostreambuf_iterator<char, std::char_traits<char> > >::do_put(std::ostreambuf_iterator<char, std::char_traits<char> >, std::ios_base&, char, unsigned long) const (in /usr/lib/libstdc++.so.6.0.16)
==30714==    by 0x69F522C: std::ostream& std::ostream::_M_insert<unsigned long>(unsigned long) (in /usr/lib/libstdc++.so.6.0.16)
==30714==    by 0x6283A5: std::basic_ostream<char, std::char_traits<char> >& boost::uuids::operator<< <char, std::char_traits<char> >(std::basic_ostream<char, std::char_traits<char> >&, boost::uuids::uuid const&) (uuid_io.hpp:55)
==30714==    by 0x62799D: bool boost::detail::lexical_stream_limited_src<char, std::char_traits<char>, true>::shl_input_streamable<boost::uuids::uuid const>(boost::uuids::uuid const&) (lexical_cast.hpp:1260)
==30714==    by 0x626DB4: bool boost::detail::lexical_stream_limited_src<char, std::char_traits<char>, true>::operator<< <boost::uuids::uuid>(boost::uuids::uuid const&) (lexical_cast.hpp:1431)
==30714==    by 0x6261EE: boost::detail::lexical_cast_do_cast<std::string, boost::uuids::uuid>::lexical_cast_impl(boost::uuids::uuid const&) (lexical_cast.hpp:1920)
==30714==    by 0x62590C: std::string boost::lexical_cast<std::string, boost::uuids::uuid>(boost::uuids::uuid const&) (lexical_cast.hpp:2087)
==30714==    by 0x624145: th::Object::Object(std::string const&) (Object.cpp:25)
t==30714== Conditional jump or move depends on uninitialised value(s) 
```

会是什么呢？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-03T20:53:04.580

`boost::uuids::uuid`是 POD 类型，因此*默认初始化*`uuid`对象实际上会使其未初始化。

确保在构造函数的初始化列表中对对象进行*值初始化：*`uuid`

```
class MyType
{
    std::string mName;
    boost::uuids::uuid mId;

public:
    MyType()
      : mName(), // not technically necessary since std::string has a
                 // non-trivial default constructor, but good for consistency
        mId() // necessary in order to actually initialize mId, remains
              // uninitialized otherwise
    {
        mName = boost::lexical_cast<std::string>(mId);
    }
}; 
```

或者更好的是，通过重新排序您的数据成员声明：

```
class MyType
{
    boost::uuids::uuid mId;
    std::string mName;

public:
    MyType()
      : mId(), // value-initialize mId
        mName(boost::lexical_cast<std::string>(mId)) // avoid unnecessary default
                                                     // construction of mName
    { }
}; 
```

# gwt - GWT Canvas2D 绘制图像

> ID：10000921
> 
> 赞同：4
> 
> 时间：2012-04-03T20:30:15.960
> 
> 标签：gwt, canvas

```
/**
 * This is the entry point method.
 */
public void onModuleLoad() {
    Canvas canvas = Canvas.createIfSupported();
    final Context2d context2d = canvas.getContext2d();

    RootPanel.get("canvas").add(canvas);
    Image img = new Image("face.png");
    final ImageElement face = ImageElement.as(img.getElement());
    img.addLoadHandler(new LoadHandler() {

        @Override
        public void onLoad(LoadEvent event) {
            context2d.drawImage(face, 0, 0);
        }
    });
    //RootPanel.get("canvas").add(img);
} 
```

这是我的代码。我想将图像绘制到画布上。如果最后一行有效：

RootPanel.get("画布").add(img);

没有被注释掉。

但是随着评论的行，似乎图像不会被加载。有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-04T16:40:09.887

必须将图像小部件添加到页面以触发图像加载。让它不可见：

```
public void onModuleLoad() {    
    Canvas canvas = Canvas.createIfSupported();
    final Context2d context2d = canvas.getContext2d();

    RootPanel.get().add(canvas);
    Image img = new Image("face.png");
    final ImageElement face = ImageElement.as(img.getElement());
    img.addLoadHandler(new LoadHandler() {

        @Override
        public void onLoad(LoadEvent event) {
            context2d.drawImage(face, 0, 0);
        }
    });

    img.setVisible(false);
    RootPanel.get().add(img);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-09T03:27:34.803

您是否将图像放在 WEB-INF 文件夹中？这就是 GWT 从中加载图像的地方。通常建议创建一个“images”文件夹，以便您可以使用“images/face.png”加载它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-03T20:50:05.453

您可以使用图像加载器，例如：[http](http://code.google.com/p/google-web-toolkit-incubator/wiki/ImageLoader) ://code.google.com/p/google-web-toolkit-incubator/wiki/ImageLoader 。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-10-02T05:38:27.860

如果您想避免需要将图像添加到要加载的页面（这会导致图像在页面上闪现），您可以使用原生 JavaScript 加载。

```
package com.mypackage;

public interface Loaded<T> {
    public void data(T data);
} 
```

```
public static native void loadImageNative(String imgBase64, Loaded<ImageElement> loaded) /*-{
    var image = new Image();
    image.onload = function() {
        loaded.@com.mypackage.Loaded::data(*)(image);
    };
    image.src = imgBase64;
}-*/;

public void onModuleLoad() {    
    Canvas canvas = Canvas.createIfSupported();
    Context2d context2d = canvas.getContext2d();
    String base64Img = MyResouces.myImage().getSafeUri().asString();

    RootPanel.get().add(canvas);

    loadImageNative(base64Img, imageLoaded -> {
        context2d.drawImage(imageLoaded, 0, 0);
    });
} 
```

# java - Json/Gson 问题 - 为什么我会为空？

> ID：10000922
> 
> 赞同：1
> 
> 时间：2012-04-03T20:30:16.193
> 
> 标签：java, json, gson

我正在尝试整理一些东西来解码 Json 字符串并且运气不佳。

现在，我正在尝试读取一个文件并将其解析为它的组件。我可以很好地读取状态值，但是当我尝试读取列表时，我得到空值，我不明白为什么。

谁能告诉我我做错了什么？

这是文件的内容：

```
{
    "results" : [
        { 
            "long_name" : "Long Name 1",
            "short_name" : "Short Name 1"
        },
        {
            "long_name" : "Long Name 2",
            "short_name" : "Short Name 2"
        }
    ],
    "status" : "OK"
} 
```

这是我在读取文件后用来解析文件的代码：

```
 BufferedReader br =
            new BufferedReader( new FileReader(aFile));
            StringBuilder builder = new StringBuilder();
            String st;
            for (String line = null; (line = br.readLine()) != null;) 
            {
                st = line.trim();
                builder.append(st);
            }
            br.close();
            String data = builder.toString();
            Results rslt = new Gson().fromJson( data, Results.class );
            List<ResultsData> resultsData = rslt.getResultsData();
            System.out.println( "ResultsData      : "+resultsData );       // This is null
            System.out.println( "Status           : "+rslt.getStatus() );  // This is OK 
```

这是我用于解析的两个类：

```
import java.util.List;

public class Results {

    private List<ResultsData> resultsData;
    public List<ResultsData> getResultsData() { return resultsData; }
    public void setResultsData( List<ResultsData> l ) { resultsData = l; }

    private String status;
    public String getStatus() { return status; }
    public void setStatus( String s ) { status = s; }

} 
```

和

```
public class ResultsData {

    private String long_name = "";
    public String getLong_name() {return long_name;}
    public void setLong_name( String s ) { long_name = s; }

    private String short_name = "";
    public String getShort_name() {return short_name;}
    public void setShort_name( String s ) { short_name = s; }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-03T20:33:25.100

我猜这是因为 JSon 文件说`results`并且类中的相应字段`Result`被命名为`resultsData`. 换句话说：架构不匹配。那么您的架构是什么样的？

# parameters - 在 VB.Net 的水晶报表中传递多个参数

> ID：10000924
> 
> 赞同：0
> 
> 时间：2012-04-03T20:30:39.877
> 
> 标签：parameters, crystal-reports-xi

如何在 VB.Net 的水晶报表中传递多个参数

我想传递 3 个参数（我在水晶报表设计视图中创建了相同的参数）

参数名称为：vBranchCode、vFromDate 和 vToDate

注意：vfromdate 和 vToDate 用于获取两个日期之间的记录

这个怎么做？请帮我。问候，森萨

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T14:15:08.990

```
private void Page_Load(object sender, System.EventArgs e)
{
    if(!IsPostback)
    {
        CrystalReportViewer1.DataBind();
        SetParameterFields("vBranchCode", "branch code");        
        SetParameterFields("vFromDate", "Some Date");
        SetParameterFields("vToDate", "Some Date");
        CrystalReportViewer1.RefreshReport();
    }
}

protected void SetParameterField (string paramName, string paramValue)
{
    ParameterField pfield = CrystalReportViewer1.ParameterFieldInfo[paramName];
    ParameterDiscreteValue pval = new ParameterDiscreteValue();
    pval.Value = paramValue;
    pfield.CurrentValues.Add(pval); 
} 
```

# c++ - opengl linux undefined 对基本功能的引用

> ID：10000925
> 
> 赞同：6
> 
> 时间：2012-04-03T20:30:42.340
> 
> 标签：c++, linux, opengl

我在 Ubuntu 11.04 上编写了一个使用 freeglut 的程序。它工作得很好。然后我得到另一台计算机并尝试在全新安装的 Ubuntu 11.04 上运行该程序。不工作。所以我安装了

``sudo apt-get install freeglut3 freeglut3-dev libglew1.5 libglew1.5-dev libglu1-mesa libglu`1-mesa-dev libgl1-mesa-glx libgl1-mesa-dev mesa-common-dev gcc`

并尝试运行程序，该程序导入

```
 #include <GL/freeglut.h>
    #include <GL/gl.h>
    #include <GL/glu.h> 
```

使用命令

`g++ -lGL -lGLU -lglut Driver.cpp -o a`

然而，链接器或其他任何形式的错误都像 200 个错误：

```
 Driver.cpp:(.text+0x3c6b): undefined reference to `glutSolidSphere'
    Driver.cpp:(.text+0x3c75): undefined reference to `glEnable'
    Driver.cpp:(.text+0x3c9a): undefined reference to `glColor4f'
    Driver.cpp:(.text+0x3cb5): undefined reference to `glRotatef'
    Driver.cpp:(.text+0x3d02): undefined reference to `glutSolidSphere'
    Driver.cpp:(.text+0x3d07): undefined reference to `glutSwapBuffers' 
```

问题的原因是什么？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-03T20:43:22.023

您指定要链接到的对象（包括静态和动态库）的顺序可能很重要。

尝试：

```
g++ Driver.cpp -lGL -lGLU -lglut  -o a 
```

（不确定库的顺序，但看起来没问题。）

构建命令行时的想法是，如果`a`需要来自 的符号`b`，则`b`必须出现*在* `a`命令行之后。

共享库的 GCC/ld 会发生（或不发生）链接顺序问题，具体取决于（最有可能的是——我在这里不是专家）是否`--as-needed`设置了链接标志。（例如，参见 Gentoo 的[按需](http://www.gentoo.org/proj/en/qa/asneeded.xml)转换指南中的最后一项。）
链接过程在激活时尽快消除不需要的符号`--as-needed`，如果链接顺序不“正确”，则会导致问题。这样做是为了减少最终可执行文件中存在的不必要依赖项的数量。
如果不活动，这不会发生（或更少）`--as-needed`- 所有符号都保留在这种情况下，并且链接顺序并不重要（或多或少 - 再次，我不是专家。）

由于不同的发行版对该标志使用不同的默认值，GCC 的行为可能看起来不一致，但这只是一种印象。

# r - 如何将指数衰减的时间序列模型叠加到 ggplot2 图形中？

> ID：10000926
> 
> 赞同：0
> 
> 时间：2012-04-03T20:30:46.693
> 
> 标签：r, ggplot2, time-series, exponential

我正在尝试将指数衰减线（带有误差线）绘制到价格信息随时间推移的 ggplot 散点图上。我目前有这个：

```
f2 <- ggplot(data, aes(x=date, y=cost) ) +
    geom_point(aes(y = cost), colour="red", size=2) +
    geom_smooth(se=T, method="lm", formula=y~x) +
#   geom_smooth(se=T) +
    theme_bw() +
    xlab("Time") + 
    scale_y_log10("Price over time") +
    opts(title="The Falling Price over time")
print(f2) 
```

关键行在 geom_smooth 命令中，`formula=y~x` 虽然这看起来像一个线性模型，但 ggplot 似乎会自动检测我的 scale_y_log10 并记录它。

现在，我的问题是日期是日期数据类型。我想我需要将它转换为秒，因为 t=0 才能应用形式的指数衰减模型`y = Ae^-(bx)`。

我相信这一点，因为当我尝试 y = exp(x) 之类的东西时，我收到一条消息，我认为 (?) 告诉我我不能取日期的指数。上面写着：

`Error in lm.wfit(x, y, w, offset = offset, singular.ok = singular.ok, : NA/NaN/Inf in foreign function call (arg 1)`

但是，`log(y) = x`可以正常工作。（y 是数字数据类型，x 是日期。）

是否有一种方便的方法可以在 geom_smooth(formula=formula) 函数调用中的 ggplot 图中拟合指数增长/衰减时间序列模型？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-03T20:48:38.620

这似乎可行，尽管我不知道真实/混乱的数据会有多挑剔：

```
set.seed(101)
dat <- data.frame(d=seq.Date(as.Date("2010-01-01"),
                         as.Date("2010-12-31"),by="1 day"),
                y=rnorm(365,mean=exp(5-(1:365)/100),sd=5))

library(ggplot2)
g1 <- ggplot(dat,aes(x=d,y=y))+geom_point()+expand_limits(y=0)
g1+geom_smooth(method="glm",family=gaussian(link="log"),
               start=c(5,0)) 
```

# jquery - jQuery 多选小部件

> ID：10000928
> 
> 赞同：3
> 
> 时间：2012-04-03T20:30:49.470
> 
> 标签：jquery, widget, multi-select

寻找可以处理数千个项目的 jQuery MultiSelect 小部件。

真的像这样：[http](http://www.quasipartikel.at/multiselect/) ://www.quasipartikel.at/multiselect/但是几百项后它的性能很糟糕。

建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-03T20:56:56.483

如果您尝试选择数千个项目，我不认为存在不会让您的浏览器停止运行的 Javascript 小部件。首先，谁会想要滚动浏览数千个项目的列表？

如果您的潜在项目列表真的很长，我建议使用 jQuery UI Autocomplete 之类的东西，它可以使用 AJAX 根据击键发送更小的项目子集。这是一个允许多项选择的示例：http: [//jqueryui.com/demos/autocomplete/#multiple-remote](http://jqueryui.com/demos/autocomplete/#multiple-remote)

但是，您不会想用它来选择“数千个项目”。您可能会争辩说您需要一个控件来允许您单击一个项目，向下滚动几百行，然后按住 Ctrl 键单击以将它们全部选中。这就是更好的设计出现的地方。这数百行是如何相关的？您可以创建一个可供选择的组层次结构吗？正如我之前所说，任何你试图做这种事情的控制都会表现得很糟糕。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T22:00:11.207

这个小部件的效果非常好，大约。5000 项。我在Firefox中测试过...

[https://github.com/yanickrochon/jquery.uix.multiselect](https://github.com/yanickrochon/jquery.uix.multiselect)

# html - 使用 CSS 绝对位置居中图像

> ID：10000930
> 
> 赞同：0
> 
> 时间：2012-04-03T20:30:50.843
> 
> 标签：html, css, image, center, alignment

我在一个 div 内有 3 个图像，而该 div 在另一个 div 内......就像这样

```
<div class="contentImages">

<div id="slideshow">

<img src="upload/<?php echo $array['image'] ?>" height="200" class="active" />

<img src="upload/<?php echo $array['image2'] ?>" height="200" />

<img src="upload/<?php echo $array['image3'] ?>" height="200" />

</div>
</div> 
```

如果你去[http://www.willruppelglass.com/](http://www.willruppelglass.com/)你可以看到它是一个幻灯片，图像不在 div 内居中，看起来很可怕......

（我最初的计划是附上图片，但我不确定这是否可能……是吗？）

这是幻灯片的 CSS

```
#slideshow {
    position:relative;
    height:200px;
}

#slideshow IMG {
    position:absolute;
    top:0;
    left:0;
    z-index:8;
    opacity:0.0;
}

#slideshow IMG.active {
    z-index:10;
    opacity:1.0;
}

#slideshow IMG.last-active {
    z-index:9;
}

#slideshow, #slideshow2, #slideshow3 {
    overflow:hidden;
    float:left;
    width:250px;
} 
```

和内容图像的 CSS

```
.contentImages{
    border:1px solid #CCC; 
    padding:10px; 
    margin:20px auto 0; 
    position:relative;
    width:750px; 
    overflow:hidden;
} 
```

我希望这是有道理的，这个问题已经困扰我好几天了，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-03T20:47:36.420

这是一个适合您的页面：http: [//www.w3.org/Style/Examples/007/center](http://www.w3.org/Style/Examples/007/center)

另外，我建议您制作图像的缩略图。加载它们需要很长时间，并且幻灯片会在加载所有图像之前多次切换。

# php - PHP内存限制在普通php脚本中不生效

> ID：10000944
> 
> 赞同：1
> 
> 时间：2012-04-03T20:31:47.927
> 
> 标签：php, mysql, wordpress

我已将 php 的内存限制分配为 999m，因此它出现在 phpinfo 中，例如

> memory_limit 999M 999M

当我使用 phpinfo(); 展示它。

不幸的是，当我尝试运行一个相当大的脚本时，限制似乎是 256M

> 致命错误：第 1403 行 /xxx/wp-includes/wp-db.php 中允许的内存大小为 268435456 字节已用尽（尝试分配 40 字节）

任何人都知道为什么或我可以做些什么来增加限制（并让它真正起作用）

如果有帮助，我正在运行 centos5 32bit 并且 php 在 fcgi 模式下运行

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-08-27T10:00:14.580

我有一个类似的问题，对我来说这是一个额外的 ini 文件，它被加载了一个名为“99-liip-developer.ini”的文件。在文件的顶部，memory_limit 被定义为 265M，它覆盖了 php.ini 中定义的 memory_limit。

希望这对任何人都有帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-07-02T11:54:19.547

键入`php --ini`以查找配置路径。

更改`memory_limit`为您需要的任何值。确保您在这两个文件上都进行了更改：`php.ini`和`conf.d/php-memory-limits.ini`

（在我的情况下，我使用 -1 来拥有无限的内存（*当然，不是无限的，而是我的电脑可以处理的*））

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-03T20:40:02.290

我建议您将其设置在脚本的顶部：

```
 ini_set("memory_limit","512M"); 
```

在消耗大量内存的脚本中，而不是让所有脚本消耗这么多内存。您也可以将它放在 /wp-includes/ 的 .htaccess 中

```
 php_value memory_limit 512M 
```

更多信息和解释在这里： [http ://www.mydigitallife.info/php-allowed-memory-size-exchausted-fatal-error/](http://www.mydigitallife.info/php-allowed-memory-size-exchausted-fatal-error/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-03T20:40:34.053

您可以尝试将其放在文件的顶部

```
ini_set('memory_limit', '999M') 
```

你有多少系统内存可用？您是否在编辑 php.ini 文件后重新启动了 Apache（我假设您已将 php 作为模块安装）？

尝试：

```
sudo /etc/init.d/httpd restart 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-03T20:55:10.133

不确定，但这出现在谷歌搜索中：

[http://wordpress.org/support/topic/plugin-cbnet-ping-optimizer-lots-of-errors-on-ping-optimizer-_help-please](http://wordpress.org/support/topic/plugin-cbnet-ping-optimizer-lots-of-errors-on-ping-optimizer-_help-please)

ping 优化器在数据库上塞满了一个完整的表，清除解决了这个问题。错误几乎相同：

> 致命错误：第 1400 行 /home/user1/public_html/domain/wp-includes/wp-db.php 中允许的内存大小为 268435456 字节已用尽（尝试分配 80 字节）

所以看看一个插件是否也在做同样的事情，然后清除它并将它记录在某个地方的 WP 上，这样如果是问题就可以修复它。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-03T21:03:24.743

创建一个名为 test.php 的 php 文件，放入：

```
<?php
phpinfo();
?> 
```

检查“**配置文件 (php.ini) 路径**”和“**加载的配置文件**”以查看正确的 php.ini 路径。编辑**php.ini**并搜索**memory_limit**并将其设置为：

```
memory_limit = 999M 
```

检查 php.ini 文件中是否有多个 memory_limit 出现。在这种情况下，删除它。

停止 apache，然后重新启动它（apachectl restart | apachectl graceful | kill -1 不行。停止，然后启动）。

重新检查 test.php 以查看是否获取了新参数。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-10-21T09:35:12.303

确保您在 apache 中的服务器/虚拟服务器未配置为覆盖 PHP 配置。即使您使用：

```
php_value memory_limit 512M 
```

您的服务器可能具有以下内容：

```
php_value memory_limit 32M 
```

这将使您在 php.ini 中的更改毫无用处。要解决这个问题：

*   编辑服务器配置中的 php_value 值。
*   或者从您的 Web 服务器中删除它，以便它使用 PHP 全局设置。

# django - 如何为 Django 管理模型添加实例表单设置初始数据？

> ID：10000950
> 
> 赞同：29
> 
> 时间：2012-04-03T20:32:03.043
> 
> 标签：django, forms, model, admin

在显示表单之前，如何在自动生成的表单中设置字段的初始值以添加 Django 模型实例？我正在使用 Django 1.3.1。

我的模型如下：

```
class Foo(models.Model):
  title = models.CharField(max_length=50)
  description = models.TextField() 
```

而当前的管理表单真的没什么特别的

```
class FooAdmin(admin.ModelAdmin):
  ordering = ('title',) 
```

当我使用管理页面添加 Foo 的新实例时，我得到了一个不错的表单，其中包含用于标题和描述的空字段。我想要的是描述字段设置有我通过调用函数获得的模板。

我目前最好的尝试是这样的：

```
def get_default_content():
  return 'this is a template for a Foo description'

class FooAdminForm(django.forms.ModelForm):

  class Meta:
      model = Foo

  def __init__(self, *args, **kwargs):
      kwargs['initial'].update({'description': get_default_content()})
      super(FooAdminForm, self).__init__(self, *args, **kwargs)

class FooAdmin(admin.ModelAdmin):
  ordering = ('title',)
  form = FooAdminForm 
```

但如果我尝试这个，我会得到这个 Django 错误：

```
AttributeError at /admin/bar/foo/add/ 
   'FooForm' object has no attribute 'get'
Request Method: GET
Request URL:    http://localhost:8000/admin/bar/foo/add/
Django Version: 1.3.1
Exception Type: AttributeError
Exception Value:    'FooForm' object has no attribute 'get'
Exception Location: /www/django-site/venv/lib/python2.6/site-packages/django/forms/widgets.py in value_from_datadict, line 178 
```

我不知道这里出了什么问题，以及我应该怎么做才能使它起作用。我还发现这个错误的奇怪之处（除了我完全看到它的事实）是我的代码中根本没有 FooForm 吗？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2015-11-11T10:37:14.877

Alasdair 的方法很好但已经过时了。Radev 的方法看起来相当不错，正如评论中所提到的，让我感到震惊的是，文档中没有任何关于此的内容。

[`get_changeform_initial_data`](https://docs.djangoproject.com/en/stable/ref/contrib/admin/#django.contrib.admin.ModelAdmin.get_changeform_initial_data)除此之外，由于 Django 1.7 有一个函数`ModelAdmin`可以设置初始表单值：

```
def get_changeform_initial_data(self, request):
    return {'name': 'custom_initial_value'} 
```

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2012-04-03T21:16:06.913

您需要`self`在方法定义中包含作为第一个参数`__init__`，但在调用超类的方法时不应包含它。

```
def __init__(self, *args, **kwargs):
    # We can't assume that kwargs['initial'] exists! 
    if 'initial' not in kwargs:
        kwargs['initial'] = {}
    kwargs['initial'].update({'description': get_default_content()})
    super(FooAdminForm, self).__init__(*args, **kwargs) 
```

话虽如此，模型字段可以将 callable 作为其[默认值](https://docs.djangoproject.com/en/dev/ref/models/fields/#default)，因此您可能根本不需要定义自定义管理表单。

```
class Foo(models.Model):
    title = models.CharField(max_length=50)
    description = models.TextField(default=get_default_content) 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2015-06-28T01:16:14.647

3 年后，但实际上你应该做的是覆盖`admin.ModelAdmin formfield_for_dbfield`.. 像这样：

```
class FooAdmin(admin.ModelAdmin):
    def formfield_for_dbfield(self, db_field, **kwargs):
        field =  super(FooAdmin, self).formfield_for_dbfield(db_field, **kwargs)
        if db_field.name == 'description':
            field.initial = 'My initial description'
        elif db_field.name == 'counter':
            field.initial = get_counter() + 1
        return field 
```

干杯;

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-06-22T08:48:44.500

添加*新*对象时，按照Wtower的建议使用[get_changeform_initial_data](https://stackoverflow.com/a/33648773) [()](https://docs.djangoproject.com/en/stable/ref/contrib/admin/#django.contrib.admin.ModelAdmin.get_changeform_initial_data)很方便。

但是，在更改*现有*对象时，这不起作用（请参阅[源代码](https://github.com/django/django/blob/stable/3.2.x/django/contrib/admin/options.py#L1599)）。

在这种情况下，您可以按如下方式扩展[ModelAdmin.get_form() （使用 OP 的示例）：](https://docs.djangoproject.com/en/stable/ref/contrib/admin/#django.contrib.admin.ModelAdmin.get_form)

```
def get_form(self, request, obj=None, change=False, **kwargs):
    if obj and not obj.description:
        obj.description = get_default_content()
    return super().get_form(request, obj, change, **kwargs) 
```

# python - 在 Python 脚本中作为守护进程运行 apschduler？

> ID：10000952
> 
> 赞同：0
> 
> 时间：2012-04-03T20:32:04.947
> 
> 标签：python

我有一个`job.py`包含以下代码的。

```
import datetime
import logging
import sys
import os

from apscheduler.scheduler import Scheduler
from src.extractors.pExtractor import somejob

def run_job():
    start = datetime.datetime.now()
    logging.debug('Proposal extraction job starting')
    somejob.main()
    end = datetime.datetime.now()
    duration = end - start
    logging.debug('job completed , took ' + str(duration.seconds) + ' seconds')

def main():
    logging.basicConfig(filename='/tmp/pExtractor.log', level=logging.DEBUG,format='%(levelname)s[%(asctime)s]: %(message)s')
    sched = Scheduler()
    sched.start()
    sched.add_interval_job(run_job, minutes=2)

if __name__ == '__main__':
    main() 
```

*   当我在命令提示符下运行它时，它会立即退出：

> INFO[2012-04-03 13:31:02,825]：启动线程池，核心线程数为 0，最大线程数为 20 INFO[2012-04-03 13:31:02,827]：调度程序已启动 INFO[2012-04-03 13： 31:02,827]：将作业“run_job（触发器：cron[minute='2']，下次运行时间：2012-04-03 14:02:00）”添加到作业存储“默认”信息 [2012-04-03 13:31:02,828]：关闭线程池

*   我怎样才能让这个作为守护进程运行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T20:50:35.313

写下你`main()`的如下。

```
def main():
    [... your_code_as_in_your_question ...]
    while (True):
        pass 
```

[此外，考虑PEP 3143](http://www.python.org/dev/peps/pep-3143/)应该不会有什么坏处。

# html - 使提交和重置具有与输入标签边框不同的边框

> ID：10000956
> 
> 赞同：0
> 
> 时间：2012-04-03T20:32:33.590
> 
> 标签：html, css

请问我怎样才能使提交按钮和重置按钮除了输入标签之外有不同的边框

```
 HTML
     <input typ="image" name="submit"     value=" " scr="image.png">

      <input type="image" name="reset"      value=" " scr="reset.png" >

   CSS
   input, textarea, select {
   border: 2px solid red;
   } 
```

我尝试添加另一个名称为 submit 和 reset 的选择器，但它们仍然从输入标签边框获取值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-03T20:34:17.753

`input[type=image]`或者给他们一个`class`名字或者给他们一个`id`，`name`不用于css

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-03T20:35:13.993

写：

```
id="submit" 
```

在提交按钮的输入标记中，然后在 CSS 中，键入：

```
#submit
{
    border: 1px solid black;     /* as an example */
} 
```

# sql - 如何为表中的每个 id 运行此查询

> ID：10000961
> 
> 赞同：2
> 
> 时间：2012-04-03T20:33:07.957
> 
> 标签：sql, database, select, set

我有以下查询，我想为表中的每个 site_id 运行。site_id 也是主键。

```
SELECT count(*)
FROM site
WHERE category = 'S'
    AND active = 'Y'
    AND site_id = -- This is what i'm trying to dynamically input 
```

然后我想把那个 count(*) 值插入到一个不同的表中……对于所有的 id。有没有办法使用基于集合的解决方案来做到这一点？还是我必须以某种方式遍历所有 site_id 并将其输入到查询中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-03T20:34:01.920

尝试

```
SELECT count(*),site_id FROM site WHERE category = 'S' AND active = 'Y'  
GROUP BY site_id 
```

# php - 试图将 symfony 语言环境设置为 fr 和 en_US 以外的其他内容

> ID：10000966
> 
> 赞同：0
> 
> 时间：2012-04-03T20:33:31.387
> 
> 标签：php, symfony, translation

我正在尝试在 Symfony2 上创建一个多语言应用程序，我想知道为什么当我使用它时`$this->get('session')->setLocale('fr');`它可以工作（找到文件`/src/ggirtsou/MyBundle/Resources/Translations/messages.fr.xliff`）但是当我将它设置为类似：el_GR 它不会工作。

我尝试了许多变体（el、GR、EL、GR_el），但都没有奏效。不断得到未翻译的字符串。

我知道我在这里遗漏了一些东西，无法弄清楚！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T10:18:18.457

确保在 Resources/Translations 文件夹中有*messages.gr.xliff文件。*添加语言后，请始终清除缓存。

# c# - 从 localhost 以外的机器访问 WCF 服务

> ID：10000969
> 
> 赞同：3
> 
> 时间：2012-04-03T20:33:43.760
> 
> 标签：c#, wcf

我正在编写一个 WCF 网络服务。我需要从另一台（linux）机器访问该服务。

在我的电脑上，我可以通过“localhost”访问该 url，但是从另一台机器访问它（用机器名称替换 localhost）不起作用。

我对 WCF 比较陌生，我的猜测是我需要将其配置为允许来自其他机器的请求，但我不知道该怎么做。

如果有帮助，这是 netstat 的输出。谢谢！

C:\用户\bb\桌面>netstat -na | 查找 57566

TCP 127.0.0.1:57566 0.0.0.0:0 监听

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-03T20:54:54.653

您如何托管您的服务？IIS 还是 Visual Studio 中的内置 Web 服务器？如果它是 Visual Studio（“Cassini”）网络服务器，您无法从其他机器访问它。

请参阅此 Stack Exchange 问题，类似： [https ://serverfault.com/questions/82899/can-i-access-cassini-from-a-remote-machine](https://serverfault.com/questions/82899/can-i-access-cassini-from-a-remote-machine)

Microsoft 希望您将应用程序部署到 IIS 以进行远程连接。Cassini（Visual Studio Web 服务器）纯粹用于开发目的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-03T20:58:16.877

您是否使用 Visual Studio 运行该服务？Visual Studio 默认使用的 ASP.NET 开发服务器只能从 localhost 访问。根据您正在执行的操作，您可能能够在 Visual Studio 中使用 IIS Express。否则，您将需要在 IIS 中托管您的服务。

# sqlite - 分组后的表达式具有相同的结果

> ID：10000974
> 
> 赞同：0
> 
> 时间：2012-04-03T20:33:59.687
> 
> 标签：sqlite

为什么要查询：

```
SELECT id, MAX(probe_time) AS Expr1
FROM app_states
GROUP BY logon_id 
```

和

```
SELECT id, MIN(probe_time) AS Expr1
FROM app_states
GROUP BY logon_id 
```

有相同的`id`结果。

我希望为每个用户选择具有 MAX 或 MIN 时间的行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-03T20:48:21.083

恐怕您必须在这里使用子查询。

```
SELECT id, probe_time
FROM app_states
WHERE probe_time = (SELECT MAX(probe_time) from app_states GROUP BY logon_id) 
```

**顺便说一句**，SQLite 对 MIN/MAX 进行了有趣的优化：

> 假设存在适当的索引，将优化以下形式的查询以在对数时间内运行：
> 
> ```
>  SELECT MIN(x) FROM table;
>  SELECT MAX(x) FROM table; 
> ```
> 
> 为了使这些优化发生，它们必须完全按照上面显示的形式出现 - 仅更改表和列的名称。不允许添加 WHERE 子句或对结果进行任何算术运算。结果集必须包含单个列。MIN 或 MAX 函数中的列必须是索引列。

— [http://www.sqlite.org/optoverview.html#minmax](http://www.sqlite.org/optoverview.html#minmax)

# c++ - 什么是实现 QProcess 的最佳方式，它“实时”读取标准输出和标准错误？

> ID：10000982
> 
> 赞同：0
> 
> 时间：2012-04-03T20:34:38.193
> 
> 标签：c++, multithreading, qt

这个问题经常被问到。许多人建议`readyReadStandardOutput`为此目的使用 QProcess 的最佳实现方式是什么，它可以“实时”读取标准输出和标准错误？我想在 DisplayEdit 中添加消息。我必须在我的代码中更改什么（您可以在下面看到它）？可以使用 QThread 在 DisplayEdit 中编写吗？我已经有以下代码：

```
#include "mainwindow.h"
#include "ui_mainwindow.h"
#include <QProcess>
#include <QDebug>
#include <QCloseEvent>

MainWindow::MainWindow(QWidget *parent) :
    QMainWindow(parent),
    ui(new Ui::MainWindow)
{
    ui->setupUi(this);
    process = new QProcess(this);
    connect(process, SIGNAL(readyReadStandardOutput()),SLOT(slotDataOnStdout()));
    connect(process, SIGNAL(readyReadStandardError()), SLOT(slotProcessError()));
    connect(process, SIGNAL(error(QProcess::ProcessError)),SLOT(slotProcessError()));
    connect(process, SIGNAL(started()),SLOT(slotProcessStart()));
    connect(process, SIGNAL(finished(int)),SLOT(slotProcessFinish(int)));
}

MainWindow::~MainWindow()
{
    delete ui;
}

void MainWindow::on_EnterButton_clicked()
{
    QStringList args = ui->ArgsEdit->text().split(" ");
    QString cmd = ui->CommandEdit->text();
    process->start(cmd, args);

}

void MainWindow::slotDataOnStdout()
{
    qDebug() << "slotDataOnStdout";
    ui->DisplayEdit->append(process->readAllStandardOutput() + '\n');
}

void MainWindow::slotStderr()
{
    qDebug() << "std error";
}

void MainWindow::slotProcessError()
{
    qDebug() << "error";
}

void MainWindow::slotProcessStart()
{
    qDebug() << "start";
}

void MainWindow::slotProcessFinish(int exitCode)
{
    qDebug() << "finish: " << exitCode;
    QString str = process->readAllStandardOutput();
    qDebug() << str;
} 
```

我想执行倒数计时器的二进制文件。我的计时器的代码（我从[时钟参考](http://www.cplusplus.com/reference/clibrary/ctime/clock/)中获取了它：

```
#include <stdio.h>
#include <time.h>

void wait ( int seconds )
{
  clock_t endwait;
  endwait = clock () + seconds * CLOCKS_PER_SEC ;
  while (clock() < endwait) {}
}

int main ()
{
  int n;
  printf ("Starting countdown...\n");
  for (n=10; n>0; n--)
  {
    printf ("%d\n",n);
    wait (1);
  }
  printf ("FIRE!!!\n");
  return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-03T20:45:02.183

看起来大部分是对的。您确实忘记了清理流程，或者考虑在流程尚未完成时要做什么。

至于定时器，使用`QTimer::timeout`信号。

# java - Java for Android - 如何为布尔变量创建事件监听器

> ID：10000983
> 
> 赞同：1
> 
> 时间：2012-04-03T20:34:41.467
> 
> 标签：java, android, boolean, event-listener

我正在使用 Java 创建一个 android 应用程序。我有一个名为“运动”的布尔变量。我想创建一个在“运动”值发生变化时触发的事件。任何朝着正确方向的指针都会很棒。谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-03T20:45:49.417

我想，变量并不孤单。它作为一个类的成员存在——对吗？因此侦听器接口将嵌套在该类中，并且该类将具有用于侦听器的成员变量和 setBooChangeListener 方法。并且在对变量的每次更改（我希望它不是公开的）时，您都会调用侦听器，如果有的话。差不多就是这样。

```
class C
{
    private boolean mBoo; //that's our variable

    public interface BooChangeListener
    {
        public void OnBooChange(boolean Boo);
    }

    private BooChangeListener mOnChange = null;

    public void setOnBooChangeListener(BooChangeListener bcl)
    {
        mOnChange = bcl;
    }

    public void setBoo(boolean b)
    {
         mBoo = b;
         if(mOnChange != null)
             mOnChange.onBooChange(b);
    }
} 
```

没有办法让系统 (Java) 监视变量并在它发生更改时自动触发侦听器。没有魔法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-03T20:55:29.897

我希望我可以将其添加为评论...我同意上面 Seva 的大部分内容，但是，请考虑将类设为 bean 并实现 PropertyChangeListener 接口：

[http://docs.oracle.com/javase/1.4.2/docs/api/java/beans/PropertyChangeListener.html](http://docs.oracle.com/javase/1.4.2/docs/api/java/beans/PropertyChangeListener.html)

bean 属性确实可以通过这种方式进行绑定和监视。在 javafx 2.0 中，Oracle 在属性和 UI 元素之间添加了一些非常先进的机制，我真的希望这可以分支到核心 API 并以某种方式可供 Android 开发人员使用。如果 JavaFX 2.0 对游戏来说为时已晚，我们至少可能会在核心中获得一些更现代的范式转变，因此可以以简单合理的方式实现这样的情况。

# android - 安卓垂直居中

> ID：10000986
> 
> 赞同：1
> 
> 时间：2012-04-03T20:35:05.740
> 
> 标签：android

为什么这些不垂直居中？我正在为此苦苦挣扎，无法使其发挥作用..

这是在相对布局中，位于显示器的底部。

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="horizontal"
android:layout_width="fill_parent"
android:layout_height="46dp"
style="?headerfooter"
android:id="@+id/linlay2"
android:layout_below="@+id/ListView01"
android:gravity="center_vertical"
android:layout_alignBottom="@+id/mainrel">
<EditText 
    android:id="@+id/EditText_AddNewList" 
    android:layout_height="wrap_content" 
    android:layout_width="wrap_content" 
    android:hint="@string/dialog_addnew_lists_listnamehint"
    android:layout_centerVertical="true"
    android:gravity="center_vertical"
    android:layout_gravity="center_vertical"
    android:layout_weight="1">
</EditText>
<Button 
        android:id="@+id/bSQLUpdate" 
        android:layout_width="40dp" 
        android:layout_height="40dp" 
        android:layout_centerVertical="true"
        android:layout_gravity="center_vertical"
        android:gravity="center_vertical"
        android:layout_marginLeft="2dp"
        android:layout_marginRight="2dp"
        style="?button_add"/>
</LinearLayout> 
```

![在此处输入图像描述](../Images/fa4d5e0734989b44eeaf398539a3c741.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-03T20:51:24.703

两个建议：

1）如果你设置`layout_height`你`LinearLayout`的 wrap_content 怎么办？
2）我怀疑你的`EditText`可能有点太大（我之前遇到过类似的问题）所以如果你改变它的高度从`wrap_content`到`match_parent`你可能会有更好的运气。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-03T20:52:18.697

您是否尝试过仅使用“center”而不是“center_vertical”？此外，如果您希望将事物从屏幕顶部到屏幕底部的假想线居中，则 center_horizo​​ntal 将是您正在寻找的东西。

下面是一些将一个项目放置在屏幕中间的代码：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

      <ProgressBar
        android:id="@+id/electionsProgressBar"
        style="?android:attr/progressBarStyleLarge"
        android:layout_width="wrap_content"
        android:layout_height="match_parent" android:layout_gravity="center_vertical|center_horizontal"/> 

</LinearLayout> 
```

# model-view-controller - SignalR 不广播

> ID：10000987
> 
> 赞同：2
> 
> 时间：2012-04-03T20:35:06.210
> 
> 标签：model-view-controller, signalr

我正在尝试使用 SignalR 创建服务器到客户端的广播机制，但它似乎没有做任何事情。

我有一个这样的集线器：

```
public class DataMessageService : Hub, IClientNotificationService
{
    dynamic _clients;

    public DataMessageService(IConnectionManager connectionManager)
    {
        _clients = connectionManager.GetClients<DataMessageService>();
    }

    public void SendDataChangeNotification(string entityName, string changeType, string id)
    {
        _clients.dataChangeNotification(new string[] {entityName, changeType, id});
    }
} 
```

我的 _Layouts.cshtml 有这个：

```
var _centralHub;

$(function() {
    // startup the signalr hub and get the proxies we need
    _centralHub = $.connection.dataMessageService;
    $.connection.hub.start();
}); 
```

我有一些部分代码，由使用 ajax 的 jquery 选项卡加载：

```
_centralHub.dataChangeNotification = function (data) {
    alert(data[0] + "::" + data[1] + "::" + data[2]);
    if (data[0] == 'User') {
        grid.refresh();
    }
}; 
```

现在在数据层，当发生一些粗略的操作时，我调用 DataMessageService.SendDataChangeNotification 但客户端没有任何反应。

我错过了什么吗？

**更新：** 我认为这可能与 vs Web 服务器有关，但在使用完整的 IIS（在 Win 7 上）时它也会失败。

**另一个更新：** 我将我的服务与我的集线器混淆了。我现在将这些拆分，如下所示，但它仍然不起作用。

```
 public class DataMessageService : IClientNotificationService
  {
    public void SendDataChangeNotification(string entityName, string changeType, string id)
    {
      IConnectionManager icm = AspNetHost.DependencyResolver.Resolve<IConnectionManager>();
      dynamic clients = icm.GetClients<DataMessageHub>();      
      clients.dataChangeNotification(new string[] { entityName, changeType, id });
    }
  }

  public class DataMessageHub : Hub
  {
  } 
```

:(

**更多信息：**

这适用于 FireFox，但不适用于 IE 或 Chrome。

我还尝试创建一个简单的示例应用程序，它适用于 Chrome 和 IE。

鉴于我们没有可用的网络套接字，长轮询对于我们的用户/基础设施可能不是一个好主意。或许有一天...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T01:42:32.867

每次解析集线器时都会创建一个新实例，因此您不能像这样持久化状态。

您可以从 this.Clients 获取集线器中的所有客户端。

要从集线器类外部广播，请使用：

```
IConnectionManager connectionManager = AspNetHost.DependencyResolver.Resolve<IConnectionManager>();
dynamic clients = connectionManager.GetClients<DataMessageService>();
clients.dataChangeNotification(new string[] {entityName, changeType, id}); 
```

# oracle11g - 如何将 rank() 与内部连接一起使用？

> ID：10000991
> 
> 赞同：1
> 
> 时间：2012-04-03T20:35:32.733
> 
> 标签：oracle11g, inner-join, oracle-analytics

我想将我的 CHEESE 表与 FRESHNESS 一起获取奶酪的 CHEESE 和 FRESHNESS 代码，其中每个奶酪 id 的 max(seq_no) 为 MOLD。

使用 rank() 时，我在哪里加入 FRESHNESS？

```
CHEESE                                    FRESHNESS
CHEESE_ID  SEQ_NO  FRESH_CODE             FRESH_CODE   FRESH_DESC      
=================================         ========================
  1         1        MOLD                 MOLD         MOLDY CHEESE    
  1        23        FRSH                 FRSH         EDIBLE
  1        34        FRSH
  2         2        FRSH
  2        18        MOLD
  3         3        MOLD
  3         5        MOLD
  3         7        MOLD

 DESIRED RESULT
 ==========================
 CHEESE_ID  SEQ_NO  FRESH_CODE  FRESH_DESC      SEQ_RANK
 2           18     MOLD        MOLDY CHEESE    1
 3            7     MOLD        MOLDY CHEESE    1 
```

这是我用来获取所需序列号的代码。

```
select 
       cheese_id,seq_no,fresh_code,seq_rank
  from ( select 
         cheese_id,seq_no, fresh_code, 
         rank() over (partition by cheese_id
                          order by seq_no desc) seq_rank
from cheese
where seq_rank = 1
 and  fresh_code = 'MOLD' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-03T20:46:01.900

您可以在子查询中进行连接

```
select cheese_id,seq_no,fresh_code,fresh_desc,seq_rank
  from ( select cheese_id,
                seq_no, 
                fresh_code, 
                fresh_desc,
                rank() over (partition by cheese_id
                                 order by seq_no desc) seq_rank
          from cheese
               join freshness using (fresh_code) )
 where seq_rank = 1
   and fresh_code = 'MOLD' 
```

或者您可以加入您的子查询

```
select cheese_id,seq_no,fresh_code,fresh_desc,seq_rank
  from ( select cheese_id,
                seq_no, 
                fresh_code, 
                fresh_desc,
                rank() over (partition by cheese_id
                                 order by seq_no desc) seq_rank
          from cheese ) cheese_outer
       join freshness using (fresh_code)
 where seq_rank = 1
   and fresh_code = 'MOLD' 
```

# python - 为什么这不抛出一个 SyntaxError 而不是默默地解释错误呢？

> ID：10000999
> 
> 赞同：1
> 
> 时间：2012-04-03T20:36:07.257
> 
> 标签：python

这两个字符串之间应该有一个逗号

```
foo = ['dumb'
'error'] 
```

但是，如果您忘记了逗号，它只会将字符串合并在一起，而不是产生语法错误。你的结果将是

```
['dumberror'] 
```

我花了几个小时追踪这个。为什么 Python 解释器要合并这些字符串？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-03T20:38:13.507

这是一个记录在案的功能，允许在源代码中使用字符串文字进行更好的格式化。

> 允许多个相邻的字符串或字节文字（由空格分隔），可能使用不同的引用约定，并且它们的含义与它们的连接相同。因此，"hello" 'world' 等价于 "helloworld"。此功能可用于减少所需的反斜杠数量，方便地将长字符串拆分为长行，甚至可以为部分字符串添加注释。

[来源](http://docs.python.org/py3k/reference/lexical_analysis.html#string-literal-concatenation)

同样值得记住的是：

> 请注意，此功能是在语法级别定义的，但在编译时实现。'+' 运算符必须用于在运行时连接字符串表达式。另请注意，文字连接可以为每个组件使用不同的引用样式（甚至混合原始字符串和三引号字符串）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-03T20:38:14.740

这不是错误，这是一个功能！Python 被记录为连接字符串，它们之间只有空格。

[http://docs.python.org/release/2.5.2/ref/string-catenation.html](http://docs.python.org/release/2.5.2/ref/string-catenation.html)