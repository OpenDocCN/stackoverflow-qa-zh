# StackOverflow 问答 11900000-11900999

# c++ - 默认参数模板与可变参数模板：最后一个模板参数是什么？

> ID：11900001
> 
> 赞同：12
> 
> 时间：2012-08-10T10:42:07.233
> 
> 标签：c++, templates, c++11, variadic-templates

我有点困惑，因为默认参数模板和可变参数模板参数都必须是模板的最后一个参数。那么我的函数的良好官方语法是什么？

```
template<typename T, class T2 = double, unsigned int... TDIM> myFunction(/* SOMETHING */) 
```

或者

```
template<typename T, unsigned int... TDIM, class T2 = double> myFunction(/* SOMETHING */) 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-10T11:22:33.940

实际上，模板参数包和默认参数不必*是*函数中的最后一个，如果它之后的任何内容将被推导（或默认）：

```
template<class T, class... Args, class T2 = int, class T3>
void f(T3){} 
```

请注意，您永远不能为 指定任何内容`T2`，因为所有内容都将被可变参数包吞噬。由此得出结论，如果要手动指定可变参数包，则将可变参数包放在默认参数之后是有意义的。对于演绎的包，它更像是一种风格选择，我个人会将它们放在最后。

请注意，如果它们是作为另一个模板的一部分推导出来的，您甚至可以拥有多个可变参数包：

```
template<class...> struct pack{};

template<class T, class... P1, class... P2, class T2>
void f(pack<P1...>, pack<P2...>, T2){} 
```

在这种情况下，我会将包和其他模板参数相对于它们的函数参数放置，即以相同的顺序。

对于（主）类模板，这当然是不同的，因为不能推导出参数。事实上，可变参数包*必须*在模板参数列表的末尾：

```
template<class T, class... Args, class T2=int>
struct X{}; // error 
```

对于部分专业化，顺序无关紧要，这又是一个纯粹的风格选择。我个人会像以前一样将它们与主模板的参数相关联。

```
template<class T1, class T2>
struct X{};

template<template<class...> class T1, class... A1,
    template<class...> class T2, class... A2>
struct X<T1<A1...>, T2<A2...>>{}; 
```

# jquery - 如何在 JQGRID 中获取重新加载的数据

> ID：11900005
> 
> 赞同：0
> 
> 时间：2012-08-10T10:42:18.137
> 
> 标签：jquery, jqgrid

我的响应数据如下所示

```
{"page":"1","total":"10","records":"8","message":null,"rowdata":
[{"status":null,"contactNo":null,"approvalStatus":null,"userInfoID":32,"userName":"bbb
1234","userFullName":"bbb 1234","profiles":[{"profileInfoID":10,"profileName":"Profile 
Ganda"},{"profileInfoID":15,"profileName":"Sample Profile 123"}]},
{"status":null,"contactNo":null,"approvalStatus":null,"userInfoID":28,"userName":
"yyyy1234","userFullName":"yyyy 1234","profiles":       
"profileInfoID":10,"profileName":"Profile Ganda"}]},.......]} 
```

我已经使用 AJAX 获得响应并将响应数据传递给 Jqgrid 并将数据类型设置为本地，代码如下所示。

```
function buildUserGridAttach(response){
var jq = jQuery.noConflict();  
 jq("#attachTable").jqGrid({
 url:"searchUsers.htm",
 data: response.rowdata, 
 datatype: "local",
 mtype:"post",
 width: 1100,
 height: "auto",
 rowNum: 5,
 rowList: [5, 10, 20],
 viewrecords: true,
 rownumbers: false,
 toppager: true,
 bottompager:true,
 pager: jQuery("#resultsPagerAttach"),
 sortname: "userName",
 sortorder: "asc",
 caption: "Search Results",
   // Specify the column names
   colNames: ["Select","User ID", "User Name", "Profiles"],
   // Configure the columns
   colModel: [
   { name: "userInfoID",hidden:true,index: "userInfoID",editable:true, width: 25},                           
   { name: "userName", index: "userName", width: 25, align: "left", search:true, sorttype:'text',title:false},
   { name: "userFullName", index: "userFullName", width: 25,  align: "left" ,search:false, sorttype:'text'},
   { name:"profiles", index:"profiles", width:60, editable: true,edittype:"select",editoptions:{multiple:true,width:50} },       
   ],

   // Grid total width and height
   autowidth: true,
   height: 300,       
   // Paging
   rownumbers: true,
   toppager: true,
   bottompager : true,
   pager: jq("#paging"),
   rowNum: 5,
   rowList: [5, 10, 20],
   viewrecords: true, // Specify if "total number of records" is

   // Default sorting
   sortname: "userName",
   sortorder: "asc",
   hidegrid: false,
   emptyrecords: "No records to view",

   // Grid caption
   caption: "Search Results", 
   multiselect:true,

   gridComplete: function() {
     var grid = jQuery("#attachTable");         
      jQuery.each(response.rowdata, function(ID,row) {
         var rowId = (ID+1);
         grid.editRow(rowId, true);
         var de = "<select  style='width: 150px;' name=" + rowId + " id=" + rowId + " multiple=true >";               
         jQuery.each(row.profiles, function(Id,profile ) {
              de = de + '<option value="' + row.userInfoID +  ":" + profile.profileInfoID + '">'+ profile.profileName+'</option>';  
          }); 
         de = de + '</select>';
       //  de = de + "<input type=hidden id='userInfoID' value='"+ row.userInfoID + "'>";
         jQuery("#attachTable").jqGrid('setRowData', rowId, { profiles: de });
         jQuery("#attachTable").jqGrid('setRowData', rowId, { userInfoID: row.userInfoID});
         jQuery("#attachTable").jqGrid('setRowData', rowId, { userName: row.userName });
         jQuery("#attachTable").jqGrid('setRowData', rowId, { userFullName: row.userFullName});
        }); 
   },   
   jsonReader : {root: "rowdata", page: "page", total: "total", records: "records", repeatitems: false, id: "userInfoID"}
 });   
} 
```

数据已正确填充，我能够对网格进行所有操作。最初我面临的问题是我无法使用新数据重新加载网格。在阅读了很多论坛之后，我尝试过

```
grid.jqGrid('clearGridData').jqGrid('setGridParam', { data: response.rowdata})
.trigger('reloadGrid', [{ page: 1}]); 
```

上面的命令运行良好，数据被重新加载。但是当调用 gridComplete 函数时，之前的数据会覆盖新的数据。我在注释掉 gridComplete 函数后发现了这个错误。

我需要解决这个问题。在过去的 3 天里，我一直在研究这个问题。

我的 JqGrid 表如下所示。

[http://i49.tinypic.com/2n9fsx.png](http://i49.tinypic.com/2n9fsx.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T17:30:15.163

尝试使用`GridUnload`，然后再次构建相同的网格。执行以下操作：

```
jQuery("#attachTable").jqGrid("GridUnload");
buildUserGridAttach(response); 
```

这是残酷的，但应该有效。

# xml - 在 xml/xslt 中对相同节点的子节点进行分组/合并

> ID：11900006
> 
> 赞同：4
> 
> 时间：2012-08-10T10:42:20.673
> 
> 标签：xml, xslt, merge, nodes

我是 XSLT 的新手，手动更改它需要很长时间。

```
<GroupData ID="xxx" Key="4" Temp="yyy">
 <ItemData ID="zzz" Value="3"/>
</GroupData>

<GroupData ID="xxx" Key="4" Temp="yyy">
 <ItemData ID="www" Value="1982"/>
</GroupData> 
```

我想在同一个组中拥有这些多个 GroupData 节点的子节点，即

```
<GroupData ID="xxx" Key="4" Temp="yyy">
 <ItemData ID="zzz" Value="3"/>
 <ItemData ID="www" Value="1982"/>
</GroupData> 
```

所以我需要在 GroupData 的 ID 和 Key 属性上合并/组合/匹配它们（这些在文件中有所不同）。还有一些没有 Key 属性。我怎样才能做到这一点？我阅读了一些其他线程（例如，在 C# 中，但我没有可用的）并且我检查了 W3 学校，但这些都是非常基本的示例。我正在使用 Notepad++ 的最新 XML Tools 2.3.2 r908 unicode (beta4) 来应用可能的转换（不知道它是否支持 XSLT2.0 或 XSLT1.0）。

编辑：在尝试了下面的建议和各种事情之后，我被卡住了，因为它有多个级别并且可能没有唯一的 ID：...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-10T12:05:24.140

如果它是 XSLT 2.0，那么您可以使用嵌套`<xsl:for-each-group>`

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:template match="/">
    <Groups>
      <xsl:for-each-group select="/Groups/GroupData" group-by="@ID">
        <xsl:for-each-group select="current-group()" group-by="if(@Key) then @Key else 'no key'">
          <GroupData>
            <!-- Copy attributes off the *first* GroupData element in the group -->
            <xsl:copy-of select="current-group()[1]/@*"/>
            <!-- Copy ItemData children from *all* GroupData elements in the group -->
            <xsl:copy-of select="current-group()/ItemData" />
          </GroupData>
        </xsl:for-each-group>
      </xsl:for-each-group>
    </Groups>
  </xsl:template>
</xsl:stylesheet> 
```

（我假设您的输入文件有一个根元素`<Groups>`并且不使用命名空间）。

如果是 XSLT 1.0，那么您需要使用[Muenchian Grouping](http://www.jenitennison.com/xslt/grouping/muenchian.html)：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:key name="group-data" match="GroupData" use="concat(@ID, '___', @Key)" />
  <xsl:template match="/">
    <Groups>
      <!--
      Iterate over a node set containing just one GroupData element for
      each combination of ID and Key
      -->
      <xsl:for-each select="/Groups/GroupData[count( . | key('group-data', concat(@ID, '___', @Key))[1]) = 1]">
        <GroupData>
          <!-- Copy attributes from the "prototype" GroupData -->
          <xsl:copy-of select="@*"/>
          <!--
          Copy ItemData children from *all* GroupData elements with matching
          ID/Key
          -->
          <xsl:copy-of select="key('group-data', concat(@ID, '___', @Key))/ItemData" />
        </GroupData>
      </xsl:for-each>
    </Groups>
  </xsl:template>
</xsl:stylesheet> 
```

在这里，我通过创建`key`.`{ID}___{Key}`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T12:02:39.290

**这个 XSLT 1.0 转换**：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:key name="kGDByIdKey" match="GroupData"
  use="concat(@ID, '+', @Key)"/>

 <xsl:template match="node()|@*">
     <xsl:copy>
       <xsl:apply-templates select="node()|@*"/>
     </xsl:copy>
 </xsl:template>

 <xsl:template match=
 "GroupData
    [generate-id()
    =
     generate-id(key('kGDByIdKey', concat(@ID, '+', @Key))[1])
     ]">
    <xsl:copy>
      <xsl:apply-templates select=
       "@*|key('kGDByIdKey', concat(@ID, '+', @Key))/node()"/>
    </xsl:copy>
 </xsl:template>

  <xsl:template match="GroupData"/>
</xsl:stylesheet> 
```

**应用于此 XML 文档时：**

```
<t>
    <GroupData ID="xxx" Key="4" Temp="yyy">
        <ItemData ID="zzz" Value="3"/>
    </GroupData>
    <GroupData ID="yyy" Key="4" Temp="yyy">
        <ItemData ID="abc" Value="3"/>
    </GroupData>
    <GroupData ID="zzz" Temp="yyy">
        <ItemData ID="pqr" Value="1982"/>
    </GroupData>
    <GroupData ID="xxx" Key="4" Temp="yyy">
        <ItemData ID="www" Value="1982"/>
    </GroupData>
    <GroupData ID="yyy" Key="4" Temp="yyy">
        <ItemData ID="def" Value="1982"/>
    </GroupData>
    <GroupData ID="zzz" Temp="yyy">
        <ItemData ID="tuv" Value="1982"/>
    </GroupData>
</t> 
```

**产生想要的正确结果**：

```
<t>
   <GroupData ID="xxx" Key="4" Temp="yyy">
      <ItemData ID="zzz" Value="3"/>
      <ItemData ID="www" Value="1982"/>
   </GroupData>
   <GroupData ID="yyy" Key="4" Temp="yyy">
      <ItemData ID="abc" Value="3"/>
      <ItemData ID="def" Value="1982"/>
   </GroupData>
   <GroupData ID="zzz" Temp="yyy">
      <ItemData ID="pqr" Value="1982"/>
      <ItemData ID="tuv" Value="1982"/>
   </GroupData>
</t> 
```

**说明**：

正确使用**[孟池分组法](http://www.jenitennison.com/xslt/grouping/muenchian.html)**和**[同一性规则](http://www.dpawson.co.uk/xsl/sect2/identity.html)**。

# css - 无法删除填充css

> ID：11900007
> 
> 赞同：2
> 
> 时间：2012-08-10T10:42:20.990
> 
> 标签：css, padding

我一直在帮助一位朋友更改他的网站的布局（主要是 css 更改），目前我只是对其进行了微调并遇到了问题。首先，这是[该站点的示例。](http://jsfiddle.net/AH9VP/1/)问题是帖子的标题，我希望顶部和底部的填充更少，以便当您将鼠标悬停在它们上时背景不会比文本高。我试过改变边距和填充，几乎尝试了一切。增加填充效果很好，但我似乎无法得到它比现在少。我知道它应该可以工作，因为它是以另一个站点的标题为模型的。谁能看出问题出在哪里？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T10:47:48.820

如果我理解正确，您想更改主帖子标题周围的空白区域。如果是这样，请调整`line-height`：

```
#content .post .title h3 a {
    text-align: left;
    -webkit-transition: color 0.25s linear;
    font-size: 36px;
    letter-spacing: -1px;
    font-weight: 750;
    line-height: 50px; /* Change this */
    color: #444444;
    text-decoration: none;
    padding:0px 0px;
} 
```

`line-height`（过度）减少的示例：http: [//jsfiddle.net/AH9VP/3/](http://jsfiddle.net/AH9VP/3/)

另见：[http ://www.w3.org/wiki/CSS/Properties/line-height](http://www.w3.org/wiki/CSS/Properties/line-height)

**但是**......请注意，尽管发生了变化`line-height`（这肯定会减少间距），但当您将鼠标悬停在文本上时，浏览器对框的约束程度似乎是有限的。这是（我认为）因为浏览器允许顶部/底部的字形空间（如“通常”中“y”的尾部）。

这个话题有点相关：[https ://stackoverflow.com/a/11857786/453277](https://stackoverflow.com/a/11857786/453277)

> 我知道它应该可以工作，因为它是以另一个站点的标题为模型的。

如果我错过了什么，看看其他网站会很有帮助。

# rest - 如何获取每个联系人的头像

> ID：11900012
> 
> 赞同：0
> 
> 时间：2012-08-10T10:42:41.520
> 
> 标签：rest, oauth, liveconnect

我正在使用来自 Windows Live Connect 的 REST API。我可以从用户那里获取所有联系人，但我不知道如何获取他们的个人资料照片。

这是我正在使用的手册。 [http://msdn.microsoft.com/en-us/library/live/hh243648.aspx](http://msdn.microsoft.com/en-us/library/live/hh243648.aspx)

我正在使用范围：`wl.basic`并在第一次向`https://apis.live.net/v5.0/me/contacts`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T16:43:31.677

如果您查看[用户请求](http://msdn.microsoft.com/en-us/library/live/hh243648.aspx#user)的详细信息，它有一条说明如何获取图片的说明。

> 要使用 Live Connect REST API 获取用户对象，请向 /me 或 /USER_ID 发出 GET 请求。
> 
> **注意 要将 GET 调用重定向到用户图片的 URL，您可以调用 /me/picture 或 /USER_ID/picture。**

# java - eclipselink中的外键ON UPDATE CASCADE

> ID：11900013
> 
> 赞同：0
> 
> 时间：2012-08-10T10:42:47.903
> 
> 标签：java, database, jpa, jpa-2.0, eclipselink

如何在 eclipselink 中使用 ON UPDATE CASCADE 创建外键。谁能解释如何创建这样的外键

这个功能在 eclipselink 中可用吗？

斯里尼

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T11:24:07.897

当您想要级联更新时，可以使用这些属性**cascade = CascadeType.ALL**或**cascade = CascadeType.MERGE 。**见样品；

```
 @Entity
   class Employee {

      @OneToOne(cascade=CascadeType.ALL)
      private Address address;

  } 
```

# php - Symfony2 用户管理，使用 FOSUserBundle 还是使用 Symfony 食谱代码作为起点滚动我自己？

> ID：11900015
> 
> 赞同：9
> 
> 时间：2012-08-10T10:42:54.063
> 
> 标签：php, symfony

在使用 Symfony 1.x 几年后，我对 Symfony 2 很熟悉。

我需要创建一个具有自定义注册流程的会员网站。此外，该网站动态生成用户角色（以前`credentials`在**SF v1.x**中）用于限制对网站部分的访问。

我查看了 FOSUserBundle，但我看不到它提供的代码超出了食谱中“[如何从数据库加载用户](http://symfony.com/doc/current/cookbook/security/entity_provider.html)”链接上可用的代码。正如我之前提到的，我的用户注册和用户管理涉及很多自定义逻辑，我不想经历使用 FOSUserBundle 的学习曲线，而只需要用我自己的方法覆盖很多方法等自定义方法。

我对 Symfony2 的了解还不够，无法决定是从食谱代码中学习并在我自己的 UserBundle 中扩展它，**还是**花时间学习如何使用 FOSUserBundle 并使用我的自定义逻辑对其进行自定义。

总之，这就是我想对用户做的事情：

1.  提供自定义注册工作流程
2.  动态更新用户角色/组成员身份（最初在登录期间，随后在会话期间）。

那么我的问题是——哪门课程对我来说需要最少的学习曲线和努力（我只有不到一周的时间来建立一个准系统网站并运行——而且我只是在业余时间做 Web 开发）。

我是否：

*   编写我自己的 UserBundle，使用说明书中的代码[作为](http://symfony.com/doc/current/cookbook/security/entity_provider.html)起点
*   了解如何使用 FOSUserBundle 并使用我的自定义逻辑对其进行自定义？（看上面）

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-26T13:47:42.853

这是一个古老的主题，但现在仍然非常有趣。我不同意弗洛伦特的回答，因为我认为它没有提供客观的观点。

FOSUserBundle 提供了用户和组的实现，就像 Symfony 已经提供的一样，你只需要配置它们。食谱和官方文档将让您在不到一天的时间内完成这项工作。

“全功能”控制器很有趣……只要您遵循此捆绑包定义的方式。不要太原始，否则您将花费​​数天时间覆盖捆绑包的代码和配置。老实说，注册和丢失密码很容易实现，SF2表单的机制已经很容易处理错误。

在 FOSUserBundle 中，视图是开箱即用的简约和无趣的，请自己制作。

如果我必须比较两条学习曲线，我会这样总结：两者都需要相同的时间来实现复杂的用户管理系统，但是在编写自己的提供程序时，你会更好地控制你的代码。

2 年后，知道你做了什么选择以及它是如何进行的，Homunculus Reticulli 会很有趣。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T12:17:17.647

`FOSUserBundle`提供：

*   `User`和`Group`实现
*   具有有用功能的控制器（注册、丢失密码）
*   意见

如果您需要这些功能，请使用此捆绑包，它将节省您的时间！

我不知道您的身份验证逻辑有多复杂，但我很确定它可以与`FOSUserBundle`''' 匹配。

# javascript - JavaScript - 输入按钮隐藏 - 不起作用

> ID：11900017
> 
> 赞同：-1
> 
> 时间：2012-08-10T10:42:59.153
> 
> 标签：javascript

```
<input id="btnupdate" type="button" value="Update" onclick="update()"/>
<img id="loadupdate" src="http://localhost/connectu/styles/images/load_big.gif"> 
```

此代码由 PHP 脚本返回以响应 AJAX 请求。update() 函数包含隐藏按钮和图像的代码。

```
document.getElementById('btnupdate').style.display='none';
document.getElementById('loadupdate').style.display='none'; 
```

update() 函数位于本机文件中。但问题是，图像被隐藏但不是按钮。我试过萤火虫。没有 javascript 错误。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-10T10:44:13.777

这应该是`style.display`：

```
function update(){
    document.getElementById('btnupdate').style.display='none';
    document.getElementById('loadupdate').style.display='none';
} 
```

# [看看它的工作原理](http://jsfiddle.net/sepny/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T10:47:38.433

改成

```
 document.getElementById('btnupdate').style.display='none'; 
```

那应该工作

# zend-framework - Zend_Locale_Format number_format number 不起作用

> ID：11900020
> 
> 赞同：0
> 
> 时间：2012-08-10T10:43:07.197
> 
> 标签：zend-framework, format, locale

我有这样的代码：

```
 $options = array(
                    'number_format' => '#.##'
            );
    $value = '22155000000000000048';
    $result = Zend_Locale_Format::getNumber($value, $options);
    var_dump($result); 
```

接收：22155000000000000048

假设：22155000000000000048.00

甚至`'number_format' => '#.00'`没有帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T16:02:56.670

使用 toNumber() 而不是 getNumber()。正确的格式是 '#0.00'

```
$options = array(
                'number_format' => '#0.00'
        );
$value = '22155000000000000048';
$result = Zend_Locale_Format::toNumber($value, $options);
var_dump($result); 
```

# jquery - 虚拟键盘插件的位置

> ID：11900022
> 
> 赞同：3
> 
> 时间：2012-08-10T10:43:08.757
> 
> 标签：jquery, jquery-ui, virtual-keyboard

我正在使用此插件 (http://www.jquery4u.com/plugins/jquery-screen-keyboard-plugin/#.UCTg6p1lTkd) 为 Kiosk 创建屏幕键盘。它工作得很好，但是我需要键盘出现在屏幕底部而不是输入/文本区域下方。

在外部 jquery.keyboard.js 文件中，我发现了以下内容：

```
$.keyboard.defaultOptions = {

        // *** choose layout & positioning ***
        layout       : 'qwerty',
        customLayout : null,

        position     : {
            of : null, // optional - null (attach to input/textarea) or a jQuery object (attach elsewhere)
            my : 'center top',
            at : 'center top',
            at2: 'center bottom' // used when "usePreview" is false (centers the keyboard at the bottom of the input/textarea)
        }, 
```

我应该使用什么来代替“null”？这应该如何添加到代码中？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-26T15:37:28.003

对于`of`参数，只需针对文档窗口：`$(window)`.

这是[一个演示](http://jsfiddle.net/Mottie/MK947/667/)和代码：

```
$('#keyboard').keyboard({

    // Used by jQuery UI position utility
    position: {
        of: $(window), // null = attach to input/textarea; use $(sel) to attach elsewhere
        my: 'center bottom',
        at: 'center bottom',
        at2: 'center bottom' // used when "usePreview" is false
    }

});​ 
```

由于这是针对信息亭的，您可能还想查看[此演示](http://jsfiddle.net/Mottie/Em8sG/624/)，它定位和调整了键盘的大小。此外，键盘中添加了上一个和下一个按钮......嗯，我发誓有一个上一个和下一个按钮。我需要更新那个演示。

注意：我添加了一个标签，`virtual-keyboard`因为我完全错过了这个问题。还请务必查看[文档](https://github.com/Mottie/Keyboard/wiki)。

# mysql - 删除多个表之间共享的未使用条目

> ID：11900026
> 
> 赞同：0
> 
> 时间：2012-08-10T10:43:15.187
> 
> 标签：mysql, sql, triggers, many-to-many

我有一个`tag`表和三个`tableA`, `tableB`,`tableC`表可以与三个`tableA_tag`,`tableB_tag`和`tableC_tag`表一起标记以加入它们。

我的应用程序允许从 中删除标签`tableA`，`tableB`或者`tableC`我只想保留其中一个中当前使用的标签。到目前为止，我已经编写了以下触发器：

```
CREATE TRIGGER plop after DELETE
ON tableA_tag
FOR EACH row
  DELETE FROM tag
  WHERE  tag.id = old.tag_id
         AND (SELECT Sum(countTags.c) AS s
              FROM   (SELECT Count(*) AS c
                      FROM   tableC_tag
                      WHERE  tag_id = old.tag_id
                      UNION
                      SELECT Count(*) AS c
                      FROM   tableB_tag
                      WHERE  tag_id = old.tag_id) countTags) = 0; 

/* Same trigger for table tableB_tag  */

/* And same again for table tableC_tag */ 
```

但它不起作用，因为它会检查标签是否仍在使用中`tableC_tag`或`tableB_tag`不签入`tableA_tag`，因此即使标签仍在使用中也可以删除。而且我无法检查`tableA_tag`，因为它是触发触发器的同一张表。

那么，我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T11:04:20.880

希望这有效...

```
CREATE TRIGGER plop after DELETE

ON tableA_tag

FOR EACH row

  DELETE FROM tag

  WHERE  tag.id = old.tag_id 

    and not exists(select ' ' from tableC_tag where tableC_tag.tag_id =tag.id)
    and not exists(select ' ' from tableB_tag where tableB_tag.tag_id =tag.id)   
    and not exists(select ' ' from tableA_tag where tableA_tag.tag_id =tag.id); 
```

# jquery - jQuery .offset 视口顶部问题

> ID：11900029
> 
> 赞同：2
> 
> 时间：2012-08-10T10:43:20.197
> 
> 标签：jquery, scroll, offset

我一直在弄清楚我在这里做错了什么时遇到了问题。基本上，如果用户位于页面顶部，下拉菜单可以正常工作，但是用户向下滚动菜单的那一刻在单击时不会缩回。

我知道有一种使用 .position 代替 .offset 的解决方法，但是无论我阅读了多少文档，我都无法弄清楚如何将 $(window) 添加到 .offset

这是我到目前为止所得到的：

```
$(document).ready(function() {
$('.title-bar, #menu-wrap').click(function() {
if($('#menu-wrap').offset().top === 0){
    $('#menu-wrap').stop().animate({top:'-300px'}, 1000);
} else {
    $('#menu-wrap').stop().animate({top:'0px'}, 1000);
}
});
});​ 
```

在这里，它在[小提琴中](http://jsfiddle.net/2Tdx7/1/)

我确信解决方案很简单，但是我很难开始将 Jquery 脚本串在一起——这比我迄今为止学到的任何其他东西都花费了我更长的时间，正如你可以想象的那样（或者不是！）真的很令人沮丧。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T11:09:24.360

这是因为在滚动发生时 offset() 位置会发生变化。试试这个代码它会工作

```
$(document).ready(function() {
$('.title-bar, #menu-wrap').click(function() {

  if($('#menu-wrap').offset().top - $(window).scrollTop() === 0){
    $('#menu-wrap').stop().animate({top:'-300px'}, 1000);
  } else {
    $('#menu-wrap').stop().animate({top:'0px'}, 1000);
    $('#menu-wrap').offset().top = 0;
  } 

});});​​ 
```

# hadoop - 无法计算 MAX

> ID：11900035
> 
> 赞同：2
> 
> 时间：2012-08-10T10:43:45.527
> 
> 标签：hadoop, apache-pig

## 设置数据

```
mkdir data
echo -e "1\n2\n3\n4\n8\n4\n3\n6" > data/data.txt 
```

## 以本地模式启动 Pig

```
pig -x local 
```

## 脚本

```
a = load 'data' Using PigStorage() As (value:int);
b = foreach a generate MAX(value);
dump b; 
```

**错误 org.apache.pig.tools.grunt.Grunt - 错误 1045：无法将 org.apache.pig.builtin.MAX 的匹配函数推断为多个匹配或都不匹配。请使用显式演员表。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T10:45:41.343

刚刚找到答案，在调用函数之前只需要一个 GROUP ALL ......感觉错误信息可能会更清晰一些......

```
a = load 'data' Using PigStorage() As (value:int);
b = GROUP a ALL;
c = foreach b generate MAX(a.value);
dump c;

> 8 
```

# python - Python返回存储在目录中的最新csv文件的文件路径/文件名

> ID：11900038
> 
> 赞同：1
> 
> 时间：2012-08-10T10:43:48.697
> 
> 标签：python, csv

我有一个存储 csv 文件的文件夹。如何让 python 搜索这个文件夹并返回最近创建的文件的文件名。例如搜索 C:\CSVfiles 并以 C:\CSVfiles\CSVmostrecent.csv 的形式返回文件名？我正在使用窗户。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-10T10:47:31.537

您可以使用函数的`key`参数`max()`：

```
import os
import glob

filename = max(glob.iglob("c:/csvfiles/*.csv"), key=os.path.getmtime) 
```

根据您的意图，您可能希望使用[`os.path.getctime`](http://docs.python.org/library/os.path.html#os.path.getctime)而不是[`os.path.getmtime`](http://docs.python.org/library/os.path.html#os.path.getmtime).

# java - testng 中是否有 testFinished 侦听器方法？

> ID：11900042
> 
> 赞同：0
> 
> 时间：2012-08-10T10:44:03.373
> 
> 标签：java, testing, automated-tests, testng, actionlistener

`onFinish(ITestContext context)`在所有测试和配置方法运行后调用该方法。

我正在搜索一个等效方法，该方法在**单个**测试**及其**所有**配置方法**后调用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T10:56:33.367

一个带有Junit的@after注解的方法会在每个方法运行之后运行，你也可以使用@afterClass在who单元测试类之后运行。例如

```
@Before
public final void setUp() { //Set up some data to use }

@After
public final void tearDown() { //remove the data } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T00:31:05.773

根据TestNG 文档的[依赖注入](http://testng.org/doc/documentation-main.html#native-dependency-injection)部分，您可以指定类型的参数`java.lang.reflect.Method`：

> 任何@BeforeMethod（和@AfterMethod）都可以声明java.lang.reflect.Method 类型的参数。此参数将接收此 @BeforeMethod 完成后（或在为 @AfterMethod 运行的方法之后）将调用的测试方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-11T05:58:02.600

猜猜你正在寻找[IInvokedMethodListener](http://testng.org/javadocs/org/testng/IInvokedMethodListener.html) ..

# java - 如何从正则表达式中捕获值？

> ID：11900043
> 
> 赞同：0
> 
> 时间：2012-08-10T10:44:04.887
> 
> 标签：java, regex

如何从正则表达式中提取值，其中任何占位符都可以由 a 重新引用`$number_of_occurance value`？

例如，我有一个字符串`final_0.25Seg1-Frag1`，我想使用`0.25`通配符在文件中查找该字符串的所有匹配项，我可以使用

```
Pattern regex = Pattern.compile( "/vod/final_\\d+\\.\\d+Seg1-Frag1" );
Matcher regexMatcher = regex.matcher(data2[0]); 
```

我想保留值的值，`\\d+\\.\\d`并在所有匹配的行中找到该位置的最大值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T10:47:55.587

你看过[Pattern group](http://www.exampledepot.com/egs/java.util.regex/Group.html) s 吗？您可以遍历这些以识别匹配的子表达式。

从链接的例子。匹配器。[group](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/regex/Matcher.html#group%28int%29) (0) 是完整的表达式。

```
CharSequence inputStr = "abbabcd"; // could be a String type
String patternStr = "(a(b*))+(c*)";

// Compile and use regular expression
Pattern pattern = Pattern.compile(patternStr);
Matcher matcher = pattern.matcher(inputStr);
boolean matchFound = matcher.find();

if (matchFound) {
    // Get all groups for this match
    for (int i=0; i<=matcher.groupCount(); i++) {
        String groupStr = matcher.group(i);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T10:49:58.907

请举个例子。我想您需要阅读 Mathcer 文档[http://docs.oracle.com/javase/7/docs/api/index.html?java/util/regex/Matcher.html](http://docs.oracle.com/javase/7/docs/api/index.html?java/util/regex/Matcher.html)。`group`您可以通过方法访问捕获组。

# java - 其他线程引用的已卸载 OSGi 包中的对象会发生什么情况？

> ID：11900044
> 
> 赞同：3
> 
> 时间：2012-08-10T10:44:06.103
> 
> 标签：java, osgi

假设我有一个包含组件 B 的 Bundle A，它不是 Export-Package 的一部分。一旦激活，该组件将自行安排定期运行。调度程序由另一个包提供。

我的问题是，如果我在组件 B 正在由调度程序的线程池中的线程运行时卸载 Bundle A，这将意味着什么？线程会继续运行吗？还是线程会抛出异常？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-10T16:40:51.667

捆绑包有一个生命周期。当捆绑包处于活动状态时，它将在卸载之前停止。如果“组件 B”是声明式服务组件，它也会被停止。如果没有，那么至少会触发捆绑激活器中的 stop 方法。

在停止期间，您（作为组件 B 的提供者）负责从计划中取消计划组件，以便将其从线程池中删除。如果线程当前正在运行，那么您应该实现一个取消功能，以便可以中止它。

如果您没有正确清理（即取消计划/取消线程），则可能会再次执行该线程。如果您从该线程中访问 OSGi API，那么您将获得 IllegaleStateException（对于某些 API 使用，因为捆绑包的 BundleContext 在停止后变得无效）。但是，如果不是，那么您的线程可能会继续永远运行。对象和内存不会被释放。类和捆绑类加载器不会被垃圾收集。因此，正确实施“停止”非常重要。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-10T11:10:29.850

如果您使用代理引用在模块之间进行绑定，则在您替换模块之前，这些代理可能无效。

如果您有直接绑定，则“未安装”模块不会真正删除，直到它没有在任何地方使用。您可以替换它，新用途将使用新库。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-13T07:13:51.003

OSGi 中没有魔法，对对象的现有引用被维护并防止垃圾收集器获取相应的类加载器。

幸运的是，DS 让相应的清理工作变得非常容易。

# asp.net-mvc - Web服务在Visual Studio 2010中不起作用

> ID：11900050
> 
> 赞同：1
> 
> 时间：2012-08-10T10:44:25.983
> 
> 标签：asp.net-mvc, visual-studio-2010, web-services

我在 Visual Studio 2010 中创建了一个 Web 服务。我创建了一个包含命令及其描述的表的数据库。我的程序是：我的课程：-DataHelper.cs

```
using System;
using System.Data;
using System.Configuration;
using System.Web;
using System.Web.Security;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Web.UI.WebControls.WebParts;
using System.Web.UI.HtmlControls;
using System.Data;
using System.Data.SqlClient;

/// <summary>
/// Summary description for DataHelper
/// </summary>

    public class DataHelper
    {
        public static string GetData(string Command)
        {
            string Explanation = " ";
            SqlConnection con = new SqlConnection(@"Data Source=CSS-L3-D008;Initial Catalog=works1;Integrated Security=true;");
            SqlCommand cmd = new SqlCommand("Select Explanation from Data1 where Command= '" + Command.ToUpper() + "'", con);
            con.Open();
            SqlDataReader dr = cmd.ExecuteReader();
            while (dr.Read())
            {
                Explanation = dr["Explanation"].ToString();
            }
            dr.Close();
            con.Close();
            return Explanation;

        }
    } 
```

和Service1.asmx

```
Imports System.Web.Services
Imports System.Web.Services.Protocols
Imports System.ComponentModel

' To allow this Web Service to be called from script, using ASP.NET AJAX, uncomment the following line.
' <System.Web.Script.Services.ScriptService()> _
<System.Web.Services.WebService(Namespace:="http://tempuri.org/")> _
<System.Web.Services.WebServiceBinding(ConformsTo:=WsiProfiles.BasicProfile1_1)> _
<ToolboxItem(False)> _
Public Class Service1
    Inherits System.Web.Services.WebService

    Private Property DataHelper As Object

    <WebMethod()>
    Public Function HelloWorld() As String
        Return "Hello World"
    End Function

    <WebMethod()>
    Public Function GetData(Command) As String

        Return DataHelper.GetData(Command)
    End Function
End Class 
```

问题是，当我运行它时，我得到了 webmethods HelloWorld 和 GetData 但 GetData 不起作用。当我单击 HelloWorld() 时，我得到调用方法并且它运行正常。但是当我单击 GetData() 时，我得到调用按钮，然后它显示“测试表单仅适用于以原始类型作为参数的方法。” 实际上它应该给出一个框，我可以在其中输入命令，并且应该从 sql server 返回描述。请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T13:39:32.790

服务中的 GetData 方法是否应该声明 Command 参数的类型？：

```
<WebMethod()>
Public Function GetData(Command As String) As String
    Return DataHelper.GetData(Command)
End Function 
```

# javascript - 超过最大堆栈大小

> ID：11900056
> 
> 赞同：1
> 
> 时间：2012-08-10T10:44:48.503
> 
> 标签：javascript, jquery

```
 var myArray = [];
     $('#students_targeted option:selected,
#cc_students_targeted option:selected').each(function(){
       myArray.push(data);
     }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T10:49:21.217

这意味着您已达到最大堆栈大小（换句话说，您已达到数组中元素的最大限制）。

**UPD：**您可能需要使用以下代码：

```
 var myArray = [];
     $('#students_targeted option:selected,
#cc_students_targeted option:selected').each(function(){
       myArray.push($(this).val());
     }); 
```

# android - 在android中获取联系人事件详细信息

> ID：11900059
> 
> 赞同：0
> 
> 时间：2012-08-10T10:45:08.333
> 
> 标签：android, cursor, android-contacts

我需要在我的 android 应用程序中获取所有联系人的所有事件。

谁可以帮我这个事？我需要为下面放置 Uri..

```
Cursor events = getContentResolver().query(xxxx,null,ContactsContract.CommonDataKinds.Email.CONTACT_ID + " = " + contactId, null, null); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-23T15:20:08.563

试试这个方法，应该可以的。做`Log.d(tag, "Output here");`测试你的输出，但它应该工作。它在这里。

```
public void getEvent(String contactId)
    {
        final String[] projection = new String[] {
                Event.CONTACT_ID,
                Event.START_DATE,
                //Event.TYPE,
                Event.LABEL
        };

        final String filter = Data.MIMETYPE + " = ? AND " + Data.CONTACT_ID + " = ? ";
        final String parameters[] = {Event.CONTENT_ITEM_TYPE, contactId};

        Cursor cursor =  context.getContentResolver().query(Data.CONTENT_URI, 
                    projection, 
                    filter, 
                    parameters,
                    null);

        if(cursor.moveToFirst())
        {
            for(cursor.moveToFirst(); !cursor.isAfterLast(); cursor.moveToNext())
            {
                final String contact_id = cursor.getString(cursor.getColumnIndex(Event.CONTACT_ID));
                final String startDate = cursor.getString(cursor.getColumnIndex(Event.START_DATE));
                //final String type = cursor.getString(cursor.getColumnIndex(Event.TYPE));
                final String label = cursor.getString(cursor.getColumnIndex(Event.LABEL));
            }
        }

    } 
```

# activerecord - Rails 回调 after_save 未设置属性

> ID：11900061
> 
> 赞同：1
> 
> 时间：2012-08-10T10:45:19.223
> 
> 标签：activerecord, callback, ruby-on-rails-3.2

我正在处理 after_save 回调的问题。我确信有一个简单的解决方案，但我无法弄清楚。

我有 3 个模型：用户、产品、投标。Product 表包含一个布尔字段“available”，默认设置为true。如果用户出价，则可用字段应设置为 false。我认为这应该与出价模型的回调一起使用。我可以通过键入以下内容访问并设置控制台中的可用字段： b = Bid.last b.product.available = false => false 但是我无法通过控制器更改它，所以我认为它不会执行回调. 我究竟做错了什么？感谢大家的帮助！

**产品.rb**

```
class Product < ActiveRecord::Base

has_one :bid
belongs_to :user
end 
```

**出价.rb**

```
class Bid < ActiveRecord::Base
attr_accessible :product_id, :user_id, :product
belongs_to :product
belongs_to :user
after_save :set_product_status

def set_product_status
self.product.available = false
end
end 
```

**bids_controller.rb**

```
...
def create
@user = current_user
product = Product.find(params[:product_id])
@bid = @user.bids.build(product: product)

respond_to do |format|
if @bid.save
... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T13:20:29.320

由于出价属于产品，您也应该保存产品。

```
def set_product_status
  self.product.available = false
  self.product.save
end 
```

# ruby-on-rails - 范围和范围在rails

> ID：11900062
> 
> 赞同：14
> 
> 时间：2012-08-10T10:45:22.750
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

有人可以解释这种方法的作用以及我可以传递给它的内容吗？

```
scoped(options = nil)
Returns an anonymous scope. 
```

还有作用域方法的作用是什么？看文档后我不明白。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-08-10T12:49:26.923

在 ActiveRecord 中，所有查询构建方法（如`where`、`order`、`joins`等`limit`）都返回一个所谓的*范围*。仅当您调用类似的 kicker 方法`all`或`first`执行构建查询并返回数据库的结果时。

类`scoped`方法还返回一个范围。默认情况下返回的范围是空的，这意味着结果集不会受到任何限制，这意味着如果执行查询，将返回所有记录。您可以使用它来提供“空”替代方案，例如 MurifoX 的*query_by_date*示例。或者您可以使用它将多个条件组合到一个方法调用中，例如：

```
Model.scoped(:conditions => 'id < 100', :limit => 10, :order => 'title ASC')

# which would be equivalent to
Model.where('id < 100').limit(10).order('title ASC') 
```

`scope`类方法允许您定义一个也返回范围的类方法，例如：

```
class Model
  scope :colored, lambda {|col|
    where(:color => col)
  }
end 
```

可以这样使用：

```
Model.colored 
```

范围的好处是您可以（几乎）按照您的意愿组合它们，因此以下是绝对可能的：

```
Model.red.where('id < 100').order('title ASC').scoped(:limit => 10) 
```

我也强烈建议阅读[http://guides.rubyonrails.org/active_record_querying.html](http://guides.rubyonrails.org/active_record_querying.html)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-10T11:51:09.010

`ActiveRecord`我过去使用过它。当您像这样对查询接口 进行链式调用时：

```
Model.where(:conditions).where(:more_conditions).where(:final_conditions) 
```

它们中的每一个都已经确定了范围，使得链可以毫无问题地工作。但是，假设您有这样的事情：

```
Model.query_by_date(date).query_by_user(user).query_by_status(status)

scope :query_by_date, lambda { |date|
  case date
  when "today"
    where(:date => Date.today)
  when "tomorrow"
    where(:date => Date.tomorrow)
  else
    # Any value like '' or 0 or Date.whatever
  end
} 
```

如果日期参数不是今天或明天，这将导致错误。它将选择最后一个值并尝试将此查询与下一个链接起来`query_by_user`，从而产生一个`undefined method default_scoped? for ''`. 但是，如果您`scoped`在条件中放置一个方法`else`，它将毫无缺陷地工作，因为您对 activerecord 说您通过了此方法/命名范围并且没有对 进行任何调用`where/find/other activerecord methods`，而是返回了一个范围对象，所以您可以继续链接查询和东西。
最终会是这样。

```
else
  scoped
end 
```

希望你理解这个简单的例子。

# android - 传送内容

> ID：11900064
> 
> 赞同：0
> 
> 时间：2012-08-10T10:45:26.400
> 
> 标签：android, connection

是否可以使用 Android 中的服务器将一个应用程序的内容传输到另一个应用程序？例如，要使用服务器将图像从一个应用程序传输到另一个应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T10:59:36.373

您的意思是`server`（如 Internet 上某处的 TCP/IP 服务器中）还是`Service` [http://developer.android.com/reference/android/app/Service.html](http://developer.android.com/reference/android/app/Service.html)作为应用程序用来与之交谈的 Android 服务彼此？

如果您指的是 Internet 服务器，那么只要您了解如何执行网络通信，这当然是微不足道的。

如果你的意思是Android Service，你可以通过Service传递任何Bundle，所以只要你要传输的数据是Parcelable（可以放入Bundle），那么你就可以传输它。

# jquery - 从 JSON/jquery 获取 IP 地址

> ID：11900072
> 
> 赞同：1
> 
> 时间：2012-08-10T10:45:58.633
> 
> 标签：jquery, json

我有以下获取 IP 地址的代码，我想将该 data.ip 存储在全局范围内，我可以在文件中的任何位置访问它。

```
 <script>
ip = null;
$.getJSON("http://jsonip.appspot.com?callback=?",
  function(data){
       ip = data.ip;
alert(ip); //return ip address correctly
  });
alert(ip); //undefined or null
</script> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-04T06:16:46.603

jsonip.appspot.com 已经下线了！

改用此端点

[http://jsonip.com/](http://jsonip.com/)

这将返回

{"ip":"222.127.106.162","about":"/about"}

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-10T11:16:46.330

这会将 IP 地址设置为隐藏的输入字段。

```
<script>
ip = null;
$.getJSON("http://jsonip.appspot.com?callback=?", function(data) {
    ip = data.ip;
    $("#getip").val(ip)
    alert(ip); //return ip address correctly
});
alert(ip); //undefined or null
</script>

<input id="getip" type="hidden" /> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-10T12:38:25.237

它确实将 ip 地址存储在函数外部的变量中（我假设这是您的全局范围，因为它在脚本标签内）。

您的代码的问题在于时间。IP 存储在 ip 变量中的位置在代码的这一部分中：

```
 function(data){
       ip = data.ip;
       alert(ip); 
  } 
```

在您的代码中，此函数是一个回调函数。这意味着在调用`$.getJSON()`完成并收到来自服务器的响应之前，它不会被执行。在此之前，您的其余代码将继续执行。

这一切意味着当`alert()`你的调用刚刚`$.getJSON()`执行时，服务器还没有响应，因此回调函数没有被执行。因此没有设置 ip 变量。

所以解决方案是这样的：您必须以确保服务器有时间响应的方式编写代码，然后再尝试使用它响应的数据。

[有关更多信息，请参阅 Ivan Karajas 在评论中提供的此链接](https://stackoverflow.com/questions/11233633/understanding-asynchronous-code-in-laymans-terms)中的Brandon Tillys 回答。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-10T12:51:49.797

虽然这不是推荐的做事方式，但执行同步 Ajax 调用应该可以解决您认为的问题。

```
ip = null;
$.ajax({
    url: 'http://jsonip.appspot.com/',
    async: false,
    dataType: 'json',
    contentType: 'application/j-son;charset=UTF-8',
    success: function (data) {
        ip = data.ip
        alert(ip);
    }
});
alert(ip); 
```

再次强调，**不推荐**这样做，因为执行同步 Ajax（代表*异步*Javascript 和 Xml）是不规则的，并且有点违背 Ajax 的目的。但是，如果您绝对需要您的 Web 应用程序等待返回该数据，那么这样做应该可行。我会做一个小提琴，但 URL 不允许来自 jsfiddle 的请求。

如果您可以对您的应用程序进行编码，使其不依赖于继续执行的响应，那就更好了。例如，如果您在 Ajax 响应成功返回后调用了一个函数，如下所示：

```
ip = null;
$.ajax({
    url: 'http://jsonip.appspot.com/',
    dataType: 'json',
    contentType: 'application/j-son;charset=UTF-8',
    success: function (data) {
        ip = data.ip
        alert(ip);
        gotAjaxResponse()
    }
});

function gotAjaxResponse() {
    alert(ip);
} 
```

请注意，我们仍在使用全局变量`ip`（这是另一种不好的做法，但我将把该演讲留到另一天 =），至少在继续执行依赖于拥有该数据的代码之前，您正在等待响应。

另外，请注意，第二个示例仍然使用 generic `$.ajax()`，没有`async: false`，您可以使用该`$.getJSON()`方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-10T10:57:12.923

你应该在全局范围内使用“var”吗？我认为你创建了两个变量

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-10T12:03:25.897

是的，同意@Evan，使用回调可以解决这个问题，

```
<script>
var ip = null;

function getIp(callback){$.getJSON("http://jsonip.appspot.com?callback=?",
  function(data){
       var tempip = data.ip;
alert(tempip); //return ip address correctly
callback(tempip);
  });}

function callback(tempip)
{
ip=tempip;
 alert(ip); //undefined or null
}

</script> 
```

# asp.net - 按 F5 后页面不加载

> ID：11900073
> 
> 赞同：1
> 
> 时间：2012-08-10T10:46:00.470
> 
> 标签：asp.net, linq-to-sql

我正在使用 ASP.NET 3.5 C# 和 SQL Server 2005。我也在使用 LINQ to SQL。

该项目自 1 年以来运行良好。

突然我从昨天得到了这个输出，它也没有加载登录页面。它在最后一行输出后停止加载

> “WebDev.WebServer.EXE”（托管）：已加载“匿名托管的 DynamicMethods 程序集”

**是LINQ错误吗？或者任何与 WebDev.WebServer.exe 相关的东西？**

我检查了 GAC，我有 webdev.webserver dll、manifest 和 exe。

**错误：**

> “WebDev.WebServer.EXE”（托管）：已加载“C:\WINDOWS\assembly\GAC_32\mscorlib\2.0.0.0__b77a5c561934e089\mscorlib.dll”，跳过加载符号。模块已优化，调试器选项“仅我的代码”已启用。“WebDev.WebServer.EXE”（托管）：已加载“C:\Program Files\Common Files\Microsoft Shared\DevServer\9.0\WebDev.WebServer.EXE”，跳过加载符号。模块已优化，调试器选项“仅我的代码”已启用。'WebDev.WebServer.EXE'（托管）：已加载 'C:\WINDOWS\assembly\GAC_32\WebDev.WebHost\9.0.0.0__b03f5f7f11d50a3a\WebDev.WebHost.dll'，跳过加载符号。模块已优化，调试器选项“仅我的代码”已启用。'WebDev.WebServer.EXE'（托管）：已加载 'C:\WINDOWS\assembly\GAC_MSIL\System.Windows。Forms\2.0.0.0__b77a5c561934e089\System.Windows.Forms.dll'，跳过加载符号。模块已优化，调试器选项“仅我的代码”已启用。“WebDev.WebServer.EXE”（托管）：已加载“C:\WINDOWS\assembly\GAC_MSIL\System\2.0.0.0__b77a5c561934e089\System.dll”，跳过加载符号。模块已优化，调试器选项“仅我的代码”已启用。“WebDev.WebServer.EXE”（托管）：已加载“C:\WINDOWS\assembly\GAC_MSIL\System.Drawing\2.0.0.0__b03f5f7f11d50a3a\System.Drawing.dll”，跳过加载符号。模块已优化，调试器选项“仅我的代码”已启用。“WebDev.WebServer.EXE”（托管）：已加载“C:\WINDOWS\assembly\GAC_32\System.Web\2.0.0.0__b03f5f7f11d50a3a\System.Web.dll”，跳过加载符号。模块已优化，调试器选项“仅我的代码”已启用。“WebDev.WebServer.EXE”（托管）：已加载“C:\WINDOWS\assembly\GAC_MSIL\System.Configuration\2.0.0.0__b03f5f7f11d50a3a\System.Configuration.dll”，跳过加载符号。模块已优化，调试器选项“仅我的代码”已启用。“WebDev.WebServer.EXE”（托管）：已加载“C:\WINDOWS\assembly\GAC_MSIL\System.Xml\2.0.0.0__b77a5c561934e089\System.Xml.dll”，跳过加载符号。模块已优化，调试器选项“仅我的代码”已启用。“WebDev.WebServer.EXE”（托管）：已加载“C:\WINDOWS\assembly\GAC_MSIL\Microsoft.JScript\8.0.0.0__b03f5f7f11d50a3a\Microsoft.JScript.dll”，跳过加载符号。模块经过优化，调试器选项“只是我的代码” 已启用。'WebDev.WebServer.EXE'（托管）：加载 'C:\WINDOWS\assembly\GAC_MSIL\CppCodeProvider\8.0.0.0__b03f5f7f11d50a3a\CppCodeProvider.dll' 'WebDev.WebServer.EXE'（托管）：加载'C:\WINDOWS \assembly\GAC_32\System.Data\2.0.0.0__b77a5c561934e089\System.Data.dll'，跳过加载符号。模块已优化，调试器选项“仅我的代码”已启用。“WebDev.WebServer.EXE”（托管）：已加载“C:\WINDOWS\assembly\GAC_MSIL\System.Web.Services\2.0.0.0__b03f5f7f11d50a3a\System.Web.Services.dll”，跳过加载符号。模块已优化，调试器选项“仅我的代码”已启用。'WebDev.WebServer.EXE'（托管）：加载 'C:\WINDOWS\assembly\GAC_32\System.EnterpriseServices\2.0.0.0__b03f5f7f11d50a3a\System.EnterpriseServices.dll'，跳过加载符号。模块已优化，调试器选项“仅我的代码”已启用。“WebDev.WebServer.EXE”（托管）：已加载“C:\WINDOWS\assembly\GAC_MSIL\System.Web.Mobile\2.0.0.0__b03f5f7f11d50a3a\System.Web.Mobile.dll”，跳过加载符号。模块已优化，调试器选项“仅我的代码”已启用。'WebDev.WebServer.EXE'（托管）：加载 'C:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\Temporary ASP.NET Files\appointment\f1bc9095\26b546e2\assembly\dl3\1658e797\00f5b014_095dc901\AjaxControlToolkit。 DLL'，已加载符号。“WebDev.WebServer.EXE”（托管）：已加载“C:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\Temporary ASP.NET Files\appointment\f1bc9095\26b546e2\assembly\dl3\b5f58b02\00f07c5b_10f3c801\MCN。 WebControls.DLL' 'WebDev. WebServer.EXE'（托管）：加载 'C:\WINDOWS\assembly\GAC_MSIL\System.Runtime.Serialization\3.0.0.0__b77a5c561934e089\System.Runtime.Serialization.dll'，跳过加载符号。模块已优化，调试器选项“仅我的代码”已启用。“WebDev.WebServer.EXE”（托管）：已加载“C:\WINDOWS\assembly\GAC_MSIL\System.IdentityModel\3.0.0.0__b77a5c561934e089\System.IdentityModel.dll”，跳过加载符号。模块已优化，调试器选项“仅我的代码”已启用。“WebDev.WebServer.EXE”（托管）：已加载“C:\WINDOWS\assembly\GAC_MSIL\System.ServiceModel\3.0.0.0__b77a5c561934e089\System.ServiceModel.dll”，跳过加载符号。模块已优化，调试器选项“仅我的代码”已启用。'WebDev.WebServer.EXE'（托管）：加载 'C:\WINDOWS\assembly\GAC_MSIL\System.ServiceModel.Web\3.5.0.0__31bf3856ad364e35\System.ServiceModel.Web.dll'，跳过加载符号。模块已优化，调试器选项“仅我的代码”已启用。“WebDev.WebServer.EXE”（托管）：已加载“C:\WINDOWS\assembly\GAC_MSIL\System.WorkflowServices\3.5.0.0__31bf3856ad364e35\System.WorkflowServices.dll”，跳过加载符号。模块已优化，调试器选项“仅我的代码”已启用。“WebDev.WebServer.EXE”（托管）：已加载“C:\WINDOWS\assembly\GAC_MSIL\System.Core\3.5.0.0__b77a5c561934e089\System.Core.dll”，跳过加载符号。模块已优化，调试器选项“仅我的代码”已启用。'WebDev.WebServer.EXE'（托管）：已加载 'C:\WINDOWS\assembly\GAC_MSIL\System。Web.Extensions\3.5.0.0__31bf3856ad364e35\System.Web.Extensions.dll'，跳过加载符号。模块已优化，调试器选项“仅我的代码”已启用。“WebDev.WebServer.EXE”（托管）：已加载“C:\WINDOWS\assembly\GAC_MSIL\System.Web.Abstractions\3.5.0.0__31bf3856ad364e35\System.Web.Abstractions.dll”，跳过加载符号。模块已优化，调试器选项“仅我的代码”已启用。“WebDev.WebServer.EXE”（托管）：已加载“C:\WINDOWS\assembly\GAC_MSIL\System.Data.DataSetExtensions\3.5.0.0__b77a5c561934e089\System.Data.DataSetExtensions.dll”，跳过加载符号。模块已优化，调试器选项“仅我的代码”已启用。“WebDev.WebServer.EXE”（托管）：已加载“C:\WINDOWS\assembly\GAC_MSIL\System.Xml.Linq\3.5.0。0__b77a5c561934e089\System.Xml.Linq.dll'，跳过加载符号。模块已优化，调试器选项“仅我的代码”已启用。'WebDev.WebServer.EXE'（托管）：加载 'C:\WINDOWS\assembly\GAC_MSIL\System.Data.Linq\3.5.0.0__b77a5c561934e089\System.Data.Linq.dll'，跳过加载符号。模块已优化，调试器选项“仅我的代码”已启用。“WebDev.WebServer.EXE”（托管）：已加载“C:\WINDOWS\assembly\GAC_MSIL\System.Web.Routing\3.5.0.0__31bf3856ad364e35\System.Web.Routing.dll”，跳过加载符号。模块已优化，调试器选项“仅我的代码”已启用。“WebDev.WebServer.EXE”（托管）：已加载“C:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\Temporary ASP.NET Files\appointment\f1bc9095\26b546e2\App_Code.frd1cmfw。dll'，已加载符号。'WebDev.WebServer.EXE'（托管）：加载 'C:\WINDOWS\assembly\GAC_MSIL\System.Web.RegularExpressions\2.0.0.0__b03f5f7f11d50a3a\System.Web.RegularExpressions.dll'，跳过加载符号。模块已优化，调试器选项“仅我的代码”已启用。“WebDev.WebServer.EXE”（托管）：已加载“C:\WINDOWS\assembly\GAC_32\System.EnterpriseServices\2.0.0.0__b03f5f7f11d50a3a\System.EnterpriseServices.Wrapper.dll”，跳过加载符号。模块已优化，调试器选项“仅我的代码”已启用。'WebDev.WebServer.EXE'（托管）：加载 'C:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\Temporary ASP.NET Files\appointment\f1bc9095\26b546e2\App_global.asax.a8zsvehh.dll'，符号加载。'WebDev.WebServer.EXE'（托管）：加载 'C:\WINDOWS\assembly\GAC_32\System.Transactions\2.0.0.0__b77a5c561934e089\System.Transactions.dll'，跳过加载符号。模块已优化，调试器选项“仅我的代码”已启用。“WebDev.WebServer.EXE”（托管）：已加载“匿名托管的 DynamicMethods 程序集”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T11:45:51.423

sneha，您是否正在尝试通过附加 w3wp.exe 来调试您的应用程序。我猜您正在尝试使用 IE 进行调试...

在调试之前尝试构建，它可以在项目属性中禁用...

# c# - 从另一个类访问私有方法

> ID：11900076
> 
> 赞同：8
> 
> 时间：2012-08-10T10:46:09.973
> 
> 标签：c#

我有两个存储库类（`RepositoryFactory`和`BaseRepository`）在同一个项目中实现不同的接口。该类`BaseRepository`有一个私有方法，现在另一个类也需要该方法，具有相同的实现。

我没有复制该方法以使其保持私有，而是考虑了一种可能的替代方法，尽管到目前为止我找不到一个好的解决方案，因为根据定义，私有方法仅在其自己的类中具有范围。

使用继承并将方法更改为“受保护”也不是一种选择，因为这两个类在语义上没有链接。我不能使用返回方法结果的公共属性，因为返回类型是无效的。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2014-09-24T16:22:01.560

您可以使用反射。这是一个例子：

```
MethodInfo privMethod = objInstance.GetType().GetMethod("PrivateMethodName", BindingFlags.NonPublic | BindingFlags.Instance);
privMethod.Invoke(objInstance, new object[] { methodParameters }); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-10T10:59:34.703

在 C# 中做你想做的事是不可能的。您可以拥有的最接近的是`internal`，这使得该成员对整个程序集可见。也可以将这两个类设为私有并嵌套在另一个类中，但这并不总是合适的。

从事 C# 工作的 Mads Torgersen 对此有这样的看法：

> 我已经看到许多提案试图解决“类集可访问性”的一些概念。当然，复杂之处在于，与现有的可访问性不同，还没有一个自然组（每个人、程序集、派生类、单个类）可以将其绑定，因此即使使用另一个可访问性修饰符，您仍然需要语法（或其他东西）来定义组。
> 
> 有几种方法可以对其进行切片。我还没有看到明显正确的提案，但我认为问题是相关的，我会与设计团队讨论这个问题。

（[来源](http://connect.microsoft.com/VisualStudio/feedback/details/602150/a-practical-new-access-modifier-for-net-to-aid-in-developing-bullet-proof-code)）

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-10T11:03:26.773

你可以，但它看起来很尴尬。这利用了嵌套类能够从包含类访问私有内容的优势。然而，**即使某事是可能的，也不意味着你应该去做**。如果您只是将修饰符更改为`internal`您获得相同的行为，并且由于两个类耦合在一起，那么将它们发送到同一个程序集中是有意义的，因此内部修饰符是正确的答案。

```
public class BaseRepository
{
    public sealed class RepositoryFactory
    {
        public static BaseRepository Create()
        {
            var repo = new BaseRepository();

            repo.MethodRequiredByRepositoryFactory();

            return repo;
        }
    }

    private void MethodRequiredByRepositoryFactory() { }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-10-01T07:17:21.717

[参考](https://www.c-sharpcorner.com/UploadFile/75a48f/how-to-access-private-method-outside-the-class-in-C-Sharp/)

可以通过使用反射

1.  在 Visual Studio 中创建控制台应用程序。
2.  添加 2 个命名空间
    2.1\. `System`
    2.2.`System.Reflection`
3.  现在创建一个类，并在该类中创建一个私有方法，如下所示：

# java - Lambdaj：遍历 Map 并获取值并放入其他 Map

> ID：11900082
> 
> 赞同：1
> 
> 时间：2012-08-10T10:46:23.780
> 
> 标签：java, lambda, lambdaj

我是 lambdaj 的新手，所以想更习惯它。我想使用 lambdaj 更新此代码：

```
 Passed in parameter Map<String, Device> devices;
 final Map<String, String> resultHash = new HashMap<String, String>();
        for (Device device : devices.values()) {
            result.put(device.getAddress(), device.getName());
        } 
```

谢谢你的帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T11:44:12.353

1.  根据设备的地址索引设备，将为您提供 LambdaMap。
2.  将 LamdbaMap 的 Device 值转换为它们的名称，从而为您提供 LambdaMap。

从我的脑海中：

```
LambdaCollections.with(devices.values())
    .index(Lambda.on(Device.class).getAddress())
    .convertValues(Lambda.on(Device.class).getName()); 
```

# ruby-on-rails - 设计和 I18n - 重置密码路由问题

> ID：11900085
> 
> 赞同：2
> 
> 时间：2012-08-10T10:46:36.233
> 
> 标签：ruby-on-rails, ruby-on-rails-3, internationalization, routing, devise

我将 I18n 添加到使用 Devise 的 RoR 应用程序中，如果我尝试重置密码，现在会出现错误。错误是：

```
Routing Error
No route matches {:action=>"edit", :controller=>"devise/passwords", :reset_password_token=>"uMopWesaxczNn2cdePUQ"} 
```

如何正确设置我的设计路由以考虑 I18n？

**路线.rb**

```
 scope ":locale", locale: /#{I18n.available_locales.join("|")}/ do   
  devise_for :users, path_names: {sign_in: "login", sign_out: "logout"},
                   controllers: {omniauth_callbacks: "omniauth_callbacks"}
  root to: 'static_pages#home'
 end

   match '*path', to: redirect {|params| "/#{I18n.default_locale}/#{CGI::unescape(params[:path])}" }, constraints: lambda { |req| !req.path.starts_with? "/#{I18n.default_locale}/" }
   match '', to: redirect("/#{I18n.default_locale}") 
```

**application_controller.rb**

```
before_filter :set_locale
 def set_locale
   I18n.locale = params[:locale] if params[:locale].present?
 end

 def default_url_options(options = {})
   {locale: I18n.locale}
 end 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-13T10:52:14.780

我确实为这种情况创建了一个[示例应用程序](https://github.com/AlperKarapinar/rails-internationalization-sample)（设计+国际化）。自从我创建该应用程序以来已经有一段时间了，它可能有点错误/不完整，但关键是使用带括号的可选范围。

`devise_for :users`当您没有设置变量时，您的代码问题没有定义`:locale`（这是我从您的错误中猜测的，您的路线中的重定向代码可能不起作用 - 您真的不需要，我没有测试，但我不认为这是一个很好的做法）。此外，这就是它试图将令牌值分配为`:locale`变量的原因。

相反，您需要使用括号。所以这`:locale`将是可选的，并且您的路由定义在`:locale`未设置时将保持有效。

```
scope "(:locale)", :locale => /en|tr/ do
  devise_for :users
  root :to => "main#index"
end 
```

我希望它有所帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-07T18:36:57.167

我有同样的问题（密码重置时出现路由错误），但这是我找到的解决方案：路由错误不是由控制器或任何其他设计内部进程引起的，而是由视图引起的。`views/devise/mailer/reset_password_instructions.html.erb`在行中：

```
<%= link_to 'Change my password', edit_password_url(@resource, :reset_password_token => @resource.reset_password_token) %> 
```

需要更换为：

```
<%= link_to 'Change my password', edit_password_url(@resource, :reset_password_token => @resource.reset_password_token, :locale => I18n.locale) %>` 
```

我不知道为什么默认情况下不添加 locale 参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-12T15:25:35.517

我对设置 Devise 了解不多，但我确实花了一些时间研究国际化 Rails 路由，所以希望这个答案对你有用，如果不是作为你问题的答案，那么作为一个接近答案的参考（内容主要是我[在 i18n Railscast 的评论中写的评论的重新散列](http://railscasts.com/episodes/138-i18n-revised?view=comments)，这也是 Rails i18n 路由信息的良好来源）：

您的**application_controller.rb**对我来说看起来不错，但也许尝试将您的**routes.rb**更改为如下所示：

**config/routes.rb**（示例）

```
MyApp::Application.routes.draw do
  scope ":locale", locale: /#{I18n.available_locales.join("|")}/ do
    # ...
    match '/about',   to: 'static_pages#about'

    # handles /valid-locale
    root to: 'static_pages#home', as: "locale_root"
    # handles /valid-locale/fake-path
    match '*path', to: redirect { |params, request| "/#{params[:locale]}" }
  end

  # handles /
  root to: redirect("/#{I18n.default_locale}")
  # handles /bad-locale|anything/valid-path
  match '/*locale/*path', to: redirect("/#{I18n.default_locale}/%{path}")
  # handles /anything|valid-path-but-no-locale
  match '/*path', to: redirect("/#{I18n.default_locale}/%{path}")
end 
```

由于有两个`root_paths`，我在`:locale`范围内重命名了一个，这样应用程序和测试就不会发生冲突。我使用 RSpec 测试了路由，如下所示：

**规范/路由/routing_spec.rb**

```
require 'spec_helper'

describe "Routes" do

  describe "locale scoped paths" do
    I18n.available_locales.each do |locale|

      describe "routing" do
        it "should route /:locale to the root path" do
          get("/#{locale.to_s}").
            should route_to("static_pages#home", locale: locale.to_s)
        end
      end

      describe "redirecting", type: :request do

        subject { response }

        context "fake paths" do
          let(:fake_path) { "fake_path" }

          before { get "/#{locale.to_s}/#{fake_path}" }
          it { should redirect_to(locale_root_path(locale)) }
        end
      end
    end
  end

  describe "non-locale scoped paths" do

    describe "redirecting", type: :request do

      subject { response }

      context "no path given" do
        before { get "/" }
        it { should redirect_to(locale_root_path(I18n.default_locale)) }
      end

      context "a valid action" do
        let(:action) { "about" }
        let!(:default_locale_action_path) { about_path(I18n.default_locale) }

        context "with a valid but unsupported locale" do
          let(:unsupported_locale) { "fr" }

          before { get "/#{unsupported_locale}/#{action}" }
          it { should redirect_to(default_locale_action_path) }
        end

        context "with invalid information for the locale" do
          let(:invalid_locale) { "invalid" }

          before { get "/#{invalid_locale}/#{action}" }
          it { should redirect_to(default_locale_action_path) }
        end

        context "with no locale information" do
          before { get "/#{action}" }
          it { should redirect_to(default_locale_action_path) }
        end
      end

      context "invalid information" do
        let(:invalid_info) { "invalid" }

        before { get "/#{invalid_info}" }
        it { should redirect_to("/#{I18n.default_locale}/#{invalid_info}") }
        # This will then get caught by the "redirecting fake paths" condition
        # and hence be redirected to locale_root_path with I18n.default_locale
      end
    end
  end
end 
```

# excel - 需要将 Excel 公式拖到不相邻的列（参考单元格应相应更改）

> ID：11900086
> 
> 赞同：0
> 
> 时间：2012-08-10T10:46:36.493
> 
> 标签：excel, drag, excel-formula

我有一个 Excel 表，其中一列充满了将其链接到其他单元格的公式。假设 R 列与 I 到 L 列中的值相关联。T 列与 M 到 P 列的关系与 R 列与 I 到 L 列的关系相似。我可以拖动公式，但在我之间还有另一个单元格不想打扰。

有什么办法可以从 R 列复制公式并将它们粘贴到 T 列？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T12:02:41.930

如果您不想更改列，则应在公式中在列名前写一个“$”字符。

例如：

```
B1 = A1 + C1 
```

你不想改变列 C 写：

```
B1 = A1 + $C1 
```

但是，如果您不想更改单元格 C1，请编写：

```
B1 = A1 + $C$1 
```

# php - 脸书专辑 ID

> ID：11900091
> 
> 赞同：-3
> 
> 时间：2012-08-10T10:46:51.020
> 
> 标签：php, facebook, facebook-page, photo-gallery

我是新手，尽管我设法完成了工作，但这个问题超出了我的能力范围。

# 与 Facebook 相关的问题

[https://graph.facebook.com/211255505590483/albums?fields=id](https://graph.facebook.com/211255505590483/albums?fields=id)

上面的链接显示了 Facebook 页面的专辑列表。我想提取所有“id”并将它们放在下拉列表中。例如： `<option value="123456789">123456789</option>`

* * *

此部分在@Mathieu 回复后添加以消除混淆：

**问题：**我需要帮助来仅提取可用于下拉列表的专辑 ID。我已经尝试过“preg_match”，但我无法隔离并仅获取专辑 ID。我将整个内容作为单行或换行符获取，其中还包括“created_time”部分。

* * *

我已经有一个 PHP 脚本，当我直接将相册“id”放入其中时，它可以显示相册（Facebook 页面的）的所有照片。

我的“计划一”是每当访问者访问我的网站时，我的页面都会获取专辑“id”列表并且可以查看照片。

我的“计划二”是页面可以使用 cron 每天一次获取专辑“id”列表并存储在数据库中，这将防止多次调用 Facebook。

我觉得既然通过上面的链接可以得到专辑“id”的列表，那么就不需要AccessToken、Secret等了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T01:28:37.660

**完毕**

此脚本仅适用于 Facebook 页面以显示所有专辑。您需要一个单独的脚本来显示任何特定相册的所有照片。

***编辑：***我已经改进了解决方案。该脚本现在在一个下拉框中提供专辑 ID、专辑名称和专辑创建日期。

```
<?php

$facebook_page_owner = "211255505590483";

$string = file_get_contents('https://graph.facebook.com/'.$facebook_page_owner.'/albums?fields=id,name,cover_photo');
$jdata = json_decode($string);
$albumcount = count($jdata->data);

echo "There are ".$albumcount." Albums in this Facebook page.<br /><br />";

echo "<form method=\"post\" action=\"".$_SERVER['PHP_SELF']."\">";

echo "<select id=\"facebookalbumid\" name=\"facebookalbumid\">";

    $facebookalbumid = $_POST['facebookalbumid'];
    $i=0;
    while($i<=($albumcount-1))
        {
        $selected = ($jdata->data[$i]->id == $facebookalbumid) ? "selected='selected'" : "";
            if ($facebookalbumid == "") {
            $facebookalbumid = $jdata->data[$i]->id;
            }
        echo "<option value=\"".$jdata->data[$i]->id."\" $selected>".$jdata->data[$i]->id."</option>";
        $i++;
    }

echo "</select>";

echo " <input type=\"submit\" value=\"View Album\"></form><br />";

$string2 = file_get_contents('https://graph.facebook.com/fql?q=SELECT%20name,%20created%20FROM%20album%20WHERE%20owner='.$facebook_page_owner.'%20and%20object_id='.$facebookalbumid.'');
$adata = json_decode($string2);
$facebookalbumname = $adata->data[0]->name;
$albumdate = $adata->data[0]->created;
$facebookalbumdate = date("d-M-Y", $albumdate);

echo $facebookalbumname."<br />";
echo $facebookalbumdate."<br />";

?> 
```

# android - location.getspeed() 更新

> ID：11900097
> 
> 赞同：2
> 
> 时间：2012-08-10T10:47:07.070
> 
> 标签：android, gps, location

我有一个小问题。我在`location.getSpeed()`方法上找到了一个方法`onLocationChanged()`，当我呆在同一个地方时，`.getSpeed()`通常不会更新/更改为 0km/h。

我应该在哪里找到一个`location.getGpeed()`方法，当我留在原地时更新显示 0km/h？

还有一个问题。这是我的`locationListener`：

```
private final LocationListener locationListener = new LocationListener() 
    {public void onLocationChanged(Location location) {     
    boolean var = false;
    float distance;

        if (firstRun) { distance=0; firstRun=false; }
        else
        distance = location.distanceTo (startLocation);
        Tspeed.setText("0km/h");

        if (location.getSpeed()!=0) 
        {
            Tspeed.setText(""+(location.getSpeed()*3600/1000 +"km/h")); 
        }
        else
        {
            Tspeed.setText("0km/h");
        }

        sAllDistance += distance;  // 
        startLocation=location;
        Tdistance.setText(""+(int)SAllDistance+" m");

    } 
```

问题是：当`LocationManager`得到修复时，第一个`AllDistance`返回的距离`location.distanceTo()`是±50米。

我该如何解决？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-10T11:30:37.587

实际上，GPS 不会一直提供准确的信息。即使你呆在同一个地方，有时，纬度和经度也会有一点不同。我认为这取决于您提供的`minTime`方法。`minDistance``requestLocationUpdates(...)`

无论如何，一旦尝试更改这些值，如下所示。

```
locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 
             1000L(minTime), 2000.0f(minDistance), myLocationListener); 
```

希望能帮助到你。

**编辑：**

[根据文档](http://developer.android.com/reference/android/location/Location.html#hasSpeed%28%29)，您还可以做的另一件事是，如果此修复程序包含速度信息，则`location.hasSpeed()`返回，否则返回。当你留在同一个地方时，我猜它会返回。`true``false``false`

基于此，您可以执行诸如设置值之类的操作`textView`。

我没试过，但你可以试一次。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T03:00:53.140

由于大气、卫星几何、附近建筑物等原因，GPS 定位修复中存在连续的、变化的错误。

如果您试图确定 GPS 接收器是否静止，您可以做的最好的事情是检查速度是否低于某个可靠的阈值（例如 1kph）。

您可以执行诸如对速度值进行数字滤波之类的操作，例如以下是一个简单的可调节低通滤波器，可以平滑速度的变化......输入一个低值（例如 3），输出将对输入的变化非常敏感, 输入一个高值（例如 10），输出变得非常平滑。

```
 /**
     * Simple recursive filter
     *
     * @param prev Previous value of filter
     * @param curr New input value into filter
     * @return New filtered value
     *
     */
    private float filter(final float prev, final float curr, final int ratio) {
      // If first time through, initialise digital filter with current values
      if (Float.isNaN(prev))
        return curr;
      // If current value is invalid, return previous filtered value
      if (Float.isNaN(curr))
        return prev;
      // Calculate new filtered value
      return (float) (curr / ratio + prev * (1.0 - 1.0 / ratio));
    }

    filtSpeed = filter(filtSpeed, speed, 3); 
```

# gwt - GWT 生命周期流程

> ID：11900101
> 
> 赞同：1
> 
> 时间：2012-08-10T10:47:22.287
> 
> 标签：gwt

嗨，我是 GWT 的新手，但我已经了解并了解了 GWT 的功能和功能！但是当我们将创建一个项目时，我无法理解 GWT 的生命周期或工作流程

示例
我已经创建了 GWT 项目，所以在我从它开始的位置部署它之后

> web.xml 或 *.gwt.xml

以及它将去哪里
请指导我完成这个。GWT 的流程是什么，它将从哪里开始并继续。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T11:48:19.177

您要查找的内容称为 GWT 引导过程。[官方文档](https://developers.google.com/web-toolkit/doc/latest/FAQ_DebuggingAndCompiling#What%27s_with_all_the_cache/nocache_stuff_and_weird_filenames)中解释的很好，见第 1 到第 5 点。

请注意，上述解释仅适用于生产模式（一旦您的应用程序被编译和部署）。使用 GWT 开发者模式从 IDE 运行应用程序是完全不同的故事。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T11:25:55.290

你的问题对我来说听起来有点模棱两可或过于笼统。

为了更好地理解 GWT 项目，您必须阅读以下内容：[https ://developers.google.com/web-toolkit/doc/latest/DevGuideOrganizingProjects](https://developers.google.com/web-toolkit/doc/latest/DevGuideOrganizingProjects)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T11:31:34.570

从 gwt.xml 中，您将指定作为 gwt 起点的入口点类。入口点类包含将首先调用的 onload 模块函数。因此，您将从 onmoduleload() 开始编写要执行的第一个代码。

GWT UI 是在根面板上构建的，因此您放置的所有小部件都将绑定在 onmoduleload() 代码中的根面板上。

希望这有助于第一次拍摄

# java - 在 Eclipse 中集成 SWIG

> ID：11900107
> 
> 赞同：4
> 
> 时间：2012-08-10T10:47:40.083
> 
> 标签：java, c, java-native-interface, swig

是否有用于 Eclipse IDE 的插件，我可以在其中运行我的 SWIG 模块。我正在尝试在 Windows 中工作，所以任何人都可以告诉我在 Eclipse 中使用 SWIG 的任何可用插件吗？

我还需要运行 C/C++ 程序，所以 IDE 是最好的工作方式。

我不想使用 Microsoft Visual C++。

痛饮代码：

```
 %module test
    %{
      int fact(int num);
    %} 
```

Java代码：

```
class Runme{
       public static void main(String argv[])
            {

              test.fact(100);
             }
          } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T11:24:58.267

我假设你想添加类似的东西：

```
$ swig -java interface.i 
```

到 Eclipse 构建过程。也许看看：

[Eclipse 添加您自己的构建命令](https://stackoverflow.com/questions/2976610/eclipse-adding-your-own-build-command)

我认为 Eclipse 对 C/C++ 开发人员来说应该没问题

我对所有东西（C、Java、Android 项目）都使用 emacs，但涉及到一些学习曲线

# javascript - 使用 Modal 类的引导警报的本地化文本未正确显示

> ID：11900109
> 
> 赞同：0
> 
> 时间：2012-08-10T10:47:46.820
> 
> 标签：javascript, jquery, unicode, localization

我有以下代码：

```
$("#confirmDiv").confirmModal({
  heading: '@Language.ConfirmActionHeader',
  body: '@Language.ConfirmOrganizationDeleteBody)?',
  callback: function () {
    $.ajax({
      url: '@Url.Action("DeleteOrganization", "Administration")',
      data: { organizationId: orgId },
      traditional: true,
      dataType: 'json',
      async: 'false',
      success: function (result) {
        alert('Delete successfully');
      },
      error: function () {
        alert('Fail');
      }
    });
  }
});
$("#confirmYesBtn").text('@Language.ConfirmActionHeader');
$("#closebutton").text('@Language.CloseButtonLabel'); 
```

**Heading**显示正确的值，但ConfirmYesBtn**显示**相同的值，但带有一些数字和字符。我正在使用瑞典文化，并希望显示 Confirm 的值，即**Bekräfta**，确认按钮的文本是**Bekr#228;fta**

有什么方法可以将语言统一为 Unicode 还是我遗漏了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T12:49:21.427

`&`当您发布问题时，我认为角色以某种方式丢失了。确认按钮的文字是：`Bekr&#228;fta`不是`Bekr#228;fta`，对吧？

如果是这样，请在为按钮设置标签时使用`.html`而不是，`.text`以便浏览器可以解码字符实体，例如

```
$("#confirmYesBtn").html('@Language.ConfirmActionHeader'); 
```

工作示例 - [http://jsfiddle.net/EJ3nZ/](http://jsfiddle.net/EJ3nZ/)

```
// doesn't work
$("#one").text('Bekr&#228;fta');
// works as expected
$("#two").html('Bekr&#228;fta');​ 
```

# python - 我必须在 wsgi_module 中使用“def 应用程序”吗？

> ID：11900120
> 
> 赞同：3
> 
> 时间：2012-08-10T10:48:14.167
> 
> 标签：python, mod-wsgi

所以我在我的服务器上安装了 python，并且我将 wsgi_module 与 apache 一起使用。

我所有的python程序都必须使用这种格式吗：

```
def application(environ, start_response):
    headers = []
    headers.append(('Content-Type', 'text/plain'))
    write = start_response('200 OK', headers)

    input = environ['wsgi.input']
    output = cStringIO.StringIO()

    print >> output, "test"

    output.write(input.read(int(environ.get('CONTENT_LENGTH', '0'))))
    return [output.getvalue()] 
```

无论如何要设置它，这样我就可以编写python脚本并且只需：

```
print "test" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T10:55:52.040

是的，您的脚本当然需要具有**可调用**的（不一定是函数，它也可以是定义了 __call__ 方法的类），它接受*environ*和 *start_response* 参数，因为它是[wsgi 标准](http://www.python.org/dev/peps/pep-0333/)的一部分，这就是它的工作方式.

您想以 PHP 风格编写脚本（例如“打印某些东西”）的方式行不通。目前有一个名为[PSP](http://www.modpython.org/live/current/doc-html/pyapi-psp.html) (Python Server Pages) 的项目，它混合了代码和模板，但它并没有流行起来，因为它肯定不是 Python 编写应用程序的方式。

# php - 更改时区之间的日期和时间

> ID：11900126
> 
> 赞同：2
> 
> 时间：2012-08-10T10:48:32.920
> 
> 标签：php

我一直在尝试在给定日期和时间的时区之间进行转换。
代码胜于雄辩，所以这里是：

```
/**
 * Returns the date and time in the new timezone.
 *
 * @param string $datetime:
 *          the date and time to change between timezones
 * @param string $input_tz:
 *          the input timezone
 * @param string $output_tz:
 *          the output timezone
 * @return string The new date and time
 */
public function changeDateTime($datetime, $input_tz, $output_tz) {
    if($input_tz == $output_tz) return $datetime;
    /*
     * We calculate the hour and minute offset from GMT
     */
    date_default_timezone_set($output_tz);
    $out_dst = date('I', $datetime) ? 1 : 0;
    $out_hour_offset = intval(substr(date('O', $datetime), 1, 3)) + $out_dst;
    $out_minute_offset = intval(substr(date('O', $datetime)), - 2);

    date_default_timezone_set($input_tz);
    $in_dst = date('I', $datetime) ? 1 : 0;
    $in_hour_offset = intval(substr(date('O', $datetime), 1, 3)) + $in_dst;
    $in_minute_offset = intval(substr(date('O', $datetime)), - 2);

    /*
     * We subtract hour and minute offsets to come up with total difference
     */
    $hour_offset = $out_hour_offset - $in_hour_offset;
    $minute_offset = $out_minute_offset - $in_minute_offset;

    /*
     * Now we must take care of changing the day/month/year if necessary, as
     * well as the hour/minute for $datetime, and return that value.
     */
    $date = new DateTime($datetime);
    if($hour_offset > 0) {
        $date->add(date_interval_create_from_date_string($hour_offset . ' hours'));
        if($minute_offset > 0) $date->add(date_interval_create_from_date_string($minute_offset . ' minutes'));
    } else if($hour_offset < 0) {
        $date->sub(date_interval_create_from_date_string($hour_offset . ' hours'));
        if($minute_offset > 0) $date->sub(date_interval_create_from_date_string($minute_offset . ' minutes'));
    }
    return $date->format('Y-m-d H:i:s');
} 
```

但是，它似乎效果不佳。这是我正在运行以测试它是否有效的代码：

```
$newdatetime = $gato->changeDateTime("2012-08-10 11:33:33", 'Europe/London', 'Europe/Madrid');
echo $newdatetime; 
```

这是我的预期输出：2012-08-10 12:33:33
但这是我的实际输出：2012-08-10 11:33:33，这意味着时间没有变化。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T11:38:01.073

好的，试试这个：

```
function changeDateTime($datetime, $input_tz, $output_tz) {

    // Return original string if in and out are the same
    if($input_tz == $output_tz) {
        return $datetime;
    }

    // Save current timezone setting and set to input timezone
    $original_tz = date_default_timezone_get();
    date_default_timezone_set($input_tz);

    // Get Unix timestamp based on input time zone
    $time = strtotime($datetime);

    // Start working in output timezone
    date_default_timezone_set($output_tz);

    // Calculate result
    $result = date('Y-m-d H:i:s', $time);

    // Set timezone correct again
    date_default_timezone_set($original_tz);

    // Return result
    return $result;

}

$out = changeDateTime("2012-08-10 11:33:33", 'Europe/London', 'Europe/Madrid');
var_dump($out); 
```

与其忙于做所有复杂的数学运算，不如让 PHP 为您完成所有艰苦的工作；-)

[看到它工作](http://codepad.viper-7.com/wb06JO)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-07-16T01:03:49.757

如果您在这方面遇到了挫折，现在可以使用 DateTime 对象更清晰地完成它。

```
public function convertTZ($dateTimeString, $inputTZ, $outputTZ){
    $datetime = 
        \DateTime::createFromFormat('Y-m-d H:i:s', //input format - iso8601
        $dateTimeString, 
        new \DateTimeZone($inputTZ))
        ->setTimezone(new \DateTimeZone('$outputTZ'));

    //outputs a string, if you want the dateTime obj - remove ->format
    return $datetime->format('Y-m-d H:i:s'); //output format 

} 
```

# java - 如何在 Swing 中自动调整窗口大小

> ID：11900128
> 
> 赞同：4
> 
> 时间：2012-08-10T10:48:50.507
> 
> 标签：java, image, swing, jframe

我需要在 JFrame 中显示图像。如何使窗口大小根据图像大小自动调整。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-10T10:54:05.570

1.如果你把图像`Icon / ImageIcon`放在`JLabel`那时

*   必须测试返回的[Toolkit](http://docs.oracle.com/javase/7/docs/api/java/awt/Toolkit.html)`MaximumSize` for具体监视器`JFrame`

*   如果`PreferedSize`小于`MaximumSize`大小，则调用`JFrame#pack()`

*   否则得打电话`setSize()`

2.如果你把图像作为`Icon / ImageIcon`使用`Custom Painting`, `JComponent`, ei`JPanel`那么`JLabel`

*   那么这个`JComponen`t必须返回`PreferredSize`

    a)`JFrame#pack()`如果`PreferedSize`低于`MaximumSize`,则调用

    b) 否则必须调用`JFrame#setSize()`

    c）假设你不使用`Image#getScalledInstance`

3.我会在 中使用`Icon`，`JLabel`只有一个问题是图像可以小于屏幕上的预期尺寸，但没有问题，很可能将图像居中`JLabel.CENTER`到`JLabel`

# php - 从字符串中取出值，存储在 PHP 变量中？

> ID：11900130
> 
> 赞同：-1
> 
> 时间：2012-08-10T10:49:01.483
> 
> 标签：php, html, variables, search

我正在制作一种从 wordpress 调整图像大小的方法。

我需要从字符串中删除一个值，例如：

```
<img src="/path/img.jpg" width="600" height="400" /> 
```

我需要删除 600 和 400 值并将其放入我的函数中，如下所示：

```
resiseImg($width, $height); 
```

然后我将返回*宽度*和*高度*并执行`str_replace`. 但是我不确定如何实际将它们从字符串中取出，我想一种丑陋的方法可能是对字符串执行某种形式的二进制搜索算法，除非没有其他方法，否则我真的不想这样做选项。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T11:14:15.637

您应该避免在此任务中使用 RegEx，因为您更关心从 HTML 中获取有意义的“东西”，即属性，即您正在解析不匹配。对于这个 DOMDocument 应该是理想的选择。

```
$fragment = new DOMDocument();
$fragment->loadHTML(  YOUR_HTML );
$image = $fragment->getElementsByTagName("iframe")->item(0);
print $image->getAttribute('width');
print $image->getAttribute('height'); 
```

义务：[不能坚持，为时已晚](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags)。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-08-10T11:00:45.690

```
php > $a = '<img src="blahh" width="600px" height="400px" />';
php > print preg_match_all('/[0-9]+/',$a,$res);
2
php > print_r($res);
Array
(
    [0] => Array
        (
            [0] => 600
            [1] => 400
        )
) 
```

# javascript - 更改特定标签的类别

> ID：11900131
> 
> 赞同：0
> 
> 时间：2012-08-10T10:49:02.950
> 
> 标签：javascript, jquery, html, css

我正在尝试将包含多个数据表的页面放在一起。由于页面可能会变长，我希望用户能够通过单击标题来折叠表格。我计划使用 + 图标表示有更多可用内容，使用 - 图标表示它是可折叠的。所以我需要切换作为图标的 i 标签的类名。就像我说的那样，该页面可以包含多个具有相同 i 标签的表格，所以我需要一些东西来涵盖它

这是示例 HTML。

```
<table class="table table-bordered">
        <thead class="heading" id="thead">
      <tr id="tr">
         <th id="th" colspan="3"><i class="icon-plus"></i> Basic info</th>
      </tr>
    </thead>
    <tbody class="content">
        <tr>
          <td>Registration</td>
          <td>ABC 123</td>
          <td>&nbsp;</td>
        </tr>
        </tbody>
</table>

<table class="table table-bordered">
        <thead class="heading" id="thead">
      <tr id="tr">
         <th id="th" colspan="3"><i class="icon-plus"></i> More info</th>
      </tr>
    </thead>
    <tbody class="content">
        <tr>
          <td>Start time</td>
          <td>11:57</td>
          <td>&nbsp;</td>
        </tr>
        </tbody>
</table> 
```

这是脚本

```
<script type="text/javascript">
jQuery(document).ready(function() {
  jQuery('.content').show();
  jQuery('.heading').click(function()
  {
    jQuery(this).next('.content').slideToggle('0');
    jQuery(this).parent().next("i").removeClass('icon-plus').addClass('icon-minus');
  });
});
</script> 
```

tbody 的显示和隐藏工作正常，但我无法更改图标，有什么线索吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T10:57:36.890

尝试改变

```
jQuery(this).parent().next("i").removeClass('icon-plus').addClass('icon-minus'); 
```

到

```
jQuery(this).find('i').toggleClass('icon-plus icon-minus'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T10:57:39.517

好的，首先永远不要在一个页面中为多个元素提供相同的 ID……永远。非常糟糕的做法，当需要引用一个特定元素时会导致复杂化。

至于 jquery，使用 addClass 和 removeClass：

```
jquery('.headingClass').removeClass('.headingclass');
jquery(this + 'i').addClass('.headingclass'); 
```

像这样：

```
<script type="text/javascript">
jQuery(document).ready(function() {
  jQuery('.content').show();
  jQuery('.heading').click(function()
  {
    jquery('.headingClass').removeClass('.headingclass');
    jquery(this + 'i').addClass('.headingclass');
    jQuery(this).next('.content').slideToggle('0');
    jQuery(this).parent().next("i").removeClass('icon-plus').addClass('icon-minus');
  });
});
</script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-10T11:01:05.390

而不是`jQuery(this).parent().next("i")`，使用`jQuery(this).find("i")`

在您的示例中，`jQuery(this)`是 thead 元素；`i`您要引用的元素是后代元素，而不是兄弟元素，因此`.parent().next("i")`请尝试匹配与您的 thead 和 tbody 元素处于同一级别的元素！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-10T11:20:52.853

试试这个（没有 + 和 - 的图标）

**注意：**我已经稍微改变了标记。

### CSS

```
i { padding:4px; cursor:pointer; }
.icon-minus {  color :red; }
.icon-minus:before { content:"-";}
.icon-plus { color :green }
.icon-plus:before { content:"+";} 
```

### HTML

```
<table class="table table-bordered">
<thead class="heading" >
    <tr >
        <th colspan="3" ><i class="icon-minus"></i>Basic info</th>
    </tr>
</thead>
<tbody class="content">
<tr>
    <td>Registration</td>
    <td>ABC 123</td>
    <td>&nbsp;</td>
</tr>
</tbody>
</table>

<table class="table table-bordered">
<thead class="heading" >
    <tr >
        <th colspan="3"> <i class="icon-minus"></i>More info</th>
    </tr>
</thead>
<tbody class="content">
<tr>
    <td>Start time</td>
    <td>11:57</td>
    <td>&nbsp;</td>
</tr>
</tbody>
</table> 
```

**​jQuery**

```
jQuery('.heading').bind('click',function(){
       jQuery(this).siblings('tbody').slideToggle('0');
       jQuery(this).find('i').toggleClass('icon-minus icon-plus');
}); 
```

​</p>

**[演示](http://jsfiddle.net/rELfz/)**

# asp.net-mvc - 在页面上首次调用 Url.Action 很慢

> ID：11900134
> 
> 赞同：6
> 
> 时间：2012-08-10T10:49:14.480
> 
> 标签：asp.net-mvc, performance, urlhelper, route-constraint

我有一个相当简单的 ASP.MVC 视图的性能问题。

这是一个应该几乎是即时的登录页面，但大约需要半秒钟。

经过大量挖掘后，问题似乎是第一次调用`Url.Action`- 它大约需要 450 毫秒（根据 MiniProfiler [）](http://miniprofiler.com/)，但这似乎非常慢。

随后的调用时间`Url.Action`小于 1 毫秒，这更符合我的预期。

无论我使用`Url.Action("action", "controller")`或`Url.Action("action")`，这都是一致的，但如果我使用 ，似乎不会发生`Url.Content("~/controller/action")`。当我打电话时也会发生这种情况`Html.BeginForm("action")`。

有谁知道是什么原因造成的？

[对源头](http://aspnetwebstack.codeplex.com/SourceControl/changeset/view/547b32ae3478#src/System.Web.Mvc/UrlHelper.cs)的挖掘表明这`RouteCollection.GetVirtualPath`可能是罪魁祸首，因为这对`Url.Action`和`Html.BeginForm`. 但是，肯定到处都在使用它吗？我的意思是，½ 秒太慢了。

我有 20 条左右的自定义路线（这是一个相当大的应用程序，带有一些旧版 WebForms 页面），但即便如此，时间似乎也太慢了。

任何想法如何解决它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-13T15:50:12.923

发现问题，它与路由表有关（干杯基里尔）。

基本上我们有很多看起来像这样的路线：

```
string[] controllers = GetListOfValidControllers();

routes.MapRoute(
    name: GetRouteName(),
    url: subfolder + "/{controller}/{action}/{id}",
    defaults: new { action = "Index", id = UrlParameter.Optional },
    constraints: new { controller = "(" + string.Join("|", controllers) + ")" }); 
```

事实证明，[正则表达式检查非常缓慢](http://samsaffron.com/archive/2011/10/13/optimising-asp-net-mvc3-routing)，非常缓慢。因此，我将其替换为`IRouteConstraint`仅针对 a 进行检查的实现`HashSet`。

然后我更改了地图路线调用：

```
routes.MapRoute(
    name: GetRouteName(),
    url: subfolder + "/{controller}/{action}/{id}",
    defaults: new { action = "Index", id = UrlParameter.Optional },
    constraints: new { controller = new HashSetConstraint(controllers) }); 
```

我还将[该链接文章中提到的 RegexConstraint](http://samsaffron.com/archive/2011/10/13/optimising-asp-net-mvc3-routing)用于更复杂的任何事情 - 包括许多这样的调用（因为我们有旧版 WebForm 页面）：

```
routes.IgnoreRoute(
    url: "{*allaspx}", 
    constraints: new { allaspx = new RegexConstraint( @".*\.as[pmh]x(/.*)?") }); 
```

这两个简单的更改完全解决了问题；`Url.Action`现在`Html.BeginForm`花费的时间可以忽略不计（即使有很多路线）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T11:59:50.903

在我看来，您的问题是编译视图。您需要在构建时预编译视图，这个问题就会消失。 [详情在这里](http://haacked.com/archive/2011/05/09/compiling-mvc-views-in-a-build-environment.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-12T08:49:09.310

```
 public class RegexConstraint : IRouteConstraint, IEquatable<RegexConstraint>
     {
    Regex regex;
    string pattern;

    public RegexConstraint(string pattern, RegexOptions options = RegexOptions.CultureInvariant | RegexOptions.Compiled | RegexOptions.IgnoreCase)
    {
        regex = new Regex(pattern, options);
        this.pattern = pattern;
    }

    public bool Match(System.Web.HttpContextBase httpContext, Route route, string parameterName, RouteValueDictionary values, RouteDirection routeDirection)
    {
        object val;
        values.TryGetValue(parameterName, out val);
        string input = Convert.ToString(val, CultureInfo.InvariantCulture);
        return regex.IsMatch(input);
    }

    public string Pattern
    {
        get
        {
            return pattern;
        }
    }

    public RegexOptions RegexOptions
    {
        get
        {
            return regex.Options;
        }
    }

    private string Key
    {
        get
        {
            return regex.Options.ToString() + " | " + pattern;
        }
    }

    public override int GetHashCode()
    {
        return Key.GetHashCode();
    }

    public override bool Equals(object obj)
    {
        var other = obj as RegexConstraint;
        if (other == null) return false;
        return Key == other.Key;
    }

    public bool Equals(RegexConstraint other)
    {
        return this.Equals((object)other);
    }

    public override string ToString()
    {
        return "RegexConstraint (" + Pattern + ")";
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-12-05T21:59:16.817

与从 IHttpModule 下载相比，我已将其剥离为“简单”...将单个文件设置到内存中并从操作中下载它。**由于某种原因（可能是MVC 管道加载、路由**） ，IHttpModule 更快（对于小文件，例如产品列表图像）。我没有在路由中使用正则表达式（这会更慢）。在 IHttpModule 中，我达到的速度与 URL 指向驱动器上的文件的速度相同（当然，如果文件在驱动器上，但不在 URL 指向的驱动器位置上）。

```
<system.webServer>
  <modules runAllManagedModulesForAllRequests="true">
     <add name="ImagesHandler" type="NsdMupWeb.ImagesHttpModule" />
  </modules>
</system.webServer>

//Code is made for testing
public class ImagesHttpModule : IHttpModule
{
    public void Dispose()
    {
    }

    public void Init(HttpApplication context)
    {
        context.BeginRequest += Context_BeginRequest;
    }

    private void Context_BeginRequest(object sender, EventArgs e)
    {
        var app = (HttpApplication)sender;
        if (app.Request.CurrentExecutionFilePathExtension.Length > 0)
        {
            var imagePathFormated = "/image/";
            var imagesPath = app.Request.ApplicationPath.TrimEnd('/') + imagePathFormated;
            if (app.Request.CurrentExecutionFilePath.StartsWith(imagesPath))
            {
                var path = app.Request.CurrentExecutionFilePath.Remove(0, imagesPath.Length);
                var parts = path.Split(new[] { '/' }, StringSplitOptions.RemoveEmptyEntries);
                if (parts.Length > 1)
                {
                    var ms = new MemoryStream();
                    Stream stream;

                    stream = System.IO.File.OpenRead(@"C:\Programming\Sindikat\Main\NsdMupWeb\Files\Cached\imageFormatProductList\1b1e2671-a365-4a87-97ba-063cf51ac34e.jpg");
                    var ctx = ((HttpApplication)sender).Context;
                    ctx.Response.ContentType = MimeMapping.GetMimeMapping(parts[1]);
                    ctx.Response.Headers.Add("last-modified", new DateTime(2000, 01, 01).ToUniversalTime().ToString("R"));

                    byte[] buffer = new byte[stream.Length / 2];
                    stream.Read(buffer, 0, buffer.Length);
                    ctx.Response.BinaryWrite(buffer);

                    buffer = new byte[stream.Length - buffer.Length];
                    stream.Read(buffer, 0, buffer.Length);
                    ctx.Response.BinaryWrite(buffer);
                    ctx.Response.End();
                }
            }
        }
    }
} 
```

# process.start - Windows 服务未使用 Process.Start() 启动 chrome

> ID：11900135
> 
> 赞同：0
> 
> 时间：2012-08-10T10:49:17.117
> 
> 标签：process.start

我编写了一个应该运行 chrome 实例的 Windows 服务。如何将服务附加到进程中，我能够将断点打到 Process.Start 但它不会打开 chrome。我也没有收到任何错误。

有人能帮我一下吗。

```
protected override void OnStart(string[] args)
        {
            var timer = new Timer(5000);
            timer.Elapsed += TimerElapsed;

            timer.Start();
        }

 void TimerElapsed(object sender, ElapsedEventArgs e)
        {
            try
            {
                var processes = Process.GetProcessesByName("Chrome");

                var found = false;
                foreach (var process in processes)
                {
                    if (process.MainWindowTitle.StartsWith("title"))
                    {
                        found = true;
                    }
                }

                if (!found)
                {
                    var process = Process.Start("Chrome", "http://localhost");
                   }
            }
            catch (Exception ex)
            { 

            }
        } 
```

如果我为它创建一个 Windows 应用程序，那么它工作正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T12:17:51.100

由于会话 0 隔离，我想这不是一个好主意。

点击[这里](http://blogs.windows.com/windows/b/developers/archive/2009/10/01/session-0-isolation.aspx)了解更多

# android - 将圆角和图像设置为按钮

> ID：11900137
> 
> 赞同：0
> 
> 时间：2012-08-10T10:49:21.797
> 
> 标签：android, android-layout, android-button

我正在尝试使按钮的角变圆，并设置背景图像。虽然我能够实现圆角按钮，但不能将图像设置为背景。当我尝试`android:drawableTop:@drawable/filename`时，按钮再次转换为其默认形状，文本位于图像下方，但我希望图像作为背景，那么如何将东西（圆角和背景图像）应用于按钮？

我创建了一个名为`button_shape`drawable 的 xml 文件；它的代码是：

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android" 

android:shape="rectangle"
>

<solid android:color="#ffffff"
     />

<corners
    android:bottomLeftRadius="20dp"
    android:bottomRightRadius="20dp"
    android:topLeftRadius="20dp"
    android:topRightRadius="20dp" />
<stroke android:width="3dp" android:color="#000000" />
</shape> 
```

我放置按钮的主要xml文件代码是：

```
<Button
    android:id="@+id/button1"
    android:layout_width="150dp"
    android:layout_height="40dp"
    android:layout_marginTop="179dp"
    android:background="@drawable/button_shape"
    android:text="Button"
    android:textColor="#000000" 
    /> 
```

请帮我解决一下这个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T11:40:34.793

在形状上使用它

```
solid android:color="@android:color/transparent" /> 
```

和 imageview 应该是

```
<ImageView
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"  android:scaleType="fitXY"   android:background="@drawable/shape"     
     android:src="@drawable/yourimage" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T05:45:52.560

> 使用此 background.xml 放入 Drowable 并设置在 Button android:background="@drawable/ background" 和 ovel_shape 是可绘制的 xml 文件，您可以在其中放置圆角的代码

```
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android" >

    <item
        android:id="@+id/rounded_corn"
        android:drawable="@drawable/ovel_shape"/>
    <item
        android:id="@+id/background_img"
        android:drawable="@drawable/image"/>

</layer-list> 
```

# java - 在Java中拆分4位整数

> ID：11900147
> 
> 赞同：4
> 
> 时间：2012-08-10T10:50:03.433
> 
> 标签：java, int

我想将一个 4 位整数拆分为 2。即转换`1234`为两个变量；`x=12`和`y=34`。使用 Java。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T10:53:20.827

```
int four = 1234;  
int first = four / 100;   
int second = four % 100; 
```

第一个有效，因为整数总是向下舍入，除以 100 时去掉最后两位数。

第二个称为模数，除以 100，然后取余数。这会去除除前两位之外的所有数字。

假设您的位数可变：

```
int a = 1234, int x = 2, int y = 2; 
int lengthoffirstblock = x; 
int lengthofsecondblock = y;
int lengthofnumber = (a ==0) ? 1 : (int)Math.log10(a) + 1; 
//getting the digit-count from a without string-conversion 
```

[如何在没有字符串转换的情况下计算整数中的数字？](https://stackoverflow.com/questions/554521/how-can-i-count-the-digits-in-an-integer-without-a-string-cast)

```
int first = a / Math.pow(10 , (lengthofnumber - lengthoffirstblock));
int second = a % Math.pow(10 , lengthofsecondblock); 
```

如果您遇到输入可能为负的情况，最后会有一些有用的东西：

```
Math.abs(a); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-10T10:53:20.630

```
int a = 1234;
int x = a / 100;
int y = a % 100; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-10T10:53:21.630

```
int i = 1234;
int x = 1234 / 100;
int y = i - x * 100; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-10T10:53:45.643

您可以将其视为字符串并使用[substring()](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html#substring%28int%29)或整数将其拆分：

```
int s = 1234;
int x = s / 100;
int y = s % 100; 
```

如果它最初是一个 int，我会将它保留为一个 int 并执行上述操作。

请注意，如果您的输入不是四位数，您需要考虑会发生什么。例如 123。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-13T06:17:52.720

如果您想拆分相同的号码：

```
int number=1234;
int n,x,y;         //(here n=1000,x=y=1)   
int f1=(1234/n)*x; //(i.e. will be your first splitter part where you define x)
int f2=(1234%n)*y; //(secend splitter part where you will define y) 
```

如果您想将数字拆分为 (12*x,34*y){其中 x=倍数/12 的倍数 & y=倍数/34 倍的倍数)，那么

1234=f(x(12),y(34))=f(36,68)

```
int number=1234;
int n;        //(here n=1000)  
int x=3;
int y=2; 
int f1=(1234/n)*x; //(i.e. will be your first splitter part where you define x)
int f2=(1234%n)*y; //(secend splitter part where you will define y) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-10T11:00:19.587

```
int i = 1234;
int x = i / 100;
int y = i % 100; 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-08-10T10:54:15.170

```
 int num=1234;
    String text=""+num;
    String t1=text.substring(0, 2);
    String t2=text.substring(2, 4);
    int num1=Integer.valueOf(t1);
    int num2=Integer.valueOf(t2);
    System.out.println(num1+" "+num2); 
```

# charts - JavaFX 2 中的仪表图

> ID：11900149
> 
> 赞同：1
> 
> 时间：2012-08-10T10:50:08.927
> 
> 标签：charts, javafx-2

有没有办法在 JavaFX 2 中生成一个简单的仪表图？似乎它在`javafx.scene.chart`包中不可用......（http://docs.oracle.com/javafx/2/charts/jfxpub-charts.htm）

像这样的东西：www.bscdesigner.com/kpi_designer_manual/gauge-chart.gif

或者这个：www.coresystems.ch/wp-content/uploads/files_downloads/help/country_package/manual/en/widget_04_sample_gauge_en.png

**编辑：**这是它应该接近的设计：[https ://dl.dropbox.com/u/274249/screenshot_score_meters.png](https://dl.dropbox.com/u/274249/screenshot_score_meters.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-09-09T13:06:23.930

对你来说为时已晚，但作为参考可能会很有趣。

***Medusa***拥有您能想象到的所有可配置仪表： [https ://github.com/HanSolo/Medusa](https://github.com/HanSolo/Medusa)

和一个教程：[https ://community.oracle.com/docs/DOC-992746](https://community.oracle.com/docs/DOC-992746)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T10:51:52.720

看看[JFXtras 2 项目](http://jfxtras.org/)，他们让你得到了覆盖。

# sql - 如果 mysql 表中不存在，则添加一个新条目

> ID：11900150
> 
> 赞同：1
> 
> 时间：2012-08-10T09:25:41.467
> 
> 标签：sql

我有一个下面结构的表。

```
mysql> desc depot;
+-------+----------+------+-----+---------+-------+
| Field | Type     | Null | Key | Default | Extra |
+-------+----------+------+-----+---------+-------+
| recd  | date     | YES  |     | NULL    |       |
| id    | int(11)  | YES  |     | NULL    |       |
+-------+----------+------+-----+---------+-------+ 
```

目前我有以下方式的记录。

```
mysql> select * from depot;
+---------------------+------+
| recd                | id   |
+---------------------+------+
| 2012-07-09          |   33 |
| 2012-07-11          |   32 |
| 2012-07-15          |   32 |
+---------------------+------+
3 rows in set (0.00 sec) 
```

我需要记录以下列方式打印查询，保留一个月日期的错过条目（比如 7 月 1 日至 7 月 31 日），并将值 id 设为 0 对应的错过日期。

select <一个神奇的查询>;

```
+------------+------+
| recd       | id   |
+------------+------+
 2012-07-01 0
 2012-07-02 0
 2012-07-03 0
 2012-07-04 0
 2012-07-05 0
 2012-07-06 0
 2012-07-07 0
 2012-07-08 0
 2012-07-09 33
 2012-07-10 0
 2012-07-11 32
 2012-07-12 0
 2012-07-13 0
 2012-07-14 0
 2012-07-15 32
 2012-07-16 0
 2012-07-17 0
 2012-07-18 0
 2012-07-19 0
 2012-07-20 0
 2012-07-21 0
 2012-07-22 0
 2012-07-23 0
 2012-07-24 0
 2012-07-25 0
 2012-07-26 0
 2012-07-27 0
 2012-07-28 0
 2012-07-29 0
 2012-07-30 0
 2012-07-31 0 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T09:40:56.053

您显然需要第二张表，其中包含可能的日期列表，然后您应该从该表中选择左连接到您已有的表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T11:36:59.543

日历表使您的查询和生活更轻松。在标准 SQL 中，此查询将为您提供所需的内容。

```
select c.cal_date, coalesce(d.id, 0) id
from calendar c
left join depot d on d.recd = c.cal_date
where c.cal_date between '2012-07-01' and '2012-07-31'
order by c.cal_date 
```

一个最小的日历表只需要一个日期列。

```
create table calendar (
  cal_date date primary key
);

insert into calendar values
('2012-07-01'),
('2012-07-02'),
...
('2012-07-31'); 
```

无需编写 INSERT 语句，您可以使用电子表格或脚本程序生成数据，并通过数据库的批量加载器加载行。

我还在StackOverflow 上写了[一个更有用的日历表。](https://stackoverflow.com/a/5030686/562459)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T12:03:16.270

谢谢小伙伴！！如果存在的话，我对任何 SQL 都抱有雄心。但是，是的，它不情愿的程序..

找到了解决方法，因为它坚持了很长时间

```
BASE TABLE

 CREATE TABLE `deopt` (
  `recd` datetime DEFAULT NULL,
  `id` int(11) DEFAULT NULL
) ENGINE=InnoDB;
Seed records to the base table

insert into deopt values ('2012-07-09 23:08:54',22);
insert into deopt values ('2012-07-11 23:08:54',22);
insert into deopt values ('2012-07-11 23:08:54',2222);
insert into deopt values ('2012-07-12 23:08:54',22);
insert into deopt values ('2012-07-14 23:08:54',245);
Create a table for dates of a month

CREATE TABLE seq_dates 
(
   sdate DATETIME NOT NULL,

);
Create a Stored Procedure to create records for a called month

delimiter //
DROP PROCEDURE IF EXISTS sp_init_dates;

CREATE PROCEDURE sp_init_dates (IN p_fdate DATETIME, IN p_tdate DATETIME)
BEGIN 
DECLARE v_thedate DATETIME; 
TRUNCATE TABLE seq_dates; 
SET v_thedate = p_fdate;
WHILE (v_thedate <= p_tdate) DO 
   INSERT INTO seq_dates (sdate) 
   VALUES (v_thedate); 
   SET v_thedate = DATE_ADD(v_thedate, INTERVAL 1 DAY); 
END WHILE; 
END;

delimiter ;
Call the procedure for July month with starting and ending values to be seeded to seq_dates table.

call sp_init_dates ('2012-07-01','2012-07-31'); 
RESULT QUERY - To fetch records of all dates in a month and its corresponding ids keeping 0 inplace of null for ids.

select date(seq_dates.sdate),coalesce (deopt.id,0) from seq_dates LEFT JOIN deopt ON date(deopt.recd)=date(seq_dates.sdate);

+-----------------------+-----------------------+
| date(seq_dates.sdate) | coalesce (deopt.id,0) |
+-----------------------+-----------------------+
| 2012-07-01            |                     0 |
| 2012-07-02            |                     0 |
| 2012-07-03            |                     0 |
| 2012-07-04            |                     0 |
| 2012-07-05            |                     0 |
| 2012-07-06            |                     0 |
| 2012-07-07            |                     0 |
| 2012-07-08            |                     0 |
| 2012-07-09            |                    22 |
| 2012-07-09            |                    22 |
| 2012-07-10            |                     0 |
| 2012-07-11            |                    22 |
| 2012-07-11            |                  2222 |
| 2012-07-11            |                    22 |
| 2012-07-11            |                  2222 |
| 2012-07-12            |                    22 |
| 2012-07-13            |                     0 |
| 2012-07-14            |                   245 |
| 2012-07-15            |                     0 |
| 2012-07-16            |                     0 |
| 2012-07-17            |                     0 |
| 2012-07-18            |                     0 |
| 2012-07-19            |                     0 |
| 2012-07-20            |                     0 |
| 2012-07-21            |                     0 |
| 2012-07-22            |                     0 |
| 2012-07-23            |                     0 |
| 2012-07-24            |                     0 |
| 2012-07-25            |                     0 |
| 2012-07-26            |                     0 |
| 2012-07-27            |                     0 |
| 2012-07-28            |                     0 |
| 2012-07-29            |                     0 |
| 2012-07-30            |                     0 |
| 2012-07-31            |                     0 |
+-----------------------+-----------------------+
35 rows in set (0.00 sec) 
```

# entity-framework - 如何在 TPH TPT 对象之间映射外键 - 实体框架代码优先

> ID：11900155
> 
> 赞同：3
> 
> 时间：2012-08-10T10:50:48.237
> 
> 标签：entity-framework, ef-code-first, entity-framework-4.3

我们有以下一组对象。

```
public class Form
{
    public int FormId { get; set; }
    public DateTime DateCreatedOn { get; set; }
    public string Status { get; set; }
}

// This is using TPT inheritance from Form
[Table("FormA")]
public class FormA : Form
{
    public string ExtraInfoA { get; set; }
    public virtual ICollection<Child> Children
}

// This is using TPT inheritance from Form
[Table("FormB")]
public class FormB : Form
{
    public string ExtraInfoB { get; set; }
    public virtual ICollection<Adult> Adults
}

public class Person
{
    public int PersonId { get; set; }
    public int FormId
    public DateTime DateOfBirth { get; set; }
    public string FirstName { get; set; }
    public string LastName { get; set; }
}

// This is using TPH inheritance from Person
public class Adult : Person
{
    public int HowManyCars { get; set; }
    public string NationalInsuranceNo { get; set; }
    [ForeignKey("FormId")]
    public virtual FormB FormB { get; set; }
}

// This is using TPH inheritance from Person
public class Child : Person
{
    public int HowManyToys { get; set; }
    public string SchoolName { get; set; }
    [ForeignKey("FormId")]
    public virtual FormA FormA { get; set; }
} 
```

这将创建 3 个表格`Form`，`FormA`其中`FormB`包含相应的字段。它还为`Person`.

问题是当我们依赖约定而不指定`ForeignKey`属性时，`Person`表包含 2 个额外的外键列。

但是，当我们指定`ForeignKey`属性时（如上面的代码），我们会收到以下错误消息。

```
`The foreign key component 'FormId' is not a declared property on type 'Child'. Verify that it has not been explicitly excluded from the model and that it is a valid primitive property.` 
```

`FormId`绝对是的属性，`Child`所以我不确定出了什么问题。

我们现实世界的情况比上面的情况复杂得多，所以我想现在就得到它，而不是有多个外键。

很感谢任何形式的帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-10T12:18:45.043

您不能在父实体中定义外键，在子实体中定义导航属性。它们必须在同一个实体中定义。您尝试做的甚至在数据库中无效，因为您不能对列有条件外键约束 - 对两者的约束`FormA`并将`FormB`应用于每条记录，您将永远无法插入任何记录（因为它总是违反对`FormA`or的约束`FormB`。

简而言之：您需要父级中的单个导航属性或每个子级的单独外键。

# jquery - 如何创建带有星形图像的书签之类的按钮以及列表视图？

> ID：11900167
> 
> 赞同：1
> 
> 时间：2012-08-10T10:51:32.853
> 
> 标签：jquery, jquery-ui, jquery-mobile, cordova

我想创建一个带有图像的按钮或复选框以及列表视图。我有一个项目列表，这些项目是使用 jquery 从数据库中检索到的，每个项目应该有一个图像按钮，图像可以是星号，我想实现像书签这样的概念..我想在这个列表中添加，我该怎么做？

```
var htmlStr = '<li><a><h3 class="ui-li-heading">'+row['Word']+'</h3><p class="ui-li-desc">'+row['Type_Of_Word']+'</p></a></li>'; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T13:19:18.440

使用 css 添加您自己的图标：

```
.ui-state-default  .ui-icon-mystar {
  background-image: url(https://upload.wikimedia.org/wikipedia/commons/thumb/f/f9/Full_Star_Red.svg/64px-Full_Star_Red.svg.png); 
   background-size: 100%;

}​ 
```

在 JavaScript 中：

```
$('#starbutton').button({icons: {primary:'ui-icon-mystar'}});​ 
```

在 html 中：

```
<a href="#" id="starbutton">Bookmark</a>​ 
```

[工作样本：](http://jsfiddle.net/dqpLN/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T05:25:25.960

下面是css和jquery代码片段

```
 .star {
        background-color: transparent;
        background-image: url('http://localhost/technicalkeeda/images/star-off.png');
        background-repeat:no-repeat;
        display: block;  
        height:16px;
        width:16px;
        float:left;
    }   

    .favorited {
         text-indent: -5000px;
        background-color: transparent;
        background-image: url('http://localhost/technicalkeeda/images/star-on.png');
        background-repeat:no-repeat;   
        height:16px;
        width:16px;
        float:left;
    }

$(document).ready(function(){   
     $('.star,.favorited').click(function() {
            var id = $(this).parents('div').attr('id');             
            var className = $(this).attr('class');
            var flag  = (className=='star') ? 'Y':'N';
            var $this = $(this);
            $.ajax({
                    type: "post",
                    url: "yoururl",
                    cache: false,               
                    data:{'bookmarkId': id,'flag':flag},
                    success: function(response){
                        if(response=='true'){                               
                            $this.toggleClass("favorited");
                        }   
                    },
                    error: function(){                      
                        alert('Error while request..');
                    }
                 });
      });
}); 
```

# r - data.table 可以对任意函数进行连接（即模糊/软连接）吗？

> ID：11900168
> 
> 赞同：6
> 
> 时间：2012-08-10T10:51:34.403
> 
> 标签：r, data.table

以下是假设性的。假设我有一个字符串相似度函数，它产生一个布尔结果 ( `string_sim`)，另一个确定两个纬度/经度坐标之间的距离是否低于阈值 ( `geo_dist`)

我决定使用模糊连接合并这些条件：

```
merge(LHS, RHS, by=string_sim(LHS$string, RHS$string) & geo_dist(LHS$lat, LHS$lon, RHS$lat,RHS$lon)) 
```

在引擎盖下， data.table 需要将笛卡尔乘积进行比较……每一行都不对称。在数以万亿计的中等规模数据集中，这很容易成为一个巨大的数字。因此，在将数据发送到比较函数时，它可能还需要使用分而治之的策略，利用多个进程，每个进程的单元数低于 20 亿，以避免整数限制。本质上，它需要将向量的各个部分映射成碎片，然后将它们发送到函数（这听起来像 map-reduce）

假设用户明智并希望通过迭代应用连接命令来节省时间，从运行成本最低的开始，例如相等条件。

```
merge(LHS, RHS, by=list(LHS$first_initial == RHS$first_initial, string_sim(LHS$string, RHS$string) & geo_dist(LHS$lat, LHS$lon, RHS$lat,RHS$lon))) 
```

我想要这样的功能。它花了我一些时间，但我已经使用 data.table 编写了一些代码，并且该软件包将来可能会附带类似的东西。

编辑：让我以更 data.table 原生的方式表达这一点。首先定义要匹配相等的变量：

```
setkey(LHS, first_initial)
setkey(RHS, first_initial) 
```

然后通过矢量扫描进行二进制合并：

```
LHS[RHS][string_sim(string, string.1) & geo_dist(lat, lon, lat.1,lon.1)] 
```

或者，可以先完成最昂贵的操作。我认为以下会更快：

```
LHS[RHS][geo_dist(lat, lon, lat.1,lon.1)][string_sim(string, string.1)] 
```

但是，当 LHS 为 2000 万行，RHS 为 2000 万行时，这会使系统过载。为了防止这种情况，我需要使用分而治之的方法将 LHS 和 RHS 拆分为多个部分。如果有一些更有效的方法可以在后端并行化进程，我认为我不必做所有这些。

这是代码：

```
joiner <- function(x,y, reduce=quote( x[map$x][y[map$y],nomatch=0] ), chunks = 100000, mc.cores = getOption("cores")){
    require("multicore")
    require("data.table")
    map_function <- function(x_N,y_N, chunks){  
        x_partitions = ceiling(x_N/chunks)
        x_parts = (0:x_partitions)*chunks 
        x_parts[length(x_parts)]=x_N            
        y_partitions = ceiling(y_N/chunks)
        y_parts = (0:y_partitions)*chunks 
        y_parts[length(y_parts)]=y_N            
        MAP = vector("list",x_partitions*y_partitions )
        index = 0
        for(i in 1:x_partitions){
            for(j in 1:y_partitions){
                index = index +1
                MAP[[index]] = list(
                        x = (x_parts[i]+1):x_parts[i+1],
                        y = (y_parts[j]+1):y_parts[j+1]
                )
            }
        }
        return(MAP) 
    }

    if(missing(y)){
        y=x
    } 

    reducer_function <- function(map, reduce, x,y){
            eval(reduce)
    }

    collector = mclapply(map_function(nrow(x),nrow(y),chunks=chunks),reducer_function,reduce, x,y, mc.cores=mc.cores)   
    collector = rbindlist(collector)
    return(collector)   
}
D = data.table(value=letters, row_id = sample(1:100,26)); D= rbind(D,D); setkey(D,value)
joiner(D); joiner(D,chunks=10); D[D] # they are all the same, except the key is gone 
```

# image - MultiImage WindowsPhone7 控件

> ID：11900172
> 
> 赞同：0
> 
> 时间：2012-08-10T10:51:45.793
> 
> 标签：image, windows-phone-7, listbox, controls, datatemplate

我在问一个 wp7 控件，它显示了一个图像。我不知道该怎么做，也没有在互联网上找到这个。所以我需要一个控件，它具有不同的数据模板，具体取决于需要呈现的图像数量。因此，如果我们需要呈现一张图像 - 它将以完全控制的大小完全显示它。如果有 2、3 或 4 个图像 - 它们必须看起来像一个网格。所以它们的大小 = 控制大小 / 4。

示例：
ImageSource 只有一个 Image Item ![在此处输入图像描述](../Images/749b25f2987fb8d72fec7dc97a3ebb1f.png)

ImageSource 有四个 Image Item ![在此处输入图像描述](../Images/7624e21246218a7155ff9c7eeb8475c4.png)

感谢您的建议。

我想创建继承自 ListBox 的用户控件，但我不知道如何实现这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T11:50:17.400

包装面板应该可以工作，检查 codeplex 上的 wp7 工具包，它包含这样的控制。如果您将所有图像添加到该控件并将“拉伸”属性设置为“填充”，我认为它应该可以工作。

*未经测试*

以前失败，据我所知，你必须自己写一些东西。我还没有遇到过这样的控制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T15:56:08.417

您应该编写自定义面板，这将是您的最佳方式。自定义面板将为您提供速度和灵活性，实施需要 1-2 小时。请参阅此处的示例：http: [//blogs.msdn.com/b/silverlight_sdk/archive/2008/04/03/creating-a-custom-panel.aspx](http://blogs.msdn.com/b/silverlight_sdk/archive/2008/04/03/creating-a-custom-panel.aspx)

# google-maps - 谷歌街景标题问题

> ID：11900173
> 
> 赞同：2
> 
> 时间：2012-08-10T10:51:46.413
> 
> 标签：google-maps, map, google-street-view

我正在一个项目中工作，我需要显示朝向道路的谷歌地图街景。

我为全景对象设置了标题：0。但是对于不同的位置，它显示的标题不同。例如，在某些情况下，它显示朝向街道，对于某些位置，它显示朝向家。

```
panorama = theMap.getStreetView();
panorama.setPosition(new google.maps.LatLng(<?php echo $lat; ?>, <?php echo $lng; ?>););
panorama.setPov({
    heading: 0,
    zoom:1,
    pitch:0
}); 
```

如果有什么方法可以修复所有邮政编码的街道走向？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-14T11:03:22.173

最后我找到了一个非常简单的解决方案..

对于街景，有两个链接可以导航，指向街道。我只是阅读了这些标题并将街景 POV 设置为该方向。这是完整的代码。

```
var panoramaOptions = {
    position: langlongObj,
    visible: true
};
var panorama = new  google.maps.StreetViewPanorama(document.getElementById("map_canvas"), panoramaOptions);
map.setStreetView(panorama);

google.maps.event.addListener(panorama, 'links_changed', function() {
    var links =  panorama.getLinks();

    panorama.setPov({                   
        heading: links[0].heading,
        pitch: 0,
        zoom: 1
    });
}); 
```

# java - 尝试读取 inputStream 时连接重置

> ID：11900177
> 
> 赞同：3
> 
> 时间：2012-08-10T10:52:33.090
> 
> 标签：java, sockets, inputstream

我想将套接字中的输入流读入 byteArray ，但出现以下错误：

```
java.net.SocketException: Connection reset
    at java.net.SocketInputStream.read(Unknown Source) 
```

我不明白为什么，因为在我完成读取 inputStream 之前我不会关闭我的套接字

```
try {
            in = connexion.getSocket().getInputStream();
            out = connexion.getSocket().getOutputStream();

            byte[] buffer= new byte[2048] ;          
            ByteArrayOutputStream baos= new ByteArrayOutputStream();
            int read = 0;
            while((read = in.read(buffer)) > 0) // exception thrown here
            {
                baos.write(buffer, 0, read);
            }
            reception = baos.toByteArray();

        } 

        catch (IOException e) {
            e.printStackTrace();
        }
        finally{
            try{
                in.close();
                out.close();
                connexion.getSocket().close();
            }
            catch(IOException ioException){
                ioException.printStackTrace();
            }
        } 
```

服务器端：

```
 public static void main(String[] args) throws Exception {
        ServerSocket s = new ServerSocket(port,2);
        Socket soc ;

        while(true){
        soc = s.accept(); } } 
```

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T11:19:38.437

似乎在读取之前连接已被服务器关闭。这可能是您发送的请求的问题或最终的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T21:31:40.990

我看到你已经解决了这个问题，但我最近也遇到了类似的情况。我发现实际上导致这个问题的是你的字节数组读取的数组大小。如果您尝试读取的数据多于 ConnectionReset 的套接字，请尝试使用 1 的大小。

萨鲁多斯！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T14:28:28.590

已解决 我在检索输入流之前设置了一点超时，现在效果很好 谢谢大家

# xcode - 通用应用重量

> ID：11900178
> 
> 赞同：0
> 
> 时间：2012-08-10T10:52:36.570
> 
> 标签：xcode, xcode4, ios-universal-app

我为 Ipad 开发了我的应用程序，现在我应该为 Iphone 调整它。我的应用程序很重，有很多应该可以离线使用的图像。这些图像位于`xib`文件中，有时从应用程序包中动态加载。我需要限制我的应用程序的大小。

1.  我应该制作一个通用应用程序还是两个不同的应用程序（每个应用程序都有自己的一组针对设备优化的图像）？
2.  如果我做一个单一的通用应用程序，我可以在代码中动态调整“动态加载的图像”的大小。我应该如何处理中的图像`xibs`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T11:48:11.187

我终于找到了答案，一个具有不同 xib 的应用程序共享相同的视图控制器。限制重量：

*   有些图像必须修改（例如：背景），因为它们需要适应 iphone 屏幕分辨率。我只是将它们命名为 image~iphone.png。很酷的是，您不需要在 xib 或代码中修改图像的名称，因为 ~iphone 表示 iphone 的图像。

*   其他一些可以保持不变（例如：按钮），我将在 IB 中缩小它们的大小。

# extjs4.1 - 行编辑器发送错误的日期

> ID：11900181
> 
> 赞同：0
> 
> 时间：2012-08-10T10:52:53.507
> 
> 标签：extjs4.1

最近我将我的 Ext 版本从 4.0.7 升级到 4.1.1

在我的模型中，我定义为

```
{name : 'StartDate',type: 'date' ,dateFormat: 'time'}, 
```

我的网格列是

```
{
id: 'StartDateID',
width: 180,
text: 'Start Date',
dataIndex: 'StartDate',
renderer : Ext.util.Format.dateRenderer('m/d/Y'),
editor:{
    allowBlank: true,
    xtype:'datefield',
    format:'m/d/Y',
    editable: true},
sortable: false, groupable: false } 
```

在编辑我正在做

```
My_Grid.on('edit', function(editor, e) { 
```

e.store.sync(); }

单击更新后，我使用 [with Ext 4.0.7] 日期值作为

```
2012-08-04T00:00:00 
```

但是在使用 4.1.1 升级后，我得到的日期值是

```
310008e 
```

我不明白。

我的日期是这种格式

```
1346351400000 
```

你能告诉我这里缺少什么吗？或者如何在单击 RowEditor 中的更新按钮后获取正确的日期。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T21:01:20.403

您的模型定义不正确，如果您想要所需的格式，它应该是：

```
{name : 'StartDate',type: 'date' ,dateFormat: 'U'}, 
```

“时间”不在文档中，您实际使用“时间”的唯一原因是它是否是您创建的自定义类型，可能并非如此。

# android - ajax 请求无法更改 phonegap 中的网络连接（跨域）

> ID：11900182
> 
> 赞同：0
> 
> 时间：2012-08-10T10:52:54.920
> 
> 标签：android, ajax, cordova

ajax 请求在一个网络上运行良好，但当我切换到其他无线网络时它不起作用。我正在尝试从跨域加载数据。此问题仅适用于安卓版本。我正在使用 phonegap 版本 2.0.0 。

```
var formdata = $('#login-form').serialize();

var reqUrl = 'http://www'+ domain +'/tokens.json'

var req = $.ajax({
                url: reqUrl,
                data: formdata,
                type: 'POST', 
                dataType: 'json'
            }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T13:36:12.940

您可以使用[traceview](http://developer.android.com/tools/help/traceview.html)或[ARO](http://developer.att.com/developer/legalAgreementPage.jsp?passedItemId=9700312)来追踪问题发生的位置，它们都可以让您分析网络活动。连接发生变化时可能会关闭，ARO 将允许您查看正在发生的事情并希望能帮助您解决问题。

# xaml - 如何将调色板应用于 radpiechart？

> ID：11900183
> 
> 赞同：1
> 
> 时间：2012-08-10T10:52:57.417
> 
> 标签：xaml, telerik, microsoft-metro, winrt-xaml

我对 RadPieChart 有疑问。radPieChart 始终以相同的颜色（蓝色）显示所有系列，并且不应用 DefaultPalette。xaml 代码如下：

```
 <telerik:RadPieChart x:Name="chartTipoGasto" Palette="{Binding DefaultPalette}" Grid.Row="3">
                        <telerik:PieSeries ItemsSource="{Binding}" RadiusFactor="0.9">
                            <telerik:PieSeries.ValueBinding>
                                <telerik:PropertyNameDataPointBinding PropertyName="Importe"></telerik:PropertyNameDataPointBinding>
                            </telerik:PieSeries.ValueBinding>
                            <telerik:PieSeries.LabelDefinitions>
                                <telerik:ChartSeriesLabelDefinition Margin="-7">
                                    <telerik:ChartSeriesLabelDefinition.Binding>
                                        <telerik:PropertyNameDataPointBinding PropertyName="Concepto"></telerik:PropertyNameDataPointBinding>
                                    </telerik:ChartSeriesLabelDefinition.Binding>
                                </telerik:ChartSeriesLabelDefinition>
                            </telerik:PieSeries.LabelDefinitions>
                        </telerik:PieSeries>
                    </telerik:RadPieChart> 
```

我不知道为什么所有系列都显示为蓝色，而不是像我从 Telerik 网站下载的演示项目中显示的不同颜色。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T14:52:02.730

实际上，您是否使用您声明的 Palette="{Binding DefaultPalette}" 绑定了一些东西？

您可以像这样应用自己的调色板（您可以将渐变更改为实心画笔，或者我认为甚至可以根据需要添加图像）并添加任意数量的。

```
<chart:RadChart.PaletteBrushes>
                                <RadialGradientBrush>
                                    <GradientStop Color="#FF010DBE"
                                        Offset="0" />
                                    <GradientStop Color="#FF0659FD"
                                        Offset="0.5" />
                                    <GradientStop Color="#FF0117CA"
                                        Offset="1" />
                                </RadialGradientBrush>
                                <LinearGradientBrush EndPoint="0.5,1"
                                    StartPoint="0.5,0">
                                    <GradientStop Color="#FF029912"
                                        Offset="0" />
                                    <GradientStop Color="#FF14FD22"
                                        Offset="0.492" />
                                    <GradientStop Color="#FF03930C"
                                        Offset="1" />
                                </LinearGradientBrush>
                                <SolidColorBrush Color="#FFFCBA2A"/>
                                <RadialGradientBrush>
                                    <GradientStop Color="#FFDE9A05"
                                        Offset="0" />
                                    <GradientStop Color="#FFF7AB05"
                                        Offset="0.5" />
                                    <GradientStop Color="#FFDC8E03"
                                        Offset="1" />
                                </RadialGradientBrush>
</chart:RadChart.PaletteBrushes> 
```

# java - SAML - Java 中的服务提供者

> ID：11900186
> 
> 赞同：3
> 
> 时间：2012-08-10T10:53:14.243
> 
> 标签：java, jakarta-ee, saml, shibboleth

我已经设置了 Shibboleth IDP 和 SP。它们已正确配置并且正在工作。

我现在想删除 SP 并用我自己的代码替换它。即：我希望我的 Java 代码在不运行 shibd.exe 和 httpd.exe 的情况下充当 SP（路由请求、主机元数据和验证 SAML 断言）。

这可能使用 OpenSAML 吗？有什么我可以使用的例子吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T12:44:52.897

我使用 Shibboleth ECP 扩展来做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T14:29:07.053

ECP profile确实是实现这一点的好方法。如果这一切都对您有用，那么您应该坚持这一点，我只想为您指出另一个可能的方向。

如果您仍然需要使用 Web Browser Single Sign On 配置文件，您可以尝试将您的代码与 Guanxi ( [src](https://github.com/guanxi) , [doc](http://codebrane.com/brane/node/10) ) 集成，这是一个 Shibboleth SP Java 实现。

但是当然，如​​果您只需要一些轻量级的 Java 代码来访问 Shibboeleth IdP，那么 ECP 就完全可以了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-21T10:20:42.397

这是 openSAML-java 的文档。参考这个

> [https://wiki.shibboleth.net/confluence/display/OpenSAML/OSTwoUserManual](https://wiki.shibboleth.net/confluence/display/OpenSAML/OSTwoUserManual)

# html - Django模板继承导致总线错误

> ID：11900187
> 
> 赞同：2
> 
> 时间：2012-08-10T10:53:16.257
> 
> 标签：html, django, django-templates, template-inheritance

我在 Django 模板中的多站点层次结构中工作，因此我需要一个主基本模板 ( `base/base.html`)，我有几个从中扩展的主模板，例如`base/base_twocol.html`. 然后我有从这些模板扩展而来的模板，例如`base/base_twocol_SECTION`.

然后我需要有相同的模板集，它将处理另一个站点，但从这些模板扩展而来，例如`another_site/base.html`, `another_site/base_twocol.html`, `another_site/base_twocol_SECTION.html`。

目标是拥有一组可以为每个站点覆盖的主模板。

所以我有这样的事情：

```
templates/
    base/
        base.html 
        base_twocol.html           //extends base.html
        base_twocol_SECTION.html   // extends base_twocol.html
    another_site/
        base.html                  //extends base/base.html
        base_twocol.html           //extends base/base_twocol.html
        base_twocol_SECTION.html   //extends base/base_twocol_SECTION.html
    super_cool_site/
        base.html                  //extends base/base.html
        base_twocol.html           //extends base/base_twocol.html
        base_twocol_SECTION.html   //extends base/base_twocol_SECTION.html 
```

**我创建了我的`another_site/base.html`, 并使用了语法`{% extends "base.html" %}`**

**但是，当我运行服务器时，我从浏览器收到“未收到数据错误”，从控制台收到“总线错误”。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T15:28:54.623

文件命名表明总线错误，因为有两个同名模板，其中一个试图从另一个扩展。

在**another_site/base.html**中，我有`{% extends "base.html" %}`，但这个文件也称为**base.html**。

所以基本上，我不能有一个名为 X 的模板，以及另一个名为 X 的模板，它扩展了模板 X。也许我的问题措辞不太正确，这就是为什么没有被采纳的原因。

子模板需要有一个唯一的名称。我对所有模板文件都这样做了，现在它工作正常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T13:16:37.153

From a thread in the [django-users](https://groups.google.com/forum/?fromgroups#!topic/django-users/_0tyQ-AP43w%5B1-25%5D) group:

> A bus error occurs due to unaligned memory access, or access to a non existent memory address. In the absence of an actual bug (which others would see), this clearly indicates that one or another of the C libraries used by python conflicts with it.
> 
> This could happen if you compiled a C library to use with python, like one of the many python packages that consist of a small C library (mysql and postgresql DB adaptors, PIL, many others), and use it with a different python than it was compiled against.

This is almost certainly nothing to do with your template inheritance. Check your Python and Django installation, reinstalling if necessary. Please also provide more details about your environment and, as Jonas says, the full stack trace.

# postgresql - Postgres 入门层的问题

> ID：11900191
> 
> 赞同：5
> 
> 时间：2012-08-10T10:53:21.470
> 
> 标签：postgresql, heroku

我最近搬到 Postgres 并收到以下形式的间歇性错误：

```
PGError: FATAL:  terminating connection due to administrator command
SSL connection has been closed unexpectedly: 
        SELECT a.attname, format_type(a.atttypid, a.atttypmod), 
               d.adsrc, a.attnotnull
          FROM pg_attribute a LEFT JOIN pg_attrdef d
            ON a.attrelid = d.adrelid AND a.attnum = d.adnum
         WHERE a.attrelid = '"xxxxxx"'::regclass
           AND a.attnum > 0 AND NOT a.attisdropped
         ORDER BY a.attnum

vendor/bundle/ruby/1.9.1/gems/activerecord-3.0.11/lib/active_record/
connection_adapters/postgresql_adapter.rb:505:in `exec' 
```

我能做些什么来解决这个问题（除了回到旧的 Postgres 插件，我想这是一个临时解决方案）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-11T06:40:58.463

理想情况下，您的应用程序应该通过重试其工作来透明地处理数据库错误，而不会打扰用户。如果一个空闲的数据库后端从它下面被关闭，它不应该关心，它应该只是建立一个新的连接并再次启动事务。不过，我不知道 Rails 和 ActiveRecord 的实用性如何。

另请参阅[heroku上“PGError：FATAL：因管理员命令而终止连接”的问题是什么原因？](https://stackoverflow.com/questions/5787066/whats-the-cause-of-pgerror-fatal-terminating-connection-due-to-administrator).

Heroku 似乎有时会在进行维护时杀死后端并重新启动服务器，如果您不经常使用，这可能会解释您的问题。

# sql - 选择日期最近的行

> ID：11900193
> 
> 赞同：0
> 
> 时间：2012-08-10T10:53:21.590
> 
> 标签：sql, date, exists

我有一条 SQL 语句。

```
SELECT ID, LOCATION, CODE,MAX(DATE) FROM TABLE1 WHERE 
DATE <= CONVERT(DATETIME,'11-11-2012') AND 
EXISTS(SELECT * FROM #TEMP_CODE WHERE TABLE1.CODE =#TEMP_CODE.CODE) 
AND ID IN (14,279)
GROUP BY ID, LOCATION, CODE,(DATE) 
```

我需要与 2012 年 11 月 11 日最近的日期的行，但该表返回所有值。我究竟做错了什么。谢谢

```
ID     LOCATION                 CODE            DATE
-------------------------------------------------------------------
14  CAR STREET,UDUPI            234   2012-08-08 00:00:00.000
14  CAR STREET,UDUPI            234   2012-08-10 00:00:00.000
14  CAR STREET,UDUPI            234   2012-08-14 00:00:00.000
279 MADHUGIRI                   234   2012-08-08 00:00:00.000
279 MADHUGIRI                   234   2012-08-11 00:00:00.000 
```

我需要选择最大日期的行。所需的结果是

```
ID     LOCATION                 CODE            DATE
-------------------------------------------------------------------
14  CAR STREET,UDUPI            234   2012-08-10 00:00:00.000
279 MADHUGIRI                   234   2012-08-11 00:00:00.000 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T10:55:14.630

`(DATE)`从`GROUP BY`条款中删除。

改变

```
SELECT ID, LOCATION, CODE,MAX(DATE) FROM TABLE1 WHERE  
DATE <= CONVERT(DATETIME,'11-11-2012') AND  
EXISTS(SELECT * FROM #TEMP_CODE WHERETABLE1.CODE =#TEMP_CODE.CODE)  
AND ID IN ('KBL01005','KBL05020') 
GROUP BY ID, LOCATION, CODE,(DATE) 
```

至

```
SELECT ID, LOCATION, CODE,MAX(DATE) FROM TABLE1 WHERE  
DATE <= CONVERT(DATETIME,'11-11-2012') AND  
EXISTS(SELECT * FROM #TEMP_CODE WHERETABLE1.CODE =#TEMP_CODE.CODE)  
AND ID IN ('KBL01005','KBL05020') 
GROUP BY ID, LOCATION, CODE 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T11:29:43.167

尝试使用明确的日期格式

```
SELECT ID, LOCATION, CODE,MAX(DATE) FROM TABLE1 
WHERE DATE <= '20121111' AND   
EXISTS(SELECT * FROM #TEMP_CODE WHERETABLE1.CODE =#TEMP_CODE.CODE)   
AND ID IN ('KBL01005','KBL05020')  
GROUP BY ID, LOCATION, CODE 
```

另请参阅为什么需要使用明确的日期格式[http://beyondrelational.com/modules/2/blogs/70/posts/10898/understanding-datetime-column-part-ii.aspx](http://beyondrelational.com/modules/2/blogs/70/posts/10898/understanding-datetime-column-part-ii.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T11:06:03.000

无需使用`Group by (Date)`. 尝试这个：

```
SELECT ID, LOCATION, CODE,MAX(DATE) FROM TABLE1 
WHERE DATE <= CONVERT(DATETIME,'11-11-2012') AND 
EXISTS(SELECT * FROM #TEMP_CODE WHERE TABLE1.CODE =#TEMP_CODE.CODE) 
AND ID IN (14,279)
GROUP BY ID, LOCATION, CODE 
```

# iphone - 从第二个 ViewController 到第一个 ViewController

> ID：11900202
> 
> 赞同：3
> 
> 时间：2012-08-10T10:54:00.140
> 
> 标签：iphone, objective-c, ios, uitableview, uiviewcontroller

我有 2 个 ViewController，在第一个 - TableView 和第二个 - 带有标签的按钮中。当我单击第二个 ViewController 中的按钮时，我需要返回 TableView 并设置

```
cell.detailTextLabel.text 
```

按钮上标签的文本。

要返回第一个视图，我使用：

```
[self.navigationController popToViewController:[self.navigationController.viewControllers objectAtIndex:1] animated:YES]; 
```

但是我如何将标签从第二个视图设置为：

```
cell.detailTextLabel.text 
```

第一眼？？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T11:31:04.930

我会在第二个视图控制器中定义一个协议和委托

```
@protocol SecondViewController;

@interface SecondViewController : UIViewController

@property (nonatomic, assign) id<SecondViewController> delegate;

@end

@protocol SecondViewController <NSObject>
- (void)secondViewController:(SecondViewController *)controller didTappedOnButton:(UIButton *)button;
@end 
```

然后当点击按钮时调用代表：

```
- (IBAction)buttonTapped:(UIButton *)sender
{
    // do somthing..

    // then tell the delegate about the button tapped
    [self.delegate secondViewController:self didTappedOnButton:sender];
} 
```

在您的第一个视图控制器中实现协议

```
@interface FirstViewController : UIViewController <SecondViewControllerDelegate> 
```

当您推送第二个视图控制器时，将第一个视图控制器设置为第二个委托：

```
- (void)someMethodThatPushTheSecondViewController
{
    SecondViewController *svc = [[SecondViewController alloc] init];
    [self.navigationController pushViewController:svc animated:YES];
    svc.delegate = self;
} 
```

并实现委托方法以在点击按钮时获得通知

```
- (void)secondViewController:(SecondViewController *)controller didTappedOnButton:(UIButton *)button
{
    // do somthing after button tapped
    // you can get the button title from button.titleLabel.text
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T11:04:24.270

要访问父类方法或属性，您必须实现一个协议，并使用它的委托。您可以使用您在当前（父）类中创建的类对象来访问子类方法/属性。但是您想如何从子类访问父类实体？是的，实施协议。

或者新手方式：点击按钮后，将所需的值保存到 NSUserDefaults 中。然后，当您转到您的父类（viewController 1）时，ion viewWillAppear，检查保存的值，如果它不是 nil，则显示它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-13T21:53:24.860

```
[self.navigationController popViewControllerAnimated:YES]; 
```

# iphone - 在 UItableview 中添加一行

> ID：11900204
> 
> 赞同：0
> 
> 时间：2012-08-10T10:54:10.120
> 
> 标签：iphone, ios, uitableview

我无法在 a 中添加新行`UITableview`，代码如下，显示错误

```
-(void)viewDidLoad

{    
    self.title=@"CHECK-list";
    self.navigationItem.rightBarButtonItem = self.editButtonItem;
    addButton = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemAdd target:self action:@selector(addItem)]; 
    self.navigationItem.leftBarButtonItem = addButton;

    ar=[[NSMutableArray alloc]initWithObjects:@"Map",@"Camera",@"First Aid Kit", nil];    
    [super viewDidLoad];

}

- (void)addItem
   {
   //NSMutableArray *tempArray = [[NSMutableArray alloc] init];
   int i = 0;
   for (NSArray *count in ar)
   {
    [ar addObject:[NSIndexPath indexPathForRow:i++ inSection:1]];
   }

    [[self tableView] beginUpdates];
    [[self tableView] insertRowsAtIndexPaths:(NSArray *)ar withRowAnimation:UITableViewRowAnimationNone];
    [[self tableView] endUpdates];
    [self.tableView reloadData];   
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T11:08:11.233

这里 Fazil.... 任何 tableview 和行添加的基本代码

```
 - (void)insertRowsAtIndexPaths:(NSArray *)indexPaths withRowAnimation:(UITableViewRowAnimation)animation;

  UITableView *tableview = [[UITableView alloc]initWithFrame:CGRectMake(160, 280, 150, 150) style:UITableViewStylePlain];
tableview.delegate = self;
tableview.dataSource = self;

 -(NSInteger) tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return [array count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) 
    {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier ];
    } 
    cell.textLabel.text= [array objectAtIndex:indexPath.row];
    cell.imageView.image = [UIImage imageNamed:[imagearray objectAtIndex:indexPath.row]];
    cell.backgroundView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"cell_normal.png"]];
    cell.textLabel.textColor = [UIColor blackColor];
    cell.selectionStyle = UITableViewCellSelectionStyleBlue;
    cell.textLabel.font = [UIFont fontWithName:@"Helvetica" size:17.0];
    return cell;
}

#pragma mark  UItableView delegate

-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    check = indexPath.row;
    UITableViewCell* theCell = [tableView cellForRowAtIndexPath:indexPath];
    theCell.contentView.backgroundColor=[UIColor clearColor];
    [tableView deselectRowAtIndexPath:indexPath animated:YES]; 
}

- (void)moveRowAtIndexPath:(NSIndexPath *)indexPath toIndexPath:(NSIndexPath *)newIndexPath
{
[tableview moveRowAtIndexPath:indexPath toIndexPath:[NSIndexPath indexPathForRow:[array count] - 1 inSection:1]];
}

- (NSIndexPath *)tableView:(UITableView *)tableView targetIndexPathForMoveFromRowAtIndexPath:(NSIndexPath *)sourceIndexPath toProposedIndexPath:(NSIndexPath *)proposedDestinationIndexPath
{
    if (sourceIndexPath.section != proposedDestinationIndexPath.section) {
        NSInteger row = 0;
        if (sourceIndexPath.section < proposedDestinationIndexPath.section) {
            row = [tableView numberOfRowsInSection:sourceIndexPath.section] - 1;
        }
        return [NSIndexPath indexPathForRow:row inSection:sourceIndexPath.section];     
    }
    return proposedDestinationIndexPath;
} 
```

# javascript - 在 Firefox 中使用 iframe execCommand 时如何启用复制/剪切/粘贴功能？

> ID：11900205
> 
> 赞同：1
> 
> 时间：2012-08-10T10:54:09.770
> 
> 标签：javascript, firefox, iframe, rich-text-editor

`iframe` `execCommand`Firefox 默认不启用功能的复制/剪切/粘贴。如何启用它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T11:03:11.447

希望这可能会有所帮助，

[https://developer.mozilla.org/en-US/docs/Rich-Text_Editing_in_Mozilla](https://developer.mozilla.org/en-US/docs/Rich-Text_Editing_in_Mozilla)

[http://www-archive.mozilla.org/editor/](http://www-archive.mozilla.org/editor/)

# ios - 以小于 1 秒的延迟为子视图中的多个视图设置动画

> ID：11900208
> 
> 赞同：1
> 
> 时间：2012-08-10T10:54:25.737
> 
> 标签：ios, uiviewanimation

刚开始在 iOS 上使用 Obj C，我试图为`UIImageView`我的子视图中的所有视图 () 设置动画，但是当我将延迟时间设置为小于 1 秒时，动画会立即为所有视图设置动画。如果我将延迟设置为 1 秒或更多，它将正确设置动画，但第二个动画只会在第一个动画完成后开始。我想为所有这些视图设置动画，例如第 1 个视图将开始动画，在它完成之前，第二个应该开始动画。

这是我的代码。

```
-(void)animate
{
    int delaytime = 0.3; //first view will start after 0.3 secs

    for(UIView *view in self.subviews)
    {
        view.alpha = 0; //set it to transparent
        delaytime += 1 ; //couldn't get the desired effect when it is less than 1
        [UIView animateWithDuration:0.3
                              delay:delaytime
                            options: UIViewAnimationOptionTransitionNone
                         animations:^{
                             view.alpha = 1;       // fade in             }
                         completion:^(BOOL finished){
                             NSLog(@"Complete");
                         }]; 
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T11:18:52.727

您的延迟变量是一个`int`，因此总是向下舍入*为*整数值（0.3 变为 0，甚至 0.9999 变为 0）。这就是为什么所有小于一秒的“延迟”都会立即为您启动，一个`int`变量不能保存十进制值。

您应该改为我们正确的类型`NSTimeInterval`

```
NSTimeInterval delaytime = 0.3; 
```

# java - NumberFormat.getInstance 是否保证创建一个新实例？

> ID：11900210
> 
> 赞同：10
> 
> 时间：2012-08-10T10:54:36.433
> 
> 标签：java

考虑以下代码：

```
NumberFormat format = NumberFormat.getInstance();
format.setMinimumFractionDigits(spotDecimalPlaces);
format.setMaximumFractionDigits(spotDecimalPlaces); 
```

它“安全”吗？`NumberFormat.getInstance()`保证退换新`NumberFormat`每次都

还是有可能`getInstance()`返回相同的实例？（在这种情况下，这段代码会影响 JVM 中碰巧使用的其他任何地方`getInstance`......）

查看源代码*似乎*每次都返回一个新实例。JavaDoc 在这件事上含糊不清，令人沮丧。

如果上面的代码真的是“安全的”，那么在我看来，`getInstance()`这个方法的名字很糟糕——它应该被调用`createInstance()`。

`NumberFormat.getInstance()`保证总是返回一个新实例吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-10T11:01:12.597

是的，它是安全的。代码要么从 a 获取一个实例`NumberFormatProvider`（根据文档，它必须返回一个新实例），或者它创建一个`DecimalFormat`.

从逻辑上讲，由于`NumberFormat`是可变的，因此返回相同的实例或缓存的实例会使该方法完全不可用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-10T10:58:49.763

从[`NumberFormat`页面](http://docs.oracle.com/javase/6/docs/api/java/text/NumberFormat.html)

**同步**

> 数字格式通常不同步。建议为每个线程创建单独的格式实例。如果多个线程同时访问一个格式，它必须在外部同步。

这间接表明该方法在每次调用时都会创建一个新实例。因为，由于 NumberFormat 不是线程安全的，否则它将无法使用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-10T10:58:57.140

命名我更喜欢

*   `newXxxx`或`createXxxx`每次都创建一个新实例。
*   `getXxxx`如果它已经存在但不会创建一个实例，它会给你一个实例。
*   `acquireXxxx`或`valueOf`根据需要创建一个，可能是也可能不是新的。

在这种情况下，就像`Calendar.getInstance()`每次创建一个新实例一样。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-14T10:33:27.620

> 例子：-
> 
> ```
>  ClassA a = new ClassA(NumberFormat.getInstance(Locale.GERMAN)); 
> ```
> 
> NumberFormat 的正常使用：
> 
> ```
>  NumberFormat nf = NumberFormat.getInstance(Locale.GERMAN);    
>                        nf.setMinimumFractionDigits(2);
>                        nf.setMinimumIntegerDigits(1);
>                        nf.setGroupingUsed(true);
> 
>                   
>                   java.lang.Number    num = nf.parse(Preis); 
> ```

# java - 文本区域中的上移按钮

> ID：11900214
> 
> 赞同：2
> 
> 时间：2012-08-10T10:54:51.277
> 
> 标签：java, swing, jbutton, jtextarea, jtextcomponent

我在屏幕上有两个文本区域，我将两个文本区域之间的不同单词加粗，我希望有一个向上和向下的按钮来显示文本区域上的不同单词。这可能吗 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T11:06:23.023

*   必须查看[JTextArea](http://docs.oracle.com/javase/tutorial/uiswing/components/textarea.html)，但没有指定通知用于良好的格式或高亮显示，然后使用[JTextPane](http://docs.oracle.com/javase/tutorial/uiswing/components/editorpane.html)代替

*   [TextUtilities](http://docs.oracle.com/javase/7/docs/api/javax/swing/text/Utilities.html)可以帮助您找到与屏幕相关或与模型相关的所需索引（[文档](http://docs.oracle.com/javase/7/docs/api/javax/swing/text/class-use/Document.html)）

# javascript - 使用 Javascript 更改 a 元素上的类

> ID：11900217
> 
> 赞同：1
> 
> 时间：2012-08-10T10:55:00.023
> 
> 标签：javascript, jquery, css, addclass, removeclass

我对 Javascript 还很陌生，遇到了一个烦人的问题。

我有一个包含列表的列表。我有一个脚本可以设置列表在点击时可见/不可见。但是，一旦按下链接，我就不会向链接切换/添加类。

我的清单看起来像这样

```
<ul>
    <li><a href="#" onclick="toggle('item1');">Click something</a>
    <ul id="item1" style="display: none;">
        <li>Something ...</li>
        <li>Something something</li>
    </ul></li>
    <li><a href="#" onclick="toggle('item2');">Click something else</a>
    <ul id="item2" style="display: none;">
        <li>Something more...</li>
        <li>Something something less?</li>
    </ul></li>
</ul> 
```

我的脚本如下所示：

```
<script type="text/javascript">
    function toggle(id) {
        var v = document.getElementById(id);

        if (v.style.display == '') {
            v.style.display = 'none';
            v.removeClass("selected");
        } else {
            v.style.display = '';
            v.addClass("selected");
        }
    }
</script> 
```

该列表按预期显示和隐藏，但未添加或删除该类。

CSS是这样的：

```
a:link {
    color: #000000;
    text-decoration: none;
}

a:hover, a.selected {
    color: #005b97;
    text-decoration: none;
    padding-left: 2px;
} 
```

提前致谢

最好的问候本杰明

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-10T11:00:03.143

js 没有内置的添加和删除类

尝试这个

添加课程

`document.getElementById("MyElement").className += " MyClass";`

删除类

`document.getElementById("MyElement").className = document.getElementById("MyElement").className.replace ( /(?:^|\s)MyClass(?!\S)/ , '' )`

如果你需要检查一个元素是否有一个类

```
function hasClass(ele,cls) {
return ele.className.match(new RegExp('(\\s|^)'+cls+'(\\s|$)'));
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-10T10:58:24.523

vanilla JavaScript 中没有 addClass / removeClass。

要么你必须使用[HTML5 classList API](http://davidwalsh.name/classlist)要么直接操作`v.className`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-10T11:49:40.780

试图用更少的代码来做到这一点。Hoefully 它做你需要它做的事情。

**HTML：**

```
<ul>
<li><a class="aSwitch" href="#" >Click something</a>
<ul id="item1" style="display:none">
    <li>Something ...</li>
    <li>Something something</li>
</ul></li>
<li><a class="aSwitch" href="#" >Click something else</a>
<ul id="item2" style="display:none">
    <li>Something more...</li>
    <li>Something something less?</li>
</ul></li> 
```

​CSS **：**

```
a:link {
color: #000000;
text-decoration: underline;
}

a.selected {
color: #005b97;
text-decoration: none;
padding-left: 2px;
} 
```

**​jQuery**

 **```
$('a.aSwitch').click(function() {
$(this).next().toggle();
$(this).toggleClass('selected');
}); 
```

在这里看到它的工作：[FIDDLE](http://jsfiddle.net/8RNDh/1/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-10T11:01:35.247

```
document.getElementById("idElement").setAttribute("class", "className"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-10T11:04:49.373

最容易你可以添加jquery插件

```
<script src="../../Scripts/jquery-ui-1.8.11.min.js" type="text/javascript"></script> 
```

比将您的代码更改为

```
<script type="text/javascript">
function toggle(id) {
    var v = document.getElementById(id);
    $('#' + id).toggleClass("selected");
    if (v.style.display == '') {
        v.style.display = 'none';
    } else {
        v.style.display = '';
    }
}
</script> 
```**

# php - 在清漆缓存中清除失败

> ID：11900220
> 
> 赞同：4
> 
> 时间：2012-08-10T10:55:05.363
> 
> 标签：php, caching, varnish

我正在使用以下代码清除网站的主页：

```
$ch = curl_init();

curl_setopt($ch, CURLOPT_URL, "http://www.mysite.com:8080/");
curl_setopt($ch, CURLOPT_HEADER, 1);
curl_setopt($ch, CURLOPT_CUSTOMREQUEST, "PURGE");
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_NOBODY, true);
curl_setopt($ch, CURLOPT_CONNECTTIMEOUT_MS, 1000);

$r = curl_exec($ch);

echo "<PRE>$r</PRE>";

curl_close($ch); 
```

Varnish 的响应与预期一致：

```
HTTP/1.1 200 Purged.
Server: Varnish
Content-Type: text/html; charset=utf-8
Retry-After: 5
Content-Length: 382
Accept-Ranges: bytes
Date: Fri, 10 Aug 2012 10:50:56 GMT
X-Varnish: 617777456
Age: 0
Via: 1.1 varnish
Connection: close
X-Cache: MISS 
```

所以现在我认为它已被清除，但进一步调用页面检查标题表明它没有被清除。As`Age: 15`和`X-Cache: HIT`都设置了，表明该页面仍然被缓存并且已经存在 15 秒。

TTL 为 120。

我错过了什么吗？

谢谢杰克

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T22:10:55.643

为了消除所有其他 php/curl 问题，我将从最基本的低级检查开始。

这对我有用：

```
netcat -C varnish_hostname 80 <<EOF
PURGE /the/url
Host: hostname

EOF 
```

*   用您的实际清漆主机名替换 varnish_hostname。
*   用 varnish 监听的实际端口替换*80*。
*   将*/the/url*替换为要清除的 url 的路径部分
*   用您要清除的 URL 中的主机名部分替换*主机名。*

一旦你让它工作，你就知道你的 VCL 规则和 ACL 不是问题，你可以进入 curl/php 级别。

**编辑**两个注意事项：

1.  您可能必须快速键入上述内容以防止连接过早关闭，因为如今许多 http 堆栈不允许在连接建立和 HTTP 请求之间长时间延迟以防止半开 DoS 攻击。您可以通过提前准备整个输入，将其复制到您的粘贴缓冲区，然后单击鼠标粘贴整个简介来实现此目的。
2.  HTTP 请求标头必须以双新行结束，如上所示。可以选择根据`netcat -C`HTTP 协议将换行符转换为 CRLF 字符对。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T15:15:31.990

我认为您不会检查 default.vcl 中的清除 default.vcl 应包含以下内容：

```
acl purge {
        "localhost";
        "192.168.55.0"/24;
}

sub vcl_recv {
        # allow PURGE from localhost and 192.168.55...

        if (req.request == "PURGE") {
                if (!client.ip ~ purge) {
                        error 405 "Not allowed.";
                }
                return (lookup);
        }
}

sub vcl_hit {
        if (req.request == "PURGE") {
                purge;
                error 200 "Purged.";
        }
}

sub vcl_miss {
        if (req.request == "PURGE") {
                error 200 "OK but nothing to purge - URL was not in cache";
        }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-18T05:31:54.557

我想评论您应该发布您的 default.vcl 文件，但我的声誉太低了。

PURGE 在您的 vcl 文件中实现（或者至少应该在您希望它工作的情况下实现），并且它的作用和不存在于代码中。它可能会根据您连接的 IP 地址阻止您的 PURGE，或者它可能未实施。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-11-28T13:53:39.167

只是要知道，PURGE 适用于 beReq。

如果您修改 req.url（即为您的 URI 添加前缀或后缀），您应该在调用 purge 的 vcl_recv 中执行相同操作。或者，您必须在 url 操作*之后*在主 vcl_recv 中编写清除条件。

# android - Robotium：让 Solo 在本地化构建中单击 DatePicker

> ID：11900227
> 
> 赞同：0
> 
> 时间：2012-08-10T10:55:37.677
> 
> 标签：android, datepicker, robotium, datepickerdialog

我正在使用 Robotium 通过在 DatePickerDialog 中单击“设置”按钮

```
solo.clickOnButton("Set"); 
```

如果我现在将测试设备的语言更改为其他语言，Robotium 将无法找到该按钮，因为文本不再是“设置”而是翻译后的单词。

是否有可能以不同的方式访问 Picker 中的按钮？

正如在 Jelly Bean 中，DatePicker 丢失了“取消”按钮，我无法使用 clickOnButton(int index) 方法。

我唯一的想法是在 DatePickerDialog 上使用 setButton 来访问按钮文本的本地化字符串资源或保留对按钮的引用。但也许有人知道无需自定义按钮文本即可获得访问权限的更好方法。

问候金

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-07T18:31:36.473

Here's my suggestion (assuming you are showing the dialog via a `DialogFragment`): I have a `SelectDateDialogFragment` with a unique `TAG` and an `onCreateDialog()` method which creates a `DatePickerDialog`. I then show the dialog via `selectDateDialogfragment.show(getFragmentManager(), SelectDateDialogFragment.TAG)`. In the Robotium tests, I use code like the following to click the dialog's buttons:

```
solo.clickOnView(editDateButton);

solo.waitForFragmentByTag(SelectDateDialogFragment.TAG);

solo.setDatePicker(0, 2000, 1, 1);

SelectDateDialogFragment dialogFragment = (SelectDateDialogFragment) activity.getFragmentManager()
        .findFragmentByTag(SelectDateDialogFragment.TAG);
DatePickerDialog dialog = (DatePickerDialog) dialogFragment.getDialog();
Button okButton = dialog.getButton(DialogInterface.BUTTON_POSITIVE);
solo.clickOnView(okButton);

solo.waitForDialogToClose(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T12:13:34.160

如果您可以访问源代码，则可以同时使用 getString() 和 getView()：

`Button button = (Button) solo.getView(R.id.x);`

`solo.clickOnView(button);`

还有 solo.getString(R.string.x) 可以很好地用于本地化构建。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-23T21:12:05.907

我知道这不是最好的解决方案，但它对我有用：

```
solo.clickOnButton(0); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-17T19:38:08.627

我想和你分享一些细节。

第一的：

```
solo.clickOnButton(0); 
```

一段时间对我来说效果很好。但是由于新的对话框没有“设置”和“取消”按钮，而是“取消”和“确定”，这个解决方案现在将在新设备上选择取消按钮，而只是切换到

```
solo.clickOnButton(1); 
```

会打破旧设备的测试。

所以我通过两个修改迁移到 csoltenborn 的解决方案：

*   因为我想与旧设备保持兼容，所以我使用 SupportFragmentManager
*   由于我的片段根据设备及其方向嵌套在另一个片段中，因此有时我必须访问某些片段 ChildFragmentManager。

这是我的解决方案，也许它可以添加到 csoltenborn 的好答案：

```
DialogFragment dialogFrag;

Fragment outerFragment = getActivity().getSupportFragmentManager().findFragmentByTag("outerFragmentTAG");
    if (outerFragment == null) {
        dialogFrag = (DialogFragment)getActivity().getSupportFragmentManager().findFragmentByTag("datePicker");
    } else {
        dialogFrag = (DialogFragment)outerFragment.getChildFragmentManager().findFragmentByTag("datePicker");
    }
    Button okButton = ((DatePickerDialog)dialogFrag.getDialog()).getButton(DialogInterface.BUTTON_POSITIVE);
    solo.clickOnView(okButton); 
```

# php - 如果需要，php echo 语句之间的分隔符

> ID：11900228
> 
> 赞同：0
> 
> 时间：2012-08-10T10:55:41.400
> 
> 标签：php, echo, comma, separator

如果需要分隔符，如何在元素之间显示分隔符？我需要显示姓名、职位、公司。如果这些中的每一个都出现在新闻引用条目中。

并非所有新闻报价都包含所有三个项目，它可能是：

1.  姓名、职务、公司
2.  姓名、职务
3.  姓名、公司
4.  姓名

对于每个变体，我需要回显一个分隔符，例如 , 或 |

目前的查询是这样的：

```
<?php echo $row_article['quote_name'] . ', ' . $row_article['quote_job'] . ', ' . $row_article['quote_company']; ?> 
```

如果这三个都存在，它看起来是正确的。如果只有任何两个存在，我会得到类似

```
name, , company
, job title, company
name, job title, 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T10:58:18.383

您需要结合使用[array_filter](http://php.net/manual/en/function.array-filter.php)和[implode](http://hu2.php.net/manual/en/function.implode.php)。

我会写一个例子。

```
<?php

$delimiter = ' | ';

$row_articles = array(
  array(
    'quote_name' => 'Foo',
    'quote_job' => 'Bar',
    'quote_company' =>'Baz'
  ),
  array(
    'quote_name' => 'Foo',
    'quote_job' => 'Bar',
    'quote_company' =>''
  ),
  array(
    'quote_name' => 'Foo',
    'quote_job' => '',
    'quote_company' =>'Baz'
  ),
  array(
    'quote_name' => 'Foo',
    'quote_job' => '',
    'quote_company' =>''
  ),
);

foreach ($row_articles as $row_article) {
  echo implode($delimiter, array_filter($row_article));
  echo "\n";
} 
```

**输出**

```
Foo | Bar | Baz
Foo | Bar
Foo | Baz
Foo 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T10:58:09.267

[内爆](http://uk3.php.net/manual/en/function.implode.php)是你的朋友。

将每个项目添加到一个保存数组中，然后使用 implode(", ", array_name) 将它们连接起来。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-10T10:58:59.320

一种方法是将它们放在一个数组中

```
$arr[] = $var1;
$arr[] = $var2;
$arr[] = $var3;

$newarr = array_filter($arr);

echo implode(',', $newarr); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-10T10:58:50.400

尝试这个...

```
echo implode( ', ', $row_article); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-10T11:07:09.627

像这样使用 php 内爆方法。

```
<?php

$array = array('lastname', 'email', 'phone');
$comma_separated = implode(",", $array);

echo $comma_separated; // lastname,email,phone

// Empty string when using an empty array:
var_dump(implode('hello', array())); // string(0) ""

?> 
```

# biztalk - Biztalk EDIFACT 处理

> ID：11900234
> 
> 赞同：0
> 
> 时间：2012-08-10T10:56:08.237
> 
> 标签：biztalk, esb, edi, edifact

我正在尝试使用 Biztalk 处理一个 edifact 文件。我设置了一个非常简单的映射，用于发送端口。但是，Biztalk 抱怨该消息。我尝试搜索网络，但没有任何结果。[您可以在此处](http://dl.dropbox.com/u/3055964/MSCU10_AYSE%20NAZ%20BAYRAKTAR_1238A_POTI.EDI)查看 edi 文件。我已经使用 EDIFACT 协议设置了各方和协议，但我不确定我做得有多正确。每当我尝试向 biztalk 提供该消息时，我都会在事件日志中看到以下消息：

> 适配器“FILE”在接收位置“Receive Location1”上接收到 URI“C:\Temp*.edi”的消息被挂起。错误详细信息：接收管道“Microsoft.BizTalk.Edi.DefaultPipelines.EdiReceive，Microsoft.BizTalk.Edi.EdiPipelines，Version=3.0.1.0，Culture=neutral，PublicKeyToken=31bf3856ad364e35”中组件“未知”的输出消息被挂起由于以下错误：错误：1（字段级错误） SegmentID：UNB TS 中的位置：1 数据元素 ID：UNB5 段中的位置：5 数据值：37：在数据元素中发现无效字符。挂起消息的序号为 1。 MessageId：{DDE54B67-8907-49A2-BDE9-4763495B9B87} InstanceID：{892EC28B-AC4C-4EA4-8DCC-C49D5FC2869C}

我不确定这意味着什么。任何帮助，指示将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T17:31:10.710

您提供的消息看起来像是语法版本 1 的格式正确的 EDIFACT 消息（语法版本 4 是最新的）。我不知道 Biztalk，但您可能必须设置一些东西以确保它期望语法版本 1。与较新的语法版本（它期望的位置）相比，语法版本 1（它期望 5 个分隔符）的 UNA 段是不同的6 个分隔符），因此如果 Biztalk 期望 UNA 段用于更高的语法版本，那么它将无法正确处理该消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T23:54:51.287

您在 UNA 规范行中缺少 UNA5（重复分隔符）。

如果没有这个，BizTalk EDI 反汇编管道将无法正确解析您的 EDI 文件的内容。

您很可能需要与您的贸易伙伴协调，以确保 UNA 行（文件的第一行）如下所示：

```
UNA:+,?*' 
```

# c++ - 代码在 main 中有效，但在其他类中无效

> ID：11900237
> 
> 赞同：2
> 
> 时间：2012-08-10T10:56:08.220
> 
> 标签：c++, qt, qgraphicsview

我正在尝试在我的 Qt 应用程序中使用`QGraphicsView`和`QGraphicsScene`，但由于某种原因我无法让它工作。`main`如果我从类而不是从继承的控制器类执行它，我有以下代码将起作用`QObject`：

```
 QGraphicsScene scene;
 scene.setSceneRect(0,0,200,200);
 scene.setBackgroundBrush(Qt::blue);
 QGraphicsView *view = new QGraphicsView();
 view->setScene(&scene);
 view->show(); 
```

如果我在`main`场景中这样做是蓝色的，但如果我在其他班级中这样做，则场景是白色的。到底是怎么回事？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T11:06:01.907

改成这样：

```
{
QGraphicsScene * scene = new QGraphicsScene();//note that we allocate it on the heap
scene->setSceneRect(0,0,200,200);
scene->setBackgroundBrush(Qt::blue);
QGraphicsView *view = new QGraphicsView();
view->setScene(scene);
view->show();
<...>
}//your function ends here 
```

在您的版本中，场景是在堆栈上创建的，因此如果您将此代码放在类中的任何位置，场景将在函数结束时立即消失。这就是为什么它是白色的。如果你在堆上分配它，它会在右括号之后保持活动状态，你将能够看到它。

*请不要忘记删除后！*

# bash - 我可以从 CLI 缓存 Linux 上的命令输出吗？

> ID：11900239
> 
> 赞同：11
> 
> 时间：2012-08-10T10:56:30.793
> 
> 标签：bash, caching, command-line, command-line-interface

我正在寻找一个' *cacheme* '命令的实现，它' **memoizes** ' ARGV 中任何内容的输出。如果它从未运行过它，它将运行它并在一定程度上记住输出。如果它运行它，它只会复制文件的输出（或者更好的是，将输出和错误分别复制到 &1 和 &2）。

假设有人写了这个命令，它会像这样工作。

```
$ time cacheme sleep 1    # first time it takes one sec
real   0m1.228s
user   0m0.140s
sys    0m0.040s

$ time cacheme sleep 1    # second time it looks for stdout in the cache (dflt expires in 1h)
#DEBUG# Cache version found! (1 minute old)

real   0m0.100s
user   0m0.100s
sys    0m0.040s 
```

这个例子有点傻，因为它没有输出。理想情况下，它将在*sleep-1-and-echo-hello-world.sh 之*类的脚本上进行测试。

我创建了一个小脚本，它在 /tmp/ 中创建一个文件，其中包含完整的命令名称和用户名的哈希值，但我很确定某些东西已经存在。

你知道这些吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2016-01-03T06:02:38.293

通过添加到期期限作为可选参数，在某种程度上改进了上述解决方案。

```
#!/bin/sh
# save as e.g. $HOME/.local/bin/cacheme
# and then chmod u+x $HOME/.local/bin/cacheme
VERBOSE=false
PROG="$(basename $0)"
DIR="${HOME}/.cache/${PROG}"
mkdir -p "${DIR}"
EXPIRY=600 # default to 10 minutes
# check if first argument is a number, if so use it as expiration (seconds)
[ "$1" -eq "$1" ] 2>/dev/null && EXPIRY=$1 && shift
[ "$VERBOSE" = true ] && echo "Using expiration $EXPIRY seconds"
CMD="$@"
HASH=$(echo "$CMD" | md5sum | awk '{print $1}')
CACHE="$DIR/$HASH"
test -f "${CACHE}" && [ $(expr $(date +%s) - $(date -r "$CACHE" +%s)) -le $EXPIRY ] || eval "$CMD" > "${CACHE}"
cat "${CACHE}" 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-03-20T12:33:20.563

我已经为 bash 实现了一个简单的缓存脚本，因为我想[加快 gnuplot 中管道 shell 命令的绘图速度](https://stackoverflow.com/a/36092050/1916449)。它可用于缓存任何命令的输出。只要参数相同并且传入参数的文件没有更改，就会使用缓存。系统负责清理。

```
#!/bin/bash

# hash all arguments
KEY="$@"

# hash last modified dates of any files
for arg in "$@"
do
  if [ -f $arg ]
  then
    KEY+=`date -r "$arg" +\ %s`
  fi
done

# use the hash as a name for temporary file
FILE="/tmp/command_cache.`echo -n "$KEY" | md5sum | cut -c -10`"

# use cached file or execute the command and cache it
if [ -f $FILE ]
then
  cat $FILE
else
  $@ | tee $FILE
fi 
```

您可以命名脚本`cache`，设置可执行标志并将其放入您的`PATH`. 然后只需在任何命令前加上前缀`cache`即可使用它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-05-09T16:16:50.573

我创建了[bash-cache](https://github.com/dimo414/bash-cache)，这是一个用于 Bash 的记忆库，它的工作原理与您所描述的完全一样。它是专门为缓存 Bash 函数而设计的，但显然你可以在函数中包装对其他命令的调用。

它处理许多更简单的缓存机制遗漏的一些边缘情况行为。它报告原始调用的退出代码，分别保留 stdout 和 stderr，并在输出中保留任何尾随空格（`$()`命令替换将截断尾随空格）。

演示：

```
# Define function normally, then decorate it with bc::cache
$ maybe_sleep() {
  sleep "$@"
  echo "Did I sleep?"
} && bc::cache maybe_sleep

# Initial call invokes the function
$ time maybe_sleep 1
Did I sleep?

real    0m1.047s
user    0m0.000s
sys     0m0.020s

# Subsequent call uses the cache
$ time maybe_sleep 1
Did I sleep?

real    0m0.044s
user    0m0.000s
sys     0m0.010s

# Invocations with different arguments are cached separately
$ time maybe_sleep 2
Did I sleep?

real    0m2.049s
user    0m0.000s
sys     0m0.020s 
```

还有一个基准函数显示缓存的开销：

```
$ bc::benchmark maybe_sleep 1
Original:       1.007
Cold Cache:     1.052
Warm Cache:     0.044 
```

所以你可以看到读/写开销（在我的机器上，它使用[tmpfs](https://en.wikipedia.org/wiki/Tmpfs)）大约是 1/20 秒。此基准实用程序可以帮助您确定是否值得缓存特定调用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-10T12:05:02.663

这个简单的 shell 脚本（未测试）怎么样？

```
#!/bin/sh

mkdir -p cache

cachefile=cache/cache

for i in "$@"
do
    cachefile=${cachefile}_$(printf %s "$i" | sed 's/./\\&/g')
done

test -f "$cachefile" || "$@" > "$cachefile"
cat "$cachefile" 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-02-05T16:14:47.693

改进了[从错误的解决方案](https://stackoverflow.com/a/34573844/307413)：

*   管道输出到“tee”命令，允许实时查看以及存储在缓存中。
*   使用“script --flush --quiet /dev/null --command $CMD”保留颜色（例如在“ls --color”等命令中）。
*   避免使用脚本调用“exec”
*   使用 bash 和 [[

```
    #!/usr/bin/env bash

    CMD="$@"
    [[ -z $CMD ]] && echo "usage: EXPIRY=600 cache cmd arg1 ... argN" && exit 1

    # 设置-e -x

    详细=假
    PROG="$(basename $0)"

    EXPIRY=${EXPIRY:-600} # 默认为10分钟，可以覆盖
    EXPIRE_DATE=$(日期 -Is -d "-$EXPIRY seconds")

    [[ $VERBOSE = true ]] && echo "使用过期 $EXPIRY 秒"

    HASH=$(echo "$CMD" | md5sum | awk '{print $1}')
    CACHEDIR="${HOME}/.cache/${PROG}"
    mkdir -p "${CACHEDIR}"
    CACHEFILE="$CACHEDIR/$HASH"

    if [[ -e $CACHEFILE ]] && [[ $(date -Is -r "$CACHEFILE") > $EXPIRE_DATE ]]; 然后
        猫“$CACHEFILE”
    别的
        脚本 --flush --quiet --return /dev/null --command "$CMD" | 三通“$CACHEFILE”
    菲

```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-11-19T07:25:32.260

[bash-cache](https://stackoverflow.com/a/50257871/113632)的作者在这里进行了更新。我最近发布[`bkt`](http://git.mwdiamond.com/bkt)了一个用于子进程缓存的 CLI 和 Rust 库。这是一个简单的例子：

```
# Execute and cache an invocation of 'date +%s.%N'
$ bkt -- date +%s.%N
1631992417.080884000

# A subsequent invocation reuses the same cached output
$ bkt -- date +%s.%N
1631992417.080884000 
```

它支持许多功能，例如异步刷新 (`--stale`和`--warm`)、命名空间缓存 ( `--scope`)，以及可选地关闭工作目录 ( `--cwd`) 和选择环境变量 ( `--env`)。有关更多信息，请参阅自述文件。

它仍在进行中，但功能强大且有效！我已经在使用它来加速我的 shell 提示符和一些其他常见任务。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-10T11:07:07.607

我在红宝石中提出的解决方案是这样的。有人看到任何优化吗？

```
#!/usr/bin/env ruby

VER = '1.2'
$time_cache_secs = 3600
$cache_dir = File.expand_path("~/.cacheme")

require 'rubygems'
begin
  require 'filecache'           # gem install ruby-cache
rescue Exception => e
  puts 'gem filecache requires installation, sorry. trying to install myself'
  system  'sudo gem install -r filecache'
  puts  'Try re-running the program now.'
  exit 1
end

=begin
  # create a new cache called "my-cache", rooted in /home/simon/caches
  # with an expiry time of 30 seconds, and a file hierarchy three
  # directories deep
=end
def main
  cache = FileCache.new("cache3", $cache_dir, $time_cache_secs, 3)
  cmd = ARGV.join(' ').to_s   # caching on full command, note that quotes are stripped
  cmd = 'echo give me an argment' if cmd.length < 1

  # caches the command and retrieves it
  if cache.get('output' + cmd)
    #deb "Cache found!(for '#{cmd}')"
  else
    #deb "Cache not found! Recalculating and setting for the future"
    cache.set('output' + cmd, `#{cmd}`)
  end
  #deb 'anyway calling the cache now'
  print(cache.get('output' + cmd))
end

main 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-10-28T09:01:09.993

这里有一个实现：[https](https://bitbucket.org/sivann/runcached/src) : //bitbucket.org/sivann/runcached/src 缓存可执行路径、输出、退出代码，记住参数。可配置过期。用 bash、C、python 实现，选择适合你的。

# unit-testing - 摩卡测试，之前（每个）没有运行？

> ID：11900243
> 
> 赞同：1
> 
> 时间：2012-08-10T10:56:39.730
> 
> 标签：unit-testing, node.js, mongoose, mocha.js

我正在尝试测试我的`mongoose`模型，例如：

待办事项 = 需要“../../../app/todos/Todo”

```
describe "Todo", ->
describe "Basic CRUD", ->

    before: (done) ->
        console.log "In b4"
        Todo.remove {}, (err) ->
            console.log "removed"
            done err

    it "can be added to database", (done) ->
        todo = new Todo
            title: "New todo"
        todo.save (err) ->
            if !err
                Todo.find { title: "New todo" }, (err, docs) ->
                    docs.length.should.equal 1
                    done(err)
            else 
                done err 
```

出于某种原因，`before`或者`beforeEach`没有触发，这是为什么呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T12:47:37.047

看来你之前我的格式不正确。

应该删除之前的'：'...应该是：

```
before (done) ->
     console.log 'In b4' 
```

# linux-kernel - pci_driver.probe 函数没有调用所以 pci_device_id 错误？

> ID：11900251
> 
> 赞同：2
> 
> 时间：2012-08-10T10:57:11.510
> 
> 标签：linux-kernel, linux-device-driver, kernel-module

我正在向 Linux 内核设备驱动程序开发迈出第一步。

我了解到，对于 pci-e 卡，我必须`pci_register_driver`通过类型对象调用提供信息`pci_driver`（下面的示例）。当我加载我的模块时（ via `insmod`）如果`.id_table`找到通过的信息而不是调用该`.probe`函数。

就像我现在一样，我根本看不到我的`.probe`函数被调用（我添加了一些日志记录`printk`），所以我必须假设其中包含的信息`pci_device_id`一定是错误的，对吧？

有没有办法直接从硬件本身检索这些信息？一旦我将 PCI-E 卡插入我的 Linux 机器，我在哪里可以找到有关它的所有信息？也许读取 BIOS 或系统中的某些文件？

任何帮助表示赞赏。

AFG

```
 static struct pci_driver my_driver = {
      // other here
          .id_table = pci_datatable,
          .probe    = driver_add
      //
      };

      static struct pci_device_id pci_datatable[] __devinitdata =
      {
          { VendorID,  PciExp_0041,  PCI_ANY_ID, PCI_ANY_ID },
          { 0 },
      };

      int __devinit DmaDriverAdd(
          struct pci_dev *             pPciDev,
          const struct pci_device_id * pPciEntry
          )
      {
          // my stuff!
      } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T21:18:41.087

虽然接受的答案确实回答了这个问题，但我想详细说明一下未调用的探测函数。

根据 Documentation/PCI/pci.txt（如何编写 Linux PCI 驱动程序），探测功能被调用用于尚未由其他驱动程序**拥有的所有现有 PCI 设备。**因此，即使您拥有正确的供应商和设备 ID，如果设备归另一个驱动程序所有，您也不会看到正在调用的函数。要查看哪些驱动程序拥有哪些设备运行：

`lspci -knn`

如果您暂时将供应商 ID 和设备 ID 都更改为 PCI_ANY_ID，则将为每个**可用**（即非拥有）设备调用您的探测函数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-10T13:38:51.510

你想要的命令是`lspci`.

如果没有参数，它将为您提供所有 PCI 设备的列表，例如：

```
$ lspci
00:00.0 Host bridge: Intel Corporation 2nd Generation Core Processor Family DRAM Controller (rev 09)
00:02.0 VGA compatible controller: Intel Corporation 2nd Generation Core Processor Family 
03:00.0 Network controller: Intel Corporation Centrino Advanced-N 6205 (rev 34)
... 
```

然后要获取 ID，请使用：

```
$ lspci -v -n -s 03:00.0
03:00.0 0280: 8086:0085 (rev 34)
    Subsystem: 8086:1311
    Flags: bus master, fast devsel, latency 0, IRQ 52 
```

您还可以在以下位置找到相同的信息`/sys`：

```
$ cd /sys/bus/pci/devices/0000:03:00.0 
$ cat vendor device 
0x8086
0x0085
$ cat subsystem_vendor subsystem_device 
0x8086
0x1311 
```

# java - 将字符串写入图像时，我得到一个又长又窄的图像 - 如何断线？

> ID：11900253
> 
> 赞同：2
> 
> 时间：2012-08-10T10:57:11.770
> 
> 标签：java, string, image

我正在尝试将字符串写入图像，因此很难复制文本并通过翻译器运行它。

我的代码工作正常，但我总是得到一个很长的图像 - 我宁愿在写入字符串的地方有一个更易读的框。我的方法“StringDiver”确实添加了“\n”，但在将字符串写入图像时没有帮助。

现在我得到[这个](http://i45.tinypic.com/260pt01.jpg)输出。

任何提示我能做什么？

```
import java.awt.Color;
import java.awt.Font;
import java.awt.Graphics2D;
import java.awt.font.FontRenderContext;
import java.awt.geom.Rectangle2D;
import java.awt.image.BufferedImage;
import java.io.File;
import java.io.IOException;

import javax.imageio.ImageIO;

public class writeToImage {

/**
 * @param args
 */
public static void main(String[] args) {
    // TODO Auto-generated method stub

    String newString = "Mein Eindruck ist, dass die politische und öffentliche Meinung in Deutschland anfängt, die wirtschaftliche Zerstörung im Inland und in Europa zu erkennen, die auf einen eventuellen Zusammenbruch des Euro folgen würde.";
    String sampleText = StringDivider(newString);

    //Image file name
   String fileName = "Image";

    //create a File Object
    File newFile = new File("./" + fileName + ".jpg");

    //create the font you wish to use
    Font font = new Font("Tahoma", Font.PLAIN, 15);

    //create the FontRenderContext object which helps us to measure the text
    FontRenderContext frc = new FontRenderContext(null, true, true);

    //get the height and width of the text
    Rectangle2D bounds = font.getStringBounds(sampleText, frc);
    int w = (int) bounds.getWidth();
    int h = (int) bounds.getHeight();

    //create a BufferedImage object
   BufferedImage image = new BufferedImage(w, h,   BufferedImage.TYPE_INT_RGB);

    //calling createGraphics() to get the Graphics2D
    Graphics2D g = image.createGraphics();

    //set color and other parameters
    g.setColor(Color.WHITE);
    g.fillRect(0, 0, w, h);
    g.setColor(Color.BLACK);
    g.setFont(font);

   g.drawString(sampleText, (float) bounds.getX(), (float) -bounds.getY());

  //releasing resources
  g.dispose();

    //creating the file
   try {
    ImageIO.write(image, "jpg", newFile);
} catch (IOException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
}
 }

public static String StringDivider(String s){

    StringBuilder sb = new StringBuilder(s);

    int i = 0;
    while ((i = sb.indexOf(" ", i + 30)) != -1) {
        sb.replace(i, i + 1, "\n");
    }

    return sb.toString();

}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T11:05:59.773

```
g.drawString(sampleText, (float) bounds.getX(), (float) -bounds.getY()); 
```

拆分文本并将每个部分写入图像。

```
Rectangle2D bounds = font.getStringBounds(sampleText, frc);
int w = (int) bounds.getWidth();
int h = (int) bounds.getHeight();

String[] parts = sampleText.split("\n");
//create a BufferedImage object
BufferedImage image = new BufferedImage(w, h * parts.length,   BufferedImage.TYPE_INT_RGB);

int index = 0;  
for(String part : parts){
    g.drawString(part, 0,  h * index++);
} 
```

前任：

```
first part:  x=0 ; y=0
second part: x=0 ; y=5
third part:  x=0 ; y=10; 
```

高度文本 = h

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T12:19:58.570

看看[LineBreakMeasurer](http://docs.oracle.com/javase/6/docs/api/java/awt/font/LineBreakMeasurer.html)。Javadoc 中的第一个代码示例正是您正在寻找的。

# c# - 如何为动态创建的按钮创建 onClick eventHandler

> ID：11900257
> 
> 赞同：4
> 
> 时间：2012-08-10T10:57:37.150
> 
> 标签：c#, asp.net, visual-studio-2010, button

目前，我正在为学生宿舍做一个项目，现在我必须实现一些关于学生的搜索策略。这里我必须在用户单击 .aspx 页面中的另一个服务器按钮时动态创建一个按钮，因此我必须创建新创建按钮的 onclick 事件处理程序。我使用的代码片段是：

```
protected void btnsearchByName_Click(object sender, EventArgs e)
    {
        TextBox tbsearchByName = new TextBox();
        Button btnsearchName = new Button();
        tbsearchByName.Width = 250;
        tbsearchByName.ID = "tbsearchByName";
        tbsearchByName.Text = "Enter the full name of a student";
        btnsearchName.ID = "btnsearchName";
        btnsearchName.Text = "Search";
        btnsearchName.Click += new EventHandler(this.btnsearchName_Click);

        pnlsearchStudents.Controls.Add(tbsearchByName);
        pnlsearchStudents.Controls.Add(btnsearchName);
    }
     protected void btnsearchName_Click(object sender, EventArgs e)
    {
        lblsearch.Text = "btnsearchName_Click event fired in " + DateTime.Now.ToString();

    } 
```

在这里，问题是新创建的 eventHandler 没有被触发。我浏览了这个网站，查看了几个问题和答案，还浏览了页面生命周期，他们都说动态按钮应该在 Init 或 Pre_init 上，但我的问题是我必须在单击另一个按钮时创建它，怎么可能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T11:00:09.493

您需要在每次回发时为按钮添加点击处理程序。

您可以在页面加载时的搜索学生面板中查找按钮，或尝试页面 OnInit() 方法在创建处理程序时添加处理程序。

还要在这里检查：

[动态添加的 ASP.NET 按钮单击处理程序被忽略](https://stackoverflow.com/questions/11245808/dynamically-added-asp-net-button-click-handler-being-ignored)

在这里： [带有事件处理程序的asp.net动态按钮](https://stackoverflow.com/questions/7713242/asp-net-dynamically-button-with-event-handler)

在这里： [asp:Button Click 事件没有被触发](https://stackoverflow.com/questions/8779040/aspbutton-click-event-not-being-fired)

（所有这些都给出了类似的建议）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T11:13:37.493

试试这个[http://msdn.microsoft.com/ru-ru/library/system.web.ui.webcontrols.button.command(v=vs.90).aspx](http://msdn.microsoft.com/ru-ru/library/system.web.ui.webcontrols.button.command(v=vs.90).aspx)

```
btnsearchName.Command += new CommandEventHandler(this.btnsearchName_Click); 
```

`btnsearchName.CommandName = "Click";`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T11:07:21.850

您每次都需要重新创建按钮并附加事件处理程序。为此，创建一个按钮列表并将其保存在会话中。在页面加载时，每次都浏览列表并创建按钮

```
public Button create_button()
{
        btnsearchName.ID = "btnsearchName";
        btnsearchName.Text = "Search";
        btnsearchName.Click += new EventHandler(this.btnsearchName_Click);

       return btnsearchName;
 }

 public TextBox create_textbox()
 {
      TextBox tbsearchByName = new TextBox();
        Button btnsearchName = new Button();
        tbsearchByName.Width = 250;
        tbsearchByName.ID = "tbsearchByName";
        tbsearchByName.Text = "Enter the full name of a student";
        return tbsearchByName;
 }

protected void btnsearchByName_Click(object sender, EventArgs e)
{
    TextBox tbsearchByName = create_textbox();
    Button btnsearchName = create_button();
    //add to panels
    pnlsearchStudents.Controls.Add(tbsearchByName);
    pnlsearchStudents.Controls.Add(btnsearchName);

   //add to session
   List<Button> lstbutton = Session["btn"] as List<Button>
   lstbutton.add(btnsearchName);
   //similarly add textbox

  //again add to session
  Session["btn"] = lstbutton 
}

public override page_load(object sender, eventargs e)
{
   //fetch from session, the lstButton and TextBox and recreate them
   List<Button> lstbutton = Session["btn"] as List<Button>;
   foreach(Button b in lstbutton)
       pnlsearchStudents.Controls.Add(b);

   //similar for textbox

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-10T11:16:37.603

我不确定，但可能你必须像这样覆盖 OnInit() 方法。

```
 protected override void OnInit(EventArgs e)
 {
    base.OnInit(e);
 } 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-08-10T11:04:15.870

您只需在 jquery 代码的就绪状态添加此代码，它也适用于动态按钮

```
$(document).ready(function(){
   $('input#tbsearchByName').click(function(){
         // code goes here
   });
}); 
```

# java - Intent.putExtra(String,Bundle) 与 Intent.putExtra(Bundle)

> ID：11900266
> 
> 赞同：8
> 
> 时间：2012-08-10T10:58:17.063
> 
> 标签：java, android, eclipse, android-intent

这个问题可能听起来很愚蠢，但我想知道我们什么时候输入活动名称`Intent.putExtra()`？在一种情况下，我们只在 bundle 中添加 extra，在另一种情况下，我们使用类名传递它。我有点困惑我们是否应该使用`Intent.putExtra(String, Bundle)`我们已经在`Intent`构造函数中传递了活动名称？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-10T11:13:04.613

我认为您的意思是`putExtra(String, Bundle)`vs `putExtras(Bundle)`（与**s**）。

第一个添加捆绑包作为您提供的键的值。bundle 是一个简单的对象值。

第二个将提供的包中的所有键/值对添加到意图。在这种情况下，捆绑的内容将被添加到意图中，而不是捆绑本身。

把它们想象成`Map`界面：

```
Map.put(String key, Object value) 
```

对比

```
Map.putAll(Map anotherMap) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-10T14:13:25.047

该方法只是这里的区别。如果您使用 a `Bundle`，您可以在其中存储几乎所有类型：

```
Bundle mBundle = new Bundle();
mBundle.put(key, value); 
```

并将其传递给活动

```
mIntent.putExtras(mBundle); 
```

在接收信息的其他活动中，只需像这样获取捆绑包的内容：

```
 Bundle extras = getIntent().getExtras(); 
```

并像这样抓住每个元素`bundle`：

```
extras.getString("myKey") 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-10T10:59:57.503

查看源代码[http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.0.4_r1.2/android/content/Intent.java#Intent.putExtras% 28android.os.Bundle%29](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.0.4_r1.2/android/content/Intent.java#Intent.putExtras%28android.os.Bundle%29)

# html - 给上边框两种颜色

> ID：11900269
> 
> 赞同：3
> 
> 时间：2012-08-10T10:58:36.933
> 
> 标签：html, css

我有这个：

```
<style type="text/css">
  .TopBorderPanel {
     position: relative;
     overflow: hidden; 
     border-top: 2px solid #bbbb9f;
     margin: 1px;
     width: 500px; 
    }
</style> 
```

顶部边框有一种颜色，#bbbb9f，
我想做的是让它有 2 种颜色
50% #bbbb9f 和 50% #cccccc
可能吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-10T11:57:49.047

[http://jsfiddle.net/CdWCA/](http://jsfiddle.net/CdWCA/)

```
.TopBorderPanel {
    border-top: 2px solid #bbbb9f;
    position: relative;
}    

.TopBorderPanel:after {
    position: absolute;
    left: 50%;
    right: 0;
    top: -2px;
    border-top: 2px solid #cccccc;
    content: '';
}
​ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T11:02:45.567

更好地使用背景 *.gif 平均分成两种颜色，并在顶部使用单个像素的填充：

```
.TopBorderPanel {
    border: 0;
    background-image: url(...);
    padding-top: 1px;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T11:28:29.873

我可以想到两种方法来做到这一点。

我的第一种方法是使用伪选择器，它的作用是添加内容、样式`:before`或`:after`元素。因此，实际上您可以为一个元素设置 2 种样式，一种是正常的，然后在该元素之前或之后添加一些额外的样式。

我像往常一样添加了一个边框顶部，然后使用伪选择器添加了另一个边框顶部。

我的第二个解决方案是添加一个盒子阴影，而不是通常看起来像一个漫射阴影，它的样式看起来像元素上方的一个实心阴影。

我创建了一个 jsFiddle，希望能给你一个想法，但如果你不明白，就说吧。

[jsFiddle](http://jsfiddle.net/vWRwT/1/)

# c# - 如何将多个excel表导入2个sql server表？

> ID：11900273
> 
> 赞同：0
> 
> 时间：2012-08-10T10:58:49.367
> 
> 标签：c#, asp.net

我有一个 excel 文件，其中包含 2 个不同的工作表作为fundmodelrate 和 project。现在我想将这 2 个不同的工作表值导入 2 个不同的 sql 表（k2_fundmodelrate，k2_project）。我只能在使用 1 个工作表和和1 个表，但我希望在按钮单击事件上同时在两个表上导入两个工作表值。我的代码如下：

```
private String strConnection = "Data Source=kuws4;Initial Catalog=jes;User ID=sa;Password=******";               
        protected void btnSend_Click(object sender, EventArgs e)
        {

            string path = fileuploadExcel.PostedFile.FileName;

            string excelConnectionString = @"Provider=Microsoft.ACE.OLEDB.12.0;Data Source=D:\fmr.xls;Extended Properties=Excel 12.0;Persist Security Info=False";

            OleDbConnection excelConnection = new OleDbConnection(excelConnectionString);

            OleDbCommand cmd = new OleDbCommand("Select * from [FundModelRate$]", excelConnection);
            //OleDbCommand cmd1 = new OleDbCommand("Select * from [FundModelRate$],  [Project$]", excelConnection);
            excelConnection.Open();
            OleDbDataReader dReader;
            dReader = cmd.ExecuteReader();
            SqlBulkCopy sqlBulk = new SqlBulkCopy(strConnection);

            sqlBulk.DestinationTableName = "K2_FundModelRate";
           // sqlBulk.DestinationTableName = "K2_Project";
            sqlBulk.WriteToServer(dReader);
            excelConnection.Close();
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T11:24:32.233

我认为唯一的方法是遍历你的两个`sheets`.

看看[这篇](http://www.codeproject.com/Articles/8096/C-Retrieve-Excel-Workbook-Sheet-Names)文章。这将帮助您获取`sheet`名称。

当你有了`sheet`名字后，你可以遍历它们，然后将它们加载到`SQL`.

也许这可以帮助你：

```
OleDbConnection objConn = null;
System.Data.DataTable dt = null;
string excelConnection = "";

if(strFile.Trim().EndsWith(".xlsx"))
{
    excelConnection = string.Format("Provider=Microsoft.ACE.OLEDB.12.0;Data Source={0};Extended Properties=\"Excel 12.0 Xml;HDR=YES;IMEX=1\";", strFile);
}
else if(strFile.Trim().EndsWith(".xls")) 
{
    excelConnection = string.Format("Provider=Microsoft.Jet.OLEDB.4.0;Data Source={0};Extended Properties=\"Excel 8.0;HDR=Yes;IMEX=1\";", strFile);
}

objConn = new OleDbConnection(excelConnection);

objConn.Open();

dt = objConn.GetOleDbSchemaTable(OleDbSchemaGuid.Tables, null);

String[] excelSheets = new String[dt.Rows.Count];
int i = 0;

foreach(DataRow row in dt.Rows)
{
    excelSheets[i] = row["TABLE_NAME"].ToString();
    i++;
}

for(int j=0; j < excelSheets.Length; j++)
{
    OleDbCommand cmd = new OleDbCommand("Select * from " + excelSheets[j], excelConnection);

    excelConnection.Open();
    OleDbDataReader dReader;
    dReader = cmd.ExecuteReader();
    SqlBulkCopy sqlBulk = new SqlBulkCopy(strConnection);

    sqlBulk.DestinationTableName = "YourDestinationTableName";

    sqlBulk.WriteToServer(dReader);
    excelConnection.Close();
} 
```

**注：**未测试

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-27T09:51:48.340

```
public void importdatafromexcel(string excelfilepath)
        {
            //declare variables - edit these based on your particular situation
            string ssqltable = "test_data";//sql table name
            // make sure your sheet name is correct, here sheet name is sheet1, so you can change your sheet name if havedifferent
            string myexceldataquery = "select * from [Sheet1$]";
            try
            {
                //create our connection strings
                string sexcelconnectionstring = @"provider=microsoft.jet.oledb.4.0;data source=" + excelfilepath + ";extended properties=" + "\"excel 8.0;hdr=yes;\"";
                string ssqlconnectionstring = "server=ServerName;user id=sa;password=sa;database=Databasename;connection reset=false";
                //execute a query to erase any previous data from our destination table
                string sclearsql = "Delete from " + ssqltable;
                SqlConnection sqlconn = new SqlConnection(ssqlconnectionstring);
                SqlCommand sqlcmd = new SqlCommand(sclearsql, sqlconn);
                sqlconn.Open();
                sqlcmd.ExecuteNonQuery();
                sqlconn.Close();
                //series of commands to bulk copy data from the excel file into our sql table
                OleDbConnection oledbconn = new OleDbConnection(sexcelconnectionstring);
                OleDbCommand oledbcmd = new OleDbCommand(myexceldataquery, oledbconn);
                oledbconn.Open();
                OleDbDataReader dr = oledbcmd.ExecuteReader();
                SqlBulkCopy bulkcopy = new SqlBulkCopy(ssqlconnectionstring);
                DataTable dt = new DataTable();

                bulkcopy.DestinationTableName = ssqltable;
                bulkcopy.WriteToServer(dr);
                oledbconn.Close();

            }
            catch (Exception)
            {
                throw;
            }
        }

/*---------- call that file on buttonclick through OpenDialogBox--------*/

  private void button1_Click(object sender, EventArgs e)
        {
            DialogResult result = openFileDialog1.ShowDialog();

            if (result == DialogResult.OK) // Test result.
            {
                string strfilename = openFileDialog1.InitialDirectory + openFileDialog1.FileName;
                importdatafromexcel(strfilename);

            }

            Console.WriteLine(result);
            MessageBox.Show("Exported to SQL successfully");
        } 
```

# ruby-on-rails - Rails - 在 has_many 关联中限制结果

> ID：11900274
> 
> 赞同：1
> 
> 时间：2012-08-10T10:58:50.417
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord

我有 3 个模型，用户、经销商和角色，如下所示：

```
class User < ActiveRecord::Base
  has_many :roles
  has_many :sales, :through => :roles
  has_many :appraisals, :through => :roles
  has_many :dealers, :through => :roles
end

class Dealer < ActiveRecord::Base
  has_many :roles, :as => :role_originator
  has_many :users, :through => :roles
end

class Sale < ActiveRecord::Base
  has_many :roles, :as => :role_originator
  has_many :users, :through => :roles
end

class Role < ActiveRecord::Base
  belongs_to :role_type
  belongs_to :user
  belongs_to :role_originator, :polymorphic => true
end 
```

关联按预期工作 - 例如，我可以`dealer.users`获取在该经销商处担任角色的所有用户。

我遇到的问题是我希望能够执行`dealer.users.first.roles`并仅返回与该经销商关联的角色，但目前它返回与用户关联的所有角色，无论它们是否引用另一个经销商.

如何修改我的模型以允许`dealer.users.first.roles`仅返回与所选经销商和用户关联的角色，而不是用户的所有角色？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T13:00:39.550

您的查询的问题是您要找到经销商的第一个用户，然后询问该用户的角色，这与经销商无关。

如果您已经知道您想要哪个经销商，并且您想要该经销商的第一个用户，那么您可以执行类似的操作

```
@dealer = dealer
@user = @dealer.users.first
@roles = Role.where("user_id = ? AND dealer_id = ?", @user.id, @dealer.id) 
```

这应该只返回该用户和该经销商共享的角色。

# excel - 如何将宏分配给VBA excel中的多组超链接

> ID：11900275
> 
> 赞同：0
> 
> 时间：2012-08-10T10:58:52.813
> 
> 标签：excel, hyperlink, vba

在 excel 中使用 vba 将宏分配给超链接时遇到问题。当我在单元格 B2:B5 中有四个链接到自己的单元格的超链接时，我可以使用下面的代码让它工作。

```
Sub Worksheet_FollowHyperlink(ByVal Target As Hyperlink)
For i = 1 To 5
    If Target.Range.Address = "$B$" & 1 + i Then
    MsgBox "test" & i & " works!"
    End If
Next
End Sub 
```

当我想在不同的列中添加更多超链接时，问题就出现了，这些超链接也分配给了同一张表中的宏。有人知道怎么做这个吗？

在此先感谢，JW。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T13:36:14.387

这个怎么样？

```
Sub Worksheet_FollowHyperlink(ByVal Target As Hyperlink)

Select Case Target.Range.Column

    Case Is = 2, 3, 4 'change to whichever columns you need to reference

        For i = 1 To 5

            If Target.Range.Address = Cells(i + 1, Target.Range.Column).Address Then

                MsgBox "test " & i & " works!"

            End If

        Next

End Select

End Sub 
```

# python - 防止执行python定义

> ID：11900280
> 
> 赞同：2
> 
> 时间：2012-08-10T10:59:13.050
> 
> 标签：python

我想知道在 Python 定义中检查条件的最佳方法是什么，并在条件不满足时阻止它进一步执行。现在我正在遵循下面提到的方案，但它实际上打印了整个跟踪堆栈。我希望它只打印一条错误消息，而不执行其余代码。有没有其他更清洁的解决方案可以做到这一点。

```
def Mydef(n1,n2):
    if (n1>n2):
        raise ValueError("Arg1 should be less than Arg2)
    # Some Code

Mydef(2,1) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T11:03:02.110

这就是创建异常的目的。您提出异常的方案总体上是好的；你只需要添加一些代码来捕获它并处理它

```
try:
    Mydef(2,1)
except ValueError, e:
    # Do some stuff when exception is raised, e.message will contain your message 
```

在这种情况下，Mydef 的执行会在遇到 raise ValueError 代码行时停止，并转到**except**下的代码块。

[您可以在文档](http://docs.python.org/tutorial/errors.html)中阅读有关异常处理的更多信息。

如果您不想处理异常处理，您可以优雅地停止函数以使用**return**语句执行进一步的代码。

```
def Mydef(n1,n2):
    if (n1>n2):
        return 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T11:04:31.230

```
def Mydef(n1,n2):
    if (n1>n2):
        print "Arg1 should be less than Arg2"
        return None
    # Some Code

Mydef(2,1) 
```

函数在到达`return`语句时停止执行，或者它们运行直到定义结束。你应该阅读`flow control`一般（不是专门针对python）

# php - 更新/删除 Google 应用程序条目 - 未找到 ETag

> ID：11900285
> 
> 赞同：11
> 
> 时间：2012-08-10T10:59:49.790
> 
> 标签：php, zend-framework, google-apps

尝试更新 Google Apps 上的条目时`No ETag found`返回。添加条目可以正常工作，但不能更新或删除条目！？

ETag 被添加到代码中最后一行的标题中：

```
$this->gdata->updateEntry($doc->saveXML(), $update_entry->getEditLink()->href, null, array('If-Match' => '*')); 
```

# 例外

```
Expected response code 200, got 409 
```

# 代码

```
private function update_entry($data, $update_entry=null){
        $doc = new DOMDocument();
        $doc->formatOutput = true;

        $entry = $doc->createElement('atom:entry');
        $entry->setAttributeNS('http://www.w3.org/2000/xmlns/', 'xmlns:atom', 'http://www.w3.org/2005/Atom');
        $entry->setAttributeNS('http://www.w3.org/2000/xmlns/', 'xmlns:gd', 'http://schemas.google.com/g/2005');
        $doc->appendChild($entry);

        if($update_entry){
            preg_match('/^"?([^"]*)"?$/i', $update_entry->getEtag(), $matches);
            $etag_value = $matches[1];

            $entry->setAttribute('gd:etag', $etag_value);
            $id = $doc->createElement('id', 'http://www.google.com/m8/feeds/contacts/'.$this->admin_user.'/base/'.$data['alias']);
        $entry->appendChild($id);
        }

        $name = $doc->createElement('gd:name');
        $entry->appendChild($name);
        $fullName = $doc->createElement('gd:fullName', $data['name']);
        $name->appendChild($fullName);

        if($data['title']){
            $org = $doc->createElement('gd:organization');
            $org->setAttribute('rel' ,'http://schemas.google.com/g/2005#work');
            $entry->appendChild($org);
            $orgName = $doc->createElement('gd:orgTitle', $data['title']);
            $org->appendChild($orgName);
        }

        if($data['email']){
            $email = $doc->createElement('gd:email');
            $email->setAttribute('address', $data['email']);
            $email->setAttribute('rel', 'http://schemas.google.com/g/2005#work');
            $entry->appendChild($email);
        }

        if($data['phone_work']){
            $phone_work = $doc->createElement('gd:phoneNumber', $data['phone_work']);
            $phone_work->setAttribute('rel', 'http://schemas.google.com/g/2005#work');
            $entry->appendChild($phone_work);
        }

        if($data['phone_work_mobile']){
            $phone_work_mobile = $doc->createElement('gd:phoneNumber', $data['phone_work_mobile']);
            $phone_work_mobile->setAttribute('rel', 'http://schemas.google.com/g/2005#work_mobile');
            $entry->appendChild($phone_work_mobile);
        }

        if($update_entry){
            echo $doc->saveXML();
            $this->gdata->updateEntry($doc->saveXML(), $update_entry->getEditLink()->href, null, array('If-Match' => $etag_value));
        }
        else{
            $this->gdata->insertEntry($doc->saveXML(), 'http://www.google.com/m8/feeds/contacts/'.self::DOMAIN.'/full');
        }
    } 
```

# XML

```
<?xml version="1.0"?>
<atom:entry xmlns:atom="http://www.w3.org/2005/Atom" xmlns:gd="http://schemas.google.com/g/2005" gd:etag="CxFbERtcFit7I2Bu">
  <id>http://www.google.com/m8/feeds/contacts/admin_user@domain.com/base/alias</id>
  <gd:name>
    <gd:fullName>name</gd:fullName>
  </gd:name>
  <gd:organization rel="http://schemas.google.com/g/2005#work">
    <gd:orgTitle>title</gd:orgTitle>
  </gd:organization>
  <gd:email address="mail@domain.com" rel="http://schemas.google.com/g/2005#work"/>
  <gd:phoneNumber rel="http://schemas.google.com/g/2005#work">22260435</gd:phoneNumber>
  <gd:phoneNumber rel="http://schemas.google.com/g/2005#work_mobile">1112223</gd:phoneNumber>
</atom:entry> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-25T11:32:03.720

乍一看，一切似乎都很好，但看看谷歌文档（双关语），谷歌似乎直接将 etag 作为条目标签上的属性：

```
<entry xmlns="http://www.w3.org/2005/Atom" xmlns:gd="http://schemas.google.com/g/2005" gd:etag="BxAaTxRZAyp7ImBq"> 
```

编辑：Googlin'当然可以找到文档，但[直接链接](https://developers.google.com/google-apps/contacts/v3/#updating_contacts)可能更容易。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-15T15:03:37.433

您需要添加带有 E-tag 的标题，如果您不想关心它，您可以使用：

```
$this->gdata->setHeaders('If-Match: *'); 
```

# ios - 读取 x,y 像素触摸 ipad/iphone？

> ID：11900287
> 
> 赞同：1
> 
> 时间：2012-08-10T10:59:56.403
> 
> 标签：ios, multi-touch

有没有办法检测你正在触摸哪些像素，同时将你的手/手指放在屏幕上（iphone/ipad）？基本上画出我手的形状（不像指纹那样详细）。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T11:11:47.213

如果您正在寻找触摸的坐标点，请使用以下代码。

```
- (void) touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {

        UITouch *touch = [touches anyObject];
        CGPoint currentTouchPosition = [touch locationInView:self.view];
        NSLog(@"%f,%f",currentTouchPosition.x,currentTouchPosition.y);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T11:16:28.697

遗憾的是，您想要实现的目标是不可能的。当前的设备最多只能检测 11 次触摸作为**点**（[更多信息在这篇文章中](https://stackoverflow.com/questions/1202484/how-to-force-iphone-ipod-touch-to-handle-more-than-5-touches-at-the-same-time)）。没有办法获得真正的触摸区域或真正的触摸像素。

# c - 根据位掩码合并两个位域

> ID：11900289
> 
> 赞同：2
> 
> 时间：2012-08-10T10:59:58.027
> 
> 标签：c, bit-manipulation, ansi, bitmask

我想知道是否可以使用位操作根据位掩码合并两个位域？例如，我有两个值和一个位掩码：

```
char mask = 0x29; // 0010 1001
char a = 0x9;     // 0000 1001 original value
char b = 0xE8;    // 1110 1000 modified value 
```

我想根据位掩码将 b 中的位设置为 a 的值。只有 3 位会受到影响。

```
char val = 0xC9;  // 1100 1001 value 
```

那么我怎么能只用位操作呢？

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-10T11:02:36.470

尝试类似：

```
b &= ~mask;       /* Clear bits set in mask. */
b |= (mask & a);  /* Add bits set both in a and in mask. */ 
```

此外，您可能希望使用`unsigned`类型而不是不确定的`char`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-10T11:18:29.900

```
val = a ^ ((a ^ b) & mask); 
```

也有效。通常这并没有真正的帮助，但在某些情况下它可能会有所帮助。例如，如果`a`和`b`都是常数，它可以比普通公式更简化。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-10T11:02:57.370

首先，清除掩码中*设置*`b`的位。然后，从 中清除掩码中*未设置*`a`的位。最后，`OR`将两个结果放在一起：

```
b = (b & ~mask) | (a & mask); 
```

波浪号`~`运算符产生否定掩码。将掩码中设置`AND`的`~mask`位清零。`b`

# php - 简化 PHP 文件 - PHP 压缩

> ID：11900290
> 
> 赞同：0
> 
> 时间：2012-08-10T11:00:00.447
> 
> 标签：php, compression

我知道例如**JavaScript**或**CSS**可以“*压缩*”、“*简化*”以便更快地加载。简化后，它们很难被人类阅读……这正是我所需要的。
反正有没有**自动**制作？将所有变量重命名为短随机字符串并使其全部超压缩。我不认为这是一件愚蠢的事情，因为我在 javascript 中见过很多次。这个想法是保存原始来源并上传缩小的来源。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T11:01:21.737

没有必要这样做。服务器读取文件，文件永远不会传输给用户。

因此，压缩是无用的，因为没有节省带宽。

然而，CSS 和 JavaScript 确实会传递给用户，因此他们可以看到它。除非您在服务器上做错了什么，否则用户永远看不到 PHP。但是你需要担心与压缩完全不同的事情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T11:03:47.990

如果你想压缩它，这基本上是没用的，因为你有它在服务器上，只有输出被传输到客户端。

如果你想让代码更难被其他人阅读，你正在寻找一种叫做混淆器的东西。

有一些 php 混淆器引擎，pe

*   [http://www.codeeclipse.com/](http://www.codeeclipse.com/)
*   [http://www.truebug.com/](http://www.truebug.com/)
*   [http://www.raizlabs.com/softwarephpobfuscator/](http://www.raizlabs.com/softwarephpobfuscator/)

# c++ - 人脸检测和图像预览绘图

> ID：11900293
> 
> 赞同：0
> 
> 时间：2012-08-10T11:00:18.463
> 
> 标签：c++, .net, winforms, graphics, directshow

我正在开发将 DirectShow 与 C++ 结合使用的应用程序。它的主要目标是捕捉用户的脸。我已经到了从网络摄像头捕捉图像的阶段。问题是我需要一个智能渲染。实际上，我需要该渲染器才能检测到矩形内的人脸。我想知道是否有可以用于此目的的过滤器，或者我是否需要创建自己的自定义过滤器。如果是这样启发我的思想。它看起来像这样：
![在此处输入图像描述](../Images/48c4dbb6338c812f6191c2e776583945.png)

* * *

**我首先需要了解如何在我的渲染中绘制一个矩形。因为否则，即使我知道算法，我也无法应用它。这是我现在的主要目标。**

我有一些想法，但我不知道他们是否正确。我想我需要分别抓取每一帧并对某些像素进行一些修改，例如在实时渲染中绘制的内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T11:05:15.580

看看[OpenCV](http://opencv.willowgarage.com/wiki/)

快速往里看，我发现[了这个](http://opencv.willowgarage.com/wiki/FaceDetection/)。

制作自己的运行良好的“过滤器”并非易事。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T11:02:53.097

您是在谈论自动检测您使用网络摄像头拍摄的照片中的人脸*位置*吗？[在这种情况下，像Viola-Jones](http://en.wikipedia.org/wiki/Viola%E2%80%93Jones_object_detection_framework)这样的对象检测算法可能会让您感兴趣。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T14:31:00.323

如果可以选择商业包，您可以使用包含开箱即用的过滤器的[Montivision 过滤器 SDK](http://www.montivision.com/en/products/surveillance/)。他们提供免费的评估，非常适合实验。

# django - 相关领域的 Django 模型验证

> ID：11900297
> 
> 赞同：2
> 
> 时间：2012-08-10T11:00:29.743
> 
> 标签：django, django-models, django-signals, django-validation

什么时候对模型中的相关字段进行验证合适？

例如，如果我有一个`ManyToMany`与类播放列表有关系的视频类，当视频更改为“私有”时，它应该从所有播放列表中删除。

在模型的方法中这样做`clean()`似乎很危险 - 因为模型可能无法通过验证并且无法保存，但播放列表引用将被删除。

是否以正确的方式进行操作`post_save`或发出信号？`pre_save`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T13:29:47.103

你有两个选择：

第一个是使用`post_save`完成这项工作的信号。不是 a `pre_save`，因为保存可能会失败，我猜你只想在保存正常的情况下这样做。

其他选项是覆盖模型的`save()`方法，例如：

```
def save(self, *args, **kwargs):
    super(MyModel, self).save(*args, **kwargs)
    # do stuff for removing whatever you want to remove 
```

我个人的选择是第一个，因为你处理不同的模型。如果你只需要处理当前的一个，我会做第二个。但这只是个人想法。

# .net - 在 WSO2 ESB 中托管 .Net 应用程序

> ID：11900300
> 
> 赞同：0
> 
> 时间：2012-08-10T11:00:57.463
> 
> 标签：.net, xml, soap, esb, wso2esb

如何将 .Net 应用程序托管到 WSO2 ESB？我在 ESB 中添加了“wso2 托管功能”，但似乎还不够……

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T10:51:30.140

WSO2 ESB 是基于 Java 的产品，因此我不希望您能够托管 .NET 应用程序。使用基于 .NET 的 ESB（例如[nservicebus](http://nservicebus.com) ）可能会取得更大的成功。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T11:24:25.450

您不能将 .net 应用程序托管到 WSO2 ESB 中。

但是您可以使用 Wso2 ESB 与使用 .NET 服务实现的 2 个服务进行通信。

这个[1]，链接可能对你有帮助。

[1] [http://wso2.org/forum/thread/3885](http://wso2.org/forum/thread/3885)

# c# - 过程或函数需要未提供的参数

> ID：11900301
> 
> 赞同：3
> 
> 时间：2012-08-10T11:01:04.063
> 
> 标签：c#, sql-server

我正在使用来自 c# 的参数调用用 SQL Server 2008 编写的简单存储过程，但它显示错误 ***“过程或函数'AddYear'需要参数'@mYear'，未提供。”***

这段代码有什么问题，我尝试了几件事，但没有成功。

```
 SqlCommand AddEquip = new SqlCommand("AddYear", dbConn);
    SqlDataReader rdrEquip;

    SqlParameter mP = new SqlParameter("@mYear",SqlDbType.VarChar ) ;

    mP.Value = "1990";

    AddEquip.Parameters.Add(mP);

    rdrEquip = AddEquip.ExecuteReader(); 
```

-- 参数名称和类型与我在程序中使用的相同。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-11T03:29:37.613

好像你忘了设置`SqlCommand`为存储过程：

```
SqlCommand AddEquip = new SqlCommand("AddYear", dbConn);
AddEquip.CommandType = CommandType.StoredProcedure; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T11:04:51.320

您需要将参数添加到 SqlParameter 例如：

```
mP = new SqlParameter("@mYear", SqlDbType.VarChar, PARAMETER_HERE); 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-08-10T11:08:04.860

如果您的 Storedprocedure 需要一个参数，那么您必须将其传递给 sqlcommand 对象

```
 SqlParameter[] param = new SqlParameter[0];
            param[0] = new SqlParameter("@mYear", "1990");
rdrEquip = SqlHelper.ExecuteReader(Con, CommandType.StoredProcedure, "SPC_proc", param); 
```

我在这里使用 sqlhelper 类。

# html - Opera 和 IE8 100% Height with bottom padding BUG

> ID：11900305
> 
> 赞同：0
> 
> 时间：2012-08-10T11:01:16.343
> 
> 标签：html, css, height, opera

我希望粉红色和蓝色框具有相同的高度（400px），这仅在 Opera 中不起作用。高度被底部填充所拖累，这对我来说看起来像是一个错误。你能帮忙吗？

**更新 1** - 刚刚在 IE8 中检查过，但它也不起作用，所以问题是重新调整到 IE + Opera 的范围。

**更新 2** - padding-bottom 更改为 50px 以使问题更清晰。我使用的 Opera 版本是 11.62。

Html（观看粉色和蓝色框高度）：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
</head>
<body>
    <table>
        <tr>
            <td valign="top">
                <div style="display: table; width: 400px; height: 100px; background-color: wheat;">
                    <div style="display: table-cell; background-color: Green; padding-bottom: 50px; height: 100%;">
                        <div style="height: 100%; background-color: pink;">Inner</div>
                    </div>
                </div>
            </td>
            <td valign="top">
                <div style="display: table; width: 400px; height: 100px; background-color: blue;">
                </div>
            </td>
        </tr>
    </table>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T13:02:25.763

通过申请修复它`box-sizing: border-box`。

这是课程：

```
.bb
{
     box-sizing: border-box;
    -moz-box-sizing: border-box; /*Firefox 1-3*/
    -webkit-box-sizing: border-box; /* Safari */
} 
```

# vbscript - 如何使用 VBS 在 .bat 文件中传递多个变量

> ID：11900307
> 
> 赞同：0
> 
> 时间：2012-08-10T11:01:20.527
> 
> 标签：vbscript, batch-file

我有一个 vbs 代码，如：

```
Message4 = "Please enter Check Out Path"           
 Title4 = "Check Out Path "
 variable1 = InputBox(Message4, Title4,"", 4500, 4500)

 Message5 = "Please enter SVN URL"           
 Title5 = "SVN URL "
 variable2 = InputBox(Message5, Title5, "", 4500, 4500)

 Folder\batchfile.bat"""
 objWshell.Run "batxhfile.bat" 
```

还有名为的批处理文件`batchfile.bat`

```
@echo off

Color 42
 echo. [ SVN Updater ]

set Checkout_path=checkout path
set SVN=C:\Program Files\TortoiseSVN\bin
set svn_url=SVN path

 echo. Updating %Checkout_path% to SVN...
"%SVN%\TortoiseProc.exe" /command:checkout /url:"%svn_url%" /path:"%Checkout_path%" /closeonend:2
 echo. done.
 echo.
echo. Operation complete. 
```

现在我想将vbs代码的值`variable1`和`variable2`从vbs代码传递到批处理文件中`checkout path`，`svn path`我已经尝试了很多方法，但没有成功，直到请帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T01:15:44.997

我同意你为什么不简单地从 VBS 调用“TortoiseProc.exe”，但是你可能有理由通过批处理脚本调用。只需将参数从 VBS 传递到批处理中：

```
`Const ERR_SUCCESS = 0
Const BAT_SCRIPT = "<folder>\batchfile.bat"
Dim oWSH, sCmd, iRC, sVar1, sVar2
Set oWSH = WScipt.CreateObjects("WScript.Shell")
Do While sVar1 <> ""
  sVar1 = InputBox("Please enter Check Out Path", "Check Out Path", 4500, 4500)
Loop
Do While sVar2 <> ""
  sVar2 = InputBox("Please enter SVN URL", "SVN URL", 4500, 4500)
Loop  
sCmd = "cmd.exe /c """ & BAT_SCRIPT & "" "" & sVar1 & "" "" & sVar2 & """" 
WScript.Echo "COMMAND: sCmd"
On Error Resume Next
iRC = oWSH.Run(sCmd, 0, True)
If iRC <> ERR_SUCCESS And Err.Number <> ERR_SUCCESS Then 
  MsgBox "ERROR: [" & Err.Source & "] " & CStr(Err.Number) & " - " & Err.Description & vbCrLf & _
         "       '" & BAT_SCRIPT "' return code = '" & CStr(iRC) & "' from command:" & vbCrLf & _
         "       COMMAND:  " & sCmd, vbOkOnly, "Batch Script Error"
End If
Err.Clear
Set oWSH = Nothing` 
```

您的结果批处理脚本命令应如下调用：
`cmd.exe /c "<folder>\batchfile.bat" "<var1>" "<var2>"`

确保您的批处理脚本收集参数、删除字符串双引号并正确验证：

```
`set Checkout_path=%1
set Checkout_path=%Checkout_path:~1,-1%
set svn_url=%2
set svn_url=%svn_url:~1,-1%
if /i "%Checkout_path%" ne "" (
  exit /b 99
)
if /i "%svn_url%" ne "" (
  exit /b 99
)` 
```

希望这可以帮助 ;）

# iphone - 在 XIB 内的分段控制器中本地化文本

> ID：11900310
> 
> 赞同：2
> 
> 时间：2012-08-10T11:01:27.853
> 
> 标签：iphone, ios, xcode, localization, uisegmentedcontrol

我在具有三个段的 XIB 中有一个段控制器，我想从代码中更改每个段中的文本。我不确定如何从代码中引用各个段。这是可行的吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-22T19:04:59.787

UISegmentedControl 包括这个方法：

```
- (void)setTitle:(NSString *)title forSegmentAtIndex:(NSUInteger)segment; 
```

只需在您的 xib 上创建一个出口到您的 @interface 并执行以下操作：

```
[self.mySegmentControl setTitle:NSLocalizedString(@"something", nil) forSegmentAtIndex:0]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-12-28T22:32:19.677

**斯威夫特 5**

**

`self.segment.setTitle("Accept".localized, forSegmentAt: 0)` `self.segment.setTitle("Cancle".localized, forSegmentAt: 1)`

* * *

**

# java - 将 "\n" 添加到 Java String 时，换行符不会出现在 JSP 中，但会出现在标准输入中

> ID：11900314
> 
> 赞同：7
> 
> 时间：2012-08-10T11:01:41.727
> 
> 标签：java, html, jsp, web-applications, servlets

当我将 java 字符串传递回我的 servlet 时，servlet 将该字符串传递给 jsp。

该字符串使用新行 "\n" 保存名称和地址，但是当我尝试在屏幕上显示它时，我看到了一个完整的行，但是在控制台上显示了新行。

这是快照： **第一** ![在此处输入图像描述](../Images/cafb47b0b1f4bba811f326394cf83b98.png) **第二** ![在此处输入图像描述](../Images/9786d6da3a9b5b1e1512872f9c0fdcb3.png) **第三：来自控制台**

![在此处输入图像描述](../Images/de490ebaf736a83bc473699f87657b2b.png)

知道如何解决吗？

问候

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-08-10T11:04:11.333

在 HTML 中，换行符被视为空格，多个空格显示为一个空格。如果要转到下一行，则必须将换行符转换为`<br />`，或将文本包含在`<pre></pre>`块中。

# android - 适用于 Android 应用程序的 UPnP 搜索和搜索栏

> ID：11900315
> 
> 赞同：0
> 
> 时间：2012-08-10T11:01:42.740
> 
> 标签：android, seekbar, upnp, dlna

我一直在尝试使用我的 UPnP Android 应用程序实现 Seek()，但没有成功。

我有我的搜索栏和侦听器，但是当我将搜索栏拖到新位置时它一直失败。

```
seekbar.setOnSeekBarChangeListener(new OnSeekBarChangeListener() 
{
    @Override
    public void onProgressChanged(SeekBar arg0, int arg1, boolean arg2) 
    {
        Log.i("SEEKTIME", "time:" + arg1);
        upnpService.getControlPoint().execute(new Seek(service, SeekMode.REL_TIME,   arg0.toString())
        {
            @Override
            public void success(ActionInvocation invocation)
            {
                //super.success(invocation);
                Log.i("SEEKSUCCESS", "success seek");
            }
            @Override
            public void failure(ActionInvocation arg0, UpnpResponse arg1, String arg2)
            {
                Log.i("SEEKFAIL", "fail seek");
            }
        });
    } 
```

当我拖动到搜索栏上的新位置时，它会触发失败方法。

有任何想法吗？？？

我使用 BubbleUPnP 作为渲染器。下面列出了设备 XML。

```
<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<root xmlns="urn:schemas-upnp-org:device-1-0">
<specVersion>
    <major>1</major>
    <minor>0</minor>
</specVersion>
<device>
    <deviceType>urn:schemas-upnp-org:device:MediaRenderer:1</deviceType>
    <UDN>uuid:2797d98f-173f-fe46-0000-00002d731080</UDN>
    <friendlyName>BubbleUPnP (Nexus One)</friendlyName>
    <manufacturer>Bubblesoft</manufacturer>
    <manufacturerURL>http://forum.xda-developers.com/showthread.php?t=1118891
    </manufacturerURL>
    <modelDescription>BubbleUPnP Media Renderer</modelDescription>
    <modelName>BubbleUPnP Media Renderer</modelName>
    <modelNumber>1.4.3.1</modelNumber>
    <modelURL />
    <iconList>
        <icon>
            <mimetype>image/png</mimetype>
            <width>72</width>
            <height>72</height>
            <depth>32</depth>
            <url>/dev/2797d98f-173f-fe46-0000-00002d731080/icon.png</url>
        </icon>
    </iconList>
    <serviceList>
        <service>
            <serviceType>urn:schemas-upnp-org:service:AVTransport:1
            </serviceType>
            <serviceId>urn:upnp-org:serviceId:AVTransport</serviceId>
            <controlURL>/dev/2797d98f-173f-fe46-0000-00002d731080/svc/upnp-org/AVTransport/action
            </controlURL>
            <eventSubURL>/dev/2797d98f-173f-fe46-0000-00002d731080/svc/upnp-org/AVTransport/event
            </eventSubURL>
            <SCPDURL>/dev/2797d98f-173f-fe46-0000-00002d731080/svc/upnp-org/AVTransport/desc.xml
            </SCPDURL>
        </service>
        <service>
            <serviceType>urn:schemas-upnp-org:service:RenderingControl:1
            </serviceType>
            <serviceId>urn:upnp-org:serviceId:RenderingControl</serviceId>
            <controlURL>/dev/2797d98f-173f-fe46-0000-00002d731080/svc/upnp-org/RenderingControl/action
            </controlURL>
            <eventSubURL>/dev/2797d98f-173f-fe46-0000-00002d731080/svc/upnp-org/RenderingControl/event
            </eventSubURL>
            <SCPDURL>/dev/2797d98f-173f-fe46-0000-00002d731080/svc/upnp-org/RenderingControl/desc.xml
            </SCPDURL>
        </service>
        <service>
            <serviceType>urn:schemas-upnp-org:service:ConnectionManager:1
            </serviceType>
            <serviceId>urn:upnp-org:serviceId:ConnectionManager</serviceId>
            <controlURL>/dev/2797d98f-173f-fe46-0000-00002d731080/svc/upnp-org/ConnectionManager/action
            </controlURL>
            <eventSubURL>/dev/2797d98f-173f-fe46-0000-00002d731080/svc/upnp-org/ConnectionManager/event
            </eventSubURL>
            <SCPDURL>/dev/2797d98f-173f-fe46-0000-00002d731080/svc/upnp-org/ConnectionManager/desc.xml
            </SCPDURL>
        </service>
    </serviceList>
</device> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-02-22T04:41:07.937

我知道回答这个问题已经很长时间了，但我是通过与 DLNA 和 UPNP 合作来解决这个问题的。我决定回答这个问题，以便它对其他**STACKERS** (:P) 有用。如果您可以使用 DLNA，[这里](https://github.com/offbye/DroidDLNA)是您可以用来实现您的要求的代码。它还支持 UPNP。

它使用搜索栏来显示当前正在运行的媒体的进度。希望你能找到你的要求。

基本上，您需要使用`getPositionInfo()`来自 upnp 服务的回调。您可以在每个特定持续时间（例如 500 毫秒）请求此回调。这是回调：

```
 try {
        Service localService = this.executeDeviceItem.getDevice()
                .findService(new UDAServiceType("AVTransport"));
        if (localService != null) {
            this.upnpService.getControlPoint().execute(
                    new GetPositionInfoCallback(localService, mHandle,
                            this.activity));
        } else {
        }
    } catch (Exception localException) {
        localException.printStackTrace();
    } 
```

您可以根据回调返回的数据更新搜索栏。像这样的东西：

```
Bundle localBundle = paramIntent.getExtras();
String str1 = localBundle.getString("TrackDuration");
String str2 = localBundle.getString("RelTime");
int i = com.techd.tvapp.util.Utils.getRealTime(str1);
int j = Utils.getRealTime(str2);
mSeekBar.setMax(i);
mSeekBar.setProgress(j);
mTotalTime.setText(str1);
mCurrentTime.setText(str2); 
```

要使用 seekbar 更新播放器，请将 seekbarchange 侦听器设置为：

```
class PlaySeekBarListener implements SeekBar.OnSeekBarChangeListener {
        PlaySeekBarListener() {
        }

        public void onProgressChanged(SeekBar paramSeekBar, int paramInt,
                                      boolean paramBoolean) {
        }

        public void onStartTrackingTouch(SeekBar paramSeekBar) {
            // isUpdatePlaySeek = false;
        }

        public void onStopTrackingTouch(SeekBar paramSeekBar) {
            if (null != dmcControl) {
                String str = com.techd.tvapp.util.Utils.secToTime(paramSeekBar.getProgress());
                Log.i("DMC", "SeekBar time:" + str);
                dmcControl.seekBarPosition(str);
            }
        }
    }

mSeekBar = (SeekBar) findViewById(R.id.media_seekBar);
mSeekBar.setOnSeekBarChangeListener(new PlaySeekBarListener()); 
```

而已！

# java - 为什么非捕获组会改变正则表达式的行为？

> ID：11900318
> 
> 赞同：2
> 
> 时间：2012-08-10T11:01:45.873
> 
> 标签：java, regex

我正在编译一个正则表达式模式以匹配调试控制台中的特定命令，其中之一是：

```
Pattern.compile("^\\s*\\\\connect\\s+((\\d{1,3}\\.){3}\\d{1,3})(?:\\s+(\\d+))?\\s*$"); 
```

所以可以输入

```
\connect 127.0.0.1 2345 
```

或离开港口

```
\connect 127.0.0.1 
```

只要我最后使用一个空格来分隔字段，空格就会被忽略。

但是，它工作得很好，当 ip 进入第 1 组（没问题）时，端口进入第 3 组（如我所知）。

所以我想对ip地址的前三部分使用非捕获组：

```
Pattern.compile("^\\s*\\\\connect\\s+((?:\\d{1,3}\\.){3}\\d{1,3})(?:\\s+(\\d+))?\\s*$"); 
```

所以我想我会得到第 1 组中的 ip 和第 2 组中的端口。但是现在 Matcher.matches() 为相同的输入返回 false ......问题出在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T11:22:32.000

```
"^\\s*\\\\connect\\s+((?:\\d{1,3}\\.){3}\\d{1,3})(?:\\s+(\\d+))?\\s*$" 
```

我在 Eclipse IDE Search/Replace 中尝试了它，它找到了`\connect 3.54.1.4 4234`字符串并很好地替换`\1`为 ip 和`\2`端口。

这也返回 true：

```
"\\connect 3.54.1.4 4234".matches("^\\s*\\\\connect\\s+((?:\\d{1,3}\\.){3}\\d{1,3})(?:\\s+(\\d+))?\\s*$"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T11:30:45.663

疯狂的猜测：问题出在其他地方。我做了一个快速测试：

```
 String test = "\\connect 127.0.0.1 2345";
    Pattern p1 = Pattern.compile("^\\s*\\\\connect\\s+((\\d{1,3}\\.){3}\\d{1,3})(?:\\s+(\\d+))?\\s*$");
    Pattern p2 = Pattern.compile("^\\s*\\\\connect\\s+((?:\\d{1,3}\\.){3}\\d{1,3})(?:\\s+(\\d+))?\\s*$");

    System.out.println(p1.matcher(test).matches());
    System.out.println(p2.matcher(test).matches()); 
```

输出：真真

# tomcat6 - 如何在 tomcat 中为客户端身份验证添加 CRL 文件？

> ID：11900323
> 
> 赞同：2
> 
> 时间：2012-08-10T11:02:10.070
> 
> 标签：tomcat6, authentication

我已经在 Tomcat6 中实现了客户端身份验证。我想将 CRL 文件添加到服务器。如何做同样的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T11:06:37.307

我有同样的问题。我也问了同样的问题。参考这个链接。

[Tomcat6 中的证书吊销列表](https://stackoverflow.com/questions/10493436/certificate-revocation-list-in-tomcat6)

无论如何，在 tomcat 连接器标记中，您具有可以使用 openssl 生成的 crlFile 参数。命令看起来像这样

```
openssl ca -config openssl.my.cnf -revoke certs/server.crt
openssl ca -config openssl.my.cnf -gencrl -out crl/myca.crl 
```

并且文件 myca.crl 将在 tomcat 的连接器标记中更新，看起来像这样

```
<Connector protocol="org.apache.coyote.http11.Http11Protocol" port="8443" 
  SSLEnabled="true"                
  maxThreads="150" scheme="https" secure="true" 
  clientAuth="true" sslProtocol="TLS"            
  keystoreFile="one.mamoi.semdev.com.pkcs12" keystoreType="PKCS12" 
  keystorePass="changeit"  
  truststoreFile="server.truststore" truststorePass="changeit" 
  truststoreType="JKS"  crlFile="/home/ubuntu/myCA/crl/myca.crl" /> 
```

# javascript - 为什么我的 jQuery .each 迭代无法使用每个项目的属性？

> ID：11900325
> 
> 赞同：0
> 
> 时间：2012-08-10T11:02:13.657
> 
> 标签：javascript, jquery, each

我有一些代码可以从表单中的每个孩子那里找到“标题”属性。

当我运行'console.log（'title'）时，它会正确地提取标题。但是，当我尝试应用代码在字段集的内部 div 之前插入标签时，它只会为它们中的每一个添加相同的标题（“关于我”）。

html

```
<form action="#" method="post">
    <fieldset title="About Me">
        <!-- Going to convert legends to h4 // can choose the header style element? -->
        <div>
            <label for="name">Text Input:</label>
            <input type="text" name="name" id="name" value="" tabindex="1" />
        </div>
    </fieldset>

    <fieldset title="Radio Button Choice">
        <div>

            <label for="radio-choice-1">Choice 1</label>
            <input type="radio" name="radio-choice-1" id="radio-choice-1" tabindex="2" value="choice-1" />

            <label for="radio-choice-2">Choice 2</label>
            <input type="radio" name="radio-choice-2" id="radio-choice-2" tabindex="3" value="choice-2" />
        </div>
    </fieldset>

    <fieldset>
        <div>
            <label for="select-choice">Select Dropdown Choice:</label>
            <select name="select-choice" id="select-choice">
                <option value="Choice 1">Choice 1</option>
                <option value="Choice 2">Choice 2</option>
                <option value="Choice 3">Choice 3</option>
            </select>
        </div>
    </fieldset>
</form> 
```

jQ

```
kids = this.element.children('fieldset');
 kids.each(function(){ //function to do something to each of the child fieldset elements
 console.log(this);

 title = $(this).attr('title');

console.log(title); //this logs each title fine, or 'undefined' where there isn't one
$("<legend>" + title + "</legend>").insertBefore('div:first-child')
//that's where I'm just getting 'About me', on every damn one....
 }); 
```

谁能发现我在哪里是个傻瓜？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T11:10:14.030

您的选择器过于通用 -`div:first-child`将选择所有 div。查找作为字段集后代的 div `this`。

```
// Based on your existing code
$("<legend>" + title + "</legend>").insertBefore($(this).find('div:first-child'));

// Slightly cleaner
 $(this).prepend("<legend>" + title + "</legend>") 
```

另外，请确保使用关键字创建`title`一个局部变量：`var`

```
var title = $(this).attr('title'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T11:13:08.387

丹尼斯击败了我，无论如何这里的工作示例与选择第一个孩子的方法略有不同[http://jsfiddle.net/gMb8m/1/](http://jsfiddle.net/gMb8m/1/)

问题是您使用了错误的选择器。

编辑：解决一些 OP 问题。

至于使用`.children(0)`而不是`.find('div:first-child')`- 我必须检查 jQuery 源代码，但我想使用后者可能会更慢，因为它使用涉及解析选择器，而`.children(0)`可能在内部使用本机 DOM `.childNodes`。将 a 传递`0`给它只会返回第一个孩子。

如果在某些页面上第一个子元素不是元素并且您仍然希望在第一个 div 之前而不是在第一个子元素之前插入图例，则使用`.find('div:fist-child')`会更好的一种情况。`div`在这种情况下 using`.find`将返回第一个 div。

至于为什么在 insertBefore 上使用 prepend - 它们都很好（从丹尼斯的回答中可以看出）并且可以在您的情况下使用。如何编写选择器只是一个选择问题。在这种情况下，我发现我的方式更干净。

PS 在示例中，我`kids`用我的字段集选择器替换了你的 - 不要介意。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-10T11:23:16.723

.prepend() 似乎做了你想做的事：

```
$('fieldset').each(function() {
    $(this).find('div:first-child').prepend('<legend>' + this.title + '</legend>');
}); 
```

此外，无需将 DOM 对象提升为 jQuery 对象，就像访问 DOM 属性一样`$(this).attr('title')`：)

# javascript - JavaScript 插入符号位置

> ID：11900330
> 
> 赞同：41
> 
> 时间：2012-08-10T11:02:51.287
> 
> 标签：javascript, android, jquery, mobile, cross-browser

我正在开发一个移动银行应用程序，我对实时格式化货币金额输入感兴趣。

我已经测试[了 autoNumeric 插件](http://www.decorplanit.com/plugin/)和[jQuery Format Currency 插件](https://code.google.com/p/jquery-formatcurrency/)，但两者都在 Android 2.* 浏览器上存在光标位置问题。

有人有与此浏览器兼容的 JavaScript 解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T10:57:47.057

I don't know about autoNumeric, but [http://code.google.com/p/jquery-formatcurrency/](http://code.google.com/p/jquery-formatcurrency/) looks pretty good. The jsFiddle example you posted doesn't place the caret correctly on my desktop browser, but this does, and on my (Jellybean) Android phone as well. (On Gingerbread, the blinking cursor bar may jump to the end of the line, but you will still be editing where it last was.) Try their demo: [http://www.bendewey.com/code/formatcurrency/demo/format_as_you_type.html](http://www.bendewey.com/code/formatcurrency/demo/format_as_you_type.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-23T06:37:10.773

我一般用accounting.js 可以从[http://openexchangerates.github.io/accounting.js/#download下载](http://openexchangerates.github.io/accounting.js/#download)

它很容易使用。您可以从同一个下载页面查看它的工作原理。

我创建了几个用于进行光标管理的 javascript 函数：

```
 function formatMoney(myField){
            if(myField.selectionStart || myField.selectionStart == '0'){
                var len = myField.value.length;
                var caretPos = doGetCaretPosition(myField);
                myField.value = accounting.formatMoney(myField.value);
                var newlen = myField.value.length;
                setCaretPosition(myField, newlen != len ? (newlen > len ? caretPos + 1 : caretPos - 1) : caretPos);
            }
        }
        function doGetCaretPosition (ctrl) {

            var CaretPos = 0;
            // IE Support
            if (document.selection) {

                ctrl.focus ();
                var Sel = document.selection.createRange ();

                Sel.moveStart ('character', -ctrl.value.length);

                CaretPos = Sel.text.length;
            }
            // Firefox support
            else if (ctrl.selectionStart || ctrl.selectionStart == '0')
                CaretPos = ctrl.selectionStart;

            return (CaretPos);

        }
        function setCaretPosition(elem, caretPos) {
            elem.value = elem.value;
            if(elem != null) {
                if(elem.createTextRange) {
                    var range = elem.createTextRange();
                    range.move('character', caretPos);
                    range.select();
                }
                else {
                    if(elem.selectionStart) {
                        elem.focus();
                        elem.setSelectionRange(caretPos, caretPos);
                    }
                    else
                        elem.focus();
                }
            }
        } 
```

您可以将函数与文本字段一起使用：

```
<input id="myField" type="text" onkeyup="formatMoney(this);" onChange="formatMoney(this);" onBlur="formatMoney(this);" /> 
```

获取和设置插入符号位置功能是从这里获得的：[Set keyboard caret position in html textbox](https://stackoverflow.com/questions/512528/set-cursor-position-in-html-textbox)

我在 Android 2.1 模拟器上对其进行了测试。虽然模拟器很慢，但它似乎正在工作。你可以在这里找到截图：[https ://www.dropbox.com/s/9ximuwh64kadiea/shot.JPG?dl=0](https://www.dropbox.com/s/9ximuwh64kadiea/shot.JPG?dl=0)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-23T23:40:29.940

这是一个开源、贡献良好、承诺良好的库：[https ://github.com/plentz/jquery-maskmoney](https://github.com/plentz/jquery-maskmoney)

似乎可以满足您的需求，不是吗？不过还没有在Android下测试过。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-03-21T08:48:38.400

似乎这个 jQuery 插件 - [NumBox](http://www.numbox.org/) - 旨在为您的问题提供解决方案。

# linux - 如果 awk cmd 中的模式是 bash 变量并且包含特殊字符，我该怎么办？

> ID：11900333
> 
> 赞同：1
> 
> 时间：2012-08-10T11:02:52.893
> 
> 标签：linux, bash, awk

**说明：** 1 行 awk cmd 用于在我的 shell 脚本中打印匹配行之后的所有行，如下所示。

```
#!/bin/bash
...
awk "f;/${PATTERN}/{f=1}" ${FILE} 
```

由于 ${PATTERN} 可能包含特殊字符，在这种情况下 cmd 将失败。

**Q1。**如果在 awk 中使用正则表达式，我应该如何处理这种情况？

**Q2。**是否可以仅在此 cmd 中使用原始字符串而不是正则表达式，例如***/$PATTERN/*** 以避免特殊字符问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-10T11:22:30.707

关闭。最好将 shell 变量传递给 awk with，而`-v`不是直接将它们放在 awk 脚本中。

```
awk -v pat="${PATTERN}" 'f; $0 ~ pat {f=1}' "${FILE}" 
```

如果`${PATTERN}`不是正则表达式，您可以使用不同的运算符：

```
awk -v pat="${PATTERN}" 'f; $0 == pat {f=1}' "${FILE}" 
```

或者您甚至可以处理非正则表达式子字符串：

```
awk -v pat="${PATTERN}" 'f; index($0, pat) {f=1}' "${FILE}" 
```

# jquery - Phonegap iOS 应用程序的字体无法正确呈现

> ID：11900336
> 
> 赞同：1
> 
> 时间：2012-08-10T11:03:02.707
> 
> 标签：jquery, jquery-mobile, cordova

当我们在 iPhone4 (retina display) 屏幕上使用 safari 浏览器渲染我们的模板屏幕时，UI 显示没有任何问题。我移植了与 Phonegap iOS 应用程序相同的模板代码。移植后的 UI 字体在 phonegap 本机应用程序中增加。我在代码中使用了以下视口元标记：

```
<meta name="viewport" content="width=device-width,initial-scale=0.5 maximum-scale=0.5; user-scalable=0;">
<meta name="apple-mobile-web-app-capable" content="yes" />
<meta content='True' name='HandheldFriendly' /> 
```

有人能解释一下为什么字体大小在 Safari 浏览器中正确呈现，但在 Phonegap iOS 应用程序中却没有吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T06:00:11.397

我找到了问题的根本原因，这是因为 cordova.plist 文件中的“EnableViewPortScale”值。我们应该将此值设置为“是”，但在我的项目设置中它是“否”。

将此值设置为“是”解决了我的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T11:09:00.337

您可以尝试[-webkit-text-size-adjust](http://css-infos.net/property/-webkit-text-size-adjust)并将其设置为 100%。

造成这种情况的另一件事可能是当容器处于硬件加速模式并且字体变得有点模糊时，您将 -webkit-transform 设置为容器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T14:00:38.677

我相信移动 Safari 使用 .svg 进行字体渲染。因此，如果您使用的非标准字体可能是一个可以查看的地方。

# android - 如何在 Android WebView 的首选项中启用/禁用 Flash？

> ID：11900346
> 
> 赞同：2
> 
> 时间：2012-08-10T11:03:41.750
> 
> 标签：android, plugins, webview, settings, checkboxpreference

我正在为 Android 开发浏览器。

是否可以在 中创建一个`Checkbox Preference`启用和禁用 Flash 插件（`webview.setPluginsEnabled`）`Preferences`？

```
<CheckBoxPreference
android:title="Enable/Disable Flash"
android:key="chkbox_flash"

Here I need the code to set WebView.getSettings().setPluginsEnabled(boolean) 
to true or to false /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T12:35:57.643

我没有开发到 Android，但似乎你应该像这个[checkboxpreference-onclick](https://stackoverflow.com/questions/5045000/checkboxpreference-onclick) ( [docs](http://developer.android.com/reference/android/preference/TwoStatePreference.html#onClick%28%29) )一样为你的 CheckBoxPreference 添加一个监听器

然后将插件的状态设置为关闭。继承人的[文档](http://developer.android.com/reference/android/webkit/WebSettings.html#setPluginState%28android.webkit.WebSettings.PluginState%29)。基本上，你必须这样做：

```
WebView webview = new WebView(this);
webview.getSettings().setPluginState(PluginState.OFF); 
```

您不应该使用`setPluginsEnabled`，因为它已被[弃用](http://developer.android.com/reference/android/webkit/WebSettings.html#setPluginsEnabled%28boolean%29)。但请注意，它会禁用任何插件，而不仅仅是 Flash。

# jquery - jQuery 只允许切换一个元素

> ID：11900350
> 
> 赞同：0
> 
> 时间：2012-08-10T11:04:00.833
> 
> 标签：jquery

所以下面的代码只适用于第一个元素'GALLERYTITLE'，

```
$(function(){$("#diradd").click(function(event)
{event.preventDefault();$("#diraddform").slideToggle();});}); 
```

HTML：

```
<!--stuff before-->

<div class="gallerytitle"

<a href="#"class="options" id="diradd" >Add new sub-gallery</a> <!--"button"-->

<!--another stuff divs, buttons etc.-->

<div id="diraddform">

<!--things in this div-->
</div></div> <!--the end of #1 gallerytitle div-->

<div class="gallerytitle"

<a href="#"class="options" id="diradd" >Add new sub-gallery</a> <!--"button"-->

<!--another stuff divs, buttons etc.-->

<div id="diraddform">

<!--things in this div-->

</div>

</div> <!--the end of #2 gallerytitle div--> 
```

CSS：

```
diraddform{
display:none;} 
```

[基本上我有和这里一样的问题](https://stackoverflow.com/questions/3585521/jquery-only-toggle-one-element-without-having-to-use-ids)

但我不能使用 .next(); 因为我的“按钮”后面有 div

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T11:15:54.863

ID 在文档中必须是唯一的，通常用于检索元素 using`document.getElementById`或 by using`jQuery Selector`

您必须用**类**替换所有同名的**ID**

 **我已更改您的标记并将所有**id**替换为**class**

## HTML：

```
<div class="gallerytitle">
    <a href="#" class="options diradd">Add new sub-gallery</a> 
    <!--"button"-->

    <!--another stuff divs, buttons etc.-->
    <div class="diraddform">
        test1
        <!--things in this div-->
    </div>
</div> 
<!--the end of #1 gallerytitle div-->

<div class="gallerytitle">
    <a href="#" class="options diradd" >Add new sub-gallery</a> 
    <!--"button"-->

    <!--another stuff divs, buttons etc.-->
    <div class="diraddform">
        test 2
        <!--things in this div-->
    </div>
</div> 
```

​</p>

## jQuery：

```
$(function(){
    $(".diradd").click(function(event) {
        event.preventDefault();
        $(this).next('.diraddform').slideToggle();
    });
});​ 
```

## [在这里查看它是如何工作的](http://jsfiddle.net/gVBQE/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T11:24:04.420

检查此[演示](http://codebins.com/bin/4ldqp8h)

```
<!--stuff before-->

<div class="gallerytitle">

<a href="#" class="options diradd" >
  Add new sub-gallery
</a>
  <div></div>
<!--"button"-->

  <div>Extra Buttons & Elements</div>

<div class="diraddform">
  zxcczc
</div>
</div>

<!--the end of #1 gallerytitle div-->

<div class="gallerytitle">

  <a href="#" class="options diradd">
    Add new sub-gallery 
  </a>

  <!--"button"-->

  <div>Extra Buttons & Elements</div>

  <div class="diraddform">

    zxczczczc

  </div>

</div>

<!--the end of #2 gallerytitle div--> 
```

JS

```
$(function() {
    $(".options").click(function(event) {
        event.preventDefault();
        $(this).closest(".gallerytitle").find('.diraddform').slideToggle(1000);
    });
}); 
```

css

```
.diraddform{
display:none;} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T11:07:15.530

一个 id 是唯一的，你不能分配它两次（使用类）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-11T12:44:14.843

如果您使用可以使用的类修复标记（基于您使用 div 的类）：

```
$(function(){
    $(".options").click(function(event) {
        event.preventDefault();
        $(this).parent().find('.diraddform').slideToggle();
    });
});​ 
```

或者您想添加更多的孩子并为您可以使用的所有表单+选项设置一个 parent [()](http://api.jquery.com/closest)：

```
$(function(){
    $(".options").click(function(event) {
        event.preventDefault();
        $(this).closest('.gallerytitle').find('.diraddform').slideToggle();
    });
}); 
```

演示： http: [//jsbin.com/ivegat/1/edit](http://jsbin.com/ivegat/1/edit)或最接近的：http: [//jsbin.com/ivegat/4/edit](http://jsbin.com/ivegat/4/edit)**

# c# - 左连接不适用于复杂查询

> ID：11900351
> 
> 赞同：1
> 
> 时间：2012-08-10T11:04:07.740
> 
> 标签：c#, .net, linq, linq-to-sql, left-join

我有非常复杂的 linq 查询，它适用于内部连接，即没有`z_temp.DefaultIfEmpty()`. 但是当我将它用于左连接时，查询没有产生结果。

```
var q = from x in db.EmployeesList
        where x.EmployeesListStartDate >= startDate && x.EmployeesListStartDate <= endDate
        join y in db.Survey on x.Survey.SurveyID equals y.SurveyID
        join z in
                (from a in db.Commit
                 join b in
                         (from commit in db.Commit
                          where
                            commit.CommitListID != null &&
                            commit.CommitType.ToUpper() != "PREVIEW"
                          group commit by new
                          {
                              commit.CommitListID
                          } into g
                          select new
                          {
                              CommitListID = (Int32?)g.Key.CommitListID,
                              CommitId = (Int32?)g.Max(p => p.CommitId)
                          })
                       on new { a.CommitListID, a.CommitId }
                   equals new { b.CommitListID, CommitId = (Int32)b.CommitId }
                 select new
                 {
                     CommitListID = (Int32?)a.CommitListID,
                     CommitUsername= a.CommitUsername,
                     CommitStartDateTime=a.CommitStartDateTime,
                     CommitType=a.CommitType,
                     CommitSuccessCount=a.CommitSuccessCount
                 }) on new { EmployeesListID = x.EmployeesListID } equals new { EmployeesListID = (Int32)z.CommitListID }
                 into z_temp
        from _z in z_temp.DefaultIfEmpty()
        select new CustomEmployeesList
        {
            SurveyId = x.Survey.SurveyID != null ? (int)x.Survey.SurveyID : 0,
            EmployeesListId = x.EmployeesListID != null ? (int)x.EmployeesListID : 0,
            EmployeesListName = x.EmployeesListName,
            SpecificMessage = x.SpecificMessage,
            ListCriteria = x.ListCriteria,
            Channel = x.Channel,
            EmployeesListStartDate = (DateTime)x.EmployeesListStartDate,
            EmployeesListEndDate = (DateTime)x.EmployeesListEndDate,
            Records = x.Records != null ? (int)x.Records : 0,
            QueryId = x.AppSqlQueries.QueryId != null ? (int)x.AppSqlQueries.QueryId : 0,
            //AuditId = (Int32?)x.AuditEntry.AuditId,
            StatusCommonCode = x.CommonCode.CommonCodeId != null ? (int)x.CommonCode.CommonCodeId : 0,
            SurveyName = y.SurveyName,
            LastCommitDateTime = _z.CommitStartDateTime.HasValue ? (DateTime)_z.CommitStartDateTime : DateTime.MinValue,
            LastCommitType = _z.CommitType != null ? _z.CommitType : "",
            LastCommitUsername = _z.CommitUsername != null ? _z.CommitUsername : "",
            LastCommitCount = _z.CommitSuccessCount.HasValue ? (int)_z.CommitSuccessCount : 0
        }; 
```

这不返回任何结果，并且在调试模式下查看结果时收到此异常消息：

> LINQ to Entities 无法识别方法 'System.Collections.Generic.IEnumerable1[<> f_AnonymousType351 *[<>f* _AnonymousType35%5bSystem.Nullable1[System.Int32],System.String,System.Nullable1%5bSystem.DateTime%5d, System.String,System.Nullable`1%5bSystem.Int32%5d%5d%5d">System.Nullable1[System.Int32],System.String,System.Nullable1[System.DateTime],System.String,System.Nullable1 [System.Int32]]] DefaultIfEmpty[<>f__AnonymousType35' 方法，并且该方法不能翻译成存储表达式。

任何人都可以提出问题所在，这将非常有帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T16:17:45.787

问题出在这一行：

```
 from _z in z_temp.DefaultIfEmpty() 
```

如果没有行与联接匹配，则调用`DefaultIfEmpty()`将返回。`null`好的，您是左连接，但您必须在访问其成员之前测试是否`_z`是：`null`

```
 ...
 LastCommitDateTime = _z == null ? DateTime.MinValue : (_z.CommitStartDateTime.HasValue ? (DateTime)_z.CommitStartDateTime : DateTime.MinValue),
 LastCommitType = _z == null ? "" : (_z.CommitType != null ? _z.CommitType : ""),
 ...
 etc. 
```

一个更优雅的替代方法是创建一个定义您想要和调用的字段的类`_z.DefaultIfEmpty(new ZRow())`，因此您无需在`_z`每次需要时都测试是否为 null。但在这种情况下，您需要将`select`产生结果的 更改为`z_temp`并将其替换为`select new ZRow(a.CommitListID, etc..)`. 没有大碍。

# c++ - 如果有的话，在 C++ 中包含父类对象的子类有什么问题？

> ID：11900357
> 
> 赞同：4
> 
> 时间：2012-08-10T11:04:16.273
> 
> 标签：c++, oop

特别是在 C++ 中，但也通常作为一种 OO 设计原则，这样做有什么问题吗？是在实践中完成的吗？如果它显示出明显的设计缺陷，有什么好的替代方案？有什么优势吗？

```
class Property {};
class CompositeProperty : public Property 
{
    ...
    private:
        std::vector<Property> m_properties;
}; 
```

那么具体来说，派生类可以包含基类对象吗？

由于我有一些背景知识，我已经看到这用于建模/镜像 XML 结构，但感觉该设计有点面对通常努力的 is-a-is-inheritance 和 has-a-is-composition 关系。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-10T11:08:54.530

[*设计上没有瑕疵——事实上，这种设计距离广为人知且非常有用的复合图案*](http://en.wikipedia.org/wiki/Composite_pattern)仅一步之遥。但是，在执行过程中存在重大缺陷。

您`CompositeProperty`聚合 的实例`Property`，而不是聚合指针。这会扼杀使用多态元素的能力`CompositeProperty`。为了解决这个问题，您需要用指针向量（最好是智能指针）替换实例向量。

复合模式的一个经典地方是表达式树的表示：您从一个抽象基开始，然后添加常量、变量、函数调用、一元表达式、二元表达式、条件等的表示。常量和变量等表达式不引用其他表达式，而一元表达式、二元表达式和函数调用等表达式则可以。这使得对象图具有递归性，让您可以表示任意复杂度的表达式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T11:06:11.850

> 那么具体来说，子类可以包含父类对象吗？

简而言之`YES`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-10T11:06:32.257

请看一下[复合模式](http://en.wikipedia.org/wiki/Composite_pattern)。

> 当客户应该忽略对象组合和单个对象之间的差异时，可以使用组合。如果程序员发现他们以相同的方式使用多个对象，并且通常有几乎相同的代码来处理每个对象，那么复合是一个不错的选择；在这种情况下，将基元和复合体视为同质的并不那么复杂。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-10T11:10:51.097

没有什么问题。

以这个例子（它是 C#，但应该足够简单）为例，您定义了两个子类，每个子类都包含一个继承的实例：

```
public class Person
{
    public string Name;
}

public class MalePerson : Person
{
    public Person BestFriend;
}

public class FemalePerson : Person
{
    public Person BestFriend;
} 
```

根据我的经验，在子类中包含超类的实例最常用于对异构对象之间的层次结构进行建模，或者使用尽可能少的假设来引用对象。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-10T11:11:04.647

完全没有问题，但您可能需要考虑使用指向基类/父类的指针。这允许对象的多态行为。如果您将派生类的实例原样添加到您的向量中，您将遭受对象切片的影响。

# javascript - 如何在 ibm worklight 中打开本机摄像头

> ID：11900361
> 
> 赞同：2
> 
> 时间：2012-08-10T11:04:24.033
> 
> 标签：javascript, html, cordova, ibm-mobilefirst

Ibm Worklight 有调用本机应用程序的示例，但它是在 Worklight 本身中创建的，例如：module_09_1_Android_CombiningNativeAndWebPages 在这个示例中的 android 文件夹本身中，他们创建了一个活动“com.AndroidShowNativePage.HelloNative”（包名称），该活动是从该 javascript 调用的。

但是，我需要从工作灯中调用本机相机“ **com.android.camera** ”，这可能吗？如果是，请分享您的知识。提前致谢！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T05:50:23.800

在您的应用程序中使用此功能。默认情况下，Cordova 插件安装在 worklight 应用程序中。你只需要调用它的功能

```
function takePicture() {

    navigator.camera.getPicture(
        function(data) {
            var img = dom.byId('camera_image');
            img.style.visibility = "visible";
            img.style.display = "block";
            //img.src = "data:image/jpeg;base64," + data;
            img.src = data;
            dom.byId('camera_status').innerHTML = "Success";
        },
        function(e) {
            console.log("Error getting picture: " + e);
            dom.byId('camera_status').innerHTML = e;
            dom.byId('camera_image').style.display = "none";
        },
        { quality: 50, destinationType: navigator.camera.DestinationType.FILE_URI, sourceType : navigator.camera.PictureSourceType.CAMERA});
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T22:09:45.883

为什么要编写适用于 Android 而不适用于 iPhone 的代码？Worklight 使用PhoneGap，因此您可以使用camera.getPicture 并将使用相机拍摄的base64 图像获取到您的应用程序。

```
navigator.camera.getPicture( cameraSuccess, cameraError, [ cameraOptions ] ); 
```

有关详细信息，请参阅 PhoneGap 文档 ( [http://docs.phonegap.com/en/1.0.0/phonegap_camera_camera.md.html](http://docs.phonegap.com/en/1.0.0/phonegap_camera_camera.md.html) )。

# php - 使用 usort 对给定序列的数组进行排序？

> ID：11900367
> 
> 赞同：3
> 
> 时间：2012-08-10T11:04:50.413
> 
> 标签：php, arrays, usort

好吧，有很多帖子和问题使用 usort 对自定义模式的数组进行排序，但没有找到任何符合我需要的东西。这是我到目前为止的代码，

```
$arrayToSort=array("Sabin","Anil","Cyrus","Kamal","Kesha","Bimal");

function mycmp($a, $b)
{
    static $order = array('A', 'B','C',"Ke'",'Ka','R', 'S');
    return array_search(substr($a,0,1), $order) - array_search(substr($b,0,1), $order);
}

usort($arrayToSort, "mycmp"); 
```

上面的代码按以下模式对 $arrayToSort 进行排序

```
Array
(
    [0] => Anil
    [1] => Bimal
    [2] => Cyrus
    [3] => Kamal
    [4] => Kesha
    [5] => Sabin
) 
```

但是，如果您查看我的自定义模式， `static $order = array('A', 'B','C',"Ke'",'Ka','R', 'S');`Kesha 应该在 Kamal 之前，因为在我的模式中，“Ke”在“Ka”之前

我再次知道`substr($a,0,1)`只需要第一个字符，这就是它不起作用的原因。我也怀疑我必须采取另一种方法来完成工作，但我无法弄清楚。

如果数组模式的元素不一致，即有的元素有一个字符，而有的元素有两个，如何排序？任何帮助将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T11:38:00.873

这是您可以做到的一种方法。这当然可以更好地优化，但你明白了。

```
<?php

class Accessor {
  static $order = array(
    'A' => 1,
    'B' => 1,
    'C' => 1,
    'K' => array(
      'e' => 1,
      'a' => 1,
    ),
    'R' => 1,
    'S' => 1
  );
}

$arrayToSort=array("Kamal","Kesha","Sabin","Anil","Cyrus","Bimal");

function mycmp($a, $b, $base) {
  $letter1 = $a[0];
  $letter2 = $b[0];
  if ($letter1 == $letter2) {
    if (is_array($base[$letter1])) {
      return mycmp(substr($a, 1), substr($b, 1), $base[$letter1]);
    }
  }
  return array_search($letter1, array_keys($base)) - array_search($letter2, array_keys($base));
}

function cmp_proxy($a, $b) {
  return mycmp($a, $b, Accessor::$order);
}

usort($arrayToSort, "cmp_proxy");
print_r($arrayToSort); 
```

**输出**

```
Array
(
    [0] => Anil
    [1] => Bimal
    [2] => Cyrus
    [3] => Kesha
    [4] => Kamal
    [5] => Sabin
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T11:26:13.480

试试这个

```
 $arrayToSort=array("Sabin","Anil","Cyrus","Kamal","Kesha","Bimal");

    function mycmp($a, $b)
    {
        static $order = array('A', 'B','C',"Ke'",'Ka','R', 'S');
        return searchArray($a, $order) - searchArray($b, $order);
    }
    function searchArray($str,$order) {

    $i = 1;
    do {

    $result = array_search(substr($str,0,$i++),$order);
    if($result)
    return $result
    }while(i < strlen($str))
    return -1;
    }
    usort($arrayToSort, "mycmp"); 
```

# sql - SQL*Plus 中脚本的输入重定向

> ID：11900372
> 
> 赞同：1
> 
> 时间：2012-08-10T11:05:16.153
> 
> 标签：sql, oracle, sqlplus

我想知道是否可以在接受用户输入的 SQL 脚本中为变量提供值。这是较大任务的一小部分（一个问题涉及编写一个脚本，该脚本必须调用另一个脚本，而这又需要用户输入）。我无法更改需要用户输入的脚本。

为简单起见，假设我有以下内容`foo.sql`：

```
ACCEPT TABLENAME CHAR PROMPT 'Enter Table: '
SELECT * FROM &TABLENAME; 
```

一旦我已经登录到 SQL*Plus，有没有办法让我以`foo.sql`类似于 Bash 的方式执行和重定向输入？在理想的世界中，我可以这样做：

```
@foo < "SOMETABLE" 
```

不幸的是，这不起作用。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T12:51:45.890

您可以在登录之前将输入从文件重定向到`sqlplus`命令本身：

```
> sqlplus user/pwd@db @foo < input_file 
```

# javascript - Box2d 从旋转的身体中获取形状点

> ID：11900380
> 
> 赞同：1
> 
> 时间：2012-08-10T11:05:55.877
> 
> 标签：javascript, box2d

我现在有点困惑。如果我从 Box2d 中的夹具中获取我的形状，它会返回与身体和角度的位置相关的点（带有 ->getVertices）。但是不应该在某个地方存储形状实际点的数据吗？

澄清一下：我有一个旋转的多边形形状。现在我想获得多边形的所有实际点。有没有我可以使用的方法？还是我必须计算转换，这对我来说没有多大意义。

我正在为 JavaScript 使用 box2dweb。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-10T20:00:34.537

是的，您需要使用身体变换来计算当前位置。这些点存储在本地（身体）坐标中，因此移动身体（一个点）不需要更新夹具的所有点。考虑一个物体在一个空白区域移动，没有计算碰撞......物理引擎根本不需要固定点。如果将它们存储在世界坐标中，这些点也会很快失去精度。

如果要绘制夹具，可以像这样（C++）获得点的当前世界位置：

```
b2Vec2 worldPos = body->GetWorldPoint( localPos ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T23:09:54.900

你得到了身体的变换并将它应用到每个顶点。这会将局部顶点位置转换为世界位置。

# amazon-web-services - 在 AWS Elastic Beanstalk 中启动 AMI 启动 C 应用程序

> ID：11900382
> 
> 赞同：0
> 
> 时间：2012-08-10T11:06:00.740
> 
> 标签：amazon-web-services, amazon-elastic-beanstalk

有谁知道是否可以制作我自己的 AMI 以在 AWS Elastic Beanstalk 中使用？AMI 只需要一个在实例启动时执行的 C 程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T13:02:33.480

对的，这是可能的。只需根据他们的库存 beanstalk AMI 启动一个 EC2 实例，我相信 Amazon 在社区 AMI 列表中提供了这些实例，进行更改，从该固定实例中删除一个 AMI，并在您的 beanstalk 应用程序配置中使用最新的 AMI id。

这没有什么异常或不寻常的。

或者，您可以使用 UserData 和[CloudInit](https://help.ubuntu.com/community/CloudInit)在实例化时下载并启动应用程序。这将避免必须更改库存 AMI。

# wcf - 如何防止事务范围抛出我已经处理过的异常？

> ID：11900387
> 
> 赞同：5
> 
> 时间：2012-08-10T11:06:09.997
> 
> 标签：wcf, transactions

从概念上讲，我有一个 WCF 操作：

```
 [OperationBehavior(TransactionScopeRequired = true)]
    public void Foo() 
    {
        try { DAL.Foo(); return Receipt.CreateSuccessReceipt(); }
        catch (Exception ex) { return Receipt.CreateErrorReceipt(ex); }
    } 
```

如果在执行 DAL 代码时出现问题（例如，外键约束违反），控制权会按我的预期传递给 catch 块。但是当方法返回时，似乎事务作用域已经嗅出事务失败了，它决定最好抛出异常以确保通知调用者。

反过来，我的客户端应用程序没有得到我想要返回的收据，而是一个异常：

```
System.ServiceModel.FaultException:  
  The transaction under which this method call was executing was asynchronously aborted. 
```

我的设计有什么问题？

我可以让服务不捕获任何东西，但这有它自己的问题，因为服务需要使用异常屏蔽并且客户端（系统内部的批处理工具）需要记录错误信息。该服务也会记录错误，但方式不同，并且与批次不同。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-11T04:52:48.063

这里要小心！如果您设置 TransactionAutoComplete=true，那么如果服务正常返回，则事务将被提交。只有当存在未处理的异常（大部分情况下您没有，因为您正在捕获异常并返回收据消息）时，才会回滚事务。请参阅[http://msdn.microsoft.com/en-us/library/system.servicemodel.operationbehaviorattribute.transactionautocomplete.aspx](http://msdn.microsoft.com/en-us/library/system.servicemodel.operationbehaviorattribute.transactionautocomplete.aspx)。

想一想您成功执行了一些 DAL 调用但发生了一些其他异常（例如 NullReferenceException）的场景。现在事务将在方法完成时提交，因为没有发生未处理的异常，但客户端收到了 ErrorReceipt。

对于您的情况，我认为您必须自己管理交易。例如：

```
[OperationBehavior(TransactionScopeRequired = true, TransactionAutoComplete = false)]
public Receipt Foo() 
{   
    // Create TransactionScope using the ambient transaction
    using (var scope = new TransactionScope() )
    {
        try { DAL.Foo(); return Receipt.CreateSuccessReceipt(); scope.Complete(); }
        catch (Exception ex) { return Receipt.CreateErrorReceipt(ex); }
    }
} 
```

您可以通过创建一个将其全部包装在事务中的辅助方法来消除样板代码，或者您可以使用策略注入/拦截/方面来管理事务。

```
[OperationBehavior(TransactionScopeRequired = true, TransactionAutoComplete = false)]
public Receipt Foo() 
{   
    return ProcessWithTransaction(() =>
        {
            DAL.Foo();
            return Receipt.CreateSuccessReceipt();
        }
        , (ex) =>
        {
            return Receipt.CreateErrorReceipt(ex);
        }
    );
}

T ProcessWithTransaction<T>(Func<T> processor, Func<Exception, T> exceptionHandler)
{
    using (var scope = new TransactionScope())
    {
        try
        {
            T returnValue = processor();
            scope.Complete();
            return returnValue;
        }
        catch (Exception e)
        {
            return exceptionHandler(e);
        }
    }
} 
```

您提到您需要使用异常屏蔽。如果您不反对在发生错误时抛出错误，那么您可以使用企业库异常处理块的异常屏蔽，它还可以让您在退出时记录信息（如果您愿意）。

如果您决定走这条路，您的代码将如下所示：

```
[OperationBehavior(TransactionScopeRequired = true)]
public void Foo() 
{
    // Resolve the default ExceptionManager object from the container.
    ExceptionManager exManager = EnterpriseLibraryContainer.Current.GetInstance<ExceptionManager>();

    exManager.Process(() => 
      {
          DAL.Foo(); 
          return Receipt.CreateSuccessReceipt(); 
      }, 
      "ExceptionShielding");
} 
```

企业库（通过配置）然后将捕获任何异常并将它们替换为返回给客户端的新 FaultException。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T11:06:09.997

```
[OperationBehavior(TransactionAutoComplete = true, TransactionScopeRequired = true)] 
```

大概是因为一旦发生错误，事务就会立即回滚，而不是在范围超出范围时异步回滚：D，这就像我预期的事情最初的行为一样，我可以保持我的设计不变。

（当我尝试这个问题时，我已经写下了这个问题。希望发布它的问答风格会比根本不发布问题更有帮助。）

# cuda - 输出中的 CUDA 共享内存问题取决于外部声明和数组大小

> ID：11900394
> 
> 赞同：0
> 
> 时间：2012-08-10T11:06:31.723
> 
> 标签：cuda

如果我在 CUDA 中试验共享内存，但我不理解它在这段代码中的行为。我有一个非常基本的内核：

```
__global__ void sum( int* input, int* output, int size){

  int tid = threadIdx.x+blockDim.x*blockIdx.x +
    blockDim.x*gridDim.x*blockIdx.y;

  extern  __shared__ int sdata[];

  sdata[tid] = input[tid];
  __syncthreads();

  output[tid] = input[tid];

} 
```

并且所有的输出都是 0 `output[]`。但是，如果我注释掉`sdata[tid] = input[tid];`，那么输出是好的和相等的`input[]`。

我在这里做错了什么？我错过了什么吗？

[更新]

好吧，如果我删除标签`extern`并为共享数组指定大小，它似乎工作正常。任何想法为什么？

[更新] 我调用内核的方式是从 c++ 代码中调用的，所以我需要包装它以便从主代码中调用。

`kernel.cu`包含内核本身加上包装函数：

```
void wrapper(int dBlock, int dThread, int* input, int* output, int size){

    sum<<<dBlock,dThread>>>(input, output, size);

} 
```

`callerfunction.cpp`包含 c++ 代码和调用包装器的函数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T11:43:26.353

如果使用 extern 限定符，则需要在启动内核时传递共享内存的大小。
`kernel<<< blocks, threads, size>>>(...)`
size 参数是以字节为单位的共享内存的大小。

# security - 渗透测试 HTML 发布问题

> ID：11900399
> 
> 赞同：0
> 
> 时间：2012-08-10T11:07:10.773
> 
> 标签：security, penetration-testing

我们正计划申请安全测试证书。出于这个原因，我们使用 Paros 工具来测试我们的系统。该系统在前端用 GWT 编写，数据库连接通过 Hibernate 进行。当我们使用此工具测试我们的应用程序时，会发生以下行为，需要对其进行限制。

该工具能够查看传递给服务器的数据。这很好，但是当我们通过工具对数据进行任何更改时，它会在数据库端的系统中更新。这是一个很大的安全问题。

有人可以指导我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T18:56:28.003

如果您仍在寻找解决此问题的方法，可以使用请求签名。我之前没有提到它的原因是因为我唯一一次看到请求签名，其中涉及证书，并且主要使用 Web 服务安全标准。另一次我推荐的请求签名实现是针对移动应用程序 - 它也相对更容易在那里执行，因为您可以使用设备上的证书来执行签名，并且服务器可以验证此签名（本质上是公共密钥加密机制）。

正如您在评论中提到的那样，它有多个方面 - 一个是防止 XSRF，它本质上包括一个随机数，以确保攻击者无法重播请求，或制作可能伤害经过身份验证的用户的请求。这个 nonce 必须来自服务器，因为您使用 Javascript 创建的任何内容，攻击者也可以创建。这个 nonce 将确保您的请求是特定时间的，并且它不能在以后的时间点重播。

但是，随机数不会阻止用户处于敌对网络中的攻击，并且攻击者正在对所有流量执行中间人攻击。攻击者仍然可以修改请求，并且由于服务器以前从未见过该随机数，它将接受该请求为有效。为了防止这种情况，您需要采取相应的对策——一，所有流量都应该通过 SSL，二，所有请求都必须签名，以防止篡改。签名部分特别难，特别是如果您必须确保攻击者无法执行相同的签名。我看到的示例涉及 webapp 的证书级别身份验证，然后使用这些证书执行签名——这对于您似乎正在开发的应用程序的要求可能过于严格。

[这](http://www.phpvs.net/2011/12/24/http-signed-requests-with-php/)是一个关于如何通过 PHP 执行此操作的示例。不过，我不知道这种机制是否可以适应您的目的。OAuth*可能*是另一种可能的方法，但由于我从未见过应用程序这样做，所以我不太确定。

抱歉，我没有具体的方法或代码示例供您查看，但我看到的大多数实现都只是从设计的角度来看，而不是从实际的代码角度来看。

# ruby-on-rails - 运行 rake 命令时出错

> ID：11900400
> 
> 赞同：1
> 
> 时间：2012-08-10T11:07:12.333
> 
> 标签：ruby-on-rails, ruby, rake

在使用带有 ruby​​ 1.8.6 的 rails 2.0.2 使用旧应用程序时，遇到以下问题......

当我尝试执行任何 rake(v 0.8.3) 命令时 { 例如。耙路线}。

```
rake aborted!
Don't know how to build task 'routes'
~/.rvm/gems/ruby-1.8.6-p420@rails202/gems/rake-0.8.3/lib/rake.rb:1706:in `[]'
~/.rvm/gems/ruby-1.8.6-p420@rails202/gems/rake-0.8.3/lib/rake.rb:2018:in `invoke_task'
 ~/.rvm/gems/ruby-1.8.6-p420@rails202/gems/rake-0.8.3/lib/rake.rb:1997:in `top_level'
~/.rvm/gems/ruby-1.8.6-p420@rails202/gems/rake-0.8.3/lib/rake.rb:1997:in `each'
~/.rvm/gems/ruby-1.8.6-p420@rails202/gems/rake-0.8.3/lib/rake.rb:1997:in `top_level'
~/.rvm/gems/ruby-1.8.6-p420@rails202/gems/rake-0.8.3/lib/rake.rb:2036:in `standard_exception_handling'
~/.rvm/gems/ruby-1.8.6-p420@rails202/gems/rake-0.8.3/lib/rake.rb:1991:in `top_level'
~/.rvm/gems/ruby-1.8.6-p420@rails202/gems/rake-0.8.3/lib/rake.rb:1970:in `run'
~/.rvm/gems/ruby-1.8.6-p420@rails202/gems/rake-0.8.3/lib/rake.rb:2036:in `standard_excetion_handling'
~/.rvm/gems/ruby-1.8.6-p420@rails202/gems/rake-0.8.3/lib/rake.rb:1967:in `run'
~/.rvm/gems/ruby-1.8.6-p420@rails202/bin/rake:31 
```

最初没有 rakefile，我添加了一个，内容如下

```
# Add your own tasks in files placed in lib/tasks ending in .rake,
# for example lib/tasks/capistrano.rake, and they will automatically be available to Rake.

require File.expand_path('../config/application', __FILE__)
require 'rake'

XXX::Application.load_tasks 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T11:36:40.600

我有一个 rails 2.3.8 应用程序

Rakefile 看起来像这样：

```
# Add your own tasks in files placed in lib/tasks ending in .rake,
# for example lib/tasks/capistrano.rake, and they will automatically be available to Rake.
require 'thread'
require(File.join(File.dirname(__FILE__), 'config', 'boot'))

require 'rake'
require 'rake/testtask'
require 'rake/rdoctask'

require 'tasks/rails' 
```

您添加的 rake 文件与 rails 3 兼容，我认为它不适用于早期版本。

编辑：您必须已经设置了 rails 2.0.2，我建议创建一个新的 rails 2.0.2 应用程序并确定缺少的链接。

# ruby-on-rails-3 - 如何在 ruby on rails 中向模型添加简单的 has_many 关联？

> ID：11900402
> 
> 赞同：1
> 
> 时间：2012-08-10T11:07:14.017
> 
> 标签：ruby-on-rails-3, associations, rails-models

嗨，我几乎是 RoR 的新手，这就是为什么我在过去三个小时左右的时间里一直坚持做一些如此基本的事情。

我关注[了这个](https://stackoverflow.com/questions/8549167/rails-database-association-migration)问题，这让我相信要添加一个关联，我必须：

*   创建模型 ( `rails generate model1`)
*   创建第二个模型 ( `rails generate model2`)
*   然后编辑`model1.rb`and`model2.rb`文件，并分别在其中指定`has_many :model2s`and `belongs_to :model1`。
*   运行耙`db:migrate`

我认为这应该创建模型、它们各自在数据库中的表，以及模型 1 的模型 2 表中的引用。然而，这最后一部分还没有完成。

甚至指南也没有提到添加关联所需的确切步骤。入门指南告诉我只需在模型文件中添加关联，关联基础指南告诉我*有关*关联的信息。现在如何添加它们以便它们反映在数据库中。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T11:19:41.900

在您的数据库迁移文件中，您必须手动添加外键，除非您在生成这样的模型时指定`model2`了外键：`model1_id:integer`

```
rails generate model model2 model1_id:integer #Extra fields ... 
```

看看这里的文档：http: [//guides.rubyonrails.org/command_line.html#rails-generate](http://guides.rubyonrails.org/command_line.html#rails-generate)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T12:28:06.473

您需要采取以下步骤。如果您有两个模型 - 父母和孩子。

在父模型中，添加一个**has_many**关系。在子项中，添加**belongs_to**关系。

向子项添加一列以保存引用：

```
rails g migration add_parent_id_to_child parent_id:integer 
```

# android - 从android中的datepicker获取日期

> ID：11900403
> 
> 赞同：0
> 
> 时间：2012-08-10T11:07:15.713
> 
> 标签：android, date

在我的应用程序中，我想让用户从日期选择器中选择日期。我搜索并完成了以下代码。但它显示错误。请帮助我。

我的代码：

```
 save.setOnClickListener(new View.OnClickListener() 
            {               
                @Override
                public void onClick(View arg0) 
                {
                    // TODO Auto-generated method stub
                        EditText item=(EditText)findViewById(R.id.itemedit);
                        EditText price=(EditText)findViewById(R.id.priceedit);
                        EditText rec=(EditText)findViewById(R.id.reccedit);
                        EditText date=(EditText)findViewById(R.id.reccdateedit);
                        EditText type=(EditText)findViewById(R.id.recccatedit);

                        String upditem=item.getText().toString();
                        String updprice=price.getText().toString();
                        String dateedit=date.getText().toString();
                        String typeedit=type.getText().toString();

                        showDialog(DATE_DIALOG_ID);------------>I don't konw exactly about this.But i got this code.
                        System.out.println("DP="+mYear);

}

final Calendar c = Calendar.getInstance();
           mYear = c.get(Calendar.YEAR);
           mMonth = c.get(Calendar.MONTH);
           mDay = c.get(Calendar.DAY_OF_MONTH);
    } 
```

显示错误：

```
cannot create dialog for 0; 
```

有没有其他方法可以做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T11:15:45.223

我使用这样的东西：

```
date.setKeyListener(null);
int year = calendar.get(Calendar.YEAR);
int month = calendar.get(Calendar.MONTH);
int day = calendar.get(Calendar.DAY_OF_MONTH);
// Set current date by default
updateDateField(date, day, month, year);
final DatePickerDialog.OnDateSetListener mDateSetListener = new DatePickerDialog.OnDateSetListener() {
    public void onDateSet(DatePicker view, int year, int monthOfYear, int dayOfMonth) {
        updateDateField(date, dayOfMonth, monthOfYear, year);
    }
};
final DatePickerDialog dialog = new DatePickerDialog(context, mDateSetListener, year, month, day);
dialog.setTitle(context.getResources().getString(R.string.lib_date));
date.setOnFocusChangeListener(new OnFocusChangeListener() {
    @Override
    public void onFocusChange(View v, boolean hasFocus) {
        if (hasFocus) {
            dialog.show();
        }
    }
});

public static void updateDateField(EditText date, int day, int month, int year) {
    StringBuilder sb = new StringBuilder();
    if (day < 10)
        sb.append("0" + day);
    else
        sb.append(day);
    if (month < 10)
        sb.append("/0" + month + "/");
    else
        sb.append("/" + month + "/");
    sb.append(year);
    date.setText(sb.toString());
} 
```

其中 date 是我要编辑的 EditText。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T11:33:11.930

我认为这对你很有帮助 [http://www.bogotobogo.com/Android/android8DatePickerTimePickerClocks.php#DatePicker](http://www.bogotobogo.com/Android/android8DatePickerTimePickerClocks.php#DatePicker)

# solr - SOLR如何一起使用“fq”和“bq”？

> ID：11900406
> 
> 赞同：1
> 
> 时间：2012-08-10T11:07:18.713
> 
> 标签：solr, filter

我想要这个查询应该得到的结果：

```
q=how to&fq=book_type:*technical*&bq=author:*Anne*^999

(Select the book records including the Words: "how to", from the Type of: "technical"
and the Author(Anne)'s Books to be putting at the top of the filtered results.) 
```

但我**不能**`fq`和`bq`一起使用。
但是，查询正在单独使用它们。

# visual-studio-2010 - 如何避免在 Visual Studio 2010 解决方案资源管理器中自动展开项目

> ID：11900408
> 
> 赞同：1
> 
> 时间：2012-08-10T11:07:25.247
> 
> 标签：visual-studio-2010, visual-studio, projects-and-solutions

我已折叠解决方案中的所有项目，因此您无法在解决方案资源管理器中看到它们的文件。并且属于其中一个项目的文件打开。浏览到该文件窗格后，包含该文件的项目会自动在解决方案资源管理器中展开。

有没有办法避免这种自动展开？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T11:17:36.823

我不是 100% 确定你在追求什么，但在 VS 2010 选项中，在“项目和解决方案/常规”下有一个名为“在解决方案资源管理器中跟踪活动项目”的选项。

我刚刚尝试取消选中它，并且多个项目解决方案全部折叠，当单击打开的代码文件时，它不会在解决方案窗口中打开项目。尝试一下，看看它是否会产生您想要的结果。

如果我误解了你的问题，请告诉我！

# java - 如何备份 MySQL 数据库

> ID：11900409
> 
> 赞同：0
> 
> 时间：2012-08-10T11:07:28.137
> 
> 标签：java, mysql

我已经使用 Java JSP 创建了一个 Web 应用程序，而对于一个数据库，我使用了 MySql server 5.5。我在 Windows 上运行，应用程序运行良好。我的问题是，实际的物理数据库存储在哪里，我在计算机上的任何地方都找不到它，我问的原因是便携性，如果我复制粘贴并在不同的机器上运行项目，连接就会出现问题到数据库，我可以重新创建数据库的模式，但是存储在数据库中的实际数据我找不到它。

请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T11:17:33.797

使用[mysqldump](http://dev.mysql.com/doc/refman/5.1/en/mysqldump.html)备份您的数据库：

> mysqldump 客户端是最初由 Igor Romanenko 编写的备份程序。它可用于转储数据库或数据库集合以进行备份或传输到另一个 SQL 服务器（不一定是 MySQL 服务器）。转储通常包含用于创建表、填充表或两者兼有的 SQL 语句。但是，mysqldump 也可用于生成 CSV、其他分隔文本或 XML 格式的文件。

如果您不想使用命令行，另一种选择是使用[HeidiSQL 之类的程序](http://www.heidisql.com/)

# javascript - Metro Style 应用程序中 listView 中的不同项目大小

> ID：11900414
> 
> 赞同：2
> 
> 时间：2012-08-10T11:07:44.187
> 
> 标签：javascript, windows-8, winjs

我正在使用 HTML5/CSS/JS 为 Windows 8 开发 Metro 风格应用程序

我正在尝试在分组列表视图中显示不同大小的项目。（就像所有地铁风格的应用程序一样......）我在互联网上发现我需要将一个 GridLayout 放到我的列表视图中并实现 groupInfo。它成功修改了第一项（第一项内的图片比其他项大），但是所有项都具有第一项的大小。我想要这样的东西： ![例子](../Images/73fad18e621ce46ac0fe9c4252cd9690.png)

这是我所做的：

```
updateLayout: function (element, viewState, lastViewState) {

        //I get my listView winControl defined in HTML
        var listView = element.querySelector(".blocksList").winControl;

        var globalList = new WinJS.Binding.List(globalArray);
        var groupDataSource = globalList.createGrouped(this.groupKeySelector,
                    this.groupDataSelector, this.groupCompare);

       // I set the options of my listView (the source for the items and the groups +  the grid Layout )
        ui.setOptions(listView, {
            itemDataSource: groupDataSource.dataSource,
            groupDataSource: groupDataSource.groups.dataSource,
            layout: new ui.GridLayout({
                groupHeaderPosition: "top",
                groupInfo: function () {
                    return {
                        multiSize: true,
                        slotWidth: Math.round(480),
                        slotHeight: Math.round(680)
                    };
                }
            }),
            itemTemplate: this.itemRenderer,
             });
    },

    // je définis le template pour mes items
    itemRenderer: function (itemPromise) {
        return itemPromise.then(function (currentItem, recycled) {
            var template = document.querySelector(".itemTemplate").winControl.renderItem(itemPromise, recycled);
            template.renderComplete = template.renderComplete.then(function (elem) {

                //if it is the first item I put it widder
                if (currentItem.data.index == 0) {
                  //  elem.querySelector(".item-container").style.width = (480) + "px";
                    elem.style.width = (2*480) + "px";

                }

              });
            return template.element;
        })
    }, 
```

html部分是：

```
 <section aria-label="Main content" role="main">
      <div class="blocksList" aria-label="List of blocks" data-win-control="WinJS.UI.ListView"
data-win-options="{itemTemplate:select('.itemTemplate'), groupHeaderTemplate:select('.headerTemplate')
                   , selectionMode:'none', swipeBehavior:'none', tapBehavior:'invoke'}">
       </div>
       </section> 

            <!--Templates-->
<div class="headerTemplate" data-win-control="WinJS.Binding.Template">
    <div class="header-title" data-win-bind="innerText: categorieName"/>
</div>

<div class="itemTemplate" data-win-control="WinJS.Binding.Template">
            <div class="item-container" >
                 <div class="item-image-container">
                   <img class="item-image" data-win-bind="src: urlImage" src="#" />
                 </div>
            <div class="item-overlay">
                 <h4 class="item-title" data-win-bind="textContent: title"></h4>
            </div>
         </div>
</div> 
```

等 css

```
 .newHomePage p {
margin-left: 120px;
 }

 .newHomePage .blocksList {
      -ms-grid-row: 2;
  }

      .newHomePage .blocksList .win-horizontal.win-viewport .win-surface {
         margin-left: 120px;
         margin-bottom: 60px;
     }

    .newHomePage .blocksList .item-container {
    height: 340px;
    width: 240px;
    color: white;
    background-color: red;
    -ms-grid-columns: 1fr;
    -ms-grid-rows: 1fr;
    display: -ms-grid;
    }

    .newHomePage .blocksList .win-item {
       /*-ms-grid-columns: 1fr;
      -ms-grid-rows: 1fr 30px;
      display: -ms-grid;*/
       height: 130px;
      width: 240px;
      background: white;
      outline: rgba(0, 0, 0, 0.8) solid 2px;
     } 
```

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T15:13:22.977

在 Release Preview（以及 RTM）中，groupInfo 函数中的属性名称发生了变化：

*   multiSize -> enableCellSpanning
*   slotWidth -> 单元格宽度
*   slotHeight -> 单元格高度

试试看，看看你是否能得到更好的结果。如果您不以这种方式宣布单元格跨越，则 GridLayout 将第一个项目的大小作为所有项目的大小。

[我来自 Microsoft Press 的电子书的](http://blogs.msdn.com/b/microsoft_press/archive/2012/06/04/free-ebook-programming-windows-8-apps-with-html-css-and-javascript-first-preview.aspx)第 5 章（即将推出 RTM 预览版）将涵盖这方面的所有细节。

.克雷格

# asp.net-mvc-3 - 努力让 AutoMapper 将我的 ViewModel 映射到我的域，我做错了什么？

> ID：11900415
> 
> 赞同：1
> 
> 时间：2012-08-10T11:07:46.037
> 
> 标签：asp.net-mvc-3, fluent-nhibernate, automapper

我一直在摆弄和尝试多种事情，但我在某个地方出错了。我尝试尽可能简单地使用 AutoMapper。我正在尝试使用 CreateBrandViewModel 创建一个新品牌并将其保存到数据库中。其中一些可能看起来有点果味，但我试图让它以最简单的方式工作。

领域：

```
public class Brand : EntityBase
{
    public virtual string Name { get; set; } //Not Nullable
    public virtual bool IsActive { get; set; } // Not Nullable
    public virtual Product DefaultProduct { get; set; } // Nullable
    public virtual IList<Product> Products { get; set; } // Nullable
} 
```

视图模型：

```
public class CreateBrandViewModel
{
    public string Name { get; set; }
    public bool IsActive { get; set; }
} 
```

控制器

这是我玩了一段时间最多的地方，所以现在看起来有点奇怪。注释掉的代码并没有解决我的问题。

```
 [HttpPost]
    public ActionResult Create(CreateBrandViewModel createBrandViewModel)
    {
        if(ModelState.IsValid)
        {

            Mapper.CreateMap<Brand, CreateBrandViewModel>();
                //.ForMember(
                //    dest => dest.Name,
                //    opt => opt.MapFrom(src => src.Name)
                //)
                //.ForMember(
                //    dest => dest.IsActive,
                //    opt => opt.MapFrom(src => src.IsActive)
                //);

            Mapper.Map<Brand, CreateBrandViewModel>(createBrandViewModel)
            Session.SaveOrUpdate(createBrandViewModel);
            return RedirectToAction("Index");
        }

        else
        {
            return View(createBrandViewModel);
        }
    } 
```

仅作记录，BrandController 继承自 SessionController（Ayendes 方式），事务通过 ActionFilter 进行管理。虽然我认为那有点无关紧要。我尝试了各种不同的方法，所以我有不同的错误消息——如果你能看看发生了什么，并告诉我你可能期望如何使用它，那就太好了。

作为参考，我对 Brand 的流畅的 nhibernate 映射：

```
public class BrandMap : ClassMap<Brand>
{
    public BrandMap()
    {
        Id(x => x.Id);

        Map(x => x.Name)
            .Not.Nullable()
            .Length(50);

        Map(x => x.IsActive)
            .Not.Nullable();

        References(x => x.DefaultProduct);

        HasMany(x => x.Products);

    }
} 
```

**编辑 1**

我刚刚尝试了以下代码，但是在 Session.SaveOrUpdate(updatedModel) 上放置了一个断点，这些字段是 null 和 false，而它们不应该是：

```
 var brand = new Brand();
            var updatedBrand = Mapper.Map<Brand, CreateBrandViewModel>(brand, createBrandViewModel);
            Session.SaveOrUpdate(updatedBrand);
            return RedirectToAction("Index");
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T11:20:07.477

从邮局回程时，您似乎以错误的方式进行映射。替代语法在这里可能会有所帮助，请尝试：

```
// setup the viewmodel -> domain model map 
// (this should ideally be done at initialisation time, rather than per request)
Mapper.CreateMap<CreateBrandViewModel, Brand>();
// create our new domain object
var domainModel = new Brand();
// map the domain type to the viewmodel
Mapper.Map(createBrandViewModel, domainModel);
// now saving the correct type to the db
Session.SaveOrUpdate(domainModel); 
```

让我知道这是否会使鸡蛋破裂……或者只是鸡蛋再次出现在您的脸上:-)

# objective-c - 请求特征崩溃 - 消息发送到解除分配的实例

> ID：11900416
> 
> 赞同：0
> 
> 时间：2012-08-10T11:07:47.333
> 
> 标签：objective-c, ios, crash, dealloc

我正在对一个对象执行异步方法，当我的请求完成时，我将结果打印在标签中。我的问题是：如果我启动我的请求然后删除我的对象，我的 setText 方法会崩溃（因为我的对象已被释放）。

即使我的对象已被释放，我怎样才能避免这种崩溃？

有什么测试要做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T11:11:07.620

1）在请求完成之前不要删除您的对象:)

2) 取消请求（根据您的对象并不总是可行）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T12:39:47.903

如果您的对象被释放并且它当前是视图上的子视图，则视图本身已被销毁，您将无处显示标签内容。为什么会这样取决于你的应用程序的设计，但通常你的代码可以检测到视图的删除，如果你知道它已经消失，你应该将任何对视图的引用设置为 nil。

如果标签尚未添加到视图中 - 那么您需要保留标签，以便您可以在其上设置文本并在包含视图上调用 addSubview。

此外，如果用户操作会导致视图被删除 - 显示一个微调器并阻止用户这样做，因为他们调用的请求正在进行中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T12:24:35.450

解决方案是在“init”或“viewDidLoad”方法中创建一个 NSMutableArray 对象。当您想要移除对象时，请务必在将其从父视图中移除后将其放入此数组中。然后在您的异步方法中（最好在主线程上运行以打印结果），它做的最后一件事是 [storageArray removeObject:object]，释放它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-10T21:08:27.010

异步请求可以保留对象，直到它完成。

# javascript - 将鼠标悬停在选择框上时，Jquery悬停功能失灵

> ID：11900418
> 
> 赞同：0
> 
> 时间：2012-08-10T11:07:57.297
> 
> 标签：javascript, jquery, html, cross-browser

我的要求是，当我将鼠标悬停在弹出窗口上并在表单上选择某些内容时，弹出窗口应该保持可见。

如果弹出窗口失去移动悬停，它应该被隐藏

下面的代码一切正常。但是当我尝试在选择框中选择选项时（选项从弹出窗口中下拉），弹出窗口被隐藏。

这里是 JSFIDDLE 链接[http://jsfiddle.net/LNGz6/5/](http://jsfiddle.net/LNGz6/5/)这个问题只发生在**Internet Explorer**

**这是代码**

```
<div id="popup">
 <div class="label"> Search </div>
  <div class="control"> 
      <select name="searchval">
         <option value="entries">Entries</option> 
         <option value="bookings1">bookings1</option>
         <option value="bookings2">bookings2</option>
         <option value="bookings3">bookings3</option>
         <option value="bookings4">bookings4</option>
         <option value="bookings5">bookings5</option>
         <option value="bookings6">bookings6</option>
      </select>
   </div>
</div> 
```

**jQuery 函数**

```
$("#popup").hover(function(){
   //do none
},function(){
   $(this).hide();
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T12:08:16.467

您会遇到这种行为，因为事件会在 DOM 树中冒泡并触发潜在的父事件处理程序。你有两个选择来解决这个问题：

1）在`select`元素上添加一个事件处理程序并停止事件冒泡：

```
$("select[name=searchval]").hover(function(e){
    e.stopPropagation();
}); 
```

2）检查事件目标并相应地防止隐藏：

```
$("#popup").hover(function(){
   //do none
},function(e){
   if (e.target == this){
      $(this).hide();
   }
}); 
```

[后者的示例](http://jsfiddle.net/poikl/JMS6X/)- 隐藏仅在红色部分触发 - div 没有被子元素重叠。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T11:52:29.003

我要做的是检查焦点是否在输入元素中：

```
$("#popup").hover(function() {
    //do none
}, function() {
    var $sel = $('select');
    if ($sel.is(":focus")) {
        console.log('do not hide');
        $sel.blur();
    } else {
        $(this).hide();
    }
});​ 
```

[这里](http://jsfiddle.net/P2vvX/2/)的例子。

选择任何选项后，弹出窗口不会隐藏。选择元素上的`blur`方法是必要的，因为在选择选项后焦点将保持在其上，并且如果您悬停并再次离开框，则弹出窗口不会隐藏，以防您没有单击/聚焦任何之前的其他元素。当您选择的是弹出窗口内的选项时，问题就来了。焦点将保持在选择上，您必须单击其他位置，这就是我现在所拥有的：\

最后，选择选择元素的方式不是最优的。在这种情况下，它会起作用，但如果您的 html 中有任何其他选择元素，则会出现冲突。因此，在标签中添加一个 id 或类，并修改选择器以确保它只影响该元素。

# javascript - 在 Rails 上使用 javascript 和 ruby 进行地理定位

> ID：11900422
> 
> 赞同：0
> 
> 时间：2012-08-10T11:08:17.737
> 
> 标签：javascript, ruby-on-rails, ruby, html, ruby-on-rails-3.1

**视图.html.erb**

```
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false">
 location();
</script> 
```

**切换.js**

```
$(document).ready(function() {

$(function location()
{
  alert("here in loc1233");

  if (navigator.geolocation) {
     navigator.geolocation.getCurrentPosition(successFunction, errorFunction);
  } 
  else {
   alert("here in loc");
  }
 });    //showmap

 $(function successFunction(position) {
    var lat = position.coords.latitude;
    var lot = position.coords.longitude;
   alert('Your location coordinates are: Latitude:'+lat+' Longitude: '+lot);
 });
 }); 
```

在这里调用toggle.js中的函数location（），但它只给出警报

alert("在 loc1233");

它不会转到该函数中的其余行。为什么要这样奉献？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T11:35:39.747

为什么要在 jQuery 对象中编写函数？errorFunction 写在哪里？

> ```
>  $(document).ready(function() {
>             $(function location()
>             {
>               alert("here in loc1233");
>               if (navigator.geolocation){navigator.geolocation.getCurrentPosition(successFunction, errorFunction);
>               } 
>               else {
>                alert("here in loc");
>               }
>              });    //showmap
>              function successFunction(position) {
>                 var lat = position.coords.latitude;
>                 var lot = position.coords.longitude;
>                alert('Your location coordinates are: Latitude:'+lat+' Longitude: '+lot);
>              }
>              function errorFunction(position){
>                 alert('alert')
>              }
>              }); 
> ```

# java - 如何从通过 adobe Air 创建的 android apk 中打开源代码（在 flash 中编码）？

> ID：11900423
> 
> 赞同：0
> 
> 时间：2012-08-10T11:08:22.750
> 
> 标签：java, flash, class, adobe, apk

我正在尝试从 apk 生成源代码（它是由 adobe air 创建的，实际上是在 flash 中编码的）但它生成时没有 java 类，也没有 res 文件夹中的图像。该应用程序实际上是一个游戏应用程序，其中包含 50 张图像。任何人都可以建议我，如何通过 apk 将转换后的 flash 代码转换为 java 文件和资源。如果有任何建议，我将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T11:10:23.207

嗯...你需要反汇编APK。您是否在内部检查过 .dex 或 .class 文件？

如果是，您也许可以在这些 .class 文件上使用 DJ Java Decompiler 之类的东西。但是 android 使用 .DEX 文件而不是 .class 和 .APK 而不是 .JAR。

# svn - 使用 svn 1.7 撤消“svn 开关”的首选方法是什么？

> ID：11900427
> 
> 赞同：0
> 
> 时间：2012-08-10T11:08:47.130
> 
> 标签：svn

在项目的根目录下切换，svn 仅切换该子目录。之前的 svn 1.7 可以简单地删除该目录并运行更新。

但是现在使用 svn 1.7，它不会为每个目录存储 svn 信息。如何撤消开关的效果？

[额外：除了命令行客户端，可以通过 TortoiseSVN 完成吗？:) 在win32上]

[注意这个问题已经被问过了，但是对于 svn < 1.7 这是一个*完全*不同的情况]

# java - 将一个类的字段复制到另一个类的相同字段中

> ID：11900429
> 
> 赞同：12
> 
> 时间：2012-08-10T11:08:50.977
> 
> 标签：java, parsing, javabeans, dozer

我有这个问题。但是我很难解释，因为我不知道要使用的确切术语。希望有人能理解。我会尽力描述最好的。我觉得这与`parsing`

假设有两个班级。在这两个类中，我都有一些变量，比如字符串（为简单起见，变量类型可以是任何类型），它们具有**相似的名称**。

```
Eg:
    class ClassA{
        String x,y,z;
    }

    class ClassB{
        String x,y,z;
    } 
```

现在，我需要的是，我需要将一个类的变量值的值复制到其他类对应的变量中。

```
Eg:
    ClassA aa=new ClassA();
    ClassB bb=new ClassB();
    //set bb's variables
    aa.x=bb.x;
    aa.y=bb.y;
    aa.z=bb.z; 
```

像那样。

但请注意，我需要的不是上述方法。我希望有一种方法可以编写一个简单的方法，以便通过传递给它的名称来识别相关变量。然后它将相应地进行值分配。

我想象的方法是这样的，

```
void assign(String val){        
    // aa.<val>=val
} 
```

例如，如果您传递`bb.x`给`assign(...)`方法，那么它将执行`aa.x=bb.x`分配。

希望这足够清楚。必须有更好的方法来解释这一点。如果有人知道，请编辑帖子（+标题）以使其更清晰（但请保存我的想法）..

请让我知道是否有办法实现这一目标。

谢谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-10T11:20:00.333

推土机很好，请参阅 Jean-Remy 的回答。

此外，如果变量具有根据 JavaBeans 标准的 getter 和 setter，则有许多技术可以帮助您，例如[Apache Commons / BeanUtils](http://commons.apache.org/beanutils/)

**示例代码（未测试）：**

```
final Map<String, Object> aProps = BeanUtils.describe(a);
final Map<String, Object> bProps = BeanUtils.describe(b);
aProps.keySet().retainAll(bProps.keySet());
for (Entry<String, Object> entry : aProps.entrySet()) {
    BeanUtils.setProperty(b,entry.getKey(), entry.getValue());
} 
```

**更新：**

如果您没有 getter 和 setter，这里有一个快速技巧，只要字段具有通用名称和类型，就可以将字段值从一个类复制到另一个类。我还没有测试它，但它应该可以作为一个起点：

```
public final class Copier {

    public static void copy(final Object from, final Object to) {
        Map<String, Field> fromFields = analyze(from);
        Map<String, Field> toFields = analyze(to);
        fromFields.keySet().retainAll(toFields.keySet());
        for (Entry<String, Field> fromFieldEntry : fromFields.entrySet()) {
            final String name = fromFieldEntry.getKey();
            final Field sourceField = fromFieldEntry.getValue();
            final Field targetField = toFields.get(name);
            if (targetField.getType().isAssignableFrom(sourceField.getType())) {
                sourceField.setAccessible(true);
                if (Modifier.isFinal(targetField.getModifiers())) continue;
                targetField.setAccessible(true);
                try {
                    targetField.set(to, sourceField.get(from));
                } catch (IllegalAccessException e) {
                    throw new IllegalStateException("Can't access field!");
                }
            }
        }
    }

    private static Map<String, Field> analyze(Object object) {
        if (object == null) throw new NullPointerException();

        Map<String, Field> map = new TreeMap<String, Field>();

        Class<?> current = object.getClass();
        while (current != Object.class) {
            for (Field field : current.getDeclaredFields()) {
                if (!Modifier.isStatic(field.getModifiers())) {
                    if (!map.containsKey(field.getName())) {
                        map.put(field.getName(), field);
                    }
                }
            }
            current = current.getSuperclass();
        }
        return map;
    }
} 
```

**调用语法：**

```
Copier.copy(sourceObject, targetObject); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-10T11:11:32.980

你听说过推土机吗？：[http ://dozer.sourceforge.net/](http://dozer.sourceforge.net/)

> 推土机
> 
> Dozer 是一个 Java Bean 到 Java Bean 的映射器，它递归地将数据从一个对象复制到另一个对象。通常，这些 Java Bean 将具有不同的复杂类型。
> 
> Dozer 支持简单属性映射、复杂类型映射、双向映射、隐式-显式映射以及递归映射。这包括映射集合属性，这些属性也需要在元素级别进行映射。

Dozer 允许您映射 Java Bean：

*   使用它们的名字（隐式映射），即将 ClassA.x 映射到 ClassB.x
*   提供使用（非常简单的）xml 或注释配置来映射具有不同名称的不同结构（显式映射）的能力。

这是图书馆网站上的一个 XML 示例：

```
<?xml version="1.0" encoding="UTF-8"?>
<mappings xmlns="http://dozer.sourceforge.net"
          xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
          xsi:schemaLocation="http://dozer.sourceforge.net
          http://dozer.sourceforge.net/schema/beanmapping.xsd">

  <mapping> 
    <class-a>org.dozer.vo.TestObject</class-a>
    <class-b>org.dozer.vo.TestObjectPrime</class-b>   
    <field>
      <a>one</a>
      <b>onePrime</b>
    </field>
  </mapping>  

      <!-- SNIP ... -->

</mappings> 
```

这会将对象 org.dozer.vo.TestObject 映射到 TestObjectPrime，将所有相同的变量（如您的情况）和变量 TestObjectFoo.oneFoo 映射到 TestObjectFooPrime.oneFooPrime。

太好了，不是吗？

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-10T11:12:19.323

新的答案。

我建议调查多佛，因为它看起来很简单。

第二个选项是将类序列化为 XML 并仅在匹配的成员上反序列化为目标类。

我在评论中提到的第三个选项是使用反射 - [http://java.sun.com/developer/technicalArticles/ALT/Reflection/](http://java.sun.com/developer/technicalArticles/ALT/Reflection/)

这种技术允许一个很好的设计模式称为 Introspection - [Java introspection and reflection](https://stackoverflow.com/questions/2044446/java-introspection-and-reflection)反过来允许您发现某个类的成员......

现在，话虽如此，人们只需“发现” ClassA 的成员，用他们的名字填充一个 ArrayList，发现 ClassB 的成员，用他们的名字填充另一个 ArrayList，然后复制相交集的值。至少这是我的想法。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-03-21T06:50:51.883

看[这里](https://stackoverflow.com/questions/19760590/how-to-copy-properties-from-a-bean-to-another-bean-in-different-class)。只需使用`BeanUtils.copyProperties(newObject, oldObject);`

# c# - EntityFramework 和 DbContext，将实体转换为 DTO 并返回

> ID：11900431
> 
> 赞同：0
> 
> 时间：2012-08-10T11:08:58.417
> 
> 标签：c#, entity-framework, dto

首先是一些背景信息：

我有一个提供 wcf soap 服务的服务器和一个使用这些服务的网站。服务器使用实体框架向数据库写入/读取数据。在此过程中，实体对象被转换为 DTO，并在它们返回服务器时返回。

我有以下实体模型：![](../Images/2ae70f8a5ccfea5eb61b36ff2dea3e94.png)

DTO 是自动生成的。

现在解决问题：

`Participent`是用 a `VisibleStatus`、 a `Status`、 a`StatusMessage`和 two创建的“开始”对象`ContactGroups`。在创建这些之后，我想添加`Contact`已经创建的`Participent`和`ContactGroup`.

这里的问题是，实体框架没有意识到参与者和联系人组已经存在于数据库中，而是为它们创建了一个新的数据库条目。即使他们已经有一个ID。我认为问题在于实体被转换为 DTO 并返回。

假设以下客户端代码生成参与者、可见状态、状态、状态消息和联系人组：

```
MT_Stammdaten_MeineKontakte_ParticipentDTO user = new MT_Stammdaten_MeineKontakte_ParticipentDTO();
user.MT_Participant_Id = endUserId;
user.StatusMessage = new StatusMessageDTO()
{
    Text = "not defined",
    Timestamp = DateTime.Now,
};
user.VisibleStatus = new VisibleStatusDTO()
{
    Photo = null,
    Status = new StatusDTO()
    {
        Value = "not defined"
    },
    Timestamp = DateTime.Now
};

user = cClient.AddParticipantMapping(user);

ContactGroupDTO defaultGroup = new ContactGroupDTO()
{
    Name = CONTACTS_GROUP_STANDARD,
    Description = CONTACTS_GROUP_STANDARD_DESC,
    Participent = user,
};
ContactGroupDTO familyGroup = new ContactGroupDTO()
{
    Name = CONTACTS_GROUP_FAMILY,
    Description = CONTACTS_GROUP_FAMILY_DESC,
    Participent = user,
};

defaultGroup = cClient.AddContactGroup(defaultGroup);
familyGroup = cClient.AddContactGroup(familyGroup); 
```

现在创建联系人的代码：

```
MT_Stammdaten_MeineKontakte_ParticipentDTO participent = cClient.getUser(endUserId);
ContactGroupDTO group = cClient.GetContactGroup(1);
MT_Stammdaten_MeineKontakte_EndUser endUser = new MT_Stammdaten_MeineKontakte_EndUser()
{
    MT_EndUser_Id = newContactId,
};
ContactDTO contact = new ContactDTO()
{
    ContactGroup = group,
    ContactGroupId = group.Id,
    MT_Stammdaten_MeineKontakte_EndUser = endUser,
    MT_Stammdaten_MeineKontakte_Participent = participent,
}

contact = cClient.AddContact(contact); 
```

如何告诉实体框架具有 id 的对象已经存在？由于大多数对象都是嵌套的，我更喜欢一个相当通用的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T11:55:48.507

您需要将`State`现有对象上的 设置为`EntityState.Unchanged`。例如，对于一组

```
 context.ObjectStateManager
     .ChangeObjectState
     (group, System.Data.EntityState.Unchanged); 
```

# jquery - jquery不返回元素

> ID：11900433
> 
> 赞同：1
> 
> 时间：2012-08-10T11:09:05.373
> 
> 标签：jquery

我开发了一个jquery插件

```
$(someelment).myplugin(); 
```

工作完美。

当其他插件包含错误显示时

```
$(someelment).myplugin().otherplugin(); 
```

并且以下情况也有效。

```
$(someelment).otherplugin().myplugin(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T11:13:05.643

通常，您必须在插件函数中返回`this`（或`this.each()`）以保持插件的可链接性。如果你错过了，你可能无法调用另一个插件 - 只是你的问题。[这](http://docs.jquery.com/Plugins/Authoring#Maintaining_Chainability)是参考。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T11:10:38.800

你需要有一个

`return this`或者`return this.each()`

插件中的声明，以使链接正常工作。

# php - 查找 xml 文件中某个节点的出现次数

> ID：11900434
> 
> 赞同：-2
> 
> 时间：2012-08-10T11:09:15.283
> 
> 标签：php, xml

我有以下格式的 XML 文件：-

```
<EticketCanStatusRes>
        <ETicket>
          <eticketno>asdf4511</eticketno>
          <flightuid>57490</flightuid>
          <passuid>91832</passuid>
          <PnrNumber>AADS12</PnrNumber>
          <Origin>COK</Origin>
          <Destination>DEL</Destination>
        </ETicket>
         <ETicket>
          <eticketno>asdf4511</eticketno>
          <flightuid>57490</flightuid>
          <passuid>91832</passuid>
          <PnrNumber>AADS12</PnrNumber>
          <Origin>COK</Origin>
          <Destination>DEL</Destination>
        </ETicket>
</EticketCanStatusRes>'; 
```

我需要找出有多少`<ETicket>`元素。在我的示例中，有 2 个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T11:51:57.063

我把xml文件和php文件放在同一个目录下，所以，代码是这样的

```
 <?php
$dom = new DOMDocument;
// load the XML string defined above
$dom->load('tiket.xml');

$etickets = $dom->getElementsByTagName('ETicket');
$count = 0;

foreach ($etickets as $etiket) {
    $count++;
}

echo $count;
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T11:20:39.563

如果您只需要一种没有相对限制的节点类型的统计信息，则 DOM::getElementsByTagName 就足够了，因为它返回具有“长度”只读属性的 DOMCollection。

```
$document = new DOMDocument;
$document->load("your file.xml");
echo $document->getElementsByTagName('tagname')->length; 
```

如果您想提供更多限制，您可以像@Arkh 所说的那样将 XPath 与 SimpleXML 一起使用，或者与 DOMDocument 一起使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T11:15:16.423

您可以使用[simplexml](http://php.net/manual/en/book.simplexml.php)和[xpath](http://www.php.net/manual/en/simplexmlelement.xpath.php)：

```
$string = '<EticketCanStatusRes>
        <ETicket>
          <eticketno>asdf4511</eticketno>
          <flightuid>57490</flightuid>
          <passuid>91832</passuid>
          <PnrNumber>AADS12</PnrNumber>
          <Origin>COK</Origin>
          <Destination>DEL</Destination>
        </ETicket>
         <ETicket>
          <eticketno>asdf4511</eticketno>
          <flightuid>57490</flightuid>
          <passuid>91832</passuid>
          <PnrNumber>AADS12</PnrNumber>
          <Origin>COK</Origin>
          <Destination>DEL</Destination>
        </ETicket>
</EticketCanStatusRes>';

$xml = new SimpleXMLElement($string);
$result = $xml->xpath('//ETicket');
echo count($result); // 2 
```

# java - 在 Lucene 中索引 RTF 文件，字段完整

> ID：11900436
> 
> 赞同：1
> 
> 时间：2012-08-10T11:09:19.490
> 
> 标签：java, file, lucene, rtf

感谢您阅读这个问题。

我正在尝试在 Lucene 中索引 RTF 文件。看起来没有什么方法可以做到，但所有方法似乎都只是提取正文并将其交给 Lucene。我认为这会破坏这些领域。如果我想索引文件路径（用于显示）和正文（用于查询），那么我将如何解决这个问题？

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T11:52:37.343

您只需为所需的每个附加字段（在您的情况下为路径）添加**文字参数，并使用给定的值以及文件。**

请参阅[此处获取文档](http://wiki.apache.org/solr/ExtractingRequestHandler)。在你的情况下，它会是

```
curl "http://localhost:8983/solr/update/extract?literal.path=\path\to\tutorial&commit=true" -F "myfile=@tutorial.html" 
```

如果你需要编码 \，它的 %5C

# javascript - JS代码有什么问题，让我知道代码是否可以改进

> ID：11900437
> 
> 赞同：0
> 
> 时间：2012-08-10T11:09:23.097
> 
> 标签：javascript, html, css, getelementbyid

获取类型错误：`document.getElementById("free_shipping")`是`null`

这就是我正在尝试的——

我只是想确保这两个特定的 div 只显示我的主页。但我收到此错误，但警报正在工作。如果我错过了什么，请告诉我。

我可以让这个代码更好，因为我只需要`JAVACRIPT`在这种情况下使用。

**JS代码**

```
<script type="text/javascript">
var myaddr = location.host;
if(myaddr  == "abc.xy.com")
{
document.getElementById('free_shipping').style.display="visible"; 
document.getElementById('sale').style.display="visible"; 
//alert("I am in if");
}
else{
document.getElementById('free_shipping').style.display="none"; 
document.getElementById('sale').style.display="none"; 
//alert("I am in else");
}
</script> 
```

**代码**

```
 <!--####### Free Shipping Start ##############-->
    <div id="free_shipping">
    </div>
    <!--Free Shipping End-->
    <!--####### Sale Start ####### -->
    <div id="sale">
    </div>
    <!--Sale End--> 
```

**CSS 代码**

```
 #free_shipping
    {
    background: url("../images/template/swap_free_shipping.jpg") no-repeat scroll 0 0 transparent;
    height: 112px;
    left: -57px;
    position: relative;
    top: 256px;
    width: 62px;  
    }
    #sale
    {
    background: url("../images/template/swap_sale.jpg") no-repeat scroll 0 0 transparent;
    left: -55px;
    position: relative;
    top: 384px;
    width: 59px;
    height: 79px;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T11:13:39.497

也许在文档完全加载之前调用了 JS，因此该元素还不存在？尝试使用页面底部的 JS 代码或仅在整个页面加载后调用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T11:13:51.953

如果您`<script>`在`<head></head>`您网站的部分中，那么它将在页面加载之前开始执行，因此`free_shipping`不会`sale`存在于 DOM 中。

尝试执行以下操作，这将使您的代码在页面完成加载后发生...

```
<script type="text/javascript">
  window.onload = function() {
    var myaddr = location.host;
    if(myaddr  == "abc.xy.com")
    {
      document.getElementById('free_shipping').style.display="visible"; 
      document.getElementById('sale').style.display="visible"; 
      //alert("I am in if");
    }
    else{
      document.getElementById('free_shipping').style.display="none"; 
      document.getElementById('sale').style.display="none"; 
      //alert("I am in else");
    }
 }
</script> 
```

这也可以使用[jquery library](http://jquery.com/)来完成，但我对它的了解非常有限。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-10T11:14:58.837

我认为在您的情况下，脚本执行早于创建实际 elem 时被调用

```
<body>
<!--####### Free Shipping Start ##############-->
<div id="free_shipping">
</div>
<!--Free Shipping End-->
<!--####### Sale Start ####### -->
<div id="sale">
</div>
<!--Sale End-->
</body>

<script type="text/javascript">
var myaddr = location.host;
if(myaddr  == "abc.xy.com")
{
document.getElementById('free_shipping').style.display="visible"; 
document.getElementById('sale').style.display="visible"; 
//alert("I am in if");
}
else{
document.getElementById('free_shipping').style.display="none"; 
document.getElementById('sale').style.display="none"; 
//alert("I am in else");
}
</script> 
```

应该解决你的问题，还要检查这个 - [javascript:how to write $(document).ready like event without jquery](https://stackoverflow.com/questions/3989095/javascripthow-to-write-document-ready-like-event-without-jquery)

# asp.net - 类似 T4MVC 的强类型链接生成器，以避免在 Asp.Net Web 窗体中出现魔术字符串

> ID：11900439
> 
> 赞同：0
> 
> 时间：2012-08-10T11:09:29.633
> 
> 标签：asp.net, webforms, t4

我在我的 MVC 项目中使用 T4MVC 来避免尽可能多的魔法字符串。

我想知道 ASP.Net Web 窗体是否有类似的东西，它生成到 aspx 页面和 ascx 控件的强类型链接。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T16:56:16.773

请参阅上一个问题：[Webforms 是否有等效的 T4MVC？](https://stackoverflow.com/questions/2446679/is-there-an-equivalent-of-t4mvc-for-webforms).

基本上，请查看[http://blogs.msdn.com/b/davidebb/archive/2009/07/12/asppathguru-a-little-t4-love-for-asp-net-webforms.aspx](http://blogs.msdn.com/b/davidebb/archive/2009/07/12/asppathguru-a-little-t4-love-for-asp-net-webforms.aspx)，我做了一个几年前。我有一段时间没有尝试过，所以我不能保证它的状态很好，但请尝试一下！

# javascript - 导航到 div 元素中的锚点

> ID：11900440
> 
> 赞同：1
> 
> 时间：2012-08-10T11:09:35.250
> 
> 标签：javascript, html, css

我有一个包含许多`<div>`元素的 HTML 文件，我无法使用 JavaScript 导航到锚标记。我在 jsfiddle 中放了一个演示。有关详细信息，请参阅 JavaScript + CSS + HTML 的链接。

我可以导航到“section5”，但不能导航到其他部分。

[jsfiddle 演示](http://jsfiddle.net/funcubes/XueyX/7)

谁能帮我这个？

任何帮助将非常感激....

亲切的问候

***更新：*** *感谢您的回复。我已经用清理过的 HTML 更新了链接。javascript导航仍然不起作用*:(

***更新 2：***感谢您的建议，但仍然无法正常工作 **我已根据您的建议对其进行了更新.. 但它不起作用。如果我取出 css 条目“div.columnbreak { -webkit-column-break-after: always; 导航工作。当我把它放回去时，导航不起作用***

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T11:25:13.607

您没有正确关闭标签

例如：,

**错误的**

```
<p>This EPUB eBook is released under a Creative Commons (BY-NC-ND/3.0) Licence.
        <p>Source text and images taken from the Public Domain.</p> 
```

**正确的**

```
<p>This EPUB eBook is released under a Creative Commons (BY-NC-ND/3.0) Licence.
        Source text and images taken from the Public Domain.</p> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T12:44:29.363

看一看：[jsfiddle](http://jsfiddle.net/XueyX/18/)

您根本不需要使用`<a>`元素，您可以为您的部分块分配唯一的 id。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T11:35:53.943

这是您的 jsFiddle 示例中标记的屏幕截图：

![在此处输入图像描述](../Images/893c5c8ffc6e1887054e7bab75aebd1d.png)

如您所见，有多个`<a>`名称值为“section1”、“section2”等的 's。这将阻止您的 #sectionX 哈希找到唯一的锚点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-10T11:19:29.733

我可能读错了，但看起来你的标签在你有 2 个打开的 p 并且只有 1 个关闭的部分中可能没有正确关闭。

它在哪个部分被抛弃，这就是为什么你的锚被混淆的原因。

JSFiddle 似乎也不喜欢第 3 节上面的 3 个 div 标签，但我还没弄清楚为什么。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-10T11:27:38.643

这是因为`<a>`标签的位置。你应该把它放在`<p>`你感兴趣的标签之后。

好吧，你应该稍微[整理一下你的标记](http://validator.w3.org)。每个人都知道 Irene Adler 被有效的网页所吸引。

# api - Youtube Player API 隐藏控件、隐藏信息、隐藏相关视频？

> ID：11900442
> 
> 赞同：30
> 
> 时间：2012-08-10T11:09:47.887
> 
> 标签：api, youtube

我正在尝试使用 JavaScript API 在主页（Chromeless）中加载 Youtube 视频。到目前为止，我设法让它自动播放，hd720 并在完成后淡出视频。

但我找不到删除控件、隐藏信息以及最后不加载相关视频的方法。

我知道在 iframe 嵌入中我可以使用以下参数

```
controls=0&showinfo=0&autoplay=1&rel=0 
```

但我找不到在下面显示的 YouTube Player API 中使用这些参数的方法。有什么建议吗？

```
<script src="http://www.youtube.com/player_api?enablejsapi=1&version=3"></script>

  function onYouTubePlayerAPIReady() {
            player = new YT.Player('video_chromeless', {
                height: '800',
                width: '450',
                videoId: '',
              events: {
                'onReady': onPlayerReady,
                'onStateChange': onPlayerStateChange
              }
            });
        }
function onPlayerReady(event){
            player.setPlaybackQuality('hd720');
            event.target.playVideo();
        }
 function onPlayerStateChange(event) {
            if(event.data === 0) {
                $('#video_chromeless').fadeOut(600);
            }
        } 
```

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-08-10T11:15:59.770

您可以在“YT.Player”的第二个参数中设置“playerVars”： [https ://developers.google.com/youtube/iframe_api_reference#Loading_a_Video_Player](https://developers.google.com/youtube/iframe_api_reference#Loading_a_Video_Player)

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2014-08-13T22:08:42.537

这对我来说很好：

```
player = new YT.Player('divId', {
    videoId : videoSrc,
    playerVars: { 
        'autoplay': 0,
        'controls': 1, 
        'rel' : 0,
        'fs' : 0,
    }
}); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-11-13T09:01:10.337

YouTube 更新了他们的政策。2018 年 9 月 25 日之后，“showinfo”参数被弃用并从 iframe 中被忽略。

[https://developers.google.com/youtube/player_parameters#release_notes_08_23_2018](https://developers.google.com/youtube/player_parameters#release_notes_08_23_2018)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-04-22T18:29:49.620

根据 YouTube 的最新政策更新，我们将不再能够使用`rel:0`标记隐藏相关视频。

[您可以看到 rel 标志从 2018 年 9 月 25 日开始更改](https://i.stack.imgur.com/CDJiA.png)

[YouTubeAPI 的最新参数可以参考这个链接](https://developers.google.com/youtube/player_parameters)

# mysql - 我在实体框架的数据源列表中看不到 MySQL

> ID：11900443
> 
> 赞同：0
> 
> 时间：2012-08-10T11:09:59.773
> 
> 标签：mysql, visual-studio-2010, entity-framework

我使用 Visual Studio 2010-12 并安装了 [ADO.NET Entity Framework 4.1](http://www.microsoft.com/en-us/download/details.aspx?id=18504)、[Mysql .Net Connector](http://dev.mysql.com/downloads/connector/net/)和[Mysql Workbench](http://dev.mysql.com/downloads/workbench)

在格式化之前，我的电脑，我可以使用 MySQL 的实体框架。但不是我在数据源列表中看不到 MySQL。这就是我的意思

![实体清单](../Images/30c7968137cc9dc72c964a2e61e2f3cc.png)

嗯......我的错误或失踪在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-20T16:30:33.527

尝试卸载现有的 mysqlconnector。下载 mysqlconnector/net 6.5.6 它适用于我桌面上的 VS2010。但是，如果您使用的是 vs2012，您可以尝试最新版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T09:43:20.293

好的，我解决了，我打开服务器资源管理器并连接到 mysql 数据库，在我尝试添加一个 ado.net 实体框架对象并且它可以工作之后

# javascript - 在 Windows Modern(Metro) UI 应用程序中存储图像文件和音频文件的方式是什么？

> ID：11900449
> 
> 赞同：0
> 
> 时间：2012-08-10T11:10:19.613
> 
> 标签：javascript, html, windows-8, microsoft-metro, windows-runtime

我的 Windows 8 Modern(Metro) UI 应用程序中有大约 30 个图像文件和 30 个音频文件。目前我的应用程序大小约为 30MB。我想减小我的应用程序的大小。

那么有没有一种方法可以使用任何 WinJS API 以文本/字符串的格式表示图像文件和音频文件，从而减小应用程序的大小。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T01:22:10.537

30MB 是 Windows 8 应用程序可接受的大小。为什么要关心尺寸？

将图像存储为压缩资源将无济于事，因为 .appx 包已经被压缩，所以你要做的只是运行时的 CPU 开销，因为你需要解压缩不必要的。

我不会担心太多。30MB 是可以的，但当然您应该始终努力将您的大小保持在最低限度。减小大小的一种可靠方法是明智地存储图像和音频文件。

**对于音频文件**

*   检查您是否没有未压缩的文件 (.wav)。
*   检查您的 .mp3 文件或类似文件是否使用适当的比特率。你可能只需要 128kbps

**对于图像文件**

*   检查您的图像文件是否使用了适当的压缩方法。有些文件可能可以存储为 JPEG，其他文件最好存储为 GIF，而另一些文件最好存储为 PNG。
*   [使用PNG Gauntlet](http://pnggauntlet.com/)等工具优化您的 PNG 文件。这些工具在不降低PNG 文件**质量的情况下大大降低了文件大小。**

**Windows 8 缩放支持**

此外，请确保您的图像正确支持 Windows 8 图像缩放。更多信息可以在[这里](http://msdn.microsoft.com/en-us/library/windows/apps/hh465362.aspx)找到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T11:55:54.460

如果您的图像或音频由于某种原因未压缩，您当然可以使用压缩格式（例如 jpeg 或 mp3）。但是，您可以采用的一种减小应用程序大小的方法是仅包含您立即需要的图像和音频，并在应用程序首次运行或实际需要文件时从 Web 服务下载其余部分。WinRT 中有一个[Compressor 类](http://msdn.microsoft.com/en-us/library/windows/apps/windows.storage.compression.compressor.aspx)，但与 jpeg 等已压缩的图像类型或 mp3 等音频类型相比，它不会为您提供任何真正的压缩优势。

# javascript - 从周围的 HTML 调用 SVG 中的 JavaScript 函数

> ID：11900452
> 
> 赞同：11
> 
> 时间：2012-08-10T11:10:24.733
> 
> 标签：javascript, html, svg

我在这里创建了一个小页面，就像这个页面一样：

```
<!DOCTYPE html>
<html>
  <head>
     <title>Test</title>
     <script type="text/javascript">
     function test() {
        executeAnimation();
     }   
     </script>
  </head>
  <body>
     <h1>Tester</h1>
     <embed src="test.svg" type="image/svg+xml" /> 
     <hr />
     <input type='button' value='Test' onclick='test()' />
  </body>
</html> 
```

`test.svg`看起来像这样：

```
<?xml version="1.0" ?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 20010904//EN"
 "http://www.w3.org/TR/2001/REC-SVG-20010904/DTD/svg10.dtd">
<svg id="testSvgId" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="950" height="900">
     <title>Title</title>
     <desc>Desc</desc>
     <defs>
          <script type="text/javascript">
          <![CDATA[
          function executeAnimation () {
              document.getElementById('anim').beginElement();
          }
          ]]>
          </script>
     </defs>
     <ellipse cx="500" cy="1090" rx="600" ry="0" fill="rgb(94,114,54)">
          <animate id="anim" attributeType="XML" attributeName="ry" begin="indefinite" dur="2s" from="0" to="350" fill="freeze" />
     </ellipse>
</svg> 
```

如您所见，我想从 HTML 页面中的 JavaScript 调用`executeAnimation()`在 SVG 图像中定义的函数。这实际上是行不通的。

我也试过这个：

```
<svg onload='onloadFunction()'...>
...
function onloadFunction() {
    alert('i am loading');
    window.executeAnimation = executeAnimation();
} 
```

这是在另一个论坛中提出的，但这也不起作用（`window.executeAnimation`从外部未定义）。

真正正确的方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2017-06-07T10:10:36.800

如果没有看到您的 .svg 的来源，就不可能具体回答...

看看这个：[https ://codepen.io/lambdacreatives/pen/uygzk](https://codepen.io/lambdacreatives/pen/uygzk)

**HTML**

```
<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="77px" height="77px" viewBox="0 0 77 77" enable-background="new 0 0 77 77" xml:space="preserve">
  <g>
    <path id="d" fill="#ffffff" d="M49.045,61.112c2.549-1.198,4.867-2.798,6.857-4.743L36.83,13.587c-2.862,0.186-5.602,0.826-8.124,1.899
    l6.448,14.465l-15.12,25.387c1.866,2.038,4.044,3.785,6.489,5.118L39.236,39.11L49.045,61.112z"/>

    <path id="circle" fill="#ffffff" d="M38.457,67.2c-15.852,0-28.701-12.848-28.701-28.701c0-15.851,12.85-28.697,28.701-28.697
    c5.773,0,11.137,1.72,15.639,4.653l4.605-7.702c-6.049-3.873-13.114-5.998-20.359-5.998C17.531,0.754,0.6,17.687,0.6,38.499
    c0,20.813,16.932,37.746,37.742,37.746c8.438,0,16.48-2.773,23.061-7.865l-3.809-8.533C52.514,64.405,45.818,67.2,38.457,67.2z">
        <animateTransform 
               xlink:href="#circle"
               attributeName="transform" 
               attributeType="XML"
               id="ani-circle"
               type="rotate"
               from="0 38.501500725746155 38.4994986653327945"
               to="360 38.501500725746155 38.4994986653327945" 
               dur="0.3s"
              begin="click"
               repeatCount="1"
               fill="freeze" />

    </path>
  </g>
</svg>
<br><br>
<button id="trigger">Trigger Animation</button> 
```

**CSS**

```
body {
  background-color: black;
  text-align: center;
}

svg {
  height: 100%;
  width: 200px;
  path {
    fill: white;
  }
} 
```

**JS**

```
$( "#trigger" ).click(function() {
  document.getElementById("ani-circle").beginElement();
}); 
```

如果您无法从中解决问题，请发布您的 .svg 的来源，我会为您提供具体的答案。

# iphone - NSXMLParser 和 CDATA

> ID：11900454
> 
> 赞同：1
> 
> 时间：2012-08-10T11:10:29.307
> 
> 标签：iphone, objective-c, xml, nsxmlparser, cdata

> **可能重复：**
> [将 NSXMLParser 与 CDATA 一起使用](https://stackoverflow.com/questions/1095782/using-nsxmlparser-with-cdata)

我`NSXMLParser`用来解析来自我的服务器的 xml 数据。
当用户向另一个用户发送文本消息时，我的服务器使用 CDATA 标记来包装用户文本，因为用户文本会破坏 xml 结构。

我的问题是`NSXMLParser`知道如何自动处理 CDATA 吗？它是内置在 NSXMLParser 机制中的吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-10T11:23:02.733

我从未使用过`NSXMLParser`，但快速查找`NSXMLParserDelegate`协议的文档会发现方法`parser:foundCDATA:`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T12:33:37.230

它是 XML 规范的一部分，因此 XML 解析器必须支持它。

# html - 将图像与同一行上的文本左侧对齐 - Twitter Bootstrap3

> ID：11900457
> 
> 赞同：57
> 
> 时间：2012-08-10T11:10:34.060
> 
> 标签：html, css, twitter-bootstrap, image

目前我在同一行有一个段落标题和右侧的图像：

```
<div class="paragraphs">
  <div class="row">
    <div class="span4">
      <div class="content-heading"><h3>Experience &nbsp </h3><img src="../site/img/success32.png"/></div>
      <p>Donec id elit non mi porta gravida at eget metus. Etiam porta sem malesuada magna mollis euismod. Donec sed odio dui.</p>
    </div>
  </div>
</div> 
```

这很好用——内容标题和图像在同一行。但是，当我将图像放在内容标题 div 之前时，它们不再位于同一行。这就是我想要实现的 - 图像然后是内容标题 - 在同一行。

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2012-08-10T12:01:54.233

使用 Twitter Bootstrap 类可能是最好的选择：

*   `pull-left`使元素向左浮动
*   `clearfix`允许元素包含浮动元素（如果尚未通过另一个类设置）

```
<div class="paragraphs">
  <div class="row">
    <div class="span4">
      <div class="clearfix content-heading">
          <img class="pull-left" src="../site/img/success32.png"/>
          <h3>Experience &nbsp </h3>
      </div>
      <p>Donec id elit non mi porta gravida at eget metus. Etiam porta sem malesuada magna mollis euismod. Donec sed odio dui.</p>
    </div>
  </div>
</div> 
```

* * *

## 回答 #2

> 赞同：48
> 
> 时间：2014-12-17T12:14:34.370

从 Bootstrap v3.3.0 开始，您可以使用`.media-left`和`.media-body`

```
<div class="media">
    <span class="media-left">
        <img src="../site/img/success32.png" alt="...">
    </span>
    <div class="media-body">
        <h3 class="media-heading">Experience</h3>
        ...
    </div>
</div> 
```

文档：[https ://getbootstrap.com/docs/3.3/components/#media](https://getbootstrap.com/docs/3.3/components/#media)

* * *

## 回答 #3

> 赞同：47
> 
> 时间：2012-08-10T11:17:18.133

您可以使用浮动：

```
<div class="paragraphs">
  <div class="row">
    <div class="span4">
      <img style="float:left" src="../site/img/success32.png"/>
      <div class="content-heading"><h3>Experience &nbsp </h3></div>
      <p style="clear:both">Donec id elit non mi porta gravida at eget metus. Etiam porta sem malesuada magna mollis euismod. Donec sed odio dui.</p>
    </div>
  </div>
</div> 
```

如果您希望以下内容`<p>`也保持在同一行，请删除其

```
style="clear:both" 
```

但是你应该添加

```
<div style="clear:both"></div> 
```

在它之后。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2013-12-10T10:01:38.447

对于引导程序 3。

```
<div class="paragraphs">
  <div class="row">
    <div class="col-md-4">
      <div class="content-heading clearfix media">
           <h3>Experience &nbsp </h3>
           <img class="pull-left" src="../site/img/success32.png"/>
      </div>
      <p>Donec id elit non mi porta gravida at eget metus. Etiam porta sem malesuada magna mollis euismod. Donec sed odio dui.</p>
    </div>
  </div>
</div> 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2015-01-09T18:49:09.663

我会使用 Bootstrap 的网格来达到预期的效果。class="img-responsive" 效果很好。就像是：

```
 <div class="container-fluid">
        <div class="row">
            <div class="col-md-3"><img src="./pictures/placeholder.jpg" class="img-responsive" alt="Some picture" width="410" height="307"></div>
            <div class="col-md-9"><h1>Heading</h1><p>Your Information.</p></div>
        </div>
    </div> 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2016-04-20T11:54:20.583

使用嵌套列

要使用默认网格嵌套您的内容，请在现有的 .col-sm-* 列中添加一个新的 .row 和一组 .col-sm-* 列。嵌套行应包括一组不超过 12 列的列（不需要使用所有 12 个可用列）。

[![在此处输入图像描述](../Images/6cf3531003650864bfbcbf2e77643374.png)](https://i.stack.imgur.com/xzcxI.png)

```
<div class="row">
  <div class="col-sm-9">
    Level 1: .col-sm-9
    <div class="row">
      <div class="col-xs-8 col-sm-6">
        Level 2: .col-xs-8 .col-sm-6
      </div>
      <div class="col-xs-4 col-sm-6">
        Level 2: .col-xs-4 .col-sm-6
      </div>
    </div>
  </div>
</div>
```

# c# - gui上的许多简短任务

> ID：11900459
> 
> 赞同：0
> 
> 时间：2012-08-10T11:10:49.370
> 
> 标签：c#, multithreading, user-interface, .net-4.0, backgroundworker

当我必须做许多与 GUI 合作的短任务时，我应该`BackgroundWorker`为每个任务使用另一个，还是其他一些解决方案？

**编辑**

我的意思是每 5 秒更新一次 datagridview 中的每个单元格（200 行 x 50 列）。每个单元格都存储图像。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T11:17:07.257

当我处理许多小任务时，我倾向于发现这[`ThreadPool`](http://msdn.microsoft.com/en-us/library/system.threading.threadpool.aspx)是处理它们的好方法。您可以像这样在后台线程上分派委托：

```
ThreadPool.QueueUserWorkItem(new WaitCallback(MyThreadProc)); 
```

您还可以将对象作为状态传递给线程，考虑将对象作为参数的委托。你可以这样称呼：

```
ThreadPool.QueueUserWorkItem(new WaitCallback(MyThreadProc), state); 
```

其中 state 是您的线程知道如何处理的某个对象。

**编辑**：一种`ThreadPool`方法应该适用于您的场景。只需确保必须在 GUI 线程上调用任何更改您的 GUI 的代码，否则您将获得一些跨线程异常。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T11:31:55.523

`BackgroundWorker`会更适合长时间运行的任务，你想要像[ThreadPool](http://msdn.microsoft.com/en-us/library/system.threading.threadpool.aspx)这样的东西。这是一个非常粗略的例子：

`QueueUserWorkItem`允许您指定一个工作方法并传入一个对象以供该方法使用。

`ThreadPool.QueueUserWorkItem(new WaitCallback(DoWork), object);`

然后，您将拥有`DoWork`所有神奇发生的方法：

```
public void DoWork(object sender)
{
     object s = (object)sender;

     this.Invoke(new ThreadDone(ReportProgress), result);
} 
```

请注意对`this.Invoke(new TaskDone(ReportProgress));`This 的调用安全地调用在主线程上运行的代码，以使用来自`DoWork`. 这是通过私人代表完成的：

```
private delegate void ThreadDone(object yourObject); 
```

哪个会调用：

```
private void ReportProgress(object yourObject)
{
       //update UI
} 
```

您还可以通过跟踪`Interlocked`计数器对象来使用它来检查任务何时完成，例如

```
foreach (string s in strings)
{
      ThreadPool.QueueUserWorkItem(new WaitCallback(DoWork), s);
      Interlocked.Increment(ref workItems);
} 
```

然后减少`workItems`单个线程完成的时间并简单检查何时`workItems == 0`

```
Interlocked.Decrement(ref workItems);

if (workItems == 0)
{
       this.Invoke(new TaskDone(WorkComplete));
} 
```

希望这可以帮助。

# mysql - 使用 Criteria API 进行休眠子选择：MySql 中的性能缓慢

> ID：11900462
> 
> 赞同：1
> 
> 时间：2012-08-10T11:10:54.000
> 
> 标签：mysql, hibernate, hibernate-criteria, subquery, named-query

我的休眠映射 XML 文件中有一个子选择查询（如下所示）。这样做的目的是设置一个基本的 SQL 查询，然后通过 Criteria API 添加各种限制。我正在显示可以在支持分页的情况下进行排序、过滤和搜索的数据，因此 Criteria API 对此非常有用。

```
<class name="className" table="tableName">
    <subselect>
        select         x.col1         AS       ID,
                       c.col2         AS       a
                       ....
        from           table1         x,
                       table2         y
        where          x.id           =        y.id
                       ....
                       ....
    </subselect>
    <id name="ID" column="ID"/>
    <property name="a" column="a"/>
    ...
    ...
</class> 
```

然后Java代码将通过执行类似的操作来添加限制

标准 c = sessionFactory.getCurrentSession().createCriteria(tableName.class); c.add(Restrictions.allEq(m)); // 其中 m 是包含列过滤器的哈希图

但是，似乎使用 subselect 来声明基本查询导致 MySQL 的性能非常差。Hibernate 将基本查询放入一个子查询中，该子查询位于具有附加限制的外部查询的 FROM 子句中。因此，为了清楚起见，Hibernate 创建了一个类似 A 的查询，而我想要的查询是 B，即我不想要一个子查询，因为它会降低性能。

```
A:  select _tmp.*                         B: select  t1.col1,
    from (                                           t1.col2 
           select  t1.col1,                  from    table1  t1,
                   t1.col2                           table2  t2 
           from    table1  t1,               where   t1.id = t2.id
                   table2  t2                and     t1.col1 = 'blah' 
           where   t1.id = t2.id             order by t1.col desc 
           ...
          ) _tmp
     where _tmp.col1 = 'blah'
     order by _tmp.col2 desc 
```

所以我的问题是如何在不使用允许我使用 Criteria API 的子选择的情况下在 Hibernate 中创建基本查询？让 Hibernate 运行查询 B 而不是查询 A 的最佳方法是什么？

我知道我可以在映射文件中创建命名查询并加载它们，但这会加载一个查询，虽然允许我添加某些限制，但它不如 Criteria 好，因为它不允许排序选项等。 ..

除了使用任何一个之外，还有其他选择吗

```
<hibernate-mapping>
 <class name="" table="">
    <subselect></subselect>
 </class>
</hibernate-mapping>

or  
<hibernate-mapping>
  <sql-query name="">   
    <return-scalar column="col" type="string"/>
  </sql-query>
</hibernate-mapping> 
```

因为第一个选项通过使用子查询降低了性能，而第二个选项不允许我（据我所知？）使用 Criteria API 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T14:21:51.217

我有一个解决方案，所以我在这里添加它以供参考。

我的要求是使用 Hibernate 从多个表中检索数据并使用 Criteria API 过滤结果集。作为 Hibernate 和 Criteria 的新手，我选择了我当时认为最简单的选项，即手工制作一些原始 SQL 以将数据拉到一起并使用 Criteria 过滤该数据。使用 subselect 是我当时知道的唯一方法来加载手工制作的 SQL 语句以供 Criteria 函数进一步修改。这在功能方面运行良好，但如上所述，在针对 MySQL 运行时表现很差。

我没有意识到我可以用 Criteria 做的是使用 Aliases 来限制关联。所以我放弃了原始 SQL，使用 Hibernate 检索我的父数据对象，并使用 Criteria Aliases 对所有必需的关联添加限制。与 5 秒相比，此方法在 100 毫秒内执行。

# android - 在android中获取运行时异常

> ID：11900467
> 
> 赞同：-4
> 
> 时间：2012-08-10T11:11:13.177
> 
> 标签：android, mobile, error-handling

我制作了一个简单的 android 应用程序，它在长度为 5 的编辑文本输入上从一个活动移动到另一个活动。但我得到了例外。我附加了两个 java 文件（MainActicity 和另一个），mainfest 文件和 logcat 输出。有人请帮帮我。提前致谢。

下载链接：：[http ://www.4shared.com/folder/gyDYjAYC/AndroidApp.html](http://www.4shared.com/folder/gyDYjAYC/AndroidApp.html)

日志猫是：

```
08-10 16:15:47.289: D/AndroidRuntime(4043): Shutting down VM
08-10 16:15:47.296: W/dalvikvm(4043): threadid=1: thread exiting with uncaught exception (group=0x40018578)
08-10 16:15:47.296: E/AndroidRuntime(4043): FATAL EXCEPTION: main
08-10 16:15:47.296: E/AndroidRuntime(4043): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.practice/com.example.practice.Another}: java.lang.NullPointerException
08-10 16:15:47.296: E/AndroidRuntime(4043):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1651)
08-10 16:15:47.296: E/AndroidRuntime(4043):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1667)
08-10 16:15:47.296: E/AndroidRuntime(4043):     at android.app.ActivityThread.access$1500(ActivityThread.java:117)
08-10 16:15:47.296: E/AndroidRuntime(4043):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:935)
08-10 16:15:47.296: E/AndroidRuntime(4043):     at android.os.Handler.dispatchMessage(Handler.java:99)
08-10 16:15:47.296: E/AndroidRuntime(4043):     at android.os.Looper.loop(Looper.java:130)
08-10 16:15:47.296: E/AndroidRuntime(4043):     at android.app.ActivityThread.main(ActivityThread.java:3687)
08-10 16:15:47.296: E/AndroidRuntime(4043):     at java.lang.reflect.Method.invokeNative(Native Method)
08-10 16:15:47.296: E/AndroidRuntime(4043):     at java.lang.reflect.Method.invoke(Method.java:507)
08-10 16:15:47.296: E/AndroidRuntime(4043):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)
08-10 16:15:47.296: E/AndroidRuntime(4043):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625)
08-10 16:15:47.296: E/AndroidRuntime(4043):     at dalvik.system.NativeStart.main(Native Method)
08-10 16:15:47.296: E/AndroidRuntime(4043): Caused by: java.lang.NullPointerException
08-10 16:15:47.296: E/AndroidRuntime(4043):     at com.example.practice.Another.onCreate(Another.java:18)
08-10 16:15:47.296: E/AndroidRuntime(4043):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
08-10 16:15:47.296: E/AndroidRuntime(4043):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1615)
08-10 16:15:47.296: E/AndroidRuntime(4043):
... 11 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T11:34:42.020

在你的`Another`课堂上：

```
Bundle c= getIntent().getExtras();
String s= c.getString("key"); 
```

在此代码`c`中为 null，因为 android 不会为启动器设置任何额外内容`Intent`。

# sql - Oracle：从日期时间中减去毫秒

> ID：11900470
> 
> 赞同：23
> 
> 时间：2012-08-10T11:11:32.490
> 
> 标签：sql, oracle, function, date

我以为这很简单，但事实并非如此。

```
SELECT TO_TIMESTAMP('10/08/2012','DD/MM/YYYY') 
          - 1/(24*50*60*1000) data 
FROM dual; 
```

它根本行不通。

* * *

其他详情：

```
SELECT TO_TIMESTAMP('10/08/2012','DD/MM/YYYY') -
           NUMTODSINTERVAL(1/(24*50*60*1000),'HOUR') data 
FROM dual; 
```

不行。。

权利似乎是

```
SELECT TO_TIMESTAMP('10/08/2012','DD/MM/YYYY') -
           NUMTODSINTERVAL(1/(24*25*60*1000),'HOUR') data 
FROM dual; 
```

为什么？它是如何工作的？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-09-07T00:23:27.377

要添加或减去以文字形式表示的时间量，您可以使用 INTERVAL。

```
SELECT TO_TIMESTAMP('10/08/2012','DD/MM/YYYY')
     - INTERVAL '0.001' SECOND 
FROM dual; 
```

现在也有标准的方法来表达日期和时间文字并避免使用各种数据库特定的转换函数。

```
SELECT TIMESTAMP '2012-10-08 00:00:00' 
   - INTERVAL '0.001' SECOND DATA
FROM dual; 
```

对于您的原始问题，一天中的时间部分以小数天数存储。所以一秒钟是：

```
1 / (hours in day * minutes in hour * seconds in a minute) 
```

除以 1000 得到毫秒。

```
1 / (24 * 60 * 60 * 1000) 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-08-10T11:21:43.420

```
SELECT TO_TIMESTAMP('10/08/2012','DD/MM/YYYY') - NUMTODSINTERVAL(1/(24*50*60*1000),'HOUR') data 
FROM dual; 
```

**输出**

```
DATA                             
---------------------------------
09/AUG/12 11:59:59.999950000 PM  

1 row selected. 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-09-06T12:54:06.577

上面发布的答案从日期中减去了*十分*之一毫秒。我认为您想要的是以下内容：

```
SELECT TO_TIMESTAMP('10/08/2012','DD/MM/YYYY')-NUMTODSINTERVAL(1/1000,'SECOND')
  FROM dual; 
```

**输出：**

```
DATA
---------------------------------------------------------------------------
09-AUG-12 11.59.59.999000000 PM
                   ^^^
                   |||
              tenths|thousandths
                    |
                hundredths 
```

以下`NUMTODSINTERVAL(1/(24*25*60*1000),'HOUR')`似乎仅因为 24*25 = 600 才有效。但这个数字是错误的，因为一小时的 1/(600*60*1000) 是十分之一毫秒，而不是毫秒。如果你想使用'HOUR'，`NUMTODSINTERVAL()`你应该使用`1/(60*60*1000)`（一小时六十分钟，一分钟六十秒，一秒1000毫秒）。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-09-06T12:44:07.493

这是正确的（毫秒是千分之一秒）：-

```
SELECT TO_TIMESTAMP('10/08/2012','DD/MM/YYYY') - NUMTODSINTERVAL(1/1000,'SECOND') data FROM dual;

DATA
-----------------------------
09-AUG-12 23.59.59.999000000 
```

至于为什么其他代码不起作用，是因为您没有正确计算毫秒。一个小时必须除以 60 给出分钟，再除以 60 给出秒，然后再除以 1000 给出毫秒，因此如果你必须使用 HOUR 作为间隔，那么它是：-

```
SELECT TO_TIMESTAMP('10/08/2012','DD/MM/YYYY') - NUMTODSINTERVAL(1/(60*60*1000),'HOUR') as data FROM dual;

DATA
---------------------------------------------------------------------------
09-AUG-12 23.59.59.999000000 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-09-06T13:57:03.253

```
select TO_CHAR(TO_TIMESTAMP('10.05.2012', 'DD.MM.YYYY') - 
       NUMTODSINTERVAL(1/1000, 'SECOND'), 'DD.MM.YYYY HH24:MI:SS:FF3')  Res 
  from dual;

RES
-----------------------------
09.05.2012 23:59:59.999 
```

# c# - 避免锁定已经在会话中的对象 (UniqueObjectException)

> ID：11900475
> 
> 赞同：1
> 
> 时间：2012-08-10T11:12:14.687
> 
> 标签：c#, nhibernate

当需要再次初始化对象时，我会在对象上调用此函数：

```
public virtual void Initialize()
{
    if (!HibernateSessionManager.Instance.GetSession().Contains(this)) {

        try
        {
            HibernateSessionManager.Instance.GetSession()
                             .Lock(this, NHibernate.LockMode.None);
        }
        catch (NonUniqueObjectException e) { }
    }
} 
```

我以为我可以通过检查来防止两次初始化某些东西`Contains(this)`，但有时会发生`Lock(this, NHibernate.LockMode.None)`抛出`NonUniqueObjectException`. 到目前为止，我忽略了它，因为它有效，但我想知道锁定对象的原因和更好的方法。

最好的问候， 期待

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T20:15:51.557

这很可能意味着您在某处违反了身份映射。这意味着您有两个对象的实例，它们具有相同的数据库 ID，但引用标识不同。

Session.Contains 将检查引用相等性，但如果会话中已经有任何具有相同类型和 id 的东西，Lock 会抛出异常，这是一个不太严格的比较。

考虑在 AdventureWorks 数据库上进行的以下测试，使用 Equals 和 GetHashCode 的（非常幼稚且不推荐）简单实现

```
 using (ISession session = SessionFactory.Factory.OpenSession())
        {
            int someId = 329;

            Person p = session.Get<Person>(someId);
            Person test = new Person() { BusinessEntityID = someId };

            Assert.IsTrue(p.Equals(test)); //your code might think the objects are equal, so you'd probably expect the next line to return true         

            Assert.IsFalse(session.Contains(test)); //But they're not the same object

            Assert.Throws<NonUniqueObjectException>(() =>
            {
                session.Lock(test, LockMode.None); //So when you ask nhibernate to track changes on both objects, it gets very confused
            });
        } 
```

NHibernate（我猜是任何 ORM）通过跟踪对象的变化来工作。因此，在 Get'ing Person 329 中，您要求 NHibernate 关注某个 Person 的特定实例发生的任何事情。假设我们将他的名字改为 Jaime。

接下来，我们得到另一个具有相同 ID 的 person 实例（在这种情况下，我们只是对其进行了新的处理，但是有很多隐蔽的方法可以获取这样的对象）。想象一下，NHibernate 也会让我们将它附加到会话中。我们甚至可以将第二个对象的名字设置为类似 Robb。

当我们刷新会话时，NHibernate 无法知道数据库行是否需要同步到 Robb 或 Jaime。所以它会在这种情况发生之前抛出非独特的方式。

理想情况下，这些情况不应该出现，但如果您非常确定发生了什么，您可能需要查看 session.Merge，它可以让您将跟踪状态强制为最后合并的任何内容（示例中为 Robb） .

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T06:49:30.477

问题是完全不同的 - 如果我不覆盖，则包含通过引用检查相等性`Equals()`。现在它适用于我问题中的代码！

```
 public override bool Equals(object obj)
    {
        if (this == obj) { 

            return true;
        } 

        if (GetType() != obj.GetType()) {

            return false;
        }

        if (Id != ((BaseObject)obj).Id)
        {

            return false;
        }

        return true;
    } 
```

# postgresql - 在 Postgres 中选择非重复值

> ID：11900477
> 
> 赞同：2
> 
> 时间：2012-08-10T11:12:21.503
> 
> 标签：postgresql, select, distinct

```
SELECT DISTINCT a.s_id, select2Result.s_id, select2Result."mNrPhone", 
       select2Result."dNrPhone" 
FROM "Table1" AS a INNER JOIN
    (
    SELECT b.s_id, c."mNrPhone", c."dNrPhone" FROM "Table2" AS b, "Table3" AS c  
    WHERE b.a_id = 1001 AND b.s_id = c.s_id
    ORDER BY b.last_name) AS select2Result
ON a.a_id = select2Result.student_id
WHERE a.k_id = 11211 
```

它返回：

```
1001;1001;"";""
1002;1002;"";""
1002;1002;"2342342232123";"2342342"
1003;1003;"";""
1004;1004;"";"" 
```

1002 值重复了两次，但这不应该是因为我使用过`DISTINCT`并且没有其他表的 id 重复两次。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T12:35:30.180

您可以像这样使用[DISTINCT ON](http://www.postgresql.org/docs/9.0/static/sql-select.html#SQL-DISTINCT)：

```
 SELECT DISTINCT ON (a.s_id) 
          a.s_id, select2Result.s_id, select2Result."mNrPhone", 
          select2Result."dNrPhone"
   ... 
```

但是就像其他人告诉你的那样，“重复记录”确实不同。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T12:13:02.987

限定符 DISTINCT 适用于整行，而不适用于选择列表中的第一列。由于带有 的两行的第 3 列和第 4 列（`mNrPhone`和`dNrPhone`）不同`s_id = 1002`，因此 DBMS 正确列出了这两行。如果您只想`s_id = 1002`显示一次，则必须以不同的方式编写查询，并且您必须决定要显示哪些辅助数据。

顺便说一句，强烈建议您始终在所有查询和子查询中使用显式 JOIN 表示法（在 SQL-92 中引入）。不要使用旧的隐式连接表示法（这是 SQL-86 或 SQL-89 中可用的全部），尤其不要混合使用显式和隐式连接表示法（您的子查询使用隐式连接，但主查询使用显式连接）。您需要了解旧的表示法，以便理解旧的查询。您应该用新的符号编写新的查询。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-10T15:13:25.487

首先，显示的查询根本不起作用，子查询**`student_id`中缺少。**稍后在 JOIN 中使用它。

更有趣的是：

### 从一组中选择某一行`DISTINCT`

`DISTINCT`并`DISTINCT ON`通过根据要区分的列集对所有行进行排序来返回不同的值，然后从每个集合中选择第一行。它按常规的所有行排序`DISTINCT`，仅按指定的行排序`DISTINCT ON`。这是从一组中挑选某些行而不是其他行的机会。

例如，如果您在示例中更喜欢带有非空“mNrPhone”的行：

```
SELECT DISTINCT ON (a.s_id)   -- sure you didn't want a.a_id?
      ,a.s_id AS a_s_id  -- use aliases to avoid dupe name
      ,s.s_id AS s_s_id
      ,s."mNrPhone"
      ,s."dNrPhone" 
FROM  "Table1" a
JOIN  (
    SELECT b.s_id, c."mNrPhone", c."dNrPhone", ??.student_id  -- misssing!
    FROM  "Table2" b
    JOIN  "Table3" c USING (s_id)
    WHERE  b.a_id = 1001 
    --    ORDER  BY b.last_name  -- pointless, DISTINCT will re-order
     ) s ON a.a_id = s.student_id
WHERE  a.k_id = 11211
ORDER  BY a.s_id -- first col must agree with DISTINCT ON, could add DESC though
         ,("mNrPhone" <> '') DESC -- non-empty first 
```

`ORDER BY``DISTINCT`不能在同一查询级别上不同意。为了解决这个问题，您可以`GROUP BY`改用或将整个查询放在子查询中并在其上运行另一个`SELECT`查询`ORDER BY`。

**`ORDER BY`**您在子查询中的内容现在无效。

在这种特殊情况下，如果 - 看起来 - 欺骗仅来自子查询（您必须验证），您可以改为：

```
SELECT a.a_id, s.s_id, s."mNrPhone", s."dNrPhone" -- picking a.a_id over s_id
FROM  "Table1" a
JOIN  (
    SELECT DISTINCT ON (b.s_id)
          ,b.s_id, c."mNrPhone", c."dNrPhone", ??.student_id  -- misssing!
    FROM  "Table2" b
    JOIN  "Table3" c USING (s_id)
    WHERE  b.a_id = 1001 
    ORDER  BY b.s_id, (c."mNrPhone" <> '') DESC -- pick non-empty first
     ) s ON a.a_id = s.student_id
WHERE  a.k_id = 11211
ORDER  BY a.a_id  -- now you can ORDER BY freely 
```

# mapreduce - RavenDB Map/Reduce 按日期分组

> ID：11900478
> 
> 赞同：1
> 
> 时间：2012-08-10T11:12:25.627
> 
> 标签：mapreduce, ravendb

我必须创建一个查询以获取每年/每月发布的统计信息，例如按日期分组。我创建了一个索引：

```
public class Posts_Count : AbstractIndexCreationTask<Post, ArchiveItem>
{
    public Posts_Count()
    {
        Map = posts => from post in posts
              select new
                         {
                             Year = post.PublishedOn.Year,
                             Month = post.PublishedOn.Month,
                             Count = 1
                         };

        Reduce = results => from result in results
                            group result by new {
                                 result.Year,
                                 result.Month
                            }
                            into agg
                            select new
                                       {                                               
                                           Year = agg.Key.Year,
                                           Month = agg.Key.Month,
                                           Count = agg.Sum(x => x.Count)
                                       };
    }
} 
```

在工作室中，我有下一个 map 和 reduce 函数：

地图：

```
docs.Posts.Select(post => new {Year = post.PublishedOn.Year, Month = post.PublishedOn.Month, Count = 1}) 
```

减少：

```
results
.GroupBy(result => new {Year = result.Year, Month = result.Month})
.Select(agg => new {Year = agg.Key.Year, Month = agg.Key.Month, Count = agg.Sum(x => ((System.Int32)(x.Count)))}) 
```

但问题是我总是得到 Year 和 Month 属性的空值：

```
{
   "Year": null,
   "Month": null,
   "Count": "1"
} 
```

有人可以帮我解决我的代码问题吗？谢谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T19:13:31.213

你的代码看起来不错。我对其进行了测试，它在当前不稳定的版本 1.2.2096 中工作。最近在 RavenDB google group 上对此进行了一些讨论，所以它之前可能被破坏了。使用当前版本再试一次，看看它现在是否适合您。

# android - SQLite 删除语法错误

> ID：11900479
> 
> 赞同：2
> 
> 时间：2012-08-10T11:12:27.513
> 
> 标签：android, sql, sqlite, sql-delete

这条线，`mDatabase.execSQL(sql);`给了我以下错误：

```
{ sqlite returned: error code = 1, msg = near "*": syntax error }
  for Delete * from table_name Query 
```

我的 SQL 查询是：`DELETE * FROM table_name`

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-10T11:13:51.053

`DELETE * FROM table_name`是一个错误的sql命令。利用`DELETE from table_name`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T11:24:25.693

语法错误意味着基本上您的语句拼写错误并且无法解析。在这种情况下，错误消息说明了此错误发生的确切位置 - 在“*”字符上。在这种情况下，您应该转到数据库文档并检查您尝试使用的命令的正确语法。如果是 SQLite，它就在[这里](http://www.sqlite.org/lang.html/)。您可以在此处找到有关 DELETE 语句的文档，[这](http://www.sqlite.org/lang_delete.html)是链接。它以图形方式向您展示语法（称为[语法图](http://en.wikipedia.org/wiki/Syntax_diagram)或铁路图），应该很容易理解。在这种情况下，如前所述，您不能在 DELETE 和 FROM 之间指定“*”。这是因为您总是在删除整行，而不能删除单个选定的列。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T10:50:27.663

如果您需要删除整个表，您可以使用 DROP TABLE IF EXISTS 然后重新创建表

# cakephp - Joomla 或 cakePHP 用于无限制地设计应用程序？

> ID：11900482
> 
> 赞同：-1
> 
> 时间：2012-08-10T11:12:43.627
> 
> 标签：cakephp, joomla

我只触及了 Joomla 和 cakePHP 的冰山一角。有很多东西要学。但除了学习之外，我还想构建一些有用的东西。

Joomla 是最容易设置的，如果我想使用已经在使用的概念来启动和运行，它非常灵活。也就是说，我可以安装其他用途开发的不同组件和扩展。这里的问题是我受限于其他人的想象力和视野。如果我想要一些特定的东西并且没有组件或扩展满足我的需求，我需要自己构建。这让我想到了一个问题： -

我应该学习如何在 Joomla 中开发自定义组件/扩展，还是学习 cakePHP 以真正能够设计自己的应用程序以满足我的所有需求？

这是我想通过学习构建的应用程序 - 以下所有组件的集成，每个组件都能够相互交互：

*   一个博客
*   一个论坛
*   用户参与的食谱书
*   用户日历
*   图片库

是的，我想做很多事情，但都是以学习的名义。我真的希望能够拥有一个集成了上述所有组件的应用程序，这些组件可以顺利协同工作。例如，当用户提交食谱或博客时，这会写入他们的日历。另一个例子，用户将能够在他们的博客中分享他们的食谱/图片库，而无需读者离开。另一个例子，图像可以用食谱或食谱的成分来标记。

我从一张白纸开始，所以我真的在寻找一些关于我应该坚持以实现我想做的事情的意见。哪一个会有更陡峭的学习曲线？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T15:10:10.827

对于论坛，您可以使用[Kunena](http://kunena.org)。

[图片库](http://extensions.joomla.org/extensions/photos-a-images/galleries/photo-gallery)、[博客](http://extensions.joomla.org/extensions/authoring-a-content/blog)和[用户日历](http://extensions.joomla.org/extensions/calendars-a-events)应该很容易找到。

至于食谱书，如果您愿意购买扩展，那么 Yootheme 的[ZOO](http://www.yootheme.com/zoo/apps/index.php?option=com_zoo&view=frontpage&Itemid=7)应用程序可能是一个想法，或者您可以允许用户提交标准的 Joomla 文章并使用评论组件，例如[JComment](http://www.joomlatune.com/jcomments-downloads.html#avatars)

# android - 处理不活跃的无线网络

> ID：11900485
> 
> 赞同：21
> 
> 时间：2012-08-10T11:12:49.447
> 
> 标签：android

假设手机找到开放的 wi-fi 网络并连接到它。但是 wi-fi 网络处于“非活动状态”，即当您打开浏览器时，您会看到输入凭据的提示。我的手机上有很多应用程序（例如网络浏览器），在这种情况下无法正常工作。我想使用移动网络发送数据，但系统仍然尝试使用*wi-fi。*

[`NetworkInfo.isAvailable()`](http://developer.android.com/reference/android/net/NetworkInfo.html#isAvailable%28%29)并且[`NetworkInfo.isConnected()`](http://developer.android.com/reference/android/net/NetworkInfo.html#isConnected%28%29)仍然返回`true`所描述的*wi-fi*网络。有什么解决办法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T14:25:03.640

只是一个建议：您可以尝试使用[requestRouteToHost()](http://developer.android.com/reference/android/net/ConnectivityManager.html#requestRouteToHost%28int,%20int%29)。但首先搜索 SO 使用这种方法的问题。

你也需要`CHANGE_NETWORK_STATE`许可。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-20T10:39:48.900

我一直有同样的问题，我发现通过Android SDK没有这种可能性，你必须编写自己的方式来做到这一点。

这取决于您想对网络做什么以及“非活动”是什么意思 - 您可以连接到没有连接到 Internet 的路由器，并且没有 Android 方法可以检查这种情况。正如MrMichael 所写，ping 是检查它的一种方法，但在这种情况下，阳性测试只会为您提供有关 ping 的信息 - 网络可能有一些允许您发送 ping 的重型防火墙，但即不会让 HTTP 请求通过。

在这种情况下，您必须根据自己的需要编写自己的自定义测试，唉——这就是我所做的。我刚刚实现了简单的类似 ping 的协议（我尝试在正确的 IP/端口上连接我的套接字并发送短消息等待简短的回答）。只有这样才能让我 100% 保证可以建立我想要的连接。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-20T12:14:39.987

据我所知，没有办法强制通过 wifi 使用数据连接（也许在没有用户交互的情况下你不应该做的事情）。

我的许多应用程序都有相同的要求，我想知道在加载初始屏幕时它们是否具有可行的网络连接（例如，如果没有，我会显示应用程序的只读版本）。

我解决这个问题的方法是向我的服务器发起一个简单的服务调用，`isAlive`它只会立即返回一个 true。这不仅告诉我我可以看到我的服务，而且还确认我的服务器在线（我这边没有问题）。如果我没有及时得到回复，我会通知用户他们没有网络连接，并且“请确保您有有效的数据/wifi 连接，然后再继续”。然后，我获取`isConnected`wifi 的属性并将此消息修改为“您当前的无线连接无法访问互联网”或类似内容。

不是您希望的答案，但也许有可能？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-27T05:55:22.590

您可以连接到 wifi 网络，尝试连接到后台的任何页面并验证是否有任何重定向。如果是这样，很可能是凭证页面。事实上，当我试图找到如何实现我刚才描述的解决方案时，我发现它 在 Android 开发者网站的[`HttpURLConnection`类文档中有所描述。](http://developer.android.com/reference/java/net/HttpURLConnection.html)在那里你可以阅读：

**处理网络登录**

某些 Wi-Fi 网络会阻止 Internet 访问，直到用户单击登录页面。此类登录页面通常使用 HTTP 重定向来呈现。您可以使用它`getURL()`来测试您的连接是否被意外重定向。在收到响应标头之前，此检查无效，您可以通过调用`getHeaderFields()`或触发`getInputStream()`。例如，要检查响应是否未重定向到意外主机：

```
HttpURLConnection urlConnection = (HttpURLConnection) url.openConnection();
   try {
     InputStream in = new BufferedInputStream(urlConnection.getInputStream());
     if (!url.getHost().equals(urlConnection.getURL().getHost())) {
       // we were redirected! Kick the user out to the browser to sign on?

     ...
   } finally {
     urlConnection.disconnect();
   }
 } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-20T10:19:49.347

尝试这个....

我需要做一些自定义工作..但是让它运行起来......

我的代码**关闭**`switches from Wifi to Mobile network`时。

 **而且我正在使用wifi 连接仍处于打开状态时`TimeService at port 37`知道**Internet 已死**

**//////////////////////已编辑//////////////////// ///////////**

现在我把`complete working code`我做的放在这里。请原谅我，因为`DRY`（不要重复自己的原则）**在这里被滥用了**。所以**在生产网络中使用时请****重构代码并将重复的代码转换为方法，即转换为a 。`single sensible place`**

```
/////---------------------------Intial Available Network Checking

private boolean checkConnection(){

boolean connected = false;
ConnectivityManager cm =  (ConnectivityManager)getSystemService(Context.CONNECTIVITY_SERVICE);

if (cm != null) {
NetworkInfo[] netInfo = cm.getAllNetworkInfo();

for (NetworkInfo ni : netInfo) {
if ((ni.getTypeName().equalsIgnoreCase("WIFI")
|| ni.getTypeName().equalsIgnoreCase("MOBILE"))
& ni.isConnected() & ni.isAvailable()) {
connected = true;
     }

   }
 }

return connected; 
```

} /////---------------------------初始可用网络检查

```
/////-------------------------------Check for the working Internet Connection

public boolean inetAddr(){

    boolean x1 = false;

    try {
        Socket s = new Socket("utcnist.colorado.edu", 37);

        InputStream i = s.getInputStream();

        Scanner scan = new Scanner(i);

        while(scan.hasNextLine()){

            System.out.println(scan.nextLine());
            x1 = true;
        }
    } catch (Exception e) {

            x1 = false;
    } 

    return x1;

}

/////-------------------------------Check for the working Internet Connection

////-------------------------------Check Mobile Conectivity Again

public boolean mobileConnect(){

    boolean conn = false;
    ConnectivityManager cm =  (ConnectivityManager)getSystemService(Context.CONNECTIVITY_SERVICE);
    NetworkInfo activeNet = cm.getNetworkInfo(ConnectivityManager.TYPE_MOBILE);

    if(activeNet != null){

        conn = true;
    }else{

        conn = false;
    }

    return conn;

}

////------------------------------Check Mobile Conectivity Again 
```

**在这里，我正在使用上述方法....**

```
try{    
     if (!checkConnection()){

         AlertDialog.Builder myAlertDialog = new AlertDialog.Builder(YumZingSplashActivity.this);
         myAlertDialog.setTitle("--- Connectivity Check ---");
         myAlertDialog.setMessage("No Internet Connectivity");
         myAlertDialog.setPositiveButton("OK", new DialogInterface.OnClickListener() {

          public void onClick(DialogInterface arg0, int arg1) {

            YumZingSplashActivity.this.finish();
            //splashHandler.removeCallbacks(launcherRunnable);

          }});
            System.out.println("No Internet Connectivity");

            myAlertDialog.show();           

        }
        else{

              if(inetAddr()){
            aphandle = APIHandling.getInstance();
            aphandle.xmlCreateSession();
            System.out.println("Net Connectivity is Present");
            DURATION = Integer.valueOf(getString(R.string.splash_duration));

            splashHandler = new Handler();

            //  ================ Main Code of the Application
            launcherRunnable = new Runnable() {

                public void run() {
                    Intent i = new Intent(YumZingSplashActivity.this, YumZingTabHostActivity.class);
                    i.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                    startActivity(i);
                    YumZingSplashActivity.this.finish();
                }
            };
            if (DEBUG)
            {
                splashHandler.post(launcherRunnable);
            }
            else{

                splashHandler.postDelayed(launcherRunnable, DURATION);
            }

        }
              else{

                  if(mobileConnect()){

                      if(inetAddr()){
                      aphandle = APIHandling.getInstance();
                        aphandle.xmlCreateSession();
                        System.out.println("Net Connectivity is Present");
                        DURATION = Integer.valueOf(getString(R.string.splash_duration));

                        splashHandler = new Handler();

                        //  ================ Main Code of the Application
                        launcherRunnable = new Runnable() {

                            public void run() {
                                Intent i = new Intent(YumZingSplashActivity.this, YumZingTabHostActivity.class);
                                i.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                                startActivity(i);
                                YumZingSplashActivity.this.finish();
                            }
                        };
                        if (DEBUG)
                        {
                            splashHandler.post(launcherRunnable);
                        }
                        else{

                            splashHandler.postDelayed(launcherRunnable, DURATION);
                        }
                      }else{

                          AlertDialog.Builder myAlertDialog = new AlertDialog.Builder(YumZingSplashActivity.this);
                         myAlertDialog.setTitle("--- Connectivity Check ---");
                         myAlertDialog.setMessage("No Internet Connectivity");
                         myAlertDialog.setPositiveButton("OK", new DialogInterface.OnClickListener() {

                          public void onClick(DialogInterface arg0, int arg1) {

                            YumZingSplashActivity.this.finish();
                            //splashHandler.removeCallbacks(launcherRunnable);

                          }});
                            System.out.println("No Internet Connectivity");

                            myAlertDialog.show();       
                      }
                  }else{

                         AlertDialog.Builder myAlertDialog = new AlertDialog.Builder(YumZingSplashActivity.this);
                         myAlertDialog.setTitle("--- Connectivity Check ---");
                         myAlertDialog.setMessage("No Internet Connectivity");
                         myAlertDialog.setPositiveButton("OK", new DialogInterface.OnClickListener() {

                          public void onClick(DialogInterface arg0, int arg1) {

                            YumZingSplashActivity.this.finish();
                            //splashHandler.removeCallbacks(launcherRunnable);

                          }});
                            System.out.println("No Internet Connectivity");

                            myAlertDialog.show();           

                  }

              }
        }

     //setContentView(R.layout.yumzing_splash_layout);
    }  catch(Exception ex){

            System.out.println("Leak ko catch");
        }

    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-27T07:21:25.540

Try

```
InetAddress.getByName(host).isReachable(timeOut) 
```**

# linux - 搜索具有多个“点”字符的文件

> ID：11900492
> 
> 赞同：0
> 
> 时间：2012-08-10T11:13:08.590
> 
> 标签：linux, design-patterns, find, character

在 Linux 中，如何在不编写脚本的情况下使用查找和正则表达式或类似方式来搜索具有多个“点”但 IGNORE 扩展名的文件。

例如，通过以下文件搜索将只返回第二个文件。在本例中，“.ext”是扩展名。

```
testing1234hellothisisafile.ext
testing.1234.hello.this.is.a.file.ext 
```

该解决方案应使用文件名中的一个或多个点（忽略扩展点）。这也适用于任何文件，即具有任何文件扩展名

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T11:24:21.063

因此，如果我理解正确，您希望获得名称中至少包含两个附加点的文件名。这会做：

```
$ find -regex ".*\.+[^.]*\.+[^.]*\.+.*"
./testing.1234.hello.this.is.a.file.ext
./testing1234.hellothisisafile.ext
$ find -regex ".*\.+[^.]*\.+[^.]*\.+[^.]*\.+.*"
./testing.1234.hello.this.is.a.file.ext 
```

关键点检测部分是`\.+`（至少一个点），加上分离任何东西（除了一个点，但前面的部分已经覆盖了它；防止贪婪匹配的安全措施）`[^.]*`。它们一起构成了正则表达式的核心部分——我们不在乎之前或之后是什么，只是在某个地方有三个点。三个，因为当前目录中的一个也很重要——如果您要从其他地方搜索，请删除一`\.+[^.]*`组：

```
$ find delme/ -regex ".*\.+[^.]*\.+[^.]*\.+[^.]*\.+.*"
delme/testing.1234.hello.this.is.a.file.ext
$ find delme/ -regex ".*\.+[^.]*\.+[^.]*\.+.*"
delme/testing.1234.hello.this.is.a.file.ext 
```

在这种情况下，结果是相同的，因为名称包含很多点，但第二个正则表达式是正确的。

# android - 在屏幕方向更改时恢复对象

> ID：11900498
> 
> 赞同：2
> 
> 时间：2012-08-10T11:13:40.193
> 
> 标签：android, reset, screen-orientation

在我的代码中，我创建了一个卡片类；我稍后在网格视图中显示一堆卡片。在屏幕方向更改时，我丢失了所有卡片；在我之前的问题中，我被指出了正确的方向。

现在，我在 Android 文档和 StackO 中发现的是

```
@Override
    protected void onSaveInstanceState(Bundle outState) {
    outState.putInt(...);
    super.onSaveInstanceState(outState);
}

@Override
protected void onRestoreInstanceState(Bundle savedInstanceState) {
    some_int_var = savedInstanceState.getInt(...);
super.onRestoreInstanceState(savedInstanceState); 
```

}

现在，我这样做了，因为 Bundle 对象有几个方法，如 putString、Char 等。原语加上字符串。但是我的卡呢？它们是向量中的 Card 对象，因此我不能使用任何这些方法。

如何在不使用 onRetainNonConfigurationInstance 或阻止活动重置的情况下恢复该向量？在 Android 文档中，如果需要重新启动大量数据，建议执行此操作，但这不是我的情况。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-10T11:27:54.320

对于您自己的对象，您可以使用`putParcelable()`

要使您的对象可打包，您应该实现`Parcelable`并按照以下示例来实现它。

[http://prasanta-paul.blogspot.nl/2010/06/android-parcelable-example.html](http://prasanta-paul.blogspot.nl/2010/06/android-parcelable-example.html)

所以：

```
public class ParcelData implements Parcelable {
    String name;

    ParcelData (Parcel source) {
        name = source.readString();
    }       

    public void writeToParcel(Parcel dest, int flags) {
        dest.writeString(name);
    }

    public class MyCreator implements Parcelable.Creator<ParcelData> {
        public ParcelData createFromParcel(Parcel source) {
            return new ParcelData(source);
        }
        public ParcelData[] newArray(int size) {
             return new ParcelData[size];
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-10T11:27:14.990

首先 - 你可以通过意图复杂的对象。

这样做的原因是让你的类实现`Serializable`接口 or `Parcelable`，然后使用`intent.getSerializableExtra(keyName);`or`intent.getParcelableExtra();` `Serializable`更容易实现（基本上将你的类声明为实现它就足够了）但是某些特定的类不能序列化，而实现`Parcelable`需要更多工作，但总是可能的。

其他选项 - 将您需要保存的数据保存在一些带有 getter 和 setter 的单音类中，以保存您想要保存的任何内容，并在代码中随时随地使用它：将数据保存在`onSaveInstanceState`方法中并获取它回到`onRestoreInstanceState`方法。

# cuda - 从pycuda中的全局函数调用设备函数

> ID：11900499
> 
> 赞同：1
> 
> 时间：2012-08-10T11:13:48.120
> 
> 标签：cuda, pycuda

我是 PyCUDA 的新手。我想从用声明`__device__`的函数调用用声明的函数`__global__`。我怎样才能在 pyCUDA 中做到这一点？

```
import pycuda.driver as cuda  
from pycuda.compiler import SourceModule  
import numpy as n  
import pycuda.autoinit  
import pycuda.gpuarray as gp

d=gp.zeros(shape=(128,128),dtype=n.int32)  
h=n.zeros(shape=(128,128),dtype=n.int32)  
mod=SourceModule("""  
      __global__ void  matAdd(int *a)  
    {  
            int px=blockIdx.x*blockDim.x+threadIdx.x;  
            int py=blockIdx.y*blockDim.y+threadIdx.y;         
            a[px*128+py]+=1;   
            matMul(px);

    }  
      __device__ void matMul( int px)
    {
      px=5;
    }  

""")

m=mod.get_function("matAdd")  
m(d,block=(32,32,1),grid=(4,4))  
d.get(h) 
```

上面的代码给了我以下错误

```
7-linux-i686.egg/pycuda/../include/pycuda kernel.cu]  
[stderr:  
kernel.cu(8): error: identifier "matMul" is undefined  

kernel.cu(12): warning: parameter "px" was set but never used  

1 error detected in the compilation of "/tmp/tmpxft_00002286_00000000-6_kernel.cpp1.ii".  
] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T15:47:01.747

您应该`matMul`在引用它之前声明您的函数。你可以这样做：

```
 __device__ void matMul( int px); // declaration
  __global__ void  matAdd(int *a)  
{  
        int px=blockIdx.x*blockDim.x+threadIdx.x;  
        int py=blockIdx.y*blockDim.y+threadIdx.y;         
        a[px*128+py]+=1;   
        matMul(px);

}  
  __device__ void matMul( int px) // implementation
{
  px=5; // by the way, this assignment does not propagate outside this function
} 
```

，或者只是将整个`matMul`功能移到之前`matAdd`。

# c# - 将 ComboBox 添加到特定行的 datagridview

> ID：11900502
> 
> 赞同：2
> 
> 时间：2012-08-10T11:13:55.357
> 
> 标签：c#, winforms, datagridview

我需要将下拉列表显示到几行中的一个特定行。我的 dataGridView 有 2 列（参数和值），我在代码中动态添加 3 行。对于所有 3 行，参数文本是固定的，用户不能修改。对于第一行，参数文本为“prm1”，将从下拉列表中选择值文本。其他 2 行，值文本将是用户输入的文本框。我尝试搜索但找不到答案。请在这里帮助我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-10T12:42:35.097

可以在运行时替换特定的 DataGridView 单元格 - 例如，在您想要一个单元格中的组合框的情况下，您可以有一个 DataGridViewTextBoxColumn 并替换第一行中的单元格。像这样的东西：

```
void dataGridView1_DataBindingComplete(object sender, DataGridViewBindingCompleteEventArgs e)
{
    List<Book> books = new List<Book>();
    books.Add(new Book { bookID = 1, bookName = "Test-Driven Development (Kent Beck)" });
    books.Add(new Book { bookID = 2, bookName = "Refactoring (Martin Fowler)" });
    books.Add(new Book { bookID = 3, bookName = "Code Complete: 2nd Edition (Steve McConnell)" });
    DataGridViewComboBoxCell c = new DataGridViewComboBoxCell();

    c.DataSource = books;
    c.Value = 1;
    c.ValueMember = "bookID";
    c.DisplayMember = "bookName";

    dataGridView1.Rows[0].Cells[0] = c;
} 
```

您也可以通过其他方式执行此操作，并将 DataGridViewComboBoxColumn 中的特定组合框单元格替换为 DataGridViewTextBoxCell。

* * *

不过有一件事 - 虽然这会起作用，但更好的可用性可能只是来自将一些组合框设置为只读。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T12:09:36.310

请考虑使用*Form Designer*中网格的右键单击上下文菜单项**Edit Columns...将***ComboBox*列添加到网格。要添加列，需要单击**Edit Columns对话框的****Add**按钮，然后选择*Type* = ，如下所示：********`DataGridViewComboBoxColumn`********

 ********![在此处输入图像描述](../Images/d83fd6afee9390b96aa37b5c23b5318f.png)

**请注意**：您还需要使用列的[Items](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridviewcomboboxcolumn.items.aspx)或[DataSource](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.datasource.aspx)属性来填充 ComboBox 的下拉列表。********

# hbase - 带有时间戳的 HBase Put 不起作用

> ID：11900504
> 
> 赞同：0
> 
> 时间：2012-08-10T11:14:02.283
> 
> 标签：hbase

我写了一个简单的测试程序来插入一行。与普通 HBase Put 示例程序的唯一不同点是 Put 实例及其 KeyValue 实例是使用时间戳创建的。

预期的行为是插入一行。但是，在我的 HBase 环境中，没有插入任何行。

下面是我的测试程序。

```
import java.io.*;
import java.util.*;
import org.apache.hadoop.conf.*;
import org.apache.hadoop.hbase.*;
import org.apache.hadoop.hbase.client.*;
import org.apache.hadoop.hbase.util.*;

public class Test
{
    // Names of table, family, qualifier and row ID.
    private static final byte[] TABLE     = Bytes.toBytes("test-table");
    private static final byte[] FAMILY    = Bytes.toBytes("test-family");
    private static final byte[] QUALIFIER = Bytes.toBytes("test-qualifier");
    private static final byte[] ROWID     = Bytes.toBytes("test-rowid");

    /**
     * The entry point of this program.
     *
     * <p>
     * This program assumes that there already exists an HBase
     * table named "test-table" with a column family named
     * "test-family". To create an HBase table satisfying these
     * conditions, type the following at the hbase shell prompt.
     * </p>
     *
     * <pre>
     * hbase&gt; create 'test-table', 'test-family'
     * </pre>
     *
     * <p>
     * This program inserts a row whose row ID is "test-rowid"
     * with a column named "test-family:test-qualifier". The
     * value of the column is the string expression of
     * <code>new Date()</code>.
     * </p>
     */
    public static void main(String[] args) throws Exception
    {
        // Get the table.
        Configuration conf = HBaseConfiguration.create();
        HTable table = new HTable(conf, TABLE);

        // Prepare data to put.
        byte[] value = Bytes.toBytes(new Date().toString());
        Put put = new Put(ROWID);
        put.add(FAMILY, QUALIFIER, value);

        // Clone Put with a timestamp.
        put = clone(put, 10);

        // Put the data.
        table.put(put);

        // Read back the data.
        Get get = new Get(ROWID);
        Result result = table.get(get);

        // Dump the read data.
        System.out.println("DATA = " + result.toString());
    }

    /**
     * Clone the given Put instance with the given timestamp.
     */
    private static Put clone(Put a, long timestamp) throws IOException
    {
        // Create a Put instance with the specified timestamp.
        Put b = new Put(a.getRow(), timestamp);

        Map<byte[], List<KeyValue>> kvs = a.getFamilyMap();

        // Copy KeyValue's from the source Put (a) to
        // the cloned Put (b). Note the given timestamp
        // is used for each new KeyValue instance.
        for (List<KeyValue> kvl : kvs.values())
        {
            for (KeyValue kv : kvl)
            {
                b.add(new KeyValue(
                    kv.getRow(),
                    kv.getFamily(),
                    kv.getQualifier(),
                    timestamp,
                    kv.getValue()));
            }
        }

        return b;
    }
} 
```

该程序生成的控制台输出如下。

```
DATA = keyvalues=NONE 
```

hbase shell 上的“扫描”显示“0 行”。

```
hbase(main):011:0> scan 'test-table'
ROW                                              COLUMN+CELL
0 row(s) in 0.0080 seconds 
```

注释掉代码行以克隆一个 Put 实例，如下所示，

```
 // Clone Put with a timestamp.
        //put = clone(put, 10); 
```

也就是说，使用不带时间戳参数创建的 Put 实例会改变程序的行为。在这种情况下，控制台输出显示插入的值，

```
DATA = keyvalues={test-rowid/test-family:test-qualifier/1344594210281/Put/vlen=28} 
```

“扫描”显示插入的行。

```
hbase(main):012:0> scan 'test-table'
ROW                                              COLUMN+CELL
 test-rowid                                      column=test-family:test-qualifier, timestamp=1344594210281, value=Fri Aug 10 19:23:30 JST 2012
1 row(s) in 0.0110 seconds 
```

在我的测试程序中使用时间戳克隆 Put 实例的逻辑是从一个已知可以工作的开源项目中摘录的。所以，我猜这个问题的根本原因存在于我的 HBase 环境中，但我不知道。我的调查可能不够充分，但我还没有在 HBase 日志中看到任何错误。

任何人都可以告诉我这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T04:11:00.060

时间戳列族和列名构成组合键。这里的时间戳是 UNIX 时间戳。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T01:12:33.420

KeyValueTestUtil.create 可以创建 KeyValue 对象，并将其设置为 Put

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-24T04:46:09.130

我不确定这会有所帮助，但是 - 我以前去过那里，所以，只是想帮助你调试你的逻辑。

我要确保的第一件事是您以前从未删除过该行。H-Base Delete 的工作方式是将墓碑标记放置在与当前时间戳相关的（ Row/KeyValue ）位置（除非您指定了另一个）。Soooo - 如果你在删除后拍了一个 Put，并且没有发生重大压缩，你将永远看不到你的 Put ...这是一个线程：[https ://issues.apache.org/jira/browse /HBASE-5241](https://issues.apache.org/jira/browse/HBASE-5241) - 在执行另一个测试周期之前，您可以尝试从该表上的 H-Base shell 执行“major_compact”。

..这是我的第一个猜测...它符合以下测试场景：在当前时间放置，执行扫描，断言放置操作有效（是的，它确实 - 是的！），然后，删除当前数据以重置托盘，执行下一个 用较小的时间戳放 - 执行扫描 - 刮头......

分手的想法 - Get 操作总是返回 KeyValue 的*最新*版本。所以...如果在您的测试中您执行一个时间戳为 T1 的 Put，然后您执行一个时间戳为 T2 且 T2 < T1 的 Put，那么，当您执行 Get 操作时，您将获得相关的值与 T1。这最初可能是违反直觉的，但是 - 一切都很好:)

希望里面的东西对你的旅程有所帮助......

# php - 按字母顺序对单词列表进行排序并按首字母过滤

> ID：11900507
> 
> 赞同：0
> 
> 时间：2012-08-10T11:14:23.100
> 
> 标签：php, mysql, sorting

我有这个问题，我不知道从哪里开始。
例如，我的数据库中有这个 [这只是示例数据库]

```
id  word
1   adore
2   and
3   apple
4   asore
5   banana
6   bate
7   beat
8   busy 
```

如何对其进行排序和过滤，以便仅查看以“A”开头的单词？

```
id  word
1   adore
2   and
3   apple
4   asore 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T11:16:44.583

您可以使用 SQL-LIKE-Statement。

SQL：`SELECT DISTINCT word FROM Table WHERE word LIKE 'A%'` 这只返回以 a 开头的单词。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T11:18:29.070

这比你想象的要简单得多。您可以使用[SQL LIKE 运算符](http://www.tutorialspoint.com/mysql/mysql-like-clause.htm)。

```
SELECT * FROM table WHERE word LIKE 'a%' ORDER BY word; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T11:19:19.000

```
select id, word 
from your_table
where word like 'a%'
order by id 
```

或者

```
select id, word 
from your_table
where substring(word, 1, 1) = 'a'
order by id 
```

# jquery - 用于 for 的 Jquery 回调

> ID：11900509
> 
> 赞同：1
> 
> 时间：2012-08-10T11:14:37.987
> 
> 标签：jquery, for-loop, callback

嗯 - 不确定这个。但是这里有:)

添加完所有 .instagram-placeholder 后，我想要一个回调。但是在哪里，如何？

```
success: function(data) {
    for (var i = 0; i < 30; i++) {
        $("#instaWrap").append("<div class='instagram-placeholder'><a target='_blank' href='" + data.data[i].link +"'><img class='instagram-image' src='" + data.data[i].images.thumbnail.url +"' /></a></div>");
        total += 1; 
    }; 
    $("#instaWrap").append('<div class="clear"></div>');
} 
```

非常感谢:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T11:27:44.197

一个简单的答案是：

```
success: function(data) {
    for (var i = 0; i < data.data.length; i++) {
        $("#instaWrap").append("<div class='instagram-placeholder'><a target='_blank' href='" + data.data[i].link +"'><img class='instagram-image' src='" + data.data[i].images.thumbnail.url +"' /></a></div>");
        total += 1; 
    }; 
    $("#instaWrap").append('<div class="clear"></div>');
    callback(); // just call the callback :)
} 
```

但是如果您想等到所有图像都加载完毕，您可以尝试这种方法：

```
success: function(data) {
    imagesLoaded = 0;
    imagesToLoad = data.data.length;
    $.each(data.data, function() {
        // Create the elements:
        var el = $("<div class='instagram-placeholder'><a target='_blank' href='" + this.link +"'><img class='instagram-image' src='" + this.images.thumbnail.url +"' /></a></div>");
        // Bind load and error event of the image
        $('img', el).bind('load error', function() {
            if (++imagesLoaded == imagesToLoad) {
                callback(); // all images have been loaded
            }
        });
        // Append the element to the DOM
        $("#instaWrap").append(el);
        total += 1;
    });
    $("#instaWrap").append('<div class="clear"></div>');
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T11:33:24.050

作为@WouterH 的插件：

为什么不使用数据数组来计算项目总数？如果*数据*列表中只有 28 个项目怎么办？你会出错。

```
for (var i = 0; i < data.count(); i++) { [...] } 
```

或者，即使是更短的版本，您也可以尝试以下任何操作：

```
$.each(data.data, function() {
    $("#instaWrap").append("<div class='instagram-placeholder'><a target='_blank' href='" + this.link +"'><img class='instagram-image' src='" + this.images.thumbnail.url +"' /></a></div>");
}); 
```

代码是直接从大脑编写的——这是一个例子。你可以尝试这样的任何事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T11:40:01.327

DOM 是一个同步 API，因此您不需要任何回调：元素会立即添加。

现在，如果您想等到所有图像都加载完毕，您可以使用恰当命名的`load`事件：

```
success: function(data) {
  var total = 0,
      loading = 0;

  for (var i = 0; i < 30; i++) {
    var img = $(<img>).addClass('instagram-image').attr('src', data.data[i].images.thumbnail.url);

    img.on('load error', function() {
      loading -= 1;

      if(loading === 0)
        allImagesLoaded();
    });

    $("#instaWrap").append(
      $('<div>').addClass('instagram-placeholder').append(
        $('<a>').attr('target', '_blank').attr('href', data.data[i].link).append(
          img
        )
      )
    );

    total += 1;
    loading += 1;
  }; 

  $("#instaWrap").append('<div class="clear"></div>');
} 
```

然而，正如[jQuery 的文档](http://api.jquery.com/load-event/)所说：

> 与图像一起使用时加载事件的注意事项
> 
> 开发人员尝试使用 .load() 快捷方式解决的一个常见挑战是在图像（或图像集合）完全加载时执行一个函数。应该注意几个已知的警告。这些是：
> 
> *   它不能始终如一地工作，也不能可靠地跨浏览器。
> *   如果图像 src 设置为与以前相同的 src，它不会在 WebKit 中正确触发
> *   它没有正确地冒泡 DOM 树
> *   可以停止对已经存在于浏览器缓存中的图像进行触发

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-10T11:28:36.817

正确的方法是使用[JQuery](http://api.jquery.com/jQuery.each/)或[Underscore](http://underscorejs.org/#each) each() 方法来迭代所有元素。

# javascript - 将两个表单内容提交到一个操作页面

> ID：11900510
> 
> 赞同：0
> 
> 时间：2012-08-10T11:14:43.877
> 
> 标签：javascript

我有两个表单要提交到一个目标页面。

```
<form name= "form1" id="form1" action="final.php">
<input type="box1" name="box1" value="" >
</form>

<form name ="form2" id="form2" action="final.php">
<table>
<input type ="text" id="txt_1"  name ="txt_1" value="">

 ...

</table>
</form>

<input type= "button" name="mybutton" id="mybutton" onclick="somefunction();"> 
```

这里 ，

form1 有一些 satic 内容

和

form2 有一个由 js 动态生成的表...问题是...我想将两个表单中的值提交到同一页面 final.php ...我是如何做到的 ...请避免使用 jquery/ ajax ... 欢迎使用简单的 javascript ...

提前致谢 ！

* * *

这是在form2中生成动态表格的js

```
<script type="text/javascript">

function viewsource() {
alert(document.body.innerHTML);
}
</script>
<script type="text/javascript">

function addRowToTable()
{
   var tbl = document.getElementById('tblSample');
   var frm=document.form2;
   if (!frm.ary) frm.ary=[frm.t1_1,frm.t1_2,frm.t1_3];
   var lastRow = tbl.rows.length;
   // if there's no header row in the table, then iteration = lastRow + 1
  var iteration = lastRow;
  var row = tbl.insertRow(lastRow);

   // numberd row
    var cellLeft = row.insertCell(0);
    var textNode = document.createTextNode(iteration);
    cellLeft.appendChild(textNode);

    // Item row
     var cellRight1 = row.insertCell(1);
     var el1 = document.createElement('input');
     frm.ary.push(el1);
     el1.type = 'text';
     el1.value = '';
     el1.name = 't' + iteration + '_1';
     el1.id = 't' + iteration + '_1';
     el1.size = 13;
     el1.onkeyup=Calc;
     el1.onblur=Calc;
     cellRight1.appendChild(el1);

  // Price row
    var cellRight2 = row.insertCell(2);
       var el2 = document.createElement('input');
    frm.ary.push(el2);
     el2.type = 'text';
     el2.value = '';
    el2.name = 't' + iteration + '_2';
    el2.id = 't' + iteration + '_2';
    el2.size = 10;
    el2.onkeyup=Calc;
    el2.onblur=Calc;
    cellRight2.appendChild(el2);

    // Price row
    var cellRight3 = row.insertCell(3);
    var el3 = document.createElement('input');
    frm.ary.push(el3);
    el3.type = 'text';
    el3.value = '0';
    el3.name = 't' + iteration + '_3';
    el3.id = 't' + iteration + '_3';
    el3.size = 10;
    cellRight3.appendChild(el3);

  }

  function removeRowFromTable()
  {
      var tbl = document.getElementById('tblSample');
      var lastRow = tbl.rows.length;
     if (lastRow > 3) tbl.deleteRow(lastRow - 1);
  }

   function formReset()
    {
      document.getElementById("form2").reset();
     }
  </script>

  <script type="text/javascript">

    function Calc(){
   var frm=document.form2;
    if (!frm.ary){ frm.ary=[frm.t1_1,frm.t1_2,frm.t1_3];}
       for (var zxc0=0;zxc0<frm.ary.length;zxc0+=3)
     {
      var total =1;
     if (frm.ary[zxc0].value.length>0&&!isNaN(frm.ary[zxc0].value)) 
     { 
     total =frm.ary[zxc0].value*1* frm.ary[zxc0+1].value;
     }
      frm.ary[zxc0+2].value =total;

      }
     var sum1 =0;
     for (var zxd0=0;zxd0<frm.ary.length;zxd0+=3)
     {
       if (frm.ary[zxd0+2].value.length>0&&!isNaN(frm.ary[zxd0+2].value)) 
    { 
    sum1 +=parseInt(frm.ary[zxd0+2].value);
       }
      }
      frm.sum.value = sum1;
     }

    </script>

   <form action="final.php" method="post" name="form2" id="form2">
    <imput type ="text" name ="temp" id="temp" >
   <table border="2"  border-color="#000000" border-type="solid" id="tblSample"            
   align="center" font-size="20">
    <tr>
    <th>
     <input type="button" value="Add " onclick="addRowToTable();"></th><th>
     <input  type="button" value="Remove " onclick="removeRowFromTable();" /></th>
    <th> <input type="button" value="Reset" onclick="formReset();">
   </th>

    </tr><br>

      <tr id="cloneid" >
         <td>
         1.
       </td>
        <td>
    <input type="text" name="t1_1" id="t1_1" size="16" value="0" onkeyup="Calc();"   
      onblur="Calc();">
      </td>
     <td>
      <input type="text" name="t1_2" id="t1_2" size="16" value="0" onkeyup="Calc();"    
     onblur="Calc();">
     </td>
    <td>
      <input type="text" name="t1_3" id="t1_3" value= "0" size="16">
       </td>

   </tr>
      </table>
    <table border="2" border-color="#000000" align="center">
 <tr>
   <td colspan="3" align="center">
  Sum: <input type="text" name="sum" id="sum">
  </td>

   </tr>
    </table>
  </form>

 <input type="button" name = "mybutton" id ="mybutton"  value="set"  
     onclick="somefunction();">

     } 
```

和

form1 与提到的相同，包括用于 datetimepickers 的 jquery 以及几个文本框......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T12:01:56.653

你可以使用Java脚本

```
function button1click() {
  yourForm.action = "Final.php";
  yourForm.submit();
} 
```

HTML 中的 n

```
<form action='' method='post'>
  ..
</form> 
```

# xquery - XQuery 如何使用 WHERE 查询获取整个 xml 文档

> ID：11900512
> 
> 赞同：0
> 
> 时间：2012-08-10T11:14:43.393
> 
> 标签：xquery, berkeley-db-xml

我的 XML 数据库只有一个集合（容器），但我不知道文档名称。如何从符合 WHERE 子句的 db 中获取整个 XML 文档？

```
<root>
      <node1>
            <node2>
                   <node3>My Content</node2>
            </node2>
      </node1>
<root> 
```

当我有疑问时

```
query 'collection("data1.dbxml")/root/node1/node2[node3 = "My Content"]/string()' 
```

它从那个node3返回一个内容

```
'My Content' 
```

和

```
query 'collection("data1.dbxml")/root/ode1/node2/node3' 
```

它返回 2 个包含内容的内部节点

```
<node2><node3>My Content</node3></node2> 
```

但是如何获得符合这个 WHERE 子句的整个文档（比如 SELECT * FROM data2.dbxml WHERE node3='My Content'？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T12:34:39.907

只需像在第一个示例中那样使用谓词：

```
 collection("data1.dbxml")/root[node1/node2/node3 = "My Content"] 
```

您可以将 XQuery 中的谓词视为 SQL 中的 WHERE，而 SELECT 部分则是之前的一切。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T13:28:13.423

另一个决议......学习后:)

```
query 'for $x in collection("data1.dbxml") 
       where $x/root/node1/node2/node3 = "My Content"
       return $x' 
```

或者当我们知道 XMLdoc 中节点的深度和节点的名称时

```
query 'for $x in collection("data1.dbxml") 
       where $x/*/*/*/node3 = "My Content"
       return $x' 
```

感谢[W3Schools](http://www.w3schools.com/xquery/xquery_select.asp)

# android - android sqlite 数据库光标

> ID：11900513
> 
> 赞同：0
> 
> 时间：2012-08-10T11:14:50.057
> 
> 标签：android, database, sqlite

我有一个 android 应用程序，它有一个小型数据库作为资产文件夹中的 db 文件。该文件名为nametoareamap.db。它有一个名为“map”的表。该表有两列（名称和区域），如下所示：

```
Names       Areas

Aaron        A

Chris        A 

Helen        B 

Tim          B 
```

我的应用程序将名称作为用户的输入。假设某个用户有输入：Aaron、Tim。在这种情况下，就名称而言，与数据库有两个匹配项。但他们来自不同的领域。A 的 Aaron 和 B 的 Tim。我想实现以下逻辑。

```
If match > = 2 && the area of the matches are same

{ i take a decision}

else

 {i decide something else } 
```

谁能给我提供在 Android 上使用光标和 sqlite 数据库执行此操作所需的代码。我已经有一个数据库适配器。在此先感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T12:54:34.653

假设以下表格布局

```
CREATE TABLE name_area (
    _id INTEGER PRIMARY KEY NOT NULL,
    name TEXT NOT NULL,
    area TEXT NOT NULL,
    UNIQUE(name, area)
) 
```

以及以下值

```
name      area
----      ----
Aaron     A
Chris     A
Bunny     A
Ron       A
Burgundy  B
Helen     B 
Tim       B 
```

假设您想知道 Aaron、Ron 和 Burgundy 是否都在同一个区域：

```
SELECT COUNT(*), area FROM name_area 
    WHERE name='Aaron' OR name='Ron' OR name='Burgundy' GROUP BY area 
```

这将返回两行。

```
2   A
1   B 
```

即其中两个在同一区域（A），一个在另一个（B）：

表示为`Cursor`你可以这样检查：

```
Cursor cursor = ...; // Format your query & do the SELECT
try {
    if (cursor.moveToNext()) {
        int count = cursor.getCount();
        if (count < 2) {
            // Everyone is in the same area
            int n = cursor.getInt(0);
            // Now verify 'n' against the number of people you queried for
            // if it doesn't match one or more didn't exist in your table.
        } else {
            // People are in different areas
            int n = 0;
            do {
               n += cursor.getInt(0);
            } while (cursor.moveToNext());
            // Now verify 'n' against the number of people you queried for
            // if it doesn't match one or more didn't exist in your table.
        }
    } else {
        // Oops nothing was found.
    }
} finally {
    cursor.close();
} 
```

# mysql - 如果字段不包含子值，则更新

> ID：11900519
> 
> 赞同：0
> 
> 时间：2012-08-10T11:15:07.883
> 
> 标签：mysql

我记录访问者的IP地址并将其存储到mysql数据库中。如果访问者获得了不同的 ip，它也会更新记录。我使用以下代码进行更新，以下示例中的值仅用于测试。

```
insert into visiter_info values ('1344594088179','0','100.100.100.100','china','300x600','IOS','firefox','')
                    ON DUPLICATE KEY UPDATE 
                    ip_address=concat(ip_address,'|','100.100.100.100'),
                    location=concat(location,'|','china'),
                    screen_res=concat(screen_res,'|','300x600'),
                    os=concat(os,'|','IOS'),
                    brower=concat(brower,'|','firefox') 
```

它可以工作，但是现在问题来了，我如何检查数据库中是否有记录？像这样：访客又来了，ip 100.100.100.100。mysql不知道有记录，会重新记录。如何在插入之前检查是否包含子字符串？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T11:20:42.047

```
 if not exists(select * from visiter_info where ip_address='100.100.100.100')
    insert into visiter_info values ('1344594088179','0','100.100.100.100','china','300x600','IOS','firefox','') 
ON DUPLICATE KEY UPDATE  
        ip_address=concat(ip_address,'|','100.100.100.100'), 
        location=concat(location,'|','china'), 
        screen_res=concat(screen_res,'|','300x600'), 
        os=concat(os,'|','IOS'), 
        brower=concat(brower,'|','firefox') 
```

# c# - 从xmlDoc中删除节点，如何删除父节点？

> ID：11900521
> 
> 赞同：0
> 
> 时间：2012-08-10T11:15:16.383
> 
> 标签：c#, xml, c#-2.0

我有一个 xmlDoc，这是其中的一部分：

```
<Main>
<Set>
    <MId>1</MId>
    <RName>
        <MetaData>
            <PrdctName>
                Test 1
            </PrdctName>
        </MetaData>
    </RName>
</Set>  
<Set>
    <MId>1</MId>
    <RName>
        <MetaData>
            <PrdctName>
                Test 2
            </PrdctName>
        </MetaData>
    </RName>
</Set>
<Set>
    <MId>1</MId>
    <RName>
        <MetaData>
            <PrdctName>
                Test 3
            </PrdctName>
        </MetaData>
    </RName>
</Set>
<Set>
    <MId>2</MId>
    <RName>
        <MetaData>
            <PrdctName>
                Test 1
            </PrdctName>
        </MetaData>
    </RName>
</Set>
</Main> 
```

通过选择一个prdctName，必须从xmlDoc 中删除其余部分。例如，如果我选择“测试 1”，结果必须是：

```
<Main>
<Set>
    <MId>1</MId>
    <RName>
        <MetaData>
            <PrdctName>
                Test 1
            </PrdctName>
        </MetaData>
    </RName>
</Set>  
<Set>
    <MId>2</MId>
    <RName>
        <MetaData>
            <PrdctName>
                Test 1
            </PrdctName>
        </MetaData>
    </RName>
</Set>
</Main> 
```

问题是我不知道如何删除标签。因此，删除后的 xml 现在看起来像：

```
<Main>
<Set>
    <MId>1</MId>
    <RName>
        <MetaData>
            <PrdctName>
                Test 1
            </PrdctName>
        </MetaData>
    </RName>
</Set>
<Set/>
<Set/>
<Set>
    <MId>2</MId>
    <RName>
        <MetaData>
            <PrdctName>
                Test 1
            </PrdctName>
        </MetaData>
    </RName>
</Set>
</Main> 
```

我还必须编写哪个代码才能删除标签？

这是我现在使用的代码的一部分：

```
foreach (XmlNode chkNode in nodes)
{                
            string currentName = "Test 1";
            if (!nameDict.ContainsKey(currentName))                                    
                    chkNode.ParentNode.RemoveAll();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T11:40:17.747

我认为您的问题是`XmlNode.RemoveAll()`唯一删除节点的子节点，并且 `chkNode.ParentNode`属性是选择带有`<Set>`标签的节点。因此，当您删除所有子节点时，您会留下一个空`<Set/>`节点。您还需要能够删除该特定节点。

要调整现有方法，您需要执行以下操作：

```
foreach (XmlNode chkNode in nodes)
{                
    string currentName = "Test 1";
    if (!nameDict.ContainsKey(currentName))
    {
        XmlNode parent = chkNode.ParentNode;
        parent.ParentNode.RemoveChild(parent);
    }
} 
```

`nameDict`当然，我不能按原样测试这个，因为我不确定到底是什么`nodes`。

为了完整起见，如果不能有父节点（例如 Attribute、Document、DocumentFragment、Entity、Notation 节点），此代码`chkNode`将`chkNode.ParentNode`中断`XmlNodes`。如果您认为这是一种可能的情况，您可能希望包含适当的空检查或将此方法包装在`try-catch`

就像是：

```
XmlNode parent = chkNode.ParentNode;
if (parent != null && parent.ParentNode != null)
    parent.ParentNode.RemoveChild(parent); 
```

或者：

```
try
{
    XmlNode parent = chkNode.ParentNode;
    parent.ParentNode.RemoveChild(parent);
}
catch (NullReferenceException ex)
{
    // do something with exception
} 
```

LINQ 有几个选项可以以更好的方式完成您想要的，但由于您使用的是 C#2.0，因此该解决方案应该让您朝着正确的方向前进。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T11:31:17.037

它可以在 linq to xml 和 xpath 的帮助下完成。在下面找到示例：

```
 var xdocument = XDocument.Parse(xml)
    xdocument.Document.Root.Elements()
   .Where(element 
       => !element.XPathSelectElement("RName/MetaData/PrdctName").Value.Contains("Test 1"))
   .Remove();
   // saving results...
   xdocument.Save("somewhere.xml"); 
```

附言

检查包含不太好，`Value.Contains("Test 1")`但在这里看不到任何其他解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-07-12T13:04:15.563

你可以试试这样..

1）读取标签并使用内部xml复制所有子节点。

2) 现在转到 MainParents 的根节点。

3) 现在用您在第一步中读取的 xml 字符串替换内部 xml 字符串。

# c# - 从包含 24 小时格式时间的字符串转换为时间 12 小时格式

> ID：11900525
> 
> 赞同：5
> 
> 时间：2012-08-10T11:15:47.070
> 
> 标签：c#, sql, sql-server

我在表格中有一个`varchar(5)`列，其中包含 24 小时格式时间的小时和分钟。我想将此 24 小时格式转换为 12 小时格式，最后将此 12 小时格式时间与日期值一起嵌入到 DateTime 变量中。下面是一个演示示例。

例如

> 8:18 应转换为 8:18:00 AM，然后应嵌入日期，例如 8/10/2012 8:18:50 AM，以便能够存储在 DB 的 DateTime 列中。

```
22:20......10:20:00 PM.......8/10/2012 10:20:00 PM 
```

日期不会是当前日期，它可以是任何日期值，例如 2012 年 8 月 8 日或 2012 年 7 月 8 日

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-10T11:31:32.350

你可以这样做：

```
string input = "22:45";

var timeFromInput = DateTime.ParseExact(input, "H:m", null, DateTimeStyles.None);

string timeIn12HourFormatForDisplay = timeFromInput.ToString(
    "hh:mm:ss tt", 
    CultureInfo.InvariantCulture);

var timeInTodayDate = DateTime.Today.Add(timeFromInput.TimeOfDay); 
```

现在要考虑的重要部分：

*   解析格式使用`"H:m"`，因此它假定一个 24H 值，不使用零作为单个数字小时或分钟的前缀；
*   使用打印格式是`"hh:mm:ss tt"`因为它似乎是您想要的格式，但是您需要使用`CultureInfo.InvariantCulture`以确保您获得的 AM/PM 指示符实际上是 AM 或 PM。如果您使用另一种文化，AM/PM 指示符可能会改变；
*   完整的日期和时间是基于`DateTime.Today`返回带有零时间的今天日期构造的，然后我们只需添加从输入中读取的时间。

要从另一个日期创建最终日期和时间，您可以改用：

```
var timeInAnotherDate = new DateTime(2000, 1, 1).Add(timeFromInput.TimeOfDay); 
```

* * *

参考资料：

*   [日期时间结构](http://msdn.microsoft.com/en-us/library/system.datetime.aspx)；
*   [自定义日期和时间格式字符串](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)；
*   [标准日期时间格式字符串](http://msdn.microsoft.com/en-us/library/az4se3k1%28VS.71%29.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T11:28:48.927

```
create function dbo.COMBINE_DATE_TIME(
  @DatePart DateTime,                 -- DateTime
  @TimePart varchar(5))               -- Time
  returns DateTime
as begin
  return DATEADD(day, DATEDIFF(day,0,@DatePart), 
    CONVERT(DateTime,ISNULL(@TimePart,''),14))
end
go 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T11:28:59.363

```
string strDate = DateTime.ParseExact("8:18","HHmm",CultureInfo.CurrentCulture).ToString("hh:mm tt"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-07-16T13:34:05.473

```
 string fromTime = Convert.ToStr(reader["TimeFrom"]);
            string toTime = Convert.ToStr(reader["TimeTo"]);
            item.Time=DateTime.Parse(fromTime,CultureInfo.CurrentCulture).ToString("hh:mm tt"); 
```

在这里，您的模型的属性（此处为 item.Time）应该是字符串。

# java - Java 虚拟堆空间

> ID：11900528
> 
> 赞同：1
> 
> 时间：2012-08-10T11:16:01.620
> 
> 标签：java, memory, heap-memory, virtual-memory

我的应用程序具有生成 images(jpg) 的功能，它使用大量堆空间（主机服务器上允许的更多空间）。他们有什么办法可以让它使用更少的堆内存。我的意思是，就像我们的计算机在 RAM 已满时使用虚拟内存一样。他们有没有办法让java使用外部内存作为虚拟堆空间？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T11:20:52.540

从技术上讲，没有。这取决于操作系统（查看 Michael Wiles 的回答）。

从广义上讲，是的：一旦您生成 JPG 并且不再**立即**使用它，请将其写入磁盘并销毁代表它的对象（保存其数据）。这会更慢，但会使用更少的 RAM。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T11:20:40.757

只需使用 -Xmx4g 或其他东西运行 java 应用程序。这将允许 java vm 使用 4 gigs 的 ram，而不管系统有多少 ram。当 java VM 请求的内存超过可用 RAM 时，主机操作系统将提供内存作为虚拟内存。

# sql - 获取多个加入的最新日期

> ID：11900533
> 
> 赞同：1
> 
> 时间：2012-08-10T11:16:34.437
> 
> 标签：sql, join, group-by, sql-order-by

我正在努力解决这个问题，即使 Stack Overflow 上有一些类似的问题，我也找不到正确的解决方案。我有三个表格：我想在哪里加入它们并显示每个类别`categories, topics`以及其中发布的最新主题的主题，最后是表格中发布该帖子的最新日期。`posts``categories``topics``posts`

除了我无法从每个类别中获取最新的帖子记录外，我成功地让所有内容都按我想要的方式显示。

这是查询：

```
SELECT c.cat_id, c.cat_name, c.cat_description, t.topic_subject, t.topic_id, p.post_date FROM categories c 
LEFT JOIN topics t ON c.cat_id = t.topic_cat 
LEFT JOIN posts p ON p.post_topic = t.topic_id AND p.post_date = ( SELECT MAX(post_date) as post_date FROM posts WHERE post_topic = t.topic_id ) 
GROUP BY c.cat_id ORDER BY UNIX_TIMESTAMP(post_date) DESC 
```

我意识到这应该与`topic_id`子句`WHERE`中的不是我正在寻找的那个有关。另一个这样的：

```
SELECT c.cat_id, c.cat_name, c.cat_description, t.topic_subject, t.topic_id, p.post_date FROM categories c 
LEFT JOIN topics t ON c.cat_id = t.topic_cat AND t.topic_id = ( SELECT post_topic FROM posts ORDER BY UNIX_TIMESTAMP(post_date) DESC LIMIT 1 ) 
LEFT JOIN posts p ON p.post_topic = t.topic_id AND p.post_date = ( SELECT MAX(post_date) as post_date FROM posts WHERE post_topic = t.topic_id ) 
GROUP BY c.cat_id ORDER BY UNIX_TIMESTAMP(post_date) DESC 
```

显然只会显示包含最新帖子的类别的正确帖子。如何获取所有类别的最新帖子？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T12:35:37.623

```
SELECT c.cat_id, c.cat_name, c.cat_description, tp.topic_subject, tp.topic_id, tp.maxPostDate
FROM categories c 

LEFT JOIN (select t.topic_cat,t.topic_subject,t.topic_id, max(post_date) maxPostDate  from topics t
           LEFT JOIN posts p ON p.post_topic = t.topic_id
           group by t.topic_cat,t.topic_subject,t.topic_id) tp
on (c.cat_id=tp.topic_cat)

where tp.maxPostDate = (select max(post_date) from topics t2
                       LEFT JOIN posts p2 ON p2.post_topic = t2.topic_id
                       where t2.topic_cat=c.cat_id
                       )

ORDER BY UNIX_TIMESTAMP(tp.maxPostDate) DESC 
```

注意：如果该查询有 2 个不同主题且最大发布日期相同，则该查询可以为一个类别输出例如 2 行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T12:16:20.113

首先：在您的 Select 查询中，您必须对未包含在 GROUP BY 子句中的字段使用一些聚合函数。

现在。要获得每个类别的最大时间戳的帖子，您必须进行两步查询。在第一步中，您将获得类别的最大时间戳，然后是所有其他字段。是的，我们将使用 cat_id + timestamp 作为主键。它可以为相同的 cat_id 提供一些重复的记录，但在实时情况下会非常奇怪。

代码将类似于：

```
SELECT c.cat_id, MAX( p.post_date ) as max_date
into #tmp_table
FROM categories c 
    LEFT JOIN topics t ON c.cat_id = t.topic_cat 
    LEFT JOIN posts p ON p.post_topic = t.topic_id 
GROUP BY c.cat_id 

SELECT * -- what you'll need
from #tmp_table as tmp
    LEFT JOIN categories as c on c.cat_id = tmp.cad_id
    LEFT JOIN topics t ON c.cat_id = t.topic_cat 
    LEFT JOIN posts p ON p.post_topic = t.topic_id AND p.post_date = tmp.max_date
-- order by -- what you'll need 
```

这是一个解决方案，更好的解决方案可能会很好。

# mysql - mysql - 低级通信

> ID：11900537
> 
> 赞同：0
> 
> 时间：2012-08-10T11:16:50.697
> 
> 标签：mysql, cursor, protocols, connector

[http://dev.mysql.com/doc/internals/en/execute-packet.html](http://dev.mysql.com/doc/internals/en/execute-packet.html)

在此页面中，我发现在 MySQL 5.0.0 中存在游标类型：

0：CURSOR_TYPE_NO_CURSOR 1：CURSOR_TYPE_READ_ONLY 2：CURSOR_TYPE_FOR_UPDATE 4：CURSOR_TYPE_SCROLLABLE

但是，如果定义了游标，我没有找到一种方法（我的意思是在低级通信中）发送查询或命令以跳过行或在行列表中向后移动。

这是为了做类似 mysql 连接器的事情。

提前致谢

# jquery - 更改 div 以选择输入

> ID：11900538
> 
> 赞同：-1
> 
> 时间：2012-08-10T11:16:53.123
> 
> 标签：jquery

我有 2 个 Div 标签集如下

```
<div id="sortlocation" class="facetsearch">
    <div class="facetlist">
       <div id="facet_20" class="facetitem">Adambakkam <span class="facetitemcount">(15)</span></div>
       <div id="facet_12" class="facetitem">Ambattur <span class="facetitemcount">(59)</span></div>
       <div id="facet_17" class="facetitem">Anna Nagar <span class="facetitemcount">(18)</span></div>
    </div>
</div> 
```

​</p>

我需要将 id 为 newpar 的 div 转换为下拉菜单（选择菜单）。那可能吗...

看到这个我举了一个例子，我需要[jsfiddle.net/varunms/WXK7S/5](http://jsfiddle.net/varunms/WXK7S/5)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T11:20:16.680

像这样的东西？

```
var s = $('<select />');
$('.facetlist .facetitem').each(function() {
   $('<option />', { 
       id: $(this).attr('id'), 
       'class': $(this).attr('class') 
   }).html($(this).text()).appendTo(s);
});
s.appendTo('body'); 
```

[演示](http://jsfiddle.net/QzPrJ/)

当然，以上只是演示如何创建。要正确替换，请使用 jQuery`replaceWith`

```
$('.facetlist').replaceWith(s); 
```

[演示](http://jsfiddle.net/QzPrJ/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T11:28:29.970

是的，有可能。

这有两个部分： 1\. 从 div 中获取选项 这可以通过 documnet.getElementsByClassName 完成。然后你可以很容易地访问每个 div 的内部。

1.  创建选择框您可以制作一个 HTML 字符串（恶心）或执行以下操作：http: [//supunk.blogspot.com/2009/01/creating-select-list-using-javascript.html](http://supunk.blogspot.com/2009/01/creating-select-list-using-javascript.html)

2.  将选择框放在您需要的地方如果您选择 HTML 字符串版本，您可以设置 sortlocation div 的 innerHTML

# ios - 如何在单击 ios 单元格上的按钮时添加和删除表格单元格

> ID：11900539
> 
> 赞同：0
> 
> 时间：2012-08-10T11:16:53.483
> 
> 标签：ios

我想在表格单元格中添加 2 个按钮，一个用于 +，一个用于 -，单击 + 按钮时，我想添加另一个包含相同 + 和 - 按钮的表格视图单元格，并且单击减号时，我想删除最后一个表格视图的单元格怎么办？？？？

# c# - C#如何确定程序集是否正在运行，因此它不能被打开重复？

> ID：11900541
> 
> 赞同：0
> 
> 时间：2012-08-10T11:17:05.497
> 
> 标签：c#, duplicates

> **可能重复：**
> [防止 .NET 中给定应用程序的多个实例？](https://stackoverflow.com/questions/93989/prevent-multiple-instances-of-a-given-app-in-net)
> [如何强制执行我的应用程序的单个实例？](https://stackoverflow.com/questions/8856441/how-can-i-enforce-a-single-instance-of-my-application)

我有一个源代码，然后编译到 App.exe 文件。我想如果 App.exe 正在运行，然后有人再次打开它，它知道它正在运行并自动关闭。有没有办法做到这一点？

**编辑：我想要一个插入 App.exe 源的代码

窗口形式**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T11:20:07.033

您想使用互斥锁，如下所示：

```
bool bIsSingleInstance;
using (new Mutex(true, Assembly.GetExecutingAssembly().GetName().Name, out bIsSingleInstance)) {
    if (bIsSingleInstance) {
        // START APP HERE.
    }
} 
```

请注意，如果您的 winforms 没有在评论块中阻止，则不得使用“使用” *。*

# android - 如何将android活动调用到phonegap html中？

> ID：11900544
> 
> 赞同：1
> 
> 时间：2012-08-10T11:17:08.960
> 
> 标签：android, cordova

我最近开始研究phonegap，我遇到了一个任务，我需要从android mobile浏览文件并显示所选文件的路径。我已经在phonegap中进行了很多搜索以实现这一目标，但我看到的所有示例都能够从手机图库中搜索和上传图片，但我想从手机中选择任何类型的文件。我听说我们可以将 android 本机代码调用到 phonegap html 中，所以我使用本机代码实现了我的功能，这里是我的 Activity 类：

MainActivity.java

```
public class MainActivity extends Activity implements OnClickListener {

private static final int REQUEST_PICK_FILE = 1;

private TextView mFilePathTextView;
private Button mStartActivityButton;
private File selectedFile;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    mFilePathTextView = (TextView)findViewById(R.id.file_path_text_view);
    mStartActivityButton = (Button)findViewById(R.id.start_file_picker_button);
    mStartActivityButton.setOnClickListener(this);      
}

public void onClick(View v) {
    switch(v.getId()) {
    case R.id.start_file_picker_button:
        Intent intent = new Intent(this, FilePickerActivity.class);
        startActivityForResult(intent, REQUEST_PICK_FILE);
        break;
    }
}

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    if(resultCode == RESULT_OK) {
        switch(requestCode) {
        case REQUEST_PICK_FILE:
            if(data.hasExtra(FilePickerActivity.EXTRA_FILE_PATH)) {
                selectedFile = new File(data.getStringExtra(FilePickerActivity.EXTRA_FILE_PATH));
                mFilePathTextView.setText(selectedFile.getPath());  

            }
        }
    }
} 
```

FilePickerActivity.java

```
public class FilePickerActivity extends ListActivity {

public final static String EXTRA_FILE_PATH = "file_path";
public final static String EXTRA_SHOW_HIDDEN_FILES = "show_hidden_files";
public final static String EXTRA_ACCEPTED_FILE_EXTENSIONS = "accepted_file_extensions";
private final static String DEFAULT_INITIAL_DIRECTORY = "/";

protected File mDirectory;
protected ArrayList<File> mFiles;
protected FilePickerListAdapter mAdapter;
protected boolean mShowHiddenFiles = false;
protected String[] acceptedFileExtensions;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    LayoutInflater inflator = (LayoutInflater)getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    View emptyView = inflator.inflate(R.layout.file_picker_empty_view, null);
    ((ViewGroup)getListView().getParent()).addView(emptyView);
    getListView().setEmptyView(emptyView);

    mDirectory = new File(DEFAULT_INITIAL_DIRECTORY);

    mFiles = new ArrayList<File>();

    mAdapter = new FilePickerListAdapter(this, mFiles);
    setListAdapter(mAdapter);

    acceptedFileExtensions = new String[] {};

    if(getIntent().hasExtra(EXTRA_FILE_PATH)) {
        mDirectory = new File(getIntent().getStringExtra(EXTRA_FILE_PATH));
    }
    if(getIntent().hasExtra(EXTRA_SHOW_HIDDEN_FILES)) {
        mShowHiddenFiles = getIntent().getBooleanExtra(EXTRA_SHOW_HIDDEN_FILES, false);
    }
    if(getIntent().hasExtra(EXTRA_ACCEPTED_FILE_EXTENSIONS)) {
        ArrayList<String> collection = getIntent().getStringArrayListExtra(EXTRA_ACCEPTED_FILE_EXTENSIONS);
        acceptedFileExtensions = (String[]) collection.toArray(new String[collection.size()]);
    }
}

@Override
protected void onResume() {
    refreshFilesList();
    super.onResume();
}

protected void refreshFilesList() {
    mFiles.clear();

   ExtensionFilenameFilter filter = new ExtensionFilenameFilter(acceptedFileExtensions);

    File[] files = mDirectory.listFiles(filter);
    if(files != null && files.length > 0) {
        for(File f : files) {
            if(f.isHidden() && !mShowHiddenFiles) {
                continue;
            }

            mFiles.add(f);
        }

        Collections.sort(mFiles, new FileComparator());
    }
    mAdapter.notifyDataSetChanged();
}

@Override
public void onBackPressed() {
    if(mDirectory.getParentFile() != null) {
        mDirectory = mDirectory.getParentFile();
        refreshFilesList();
        return;
    }

    super.onBackPressed();
}

@Override
protected void onListItemClick(ListView l, View v, int position, long id) {
    File newFile = (File)l.getItemAtPosition(position);

    if(newFile.isFile()) {
        Intent extra = new Intent();
        extra.putExtra(EXTRA_FILE_PATH, newFile.getAbsolutePath());
        setResult(RESULT_OK, extra);
         finish();
    } else {
        mDirectory = newFile;
        refreshFilesList();
    }

    super.onListItemClick(l, v, position, id);
}

private class FilePickerListAdapter extends ArrayAdapter<File> {

    private List<File> mObjects;

    public FilePickerListAdapter(Context context, List<File> objects) {
        super(context, R.layout.file_picker_list_item, android.R.id.text1, objects);
        mObjects = objects;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {

        View row = null;

        if(convertView == null) { 
            LayoutInflater inflater = (LayoutInflater)getContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            row = inflater.inflate(R.layout.file_picker_list_item, parent, false);
        } else {
            row = convertView;
        }

        File object = mObjects.get(position);

        ImageView imageView = (ImageView)row.findViewById(R.id.file_picker_image);
        TextView textView = (TextView)row.findViewById(R.id.file_picker_text);
        textView.setSingleLine(true);

        textView.setText(object.getName());
        if(object.isFile()) {
            imageView.setImageResource(R.drawable.file);
        } else {
            imageView.setImageResource(R.drawable.folder);
        }

        return row;
    }

}

private class FileComparator implements Comparator<File> {
    public int compare(File f1, File f2) {
        if(f1 == f2) {
            return 0;
        }
        if(f1.isDirectory() && f2.isFile()) {
            return -1;
        }
        if(f1.isFile() && f2.isDirectory()) {
             return 1;
        }
        return f1.getName().compareToIgnoreCase(f2.getName());
    }
}

private class ExtensionFilenameFilter implements FilenameFilter {
    private String[] mExtensions;

    public ExtensionFilenameFilter(String[] extensions) {
        super();
        mExtensions = extensions;
    }

    public boolean accept(File dir, String filename) {
        if(new File(dir, filename).isDirectory()) {
            return true;
        }
        if(mExtensions != null && mExtensions.length > 0) {
            for(int i = 0; i < mExtensions.length; i++) {
                if(filename.endsWith(mExtensions[i])) {
                    return true;
                }
            }
            return false;
        }
        return true;
    }
} 
```

现在我想在 phonegap html 中使用这些活动。我已经从这些站点 [site1](http://smus.com/android-phonegap-plugins/) [site2 site3 中看到了一些](https://github.com/phonegap/phonegap-plugins/tree/master/Android) [示例](https://stackoverflow.com/questions/2727763/communication-between-android-java-and-phonegap-javascrip)，但无法了解如何在其中使用我的活动类。谁能帮助我如何在phonegap中调用我的上述2个活动课程？我希望我的问题很清楚。

这是我的xml：

主要的.xml

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
       android:orientation="vertical"
       android:layout_width="fill_parent"
       android:layout_height="fill_parent"
       android:gravity="top">
<Button android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:id="@+id/start_file_picker_button"
    android:text="Browse" />
<TextView
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="Selected file"
    android:textStyle="bold"
    android:textColor="#0f894a"
    android:textSize="24sp" />
<TextView
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:id="@+id/file_path_text_view"
    android:text="No file has been selected"
    android:textSize="28sp" />
</LinearLayout> 
```

文件视图.xml：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="?android:attr/listPreferredItemHeight"

android:padding="6dip">

<ImageView
    android:id="@+id/icon"

    android:layout_width="wrap_content"
    android:layout_height="fill_parent"
    android:layout_marginRight="6dip"

    android:src="@drawable/ic_launcher" />

<LinearLayout
    android:orientation="vertical"

    android:layout_width="0dip"
    android:layout_weight="1"
    android:layout_height="fill_parent">

    <TextView
        android:layout_width="fill_parent"
        android:layout_height="0dip"
        android:layout_weight="1"

        android:gravity="center_vertical"
        android:text="My Application" />

    <TextView  
        android:layout_width="fill_parent"
        android:layout_height="0dip"
        android:layout_weight="1" 

        android:singleLine="true"
        android:ellipsize="marquee"
        android:text="Simple application that shows how to use RelativeLayout" />

</LinearLayout> 
```

file_picker_list_item.xml：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
       android:layout_width="fill_parent"
       android:layout_height="wrap_content"
       android:orientation="horizontal" >
<ImageView
  android:id="@+id/file_picker_image"
  android:layout_width="40dip"
  android:layout_height="40dip"
  android:layout_marginTop="5dip"
  android:layout_marginBottom="5dip"
  android:layout_marginLeft="5dip"
  android:src="@drawable/file"
  android:scaleType="centerCrop"/>
 <TextView
  android:id="@+id/file_picker_text"
  android:layout_width="fill_parent"
  android:layout_height="wrap_content"
  android:layout_weight="1"
  android:layout_gravity="left|center_vertical"
  android:textSize="24sp"
  android:layout_marginLeft="10dip"
  android:singleLine="true"
  android:text="filename"/>
 </LinearLayout> 
```

file_picker_empty_view.xml

```
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
     android:layout_width="fill_parent"
     android:layout_height="fill_parent"
     android:text="No files or directories"
     android:background="@android:drawable/toast_frame"
     android:textSize="24sp"
     android:gravity="center_vertical|center_horizontal"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T11:28:24.730

您需要创建一个辅助类，例如：

```
public class HelperClass extends Plugin implements OnClickListener 

    protected static final String TAG = null;
    private DroidGap mGap;
    public HelperClass(DroidGap gap, WebView view)
    {
        mGap = gap;
    }   
       @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

    mFilePathTextView = (TextView)findViewById(R.id.file_path_text_view);
    mStartActivityButton = (Button)findViewById(R.id.start_file_picker_button);
    mStartActivityButton.setOnClickListener(this);      
}

    public void onClick(View v) {
    switch(v.getId()) {
    case R.id.start_file_picker_button:
        Intent intent = new Intent(this, FilePickerActivity.class);
        startActivityForResult(intent, REQUEST_PICK_FILE);
        break;
    }
}   

    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        if(resultCode == RESULT_OK) {
            switch(requestCode) {
            case REQUEST_PICK_FILE:
                if(data.hasExtra(FilePickerActivity.EXTRA_FILE_PATH)) {
                    selectedFile = new     File(data.getStringExtra(FilePickerActivity.EXTRA_FILE_PATH));
                    mFilePathTextView.setText(selectedFile.getPath());  

            }
        }
    }
}

@Override
public PluginResult execute(String arg0, JSONArray arg1, String arg2) {
    // TODO Auto-generated method stub
    return null;
} 
```

}

那么你的主要活动需要是这样的：

```
 public class MainActivity extends DroidGap {
    /** Called when the activity is first created. */
HelperClass cna;
    @Override
    public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);      
    super.init();    
    cna = new HelperClass(this, appView);    
    appView.addJavascriptInterface(cna, "HelperClass");      
    super.loadUrl("file:///android_asset/www/index.html");
    }
} 
```

# html - 如何放入标签内？ table放入a标签是一个好的解决方案吗？为什么链接在包装表时不起作用？ [|  | My Place Name .button { display: inline-block; background-image: url(); background-position: 2px 2px; padding-left: 16px; /* size of image */ } 这是一个工作示例：http: //jsfiddle.net/RvTp3/ 根据评论，这是另一个示例，显示文本换行时与垂直中间对齐的图像：http: //jsfiddle.net/RvTp3/1/ 于 2012-08-10T11:20:53.827 回答 This answer is useful 1 在我看来，您只想拥有一个带有图标和文本的链接，它们都链接到 /place 并且仅用于布局，对吗？为什么不摆脱桌面并使用 css 进行布局？ 于 2012-08-10T11:21:41.173 回答 This answer is useful 1 它不是。你不应该。 如果你想启用点击表格。然后你可以通过将点击事件附加到表格来做到这一点。 

&#124;  &#124; My place name &#124;

于 2012-08-10T11:24:24.843 回答 Related 3 c# - 更新sql表的最快方法是什么？ 2 sql - Oracle PL/SQL 触发器更新另一列 2 jquery - 仅需要 DOM 遍历、$.ajax 和 Deferred 时的 jQuery 替代方案 7 java - 有效地从java中的大量数组中删除重复的字符串？ 2 c# - 显式加载相关实体时应用过滤器 1 ember.js - 控制器策略/垃圾收集（销毁） 1 android - Android中的YoutubeService类错误 1 php - CakePHP 外键显示值 1 asp.net - IIS 子应用程序的不同默认文档 2 python - 将 no-X11 tkinter 与 python 一起使用（通过 macports 安装） Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：11900545
> 
> 赞同：4
> 
> 时间：
> 
> 标签：html, css

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-10T11:20:53.827

> 我需要实现下一个html

不，你没有，也不应该。真的。它是无效的、非语义的，并且（也许最重要的是）由于这些原因而无法可靠地工作。如果您想要的只是图像和一些文本（已链接），请使用以下内容：

```
<a href="/place" class="button">My Place Name</a>

.button {
    display: inline-block;
    background-image: url();
    background-position: 2px 2px;
    padding-left: 16px; /* size of image */
} 
```

这是一个工作示例：http: [//jsfiddle.net/RvTp3/](http://jsfiddle.net/RvTp3/)根据评论，这是另一个示例，显示文本换行时与垂直中间对齐的图像：http: [//jsfiddle.net/RvTp3/1/](http://jsfiddle.net/RvTp3/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T11:21:41.173

在我看来，您只想拥有一个带有图标和文本的链接，它们都链接到 /place 并且`<table>`仅用于布局，对吗？为什么不摆脱桌面并使用 css 进行布局？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-10T11:24:24.843

它不是。你不应该。如果你想启用**点击**表格。然后你可以通过将点击事件附加到表格来做到这一点。

```
 <table  onclick="window.location='yoururl'">
    <tr>
      <td>
        <span class="place-icon" />
      </td>
      <td> 
        My place name
      </td>
    </tr>
  </table> 
```

 |](/place)

# design-patterns - 不需要 UI 时的设计模式

> ID：11900547
> 
> 赞同：1
> 
> 时间：2012-08-10T11:17:18.137
> 
> 标签：design-patterns

我熟悉一些设计模式（即 MVC、PM 和类似的 MVVM）的基础知识和概念。这两者（IMO）都需要用户界面。

我的项目几乎是使用 Windows 服务运行的（服务运行、执行某些操作并更新数据库 - SQL 代理作业运行并根据表中列的“状态”然后将其移动/对其进行操作等，另一个 Windows 服务正在检查表的另一种状态，该状态将其从数据库中取出并将其保存在硬盘上）。好的，这并不完全是发生的事情，但关键是没有 UI - 它只是 DAL 和 BLL（以及 SQL 作业）。

所以，我的问题是，对于这样的项目，是否有任何开发模式/指南可供审查或坚持？或者，是否存在需要不止一种模式的情况（例如，一种用于代码，一种用于数据库）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T11:35:59.020

根据具体情况，所有非 UI 相关的 OO 模式都可能适用。

大多数设计模式与 UI 无关，只是简单命名，常见的 OO 问题的常见解决方案：委托、工厂、访问者、复合、策略、责任链、构建器、代理、观察者、依赖注入等.

在适当的时候使用它们。

# perl - 使用 perl 检索与相同 ID 匹配的值

> ID：11900551
> 
> 赞同：0
> 
> 时间：2012-08-10T11:17:34.213
> 
> 标签：perl, hash

这是一个简单的问题，但找不到任何可行的解决方案。我有 2 个文件，第一个文件包含我感兴趣的所有 ID，例如“tomato”、“cucumber”，还有我不感兴趣的 ID，它们在第二个文件中没有任何价值。第二个文件具有以下数据结构

```
tomato    red

tomato    round

tomato    sweet

cucumber    green

cucumber    bitter

cucumber    watery 
```

我需要得到一个文件，其中包含具有第二个文件中所有匹配值的所有 ID，所有内容都以制表符分隔，如下所示：

```
tomato    red    round    sweet

cucumber    green    bitter    watery 
```

到目前为止，我所做的是从第一个文件中的 ID 创建一个散列：

```
 while (<FILE>) {  
     chomp;  
     @records = split "\t", $_; 
     {%hash = map { $records[0] => 1 } @records};
 } 
```

这是第二个文件：

```
 while (<FILE2>) {
      chomp;
      @records2 = split "\t", $_; 
      $key, $value = $records2[0], $records2[1];
      $data{$key} = join("\t", $value);
  }

 close FILE;

 foreach my $key ( keys %data )
 {
     print OUT "$key\t$data{$key}\n"
     if exists $hash{$key} 
 } 
```

将不胜感激一些简单的解决方案来组合所有匹配相同 ID 的值！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T11:27:17.613

对于第一个文件：

```
while (<FILE>) {  
    chomp;  
    @records = split "\t", $_; 
    $hash{$records[0]} = 1;
} 
```

第二个：

```
while (<FILE2>) {
    chomp;
    @records2 = split "\t", $_;
    ($key,$value) = @records2;
    $data{$key} = [] unless exists $data{$key};
    push @{$data{$key}}, $value;
}
close FILE;

foreach my $key ( keys %data ) {
    print OUT $key."\t".join("\t", @{$data{$key}})."\n" if exists $hash{$key};
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T20:47:22.247

这似乎做了所需要的

```
use strict;
use warnings;

my %data;

open my $fh, '<', 'file1.txt' or die $!;
while (<$fh>) {
  $data{$1} = {} if /([^\t]+)/;
}

open $fh, '<', 'file2.txt' or die $!;
while (<$fh>) {
  $data{$1}{$2}++ if /^(.+?)\t(.+?)$/ and exists $data{$1};
}

while ( my ($key, $values) = each %data) {
  print join("\t", $key, keys %$values), "\n";
} 
```

**输出**

```
tomato  sweet round red
cucumber  green watery  bitter 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-10T13:28:27.393

如果您先阅读数据映射，则会更容易。

此外，如果您使用 Perl，您应该从一开始就考虑利用其主要优势之一 - CPAN 库。例如，文件的读入就像`read_file()`from一样简单`File::Slurp`；而不必自己打开/关闭文件，然后运行 ​​while(<>) 循环。

```
use File::Slurp;
my %data;

my @data_lines = File::Slurp::read_file($filename2);
chomp(@data_lines);
foreach my $line (@data_lines) { # Improved version from CyberDem0n's answer
    my ($key, $value) = split("\t", $line);
    $data{$key} ||= []; # Make sure it's an array reference if first time
    push @{ $data{$key} }, $value;
}

my @id_lines = File::Slurp::read_file($filename1);
chomp(@id_lines);
foreach my $id (@id_lines) {
    print join("\t", ( $id, @{ $data{$id} } ) )."\n";
} 
```

一个稍微更hacky但更短的代码从一开始就将ID添加到数据哈希中的值列表中：

```
my @data_lines = File::Slurp::read_file($filename2);
chomp(@data_lines);
foreach my $line (@data_lines) { # Improved version from CyberDem0n's answer
    my ($key, $value) = split("\t", $line);
    $data{$key} ||= [ $id ]; # Add the ID for printing
    push @{ $data{$key} }, $value;
}

my @id_lines = File::Slurp::read_file($filename1);
chomp(@id_lines);
foreach my $id (@id_lines) {
    print join("\t", @{ $data{$id} } ) ."\n"; # ID already in %data!
} 
```

# python - SQLAlchemy：表已经存在

> ID：11900553
> 
> 赞同：8
> 
> 时间：2012-08-10T11:17:44.997
> 
> 标签：python, sqlalchemy

我们通常什么时候在 SQLAlchemy 中得到以下错误？

```
sqlalchemy.exc.OperationalError: (OperationalError) (1050, "Table 'foobar' already exists") 
```

该`foobar`表确实已经存在，但是为什么 SQLAlchemy 在已经存在时尝试创建表。如果已经存在，我假设它不应该创建表。

我正在使用以下语法创建表：

```
t = Table('foobar', metadata,
      Column('col1', String(50), primary_key=True),
      Column('col2', String(100)),
      mysql_engine='InnoDB',
      mysql_charset='utf8') 
```

（我并行调用同一个程序 10 次）

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-14T19:00:15.787

只需使用带有**checkfirst=True****关键字的模式对象****（表、索引和序列）** **创建**和**删除**方法，表将自动添加适合 SQL的**“IF NOT EXISTS 或 IF EXISTS CLAUSE” 。**

 ********例如：**

```
t = Table('foobar', metadata,
  Column('col1', String(50), primary_key=True),
  Column('col2', String(100)),
  mysql_engine='InnoDB',
  mysql_charset='utf8')

t.create(checkfirst=True) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-10T11:23:53.077

如果 foobar 表已经存在，您可以这样做：

```
users = Table('foobar', metadata, autoload=True) 
```

SQLAlchemy 会自动从数据库中找出表的结构。

首先使用自动加载检查表是否存在，如果不存在则创建表。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-10T15:01:03.250

这是我的一些故障排除想法的猜测。我的猜测是客户端**认为**该表不存在，因为它看不到它，但是在尝试创建它时，不能，因为它实际上确实存在。

故障排除思路：

*   检查代码的其他部分是否正在写入同一个日志文件或其他任何内容，并尝试创建这些表。
*   手动用和客户端一样的ID和密码登录，看看能不能看到表。
*   传递`echo=True`到`create_engine`以了解客户端执行的确切查询，然后在您自己的 SQL shell 中重复所有查询以查看客户端所看到的内容。希望这会让你得出一个结论。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-12-19T18:11:39.543

另一种选择是使用元数据：

```
database_engine = create_engine(
    'mssql+pyodbc://username:password=@server:1433/databaseName?driver=ODBC+Driver+17+for+SQL+Server?trusted_connection=no')
with database_engine.connect() as database_connection:
    metaData = MetaData(bind=database_engine, reflect=True)
    metaData.reflect()

    try:
        Table("tbl_stuff",
              metaData,
              Column("id", Integer, primary_key=True, autoincrement=False),
              Column("Name", String(255)),
              extend_existing=True)
        metaData.create_all(database_connection, checkfirst=True)
        metaData.reflect()
    except Exception as an_exc:
        logging.exception("Exception creating tbl_stuff: " + str(an_exc)) 
```

有关详细信息，请参阅[https://docs.sqlalchemy.org/en/13/core/metadata.html](https://docs.sqlalchemy.org/en/13/core/metadata.html)******

# javascript - 编辑 dhtmlx 树中的项目时突出显示文本

> ID：11900554
> 
> 赞同：0
> 
> 时间：2012-08-10T11:17:45.937
> 
> 标签：javascript, jquery, dhtmlx

当我希望用户从树中重命名项目时，我为他打开编辑器：

```
 tree.editItem(tree.getSelectedItemId()); 
```

但我希望选择编辑器中的文本（突出显示）。现在光标在文本的末尾，文本没有被选中。这个怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T11:26:13.243

用这个

```
document.getElementById('id').select(); 
```

这是工作示例[jsfiddle](http://jsfiddle.net/aV4Er/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-13T12:43:13.123

你可以试试下一个：

```
tree.attachEvent("onEdit",function(state,id,tree,value){
    if(state==1){
        var inp = this._editCell.span.firstChild;
        inp.select();
    }
    if (state == 2){
        if (value == "" || value == " "){
            alert('Please, type the name of item');
            return false;
        }
    }
    return true
}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T11:38:01.110

您可以使用 jQuery [**.select()**](http://jsfiddle.net/wqgMN/)来实现这一点。

> [**.select()**](http://jsfiddle.net/wqgMN/)将事件处理程序绑定到“选择”JavaScript 事件，或在元素上触发该事件。

**例子：**

```
$('#txt').select();​ 
```

## [看演示](http://jsfiddle.net/wqgMN/)

# iphone - UITableView 分页

> ID：11900555
> 
> 赞同：5
> 
> 时间：2012-08-10T11:17:51.617
> 
> 标签：iphone, ios, xcode, uitableview

我的应用程序有自定义`UITableView`单元格。我想一次只显示一个单元格 - 下一个单元格应该部分显示。在 ScrollView 中，您可以设置`isPagingEnabled`为 YES。

但是我怎么能在上面做`UITableView`呢？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-10T13:27:55.127

请注意，`UITableView`继承自`UIScrollView`，因此您可以在表格视图本身上设置`pagingEnabled`为。`YES`

当然，这仅在所有单元格和表格视图本身具有相同高度时才有效。

如果您希望在滚动后始终在表格视图的顶部开始一个单元格，您可以使用 a`UIScrollViewDelegate`并实现类似的东西。

```
- (void)scrollViewWillEndDragging:(UIScrollView *)scrollView
                     withVelocity:(CGPoint)velocity
              targetContentOffset:(inout CGPoint *)targetContentOffset
{
  UITableView *tv = (UITableView*)scrollView;
  NSIndexPath *indexPathOfTopRowAfterScrolling = [tv indexPathForRowAtPoint:
                                                       *targetContentOffset
                                                 ];
  CGRect rectForTopRowAfterScrolling = [tv rectForRowAtIndexPath:
                                             indexPathOfTopRowAfterScrolling
                                       ];
  targetContentOffset->y=rectForTopRowAfterScrolling.origin.y;
} 
```

这使您可以调整滚动操作将在哪个内容偏移处结束。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-09-01T01:49:42.150

Swift 5 基础版，但是效果不是很好。我需要对其进行自定义以供自己使用以使其正常工作。

```
func scrollViewWillEndDragging(_ scrollView: UIScrollView, withVelocity velocity: CGPoint, targetContentOffset: UnsafeMutablePointer<CGPoint>) {
    if let tv = scrollView as? UITableView {
        let path = tv.indexPathForRow(at: targetContentOffset.pointee)
        if path != nil {
            self.scrollToRow(at: path!, at: .top, animated: true)
        }
    }
} 
```

定制版

```
// If velocity is less than 0, then scrolling up
// If velocity is greater than 0, then scrolling down
if let tv = scrollView as? UITableView {
    let path = tv.indexPathForRow(at: targetContentOffset.pointee)
    if path != nil {
        // >= makes scrolling down easier but can have some weird behavior when scrolling up
        if velocity.y >= 0.0 {
            // Assumes 1 section
            // Jump to bottom one because user is scrolling down, and targetContentOffset is the very top of the screen
            let indexPath = IndexPath(row: path!.row + 1, section: path!.section)
            if indexPath.row < self.numberOfRows(inSection: path!.section) {
                self.scrollToRow(at: indexPath, at: .top, animated: true)
            }
         } else {
             self.scrollToRow(at: path!, at: .top, animated: true)
         }
    }
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-10T11:58:53.043

我认为我根本不会为此使用 UITableView。

我想我会使用 UIScrollView 和一大堆分页内容。您可以在滚动活动上动态重建该内容，因此您可以模仿 UITableView 的内存管理。UIScrollView 会很高兴地进行垂直分页，这取决于它的 contentView 框架的形状。

换句话说，我怀疑让 UIScrollView 像表格一样比让 UITableView 像滚动视图一样分页更容易。

# php - 使用 php/mysql 更新数据库的问题

> ID：11900565
> 
> 赞同：0
> 
> 时间：2012-08-10T11:18:43.343
> 
> 标签：php, mysql

我在更新我的数据库时遇到了这个问题，所以，一切正常，我的意思是我有表单，它打印值，但是当我尝试更新它时，除了用户名和密码之外，所有内容都会更新..

这是我使用的代码..

谢谢！

```
if ($Act=='Save') {     
        mysql_query("BEGIN");       
        $sql = "Insert into tbl_galleries (gal_title,gal_image,username,password) Values (";                    
        $sql.= "'". strip_tags(mysql_real_escape_string(trim($gal_title))). "','". strip_tags(mysql_real_escape_string(trim($gal_image))) ."','". strip_tags(mysql_real_escape_string(trim($username))). "',,'". strip_tags(mysql_real_escape_string(trim($password))). "',);";         
        $query = mysql_query($sql);
        if(!$query){
            mysql_query("ROLLBACK");
            $myErrorsUpGr = mysql_error();
            echo $myErrorsUpGr;
        } else {
            mysql_query("COMMIT");
            echo 'Insertion was successfull.';
        }

    } else if ($Act=='Update'){         

        mysql_query("BEGIN");

        $sql = " Update tbl_galleries set ";
        $sql.= " gal_title='" . strip_tags(mysql_real_escape_string(trim($gal_title))) . "',";
        $sql.= " gal_image='" . strip_tags(mysql_real_escape_string(trim($gal_image))) . "'";
        $sql.= " where gal_id=" . $gal_id . ";";
        $sql.= " username='" . strip_tags(mysql_real_escape_string(trim($username))) . "',";
            $sql.= " password='" . strip_tags(mysql_real_escape_string(trim($password))) . "',";
<?php
    include_once("db/envato_db.php");
    if ($_SERVER['QUERY_STRING']!='')
    {  
        $sql = "";        
        $sql = "SELECT gal_id,gal_title,gal_image,username,password FROM tbl_galleries where gal_id='" . $_REQUEST['gid'] ."';";
        $query = mysql_query($sql) or $myErrorsP = mysql_error();
        if(isset($myErrors) && $myErrorsP!='')
        {     

        } 
        else 
        {          
            $row = mysql_fetch_row($query);
            mysql_free_result($query);
            $gal_id    = $row[0];
            $gal_title = $row[1];
            $gal_image = $row[2];     
            $username  = $row[3];
            $password  = $row[4];                 
        } 
    }
?>
    <tr>
        <td width="104">Gallery Title:</td>
        <td width="556"><input type="text" id="gtitle" name="gtitle" class="typeText" maxlength="50" value="<?php echo isset($gal_title)? $gal_title : ""?>" tabindex="1" /></td>    
    </tr>
    <tr>
        <td>Gallery Image:</td>
        <td>
        <input type="text" id="gimg" name="gimg" class="typeText" maxlength="100" value="<?php echo isset($gal_image)? $gal_image : ""?>" readonly/>
        <input type="file" name="gimg_upl" id="gimg_upl"/>&nbsp;
        <a href="javascript:;" onClick="ajaxFileUpload('gimg_upl','img_files');" title="Click to Upload Image" name="Click to Upload Image">Upload</a>          
        </td>    
    </tr>
    <tr>
        <td width="104">Username:</td>
        <td width="556"><input type="text" id="gusername" name="gusername" class="typeText" maxlength="50" value="<?php echo isset($username)? $username : ""?>" tabindex="1" /></td>    
    </tr> 
    <tr>
        <td width="104">Password:</td>
        <td width="556"><input type="text" id="gpassword" name="gpassword" class="typeText" maxlength="50" value="<?php echo isset($password)? $password : ""?>" tabindex="1" /></td>    
    </tr>       
    </table> 

    <table id="savetbl" style="width:680px;" cellpadding="3">
    <tr>
        <td align="center" colspan="2">
    <?php 
        if(isset($gal_id) && $gal_id!='')
        {                
            if(!isset($myErrorsP)) 
            { 
                ?>
                <input type="button" value="&raquo; Update &laquo;" class="but" name="button" alt="Update" title="Update" onClick="Do_Update('Update', '<?php echo $gal_id?>');" tabindex="3">                                         
                <?php 
            } 
        } 
        else 
        { 
            if(!isset($myErrorsP)) 
            { 
                ?>
                <input type="button" value="&raquo; Save &laquo;" class="but" name="button" alt="Save" title="Save" onClick="Do_Update('Save','0');" tabindex="3">                  
                <?php 
            } 
        } 
        ?>               
        </td>    
    </tr> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T11:48:02.307

在您的代码上，您有这个：

```
$sql.= " where gal_id=" . $gal_id . ";";
$sql.= " username='" . strip_tags(mysql_real_escape_string(trim($username))) . "',";
$sql.= " password='" . strip_tags(mysql_real_escape_string(trim($password))) . "',"; 
```

尝试在更新用户名和密码后设置 where 子句：

```
$sql.= " username='" . strip_tags(mysql_real_escape_string(trim($username))) . "',";
$sql.= " password='" . strip_tags(mysql_real_escape_string(trim($password))) . "'";
$sql.= " where gal_id=" . $gal_id . ";"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T11:48:07.367

尝试这个

```
$sql.= " where gal_id=" . $gal_id . ";";
$sql.= "AND username='" . strip_tags(mysql_real_escape_string(trim($username))) . "',";
$sql.= "AND password='" . strip_tags(mysql_real_escape_string(trim($password))) . "',"; 
```

示例代码的第 22、23 和 24 行

# wpf - 根据上下文启用或禁用验证

> ID：11900569
> 
> 赞同：3
> 
> 时间：2012-08-10T11:18:56.203
> 
> 标签：wpf, xaml, idataerrorinfo

**介绍**

我的视图中有两个`TextBox`，每个都绑定到我的视图模型（`Property1`，`Property2`）中的一些属性。

`TextBox`或者在某些布尔值和属性上启用，并`IDataErrorInfo`在视图模型中使用视图模型 + 视图中的某些样式进行验证。

**问题**

我想在禁用项目时禁用验证样式。

NB1：目前，我找到的解决方案是直接在视图模型中更改验证方案，但这需要通知属性更改以强制重新读取视图`IDataErrorInfo`（虽然属性并没有真正改变，只有选择器.. .)

NB2：我的问题非常接近这个问题[，](https://stackoverflow.com/q/7123687/684399)但是描述和解决方案太复杂了，我无法真正理解这一点。

**伪代码**

```
<UserControl 

    <UserControl.Resources>
        <Style TargetType="{x:Type Control}" x:Key="ControlValidationStyle">
            ...
        </Style> 
    </UserControl.Resources>

     ...

    <TextBox  
             Text="{Binding Property1, 
                            ValidatesOnDataErrors=True, 
                            UpdateSourceTrigger=PropertyChanged}" 

             IsEnabled="{Binding IsMode1}"

             Style="{StaticResource ControlValidationStyle}"
     />

    <TextBox  
             Text="{Binding Property2, 
                            ValidatesOnDataErrors=True, 
                            UpdateSourceTrigger=PropertyChanged}" 

             IsEnabled="{Binding IsMode1, 
                                 Converter={StaticResource BoolInverse}}"

             Style="{StaticResource ControlValidationStyle}"
     />

</UserControl> 
```

**控件验证样式**

```
<Style TargetType="{x:Type Control}" x:Key="ControlValidationStyle">
    <Style.Resources>
        <Style TargetType="ToolTip">
            <Setter Property="Background" Value="Tomato" />
            <Setter Property="BorderBrush" Value="Red" />
            <Setter Property="BorderThickness" Value="2" />
            <Setter Property="Foreground" Value="white" />
        </Style>
    </Style.Resources>
    <Style.Triggers>
        <Trigger Property="Validation.HasError" Value="true">
            <Setter Property="ToolTip" 
                        Value="{Binding RelativeSource={RelativeSource Self},
                        Path=(Validation.Errors)[0].ErrorContent}" />
            <Setter Property="Background" Value="Bisque"/>
            <Setter Property="BorderBrush" Value="Red" />
            <Setter Property="BorderThickness" Value="2" />
            <Setter Property="Foreground" Value="Red" />
        </Trigger>
    </Style.Triggers>
</Style> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-10T11:55:05.713

你为什么不使用`MultiTrigger`而不是`Trigger`：

```
<MultiTrigger>
    <MultiTrigger.Conditions>
      <Condition Property="Validation.HasError" Value="true" />
      <Condition Property="IsEnabled" Value="true"  />
    </MultiTrigger.Conditions>
 <Setter .../>
</MultiTrigger> 
```

# objective-c - 如何控制嵌套的滚动视图

> ID：11900571
> 
> 赞同：0
> 
> 时间：2012-08-10T11:19:09.933
> 
> 标签：objective-c, ios, uiscrollview

在我的 iphone 应用程序中，我想使用 2 个滚动视图，它们里面有一些图像。好吧，我的问题是，当我在第一个滚动视图上垂直滚动时，我想探索它的内容，但是当我水平滚动时，我想移动到第二个滚动视图。我希望我解释清楚。

好吧，我尝试使用 3 个滚动视图，其中第一个位于背景上，其他位于第一个滚动视图上，但我只能一次控制背景滚动视图或其他滚动视图。

有没有办法控制第一个水平和其他垂直。对不起我的英语，希望它有意义。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T12:31:13.267

我有两个建议。

1) Scrollviews 可以水平和垂直滚动——所以如果你有垂直方向的内容和水平方向的内容，你不需要其中的两个。你可以用一个。

2）如果由于某种原因您确实需要 2，那么您可以通过子类化检测水平滑动`UIScrollView`并切换到另一个。

请记住，a`UIScrollView`将向任何超出其 contentSize 的方向滚动。因此，在第一种情况（1）中，您需要做的就是获取滚动视图 2（水平滚动视图）内部的视图，并将该视图放在滚动视图中滚动视图的左侧或右侧，当用户使用时滚动他们将看到该视图，当然也可以在那里垂直滚动。

如果您使用方法 2 - 确保第一个滚动视图的内容大小至少比内容大小宽几个像素，以便您可以检测到水平滑动，然后调用 coe 切换到您的另一个滚动视图。如果您不子类`UIScrollview`化以获得滑动，您可能不会获得该事件。所以这样做会增加该视图的宽度，然后查找小于滚动视图左边缘的值并切换到另一个滚动视图。您可以反向执行相同的操作以返回上一个滚动视图。

我希望这会有所帮助 - 抱歉目前没有代码，但我确实有在 iOS 和 OSX 上工作的代码可以做到这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T15:16:24.487

`UIScrollView`您可以通过两者`if statement` 的 Set 委托来区分两者`UIScrollView` 然后比较您`scrollView`的`delegate`方法。`delegate`您可以根据您的要求更改您的方法 -

```
- (void)scrollViewDidEndDragging:(UIScrollView *)scrollView willDecelerate:(BOOL)decelerate 
{
    if(firstScrollView == scrollView)
    {
         //Do your work for firstScrollView
    }

    if(secondScrollView == scrollView)
    {
         //Do your work for secondScrollView
    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T11:35:12.273

尝试在代表方法中做

```
- (void)scrollViewDidEndDragging:(UIScrollView *)scrollView willDecelerate:(BOOL)decelerate

-(void)scrollViewDidEndDecelerating:(UIScrollView *)scrollView 
```

设置一些条件，例如

```
if(myScroll1)
{
 //scroll vatical.
}
if(myScroll2)
{
 //scroll horizontal.
} 
```

这不是完整的代码这是一个想法祝你好运..

# c# - 在 Crystal 报表中以大写形式显示字段值

> ID：11900577
> 
> 赞同：5
> 
> 时间：2012-08-10T11:19:33.077
> 
> 标签：c#, crystal-reports

在我的水晶报表中，我想以大写形式显示字段值。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-08-10T13:36:01.530

您无需创建单独的公式字段即可获得此结果。

相反，将以下内容添加到字段的显示字符串条件公式中：

```
UpperCase(CurrentFieldValue) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T11:21:51.097

给你... [http://www.crystalreportsbook.com/Forum/forum_posts.asp?TID=8823](http://www.crystalreportsbook.com/Forum/forum_posts.asp?TID=8823)

您会注意到在此示例中他们使用的`UpperCase`是 Crystal Reports 的功能。因此，您需要做的就是说出`UpperCase(`***一些字段名称***`)`，然后它会为您处理好它。

# python - 如何在 python 中执行 cat filename*

> ID：11900578
> 
> 赞同：1
> 
> 时间：2012-08-10T11:19:36.873
> 
> 标签：python, process, wildcard, cat

我对python真的很陌生，经过几个小时的寻找我还没有找到解决方案（或者无法理解其他人提供的解决方案）。

我想检查文件夹中具有相同初始名称“pid”的多个文件的内容，后跟一个不连续的整数，以确保它们都包含“完成”一词。这些文件包含一个单词。

我最初的想法是使用

```
cat pid* 
```

以某种方式将该命令的输出放入列表中，然后横向比较列表中的值

```
result = 'Finished'
for x in range(len(myList)):
    if 'done' not in myList[x]:
        result = 'Continue'
        break
if result == 'Finished':
    print 'Finished' 
```

那是我的想法，但我找不到获取包含 cat 输出的列表的方法。

经过一番挖掘后，我放弃了这个想法并做了一个非常糟糕的实现（我认为）我确信必须有一个更好的解决方案

```
filedir = os.popen('ls','r')

for line in filedir:
    print line
    if 'pid' in line:
        filename = open(line.replace('\n', ''), 'r')
        firstline = filename.readline()
        print firstline
        if 'done' not in firstline:
            status = 'RUNNING'
            break
if status == 'DONE':
    print 'Finished'
else:
    print status 
```

非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T11:32:58.513

您可以使用该[`glob`](http://docs.python.org/library/glob.html)模块，它“根据 Unix shell 使用的规则查找与指定模式匹配的所有路径名”：

```
import glob
for fn in glob.glob('pid*'):
    with open(fn) as f:
        if 'done' in f.read():
            ... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T11:22:08.723

用于[`glob`](http://docs.python.org/library/glob.html)执行通配符匹配，然后读取文件。

并且请...**停止为可以在 python 本身中轻松完成的事情调用 shell 命令**

# notifications - 如何注册 Win8 定期磁贴通知？

> ID：11900579
> 
> 赞同：4
> 
> 时间：2012-08-10T11:19:36.940
> 
> 标签：notifications, windows-8, microsoft-metro, windows-runtime

我正在开发一个 Win8-UI-App（以前称为 Metro ...）并尝试第一次实现定期（不同方法的[文档](http://msdn.microsoft.com/en-us/library/windows/apps/hh779721.aspx)）磁贴更新（动态磁贴）。

我在互联网上找到了一些非常好的资源并且能够做到。不幸的是，我应该在哪里注册通知的问题仍未解决：

***每次***应用启动时我是否必须注册通知（例如在 App.xaml.cs OnLaunched() 方法中）？- 或者有其他更专业的方法吗？（如果我已经注册了该服务，或者我可以访问一个变量来查看通知是否已注册，我可以想象保存？）

谢谢你！

PS：对于同样是新手的每个人，请参阅此[StackOverflow 帖子](https://stackoverflow.com/questions/7442760/how-are-live-tiles-made-in-windows-8)、此[示例](http://code.msdn.microsoft.com/windowsapps/Push-and-periodic-de225603)、磁[贴模板类型](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.notifications.tiletemplatetype)和[开发中心](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/jj150587.aspx)，以便快速入门：)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T12:51:24.673

定期更新将继续进行，直到它们被[明确停止](http://msdn.microsoft.com/en-us/library/windows/apps/hh464925.aspx)或您的应用程序被卸载。从技术上讲，您只需执行一次。但是，[定期更新的指南和清单](http://msdn.microsoft.com/en-us/library/windows/apps/hh464925.aspx)指出

> 每次启动应用程序或获得焦点时调用 StartPeriodicUpdate 或 StartPeriodicUpdateBatch 方法。这可确保每次用户启动或切换到应用程序时更新磁贴内容。

据此，[App launch 和 App resume](http://msdn.microsoft.com/en-us/library/windows/apps/hh464925.aspx)是调用[StartPeriodicUpdate](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/windows.ui.notifications.tileupdater.aspx)的良好候选者。

# tcl - TCL 通过 3 种不同的模式匹配删除重复行

> ID：11900585
> 
> 赞同：0
> 
> 时间：2012-08-10T11:19:51.070
> 
> 标签：tcl

我是 TCL 编程的初学者，想从匹配的输入文件中删除行

1.  完全相同的行内容
2.  模式：（`"ghi\/\njkl\/\nrccu1" -> "Point \.*: 10 Sinks" \.*` 单词“Point”后面的数字和“ `[color.*`”后面的内容可以不同 - 所有其他需要完全匹配）
3.  `"mno\/\npqr\/\nrccu1" -> "stu\/\nvwx\/\nrccu1" [label = "depth: 1"] [color=salmon] [fontcolor=salmon] [style=solid];` （单词“Point”后面的数字和“ `[color.*`”后面的内容可以不同-所有其他都需要完全匹配）

现在我有以下输入文件

```
"abc\/\ndef\/\nrccu1" [形状=八边形，颜色=红色，样式=填充]；
"abc\/\ndef\/\nrccu1" [形状=八边形，颜色=红色，样式=填充]；

"ghi\/\njkl\/\nrccu1" -> "第 1 点：10 个水槽" [color=salmon] [style=solid] [weight=8];
"123\/\n456\/\nrccu1" -> "第 9 点：10 个水槽" [color=grey] [style=solid] [weight=8];
"ghi\/\njkl\/\nrccu1" -> "第 8 点：10 个水槽" [color=grey] [style=solid] [weight=8];
"ghi\/\njkl\/\nrccu1" -> "第 13 点：20 个水槽" [color=grey] [style=solid] [weight=8];

"mno\/\npqr\/\nrccu1" -> "stu\/\nvwx\/\nrccu1" [label = "depth: 1"] [color=salmon] [fontcolor=salmon] [style=solid];
"mno\/\npqr\/\nrccu1" -> "stu\/\nvwx\/\nrccu1" [label = "depth: 4"] [color=salmon] [fontcolor=salmon] [style=solid];

"mno\/\npqr\/\nrccu1" -> "stu\/\nvwx\/\nrccu1" [label = "depth: 1"] [color=grey] [fontcolor=red] [style=solid];

```

输出文件应包含：

```
"abc\/\ndef\/\nrccu1" [形状=八边形，颜色=红色，样式=填充]；

"ghi\/\njkl\/\nrccu1" -> "第 1 点：10 个水槽" [color=salmon] [style=solid] [weight=8];
"123\/\n456\/\nrccu1" -> "第 9 点：10 个水槽" [color=grey] [style=solid] [weight=8];
"ghi\/\njkl\/\nrccu1" -> "第 13 点：20 个水槽" [color=grey] [style=solid] [weight=8];

"mno\/\npqr\/\nrccu1" -> "stu\/\nvwx\/\nrccu1" [label = "depth: 1"] [color=salmon] [fontcolor=salmon] [style=solid];
"mno\/\npqr\/\nrccu1" -> "stu\/\nvwx\/\nrccu1" [label = "depth: 4"] [color=salmon] [fontcolor=salmon] [style=solid];

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T12:26:11.873

```
set in [open input.file r]
array set seen {}
while {[gets $in line] != -1} {
    # blank lines should be printed as-is
    if {[string length [string trim $line]] == 0} {
        puts $line
        continue
    }

    # create the "key" for this line
    regsub {\mPoint \d+} $line {} key
    regsub {\mcolor=\w+} $key {} key

    # print the line only if the key is unique
    if { ! [info exists seen($key)]} {
        puts $line
        set seen($key) true
    }
}
close $in 
```

# php - 如何检查哪个@route 触发了 Symfony2 中的 Controller::Action？

> ID：11900586
> 
> 赞同：2
> 
> 时间：2012-08-10T11:19:56.567
> 
> 标签：php, forms, symfony, routes

在 Symfony2 中，可以定义 2 个不同`@routes`的来获得一个相同的*Controller*和*Action*吗？

问题是：您如何在该独特操作中检查用户来自哪个路径或路线？

**示例：**假设我们有一个被调用的动作`"createUserAction"`，它可以从`@routes /common_register`和到达`/premium_register`。

在动作内部，我想区分两种用户，使用不同的表单并根据他们输入的路线创建用户（或者通常，根据不同的行为有不同的行为）。

我怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T11:22:04.190

`$_route`在您的操作中，只需在方法中添加额外的特殊路由参数

```
public function createUserAction ($_route)
{
    ... //$_route will return the name of your route
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T11:45:29.130

您是否考虑过另一种方法？只需使用带有参数的单个路由：

```
/**
 *@route ("/register/{type}", requirements={"type" = "common|premium"})
 **/

public function createUserAction ($type) {
    //use $type to decide what to do
} 
```

# actionscript-3 - Flex PNGEncoder 失去透明质量

> ID：11900590
> 
> 赞同：0
> 
> 时间：2012-08-10T11:20:06.350
> 
> 标签：actionscript-3, apache-flex

我在使用 PNGEncoder 类时遇到了透明问题。当我将 BitmapData 编码为 png 并将其用作我的图像源时，它看起来很糟糕。我附上例子。有两个图像 - 第一个是彩色的，上面是白色的，带有 alpha 渐变。

[保存前的图片](http://postimage.org/image/6ac2xqxop/)

[保存后的图片](http://postimage.org/image/ptgo73wg9/)

我使用了其他一些库，例如 AsPngEncoder，但没有帮助。这是我使用的代码：

```
 var bd:BitmapData = new BitmapData(container.width, container.height, true, 0xffffff);
        bd.draw(container);
        var pngenc:PNGEncoder = new PNGEncoder();

        var pngByteArray:ByteArray = pngenc.encode(bd);

        container.source = pngByteArray;
        var fl:File = File.applicationStorageDirectory.resolvePath("./images/file.png");

        var fs:FileStream = new FileStream();
        fs.open(fl, FileMode.WRITE);
        fs.writeBytes(pngByteArray);
        fs.close(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T10:03:06.917

尝试使用新的 Flash Player 11.3 功能

[http://help.adobe.com/en_US/as3/dev/WS4768145595f94108-17913eb4136eaab51c7-8000.html](http://help.adobe.com/en_US/as3/dev/WS4768145595f94108-17913eb4136eaab51c7-8000.html)

# asp.net-mvc-3 - 如何在 mvc3 中创建管理员用户？

> ID：11900593
> 
> 赞同：0
> 
> 时间：2012-08-10T11:20:06.477
> 
> 标签：asp.net-mvc-3, security, authentication, asp.net-membership

我想将用户注册添加到我的网站，我需要创建管理用户的管理员。我正在使用 ASP.NET 的身份验证。我可以创建用户，在我的管理面板上`Account/Register`列出他们并删除 我需要有关管理员的帮助。如何创建 1 个管理员并确保没有人可以成为管理员，只能是简单的用户？用户在方法中的角色是什么？`Membership.GetAllUsers()``Membership.DeleteUser( username )``Membership.CreateUser( model.UserName, model.Password, model.Email, null, null, true, null, out createStatus )``Account/Register`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T11:31:47.373

对于 MVC 帐户管理，我发现[MembershipStarterKit](https://github.com/TroyGoode/MembershipStarterKit)非常有用。听起来您想要它非常支持的基于角色的身份验证。

您所指的[Membership.CreateUser](http://msdn.microsoft.com/en-us/library/ms152012.aspx)函数与管理员或基于角色的安全性无关，仅用于创建用户本身。

您可以使用 IIS .NET 用户工具，但因为它以 .NET 2.0 为目标，您需要围绕它进行一些配置才能使其正常工作。您需要创建一个新的 IIS 应用程序，它使用与实际应用程序相同的连接字符串。

该应用程序需要一个看起来像

```
<configuration>
  <connectionStrings>
    <add name="MyConnectionString" connectionString="same as my production application membership connection string" providerName="same as my production application provider" />
  </connectionStrings>
  <system.web>
    <authentication mode="Forms">
      <forms loginUrl="~/Account/LogOn" timeout="2880" />
    </authentication>
    <membership>
      <providers>
        <remove name="AspNetSqlMembershipProvider" />
        <add name="AspNetSqlMembershipProvider" type="System.Web.Security.SqlMembershipProvider, System.Web, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a, EnablePasswordReset=true" connectionStringName="MyConnectionString" applicationName="/" />
      </providers>
    </membership>
    <roleManager enabled="true" defaultProvider="AspNetSqlRoleProvider">
      <providers>
        <clear/>
        <add name="AspNetSqlRoleProvider" type="System.Web.Security.SqlRoleProvider, System.Web, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" connectionStringName="MyConnectionString" applicationName="/" />
      </providers>
    </roleManager>
  </system.web>
</configuration> 
```

当您使用此 webconfig 结构添加应用程序时，您需要确保使用的应用程序池使用 .NET v 2.0 集成管道（DefaultAppPool 应该可以工作）。

完成后，在这个迷你应用程序中，您将可以访问 .Net 用户功能，您可以在其中添加和编辑用户和角色。但是，这不如 MembershipStarterKit 有用。

# php - 在 Magento Modern 主题中添加选项卡式“列表”

> ID：11900595
> 
> 赞同：1
> 
> 时间：2012-08-10T11:20:20.223
> 
> 标签：php, magento

我正在尝试在“附加信息”选项卡中模拟 Magento 默认执行的列表视图：

![默认布局](../Images/6da49b4641ce4521cb37bd2024681caf.png)

我已经创建了`\app\code\core\Mage\Catalog\Block\Product\View\Downloads.php`提取选项卡信息所需的文件：

```
<?php
 class Mage_Catalog_Block_Product_View_Downloads extends Mage_Core_Block_Template
 {
    protected $_list;

    public function __construct()
    {
        parent::__construct();
        $this->setTemplate('catalog/product/view/downloads.phtml');
    }

    public function getChildHtmlList()
    {
        if (is_null($this->_list)) {
            $this->_list = array();
            foreach ($this->getSortedChildren() as $name) {
                $block = $this->getLayout()->getBlock($name);
                if (!$block) {
                    Mage::exception(Mage::helper('catalog')->__('Invalid block: %s.', $name));
                }
                $this->_list[] = $block->toHtml();
            }
        }
        return $this->_list;
    }
} 
```

我还创建了模板文件来显示信息`\app\design\frontend\default\themename\template\catalog\product\view\downloads.phtml`：

```
<?php foreach ($this->getChildHtmlList() as $_html): ?>
    <?php echo $_html ?>
<?php endforeach; ?> 
```

并将 XML 添加到`catalogue.xml`文件中：

```
<action method="addTab" translate="title" module="catalog"><alias>downloads</alias><title>Downloads</title><block>catalog/product_view_downloads</block><template>catalog/product/view/downloads.phtml</template></action> 
```

这应该给我一个“下载”选项卡，其中包含与“附加信息”选项卡相同的列表视图，但唉，事实并非如此。

我如何告诉 Magento 从哪里提取信息 - 我已经在后端设置了我的属性，它们位于属性集中一个名为“下载”的组中，因此它应该可以工作。

谢谢，迈尔斯

# ruby-on-rails - pg_dump - 权限被拒绝 (db:structure:dump)

> ID：11900602
> 
> 赞同：1
> 
> 时间：2012-08-10T11:20:46.697
> 
> 标签：ruby-on-rails, windows, ruby-on-rails-3, rake

我在让 db:structure:dump 工作时遇到问题。

我得到这个错误：

```
C:\Sites\care>rake db:structure:dump --trace
Creating scope :search. Overwriting existing method PgSearch::Document.search.
** Invoke db:structure:dump (first_time)
** Invoke environment (first_time)
** Execute environment
** Execute db:structure:dump
rake aborted!
Permission denied - pg_dump -i -s -x -O -f C:/Sites/care/db/structure.sql  care_development
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-3.2.1/lib/active_support/core_ext/kernel/agnostics.rb:7:in ``'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-3.2.1/lib/active_support/core_ext/kernel/agnostics.rb:7:in ``'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activerecord-3.2.1/lib/active_record/railties/databases.rake:389:in `block (3 levels) in <top (required)>'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `call'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `block in execute'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `each'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `execute'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:158:in `block in invoke_with_call_chain'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:151:in `invoke_with_call_chain'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:144:in `invoke'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:116:in `invoke_task'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `block (2 levels) in top_level'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `each'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `block in top_level'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:88:in `top_level'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:66:in `block in run'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:63:in `run'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/bin/rake:33:in `<top (required)>'
C:/RailsInstaller/Ruby1.9.3/bin/rake:19:in `load'
C:/RailsInstaller/Ruby1.9.3/bin/rake:19:in `<main>'
Tasks: TOP => db:structure:dump 
```

如果我在 CMD 中这样运行它，它可以工作：

```
cd C:\Program Files (x86)\PostgreSQL\9.1\bin
pg_dump.exe -i -s -x -O -f C:/Sites/care/db/structure.sql care_development 
```

我尝试更改 pg_dump.exe 文件夹/文件和 rails 文件夹/文件的权限。但似乎并没有什么不同。尝试为用户、系统甚至每个人添加完全权限。

我还尝试将 --username 参数添加到 pg_dump 调用（在 rake 代码中），并在 pgAdminIII 中添加与我的 windows 用户匹配的登录角色。

（我在 Windows 7、Rails 3 和 postgreSQL 9 上）

有谁知道问题可能是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T05:39:53.213

我在我的 Linux 机器上遇到了同样的问题：然后我使用以下命令使其运行：

```
su

>> I logged in first with my Admin user 

su -postgres 
```

我将 .sql 文件保存在我的`/tmp`文件夹中

为了将文件转储到`.sql`数据库中，我运行命令

```
psql -u postgres -d my_db_name -a -f /tmp/path_to_sql_file 
```

它对我很有用。希望它可以帮助你。

# junit4 - 使用 maven 运行 JUnit 测试时抛出异常

> ID：11900612
> 
> 赞同：0
> 
> 时间：2012-08-10T11:21:05.697
> 
> 标签：junit4, jmockit

在 Maven 中运行 JUnit 测试时出现以下异常。

```
java.lang.IllegalStateException: Native library for Attach API not available in this JRE
    at mockit.internal.startup.JDK6AgentLoader.getVirtualMachineImplementationFromEmbeddedOnes(JDK6AgentLoader.java:81)
    at mockit.internal.startup.JDK6AgentLoader.loadAgent(JDK6AgentLoader.java:54)
    at mockit.internal.startup.AgentInitialization.initializeAccordingToJDKVersion(AgentInitialization.java:21)
    at mockit.internal.startup.Startup.initializeIfNeeded(Startup.java:96)
    at mockit.integration.junit4.JMockit.<clinit>(JMockit.java:23)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
    at org.junit.internal.builders.AnnotatedBuilder.buildRunner(AnnotatedBuilder.java:31)
    at org.junit.internal.builders.AnnotatedBuilder.runnerForClass(AnnotatedBuilder.java:24)
    at org.junit.runners.model.RunnerBuilder.safeRunnerForClass(RunnerBuilder.java:57)
    at org.junit.internal.builders.AllDefaultPossibilitiesBuilder.runnerForClass(AllDefaultPossibilitiesBuilder.java:29)
    at org.junit.runners.model.RunnerBuilder.safeRunnerForClass(RunnerBuilder.java:57)
    at org.junit.internal.requests.ClassRequest.getRunner(ClassRequest.java:24)
    at org.apache.maven.surefire.junit4.JUnit4TestSet.<init>(JUnit4TestSet.java:45)
    at org.apache.maven.surefire.junit4.JUnit4DirectoryTestSuite.createTestSet(JUnit4DirectoryTestSuite.java:56)
    at org.apache.maven.surefire.suite.AbstractDirectoryTestSuite.locateTestSets(AbstractDirectoryTestSuite.java:96)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.maven.surefire.booter.SurefireBooter.getTestSets(SurefireBooter.java:455)
    at org.apache.maven.surefire.booter.SurefireBooter.runSuitesForkPerTestSet(SurefireBooter.java:406)
    at org.apache.maven.surefire.booter.SurefireBooter.run(SurefireBooter.java:249)
    at org.apache.maven.plugin.surefire.SurefirePlugin.execute(SurefirePlugin.java:537)
    at org.apache.maven.plugin.DefaultPluginManager.executeMojo(DefaultPluginManager.java:490)
    at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoals(DefaultLifecycleExecutor.java:694)
    at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoalWithLifecycle(DefaultLifecycleExecutor.java:556)
    at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoal(DefaultLifecycleExecutor.java:535)
    at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoalAndHandleFailures(DefaultLifecycleExecutor.java:387)
    at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeTaskSegments(DefaultLifecycleExecutor.java:348)
    at org.apache.maven.lifecycle.DefaultLifecycleExecutor.execute(DefaultLifecycleExecutor.java:180)
    at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:328)
    at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:138)
    at org.apache.maven.cli.MavenCli.main(MavenCli.java:362)
    at org.apache.maven.cli.compat.CompatibleMain.main(CompatibleMain.java:60)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.codehaus.classworlds.Launcher.launchEnhanced(Launcher.java:315)
    at org.codehaus.classworlds.Launcher.launch(Launcher.java:255)
    at org.codehaus.classworlds.Launcher.mainWithExitCode(Launcher.java:430)
    at org.codehaus.classworlds.Launcher.main(Launcher.java:375)
Caused by: java.lang.UnsatisfiedLinkError: Native Library C:\Program Files\Java\jdk1.6.0_25\jre\bin\attach.dll already loaded in another classloader
    at java.lang.ClassLoader.loadLibrary0(ClassLoader.java:1772)
    at java.lang.ClassLoader.loadLibrary(ClassLoader.java:1724)
    at java.lang.Runtime.loadLibrary0(Runtime.java:823)
    at java.lang.System.loadLibrary(System.java:1028)
    at sun.tools.attach.WindowsVirtualMachine.<clinit>(WindowsVirtualMachine.java:169)
    at mockit.internal.startup.JDK6AgentLoader.getVirtualMachineImplementationFromEmbeddedOnes(JDK6AgentLoader.java:68)
    ... 44 more 
```

我在测试中使用了模拟。使用的框架是 JMockit。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T15:55:09.997

我不知道为什么会出现这种“attach.dll”的重复加载（稍后会调查），但是您可以通过使用“ `-javaagent`” JVM 初始化参数来避免该问题。有关详细信息，请参见[此处](http://jmockit.googlecode.com/svn/trunk/www/tutorial/RunningTests.html#maven)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T12:03:16.677

我会试一试。这里它说的是：

引起：java.lang.UnsatisfiedLinkError: Native Library C:\Program Files\Java\jdk1.6.0_25\jre\bin\attach.dll 已经加载到另一个类加载器中

我的猜测是您尝试加载 dll 两次？一次可能是作为 maven 依赖项加载的，一次是从 jdk 加载的？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-26T19:56:55.397

尝试将 tools.jar 添加到您的类路径中。如果您下载了 JDK，它通常位于 JDK 根目录下的 Contents/Home/lib/tools.jar 中。如果您使用的是 Eclipse，请在另一个问题上[查看此答案。](https://stackoverflow.com/a/11463590/591374)

# asp.net - 我需要一个在 asp.net 中构建菜单管理的想法

> ID：11900613
> 
> 赞同：0
> 
> 时间：2012-08-10T11:21:18.007
> 
> 标签：asp.net

我需要有一个在asp.net中构建菜单管理的想法，

我想管理菜单就像 DotNetNuke Cms

数据库表如下所示

谢谢

```
menuid 文本 parentid    
64 产品空
65 无线 64
66 索尼 65
67松下65
68 摄像头 64
69 电话 64
70 索尼 68
71 索尼 65

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T11:29:01.577

在这个问题中使用 Alexander Prokofyev 建议的递归方法

[在自连接表的嵌套 <ul> 中显示无限类别树的逻辑](https://stackoverflow.com/questions/3485434/logic-for-displaying-infinite-category-tree-in-nested-uls-from-self-join-table)

这样你的菜单就会是动态的

# java - 如何在 Java EE 中编写 cron 作业？

> ID：11900616
> 
> 赞同：5
> 
> 时间：2012-08-10T11:21:28.177
> 
> 标签：java, jakarta-ee

如何在 Java EE 中编写 cron 作业？

你能举个例子解释一下吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-10T11:57:32.270

如果您不限于 j2ee 并且可以选择使用 JavaEE 6，请参阅[SIMPLEST POSSIBLE EJB 3.1 TIMER](http://www.adam-bien.com/roller/abien/entry/simplest_possible_ejb_3_16)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-10T11:24:11.233

使用[石英](http://quartz-scheduler.org/)。这是在 Java 中最简单的方法。

其他方式包括 JDK[`ExecutorService`](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ExecutorService.html)和[Spring 的`TaskExecutor`抽象](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/scheduling.html)

此外，正如[@RuiMarques](https://stackoverflow.com/users/1085483/rui-marques)评论中提到的：[Cron4j](http://www.sauronsoftware.it/projects/cron4j/)

# perl - Perl script.file 处理问题

> ID：11900617
> 
> 赞同：0
> 
> 时间：2012-08-10T11:21:29.007
> 
> 标签：perl, unix

我写了一个 Perl 脚本：

```
#!/usr/bin/perl

use strict;
use warnings;

my $file_name;
my $ext = ".text";
my $subnetwork2;
my %files_list = ();
    opendir my $dir, "." or die "Cannot open directory: $!";
    my @files = readdir $dir;

sub create_files() {

    my $subnetwork;
    open(MYFILE, 'file.txt');
    while (<MYFILE>) {
        if (/.subnetwork/) {
            my @string = split /[:,\s]+/, $_;
            $subnetwork = $string[2];
        }
        if (/.set/ && (defined $subnetwork)) {
            my @string = split /[:,\s]+/, $_;
            my $file = $subnetwork . $string[1];
            open FILE, ">", "$file.text" or die $!;
            close(FILE);
        }
    }
    close(MYFILE);
}

sub create_hash() {
    foreach (@files) {
        if (/.text/) {

            open($files_list{$_}, ">>$_") || die("This file will not open!");

        }
    }
}

sub init() {
    open(MYFILE3, 'file.txt');
    while (<MYFILE3>) {
        if (/.subnetwork/) {
            my @string3 = split /[:,\s]+/, $_;
            $subnetwork2 = $string3[2];
            last;
        }
    }
    close(MYFILE3);
}

sub main_process() {

    init;
    create_files;
    create_hash;

    open(MYFILE1, 'file.txt');
    while (<MYFILE1>) {
        if (/.subnetwork/) {
            my @string3 = split /[:,\s]+/, $_;
            $subnetwork2 = $string3[2];
        }
        if (/.set/) {
            my @string2 = split /[:,\s]+/, $_;
            $file_name = $subnetwork2 . $string2[1] . $ext;
        }
        if (/.domain/ || /.end/ || ($. < 6)) {
            my $domain = $_;
            foreach (@files) {
                if (/.text/ && /$subnetwork2/) {
                    prnt { $files_list{$_} } "$domain";
                }
            }
        }
        elsif ($. >= 6) {
            print { $files_list{$file_name} } "$_";
        }
     }
    close(MYFILE1);
    foreach my $val (values %files_list) { close($val); }
    closedir $dir;
}

main_process; 
```

该脚本根据 的内容在当前目录中创建文件`file.txt`，然后再次打开这些文件。

然后它开始处理`file.txt`并根据动态设置的文件名重定向行。

文件名的这种设置也是基于文件中的数据`file.txt`。

我在这里面临的问题是重定向只到一个文件。这意味着文件句柄存在一些问题。

预期创建的所有文件都已完美创建，但数据仅进入其中一个。

我怀疑我在重定向时使用的文件句柄是否有问题。

有人可以帮忙吗？示例输入文件如下：

```
..cnai #Generated on Thu Aug 02 18:33:18 2012 by CNAI R21D06_EC01, user tcssrpi
..capabilities BASIC
.utctime 2012-08-02 13:03:18
.subnetwork ONRM_ROOT_MO:NETSim_BAG
.domain BSC
.set BAG01
AFRVAMOS="OFF"
AWBVAMOS="OFF"
ALPHA=0
AMRCSFR3MODE=1,3,4,7
AMRCSFR3THR=12,21,21
AMRCSFR3HYST=2,3,3
AMRCSFR3ICM=
AMRCSFR4ICM=
USERDATA=""
.set BAG02
AFRVAMOS="OFF"
AWBVAMOS="OFF"
ALPHA=0
AMRCSFR3MODE=1,3,4,7
AMRCSFR3THR=12,21,21
AMRCSFR3HYST=2,3,3
..end 
```

我面临的问题是在执行过程中：

```
> process.pl 
Use of uninitialized value in ref-to-glob cast at process.pl line 79, <MYFILE1> line 6.
Can't use string ("") as a symbol ref while "strict refs" in use at process.pl line 79, <MYFILE1> line 6. 
```

我能理解的问题是这一行：

```
print { $files_list{$_} } "$domain"; 
```

但我无法理解为什么！

我需要的输出是：

```
> cat NETSim_BAGBAG01.text 
.set BAG01
AFRVAMOS="OFF"
AWBVAMOS="OFF"
ALPHA=0
AMRCSFR3MODE=1,3,4,7
AMRCSFR3THR=12,21,21
AMRCSFR3HYST=2,3,3
AMRCSFR3ICM=
AMRCSFR4ICM=
USERDATA=""

> cat NETSim_BAGBAG02.text
.set BAG02
AFRVAMOS="OFF"
AWBVAMOS="OFF"
ALPHA=0
AMRCSFR3MODE=1,3,4,7
AMRCSFR3THR=12,21,21
AMRCSFR3HYST=2,3,3
> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T11:41:41.337

您在以下几行中的问题：

```
open(PLOT,">>$_") || die("This file will not open!");
$files_list{$_}=*PLOT; 
```

您应该将它们替换为：

```
open($files_list{$_},">>$_") || die("This file will not open!"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-10T11:55:05.997

这部分代码是关键：

```
 open(PLOT,">>$_") || die("This file will not open!");
 $files_list{$_}=*PLOT; 
```

问题是您实际上是在使用文件句柄 PLOT 作为全局变量；哈希中的每个条目都指向同一个文件句柄。替换为如下内容：

```
 local *PLOT;
 open(PLOT,">>$_") || die("This file will not open!");
 $files_list{$_}=*PLOT; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T12:38:13.223

你已经让自己非常纠结于这个程序。不需要哈希表或多个子例程。

这是对您的代码的快速重构，该代码适用于您的数据并写入文件`NETSim_BAG.BAG01.text`和`NETSim_BAG.BAG02.text`. 我在子网和集合之间放了一个点，以使名称更清晰一些。

```
use strict;
use warnings;

my $out_fh;
open my $fh, '<', 'file.txt' or die $!;
my ($subnetwork, $set, $file);

while (<$fh>) {

    if ( /^\.subnetwork\s+\w+:(\w+)/ ) {
      $subnetwork = $1;
    }
    elsif ( /^\.set\s+(\w+)/ and $subnetwork) {
      $set = $1;
      $file = "$subnetwork.$set.text";
      open $out_fh, '>', $file or die qq(Unable to open "$file" for output: $!);
      print $out_fh;
    }
    elsif ( /^\.\.end/ ) {
      undef $subnetwork;
      undef $file;
    }

    if (/^[^.]/ and $file) {
      print $out_fh $_;
    }
} 
```

# sqlite - 执行查询“删除”时出现 DatabaseIOException

> ID：11900618
> 
> 赞同：1
> 
> 时间：2012-08-10T11:21:32.407
> 
> 标签：sqlite, blackberry, java-me

任何人都可以帮助告诉我我的代码有什么问题吗？我正在尝试连接到 SQLite 数据库，并执行一些查询。尝试创建和打开数据库，创建并插入表时，没有返回异常。但是当我尝试执行删除语句时，

> DatabaseIOException: 文件系统错误 (12)

总是回来。我不确切知道异常的原因。你能告诉我通常是什么导致这种异常吗？我什至不知道什么时候需要关闭数据库，什么时候不需要。[这个解决方案](http://supportforums.blackberry.com/t5/Java-Development/DatabaseIOException-File-system-error-12-when-using-database/td-p/1684441)也让我感到困惑。

这是我的代码：

```
public class DatabaseManager {

    Logger log = new Logger();
    Database db;

    public DatabaseManager() {
        createDatabase();
    }

    private void createDatabase() {

        // Determine if an SDCard is present 
        boolean sdCardPresent = false;
        String root = null;
        Enumeration enum = FileSystemRegistry.listRoots();
        while (enum.hasMoreElements()) {
            root = (String) enum.nextElement();
            if(root.equalsIgnoreCase("sdcard/")) {
                sdCardPresent = true;
            }     
        }
        if(!sdCardPresent) {
            alert("This application requires an SD card to be present. Exiting application...");
        }          
        else {    
            try {
                URI uri = URI.create("/SDCard/databases/MyAdvanceUI/myadvanceui.db");
                db = DatabaseFactory.openOrCreate(uri);
                db.close();
                //alert("Database OK!");
            } catch (Exception e) {
                // TODO Auto-generated catch block
                //alert("Exception in createDatabase(): " + e);
            }
        }
   }

private void alert(final String message) {
    UiApplication.getUiApplication().invokeLater(new Runnable() {
        public void run() {
            Dialog.inform(message);
            System.exit(0);
        }
    });
}

private void createTableTask() {
    try {
        URI uri = URI.create("/SDCard/databases/MyAdvanceUI/myadvanceui.db");
        db = DatabaseFactory.open(uri);
        Statement st = db.createStatement("CREATE TABLE IF NOT EXISTS t_task (id INTEGER PRIMARY KEY AUTOINCREMENT, "
                + "client TEXT, task TEXT)");
        st.prepare();
        st.execute();
        st.close();
        db.close();
        //alert("Table Task created!");
    } catch (Exception e) {
        // TODO: handle exception
        //alert("Exception in createTableTask(): " + e);
    }
}

private void insertTableTask() {

    String[] clients = { "Budi Setiawan", "Dian Kusuma", "Joko Ahmad", "Titi Haryanto", "Wahyu" };
    String[] tasks = { 
        "Penawaran terhadap instalasi server",
        "Follow up untuk keperluan produk terbaru",
        "Pendekatan untuk membina relasi", 
        "Penawaran jasa maintenance",
        "Penawaran terhadap instalasi database" 
    };

    try {
        URI uri = URI.create("/SDCard/databases/MyAdvanceUI/myadvanceui.db");
        db = DatabaseFactory.open(uri);

        for(int i = 0; i < clients.length; i++) {
            Statement st = db.createStatement("INSERT INTO t_task (client, task) VALUES (?, ?)");
            st.prepare();
            st.bind(1, clients[i]);
            st.bind(2, tasks[i]);
            st.execute();
            st.close();

        }
        db.close();
    } catch (Exception e) {
        // TODO: handle exception
        //alert("Exception in insertTableTask(): " + e);
    }

}

public void loadInitialData() {
    createTableTask();
    insertTableTask();
}

public Cursor getTasks() {
    // TODO Auto-generated method stub
    Cursor results = null;
    try {
        URI uri = URI.create("/SDCard/databases/MyAdvanceUI/myadvanceui.db");
        db = DatabaseFactory.open(uri);
        Statement st = db.createStatement("SELECT client, task FROM t_task");
        st.prepare();
        results = st.getCursor();

        return results;
    } catch (Exception e) {
        // TODO: handle exception
        //alert("Exception: " + e);
    }

    return results;
}

public void delete(String string) {
    // TODO Auto-generated method stub

    try {
        URI uri = URI.create("/SDCard/databases/MyAdvanceUI/myadvanceui.db");
        db = DatabaseFactory.open(uri);
        Statement st = db.createStatement("DELETE FROM t_task WHERE client=?");
        st.prepare();
        st.bind(1, string);
        st.execute();
    } catch (Exception e) {
        // TODO: handle exception
        alert("Exception: " + e);
    }
    }

} 
```

感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T11:59:57.007

我没有看到您关闭语句并在操作之后关闭`select`数据库`delete`。很可能您无法打开数据库，因为它没有正确关闭。

**当用户将设备作为外部驱动器安装到 PC 时，大警告**SD 卡不可用。有些设备没有预装 SD 卡。5 个操作系统设备上的数据库操作真的很慢。您的`alert`方法代码不会关闭数据库，在下一次应用程序启动后打开它可能会出现问题。

**警告**正如@pankar 在评论中提到的，您应该添加`finally {}`肯定会关闭资源的位置。在您当前的实现中，如果您在执行中遇到异常，您将永远不会关闭数据库。

**重大改进**您不需要在每个循环中都创建和准备语句。以前做就行了`for`。绑定并执行每个循环。并在之后关闭声明`for`。

**改进**您可以在应用程序运行周期中保留一个打开的数据库。它将为您节省一些代码行和打开关闭的时间。

**符号**将参数命名为“字符串”是一种不好的做法。我会把它重命名为更有意义的东西。

# c# - 普通用户 windows server 2008 的 MediaElement

> ID：11900624
> 
> 赞同：1
> 
> 时间：2012-08-10T11:21:49.530
> 
> 标签：c#, wpf

我在以非管理员身份登录的 Windows Server 2008 上的 MediaElement 存在非常奇怪的问题。每次我尝试播放视频时都会出现错误 HRESULT: 0xC00D11B1

以下是详细信息：

1.  当我以管理员身份登录时，此视频正在播放
2.  该视频正在管理员和用户帐户上使用 WMP
3.  当以不同于管理员的用户身份登录时，即使该用户已添加到管理员组，该视频也无法在 mediaelement 中播放。
4.  即使我以管理员身份运行应用程序，它也不会工作。

这只发生在 Windows Server 2008 上，一切都在 Windows Server 2008 R2 上运行

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T12:24:13.840

> 0xC00D11B1 是 WMP 引发的错误，表明打开媒体文件失败，因为 WPF 在幕后使用其 OCX。这可能是由于多种原因，包括打开 DRM 内容和缺少所需的编解码器。过去有人也遇到过这个问题，但后来由于 MediaElement.Source URI 中的错误而被发现。您可以查看[http://forums.microsoft.com/MSDN/ShowPost.aspx?PostID=1695695&SiteID=1](http://forums.microsoft.com/MSDN/ShowPost.aspx?PostID=1695695&SiteID=1)看看这是否解决了问题。另外，这是否发生在任何其他媒体文件上？

来源：[http ://social.msdn.microsoft.com/forums/en-US/wpf/thread/2d80888f-4f1d-450c-90ee-2568b7283e23/](http://social.msdn.microsoft.com/forums/en-US/wpf/thread/2d80888f-4f1d-450c-90ee-2568b7283e23/)

# ios - UIButton 保持突出显示，直到 UITableView 结束滚动

> ID：11900626
> 
> 赞同：1
> 
> 时间：2012-08-10T11:21:52.287
> 
> 标签：ios, uitableview, uiscrollview, uibutton

我有我自己的自定义导航控制器（它是 UIViewController 的子类），它有一个用于视图控制器的堆栈。它有一个自定义导航栏和一个内容视图，我在其中将视图控制器的视图添加到我的视图控制器堆栈的顶部。然后导航栏，它是 UIView 的子类，我没有子类 UINavigationBar，因为我不需要，有一个后退按钮，还有一个按钮，此时没有任何操作连接。我的问题是，如果我滚动 UITableView（属于堆栈上的当前视图控制器）并按下后退按钮或另一个按钮，它们都会保持突出显示，直到 UITableView 结束滚动。这是有史以来最奇怪的行为，我不明白为什么会这样。请问有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T13:24:11.197

显然，如果我在 IBAction 上调用 [button setHighlighted:NO] 它会取消突出显示它，即使 UITableView 仍在滚动

# python - 将非理想列表格式导出到 Excel

> ID：11900632
> 
> 赞同：2
> 
> 时间：2012-08-10T11:22:09.617
> 
> 标签：python, excel, list, export, export-to-excel

我有一个大列表，包含一系列 id 和相关值，极短的版本如下所示：

```
large = [('550111', [(4, 5, 8), (6, -4, -6)]), ('222211', [(2, -4, 5), (1, 15, -4)])] 
```

我想以某种方式`5501`将其导出到 excel 中`A1`，然后第一组值将在它下面`B1`，`B2`&`B3`和下一组在`C1`, `C2`, 中`C3`，然后有一个空格然后`2222`in `E1`，第一组值相关`F1`, `F2`&中的它, ,`F3`中的第二个。即在Excel中（每个值都有自己的Excel矩形事物），例如：`G1``G2``G3`

```
550111
4 5 8
6 -4 -6
'space here (dont know how to add one)'
222211
2 -4 5
1 15 -4
'SPACE HERE AGAIN' 
```

我尝试了以下方法：

```
writer_jobby = csv.writer(open('poo5.csv', 'wb'), delimiter=',')

for i in large:

    if i == '[':

        i.replace()

    if i == ']':

        i.replace()

    if i == '(':

        i.replace()

    if i == ')':

        i.replace()

    else:

        writer_jobby.writerow(i) 
```

但是我完全是胡说八道，因为我正在努力解决如何处理列表中的 the`[]`和 the `()`。如果有人能阐明我如何处理数据以便我可以以所需的方式导出数据，我将不胜感激。谢谢你。

非常感谢帮助。

***编辑***

新的所需形式，包括。**绝对最大值**：

```
550111
4,5,8 
6,-4,-6
'space here'
'Max:'
6, 5, 8
'space here'     
222211 
2,-4,5 
1,15,-4
'space here'
'Max:'
2, 15, 5 
'space here'
1, 2, 3, ........, 8904 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T11:32:41.480

也许这样的事情会有所帮助？

```
import csv
large = [('5501', [(4, 5, 8), (6, -4, -6)]), ('2222', [(2, -4, 5), (1, 15, -4)])]

with open("out1.csv", "wb") as fp: # open the file, call it fp, and autoclose it
    writer = csv.writer(fp, delimiter=",")
    for entry in large:
        writer.writerow([entry[0]]) # one-element list
        for line in entry[1]: # loop over each tuple in the second element
            writer.writerow(line)
        writer.writerow([]) # write an empty row 
```

这产生

```
localhost-2:coding $ cat out1.csv 
5501
4,5,8
6,-4,-6

2222
2,-4,5
1,15,-4 
```

该`csv`模块通常通过从元素中写入行来使用。我不知道是什么`final`，但看起来你正试图用由 制成的字符串做一些事情`large`，这不会很好地工作。

# python - Tornado 异步 HTTP 增量返回结果

> ID：11900634
> 
> 赞同：5
> 
> 时间：2012-08-10T11:22:16.853
> 
> 标签：python, asynchronous, tornado

根据我从 tornado.gen 模块文档中了解到的情况，tornado.gen.Task 由 tornado.gen.Callback 和 tornado.gen.Wait 组成，每个 Callback/Wait 对都与唯一键关联......

```
 @tornado.web.asynchronous
  @tornado.gen.engine
  def get(self):
      http_client = AsyncHTTPClient()
      http_client.fetch("http://google.com",
                        callback=(yield tornado.gen.Callback("google")))

      http_client.fetch("http://python.org",
                        callback=(yield tornado.gen.Callback("python")))

      http_client.fetch("http://tornadoweb.org",
                        callback=(yield tornado.gen.Callback("tornado")))
      response = yield [tornado.gen.Wait("google"), tornado.gen.Wait("tornado"), tornado.gen.Wait("python")]

      do_something_with_response(response)
      self.render("template.html") 
```

所以上面的代码会得到来自不同 URL 的所有响应。现在我真正需要完成的是在一个 http_client 返回数据后立即返回响应。因此，如果“tornadoweb.org”首先返回数据，它应该执行 self.write(respose) 并且 def get() 中的循环应该继续等待其他 http_clients 完成。关于如何使用 tornado.gen 接口编写此内容的任何想法。

我正在尝试做的非常模糊的实现（并且语法不正确）是这样的

```
class GenAsyncHandler2(tornado.web.RequestHandler):
    @tornado.web.asynchronous
    @tornado.gen.engine
    def get(self):
        http_client = AsyncHTTPClient()
        http_client.fetch("http://google.com",
                          callback=(yield tornado.gen.Callback("google")))

        http_client.fetch("http://python.org",
                          callback=(yield tornado.gen.Callback("python")))

        http_client.fetch("http://tornadoweb.org",
                          callback=(yield tornado.gen.Callback("tornado")))

        while True:
            response = self.get_response()
            if response:
                self.write(response)
                self.flush()
            else:
                break
        self.finish()

    def get_response(self):
        for key in tornado.gen.availableKeys():
            if key.is_ready:
                value = tornado.gen.pop(key)
                return value
        return None 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-11T20:32:16.197

在这种情况下，您不应该使用`inline callbacks`, 即`gen`. 在所有回调完成后也`self.render`将被调用。**如果您想从服务器部分返回响应 - 部分呈现它。**

这样想（这是唯一有很大改进空间的想法）：

```
 response = []
  @tornado.web.asynchronous
  def get(self):
      self.render('head.html')
      http_client = AsyncHTTPClient()

      http_client.fetch("http://google.com",
                        callback=self.mywrite)

      http_client.fetch("http://python.org",
                        callback=self.mywrite)

      http_client.fetch("http://tornadoweb.org",
                        callback=self.mywrite)

      self.render('footer.html')
      self.finish()

  def mywrite(self, result):
      self.render('body_part.html')
      self.response.add(result)
      if len(self.response) == 3:
        do_something_with_response(self.response) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-15T15:20:21.340

除此之外，实际上还有一个方法 WaitAll 等待所有结果，并在所有 HTTPCliens 完成响应后返回。我已经在我的龙卷风分支（[https://github.com/pranjal5215/tornado](https://github.com/pranjal5215/tornado)）中提交了差异。我添加了一个类 WaitAny，它是异步的 WaitAll 并在一个 HTTPClient 返回结果后立即返回结果。

差异[在](https://github.com/pranjal5215/tornado/wiki/Add-WaitAny-to-make-WaitAll-return-results-incrementally)（[https://github.com/pranjal5215/tornado/commit/dd6902147ab2c5cbf2b9c7ee9a35b4f89b40790e），（https://github.com/pranjal5215/tornado/wiki/Add-WaitAny-to-make-WaitAll-return-results-](https://github.com/pranjal5215/tornado/commit/dd6902147ab2c5cbf2b9c7ee9a35b4f89b40790e)[递增](https://github.com/pranjal5215/tornado/wiki/Add-WaitAny-to-make-WaitAll-return-results-incrementally)）

示例用法：

```
class GenAsyncHandler2(tornado.web.RequestHandler):
    @tornado.web.asynchronous
    @tornado.gen.engine
    def get(self):
        http_client = AsyncHTTPClient()
        http_client.fetch("http://google.com",
                          callback=(yield tornado.gen.Callback("google")))

        http_client.fetch("http://python.org",
                          callback=(yield tornado.gen.Callback("python")))

        http_client.fetch("http://tornadoweb.org",
                          callback=(yield tornado.gen.Callback("tornado")))
        keys = set(["google", "tornado", "python"])
        while keys:
            key, response = yield tornado.gen.WaitAny(keys)
            keys.remove(key)
            # do something with response
            self.write(str(key)+"        ")
            self.flush()
        self.finish() 
```

# android - 如何在一行中设置 4 个 android 菜单图标

> ID：11900636
> 
> 赞同：1
> 
> 时间：2012-08-10T11:22:26.790
> 
> 标签：android

> 我想在一行中设置 4 个菜单图标。它在一行中显示 2 个菜单图标，在第二行中显示 2 个图标

* * *

这是我的菜单项代码

```
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android">
<!-- Single menu item Set id, icon and Title for each menu item
-->

<item android:id="@+id/menu_bookmark"
android:icon="@drawable/homf"
android:title="Home" />

<item android:id="@+id/menu_save"
android:icon="@drawable/shopcrt"
android:title=" Shopping Cart" />

<item android:id="@+id/menu_search"
android:icon="@drawable/icon_search"
android:title="Search" />

<item android:id="@+id/about"
android:icon="@drawable/icon_share"
android:title="About" />

</menu> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T12:07:37.683

您可以覆盖菜单按钮以使用按钮显示您的自定义视图，您可以从[Menu My way 项目](http://www.codeproject.com/Articles/173121/Android-Menus-My-Way)中获得一些灵感。源代码也附上。

![在此处输入图像描述](../Images/ac4cd8338cb19e86650b62accf1a9b63.png)

```
/**
     * Manage  Menu Items Click.
     */
    @Override
    public void MenuItemSelectedEvent(CustomMenuItem selection) {

        switch (selection.getId()){

        case MENU_ITEM_FIRST:
            Intent myIntent = new Intent(CurrentActivity.this, ActivityToLaunch.class);
                    startActivity(myIntent);
            break;

        case MENU_ITEM_SECOND:
            //.....
            break;

        case MENU_ITEM_THIRD:
                    //....
            break;
        }

    }
} 
```

# objective-c - 如何使用 CAMediaTimingFunction 映射自定义值？

> ID：11900639
> 
> 赞同：3
> 
> 时间：2012-08-10T11:22:30.330
> 
> 标签：objective-c, ios, animation, timing

我想使用 CAMediaTimingFunction（例如 kCAMediaTimingFunctionEaseIn）将输入值（0-1）映射到输出值（0-1），就像[文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/CAMediaTimingFunction_class/Introduction/Introduction.html)说这个类一样。但是，此功能似乎根本没有公开。

有什么方法可以让我为自己的自定义值访问此功能？这不在 UIView、CALayer 等中——它只是在一些我想使用 iOS 曲线的自定义代码中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T11:34:35.087

实际上，该功能是唯一公开的功能。CAMediaTimingFunction 是一个存储两个控制点坐标的类，这些控制点定义了一条从 (0.0,0.0) 开始到 (1.0,1.0) 结束的贝塞尔曲线。这样的曲线**实际上**是从区间 [0,1] 到区间 [0,1] 的映射。

如果您想了解如何为特定曲线设置控制点的坐标，您可能想用谷歌搜索什么是贝塞尔曲线。

附录：

正如您所澄清的，您希望使用现有的 CAMediaTimingFunction 实例来执行从一个值到它的转换值的映射（也就是计算映射）。您可以使用 getControlPointAtIndex:values: 从实例中检索控制点的坐标，并使用它们来计算映射。有关数学，请参见[http://en.wikipedia.org/wiki/Bézier_curve](http://en.wikipedia.org/wiki/B%C3%A9zier_curve)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-29T22:27:16.303

这就是您需要的：[https ://stackoverflow.com/a/19084008/251440](https://stackoverflow.com/a/19084008/251440)

我自己需要它，所以构建了一个类，其接口和功能`CAMediaTimingFunction`与所需的`-valueForX:`方法完全相同。

# dependency-injection - Symfony2 DIC > 为什么服务类没有被代理？

> ID：11900644
> 
> 赞同：1
> 
> 时间：2012-08-10T11:22:39.890
> 
> 标签：dependency-injection, symfony-2.1

我真的很喜欢 Symfony2 DIC 的东西，服务 XML 配置器很容易使用。但是，当我声明一项新服务时，例如：

```
<service id="form.csrf_provider" class="Symfony\Component\Form\Extension\Csrf\CsrfProvider\SessionCsrfProvider">
  <argument type="service" id="session"/>
  <argument>ThisTokenIsNotSoSecretChangeIt</argument>
</service> 
```

如果我打电话，会话将自动创建

```
$container->get('form.csrf_provider') 
```

即使我根本不使用它（即使您不使用它，Twig 也会使用它 Form..），并且作为级联效果，创建了许多服务类并且从未使用过！那要花很多钱。

我知道学说对实体使用代理模式，你调用的实体没有加载

```
$entity->getTitle() // etc.... 
```

他们真的应该为服务类做同样的事情（当然只在生产环境中），这将大大改善 Symfony2。我目前的解决方案是将容器本身作为参数传递，但这打破了 DIC 目标；-(

有人有其他解决方案吗？谢谢

# c# - 使用ItemControl时如何在C#中获取事件的源

> ID：11900645
> 
> 赞同：1
> 
> 时间：2012-08-10T11:22:43.607
> 
> 标签：c#, wpf, visual-studio-2010, xaml

这是一个 Wpf 应用程序，我创建了 6 个图像。单击每个图像我想显示一个页面。Xaml 代码与此类似。

```
 <Controls:ReflectionControl Grid.Row="2">
            <ItemsControl ItemsSource="{Binding Path=DashBoardApps}" VerticalAlignment="Bottom" HorizontalAlignment="Center">
                <ItemsControl.ItemsPanel>
                    <ItemsPanelTemplate>
                        <Controls:FishEyeControl />
                    </ItemsPanelTemplate>
                </ItemsControl.ItemsPanel>
                <ItemsControl.ItemTemplate>
                    <DataTemplate>
                        <StackPanel Orientation="Vertical">
                            <TextBlock x:Name="txtAppName" Text="{Binding Path=ApplicationName}" TextAlignment="Center" Visibility="Hidden" FontSize="7px" Foreground="#eff7ff" />
                            <Image Source="{Binding Path=ApplicationImage}" Height="32" Width="32" MouseLeftButtonDown="Image_MouseLeftButtonDown_1"/>
                        </StackPanel>
                        <DataTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="txtAppName" Property="Visibility" Value="Visible" />
                            </Trigger>
                        </DataTemplate.Triggers>
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
            </ItemsControl>
        </Controls:ReflectionControl> 
```

我已关联事件

```
MouseLeftButtonDown 
```

至

```
Image_MouseLeftButtonDown_1 
```

cs代码：

```
 private void Image_MouseLeftButtonDown_1(object sender, System.Windows.Input.MouseButtonEventArgs e)
    {

            UserControl2 uc2 = new UserControl2();
            pageTransitionControl.ShowPage(uc2);
            canvas1.Visibility = System.Windows.Visibility.Hidden;
            //canvas2.Visibility = System.Windows.Visibility.Visible;
            canvas3.Visibility = System.Windows.Visibility.Hidden;

    } 
```

我想识别每个事件的来源（生成事件的图像）并分配类似于上述代码的代码。我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T11:25:24.693

在事件处理程序中，**发送者**是事件起源的对象

```
private void Image_MouseLeftButtonDown_1(object sender, ... 
```

在您的情况下，您必须将其转换为`Image`，然后您将拥有自己的起源。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T11:25:33.560

回调 ( `sender`) 的第一个参数是对被点击图像的引用。你必须`try`施放它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T13:38:43.367

> 总共有6张图片。由于我使用的是 ItemsControl，我不知道究竟是哪个图像触发了事件。

在图像上使用与 Inputbinding 组合的命令，并将数据上下文传递给命令参数。

```
 <Image>
                <Image.InputBindings>
                    <MouseBinding Gesture="LeftClick" Command="{Binding MyCommand}" CommandParameter="{Binding}"/>
                </Image.InputBindings>
            </Image> 
```

作为命令参数，您将在 itemscontrol 中拥有您的项目

# regex - 在Ruby中使用正则表达式从路径中剥离最后一个目录？

> ID：11900648
> 
> 赞同：7
> 
> 时间：2012-08-10T11:22:50.950
> 
> 标签：regex, ruby-on-rails-3, url, path

我有一个`Dir.glob`在 Rails 3 中使用的文档列表。

结果是类似于以下的路径列表：

```
/home/danny/nurserotas/GREEN WEEK 2ND JAN 2012.xls 
```

我想要实现的是剥离所有内容，包括最后一个正斜杠。所以上述路径的结果是：

```
GREEN WEEK 2ND JAN 2012.xls 
```

我将使用这些作为链接，所以我不确定用 %20 替换空格是否是个好主意。

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-10T11:26:10.983

最粗暴的方式：

```
path = /home/danny/nurserotas/GREEN WEEK 2ND JAN 2012.xls
path.split('/').last # => GREEN WEEK 2ND JAN 2012.xls 
```

这也可以做到：`File.basename(path)`

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-11-02T20:35:19.580

这是我推荐的方式。

```
File.basename("/home/danny/nurserotas/GREEN WEEK 2ND JAN 2012.xls") 
```

作为奖励，如果您需要剥离任何扩展名：

```
File.basename("/home/danny/nurserotas/GREEN WEEK 2ND JAN 2012.xls", ".*") 
```

# php - 从 MySQL 表动态构建 JQuery 导航菜单

> ID：11900652
> 
> 赞同：-2
> 
> 时间：2012-08-10T11:23:10.143
> 
> 标签：php, mysql, jquery

我想从 MySQL 表中动态填充此菜单 (http://www.hv-designs.co.uk/tutorials/sliding_menu/sliding_menu.html) 的值。即，当用户单击顶部菜单按钮时，菜单项应该是 MySQL 表中的行。几天来我一直试图弄清楚自己，但没有运气。这是我所做的：

MySQL 表：具有以下字段的“国家/地区”：id、name、capital_city PhP 文件：MySQL 连接、查询及其在 php 文件中的打印 ok。上面带有 JQuery 菜单的 Html 页面。

如果我能找到一个类似的例子，我可能会让它工作，但到目前为止还没有找到。

有人知道吗？

提前致谢。

麦克风

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T11:36:10.447

只需对从数据库返回的结果集执行 PHP foreach 循环。

```
<div id="button">
    <img class="menu_class" width="184" height="32" border="0" src="images/button.png">
    <ul class="the_menu" style="display: block;">
        <?php
        foreach ($aCountries as $aCountry) {
            echo '<li><a href="#">'.$aCountry['name'].'</a></li>';
        }
        ?>
    </ul>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T11:36:04.370

您必须按照以下步骤操作。

1) html

```
<div id="button">
   <img width="184" border="0" height="32" class="menu_class" src="images/button.png">
</div> 
```

2) Onlick 按钮调用 ajaxfile 像这样返回你的国家列表的结果

```
<ul class="the_menu">
  <li><a href="#">Country #1</a></li>
  <li><a href="#">Country #2</a></li>
  <li><a href="#">Country #3</a></li>
 </ul> 
```

3) 将其附加到 div 按钮

现在完成了

# python - get_position() 在使用颜色条时会做一些奇怪的事情

> ID：11900654
> 
> 赞同：2
> 
> 时间：2012-08-10T11:23:22.717
> 
> 标签：python, image, matplotlib

我有一个数据矩阵，其中 x 和 y 轴是对数的。我正在尝试使用`imshow`来显示矩阵，但是由于我想要对数轴，因此我将`imshow`轴中的刻度设置为`[]`，然后覆盖另一组轴：

```
import matplotlib.pyplot as plt
import numpy as np

# the x,y max and min are the log values
array = np.zeros((2,2))
array[1,1] = -1
fig = plt.figure()
ax = plt.imshow(
    array, 
    extent = (0,1, 1, 0), 
    interpolation = 'nearest').get_axes()
ax.invert_yaxis()

# add a colorbar
# cb = plt.colorbar()      # <----- THIS CAUSES TROUBLE
# cb.set_label('zbar')

ax.set_aspect(1)
ax.xaxis.set_ticks([])
ax.yaxis.set_ticks([])
position = ax.get_position()
aspect = ax.get_aspect()

# overlay another set of axes 
ax_log = fig.add_subplot(111, frameon = False)
ax_log.set_xscale('log')
ax_log.set_yscale('log')
ax_log.axis((10**0, 10**1, 10**0, 10**1)) # old min and max but exponentiated  
ax_log.set_position(position)
ax_log.set_aspect(aspect)

plt.savefig('test.png', bbox_inches = 'tight')
plt.close() 
```

没有颜色条，这可以正常工作：

![没有彩条](../Images/99b4e021e4231bb05f0e84c480a422ea.png)

但是当我取消注释添加颜色条的行时，我得到了一个奇怪的转变：

![带彩条](../Images/7b7ff9a50e04418379e4059f803d094a.png)

看起来颜色条以某种方式将图像略微向左移动，但鉴于我`get_position()`在创建颜色条后调用，这看起来很奇怪。我是否忽略了制作这个情节的更简单方法？有一些简单的解决方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T13:16:34.207

Searching around a bit, I found a workaround, maybe there's a better one...

The issue seems to be that `plt.colorbar()` will 'steal' space from the plot it's drawn on. It's still a bit strange, because I'd still expect `get_position()` to return the proper coordinates. But as a workaround I used `GridSpec` and the raw `Colorbar` constructor.

```
import matplotlib.pyplot as plt
import numpy as np
from matplotlib.gridspec import GridSpec
from matplotlib.colorbar import Colorbar

# the x,y max and min are the log values
array = np.zeros((2,2))
array[1,1] = -1
fig = plt.figure()
gs = GridSpec(10,11)            # create a 10 x 11 grid
ax = plt.subplot(gs[:,0:-1])    # make subplot on 10 x 10 part 
im = plt.imshow(
    array, 
    extent = (0,1, 1, 0), 
    interpolation = 'nearest', 
    axes = ax)
ax.invert_yaxis()

# add a colorbar
cb_ax = plt.subplot(gs[:,-1])   # put the colorbar on the last column
cb = Colorbar(ax = cb_ax, mappable = im ) # use the raw colorbar constructor
cb.set_label('zbar')

ax.set_aspect(1)
ax.xaxis.set_ticks([])
ax.yaxis.set_ticks([])
position = ax.get_position()
aspect = ax.get_aspect()

# overlay another set of axes 
ax_log = fig.add_subplot(111, frameon = False) # can't use gridspec?
ax_log.set_xscale('log')
ax_log.set_yscale('log')
ax_log.axis((10**0, 10**1, 10**0, 10**1)) # old min and max but exponentiated  
ax_log.set_position(position)
ax_log.set_aspect(aspect)

plt.savefig('test.pdf', bbox_inches = 'tight')
plt.close() 
```

It's also quite strange that I can't use the `GridSpec` object to initialize the second set of axes (doing so makes the image disappear).

# c++ - 删除动态对象

> ID：11900662
> 
> 赞同：0
> 
> 时间：2012-08-10T11:24:23.577
> 
> 标签：c++, dynamic

我有一种家庭作业，但我被困住了......代码如下所示：

```
class X {  
...  
};  

class Y {  
public:   
Y(X*);  
...  
};

int main () {  
X* px = new X;  
new Y(px);  
!@##   
} 
```

任务：

使用 new Y(px) 创建的 Y 类的动态对象在 !@## 处不会丢失，可以删除。这怎么可能？为类 X 和 Y 编写附加代码，以删除对象。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T11:28:47.473

我想到的一种解决方案是：

*   添加一个指向`Y`in`class X`
*   在 的构造函数中`Y`，更改指向的对象，`X*`使其具有指向新创建`Y`对象的指针
*   在`X`释放内存的析构函数中，由指针指向，存储创建`Y`对象的地址

* * *

由于@EdHeal 的评论，我将进行编辑：是的，存在潜在问题。使用这种“方法”，您可能会尝试多次删除同一个`Y`对象（如果它被传递给多个`X`对象）。

这是事实，但这是极少数情况。
如果指针`X::Y*`是私有的并且**没有**getter（换句话说，`X`是这个对象的唯一所有者`Y`），那么就没有这种可能性。

要 double+ 删除 new `Y`，您**需要**将某个`X`对象的指针传递给`Y`, 到另一个`X`对象。换句话说，类似：

```
X* px = new X;  
new Y(px); 
X* another_px = new X;
another_px->Y_pointer = px->Y_pointer; // or using some accessors 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T11:27:46.473

想想当`Y(px)`被执行时会发生什么。叫什么？你怎么能用它？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T11:26:33.743

它*丢失*了，因为您没有将 的返回值保存`new Y`到适当的指针变量中。

如果您不想丢失它，请以这种方式重写：

```
Y* py = new Y(px);

// ...

delete py; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-10T11:29:26.033

您需要抓住来自新运算符 ( `new Y(px);`) 的指针。

IE

```
py = new Y(px); 
```

然后只需使用删除`px`和`py`

对于创建它的事物来说，删除它通常是好的策略。

# php - 可能影响 PHP str_replace 行为的设置

> ID：11900666
> 
> 赞同：0
> 
> 时间：2012-08-10T11:24:34.243
> 
> 标签：php, string, str-replace

我目前正在开发一种替换工具，该工具将使用 smarty 输出过滤器动态替换网站中的某些字符串（包括 html）。

为了进行替换，我使用 PHP 的[`str_ireplace`](http://de.php.net/str_ireplace)方法，它从数据库中读取应该替换的代码和替换代码，然后将结果传递给 smarty 输出（使用输出过滤器），类似方式如下。

```
$tpl_source = str_ireplace($replacements['sourceHTML'], $replacements['replacementHTML'], $tpl_source); 
```

问题是，虽然它在我的开发服务器上运行良好，但一旦上传到实时服务器，替换偶尔会失败。不过，相同的替换在我的开发版本上工作得很好。经过一些检查和谷歌搜索后，我无法找到关于这个问题的太多信息。所以我的问题是，什么会影响`str_replace`' 的行为？

谢谢

**使用替换示例进行编辑：**

```
$htmlsource = file_get_contents('somefile.html');
$newstr = str_replace('<a href="http://www.somelink">Some text</a>', 'sometext', $htmlsource);  // the text to be replaced does exist in the html source 
```

无法更换。经过一番检查，看起来 "> 的组合会产生问题。但只是它的组合。如果我尝试仅更改 (") 它有效，如果我尝试仅更改 (>) 它有效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T11:30:14.383

`str_replace()`如果要替换的字符串中有特殊字符，则可能是像变音符号这样的特殊字符无法正确显示在实时服务器上，因此会失败。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T11:40:14.370

两个系统上的输入字符串是否相同？你验证过这个吗？你确定吗？

检查事项：

*   HTML 属性的顺序是否相同？
*   属性值是否使用同一种引号？（例如`<a href='#'>`vs `<a href="#">`）
*   那里还有其他杂散的 HTML 代码吗？
*   实体编码是否相同？（例如`&nbsp;`vs `&#160;`- 相同的字符；不同的 HTML）
*   字符集是否相同？（例如 utf-8 与 ISO 8859-1：重音字符的编码方式不同）

这些事情中的任何一个都会影响结果并产生您所描述的失败。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T16:01:04.963

这是一个棘手的问题，最终与 str_replace 方法本身无关；

我们使用 smarty 作为压印系统。str_replace 方法由 smarty 输出过滤器使用，以便在某些情况下更改 html，就在它交付给用户之前。

这是 Smarty 输出过滤器代码：

```
function smarty_outputfilter_replace($tpl_source, &$smarty)
{
    $replacements = Content::getReplacementsForPage();
    if (is_array($replacements))
    {
        foreach ($replacements as $replacementData)
        {
            $tpl_source = str_replace($replacementData['sourcecode'], $replacementData['replacementcode'], $tpl_source);
        }
    }
    return ($tpl_source);
} 
```

所以这段代码时不时地失败了，原因很明显......直到我意识到 smarty 模板中的 HTML 代码正在被 Apache 过滤器操作。

这导致浏览器中的源代码（我们将其用作要被其他代码替换的代码）与模板代码（smarty 试图修改）不同。结果？str_replace 失败:)

# graph-algorithm - 汉密尔顿循环 v^2 算法？

> ID：11900667
> 
> 赞同：1
> 
> 时间：2012-08-10T11:24:50.080
> 
> 标签：graph-algorithm, hamiltonian-cycle

有没有一种算法可以在 v^2 时间内找到尽可能长的哈密顿循环。我正在运行一个程序，该程序需要在稀疏图（最大 4v 边）上找到循环，根据我的计算，我需要 v^2 或更好。我知道要在 v^2 中操作，它必须是启发式的，并且可能不是很准确。请告诉我这是否不可能，因为我不知道这是否可能。

# java - JTable的单元格中的按钮：在单元格中存储数据时保持Caption不变

> ID：11900673
> 
> 赞同：0
> 
> 时间：2012-08-10T11:25:07.040
> 
> 标签：java, swing, jtable, tablemodel, abstracttablemodel

我正在研究一个 JTable，它有一列包含`List<List<String>>`. 此列应向用户显示一个按钮。当他单击按钮时，将对单元格的数据进行一些处理。

使用以下代码，所有这些都可以正常工作：

```
 JFrame testFrame = new JFrame("TEST");
    testFrame.setLayout(new BorderLayout() );
    testFrame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

    List<List<String>> list = new ArrayList<List<String>>();
    list.add(new ArrayList<String>());
    list.get(0).add("Hello World");

    OptConstraintTableModel dm = new OptConstraintTableModel(
        new String[] {"Data with a button"}, new Class<?>[] {List.class}, new Object[][] { {list} } 
            );
    JTable table = new JTable(dm);
    Action action_show = new AbstractAction()
    {
        private static final long serialVersionUID = 1L;
        public void actionPerformed(ActionEvent e)
        {
            JTable table = (JTable)e.getSource();
            int modelRow = Integer.valueOf( e.getActionCommand() );
            System.out.println(((List<List<String>>) table.getValueAt(modelRow,0)).get(0).get(0));
        }
    };
    ButtonColumn button_show = new ButtonColumn(table, action_show, 0);
    testFrame.add(table);

    testFrame.pack();
    testFrame.setVisible(true); 
```

`ButtonColumn`取自[这里](http://tips4java.wordpress.com/2009/07/12/table-button-column/)的哪里以及 TableModel 在哪里实现如下：

```
public class OptConstraintTableModel extends AbstractTableModel {

/**
 * Default Serial Version UID
 */
private static final long serialVersionUID = 1L;

private String[] columnNames;
private List<Object[]> data;
private Class<?>[] values;

/**
 * @param objects2 
 * @param objects 
 * 
 */
public OptConstraintTableModel(String[] columnNames, Class<?>[] values, Object[][] data) {
    this.columnNames = columnNames;
    this.values = values;
    this.data = new ArrayList<Object[]>();
    for(Object[] row : data) {
        this.data.add(row);
    }
}

/**
 * Adds the given Object array as last row into the TableModel
 * @param objects   the row to be added
 */
public void addRow(Object[] objects) {
    this.data.add(objects);
    this.fireTableRowsInserted(data.size()-1, data.size()-1);
}

/* (non-Javadoc)
 * @see javax.swing.table.TableModel#getColumnCount()
 */
@Override
public int getColumnCount() {
    return columnNames.length;
}

/* (non-Javadoc)
 * @see javax.swing.table.TableModel#getRowCount()
 */
@Override
public int getRowCount() {
    return data.size();
}

/* (non-Javadoc)
 * @see javax.swing.table.TableModel#getValueAt(int, int)
 */
@Override
public Object getValueAt(int row, int col) {
    return data.get(row)[col];
}

/*
 * (non-Javadoc)
 * @see javax.swing.table.AbstractTableModel#setValueAt(java.lang.Object, int, int)
 */
public void setValueAt(Object aValue, int row, int column) {
    data.get(row)[column] = aValue;
}

/*
 * (non-Javadoc)
 * @see javax.swing.table.AbstractTableModel#getColumnClass(int)
 */
public Class<? extends Object> getColumnClass(int c) {
    return values[c];
}

/*
 * (non-Javadoc)
 * @see javax.swing.table.AbstractTableModel#getColumnName(int)
 */
public String getColumnName(int col) {
    return columnNames[col];
}

/*
 * (non-Javadoc)
 * @see javax.swing.table.AbstractTableModel#isCellEditable(int, int)
 */
public boolean isCellEditable(int row, int col) {
    if (col == 1) return (Boolean) this.getValueAt(row, 0);
    if (col == 3) return (Boolean) this.getValueAt(row, 2);
    return true;
}

/**
 * Removes the indicated row from the table model
 * @param i     the index of the row to be delete
 */
public void removeRow(int i) {
    this.data.remove(i);
    this.fireTableRowsDeleted(i, i);
}
} 
```

问题是：如何更改按钮的标题？现在，单元格的当前数据也显示为按钮的标题，这不是很人性化。我希望所有按钮都带有“编辑”标题，我该如何实现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T11:35:25.260

在`ButtonColumn`类中重写方法`getTableCellRendererComponent()`并设置您想要的按钮标题。

代替

```
renderButton.setText( value.toString() ) 
```

写

```
renderButton.setText("Edit"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T11:35:27.433

这是在`ButtonColumn`课堂上完成的

```
renderButton.setText( value.toString() );
renderButton.setIcon( null ); 
```

如果您只是将“编辑”设置为文本而不是`value.toString()`所有按钮将显示“编辑”

这必须在方法中完成`getTableCellRendererComponent`。`editButton`方法中的 也必须这样做`getTableCellEditorComponent`，否则该值仍然显示在按钮上，而用户单击它。

# jquery - JQuery .find() 不工作？

> ID：11900678
> 
> 赞同：3
> 
> 时间：2012-08-10T11:25:21.267
> 
> 标签：jquery

我正在通过 AJAX 从文件中加载一些 HTML，尝试额外的一个块并对其进行评估（动态 HTML/JS 加载）。

AJAX 调用是：

```
$.ajax({
          网址：'module.html'，
          类型：'GET'，
          完成：函数（xhr，textStatus）{
            //完成时调用
          },
          成功：函数（数据，文本状态，xhr）{

            var jqData = $(数据);
            var scriptNode = jqData.find("#startScript");
            if (scriptNode.length > 0)
            {
                $.globalEval(scriptNode.html());
            }
            ……

```

正在加载的 HTML 是：

```
<script type="text/javascript" id="startScript">
    $("#submitButton").button();
</script> 
```

我可以看到在 AJAX 调用中成功加载了 HTML，并且 jqData 变量显示了一个包含 3 个节点的数组（[0] 是脚本节点）。但是当我调用 jqData.find("#startScript") 时，返回始终为空。有任何想法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-10T11:27:55.990

`find`*在*节点内搜索，因此您不能真正使用它来查找顶部节点。

`closest`搜索父母和自己可能会有更好的运气：

```
jqData.closest('#startScript') 
```

# .htaccess - htaccess 子域重写保留 www

> ID：11900679
> 
> 赞同：1
> 
> 时间：2012-08-10T11:25:24.353
> 
> 标签：.htaccess, mod-rewrite

我已经在本地设置了通配符域以在 .dev 上进行测试

我正在尝试重写以下 URL：

```
http://location.domain.dev/ 
```

到

```
http://www.domain.dev/site/location 
```

我希望`www`子域中的任何请求始终转到 www.domain.dev 但如果对 location.domain.dev 提出任何请求，我想将该请求保留在地址栏中（即我不希望人们看到潜在的变化）

我目前在我的 .htaccess 中有以下内容

```
<IfModule mod_rewrite.c>
  Options +FollowSymLinks
  RewriteEngine On

  RewriteBase /

  RewriteCond %{HTTP_HOST} ^([^.]+)\.domain\.dev
  RewriteRule ^(.*)$ http://domain.dev/site/%1 [QSA,NC]

  # Removes index.php
  RewriteCond $1 !\.(gif|jpe?g|png)$ [NC]
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteRule ^(.*)$ /index.php?/$1 [L]
</IfModule> 
```

这甚至可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T11:43:25.093

你很接近。为了不重定向浏览器（导致地址栏改变），您需要摆脱`http://domain.dev`重写规则目标的一部分：

```
RewriteRule ^(.*)$ /site/%1/$1 [QSA,NC] 
```

假设***.domain.dev**和**www.domain.dev**具有相同的文档根目录。如果它们不同，您可能必须启用 mod_proxy 并添加一个`P`标志，以便请求被代理而不是重定向浏览器：

```
RewriteRule ^(.*)$ http://domain.dev/site/%1/$1 [QSA,NC,P] 
```

# c#-4.0 - 如何将位图图片/图像转换为 .net 4 中的 1 bpp 位图图像？

> ID：11900693
> 
> 赞同：0
> 
> 时间：2012-08-10T11:26:13.213
> 
> 标签：c#-4.0, bitmap, bit-manipulation

我正在做`Asp.Net mvc3`项目。在我的项目中间，我必须完成这项任务。将位图图像转换为每像素只有 1 位的格式。

How to convert a `bitmap` picture/image into a 1 bpp bitmap image in `.net 4`?

Can any one give me any hint how to convert so?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T11:32:40.680

该任务的复杂性取决于源图像：如果它是黑白的，那么您只需要使用 PixelFormat.Format1bppIndexed 创建一个新的位图，然后在两个位图上调用 LockBits 并遍历每个像素。另一方面，如果它包含许多颜色/灰度级别，那么您需要深入了解抖动算法，例如[http://en.wikipedia.org/wiki/Floyd%E2%80%93Steinberg_dithering](http://en.wikipedia.org/wiki/Floyd%E2%80%93Steinberg_dithering)或查找执行此操作的代码你。

# ios - 更改不相关视图的 z 顺序

> ID：11900694
> 
> 赞同：1
> 
> 时间：2012-08-10T11:26:20.513
> 
> 标签：ios, uitableview, z-order

当我要重新排列的两个视图不相关时，如何更改显示的视图顺序？

我正在尝试处理其他人的代码，他们有一个类，它是 UITableViewController 的子类。我想放一个背景，所以我把它作为 self.view 的子视图。

问题是，它显示在表格前面，表格位于 self.tableView，而不是 self.view.tableView 。由于两个视图不在一起，我不能使用 sendSubviewToBack 方法。

self 是我正在处理的 viewController 类。

有任何想法吗？

```
UIImageView *background = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"editInfoBG.png"]];
background.frame = CGRectMake(0, 0, 320, 416);
[self.view addSubview:background];

// Doesn't work, the table is not a subview of self.view
[self.view sendSubviewToBack:background]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T11:37:58.647

如果要将子视图添加到视图控制器中，则应使用`UIViewController`with 的子类手动添加`UITableView`为子视图并实现`UITableViewDataSource`and`UITableViewDelegate`协议而不是使用`UITableViewController`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T11:34:14.063

您可以像这样在 tabeview 之前插入背景

```
`[self.view insertSubview:background belowSubview:self.tableView.view];`
```

# .htaccess - joomla htaccess

> ID：11900705
> 
> 赞同：0
> 
> 时间：2012-08-10T11:27:21.263
> 
> 标签：.htaccess, joomla

目前我的 joomla 网址显示为[http://www.website.com/index.php/gallery](http://www.website.com/index.php/gallery)

而不是[http://www.website.com/gallery.php](http://www.website.com/gallery.php)

所以我进入了全局配置部分......在右侧有一个面板 - 我已经打开了搜索引擎友好的 URL......

下面是使用 URL 重写的选项 - 警告使用此功能 htaccess.txt 必须重命名为 .htaccess --- 所以目前它是关闭的 - 这应该打开吗？如果是这样，问题是我的服务器上已经有一个 .htaccess 文件

内容是：

```
# -FrontPage-

IndexIgnore .htaccess */.??* *~ *# */HEADER* */README* */_vti*

<Limit GET POST>
order deny,allow
deny from all
allow from all
</Limit>
<Limit PUT DELETE>
order deny,allow
deny from all
</Limit>
AuthName prestige-car-valeting.com
AuthUserFile /home/prestig1/public_html/_vti_pvt/service.pwd
AuthGroupFile /home/prestig1/public_html/_vti_pvt/service.grp 
```

然后是 htaccess.txt 文件，其中包含很多

```
##
# @package      Joomla
# @copyright    Copyright (C) 2005 - 2012 Open Source Matters. All rights reserved.
# @license      GNU General Public License version 2 or later; see LICENSE.txt
##

##
# READ THIS COMPLETELY IF YOU CHOOSE TO USE THIS FILE!
#
# The line just below this section: 'Options +FollowSymLinks' may cause problems
# with some server configurations.  It is required for use of mod_rewrite, but may already
# be set by your server administrator in a way that dissallows changing it in
# your .htaccess file.  If using it causes your server to error out, comment it out (add # to
# beginning of line), reload your site in your browser and test your sef url's.  If they work,
# it has been set by your server administrator and you do not need it set here.
## 
```

所以很明显，当我尝试将 htaccess.txt 重命名为 .htaccess 时，它会弹出这样的文件已经存在......

任何的想法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T11:28:58.067

只需复制 htaccess.txt 文件中的代码并将其添加到现有的 .htaccess 文件中即可。

这就是你真正需要做的。除非在 .htaccess 中输入适当的条目，否则您的搜索引擎友好 URL 将无法正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T11:34:45.737

您使用哪个版本的 Joomla？您将需要 .htaccess 来重写 URL。所以它必须打开。您可以删除现有的并从您的网站目录中的 Joomla 复制一个新的 .htaccess 文件吗？但首先您需要关闭该选项 -> 然后复制新的 .htaccess 文件，然后重新打开该选项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-05T21:08:39.700

Shyantanu 是正确的，您只需将一个复制到另一个。

具体来说，我会在您已经存在的 .htaccess 文件中的内容*之后添加 Joomla htaccess.txt 文件的内容。*这是因为您现有的文件包含限制访问的指令，通常这应该在处理任何其他指令之前进行（如果您不应该访问它，则重写 URL 没有意义！）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-02-01T15:41:47.420

您可能会注意到 cpanel 不会仅显示现有的 .htaccess 文件 htacces.txt 但正如您所说，它不允许您重命名为已经存在的文件。

我只是使用一个 ftp 程序，例如 filezilla 或 cutftp，一旦在我的站点 ftp 中，我就可以很好地看到 .htacess 文件。然后我删除当前的并使用 htaccess.txt 作为我的默认值。

# javascript - 对于 JavaScript 中的每个循环都让我抓狂

> ID：11900718
> 
> 赞同：0
> 
> 时间：2012-08-10T11:28:17.377
> 
> 标签：javascript, jquery

我的问题很简单。我正在尝试使用在 AJAX 请求（数据）之后收到的另一个对象列表来更新对象列表（localDatz）。所以它包含两个循环。但是当我尝试更新两个对象时，只有一个对象被更新。有一点我真的不明白。有什么帮助吗？

```
 // fetch the localdata first
            var localData = getAll();

// Loop through my 'localData'
$.each(localData.features, function(index,feature){

        // Loop through the new data that are received
        $.each(data.features, function(){
            newFeature = this;

            if (feature.properties.id==newFeature.properties.id){

            // i think here is the problem..but can't figure out how to fix it
            // I remove the old feature and push the new one
            localData.features.splice(index,1);                                                                   
            localData.features.push(newFeature);

            }

    });

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T11:42:49.193

您正在修改您使用此代码循环的列表：

```
if (feature.properties.id==newFeature.properties.id){
    localData.features.splice(index,1);
    localData.features.push(newFeature);
} 
```

不仅要修改列表条目，还要修改顺序（你推到列表的末尾），这会弄乱`.forEach`循环。简单地使用：

```
if (feature.properties.id==newFeature.properties.id){
    localData.features[ index ] = newFeature;
} 
```

完全不需要使用`.splice`。

# c++ - 禁止操作符<<调用

> ID：11900723
> 
> 赞同：1
> 
> 时间：2012-08-10T11:28:33.607
> 
> 标签：c++, templates, operator-overloading

我有一些代码。

```
#include <iostream>

template<typename T>
struct Test
{
   Test(bool v):flg(v) { }
   void func() { }
   typedef void (Test::*unspecified)();
   operator unspecified() const
   {
      return flg ? &Test::func : 0;
   }
   bool flg;
};

template<typename T>
std::ostream& operator << (std::ostream&, typename Test<T>::unspecified);

int main()
{
   Test<int> t(true);
   std::cout << t << std::endl;
} 
```

输出是

```
1 
```

它工作正常，但我想获得未定义的参考。如果`Test`是`not template class`我得到未定义的参考。那么，为什么编译器不使用`operator <<`函数类型并从`pointer to class-member`to进行标准转换`bool`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T11:34:36.853

In `typename Test<T>::unspecified`,`T`是在一个**不可演绎的上下文 中**，因为它出现在 a 的左侧`::`。因此，您的函数模板甚至不会被考虑，并且转换`unspecified`为唯一可行的重载。

简短的回答是“模板不能那样工作”。如果您想要更长的答案，请告诉我。

# sql - 在sql中找到2次char类型之间的差异

> ID：11900730
> 
> 赞同：0
> 
> 时间：2012-08-10T11:28:47.750
> 
> 标签：sql, sql-server

我有 2 次`start_time`和`end_time`char 类型。如何找到它们之间的区别？

例如我`start_time`是上午 10:00 和`end_time`上午 11:15，那么时差应该显示为 1:15

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T11:33:55.130

尝试这个：

```
declare @starttime varchar(10)='10:00 AM'
declare @endtime varchar(10)='11:15 AM'
select cast((datediff(Mi,convert (time,@starttime),
            convert (time,@endtime))/60) as varchar(5))+':'+
       cast((datediff(Mi,convert (time,@starttime),
              convert (time,@endtime))%60) as varchar(5)) 
```

## **结果**

```
1:15 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T11:42:59.117

你可以这样做：

```
SELECT LEFT(convert(varchar,CAST('11:15 AM AS DATETIME)-CAST('10:00 AM' AS DATETIME),108),5) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T11:39:54.673

尝试这个：

```
SELECT left(CONVERT(varchar(12), DATEADD(ms, DATEDIFF
(ms, CAST('10:00 AM' AS DATETIME), CAST('11:15 AM' AS DATETIME)) , 0), 108),5); 
```

**结果**

> 01:15

```
SELECT left(CONVERT(varchar(12), DATEADD(ms, DATEDIFF
(ms, CAST('09:00 AM' AS DATETIME), CAST('11:15 AM' AS DATETIME)) , 0), 108),5); 
```

**结果**

> 02:15

[看到这个小提琴](http://www.sqlfiddle.com/#!3/9dd39/27)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-10T11:31:26.553

这将在几分钟内为您带来差异：

```
select DATEDIFF (minute, starttime, endtime) 
```

见[DATEDIFF](http://msdn.microsoft.com/de-de/library/ms189794.aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-10T12:22:42.673

试试这个查询，它在 MySQL 中运行良好：

```
select TIME_FORMAT((TIME( STR_TO_DATE( '11:15 PM', '%h:%i %p' ) ) - TIME( STR_TO_DATE( '10:00 PM', '%h:%i %p' ))),'%h:%i'); 
```

# c - 反转每个交替的 k 个节点

> ID：11900735
> 
> 赞同：0
> 
> 时间：2012-08-10T11:28:58.390
> 
> 标签：c, data-structures, segmentation-fault

我是新的 ds。我正在尝试这个问题 - 给定一个链表，编写一个函数以有效的方式反转每个备用 k 节点（其中 k 是函数的输入）。给出算法的复杂性。我的代码给了我分段错误。帮助！

‎</p>

```
struct node* func(struct node* head, int k)
{
    struct node* run, *list1;
    run =head->next;
    list1=head;

    int count =0;

    struct node *list2=NULL;

while(list1!=NULL && count++<k)
{
    list1->next=list2;
    list2=list1;
    list1=run;
    run=list1->next;
}

head=list2;

while(list2->next!=NULL && list2!=NULL)
    list2=list2->next;

list2->next=list1;

while(list1!=NULL && count++<k-1)
    list1=list1->next;

if(list1!=NULL)
    list1->next=func( head, k);
    return head;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T15:41:20.797

```
struct node* func_aux(struct node* head, struct node* rev, int k){
    struct node* next;
    if(k == 0 || head == NULL)
        return rev;
    next = head->next;
    head->next = rev;
    return func_aux(next, head, --k);
}

struct node* func(struct node* head, int k){
    struct node* kth_node;
    int i=0;
    for(kth_node=head;kth_node;kth_node=kth_node->next,++i){
        if(k==i)break;
    }
    return func_aux(head, kth_node, k);
} 
```

# entity-framework - .net4 中是否存在 IDbSet 接口

> ID：11900738
> 
> 赞同：1
> 
> 时间：2012-08-10T11:29:03.077
> 
> 标签：entity-framework, c#-4.0, repository-pattern

根据这里的MS，它没有：

[.net 5](http://msdn.microsoft.com/en-us/library/gg679233%28v=vs.103%29.aspx)

这是为了避免以下情况：

```
public interface IRepository<T>
{
    void Insert(T entity);
    void Delete(T entity);
    IQueryable<T> SearchFor(Expression<Func<T, bool>> predicate);
    IQueryable<T> GetAll();
    T GetById(int id);
} 
```

...在实现存储库和 UoW 模式时。我记得在某处读过，您可以使用 IDbSet 而不是定义上面定义的示例 IRepository 接口，但我似乎找不到它的 msdn 页面，并且网络上的许多作者都遵循上述方法。即使在使用 EF 4.3 时：\

请问有人可以对此有所了解吗？或者是否有一个等效的接口开发人员应该在 .net 4.0 和 EF 中使用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T11:38:20.853

是的，它是.NET 4.0 版本的`IDbSet`一部分。MSDN 上似乎没有 5.0 之前的`EntityFramework.dll`文档（它不是 .NET Framework 本身的一部分），这就是您找不到它的原因。`EntityFramework.dll`

# flash - 如何使用 GPU 渲染模式提高 Flex Mobile 性能？

> ID：11900741
> 
> 赞同：0
> 
> 时间：2012-08-10T11:29:12.843
> 
> 标签：flash, apache-flex, mobile, air, retina-display

我正在使用 Flex 和 Air (Mobile) 和 Flash Builder 开发一个应用程序，尽管我遇到了一些其他问题，但我现在最担心的问题是我需要将 SWF Flash 动画嵌入到界面中。该应用程序必须在 Retina Display iPhone 4 中运行，因此我打开了 GPU 渲染模式，以便在“Flex 部分”中获得一些性能。它工作得非常好（我在渲染大分辨率资产而不是使用 CPU 模式时获得了更好的性能），但问题在于“嵌入式 Flash 部分”，它在 CPU 模式下显示不错，但速度很慢，并且有一些矢量伪影显卡。

从我有限的技能（我对 Flex 比较陌生）我认为在运行时可以选择在渲染模式之间切换将是完美的解决方案（我的意思是 GPU 用于菜单和整个 Flex 界面，而 CPU 用于嵌入式矢量电影）但我被告知现在这是不可能的。

这是真的吗？有没有其他方法可以实现，让这两个部分正确流畅地运行？为什么 GPU 模式让 Flash 电影如此痛苦？

非常感谢您的提前！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T19:54:29.467

快速的回答是 Flex 不是为在 GPU 上运行而开发的。因此，将应用程序置于 GPU 模式并没有真正获得任何收益。如果您真的想在 GPU 上运行，您可能需要查看 feathersui.com 并尝试一下。除此之外，我会将您的应用程序模式保留为“自动”。

# c# - 在 Metro 风格应用程序的组详细信息页面中加载数据

> ID：11900743
> 
> 赞同：0
> 
> 时间：2012-08-10T11:29:22.103
> 
> 标签：c#, windows-8, microsoft-metro

我最近开始研究 Metro 风格的应用程序。我创建了一个空白项目并添加了一个基于组详细信息模板的页面。我想使用这个模板，因为有一个项目列表，我想默认预览第一个项目，当我从左侧列表中单击一个项目时，我应该在右侧面板上看到预览。我创建了一个项目集合，并能够通过编写下面的代码来显示列表，但我无法显示预览。

```
StoreData storeData = new StoreData();
  await storeData.StoreDataAsync();            
  this.DefaultViewModel["Items"] = storeData.Collection; 
```

我是否需要编写更多代码才能在右侧面板中显示预览？非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T13:07:55.387

尝试这个：

```
 this.DefaultViewModel["Group"] = group;
    this.DefaultViewModel["Items"] = group.Items;

    /// <summary>
    /// Invoked when an item is clicked.
    /// </summary>
    /// <param name="sender">The GridView (or ListView when the application is snapped)
    /// displaying the item clicked.</param>
    /// <param name="e">Event data that describes the item clicked.</param>
    void ItemView_ItemClick(object sender, ItemClickEventArgs e)
    {
        // Navigate to the appropriate destination page, configuring the new page
        // by passing required information as a navigation parameter
        var itemId = ((ItemBase)e.ClickedItem).UniqueId;
        this.Frame.Navigate(typeof(ItemDetailPage), itemId);
    } 
```

您需要确保您的点击事件处理程序已连接。为此，请添加：

```
ItemClick="ItemView_ItemClick" 
```

对于任何包含您的项目的列表控件。

# java - java位运算符

> ID：11900746
> 
> 赞同：3
> 
> 时间：2012-08-10T11:29:54.040
> 
> 标签：java, bit-manipulation

我在java中遇到了这段代码，如果有人可以向我解释逻辑，我会很高兴。

```
public boolean name(int n) {
   return ((n >> n) & 1L) > 0; 
} 
```

我猜这是一种检查操作，但此代码将返回什么布尔值。是否有替代此代码的方法。我正在尽我所能理解java中的位操作。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-10T11:36:40.850

这是一段奇怪的代码。它检查`n`已右移位的数字是否`n % 32`为奇数。

通过的第一个非负值是 37（二进制 100101）、70（二进制 1000110）和 101（二进制 1100101）。

我怀疑它实际上是否像原始编码器所期望的那样工作 - 它显然没有表示任何有用的东西（并且方法名称`name`非常无用......）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T12:10:49.850

对于正数，如果一个数字的形式为，该函数似乎返回 true：

```
sum_k (alpha_k * 2^k + d(k)), where 

alpha_k = 0 or 1
k >= 5
d(k) = k for exactly one of the k where alpha_k = 1 and 0 otherwise 
```

例子：

```
alpha_k = 1 for k = 5, 0 otherwise => 32 + 5 = 37
alpha_k = 1 for k = 6, 0 otherwise => 64 + 6 = 70
alpha_k = 1 for k = 5 and 6, 0 otherwise => 32 + 5 + 64 = 101
                                         or 32 + 64 + 6 = 102 
```

等等

所有这些数字都将起作用：

> 将该数字本身移动 % 32 将其移动 d(k) 对于不为空的 k。
> 到达位置 1 的位在位置 k 中，定义为 1 (alpha_k = 1)

证明只有这些数字有效更具挑战性......

下一个问题显然是：有什么意义？！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-10T11:56:30.047

也许这个谜题的目的是看看您是否会考虑将 0 位之外移到 31 位以及会发生什么。

负数变得更加奇怪。

```
for(int n=-70;n<=200;n++)
    if (((n >> n) & 1L) > 0)
        System.out.print(n + " "); 
```

印刷

-70 -69 -68 -67 -66 -65 -58 -57 -56 -55 -54 -53 -52 -51 -50 -49 -48 -47 -46 -45 -44 -43 -42 -41 -40 -39 -38 -37 -36 -35 -34 -33 -27 -26 -25 -24 -23 -22 -21 -20 -19 -18 -17 -16 -15 -14 -13 -12 -11 -10 -9 -8 -7 -6 -5 -4 -3 -2 -1 37 70 101 102 135 165 167 198 199

一个类似的公式 when`n`是`int`

```
n & (1 << (n & 31)) != 0 
```

如果`n`是`long`

```
n & (1L << (n & 63)) != 0 
```

更多的负数在移位后有 1 组，因为它们得到符号扩展。

类似的谜题

[http://vanillajava.blogspot.co.uk/2012/01/another-shifty-challenge.html](http://vanillajava.blogspot.co.uk/2012/01/another-shifty-challenge.html)

[http://vanillajava.blogspot.co.uk/2012/01/shifting-challenge.html](http://vanillajava.blogspot.co.uk/2012/01/shifting-challenge.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-10T11:56:24.867

`>>`是有符号右移运算符，左操作数是要移位的整数，右边是要移位整数的位数。最终`& 1L`操作测试第 0 位：如果第 0 位为 1，则函数返回 true。我不知道这样做的真正目的，但此函数返回 true 的结果集取决于操作数大小，例如对于 32 位 int 片段`(n >> n)`返回 32 的倍数的非零结果，然后 ...

```
32:   (n>>n): 32   (n>>n)&1L: 0
33:   (n>>n): 16   (n>>n)&1L: 0
34:   (n>>n): 8   (n>>n)&1L: 0
35:   (n>>n): 4   (n>>n)&1L: 0
36:   (n>>n): 2   (n>>n)&1L: 0
37:   (n>>n): 1   (n>>n)&1L: 1

or

192:   (n>>n): 192   (n>>n)&1L: 0
193:   (n>>n): 96   (n>>n)&1L: 0
194:   (n>>n): 48   (n>>n)&1L: 0
195:   (n>>n): 24   (n>>n)&1L: 0
196:   (n>>n): 12   (n>>n)&1L: 0
197:   (n>>n): 6   (n>>n)&1L: 0
198:   (n>>n): 3   (n>>n)&1L: 1
199:   (n>>n): 1   (n>>n)&1L: 1 
```

# ruby-on-rails-3 - Rails 3：装饰 STI 模型的 draper gem

> ID：11900754
> 
> 赞同：0
> 
> 时间：2012-08-10T11:30:27.673
> 
> 标签：ruby-on-rails-3, decorator, draper

我有 STI 模型

```
#a/m/document.rb
class Document < ActiveRecord::Base
end

#a/m/document/static.rb
class Document::Static < Document
end

#a/m/document/dynamic.rb
class Document::Dynamic < Document
end 
```

我正在使用 draper gem 来装饰我的模型

```
# a/d/document_decorator.rb
class DocumentDecorator <  ApplicationDecorator
end

 # a/d/document/static_decorator.rb
 class Document::StaticDecorator < DocumentDecorator
   def foo
     'it works 1'
   end
 end

 # a/d/document/dynamic_decorator.rb
 class Document::DynamicDecorator < DocumentDecorator
   def foo
     'it works 2'
   end
 end 
```

有没有办法告诉 draper 用适当的 STI 类装饰器自动装饰模型？像这样：

```
a = Document.last   #<Document::Static ...
a.type              #Document::Static
b = DocumentDecorator.decorate(a)
b.class             # Document::StaticDecorator
b.foo               # "it works 1" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T10:26:09.287

花了我一段时间才发现我可以做到

```
resource.decorate 
```

它会找到合适的装饰器

```
a = Document.last   #<Document::Static ...
a.type              #Document::Static
b = a.decorate          
b.class             # Document::StaticDecorator 
```

如果您需要使用 Document 装饰器显式装饰对象，请执行此操作

```
a = Document.last   #<Document::Static ...
a.type              #Document::Static
b = DocumentDecorator.decorate a
b.class             # DocumentDecorator 
```

# c# - 为只能使用一次的软件创建唯一密钥

> ID：11900756
> 
> 赞同：2
> 
> 时间：2012-08-10T11:30:34.893
> 
> 标签：c#, winforms

我创建了一个基于 Windows 的软件应用程序。很快我就会让它活起来。意味着我的客户从我的网站下载后就可以使用它。还要提一下，我制作的软件只能使用我提供的密钥。最初它将是免费试用的。

我在这里生成 35 位密钥，它是唯一的。意味着一旦用户向我请求密钥并且我将密钥发送给他/她，他/她就可以使用我的应用程序。但真正的问题来自这里。

我希望代码只使用一次。

例如：如果用户下载了我的应用程序，他可以使用密钥来使用我的应用程序，但其他人不能使用相同的密钥。假设我的密钥是 xxx，相同的代码 xxx 不应该适用于任何其他下载了我的应用程序的人。只是为了让软件只供真正的用户使用。

我也通过了这个链接

[http://social.msdn.microsoft.com/Forums/zh/winformssetup/thread/301913a0-ecf9-4095-8d66-a3f4baeea6eb](http://social.msdn.microsoft.com/Forums/zh/winformssetup/thread/301913a0-ecf9-4095-8d66-a3f4baeea6eb)

丹尼史坦顿

我还没有达到我的要求。

首先，我想获取注册下载我的应用程序的人的 IP 地址，并基于此我可以限制我的密钥仅由其 IP 地址将存储在我的数据库中的人使用。但我认为这将是错误/不必要的过程。并且要使用我的应用程序，每次都应该插入个人网络电缆。但这不能解决我的目的。

其次，我想创建一个应用程序 ping 到我的服务器或我的进程。

就像最初当用户运行应用程序（在线或离线）时，应用程序应该可以工作，但是一旦他将网络电缆/插头连接到网络，就应该向我的服务器或我提供警报。从我这边，我可以检查用户是否正在使用我提供给他的密钥。如果无论哪种方式，用户都不是真实的，我应该能够阻止他再使用我的应用程序。在我这边，我决定将密钥存储在我提供的数据库中。并且每个请求的键都在另一个表中。我不确定我是否走对了。但到目前为止，这是我脑海中浮现的事情。

但总而言之，最后我希望一个密钥只能由一个用户使用。只是为了避免一百万不同的用户通过一个键使用我的应用程序。

我不确定我提供的任何想法。

现在有什么方法可以实现吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T11:44:22.720

获取他机器的硬件指纹并据此生成密钥。您的软件应检查是否为该特定机器生成了密钥。但是，这需要在线激活您的软件。你可以通过两种方式做到这一点

*   让用户启动未激活的应用程序并显示他发送给您的硬件指纹。然后您返回他输入的激活密钥。
*   您的应用程序自动连接到激活服务并发送指纹、接收激活密钥并存储它

另一点是包括有关硬件的几个组件的信息，并允许用户更改一个或几个。例如采集硬盘序列号、MAC 地址、主板序列号、一些CPU 信息（例如系列名称）的指纹，您应该允许用户升级或添加另一个硬盘。

有关于[获取硬件信息](https://stackoverflow.com/a/8072829/187955)的主题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T11:45:25.513

我认为您必须做出选择，您的密钥系统越强大，对您的用户来说就越难。

IE：一个好的系统是生成一个硬件密钥，所以它只安装在注册的计算机上。尽管效果很好，但购买新计算机的用户可能会遇到麻烦，要求您注册新的硬件密钥。

而且，如果您只给他们一个密钥（如序列号），那么在另一台计算机上使用它可能会很容易。

所以基本上，如果你不认为很多用户会因为软件不会被很多人使用而放弃他们的密钥，我就不会获得“超强”硬件认证。

另外，不要注册IP地址，每个拥有动态IP的人都会讨厌你这样做。

# javascript - 单击事件未触发。为什么？

> ID：11900759
> 
> 赞同：1
> 
> 时间：2012-08-10T11:30:54.027
> 
> 标签：javascript, jquery, html, css, events

使用 jQuery，我为一些“li”HTML 元素附加了一个“click”事件处理程序。

问题是：当我单击“li”元素时，事件不会触发。

“如何？” - 你会问...所以，[在这个简单的 jsFiddle 中自己看看](http://jsfiddle.net/cSPWx/)

考虑：

*   我在我的 Ubuntu 系统中测试了 Firefox 14.0.1 和 Chrome 16.0.912.77。
*   在“寻找”原因的同时，我从原始代码的 CSS、HTML 和 JS 中删除了很多东西。
*   您可以单击表单**标签**元素以查看事件处理函数的工作情况。但是尝试点击**li**元素...不起作用！
*   如果您只是`float: left`从“li”元素中删除样式，或者`position: relative`从“form”中删除样式，那么问题就消失了！

所以，我并不是在问如何规避或解决这个问题，我是在问**为什么**“点击”事件没有触发。这是一个错误吗？来自什么的错误？浏览器？jQuery？CSS？这对我来说根本没有意义，我很想看到一个解释！

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T11:33:33.293

因为`li`'s do float 并且表单有`position:relative`，所以表单位于`li`'s 上方，因此您仍然可以单击“图像”

顺便说一句：如果您使用的是 Firebug 或 Webdeveloper 工具，您可以检测到这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T11:38:11.677

如果您使用萤火虫或类似的东西检查您的 DOM，您会注意到您的表单漂浮在 ul 的第一个元素上，因此它适用于“图像”，因为它没有被您的表单隐藏。尝试清空 jsFiddle 中的 css 代码，一切都会按预期工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T11:47:23.873

点击功能不起作用的原因是 **li**元素没有放在**表单内**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-10T12:22:11.330

我为您创建了一个小提琴，请查看它的[单击操作在所有元素上都可以正常工作](http://jsfiddle.net/cSPWx/19/)

# php - Yii 在每个请求上抛出 URL CException

> ID：11900760
> 
> 赞同：0
> 
> 时间：2012-08-10T11:30:57.207
> 
> 标签：php, curl, amazon-ec2, yii

我在 EC2 上使用 Yii 框架设置了一个 Web 应用程序。当我在 EC2 实例上传输文件时，出现此错误

```
CException

The URL pattern "<controller:\w+>/<id:\d+>" for route "<controller>/view" is not a valid regular expression.

/var/www/html/framework/web/CUrlManager.php(700) 
```

我在 main.php 中的 URL 规则是

```
'urlManager'=>array(
            'urlFormat'=>'path',
            'rules'=>array(
                '<controller:\w+>/<id:\d+>'=>'<controller>/view',
                '<controller:\w+>/<action:\w+>/<id:\d+>'=>'<controller>/<action>',
                '<controller:\w+>/<action:\w+>'=>'<controller>/<action>',
            ),
        ), 
```

我在控制器文件夹中有一个名为“ApiController.php”的控制器。在我的本地机器上它工作正常，但问题出在 EC2 实例上。

这些是 main.php 中的一些配置

```
'basePath'=>dirname(__FILE__).DIRECTORY_SEPARATOR.'..',
    'name'=>'AppName',
    'defaultController'=>'Api', 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T12:44:53.743

使用这个作为 .htaccess 来回答我自己的问题消除了错误

```
Options +FollowSymLinks
IndexIgnore */*
RewriteEngine on

# if a directory or a file exists, use it directly
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

# otherwise forward it to index.php
RewriteRule . index.php 
```

# java - Java：如何在 X 秒后对简单事件进行计时？

> ID：11900761
> 
> 赞同：2
> 
> 时间：2012-08-10T11:31:00.217
> 
> 标签：java

我正在玩 Java，并且在游戏中为 NPC 准备了一个课程。当它们与另一个对象碰撞时调用一个方法：

```
public void collided_in_to(Entity ent) {

    if(ent.equals(game.player)) {
        this.speak = "Ouch!";
    }

} 
```

我想做的事情，我认为这很简单，设置`this.speak`为`""`在给定的秒数之后。来自网络背景，我一直在寻找相当于 Javascripts 的东西`setTimeout()`。

我尝试过使用各种计时器片段，例如使用 Swing 计时器，但在这种情况下，似乎每个计时器都会调用相同的`public void actionPerformed(ActionEvent e)`方法，因此对于不同事件的多个计时器，我无法区分它们。其他人使用内联匿名类，但是我无法将非最终参数传递给它。

对于这个用例，我是否缺少一些东西，我希望在设定的时间后发生非常小的简单事情？（调用实例方法、变量集等）

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-10T11:56:24.420

编写自己的简单计时器怎么样？我会想到这样的事情：

```
public class Timer {

long start = 0;
long delay;

public Timer(long delay) {
    this.delay = delay;
}

public void start() {
    this.start = System.currentTimeMillis();
}

public boolean isExpired() {
    return (System.currentTimeMillis() - this.start) > this.delay;
}

} 
```

然后将 Timer 类实例化为类成员，并在要启动计时器时调用 start()。

在您调用的方法中

```
public void collided_in_to(Entity ent) {

    if(ent.equals(game.player)) {
        if(this.timer.isExpired()) this.speak = "";
        else this.speak = "Ouch!";
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T11:37:13.817

如果您使用的是[游戏循环](http://www.mvps.org/directx/articles/writing_the_game_loop.htm)，则只需进行*几秒钟的验证*即可。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-10T11:33:41.890

你考虑过线程吗？Thread.sleep() 可以相当有效地用于计时。

# python - python将多列文件读入数组

> ID：11900775
> 
> 赞同：1
> 
> 时间：2012-08-10T11:31:53.633
> 
> 标签：python

我正在尝试读取一个看起来像这样的文件：

```
Protein in water
5826
300LEU      N 2945   7.972  16.153  13.055 -0.0183  0.4861 -0.4376
300LEU      H 2946   8.006  16.194  13.139  1.5894  1.3176 -1.4422
300LEU     CA 2947   8.017  16.020  13.016  0.1247  0.7136 -0.1096
300LEU     CB 2948   8.157  15.990  13.077 -0.0499  0.0576  0.0414
300LEU     CG 2949   8.273  16.081  13.032 -0.3927 -0.5342  0.1311
300LEU    CD1 2950   8.271  16.143  12.895  0.2232  0.1271  0.2677
300LEU    CD2 2951   8.281  16.197  13.136  0.0409 -0.0097  0.0710
300LEU      C 2952   7.917  15.908  13.047  0.5031  0.0949  0.0620
300LEU      O 2953   7.955  15.799  13.093 -0.2261 -0.5800  0.0226 
```

我必须去掉前两行并分别阅读不同的列。我试过这个：

```
 with open('file.txt') as fa:
     for line_aa in fa.readlines()[3:11]:
         line_aa = line_aa.strip()
         print line_aa
         col1,col2,col3,col4,col5,col6,col7,col8,col9 = line_aa.split('\t',9) 
```

但我收到以下错误：

```
300LEU      H 2946   8.110  15.548  13.027 -0.0632  0.8718 -0.8443
Traceback (most recent call last):
File "rmsd_cg_vs_aa.py", line 50, in <module>
col1,col2,col3,col4,col5,col6,col7,col8,col9 = line_aa.split('\t',9)
ValueError: need more than 1 value to unpack 
```

我在这里想念什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T11:43:14.780

您正在拆分选项卡，请尝试拆分空格，而不是仅使用：

```
str.split() 
```

那么你应该得到你想要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T11:43:24.773

我认为在这一行中'300LEU H 2946 8.110 15.548 13.027 -0.0632 0.8718 -0.8443'。Python 将空格视为普通空格而不是 tab(\t)。请尝试打印空白的 ascii (ord()) 并确保它是 '\t'。如果不使用正确的字符拆分字符串。也许你可以用空间分割并剥离它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T11:46:39.380

出于某种原因，由 \t 拆分仅返回一个值，因此在尝试将该值应用于第 1 到第 9 列时会引发错误。

尝试这个：

```
print(len(line_aa.split('\t',9)) 
```

它打印 1 对吗？

我建议你只用空格而不是制表符分割：

```
col1,col2,col3,col4,col5,col6,col7,col8,col9 = line_aa.split(maxsplit=9) 
```

# facebook - Graph API 获取照片正方形 (100x100)

> ID：11900780
> 
> 赞同：24
> 
> 时间：2012-08-10T11:32:30.510
> 
> 标签：facebook, facebook-graph-api

如何获取带有选择视图用户集的 facebook 照片（如果他们使用大图像）。如果我在路径图中使用 type = "large" 或 "normal" 或 "small" ，那么我会得到图像，但它不是正方形的，也不是用户集的选择视图。那么，我怎样才能得到方形类型的照片和它的用户集视图

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-08-10T12:00:49.627

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2015-07-01T11:43:16.200

```
[[[FBSDKGraphRequest alloc] initWithGraphPath:@"me" parameters:@{ @"fields" : @"id,name,picture.width(100).height(100)"}]
         startWithCompletionHandler:^(FBSDKGraphRequestConnection *connection, id result, NSError *error) {
             if (!error) {
             } 
```

而不是 100 你可以放 200 ,300 加密响应并使用密钥获取它

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-10T11:53:13.467

尝试使用 type `square`。如下：

`http://graph.facebook.com/[user_id]/picture?type=square`

正方形大小限制为 50x50。如果您想要大尺寸，则必须放大方形版本或裁剪大版本。

如果您不介意自己检索和裁剪图像，请按照我的[教程在此处](https://www.webniraj.com/2012/08/16/facebook-api-generating-a-large-square-profile-image/)获取代码来执行此操作。它可以让您生成大于 50 像素的方形图像。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-03-15T09:24:33.420

这对我有用。检查以下查询， `NSString * graphPath = [NSString stringWithFormat:@"%@?fields=photos.fields(id,link,source)", albumID];`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-11T14:39:19.167

[通过使用 FQL](https://developers.facebook.com/docs/reference/fql/profile/)查询用户的个人资料数据来获取照片。在您的情况下，您不需要任何访问令牌。有一个名为的列`pic_crop`，它是一个包含您需要的 uri 的对象：

> 被查询对象的最大方形头像的 URL。`width`, `height`: 这张图片的像素尺寸。 `left`, `top`, `right`, `bottom`: 用户为此头像选择裁剪的像素坐标。

使用[Graph API Explorer](https://developers.facebook.com/tools/explorer)测试您的查询。

* * *

**更新**：来自 Facebook 查询语言 (FQL) 参考：

> [Facebook 平台 API 2.0](https://developers.facebook.com/docs/apps/versions/)版是 FQL 可用的最后一个版本。2.0 之后的版本将不支持 FQL。请迁移您的应用程序以使用[Graph API](https://developers.facebook.com/docs/graph-api/)而不是 FQL。请查看我们的[变更日志](https://developers.facebook.com/docs/apps/changelog/)以获取当前版本信息。

# android - IllegalStateException - 片段支持库

> ID：11900785
> 
> 赞同：19
> 
> 时间：2012-08-10T11:33:00.057
> 
> 标签：android, illegalstateexception

我的应用程序在某些用户设备上不断崩溃，在 Activity onStart 方法中出现以下异常，我遇到了一个严重问题：

```
Caused by: java.lang.IllegalStateException: Can not perform this action after onSaveInstanceState
at android.support.v4.app.FragmentManagerImpl.checkStateLoss(FragmentManager.java:1299)
at android.support.v4.app.FragmentManagerImpl.enqueueAction(FragmentManager.java:1310)
at android.support.v4.app.BackStackRecord.commitInternal(BackStackRecord.java:541)
at android.support.v4.app.BackStackRecord.commit(BackStackRecord.java:525)
at android.support.v4.app.DialogFragment.show(DialogFragment.java:123) 
```

我无法在我的模拟器中本地重现此错误。我在stackoverflow上发现了一些关于这个问题的问题： [here](https://stackoverflow.com/questions/7469082/getting-exception-illegalstateexception-can-not-perform-this-action-after-onsa/10261438#10261438 "这里")和 [here](https://stackoverflow.com/questions/7575921/illegalstateexception-can-not-perform-this-action-after-onsaveinstancestate-h)

我已经尝试过建议的解决方案，即在 onSaveInstance 中不允许在片段或活动中使用空包。

然而问题依然存在。这是我得到的唯一崩溃报告，而且我不断得到它。

有没有人有一个可行的解决方案？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-13T09:40:12.803

我已经解决了这个问题

*   将我的支持库升级到修订版 10
*   使用此处发布的解决方法： [http](http://code.google.com/p/android/issues/detail?id=23096) ://code.google.com/p/android/issues/detail?id=23096 即。在 onResumeFragments 中添加一个非 UI 片段，并在 Listener Callback 中调用进一步的事务。

在此处查看我的答案以获取代码：[“在 onSaveInstanceState 之后无法执行此操作” - 为什么我会从我的活动的 onResume 方法中获得此异常？](https://stackoverflow.com/questions/12450024/can-not-perform-this-action-after-onsaveinstancestate-why-am-i-getting-this/12681526#12681526)

到目前为止没有更多的 IllegalStateException。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-07T02:37:16.097

我使用[此解决方法](http://code.google.com/p/android/issues/detail?id=23096)解决了这个问题，即将代码放入`onPostResume()`Activity 中的方法函数中

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-06-18T07:18:08.893

[阅读这篇文章。](https://medium.com/inloop/demystifying-androids-commitallowingstateloss-cb9011a544cc)

和，

[这个。](http://www.androiddesignpatterns.com/2013/08/fragment-transaction-commit-state-loss.html)

一旦理解了问题，请继续并正确更改：

弄清楚为什么你的交易发生在你的 onResume 状态之外。为什么这些事情在不应该发生的时候发生。为什么要根据应用程序的生命周期手动添加和删除片段，而不是在用户请求时。您可能需要在 onCreate() 或用户调用某些内容时需要一次。但是你为什么一开始就在 onResume() 中惹他们呢？不要那样做。

如果您将所有更改为`.commit()`，`.commitAllowStateLoss()`那么崩溃将消失。但是，你最好不要那样做。你最好确保你永远不会改变你的片段，除非应用程序完全上线。有时这意味着永远不要从 OnActivityResult() 加载片段，而是标记为在 onPostResume() 中运行，并避免在异步线程中执行 UI 更改，这些线程错误地认为您不能同时终止活动。

如果你只是想把所有东西都弄脏，`.commitAllowStateLoss()`会这样做。如果你想把它做好，请确保在事物死亡后不要摆弄你的碎片。

我认为最新形式的 Android 大约是奥利奥之一，为了避免这个恼人的错误而改变了这一点。我的回答似乎有点含糊，但这是因为错误在范式中。您完全可以使用各种代码元素并且相当常规地实现这一目标。

# php - php中一行前面的+是什么意思

> ID：11900788
> 
> 赞同：3
> 
> 时间：2012-08-10T11:33:02.670
> 
> 标签：php, diff

我对 php 中的语法有疑问。以下行中 + 的含义是什么？谢谢！

```
+$array['key1']['key2'] = "value" 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-10T11:37:25.680

它没有任何意义，它是多余的。您可以编写完全相同的语句而无需加号：

```
$array['key1']['key2'] = "value" 
```

如果你有一个[统一的`diff`文件](http://en.wikipedia.org/wiki/Diff#Unified_format)，这意味着这一行被*添加*。所以那个加号不是 PHP 代码，它是 diff/patch 中该行的标记。另一个标记是减号`-`，用于删除一条线。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T11:41:23.053

它用于显示行差异。在同一文件的不同版本中。

删除的行可以显示为，

```
- $array['key1']['key2'] = "value"; 
```

添加的行可以显示为，

```
+ $array['key1']['key2'] = "value"; 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-08-10T11:41:19.410

**编辑：显然我误解了这个问题，所以这个答案是无效的。**

它看起来像是一种“速记”技术。

```
+$array['key1']['key2'] = "value" 
```

应与以下内容相同：

```
$array['key1']['key2'] = $array['key1']['key2'] + "value" 
```

我从来没有见过这样使用它，所以我可能是错的。我知道它是：

```
$x++; 
```

等同于： `$x += 1;`或者`$x = $x + 1;` 我知道它`++$x;`也作为预增量存在

# android - 为了在静态内部类中引用我的自定义视图，WeakReference 是一种很好的类型吗？

> ID：11900790
> 
> 赞同：2
> 
> 时间：2012-08-10T11:33:09.670
> 
> 标签：android, weak-references

我正在通过直接从 View 类继承来编写自定义视图，我想知道我是否很好地利用了 WeakReference 类。首先，这是我班上最相关的部分：

```
public class ChessView extends View {

    public ChessView(Context context, AttributeSet attrs, int defStyle) {
        /* some code removed */
        invalidateHandler = new InvalidateHandler(this);

        new Thread(new Runnable() {

            @Override
            public void run() {
                     invalidateHandler.sendMessage(invalidateHandler.obtainMessage());
        }

        }).start();
    }

    /* some code removed */

    private static class InvalidateHandler extends Handler {

        public InvalidateHandler(ChessView view){
            relatedChessView = new WeakReference<ChessView>(view);
        }

        @Override
        public void handleMessage(Message msg) {
            relatedChessView.get().invalidate();
        }

        private WeakReference<ChessView> relatedChessView; 
    };

    private InvalidateHandler invalidateHandler;

} 
```

如你看到的 ：

1.  我正在创建一个静态内部类，它是 Handler 类的子类：正如 android 开发人员指南建议避免 View 子类中的直接内部类
2.  Handler 静态内部类调用我的自定义 ChessView 的 invalidate() 方法：所以我决定将它“包装”在 WeakReference 中，因为 android 开发人员指南建议避免对 View 实例进行硬引用。

所以这里是我的问题：

1.  我是否可以通过这种方式避免内存泄漏？
2.  WeakReference 是最好的类型，还是应该使用 SoftReference 代替？
3.  最后，只要视图可见（或相关活动处于活动状态），自定义视图是否会保留在堆上，或者它可能由 GC 之前收集，让我在调用 relatedChessView.get() 时使用空引用？

提前致谢，如果我的问题表述不当，我们深表歉意。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T11:43:20.957

> 我是否可以通过这种方式避免内存泄漏？

是的，但这不是必需的。

> WeakReference 是最好的类型，还是应该使用 SoftReference 代替？

`WeakReference`在你的情况下是要走的路。只要有硬参考指向它们，它们都将可用`SoftReference`。`WeakReference`但是，如果没有强引用，`WeakReference`则更有可能被收集，而`SoftReference`只要不需要清理内存（例如，将保留更长时间），就会保留您的对象`SoftReference`。

> 最后，只要视图可见（或相关活动处于活动状态），自定义视图是否会保留在堆上，或者它可能由 GC 之前收集，让我在调用 relatedChessView.get() 时使用空引用？

是的，它会。正如我上面提到的，`WeakReference`当有任何`Objects`持有包含`Object`的参考时，将不会被收集。

**更新：**根据@DeeV 的回答修复了有关弱引用和软引用的信息，使其更加准确。

# c# - 是二进制java序列化的输出等于c#序列化

> ID：11900792
> 
> 赞同：1
> 
> 时间：2012-08-10T11:33:16.003
> 
> 标签：c#, java

我正在开发一个由 c# 组成的项目，并且有一些数据被序列化，现在我需要在 java 中序列化相同的值。

那么，我能否获得应该等同于 c# 序列化输出的 java 序列化输出。因为 c# 代码已经完成，所以我无法更改阅读器格式。我需要通过当前在 c# 中的 java 发送相同的数据。

那么，两种语言的序列化输出是否相同。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-10T11:34:35.713

> 那么，两种语言的序列化输出是否相同。

如果您使用每个平台的默认二进制序列化机制，当然不会。几乎无法想象它们*可以*兼容。

您应该选择平台中立的序列化格式，例如[Protocol Buffers](http://protobuf.googlecode.com)、[Thrift](http://thrift.apache.org/)、[YAML](http://www.yaml.org/)、 JSON 、 XML（带有自定义序列化程序）等。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-10T11:36:58.523

由于不同的序列化实现，二进制序列化几乎总是不一样的。然而，这就是为什么我们有 XML 或 Json 以及其他相互兼容的格式，所以我们可以使用它们而不管我们使用什么技术。

# php - 检查php mongodb中是否存在数组？

> ID：11900798
> 
> 赞同：0
> 
> 时间：2012-08-10T11:33:43.957
> 
> 标签：php, mongodb

如何检查数组是否存在于php中。

我在 mongodb 集合中的某些行中有一个名为 $contact["categories"] 的数组。有些行没有那个数组。如何检查集合中是否存在特定数组？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T11:49:55.473

使用 $exists 参数检查元素是否存在。

```
array('array_name' => array('$exists' => true)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T11:39:17.360

您可以像这样检查索引是否存在：

```
 if (isset($contact["categories"])) {

    } 
```

或者

[array_key_exists()](http://php.net/manual/en/function.array-key-exists.php)

```
if( array_key_exists('categories', $contact) ) {
} 
```

# java - 在 JAVA 中为 TIFF 图像创建缩略图

> ID：11900800
> 
> 赞同：0
> 
> 时间：2012-08-10T11:33:52.930
> 
> 标签：java, tiff, jai, javax.imageio

> **可能重复：**
> [无法使用 Java ImageIO 标准库读取和写入 TIFF 图像文件](https://stackoverflow.com/questions/1954685/cant-read-and-write-a-tiff-image-file-using-java-imageio-standard-library)

有人可以帮忙用一些代码来为 Java 中的 TIFF 创建缩略图。使用这篇[文章](https://stackoverflow.com/questions/1069095/how-do-you-create-a-thumbnail-image-out-of-a-jpeg-in-java)已经为 JPEG 和 PNG 创建了缩略图。我使用以下代码为 PNG 和 JPEG 创建缩略图

```
BufferedImage image = ImageIO.read(aFile);
    BufferedImage thumbnNailImage = new BufferedImage(width, height,
            BufferedImage.TYPE_INT_RGB);

    Graphics2D g2 = thumbnNailImage.createGraphics();
    g2.fillRect(0, 0, width, height);

    double xScale = (double) width / image.getWidth();
    double yScale = (double) height / image.getHeight();
    double scale = Math.min(xScale, yScale);

    double x = (width - image.getWidth() * scale) / 2;
    double y = (height - image.getHeight() * scale) / 2;
    AffineTransform at = AffineTransform.getScaleInstance(x, y);
    at.scale(scale, scale);
    g2.drawRenderedImage(image, at);
    g2.dispose();
    return thumbnNailImage; 
```

# git - 有没有办法使用 GUI 工具查看完整的 git diff？

> ID：11900812
> 
> 赞同：3
> 
> 时间：2012-08-10T11:34:45.427
> 
> 标签：git, user-interface, diff

是否有一个 GUI 差异查看器和一个 git 配置的组合，可以让我一次查看所有修改过的文件？目前我使用`git difftool`它，它为每个文件调用一个单独的差异查看器。如果有一种方法可以强制 git 将所有修改文件的两个版本都放在某个地方，并且只为所有这些文件调用一次差异工具，那就太好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T20:12:01.593

从[git 1.7.11 开始](http://article.gmane.org/gmane.linux.kernel/1307164)，`difftool`支持目录比较：

> " `git difftool`" 学习了 " `--dir-diff`" 选项以生成外部差异工具，该工具可以在填充两个临时目录后一次比较两个目录层次结构，而不是每个文件对运行一次外部工具的实例。

因此，您可以将它与外部差异工具结合使用，如“[在 Git 内部](https://stackoverflow.com/a/1884517/6309)[使用`Winmerge``diff`](https://stackoverflow.com/a/1884517/6309)文件”中所述。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T14:47:10.687

使用 svn 我使用 KDE "kompare" 程序来查看所有文件。

像这儿：

```
svn diff > output
kompare output 
```

或直接：

```
svn diff | kompare 
```

还有Gnom“融合”，它应该做同样的事情（但我还没有尝试过）。

这同样适用于 git。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-29T09:13:59.430

看看`Atlassian SourceTree`。`Windows`这是一个用于&的免费 G​​it 客户端`Mac`。

我从测试版开始使用它。在我看来，它确实是我用于 git 的最佳工具。

![在此处输入图像描述](../Images/54963815bce68d24cfb7b4d1db8d5fe6.png)

![在此处输入图像描述](../Images/427f34305314cd9c3529a9a2ce4ce382.png)

告别命令行——在 SourceTree 桌面应用程序中使用 Git 和 Mercurial 的全部功能。通过 SourceTree 的简单界面管理您的所有存储库，无论是托管的还是本地的。

![在此处输入图像描述](../Images/e9ddbdeb5866e1f7e9482dd44e5d535c.png)

更多信息如下：

[http://blog.bitbucket.org/2013/03/19/introducing-sourcetree-git-client-microsoft-windows/](http://blog.bitbucket.org/2013/03/19/introducing-sourcetree-git-client-microsoft-windows/) [http://www.sourcetreeapp.com/](http://www.sourcetreeapp.com/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-12T14:55:58.983

Bazaar Explorer 相当不错。我认为您可以通过使用插件（Bazaar Git 支持插件）使其与 Git 一起使用。

[Git GUI 与 Bzr Explorer 类似，但适用于 Git？](https://stackoverflow.com/questions/6009280/git-gui-like-bzr-explorer-but-for-git)

# javascript - javascript中一个简单的高阶函数示例

> ID：11900813
> 
> 赞同：2
> 
> 时间：2012-08-10T11:34:46.180
> 
> 标签：javascript

在阅读[Eloquent Javascript（第 6 章）](http://eloquentjavascript.net/chapter6.html)时，可以参考 Javascript 中的高阶函数。虽然第 3 章提供了一个示例，但我相信它可能会更简单一些，因为我还没有完全理解这个概念。在网上搜索后，我似乎找不到任何高阶函数的简洁示例。

我想在 Javascript 中看到一个基本/简单的高阶函数来解释这个概念。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-10T11:42:02.473

高级函数是[函数式编程](http://en.wikipedia.org/wiki/Functional_programming)的概念。简而言之，高级函数是将另一个函数作为参数的函数。在javascript中，最近添加了一些更高的功能。

```
Array.prototype.reduce 
//With this function, we can do some funny things.
function sum(array){
    return array.reduce(function(a, b){ return a + b; }, 0);
} 
```

所以，在上面的示例中，`reduce`是一个高阶函数，它以另一个函数，示例中的匿名函数作为参数。的签名`reduce`看起来像这样

```
reduce(func, init);
//func is a function takes two parameter and returns some value.
// init is the initial value which would be passed to func
//when calling reduce, some thing happen

//step 1.
[1, 2, 3, 4, 5].reduce(function(a, b){ return a + b }, 0);
//step 2.
[2, 3, 4, 5].reduce(function(a, b){ return a + b}, 0 + 1);
//step 3.
[3, 4, 5].reduce(function(a, b){ return a + b}, 0 + 1 + 2);
//... 
```

如您所见，`reduce`迭代一个数组，并应用该数组的`func`with`init`和第一个元素，然后将结果绑定到`init`.

另一个高阶函数是`filter`。

```
Array.prototype.filter
//As the name indicates, it filter out some unwanted values from an Aarry. It also takes a function, which returns a boolean value, true for keeping this element.
[1, 2, 3, 4, 5].filter(function(ele){ return ele % 2 == 0; }); 
```

通过上面两个例子，我不得不说高阶函数不是那么容易理解，尤其是`reduce`. 但这并不*复杂*，具有更高阶的功能，实际上您的代码会更干净和可读。举`filter`个例子，它告诉人们它把所有奇数都扔掉了。

在这里，我想实现一个简单的`filter`函数来向您展示如何。

```
function filter(array, func){
    var output = [];
    for(var i = 0; i < array.length; i++){
      if(func(array[i])) output.push(array[i]);
    }
    return output;
} 
```

# asp.net-mvc-3 - 如何从局部视图中获取父视图

> ID：11900820
> 
> 赞同：16
> 
> 时间：2012-08-10T11:35:08.840
> 
> 标签：asp.net-mvc-3

我有一个部分视图作为 _Layout.cshtml 的一部分，因此它可以在多个页面上呈现。将局部视图视为显示在网站每个页面上的菜单。

当单击局部视图菜单中的这些链接之一时，我只能在被称为局部视图的操作方法中访问/查看，例如它的名称等。

但我真正需要的是单击项目时部分视图所在的视图。

我怎样才能得到这个？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-08-10T11:53:02.297

您可以使用[ParentActionContext](http://msdn.microsoft.com/en-us/library/system.web.mvc.controllercontext.parentactionviewcontext.aspx)

例如

```
 var controller = ControllerContext.ParentActionViewContext.RouteData.Values["Controller"] as string;
 var action = ControllerContext.ParentActionViewContext.RouteData.Values["Action"] as string; 
```

**更新**

从这个角度来看，这个电话应该做你需要的

```
@HttpContext.Current.Request.RequestContext.RouteData.Values["controller"].ToString()
@HttpContext.Current.Request.RequestContext.RouteData.Values["action"].ToString() 
```

# canvas - Three.js 和 WebGL

> ID：11900822
> 
> 赞同：-5
> 
> 时间：2012-08-10T11:35:16.610
> 
> 标签：canvas, 3d, webgl, three.js

请在这件事上给予我帮助！我昨晚做了这个并将其上传到网络服务器上，但它不起作用。我使用 Three.js JavaScript 库和 WebGL [http://threejs.hit.bg/Three.html](http://threejs.hit.bg/Three.html)

还有一个问题——如果可能的话，如何让 WebglRenderer 比 CanvasRenderer 更快更好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T12:18:21.970

您的链接不起作用。WebglRenderer 总是比 CanvasRenderer 快，但并非所有浏览器都支持。在此处查看概述：http: [//caniuse.com/webgl](http://caniuse.com/webgl)

# inheritance - JPA eclipselink 加入了没有鉴别器的继承

> ID：11900824
> 
> 赞同：3
> 
> 时间：2012-08-10T11:35:26.827
> 
> 标签：inheritance, jpa, eclipselink, discriminator

我们正在为我们的新项目使用 JPA。我们有一个具有判别器的继承关系。

我们正在尝试从我的超类表中删除鉴别器字段，但我们无法弄清楚如何使用 eclipselink 来实现这一点。我们知道这可以通过休眠实现，有谁知道如何通过 eclipselink 实现这一点？

您可能想知道我们为什么要实现这一点（我知道使用鉴别器更快，因为它消除了对其他表的存在检查的需要），这是因为我们尝试实现以下内容：[JPA 多个鉴别器值](https://stackoverflow.com/a/11900650/755949)（请参阅问题和答案）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T15:12:00.417

我不相信这会按照你想要的方式工作。当您查询 ID 值为 1 的组织时，您返回的实体可以是组织、客户或供应商。Java 不允许类型一次全部为 3，至少不是以您设置继承的方式。由于组织仍然可以在没有供应商或客户的情况下存在，因此继承对我来说没有意义。

这 3 个表应该代表不同的实体——一个组织可以有一个客户名称和/或一个供应商名称。

# python - 将 Python 脚本的返回值存储在 bash 脚本中

> ID：11900828
> 
> 赞同：79
> 
> 时间：2012-08-10T11:35:36.437
> 
> 标签：python, bash, return, return-value

我想从 bash 脚本执行 python 脚本，并且我想将 python 脚本的输出存储在一个变量中。

在我的 python 脚本中，我将一些内容打印到屏幕上，最后我返回一个字符串：

```
sys.exit(myString) 
```

在我的 bash 脚本中，我执行了以下操作：

```
outputString=`python myPythonScript arg1 arg2 arg3 ` 
```

但是当我检查 with 的值时`outputString`，`echo $outputString`我得到了 Python 脚本打印到屏幕上的所有内容，但*没有*返回值`myString`！

我该怎么做？

编辑：我需要字符串，因为它告诉我 Python 脚本创建的文件的位置。我想做类似的事情：

```
fileLocation=`python myPythonScript1 arg1 arg2 arg1`
python myPythonScript2 $fileLocation 
```

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2012-08-10T11:41:02.780

`sys.exit(myString)`并不意味着“返回这个字符串”。如果您将字符串传递给[`sys.exit`](http://docs.python.org/library/sys.html#sys.exit)，`sys.exit`则会将该字符串视为错误消息，并将该字符串写入`stderr`。与整个程序的返回值最接近的概念是它的[退出状态](https://en.wikipedia.org/wiki/Exit_status)，它必须是一个整数。

如果要捕获写入 stderr 的输出，[可以执行类似的操作](https://stackoverflow.com/questions/3130375/bash-script-store-stderr-in-variable)

```
python yourscript 2> return_file 
```

您可以在 bash 脚本中执行类似的操作

```
output=$((your command here) 2> &1) 
```

但是，这不能保证只捕获传递给 的值`sys.exit`。写入 stderr 的任何其他内容也将被捕获，其中可能包括日志输出或堆栈跟踪。

例子：

测试.py

```
print "something"
exit('ohoh') 
```

t.sh

```
va=$(python test.py 2>&1)                                                                                                                    
mkdir $va 
```

`bash t.sh`

*编辑*

不知道为什么，但在这种情况下，我会编写一个主脚本和两个其他脚本......除非你真的需要，否则混合 python 和 bash 是没有意义的。

```
import script1
import script2

if __name__ == '__main__':
    filename = script1.run(sys.args)
    script2.run(filename) 
```

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2012-08-10T11:37:37.717

`sys.exit()`应该返回一个整数，而不是一个字符串：

```
sys.exit(1) 
```

值`1`在`$?`.

```
$ cat e.py
import sys
sys.exit(1)
$ python e.py
$ echo $?
1 
```

**编辑：**

如果要写入 stderr，请使用[`sys.stderr`](http://docs.python.org/library/sys.html?highlight=sys.stderr#sys.stderr).

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-08-10T12:35:00.863

不要这样使用`sys.exit`。当使用字符串参数调用时，进程的退出代码将为 1，表示出现错误情况。该字符串被打印为标准错误以指示错误可能是什么。`sys.exit`不用于为您的脚本提供“返回值”。

`print`相反，您应该使用语句简单地将“返回值”打印到标准输出，然后调用`sys.exit(0)`并在 shell 中捕获输出。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-08-10T11:55:05.677

在[文档](http://docs.python.org/library/sys.html)中阅读它。如果您返回除`int`or以外的任何内容`None`，它将被打印到`stderr`.

**要在丢弃标准输出的同时获得标准错误，请执行以下操作：**

```
output=$(python foo.py 2>&1 >/dev/null) 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-08-10T11:37:48.937

除了 Tichodroma 所说的之外，您最终可能会使用以下语法：

```
outputString=$(python myPythonScript arg1 arg2 arg3) 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2012-08-10T11:49:03.110

sys.exit([arg]) 的 Python 文档说：

> 可选参数 arg 可以是给出退出状态的整数（默认为零），也可以是其他类型的对象。如果它是一个整数，则零被认为是“成功终止”，任何非零值都被 shell 等视为“异常终止”。大多数系统要求它在 0-127 范围内，否则会产生未定义的结果。

此外，要检索最后执行的程序的返回值，您可以使用 $? bash 预定义变量。

无论如何，如果您将字符串作为 arg 放入 sys.exit() 中，它应该在程序输出的末尾打印在单独的行中，以便您只需稍作解析即可检索它。作为一个例子考虑这个：

```
outputString=`python myPythonScript arg1 arg2 arg3 | tail -0` 
```

# c - 使用 Floyd-Warshall 算法确定“奇数”矩阵

> ID：11900830
> 
> 赞同：2
> 
> 时间：2012-08-10T11:35:49.103
> 
> 标签：c, algorithm, path-finding, floyd-warshall

基本上，使用 Floyd-Warshall 算法的目的是确定连通图中两个节点之间的最短路径。我想要做的不是简单地找到最短路径，我想要的是最短路径，它也是一个均匀的重量。

例如，这是 Floyd-Warshall 算法的简单实现：

```
#include <stdio.h>

main()
{
   int dist[10][10],succ[10][10],n,i,j,k;
    int newDist;

    scanf("%d",&n);
    for (i=0;i<n;i++)
        for (j=0;j<n;j++)
        {
            dist[i][j]=999;
            succ[i][j]=j;
        }

    while (1)
    {
        scanf("%d %d %d",&i,&j,&k);

        if (i==(-1))
            break;

        dist[i][j]=k;
        distOdd[i][j]=k;
        distEven[i][j]=k;
    }

    printf("    ");

    for (i=0;i<n;i++)
        printf("%3d   ",i);

    printf("\n");

    for (i=0;i<n;i++)
    {
        printf("%3d ",i);

        for (k=0;k<n;k++)
            printf("%3d %d ",dist[i][k],succ[i][k]);

        printf("\n");
    }

    printf("-------------------------------\n");

    /* Floyd-Warshall */
    for (j=0;j<n;j++)
    {
        for (i=0;i<n;i++)
            if (dist[i][j]<999)
                for (k=0;k<n;k++)
                {
                    newDist=dist[i][j]+dist[j][k];
                    if (newDist<dist[i][k])
                    {
                        dist[i][k]=newDist;
                        succ[i][k]=succ[i][j];
                    }
                }

        printf("    ");

        for (i=0;i<n;i++)
            printf("%3d   ",i);
        printf("\n");

        for (i=0;i<n;i++)
        {
            printf("%3d ",i);

            for (k=0;k<n;k++)
                printf("%3d %d ",dist[i][k],succ[i][k]);

            printf("\n");
        }

        printf("-------------------------------\n");
    }

    for (i=0;i<n;i++)
        for (j=0;j<n;j++)
            if (dist[i][j]==999)
                printf("No path from %d to %d\n",i,j);
            else
            {
                printf("Distance %d for %d ",dist[i][j],i);
                for (k=succ[i][j];
                    k!=j;
                    k=succ[k][j])
                        printf("%d ",k);

                printf("%d\n",j);
            }
} 
```

给定以下输入：

```
6
0 1 1
1 2 1
2 3 1
3 1 1
1 4 1
4 5 1
-1 -1 -1 
```

我想要以下输出（忽略格式，我只需要一种在每一步找到“奇数矩阵”的方法）

```
initial odd matrix
999 0   1 1 999 2 999 3 999 4 999 5 
999 0 999 1   1 2 999 3   1 4 999 5 
999 0 999 1 999 2   1 3 999 4 999 5 
999 0   1 1 999 2 999 3 999 4 999 5 
999 0 999 1 999 2 999 3 999 4   1 5 
999 0 999 1 999 2 999 3 999 4 999 5 
-------------------------------
Process column 0
odd matrix
999 0   1 1 999 2 999 3 999 4 999 5 
999 0 999 1   1 2 999 3   1 4 999 5 
999 0 999 1 999 2   1 3 999 4 999 5 
999 0   1 1 999 2 999 3 999 4 999 5 
999 0 999 1 999 2 999 3 999 4   1 5 
999 0 999 1 999 2 999 3 999 4 999 5 
even matrix
999 0 999 1 999 2 999 3 999 4 999 5 
999 0 999 1 999 2 999 3 999 4 999 5 
999 0 999 1 999 2 999 3 999 4 999 5 
999 0 999 1 999 2 999 3 999 4 999 5 
999 0 999 1 999 2 999 3 999 4 999 5 
999 0 999 1 999 2 999 3 999 4 999 5 
-------------------------------
Process column 1
odd matrix
999 0   1 1 999 2 999 3 999 4 999 5 
999 0 999 1   1 2 999 3   1 4 999 5 
999 0 999 1 999 2   1 3 999 4 999 5 
999 0   1 1 999 2 999 3 999 4 999 5 
999 0 999 1 999 2 999 3 999 4   1 5 
999 0 999 1 999 2 999 3 999 4 999 5 
even matrix
999 0 999 1   2 1 999 3   2 1 999 5 
999 0 999 1 999 2 999 3 999 4 999 5 
999 0 999 1 999 2 999 3 999 4 999 5 
999 0 999 1   2 1 999 3   2 1 999 5 
999 0 999 1 999 2 999 3 999 4 999 5 
999 0 999 1 999 2 999 3 999 4 999 5 
-------------------------------
Process column 2
odd matrix
999 0   1 1 999 2   3 1 999 4 999 5 
999 0 999 1   1 2 999 3   1 4 999 5 
999 0 999 1 999 2   1 3 999 4 999 5 
999 0   1 1 999 2   3 1 999 4 999 5 
999 0 999 1 999 2 999 3 999 4   1 5 
999 0 999 1 999 2 999 3 999 4 999 5 
even matrix
999 0 999 1   2 1 999 3   2 1 999 5 
999 0 999 1 999 2   2 2 999 4 999 5 
999 0 999 1 999 2 999 3 999 4 999 5 
999 0 999 1   2 1 999 3   2 1 999 5 
999 0 999 1 999 2 999 3 999 4 999 5 
999 0 999 1 999 2 999 3 999 4 999 5 
-------------------------------
Process column 3
odd matrix
999 0   1 1   5 1   3 1   5 1 999 5 
999 0   3 2   1 2   5 2   1 4 999 5 
999 0   5 3   3 3   1 3   3 3 999 5 
999 0   1 1   5 1   3 1   5 1 999 5 
999 0 999 1 999 2 999 3 999 4   1 5 
999 0 999 1 999 2 999 3 999 4 999 5 
even matrix
999 0   4 1   2 1   6 1   2 1 999 5 
999 0   6 2   4 2   2 2   4 2 999 5 
999 0   2 3   6 3   4 3   6 3 999 5 
999 0   4 1   2 1   6 1   2 1 999 5 
999 0 999 1 999 2 999 3 999 4 999 5 
999 0 999 1 999 2 999 3 999 4 999 5 
-------------------------------
Process column 4
odd matrix
999 0   1 1   5 1   3 1   5 1   3 1 
999 0   3 2   1 2   5 2   1 4   5 2 
999 0   5 3   3 3   1 3   3 3   7 3 
999 0   1 1   5 1   3 1   5 1   3 1 
999 0 999 1 999 2 999 3 999 4   1 5 
999 0 999 1 999 2 999 3 999 4 999 5 
even matrix
999 0   4 1   2 1   6 1   2 1   6 1 
999 0   6 2   4 2   2 2   4 2   2 4 
999 0   2 3   6 3   4 3   6 3   4 3 
999 0   4 1   2 1   6 1   2 1   6 1 
999 0 999 1 999 2 999 3 999 4 999 5 
999 0 999 1 999 2 999 3 999 4 999 5 
-------------------------------
Process column 5
odd matrix
999 0   1 1   5 1   3 1   5 1   3 1 
999 0   3 2   1 2   5 2   1 4   5 2 
999 0   5 3   3 3   1 3   3 3   7 3 
999 0   1 1   5 1   3 1   5 1   3 1 
999 0 999 1 999 2 999 3 999 4   1 5 
999 0 999 1 999 2 999 3 999 4 999 5 
even matrix
999 0   4 1   2 1   6 1   2 1   6 1 
999 0   6 2   4 2   2 2   4 2   2 4 
999 0   2 3   6 3   4 3   6 3   4 3 
999 0   4 1   2 1   6 1   2 1   6 1 
999 0 999 1 999 2 999 3 999 4 999 5 
999 0 999 1 999 2 999 3 999 4 999 5 
------------------------------- 
```

我的代码目前所做的是获得最佳权重，该权重在每个单独的“奇数”和“偶数”矩阵中表示。

我缺乏理解的是，当最优值位于相反矩阵（奇/偶）中时，“奇”和“偶”矩阵如何得出它们的非最优值。在我看来，必须有某种循环或递归才能做到这一点，但我不知道如何实现这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T13:07:03.380

不在 C 中，但这不应该是一个问题。我相信 FW 需要两次修改才能获得最短的奇/偶路径：

1.  它需要运行两次。这是因为如果路径在自身上循环，它可能会切换均匀度。就像在这个图中：A --5--> B --2-->（回到 A）。为了在平坦的路径上从 A 到 B，我们需要走 ABAB。但是，如果我们不能得到一条一定均匀度的路径，运行它两次，那么运行两次以上是没有意义的。

2.  您需要尝试所有组合以找到更好的路径（请参阅从 0 到 1 的最内层循环）。到目前为止，偶数路径可以通过添加奇边等成为新的最佳奇数路径。

我认为这个算法应该是正确的，如果你发现任何错误，请随时对我大喊大叫。>D

编辑：添加路径记忆（由 // ADDED 标记的部分）。当然，这会使算法内存效率低下，因此仅在确实需要时才应使用。ATM 我想不出在这种情况下让标准固件路径重建工作的方法。由于路径可能比顶点数长，我不确定路径重建将如何工作。我没有对路径记忆进行广泛的测试，所以它可能会被窃听。可能工作正常。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace ConsoleApplication5
{
    class Program
    {
        static void Main(string[] args)
        {
            int n = 5;

            // Generate graph
            Random r = new Random(1);
            // ADDED
            List<int>[,,] path = new List<int>[n, n, 2];
            int[,,] cost = new int[n, n, 2];
            for (int i = 0; i < n; i++)
            {
                for (int j = 0; j < n; j++)
                {
                    // ADDED
                    path[i, j, 0] = new List<int>{i};
                    path[i, j, 1] = new List<int>{i};

                    if (i == j)
                    {
                        cost[i, j, 0] = 0;
                        cost[i, j, 1] = -1;
                        continue;
                    }
                    int x = r.Next() % 9 + 1;

                    if (r.Next(100) < 60)
                    {
                        cost[i, j, 0] = -1;
                        cost[i, j, 1] = -1;
                        continue;
                    }

                    cost[i, j, x % 2] = x;
                    cost[i, j, 1 - (x % 2)] = -1;
                }
            }

            // Print edge weights
            for (int i = 0; i < n; i++)
            {
                for (int j = 0; j < n; j++)
                {
                    if (cost[i, j, 0] != -1)
                        Console.Write(cost[i, j, 0] + "\t");
                    else
                        Console.Write(cost[i, j, 1] + "\t");
                }
                Console.WriteLine(" ");
            }
            Console.ReadLine();

            // Find shortest odd and even paths
            for (int s = 0; s < 2; s++)
            {
                for (int k = 0; k < n; k++)
                    for (int i = 0; i < n; i++)
                        for (int j = 0; j < n; j++)
                            for (int u = 0; u <= 1; u++)
                                for (int v = 0; v <= 1; v++)
                                {
                                    if (cost[i, k, u] == -1 || cost[k, j, v] == -1)
                                        continue;
                                    int newCost = cost[i, k, u] + cost[k, j, v];
                                    if (newCost < cost[i, j, newCost % 2] || cost[i, j, newCost % 2] == -1)
                                    {
                                        cost[i, j, newCost % 2] = newCost;
                                        // ADDED
                                        path[i, j, newCost % 2] = path[i, k, u].Concat(path[k, j, v]).ToList();
                                    }
                                }
            }

            // Print results
            Console.WriteLine("\nShortest even paths: ");
            for (int i = 0; i < n; i++)
            {
                for (int j = 0; j < n; j++)
                    Console.Write(cost[i, j, 0] + "\t");
                Console.WriteLine(" ");
            }

            Console.WriteLine("\nShortest odd paths:");
            for (int i = 0; i < n; i++)
            {
                for (int j = 0; j < n; j++)
                    Console.Write(cost[i, j, 1] + "\t");
                Console.WriteLine(" ");
            }

            Console.WriteLine();

            // ADDED
            // Example, print shortest odd path between vertices 3 and 1
            // This does not print the final q vertex
            int p = 3;
            int q = 1;
            foreach (int index in path[p, q, 1])
                Console.Write(index);

            Console.ReadLine();
        }
    }
} 
```

# knockout.js - 淘汰赛映射插件不创建可观察的属性

> ID：11900832
> 
> 赞同：1
> 
> 时间：2012-08-10T11:35:57.717
> 
> 标签：knockout.js, knockout-mapping-plugin, knockout-2.0

我有一个关于使用敲除映射插件的问题。

我正在从服务器获取一个简单的数组，并使用映射插件将其转换为 javascript 对象。因为我希望项目的属性是可观察的，所以我为 pugin 提供了用于创建回调的自定义映射。

```
 var meeting = function (id, titel, description) {
        var self = this;
        self.Id = id;
        self.Titel = ko.observable(titel);
        self.Description = ko.observable(description);
        self.Test = ko.computed(function () { return self.Description(); });
        return self;
    }

    var mapping = {
        create: function (json) {
            return new meeting(json.data.Id, json.data.Titel, json.data.Description);
        }
    } 
```

当我调用 ko.mapping.fromJS(myFetchedData) 时，我看到（附加了调试器）为我的数组中的每个项目调用了 create-function。一切都很好地绑定到 HTML 控件。我看到数组中的每个项目都出现了一个 li 项目。

```
<ul id="meetings" data-bind=" foreach: meetings">
    <li class="ui-widget-content ui-corner-all">
        <h1 data-bind="text: Titel" class="ui-widget-header"></h1>
        <div>
            <input type="text" data-bind="text: $data.Description || 'Omschrijving?'"></input>,
        </div>
        <div>
            <input type="text" data-bind="text: $data.Test || 'Omschrijving?'"></input>,
        </div>
        <a href="#" data-bind="click: $root.updateMeeting" >Update</a>
        <a href="#" data-bind="click: $root.removeMeeting" >Remove</a></p>
    </li>
</ul> 
```

但是：Description 属性似乎不是 Observable。更改该值不会导致测试计算属性的更新值。

我在这里错过了什么吗？

任何帮助，将不胜感激。

完整的示例代码可以在这里找到：http: [//jsfiddle.net/dtiemstra/wRg88/](http://jsfiddle.net/dtiemstra/wRg88/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T12:19:44.823

您需要绑定到`<input>`控件的`value`属性 - 而不是它的`text`属性。

所以而不是：

```
<input type="text" data-bind="text: $data.Description || 'Omschrijving?'"></input> 
```

你应该写：

```
<input type="text" data-bind="value: $data.Description || 'Omschrijving?'"></input> 
```

见[http://jsfiddle.net/wRg88/8/](http://jsfiddle.net/wRg88/8/)

# android - 如何获取在线文件的最后修改日期？

> ID：11900844
> 
> 赞同：4
> 
> 时间：2012-08-10T11:36:23.137
> 
> 标签：android, html, file, date, last-modified

我正在为我的大学编写一个应用程序，它应该在大学网站上发生一些变化时提醒用户。问题是我无法更改这些网站，只能阅读它们；但他们在 html 标头中没有“最后修改”。

现在我通过下载整个 html 代码来比较它们，然后从中生成 MD5 校验和，从而查看是否有什么变化。但是应该有一些更好（更快）的方式，或者没有？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T12:07:06.850

您可以每 5 秒检查一次服务器上的 md5，然后只回答具有真/假结果的小文件））。
您还可以使用 ftp 连接到服务器并检查文件状态（如果您可以访问它）。
我还发现这些[人](http://www.changedetection.com/)- 他们在选择网站发生变化时发送通知。

但我认为你的变体更容易）。
它有什么问题？检查花费了多少时间？

# ios - 在 SDWebImageDownloader 中找不到架构 i386 的符号

> ID：11900848
> 
> 赞同：17
> 
> 时间：2012-08-10T11:36:46.400
> 
> 标签：ios, xcode, cocoa, linker

当我尝试使用 Xcode 编译时，出现以下错误：

```
Undefined symbols for architecture i386:
  "_CGImageSourceCopyPropertiesAtIndex", referenced from:
      -[SDWebImageDownloader connection:didReceiveData:] in SDWebImageDownloader.o
  "_CGImageSourceCreateImageAtIndex", referenced from:
      -[SDWebImageDownloader connection:didReceiveData:] in SDWebImageDownloader.o
  "_CGImageSourceCreateIncremental", referenced from:
      -[SDWebImageDownloader connection:didReceiveData:] in SDWebImageDownloader.o
  "_CGImageSourceUpdateData", referenced from:
      -[SDWebImageDownloader connection:didReceiveData:] in SDWebImageDownloader.o
  "_OBJC_CLASS_$_MFMailComposeViewController", referenced from:
      objc-class-ref in MWPhotoBrowser.o
  "_kCGImagePropertyPixelHeight", referenced from:
      -[SDWebImageDownloader connection:didReceiveData:] in SDWebImageDownloader.o
  "_kCGImagePropertyPixelWidth", referenced from:
      -[SDWebImageDownloader connection:didReceiveData:] in SDWebImageDownloader.o
ld: symbol(s) not found for architecture i386
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

MWPhotoBrowser 使用的 SDWebImage 类一定有问题。这真的很奇怪和令人困惑，我不知道如何解决它。

多谢你们。

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-08-10T12:15:45.073

问题很可能是该项目不包含 ImageIO 框架。转到您的 Target -> Build Phases -> Link 并验证实际上您在那里有 ImageIO。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T12:14:05.327

我认为我有解决方案...

转到您的应用程序的**目标**，然后在右侧，单击**Build Phases**选项卡，然后在**Compile Sources**部分中单击**+**并添加`SDWebImage.m`

希望有帮助！

# django - 如何在 Django 中查找未使用的模板变量

> ID：11900849
> 
> 赞同：12
> 
> 时间：2012-08-10T11:36:48.687
> 
> 标签：django, code-cleanup

我正在清理 django 代码——我的[IDE](http://www.jetbrains.com/pycharm/)可以轻松检测 Python 代码中未使用的变量等，但我还没有找到找到未使用模板变量的方法——如果可以的话，清理视图代码会容易得多找出模板不访问上下文字典中的哪些值。

有这个工具吗？

**编辑**：我正在寻找*离线*解决方案、静态代码分析工具等。虽然下面建议的[偏执模板](http://excess.org/article/2012/04/paranoid-django-templates/)解决方案总比没有好，但它并不是最优的，因为`{% if ... %}`模板中有多个分支，此外，需要测试所有视图（在所有用例中）才能找到所有未引用的变量。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T12:35:49.197

尝试[*偏执的 django 模板*](http://excess.org/article/2012/04/paranoid-django-templates/)解决方案：

```
class ParanoidContextProxy(object):
    """
    This is a poor-man's proxy for a context instance.

    Make sure template rendering stops immediately on a KeyError.
    """
    def __init__(self, context):
        self.context = context
        self.seen_keys = set()

    def __getitem__(self, key):
        self.seen_keys.add(key)
        try:
            return self.context[key]
        except KeyError:
            raise ParanoidKeyError('ParanoidKeyError: %r' % (key,))

    def __getattr__(self, name):
        return getattr(self.context, name)
    def __setitem__(self, key, value):
        self.context[key] = value
    def __delitem__(self, key):
        del self.context[key] 
```

# objective-c - 将图像数组（包装在 NSData 中）上传到 iOS 中的服务器

> ID：11900850
> 
> 赞同：0
> 
> 时间：2012-08-10T11:36:51.347
> 
> 标签：objective-c, ios, xcode, http, nsurlconnection

美好的一天，我正在尝试将一组图像上传到服务器，图像被包装到 NSData 中，但服务器只返回一个图像，这是我的代码：

```
- (void)actionSave{

NSArray *imagesArray = [NSArray arrayWithObjects:[NSData dataWithData:UIImagePNGRepresentation(self.imageViewForImageOne.image)],
                        [NSData dataWithData:UIImagePNGRepresentation(self.imageViewForImageTwo.image)],
                        [NSData dataWithData:UIImagePNGRepresentation(self.imageViewForImageThree.image)],
                        [NSData dataWithData:UIImagePNGRepresentation(self.imageViewForImageFour.image)], nil];

NSData *images = [NSKeyedArchiver archivedDataWithRootObject:imagesArray];

NSMutableURLRequest *requestImg = [NSMutableURLRequest requestWithURL:[NSURL URLWithString:[NSString stringWithFormat:@"%@&mid=%@", SEND_POST_TO_WALL, [self.currentFriend objectForKey:@"uid"]]] cachePolicy:NSURLRequestUseProtocolCachePolicy timeoutInterval:60.0f];

[requestImg setHTTPMethod:@"POST"];

NSString *boundary = @"---------------------------14737809831466499882746641449";
NSString *contentType = [NSString stringWithFormat:@"multipart/form-data; boundary=%@", boundary];
[requestImg addValue:contentType forHTTPHeaderField:@"Content-Type"];

NSMutableData *postData = [NSMutableData dataWithCapacity:[images length] + 512];
[postData setData:images];

NSMutableData *body = [NSMutableData data];

//Photo
[body appendData:[[NSString stringWithFormat:@"--%@\r\n", boundary] dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:[@"Content-Disposition: form-data; name=\"image\"; filename=\"image.png\"\r\n" dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:[@"Content-Type: image/jpeg\r\n\r\n" dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:postData];
[body appendData:[@"\r\n" dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:[[NSString stringWithFormat:@"--%@--\r\n", boundary] dataUsingEncoding:NSUTF8StringEncoding]];

//Text
[body appendData:[[NSString stringWithFormat:@"--%@\r\n", boundary] dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:[[NSString stringWithFormat:@"Content-Disposition: form-data; name=\"text\"\r\n\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:[self.textView.text dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:[@"\r\n" dataUsingEncoding:NSUTF8StringEncoding]];

[requestImg setHTTPBody:body];

NSURLConnection *connectionForImage = [NSURLConnection connectionWithRequest:requestImg delegate:self];

if (connectionForImage) {
    self.infoData = [NSMutableData data];
} else {
    NSLog(@"Connection failed");
} 
```

}

这是服务器返回的结果：

```
 array(3) {
  ["act"]=>
  string(12) "comments.add"
  ["module"]=>
  string(7) "account"
  ["mid"]=>
  string(4) "7728"
}
POST:

array(1) {
  ["text"]=>
  string(5) "Gjdgy"
}
FILES:

array(1) {
  ["image"]=>
  array(5) {
    ["name"]=>
    string(9) "image.png"
    ["type"]=>
    string(10) "image/jpeg"
    ["tmp_name"]=>
    string(14) "/tmp/php9oudKt"
    ["error"]=>
    int(0)
    ["size"]=>
    int(463652)
  }
} 
```

我做错了什么？？？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T11:56:31.647

您向我们展示了数据的 POST，但没有再次向我们展示该数据的 GET，因此不确定您所说的“仅返回一个图像”是什么意思。它返回的应该是你上去的完全相同的数据块，也就是存档。您可以通过记录您发送的内容的大小和返回的内容的大小来测试这一点 - 如果服务器返回您的原始 blob，它们应该是相同的（如果不是，那是 web 问题而不是 ios 问题）。

使用从网络返回的 blob，然后您需要 NSKeyUnarchive 它以获取原始数据项数组。解开是解开的反面。

# php - 如何使用打印调试 PHP 图像？

> ID：11900852
> 
> 赞同：0
> 
> 时间：2012-08-10T11:36:56.607
> 
> 标签：php, image, debugging

我想用打印调试一个 php 生成的图像算法。问题是它不输出我打印的文本。我怎样才能输出变量，以便我可以调试？谢谢，富塔诺

```
 public function drawPicture()
    {
        $im = imagecolorallocate ($this->picture, 255, 0, 255);
        imagettftext($this->picture, $this->fontSize , 0, 100, 100,$im , "cooperm.TTF", $this->name);

        # int ImageCopy ( resource $dst_im , resource $src_im , int $dst_x , int $dst_y , int $src_x , int $src_y , int $src_w , int $src_h )
        //imagecopy($this->picture, $this->pika, $this->wappen['pika']['dst_x'], $this->wappen['pika']['dst_y'], 0, 0, $this->pika_size[0], $this->pika_size[1]);

        $zufall = rand(1,99999999);

        #header("Content-Type: image/jpeg");
        imagepng($this->picture);

        $this->checkFontSize();

        imagedestroy($this->picture);

        print "WHY_DOESNT_PRINT?";

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T13:00:16.867

您正在向浏览器发送 .png 图像，因此浏览器会尝试显示图像。附加文本仅被视为无效的图像数据，因此不会显示。

解决您的问题的方法是使用`header()`调用向您的浏览器发送调试消息，或使用 Firefox+Firebug+ PHP firebug 适配器。Firebug 与标头一起传输信息，因此在图像生成功能中是安全的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-31T13:33:43.447

使用 rorrorlog 调试您要查看的脚本点。写入的文件可以很容易地查看。

埃斯：

```
error_log("\r\n debug " . implode("; ", $hc), 3, "errors.log"); // in case array
error_log("\r\n print " . $im, 3, "errors.log"); 
```

# java - Google GCM 中的 HTTP 响应代码 401

> ID：11900855
> 
> 赞同：10
> 
> 时间：2012-08-10T11:37:02.847
> 
> 标签：java, google-cloud-messaging

下面是我得到的异常，即使我的服务器和浏览器应用程序的 API 密钥是有效的。我使用 curl 检查了它。我以 UTF-8 和 JSON 格式发送 GCM 请求。从外部公司网络对其进行测试。

```
java.io.IOException: Server returned HTTP response code: 401 for URL: https://android.googleapis.com/gcm/send
        at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
        at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
        at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
        at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
        at sun.net.www.protocol.http.HttpURLConnection$6.run(HttpURLConnection.java:1345)
        at java.security.AccessController.doPrivileged(Native Method)
        at sun.net.www.protocol.http.HttpURLConnection.getChainedException(HttpURLConnection.java:1339)
        at sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:993)
        at java.net.URLConnection.getContent(URLConnection.java:688)
        at sun.net.www.protocol.https.HttpsURLConnectionImpl.getContent(HttpsURLConnectionImpl.java:406)
        at gcm1.MessageUtil.sendMessage(MessageUtil.java:58) 
```

我可以知道这个的原因和解决方案吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-10T14:33:32.723

以下是使用 GCM 时出现 401 错误的可能原因：

您尝试用于发送邮件的发件人帐户无法通过身份验证。可能的原因有：

*   授权标头丢失或语法无效。
*   作为密钥发送的项目 ID 无效。
*   密钥有效但 GCM 服务已禁用。
*   请求来自未在服务器密钥 IP 中列入白名单的服务器。

检查您在 Authorization 标头中发送的令牌是否是与您的项目关联的正确 API 密钥。

来源：[https ://developers.google.com/cloud-messaging/http-server-ref#error-codes](https://developers.google.com/cloud-messaging/http-server-ref#error-codes)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T12:03:36.447

就我而言，问题是我在数据存储中设置正确的 API 密钥后忘记重新部署。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-11T11:49:50.847

**请按照以下说明进行操作，这可能会对您有所帮助。**

**更新：从 GCM 迁移到 FCM**似乎也解决了 401 Unauthorized Error 的问题。

如果您刚开始使用 GCM，请不要在 Google Developers Console 中创建项目，而是在 Firebase 控制台中进行。创建项目后，只需使用自动生成的服务器密钥。以下是查找服务器密钥的步骤：

1.  转到您的 Firebase 控制台并单击创建新项目。
2.  填写您想要的项目名称并选择您的国家。在此之后，新项目应该处于活动状态。
3.  然后在左侧面板上，单击齿轮按钮并选择项目设置。
4.  然后转到云消息选项卡。

对于**旧的 GCM**项目，您可以简单地将项目导入 Firebase 控制台：

1.  转到您的 Firebase 控制台并单击导入项目。
2.  选择您要导入的项目和您的国家。
3.  单击添加 FIREBASE。在此之后，新项目应该处于活动状态。
4.  然后在左侧面板上，单击齿轮按钮并选择项目设置。
5.  然后转到云消息选项卡。

# liferay - 如何禁用 portlet 共享

> ID：11900858
> 
> 赞同：1
> 
> 时间：2012-08-10T11:37:11.023
> 
> 标签：liferay

我想在 liferay 6.1.0 CE 中禁用我的 portlet 共享，因此“共享”按钮将不可见。

在我的 portal-ext.properties 中，我设置了以下属性：theme.portlet.sharing.default=false

但它不起作用。我重新启动了服务器并清除了浏览器缓存。还有其他方法可以禁用此按钮吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T12:59:19.940

配置属性`theme.portlet.sharing.default`通过共享选项卡为复选框“允许用户将 Web 内容显示添加到任何网站”设置默认值。

但是，我在源代码中没有发现任何停用配置共享的可能性。但是你可以创建一个 Hook 并覆盖 jsp：

`portal-web\docroot\html\portlet\portlet_configuration\tabs1.jsp`

此处了解如何覆盖 jsp：[http ://www.liferay.com/documentation/liferay-portal/6.1/development/-/ai/overriding-aj-4](http://www.liferay.com/documentation/liferay-portal/6.1/development/-/ai/overriding-a-j-4)

# php - 操纵 Joomla 内容

> ID：11900861
> 
> 赞同：0
> 
> 时间：2012-08-10T11:37:16.383
> 
> 标签：php, html, css, joomla, content-management-system

我有一个 Joomla！网站，我正在尝试创建自己的模块。我正在苦苦挣扎的是如何从 joomla 中获取信息，如文章标题、文章内容、文章图片等。

具体来说，我正在尝试编辑 joomla 中内置的类别博客显示。我拥有的模板没有对类别博客进行风格化，所以我需要自己做。我想添加每个博客项目的标题、简短描述和图像。然后我需要使用 CSS 对内容进行样式化。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T12:12:15.813

要重新定义特定模板存在的组件视图，您必须在模板的文件结构中创建相同的视图。例如，要简单地更改文章的视图：

```
/templates/yourtemplate/html/com_content/article/default.php 
```

[有关http://docs.joomla.org](http://docs.joomla.org)和[http://jeffchannell.com/Joomla/custom-component-views-in-joomla-15.html](http://jeffchannell.com/Joomla/custom-component-views-in-joomla-15.html)的更多信息

此外，您需要阅读 Joomla 的文档！关于如何创建自己的模块。

*   创建一个简单的模块 - [http://docs.joomla.org/Creating_a_simple_module](http://docs.joomla.org/Creating_a_simple_module)

问候！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T12:12:40.510

关于模块，您可以从 Joomla 的###_content 表中读取标题、html 内容、图像（即从内容字段中解析图像链接）。

对于第二项 - 您可以使用覆盖来修改模板中的博客类别。即在您的模板文件夹中创建html/com_content/category/ 并从适当的位置（components/com_content/category/）复制您想要修改的文件。然后这些将覆盖 Joomla 核心组件。您可以在普通模板样式文件中进行 css 更改。

更多关于模板覆盖的信息：http: //docs.joomla.org/How_to_override_the_output_from_the_Joomla! [_core](http://docs.joomla.org/How_to_override_the_output_from_the_Joomla!_core)

这是 J1.5 的另一个链接。几乎是同一个校长。 [http://docs.joomla.org/Understanding_Output_Overrides](http://docs.joomla.org/Understanding_Output_Overrides)

# javascript - 如何通过Javascript根据条件禁用超链接

> ID：11900863
> 
> 赞同：1
> 
> 时间：2012-08-10T11:37:32.163
> 
> 标签：javascript, html

如何根据条件禁用超链接

```
 var mydiv = document.getElementById("myDiv");      
 var aTag = document.createElement('a');       
 aTag.setAttribute('href',"yourlink.htm");        
 aTag.innerHTML = "link text";      
 mydiv.innerHTML="";      
 mydiv.innerHTML=aTag; 
```

说我需要在这里禁用我的 aTag。

根据登录用户，我需要禁用或启用..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T11:39:30.527

您可以通过设置 disabled 属性来禁用链接（在锚元素上无效，尽管它在某些情况下有效）。

锚点上禁用属性的测试设置：http: [//jsfiddle.net/TgjnM/](http://jsfiddle.net/TgjnM/)

最好，您可以完全删除链接并将其替换为其中包含的文本。要将链接替换为纯文本，您可以将 innerHTML of 设置`mydiv`为文本（从而删除超链接）。

如果可以打开/关闭链接，请考虑@Oleg V. Volkov 在评论中建议的表单元素（不是超链接）。如果这是一次性决定（即每页不会发生多次），我会用文本替换链接。

> 根据登录用户，我需要禁用或启用..

在这种情况下，我会在服务器上以不同的方式呈现页面，而不是在 Web 浏览器中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T11:48:00.407

这应该工作

```
 if(condition)
     disableLink();
else
   showLink();

function disableLink()
        {

        document.getElementById('Link1').disabled=true;
        document.getElementById('Link1').removeAttribute('href');    
        document.getElementById('Link1').style.textDecoration = 'none';
        document.getElementById('Link1').style.cursor = 'default';
        }

        function showLink()
        {
            document.getElementById('Link1').disabled=false;
        //assign href dynamically
        document.getElementById('Link1').href = "somepage.html";
        document.getElementById("Link1").style.textDecoration = "underline";
        document.getElementById("Link1").style.cursor = "hand";
        } 
```

# vb.net - 8051 UART，串行接收字节

> ID：11900866
> 
> 赞同：0
> 
> 时间：2012-08-10T11:37:41.443
> 
> 标签：vb.net, serial-port, microcontroller, 8051

我必须从计算机（VB.NET）将文件逐字节发送到串行连接的 AT89s52。
每个发送的字节在微控制器中都有一些工作需要一些时间。
这是我的 C 代码中与接收字节相关的部分：

```
SCON = 0x50;
TMOD = 0x20; // timer 1, mode 2, 8-bit reload
TH1  = 0xFD; // reload value for 9600 baud
TR1  = 1;
TI   = 1;

again:

        while(RI!=0)
        {
            P1=SBUF;          // show data on led's
            RI=0;
            receivedBytes++;
        }

        if (key1==0)
        {
            goto exitreceive; // break receiving
        }

        show_lcd_received_bytes(receivedBytes); 
        // here is one more loop 
        // with different duration for every byte
        goto again; 
```

这是用于发送字节的 VB.NET 代码：

```
 For a As Integer = 1 To 10
        For t As Integer = 0 To 255
            SerialPort1.Write(Chr(t))
        Next t
    Next a 
```

问题是 mC 在每个接收到的字节之后都有一些工作要做，而 VB.NET 不知道这一点并且发送字节太快，所以在 mC 中只完成了所有字节的一部分（大约 10%）。我可以在 VB loop ant 中加入“Sleep(20)”然后事情会起作用，但是我浪费了很多时间，因为每个字节都需要不同的时间来处理，这将是不可接受的缓慢通信。

现在，我的问题是 8051 是否可以在 UART 上设置一些繁忙状态，VB 在发送之前可以读取这些状态来决定是否发送字节。或者如何以其他方式设置所描述的此类通信？我还尝试在 mC 端接收带有串行中断的字节，结果相同。

硬件肯定没问题，因为我可以很好地将数据发送到计算机（如预期的那样）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T03:09:02.727

正如@TJD 提到的，硬件流控制可用于在微型计算机处理接收到的字节时阻止 PC 发送字符。过去，我通过使用可用端口线作为输出来实现硬件流。输出需要连接到 TTL 到 RS-232 驱动器（如果您当前使用的是 RS-232，您可能有额外的驱动器可用）。如果您使用 USB 虚拟串行端口或 RS-422/485，则需要实现软件流控制。通常会发送一个 control-S 来告诉 PC 停止发送，并发送一个 control-Q 来继续。为了充分利用流控制，您很可能还需要实现完全中断驱动的 FIFO 来接收/发送字符。

如果您想了解有关硬件流控制的更多信息，请查看[http://electronics.stackexchange.com](http://electronics.stackexchange.com)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T12:05:57.263

过去的爆炸，我记得使用接线盒来调试这种东西的串行线路跟踪器。

通过串行通信，如果您使用了所有引脚/线，则通过 RTS（准备发送）和 DTR（数据终端就绪）进行流量控制，用于在可以发送更多数据时发出信号。您是否可以控制通过 C 编码的设备中的内容？在 VB.NET 中，有用于接收这些信号的事件，或者可以使用 SerialPort 对象上的属性来查询它们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-10T17:07:02.960

你的问题是架构问题。不要尝试在处理字节 Rx 的中断中对接收到的数据进行处理。让你的字节 Rx 中断只将接收到的字节复制到一个单独的 Rx 数据缓冲区，并有一个后台任务来执行传入数据的实际处理而不阻塞 Rx 中断处理程序。如果由于整体吞吐量问题而无法跟上，那么 RTS/CTS 流控制是合适的机制。例如，当您的 Rx 缓冲区已满 90% 时，取消断言流控制信号以暂停发送端。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T18:22:01.433

很多这些答案都建议使用硬件流控制，但您也可以选择通过使用软件流控制来增强传输以更加健壮。目前，您的通信很强大，但如果您开始运行更高的波特率或更长的距离，甚至只是有一个嘈杂的连接，则可能会接收到不正确的字符，或者可能会丢失字符。

您可以在完成任何设置为发生的操作后添加一个简单的两字节 ACK 序列。它可能看起来像这样：

主机发送命令字节：<0x00> 设备回显命令字节：<0x00> 设备执行所需的任何操作 设备发送 ACK/NAK 字节（基于结果）：

如果通信中断，这将允许您在主机端查看。回显的字符可能与发送的内容不匹配，这会提醒您注意问题。此外，如果主机在某个超时时间内没有接收到字符，主机可以尝试重新传输。最后，ACK/NAK 为您提供了返回状态的选项，但最重要的是它会让主机知道您已经完成了操作并且它可以发送另一个命令。

这可以扩展为包括校验和，以便为设备提供一种验证接收到的命令是否有效的方法（与命令字节一起发送的简单逻辑逆就足够了）。

此解决方案的优点是它不需要额外的线路或任何一端的 UART 支持来进行硬件流控制。

# jquery - 等高列不添加填充

> ID：11900867
> 
> 赞同：1
> 
> 时间：2012-08-10T11:37:43.140
> 
> 标签：jquery

我正在使用下面的代码来等于列高，但它没有计算其中的填充，因此文本从 div 中出来。

```
<script>
        $(document).ready(function(){
            //set the starting bigestHeight variable
            var biggestHeight = 0;
            //check each of them
            $('.equal').each(function(){
                //if the height of the current element is
                //bigger then the current biggestHeight value
                if($(this).height() > biggestHeight){
                    //update the biggestHeight with the
                    //height of the current elements
                    biggestHeight = $(this).height();
                }
            });
            //when checking for biggestHeight is done set that
            //height to all the elements
            $('.equal').height(biggestHeight);

        });
    </script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T11:38:49.707

尝试使用`.outerHeight()`

[http://api.jquery.com/outerHeight/](http://api.jquery.com/outerHeight/)

*   `.height()`= 高度
*   `.outerHeight()`= 高度 + 填充 + 边框
*   `.outerHeight(true)`= 高度 + 填充 + 边框 + 边距

如果您的元素中有图像，您应该等待图像已使用`$(window).load()`

```
 $(window).load(function(){ // wait for all content and images are loaded
        var biggestHeight = 0;
        $('.equal').each(function(){
            if($(this).height() > biggestHeight){
                biggestHeight = $(this).height();
            }
        });
        $('.equal').height(biggestHeight);
    }); 
```

# java - 遍历所有 SimpleTextBox

> ID：11900868
> 
> 赞同：0
> 
> 时间：2012-08-10T11:37:44.940
> 
> 标签：java, class, gwt, object, loops

是否可以遍历特定类的所有“实例”？我一直在环顾四周，并想出了：

```
 for (Field field : SimpleCheckBox.class.getFields()) {
        System.out.println(field.getName());
    } 
```

我想遍历所有字段，并在它们上实现一些功能，而不必单独选择它们。上面的代码给出了错误：

```
 java.lang.reflect.InvocationTargetException
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:616)
at com.google.gwt.dev.shell.ModuleSpace.onLoad(ModuleSpace.java:396)
at com.google.gwt.dev.shell.OophmSessionHandler.loadModule(OophmSessionHandler.java:200)
at com.google.gwt.dev.shell.BrowserChannelServer.processConnection(BrowserChannelServer.java:525)
at com.google.gwt.dev.shell.BrowserChannelServer.run(BrowserChannelServer.java:363)
at java.lang.Thread.run(Thread.java:679)
Caused by: java.lang.Error: Unresolved compilation problem: The method getFields() is undefined for the type Class 
```

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T11:49:42.280

首先，这个错误很奇怪，你应该能够编译它。也许这是一个不支持该方法的 GWT 问题，但在普通的旧 java 中它会起作用。

但它不会像你期望的那样工作。它会为您提供类中定义的字段（“属性”），而不是类本身的实例（UI 概念中的字段与 OP 概念中的字段不同）。

到目前为止，还没有简单的方法来获取一个类的所有当前实例。

如果您想要（看起来）在一个容器中获取所有复选框并执行一些操作，那么您可能想要做的是检索容器的所有**组件**并与`instanceof`操作员一起检查它们。

# css - 在 IE8 中将文本旋转 270 度

> ID：11900870
> 
> 赞同：3
> 
> 时间：2012-08-10T11:37:51.250
> 
> 标签：css, internet-explorer, internet-explorer-8

我正在尝试使用以下代码将文本旋转到 270 度：

```
/* Safari */
-webkit-transform: rotate(-90deg);

/* Firefox */
-moz-transform: rotate(-90deg);

/* IE */
-ms-transform: rotate(-90deg);

/* Opera */
-o-transform: rotate(-90deg);

/* Internet Explorer */
filter: progid:DXImageTransform.Microsoft.BasicImage(rotation=3); 
```

它适用于所有浏览器，但不适用于 IE8。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-10T11:41:58.827

尝试使用这个：

```
-ms-filter: "progid:DXImageTransform.Microsoft.Matrix(M11=0.00000000, M12=1.00000000, M21=-1.00000000, M22=0.00000000,sizingMethod='auto expand')";
filter: progid:DXImageTransform.Microsoft.Matrix(M11=0.00000000, M12=1.00000000, M21=-1.00000000, M22=0.00000000,sizingMethod='auto expand');

-moz-transform:  matrix(0.00000000, -1.00000000, 1.00000000, 0.00000000, 0, 0);

-webkit-transform:  matrix(0.00000000, -1.00000000, 1.00000000, 0.00000000, 0, 0);

-o-transform:  matrix(0.00000000, -1.00000000, 1.00000000, 0.00000000, 0, 0); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-10T11:41:13.380

IE 使用另一个过滤器来旋转元素。

在这里你可以阅读它 [http://msdn.microsoft.com/en-us/library/ms533014(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/ms533014(v=vs.85).aspx)

在这里您可以轻松计算旋转矩阵的系数[http://www.boogdesign.com/examples/transforms/matrix-calculator.html](http://www.boogdesign.com/examples/transforms/matrix-calculator.html) 只需输入度数，它将生成所需的代码

您只需添加一行代码：

```
-ms-filter: "progid:DXImageTransform.Microsoft.Matrix(M11=-0.00000000, M12=1.00000000, M21=-1.00000000, M22=-0.00000000,sizingMethod='auto expand')"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-10T11:41:50.443

IE8 不支持这个 CSS 元素。

请参阅：[http ://social.msdn.microsoft.com/Forums/eu/iewebdevelopment/thread/9b21a3c2-6bdf-4aad-a90d-868bdeb3d866](http://social.msdn.microsoft.com/Forums/eu/iewebdevelopment/thread/9b21a3c2-6bdf-4aad-a90d-868bdeb3d866)

> 如果你只是在 IE8+ 中旋转元素，你仍然需要一个跨浏览器的方法。这是因为从 IE9 开始不推荐使用 IE 过滤器，IE9 现在支持 CSS3 -ms-transform 属性。但是，对于 IE8 及更早版本，需要使用 BasicImage 等滤镜才能达到效果。因此，为了迎合当前使用的版本以及未来的变化，一种谨慎的方法可能是通过条件注释将过滤器提供给 IE8 和更早版本，否则使用转换集来迎合当前浏览器。

# mysql - 以 09 开头的 11 位数字的正则表达式

> ID：11900876
> 
> 赞同：-1
> 
> 时间：2012-08-10T11:38:07.750
> 
> 标签：mysql, regex

我想要一个简单的正则表达式来匹配这样的数字

```
09876765456
or 
09253647586 
```

在 mysql 中使用这样的选择语法：

```
SELECT * 
FROM  table` 
WHERE  `number` REGEXP 'regex'
LIMIT 0 , 30 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T11:40:23.457

这个正则表达式应该这样做：

```
^09\d{9}$ 
```

文本`09`后跟 9 位数字。`^`并将`$`匹配锚定到字符串的开头和结尾。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T11:41:00.617

```
SELECT * 
FROM  table` 
WHERE  `number` REGEXP '^09\d{9}$'
LIMIT 0 , 30 
```

# jasper-reports - Jasper 条形图标签截断

> ID：11900879
> 
> 赞同：1
> 
> 时间：2012-08-10T11:38:14.360
> 
> 标签：jasper-reports, ireport, jfreechart

我在 iReport 中创建了一个堆积条形图。在显示随机数量的字符后，每个条下的一些标签会被截断。有些标签有 1 个字母“O...”，其他标签有 6 个“Safet...”。其他人的所有字符都为“财务”。

iReport 中是否有一个属性可以设置为在每个栏下显示整个标签？类似于其他文本元素具有的“Stretch With Overflow”？

我在 iReport 4.5.1 和 4.7 中得到了相同的行为。

这是该特定图表的 XML。

```
<stackedBarChart>
                <chart>
                    <reportElement x="0" y="26" width="555" height="257"/>
                    <chartTitle/>
                    <chartSubtitle/>
                    <chartLegend position="Bottom"/>
                </chart>
                <categoryDataset>
                    <dataset>
                        <incrementWhenExpression><![CDATA[$F{Percentage}<100]]></incrementWhenExpression>
                        <datasetRun subDataset="dsSectionChart">
                            <datasetParameter name="C_ID">
                                <datasetParameterExpression><![CDATA[$P{C_ID}]]></datasetParameterExpression>
                            </datasetParameter>
                            <datasetParameter name="L_STR">
                                <datasetParameterExpression><![CDATA[$P{L_STR}]]></datasetParameterExpression>
                            </datasetParameter>
                            <datasetParameter name="START_DATE">
                                <datasetParameterExpression><![CDATA[$P{START_DATE}]]></datasetParameterExpression>
                            </datasetParameter>
                            <datasetParameter name="END_DATE">
                                <datasetParameterExpression><![CDATA[$P{END_DATE}]]></datasetParameterExpression>
                            </datasetParameter>
                        </datasetRun>
                    </dataset>
                    <categorySeries>
                        <seriesExpression><![CDATA[$V{PRIORITY_STR}]]></seriesExpression>
                        <categoryExpression><![CDATA[$F{sectionName}]]></categoryExpression>
                        <valueExpression><![CDATA[$V{R_COUNT}]]></valueExpression>
                        <labelExpression><![CDATA[$F{sectionName}]]></labelExpression>
                    </categorySeries>
                </categoryDataset>
                <barPlot isShowLabels="false" isShowTickMarks="true">
                    <plot labelRotation="0.0">
                        <seriesColor seriesOrder="0" color="#10253F"/>
                        <seriesColor seriesOrder="1" color="#558ED5"/>
                        <seriesColor seriesOrder="2" color="#C6D9F1"/>
                    </plot>
                    <itemLabel/>
                </barPlot>
            </stackedBarChart> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-11T00:29:38.090

简而言之，不：没有可以设置的简单属性来确保显示整个标签。在大多数情况下，这实际上是一个 JFreeChart 问题而不是 JasperReports 问题，因为它是呈现图表图像的 JFreeChart。

通常最简单的解决方案是旋转标签。这给了他们更多的空间。以 45 或 90 度的角度尝试它们，看看这是否是一个可接受的解决方案。

也可以编写一个图表定制器来更精确地控制行为。不久前我写了一篇关于[图表定制](http://mdahlman.wordpress.com/2011/04/17/chart-customizers-2/)器的文章，其中我准确地介绍了在条形图中处理较长标签的示例。它可能对你有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T03:53:06.613

我是堆栈溢出的新手。我确实尝试了几个选项来打印 ireport 中图表的类别轴中的整个标签（完全标签）。我成功使用了以下选项。

请使用图表属性中的“**类别轴刻度标签旋转”参数。**给出一些旋转值，请注意该值以角度给出。jrxml 如下所示。

`<categoryAxisFormat labelRotation="45.0"></categoryAxisFormat>`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-02-13T12:21:06.603

在 Jaspersoft Studio 中右键单击图表并**显示**属性 -> 在属性窗口中单击**Chartplot选项卡 -> 打开****Category Axis Tick Label Font**属性 -> 在**Category Axis TickLabel Rotation** inputtext 中输入您的旋转度数。

# jquery - jquery images一旦准备好就加载显示节点

> ID：11900882
> 
> 赞同：0
> 
> 时间：2012-08-10T11:38:37.767
> 
> 标签：jquery, children

查看了现有的答案，但无法理解这一点。

我正在使用 jquery + imagesloaded + masonry 在页面上显示节点。

页面结构是这样的：

```
<div id="parent">
  <div class="child"><img /></div>
  <div class="child"><img /></div>
  <div class="child"><img /></div>
</div> 
```

目前，代码执行以下操作： 1- 获取父内容 2- 等待所有子图像都加载完毕 3- 打印它们。

我正在尝试的是 1- 获取父母，获取每个孩子 2- 一旦为第一个孩子加载图像，打印它

这是我当前的代码。

```
var $container = jQuery('#parent');

$container.imagesLoaded(function(){
$container.masonry({   //this part prints children
  itemSelector: '.child',
  columnWidth: 410,
  gutterWidth: 30,
  isFitWidth: true,
  isResizable:true
});
}); 
```

任何帮助，将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T11:42:56.370

据我所知`imagesLoaded()`，应该叫孩子们，因为他们包含图像

我检查了功能，正确的选择器应该是：

```
$('#parent .child img') 
```

还有一个补充，我想我误解了你的问题......你想让它在只加载第一个孩子的图像后触发？

然后这样做：

```
$('#parent .child').eq(0).imagesLoaded({}); 
```

# javascript - 使用 custdata 加载 div

> ID：11900885
> 
> 赞同：0
> 
> 时间：2012-08-10T11:38:53.190
> 
> 标签：javascript, jquery, load, onclick

我正在加载一个 tr onclick 第一个 tr 但问题是 tr 中的每个 td 应该加载第二个 div 内的不同 div。现在正在加载 custdata 中的内容，但是如何加载相应 div 中的内容？

这是演示 [http://jsfiddle.net/FMnTa/6/](http://jsfiddle.net/FMnTa/6/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T11:51:39.100

我不确定这是否是您要求的，但似乎是这样。

```
$(function(){
    $(".info").find("img").click(function(){                
        var trid = $(this).parent().attr("idcust");                
        var trdata = $(this).parent().attr("custdata");
        // Hide all content divs and show only the one related to the click
        $("#"+trid).children().hide();
        $(trdata).show();
        $("#"+trid).css("display","block");
    });
});​ 
```

**这也是一个小提琴：http:** [//jsfiddle.net/FMnTa/9/](http://jsfiddle.net/FMnTa/9/)

代码也可以像这样进行一些改进：

```
$(function(){
    $("img", ".info").click(function(){                
        var parent = $(this).parent();
        var trid = parent.attr("idcust");                
        var trdata = parent.attr("custdata");
        // Hide all content divs and show only the one related to the click
        $("#"+trid).show().children().hide();
        $(trdata).show();
    });
});​ 
```

**自定义数据属性**

使用自定义属性时，您应该真正考虑使用[自定义数据属性](https://developer.mozilla.org/en-US/docs/HTML/Global_attributes)（`data-`属性）。在您的情况下，属性将是`data-idcust`and `data-custdata`。

然后，您可以使用 jQuery[`.data()`](http://api.jquery.com/data/)获取/设置属性。鉴于您命名属性`data-idcust`，您可以读取它`.data("custid")`并使用`.data("custid", "newValue")`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T11:54:38.217

看看会发生什么：

```
 $(".info").find("img").click(function(){                
        var trid = $(this).parent().attr("idcust");                
        var trdata = $(this).parent().attr("custdata");
        $("#"+trid).show().find(trdata).css('border', '1px solid red');
        $("#"+trid).show().find(trdata).toggle();
    }); 
```

`find(trdata)`找到`tr1 div`与`id trdata`

# objective-c - Objective-C 类无法识别

> ID：11900890
> 
> 赞同：1
> 
> 时间：2012-08-10T11:39:07.930
> 
> 标签：objective-c, ios, class

我是 Objective-C 的新手，我正在尝试使用[UIImage+Resize 类](https://github.com/mbcharbonneau/UIImage-Categories)来调整 iOS 中的图片大小。见`UIIimage+Resize.m`代码。

在以下代码中，XCode 无法识别 resizeImage 类。

> 错误消息：“类方法 resizedImage:interpolationQuality 未找到...”

```
#import "UIImage+Resize.h"

- (void)useImage:(UIImage*)theImage { 

 ...
 ...
 ...

    CGSize newSize = CGSizeMake (newWidth, newHeight);
    CGInterpolationQuality InterpQual = kCGInterpolationHigh;

    UIImage* newImg = [UIImage resizedImage:newSize interpolationQuality:InterpQual];

 ...
 ...
 ...
 } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-10T11:42:31.957

您正在调用该方法，就好像它是一个类方法（`[UIImage ...]`）但是它是一个实例方法（注意前导`-`）。所以你需要一个实例`UIImage`来调用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T11:44:03.540

在调用 resize 方法之前创建 UIImage 的实例

# java - Java 设置、类路径和环境变量

> ID：11900893
> 
> 赞同：0
> 
> 时间：2012-08-10T11:39:21.933
> 
> 标签：java, environment-variables

我不确定这是否是最佳实践，但我将 MySQL-connector jar 添加到我的 Java 安装目录的扩展目录中，以便我可以轻松连接到 MySQL 数据库。

我还将环境变量设置为指向不同的目录，这样我就可以在不同的机器上开发，并且只在本地定义环境变量，并且不必为文件路径修改代码。

在上述任何一种情况下，我发现除非我重新启动计算机，否则 java 也无法识别。重新启动 Java 期间会发生什么？java进程是否更新了一些配置文件？您可以在无需重新启动的情况下更新它吗？

为了测试这一点，我在 Mac（添加到`.MacOS/environment.plist`）、Linux（Ubuntu 12.04）和 Windows 7（通过控制面板）上创建了一个新的环境变量。然后我使用`System.getenv("TestVar");`返回null。`set`从命令行运行表明它存在。重新启动后`System.getenv("TestVar");`返回预期值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T11:48:58.357

最终，您的目标是将 jar 文件包含在`CLASSPATH`. 由您决定如何包含`jars`在类路径中，但将 jar 放在`extensions`目录中并不是一个好习惯。在运行程序时修改`CLASSPATH`值。

```
 java -cp jar1:jar2:jar3:dir1:. HelloWorld
 java -classpathjar1:jar2:jar3:dir1:. HelloWorld 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T20:36:01.807

至于在 Ubuntu 上设置环境变量，需要注销

[https://superuser.com/questions/339617/how-to-reload-etc-environment-without-rebooting](https://superuser.com/questions/339617/how-to-reload-etc-environment-without-rebooting)

# html - IE8中的文字旋转270度

> ID：11900894
> 
> 赞同：1
> 
> 时间：2012-08-10T11:39:30.067
> 
> 标签：html, css

我发现了多种与 IE8 兼容的文本旋转方法。它适用于所有其他学位，但不适用于 270。

方法一：

```
-ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=3)"; 
```

----不工作---

方法二：

```
 filter: progid:DXImageTransform.Microsoft.Matrix(M11=6.123233995736766e-17, M12=1,           M21=-1, M22=6.123233995736766e-17, sizingMethod='auto expand'); 
```

----不工作---

方法3：使用jquery

```
<!DOCTYPE html>
<html>
<head>
    <meta charset='UTF-8'>
    <script src="js/jquery.js"></script>

    <title>Sideway</title>
    <style>
#image{
  margin:200px 300px;
}
    </style>
</head>

<body>
  <div id="image">
    Hi how are you
</div>
    <script type="text/javascript" src="http://jqueryrotate.googlecode.com/svn/trunk/jQueryRotate.js"></script>
    <script>
$("#image").rotate(270);
    </script>
</body>
</html> 
```

---都不工作------

PS：有关问题仅适用于 IE8，尤其是 270 度旋转。

# c++ - 包含静态数据/文本文件

> ID：11900896
> 
> 赞同：1
> 
> 时间：2012-08-10T11:39:32.997
> 
> 标签：c++, c, compilation

我有一个带有字符串标识符的 ascii 数字文本文件（> 50k 行），可以将其视为数据向量的集合。根据用户输入，应用程序在运行时只需要这些数据向量之一。

据我所知，我有 3 个选项可以从这个文本文件中获取信息：

1.  将其保存为文本文件，在运行时提取所需的向量。我认为缺点是您不能在代码中拥有相对路径，因此用户必须指向文件的正确位置（？）。或者，获取配置脚本以将绝对路径作为宏注入。
2.  [使用xxd](http://www.linuxmanpages.com/man1/xxd.1.php "xxd")将其转换为静态无符号字符（如此[处](https://stackoverflow.com/a/6240362/758811)所述），然后包含生成的文件。缺点是一个 5MB 的文件变成了一个 25MB 的包含文件。我认为在运行期间将这 25MB 加载到内存中是否正确？
3.  将其转换为对象并使用[objcopy进行链接，如此](http://linux.die.net/man/1/objcopy)[处](http://www.linuxjournal.com/content/embedding-file-executable-aka-hello-world-version-5967)所述。这似乎使文件大小保持不变——还有其他权衡吗？

是否有这样做的标准/推荐方法？如果有区别，我可以使用 C 或 C++。

谢谢。

（使用 gcc 在 linux 上运行）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T11:47:21.923

我会选择数字 1 并将文件路径作为参数传递给程序。这样做没有错，而且简单直接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T11:57:05.063

你应该看看这里的答案：

[运行程序目录](https://stackoverflow.com/questions/737996/directory-of-running-program-on-linux)

投票最多的答案为您提供了如何处理数据文件的粘合剂。但是，我建议将其保存在[/usr/share](http://www.pathname.com/fhs/pub/fhs-2.3.html#PURPOSE26)下，而不是主文件夹，如链接中所述。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T12:11:41.087

我更喜欢使用 zlib （两种方式都是可能的：边文件或包含压缩数据）。

# android - 如何关闭 textview 空白修剪？

> ID：11900897
> 
> 赞同：8
> 
> 时间：2012-08-10T11:39:49.493
> 
> 标签：android, textview

我想在 Textview 中显示一个带有前导空格的字符串。但我可以看到，android Textview 正在修剪所有前导/尾随空格。有没有办法关闭这种行为？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-10T15:21:50.013

老问题，但如果你对“它不会自我修剪”不满意。从评论中回答这可能会对您有所帮助。

如果您使用带有前导或尾随空格的资源字符串，这就是您的问题：[如何将空格保留在字符串的末尾和/或开头？](https://stackoverflow.com/questions/1587056/android-string-concatenate-how-to-keep-the-spaces-at-the-end-and-or-beginnin)

TextView 确实不会修剪空格，但无论从 XML 中读取字符串如何。使用`\u0020`而不是空格。

# c# - 获取 FileInfo 文件的绝对服务器路径（物理路径）

> ID：11900902
> 
> 赞同：0
> 
> 时间：2012-08-10T11:40:17.090
> 
> 标签：c#, path, virtualpathprovider, episerver-6

我正在使用 EPi 服务器提供商：

```
<add virtualPath="~/WorkplaceFiles/" physicalPath="C:\Temp Files\Workplaces"
                  name="workplaceFiles" type="EPiServer.Web.Hosting.VirtualPathNativeProvider,EPiServer"
                  showInFileManager="true" virtualName="workplaceUploadDocuments"  bypassAccessCheck="true" maxVersions="5" /> 
```

以下是提供者的定义：

```
VirtualPathUnifiedProvider provider =
    VirtualPathHandler.GetProvider(DocumentConstants.WorkplaceFiles) as VirtualPathUnifiedProvider; 
```

我的问题来了——如果我定义一个字符串，例如：

```
string path = "2999/Documents/document.txt"
path = String.Concat(provider.VirtualPathRoot, path);

FileInfo file = new FileInfo(path); 
```

`FileInfo`将无法找到此文件，因为它使用的是虚拟路径而不是物理路径。

如何获取物理路径，以便我能够找到带有 的文件`FileInfo`？

```
// When I'm on  this line I would like my path string to be "C:\Temp Files\Workplaces\2999\Documents\document.txt"
FileInfo file = new FileInfo(path); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T11:42:54.670

再次阅读问题，正确的方法似乎是[VirtualPathUnifiedProvider.TryGetHandledAbsolutePath](http://sdk.episerver.com/library/cms5/html/M_EPiServer_Web_Hosting_VirtualPathUnifiedProvider_TryGetHandledAbsolutePath.htm)

有了它，你会做这样的事情：

```
string path;
provider.TryGetHandledAbsolutePath("2999/Documents/document.txt", out path);

FileInfo file = new FileInfo(path); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T22:16:17.120

这是您可以做的（如果您只知道 VPP 提供者的名称）：

```
const string path = "Testbilder/startsidan_896x240.jpg";
var provider = VirtualPathHandler.GetProvider("SiteGlobalFiles") as VirtualPathUnifiedProvider;
if (provider != null)
{
    var virtualPath = VirtualPathUtilityEx.Combine(provider.VirtualPathRoot, path);
    var file = VirtualPathHandler.Instance.GetFile(virtualPath, true) as UnifiedFile;
    if (file != null)
    {
        var fileInfo = new FileInfo(file.LocalPath);
    }
} 
```

如果您已经知道文件的完整虚拟路径，则可以直接转到 VirtualPathHandler.Instance.GetFile(...)。

您需要的命名空间是 EPiServer.Web 和 EPiServer.Web.Hosting（和 System.IO）。

# c - clock_gettime 和 CLOCK_PROCESS_CPUTIME_ID 的数字错误

> ID：11900904
> 
> 赞同：5
> 
> 时间：2012-08-10T11:40:23.457
> 
> 标签：c, precision, clock, timing, gettime

我在 64 位 Ubuntu 12.04 系统上并尝试了以下代码：

```
#include <unistd.h>
#include <time.h>
#include <stdio.h>

int
main(void)
{
  struct timespec user1,user2;
  struct timespec sys1,sys2;
  double user_elapsed;
  double sys_elapsed;

  clock_gettime(CLOCK_REALTIME, &user1);
  clock_gettime(CLOCK_PROCESS_CPUTIME_ID, &sys1);
  sleep(10);
  clock_gettime(CLOCK_REALTIME, &user2);
  clock_gettime(CLOCK_PROCESS_CPUTIME_ID, &sys2);
  user_elapsed = user2.tv_sec + user2.tv_nsec/1E9;
  user_elapsed -= user1.tv_sec + user1.tv_nsec/1E9;
  printf("CLOCK_REALTIME: %f\n", user_elapsed);
  sys_elapsed = sys2.tv_sec + sys2.tv_nsec/1E9;
  sys_elapsed -= sys1.tv_sec + sys1.tv_nsec/1E9;
  printf("CLOCK_PROCESS_CPUTIME_ID: %f\n", sys_elapsed);
} 
```

据我了解，这应该打印类似

```
CLOCK_REALTIME: 10.000117
CLOCK_PROCESS_CPUTIME_ID: 10.001 
```

但就我而言，我得到的是

```
CLOCK_REALTIME: 10.000117
CLOCK_PROCESS_CPUTIME_ID: 0.000032 
```

这是正确的行为吗？如果是这样，我如何确定 sys1 和 sys2 的实际秒数？

当我将 CLOCK_PROCESS_CPUTIME_ID 更改为 CLOCK_REALTIME 时，我得到了预期的结果，但这不是我想要的，因为我们需要精度。

[编辑] 显然 CLOCK_PROCESS_CPUTIME_ID 返回 cpu 用于处理的实际时间。CLOCK_MONOTONIC 似乎返回了正确的值。但精度如何？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-10T14:09:22.107

> 基本上，我们需要的只是精确地获得应用程序的当前运行时间（以微秒为单位）。

如果我没有误解，这里的运行时间是指经过的时间。通常，`CLOCK_REALTIME`这是有好处的，但如果时间是在应用程序运行期间设置的，则`CLOCK_REALTIME`经过时间的概念也会发生变化。为了防止这种情况发生 - 尽管它可能不太可能 - 我建议使用`CLOCK_MONOTONIC`或，如果存在，`CLOCK_MONOTONIC_RAW`. 从手册页中的描述

```
 CLOCK_REALTIME
          System-wide real-time clock.  Setting this clock requires appro-
          priate privileges.

   CLOCK_MONOTONIC
          Clock that cannot be set and  represents  monotonic  time  since
          some unspecified starting point.

   CLOCK_MONOTONIC_RAW (since Linux 2.6.28; Linux-specific)
          Similar  to  CLOCK_MONOTONIC, but provides access to a raw hard-
          ware-based time that is not subject to NTP adjustments. 
```

`CLOCK_MONOTONIC`可能会受到 NTP 调整的影响，但`CLOCK_MONOTONIC_RAW`不是。所有这些时钟的分辨率通常为 1 纳秒（使用 进行检查`clock_getres()`），但出于您的目的，低于 1 微秒的分辨率就足够了。

以微秒为单位计算经过的时间

```
#define USED_CLOCK CLOCK_MONOTONIC // CLOCK_MONOTONIC_RAW if available
#define NANOS 1000000000LL

int main(int argc, char *argv[]) {
    /* Whatever */
    struct timespec begin, current;
    long long start, elapsed, microseconds;
    /* set up start time data */
    if (clock_gettime(USED_CLOCK, &begin)) {
        /* Oops, getting clock time failed */
        exit(EXIT_FAILURE);
    }
    /* Start time in nanoseconds */
    start = begin.tv_sec*NANOS + begin.tv_nsec;

    /* Do something interesting */

    /* get elapsed time */
    if (clock_gettime(USED_CLOCK, &current)) {
        /* getting clock time failed, what now? */
        exit(EXIT_FAILURE);
    }
    /* Elapsed time in nanoseconds */
    elapsed = current.tv_sec*NANOS + current.tv_nsec - start;
    microseconds = elapsed / 1000 + (elapsed % 1000 >= 500); // round up halves

    /* Display time in microseconds or something */

    return EXIT_SUCCESS;
} 
```

# python - Python 中的 Continue 语句仅在循环开始时返回。如何让它进入任何代码位置？

> ID：11900907
> 
> 赞同：1
> 
> 时间：2012-08-10T11:40:37.290
> 
> 标签：python

我有这个简单的代码：

```
var = 1
while var == 1 : 
   try:
        num = int(raw_input("Enter a number  :"))
   except ValueError:
        print "Thats not a number!"
        continue
   try:
        num2 = int(raw_input("Enter another number :"))
   except ValueError:
        print "Thats not a number!"
        continue
   print "Sum of previous 2 inputs:="+str(num+num2)
print "Good bye!" 
```

现在第一个 continue 语句完成了这项工作，但第二个语句没有。因为它回到循环的顶部，但我需要它回到捕获第二个异常的地方，所以它会要求再次输入第二个数字，而不是第一个数字。

有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-10T11:45:01.547

你可以将一个数字输入到一个函数中——这样可以避免你两次编写相同的代码：

```
def input_int(prompt):
    while True:
        try:
            return int(raw_input(prompt))
        except ValueError:
            print "That's not a valid integer!"

...
num = input_int("Please enter a number: ")
num2 = input_int("Please enter another number: ") 
```

# java - Change the textfield location of a JSpinner

> ID：11900912
> 
> 赞同：1
> 
> 时间：2012-08-10T11:41:03.313
> 
> 标签：java, swing, layout, jspinner

I'd like to custom a little bit the basic JSpinner of swing java API. Basically, I want to move the textfield component initially located on the left of the arrow buttons. Instead, the texfield would be lcoated between the two arrows of the spinner, so that there's one arrow on top of the textfield and one arrow below the texfield. But I don't know how to proceed...

Anyone would have an idea?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-12T15:47:09.830

You might be able to override the setLayout(LayoutManager) method of JSpinner to use a custom LayoutManager.

![enter image description here](../Images/08456b7e783526f6305cb409dc7b9d9f.png)

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class SpinnerLayoutTest {
  public JComponent makeUI() {
    SpinnerNumberModel m = new SpinnerNumberModel(10, 0, 1000, 1);
    JSpinner spinner = new JSpinner(m) {
      @Override public void setLayout(LayoutManager mgr) {
        super.setLayout(new SpinnerLayout());
      }
    };
    JPanel p = new JPanel(new BorderLayout(5,5));
    p.add(new JSpinner(m), BorderLayout.NORTH);
    p.add(spinner, BorderLayout.SOUTH);
    p.setBorder(BorderFactory.createEmptyBorder(16,16,16,16));
    return p;
  }
  public static void main(String[] args) {
    EventQueue.invokeLater(new Runnable() {
      @Override public void run() {
        createAndShowGUI();
      }
    });
  }
  public static void createAndShowGUI() {
    JFrame f = new JFrame();
    f.setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);
    f.getContentPane().add(new SpinnerLayoutTest().makeUI());
    f.setSize(320, 160);
    f.setLocationRelativeTo(null);
    f.setVisible(true);
  }
}
class SpinnerLayout extends BorderLayout {
  @Override public void addLayoutComponent(Component comp, Object constraints) {
    if("Editor".equals(constraints)) {
      constraints = "Center";
    } else if("Next".equals(constraints)) {
      constraints = "North";
    } else if("Previous".equals(constraints)) {
      constraints = "South";
    }
    super.addLayoutComponent(comp, constraints);
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T12:07:31.810

You could make an `JPanel` and put a `JTextField` and the `JButtons` inside it. That's was soulution, when I had the same problem.

EDIT:

Arrowbuttons can you create with:

```
new javax.swing.plaf.basic.BasicArrowButton(SwingConstants.NORTH); 
```

Where SwingConstants.NORTH says that the arrow in the button is pointing upwards

# mysql - 单个表中的不同多对多关系

> ID：11900918
> 
> 赞同：0
> 
> 时间：2012-08-10T11:41:26.883
> 
> 标签：mysql

我正在考虑在一个表中合并不同的多对多关系，我想知道你是否认为这很聪明。

下面是两个带有两个单独的“关系”表的示例：

1.  表：产品
2.  表：product_categories
3.  表 - 关系表：link_products_product_categories

另一个例子：

1.  表：用户
2.  表：用户类别
3.  表 - 关系表：link_users_user_categories

您认为创建一个名为“relationships”的表是否明智，该表将包含如下字段：

*   first_field_table：用户
*   second_field_table：用户类别
*   first_field_id: 2
*   second_Field_id：5

或者

*   first_field_table：产品
*   second_field_table：product_categories
*   first_field_id: 3
*   second_field_id：5

这将需要对我的框架进行一些更改，但这意味着更少的表格。您认为将所有这些关系存储在一个表中并用字段标识两个表是个好主意，还是将它们分开并拥有更多表更好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T11:49:55.283

> “..但这意味着更少的桌子..”

许多表本身并不是一件坏事。只要您遵循数据库规范化规则，您的解决方案就应该有您需要的尽可能多的表。

回答你的问题，不，这不好。事实上，这真的很糟糕！它所做的只是造成巨大的混乱。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T11:44:47.660

简单的回答不，它不聪明。

有很多桌子有什么问题？

# latitude-longitude - 在 GIS 地图上计算平行轨迹

> ID：11900919
> 
> 赞同：1
> 
> 时间：2012-08-10T11:41:31.737
> 
> 标签：latitude-longitude

我有一些带有经度和纬度的路点，它们构建了一个轨迹，我想计算一个特定距离的平行轨迹！

我将不胜感激任何帮助！

此致，

塔拉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T18:11:49.460

如果您希望轨迹和平行轨迹都由测地线组成 - 您不能。

两点之间的路径通常由[测地线](http://en.wikipedia.org/wiki/Geodesic)定义。测地线是直线或直线段概念对弯曲空间的概括。[测地线是地球表面两点之间的最短路径，即大圆](http://en.wikipedia.org/wiki/Great_circle)的一段。

大圆将球体分成两个相等的半球，所有大圆都相互交叉。因此，没有平行的测地线。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T11:46:25.937

您可以使用 Dijkstra 算法。

更多解释： [http ://en.wikipedia.org/wiki/Dijkstra%27s_algorithm](http://en.wikipedia.org/wiki/Dijkstra%27s_algorithm)

# javascript - window.fnName 和 function 相等

> ID：11900921
> 
> 赞同：0
> 
> 时间：2012-08-10T11:41:39.587
> 
> 标签：javascript

我看到了javascript代码

```
window.myfn=function(){} 
```

我的疑问是

```
function myfn(){
//some code.
} 
```

和 window.myfn 是一样的？？？

提前致谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T11:54:57.770

在全球范围内，

```
function fn() { ... } 
```

将名称“fn”作为全局对象的属性绑定到函数对象。因此，它*几乎*与

```
window.fn = function() { ... } 
```

在大多数情况下，这种差异是微妙的并且不是非常重要，并且与“fn”符号在函数内的范围内可用的方式有关。

现在，请注意`window.name = value;`将值绑定到它出现的任何位置的全局对象的属性（当然假设它`window`没有被破坏）。函数声明语句可以出现在任何范围内，并且绑定将与该上下文相关。

# joomla - 带有 Beez20 模板错误的 Joomla 1.6.3

> ID：11900924
> 
> 赞同：0
> 
> 时间：2012-08-10T11:41:52.660
> 
> 标签：joomla, joomla1.6

我正在使用 Beez20 模板运行 Joomla 1.6.3，并且在从我的联系表单发送电子邮件时收到以下错误：-

语言字符串加载失败：invalid_address：您必须提供至少一个收件人电子邮件地址。致命错误：在第 114 行的 /home/content/o/p/r/oprins/html/afribam/components/com_contact/controllers/contact.php 中的非对象上调用成员函数 get()

我在联系表格中有一个电子邮件地址，所以不知道为什么我会收到错误消息。我的群发邮件也在工作，“新用户注册”正在发送确认电子邮件

我使用 GoDaddy 托管，并且域位于子文件夹中

有任何想法吗

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T11:43:00.307

看来1.6.3更新后行

```
<input type="hidden" name="id" value="<?php echo
$this->contact->id; ?>" /> 
```

in`/components/com_contact/views/contact/tmpl/default_form.php`丢失，这会在发送联系表时导致错误。

我将它插入第 41 行，现在联系表格工作正常。

# iphone - 在 Xcode 中使用 stricmp 时生成错误

> ID：11900927
> 
> 赞同：0
> 
> 时间：2012-08-10T11:42:11.683
> 
> 标签：iphone, objective-c, ios, xcode

使用 stricmp 比较 Xcode 中的两个 C 字符串时出现构建错误。

错误：stricmp 的隐式声明在 C99 中无效。这是什么意思？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T11:50:06.500

这意味着在您包含的标题中找不到 stricmp 的声明。早期版本的 C 允许您调用未在标头中声明的函数，并假定它们被声明为`int function()`

stricmp 不在 C 或 POSIX 标准中。对于 iOS，请[`strcasecmp()`](http://developer.apple.com/library/ios/#documentation/system/conceptual/manpages_iphoneos/man3/strcasecmp.3.html)按照这个[SO question查看](https://stackoverflow.com/questions/1784767/g-error-stricmp-was-not-declared-in-this-scope-but-ok-for-strcmp)

# javascript - 如果值包含一个或多个来自数组

> ID：11900930
> 
> 赞同：0
> 
> 时间：2012-08-10T11:42:14.667
> 
> 标签：javascript

我正在尝试显示项目列表...

项目 A 项目 B 项目 C 项目 D

我可以告诉代码不显示任何包含 A 的项目，如下所示：

```
exclusions = new Array("A")
if (v.value.indexOf(exclusions) > -1) {
}
else {
DO SOMETHING
} 
```

我卡住的地方是如果我希望它排除多个，如下所示：

```
exclusions = new Array("A", "B")
if (v.value.indexOf(exclusions) > -1) {
}
else {
DO SOMETHING
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T11:44:22.890

一种方法是使用正则表达式。

```
var matches = "there is a boy".match(/[ab]/);
if (matches === null) {
   // neither a nor b was present
} 
```

如果你需要从字符串构造一个正则表达式，你可以这样做

```
var matches = "there is a boy".match(new RegExp("[ab]")); 
```

如果你有一个字符串数组，`['a', 'b']`那么你需要做类似的事情

```
var pattern = yourArray.join('');
var regex = new RexExp(pattern); 
```

在这里，我们构造一个作为模式的字符串，然后基于该模式创建一个新的正则表达式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T11:47:46.963

以伪代码方式回答：

```
exclusions = new Array("A", "B");
exclusion_found = false;
for (int i=0; i< exclusions.length; i++) {
    if (v.value.indexOf(exclusions[i]) > -1) {
        exclusion_found = true;
        break;
    }
}
if (!exclusion_found) {
    DO SOMETHING
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-10T11:56:07.997

这是`indexOf`使用[`Array#every` *^([MDN])*](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/every)的另一种使用方式：

```
var val = v.value;
if(exclusions.every(function(x) { return val.indexOf(x) === -1 })) {
    // val does not contain any string in `exclusions`
} 
```

# android - 如何重命名文件？

> ID：11900933
> 
> 赞同：0
> 
> 时间：2012-08-10T11:42:38.777
> 
> 标签：android

一个简单的问题，我如何重命名文件？

```
File to  = new File(f.getAbsolutePath(), etRenameStr.getText().toString() );
f.renameTo(to);
expl(); 
```

像那样尝试过，但似乎不起作用。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T11:54:30.940

```
 File dir = Environment.getExternalStorageDirectory();
if(dir.exist()){
    File from = new File(dir,"from.mp4");
    File to = new File(dir,"to.mp4");
     if(from.exist())
        from.renameTo(to);
} 
```

[http://developer.android.com/reference/java/io/File.html#renameTo%28java.io.File%29](http://developer.android.com/reference/java/io/File.html#renameTo%28java.io.File%29)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T11:52:34.713

我认为`getAbsolutePath()`返回包含文件名的完整路径，这可能是一个问题。试试看`getParent()`它是否有效。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-10T11:52:49.210

```
File rootDir = Environment.getExternalStorageDirectory();     
File file = new File(rootDir + "/Files/"+fileName);

File file2 = new File("newname");

// Rename file (or directory)
boolean success = file.renameTo(file2);
if (!success) {
System.out.println("File was not successfully renamed");
} 
```

这对我有用。请检查一次！！

# continuous-integration - Jenkins 模板插件

> ID：11900934
> 
> 赞同：23
> 
> 时间：2012-08-10T11:42:42.950
> 
> 标签：continuous-integration, jenkins, build-automation, build-server

Jenkins 中是否有任何可用的插件允许您跨作业重用共享配置。例如，我可以为持续集成定义一个模板，为运行测试定义其他模板，并从这些模板为不同的分支创建多个作业。

我知道 Enterprise Jenkins 中提供了模板插件，但是 jenkins 开源有类似的东西吗？

我正在寻找类似于 [这里的东西](http://blog.cloudbees.com/2012/02/using-jenkins-templates-plugin-to.html)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-11-13T22:40:02.993

我发现[ez-templates](https://github.com/JoelJ/ez-templates)插件非常适合 Jobs 模板。这是一个非常年轻的项目，你必须自己构建它（这很简单，见下文），但它仍然比[模板项目插件](https://wiki.jenkins-ci.org/display/JENKINS/Template+Project+Plugin)更强大，因为它支持任何类型的工作。

如何构建：

1.  安装[Maven 3](http://maven.apache.org/)
2.  克隆/下载[ez-templates](https://github.com/JoelJ/ez-templates) git repo
3.  [从ez-templates](https://github.com/JoelJ/ez-templates) checkout 文件夹运行“mvn install”
4.  构建完成后，转到“目标”文件夹并找到 ez-templates.hpi，它是自包含的插件二进制文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T13:40:18.267

[模板项目插件](https://wiki.jenkins-ci.org/display/JENKINS/Template+Project+Plugin)怎么样？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-12-12T16:26:52.720

[Job Generator Plugin](https://wiki.jenkins-ci.org/display/JENKINS/Job+Generator+Plugin)是在提出这个问题后发布的，可能会满足一些人的需求。

不幸的是，[模板项目插件](https://wiki.jenkins-ci.org/display/JENKINS/Template+Project+Plugin)仍然存在一些[问题](https://issues.jenkins-ci.org/secure/IssueNavigator.jspa?mode=hide&reset=true&jqlQuery=project+%3D+JENKINS+AND+status+in+%28Open%2C+)，特别是它[缺乏对作业参数的支持](https://issues.jenkins-ci.org/browse/JENKINS-23204)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-09-04T22:28:23.733

我们使用 Jenkins 作业生成器来自动创建和管理我们的 jenkins 作业。它基本上是为了允许跨作业共享配置而构建的，因此您可以轻松地创建具有多个配置的相同作业。看看：[http ://docs.openstack.org/infra/jenkins-job-builder](http://docs.openstack.org/infra/jenkins-job-builder)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-08-10T12:43:09.323

您可以使用复制项目链接插件。[https://wiki.jenkins-ci.org/display/JENKINS/Copy+project+link+plugin](https://wiki.jenkins-ci.org/display/JENKINS/Copy+project+link+plugin) 我所做的是创建一个已禁用（虚拟）的预配置作业，当我想创建另一个具有相同功能的作业时我刚刚使用此插件复制的配置。

# mysql - Mysql内部连接两个返回重复行的子查询

> ID：11900937
> 
> 赞同：2
> 
> 时间：2012-08-10T11:42:47.960
> 
> 标签：mysql

我们有一张桌子，

```
Table1(Contract_id, name, address, contact_no) 
```

和另一张桌子，

```
Table2(Contract_id, approver, owner, authority) 
```

样本数据：

```
mysql> select * from Table1;
+-------------+-------+---------+------------+
| contract_id | owner | address | contact_no |
+-------------+-------+---------+------------+
|       11111 | XXX   | Madurai | 897161     |
|       12456 | XYZ   | Madras  | 897161     |
|       11111 | XYZ   | Madras  | 897161     |
+-------------+-------+---------+------------+
3 rows in set (0.00 sec)

mysql> select * from Table2;
+-------------+----------+
| contract_id | approver |
+-------------+----------+
|       11111 | YZX      |
|       11112 | YYY      |
+-------------+----------+
2 rows in set (0.00 sec) 
```

我已经编写了一个查询来获取所有 contract_ids 和匹配这样的标准的数据，

“获取与所有者的所有合同，例如“X”和地址，例如“Mad”和批准人 = 'YZX'”

```
select contract_id,owner,address,approver 
from 
(
    select *
    from Table1 
    where owner like '%X%' 
    and address like '%Mad%'
) t1 
inner join 
(
    select * 
    from Table2 
    where approver = 'YZX'
) t2 using (contract_id); 
```

它正在正确返回结果。但问题是左表有两个匹配行，右表只有一个匹配行。所以右表中的行被复制了两次。

```
> +-------------+---------------+-----------+-------------+
> |contract_id  |  owner        | address   | approver    |
> +-------------+---------------+-----------+-------------+
> |11111        | XXX           | Madurai   | YZX         |
> +-------------+---------------+-----------+-------------+
> |11111        | XYZ           | Madras    | YZX         | 
> +-------------+---------------+-----------+-------------+ 
```

批准人值重复两次。我可以以某种方式避免这个mysql本身吗？我想要第二行的批准者列的空值。

编辑1：

我编辑了我的查询，最后按批准者分组，

```
select contract_id,owner,address,approver 
from 
(
    select contract_id
    from Table1 
    where owner like '%X%' 
    and address like '%Mad%'
) t1 
inner join 
(
    select contract_id 
    from Table2 
    where approver = 'YZX'
) t2 using (contract_id) group by approver; 
```

现在结果变成了，

```
> +-------------+---------------+-----------+-------------+
> |contract_id  |  owner        | address   | approver    |
> +-------------+---------------+-----------+-------------+
> |11111        | XYZ           | Madurai   | YZX         |
> +-------------+---------------+-----------+-------------+ 
```

第二个现在失踪了。我也想要那个。

编辑 2：添加了示例数据和精确查询。

编辑 3：我希望结果的格式如下所示，

```
> +-------------+---------------+-----------+-------------+
> |contract_id  |  owner        | address   | approver    |
> +-------------+---------------+-----------+-------------+
> |11111        | XXX           | Madurai   | YZX         |
> +-------------+---------------+-----------+-------------+
> |11111        | XYZ           | Madras    | NULL        | 
> +-------------+---------------+-----------+-------------+ 
```

编辑4：我实现了我想要的。以下是我使用的查询。

```
create temporary table table1 select * 
from 
(
    select *
    from Table1 
    where owner like '%X%' 
    and address like '%Mad%'
) t1 
inner join 
(
    select * 
    from Table2 
    where approver = 'YZX'
) t2 using (contract_id) limit 1; 
```

和查询，

```
insert into table1 select contract_id, IF((select count(*) from table1 where owner = t.owner and contract_id = t.contract_id) > 0, NULL, t.contract_id),IF((select count(*) from table1 where address = t.adress and contract_id = t.contract_id) > 0, NULL, t.contract_id),IF((select count(*) from table1 where approver = t.approver and contract_id = t.contract_id) > 0, NULL, t.contract_id)
from 
((
    select *
    from Table1 
    where owner like '%X%' 
    and address like '%Mad%'
) t1 
inner join 
(
    select * 
    from Table2 
    where approver = 'YZX'
) t2 using (contract_id)) t; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T12:12:03.647

只是为了清楚数据没有重复。由于您要加入两个表，`contract_id`并且相同的合同 ID 与两条记录相关联，因此您将让批准人出现两次。

```
mysql> select * from Table1;
+-------------+-------+---------+------------+
| contract_id | owner | address | contact_no |
+-------------+-------+---------+------------+
|       11111 | XXX   | Madurai | 897161     | -- contract_id 11111
|       12456 | XYZ   | Madras  | 897161     |
|       11111 | XYZ   | Madras  | 897161     | -- contract_id 11111
+-------------+-------+---------+------------+
3 rows in set (0.00 sec)

mysql> select * from Table2;
+-------------+----------+
| contract_id | approver |
+-------------+----------+
|       11111 | YZX      | -- contract_id 11111
|       11112 | YYY      |
+-------------+----------+
2 rows in set (0.00 sec) 
```

因此结果将始终是表 1 中的两条记录和表 2 中的一条记录`approver = 'YZX'`

另一方面，我可能会考虑将查询重写为以下内容：

```
select t1.contract_id, t1.owner, t1.address, t2.approver 
from table1 t1
inner join table2 t2
  on t1.contract_id = t2.contract_id
where t1.owner like '%X%'
  and t1.address like '%Mad%'
  and t2.approver = 'YZX' 
```

根据您的评论，我开始认为您可能想要`LEFT JOIN`：

```
select t1.contract_id, t1.owner, t1.address, t2.approver 
from table1 t1
left join table2 t2
  on t1.contract_id = t2.contract_id
  and t2.approver = 'YZX'
where t1.owner like '%X%'
  and t1.address like '%Mad%' 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/2ad07/10)

编辑 2：没有简单的方法可以强制它为附加字段使用空值。您可以尝试使用行号来获取结果：

```
select x.contract_id, 
  x.owner,
  x.address,
  case when (@rownum:=@rownum+1 = 1) then x.approver else null end approver
from 
(
  select t1.contract_id, t1.owner, t1.address, t2.approver
  from table1 t1
  inner join table2 t2
    on t1.contract_id = t2.contract_id
    and t2.approver = 'YZX'
  where t1.owner like '%X%'
    and t1.address like '%Mad%'
) x, (SELECT @rownum:=0) r 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/2ad07/25)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T11:45:50.100

使用`DISTINCT` 子句避免重复：

```
SELECT contract_id,owner,address,approver
from (select DISTINCT contract_id
      from Table1 where owner like '%X%' and address like '%Mad%'
     ) t1
     inner join (select contract_id from Table2 where approver = 'YZX') t2
        using (contract_id); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-10T12:11:14.643

它没有重复，它准确地显示了它应该显示的内容。

如果您解释了要显示的记录以及要从结果集中排除的记录的标准，那么也许我们可以尝试编写满足您要求的内容。

您在第一次更新中提供的查询在 MySQL 上可能在语法上有效（它不适用于其他数据库），但语义上是乱码——您是如何告诉 DBMS 您真的想排除所有者 = XXX 的情况？或者地址=马德拉斯？

# locale - 使用 EL 注入的异常

> ID：11900954
> 
> 赞同：0
> 
> 时间：2012-08-10T11:43:42.893
> 
> 标签：locale, prettyfaces

我目前正在尝试使用漂亮的面孔来设置我的项目。基本导航和参数设置有效，但是当我尝试将“语言环境”注入 sessionScoped bin 时，prettyfaces 抛出异常，说

> PrettyFaces：处理 URL 时发生异常

这是我的配置：

```
 <url-mapping id="locale">
  <pattern value="/#{language: CurrentUser.language}" />
  <view-id value="/faces/index.xhtml" />
</url-mapping>

<url-mapping parentId="locale" id="portal"> 
    <pattern value="/portal" /> 
    <view-id value="/faces/index.xhtml" />
</url-mapping> 
```

如果我删除 EL 注入，则规则有效，但 ofc。CurrentUser.language 没有设置，那么。

编辑：我现在已经用查询参数尝试过了——但在某处也有一个“null”：

```
http://localhost:8090/portal/?language=en 
```

导致：

```
PrettyFaces: Exception occurred while processing mapping<portal:#{currentUser.language}> for query parameter named<language> null 
```

带配置

```
<url-mapping id="portal"> 
    <pattern value="/portal/" /> 
    <view-id value="/faces/index.xhtml" />
    <query-param name="language">#{currentUser.language}</query-param>
</url-mapping> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T16:03:03.240

您是否尝试注入 Locale 对象字段？EL/JSF 中的 String -> Locale 可能没有默认转换器，因此您可能应该注入一个 Field，然后使用 an`<action>#{currentUser.language}</action>`将其转换为 Locale 对象并设置它。

# iphone - ViewController 中的 MPMusicPlayerController 在 applicationDidEnterBackground 中不播放

> ID：11900956
> 
> 赞同：0
> 
> 时间：2012-08-10T11:43:53.093
> 
> 标签：iphone, objective-c, ios5, xcode4.3

当我只有一个 UIWindow 时，我能够让这个 appDelegate 方法工作 - 我将应用程序的 plist 文件属性设置为在后台播放音频，但是在引入 ViewController 之后，当我后台应用程序时音频淡出。

有什么建议么？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T11:50:28.570

您应该添加以下代码：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    AVAudioSession* audio = [[AVAudioSession alloc] init];
    [audio setCategory: AVAudioSessionCategoryPlayback error: nil];
    [audio setActive: YES error: nil];

    return YES;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T12:09:27.247

[从此处](http://developer.apple.com/library/ios/#documentation/iphone/conceptual/iphoneosprogrammingguide/Introduction/Introduction.html)获取有关后台任务的信息

# c# - 通过 C# 中具有 WebRequest WebResponse 的 IAsyncResult 确定错误

> ID：11900962
> 
> 赞同：0
> 
> 时间：2012-08-10T11:44:15.027
> 
> 标签：c#, httpwebrequest, iasyncresult

我正在开发一个 Windows Phone 应用程序。通常我会使用 a`WebClient`但是，在这种特定情况下，我被告知我需要使用 a `HttpWebRequest`。我可以成功触发请求。但是，有时它会失败。由于网络问题或服务器引发的异常。如何检测与该`IAsyncResult`方法相关的错误？目前，我有以下内容：

```
private void HttpWebRequest_Completed(IAsyncResult result)
{
  WebRequest request = (WebRequest)(result.AsyncState);
  WebResponse response = request.EndGetResponse(result);

  // Detect if there was an error right here. 
  ...
} 
```

除非出现错误，否则我的代码工作正常。我不确定如何检测错误。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T11:46:21.043

如果您调用同步方法，我希望`EndGetResponse`抛出相同的异常。`GetResponse`

# security - 在 Orchard CMS 中为用户设置秘密问题和答案

> ID：11900967
> 
> 赞同：0
> 
> 时间：2012-08-10T11:44:27.493
> 
> 标签：security, orchardcms

我希望通过添加安全问题让用户注册更加安全。我可以创建一个新的 contentpart 并将其附加到用户 contentitem。但在我这样做之前，我想知道它是否还没有。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T00:41:50.223

您可以使用[扩展注册模块](http://extendedregistration.codeplex.com/)并在那里添加安全问题 - 我正在使用此模块来捕获其他用户信息，并且效果很好。但是，我的工作流程是管理员创建用户......所以这可能与用户将输入自己的注册信息的工作流程不同。

# php - 如何计算过去 24 小时内创建的寄存器？

> ID：11900975
> 
> 赞同：-2
> 
> 时间：2012-08-10T11:45:00.330
> 
> 标签：php, mysql

示例 MySQL；

```
username work date(TIMESTAMP)

x        1    2012-08-08 12:15:33
x        3    2012-10-08 12:11:33
x        4    2012-08-08 11:15:33
x        2    2012-07-08 12:15:33 
```

我只想用一条规则来控制；

X 只能在 24 小时内使 3 个工作 mysql 注册表。

我找不到真正的 MySQL 命令。如何通过 MySQL 和 php 控制它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T11:48:11.270

这将使您的计数超过 3

```
select username from table
where date>=dateadd(current_date+interval -1 day)
group by username  
having count(*)>3 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T11:47:22.937

这将返回用户“x”在最后一天设置了多少作业：

```
select count(*) as jobCount from yourTable where date>=date_sub(now(), 1 day) and userName='x' 
```

您可以在放置新作业时检查该用户是否在列表中，并且 jobCount 至少为 3。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T11:49:32.067

我认为这就是你要找的：

```
SELECT username , COUNT(1) AS cnt
FROM  table_name
WHERE `date` >= DATE_SUB(CURRENT_DATE, INTERVAL 1 day),
GROUP BY username 
HAVING cnt <= 3; 
```

# c - 如何停止 C 中的预编译？

> ID：11900977
> 
> 赞同：2
> 
> 时间：2012-08-10T11:45:01.580
> 
> 标签：c, precompiled, conditional-compilation

查看 config.h 中的代码：

```
#if (API_TYPE == 1)
    #define URL_API @"https://dapi.xxx.com/1.1/"
#elif (API_TYPE == 2)
    #define URL_API @"https://tapi.xxx.com/1.1/"
#elif (API_TYPE == 3)
    #define URL_API @"https://api.xxx.com/1.1/"
#else
   // I want stop pre-compile if in here.
   // assert(0);
#endif 
```

API_TYPE 只能定义为 1,2,3。如果定义为其他值是错误的。我可以在#else 路径中编写一些非法代码。但它并不完美。如果它进入#else 路径，是否有任何命令或方法可以停止预编译过程？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-10T11:46:38.117

您可以 insert `#error "Error message"`，这将停止预处理并且编译甚至不会开始。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T11:47:55.920

使用#error

[http://en.wikipedia.org/wiki/C_preprocessor#User-defined_compilation_errors](http://en.wikipedia.org/wiki/C_preprocessor#User-defined_compilation_errors)

# java - Java中的两个同步块执行

> ID：11900982
> 
> 赞同：5
> 
> 时间：2012-08-10T11:45:26.417
> 
> 标签：java, multithreading

为什么Java中两个不同的线程不能同时执行两个同步块。

**编辑**

```
public class JavaApplication4 {

    public static void main(String[] args) {
        new JavaApplication4();
    }

    public JavaApplication4() {
        Thread t1 = new Thread() {

            @Override
            public void run() {
                if (Thread.currentThread().getName().equals("Thread-1")) {
                    test(Thread.currentThread().getName());
                } else {
                    test1(Thread.currentThread().getName());
                }
            }
        };
        Thread t2 = new Thread(t1);
        t2.start();
        t1.start();

    }

    public synchronized void test(String msg) {
        for (int i = 0; i < 10; i++) {
            try {
                Thread.sleep(100);
            } catch (InterruptedException ex) {
            }
            System.out.println(msg);
        }
    }

    public synchronized void test1(String msg) {
        for (int i = 0; i < 10; i++) {
            try {
                Thread.sleep(100);
            } catch (InterruptedException ex) {
            }
            System.out.println(msg + " from test1");
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-10T11:46:50.527

你的说法是错误的。只要不竞争同一个锁，任意数量的同步块都可以并行执行。

但是如果你的问题是关于块竞争同一个锁，那么问“为什么会这样”是错误的，因为这是整个概念的目的。程序员**需要**一种互斥机制，他们通过`synchronized`.

最后，您可能会问“为什么我们需要相互排除并行执行的代码段”。答案是，有许多数据结构只有在以某种方式组织时才有意义，并且当线程更新结构时，它必须逐部分进行，因此结构处于“损坏”状态在它进行更新时。如果此时出现另一个线程并尝试读取结构，或者更糟糕的是，自行更新它，整个事情就会崩溃。

# 编辑

我看到了您的示例和评论，现在很明显困扰您的是：`synchronized`方法修饰符的语义。这意味着该方法将争夺`this`' 的监视器上的锁定。同一个对象的所有`synchronized`方法都会争夺同一个锁。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-10T11:53:42.320

这就是同步的全部概念，如果你在一个对象（或一个类）上加锁，那么其他线程都不能访问任何同步块。

例子

```
Class A{

public void method1()
{
 synchronized(this)//Block 1 taking lock on Object
 {
  //do something
 }
}

public void method2()
{
 synchronized(this)//Block 2 taking lock on Object
 {
  //do something
 }
}
} 
```

如果一个对象的一个​​线程进入任何同步块，**同一对象的**所有其他线程将不得不等待该线程从同步块中出来才能进入任何同步块。如果有 N 个这样的块，则 Object 的一个线程一次只能访问一个块。**请注意我对同一对象的线程的**强调。如果我们正在处理来自不同对象的线程，则该概念将不适用。

让我还补充一点，如果您锁定**class**，上述概念将扩展到该类的任何对象。因此，如果不是说`synchronized(this)`，我会使用`synchronized(A.class)`，代码将指示 JVM，不管线程属于哪个对象，让它等待其他线程完成同步块执行。

编辑：请理解，当您锁定（通过使用同步关键字）时，您不仅仅是锁定一个块。您正在锁定对象。这意味着你告诉 JVM “嘿，这个线程正在做一些可能会改变对象（或类）状态的**关键工作**，所以不要让任何其他线程做任何其他**关键工作**”。关键工作，这里指的是同步块中的所有代码，它们锁定特定的对象（或类），而不仅仅是一个同步块。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T11:48:23.090

两个线程可以同时执行同步块，直到它们没有锁定同一个对象。

如果块在不同的对象上同步......它们可以同时执行。

```
synchronized(object1){
    ...
}

synchronized(object2){
    ...
} 
```

**编辑：** `Please reason the output for http://pastebin.com/tcJT009i`

**在您的示例中，当您调用同步方法时，锁定是在同一个对象上获取的。尝试创建两个对象并查看。**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-10T11:54:35.700

这不是绝对正确的。如果您正在处理不同对象上的锁，那么多个线程可以执行这些块。

```
 synchronized(obj1){
       //your code here
   }

   synchronized(obj2){
       //your code here
   } 
```

在上述情况下，一个线程可以执行第一个，第二个可以执行第二个块，关键是线程正在使用不同的锁。

如果线程正在处理相同的，则您的陈述是正确的`lock`。如果一个线程已获取锁并执行，则每个对象仅与 java 中的一个锁相关联，然后其他线程必须等到第一个线程释放该`lock`.Lock 可以通过`synchronized`块或方法获取.

# android - 登录时如何设置时间检查？

> ID：11900984
> 
> 赞同：-1
> 
> 时间：2012-08-10T11:45:29.210
> 
> 标签：android

我想设置 30 秒的时间检查。基本上我想要的是我会调用一个网络服务进行登录，点击登录按钮后，我想检查我是否在 30 秒内没有得到状态 OK，所以显示一个警报，请再试一次。这个怎么设置？

登录按钮：

```
 logbtn.setOnClickListener(new OnClickListener() 
        {
            public void onClick(View v) 
            {
                start = System.currentTimeMillis();
                SharedPreferences myPrefs = Login.this.getSharedPreferences("myPrefs",MODE_WORLD_READABLE);
                SharedPreferences.Editor prefsEditor = myPrefs.edit();
                prefsEditor.putLong("starttime", start);
                prefsEditor.commit();
} 
```

在这里我想检查一下这里的区别：

```
SharedPreferences myPrefs = Login.this.getSharedPreferences("myPrefs",MODE_WORLD_READABLE);
            time = myPrefs.getLong("starttime", System.currentTimeMillis());
if("ok".equalsIgnoreCase(status) && (System.currentTimeMillis() - time) > 3000)
{
    \\Code
}
else
{  
    Alert
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T12:04:55.707

您可以使用以下代码片段

```
long startTime = 0;

logbtn.setOnClickListener(new OnClickListener() 
{
    public void onClick(View v) 
    {
        startTime = System.currentTimeMillis();
        SharedPreferences myPrefs = Login.this.getSharedPreferences("myPrefs",MODE_WORLD_READABLE);
        SharedPreferences.Editor prefsEditor = myPrefs.edit();
        prefsEditor.putLong("starttime", start);
        prefsEditor.commit();
        startLoginThread();
 }

private void startLoginThread()
{
    new Thread(new Runnable() {

        public void run() 
        {
            try 
            {
                Thread.sleep(1000); 
                if((System.currentTimeMillis() - startTime) > 30 * 1000)
                {
                    //show your allert
                }

            } 
            catch (Exception e) 
            {
                e.printStackTrace();
            }
        }
    }).start();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T11:49:51.577

我建议你启动一个新线程，负责状态检查。在您的新线程中，您可以简单地使用睡眠方法，并且在睡眠 30 秒后 - 您将向用户显示状态。查看有关 Java API 中线程的更多信息。

# javascript - 在扩展中使用 js-ctypes 会导致 firefox 崩溃

> ID：11900989
> 
> 赞同：0
> 
> 时间：2012-08-10T11:46:06.543
> 
> 标签：javascript, firefox, browser, firefox-addon, shim

我创建了将使用 js-ctypes 调用本机 DLL 函数的扩展。我编写了本机 DLL（用 C 编写），它导出了一个由扩展 javascript 调用的 C 函数。我正在尝试从我的本机 DLL 加载另一个 DLL（用 c++ 编写）。

我的问题是，如果我安装扩展程序，Firefox 在启动时会崩溃。

请帮我解决问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-07T22:50:36.173

为什么要编写 dll 来加载另一个 dll - 我认为更简洁的方法是将 c++ 代码编译到静态库中，然后在 C 中编写一个引用该库函数的 dll。这将适用于 js-ctypes

# javascript - 如何在 http:// 页面中加载登录 https:// 页面

> ID：11900991
> 
> 赞同：0
> 
> 时间：2012-08-10T11:46:14.693
> 
> 标签：javascript, html, jsp

我有一个普通的 HTTP 页面，在顶部标题部分我有一个登录链接。单击登录链接后，会出现一个 twitter 样式的 Flyout 登录窗口，它应该是一个安全的登录部分。

谁能建议我如何实现在 HTTP 页面中加载 HTTPS 页面或部分。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T11:54:25.643

浮出控件的内容应该是 iframe。在那里你可以有一个https页面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T13:07:25.583

可能它不起作用，因为会有跨域发布并且页面会被浏览器阻止。

# python - django 上的错误 - .save() 函数

> ID：11900994
> 
> 赞同：-2
> 
> 时间：2012-08-10T11:46:22.290
> 
> 标签：python, django

```
class Member(models.Model):# member db table
    userID      = models.CharField(max_length=80,primary_key=True) #user id 
    password    = models.CharField(max_length=32)# password
    nickname    = models.CharField(max_length=100)# user nickname
    penalty     = models.PositiveSmallIntegerField(max_length=10,default=0,null=True)
    participation=models.ForeignKey('Room',default=None,blank=True,null=True)

def __unicode__(self):
        return self.userID

def doJoin(request):
    if request.is_ajax() and request.method == 'POST':
        # check validation
        userID = request.POST['userID']
        userNickname = request.POST['nickname']
        if (checkID(userID) == False) and (checkNickname(userNickname) == False) :
            #save to the database
            newUser = Member()
            newUser.userID = userID
            newUser.nickname = userNickname
            newUser.password = request.POST['password']
            print newUser.userID , newUser.nickname , newUser.password , newUser.penalty , newUser.participation
            newUser.save() #<------------error line!!!!

            return HttpResponse('true')
        else:
            return HttpResponse('false')
    else:
        HttpResponse('false') 
```

8号线左右

在功能`doJoin`：

```
newUser.save() # <--- error... so sad... 
```

我该怎么办？请帮帮我。

这个来源有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T12:07:21.760

你有没有关闭调试？如果你得到一个 500 并且你打开了调试，你会得到一个带有异常的堆栈跟踪。

正在`checkID()`做`checkNickname()`什么？如果它们正在执行某种验证，那么您确实应该在表单类中而不是在视图中执行此操作。我也不会直接从模型中提取值`request.POST`来填充您的模型。我强烈建议从表单的`cleaned_data`字典中检索这些值。

# performance - SSAS 维度处理使基础度量未处理

> ID：11900995
> 
> 赞同：5
> 
> 时间：2012-08-10T11:46:23.777
> 
> 标签：performance, sql-server-2008, ssis, ssas, measures

有一个与销售量度相关的销售发票维度。销售措施是分区的。我有 2011 分区和 2012 分区。我认为我们不需要处理 Sales 2011 分区，因为它不再更改。

不幸的是（通过“影响分析”确认）在重新处理销售发票维度后，我的两个销售度量分区都变为未处理。有没有办法避免这种情况？请注意，主键不会改变。处理发生在 SSIS 任务中。我只是想将“流程度量 - 2011 年销售”设置为“禁用”，但保留多维数据集中已经存在的数据。

**编辑**我做了你推荐的。我将销售所需的所有维度切换为“流程更新”（发票、客户、产品等）。

我处理了所有内容，然后在 SSIS 中禁用了其中一个 Sales 度量分区 (2011)，只留下 Sales 2012 分区进行处理。不幸的是，在再次处理后我看不到 2011 年的数据（但我可以浏览多维数据集）。

经过几次测试和对多维数据集的另一次重新处理，Sales 2011 变得“未处理”，整个多维数据集变得无法访问。

可以通过哪些检查来确定问题所在？

* * *

我做了你推荐的。我将销售所需的所有维度切换为“流程更新”（发票、客户、产品等）。

我处理了所有内容，然后在 SSIS 中禁用了其中一个 Sales 度量分区 (2011)，只留下 Sales 2012 分区进行处理。不幸的是，在再次处理后我看不到 2011 年的数据（但我可以浏览多维数据集）。

经过几次测试和对多维数据集的另一次重新处理，Sales 2011 变得“未处理”，整个多维数据集变得无法访问。

可以通过哪些检查来确定问题所在？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T13:38:18.890

你是如何处理维度的？任何维度上的 Process Full 都会使所有分区的数据无效，因为它会删除所有数据，然后处理对象。每个分区都需要处理，即使是您示例中的 Sales 2011，因为假设维度更改的 ID（我知道这不常见，但我可能会发生，这就是存在限制的原因）2011 分区上的数据需要是更新为新值。

要仅处理部分分区，必须将维度处理配置为使用 ProcessUpdate 类型。它强制重新读取数据和更新维度属性。是一个更轻量级的处理选项，它应用成员更改（插入、删除、更新）而不会使使用维度的多维数据集失效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T12:47:12.880

你在维度上做一个完整的过程吗？这将使这些措施处于无法使用的状态。进程更新将使它们可用。您不需要处理旧度量值组，但如果维度中的成员发生更改，您可能需要处理旧度量值组上的聚合/索引，具体取决于多维数据集的设置方式。

# macos - 层不透明度的隐式动画在 Mountain Lion 上没有动画

> ID：11900997
> 
> 赞同：0
> 
> 时间：2012-08-10T11:46:26.353
> 
> 标签：macos, cocoa, core-animation

我真的很困惑为什么这段代码在 10.6 和 10.7 上运行良好，但在 10.8 上没有动画并且不透明度值立即改变。Self 是一个 NSView 子类。

```
[CATransaction begin];
[CATransaction setValue:[NSNumber numberWithFloat:0.5]
                 forKey:kCATransactionAnimationDuration];
self.layer.opacity = 1.0;
self.labelFilename.layer.opacity = 1.0;
self.labelDate.layer.opacity = 1.0;
[CATransaction commit]; 
```

相反，此代码无法在 10.6 上制作动画，但在 10.7 和 10.8 上运行良好

```
CABasicAnimation *theAnimation;
theAnimation = [CABasicAnimation animationWithKeyPath:@"opacity"];
theAnimation.duration = 0.5;
theAnimation.timingFunction = [CAMediaTimingFunction functionWithName: kCAMediaTimingFunctionEaseInEaseOut];
theAnimation.toValue=[NSNumber numberWithFloat:1.0];
theAnimation.removedOnCompletion = NO;
theAnimation.fillMode = kCAFillModeForwards;
[self.layer addAnimation:theAnimation forKey:@"fadeUp"];
[self.labelFilename.layer addAnimation:theAnimation forKey:@"fadeUpName"];
[self.labelDate.layer addAnimation:theAnimation forKey:@"fadeUpDate"]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T13:41:21.897

我通过添加显式动画让我的动画在 10.8 上恢复工作，如下所示：

```
// added explicit animation
CABasicAnimation *animOut = [CABasicAnimation animationWithKeyPath:@"transform"];
CATransform3D transform = CATransform3DMakeRotation(pi,0,1,0);
transform = CATransform3DScale(transform, scaleFactor, scaleFactor, 1.0f);
[animOut setFromValue:[NSValue valueWithCATransform3D:CATransform3DIdentity]];
[animOut setToValue:[NSValue valueWithCATransform3D:transform]];
[animOut setDuration:0.3f];
[[goingImageView layer] addAnimation:animOut forKey:nil];

// implicit animation code that worked before 10.8
[[goingImageView layer] setTransform:transform]; 
```

# jsf-2 - Primefaces overlayPanel 的延迟问题 - 加载到延迟

> ID：11900998
> 
> 赞同：9
> 
> 时间：2012-08-10T11:46:30.300
> 
> 标签：jsf-2, primefaces

我将 Primefaces 3.2 与 jsf 2 和 glassfish 3.1.2 一起使用。

我有 ap:dataTable of users 包含用户的头像。每当用户将鼠标移到头像上时，ap:overlayPanel 就会出现用户的更多信息（延迟加载），并在用户将光标移开时消失 - 如下所示：

`<p:overlayPanel for="avatar" dynamic="true" showEvent="mouseover" hideEvent="mouseout" ...>`

这工作得很好——只要用户是“慢手”。每当用户在许多头像上方快速移动光标时，许多叠加面板都会保持可见。例如，当用户将光标悬停在显示用户头像的位置并使用鼠标的滚轮向下或向上滚动用户表时。

我相信覆盖面板在调度时开始`dynamic="true"`从服务器动态加载信息（），并在服务器`showEvent="mouseover"`响应到达后显示覆盖面板。这样，当覆盖面板变得可见时，无法检测光标是否已经离开 - 因此`hideEvent="mouseout"`永远不会调度。

有没有办法让 primefaces 覆盖面板直接出现在鼠标悬停上，显示加载 gif 并在响应来自服务器时将内容更新到覆盖面板中。

这是一个好的方法还是有人知道解决这个讨厌的问题的其他方法？

谢谢皮特

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-15T17:22:02.820

由于我的第一个答案已经很长并且包含有效信息，我决定打开一个新的答案来展示我的最终方法。

我现在使用 Primefaces 继承模式，使代码更简洁。我还注意到`bindEvents`不需要替换/覆盖整个函数，因为我们可以删除旧的事件处理程序。最后，这段代码修复了遇到的最新问题：ajax 到达之前的隐藏事件。

```
PrimeFaces.widget.OverlayPanel = PrimeFaces.widget.OverlayPanel
        .extend({

            bindEvents : function() {
                this._super();

                var showEvent = this.cfg.showEvent + '.ui-overlay', hideEvent = this.cfg.hideEvent
                        + '.ui-overlay';

                $(document).off(showEvent + ' ' + hideEvent, this.targetId).on(
                        showEvent, this.targetId, this, function(e) {
                            var _self = e.data;

                            clearTimeout(_self.timer);
                            _self.timer = setTimeout(function() {
                                _self.hidden = false;
                                _self.show();
                            }, 300);
                        }).on(hideEvent, this.targetId, this, function(e) {
                    var _self = e.data;

                    clearTimeout(_self.timer);
                    _self.hidden = true;
                    _self.hide();

                });
            },

            _show : function() {
                if (!this.cfg.dynamic || !this.hidden) {
                    this._super();
                }
            }

        }); 
```

我很抱歉格式不好：Eclipses fault ;)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T21:53:28.280

哇，终于经过长时间的调试会话和测试各种方法后，我认识到问题不在于 ajax 请求，而在于事件处理程序本身：

```
.on(hideEvent, this.targetId, this, function(e) {
            var _self = e.data;

            if(_self.isVisible()) {
                _self.hide();
            }
        }); 
```

如您所见，如果之前可见，小部件只是隐藏起来。如果您将鼠标移出得太快，现在可能会发生两件事：

*   小部件根本不可见
*   动画还在继续

在这种情况下，事件被丢弃，面板保持可见。由于动画是排队的，因此只需删除 if 语句即可解决问题。我通过替换整个`bindEvents`方法来做到这一点：

```
PrimeFaces.widget.OverlayPanel.prototype.bindEvents =  function() {
    //mark target and descandants of target as a trigger for a primefaces overlay
    this.target.data('primefaces-overlay-target', this.id).find('*').data('primefaces-overlay-target', this.id);

    //show and hide events for target
    if(this.cfg.showEvent == this.cfg.hideEvent) {
        var event = this.cfg.showEvent;

        $(document).off(event, this.targetId).on(event, this.targetId, this, function(e) {
            e.data.toggle();
        });
    }
    else {
        var showEvent = this.cfg.showEvent + '.ui-overlay',
        hideEvent = this.cfg.hideEvent + '.ui-overlay';

        $(document).off(showEvent + ' ' + hideEvent, this.targetId).on(showEvent, this.targetId, this, function(e) {
            var _self = e.data;

            if(!_self.isVisible()) {
                _self.show();
            }
        })
        .on(hideEvent, this.targetId, this, function(e) {
            var _self = e.data;

            _self.hide();

        });
    }

    //enter key support for mousedown event
    this.bindKeyEvents();

    var _self = this;

    //hide overlay when mousedown is at outside of overlay
    $(document.body).bind('mousedown.ui-overlay', function (e) {
        if(_self.jq.hasClass('ui-overlay-hidden')) {
            return;
        }

        //do nothing on target mousedown
        var target = $(e.target);
        if(_self.target.is(target)||_self.target.has(target).length > 0) {
            return;
        }

        //hide overlay if mousedown is on outside
        var offset = _self.jq.offset();
        if(e.pageX < offset.left ||
            e.pageX > offset.left + _self.jq.outerWidth() ||
            e.pageY < offset.top ||
            e.pageY > offset.top + _self.jq.outerHeight()) {

            _self.hide();
        }
    });

    //Hide overlay on resize
    var resizeNS = 'resize.' + this.id;
    $(window).unbind(resizeNS).bind(resizeNS, function() {
        if(_self.jq.hasClass('ui-overlay-visible')) {
            _self.hide();
        }
    });
}; 
```

在加载时执行此代码，问题应该消失了。

* * *

* * *

尽管如此，当您替换 js 代码时，您可以利用这个机会来实现一个相当不错的功能。通过在事件处理程序中使用超时，可以轻松实现一点延迟，不仅可以提高可用性（不再出现数千个弹出窗口），还可以减少网络流量：

```
 $(document).off(showEvent + ' ' + hideEvent, this.targetId).on(showEvent, this.targetId, this, function(e) {
            var _self = e.data;

            _self.timer = setTimeout( function(){
                if(!_self.isVisible()) {
                    _self.show();
                }
            }, 300);
        })
        .on(hideEvent, this.targetId, this, function(e) {
            var _self = e.data;

            clearTimeout(_self.timer);
            _self.hide();

        }); 
```

当然你可以使用一个全局变量来控制延迟时间。如果您想要更灵活的方法，您必须覆盖中的`encodeScript`方法`OverlayPanelRender`以传输附加属性。然后您可以使用`_self.cfg.delay`. 请注意，您也必须替换组件模型`OverlayPanel`，为其提供额外的属性。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-09-02T21:08:46.287

同时，我感谢您提供这个出色的解决方案，我借此机会为 Primefaces 5.2 更新它。在我们的应用程序中，代码在升级后中断。

**遵循Primefaces 5.2**的更新代码：

```
 PrimeFaces.widget.OverlayPanel.prototype.bindTargetEvents =  function() {
    var $this = this;
    //mark target and descandants of target as a trigger for a primefaces overlay
    this.target.data('primefaces-overlay-target', this.id).find('*').data('primefaces-overlay-target', this.id);

    //show and hide events for target
    if(this.cfg.showEvent === this.cfg.hideEvent) {
        var event = this.cfg.showEvent;

        this.target.on(event, function(e) {
            $this.toggle();
        });
    }
    else {
        var showEvent = this.cfg.showEvent + '.ui-overlaypanel',
        hideEvent = this.cfg.hideEvent + '.ui-overlaypanel';

        this.target
            .off(showEvent + ' ' + hideEvent)
            .on(showEvent, function(e) {
                clearTimeout($this.timer);

                $this.timer = setTimeout(function() {
                    $('.ui-overlaypanel').hide(); 
                    $this.hidden = false;
                    $this.show();
                }, 500);
            })
            .on(hideEvent, function(e) {

                clearTimeout($this.timer); 

                $this.timer = setTimeout(function() {
                    // don't hide if hovering overlay
                    if(! $this.jq.is(":hover")) {
                        $this.hide();
                    }
                }, 100);
            });
    }

    $this.target.off('keydown.ui-overlaypanel keyup.ui-overlaypanel').on('keydown.ui-overlaypanel', function(e) {
        var keyCode = $.ui.keyCode, key = e.which;

        if(key === keyCode.ENTER||key === keyCode.NUMPAD_ENTER) {
            e.preventDefault();
        }
    })
    .on('keyup.ui-overlaypanel', function(e) {
        var keyCode = $.ui.keyCode, key = e.which;

        if(key === keyCode.ENTER||key === keyCode.NUMPAD_ENTER) {
            $this.toggle();
            e.preventDefault();
        }
    });
}; 
```

我还添加了一个额外的功能，允许用户将鼠标移动到覆盖层上而不隐藏它。当您将鼠标移出它时它应该隐藏然后我通过以下方式完成：

```
<p:overlayPanel .... onShow="onShowOverlayPanel(this)" ...>

function onShowOverlayPanel(ovr) {
    ovr.jq.on("mouseleave", function(e) {
        ovr.jq.hide();
    });
} 
```

希望你喜欢！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-09-01T01:22:06.263

已经很久了，但万一有人遇到这个问题，[从 Primefaces 6.2 开始](https://github.com/primefaces/primefaces/issues/1947)`showDelay`添加了一个属性`overlayPanel`来解决这个问题。但是，由于某种原因，它不在官方文档中。