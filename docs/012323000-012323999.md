# StackOverflow 问答 12323000-12323999

# mysql - MySQL数据库中NULL和NOT NULL是什么意思

> ID：12323001
> 
> 赞同：2
> 
> 时间：2012-09-07T17:48:10.627
> 
> 标签：mysql, database

每当我们在 mysql 数据库中创建表时，就会出现一个空复选框选项。如果单击它，那么它也采用空值，如果它保持未选中状态，那么它也采用空值。那是什么意思？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T18:03:10.027

`NULL`用于表示“无值”，并允许区分 1 和 0、真或假、空字符串与有内容的字符串。它类似于`nil`Ruby、`null`JavaScript 或`NULL`PHP。

如果将列定义为，`NOT NULL`则不允许在`INSERT`没有指定该列的值的情况下使用。如果您有，`DEFAULT`那么这将自动应用。如果您使用 ORM，它可能会为您填写一个安全的、最小的默认值。

列可能`NULL`需要几乎微不足道的每行额外存储量（一位）来保存`NULL`or`NOT NULL`标志。

请记住，`NULL`在 MySQL 中是不寻常的，因为它不大于、小于或等于任何其他值。这就是逻辑比较的原因`IS NULL`和`IS NOT NULL`要求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T17:51:15.000

该复选框可能会将默认值设置为 null。也可能有一个框指定字段是否接受空值。Null 基本上意味着 Empty 或 Nothing（在 VB 中）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T17:51:48.260

Null 基本上是“没有价值”。如果您允许空值，您需要确保您的代码能够处理不包含值的列。另一种方法是为每列定义一个“空”值（例如，0 表示整数）。有时这比处理空值更省力。

正如下面 HLGEM 所指出的：我并不是说 0 等于 null。考虑：带有“StockOnHand”列的数据库。

0 表示您知道手头没有库存。Null 真的意味着未知（你有股票，你可能没有）

根据应用程序，也许您决定将“未知”视为与“无库存”相同 - 在这种情况下，您可以使用“无空值”并且只有一个 0 值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-07T18:06:19.713

根据[手册](http://dev.mysql.com/doc/refman/5.0/en/null-values.html)：

> 该`NULL`值表示“没有数据”。`NULL`可以用任何字母大小写。同义词是`\N`（区分大小写）。

`NOT NULL`将意味着相反的`NULL`，或者不是没有数据。由于某些列可以是`NULL`，因此您可以使用它`WHERE col IS NOT NULL`来查找非“空”的值。

# jquery - 输入单选按钮设置 safari 错误？

> ID：12323003
> 
> 赞同：0
> 
> 时间：2012-09-07T17:48:18.707
> 
> 标签：jquery, jquery-ui

这是链接：[jsfiddle](http://jsfiddle.net/VrAqw/4/)

我使用 jquery 1.8 和 jquery ui 1.8.23

当我尝试在 Safari 中放大它时，输入圆形按钮出现在结果面板的角落。我该如何隐藏它？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T18:12:14.973

我认为您可以添加这种样式（不确定这是否完美，但您可以尝试一下）

```
.ui-helper-hidden-accessible{
    display:none;
}​ 
```

但请确保它正确提交，我已经在`safari`.

[演示](http://jsfiddle.net/VrAqw/5/)。

# facelets - 该项目尚未在 RAD 8.0 中配置为 Facelets

> ID：12323007
> 
> 赞同：0
> 
> 时间：2012-09-07T17:48:45.563
> 
> 标签：facelets

我正在尝试创建 JSF 2 页面。当我使用 facelets 模板创建页面时，我在顶部收到消息“该项目尚未为 Facelets 配置。您需要将 Facelets 运行时添加到项目的类路径”。我创建了名为 Test1.xhtml 的文件

```
 <?xml version="1.0" encoding="UTF-8" ?>
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11  /DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:ui="http://java.sun.com    /jsf/facelets"  xmlns:f="http://java.sun.com/jsf/core" xmlns:h="http://java.sun.com /jsf/html">
 <h:head>
<title>Test1</title>
<meta http-equiv="Content-Type"
content="application/xhtml+xml; charset=UTF-8" />
<meta name="GENERATOR"
content="Rational® Application Developer for WebSphere® Software" />
  </h:head>
 <h:body>
 Test
 </h:body>
 </html> 
```

当我运行它时，我在资源管理器中看到相同的文件内容，而不是测试。也没有为它创建页面代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T22:57:05.980

当您在页面上放置第一个组件时，会创建页面代码和所需的 web.xml/facesconfig stuf。检查这个：[http ://www-01.ibm.com/support/docview.wss?uid=swg21503733](http://www-01.ibm.com/support/docview.wss?uid=swg21503733)

# sql - 在 DB2 中将表从一台服务器复制到另一台服务器

> ID：12323019
> 
> 赞同：0
> 
> 时间：2012-09-07T17:50:12.013
> 
> 标签：sql, db2

```
SELECT *
FROM table1 X, table2 C, table3 M, table4 XSDT
WHERE X.CATID= C.CATID
AND M.MEMID= X.MEMID
AND XSDT.SHIPDISC= X.SHIPDISC; 
```

假设我想在 HOST db（外部）上运行此查询并获取其数据并将其复制到本地 DB2 数据库。

在 DB2 中有没有办法做到这一点？

我知道 teradata 具有快速加载功能......但我不确定 db2 或我将如何去做。

请记住，我*没有*dba 级别的权限。

解决方案：http: [//publib.boulder.ibm.com/infocenter/db2luw/v9/index.jsp ?topic=%2Fcom.ibm.db2.udb.admin.doc%2Fdoc%2Fr0002079.htm](http://publib.boulder.ibm.com/infocenter/db2luw/v9/index.jsp?topic=%2Fcom.ibm.db2.udb.admin.doc%2Fdoc%2Fr0002079.htm)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T18:15:11.730

如果您想使用 SQL 执行此操作，那么您将使用类似于以下 SQL 的内容：

```
create table schema2.table1;

insert into schema2.table1 
    select * from schema1.table1; 
```

由于您要连接表，因此您必须在 CREATE TABLE SQL 中定义本地表，并列出 INSERT 和 SELECT 中的列。

您可以对表进行 DB2 备份，并将它们恢复到本地模式。

您可以对表进行 DB2 导出，并使用 DB2 导入在本地模式上创建它们。

您可以使用 DB2 db2move 实用程序。

# javascript - 调用 $.each() 函数时的上下文变化

> ID：12323022
> 
> 赞同：0
> 
> 时间：2012-09-07T17:50:19.610
> 
> 标签：javascript, jquery, knockout.js

我正在使用 Jquery $.each 来获取属于特定类的所有元素，并且我想在每个元素上一个接一个地调用一个函数。为了实现这一点，我调用了以下函数：

```
 var elements = $('.colorpickerHolder');
                    elements.each(self.ApplyColorPicker()); 
```

我可以在运行时看到元素具有三个正确的元素。现在，当我调用 self.ApplyColorPicker 时，我使用 $(this) 引用每个当前元素。令人惊讶的是， $(this) 不是当前元素。

我的代码在淘汰框架下工作，两段代码都在 viewModel 下。并在 ApplyColorPicker $(this) 内部成为我的 viewModel。我不确定为什么会这样。有什么道理吗？

下面是我的 ApplyColorPicker 代码，只是评论：

```
 self.ApplyColorPicker = function () {
           $(this).ColorPicker({
                color: '#0000ff',
                onShow: function (colpkr) {
                    $(colpkr).fadeIn(500);
                    return false;
                },
                onHide: function (colpkr) {
                    $(colpkr).fadeOut(500);
                    return false;
                },
                onChange: function (hsb, hex, rgb) {
                    $(this).css('backgroundColor', '#' + hex);
                }
            });
        }; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T18:00:35.283

将对函数本身的引用传递给`each`，而不是函数的计算结果。换句话说，使用`self.ApplyColorPicker`而不是`self.ApplyColorPicker()`.

```
 var elements = $('.colorpickerHolder');
 elements.each(self.ApplyColorPicker); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T18:00:54.453

看起来您`ApplyColorPickers`在`.each`语句中调用，这意味着它只被调用一次并将该函数的结果传递给`.each`，而不是对该函数的引用。这应该起作用：

```
elements.each(self.ApplyColorPicker); //Without the () after ApplyColorPicker 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-07T17:51:42.067

你需要做：

```
elements.each(self.ApplyColorPicker); 
```

问题是`self.ApplyColorPicker()`实际上调用了该函数。您需要传递的`$.each`是对该函数的引用。

# c++ - 未调用 C++ 析构函数，具体取决于链接顺序

> ID：12323028
> 
> 赞同：3
> 
> 时间：2012-09-07T17:51:03.130
> 
> 标签：c++, gcc, destructor

在检查内存泄漏后，我在我的应用程序中遇到了这个问题，并发现我的一些类根本没有被破坏。

下面的代码分为 3 个文件，它应该实现一个名为[pimpl](http://en.wikipedia.org/wiki/Opaque_pointer "粉刺")的模式。预期的情况是让`Cimpl`构造函数和析构函数都打印它们的消息。然而，这不是我用 g++ 得到的。在我的应用程序中，只有构造函数被调用。

类.h：

```
#include <memory>

class Cimpl;

class Cpimpl {
    std::auto_ptr<Cimpl> impl;
public:
    Cpimpl();
}; 
```

类.cpp：

```
#include "classes.h"
#include <stdio.h>

class Cimpl {
public:
    Cimpl() {
        printf("Cimpl::Cimpl()\n");
    }
    ~Cimpl() {
        printf("Cimpl::~Cimpl()\n");
    }
};    

Cpimpl::Cpimpl() {
    this->impl.reset(new Cimpl);
} 
```

主.cpp：

```
#include "classes.h"

int main() {
    Cpimpl c;
    return 0;
} 
```

这是我能够进一步发现的：

```
g++ -Wall -c main.cpp
g++ -Wall -c classes.cpp
g++ -Wall main.o classes.o -o app_bug
g++ -Wall classes.o main.o -o app_ok 
```

看起来在两种可能的情况之一中调用了析构函数，这取决于链接顺序。使用 app_ok 我能够得到正确的场景，而 app_bug 的行为与我的应用程序完全一样。

在这种情况下，我是否缺少一点智慧？感谢您提前提出任何建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T18:46:23.753

pimpl 习惯用法的目标是不必在头文件中公开实现类的定义。*但是所有标准智能指针都需要在声明*时对其模板参数的定义可见，才能正常工作。

这意味着这是您真正想要使用`new`,`delete`和裸指针的少数情况之一。（如果我对此有误，并且有一个可用于 pimpl 的*标准*智能指针，请告诉我。）

### 类.h

```
struct Cimpl;

struct Cpimpl
{
    Cpimpl();
    ~Cpimpl();

    // other public methods here

private:
    Cimpl *ptr;

    // Cpimpl must be uncopyable or else make these copy the Cimpl
    Cpimpl(const Cpimpl&);
    Cpimpl& operator=(const Cpimpl&);
}; 
```

### 类.cpp

```
#include <stdio.h>

struct Cimpl
{
    Cimpl()
    {
        puts("Cimpl::Cimpl()");
    }
    ~Cimpl()
    {
        puts("Cimpl::~Cimpl()");
    }

    // etc
};

Cpimpl::Cpimpl() : ptr(new Cimpl) {}
Cpimpl::~Cpimpl() { delete ptr; }

// etc 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T18:52:09.387

问题是在 `auto_ptr<Cimpl>`对象的定义点，`Cimpl`是一个不完整的类型，也就是说，编译器只看到了一个前向声明`Cimpl`。没关系，但由于它最终会删除它持有指针的对象，因此您必须遵守此要求，从 [expr.delete]/5 开始：

> 如果要删除的对象在删除点具有不完整的类类型，并且完整的类具有非平凡的析构函数或释放函数，则行为未定义。

所以这段代码遇到了未定义的行为，所有的赌注都被取消了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T18:14:27.987

该代码违反了单一定义规则。在 classes.h 中有一个类的定义，在文件 classes.cpp 中`Cimpl`有一个不同的类定义。`Cimpl`结果是未定义的行为。对一个类有多个定义是可以的，但它们必须相同。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-07T18:14:48.000

为清楚起见进行了编辑，原始保留在下面。

此代码具有未定义的行为，因为在`main.cpp`隐式`Cpimpl::~Cpimpl`析构函数的上下文中只有 的前向声明`Cimpl`，但`auto_ptr`（或任何其他形式的做`delete`）需要完整定义才能合法地清理`Cimpl`. 鉴于这是未定义的行为，您的观察结果无需进一步解释。

原答案：

我怀疑这里发生的事情是隐式析构函数`Cpimpl`是在 的上下文中生成的，`classes.h`并且*无法*访问`Cimpl`. 然后，当`auto_ptr`尝试做它的事情并清理其包含的指针时，它会删除一个不完整的类，这是未定义的行为。鉴于它是未定义的，我们不必进一步解释它完全可以接受，它可以根据链接顺序以不同的方式工作。

我怀疑`Cpimpl`在源文件中带有定义的显式析构函数可以解决您的问题。

编辑：实际上现在我再看一遍，我相信你的程序违反了一个定义规则。在`main.cpp`其中看到一个不知道如何调用析构函数的隐式析构函数`Cimpl`（因为它只有一个前向声明）。在`classes.cpp`隐式析构函数*中确实*可以访问`Cimpl`' 的定义，因此可以调用它的析构函数。

# java - 使用两个 queryParameters 时 Java Rest 不起作用

> ID：12323029
> 
> 赞同：1
> 
> 时间：2012-09-07T17:51:04.237
> 
> 标签：java, rest, jax-rs

我设置了一个方法如下：

```
@GET
@Produces({MediaType.APPLICATION_JSON})
@Path("/{activityLocator}/item/{itemUid}")
@Override
public Obj getItemWidgetParams(
        @PathParam("activityLocator")
        String activityLocator,
        @PathParam("itemUid")
        String itemUid,
        @QueryParam("options")
        ItemWidgetInitOptions options,
        @QueryParam("mode")
        String mode) throws Exception
{
    return something;
} 
```

问题是，当我不使用查询参数或仅使用一个（以下两个 uri 中的任何一个）时，会调用此函数：

1) 主机名/服务/stepActivity/activityLocatorID/item/1

2) 主机名/服务/stepActivity/activityLocatorID/item/1?mode=5

但是一旦我添加了第二个查询参数，该函数就不再被调用，并且我收到一条错误消息作为响应：

主机名/服务/stepActivity/SerializedSession:activitylocatorID/item/1?mode=5&options=blah

知道我做错了什么吗？！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T18:58:08.720

尝试更改`ItemWidgetInitOptions options`为`String options`. 如果它是可选的，您可能希望给它一个默认值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T08:49:42.630

正如 km1 所说，您可能需要更改参数选项。

```
 @QueryParam("options")
    ItemWidgetInitOptions options 
```

根据[球衣文件](http://jersey.java.net/nonav/documentation/latest/jax-rs.html)：

> 通常，方法参数的 Java 类型可能：
> 
> 1.  是原始类型；
>     
>     
> 2.  有一个接受单个 String 参数的构造函数；
>     
>     
> 3.  有一个名为 valueOf 或 fromString 的静态方法，它接受单个 String 参数（例如，参见 Integer.valueOf(String) 和 java.util.UUID.fromString(String)）；或者
>     
>     
> 4.  是 List、Set 或 SortedSet，其中 T 满足上述 2 或 3。生成的集合是只读的。

# sqlite - SQLite - 获取排序/过滤查询的特定行索引

> ID：12323040
> 
> 赞同：4
> 
> 时间：2012-09-07T17:52:03.767
> 
> 标签：sqlite

我正在创建一个缓存系统，以使用排序/过滤查询从 SQLite 数据库表中获取数据并显示它。我从中提取的表可能非常大，当然，我需要通过在任何给定时间仅保留内存中的最大行数来最大限度地减少对内存的影响。这很容易通过使用`LIMIT`并`OFFSET`仅加载我需要的记录并根据需要更新缓存来完成。实现这一点是微不足道的。我遇到的问题是确定插入到特定查询中的新记录的插入索引在哪里，以便我可以适当地更新我的 UI。是否有捷径可寻？到目前为止，我的想法是：

1.  转储整个缓存，重新计算查询结果（不保证会包含新行），刷新缓存并刷新整个 UI。我希望很明显为什么这不是真正可取的。
2.  使用我自己的算法来确定新行是否包含在当前查询中，是否包含在当前缓存结果中，以及如果它在当前缓存范围内，则应将其插入到哪个索引中。这种方法最大的缺点是它的复杂性和我自己的排序/过滤算法与 SQLite 不匹配的风险。

当然，我想要的是能够询问 SQLite：Given 'Query A' 'Row B' 的索引是什么，而不需要加载整个查询结果。但是，到目前为止，我还没有找到一种方法来做到这一点。

我认为这并不重要，但这一切都发生在 iOS 设备上，使用的是 Objective-C 编程语言。

***更多信息***

查询和后续缓存基于用户输入。本质上，用户可以重新排序和过滤（或搜索）以改变他们看到的结果。我对简单地重新创建插入（实际上是编辑）缓存的沉默是为了提供“更流畅”的 UI 体验。

我应该指出，我目前倾向于选项“2”。我通过将所有记录加载到表中并使用我自己的算法在内存中执行排序/过滤来创建自己的缓存/索引系统。确定特定记录是否和/或在缓存中的位置所需的大量代码已经存在，所以我有点倾向于使用它。危险在于缓存与底层查询不匹配。如果我在缓存中包含一条查询不会返回的记录，我就会遇到麻烦并且可能会崩溃。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T18:18:10.307

通常，如果存在基础数据更改，您会期望缓存失效。我认为放弃它并重新开始将是您最简单、可维护的解决方案。我会推荐它，除非你有一个很好的理由。

您可以编写另一个刚刚返回行数的查询（下面的示例），以查看您的缓存是否应该失效。当缓存没有改变时，这将节省重新创建缓存。

```
SELECT name,address FROM people WHERE area_code=970;
SELECT COUNT(rowid) FROM people WHERE area_code=970; 
```

您需要从 sqlite 了解缓存何时失效的信息需要对查询和/或索引的工作方式有一些相当深入的了解。我会说这是相当高的耦合。

否则，您会想知道它在排序方面被插入的位置。您可能会在排序字段上键入每个页面。删除大于插入/删除字段的任何内容。任何时候你改变排序，你都会放弃一切。

如果您使用 C++，下面的内容将是一个开始。我意识到你不是在做 C++，但希望我正在尝试做的事情是显而易见的。

```
struct Person {
  std::string name;
  std::string addr;
};

struct Page {
  std::string key;
  std::vector<Person> persons;
  struct Less {
    bool operator()(const Page &lhs, const Page &rhs) const {
      return lhs.key.compare(rhs.key) < 0;
    }
  };
};

typedef std::set<Page, Page::Less> pages_t;
pages_t pages;

void insert(const Person &person) {
  if (sql_insert(person)) {
    pages_t::iterator drop_cache_start = pages.lower_bound(person);
    //... drop this page and everything after it
  }
} 
```

您必须进行一些争论才能使不同的数据类型`key`正常工作，但这是可能的。

从理论上讲，您可以将页面排除在外，只使用对象本身。但是，数据库将不再“拥有”数据。如果您只从数据库中填充页面，那么您对数据一致性的担忧就会减少。

这可能有点跑题了，您不是在重新实现[视图](http://www.sqlite.org/lang_createview.html)吗？它本身不缓存，但不清楚这是否是您的项目的要求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T18:24:56.783

您不需要记录编号。

将有序字段的值保存在 LIMITed 查询结果的第一条和最后一条记录中。然后您可以使用这些来检查新记录是否在此范围内。

换句话说，假设您按`Name`字段排序，并且原始查询是这样的：

```
SELECT Name, ...
  FROM mytab
  WHERE some_conditions
  ORDER BY Name
  LIMIT x OFFSET y 
```

然后尝试使用类似的查询获取新记录：

```
SELECT 1
  FROM mytab
  WHERE some_conditions
    AND PrimaryKey = LastInsertedValue
    AND Name BETWEEN CachedMin AND CachedMax 
```

* * *

类似地，要找出插入新记录之前（或之后）哪个记录，直接在插入的记录之后开始并使用一个限制，如下所示：

```
SELECT Name
  FROM mytab
  WHERE some_conditions
    AND Name > MyInsertedName
    AND Name BETWEEN CachedMin AND CachedMax
  ORDER BY Name
  LIMIT 1 
```

这不会给你一个数字。您仍然需要检查返回的名称在缓存中的位置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-14T19:10:10.013

我想出的解决方案并不简单，但目前运行良好。我意识到查询语句中记录的索引也是`Count`它之前所有记录的索引。我需要做的是将`ORDER`查询中的所有语句“转换”为一系列`WHERE`语句，这些语句将只返回前面的记录并计算这些记录。它比听起来更棘手（或者可能不是......听起来很棘手）。我遇到的最大问题是确保查询实际上是以我可以预测的方式排序的。这意味着我需要在 Order Parameters 中有一个 order 列，该列基于具有唯一值的列。因此，每当用户对一列进行排序时，我都会在语句中附加一个唯一列上的另一个订单参数（我使用了“修改日期戳”

创建`WHERE`语句的一部分需要的不仅仅是添加一堆`AND`s。更容易演示。假设您有 3 个订单列：“姓氏”ASC、“名字”DESC 和“修改后的邮票”ASC（决胜局）。该`WHERE`语句必须看起来像这样（'？' = 记录值）：

```
WHERE
    "LastName" < ? OR
    ("LastName" = ? AND "FirstName" > ?) OR
    ("LastName" = ? AND "FirstName" = ? AND "Modified Stamp" < ?) 
```

通过括号组合在一起的每组`WHERE`参数都是决胜局。如果事实上“LastName”的记录值相等，那么我们必须查看“FirstName”，最后查看“Modified Stamp”。显然，如果您按一堆订单参数排序，此语句可能会变得很长。

上面的解决方案还有一个问题。对值的数学运算`NULL`总是返回 false，但是当你对 SQLite 进行排序时，首先对`NULL`值进行排序。因此，为了适当地处理`NULL`值，您必须添加另一层复杂性。首先，所有数学等式运算 ，`=`， 必须替换为`IS`。其次，所有`<`操作都必须嵌套在操作符上以适当`OR IS NULL`地包含`NULL`值`<`。这将上述操作变为：

```
WHERE
    ("LastName" < ? OR "LastName" IS NULL) OR
    ("LastName" IS ? AND "FirstName" > ?) OR
    ("LastName" IS ? AND "FirstName" IS ? AND ("Modified Stamp" < ? OR "Modified Stamp" IS NULL)) 
```

然后我使用上述`WHERE`参数计算 RowID。

事实证明，这对我来说很容易，主要是因为我已经构建了一组对象来表示我的 SQL 语句的各个方面，这些方面可以组合起来生成语句。我什至无法想象试图以任何其他方式操纵这样的 SQL 语句。

到目前为止，我已经在几台 iOS 设备上使用它进行了测试，表中有多达 10,000 条记录，并且没有明显的性能问题。当然，它是为单条记录编辑/插入而设计的，所以我真的不需要它超级快速/高效。

# html - 需要一个 ol/li 来显示 1.1

> ID：12323042
> 
> 赞同：1
> 
> 时间：2012-09-07T17:52:06.673
> 
> 标签：html, css, html-lists

> **可能重复：**
> [在 ol 项目 html 上实现子编号](https://stackoverflow.com/questions/2058564/achieving-sub-numbering-on-ol-items-html)
> [有序列表能否使用 css 生成看起来像 1.1、1.2、1.3（而不仅仅是 1、2、3，...）的结果？](https://stackoverflow.com/questions/4098195/can-ordered-list-produce-result-that-looks-like-1-1-1-2-1-3-instead-of-just-1)

我需要一个列表来将数字显示为 1.1 而不是 1。

基本上，在 css/html 中有没有办法让列表显示像 xx 或 xxx 这样的数字？我知道有一个参数可以使它成为罗马数字（I、II、III、VI、V）或字母（a、b、c、d、e），但你可以让 ol/li 显示为子数字（1.1、1.2 , 1.3, 1.4, 1.5)?

# c# - C# ErrorProvider 想知道是否有任何活动

> ID：12323044
> 
> 赞同：5
> 
> 时间：2012-09-07T17:52:23.923
> 
> 标签：c#, winforms, validation, errorprovider

我想知道我的表单中是否有任何 ErrorProvider 处于活动状态。能够找到这一点可能有助于减少我的代码..

我确实在这里找到了这个东西[Counting ErrorProvider](https://stackoverflow.com/questions/2682136/c-sharp-winforms-errorprovider-control)

但万一有人知道更好的方法......所以就这样吧。

好的，所以基本上我有一个 WinForm，它有很多 TextBox 现在，当用户输入值时，我使用 Validating 来执行验证，如果它与 Regex 不匹配，我将 ErrorProvider 设置为该控件的 ON .. 同样，如果用户将值更改为可接受的值我为该控件关闭 ErrorProvider ..

但是当单击“保存”时，无论如何我都必须进行另一次检查，以防用户不听我的声音并像他应该做的那样更改内容并仍然单击“保存”..我不希望事情崩溃..

soo mm 有没有像我可以说如果 ErrorProviders 未激活然后继续保存 else 消息框说更改它的事情。

[另一个问题]

嗯，验证时仅在控件失去焦点时验证...我有点希望它在用户停止输入时进行验证..我希望你明白我的意思

就像用户输入他/她的名字时的电子邮件地址（文本框）一样当控制失去焦点时）键入后 2 奇数秒我可以进行验证吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-08T01:06:31.267

不幸的是，ErrorProvider 控件不提供这样的功能。您最好使用您发布的链接中的自定义错误提供程序类。

否则，您可以创建一个您将调用的方法，而不是`SetError`

```
int errorCount;
void SetError(Control c, string message)
{
    if (message == "")
        errorCount--;
    else
        errorCount++;
    errorProvider.SetError(c, message);
} 
```

或者，您可以为 ErrorProvider 类创建一个[扩展方法](http://msdn.microsoft.com/en-us/library/bb383977.aspx)，该方法将设置错误并增加一个计数器或类似的东西。

最后但并非最不重要的一点是，您可以遍历所有控件。慢，但它有效：

```
bool IsValid()
{
    foreach (Control c in errorProvider1.ContainerControl.Controls)
        if (errorProvider1.GetError(c) != "")
            return false;
    return true;
} 
```

* * *

# 编辑

我为错误提供者编写了一个快速扩展类：

```
public static class ErrorProviderExtensions
{
    private static int count;

    public static void SetErrorWithCount(this ErrorProvider ep, Control c, string message)
    {
        if (message == "")
        {
            if (ep.GetError(c) != "")
                count--;
        }
        else
            count++;

        ep.SetError(c, message);
    }

    public static bool HasErrors(this ErrorProvider ep)
    {
        return count != 0;
    }

    public static int GetErrorCount(this ErrorProvider ep)
    {
        return count;
    }
} 
```

我尚未对其进行广泛测试，因此您可能需要在`SetError`调用`ErrorProvider`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-08-12T07:59:32.167

我知道这是一个较老的问题，并且扩展正在工作，除非有人尝试为同一个对象设置两次 SetErrorWithCount，计数被计算两次。所以，我在这里提供了基于 Netfangled 扩展的更新扩展

```
public static class ErrorProviderExtensions
{
   private static int count;

   public static void SetErrorWithCount(this ErrorProvider ep, Control c, string message)
   {
       if (message == "")
       {   
          if (ep.GetError(c) != "")
             count--;
       }
       else
          if (ep.GetError(c) == "")
             count++;

       ep.SetError(c, message);
   }

   public static bool HasErrors(this ErrorProvider ep)
   {
       return count != 0;
   }

   public static int GetErrorCount(this ErrorProvider ep)
   {
       return count;
   }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-10-26T18:16:46.523

好的，让我使用更简单的方法：目前您正在使用隐式验证方法...立即验证控件。

我认为您想在执行某些操作之前检查表单中的所有控件是否都经过验证，因此只需检查所有子控件是否都经过验证。通过使用显式验证方法

在您可以使用的每个控件的验证事件中：-

```
 Private Sub ProductIDTextBox_Validating(sender As System.Object, e As System.ComponentModel.CancelEventArgs) Handles ProductIDTextBox.Validating
    If ProductIDTextBox.Text = "" Then
        ErrorProvider1.SetError(ProductIDTextBox, "you have to enter text")
        e.Cancel = True

        Return

    End If
    ErrorProvider1.SetError(ProductIDTextBox, "")

End Sub 
```

然后您可以通过以下方式检查所有控件：-

```
 Private Sub Button1_Click(sender As System.Object, e As System.EventArgs) Handles Button1.Click
    If ValidateChildren() Then
        MessageBox.Show("Validation succeeded!")
    Else
        MessageBox.Show("Validation failed.")
    End If
End Sub 
```

希望这会有所帮助，因为我花了几个小时来找到合适的方法

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-03-29T03:25:16.987

拥有它似乎是一件合乎逻辑的事情，但不幸的是它并没有原生提供。

您可以像其他提到的那样扩展`ErrorProvider`，或者简单地迭代它下面的所有控件并查找错误，例如

```
bool IsValidationError(ErrorProvider errorProvider, Control.ControlCollection controlCollection)
{
    foreach(Control child in controlCollection)
    {
        // The child or one of its children has an error.
        if (!errorProvider.GetError(child).IsNullOrEmpty() || IsValidationError(errorProvider, child.Controls))
            return true;
    }

    return false;
} 
```

你会调用`IsValidationError(errorProvider, errorProvider.ContainerControl.Controls)`，或者传递一个更有限的控件集合。

显然，您希望避免迭代大量控件，但这种简单的解决方案在很多情况下应该没问题。此外，即使您确实有大量控件，您也可能使用`Panel`, `TabControl`, `GroupBox`, ... 将它们组合在一起，这样您就可以轻松地避免绝对迭代所有控件。

注意：这类似于[https://stackoverflow.com/a/12327212/276648](https://stackoverflow.com/a/12327212/276648)中描述的一种可能性，除了它同时查找 null 和空，并且它递归地迭代可能的孙子。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-07-07T14:46:14.783

我有**多个** `Control`元素（`TextBox`es）附加到它们**对应** `ErrorProvider`**的 s**上。

我试图找到一种方法来***countAllErrors()***，甚至更好地处理***EachError()***，
所以这就是我想出的：

* * *

## 在课堂里：

```
internal TextBox email_textbox;
internal TextBox city_textbox;
internal TextBox address_textbox;
internal TextBox phone_textbox;
internal TextBox lastName_textbox;
internal TextBox firstName_textbox;
private ErrorProvider firstName_errPro;
private ErrorProvider lastName_errPro;
private ErrorProvider phone_errPro;
private ErrorProvider address_errPro;
private ErrorProvider city_errPro;
private ErrorProvider email_errPro;
internal Dictionary<ErrorProvider, Control> errors; 
```

## 在表单的构造函数中：

```
errors = new Dictionary<ErrorProvider, Control>(6);
errors.Add( firstName_errPro ,firstName_textbox );
errors.Add( lastName_errPro  ,lastName_textbox  );
errors.Add( phone_errPro     ,phone_textbox     );
errors.Add( address_errPro   ,address_textbox   );
errors.Add( city_errPro      ,city_textbox      );
errors.Add( email_errPro     ,email_textbox     ); 
```

## 计算所有错误：

```
int countAllErrors()
{
    int numOfErrors = errors.Count<KeyValuePair<ErrorProvider, Control>>(ep => ep.Key.GetError(ep.Value) != "");
    return numOfErrors;
} 
```

## 处理每个错误：

```
void handleEachError()
{

    foreach (KeyValuePair<ErrorProvider, Control> errPair in errors.Where(ep => ep.Key.GetError(ep.Value) != ""))
    {
        ErrorProvider   errorProvider   = errPair.Key;
        Control         control         = errPair.Value;
        string          errorStr        = errorProvider.GetError(control);

        // handle the error:
        // for example - show it's text in a MessageBox:
        MessageBox.Show(errorStr);
    }

} 
```

* * *

让我知道它是否有帮助.. ;)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-10-27T15:09:26.440

[这里的一些](https://stackoverflow.com/a/12327212/64334) [答案](https://stackoverflow.com/a/18182025/64334)非常容易出错，因为它们在扩展方法中共享一个静态计数变量。不！

我的扩展方法使用我的 Nuget 包`Overby.Extensions.Attachments`来存储相关的控件，`ErrorProvider`以便可以计算错误数。

```
using System.Collections.Generic;
using System.Windows.Forms;
using System.Linq;
using Overby.Extensions.Attachments; // PM> Install-Package Overby.Extensions.Attachments

namespace MyApp
{
    public static class ErrorProviderExtensions
    {
        public static void TrackControl(this ErrorProvider ep, Control c)
        {
            var controls = ep.GetOrSetAttached(() => new HashSet<Control>()).Value;
            controls.Add(c);
        }

        public static void SetErrorWithTracking(this ErrorProvider ep, Control c, string error)
        {
            ep.TrackControl(c);          
            ep.SetError(c, error);
        }

        public static int GetErrorCount(this ErrorProvider ep)
        {
            var controls = ep.GetOrSetAttached(() => new HashSet<Control>()).Value;

            var errControls = from c in controls
                              let err = ep.GetError(c)
                              let hasErr = !string.IsNullOrEmpty(err)
                              where hasErr
                              select c;

            var errCount = errControls.Count();
            return errCount;
        }

        public static void ClearError(this ErrorProvider ep, Control c)
        {            
            ep.SetError(c, null);
        }
    }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-04-06T11:21:54.553

您也可以简单地创建一个继承的类。

```
public class TrackedErrorProvider : ErrorProvider
{
    public TrackedErrorProvider() : base() { }

    public TrackedErrorProvider(ContainerControl parentControl) : base(parentControl) { }

    public TrackedErrorProvider(IContainer container) : base(container) { }

    public int ErrorsCount { get; protected set; } = 0;

    public bool HasErrors
    {
        get { return ErrorsCount > 0; }
    }

    public new void SetError(Control control, string message)
    {
        //Check if there is already an error linked to the control
        bool errorExistsForControl = !string.IsNullOrEmpty(GetError(control));

        //If removing error from the control
        if (string.IsNullOrEmpty(message))
        {
            /* Decreases the counter only if:
            *   - an error already existed for the control
            *   - the counter is not 0
            */
            if (errorExistsForControl && ErrorsCount > 0) ErrorsCount--;
        }
        else //If setting error message to the control
        {
            //Increments the error counter only if an error wasn't set for the control (otherwise it is just replacing the error message)
            if (!errorExistsForControl) ErrorsCount++;
        }

        base.SetError(control, message);
    }

    public void RemoveError(Control control)
    {
        SetError(control, null);
    }
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-07-31T09:46:46.090

我的方法是使用扩展方法，所以我可以简单地调用`errorProvider.Valid()`. 如果正确实施，ErrorProvider 实际上有对其主控件（表单）的引用，因此它应该适用于具有单个实例的所有表单。`ValidateChildren()`似乎没有返回有用的值。这就是我使用的：

```
public static bool Valid(this ErrorProvider ep)
{
  ep.ContainerControl.ValidateChildren();
  return ep.ChildrenAreValid(ep.ContainerControl);
}

private static bool ChildrenAreValid(this ErrorProvider ep, Control control)
{
  if (!string.IsNullOrWhiteSpace(ep.GetError(control))) return false;
  foreach (Control c in control.Controls)
    if (!(ep.ChildrenAreValid(c))) return false;
  return true;
} 
```

通常我有一种方法来启用/禁用保存按钮或类似的东西：

```
private bool VerifyIntegrity() => (btnSave.Enabled = errorProvider.Valid()); 
```

在输入事件中运行。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-02-19T16:34:59.283

就我而言，我没有使用静态类，而是使用错误计数器的实例。

```
public class ErrorCounter
{
    private List<string> _propertiesError = new List<string>();
    private static ObjectIDGenerator _IDGenerator = new ObjectIDGenerator();

    public bool HasErrors
    {
        get => ErrorCount != 0;
    }

    public int ErrorCount
    {
        get => _propertiesError.Count;
    }

    /// <summary>
    /// Record object validation rule state.
    /// </summary>
    /// <param name="sender">"this" object reference must be passed into parameter each time SetError is called</param>
    /// <param name="message"></param>
    /// <param name="property"></param>
    /// <returns></returns>
    public string SetError(object sender, string property, string message)
    {
        string propertyUniqueID = GetPropertyUniqueID(sender, property);

        if (string.IsNullOrWhiteSpace(message))
        {
            if (_propertiesError.Exists(x => x == propertyUniqueID))
            {
                _propertiesError.Remove(propertyUniqueID);
            }
        }
        else
        {
            if (!_propertiesError.Exists(x => x == propertyUniqueID))
            {
                _propertiesError.Add(propertyUniqueID);
            }
        }

        return message;
    }

    private string GetPropertyUniqueID(object sender, string property)
    {
        bool dummyFirstTime;

        return property + "_" + _IDGenerator.GetId(sender, out dummyFirstTime);
    }
} 
```

用法：在主视图模型中声明

```
public class MainViewModel : ViewModelBase, IDataErrorInfo
...
private ErrorCounter _errorCounter = new ErrorCounter();
...
// Entry validation rules
public string Error => string.Empty;
public string this[string columnName]
{
    get
    {
        switch (columnName)
        {
            case nameof(myProperty_1):
                if (string.IsNullOrWhiteSpace(myProperty_1))
                    return _errorCounter.SetError(this, columnName, "Error 1");
                break;
            case nameof(myProperty_2):
                if (string.IsNullOrWhiteSpace(myProperty_2))
                    return _errorCounter.SetError(this, columnName, "Error 2");
                break;
            default:
                break;
        }

        return _errorCounter.SetError(this, columnName, string.Empty);
    }
} 
```

ObjectIDGenerator 结合属性名称允许每个属性只计算一次。如果您需要在另一个类的对象集合成员中使用相同的 _errorCounter 实例，请将其传递给另一个类的构造函数。

就这样 ：-）

# javascript - 通过给定的类和数据 ID 查找 div

> ID：12323047
> 
> 赞同：1
> 
> 时间：2012-09-07T17:52:57.870
> 
> 标签：javascript, jquery, class, html, addclass

我想通过给定的类和 data-id 找到 div 但下面的行不起作用（在这个例子中`lesson`，类`data-id`是变量）

```
$('div.lesson[data-id=' + htag + ']').addClass('underline'); 
```

我错过了什么？

# 更新

完整的功能看起来像这样

```
 LoadLessons(cid);
        LoadQuestions(lid);
        $('div.course[data-id=' + cid + ']').addClass('underline');
        $('div.lesson[data-id=' + lid + ']').addClass('underline'); 
```

Load.. 函数是**ajax**调用。并且类必须影响 ajax 调用返回的内容。第一个 addclass 有效，但第二个无效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T17:54:53.257

尝试这个，

**[现场演示](http://jsfiddle.net/rajaadil/MeNt2/1/)**

```
$('div[class=lesson][data-id="' + htag + '"]').addClass('underline'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T18:37:43.400

如果您正在执行 ajax 调用，则应将代码放在`complete`这些 ajax 调用的回调中。因为你不知道这些 ajax 调用需要多长时间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T17:55:43.343

您需要在属性选择器中添加双引号，如下所示：

```
$('div.lesson[data-id="' + htag + '"]').addClass('underline'); 
```

# iphone - iPhone XCode - 将资源从模拟器复制到设备

> ID：12323048
> 
> 赞同：0
> 
> 时间：2012-09-07T17:53:00.410
> 
> 标签：iphone, xcode

我的目标是从模拟器上的 Documents 目录中复制所有 .plist 文件（我从模拟器中创建并存储一些 .plist ），并在设备上运行时将此 .plist 复制到我的资源文件中！这是因为我在模拟器上创建了一个游戏关卡（使用鼠标更简单），并且在设备上运行时希望自动将此 .plist 文件加载到 iPhone 中。

类似的东西 `cp /Users/username/Library/Application Support/iPhone Simulator/5.1/Applications/B5A52177-D17C-4479-AB72-01298392983/Documents/*.plist myResourcesFile on device`

如果我能够将文档目录从模拟器复制到设备，那也是一样的！

任何想法？？我已经尝试进入“添加构建阶段”并搜索了谷歌，但不明白如何做到这一点。

有人能帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T17:59:37.733

如果从模拟器复制 plist 后不需要修改它，您可以简单地将其从 Finder 直接拖放到 Xcode 项目的资源文件夹中，然后从那里访问它。

# c++ - 临时参数值何时超出范围？

> ID：12323049
> 
> 赞同：19
> 
> 时间：2012-09-07T17:53:11.840
> 
> 标签：c++

> **可能重复：**
> [临时工的生命周期](https://stackoverflow.com/questions/4214153/lifetime-of-temporaries)

```
int LegacyFunction(const char *s) {
    // do something with s, like print it to standard output
    // this function does NOT retain any pointer to s after it returns.
    return strlen(s);
}

std::string ModernFunction() {
    // do something that returns a string
    return "Hello";
}

LegacyFunction(ModernFunction().c_str()); 
```

上面的例子可以很容易地重写为使用智能指针而不是字符串；这两种情况我都遇到过很多次了。无论如何，上面的示例将在 ModernFunction 中构造一个 STL 字符串，将其返回，然后在字符串对象中获取指向 C 样式字符串的指针，然后将该指针传递给遗留函数。

1.  ModernFunction 返回后存在一个临时字符串对象。什么时候超出范围？
2.  编译器是否可以调用 c_str()，破坏这个临时字符串对象，然后将悬空指针传递给 LegacyFunction？（请记住，字符串对象正在管理 c_str() 返回值指向的内存...）
3.  如果上面的代码不安全，为什么不安全？有没有比在函数调用时添加临时变量更好、同样简洁的方法来编写它？如果安全，为什么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-07T17:57:05.633

```
LegacyFunction(ModernFunction().c_str()); 
```

副本的销毁将在评估之后`full expression`（即从 中返回`LegacyFunction`）。

n3337 12.2/3

> 临时对象被销毁作为评估完整表达式（1.9）的最后一步，该完整表达式（在词法上）包含它们被创建的点。

n3337 1.9/10

> 完整表达式是不是另一个表达式的子表达式的表达式。如果语言构造被定义为产生函数的隐式调用，则语言构造的使用被认为是用于此定义目的的表达式。在临时对象以外的对象的生命周期结束时生成的对析构函数的调用是隐式完整表达式。为了满足表达式出现的语言结构的要求而应用于表达式结果的转换也被认为是完整表达式的一部分。[ 例子：
> 
> ```
> struct S {
> S(int i): I(i) { }
> int& v() { return I; }
> private:
> int I;
> };
> S s1(1); // full-expression is call of S::S(int)
> S s2 = 2; // full-expression is call of S::S(int)
> void f() {
> if (S(3).v()) // full-expression includes lvalue-to-rvalue and
> // int to bool conversions, performed before
> // temporary is deleted at end of full-expression
> { }
> } 
> ```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-07T18:01:32.443

> ModernFunction 返回后存在一个临时字符串对象。什么时候超出范围？

严格来说，它永远不在*范围*内。范围是名称的属性，而不是对象。*碰巧自动变量在作用域*和*生命周期*之间有着非常密切的关联。不是自动变量的对象是不同的。

临时对象在它们出现的完整表达式结束时被销毁，有几个例外在这里不相关。无论如何，特殊情况会*延长*临时的生命周期，他们不会减少它。

> 编译器是否可以调用 c_str()，破坏这个临时字符串对象，然后将悬空指针传递给 LegacyFunction

不，因为完整表达式是`LegacyFunction(ModernFunction().c_str())`（不包括分号：feel that pedantry），所以作为返回值的临时值在返回`ModernFunction`之前不会被破坏`LegacyFunction`。

> 如果安全，为什么？

因为临时的生命周期足够长。

一般来说`c_str`，你必须担心两件事。首先，如果字符串被破坏（这就是您要问的），它返回的指针将变得无效。其次，如果字符串被修改，它返回的指针将变得无效。您在这里并不担心，但没关系，您不需要，因为也没有任何东西修改字符串。

# seo - 无法将站点地图提交到 Google 网站管理员工具

> ID：12323050
> 
> 赞同：0
> 
> 时间：2012-09-07T17:53:18.323
> 
> 标签：seo, google-search-console

我在向 Google 网站管理员工具提交站点地图时遇到问题。这是我做过很多次的事情，以前从未遇到过任何问题。我收到此错误： **说明：** 我们在尝试访问您的站点地图时遇到错误。请确保您的站点地图遵循我们的指南，并且可以在您提供的位置访问，然后重新提交。 **示例：** 由 robots.txt 限制的 URL 确实机器人文本是正确的，站点地图也是如此。这是 robots.txt 用户代理上的代码： * 禁止：

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-09T12:05:40.900

如错误消息所述，这些可能是您的问题：

*   您的站点地图不是按照 Google 的要求创建的。尝试其他工具。
*   确保您已将站点地图上传到公共目录
*   通过在浏览器中键入 yoursite.com/sitemap.xml 检查您的站点地图
*   检查您的站点地图文件的权限（如果我没记错的话，7-5-5 正在工作）

您可以允许通过 robots.txt 对所有内容进行索引尝试此代码（您的另一个版本）：

```
User-agent: *
Allow: / 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-01T05:27:50.700

尝试使用命令行将您的站点地图 xml 提交给 Google。使用 curl 命令： curl -i -H "Accept: application/json" -H "Content-Type: application/json" -X GET [http://google.com/ping?sitemap=https://yourdomain.x0/ sitemap.xml](http://google.com/ping?sitemap=https://yourdomain.x0/sitemap.xml) [用您的 http 完整 url/to/sitemap.xml 文件替换 uri] Google 官方文档： https: [//support.google.com/webmasters/answer/183669](https://support.google.com/webmasters/answer/183669)

# java - JSF 渲染：EL 语句的条件不正确

> ID：12323058
> 
> 赞同：2
> 
> 时间：2012-09-07T17:53:46.103
> 
> 标签：java, jsf, rendering, el, conditional-statements

我的 JSF 渲染有问题。表达式语言中的给定条件不会以正确的方式执行。例如：

**示例 1**

```
<f:param name="cat" value="#{product.category.uri}" rendered="#{product.category.parent.uri == null}" />
<f:param name="cat" value="#{product.category.parent.uri}" rendered="#{product.category.parent.uri != null}" /> 
```

**示例 2**

```
<c:if test="#{product.category.parent.uri == null}">
    <f:param name="cat" value="#{product.category.uri}" />
</c:if>

<c:if test="#{product.category.parent.uri != null}">
    <f:param name="cat" value="#{product.category.parent.uri}" />
</c:if> 
```

**问题**

在这两个示例中，我的两个参数都将添加到我周围的 h:outputLink。我不确定要添加什么其他代码，所以如果你们需要其他任何东西来帮助我，我很乐意提供。

提前致谢。

**示例 3（根据要求）**

```
<?xml version='1.0' encoding='UTF-8' ?>

<ui:composition template="./WEB-INF/templates/base.xhtml"
                xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:c="http://java.sun.com/jsp/jstl/core">
    <ui:define name="content">
        <c:choose>
            <c:when test="#{webshop.productlist.size() > 0}">
                <div id="spacer">
                    <ui:repeat value="#{webshop.productlist}" var="product">
                        <div id="block">
                            <p>
                                <h:outputLink value="product.xhtml">
                                    #{product.name}
                                    <c:choose>
                                        <c:when test="#{product.category.parent.uri == null}">
                                            <f:param name="cat" value="#{product.category.uri}" rendered="" />
                                        </c:when>
                                        <c:otherwise>
                                            <f:param name="cat" value="#{product.category.parent.uri}" />
                                        </c:otherwise>
                                    </c:choose>
                                    <f:param name="product" value="#{product.uri}" />
                                </h:outputLink>
                            </p>
                        </div>
                    </ui:repeat>
                </div>
            </c:when>

            <c:otherwise>
                (...)
            </c:otherwise>
        </c:choose>
    </ui:define>
</ui:composition> 
```

我已经清理了这个例子，但本质就在那里。我已经用 when/otherwise 构造替换了第一个示例，无论我的 product.category.parent.uri 是否为空，在这种情况下它都会给我第一个结果。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-07T19:35:03.037

您的核心问题是您完全混淆了视图构建时间标签和视图渲染时间标签。

视图构建时间是将 XHTML 文件转换为可用的 JSF 组件树的时刻`FacesContext#getViewRoot()`。视图呈现时间是 JSF 组件树即将生成 HTML 代码的时刻，由`UIViewRoot#encodeAll()`.

*所有没有*属性的JSTL`<c:xxx>`标记和所有 JSF`<ui:xxx>`标记都在视图构建时运行。所有具有属性的 JSF 标记和所有 JSF标记*都*在视图呈现期间运行。因此，它们不会像您对编码所期望的那样同步运行。*`rendered``<ui:xxx>`*`rendered``<h:xxx>`**

 **回到您的具体问题，这有两个方面：

1.  `<f:param>`作为一个标签处理程序根本不支持该属性`rendered`。

2.  在`#{product}`您的代码中由 定义`<ui:repeat var>`，这是一个视图呈现时间标记，但是您试图让 JSTL`<c:xxx>`视图构建时间标记依赖于它。这当然行不通。`#{product}`是在`null`视图构建期间，仅仅是因为当时`<ui:repeat>`还没有运行。

您的具体问题只能通过使用视图构建时间标签`<c:forEach>`而不是视图渲染时间标签`<ui:repeat>`来迭代产品来解决。

```
<c:forEach items="#{webshop.productlist}" var="product"> 
```

### 也可以看看

*   [JSF2 Facelets 中的 JSTL...有意义吗？](https://stackoverflow.com/questions/3342984/jstl-in-jsf2-facelets-makes-sense)

* * *

**与具体问题无关**，以下笨拙的块

```
<c:choose>
    <c:when test="#{product.category.parent.uri == null}">
        <f:param name="cat" value="#{product.category.uri}" rendered="" />
    </c:when>
    <c:otherwise>
        <f:param name="cat" value="#{product.category.parent.uri}" />
    </c:otherwise>
</c:choose> 
```

在 EL 中的条件运算符的帮助下，可以用以下更简单的方法替换：

```
<f:param name="cat" value="#{empty product.category.parent.uri ? product.category.uri : product.category.parent.uri}" /> 
```

这样，您必须能够继续使用`<ui:repeat>`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T19:32:26.177

根据文档，该标签没有`rendered`可用的属性，`f:param`因此它被忽略了。

请参阅 JSF <2.x - [http://docs.oracle.com/javaee/5/javaserverfaces/1.2/docs/tlddocs/f/param.html](http://docs.oracle.com/javaee/5/javaserverfaces/1.2/docs/tlddocs/f/param.html)

请参阅 JSF >2.0 - [http://javaserverfaces.java.net/nonav/docs/2.0/pdldocs/facelets/f/param.html](http://javaserverfaces.java.net/nonav/docs/2.0/pdldocs/facelets/f/param.html)

现在这可能表明示例 2 应该仍然有效，所以我可能会质疑是否`product.category.parent.uri`真的为空而不是空（即空白字符串）。您是否尝试过测试空（检查空字符串和空字符串）？

```
<c:if test="#{empty product.category.parent.uri}">  
<f:param name="cat" value="#{product.category.uri}" />  
</c:if>  

<c:if test="#{!empty product.category.parent.uri}">  
<f:param name="cat" value="#{product.category.parent.uri}" />
</c:if> 
```

另一种选择虽然不理想，但有条件地渲染两个单独的输出链接，并根据您的值确定要渲染的链接。如：

```
<c:choose> 
  <c:when test="#{empty product.category.parent.uri}">
     <h:outputLink value="product.xhtml">
       <f:param name="cat" value="#{product.category.uri}"/>
       <f:param name="product" value="#{product.uri}" />
     </h:outputLink>
  </c:when>
  <c:otherwise>
     <h:outputLink value="product.xhtml">
        <f:param name="cat" value="#{product.category.parent.uri}" />
        <f:param name="product" value="#{product.uri}" />
     </h:outputLink>
  </c:otherwise>
</c:choose> 
```**

# javascript - 如何找出哪些网站使用了我的 jQuery 插件？

> ID：12323059
> 
> 赞同：2
> 
> 时间：2012-09-07T17:53:53.693
> 
> 标签：javascript, jquery, web-crawler

我正在编译使用我的 jQuery 插件 ( [http://loopj.com/jquery-tokeninput/](http://loopj.com/jquery-tokeninput/) ) 的大型网站列表。

任何人都可以建议最好/最简单的方式来抓取网络以使用特定的 js 库吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T07:50:02.933

如果你能找到一个不错的网站列表，你可以试试这个：

```
$ curl http://namebench.googlecode.com/svn-history/r495/trunk/data/alexa-top-10000-global.txt >  sitelist.txt
$ cat sitelist.txt | xargs -P 32 -I {} wget -x -k -t1 -T1 {}
$ grep -r tokeninput .
./magicbricks.com/index.html:       <script src="http://www.magicbricks.com/scripts/mainJsGroup.js,Mjm.7iF81SLtpJ.js+dwrGroup.js,Mjm.sV7AgY13MG.js+jquery.js,Mjm.bKnjrjdqsX.js+jquery.tokeninput.js,Mjm.44Xrew-eFT.js.pagespeed.jc.XlwW_QiXCc.js"></script><script type='text/javascript'>eval(mod_pagespeed_vEIzknsBWt);</script>
./spoke.com/index.html:<script src="http://www.spoke.com/javascripts/3p/jquery.tokeninput.min.js?1327114061" type="text/javascript"></script> 
```

如果你觉得雄心勃勃，你可以跟进：

```
$ cat `find -name '*.html'` | \grep -o "['\"]http[^'\"]*\?jquery[^'\"]*\?['\"]" | sed -e 's%/[^/]*$%/jquery.tokeninput.js%' | sed -e "s/['\"]//g"|uniq > potential.txt
$ cat potential.txt | xargs -P 32 -I {} wget -x -t 1 -T 5 {}
$ grep -r loopj .
./www.g4tv.com/assets/js/jquery/plugins/jquery.tokeninput.js: * Copyright (c) 2009 James Smith (http://loopj.com)
./static.networkedblogs.com/static/js/jquery.tokeninput.js: * Copyright (c) 2009 James Smith (http://loopj.com)
./www.podomatic.com/javascripts/jquery.tokeninput.js: * Copyright (c) 2009 James Smith (http://loopj.com)
./cdn4.f-cdn.com/js/jquery.tokeninput.js: * Copyright (c) 2009 James Smith (http://loopj.com)
./cdn1.static.youporn.phncdn.com/cb/youpornwebfront/js/jquery.tokeninput.js: * http://loopj.com/jquery-tokeninput/
./scd.hwstatic.com/static/js/1.17.15.1/jquery.tokeninput.js: * Copyright (c) 2009 James Smith (http://loopj.com)
./cdn6.f-cdn.com/js/jquery.tokeninput.js: * Copyright (c) 2009 James Smith (http://loopj.com)
./cdn5.f-cdn.com/js/jquery.tokeninput.js: * Copyright (c) 2009 James Smith (http://loopj.com)
./static.expressz.hu/_expressz_/js/jquery.tokeninput.js: * Copyright (c) 2009 James Smith (http://loopj.com) 
```

# r - 带有区域和轮廓的 geom_area 图 ggplot

> ID：12323060
> 
> 赞同：9
> 
> 时间：2012-09-07T17:54:01.793
> 
> 标签：r, ggplot2

我正在尝试制作一个堆叠的 geom_area 图，但想用一条线勾勒出每个区域图（适用于第一个“红色”区域，但不适用于蓝色区域）。这是我最好的尝试，但我不知道如何使线型也堆叠起来。想法？

![例子](../Images/67b6867bdc9cdaba23e74028d3bca65a.png)

```
df= data.frame(Time=as.numeric(strsplit('1939 1949 1959 1969 1979 1989 1999 2009 2019 2029 2039 2049 1939 1949 1959 1969 1979 1989 1999 2009 2019 2029 2039 2049', split=' ')[[1]] ),
               Acres=as.numeric(strsplit('139504.2 233529.0 392105.3 502983.9 685159.9 835594.7 882945.1 1212671.4 1475211.9 1717971.7 1862505.7 1934308.0 308261.4 502460.8 834303.1 1115150.7 1430797.8 1712085.8 1973366.1 1694907.7 1480506.0 1280047.6 1164200.5 1118045.3', split=' ')[[1]] ),
               WUClass= strsplit('DenseUrban DenseUrban DenseUrban DenseUrban DenseUrban DenseUrban DenseUrban DenseUrban DenseUrban DenseUrban DenseUrban DenseUrban Urban Urban Urban Urban Urban Urban Urban Urban Urban Urban Urban Urban', split=' ')[[1]]   
               )

a=ggplot(df,aes(x = Time,y = Acres,fill=WUClass))+ geom_area( position = 'stack'  )
plot(a)
a+ geom_line(aes(position = 'stack')) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-07T18:13:10.263

要向该区域添加轮廓，只需更改`colour`：

```
ggplot(df,aes(x = Time,y = Acres,fill=WUClass)) +
  geom_area( position = 'stack') +
  geom_area( position = 'stack', colour="black", show_guide=FALSE) 
```

但是要画线，请执行以下操作：

```
ggplot(df,aes(x = Time, y = Acres, fill=WUClass, group=WUClass)) +
  geom_area() + geom_line(aes(ymax=Acres), position="stack") 
```

![在此处输入图像描述](../Images/0f46da4493101cab858448192ab46ea9.png)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-07T18:16:24.427

我把线宽做得很大只是为了说明区别。

```
ggplot(df,aes(x = Time, y = Acres, fill = WUClass)) + 
geom_area( position = 'stack', linetype = 1, size =2 ,colour="black" , 
show_guide=FALSE) +
geom_line(aes(position = 'stack')) 
```

![在此处输入图像描述](../Images/a3390e4c9a0cba288eca484704cbc98e.png)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-07T18:55:39.620

错误只是您将 position="stack" 放入 aes() 中。改成

```
a=ggplot(df,aes(x = Time,y = Acres, fill=WUClass))+
                   geom_area( position = 'stack'  )
a +geom_line( position = 'stack'  ) 
```

...一切都很好。

# django - Django：将注释绑定到任何对象

> ID：12323065
> 
> 赞同：0
> 
> 时间：2012-09-07T17:54:32.203
> 
> 标签：django

我正在为我的 webapp 开发一个自定义评论解决方案。谁能告诉我将评论绑定到任何模型对象的逻辑是什么？我想做一些类似`{% customcomment``%}`.Django 评论框架的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T17:59:27.623

[https://docs.djangoproject.com/en/dev/ref/contrib/comments/](https://docs.djangoproject.com/en/dev/ref/contrib/comments/)

评论框架使用内容类型和通用关系将评论附加到任何模型的任何记录。

[https://docs.djangoproject.com/en/dev/ref/contrib/contenttypes/#module-django.contrib.contenttypes](https://docs.djangoproject.com/en/dev/ref/contrib/contenttypes/#module-django.contrib.contenttypes)

[https://docs.djangoproject.com/en/dev/ref/contrib/contenttypes/#id1](https://docs.djangoproject.com/en/dev/ref/contrib/contenttypes/#id1)

### 还

如果您需要做一些自定义的事情，您可以扩展 django 评论。你不应该自己动手。你具体想达到什么目的？

# javascript - Twitter bootstrap 在下拉菜单打开时停止传播

> ID：12323066
> 
> 赞同：27
> 
> 时间：2012-09-07T17:54:33.643
> 
> 标签：javascript, jquery, twitter-bootstrap, jquery-events

我在带有插件 jOrgChart 的 div 中有一个 twitter 引导下拉菜单。

我遇到的问题是，当我单击按钮打开下拉菜单时，它还会触发父 div 中的单击事件，该事件会折叠其他元素。

这是我的html：

```
<div id="chart">
<div class="node">
    <div class="btn-group">
        <a class="btn dropdown-toggle" data-toggle="dropdown" href="#">
        Actions
        <span class="caret"></span>
        </a>
        <ul class="dropdown-menu" style="text-align:left;">
            <li><a href="#">Edit</a></li>
            <li><a href="#">Delete</a></li>
        </ul>
    </div>
</div>

<div class="node">
...
</div> 
```

我想防止 a.dropdown-toggle 的点击冒泡到 div.node，我尝试了这个：

```
$("div#chart div.btn-group > a.dropdown-toggle").click(function (e) {
            e.stopPropagation();
        }); 
```

但现在下拉菜单不起作用。

**编辑**

这是具体案例： http: [//jsfiddle.net/UTYma/2/](http://jsfiddle.net/UTYma/2/) （感谢 Joe Tuskan 启动小提琴）

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-09-07T18:43:18.550

```
$("#orgchart").jOrgChart({ chartElement: '#chart' });

$("div#chart div.btn-group > a.dropdown-toggle, .dropdown-menu li a").click(function(e) {
    e.stopPropagation();
    $('.dropdown-menu').toggle();
});​ 
```

停止传播然后切换。[**例子**](http://jsfiddle.net/UTYma/4/)

* * *

我必须将下拉菜单项添加到单击处理程序以保持行为不变。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-07T18:39:04.793

尝试这样的事情：

```
$("div#chart div.btn-group > a.dropdown-toggle").click(function (e) {

            e.isDropDownToggleEvent =true;
}) 
```

然后：

```
$("div.node").click(function (e) {
     if (e.isDropDownToggleEvent != null && e.isDropDownToggleEvent)
         return false;

     return true;      
}) 
```

您也可以尝试放置 e.preventDefault() 或 e.stopPropagation(); 而不是返回false。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-07-14T10:30:08.627

我用了

```
$('.multiselect').on('click', function (e) {
    $(this).next('.dropdown-menu').toggle();
    e.stopPropagation();
}); 
```

这类似于@Joe 的答案，但更通用一点

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-09-04T16:27:51.700

基于乔的回答，这包括在下次点击时关闭的正常下拉功能。

```
$("#orgchart").jOrgChart({ chartElement: '#chart' });

$("div#chart div.btn-group > a.dropdown-toggle, .dropdown-menu li a").click((e) => {
    e.stopPropagation();
    $('.dropdown-menu').toggle();

    // close on next click only
    $(window).one("click", () => $('.dropdown-menu').toggle());
});​ 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-05-24T06:56:14.470

```
$("div#chart div.btn-group > a.dropdown-toggle, .dropdown-menu li a").click(function(e) {
    e.stopPropagation();
    $(this).closest('.dropdown').toggleClass('open');
});​ 
```

您应该改用它，因为上述解决方案不会关闭焦点下拉菜单。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-07T19:02:48.540

如果我理解正确，您想避免关闭菜单。

```
$("div#chart .dropdown-menu li").bind('click',function (e) {
            e.stopPropagation();
        },false); 
```

# php - 在 php 项目中，eclipse 中的“Build Project”有什么用？

> ID：12323067
> 
> 赞同：3
> 
> 时间：2012-09-07T17:54:34.650
> 
> 标签：php, eclipse

多年来，我一直在使用 eclipse 创建 php 项目，到目前为止，我还没有接触过任何 java 代码或 c++ 代码。

我的假设是，当 eclipse 执行“构建项目”时，它对 php 等解释语言做了一些无用的操作，并且“项目刷新”将扫描文件以检测类、方法、命名空间。

但所有这些都只是假设......有人可以解释一下吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T18:45:54.943

在 Eclipse 项目中，构建器用于生成编译工件和执行验证。我指的是问题视图条目，不要与打开特定文件时看到编辑器的验证相混淆。对于像 PHP 这样的脚本语言，没有要生成的工件，但需要验证源文件。

构建器集由项目类型控制。然后，Eclipse 会跟踪已更改的内容并调用这些构建器。这通常是透明地发生的（自动构建）。还有一些菜单项，如“构建项目”，明确触发不同级别的重建活动。

对于 PHP 项目，调用“Build Project”将强制重新验证 PHP 源文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T17:57:40.567

在我的脑海中，您可以使用“构建项目”来运行您的自定义构建器（通过 Preferences->Builders 连接）。这反过来又让您可以执行任何类型的脚本/工具链，以便在您的代码或项目上运行，例如构建代码文档或运行回归测试。

# c# - 在 LINQ 2 实体中加入字符串

> ID：12323073
> 
> 赞同：0
> 
> 时间：2012-09-07T17:54:57.370
> 
> 标签：c#, linq-to-entities, expression-trees

我想在 LINQ 2 实体中加入字符串（在 SQL 服务器端）。

考虑到 LINQ 2 Entity 无法转换 Aggregate 函数这一事实，是否有可能？

（顺便说一句，我只是不明白为什么 L2S 支持聚合函数但 LINQ 2 实体不支持）

我试图生成一个表达式树来做到这一点，这就是我想出的：

```
ParameterExpression list = Expression.Parameter(typeof(List<string>), "list");
ParameterExpression i = Expression.Parameter(typeof(int), "i");
ParameterExpression result = Expression.Parameter(typeof(string), "r");

LabelTarget label = Expression.Label(typeof(string));

BlockExpression block = Expression.Block
(
    new[] { i, result },
    Expression.Assign(result, Expression.Property(list, "Item", Expression.Constant(0))),
    Expression.Assign(i, Expression.Constant(0)),
    Expression.Loop
    (
        Expression.IfThenElse
        (
            Expression.LessThan
            (
                Expression.PreIncrementAssign(i),
                Expression.Property(list, "Count")
            ),
            Expression.Assign
            (
                result,
                Expression.Call
                (
                    null,
                    typeof(string).GetMethod
                    (
                        "Concat",
                        new Type[]
                        {
                            typeof(string),
                            typeof(string),
                            typeof(string)
                        }
                    ),
                    new Expression[]
                    {
                        result,
                        Expression.Constant(","),
                        Expression.Property(list, "Item", i)
                    }
                )
            ),
            Expression.Break(label, result)
        ),
        label
    )
);

var join = Expression.Lambda<Func<List<string>, string>>(block, list);

Response.Write(join.Compile()(new List<string> { "a", "b", "c" })); 
```

这对 很有用`List<string>`，我得到结果“a，b，c”。

但我不知道如何将此代码应用于`IQueryable<string>`.

`IQueryable<string>`没有“Item”属性，甚至有一种方法可以通过 IQueryable 上的索引获取元素，这如何转换为 SQL ？

那么，有没有办法在 LINQ 2 Entity 中完成连接字符串任务（在 SQL 服务器端）？

# svn - SVN 合并移动的源代码文件

> ID：12323076
> 
> 赞同：15
> 
> 时间：2012-09-07T17:55:23.313
> 
> 标签：svn, merge

我觉得我有世界上最简单的 SVN 用例：

*   我有一个文件，`Test.java`在`trunk`SVN 中。
*   我分支`trunk`到`dev-branch`.
*   我`Test.java`进入. `com/mycompany`_`trunk`
*   我换`Test.java`了`dev-branch`。
*   我合并`dev-branch`到`trunk`.
*   树冲突结果。

为什么，哦，为什么，SVN 不能处理这个？我们做错了什么吗？这感觉应该很容易，但我公司的每个工程师都受到了阻碍。

在这里寻找面向 SVN 的答案（不是“移动到 git”等）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-07T21:34:46.180

在 SVN 中，移动是删除和添加。当您在分支中合并时，它会执行您移动的添加部分，但由于冲突它无法执行删除。您现在必须手动解决冲突

1.  复制你的`Test.java`to `com/mycompany/Test.java`，覆盖旧的。这解决了与该文件的冲突。
2.  `Test.java`从旧位置删除文件。这是执行合并时 SVN 无法执行的更改集的删除部分的手动方法。使用`svn delete Test.java`命令。
3.  告诉 SVN 冲突已解决，并且您的工作目录是正确的，`svn resolve --accept working .`最后的点是当前目录
4.  告诉 SVN`Test.java`文件的冲突也解决了`svn resolve --accept working Test.java`

然后您可以提交您的合并版本，您将与存储库重新同步。

# python - 在 web.py 应用程序中将用户站点映射到他们自己的 url

> ID：12323078
> 
> 赞同：0
> 
> 时间：2012-09-07T17:55:25.757
> 
> 标签：python, web.py, url-mapping

我正在使用 web.py 编写一个网络应用程序，允许用户添加一些 html 页面。

目前，页面映射如下：

```
webapp.com/user1/page1
webapp.com/user1/page2
webapp.com/user2/page1
webapp.com/user3/page1 
```

我知道 web.py 可以管理子域：

```
user1.webapp.com/page1
user2.webapp.com/page2
... 
```

如果用户希望他的页面出现在他控制的自定义域 URL 下，例如 www.user-own-url.com，我想给他选项。

是否可以使用 web.py 来实现？还是有其他 python 解决方案可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T22:20:54.850

这是可能的，但是您必须继承应用程序类并编写自己的 url 映射，因此它将取决于 web.ctx.host 值，而不是仅仅[匹配 web.ctx.path](https://github.com/webpy/webpy/blob/master/web/application.py#L228)

或者您可以为每个请求添加[loadhook](http://webpy.org/cookbook/application_processors) ，您可以在其中检查 web.ctx.host 并将所需的用户加载到[web.ctx](http://webpy.org/cookbook/ctx)以便稍后在控制器方法中使用。

# elasticsearch - ElasticSearch 结果不相关

> ID：12323079
> 
> 赞同：4
> 
> 时间：2012-09-07T17:55:29.583
> 
> 标签：elasticsearch

在 ElasticSearch 中，我创建了两个文档，其中一个字段是“CategoryMajor”

在 doc1 中，我将 CategoryMajor 设置为“Restaurants”

在 doc2 中，我将 CategoryMajor 设置为“餐厅餐厅餐厅餐厅”

如果我搜索 CategoryMajor:Restaurants，则 doc1 显示为比 doc2 更相关。这不是典型的 Lucene 行为，它给出的相关性越多，术语出现的次数越多。doc2 应该比 doc1 更相关。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T20:19:43.040

You can add &explain=true to your GET query to see that score of doc2 is lowered by "fieldNorm" factor. This is caused by default lucene similarity calculation formula, which lowers score for longer documents. Please read this document about default lucene similarity formula:

[http://lucene.apache.org/core/3_6_0/api/all/org/apache/lucene/search/Similarity.html](http://lucene.apache.org/core/3_6_0/api/all/org/apache/lucene/search/Similarity.html)

To disable this behaviour add "omit_norms=true" for CategoryMajor field to your index mapping by sending PUT request to:

```
http://localhost:9200/index/type/_mapping 
```

with request body:

```
{
    "type": {
         properties": {
            "CategoryMajor": {
                "type": "string",
                "omit_norms": "true"
           }
        }
    }
} 
```

I'm not certain, but it may be necessary to delete your index, create it again, put above mapping and then reindex your documents. Reindexing after changing mapping is necessary for sure :).

# python - 读取 .JPG 图像并保存而不更改文件大小

> ID：12323085
> 
> 赞同：4
> 
> 时间：2012-09-07T17:55:46.593
> 
> 标签：python, opencv, pygame, jpeg

我想编写一个读取 .jpg 图片的 python 代码，更改它的一些 RBG 组件并再次保存，而不更改图片大小。

我尝试使用 OpenCV 和 PyGame 加载图片，但是，当我尝试使用三个不同函数的简单加载/保存代码时，生成的图像比初始图像大。这是我使用的代码。

```
>>> import cv, pygame # Importing OpenCV & PyGame libraries.
>>> image_opencv = cv.LoadImage('lena.jpg')
>>> image_opencv_matrix = cv.LoadImageM('lena.jpg')
>>> image_pygame = pygame.image.load('lena.jpg')
>>> cv.SaveImage('lena_opencv.jpg', image_opencv)
>>> cv.SaveImage('lena_opencv_matrix.jpg', image_opencv_matrix)
>>> pygame.image.save(image_pygame, 'lena_pygame.jpg') 
```

原始大小为 48.3K，结果为 75.5K、75.5K、49.9K。

所以，我不确定我是否遗漏了使图片原始尺寸发生变化的东西，尽管我只进行了加载/保存，或者没有？

有没有比 OpenCV 或 PyGame 更好的库可以使用？！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-07T18:01:54.557

JPEG 是一种有损图像格式。当您打开并保存一个时，您将再次对整个图像进行编码。您可以调整质量设置以接近原始文件大小，但无论如何您都会失去一些图像质量。没有一般方法可以知道原始质量设置是什么，但如果文件大小很重要，您可以猜测直到接近为止。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-07T18:19:20.057

JPEG 输出的大小取决于 3 件事：

1.  原始图像的尺寸。在您的情况下，这对于所有 3 个示例都是相同的。
2.  图像中的颜色复杂度。具有很多细节的图像将大于完全空白的图像。
3.  编码器中使用的质量设置。在您的情况下，您使用了默认值，OpenCV 与 PyGame 的默认值似乎更高。更好的质量设置将生成更接近原始文件（损耗较小）但更大的文件。

由于 JPEG 的有损性质，其中一些是稍微不可预测的。您可以使用特定质量设置保存图像，打开该新图像并以完全相同的质量设置再次保存，由于第一次保存时引入的更改，它的大小可能会略有不同。

# c# - 如何在 Silverlight 5 OOB 应用程序中呈现 PDF 字节数组？

> ID：12323087
> 
> 赞同：1
> 
> 时间：2012-09-07T17:55:52.220
> 
> 标签：c#, .net, silverlight, silverlight-5.0

我得到一个 PDF 字节数组流，我想在我的 Silverlight OOB 应用程序中呈现它，我很好奇应该使用哪个控件来实现这个功能

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T18:06:48.673

我用一个`RadHtmlPlaceHolder`来解决类似的问题： [http ://www.telerik.com/help/silverlight/radhtmlplaceholder-overview.html](http://www.telerik.com/help/silverlight/radhtmlplaceholder-overview.html)

# matlab - 使用网络摄像头进行对象检测的 MATLAB 代码？

> ID：12323092
> 
> 赞同：0
> 
> 时间：2012-09-07T17:56:11.663
> 
> 标签：matlab, arduino, webcam

我正在使用 Arduino 来控制汽车，我想通过使用网络摄像头来查看我想要的对象并让汽车移动到这个位置来让它自动运行。我需要几样东西：

1.  [MATLAB](http://en.wikipedia.org/wiki/MATLAB)代码

2.  MATLAB 和 Arduino 之间的接口

3.  我如何在它们之间连接（软件，而不是硬件）

我需要任何教程来学习或任何说明来制作我的项目。我看到很多人以前都这样做过，但不幸的是他们没有提到如何启动这些项目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T06:27:50.633

这个问题相当广泛，所以我提前为我有些笼统的回答道歉。

将网络摄像头与 MATLAB 连接的最简单方法是使用 Image Acquisition Toolbox。此[链接](http://www.mathworks.com/help/toolbox/imaq/f9-75080.html)提供了详细说明如何执行此操作的文档。

您很有可能还希望利用 MATLAB 中的图像处理工具箱来处理获取的图像以确定去向。请参阅此[文档](http://www.mathworks.com/help/toolbox/images/f0-3373.html)。但是，在您更具体地确定计划如何处理这些图像之后，您可能会在网上找到许多不需要此工具箱的算法。

就与 Arduino 的接口而言，MathWorks 提供了一个支持包，可让您将 MATLAB 代码和 Simulink 模型与 Arduino 接口。看到这个[链接](http://www.mathworks.com/academia/arduino-software/)

我唯一的其他一般性建议是考虑在这个项目中使用[Simulink](http://www.mathworks.com/help/toolbox/simulink/gs/gs_intropage.html)而不是 MATLAB。我觉得 Simulink 基于模型的方法更适合设计控制系统。

我希望这可以帮助您开始工作。

# html - CSS 投石机 MS 与 Photoshop 投石机 MS

> ID：12323093
> 
> 赞同：0
> 
> 时间：2012-09-07T17:56:15.607
> 
> 标签：html, css, templates, fonts, webfonts

我设计了一个使用 Trebuchet MS 字体 (PSD) 的小模板。现在，如果我在 HTML/CSS 中使用这种字体，它看起来完全不同。有没有可能达到相同或更好的质量？

也许谷歌网络字体？有没有类似的字体？还是我应该使用 CSS @font-face？

```
CSS:
font-family: "Trebuchet MS", sans serif; 
```

此致

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T18:20:57.960

基本答案是否定的。

您正在谈论字体抗锯齿（或字体平滑）。Photoshop 提供四种风格的抗锯齿（Sharp、Crisp、Strong、Smooth）。浏览器不会做同样的事情，通常操作系统会控制字体抗锯齿。

有关浏览器和字体的更多信息：[类型渲染：Web 浏览器](http://blog.typekit.com/2010/10/21/type-rendering-web-browsers/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T18:17:59.640

不，除非您可以使用 Flash 生成的字体或图像字体等。您正在研究两种不同的野兽如何呈现字体的差异，而且它主要是您无法控制的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T18:00:12.703

@font-face 是新的，并不适用于所有浏览器。为了保持跨浏览器支持，您可以使用基于 JS 的 Cufon 来提供您想要的任何字体。

[http://cufon.shoqolate.com/generate/](http://cufon.shoqolate.com/generate/)

# object - 在 Salesforce 中将沙箱部署到生产环境时出错

> ID：12323098
> 
> 赞同：2
> 
> 时间：2012-09-07T17:56:40.500
> 
> 标签：object, deployment, ant, salesforce, lookup

我正在将我的项目从沙盒部署到生产环境。我正在使用“ANT”工具进行部署。但它给了我如下错误：

> 错误：对象/Form__c.object(144,13)：字段完整性异常：未知（必须为所需的查找外键指定级联删除或限制删除）

任何人都可以帮助我吗？谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T12:31:54.820

转到您的对象 Form__c 的第 144 行，将有一个 Lookup Field ，在该字段中删除 'Required' Tag ，删除该标签已完成并重新开始您的 ant 部署。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T22:10:14.207

听起来像是 API 版本不匹配的事情。如果我没记错的话，在 Summer'12 中引入了在数据库级别而不是布局级别上根据需要重新设置主从关系和标记查找的能力。您的 XML 文件来自没有此功能的沙箱，因此 SF 抱怨缺少标签。

请参阅[发行说明](http://na1.salesforce.com/help/doc/en/salesforce_summer12_release_notes.pdf)（第 183-184 页），尽管它们并没有真正提及元数据更改...

# c++ - 从工作目录 C++ 中的文件夹读取

> ID：12323101
> 
> 赞同：1
> 
> 时间：2012-09-07T17:56:56.600
> 
> 标签：c++, directory, fstream

我想从保存在我工作目录的文件夹中的文本文件中读取。但是除非文本文件在工作目录中，否则它不会打开。

我正在使用这样的一条线。应该改成什么？

```
ifstream myfile ("./folder/example.txt"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T18:09:34.493

如果您使用的是 Windows，请使用此格式打开文件。

```
ifstream myfile ("C:\\Book\\file.txt") ; 
```

假设您的文件位于 C 盘的 Book 文件夹中。首先写入目录，然后在其间使用双斜杠写入后续文件夹，直到到达文本文件。尽管最好将其放入项目目录本身，使用它。

```
ifstream myfile ("file.txt") ; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T18:21:58.343

您可以通过简单地编写来访问您的程序所在的目录

```
ifstream myfile ("example.txt"); 
```

如果 example.txt 与您的程序位于同一目录中。请注意，如果您无法保存在此目录中，这可能不起作用。

# jquery - jQuery 结合 td:not(:first-child) 和 td:empty

> ID：12323102
> 
> 赞同：4
> 
> 时间：2012-09-07T17:57:03.637
> 
> 标签：jquery, jquery-selectors

我试图在我的 jQuery 代码中结合 td:not(:first-child) 和 td:empty 选择器。我在下面附上了一段代码摘录。此代码使用 hoverIntent 插件在 1 秒的时间延迟后执行功能代码。

```
$(".jqgrow td:not(:first-child)")
    .mouseenter(function(){
    $.doTimeout('cellhover', 1000, function(e){
        my_tooltip
        .css({opacity:0.85, display:"none"})
        .stop() // Added stop() to fix bug, flickering of tooltip
        .fadeIn(10);                                
    });
}); 
```

简单来说，如果鼠标不在表中的第一列上（该表包含内容与我的工具提示无关的单元格）并且鼠标所在的单元格不为空，我需要触发该函数。我不确定是使用 td:empty 还是使用 .html()。

我尝试了以下没有奏效的方法：

```
$(".jqgrow td:not(:first-child) td:empty")
$(".jqgrow td:empty td:not(:first-child)")
$(".jqgrow td:not(:first-child, :empty)") 
```

我看到了使用 .is(:empty) 和 filter() 与其他问题相关的想法，但我不知道如何将其应用于这种情况。

我将不胜感激任何帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-07T17:58:45.327

`td:empty`选择空的单元格，这与**您**问题中的描述相反，您希望它仅应用于**非**空单元格。

根据您的描述，您的最后一个选择器应该可以工作：

```
// Select td elements in .jqgrow that are neither :first-child nor :empty
$(".jqgrow td:not(:first-child, :empty)") 
```

如果不是，则有其他问题。

# cappuccino - 是否有提供 Cappuccino 代码完成的 IDE

> ID：12323105
> 
> 赞同：1
> 
> 时间：2012-09-07T17:57:15.017
> 
> 标签：cappuccino

我几乎尝试了[此处](http://cappuccino.org/learn/tutorials/getting-setup.php)列出的所有 IDE ，但没有一个提供代码完成功能。
作为一名 Flex 开发人员，我习惯于在 Flash Builder 中完成代码。它可以节省大量时间并有助于解决拼写错误。
有人知道带有 Cappuccino 代码完成功能的 IDE 吗？是很难创建，还是对每个人都没有对我重要？

我们公司将大量使用 Cappuccino，因此我不介意请一位开发人员自愿创建某种 Eclipse 插件。让我知道，这有多重要，有多困难。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T18:57:32.163

据我所知，没有完整的 IDE 支持，但有几个文本编辑器支持。Coda 附带它，并且存在 textmate 和 sublime 文本插件（几个核心团队成员使用 Sublime，我听说它非常好。）[https://github.com/aparajita/Cappuccino-Sublime](https://github.com/aparajita/Cappuccino-Sublime)

此外，不幸的是，该网站对于查找相关内容来说是一个非常糟糕的资源，它适用于一些没有改变的旧东西（如教程），但调试和编辑器之类的信息几乎肯定是过时的，因为这些事情正在迅速发生变化。

# wix - 使用附加输入自定义 WiX Burn 主题

> ID：12323106
> 
> 赞同：13
> 
> 时间：2012-09-07T17:57:16.287
> 
> 标签：wix, windows-installer, bootstrapper, burn

我正在考虑使用 Burn 作为安装程序的引导程序，我需要将几个参数传递给 MSI。

我知道这样做的方法是使用`MsiProperty`元素，我遇到的问题是显示 UI 以捕获这些属性。我知道我可以通过托管引导程序应用程序主机创建一个完全自定义的 UI，但是要对引导程序进行相对较小的调整，这需要做很多工作。

我发现[这篇博客文章](http://neilsleightholm.blogspot.co.uk/2012/05/burn-ui-customisations.html)描述了如何进行基本的 UI 自定义，并想知道是否可以修改 Burn UI 以包含一个简单的复选框/文本框（然后使用其值来设置 Burn 变量，以便我可以将其传递到我的MSI）以类似的方式，还是我需要使用托管引导程序应用程序主机？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-09-07T19:23:29.090

我在任何地方都找不到任何关于此的文档，但是一些实验+阅读源代码表明这相当简单 - 只需将`Name`控件（例如 Checkbox）的名称设置为 Burn 变量的名称（不是 WiX 变量- 它们是不同的），就像这样（有关将其放置在何处的更多信息，请参阅[刻录 UI 自定义）](http://neilsleightholm.blogspot.co.uk/2012/05/burn-ui-customisations.html)

```
<Checkbox Name="MyCheckBox" ...>Hello, checkbox</Checkbox> 
```

如果你喜欢，你可以在你的 bundle 下定义一个 burn 变量，将它初始化为某个值（使用 1 表示“已勾选”，使用 0 表示“未勾选”并带有复选框）

```
<Variable Name="MyCheckBox" Value="1" /> 
```

但是它不是必需的 - 无论如何都会自动为您创建变量。请注意，它必须是 a `Variable`，而不是 a `WixVariable`- 这些是不同的。

最后要设置基于此变量的 MSI 属性，添加一个[`MsiProperty`](http://wix.sourceforge.net/manual-wix3/wix_xsd_msiproperty.htm)元素作为元素的子[`MsiPackage`](http://wix.sourceforge.net/manual-wix3/wix_xsd_msipackage.htm)元素，如下所示

```
<MsiPackage Name="MyMsi.msi" ...>
    <MsiProperty Name="SOMEPROPERTY" Value="[MyCheckBox]" />
</MsiPackage> 
```

MSI 属性“SOMEPROPERTY”的值将根据复选框的选中状态设置为 0 或 1。

# c++ - 在 AlgorithmInfo::addParam 中使用 Setter 和 Getter 进行算法继承

> ID：12323107
> 
> 赞同：2
> 
> 时间：2012-09-07T17:57:22.363
> 
> 标签：c++, algorithm, image-processing, opencv, member-function-pointers

我正在使用[来自 OpenCV docs 的参考来](http://opencv.itseez.com/modules/core/doc/basic_structures.html?highlight=algorithm#creating-own-algorithms)创建自己的算法，该算法继承自 cv::Algorithm 。我已经创建了自己的类，这些类成功地从 cv::Algorithm 继承，但我在使用这个时遇到了困难，因为它有一个成员，该成员`m_model`是来自无法修改的库的成员，因为`MyAlgorithm`该类将功能包装在这个结构。

无论如何，我试图在结构中引用一个 `uchar[3] 的成员，所以我将它包装在 cv::Ptr 中。当我在 addParam 方法上编译没有 getter 或 setter 的程序时

```
obj.info()->addParam<uchar[3]>(obj, "arrPtr",  *arrPtr, false); 
```

代码编译得很好，但是当我尝试将`write`MyAlgorithm 对象归档时出现运行时错误，因为它无法获取数据。它正在寻找具有`arr`名称但不存在的成员变量。所以我为类成员中的`arr`参数定义了一些getter和setter方法。`m_model`

但是，我不确定如何将成员函数指针传递给 addParams 方法。我知道我不能像我目前在下面的代码中所做的那样将它们传递给 addParams 方法。我还尝试了以下方法：

```
obj.info()->addParam<uchar[3]>(obj, "arr",  *arrPtr, false, &MyAlgorithm::getArr, &MyAlgorithm::setArr); 
```

但我得到一个编译错误：

```
cannot convert parameter 5 from 'cv::Ptr<_Tp> (__thiscall MyAlgorithm::* )(void)' to 'cv::Ptr<_Tp> (__thiscall cv::Algorithm::* )(void)' 
```

下面是我的源代码的精简示例。任何帮助将不胜感激。

我的算法.h

```
class MyAlgorithm : public cv::Algorithm    {
public:
    //Other class logic
    cv::Ptr<uchar[3]> getArr();
    void setArr(const cv::Ptr<uchar[3]> &arrPtr);

    virtual cv::AlgorithmInfo* info() const;
protected:
    //define members such as m_model
};
cv::Algorithm* createMyAlgorithm();
cv::AlgorithmInfo& MyAlgorithm_info(); 
```

我的算法.cpp

```
cv::Algorithm* createMyAlgorithm()
{
   return new MyAlgorithm();
}

cv::AlgorithmInfo& MyAlgorithm_info() 
{
   static cv::AlgorithmInfo MyAlgorithm_info_var("MyAlgorithm", createMyAlgorithm);
   return MyAlgorithm_info_var;
}

cv::AlgorithmInfo* MyAlgorithm::info() const
{
   static volatile bool initialized = false;

   if( !initialized ) 
   { 
      initialized = true;
      MyAlgorithm obj; 
      cv::Ptr<uchar[3]> *arrPtr = new cv::Ptr<uchar[3]>(&(obj.m_model->arr));
      obj.info()->addParam<uchar[3]>(obj, "arr",  *arrPtr, false, &getArr, &setArr);
   } 
   return &MyAlgorithm_info();
}

cv::Ptr<uchar[3]> MyAlgorithm::getArr(){
   //Logic to get arr
}
void MyAlgorithm::setArr(const cv::Ptr<uchar[3]> &arrPtr){
   //Logic to set arr
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T14:10:49.433

我设法让`setter`and`getter`方法`addParam`起作用。问题是我需要`static_cast`像这样对父类执行：

```
typedef cv::Ptr<uchar[3]> (cv::Algorithm::*ArrGetter)();
typedef void (cv::Algorithm::*ArrSetter)(const cv::Ptr<uchar[3]> &);
obj.info()->addParam<uchar[3]>(obj, "arr",  *arrPtr, false, static_cast<ArrGetter>(&MyAlgorithm::getArr), static_cast<ArrSetter>(&MyAlgorithm::setArr)); 
```

但是，我还发现 OpenCV 不知道如何处理`uchar[3]`. 我尝试了一个`cv::Vec3b`似乎也不起作用的方法，所以我决定`cv::Mat`使用 setter 和 getter。所以最终的解决方案看起来像这样。

我的算法.h

```
class MyAlgorithm : public cv::Algorithm    {
public:
    typedef cv::Mat (cv::Algorithm::*ArrGetter)();
    typedef void (cv::Algorithm::*ArrSetter)(const cv::Mat &);

    //Other class logic
    cv::Mat getArr();
    void setArr(const cv::Mat &arrPtr);

    virtual cv::AlgorithmInfo* info() const;
protected:
    uchar[3] arr;
};
cv::Algorithm* createMyAlgorithm();
cv::AlgorithmInfo& MyAlgorithm_info(); 
```

我的算法.cpp

```
cv::AlgorithmInfo* MyAlgorithm::info() const
{
    static volatile bool initialized = false;

    if( !initialized ) 
    { 
        initialized = true;
        MyAlgorithm obj;
        cv::Vec3b arrVec(arr);
        obj.info()->addParam(obj, "arr",  (cv::Mat)arrVec, false, static_cast<ArrGetter>(&MyAlgorithm::getArr), static_cast<ArrSetter>(&MyAlgorithm::setArr));
    } 
    return &MyAlgorithm_info();
}

cv::Mat MyAlgorithm::getArr(){
    cv::Vec3b arrVec(arr);
    return (cv::Mat)arrVec;
}
void MyAlgorithm::setArr(const cv::Mat &arrMat){
    for (int i = 0; i < 3; i++)
        arr[i] = arrMat.at<uchar>(i);
} 
```

# jquery - 使用 .load() 后 UI 模式对话框未打开

> ID：12323108
> 
> 赞同：0
> 
> 时间：2012-09-07T17:57:26.997
> 
> 标签：jquery, struts

从数据库中删除记录时显示的删除 UI 对话框出现问题。当我单击图像时，应显示确认对话框，例如，如果用户点击“oui”。删除记录后我必须刷新表格，所以我使用*.load("url")*来达到这个目的。*问题是使用.load()*后无法打开对话框！这是我的代码（它是javascript）：

```
(function(a){a(document).ready(function(c)
{
//avec ce variable je recupere l'identificateur que je dois utilisé pour la suppresion et 
//l'edition de jour ferié
var id;
a("#da-ex-dialog-div").dialog(
{autoOpen:false,
title:"Confirmation de suppression",
modal:true,
width:"340",
resizable: false,
buttons:[{text:"Oui",click:function(){a.ajax({type: "POST", cache: false,url:"/Pointagesgtt/deletejourferie?id="+id,success:function(){ a(".da-panel-content").load("/Pointagesgtt/listejourferie .da-table");alert("reusii");}});a(this).dialog("close");}},{text:"Non",click:function(){a(this).dialog("close");}}]
});
a("#da-ex-dialog-form-div").dialog(
{autoOpen:false,
title:"Edition jour férié",
modal:true,
width:"640",
buttons:[{text:"Valider",click:function(){a(this).find("form#da-ex-dialog-form-val").submit();}}]
}).find("#da-ex-dialog-dp").datepicker({dateFormat:"dd/mm/yy"}).end().find("form").validate({rules:{"jourferie.date":{required:true,date:true},"jourferie.occasion":{required:true},"jourferie.nombrejours":{required:true,digits:true,max:40}},invalidHandler:function(f,d){var g=d.numberOfInvalids();if(g){var e=g==1?"Vous avez manqué 1 champ.  Il a été mis en évidence":"Vous avez manqué "+g+" champs. Ils ont été mis en évidence";a("#da-validate-error").html(e).show();}else{a("#da-validate-error").hide();}}});a(".da-ex-dialog-modal").bind("click",function(d){a("#da-ex-dialog-div").dialog("option",{modal:true}).dialog("open");d.preventDefault();/* la recuperation de ligne selectionné*/ id=a(this).closest("tr").attr("id");});a(".da-ex-dialog-form").bind("click",function(d){a("#da-ex-dialog-form-div").dialog("option",{modal:true}).dialog("open");d.preventDefault();});
});

}

)(jQuery); 
```

对于我的 JSP 页面片段：

```
<!-- Main Content Wrapper -->
                <div id="da-content-wrap" class="clearfix">

                    <!-- Content Area -->
                    <div id="da-content-area">

                     <div class="grid_4">
                            <div class="da-panel collapsible">
                                <div class="da-panel-header">
                                    <span class="da-panel-title">
                                        <img src="images/icons/black/16/list.png" alt="" />
                                        Les Jours Fériés
                                    </span>

                                </div>
                                <div class="da-panel-content">
                                    <table class="da-table">
                                        <thead>
                                            <tr>

                                                <th>Date</th>
                                                <th>Occasion</th>
                                                <th>Nombrejours</th>

                                                <th></th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                        <s:iterator value="listejourferie" var="jourferie">
                                            <tr id="<s:property value="jourferieId"/>">

                                                <td><s:property value="date"/></td>
                                                <td><s:property value="occasion"/></td>
                                                <td><s:property value="nombrejours"/></td>

                                                <td class="da-icon-column">

                                                    <a  href="#"><img class="da-ex-dialog-form" src="images/icons/color/pencil.png" /></a>
                                                    <a  href="#"><img class="da-ex-dialog-modal" src="images/icons/color/cross.png" /></a>
                                                </td>
                                            </tr>

                                          </s:iterator>  
                                        </tbody>
                                    </table>
                                </div>

                              <!-- Confirmation dialog --> 

         <div id="da-ex-dialog-div" style="display:none;">
                 <p>Cet élément sera définitivement supprimé et ne peut pas être récupéré. Etes-vous sûr?</p> 
         </div> 

                              <!--End confirmation dialog  -->

                              <!-- Edit form dialog -->

                               <div id="da-ex-dialog-form-div" class="no-padding">
                                        <form id="da-ex-dialog-form-val" class="da-form">
                                            <div id="da-validate-error" class="da-message error" style="display:none;"></div>
                                            <div class="da-form-inline">
                                               <div class="da-form-row">
                                                    <label>Date<span class="required">*</span></label>
                                                    <div class="da-form-item small">
                                                     <s:textfield id="da-ex-dialog-dp" name="jourferie.date"  readonly="true"/>
                                                    </div>
                                                </div>

                                                <div class="da-form-row">
                                                <label>Nombre de jours<span class="required">*</span></label>
                                                <div class="da-form-item small">
                                                    <s:textfield name="jourferie.nombrejours" />
                                                </div>
                                               </div>

                                               <div class="da-form-row">
                                                <label>Occasion<span class="required">*</span></label>
                                                <div class="da-form-item">
                                                    <s:textfield  name="jourferie.occasion" />
                                                </div>
                                               </div>

                                            </div>
                                        </form>
                                    </div>                                   
                              <!-- End edit dialog -->  
                            </div>
                        </div>                                                  
                    </div>                        
                </div>                    
            </div>                
        </div>

        <!-- Footer -->
        <div id="da-footer">
            <div class="da-container clearfix">
                <p>Copyright 2012\. CandySoft. Tous droits réservés.
            </div>
        </div>            
    </div> 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T19:08:17.490

这可能是因为您正在加载用于显示对话框的元素。如果您使用的是 jQuery bellow 1.7，则解决方案是使用`.live`，如果不是，则使用委托`on`：

```
// jQuery < 1.7
a(".da-ex-dialog-modal").live("click",function(d){
    a("#da-ex-dialog-div").dialog("option",{modal:true}).dialog("open");
    d.preventDefault();
});

// jQuery >= 1.7
// You can use `document` or a parent elements that you doesn't load it with AJAX
// to delegate the event
a("#da-content-area").on("click", ".da-ex-dialog-modal", function(d){
    a("#da-ex-dialog-div").dialog("option",{modal:true}).dialog("open");
    d.preventDefault();
}); 
```

# android - 什么是“默认通知灯”？

> ID：12323111
> 
> 赞同：0
> 
> 时间：2012-09-07T17:57:41.673
> 
> 标签：android, android-notifications

关于在通知中使用灯光的几个问题，我已经尝试自己找到答案几个小时了。通知状态的 Android 文档

> 公共静态最终 int DEFAULT_LIGHTS
> 
> 自：API 级别 1 使用默认通知灯。这将忽略 FLAG_SHOW_LIGHTS 位和 ledARGB、ledOffMS 或 ledOnMS。

**我的问题**

1.  根据文档，**默认通知灯是什么？**
2.  屏幕是在灯光通知上显示几毫秒的闪光还是仅在 LED 上显示？
3.  每个 Android 手机上都有 LED 灯吗？
4.  三星 Galaxy Ace 有 LED 灯吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T18:09:22.777

1.  设备的默认通知灯。
2.  不。
3.  绝对不; 特别是三星通常不会。*很*烦人。
4.  我不相信。有些应用程序可以通过各种方式解决这个问题；YMMV。

# .net - 运输箱尺寸找到最大边和最小尺寸

> ID：12323112
> 
> 赞同：0
> 
> 时间：2012-09-07T17:57:48.217
> 
> 标签：.net, arrays, shipping

我正在做一些运费计算。我需要一些帮助来解决这个问题。基本上，我有一个具有长度、宽度和高度属性的产品的通用列表。

我想轻松查看产品并找到所有三个属性的最大值。从这里，我可以做一些数学运算并根据产品数量计算出盒子的大小。

我最初的想法是制作 3 个数组并找到每个数组的最大值。只是想看看是否有一种我不知道的更简单或更酷的方式。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T21:38:07.360

听起来像一个数组数组。当您从数据源（SQL Server、XML 等）读取每个元素（框）时，创建一个 3 成员数组并按大小顺序插入属性。然后，将三成员数组添加到数组数组中。然后，您可以使用 LINQ 或其他函数按第一个、第二个或第三个成员对数组数组进行排序。

```
Box1,2,2,3
Box2,5,10,1
Box3,8,4,7 
```

变成：

```
{  {10,5,1},  {8,7,4},  {3,2,2}  } // First 
```

或者

```
{  {8,7,4},  {10,5,1},  {3,2,2}  } // Second 
```

或者

```
{  {8,7,4},  {3,2,2},  {10,5,1}  } // Third 
```

然后，您可以按第一个元素、第二个元素等对数组进行排序。

您可以使用 LINQ 在单个语句中轻松构建数组数组，但具体如何执行取决于数据源。假设您有一个`Box`使用三个参数 、`Length`和`Width`命名的类`Height`，并且您已经创建了一个包含此类实例的强类型集合：

```
class BoxSorter {

    public IEnumerable<Box> Boxes {
        get;
        private set;
    }

    class Box {
        public double Height {
            get;
            set;
        }

        public double Width {
            get;
            set;
        }

        public double Length {
            get;
            set;
        }
    }

    public void Initialize() {

        this.Boxes = new List<Box>( new Box[] { 
            new Box() { Height = 2, Length = 2, Width = 3 },
            new Box() { Height = 5, Length = 10, Width = 1 },
            new Box() { Height = 8, Length = 4, Width = 7 }
        } );

    }

    public void Sort() {

        var l_arrayOfArrays =
            this.Boxes.Select(
            // Create an array of the Height, Length and Width, then sort the array elements (largest to smallest)
                b => new double[] { b.Height, b.Length, b.Width }.OrderByDescending( v => v ).ToArray()
            );

        var l_dimension1 =
            l_arrayOfArrays.OrderByDescending(
            // Sort the array of arrays by the first (and largest) dimension
                a => a[0]
            );

        var l_dimension2 =
            l_arrayOfArrays.OrderByDescending(
            // Sort the array of arrays by the second (and middle) dimension
                a => a[1]
            );

        var l_dimension3 =
            l_arrayOfArrays.OrderByDescending(
            // Sort the array of arrays by the third (and smallest) dimension
                a => a[2]
            );

    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T20:50:52.147

您真的很难找到三个数字的最小值、最大值和中间值吗？

将每列中的最小值当作只有两个
4 x 4 x 4
8 x 8 x 2是没有意义的，
您会错误地得出最小的是 4 x 4 x 2 而最大的是 8 x 8 x 4 的结论。

```
 double[] dimensions;

        dimensions = new double[] {8,7,7};
        Array.Sort(dimensions);
        System.Diagnostics.Debug.WriteLine(dimensions[0]);
        System.Diagnostics.Debug.WriteLine(dimensions[1]);
        System.Diagnostics.Debug.WriteLine(dimensions[2]);

        dimensions = new double[] { 7, 9, 8 };
        Array.Sort(dimensions);
        System.Diagnostics.Debug.WriteLine(dimensions[0]);
        System.Diagnostics.Debug.WriteLine(dimensions[1]);
        System.Diagnostics.Debug.WriteLine(dimensions[2]); 
```

PS 我同意 anathonline 的观点，如果你想要一个最佳的盒子尺寸和如何包装物品，它比简单的数学要复杂得多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T19:40:20.663

您可能需要做的是拥有一组盒子尺寸，然后尝试将它们以最佳方式包装在一个或多个该尺寸的盒子中。

[这](http://www.blackpawn.com/texts/lightmaps/)是 2D 案例的简单打包程序，您可以将其扩展到 3D。

你的算法看起来像

```
 foreach box in boxes (ordered by decreasing volume)
        while there are unpacked items
            if box has space
                pack item
            else
                box = another box of the same size 
```

现在您可以决定如何处理最后一个盒子中未使用的空间 - 要么将它们全部取出并尝试使用较小的盒子，要么尝试将所有物品打包在所有尺寸的盒子中，然后选择导致盒子数量最少的组合。

# alignment - 根据语言转换反馈评论 rtl 或 ltr

> ID：12323117
> 
> 赞同：0
> 
> 时间：2012-09-07T17:58:10.493
> 
> 标签：alignment, arabic

我有一个 php 反馈表，我希望根据语言将评论文本左对齐或右对齐：如果阿拉伯语应该对齐 rtl，则任何其他语言都没有（默认为 ltr）

这是当前的代码行（使所有内容从右到左！）：

```
$comment = "<p dir=\"rtl\">".str_replace ("\n", "<br />", $comment); 
```

所以我想告诉它：如果是阿拉伯语，那么 rtl，如果不是阿拉伯语，忽略那个 rtl

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-18T16:27:45.660

```
function containsArabic($str)
{
    return preg_match('~\p{Arabic}~u', $str);
}

echo containsArabic('helloسلام'); //  rturn 1
echo containsArabic('سلام');//return 1
echo containsArabic('testسلامtest'); // return 1
echo containsArabic('test');// return 0 
```

如果文本包含阿拉伯字母，则函数返回 1 否则返回 0

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T20:30:18.210

您可以使用[这些正则表达式](https://stackoverflow.com/questions/9072138/difference-between-php-regex-and-javascript-regex)来确定评论是否包含阿拉伯字符或波斯字符。

```
function containsArabic($str)
{
    return preg_match('~\p{Arabic}~u', $str);
}

echo containsArabic('helloسلام');
echo containsArabic('سلام');
echo containsArabic('testسلامtest');
echo containsArabic('test'); 
```

# android - 在android上使用屏幕片段

> ID：12323119
> 
> 赞同：1
> 
> 时间：2012-09-07T17:58:14.733
> 
> 标签：android, android-fragments

我正在开发 android 应用程序并试图让片段工作，但我遇到了一个问题。

当应用程序启动时，它会加载一个应该容纳两个片段的活动。片段 1 包含存储的登录列表，片段 2 将显示与该登录关联的详细信息。

列表片段应该从 SQLite 数据库中检索数据并显示在屏幕上，一旦单击该项目，它就会加载第二个片段，但我在第一阶段工作时遇到问题。

在我的主要活动课程中，我有以下内容。

```
public class PasswordListMain extends Activity {

    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.password_management);
    }

} 
```

password_management XML 文件包含以下内容

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <fragment
        android:id="@+id/passwordList"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        class="com.BoardiesITSolutions.PasswordManager.PasswordListFrag">
    </fragment>
</LinearLayout> 
```

它只包含片段，因为这是纵向屏幕，我想在让它并排工作之前我会先让它工作。

PasswordListFrag 包含以下内容

```
public class PasswordListFrag extends ListFragment{

    Common common; 
    com.BoardiesITSolutions.logic.ManagePasswordList managePasswordList;

    ArrayList<String> savedPassword;
    TextView txtNoRecords;
    ListView myListView;
    ArrayAdapter<Spanned> passwordArrayAdapter;
    AdView adView;

    @Override
    public View onCreateView(LayoutInflater inflator, ViewGroup container, Bundle savedInstanceState)
    {
        View view = inflator.inflate(R.layout.password_list, container, false);

        myListView = getListView();
        common = new Common(getActivity().getApplicationContext());

        //AdView adView = (AdView)findViewById(R.id.adView);
        common.requestAdvert(adView);

        managePasswordList = new ManagePasswordList(getActivity().getApplicationContext());
        //txtNoRecords = (TextView)findViewById(R.id.password_noRecords);
        populateListArray();

        common.showToastMessage("Adapter updated", Toast.LENGTH_LONG);

        //myListView.setOnItemClickListener(mListView);

        return view;
    }

    private void populateListArray()
    {

        ArrayList<Spanned> passwords = managePasswordList.getPasswordList();
        if (passwords != null && passwords.size() > 0)
        {
            passwordArrayAdapter = new ArrayAdapter<Spanned>(getActivity().getApplicationContext(), 
                    android.R.layout.simple_list_item_1, passwords);
            setListAdapter(passwordArrayAdapter);
            passwordArrayAdapter.setNotifyOnChange(true);
            myListView.setTextFilterEnabled(true);
            txtNoRecords.setVisibility(View.GONE);
        }
        else
        {
            txtNoRecords.setVisibility(View.VISIBLE);
        }
    }
} 
```

下面是列表片段的 XML

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads"
    android:layout_width="match_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >
    <TextView android:id="@+id/password_noRecords"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:gravity="center"
        android:layout_gravity="center"
        android:text="There are currently\nno saved logins"
        android:textSize="20dp"
        android:textStyle="bold|italic"/>
    <ListView 
        android:id="@android:id/list"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_above="@+id/adView">
    </ListView>
        <com.google.ads.AdView android:id="@+id/adView"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            ads:adUnitId="5555555"
            ads:adSize="BANNER"
            android:layout_alignParentBottom="true">
        </com.google.ads.AdView>
</RelativeLayout> 
```

当应用程序加载时，它会在尝试加载此屏幕时立即崩溃。

错误是

`java.lang.RuntimeException: Unable to start activity ComponentInfo` `PasswordListMain: android.view.InflatException: Binary XML file line` `#7 Error inflating class fragment`

我不知道是什么原因造成的，也不知道如何解决这个问题。

感谢您的任何帮助，您可以提供。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T18:52:17.067

我对这个问题的最佳猜测是这条线（但我承认我不确定）：

```
myListView = getListView(); 
```

您在片段有视图之前调用它 - 我认为这不会很好。我建议您对所涉及的视图进行初始化工作，`onActivityCreated()`而不是 in`onCreateView()`和其他组件（如您的数据存储事物和`Common`）`onCreate()`

# javascript - document.write 后备导致 jQuery 无序加载

> ID：12323121
> 
> 赞同：2
> 
> 时间：2012-09-07T17:58:38.777
> 
> 标签：javascript, jquery, html5boilerplate

我正在使用 HTML5 Boilerplate 4.0 构建一个新站点，并且在使用其 jQuery 本地回退代码时遇到了麻烦。有问题的代码在这里：

```
<!-- <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js"></script> -->
<script>window.jQuery || document.write('<script src="js/vendor/jquery-1.8.1.min.js"><\/script>')</script>
<script src="js/plugins.js"></script>
<script src="js/main.js"></script> 
```

我目前正在本地开发，所以我已经注释掉了 CDN 行。我的问题是 jQuery 确实加载了，但它在 plugins.js 和 main.js 之后加载，导致未定义的错误。

我找到的最接近的解释可能是[这个先前答案](https://stackoverflow.com/a/2343051/963104)的#4 点，这表明这是可以预期的，但是......上面很容易成为 jQuery 最常用的本地后备代码，它是 H5BP，即严格审查。我一定是错过了什么，是吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T18:13:41.127

您可以考虑使用[yepnope](http://yepnopejs.com/)与回退并行加载脚本。

从他们的网站：

> yepnope.js 有能力做资源回退并且仍然与第一个并行下载依赖脚本。

和代码：

```
yepnope([{
  load: 'http:/­/ajax.googleapis.com/ajax/libs/jquery/1.5.1/jquery.min.js',
  complete: function () {
    if (!window.jQuery) {
      yepnope('local/jquery.min.js');
    }
  }
}, {
  load: 'jquery.plugin.js',
  complete: function () {
    jQuery(function () {
      jQuery('div').plugin();
    });
  }
}]); 
```

我希望这有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T18:12:10.590

前段时间我[回答了一个类似的问题。](https://stackoverflow.com/questions/12290873/javascript-loading-order-causing-issues/12291050#12291050)

你可以这样做：

```
function loadScript(pathToScript, callback) {

    if (/jquery/.test(pathToScript) && window.jQuery) {
        //jQuery has already been loaded so simply call the callback
        callback.apply();

    } else {
        var head = document.getElementsByTagName("head")[0];
        var script = document.createElement("script");

        script.type = "text/javascript";
        script.src = pathToScript + "?t=" + new Date().getTime(); //prevent caching

        if (callback) {
            script.onload = callback;
        }

        head.appendChild(script);
    }
}

var scripts = ['js/vendor/jquery-1.8.1.min.js', 'js/plugins.js', 'js/main.js'];

(function (i) {
    if (i < scripts.length) {
        var self = arguments.callee;

        loadResource(scripts[i], function () {
            self(++i);
        });
    }
})(0); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T18:12:20.690

我也没有在 StackOverflow 上找到关于这个问题的准确答案，但是，这个页面似乎涵盖了这个主题：

> 总而言之 - 创建一个真正强大的故障转移解决方案并不简单。我们需要考虑浏览器不兼容、文档状态和事件、依赖关系、延迟加载和超时！值得庆幸的是，像 LABjs 这样的工具通过让我们完全控制 JavaScript 文件的加载来帮助我们减轻痛苦。

*   [http://happyworm.com/blog/2010/01/28/a-simple-and-robust-cdn-failover-for-jquery-14-in-one-line/](http://happyworm.com/blog/2010/01/28/a-simple-and-robust-cdn-failover-for-jquery-14-in-one-line/)

*注意：解决方案依赖于使用 LABjs*

# java - JAVA GC：ParNew（升级失败），并发模式失败

> ID：12323124
> 
> 赞同：5
> 
> 时间：2012-09-07T17:58:54.297
> 
> 标签：java, jakarta-ee, memory, garbage-collection

我的应用程序/平台内存利用率突然飙升。在 GC 详细日志中，我在下面看到：

```
1285.946: [GC 1285.946: [**ParNew (promotion failed)**: 353920K-353920K(353920K), 0.8003983 secs]1286.747: [CMS1287.338:
[CMS-con current-sweep: 7.902/9.624 secs] [Times: user=96.62 sys=2.35,
real=9.62 secs]  (**concurrent mode failure**):
2531317K->1161025K(2752512K), 24.8330303 secs]
2860005K->1161025K(3106432K), [CMS Perm : 37117K->3 6905K(62368K)],
25.6341706 secs] [Times: user=26.41 sys=0.05, real=25.63 secs] [ POA RootPOA - rid: 17 oid: 00 17 2E 29 23 33 49 34 25 3E  opname: ping -
process request ]
1312.367: [GC 1312.367: [ParNew: 314624K->30240K(353920K), 0.0188874 secs] 1475649K->1191266K(3106432K), 0.0194380 secs] [Time s: user=0.40
sys=0.00, real=0.02 secs]
1313.249: [GC 1313.249: [ParNew: 344864K->39296K(353920K), 0.0300220 secs] 1505890K->1201198K(3106432K), 0.0305488 secs] 
```

`ParNew (promotion failed ),concurrent mode failure :`

我相信由于 GC 失败，内存中的突然峰值是可见的。解释和如何解决这个问题。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-29T16:59:25.313

“ParNew（提升失败）”的意思是，有一些对象会从年轻代提升到老年代，但是空间不够。可能旧空间快满了，或者提升的对象太大，没有足够的继续空间。

简单的解决方案，就是尝试增加老年代的大小。或者你可以尝试使用 G1 算法，它可以减少老年代的碎片问题。

如果这两种方法都不能解决您的问题，您可能需要检查您的代码，以减小单个对象的大小。

只是我的2美分，

最好的问候，莱昂

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-25T21:31:32.833

从可见的行来看，我假设您的应用程序代码创建了太多垃圾对象。CMS 失败 Full GC 能够收集 1.4GB 的垃圾。所以这不是碎片问题，而是 CMS 没有赶上的问题。[CMS perm] 让我很好奇你的 GC 设置是什么。也许你可以给 CMS 更多的 CPU 来运行？或者您可以扩大新空间以避免过早升级到旧空间。

但很有可能，您运行的是低效的代码。我会在上面附加一个分析器并寻找垃圾分配热点。

# git - GIT：以下未跟踪的工作树文件将被结帐覆盖

> ID：12323128
> 
> 赞同：12
> 
> 时间：2012-09-07T17:59:09.977
> 
> 标签：git, git-checkout

我有两个分支，一个叫做 master 另一个叫做 dev 我目前在 master 分支中，我想去 dev 分支将文件移动到开发服务器。但是，当我执行

```
$ git checkout dev 
```

我收到消息：

> 以下未跟踪的工作树文件将被结帐覆盖：
> 
> ```
> pages/memclub/images/subheaders/leadership.png
> pages/memclub/images/subheaders/male.png
> pages/memclub/images/subheaders/marketing.png
> pages/memclub/images/subheaders/training.png 
> ```

我不想将文件提交给主人，它们还没有准备好被推送。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-09-07T18:15:19.067

首先，您需要添加有问题的文件，以便 Git 跟踪它们（您不必提交任何更改，但 Git 需要了解这些文件）：

```
git add pages/memclub/images/subheaders/leadership.png pages/memclub/images/subheaders/male.png 
git add pages/memclub/images/subheaders/marketing.png pages/memclub/images/subheaders/training.png 
```

然后你可以隐藏你的更改：

```
git stash 
```

当您准备好再次开始处理文件时，您可以使用：

```
git stash pop 
```

# java - 如何使用java从ico文件中提取特定图标？

> ID：12323130
> 
> 赞同：1
> 
> 时间：2012-09-07T17:59:13.927
> 
> 标签：java, icons

我想创建一个可以从 ico 文件中提取特定大小的图标的 java 应用程序。

即从多图标 Ico 文件中提取 64 x 64 图标。

有没有办法在java中做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T18:48:29.997

Java 默认不支持 .ico 文件。它支持 .png、.gif 和 .jpg。要读取 .ico 文件，您可能需要找到 ImageIO 扩展名。

# php - 如何在url中发送变量

> ID：12323132
> 
> 赞同：-4
> 
> 时间：2012-09-07T17:59:24.343
> 
> 标签：php

```
http://foo.com?url= [  http://foo2.com?thing=blah   ] 
```

我希望将带有 $thing 变量的整个 url 存储在 $url 中。

注意：括号只是为了清楚。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-07T18:01:44.183

使用[`urlencode()`](http://php.net/urlencode)：

```
$param = urlencode('http://foo2.com?thing=blah') 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-07T18:02:35.223

你见过[`http_build_query`](http://www.php.net/manual/en/function.http-build-query.php)（还要结合[`http_build_url`](http://www.php.net/manual/en/function.http-build-url.php)）吗？

```
$data = array(
  'url' => 'ttp://foo2.com?thing=blah'
);
$url = 'http://foo.com?' . http_build_query($data); 
```

*注意：这些需要`PECL pecl_http >= 0.23.0`*

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-07T18:01:50.447

使用 PHP 函数`urlencode()`。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-07T18:02:19.647

看起来您希望 URL 的值为 url [http://foo2.com?thing=blah](http://foo2.com?thing=blah)。您需要做的是使用 urlencode() 对该值进行编码，以便安全地包含在 url 中。 [http://php.net/manual/en/function.urlencode.php](http://php.net/manual/en/function.urlencode.php)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-07T18:03:14.770

您想像这样使用[urlencode](http://us.php.net/urlencode)：

```
$url = 'http://foo.com?url=' . urlencode('http://foo2.com?thing=blah'); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-07T18:03:19.357

```
$par = urlencode('http://foo2.com?thing=blah');
$url = 'http://foo.com?url='.$par; 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-09-07T18:01:39.600

```
$url = urlencode("http://foo2.com?thing=blah");
header("location: http://www.example.com/?url=" . $url); 
```

# linq - LINQ Lambda 表达式

> ID：12323135
> 
> 赞同：0
> 
> 时间：2012-09-07T17:59:37.737
> 
> 标签：linq

我想知道是否有专门针对 Lambda 表达式的好教程。我有时使用过查询表达式和 Lambda 表达式，但无法为 Linq Lambda 表达式找到可靠的教程/书籍。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T20:30:52.203

[也许最简单的方法是在LinqPad](http://Linqpad.net)中尝试一些 LINQ 表达式，然后单击 lambda 按钮以查看它们是如何在幕后翻译的。冲洗并重复。如果您想在 LinqPad 中获取一堆 LINQ 示例，请转到示例选项卡并选择下载选项。那里有几本书的样本可供使用（包括我的 LINQ in Action 中的样本）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T18:07:54.833

lambda 表达式和可以使用 lambda 表达式的 LINQ fluent 查询语法之间存在差异。

如果您想了解有关 LINQ 流畅查询语法的信息，那么您尤其需要了解 LINQ 提供的标准查询运算符。

你可以从这里开始 - [http://msdn.microsoft.com/en-us/library/bb397896.aspx](http://msdn.microsoft.com/en-us/library/bb397896.aspx)

[您还可以在 Jon Skeet 的博客 - http://msmvps.com/blogs/jon_skeet/archive/2010/09/03/reimplementing-linq-to-objects](http://msmvps.com/blogs/jon_skeet/archive/2010/09/03/reimplementing-linq-to-objects-part-1-introduction.aspx)中获得有关如何实现标准查询运算符的更深入信息[-part-1-introduction.aspx](http://msmvps.com/blogs/jon_skeet/archive/2010/09/03/reimplementing-linq-to-objects-part-1-introduction.aspx)

# node.js - 如何使用节点设置和拆卸快递？

> ID：12323137
> 
> 赞同：0
> 
> 时间：2012-09-07T17:59:51.057
> 
> 标签：node.js, express

我有一个非常基本的节点脚本，它启动，提供一个 html 页面，最后关闭应用程序（理想情况下杀死节点进程）。一切都很好，除了最后一行调用 close 方法将其拆除。

```
var express = require('express')
, http = require('http')
, app = express()
, server = http.createServer(app);

app.get('/', function(req, res) {
  res.sendfile(__dirname + '/index.html');
});

app.listen(8090);
console.log("started...");
app.close(); 
```

我在使用节点 0.8+ 运行此程序时遇到的错误是

```
app.close();
    ^
TypeError: Object function app(req, res){ app.handle(req, res); } has no method 'close' 
```

有谁知道我怎样才能更安全地关闭快递应用程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-06-18T16:13:12.413

你是如此接近：

```
var express = require('express')
, http = require('http')
, app = express()
, server = http.createServer(app);

app.get('/', function(req, res) {
  res.sendfile(__dirname + '/index.html');
});

var listener = app.listen(8090);
console.log("started...");
listener.close(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T00:15:05.153

到目前为止，我发现它是杀死节点进程的最佳方法。似乎完成了工作（尽管为了纯度我只想关闭快递）

```
process.exit(code=0) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T18:32:58.340

```
process.on('SIGTERM', function () {
  app.close();
}); 
```

试试看

# matlab - 基于matlab中的条件的每个单元格操作

> ID：12323141
> 
> 赞同：3
> 
> 时间：2012-09-07T18:00:04.327
> 
> 标签：matlab, conditional, element, computation

我不知道如果不迭代矩阵这是否可能，但问题来了。对于任何给定的方阵，说“M”，特定值说“键”。

我想计算一个新矩阵（比如'NM'），这样，

```
if M(i,j) < key; compute NM(i,j) using formula 1,
if M(i,j) = key; compute NM(i,j) using formula 2, and
if M(i,j) > key; compute NM(i,j) using formula 3 
```

该操作的输出必须是与M相同维度的新方阵。希望问题清楚。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T18:35:30.443

听起来你想要一个纯矩阵解决方案，所以我会这样回答。（您在标题中使用了在 Matlab 中具有特定含义的单词[单元格）](http://www.mathworks.com/help/techdoc/matlab_prog/br04bw6-98.html)

首先，您需要将矩阵 NM 定义为与 M 相同的大小，只需使用一个来定义另一个就足够简单了。然后使用逻辑索引仅将值应用于所需的矩阵元素。

```
NM=M;
NM( M < key) = formula1( NM(M < key) );
NM( M == key) = formula2( NM(M == key) );
NM( M >= key) = formula3( NM(M > key) ); 
```

这是一个说明性示例，它将单个公式应用于`NM=M+1`小于 0.5 的矩阵元素。

```
>> M=rand(3)

M =

0.0623    0.7783    0.0097
0.7011    0.2843    0.7337
0.1984    0.2123    0.9778

>> NM=M;
>> NM(M<.5)=M(M<.5)+1

NM =

1.0623    0.7783    1.0097
0.7011    1.2843    0.7337
1.1984    1.2123    0.9778 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T18:37:03.310

我想你只是想做一些类似的事情

```
NM(M < key) = formula1;
NM(M == key) = formula2;
NM(M > key) = formula3; 
```

根据您的公式，您可能需要将 M 的值传递给函数，即

```
NM(M < key) = formula1(M(M < key)); 
```

# wcf - 多种服务与独特的服务

> ID：12323142
> 
> 赞同：0
> 
> 时间：2012-09-07T18:00:04.587
> 
> 标签：wcf, wcf-4

嗨，我需要您的帮助，以便我决定如何处理这件事。问题是，在我的工作中，我们目前正在从 Web 服务迁移到使用 WCF，现在的问题是，当我们使用 Web 服务时，我们有一个负责调用业务逻辑的 Web 服务现在事情是我想要想知道用 WCF 实现相同功能的最佳方式是什么，使用一个独特的服务来调用不同的业务逻辑类或使用多个服务来调用不同的业务逻辑类？我还必须澄清，当我说一项独特的服务时，我的意思是这将只有一种方法，一种或另一种方式将能够根据某些参数调用任何业务逻辑类，并且还将具有其他方法，但对于其他不同的任务，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T18:21:51.133

您可以将现有的服务结构迁移到 WCF 中，并且仍然具有相同的功能。您需要根据 WCF 创建和公开服务，但架构结构可以保持您在 Web 服务中的样子。您可能想重新审视您的设计。您可以使用许多功能，包括实体框架，允许您管理提交、回滚等。

# javascript - IE 不使用 jquery 将字符串转换为 HTML

> ID：12323145
> 
> 赞同：3
> 
> 时间：2012-09-07T18:00:22.203
> 
> 标签：javascript, jquery, internet-explorer-9, innerhtml

我将一个字符串传递给一个表，其中一些类在字符串 (img) 中包含 html 标记。在使用 innerHTML 附加此表的转换后在 chrome 和 FF 中效果很好，但在 IE 中效果不佳。

这是看起来像这样的代码：

```
var dfd = $.Deferred();
        var requestParams = {};
        templatingIsDone = jsonRequest(ResolveUrl("~/Results/ResultsService.asmx/GetMostRecentUploadsService"), requestParams).success(function (data) {
            if (data.Success == true) {
                var jheaderResults = $("#jobheaderResults tbody");  //HTML Markup
                try {
                    jheaderResults.empty();
                    var results = data.Results;

                    $.tmpl("jobHeaderTemplate", data.Results).appendTo(jheaderResults);

                    var allCaterLinks = $(".CaterRequestLinking");
                    $.each(allCaterLinks, function (index, value) {
                        if ($.browser.msie) {
                            value.innerHTML = value.innerText;
                        } else {
                            value.innerHTML = value.textContent;
                        }
                    });

                    $("#jobheaderResults tbody").trigger("update"); 
```

结果在“jobheaderResults”表中显示了它在 Firefox 和 Chrome 中的图像。但是 IE 不呈现图像，而是显示 html 标记。如何将其转换为 HTML？

我也尝试了以下代码，但无济于事：

```
 //value.innerHTML = value.empty().html(value.innerHTML);
                  //value.innerHTML = value.textContent;
                  //value.innerHTML = value.innerHTML.html();
                  //value.html(value.innerText);
                  //value.innerHTML = value.outerText; 
```

以上都不起作用，他们都未能将图像渲染到 IE 上。

有关更多信息，我要转换的实际标记是：

```
"<a href=\"#\" class=\"caterReqClass\"><img src=\"/HWVDB/images/Cater-Icon.jpg\" alt=\"CaterReqAlternate\"/></a>" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T19:05:32.447

试试这个

```
 $.each(allCaterLinks, function () {
        $('.allCaterLinks').html($('.allCaterLinks').text());
    }); 
```

这应该适用于所有浏览器。来自 jQuery.com：“此 (.html()) 方法使用浏览器的 innerHTML 属性。某些浏览器可能不会返回与原始文档中的 HTML 源完全相同的 HTML。例如，Internet Explorer 有时会省略属性值周围的引号如果它们仅包含字母数字字符。”

# emacs - 自定义切换器？

> ID：12323147
> 
> 赞同：0
> 
> 时间：2012-09-07T18:00:30.660
> 
> 标签：emacs, elisp, state

我想要一个切换器，它可以在上面的每一行（点）前面添加/删除“..”（有一个空格——但我不能让它更明显）字符串。这是我最好的选择：

```
(defun rst-comment-above (Point)
  (interactive "d")
  (save-excursion
    (goto-char 1)
    (cond

     ((numberp (get this-command 'state))
      ((replace-regexp "^\\.\\. " "" nil (point) (get this-command 'state)))
      (put this-command 'state ""))

     (t
     (replace-regexp "^" ".. " nil (point) Point)
     (put this-command 'state Point))
))) 
```

它第一次工作，但第二次它说：

```
(invalid-function
 (replace-regexp "^\\.\\. " "" nil (point) (get this-command (quote state)))) 
```

**编辑**：

@用户4815162342：

所以我评论上面的事情：

![我评论上面的东西](../Images/4f7cadae5425e6ad05b45c44aef87f9f.png)

然后我插入新行：

![我插入新行](../Images/8aab50dce67a2b1bbf8189c135ab36de.png)

然后我想取消注释，我得到：

![取消注释后，我得到](../Images/e1f2067d01a7c45518b8b63bc235208f.png)

但可能它并不那么重要。我一般不会在评论区输入任何内容。我只是注意到这个问题。更重要的是——`'state`跨会话存储给定文件的。实施起来难吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T18:09:15.033

该错误来自您调用`replace-regexp`. 那行应该是：

```
(replace-regexp "^\\.\\. " "" nil (point) (get this-command 'state)) 
```

您的代码还有其他几个问题。

1.  存储点的当前值效果不佳，因为您将字符添加到缓冲区，这会使点向前移动。这使得（一旦上述语法错误得到修复）该函数错过了“..”的最后几个实例。
    *   解决方法是存储点标记。
2.  您应该使用`(point-min)`而不是硬编码从 1 开始的缓冲区，否则当缓冲区缩小生效时，您的代码将无法工作。
3.  最后，`replace-regexp`正如其文档所述，不应该从 Lisp 程序中调用。

这是您的功能的修订版本：

```
(defun rst-comment-above ()
  (interactive)
  (let ((pm (point-marker))
        (prev-marker (get this-command 'rst-prev-marker)))
    (save-excursion
      (goto-char (point-min))
      (cond ((null prev-marker)
             (while (< (point) pm)
               (insert "..")
               (forward-line 1))
             (put this-command 'rst-prev-marker pm))
            (t
             (while (< (point) prev-marker)
               (when (looking-at "^\\.\\.")
                 (replace-match ""))
               (forward-line 1))
             (put this-command 'rst-prev-marker nil)))))) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T20:46:16.087

有什么理由不使用`M-;`in `rst-mode`？

# jquery - JQuery Auto Read More and Read Less 问题

> ID：12323150
> 
> 赞同：0
> 
> 时间：2012-09-07T18:00:46.257
> 
> 标签：jquery, click, nested, append

我正在尝试创建一个自动阅读更多和阅读更少的内容，您只需在`<a href="#" class="readmore">YOUR TEXT"</a>`文本中的任何地方弹出并遇到问题。现在它几乎可以工作，但如果你打开几个不同的阅读器然后点击阅读器关闭页面上的所有阅读器。有任何想法吗？所有代码都在下面，并带有注释。

```
// Auto Readmore with a link that has the readmore class
$(document).ready(function() {
    // Show Read more link that is hidden by css
    $('.readmore').show("fast");
    // Loop through all  .readmores
    $('a.readmore').each(function(index) {
        // Set the Node of the link
        var currentreadmore = $(this);
        // set the id to the index of the each
        $(this).attr('id', 'readmore-' + index);
        var node = currentreadmore[0];
        if (node && node.nextSibling) {
            // if not at the end of a paragraph remove the rest of the paragraph and append ...
            var afternodecontent = node.nextSibling.nodeValue;
            node.nextSibling.nodeValue = " ...";
        }
        // hide everything after the readmore link
        $(this).parent().nextAll().hide();

        // create click function to append the rest of the paragraph and show the content. Also hides the readmore button
        $(this).click(function() {
            // add the content back in
            if (node && node.nextSibling) node.nextSibling.nodeValue = afternodecontent;
            // hide the content
            $(this).parent().nextAll().slideToggle("slow");
            // hide the read more button
            $(this).hide("slow");

            // add the readless button
            $(this).parent().nextAll().last().append('<p id="readless-' + index + '" class="readless-wrapper"><a href="#" class="readless">Read Less...</a></p>');    

            // hvea the readless button click work
            $('.readless').click(function() {
                // show the readmore info based off of the index of the button
                $('#readmore-' + index).parent().nextAll().slideToggle("slow");

                // show the read more
                $('#readmore-' + index).show("slow");

                // append the ... and hide the rest of the content
                if (node && node.nextSibling) {
                    // if not at the end of a paragraph remove the rest of the paragraph and append ...
                    var afternodecontent = node.nextSibling.nodeValue;
                    node.nextSibling.nodeValue = " ...";
                }

                // remove the readless button
                $('.readless-wrapper').remove();

                // stop the href
                return (false);
            });
            // stop the href from working
            return (false);

        }); // Close Click function
    }); // Close Each Function
}); // Close document ready 
```

# javascript - 验证 javascript 和 jquery 中的字段

> ID：12323157
> 
> 赞同：0
> 
> 时间：2012-09-07T18:01:00.580
> 
> 标签：javascript, jquery, html

我有四个单选按钮。如果我选择最后一个单选按钮，则会出现一个文本框。我用 jquery 处理了这个场景。现在我想以这样的方式验证，如果用户得到这个文本框意味着如果用户检查了最后一个单选按钮，那么他应该提供一些文本。但在我的情况下，如果我检查任何一个单选按钮，它告诉提供一些文字。代码如下：

```
 <input type="radio" name="bus_plan" id="smallBtn" value="1" />1
     <input type="radio" name="bus_plan" id="smallBtn" value="2" />2
     <input type="radio" name="bus_plan" id="smallBtn" value="3" />3
     <input type="radio" name="bus_plan" id="smallBtn" value="Promotional" />
      <span class="plantxt"><a style="cursor:pointer;" onclick="popup('popUpDiv')">Promotional Plan</a> (Please enter a promotional code)</span>
    <div class="reg-line" id="pr_code_id" style="display:none">
       <div class="reg-linea" align="left">Promotional Code: <sup>*</sup></div>
       <input type="text" name="bus_prcode" id="bus_prcode" class="reg-line-input" value="Promotional Code" onblur="if(this.value=='') this.value='Promotional Code'" onClick="if(this.value==this.defaultValue) this.value='';" />
       <br />
       <div>
            <div id="promotionalbox" style="display:none;font-size:13px;clear:both"></div>    
       </div>
</div>
<script type="text/javascript" src="js/jquery-1.7.2.js"></script>
<script type="text/javascript">
$(document).ready(function(){     
    $("input:radio[name=bus_plan]").click(function(){  
        var values = $(this).val();
        if(values == 'Promotional'){
            $('#pr_code_id').show();
        }else{
            $('#pr_code_id').hide();    
        }
    }); 
}); 
</script> 
```

在 js 中，如果我提醒它的值，`document.getElementById('bus_prcode').value`那么它总是显示促销代码，这仅适用于最后一个单选按钮值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T18:15:01.967

你的代码有点乱，这是这个问题的根源。请记住，每个 ID 一个元素。

您可能还会发现查看 jQuery .is() 很有帮助，例如：

```
$('input[value="Promotional"]').is(':checked') 
```

**nb**我不建议上述内容，您应该首先以适当的方式使用标识符。

还值得注意的是，您的代码在我使用 Chrome 时运行良好。在此处查看示例（我已为您扩展）：http: [//jsbin.com/ofujal/3/](http://jsbin.com/ofujal/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T18:08:00.817

您不应该有具有相同 ID 的元素（您的单选按钮）。此外，您通过运行`document.getElementById('bus_prcode')`而不是单选按钮来获取文本框。你应该给你的最后一个单选按钮一个唯一的 ID，例如 btnPromotional，然后将点击绑定到它：

```
$("#btnPromotional").click(...) 
```

# cakephp - CakePHP 嵌套模型

> ID：12323159
> 
> 赞同：1
> 
> 时间：2012-09-07T18:01:06.630
> 
> 标签：cakephp, nested, models

我正在使用 CakePHP 构建一个 json Rest api。它工作得很好，除了我似乎无法得到正确的响应结构。

我有两个表：Users 和 Profiles。用户有一个配置文件。Profiles 有一个外键。模型：Users.php（使用 public $hasOne = 'Profile'），Profiles.php 控制器：UsersController.php

回应是：

```
[2] => Array
    (
        [User] => Array
            (
                [id] => 3
                [firstname] => test
                [lastname] => 
                [email] => 
                [password] => 
                [created] => 2012-09-04 16:44:04
                [modified] => 2012-09-04 16:44:04
            )

        [Profile] => Array
            (
                [id] => 
                [skill] => 
                [user_id] => 
            )

    ) 
```

我真的希望回复是这样的：

```
[2] => Array
    (
        [User] => Array
            (
                [id] => 3
                [firstname] => test
                [lastname] => 
                [email] =>
                [Profile] => Array
                      (
                     [id] => 
                     [skill] => 
                     [user_id] => 
                       )
            )

    ) 
```

我查看了 join()、bind()、containable...我似乎找不到嵌套表的解决方案。有什么想法可以让 Profile 嵌套在用户中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T23:21:03.843

Cakephp 不会这样做，因为它不是用于管理数据的结构。您将不得不手动进行。如果您正在处理单个结果（由 给出`find('first')`）尝试这样的事情（我还没有测试过）：

```
$result = $this->User->find('first', array('conditions' => array('User.id' => 1)));
Set::insert($result, 'User.Profile', $result['Profile']);
uset($result['Profile']); 
```

# scala - 案例类字段中的递归类型参数

> ID：12323173
> 
> 赞同：3
> 
> 时间：2012-09-07T18:01:48.927
> 
> 标签：scala, inheritance, types

好的，所以，我知道我可以做以下事情：

```
trait MyTrait[T <: MyTrait[T]] { self: T =>
  val listOfT: List[T]
  def getFirst: T
  def getOne: T = if (listOfT.length > 0) getFirst else self
}

class MyClass extends MyTrait[MyClass] {
  override val listOfT: List[MyClass] = List[MyClass](this)
  override def getFirst: MyClass = listOfT.head
} 
```

如果我希望 MyTrait 有一个伴随对象，它看起来像：

```
object MyTrait{
  def doSomething[T <: MyTrait[T]](aninstance:T)= { ... }
} 
```

所有这些看起来都很丑陋，我希望看到更好的方法，但是，现在我只是想弄清楚，我如何从其他任何地方引用类型？例如：

```
case class Foo( anInstanceOfMyTrait: MyTrait[what goes here???] ) 
```

或者有没有更简单的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T18:54:53.367

查看您的评论，实际问题似乎是在您尝试参数化 Foo 时，您引用了 MyTrait 两次：

```
case class Foo[A <: MyTrait[A]](i:MyTrait[A]) 
```

试试这个：

```
case class Foo[A <: MyTrait[A]](i: A) 
```

这反映了`MyTrait.doSomething`定义的方式，因此您可以将 i 传递给 doSomething：

```
case class Foo[A<:MyTrait[A]](i: A)
val foo = new Foo[MyClass]( new MyClass )
MyTrait.doSomething( foo.i ) // This compiled OK 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T18:44:27.830

我得到了这个工作：

```
trait MyTrait[T <: MyTrait[T]] {
  def getFirst = this
}

class MyClass extends MyTrait[MyClass]

case class Foo[A <: MyTrait[A]](i: MyTrait[A])

object MyTrait {
  def doSomething[T <: MyTrait[T], U[X <: MyTrait[X]] <: MyTrait[X]](t: U[T]) =
    t.getFirst
}

val mc = new MyClass
val foo = Foo(mc)
MyTrait.doSomething(foo.i) 
```

# c# - 设置 RichTextBox 的值

> ID：12323180
> 
> 赞同：0
> 
> 时间：2012-09-07T18:02:29.093
> 
> 标签：c#, set, dependency-properties

这看起来很简单，但我从来没有听说过依赖属性。所以，我一直在编码，直到我尝试设置富文本框的值。

它没有什么花哨的，只是富文本框。

当我尝试设置值时，我需要一个依赖属性。我听说这是一个 .NET 的东西，但我从来不需要使用它。

那么，有人可以告诉我，如何做到这一点？

这会是解决方案吗？：

```
public static readonly DependencyProperty myDP = 
    DependencyProperty.Register(
    "richtextbox", typeof(Boolean)); 
```

终于到了这样的事情：`rtb.setValue(myDP, "Text");` 因为我有很多丰富的文本框，我需要为每个字段制作一个 dp 吗？

不要误会我的意思，但这就是谷歌不够好的地方。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T18:13:06.363

我想你正在寻找`Text`房产。`rtb.Text = "Blah blah blah";`

对于 WPF，您可以将`Document`属性与[`FlowDocument`](http://msdn.microsoft.com/en-us/library/system.windows.documents.flowdocument.aspx)对象一起使用。见[指南](http://www.codeproject.com/Articles/37368/WPF-Flow-Document-For-Beginners)。以及来自[msdn](http://msdn.microsoft.com/en-us/library/system.windows.controls.richtextbox.aspx)的示例：

```
FlowDocument myFlowDoc = new FlowDocument();

// Add paragraphs to the FlowDocument.
myFlowDoc.Blocks.Add(new Paragraph(new Run("Paragraph 1")));
myFlowDoc.Blocks.Add(new Paragraph(new Run("Paragraph 2")));
myFlowDoc.Blocks.Add(new Paragraph(new Run("Paragraph 3")));
RichTextBox myRichTextBox = new RichTextBox();

// Add initial content to the RichTextBox.
myRichTextBox.Document = myFlowDoc; 
```

如果您需要在 .net 中设置任何控件的属性，请搜索控件属性，或者`F1`当您的插入符号位于 VisualStudio 中的控件内时按下以查看[用法和示例](http://msdn.microsoft.com/en-us/library/system.windows.forms.richtextbox_properties.aspx%29%20of%20a%20%60RichTextBox%60%20?)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T18:12:58.857

[`RichTextBox`](http://msdn.microsoft.com/en-US/library/system.windows.controls.richtextbox.aspx)可以通过其[`Document`属性](http://msdn.microsoft.com/en-US/library/system.windows.controls.richtextbox.document.aspx)访问a 的内容。

不知何故，一定有什么东西让你对依赖属性有一个完全错误的想法。WPF 控件（例如）`RichTextBox` *具有*您可以使用的依赖项属性。如果您只想分配一个值，则无需创建任何内容。

此外，您几乎不必`SetValue`为任何依赖属性调用该方法；WPF 控件和其他依赖项对象通常为每个依赖项属性提供属性包装器，让您可以像以前一样使用这些属性，因此调用`rtb.Document. ...`应该没问题。

**更新：**再想一想，我想下面的解释也会对你有所帮助：

您已经找到了[`SetValue`方法](http://msdn.microsoft.com/en-us/library/ms597473.aspx)，它需要 a`DependencyProperty`作为其参数之一。一般来说，对于任何对象的任何依赖属性，都有一个公开的静态只读字段公开相应的`DependencyProperty`实例。例如，`TextBox`该类为其[属性提供](http://msdn.microsoft.com/en-us/library/system.windows.controls.textbox.text.aspx)[`TextProperty`字段](http://msdn.microsoft.com/en-us/library/system.windows.controls.textbox.textproperty.aspx)。[`Text`](http://msdn.microsoft.com/en-us/library/system.windows.controls.textbox.text.aspx)

# extjs - 基于 extjs 中的复选框将字段的 allowInvalid 更改为 false

> ID：12323185
> 
> 赞同：0
> 
> 时间：2012-09-07T18:02:50.130
> 
> 标签：extjs

我在 extjs 网格中有一个文本字段，如下所示：

```
part : {
  fieldLabelToken: 'label.Structure.InstallRemoveItem.Part',
  mapping : 'removedPart.part',
  ref : '../../../removedPartField',      allowInvalid : true,
  textOnly :config.textOnly,
  listeners: {
    'select':function(combo,rec,index){
      if(!params.viewOnly && !config.textOnly){
        this.refOwner.removedTrackedField.setValue(rec.get("tracked"));
        this.refOwner.transformPosInfoFields(rec.get("tracked"));
        delete  this.refOwner.selectedItemId;
      }
    }
  }
} 
```

我在同一张表格上有这样的复选框：

```
{
      fieldLabelToken: 'label.Structure.Maintained.Structuremaintenance.InstallRemoveItem.PendingPartRemove',
      mapping : 'pendingPartRemove',
      xtype: 'checkbox',
      ref : 'pendingPartRemove',
      disabled : false
    } 
```

如果单击 InstallRemve 复选框，如何将部件字段的 allowInvalid 更改为 false？

提前致谢

# asp.net - listview 只显示一条记录两次

> ID：12323186
> 
> 赞同：0
> 
> 时间：2012-09-07T18:02:58.623
> 
> 标签：asp.net, listview

我有一个列表视图，它显示来自和 sql 服务器视图的记录。数据按 customerid 过滤，并在运行视图时具有 2 条唯一记录。然而，列表视图将只显示第一条记录，并显示两次。所以列表视图中显示了两条记录，但它没有显示视图生成的两条记录，它只是在视图中显示了第一条记录两次。我希望这很清楚。

到底是怎么回事？我一直在寻找几个小时没有运气。

```
<asp:ListView ID="lstBeforeAfter"  runat="server" DataKeyNames="CustomerID" InsertItemPosition="None">
    <LayoutTemplate>
        <div class="divreg">
            <table ID="itemPlaceholderContainer" runat="server" cellpadding="2" class="tablebasic" style="vertical-align:top">
                <tr ID="Tr1" runat="server" align="center">
                    <td style="background-color:#7e0d7d; color:White; font-size:1.2em; font-weight:bold; padding-top:4px; padding-bottom:4px">
                        Services
                    </td>
                </tr>
                <tr ID="itemPlaceholder" runat="server">
                </tr>
            </table>
        </div>
        </td>
    </LayoutTemplate>     

     <ItemTemplate>
         <tr style="">

             <td align="center">
                <div class="divwrap">
                <div class="left3ColHeader">
                   <b>Date</b>
               </div>
                <div class="mid3ColHeader">
                  <b>Stylist</b>
                </div>
               <div class="right3ColHeader">
                  <b>Services</b>
                </div> 
                    <div class="formclear">
                    </div>                     
                <div class="left3ColBorder">
                   <%# Eval("SchedStartDateTime", "{0:d}")%>
               </div>
                <div class="mid3ColBorder">
                  <%#Eval("FullName")%>
                </div>
               <div class="right3ColBorder">
                  <%#Eval("ServiceText")%>
                </div> 
                    <div class="formclear">
                    </div>

               <div class="left2ColHeader">
                    <b>Before Picture</b>
               </div>
                <div class="right2ColHeader">
                   <b>After Picture</b>
                </div>
                <div class="formclear">
                    </div>

               <div class="left2ColPicBorder">

               <asp:Image ID="imgLeft" ImageUrl='<%# Eval("BeforePicPath") %>' runat="server" />
               </div>
                <div class="right2ColPicBorder">
                  <asp:Image  runat="server" ID="imgRight" ImageUrl='<%# Eval("AfterPicPath") %>' />
                </div>

                <div class="formclear">
                    </div>      

                <div class="left2ColBorder">
                  <asp:Label ID="lblBefore"  Width="95%" runat="server" Text='<%# Eval("BeforePicName") %>'></asp:Label>
               </div>
                <div class="right2ColBorder">
                    <asp:Label ID="lblAfter" Width="95%" runat="server" Text='<%# Eval("AfterPicName") %>'></asp:Label>
                </div>
                <div class="formclear">
                    </div> 
                <div class="divreg">
                    <hr />
                </div>
                    <div class="formclear">
                    </div>       
              </div>
              </td>

         </tr>
     </ItemTemplate>
     <AlternatingItemTemplate>
        <tr style="background-color:#ffffd9">

             <td align="center">
                <div class="divwrap">
                <div class="left3ColHeader">
                   <b>Date</b>
               </div>
                <div class="mid3ColHeader">
                  <b>Stylist</b>
                </div>
               <div class="right3ColHeader">
                  <b>Services</b>
                </div> 
                    <div class="formclear">
                    </div>                     
                <div class="left3ColBorder">
                   <%# Eval("SchedStartDateTime", "{0:d}")%>
               </div>
                <div class="mid3ColBorder">
                  <%#Eval("FullName")%>
                </div>
                <div class="right3ColBorder">
                <%# Eval("ServiceText").ToString%>
                </div>

                    <div class="formclear">
                    </div>

               <div class="left2ColHeader">
                    <b>Before Picture</b>
               </div>
                <div class="right2ColHeader">
                   <b>After Picture</b>
                </div>
                <div class="formclear">
                    </div>

               <div class="left2ColPicBorder">

               <asp:Image ID="imgLeft" ImageUrl='<%# Eval("BeforePicPath") %>' runat="server" />
               </div>
                <div class="right2ColPicBorder">
                  <asp:Image  runat="server" ID="imgRight" ImageUrl='<%# Eval("AfterPicPath") %>' />
                </div>

                <div class="formclear">
                    </div>      

                <div class="left2ColBorder">
                  <asp:Label ID="lblBefore"  Width="95%" runat="server" Text='<%# Eval("BeforePicName") %>'></asp:Label>
               </div>
                <div class="right2ColBorder">
                    <asp:Label ID="lblAfter" Width="95%" runat="server" Text='<%# Eval("AfterPicName") %>'></asp:Label>
                </div>
                <div class="formclear">
                    </div> 
                <div class="divreg">
                    <hr />
                </div>
                    <div class="formclear">   </div>       
              </div>
              </td>             
         </tr>         
     </AlternatingItemTemplate>
</asp:ListView>

 Protected Sub LoadPortfolio(ByVal iCustID As Integer)
    Dim dc As New SalonDataClassesDataContext

    Dim q = From p In dc.vClientStyles Where p.CustomerID = iCustID Order By p.SchedStartDateTime Descending Select p
    If q.Count > 0 Then
        Me.lstBeforeAfter.DataSource = q
        Me.lstBeforeAfter.DataBind()

    End If

End Sub

SELECT ISNULL(dbo.Services.ServiceID, 0) AS ServiceID, dbo.Schedules.SchedStartDateTime, dbo.Schedules.ServiceText, dbo.Schedules.CustomerID, 
                  ISNULL(dbo.Services.Completed, 0) AS Completed, dbo.Stylists.FullName, dbo.Stylists.StylistID, ISNULL(dbo.Services.BeforePicName, 'No Title') AS BeforePicName, 
                  ISNULL(dbo.Services.BeforePicPath, '../images2020/resume-photo.jpg') AS BeforePicPath, ISNULL(dbo.Services.AfterPicName, 'No Title') AS AfterPicName, 
                  ISNULL(dbo.Services.AfterPicPath, '../images2020/resume-photo.jpg') AS AfterPicPath
FROM  dbo.Schedules INNER JOIN dbo.Stylists ON dbo.Schedules.UserID = dbo.Stylists.UserID LEFT OUTER JOIN  dbo.Services ON dbo.Schedules.ServiceID = dbo.Services.ServiceID
ORDER BY dbo.Schedules.SchedStartDateTime DESC 
```

更改为联合查询，但 linq 不喜欢它。

```
SELECT ISNULL(dbo.Schedules.ServiceID, 0) AS ServiceID,     dbo.Schedules.SchedStartDateTime, dbo.Schedules.ServiceText, dbo.Schedules.CustomerID, 
ISNULL(dbo.Schedules.Completed, 0) AS Completed, dbo.Stylists.FullName,      dbo.Stylists.StylistID, 'No Title' AS BeforePicName, '../images2020/resume-photo.jpg' AS     BeforePicPath, 'No Title' AS AfterPicName, '../images2020/resume-photo.jpg' AS AfterPicPath
FROM dbo.Schedules INNER JOIN  dbo.Stylists ON dbo.Schedules.UserID = dbo.Stylists.UserID
Where dbo.Schedules.CustomerID = 27
UNION 
SELECT ISNULL(dbo.Services.ServiceID, 0) AS ServiceID,            dbo.Schedules.SchedStartDateTime, dbo.Schedules.ServiceText, dbo.Schedules.CustomerID, 
ISNULL(dbo.Services.Completed, 0) AS Completed, dbo.Stylists.FullName,     dbo.Stylists.StylistID, ISNULL(dbo.Services.BeforePicName, 'No Title') AS BeforePicName, 
ISNULL(dbo.Services.BeforePicPath, '../images2020/resume-photo.jpg')  AS BeforePicPath, ISNULL(dbo.Services.AfterPicName, 'No Title') AS AfterPicName,      ISNULL(dbo.Services.AfterPicPath, '../images2020/resume-photo.jpg') AS AfterPicPath
FROM dbo.Schedules INNER JOIN dbo.Stylists ON dbo.Schedules.UserID = dbo.Stylists.UserID INNER JOIN dbo.Services ON dbo.Schedules.ServiceID = dbo.Services.ServiceID
Where dbo.Schedules.CustomerID = 27 ORDER BY dbo.Schedules.SchedStartDateTime DESC 
```

我现在得到错误...查询结果不能被多次枚举。

我究竟做错了什么？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T18:51:13.607

编辑 3

DataKeyNames 中返回的数据必须是唯一的。您拥有相同的 CustomerID 这一事实意味着您需要另一列来创建唯一键。从理论上讲，您可以在 DataKeyNames 中包含 CustomerID 和 ServiceID，但是您有一些空 ServiceID 记录的事实使其变得困难。

为什么不向每个名为“MyUniqueID”的选择添加一个新列并将其值设置为 NewId()。然后使用 MyUniqueID 作为 DataKeyNames。

```
 SELECT NewId() as MyUniqueID from blah 
```

NewId() 函数将确保您为结果集中的每一行获取一个全局唯一标识符，但不要将 UniqueID 用于任何后续操作，因为数据不会持久保存在数据库中，因此每次刷新 ListView 时都会丢失。

很难看出为什么在示例中使用联合，主要是因为很难格式化 stackoverflow 代码块。但是很明显，您不止一次拥有相同的客户 ID，因此它不能单独用作唯一的 DataKeyName。

或者可能`CustomerID + UserID`是`Schedules`唯一的，应该在 DataKeyNames 中组合？

在 DataKeyNames 中指定多个列，如下所示：-

```
DataKeysNames="CustomerID,UserID,ServiceID" 
```

如果这不起作用，您应该解释您希望`ListView`单曲返回给您的内容以及每条记录将具有`CustomerID`哪些独特属性`ListView`

*拿出工会，你的第一个例子似乎效果最好，除了唯一性*

# c - 使用 rand() 在 (a,b)、[a,b)、(a,b] 和 [a,b] 上生成均匀分布的浮点数

> ID：12323190
> 
> 赞同：7
> 
> 时间：2012-09-07T18:03:33.007
> 
> 标签：c, random

我想收集在一个地方在所有四种类型的间隔上生成随机数的“最佳”方式。我厌倦了谷歌搜索。搜索结果出现了很多废话。甚至相关的结果也是页面或博客，这些页面或博客通常是完全错误的，或者在讨论中自封的专家在某些技术上存在分歧，通常他们的“答案”似乎暴露了他们不了解不同的类型（关闭、开、半开）的区间。对于这样一个“简单”的问题，我厌倦了阅读有关在 C 中生成随机数的不良信息。

请告诉我如何生成均匀分布的浮点数。这是我在 (a,b)、[a,b)、(a,b] 和 [a,b] 上的典型方式（以“long double”为例）：

```
long double a=VALUE1,b=VALUE2;
long double x1,x2,x3,x4;

srand((unsigned)time(NULL));

/* x1 will be an element of [a,b] */
x1=((long double)rand()/RAND_MAX)*(b-a) + a;

/* x2 will be an element of [a,b) */
x2=((long double)rand()/((long double)RAND_MAX+1))*(b-a) + a;

/* x3 will be an element of (a,b] */
x3=(((long double)rand()+1)/((long double)RAND_MAX+1))*(b-a) + a;

/* x4 will be an element of (a,b) */    
x4=(((long double)rand()+1)/((long double)RAND_MAX+2))*(b-a) + a; 
```

对于单位区间 (0,1)、[0,1)、(0,1] 和 [0,1] 的特殊情况：

```
long double x1,x2,x3,x4;

srand((unsigned)time(NULL));

/* x1 will be an element of [0,1] */
x1=((long double)rand()/RAND_MAX);

/* x2 will be an element of [0,1) */
x2=((long double)rand()/((long double)RAND_MAX+1));

/* x3 will be an element of (0,1] */
x3=(((long double)rand()+1)/((long double)RAND_MAX+1));

/* x4 will be an element of (0,1) */    
x4=(((long double)rand()+1)/((long double)RAND_MAX+2)); 
```

我相信对 RAND_MAX 和 rand() 的返回值的强制转换都是必要的，不仅因为我们想要避免整数除法，而且因为它们是整数，否则添加一个（或两个）可能会使它们溢出。

我认为“double”和“float”的版本完全相同，只是替换了类型。不同的浮点类型是否有任何微妙之处？

您发现上述实现有什么问题吗？如果是这样，您将如何解决它以及如何解决它？

编辑：上述实现通过了必要的测试以使其正确（至少在运行 64 位 Linux 的 64 位 Intel Core 2 Duo 机器上）：x1 可以生成 0 和 1，x2 可以生成 0 但还没有看到生成 1，x3 可以生成 1，但尚未看到生成 0，并且未看到 x4 生成 0 或 1。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-07T18:23:53.043

如果您希望该范围内的每个双精度值都是可能的，并且概率与它与其相邻双精度值之间的差异成正比，那么它实际上真的很难。

考虑范围`[0, 1000]`。在该范围的非常小的第一部分中存在绝对的值桶负载：其中有一百万个在`0`和之间`1000000*DBL_MIN`，并且`DBL_MIN`大约是 2 * 10 ^(-308)。该范围内总共有多个`2^32`值，因此显然一次调用`rand()`不足以生成所有值。您需要做的是均匀地生成双精度数的尾数，并选择一个指数分布的指数，然后稍微捏造一些东西以确保结果在范围内。

如果您*不*要求范围内的每个双精度数都是可能的，那么开放范围和封闭范围之间的差异是相当不相关的，因为在“真正的”连续均匀随机分布中，*任何*精确值出现的概率无论如何都是 0。因此，您不妨只在开放范围内生成一个数字。

`1/(RAND_MAX+1)`所有这一切：是的，您提出的实现生成的值在您所说的范围内，并且对于封闭和半封闭范围，它们以概率左右生成端点。这对于许多或大多数实际目的来说已经足够了。

只要在可以准确表示`RAND_MAX+2`的范围内，您就可以摆弄 +1 和 +2 作品。`double`这对于 IEEE 双精度和 32 位是正确的`int`，但 C 标准实际上并不能保证这一点。

（我忽略了你的使用，`long double`因为它有点混淆了。它保证至少和 一样大`double`，但是在一些常见的实现中它与 完全相同`double`，所以`long`除了不确定性之外不会添加任何东西）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-07T19:56:41.713

此问题尚未准备好回答，因为该问题未完全指定。特别是，没有说明可以生成的值集应该分布到何种程度。为了说明，考虑为 [0, 1] 生成值，并考虑具有可表示值的浮点格式：

0、1/16、2/16、3/16、4/16、6/16、8/16、12/16、1。

这些值的几个分布可能被认为是“均匀的”：

*   以相等的概率选择每个。这在离散值上是均匀的，但在值之间的实际距离上没有均匀的密度。
*   选择每个概率与其附近可表示值的密度成正比。
*   以相等的概率选择 0、4/16、8/16、12/16 和 1，以在区间内保持相同的粒度。

我怀疑其中的第一个是故意的，我会忽略它。第二个类似于 Steve Jessop 的建议，但仍未完全指定。是否应该以与从它到中点到下一个点的间隔成比例的概率选择 0？（这将给出 1/32 的概率。）或者它是否应该与以它为中心的区间相关联，从 -1/32 到 1/32？（这将给它 1/17 的概率，假设 1 也被分配了一个超出其自身 1/32 的间隔。）

您可能会认为这是一个闭区间，因此它应该在 0 和 1 处停止。但假设我们在某些应用程序中将 [0, 2] 上的分布切分为区间 [0, 1] 和 (1, 2]. 我们希望后两个区间上的分布联合等于前一个区间上的分布。所以我们的分布应该很好地啮合。

第三种情况也有类似的问题。也许，如果我们希望保持这样的粒度，应该以 1/8 的概率选择 0，以 1/4 的概率选择 1/4、1/2 和 3/4 这三个点，以 1/8 的概率选择 1 .

除了指定生成器所需属性的这些问题之外，提问者提出的代码还有一些问题：

*   假设 RAND_MAX+1 是 2 的幂（因此除以它在二进制浮点算术中“很好”），除以 RAND_MAX 或 RAND_MAX+2 可能会导致生成的值出现一些不规则性。其中可能有奇数的量化。

*   当 1/(RAND_MAX+1) ≤ 1/4 ULP(1) 时，RAND_MAX/(RAND_MAX+1) 将四舍五入并返回 1，因为区间为 [0, 1)。（“ULP(1)”表示正在使用的浮点格式中值 1 的最小精度单位。）（在 RAND_MAX 适合有效数字位的 long double 测试中不会观察到这一点，但是例如，当 RAND_MAX 为 2147483647 且浮点类型为 float，其有效数为 24 位时，就会发生这种情况。）

*   乘法`(b-a)`和加法`a`会引入舍入误差，必须评估其后果。有很多情况，例如何时`b-a`小而大`a`，何时跨越零（从而导致 b 附近的粒度损失，即使可以表示更精细的结果）等等。`a``b`

*   (0, 1) 结果的下限是最接近 1/(RAND_MAX+2) 的浮点值。此界限与浮点值的精细度或所需分布无关；它只是rand实现的一个神器。(0, 1/(RAND_MAX+2)) 中的值被省略，没有任何源于问题规范的原因。上端可能存在类似的工件（取决于特定的浮点格式、rand 实现和区间端点，b）。

我提交提问者对这个“简单”问题的答案不满意的原因是它不是一个简单的问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-07T18:06:18.653

首先，在 [a,b] 上生成随机数。要在 [a,b) 上生成随机数，只需在 [a,b] 上生成一个随机数，检查它是否等于 b，如果是，请重试。对于所有其他开区间变体也是如此。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-07T18:10:35.303

在我的脑海中，我只是提供不同浮点和整数类型的所有变体（模板化 C++ 实现的奖励点），我会`rand()`用更好的东西替换（`drand48()`想到）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-07T19:26:30.830

以下是我用来在生成的数字中查找基本错误的（非常粗略的）测试。这并不是要显示生成的数字是好的，而是它们还不错。

```
#include<stdio.h>
#include<stdlib.h>
#include<time.h>

int main(int argc, char *argv[]) {

    long double x1,x2,x3,x4;
    if ( argc!=2 ) {
        printf("USAGE: %s [1,2,3,4]\n",argv[0]);
        exit(EXIT_SUCCESS);
    }

    srand((unsigned int)time(NULL));

    printf("This program simply generates random numbers in the chosen interval\n"
               "and looks for values on the boundary or outside it. When an\n"
               "allowable boundary is found, it reports it. Unexpected \"impossible\"\n"
               "values will be reported and the program will terminte. Under\n"
               "normal circumstances, the program should not terminate. Use ctrl-c.\n\n");

    switch ( atoi(argv[1]) ) {
        case 1:
            /* x1 will be an element of [0,1] */
            printf("NOTE: Testing [0,1].\n");
            while ( 1 ) {
                x1=((long double)rand()/RAND_MAX);
                if ( x1==0 ) {
                    printf("x1=0 ENCOUNTERED.\n");
                } else if ( x1==1 ) {
                    printf("x1=1 ENCOUNTERED.\n");
                } else if ( x1 < 0 ) {
                    printf("x1<0 ENCOUNTERED. Abnormal termination.\n");
                    exit(EXIT_FAILURE);
                } else if ( x1 > 1 ) {
                    printf("x1>0 ENCOUNTERED. Abnormal termination.\n");
                    exit(EXIT_FAILURE);
                }
            }
            break;
        case 2:
            /* x2 will be an element of [0,1) */
            printf("NOTE: Testing [0,1).\n");
            while ( 1 ) {
                x2=((long double)rand()/((long double)RAND_MAX+1));
                if ( x2==0 ) {
                    printf("x2=0 ENCOUNTERED.\n");
                } else if ( x2==1 ) {
                    printf("x2=1 ENCOUNTERED. Abnormal termination.\n");
                    exit(EXIT_FAILURE);
                } else if ( x2 < 0 ) {
                    printf("x2<0 ENCOUNTERED. Abnormal termination.\n");
                    exit(EXIT_FAILURE);
                } else if ( x2 > 1 ) {
                    printf("x2>0 ENCOUNTERED. Abnormal termination.\n");
                    exit(EXIT_FAILURE);
                }
            }
            break;
        case 3:
            /* x3 will be an element of (0,1] */
            printf("NOTE: Testing (0,1].\n");
            while ( 1 ) {
                x3=(((long double)rand()+1)/((long double)RAND_MAX+1));
                if ( x3==1 ) {
                    printf("x3=1 ENCOUNTERED.\n");
                } else if ( x3==0 ) {
                    printf("x3=0 ENCOUNTERED. Abnormal termination.\n");
                    exit(EXIT_FAILURE);
                } else if ( x3 < 0 ) {
                    printf("x3<0 ENCOUNTERED. Abnormal termination.\n");
                    exit(EXIT_FAILURE);
                } else if ( x3 > 1 ) {
                    printf("x3>0 ENCOUNTERED. Abnormal termination.\n");
                    exit(EXIT_FAILURE);
                }
            }
            break;
        case 4:
            /* x4 will be an element of (0,1) */
            printf("NOTE: Testing (0,1).\n");
            while ( 1 ) {
                x4=(((long double)rand()+1)/((long double)RAND_MAX+2));
                if ( x4==0 ) {
                    printf("x4=0 ENCOUNTERED. Abnormal termination.\n");
                    exit(EXIT_FAILURE);
                } else if ( x4==1 ) {
                    printf("x4=1 ENCOUNTERED. Abnormal termination.\n");
                    exit(EXIT_FAILURE);
                } else if ( x4 < 0 ) {
                    printf("x4<0 ENCOUNTERED. Abnormal termination.\n");
                    exit(EXIT_FAILURE);
                } else if ( x4 > 1 ) {
                    printf("x4>0 ENCOUNTERED. Abnormal termination.\n");
                    exit(EXIT_FAILURE);
                }
            }
            break;
        default:
            printf("ERROR: invalid argument. Enter 1, 2, 3, or 4 for [0,1], [0,1), (0,1], and (0,1), respectively.\n");
            exit(EXIT_FAILURE);
    }

    exit(EXIT_SUCCESS);
} 
```

# iphone - 从 iPhone 登录：文件在哪里？

> ID：12323194
> 
> 赞同：0
> 
> 时间：2012-09-07T18:03:43.090
> 
> 标签：iphone, objective-c, ios

我正在尝试通过此代码从我的 iPhone 应用程序在我的 MacOS FS 上创建一个文件

```
 [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) ];
  NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,   NSUserDomainMask, YES);
   NSString *path = [paths objectAtIndex:0];
   path = [path stringByAppendingPathComponent: @"log.txt"];
   NSFileHandle *output = [NSFileHandle fileHandleForWritingAtPath:path];
  if(output == nil) {
    [[NSFileManager defaultManager] createFileAtPath:path contents:nil attributes:nil];
    output = [NSFileHandle fileHandleForWritingAtPath:path];
   } else {
    [output seekToEndOfFile];
  } 
```

我猜代码没问题，因为它在模拟器执行时可以工作。但是，当从 iPhone 执行时，我实际上看不到文件的创建位置。如果我打印我得到的路径

/var/mobile/Applications/XXX-XXXX-XXX-XXX/Documents/log.txt

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T18:26:56.630

在模拟器上，您应该可以在以下位置找到它们：/Users/loginname/Library/Application Support/iPhone Simulator/5.1/Applications/594931F3-B9EF-4B2C-833D-76C2DCC61C6B/Documents。您可以通过选择 Go 菜单项，按住 Option 键，然后选择 Library 来从 Finder 转到此位置。

注意：在上面的路径中填写您自己的登录名和设备 ID。

如果您在设备上，您可以使用 XCode 使用管理器（选择 Window | Organizer）将文件复制到您的 Mac。突出显示应用程序（当然是在它执行之后），并且有一个复制文件的选项。您无法直接访问设备文件系统。

您还可以使用 NSLog()，它只是将调试信息发送到 XCode 中的输出窗口。

编辑：添加了有关如何显示库文件夹的详细信息。

# xml - XPath：获取节点中最后一个兄弟的值

> ID：12323195
> 
> 赞同：2
> 
> 时间：2012-09-07T18:03:45.207
> 
> 标签：xml, xpath, siblings

我正在尝试创建一个用于 MS InfoPath 的 XPath 表达式，以便检索节点中最后一个兄弟的值。（希望我正确地表达了这个问题，因为我几乎没有使用过 XPath）。

我需要识别“RepeaterGroup”节点内“NamesEval”节点的最新实例。假设我会看看“史蒂夫”是否参加了最新的活动；`contains(LatestEvent, "Steve")`我将使用XPath 表达式检查这一点。如何让“LatestEvent”仅加载最新的“NamesEval”值？

```
 <?xml version="1.0" encoding="UTF-8"?><?mso-infoPathSolution solutionVersion="1.0.0.2" productVersion="14.0.0" PIVersion="1.0.0.0" href="file:///C:\Documents%20and%20Settings\Chris\Local%20Settings\Application%20Data\Microsoft\InfoPath\Designer3\db543e141b8f4832\manifest.xsf" ?><?mso-application progid="InfoPath.Document" versionProgid="InfoPath.Document.3"?><my:myFields xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:my="http://schemas.microsoft.com/office/infopath/2003/myXSD/2012-09-07T14:19:10" xmlns:xd="http://schemas.microsoft.com/office/infopath/2003" xml:lang="en-us">
<my:InitialSection>
    <my:InitialField>1</my:InitialField>
    <my:InitialDate>2012-09-14</my:InitialDate>
</my:InitialSection>
<my:RepeaterSection>
    <my:RepeaterGroup>
        <my:RepeaterField>2</my:RepeaterField>
        <my:RepeaterDate>2012-09-15</my:RepeaterDate>
            <my:NamesGroup>
                <my:NamesRepeater>
                    <my:Name>Steve</my:Name>
                </my:NamesRepeater>
                <my:NamesRepeater>
                    <my:Name>Ashley</my:Name>
                </my:NamesRepeater>
                <my:NamesRepeater>
                    <my:Name>Josh</my:Name>
                </my:NamesRepeater>
            </my:NamesGroup>
        <my:NamesEval>Steve;Ashley;Josh;</my:NamesEval>
    </my:RepeaterGroup>
    <my:RepeaterGroup>
        <my:RepeaterField>3</my:RepeaterField>
        <my:RepeaterDate>2012-09-16</my:RepeaterDate>
        <my:NamesGroup>
            <my:NamesRepeater>
                <my:Name>Amanda</my:Name>
            </my:NamesRepeater>
            <my:NamesRepeater>
                <my:Name>Greg</my:Name>
            </my:NamesRepeater>
            <my:NamesRepeater>
                <my:Name>Steve</my:Name>
            </my:NamesRepeater>
            </my:NamesGroup>
        <my:NamesEval>Amanda;Greg;Steve;</my:NamesEval>
    </my:RepeaterGroup>
</my:RepeaterSection> 
```

**编辑和回答**

Choroba 回答了以下问题 - 这是解决方案：`//my:RepeaterGroup[0=count(following-sibling::my:RepeaterGroup)]//my:NamesEval`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-07T18:14:24.053

我不确定我是否理解你的问题。如果您尝试验证最后一个 NamesEval 是否包含字符串“Steve”，则可以使用以下 XPath 表达式：

```
contains((//my:NamesEval)[last()],'Steve') 
```

# ruby-on-rails - Rails DataTable：如何根据 ruby 变量设置 iDisplayLength

> ID：12323196
> 
> 赞同：1
> 
> 时间：2012-09-07T18:03:51.483
> 
> 标签：ruby-on-rails, datatable, coffeescript

我有一个 ruby​​ 变量，其中包含用户希望在表中显示的行数。

我正在使用 dataTable gem 来格式化视图中的表格，并希望将 iDisplayLength 设置为 @user.table_size 变量中包含的值

我的咖啡脚本有

```
jQuery ->
  $('.table').dataTable({
  "sDom": "R<'row-fluid'<'span6'l><'span6'f>r>t<'row-fluid'<'span6'i><'span6'p>>",
  "iDisplayLength": ####PAGE_SIZE_HERE####,
  "bLengthChange": false,
  "sPaginationType": "bootstrap",
  "bStateSave": true
}); 
```

我如何让它选择我的页面大小？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T22:02:31.107

将您的文件重命名为 .js.coffee.erb 然后您可以像往常一样使用 Rails 环境中的变量

```
<%= @user.table_size %> 
```

# coffeescript - 崇高的咖啡脚本评论格式？

> ID：12323197
> 
> 赞同：4
> 
> 时间：2012-09-07T18:03:52.360
> 
> 标签：coffeescript, sublimetext

有谁知道如何（或者如果可能的话）在 Sublime 中格式化 coffeescript 评论？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-07T18:14:01.903

我使用插件[CoffeeScript.tmbundle](https://github.com/jashkenas/coffee-script-tmbundle)在 Sublime Text 2 中提供 CoffeeScript 语法高亮。

您可以通过以下方式将此插件安装到 Sublime Text 2：

**在 Linux 中：**

1.  `cd ~/.config/sublime-text-2/Packages`
2.  `git clone git://github.com/jashkenas/coffee-script-tmbundle.git`

（在 Windows 上，它的`git clone C:\Users\<user>\AppData\Roaming\Sublime Text 2\Packages`）

**结果截图：** ![在此处输入图像描述](../Images/d4c90ef793649026ee16225c81a5088d.png)

# mysql - nullsafe 的解释

> ID：12323204
> 
> 赞同：-2
> 
> 时间：2012-09-07T18:04:33.730
> 
> 标签：mysql, null, comparison

我已经意识到如果 'fk_building' 为空，这两个查询不起作用。我不明白为什么，而且似乎找不到一个好的解释，因为谷歌有点难。有人可以解释为什么地狱！= 3 不返回所有不是 3 的东西吗？？？包括空行？为什么我需要使用 <=> ？

```
update floor set fk_building = 3 where fk_building != 3 and floor_id = 1; 
```

或者

```
select * from floor where fk_building != 3 
```

在 fk_building 为空的情况下不起作用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-07T18:13:16.533

我建议查看[Wikipedia](http://en.wikipedia.org/wiki/Null_%28SQL%29#Common_mistakes)`NULL`上有关价值观的“常见错误”部分。

从条目：

> For example, a WHERE clause or conditional statement might compare a column's value with a constant. It is often incorrectly assumed that a missing value would be "less than" or "not equal to" a constant if that field contains Null, but, in fact, such expressions return Unknown

As users have suggested, you can use a null safe operator if your RDBMS allows it, or check for `IS NULL`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T18:08:45.460

使用 null 安全运算符

```
 update floor set fk_building = 3 where (not fk_building <=> 3) and floor_id = 1; 
```

[http://dev.mysql.com/doc/refman/5.5/en/comparison-operators.html](http://dev.mysql.com/doc/refman/5.5/en/comparison-operators.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T18:07:16.850

与其生气，不如干脆做：

```
update floor set fk_building = 3 where (fk_building != 3 OR fk_building IS NULL) and floor_id = 1; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-07T18:09:59.157

您也可以使用 x <=> 3 来测试两者。

编辑：在你的情况下，它是 'not x <=> 3'

# php - 致命错误：允许的内存大小为 134217728 字节已用尽 - Drupal

> ID：12323212
> 
> 赞同：-1
> 
> 时间：2012-09-07T18:05:19.140
> 
> 标签：php, arrays, drupal

进行 Drupal 更新后，我收到此错误 - 我相信以前的开发人员（愚蠢地）编辑了核心：

```
Fatal error: Allowed memory size of 134217728 bytes exhausted (tried to allocate 74 bytes) in /home/readyby2/public_html/includes/common.inc on line 1408 
```

我相信这与更新视图模块有关。它发生在管理>>人员>>个人资料

你们都可以给我任何线索吗？

我正在检查我的 common.inc，这是第 1408 行及周边：

```
function _filter_xss_split($m, $store = FALSE) {
  static $allowed_html;

  if ($store) {
    $allowed_html = array_flip($m);
    return;
  } 
```

违规行似乎是`$allowed_html = array_flip($m);`

这是完整的功能：

```
function _filter_xss_split($m, $store = FALSE) {
  static $allowed_html;

  if ($store) {
    $allowed_html = array_flip($m);
    return;
  }

  $string = $m[1];

  if (substr($string, 0, 1) != '<') {
    // We matched a lone ">" character.
    return '&gt;';
  }
  elseif (strlen($string) == 1) {
    // We matched a lone "<" character.
    return '&lt;';
  }

  if (!preg_match('%^<\s*(/\s*)?([a-zA-Z0-9]+)([^>]*)>?|(<!--.*?-->)$%', $string, $matches)) {
    // Seriously malformed.
    return '';
  }

  $slash = trim($matches[1]);
  $elem = &$matches[2];
  $attrlist = &$matches[3];
  $comment = &$matches[4];

  if ($comment) {
    $elem = '!--';
  }

  if (!isset($allowed_html[strtolower($elem)])) {
    // Disallowed HTML element.
    return '';
  }

  if ($comment) {
    return $comment;
  }

  if ($slash != '') {
    return "</$elem>";
  }

  // Is there a closing XHTML slash at the end of the attributes?
  $attrlist = preg_replace('%(\s?)/\s*$%', '\1', $attrlist, -1, $count);
  $xhtml_slash = $count ? ' /' : '';

  // Clean up attributes.
  $attr2 = implode(' ', _filter_xss_attributes($attrlist));
  $attr2 = preg_replace('/[<>]/', '', $attr2);
  $attr2 = strlen($attr2) ? ' ' . $attr2 : '';

  return "<$elem$attr2$xhtml_slash>";
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T18:24:02.523

一旦你的记忆结束，这个错误就会发生 - 这可能发生在你的代码中的任何地方，并且不一定属于你在错误消息中显示的脚本和行号。

您的 php 在 php.ini 中需要更多内存，或者您检查脚本是否有不必要的内存使用（通常很大或很多内存数据库记录）。

编辑：您发布的代码没有（愚蠢地）被开发人员更改 - 它仍然是原始的 drupal 代码。

# jquery - 让 ajaxComplete 特定于一个请求

> ID：12323213
> 
> 赞同：0
> 
> 时间：2012-09-07T18:05:24.947
> 
> 标签：jquery, ajax

我将 .ajaxComplete 绑定到一个链接点击事件，我只需要它触发一次。

```
$(document).delegate('.links', 'click', function(evt) {
    evt.preventDefault();
    var origanalUrl = $(this).attr('href');
    var hrefRegEx = /^(^\/?{[A-Za-z\_]*\/?)?([A-Za-z\_]+)(\.php)$/
    var hashUrl2 = origanalUrl.replace(hrefRegEx, '$2');
    var hashUrl = '#' + hashUrl2;
        var urlExt = ' #ajaxTarget';
        var newUrl = origanalUrl + urlExt;
        if(!$(hashUrl).html() && hashUrl != '#index') {
            $(hashUrl).load(newUrl).ajaxComplete(function(event, XMLHttpRequest, ajaxOptions) {
                newMain = $(hashUrl);
                newHeight = newMain.outerHeight();
                alert(newHeight);
                $('#textBox_main').animate({
                    height: newHeight
                    }, 500, function() {
                    newMain.fadeIn(500);
                });
                oldMain = newMain;
            });
        } else {
            isLoaded = true;
        } 
```

第一次点击很好，但每次额外的点击都会在下一次 ajaxComplete 调用时叠加。我该如何防止这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T18:16:10.587

您正在将回调附加到元素 $(hashUrl) 的“ajaxComplete”事件。（第二次单击它时，附加了另一个处理程序，依此类推）

尝试将该回调函数传递给加载。像这样：

```
$(hashUrl).load(newUrl, function(response, status, xhr) {...} ); 
```

# iphone - 与在 iphone 中读取大文件有关的内存和速度问题

> ID：12323216
> 
> 赞同：2
> 
> 时间：2012-09-07T18:05:46.617
> 
> 标签：iphone, xcode, ipad, memory

我想阅读一个包含至少`60k`单词的文件。现在我想`search`知道存储在变量中的单词是否存在于该文件中。

忽略编码，我想知道`memory issues`与此问题相关的内容。如果我将所有这些单词存储在数组中，然后进行比较。将`speed issue`影响`iphone`. 如果有人有更好的方法来做到这一点而不使用`memory and cpu`. 请给我详细信息。

最好的祝福

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T01:57:15.010

如果您只有一个单词列表，那么您可能会得到的最快方法是对文件进行排序，然后对其进行映射。您可以对映射的内存进行二进制搜索，这将非常快。

好消息是您可以将其映射为只读，并且不会导致任何脏内存页面，这确实是您在谈论 iOS 设备上的内存使用时必须担心的问题。

# c# - Button 内的文本格式

> ID：12323217
> 
> 赞同：0
> 
> 时间：2012-09-07T18:05:49.193
> 
> 标签：c#, wpf, xaml

我正在努力在 WPF 按钮上解决一些更精细的布局问题，本质上我是在尝试将按钮内的文本居中？目前我在代码中动态设置了几个按钮，类似于

```
 button1.Content = (option1 != 0.0)
            ? option1.ToString() + "\n"   +  "Centre"
            : string.Empty;
        button2.Content = (option2 != 0.0)
            ? option2.ToString() + "\n"   + "Quite"
            : string.Empty;
        button3.Content = (option3 != 0.0)
            ? option.ToString() + "\n" + "Not"
            : string.Empty; 
```

在 XAML 中，垂直和水平内容对齐都是中心？

```
<Button Height="30" HorizontalAlignment="Left" Margin="254,0,0,0" Name="button1"
     VerticalAlignment="Top" Width="50" Click="button_Click" 
    HorizontalContentAlignment="Center" VerticalContentAlignment="Center" FontSize="10"
       FontStretch="SemiCondensed"/> 
```

但这并没有给我想要的布局，（见下文）

![在此处输入图像描述](../Images/849b056105a75c401e028bd455ac29e4.png)

1.  如何使顶部的值居中和底部的文本居中？

2.  如果我希望底部文本的字体大小为 10**粗体**，顶部的字体大小为正常 14 - 我该怎么做？

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T18:29:08.797

我认为最简单的方法是在按钮内使用两个文本块并设置数据绑定。

```
<Window x:Class="WpfApplication1.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="350" Width="525">
<StackPanel Orientation="Horizontal" TextBlock.TextAlignment="Center" >
    <Button Height="50" Width="80">
        <StackPanel>
            <TextBlock Text="{Binding Text1}" FontSize="14"  />
            <TextBlock Text="{Binding Text2}" FontSize="10"  FontWeight="Bold"/>
        </StackPanel>
    </Button>
</StackPanel> 
```

```
public partial class MainWindow : Window
{
     public string Text1 { get; set; }
    public string Text2 { get; set; }

    public MainWindow()
    {
        InitializeComponent();
        Text1 = "10";
        Text2 = "TEST Test";
        DataContext = this;
    }
} 
```

如果你还不知道这个模式，也请阅读 MVVM / INotifyPropertychanged 教程（因为我的例子没有实现这个接口，如果你改变一个 TextX 属性按钮的内容不会刷新）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T20:37:09.077

```
 <StackPanel Visibility="{Binding Path=Option1, Converter={StaticResource myDoubleToVisibilityConverter}}">
        <TextBlock HorizontalAlignment="Center" Text="{Binding Path=Option1}"/>
        <TextBlock HorizontalAlignment="Center" Text="Center" />
    </StackPanel> 
```

您现在不需要在代码中设置文本。只需实现*myDoubleToVisibilityConverter*和*INotifyPropertyChanged*接口

在这种情况下，直接设置 Button 的内容是对 WPF 意识形态的某种违反。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T18:25:41.550

尝试使用此代码 (\r\n)

```
 button1.Content = (option1 != 0.0)
            ? option1.ToString() + "\r\n"   +  "Centre"
            : string.Empty; 
```

你也可以使用`Environment.NewLine`

# ruby-on-rails - (ruby on rails) page.call 当数据具有国际字符时不调用 javascript

> ID：12323218
> 
> 赞同：1
> 
> 时间：2012-09-07T18:05:55.587
> 
> 标签：ruby-on-rails

我是 ruby​​ 的新手，正在着手一个 rails 项目，并且看到了一些奇怪的东西。

我有一个控制器操作，它在使用 page.call 时不调用 javascript 函数，但它仅在参数数据包含国际字符时才会这样做。如果我修复数据，它会按预期工作。

这是我在 ruby​​ 中所做的事情：

```
class MyProblemController < ApplicationController

    def view
        arg1 = ["This", "is", "fine"]
        arg2 = ["Data", "datum", "datums"]
        arg3 = ["Good", "Bäd", "Ũgly"]

        render :update do|page|
          page.call("myJavascriptFunction", arg1, arg2, arg3)
        end
    end 
```

在网页上，我可以在“myJavascriptFunction”中设置一个断点，它永远不会被调用。如果我删除带有变音符号的字符，它就可以正常工作。

作为一个 ruby​​ n00b，这是令人困惑的。这里发生了什么？我怎样才能使它支持国际字符？

我确实在我的 controller.rb 文件顶部尝试了神奇的注释“# encoding: UTF-8”，它没有任何区别，以防万一。

谢谢！

编辑：应用程序正在使用 rails 2.3.2，我无法更改它。正在使用 1.6.0.3 的原型.js

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T06:33:48.437

您可以尝试`page.call << "myJavascriptFunction(#{arg1},#{arg2},#{arg3})"`更多信息，您可以在[此处](http://tempe.st/2007/08/rails-and-javascript-pagecall-gotchas/)找到。

# android - 为什么 PagerAdapter 的 restoreState() 和 saveState() 不起作用？

> ID：12323226
> 
> 赞同：5
> 
> 时间：2012-09-07T18:06:40.623
> 
> 标签：android, android-viewpager

我试图`ViewPager`通过在其`PagerAdapter`:`restoreState()`和`saveState()`. 但是，在我的情况下，它们似乎无法正常工作。我做错了什么？

```
@Override
public Parcelable saveState() {

Bundle bundle = new Bundle();
bundle.putParcelable("instanceState", super.saveState());
bundle.putInt("stateToSave", position);
return bundle;
}

@Override
public void restoreState(Parcelable state, ClassLoader c) {
if (state instanceof Bundle) {
  Bundle bundle = (Bundle) state;
  position = bundle.getInt("stateToSave");
  super.restoreState(bundle.getParcelable("instanceState"), c);
  return;
}
super.restoreState(state, c);
} 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2015-10-26T12:50:44.907

您是否尝试使用 ViewPager 中的 onSaveInstanceState 方法？在您的 Activity/Fragment 中，您可以通过调用此方法保存 ViewPager 的状态并将结果传递给 Bundle。

使用重建 Activity/Fragment 调用 onRestoreInstanceState(Parcelable p) 后

# ruby-on-rails - 使用 rails-composer，根据构建器版本获取错误

> ID：12323232
> 
> 赞同：2
> 
> 时间：2012-09-07T18:07:01.043
> 
> 标签：ruby-on-rails, railsapps

我正在尝试使用[rails-composer](https://github.com/RailsApps/rails-composer)来启动一个项目。在 composer 安装 gems 之后，我得到一个错误并且脚本停止。这是错误：

```
Your bundle is complete! Use `bundle show [gemname]` to see where a bundled gem is installed.
    composer  Running 'after bundler' callbacks.
The template [https://raw.github.com/RailsApps/rails-composer/master/composer.rb] could not be loaded. Error: You have already activated builder 3.0.0, but your Gemfile requires builder 3.0.2\. Using bundle exec may solve this. 
```

我不确定如何使用 bundle exec 来解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T18:09:13.697

在命令行中执行此操作

```
 gem install builder --version '3.0.2' 
```

& 然后尝试使用 rails-composer

# jquery - Apple 移动 Web 应用程序 CSS 问题

> ID：12323242
> 
> 赞同：0
> 
> 时间：2012-09-07T18:07:42.387
> 
> 标签：jquery, web-applications

我目前有一个网站，我正在尝试将其用作网络应用程序。

我已经添加了适当的元标记，`<meta name="apple-mobile-web-app-capable" content="yes">`它像宣传的那样工作。

唯一的问题是，当您将网站作为 Web 应用程序启动时，我拥有的 jQuery 计时器中的某些 CSS 无法正确显示。数字加载时没有颜色，一旦它们开始旋转，就会出现正确的颜色。您可以从屏幕截图中看到这一点。

关于为什么会发生这种情况的任何想法？仅当您将其作为 Web 应用程序启动时才会发生这种情况。

这是一个演示，[http://jako.in/countdown/](http://jako.in/countdown/)

![截屏](../Images/895d490151a9dc8d3b4a05a4d6baddca.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T18:22:10.330

所以我最终找到了解决方案。打开 apple-mobile-web-app-capable 会导致 Safari 将该计时器视为电话号码。这就是为什么它把它变成另一种颜色。添加`<meta name="format-detection" content="telephone=no" />`解决了我的问题。

# selenium - 使用非标准标签在 Selenium IDE 中存储值

> ID：12323245
> 
> 赞同：0
> 
> 时间：2012-09-07T18:07:59.687
> 
> 标签：selenium, selenium-ide

我需要为其编写硒测试的 HTML 文档中有一个非标准标签。

这是标签：`<evo:password>SomeText</evo:password>`

我正在尝试我的 selenium ide 命令：

```
Command: storeEval
Target: xpath=/x:html/x:body/x:div/x:div[1]/x:div[2]/x:div/x:div/x:table/x:tbody/x:tr[2]/x:td[2]/x:strong/x:evo:password
Value: adminPass 
```

不确定我需要什么作为我的目标才能让它工作并在我的标签之间存储值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T03:41:58.580

我必须用我的选择器发挥创意。我最终使用了一个 CSS 选择器并获得了最后一个元素。

```
css=strong:last 
```

我相信您也可以`:nth-child`在其他自然 CSS 选择器中使用。

# ruby - 将对象传递给方法时会创建/引用什么内存？

> ID：12323248
> 
> 赞同：0
> 
> 时间：2012-09-07T18:08:07.687
> 
> 标签：ruby, memory-management

> **可能重复：**
> [Ruby 是按引用传递还是按值传递？](https://stackoverflow.com/questions/1872110/is-ruby-pass-by-reference-or-by-value)

使用 Ruby，将对象传递给方法时，该对象的内存是如何处理的？

来自 C 背景，我可以想到可能发生的几件事：

1.  与相应对象关联的内存副本，可供被调用的方法使用。在这种情况下，对象的修改只会反映在被调用方法的上下文中，而*不是*调用方法。

2.  对对象内存的引用被传递给被调用的方法（本质上是一个指针）。因此，对象通过被调用的方法或调用方法所做的任何更改都将反映在两个上下文中。同样，如果该程序是多线程的，则必须使用某种机制（互斥量、信号量等）来确保对执行写入操作的内存的互斥访问。

3.  还有一些我想不出来的东西……也许是类似于[Go](http://golang.org/ref/mem)的内存模型……管道……消息传递……？

实际发生了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T18:19:22.387

Ruby 使用您的第二个选项，通过引用传递参数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T23:38:41.703

Ruby 使用按值传递，或者更准确地说，是按值传递的一种特殊情况，其中传递的值*始终*是一个指针。这种特殊情况有时也称为共享调用、对象共享调用或对象调用。

几乎所有创建的面向对象语言都使用相同的约定。

注意：在所有现有的 Ruby 实现`Symbol`中，`Fixnum`s 和`Float`s 实际上是*直接*按值传递的，而*不是*使用中间指针。但是，由于这三个是不可变的，在这种情况下，按值传递和按对象调用共享之间没有可观察到的行为差异，因此您可以通过简单地将*所有内容*视为按对象调用来大大简化您的思维模型-分享。只需将这三种特殊情况解释为您无需担心的内部编译器优化即可。

这是一个简单的示例，您可以运行它来确定 Ruby（或任何其他语言，在您翻译后）的参数传递约定：

```
def is_ruby_pass_by_value?(foo)
  foo.replace('More precisely, it is call-by-object-sharing!')
  foo = 'No, Ruby is pass-by-reference.'
  return nil
end

bar = 'Yes, of course, Ruby *is* pass-by-value!'

is_ruby_pass_by_value?(bar)

p bar
# 'More precisely, it is call-by-object-sharing!' 
```

简而言之：这是您的选择 2。

# zlib - Brew Doctor：dyld：未加载库和错误：zlib 没有可用的公式

> ID：12323252
> 
> 赞同：40
> 
> 时间：2012-09-07T18:08:40.467
> 
> 标签：zlib, homebrew, dylib, dyld

当我`brew doctor`收到以下错误时：

```
dyld: Library not loaded: /usr/lib/libltdl.7.dylib
  Referenced from: /usr/local/bin/php
  Reason: image not found
Error: No available formula for zlib 
```

该文件`libltdl.7.dylib`不在我的 /usr/lib 目录中，但还有其他几个`.dylib`文件。

我正在运行 10.8.1 并安装了最新版本的 Xcode (4.4.1) 及其命令行工具。

知道如何解决这些错误吗？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2013-07-20T10:18:23.953

尝试通过以下方式重新安装 libtool：

```
brew reinstall libtool --universal && brew unlink libtool && brew link libtool 
```

如果这没有帮助，请尝试完全删除 libtool，然后重试上述步骤：

```
brew uninstall libtool 
```

* * *

如果在尝试上述步骤后仍然无法正常工作，请检查您是否在系统某处定义了**DYLD_FALLBACK_LIBRARY_PATH**变量（例如 ~/.profile），并在再次尝试上述步骤之前尝试取消设置。

* * *

其他可能有助于识别问题的命令：

```
$ libtool --version
$ whereis libtool
$ set | grep DYLD_FALLBACK_LIBRARY_PATH
$ echo $DYLD_FALLBACK_LIBRARY_PATH 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-30T18:47:29.290

对我来说，它适用于：

```
sudo ln -s /usr/local/Cellar/libtool/2.4.2/lib/libltdl.7.dylib /usr/local/lib/libltdl.7.dylib 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2016-07-09T13:10:09.620

如果您对 pcre 有这样的错误：

```
dyld: Library not loaded: /usr/local/opt/pcre/lib/libpcre.1.dylib
  Referenced from: /usr/local/Cellar/watchman/4.7.0/libexec/bin/watchman
  Reason: image not found
Abort trap: 6 
```

你需要链接pcre。

```
brew link --overwrite pcre 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-09-11T12:03:16.463

尝试：

```
brew tap homebrew/dupes 
```

见：[https ://github.com/josegonzalez/homebrew-php/pull/219](https://github.com/josegonzalez/homebrew-php/pull/219)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-02-19T10:28:57.547

它们都不起作用我个人像这样重新安装了Watchman：

```
brew uninstall watchman
brew reinstall watchman 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-05-05T06:31:18.083

以下对我有用：

```
brew uninstall --ignore-dependencies node
brew install node 
```

在这篇文章中找到了提示：[https ://goulet.dev/posts/node-dyld-library-not-loaded-icu4c/](https://goulet.dev/posts/node-dyld-library-not-loaded-icu4c/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-04-20T13:00:39.347

```
xcode-select --install
ruby -e "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)"
brew install pcre
brew install libtool 
```

就是这样。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-08-15T03:27:18.187

就我而言，我用这个链接的文件解决了这个问题：

```
ln -s /usr/local/Cellar/jpeg/8d/lib/libjpeg.8.dylib /usr/local/opt/jpeg/lib/libjpeg.8.dyli 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2014-05-07T00:52:24.827

kenorb 的响应对我有用 + 为安全措施提供了一些额外的功能： brew update freetype 没有符号链接，所以： brew link freetype 我尝试过的各种其他解决方案：

```
brew remove imagemagick
brew link jpeg libpng
brew install imagemagick
brew install libtiff
brew uninstall libtool
brew reinstall libtool --universal && brew unlink libtool && brew link libtool 
```

如果我发现这很有可能不是所有必要的

```
brew uninstall libtool
brew reinstall libtool --universal && brew unlink libtool && brew link libtool 
```

第一的。但我想我会发布我的完整过程，以防有人遇到问题

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2016-03-19T14:22:06.603

对我来说，我需要修复 XQuartz，因为 brew doctor 也问我：

警告：您的 XQuartz (2.7.6) 已过时请安装 XQuartz 2.7.8： [https ://xquartz.macosforge.org](https://xquartz.macosforge.org)

在那之后它起作用了。

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2016-08-11T00:31:18.660

我在安装 AFNI 的过程中遇到了同样的错误。[按照此处](https://afni.nimh.nih.gov/afni/community/board/read.php?1,149775,150178#msg-150178%22here%22)的建议安装 PyQt，修复了由 OSX 10.11 兼容性导致的问题。

```
brew install pyqt 
```

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2017-02-22T11:23:00.177

我有： `% neato dyld: Library not loaded: /usr/lib/libltdl.7.dylib Referenced from: /Users/me/Documents/dev/anaconda/bin/neato Reason: image not found zsh: abort neato`

修复是 `% echo $DYLD_FALLBACK_LIBRARY_PATH /Users/me/anaconda/lib:/usr/lib % export DYLD_FALLBACK_LIBRARY_PATH=$DYLD_FALLBACK_LIBRARY_PATH:/usr/local/lib`

（然后将导出添加到一个`.bashrc`或类似的）。

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2018-11-14T07:22:35.473

第一的 ：

```
brew uninstall libffi 
```

然后 ：

```
brew install libffi 
```

* * *

## 回答 #14

> 赞同：-1
> 
> 时间：2020-09-25T20:46:05.377

就我而言，我有

```
dyld: Library not loaded: /usr/local/opt/python/Frameworks/Python.framework/Versions/3.7/Python
  Referenced from: /usr/local/Cellar/macvim/8.2-162/MacVim.app/Contents/MacOS/Vim
  Reason: image not found 
```

`brew unlink python && brew link python` 和繁荣，固定。

# sql-server-2008 - 已安装 SQL Server 2008 - SQL Server 代理已禁用 - 如何解决此问题？

> ID：12323253
> 
> 赞同：3
> 
> 时间：2012-09-07T18:08:42.900
> 
> 标签：sql-server-2008

我认为我的 microsoft sql server 数据库无法访问，因为 SQL server 代理已禁用且无法启动。我该如何解决这个问题？

上传到小图片失败。我将手动键入列 - 对于 SQL Server 代理 - 状态 - 停止运行，启动模式 - 其他（启动、系统、禁用或未知），登录为 - NT AUTHORITY\NETWORK SERVICE。对于 SQL Server Browser - 状态 - 运行，启动模式 - 自动，登录为 - NT AUTHORITY\LOCAL SERVICE。对于 SQL Server 代理 - 状态 - 运行、启动模式 - 自动、登录为 - LocalSystem

PS-

感谢 Stack 不让我发布图片！请添加更多类似的功能:)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-07T18:42:30.653

如果它被禁用，请转到控制面板->管理工具->服务，然后查找 SQL Server 代理。右键单击，然后选择“属性”。从“启动类型”下拉列表中，将“禁用”更改为“自动”。

**注释中的澄清：** “SQL Server 代理”服务必须与“SQL Server”*数据库*进程区分开来。前者运行作业，执行监视任务，诸如此类的事情，但它本身不应该阻止“SQL Server”运行或允许连接。如果您注意到 SQL Server 服务正在运行（*而不是*“Sql Server 代理”）并且无法连接到它，则可能是其他原因，例如防火墙，或者以某种方式阻止连接的错误配置。

如果您注意到 SQL Server 服务未运行且不会启动，则您应该在事件日志中研究更广泛的配置问题。

# c - 使用 wchar.h 比较 UTF-8 字符时遇到问题

> ID：12323256
> 
> 赞同：4
> 
> 时间：2012-09-07T18:08:48.310
> 
> 标签：c, utf-8, widechar

我正在制作一个小程序来读取一个文件，该文件包含 UTF-8 元素，一个字符一个字符。读取一个字符后，它将它与其他几个字符进行比较，如果匹配，它将文件中的字符替换为下划线“_”。

（嗯，它实际上复制了那个文件，用下划线替换了特定的字母。）

我不确定我到底在哪里搞砸了，但它很可能无处不在。

这是我的代码：

```
 FILE *fpi;
   FILE *fpo;
   char ifilename[FILENAME_MAX];
   char ofilename[FILENAME_MAX];
   wint_t sample;

   fpi = fopen(ifilename, "rb");
   fpo = fopen(ofilename, "wb");

   while (!feof(fpi)) {
     fread(&sample, sizeof(wchar_t*), 1, fpi);

     if ((wcscmp(L"ά", &sample) == 0) || (wcscmp(L"ε", &sample) == 0)  ) {
   fwrite(L"_", sizeof(wchar_t*), 1, fpo);

     } else {
       fwrite(&sample, sizeof(wchar_t*), 1, fpo);

     }
   } 
```

我省略了与文件名生成有关的代码，因为它对案例没有任何帮助。这只是字符串操作。

如果我给这个程序提供一个包含`γειά σου κόσμε.`我希望它返回的单词的文件： `γει_ σου κόσμ_.`

搜索互联网并没有太大帮助，因为大多数结果非常笼统或谈论关于 UTF-8 的完全不同的事情。就像没有人出于某种原因需要操纵单个字符。

任何指出我正确方法的东西都是最受欢迎的。我不一定要寻找我提交的代码的简单固定版本，如果有任何有见地的评论帮助我理解 wchar 机制的工作原理，我将不胜感激。整个 wbyte、wchar、L、no-L，对我来说都是一团糟。

预先感谢您的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-07T19:13:58.093

C 有两种不同的字符：*多字节字符*和*宽字符*。

*多字节字符*可以占用不同数量的字节。例如，在 UTF-8（Unicode的*可变长度编码*`a`）中，占用 1 个字节，而`α`占用 2 个字节。

*宽字符*总是占用相同的字节数。此外，a`wchar_t`必须能够保存执行字符集中的任何单个字符。因此，当使用 UTF-32 时，两者都`a`占用`α`4 个字节。不幸的是，一些平台是`wchar_t`16 位宽的：这样的平台不能正确支持 BMP 以外的字符，使用`wchar_t`. 如果`__STDC_ISO_10646__`已定义，则`wchar_t`保存 Unicode 代码点，因此必须（至少）4 个字节长（从技术上讲，它必须至少为 21 位长）。

因此，在使用 UTF-8 时，您应该使用存储在普通变量中的*多字节字符*（但要注意，它计算*字节*，而不是*多字节字符*）。`char``strlen()`

 **不幸的是，Unicode 的意义远不止于此。

`ά`可以表示为单个 Unicode 代码点，也可以表示为两个单独的代码点：

*   `U+03AC GREEK SMALL LETTER ALPHA WITH TONOS`← 1 个代码点 ← 1 个多字节字符 ← 2 个字节 ( `0xCE 0xAC`) = 2 `char`。
*   `U+03B1 GREEK SMALL LETTER ALPHA` `U+0301 COMBINING ACUTE ACCENT`← 2 个代码点 ← 2 个多字节字符 ← 4 个字节 ( `0xCE 0xB1 0xCC 0x81`) = 4个`char`。
*   `U+1F71 GREEK SMALL LETTER ALPHA WITH OXIA`← 1 个代码点 ← 1 个多字节字符 ← 3 个字节 ( `0xE1 0xBD 0xB1`) = 3个`char`。

以上所有内容都是规范的等价物，这意味着它们在所有方面都应被视为平等。因此，您应该使用 Unicode 标准化算法之一（有 4 种：NFC、NFD、NFKC、NFKD）对输入/输出字符串进行标准化。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-07T18:10:55.160

首先，请务必花时间阅读这篇精彩的文章，其中解释了 UTF8 与 Unicode 以及许多其他关于字符串和编码的重要内容：http: [//www.joelonsoftware.com/articles/Unicode.html](http://www.joelonsoftware.com/articles/Unicode.html)

您在代码中尝试执行的操作是以*unicode*字符逐个字符读取的，并与它们进行比较。如果输入流是 UTF8，这是行不通的，而且完全不可能使用这种结构。

简而言之：完全 unicode 字符串可以通过多种方式进行编码。其中一个是使用一系列大小相同的“宽”字符，每个字符一个。这就是`wchar_t`类型（有时是 WCHAR）的用途。另一种方法是 UTF8，它使用*可变*数量的原始字节对每个字符进行编码，具体取决于字符的值。

UTF8 只是一个字节流，可以编码一个 unicode 字符串，在文件中常用。它与 WCHAR 字符串不同，后者是更常见的内存表示形式。您不能可靠地戳穿 UTF8 流，并直接在其中进行字符替换。您需要读入整个内容并对其进行解码，然后遍历产生的 WCHAR 进行比较和替换，然后将该结果映射回 UTF8 以写入输出文件。

在Win32上，使用[MultiByteToWideChar](http://msdn.microsoft.com/en-us/library/windows/desktop/dd319072%28v=vs.85%29.aspx)进行解码，可以使用对应的[WideCharToMultiByte](http://msdn.microsoft.com/en-us/library/windows/desktop/dd374130%28v=vs.85%29.aspx)返回。

当您使用`"string literal"`带有常规引号的 a 时，您正在创建一个以 nul 结尾的 ASCII 字符串 ( `char*`)，它不支持 Unicode。`L"string literal"`带有前缀的将`L`创建一个以 nul 结尾的 WCHAR (wchar_t *) 字符串，您可以在字符串或字符比较中使用它。L 前缀也适用于单引号字符文字，如下所示：`L'ε'`

* * *

正如评论者所指出的，当您使用 fread/fwrite 时，您应该使用`sizeof(wchar_t)`而不是其指针类型，因为您尝试读取/写入的量是实际的 wchar，而不是指向 wchar 的指针的大小。该建议只是独立于上述内容的代码反馈——无论如何，您不希望逐个字符地读取输入。

还要注意，当您进行字符串比较 ( `wcscmp`) 时，您应该使用实际的宽字符串（以 nul 宽字符结尾）——不要使用内存中的单个字符作为输入。如果（何时）您想要进行字符到字符的比较，您甚至不需要使用字符串函数。由于 WCHAR 只是一个值，因此您可以直接比较：`if (sample == L'ά') {}`.**

# mysql - Mysql 5.5 Innodb 慢插入查询问题

> ID：12323262
> 
> 赞同：3
> 
> 时间：2012-09-07T18:09:12.600
> 
> 标签：mysql

我有一个存储过程，它在临时表中插入大约 3K 行。这个 SP 过去在 Mysql 5.1（Windows 桌面）上需要 3 秒，相同的 SP 在 Mysql 5.5 上需要大约 2 分钟。

我尝试了很多事情，例如通过更改 innodb_buffer_pool_size 等来优化 innodb，但没有任何效果，然后我在 stackoverflow 上阅读了一些内容，解决了我的问题。

```
START TRANSACTION; 
CALL sp();
COMMIT; 
```

上面的代码解决了这个问题，现在我回到了 3 秒的执行时间。有人可以告诉我这里到底发生了什么。为什么我必须在 5.5 中添加启动事务才能快速执行？为什么我在 5.1 中不需要这个

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T07:55:22.827

我猜这是由于自动提交被运行禁用

```
START TRANSACTION; 
```

您可以通过手动禁用自动提交来验证它，然后运行您的 proc。

```
SET autocommit=0; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T06:54:04.720

我在 mysql.ini 文件中添加了以下行

```
innodb_flush_log_at_trx_commit=0 
```

它似乎已经解决了这个问题，程序现在运行得很快。理想情况下，innodb_flush_log_at_trx_commit 应该为 1 以符合 ACID。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T02:59:57.787

当您在 InnoDB 表中插入一行时，MySQL 会构建 primary_key 并更新该行的索引。这是针对每一行完成的，并且会大大减慢您的插入速度。通过将它们包装在事务中，您实际上是在强制它首先插入所有行，然后一次性重建键和索引。因此性能增益。

# c# - 不支持的 URI 格式：在 c# 中从 Web 客户端下载远程文件时

> ID：12323269
> 
> 赞同：0
> 
> 时间：2012-09-07T18:09:31.583
> 
> 标签：c#, winforms, uri, webclient

我正在尝试从服务器下载文件。在将链接传递给下载文件时，它会引发错误

**不支持URI格式**并指向“链接” - 字符串包含服务器文件地址

```
string link =
    http:\\www.nse-india.com\DERIVATIVES\2012\AUG\fo22AUG2012bhav.csv.zip

          WebClient wc = new WebClient();

        var ua = "Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.2; .NET CLR 1.0.3705;)";
        wc.Headers.Add(HttpRequestHeader.UserAgent, ua);
        wc.Headers["Accept"] = "/"; 
```

下载代码是这样的

```
 try
  {
   wc.DownloadFile(@link, "H:\\ZipTest\\ZipText\\nt.zip"); // Here Showing error
  _status = true;
   fileCount++;

  } catch (Exception ex)

  {
    MessageBox.Show(ex.Message);
    _status = false;
    } 
```

如果我在网络浏览器中使用相同的地址，它可以正确下载，或者如果替换一些其他文件，那么我也可以只从相同的代码下载我遇到问题的这个特定文件，知道吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T18:11:09.267

您的网址已损坏： `http:\www.nse-indi.......`。它应该是这样的`http://www.nse-india.com/DERIVATIVES/2012/AUG/fo22AUG2012bhav.csv.zip`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T18:11:59.100

网址需要少量修改

改变

```
string link =
    "http:\www.nse-india.com\DERIVATIVES\2012\AUG\fo22AUG2012bhav.csv.zip" 
```

到

```
string link =
    "http://www.nse-india.com/DERIVATIVES/2012/AUG/fo22AUG2012bhav.csv.zip" 
```

# mapreduce - 映射器 output.collect()？

> ID：12323274
> 
> 赞同：0
> 
> 时间：2012-09-07T18:09:47.453
> 
> 标签：mapreduce

映射器调用了这两次。

```
out.collect(new Text("Car"),new Text("Subaru");
out.collect(new Text("Cr-v"),new Text("Honda"); 
```

`reduce()`还会被调用两次吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T03:15:18.503

我假设你在谈论`OutputCollector.collect(K,V)?`

`reduce()`为每个 [key, (list of values)] 对调用一次。为了解释，假设你打电话给：

```
out.collect(new Text("Car"),new Text("Subaru");
out.collect(new Text("Car"),new Text("Honda");
out.collect(new Text("Car"),new Text("Ford");
out.collect(new Text("Truck"),new Text("Dodge");
out.collect(new Text("Truck"),new Text("Chevy"); 
```

然后`reduce()`将与对被调用两次

```
reduce(Car, <Subaru, Honda, Ford>)
reduce(Truck, <Dodge, Chevy>) 
```

因此，在您的示例中，是的，该函数`reduce()`将被调用两次。我希望这会有所帮助。

# php - Drupal 自定义节点添加表单

> ID：12323278
> 
> 赞同：0
> 
> 时间：2012-09-07T18:09:58.183
> 
> 标签：php, drupal, module

我正在创建一个自定义模块，该模块允许用户创建与项目相关的私有博客文章。所以我创建了一个名为“tasker_blog”的新内容类型，它只有一个标题和正文。用户去查看他们的项目并单击一个链接，该链接将他们带到 'tasker_project/%/blog'% 作为项目的 id。我的表单正确显示，但是当我提交表单时，我遇到了两个问题，1) 提交时标题丢失 2) 收到此错误：EntityMalformedException: Missing bundle property on entity of type node。在 entity_extract_ids() 中。

这是我写的代码（去掉了一些不相关的部分）。

```
function tasker_project_menu() {
    $items = array();

    $items['tasker_project/%/blog'] = array(
        'title' => 'Private Blog Post',
        'page callback' => 'drupal_get_form',
        'page arguments' => array('tasker_project_blog_form',1),
        'access arguments' => array('view tasker projects'),
        'type' => MENU_CALLBACK,
    );

    return $items;
}

function tasker_project_blog_form($form, &$form_state) {
    drupal_add_css(drupal_get_path('module', 'tasker_project') . '/tasker_project.css'); 
    global $user;
    module_load_include('inc', 'node', 'node.pages');
    $node = (object) array(
        'uid' => $user->uid,
        'name' => (isset($user->name) ? $user->name : ''),
        'type' => 'tasker_blog',
        'language' => 'und',
    );
    node_object_prepare($node);

    $form = drupal_get_form('tasker_blog_node_form',$node);
    $form['hidden_project_id'] = array(
        '#type' => 'hidden',
        '#value' => arg(1),
    );

    return $form;
} 
```

如果我提交时没有添加任何其他内容，我会收到上面提到的错误。如果我添加这个（使用 Kint 显示变量）：

```
function tasker_project_node_validate($node, $form, &$form_state) {
    s($_REQUEST);
    s($form_state['values']);
    die();
} 
```

$_REQUEST 数组输出：

```
array (9) (
    'title' => string (4) "test"
    'body' => array (1) (
        'und' => array (1) (
             array (2) (
                'format' => string (13) "filtered_html"
                'value' => string (13) "<p>test</p>
"
            )
        )
    )
    'changed' => string (0) ""
    'form_build_id' => string (48) "form-eKWwyFlBOzi4LsajaAiEZBG7J0uOSI1UDVIhiDomeJE"
    'form_token' => string (43) "N421-IiWecixBJGbxTHGcJAIrd6ZutzAW0LAtVSsrJ4"
    'form_id' => string (24) "tasker_project_blog_form"
    'hidden_project_id' => string (2) "10"
    'additional_settings__active_tab' => string (0) ""
    'op' => string (4) "Save"
) 
```

$form_state['values'] 数组输出：

```
array (27) (
    'nid' => NULL
    'vid' => NULL
    'uid' => string (1) "5"
    'created' => integer 1347038959
    'type' => string (11) "tasker_blog"
    'language' => string (3) "und"
    'changed' => string (0) ""
    'title' => string (0) ""
    'additional_settings__active_tab' => string (0) ""
    'revision' => bool FALSE
    'log' => string (0) ""
    'name' => string (10) "ndenlinger"
    'date' => string (0) ""
    'status' => integer 0
    'promote' => integer 0
    'sticky' => integer 0
    'submit' => string (4) "Save"
    'preview' => string (7) "Preview"
    'body' => array (1) (
        'und' => array (1) (
             array (3) (
                'summary' => string (0) ""
                'format' => string (13) "filtered_html"
                'value' => string (13) "<p>test</p>
"
            )
        )
    )
    //...MORE HERE REMOVED SINCE NOT RELEVANT
) 
```

所以我不确定这两个问题是否相关。保存节点后，我将向存储 nid 和 project_id 的自定义表添加一行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T15:10:03.117

如果其他人遇到此问题，请找到解决方案：

```
 drupal_add_css(drupal_get_path('module', 'tasker_project') . '/tasker_project.css'); 
    global $user;
    module_load_include('inc', 'node', 'node.pages');
    $node = (object) array(
        'uid' => $user->uid,
        'name' => (isset($user->name) ? $user->name : ''),
        'type' => 'tasker_blog',
        'language' => 'und',
    );
    node_object_prepare($node);
    $form_state['build_info']['args'] = array($node);

    $form = drupal_retrieve_form('tasker_blog_node_form', $form_state);
    drupal_prepare_form('tasker_blog_node_form', $form, $form_state);
    $form['hidden_project_id'] = array(
        '#type' => 'hidden',
        '#value' => arg(1),
    ); 
```

我使用了 drupal_retrieve_form 和 drupal_prepare_form，现在一切似乎都正常了。不知道为什么 drupal_build_form 或 drupal_get_form 不能正常工作。

# wpf - TreeView HierarchicalDataTemplate 绑定

> ID：12323282
> 
> 赞同：2
> 
> 时间：2012-09-07T18:10:09.607
> 
> 标签：wpf, data-binding, treeview, datacontext, hierarchicaldatatemplate

我有一个包含 ObservableCollection 的类 SceneNode。我希望整个树都显示出来，但是我似乎无法让它与数据绑定一起使用。如果我只是将根添加到树项中，一切都会完美运行。

```
class SceneNode
{
    public string Name {get;set;}
    public ObserveableCollection<SceneNode> ChildrenNodes{get;set;}
    ....
}
class Scene
{
    public SceneNode Nodes{get;set;}
} 
```

所以我将场景绑定到树数据上下文，以下是我的树 xaml

```
<TreeView MinHeight="250" ItemsSource={Binding Path=Nodes} >
    <TreeView.ItemTemplate>
                <HierarchicalDataTemplate DataType="{x:Type local:SceneNode}" ItemsSource="{Binding Path=ChildSceneNodes, UpdateSourceTrigger=PropertyChanged}">
                    <TextBlock Text="{Binding Path=Name, UpdateSourceTrigger=PropertyChanged}" Margin="0,10,0,10" />
                </HierarchicalDataTemplate>                
            </TreeView.ItemTemplate>
</TreeView> 
```

在显示带有树的控件之前，我在幕后绑定了它的数据上下文

```
sceneTree.Tree.DataContext = theScene; 
```

什么都没有显示，但是如果我不绑定数据

```
sceneTree.Tree.Items.Add( theScene.Nodes ); 
```

树将显示，我可以添加和删除节点，此活动反映在 TreeView 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T19:55:12.737

这里的问题是 ItemsSource 属性接收一个 Collection 并且您正在绑定到一个 SceneNode，这不是一个集合。这个问题将通过绑定到 ChildrenNodes 属性得到解决：

```
 <TreeView x:Name="treeView" MinHeight="250" ItemsSource="{Binding Nodes.ChildrenNodes}" >
        <TreeView.ItemTemplate>
            <HierarchicalDataTemplate DataType="{x:Type WpfBackgroundWorkerQuestion:SceneNode}" ItemsSource="{Binding Path=ChildrenNodes, UpdateSourceTrigger=PropertyChanged}">
                <TextBlock Text="{Binding Path=Name, UpdateSourceTrigger=PropertyChanged}" Margin="0,10,0,10" />
            </HierarchicalDataTemplate>
        </TreeView.ItemTemplate>
    </TreeView> 
```

# c++ - Qt Creator - C++ 库，找不到可执行文件？

> ID：12323287
> 
> 赞同：1
> 
> 时间：2012-09-07T18:10:31.113
> 
> 标签：c++, qt

所以我对如何处理 QT 的当前弹出窗口感到有些困惑。不完全确定这意味着什么。所以我正在尝试创建一个 C++ 库，作为静态链接库。目前该库中没有任何代码。立即点击构建按钮以确保一切运行正常，将显示以下弹出窗口。

我不确定这到底是什么意思。或者实际上，为什么它甚至首先被展示。构建我的任何其他项目文件都可以正常工作，没有问题。但事实并非如此。

![弹出窗口](../Images/b5407bce6a066c153f80dff831e48a3d.png).

至于我所拥有的，我使用的是 Qt SDK，版本 4.8.1。任何解决此问题的帮助将不胜感激:)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T18:15:40.703

您单击的按钮可能是 Run button: ![QtCreator 运行图标](../Images/ea3150c7c441e125424bdf73fcff5a09.png) ，而不是 build button: ![QtCreator 构建图标](../Images/60c9e7ca57b0da3e04c248211693214f.png)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T18:15:46.030

库 [通常] 需要从可执行文件中调用 - 您看到的对话框要求您指定一个可执行文件，该可执行文件将使您的库生效并调用其中的函数。

您需要编写一个客户端可执行文件（或使用现有的可执行文件）来使用您的库并在此对话框中指定路径。

# c++ - C++ 多重定义

> ID：12323290
> 
> 赞同：0
> 
> 时间：2012-09-07T18:10:49.560
> 
> 标签：c++, sdl, definition

我正在尝试构建这些文件，但它给了我一个多重定义错误。

主.cpp：

```
#include "SDL/SDL.h"
#include "Core.h"
#include "GameStates.h"
#include "globals.h"

int main(int argc, char** args) 
{
if(core.Initilization(640, 480, 32, SDL_SWSURFACE) == -1)
{
    SDL_Quit();
}

while(core.desiredstate != core.quit)
{
    ::currentstate->EventHandling();
    ::currentstate->Logic();
    core.ChangeState();
    ::currentstate->Render();
    ::currentstate->Update();
}

SDL_FreeSurface(core.screen);
SDL_Quit(); 
```

}

核心.cpp：

```
#include "Core.h"
#include "GameStates.h"
#include "SDL/SDL.h"
#include "Intro.h"
#include "globals.h"
#include <string>

/* Starts SDL subsystems and sets screen attributes */
bool Core::Initilization(int SCREEN_WIDTH, int SCREEN_HEIGHT, int SCREEN_BPP, int FLAGS) 
{
    //starts SDL subsystems, returns false upon error
if(SDL_Init(SDL_INIT_EVERYTHING) == -1)
{
    return false;
}

//The screen
screen = SDL_SetVideoMode(SCREEN_WIDTH, SCREEN_HEIGHT, SCREEN_BPP, FLAGS);
//Returns false if there was an error
if(screen == NULL)
{
    return false;
}

SDL_WM_SetCaption("Game", NULL);

return true;
}

/* Loads an image and optimizes it */
SDL_Surface* Core::Load(std::string filename)
{
//original loaded image
SDL_Surface* original = SDL_LoadBMP(filename.c_str());
SDL_Surface* optimized = NULL;

if(original != NULL)
{
    //Sets optimized to optimized version of original
    optimized = SDL_DisplayFormat(original);

    SDL_FreeSurface(original);
}

return optimized;
} 

/* Blits surfaces */
void Core::ApplySurface(int x, int y, SDL_Surface* source, SDL_Surface* destination) 
{
//holds the x y coordinates
SDL_Rect location;
location.x = x;
location.y = y;

if(destination != NULL) 
{
    SDL_BlitSurface(source, NULL, destination, &location);
}
}

/* Sets desiredstate to be used in ChangeState(); */
void Core::SetState(int newstate) 
{
if(desiredstate != state_null && desiredstate != quit)
{
    desiredstate = newstate;
}
}

/* Changes the game state */
void Core::ChangeState()
{
    if(desiredstate != state_null && desiredstate != quit)
    {
        //frees old state memory
    delete ::currentstate;

    switch(desiredstate)
    {
        case intro:
            //allocates new state memory
            ::currentstate = new Intro();
        break;
    }

    stateID = desiredstate;
    desiredstate = state_null;
}
} 
```

游戏状态.h：

```
#ifndef GAMESTATES_H
#define GAMESTATES_H

class GameStates 
{
public:
    virtual void EventHandling() = 0;
    virtual void Logic() = 0;
    virtual void Render() = 0;
    virtual void Update() = 0;
};

#endif 
```

简介.h：

```
#ifndef INTRO_H
#define INTRO_H
#include "SDL/SDL.h"
#include "GameStates.h"

class Intro : public GameStates
{
    private:
    SDL_Surface* test;
public:
    Intro();
    void EventHandling();
    void Logic();
    void Render();
    void Update();
    ~Intro();
} intro;

#endif 
```

介绍.cpp：

```
#include "Intro.h"
#include "GameStates.h"
#include "Core.h"
#include "SDL/SDL.h"

Intro::Intro()
{
test = core.Load("test.bmp");
}

void Intro::EventHandling()
{
SDL_Event event;
while(SDL_PollEvent(&event))
{
    switch(event.type)
    {
        case SDL_QUIT:
            core.SetState(core.quit);
        break;
    }
}
}

void Intro::Logic()
{
//to be coded when the program actually builds...
}
void Intro::Render()
{
core.ApplySurface(30, 30, test, core.screen);
}

void Intro::Update()
{
SDL_Flip(core.screen);
}

Intro::~Intro()
{
SDL_FreeSurface(test);
} 
```

全局变量.h：

```
#include "GameStates.h"
#include "SDL/SDL.h"

GameStates* currentstate = NULL; 
```

抱歉，如果缩进关闭；必须放置四个空格才能将其视为有点乱码的代码块。

继承人的错误信息：

```
/tmp/ccWxKsO5.o:(.bss+0x0): multiple definition of `core'
/tmp/cc13Eqmt.o:(.bss+0x0): first defined here
/tmp/ccWxKsO5.o:(.bss+0x20): multiple definition of `currentstate'
/tmp/cc13Eqmt.o:(.bss+0x10): first defined here
/tmp/ccJXxewI.o:(.bss+0x0): multiple definition of `intro'
/tmp/ccWxKsO5.o:(.bss+0x10): first defined here
/tmp/ccJXxewI.o:(.bss+0x10): multiple definition of `core'
/tmp/cc13Eqmt.o:(.bss+0x0): first defined here
collect2: ld returned 1 exit status 
```

生成文件：

```
OBJS = main.o Intro.o Core.o
CC = g++
DEBUG = -g
CFLAGS = -Wall -c $(DEBUG)
LIBS = -lSDL

game : $(OBJS)
    $(CC) $(CFLAGS) $(OBJS) -o game $(LIBS)

main.o : Core.h GameStates.h globals.h 
    $(CC) $(CFLAGS) main.cpp $(LIBS)

Core.o : Core.h Core.cpp GameStates.h Intro.h globals.h
    $(CC) $(CFLAGS) Core.cpp $(LIBS)

Intro.o : Intro.cpp GameStates.h Core.h
    $(CC) $(CFLAGS) Intro.cpp $(LIBS) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T18:19:58.467

对于多个翻译单元之间共享的对象，规则是：必须只有一个定义，但您可以有多个声明。

在实践中，这意味着：放“extern Class object;” 在您的 .h 文件中，以及“类对象；” 在您的一个 .CPP 文件中。

例如`intro`，将 Intro.h 更改为：

```
class Intro : public GameStates
{
  ... // whatever 
};
extern Intro intro; 
```

并将这一行添加到 Intro.cpp：

```
Intro intro; 
```

类似地`currentstate`，在 globals.h 中：

```
extern GameStates* currentstate; 
```

并在一个 .CPP 中（编译器与哪一个无关）：

```
GateStates* currentstate = NULL; 
```

* * *

**Ps**你的makefile 坏了。您通过`-c`，这意味着“不链接”到您的链接步骤。尝试这个：

```
OBJS = main.o Intro.o Core.o
CC = g++
DEBUG = -g
CFLAGS = -Wall $(DEBUG)
LIBS = -lSDL

game : $(OBJS)
    $(CC) $(CFLAGS) $(OBJS) -o game $(LIBS)

main.o : Core.h GameStates.h globals.h 
    $(CC) -c $(CFLAGS) main.cpp

Core.o : Core.h Core.cpp GameStates.h Intro.h globals.h
    $(CC) -c $(CFLAGS) Core.cpp

Intro.o : Intro.cpp GameStates.h Core.h
    $(CC) -c $(CFLAGS) Intro.cpp 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T18:33:45.180

问题不在于您的代码，而在于您的构建系统。

任何健全的构建系统都会将目标文件的名称与源文件的名称相匹配。但是你有`ccWxKsO5.o`和`cc13Eqmt.o`。更糟糕的是，构建系统似乎试图链接从同一源生成的多个对象（可能有些是由早期运行的编译器创建的）。

`tempnam`并且通配符`*.o`不是构建 C++ 程序的合理方式。

* * *

好吧，也可能存在一些代码问题。但是一旦错误消息中的对象名称与源文件相关联，查找和修复这些将变得容易一千倍。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T18:22:24.503

在 globals.h 中包含守卫 make GameStates* 声明 extern

```
//globals.h
#ifndef _MY_GLOBALS_H_
#define _MY_GLOBALS_H_
#include "GameStates.h"
#include "SDL/SDL.h"

extern GameStates* currentstate;
#endif 
```

//main.cpp

```
#include "globals.h"

GameStates* currentState = 0; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-07T18:20:49.837

在 globals.h 中，您必须声明`currentstate`extern。然后使用定义 ( `GameStates* currentstate = NULL;`) 创建 globals.cpp。我在您的代码中找不到任何关于 intro 或 core 的引用，但这可能是同一个问题：只要您将全局变量声明为 extern，您就可以随意声明它们，并且每个生成的二进制文件只定义一次，在只有一个翻译单元。

此外，您可能希望在 globals.h 中添加标头保护 (#ifndef GLOBALS_H ...)，以防万一您在其中添加任何其他内容。

# java - jdk1.7.0_06 的 Javadoc 在 Eclipse 中不起作用

> ID：12323295
> 
> 赞同：1
> 
> 时间：2012-09-07T18:10:56.810
> 
> 标签：java, android, eclipse, javadoc

我没有在 Eclipse 中看到 javadoc（我猜它被称为）弹出窗口，它提供了有关我目前悬停在上面的 Java/Android 方法的详细信息。例如，如果我键入`Log.d`并按 CTRL+SPACE，通常会出现一个弹出窗口，其中显示有关 Log.d 方法的一些信息。这不会发生。任何想法如何解决它？我最近升级到 jdk1.7.0_06，我认为 Java 文档不知何故被熏了。我在 SO 上关注了几个不同的线程来尝试修复它，但仍然没有。

我已经从 oracle 下载了 jdk-7u6-apidocs.zip 并尝试将其加载，`Window > Preferences > Java > Installed JREs > [select jre] Edit > JavaDoc location`但是当我尝试验证时，弹出窗口显示：*“位置可能无效。文件 'package-list' 和 'index.html' 通常是未找到由 Javadoc 工具创建的文档根目录中的可用"*

然后，在上面的同一个对话框中，我勾选了“Javadoc URL”并输入了*“http://download.oracle.com/javase/7/docs/api/”*。它验证正常，但我仍然没有 Log.d 和其他人的文档。

所以，我想我该如何找回文档弹出窗口，这是 java 问题还是 android SDK 问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T19:33:05.793

您可以尝试指向 JDK，而不是指向 JRE。这样也可以链接源

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T19:00:52.987

没关系。在此处遵循**alphaRiv**的解决方案：[JavaDoc not working in Android project](https://stackoverflow.com/questions/3858139/javadoc-not-working-in-android-project)

我的路径很糟糕，所以将它指向我的`android-sdk-linux/docs/reference`目录，一切都很好。

# c++ - 在 C++ 中将字符串转换为罗马数字

> ID：12323297
> 
> 赞同：1
> 
> 时间：2012-09-07T18:11:14.863
> 
> 标签：c++, string-parsing

> **可能重复：**
> [如何将整数值转换为罗马数字字符串？](https://stackoverflow.com/questions/4986521/how-to-convert-integer-value-to-roman-numeral-string)

第一次在这里问问题。我有一个项目即将完成，我一直在做一些工作，但似乎在这里或其他地方找不到类似的问题。目标是接受没有上限的整数，并将其转换为罗马数字。由于整数实际上确实有一个上限，因此我必须在解析它之前将其转换为字符串，使用撇号来表示放置在子字符串中的每组三个字符。我在概念化循环时遇到了麻烦，a）根据他们的位置将罗马数字分配给他们所看到的 b）通过显示撇号来计算每组三个。

到目前为止，我有：

```
for(int i=0;i<(int)input.length()/3;i++){
    temp=input.substr(i,3);
    for(int j = 0; j < (int)temp.length(); j++){
        if(j == 0){
            if(temp[j] == '9') cout<<"CM";
            else if(temp[j] >= '8') cout<<"DCCC";
            else if(temp[j] >= '7') cout<<"DCC";
            else if(temp[j] >= '6') cout<<"DC";
            else if(temp[j] >= '5') cout<<"D";
            else if(temp[j] == '4') cout<<"CD";
            else if(temp[j] == '3') cout<<"CCC";
            else if(temp[j] == '2') cout<<"CC";
            else if(temp[j] == '1') cout<<"C";  
        }
        else if(j == 1){
            if(temp[j] == '9') cout<<"XC";
            else if(temp[j] >= '8') cout<<"LXXX";
            else if(temp[j] >= '7') cout<<"LXX";
            else if(temp[j] >= '6') cout<<"LX";
            else if(temp[j] >= '5') cout<<"L";
            else if(temp[j] == '4') cout<<"XL";
            else if(temp[j] == '3') cout<<"XXX";
            else if(temp[j] == '2') cout<<"XX";
            else if(temp[j] == '1') cout<<"X";
        }
        else if(j ==2){
            if(temp[j] == '9') cout<<"IX";
            else if(temp[j] == '8') cout<<"VIII";
            else if(temp[j] == '7') cout<<"VII";
            else if(temp[j] == '6') cout<<"VI";
            else if(temp[j] >= '5') cout<<"V";
            else if(temp[j] == '4') cout<<"IV";
            else if(temp[j] == '3') cout<<"III";
            else if(temp[j] == '2') cout<<"II";
            else if(temp[j] == '1') cout<<"I";
        }
    }
} 
```

数字本身显示得很好，但我无法弄清楚如何告诉循环从右边开始，并以三分之二的方式工作，保持输入中数字的实际位置（例如 1234 应该将 1 显示为 I，而不是 C。我还需要弄清楚要在撇号中写入的循环。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T19:11:33.847

我能想到的转换为罗马数字的最简单方法是从最大可能的数字/组合开始检查并向下工作。包括组合，并从大到小检查它们，这样说“XC”总是在“L”之前检查，你不必担心“LXXXX”和“LXL”等。

```
// This code requires C++11 support.  Namely, initializer lists and type inference.
// If your compiler sucks, there's equivalents for the important stuff.  What really
// really matters is the order of the value=>digits mappings, and the iteration over
// them in the for loop.

#include <vector>
#include <string>
#include <utility>

std::string romanNumeralFor(int n, int markCount = 0) {
    typedef std::pair<int, std::string> valueMapping;
    static std::vector<valueMapping> importantNumbers = {
        {1000, "M"}, {900, "CM"}, {500, "D"}, {400, "CD"},
        {100,  "C"}, { 90, "XC"}, { 50, "L"}, { 40, "XL"},
        {10,   "X"}, {  9, "IX"}, {  5, "V"}, {  4, "IV"},
        {1,    "I"},
    };

    std::string result;
    bool needMark = false;
    std::string marks(markCount, '\'');
    for (auto mapping : importantNumbers) {
        int value = mapping.first;
        std::string &digits = mapping.second;
        while (n >= value) {
            result += digits;
            n -= value;
            needMark = true;
        }
        if ((value == 1000 || value == 100 || value == 10 || value == 1) && needMark) {
            result += marks;
            needMark = false;
        }
    }
    return result;
} 
```

至于将字符串转换为数字：

```
// in C++11
int n = std::stoi(str);

// in C++03
std::istringstream iss(str);
int n;
iss >> n; 
```

因此，将您的字符串分成三位数的块（从末尾开始！），并使用适当的标记计数传递它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T18:53:37.380

不是最好的解决方案，但它有效。

```
#include <iostream>
#include <map>
#include <algorithm>
#include <string>

void replaceAll(std::string& str, const std::string& from, const std::string& to) {
    if(from.empty())
        return;
    size_t start_pos = 0;
    while((start_pos = str.find(from, start_pos)) != std::string::npos) {
        str.replace(start_pos, from.length(), to);
        start_pos += to.length();
    }
}

int romanNumeralToInt(std::string s) {
    std::map<char,int> romanNum = {
        {'I',1}, {'V',5}, {'X',10}, {'L',50}, {'C',100},
        {'D',500}, {'M',1000}
    };
    //{"IIIII",5}, {"VV",10}, {"XXXXX",50}, {"LL",100}, {"CCCCC",500}, {"DD",1000}
    int g = 0;
    std::sort(s.begin(),s.end());
    if(s.find("IIIII") != std::string::npos)
        replaceAll(s,"IIIII","V");
    if(s.find("VV") != std::string::npos)
        replaceAll(s,"VV","X");
    if(s.find("XXXXX") != std::string::npos)
        replaceAll(s,"XXXXX","L");
    if(s.find("LL") != std::string::npos)
        replaceAll(s,"LL","C");

    for(auto& i : s) {
        if(romanNum[i] != 0)
            g += romanNum[i];
    }
    return g;
}

int main() {
    std::string st = "XXXXXIIIIIVVVXLLD";
    int a = romanNumeralToInt(st);
    std::cout << a;
} 
```

打印出 680。

# c# - DataGridView ComboBox 列选择更改事件

> ID：12323298
> 
> 赞同：1
> 
> 时间：2012-09-07T18:11:23.663
> 
> 标签：c#, winforms

我有一个带有 2 个组合框列的数据网格。我为组合框列编写了选择更改事件，如下所示。

```
private void Grid_EditingControlShowing(object sender, DataGridViewEditingControlShowingEventArgs e)
{ 
  ComboBox cb = e.Control as ComboBox;
                if (cb!=null)
                { cb.SelectionChangeCommitted -= new EventHandler(cb_SelectedIndexChanged);

                    // now attach the event handler
                    cb.SelectionChangeCommitted += new EventHandler(cb_SelectedIndexChanged);
                }
}

void cb_SelectedIndexChanged(object sender, EventArgs e)
     {
       var tb = datagrdADDTEMP.EditingControl as ComboBox;
       if (tb != null)
       str = tb.SelectedValue != null ? tb.SelectedValue.ToString() : null;
                     Assesment_Business_layer.Businesslayer bl = new Assesment_Business_layer.Businesslayer();
                     DataSet ds = new DataSet();**strong text**
                     ds = bl.GetSubCatNamesBA(str);
                     cmbDataGridSubCategory.DataSource = ds.Tables[0];
                     cmbDataGridSubCategory.DisplayMember = "SubCategoryName";
                     cmbDataGridSubCategory.ValueMember = "SubCategoryCode";
                 }
     } 
```

它与第一个组合框列配合良好，但问题是当我从第二个组合框列中选择项目时，上述选择更改事件也会引发..但我不想为第二个组合列引发选择更改事件。它应该只为第一个组合框加注。

请帮忙，因为我遇到了这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T18:29:25.163

问题似乎是您将事件处理程序添加到任何组合框，不管它是什么列，所以您必须首先在触发事件的列中找到，为此您必须查看发送者对象Grid_EditingControlShowing 事件处理程序（它是一个 DataGridView）及其 CurrentCell、SelectedColumns 或 SelectedCells 属性。

例子：

```
private void Grid_EditingControlShowing(object sender, DataGridViewEditingControlShowingEventArgs e)
{
    if(((DataGridView)sender).CurrentCell.ColumnIndex == 0) //Assuming 0 is the index of the ComboBox Column you want to show
    {
        ComboBox cb = e.Control as ComboBox;
        if (cb!=null)
        {
            cb.SelectionChangeCommitted -= new EventHandler(cb_SelectedIndexChanged);
            // now attach the event handler
            cb.SelectionChangeCommitted += new EventHandler(cb_SelectedIndexChanged);
        }
    }
} 
```

使用 SelectedColumns 或 SelectedCells 的示例将非常类似于这样，如果您想了解有关该属性的更多信息，您可以查看他们[在 MSDN 上的文档](https://msdn.microsoft.com/en-us/library/vstudio/system.windows.forms.datagridview.selectedcolumns(v=vs.100).aspx)

# c++ - 参数传递转换浮点数错误

> ID：12323299
> 
> 赞同：1
> 
> 时间：2012-09-07T18:11:29.943
> 
> 标签：c++, function, parameter-passing

我在为这个简单程序传递参数时遇到问题。尝试编译此程序时出现“无法将 'float*' 转换为 'float' 参数 '2' 到 'void getData(std::string, float, float, float, float)'”错误。谁能弄清楚我做错了什么？我一直在努力。注意：请忽略不推荐使用的内容，例如 system("PAUSE") 和其他一些内容。这是我老师认为我编码的简单方式，这就是他希望我在这个程序中使用的方式。我知道 getchar() 并将其用于练习和最终工作。另外，这不应该影响程序，因为我之前在我的 C++ 类的小程序上一直在使用它而没有问题。

这是代码：

```
#include<iostream>
#include<string>
#include<stdlib.h>
using namespace std;

void getData(string,float,float,float,float);
void getCalc(int,float,float,float,float,float,float,float,float,float,float);
void getPrint(float,float,float);

int main()
{
 int const acres=1000;
 string crop;
 float cpa[4];
 float yield[4];
 float per[4];
 float increase[4];
 float cost[4];
 float grossmin[4];
 float grossmax[4];
 float netmin[4];
 float netmax[4];
 float netave[4];
 getData(crop,cpa,yield,per,increase);
 getCalc(acres,cpa,yield,per,increase,cost,grossmin,grossmax,netmin,netmax,netave);
 getPrint(netmin,netmax,netave);
 system("PAUSE");
 return 0;
}

void getData(string fcrop,float fcpa[],float fyield[],float fper[],float fincrease[])
{
 for (int i=0;i<4;i++)
 {
  cout<<"Enter the crop: ";
  getline(cin,fcrop);
  cout<<"Enter the cost per acre:$ ";
  cin>>fcpa[i];
  cout<<"Enter the yield: ";
  cin>>fyield[i];
  cout<<"Enter $/bishell: ";
  cin>>fper[i];
  cout<<"Enter the percentage increase: ";
  cin>>fincrease[i];
  cin.ignore(80,'\n');
 }
}

void getCalc(int acres,float fcpa[],float fyield[],float fper[],float fincrease[],float fcost[],float fgrossmin[],float fgrossmax[],float fnetmin[],float fnetmax[],float fnetave[])
{
 for (int i=0;i<4;i++)
 {
  int acres=1000;
  fcost[i]=acres*fcpa[i];
  fgrossmin[i]=acres*fyield[i]*fper[i];
  fgrossmax[i]=fgrossmin[i]+(fgrossmin[i]*fincrease[i]/100);
  fnetmin[i]=fgrossmin[i]-fcost[i];
  fnetmax[i]=fgrossmax[i]-fcost[i];
  fnetave[i]=(fnetmin[i]+fnetmax[i])/2;
 }
}

void getPrint(float fnetmin[],float fnetmax[],float fnetave[])
{
 for (int i=0;i<4;i++)
 {
  cout<<"The minumum profit is:$ "<<fnetmin[i]<<endl;
  cout<<"The maximum profit is:$ "<<fnetmax[i]<<endl;
  cout<<"The average profit is:$ "<<fnetave[i]<<endl;
 }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T18:15:27.127

在您在程序开始时编写的原型中，这是这样写的。

```
void getData(string,float,float,float,float) ; 
```

它应该与其定义中的相同。

```
void getData(string,float[],float[],float[],float[]); 
```

函数原型的声明和实现应该相同。

# android - 如何正确构建我的 Android 应用程序、类、视图、数据库，变得简单？

> ID：12323302
> 
> 赞同：4
> 
> 时间：2012-09-07T18:11:37.510
> 
> 标签：android, sql, class, data-structures

我花了很多时间掌握将我的 Android 应用程序“打包”成逻辑组件的最佳方法，我的目标是制作一个易于更新和添加新功能的应用程序。

我相信“模块化”方法效果最好，其中我的数据表示为数据类，我的数据库有它自己的数据库助手类，它处理所有数据库交互，最后查看连接数据库助手、数据类的“控制器”活动类和视图一起。

话虽这么说，我需要一些高级规则来构建我的编程，我发现如果我没有规则，我最终会得到草率的代码和大量的重写，因为代码变得太复杂了。

综合考虑，这些规则是 SQL 支持的应用程序的良好基础吗？

我的理论Android规则：

1.  DB Helper 类应包含所有 DB 逻辑。这意味着，DB Helper 将包含打开和关闭 DB 的代码，以及用于插入、更新和删除所有记录的代码。DB Helper 将返回的数据不是作为游标，而是作为我创建的 Data Class 对象，每个 Data Class 都有一个构造函数，该构造函数获取游标并使用它来填充 Class 的值。

2.  数据类将允许将数据库记录表示为对象而不仅仅是游标。由于 DB Helper 只会返回对象，我将不得不为 ListView 等项目创建适配器，以呈现我的对象数据而不是光标（我在这一点上有点可疑，不确定这是一个好主意还是不是）。所有业务逻辑，因此对数据类中包含的数据进行的所有计算，都将在数据类本身中完成。我设想我的数据类具有典型的 getter 和 setter 以及“计算”方法，这些计算方法将从数据类中获取 var 并对它们执行一些有意义的业务逻辑，然后返回结果（这是个好主意吗？）。

3.  View Controller Activity Classes 将 DB Helper 的方法与 Data Classes 联系起来，并使用结果信息更新 Views。这个Activity Class会很正常，它会初始化布局和widget，它会在适当的时候使用生命周期方法通过DB Helper对DB进行各种查询，它会有简单的更新方法来更新widget使用他们提供的数据类对象。

我发现我在使用 Android 时没有遇到任何问题，除了在诸如此类的设计问题上苦苦挣扎。我厌倦了我的应用程序变得过于复杂，我需要一个简单的系统来确保事情保持可管理性和可扩展性。

如果您像我一样挣扎，请，请，请，将我推向构建应用程序的正确方向。正是这一切阻碍了我制作我希望的令人惊叹的应用程序，让每个人都能享受。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T21:13:41.463

设计应用程序时需要考虑的最重要的事情是：谁来维护它？如果您将成为唯一一个对您的应用程序进行维护的人，那么请做最适合您的事情。但是，如果其他人要维护此应用程序，那么是的，您将希望将类似的东西放在一起。听起来你有一个很好的计划。确保你使用注释，如果你喜欢，你可以包含一个“readme.txt”，它可以让其他人看到正在发生的事情并让你解释你的设计逻辑。为了避免事情变得过于复杂，您可以使用包来存储类似的类。

最终，您的问题没有单一的正确答案。

# asp.net - 如何从 Control 继承，而不是 UserControl？

> ID：12323303
> 
> 赞同：4
> 
> 时间：2012-09-07T18:11:38.657
> 
> 标签：asp.net, user-controls, controls

我有一个继承自的 ASP.net 控件`UserControl`：

**文件 1**：

```
public partial class Controls_AllocationDuplicate : System.Web.UI.UserControl 
```

**文件 2**：

```
<%@ Control Language="C#" AutoEventWireup="true" CodeFile="AllocationDuplicate.ascx.cs" Inherits="Controls_AllocationDuplicate" %> 
```

[我需要控制继承自`Control`，而不是`UserControl`](https://stackoverflow.com/questions/11658053/how-to-add-a-templating-to-a-usercontrol)：

**File.aspx.cs** *（已更改）*：

```
public partial class Controls_AllocationDuplicate : System.Web.UI.Control 
```

**File.aspx** *（未更改）*：

```
<%@ Control Language="C#" AutoEventWireup="true" CodeFile="AllocationDuplicate.ascx.cs" Inherits="Controls_AllocationDuplicate" %> 
```

当我这样做时，Visual Studio 会给出一个编译错误：

> 确保此代码文件中定义的类与'inherits' 属性匹配，并且它**扩展了正确的基类（例如Page 或UserControl）。**

我怎样才能让我的*控制*继承自`Control`而不是`UserControl`？

## 系列

这个问题是正在进行的 Stackoverflow 系列**“模板化用户控件”**中的一个：

*   [如何将模板添加到用户控件？](https://stackoverflow.com/questions/11658053/how-to-add-a-templating-to-a-usercontrol/11700540)
*   [如何从 Control 继承，而不是 UserControl？](https://stackoverflow.com/questions/12323303/how-to-inherit-from-control-rather-than-usercontrol)
*   [UserControl 有 IsPostBack，但 Control 没有](https://stackoverflow.com/questions/12321621/usercontrol-has-ispostback-but-control-does-not/12321692)
*   [UserControl 没有名为 ContentTemplate 的公共属性](https://stackoverflow.com/questions/11656637/usercontrol-does-not-have-public-property-named-contenttemplate)
*   [如何从 web.config 指定 CodeFileBaseClass？](https://stackoverflow.com/questions/12325192/how-do-i-specify-codefilebaseclass-from-web-config)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T18:14:46.457

尝试从 WebControl 继承，然后使用 Register 而不是 Control。与此类似：http: [//www.codeproject.com/Articles/2748/Building-an-ASP-NET-custom-web-control-a-textbox-a](http://www.codeproject.com/Articles/2748/Building-an-ASP-NET-custom-web-control-a-textbox-a)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T18:16:29.207

在这种情况下，您尝试制作自定义控件而不是用户控件，您不能使用 ascx 文件来保存您的设计，但需要务实地设计它们。

# asp.net - 在 Visual Studio 2012 中创建控制器时出错

> ID：12323307
> 
> 赞同：14
> 
> 时间：2012-09-07T18:11:59.607
> 
> 标签：asp.net, sql-server, asp.net-mvc

我正在尝试学习 ASP.NET MVC，所以我正在关注 asp.net 网站上的音乐商店教程。

我正在使用 Album.cs 作为模型类和 MusicStoreEntities.cs 作为数据上下文类来创建 StoreManagerController。

创建控制器时的错误是：*无法检索“MvcMusicStore.Models.Album”的元数据。不支持使用相同的 DbCompiledModel 针对不同类型的数据库服务器创建上下文。相反，为正在使用的每种类型的服务器创建一个单独的 DbCompiledModel。*

听起来我正在使用两个不同的数据库，但这是来自 Web.config 的连接字符串部分：

```
<connectionStrings>
<add name="MusicStoreEntities" providerName="System.Data.SqlServerCe.4.0" connectionString="Data Source=|DataDirectory|\MvcMusicStore.sdf"/>
</connectionStrings> 
```

奇怪的是，如果我注释掉 MusicStoreEntities 连接字符串，然后尝试创建它可以工作的 StoreManagerController。如果我将解决方案设置中的目标框架更改为 .NET Framework 4，在 Visual Studio 2010 中打开解决方案，然后创建控制器，它也可以工作。

那么这是 Visual Studio 2012 或连接字符串的问题吗？也许与 CE4.0 和 VS2012 存在一些兼容性问题？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-14T10:05:38.903

问题在于使用教程中使用的数据库的 CE 版本。当切换到 SQL Server 2012 等其他数据库版本时，它对我来说效果很好。尝试这个：

**更改此连接字符串**

```
<add name="MusicStoreEntities" connectionString="Data Source=|DataDirectory|MvcMusicStore.sdf" providerName="System.Data.SqlServerCe.4.0"/> 
```

**和**

```
 <add name="MusicStoreEntities" connectionString="Data Source=DBInstanceName;Initial Catalog=MvcMusicStore;Integrated Security=True" providerName="System.Data.SqlClient" /> 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-08T21:05:57.160

MVC4中[添加控制器的重复不起作用](https://stackoverflow.com/questions/12172074/add-controller-in-mvc4-not-working)，[MVC4 脚手架添加控制器给出错误“无法检索元数据...”](https://stackoverflow.com/questions/12165185/mvc4-scaffolding-add-controller-gives-error-unable-to-retrieve-metadata)

尝试注释您的连接字符串并在创建控制器时使用默认值。

```
<add name="DefaultConnection" connectionString="Data Source=(LocalDb)\v11.0;Initial Catalog=MvcMusicStore;Integrated Security=SSPI;AttachDBFilename=|DataDirectory|\MvcMusicStore.mdf" providerName="System.Data.SqlClient" /> 
```

创建后返回您的连接字符串。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-29T07:11:10.527

在您的派生上下文类中，您需要将数据库名称传递给基本构造函数，而不是连接字符串名称，这对于大多数遇到此问题的人来说似乎是混淆的根源，因此在您使用连接字符串的情况下

注意：还删除了 MvcMusicStore.sdf 之前的反斜杠，因为不确定是否有必要

你派生的上下文类应该定义为

```
public class MusicStoreContext : DbContext 
```

{ public MusicStoreContext() : base("MvcMusicStore") { }...

希望这对你和其他人有用，就像对我一样。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-25T19:54:24.983

我想我找到了解决方法。在生成新控制器之前，请从 Web.config 中删除连接字符串。这将允许您生成控制器而不会出错。然后把连接字符串放回去。这将允许您运行应用程序。

我正在使用 SQL CE4，并且我没有 DbContext 的显式构造函数（MusicStoreEntities 使用上面的示例）。我的连接字符串与 DbContext 类名匹配。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-10-22T15:22:51.987

是的，如此简单的修复！！..在创建控制器并构建项目后删除连接字符串并将其粘贴回去。服务器资源管理器数据连接不是必需的。在 App_Data SHOW_ALL 中，在构建和第一次调试运行后会创建一种 .sdf 文件。它作为文件加载到 Web 主机站点，而不是 SQL DB。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-08-06T20:27:29.887

我现在也在关注这个例子：[Accessing Your Models Data from a Controller](http://www.asp.net/mvc/tutorials/mvc-4/getting-started-with-aspnet-mvc4/accessing-your-models-data-from-a-controller)。它在那里被标记为粗体，但我一眼就能飞过它：

**您只需要构建解决方案才能让模型和 DBContexts 显示在“添加控制器”向导中！**

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-09-24T23:35:05.203

这可能更容易阅读......问题是教程中的连接字符串缺少 sdf 文件名前面的“/”。

坏的：

```
<add name="MusicStoreEntities"
connectionString="Data Source=|DataDirectory|MvcMusicStore.sdf"
providerName="System.Data.SqlServerCe.4.0"/> 
```

好的：

```
<add name="MusicStoreEntities"
connectionString="Data Source=|DataDirectory|/MvcMusicStore.sdf"
providerName="System.Data.SqlServerCe.4.0"/> 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-02-15T08:27:13.523

删除连接字符串也对我有用，只需在创建控制器并构建项目后将其粘贴回来

# c++ - 模板化函数和类中的 T&&

> ID：12323308
> 
> 赞同：1
> 
> 时间：2012-09-07T18:12:00.697
> 
> 标签：c++, c++11, rvalue-reference, pass-by-rvalue-reference

我刚刚在课堂上偶然发现了这一点`T&&`，功能意味着不同的东西。
在功能上：

```
template<class T> void f(T&& t){};   // t is R or L-value
...
int i=0; 
f(i);   // t in f is lvalue
f(42);  // t in f is rvalue 
```

在班上：

```
template<class T> 
struct S { 
       S(T&& t){}  // t is only R-value? 
};
...
int i;
S<int> ss(i);   // compile error - cannot bind lvalue to ‘int&&’ 
```

这是否意味着如果我们`T&& t`在课堂上，那么`t`将只有右值？
有人可以指出我在哪里可以获得有关此的更多信息吗？
这是否意味着我需要为 L 和 R 值编写两个方法重载？

**答案**
正如 Alf 的示例所示，`t`函数和类中的值可以是左值或右值。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-07T18:16:39.953

你在这里处理模板参数推导。

通过在`f` *不*`T`显式定义模板参数的情况下使用，C++ 编译器现在必须从您传递的参数中确定模板参数类型是什么。

使用类型进行模板参数推导的规则`&&`是特殊的，以允许完美转发。使用`f(i)`时，`T`推导为`T&`。因此，参数`t`的类型为`T& &&`，它折叠为`T&`。但是，当您使用 时`f(42)`，类型`T`被推导出为`T&&`，因此`t`是`T&& &&`，它折叠为`T&&`。

一旦你*强迫* `T`成为一个特定的类型，所有这些都会有效地消失。崩溃仍然可能发生，但是因为您使用了`S<int>`, then`t`将是 type `int&&`。`S<int> ss(i)`等效于`f<int>(i)`，这也是不合法的。而且由于模板参数推导仅适用于函数而不适用于类型，因此`S`如果您想要完美的转发，您必须执行以下操作：

```
template<class T> 
struct S { 
    template<class U>
    S(U&& t){}
}; 
```

当然，您可以使用 SFINAE 方法和模板元编程来确保构造函数模板只有在`T`和的基本类型`U`相同的情况下才能被实例化。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T18:15:06.967

在您的函数`T`中是从实际参数推导出来的。该特定组合的主要用途是**完美转发**。在类模板`T`中不推导，必须指定。

例如，这可以很好地与 g++ 和 msvc 一起编译：

```
template<class T> 
struct S { 
       S(T&& t){}
};

int main()
{
    int i;
    S< int& > ss(i);
} 
```

# mysql - 允许来自链接到外键的自定义 django 选择字段中的空值

> ID：12323311
> 
> 赞同：0
> 
> 时间：2012-09-07T18:12:16.597
> 
> 标签：mysql, django, django-forms, choicefield

在[这个问题之外](https://stackoverflow.com/questions/12306841/get-additional-data-into-django-form-dropdown-selection)，我有一个 Action 模型，它有一个外键，它指定一个动作重复发生的频率：

```
class Reoccurance(models.Model):
    label = models.CharField("Label", max_length=50, unique = True)
    days = models.IntegerField("Days")

    def __unicode__(self):
        return self.label

    class Meta:
        ordering = ['days']

class Action(models.Model):
    name = models.CharField("Action Name", max_length=200, unique = True)
    complete = models.BooleanField(default=False, verbose_name="Complete?")
    reoccurance = models.ForeignKey(Reoccurance, blank=True, null=True, verbose_name="Reoccurance") 
```

我正在制作一个导致重复出现的 HTML 代码的 action 的 modelForm（基于重复出现表中存在的数据库值）：

```
<select id="id_reoccurance" class="selectwithtitles" name="reoccurance">
    <option value="" title="" >---------</option>
    <option value="12" title="2" >2 Days</option>
    <option value="1" title="3" >3 Days</option>
    <option value="2" title="5" >5 Days</option>
    <option value="10" title="6" >6 Days</option>
    <option value="9" title="7" >1 Week</option>
    <option value="3" title="10" >10 Days</option>
    <option value="4" title="14" >2 Weeks</option>
    <option value="11" title="21" >3 Weeks</option>
    <option value="5" title="30" >1 Month</option>
    <option value="13" title="42" >6 Weeks</option>
    <option value="6" title="90" >1 Quarter</option>
    <option value="7" title="180" >6 Months</option>
    <option value="8" title="365" >1 Year</option>
</select> 
```

我通过子类字段生成标题：

```
from django.utils.html import conditional_escape, escape
from django.utils.encoding import force_unicode

class SelectWithTitles(forms.Select):
    def __init__(self, *args, **kwargs):
        super(SelectWithTitles, self).__init__(*args, **kwargs)
        # Ensure the titles dict exists
        self.titles = {}

    def render_option(self, selected_choices, option_value, option_label):
        title_html = (option_label in self.titles) and \
            u' title="%s" ' % escape(force_unicode(self.titles[option_label])) or ''
        option_value = force_unicode(option_value)
        selected_html = (option_value in selected_choices) and u' selected="selected"' or ''
        return u'<option value="%s"%s%s>%s</option>' % (
            escape(option_value), title_html, selected_html,
            conditional_escape(force_unicode(option_label)))

class ChoiceFieldWithTitles(forms.ChoiceField):
    widget = SelectWithTitles

    def __init__(self, choices=(), *args, **kwargs):
        choice_pairs = [(c[0], c[1]) for c in choices]
        super(ChoiceFieldWithTitles, self).__init__(choices=choice_pairs, *args, **kwargs)
        self.widget.titles = dict([(c[1], c[2]) for c in choices])

    def clean(self, value):
        self.required = False
        if not value and not self.required:
            return value
        return super(ChoiceFieldWithTitles, self).clean(value)

class ActionForm(forms.ModelForm):
    reoccurance = ChoiceFieldWithTitles()

    def __init__(self, *args, **kwargs):
        super(ActionForm, self).__init__(*args, **kwargs)   

        choices = []
        for pt in Reoccurance.objects.all():
            choices.append((pt.id, pt.label, pt.days))
        self.fields['reoccurance'] = ChoiceFieldWithTitles(choices = choices)

    def clean(self):
        cleaned_data = super(ActionForm, self).clean()
        if cleaned_data.get("reoccurance") != '':
            rec = Reoccurance.objects.get(pk=cleaned_data.get("reoccurance"))
            self.cleaned_data['reoccurance'] = rec
        return super(ActionForm, self).clean() 
```

我必须将 clean 方法添加到 ActionForm 因为我必须返回数据库 Reoccurance 对象，而不仅仅是它的 id。

我还必须向 ChoiceFieldWithTitles 添加一个干净的方法，因为我无法让它允许重复出现一个空白值。即使我使用 reoccurance = ChoiceFieldWithTitles(required=False)，它也视需要而定。

我现在的问题是我似乎不能允许空白值。如果用户选择下拉菜单的第一个选项：

```
<option value="" title="" >---------</option> 
```

表单返回此错误：

```
ValueError at /next_actions/test-action-9712,778/edit/
Cannot assign "u''": "Action.reoccurance" must be a "Reoccurance" instance. 
```

我需要对 ActionForm 的 clean 方法执行什么操作以允许重复字段为空值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T19:15:19.047

不，您需要做的就是使用正确的基本字段类型。如果您正在处理外键或 M2M 关系，则该字段应该是`ModelChoiceField`类型，而不是`ChoiceField`.

# javascript - 将任何 CDN 配置为仅传送一个文件，无论请求的 url 是什么

> ID：12323314
> 
> 赞同：16
> 
> 时间：2012-09-07T18:12:42.557
> 
> 标签：javascript, html, seo, amazon-web-services, cdn

我目前正在开发一个新项目，整个页面应该在 HTML5/JS 中针对 API/JSON 实现。由于整个应用程序应该只包含一个 HTML 文件（index.html）和一个 JS MVC 应用程序（可能是主干Js），我正在考虑 SEO 和用户友好的 url。

在那里我遇到了

```
window.document.pushstate('','title','/url'); 
```

借助该 html5 功能，我可以定义 URL，而无需真正离开或重新加载页面。但是...出于性能原因和低费用，我想将应用程序部署到[像 Amazon CloudFount 这样的 CDN中。](http://aws.amazon.com/cloudfront/)我不需要任何服务器基础设施（当然除了我需要的 API 基础设施）

那么，我可以配置一个 CDN（实际上是任何 CDN，如 AWS、Azure、Akamai）以提供相同的 HTML 文件，而不管 URL 叫什么

[http://www.example.com](http://www.example.com) => 提供 index.html

[http://www.example.com/any_subpage](http://www.example.com/any_subpage) => 提供 index.html

等等 ...

您可以在[http://html5.gingerhost.com](http://html5.gingerhost.com)找到一个工作示例。但是该页面的创建者可能会使用 .htaccess 文件或熟悉的东西将所有内容映射到同一个文件。我想在 CDN 中提供相同的功能。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T04:50:01.083

任何 CDN 都应该具有定义源服务器的能力。如果边缘位置没有文件，CDN 会联系此服务器以提供文件。

好消息是源服务器可以是任何服务于网页的服务器，例如 Apache、Nginx 等。这意味着您可以应用任何类型的重写规则。

如果您不想自己设置源服务器，您可以查看在[S3 上托管您的（静态）站点](http://docs.amazonwebservices.com/AmazonS3/latest/dev/WebsiteHosting.html)。最近他们引入了[网络重定向](http://docs.amazonwebservices.com/AmazonS3/latest/dev/how-to-page-redirect.html)，可以帮助您以不同的“别名”提供相同的文件。如果做不到这一点，您可以查看[重新定义标准错误文档](http://docs.amazonwebservices.com/AmazonS3/latest/dev/CustomErrorDocSupport.html)，但我不确定是否仍会发送错误状态代码。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-22T04:33:50.313

CDN 旨在通过从可能离客户最近的地理位置提供静态资源来提供静态内容。CDN 技术并非旨在对请求进行重定向或服务器端处理。您将需要这里涉及的其他内容来完成该部分。问题只是这是服务器端技术还是某种负载平衡器/防火墙请求重写（以避免使用服务器端技术）。

我不认为有一个真正的平台无关的方式来做到这一点。您将始终与服务器端技术或负载平衡器/防火墙平台相关联。但听起来您可能已经有了这个限制，因为您需要在某个地方托管您的 JSON API？即使你还没有决定平台，几乎任何平台都应该允许你做一些基本的路由。如果你可以提供 JSON Http 请求，你应该也可以做一些页面路由。

作为旁注，我不相信您想从您域中所有可能的 URL 返回您的“index.html”。您需要一些有效 URL 和无效 URL 的列表。在这种情况下，您无论如何都需要 ping 后端以验证请求 URL。这进一步向我表明，服务器端技术将更适合此任务，然后是较低级别的盲目“包罗万象”重定向。

我个人的偏好是使用您最喜欢的 MVC 框架来提供具有所需 URL 结构（几乎所有页面加载）的可索引内容，然后在页面加载后使用您的 JSON api 处理该内容（您希望能够的任何动态内容）去做）。整个事情，包括页面加载和 API，都是从同一个服务器平台/环境提供的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T00:40:27.050

Nginx http 服务器可以这样做：

```
location /{
    # serve a file
} 
```

或者您可以自定义链接，例如

```
location /my_html{
     # serve html file
}

location /cdn/{
     # serve rest files
} 
```

你甚至可以通过正则表达式检查 url

```
location ~ /cdn/.*\.js${
    # serve cdn
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-09T07:37:40.387

将您的 404 页面符号链接到索引页面。这样，当在您的网络内容上找不到请求的 URL 时（关于任何链接，如您的情况所示），将提供 404 页面，这反过来又是索引页面本身。

`# ln -s index.html 404.html`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-11T03:18:09.313

我和你在同一条船上，似乎 cdn 不支持 url 重写。以下解决方案并不能完全解决我们的“问题”，但如果您使用“拉式”CDN 提供商，则非常接近节省托管费用。

默认页面（index.html）的初始加载将只提供一小部分 html，基本上是基本的 html 结构，如下所示：

```
<!doctype html>
<html lang="en">
<head>
    <title>something</title>
    <!-- Load the script "js/main.js" as our entry point -->
    <script data-main="js/main" src="http://mycdn.com/js/libs/require/require.js"></script>
</head>
<body>

</body>
</html> 
```

其余代码将通过一些（异步）模块加载器（如 require.js）加载——所有这些代码都来自您的 CDN，包括 require.js。

但是，如果您使用的是拉式 CDN，即使是这一点 html 也将很快来自 CDN。只要 CDN“拉取”提供程序在其缓存中找不到 html5 pushstate url 的文件，它就会点击此页面。

在您的服务器上，您必须有某种路由来将每个与 CDN 未提供文件扩展名的模式匹配的请求路由到该文件。

是的，每次遇到新 URL 时，CDN 都会访问该站点（如果您使用的是拉式 CDN），但在获取它之后，它会从其缓存中将其分发给所有用户，并且不会访问您的站点又是网址。此外，CDN 提供商对您网站的点击量将是微不足道的，因为您提供的是少量静态 html。而且，如果您将此 html 文件的文件头设置为永不过期（此文件应该永远不会更改），CDN 提供商可以将文件保存很长时间（取决于提供商），因此您的服务器上的命中几乎可以归结为每个唯一网址的一次性事件。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-24T22:55:14.600

如果您正在考虑 SEO 和友好的 URL，您可以使用`pushState`, 当然。请记住：

*   将所有路由重定向到 index.html 时，您还将向搜索引擎提供完全相同的 html 内容，无论它们进入哪个 URL。然后，您的 URL 有多“对 SEO 友好”就无关紧要了。

*   如果您正在考虑 IE 支持，它不支持 History API，因此您需要更高级别的历史框架或 IE 的其他一些解决方法。这很可能包括`#`基于 - 的 URL。因此，每个视图基本上都有两个不同的 URL，当人们共享 URL 或弄清楚搜索机器人如何捕获指向您网站的链接时，这是需要考虑的事情。

我建议您在寻找合适的云主机之前考虑以下两个选项：

1.  *将一些*数据逻辑卸载到后端，并为每个视图提供至少一些可消化的内容。您仍然可以在您的应用程序中删除或解析该内容并执行您的 pushstate/jsonAPI 操作以获得更好的用户体验，但您将拥有“真实”、可扫描的 URL，用于搜索引擎、opera mini 用户和其他一些不幸的浏览器。这些静态页面不必提供相同的功能甚至样式，只需将其视为最后的后备。

2.  忘记应用程序的 CDN，只需将 CDN 用于静态文件、图像、脚本等。您可以为应用程序本身提供一些备用方案，但真正拉动服务器的是媒体。这样做将使您能够控制应用程序及其背后的服务器，但您仍然可以使用 CDN 来实现它的目的——提供静态内容。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-11-22T09:58:40.360

我们最近联系了[edgecast.com](http://edgecast.com)（这是一个类似于 cloudfront 的 cdn），通过他们的支持，他们告诉我这确实是他们可以做的事情，但不能通过他们的标准界面。当我们需要通配符路由到单个文件时，我被告知只需联系他们。

至于你的问题：**是**的，有可能。只需通过他们的实时聊天与他们联系，他们会为您提供帮助，祝您好运！

更多（负面）信息：像这样的包罗万象的规则意味着某些浏览器（读取 IE）所做的愚蠢的 favicon.ico-forced-request 将被捕获，并且将再次下载常规 html 页面。事实上，所有针对根域的自动请求（例如，iframe 也请求 favicon）都会被捕获，并且会下载常规的 html 文件。这对你来说可能是也可能不是问题，但对我来说，所有这些隐藏的请求让我重新思考解决方案，并使用背后的网络服务器来完成实际的包罗万象的工作。真是惭愧。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-11-22T10:34:16.300

如果您有自己的域指向 CDN（我知道 CloudFront 允许您这样做），您可以使用 CloudFlare ( [https://www.cloudflare.com/](https://www.cloudflare.com/) ) 作为您的用户和 CDN 之间的反向代理。

感谢他们的免费计划，您可以创建一个将所有内容重定向到 index.html 的规则。我认为这是实现您想要的唯一方法，因为 CDN 被配置为仅提供您所知道的静态现有文件。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-10-25T16:59:16.887

这家伙有类似的问题，并使用了 S3 / CloudFront。他的所有网址都重定向到 index.html，状态码为 200。

这是一种解决方法，因为它涉及将 index.html 设置为错误页面。

查看详情：[https ://kkob.us/2015/11/24/hosting-a-single-page-app-on-s3-with-proper-urls/](https://kkob.us/2015/11/24/hosting-a-single-page-app-on-s3-with-proper-urls/)

# extjs - 分页工具栏商店重新配置？

> ID：12323315
> 
> 赞同：2
> 
> 时间：2012-09-07T18:12:54.133
> 
> 标签：extjs, extjs4

在 ExtJS 网格上，您可以使用`reconfigure`以编程方式更改网格的存储。分页工具栏是否有等价物？

我已经多次查看分页工具栏的 ExtJS 文档，似乎没有重新配置或 setStore 功能，甚至没有要设置的存储属性。

顺便说一下，这是 ExtJS 4。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-07T18:38:14.710

`Ext.toolbar.Paging`有 mixin `Ext.util.Bindable`。因此，您只需调用`bindStore`方法，ExtJS 4.1 将自行完成所有其他工作。例如，我在 examples/grid 文件夹中编辑了 paging.js，并将以下工具栏添加到网格中：

```
 tbar: [{
        text: 'switch to store 2',
        handler: function() {
            pager.bindStore(store2);
            grid.reconfigure(store2);
            store2.loadPage(1);
        }
    }] 
```

这就是你需要做的。你可以在这里看到[在线演示](http://jsfiddle.net/guyfawkes/vwbwQ/)。

# jquery - 滑块 - 交叉淡入淡出而不是淡出和淡入

> ID：12323318
> 
> 赞同：0
> 
> 时间：2012-09-07T18:13:05.357
> 
> 标签：jquery

我正在为客户开发滑块。他已经完成了大部分工作，但他需要我找到一种方法让他的幻灯片交叉淡入淡出……而不是淡出和淡入。他真的很想保留代码的基础。

这是一个[小提琴](http://jsfiddle.net/5UYmu/1/)。

jQuery 看起来像这样：

```
$('.slider .slide:first').addClass('active').fadeIn(200);

function rotate(index) {
     $('.slider .slide.active').removeClass('active').fadeOut(200, function() { 
         $('.slider .slide:eq(' + index + ')').addClass('active').fadeIn(200);
     });   
}

$('.slider-nav li a').click(function() {    
    var index = $(this).parent().index('li');
    rotate(index);
    return false;
});

setInterval(function() {
    var $next = $('.slider .slide.active').next();

    if ($next.length == 0)
        $next = $('.slider .slide:first');

    rotate($next.index());
}, 2000);​ 
```

保留此代码，我需要对其进行修改以使图像淡入淡出。我知道有像 jQuery Cycle 这样的插件......但我需要保留客户端的代码并对其进行修改。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T18:17:35.023

我成功使用了如下功能：

```
function crossfade() {
   $(".slide").first().appendTo('.slider').fadeOut(200,'linear');
   $(".slide").first().fadeIn(200,'linear');
   setTimeout(crossfade, 2000);
}

$(function(){
    $(".slide").first().fadeIn(200);
    setTimeout(crossfade,2000);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T18:16:17.357

您需要将幻灯片放在容器内的绝对位置 1 上，位置为：relative;

然后改变你的功能

```
function rotate(index) {
    $('.slider .slide.active').removeClass('active').animate({'opacity' : 0});
    $('.slider .slide:eq(' + index + ')').addClass('active').animate({'opacity' : 1});
} 
```

# c# - 创建 Visio 对象时出错：“由于以下错误，检索具有 CLSID {...} 的组件的 COM 类工厂失败：80080005。”

> ID：12323321
> 
> 赞同：3
> 
> 时间：2012-09-07T18:13:10.837
> 
> 标签：c#, asp.net, office-interop

所以我有一个将不同的 Office 文件类型转换为 pdf 的应用程序，其中一种文件类型是 Visio。我也在做 Excel 和 Word Doc 文件，它们工作正常。

我在这一行得到错误：

```
Microsoft.Office.Interop.Visio.Application visApp = 
    new Microsoft.Office.Interop.Visio.Application(); 
```

我的 32 位服务器上安装了 32 位 Office，包括 Visio。

我的 Word 和 Excel 文件遇到了类似的错误，我需要做一些 DCOM 安全配置，方法是转到`Component Services > Computers > My Computer > DCOM Config`并添加 Microsoft Excel 应用程序和 Microsoft Word 97-2003 文档的权限。我更改了 Microsoft Visio 绘图的权限，但这并没有解决问题。

我不确定我还需要检查什么，有人知道我需要做什么吗？

# sql - Oracle - 使用数学和分组进行选择

> ID：12323323
> 
> 赞同：0
> 
> 时间：2012-09-07T18:13:16.283
> 
> 标签：sql, oracle

我有一张表，我想在上面运行一些计算，但这个 select 语句在我的 oracle 操舵室上方。

我想在甲骨文中尝试（尽可能多地）。但最终这将最终通过 php 运行以将输出输出到屏幕。

**这适用于 Oracle 8i**

**我有 4 条重要的数据**——（客户 ID、New_Item、Suggested_net 和按年计算的数量）

```
customer_id = #
new_item = 0 or 1
suggested_net = #
year_1_n =  #
year_2_n =  #
year_3_n =  #
year_1_e =  #
year_2_e =  #
year_3_e =  # 
```

new_items = 0 仅与 year_1_e、year_2_e、year_3_e 相关

new_items = 1 仅与 year_1_n、year_2_n、year_3_n 相关

**这是一个例子**

```
customer_id, new_item, suggested_net, year_1_n, year_2_n, year_3_n, year_1_e, year_2_e, year_3_e

2, 0, 4.25, null, null, null, 100, 100, 100;
2, 0, 5.25, null, null, null, 100, 100, 100;
3, 0, 2.50, null, null, null, 100, 100, 100;
1, 0, 3.50, null, null, null, 100, 100, 100;
2, 1, 5.99, 100, 200, 300, null, null, null;
3, 1, 4.99, 200, 400, 600, null, null, null; 
```

**所以我需要得到这个信息：** 对于每一行，将卷添加（year_x ...）*建议网络，然后将该数量添加到按 new_item = 0 或 1 分组的 customer_id 中。

所以使用上表

```
Customer 2, new_item = 0 would have a sum of (1275 + 1575)
Customer 1, new_item = 0 would have a sum of 1050
Customer 2, new_item = 1 would have a sum of 3594 
```

等等等等

现在这可能会也可能不会在 select 语句中执行或有效，但就像我说的那样，我想用 oracle 做尽可能多的繁重工作，其余的我可以用 php 处理。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T18:57:09.683

```
select customer_id
     , new_item
     , sum((nvl(year_1_n, 0) + 
            nvl(year_2_n, 0) + 
            nvl(year_3_n, 0) +
            nvl(year_1_e, 0) + 
            nvl(year_2_e, 0) + 
            nvl(year_3_e, 0)) *suggested_net) Total
  from t1
 group by customer_id
        , new_item 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T18:47:59.320

```
SELECT Coustomer_Id,
       new_item,
       SUM((CASE WHEN new_item = 1 THEN year_1_n + year_2_n + year_3_n 
                 WHEN new_item = 0 THEN year_1_e + year_2_e + year_3_e
            END ) * suggested_net) AS TotalSum
  FROM Table1
 GROUP BY Coustomer_Id,
       new_item 
```

或者

```
SELECT Coustomer_Id,
       new_item,
       SUM(DECODE(new_item, 1, year_1_n + year_2_n + year_3_n 
                          , 0, year_1_e + year_2_e + year_3_e
                          , 0) * suggested_net) AS TotalSum
  FROM Table1
 GROUP BY Coustomer_Id,
          new_item 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T18:56:41.583

试试这个：

选择 customer_id , new_item , sum(case new_item when 0 then Recommended_net*(year_1_e+year_2_e+year_3_e) else known_net*(year_1_n+year_2_n+year_3_n) end) 总计

从表

按 customer_id、new_item 分组；

# sql - 将 SQL 源文件与 bigquery cli 一起使用

> ID：12323326
> 
> 赞同：6
> 
> 时间：2012-09-07T18:13:35.657
> 
> 标签：sql, google-bigquery

是否可以在 bigquery CLI 中使用输入文件？

```
bq query < my_query.sql 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-07T21:12:45.850

如果您使用的是 unix（或在 Windows 上安装了 cygwin），则可以使用 xargs：

```
xargs -a my_query.sql -0 bq query 
```

或者，您可以使用反引号：

```
bq query `cat my_query.sql` 
```

请注意，bq 一次只能处理一个命令——如果您的 .sql 脚本有多个查询，则需要将文件拆分为 ;

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-01-31T14:48:21.727

我无法使用其他解决方案来处理非常长且复杂的查询，尤其是那些带有任何引号的查询。我有更多的运气将文件传送到 bq 工具中

```
cat test.sql | bq query 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-04-26T04:57:45.933

在 Windows 上，我正在使用这种方法。先决条件是将每个命令列在一行中。这将使用 bq 逐一处理行中的每个命令。

```
C:\temp>for /F "tokens=*" %A in (batch_query.sql) do bq query %A

C:\temp>bq query select count+1 from cmdwh_bq_prod.newtable ;
Waiting on bqjob_r63bf8c82_00000163004c7fd0_1 ... (0s) Current status: DONE
+-------+
|  f0_  |
+-------+
| 20136 |
+-------+

C:\temp>bq query select count+2 from cmdwh_bq_prod.newtable ;
Waiting on bqjob_r7ffd9b2a_00000163004c9348_1 ... (0s) Current status: DONE
+-------+
|  f0_  |
+-------+
| 20137 |
+-------+

C:\temp>bq query select count+3 from cmdwh_bq_prod.newtable ;
Waiting on bqjob_r223c57a3_00000163004ca682_1 ... (0s) Current status: DONE
+-------+
|  f0_  |
+-------+
| 20138 |
+-------+

C:\temp>
C:\temp>type batch_query.sql
select count+1 from cmdwh_bq_prod.newtable ;
select count+2 from cmdwh_bq_prod.newtable ;
select count+3 from cmdwh_bq_prod.newtable ;

C:\temp>bq query select * from cmdwh_bq_prod.newtable
Waiting on bqjob_r3a363e1b_00000163004f4dba_1 ... (0s) Current status: DONE
+-------+
| count |
+-------+
| 20135 |
+-------+

C:\temp> 
```

# asp.net-mvc - 如何通过actionlink将多个参数传递给控制器 并在视图中输出？

> ID：12323334
> 
> 赞同：0
> 
> 时间：2012-09-07T18:14:01.603
> 
> 标签：asp.net-mvc

我对 asp.net mvc3 还很陌生，我很难弄清楚这一点。我有一个动作链接，我想包含一个参数并传递给我的索引方法

> ```
> @Html.ActionLink("Click here", "Index", "Customer", new { customerid = item.custId}, new {       @class = "partiallink" }) 
> ```

我如何从控制器接收它？考虑到我的索引操作方法中没有方法参数，以及如何在视图中输出参数？

我想我想说的是把它传递给一些控制器方法，并且仍然返回带有参数的索引页面

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T18:30:57.460

您传递给操作链接的所有参数都成为查询字符串参数，即

```
@Html.ActionLink("Click here", "Index", "Customer", new { customerid = 111, someOtherParameter = 222, anotherParameter = 333} 
```

转移到链接/Customer/Index?customerid=111&someOtherParameter=222&anotherParameter=333。如果 Index 操作的签名是：您可以通过属性在控制器中获取它`Request.QueryString`或通过模型绑定器映射它：

```
ActionResult Index(int? customerid, int? someOtherParameter, string anotherParameter)
{
    .....
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T18:27:23.050

您是说，在您的客户控制器上，您希望能够将任何值或 customerid 传递给返回索引页面的索引操作吗？

假设您没有更改默认路由，您可以更改控制器操作以接受可为空的 int，然后根据 customerid 是否为空来获取模型：

```
 public ActionResult Index(int? customerid)
    {
        YourModelType model;
        if (customerid == null)
        {
            model = /* however you get your model when you don't have an id */
        }
        else
        {
            model = /* however you get your model when you have an id */;
        }

        return View("Index", model);
    } 
```

您还需要更新路由引擎以接受可选的 customerid 参数：

```
 routes.MapRoute(
            "Customer", // Route name
            "Customer/{action}/{customerid}", // URL with parameters
            new { controller = "Customer", action = "Index", customerid = UrlParameter.Optional } // Parameter defaults
        ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-03T10:54:14.887

您可以使用类似于下面的示例

```
@Html.ActionLink("Click here", "Index", "Customer", new { ID= 111,UID =222}, null) 
```

并在控制器中

```
[HttpGet,Route("Index/{ID}/{UID}")]
        public ActionResult EventView(int ID,int UID)
        {
        } 
```

请参考下面的链接，它很有用

[使用属性路由时查询字符串不起作用](https://stackoverflow.com/questions/22642874/query-string-not-working-while-using-attribute-routing)

# java - 比较列表

> ID：12323335
> 
> 赞同：6
> 
> 时间：2012-09-07T18:14:16.180
> 
> 标签：java, android, arrays, list

我有两个`List<String[]>`（字符串数组列表），我想将内容相互匹配。显然`==`没有做到这一点，但`.equals ()`似乎也没有做到。那么如何检查字符串数组列表的内容是否相同呢？

顺便说一句，在上述两种情况下，我都遇到了 message 异常`null`。

**编辑：**好的......由于某种原因只能`x.equals(y)`工作，而不是`y.equals(x)`. 奇怪的...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-07T18:35:27.907

也许最简单的解决方案是使用两个`List<List<String>>`s。假设`List`使用的实现 extend `AbstractList`， using`equals`会给你想要的行为。从文档中[`AbstractList.equals`](http://docs.oracle.com/javase/7/docs/api/java/util/AbstractList.html#equals%28java.lang.Object%29)：

> 比较指定对象与此列表是否相等。`true`当且仅当指定对象也是一个列表时返回 ，两个列表具有相同的大小，并且两个列表中所有对应的元素对都*相等*。（如果 ，则两个元素`e1`和`e2`相等`(e1==null ? e2==null : e1.equals(e2))`。）换句话说，如果两个列表以相同的顺序包含相同的元素，则它们被定义为相等。

您可以轻松地将 a 包装在一个通过使用扩展`String[]`的瘦`List<String>`实现中。`AbstractList`[`Arrays.asList`](http://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html#asList%28T...%29)

**编辑：**这是一个例子：

```
String[] array1 = {"1", "2", "3"};
String[] array2 = {"4", "7"};

String[] array3 = {"1", "2", "3"};
String[] array4 = {"4", "7"};

List<List<String>> lst1 = new ArrayList<>();
lst1.add(Arrays.asList(array1));
lst1.add(Arrays.asList(array2));

List<List<String>> lst2 = new ArrayList<>();
lst2.add(Arrays.asList(array3));
lst2.add(Arrays.asList(array4));

System.out.println(lst1.equals(lst2)); //prints true 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-07T18:36:19.193

通常你应该避免处理数组。它们很丑陋并导致这些问题。如果可能使用`List<List<String>>`，那么您可以`.equals()`正常使用。

如果您坚持，您可以使用如下的自定义 isequal 实现。关键是使用`Arrays.equals()`

```
public class DemoEquals {
    List<String[]> listOne = (List<String[]>) Arrays.asList(new String[]{"one1", "one2"}, new String[]{"two1"});
    List<String[]> listOneOne = (List<String[]>) Arrays.asList(new String[]{"one1", "one2"}, new String[]{"two1"});
    List<String[]> listTwo = (List<String[]>) Arrays.asList(new String[]{"2one1", "2one2"}, new String[]{"2two1"});

    private boolean isEqual(List<String[]> list1, List<String[]> list2) {
        if (list1.size() != list2.size()) return false;
        for (int i = 0; i < list1.size(); i++) {
            if (!Arrays.equals(list1.get(i), list2.get(i))) return false;
        }
        return true;
    }
    @SuppressWarnings("unchecked")
    private void isEqual() {
        //prints true
        System.out.println(isEqual(Collections.EMPTY_LIST, Collections.EMPTY_LIST));
        //prints true
        System.out.println(isEqual(listOne, listOne));
        //prints true
        System.out.println(isEqual(listOne, listOneOne));
        //prints false
        System.out.println(isEqual(listOne, listTwo));
        //prints false
        System.out.println(isEqual(listOne, Collections.EMPTY_LIST));

    }
    public static void main(String[] args) {
        new DemoEquals().isEqual();
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T18:39:36.947

您可以使用 INTERFACE Comparable。实现所需的方法，您可以使用 List1.compare(List2) 函数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-09T10:24:50.620

只是`.equals()`工作正常，但不知何故只在一个方向。

我打算接受这个问题的第一个答案，但显然那个人删除了他的答案。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-09-07T18:39:53.527

使用 Jon Skeet 关于[如何将列表转换为字符串](https://stackoverflow.com/questions/599161/best-way-to-convert-an-arraylist-to-a-string)（使用番石榴）的答案，另一种选择是将 2 个列表转换为 2 个字符串，然后使用`equals`. 没有循环。

# wmi - WMI 和 MS 直接显示

> ID：12323338
> 
> 赞同：0
> 
> 时间：2012-09-07T18:14:27.970
> 
> 标签：wmi, directshow

我正在为用户收集所有硬件信息有没有办法检查最终用户是否有可用的[MS Directshow](http://msdn.microsoft.com/en-us/library/windows/desktop/dd375454%28v=vs.85%29.aspx)？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T05:18:01.620

唯一一次 DirectShow 可能不可用是在没有安装 DirectX 的 Win95 上。自 Win98 以来，它是系统的默认组件。如果你正在编写一个 Win8 Metro 应用程序也是不可用的，这里你需要使用 Media Foundation。但对于 Win8 桌面应用程序，它仍然可用。

如果你真的真的很想测试它是否可用，那么尝试创建一个过滤器图。

```
IGraphBuilder *pGraph = NULL;
HRESULT hr = CoCreateInstance(CLSID_FilterGraph, NULL,
                 CLSCTX_INPROC_SERVER, IID_IGraphBuilder, (void **)&pGraph); 
```

如果`hr`不是`S_OK`或`pGraph`静止`NULL`，则它不可用。

或者有另一个可能的时间 DirectShow 或它的一部分不可用：如果有人完全搞砸了他的系统并注销了所需的 COM dll！

# c# - 类的泛型类型不能接受该类的派生类型的泛型类型

> ID：12323340
> 
> 赞同：2
> 
> 时间：2012-09-07T18:14:32.977
> 
> 标签：c#

> **可能重复：**
> [将派生类的 List<> 转换为基类的 List<>](https://stackoverflow.com/questions/3720751/casting-list-of-derived-class-to-list-of-base-class)

标题可能没有什么意义。见代码：

```
class Person {}

class Manager : Person {}

class PaymentCalculator<T> where T : Person
{
    public double Calculate(T person)
    {
        return 0;    // calculate and return
    }
}

class Calculators : List<PaymentCalculator<Person>>
{
    public Calculators()
    {
        this.Add(new PaymentCalculator<Person>());
        this.Add(new PaymentCalculator<Manager>());     // this doesn't work

        PassCalculator(new PaymentCalculator<Person>());
        PassCalculator(new PaymentCalculator<Manager>());   // this doesn't work
    }

    public void PassCalculator(PaymentCalculator<Person> x)
    { }
} 
```

代码中标记为“这不起作用”的两行将无法编译。

我可以解决这个问题，但我的意图似乎没有错。或者，是吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T18:24:14.120

没错。“默认情况下”`new MyClass<Derived>()`不可分配给`new MyClass<Base>()`. 但是您可以使用[接口的协方差来](http://blogs.msdn.com/b/csharpfaq/archive/2010/02/16/covariance-and-contravariance-faq.aspx)解决问题：

```
class Person { }

class Manager : Person { }

interface IPaymentCalculator<out T> where T : Person
{
}

class PaymentCalculator<T> : IPaymentCalculator<T> where T : Person
{
    public double Calculate(T person)
    {
        return 0;    // calculate and return
    }
}

class Calculators : List<IPaymentCalculator<Person>>
{
    public Calculators()
    {
        this.Add(new PaymentCalculator<Person>());
        this.Add(new PaymentCalculator<Manager>());     // this doesn't work

        PassCalculator(new PaymentCalculator<Person>());
        PassCalculator(new PaymentCalculator<Manager>());   // this doesn't work
    }

    public void PassCalculator(IPaymentCalculator<Person> x)
    { }
} 
```

这将编译并工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T18:26:07.630

即使`Manager`继承自`Person`，`PaymentCalculator<Manager>`也不继承自`PaymentCalculator<Person>`。如果`PaymentCalculator<T>`是[contravariant](http://msdn.microsoft.com/en-us/library/dd799517.aspx)，它会起作用，但类在 .NET 中不能是逆变的（只有接口和委托可以是逆变的）。

解决您的问题的一个可能方法是声明一个逆变接口，如下所示：

```
interface IPaymentCalculator<in T> // "in" means contravariant
{
    double Calculate(T person);
} 
```

Make`PaymentCalculator<T>`实现`IPaymentCalculator<T>`接口：

```
class PaymentCalculator<T> : IPaymentCalculator<T> where T : Person
{
    public double Calculate(T person)
    {
        return 0;    // calculate and return
    }
} 
```

并使`Calculators`类继承自`List<IPaymentCalculator<Person>>`

```
class Calculators : List<IPaymentCalculator<Person>> 
```

通过这些更改，它应该可以按您的预期工作。

# android - Google 是否正式停止在 ICS 中支持 C2DM 通知？

> ID：12323349
> 
> 赞同：1
> 
> 时间：2012-09-07T18:15:19.140
> 
> 标签：android, android-c2dm, google-cloud-messaging

所以我知道 C2DM 已被弃用，我们最终不得不切换到 GCM，但我没想到他们会立即取消它。

我的应用程序目前正在使用 C2DM，它在运行 Android 2.3 等的设备上仍然可以正常工作。即使应用程序已完全终止。

但是，在 ICS 上，当您终止应用程序时，C2DM 消息根本不会到达。

Google Cloud To Device 消息服务不再显示在正在运行的“Google 服务”下。

有没有人有任何关于在 ICS 中删除 C2DM 服务流程的官方信息？

如果我们希望设备在应用程序未运行时接收消息，是否是唯一的解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T19:19:26.553

是的，您必须转到 GCM。但是，当您的客户端更新时，可以同时激活 CD2M 和 GCM。

在您的服务器端应用程序中，您必须跟踪注册 ID 是来自 C2DM 还是 GCM，并使用正确的端点。

您可以在此处找到有关如何正确从 CD2M 迁移到 GCM 的更多信息：http: [//developer.android.com/guide/google/gcm/c2dm.html](http://developer.android.com/guide/google/gcm/c2dm.html)

# objective-c - 在 iOS 中重用自定义工具栏

> ID：12323351
> 
> 赞同：0
> 
> 时间：2012-09-07T18:15:23.790
> 
> 标签：objective-c, ios, xcode

我创建了这个漂亮的自定义工具栏，它位于我的一个场景中，这个场景使用它自己的视图控制器。在此之前，我不需要将它放在任何其他视图控制器上，但是在对我的应用程序进行修改后，我现在需要将此工具栏放在另一个视图控制器/场景上。我宁愿不必重新创建它的整个 UI 方面并连接所有内容。

我已经使用情节提要在场景中创建了这个工具栏。是否有可能以某种方式重用我为此工具栏创建的所有元素（所有逻辑的代码已经位于它自己的类中）？或者我是否需要在代码中创建整个工具栏才能做到这一点？有没有我不知道的更简单的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T18:20:59.313

我认为你在这里有两个选择。一种方法是将自定义工具栏视图始终保留在屏幕上，并将其周围的视图更改为您喜欢的任何视图。另一种选择是从您需要的任何类创建工具栏的实例，然后在每次需要时将其视图添加为子视图。

无论哪种方式，我认为您可能需要重新设计一些工具栏以使其不在场景中，而是拥有它自己的。

# postgis - postgis，外推一行

> ID：12323355
> 
> 赞同：2
> 
> 时间：2012-09-07T18:15:36.007
> 
> 标签：postgis

我正在尝试从线段推断以找到在线上的一个点，但是“返回”的第三个点，即尝试找到 point `new`，给定点`A`及`B`以下：

![在此处输入图像描述](../Images/8e2610fcda61cdeee592dd6cf7afe865.png)

给定一条线，我可以对其进行插值以获得沿它的任何特定百分比的位置：

```
=# select st_line_interpolate_point(
   st_makeline('0101000020E6100000300DC347C49418C03EE8D9ACFAA44A40', 
               '0101000020E6100000FB743C66A03218C0CDCCCCCCCC7C4A40'), 
   0.333);
0101000020E6100000ED45B41D537718C069C6A2E9EC984A40 
```

我尝试输入一个负数以沿着相反方向的线找到一个点，但这失败了，因为插值参数必须在 [0, 1] 范围内

我考虑过首先缩放线条，但这并不使用线条的中心作为原点，所以对我的目的没有用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T10:54:13.890

已经解决了：

```
F = 1.3333
st_affine(A, F, 0, 
             0, F, 
            (F-1)*-st_x(st_line_interpolate_point(st_makeline(A, B), 0.5)), 
            (F-1)*-st_y(st_line_interpolate_point(st_makeline(A, B), 0.5))
          ) 
```

解释：

(2-d) 以线段的中点为原点，将起点缩放 1.3333 倍。

拿出方格纸！

[http://en.wikipedia.org/wiki/Affine_transformation](http://en.wikipedia.org/wiki/Affine_transformation)

# javascript - 使用 jquery 创建 dom 元素会导致 ie9 给出拒绝访问错误

> ID：12323359
> 
> 赞同：0
> 
> 时间：2012-09-07T18:15:59.510
> 
> 标签：javascript, jquery, internet-explorer

我正在尝试通过

```
$('<div class=\"slideshow\"></div>') 
```

除了在 IE9 中工作正常，它说

```
SCRIPT5: Access denied 
```

但我没有做跨域 http 请求。我尝试在控制台中隔离那一行代码，所以我知道这是错误的根源。

关于可能发生的事情有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T18:18:01.697

尝试使用[**createElement** ()](http://www.w3schools.com/jsref/met_document_createelement.asp) javascript 方法。

```
div1 = document.createElement('div');
div1.className = "slideshow"; 
```

# magento - 覆盖 Magento 块和模板

> ID：12323363
> 
> 赞同：3
> 
> 时间：2012-09-07T18:16:26.210
> 
> 标签：magento

我正在尝试用我的模块中提供的新模块覆盖 Mage_Catalog_Block_Product_Price_Template 块和模板，通过设置配置覆盖块是可以的：

```
<global>
    <blocks>
        <catalog>
            <rewrite>
                <product_price>ABC_PriceX_Block_Price</product_price>
            </rewrite>
        </catalog>
    </blocks>
</global> 
```

新块被调用

```
<?php

class ABC_PriceX_Block_Price extends Mage_Catalog_Block_Product_Price_Template {

    protected function _construct() {
        parent::_construct();

        Mage::log('I am in ABC block');
        $this->setTemplate('pricex/price.phtml');

        Mage::log('Template file is '. $this->getTemplateFile() );
    }

} 
```

但是我得到了一个非常奇怪的行为，价格块不再出现在前端，我在日志文件中得到的只是

```
2012-09-07T18:05:38+00:00 DEBUG (7): I am in ABC block
2012-09-07T18:05:38+00:00 DEBUG (7): Template file is 
```

并且模板未呈现：

```
<p>
<?php Mage::log('I am in ABC template'); ?>
</p> 
```

我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-07T18:58:53.060

您没有提到 Magento 版本，**但**在 Magento 1.7.0.1 的香草安装中`Mage_Catalog_Block_Product_Price_Template`，尽管名称具有误导性，但该类不是**模**板块类。

```
#File: app/code/core/Mage/Catalog/Block/Product/Price/Template.php
class Mage_Catalog_Block_Product_Price_Template extends Mage_Core_Block_Abstract
{
    ...
} 
```

`Mage_Core_Block_Abstract`请注意，它从而不是延伸`Mage_Core_Block_Template`。

所以，既然它是一个块，你可以设置一个模板

```
$this->setTemplate('pricex/price.phtml'); 
```

但这只是块的魔力`get`和`set`方法。同样，当您调用`getTemplateFile`Magento 时返回 null，因为`setTemplateFile`尚未在您的块上调用任何人。（与继承自 的块相反`Mage_Core_Block_Template`，它实际上具有已定义的`getTemplateFile`方法。

您的主要问题是当它不是模板块时，您将`Mage_Catalog_Block_Product_Price_Template`其视为模板块。这由同一块的布局更新 XML 代码支持

```
<block type="catalog/product_price_template" name="catalog_product_price_template" /> 
```

# android - 使用相机对象旋转后图像混叠

> ID：12323365
> 
> 赞同：1
> 
> 时间：2012-09-07T18:16:33.893
> 
> 标签：android, android-canvas

我正在使用 android.graphics.Camera 中的 Camera 对象来旋转一些图像。问题是旋转后，图像的边缘变得锯齿。有什么方法可以在绘制到画布之前对图像应用抗锯齿。

# android - 应用程序名称与图标标签不同

> ID：12323369
> 
> 赞同：3
> 
> 时间：2012-09-07T18:17:19.807
> 
> 标签：android

是否可以有一个与图标下显示的标签不同的应用程序名称？我有一个名称很长的应用程序，我想为图标下的标签使用首字母缩写词，但仅用于标签。在 Google Play 和其他任何地方，我都希望显示全名。例如，名称为“Special Weapons And Tactics”，标签为“SWAT”。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T18:31:34.383

当您将它上传到开发者控制台时，您会在那里选择 Google Play 显示名称，它不会从您的应用程序中读取它。因此，无论您选择什么作为`android:label`每个 Activity 的属性，都将显示为启动器图标下的标签。不过，您可以在 Google Play 上选择任何您想要的标题。

# gstreamer - gstreamer 中的 Appsrc 搜索模式

> ID：12323370
> 
> 赞同：2
> 
> 时间：2012-09-07T18:17:22.260
> 
> 标签：gstreamer

我正在使用 appsrc 作为我的 gstreamer 管道的源。我已将“seek-data”信号连接到回调函数，并已完成以下示例代码中提到的所有操作：http: [//cgit.freedesktop.org/gstreamer/gst-plugins-base/tree/tests/examples/应用程序/appsrc-seekable.c](http://cgit.freedesktop.org/gstreamer/gst-plugins-base/tree/tests/examples/app/appsrc-seekable.c)

但是，我不确定如何从我的代码中发出寻找信号。g_signal_emit_by_name 似乎是这样做的方式，但它对我不起作用。

如果有人知道如何使它工作，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-22T20:58:10.090

当appsrc 的类型为`GST_APP_STREAM_TYPE_SEEKABLE`，并且appsrc 的emit-signals 属性为`true`时，seek-event 信号将在正常的seek 事件到达appsrc 时发送。连接回调函数（您提供的链接中的seek_data）后，您可以通过调用普通的 gst_element_seek(pipeline, ...) 函数进行搜索。

请参阅 [http://gstreamer.freedesktop.org/data/doc/gstreamer/head/manual/html/section-eventsseek.html](http://gstreamer.freedesktop.org/data/doc/gstreamer/head/manual/html/section-eventsseek.html)（寻求）
和 [http://gstreamer.freedesktop.org/data/doc/gstreamer/head/ gst-plugins-base-libs/html/gst-plugins-base-libs-appsrc.html](http://gstreamer.freedesktop.org/data/doc/gstreamer/head/gst-plugins-base-libs/html/gst-plugins-base-libs-appsrc.html) (appsrc)

# javascript - 通过 jQuery 插入 HTML 不起作用

> ID：12323371
> 
> 赞同：2
> 
> 时间：2012-09-07T18:17:32.567
> 
> 标签：javascript, jquery, html

我已经查看了使用 javascript 插入 HTML 的多种方法，包括 jQuery .prepend 和 .innerHTML ，无论我做什么，我都会得到相同的输出：

```
'); } 
```

如果屏幕分辨率具有一定宽度，我正在尝试插入 HTML。这是我尝试过的两个脚本：

```
<script type="text/javascript" charset="utf-8" >

if (screen.width >= 500)
{
$('#stemanimation_hype_container').prepend('<script type="text/javascript" charset="utf-8" src="STEM%20Animation_Resources/stemanimation_hype_generated_script.js?58608></script>');

}
</script>

<div id="stemanimation_hype_container" style="position:relative;overflow:hidden;width:900px;height:300px;">
</div> 
```

另一个：

```
<script type="text/javascript" charset="utf-8" >

if (screen.width >= 500)
{
document.getElementById("stemanimation_hype_container").innerHTML='<script type="text/javascript" charset="utf-8" src="STEM%20Animation_Resources/stemanimation_hype_generated_script.js?58608'></script>";

}

</script>
<div id="stemanimation_hype_container" style="position:relative;overflow:hidden;width:900px;height:300px;">
</div> 
```

知道会发生什么吗？我在只有 jquery 而没有其他脚本的页面上对此进行测试，以确保没有冲突。谢谢你能给我的任何帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-07T18:20:26.890

您在定义要插入的 html 的字符串中有错误

```
'<script type="text/javascript" charset="utf-8" src="STEM%20Animation_Resources/stemanimation_hype_generated_script.js?58608'></script>"; 
```

应该：

```
'<script type="text/javascript" charset="utf-8" src="STEM%20Animation_Resources/stemanimation_hype_generated_script.js?58608"></script>'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T18:24:01.157

您的原始代码很好，但是这个错误：

```
..._script.js?58608"></script>');
                // ^ Forgot a " 
```

或者，我可能会建议使用`document.createElement`并将其附加到容器中：

```
var script = document.createElement('script');
script.type = 'text/javascript';
script.src = '..._script.js?58608';
document.getElementById('stemanimation_hype_container').appendChild(script); 
```

或者，jQuery 方式：

```
$('<script>',{
  'type' : 'text/javascript',
  'src' : '..._script.js?58608'
}).appendTo('#stemanimation_hype_container'); 
```

*（注意我`...`在代码中使用是为了简洁，而不是准确）*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-07T18:21:29.353

您的第一个代码块缺少`"`后`?58608`

您的第二个代码块有一个after`'`应该有的地方，反之亦然。`"``?58608`

尝试

```
$('#stemanimation_hype_container').prepend('<script type="text/javascript" charset="utf-8" src="STEM%20Animation_Resources/stemanimation_hype_generated_script.js?58608"></script>'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-07T20:21:05.040

You need to put the script block at the end of your HTML. Right now, you are looking for $('#stemanimation_hype_container') before that div has been inserted into the DOM, and so it doesn't exist when the JS is run. That's why nothing happens.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-07T18:22:37.717

如果您发布的代码是您正在尝试的实际代码，那么您在 jq 示例中有一个不匹配的双引号，而在另一个版本中有一个双引号。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-07T18:31:10.143

在这两个示例中，我都看到 src 属性中引号的使用不一致。您以双引号开头，但以单引号结尾。尝试用双引号结束它。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-01T02:01:50.163

我想让它正常工作的问题实际上是与 Tumult Hype 的 CSS3 动画脚本的严重冲突。代码示例，除了我关于双引号的错字之外，实际上对于大多数应用程序都是正确的。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-09-07T18:20:20.127

你有没有试过这个：

```
$('#stemanimation_hype_container').html('<script type="text/javascript" charset="utf-8" src="STEM%20Animation_Resources/stemanimation_hype_generated_script.js?58608"></script>'); 
```

# c - 如何在 DEV-CPP 中构建链接到静态库的控制台应用程序时解决对 _imp__** 的未定义引用？

> ID：12323374
> 
> 赞同：1
> 
> 时间：2012-09-07T18:17:48.567
> 
> 标签：c, compiler-errors, gaul

**背景信息**
我正在尝试根据此[Instructions](http://gaul.sourceforge.net/windows-DevCPP.html)构建 GAUL 库。

**问题**
我在 C 语言中有两个静态库，由我在 Dev-CPP Windows 7 64 位中构建，一个引用另一个。

为了测试那些我创建了一个引用它们的控制台应用程序。

好吧，当我尝试编译时，这是我得到的日志：

```
> 编译器：默认编译器  
> 构建 Makefile：“C:\Soft\GAUL\Makefile.win”  
> 执行制作...  
> make.exe -f  
> "C:\Soft\GAUL\Makefile.win" 全部  
> **gcc.exe ../gaul-devel-windows/examples/struggle.o -o "struggle.exe" -L"C:/Dev-Cpp/lib" gaul-util.a gaul-devel.a* *    
>   
> gaul-util.a(memory_util.o)(.text+0x2e):memory_util.c: 未定义引用 '_imp__mem_chunk_new_real'  
> gaul-util.a(memory_util.o)(.text+0x6c):memory_util.c: 未定义引用 '_imp__mem_chunk_free_real'  
> ...  
> gaul-devel.a(ga_core.o)(.text+0x101):ga_core.c: 未定义对“slink_free_all”的引用   
> gaul-devel.a(ga_core.o)(.text+0x360):ga_core.c: 未定义对“mem_chunk_new_real”的引用  
> ...  
> collect2: ld 返回 1  
> 退出状态
>
> make.exe: *** [struggle.exe] 错误 1
>
> 执行终止

```

我**认为**这与`gcc`命令中使用的参数有关。

 **我尝试过的**实际状态**
： - 将库复制到 C:\Dev-Cpp\lib
- 在库名称之前使用整个地址 - 在库名称
之前使用 -l -在名称之后
不使用`.a`**

 **任何这些都没有成功的结果。

谁能指出我正确的方向？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T21:04:00.063

链接器 (ld) 的参数顺序很重要。如果您的构建在

```
gcc.exe ../gaul-devel-windows/examples/struggle.o  -o "struggle.exe" -L"C:/Dev-Cpp/lib" gaul-util.a gaul-devel.a 
```

行，然后尝试颠倒最后两个文件的顺序：

```
gcc.exe ../gaul-devel-windows/examples/struggle.o  -o "struggle.exe" -L"C:/Dev-Cpp/lib" gaul-devel.a gaul-util.a 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T05:10:14.133

最后，正如@ThiefMaster♦ 所说，我在这种情况下使用了一个更新的构建器 VC++，它就可以工作了！**

# google-maps - 任何 openMap mraid 或 ormma API 调用示例

> ID：12323377
> 
> 赞同：0
> 
> 时间：2012-09-07T18:18:07.193
> 
> 标签：google-maps, mobile, maps, openmap

我希望使用 iab 中的 ormma 或 mraid api 在广告单元中显示地图。

我正在寻找一个简单的示例，说明如何使用采用 POI 的 openMap() 方法。

我尝试了一些实验，但至少在 mraid 网络测试仪中似乎没有任何效果。

谁知道这个界面怎么用？

谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T19:58:04.633

测试这部分代码：

```
<a href=\"\" onclick=\"Ormma.openMap('http://maps.google.ru/maps?f=q&source=s_q&hl=ru&geocode=&q=%D1%80%D0%B5%D1%81%D0%BF%D1%83%D0%B1%D0%BB%D0%B8%D0%BA%D0%B0+%D0%9C%D0%B0%D1%80%D0%B8%D0%B9+%D0%AD%D0%BB,+%D0%99%D0%BE%D1%88%D0%BA%D0%B0%D1%80-%D0%9E%D0%BB%D0%B0&aq=0&sll=55.178868,49.658203&sspn=25.499525,80.683594&ie=UTF8&hq=&hnear=%D0%B3%D0%BE%D1%80%D0%BE%D0%B4+%D0%99%D0%BE%D1%88%D0%BA%D0%B0%D1%80-%D0%9E%D0%BB%D0%B0,+%D1%80%D0%B5%D1%81%D0%BF%D1%83%D0%B1%D0%BB%D0%B8%D0%BA%D0%B0+%D0%9C%D0%B0%D1%80%D0%B8%D0%B9+%D0%AD%D0%BB&ll=56.642637,47.891464&spn=0.19029,0.630341&t=k&z=11&iwloc=A', true); return false;\">OPEN MAP</a> 
```

我还留下了链接，您可以在其中找到每个地图的属性 siginificado，并将其添加到 URL

[谷歌地图参数链接](http://mapki.com/wiki/Google_Map_Parameters)

我希望你工作

# java - 安装错误：Java 关键更新后 OS X Mountain Lion 上的 INSTALL_PARSE_FAILED_NO_CERTIFICATES

> ID：12323378
> 
> 赞同：0
> 
> 时间：2012-09-07T18:18:07.063
> 
> 标签：java, android, macos, certificate

昨天我用那些更新了 OS X 中的 java SE

```
$ java -version
java version "1.6.0_35"
Java(TM) SE Runtime Environment (build 1.6.0_35-b10-428-11M3811)
Java HotSpot(TM) 64-Bit Server VM (build 20.10-b01-428, mixed mode) 
```

ADT 停止编译我的应用程序，没有其他任何变化，阅读了很多似乎是这个升级是问题，最重要的一个是我没有找到如何降级 java 版本或修复这个问题，无法更新到 java SE 7，因为 Android 它基于 java SE 6（更准确地说是不完全支持 java SE 6 的 Apache Harmony）。

还有另一种解决方法吗？

```
Im using OS X Mountain Lion 10.8.1
Java SE 6 "1.6.0_35-b10-428-11M3811"
Eclipse 4.2.0
ADT 20.0.3.v201208082019-427395 
```

在我得到的 LogCat

```
Package com.xxx.xxx has no certificates at entry res/drawable/close.png; ignoring! 
```

并且项目没有这样的文件，所以我假设它是Android SDK本身的可绘制对象。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T21:52:29.077

问题是一些似乎与这个 java 版本冲突的库，在这种情况下是 org.apache 中的所有库 commons-io 和 commons-lang3，当从那里删除不需要的文件时，我能够编译它。

确切的控制台日志是

```
Installation error: INSTALL_PARSE_FAILED_NO_CERTIFICATES
Error generating final archive: Found duplicate file for APK: templates/release-notes.vm
Origin 1: path_to_project/libs/commons-lang3-3.1-sources.jar
Origin 2: path_to_project/libs/commons-lang3-3.1.jar 
```

有 2 个错误，当删除这些文件时我能够运行它，当我尝试复制它时，我只是得到了 APK 的重复文件，似乎安装后密钥库被清理或类似的东西，这个特定的错误停止apk的编译和签名。

# javascript - 如何根据内容调整文本区域的大小

> ID：12323383
> 
> 赞同：1
> 
> 时间：2012-09-07T18:18:20.903
> 
> 标签：javascript, textarea, height

我正在以编程方式将内容添加到文本区域，如下所示（其中@muse.text 是我要在文本区域中显示的内容）

```
$(@el).find('.context textarea').text @muse.text
$(@el).find('.context textarea').elastic() 
```

但是，当我检查 textarea 时，并没有看到全部内容

![在此处输入图像描述](../Images/faa54c22db6914e8009b7d16199cb770.png)

我要显示的实际内容

![在此处输入图像描述](../Images/e848e797018fd8e9850949a2daacee78.png)

如何以编程方式将 textarea 设置为内容的高度？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T18:28:44.267

你做过[谷歌搜索](https://www.google.se/search?q=jquery+resize+textarea+content)吗？

首先我发现这是[http://www.jacklmoore.com/autosize](http://www.jacklmoore.com/autosize)，这正是你想要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T18:45:50.880

我在[Fiddle](http://jsfiddle.net/4VdL4/)写了一些代码。这将以简单的方式帮助您
**HTML**

```
<div id="contextwrapper">
    <div class="context">
        <textarea>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse ut mauris dictum massa accumsan elementum at id sapien. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubiliaLorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse ut mauris dictum massa accumsan elementum at id sapien. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae; Phasellus id dui ac leo tincidunt sodales in sit amet leo. Etiam placerat vehicula lorem nec auctor. Aliquam luctus justo nec lacus laoreet tempus. Cras tristique sem ut lectus ornare non rutrum ipsum cursus. Vestibulum vel ipsum mi.

Mauris hendrerit, purus ut ultrices tristique, libero neque eleifend lectus, non ultrices odio nulla sed nisi. Quisque mollis posuere hendrerit. Cras lectus leo, dictum id viverra eu, interdum ac arcu. Cras eget mattis sem. In in eros magna. Nulla molestie, eros sed vulputate suscipit, nibh arcu pulvinar eros, nec placerat neque neque sed sem. Aenean nunc dui, sodales at aliquam elementum, porttitor sit amet felis. Nunc sed sapien eu quam venenatis convallis a nec ante. Donec varius nisl non neque posuere sed interdum diam tempus. Donec dui dolor, aliquet ac mattis eu, dapibus a enim. Nulla dui libero, molestie id suscipit laoreet, vehicula ut nunc. Donec eu libero urna, sit amet malesuada justo. Nulla bibendum vehicula dui, at tempor mi condimentum semper. Sed eget lorem dolor. Fusce suscipit erat quis nulla sollicitudin pellentesque.

Aliquam scelerisque mollis ante condimentum auctor. Proin laoreet pharetra egestas. Quisque lacinia ipsum in ligula tristique eget ornare leo scelerisque. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae; Sed augue est, tincidunt ac lobortis placerat, imperdiet at neque. Suspendisse erat justo, elementum vel adipiscing non, mollis sit amet ligula. Sed vitae tempor nunc.

Vivamus molestie, nulla et posuere fermentum, ligula nibh suscipit orci, id interdum dui ipsum quis nisi. Vestibulum tincidunt urna quis elit semper ullamcorper. Maecenas scelerisque accumsan volutpat. Maecenas placerat accumsan vulputate. Proin rhoncus rhoncus tempor. Nulla hendrerit consectetur velit posuere commodo. Aliquam tempus malesuada sapien, nec hendrerit nibh dignissim id.

Curae; Phasellus id dui ac leo tincidunt sodales in sit amet leo. Etiam placerat vehicula lorem nec auctor. Aliquam luctus justo nec lacus laoreet tempus. Cras tristique sem ut lectus ornare non rutrum ipsum cursus. Vestibulum vel ipsum mi.

Mauris hendrerit, purus ut ultrices tristique, libero neque eleifend lectus, non ultrices odio nulla sed nisi. Quisque mollis posuere hendrerit. Cras lectus leo, dictum id viverra eu, interdum ac arcu. Cras eget mattis sem. In in eros magna. Nulla molestie, eros sed vulputate suscipit, nibh arcu pulvinar eros, nec placerat neque neque sed sem. Aenean nunc dui, sodales at aliquam elementum, porttitor sit amet felis. Nunc sed sapien eu quam venenatis convallis a nec ante. Donec varius nisl non neque posuere sed interdum diam tempus. Donec dui dolor, aliquet ac mattis eu, dapibus a enim. Nulla dui libero, molestie id suscipit laoreet, vehicula ut nunc. Donec eu libero urna, sit amet malesuada justo. Nulla bibendum vehicula dui, at tempor mi condimentum semper. Sed eget lorem dolor. Fusce suscipit erat quis nulla sollicitudin pellentesque.

Aliquam scelerisque mollis ante condimentum auctor. Proin laoreet pharetra egestas. Quisque lacinia ipsum in ligula tristique eget ornare leo scelerisque. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae; Sed augue est, tincidunt ac lobortis placerat, imperdiet at neque. Suspendisse erat justo, elementum vel adipiscing non, mollis sit amet ligula. Sed vitae tempor nunc.

Vivamus molestie, nulla et posuere fermentum, ligula nibh suscipit orci, id interdum dui ipsum quis nisi. Vestibulum tincidunt urna quis elit semper ullamcorper. Maecenas scelerisque accumsan volutpat. Maecenas placerat accumsan vulputate. Proin rhoncus rhoncus tempor. Nulla hendrerit consectetur velit posuere commodo. Aliquam tempus malesuada sapien, nec hendrerit nibh dignissim id.
</textarea>
    </div>
</div>

<div id="hidden"></div>​ 
```

**CSS**

```
#contextwrapper .context textarea{
    width:150px;
    height: 150px;
}

#hidden{
    border: 1px solid red;
    display: none;
} 
```

**jQuery** ​</p>

```
var content = jQuery("#contextwrapper").find(".context textarea").val();
jQuery("#hidden").html(content);

divHeight = jQuery("#hidden").height();
divWidth = jQuery("#hidden").width();

jQuery("#contextwrapper").find(".context textarea").css({width:divWidth+'px', height:divHeight+'px'}); 
```

# z3 - z3py：解析小实数时出错

> ID：12323384
> 
> 赞同：4
> 
> 时间：2012-09-07T18:18:21.710
> 
> 标签：z3, z3py

我正在尝试将 z3py 集成到我的应用程序中。有些断言涉及小实数，例如

```
solver.add(x <= 1e-6) 
```

然后我收到以下错误：

```
File "~/src/solver/z3.py", line 2001, in __le__
  a, b = _coerce_exprs(self, other)
File "~/src/solver/z3.py", line 846, in _coerce_exprs
  b = s.cast(b)
File "~/src/solver/z3.py", line 1742, in cast
  return RealVal(val, self.ctx)
File "~/src/solver/z3.py", line 2526, in RealVal
  return RatNumRef(Z3_mk_numeral(ctx.ref(), str(val), RealSort(ctx).ast), ctx)
File "~/src/solver/z3core.py", line 1774, in Z3_mk_numeral
  raise Z3Exception(lib().Z3_get_error_msg_ex(a0, err))
src.solver.z3types.Z3Exception: 'parser error' 
```

虽然断言

```
solver.add(x <= 1e-4) 
```

似乎很好。

因此，我猜测 z3 中存在某种精度限制。如果是这样，是否可以选择让第一个断言通过？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-07T18:55:05.403

Z3 没有精度限制。它可以表示任意精度的有理数和代数数。这是一个例子：

```
print RealVal('1/10000000000000000000000000000')
print simplify((RealVal('1/10') ** RealVal('10')) ** RealVal('10')) 
```

您可以在线尝试：[http ://rise4fun.com/Z3Py/ahJQ](http://rise4fun.com/Z3Py/ahJQ)

该函数`RealVal(a)`将 Python 值转换为 Z3 实数值。它使用 Z3 C API`Z3_mk_numeral`来实现这一点。此代码可在`z3.py`Z3 发行版中包含的文件中找到。API`Z3_mk_numeral`需要一个以十进制格式（例如，'1.3'）或小数格式（例如，'1/3'）编码有理数的字符串。请注意，不支持科学计数法。为了`RealVal(a)`方便 python 用户，我们`str(a)`在`a`调用`Z3_mk_numeral`. 因此，用户也可以写`RealVal(1)`,`RealVal(1.2)`等。

第二点信息是该语句`solver.add(x <= 1e-4)`本质上是`solver.add(x <= RealVal(1e-4))`.

现在，我们可以问，为什么该示例适用`1e-4`于`1e-6`. 问题是`str`在 Python 中的实现。以十进制形式返回 Z3 支持`str(1e-4)`的字符串，但以科学计数形式返回 Z3 不支持的字符串。`"0.0001"``Z3_mk_numeral``str(1e-6)``"1e-6"``Z3_mk_numeral`

```
print str(1e-4)
print str(1e-6) 
```

这是上面示例的链接：[http ://rise4fun.com/Z3Py/C02q](http://rise4fun.com/Z3Py/C02q)

为了避免这个问题，我们在创建 Z3 表达式时应该避免使用科学计数法中的数字。我会看看我是否有时间在`Z3_mk_numeral`Z3 的下一个版本中添加对科学记数法的支持。

# java - Java - 来自ajax中的字符串的对象

> ID：12323386
> 
> 赞同：1
> 
> 时间：2012-09-07T18:18:35.867
> 
> 标签：java, ajax, generics

我正在建立一个网站，我有几个不同的部分，如指南电影等。它们都应该有一个类似的按钮。

因此，如果按下赞按钮，我想增加数据库中的赞数。

我有不同的数据库模型，比如`UserGuides`等`Movies`，我想要一个通用的 AJAX 函数。

这表示：

如果用户在指南上并且他按“喜欢”我想更新 UserGuide 等上的类似整数。

我是这样实现的。

在 AJAX 帖子中，我将类定义为我想要更新的字符串，例如，`{obj: "UserGuides"}`如果我想要更新 UserGuide。

现在我有一个 AJAX 处理程序来处理我的所有请求。

公共静态结果 like() 抛出 UnknownHostException、MongoException、DbAuthException {

```
 Map<String, String[]> map = request().body().asFormUrlEncoded();
    String username = map.get("username")[0];
    String title = map.get("title")[0];
    String obj = map.get("obj")[0];

    if (username.equals("") || title.equals("") || obj.equals("")) {
        return badRequest();
    }
    if (obj.equals("UserGuides")) {
        ajaxLike(UserGuides.class, new UserGuides(), username, title);
        return ok();
    }
    return badRequest(); 
```

所以我检查“类名”是否匹配，如果是，我调用我的通用函数。

```
if (obj.equals("UserGuides")) {
                ajaxLike(UserGuides.class, new UserGuides(), username, title);
            } 
```

现在我显然必须为我的所有课程都这样做。但好处是我只需要一个处理程序。

现在我的通用函数看起来像这样

```
private static <T> void ajaxLike(Class<T> objClass, T obj, String username,
            String title) throws UnknownHostException, MongoException,
            DbAuthException {

        Datastore ds = getDatabase();
        Query<T> q = ds.createQuery(objClass).field("title").equal(title);
        UpdateOperations<T> submitUpdate = ds.createUpdateOperations(objClass)
                .inc("likes");
        ds.update(q, submitUpdate);
        ds.ensureIndexes();

    } 
```

*   它工作正常atm，但这是一个好习惯吗？

*   您是否看到任何潜在的错误？

*   有更好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T18:22:56.547

```
String username = map.get("username")[0]; 
```

如果地图没有用户名，您将在那里获得一个 NPE。其他地方也一样..

# metatrader4 - 如何通过脚本将 MT4 图表数据导出到 CSV 文件？

> ID：12323390
> 
> 赞同：2
> 
> 时间：2012-09-07T18:19:14.817
> 
> 标签：metatrader4

此脚本在附加到图表时 `mql4`不会导出到-file。**为什么？**`CSV`

 **```
static datetime check;
//+------------------------------------------------------------------+
//|   scripts/Export.mq4                  pre  Build 562-            |
//|   MQL4/Scripts/Export.mq4             post Build 562+            |
//+------------------------------------------------------------------+
void start() {                // New-MQL4 post Build 562+: void OnStart(){}
   if ( check != Time[0] ) {
        check  = Time[0];
        WriteCSV(); 
      } 
}

//+------------------------------------------------------------------+
//| WriteCSV                                                         |
//+------------------------------------------------------------------+
void WriteCSV() {
   int handle = FileOpen( StringConcatenate( Symbol(), ".csv" ),
                          FILE_CSV|FILE_READ|FILE_WRITE, ','
                          );

   if ( handle > 0 ) {
        FileSeek( handle, 0, SEEK_END ); 

        FileWrite( handle,
                   TimeToStr( TimeCurrent(), TIME_DATE ),
                   iOpen ( Symbol(), Period(), 1 ),
                   iHigh ( Symbol(), Period(), 1 ),
                   iLow  ( Symbol(), Period(), 1 ),
                   iClose( Symbol(), Period(), 1 )
                   );

        FileClose( handle );
      }
}
//+------------------------------------------------------------------+ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-06-15T15:07:13.693

这看起来像一个旧线程，但我只是想把它扔进去，因为它的价值。这里有很多事情让我担心。

1.  您在脚本中的第一个命令：

    ```
    int handle = FileOpen( StringConcatenate( Symbol(), ".csv" ),
                           FILE_CSV|FILE_READ|FILE_WRITE, ','
                           ); 
    ```

    应该打开文件`write`，如果它不存在，它将创建它。所以，如果文件不在任何地方，那么它就不会被创建。如用户3666197所述。**确保您以管理员**身份运行 MT4 。

2.  **`i`**在检索任何带有 ' ' 前缀的数据时，您可能希望包含一个循环。`iClose`, `iOpen`, `iHigh`, `iLow`- 因为您请求的所有数据可能都不可用。MT4 将需要从服务器中提取，在这种情况下返回的柱数将为`0`.

`iClose()` 返回值 指定交易品种柱的收盘价值，带有时间框架和班次。如果*本地历史*为空（未加载），则函数返回`0`.

要检查错误，必须调用该**`GetLastError()`**函数。因此，如果您找到了该文件并且正在创建它，但没有条形图或仅保存了几个条形图，这就是原因。

只是想我会把它扔在那里，以防它成为你的问题。

祝你好运

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-30T23:17:24.010

## 文件名可能与操作系统命名限制冲突：

首先测试一个常量 O/S 安全字符串

```
int handle = FileOpen( "FileOpenTest_FILENAME_FEASIBLE.CSV",
                        FILE_CSV | FILE_READ | FILE_WRITE
                        ); 
```

最后但并非最不重要的一点是，检查您的经纪人的工具命名是否不会与 O/S 发生冲突。已经看到这些停止 MQL4 代码的做法，这些代码多年来一直处于生产状态。

代理端的符号（重新）命名相似**“ `EURUSD..`”**`fileIO`可能会令人惊讶地阻止您原本标准的操作 - DataCentre 托管的第一手经验，一旦代理公司营销部门`Windows Server 2008`，O/S 突然开始默默地拒绝打开具有类似注入工件的文件名`Symbol()`. 为各种账户/产品类型的外汇工具引入了新的命名约定。

## fileIO 操作可能会与用户有效权限发生冲突：

检查您**`user`**对 MT4 允许`fileIO`发生的位置的有效权利：

1.  `~<_TerminalDIR_>\MQL4\Files`
2.  `~<_TerminalDIR_>\tester\files`

*（有效期为 2014-10-01，Build 670）*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-12T22:36:43.810

您尝试导出到的目录可能没有 MT4 权限，因此不允许访问。**

# internet-explorer-9 - Fancybox youtube iframe 适用于除 ie9 之外的所有浏览器。Doctype 到位 - 其他建议？

> ID：12323391
> 
> 赞同：-1
> 
> 时间：2012-09-07T18:19:14.487
> 
> 标签：internet-explorer-9, fancybox

我有一个使用 fancybox 2 youtube iframe 的页面——它在除 IE9 之外的所有浏览器中都能完美运行，并且无法弄清楚发生了什么。在 IE9 中，什么也没有发生 - 根本没有弹出或覆盖。IE8 和 IE7 工作正常，safari、chrome、firefox 都可以。

该页面以第一行的 doctype 开头 - 我应该检查 IE9 的其他内容吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T18:50:34.673

如果它在 IE7 和 IE8 中工作，我会检查是否在使用它们时，它们是否以兼容模式显示页面。如果不是，则很有可能 IE9 被强制进入兼容模式。您可以通过指定元标记来强制 IE 中的标准模式：

```
 <meta http-equiv="X-UA-Compatible" content="IE=edge" > 
```

您还可以使用 JavaScript 来确定 IE 显示的模式：

```
 javascript:alert(document.documentMode);

    <script type="text/javascript">
    engine = null;
if (window.navigator.appName == "Microsoft Internet Explorer")
{
   // This is an IE browser. What mode is the engine in?
   if (document.documentMode) // IE8 or later
      engine = document.documentMode;
   else // IE 5-7
   {
      engine = 5; // Assume quirks mode unless proven otherwise
      if (document.compatMode)
      {
         if (document.compatMode == "CSS1Compat")
            engine = 7; // standards mode
      }
      // There is no test for IE6 standards mode because that mode  
      // was replaced by IE7 standards mode; there is no emulation.
   }
   // the engine variable now contains the document compatibility mode.
}
</script> 
```

或者您可以强制 IE 显示为特定版本：

```
 <meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7" >
    <meta http-equiv="X-UA-Compatible" content="IE=EmulateIE8" > 
```

Microsoft 有一篇很好的 MSDN 文章详细描述了这一点。[http://msdn.microsoft.com/en-us/library/cc288325(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/cc288325%28v=vs.85%29.aspx)

# java - 如何使用 JAXB 编组多个对象？

> ID：12323397
> 
> 赞同：9
> 
> 时间：2012-09-07T18:19:35.190
> 
> 标签：java, web-services, jaxb

我正在尝试编组多个对象，例如`Book`添加到`BookLists`via`setBookslst()`中。我开始使用这个`JAXBContext`设置：

```
jaxbContext = JAXBContext.newInstance(BookLists.class); 
```

和

```
 jaxbMarshaller.marshal(lists, result); 
```

但是，我得到了以下运行时异常：

> javax.xml.bind.JAXBException: com.jaxb.example.marshall.Book 或其任何超类在此上下文中都是已知的]

我的类型定义如下。

**书 ：-**

```
@XmlRootElement(name="book")
public class Book {

     private String title;
     private int year;
    public String getTitle() {
        return title;
    }
    public void setTitle(String title) {
        this.title = title;
    }
    public int getYear() {
        return year;
    }
    public void setYear(int year) {
        this.year = year;
    }
} 
```

**书单：-**

```
@XmlRootElement(name="lists")
public class BookLists {
List<Book> bookslst;

public List getBookslst() {
    return bookslst;
}

public void setBookslst(List bookslst) {
    this.bookslst = bookslst;
}

} 
```

**马歇尔代码：-**

```
Book book;
    BookLists lists=new BookLists();
    List lst=new ArrayList();
    book = new Book();
    book.setTitle("Book title");
    book.setYear(2010);
    lst.add(book);
    book = new Book();
    book.setTitle("Book title1");
    book.setYear(2011);
    lst.add(book);
    lists.setBookslst(lst);
    JAXBContext jaxbContext;
    try {
        jaxbContext = JAXBContext.newInstance(BookLists.class);
        Marshaller jaxbMarshaller = jaxbContext.createMarshaller();
        jaxbMarshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        StringWriter result = new StringWriter();

        jaxbMarshaller.marshal(lists, result);
        String xml = result.toString();
        System.out.println(xml);
    } catch (JAXBException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
```

我正在尝试添加`@XMLSeeAlso`注释（参考：- [JAXB 异常：此上下文未知的类](https://stackoverflow.com/questions/3237473/jaxb-exception-class-not-known-to-this-context)）。此注释在我的版本中不可用。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-07T18:41:44.573

默认情况下，JAXB (JSR-222) 实现检查公共访问器方法。您可以在 get/set 方法中添加`Book`参数。`List`

```
public List<Book> getBookslst() {
    return bookslst;
}

public void setBookslst(List<Book> bookslst) {
    this.bookslst = bookslst;
} 
```

或者，您可以使用`@XmlElement`注释指定属性的类型：

```
@XmlElement(type=Book.class)
public List getBookslst() {
    return bookslst;
} 
```

您还可以指定您的 JAXB 实现内省字段而不是属性：

```
@XmlRootElement(name="lists")
@XmlAccessorType(XmlAccessType.FIELD)
public class BookLists {
    List<Book> bookslst;
} 
```

* * *

**更新**

> 有没有其他方法可以在 Marshallar.Marshall 中添加 List 而不是 BookList？

`@XmlAnyElement(lax=true)`您可以创建一个利用注释 的通用 List 包装器对象（请参阅： [http](http://blog.bdoughan.com/2010/08/using-xmlanyelement-to-build-generic.html) ://blog.bdoughan.com/2010/08/using-xmlanyelement-to-build-generic.html ）。然后它冷处理`List`任何带注释的东西`@XmlRootElement`。

**列表**

```
package forum12323397;

import java.util.ArrayList;
import java.util.List;

import javax.xml.bind.annotation.*;

@XmlRootElement
public class Lists<VALUE> {

    private List<VALUE> values = new ArrayList<VALUE>();

    @XmlAnyElement(lax=true)
    public List<VALUE> getValues() {
        return values;
    }

} 
```

**演示**

```
package forum12323397;

import javax.xml.bind.*;

public class Demo {

    public static void main(String[] args) throws Exception {
        JAXBContext jc = JAXBContext.newInstance(Lists.class, Book.class);

        Lists<Book> lists = new Lists<Book>();

        Book book1 = new Book();
        book1.setTitle("A Book");
        book1.setYear(2001);
        lists.getValues().add(book1);

        Book book2 = new Book();
        book2.setTitle("Another Book");
        book2.setYear(2007);
        lists.getValues().add(book2);

        Marshaller marshaller = jc.createMarshaller();
        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        marshaller.marshal(lists, System.out);
    }

} 
```

**输出**

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<lists>
    <book>
        <title>A Book</title>
        <year>2001</year>
    </book>
    <book>
        <title>Another Book</title>
        <year>2007</year>
    </book>
</lists> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-04-01T07:12:32.993

我有一个工作示例：

1）XML：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<bookstore>
    <bookList>
        <book>
            <author>Neil Strauss</author>
            <title>The Game</title>
            <publisher>Harpercollins</publisher>
            <isbn>978-0060554736</isbn>
        </book>
        <book>
            <author>Charlotte Roche</author>
            <title>Feuchtgebiete</title>
            <publisher>Dumont Buchverlag</publisher>
            <isbn>978-3832180577</isbn>
        </book>
    </bookList>
    <location>Frankfurt Airport</location>
    <name>Fraport Bookstore</name>
</bookstore> 
```

2）Java类：

书店

```
package jaxbtest;

import java.util.ArrayList;

import javax.xml.bind.annotation.XmlElement;
import javax.xml.bind.annotation.XmlElementWrapper;
import javax.xml.bind.annotation.XmlRootElement;

@XmlRootElement(name="bookstore") // (namespace = "de.vogella.xml.jaxb.model", name="bookstore")
public class Bookstore {

  // XmLElementWrapper generates a wrapper element around XML representation
  @XmlElementWrapper(name = "bookList")
  // XmlElement sets the name of the entities
  @XmlElement(name = "book")
  private ArrayList<Book> bookList;
  private String name;
  private String location;

  public void setBookList(ArrayList<Book> bookList) {
    this.bookList = bookList;
  }

  public ArrayList<Book> getBooksList() {
    return bookList;
  }

  public String getName() {
    return name;
  }

  public void setName(String name) {
    this.name = name;
  }

  public String getLocation() {
    return location;
  }

  public void setLocation(String location) {
    this.location = location;
  }
} 
```

3) 书

```
package jaxbtest;

import javax.xml.bind.annotation.XmlElement;
import javax.xml.bind.annotation.XmlRootElement;
import javax.xml.bind.annotation.XmlType;

@XmlRootElement(name = "book")
// If you want you can define the order in which the fields are written
// Optional
@XmlType(propOrder = { "author", "name", "publisher", "isbn" })
public class Book {

  private String name;
  private String author;
  private String publisher;
  private String isbn;

  // If you like the variable name, e.g. "name", you can easily change this
  // name for your XML-Output:
  @XmlElement(name = "title")
  public String getName() {
    return name;
  }

  public void setName(String name) {
    this.name = name;
  }

  public String getAuthor() {
    return author;
  }

  public void setAuthor(String author) {
    this.author = author;
  }

  public String getPublisher() {
    return publisher;
  }

  public void setPublisher(String publisher) {
    this.publisher = publisher;
  }

  public String getIsbn() {
    return isbn;
  }

  public void setIsbn(String isbn) {
    this.isbn = isbn;
  }

} 
```

4) 主要

```
package jaxbtest;

import java.io.ByteArrayInputStream;
import java.io.File;
import java.io.FileNotFoundException;
import java.io.FileReader;
import java.io.IOException;
import java.io.InputStream;
import java.util.ArrayList;
import java.util.Arrays;

import javax.xml.bind.JAXBContext;
import javax.xml.bind.JAXBException;
import javax.xml.bind.Marshaller;
import javax.xml.bind.Unmarshaller;

public class BookMain {

  private static final String BOOKSTORE_XML = "./bookstore-jaxb.xml";

  public static void main(String[] args) throws JAXBException, IOException {

    ArrayList<Book> bookList = new ArrayList<Book>();

    // create books
    Book book1 = new Book();
    book1.setIsbn("978-0060554736");
    book1.setName("The Game");
    book1.setAuthor("Neil Strauss");
    book1.setPublisher("Harpercollins");
    bookList.add(book1);

    Book book2 = new Book();
    book2.setIsbn("978-3832180577");
    book2.setName("Feuchtgebiete");
    book2.setAuthor("Charlotte Roche");
    book2.setPublisher("Dumont Buchverlag");
    bookList.add(book2);

    // create bookstore, assigning book
    Bookstore bookstore = new Bookstore();
    bookstore.setName("Fraport Bookstore");
    bookstore.setLocation("Frankfurt Airport");
    bookstore.setBookList(bookList);

    // create JAXB context and instantiate marshaller
    JAXBContext context = JAXBContext.newInstance(Bookstore.class);
    Marshaller m = context.createMarshaller();
    m.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, Boolean.TRUE);

    // Write to System.out
    m.marshal(bookstore, System.out);

    // Write to File
    m.marshal(bookstore, new File(BOOKSTORE_XML));

    // get variables from our xml file, created before
    System.out.println();
    System.out.println("Output from our XML File: ");
    Unmarshaller um = context.createUnmarshaller();
    Bookstore bookstore2 = (Bookstore) um.unmarshal(new FileReader(BOOKSTORE_XML));
    ArrayList<Book> list = bookstore2.getBooksList();
    for (Book book : list) {
      System.out.println("Book: " + book.getName() + " from "
          + book.getAuthor());
    }

      /*
      String xmlStr = readFileToString(BOOKSTORE_XML);
      Bookstore bookstore = getPartial3(Bookstore.class ,xmlStr);
      for (Book b : bookstore.getBooksList())
          System.out.println(b.getName()+ " ---- " + b.getAuthor() );
       xmlStr = readFileToString("./listApplianceOfferings.xml");
      ApplianceList bookstore1 = getPartial3(ApplianceList.class ,xmlStr);
      for (Appliance b : bookstore1.getBooksList())
          System.out.println(b.getName() + " ---- " + b.getDescription() );
    */
      //88888
      // String xmlStr = readFileToString("./listStorageOfferings.xml");
//    StorageOfferings storageOfferingsList = jaxbXmlString2Class(StorageOfferings.class ,xmlStr);
      StorageOfferings storageOfferingsList = jaxbXmlFile2Class(StorageOfferings.class ,"./listStorageOfferings.xml");
      for (StorageOffering s : storageOfferingsList.getStorageOfferingList() )
          System.out.println("8888--> "+ s.getName() + " ---- " + s.getId() );
      //99999
  }//main

private static void getPartial() {
    // get variables from our xml file, created before
    System.out.println();
    System.out.println("Output from our XML File: ");
    Unmarshaller um;
    try {
        JAXBContext context = JAXBContext.newInstance(Bookstore.class);;
        um = context.createUnmarshaller();
//      um.setEventHandler(new DefaultValidationEventHandler());
        FileReader fileReader = new FileReader(BOOKSTORE_XML);
    Bookstore bookstore = (Bookstore) um.unmarshal(fileReader );
    ArrayList<Book> list = bookstore.getBooksList();
    for (Book book : list) {
      System.out.println("Book: " + book.getName() + " from "
          + book.getAuthor());
    }
    } catch (Exception e) {
        e.printStackTrace();
    }

}
private static void getPartial1() {
    // get variables from our xml file, created before
    System.out.println();
    System.out.println("Output from our XML File: ");
    Unmarshaller um;
    try {
        JAXBContext context = JAXBContext.newInstance(ApplianceList.class);;
        um = context.createUnmarshaller();
//      um.setEventHandler(new DefaultValidationEventHandler());
        FileReader fileReader = new FileReader("./listApplianceOfferings.xml");
        ApplianceList alist = (ApplianceList) um.unmarshal(fileReader );
    ArrayList<Appliance> list = alist.getBooksList();
    for (Appliance book : list) {
      System.out.println("appliance: " + book.getName() + " from "
          + book.getDescription());
    }
    } catch (Exception e) {
        e.printStackTrace();
    }

}
//-------------------
private static <T> T getPartial2(Class<T> cls, String fname) {
    // get variables from our xml file, created before
    System.out.println();
    System.out.println("Output from our XML File: ");
    Unmarshaller um;
    T alist = null;
    try {
        JAXBContext context = JAXBContext.newInstance(cls);;
        um = context.createUnmarshaller();
//      um.setEventHandler(new DefaultValidationEventHandler());
        FileReader fileReader = new FileReader(fname);
        alist = (T) um.unmarshal(fileReader );
        //ArrayList<?> list = alist.getBooksList();
//    for (Appliance book : list) {
//      System.out.println("appliance: " + book.getName() + " from "
//          + book.getDescription());
//    }
    } catch (Exception e) {
        e.printStackTrace();
    }
    return alist;

}
//-------------------
private static <T> T jaxbXmlFile2Class(Class<T> cls, String fileName) {
        FileReader fr = null;
        char [] cbuf = null;
        try {
            fr = new FileReader(fileName);

        cbuf = new char[3000];
        Arrays.fill(cbuf, ' ');
        fr.read(cbuf);
        }catch (FileNotFoundException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
        finally{
            try { fr.close(); } 
            catch (IOException e) {
                e.printStackTrace();
            }
        }
        String s = new String(cbuf);
        return jaxbXmlString2Class(cls, s);
    }
@SuppressWarnings("unchecked")
private static <T> T jaxbXmlString2Class(Class<T> cls, String xmlStr) {
  // get variables from our xml file, created before
  System.out.println();
  System.out.println("Output from our XML File: ");
  Unmarshaller um;
  T alist = null;
    try {
        JAXBContext context = JAXBContext.newInstance(cls);;
        um = context.createUnmarshaller();
        System.out.println(xmlStr);
        InputStream is = new ByteArrayInputStream(xmlStr.getBytes());
        alist = (T) um.unmarshal( is );
    } catch (Exception e) {
        e.printStackTrace();
    }
    return alist;

}
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T18:35:20.097

尝试将这两个类添加到您的 JAXBContext.newInstance 调用中。

```
JAXBContext.newInstance(BookLists.class, Book.class); 
```

使用你的类这有效：

```
public static void main(String [] args) throws JAXBException {
    BookLists books = new BookLists();

    String [] titles = {"To Kill a Mockingbird", "Twelve Angry Men", "Are You My Mother", "Green Eggs And Ham"};

    List<Book> list = new ArrayList<Book>();
    for (String title : titles) {
        Book book = new Book();
        book.setTitle(title);
        list.add(book);
    }
    books.setBookslst(list);

    JAXBContext jc = JAXBContext.newInstance(BookLists.class, Book.class);
    Marshaller nm = jc.createMarshaller();
    nm.setProperty("jaxb.formatted.output", true);
    nm.marshal(books, System.out);

} 
```

输出：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<lists>
<book xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="book">
    <title>To Kill a Mockingbird</title>
    <year>0</year>
</book>
<book xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="book">
    <title>Twelve Angry Men</title>
    <year>0</year>
</book>
<book xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="book">
    <title>Are You My Mother</title>
    <year>0</year>
</book>
<book xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="book">
    <title>Green Eggs And Ham</title>
    <year>0</year>
</book>
</lists> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-07T18:38:22.700

采用

```
List<Book> lst=new ArrayList<Book>(); 
```

代替 ：

```
List lst=new ArrayList(); 
```

还定义 BoolList 如下：

```
@XmlRootElement(name="lists")
public class BookLists {
List<Book> bookslst;

public List<Book> getBookslst() {
    return bookslst;
}

public void setBookslst(List<Book> bookslst) {
    this.bookslst = bookslst;
}

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-05-22T04:07:29.327

将注释 @XmlSeeAlso(value = {Book.class }) 添加到 BookList 类。现在应该可以工作了。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-04-09T09:50:28.387

实际输出：

```
<lists>
    <book>
        <title>A Book</title>
        <year>2001</year>
    </book>
    <book>
        <title>Another Book</title>
        <year>2007</year>
    </book>
</lists> 
```

预期输出：

```
<lists>
    <book>
        <title>A Book</title>
        <year>2001</year>
        <title>Another Book</title>
        <year>2007</year>
    </book>
</lists> 
```

积极寻求建议。

# python - 用两个固定长度的数字对正则表达式进行分组并删除其前导零

> ID：12323402
> 
> 赞同：2
> 
> 时间：2012-09-07T18:20:05.197
> 
> 标签：python, regex

我得到一个 15 位的输入字符串，即`001230123456789`. 它有两个数字 - 第一个是`00123`（最少 1 个非零数字，最多 5 个数字），第二个是`0123456789`（最少`100000000`10 个数字）。捕获的输出（这些数字）不应包含前导零。

更容易并且可能是唯一正确的方法（在 Python 中）是数组切片和 lstrip()：

```
input = "001230123456789"
output = [(input[:5].lstrip('0'), input[5:].lstrip('0'))]
# ('123', '123456789') 
```

但我有一个任务是用正则表达式做同样的事情。

无论我是否尝试过贪婪的选项，我都坚持留下 zome zeros。我已经以那个结束了：`0{0,4}([1-9]\d{0,4})0?([1-9]\d{8,9})` 它通过了我 3/6 的测试：

```
000010111111111 -    ('10', '111111111')     (should be ('1', '111111111'))
116402151672479 - OK ('11640', '2151672479')
006421651672479 -    ('6421', '651672479')   (should be ('642', '1651672479'))
712120751672479 - OK ('71212', '751672479')
712121551672479 - OK ('71212', '1551672479')
006400351672479 -    ('6400', '351672479')   (should be ('640', '351672479')) 
```

有没有办法只用一个正则表达式来做到这一点？

[paste.org](http://pastie.org/private/e0cp3fvuhg1ax2rhikxkqq)上带有测试和预期值的完整示例源代码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T21:21:08.520

干得好。

```
 /^0*(\d{1,5})(?<=.{5})(?<!00000)(?!00)(?=\d{10}$)0*(.+)/
      | |        |        |         |     |          | |
      | |        |        |         |     |          | capture 2nd number
      | |        |        |         |     |          |
      | |        |        |         |     |          chomp leading zeroes
      | |        |        |         |     |
      | |        |        |         |     assert there're 10 digits ahead
      | |        |        |         |
      | |        |        |         assert second part at least 100000000
      | |        |        |
      | |        |        make sure first part at least one nonzero digit
      | |        |
      | |        assert there are 5 chars behind (already tested numeric)
      | |
      | capture 1st number (don't worry; the assertions will fix this up)
      |
      chomp leading zeroes (i'm going to line up these comments damn it!) 
```

这是[一个 Rubular 演示](http://rubular.com/r/xOsS1ZspJN)。

（`(?:^|\s)`和`(?:\s|$)`仅用于演示目的。）

结果如下：

```
 000010111111111             -->     1       111111111
    116402151672479             -->     11640   2151672479
    006421651672479             -->     642     1651672479
    712120751672479             -->     71212   751672479
    712121551672479             -->     71212   1551672479
    006400351672479             -->     640     351672479

    # not enough digits        
    71212155167247              -->     no match

    # too many digits          
    7121215516724798            -->     no match           

    # first part == 0          
    000001551672479             -->     no match            

    # second part < 100,000,000
    712120098765479             -->     no match 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-07T19:03:06.037

我对 python 不是很熟悉，但是下面的解决方案（perl）将完全符合您的要求；虽然它很丑。

```
use strict;

my @test = qw/000010111111111 116402151672479 006421651672479 712120751672479 712121551672479 006400351672479/;

foreach(@test){
    /^(?|([1-9]\d{4})|0([1-9]\d{3})|00([1-9]\d{2})|000([1-9]\d)|0000([1-9]))(?|0([1-9]\d{8})|([1-9]\d{9}))/;
    print "$_: ($1, $2)\n";
}

exit 0; 
```

快速浏览一下 python re 页面，我没有`(?|...)`明确看到，但它确实有`(?:...)`. 在这种情况下，您将获得一个匹配数组，其中只有两个非空白条目——这将是您的答案。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-07T23:37:18.540

试试这个 Python 正则表达式：

```
0{0,4}(\d+)(?<=^\d{5})0{0,9}(\d+)
|     |    |          |     |
|     |    |          |     Second number without leading zeros
|     |    |          Up to 9 leading zeros of second number
|     |    Must be preceded by start of string and 5 digits
|     First number without leading zeros
Up to 4 leading zeros of first number 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-12T07:50:21.403

这是我的解决方案：

```
re.search(r'([1-9]\d*)(?=\d{10})0*([1-9]\d*)', "0064000351672479").groups()
# ('640', '351672479') 
```

分解：

*   `([1-9]\d*)`- 第一组，必须从 1-9 开始，
*   `(?=\d{10})`- 展望未来，我们有 10 个数字，
*   `0*` - 从第二个数字开始咀嚼领导者零，
*   `([1-9]\d*)`- 第二组（数字）。

# python - 如何在 Selenium WebDriver (Python) 中找到包含特定文本的元素？

> ID：12323403
> 
> 赞同：339
> 
> 时间：2012-09-07T18:20:06.453
> 
> 标签：python, selenium, selenium-webdriver

我正在尝试使用 Selenium 测试一个复杂的 JavaScript 界面（使用 Python 界面，并跨多个浏览器）。我有许多形式的按钮：

```
<div>My Button</div> 
```

我希望能够根据“我的按钮”（或不区分大小写的部分匹配项，例如“我的按钮”或“按钮”）搜索按钮。

我发现这非常困难，以至于我觉得我错过了一些明显的东西。到目前为止我最好的事情是：

```
driver.find_elements_by_xpath('//div[contains(text(), "' + text + '")]') 
```

但是，这是区分大小写的。我尝试过的另一件事是遍历页面上的所有 div，并检查 element.text 属性。但是，每次您获得以下形式的情况时：

```
<div class="outer"><div class="inner">My Button</div></div> 
```

div.outer 也有“我的按钮”作为文本。为了解决*这个*问题，我尝试查看 div.outer 是否是 div.inner 的父级，但我无法弄清楚如何做到这一点 (element.get_element_by_xpath('..') 返回一个元素的父级，但是它测试不等于 div.outer)。

此外，遍历页面上的所有元素似乎真的很慢，至少使用 Chrome 网络驱动程序。

想法？

* * *

我在这里询问（并回答）了一个更具体的版本：*[How to get text of an element in Selenium WebDriver, without include child element text?](https://stackoverflow.com/questions/12325454/how-to-get-text-of-an-element-in-selenium-webdriver-via-the-python-api-without/12325461#12325461)*

* * *

## 回答 #1

> 赞同：421
> 
> 时间：2013-09-09T14:54:21.080

尝试以下操作：

```
driver.find_elements_by_xpath("//*[contains(text(), 'My Button')]") 
```

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2012-09-07T18:44:23.693

您可以尝试使用 XPath 表达式，例如：

```
'//div[contains(text(), "{0}") and @class="inner"]'.format(text) 
```

* * *

## 回答 #3

> 赞同：34
> 
> 时间：2020-01-11T20:54:29.203

在您提供的 HTML 中：

```
<div>My Button</div> 
```

文本`My Button`是`innerHTML`并且周围没有空格，因此您可以轻松地使用`text()`如下：

```
my_element = driver.find_element_by_xpath("//div[text()='My Button']") 
```

> **注意**：[`text()`](https://www.w3.org/TR/1999/REC-xpath-19991116/)选择上下文节点的所有文本节点子节点

* * *

## 带有前导/尾随空格的文本

如果相关文本在开头包含*空格：*

```
<div>   My Button</div> 
```

或最后：

```
<div>My Button   </div> 
```

或两端：

```
<div> My Button </div> 
```

在这些情况下，您有两种选择：

*   您可以使用[`contains()`](https://developer.mozilla.org/en-US/docs/Web/XPath/Functions/contains)函数来确定第一个参数字符串是否包含第二个参数字符串并返回布尔值 true 或 false，如下所示：

    ```
     my_element = driver.find_element_by_xpath("//div[contains(., 'My Button')]") 
    ```

*   您可以使用[`normalize-space()`](https://developer.mozilla.org/en-US/docs/Web/XPath/Functions/normalize-space)从字符串中去除前导和尾随空格的函数，用单个空格替换空白字符序列，并返回结果字符串，如下所示：

    ```
     driver.find_element_by_xpath("//div[normalize-space()='My Button']]") 
    ```

* * *

## 变量文本的 XPath 表达式

如果文本是变量，您可以使用：

```
foo= "foo_bar"
my_element = driver.find_element_by_xpath("//div[.='" + foo + "']") 
```

* * *

## 回答 #4

> 赞同：28
> 
> 时间：2018-12-17T10:18:10.113

//* 将寻找任何 HTML 标记。如果某些文本对于 Button 和 div 标签是常见的，并且如果 //* 是类别，它将无法按预期工作。如果您需要选择任何特定的，那么您可以通过声明 HTML Element 标记来获取它。喜欢：

```
driver.find_element_by_xpath("//div[contains(text(),'Add User')]")
driver.find_element_by_xpath("//button[contains(text(),'Add User')]") 
```

* * *

## 回答 #5

> 赞同：16
> 
> 时间：2017-01-17T09:44:50.467

您还可以将它与页面对象模式一起使用，例如：

试试这个代码：

```
@FindBy(xpath = "//*[contains(text(), 'Best Choice')]")
WebElement buttonBestChoice; 
```

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2019-01-29T08:53:41.253

有趣的是，几乎所有答案都围绕 XPath 的功能`contains()`，忽略了它区分**大小写**的事实——与 OP 的要求相反。

如果您需要不区分大小写，这可以在 XPath 1.0 *（当代浏览器支持的版本）*中实现，尽管它并不漂亮 - 通过使用该[`translate()`](https://www.w3.org/TR/1999/REC-xpath-19991116/#function-translate)功能。它通过使用转换表将源字符替换为所需的形式。

构建所有大写字符的表将有效地将节点的文本转换为其 lower() 形式 - 允许不区分大小写的匹配*（这里只是特权）*：

```
[
  contains(
    translate(text(), 'ABCDEFGHIJKLMNOPQRSTUVWXYZ', 'abcdefghijklmnopqrstuvwxyz'),
    'my button'
  )
]
# will match a source text like "mY bUTTon" 
```

完整的 Python 调用：

```
driver.find_elements_by_xpath("//*[contains(translate(text(), 'ABCDEFGHIJKLMNOPQRSTUVWXYZЙ', 'abcdefghijklmnopqrstuvwxyzй'), 'my button')]") 
```

自然地，这种方法有其缺点——如给定的那样，它只适用于拉丁文本；如果您想覆盖 Unicode 字符 - 您必须将它们添加到翻译表中。我已经在上面的示例中做到了 - 最后一个字符是 Cyrillic symbol `"Й"`。

* * *

如果我们生活在一个浏览器支持 XPath 2.0 及更高版本的世界中*（但不会很快发生☹️）*，我们可以使用这些函数[`lower-case()`](https://www.w3.org/TR/xpath-functions/#func-lower-case)（但是，不是完全支持区域设置），并且[`matches`](https://www.w3.org/TR/xpath-functions/#func-matches)（对于正则表达式搜索，在这种情况下） -insensitive ( `'i'`) 标志）。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2021-01-19T06:50:09.673

**只需使用这个：**

```
driver.find_elements_by_xpath('//*[text() = "My Button"]') 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2019-05-13T22:16:24.300

类似问题：查找`<button>Advanced...</button>`

也许这会给你一些想法（请将概念从 Java 转移到 Python）：

```
wait.until(ExpectedConditions.elementToBeClickable(//
    driver.findElements(By.tagName("button")).stream().filter(i -> i.getText().equals("Advanced...")).findFirst().get())).click(); 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2017-08-11T16:27:23.393

```
wait.until(ExpectedConditions.visibilityOfElementLocated(By.xpath("//*[contains(text(), 'YourTextHere')]")));
assertNotNull(driver.findElement(By.xpath("//*[contains(text(), 'YourTextHere')]")));
String yourButtonName = driver.findElement(By.xpath("//*[contains(text(), 'YourTextHere')]")).getAttribute("innerText");
assertTrue(yourButtonName.equalsIgnoreCase("YourTextHere")); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-08-30T12:47:59.337

使用[driver.find_elements_by_xpath](https://selenium-python.readthedocs.io/locating-elements.html#locating-by-xpath)并[匹配](https://www.w3.org/TR/xpath-functions/#func-matches)正则表达式匹配函数，以通过其文本对元素进行**不区分大小写的搜索**。

```
driver.find_elements_by_xpath("//*[matches(.,'My Button', 'i')]") 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-06-27T16:36:08.433

如果使用 C#

```
ChromeOptions options = new ChromeOptions();
var driver = new ChromeDriver(options);
var urlLink = "https://www.pexels.com/tr-tr/arama/do%C4%9Fa/";
driver.Navigate().GoToUrl(urlLink);
Thread.Sleep(10000);
var divList = driver.FindElementsByXPath(".//div[contains(@class,'hide-featured-badge')]");
foreach (var divItem in divList)
{
    var photoOwnerName = divItem.FindElement(By.XPath(".//span[@class='photo-item__name']")).GetAttribute("innerHTML");
} 
```

* * *

## 回答 #12

> 赞同：-20
> 
> 时间：2014-02-07T14:54:18.360

尝试这个。这很容易：

```
driver.getPageSource().contains("text to search"); 
```

这在 Selenium WebDriver 中确实对我有用。

# c# - WPF 中带有 BackgroundWorker 的 InvalidOperationException

> ID：12323405
> 
> 赞同：1
> 
> 时间：2012-09-07T18:20:15.010
> 
> 标签：c#, wpf

我试图让 BackgroundWorker 在程序逻辑执行期间更新 UI。但我得到了错误：

编辑！所以我的实际目标（我想从我提供的示例中并不清楚）是能够在更新 UI 的同时执行计算。请参阅下面的更新代码示例。

> InvalidOperationException：调用线程无法访问此对象，因为不同的线程拥有它。

我的 C# 和 xaml 如下：

```
public partial class MainWindow : Window
{
    private readonly BackgroundWorker worker = new BackgroundWorker();

    public MainWindow()
    {
        InitializeComponent();

        worker.DoWork += worker_DoWork;
    }

    void worker_DoWork(object sender, DoWorkEventArgs e)
    {
        test.Background = Brushes.Orange;

        for (double x = 0; x < 10000000000; )
        {
            x++;
        }

        test.Background = Brushes.Red;
    }

    private void test_Click(object sender, RoutedEventArgs e)
    {
        worker.RunWorkerAsync();
    }
} 
```

然后，我的 XAML：

```
<Button Name="test" Click="test_Click">This is a button!</Button> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T18:47:58.797

尝试这个

```
void worker_DoWork(object sender, DoWorkEventArgs e)
{
   Dispatcher.BeginInvoke(new Action(() => { test.Background = Brushes.Orange; }));
} 
```

您需要从 UI 调度程序执行它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T18:24:54.657

您不能直接从后台线程访问用户界面对象。您需要将调用编组回 UI 线程（通过`Dispatcher.Invoke`），或者在 的进度或完成事件中进行更新`BackgroundWorker`，因为这些已经在 UI 线程上运行。

话虽如此，在这种情况下，BW*仅*更新 UI，因此您应该直接在 Button 的事件处理程序中执行此操作，因为没有其他“工作”可以执行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-07T18:24:17.517

您不能从后台线程进行 UI 更新；使用`RunWorkerCompleted`或`ProgressChanged`事件来更新 UI。

```
worker.RunWorkerCompleted += new RunWorkerCompletedEventHandler(worker_RunWorkerCompleted);

void worker_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
{
    test.Background = Brushes.Orange;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-07T19:42:07.013

好的，以前也锁定您的应用程序，试试这个：

```
void worker_DoWork(object sender, DoWorkEventArgs e)
    {
        for (double x = 0; x < 10000000000; )
        {
            x++;
        }
    }

    private void test_Click(object sender, RoutedEventArgs e)
    {
        test.Background = Brushes.Orange;

        worker.RunWorkerCompleted += (_,__) =>  test.Background = Brushes.Red; 
        worker.RunWorkerAsync();

    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-02T15:37:01.313

我尝试了一些其他代码，并进行了一些研究，是的，存在使用 SynchronizationContext 从另一个线程修改视图的方法。

请看这个例子：

```
 private void Button_Click(object sender, RoutedEventArgs e)
        {
            var sync = SynchronizationContext.Current;
            BackgroundWorker w = new BackgroundWorker();
            w.DoWork+=(_, __)=>
                {
                    //sync.Post(p => { button.Content = "Working"; }, null);
                    int j = 0;
                    for (int i = 0; i < 10; i++)
                    {
                        j++;
                        sync.Post(p => { button.Content = j.ToString(); }, null);
                        Thread.Sleep(1000);
                    }
                    sync.Post(p => { button.Background = Brushes.Aqua; button.Content = "Some Content"; }, null);
                };
            w.RunWorkerAsync();
        } 
```

这是观点：

```
<Window x:Class="WpfApplication2.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">
    <Grid>
        <Button x:Name="button" Content="Some Content" Click="Button_Click"/>
    </Grid>
</Window> 
```

此代码多次更新视图（在本例中为按钮）。我认为这解决了您最初的问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-07T18:28:35.663

您需要在 BackgroundWorker 的 RunWorkerCompleted 事件中执行此操作。在此事件中，您将需要使用 Dispatcher 及其两个主要方法之一：Invoke 和 BeginInvoke。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-07T19:30:44.737

这适用于任何代码：

```
void CodeToExcecute()
{
        test.Background = Brushes.Orange;

        for (double x = 0; x < 10000000000; )
        {
            x++;
        }

        test.Background = Brushes.Red;

}
void worker_DoWork(object sender, DoWorkEventArgs e)
{
   Dispatcher.BeginInvoke(new Action(() => CodeToExcecute() ));
} 
```

# bash - 如何容纳 bash 数组中的空格

> ID：12323409
> 
> 赞同：1
> 
> 时间：2012-09-07T18:20:34.760
> 
> 标签：bash, sh

我正在循环某个命令的目录；但是，我不知道如何容纳空间

```
#!/bin/bash

image=(`ls *.bmp *.jpeg *.jpg | sort`)
data=(`ls *.dat | sort`)

for ((i=0; i < ${#image[@]}; i++))
do
  echo ${image[$i]} ${data[$i]}
done 
```

我运行了这个脚本，它返回了

```
OIS032_OS.bmp Disc
OIS034_OS.bmp Cube
OIS035_OD.bmp 200x200_9-30-2010_OD
OIS035_OS.bmp _ILM_RNFLOb.dat
OIS036_OD.bmp OIS007_Optic
OIS036_OS.bmp Disc 
```

我希望程序返回这一行

```
OIS016_OD.bmp  OIS016_Optic Disc Cube 200x200_OS _ILM_RNFLOb.dat 
```

如何修复 bash 数组以存储我需要的内容

```
data=(`ls *.dat | sort`) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-07T18:32:32.880

不要打电话`ls`；只需使用模式匹配来填充数组：

```
shopt -s extglob    # We'll use a more complicated glob to avoid needing to sort
image=( *.@(bmp|jpeg|jpg) )
data=( *.dat )

for ((i=0; i < ${#image[@]}; i++))
do
  echo ${image[$i]} ${data[$i]}
done 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T18:26:24.107

我相信但不确定你可以用`readarray`and做你想做的事`MAPFILE`。

我问过类似这样的问题：[Bash declaratively defined a list to loop on](https://stackoverflow.com/questions/10687313/bash-declaratively-defining-a-list-to-loop-on)

这里另一个类似的答案链接：[https ://stackoverflow.com/a/7220619/318174](https://stackoverflow.com/a/7220619/318174)

# mysql - 将查询结果打印到文本文件时 MySQL 访问被拒绝

> ID：12323412
> 
> 赞同：0
> 
> 时间：2012-09-07T18:20:46.940
> 
> 标签：mysql, select, permissions

我正在尝试从 MySQL ( `SELECT blah INTO OUTFILE 'filename'`) 将查询结果打印到文件，但我收到以下错误消息：

`ERROR 1045 (28000): Access denied for user 'mysql_username'@'localhost' (using password: YES)`

当我只选择屏幕上的信息时它工作正常；它正在添加`INTO OUTFILE`使它给我错误的部分。

起初我认为我只是没有此命令的权限（我在 mySQL 中对此特定数据库具有完全创建/删除权限，但在服务器上没有 root 访问权限），但查看错误我发现表明此错误发生的迹象当用户名和密码没有正确传递到服务器时。我从服务器上的 MySQL 控制台运行它，所以我认为不会是这种情况，但是 MySQL 用户名与服务器登录名不同，这可能是问题吗？

这是我可以自己处理的事情，还是我需要将它踢给拥有更多权利的人（在 MySQL 和/或服务器上）？

背景：我需要清除表中 1000 多个条目中的大约 1/4，以及与每个条目关联的文件。不幸的是，所有文件都在同一个文件夹中，并使用哈希作为文件名，因此虽然我可以使用范围轻松地从表中获取我想要的行，但这不适用于文件。我想在清除不需要的行之前从表中取出文件名，以便可以使用 shell 脚本删除关联的文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T18:23:17.657

您的用户帐户需要`FILE`特权。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T18:23:59.247

根据[手册](http://dev.mysql.com/doc/refman/5.0/en/select-into.html)，您必须具有`FILE`对服务器主机的权限和访问权限。

> `SELECT ... INTO OUTFILE`'file_name' 形式将`SELECT`选定的行写入文件。该文件是在服务器主机上创建的，因此您必须有权`FILE`使用此语法

# r - 在网格中排列 ggplot2 图例项

> ID：12323416
> 
> 赞同：5
> 
> 时间：2012-09-07T18:20:59.620
> 
> 标签：r, ggplot2

我有一个带有 4 个不同条目的图例，我想将它们排列在 2x2 网格中，而不是水平或垂直排列。我正在提取图例以单独使用，这就是为什么我需要这种有点不寻常的安排。有任何想法吗？

下面的代码生成图例，所有条目垂直位于单个列中：

```
require(ggplot2)
library(grid)
library(gridExtra)

dat <- data.frame(x=c(1,2,1,2,1,2,1,2),y=c(1,2,3,4,2,3,4,5),color=factor(c("a","a","b","b","c","c","d","d")))
p = ggplot(dat)
p = p + geom_line(aes(dat$x,dat$y,color=dat$color))
p = p + scale_colour_manual (values=dat$color,name="")
#print(p)

g_legend<-function(a.gplot){
tmp <- ggplot_gtable(ggplot_build(a.gplot))
leg <- which(sapply(tmp$grobs, function(x) x$name) == "guide-box")
legend <- tmp$grobs[[leg]]
return(legend)}

legend <- g_legend(p)
grid.arrange(legend) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-07T18:45:57.950

尝试添加`guides(colour = guide_legend(nrow = 2))`到您的情节中。

# macos - 未找到符号：_OBJC_CLASS_$_NSObject

> ID：12323417
> 
> 赞同：7
> 
> 时间：2012-09-07T18:21:03.300
> 
> 标签：macos, cocoa, osx-lion, osx-mountain-lion

在 OS X 10.7.3 (Lion) 中运行 Mac 应用程序时出现以下错误：

```
Dyld Error Message:
  Symbol not found: _OBJC_CLASS_$_NSObject
  Referenced from: /Users/USER/Desktop/MyApp.app/Contents/MacOS/../Frameworks/SBJson.framework/Versions/A/SBJson
  Expected in: /usr/lib/libobjc.A.dylib 
```

该应用程序在 OS X 10.8.1 (Mountain Lion) 上运行良好，并在 Mountain Lion 中使用 XCode 4.4 构建。SBJson 是一个私有框架。

可能是什么问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-08T07:10:51.173

将您的部署目标设置为 10.7。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-22T19:11:34.793

链接库的 Build Settings 中的`OS X Deployment Target`值必须小于或等于`OS X Deployment Target`主应用程序 Xcode 目标的值。

（是的，这令人困惑，因为“目标”在这里有双重含义：“部署目标”与“Xcode 目标”）

# jquery - jQuery（html，props）无法处理输入

> ID：12323420
> 
> 赞同：0
> 
> 时间：2012-09-07T18:21:24.680
> 
> 标签：jquery, dom-manipulation

用于创建 HTML 元素和提供属性映射的 jQuery 重载似乎不适用于控件。我在文档中看到 IE 不允许您更改类型，因此您必须指定它，但它似乎忽略了 IE 和 Chrome 中的属性映射中的所有内容：

```
$("<input type='text'>", {
    id: "foo",
    name: "foo",
    value: "test"
}).appendTo("body"); 
```

正在创建以下元素：

```
<input type="text" /> 
```

JSFiddle 演示该行为：http: [//jsfiddle.net/JyvBh/](http://jsfiddle.net/JyvBh/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T18:25:11.637

您需要将类型添加为其他属性的一部分，它会起作用；像这样：

```
$("<input>", {
    type: "text",
    id: "foo",
    name: "foo",
    value: "test"
}).appendTo("body");​ 
```

**编辑：根据 jQuery Docs 支持的解决方法**

根据[jQuery 文档](http://api.jquery.com/jQuery/#jQuery2)，解决方法实际上使用了不同的格式，如下所示：

```
$('<input type="text" />').attr({
    id: 'foo',
    name: 'foo',
    value: 'test'
}).appendTo("body"); 
```

[更新了 JSFiddle](http://jsfiddle.net/JyvBh/3/)，包括上述两种方法。

我希望这有帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T18:25:23.363

如果你这样写，它会起作用：

```
$("<input>", {
    type : "text",
    id: "foo",
    name: "foo",
    value: "test"
}).appendTo("body");​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T18:25:25.133

这是正确的方法

```
$("<input />", {
    type:'text',
    id: "foo",
    name: "foo",
    value: "test"
}).appendTo("body");​ 
```

[**演示**](http://jsfiddle.net/tBbBf/)。

# algorithm - 分配整数对

> ID：12323423
> 
> 赞同：2
> 
> 时间：2012-09-07T18:21:29.777
> 
> 标签：algorithm

如何解决这个问题：
给定 N 对整数。对于每一对整数，我们必须将一个整数分配给 A，另一个分配给 B，使得分配给 A 的整数之和与分配给 B 的整数之和之间的差异最小。
我想不出比 O(2^N) 更好的东西了。
我想到了贪婪，但它并不总是给出最佳结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T18:35:32.543

将问题转化为：

给定：一个非负整数序列（原始对之间的绝对差）
问题：将整数分成两组，以最小化每个子集元素之和的绝对差。

这是NP完全的[平衡分区问题。](http://chinmaylokesh.wordpress.com/2011/02/10/balanced-partition-problem-finding-the-minimized-sum-between-two-partitions-of-a-set-of-positive-integers/)这两个问题是等价的；也就是说，您可以将平衡分区问题转换为您的问题：为序列的每个元素 n [i]关联整数对 (n [i] , 0)。因此，你不会比 O(2 ^N ) 做得更好。

~~问题：为每个整数分配一个符号（加/减），以使序列和的绝对值最小。~~

我怀疑^*如果您首先按降序对序列进行排序，那么贪心算法将给出最佳结果。这将是一个 O(N log N) 算法。

~~( ^* ) 如果我错了，请发布一个反例。~~

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T19:40:28.087

让这些对为 (A_0,B_0),...,(A_n,B_n)。令 D_i = |A_i-B_i|。那么你的问题相当于为 D_i 选择符号以最小化总和，这相当于找到一个 D_i 的子集，其总和为总和的一半，相当于子集和，即 NP 完全。所以你不会比 2^n 做得更好。

除了：如果数字很小，您可以尝试动态编程方法：DP[i][n] 为真，前提是您可以使用 D_0,..,D_i 选择一个与 n 相加的子集。您从 DP[0][0] 为真开始，然后如果 DP[i][n] 为真或 DP[i][nD[i+1]] 为真，则 DP[i+1][n] 为真真的。这个解决方案是 O(n*(最大可能的总和))

# haskell - 如何防止 GHC7 编译程序占用所有内存？

> ID：12323431
> 
> 赞同：9
> 
> 时间：2012-09-07T18:22:09.680
> 
> 标签：haskell, memory-leaks, ghc

在使用 Haskell 中的各种算法时，我经常会遇到我创建的程序存在内存泄漏，因为它经常发生在惰性求值中。占用所有内存的程序并不是很有趣，如果我意识到太晚了，我经常很难杀死它。

使用 GHC6 时`export GHCRTS='-M384m'`，我的`.bashrc`. 但在 GHC7 中，他们添加了一项[安全措施](http://hackage.haskell.org/trac/ghc/ticket/3910)，除非程序`-rtsopts`使用`GHCRTS`. 不幸的是，几乎没有使用此标志编译 Haskell 程序，因此设置此变量会使一切都失败（正如我[在升级到 GHC7 后发现的那样，所有程序都突然失败，说“大多数 RTS 选项被禁用。与 -rtsopts 链接以启用它们。 "](https://stackoverflow.com/q/12133000/1333025) )。

任何想法如何使用`GHCRTS`GHC7，或其他方便的方法如何防止我的程序占用所有内存？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-07T19:27:29.210

您可以编译自己的程序以`-with-rtsopts=-M384m`在编译时设置 RTS 选项（一劳永逸）。您还可以设置不应`GHCRTS`在您的`.bashrc`;中运行的程序的“黑名单”。也许像

```
for i in foo bar baz
do
    alias $i="GHCRTS= $i"
done 
```

# ruby-on-rails - 如何将 url 路由设置到不同的子域

> ID：12323432
> 
> 赞同：0
> 
> 时间：2012-09-07T18:22:13.973
> 
> 标签：ruby-on-rails, routing, subdomain

我可以使用哪种路由路径从非子域页面链接到子域页面？

[我按照Railscast#123](http://railscasts.com/episodes/123-subdomains-revised)向我的网站添加了子域。

我对我的网站所做的主要更改是将每个博主匹配到一个唯一的子域。

**路线.rb**

```
match '', to: 'blogs#show', constraints: {subdomain: /.+/} 
```

**blogs_controller.rb**

```
def show
@blog = Blog.find_by_subdomain!(request.subdomain)
end 
```

**博客/index.html.erb**

```
<%= link_to blog.name, root_url(subdomain: blog.subdomain) %> 
```

因此，博客应用程序`http://www.blog.com`对每种类型的博客作者都有子域，例如 pirates`http://www.pirate.blog.com`和 ninjas `http://www.ninja.blog.com`。

我目前`_article.html.erb`在我的主页（没有子域）和我的博客页面（有子域）中呈现了一个部分。我可以使用什么路由将主页（没有子域）链接到嵌套在博主子域中的特定文章，例如`http://www.ninja.blog.com/articles/ninja-stars`？

`article`目前，通过部分路径链接到忍者之星文章会将我路由到：

```
http://www.ninja.blog.com/articles/ninja-stars 
```

从忍者子域页面（这是我想要的），但是

```
http://www.blog.com/articles/ninja-stars 
```

从没有子域的主页（不是我想要的）。

有没有办法通过类似的方式强制通往特定子域的路径`article(subdomain: article.blog.subdomain)`？我希望每个文章链接都转到子域页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T13:58:08.263

为了使文章的所有链接都有作者博客的子域，我使用了

`article_url(article, subdomain: article.blog.subdomain)`

作为我的道路。

# .net - 自定义集合可以与 ServiceStack 的 TypeSerializer 一起使用吗？

> ID：12323434
> 
> 赞同：1
> 
> 时间：2012-09-07T18:22:21.947
> 
> 标签：.net, serialization, servicestack

我正在使用@mythz 的 ServiceStack.Text（包版本 2.9）TypeSerializer 对缓存中的深拷贝对象进行序列化和反序列化。我发现自己在反序列化时遇到了这个错误：

> 类型定义应以“{”开头，期望序列化类型“MetadataCollection”，字符串以：[]开头

其中 MetadataCollection 是我们实现 IEnumerable 的自定义集合类。我查看了我的测试的序列化字符串，我的序列化程序上的 Metadata 属性（类型 MetadataCollection）属性确实被序列化为：

```
,Metadata:[], 
```

这对我来说似乎是正确的，因为这个集合是空的。我能做些什么来完成这项工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T18:29:07.940

当您看到以下错误时：

> 类型定义应以“{”开头，

这表明您的模型的形状与 JSON 不匹配。

您能否提供一个不起作用的示例的独立失败测试？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T20:02:33.050

这是由于 ServiceStack.Text 包版本 2.x 中的错误/缺失功能。我升级到 ServiceStack.Text 包版本 3.9.3，一切都很好。

# php - MySQL选择没有主ID或日期字段的最后插入记录

> ID：12323439
> 
> 赞同：1
> 
> 时间：2012-09-07T18:22:42.743
> 
> 标签：php, mysql, select

我有一个包含以下字段的 MySQL 表：

```
Email, Flag1, Flag2 
```

**问题：** 有什么方法可以进行选择以获取最后 100 个插入的字段？

据我了解，表格是通过在表格末尾添加带有简单“插入”的新记录来填充的。

我有一个想法如何在 PHP+MySQL 中做到这一点（非常丑陋的方式：*选择所有记录*，*在 php 循环中为每个记录分配自动递增的 ID，并获取最后 100 条记录。*）

**有没有更优雅的方法可以用纯 MySQL 做到这一点？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T18:25:32.053

如果没有唯一的方法来标识行（例如 an`id`或 a `date`），则无法获取最后插入的记录，因为您的索引将根据您拥有的任何主键进行排序（假设`Email`在这种情况下）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T19:36:10.180

这是不可能的，因为如果您不设置带有时间戳或自动增量的字段，系统将如何知道最后插入的内容？所以你有两个简单的选择。

*   创建一个时间戳字段：当您下订单时`select * from yourtamble order by timefield desc limit 100`

*   创建一个具有自动增量的 ID。这样做的好处是您可以拥有一个主键并知道插入列表的确切顺序，坏处是您需要另一个字段时间来知道何时插入数据。作为时间戳解决方案，您可以制作`select * from yourtamble order by id desc limit 100`

# linq - LLBL Linq 可变连接数

> ID：12323443
> 
> 赞同：0
> 
> 时间：2012-09-07T18:23:15.250
> 
> 标签：linq, llblgenpro

我正在为 LLBL 使用 Linq 语法。我需要多次加入特定表。我有一个确实有效的查询，但我正在努力让它更快。我有原始 SQL，但我不确定如何在 Linq 中编码，或者我什至可以。这是一个简化的示例：

```
SELECT Parent.SomeColumn
FROM
    ParentTable Parent
    INNER JOIN ChildTable Child1 ON Child1.ParentID = Parent.ID
    INNER JOIN ChildTable Child2 ON Child2.ParentID = Parent.ID
WHERE
    Child1.TypeColumn = 'Type1'
    AND Child2.TypeColumn = 'Type2' 
```

这很容易做到，但我想要一些可以处理 Child3、Child4 等的东西。换句话说，我不知道编译时 ChildTable 连接的数量。

我的原始代码查询了 ParentTable，然后每次我需要加入时都在 ChildTable 上执行 EXISTS 子查询。它有效，但我看到的是上面的查询将需要大约 1/4 的时间来执行。我有一些实时的 UI 更新，如果我能完成这项工作，将会有显着的改进。

我知道如果我在代码中构建 SQL 查询，这将非常容易，但我真的很想依靠 LLBL 为我生成它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T22:21:07.723

我不具体了解 LLBL，但在 EF 或 LINQ to SQL 中，如果以下内容与您发布的原始 SQL 查询没有产生非常相似的内容，我会感到非常惊讶：

```
int numJoins = ...
IQueryable<ParentTable> parents = ...

for (var i = 0; i < numJoins; i++) {
    var typeI = "Type" + (i + 1);
    var typeIChildren = children.Where(ch => ch.TypeColumn == typeI);
    parents = parents.Join(typeIchildren, parent => parent.Id, child => child.ParentId, (parent, child) => parent);
}

return parents.Select(p => p.SomeColumn); 
```

# xslt - 转换 < 和 >

> ID：12323446
> 
> 赞同：1
> 
> 时间：2012-09-07T18:23:48.233
> 
> 标签：xslt, xslt-2.0

我有一个followig xml数据

```
<xml>
  <para> 
  <number>1</number>
             &lt;text class="text"&gt;the cost to the &lt;123; each capital property <a href="none" num="88(1)">88(1)</a> and (1.7) &lt;/text&gt;
  </para> 
```

我想运行一个 xslt 脚本，它将给出以下输出

```
<xml>
  <para> 
  <number>1</number>
             <text class="text">the cost to the &lt;123; each capital property <a href="none" num="88(1)">88(1)</a> and (1.7) </text>
  </para>
 </xml> 
```

所以基本上`&lt;text class="text"&gt;`用`<text>`和 `&lt;/text&gt;`替换`</text>`

我想过像这样使用宪章映射

```
<xsl:character-map name="a">
<xsl:output-character character="&lt;" string="&lt;"/>
<xsl:output-character character="&gt;" string=">"/>
</xsl:character-map> 
```

但是这种方法的问题在于它会将所有问题转换`&lt;`为`<`导致我们不想像上面那样替换它的问题`&lt;123;`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T19:32:12.340

您要求做的是为包含转义 XML 的文本节点添加一个额外的“解析”步骤，或者（相当于）删除一个“转义”步骤......除了某些`&lt;`s.

快速而简单的方法是通过在这些文本节点上使用禁用输出转义 (DOE) 来删除“转义”步骤。您可以使用“contains(., '<')”之类的测试来确定在序列化过程中要取消转义的文本节点。

*但是*，由于各种原因，通常**不推荐DOE。**一个原因是它不一定是可移植的——XSLT 处理器不需要支持它，有些则不能。另一个原因是您试图输出 XML，同时将其视为非 XML 文本（使用字符串而不是树）。当你这样做时，你需要的东西和处理器将做的事情之间必然会出现不匹配。

此外，DOE 不会解决您有一些`&lt;`您不想逃避的实例以及您想要逃避的其他实例的问题。它会取消所有实例。

更可靠的答案是让 XSLT 将字符串解析为实际的 XML 节点，然后输出这些节点。理论上，您可以在 XSLT 中使用`<xsl:analyze-string>`. 但是您最好使用用另一种语言编写的自定义扩展函数（参见[此处](http://forum.umbraco.org/yaf_postst5730_Parsing-a-string-as-XML-using-XSLT.aspx)）。我认为在 XSLT 中解析 XML 的任何现有实现（例如`saxon:parse()`扩展函数）都不会起作用，除非您预处理输入文本，因为您的输入文本不是格式正确的 XML。

为了成功实现这一点，您需要准确指定如何确定`&lt;`数据中的 an 是否应被解释为 XML 标记。

# c# - 使用 C# 输出给定 SQL 服务器表中的值的格式

> ID：12323452
> 
> 赞同：0
> 
> 时间：2012-09-07T18:24:02.270
> 
> 标签：c#, c#-4.0

我有一个这样的 SQL 服务器表

```
CC     Descr  C_NO     Vol   Wt

2050   Des1   123      20    40
2060   Des2   123      30    50
2050   Des1   125      20    40
2060   Des2   125      30    50
2050   Des1   126      20    40 
```

我想在我的应用程序上输出这样的输出

```
2050
    Des1

 123
    20
    40
 125
    20
    40   
 126
    20
    40

2060
    Des2

 123
    30
    50
 125
    30
    50 
```

如何使用 C# 或 C 锐化代码做到这一点？让我们将表中的每个值都作为字符串，我不是在寻找 C 语言代码来连接到 SQL 服务器数据库。只想用 C# 代码格式化我上面写的输出。

对于总是具有相似 Descr 值的每个相似 CC 值，它显示与输出部分中写入的序列中的特定 CC 值相关的所有 C_No、Vol 和 Wt 值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T18:56:34.350

好吧，你可以在 C# 中使用 Linq 来实现这一点。我还没有尝试过代码，但你可以做这样的事情。

```
Var CCGroups= From c in CCList
              group c by c.cc into g
              select new {CC=g.key, OtherParam= g};

Foreach (var g in CCGroups)
  {
     Consile.writeline("{0}",g.CC);

     Foreach(var P in g.OtherParam)
       {
        Console.WriteLine{"{0},{1},{2},{3}",P.Descr,P.C_NO,P.Vol,P.Wt}
       }

 } 
```

在这里，我假设您从数据库表中获得的数据采用 List<> 形式。如果不是，则将其从 Dataset 或 DataTable 转换为 List<>...

# django - Django - 关联的 OneToOne 记录未被删除

> ID：12323456
> 
> 赞同：0
> 
> 时间：2012-09-07T18:24:17.847
> 
> 标签：django, django-models, django-admin

我有这些模型。问题是当我使用 Django Admin 删除一条狗记录时，关联的项圈记录没有被删除。

我在 Django 1.2 上。我认为级联删除是默认设置。将 Collar 链接到旧表是否存在问题？

非常感谢提前。

```
class Collar(models.Model):
    serial_number =  models.AutoField(primary_key=True, db_column='serial_number')
    weight = models.CharField(max_length=10)
    class Meta:
        db_table = u'existing_table_from_before_django_was_born'

class Dog(models.Model):
    size = models.CharField(max_length=10)
    collar = models.OneToOneField(Collar,blank=True, null=True, editable=False) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T18:51:26.180

这不是与旧表的连接问题。级联删除将在您删除 Collar 对象时起作用，然后相关的 Dog 对象将被删除（可能如果您删除 blank=True，null=True）。

要在删除 Dog 后删除 Collar，您需要重载 Dog 的 delete 方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T19:11:18.783

您必须考虑关系以及删除级联存在的*原因。*FK 处于打开状态`Dog`（该字段位于 DB 中的表中）。如果你删除`Dog`，它只是删除`Dog`。没有必要删除任何其他内容。但是，如果您删除，那么如果与它关联的 没有也被删除`Collar`，那么您最终*可能会*遇到参照完整性问题。`Dog`在您的情况下，该字段可以为 NULL，因此您可以简单地将 col 字段设置为 NULL 并修复引用完整性问题，但在其他情况下，*必须*`Dog`删除该字段以保持数据库完整性。

 *删除级联通常非常方便，但重要的是要记住，它的目标不是让您的生活更简单，而是保持数据库的完整性。因此，没有动力清理关系的另一端（删除`Collar`时删除`Dog`），因为这不会导致任何问题。*

# .net - 如何设置 .net 二进制文件传输的编码

> ID：12323462
> 
> 赞同：0
> 
> 时间：2012-09-07T18:25:03.033
> 
> 标签：.net, encoding, ftp, binary

我可以使用 .net ftp 成功上传文本文件，但现在想上传图形 (.png) 图像。我应该如何设置流编码？

我有什么文本（在 Apl 脚本中）：

sourceStream ← '.net' ⎕new 'System.IO.StreamReader' Localpathfilename encoding←'.NET' ⎕NEW 'System.Text.ASCIIEncoding'

然后我从传输的二进制文件中丢失字节。我也试过省略编码行。

干杯，博

更多信息：这是 Ascii 版本的核心，用 AplX .net 编写 - 它工作正常 - 现在我需要一个 BinaryReader 版本。帮助表示赞赏

```
 ftp←'.net' ⎕call 'System.Net.WebRequest.Create' Remotepathfilename
  ftp.Method←'.net' ⎕call 'System.Net.WebRequestMethods+Ftp.UploadFile'
  ftp.Credentials←'.net' ⎕new 'System.Net.NetworkCredential' Username Password

sourceStream ← '.net' ⎕new 'System.IO.StreamReader' Localpathfilename
encoding←'.NET' ⎕NEW 'System.Text.ASCIIEncoding'

fileContents ← encoding.GetBytes.⎕REF 
sourceStream.ReadToEnd 
sourceStream.Close 
ftp.ContentLength ← fileContents.Length 
:try
  stream←ftp.GetRequestStream
:catchall
  ..... 
```

这是我现在一直在尝试的，基于 vb 代码：

```
http://msdn.microsoft.com/en-us/library/system.io.file.openread#Y1035

Dim fs As FileStream
FileStream fs = File.OpenRead(path)) 
```

所以我试过：

```
fileStream ← '.net' ⎕new 'System.IO.File' 
fileStream.OpenRead  Localpathfilename 
```

以下是错误消息：

```
Constructor on type 'System.IO.File' not found.
DOMAIN ERROR
net_ftp_putfile[72] fileStream←'.net' ⎕new 'System.IO.File' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T18:39:32.447

二进制文件没有“编码”，除非您想转换数据以在有损传输介质（例如 7 位 BBS 或 MTA，您希望对数据进行 Base64 编码）中存活。编码用于文本文件。

不要使用`StreamReader`或`StreamWriter`处理二进制数据。这些类没有很好地命名，它们应该被调用`TextStreamReader`并`TextStreamWriter`更好地反映它们的作用。如果你有一个想要使用的 Stream，那么你应该使用`BinaryReader`and `BinaryWriter`。

# java - Java Logger - Netbeans 提示“记录器中字符串连接的低效使用”

> ID：12323465
> 
> 赞同：6
> 
> 时间：2012-09-07T18:25:21.990
> 
> 标签：java, netbeans, string-formatting

我从java开始，我尝试记录一些东西。

```
private static final Logger _logger = Logger.getLogger("my"); 

String car = "bmw";
String dog = "dog"; 

_logger.info(car + " text " + dog); // on this line Netbeans 
```

.. 在这条线上，Netbeans 向我展示了黄色灯泡并说：*在记录器中使用字符串连接效率低下*

所以我点击“将字符串连接转换为消息模板”并将代码更改为：

```
_logger.log(Level.INFO, "[{0}] v{1} enabled", new Object[]{car, dog}); 
```

这导致问题。因为在日志中我看到：`[{0}] v{1} enabled` 如何修复它？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-07T18:36:18.197

你有几个选择

1）使用 String.format() `_logger.log(Level.INFO, String.format("[%s] %s enabled", car, dog))`。

2) 使用`StringBuilder.append()`或 String.concat()`。

前任：`_logger.log(Level.INFO, new StrinBuilder(car).append(" text ").append(dog));`

这本质上就是 javac 在优化中所做的。

3）忽略警告，因为效率与此无关。如果你真的关心速度，你就不会记录东西。记录需要很长时间，相对于写入日志所花费的时间，字符串格式化和字符串附加之间的差异非常小。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T18:50:25.167

它只是帮助 Netbeans 的建议，实际上是代码

```
_logger.info(car + " text " + dog); // on this line Netbeans
_logger.log(Level.INFO, "{0} text {1}", new Object[]{car, dog}); 
```

**产生相同的输出**。第一个变体对编码器更友好，输入调试消息的时间更少，第二个很棒。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-07T18:56:54.533

在确定是否应该写入消息之前生成去参数化字符串的任何方法*都是*低效的。

你可能写得不好`java.util.logging.Formatter`。[`LogRecord.getMessage()`](http://docs.oracle.com/javase/6/docs/api/java/util/logging/LogRecord.html#getMessage%28%29)我的意思是一个简单输出而不是合并的格式化程序[`LogRecord.getParameters()`](http://docs.oracle.com/javase/6/docs/api/java/util/logging/LogRecord.html#getParameters%28%29)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-07T18:52:51.650

这是netbeans 7.1.2做的实际格式化

```
public class Vels4j {

    private static final Logger _logger = Logger.getLogger("my");
    String car = "bmw";
    String dog = "dog";

    Vels4j() {
       // _logger.info(car + " text " + dog);
        _logger.log(Level.INFO, "{0} text {1}", new Object[]{car, dog});
    }

    public static void main(String[] args) {
        Vels4j vels4j = new Vels4j(); 
    }
} 
```

如果您不想要，您可以禁用提示。提示也可以配置。

# python - Python模块变量相互依赖

> ID：12323474
> 
> 赞同：0
> 
> 时间：2012-09-07T18:25:42.557
> 
> 标签：python, module, config, fabric

我正在尝试创建一个模块来保存 Fabric 文件的配置。此配置文件将保存项目相关设置，因此我可以为所有项目使用相同的 fabfile。

我希望 fabfile 看起来像这样：

```
import config
from fabric.api import local

def deploy(env='staging'):
    config.env = env
    local("xcopy {project_dir} {deploy_target} /u /r /y".format(project_dir=config.project_dir, 
                                                                deploy_target=config.deploy_target))
    #Ok, this will be more involved than that, but it is enough to explain my problem 
```

和配置文件看起来像这样：

```
env = 'staging'
project_dir = r'c:\some\unimportant\path'
deploy_target = r'c:\some\target\path\based\on\{env}'.format(env=env) 
```

所以我可以使用： `fab deploy`或`fab deploy:staging`部署到登台环境并`fab deploy:production`部署到生产环境。

我想弄清楚的是当 env 变量发生变化时如何更新模块中的变量。

我希望我的配置文件尽可能简单，理想情况下，只是变量分配，但如果真的需要，我可以使用一些函数。设置文件中会有很多变量，因此使用 global 关键字更新函数中的值看起来真的很难看。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T19:55:58.353

我认为要在`config`更改时更新模块中的变量，`config.env`您将需要至少使用一个函数。

最简单的方法可能是`env`作为变量删除，而是创建一个`setEnv`函数（将所有其他模块变量设置为适当的值）。另一种选择是保留`env`，但调用函数来获取其他值（例如`config.get_deploy_target()`）。

甚至可以使模块看起来只包含值，而实际上它们中的一些或全部是基于`env`或其他值动态计算的。这需要使用 Python 模块查找系统做一些技巧，以便您实际上是从类实例而不是实际模块中读取值。这使得使用`config`模块的代码变得简单，但代价是使`config.py`自己变得更加复杂：

```
# config.py

class Config(object):
    def __init__(self):
        self.env = "staging"
        self.project_dir = r'c:\some\unimportant\path'

    @property
    def deploy_target(self):
        return r'c:\some\target\path\based\on\{env}'.format(env=self.env)

import sys
sys.modules["config"] = Config() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T18:51:19.287

将配置参数存储在字典中。

因此，在一个包含`__init__.py`文件的目录中，有一个名为`my_config.py`（注意，这必须在您的 python_path 中）的文件，其内容如下：

```
my_params = {'env': 'staging',
             'project_dir': r'c:\some\unimportant\path',
             'deploy_target': r'c:\some\target\path\based\on\staging',
            } 
```

我不确定您打算如何将配置设置传递给您的 fabfile，但是使用配置文件中的字典，访问您的设置非常简单。如果您在单个字典中定义了单个项目的所有配置设置（如上所述），那么以下内容可以进入您的 fabfile：

```
config = __import__('my_config') 
```

此时您可以通过以下方式访问您的配置设置：

```
env = config.my_params['env'] 
```

同样，我不完全确定你打算如何传递你正在寻找的配置，所以如果我错过了标记，请发表评论。在任何情况下，字典都是存储此类信息的 Python 方法，并且可以在需要时轻松导入这些值。

# c# - 如何显示 IEnumerable > 使用编辑器模板

> ID：12323475
> 
> 赞同：1
> 
> 时间：2012-09-07T18:25:51.547
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, mvc-editor-templates, igrouping

我有一堆按页眉分组的项目。

我想在页面上显示它们，标题文本后跟每个单独项目的编辑器模板。

我尝试使用嵌套模板如下：

主页：

```
@Html.EditorFor(x => x.GroupedItems, "ListofGrouping"); 
```

ListofGrouping 编辑器模板：

```
@model IList<IGrouping<string, Model>>
@for(int i = 0; i < Model.Count(); i++)
{
    @Html.EditorFor(x => x[i],"IGrouping")
} 
```

IGrouping 编辑器模板：

```
@model IGrouping<string, Model>

@Html.DisplayFor(x => x.Key)
@Html.EditorForModel() 
```

这一直有效到最后一行。我得到了所有的标题值，但没有显示单个项目。

如果我不能让它以这种方式工作，我将只使用数据网格并在那里进行分组，但我认为这在 MVC3 中应该是可能的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T18:38:29.913

**更新：** 您必须为 IGrouping 编写自己的 EditorTemplate。

IGrouping 的 EditorTemplate 示例： **模型：**

```
public class Row
{
    public Row()
    {
    }

    public Row(string key, int value)
    {
        Key = key;
        Value = value;
    }

    public int Value { get; set; }

    public string Key { get; set; }
} 
```

**控制器：**

```
public class HomeController : Controller
{
    public ActionResult Index()
    {
        ViewBag.Message = "Welcome to ASP.NET MVC!";
        IEnumerable<Row> dict = new[] { new Row("1", 1), new Row("1", 2), new Row("1", 3), new Row("2", 2), new Row("2", 3), new Row("2", 4) };
        var grouped = dict.GroupBy(c => c.Key).First();
        //var grouplist = grouped.Select(c => new KeyValuePair<string, IEnumerable<int>> (c.Key, c.Select(b=>b.Value)));
        return View(grouped);
    }

    public ActionResult Post(IEnumerable<Row> Model)
    {
        return null;
    }
} 
```

**查看索引：**

```
@model IGrouping<string, MvcApplication1.Models.Row>
@{
    ViewBag.Title = "Home Page";
}

@using(Html.BeginForm("Post", "Home", FormMethod.Post))
{
    @Html.EditorForModel("IGrouping")
    <button type="submit">Submit</button>
} 
```

**EditorTemplate IGrouping.cshtml：**

```
@model IGrouping<string, MvcApplication1.Models.Row>
@{
    @Html.DisplayFor(m => m.Key)
    int i = 0;
    foreach (var pair in Model.Select(c => c))
    {
        @Html.Hidden(string.Format("Model[{0}].Key", i), pair.Key)
        @Html.TextBox(string.Format("Model[{0}].Value", i), pair.Value)
        i++;
    }
} 
```

More about binding Collections you can read there:[Hancelman's blog](http://www.hanselman.com/blog/ASPNETWireFormatForModelBindingToArraysListsCollectionsDictionaries.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T00:59:10.213

Remember that the **IGrouping** is also an **IEnumerable**. So instead of using `@Html.EditorForModel()`, enumerate over the items.

```
@model IGrouping<string, Model>

@Html.DisplayFor(x => x.Key)
foreach (var grp in Model)
{
    @Html.EditorFor(model => grp)
} 
```

# javascript - RequireJS 工作不一致

> ID：12323477
> 
> 赞同：5
> 
> 时间：2012-09-07T18:26:00.617
> 
> 标签：javascript, jquery, backbone.js, requirejs, underscore.js

当我按 F5 重新加载我的应用程序时，有时会抛出错误，有时不会。

我正在使用 Chrome 进行调试。有时控制台会报告此错误：

```
Uncaught ReferenceError: unit_directionals is not defined 
```

有时会抛出没有像在这种情况下为 jquery 定义的引用：“Uncaught ReferenceError: jQuery is not defined”

如果我以正确的方式定义了文件，会有什么问题？

**这是我在 main.js 中指向主索引 html 的代码：**

```
requirejs.config({
    baseUrl: 'js/lib',
    paths:{
        app:'../app',
        models: '../app/models',
        views: '../app/views'
    }
})

requirejs(
    [
        //load lib in this order
        'underscore', 'handlebars', 'jquery','backbone', 'uri',
        //load models, views...
        'app/models/items.model', 'app/models/results.model',
        'app/views/items.view', 'app/views/results.view',
        'app/index'
    ],
    function(jQuery,$,_....) {
        //init app
    }
); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-08T06:19:25.507

requirejs 异步加载模块，它们可能会乱序加载——它们不能保证按照 require 调用中指定的顺序加载。如果脚本是 AMD 模块，并且调用 define() 及其依赖项，这不是问题。

但是，如果脚本仅使用浏览器全局变量和隐式依赖项，如主干和可能的把手，则需要[shim 配置](http://requirejs.org/docs/api.html#config-shim)来正确表达依赖项和导出值。

# python - 比较文件时Python没有返回预期值

> ID：12323479
> 
> 赞同：0
> 
> 时间：2012-09-07T18:26:09.537
> 
> 标签：python

我正在尝试构建此脚本以检查远程服务器上的文件是否包含设置的后缀，即 IE .ok、.err、.log。我不知道为什么我得到了我的回报 `"('\\\\THPNWSS5\\d$\\DA$Utils\\log\\networker', [], ['P3EWS.err']) nothing is equal`“
我知道我的 try 语句有问题，但我看不到它。

```
 chkbkpstats = csv.reader(file('c://temp//networkerservers1.csv'))

    srvrs = []
    for row in chkbkpstats:
        srvrs.append({'Name' : row[0], 'Instance' : row[1]})

    for srvr in srvrs:
        srvrName = (srvr['Name'])
        srvrInst = (srvr['Instance'])
        w2k3chk = r'\\%s\d$\DA$Utils\log\networker' % srvrName
        w2k8chk = r'\\%s\c$\ProgramData\folder\DA$Utils\log\networker' % srvrName

        try:
            c = wmi.WMI(srvr['Name'])
        except:
            print 'Error connecting to %s to check OS version' % srvrName

        else:
            osVer = c.Win32_OperatingSystem()[0].Caption
            if '2003' in osVer:
                for file in os.walk(w2k3chk):
                    print file
                    try:
                        if srvrInst == srvrInst + ".log":
                            print 'The Backup for %s on %s still running' % (srvrInst, srvrName)
                        if srvrInst == (srvrInst + ".ok"):
                            print 'Completed Successfully'
                        if srvrInst == (srvrInst + ".err"):
                            print 'Backup failed'
                    except:
                        print 'nothing is equal'
                #print '%s is w2k3' % srvr['Name']
            elif '2008' in osVer:
                print '%s is w2k8' % srvr['Name'] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T18:37:50.327

这条线有问题

```
 if srvrInst == file.srvrInst + ".log": 
```

应该 ：-

```
if file == (srvrInst + ".log"): 
```

文件没有`srvrInst`.

**编辑后更新：-**

你怎么能认为这是真实的：-

```
if srvrInst == (srvrInst + ".ok"): 
```

认为`srvrInst="John"`

> **"约翰"=="约翰.ok"**

永远是真的？？？？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T19:33:30.653

虽然@लंड 指出了您当前代码中最紧迫的错误，但他建议的修复`file == (srcInst + ".log")`方法也不起作用。那是因为该`os.walk`函数不仅返回文件名。它返回一个三元组的生成器，每个元组由一个目录、一个子目录列表（也将被遍历）和一个文件列表组成。您需要一个额外的循环来遍历各个文件。

像这样的东西应该工作：

```
found = False
for folder, subfolders, files in os.walk(w2k3chk):
    for file in files:
        if file == srvrInst + ".log":
            found = True
            print 'The Backup for %s on %s still running' % (srvrInst, srvrName)
        elif file == (srvrInst + ".ok"):
            found = True
            print 'Completed Successfully'
        elif file == (srvrInst + ".err"):
            found = True
            print 'Backup failed'
if not found:
    print 'No file found' 
```

如果您确定要搜索的文件夹中应该只有一个文件，您可以简化一下：

```
try:
    folder, subfolders, files = next(os.walk(w2k3chk)):
    file = files[0]
    if file == srvrInst + ".log":
        print 'The Backup for %s on %s still running' % (srvrInst, srvrName)
    elif file == (srvrInst + ".ok"):
        print 'Completed Successfully'
    elif file == (srvrInst + ".err"):
        print 'Backup failed'
    else:
        print 'Unknown file found: %s' % (file)
except (StopIteration, IndexError): # exceptions if folder or file doesn't exist
    print 'No file found' 
```

# javascript - Google Maps JavaScript API v3 可编辑多边形，防止复杂多边形（相交折线）

> ID：12323482
> 
> 赞同：1
> 
> 时间：2012-09-07T18:26:29.000
> 
> 标签：javascript, google-maps-api-3

使用 Google Maps JavaScript v3 API 的可编辑多边形和/或绘图库，是否有可能以某种方式阻止用户创建两个或多个包含多段线彼此相交的复杂多边形？或者如果我想要这个功能，我是否必须编写自己的多边形编辑库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T19:18:19.357

`polygoncomplete`您可以在 DrawingManager 的事件中检查折线相交。它将作为参数传入多边形，然后由您来检测/修复折线交叉点。

# ios - 核心数据崩溃不可变对象

> ID：12323484
> 
> 赞同：3
> 
> 时间：2012-09-07T18:26:44.013
> 
> 标签：ios, core-data, iphonecoredatarecipes

为什么会崩溃？

```
CategoryOfExpense *newCatEx = (CategoryOfExpense *) [NSEntityDescription entityForName:kCategoryOfExpense inManagedObjectContext:moc];
newCatEx.name = self.nameTextField.text; <- crashes here
newCatEx.icon =  [NSData dataWithData:UIImagePNGRepresentation(self.iconImageView.image)]; 
```

错误是：

```
*** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'Can't modify an immutable model.' 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-07T20:24:33.297

您正在调用`entityForName:inManagedObjectContext:`which 返回一个`NSEntityDescription`. 这将是实体的定义，就像您在构建模型时在 GUI 中描述它的方式一样。

我相信你想要的是`insertNewObjectForEntityForName:inManagedObjectContext:`创建一个新`NSManagedObject`的实体。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T19:12:45.173

你这样做是错的。这是来自[开发网站](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/CoreDataFramework/Classes/NSEntityDescription_Class/NSEntityDescription.html)：

**编辑实体描述：**

```
Entity descriptions are editable until they are used by an object graph manager.
This allows you to create or modify them dynamically. 
However, once a description is used (when the managed object model to which it belongs 
is associated with a persistent store coordinator), it must not (indeed cannot) be changed.
This is enforced at runtime: any attempt to mutate a model or any of its sub-objects 
after the model is associated with a persistent store coordinator causes an exception to 
be thrown. If you need to modify a model that is in use, create a copy, modify the copy, 
and then discard the objects with the old model. 
```

最后提到的例外就是你得到的。进一步接近最后是你需要做的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T18:45:12.963

试试这个：

> 您可以通过调用实例来获取模型`-mutableCopy`的可变副本。`NSManagedObjectModel`

在这里找到[如何编辑从 iOS5 中的妈妈加载的 NSManagedObjectModel](https://stackoverflow.com/questions/7848237/how-to-edit-a-nsmanagedobjectmodel-that-was-loaded-from-a-momd-in-ios5)

# ruby-on-rails-3 - 呈现带有一些限制的显示视图 html

> ID：12323487
> 
> 赞同：0
> 
> 时间：2012-09-07T18:27:03.980
> 
> 标签：ruby-on-rails-3, view

我想创建一个随机选择生成器，应该使用`<%= button_to("Randomize someting to do!", {:action => "random_task"}) %>` 这个调用方法的按钮来调用它`random task`

```
def random_task
  x = rand(Task.first.id..Task.last.id)
  @task = Task.find(x)
  rescue ActiveRecord::RecordNotFound => e
  random_task

  respond_to do |format|
    format.html { render @task}
    format.json { head :no_content }
  end
end 
```

这应该回调我的 view/random_task.html.erb

```
 <div class="field">
    <%= f.label :name %><br />
    <%= f.text_field :name,:disabled=>true %>
  </div>
  <div class="field">
    <%= f.label :category %><br />
    <%= f.text_field, :category,:disabled=>true %>
  </div>/tasks/
  <div class="field">
    <%= f.label :points %><br />
    <%= f.number_field :points,:disabled=>true %>
  </div>
  <div class="rank_buttons"> 
     <%= link_to 'Vote up', :action => 'rate_up', :id => task.id %>
     <%= link_to 'Vote down', :action => 'rate_down', :id => task.id %>
  </div>
  <div class="actions">
    <%= f.submit %>
  </div>  
  <% end %> 
```

**编辑**问：如果写得好，我如何正确调用渲染表单？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T19:23:33.693

如果我理解正确，`random_task`不是打电话`random_task.html.erb`，对吧？

`random_task`应该是控制器的一部分。并且`rand_task.html.erb`应该位于与视图文件夹中的控制器同名的文件夹中。

如果`random_task`在`randoms_controller.rb`例如，添加`random_task.html.erb`到以下路径：`views/randoms/`

然后 random_task 应该呈现您描述的表单。

我希望它有帮助

# javascript - Javascript 数组

> ID：12323489
> 
> 赞同：-3
> 
> 时间：2012-09-07T18:27:12.457
> 
> 标签：javascript

只想在javascript中循环一个数组。

这是我的基本数组

```
var family = ["1A+1C","1A+2C","1A+3C","2A","2A+1C","2A+2C","2A+3C"]; 
```

我希望根据插槽获取ageset0到ageset6数组值。当前，ageset0 值一直在打印

如何实现它。提前致谢。

这是示例页面。

[http://jsfiddle.net/baVU2/2/](http://jsfiddle.net/baVU2/2/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T18:46:00.060

如果我理解你的问题，那么我认为你想要这样的东西（你想要`ageset0 and ageset1`打印两个数组，目前只有 'ageset0' 正在通过循环打印）

```
for(i=0; i<family.length; i++)
{
    var max=Math.max(ageset0.length, ageset1.length);
    for(k=0; k<max; k++)
    {              
        var a=age[k] ? age[k] : '', a0=ageset0[k] ? ageset0[k] : '',
        a1=ageset1[k] ? ageset1[k] : '', f=family[k] ? family[k] : '';
        document.write("STARCOMP , "+a+ " , "+a0+" ,"+a1+", "+f+"<br>");
        document.write("<br>");
    }
} 
```

[**演示**](http://jsfiddle.net/baVU2/5/)。

**更新：（**来自评论）

```
var allArrays=[ageset0, ageset1, ageset2, ageset3, ageset4, ageset5,ageset6];
var a=age, f=family;
for(x=0; x<allArrays.length; x++)
{
    var ag=allArrays[x];
   for(k=0; k<ag.length; k++)
   {              
       document.write("STARCOMP , "+a[k]+ " , "+ag[k]+", "+f[k]+"<br>");
       document.write("<br>");
   }
} 
```

[**演示**](http://jsfiddle.net/baVU2/6/)。

# jquery - 遍历 dom 文档 - jsfiddle

> ID：12323490
> 
> 赞同：0
> 
> 时间：2012-09-07T18:27:12.830
> 
> 标签：jquery, jquery-traversing

[我已经在J​​SFiddle](http://jsfiddle.net/XqV2t/)设置了一个小提琴！

我的问题是如何使用我输入的名称遍历到最近的 TH，并获取其内容？在小提琴的情况下，应该获取“www.sverigemotrasism.nu”。

我尝试并尝试了许多不同的解决方案，每次都更接近一点。但现在我别无选择，至少我是这么认为的！？

看一看，如果您知道如何解决它，我会很高兴听到如何解决的；）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T18:50:13.160

由于 TH 实际上不是 INPUT 的父级，而是父级 TD 的更高级别同级，因此我使用 .closest() 查找父级 TR，然后向下查找目标 TH：

```
<script>
        var texten = $('#sverigemotrasism').closest('tr').find('th').text();
        alert(texten);
 </script>
​ 
```

# php - 如何在不同的服务器上获得相同的日期结果

> ID：12323494
> 
> 赞同：1
> 
> 时间：2012-09-07T18:27:26.227
> 
> 标签：php, date, timezone

```
<?php

//                            viper-7            phpfiddle
fdate(1346976000);       // Fri 2012-09-07     Thu 2012-09-06
fdate(1348704000);       // Thu 2012-09-27     Wed 2012-09-26
fdate(time());           // see yourself

function fDate($what){echo date('D Y-m-d',$what).'<br>';}

?> 
```

测试链接
[http://codepad.viper-7.com/d4tUES](http://codepad.viper-7.com/d4tUES)
[http://www.phpfiddle.org/main/code/zdx-u10](http://www.phpfiddle.org/main/code/zdx-u10)

为了在任何服务器上获得相同的结果，我需要设置什么？
谢谢

我确定是时区问题，但我不知道如何意识到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T18:34:51.973

使用 gmdate 返回 gmt 时间

```
function fDate($what){echo gmdate('D Y-m-d',$what).'<br>';} 
```

看看你是否还有问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T18:29:42.667

设置[默认时区](http://php.net/manual/en/function.date-default-timezone-set.php)

将其设置为 UTC 或 GMT，您可以将其用作所有服务器的基础

```
date_default_timezone_set('UTC'); 

fdate(time());  // will return the UTC time 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-07T18:32:15.120

`date_default_timezone_set`根据您所需的时区在脚本的开头包含。

```
<?php
date_default_timezone_set('America/Los_Angeles');
?> 
```

[支持的时区列表](http://www.php.net/manual/en/timezones.php)

# windows - 有什么方法可以为将来的时间点转换 UTC 时间？

> ID：12323495
> 
> 赞同：1
> 
> 时间：2012-09-07T18:27:33.010
> 
> 标签：windows, winapi

在 Windows 中，我可以通过调用`GetTimeZoneInformation`. 结果我得到的结构将有两个不同的偏差值，一个代表标准时间，一个代表 DST，一个`BiasCode`代表我们当前处于哪个偏差值。如果我们只关心当前时刻，那很好。

但是我有一个 API，用户调用它来检索有关即将发生的事件的数据。数据以本地时间存储在数据库中，用户希望它采用 UTC，所以我运行转换，一切都很好……除了我们将在几周内进行时间更改。如果我根据今天的偏差报告时间变化的另一边的事件，它们将延迟一个小时。

有什么我可以调用的东西`GetTimeZoneInformation`，除了我传递一个日期和时间然后`BiasCode`它给我的是*那个时候正确的那个，*而不是当前的那个？（是的，我知道规则每年都在变化。我不是在寻找任何看起来超过未来几周的东西。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T21:42:36.540

[`SystemTimeToTzSpecificLocalTime`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724949%28v=vs.85%29.aspx)- 让我引用 MSDN -

> 将协调世界时 (UTC) 中的时间转换为指定时区的对应本地时间。

您可以提供过去和未来的输入 UTC 时间，并在考虑特定时间 DST 设置的所有详细信息的情况下进行本地时间转换。

`TzSpecificLocalTimeToSystemTime`是进行反向转换的孪生函数。

对我来说更重要的问题是，即使是同一地区，DST 设置也会不时变化，而且每年的转换可能不同（当然，这主要影响过去的事件，而不是未来的事件）。我假设这个 API 也会处理这个问题，跟踪 DST 规则随时间变化的历史。

UPD。这个假设是正确的，MSDN 提到：

> *   时区对旧年份和新年份使用不同的 UTC 偏移量。
> *   要转换的 UTC 时间和计算的本地时间是不同年份的。

# python - Python：为什么我的代码不打印？

> ID：12323496
> 
> 赞同：-3
> 
> 时间：2012-09-07T18:27:33.377
> 
> 标签：python

见最后四行：

```
from sys import argv

script, filename = argv
print "we're going to erase %r." % filename

txt = open(filename)
print txt.read()
print "If you do not want that, hit CTRL-C (^C)."
print "If you do want that, hit RETURN."
raw_input("?")
print "Opening the file..."
target = open(filename, 'w')
print "Truncating the file. Good bye!"
target.truncate()

print "now I'm going to ask you for three lines."
line1 = raw_input("line 1: ")
line2 = raw_input("line 2: ")
line3 = raw_input("line 3: ")

print "I'm going to write these to the file."
target.write("%s\n%s\n%s\n" % (line1, line2, line3))
target.close() #Need to close the file when done editing, or else cant open.

print "Here's the updated file!"
txt = open(filename)
print txt.read() 
```

我试图在命令提示符上显示更新的文件，但它没有打印，打印的最后一行显示“这是更新的文件！” 更新的文件在哪里？！？！

更新：我让它工作了，我忘了包含一行“target = open（filename，'w'）”，我试图通过删除我的评论来让眼睛更容易，但是，我不小心删除了这个重要的部分。它现在也在打印我想要的东西。感谢您的帮助，我不确定为什么它现在可以工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T20:41:10.373

无需关闭并重新打开文件。

```
target.write("%s\n%s\n%s\n" % (line1, line2, line3))
target.close() #Need to close the file when done editing, or else cant open.

print "Here's the updated file!"
txt = open(filename)
print txt.read() 
```

你只需要在'w+'模式下打开文件，然后你就可以`seek()`定位了`0`；文件的开头。

```
target.write("%s\n%s\n%s\n" % (line1, line2, line3))
target.seek(0)

print "Here's the updated file!"    
print txt.read() 
```

当您使用“w”或“w+”打开文件进行写入时，它会删除文件内容——没有理由这样`truncate()`做。

# python - 如何使 Sphinx Autodoc 显示继承选项与 Django 类的 Intersphinx 链接一起使用？

> ID：12323498
> 
> 赞同：1
> 
> 时间：2012-09-07T18:27:52.060
> 
> 标签：python, django, python-sphinx

我正在使用`show-inheritance`Sphinx Autodoc 的选项来列出我所有类的基类。其中一些类链接到 Django 类，但不幸的是，Intersphinx 无法找到它们。

问题的原因是 Autodoc 将基类列为 (say) `django.forms.widgets.Select`，但 Django 仅提供 objects.inv 文件列表`django.forms.Select`。尽管这两个条目都是相同的类并且都是导入它们的有效方式，但这会抛出 Intersphinx。

有没有办法解决这个问题？是否还有其他列出了别名的 Django objects.inv 来源？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-09T18:43:44.500

好的，我自己解决了这个问题。在我看来，最谨慎的方法是`objects.inv`用缺失的引用修补 Django 的文件。

我已经编写了一个 Java 代码来自动执行此操作。您可以使用它自己为任何已发布的 Django 版本创建补丁版本。

代码位于[https://github.com/applegrew/sphinxutil](https://github.com/applegrew/sphinxutil)。

此外，我还提供了`objects.inv`Django 版本 1.4.1 的修补文件。

# sql - Netezza 中的 Decile 排名表现

> ID：12323499
> 
> 赞同：3
> 
> 时间：2012-09-07T18:28:05.590
> 
> 标签：sql, netezza

我在 TwinFin 6 上的 Netezza 中有一个小的（ish）聚合数据集，大约 1000 万行。

为了简化问题，我减少了列数：

```
CUSTOMER_SALES_AGG

CUSTOMER_ID
NUMBER_TRANS
TOTAL_DOLLARS
TOTAL_ITEMS 
```

此表分布在 CUSTOMER_ID 上，每个客户 ID 有 1 行，收集客户进行的总交易、他们花费的总美元以及他们购买的物品的数量。

我正在尝试通过 # 次交易、总花费的美元和购买的总物品来计算每个客户在所有客户中的十分位排名。例如，如果客户花费 >= 90% 的其他客户，他们将排名第 1 个十分位。

我建立了一个查询：

```
SELECT
    CUSTOMER_ID, 
    NUMBER_TRANS,
    NTILE(10) OVER(ORDER BY NUMBER_TRANS DESC NULLS LAST) as TRANS_DECILE,
    TOTAL_DOLLARS,
    NTILE(10) OVER(ORDER BY TOTAL_DOLLARS DESC NULLS LAST) as DOLLARS_DECILE,
    TOTAL_ITEMS,
    NTILE(10) OVER(ORDER BY TOTAL_ITEMS DESC NULLS LAST) as ITEMS_DECILE
FROM CUSTOMER_SALES_AGG; 
```

这可行，但速度*很*慢，需要将近 10-20 分钟才能运行。

由于进行十分位数计算需要对数据进行排序，然后将排序后的数据分组，Netezza 的 MPP 结构似乎可以很好地处理这个问题。如果我对十分位数进行分区，我可以重新分配并在每个 SPU 上进行排名，它可能会更快。

关于如何加快速度的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T21:14:41.400

似乎主要问题源于`NTILE`在同一个 SQL 语句中使用了多个分析函数 ()（我的实际语句以 7 种不同的方式对客户进行排名）。

据我所知，正如@GordonLinoff 在评论中解释的那样，Netezza 会在每个处理器上进行快速排序，并在控制器系统（Netezza 主机）上进行最终快速排序。然而，它只执行一次，然后，正如他猜测的那样 - 将其全部推送到控制器系统。

它继续对控制器系统上的数据进行快速排序以用于剩余的分析功能，根本不使用并行性。我希望它应该以每种方式对数据进行排序，在每个处理器上，在主机上进行最终排序，然后将数据推送回处理器，以便对每列进行最终哈希连接。

我最终创建了一个类似这样的查询。

```
WITH 
NT AS (
  select customer_id, 
         number_trans,
         ntile(10) over (order by number_trans) as trans_decile
),
TD AS (
  select customer_id, 
         total_dollars,
         ntile(10) over (order by total_dollars) as dollars_decile
),
NI AS (
  select customer_id, 
         total_items,
         ntile(10) over (order by total_items) as items_decile
)
SELECT
    NT.CUSTOMER_ID, NT.NUMBER_TRANS, NT.TRANS_DECILE,
    TD.TOTAL_DOLLARS, TD.DOLLARS_DECILE,
    NI.TOTAL_ITEMS, NI.ITEMS_DECILE
FROM NT
JOIN TD ON (NT.CUSTOMER_ID = TD.CUSTOMER_ID)
JOIN NI ON (NT.CUSTOMER_ID = NI.CUSTOMER_ID); 
```

这个查询的计划要复杂得多，但对于我进行 7 次分析排名的情况，查询时间从 12 分钟减少到不到 5 分钟。

# c# - 从 Watin 触发 WebBrowser.Close()

> ID：12323501
> 
> 赞同：1
> 
> 时间：2012-09-07T18:28:10.137
> 
> 标签：c#, watin

我`Watin`用来在网站上运行一些测试。我认为缺少的是我无法在浏览器上停止导航`Watin`。`WebBrowser`控件本身有一个方法`browser.Close()`。有没有办法从 watins 触发这个`IE`？

在测试中，我需要从正在加载的站点停止浏览器，并强制它加载另一个 url。测试环境包含一个非常长的页面和有限的网络速度。所以网站需要很长时间才能加载。我想取消它并让它导航到其他地方。

仅仅使用`browser.GoTo("http://testurl");`并不能解决问题。有没有办法从测试线程中停止浏览器？

（我不想从该线程抛出一个事件并`browser.close()`从主线程调用。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T23:58:35.940

可能有很多方法可以做到这一点。这段代码展示了如何使用 JavaScript 来做到这一点。

```
string jsCode = "document.execCommand('Stop');\n" +
                "window.location='http://www.google.com.tr'";
browser.RunScript(jsCode); 
```

请注意，这`document.execCommand('Stop')`是针对 IE 的，如果您使用的是 FF，请使用`window.stop()`

# asp.net - asp:RequiredFieldValidator 在 aspx 页面中导致额外的行

> ID：12323502
> 
> 赞同：1
> 
> 时间：2012-09-07T18:28:17.807
> 
> 标签：asp.net, css, textbox, formatting, requiredfieldvalidator

我有简单的 ASPX 页面，带有几个文本按钮/下拉菜单。对于几乎每个文本按钮/下拉菜单，我都有验证器。

我面临的问题是这些验证器中的每一个都会在页面上产生一个空白行。下面是 ASPX 页面中的代码示例。我尝试添加 DISPLAY=DYNAMIC 但我看到空白行减少了，但是当显示验证器消息（或必需的 * 标记）时，它显示在文本框附近不相关。

```
 <tr>
            <asp:RequiredFieldValidator runat="server" ID="CityValidator" meta:resourceKey="CityValidator"
                ValidationGroup='<%# ValidationGroupName %>'  ControlToValidate="CityTextBox">*</asp:RequiredFieldValidator>
            <td>
                    <asp:TextBox runat="server" ID="CityTextBox" MaxLength='30' CssClass="TextBox" />
            </td>
                    <asp:RequiredFieldValidator runat="server" ID="RegionCodeValidator" meta:resourceKey="RegionCodeValidator"
                        ValidationGroup='<%# ValidationGroupName %>' ControlToValidate="RegionCodeTextBox" >*</asp:RequiredFieldValidator>
            <td>
                    <asp:TextBox runat="server" ID="RegionCodeTextBox" MaxLength='2' CssClass="TextBox"/>
            </td>
        </tr> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T18:30:32.127

将验证器显示设置为动态。您还应该将验证器放在表结构中，以保持您的 HTML 结构有效。

```
 <tr>
        <td>
                <asp:RequiredFieldValidator runat="server" ID="CityValidator" meta:resourceKey="CityValidator" Display="Dynamic" ValidationGroup='<%# ValidationGroupName %>'  ControlToValidate="CityTextBox">*</asp:RequiredFieldValidator>
                <asp:TextBox runat="server" ID="CityTextBox" MaxLength='30' CssClass="TextBox" />
        </td>
        <td>
                <asp:RequiredFieldValidator runat="server" ID="RegionCodeValidator" meta:resourceKey="RegionCodeValidator" Display="Dynamic" ValidationGroup='<%# ValidationGroupName %>' ControlToValidate="RegionCodeTextBox" >*</asp:RequiredFieldValidator>
                <asp:TextBox runat="server" ID="RegionCodeTextBox" MaxLength='2' CssClass="TextBox"/>
        </td>
    </tr> 
```

# javascript - 为什么我的 JS 默默地死掉了？

> ID：12323506
> 
> 赞同：2
> 
> 时间：2012-09-07T18:28:43.227
> 
> 标签：javascript, dom

好的，所以我在不到十年前写了这个：

[http://meyerweb.com/eric/tools/color-blend/](http://meyerweb.com/eric/tools/color-blend/)

我很确定当时它工作得很好，但是从那时起（或者，谁知道，也许总是）一个错误已经潜入。我可以这样证明它：

1.  留在'十六进制'。选择几种颜色。混合它们。
2.  使用键盘编辑十六进制颜色（即，输入新的十六进制值，或更改那里的值）。再次混合。
3.  到现在为止还挺好。
4.  将模式切换为“RGB”。
5.  编辑其中一个数字。
6.  现在没有任何效果——没有混合，没有类型切换，什么都没有。

为什么？我什至无法弄清楚它失败的地方。

（是的，我知道 JS 非常笨拙，并且使用全局变量和各种 ick。我确实打算重写它。但首先我需要了解这里出了什么问题，如果可能的话，我应该如何诊断它我自己。请注意，我只是勉强了解如何以非常基本的方式使用 Firefox JS 调试器，而且可能不正确。）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-07T18:43:14.657

您需要在 colorParse() 中对正则表达式进行不区分大小写的开关。

你 .toUpperCase 颜色...所以 'rgb' 去 'RGB' 但是你的正则表达式试图替换它不能做的小写 'rgb'。

col = c.replace(/[#rgb(]*/i, '');

注意正则表达式中的 /i 使其不区分大小写。

# jquery - 将字符串参数传递给用户创建的 jQuery 函数

> ID：12323508
> 
> 赞同：1
> 
> 时间：2012-09-07T18:28:46.690
> 
> 标签：jquery

通过`onClick`a`href`标签的方法，我试图将三个变量、两个数字和一个字符串传递给我创建的 jQuery 方法。这些数字完全没有问题传递，但是关于使用 传递字符串变量`answer_text = TEST TEST`，我得到了下面的错误。我想我对字符串的编码不正确。谁能指出我正确的方向？

Firefox 15、Firebug 和 Twitter 引导程序。

> 语法错误：属性列表后缺少 }

```
$().edit_answer({
  row: 0, 
  num_answer: 0, 
  answer_text: TEST TEST
});

onClick="$().edit_answer({
  row:' + row_id + ', 
  num_answer:' + num_ans + ',
  answer_text:\"' + ans +'\"
});" 
```

所有引号的原因是`href`动态生成完整的 a 标签

```
jQuery.fn.edit_answer = function () {
    var args = arguments[0] || {};
    var row = args.row;
    var num_answer  =  args.num_answer;
    var answer_text = args.answer_text;
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T18:35:29.367

```
onClick="$().edit_answer({row:' + row_id + ', num_answer:' + num_ans + ',answer_text:\"' + ans +'\"});" 
```

引用 ？排：'

'row:' + row_id + ', num_answer:' + num_ans + ',answer_text:"' + ans +'"'

试试那条线。

# ruby-on-rails-3 - Rails 中的日期选择时区问题

> ID：12323509
> 
> 赞同：1
> 
> 时间：2012-09-07T18:28:47.393
> 
> 标签：ruby-on-rails-3, datetime, timezone

我正在尝试在用户的时区使用 datetime_select 助手，但我遇到了一些问题。设置如下：

在控制器中，我设置了日期：

```
 Time.zone = "Pacific Time (US & Canada)" 
```

然后在视图中我有以下内容：

```
 <%= datetime_select :custom_daily_message, :date, :default => Time.now.in_time_zone %> 
```

当我在浏览器中看到视图时，在时区中正确选择了日期。让我们说以下内容：

```
 Fri, 07 Sep 2012 11:20:00 PDT -07:00 
```

但是，当我提交表单并检查模型中的日期时，它显示以下内容：

```
 Fri, 07 Sep 2012 11:20:00 UTC +00:00 
```

我希望日期是 UTC，但 PST 有适当的偏移量。有谁知道为什么会这样？是否有解决此问题的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-30T15:57:56.217

我为中央时间做了这样的事情（在我的模型中）：

```
定义开始日期
  super.in_time_zone("Central Time (US & Canada)") if super
结尾

定义结束日期
  super.in_time_zone("Central Time (US & Canada)") if super
结尾

```

但我还需要一个 before_save 来正确设置对象保存的时间。

**编辑**：毕竟我不需要 before_save，只要我的 time_zone 在我的 application.rb 文件中正确设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T18:35:14.320

你可以尝试这样做：

在您`/config /application.rb`设置所需的时区中，对于我的应用程序，我是这样做的。

```
config.time_zone = 'Mountain Time (US & Canada)' 
```

如果您有任何问题，请告诉我。

# c# - jQuery serializeArray + ajax.post IE（仅）偶尔不会将表单元素传递给 ashx Handler

> ID：12323510
> 
> 赞同：0
> 
> 时间：2012-09-07T18:28:49.507
> 
> 标签：c#, jquery, ajax, ashx, web-farm

从 jQuery AJAX 帖子调用的我的 .ashx 处理程序有时不会在 HttpContext.Request 中接收表单元素。

发生这种情况时，请求要么仅包含 ViewState 元素，要么根本不包含任何元素。

它仅在 IE7、IE8 和 IE9 上偶尔失败（各种浏览器每天点击数千次）。我自己无法使用 IE 重现此问题，并且“大多数”IE 用户（以及所有其他用户）不会遇到此问题。

Javascript：

```
var data = $('form').serializeArray();
$.ajax({
            type: "POST",
            async: false,
            dataType: "text",
            url: "handler.ashx",
            data: data
        }); 
```

C# (handler.ashx):

```
void IHttpHandler.ProcessRequest(HttpContext context) {
     var collection = SetCollection(context.Request);

     // collection sometimes has just ViewState elements;
     // sometimes it has no items
     }

private NameValueCollection SetCollection(HttpRequest request){
    return request.Form;
} 
```

其他信息：该站点是具有负载平衡器的网络场的一部分。使用.net 3.5。我读到 IE 有不同的生成请求头的方式；不确定这是否相关。

感谢您对解决我的问题的任何见解。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T16:59:43.620

已修复：Firefox 中也存在此问题，这有助于解决问题，因为我可以使用 Firebug。

这个处理程序被构建用于向服务器发布信息并在出现任何错误时抛出服务器异常（即 javascript 不需要响应）。Firefox 和 IE 期待对 javascript 的响应；Firefox 正常失败（抛出服务器错误但仍在工作）；IE 因浏览器崩溃而严重失败。

我在处理程序的末尾添加了一个 context.Response.write("true") ，它不再抛出错误或死亡。

希望这可以帮助其他人。

# javascript - 由于动态目录，Javascript 链接不断中断

> ID：12323512
> 
> 赞同：0
> 
> 时间：2012-09-07T18:28:53.593
> 
> 标签：javascript, asp.net, html

所以我以前遇到过这个问题。由于虚拟目录是动态的，它不断破坏我的 javascript 链接。我为他们使用了 ResolveUrl，它似乎奏效了。

```
<link href="<%=ResolveUrl("~/JQueryPlugins/Tooltip/toolitp.css")%>" rel="stylesheet" type="text/css" /> 
```

但是，我遇到了一个问题。在另一个文件中，我有另一组 javascript 链接，它们链接到 javascript 文件 2 个目录，因此默认值如下所示：

```
<script type="text/javascript" src="../../lib/yui/utilities/utilities.js"></script> 
```

所以现在当我尝试向它添加 ResolveUrl 时，它似乎不起作用。有什么建议吗？

# ruby-on-rails-3 - 由于组关键字，Kaminari 无法正常工作

> ID：12323521
> 
> 赞同：2
> 
> 时间：2012-09-07T18:29:25.553
> 
> 标签：ruby-on-rails-3, kaminari

```
@users = User.registred
        .includes(:items)
        .joins('LEFT OUTER JOIN items ON users.id=items.user_id')
        .group(User.column_names.collect do |c| "#{User.table_name}.#{c}" end.join(','))
        .order('CASE WHEN LENGTH(users.profile_picture) > 0 THEN 0 ELSE 1 END, followers_count DESC, bibbed_items_count DESC, SUM(items.user_likes_count) DESC, users.id') 
```

在哪里`registered = where("deactivated_at IS NULL AND last_sign_in_at IS NOT NULL")`

Kaminari 不使用组子句。如何优化此查询中的组子句？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-06T11:18:16.280

有同样的问题，像你一样修复它 - 通过在子句中提供适当的`id`值。`group`但是，显然它不需要替换您原来的 group 子句 - 只需附加一个额外的调用：

```
@users = User.registred
    .includes(:items)
    .joins('LEFT OUTER JOIN items ON users.id=items.user_id')
    .group(User.column_names.collect do |c| "#{User.table_name}.#{c}" end.join(','))
    .order('CASE WHEN LENGTH(users.profile_picture) > 0 THEN 0 ELSE 1 END, followers_count DESC, bibbed_items_count DESC, SUM(items.user_likes_count) DESC, users.id')
    .group('users.id') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-10T05:44:29.777

我用这个修复了它：

```
@users = User.registred
        .includes(:items)
        .joins('LEFT OUTER JOIN items ON users.id=items.user_id')
        .group("users.id")
        .order('CASE WHEN LENGTH(users.profile_picture) > 0 THEN 0 ELSE 1 END, followers_count DESC, bibbed_items_count DESC, SUM(items.user_likes_count) DESC, users.id')

@users = @users.page(params[:page]) 
```

# sql-server-2008 - 如何根据特定条件从所有表中获取行数

> ID：12323529
> 
> 赞同：3
> 
> 时间：2012-09-07T18:30:47.950
> 
> 标签：sql-server-2008, tsql

我可以使用此查询获取所有表的行数。

```
 SELECT '[' + SCHEMA_NAME(t.schema_id) + '].[' + t.name + ']' AS fulltable_name, SCHEMA_NAME(t.schema_id) AS schema_name, t.name AS table_name,
    i.rows
    FROM sys.tables AS t INNER JOIN
    sys.sysindexes AS i ON t.object_id = i.id AND i.indid < 2

**AND
t.name.programID = 4** 
```

但我需要计算所有行，其中 programID = n 在将粗体行添加到 where 子句时，我不断收到以下错误

无法调用 nvarchar 上的方法。非常需要任何帮助，感谢安迪

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T19:41:38.947

您的示例中的表名无法像属性一样访问。它只是一个字符串，而不是表本身。我已经包含了一个可能对你有用的解决方案。感觉有点像黑客，但它会让你上路。

```
DECLARE @Value INT, @Column_Name VARCHAR(MAX)

SELECT @Value = 4, @Column_Name = 'ProgramId'

IF OBJECT_ID(N'tempdb..#Results',N'U') IS NOT NULL
            DROP TABLE #Results

SELECT  '[' + SCHEMA_NAME(t.schema_id) + '].[' + t.name + ']' AS fulltable_name, SCHEMA_NAME(t.schema_id) AS     schema_name, t.name AS table_name,
i.rows [Row_Count]
INTO #Results
FROM sys.tables AS t INNER JOIN
sys.sysindexes AS i ON t.object_id = i.id AND i.indid < 2
INNER JOIN information_schema.COLUMNS  C ON t.name = c.TABLE_NAME AND SCHEMA_NAME(t.schema_id)= c.TABLE_SCHEMA  
WHERE C.COLUMN_NAME = @Column_Name

DECLARE @SQL VARCHAR(MAX)

SELECT @SqL = COALESCE(@SqL +' UNION ',' ')  + 'SELECT '''+ fulltable_name + ''', COUNT(*) FROM ' +     fulltable_name +     ' where ' + @Column_Name + ' = ' + CAST(@Value AS VARCHAR(1000))+ ' GROUP BY ' + @Column_Name     + ' '
FROM #Results

PRINT(@SqL)
EXEC (@SqL)

IF OBJECT_ID(N'tempdb..#Results',N'U') IS NOT NULL
            DROP TABLE #Results 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T19:51:08.197

您确定数据库中的所有表都有“programID”列吗？如果是这样..试试这个

```
exec sp_MSforeachtable 'SELECT ''?'' AS TableName,COUNT(*) AS cnt FROM ? WHERE programID = 4' 
```

**编辑**：此查询将跳过计算没有列“programID”的表

```
CREATE TABLE #t (table_name Varchar(500), record_count int)

INSERT INTO #t (table_name,record_count)
exec sp_MSforeachtable '
     IF EXISTS(SELECT * FROM sys.columns WHERE name = ''programID'' 
             and object_id = object_id(''?''))
     EXEC(''SELECT ''''?'''' AS TableName,COUNT(*) AS cnt FROM ? WHERE programID = 4'')'

SELECT * FROM #t 
```

# ios5 - 在主线程和后台线程中调度 NSTimer 的区别？

> ID：12323531
> 
> 赞同：38
> 
> 时间：2012-09-07T18:31:05.173
> 
> 标签：ios5, nstimer, nsthread

当我调用`scheduledTimerWithTimeInterval:target:selector:userInfo:repeats:`主线程并将时间间隔设置为 5 秒时，计时器下方的代码被执行，并在 5 秒后调用计时器选择器。

但是如果我在某个后台线程中尝试相同的操作，下面的代码`scheduledTimerWithTimeInterval:target:selector:userInfo:repeats:`将不会被执行，它会等待计时器触发然后被执行。当然，为了在后台线程中运行定时器，我首先得到了一个实例`NSRunLoop`并运行它。

有没有办法在后台线程中设置计时器并使其非阻塞，所以它立即执行后的代码？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2019-01-24T09:12:05.227

**NSTimer**需要一个活动的运行循环，当在主线程中初始化时，它会自动使用主运行循环。如果您需要创建一个后台计时器，您需要将其附加到线程的运行循环并调用 run() 以使其处于活动状态。

1.  **NSTimer**需要一个实时的**NSRunLoop**来执行它的事件。在主线程中，**NSRunLoop**始终处于活动状态，并且在应用程序终止之前永远不会停止，但在其他线程中，您必须调用**run()**来激活**NSRunLoop**。

2.  **NSTimer**必须调用**invalidate()**来释放当前计时器，否则，计时器将保留当前目标实例的强引用，并一直保留在内存中，直到 invalidate() 调用或应用程序终止；

3.  **NSTimer**必须在同一个线程中创建和失效，很多时候，我们可能会忘记这一点。

看看这个例子，它可能会有所帮助>> [http://www.acttos.org/2016/08/NSTimer-and-GCD-Timer-in-iOS/](http://www.acttos.org/2016/08/NSTimer-and-GCD-Timer-in-iOS/) 和文档：[https ://developer.apple .com/documentation/foundation/nstimer](https://developer.apple.com/documentation/foundation/nstimer)

# python - nosetest - 获取失败的测试列表（没有额外的输出）

> ID：12323534
> 
> 赞同：6
> 
> 时间：2012-09-07T18:31:31.713
> 
> 标签：python, unit-testing, nosetests

是否可以只让鼻子输出无法获得简单而紧凑的失败测试列表的测试*名称？*

我已经想出了如何丢弃捕获的标准输出：

```
nosetests -s 
```

但仍然会打印失败的断言（例如，assertEqual 会同时打印预期值和实际值）。理想情况下，我只想知道失败的文件和行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-11-18T21:41:14.700

对您的问题的一个非常快速和原始的答案：

如果您使用***--verbosity=2*** 参数，它将列出您的所有测试

如果您将 stderr 重定向到 stdout，您可以获得一个文本文件，如下所示（下面的示例将在***测试***文件夹中运行）：

`nosetests -s --verbosity=2 test_tasks.py > mytestresults.txt 2>&1`

这将创建所有测试的完整列表，以及它们在顶部是通过还是失败（在从顶部`mytestresults.txt`获取测试列表后，您可以为失败的测试修剪所有断言输出、跟踪等`mytestresults.txt`）。

## 下面的示例输出：

```
test_admin_users_can_complete_tasks_that_are_not_created_by_them (tests.test_tasks.TasksTests) ... ok

test_admin_users_can_delete_tasks_that_are_not_created_by_them (tests.test_tasks.TasksTests) ... ok

test_admin_users_can_see_task_modify_links_for_all_tasks (tests.test_tasks.TasksTests) ... FAIL

test_logged_in_users_can_access_tasks_page (tests.test_tasks.TasksTests) ... FAIL

test_not_logged_in_users_cannot_access_tasks_page (tests.test_tasks.TasksTests) ... ok

test_string_representation_of_the_task_object (tests.test_tasks.TasksTests) ... ERROR

test_task_template_displays_logged_in_user_name (tests.test_tasks.TasksTests) ... FAIL

test_users_can_add_tasks (tests.test_tasks.TasksTests) ... FAIL

test_users_can_complete_tasks (tests.test_tasks.TasksTests) ... FAIL

test_users_can_delete_tasks (tests.test_tasks.TasksTests) ... FAIL

test_users_can_see_task_modify_links_for_tasks_created_by_them (tests.test_tasks.TasksTests) ... FAIL

test_users_cannot_add_tasks_when_error (tests.test_tasks.TasksTests) ... FAIL

test_users_cannot_complete_tasks_that_are_not_created_by_them (tests.test_tasks.TasksTests) ... FAIL

test_users_cannot_delete_tasks_that_are_not_created_by_them (tests.test_tasks.TasksTests) ... FAIL

test_users_cannot_see_task_modify_links_for_tasks_not_created_by_them (tests.test_tasks.TasksTests) ... ok

... stack trace, etc. will be down here (not shown for brevity) ... 
```

* * *

编辑：哎呀，我写了这个，保存了，然后注意到你也想要行号。您必须从跟踪细节中解析出来，或者更***精细***的方法是使用[Nose-progressive 插件](https://pypi.python.org/pypi/nose-progressive/) 以您喜欢的任何方式格式化输出。

# jquery - Jquery 更改事件未按预期更改选择选项

> ID：12323538
> 
> 赞同：0
> 
> 时间：2012-09-07T18:31:49.027
> 
> 标签：jquery

我的问题之前的快速概述：我有一组`<select>`s，其中一个是根据第一个的值通过 AJAX 有条件地填充的。没什么神奇的。我的问题是，当我尝试以编程方式设置第一个值和第二个值时，第二个被重置为默认的 0 indexed `<option>`。通过观察在浏览器中使用断点运行的代码，我知道所选值正在被重置。

编辑：我发现手动触发的事件直到包含函数完成后才真正触发。这就是为什么我认为该值正在被重置，但实际上选项正在被重新填充。

HTML：

```
<div class="row offset3">

    <select id="select-a" name="select-a">
        <option value="1">1</option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
        <option value="5">5</option>
        <option value="6">6</option>
    </select>

    <select id="select-b" name="select-b">

        <!-- AJAX Call fills this in -->

    </select>

    <button class="btn btn-primary" id="change">Change!</button>
</div> 
```

javascript 的快速摘要：向 select-a 添加一个更改侦听器，它将通过 AJAX 根据 select-a 的值获取 select-b 的选项，然后在页面加载时调用此函数以最初填充选择。这一切正常，AJAX 调用已最小化，以节省空间和时间。

JavaScript：

```
function set_b ( data, edit ){
    var options = "";

    for (var a in data){
        options += '<option value="' + $.trim ( data[a] ) + '">' + $.trim ( data[a] ) + '</option>';
    }

    options += '<option value="Custom">Custom</option>';

    $('#select-b').html(options);

    //Moving the below line from outside of the change handler function seems to remedy the issue for now
    $('#select-b').focus().val(edit);
}

function get_b( edit ){

    var set = { "csrf_test_name" : csrf, "a_type" : a_type, "s_type" : s_type, "g" : g, "is_ajax" : "1" };

    $.ajax({
        type: "POST",
        url: url,
        data: set,
        dataType: "json",
        success: function( data ){
                     set_b ( data, edit );
        },
        error: function (xhr, ajaxOptions, thrownError){
            console.log (ajaxOptions);
        }

});

}

$(document).ready( function(){

    $(document).on( "click", '#change', function(){

        var edit = "Fourty";
        $('#select-a').focus().val('4').trigger("change", edit);

    });

    $(document).on( "change", '#select-a',  function( e, edit ){

        get_b( edit );

    });

    get_b();

}); 
```

尽管这很有效，但我觉得这不是正确或最好的方法。所以我的第一个问题是：对于实现相同结果的更清洁、耦合更少的方法有什么建议吗？其次：我希望更改侦听器在被调用后立即触发，而不是在包含函数完成后触发。这是正常行为吗？在 JQuery 中是否还有其他类似的情况需要注意？非常感谢任何建设性的意见。

# php - PHP/Codeigniter 逻辑运算符

> ID：12323539
> 
> 赞同：0
> 
> 时间：2012-09-07T18:31:51.673
> 
> 标签：php, codeigniter

```
$total_cost_for_A = $this->admin_model->total_cost_for_A($branch, $department, $date);
$total_cost_for_B = $this->admin_model->total_cost_for_B($branch, $department, $date); 
```

变量*$total_cost_for_A 和 $total_cost_for_B* 保存模型中 mysql 求和查询的返回值。如果未找到记录，则查询返回 false。现在，我正在尝试执行此操作。

```
if(($total_cost_for_A === FALSE) && ($total_cost_for_B === FALSE))
{
  $data['no_record'] = 'No Record Found!';
  $this->load->view('admin/bookings', $data);
}
else
{
    $this->load->view('admin/summary', $data);
} 
```

这个测试总是失败并改为执行 else 语句，这不是什么。任何帮助将不胜感激。谢谢

**这里是函数**

```
 function total_cost_for_A($branch, $department, $date)
    {
        if($branch == 'Head Office' && $department == 'Summary')
        {
            $select_amount_paid = 'SELECT SUM(total_amount) total_amount FROM graphics_booking AS bk
            WHERE bk.date = "'.$date.'"';
        }

        $result = $this->db->query($select_amount_paid);

        if($result->num_rows() > 0)
        {
            return $result;
        }
        else
        {
            return FALSE;
        }
    }

    function total_cost_for_B($branch, $department, $date)
    {
        if($branch == 'Head Office' && $department == 'Summary')
        {
            $total_LF_amount = 'SELECT SUM(total_amount) total_amount FROM large_format_print
            WHERE date = "'.$date.'"';
        }

        $result = $this->db->query($total_LF_amount);

        if($result->num_rows() > 0)
        {
            return $result;
        }
        else
        {
            return FALSE;
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T19:09:18.483

空对象不为假。

至于您的评论，请确保`total_cost_for_A` 并且`B`实际上正在返回一些东西。并确保他们`false`以失败告终。这是您的条件评估为真的唯一方法。

您正在使用严格的相等比较，因此除非您返回，否则它们永远不会等于 false `false`！

`if(($total_cost_for_A == FALSE) && ($total_cost_for_B == FALSE))`

以上应该有效，因为空数组是错误的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T18:35:09.593

看来您的比较需要使用 $total_cost_**代表**_A 和 $total_cost_**代表**_B

您的变量名中缺少“for”。

# joomla - Joomla - 控制面板中的空白用户管理器屏幕

> ID：12323540
> 
> 赞同：0
> 
> 时间：2012-09-07T18:32:03.973
> 
> 标签：joomla

我已使用 Akeeba Backup 将 Joomla 安装移至新服务器，一切正常，一切正常。但是，如果我从控制面板中选择用户管理器，我会看到一个空白的白色屏幕。

我已按照[http://www.phil-taylor.com/2009/01/12/a-blank-white-page-is-still-an-error-page](http://www.phil-taylor.com/2009/01/12/a-blank-white-page-is-still-an-error-page)上的错误检查步骤进行操作，但仍然无法看到任何问题。

访问日志显示我尝试访问该页面并返回代码 200。我已禁用所有模块并恢复为股票主题。

任何人都可以帮助或指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T12:49:42.733

尝试在不使用 Akeeba Backup 的情况下备份旧站点。只需压缩根文件夹的内容并上传到新服务器。如果您有 cPanel，则使用 PHPMyAdmin 或通过备份管理器导出数据库，然后上传到新服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T02:06:57.250

白屏通常表示错误。尝试将您的错误报告调到最大或开发，看看您是否收到任何消息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T18:34:44.487

备份数据库后尝试重新安装....并检查权限。

# android - Android 活动生命周期回调

> ID：12323542
> 
> 赞同：0
> 
> 时间：2012-09-07T18:32:08.087
> 
> 标签：android, android-activity

活动生命周期回调是否必须成对实现？

例如

*   如果你覆盖`onCreate`你也必须覆盖`onDestroy`？
*   如果你覆盖`onStart`你也必须覆盖`onStop`？
*   如果你覆盖`onResume`你也必须覆盖`onPause`？

即，如果您实施`onCreate`但省略实施，您的应用程序会崩溃`onDestroy`吗？

成对实施只是一种好习惯，还是根本不重要（只需实施您需要的）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T18:34:54.883

只实现你需要的。其他的将自动从超类 ( `Activity`) 中调用。如果您需要在生命周期的那个点添加功能，您应该只覆盖它们。通常，如果您要处理 in 中的某些内容`onPause()`，您可能还会处理 in 中的逆运算`onResume()`。不过，情况并非总是如此。

编辑：通过你的编辑，没有看到代码，我猜你忘记了对`super.onStart()`and的调用`super.onResume()`。如果没有，请发布崩溃的实现和堆栈跟踪。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T18:37:54.100

不，您不需要*成对*覆盖生命周期方法。

但是，如果您需要显式释放您在一种方法中创建的变量，那么在匹配方法中释放它是有意义的。

* * *

> 如果您实现 onCreate 但忽略实现 onDestroy 说，您的应用程序会崩溃吗？

Stack Overflow 上的一个反复出现的问题涉及[关闭 SQLiteDatabases](https://stackoverflow.com/search?q=[android]+%E2%80%9Cclose%28%29+was+never+explicitly+called+on+database%E2%80%9D)。许多程序员打开他们的数据库，`onCreate()`但忘记在`onDestory()`.

# windows - Windows 8 Modern-UI 应用程序是否需要主页？

> ID：12323546
> 
> 赞同：0
> 
> 时间：2012-09-07T18:32:18.517
> 
> 标签：windows, microsoft-metro

我想实现一个 File Picker Contract 提供程序，以便其他应用程序可以从我的 Web 服务打开文件。除了为响应文件打开提供 UI 之外，应用程序不需要拥有自己的界面 - 不需要从“开始”屏幕启动时显示的自己的主页。事实上，如果应用程序甚至没有在“开始”屏幕上显示自己，那可能是最好的选择。

这是可能的吗？有没有我可以遵循的示例或文档？谢谢，我很难通过迄今为止看到的文档页面找到答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T05:06:08.233

如果您创建没有界面的东西，我认为您的应用程序不会通过认证。事实上，据我所知，您需要在一定时间内显示一个 UI，以便应用程序不会被操作系统/运行时挂起/关闭。

换句话说 - 是的，一个应用程序需要一个主页/用户界面。

你确定你真的需要一个 Metro / Modern UI 应用程序吗？也许设置了适当文件关联的桌面应用程序应该这样做？

# html - 网页工具包滚动条在更改主题时悬停在它上面之前不会改变

> ID：12323552
> 
> 赞同：3
> 
> 时间：2012-09-07T18:33:16.053
> 
> 标签：html, css, webkit, scrollbar

在我的网页中，我试图获得一个自定义滚动条。它工作正常。

现在我有一个主题按钮，允许用户选择黑色主题或白色主题。为此，我编写了两个 css 文件，一个 carbon.css 和另一个quartz.css

当用户单击其中一个主题时，我正在使用以下函数更新 css 文件。

我能够正确看到除滚动条之外的所有更改。直到我将鼠标悬停在滚动条上，css 更改才发生。

更清楚地说，假设我是黑色主题。我看到黑色滚动条。现在，当我单击白色主题时，我看到所有背景，文本正确更改为白色主题。但滚动条仍保持黑色主题。一旦我将鼠标移到滚动条上，它就会将滚动条更新为白色主题。

我怎么解决这个问题？

谢谢！

嘿 Anubav：这是包含您的更改后我正在工作的代码：

**线索.html**

```
 <html>
  <head>
  <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
  <script   type="text/javascript" src="./jquery-1.7.1.min.js"></script>
  <link href="./carbon.css" rel="stylesheet" type="text/css" id="extCSSFile"/>
  <script type="text/javascript">
  $(document).ready(function() {
  function changeAndPaint(that){

        var filename = $(that).attr('data-href');

    $('#extCSSFile').attr('href',filename);
        var newfile = $('#extCSSFile');

        $('#extCSSFile').remove();
        $(that).css('display','none').height(); //<--this is the trick to repaint
        $(that).css('display','inherit');       

        var elem = $('<link href="" rel="stylesheet" type="text/css" id="extCSSFile"/>');
        $(elem).attr('href',filename);  
        $('head').append(elem);

    }

        $('#carbonTheme,#quartzTheme').on('click', function(){
                changeAndPaint($(this));
            }); 
            });
            </script>
   </head>
  <body>
 <ul id="nav">
    <li id="carbonTheme" data-href="./carbon.css">carbon Theme </li>
    <li id="quartzTheme" data-href="./quartz.css">Quartz Theme </li>
 </ul>      
  <div> 
           <p>There are no results</p>
            <p>There are no results</p>
            <p>There are no results</p>
            <p>There are no results</p><p>There are no results</p>
            <p>There are no results</p>
            <p>There are no results</p>
            <p>There are no results</p><p>There are no results</p>
            <p>There are no results</p>

            <p>There are no results</p>
            <p>There are no results</p>
            <p>There are no results</p>
           <p></p>
           <p></p><p></p><p></p><p></p><p></p>
           <p></p><p></p><p></p><p></p><p></p>
           <p></p><p></p><p></p><p></p><p></p>
           <p></p><p></p><p></p><p></p><p></p>
           <p></p>

            </div>
            </body>
            </html> 
```

**碳.css**

```
body {
    font-family: Arial, Helvetica, sans-serif;      
    font-size:8.5pt;  
    width:inherit;
    min-width:100px;
    max-width:250px;
    margin:10px;
    background-color:#191919;
    color:white;    
}

 ul{height:1000px;}

 #carbonTheme, #quartzTheme{ 
 text-decoration:underline;
 color:blue;
  }
  ::-webkit-scrollbar {
    width: 12px;
 }

::-webkit-scrollbar-track {
 background-color:#aaa;
}

::-webkit-scrollbar-thumb {

  background-color:black;
} 
```

**石英.css**

```
body {
    font-family: Arial, Helvetica, sans-serif;      
    font-size:8.5pt;  
    width:inherit;
    min-width:100px;
    max-width:250px;
    margin:10px;

 }
  ul{height:1000px;}

  #carbonTheme, #quartzTheme{ 
  text-decoration:underline;
  color:blue;
 }
 ::-webkit-scrollbar {
 width: 12px;
 }

 ::-webkit-scrollbar-track {
  background-color:#333;
 }

  ::-webkit-scrollbar-thumb {

   background-color:white;
 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T11:06:51.633

要强制浏览器重新绘制完整的 DOM，只需这样做`$("#body").offset().Top;`（body 是给 body 标签以加快选择器的 ID）

一个简单的方法来完成您的任务，只需将属性添加`disabled="disabled"`到您的链接元素

*在 HEAD 部分中包含 LINK 为：*

```
<link href="./carbon.css" rel="stylesheet" type="text/css" id="carbonCSS" />
<link href="./quartz.css" rel="stylesheet" type="text/css" id="quartzCSS" disabled="disabled" /> 
```

*在链接下方包含脚本：*

```
 <script   type="text/javascript" src="./jquery-1.7.1.min.js"></script>
<script type="text/javascript">
      $(document).ready(function() {
            $('#nav li').on('click', function(){
                    objLink = document.getElementById($(this).attr("data-href"))
                    $("#carbonCSS , #quartzCSS").attr("disabled","disabled");
                    $("#body").offset().Top;  // Force Repaint
                    objLink.removeAttribute("disabled");
                }); 
        });
 </script> 
```

*完整的 html 页面可能如下所示：*

```
<!DOCTYPE html>
<html>
  <head>
  <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">

  <link href="./carbon.css" rel="stylesheet" type="text/css" id="carbonCSS" />
  <link href="./quartz.css" rel="stylesheet" type="text/css" id="quartzCSS" disabled="disabled" />

   <script   type="text/javascript" src="./jquery-1.7.1.min.js"></script>
    <script type="text/javascript">
      $(document).ready(function() {
            $('#nav li').on('click', function(){
                    objLink = document.getElementById($(this).attr("data-href"))
                    $("#carbonCSS , #quartzCSS").attr("disabled","disabled");
                    $("#body").offset().Top;
                    objLink.removeAttribute("disabled");
                }); 
        });
    </script>
   </head>
<body id="body">
 <ul id="nav">
    <li id="carbonTheme" data-href="carbonCSS">carbon Theme </li>
    <li id="quartzTheme" data-href="quartzCSS">Quartz Theme </li>
 </ul>      
  <div> 
           <p>There are no results</p>
            <p>There are no results</p>
            <p>There are no results</p>
            <p>There are no results</p><p>There are no results</p>
            <p>There are no results</p>
            <p>There are no results</p>
            <p>There are no results</p><p>There are no results</p>
            <p>There are no results</p>

            <p>There are no results</p>
            <p>There are no results</p>
            <p>There are no results</p>
           <p></p>
           <p></p><p></p><p></p><p></p><p></p>
           <p></p><p></p><p></p><p></p><p></p>
           <p></p><p></p><p></p><p></p><p></p>
           <p></p><p></p><p></p><p></p><p></p>
           <p></p>

            </div>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-10T20:52:09.917

您需要删除并附加链接元素。

HTML 文件

```
<html>
<head>
<title></title>
<link href="css.css" rel="stylesheet" type="text/css" id="extCSSFile"/>
<script src="jq.js" type="text/javascript"></script>
<script type="text/javascript">
$(function(){
    $('#bt,#wt').on('click', function(){

        $('#extCSSFile').attr('href',$(this).attr('data-href'));
        var newfile = file = $('#extCSSFile');
        $('#extCSSFile').remove();

        $('head').append($(newfile));
    });
    });
</script>
</head>
<body>
<ul id="nav">
<li id="bt" data-href="css.css">blackTheme</li>
<li id="wt" data-href="css2.css">whiteTheme</li>
</ul>
</body>
</html> 
```

css.css 文件

```
ul{height:1000px;}

#bt, #wt{ 
    text-decoration:underline;
    color:blue;
}

::-webkit-scrollbar {
    width: 12px;
}

::-webkit-scrollbar-track {
  background-color:#aaa;
}

::-webkit-scrollbar-thumb {

    background-color:black;
} 
```

css2.css

```
body{
    background-color:black;
    color:white;
}

ul{height:1000px;}

#bt, #wt{ 
    text-decoration:underline;
    color:blue;
}

::-webkit-scrollbar {
    width: 12px;
}

::-webkit-scrollbar-track {
  background-color:#333;
}

::-webkit-scrollbar-thumb {

    background-color:white;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-10T14:34:45.377

这个解决方案有一些奇怪的地方。正如@Quentin 指出的那样，您不应将该`rel`属性仅用于可变存储区域。您可能希望在属性中使用 css 路径`href`（因为无论如何您都返回 false），或者为每个链接设置 a `class`or`id`为“黑色”或“白色”。

最重要的是，当您说只是`$('link')`自动更改页面上的第`href`一个`link`元素时。我会为您的主题元素使用`id`attr `link`，因此您始终知道您正在更改该主题元素（无论您是否在此之前添加其他链接）。

每次单击更改主题时，您的方法还将添加一个 http 请求。

我认为这将是您最好的解决方案：将所有样式放在同一个 css 表中，并`class`为每个特定于主题的样式加上前缀，然后`toggleClass()`(jQuery) 在您的`html`元素上往返`blackTheme`/ `whiteTheme`。这将简化您的许多问题，并且可能会自动清除滚动条颜色问题。

这是一个[小提琴](http://jsfiddle.net/scrimothy/XTrMW/)，希望能说明这个想法。（为简单起见，我只使用 2 向切换来完成这项工作。）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-11T17:09:16.630

我相信我们在这里有一个赢家。

这只是 HTML 文件代码；css 文件可以是你想要的。

我希望有一个纯 CSS 的方法。我也没有为此目的找到故意的重绘命令。我确实发现一个使用了 chrome 扩展，很奇怪。但无论如何，重绘很容易，你所要做的就是稍微摇动绘制的 DOM 就可以了。

哦，我正在使用最新的金丝雀版本和 jQuery；所以在你的代码中考虑它们。让我知道是否有问题。

```
<link href="" rel="stylesheet" type="text/css" id="extCSSFile"/>

<script src="jquery.js" type="text/javascript"></script>

<script type="text/javascript">
$(function(){

function changeAndPaint(that){

    var filename = $(that).attr('data-href');

$('#extCSSFile').attr('href',filename);
    var newfile = $('#extCSSFile');

    $('#extCSSFile').remove();

    $(that).css('display','none').height(); //<--this is the trick to repaint
    $(that).css('display','inherit');       

    var elem = $('<link href="" rel="stylesheet" type="text/css" id="extCSSFile"/>');
    $(elem).attr('href',filename);  
    $('head').append(e);
}

    $('#bt,#wt').on('click', function(){
            changeAndPaint($(this));
        }); 
    }); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-10-02T19:44:23.007

其他解决方案都不适合我。我终于`body`在 webkit 中得到了滚动条来重绘使用这个：

```
$('body').hide();
$('body').get(0).offsetHeight;
$('body').show(); 
```

...如此处建议：http: [//www.eccesignum.org/blog/solving-display-refreshredrawrepaint-issues-in-webkit-browsers](http://www.eccesignum.org/blog/solving-display-refreshredrawrepaint-issues-in-webkit-browsers)

编辑：上面的 javascript 会将滚动位置重置到页面顶部。

要保持在相同的滚动位置：

```
var scrollX = window.pageXOffset;
var scrollY = window.pageYOffset;
$('body').hide();
$('body').get(0).offsetHeight;
$('body').show();
window.scrollTo(scrollX, scrollY); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-13T21:11:18.880

我已经详细说明了 Scrimothy 的解决方案（实际上在我阅读他的答案之前写了我的答案，哎呀），我碰巧认为它非常巧妙和高效。我不确定为什么他的出色示例对您不起作用，但也许使用此处包含的 webkit 滚动条样式，您将能够弥合差距。

与其依赖重绘和多个 css 文件，不如使用 jQuery 在 body 标签上切换特定于主题的类，并使用特定于`body.quartz ...`和的选择器将所有 css 放在一个文件中`body.carbon...`。

在这个小提琴中检查一下：http: [//jsfiddle.net/crowjonah/Ajkjy/](http://jsfiddle.net/crowjonah/Ajkjy/)

该脚本被提炼为：

```
$('body').addClass('carbon'); // apply the default theme
$('#carbonTheme').on('click', function(){
    $('body').removeClass('quartz');
    $('body').addClass('carbon');
});
$('#quartzTheme').on('click', function(){
    $('body').removeClass('carbon');
    $('body').addClass('quartz');
}); 
```

你的 CSS 开始看起来像这样：

```
body.carbon {
    font-family:Arial,Helvetica,sans-serif;
    font-size:8.5pt;
    width:inherit;
    min-width:100px;
    max-width:250px;
    margin:10px;
    background-color:#191919;
    color:#fff;
}

body.carbon #carbonTheme,body.carbon #quartzTheme {
    text-decoration:underline;
    color:blue;
    cursor:pointer;
}

::-webkit-scrollbar {
    width:12px;
}

body.carbon .constraint::-webkit-scrollbar-track {
    background-color:#aaa;
}

body.carbon .constraint::-webkit-scrollbar-thumb {
    background-color:#000;
}

body.quartz {
    font-family:Arial,Helvetica,sans-serif;
    font-size:8.5pt;
    width:inherit;
    min-width:100px;
    max-width:250px;
    margin:10px;
}

body.quartz #carbonTheme,body.quartz #quartzTheme {
    text-decoration:underline;
    color:blue;
    cursor:pointer;
}

body.quartz .constraint::-webkit-scrollbar-track {
    background-color:#333;
}

body.quartz .constraint::-webkit-scrollbar-thumb {
    background-color:#fff;
}

.constraint {
    height:100px;
    overflow-y:scroll;
}​ 
```

现在我承认有很多潜在的正当理由这可能不适合您的目的（特别是如果您有大量主题，并且它们每个都有大量独特的样式，）但我认为如果您小心并且可以定义一致的布局，例如独立于主题的宽度和边距，这将为您节省 HTTP 请求（正如 Scrimothy 所说），允许更快的加载时间，并防止您陷入 rel 的障碍，删除和附加链接标签等.

# php - 自定义单选按钮在里面显示值

> ID：12323553
> 
> 赞同：0
> 
> 时间：2012-09-07T18:33:26.603
> 
> 标签：php, html, css

我已经自定义了单选按钮，它们按我的预期工作，但有一个例外。我希望该值位于单选按钮 div 内，现在它显示在我创建的单选按钮之外，这实际上是一个类 big-radio。**如何在我创建的单选按钮内显示值 1 和值 2**

下面是我的代码

CSS：

```
<style>
    .ipad {
        -webkit-appearance: none;
        background-color: #fafafa;
        border: 1px solid #cacece;
        box-shadow: 0 1px 2px rgba(0,0,0,0.05), inset 0px -15px 10px -12px rgba(0,0,0,0.05);
        padding: 9px;
        border-radius: 3px;
        display: inline-block;
        position: relative;
    }

    .ipad:active, .ipad:checked:active {
        box-shadow: 0 1px 2px rgba(0,0,0,0.05), inset 0px 1px 3px rgba(0,0,0,0.1);
    }

    .ipad:checked {
        background-color: blue;
        border: 1px solid #adb8c0;
        box-shadow: 0 1px 2px rgba(0,0,0,0.05), inset 0px -15px 10px -12px rgba(0,0,0,0.05), inset 15px 10px -12px rgba(255,255,255,0.1);
        color: #99a1a7;
    }
    .ipad:checked:after {
        content: '\2714';
        font-size: 14px;
        position: absolute;
        top: 0px;
        left: 3px;
        color: transparent;
    }
    .big-radio {
        padding: 18px;
    }

    .big-radio:checked:after {
        font-size: 28px;
        left: 6px;
    }

</style> 
```

HTML：

```
<div class="button-holder">
    <input type="radio" class="ipad big-radio" name="radioGroup" value="2081764"/> Value1
</div>
<div class="button-holder">
    <input type="radio" class="ipad big-radio" name="radioGroup" value="2081765"/> Value 2
</div> 
```

请在这里找到 jsfiddle：

[http://jsfiddle.net/4fu3q/](http://jsfiddle.net/4fu3q/)

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T19:15:55.643

我会使用数据属性：

对每个输入使用 html 属性：`<input data-value="Value Text">`

然后在你的CSS中：`.ipad:before { content: attr(data-value); }`

[http://jsfiddle.net/4fu3q/3/](http://jsfiddle.net/4fu3q/3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T19:13:12.053

你可以假装它，虽然它远非理想。如果您使用 a`label`您可以将文本覆盖在单选按钮上而不会失去其可点击性。下面是一个例子：

[http://jsfiddle.net/4fu3q/2/](http://jsfiddle.net/4fu3q/2/)

```
<div class="button-holder">
    <input type="radio" class="ipad big-radio"  name="radioGroup" value="2081764" id="one">  
    <label for="one">V1</label>
</div> 
```

* * *

```
label{
    position:relative;
    left: -35px;    
    top: -10px;
} 
```

该按钮显然不会重新调整大小以适应文本，因为它实际上不在其中。它远非理想，但可能会尽可能接近而不用 javascript 替换所有内容。

# xml - Eclipse：Android XML 文件没有图形布局

> ID：12323554
> 
> 赞同：0
> 
> 时间：2012-09-07T18:33:29.103
> 
> 标签：xml, eclipse, graphical-layout-editor

这个问题在我的 Eclipse 中突然发生（恰好完全更新），但我的**图形布局**编辑器似乎永远消失了。

我不知道发生了什么，但即使 XML 中有代码，图形布局也不会显示任何内容。甚至我以前项目的布局文件也不再出现在图形编辑器中。

这就是它向我展示的全部。

![在此处输入图像描述](../Images/bd3a862940eec1e72e2fb762ebd4fd8d.png)

我什至尝试右键单击包资源管理器中的 XML 文件和“使用默认编辑器打开”，但它仍然不起作用。

任何人都可以帮忙吗？我完全被卡住了，手动在xml中编写所有布局代码真的**很麻烦！**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T22:42:38.510

如果其他人遇到同样的问题，这对我有用：

我必须单击并选择图形编辑器右上角的**API 版本，然后才会显示布局。**

此外，我继续使用 Eclipse Juno，并且（谢天谢地）在 Juno 中没有遇到这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T16:45:36.170

制作更新 android sdk 工具，或删除旧的 sdk 工具并安装新的 sdk 工具。

# interface - 接口的 Type.GetType

> ID：12323555
> 
> 赞同：1
> 
> 时间：2012-09-07T18:33:33.160
> 
> 标签：interface, prism, unity-container, gettype, cag

我正在使用 PRISM（最近开始）。

如何动态解析定义为字符串的接口类型并将其传递给 Container.Resolve？

例如，我有一个名为 MyNamespace.ITestInterface 的接口。当我尝试执行以下程序时，我现在还有一个包含此接口名称的字符串，它给我 null：

```
namespace MyNamespace
{
     public interface ITestInterface
     {
          void DoSomething();
     }
}

main()
{
     Type interfaceType = Type.GetType("MyNamespace.ITestInterface"); //This line gives me null
} 
```

接口类型在配置文件中设置，以标识要使用的接口。因此，这将始终是字符串。

顺便说一句，我已经在加载定义接口的相关程序集。

任何帮助将不胜感激。

提前致谢， Ashish Sharma

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T10:59:32.177

也许给程序集限定名称，即：

```
MyNameSpace.ITestInterface, MyAssembly, Version=1.3.0.0, Culture=neutral, PublicKeyToken=b17a5c561934e089 
```

# android - 在 Android WebViews 上调试缓慢的点击响应？

> ID：12323556
> 
> 赞同：3
> 
> 时间：2012-09-07T18:33:43.993
> 
> 标签：android, android-webview

我已经在我的 Android 应用程序中实现了一个 WebView（根据[文档](http://developer.android.com/guide/webapps/webview.html)）。我使用自定义 WebViewClient 并覆盖 shouldOverrideUrlLoading 以显示在新活动中单击的链接，几乎与文档显示的一样。

我遇到的问题是我的应用程序接收指示链接已被单击的消息所花费的时间（例如，调用 shouldOverrideUrlLoading）。通常，它会在 1-2 秒内发生（几乎可以接受），但有时需要 10++ 秒（！！根本不可接受）。请注意，我已阅读[有关 Android WebView 触摸响应性的此线程](https://stackoverflow.com/questions/7375575/android-webview-very-laggy-button-response)并了解固有的 300 毫秒延迟，但我的延迟时间要糟糕得多。另请注意，渲染/滚动速度不是问题（事实上，我可以非常快地向下滚动 WebView）。

我最好的猜测是延迟来自页面上的 Javascript，尽管我不知道如何调试它甚至证实我的怀疑！我已经在我的 Javascript 中插入了许多 console.log() 语句并且没有看到太多发生，所以如果这甚至是问题的话，很难缩小范围。

我也尝试过[根据这个线程](https://stackoverflow.com/questions/3652583/enhance-webview-performance-should-be-the-same-performance-as-native-web-browse)禁用缓存。

* * *

我用于实例化 WebView 的代码如下。请注意，我的 Android 应用程序中唯一视图中的 WebView。我还在清单中打开了硬件加速。

```
// the _web_view is inflated, etc...

            _web_view.getSettings().setSupportZoom(false);
            _web_view.getSettings().setRenderPriority(WebSettings.RenderPriority.HIGH);
            _web_view.setWebChromeClient(new CustomWebChromeClient());
            _web_view.getSettings().setJavaScriptEnabled(true);
            _web_view.getSettings().setDomStorageEnabled(true);
            _web_view.setWebViewClient(new CustomWebViewClient());
            _web_view.loadUrl(url); 
```

FWIW，这是自定义 chrome 客户端：

```
public class CustomWebChromeClient extends WebChromeClient {

      public boolean onConsoleMessage(ConsoleMessage cm) {
        Log.d("Javascript", cm.message() + " -- From line "
                             + cm.lineNumber() + " of "
                             + cm.sourceId() );
        return true;
      }
} 
```

和自定义 Web 视图客户端...

```
public class CustomWebViewClient extends WebViewClient {

@Override
public boolean shouldOverrideUrlLoading(WebView view, String url) {
    Intent intent = new Intent(view.getContext(), WebPopupActivity.class) ;
    intent.putExtra("url", url);
    MyApp.Singleton.startActivity(intent);
    return true;
}
} 
```

* * *

编辑：还应该注意的是，我已经在标准的 Android 内置浏览器中测试了我的网络应用程序，它在那里工作得很好。没有任何滞后；链接点击实时打开。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T00:14:17.337

如果您还没有尝试过，看看您是否可以使用[ADT Eclipse 插件支持](http://tools.android.com/recent/traceviewineclipse)来比较您的应用程序和 Android 浏览器之间的 traceview 输出，分析从单击链接到打开下一页之间的时间。结果可能不会直接指向问题，但可能会给您一些提示。

[这个答案有](https://stackoverflow.com/a/8048637/1023092)关于如何在 Eclipse 中的选定进程上使用该工具的简短描述。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T07:17:41.230

如果您使用 Spine/BackBone 而不是 Click 事件更改为 touch start，这将更快。

'单击#Debug'：'Function_name'

将其替换为

'touchstart #debug'：函数名称

可能会帮助你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T14:20:10.887

在您的 Android 清单文件中，将以下属性添加到`<application>`标记以启用您的应用程序的硬件加速：

```
<application android:hardwareAccelerated="true"> 
```

有关此的更多信息...请参阅下面的链接...

[http://developer.android.com/guide/topics/graphics/hardware-accel.html](http://developer.android.com/guide/topics/graphics/hardware-accel.html)

# ruby-on-rails - 合并 m/d/y 行和整数行，以便与 ruby 中的图表一起使用

> ID：12323558
> 
> 赞同：0
> 
> 时间：2012-09-07T18:33:45.750
> 
> 标签：ruby-on-rails, ruby

> **可能重复：**
> [Rails ActiveRecord group_by & sum db results for use with Lazy HighCharts](https://stackoverflow.com/questions/12371279/rails-activerecord-group-by-sum-db-results-for-use-with-lazy-highcharts)

我对 RoR/Ruby 完全陌生，我正在使用 Lazy High Charts gem 根据一些数据库信息生成一些 purdy 图表。

我已经尝试了提供的答案，但我仍然对如何做到这一点感到有些困惑..

我需要按月/年汇总 amount_used 和 billed_amount 和分组（例如，2012 年 8 月）

最终结果将类似于具有两个系列“使用量”和“成本”的双轴图表。此信息特定于某个 account_id。

![在此处输入图像描述](../Images/b8864cf9851b9ebaee2597dc0901ad53.png)

## 发票表

```
+---------------+--------------+------+-----+---------+----------------+
| Field         | Type         | Null | Key | Default | Extra          |
+---------------+--------------+------+-----+---------+----------------+
| id            | int(11)      | NO   | PRI | NULL    | auto_increment |
| account_id    | int(11)      | YES  |     | NULL    |                |
| invoice_date  | varchar(255) | YES  |     | NULL    |                |
| amount_used   | float        | YES  |     | NULL    |                |
| billed_amount | float        | YES  |     | NULL    |                |
| comments      | text         | YES  |     | NULL    |                |
| created_at    | datetime     | NO   |     | NULL    |                |
| updated_at    | datetime     | NO   |     | NULL    |                |
+---------------+--------------+------+-----+---------+----------------+ 
```

## 控制器图表代码

```
@account = Account.find(params[:id])
@invoices = Invoice.where("account_id = #{@account.id}").order("invoice_date DESC")

@h = LazyHighCharts::HighChart.new('area') do |f|
  f.options[:chart][:defaultSeriesType] = "area"
  #Sample dates right now, should be the grouped_by :invoice_date
  f.xAxis( :categories => ['May', 'Jun', 'Jul'] )
  f.yAxis([
    {
      :title => { :text => "Amount Used" }
    },
    {
      :title => { :text => "Cost" },
      :opposite => true
    }
  ])
  #Sample data right now, should be the summed amounts of the :amount_used correpsonding for each above grouped invoice_date
  f.series(:name => "Amount Used", :data => [100,300,500] )
  #Sample data right now, should be the summed amounts of the :billed_amount correpsonding for each above grouped invoice date
  f.series(:name => "Cost", :yAxis => 1, :data => [200,400,600] )
end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T19:42:43.480

关键是用来[`Enumerable#group_by`](http://ruby-doc.org/core-1.9.3/Enumerable.html#method-i-group_by)查找所有同一月份的行，然后将它们相加：

```
require 'date'

# Simulate rows from your DB
Row = Struct.new(:date,:amount)
rows = DATA.read.scan(/(\S+) - (\d+)/).map do |date,amount|
    Row.new( Date.strptime(date,'%m/%d/%y'), amount.to_i )
end

sum_by_month = rows.sort_by(&:date).group_by do |row|
    row.date.strftime('%b/%Y')
end.map do |year_and_month,sub_rows|
    [ year_and_month, sub_rows.map(&:amount).inject(:+) ]
end

p sum_by_month
#=> [
#=>   ["Aug/2012", 22000],
#=>   ["Sep/2012", 5000],
#=>   ["Oct/2012", 76000]
#=> ]

__END__
08/01/12 - 10000
08/16/12 - 12000
09/13/12 - 5000
10/12/12 - 76000 
```

对于您的特定用例，您可以这样使用：

```
<table><thead><tr><td></td>
  <%sum_by_month.each do |month,total|%>
    <th scope="col"><%=month%></th>
  <%end%>
</thead><tbody>
  <tr><th>Usage:</th>
  <%sum_by_month.each do |month,total|%>
    <td><%=total%></td>
  <%end%></tr>
</tbody></table> 
```

* * *

或者，这是一种更直接的方法（我不推荐）：

```
sum_by_month = {}
last_month = nil
total      = nil
@invoices.each do |inv|
  month = inv.date.strftime('%b/%Y')
  unless last_month==month
    sum_by_month[month] = total if last_month
    last_month = month
    total      = 0
  end
  total += inv.amount
end

# Make sure to add in the very last month
sum_by_month[month] = total if last_month 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T20:00:57.383

感谢您提供更多信息。您应该能够将所有这些分组并制作表格/等，而无需多次循环记录。

```
<% @invoices.group_by { |invoice| DateTime.strptime(invoice.invoice_date.to_s, '%m/%d/%y').strftime('%b/%Y') } do |day, invoices| %>
(@day_headings ||= []) << day  # make an array of your day/year table headings
(@day_counts ||= []) << invoices.sum(&:amount_used) # sum all the invoices amount_used, grouped under this heading
<% end %> 
```

...现在你有了两个变量，你可以创建你的表

```
<table>
 <thead>
  <tr>
   <% @day_headings.each do |th| %>
    <th><%= th %></th>
   <% end %>
  </tr>
 </thead>
 <tbody>
  <tr>
   <th scope="row">Usage</th>
   <% @day_counts.each do |td| %>
    <td><%= td %></td>
   <% end %>
  </tr>
 </tbody>
</table> 
```

以下是这些方法的文档：http: [//api.rubyonrails.org/classes/Enumerable.html](http://api.rubyonrails.org/classes/Enumerable.html)

# php - 警告：mysql_real_escape_string() 期望参数 1 是字符串

> ID：12323560
> 
> 赞同：-3
> 
> 时间：2012-09-07T18:34:03.293
> 
> 标签：php, html

代码

```
<tr>
   <td><input type="text" name="batch_code[]" required="required" value="<?php      if(isset($batch_code[0]))echo htmlentities($batch_code[0]); ?>"/></td>
   <td><input type="text" name="description[]" value="<?php if(isset($description[0]))echo htmlentities($description[0]); ?>"/></td>
   <td><input type="text" name="current_value[]" value="<?php if(isset($current_value[0]))echo htmlentities($current_value[0]); ?>"/></td>
   <td><input type="text" size="12" name="qty[]"  required="required"  value="<?php if(isset($qty[0]))echo htmlentities($qty[0]); ?>"/></td>
   <td><select id="asset_id" class="asset_id" name="asset_id[0][]" multiple="multiple" required>
    <?php foreach($asset_ids as $asset_id): ?>
            <option class="dropdownlist"><?php echo $asset_id->asset_id; ?></option> 
     <?php endforeach; ?>
    </select></td>
</tr>
<tr>
   <td><input type="text" name="batch_code[]" required="required" value="<?php      if(isset($batch_code[1]))echo htmlentities($batch_code[1]); ?>"/></td>
   <td><input type="text" name="description[]" value="<?php if(isset($description[1]))echo htmlentities($description[1]); ?>"/></td>
   <td><input type="text" name="current_value[]" value="<?php if(isset($current_value[1]))echo htmlentities($current_value[1]); ?>"/></td>
   <td><input type="text" size="12" name="qty[]"  required="required"  value="<?php if(isset($qty[1]))echo htmlentities($qty[1]); ?>"/></td>
   <td><select id="asset_id" class="asset_id" name="asset_id[1][]" multiple="multiple" required>
    <?php foreach($asset_ids as $asset_id): ?>
            <option class="dropdownlist"><?php echo $asset_id->asset_id; ?></option> 
     <?php endforeach; ?>
    </select></td>
</tr> 
```

我的php代码是

```
$count = count(array_filter($this->asset_id))-1;
for($value = 0; $value <= $count; $value++){
    $count_asset = count(array_filter($this->asset_id))-1;
    for($asset_value = 0; $asset_value <= $count_asset; $asset_value++){
        $sql  = "INSERT INTO dispatch_items (";
        $sql .= "dis_id, batch_code, asset_id, description, current_value, qty";
        $sql .= ") VALUES ('";
        $sql .= $database->escape_value($this->dis_id) ."', '";
        $sql .= $database->escape_value($this->batch_code[$value])."', '";
        $sql .= $database->escape_value($this->asset_id[$value][$asset_value]) ."', '";
        $sql .= $database->escape_value($this->description[$value]) ."', '";
        $sql .= $database->escape_value($this->current_value[$value]) ."', '";
        $sql .= $database->escape_value($this->qty[$value]) ."')";
        $query = $datanase->query($sql);
        $sql  = "UPDATE asset_manager SET ";
        $sql .= "location='".$database->escape_value($this->rstore_code)."', ";
        $sql .= "dis_id='".$database->escape_value($this->dis_id)."' ";
        $sql .= "WHERE asset_id='".$database->escape_value($this->asset_id[$value][$asset_value])."' ";
        $sql .= "AND batch_code='".$database->escape_value($this->batch_code[$value])."' ";
        $query = $database->query($sql);
    }
} 
```

我正在尝试将多个表单数据插入数据库并`asset_id[][]`为每个用户选择多个选项，`batch_code[]`但是当将其插入数据库时​​不断收到此错误.. :(

> 警告：mysql_real_escape_string() 期望参数 1 是字符串，数组在 D:\assetmanagement\includes\database.php 第 52 行给出

```
public function escape_value( $value ) {
      if( $this->real_escape_string ) { // PHP v4.3.0 or higher
     // undo any magic quote effects so mysql_real_escape_string can do the work
     if( $this->magic_quotes_active ) { $value = stripslashes( $value ); }
         $value = mysql_real_escape_string( $value );\\ line 53
     } else { // before PHP v4.3.0
         // if magic quotes aren't already on then add slashes manually
         if( !$this->magic_quotes_active ) { $value = addslashes( $value ); }
         // if magic quotes are active, then the slashes already exist
     }
    return $value;
} 
```

我该如何解决这个错误..？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T18:40:57.647

而不是使用

```
if( $this->real_escape_string ) { // PHP v4.3.0 or higher 
```

检查php版本

```
phpversion() 
```

或者

```
function_exists('real_escape_string') 
```

# c# - 如何在 Win7 上将文件复制到 Program Files(86)？（c# 或 bash）

> ID：12323562
> 
> 赞同：0
> 
> 时间：2012-09-07T18:34:17.387
> 
> 标签：c#, bash

你能帮我看看吗？
我在桌面上的文件夹中有一个 .dll 文件。
我需要将它复制到 c:\Program Files(86)\Program Folder\ 目录
我已经尝试过执行“File.Copy”，但我不知道如何使它与文件夹名称中的空格一起使用。试图将完整地址放在引号中 - 例如 "\"my folder\myfile.dll\"" 但它也不起作用。
试图编写一个 bash 文件 - 但无法弄清楚如何通过 C# 运行它。
请帮忙。任何解决方案表示赞赏。
如果可能，我还需要“强制覆盖”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T18:37:18.633

尝试： `File.Copy(@"c:\Program Files(86)\Program Folder\mydll.dll", @"C:\mydll.dll");`

要*强制覆盖*，只需使用：

`File.Copy(@"c:\Program Files(86)\Program Folder\mydll.dll", @"C:\mydll.dll",true);` 根据[MSDN 文档](http://msdn.microsoft.com/en-us/library/9706cfs5.aspx)：

```
public static void Copy(
    string sourceFileName,
    string destFileName,
    bool overwrite
) 
```

> 参数
> 
> sourceFileName 类型：System.String 要复制的文件。
> 
> destFileName 类型：System.String 目标文件的名称。这不能是目录。
> 
> overwrite 类型：System.Boolean 如果目标文件可以被覆盖，则为 true；否则为假。

如另一个答案中所述，您可能没有适当的权限，您可以尝试通过以下方式检查：

```
string directoryPath = @"c:\Program Files(86)\Program Folder";
bool isWriteAccess = false;
try {
    AuthorizationRuleCollection collection = Directory.GetAccessControl (directoryPath).GetAccessRules (true, true, typeof (System.Security.Principal.NTAccount));
    foreach (FileSystemAccessRule rule in collection) {
        if (rule.AccessControlType == AccessControlType.Allow) {
            isWriteAccess = true;
            break;
        }
    }
} catch (UnauthorizedAccessException ex) {
    isWriteAccess = false;
} catch (Exception ex) {
    isWriteAccess = false;
}
if (!isWriteAccess) //we cant write to location
{
    //handle notifications 
} else { //we can write to the location
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T18:36:36.910

路径中的空间没有问题。

但是您是否考虑到您需要管理员权限才能复制文件？这意味着您需要应用程序上的[清单文件](https://stackoverflow.com/questions/1850768/how-to-give-my-c-sharp-app-administrative-rights-manifest-file)

另请发布实际异常和代码。Atm 我们只能猜测

# html - postMessage 不工作

> ID：12323571
> 
> 赞同：2
> 
> 时间：2012-09-07T18:34:58.573
> 
> 标签：html

我得到了这个 html5 代码：

这是索引：

```
<head>
    <meta charset="utf-8" >
</head>
<body onload="load();">
    <a href="popup.html" target="popup" onclick="window.open('','popup','toolbar=0,location=0,directories=0,status=yes,menubar=0,scrollbars=yes,resizable=yes,width=690,height=600,titlebar=yes')">Popup</a>
</body>
<script type="text/javascript" language="javascript">

    function load()
    {
        window.addEventListener("message", messageHandler, false);
    }

    function messageHandler(e) 
    {
        alert("OK");
    }
</script> 
```

这是弹出窗口：

```
<html>
<head>
    <meta charset="utf-8" >
</head>
<body>
    <input type="button" value="Send" onclick="message();"/>
</body>
<script type="text/javascript" language="javascript">

    function message()
    {
        window.opener.postMessage('Hello, world', 'http://www.example.com/');
    }

</script> 
```

但是从弹出窗口到开瓶器的帖子消息不起作用，我没有看到代码有任何问题，为什么不起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T18:39:08.363

你在本地跑吗？我认为您可能遇到了跨域问题。您是否在服务器上尝试过相同的代码？

# wcf - 无法添加 Microsoft.ServiceModel.DomainServices.Hosting

> ID：12323580
> 
> 赞同：1
> 
> 时间：2012-09-07T18:35:36.383
> 
> 标签：wcf, wcf-ria-services

我正在尝试从非 Silverlight 客户端访问 RIA 服务。在我的开发机器上，添加 domainServices 端点没有问题

```
<domainServices>
      <endpoints>
        <add name="soap" type="Microsoft.ServiceModel.DomainServices.Hosting.SoapXmlEndpointFactory, Microsoft.ServiceModel.DomainServices.Hosting, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" />
        <!--<add name="JSON" type="Microsoft.ServiceModel.DomainServices.Hosting.JsonEndpointFactory, Microsoft.ServiceModel.DomainServices.Hosting, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" />-->
      </endpoints>
</domainServices> 
```

但是，登台服务器和 DomainService 上的相同配置会引发异常：

> 找不到方法：'System.Collections.Generic.IEnumerable`1 System.ServiceModel.DomainServices.Server.DomainServiceDescription.get_ComplexTypes()'。

我已验证所有项目引用 hae Copy Local 设置为 true 并且

> Microsoft.ServiceModel.DomainServices.Hosting

dll 实际上是在网络服务器上。

**更新：**我应该补充一点，编译期间似乎发生了错误：ServiceActivationException：由于编译期间出现异常，无法激活服务'...'。异常消息是：找不到方法：

我错过了什么？

# java - BASE64Encoder 结果从 windows 到 Unix 不同

> ID：12323581
> 
> 赞同：1
> 
> 时间：2012-09-07T18:35:45.603
> 
> 标签：java, base64, encoder

以下程序输出在 Windows 和 Unix 系统上有所不同。您能否向我解释为什么会发生这种情况，以及如何使这种行为在 Unix 和 Windows 之间保持一致。

因为我使用 Unix 对文件进行编码，并且无法在 Windows 系统上对其进行解码。

在这方面的任何帮助将不胜感激。提前致谢。

```
import sun.misc.BASE64Encoder;
import sun.misc.CharacterEncoder;

public class TestEncode {

public static void main(String[] args) {        

        byte signature[] = "[35, 44, -31, 18, 78, 84, -113, 1, 27, 36, -79, -60, 75, -14, -80, -99, 65, 11, -45, -54, 23, -100, 74, -54, -26, -77, 33, -40, 104, 90, -33, 32, -123, -76, -27, -118, -25, -97, -85, 22, -64, 102, -7, 119, -65, 35, -114, 31, -83, 73, -57, 63, -7, 47, -31, 48, 28, -109, 54, -90, -24, -21, -102, 59, 82, -14, -52, -77, -22, -25, -15, -81, 70, 52, -42, 93, 76, -51, 96, 87, 29, -37, -40, -71, -121, 44, -44, 74, 23, -76, 29, 108, -56, 48, 46, -26, -73, -53, 90, 53, 25, -96, 115, -79, 93, -128, -46, -119, -30, 22, -107, -27, 6, -120, 2, 19, -72, -5, 30, -54, -34, 26, -22, -44, 93, 40, 84, -125]".getBytes();

    byte encodedSignature[] = null;

      CharacterEncoder encoder;
      encoder = new BASE64Encoder();
      encodedSignature = encoder.encode(signature).getBytes();

      System.out.println(encodedSignature.length);

}

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T19:41:52.947

您可能在每台机器上使用不同的字符集。试试这个找出：

```
System.out.println("Default Charset=" + Charset.defaultCharset()); 
```

我在调用该`getBytes()`方法时怀疑您的问题。默认情况下，它使用平台的默认字符集。如果要保证它使用相同的，请`getBytes()`通过调用在方法中指定它`getBytes("UTF-8");`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T19:08:11.293

你能试一试吗，你在 windows 和 linux 上的结果是什么：

```
import com.sun.org.apache.xml.internal.security.exceptions.Base64DecodingException;
import com.sun.org.apache.xml.internal.security.utils.Base64;
import java.io.IOException;

public class Base64Test {

    public static void main(String args[]) throws IOException, Base64DecodingException {
        String orig = "original String before base64 encoding in Java";

        //encoding  byte array into base 64
        String encoded = Base64.encode(orig.getBytes("UTF-8"));//make sure the bytes are utf-8 and not platform default     

        System.out.println("Original String: " + orig );
        System.out.println("Base64 Encoded String : " + new String(encoded,"UTF-8"));//ensure string is utf-8

        //decoding byte array into base64
        byte[] decoded = Base64.decode(encoded);      
        System.out.println("Base 64 Decoded  String : " + new String(decoded,"UTF-8"));//ensure string is utf-8

    }
} 
```

我的是（仅限 Windows）：

> 原始字符串：Java中base64编码之前的原始字符串
> 
> Base64 编码字符串：b3JpZ2luYWwgU3RyaW5nIGJlZm9yZSBiYXNlNjQgZW5jb2RpbmcgaW4gSmF2YQ==
> 
> Base64解码字符串：Java中base64编码之前的原始字符串

您可能面临的问题是：

*   Windows 上默认使用的字符编码与 Linux 上的不同。特别是因为`getBytes()`涉及可能将其设置为您自己的默认值`getBytes("UTF-8")`（在我的示例中，我尝试这样做）
*   这可能是由默认分别为 ("\r\n") 和 ("\n") 的行分隔符引起的。

但我不能确定

# mysql - Mysql限制然后按字母顺序排列

> ID：12323584
> 
> 赞同：1
> 
> 时间：2012-09-07T18:36:13.213
> 
> 标签：mysql

我正在尝试按大多数点对表格进行排序，然后按字母顺序排列。我已经做到了这一点，但我无法让它发挥作用。

```
SELECT category FROM (
SELECT category from table ORDER BY points DESC LIMIT 35
) a
ORDER a.by category LIKE 'A%' 
```

我究竟做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T18:37:36.893

您需要使用`WHERE`：

```
SELECT a.category 
FROM (
    SELECT category FROM `table` ORDER BY points DESC LIMIT 35) a
WHERE a.category LIKE 'A%'
ORDER BY a.category 
```

**更新**

OP想要一个简单的`ORDER BY`

```
SELECT a.category 
FROM (
    SELECT category FROM `table` ORDER BY points DESC LIMIT 35) a
ORDER BY a.category 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T18:37:56.380

您可以在单个中按多列排序`ORDER BY`

```
SELECT category FROM table
ORDER BY points DESC, category ASC
LIMIT 35 
```

如果您希望按字母顺序订购前 35 点（不考虑前 35 名中的顺序），您可以执行以下操作：

```
SELECT a.category
FROM
(SELECT category FROM table ORDER BY points LIMIT 35) AS a
ORDER BY a.category ASC 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T18:39:33.073

您只需要以下内容：

```
SELECT category FROM table ORDER BY points DESC, category ASC Limit 35 
```

# ruby - 在 Soundcloud 的 Ruby API 上使用流派过滤器

> ID：12323588
> 
> 赞同：0
> 
> 时间：2012-09-07T18:36:42.593
> 
> 标签：ruby, ruby-on-rails-3, rubygems, soundcloud

我正在使用[soundcloud gem](https://github.com/soundcloud/soundcloud-ruby)，但它并没有按预期工作。

`client.get('/me/tracks')`返回我所有的曲目，就像我期望的那样。

`client.get('me/tracks', :genres => "Jazz")`返回来自不同用户的 50 首爵士乐曲目。

显然，我的目标是让我所有的曲目都成为爵士乐类型。我在这里做错了什么还是有错误？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T10:06:07.483

API 的每个请求限制为 50 个轨道。您可以使用`offset`参数来获取下一组曲目。看这里：http: [//developers.soundcloud.com/docs#pagination](http://developers.soundcloud.com/docs#pagination)

# c - 转换为仅在运行时已知的类型

> ID：12323589
> 
> 赞同：2
> 
> 时间：2012-09-07T18:36:46.617
> 
> 标签：c, ansi

假设我有以下内容：

```
void *pA; 
```

现在我想在运行时将此指针转换为编译时未知的类型。即什么是等效的或如何在ANSI C a c++ dynamic_cast 中模拟？

谢谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T18:50:19.513

> 现在我想在运行时将此指针转换为编译时未知的类型。即什么是等效的或如何在ANSI C a c++ dynamic_cast 中模拟？

好吧，那不是`dynamic_cast`。您不能强制转换为编译时未知的类型。

如果您需要将对象转换为在程序执行期间可能会根据各种条件*发生变化*的类型，那么它可以像创建一个 switch 语句一样简单，该语句检查一些变量（和枚举值，等等）以确定哪个转换为履行。然后它可以使用已知类型。

* * *

附带说明一下，描述您的高级问题而不是如何实施您提出的解决方案（这可能有意义也可能没有意义）对您来说是有利的。您的方法可能存在比您预想的更好的替代方法，但我们无法在不知道您正在努力解决什么问题的情况下提供任何替代方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T18:47:48.183

像这样的东西可能会起作用：

```
void get_val(void * buf, void *data, int type_id) {
  switch (type_id) {
    case INT: int *sp = (int*)data;
              int *dp = (int*)buf;
              *dp = *sp; 
              // or just *((int*)buf) = *((int*)data)
              break;
    case FLOAT:float *sp = (float*)data;
               float *dp = (float*)buf;
               *dp = *sp; 
               break;
   /* ... */
  }
} 
```

# mercurial - 在 Mercurial 中，hg 合并后，如何恢复标记为“U”的文件并将模式匹配到特定版本？

> ID：12323591
> 
> 赞同：0
> 
> 时间：2012-09-07T18:37:07.900
> 
> 标签：mercurial, merge

在 Mercurial 中，hg 合并后，如何恢复标记为“U”的文件并将模式匹配到特定版本？

执行“hg 合并”后，我发现一类文件与模式匹配并标记为“U”被错误地合并，并希望将它们恢复到最后一个版本。怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T01:05:57.850

这会将未解析的文本文件恢复到合并的第一个父级。用于`p2()`第二个父母：

```
hg revert "set:*.txt and unresolved()" --rev p1() 
```

然后，您可能需要它来清除未解析的标志：

```
hg resolve --mark *.txt 
```

**编辑**

根据您的评论，我在 Windows 上成功测试了此命令：

```
hg revert "set:'re:[0-9]foobar.*\.txt' and unresolved()" -r "p1()" 
```

# c# - 是否可以将数组绑定到 DataGridView 控件？

> ID：12323596
> 
> 赞同：8
> 
> 时间：2012-09-07T18:37:31.470
> 
> 标签：c#, winforms, binding

我有一个数组 arrStudents，其中包含我学生的年龄、GPA 和姓名，如下所示：

```
arrStudents[0].Age = "8"
arrStudents[0].GPA = "3.5"
arrStudents[0].Name = "Bob" 
```

我试图将 arrStudents 绑定到 DataGridView，如下所示：

```
dataGridView1.DataSource = arrStudents; 
```

但是数组的内容不会显示在控件中。我错过了什么吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-07T18:40:39.767

与 Adolfo 一样，我已经验证了它的*工作原理*。显示的代码没有任何问题，所以问题一定出在你没有显示的代码中。

我的猜测：`Age`等不是公共财产；它们要么是，要么`internal`是*字段*，即，`public int Age;`而不是`public int Age {get;set;}`.

这是您的代码适用于类型良好的数组和匿名类型的数组：

```
using System;
using System.Linq;
using System.Windows.Forms;
public class Student
{
    public int Age { get; set; }
    public double GPA { get; set; }
    public string Name { get; set; }
}

internal class Program
{
    [STAThread]
    public static void Main() {
        Application.EnableVisualStyles();
        using(var grid = new DataGridView { Dock = DockStyle.Fill})
        using(var form = new Form { Controls = {grid}}) {
            // typed
            var arrStudents = new[] {
                new Student{ Age = 1, GPA = 2, Name = "abc"},
                new Student{ Age = 3, GPA = 4, Name = "def"},
                new Student{ Age = 5, GPA = 6, Name = "ghi"},
            };
            form.Text = "Typed Array";
            grid.DataSource = arrStudents;
            form.ShowDialog();

            // anon-type
            var anonTypeArr = arrStudents.Select(
                x => new {x.Age, x.GPA, x.Name}).ToArray();
            grid.DataSource = anonTypeArr;
            form.Text = "Anonymous Type Array";
            form.ShowDialog();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-09-07T18:44:55.080

这对我有用：

```
public class Student
{
    public int Age { get; set; }
    public double GPA { get; set; }
    public string Name { get; set; }
}

public Form1()
{
        InitializeComponent();

        Student[] arrStudents = new Student[1];
        arrStudents[0] = new Student();
        arrStudents[0].Age = 8;
        arrStudents[0].GPA = 3.5;
        arrStudents[0].Name = "Bob";

        dataGridView1.DataSource = arrStudents;
} 
```

或者更少冗余：

```
arrStudents[0] = new Student {Age = 8, GPA = 3.5, Name = "Bob"}; 
```

我也会使用 a`List<Student>`而不是数组，因为它很可能必须增长。

这也是你在做的吗？

![在此处输入图像描述](../Images/40fe9f6184ce10ec6bd7928661f119b2.png)

# asp.net-mvc - windows xp中的IE8打开.pdf，但在windows 7中不打开

> ID：12323605
> 
> 赞同：0
> 
> 时间：2012-09-07T18:37:57.117
> 
> 标签：asp.net-mvc, pdf, windows-7, internet-explorer-8, cross-browser

我有一个列出客户信件的网站，当点击信件的“查看”按钮时，它使用 JavaScript ( `window.open(url)`) 打开一个新窗口以获取 .pdf 文件，我认为该文件是由水晶报告生成的。

*   在 Windows XP 上的 IE8 中它可以工作
*   在 Windows 7 上，它会打开一个带有正确 url 的空白页面，但它不会尝试打开文件
*   在任一操作系统上的任何其他浏览器中它都可以工作
*   本机已安装最新的 Adob​​e Reader

在 Win7/IE8 中，一旦打开空白页面，如果您随后单击 url 并回车，它将再次请求文件并正确打开它。我用 fiddler 查看了请求，它们完全相同。

我在 content-disposition 标头中将 mime 类型设置为“application/pdf”并内联为 true。

我可以通过返回一个刚刚设置的视图来解决它`window.location = url`，但感觉很糟糕。这是一个已知的问题？有没有办法让它在两个 IE 版本中都可以工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T09:59:02.900

仍然不知道为什么两个版本之间存在差异，但是我现在`target="_blank"`在元素上使用的不是 JavaScript，这已经成功了。

# java - XML 1.1 与 1.0 库的使用

> ID：12323608
> 
> 赞同：0
> 
> 时间：2012-09-07T18:38:07.960
> 
> 标签：java, xml

XML 1.1 与 1.0

鉴于 1.0 中的某些字符在 1.1 中不再被接受，那么在 xml 元素上设置 Text 的正确方法是什么？

如果元素 e = new Element("foo")

我应该这样做：

e.setText(sanitized_text_illegal_characters_removed_or_escaped) ？

或者

e.setText(any_text)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T20:18:54.097

你倒退了：XML 1.1 放宽了字符限制。[XML 1.0](http://www.w3.org/TR/xml/#charsets)不允许大多数 ASCII 控制字符，而XML [1.1](http://www.w3.org/TR/xml11/#charsets)允许除 NUL 之外的所有控制字符（两者都禁止代理）。

如果您必须处理包含禁止字符的字符串，您有两种选择：使用依赖于应用程序的方案转义它们，或删除它们。请注意，您*不能*使用 XML[字符引用](http://www.w3.org/TR/xml/#sec-references)（也称为数字实体）来“转义”这些值；解析器将翻译这些引用并拒绝它们。

但是，在您麻烦执行此操作之前，您应该确认您确实必须这样做。

# converter - 自定义 ITOA 无法正常工作？

> ID：12323610
> 
> 赞同：1
> 
> 时间：2012-09-07T18:38:20.200
> 
> 标签：converter, itoa, pawn

我想制作一个自定义 ITOA 函数将大量数字放入小字符串中，这就是我编写的代码：

```
main(){
    printf("itoa(2000000000,36)= '%s'",itoa(2000000000,36));
    printf("itoa(36,36)= '%s'",itoa(36,36));
    printf("itoa(37,36)= '%s'",itoa(37,36));

    return 1;
}

stock itoa(val, base)
{
    new buf[1024] = {0,...};
    new i = 1023;
    new LETTERZ[37] = {'0','1','2','3','4','5','6','7','8','9','A','B','C','D','E','F','G','H','I','J','K','L','M','N','O','P','Q','R','S','T','U','V','W','X','Y','Z',0};
    for(; val && i; --i, val /= base)
        buf[i] = LETTERZ[val % base];
    return buf[i+1];
} 
```

它基于此页面中的“C”代码：[http ://www.jb.man.ac.uk/~slowe/cpp/itoa.html](http://www.jb.man.ac.uk/~slowe/cpp/itoa.html)

但不知何故，这是输出：

[20:34:35] itoa(2000000000,36)='X' [20:34:35] itoa(36,36)='1' [20:34:35] itoa(37,36)='1 '

这是完全错误的，我不知道期望哪个输出，但 36 和 37 肯定不能是相同的输出，而且 2 000 000 000 不能只是“X”，因为 X 应该是 35，不是 2 000 000 000，ZZ 应该是 1295 我想...我想以十六进制系统为基础，但使用所有 alfabet 字母。

谁能告诉我这里有什么问题？

我正在使用一种称为 PAWN（也称为 SMALL）的无类型语言，后来我想在 VB.NET 中使用此代码

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T18:48:28.280

```
/* itoa example */
#include <stdio.h>
#include <stdlib.h>

int main ()
{
  int i;
  char buffer [33];
  printf ("Enter a number: ");
  scanf ("%d",&i);
  itoa (i,buffer,10);
  printf ("decimal: %s\n",buffer);
  itoa (i,buffer,16);
  printf ("hexadecimal: %s\n",buffer);
  itoa (i,buffer,2);
  printf ("binary: %s\n",buffer);
  return 0;
} 
```

您只给出数字和基数，但参数 2 需要一个指向已分配 char 的指针。使用缓冲区或尝试 NULL，因此该函数将返回结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T22:36:15.577

解决方案似乎很简单，返回 buf[i+1] 只返回一个字符，所以我所做的就是让它返回一个数组：

```
new _s@T[4096];
#define sprintf(%1) (format(_s@T, SPRINTF_MAX_STRING, %1), _s@T)

main(){
    new num = atoi("ABCDEFG",36);
    printf("%d",num);
    printf("%s",itoa(num,36));

    return 1;
}

stock itoa(val, base)
{
    new buf[1024] = {0,...};
    new LETTERZ[37] = {'0','1','2','3','4','5','6','7','8','9','A','B','C','D','E','F','G','H','I','J','K','L','M','N','O','P','Q','R','S','T','U','V','W','X','Y','Z',0};
    for(new pos = 0; val;++pos,val = floatround(val/base,floatround_floor))
        strins(buf,sprintf("%c",LETTERZ[val % base]),0);
    return buf;
}

stock atoi(val[], base)
{
    new CURRNUM = 0;
    new len = strlen(val);
    new LETTERZ[37] = {'0','1','2','3','4','5','6','7','8','9','A','B','C','D','E','F','G','H','I','J','K','L','M','N','O','P','Q','R','S','T','U','V','W','X','Y','Z',0};
    for(new i = 0; i < len; ++i)
    {
        for(new x = 0; x < base; ++x)
        {
            new y = (len-i)-1;
            if(val[y] == LETTERZ[x])
            {
                CURRNUM += x*floatround(floatpower(base,i));
            }
        }
    }
    return CURRNUM;
} 
```

# html - 如何使用 css 刷新到 HTML 页面的顶部

> ID：12323615
> 
> 赞同：0
> 
> 时间：2012-09-07T18:38:42.137
> 
> 标签：html, css, opera, page-refresh

我正在使用 html 和 css 构建网页。每次我在 Opera 中刷新页面时，页面都会刷新到底部。这只是Opera中的一件事吗？在其他浏览器中测试页面时似乎不会发生这种情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T19:20:36.040

另一种可能性是您在滚动到底部时正在刷新页面。在大多数现代浏览器中，当您刷新或点击浏览器中的后退按钮时，一旦页面（重新）加载，它将跳转到最近的滚动位置。如果在刷新之前，只需滚动回顶部，看看是否有任何改变。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T00:58:54.447

您可以添加一个 Javascript 将滚动设置为顶部

像 ：

```
function scrollWindow()
{
window.scrollTo(0,0);
} 
```

您可以捕获 onLoad 事件并调用该函数，这样每次刷新浏览器时它都会滚动到顶部。

我使用了[w3schools](http://www.w3schools.com/js/tryit.asp?filename=try_dom_window_scrollto)网站。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-03-26T22:48:33.353

## 这是一个方法：

### 预期结果：

*   没有滚动动画
*   首次加载时在页面顶部加载
*   在页面顶部加载所有刷新

### 代码：

```
<script>
    history.scrollRestoration = "manual";
</script> 
```

### 为什么这可能对其他方法有效：

诸如 Chrome 之类的浏览器有一个内置预设，可以在刷新后记住您在页面上的位置。我们需要添加：

```
history.scrollRestoration = "manual"; 
```

禁用该内置功能。结果是每次刷新后在页面顶部加载。

### 参考：

> 我关于在底部而不是顶部加载页面的原始答案帖子：[https ://stackoverflow.com/a/66825027/15489646](https://stackoverflow.com/a/66825027/15489646)

> 文档`history.scrollRestoration`：[https ://developer.mozilla.org/en-US/docs/Web/API/History/scrollRestoration](https://developer.mozilla.org/en-US/docs/Web/API/History/scrollRestoration)

# r - R：如何使用“while”循环并在对象名称中附加变量？

> ID：12323618
> 
> 赞同：1
> 
> 时间：2012-09-07T18:38:56.867
> 
> 标签：r

我需要进行以下计算：

a1= 100+1 a2 = 100+2 ... a10 = 100+10

我尝试按如下方式循环：

```
z = 1
while(z<11) {
    z = z+1
    a = 100+z
} 
```

如何让 R 将我的结果存储为 a1、a2、...a10？我知道我需要使用“粘贴”，也许还有“分配”，但我想不通。非常感谢您的帮助！

**编辑：** 非常感谢您快速而有帮助的回复。我现在还找到了一种让它工作的方法（虽然不如你的那么好）：

```
z = 0
while(z<10) {
    z = z+1
    x = 100+z
    assign(paste("a",z, sep=""),x)
} 
```

再次，非常感谢！

干杯，克里斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T18:51:35.583

您不需要 while 循环来获取该向量，因为您可以使用`100 + 1:10`. 这是一种使用 分配值的方法`mapply`：

```
mapply(assign,value=100+1:10,x=paste0("a",1:10),MoreArgs=list(envir=.GlobalEnv)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T18:46:43.087

您不需要使用`while`-`setNames`从`stats`包中使用：

```
> (function(x)setNames(x,paste(sep="","a",x)))(1:11)
 a1  a2  a3  a4  a5  a6  a7  a8  a9 a10 a11 
  1   2   3   4   5   6   7   8   9  10  11 
```

# erlang - Windows x64 RabbitMQ 安装错误与 Erlang 环境变量 (ERLANG_HOME)

> ID：12323621
> 
> 赞同：32
> 
> 时间：2012-09-07T18:39:06.307
> 
> 标签：erlang, rabbitmq, config

我问/回答这个问题是因为它把我挂断了，很可能其他人也会遇到同样的问题。

在 Windows Server 2008 x64 上安装 RabbitMQ x64 v2.8.6。

Erlang 使用默认安装位置安装到 C:\Program Files\erl5.9.2 后，我试图通过运行 rabbitmq-service.bat 来启动服务器。失败：

```
Please either set ERLANG_HOME to point to your Erlang installation 
or place the RabbitMQ server distribution in the Erlang lib folder. 
```

问题是 .bat 文件没有正确的子路径。带有 5.9.2 (R15B02) 版本的 erlang。我的 ERLANG_HOME 目录设置正确，但脚本没有正确使用这个版本的 Erlang，在这个 Erlang 菜鸟看来，有一个名为“erts-5.9.2”的新子目录导致了问题。也许熟悉这些脚本的人可以描述如何在没有我将要描述的黑客解决方法的情况下使其正常工作？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-09-07T18:39:34.370

Windows 上有几个 RabbitMQ 控制 .bat 文件。您使用的每一个都需要更改以正确反映 Erlang 路径。在此示例中，我正在编辑 rabbitmq-server.bat，因为它是更简单的文件之一……您要运行的任何 .bat 文件都需要使用 rabbitmq_service.bat 文件才能使它们工作是最需要调整的。

编辑那个 rabbitmq_server.bat 文件，你可以在第 48 行左右看到，检查是否找到了 erl.exe，但路径不正确：

```
if not exist "!ERLANG_HOME!\bin\erl.exe" ( 
```

该路径与 Erlang 5.9.2 版本的文件结构不匹配。我通过简单地从第 48 行到第 58 行删除此路径检查来解决此问题，然后，.bat 实际上在第 129 行调用 erl.exe，内容如下：

```
"!ERLANG_HOME!\bin\erl.exe" 
```

我只是硬编码了我的 erl.exe 的路径：

```
"C:\Program Files\erl5.9.2\erts-5.9.2\bin\erl.exe" 
```

路径正确后，rabbitmq .bat 文件将运行。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2016-09-20T06:48:42.007

1-设置环境变量：

变量名：`ERLANG_HOME`
变量值：`C:\Program Files (x86)\erl6.4`

注意：不要在上述步骤中包含 bin。

2-添加`%ERLANG_HOME%\bin`到`PATH`环境变量：

变量名：`PATH`
变量值：`%ERLANG_HOME%\bin`

这很好用。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2016-07-07T15:41:37.660

我有类似的问题，在 .bat 文件中修改 ERLANG_HOME 不起作用。然后我在命令提示符下尝试**echo %ERLANG_HOME%**，没有打印环境变量值（我可以看到 ERLANG_HOME 环境变量已在高级系统设置下创建），这让我相信我需要重新启动服务器 64 位二郎的安装。重新启动服务器后，它就像一个魅力。我希望这可以帮助别人。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2019-05-29T10:06:41.913

只是为了分享一个截至2019年的最新答案：在Windows Server 2019上，设置环境变量后，需要重新启动才能解决问题。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2017-05-02T21:46:06.013

当从任何旧版本的 RabbitMQ***升级***到版本 3.6.9时，Windows 上的 Erlang 18.3 (erl7.3) 和 RabbitMQ 3.6.9 中仍然会出现此问题。此处已经说明的解决方案是在启动服务之前使用' **setx -m ERLANG_HOME "C:\Program Files\erl7.3** "' 手动设置 ERLANG_HOME。

发生的情况是 RabbitMQ 3.6.9 安装程序从系统中删除了环境变量 ERLANG_HOME，同时删除了旧版本的 RabbitMQ。然后，当它进入安装步骤时，它不会放回 ERLANG_HOME 变量。然后，启动 RabbitMQ 的批处理文件找不到 Erlang。他们尝试使用“where.exe”找到 Erlang 的主目录，但升级后总是失败。

RabbitMQ 的安装程序也不会杀死所有的 Erlang 后台进程，导致它的许多文件由于 Windows“正在使用的文件”问题而无法删除。这会在 %APPDATA%\RabbitMQ 和“C:\Program Files\RabbitMQ”中留下“正在使用的文件”。这些进程是“erl.exe”、“erlsrv.exe”和“epmd.exe”。RabbitMQ 安装程序应该在关闭 RabbitMQ Windows 服务后终止这些进程。

RabbitMQ 在 Windows 上相当笨重。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2016-12-08T14:10:49.807

我遇到了同样的问题。我通过进行如下三个更改来解决它。

1.  更新环境变量中的路径变量`"ERLANG_HOME" : "C:\Program Files\erl8.0"`。
2.  更新“路径”变量`"Path" : ";%ERLANG_HOME%\bin;"`
3.  在 C 盘中给自己**FULL CONTROL**权限。`"Program Files"`

它以这种方式对我有用。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-09-28T01:51:32.373

有趣的是，这对你有用。Erl5.9.2 有两个错误记录，导致未安装的地方安装不完整`%ERLANG_HOME%\bin`。

* 在 32 位机器上安装了 64 位 erlang *“程序无法启动，因为您的计算机中缺少 MSVCR100.dll。”

[https://groups.google.com/d/topic/erlang-programming/wGtFLzapiQ0/discussion](https://groups.google.com/d/topic/erlang-programming/wGtFLzapiQ0/discussion)

尝试 5.9.1 或任何其他版本。他们还提到让安装程序的未来版本在失败时提醒您。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-10-03T12:28:00.343

我刚刚遇到了这里提到的同样的问题。我在 Windows 7 机器上安装了 otp_win64_R15B02 并且一切正常，但是我在 Windows 2008 服务器上使用了相同的安装程序并且没有创建 bin 目录。然后我卸载了 otp_win64_R15B02 并下载了 otp_win64_R15B02_with_MSVCR100_installer_fix 并创建了 bin 目录。

我怀疑它在我的 Windows 7 系统上工作的原因是我安装了 Visual Studio 并且所需的库已经可用，这使得 otp_win64_R15B02 安装程序能够正常工作。

哦，如果你正在安装 Erlang 来运行 RabbitMQ，那么 RabbitMQ 安装将通过损坏的安装程序成功，但在 RabbitMQ 之后安装 otp_win64_R15B02_with_MSVCR100_installer_fix 将不起作用，只需卸载并重新安装 RabbitMQ 即可解决此问题。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2020-04-10T21:30:58.487

只需在环境变量中给出 C:\Program Files\erl10.6\ 而不是 C:\Program Files\erl10.6\bin\erl.exe 即可。如果您打开 server.bat 文件，我就会知道问题，请[在此处输入图像描述](https://i.stack.imgur.com/aNYqv.png)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-03-26T15:34:22.197

我认为这是 Windows 上的编码问题。我看到了一个正确的值，但我在控制台上写了 echo %ERLANG_HOME% 该值带有问号。这些步骤修复它。

1.go环境变量窗口

2.编辑ERLANG_HOME项目

3.复制值，打开记事本并粘贴到那里

4.在记事本上再次复制并粘贴到编辑窗口

5.申请和退出窗口

6.关闭命令行工具并重新打开

7.运行rabbitmq bat文件。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-05-11T15:48:22.603

我以一种快速而肮脏的方式解决了它，没有命名路径变量我打开了 bat 文件并替换了每次出现的

```
!ERLANG_HOME!\bin\erl.exe 
```

例如，由于版本不同，硬编码路径*可能对您来说是不同的路径*

```
C:\Program Files\erl10.3\erts-10.3\bin\erl.exe 
```

并更换

```
%RABBITMQ_HOME%\escript\rabbitmq-plugins 
```

和

```
C:\Program Files\RabbitMQ Server\rabbitmq_server-3.7.14\escript\rabbitmq-plugins 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2019-05-27T09:54:05.393

连我都是这个问题。问题是环境变量 ERLANG_HOME=c:\Program Files\erl9.0 从未存在过。

我交叉检查了路径。正确的路径是 c:\Program Files\erl9.3。

改正后

ERLANG_HOME=c:\Program Files\erl9.3

问题解决了。所以，绝对是路径问题。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2020-04-02T05:10:06.827

在我的情况下，应该使用管理员角色运行安装 erlang

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2020-10-16T08:22:45.327

1.  下载 Erlang 或 OTP -**只应安装一个版本的 OTP**

2.  下载 RabbitMQ 安装程序

3.  以管理员身份安装两个exe文件

4.  为 Erlang 设置类路径。（设置classpath有点麻烦，请按照以下步骤操作）

    1.  `ERLANG_HOME`使用名称和值设置新路径`C:\Program Files\erl-23.1`（**不要在此处复制 bin 文件夹**）
    2.  编辑系统“路径”并添加`%ERLANG_HOME%\bin`
5.  转到开始 - 打开rabbitmq命令提示符并运行

    ```
    rabbitmq-plugins enable rabbitmq_management 
    ```

6.  导航到本地主机：15672

7.  使用访客/访客登录

* * *

## 回答 #15

> 赞同：-1
> 
> 时间：2019-07-04T18:49:28.350

如果上述解决方案对您不起作用，那么您可以尝试以下

1.  为你的 rabbit mq 找到另一个兼容的 erlang 版本，例如 rabbit 3.7.x erlang version 20.3.x to 22.0.x all are compatible。

2.  右键单击新下载的 erlang 版本，然后从属性中选择取消阻止文件的选项。

3.  使用管理员权限运行 erlang。

4.  重新运行rabbit mq exe

# jdbc - 未找到 Jenkins+Sonar (War) 驱动程序 JDBC

> ID：12323628
> 
> 赞同：1
> 
> 时间：2012-09-07T18:39:32.493
> 
> 标签：jdbc, jenkins, driver, sonarqube

我有一个 Jenkins 的 CI，我在我的 Tomcat 7 上安装了 Sonar，我下载了 Sonar 并将 sonar.properties 更改为使用 oracle（我有 oracle 10g）。我毫无错误地部署了战争，应用程序正常工作并创建了表格。当我尝试在工作中使用来自 Jenkins 的 Sonar 时，它会执行一个 Maven 命令（我配置了 maven 3.0.1：我有 Redhat EL 5。）。生成的命令是：

**mvn -f /root/.jenkins/jobs/ProjectTestSonar/workspace/ProjectSonar/pom.xml -e -B 声纳：声纳 -Dsonar.jdbc.driver=oracle.jdbc.driver.OracleDriver -Dsonar.jdbc.url=jdbc： oracle:thin@192.168.74.14:1521:dbs10g -Dsonar.host.url=http://localhost:8080/sonar**

错误是：

**[错误] 无法在项目 salida 上执行目标 org.codehaus.mojo:sonar-maven-plugin:2.0:sonar (default-cli)：无法执行声纳：无法连接到数据库：无法创建类 'oracle 的 JDBC 驱动程序.jdbc.driver.OracleDriver' 用于连接 URL 'jdbc:oracle:thin@192.168.74.14:1521:dbs10g'：没有合适的驱动程序 -> [帮助 1]**org.apache.maven.lifecycle.LifecycleExecutionException：无法在项目 salida 上执行目标 org.codehaus.mojo:sonar-maven-plugin:2.0:sonar (default-cli)：无法在 org.apache.maven.lifecycle 执行 Sonar .internal.MojoExecutor.execute(MojoExecutor.java:217) 在 org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:153) 在 org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor .java:145) 在 org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:84) 在 org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:59) 在 org. apache.maven.lifecycle.internal.LifecycleStarter.singleThreadedBuild(LifecycleStarter.java:183) 在 org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:161) 在 org.apache。maven.DefaultMaven.doExecute(DefaultMaven.java:320)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T08:48:54.737

在最新版本的 Oracle JDBC 驱动程序中，驱动程序类是 oracle.jdbc.OracleDriver 但不是 oracle.jdbc.driver.OracleDriver。

# c# - 任何用于初始化的设计模式？C＃

> ID：12323633
> 
> 赞同：2
> 
> 时间：2012-09-07T18:39:42.703
> 
> 标签：c#, reflection, singleton

我有一个名为 initialize 的类，它在我的程序开始时运行。最初我明确地硬编码了它应该实例化的所有类，但我想让它更通用并删除硬编码的类，以便我可以将类标记为关闭以进行修改。

我的第一个想法是创建一个类型队列，我的初始化类将循环遍历并实例化队列中的所有类型。

然后我想根据每个班级决定是否应该将其添加到队列中。通过从类中将自身添加到队列中。问题是我不能将一个类添加到队列中，除非它已经被实例化了。我知道变量可以在运行之前初始化，但显然不是方法。所以我坚持弄清楚天气我想做的事是可能的。

类似的东西：

```
MyClass
{

 initalize.instance.Enqueue(typeof(MyClass));
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T19:10:17.177

我的意思是这样的。

```
 public static class Initializer
    {
        public static void Initialize()
        {
            foreach (var assembly in AppDomain.CurrentDomain.GetAssemblies())
                foreach (var type in assembly.GetTypes())
                    if (type.IsDefined(typeof(InitializeAttribute), true))
                        Console.WriteLine("Need to initialize {0}", type.FullName);
        }
    }

    [AttributeUsage(AttributeTargets.Class)]
    public sealed class InitializeAttribute : Attribute
    { 
    }

    [Initialize]
    public sealed class ToBeInitialized
    { 
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T18:59:15.970

如果我正确理解您的问题，您正在寻找的模式是工厂方法模式。看看这个链接：[http ://en.wikipedia.org/wiki/Factory_method_pattern#C.23](http://en.wikipedia.org/wiki/Factory_method_pattern#C.23)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-07T18:44:01.760

如果您正在初始化类`static`状态，那么这不是必需的。只需为所有类型添加一个静态构造函数，.NET 运行时将在访问该类的任何静态成员（无论是字段、方法、属性或事件）之前延迟调用静态构造函数。这也适用于单例模式 - 但是正如我所说，静态构造函数是 JIT 评估的，这可能会在您的程序中引入非确定性延迟。

另一种方法是使用反射来遍历`Type`程序集中的每个并执行您自己的初始化。这就是插件系统的工作方式。

# .htaccess - 将根目录重定向到 jquery 选项卡的页面

> ID：12323634
> 
> 赞同：0
> 
> 时间：2012-09-07T18:39:48.617
> 
> 标签：.htaccess, redirect, jquery-tools, jquery-jscrollpane

我有一个使用 jQuery 工具选项卡和 Ajax 的网站。如果您从主页开始，它可以正常工作：

[http://bdbcreative.com/home.htm](http://bdbcreative.com/home.htm)

单击任何选项卡，您将获得扩展的 Ajax 地址，这是客户端想要的并且似乎是 jScrollPane 工作所必需的 (http://bdbcreative.com/home.htm#web-design.htm)。

但是，如果有人刚刚进入域 - [http://bdbcreative.com](http://bdbcreative.com) - “home.htm” 永远不会被写入，我最终会得到一个像[http://bdbcreative.com/#web-design.htm](http://bdbcreative.com/#web-design.htm)这样的 URL ，这会破坏 jScrollPane .

我想我可以使用 .htaccess 来解决这个问题，但我无法弄清楚语法。有人可以指出我正确的方向。为了一致性起见，我希望将任何站点根 URL（http://bdbcreative.com 或 http:www.bdbcreative.com/ 等）重定向到 home.htm 地址（即[http://bdbcreative.htm）。 com/home.htm](http://bdbcreative.com/home.htm) )

谢谢 - 乔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T17:38:25.010

在尝试了无数示例之后，我找到了一个可以满足我需要的示例。

对于 .htacess 文件：

```
RewriteEngine on
RewriteRule ^$ http://www.bdbcreative.com/index.htm [R=301,L] 
```

希望这对其他人有帮助。

最佳 - 乔

# c++ - 如何在父小部件的右侧绘画？

> ID：12323637
> 
> 赞同：2
> 
> 时间：2012-09-07T18:39:58.067
> 
> 标签：c++, qt, paint

我正在 QScrollArea 之上创建一个自定义 QScrollBar。我做到了`scroll_bar->setParent(acroll_area)`，现在 ScrollBar::painEvent 被绘制在 QScrollArea 上，唯一的问题是它被绘制在左侧。我如何让它在右侧绘画。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T23:48:07.830

RA 是正确的，我调用了 setGeometry，它运行良好 :) （如果你想写你自己的答案，我会接受它）

# c++ - 用 C++ lambdas 包装 C 回调，可以使用模板多态性吗？

> ID：12323645
> 
> 赞同：6
> 
> 时间：2012-09-07T18:40:55.243
> 
> 标签：c++, templates, lambda, c++11, metaprogramming

好的，我最近发布了一些与使用 C++11-ish 接口包装 C 回调 API 相关的问题。我几乎得到了一个令人满意的解决方案，但我认为它可能更优雅，需要一些模板元编程向导的帮助:)

请耐心等待，因为示例代码有点长，但我尝试一次性演示该问题。基本上，这个想法是，给定一个函数指针和数据上下文指针列表，我想提供一个可以提供的回调机制，

*   函数指针
*   函数对象（函子）
*   拉姆达斯

此外，我想让这些函数可以被各种原型调用。我的意思是，C API 为回调提供了大约 7 个不同的参数，但在大多数情况下，用户代码实际上只对其中的一两个感兴趣。所以我希望用户能够只指定他感兴趣的参数。（这从首先允许 lambdas 的角度延伸......为了简洁。）

在这个例子中，名义上的 C 回调接受一个`int`和一个`float`参数，以及一个`float*`可用于返回一些额外数据的可选参数。因此，C++ 代码的目的是能够以“可调用”的任何形式提供任何这些原型的回调。（例如函子、lambda 等）

```
int callback2args(int a, float b);
int callback3args(int a, float b, float *c); 
```

到目前为止，这是我的解决方案。

```
#include <cstdio>
#include <vector>
#include <functional>

typedef int call2args(int,float);
typedef int call3args(int,float,float*);
typedef std::function<call2args> fcall2args;
typedef std::function<call3args> fcall3args;

typedef int callback(int,float,float*,void*);
typedef std::pair<callback*,void*> cb;

std::vector<cb> callbacks;

template <typename H>
static
int call(int a, float b, float *c, void *user);

template <>
int call<call2args>(int a, float b, float *c, void *user)
{
    call2args *h = (call2args*)user;
    return (*h)(a, b);
}

template <>
int call<call3args>(int a, float b, float *c, void *user)
{
    call3args *h = (call3args*)user;
    return (*h)(a, b, c);
}

template <>
int call<fcall2args>(int a, float b, float *c, void *user)
{
    fcall2args *h = (fcall2args*)user;
    return (*h)(a, b);
}

template <>
int call<fcall3args>(int a, float b, float *c, void *user)
{
    fcall3args *h = (fcall3args*)user;
    return (*h)(a, b, c);
}

template<typename H>
void add_callback(const H &h)
{
    H *j = new H(h);
    callbacks.push_back(cb(call<H>, (void*)j));
}

template<>
void add_callback<call2args>(const call2args &h)
{
    callbacks.push_back(cb(call<call2args>, (void*)h));
}

template<>
void add_callback<call3args>(const call3args &h)
{
    callbacks.push_back(cb(call<call3args>, (void*)h));
}

template<>
void add_callback<fcall2args>(const fcall2args &h)
{
    fcall2args *j = new fcall2args(h);
    callbacks.push_back(cb(call<fcall2args>, (void*)j));
}

template<>
void add_callback<fcall3args>(const fcall3args &h)
{
    fcall3args *j = new fcall3args(h);
    callbacks.push_back(cb(call<fcall3args>, (void*)j));
}

// Regular C-style callback functions (context-free)
int test1(int a, float b)
{
    printf("test1 -- a: %d, b: %f", a, b);
    return a*b;
}

int test2(int a, float b, float *c)
{
    printf("test2 -- a: %d, b: %f", a, b);
    *c = a*b;
    return a*b;
}

void init()
{
    // A functor class
    class test3
    {
    public:
        test3(int j) : _j(j) {};
        int operator () (int a, float b)
        {
            printf("test3 -- a: %d, b: %f", a, b);
            return a*b*_j;
        }
    private:
        int _j;
    };

    // Regular function pointer of 2 parameters
    add_callback(test1);

    // Regular function pointer of 3 parameters
    add_callback(test2);

    // Some lambda context!
    int j = 5;

    // Wrap a 2-parameter functor in std::function
    add_callback(fcall2args(test3(j)));

    // Wrap a 2-parameter lambda in std::function
    add_callback(fcall2args([j](int a, float b)
                 {
                     printf("test4 -- a: %d, b: %f", a, b);
                     return a*b*j;
                 }));

    // Wrap a 3-parameter lambda in std::function
    add_callback(fcall3args([j](int a, float b, float *c)
                 {
                     printf("test5 -- a: %d, b: %f", a, b);
                     *c = a*b*j;
                     return a*b*j;
                 }));
}

int main()
{
    init();

    auto c = callbacks.begin();
    while (c!=callbacks.end()) {
        float d=0;
        int r = c->first(2,3,&d,c->second);
        printf("  result: %d (%f)\n", r, d);
        c ++;
    }
} 
```

好的，如您所见，这确实有效。但是，我发现必须将仿函数/lambda 显式包装为`std::function`不优雅的类型的解决方案。我真的很想让编译器自动匹配函数类型，但这似乎不起作用。如果我删除 3 参数变体，则*不需要*`fcall2args`包装器，但是 的版本的存在使得编译器显然不明确。换句话说，它似乎无法基于 lambda 调用签名进行模式匹配。*`fcall3args``add_callback`*

 *第二个问题是，我当然是使用 复制仿函数/lambda 对象`new`，但不使用`delete`此内存。我目前不确定跟踪这些分配的最佳方法是什么，尽管我想在实际的实现中我可以在一个对象中跟踪它们`add_callback`，并在析构函数中释放它们。

第三，对于我想要允许的回调的每个变体，我不觉得有特定的 types 等不是很优雅`call2args`。`call3args`这意味着对于用户可能需要的每种参数组合，我都需要大量类型。我希望可以有一些模板解决方案来使它更通用，但我很难想出它。

**编辑解释**：此代码中的定义`std::vector<std::pair<callback*,void*>> callbacks`是**问题定义**的一部分，而不是答案的一部分。我试图解决的问题是将 C++ 对象映射到这个接口上——因此，提出更好的组织方法`std::vector`并不能解决我的问题。谢谢。只是为了澄清。

**编辑#2**`std::vector<std::pair<callback*,void*>> callbacks` ：好的，忘记我的示例代码用于保存回调的事实。相反，想象一下，因为这是实际场景，我有一些 C 库实现以下接口：

```
struct someobject *create_object();
free_object(struct someobject *obj);
add_object_callback(struct someobject *obj, callback *c, void *context); 
```

在哪里`callback`，

```
typedef int callback(int a,float b,float *c, void *context); 
```

好的。所以“someobject”会经历某种外部事件、网络数据或输入事件等，并在这些发生时调用它的回调列表。

这是 C 中回调的一个非常标准的实现。重要的是，这是一个*现有的*库，我无法更改它，但我正在尝试围绕它编写一个很好的、惯用的 C++ 包装器。我希望我的 C++ 用户能够将 lambdas 添加为回调。因此，我想设计一个 C++ 接口，让用户能够执行以下操作：

```
add_object_callback(struct someobject *obj, func); 
```

其中`func`是以下之一：

1.  一个不使用的常规 C 函数`context`。
2.  函子对象
3.  一个拉姆达

此外，在每种情况下，函数/函子/lambda 应该有可能具有以下任一签名：

```
int cb2args(int a, float b);
int cb2args(int a, float b, float *c); 
```

我*认为*这应该是可能的，我已经完成了大约 80% 的工作，但我被困在基于调用签名的模板多态性上。我不知道这是否可能。也许它需要一些涉及巫毒的`function_traits`东西，但这有点超出我的经验。无论如何，有很多很多的 C 库使用这样的接口，我认为在 C++ 中使用它们时允许这种便利性会很棒。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-08T09:04:30.110

由于您在 C++11 中使用 C API，因此您也可以将整个内容包装在 C++ 类中。正如您在第二个问题中提到的，这也是解决资源泄漏的必要条件。

还要记住，没有捕获的 lambda 表达式可以隐式转换为函数指针。这可以删除所有的，`call<*>`因为它们可以移动到`add_callback`s 中。

最后，我们可以使用 SFINAE 删除`fcall3args`类型。这是结果。

```
class SomeObject {
    // The real object being wrapped.
    struct someobject* m_self;

    // The vector of callbacks which requires destruction. This vector is only a
    // memory store, and serves no purpose otherwise.
    typedef std::function<int(int, float, float*)> Callback;
    std::vector<std::unique_ptr<Callback>> m_functions;

    // Add a callback to the object. Note the capture-less lambda.
    template <typename H>
    void add_callback_impl(H&& h) {
        std::unique_ptr<Callback> callback (new Callback(std::forward<H>(h)));

        add_object_callback(m_self, [](int a, float b, float* c, void* raw_ctx) {
            return (*static_cast<Callback*>(raw_ctx))(a, b, c);
        }, callback.get());

        m_functions.push_back(std::move(callback));
    }

public:
    SomeObject() : m_self(create_object()) {}
    ~SomeObject() { free_object(m_self); }

    // We create 4 public overloads to add_callback:

    // This only accepts function objects having 2 arguments.
    template <typename H>
    auto add_callback(H&& h) -> decltype(h(1, 10.f), void()) {
        using namespace std::placeholders;
        add_callback_impl(std::bind(std::forward<H>(h), _1, _2));
    }

    // This only accepts function objects having 3 arguments.
    template <typename H>
    auto add_callback(H&& h) -> decltype(h(1, 1.0f, (float*)0), void()) {
        add_callback_impl(std::forward<H>(h));
    }

    // This only accepts function pointers. 
    void add_callback(int(*h)(int, float)) const {
        add_object_callback(m_self, [](int a, float b, float* c, void* d) {
            return reinterpret_cast<int(*)(int, float)>(d)(a, b);
        }, reinterpret_cast<void*>(h));
    }

    // This only accepts function pointers.
    void add_callback(int(*h)(int, float, float*)) const {
        add_object_callback(m_self, [](int a, float b, float* c, void* d) {
            return reinterpret_cast<int(*)(int, float, float*)>(d)(a, b, c);
        }, reinterpret_cast<void*>(h));
    }

    // Note that the last 2 overloads violates the C++ standard by assuming
    // sizeof(void*) == sizeof(func pointer). This is valid in POSIX, though.

    struct someobject* get_raw_object() const {
        return m_self;
    }
}; 
```

所以`init()`变成：

```
void init(SomeObject& so) {
    // A functor class
    class test3 { ... };

    so.add_callback(test1);
    so.add_callback(test2);

    // Some lambda context!
    int j = 5;

    so.add_callback(test3(j));
    so.add_callback([j](int a, float b) -> int {
        printf("test4 -- a: %d, b: %f", a, b);
        return a*b*j;
    });

    so.add_callback([j](int a, float b, float *c) -> int {
        printf("test5 -- a: %d, b: %f", a, b);
        *c = a*b*j;
        return a*b*j;
    });
} 
```

* * *

完整的测试代码（我没有把它放在这里，因为 g++ 4.5 不支持将 lambda 隐式转换为函数指针，也不支持基于范围的 for。）

```
#include <vector>
#include <functional>
#include <cstdio>
#include <memory>

struct someobject;
struct someobject* create_object(void);
void free_object(struct someobject* obj);
void add_object_callback(struct someobject* obj,
                         int(*callback)(int, float, float*, void*),
                         void* context);

class SomeObject {
    // The real object being wrapped.
    struct someobject* m_self;

    // The vector of callbacks which requires destruction. This vector is only a
    // memory store, and serves no purpose otherwise.
    typedef std::function<int(int, float, float*)> Callback;
    std::vector<std::unique_ptr<Callback>> m_functions;

    // Add a callback to the object. Note the capture-less lambda.
    template <typename H>
    void add_callback_impl(H&& h) {
        std::unique_ptr<Callback> callback (new Callback(std::forward<H>(h)));

        add_object_callback(m_self, [](int a, float b, float* c, void* raw_ctx) {
            return (*static_cast<Callback*>(raw_ctx))(a, b, c);
        }, callback.get());

        m_functions.push_back(std::move(callback));
    }

public:
    SomeObject() : m_self(create_object()) {}
    ~SomeObject() { free_object(m_self); }

    // We create 4 public overloads to add_callback:

    // This only accepts function objects having 2 arguments.
    template <typename H>
    auto add_callback(H&& h) -> decltype(h(1, 10.f), void()) {
        using namespace std::placeholders;
        add_callback_impl(std::bind(std::forward<H>(h), _1, _2));
    }

    // This only accepts function objects having 3 arguments.
    template <typename H>
    auto add_callback(H&& h) -> decltype(h(1, 1.0f, (float*)0), void()) {
        add_callback_impl(std::forward<H>(h));
    }

    // This only accepts function pointers. 
    void add_callback(int(*h)(int, float)) const {
        add_object_callback(m_self, [](int a, float b, float* c, void* d) {
            return reinterpret_cast<int(*)(int, float)>(d)(a, b);
        }, reinterpret_cast<void*>(h));
    }

    // This only accepts function pointers.
    void add_callback(int(*h)(int, float, float*)) const {
        add_object_callback(m_self, [](int a, float b, float* c, void* d) {
            return reinterpret_cast<int(*)(int, float, float*)>(d)(a, b, c);
        }, reinterpret_cast<void*>(h));
    }

    // Note that the last 2 overloads violates the C++ standard by assuming
    // sizeof(void*) == sizeof(func pointer). This is required in POSIX, though.

    struct someobject* get_raw_object() const {
        return m_self;
    }
};

//------------------------------------------------------------------------------

int test1(int a, float b) {
    printf("test1 -- a: %d, b: %f", a, b);
    return a*b;
}

int test2(int a, float b, float *c) {
    printf("test2 -- a: %d, b: %f", a, b);
    *c = a*b;
    return a*b;
}

void init(SomeObject& so) {
    // A functor class
    class test3
    {
    public:
        test3(int j) : _j(j) {};
        int operator () (int a, float b)
        {
            printf("test3 -- a: %d, b: %f", a, b);
            return a*b*_j;
        }

    private:
        int _j;
    };

    so.add_callback(test1);
    so.add_callback(test2);

    // Some lambda context!
    int j = 5;

    so.add_callback(test3(j));
    so.add_callback([j](int a, float b) -> int {
        printf("test4 -- a: %d, b: %f", a, b);
        return a*b*j;
    });

    so.add_callback([j](int a, float b, float *c) -> int {
        printf("test5 -- a: %d, b: %f", a, b);
        *c = a*b*j;
        return a*b*j;
    });
}

//------------------------------------------------------------------------------

struct someobject {
    std::vector<std::pair<int(*)(int,float,float*,void*),void*>> m_callbacks;
    void call() const {
        for (auto&& cb : m_callbacks) {
            float d=0;
            int r = cb.first(2, 3, &d, cb.second);
            printf("  result: %d (%f)\n", r, d);
        }
    }
};

struct someobject* create_object(void) {
    return new someobject;
}

void free_object(struct someobject* obj) {
    delete obj;
}

void add_object_callback(struct someobject* obj,
                         int(*callback)(int, float, float*, void*),
                         void* context) {
    obj->m_callbacks.emplace_back(callback, context);
}

//------------------------------------------------------------------------------

int main() {
    SomeObject so;
    init(so);
    so.get_raw_object()->call();
} 
```*

# ant - 在 manifest.mf 中包含 SVN 头版本号

> ID：12323650
> 
> 赞同：1
> 
> 时间：2012-09-07T18:41:00.677
> 
> 标签：ant, build-process

我正在使用 Ant 创建一个 WAR 文件。创建 WAR 时，它具有带有默认内容的 MANIFEST.MF 文件：Manifest-Version: 1.0 Ant-Version: Apache Ant 1.8.4 Created-By: 1.7.0_07-b10 (Oracle Corporation)。

因此，当创建 WAR 时，它还应该具有 SVN 的 Build Revision Number/Head 修订号，并且 WAR 中的 MANIFEST.MF 应该如下所示： Manifest-Version: 1.0 Ant-Version: Apache Ant 1.8.4 Created-By ：1.7.0_07-b10（甲骨文公司） 修订：#Head 修订号

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T08:45:28.740

我建议使用`buildnumber-maven-plugin`. 有关更多详细信息，请参阅本文：http: [//manifests.jcabi.com/versioning.html](http://manifests.jcabi.com/versioning.html)

此外，有关更多详细信息，请参阅此帖子：[http ://www.yegor256.com/2014/07/03/how-to-read-manifest-mf.html](http://www.yegor256.com/2014/07/03/how-to-read-manifest-mf.html)

# html - 如何使用 CSS 制作“类似按钮的外观”

> ID：12323651
> 
> 赞同：0
> 
> 时间：2012-09-07T18:41:08.283
> 
> 标签：html, css

我已经使用`<ul>`和制作了一个导航栏`<li>`

我想用边框、渐变等自定义每个选项卡。

它应该应用在哪里？

我的 CSS 样式往往只影响字母，而不影响其他任何东西。

CSS

```
#nav {
width: 100%;
margin: 20px 0px 20px 0px;
}

#nav ul {
padding: 12px 0px 12px 0px;
border-top: solid black 1px;
border-bottom: solid black 1px;
}

#nav ul li {
display: inline;
margin-left: 50px;
font-weight: bold;
    background-color: grey;
} 
```

HTML

```
<div id="nav">
    <ul>    
        <li>Home</li>
        <li>Files</li>
        <li>Info</li>
        <li>About</li>
    </ul>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T20:07:29.140

```
#nav {
  width: 100%;
  margin: 20px 0px 20px 0px;
}
#nav ul {
  padding: 12px 0px 12px 0px;
  border-top: 1px solid black;
  border-bottom: 1px solid black;
}
#nav ul li {
  display: inline;
  margin-left: 10px;
  width:50px;
  height:20px;
  line-height:20px;
  font-weight: bold;
  background-color: grey;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T20:36:25.213

样式标签内的“a”标签（例如“li”标签）不会选择您设置的任何样式。他们想要自己的风格。您需要将所有“li”样式移动到“a”标签，然后放置一个 display:block; 在'a'标签上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T18:45:28.517

```
a {

  display: block;

  // then whatever other rules you want to apply: width, height, border, pink flowers, etc

} 
```

# jsf-2 - 组件 ID 已在视图中找到

> ID：12323652
> 
> 赞同：0
> 
> 时间：2012-09-07T18:41:27.067
> 
> 标签：jsf-2

> **可能重复：**
> [使用具有绑定和会话范围的数据表时，已在视图中找到组件 ID](https://stackoverflow.com/questions/12355348/component-id-has-already-been-found-in-the-view-when-using-datatable-with-bindin)

我有一个 id 唯一性的问题。当我修改视图定义然后尝试重新显示页面**lister_ecoles.xhtml**时收到此消息。

这是显示的错误消息：

```
 java.lang.IllegalStateException: Component ID j_id15:j_id16:j_id29 has already been found in the view.  See below for details.
    +id: null
     type: javax.faces.component.UIViewRoot@1abe6f6
      +id: javax_faces_location_HEAD
       type: javax.faces.component.UIPanel@c84a5d
        +id: j_id4
         type: javax.faces.component.UIOutput@18a5776
        +id: j_id22
         type: javax.faces.component.UIOutput@1742dcc
      +id: j_id19
       ... 
```

这是我在编辑、删除或添加新学校后重定向的页面：

**lister_ecoles.xhtml：**

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core">
<h:head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<h:outputStylesheet library="css" name="table-style.css"  />
<title>Internet Dreams</title>
<link rel="stylesheet" href="css/screen.css" type="text/css" media="screen" title="default" />
<!--[if IE]>
<link rel="stylesheet" media="all" type="text/css" href="css/pro_dropline_ie.css" />
<![endif]-->

<!--  jquery core -->
<script src="js/jquery/jquery-1.4.1.min.js" type="text/javascript"></script>

<!--  checkbox styling script -->
<script src="js/jquery/ui.core.js" type="text/javascript"></script>
<script src="js/jquery/ui.checkbox.js" type="text/javascript"></script>
<script src="js/jquery/jquery.bind.js" type="text/javascript"></script>
<script type="text/javascript">
$(function(){
    $('input').checkBox();
    $('#toggle-all').click(function(){
    $('#toggle-all').toggleClass('toggle-checked');
    $('#mainform input[type=checkbox]').checkBox('toggle');
    return false;
    });
});
</script>  

<!--  styled select box script version 1 -->
<script src="js/jquery/jquery.selectbox-0.5.js" type="text/javascript"></script>
<script type="text/javascript">
$(document).ready(function() {
    $('.styledselect').selectbox({ inputClass: "selectbox_styled" });
});
</script>

<!--  styled select box script version 2 --> 
<script src="js/jquery/jquery.selectbox-0.5_style_2.js" type="text/javascript"></script>
<script type="text/javascript">
$(document).ready(function() {
    $('.styledselect_form_1').selectbox({ inputClass: "styledselect_form_1" });
    $('.styledselect_form_2').selectbox({ inputClass: "styledselect_form_2" });
});
</script>

<!--  styled select box script version 3 --> 
<script src="js/jquery/jquery.selectbox-0.5_style_2.js" type="text/javascript"></script>
<script type="text/javascript">
$(document).ready(function() {
    $('.styledselect_pages').selectbox({ inputClass: "styledselect_pages" });
});
</script>

<!--  styled file upload script --> 
<script src="js/jquery/jquery.filestyle.js" type="text/javascript"></script>
<script type="text/javascript" charset="utf-8">
  $(function() {
      $("input.file_1").filestyle({ 
          image: "images/forms/choose-file.gif",
          imageheight : 21,
          imagewidth : 78,
          width : 310
      });
  });
</script>

<!-- Custom jquery scripts -->
<script src="js/jquery/custom_jquery.js" type="text/javascript"></script>

<!-- Tooltips -->
<script src="js/jquery/jquery.tooltip.js" type="text/javascript"></script>
<script src="js/jquery/jquery.dimensions.js" type="text/javascript"></script>
<script type="text/javascript">
$(function() {
    $('a.info-tooltip ').tooltip({
        track: true,
        delay: 0,
        fixPNG: true, 
        showURL: false,
        showBody: " - ",
        top: -35,
        left: 5
    });
});
</script> 

<!--  date picker script -->
<link rel="stylesheet" href="css/datePicker.css" type="text/css" />
<script src="js/jquery/date.js" type="text/javascript"></script>
<script src="js/jquery/jquery.datePicker.js" type="text/javascript"></script>
<script type="text/javascript" charset="utf-8">
        $(function()
{

// initialise the "Select date" link
$('#date-pick')
    .datePicker(
        // associate the link with a date picker
        {
            createButton:false,
            startDate:'01/01/2005',
            endDate:'31/12/2020'
        }
    ).bind(
        // when the link is clicked display the date picker
        'click',
        function()
        {
            updateSelects($(this).dpGetSelected()[0]);
            $(this).dpDisplay();
            return false;
        }
    ).bind(
        // when a date is selected update the SELECTs
        'dateSelected',
        function(e, selectedDate, $td, state)
        {
            updateSelects(selectedDate);
        }
    ).bind(
        'dpClosed',
        function(e, selected)
        {
            updateSelects(selected[0]);
        }
    );

var updateSelects = function (selectedDate)
{
    var selectedDate = new Date(selectedDate);
    $('#d option[value=' + selectedDate.getDate() + ']').attr('selected', 'selected');
    $('#m option[value=' + (selectedDate.getMonth()+1) + ']').attr('selected', 'selected');
    $('#y option[value=' + (selectedDate.getFullYear()) + ']').attr('selected', 'selected');
}
// listen for when the selects are changed and update the picker
$('#d, #m, #y')
    .bind(
        'change',
        function()
        {
            var d = new Date(
                        $('#y').val(),
                        $('#m').val()-1,
                        $('#d').val()
                    );
            $('#date-pick').dpSetSelected(d.asString());
        }
    );

// default the position of the selects to today
var today = new Date();
updateSelects(today.getTime());

// and update the datePicker to reflect it...
$('#d').trigger('change');
});
</script>

<!-- MUST BE THE LAST SCRIPT IN <HEAD></HEAD></HEAD> png fix -->
<script src="js/jquery/jquery.pngFix.pack.js" type="text/javascript"></script>
<script type="text/javascript">
$(document).ready(function(){
$(document).pngFix( );
});
</script>
</h:head>
<body> 
<!-- Start: page-top-outer -->
<div id="page-top-outer">    

<!-- Start: page-top -->
<div id="page-top">

    <!-- start logo -->
    <div id="logo">
    <a href=""><img src="images/shared/logo.png" width="156" height="40" alt="" /></a>
    </div>
    <!-- end logo -->

    <div class="clear"></div>

</div>
<!-- End: page-top -->

</div>
<!-- End: page-top-outer -->

<div class="clear">&nbsp;</div>

<!--  start nav-outer-repeat................................................................................................. START -->
<div class="nav-outer-repeat"> 
<!--  start nav-outer -->
<div class="nav-outer"> 

        <!-- start nav-right -->
        <div id="nav-right">

            <div class="nav-divider">&nbsp;</div>
            <div class="showhide-account"><img src="images/shared/nav/nav_myaccount.gif" width="93" height="14" alt="" /></div>
            <div class="nav-divider">&nbsp;</div>
            <div class="clear">&nbsp;</div>

            <!--  start account-content --> 
            <div class="account-content">
            </div>
            <!--  end account-content -->

        </div>
        <!-- end nav-right -->

        <!--  start nav -->
        <div class="nav">
        <div class="table">

        <ul class="select"><li><a href="Acc_superu.xhtml"><b>Accueil</b><!--[if IE 7]><!--></a><!--<![endif]-->

        </li>
        </ul>

        <div class="nav-divider">&nbsp;</div>

        <ul class="select">
          <li><a href="#nogo"><b>Encadrants</b><!--[if IE 7]><!--></a><!--<![endif]-->
        <!--[if lte IE 6]><table><tr><td><![endif]-->
        <div class="select_sub ">
            <ul class="sub">
                <li ><a href="lister_encadrants.xhtml">Lister</a></li>
                <li><a href="Add_encadrant.xhtml">Ajouter</a></li>

            </ul>
        </div>
        <!--[if lte IE 6]></td></tr></table></a><![endif]-->
        </li>
        </ul>

        <div class="nav-divider">&nbsp;</div>

        <ul class="select">
          <li><a href="#nogo"><b>Entites</b><!--[if IE 7]><!--></a><!--<![endif]-->
        <!--[if lte IE 6]><table><tr><td><![endif]-->
        <div class="select_sub">
            <ul class="sub">
                <li><a href="lister_entites.xhtml">Lister</a></li>
                <li><a href="Add_entite.xhtml">Ajouter</a></li>

            </ul>
        </div>
        <!--[if lte IE 6]></td></tr></table></a><![endif]-->
        </li>
        </ul>

        <div class="nav-divider">&nbsp;</div>

        <ul class="select"><li><a href="#nogo"><b>Specialites</b><!--[if IE 7]><!--></a><!--<![endif]-->
        <!--[if lte IE 6]><table><tr><td><![endif]-->
        <div class="select_sub ">
            <ul class="sub">
                <li><a href="lister_specialites.xhtml">Lister</a></li>
                <li><a href="Add_specialite.xhtml">Ajouter</a></li>
            </ul>
        </div>
        <!--[if lte IE 6]></td></tr></table></a><![endif]-->
        </li>
        </ul>

        <div class="nav-divider">&nbsp;</div>

        <ul class="current">
          <li><a href="#nogo"><b>Ecoles</b><!--[if IE 7]><!--></a><!--<![endif]-->
        <!--[if lte IE 6]><table><tr><td><![endif]-->
        <div class="select_sub show">
            <ul class="sub">
                <li class="sub_show"><a href="lister_ecoles.xhtml">Lister</a></li>
                <li><a href="Add_ecole.xhtml">Ajouter</a></li>

            </ul>
        </div>
        <!--[if lte IE 6]></td></tr></table></a><![endif]-->
        </li>
        </ul>

        <div class="nav-divider">&nbsp;</div>

        <div class="clear"></div>
        </div>
        <div class="clear"></div>
        </div>
        <!--  start nav -->

</div>
<div class="clear"></div>
<!--  start nav-outer -->
</div>
<!--  start nav-outer-repeat................................................... END -->

 <div class="clear"></div>

<!-- start content-outer ........................................................................................................................START -->
<div id="content-outer">
<!-- start content -->
<div id="content">

    <!--  start page-heading -->
    <div id="page-heading">
        <h1>Lister Ecoles</h1>
    </div>
    <!-- end page-heading -->

    <table border="0" width="100%" cellpadding="0" cellspacing="0" id="content-table">
    <tr>
        <th rowspan="3" class="sized"><img src="images/shared/side_shadowleft.jpg" width="20" height="300" alt="" /></th>
        <th class="topleft"></th>
        <td id="tbl-border-top">&nbsp;</td>
        <th class="topright"></th>
        <th rowspan="3" class="sized"><img src="images/shared/side_shadowright.jpg" width="20" height="300" alt="" /></th>
    </tr>
    <tr>
        <td id="tbl-border-left"></td>
        <td>
        <!--  start content-table-inner ...................................................................... START -->
        <div id="content-table-inner">

            <!--  start table-content  -->
            <div id="table-content">

                <!--  start message-blue -->
                <div id="message-blue">
                <table border="0" width="100%" cellpadding="0" cellspacing="0">
                <tr>
                    <td class="blue-left">Welcome back ! </td>
                    <td class="blue-right"><a class="close-blue"><img src="images/table/icon_close_blue.gif"   alt="" /></a></td>
                </tr>
                </table>
                </div>
                <!--  end message-blue -->

                <!--  start message-green -->
                <div id="message-green">
                <table border="0" width="100%" cellpadding="0" cellspacing="0">
                <tr>
                    <td class="green-left">

                <br />  <h:messages  globalOnly="true"  /> <br />

                </td>
                    <td class="green-right"></td>
                </tr>
                </table>
                </div>
                <!--  end message-green -->

                <!--  start product-table ..................................................................................... -->
                <f:view>
                <h:form  >

                <h:dataTable binding="#{ecole.dataTable}" value="#{ecole.getEcoleList()}" var="c"
                border="0" width="100%" cellpadding="0" cellspacing="0" 
                styleClass="order-table"
                headerClass="order-table-header"
                rowClasses="order-table-odd-row,order-table-even-row"
            >

                        <h:column>
                            <f:facet name="header">
                                ID
                            </f:facet>
                                #{c.idEcole}
                        </h:column>
                        <h:column>
                            <f:facet name="header">
                                Nom
                            </f:facet>
                                #{c.nomEcole}
                        </h:column>

                        <h:column>
                            <f:facet name="header">
                                Description
                            </f:facet>
                                #{c.desc_ecl}
                        </h:column>
                        <h:column>
                             <f:facet styleclass="options-width" name="header">
                                        Options
                             </f:facet>
                             <h:commandLink action="#{ecole.editEcoleItem()}" title="Edit" >
                                <h:graphicImage style="border:0" url="/icones/b_edit.png" />
                             </h:commandLink>
                             &#xa0;&#xa0;&#xa0;
                             <h:commandLink title="Delete" 
                             onclick="return confirm('Voulez-vous confirmer la suppression?') ;" 
                                 action="#{ecole.deleteEcole(c)}"
                             >
                              <h:graphicImage style="border:0" url="/icones/b_drop.png" />
                             </h:commandLink>
                        </h:column>

        </h:dataTable>
                <!--  end product-table................................... --> 
                </h:form>
                </f:view>
            </div>
            <!--  end content-table  -->

            <!--  start actions-box ............................................... -->
            <div id="actions-box">
                <a href="" class="action-slider"></a>
                <div id="actions-box-slider">
                    <a href="" class="action-edit">Edit</a>
                    <a href="" class="action-delete">Delete</a>
                </div>
                <div class="clear"></div>
            </div>
            <!-- end actions-box........... -->

            <!--  start paging..................................................... -->
            <table border="0" cellpadding="0" cellspacing="0" id="paging-table">
            <tr>
            <td>
                <a href="" class="page-far-left"></a>
                <a href="" class="page-left"></a>
                <div id="page-info">Page <strong>1</strong> / 15</div>
                <a href="" class="page-right"></a>
                <a href="" class="page-far-right"></a>
            </td>
            <td>
            <select  class="styledselect_pages">
                <option value="">Number of rows</option>
                <option value="">1</option>
                <option value="">2</option>
                <option value="">3</option>
            </select>
            </td>
            </tr>
            </table>
            <!--  end paging................ -->

            <div class="clear"></div>

        </div>
        <!--  end content-table-inner ............................................END  -->
        </td>
        <td id="tbl-border-right"></td>
    </tr>
    <tr>
        <th class="sized bottomleft"></th>
        <td id="tbl-border-bottom">&nbsp;</td>
        <th class="sized bottomright"></th>
    </tr>
    </table>
    <div class="clear">&nbsp;</div>

</div>
<!--  end content -->
<div class="clear">&nbsp;</div>
</div>
<!--  end content-outer........................................................END -->

<div class="clear">&nbsp;</div>

<!-- start footer -->         
<div id="footer">
    <!--  start footer-left -->
    <div id="footer-left">

    Admin Skin &copy; Copyright Internet Dreams Ltd. <span id="spanYear"></span> <a href="">www.netdreams.co.uk</a>. All rights reserved.</div>
    <!--  end footer-left -->
    <div class="clear">&nbsp;</div>
</div>
<!-- end footer -->

</body>
</html> 
```

# sql - 如何在 SQL 中找到正在上 C 正在上的任何课程的学生 C 的同学？

> ID：12323655
> 
> 赞同：0
> 
> 时间：2012-09-07T18:41:40.560
> 
> 标签：sql, union

有两个表，`students`和`courses`。该`students`表有`name`和。`age``ssn`

`Courses`有`ssn`和`Course`。

现在表`ssn`中`courses`的不是唯一的，但其中的一个`students`是主键。

我需要找出正在参加学生正在参加的任何课程的学生`C`（包括`C`的名字以及结果解决方案中的名字）。

这是一个具有挑战性的问题，所以我不介意，但我想知道解决方案是什么。

到目前为止，我尝试使用这样的`union`运算符：

```
SELECT ssn
FROM courses
UNION SELECT ssn
FROM students
WHERE name =  'c' 
```

所做的只是返回 table 中的所有 ssns `courses`。该问题要求我们有效地找到两个表的集合 UNION 以确定解决方案。

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T18:48:32.930

```
SELECT DISTINCT s2.ssn, s2.name
    FROM students s1
        INNER JOIN courses c1  /* Find all courses taken by student 'c' */
            ON s1.ssn = c1.ssn
        INNER JOIN courses c2  /* Find all students in all of c's courses */
            ON c1.course = c2.course
        INNER JOIN students s2 /* Get the details for each of those students */
            ON c2.ssn = s2.ssn
    WHERE s1.name = 'c' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T19:04:42.583

```
select distinct c1.ssn, s1.name from courses c1   // find distinct ssn and name for courses X (defined below)
inner join students s1 on c1.ssn=s1.ssn
where c1.course  in 
(select course
 from courses     // use to find all courses (say X) for student c
where ssn =
(select ssn from students where name='c'))  // find ssn of student 
```

希望这可以帮助

# c# - 将 dataGridView 转换为 dataTable：错误

> ID：12323656
> 
> 赞同：0
> 
> 时间：2012-09-07T18:41:44.437
> 
> 标签：c#, .net, datagridview, datatable

我想将 DataGridView 转换为 DataTable。

```
using (DataTable dt = new DataTable())
{
    dt.Columns.Add("column1", typeof(int));
    dt.Columns.Add("column2", typeof(string));
    dt.Columns.Add("column3", typeof(int));
    foreach (DataGridViewRow dgvR in dgQBM)
    {
        dt.Rows.Add(dgvR.Cells[0].Value, dgvR.Cells[1].Value);
    }
} 
```

错误：

```
foreach statement cannot operate on variables of type 
'System.Windows.Forms.DataGridView' because 'System.Windows.Forms.DataGridView' 
does not contain a public definition for 'GetEnumerator' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T18:44:27.713

它应该是：

```
foreach (DataGridViewRow dgvR in dgQBM.Rows)
{
  ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T18:45:27.170

尝试行

```
using (DataTable dt = new DataTable())
            {
                dt.Columns.Add("column1", typeof(int));
                dt.Columns.Add("column2", typeof(string));
                dt.Columns.Add("column3", typeof(int));
                foreach (DataGridViewRow dgvR in dgQBM.Rows)
                {
                    dt.Rows.Add(dgvR.Cells[0].Value, dgvR.Cells[1].Value);
                }
            } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-07-19T16:05:25.940

试试这个，在一行中......速度性能代码。

```
DataTable dt = (DataTable)dgQBM.DataSource; 
```

# java - 如何在 Hibernate 中使用 READ_WRITE CacheConcurrencyStrategy 保持缓存的 ManyToOne 集合的一致性？

> ID：12323661
> 
> 赞同：0
> 
> 时间：2012-09-07T18:41:57.457
> 
> 标签：java, hibernate

在编写“非规范化”集合时，我遇到了 NONSTRICT_READ_WRITE 和 READ_WRITE CacheConcurrencyStrategy 之间的差异......我的想法是我有一个连接表建模为实体，但它还包含指向它连接的表的只读链接。

我的实体，大致：

```
@Entity
@org.hibernate.annotations.Entity(dynamicUpdate = true)
@Cache(usage = CacheConcurrencyStrategy.READ_WRITE)
class Actor {
    @Id
    Integer id;
    @Column
    String name;
}

@Entity
@org.hibernate.annotations.Entity(dynamicUpdate = true)
@Cache(usage = CacheConcurrencyStrategy.READ_WRITE)
class Movie {
    @Id
    Integer id;
    @Column
    String title;
}

@Entity
@org.hibernate.annotations.Entity(dynamicUpdate = true)
@Cache(usage = CacheConcurrencyStrategy.READ_WRITE)
class Credit {
    @Column
    String roleName;

    @ManyToOne(targetEntity = Movie.class, optional = true)
    @JoinColumn(name = "movie_id", insertable = false, updatable = false)
    @NotFound(action = NotFoundAction.IGNORE)
    Movie movie;

    @Column(name = "movie_id")
    Long movieId;

    @ManyToOne(targetEntity = Actor.class, optional = true)
    @JoinColumn(name = "actor_id", insertable = false, updatable = false)
    @NotFound(action = NotFoundAction.IGNORE)
    Actor actor;

    @Column(name = "actor_id")
    Long actorId;
} 
```

启用二级对象缓存（使用 ehcache）。

我的应用程序编写 Movies 和 Actors... 一段时间后，它通过编写 Credit 将它们链接在一起。在写 Credit 的时候，我只填写了 roleName、movieId 和 actorId 字段，我没有提供 Movie 和 Actor 对象。

使用 NONSTRICT_READ_WRITE 缓存，我可以读回 Credit 对象，它将包含引用的 Movie 和 Actor 对象。

使用 READ_WRITE 缓存，读回 Credit 将返回一个具有空 Movie 和 Actor 字段的 Credit。如果我清除休眠缓存，则读取该 Credit 然后按预期包含 Movie 和 Actor 对象。这也是 TRANSACTIONAL 缓存的行为（但当然不是 NONE 缓存）。

因此，当使用 READ_WRITE 缓存时，似乎休眠将 Credit 插入到具有空 Actor 和 Movie 字段的 2 级缓存中。有没有办法防止这种情况发生并始终从数据库中读取以取回这些连接字段？我尝试使用 CacheConcurrencyStrategy.NONE 仅注释字段，但这不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T07:32:50.287

我想你可能因为你奇怪的映射（至少是非标准映射）而偶然发现了一个休眠错误。没有真正的理由有两个字段，一个带有 id，一个带有实体。

您可以使用 - 将 id 转换为实体引用`session.load`，它只是创建一个代理，不会从 DB 加载数据。

如果您摆脱了 movieId 和 actorId 字段并删除了电影/演员字段上的可插入/可更新的 false ，则无论`READ_WRITE`是`NON_STRICT_READ_WRITE`

```
Credit c = new Credit()
Movie m = session.load(movieId);
Actor a = session.load(actorId);
c.setMovie(m);
c.setActor(a);
session.save(c); 
```

Hibernate 不会将完整的对象保存在二级缓存中。我将它存储为扁平形式（水合 - 更像是 db 表）并从中重建对象。因此，您断言它在缓存中存储了具有 null 的对象并且没有更新它是不正确的。还有其他事情正在发生。

`READ_WRITE`和之间的主要区别在于`NON_STRICT_READ_WRITE`，缓存中的条目将在 READ_WRITE 的情况下在更新时被锁定，而在 NON_STRICT_READ_WRITE 中不会被锁定。仅当您同时在多个线程中更新此实体时，这才会产生影响。

# java - 尝试将安全性添加到我的 Spring Web Flow2 项目

> ID：12323666
> 
> 赞同：0
> 
> 时间：2012-09-07T18:42:28.470
> 
> 标签：java, spring, spring-mvc, spring-security, spring-webflow

我有一个我一直在做的网络流项目，现在是时候给它增加一些安全性了。我有用于演示的登录屏幕，但我想添加：

```
@PreAuthorize(isAuthenticated()); 
```

对我在控制、服务和 dao 中的一些功能，我知道只有登录的用户才能访问这些功能。 **@PreAuthorize(isAuthenticated())**不起作用，我真的不想使用**@PreAuthorize("hasRole('ROLE_USER')")**。

有人可以告诉我如何更好地锁定我的代码

这是我的 security.xml 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans:beans 
    xmlns="http://www.springframework.org/schema/security"
    xmlns:beans="http://www.springframework.org/schema/beans" 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.springframework.org/schema/beans
                        http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
                        http://www.springframework.org/schema/security
                        http://www.springframework.org/schema/security/spring-security-3.1.xsd">

    <global-method-security pre-post-annotations="enabled"/>

    <http use-expressions="true">
        <intercept-url access="hasRole('ROLE_USER')"    pattern="/visit**" />
        <intercept-url pattern='/*' access='permitAll' />
        <form-login   default-target-url="/visit" />

        <logout logout-success-url="/" />
    </http>

    <authentication-manager>
        <authentication-provider>
            <user-service>
                <user name="user" password="user" authorities="ROLE_USER" />
            </user-service>

        </authentication-provider>
    </authentication-manager>
</beans:beans> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T19:25:08.213

试着加上`isAuthenticated()`引号。

如在

```
@PreAuthorize("isAuthenticated()"); 
```

# c++ - 在 C++ 中转换 Big Integer <-> double

> ID：12323668
> 
> 赞同：4
> 
> 时间：2012-09-07T18:42:30.540
> 
> 标签：c++, math, assembly

我正在用 C++ 编写我自己的长算术库，它已经完成得很好了，我什至用那个库实现了几个 Cryptogrphic 算法，但仍然缺少一件重要的事情：我想将双精度数（和浮点数/长双精度数）转换为我的号码，反之亦然。我的数字表示为一个可变大小的无符号长整数数组加上一个符号位。

我试图用谷歌找到答案，但问题是人们很少自己实现这些东西，所以我只找到关于如何使用 Java BigInteger 等的东西。

从概念上讲，这相当容易：我取尾数，将其移动由指数指定的位数并设置符号。在另一个方向上，我将其截断以使其适合尾数并根据我的 log2 函数设置指数。

但是我很难弄清楚细节，我可以玩一些位模式并将其转换为双精度，但我没有找到一种优雅的方式来实现这一点，或者我可以通过开始“计算”它用 2，取幂，乘法等，但这似乎不是很有效。

我希望有一个不使用任何库调用的解决方案，因为我试图避免为我的项目使用库，否则我本可以使用 gmp，此外，我经常在其他几个场合有两种解决方案，一个使用内联汇编程序高效且更独立于平台，因此任何一个答案对我都有用。

编辑：我使用 uint64_t 作为我的部件，但我希望能够根据机器进行更改，但我愿意使用一些#ifdefs 来实现一些不同的实现。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T19:04:23.303

我将在这里做出不可移植的假设：即，它`unsigned long long`的数字比`double`. （在我所知道的所有现代桌面系统上都是如此。）

首先，将最重要的整数转换为`unsigned long long`. 然后将其转换为 double `S`。让`M`是小于第一步中使用的整数的数量。乘以。`S`_ `(1ull << (sizeof(unsigned)*CHAR_BIT*M)`（如果移位超过 63 位，则必须将它们拆分为单独的移位并进行一些运算）最后，如果原始数字为负数，则将此结果乘以 -1。

这个舍入很多，但即使使用这种舍入，由于上述假设，不会丢失任何数字，但转换为双精度时无论如何都不会丢失。我认为这与 Mark Ransom 所说的过程类似，但我不确定。

要从双精度整数转换为大整数，首先将尾数分隔为 a `double M`，将指数分隔为`int E`，使用`frexp`. 乘以`M`，`UNSIGNED_MAX`并将结果存储在 中`unsigned R`。如果`std::numeric_limits<double>::radix()`是 2（我不知道它是否适用于 x86/x64），您可以轻松地左移`R`一位，`E-(sizeof(unsigned)*CHAR_BIT)`然后就完成了。否则，结果将改为`R*(E**(sizeof(unsigned)*CHAR_BIT))`（其中`**`意味着力量）

如果性能是一个问题，您可以为您的 bignum 类添加一个重载来乘以`std::constant_integer<unsigned, 10>`，它只是返回`(LHS<<4)+(LHS<<2)`。如果您愿意，您可以类似地优化其他常量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T19:50:26.887

这篇博文可能会帮助您 [澄清和优化 Integer>>asFloat](http://smallissimo.blogspot.fr/2011/09/clarifying-and-optimizing.html)

否则，您还可以通过这个 SO 问题对算法有所[了解](https://stackoverflow.com/questions/4400747/converting-from-unsigned-long-long-to-float-with-round-to-nearest-even/11058796#11058796)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T18:53:32.310

要从大整数变为双精度，只需按照解析数字的方式进行即可。例如，您将数字“531”解析为“1 + (3 * 10) + (5 * 100)”。使用双精度计算每个部分，从最不重要的部分开始。

要从双精度整数变为大整数，请以相同的方式进行操作，但从最重要的部分开始反向操作。所以，要转换 531，首先你会看到它大于 100 但小于 1000。你通过除以 100 找到第一个数字。然后减去得到 31 的余数。然后通过除以 10 找到下一个数字。并且很快。

当然，您不会使用十位（除非您将大整数存储为数字）。究竟如何将其拆分取决于大整数类的构造方式。例如，如果它使用 64 位单位，那么您将使用 2^64 的幂而不是 10 的幂。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-07T18:56:23.133

你没有明确说，但我假设你的库只是整数，无符号长整数是 32 位和二进制（不是十进制）。转换*为*double 很简单，所以我先解决这个问题。

从当前作品的乘数开始；如果数字为正，则为 1.0，如果为负，则为 -1.0。对于 bignum 中的每个无符号长整数，乘以当前乘数并将其添加到结果中，然后将乘数乘以`pow(2.0, 32)`(4294967296.0)（对于 32 位）或`pow(2.0, 64)`(18446744073709551616.0)（对于 64 位）。

您可以通过仅使用 2 个最重要的值来优化此过程。即使整数类型中的位数大于 double 的精度，您也需要使用 2，因为最高有效值中*使用*的位数可能仅为 1。您可以通过取幂来生成乘数2 到跳过的位数，例如`pow(2.0, most_significant_count*sizeof(bit_array[0])*8)`. 您不能使用另一个答案中给出的位移，因为它会在第一个值之后溢出。

要从双精度转换，您可以使用函数将指数和尾数彼此分开`frexp`。尾数将作为 0.5 和 1.0 之间的浮点值出现，因此您需要将其乘以 pow(2.0, 32) 或 pow(2.0, 64) 以将其转换为整数，然后将指数调整为 -32 或-64 进行补偿。

# jquery - 元素不会调整大小，尽管它应该

> ID：12323670
> 
> 赞同：1
> 
> 时间：2012-09-07T18:42:34.400
> 
> 标签：jquery, resize, grid, pinterest, jquery-isotope

我正在使用 pinterest 之类的盒子的[同位素](http://isotope.metafizzy.co)插件，唯一的问题是：如果盒子里的任何东西发生了变化（并改变了盒子的高度），那么它们就会重叠。为了避免这种情况，我正在尝试这个：

```
$('#container').isotope({
  // options
  itemSelector : '.box'
});

$(".special").click(function() {
    $(this).append("I'm a <strong>special</strong> box!");
    $('#container').isotope({'reLayout'});
}); 
```

..但它似乎不起作用。

请在此处查看示例：http: [//jsfiddle.net/eELmb/](http://jsfiddle.net/eELmb/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T18:46:23.753

尝试`relayout`像这样使用：

```
$('#container').isotope('reLayout'); 
```

[http://isotope.metafizzy.co/docs/methods.html#relayout](http://isotope.metafizzy.co/docs/methods.html#relayout)

# tcp - 如何在ping程序中发送数据

> ID：12323673
> 
> 赞同：-1
> 
> 时间：2012-09-07T18:43:07.527
> 
> 标签：tcp, loopback

我想使用 ping 程序将数据发送到环回 IP 地址 127.0.0.1。$ping 127.0.0.1 "my data" 并希望在内核空间中看到它。如果有人有什么想法请回复我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T18:57:13.147

使用 ping 的`-p`选项：

> -p 模式
>   您可以指定最多 16 个“填充”字节来填写您发送的数据包。
>   这对于诊断网络中的数据相关问题很有用。
>   例如，*-p ff*将导致发送的数据包被全部填充。

# windows - Windows 控制台是否支持 ANSI？

> ID：12323678
> 
> 赞同：3
> 
> 时间：2012-09-07T18:43:19.513
> 
> 标签：windows, console, ansi

Windows 控制台是否支持 ANSI 控制字符？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T18:49:44.847

默认情况下，它不支持许多 ANSI 控制字符（维基百科文章[http://en.wikipedia.org/wiki/ANSI_escape_code](http://en.wikipedia.org/wiki/ANSI_escape_code)中也提到了这一点），但有一些方法可以做到这一点。

查看这个问题的答案：[如何在 WinXP cmd shell 中加载 ANSI 转义码或获取彩色文件列表？](https://stackoverflow.com/questions/946546/how-to-load-ansi-escape-codes-or-get-coloured-file-listing-in-winxp-cmd-shell) 你可能会遇到一些有用的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T18:46:55.613

我假设您指的是 ASCII 控制字符。

答案是“一些”。例如，您可以读取退格键，并且可以通过管道输入诸如 ASCII“Bell”字符之类的内容。

但是，如果您的意思是 Windows 控制台会自动解析转义字符，例如将“\b”转换为“Bell”，那么不，您必须自己做。

请注意，我说的是直接将按键输入控制台而不是批处理文件，请参阅@ProblemFactory 的答案。

# ios - 使用 CoreBluetooth 传输数据

> ID：12323680
> 
> 赞同：5
> 
> 时间：2012-09-07T18:43:23.603
> 
> 标签：ios, bluetooth, core-bluetooth, bluetooth-lowenergy

我正在开发一个带有蓝牙 LE 外围设备的 iOS 应用程序。我似乎无法解决的一个步骤是如何将数据从我的应用程序实际传输到外围设备，反之亦然。

到目前为止，我构建的是一个测试应用程序，它可以连接到我的示例蓝牙外围设备，并读取它的所有服务/特征/描述符。它可以切换给定特征的通知，并写入给定特征。这只是“向外围设备发送 n 个字节，并从外围设备接收 m 个字节”的最后一步，我似乎无法弄清楚。

查看外部附件框架（如果 Apple 真的给我这个项目的 MFi 批准，我会使用它），它们在给定会话上为您提供输入和输出流以与附件通信，但 CoreBluetooth 不存在这样的对象。

这仅仅是 Apple 对 CoreBluetooth 功能的疏忽吗？还是我只需要开发自己的蓝牙服务配置文件来处理进出外围设备的数据流入/流出？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T05:46:36.567

LE 从根本上设计为与这些基于 GATT 的配置文件一起工作，这些配置文件适用于监控传感器，而不是数据流。虽然 LE 确实允许为自定义协议打开额外的 L2CAP 流，但 Apple 的 CoreBluetooth 不提供这样做的访问权限。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-01-30T17:17:58.157

您可以构建具有私有服务和特性的自定义配置文件，并让它像 SSP 一样工作；这就是我使用 BLE 模块从某些传感器获取数据到我的应用程序的方式。我购买的模块（Microchip 的 RN-4020）已经有一个专门为此定制的配置文件，称为 MLDP（Microchip 低能耗数据配置文件）。

我在我的 iOS 应用程序中获取数据的方式是订阅私有特征，从而在值更新时得到通知。到目前为止，它运行良好，根据 Microchip 的说法，数据速率可以高达 20 kbps（我没有测试它的极限，因为我不需要太多的速度）。这是 Microchip 产品页面的链接：http: [//www.microchip.com/wwwproducts/Devices.aspx? product=RN4020](http://www.microchip.com/wwwproducts/Devices.aspx?product=RN4020)

祝你好运！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-13T02:12:06.513

您可以使用 bluetooth.org 'Immediate Alert Service' uuid=1802 和特性 uuid=2A06 和 property=write_no_response 从 iPhone 向外围设备发送一个字节值。外围设备必须经过编程才能对发送的数据进行操作。例如，您可以使用 iPhone 应用程序上的按钮发送一个十六进制地址，该地址会导致外围设备上的一个或多个端口引脚打开或关闭。虽然这没有按预期使用警报服务，但它确实提供了一种简单的方法来测试到外围设备的数据传输。可以使用相同的过程来发送类似于串行数据流的顺序数据字节。我还没有尝试发送更复杂的数据流。write_no_response 不会向应用程序提供关于外设是否接收到数据的任何反馈。

IOS TemperatureSensor.xproj 是用于从外围设备读取温度数据的代码示例。OSX HealthThermometerClient.xproj 具有解码有些复杂的温度计数据结构所需的代码。IOS TI-BLE-Demo.xproj TIBLECBKeyfob.m 具有用于读取和写入特征值的代码，例如从外围设备读取温度或电池电量。

# iphone - 设置包 - Xcode 中未显示新项目

> ID：12323683
> 
> 赞同：0
> 
> 时间：2012-09-07T18:43:52.293
> 
> 标签：iphone, settings, xcode4.3, bundle

我是 iOS 开发的新手。两天前学习了一章关于在我的应用程序中使用设置包。本教程还向我展示了如何通过 ctrl+单击在 Finder 中打开包来将新的 plist 文件和图像添加到设置包中。

但是新添加的项目没有出现在 Xcode 项目管理器列表中。这是它的工作原理还是我们有替代方案？

[Deepu 于美国东部标准时间下午 1:53 更新] 谢谢大家的回复。其实我发现了一些奇怪的东西。当我从 Finder 将对象添加到设置包时，它们最初并没有出现在 Xcode 上。我关闭了所有东西，然后重新打开了 Xcode，并在 Xcode 的包中看到了它们。所以我猜这个错误是我期望在我通过 Finder 将对象添加到文件系统后立即将它们添加到 Xcode 中的。

很抱歉给您带来麻烦并感谢您的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T19:03:35.847

它应该在那里，如果没有，则右键单击 xcode 中的任何文件夹/文件，在 Finder 中点击 Show 或 Reveal，然后它将带您到放置所有项目文件的位置，从那里拖放到你的项目。如果您将它们添加到磁盘上的文件夹中，它不会自动拉入您的项目。您将不得不拖放到您的项目中。

如果您有任何问题，请告诉我。

雷诺琼斯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T18:51:06.983

它必须在任何文件夹中。当我添加一个文件时，我通常首先添加一个组（右键单击添加组）然后有一个新文件夹，因此在文件夹中（示例图像）我右键单击并添加一个文件。

# android - getLoaderManager.initLoader() 在 Android 的 API 级别 10 下无法解析

> ID：12323685
> 
> 赞同：0
> 
> 时间：2012-09-07T18:43:54.953
> 
> 标签：android

在 Android 中：我想使用方法：`getLoaderManager.initLoader()`API 级别 10。我知道这种方法需要 API 级别 11 或更高，我尝试使用 Android 支持包，但这个包没有这个方法。我能做些什么 ？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T18:51:00.200

它在我看来确实像 Android 支持包有它。请参阅[`android.support.v4.app.LoaderManager.initLoader()`](http://developer.android.com/reference/android/support/v4/app/LoaderManager.html#initLoader%28int,%20android.os.Bundle,%20android.support.v4.app.LoaderManager.LoaderCallbacks%3CD%3E%29).

**更新：**

有关 的等价物`getLoaderManager`，请参阅[`getSupportLoaderManager`](http://developer.android.com/reference/android/support/v4/app/FragmentActivity.html#getSupportLoaderManager%28%29)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T01:07:22.787

您可以将最低 SDK 提高到 15 级，它会正常工作。

# asp.net - 导入asp.net解决方案发布设置（升级电脑）

> ID：12323692
> 
> 赞同：0
> 
> 时间：2012-09-07T18:44:34.600
> 
> 标签：asp.net

我最近升级了我用于许多 asp.net 项目的计算机。

我将所有项目从旧电脑移到了新电脑，但我不再在解决方案中拥有发布设置（好吧，我假设它们都与我正在处理的当前设置相同）。

我确实在工作室（express）中找到了一些可用的导入/导出，但没有与发布有关，我认为这是一个解决方案（甚至是项目）级别的设置。

获得我的原始发布设置将是最有帮助的，任何帮助将不胜感激。

问候集市

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T12:59:04.707

我很偶然地找到了解决方案。

由于我需要发布一些东西，我开始创建一个“第一个”发布配置文件，并且在那个过程中，我的原始出版物出现在列表中。

必须存在一个问题，即配置文件列表中的特殊消息“创建发布设置”以某种方式覆盖了新安装 VS 的现有列表。

马丁

# r - 有没有更优雅的方法可以使用 lubridate 将两位数年份转换为四位数年份？

> ID：12323693
> 
> 赞同：39
> 
> 时间：2012-09-07T18:44:35.193
> 
> 标签：r, date, lubridate

如果日期向量有两位数的年份，则将`mdy()`00 和 68 之间的年份转换为 21 世纪年份，将 69 和 99 之间的年份转换为 20 世纪年份。例如：

```
library(lubridate)    
mdy(c("1/2/54","1/2/68","1/2/69","1/2/99","1/2/04")) 
```

给出以下输出：

```
Multiple format matches with 5 successes: %m/%d/%y, %m/%d/%Y.
Using date format %m/%d/%y.
[1] "2054-01-02 UTC" "2068-01-02 UTC" "1969-01-02 UTC" "1999-01-02 UTC" "2004-01-02 UTC" 
```

我可以通过从不正确的日期中减去 100 将 2054 和 2068 变成 1954 和 1968 来解决这个问题。但是有没有一种更优雅、更不容易出错的方法来解析两位数的日期，以便在解析过程本身？

**更新：**在@JoshuaUlrich 向我指出后，`strptime`我发现[了这个问题](https://stackoverflow.com/questions/9508747/r-adding-century-to-year)，它处理的问题与我的类似，但使用的是基础 R。

似乎 R 中日期处理的一个很好的补充是在日期解析函数中处理两位数日期的世纪选择截止值。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-10-18T15:12:31.667

这是一个允许您执行此操作的函数：

```
library(lubridate)
x <- mdy(c("1/2/54","1/2/68","1/2/69","1/2/99","1/2/04"))

foo <- function(x, year=1968){
  m <- year(x) %% 100
  year(x) <- ifelse(m > year %% 100, 1900+m, 2000+m)
  x
} 
```

试试看：

```
x
[1] "2054-01-02 UTC" "2068-01-02 UTC" "1969-01-02 UTC" "1999-01-02 UTC"
[5] "2004-01-02 UTC"

foo(x)
[1] "2054-01-02 UTC" "2068-01-02 UTC" "1969-01-02 UTC" "1999-01-02 UTC"
[5] "2004-01-02 UTC"

foo(x, 1950)
[1] "1954-01-02 UTC" "1968-01-02 UTC" "1969-01-02 UTC" "1999-01-02 UTC"
[5] "2004-01-02 UTC" 
```

* * *

这里的神奇之处在于使用模运算符`%%`返回除法的小数部分。因此`1968 %% 100`产生 68。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-01T09:27:33.120

我刚刚经历了这个完全相同的错误/功能。

我最终编写了以下两个快速函数来帮助从 excel 类型的日期（这是我得到最多的）转换为 R 可以使用的东西。

接受的答案没有任何问题——只是我不想过多地加载包。

一、分拆更换岁月的帮手...

```
year1900 <- function(dd_y, yrFlip = 50)
{
    dd_y <- as.numeric(dd_y)
    dd_y[dd_y > yrFlip] <- dd_y[dd_y > yrFlip] + 1900
    dd_y[dd_y < yrFlip] <- dd_y[dd_y < yrFlip] + 2000
    return(dd_y)
} 
```

它由“修复”您的excel日期的函数使用，具体取决于类型：

```
XLdate <- function(Xd, type = 'b-Y')
{
    switch(type,
        'b-Y' = as.Date(paste0(substr(Xd, 5, 9), "-", substr(Xd, 1, 3), "-01"), format = "%Y-%b-%d"),
        'b-y' = as.Date(paste0(year1900(substr(Xd, 5, 6)), "-", substr(Xd, 1, 3), "-01"), 
                        format = "%Y-%b-%d"),
        'Y-b' = as.Date(paste0(substr(Xd, 1, 3), "-", substr(Xd, 5, 9), "-01"), format =     "%Y-%b-%d")
        )
} 
```

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-28T14:51:44.330

另一种选择是：

```
xxx <- c("01-Jan-54","01-Feb-68","01-Aug-69","01-May-99","01-Jun-04", "
       31-Dec-68","01-Jan-69", "31-Dec-99") 
```

.

```
dmy(paste0(sub("\\d\\d$","",xxx) , ifelse( (tt <- 
   sub("\\d\\d-\\D\\D\\D-","",xxx)  ) > 20 ,paste0("19",tt),paste0("20",tt)))) 
```

尽管没有一个解决方案既优雅也不简短。我认为如果 lubridate 只是添加一个选项来指定截止日期会更好。

# doctrine-orm - 如何使用原则连接导入 SQL 文件？

> ID：12323694
> 
> 赞同：6
> 
> 时间：2012-09-07T18:44:34.553
> 
> 标签：doctrine-orm

我有一个需要导入 .sql 文件的应用程序。我可以从命令行使用 导入文件`mysql -u my_user -pMyPassword db_name < import.sql`，但我想将它移到我的应用程序中。我有一些事情需要在导入之前和之后完成。现在我必须把它分成3个步骤。我找到的最接近解决方案的是获取连接（`Doctrine\DBAL\Connection`）并使用`exec()`，但即使我的源文件正确，它也会引发语法错误。我猜它试图逃避事情并双重逃避SQL。该文件是用`mysqldump`.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2017-05-16T17:20:57.650

使用使用 Doctrine 的 Symfony，您可以这样做：

```
php app/dev_console doctrine:database:import import.sql 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-09T16:29:54.500

您可以使用[DBAL“导入”命令](https://github.com/doctrine/dbal/blob/master/lib/Doctrine/DBAL/Tools/Console/Command/ImportCommand.php)并执行 sql。无论如何，这比直接使用 mysql 命令的性能要低，因为它将[整个文件加载到内存中](https://github.com/doctrine/dbal/blob/master/lib/Doctrine/DBAL/Tools/Console/Command/ImportCommand.php#L80)。

否则，我建议您使用自己的[Symfony Console Command](https://github.com/symfony/Console)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-10-22T08:02:54.883

就我而言，它是：

```
php bin/console doctrine:database:import my_sql_file.sql 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-09-21T09:57:52.350

2021 年 9 月状态：

我宁愿相信 Doctrine\Bundle\DoctrineBundle\Command\Proxy\ImportDoctrineCommand 中的代码，它在执行函数中调用弃用警告。忽略弃用警告不是好的编程习惯。由于开销，调用 dual:run-sql 效率不够高。或者，您也可以在操作系统级别调用例如mysql。这会在多用户环境中导致问题，例如因为必须在命令行上指定数据库密码。另外，服务器也必须激活这个功能；exec() 在许多环境中出于安全原因被关闭，尤其是在低成本供应商的情况下。此外，这个函数不会是数据库抽象的。这种抽象是 Doctrine 最突出的特征之一。

因此，我建议您自己读取 SQL 数据并逐行执行（参见 entityManager->createNativeSQL() 函数）。然后，您就有更好的可能性对可能的错误做出反应。

# javascript - html5画布在同一行写入多种字体

> ID：12323696
> 
> 赞同：0
> 
> 时间：2012-09-07T18:44:41.513
> 
> 标签：javascript, html, canvas, html5-canvas

我可以这样填写画布：

这是我想做的一个**例子**

**这是****我想做**的一个例子

 **所以我在 html 代码中收到了我的字符串，但我解析了所有的字符串，我用我的服务器`<strong>`中的 #b# 和所有`</br>`的 \n 替换了 de。

所以我在我的javascript中有这个：

```
c.font = font_size + ' ' + font_family;
          c.fillStyle = color;
          c.textAlign = 'start';
          c.textBaseline = 'top';
          if (this.text_width == 0){  
                  this.text_width = 1024;
          }else{
            this.text_width = this.text_width;
          }
          var DEBUG = true;

          var draw = x !== null && y !== null;

          if (font_size =="8pt" || font_size =="10pt"){
            var lineHeight = 15;
          }

          if (font_size =="11pt" || font_size =="12pt"){
            var lineHeight = 17;
          }
          if (font_size =="14pt" || font_size =="16pt"){
            var lineHeight = 19;
          }
          if (font_size =="18pt" || font_size =="20pt"){
            var lineHeight = 23;
          }
          if (font_size =="22pt" || font_size =="24pt"){
            var lineHeight = 29;
          }
          if (font_size =="26pt" || font_size =="28pt"){
            var lineHeight = 34;
          }
          if (font_size =="30pt" || font_size =="32pt"){
            var lineHeight = 38;
          }
          if (font_size =="34pt"|| font_size =="36pt"){
            var lineHeight = 41;
          }
          if (font_size =="38pt" || font_size =="40pt"){
            var lineHeight = 45;
          }
          if (font_size =="42pt" || font_size =="44pt"){
            var lineHeight = 50;
          }

          fitWidth = this.text_width;
          text = text.replace(/(\r\n|\n\r|\r|\n)/g, "\n");
          sections = text.split("\n");

          var i, str, wordWidth, words, currentLine = 0,
              maxHeight = 0,
              maxWidth = 0;

          var printNextLine = function (str) {
            if (typeof String.prototype.startsWith != 'function') {
              // see below for better implementation!
              String.prototype.startsWith = function (str){
                return this.indexOf(str) == 0;
              };
            }
                  if (draw) {
                  comp=0;
                  comp2=0;
                  if (str.startsWith("#b#")){
                  bold=str.split("#b#");

                  //alert(bold);
                  //alert(bold);
                  for(i=0;i<bold.length;i++){
                  if(i%2!=0){
                  c.font = "Bold "+font_size + ' ' + font_family;
                  if(i==0){
                  c.fillText(bold[i], x, y + (lineHeight * currentLine));
                  }else{
                  for(var a=0;a<i;a++){
                  comp+=c.measureText(bold[a]).width
                  }

                  c.fillText(bold[i], x+comp, y + (lineHeight * currentLine));
                  }

                  }else{
                  c.font = font_size + ' ' + font_family;
                  for(var b=0;b<i;b++){
                  comp2+=c.measureText(bold[b]).width
                  }
                  c.fillText(" "+bold[i], x+comp2, y + (lineHeight * currentLine));
                  }
                  }
                  }else{
                  if (str.indexOf("#b#") != -1){
                  bold=str.split("#b#");
                  for(i=0;i<bold.length;i++){
                  if(i%2==0){

                  if(i==0){
                  c.font = font_size + ' ' + font_family;
                  c.fillText(bold[i], x, y + (lineHeight * currentLine));
                  }else{
                  for(var a=0;a<i;a++){
                  comp+=c.measureText(bold[a]).width
                  }
                  c.font = font_size + ' ' + font_family;
                  c.fillText(bold[i], x+comp, y + (lineHeight * currentLine));
                  }

                  }else{
                  c.font = "Bold "+font_size + ' ' + font_family;
                  for(var b=0;b<i;b++){
                  comp2+=c.measureText(bold[b]).width
                  }
                  c.fillText(" "+bold[i], x+comp2, y + (lineHeight * currentLine));
                  }
                  }

                  }else{
                  c.font = font_size + ' ' + font_family;
                  c.fillText(str, x, y + (lineHeight * currentLine));
                  }

                  }
                  }

                  currentLine++;
                  wordWidth = c.measureText(str).width;
                  if (wordWidth > maxWidth) {
                      maxWidth = wordWidth;

                  }
              };

          for (i = 0; i < sections.length; i++) {
              words = sections[i].split(' ');
              index = 1;

              while (words.length > 0 && index <= words.length) {

                  str = words.slice(0, index).join(' ');
                  wordWidth = c.measureText(str).width;

                  if (wordWidth > fitWidth) {
                      if (index === 1) {
                          // Falls to this case if the first word in words[] is bigger than fitWidth
                          // so we print this word on its own line; index = 2 because slice is
                          str = words.slice(0, 1).join(' ');
                          words = words.splice(1);
                      } else {
                          str = words.slice(0, index - 1).join(' ');
                          words = words.splice(index - 1);
                      }

                      printNextLine(str);

                      index = 1;
                  } else {
                      index++;
                  }
              }

              // The left over words on the last line
              if (index > 0) {
                  printNextLine(words.join(' '));
              }

          }

          maxHeight = lineHeight * (currentLine);

          if (DEBUG) {
              if(maxWidth < this.text_width){
              maxWidth =this.text_width;
              }  
              c.strokeRect(x, y, maxWidth, maxHeight); 
          }

          if (!draw) {
              return {
                  height: maxHeight,
                  width: maxWidth
              };
          } 
```

但是如果我的字符串有两行，并且第一行以粗体开头，则第二行不会出现在画布中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T13:16:06.553

我重写了方法PrintNextLine，它工作正常。

```
 var printNextLine = function (str) {
          if (typeof String.prototype.startsWith != 'function') {
              // see below for better implementation!
              String.prototype.startsWith = function (str){
                return this.indexOf(str) == 0;
              };
            }
          if (draw) {
              var comp=0;
              var comp2=0;
              var comp_2=0;
              var comp2_2=0;
              if (str.startsWith("#b#")){
                  bold=str.split("#b#");
                  for(var i=0;i<bold.length;i++){
                      if(i%2!=0){
                          for(var a=0;a<i;a++){
                              comp+=c.measureText(bold[a]).width
                          }
                          c.font = "Bold "+font_size + ' ' + font_family;
                          c.fillText(bold[i], x+comp, y + (lineHeight * currentLine));
                          comp=0;
                      }else{
                          for(var b=0;b<i;b++){
                              comp2+=c.measureText(bold[b]).width
                          }
                          c.font = font_size + ' ' + font_family;
                          c.fillText(bold[i], x+comp2, y + (lineHeight * currentLine));
                          comp2=0;
                      }
                  }  

              }else{
                  if (str.indexOf("#b#") != -1){
                      bold_2=str.split("#b#");
                      for(var i=0;i<bold_2.length;i++){
                          if(i%2==0){
                              for(var a=0;a<i;a++){
                                  comp_2+=c.measureText(bold_2[a]).width
                              }
                              c.font = font_size + ' ' + font_family;
                              c.fillText(bold_2[i], x+comp_2, y + (lineHeight * currentLine));
                              comp_2=0;
                          }else{
                              for(var b=0;b<i;b++){
                                  comp2_2+=c.measureText(bold_2[b]).width
                              }
                              c.font = "Bold "+font_size + ' ' + font_family;
                              c.fillText(bold_2[i], x+comp2_2, y + (lineHeight * currentLine));
                              comp2_2=0;
                          }
                      }
                  }else{
                      c.font = font_size + ' ' + font_family;
                      c.fillText(str, x, y + (lineHeight * currentLine));
                  }

              }

          }

            currentLine++;
            wordWidth = c.measureText(str).width;
            if (wordWidth > maxWidth) {
                maxWidth = wordWidth;

                  }
                    }; 
```**

# ios - 将开发人员配置文件导入 xcode：证书灰显

> ID：12323699
> 
> 赞同：8
> 
> 时间：2012-09-07T18:45:01.977
> 
> 标签：ios, xcode

我已经坚持了好几个小时......我从我的开发者帐户下载了证书，我还下载了 WWDR 中间证书。当我从 xcode 内部单击 Import Developer Profile 时，所有这些证书都显示为灰色。有什么想法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-02-18T08:09:11.720

您可以将开发人员配置文件导入 Xcode，该文件具有由 Xcode 导出的**.developerprofile扩展名。**Xcode->首选项->帐户->[设置图标]->导出帐户。

从 xcode 6.x 开始，Xcode 仅使用分发证书导出 ipa。因此，您必须在钥匙串中安装有效的分发证书。

如果您设置开发人员证书并尝试导出然后

如果没有在开发者门户中创建分发证书，则 xcode 将自动创建它。

如果分发证书已由其他 mac 创建，并且您尚未在您的 mac 中安装，则 Xcode 将显示消息**“您的帐户已经具有有效的 iOS 分发证书”** ![在此处输入图像描述](../Images/c87a64c351dd9594ab3e5c08be846e5b.png)

然后，您可以通过 .p12 文件安装分发证书，该文件由旧 mac 中的钥匙串导出，也可以通过 .developerprofile 扩展名。由 xcode 从旧 mac 导出或撤销现有证书并创建新证书并安装

然后从 xcode 中删除帐户并再次添加。然后再次尝试构建。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-07T19:20:48.470

Bundle Identifier 和您的配置文件 Id 应该匹配。检查

# java - Java 小程序 NoClassDefFound 错误

> ID：12323701
> 
> 赞同：0
> 
> 时间：2012-09-07T18:45:08.920
> 
> 标签：java, html, applet, noclassdeffounderror

我有一个直接在我的 html 页面中的小程序。它使用 4 个其他文件。我收到 NoClassDefFound 错误。我的 html 文件与我的 .class 文件位于同一目录中，如下所示：

```
<html>
<body>
<h1>Here is my Asteroids game!</h1>
<applet codebase = "." code = "Asteroids.class" name = "Asteroids" width = "640" height = "480" hspace = "0" vspace = "0" align = "middle">
</applet>
</body>
</html> 
```

我正在使用 Internet Explorer，我的其他小程序工作正常。我需要在我的`<applet>`标签中包含其他文件吗？

完整错误：

```
Java Plug-in 10.6.2.24
Using JRE version 1.7.0_06-b24 Java HotSpot(TM) Client VM
User home directory = C:\Users\Stafford
----------------------------------------------------
c:   clear console window
f:   finalize objects on finalization queue
g:   garbage collect
h:   display this help message
l:   dump classloader list
m:   print memory usage
o:   trigger logging
q:   hide console
r:   reload policy configuration
s:   dump system and deployment properties
t:   dump thread list
v:   dump thread stack
x:   clear classloader cache
0-5: set trace level to <n> 
```

堆栈跟踪：

```
asteroids:(wrong name asteroids/Asteroids) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T19:13:35.980

快速搜索错误，我遇到了其他人有类似的问题和答案。试试那边的建议：[Java applet Error ... 怎么了？](https://stackoverflow.com/questions/6009767/java-applet-error-what-is-wrong#answer-6009900)

我应该提到，最好将您的应用程序打包到一个 jar 文件中，因为它的类文件数量开始增长。在这种情况下，如果 javascript 是可以接受的，您可能需要考虑使用部署库之一，例如 DeployJava.js 或用于 JavaFX 小程序的更新的 dtjava.js。（仍然适用于常规小程序 iirc）

如果您计划使用需要签名小程序的任何受限功能，您也需要走这条路。（如文件 i/o）

# objective-c - 操作、方法和线程

> ID：12323707
> 
> 赞同：1
> 
> 时间：2012-09-07T18:45:22.550
> 
> 标签：objective-c, multithreading, afnetworking

我有一些代码可以对基于 json 的 web 服务进行 http 调用。这工作正常，但我试图将代码移动到它自己的类，我有一点挂断。当我调用该方法时，主线程只是继续执行下一个命令，而无需等待我的方法的响应。

这是程序主要部分的一些代码

```
[newcall run];
    NSLog(@"%@",[newcall status]);
    NSArray *resultarray= [newcall returndata];
    for (NSString *element in resultarray) {
        NSLog(@"%@",element);
} 
```

我的标题

```
#import "AFHTTPClient.h"

@interface jsoncall : AFHTTPClient
{
    NSString* Date;
    NSString* apps;
    NSString* data1;
    NSURL* url;
    NSString* Path;
    NSArray* returndata;
    NSString* status;
}

-(void) setApp: (NSString *)input;

-(void) setData: (NSString *)input;

-(void) setURL: (NSString *)input;

-(void) setPath: (NSString *)input;

-(int) run;

-(NSArray *) returndata;
-(NSString *) status;

@end 
```

我的运行方法

```
-(int) run
{
    __block int success;
    NSDictionary* jsonDictionary=[NSDictionary dictionaryWithObject: data1 forKey:@"data"];
    NSString* jsonString = [jsonDictionary JSONRepresentation];
    AFHTTPClient *httpClient=[[AFHTTPClient alloc] initWithBaseURL:url];
    NSDictionary *params =[NSDictionary dictionaryWithObjectsAndKeys:
                           apps,@"app",
                           jsonString,@"smpdata",nil];
    NSMutableURLRequest *request = [httpClient requestWithMethod:@"POST" path:Path parameters:params];

    AFJSONRequestOperation *operation = [AFJSONRequestOperation JSONRequestOperationWithRequest:request
                    success:^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON) {
                        NSArray *dataarray=[JSON valueForKey:@"Data"];
                        status= [NSString stringWithFormat:@"%@",[JSON valueForKeyPath:@"Status"]];
                        NSLog(@"%@",status);
                        returndata= dataarray;
                        success=1;
                        NSLog(@"Success: Made it here");
                    }
                    failure:^(NSURLRequest *request, NSHTTPURLResponse *response, NSError *error,id JSON)
                    {
                        success=0;
                        NSLog(@"Error: Made it here");
                    }
    ];

    [operation start];
    [operation waitUntilFinished];
    return success;
} 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-07T21:30:50.743

我使用的方法是异步的，因此我必须通过从完成块调用它来链接下一组处理。当最终的应用程序完成后，我们可能会这样做，但也有这个解决方案。

[在 AFNetworking 请求中等待完成块完成](https://stackoverflow.com/questions/10670892/waiting-for-completion-block-to-complete-in-an-afnetworking-request)

通过将 AFJSONRequestOperation 切换到 NSURLConnection，我可以使用同步模式，这意味着请求必须在线程继续运行之前完成。

```
NSMutableURLRequest *request = [httpClient requestWithMethod:@"POST" path:Path parameters:params];

NSURLResponse *response = nil;
NSError *error = nil;

NSData *data=[NSURLConnection sendSynchronousRequest:request returningResponse:&response error:&error];

if (error) {
    NSLog(@"Error: %@",error);
}
else {
    id JSON = AFJSONDecode(data, &error);
    NSArray *dataarray=[JSON valueForKey:@"Data"];
    status= [NSString stringWithFormat:@"%@",[JSON valueForKeyPath:@"Status"]];
    NSLog(@"%@",status);
    returndata= dataarray;

} 
```

对于我们的需要，同步模式现在应该可以正常工作。

**然而**

您不应在 UI 线程上运行同步 Web 调用，因为它会阻塞并使您的 UI 无响应。这意味着您需要将对该类的调用与依赖它的任何其他代码一起放在它自己的线程中。我相信您想查看 NSOperation 的使用，但我是一个 Objective-c 菜鸟，所以我不会在这里添加示例。

# asp.net-mvc-3 - 连接字符串与数据服务调用

> ID：12323709
> 
> 赞同：1
> 
> 时间：2012-09-07T18:45:25.443
> 
> 标签：asp.net-mvc-3, ef-code-first, odata, azure-sql-database

我有 2 个独立的 MVC 3 网站（A 和 B），它们都有自己的 SQL Azure 数据库，它们可能位于也可能不在同一台服务器上。两者都使用 Code First Entity Framework，并将部署到 Windows azure。

网站 A 被视为主网站和数据库。这包含使用我们软件的客户的数据以及用户名和密码。我希望网站 B 在用户登录或注册时连接到网站 A 的数据库。网站 B 还需要访问网站 A 的数据库，以便在用户登录后获取客户的一些数据。

现在我只有一个网站 B 访问网站 A 的数据库，但将来我会有更多这样的网站，例如网站 B，出于同样的原因访问主数据库。

我的问题是在这些较小的网站和主数据库之间发送和接收数据的最佳方式是什么？

起初，我只是在网站 B 中使用 2 个具有两个不同上下文的连接字符串（每个 db 一个）。我喜欢这个，因为对象类型都一起流动，没有任何转换要做。但是，我不确定这是否是最好和最安全的方法。

我一直在寻找的另一个选择是 oData Services。我确实喜欢将所有内容分开并在需要来自主数据库的数据时调用服务的想法。我遇到的问题是将数据从服务传输到模型的对象中。我不得不做像这样的 foreach 语句这样讨厌的事情：

```
public ActionResult GetMovies()
    {
        var ctx = new MovieODataService.MovieContext(new Uri("http://localhost:54274/MovieService.svc/"));

        DataServiceQuery<MovieODataService.Movie> query = ctx.Movies;

        var response = query.Execute() as QueryOperationResponse<MovieODataService.Movie>;

        var model = new MovieModel();

        model.Movies = new List<Movie>();

        foreach (var item in response)
        {
            model.Movies.Add(new Movie
                                 {
                                     Title = item.Title,
                                     ReleaseDate = item.ReleaseDate
                                 });
        }

        return View(model);
    } 
```

我也愿意接受任何其他建议。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T17:28:26.423

OData 在很多事情上都很棒，但它真正的亮点在于对（最好是）模式化信息提供丰富的可查询性。这并不适合进行身份验证调用。

您是否看过更传统的身份验证协议，例如[OAuth](http://en.wikipedia.org/wiki/OAuth)？这似乎更适合您想要实现的目标。

# objective-c - 有没有一种情况可以在 ARC 下将 self 保留在一个块中？

> ID：12323723
> 
> 赞同：0
> 
> 时间：2012-09-07T18:46:24.553
> 
> 标签：objective-c, automatic-ref-counting, objective-c-blocks

假设我的班级看起来像

```
@interface MyClass {
    MyObject* _object;
    dispatch_queue_t _queue;
}
-(void)myBlocksUsingMethod;
@end 
```

忽略初始化队列的语义，现在我实现

```
-(void)myBlockUsingMethod {
    dispatch_async(_queue, ^{
        [_object doSomething];
    });
} 
```

正如上面的代码所示，在块中保留 self 可以吗？

我可以像这样重写块

```
-(void)myBlockUsingMethod {
    __weak MyClass* weakSelf = self;
    dispatch_async(_queue, ^{
        MyClass* strongSelf = weakSelf;
        [strongSelf._object doSomething];
    });
} 
```

但是现在是否有必要测试`strongSelf == nil`在这种情况下是否考虑到 my`_queue`是我保留的对象的 iVar？

另外，如果我的`doSomething`方法是将引用的另一个块推`self`送到同一个队列中会发生什么？这会导致保留周期吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T22:58:33.707

回答标题中的问题：是的，有很多理由这样做。您可能肯定知道该对象的寿命会超过该块，或者您可能**希望**创建一个保留循环，该循环将在以后的特定时间手动中断。

但是，在您的代码中，您正在做一些非常错误的事情。第一种方法（创建对 self 的隐式强引用的方法）应生成警告。

第二个不应该编译。你有这个：

```
[strongSelf._object doSomething]; 
```

这是调用一个名为的属性`_object`，我怀疑是这种情况。所以，也许你的意思是：

```
[strongSelf.object doSomething]; 
```

在这种情况下，你会没事的，因为 if `strongSelf`is `nil`then 发送到的消息`nil`实际上什么都不做。

或者，如果没有属性，也许你真的是这个意思：

```
[strongSelf->_object doSomething]; 
```

在这种情况下，如果 strongSelf 为 nil，您的程序将会崩溃，因为这不是向空指针发送消息`nil`而是取消引用空指针。如果你做后者，你需要`nil`明确地检查。

由于您不在`_queue`该块中访问，因此该访问很好。对块内 iVar 的任何直接访问都必须创建一个保留循环以确保对象仍然存在，或者它必须播放弱-强-dance 并检查 nil。

如果您在多行中使用该对象，您还需要执行弱强舞蹈，因为弱对象可以在访问之间释放（运行时保证如果 __weak 不是 nil 并接受消息，它将保持直到该消息被处理为止）。

```
[weakObject message1];
// weakObject can become nil here
[weakObject message2]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T22:40:49.803

应该没问题，因为保留周期是暂时的。当分派的动作完成后，它会从队列中移除，因此不再保留该块。

# windows - 如何在 Windows 中获取控制台的名称？

> ID：12323725
> 
> 赞同：1
> 
> 时间：2012-09-07T18:46:28.157
> 
> 标签：windows, console

是否可以在 Windows 中获取控制台的名称？就像Unix 系统中的 C 函数*ttyname所做的那样*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T19:09:12.850

您可以使用 WinAPI[`GetConsoleTitle`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms683174%28v=vs.85%29.aspx)函数来检索它。

您可能会发现[指向所有控制台功能的链接](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682073%28v=vs.85%29.aspx)很有用。

您没有指定语言，所以[这是](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686050%28v=vs.85%29.aspx)MSDN 中的 C++ 语言

```
#include <windows.h>
#include <tchar.h>
#include <conio.h>
#include <strsafe.h>

int main( void )
{
   TCHAR szOldTitle[MAX_PATH];
   TCHAR szNewTitle[MAX_PATH];

   // Save current console title.

   if( GetConsoleTitle(szOldTitle, MAX_PATH) )
   {
      // Build new console title string.

      StringCchPrintf(szNewTitle, MAX_PATH, TEXT("TEST: %s"), szOldTitle);

      // Set console title to new title
      if( !SetConsoleTitle(szNewTitle) )
      {
         _tprintf(TEXT("SetConsoleTitle failed (%d)\n"), GetLastError());
         return 1;
      }
      else
      {
         _tprintf(TEXT("SetConsoleTitle succeeded.\n"));
      }
   }
   return 0;
} 
```

# javascript - jquery validate 1.8.1 "jQuery" is undefined error IE8

> ID：12323729
> 
> 赞同：4
> 
> 时间：2012-09-07T18:46:54.210
> 
> 标签：javascript, jquery, internet-explorer-8

首先 - 是的 - 在验证插件或任何其他 js 文件之前加载 jQuery。

获取 'jQuery' 未定义 - jquery.validate-1.8.1.min.js IE8 中的第 13 行字符 1。FF、Chrome 和 Safari 都可以很好地验证表单。

```
<title>app title</title>
<script src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.7.2.min.js"></script>
<script src="path_to_file/jquery.validate-1.8.1.min.js"></script>
  // CSS and other scripts are here //
</head>
<body> 
```

以上内容来自一个通用头文件。我在不同的脚本块中的页面本身上有我的实际验证规则（但我也在 jquery 下的头文件中尝试过它并验证脚本块 - 在 IE8 上没有骰子。

如果我继续浏览 IE8 调试器，无论何时你点击：

```
$(document).ready(function() {.... 
```

IE 向调试器抛出关于“预期对象”的错误并指向“$”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T21:12:08.983

我发现了错误 - 对 CDN 的调用是 http:// 并且需要是 https://。尽管 IE 询问我是否要加载可能不安全的内容并且我说是的，但它仍然从未真正加载过 jQuery。故事的士气 - 不要相信 IE ......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T18:49:25.620

尝试让 google 托管脚本，另外最好在包含脚本时指定 MIME 类型“text/javascript”。

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js" type="text/javascript"></script> 
```

# android - AudioTrack - 如何知道声音何时开始/结束？

> ID：12323735
> 
> 赞同：8
> 
> 时间：2012-09-07T18:47:42.370
> 
> 标签：android, marker, audiotrack

我正在使用音轨以流模式播放不同的声音。我想知道是否有办法知道每个声音何时/结束播放。

我像这样创建音轨：

```
AudioTrack tmpAudioTrack = new AudioTrack(
        STREAM_TYPE, 
        SAMPLE_RATE, 
        CHANNEL_CONFIG_TYPE, 
            AUDIO_FORMAT_TYPE, 
        getOptimalBufferSize(), 
        AUDIO_TRACK_MODE);' 
```

并在后台线程中启动它：

```
backround_thread = new Thread(new MyRunnable(aTrack));
    backround_thread.start(); 
```

我在可运行文件中写出这样的每个声音：

```
byte generatedSnd[] = new byte[2 * beepSamples];
<code for filling the buffer with sound here>
int bytesWritten = track.write(generatedSnd, 0, generatedSnd.length); 
```

是否可以使用任何 AudioTrack API（如 setNotificationMarkerPosition、setLoopPoints 或 setPositionNotificationPeriod）来完成此操作？它们是如何工作的？

每个声音可以是不同的持续时间。我认为这是关键。

我不完全理解这些 API 的文档。每一帧都与样本相同吗？如何为每个声音的开始/结束位置指定一个标记？

谢谢，

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-11T23:29:06.877

这是我发现的：

对我来说，帧就是样本——声音的持续时间乘以采样率。

要使用 AudioTrack.setPositionNotificationPeriod，您需要传递一定数量的样本。这意味着如果您传递 200 个样本，回调将每 200 个样本被调用一次，循环。

```
tmpAudioTrack.setPositionNotificationPeriod(duration * sampleRate); 
```

要使用 .setNotificationMarkerPosition，您还需要传递一定数量的样本。但是，这是绝对的，不像 period API 那样是相对的。因此，如果您想确定声音何时结束，请传递样本量（总音轨持续时间 * sampleRate）。

```
tmpAudioTrack.setNotificationMarkerPosition(duration * sampleRate); 
```

但是，如果你已经在播放，在你的音轨中间，并且想要添加一个标记以便你会在 3 秒后被回调，那么你需要添加音轨的当前播放头，比如这个：（你的持续时间是 3 秒）

```
tmpAudioTrack.setNotificationMarkerPosition(tmpAudioTrack.getPlaybackHeadPosition() + (duration * sampleRate)); 
```

这就是您注册期间和标记通知的方式：

```
tmpAudioTrack.setPlaybackPositionUpdateListener(new OnPlaybackPositionUpdateListener(){

    @Override
    public void onMarkerReached(AudioTrack arg0) {

    }

    @Override
    public void onPeriodicNotification(AudioTrack arg0) {

    }

}); 
```

# ios - UILabel -- WordWrap -- 框架问题

> ID：12323738
> 
> 赞同：0
> 
> 时间：2012-09-07T18:47:58.040
> 
> 标签：ios, uitableview

我的应用程序中的 UILabel 行为异常，我想知道是否有人对如何解决它有任何想法或建议。

1.首先我设置了标签的框架，它们都将出现在 tableView 的单元格内。

```
CGRect CellFrame = CGRectMake(0, 0, 300, 75);
CGRect Label1Frame = CGRectMake(10, 5, 290, 20);
CGRect Label2Frame = CGRectMake(0, 20, 290, 50);
UILabel *lblTemp;

UITableViewCell *cell = [[UITableViewCell alloc] initWithFrame:CellFrame        reuseIdentifier:cellIdentifier]; 
```

1.  然后我设置标签的属性

1.

```
lblTemp = [[UILabel alloc] initWithFrame:Label1Frame];
lblTemp.tag = 1;
lblTemp.font = [UIFont fontWithName:@"Helvetica" size:12.0];
lblTemp.textColor = [UIColor blackColor];
lblTemp.lineBreakMode = UILineBreakModeWordWrap;
lblTemp.numberOfLines = 0;
[cell.contentView addSubview:lblTemp];

//Initialize Label with tag 2.
lblTemp = [[UILabel alloc] initWithFrame:Label2Frame];
lblTemp.tag = 2;
lblTemp.font = [UIFont fontWithName:@"Helvetica" size:10];
lblTemp.textColor = [UIColor lightGrayColor];
lblTemp.lineBreakMode = UILineBreakModeWordWrap;
lblTemp.numberOfLines = 0;
[cell.contentView addSubview:lblTemp];

return cell; 
```

3.然后我设置单元格的内容

```
//set up the cell

UILabel *lblTemp1 = (UILabel *)[cell viewWithTag:1];
UILabel *lblTemp2 = (UILabel *)[cell viewWithTag:2];

CaseFeed *aCaseFeed = [[CaseFeed alloc] init];
aCaseFeed = [CaseFeedbook objectAtIndex:indexPath.row];

lblTemp1.text = [NSString stringWithFormat:@"%@", aCaseFeed.title];
lblTemp2.text = [NSString stringWithFormat:@"%@", aCaseFeed.description];

cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;

return cell; 
```

问题： lblTemp2（单元格中的第二个标签）的内容将跨越 2 行或更多行。在运行时，填充 lblTemp2 的文本时，前两行完美显示，但第三行从框架左侧开始。

关于如何解决这个问题的任何想法？为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T19:21:31.633

使用以下代码设置 tableView 的单元格

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }
    else 
    {
        for (id v in cell.contentView.subviews) 
        {
            UIView *realV = (UIView *) v;
            [realV removeFromSuperview];
        }
    }
    CGRect CellFrame = CGRectMake(0, 0, 300, 75);
    CGRect Label1Frame = CGRectMake(10, 5, 290, 20);
    CGRect Label2Frame = CGRectMake(0, 20, 290, 50);

    UILabel *label1 = [[UILabel alloc] init];
    label1.frame = Label1Frame;
    label1.tag = 1;
    label1.font = [UIFont fontWithName:@"Helvetica" size:12.0];
    label1.textColor = [UIColor blackColor];
    label1.lineBreakMode = UILineBreakModeWordWrap;
    label1.numberOfLines = 0;
    [cell.contentView addSubview:label1];

    UILabel *label2 = [[UILabel alloc] init];
    label2.frame = Label2Frame;
    label2.tag = 2;
    label2.font = [UIFont fontWithName:@"Helvetica" size:10.0];
    label2.textColor = [UIColor lightGrayColor];
    label2.lineBreakMode = UILineBreakModeWordWrap;
    label2.numberOfLines = 0;
    [cell.contentView addSubview:label2];

    CaseFeed *aCaseFeed = [[CaseFeed alloc] init];
    aCaseFeed = [CaseFeedbook objectAtIndex:indexPath.row];

    label0.text = [NSString stringWithFormat:@"%@", aCaseFeed.title];
    label1.text = [NSString stringWithFormat:@"%@", aCaseFeed.description];

    cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;
    return cell;
} 
```

希望这可以帮助

# ruby-on-rails - Rails - 尝试使用用户挂钩找出用户何时登录时方法不存在错误 - 设计

> ID：12323742
> 
> 赞同：1
> 
> 时间：2012-09-07T18:48:03.570
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise, ruby-on-rails-3.2

显然 User.first.current_sign_in_at 是我想要使用的，但是如何在挂钩中添加它呢？

```
before_save :login_hook, :if => current_sign_in_at_changed? 
```

但我得到的方法不存在。

在这里它似乎工作：

[使用 Rails + Devise 在用户注册/登录时执行 JS 代码](https://stackoverflow.com/questions/7779321/execute-js-code-on-user-sign-up-sign-in-with-rails-devise)

我在模型中设计了 :trackable ，在我的迁移中设计了 t.trackable 。数据库值也更新了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T18:49:16.013

现在，忘记钩子，只需尝试使用

```
if (Time.new - current_user.last_sign_in_at) < 600 # seconds, so 10 minutes
  do stuff
else
  # do other stuff, probably a redirect
  # possibly  sign_out_and_redirect(resource_name)
end 
```

您可能希望在您的 application_controller 中使用它以便适用于所有人。

# ant - 如何使用 Ant 有条件地执行不同平台的批处理脚本？

> ID：12323743
> 
> 赞同：1
> 
> 时间：2012-09-07T18:48:09.280
> 
> 标签：ant

我正在尝试使用 Ant 构建脚本来构建一个已经具有 nmake (Visual Studio) 构建脚本的项目。我不想重做整个构建脚本，而是想让 Ant 重用现有的脚本。

所以，我有这样的东西适用于 Windows Mobile 6 ARMV4I 构建：

```
<project ...>
  <target name="-BUILD.XML-COMPILE" depends="-init, -pre-compile">
    <exec executable="cmd">
      <arg value="/c"/>
      <arg line='"${g.path.project}\build-wm6-armv4i.bat"'/>
    </exec>
    <antcall target="-post-compile" inheritall="true" inheritrefs="true" />
  </target>
</project> 
```

但我也希望它适用于其他平台，如 Win32 x86 和 Windows CE6 x86。

如何让 Ant 脚本区分它应该执行哪个批处理文件来执行构建？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T21:59:00.730

该[**`<os>`**](http://ant.apache.org/manual/Tasks/conditions.html#os)条件可用于根据操作系统和硬件架构设置属性。可以使用`if`和`unless`属性有条件地执行目标。

```
<?xml version="1.0" encoding="UTF-8"?>
<project name="build" basedir="." default="BUILD.XML-COMPILE">

  <condition property="Win32-x86">
    <and>
      <os family="windows" />
      <or>
        <os arch="i386" />
        <os arch="x86" />
      </or>
    </and>
  </condition>

  <condition property="Win-ARMv4">
    <os family="windows" arch="armv4" />
  </condition>

  <target name="-BUILD.XML-COMPILE_Win-ARMv4" if="Win-ARMv4" 
      depends="-init, -pre-compile">
    <exec executable="cmd">
      <arg value="/c"/>
      <arg line='"${g.path.project}\build-wm6-armv4i.bat"'/>
    </exec>
    <antcall target="-post-compile" inheritall="true" inheritrefs="true" />
  </target>

  <target name="-BUILD.XML-COMPILE_Win32-x86" if="Win32-x86"
      depends="-init, -pre-compile">
    <exec executable="cmd">
      <arg value="/c"/>
      <arg line='"${g.path.project}\build-win32-x86.bat"'/>
    </exec>
    <antcall target="-post-compile" inheritall="true" inheritrefs="true" />
  </target>

  <!-- Execute the correct target automatically based on current platform. -->
  <target name="BUILD.XML-COMPILE"
      depends="-BUILD.XML-COMPILE_Win-ARMv4,
               -BUILD.XML-COMPILE_Win32-x86" />
</project> 
```

批处理文件的路径是单引号和双引号，因此带有空格的文件路径不会破坏脚本。我没有在 Windows Mobile 6 ARMV4I 上测试过这个脚本，所以您需要使用下面的 Ant 目标来验证名称。

```
<target name="echo-os-name-arch-version">
  <echo message="OS Name is:         ${os.name}" />
  <echo message="OS Architecture is: ${os.arch}" />
  <echo message="OS Version is:      ${os.version}" />
</target> 
```

相关堆栈溢出问题：

*   [如何在 ANT 中检测 Windows 操作系统](https://stackoverflow.com/q/9566347/1164465)
*   [使用ant检测os并设置属性](https://stackoverflow.com/q/453170/1164465)

# c++ - 如何将文件输入 C++ 并比较控制台输入

> ID：12323744
> 
> 赞同：1
> 
> 时间：2012-09-07T18:48:09.340
> 
> 标签：c++, file, input, fstream

我正在做我的家庭作业，但我卡住了，因为在作业中我们必须要求用户输入文件名，还要输入 wc cc 或 lc（文件的字数、字符数和行数。例如, wc filename.txt. 我想检查文件以查看它是否有效，我理解并且我知道如何比较用户输入以确定要运行的不同类型的函数，但我不明白你怎么能做到一起。有什么想法吗？这就是我目前所拥有的。

```
#include <iostream>
#include <string>
#include <fstream>

using namespace std;

int main()
{
string line;
string file;

ifstream input; //input file stream
int i;

cout << "Enter a file name" << endl;

while(true){

    cout << ">" ;
    getline(cin,file);

    input.open(file.c_str());

     if (input.fail()) {
        cerr << "ERROR: Failed to open file " << file << endl;
        input.clear();
     }
     else {
        i = 0;
        while (getline(input, line))

            if(line == "wc"){

            cout << "The word count is: " << endl;
    }
        else if(line == "cc"){

            cout << "The character count is: " << endl;
    }
        else if(line == "lc"){

            cout << "The line count is: " << endl;
    }
        else if(line == "exit"){

            return 0;
    }
        else{

            cout << "----NOTE----" << endl;
            cout << "Available Commands: " << endl;
            cout <<"lc \"filename\"" << endl;
            cout <<"cc \"filename\"" << endl;
            cout <<"wc \"filename\"" << endl;
            cout <<"exit" << endl;
    }

     }

}

return 0;
}

void wordCount(){
   //TBD
}

void characterCount(){
    //TBD

}

void lineCount(){
  //TBD

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T23:39:16.777

我想你在问如何验证多个参数：命令和文件。

一个简单的策略是具有如下功能：

```
#include <fstream> // Note: this is for ifstream below

bool argumentsInvalid(const string& command, const string & command) {
    // Validate the command
    // Note: Not ideal, just being short for demo
    if("wc" != command && "cc" != command && "lc" != command) {
        std::cout << "Invalid command" << std::endl;
        return false;
    }

    // Validate the file
    // Note: This is a cheat that uses the fact that if its valid, its open.
    std::ifstream fileToRead(filename);
    if(!fileToRead) {
        std::cout << "Invalid file: \"" << filename << "\"" << std::endl;
        return false;
    }

    return true;
    // Note: This does rely on the ifstream destructor closing the file and would mean
    // opening the file twice.  Simple to show here, but not ideal real code.
} 
```

如果要在返回错误之前评估所有参数，请在该函数的顶部插入一个标志，例如：

```
// To be set true if there is an error
bool errorFound = false; 
```

并将条件中的所有回报更改为：

```
errorFound = true; 
```

最后返回：

```
return !errorFound; 
```

用法：

```
....

if(argumentsInvalid(command, filename)) {
    std::cout << "Could not perform command.  Skipping..." << std::endl;
    // exit or continue or whatever
}

// Now do your work 
```

注意：这里的具体有效性测试过于简化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T18:53:40.327

您必须在用户输入中找到命令和文件名之间的空格，然后在找到空格的位置拆分字符串。像这样的东西

```
cout << "Enter a command\n";
string line;
getline(cin, line);
// get the position of the space as an index
size_t space_pos = line.find(' ');
if (space_pos == string::npos)
{
   // user didn't enter a space, so error message and exit
   cout << "illegal command\n";
   exit(1);
}
// split the string at the first space
string cmd = line.substr(0, space_pos);
string file_name = line.substr(space_pos + 1); 
```

这是未经测试的代码。

你可以做得比这更好，例如，如果用户在命令和文件名之间输入两个空格，这将不起作用。但是这种工作很快就会变得非常乏味。由于这是一项任务，我很想继续做更有趣的事情。如果你有时间，你可以随时回来改进。

# jquery - jQuery：mouseup 和 mousedown 点击处理程序

> ID：12323745
> 
> 赞同：2
> 
> 时间：2012-09-07T18:48:18.947
> 
> 标签：jquery

我正在尝试在 mouseup 和 mousedown 事件上替换 lastClick div 的文本，但此代码不起作用。有什么建议么？

```
$('document').on(

{mousedown: function(){ $('#lastClick').html('down');}}, 

{mouseup: function(){$('#lastClick').html('up');}}

); 
```

HTML

```
<body>
<div id='lastClick'>not clicked yet!</div>
</body> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T18:50:54.570

试试这个：

```
$('#lastClick').on('mousedown', function() {
    $(this).html('down');
});
$('#lastClick').on('mouseup', function() {
    $(this).html('up');
});​ 
```

看这个[活生生的例子](http://jsfiddle.net/dacCy/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-07T18:50:57.747

删除您的报价

```
$(document).on(

{mousedown: function(){ $('#lastClick').html('down');}}, 

{mouseup: function(){$('#lastClick').html('up');}}

); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-07T18:56:58.747

尝试这个

***HTML***

```
<body>
   <div id='lastClick'>not clicked yet!</div>
</body> 
```

***JS代码***

```
$(document).ready(function(){
   $('#lastClick').on(

  {mousedown: function(){ $(this).html('down');}}, 

  {mouseup: function(){$(this).html('up');}}

 ); 
}); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-07T18:54:28.060

尽管[Philippe 发现了您的问题](https://stackoverflow.com/a/12323798/82548)（周围不必要的引号`document`），但我确实认为您将事情复杂化了，尽管可能只是为了证明您的问题。但是，在这种情况下，您在代码中尝试执行的操作可以简单地复制为：

```
$(document).on('mousedown mouseup', function(e){
    $('#lastClick').text(e.type);
});​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/xEwCK/)。

如果您确实需要字符串为`'up'`or `'down'`，那么您可以通过字符串操作稍微修改上述内容：

```
$(document).on('mousedown mouseup', function(e){
    $('#lastClick').text(e.type.replace('mouse',''));
});​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/xEwCK/1/)。

# javascript - JQuery Deferred Ajax，将结果保存在调用对象中

> ID：12323748
> 
> 赞同：1
> 
> 时间：2012-09-07T18:48:23.257
> 
> 标签：javascript, javascript-objects, jquery-deferred

我对 Javascript 中的整个原型想法很陌生，从我到目前为止收集到的内容来看，它基本上是一个用于创建新对象的模板。

无论如何，我有一个对象“Schedule”，它是“PageObject”的子对象。这是 Schedule 对象中的一个函数：

```
Schedule.prototype.serviceSuccessFunction = function(data, status, xqr) {
  var ld;
  ld = Schedule.__super__.serviceSuccessFunction.call(this, data, status, xqr);
  ld.done($.proxy(function(x) {
    return console.log(this);
  }, this));
  ld.done($.proxy(this.render, this));
  return ld.done($.proxy(this.modernizeAndShow, this));
}; 
```

这是 PageObject 的函数的样子（从它的子函数调用）：

```
PageObject.prototype.serviceSuccessFunction = function(data, status, xqr) {
  $.mobile.loading("show");
  return $.when($.mobile.loadPage("pages/" + this.url, {
    pageContainer: $("#" + this.loadOptions.loadSection)
  }));
}; 
```

如您所见，PageObject 正在返回此移动页面加载时的延迟对象。然后我在 Schedule 对象中有自定义的 .done() 函数。这些完成的功能将根据“数据”参数的内容进行渲染。

这个“数据”参数来自另一个延迟对象（使用 $.ajax）。当我在调度成功函数的第一行设置断点时，“数据”被正确地填充了 ajax 调用返回的内容。

现在我的问题是我希望能够使用数据作为参数在 Schedule 中调用不同的函数，或者将数据保存在 Schedule 对象本身上。你认为我将如何将数据对象传递给这些函数？

当我`return console.log(this);`在线上断点时，“this”是Schedule 对象，这要归功于$.proxy。但我找不到“数据”（我想这是有道理的）。理想情况下，我想将“数据”作为参数传递并执行类似的操作

```
ld.done($.proxy(function(data) {
  this.rData = data;
}, this)); 
```

但上面的“data”或“x”只是.ajax 调用的url。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T22:06:52.813

我可能误解了，但你能不能把它放在`this.rData = data;`“完成”功能之外：

```
Schedule.prototype.serviceSuccessFunction = function(data, status, xqr) {
  var ld;
  ld = Schedule.__super__.serviceSuccessFunction.call(this, data, status, xqr);

  this.rData = data;

  ld.done($.proxy(function(x) {
    return console.log(this.rData);
  }, this));
  ld.done($.proxy(this.render, this));
  return ld.done($.proxy(this.modernizeAndShow, this));
}; 
```

然后 rData 在您的委托中可用。

# java - 测试设计：如何在不完全重写的情况下正确测试方法？

> ID：12323753
> 
> 赞同：2
> 
> 时间：2012-09-07T18:48:32.187
> 
> 标签：java, junit, mocking

我有以下类，其中包含一个永远不会更改的硬编码 URL：

```
 public class HttpClient {
        private final String DOWNLOAD_URL = "http://original.url.json";

        public String readJsonDataFromUrl() throws IOException {
            URLConnection urlConnection = getUrlConnection();

            BufferedReader reader = new BufferedReader(new InputStreamReader(urlConnection.getInputStream()));
            StringBuffer content = new StringBuffer();

            String readLine = "";
            while ((readLine = reader.readLine()) != null)  {
                content.append(readLine);
            }

            return content.toString();
        }

        private URLConnection getUrlConnection() throws IOException {
            URL jsonLocator = new URL(DOWNLOAD_URL);

            return jsonLocator.openConnection();
        }
    } 
```

现在想象一下，我希望在我的测试中出现 IOException。在我看来，这样做的唯一方法是在模拟对象中重写完整的类，因为 final 变量：

```
public class HttpClientMock extends HttpClient  {
    private final String DOWNLOAD_URL = "http://wrong.test.url.json";

    @Override
    public String readJsonDataFromUrl() throws IOException {
        URLConnection urlConnection = getUrlConnection();

        BufferedReader reader = new BufferedReader(new InputStreamReader(urlConnection.getInputStream()));
        StringBuffer content = new StringBuffer();

        String readLine = "";
        while ((readLine = reader.readLine()) != null)  {
            content.append(readLine);
        }

        return content.toString();
    }

    private URLConnection getUrlConnection() throws IOException {
        URL jsonLocator = new URL(DOWNLOAD_URL);
        URLConnection urlConnection = jsonLocator.openConnection();

        return urlConnection;
    }
} 
```

但这有点牵强。如果更改原始方法，测试结果可能仍然是肯定的，因为通过此尝试，我实际上不再测试原始类。

如何正确地做到这一点？（我不想只为这个测试使用一个框架，那么有没有设计尝试以一种通用的方式解决这个问题？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T19:32:54.347

Gilbert Le Blanc 的建议的另一个变化是，通过构造函数注入 URL，使 HttpClient 完全不知道 URL。

```
 public class HttpClient {
   private final String url;

   public HttpClient(String url) { this.url = url; }

 } 
```

您可以在 HttpClient 外部某处硬编码 URL（或从配置中读取），并将其注入到您实例化客户端的任何位置。然后在您的测试中，注入一个错误的 url 将是微不足道的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T19:52:10.510

感谢大家，但我认为 Gilbert Le Blanc 的解决方案对于看起来像这样的情况是最可取的：

**原班：**

```
public class HttpClient {
    private final String DOWNLOAD_URL = "http://my.original.json.url";

    public String readJsonDataFromUrl() throws IOException {
        URLConnection urlConnection = getUrlConnection();

        BufferedReader reader = new BufferedReader(new InputStreamReader(urlConnection.getInputStream()));
        StringBuffer content = new StringBuffer();

        String readLine = "";
        while ((readLine = reader.readLine()) != null)  {
            content.append(readLine);
        }

        return content.toString();
    }

    private URLConnection getUrlConnection() throws IOException {
        URL jsonLocator = new URL(getConnectionString());

        return jsonLocator.openConnection();
    }

    protected String getConnectionString()  {
        return DOWNLOAD_URL;
    }
} 
```

**模拟对象：**

```
public class HttpClientMock extends HttpClient  {
    private String downloadUrl = "http://my.original.json.url";

    public HttpClientMock()  {
        super();
    }

    public HttpClientMock(String downloadUrl)  { 
        this.downloadUrl = downloadUrl;
    }

    @Override
    protected String getConnectionString()  {
        return downloadUrl;
    }
} 
```

**和工作测试：**

```
public class HttpClientTest {

    private JSONParser jsonParser = new JSONParser();

    @Test
    public void readJsonDataFromUrlSucceeds() throws IOException, ParseException {
        HttpClient httpClient = new HttpClientMock();

        String jsonString = httpClient.readJsonDataFromUrl();
        JSONObject jsonObject = (JSONObject)jsonParser.parse(jsonString);

        assertTrue(jsonObject.size() > 0);
    }

    @Test(expected = IOException.class)
    public void readJsonDataFromMalformedUrlFails() throws IOException, ParseException {
        HttpClient httpClient = new HttpClientMock("http://malformed");

        httpClient.readJsonDataFromUrl();
    }
} 
```

# sql - SQL查询结果如何插入临时表？

> ID：12323757
> 
> 赞同：74
> 
> 时间：2012-09-07T18:48:42.880
> 
> 标签：sql, sql-server

我有一个 SQL 查询（SQL Server）并生成报告，我想将该确切的报告存储在临时表中，以便以后可以使用它。现在的问题是我需要先创建临时表然后将SQL查询结果存储到其中，还是有什么方法可以动态创建表并存储查询结果？

* * *

## 回答 #1

> 赞同：128
> 
> 时间：2012-09-07T18:50:50.743

看看[SELECT INTO](http://msdn.microsoft.com/en-us/library/ms188029.aspx)。这将为您创建一个新表，如果您愿意，可以通过在表名前加上井号 (#) 作为临时表。

例如，您可以这样做：

```
SELECT * 
INTO #YourTempTable
FROM YourReportQuery 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-09-07T18:51:29.433

您可以使用`select ... into ...`创建和填充临时表，然后查询临时表以返回结果。

```
select *
into #TempTable
from YourTable

select *
from #TempTable 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-07T20:19:14.887

在 MySQL 中：

```
create table temp as select * from original_table 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-07T18:53:46.667

尝试：

```
exec('drop table #tab') -- you can add condition 'if table exists'
exec('select * into #tab from tab') 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-12-07T10:03:38.967

假设您现有的报告查询是

```
Select EmployeeId,EmployeeName 
from Employee 
Where EmployeeId>101 order by EmployeeName 
```

并且您必须将此数据保存到临时表中，然后查询转到

```
Select EmployeeId,EmployeeName 
into #MyTempTable 
from Employee 
Where EmployeeId>101 order by EmployeeName 
```

# knockout.js - 淘汰赛：如何在页面上完成所有绑定时捕获事件？

> ID：12323760
> 
> 赞同：1
> 
> 时间：2012-09-07T18:49:07.990
> 
> 标签：knockout.js

我在这里看到类似的问题讨论特定元素绑定的结束，通常`aferRender`建议使用，但是整个页面绑定完成事件呢？有没有？我需要运行一些不能与绑定并行工作的 jQuery 代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T19:14:26.193

`ko.applyBindings()`是阻塞调用。

为什么不简单地在执行后执行您的 jQuery 代码`ko.applyBindings()`？

# opengl - 具有重叠纹理的 glReadPixels() alpha

> ID：12323762
> 
> 赞同：1
> 
> 时间：2012-09-07T18:49:13.240
> 
> 标签：opengl, opengl-es, textures, alpha, glreadpixels

我正在尝试使用 glReadPixel() 获取纹理的 alpha 值。我遇到的问题是，一旦 alpha 值像素低于 0.5f，它就会开始合并背景对象的 alpha 值。我永远无法获得 0.0f 到 0.49999f 的 alpha 值。有没有办法忽略任何背景对象的 alpha 值并获得顶部纹理或对象的 1 像素 alpha 值？

![在此处输入图像描述](../Images/6a1d33521315e086078fb063dd0be8cd.png)

```
std::vector< float > pixels( 1 * 1 * 4 );
glReadPixels(mouse.x,mouse.y,1,1,GL_RGBA,GL_FLOAT,&pixels[0]);

printf("alpha value = %f", pixels[3]); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T18:56:31.737

> 我正在尝试使用 glReadPixel() 获取纹理的 alpha 值

glReadPixels 从**framebuffer**返回数据，而不是纹理。因此，您将受制于已渲染的所有内容（以及当时使用的混合功能）。

我怀疑您在尝试解决的任何问题上都走错了路。

# jquery - 用jquery修改css

> ID：12323764
> 
> 赞同：0
> 
> 时间：2012-09-07T18:49:15.237
> 
> 标签：jquery

我有一个 ul 列表，下面我使用 jquery 来确定用户是否悬停在 about us 下的子菜单，如果是，则在悬停时设置一些 css。这确实将背景颜色更改为绿色，但是当我将鼠标悬停在绿色上时不会消失？

查询

```
$('ul > li > ul > li a').hover(
    function(){
        var whatami = $(this).parents('li').eq(1).find('a[title]:first').attr('title');
        console.log(whatami);
        if (whatami == 'About Us') {
            //alert(whatami);
            $('.white ul.mega-menu li .sub-container.non-mega li a:hover').css({"background-color":"green"});

        }
    },
    function(){
    }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T18:52:50.933

hover 的工作方式是第一个函数在鼠标进入时执行，第二个函数在鼠标离开时执行。您在第二个函数中没有任何内容，因此这意味着鼠标离开时不会发生任何事情。你需要在第二个函数中做任何你想做的事情：

```
$('ul > li > ul > li a').hover(
function(){
    // make it green
},
function(){
    // CHANGE IT BACK HERE
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T18:54:48.747

在 jQuery 中 :hover 只是一个元素选择器，它与 CSS a:hover 不同。尝试类似：

```
$('.white ul.mega-menu li .sub-container.non-mega li a').hover(
    function () {
        $(this).css({"background-color":"green"});
    },
    function () {
        $(this).css({"background-color":"none"});
    }
); ​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T18:53:54.243

`.white ul.mega-menu li .sub-container.non-mega li a`是您应该用作选择器的内容，您当前的选择器`ul > li > ul > li a`更加通用。

尝试使用任`$(this)`一设置绿色

# .net - WCF 客户端应用程序在 app.config 中进行更改后未更新服务引用

> ID：12323767
> 
> 赞同：0
> 
> 时间：2012-09-07T18:49:22.663
> 
> 标签：.net, wcf, wcf-client

我正在尝试更新与服务绑定的 WCF 应用程序中的三个服务引用。其中两项服务似乎已更新，但第三项服务在“下载服务信息”处冻结。所有三个服务及其关联的配置和 bin 都存储在同一台服务器上。更改应用程序上的配置/更新服务引用的最佳实践和顺序是什么。

我做错什么了吗？我通常 1\. 使用端点更改更新配置文件（首先验证路径），2\. 为每个端点配置服务引用，以及 3\. 更新引用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T18:52:42.340

有时某些事情会出现问题，并且参考不会打开。删除参考并阅读它没有危险。这总是为我解决问题。

# android - 启动驻留在单独库中的活动 (Android)

> ID：12323768
> 
> 赞同：2
> 
> 时间：2012-09-07T18:49:24.693
> 
> 标签：android, android-intent

我正在尝试从驻留在 android 库中的应用程序启动 Activity。当我尝试从应用程序启动活动时，我不断收到以下异常。

```
09-07 12:26:35.300: E/AndroidRuntime(553): FATAL EXCEPTION: main
09-07 12:26:35.300: E/AndroidRuntime(553): java.lang.IllegalStateException: Could not execute method of the activity
09-07 12:26:35.300: E/AndroidRuntime(553):  at android.view.View$1.onClick(View.java:3044)
09-07 12:26:35.300: E/AndroidRuntime(553):  at android.view.View.performClick(View.java:3511)
09-07 12:26:35.300: E/AndroidRuntime(553):  at android.view.View$PerformClick.run(View.java:14105)
09-07 12:26:35.300: E/AndroidRuntime(553):  at android.os.Handler.handleCallback(Handler.java:605)
09-07 12:26:35.300: E/AndroidRuntime(553):  at android.os.Handler.dispatchMessage(Handler.java:92)
09-07 12:26:35.300: E/AndroidRuntime(553):  at android.os.Looper.loop(Looper.java:137)
09-07 12:26:35.300: E/AndroidRuntime(553):  at android.app.ActivityThread.main(ActivityThread.java:4424)
09-07 12:26:35.300: E/AndroidRuntime(553):  at java.lang.reflect.Method.invokeNative(Native Method)
09-07 12:26:35.300: E/AndroidRuntime(553):  at java.lang.reflect.Method.invoke(Method.java:511)
09-07 12:26:35.300: E/AndroidRuntime(553):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
09-07 12:26:35.300: E/AndroidRuntime(553):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
09-07 12:26:35.300: E/AndroidRuntime(553):  at dalvik.system.NativeStart.main(Native Method)
09-07 12:26:35.300: E/AndroidRuntime(553): Caused by: java.lang.reflect.InvocationTargetException
09-07 12:26:35.300: E/AndroidRuntime(553):  at java.lang.reflect.Method.invokeNative(Native Method)
09-07 12:26:35.300: E/AndroidRuntime(553):  at java.lang.reflect.Method.invoke(Method.java:511)
09-07 12:26:35.300: E/AndroidRuntime(553):  at android.view.View$1.onClick(View.java:3039)
09-07 12:26:35.300: E/AndroidRuntime(553):  ... 11 more
09-07 12:26:35.300: E/AndroidRuntime(553): Caused by: android.content.ActivityNotFoundException: No Activity found to handle Intent { act=com.smarttech.androidlibrary.LibraryActivity.LAUNCH }
09-07 12:26:35.300: E/AndroidRuntime(553):  at android.app.Instrumentation.checkStartActivityResult(Instrumentation.java:1512)
09-07 12:26:35.300: E/AndroidRuntime(553):  at android.app.Instrumentation.execStartActivity(Instrumentation.java:1384)
09-07 12:26:35.300: E/AndroidRuntime(553):  at android.app.Activity.startActivityForResult(Activity.java:3190)
09-07 12:26:35.300: E/AndroidRuntime(553):  at android.app.Activity.startActivity(Activity.java:3297)
09-07 12:26:35.300: E/AndroidRuntime(553):  at com.smarttech.application.MainActivity.buttonLaunchActivity(MainActivity.java:25)
09-07 12:26:35.300: E/AndroidRuntime(553):  ... 14 more 
```

我在 Eclipse 中工作，我创建了两个项目——应用程序和库。

Library 通过 Properties->Android->Is Library 声明为 Android Library
应用程序通过 Properties->Android->Add 引用该库。

我遵循了[使用 ADT 从 Eclipse 管理项目](http://developer.android.com/tools/projects/projects-eclipse.html)的说明。

图书馆：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.smarttech.androidlibrary"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="15"
        android:targetSdkVersion="15" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name=".LibraryActivity"
            android:label="@string/title_activity_main" >
            <intent-filter>
                <action android:name="com.smarttech.androidlibrary.LibraryActivity.LAUNCH" />
            </intent-filter>
        </activity>
    </application>  
</manifest> 
```

应用：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.smarttech.application"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="15"
        android:targetSdkVersion="15" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name=".MainActivity"
            android:label="@string/title_activity_main" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <activity android:name="com.smarttech.androidlibrary.LibraryActivity">
            <intent-filter>
                <action android:name="com.smarttech.androidlibrary.LibraryActivity.LAUNCH"/>
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

--

```
package com.smarttech.application;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.Menu;
import android.view.View;

public class MainActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    public void buttonLaunchActivity(View view) {
        Intent i = new Intent("com.smarttech.androidlibrary.LibraryActivity.LAUNCH");
        startActivity(i);
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T19:29:10.277

这应该工作

```
public void buttonLaunchActivity(View view) {
        Intent i = new Intent(this, LibraryActivity.class);
        startActivity(i);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T19:09:14.113

您仍然需要在应用程序清单中为活动注册意图过滤器。添加它，它应该可以工作：

```
<activity
    android:name="com.smarttech.androidlibrary.LibraryActivity"
    android:label="@string/title_activity_main">
    <intent-filter>
        <action android:name="com.smarttech.androidlibrary.LibraryActivity.LAUNCH" />
    </intent-filter>
</activity> 
```

# android - Android soundpool 空指针异常

> ID：12323775
> 
> 赞同：0
> 
> 时间：2012-09-07T18:49:47.260
> 
> 标签：android, android-viewpager, soundpool

我想用 soundpool 播放声音文件。我在播放音频文件时收到错误消息。（“不幸的是，galeri 的进程已停止”）如何在滑动页面时播放短声音？谢谢。

代码是；

```
package com.example.galeri;
import com.example.galeri.R;
import android.content.Context;
import android.media.AudioManager;
import android.media.SoundPool;
import android.os.Parcelable;
import android.support.v4.view.PagerAdapter;
import android.support.v4.view.ViewPager;
import android.view.LayoutInflater;
import android.view.View;

public class MyPagerAdapter extends  PagerAdapter{
 private static final Context Context = null;
SoundPool snd;
int sescal;
public int getCount() {
    return 6;
}

public Object instantiateItem(View collection, int position) {

    LayoutInflater inflater = (LayoutInflater) collection.getContext()
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    this.setVolumeControlStream(AudioManager.STREAM_MUSIC);
    snd = new SoundPool(10, AudioManager.STREAM_MUSIC, 0);
    sescal = snd.load(Context, R.raw.ayna, 1);
    View view = null;

    int resId = 0;       
    switch (position) {
    case 0:
        resId = R.layout.farleft;
        break;
    case 1:
         resId = R.layout.left; // second
         view = inflater.inflate(resId, null);
         snd.play(sescal, 0.9f, 0.9f, 1, -1, 1f);
        break;
    case 2:
        resId = R.layout.middle;
        break;
    case 3:
        resId = R.layout.right;
        break;
    case 4:
        resId = R.layout.farright;
        break;
    case 5:
        resId = R.layout.other;
        break;
    }

    ((ViewPager) collection).addView(view, 0);

    return view;
    }

   private void setVolumeControlStream(int streamMusic) {
    // TODO Auto-generated method stub

}

 private void setVolumeControlStream(int streamMusic) {
    // TODO Auto-generated method stub

}

@SuppressWarnings("unused")
private Context getBaseContext() {
    // TODO Auto-generated method stub
    return null;
}

@SuppressWarnings("unused")
private PagerAdapter findViewById(int myfivepanelpager) {
    // TODO Auto-generated method stub
    return null;
}

@Override
public void destroyItem(View arg0, int arg1, Object arg2) {
    ((ViewPager) arg0).removeView((View) arg2);
}

@Override
public boolean isViewFromObject(View arg0, Object arg1) {
    return arg0 == ((View) arg1);

}

@Override
public Parcelable saveState() {
    return null;
}

public static Integer getItem(int position) {
    // TODO Auto-generated method stub
    return null;
}
} 
```

日志猫；

```
09-07 18:37:28.169: E/AndroidRuntime(653): FATAL EXCEPTION: main
09-07 18:37:28.169: E/AndroidRuntime(653): java.lang.NullPointerException
09-07 18:37:28.169: E/AndroidRuntime(653):  at     android.media.SoundPool.load(SoundPool.java:191)
09-07 18:37:28.169: E/AndroidRuntime(653):  at com.example.galeri.MyPagerAdapter.instantiateItem(MyPagerAdapter.java:30)
09-07 18:37:28.169: E/AndroidRuntime(653):  at android.support.v4.view.PagerAdapter.instantiateItem(PagerAdapter.java:110)
09-07 18:37:28.169: E/AndroidRuntime(653):  at android.support.v4.view.ViewPager.addNewItem(ViewPager.java:692)
09-07 18:37:28.169: E/AndroidRuntime(653):  at android.support.v4.view.ViewPager.populate(ViewPager.java:821)
09-07 18:37:28.169: E/AndroidRuntime(653):  at android.support.v4.view.ViewPager.populate(ViewPager.java:772)
09-07 18:37:28.169: E/AndroidRuntime(653):  at android.support.v4.view.ViewPager.onMeasure(ViewPager.java:1234)
09-07 18:37:28.169: E/AndroidRuntime(653):  at android.view.View.measure(View.java:15172)
09-07 18:37:28.169: E/AndroidRuntime(653):  at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4814)
09-07 18:37:28.169: E/AndroidRuntime(653):  at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1390)
09-07 18:37:28.169: E/AndroidRuntime(653):  at android.widget.LinearLayout.measureVertical(LinearLayout.java:681)
09-07 18:37:28.169: E/AndroidRuntime(653):  at android.widget.LinearLayout.onMeasure(LinearLayout.java:574)
09-07 18:37:28.169: E/AndroidRuntime(653):  at android.view.View.measure(View.java:15172)
09-07 18:37:28.169: E/AndroidRuntime(653):  at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4814)
09-07 18:37:28.169: E/AndroidRuntime(653):  at android.widget.FrameLayout.onMeasure(FrameLayout.java:310)
09-07 18:37:28.169: E/AndroidRuntime(653):  at android.view.View.measure(View.java:15172)
09-07 18:37:28.169: E/AndroidRuntime(653):  at android.widget.LinearLayout.measureVertical(LinearLayout.java:833)
09-07 18:37:28.169: E/AndroidRuntime(653):  at android.widget.LinearLayout.onMeasure(LinearLayout.java:574)
09-07 18:37:28.169: E/AndroidRuntime(653):  at android.view.View.measure(View.java:15172)
09-07 18:37:28.169: E/AndroidRuntime(653):  at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4814)
09-07 18:37:28.169: E/AndroidRuntime(653):  at android.widget.FrameLayout.onMeasure(FrameLayout.java:310)
09-07 18:37:28.169: E/AndroidRuntime(653):  at com.android.internal.policy.impl.PhoneWindow$DecorView.onMeasure(PhoneWindow.java:2148)
09-07 18:37:28.169: E/AndroidRuntime(653):  at android.view.View.measure(View.java:15172)
09-07 18:37:28.169: E/AndroidRuntime(653):  at android.view.ViewRootImpl.performMeasure(ViewRootImpl.java:1848)
09-07 18:37:28.169: E/AndroidRuntime(653):  at android.view.ViewRootImpl.measureHierarchy(ViewRootImpl.java:1100)
09-07 18:37:28.169: E/AndroidRuntime(653):  at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1273)
09-07 18:37:28.169: E/AndroidRuntime(653):  at android.view.ViewRootImpl.doTraversal(ViewRootImpl.java:998)
09-07 18:37:28.169: E/AndroidRuntime(653):  at android.view.ViewRootImpl$TraversalRunnable.run(ViewRootImpl.java:4212)
09-07 18:37:28.169: E/AndroidRuntime(653):  at android.view.Choreographer$CallbackRecord.run(Choreographer.java:725)
09-07 18:37:28.169: E/AndroidRuntime(653):  at android.view.Choreographer.doCallbacks(Choreographer.java:555)
09-07 18:37:28.169: E/AndroidRuntime(653):  at android.view.Choreographer.doFrame(Choreographer.java:525)
09-07 18:37:28.169: E/AndroidRuntime(653):  at android.view.Choreographer$FrameDisplayEventReceiver.run(Choreographer.java:711)
09-07 18:37:28.169: E/AndroidRuntime(653):  at android.os.Handler.handleCallback(Handler.java:615)
09-07 18:37:28.169: E/AndroidRuntime(653):  at android.os.Handler.dispatchMessage(Handler.java:92)
09-07 18:37:28.169: E/AndroidRuntime(653):  at android.os.Looper.loop(Looper.java:137)
09-07 18:37:28.169: E/AndroidRuntime(653):  at android.app.ActivityThread.main(ActivityThread.java:4745)
09-07 18:37:28.169: E/AndroidRuntime(653):  at     java.lang.reflect.Method.invokeNative(Native Method)
09-07 18:37:28.169: E/AndroidRuntime(653):  at java.lang.reflect.Method.invoke(Method.java:511)
09-07 18:37:28.169: E/AndroidRuntime(653):  at     com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
09-07 18:37:28.169: E/AndroidRuntime(653):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
09-07 18:37:28.169: E/AndroidRuntime(653):  at dalvik.system.NativeStart.main(Native     Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T19:03:52.633

问题是您的 Context 变量被声明为 null 并且从未设置。

然后，在它的`load()`方法中，SoundPool 调用`context.getResources().openRawResourceFd(resId)`，在这里你得到你的 NullPointerException。

`View collection`您可以从方法的参数中获取有效的上下文`instantiateItem`。

所以尝试调用：

```
snd.load(collection.getContext(), R.raw.ayna, 1); 
```

# xml - xslt 中的模式匹配

> ID：12323776
> 
> 赞同：3
> 
> 时间：2012-09-07T18:49:53.553
> 
> 标签：xml, xslt, xpath

我有以下xml

```
<xml>
    <para>
       <number>1</number>
       <text> Paragraph 1(<italic>A</italic>) is this para.</text>
    </para>
</xml> 
```

如果我发现一个以单词 Paragraph 开头的模式，后跟空格，后跟一个或多个数字，后跟“（”，后跟节点斜体和数字并关闭“）”，我想匹配文本元素。然后它应该在它周围放置一个锚标签。所以上述xml的输出应该是

```
 <xml>
    <para>
       <number>1</number>
       <text> <a href="Paragraph1(A)">Paragraph 1(<italic>A</italic>)</a> is this para.</text>
    </para>
</xml> 
```

即`Paragraph 1(<italic>A</italic>)`用标签替换，href 值应该是匹配的文本，没有任何空格和斜体节点。

任何帮助或提示如何在正则表达式中处理......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T01:42:13.773

这个 XSLT 2.0 样式表产生了期望的结果：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="2.0">
    <xsl:output omit-xml-declaration="no" indent="yes"/>

    <xsl:template match="@*|node()">
        <xsl:copy>
            <xsl:apply-templates select="@*|node()"/>
        </xsl:copy>
    </xsl:template>

    <!-- Only our text element requires special handling here....-->
    <xsl:template match="text[matches(.,'Paragraph\s+\d*')]">
        <xsl:copy>
            <xsl:variable name="textElement" select="."/>
            <xsl:analyze-string select="." regex="(Paragraph\s+\d*)(\(.*\))">
                <xsl:matching-substring>
                    <a href="{concat(replace(regex-group(1),'\s',''),regex-group(2))}">
                        <xsl:apply-templates select="$textElement/node()"/>
                    </a>
                </xsl:matching-substring>
            </xsl:analyze-string>       
        </xsl:copy>
    </xsl:template>

</xsl:stylesheet> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T20:00:03.583

这可以让您了解如何解决它：

```
<?xml version="1.0"?> 
```

```
<xsl:template match="/">
    <xsl:apply-templates/>
</xsl:template>

    <!-- Only our text element requires special handling here....-->
<xsl:template match="text">
    <xsl:copy>
        <xsl:choose>
            <xsl:when test="matches(.,'Paragraph\s+\d*')">
                <!-- Save original text value here -->
                <xsl:variable name="temp" select="."/>
                <!-- Save the value of <italic>x</italic> child element -->
                <xsl:variable name="italic_val" select="italic/text()"/>
                <xsl:analyze-string select="." regex="(Paragraph\s+\d*)">
                    <xsl:matching-substring>
                        <xsl:element name="a">
                            <xsl:attribute name="href">
                                <xsl:value-of select="concat(replace(regex-group(1),'\s',''),'(',$italic_val,')')"/>
                            </xsl:attribute>
                            <xsl:value-of select="$temp"/>
                        </xsl:element>
                    </xsl:matching-substring>
                </xsl:analyze-string>

            </xsl:when>
            <xsl:otherwise>DOESNT MATCH</xsl:otherwise>
        </xsl:choose>
    </xsl:copy>
</xsl:template>

<xsl:template match="@*|node()">
    <xsl:copy>
        <xsl:apply-templates select="@*|node()"/>
    </xsl:copy>
</xsl:template> 
```

它基本上使用 XSLT 标识模板来复制原始文档并定义一个模板来处理`<text>`元素。它在那里分析其 Text() 内容和适当的正则表达式： Paragraph 。如果它发现它生成了anchor子结构。为此，我使用了一些临时变量。

这是我的输出文件：

```
<xml>
  <para>
    <number>1</number>
    <text><a href="Paragraph1(A)"> Paragraph 1(A) is this para.</a></text>
  </para>
</xml> 
```

我仍然缺少第 1( `<italic>A</italic>`) 段，而不是我得到的：第 1(A) 段，但这只是一些调整......

看看[这个链接](http://www.xml.com/pub/a/2003/06/04/tr.html)它可以帮助你理解 XSLT 中的 Regex

注意它使用 XSLT 2.0

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T13:21:48.953

为什么你需要正则表达式呢？下面的代码有什么问题？

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="xml" indent="yes"/>

    <xsl:template match="@* | node()">
        <xsl:copy>
            <xsl:apply-templates select="@* | node()"/>
        </xsl:copy>
    </xsl:template>

  <xsl:template match="/xml/para/text">
    <xsl:copy>
      <a href="Paragraph1(A)">
        <xsl:apply-templates select="@*|node()"/>
      </a>
    </xsl:copy>
  </xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-07T19:08:38.113

此正则表达式没有周围的引号：

```
".*(Paragraph ([0-9]+)`\`(<italic>([0-9])</italic>`\`)" 
```

将为您提供一个外层捕获组和 2 个嵌入式捕获组，这些捕获组将为您提供值。外层捕获组是#1，2 个嵌入式捕获组是#2 和#3。请注意，文字值 '(' 用 ' `\`' 转义，因为 '(' 是正则表达式中的保留字符。

# c# - Azure 服务总线中继 - 启用压缩

> ID：12323778
> 
> 赞同：17
> 
> 时间：2012-09-07T18:50:03.007
> 
> 标签：c#, wcf, azure, wcf-binding, azureservicebus

**在将Azure 服务总线中继**与`netTcpRelayBinding`和结合使用时，我们遇到了速度问题`basicHttpRelayBinding`。对于较小的消息大小 ( *10K* )，中继以低延迟 ( *100ms* ) 运行，但随着消息大小的增加 ( *100K* )，我们会经历看似随机的响应时间 ( *600ms-1000ms* )。我们希望改善较大消息的延迟成本。

服务总线中继是否支持使用消息压缩（*[gzip](http://msdn.microsoft.com/en-us/library/ms751458.aspx)、[protobuf-net](http://code.google.com/p/protobuf-net/)等）？*有没有人成功通过中继启用请求/响应压缩？[通过 IIS 支持响应压缩](https://stackoverflow.com/a/3705921/175679)很简单，但我们希望支持**请求压缩**以降低延迟成本。由于我们无法使用[Fiddler](http://www.fiddler2.com/fiddler2/)分析中继，我们如何知道消息在通过中继时仍然被压缩？

* * *

我们发现的一个有趣的点是，在后续消息中继之间引入延迟 ( *2s* ) 我们会获得更好的性能 ( *1​​00K - 200ms* )。是否会自动限制较大的消息？很高兴知道触发限制条件的消息大小截止值。

对于我们的测试 - 我们只是向服务中继发送一个随机消息字符串并从服务器回显请求字符串。我们已经从多个地理位置尝试了这个客户端/服务器（*以排除防火墙/Web 过滤器问题*）并经历了相同的延迟行为。

### 服务器端

```
public class ServiceRelayProfiler : IServiceRelayProfiler
{
    public string HelloProfiler(string name)
    {
        return string.Format("Hello {0}", name);
    }
} 
```

### 客户端

```
ChannelFactory<IServiceRelayProfiler> channelFactory = new ChannelFactory<IServiceRelayProfiler>("helloProfilerTcp");
IServiceRelayProfiler channel = channelFactory.CreateChannel();
string message = RandomString(100000); // 100K
for (int i = 0; i < 100; i++)
{
    DateTime start = DateTime.Now;
    string response = channel.HelloProfiler(message);
    DateTime end = DateTime.Now;
    TimeSpan duration = end - start;
    Console.WriteLine("Response is: {0} at {1}\tDuration: {2}ms", response.Substring(0, 20) + "....", end, duration.Milliseconds);
    //Thread.Sleep(2000); // delay makes response times more consistent
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T22:14:29.933

这不是一个完整的答案，但在服务器端，您可以将其添加`global.asax.cs`到允许请求解压缩：

```
public class MvcApplication : System.Web.HttpApplication
{    
    protected void Application_BeginRequest(Object sender, EventArgs e)
    {
        //Activate request decompression
        string contentEncoding = Request.Headers["Content-Encoding"];
        if (contentEncoding != null && contentEncoding.Equals("gzip", StringComparison.CurrentCultureIgnoreCase))
        {
            Request.Filter = new GZipStream(Request.Filter, CompressionMode.Decompress, true);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-12T01:21:24.287

您可以尝试的一件事是通过 System.IO.Compression 自己压缩消息（请参阅下面的实用程序 - 您可以添加为扩展名）。

但是关于排队/节流问题。与较小/优化的块相比，较大的消息总是比网络滞后。如果您可以分解小于或等于 50k 或更少的数据或使用 udp，它可能会比在 tcp 上以更少的排队和验证传输更快。

> TCP 数据包大小的绝对限制是 64K（65535 字节），但实际上这远远大于您将看到的任何数据包的大小，因为较低层（例如以太网）的数据包大小较小。
> 
> 例如，以太网的 MTU（最大传输单元）为 1500 字节。某些类型的网络（如令牌环）具有较大的 MTU，而某些类型具有较小的 MTU，但对于每种物理技术，这些值是固定的。

从这里开始：[TCP 连接的最大数据包大小](https://stackoverflow.com/questions/2613734/maximum-packet-size-for-a-tcp-connection)

当你把事情分开时事情会变得更顺利，多人游戏已经这样做了，他们还更多地使用 udp 来限制额外的验证（实施可靠的 udp 来验证单个消息并仅在需要时进行排序）。

CompressionUtil 类，在发送前/接收后压缩消息进出：[https ://gist.github.com/drawcode/8948293](https://gist.github.com/drawcode/8948293)

```
public static class CompressUtil {

    public static string ToCompressed(this string val) {
        if (!IsStringCompressed(val)) {
            return CompressString(val);
        }
        return val;
    }

    public static string ToDecompressed(this string val) {
        if (IsStringCompressed(val)) {
            return DecompressString(val);
        }
        return val;
    }

    public static string CompressString(string text) {
        byte[] buffer = Encoding.UTF8.GetBytes(text);
        var memoryStream = new MemoryStream();
        using (var gZipStream = new GZipStream(memoryStream, CompressionMode.Compress, true)) {
            gZipStream.Write(buffer, 0, buffer.Length);
        }

        memoryStream.Position = 0;

        var compressedData = new byte[memoryStream.Length];
        memoryStream.Read(compressedData, 0, compressedData.Length);

        var gZipBuffer = new byte[compressedData.Length + 4];
        Buffer.BlockCopy(compressedData, 0, gZipBuffer, 4, compressedData.Length);
        Buffer.BlockCopy(BitConverter.GetBytes(buffer.Length), 0, gZipBuffer, 0, 4);
        return Convert.ToBase64String(gZipBuffer);
    }

    public static string DecompressString(string compressedText) {
        byte[] gZipBuffer = Convert.FromBase64String(compressedText);
        using (var memoryStream = new MemoryStream()) {
            int dataLength = BitConverter.ToInt32(gZipBuffer, 0);
            memoryStream.Write(gZipBuffer, 4, gZipBuffer.Length - 4);

            var buffer = new byte[dataLength];

            memoryStream.Position = 0;
            using (var gZipStream = new GZipStream(memoryStream, CompressionMode.Decompress)) {
                gZipStream.Read(buffer, 0, buffer.Length);
            }

            return Encoding.UTF8.GetString(buffer);
        }
    }

    public static bool IsStringCompressed(string data) {
        if (IsStringCompressedGZip(data) || IsStringCompressedPKZip(data)) {
            return true;
        }
        return false;
    }

    public static bool IsStringCompressedGZip(string data) {
        return CheckSignatureString(data, 3, "1F-8B-08");
    }

    public static bool IsStringCompressedPKZip(string data) {
        return CheckSignatureString(data, 4, "50-4B-03-04");
    }

    public static bool CheckSignatureFile(string filepath, int signatureSize, string expectedSignature) {
        if (String.IsNullOrEmpty(filepath))
            throw new ArgumentException("Must specify a filepath");
        if (String.IsNullOrEmpty(expectedSignature))
            throw new ArgumentException("Must specify a value for the expected file signature");
        using (FileStream fs = new FileStream(filepath, FileMode.Open, FileAccess.Read, FileShare.ReadWrite)) {
            if (fs.Length < signatureSize)
                return false;
            byte[] signature = new byte[signatureSize];
            int bytesRequired = signatureSize;
            int index = 0;
            while (bytesRequired > 0) {
                int bytesRead = fs.Read(signature, index, bytesRequired);
                bytesRequired -= bytesRead;
                index += bytesRead;
            }
            string actualSignature = BitConverter.ToString(signature);
            if (actualSignature == expectedSignature)
                return true;
            else
                return false;
        }
    }

    public static bool CheckSignatureString(string data, int signatureSize, string expectedSignature) {

        byte[] datas = Encoding.ASCII.GetBytes(data);
        using (MemoryStream ms = new MemoryStream(datas)) {
            if (ms.Length < signatureSize)
                return false;
            byte[] signature = new byte[signatureSize];
            int bytesRequired = signatureSize;
            int index = 0;
            while (bytesRequired > 0) {
                int bytesRead = ms.Read(signature, index, bytesRequired);
                bytesRequired -= bytesRead;
                index += bytesRead;
            }
            string actualSignature = BitConverter.ToString(signature);
            if (actualSignature == expectedSignature)
                return true;
            else
                return false;
        }
    }
} 
```

# dart - Dart 中用 new 操作符初始化和用字面量初始化的区别

> ID：12323781
> 
> 赞同：1
> 
> 时间：2012-09-07T18:50:15.673
> 
> 标签：dart, object-initializers

`List<int>`在 Dart 中，用 new 操作符初始化 a 和用字面量初始化它有什么区别？

情况1：

```
List<int> args = new List<int>(2);
args[0] = 1;
args[1] = 2; 
```

案例2：

```
List<int> args = <int>[1, 2]; 
```

当我将 args 发布到本机服务端口时，服务端口将收到不同的消息。使用 new 操作符初始化的 List 实例被序列化为 Dart_CObject::kIntArray，但使用字面量初始化的实例被序列化为类型为 12 的 Dart_CObject 对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T08:34:38.060

有一个微小的区别——在第一种情况下，您正在创建一个固定大小的列表，而在第二种情况下，列表是可增长的。如果您在第一种情况下使用“new List()”，则没有区别。我不是 100% 确定，因为我现在无法测试它，但这就是我理解它的方式（我确信 VM 具有用于固定大小列表和可增长列表的单独类）。

# facebook-graph-api - iOS sdk - Feed Dialog 样式错误，发布后未关闭

> ID：12323786
> 
> 赞同：3
> 
> 时间：2012-09-07T18:50:32.070
> 
> 标签：facebook-graph-api, delegates, dialog, feed, facebook-ios-sdk

尝试向我正在开发的 iOS 应用程序添加一个简单的对话框并遇到一些奇怪的行为。

使用：

```
[facebook dialog:@"feed"
        andParams:params
      andDelegate:self]; 
```

产生以下对话框：

![](../Images/ac08eec12245a67b9982162351124d74.png)

这是在模拟器或实际设备上。请注意奇怪的按钮及其位置。对话框将正确张贴在墙上，但对话框不会关闭。相反，我收到一条 JavaScript 消息：

> window.location.href="fbconnect://success?post_id="

并且委托 (`dialogDidComplete`或`dialogCompleteWithUrl`) 都不会触发。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T19:00:53.380

终于找到了。用户代理在 appdelegate 中被覆盖。这导致 Facebook 发回了不正确的数据。

# timer - HSC08 上的定时器模块

> ID：12323787
> 
> 赞同：1
> 
> 时间：2012-09-07T18:50:33.387
> 
> 标签：timer, embedded, microcontroller, pwm

我正在使用 MC9S08LH64 微控制器的定时器模块来生成用于同步的内部定时器。总线时钟为 4.3 MHz，模数设置为 4309（TPM1MODH 和 TPM1MODL），我期望每 1.25 毫秒脉冲一次，但结果大约是每 3.75 毫秒。我在这里缺少任何设置吗？非常感谢

```
 /*
 * TPM1SC: pg 358
    bit 
    7   TOF need to check for this flag
    6       not used since no interrupt being used
    5   1  not used
    4   0  selecting bus clock
    3   1
    2   0  not dividing clock down
    1   0
    0   0
 */ 

TPM1SC = 0x08; 
```

*更新：我刚刚意识到更改 TPM1MOD 对结果脉冲宽度没有影响。TPM1SC 是我用来设置模块的唯一寄存器。我需要为此设置任何其他寄存器吗？

下面是设置定时器的源代码：

```
//to set up the modulo register:
void set_base_pulse(float time_ms){
int modulo_value;
modulo_value = (int) time_ms*1000/233;
TPM1MODH = modulo_value >>8;
TPM1MODL = modulo_value;
} 
```

为了生成脉冲，我检查了 TOF 标志，每 40 次标志熄灭，我切换输出：

```
for(counter = 0; counter<40; counter++
{

   while(!TPM1SC_TOF){}
   if(counter ==40) output~=output;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T12:22:10.453

关于代码的一些评论：

> 无效 set_base_pulse（浮动时间_毫秒）{

在 8 位微控制器上使用浮点数通常是一个非常糟糕的主意。生成的代码效率极低。在这种情况下，我非常怀疑您是否需要它们。

> (int) time_ms*1000/233；

神奇的数字233是什么？首先将其定义为有意义`#define BUSCLOCK_ns 233`或类似的东西。此外，您的逻辑有缺陷：1.25 * 1000 / 233 = 5.36。将此类型转换为 int 并得到 5。这是完全不同的。

> for(计数器 = 0; 计数器<40; 计数器++

为什么你会在循环中消耗时间？您不能将计数放在 ISR 中吗？TOF 标志可以给你一个中断。或者更好的是，使用硬件中的内置输出比较/PWM 功能。

> 如果（计数器==40）输出~=输出；

这不是有效的 C 语言，不会编译。你可能的意思是`output = ~output`。请发布您编译的真实代码，而不是在飞行中输入任何内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T20:28:18.617

我无法遵循您对 1,25ms 的期望，因为 1/4.3E6MHz=233ns BUSCLK

如果您将 TPM1MOD 设置为 4309，您应该得到 233ns*4309=1,002ms 的周期。

但是，如果您将 TPM1MOD 设置为 0x4309（十六进制 0x4309=dez 17161），那么您应该得到 233ns*17161=3,99ms 的周期。

**编辑：编辑后，显示代码**

这是，这是...不常见

恕我直言，纯粹的计时器设置会起作用，也许它有点不准确。

但是创建输出信号的代码有点奇怪。

尝试一些简单的东西。

```
while (1)
{
   output = TPM1SC_TOF;
} 
```

或创建一个方形信号

```
while (1)
{
   if ( TPM1SC_TOF )
     output = !output;
} 
```

# ios - iOS – Event Kit 编程监听通知

> ID：12323796
> 
> 赞同：2
> 
> 时间：2012-09-07T18:50:53.380
> 
> 标签：ios, cocoa-touch, eventkit

我想观察日历应用程序的变化，所以我注册了`EKEventStoreChangedNotification`通知。但是我是否需要有一个`EKEventStore`“活着”的对象才能收到此通知？我在想我正在初始化`EKEventStore`视图控制器上的对象以检索一些事件。然后我将弹出导航堆栈的这个视图控制器，视图控制器将被释放，因此`EKEventStore`对象将被释放。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T19:39:11.240

不，您不需要保持 EKEventStore 对象处于活动状态，因为您已经使用名为 eventStore 的 EKEventStore 对象注册**EKEventStoreChangedNotification**

```
[[NSNotificationCenter defaultCenter]addObserver:self selector:@selector(storeChanged:)
                              name:EKEventStoreChangedNotification  object:eventStore]; 
```

请参阅[此](http://developer.apple.com/library/ios/#documentation/DataManagement/Conceptual/EventKitProgGuide/ObservingChanges/ObservingChanges.html#//apple_ref/doc/uid/TP40009765-CH4-SW1)内容以获得更多疑虑

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-01T08:56:42.127

对于 swift 3.x，使用如下

```
NotificationCenter.default.addObserver(self, selector: #selector(ViewController.storeChanged(_:)), name: NSNotification.Name.EKEventStoreChanged, object: eventStore)
...
...
...
//Method
func storeChanged(_ nsNotification: NSNotification) {
//do your stuff
} 
```

# html - 图像之间的差距？

> ID：12323803
> 
> 赞同：0
> 
> 时间：2012-09-07T18:51:15.493
> 
> 标签：html, css

请参阅此处的示例：

[http://users.telenet.be/prullen/portfolio.html](http://users.telenet.be/prullen/portfolio.html)

我尝试将图像设置为 display:block -

```
display: block;
margin: 0;
padding: 0; 
```

但这没有用。

我也尝试添加

```
 visiblity:hidden;overflow:hidden;height:0;font-size:1px;line-height:0px 
```

到

```
 <div style="clear:both"></div> 
```

但这些都不起作用。

有谁知道可能是什么原因？如果可能，请明确：两者都应该保留 IE7 兼容性。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T18:55:34.430

尝试将它们放在类名为“.row”的 div 中，并将行高设置为 0。

HTML：

```
<div class="row">
    <img src="img1.png" />
    <img src="img2.png" />
    <img src="img3.png" />
</div> 
```

CSS：

```
.row {
    line-height: 0;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T18:59:49.703

您的段落标签是导致顶部和底部间隙的原因。段落的默认值（在 chrome 中）是：

```
p {
display: block;
-webkit-margin-before: 1em;
-webkit-margin-after: 1em;
-webkit-margin-start: 0px;
-webkit-margin-end: 0px;
} 
```

只需将边距设置为 0 即可解决您的问题：

```
p { margin: 0px; } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-07T18:57:55.630

如果您正在谈论的间隙是图像之间的垂直间隙，那么您的问题是`<p>`第二个中的上边距`.item .description`。这是造成差距的元素。

```
.description p { margin-top: 0 } 
```

交替：

```
<div class="description">
    <p class="first">Description goes here.</p>
</div>

.description .first { margin-top: 0 } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-07T19:22:15.470

好的，测试了一个作品。

删除`clear:both div`并为第一项设置浮动样式。

**坏的：**

```
<div class="item">
    [...]
    <div style="clear:both;"></div>
</div>
<div class="item" style="border:red;">
    [...]
</div> 
```

**好的：**

```
<div class="item" style="float:left;">
    [...]
</div>
<div class="item" style="border:red;">
    [...]
</div> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-07T18:55:42.347

你应该`<div style="clear: both;" />`在你的第一个`<div>`.

[固定代码](http://pastebin.com/Wntrv0Cy)

你也可以删除它：

```
<div style="clear:both;visiblity:hidden;overflow:hidden;height:0;font-size:1px;line-height:0px;"></div> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-07T18:59:45.087

[给定页面](http://users.telenet.be/prullen/portfolio.html)的快速修复：添加`float:left`到`.item`css 块。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-07T18:59:45.770

在 CSS 中进行重置...

*{ 填充：0；边距：0；}

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-09-07T19:05:58.420

第二个项目的`<p>`标签将整个 div 向下推 1 行，因为它的默认顶部和底部边距通常为 1em。当您将其边距设置为零时，这些项目将在彼此的顶部对齐。您可能想为 to 设置或`<p>`创建一个类。`<p>``margin-top: 0px`

# ruby-on-rails-3.2 - CSRF 令牌会话被重置

> ID：12323809
> 
> 赞同：6
> 
> 时间：2012-09-07T18:51:32.150
> 
> 标签：ruby-on-rails-3.2, csrf, authenticity-token

我在会话中使用 Rails 3.2.3 和 active_record_store。

我的理解是 Rails 中的 CSRF 令牌存储在会话中，除非调用 reset_session 或由于某种原因会话被破坏，否则不应重置。

但是在某些地方，当远程表单通过 ajax 加载时，它包含的真实性令牌与该页面上 META 标记中指定的真实性令牌不同。因此，在提交该表单时会导致无效令牌错误和 reset_session。

```
def form_authenticity_token
  session[:_csrf_token] ||= SecureRandom.base64(32)
end 
```

我无法弄清楚为什么会话 [:_csrf_token] 被破坏并创建新令牌的有效会话？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T01:45:10.500

经过一番摸索，终于弄明白了这个问题。我将模型对象直接存储在会话中，即使使用了大小限制为 65KB 的活动记录会话存储，但会话在 4kb 后被截断，这导致 CRSF 令牌被擦除并生成了一个新令牌。是的！大错特错...永远不要在会话中存储模型对象，除非您有充分的理由不这样做。无论如何，仍然试图弄清楚为什么即使在有一个活动的记录会话存储之后我也无法在会话中存储更大的对象。

# mysql - 选择 mysql SET 列作为 BIT STRING？

> ID：12323811
> 
> 赞同：2
> 
> 时间：2012-09-07T18:51:51.400
> 
> 标签：mysql

每当我尝试：

```
SELECT column1 FROM table1; 
```

我得到的结果是逗号分隔的字符串（column1 是 SET 类型）：

```
'result4,result7,result24'
'result2,result15,result36' 
```

ETC...

由于 mysql SET 类型只是 64 位字符串 AFAIK - 我如何将值作为位字符串/位掩码？

```
SELECT function_that_converts_to_bit_string( column1 ) FROM table1; 
```

所以结果是：

```
100100101110000101110
101000110110000101110
100001111100110001110
... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T18:57:45.987

```
select bin(cast(column1 as decimal)) from table1; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T18:56:44.303

column1 的数据类型和排序规则是什么？

有一种二进制数据类型（BINARY 本身或 BLOB）可用于获取二进制数据。此外，排序规则应设置为任何内容（latin1、utf-8 等）-bin 来自您使用的任何排序规则集的二进制排序规则，而不是不区分大小写 (-ci) 或区分大小写 (-cs) 的变体。

# objective-c - 使用 UIAlertView 时如何等待用户响应？

> ID：12323812
> 
> 赞同：0
> 
> 时间：2012-09-07T18:51:54.963
> 
> 标签：objective-c, modal-dialog, uialertview, objective-c-blocks, wait

我在尝试让我的 Objective-C 代码在触发后续代码之前适当地等待来自 UIAlertView 的用户输入时遇到了很多麻烦。例如，我有以下代码：

```
if (!self.currentUser) [self displayLoginUIAlertView];
Program *program = [[Program alloc] initWithUser:self.currentUser];
[program startProgram]; 
```

`Program`自定义对象在哪里，用户输入从哪里设置`[self displayLoginUIAlertView]`属性`self.currentUser`。

我*不*希望将第二行和第三行放入（`Program *program`因为`[program startProgram]`我`alertView:didDismissWithButtonIndex`试图限制视图控制器中不同类型警报视图的数量。此外，我不希望创建自己的自定义全模态 UIAlertView 对象（正如一些在线解决方案似乎暗示的那样）。

我正在寻找的答案有望超越 UIAlertView 对象，并有助于回答更普遍的问题，即如何在进入下一行代码之前等待 Objective-C 中的一行完全执行。我还尝试了以下方法：

```
if (!self.currentUser) [self displayLoginUIAlertView];
while (!self.currentUser) wait(1);
Program *program = [[Program alloc] initWithUser:self.currentUser];
[program startProgram]; 
```

然而，这（不出所料）会导致一个无限循环，其中警报视图永远不会出现并且用户输入被锁定。

我已经研究过使用块，但对它们的语法感到非常困惑。块是解决方案吗？还是我问错了问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-07T18:57:46.807

正确的方法确实是执行`alertView:didDismissWithButtonIndex:`。

但是，您可能希望创建一个可以接受回调块并充当您的委托的对象`UIAlertView`，但我认为这比它的价值更麻烦..（您必须将您的委托对象保留在实例变量引用中防止它被解雇）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-07T18:59:00.010

一般来说，块是答案，但前提是 API 支持它们。在警报视图的情况下，它们不会。扩展它们相当容易，以便它们支持块，例如[`UIAlertView-Blocks`](https://github.com/jivadevoe/UIAlertView-Blocks).

试图告诉运行时“暂停直到”是不可能的 - 系统并非设计为以这种方式使用，UI 将无法运行，直到您从您的方法返回。那样的话你哪儿也去不了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-18T14:02:48.877

苹果设计此功能不是为了中断程序流程，而是在方法完成之前立即显示。

使用 UIAlert 作为端点并在接收警报按钮点击的委托内分叉执行。

当方法在调用显示警报后立即完成时，程序将等待用户操作，委托将承担控制权，并且程序流程将仅在用户单击某些内容后重新开始。

# java - PDFBox，BBox，页码？

> ID：12323814
> 
> 赞同：1
> 
> 时间：2012-09-07T18:52:00.760
> 
> 标签：java, dimensions, pdfbox

我正在使用 PDFBox，成功地从 PDF 中检索字段坐标。继续处理多页 PDF，我遇到了需要确定这些字段来自哪个页面的情况，此外还需要将坐标从自下而上转换为自上而下。我已经阅读了该文档的许多页面，以找到一种可行的方法，大多数返回 null 或失败，并且搜索时没有结果。

我在找什么？文件大纲？BB们？媒体框？裁剪框？

对于页码，其他一些库具有诸如 getCurrentPageNo() 之类的简单标题方法。我需要：

```
List allPages = document.getDocumentCatalog().getAllPages();
  for (int i = 0; i < allPages.size(); i++) {
  // etc for each one?
} 
```

这是一个如此核心的能力，我有点惊讶我还没有找到一个例子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T19:41:00.137

知道了：

```
PDPage page = .........
PDRectangle mediaBox = page.getMediaBox();
System.out.println( "Width:" + mediaBox.getWidth() );
System.out.println( "Height:" + mediaBox.getHeight() ) 
```

对于页码：

```
page.getCOSDictionary().equals(page)) 
```

# java - 由于 getClass()，反身调用出错

> ID：12323817
> 
> 赞同：1
> 
> 时间：2012-09-07T18:52:08.380
> 
> 标签：java, introspection, getmethod

我面临着一些我认为无法解决的问题，但值得一试。假设您有以下课程：

```
package a;

public class A
{
    protected A() {}

    public static void staticMethod(A a) {
        // ...
    }
}

public class B extends A
{
    public B() {}
} 
```

所以你可以从其他包中实例化`B`，但不是`A`. 现在假设您要使用`Class.getMethod`，只有您使用某种反身框架，例如：

```
public Object callStaticMethod(Class c, String methodname, Object[] args)
{
    Class[] signature = new Class[args.length];
    for (i = 0 ; i < args.length ; ++i) {
        signature[i] = args.getClass();
    }
    Method m = c.getMethod("methodname", signature);
    return m.invoke(null, args)
} 
```

这种方法是按原样提供给我的，遗憾的是我无法改进它。现在您可能想要这样调用该方法：

```
package b;

B b;
callStaticMethod(A.class, "staticMethod", b); 
```

...除了那不起作用，因为生成的签名（基于`getClass()`结果将是`{B.class}`，并且没有调用`staticMethod`以`A`a`B`作为参数的方法。

你们有人知道吗？

**奖励**：作为一个额外的挑战，有没有办法用这个方法来调用`staticMethod`一个空参数（这在语义上也可能是完全有效的）？我个人还没有找到方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T18:58:08.263

你必须做的是使用类似的东西[`Class.getMethods`](http://docs.oracle.com/javase/7/docs/api/java/lang/Class.html#getMethods%28%29)，然后检查每个候选方法的适用性。您不妨考虑：

*   装箱（因此对于 中的值`long.class`有效）`Long``args`
*   Varargs（因此，如果您有两个`String`参数，您*可能*需要考虑对 的方法有效`foo(String... args)`）
*   空兼容性（基本上与任何类类型参数）
*   分配兼容性（可能通过`Class.isAssignableFrom`）
*   泛型（这几乎肯定会被证明是可怕的）

If there are multiple applicable candidate methods, you *may* want to consider emulating the Java overloading rules - but I'd probably avoid it and go bang if you can :)

# windows-7 - 远程桌面 RDP 文件自动为我登录，不为其他任何人登录

> ID：12323825
> 
> 赞同：5
> 
> 时间：2012-09-07T18:52:42.847
> 
> 标签：windows-7, windows-xp, windows-server-2008, remote-desktop, rdp

在我所在的环境中，有多个用户使用 Windows XP 和 Windows 7。我在 Windows XP 上，如果我双击我创建的 .RDP 文件，我输入我要连接的 IP 地址到，它会让我登录。

但是，如果我去另一个用户，同样使用 Windows XP，双击完全相同的文件，输入完全相同的 IP 地址，它会提示用户选择用户名并输入密码。

我完全不知所措。帮助！

**编辑：**

好的，我被要求为此添加更多信息以进行澄清。

本地环境适用于 WinXP 或 Win7 计算机，连接到全国各地的 Server 2008 计算机。有成千上万个共享相同的登录信息，所以我将用户名和密码（当然是加密的）保存在 RDP 文件中。Active Directory 在我们的网络中实施。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-18T09:12:52.597

在我看来，您曾在自动登录的机器上保存了该 rdp 会话的凭据。像这样。

![xp的rdp登录](../Images/386863ab8b074ed6b1416361f576b471.png)

您会看到保存凭据的不是 rdp 文件，RDP 文件无法存储登录凭据。如果您想从您的机器中删除保存的凭据，请右键单击 rdp 文件并选择编辑，然后在下面的屏幕中选择删除。

![证书](../Images/d11b77975157f015f0e1aa118372e0e1.png)

但是，如果您希望创建一个 rdp 文件，而该文件从不提示用户输入凭据，则在 xp 中无法完成此操作，除非用户先输入凭据。但是，在 vista 和 win 7 中，您可以使用“cmdkey”，只需使用以下代码创建一个 bat 文件或 powershell 脚本

```
cmdkey /generic:TERMSRV/127.0.0.1 /user: $username /pass: $password 
```

删除

```
cmdkey /delete:TERMSRV/127.0.0.1 
```

记得修改ip地址和用户名密码

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-13T22:09:22.397

答案是 mstsc.exe 使用 crypt32.dll 来加密密码；根据[http://www.remkoweijnen.nl/blog/2007/10/18/how-rdp-passwords-are-encrypted/](http://www.remkoweijnen.nl/blog/2007/10/18/how-rdp-passwords-are-encrypted/)，它似乎是使用进行加密的人的用户 ID 进行散列和加密的时间。

这就是为什么它适用于我而不适用于其他人；我通过获取我的 RDP 文件，让其他人为自己复制并粘贴所述 RDP 文件，然后使用从上述链接下载的 exe 加密密码，将加密密码保存在 RDP 文件中，然后尝试连接到一台电脑。

# python - 为什么不建议使用 pyramid.threadlocal.get_current_request？

> ID：12323833
> 
> 赞同：2
> 
> 时间：2012-09-07T18:53:17.843
> 
> 标签：python, pyramid

我的假设是正确的请求对象不是保证的结果，但我想确切地知道为什么不建议这样做，推荐的方法是从视图函数将请求对象传递到管道中。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-07T20:03:54.510

在请求对象到达视图后，建议您不要将“原样”传递给任何非 Web 特定的代码。任何处理数据库等的代码都不应该与金字塔的请求概念相结合。这种模式在 Pyramid 中更容易遵循，因为它避免了全局请求对象。

请求对象包含有关为什么调用视图的所有内容，并且与该对象耦合的代码比必要的多，这将导致您在管道中进一步编写可能做“太多”的函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T20:51:56.317

我同意 Michael Merickel 的说法，但是我有很多遗留的 Pylons 应用程序已经被移植，并且需要在很多不同的代码中访问请求对象。

为了实现这一点，我几乎所有“面向网络”的函数都期望请求作为它们的第一个参数。我说几乎所有，因为有些没有。不是因为我不希望它们这样做，而是因为我还没有将它们移植到这个范例中。有一些模块没有与网络耦合，并且以其他方式命名和构造。[诸如文本处理之类的东西，由基于非金字塔的应用程序用于我的项目] 但是任何可能对请求起作用或与请求交互的东西——*无论我目前是否将请求作为第一个参数需要它*。

我的代码不标准的原因是我没有听像 Michael 这样的人，我仍然使用 get_current_request ......直到我开始遇到问题并理解他们警告我的内容——所以我一直我可以零零碎碎地修理东西。

让我远离使用 get_current_request() 的两个主要因素是：

1.  当我想要传递请求时：单元测试。我来自 Pylons，在那里我们拥有全局`g`和`c`对象。我真的很喜欢他们的便利。然后我尝试编写单元测试，这简直是一场噩梦。你经常不得不重写代码来阻塞一个请求对象。

2.  当我想要请求时：并非所有内容都与网络耦合。在某个项目中，我有几个守护进程通过 Twisted 框架运行定期工作。他们处理大量相同的数据并共享一些任务。我还有迁移脚本、crontabs 等。如果这些需要与 Pyramid 交互，我必须在重复项目中维护相同的功能。

所以我的方法是创建与金字塔紧密耦合并需要请求对象的库的一部分，以及与金字塔完全不可知的库的另一部分。

我的金字塔请求对象中有很多有用的东西——标头、会话、数据库连接等。这是一个非常方便的地方来存储面向“请求”的数据。每当有非金字塔系统可能使用的任务时，我都会这样实现它：

*   真正的函数位于 lib.universal 中，并且需要像 'dbSession' 这样的参数
*   如果需要，我还会创建一个位于 lib.pyramid 中的包装函数，并且只包装通用——从“请求”传入相关内容

他是一个简单而愚蠢的例子：

lib.universal

```
from ... import model
def get_user_by_id( dbSession , id , permissionsObject ):
    if not validate_permissions( permissionsObject ):
         raise ValueError('Not allowed')
    return dbSession.query( model.User ).filter( id=id ).first() 
```

lib.pyramid

```
from .. import universal
def get_user_by_id( request , id ):
    return universal.get_user_by_id( request.dbSession , id , request.permissionsObject     ) 
```

# unicode - 如何在vb6中以unicode格式从richtextbox获取文本

> ID：12323834
> 
> 赞同：1
> 
> 时间：2012-09-07T18:53:26.380
> 
> 标签：unicode, vb6, richtextbox

我尝试从 vb6 中的richtextbox 控件中获取文本。但是，这不起作用的 unicode 文本。

```
text1=richtextbox1.text 
```

这给了我`"????"`

有谁能够帮我？

* * *

此代码不起作用。我尝试使用以下声明运行它：

```
Const GTL_USECRLF = 1
Const GTL_PRECISE = 2
Const GTL_NUMCHARS = 8
Const CP_UNICODE = 1200
Const GT_USECRLF = 1
Private Type GETTEXTEX
    cb As Long
    flags As Long
    codepage As Integer
    lpDefaultChar As String
    lpUsedDefChar As Boolean
End Type
Private Type GETTEXTLENGTHEX
    flags As Long          ' /* flags (see GTL_XXX defines)              */
    codepage As Long       ' /* code page for translation (CP_ACP for default,
                            '1200 for Unicode                         */
End Type 
```

我不知道：

```
EM_GETTEXTLENGTHEX , EM_GETTEXTEX 
```

请发送完整的代码。（所有声明）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T03:32:30.393

真的很容易。以下是没有 required , 等声明的基本`Declare`框架`Const`：

```
public Declare Function SendMessageWLng Lib "user32" Alias "SendMessageW" (ByVal hWnd As Long, ByVal wMsg As Long, ByVal wParam As Long, ByVal lParam As Long) As Long

Public Const WM_USER = &H400
Public Const EM_GETSCROLLPOS = WM_USER + 221
Public Const EM_SETSCROLLPOS = WM_USER + 222

Public Const CP_UNICODE = 1200&
Public Const GT_USECRLF = 1&
Public Const GTL_USECRLF = 1&
Public Const GTL_PRECISE = 2&
Public Const GTL_NUMCHARS = 8&

Public Const EM_GETTEXTEX = WM_USER + 94
Public Const EM_GETTEXTLENGTHEX = WM_USER + 95

    Public Function RTBReadUnicode(ByVal RTB As RichTextLib.RichTextBox) As String
        'Reads Text from RichTextBox as Unicode text on a system with Rich Edit 3.0
        '(Windows Me, Windows 2000, or later).
        Dim gtlUnicode As GETTEXTLENGTHEX
        Dim gtUnicode As GETTEXTEX
        Dim lngChars As Long

        With gtlUnicode
            .flags = GTL_USECRLF Or GTL_PRECISE Or GTL_NUMCHARS
            .codepage = CP_UNICODE
        End With
        lngChars = SendMessageWLng(RTB.hWnd, EM_GETTEXTLENGTHEX, VarPtr(gtlUnicode), 0)

        With gtUnicode
            .cb = (lngChars + 1) * 2
            .flags = GT_USECRLF
            .codepage = CP_UNICODE
        End With
        RTBReadUnicode = String$(lngChars, 0)
        SendMessageWLng RTB.hWnd, EM_GETTEXTEX, VarPtr(gtUnicode), StrPtr(RTBReadUnicode)
    End Function 
```

# c# - 静态代码和实例代码之间的歧义

> ID：12323838
> 
> 赞同：13
> 
> 时间：2012-09-07T18:53:40.173
> 
> 标签：c#, visual-studio-2010, oop

我的类中有两个项目：一个是公共属性，另一个是带有参数的静态方法。

我真的不明白为什么 Visual Studio 2010 看不到这两项之间的区别。

有人可以向我解释一下吗？

这是代码：

```
public bool IsShipped {
  get {
    #region ' Test Code '
    if (!String.IsNullOrEmpty(TrailerNo) || (TruckDate != Global.NODATE)) {
      return true;
    }
    #endregion
    return false;
  }
}

public static bool IsShipped(string boxNumber) {
  var array = GetCrate(boxNumber);
  if (array != null) {
    foreach (var item in array) {
      if (item.IsShipped) {
        return true;
      }
    }
  }
  return false;
} 
```

这是错误：

> 错误 1 ​​'AcpClasses.AcpPackNShip.IsShipped' 和 'AcpClasses.AcpPackNShip.IsShipped(string)' C:\Users\cp-jpool\My Projects\VS\Live\Common\Classes\AcpPackShip.cs 242 20 CoilPC

![截屏](../Images/5db390eca9ec75a54d79a0a6a70f081f.png)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-07T18:57:11.823

可以将方法称为委托，而不仅仅是通过调用它。例如，以下可能是该方法的有效使用：

```
Func<string, bool> myFunction = item.IsShipped; 
```

鉴于不需要用括号实际调用该方法，因此无法确定是否`item.IsShipped`应该引用方法组`IsShipped`或作为 property `IsShipped`。

即使*允许*，也可能会导致混乱。从代码维护的角度来看，最好为属性/方法使用不同的名称，即使编译器足够聪明，知道何时使用哪一个（或者更糟糕的是，如果它只是任意选择一个）。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-07T18:57:03.647

您可以重载具有不同签名的方法，但不能拥有与方法同名的字段或属性。

这是因为方法的原始名称计算为方法组，在创建委托时使用。

这段代码清楚地显示了问题：

```
bool b = item.IsShipped;
Func<string, bool> d = item.IsShipped; 
```

# build - 在不同的团队项目中构建解决方案

> ID：12323843
> 
> 赞同：0
> 
> 时间：2012-09-07T18:54:00.807
> 
> 标签：build, tfs, tfsbuild

我在创建构建时遇到问题。我应该创建的构建是指两种不同的解决方案。在我意识到解决方案位于不同的团队项目中之前，这不是问题。TFS 是否可以通过修改`<SolutionToBuild>`属性来引用不同团队项目中的解决方案？

`TeamProject1 ->Src -->Solution1 --->Solution1.sln`

`TeamProject2 ->Src -->Solution2 --->Solution2.sln`

TFSBuild.proj 文件位于 Team Project 1 中，我们使用的是 TFS2008。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T19:00:25.830

对的，这是可能的。

您可以构建任何项目或解决方案，只要您确保解决方案或项目文件通过工作空间被拉下并且您正确引用它。

它使用引用路径，就像引用 dll 时一样。它可以是绝对的或相对的。你想通过相对路径来做到这一点。

在您的 TFS.proj 文件中，它将如下所示。当然，这取决于您的解决方案在哪里。

`<SolutionToBuild Include="$(BuildProjectFolderPath)/../../Solution1.sln">`

希望这可以帮助。

# php - 任何人都可以将此代码分解为可修改的格式

> ID：12323844
> 
> 赞同：-5
> 
> 时间：2012-09-07T18:54:10.513
> 
> 标签：php, function

我有一个脚本的 MRR 权限，但是这个函数是旧的并且不能正常工作。任何人都可以将其分解为可用的功能代码，以便我可以解决问题。我认为脚本中有多个功能。

```
function d($s, $k = '') {
    if ($k == '') {
        for ($i = 0; $i < strlen($s); $i) {
            $d. = chr(hexdec(substr($s, $i, 2)));
            $i = (float)($i) + 2;
        }
        return $d;
    } else {
        $r = '';
        $f = d('6261736536345f6465636f6465');
        $u = $f('Z3ppbmZsYXRl');
        $s = $u($f($s));
        for ($i = 0; $i < strlen($s); $i++) {
            $c = substr($s, $i, 1);
            $kc = substr($k, ($i % strlen($k)) - 1, 1);
            $c = chr(ord($c) - ord($kc));
            $r. = $c;
        }
        return $r;
    }
}
eval(d("lZTpbts4FIXfq2iQZJIHcGWb1GJZkdekSRxrcdo0M5gZoEU3pIkXWQtpUdZOKm6D9rHmJUZ23EHR/pq/JC9573cOj4+bEomYXcjifQNoby6hcG8MewL8+329SVJqFaJEFWC+NiEodAPPwghLRw8ecZrwoxfkgM5zN0uhT0GUk8L2KPKqDoUDp07ZfWiZnwQnCcP8uVc40YSv+iF2zDHvZyzQ1N79aqUurMRKXZSrdN4NMJ3wmj4ZDRZxzKouiZZUn/DgpN1vDQfl1h/y74EXeyjRlcUyoabecgaG6hiyMvhWY7aTuX7VqLCUznIUhWPPViDgFcC1am2Bolk+JZL+256YojG1SN0AKQvnMU5Ce454QRBUwNdb23sa2s7+7n6nC976FtTXA2ZJhWVZhmgKYmJDVMRz5qbBP3WUJ0nIdvfLm920YnIvUJI6MS8F+J5iB83aXDMrOwQ7+5T4IZLgHC8XsogjRfjKHe4CAHPymevq4NJdWEWiCDhVQKd/et7UwN7eCu7uj7BLkgiLEkrLeyqHTw93CZaARW3fb8oXJMZkJHeOGroSpDg0ZQXU6PKzCsQkydYrQKkqlfVbB3tV0S3suJzd+RxES+R9L2+0Nm2gwovG7amgbw5Dct4/31TdOIGPZZFU9YpEnBX1w5UAV5ut/9pgbuFjo9mRlbNeGtAQaXIDgoCi6JPottqzsp+MxJENN3NVSkf5LHTAOUyKzMqdFDsWlnm9NjaujY+X47VwQhMKjGShdXS+AbV54mfhbmcG36ryXJuTKGEECfpaC1BFIXYDWdZJSX2otI+Uiy4OgtCQW48Q7kTS7N+UVSwPq8ppybkOxDzH8ALmLJ/kVuY7DmrW9WeT0fXlhxef+AaslSZZn9n2U4QRZ5ZWT6wQh9HcRRJ/Mxs+GqkiZXSpaHt7O/sc9HLkEb45QB51ExIUKI3MpnokGOqPK2vh1nqNRayqs3J2186QncaBp2jVgyeQkxybOQtC0S8QBvzd1Svzgzaptet8ia7mTQtvkSTkOzp3XNh+nJNfgE/vzBKdAFs/nFFOD5/CuujOmOUvqY/AEESl3zOUEnuKRUEK2WBNw/h/VYvHqtEvVVsjeV5al/WRebb+3YDiB8vsQGS7jpHiGM1jW7HDYBoZuv2YJFAGKqjdx9Fdf1rtVJo1SO3cQ7E5dpd27JsQHm39M2nP6h0g6oozNDo4WbIyN64MIJdVkuVQtAhzF98cT0CnKp+5MeyY8vajlSZRNx2Cb9WuggNUX/k4tKCfxunBzsETKcFlBqKfqaqlAQROUEXq2KHnHQ0P9krPY4vEvD5HfmFTQ3/5xjy7Ghq+qc+AQ+1FmXWIxdlZr5MnFIVd251/6cyTRS9OC5S3+sqgfdw6Oz57Lp+cDs7bvVb/4u31tS66i4b216XZ652cXPSOe/K7P18NGzi1zAVj0VDpPXbYsdzpQ9tNgm7GVObZ+dxXPkwj7/0mGLVFmWLDPlgkaWL0BRyzi2PJZ8MeYNPNPzW2wXjLV4opxYgNJ9x8Fs3j5S0/MJw0YsAtVb5Yebk3i8cwCb4gowumqZ9mRu54gxuE74FNwsp3Yus/mINkCayr6YPWxWEcjwa9eZnqpFTH3fJ5PdJevtN0xbNLJrnGb7TYUoU6oFl+S+1sWZqkycG1+dWfMvwr6LaQj7gAAZQgO+AYjdi/", 663607275)); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T19:41:16.607

第一个分支的唯一`if`用途是解码

```
$f = d('6261736536345f6465636f6465'); 
```

作为一个简单的十六进制 ASCII 码序列，变为：

```
$f = 'base64_decode'; 
```

然后它使用它来解码 base64 字符串`Z3ppbmZsYXRl`，它变成：

```
$u = 'gzinflate'; 
```

所以它最终会：

```
$s = gzinflate(base64_decode($s)); 
```

`$s`底部的长输入字符串在哪里。

最后，`for`底部的循环使用简单的替换密码进行解码，其中的第二个参数`d()`是密钥。但是，它有一个语法错误（也许 PHP 曾经允许它）：

```
$r. = $c; 
```

应该：

```
$r .= $c; 
```

这是最终结果（Johnny Mopp 很接近，但他错过了某些字符串中的 HTML 代码）：

```
if((isset($v) AND $v==0) OR (isset($t) AND $t==false)){
  die('This script is protected by <a style=\"color:cyan\" 
       href=\"http://www.gencoder.sf.net\"><b><font color=\"#330099\">G-Encoder</font></b></a>');}
$search = str_replace(" ", "+",$search);
$search = str_replace("'", "",$search);

// The @ is to supress the function\264 errors

$fp = @fopen($newsfeed, 'r'); 
while(!feof($fp)){ 
  $row .= @fgets($fp, 4096); 
} 
@fclose($fp);  

if( eregi('<item>(.*)</item>', $row, $rowitem ) ) { 

 $item = explode('<item>', $rowitem[0]); 

$i=0;

 While($i < $maxshow) {

  eregi('<title>(.*)</title>', $item[$i+1], $title ); 
  $title = str_replace("<![CDATA[", "", $title);
  $title = str_replace("]]>", "", $title);

  eregi('<link>(.*)</link>', $item[$i+1], $url ); 
  $url = str_replace("<![CDATA[", "", $url);
  $url = str_replace("]]>", "", $url);

  eregi('<description>(.*)</description>', $item[$i+1], $categorie); 
  $categorie = str_replace("<![CDATA[", "", $categorie);
  $categorie = str_replace("]]>", "", $categorie);
  $categorie = str_replace("&lt;", "<", $categorie);
  $categorie = str_replace("&gt;", ">", $categorie);

  echo '<B><font size=2 face=verdana,arial><a href="' . 
       $url[1] . '" target=_blank>' . $title[1] . '</a></font></B> ' . 
       $categorie[1] . '<br />';  

$i++;

 } //end while loop

$search = str_replace("+", " ",$search);

 echo"<center><BR><B><i><a href=\"http://rover.ebay.com/rover/1/711-6294-2978-0/1?PID=$cj&AID=10369614&SID=&loc=http://search.ebay.com/ws/search/SaleSearch?fsoo=1&fsop=1&fts=1&ht=0&satitle=$search\" 
     target=\"_blank\"><font face=verdana size=2 color=red>
     View all $search items on eBay</font></a></i></b><BR><BR><BR></center>";

$search = str_replace(" ", "+",$search);

} //end if eregi stmt 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T19:36:02.663

$d 在第 5 行未定义。修复：

```
function d($s, $k = '') {
    if ($k == '') {
        $d = "";
    ... 
```

只是为了好玩，我解码了字符串。这是它试图评估的内容。很基本。为什么这么糊涂？

```
if((isset($v) AND $v==0) OR (isset($t) AND $t==false)){
    die('This script is protected by G-Encoder');
}
$search = str_replace(" ", "+",$search);
$search = str_replace("'", "", $search);
// The @ is to supress the function? errors
$fp = @fopen($newsfeed, 'r');
while(!feof($fp)){
    $row .= @fgets($fp, 4096);
}
@fclose($fp);
if( eregi('(.*)', $row, $rowitem ) ) {
    $item = explode('', $rowitem[0]); $i=0;
    While($i < $maxshow) {
        eregi('', $item[$i+1], $title );
        $title = str_replace("", "", $title);
        eregi('(.*)', $item[$i+1], $url );
        $url = str_replace("", "", $url);
        eregi('(.*)', $item[$i+1], $categorie);
        $categorie = str_replace("", "", $categorie);
        $categorie = str_replace("<", "<", $categorie);
        $categorie = str_replace(">", ">", $categorie);
        echo '' . $title[1] . ' ' . $categorie[1] . '';
        $i++;
    } //end while loop
    $search = str_replace("+", " ",$search);
    echo "View all $search items on eBay";
    $search = str_replace(" ", "+",$search);
} //end if eregi stmt 
```

我忘了提到我必须将“。=”更改为“。=”。

# php - 当我通过 CURL 发送压缩字符串时得到部分字符串？

> ID：12323848
> 
> 赞同：4
> 
> 时间：2012-09-07T18:54:39.760
> 
> 标签：php, string, curl, compression

我的本地服务器上有一个脚本。该脚本通过 CURL (POST) 将一些使用 gzip 压缩的数据发送到实时服务器，然后将其解压缩并将其存储在文件中。

当我将它发送到一个实时服务器时一切正常，但在另一台实时服务器上，如果我压缩字符串，我只会得到它的一部分。我尝试使用加密而不是压缩，问题是一样的。它仅在字符串“未触及”时才有效。

两台实时服务器位于两家不同的托管公司，并且它们具有不同的配置，我怀疑这是我的问题的原因，但我不确定原因是配置的哪一部分。我尝试使用小（40 kb 压缩）字符串，所以执行时间和内存不是问题。两台服务器上的 POST 大小均为 8MB。

有谁知道问题是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T16:27:10.447

wireshark 是要走的路；它会告诉你发生了什么。

# php - php里面的javascript

> ID：12323853
> 
> 赞同：0
> 
> 时间：2012-09-07T18:54:54.997
> 
> 标签：php, javascript, html

为什么以下代码不起作用？

```
<?php
$j= "<option value='kj' name='dd'>" ;
?>

<script type="text/javascript">
    function getinfo(a){     
    if(a==2){
    var k ="<?php echo $j;?>";
    alert(k);
    }

}
</script> 
```

当我说 $j="option";

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T18:59:33.537

这里有几种可能性：

1) 永远不会调用 getInfo。

2) a 永远不等于 2

3) 您页面上的其他 javascript 代码有错误。

编辑 4）：其他人指出警告框中可能不允许 $j 的内容。

这里的任何人都无法分辨它是什么。

# javascript - D3.js 和坐标系

> ID：12323854
> 
> 赞同：2
> 
> 时间：2012-09-07T18:54:55.987
> 
> 标签：javascript, d3.js

尝试 D3，但有一些问题。不确定忍受坐标系的最佳方法是什么。请在下面找到来源。

编辑：小提琴[在这里](http://jsfiddle.net/bW627/)

1.  `yScale -> .range([ height - padding, padding]);`我用代替模拟了倒置坐标`.range([ padding - height - padding]);`。这是最好的方法吗。如果 svg 中的所有对象都需要正确定向，是否最好应用于最外面的元素？

    `var svg = d3.select("#chart").append("svg")
    .attr("width", width + margin.right + margin.left)
    .attr("height", height + margin.top + margin.bottom)
    .append("g") <---`

2.  较大的矩形（{"X":100, "Y": 100, "W":40, "H": 40}）在轴之外。所以，我做错了什么。

高度赞赏使该图表包含在轴内并具有适当的缩放和方向的任何帮助。

## 索引.html

```
<!DOCTYPE html>
<html>
  <head>
    <title>Test</title>
    <script type="text/javascript" src="d3.v2.min.js"></script>
    <link type="text/css" rel="stylesheet" href="style.css"/>
  </head>
  <body>
    <div id="chart"></div>
    <script type="text/javascript" src="script.js"></script>
  </body>
</html> 
```

## 脚本.js

```
var margin = {top: 10, right: 20, bottom: 20, left: 10},
    width = 960 - margin.right - margin.left, 
    height = 480 - margin.top - margin.bottom
    padding = 40; 

var data = [
    {"X":10, "Y": 10, "W":10, "H": 10}, 
    {"X":100, "Y": 100, "W":40, "H": 40}
]

var xScale = d3.scale.linear()
         .domain([0, d3.max(data, function(d) { return d.X; })])
     .range([padding, width - padding]),
    yScale = d3.scale.linear()
         .domain([0, d3.max(data, function(d) { return d.Y; })])
     .range([  height -  padding, padding]);

var xAxis = d3.svg.axis().scale(xScale).orient("bottom"),
    yAxis = d3.svg.axis().scale(yScale).orient("left");

var svg = d3.select("#chart").append("svg")
    .attr("width", width + margin.right + margin.left)
    .attr("height", height + margin.top + margin.bottom)
  .append("g")
    .attr("transform", "translate(" 
            + margin.left  + "," 
            + margin.top + ")");

svg.selectAll("rect")
        .data(data)
      .enter().append("rect")
        .attr("x", function(d) { return xScale(d.X); }) 
        .attr("y", function (d) { return  yScale(d.Y); })
        .attr("width", function (d) { return  (d.W); })
        .attr("height", function (d) { return  (d.H); })

//Create X axis
svg.append("g")
    .attr("class", "axis")
    .attr("transform", "translate(0," + (height - padding) + ")")
    .call(xAxis);

//Create Y axis
svg.append("g")
    .attr("class", "axis")
    .attr("transform", "translate(" + padding + ",0)")
    .call(yAxis); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T04:02:03.717

回复 1.：是的，这是最好的方法。

另请注意，当您“翻转”这样的比例然后将宽度输入其中时，D3 不会保存您的培根，这将是负面的：当使用 SVG 高度属性时，那些将被标记为非法 SVG 内容和浏览器会吐一个毛球（不显示你想要的）。

Re 2.：一旦你纠正了你的负宽度/高度，那么你可以通过将你的 s 包裹在一个剪切矩形中来防止“在区域之外绘图”；这可以通过将它们放在一个单独的组中来完成，然后分配一个与您的输出区域匹配的剪切矩形。

对于＃1，另请参阅回复您对邮件列表的问题：

[http://bl.ocks.org/3671490](http://bl.ocks.org/3671490)

已修复所有错误并显示正确的矩形。

样式问题：您的代码只能使用线性轴，因为您通过一次调用 xScale/yScale 转换宽度和高度，而不是先计算域空间中的绝对坐标，然后通过比例转换两者以计算宽度/高度输出空间。为了证明新方法也适用于对数空间，这里是上述要点的副本，使用对数/对数比例：

[http://bl.ocks.org/3671592](http://bl.ocks.org/3671592)

代码是“粗略”的，因为所有计算都是明确完成的，并且没有“不变量”移动到 .attr() 调用之外：x1/y1/x2/y2 被计算多次，因为每个 .attr() 需要其中两个。这类事情通常是通过在将数据提供给 d3.selection.data() 之前设置数据（预先计算/排序/交换/任何需要的）来“解决”的。

经验教训：在使用 SVG 时，您需要做更多的工作才能完全与规模无关；如果您想要更快的代码，则需要准备数据，以便输出生成有效的 SVG（此处：'processed' input = [{X:80,Y:80,W:10,H:-60]]） ，特别是宽度和高度的正值（或类似地 x2 > x1 和 y2 > y1 ）

# php - 我的 $_SESSION ['page'] 在哪里？

> ID：12323855
> 
> 赞同：0
> 
> 时间：2012-09-07T18:54:57.987
> 
> 标签：php

在这个网络爬虫中，我不明白会话变量“页面”来自哪里？任何人都有任何想法。它从给定的网页收集所有 url，我试图破译它的作用。我做得很好，但我想知道 a) $_SESSION['page'] 来自哪里？b) 为什么 $_SESSION [i] 在 if 语句中递增。

```
 <?php

  session_start();

 $domain = "www.ebay.com";

  if(empty($_SESSION['page']))
  {
 $original_file = file_get_contents("http://" . $domain . "/");

 $_SESSION['i'] = 0;

  $connect = mysql_connect("xxx", "xxx", "xxxx");

  if (!$connect)
  {
  die("MySQL could not connect!");
 }

 $DB = mysql_select_db('xxx');

  if(!$DB)
 {
  die("MySQL could not select Database!");
   }
 }
   if(isset($_SESSION['page']))
    {

   $connect = mysql_connect("xxxx", "xxx", "xxx");

   if (!$connect)
 {
    die("MySQL could not connect!");
 }

  $DB = mysql_select_db('xxx');

    if(!$DB)
    {
 die("MySQL could not select Database!");
 }
   $PAGE = $_SESSION['page'];
    $original_file = file_get_contents("$PAGE");
      }

    $stripped_file = strip_tags($original_file, "<a>");
     preg_match_all("/<a(?:[^>]*)href=\"([^\"]*)\"(?:[^>]*)>(?:[^<]*)<\/a>/is", $stripped_file, $matches);

    foreach($matches[1] as $key => $value)
    {

    if(strpos($value,"http://") != 'FALSE' && strpos($value,"https://") != 'FALSE')
    {
     $New_URL = "http://" . $domain . $value;
       }
     else
       {
      $New_URL = $value;
          }
      $New_URL = addslashes($New_URL);
      $Check = mysql_query("SELECT * FROM pages WHERE url='$New_URL'");
       $Num = mysql_num_rows($Check);

       if($Num == 0)
       {
      mysql_query("INSERT INTO pages (url)
      VALUES ('$New_URL')");

       $_SESSION['i']++;

      echo $_SESSION['i'] . "";
       }
         echo mysql_error();
        }

 $RandQuery = mysql_query("SELECT DISTINCT * FROM pages ORDER BY RAND() LIMIT 0,1");
 $RandReturn = mysql_num_rows($RandQuery);
  while($row1 = mysql_fetch_assoc($RandQuery))
     {
    $_SESSION['page'] = $row1['url'];
    }

    echo $RandReturn;
    echo $_SESSION['page'];
    mysql_close();

         ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T18:59:56.310

它的代码很糟糕，但据我所知 $_SESSION['page'] 是从最后一节的数据库循环中设置的。由于会话已设置，那么下次调用 PHP 脚本时，IF 将返回 true...

爬虫代码从给定的 www 站点获取所有 A 标签并将其保存到数据库中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T18:59:45.860

$_SESSION['page'] 变量由您设置。您必须设置此项，会话在浏览器中创建一个 cookie 用于存储用户会话信息。在您的代码中，您检查 $_SESSION['page'] 是否存在，但您实际上从未给它一个值，因此您的代码

```
if (isset($_SESSION['page'])) {
    // ...
} 
```

永远不会被执行，因为你从未设置它。$_SESSION 用于登录，例如 $_SESSION['username'], $_SESSION['user-id']

**编辑：**我看到你设置了它，但是当你在你的 while 循环中设置它时，你只是在每次迭代时都覆盖它，试着把它变成一个数组：

```
$i = 0;
while (condition) {
    $_SESSION['page'][i] = value;
    $i++;
} 
```

# r - 如何手动设置线性模型中变量的系数？

> ID：12323859
> 
> 赞同：9
> 
> 时间：2012-09-07T18:55:37.577
> 
> 标签：r, linear-regression, lm

~~在 R 中，如何**设置特定变量的权重**而不是函数中的观察`lm()`值？~~

上下文如下。我正在尝试为特定产品（例如手机）建立个人排名系统。我可以基于价格作为因变量和其他特征（如屏幕尺寸、内存、操作系统等）作为自变量来构建线性模型。然后我可以用它来预测手机的实际成本（而不是声明的价格），从而找到最佳的价格/质量系数。这是我已经做过的。

现在我想**“突出”一些**只对我很重要的功能。例如，我可能需要一个大内存的手机，因此我想给它更高的权重，以便线性模型针对内存变量进行优化。

`lm()`R中的函数有`weights`参数，但这些是观察的权重而不是变量（如果这是错误的，请纠正我）。我也尝试过使用公式，但只得到解释器错误。有没有办法将变量的权重合并到 中`lm()`？

当然，`lm()`功能并不是唯一的选择。如果您知道如何使用其他类似的解决方案（例如`glm()`），这也很好。

**UPD。**经过几次评论后，我明白我思考问题的方式是错误的。通过调用获得的线性模型`lm()`为训练示例提供了最佳系数，并且没有办法（也不需要）改变变量的权重，很抱歉我造成了混淆。我实际上正在寻找的是更改现有线性模型中的系数以手动使某些参数比其他参数更重要的方法。继续前面的例子，假设我们有以下价格公式：

```
price = 300 + 30 * memory + 56 * screen_size + 12 * os_android + 9 * os_win8 
```

该公式描述了价格和电话参数之间相关性的最佳可能线性模型。但是，现在我想手动将`memory`变量前面的数字 30 更改为 60，所以它变成：

```
price = 300 + 60 * memory + 56 * screen_size + 12 * os_android + 9 * os_win8 
```

当然，这个公式不再反映价格和手机参数之间的最佳关系。此外，因变量没有显示实际价格，只是一些善值，考虑到记忆对我来说比普通人重要两倍（基于第一个公式的系数）。但是这种善良的价值（或者，更准确地说，分数的价值`goodness/price`）正是我所需要的——拥有这个我可以找到最好的（在我看来）价格最优惠的手机。

希望所有这些都有意义。现在我有一个（可能非常简单）的问题。如何**在现有的线性模型中手动设置系数**，获得的`lm()`？也就是说，我正在寻找类似的东西：

```
coef(model)[2] <- 60 
```

这段代码当然不起作用，但你应该明白。注意：显然可以将`memory`数据框中的列中的值加倍，但我正在寻找更优雅的解决方案，影响模型，而不是数据。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T19:36:49.603

看起来您正在进行优化，而不是模型拟合（尽管模型拟合中可以进行优化）。您可能想要类似`optim`函数的东西，或者研究线性或二次规划（`linprog`和`quadprog`包）。

如果您坚持使用建模工具，`lm`那么请使用`offset`公式中的参数来指定您自己的乘法器，而不是计算一个。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-07T23:15:34.717

下面的代码有点复杂，因为`lm()` *最小化*了残差平方和，并且使用固定的非最优系数，它不再是最小的，所以这将与`lm()`试图做的事情背道而驰，唯一的方法是也修复所有剩余的系数。

为此，我们必须首先知道无限制模型的系数。所有的调整都必须通过更改模型的公式来完成，例如我们有 `price ~ memory + screen_size`，当然还有隐藏的截距。现在，直接更改数据或使用数据都不`I(c*memory)`是好主意。`I(c*memory)`也像数据的临时更改，但是通过转换变量仅更改*一个*系数会困难得多。

所以首先我们更改`price ~ memory + screen_size`为`price ~ offset(c1*memory) + offset(c2*screen_size)`. 但是我们没有修改截距，它现在将尝试最小化残差平方和，并可能与原始模型不同。最后一步是*删除*截距并添加一个新的假*变量*，即与其他变量具有相同数量的观察值：

`price ~ offset(c1*memory) + offset(c2*screen_size) + rep(c0, length(memory)) - 1`

```
# Function to fix coefficients
setCoeffs <- function(frml, weights, len){
  el <- paste0("offset(", weights[-1], "*", 
               unlist(strsplit(as.character(frml)[-(1:2)], " +\\+ +")), ")")
  el <- c(paste0("offset(rep(", weights[1], ",", len, "))"), el)                                 
  as.formula(paste(as.character(frml)[2], "~", 
                   paste(el, collapse = " + "), " + -1"))
}
# Example data
df <- data.frame(x1 = rnorm(10), x2 = rnorm(10, sd = 5), 
                 y = rnorm(10, mean = 3, sd = 10))
# Writing formula explicitly 
frml <- y ~ x1 + x2
# Basic model
mod <- lm(frml, data = df)
# Prime coefficients and any modifications. Note that "weights" contains 
# intercept value too
weights <- mod$coef
# Setting coefficient of x1\. All the rest remain the same
weights[2] <- 3
# Final model
mod2 <- update(mod, setCoeffs(frml, weights, nrow(df)))
# It is fine that mod2 returns "No coefficients" 
```

此外，您可能`mod2`只会将其用于预测（实际上我不知道现在还能在哪里使用它），因此可以以更简单的方式进行，而无需`setCoeffs`：

```
# Data for forecasting with e.g. price unknown
df2 <- data.frame(x1 = rpois(10, 10), x2 = rpois(5, 5), y = NA)
mat <- model.matrix(frml, model.frame(frml, df2, na.action = NULL))
# Forecasts
rowSums(t(t(mat) * weights)) 
```

# string - 安全地调整和删除 std::string

> ID：12323862
> 
> 赞同：0
> 
> 时间：2012-09-07T18:55:44.013
> 
> 标签：string, security, visual-c++, resize

我有一个包含字符串的类。目前，它是一个 std::wstring 但不一定是。[我在这里](https://stackoverflow.com/questions/5698002/how-does-one-securely-clear-stdstring)读到不应使用 std::string ，但我想知道这样的事情是否可行：

```
if (aString.length() == aString.capacity() )
{
    std::wstring oldString = aString;
    aString = wstring(aString);
    aString.reserve(PREALLOCATION_AMOUNT);
    SecureZeroMemory((PVOID)oldString.c_str(),oldString.size());
    oldString.clear();
} 
```

这基本上等同于字符串缓冲区的安全重新分配吗？如果没有，有更好的解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T19:05:48.937

不能保证`c_str()`将指向原始缓冲区而不进行复制。这*可能*就是它的工作方式，但是如果不查看您的具体实现，就无法确定`basic_string`.

确保安全有足够多的潜在问题`std::wstring`，我会完全避免它并找到一个安全的字符串类或自己编写。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T19:09:18.140

我不知道这是否真的有效，但也许你可以试试这个：

```
#include <algorithm>
#include <string>

// ...

std::string password = "sekrit";
std::fill(password.begin(), password.end(), 0); 
```

当然，这假设您的字符串从未调整大小。如果是，您将无法访问存储字符串开头的内存。正如其他人指出的那样，这可能是一个坏主意。

# ruby-on-rails - Rails authlogic/user 无法检查错误。

> ID：12323863
> 
> 赞同：0
> 
> 时间：2012-09-07T18:55:49.857
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord, authlogic

我正在尝试在 rails 中引用当前用户的值。当前用户通过authlogic登录，但不存在错误。难道我做错了什么？我只是想安全并告诉他们为什么他们不能输入地址。

```
<%= form_for(current_user.address.build) do |f| %>
  <% if current_user.address.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(current_user.address.errors.count, "error") %> prohibited this user from being saved:</h2>

      <ul>
      <% current_user.address.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
      </ul>
    </div>
  <% end %> 
```

错误：

```
undefined method `errors' for #<ActionView::Helpers::FormBuilder:0x007f9584665e88> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T19:56:39.717

删除`.any?`再试一次，祝你好运，你
也可以使用`.present?`方法或`.blank?`

# c++ - 以编程方式更改图像源

> ID：12323864
> 
> 赞同：0
> 
> 时间：2012-09-07T18:55:56.660
> 
> 标签：c++, xaml, windows-8, microsoft-metro

我无法弄清楚如何将图像从磁盘动态加载到 Xaml 图像控件。

```
<Image x:Name="imgLogo" ....../> 
```

然后在我的 c++ 类中，我找不到任何我发现的示例。大多数都在c#中。一个烦恼是我一直看到 System.Windows.Media::ImageSource 被使用，但这不在我的框架中。

有人可以给我举个例子吗。我来自 iOS 世界，不习惯 MS 和他们的框架。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T19:01:12.280

试试这个，它在 C# 中，但应该很容易转换：

```
using Windows.UI.Xaml.Media.Imaging;

<Image Margin="5" Source="{Binding BMImage}" Height="100"/>

bmImage = new BitmapImage();
bmImage.UriSource = new Uri(new Uri(
     *your file path*, 
     *your image name*);

BitmapImage bmImage;
public BitmapImage BMImage
{
    get
    {
        return bmImage;
    }
} 
```

取自[这里](http://windows8applicationdevelopment.blogspot.com/2012/09/loading-resources.html)（我的博客）。

要更改图像，只需更改`bmImage`并调用`NotifyPropertyChanged(()=>BMImage);`（假设您有该设置）

有关如何使用图像的 Microsoft 示例，请参见[此处。](http://code.msdn.microsoft.com/windowsapps/0f5d56ae-5e57-48e1-9cd9-993115b027b9/sourcecode?fileId=44756&pathId=2647585)

有关名称空间，请参见[此处。](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.media.imaging)`Windows.UI.Xaml.Media.Imaging`

# objective-c - iOS MVC：模型在哪里适合 CoreData 应用程序？

> ID：12323866
> 
> 赞同：4
> 
> 时间：2012-09-07T18:56:08.763
> 
> 标签：objective-c, ios, model-view-controller, core-data, model

我刚刚开始使用 CoreData 制作应用程序，但我熟悉 MVC 概念，因为我曾经使用（和开发）MVC 框架在 Web 开发方面做了大量工作。

根据我的收集，CoreData 会自动生成继承自 NSManagedObject 的类。对象是通过对上下文的获取请求或通过将新对象插入上下文来创建的。在我见过的应用程序中，除了与其在数据库中的属性相对应的属性之外，这些对象都是空的，本质上使它们成为模仿实体表中一行的对象。

这些自动生成的类和 CoreData 本身构成了应用程序模型，这是有道理的。在我传统上制作的应用程序中，有一个`Model`类负责处理所有数据。这通常是一个 Singleton 类，每个需要模型的控制器都可以简单地使用`self.model = [Model sharedInstance];`. 对于更大的应用程序，可能有多个模型而不是一个巨大的模型。你得到图片。我想我的第一个问题是：我说的对吗？CoreData 及其关联的 NSManagedObject 构成了应用程序的整个模型？

我猜这是错误的，因为应用程序可能需要其他功能来处理没有分配 CoreData 对象的数据。例如：如果 CoreData 应用程序需要使用通过 foo.com/test 的 HTTP 请求检索到的数据（假设它是 JSON 数据）来填充表视图，该怎么办。这些数据不需要存储在 CoreData 中，但同时，我不认为检索和解析数据是控制器的工作。是否应该有一个对象`FooDataManager`（或类似的东西）来处理 HTTP 请求以管理来自 foo.com 的数据（它可以扩展 AFHTTPClient）。然后处理 foo.com 的控制器有一个属性 for `fooDataManager`，它充当该控制器的模型？然后控制器会调用`[self.fooDataManager retrieveAndParseData];`?

我想在开始开发 CoreData 应用程序之前验证这些信息，以便从一开始就正确地完成它。在 Web 开发中，我习惯于每个控制器都有一个模型，但在 iOS 上，似乎可以有很多模型都做自己的事情，许多控制器使用这些模型，所有这些模型都是附加的到 CoreData 和 NSManagedObjects。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T21:12:49.437

> 根据我的收集，CoreData 会自动生成继承自 NSManagedObject 的类。

没有。除非你指定给定实体使用你编写的 NSManagedObject 子类，否则 Core Data 返回的对象是 NSManagedObject 的实例。

> 我想我的第一个问题是：我说的对吗？CoreData 及其关联的 NSManagedObject 构成了应用程序的整个模型？

这取决于应用程序。如上所述，如果您希望给定实体映射到您提供的 NSManagedObject 子类，您可以这样做。如果您希望数据对象包含实体属性的访问器之外的方法，这将很有用。例如，您可以实现一种`-compare:`方法来促进按特定顺序进行排序，或者实现`-getCurrentImage`一种从 Web 服务器检索产品图像的方法。此外，您的模型可能包含一个或多个模型控制器类来处理诸如获取请求之类的事情，因此程序的其余部分甚至不需要知道模型使用 Core Data。

> 应用程序可能需要处理没有分配 CoreData 对象的数据的其他功能......如果 CoreData 应用程序需要使用通过来自 foo.com/test 的 HTTP 请求检索到的数据填充表视图怎么办

您绝对可以将该功能放在一个单独的类中，并将其视为您的模型的一部分，我会说这可能是一个好主意。许多 iOS 程序员可能会因为它看起来很方便而将它放在视图控制器中，但我同意将其作为模型的一部分是一个更好的计划。

# wordpress - 将多个自定义用户角色分配给自定义帖子类型

> ID：12323869
> 
> 赞同：1
> 
> 时间：2012-09-07T18:56:20.373
> 
> 标签：wordpress, custom-post-type, user-roles

好的，情况就是这样......我正在开发我的商业网站。将有一个工作/投资组合区。“工作”是一种自定义帖子类型。“设计师”是自定义用户角色。“客户”是自定义用户角色。

在创建一个新的“工作”帖子时，我希望能够选择一个“设计师”和“客户”来分配给这件作品，就像我会为一个普通的帖子分配一个作者一样。

我尝试了这个[答案](https://wordpress.stackexchange.com/questions/25383/assign-a-custom-role-to-a-custom-post)的方法，但它对我不起作用。）我把它放在我的functions.php文件中。

` add_filter('wp_dropdown_users', 'test'); 功能测试（$输出）{全局$post；

```
 //Doing it only for the custom post type
    if($post->post_type == 'work')
    {
        $users = get_users(array('role'=>'designer'));
       //We're forming a new select with our values, you can add an option 
       //with value 1, and text as 'admin' if you want the admin to be listed as well, 
       //optionally you can use a simple string replace trick to insert your options, 
       //if you don't want to override the defaults
       $output .= "<select id='post_author_override' name='post_author_override' class=''>";
    foreach($users as $user)
    {
        $output .= "<option value='".$user->id."'>".$user->user_login."</option>";
    }
    $output .= "</select>";
 }
 return $output;
} 
```

`

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T21:34:12.633

这个插件可能是你正在寻找的 [http://wordpress.org/extend/plugins/members/](http://wordpress.org/extend/plugins/members/)

如果您不想使用插件，本教程也可能会有所帮助：http: [//shoutingwords.com/how-to-add-custom-user-roles-like-guest-author-to-your-wordpress-博客.html](http://shoutingwords.com/how-to-add-custom-user-roles-like-guest-author-to-your-wordpress-blog.html)

# php - Zend_Controller_Router_Exception: Route list_profile 未定义

> ID：12323876
> 
> 赞同：0
> 
> 时间：2012-09-07T18:56:41.337
> 
> 标签：php, zend-framework, routes, router, socialengine

注意：我确实尝试了以下链接中列出的答案，但它们根本不适合我。

[Zend_Controller_Router_Exception: 路由默认没有定义](https://stackoverflow.com/questions/8765717/zend-controller-router-exception-route-default-is-not-defined)

[Zend_Controller_Router_Exception：未指定“xyz”](https://stackoverflow.com/questions/1264834/zend-controller-router-exception-xyz-is-not-specified)

您好，过去几天我一直在努力解决这个问题。现在看起来更像是一个星期（我对大部分内容都是新手）。

基本上我正在使用名为“列表/目录展示”的插件运行社交引擎 4.2.4，我无法终生修复当我搜索任何列表或标题中列出的任何单词时遇到的错误的清单。

当用户从搜索栏中的任何列表中搜索任何术语并阻止所有用户获得列表中包含的单词的搜索结果时，就会发生错误。

这是错误日志

```
 Error Code: ee9a2c
    exception 'Zend_Controller_Router_Exception' with message 'Route list_profile         is     not defined' in /mysite/public_html/application/libraries        /Zend/Controller/Router/Rewrite.php:310
     Stack trace:
     #0 /mysite/public_html/application/libraries/Zend/Controller/Router                /Rewrite.php(440):                         Zend_Controller_Router_Rewrite->getRoute('list_profile')
     #1 /mysite/public_html/application/modules/List/Model/Album.php(35):                 Zend_Controller_Router_Rewrite->assemble(Array,         'list_profile', true)
     #2 /mysite/public_html/application/modules/Core/views/scripts/search/index.tpl(44): List_Model_Album->getHref()
     #3 /mysite/public_html/application/libraries/Zend/View.php(108): include('/mysite/public_html...')
     #4 /mysite/public_html/application/libraries/Zend/View/Abstract.php(835): Zend_View->_run('/mysite/public_html...')
     #5 /mysite/public_html/application/libraries/Zend/Controller/Action/Helper/ViewRenderer.php(903): Zend_View_Abstract->render('search/index.tp...')
     #6 /mysite/public_html/application/libraries/Zend/Controller/Action/Helper/ViewRenderer.php(924): Zend_Controller_Action_Helper_ViewRenderer->renderScript('search/index.tp...', NULL)
     #7 /mysite/public_html/application/libraries/Zend/Controller/Action/Helper/ViewRenderer.php(963): Zend_Controller_Action_Helper_ViewRenderer->render()
     #8 /mysite/public_html/application/libraries/Zend/Controller/Action/HelperBroker.php(277): Zend_Controller_Action_Helper_ViewRenderer->postDispatch()
     #9 /mysite/public_html/application/libraries/Zend/Controller/Action.php(523): Zend_Controller_Action_HelperBroker->notifyPostDispatch()
     #10 /mysite/public_html/application/libraries/Zend/Controller/Dispatcher/Standard.php(289): Zend_Controller_Action->dispatch('indexAction')
     #11 /mysite/public_html/application/libraries/Zend/Controller/Front.php(946): Zend_Controller_Dispatcher_Standard->dispatch(Object(Zend_Controller_Request_Http), Object(Zend_Controller_Response_Http))
     #12 /mysite/public_html/application/modules/Core/Bootstrap.php(75): Zend_Controller_Front->dispatch()
     #13 /mysite/public_html/application/libraries/Engine/Application.php(160): Core_Bootstrap->run()
     #14 /mysite/public_html/application/index.php(194): Engine_Application->run()
     #15 /mysite/public_html/index.php(24): include('/mysite/public_html...')
     #16 {main} 
```

我检查了文件，它似乎来自模块目录中的 bootstrap.php 文件。但是在我重写了 30 次之后（我的编码技能在这方面非常基础），我仍然无法弄清楚如何让它工作，所以它会出现在搜索结果中。

我确实尝试在我从在线源编辑的 bootstrap.php 文件中添加一个新代码，但它返回的结果与代码是/是相同的结果。

```
 class list_Bootstrap extends Engine_Application_Bootstrap_Abstract
     {
         protected function _initRouter(){
             $fc = Zend_Controller_Front::getInstance();
             $router = $fc->getRouter();
             $router->addRoute('list', new Zend_Controller_Router_Route('listingitems/:listing_id', array('module' => 'list', 'controller' => 'index','action' => 'view')));

             return $router;
         }

      } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-29T07:06:19.483

我最近在我自己的模块中遇到了同样的问题。路由是在 manifest.php 中声明的，但由于有很多大括号，我错误地将“路由”数组放在“包”之一中，而它们必须在同一级别。

# excel-2007 - 将数字从一个工作表移动到另一个工作表，但有例外

> ID：12323880
> 
> 赞同：1
> 
> 时间：2012-09-07T18:56:49.403
> 
> 标签：excel-2007

我正在努力将气体报告放入 Excel。

如何将新的汽油价格移至下一个工作表（天），但如果没有新价格，请将原始价格移至下一个工作表？

例子：

`B6`具有今天报告中使用的 gas 价格 ( `sheet1`)，并且`C6`可能具有用于明天报告 ( `Sheet2`) 的新价格。如果`C6`有一个值，那么我希望它移动到`B6`of `Sheet2`，但如果它没有，那么我希望`B6`in`sheet1`的报告的值移动到`Sheet2`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T00:00:30.390

尝试将其放入 sheet2 的 B6 中：

```
=IF(ISBLANK(sheet1!c6),sheet1!B6,sheet1!C6) 
```

德文版：

```
=WENN(ISTLEER(sheet1!c6);sheet1!B6;sheet1!C6) 
```

# c# - AllowSetForegroundWindow & SetForegroundWindow：NPAPI插件想要允许桌面应用程序不成功

> ID：12323882
> 
> 赞同：1
> 
> 时间：2012-09-07T18:56:57.780
> 
> 标签：c#, windows, winapi, npapi

这就是我所拥有的：一个用 C++ 编写的 Web 浏览器插件和一个用 C# 编写的 Windows 应用程序。它们通过命名管道进行通信。该插件指示 C# 应用程序打开一个文件（假设该文件是 .txt 并在记事本中打开）。

一旦 C# 应用程序收到命令，它就会打开文件，但记事本没有显示在前台，这是不可接受的，我必须在前台打开记事本。

我修改了 C# 应用程序，以便它调用该`SetForegroundWindow`函数。这次记事本没有在前台打开，而是任务栏闪烁。

在阅读了`SetForegroundWindow`许多文章的文档后，我认为现在我明白了问题所在：C# 应用程序无法将记事本带到前台，因为它不是前台进程，浏览器是（？）。

读完后：

> “一个可以设置前台窗口的进程可以通过调用AllowSetForegroundWindow函数让另一个进程设置前台窗口。”

我决定修改插件。

这次插件调用作为参数`AllowSetForegroundWindow`传递的函数（我知道，可能有风险，但我想确保这样做）。`ASFW_ANY``ASFW_ANY``AllowSetForegroundWindow`

在我对插件进行修改后，我对其进行了测试，它确实有效！（歌剧 12.02）。然后我在 Internet Explorer 上对其进行了测试，它也可以正常工作。但是当我在 Firefox 和 Chrome 中测试它时，问题就来了。C# 应用程序无法将记事本置于前台。我注意到对于那些浏览器，该`AllowSetForegroundWindow`函数返回 false。

所以我开始调查，我得出的结论可能是因为 Firefox 使用的插件容器。我想到了一个想法：它在 Opera 12.02 中工作，但他们没有插件容器，虽然他们在 Opera 12.00 中有。所以我下载了 Opera 12.00，我做了测试，但它失败了，这让我得出结论，插件容器是罪魁祸首。

问题是：如何赋予 C# 应用程序设置前景的能力？

我不知道如何继续，我认为我尝试了所有合法的方式。`AllowSetForegroundWindow`&`SetForegroundWindow`似乎不适用于这里。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T03:33:23.290

您很可能无法通过插件为 C# 应用程序提供该功能，因为插件进程也不是前台进程——它实际上在不同的进程中运行，至少在您可用的几个浏览器上运行。在 IE 上您不是，但您处于低完整性进程中，因此您自己启动该进程[需要一个注册表项](http://msdn.microsoft.com/en-us/library/bb250462%28v=vs.85%29.aspx#wpm_elebp)，指定可以启动该应用程序。

我必须同意你的观点——我认为你已经尝试了所有合法的方法，但这是不可能的。哎呀，即使是安装程序也经常在最近版本的 Windows 中在后台打开重要的窗口。

# php - 网站只要求在 Internet Explorer 中保存网页

> ID：12323892
> 
> 赞同：0
> 
> 时间：2012-09-07T18:57:35.800
> 
> 标签：php, internet-explorer

[http://www.bumcheekcity.com](http://www.bumcheekcity.com)

当有人在 Internet Explorer 中查看我的网站时，它只要求下载/保存网页，但在其他浏览器中可以正常工作。我只使用 Linux，所以无法解决问题。这是一个常见问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-07T19:03:46.440

您的服务器返回的`Content-Type`标头具有一个值，`utf-8`而它应该看起来像这样：

```
Content-Type: text/html; charset=utf-8 
```

我认为这可能是导致 IE 触发下载的原因，因为它不熟悉该内容类型。就这个问题的原因而言，它可能是一百万件事。尝试查看您的服务器配置。

# php - CakePHP 的成就和声誉系统

> ID：12323894
> 
> 赞同：1
> 
> 时间：2012-09-07T18:57:41.633
> 
> 标签：php, cakephp

这是以前在 Stack Overflow 上提出的问题，但我还没有看到任何与 CakePHP 相关的内容，所以我仍然对这个主题领域感到困惑。

所以我有一个允许用户、帖子和评论的应用程序。用户可以创建帖子并对帖子发表评论。很简单的东西。

我想要做的是添加两个功能（彼此不相关）：

*   成就/徽章
*   名声

一般的想法是，当用户执行诸如创建帐户、创建帖子 10 次或删除帖子等操作时，它会增加或减少声誉。如果满足特定标准，则创建徽章或成就。

我看到这个工作的方式是有一个成就表：

```
id
title
description
image 
```

和一个关系表

```
id
achievement_id
user_id
date 
```

然后用户将在用户表中获得一个滚动整数以获得声誉。

我被难住的部分是何时以及如何在满足条件时创建这些记录，而不必在我的所有方法中塞入大量逻辑来检查各种事情等。

因此，例如，如果我有一个简单的 add post 方法，我将如何实现以下目标：

1.  每成功发帖，用户声誉加 10 分
2.  为用户第一次发帖添加徽章
3.  为用户第 10 个帖子添加徽章

棘手的部分是第 10 个帖子成就，因为似乎每次发布帖子时我都需要以某种方式检查用户已经完成了多少其他帖子以及它是否匹配一个数字，但是这个数字例如需要从中提取比实际代码更好的地方。也许另一个包含规则的表？例如

```
id
title
description 
```

然后在成就表中有一个链接，比如 rule_id 来关联它，也许还有一个动作计数，所以它需要运行它很多次......

以这 3 个项目为例，最好的方法是什么，这样我就可以在应用程序中获得其他成就和声誉。需要特定于蛋糕。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T21:05:43.387

Cameron 我认为你应该看看 CakePhp[事件系统](http://book.cakephp.org/2.0/en/core-libraries/events.html)或创建[观察者](http://www.labelmedia.co.uk/blog/posts/php-design-patterns-observer-pattern.html)来记录你的成就

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T21:09:59.047

关于“棘手的部分是10后成就”：

这可以使用 counterCache 轻松完成。

有关此 CakePHP 功能的更多详细信息：http: [//book.cakephp.org/2.0/en/models/associations-linking-models-together.html#countercache-cache-your-count](http://book.cakephp.org/2.0/en/models/associations-linking-models-together.html#countercache-cache-your-count)

# android - JSON 和安卓。无法将 json 字符串转换为 JSONObject

> ID：12323905
> 
> 赞同：0
> 
> 时间：2012-09-07T18:58:24.020
> 
> 标签：android, json

我正在尝试将以下 json 字符串转换为`JSONObject`android。但它抛出`JSONException`。在过去的几个小时里，我一直在挖掘我的想法。请帮忙。

JSON字符串：

```
parseExchangeRate({"query":
             {"count":1,"created":"2012-09-07T18:49:32Z","lang":"en-US","results":
                       {"row":{"rate":"55.395","name":"USD to INR"}}}}); 
```

例外：

```
Value <jsonobject>parseExchangeRate( of type java.lang.String cannot be converted to JSONObject 
```

代码 ：

```
String result = convertStreamToString(instream);
Log.d(TAG, result); //this outputs the above stated string
JSONObject json = new JSONObject(result); // this line thows exception 
```

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T19:05:58.533

JSON 字符串是什么？你说它是，

```
parseExchangeRate({"query":
              {"count":1,"created":"2012-09-07T18:49:32Z","lang":"en-US","results":
                        {"row":{"rate":"55.395","name":"USD to INR"}}}}); 
```

但这看起来像一行 javascript 代码。JSON！= javascript。看起来您的 Web 服务正在传回[JSONP](http://en.wikipedia.org/wiki/JSONP)响应。没关系，但是由于您不是 javascript 客户端，因此您需要从该响应中解析出实际的 JSON 字符串。

```
String result = convertStreamToString(instream);
Pattern p = Pattern.compile("^.*?\\((.*?)\\);$", Pattern.DOTALL);
Matcher m = p.matcher(result);
if (m.matches()) {
  String json = m.group(1);
  JSONObject jo = new JSONObject(json);
  ...
} else {
  // whoops
} 
```

# java - 多维泛型数组 Java

> ID：12323907
> 
> 赞同：1
> 
> 时间：2012-09-07T18:58:41.167
> 
> 标签：java, generics, multidimensional-array

> **可能重复：**
> [Java 如何：创建通用数组](https://stackoverflow.com/questions/529085/java-how-to-generic-array-creation)

我想创造这样的东西：

```
public class MyClass<T> {
    private int row;
    private int column;
    private T[][] result;

    public T[][] generation(int size, T[] values) {
        result = new T[values.length][size];

        generator(0, 0);

        return result;
    }
} 
```

但是我遇到了“通用数组创建”错误，我该如何解决？:(

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-07T19:07:03.770

如果你能得到`T`ie的类型`Class<T>`，你可以使用[`Array.newInstance`](http://docs.oracle.com/javase/7/docs/api/java/lang/reflect/Array.html#newInstance%28java.lang.Class,%20int...%29)如下......

```
public T[][] generation(int size, T[] values) {
  result = (T[][]) Array.newInstance(values.getClass().getComponentType(),
      values.length, size);
  generator(0, 0);
  return result;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T19:01:14.010

new T 是不可能的，你必须在返回前或返回后使用 Object 和 cast

基元也是不可能的，你必须使用 Integer、Float 等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T19:05:16.657

[java.lang.reflect.Array.newInstance](http://bit.ly/NZxztC)正是您所需要的。

你只需要一个对象，`Class<T>`但你可以在你的类的构造函数中取一个。

# php - Restler 总是返回未找到

> ID：12323908
> 
> 赞同：4
> 
> 时间：2012-09-07T18:58:51.680
> 
> 标签：php, web-services, api, rest, restler

我被困在这里，在 wamp 中我运行所有东西并且工作正常，但是，当我尝试将我的 api 安装在 centos 盒子中时，我总是收到“未找到”错误。

我不知道还能做什么！

即使是说/你好示例也失败了......

是否有任何关于处理 restler 的 apache 要求规范？

有什么想法吗？，有点急

说.php：

```
<?php
class Say {
    function hello($to='world') {
        return "Hello $to!";
    }
} 
```

索引.php

```
<?php
    require_once 'restler/restler.php';
    require_once 'say.php';

    $r = new Restler();
    $r->addAPIClass('Say');

    $r->setSupportedFormats('jsonpformat', 'jsonformat', 'xmlformat', 'yamlformat');
    $r->handle(); 
```

.htaccess

```
DirectoryIndex index.php
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteRule ^$ index.php [QSA,L]
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^(.*)$ index.php [QSA,L]
</IfModule>
<IfModule mod_php5.c>
    php_flag display_errors On
</IfModule> 
```

错误：

**未找到** 在此服务器上未找到请求的 URL /mylocation/say/hello。

这基本上就是我所有的代码，如果你们认为 jsonpformat 可能会妨碍我，我可以将代码粘贴到这里。

当我像这样输入网址时：`http://myhost/mylocation/`我收到一个 json 错误：

```
{
  "error": {
    "code": 404,
    "message": "Not Found"
  }
} 
```

如果我输入`http://myhost/mylocation/say/hello`然后我得到**未找到**的错误，它就像 .htaccess 不起作用。

**[编辑]**

如果我像这样将“index.php”添加到网址中，它似乎可以工作：`http://myhost/mylocation/index.php/say/hello`但我不能像这样离开它......

我得到了这个：[如果 index.php 不包含在 URL 中，Restler 将返回 404 状态代码](https://stackoverflow.com/questions/8796479/restler-returns-404-status-code-if-index-php-is-not-included-in-url?rq=1)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-08T14:44:13.693

好的，我找到了问题，谢谢大家的帮助。

解决方案是将文件的`AllowOverride`变量设置为而不是. 我一尝试它就起作用了:)`httpd.conf``All``None`

除了 apache 的**mod_rewrite**之外，我没有找到运行 restler 的其他要求，如果我这样做了，我将对其进行编辑并将其放在这里。

我发现这是**restler**的常见问题，在文档中提及它可能会很好，希望这可以帮助你。

**PD**：我必须说，在我发布问题后甚至一分钟都没有过时，在编辑我的问题时被否决是非常烦人的，但是我尽可能快地做到了。你可能会说“你为什么要发布它？” 由于restler要求部分，它不需要太多细节来回答......

# javascript - 根据 HTML 文件名授予 Web 服务器写入权限

> ID：12323913
> 
> 赞同：0
> 
> 时间：2012-09-07T18:59:03.317
> 
> 标签：javascript, permissions

我的网站正在运行某种 Apache。

如果他们有正确的用户名和密码以及正确的文件名，我想允许任何启用了 JavaScript 的现代硬件上的任何人通过一些基本`<textarea>`和字段编辑我网站上的页面。`<button>`

当前哪种技术组合将使我能够授予这些人以他们的用户名开头的所有文件的写入权限？*我试图避免为此使用目录*

我的意思是，是否已经有一个包或框架可以让我轻松地做到这一点？

**例子：**

我的目录：

```
-rw-rw-r-- 1 myusername myusername    142 Aug 22 12:58 about.html
-rw-r--r-- 1 myusername myusername   1470 Sep  7 18:42 index.html
-rw-r--r-- 1 myusername myusername   1396 Sep  7 14:08 index.html~

-rw-r--r-- 1 myusername myusername  37553 Sep  2 12:08 laura-italy.jpg
-rw-r--r-- 1 myusername myusername  37553 Sep  2 12:08 laura-brasil.jpg
-rw-r--r-- 1 myusername myusername  37553 Sep  2 12:08 laura-usa.jpg

-rw-rw-r-- 1 myusername myusername   1512 Sep  7 07:53 tina-sylum.html
-rw-rw-r-- 1 myusername myusername   1434 Sep  7 07:47 tina-sylum.html~
-rw-rw-r-- 1 myusername myusername 103403 Sep  7 07:49 tina-time.zip 
```

我可以授予用户对匹配文件`laura`的密码`######`写入权限吗`laura-*`

以及分别`tina`具有密码`@@@@@@`写入权限的用户`tina-*`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T19:13:49.513

您可以使用一些匿名名称保存文件，然后将用户密码传递给 sudo 的标准输入，例如

```
echo password|sudo -u tina
echo htmledit >tina-italy.jpg 
```

如果 tina 没有权限，上述命令将失败。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T19:25:05.047

这不能在客户端的 Javascript 中完成。也可能没有框架，因为它不是设计 CMS 的一种非常健壮的方式。

除了所有这些，您所说的用户是服务器上的实际 *NIX 用户吗？

如果没有，您需要运行某种服务器端语言（即 PHP）来处理身份验证，然后处理本地服务器文件。

基本思想是这样的：

1.  为登录页面编写表单
2.  编写身份验证逻辑（访问平面文件/数据库）
3.  身份验证后，遍历所需目录中的文件以进行用户名匹配
4.  列出相应的文件
5.  编写编辑页面以执行文件 I/O

对于身份验证，您可能需要阅读密码散列、加盐和会话处理。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-07T19:26:45.763

您将不得不在某处管理用户列表，对吗？人们必须进行身份验证，对吗？这意味着您需要一个数据库。而且，如果您要让人们对数据库进行身份验证，那么将可编辑项目存储在数据库中并根据经过身份验证的用户来规范编辑访问可能会更有意义。通过让用户以这种方式“触摸文件系统”，我没有看到增加的巨大价值。

# c# - 如何测试 EventReceiver？

> ID：12323916
> 
> 赞同：0
> 
> 时间：2012-09-07T18:59:17.613
> 
> 标签：c#, sharepoint, event-handling, document-library, event-receiver

试图让 SharePoint 列表事件接收器工作时，我几乎快疯了。我在 VS 中创建了一个 EventReceiver 项目并且可以对其进行调试，但是断点不起作用。基本上，很多人都遇到过同样的问题，但他们的解决方案似乎都没有奏效。我之前发布过这个，我认为我的事件接收器代码应该可以工作，但我似乎无法让它在列表本身上工作。（我的代码粘贴在下面）

基本上我所需要的只是让事件接收器重命名上传的文档。考虑这种情况，如果上传的文档称为客户端 A 文档并且是第一个文档，则应将其称为客户端 A 文档 1。如果上传的下一个文档称为客户端 A 文档，则应将其重命名为客户端 A 文档 2，依此类推. 现在，如果上传了另一个名为 Client B Document 的文档，它应该只是 Client B Document 1，因为没有其他同名的文档。现在我认为我下面的代码完成了这种行为（代码是在 Robert Christs 的帮助下编写的！）但我不知道如何测试它。

我是上传文档还是创建新文档？我都试过了，没有任何效果，有人知道如何做到这一点吗？我开始对这个要求失去理智。

```
public override void ItemAdding(SPItemEventProperties properties)
{
   base.ItemAdding(properties);

   SPListItem item = properties.ListItem;

   if (item == null || item["Name"] == null) //item["Name"] == null)
       return; //or better yet, log 

   string oldFileName = item["Name"].ToString();

   int positionOfPeriod = oldFileName.LastIndexOf(".");
   string tempFileName = oldFileName.Substring(0, positionOfPeriod);

   SPQuery query = BuildArbitraryQuery(properties.List, "Name", tempFileName, true);
   int count = properties.List.GetItems(query).Count;
   String fileName, fileExtension;

   if (positionOfPeriod == -1)
   {
       fileName = oldFileName;
       fileExtension = "";
   }
   else
   {
       fileName = oldFileName.Substring(0, positionOfPeriod);
       fileExtension = oldFileName.Substring(positionOfPeriod);
   }

   string newFileName = fileName + "-xx" + count.ToString() + fileExtension;

   item["Name"] = newFileName;

   Console.WriteLine("New File Name: " + newFileName);

   try
   {
       properties.Web.AllowUnsafeUpdates = true;
       EventFiringEnabled = false;

       item.Update();
   }
   finally
   {
       properties.Web.AllowUnsafeUpdates = false;
       EventFiringEnabled = true;
   }
}
/// <summary> 
/// Builds an arbitrary SPQuery which filters by a single column value. 
/// </summary> 
/// <param name="list">The list you will run the query against.</param> 
/// <param name="columnDisplayName">The Display Name of the column you want to filter.</param> 
/// <param name="value">The value to filter against.</param> 
/// <returns>A new SPQuery object ready to run against the list.</returns> 
public static SPQuery BuildArbitraryQuery(SPList list, string columnDocumentName, string value, bool deepSearch)
{
   if (list == null)
       throw new ArgumentNullException("You cannot pass a null list to Helper.BuildArbitraryQuery.");

   if (!list.Fields.ContainsField(columnDocumentName))
       throw new ArgumentException("The SharePoint List \"" + list.Title + "\" does not contain the Field \"" + columnDocumentName + "\".");

   string internalName = list.Fields[columnDocumentName].InternalName;
   SPQuery query = new SPQuery();
   query.Query = "<Where><Eq><FieldRef Name=\"" + internalName + "\"/><Value Type=\"Text\">" + value + "</Value></Eq></Where>";

   if (deepSearch)
       query.ViewAttributes += "Scope='RecursiveAll'";

   return query;
} 
```

编辑： - - - - - - - - - - - - - - - - - - - - - - - - -- 好的，所以我从相同的项目类型（事件接收器）开始做了一个小测试，并创建了一个非常简单的 ItemAdded 方法来将列表项的名称更改为当前日期。现在这适用于自定义列表，但我似乎无法使用文档库。

所以从这个小测试中我知道我可以使用 F5 将事件接收器注册到自定义列表（沙盒解决方案）并对其进行调试，但是文档库有什么不同呢？我粘贴的代码是否不适合我在文档库上尝试做的事情？

*这是我用于小型测试的代码，但它不适用于文档库，即使我为文档库而不是自定义列表创建了新的项目类型（这在 ItemAdded 中）*

```
 SPListItem currentItem = properties.ListItem;
       currentItem["Title"] = DateTime.Now.ToString();
       currentItem.Update(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T19:39:38.913

这是你应该做的：

1.  重新启动 IIS“以卸载 DLL（如果使用）”
2.  将您的 DLL 及其 pdb 文件放在适合此 DLL 的 GAC 文件夹中
3.  打开 SharePoint 网站，以便启动新的 w3wp 进程。
4.  将您的 VS 项目附加到 w3wp 确保您在附加到进程对话框中选择托管代码。
5.  尝试上传文件 6- 你现在应该可以捕捉断点了。

您可以制作可以在构建后事件中调用的 Shell 脚本来自动执行所有这些步骤。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T19:07:49.100

你究竟是如何调试的？您需要附加到适当的 w3wp.exe 进程并添加一个项目，如果断点不起作用，通常是因为最后部署的 dll 的版本比您在 Visual Studio 中的代码更新（即使是最轻微的更改也会导致这种差异像新线等）

# websphere - 您可以更改 websphere 的 JSP 404 错误消息吗

> ID：12323926
> 
> 赞同：0
> 
> 时间：2012-09-07T18:59:47.177
> 
> 标签：websphere, ibm-rad

使用 websphere，如果您请求的文件不可用，您会收到一条错误消息：“404 文件未找到”，就是这样。

例如，如果您请求“/mydogxxxx.html”，我会收到一个未找到的响应 404 文件。

非常基本的信息。

如果我请求的 jsp 不可用，“mydogxxx.jsp”我会收到 404 错误代码和有关我的 websphere 版本和其他详细信息的堆栈跟踪信息。

出于安全原因，我需要禁用默认的 jsp 404 错误消息。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T19:07:29.313

[这是来自IBM 网站](http://www-10.lotus.com/ldd/portalwiki.nsf/dx/Customizing_error_pages_in_IBM_WebSphere_Portal_and_IBM_Web_Content_Manager_applications_in_a_multi-site_environment)的非常有用的教程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T06:05:07.990

请参阅[WebSphere 自定义错误页面](http://www.ibm.com/support/docview.wss?uid=swg21393358)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-08T20:19:46.420

在 web.xml 中添加以下内容

```
<error-page>        
    <error-code>404</error-code>
    <location>/error/error404.jsp</location>    
</error-page> 
```

或者，如果您的流量通过 HTTP 服务器流向应用程序服务器，则如下修改网络服务器 httpd.conf 中的指令和

```
ErrorDocument 404 /error/missing.html 
```

# c++ - C++ 类模板是模板：模板参数无效

> ID：12323929
> 
> 赞同：14
> 
> 时间：2012-09-07T19:00:13.180
> 
> 标签：c++, templates

我有一个类模板的问题。我希望类中的私有数据是某种数字类型的向量的向量，即：

```
std::vector<std::vector<double> >
std::vector<std::vector<std::complex<double> > > 
```

但我想要向量的类型（我正在使用第三方向量库和 stl 向量），以及要模板化的元素类型。我尝试了模板模板，但现在我认为这不是我的问题的解决方案。一个高度简化的例子是：

```
#include <complex>
#include <vector>
template<typename T>
class Fred {
    std::vector<T> data_;
};
int main(){
    Fred<std::vector<double> > works;
    //Fred<std::vector<std::complex<double> > doesnt_work;
    return 0;
} 
```

如图所示，它编译得很好，但是如果我取消注释 main 中的第二行，我会收到错误（g++ 4.6）：

```
error: template argument 1 is invalid 
```

为什么我会收到此错误？有没有人有建议的修复？谢谢！

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-09-07T19:03:59.523

```
#include <complex>
#include <vector>
template<typename T>
class Fred {
    std::vector<T> data_;
};

int main(){
    //Fred<std::vector<double> > works;
    Fred<std::vector<std::complex<double> > > doesnt_work;
    return 0;
} 
```

效果很好。`>`您在 .的声明中错过了第三名`doesnt_work`。

# c# - Howto：Parallel.Foreach 执行许多进程，在每个进程运行一个新进程之后（但一次一个）？

> ID：12323940
> 
> 赞同：3
> 
> 时间：2012-09-07T19:01:17.447
> 
> 标签：c#, task-parallel-library, .net-4.5, parallel.foreach

我相信有人知道这一点，我将非常感谢您的回答。我对委托和异步等知之甚少 - 所以请给我一个如何实现的一般示例。

我有一个工作流程，我可以使用 Parallel.Foreach 同时为许多不同的文件执行一个方法（甜蜜，研磨那个处理器） - 但是在该方法结束后我需要运行另一个方法（它会生成一个关于前一个的报告过程），并且第二种方法不能并行运行。

我不想在生成报告之前等待 Parallel.ForEach 中的所有文件完成（这不是必需的）。但是，如果我在第一个方法结束时开始报告生成方法，那么我就会遇到问题。有什么排队之类的吗？一定有一些漂亮的方法，对吧？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T19:17:31.670

我认为 Jim G 的意思是：

```
var lockObj = new object();

Parallel.Foreach(files, file => 
{
    // Processing file
    lock(lockObj)
    {
        // Generate report.
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T19:05:29.453

第二种方法应该被链接为一个[延续任务](http://msdn.microsoft.com/en-us/library/ee372288.aspx)。

在第二种方法中，使用 a[`lock`](http://msdn.microsoft.com/en-us/library/c5kehkcz%28v=vs.110%29.aspx)或 mutex 以确保它不会并行运行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-07T19:26:14.527

并发和协调运行时 (CCR) 中的[Arbiter.Interleave](http://msdn.microsoft.com/en-us/library/microsoft.ccr.core.arbiter.interleave.aspx)协调原语提供了一种实现所需功能的简单方法。基本上你传递了 3 个接收器组，1 个用于并发任务，1 个用于独占任务（不并行执行），1 个用于关闭整个进程。[您可以在此处](http://msdn.microsoft.com/en-us/library/bb648749.aspx)找到如何使用它的示例

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-07T19:54:39.987

另一种选择是使用生产者-消费者模型。您有一个[线程安全的阻塞集合](http://msdn.microsoft.com/en-us/library/dd267312)，您将完成的数据放入其中，然后您有一个线程运行从该集合中提取数据的报告。

```
//Collection to hold the data the processed files generated
var proccesedDataItems = new new BlockingCollection<ResultData>();

//A thread that processes the files
var processReports = new Task(() =>
{
    //Removes items from the collection, if the collection is empty it blocks
    // or if "CompletedAdded" has been called it will reach the "end" of the 
    // collection
    foreach(var processedData in proccesedDataItems.GetConsumingEnumerable())
    {
        BuildReport(processedData);
    }
});
processReports.Start();    

//Generating the data
Parallel.Foreach(files, file => 
{
   var proccesedData = ProcessFile(file)
   proccesedDataItems.Add(processedData);
});

//Let anyone consuming the collection that you can stop waiting for new items.
proccesedDataItems.CompleteAdding(); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-08T00:07:12.427

这样的事情非常适合 TPL 数据流的模型：您创建一个处理文件的并行块，然后创建另一个生成报告的非并行块：

```
var processFileBlock = new TransformBlock<File, Result>(
    file => ProcessFile(file),
    new ExecutionDataflowBlockOptions
    {
        MaxDegreeOfParallelism = DataflowBlockOptions.Unbounded
    });

var generateReportBlock = new ActionBlock<Result>(
    result => GenerateReport(result));

processFileBlock.LinkTo(generateReportBlock);

foreach (var file in files)
    processFileBlock.Post(file); 
```

如果您还想等到所有处理完成，则需要使用`Complete()`and添加一些代码`Completetion`。

# c++ - 获取 tcp-packet 的序列号

> ID：12323942
> 
> 赞同：0
> 
> 时间：2012-09-07T19:01:30.670
> 
> 标签：c++, linux, tcp

有没有办法使用 tcpdump 命令以仅捕获数据包的序列号（或实际上是抓取它）并将其存储在变量中？我需要从 C++ 程序内部执行此操作。任何帮助表示赞赏。

（我使用**nemesis-tcp**从一个系统发送数据包，并使用**tcpdump**命令在接收器处捕获这些数据包）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T19:11:32.943

可以使用[pcap库](http://www.tcpdump.org/)，[官方的walk-through](http://www.tcpdump.org/pcap.html)是一个很好的介绍。特别是查看`seq`tcp_header 中的内容。

# python - 将项目存储在键和范围键可能重叠的 DynamoDB 表中

> ID：12323943
> 
> 赞同：1
> 
> 时间：2012-09-07T19:01:49.483
> 
> 标签：python, nosql, amazon-dynamodb

我希望在 DynamoDB 表中存储大量照片。每张照片都可以属于一个“相册”——实际上，一张照片可以属于多个相册。我想设置数据，以便我可以查询album_id 并检索属于该专辑的所有photo_id。

例如：“获取属于相册 1 的所有照片”

```
table "album-photo-map"
keys(album_id, timestamp) - photo_id 
```

然后，我可以对表相册照片地图执行范围查询，询问属于相册“1”且时间戳大于 0 的范围键的所有 photo_id。

问题是——如果有两张具有相同时间戳的照片怎么办？DynamoDB 不会让我拥有多个具有相同密钥的项目。

解决此问题的一种方法可能是将 photo_ids 的二进制列表存储在album_id 的数据字段之一中，但随后照片列表将受到 64K 的限制，我不想这样做。

我是否正确地考虑了这一点？是否有解决重复时间戳问题的方法？也许我可以做类似的事情：

```
timestamp = str(time.time()).replace('.','')
>> 134704419008 
```

并存储它？这是否足够快以消除重复问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T19:14:12.703

您可以使用图像的哈希作为 range_key。如果散列函数选择得当，图像重叠但不完全相同的可能性很小。这个键会更好，因为它与内容直接相关。

如果性能很重要，您可以简单地将随机数附加到密钥。

# http - 提琴手 HTTPMethod (GET/PUT/POST/DELETE...) 列

> ID：12323944
> 
> 赞同：87
> 
> 时间：2012-09-07T19:01:50.010
> 
> 标签：http, fiddler

### 有没有一种简单的方法可以将 HTTPMethod (GET/PUT/POST/DELETE...) 列添加到提琴手显示？

[在fiddler wiki](http://fiddler2.com/fiddler/help/configurecolumns.asp)上找到了这些用于添加会话变量的说明：

> cols 添加“客户端 IP 地址”X-CLIENTIP

但是 HTTPMethod 似乎并不那么容易。

有人知道这样做的方法或有一个好的提琴手脚本吗？

* * *

## 回答 #1

> 赞同：198
> 
> 时间：2013-11-12T16:26:50.267

现在有一种更简单的方法（从 v4.4.5.1 或更早版本开始）。

**右键单击**列**栏**并选择**自定义列**...。

集合：杂项
字段名称：RequestMethod
![自定义列对话框的屏幕截图](../Images/4fbfaa20af3fdc028da2e471fd3a8787.png)

结果：
![新创建列的屏幕截图](../Images/3d8a5894afa041d51c4e81cf2db8bbda.png)

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-10-09T19:43:32.543

编辑您的规则，然后在 Handlers 类中添加：

```
public static BindUIColumn("Method", 60)
    function FillMethodColumn(oS: Session){

        return oS.oRequest.headers.HTTPMethod; 
    } 
```

# php - 用 jQuery 调用 PHP SoapServer 函数

> ID：12323945
> 
> 赞同：0
> 
> 时间：2012-09-07T19:01:50.013
> 
> 标签：php, jquery, ajax, soap

我正在尝试使用 PHP 5.2 的 SoapServer 功能。我设置了soapserv.php，如下所示。但是我不知道如何用 PHP 以外的语言（没有 WSDL）调用“添加”函数。我想用 AJAX (jQuery) 调用它。任何帮助将不胜感激！

```
<?php
    function add($a, $b) {
      return $a + $b;
    }

  $soap = new SoapServer(
    null,
    array('uri' => 'http://example.com/projects/php/soapserv/')
  );
  $soap->addFunction("add");
  $soap->handle();
?> 
```

我的 JavaScript 看起来像这样（虽然尝试了几种方法）。

```
var req = $.post("http://example.com/projects/php/soapserv", {"add":{a: 1, b: 2}});

            req.done(function(msg){
                document.write(msg.responseText);
            });

            req.fail(function(msg){
                document.write(msg.responseText);
            }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T20:38:34.473

明白了...只需将帖子数据更改为肥皂信封！

```
 var request = "<?xml version=\"1.0\"?>\n";
        request += "<soap:Envelope xmlns:soap=\"http://www.w3.org/2003/05/soap-envelope\">\n";
        request += "<soap:Body xmlns:m=\"http://example.com/projects/php/soapserv\">\n";
        request += "<m:add>\n";
        request += "<m:a>1</m:a>\n";
        request += "<m:b>2</m:b>\n";
        request += "</m:add>\n";
        request += "</soap:Body>\n";
        request += "</soap:Envelope>";

        var req = $.ajax({
           type: "POST",
           url: "http://example.com/projects/php/soapserv",
           data: request,
           cache: false
        }); 
```

# iphone - 如何将 NSMutableDictionary 重新排序为 NSMutableArray？

> ID：12323948
> 
> 赞同：0
> 
> 时间：2012-09-07T19:02:21.823
> 
> 标签：iphone, objective-c, cocoa-touch, nsmutablearray, nsmutabledictionary

我有一个`NSMutableArray`包含`NSURLConnection`描述，如下所示：

```
array {

    "<NSURLConnection: 0x60eb40>",
    "<NSURLConnection: 0x6030e0>",
    "<NSURLConnection: 0x602ce0>",
    "<NSURLConnection: 0x60c330>",
    "<NSURLConnection: 0x662f5a0>",
} 
```

我还有一个`NSMutableDictionary`其键是上面的项目`NSMutableArray`，如下所示：

```
dictionary {

"<NSURLConnection: 0x602ce0>"  = "Last update: Sep 3, 2012";
"<NSURLConnection: 0x6030e0>"  = "Last update: Sep 7, 2012";
"<NSURLConnection: 0x60c330>"  = "Last update: Sep 4, 2012";
"<NSURLConnection: 0x60eb40>"  = "Last update: Sep 6, 2012";
"<NSURLConnection: 0x662f5a0>" = "Last update: Sep 5, 2012"; 
```

}

**我需要重新排序`NSMutableDictionary`以匹配`NSMutableArray` `indexes`.** 现在我正在这样做：

```
int a;
for (a=0; a<self.array.count; a++) {

    NSString *key    = [self.array objectAtIndex:a];
    NSString *object = [self.dictionary objectForKey:key];

    if (object !=nil) {
        [self.array removeObjectAtIndex:a];
        [self.array insertObject:object atIndex:a];
    }
} 
```

有没有更好的方法来重新排序`NSMutableDicitioanry`以匹配 的顺序`NSMutableArray`？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T19:07:00.073

`NSDictionary`不保证其键/值对的任何顺序。没有办法将您的键/值保持在一个固定的顺序中，这样工作没有意义`NSDictionary`。（您使用*键*而不是*索引*来检索值）。

如果您希望您的值或键按特定顺序显示，您可以在检索它们后对其进行排序：

```
NSArray * sortedKeys = [ [ myDictionary allKeys ] sortedArrayUsingSelector:... ] ; 
```

或者

```
NSArray * sortedKeys = [ [ myDictionary allKeys ] sortedArrayUsingComparator:... ] ; 
```

然后，您可以根据需要检索已排序键的关联对象。

另一种选择是维护 2 个单独的数组，一个用于键，一个用于值，并保持它们的顺序。

# c# - 在 TFS 或共享文件夹中存储内容图像以供多个网站使用的正确方法是什么？

> ID：12323949
> 
> 赞同：2
> 
> 时间：2012-09-07T19:02:33.517
> 
> 标签：c#, asp.net, configuration, content-management-system

我们必须存储许多具有嵌套文件夹结构级别的图像，这些图像由许多 ASP.NET 网站共享。正确的方法是什么？我应该将内容图像存储在 TFS 中还是共享文件夹中？我们还希望将来维护同一图像的多个版本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T20:43:28.587

如果您想在将来维护同一图像的多个版本，那么将内容图像存储在 TFS 中会比使用共享文件夹更好。

为了支持共享文件夹的多个文件版本，您需要通过更改图像名称（例如，将版本号放在末尾）或更改图像的路径（例如，将版本作为文件夹名称）来区分不同的文件版本）。这意味着您需要在相应的 ASP.Net 网站中更新这些图像的所有参考 URL。

或者，通过将图像存储在 TFS 中，各种 ASP.Net 网站可以将 TFS 中的单个共享路径引用到图像，并使用工作区映射来保持 URL 引用相同。当需要引用文件的不同版本时，您可以分支图像（或整个文件夹）并简单地更改相应 ASP.Net 网站的工作区映射。无需更新对图像的所有引用。

我推荐 Microsoft Team Foundation Server 分支指南（请参阅[此处](http://branchingguidance.codeplex.com/)）作为分支信息的来源，以找到最适合您的策略。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T03:10:24.087

当然，这取决于您的具体情况，但我不关心在版本控制系统中存储大型二进制文件。以我的经验，当您尝试加载/拉取一堆二进制文件时，TFS 确实陷入困境。

我能想到的两种选择是：

1.  将此文件的 Photoshop 或主版本存储在 TFS 中的某个地方，并根据需要从这些文件中重新生成图像。
2.  维护包含旧版本文件的单独历史文件夹结构。

# ruby-on-rails - 清理重复的控制器代码

> ID：12323952
> 
> 赞同：2
> 
> 时间：2012-09-07T19:03:00.187
> 
> 标签：ruby-on-rails, ruby-on-rails-3

### 困境：

我处于需要跨多个视图和控制器显示用户活动的情况。代码开始有点*味道，所以我非常感谢一些清理它的指导。*

我有一个用户控制器，它有一个“显示”（/user_id/）视图，可以在侧边栏中呈现最近的活动，还有一个“活动”（user_id/activity）视图，可以呈现所有用户的活动。我还有一个“页面”控制器，它有一个“仪表板”视图，它也呈现用户的活动。

### 编码：

`users_controller.rb`好像：

```
@activities = []
@activities += @user.skills.map { |skill| Activity.new("skill", skill, skill.created_at) }
@activities += @user.unions.map { |union| Activity.new("union", union, union.created_at) }
@activities += @user.companies.map { |company| Activity.new("company", company, company.created_at) }
@activities += @user.clients.map { |client| Activity.new("client", client, client.created_at) }
@activities += @user.schools.map { |school| Activity.new("school", school, school.created_at) }
@activities += @following_list.map { |following| Activity.new("following", following, following.created_at) }
@activities += @recommended.map { |recommend| Activity.new("recommend", recommend, recommend.created_at) }
@activities += @user.statuses.all(:limit => 5, :order => "created_at DESC").map { |status| Activity.new("status", status, status.created_at) }

sorted_activities = @activities.sort_by(&:date).reverse
@activities = sorted_activities[0..(4)] 
```

`pages_controller.rb`好像：

```
@your_activity = []
@your_activity += current_user.skills.map { |skill| ActivityDashboard.new("#{current_user.first_name} #{current_user.last_name}","#{current_user.id}","#{current_user.avatar}","skill", skill, skill.created_at) }
@your_activity += current_user.unions.map { |union| ActivityDashboard.new("#{current_user.first_name} #{current_user.last_name}","#{current_user.id}","#{current_user.avatar}","union", union, union.created_at) }
@your_activity += current_user.companies.map { |company| ActivityDashboard.new("#{current_user.first_name} #{current_user.last_name}","#{current_user.id}","#{current_user.avatar}","company", company, company.created_at) }
@your_activity += current_user.clients.map { |client| ActivityDashboard.new("#{current_user.first_name} #{current_user.last_name}","#{current_user.id}","#{current_user.avatar}","client", client, client.created_at) }
@your_activity += current_user.schools.map { |school| ActivityDashboard.new("#{current_user.first_name} #{current_user.last_name}","#{current_user.id}","#{current_user.avatar}","school", school, school.created_at) }
@your_activity += current_user.statuses.map { |status| ActivityDashboard.new("#{current_user.first_name} #{current_user.last_name}","#{current_user.id}","#{current_user.avatar}","status", status, status.created_at) }

sorted_activities = @your_activity.sort_by(&:date).reverse
@your_activity = sorted_activities[0..(35)] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T19:45:55.047

有几种方法可以真正做到。您可以将其卸载到模型中，您可以在 lib 目录中创建一个模块并使用它来构建活动数组。还有一件重要的事情是确保使用帮助程序在页面上显示它，并根据您的需要将其加载到视图或部分视图中。

您还可以通过一些元编程来减少重复。您可能需要根据您的要求进行调整。您还需要为第一组代码设置它

```
["skill", "union", "company", "client", "school", "status"].each do |type|
  plural = ActiveSupport::Inflector.pluralize(type)
  @your_activity += current_user.send(plural.to_sym).map do |object|
    ActivityDashboard.new("#{current_user.first_name} #{current_user.last_name}","#{current_user.id}","#{current_user.avatar}",type, object, object.created_at)
  end
end 
```

我的工作示例的要点：[https ://gist.github.com/3669117](https://gist.github.com/3669117)

# linux - Linux PCIe 设备驱动程序读/写功能不适用于某些地址

> ID：12323954
> 
> 赞同：3
> 
> 时间：2012-09-07T19:03:12.283
> 
> 标签：linux, linux-kernel, driver

我编写了一个 PCIe 设备驱动程序，但读/写功能无法正常工作。该设备有 3 个内存区域，从 0x10800000、0x0c000000 和 0x80000000 开始。仅出于测试目的，我在驱动程序中的读写函数打印出传递的地址并返回。如果我从用户空间应用程序调用 pread() 或 pwrite()，我会看到为前 2 个内存区域传递的地址，但如果我调用第三个内存区域，我什么也看不到，好像它没有t 甚至进入驱动程序读取或写入函数。

我的驱动程序在运行 linux 版本 2.6.32 的 64 位机器上运行良好。这台无法运行的机器是运行 linux 版本 2.6.25 的 32 位机器。我的想法是，也许 32 位不喜欢 0x80000000 地址，但如果是这种情况，我不知道如何验证或修复它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T22:43:45.120

这是一个非常模糊的问题（您正在对什么文件进行预读/写操作？）但是由于您说一切都在 64 位上运行并且您的驱动程序甚至没有在 32 位上被调用，所以我猜问题是的大小`off_t`和 0x80000000 溢出 32 位并成为一个巨大的负数的事实。

如果你把

```
 #define _FILE_OFFSET_BITS 64 
```

作为用户空间源代码的第一行？（或者在 gcc 命令行上传递“-D_FILE_OFFSET_BITS=64”）？

# java - gwt-maven-plugin：插件需要 Maven 2.1 版

> ID：12323955
> 
> 赞同：1
> 
> 时间：2012-09-07T19:03:13.470
> 
> 标签：java, gwt, maven, ant

我正在尝试使用 gwt-maven-plugin 来编译我的项目。我的 spring 工具套件 eclipse 4.2 中安装了 Maven 3.0.3。

但是，该插件抱怨说它想使用 maven 2.1。我相信使用 maven 3.x 应该没有问题，对吧？

> [artifact:mvn] [INFO] 解析 'org.codehaus.mojo:gwt-maven-plugin' 的版本时出错：插件需要 Maven 版本 2.1

我的插件定义：

```
<plugin>
  <groupId>org.codehaus.mojo</groupId>
  <artifactId>gwt-maven-plugin</artifactId>
  <version>2.4.0</version>
  <executions>
    <execution>
      <configuration>
        <module>ally.mc.beal</module>
        <gen>gwt-generated</gen>
      </configuration>
      <goals>
        <goal>compile</goal>
      </goals>
    </execution>
  </executions>
</plugin> 
```

我用来触发 gwt 编译的 ant 目标：

```
<project name="AllyMcBeal"
  xmlns:artifact="antlib:org.apache.maven.artifact.ant">

  <path id="maven-ant-tasks.classpath" path="maven/maven-ant-tasks-2.1.3.jar" />
...
  <target name="gwt.compile">
    <artifact:mvn>
      <arg value="gwt:compile" />
    </artifact:mvn>
  </target>
...
</project> 
```

*   我必须安装maven 2.1吗？
*   或者，有没有办法强制它使用 maven 3.x？
*   或者，我是否在配置中遗漏了一条信息？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-19T10:13:10.770

您需要设置蚂蚁任务的`mavenVersion`属性。`artifact:mvn`如果没有这个，任务默认为 2.0.10 的 maven 版本，这会导致您看到的错误消息。

作为参考，我的任务如下所示：

```
<artifact:mvn pom="mypomfilepath.xml" mavenVersion="3.0.4">
    <arg value="install"/>
</artifact:mvn> 
```

# python - Python中的快速互相关方法

> ID：12323959
> 
> 赞同：10
> 
> 时间：2012-09-07T19:03:38.780
> 
> 标签：python, opencv, numpy, scipy, correlation

我最近一直在尝试找到一种快速有效的方法来使用 Python 语言在两个数组之间执行互相关检查。经过一番阅读，我发现了这两个选项：

1.  该`NumPy.correlate()`方法在涉及大型数组时太慢了。
2.  该`cv.MatchTemplate()`方法似乎要快得多。

出于显而易见的原因，我选择了第二个选项。我尝试执行以下代码：

```
import scipy
import cv

image = cv.fromarray(scipy.float32(scipy.asarray([1,2,2,1])),allowND=True)
template = cv.fromarray(scipy.float32(scipy.asarray([2,2])),allowND=True)
result = cv.fromarray(scipy.float32(scipy.asarray([0,0,0])),allowND=True)
cv.MatchTemplate(image,template,result,cv.CV_TM_CCORR) 
```

尽管此代码假设非常简单，但它会引发下一个错误：

```
OpenCV Error: Bad flag (parameter or structure field) (Unrecognized or unsupported array type) in cvGetMat, file /builddir/build/BUILD/OpenCV-2.1.0/src/cxcore/cxarray.cpp, line 2476
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
cv.error: Unrecognized or unsupported array type 
```

经过几个小时的令人沮丧的尝试，我仍然卡住了！有人有什么建议吗？

顺便说一句，这是我的 Python 版本输出：

```
Python 2.7 (r27:82500, Sep 16 2010, 18:03:06) 
[GCC 4.5.1 20100907 (Red Hat 4.5.1-3)] on linux2
Type "help", "copyright", "credits" or "license" for more information. 
```

谢谢你们！

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-09-07T19:58:10.670

您不太可能比使用基于 fft 的相关方法更快。

```
import numpy
from scipy import signal

data_length = 8192

a = numpy.random.randn(data_length)
b = numpy.zeros(data_length * 2)

b[data_length/2:data_length/2+data_length] = a # This works for data_length being even

# Do an array flipped convolution, which is a correlation.
c = signal.fftconvolve(b, a[::-1], mode='valid') 

# Use numpy.correlate for comparison
d = numpy.correlate(a, a, mode='same')

# c will be exactly the same as d, except for the last sample (which 
# completes the symmetry)
numpy.allclose(c[:-1], d) # Should be True 
```

现在进行时间比较：

```
In [12]: timeit b[data_length/2:data_length/2+data_length] = a; c = signal.fftconvolve(b, a[::-1], mode='valid')
100 loops, best of 3: 4.67 ms per loop

In [13]: timeit d = numpy.correlate(a, a, mode='same')
10 loops, best of 3: 69.9 ms per loop 
```

如果您可以处理循环相关，则可以删除副本。时间差会随着增加而`data_length`增加。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-10T08:08:50.977

我相信您的代码失败了，因为 OpenCV 期望图像为 uint8 而不是 float32 格式。您可能会发现 cv2 python 界面使用起来更直观（ndarray 和 CV 图像格式之间的自动转换）。

至于关联的速度，您可以尝试使用快速 fft 实现（FFTW 有一个 python 包装器：[pyfftw](http://pypi.python.org/pypi/PyFFTW3/0.2.1)）。

# gwt - 从不可见的 Ui 小部件中删除空间

> ID：12323960
> 
> 赞同：0
> 
> 时间：2012-09-07T19:03:40.163
> 
> 标签：gwt, google-apps-script

```
function doGet() {
  var app = UiApp.createApplication();
  var flex = app.createFlexTable();
  for (var i = 1; i<=30; i++) 
    flex.setWidget(i, 0, app.createButton('Button '+i).setId('Button'+i).setVisible(false));
  app.getElementById('Button1').setVisible(true);

  var submit = app.createButton('Submit');
  app.add(flex).add(submit); 
  return app;
} 
```

产生[这个 Ui](https://script.google.com/macros/s/AKfycbzpDdOACmlx45wzF6LulHYiUWz2uV_SlvEpvZWPPeDoKCD5a4s/exec)。

我们如何消除第一个可见按钮和“提交”按钮之间的空白？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T19:20:39.883

该空间来自浏览器特定样式的各种 HTML 元素，例如，`2px`每个隐藏行都应用了边框间距。（我在 Chrome 中进行测试；其他浏览器可能会有所不同。）

我建议使用 CSS 重置来清除所有特定于浏览器的样式。像这样一个简单的方法可以解决您的间距问题（同样，在 Chrome 中）：

```
div, table, tbody, tr, td {
    margin: 0;
    padding: 0;
    border-spacing: 0;
    border-collapse: collapse;
} 
```

# google-apps-script - setNamedRange() 在电子表格容器之外？

> ID：12323961
> 
> 赞同：4
> 
> 时间：2012-09-07T19:03:43.717
> 
> 标签：google-apps-script, google-sheets

我已经尝试了尽可能多的组合。

我的目标是让 Google Apps 脚本独立运行或从库中运行，并能够在电子表格中设置命名范围。

尽我所能，该`setNamedRange()`方法仅在电子表格容器中可用，并且仅在您使用`SpreadsheetApp.getActiveSpreadsheet()`.

我尝试使用`openById()`无济于事。该方法不可用。

以为我很聪明，然后尝试了 openById 然后 setActiveSpreadsheet。我不够聪明。

* * *

[更新，我使用 google-apps-script-issues http://code.google.com/p/google-apps-script-issues/issues/detail](http://code.google.com/p/google-apps-script-issues/issues/detail?id=1816)打开了问题 1816“对象变为全局，即使删除后自动完成仍然存在” ？[编号=1816](http://code.google.com/p/google-apps-script-issues/issues/detail?id=1816)

相当有趣的行为。误导我问错问题

看起来是 GAS 编辑器中的错误。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-07T20:42:23.613

以下函数演示了如何在独立脚本中设置命名范围。

```
function testNamedRange() {
  var ss = SpreadsheetApp.openById('here is the spreadsheet id');
  var range = ss.getRange('Sheet1!A1:B2');
  ss.setNamedRange('TestRange', range);
  var rangeCheck = ss.getRangeByName('TestRange');
  var rangeCheckName = rangeCheck.getA1Notation();
} 
```

`rangeCheckName`变量包含`A1:B2`字符串。

# c# - 带有 STE 的实体框架 4.0：如何在不删除寄存器的情况下删除多对可能关系

> ID：12323964
> 
> 赞同：0
> 
> 时间：2012-09-07T19:03:53.553
> 
> 标签：c#, entity-framework, self-tracking-entities

我的数据库中有多对多关系，所以我有三个表，TableA、TableB 和 TableAB。TableAB只有tableA的主键和tableB的主键。

当我从数据库创建我的 edmx 时，我没有 tableAB 的实体。我想删除tableAB的寄存器，但不删除tableA和tableB的寄存器。

如何使用自我跟踪实体执行此操作？

我有以下选择：

```
myContext.tableA.Attach(myTableARecord);
myTableARecord.TableBRecord.Remove(myTableARecord.myTableBRecord[0]);
miContexto.SaveChanges(); 
```

这行得通。

但是如果我使用 applyChanges 而不是附加，那么它就不起作用。STE 的 applyChanges 和上下文的 Attach 方法有什么区别？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T19:48:27.043

Attach 获取已与 ObjectGraph 断开连接的实体，并将其附加到 ObjectGraph。

AcceptChanges 提交实体内的更改。

# objective-c - 从 sqlite 填充 uipickerview

> ID：12323966
> 
> 赞同：0
> 
> 时间：2012-09-07T19:03:58.713
> 
> 标签：objective-c, ios

我有一个 uipickerview，我想用我的 sqlite 数据库中的数据填充它。

我已经通过 appdelegate 通过可变数组访问数据，但是当我将其用作数据源时，它在用作 uipicker titleforrow 部分时会使应用程序崩溃。

数组的计数是正确的，只是不会显示任何数据！

这是我的头文件：

```
@class OBMessage;

@interface LocationViewController : UIViewController <UITableViewDelegate, UIPickerViewDelegate, UIPickerViewDataSource, UITableViewDataSource, UIActionSheetDelegate, UIImagePickerControllerDelegate, UINavigationControllerDelegate, MFMailComposeViewControllerDelegate, MFMessageComposeViewControllerDelegate> {
        UITableViewCell *cell1;
        UITableViewCell *cell2;
        UITableViewCell *cell3;
        UITableViewCell *cell4;
        UITableViewCell *cell5;
        UITableViewCell *cell6;
        UITableViewCell *cell7;
    UITableViewCell *cell8;
        IBOutlet UILabel *addressLabel;
        MKPlacemark *placemark;
        IBOutlet UILabel *lLat;
        IBOutlet UILabel *lLong;
        IBOutlet UILabel *lHAcc;
        IBOutlet UILabel *lAlt;
        IBOutlet UILabel *lVAcc;
        IBOutlet UILabel *lDate;
        UIPickerView *singlePicker;
        NSArray *pickerData;
        NSString *pickedInfo;
        DadsTaxiV2AppDelegate *appDelegate;
        NSMutableArray *myarray;

}
@property (nonatomic, retain) IBOutlet UITableViewCell *cell1;
@property (nonatomic, retain) IBOutlet UITableViewCell *cell2;
@property (nonatomic, retain) IBOutlet UITableViewCell *cell3;
@property (nonatomic, retain) IBOutlet UITableViewCell *cell4;
@property (nonatomic, retain) IBOutlet UITableViewCell *cell5;
@property (nonatomic, retain) IBOutlet UITableViewCell *cell6;
@property (nonatomic, retain) IBOutlet UITableViewCell *cell7;
@property (nonatomic, retain) IBOutlet UITableViewCell *cell8;
@property (nonatomic, retain) IBOutlet UILabel *addressLabel;
@property (nonatomic, retain) IBOutlet UILabel *lLat;
@property (nonatomic, retain) IBOutlet UILabel *lLong;
@property (nonatomic, retain) IBOutlet UILabel *lHAcc;
@property (nonatomic, retain) IBOutlet UILabel *lAlt;
@property (nonatomic, retain) IBOutlet UILabel *lVAcc;
@property (nonatomic, retain) IBOutlet UILabel *lDate;
@property (nonatomic, retain) IBOutlet UIPickerView *singlePicker;
@property (nonatomic, retain) NSArray *pickerData;
@property (nonatomic, retain) NSString *pickedInfo;
@property (nonatomic, retain) NSMutableArray *myarray;

@property (nonatomic, retain) MKPlacemark *placemark;

-(IBAction)popupCameraSheet:(id)sender;
-(IBAction)popupMessageSheet:(id)sender;
-(void)showPicker;

@end 
```

这是我的 m 文件的一部分：

```
- (void)viewDidLoad {

      [super viewDidLoad];

    appDelegate = (DadsTaxiV2AppDelegate *)[[UIApplication sharedApplication] delegate];

    self.myarray = appDelegate.messageArray;

}

-(void)showPicker
{
    UIActionSheet *menu = [[UIActionSheet alloc] initWithTitle:@"Select a Office Buddy Message to Include:"
                                                      delegate:self
                                             cancelButtonTitle:@"Select" destructiveButtonTitle:@"Cancel"
                                             otherButtonTitles:nil];
    menu.tag = 4;
    menu.actionSheetStyle = UIActionSheetStyleBlackTranslucent;
    singlePicker = [[UIPickerView alloc] initWithFrame:CGRectMake(0, 185, 0, 0)];
    singlePicker.delegate=self;
    singlePicker.showsSelectionIndicator = YES;

    [singlePicker selectedRowInComponent:0];
    [singlePicker reloadComponent:0];

    [menu addSubview:singlePicker];
    [menu showInView:self.view];
    [menu setBounds:CGRectMake(0, 0, 320, 700)];

    [singlePicker release];
    [menu release];

    //NSInteger row = [singlePicker selectedRowInComponent:1];
    //NSString *selected = [pickerData objectAtIndex:row];

    //infoLabel.text = selected;

}

#pragma mark Picker Data Source Methods
- (NSInteger)numberOfComponentsInPickerView:(UIPickerView *)pickerView
{
    return 1;
}
- (NSInteger)pickerView:(UIPickerView *)pickerView numberOfRowsInComponent:(NSInteger)component
{
    //NSLog(@"[pickerData count]=%d",[pickerData count]);
    //return [pickerData count];

    NSLog(@"[messagearray count]=%d",[self.myarray count]);
    //return [self.pickerData count];
    return [self.myarray count];

}

#pragma mark Picker Delegate Methods
- (NSString *)pickerView:(UIPickerView *)pickerView titleForRow:(NSInteger)row forComponent:(NSInteger)component
{
    NSLog(@"[pickerData objectAtIndex:row]=%@",[self.myarray objectAtIndex:row]);
    //return [self.pickerData objectAtIndex:row];
    return [self.myarray objectAtIndex:row];
} 
```

抱歉忘记了崩溃日志：

```
didSelectViewController:<LocationViewController: 0x9b7de90>
2012-09-07 20:43:07.142 OfficeBuddy[7300:c07] [messagearray count]=13
2012-09-07 20:43:07.142 OfficeBuddy[7300:c07] [messagearray count]=13
2012-09-07 20:43:07.142 OfficeBuddy[7300:c07] [pickerData objectAtIndex:row]=<OBMessage: 0x9a74ae0>
2012-09-07 20:43:07.143 OfficeBuddy[7300:c07] -[OBMessage isEqualToString:]: unrecognized selector sent to instance 0x9a74ae0
2012-09-07 20:43:07.144 OfficeBuddy[7300:c07] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[OBMessage isEqualToString:]: unrecognized selector sent to instance 0x9a74ae0'
*** First throw call stack:
(0x1759022 0x1a5ecd6 0x175acbd 0x16bfed0 0x16bfcb2 0x8ed0ff 0xbcf17a 0x7a8bc0 0x847c54 0x8483ce 0x833cbd 0x83271a 0x83c220 0xbcf6bb 0x7a77ec 0x7a84f9 0x8ca1 0xcc71 0x83e5c5 0x83e7fa 0x47585d 0x172d936 0x172d3d7 0x1690790 0x168fd84 0x168fc9b 0x22847d8 0x228488a 0x7ad626 0x2f5d 0x2ed5)
terminate called throwing an exception(lldb) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T19:50:18.180

根据您的崩溃日志，您填充数组的数据似乎是 OBMessage 类的一个实例。从数据源方法返回时：

```
- (NSString *)pickerView:(UIPickerView *)pickerView titleForRow:(NSInteger)row forComponent:(NSInteger)component 
```

确保您返回一个字符串。因此，如果您的数组由 OBMessage 的实例填充，请使用该类中的一个属性，该属性表示您希望在选择器上显示的内容。例如，如果 OBMessage 有一个名为 messageStringRepresentation 的属性，您将返回：

```
return [[self.myarray objectAtIndex:row] messageStringRepresentation]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T19:50:33.097

尝试打印数组对象并确认`NSString`对象。如果您`isEqualToString`在代码中的某处使用过，或者发布代码。

# c# - zedgraph x2axis 滚动

> ID：12323975
> 
> 赞同：1
> 
> 时间：2012-09-07T19:04:41.607
> 
> 标签：c#

我在 Zedgraph 中使用 x2axis 和 xaxis。是否可以让两个轴一起滚动？缩放事件似乎工作正常，但是当使用滚动事件时，它滚动链接到 xaxis 的曲线而不是链接到 x2axis 的曲线。问候罗伯特。

# sql - 如有必要，在 SQL 语句 DB2 中将零附加到值

> ID：12323977
> 
> 赞同：0
> 
> 时间：2012-09-07T19:04:58.280
> 
> 标签：sql, db2

我有一个复杂的 SQL 语句，我需要根据连接匹配两个表。复杂查询的初始部分有一个位置编号，该位置编号作为 Smallint 存储在表中，第二个表的存储编号存储为 CHAR(4)。我已经能够像这样将 smallint 转换为 char(4) ：

```
CAST(STR_NBR AS CHAR(4)) AND LOCN_NBR 
```

问题在于，由于 Smallint 抑制了前导 '0'，连接从 LEFT OUTER JOIN 的右侧返回空值。

例子

```
Table set A(Smallint)             Table Set B (Char(4))
|   96     |                      |  096     |
|   97     |                      |  097     |
|   99     |                      |  099     |
|  100     |  <- These return  -> |  100     |
|  101     |  <- These return  -> |  101     |
|  102     |  <- These return  -> |  102     | 
```

我需要添加 make 以便它们都返回，但是由于它在 join 语句中，您如何在开头和某些条件下而不是在其他条件下附加零？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T19:09:30.073

```
SELECT RIGHT('0000' || STR_NBR, 4)
FROM TABLE_A 
```

将表 B`CHAR`转换为 tinyint 也可以：

```
SELECT ...
FROM TABLE_A A
JOIN TABLE_B B
  ON A.num = CAST(B.txt AS TINYINT) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T19:07:12.443

试试 LPAD 功能：

```
 LPAD(col,3,'0' ) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-10T19:14:53.610

通过执行以下操作，我能够始终成功地匹配它以获得 3 位数的位置号码：

STR_NBR 最初定义为 SmallINT(2) LOCN_NO 最初定义为 Char(4)

```
SELECT ...
FROM TABLE_A AS A
JOIN TABLE_B AS B
  ON CAST(SUBSTR(DIGITS(A.STR_NBR),3,3)AS CHAR(4)) = B.LOCN_NO 
```

# javascript - 如何在 highcharts 中检测缩放事件？

> ID：12323978
> 
> 赞同：18
> 
> 时间：2012-09-07T19:05:03.943
> 
> 标签：javascript, highcharts

是否可以在 Highcharts 中检测缩放事件？我的用例是我在图表外部有一些状态，当用户放大它的一部分时，我想检测 x 轴上的新时间范围是什么并更新相应的外部状态。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-09-07T19:10:11.120

你试过通过[Highcharts API](http://api.highcharts.com/highcharts)吗？

你可能想看看 @ [xAxis.events.setExtremes](http://api.highcharts.com/highcharts#xAxis.events.setExtremes) 和/或 [chart.events.selection](http://api.highcharts.com/highcharts#chart.events.selection)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-05T09:17:53.367

您还想查看重绘事件。缩放时，图表会重新绘制以反映更改。[chart.events.redraw](http://api.highcharts.com/highcharts#chart.events.redraw)

```
events: {
    redraw: function(){
        console.log(this.xAxis);
        console.log(this.yAxis);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-12-19T02:38:01.307

我找到了一种使用重绘全局事件的方法：

```
{
  redraw: function(event) {
    if (
      (event ? .target ? .axes[0] && event ? .target ? .axes[0].max !== event ? .target ? .axes[0].oldMax) || 
      (event ? .target ? .axes[1] && event ? .target ? .axes[1].max !== event ? .target ? .axes[1].oldMax)) {
        // Here you can be sure the this is closer to a zoom event... almost, because it also detect drag on the map :(
      }
  }
}
```

我只是想把它留在这里，因为我决定使用其他东西，但我未来的自己可能需要它：D

# android - 是否可以安排 AnimationDrawable 对象？

> ID：12323980
> 
> 赞同：1
> 
> 时间：2012-09-07T19:05:15.040
> 
> 标签：android, animation, drawable

比如一个接一个的启动？我知道我可以并行进行，但我希望他们轮流进行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T23:04:32.947

可悲的是，这在当前一代的 Android 中是不可能的。

# .net - 是否可以计入 MSBuild？

> ID：12323982
> 
> 赞同：4
> 
> 时间：2012-09-07T19:05:18.903
> 
> 标签：.net, msbuild

我所做的只是试图跟踪某个目标被调用的次数。是否可以使用 msbuild 做到这一点？

编辑：

我试着做这样的事情：

```
<Message Text ="The sum of $(NumberOne) and $(NumberTwo) is $([MsBuild]::Add($(NumberOne),$(NumberTwo))"/> 
```

但这也没有用。我的输出是 2 和 3 的总和是 $([MsBuild]::Add($(NumberOne),$(NumberTwo))

至于使用物品的建议：我想我可以使用更多信息。我对 Items 做了一些阅读，但看不到它们如何用作整数。看起来好像它们是用于文件集合的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T20:45:13.113

而且您的示例工作正常，只是类名有误：应该是 **[MSBuild]**，而不是**[MsBuild]**

```
<Message Text ="The sum of $(NumberOne) and $(NumberTwo) is $([MSBuild]::Add($(NumberOne), $(NumberTwo)))"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T19:09:52.933

就在这里。创建一个项目，然后使用 Math.Add 来增加它：

```
<Math.Add Numbers="$(ITEM);1">
    <Output TaskParameter="Result" PropertyName="ITEM"/>
</Math.Add> 
```

# asp.net - asp.net 文件系统网站中的类模块

> ID：12323989
> 
> 赞同：0
> 
> 时间：2012-09-07T19:06:14.233
> 
> 标签：asp.net

我的 App_code 文件夹中有一个类模块。

```
Private _connection As MySqlConnection
Private _connStr As String

Public Function Connect(dbName As String) As Boolean
    Try
        _connStr = "Database=" & dbName & ";" & _
                "Data Source=192.16.0.1;" & _
                "User Id=user;Password=pass"
        _connection = New MySqlConnection(_connStr)
        _connection.Open()
        _connection.Close()
        Return True
    Catch ex As Exception
        _connection = Nothing
        Return False
    End Try
    Return False
End Function 
```

我通常在网络表单应用程序中编程。为什么我不能从页面后面的 aspx 代码访问此功能？我为该类添加了导入语句。如果我让那个函数共享，我就不能拥有那些私有变量。

我像这样在我的 aspx 中调用该函数；

`If Connect(dbName) then....`

这让我出错“非共享成员需要对象引用”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T19:30:09.963

您需要将关键字“Shared”添加到方法签名中，如下所示：

```
Private Shared _connection As MySqlConnection
Private Shared _connStr As String
Public Shared Function Connect(dbName As String) As Boolean 
```

这是因为否则您有实例类成员，而不是静态成员。编译器错误消息是不言自明的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T19:37:20.357

如果您查看此示例有效：

```
 Public Shared Function example123(ByVal USER As Integer, ByVal Section As String,   ByVal ACTION As String) As Boolean 
```

您分配了一个**共享**功能，以便您可以从课堂外看到它

我希望你工作

# postscript - 如何在 PostScript 中对齐多字体行

> ID：12323991
> 
> 赞同：2
> 
> 时间：2012-09-07T19:06:30.533
> 
> 标签：postscript

`PostScript`可以通过计算 SpaceMod 和使用来证明一行`widthhow`：

```
/SpaceMod % calculated from line width and stringwidth
/h { 0 32 } def 

/Times-Roman findfont
14 scalefont setfont    
SpaceMod h (This line with single font is justified) widthshow 
```

但是我们如何将这种方法用于具有不同字体的行呢？一个简单的例子是在该行中有一个粗体部分

```
/Times-Roman findfont
14 scalefont setfont    
X h (How to) widthshow

/Times-Roman-Bold findfont
14 scalefont setfont    
X h justify this line) widthshow

/Times-Roman findfont
14 scalefont setfont    
X h (with multi fonts) widthshow 
```

问题是我们没有一个字符串来获取整行`stringwidth`。即使基于单个字符串计算它，我们如何计算/设置 SpaceMod？

或者我们需要使用另一种方法来对齐多字体？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T19:13:08.423

蛮力..

```
/justifyshow {
    /linerem exch def
    dup length 3 idiv /nsub exch def
    /instring exch def
    instring aload pop
    /spct 0 def
    /setf {3 2 roll findfont 3 2 roll scalefont setfont } def
    nsub {
        setf dup
        stringwidth pop linerem exch sub /linerem exch def
        {32 eq { spct 1 add /spct exch def} if } forall
         } repeat
    /addsp linerem spct div def
    instring aload pop
%cleanup
    [ /spct /linerem /instring ] { userdict exch undef } forall
% comment following three lines to reverse argument order
    /ct nsub def
    nsub 1 sub { ct 1 sub /ct exch def ct 1 add 3 mul  3 roll } repeat
    userdict /ct undef
%
    nsub { setf addsp 0 32 4 -1 roll  widthshow } repeat
} def
% usage [ fontn sizen stringn ...  font1 size1 string1 ]
% linewidth justifyshow

100 100 moveto
[
/Helvetica 12 (hot to justify)
/HelveticaBold 24 ( large bold)
/Helvetica 12 ( in part of a line)
] 400 justifyshow 
```

毫无疑问，这可以收紧一点..

编辑，正如我所说的那样，另一个收紧了一点。

```
% count spaces in a string
/stringspace {0 exch { 32 eq { 1 add } if}  forall} def
% set font routine
/setf {3 2 roll findfont 3 2 roll scalefont setfont } def
/justifyshow {
% def array length leave line length and array on stack
exch dup length 3 idiv /nsub exch def
aload pop
% split input array into array of [ font size string ] arrays
/incc nsub 3 mul 1 add def
[ nsub { incc 1 roll [ 4 1 roll ] incc 3 sub /incc  exch def } repeat  ] /fstringlist exch def
% reverse sort string order (can comment out this line if needed )
[ nsub 1 sub -1 0 { fstringlist exch get} for ] /fstringlist exch def
% count spaces
0 fstringlist {aload pop 3 1 roll pop pop stringspace add } forall
% count total line length
0 fstringlist {aload pop setf stringwidth pop add } forall
% at this point the target length, actuial length and space count are on the stack
% calculate space to add
3 -1 roll sub neg exch div /addsp exch def
% show strings
fstringlist { aload pop setf addsp 0 32 4 -1 roll  widthshow } forall } def

100 100 moveto
[
/Helvetica 12 (how to justify)
/HelveticaBold 24 ( large bold)
/Helvetica 12 ( in part of a line)
/Helvetica 50 ( !!!)
] 400
justifyshow 
```

# sitecore - 从 Sitecore 6.5 中的自定义字段获取当前项目

> ID：12323993
> 
> 赞同：2
> 
> 时间：2012-09-07T19:06:41.467
> 
> 标签：sitecore, custom-fields

我正在 sitecore 6.5 中构建一个自定义字段。该字段将根据该字段所在的项目生成新项目（它使用项目的名称来生成文件夹），我需要引用正在使用该字段的项目。我如何访问这个？

我的自定义字段继承自 sitecore Sitecore.Shell.Applications.ContentEditor.File 类，如果这有帮助的话。

我的问题类似于位于此处的问题：[如何在 Sitecore 的自定义字段中获取对当前编辑项目的引用](https://stackoverflow.com/questions/8148279/how-to-get-a-reference-to-the-currently-edited-item-when-inside-a-custom-field-i)

但是，以前版本的 sitecore 存在问题，并且解决方案似乎不再起作用（ItemID 不在视图状态中，也没有被管道填充）。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T15:37:42.953

为同一个问题苦苦挣扎了几个小时，我最终反编译了EditorFormatter，发现这个类有一个名为SetProperties的方法。

通过反射（！？）此方法检查您的字段编辑器是否具有属性“ItemID”、“ItemVersion”、“ItemLanguage” *......*

好的，所以通过添加一个公共属性“ItemID”我们有正在编辑的项目

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T21:57:45.720

如果我没记错的话，`Sitecore.Data.Fields.FileField`是 Sitecore API 中字段数据的表示。例如，您可以使用它来检索`MediaItem`或`Src`通过强制转换项目的字段，如下所示：

```
var fieldSrc = ((FileField)Sitecore.Context.Item.Fields["My File Field"]).Src; 
```

我不认为它打算用作 Sitecore 客户端中的自定义字段。尝试继承`Sitecore.Shell.Applications.ContentEditor.File`或只是海峡`Sitecore.Web.UI.HtmlControls.Control`。只要您`public string ItemID { get; set; }`定义了一个属性，Sitecore 就应该使用当前项目 ID 填充它。

# javascript - 只在第一页加载时工作，而不是当用户通过后退/前进时

> ID：12323999
> 
> 赞同：1
> 
> 时间：2012-09-07T19:07:23.057
> 
> 标签：javascript, jquery

当用户第一次登陆我的页面时（通过链接或直接输入 URL），我想做一些工作。但是，如果用户离开其他地方并通过后退/前进按钮返回我的页面，我不想再做这项工作。

实现这一目标的最佳方法是什么？

注意：如果用户点击刷新按钮，则应该完成工作，强制重新加载页面。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T21:05:24.247

```
if (performance.navigation.type !== performance.navigation.TYPE_BACK_FORWARD) {
     //No back or forward button.
} 
```

Combine this with localStorage I suppose.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T19:35:32.917

下面概述了一种可能的方法，尽管它一点也不优雅。

1.  在服务器生成的页面中嵌入随机随机数密钥
2.  JS 检查 cookie 中是否存在这个随机数？
    1.  如果不存在，将其保存在 cookie 中并运行脚本
    2.  如果存在，则该页面是从浏览器内存中加载的，因此不是新加载的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-07T19:39:18.417

只是一个想法：

浏览器通常会记住输入值，因此当您返回时它们会出现。

您可以使用输入（用 CSS 隐藏）。

onload 检查输入的当前值是否有特殊值（此值必须在服务器端生成，因此使用后退/前进时不会刷新）

```
<script  type="text/javascript">
jQuery(
  function($)
  {
    if($('#history').val()==$('#history').data('value'))
    {
      alert('you did use back/forward');
    }    
    else
    {
      $('#history').val($('#history').data('value'));
      alert('you did not use back/forward');
    }    
  }
);
</script>
<input style="display:none" id="history" data-value="<?php echo time();?>"/> 
```

当用户使用 back/forward 时，input-value 等于 data-value 属性（但当用户按 F5 时不等于，因为此时 data-value-attribute 也会刷新）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-07T19:37:25.257

最好的方法是使用 HTML5 网络存储，使用会话存储。当页面加载第一次检查是否设置了本地存储变量并存储了一些数据，如果没有设置数据，如果用户使用下一个/上一个按钮并在页面加载事件被调用时再次返回，您可以检测到该用户之前曾在这里及其不是第一页加载。请参阅此演示 [http://www.amitpatil.me/demos/html5-web-storage/web_storage.html](http://www.amitpatil.me/demos/html5-web-storage/web_storage.html)，这是详细的文章[http://www.amitpatil.me/introduction-to-html5-feature-web-贮存/](http://www.amitpatil.me/introduction-to-html5-feature-web-storage/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-07T19:46:44.957

[LocalStorage](http://diveintohtml5.info/storage.html)在这里会很好。与 cookie 类似，但仅存在于客户端，没有任何内容与标头一起发送。其他人说相同或相似，我希望这个例子告诉你这一切是多么容易。

因此，您将变量的值设置为当前页面的标识符，并将其引用到变量 A) 现有和 B) 设置为第一页。

```
<script>
if( !localStorage["lastPage"] && localStorage["lastPage"] != theFirstPageIdentifier ) {
   // this is the first view
   localStorage["lastPage"] = currentPageIdentifier;
}
</script> 
```

注意：旧版本的 IE（可能是其他版本）无法使用 localStorage，并且可以在此处使用 cookie 作为后备。相同的概念。

I feel like you need an example to show you this will work: [http://rlemon.github.com/demos/12323999/page1.html](http://rlemon.github.com/demos/12323999/page1.html) view source.

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-09-07T19:24:57.617

我认为解决您的问题的方法是存储一个会话 cookie，该会话 cookie 在当前浏览器打开时会保留，然后会过期 - 这很容易使用[jQuery Cookie 插件](https://github.com/carhartl/jquery-cookie)

然后您可以像这样轻松设置cookie

```
$.cookie("example", "foo"); 
```

如果 cookie 不存在，您所说的工作将被执行，而忽略 cookie 存在