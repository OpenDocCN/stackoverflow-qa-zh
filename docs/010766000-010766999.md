# StackOverflow 问答 10766000-10766999

# facebook - Facebook 应用程序可以向其用户发送消息吗

> ID：10766001
> 
> 赞同：1
> 
> 时间：2012-05-26T11:57:52.613
> 
> 标签：facebook, facebook-graph-api, graph

Facebook 应用程序是否可以向其用户发送消息？发送我们在通知（收件箱）旁边收到的消息。代表应用程序。?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-26T12:31:54.903

facebook api 根本不允许发送私人消息（收件箱），不允许应用程序或应用程序的用户发送。

对于用户（使用用户访问令牌）应用程序可以使用[发送对话框](http://developers.facebook.com/docs/reference/dialogs/send/)或[聊天 API](http://developers.facebook.com/docs/chat/)。

至于从应用程序发送用户通知，请查看[社交渠道](http://developers.facebook.com/docs/channels/)和[请求](http://developers.facebook.com/docs/requests/)文档。

# couchdb - CouchDB 删除并重新创建一个文档

> ID：10766002
> 
> 赞同：0
> 
> 时间：2012-05-26T11:57:55.963
> 
> 标签：couchdb, couchcocoa

我试图避免在我的 CouchDB 中建立修订，因此我可以使用 TouchDB 的“批量拉动”进行复制（它在所有 1st-revs 上批量拉动。）仅删除文档会是不好的做法吗？重新创建它而不是修改它，以便所有文档都保持在 rev-1？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T03:17:02.817

好吧，我想说你的提议让我觉得很脏，但这不是一个很好的答案，所以..

你提到了 TouchDB 和批量拉取，所以你有一个可以在外部修改数据的移动应用程序，我假设希望能够修改它自己的数据。所以我能想到的最大问题是更新冲突解决方案。IE。当客户端脱机时，如何处理客户端和服务器上文档的更改。我认为您将开始不得不做很多沙发本应为您处理的同步工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T08:00:43.587

删除 CouchDB 中的文档，不会重置 _rev。

CouchDB 从不删除文档，它只是将最后一个修订标记为已删除。压缩将删除以前的修订，只保留最后一个。这是复制正常工作所必需的。这就是为什么文档的已删除修订不应包含任何数据，而应仅包含文档的 _id 和 _deleted 标志。

完全删除已删除文档的任何痕迹的唯一方法是将所有文档复制到新数据库。但请记住复制的后果。

# linux - 为什么Linux在按Ctrl+C时总是输出“^C”？

> ID：10766004
> 
> 赞同：8
> 
> 时间：2012-05-26T11:58:17.793
> 
> 标签：linux, bash, signals, sigint

我一直在研究 Linux 中的信号。我已经做了一个测试程序来捕获 SIGINT。

```
#include <unistd.h>
#include <signal.h>
#include <iostream>
void signal_handler(int signal_no);
int main() {
  signal(SIGINT, signal_handler);
  for (int i = 0; i < 10; ++i) {
  std::cout << "I'm sleeping..." << std::endl;
  unsigned int one_ms = 1000;
  usleep(200* one_ms);
  }
  return 0;
}
void signal_handler(int signal_no) {
  if (signal_no == SIGINT)
    std::cout << "Oops, you pressed Ctrl+C!\n";
  return;
} 
```

虽然输出如下所示：

```
I'm sleeping...
I'm sleeping...
^COops, you pressed Ctrl+C!
I'm sleeping...
I'm sleeping...
^COops, you pressed Ctrl+C!
I'm sleeping...
^COops, you pressed Ctrl+C!
I'm sleeping...
^COops, you pressed Ctrl+C!
I'm sleeping...
^COops, you pressed Ctrl+C!
I'm sleeping...
I'm sleeping...
I'm sleeping... 
```

我知道当按下 Ctrl+C 时，前台进程组中的进程都会收到一个 SIGINT（如果没有进程选择忽略它）。

那么shell（bash）和上述程序的实例是否都收到了信号？每个“Oops”之前的“^C”来自哪里？

操作系统是 CentOS，外壳是 bash。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-26T12:47:53.990

拦截 ^C 并将其转换为发送到附加进程（即外壳）的信号的是终端（驱动程序），`stty intr ^B`它将指示终端驱动程序拦截 ^B。也是终端驱动程序将 ^C 回显到终端。

shell 只是一个位于线路另一端的进程，它通过终端驱动程序（例如 /dev/ttyX）从终端接收它的标准输入，并且它的标准输出（和标准错误）也连接到同一个 tty .

请注意（如果启用了回显）终端将击键发送到*进程*（组）并返回到终端。stty 命令只是 ioctl()s 的包装，用于“控制”tty 进程的 tty 驱动程序。

更新：为了证明不涉及shell，我创建了以下小程序。它应该由其父 shell 执行`exec ./a.out`（无论如何，交互式 shell 会派生一个子 shell）程序将生成 SIGINTR 的密钥设置为 ^B，关闭回显，然后等待来自标准输入的输入。

```
#include <stdio.h>
#include <string.h>
#include <termios.h>
#include <unistd.h>
#include <signal.h>
#include <errno.h>

int thesignum = 0;
void handler(int signum);

void handler(int signum)
{ thesignum = signum;}

#define THE_KEY 2 /* ^B */

int main(void)
{
int rc;
struct termios mytermios;

rc = tcgetattr(0 , &mytermios);
printf("tcgetattr=%d\n", rc );

mytermios.c_cc[VINTR] = THE_KEY; /* set intr to ^B */
mytermios.c_lflag &= ~ECHO ; /* Dont echo */
rc = tcsetattr(0 , TCSANOW, &mytermios);
printf("tcsetattr(intr,%d) =%d\n", THE_KEY, rc );

printf("Setting handler()\n" );
signal(SIGINT, handler);

printf("entering pause()\n... type something followed by ^%c\n", '@'+THE_KEY );
rc = pause();
printf("Rc=%d: %d(%s), signum=%d\n", rc, errno , strerror(errno), thesignum );

// mytermios.c_cc[VINTR] = 3; /* reset intr to ^C */
mytermios.c_lflag |= ECHO ; /* Do echo */
rc = tcsetattr(0 , TCSANOW, &mytermios);
printf("tcsetattr(intr,%d) =%d\n", THE_KEY, rc );

return 0;
} 
```

intr.sh：

```
#!/bin/sh
echo $$
exec ./a.out
echo I am back. 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-26T12:03:10.303

shell 会回显您键入的所有内容，因此当您键入`^C`时，也会回显（并且在您的情况下会被信号处理程序拦截）。`stty -echo`根据您的需要/限制，该命令可能对您有用也可能没用，有关更多信息，请参阅[stty 的手册页。](http://unixhelp.ed.ac.uk/CGI/man-cgi?stty)

当然，在较低级别上还有很多事情要做，*只要*您通过外围设备驱动程序（例如用于生成 ^C 信号的键盘驱动程序和显示所有内容的终端驱动程序）与系统进行通信。您可以在汇编/机器语言、寄存器、查找表等方面进行更深入的研究。如果您想要更详细、更深入的理解，以下书籍是一个不错的起点：

[Unix OS 的设计](https://rads.stackoverflow.com/amzn/click/com/0132017997)是这类事情的一个很好的参考。还有两篇经典参考：[Unix Programming Environment](https://rads.stackoverflow.com/amzn/click/com/013937681X) 和[Advanced Programming in the UNIX Environment](https://rads.stackoverflow.com/amzn/click/com/0321525949)

在这个 SO 问题中很好的总结[如何 Ctrl-C 终止子进程？](https://stackoverflow.com/questions/6108953/how-does-ctrl-c-terminate-a-child-process)

“当你运行一个程序时，例如`find`，shell：

*   壳叉本身
*   并为孩子设置默认信号处理
*   用给定的命令替换孩子（例如用 find ）
*   当您按下 CTRL-C 时，父 shell 会处理此信号，但子 shell 会收到它 - 使用默认操作 - 终止。（孩子也可以实现信号处理）”

# python - opencv的cython中ndarray的翻转顺序 - OpenCV错误

> ID：10766009
> 
> 赞同：0
> 
> 时间：2012-05-26T11:58:45.107
> 
> 标签：python, opencv, numpy, cython

为帖子的长度道歉...

我正在使用 cython 来包装一些用于图像处理的 cpp 代码。

在返回我处理的 32 位 ARGB 模式的图像时 - 即 32 位 uint where `r = (buff[0] >> 16) & 0xFF; g = (buff[0] >> 8) & 0xFF; g = buff[0] & 0xFF`，我使用此处手册中建议的 python 对象将数据读入 ndarray：http: [//docs.scipy.org /doc/numpy/user/c-info.how-to-extend.html](http://docs.scipy.org/doc/numpy/user/c-info.how-to-extend.html)使用以下类：

```
cdef class DataPointer:
    cdef void* data_ptr
    cdef int size

    cdef set_data(self, int size, void* data_ptr):
        self.size = size
        self.data_ptr = data_ptr

    def __array__(self):
        return np.PyArray_SimpleNewFromData(2, [self.size,4], np.NPY_UINT8, self.data_ptr) 
```

和以下电话：

```
 cdef np.ndarray image

    data = DataPointer()
    data.set_data(height*width, <void*>im_buff)

    image = np.array(data, copy=False)
    image.base = <PyObject*> data
    Py_INCREF(data) 
```

这给了我一个数组，其中每一行都是单独的 ARGB 值，因此有 shape `(height*width, 4)`。它们看起来像这样：

```
[ 67 115 138   1] 
```

这些值对应于 BGR A。

现在如果我继续做

```
original = np.delete(image, 3, 1).reshape((height, width, 3)
cv2.imshow('out', original) 
```

它工作正常，但是 RGB 值被反转为 BGR，因此图像看起来很有趣。

但是，当我尝试像这样翻转值时：

```
original = np.fliplr(np.delete(image, 3, 1)).reshape((height, width, 3))
print original [0, :3]
cv2.imshow('out', original) 
```

我打印了以下正确的 RGB 值，但来自 cv2.imshow() 的错误消息

```
[[138 115  67]
[138 114  68]
[136 110  64]]
OpenCV Error: Bad flag (parameter or structure field) (Unrecognized or unsupported array type) in cvGetMat, file /Users/Tom/Desktop/OpenCV-2.4.0/modules/core/src/array.cpp, line 2482 
```

知道为什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T13:05:32.390

由于 OpenCV 中的错误而失败：http: [//code.opencv.org/issues/1393](http://code.opencv.org/issues/1393)

您应该能够通过将翻转矩阵乘以 1 来解决此问题：

```
original = original * 1 
```

# java - 联系人数据库中快速子串搜索的算法

> ID：10766010
> 
> 赞同：3
> 
> 时间：2012-05-26T11:58:49.493
> 
> 标签：java, algorithm, lucene, full-text-search, search-engine

我有一个包含大约 100 万个姓名和地址的数据库。该数据库应公开用于在网页上进行类似“Google Suggest”的即时搜索。我正在寻找一种有效的算法/数据结构来帮助我实现这一目标。

使这比仅使用[Trie](http://en.wikipedia.org/wiki/Trie "特里")或[Generalized Suffix Tree](http://en.wikipedia.org/wiki/Suffix_tree%20Suffix%20tree)更困难的是，它必须支持省略某些名称的查询。例如，当用户键入“Elvis Pr”时，应建议“Elvis Aaron Presley”。

我希望在内存中获得整个索引（我有大约 4GB 的 RAM 可用于此）。

该应用程序是用 Java 编写的，因此指向基于 Java 的库的链接被认为是非常有用的。我一直在研究[Lucene](http://lucene.apache.org/ "Apache Lucene")和[MG4J](http://mg4j.dsi.unimi.it/ "MG4J：为 Java 管理千兆字节")，但我还没有弄清楚我可以使用哪种类型的索引来解决我的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T15:41:32.623

也许您真正想要的是一个搜索，其中用户输入的每个单词都必须作为联系人中某个单词的*前缀出现。*这比一般的子字符串搜索更容易和更快。

1.  构建属于任何联系人的所有单词的单个排序数组，并在每个单词旁边存储一个“联系人 ID”字段（例如 [Aaron/1, Aleksander/2, Blomskøld/2, Elvis/1, Presley/1]）。
2.  对于用户键入的每个单词，分别使用二分搜索来查找以该单词开头的名称范围（这必然是数组中连续的索引范围）。由于用户通常每次击键只调整一个单词，因此您只需要在每次击键时重新计算其中一个范围 - 事实上，即使是这个重新计算步骤也可以在输入额外字母的常见情况下更有效地完成，因为这只能缩小匹配词的范围。
3.  最后，将联系人 ID 集合相交以生成可能性列表。为了显示可能性，您将需要第二个数组，按联系人 ID 索引并包含全名。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T12:05:53.607

您可以尝试使用带有字符串距离度量的[bk-tree](http://en.wikipedia.org/wiki/BK-tree)，例如[levenshtein](http://en.wikipedia.org/wiki/Levenshtein_distance) ，另请参阅[http://blog.notdot.net/2007/4/Damn-Cool-Algorithms-Part-1-BK-Trees](http://blog.notdot.net/2007/4/Damn-Cool-Algorithms-Part-1-BK-Trees)。

**编辑：** 发明距离度量很困难，但我碰巧知道一个可以使用的称为[结构熵距离](http://dl.acm.org/citation.cfm?doid=1995412.1995426)的度量，它基于信息差异。它的工作原理如下：

取两个字符串 x = "Elvis Pr" 和 y = "Elvis Aaron Presley"

为每个计算出一元和二元的多重集：

```
x = {e, l, v, i, s, _, p, r, el, lv, vi, is, s_,  _p, pr}
y = {ex3, lx2, v, i, sx2, _x2, ax2, rx2, o, n, p, y, el, lv, vi, is, s_, _a, aa, ar, ro, on, n_, _p, pr, re, es, sl, le, ey} 
```

现在对于两者中的那些条款

```
{e, l, v, i, s, _, p, r, el, lv, vi, is, s_, _p, pr} 
```

`(f_x(t) / (f_x(t) + f_y(t)))^{f_x(t)/2} * (f_y(t) / (f_x(t) + f_y(t)))^{f_y(t)/2}` 这样计算产品

```
e  = ((1/15) / (1/15 + 3/37))^(1/30) * ((3/37) / (1/15 + 3/37))^(3/74)
l  = ((1/15) / (1/15 + 2/37))^(1/30) * ((2/37) / (1/15 + 2/37))^(2/74)
v  = ((1/15) / (1/15 + 1/37))^(1/30) * ((1/37) / (1/15 + 1/37))^(1/74)
i  = ((1/15) / (1/15 + 1/37))^(1/30) * ((1/37) / (1/15 + 1/37))^(1/74)
s  = ((1/15) / (1/15 + 2/37))^(1/30) * ((2/37) / (1/15 + 2/37))^(2/74)
_  = ((1/15) / (1/15 + 2/37))^(1/30) * ((2/37) / (1/15 + 2/37))^(2/74)
p  = ((1/15) / (1/15 + 1/37))^(1/30) * ((1/37) / (1/15 + 1/37))^(1/74)
r  = ((1/15) / (1/15 + 2/37))^(1/30) * ((2/37) / (1/15 + 2/37))^(2/74)
el = ((1/15) / (1/15 + 1/37))^(1/30) * ((1/37) / (1/15 + 1/37))^(1/74)
lv = ((1/15) / (1/15 + 1/37))^(1/30) * ((1/37) / (1/15 + 1/37))^(1/74)
vi = ((1/15) / (1/15 + 1/37))^(1/30) * ((1/37) / (1/15 + 1/37))^(1/74)
is = ((1/15) / (1/15 + 1/37))^(1/30) * ((1/37) / (1/15 + 1/37))^(1/74)
s_ = ((1/15) / (1/15 + 1/37))^(1/30) * ((1/37) / (1/15 + 1/37))^(1/74)
_p = ((1/15) / (1/15 + 1/37))^(1/30) * ((1/37) / (1/15 + 1/37))^(1/74)
pr = ((1/15) / (1/15 + 1/37))^(1/30) * ((1/37) / (1/15 + 1/37))^(1/74) 
```

将所有这些相乘，您应该得到一个范围为 [0.5, 1] 的数字，因此您可以通过乘以 2 并减去 1 更有效地将其缩放到范围 [0,1]。

但是，这不是离散距离度量，因此您将不得不使用另一个度量索引，例如[vp-tree](http://en.wikipedia.org/wiki/Vp-tree)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-26T15:55:24.550

Solr 提供了全功能的自动建议功能 OOTB。[此链接](http://www.lucidimagination.com/blog/2009/09/08/auto-suggest-from-popular-queries-using-edgengrams/)提供了一些从流行查询生成的背景。但是您可以轻松地对其进行调整以构建一些先验知识，例如您描述的场景。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-28T07:11:18.947

看看[Cleo](http://sna-projects.com/cleo/)，它看起来你有一个非常相似的用例。他们使用 Bloom 过滤器来搜索前缀，并使用 Forward 索引来去除误报。

# spring - 以异步方式插入数据的休眠异常

> ID：10766012
> 
> 赞同：1
> 
> 时间：2012-05-26T11:59:04.233
> 
> 标签：spring, hibernate, insert

我正在使用 Spring RESTful 服务，这些服务由 Android 设备访问，用于在我们的数据库中插入数据。当两个同时请求出现时，它会给出异常。我正在使用 MySQL 数据库。

```
[ WARN] [http-8081-5 05:20:33] (JDBCExceptionReporter.java:logExceptions:100) SQL Error: 1062, SQLState: 23000
[ERROR] [http-8081-5 05:20:33] (JDBCExceptionReporter.java:logExceptions:101) Duplicate entry '64-2-2012-05-26 17:20:12' for key 'question_id_2'
[ERROR] [http-8081-5 05:20:33] (AnswersHome.java:persist:57) persist failed
org.hibernate.exception.ConstraintViolationException: could not insert: [com.web.feedbox.domain.Answers]
    at org.hibernate.exception.SQLStateConverter.convert(SQLStateConverter.java:94)
    at org.hibernate.exception.JDBCExceptionHelper.convert(JDBCExceptionHelper.java:66)
    at org.hibernate.id.insert.AbstractReturningDelegate.performInsert(AbstractReturningDelegate.java:64)
    at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:2176)
    at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:2656)
    at org.hibernate.action.EntityIdentityInsertAction.execute(EntityIdentityInsertAction.java:71)
    at org.hibernate.engine.ActionQueue.execute(ActionQueue.java:279)
    at org.hibernate.event.def.AbstractSaveEventListener.performSaveOrReplicate(AbstractSaveEventListener.java:321)
    at org.hibernate.event.def.AbstractSaveEventListener.performSave(AbstractSaveEventListener.java:204)
    at org.hibernate.event.def.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:130)
    at org.hibernate.event.def.DefaultSaveOrUpdateEventListener.saveWithGeneratedOrRequestedId(DefaultSaveOrUpdateEventListener.java:210)
    at org.hibernate.event.def.DefaultSaveEventListener.saveWithGeneratedOrRequestedId(DefaultSaveEventListener.java:56)
    at org.hibernate.event.def.DefaultSaveOrUpdateEventListener.entityIsTransient(DefaultSaveOrUpdateEventListener.java:195)
    at org.hibernate.event.def.DefaultSaveEventListener.performSaveOrUpdate(DefaultSaveEventListener.java:50)
    at org.hibernate.event.def.DefaultSaveOrUpdateEventListener.onSaveOrUpdate(DefaultSaveOrUpdateEventListener.java:93)
    at org.hibernate.impl.SessionImpl.fireSave(SessionImpl.java:563)
    at org.hibernate.impl.SessionImpl.save(SessionImpl.java:551)
    at org.hibernate.impl.SessionImpl.save(SessionImpl.java:547)
    at com.web.feedbox.dao.AnswersHome.persist(AnswersHome.java:53)
    at com.web.feedbox.dao.AnswersHome$$FastClassByCGLIB$$b168da70.invoke(<generated>)
    at net.sf.cglib.proxy.MethodProxy.invoke(MethodProxy.java:191)
    at org.springframework.aop.framework.Cglib2AopProxy$CglibMethodInvocation.invokeJoinpoint(Cglib2AopProxy.java:688)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:150)
    at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:110)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
    at org.springframework.aop.framework.Cglib2AopProxy$DynamicAdvisedInterceptor.intercept(Cglib2AopProxy.java:621)
    at com.web.feedbox.dao.AnswersHome$$EnhancerByCGLIB$$6591cd7b.persist(<generated>)
    at com.web.feedbox.service.AnswerServiceImpl.persist(AnswerServiceImpl.java:24)
    at com.web.feedbox.controller.RestProviderController.getAnswers(RestProviderController.java:167)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.springframework.web.bind.annotation.support.HandlerMethodInvoker.invokeHandlerMethod(HandlerMethodInvoker.java:176)
    at org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.invokeHandlerMethod(AnnotationMethodHandlerAdapter.java:426)
    at org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.handle(AnnotationMethodHandlerAdapter.java:414)
    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:790)
    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:719)
    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:644)
    at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:549)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:617)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:368)
    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:109)
    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:83)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:97)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:100)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:78)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    at org.springframework.security.web.authentication.rememberme.RememberMeAuthenticationFilter.doFilter(RememberMeAuthenticationFilter.java:119)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:54)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:35)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilter(BasicAuthenticationFilter.java:177)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:187)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:105)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:79)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:169)
    at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:237)
    at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:167)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:88)
    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.springframework.orm.hibernate3.support.OpenSessionInViewFilter.doFilterInternal(OpenSessionInViewFilter.java:198)
    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:859)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:602)
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
    at java.lang.Thread.run(Thread.java:662) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T09:47:22.670

这是一个多线程问题。休眠会话不是线程保存。一个休眠会话只能用于一个浏览器 (Android) 会话（除非与 Java`synchronized{}`块同步 - 这里不推荐）。

如果你自己生成你的唯一id，不让数据库做，而是自己做，你的id生成可能不会同步和线程安全。相反，MySQL id 生成是线程安全的 - 检查 id 列的生成器定义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T04:34:42.813

有两条路要走，取决于应该`question_id_2`是唯一的。

1.  如果它应该是唯一的，则必须更改生成它的那部分代码以保证唯一性。

2.  如果它不应该是唯一的，您可以将其降级为普通列并添加[surrogate key](http://en.wikipedia.org/wiki/Surrogate_key)。使用[标识符生成器](http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html/mapping.html#mapping-declaration-id-generator)承担了创建远离您的唯一值的负担。

`question_id_2`同样一般来说，如果它不是某种外部标识符，考虑划分存储在 中的信息的可能性也是有意义的。它看起来像是时间戳和另外两条数据的组合。

# python - QWheelEvent.ignore() 没有通过事件？

> ID：10766013
> 
> 赞同：0
> 
> 时间：2012-05-26T11:59:12.003
> 
> 标签：python, event-handling, qt4, pyqt4

在 的子类中`QGraphicsView`，我实现了`wheelEvent(event)`事件处理程序，如下所示：

```
def wheelEvent(self, event):

    print "Wheel event received"
    event.ignore() 
```

据我了解，这实际上应该只是打印上面的字符串。应该将`QWheelEvent.ignore()`事件传递给父级并继续其通常的业务（即滚动）。[文档](http://qt-project.org/doc/qt-4.8/qwidget.html#wheelEvent)对此很明确：

> 如果你重新实现这个处理程序，如果你不处理它，那么忽略() 事件是非常重要的，这样小部件的父级可以解释它。

在这种情况下，`QGraphicsView`是主小部件，因此它没有父级（除非父级是指派生它的父类）。

然而，在实践中，字符串按预期打印，但视图不会滚动其内容。

那么如何实现此方法**并**获得`QGraphicsView`滚动？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T12:04:50.267

好吧，如果您从不调用主类，那么父类（是的，这是您继承的对象）将很难做任何事情，代码何时运行？

添加`super(type(self), self)`应该有帮助（感谢@mata 提供正确的python2 语法）

# objective-c - 以更聪明的方式从单例中检索数据？

> ID：10766016
> 
> 赞同：1
> 
> 时间：2012-05-26T11:59:53.783
> 
> 标签：objective-c, ipad, singleton

我的 中有一些游戏数据，我`GameStateSingleton`不想每次都明确地检索这些数据`[[GameStateSingleton sharedMySingleton]getVariable]`，所以我问自己是否可以做这样的事情：

在我的类的接口文件中，`GameLayer`我设置了属性和变量，例如`sharedHealth`.

```
@interface GameLayer : CCLayer
{
    int sharedHealth;

}
@property (nonatomic,assign) int sharedHealth; 
```

当然在实现中综合它。

```
@synthesize sharedHealth; 
```

在 GameLayer 的初始化中，我想做类似的事情：

```
sharedHealth = [self getCurrentHealth]; 
```

并添加相应的方法

```
-(int)getCurrentHealth{
   int myHealth = [[GameStateSingleton sharedMySingleton]getSharedHealth];
   return myHealth;
} 
```

那可能吗 ？从我的经历来看，我似乎只是崩溃了。我将如何实现我的目标，不必总是调用 long 方法，因为它总是检索相同的变量？必须有一个解决方案...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T12:07:34.603

你不需要一个实例变量。你可以写一个这样的快捷函数：

```
- (int)sharedHealth {
    return [[GameStateSingleton sharedMySingleton] getSharedHealth];
} 
```

无论何时您需要该值，您都可以调用`[self sharedHealth]`.

您也可以改用预处理器宏。只需定义这个：

```
#define SharedHealth [[GameStateSingleton sharedMySingleton] getSharedHealth] 
```

然后在您需要该值时简单地使用它。

请注意，在 Objective-C 中，您不调用 getter 方法“ `getVariable`”，而只是调用“ `variable`”。大多数情况下，这是一个约定，但如果您开始使用[KVC](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/KeyValueCoding/Articles/KeyValueCoding.html)或[KVO](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/KeyValueObserving/KeyValueObserving.html)，这是您必须遵循的规则。所以最好尽快适应。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T12:14:43.583

如果这只是您要避免的重复输入，您可以使用旧的 C 方式...

```
#define GAME_STATE [GameStateSingleton sharedMySingleton] 
```

...接着...

```
int localValue = [GAME_STATE property]; 
```

# ios - 指定 UIWebView 内容大小或位置

> ID：10766017
> 
> 赞同：0
> 
> 时间：2012-05-26T11:59:54.140
> 
> 标签：ios, cocoa-touch, uiwebview, uikit

我正在使用 UIWebView 加载带有以下代码的 .GIF 图像

```
 UIWebView *webView = [[UIWebView alloc]initWithFrame:self.view.frame];        
    [self.view addSubview:webView];
    [webView loadData:self.selectedImageData MIMEType:@"image/gif" textEncodingName:nil baseURL:nil]; 
```

我的问题是我的图像大小不同，我怎样才能使图像适合（拉伸或收缩）到 UIWebView 大小？或者我如何在 UIWebView 中指定一个框架，我可以在其中加载我的数据？

我试过 [webView sizeToFit]；但它没有用。

有关如何解决此问题的任何建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T12:05:23.030

```
I think this might help you

CGSize itemSize = CGSizeMake(60.0, 80.0);
        UIGraphicsBeginImageContext(itemSize);
        CGRect imageRect = CGRectMake(0.0, 0.0, itemSize.width, itemSize.height);
        [image drawInRect:imageRect];
        self.yourImage = UIGraphicsGetImageFromCurrentImageContext();
        UIGraphicsEndImageContext(); 
```

# jquery - 将 bxSlider 添加到使用 AJAX 生成的 div

> ID：10766018
> 
> 赞同：1
> 
> 时间：2012-05-26T11:59:56.013
> 
> 标签：jquery, ajax, bxslider

我有这两行html代码...

```
<div id="slider1" data-param1="XXX" data-param2="XXX"></div>
<script src="script.js" type="text/javascript"></script> 
```

由于使用 jQuery、JSON 和 PHP 的 script.js 文件，它生成了一个小部件。好吧，正如您将在代码中看到的那样，我的目标是在内部生成类似的东西`body`

```
<div id="slider1">
  <div>...</div>
  <div>...</div>
  <div>...</div>
</div> 
```

基于这个[额外的简单示例](https://gist.github.com/2793591)（在您尝试的任何地方都可以完美运行）。我的问题是我无法让 bxSlider 工作，也许我错过了 AJAX 的一些东西。这里有 script.js 代码。

```
(function() {
// Localize jQuery variable
var jQuery;

/******** Load jQuery if not present *********/

if (window.jQuery === undefined || window.jQuery.fn.jquery !== '1.7.2') {
    var script_tag = document.createElement('script');
    script_tag.setAttribute("type","text/javascript");
    script_tag.setAttribute("src",
        "https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js");
    if (script_tag.readyState) {
      script_tag.onreadystatechange = function () { // For old versions of IE
          if (this.readyState == 'complete' || this.readyState == 'loaded') {
              scriptLoadHandler();
          }
      };
    } else {
      script_tag.onload = scriptLoadHandler;
    }
    // Try to find the head, otherwise default to the documentElement
    (document.getElementsByTagName("head")[0] || document.documentElement).appendChild(script_tag);
} else {
    // The jQuery version on the window is the one we want to use
    jQuery = window.jQuery;
    main();
}

/******** Called once jQuery has loaded ******/
function scriptLoadHandler() {
    // Restore $ and window.jQuery to their previous values and store the
    // new jQuery in our local jQuery variable
    jQuery = window.jQuery.noConflict(true);
    // Call our main function
    main(); 
}

/******** Our main function ********/
function main() {   
    jQuery(document).ready(function($) { 

        /******* Capture Data Attributes *******/
        var param1 = $('div').data('param1');
        var param2 = $('div').data('param2');

          /******* Load BxSlider *******/
        var slider   = document.createElement("script");
        slider.type  = "text/javascript";
        slider.src   = "http://bxslider.com/sites/default/files/jquery.bxSlider.min.js";
        document.head.appendChild(slider);

        /******* Load BxSlider action (IS THIS RIGHT???) *******/
        var slide   = document.createElement("script");
        slide.text  = "$(document).ready(function(){ $('#slider1').bxSlider(); });";
        document.head.appendChild(slide);

        /******* Load CSS *******/
        var css_link = $("<link>", { 
            rel: "stylesheet", 
            type: "text/css", 
            href: "css/style.css" 
        });
        css_link.appendTo('head');  

        $.ajax({
          type: "GET",
          url: "something.php?api_key=" + param1 + "&shop_id="  + param2,
          async: true,
          dataType: "json",
          success: function(data){
            $("#slider1").empty();
            // This works fine, data is correct
            $.each(data,function(index, value) {
              $("#slider1").append("<div>" + data[index].title + "</div>");
            });
          }
        });
    });
}

})(); 
```

当我执行小部件时，数据内容显示正确，但 bxSlider 似乎不起作用。你知道可能出了什么问题吗？我如何以及在哪里可以调用`$('#slider1').bxSlider();`以正确获取滑块？

如果您需要更多解释或详细信息，请告诉我。

编辑：我也试过这个，但也不起作用

```
 (function() {
// Localize jQuery variable
var jQuery;

/******** Load jQuery if not present *********/

if (window.jQuery === undefined || window.jQuery.fn.jquery !== '1.7.2') {
    var script_tag = document.createElement('script');
    script_tag.setAttribute("type","text/javascript");
    script_tag.setAttribute("src",
        "https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js");
    if (script_tag.readyState) {
      script_tag.onreadystatechange = function () { // For old versions of IE
          if (this.readyState == 'complete' || this.readyState == 'loaded') {
              scriptLoadHandler();
          }
      };
    } else {
      script_tag.onload = scriptLoadHandler;
    }
    // Try to find the head, otherwise default to the documentElement
    (document.getElementsByTagName("head")[0] || document.documentElement).appendChild(script_tag);
} else {
    // The jQuery version on the window is the one we want to use
    jQuery = window.jQuery;
    main();
}

/******** Called once jQuery has loaded ******/
function scriptLoadHandler() {
    // Restore $ and window.jQuery to their previous values and store the
    // new jQuery in our local jQuery variable
    jQuery = window.jQuery.noConflict(true);
    // Call our main function
    main(); 
}

/******** Our main function ********/
function main() {   
    jQuery(document).ready(function($) { 

        /******* Capture Data Attributes *******/
        var param1 = $('div').data('param1');
        var param2 = $('div').data('param2');

          /******* Load BxSlider *******/
        var slider   = document.createElement("script");
        slider.type  = "text/javascript";
        slider.src   = "http://bxslider.com/sites/default/files/jquery.bxSlider.min.js";
        document.head.appendChild(slider);

        /******* Load CSS *******/
        var css_link = $("<link>", { 
            rel: "stylesheet", 
            type: "text/css", 
            href: "css/style.css" 
        });
        css_link.appendTo('head');  

        $.ajax({
          type: "GET",
          url: "something.php?api_key=" + param1 + "&shop_id="  + param2,
          async: true,
          dataType: "json",
          success: function(data){
            $("#slider1").empty();
            // This works fine, data is correct
            $.each(data,function(index, value) {
              $("#slider1").append("<div>" + data[index].title + "</div>");
            });
                $('#slider1').bxSlider();
          }
        });
    });
}

})(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T12:54:33.223

您可以`$('#slider1').bxSlider();`在 ajax 成功回调内部调用。使用$.each添加div后，可以直接调用`$('#slider1').bxSlider();`，无需添加script标签。

# ruby-on-rails - Rails 3：两个单一的嵌套资源，一个模型

> ID：10766023
> 
> 赞同：1
> 
> 时间：2012-05-26T12:00:47.107
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rest

我正在做我在 Rails 中的第一个更大的项目。它将是一个 RESTful API。我偶然发现的情况可以描述如下：我有模型'Person'和'Application'。

```
class Person < ActiveRecord::Base
  has_many :managed_applications, :class_name => "Application", :foreign_key => "manager_id"
  has_many :owned_applications, :class_name => "Application", :foreign_key => "owner_id"

  # other associations
  has_many :adresses
end

class Application < ActiveRecord::Base
  belongs_to :manager, :class_name => "Person"
  belongs_to :owner, :class_name => "Person"
end 
```

我应该如何设计我的控制器和路由，以便我有以下不言自明的资源工作？

```
/applications/<id>/owner
/applications/<id>/manager
/people/<id> 
```

问题是，当嵌套单一所有者和管理器资源在“复数”应用程序资源下时，所有路由都以相同的“PeopleController”操作结束，并具有相同的参数。

一个好处是，如果前两个资源在只读操作方面充当最后一个资源（例如，您可以通过一个请求检索特定应用程序的管理器的地址，'GET /applications/<id >/所有者/地址'）。这甚至是推荐的 API 设计吗？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T14:50:45.290

我认为这确实是一种有效的 REST 方法，但我会移除上一层地址的深层嵌套。然后人们将成为它自己的浅层资源，因此有自己的地址。我这样做是因为不鼓励 1 级以上的 REST 嵌套。请参阅[http://guides.rubyonrails.org/routing.html](http://guides.rubyonrails.org/routing.html)现在让我们解决另一个问题。控制器如何知道用户请求的是“所有者”或“管理员”。一种方法是在这样的路由中使用默认参数：

```
resources :applications do
  resource :owner, :controller => 'people', :defaults => {:type => 'owner'}
  resource :manager, :controller => 'people', :defaults => {:type => 'manager'}
end

resources :people do
  resources :address
end 
```

然后在您的 PeopleController 中：

```
class PeopleController < ApplicationController
  def show
    @type = params[:type] # can be manager, owner or nil
  end
end 
```

但请注意，用户可以在此处覆盖 url 中的这些默认参数，因此我将安全隐患留给您。

另一种方法是检查 request.fullpath ，它会产生完整的 url 地址。您可以在其中搜索经理或所有者。

祝你好运！

# php - mysql数据库更新和codeigniter行受影响的功能

> ID：10766031
> 
> 赞同：3
> 
> 时间：2012-05-26T12:02:01.457
> 
> 标签：php, codeigniter

我在更新查询后使用这个函数这个codeigniter函数

```
$this->db->affected_rows(); 
```

如果我更新值，它会返回受影响的行数，但如果我更新与以前相同的值，它将返回 0 行受影响

任何帮助...

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-26T12:25:50.873

> 是的，我知道我需要的是确认查询已成功运行。

如果“成功运行”，所有 CI 数据库函数都会返回结果。

所以

```
$result = $this->db->update('your_table', $data);
if ( ! $result)
{
     // Error
}
{
     // Function ran ok - do whatever
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T12:30:44.890

为了检查数据库查询是否成功，您可以使用以下命令检查错误代码：

```
$this->db->_error_message(); 
```

如果那是空的，那么你没有错误。如果没有，您会收到错误消息。`_error_number()`也已设置，因此如果您正在查找特定错误，则可以使用它。

通常，如果您知道有 ，则可以跳过错误检查`affected_rows()`，因此可以将`_error_message()`测试限制在`affected_rows()`返回 0 的情况下。

# shell - 如何通过 vimscript 运行 shell 命令？

> ID：10766033
> 
> 赞同：13
> 
> 时间：2012-05-26T12:02:19.133
> 
> 标签：shell, vim, command

在我的 Vim 设置中，我想添加一个运行带有特定映射的 shell 命令的配置。在 Vimscript 中是否有任何可能的方法来做到这一点？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-26T12:04:53.797

`vim`有一个`system()`功能：

```
:call system('date') 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-26T12:35:19.087

我用传统的 vi 做这个，所以我认为它也适用于 vim。

在我的 .exrc 中，我有：

```
map ^_ !}fmt 71 72^M 
```

（这是`^_`通过输入**ctrl-V ctrl-_**输入的，以及`^M`通过输入**ctrl-V ctrl-M输入的**

当我在 vi 中按**ctrl-_时，它会将我的当前行重新格式化为 72 个字符。**

# java - 更新sql表时文字不匹配格式字符串错误

> ID：10766034
> 
> 赞同：2
> 
> 时间：2012-05-26T12:02:36.947
> 
> 标签：java, sql, oracle

我正在尝试从 JTable 中检索数据，然后使用它来更新保存在数据库中的 sql 表。但是，java给了我这个错误，

```
ORA-01861: literal does not match format string 
```

我试图包含不同的字符串并且它有效，但对于这种情况，它没有。有人可以帮忙吗？这是我的代码，

```
for(int i=0; i<size; i++)
            {
                Object fname= searchResultTable.getModel().getValueAt(i,0);
                Object lname= searchResultTable.getModel().getValueAt(i,1);
                Object minit= searchResultTable.getModel().getValueAt(i,2);
                Object SSN  = searchResultTable.getModel().getValueAt(i,3);
                Object birthDate=searchResultTable.getModel().getValueAt(i,4);
                Object address = searchResultTable.getModel().getValueAt(i,5);
                Object sex = searchResultTable.getModel().getValueAt(i,6);
                Object salary = searchResultTable.getModel().getValueAt(i,7);
                Object superSSN = searchResultTable.getModel().getValueAt(i,8);
                Object dno = searchResultTable.getModel().getValueAt(i,9);

               // Statement S = conn.createStatement();
               // String query ="UPDATE EMPLOYEE SET fname='"+fname+"', lname='"+lname+"', minit='"+minit+"', ssn='"+SSN+"', bdate='"+birthDate+"', address='"+address+"', sex='"+sex+"', salary='"+salary+"', superssn='"+superSSN+"', dno='"+dno+"' WHERE ssn='"+ssn.get(i)+"' ";
               // query="UPDATE EMPLOYEE set fname='Ray',lname='King' where fname='Ray' and lname='King' ";

                 String query ="UPDATE EMPLOYEE SET fname=?, lname=?, minit=?, ssn=?, bdate=?, address=?, sex=?, salary=?, superssn=?, dno=? WHERE ssn=?";

                try{
                PreparedStatement S = conn.prepareStatement(query);
                S.clearParameters();
                S.setString(1,fname.toString());
                S.setString(2, lname.toString());
                S.setString(3, minit.toString());
                S.setString(4, SSN.toString());
                S.setString(5, birthDate.toString());
                S.setString(6,address.toString());
                S.setString(7, sex.toString());
                S.setString(8, salary.toString());
                S.setString(9, superSSN.toString());
                S.setString(10,dno.toString());
                S.setString(11, ssn.get(i));

                System.out.println(fname+", "+lname+","+salary);

                int count= S.executeUpdate();
                JOptionPane.showMessageDialog(this, "Employee Table Was Updated Successfully");
                }catch(SQLException sqle){System.out.println(sqle.getMessage());}

            }
        } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-26T12:07:41.057

这是因为您正在通过字符串设置日期列，而 Java 的默认日期字符串格式与 Oracle 所期望的不兼容。

改变

```
S.setString(5, birthDate.toString()); 
```

至

```
S.setDate(5, birthDate); 
```

来解决这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T13:07:54.310

@dasblinkenlight，您的方式无法编译。

这是一种将java格式转换为sql格式的方法，它肯定有效。

```
 public String dateToSQLFromat(String javaString)
    {

        String day="", month="", year="";

        int dash=0;
        for(int i=0; i<javaString.length(); i++)
        {

            if(javaString.charAt(i)=='-')
            {
                dash++;
                continue;
            }

            if(dash==0)
            {
            year= year+javaString.charAt(i);

            }
            else if(dash==1)
            month= month+javaString.charAt(i);
            else
            {

                if(javaString.charAt(i)==' ')
                    break;

               day= day+javaString.charAt(i);  
            }
        }

        int myMonth= Integer.parseInt(month);

        switch(myMonth)
        {
            case 1: month="JAN"; break;
            case 2: month="FEB";break;
            case 3: month="MAR"; break;
            case 4: month="APR"; break;
            case 5: month= "MAY"; break;
            case 6: month= "JUN"; break;
            case 7: month= "JUL"; break;
            case 8: month="AUG"; break;
            case 9: month="SEP"; break;
            case 10: month="OCT"; break;
            case 11: month="NOV"; break;
            case 12: month="DEC"; break;
            default: System.out.println("Invalid month!"); break;
        }

        return day+"-"+month+"-"+year;

        } 
```

# javascript - 从函数内部调用外部函数 - Javascript

> ID：10766037
> 
> 赞同：0
> 
> 时间：2012-05-26T12:02:45.607
> 
> 标签：javascript, jquery, jquery-mobile, cordova

我正在使用 Phonegap 和 JQueryMobile 创建一个 Web 应用程序。我是 javascript 新手，遇到了问题。

我的问题是调用我在名为“testscript.js”的文件中的函数，该函数称为 testFunc。testscript.js 仅包含以下内容：

```
function testFunc() {
    console.log("Yes I work");
} 
```

在我的 html 页面中，我有以下代码：

```
<script>
  $('#pageListener').live('pageinit', function(event) 
    {
     testFunc();
    });
</script> 
```

测试功能在我的“testscript.js”中找到，我将这一行包含在头标签中：

```
<script src="testscript.js"></script> 
```

我得到的错误是“未定义 testFunc”。

我假设它存在某种类型的范围问题，因为我可以调用其他 jquery 函数，例如：

```
alert("I work"); 
```

我可以通过将它们粘贴在其他地方的 html 中的脚本标签中来调用我的函数。

我已经尝试了各种方法来调用我的函数，但都没有成功，感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T12:08:22.610

只要在PhoneGap 触发事件`testscript.js`时已加载，并且该函数是全局的，就没有理由不工作。`pageinit``testFunc`

您没有向我们展示您的`testFunc`，但我的猜测是它不是全局的，而是您将它包含在类似的东西中，例如：

```
$('#pageListener').live('pageinit', function(event) 
{
    function testFunc()
    {
        // Do something here
    }
}); 
```

或者只是一个范围函数

```
(function() 
{
    function testFunc()
    {
        // Do something here
    }
})(); 
```

无论哪种方式，由于它是在另一个函数中声明的，因此它是该函数的本地函数，而不是全局函数。要从另一个脚本文件中调用它，您需要能够从全局命名空间中获取它（遗憾的是）。做到这一点的最好方法**不是**让它成为一个全球性的，而是只创建**一个**全球性的，你将把所有共享的东西放在上面，像这样：

```
(function() 
{
    if (!window.MyStuff)
    {
        window.MyStuff = {};
    }
    window.MyStuff.testFunc = testFunc;

    function testFunc()
    {
        // Do something here
    }
})(); 
```

...你这样称呼：

```
$('#pageListener').live('pageinit', function(event) 
{
    MyStuff.testFunc(); // Or: window.MyStuff.testFunc();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T12:23:47.390

您必须在 html 中的其他 jquery 代码之前包含 testscript.js。像这样：

```
<script src="testscript.js"></script>

<script>
   $('#pageListener').live('pageinit', function(event) 
   {
      testFunc();
   });
</script> 
```

# css - CSS 自定义字体垂直偏移（错误？）

> ID：10766047
> 
> 赞同：6
> 
> 时间：2012-05-26T12:04:10.540
> 
> 标签：css, cross-browser, font-face

我通过这种方法在我的 CSS 中使用自定义字体：

```
@font-face {
    font-family: 'Gabriola';
    src: url('Gabriola.eot');
    src: url('Gabriola.eot?#iefix') format('embedded-opentype'),
         url('Gabriola.woff') format('woff'),
         url('Gabriola.ttf') format('truetype');
    font-weight: normal;
    font-style: normal;
}
.gabriola {
  font-size: 20px;
  line-height: 20px;
  height: 20px;
  background: red;
}

<div class="gabriola">Some texty text here</div> 
```

每个浏览器都以自己的方式呈现这种字体，垂直偏移顶部和底部像这样 ![字体渲染](../Images/2b8d21b6f5f8cdb7f2fba2a7e6352137.png)

我究竟做错了什么？谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-26T13:24:06.407

您可能没有做错任何事情。这里有一些可能适用的要点，有些可以由您控制，有些则不能。

1.  可以肯定的是，明确设置`vertical-align: baseline`.
2.  不同的文件（`.eof`, `.woff`, `.ttf`）本身可能定义不一样，因此不同的浏览器使用不同的文件并显示差异。
3.  不确定是否有两个`src`电话会搞砸，但您可以尝试消除第二个电话：

```
@font-face {
    font-family: 'Gabriola';
    src: url('Gabriola.eot'),
         url('Gabriola.eot?#iefix') format('embedded-opentype'),
         url('Gabriola.woff') format('woff'),
         url('Gabriola.ttf') format('truetype');
    font-weight: normal;
    font-style: normal;
} 
```

这些都只是猜测。您将不得不测试#1、3。如果问题是#2，我不确定是否有一个优雅的解决方案。

当然，[这个网站](http://sixrevisions.com/css/font-face-guide/)上有一个警告：

> 请记住，**字体呈现在浏览器和操作系统之间可能会有很大差异**。许多开发人员在使用 Windows 和 Internet Explorer 时遇到了如此糟糕的结果，以至于他们完全避免使用自定义字体。始终确保在所有可以确定质量是否可以接受的浏览器上仔细检查结果。

**更新**

[这篇文章](http://www.fontsquirrel.com/forum/discussion/159/font-face-rendering-problems-generated-fonts-dont-look-correct/p1)提供了一些关于可能解决渲染问题的提示。这是给字体松鼠的，他特别指出：

> 如果您下载了该套件，您可以尝试使用生成器重新生成字体。我们对生成器进行定期调整，以改善字体的提示或渲染。

但他也证实，

> 不要推卸责任，但最常见的原因是原始字体不好。

这与我的第 2 点相符。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-03-31T16:01:50.503

我知道自从 OP 提出这个问题已经 5 年了，但我发现了这种让文本基线正确对齐的好方法。

基本上，文本容器必须是行高为 0 的内联块；然后，您创建一个 inline-block 伪元素并根据您想要的 line-height 设置它的高度：

```
span {
  font-size: 2em;
  background: red;
}
span.baseline-align {
  vertical-align: baseline;
}

span.true-baseline-align {
  display: inline-block;
  line-height: 0;
}
span.true-baseline-align::after {
  content: '';
  display: inline-block;
  height: 1em; // this is where you control line-height
}
```

```
<span>Normal text</span>
<br><br>
<span class="baseline-align">With vertical-align: baseline</span>
<br><br>
<span class="true-baseline-align">with trick to really baseline-align</span>
```

[http://blogs.adobe.com/webplatform/2014/08/13/one-weird-trick-to-baseline-align-text/](http://blogs.adobe.com/webplatform/2014/08/13/one-weird-trick-to-baseline-align-text/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-01T14:36:44.757

我遇到了同样的问题，解决方案是使用原始属性重建字体，而无需使用 Hight 逻辑字体创建器更改新文件中的任何内容，字体未更改且等于原始问题已更正并与完美对齐包括 ie6 在内的所有浏览器都需要几个小时的工作，但如果您需要一些用户，这是结果。

[http://www.filefactory.com/file/1miw29cddg21/n/crossbrowser_gabriola_font.zip](http://www.filefactory.com/file/1miw29cddg21/n/crossbrowser_gabriola_font.zip)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-12-05T10:55:44.487

如果有人有问题并且不想或无法重建字体，这就是解决方案： [https ://developer.mozilla.org/en-US/docs/Web/CSS/@font-face/ascent-override](https://developer.mozilla.org/en-US/docs/Web/CSS/@font-face/ascent-override)

导入字体时，此道具将调整垂直上升属性。

# c# - 根据文本文件中的字段访问变量，根据文本文件中的字段将值写入变量

> ID：10766050
> 
> 赞同：1
> 
> 时间：2012-05-26T12:04:35.837
> 
> 标签：c#

我有一个具有如下值的文件：

```
[Params]
Version=106
Monitor=0
SMode=10000000
Date=20120519 
```

在我的程序集中，我有与这些字段相对应的属性，如下所示：

```
public static string Version { get; set; }
public static string Monitor { get; set; }
public static string SMode { get; set; }
public static DateTime Date { get; set; } 
```

我正在像这样遍历文件（_params 是一个字符串列表，其中包含文件中 [Params] 部分的行）：

```
foreach (string s in _params)
{
    string[] values = s.Split('=');

} 
```

如何找到具有值 [0] 的变量并使用值 [1] 设置它？

编辑：

感谢 Attila，这最终成为了我的解决方案。我通过文件中的文本找到属性字段，并从文件中设置值。我还根据属性的数据类型设置了正确的类型。我必须对一些字符串进行一些转换，以使它们转换为 DateTime 数据类型：

```
foreach (string s in _params)
{
    string[] values = s.Split('=');

    object myObject = values[0];
    object myValue = values[1];

    if (myObject.ToString() == "Date")
        myValue = ConvertDateStringToDateTime(values[1]);
    if (myObject.ToString() == "StartTime")
        myValue = ConvertStartTimeStringToDateTime(values[1]);
    if (myObject.ToString() == "Length")
        myValue = ConvertLengthStringToTimeSpan(values[1]);

    var type = typeof(HrmParams);
    var field = type.GetProperty(myObject.ToString());

    myValue = Convert.ChangeType(myValue, field.PropertyType);

    field.SetValue(myObject, myValue, null);            
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T12:26:10.273

您需要使用反射（它允许您在运行时根据对象的名称访问对象的成员，即使这些名称在编译时未知），或者在文件中已知的有效值名称和委托之间创建映射访问（例如更新）适当的变量。

第一种方法（反射）更通用，但同时更难正确使用，因为当您在文件中的值名称和访问变量之间建立连接时，编译器/代码助手无法帮助您。

第二种方法不太容易出错（编译器可以为您标记错误），但会限制您仅处理您在映射中明确指定的值名称，这意味着如果有效值名称，您必须记住更新映射在文件更改中（例如，您添加一个新变量或更改其名称）

另一种选择，在某种程度上是上述两者的混合体，是将你的变量存储在一个映射中（假设它们都具有相同的类型（例如`string`））——这样你就可以从文件中检查值名称反对映射。缺点是在从代码中访问变量时，编译器将无法帮助您发现拼写错误（或名称更改）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T12:38:47.743

一个简单的 switch 语句可以工作：

```
foreach (string s in _params) {
  string[] values = s.Split('=');

  switch (values[0]) {
    case "Version":
      Version = values[1];
      break;
    case "Monitor":
      Monitor = values[1];
      break;
    case "SMode":
      SMode = values[1];
      break;
    case "Date":
      Date = values[1];
      break;
  }
} 
```

# c# - 将类型作为属性参数传递

> ID：10766052
> 
> 赞同：8
> 
> 时间：2012-05-26T12:04:45.650
> 
> 标签：c#, generics, attributes

我想要这样的课程：

```
[XmlRoot(ElementName = typeof(T).Name + "List")]
public class EntityListBase<T> where T : EntityBase, new()
{
    [XmlElement(typeof(T).Name)]
    public List<T> Items { get; set; }
} 
```

但 typeof(T) 不能是属性参数。

我能做什么呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-26T12:36:13.763

您可以使用`XmlAttributeOverrides`- 但是 - 小心缓存和重用序列化程序实例：

```
static void Main()
{
    var ser = SerializerCache<Foo>.Instance;
    var list = new EntityListBase<Foo> {
        Items = new List<Foo> {
            new Foo { Bar = "abc" }
    } };
    ser.Serialize(Console.Out, list);
}
static class SerializerCache<T> where T : EntityBase, new()
{
    public static XmlSerializer Instance;
    static SerializerCache()
    {
        var xao = new XmlAttributeOverrides();
        xao.Add(typeof(EntityListBase<T>), new XmlAttributes
        {
            XmlRoot = new XmlRootAttribute(typeof(T).Name + "List")
        });
        xao.Add(typeof(EntityListBase<T>), "Items", new XmlAttributes
        {
            XmlElements = { new XmlElementAttribute(typeof(T).Name) }
        });
        Instance = new XmlSerializer(typeof(EntityListBase<T>), xao);
    }
} 
```

（如果你不缓存和重用序列化器实例，它会泄漏程序集）

# ruby - 如何在 minitest 输出中显示 sinatra 错误和其他变量

> ID：10766055
> 
> 赞同：0
> 
> 时间：2012-05-26T12:04:57.647
> 
> 标签：ruby, unit-testing, sinatra, minitest

我正在使用 minitest 测试和编码一个 sinatra 应用程序。目前，我使用 last_response.status 通过以下方式查看请求发生了什么：

```
assert last_response.ok?, "Status 200 expected but was #{last_response.status}." 
```

显示错误，如“预期状态 200 但为 500”。但我想在 Rack ENV 中显示 sinatra.error，例如：

```
sinatra.error #<ArgumentError: wrong number of arguments (1 for 2)> 
```

这样我就不必启动应用程序并在浏览器上检查它。我试过这段代码：

```
assert last_response.ok?, "#{last_response.error}." 
```

但它抛出了一个“要求#的私有方法'错误'”错误。

**如何在 sinatra 错误输出中显示变量的值？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-26T19:28:25.113

您可以使用`puts last_response.errors`显示最后响应的机架错误消息。

# vim - 如何在插入模式下滚动？

> ID：10766058
> 
> 赞同：2
> 
> 时间：2012-05-26T12:05:09.423
> 
> 标签：vim

是否有在插入模式下滚动的默认键？我知道我可以

```
:imap <F5> <ESC><C-e>a
:imap <F6> <ESC><C-y>a 
```

但我想知道默认情况下是否有任何键绑定。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-27T19:40:55.637

为了完整起见，有两个用于在插入模式下滚动的专用命令，`CTRL``X``CTRL``E`以及`CTRL``X``CTRL``Y`. 它们可能是适合映射的对象。

请参阅此处的文档：`:h i_CTRL-X_CTRL-E`.

在正常模式下`CTRL``E`做`CTRL``Y`同样的事情，我经常使用它们。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-26T12:10:18.397

在`insert mode`中，键入`Ctrl`- `o`，然后键入`zz`。
它将在屏幕中间设置当前行。

实际上，您可以键入任何命令。

# jquery - jQuery无法从服务器加载xml

> ID：10766059
> 
> 赞同：0
> 
> 时间：2012-05-26T12:05:14.187
> 
> 标签：jquery, xmlhttprequest

我正在尝试根据当地条件加载国家气象服务 xml 文档。我似乎无法从他们的服务器成功加载文件，但如果我将文件保存在本地，它就可以工作。

```
 $.ajax({
        type: 'GET', 
        url: 'http://www.weather.gov/xml/current_obs/KROC.xml', 
        datatype: 'xml' })
            .done(function(data) { alert("Server: success"); })
            .fail(function(jqXHR, textStatus, errorThrown) { alert("Server: error:"+jqXHR.statusText+' textStatus='+textStatus+', errorThrown='+errorThrown ); })
            .always(function() { alert("Server: complete"); }); 
```

那是一个错误警报：

> 服务器：error:error textStatus=error, errorThrown=

但是，如果我像这样在本地保存文件：

```
 $.ajax({
        type: 'GET', 
        url: 'xml/KROC.xml', 
        datatype: 'xml' })
            .done(function(data) { alert("Client: success"); })
            .fail(function(jqXHR, textStatus, errorThrown) { alert("Client: error:"+jqXHR.statusText+' textStatus='+textStatus+', errorThrown='+errorThrown ); })
            .always(function() { alert("Client: complete"); }); 
```

然后加载成功。这让我疯狂。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T19:29:15.873

这种方法必须首先解决 Ajax 程序使用的 XMLHttpRequest 对象的一个​​基本限制：同域问题。

出于安全原因，XMLHttpRequest 调用只能向传递原始网页的同一服务器发起请求。除非我为国家气象局工作，否则我的服务器在他们的域之外 (www.nws.noaa.gov)。

[http://www.ibm.com/developerworks/xml/library/x-xmlajaxpt1/index.html](http://www.ibm.com/developerworks/xml/library/x-xmlajaxpt1/index.html)

# c# - C# 使用 Windows 应用程序将用户名/密码发布到登录页面

> ID：10766060
> 
> 赞同：0
> 
> 时间：2012-05-26T12:05:17.443
> 
> 标签：c#, asp.net, login, http-post

我有带有 2 个文本框和 1 个按钮的登录页面

```
<input name="txtUserName" type="text" value="666" id="txtUserName" class="textbox"> 
```

和

```
<input name="txtPassword" type="password" id="txtPassword" class="textbox"> 
```

和按钮是这样的

```
<input type="submit" name="LoginButton" value="Login To WebSite" onclick="javascript:WebForm_DoPostBackWithOptions(new WebForm_PostBackOptions(&quot;LoginButton&quot;, &quot;&quot;, true, &quot;Login1&quot;, &quot;&quot;, false, false))" id="LoginButton" class="button" style="font-family:tahoma;font-size:10px;"> 
```

> 我没有网页的源代码，我只想发送我的用户名和密码并接收到“登录正常或登录失败”

当用户输入用户名和密码并单击“登录到网站”按钮时，如果用户/通过正确的用户登录到 显示用户面板的页面[http://example.com/Default.aspx](http://example.com/Default.aspx)
，如果登录失败系统再次显示 login.aspx 现在我设计了具有 2 个文本框和一个按钮的 Windows 应用程序，
当我单击按钮 textbox1 和 textbox2 文本作为登录信息发送到网站时，如果此数据正确，则显示登录成功的消息，否则显示错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T12:36:35.933

当您在 ASP.Net 中按下“登录到网站”按钮时，它会调用 javascript WebForm_DoPostBackWithOptions 函数。

根据[此 MSDN 杂志的文章](http://msdn.microsoft.com/en-us/magazine/cc163736.aspx)，此函数对所选页面执行 POST 操作。

要在 Windows 应用程序中执行此操作，您可以使用[WebClient 类](http://msdn.microsoft.com/en-us/library/system.net.webclient.aspx)（请参阅 MSDN 页面底部的示例代码）或[HttpWebRequest](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.aspx)和[HttpWebResponse](http://msdn.microsoft.com/en-us/library/system.net.httpwebresponse.aspx)的组合。

如何使用 HttpWebRequest 和 HttpWebResponse[在此 codeproject 文章中进行了描述](http://www.codeproject.com/Articles/6554/How-to-use-HttpWebRequest-and-HttpWebResponse-in-N)。

[请注意，我的答案基于这个其他 SO answer](https://stackoverflow.com/questions/4302173/http-post-from-windows-forms-application-c-sharp)。

# matlab - MATLAB中的向量和矩阵有什么区别？

> ID：10766068
> 
> 赞同：4
> 
> 时间：2012-05-26T12:06:12.933
> 
> 标签：matlab, vector, matrix

我在帮助文件中看到了以下语句：

```
xL = [-6 -6];
xU = [6 6]; 
```

我不明白`xL`和`xU`是向量还是矩阵。谢谢你。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-26T12:07:52.467

在 MATLAB 术语中，*向量*和*矩阵*都是数值数组。

从技术上讲，向量是一种具有一行或一列的矩阵形式（请阅读[`isvector`](http://www.mathworks.com/help/matlab/ref/isvector.html)和[`ismatrix`](http://www.mathworks.com/help/matlab/ref/ismatrix.html)命令以获取更多信息）。

然而，实际上，矩阵通常在文档中被称为*至少有*2 列和 2 行，所以我宁愿调用`xL`和`xU` *vector*。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-26T12:34:43.940

向量是一维矩阵，可以是垂直向量 (N × 1) 或水平向量 (1 × N)。向量是矩阵的子类，所以每个向量都是一个矩阵。`xL`和`xU`是水平 (1 × N) 向量，因此它们也是矩阵。

# c# - 如何使用 LINQ 对序列中的相同值进行分组？

> ID：10766072
> 
> 赞同：4
> 
> 时间：2012-05-26T12:07:01.890
> 
> 标签：c#, .net, linq

我有一个序列。例如：

```
new [] { 10, 1, 1, 5, 25, 45, 45, 45, 40, 100, 1, 1, 2, 2, 3 } 
```

现在我必须在不改变整体顺序的情况下删除重复的值。对于上面的序列：

```
new [] { 10, 1, 5, 25, 45, 40, 100, 1, 2, 3 } 
```

如何用 LINQ 做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T14:00:00.370

```
var list = new List<int> { 10, 1, 1, 5, 25, 45, 45, 45, 40, 100, 1, 1, 2, 2, 3 };

var result = list.Where((item, index) => index == 0 || list[index - 1] != item); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-26T14:00:11.730

```
var list = new List<int> { 10, 1, 1, 5, 25, 45, 45, 45, 40, 100, 1, 1, 2, 2, 3 };
        List<int> result = list.Where((x, index) =>
        {
            return index == 0 || x != list.ElementAt(index - 1) ? true : false;
        }).ToList(); 
```

这将返回您想要的。希望它有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-26T12:09:49.360

~~你试过了[`Distinct`](http://msdn.microsoft.com/en-us/library/bb348436.aspx)吗？~~

 ~~```
var list = new [] { 10, 20, 20, 5, 25, 45, 45, 45, 40, 100, 1, 1, 2, 2, 3 };
list = list.Distinct(); 
```~~  ~~**编辑**：由于您显然只想*在连续时*对具有相同值的项目进行分组，因此您可以使用以下内容：

```
var list = new[] { 10, 1, 1, 5, 25, 45, 45, 45, 40, 100, 1, 1, 2, 2, 3 };

List<int> result = new List<int>();
foreach (int item in list)
    if (result.Any() == false || result.Last() != item)
        result.Add(item); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-26T12:10:29.830

您可以使用包含并保留顺序

```
List<int> newList = new List<int>();

foreach (int n in numbers)
    if (newList.Count == 0 || newList.Last() != n)
       newList.Add(n);
var newArray = newList.ToArray(); 
```

输出：

> 10, 1, 5, 25, 45, 40, 100, 1, 2, 3

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-26T12:15:34.633

使用 LINQ 解决这个问题在技术上可能是可行的（尽管我认为你不能使用单行），但我认为自己编写它更优雅。

```
public static class ExtensionMethods
{
    public static IEnumerable<T> PackGroups<T>(this IEnumerable<T> e)
    {
        T lastItem = default(T);
        bool first = true;
        foreach(T item in e)
        {
            if (!first && EqualityComparer<T>.Default.Equals(item, lastItem))
                continue;
            first = false;
            yield return item;
            lastItem = item;
        }
    }
} 
```

你可以像这样使用它：

```
int[] packed = myArray.PackGroups().ToArray(); 
```

从问题中不清楚在`1,1,2,3,3,1`. 大多数给出的答案都返回`1,2,3`，而我的返回`1,2,3,1`。~~

# ruby-on-rails - 如何在activeadmin中使用自关节？

> ID：10766079
> 
> 赞同：0
> 
> 时间：2012-05-26T12:08:13.047
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activeadmin

我有以下类别模型：

```
class Category < ActiveRecord::Base
  belongs_to :parent, :class_name => "Category", :foreign_key => "parent_id"
  has_many :categories, :class_name => "Category", :foreign_key => "parent_id"
end 
```

我希望能够按父类别过滤并在添加/编辑类别中选择父类别

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T22:51:30.243

问题出在“名称”列上，因为 ActiveAdmin 正在寻找“名称”列，但在我的情况下，我没有此列。因此，我将模型更新为具有“名称”方法。然后它工作正常

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T14:11:58.647

嗯，不确定您到底需要什么，但如果您有父类别 ID，那么您可以通过执行以下操作进行过滤：

```
Category.where(:parent_id => parent_category_id) 
```

# python - 为什么 NumPy 和 SciPy 有很多相同的功能？我应该更喜欢哪个？

> ID：10766082
> 
> 赞同：6
> 
> 时间：2012-05-26T12:08:41.437
> 
> 标签：python, numpy, scipy

> **可能重复：**
> [scipy 和 numpy 之间的关系](https://stackoverflow.com/questions/6200910/relationship-between-scipy-and-numpy)

例如，NumPy 有[窗口函数](http://docs.scipy.org/doc/numpy/reference/routines.window.html) `bartlett`, `blackman`, `hamming`, `hanning`, `kaiser`，而 SciPy 有[这些以及更多](http://docs.scipy.org/doc/scipy/reference/signal.html#window-functions)，但它们似乎产生相同的输出。

NumPy 有`numpy.fft.fft2(a, s=None, axes=(-2, -1))`.

SciPy 有`scipy.fftpack.fft2(x, shape=None, axes=(-2, -1), overwrite_x=0)`.

为什么会有重复？只是为了向后兼容？如果是这样，为什么它们在不同的地方有不同的定义？写新东西时我应该更喜欢哪个？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-26T15:46:26.707

从[SciPy 常见问题解答](http://www.scipy.org/scipylib/faq.html#what-is-the-difference-between-numpy-and-scipy)：

> 在理想的世界中，NumPy 将只包含数组数据类型和最基本的操作：索引、排序、重塑、基本元素函数等。所有数字代码都将驻留在 SciPy 中。然而，NumPy 的重要目标之一是兼容性，因此 NumPy 试图保留其前任所支持的所有功能。因此，NumPy 包含一些线性代数函数，尽管这些更恰当地属于 SciPy。无论如何，SciPy 包含功能更全面的线性代数模块版本，以及许多其他数值算法。如果您使用 python 进行科学计算，您可能应该同时安装 NumPy 和 SciPy。大多数新 > 功能属于 SciPy 而不是 NumPy。

所以是的，重复是为了向后兼容。一般来说，它们给出相同的结果。但是，正如常见问题解答所述，新功能通常在 SciPy 中实现，但不一定是 NumPy。这包括错误修复。例如，我发现 numpy.linalg.eig 为复杂矩阵返回了不正确的特征值，而 scipy.linalg.eig 返回了正确的特征值。

一般来说，我更喜欢坚持常见问题解答中的“理想世界”场景：我使用 NumPy 进行基本的数组操作，使用 SciPy 处理我的所有线性代数。这样我就不会遇到任何意外。

# asp.net - IIS 7 URL 重写模块

> ID：10766085
> 
> 赞同：1
> 
> 时间：2012-05-26T12:09:03.967
> 
> 标签：asp.net, iis, iis-7, asp-classic, url-rewriting

我可以看到出站 URL 重写工作，因为它用新 URL 替换了页面上的所有 URL。所以无论我把这个放在哪里：

`/post.asp?topic=question&id=123`

它将其重写为...

`/question/123`

但是，当我访问重写的 URL 时，`/question/123`我收到 404 错误。看起来重写部分可以工作，但是一旦你转到重写的 URL，加载 URL 怎么样？

我在 IIS > URL 重写中使用了“创建友好 URL”向导并检查了出站和重定向规则。就像这个例子解释的那样：[http ://learn.iis.net/page.aspx/497/user-friendly -url---规则模板/](http://learn.iis.net/page.aspx/497/user-friendly-url---rule-template/)

这是 Web.Config：

```
<?xml version="1.0" encoding="UTF-8"?>
<configuration>
    <system.webServer>
        <rewrite>
            <rules>
                <remove name="RewriteUserFriendlyURL1" />
                <remove name="RedirectUserFriendlyURL1" />
                <rule name="RedirectUserFriendlyURL1" stopProcessing="true">
                    <match url="^post\.asp$" />
                    <conditions>
                        <add input="{REQUEST_METHOD}" pattern="^POST$" negate="true" />
                        <add input="{QUERY_STRING}" pattern="^topic=([^=&amp;]+)&amp;id=([^=&amp;]+)$" />
                    </conditions>
                    <action type="Redirect" url="{C:1}/{C:2}" appendQueryString="true" redirectType="Permanent" />
                </rule>
                <rule name="RewriteUserFriendlyURL1" stopProcessing="true">
                    <match url="^([^/]+)/([^/]+)/?$" />
                    <conditions>
                        <add input="{REQUEST_FILENAME}" matchType="IsFile" negate="true"  />
                        <add input="{REQUEST_FILENAME}" matchType="IsDirectory" negate="true" />
                    </conditions>
                    <action type="Rewrite" url="/post.asp?topic={R:1}&amp;id={R:2}" />
                </rule>
            </rules>
            <outboundRules>
                <remove name="OutboundRewriteUserFriendlyURL1" />
                <rule name="OutboundRewriteUserFriendlyURL1" preCondition="ResponseIsHtml1">
                    <match filterByTags="A, Form, Img" pattern="^(.*/)/post\.asp\?topic=([^=&amp;]+)&amp;(?:amp;)?id=([^=&amp;]+)&amp;(?:amp;)$" />
                    <action type="Rewrite" value="{R:1}{R:2}/{R:3}/" />
                </rule>
            </outboundRules>
        </rewrite>
    </system.webServer>
</configuration> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T15:14:57.640

您是否修改了模式？我使用向导创建了具有相同步骤的规则。但是我的配置文件与你的不同，它运行顺利。比较模式，尤其是**OutboundRewriteUserFriendlyURL1**。

```
<?xml version="1.0" encoding="UTF-8"?>
<configuration>
    <system.webServer>
        <rewrite>
            <rules>
                <rule name="RedirectUserFriendlyURL1" stopProcessing="true">
                    <match url="^post\.asp$" />
                    <conditions>
                        <add input="{REQUEST_METHOD}" pattern="^POST$" negate="true" />
                        <add input="{QUERY_STRING}" pattern="^topic=([^=&amp;]+)&amp;id=([^=&amp;]+)$" />
                    </conditions>
                    <action type="Redirect" url="{C:1}/{C:2}" appendQueryString="false" />
                </rule>
                <rule name="RewriteUserFriendlyURL1" stopProcessing="true">
                    <match url="^([^/]+)/([^/]+)/?$" />
                    <conditions>
                        <add input="{REQUEST_FILENAME}" matchType="IsFile" negate="true" />
                        <add input="{REQUEST_FILENAME}" matchType="IsDirectory" negate="true" />
                    </conditions>
                    <action type="Rewrite" url="post.asp?topic={R:1}&amp;id={R:2}" />
                </rule>
            </rules>
            <outboundRules>
                <rule name="OutboundRewriteUserFriendlyURL1" preCondition="ResponseIsHtml1">
                    <match filterByTags="A, Form, Img" pattern="^(.*/)post\.asp\?topic=([^=&amp;]+)&amp;(?:amp;)?id=([^=&amp;]+)$" />
                    <action type="Rewrite" value="{R:1}{R:2}/{R:3}/" />
                </rule>
                <preConditions>
                    <preCondition name="ResponseIsHtml1">
                        <add input="{RESPONSE_CONTENT_TYPE}" pattern="^text/html" />
                    </preCondition>
                </preConditions>
            </outboundRules>
        </rewrite>
    </system.webServer>
</configuration> 
```

# dropwizard - Dropwizard 在启动时给出验证错误

> ID：10766087
> 
> 赞同：0
> 
> 时间：2012-05-26T12:09:33.790
> 
> 标签：dropwizard

我在使用 Dropwizard 启动时遇到以下异常

```
Exception in thread "main" javax.validation.ValidationException: Call to TraversableResolver.isReachable() threw an exception
    at org.hibernate.validator.engine.ValidatorImpl.isValidationRequired(ValidatorImpl.java:1251)
    at org.hibernate.validator.engine.ValidatorImpl.validateConstraint(ValidatorImpl.java:448)
    at org.hibernate.validator.engine.ValidatorImpl.validateConstraintsForDefaultGroup(ValidatorImpl.java:397)
    at org.hibernate.validator.engine.ValidatorImpl.validateConstraintsForCurrentGroup(ValidatorImpl.java:361)
    at org.hibernate.validator.engine.ValidatorImpl.validateInContext(ValidatorImpl.java:313)
    at org.hibernate.validator.engine.ValidatorImpl.validate(ValidatorImpl.java:139)
    at com.yammer.dropwizard.validation.Validator.validate(Validator.java:32)
    at com.yammer.dropwizard.config.ConfigurationFactory.validate(ConfigurationFactory.java:88)
    at com.yammer.dropwizard.config.ConfigurationFactory.build(ConfigurationFactory.java:53)
    at com.yammer.dropwizard.cli.ConfiguredCommand.run(ConfiguredCommand.java:69)
    at com.yammer.dropwizard.cli.Command.run(Command.java:113)
    at com.yammer.dropwizard.AbstractService.run(AbstractService.java:178) 
```

我将 Dropwizard 与 Hibernate 一起用于 JPA 而不是 JDBI，因为我有复杂的持久性要求。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T12:09:34.133

答案与我自己的木偶戏有关。我在 pom.xml 中引入了旧版本的 Hibernate Entity Manager 作为我其他依赖项的一部分。

对于 Dropwizard 0.4.0，您需要强制使用 Hibernate Entity Manager 3.6.0.Final。希望这对其他人有帮助。

```
<dependency>
  <groupId>org.hibernate</groupId>
  <artifactId>hibernate-entitymanager</artifactId>
  <version>3.6.0.Final</version>
</dependency> 
```

# javascript - 增加unix时间

> ID：10766089
> 
> 赞同：2
> 
> 时间：2012-05-26T12:09:34.133
> 
> 标签：javascript, unix-timestamp

我有一个 unix 时间，例如： var later= 135000;

当我稍后取变量时 -= 1000 我能够得到 134000。

但是当我稍后取变量 += 1000 时，我得到 1350001000。

我怎样才能增加我的unix时间？

```
<script type="text/javascript"> 
   var later = "<?php echo $unix_time; ?>";
   var stop= setInterval('countdown()',1000);

   function countdown(plus_ten) {
        var now = new Date();

        var now_time= now.getTime()/1000;
        now_time= Math.floor(now_time);

        if(plus_ten){
            later = later + 1000;
            alert(later);
        }

        var sec = later- now_time;
        if(sec<=0){
            clearInterval(stop);
            alert('hello');
        }

        sec= Math.floor(sec);
        var min = Math.floor(sec / 60);
        var hour = Math.floor(min / 60);

        hour %= 24;
        min %= 60;
        sec %= 60;

        document.getElementById("hoursBox").innerHTML = hour;
        document.getElementById("minsBox").innerHTML = min;
        document.getElementById("secsBox").innerHTML = sec;       
    }
</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T12:22:53.193

请记住，JavaScript 是一种松散类型的语言。您的变量是作为整数还是字符串处理取决于您使用它的上下文。

（`-`减）运算符显然是算术的，所以 JS 知道减法。但是`+`操作符也是用来连接字符串的，所以如果你想让JS做加法，你可能需要更明确一些。您已将 的内容`later`放在双引号内，这向 JS 暗示您希望将其视为字符串。所以：

```
var later = parseInt("<?php echo $unix_time; ?>"); 
```

或者

```
later = later - 0 + 1000;  /* hints at arithmetic, then adds 1000 */ 
```

行情是一件好事，以防万一`$unix_time`包含意想不到的东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-26T12:20:41.773

当您执行以下操作时，您的变量“稍后”会被分配一个字符串值：

```
var later = "<?php echo $unix_time; ?>"; 
```

你应该这样做：

```
var later = <?php echo $unix_time; ?>; // i.e. no quotes around the time stamp 
```

那应该解决它。

# java - 在移动应用程序中离线使用地图 API？

> ID：10766093
> 
> 赞同：0
> 
> 时间：2012-05-26T12:10:07.817
> 
> 标签：java, java-me, map, bing-maps

我想在java中有一个应用程序，用于移动设备..我必须离线构建应用程序，并且应用程序必须显示用户位置..所以我想在离线地图上显示用户位置，我已经保存在应用程序包中，我不关心内存空间，只需使用离线地图来显示用户的当前位置，最适用的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-17T14:24:57.877

除了 Windows Phone 8/8.1 地图控件外，必应地图不允许离线使用地图控件。

# android - 使用来自数据库（Sqlite）的自定义简单光标适配器的列表视图“未处理的事件循环异常”

> ID：10766099
> 
> 赞同：2
> 
> 时间：2012-05-26T12:10:30.700
> 
> 标签：android, listview, simplecursoradapter, sqlite

我为 Listview 尝试了一个自定义简单光标适配器。我从数据库中获取数据并尝试显示我的列表视图但我遇到了一些异常。如果你帮助我，我会很高兴谢谢。这是代码：

```
public class cursorDeneme extends ListActivity{
Cursor c ;
String sutunlar[]  = new String[]{"name"};
int to[] = new int[]{R.id.name_entry};
@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.cursorden);
DB_E db = new DB_E(this);// database class

try {
    db.openReadable();

    c=db.veriAlCursor();// gets Cursor from database

    mySimpleCursorAdapter adapter = new mySimpleCursorAdapter(this, R.layout.cursorden, c, sutunlar, to);

    db.close();
    this.setListAdapter(adapter);

} catch (IOException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
}} 
```

这是数据库类：

```
 public class DB_E {
    public static final String KEY_ROWID ="id";
public static final String KEY_WORK_OUT ="workout"; //Hangi workout
public static final String KEY_NAME ="name";
public static final String KEY_REP ="rep";
public static final String KEY_WEIGHT ="weight";
    public Cursor veriAlCursor(){ //get datas

    Cursor c = ourDataBase.query(DATABASE_TABLE, sutunlar, null, null, null, null, null);

    return c;
}
public Cursor veriAlCursor(String workout){ //get datas

workout ="'%"+workout+"%'";
    Cursor c = ourDataBase.query(DATABASE_TABLE, sutunlar, KEY_WORK_OUT+" LIKE "+workout, null, null, null, null);

    return c;
} 
```

和 mySimpleCustomAdapter：

```
public class mySimpleCursorAdapter extends SimpleCursorAdapter {
Cursor c;
Context context;
Activity activity;
cursorDeneme cursorD ;
public mySimpleCursorAdapter(Context context, int layout, Cursor c,
        String[] from, int[] to) {
    super(context, layout, c, from, to);

    this.c=c;
    this.activity=(Activity)context;
    this.context=context;
    this.cursorD =(cursorDeneme)context;
}

@Override
public View getView(int position , View convertView , ViewGroup parent){

    if(convertView == null)
    convertView.inflate(context, R.layout.liste, null);

    View row=convertView;

    c.moveToPosition(position);
    int iName =c.getColumnIndex("name");
    TextView name =(TextView)convertView.findViewById(R.id.name_entry);
    name.setText(c.getString(iName));
    return (row);
} 
```

和 XML ：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
 android:layout_width="fill_parent"
 android:layout_height="fill_parent"
 android:orientation="vertical"
android:background="#848484" >
<LinearLayout 
    android:id="@+id/linear1"
    android:layout_width="240dp"
    android:layout_height="350dp"
    android:background="#CEF6E3"
    android:layout_marginLeft="40dp"
    android:layout_marginTop="20dp"
      android:layout_marginRight="20dp"
      android:layout_marginBottom="20dp"
    >
    <ListView 
        android:id="@+id/listView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:background="#151515"
        android:layout_marginLeft="5dp"
        android:layout_marginRight="5dp"
        android:layout_marginTop="5dp"
        android:layout_marginBottom="5dp"
        ></ListView>
      </LinearLayout>
 </LinearLayout> 
```

错误日志：未处理的事件循环异常无效的首选项页面路径：XML 语法...谢谢。

# performance - GraphViz Dot 生成时间很长

> ID：10766100
> 
> 赞同：10
> 
> 时间：2012-05-26T12:10:31.497
> 
> 标签：performance, tree, graphviz, dot, duration

我有一个希望由 Dot 生成的树结构。每个节点有 4 条边到另外 4 个节点。总共有大约 1,000 个节点。如果我尝试使用 Dot 生成它，它需要很长时间（一旦我让它工作了一个小时 - CPU 使用率一直是 100%，但它没有完成）。有没有办法加速这个？也许通过设置质量？或者使用另一个（更快？）可视化软件？我已附上我的 Dot 文件供您在自己的机器上进行测试。

谢谢你。点文件： http: [//lh.rs/3fmsfjmbvRw2](http://lh.rs/3fmsfjmbvRw2)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-16T14:55:08.040

您可能想尝试设置 nslimit 或 nslimit1 属性，如下所述：

*   [https://web.archive.org/web/20170421065851/http://www.graphviz.org:80/content/dot-performance-issues](https://web.archive.org/web/20170421065851/http://www.graphviz.org:80/content/dot-performance-issues)
*   [https://graphviz.org/doc/info/attrs.html#d:nslimit](https://graphviz.org/doc/info/attrs.html#d:nslimit)（或原文： [https ://web.archive.org/web/20170421065851/http://www.graphviz.org:80/内容/属性#dnslimit](https://web.archive.org/web/20170421065851/http://www.graphviz.org:80/content/attrs#dnslimit) )

你也可以调整`maxiter`,`mclimit`和`splines`属性，特别是`splines=line`给了我一个巨大的加速（虽然有点难看）。

此外，正如 E-man 所建议的，dot 确实比 circo 或 twopi 慢，因此如果它们看起来适合您的图表，您可以考虑使用其中之一。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-09-30T08:19:05.377

chk这个链接，[用graphviz布置一个大图](https://stackoverflow.com/questions/13417411/laying-out-a-large-graph-with-graphviz)

> sfdp -x -Goverlap=scale -Tpng data.dot > data.png

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-03-26T17:42:17.947

将大型 .dot 文件导入 Gephi - [https://gephi.org](https://gephi.org)非常快。

# web-services - 我的 iframe 内容如何继承托管域 CSS？

> ID：10766104
> 
> 赞同：3
> 
> 时间：2012-05-26T12:10:49.233
> 
> 标签：web-services, iframe

情况如下：

1.  我有一个返回表单的网络服务。

2.  然后，许多其他站点在 iFrame 元素中使用此表单。

3.  我需要表单来“佩戴”托管站点的背景、颜色或换句话说 CSS（但如果这更容易，我会选择背景和徽标）。

我的网络服务和其他网站不在同一个域上。我可以完全控制我的网络服务，并且可以定义所有站点的一般要求。

处理这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T12:33:21.443

有几种方法可以做到这一点：

## **1 - 将样式表作为参数传入 iframe**：

传入 CSS 样式表作为 iframe 的 src 属性中的查询参数。这可能是最简单的方法，它使该样式表的所有者可以更好地控制表单在该人的站点上的外观。

```
<body>

<!-- This is the client's website -->

<!-- This is your form -->
<iframe src="http://example.com/form/abc/?css=http://example.com/file/formStyle.css" /> 
```

## **2 - 将颜色和徽标传入 iframe：**

这与第一个示例中的基本思想相同，只​​是您没有引用外部样式表：

```
<iframe 
   src="http://example.com/form/abc/?color=#AAAAAA&logo=http://example.com/logo.png" /> 
```

## **3 - 使用 PostMessage**：

另一种选择是使用 postMessage API。使用 postMessage，您可以跨域将消息从一个上下文传递到另一个上下文。因此，客户端页面可以将背景颜色传递给 iframe 页面，这也可以重用于传递其他类型的信息和数据。

**框架代码：**

```
// register to listen for postMessage events
window.addEventListener("message", changeBackground, false);  

// this is the callback handler to process the event
function changeBackground(event)  
{  

  // make sure the code you put on the client's site is secure. You are responsible
   // for making sure only YOU have cross domain access to his/her site.
    // NOTE: example.org:8080 is the client's site
  if (event.origin !== "http://example.org:8080")  
    return;  

  // event.data could contain "#AAAAAA" for instance
  document.body.style.backgroundColor = event.data;
    // do other stuff
  }
} 
```

**顶级客户页面：**

```
// pass the string "#AAAAAA" to the iframe page, where the changeBackground
  // function will change the color
   // targetOrigin is the URL of the client's site
document.getElementById("theIframe").contentWindow.postMessage("#AAAAAA", targetOrigin); 
```

此解决方案仅适用于现代浏览器，包括 IE8、FF3.6+、Chrome 13+、Safari 5+ 等。有关[HTML5 postMessage](https://developer.mozilla.org/en/DOM/window.postMessage)的更多信息，请参阅 Mozilla 开发者中心。

## **如何从查询字符串中提取 CSS 参数？**

在 iframe 页面中使用[gup 函数](http://canlu.blogspot.com/2009/09/get-url-querystring-parameters-using.html)获取 CSS 参数的值：

```
function gup(name) {
 name = name.replace(/[\[]/, "\\\[").replace(/[\]]/, "\\\]");
 var regexS = "[\\?&]" + name + "=([^&#]*)";
 var regex = new RegExp(regexS);
 var results = regex.exec(window.location.href);
 if (results == null)
  return "";
 else
  return results[1];
} 
```

之后，您可以使用它来创建链接 CSS 标记：

```
// get url parameter from iframe src:
var cssPath = gup("cssPath");  

// create link and append to head
var linkElem = document.createElement("link");
linkElem.setAttribute("href", cssPath);
linkElem.setAttribute("rel","stylesheet");
document.getElementsByTagName("head")[0].appendChild(link); 
```

或者

```
var color = gup("color");

document.body.setAttribute("style","background-color:" + color); 
```

# jquery - JQuery 进度条 - 添加文本并更改背景颜色

> ID：10766109
> 
> 赞同：4
> 
> 时间：2012-05-26T12:12:11.527
> 
> 标签：jquery, css, jquery-ui

我正在考虑使用 Jquery 进度条来显示用户在课程中取得的进度。

*   在进度条内，我想显示文本 Course Progress 70%
*   我想更改进度条的默认灰色

这是我到目前为止所做的 - 这让我可以在进度条的中心添加文本：

```
$（函数（）{
    $( "#progressbar" ).progressbar({
        价值：70
    });
);

<div 样式="宽度:600px;" id="进度条">
    <div style="float:left;color:black;text-align:center;width:100%;padding-top:3px;">课程进度
</div>

```

但我不知道如何改变颜色。它不必动态更改 - 只需一种非灰色的颜色 :)

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-26T12:24:02.663

假设您使用的是 jQueryUI，进度条的背景由 CSS 属性控制——它是一个实心图像。

style 属性是`.ui-widget-header`，因此您需要为此更改背景图像。如果您想要精美的背景图像，请在文档的头部（或者如果您无法访问头部，则正文会这样做）放置以下内容：

```
<style type='text/css'>
    .ui-widget-header {
        background-image: url('link-to-a-new-gradient-bar-here.png') !important;
    }
</style> 
```

或者，对于简单的单色背景：

```
<style type='text/css'>
    .ui-widget-header {
        background-image: none !important;
        background-color: #FF0000 !important; //Any colour can go here
    }
</style> 
```

这`!important`是确保新样式覆盖现有 CSS 所必需的。

此外，您的进度条 HTML 上缺少结束标记。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-26T12:35:44.843

Hiya**工作演示**很简单，可以满足您的需要 :) [http://jsfiddle.net/Y9c3R/1/](http://jsfiddle.net/Y9c3R/1/)

**在这里阅读**：http : [//docs.jquery.com/UI/Progressbar](http://docs.jquery.com/UI/Progressbar)

非常详细的驻留在此处：http: [//jsfiddle.net/ZQrnC/](http://jsfiddle.net/ZQrnC/) =[动态更改 jQuery 进度条的颜色](https://stackoverflow.com/questions/6013067/dynamically-change-the-color-of-jquery-progress-bar)

如果您想进一步阅读：[jQuery UI：如何更改 ProgressBar 的颜色？](https://stackoverflow.com/questions/1476573/jquery-ui-how-to-change-the-color-of-a-progressbar)

**jQuery代码**

```
var $progressbar = $("#progressbar").progressbar({ value: 70 }).addClass("beginning"); 
```

**css**

```
.ui-progressbar.beginning .ui-progressbar-value { background: red; } 
```

# c++ - C++11：我可以从多个 args 转到 tuple，但我可以从 tuple 转到多个 args 吗？

> ID：10766112
> 
> 赞同：35
> 
> 时间：2012-05-26T12:12:53.383
> 
> 标签：c++, templates, c++11, variadic-templates

> **可能重复：**
> [如何将元组扩展为可变参数模板函数的参数？](https://stackoverflow.com/questions/687490/how-do-i-expand-a-tuple-into-variadic-template-functions-arguments)
> [“解包”元组以调用匹配的函数指针](https://stackoverflow.com/questions/7858817/unpacking-a-tuple-to-call-a-matching-function-pointer)

在 C++11 模板中，有没有办法使用元组作为（可能是模板）函数的单独参数？

示例：
假设我有这个功能：

```
void foo(int a, int b)  
{  
} 
```

我有元组`auto bar = std::make_tuple(1, 2)`。

我可以用它以`foo(1, 2)`模板方式调用吗？

我的意思不是简单`foo(std::get<0>(bar), std::get<1>(bar))`的，因为我想在一个不知道 args 数量的模板中执行此操作。

**更完整的例子：**

```
template<typename Func, typename... Args>  
void caller(Func func, Args... args)  
{  
    auto argtuple = std::make_tuple(args...);  
    do_stuff_with_tuple(argtuple);  
    func(insert_magic_here(argtuple));  // <-- this is the hard part  
} 
```

我应该注意，我不想创建一个适用于一个 arg 的模板，另一个适用于两个的模板，等等……</p>

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-05-26T12:56:56.077

尝试这样的事情：

```
// implementation details, users never invoke these directly
namespace detail
{
    template <typename F, typename Tuple, bool Done, int Total, int... N>
    struct call_impl
    {
        static void call(F f, Tuple && t)
        {
            call_impl<F, Tuple, Total == 1 + sizeof...(N), Total, N..., sizeof...(N)>::call(f, std::forward<Tuple>(t));
        }
    };

    template <typename F, typename Tuple, int Total, int... N>
    struct call_impl<F, Tuple, true, Total, N...>
    {
        static void call(F f, Tuple && t)
        {
            f(std::get<N>(std::forward<Tuple>(t))...);
        }
    };
}

// user invokes this
template <typename F, typename Tuple>
void call(F f, Tuple && t)
{
    typedef typename std::decay<Tuple>::type ttype;
    detail::call_impl<F, Tuple, 0 == std::tuple_size<ttype>::value, std::tuple_size<ttype>::value>::call(f, std::forward<Tuple>(t));
} 
```

例子：

```
#include <cstdio>
int main()
{
    auto t = std::make_tuple("%d, %d, %d\n", 1,2,3);
    call(std::printf, t);
} 
```

通过一些额外的魔法和 using `std::result_of`，您可能还可以使整个事物返回正确的返回值。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-26T15:23:26.693

创建一个“索引元组”（编译时整数的元组），然后转发到另一个函数，该函数将索引推导出为参数包，并在包扩展中使用它们来调用`std::get`元组：

```
#include <redi/index_tuple.h>

template<typename Func, typename Tuple, unsigned... I>  
  void caller_impl(Func func, Tuple&& t, redi::index_tuple<I...>)  
  {  
    func(std::get<I>(t)...);
  }

template<typename Func, typename... Args>  
  void caller(Func func, Args... args)  
  {  
    auto argtuple = std::make_tuple(args...);  
    do_stuff_with_tuple(argtuple);
    typedef redi::to_index_tuple<Args...> indices;
    caller_impl(func, argtuple, indices());
  } 
```

我的实现`index_tuple`在[https://gitlab.com/redistd/redistd/blob/master/include/redi/index_tuple.h](https://gitlab.com/redistd/redistd/blob/master/include/redi/index_tuple.h) 但它依赖于模板别名，所以如果你的编译器不支持你需要修改它使用 C++03 风格的“模板类型定义”并将最后两行替换`caller`为

```
 typedef typename redi::make_index_tuple<sizeof...(Args)>::type indices;
    caller_impl(func, argtuple, indices()); 
```

一个类似的实用程序`std::index_sequence`在 C++14 中被标准化（参见[index_seq.h](https://gitlab.com/redistd/redistd/blob/master/include/redi/index_seq.h)以了解独立的 C++11 实现）。

# c - 将 openMp 程序移植到 cuda c：正确的 grid_size/block_size 和缩减

> ID：10766114
> 
> 赞同：2
> 
> 时间：2012-05-26T12:13:22.823
> 
> 标签：c, cuda, openmp, gpgpu, thrust

我想将 openMP 程序转换为 cuda c。
我试图在网络和 sdk 上找到我的方式。但是材料超出了我的水平。
我的 c 程序循环遍历`n=2^30`索引并添加每个索引的权重。

1) 正确的 grid_size 和 block_size 是多少？
我的猜测是复制openMP并做

```
grid_size=n/max_number_of_cuda_threads;
block_size=1; 
```

2) 如何在 cuda 中实现 openMP 缩减？
我尝试a`cudaMemcpy`然后减少标准c中的数组，但它似乎很慢。
我看着`thrust`图书馆和它的`reduce`经营者。但我看不到如何将它与我当前的代码集成。

程序.c

```
#include <math.h>
#include <omp.h>

float get_weigth_of_index(long index,float* data){
    int i;
    float v=0;
    for(i=0;i<4;i++)
        v+=index*data[i];
    return v;
}

int main(){
    long i;
    float r=0;
    long n=pow(2,30);
    float data[4]={0,1,2,3};
    #pragma omp parallel for reduction (+:r)
    for(i=0;i<n;i++)
        r+=get_weigth_of_index(i,data);
    return 0;
} 
```

程序.cu

```
#include <stdlib.h>
#include <stdio.h>
#include <omp.h>
#include <math.h>

__device__ float get_weigth_of_index(long index,float* data){
    int i;
    float v=0;
    for(i=0;i<4;i++)
        v+=index*data[i];
    return v;
}

__global__ void looper(long max_number_of_cuda_threads, float* data,float* result){
    long bid=blockIdx.x;
    long start=bid*max_number_of_cuda_threads;
    long end=start+max_number_of_cuda_threads;
    long i;
    float r=0;
    for(i=start;i<end;i++)
        r+=get_weigth_of_index(i,data);
    result[bid]=r;
}

int main(){
    long n=pow(2,30);
    int max_number_of_cuda_threads=1024; //I'm not sure it's correct
    long grid_size=n/max_number_of_cuda_threads;
    long block_size=1;

    float data_host[4]={0,1,2,3};
    float* data_device=0;
    float* result_device=0;
    cudaMalloc((void**)&data_device, sizeof(int)*4);
    cudaMemcpy(data_device, data_host, sizeof(int)*4, cudaMemcpyHostToDevice);
    cudaMalloc((void**)&result_device, sizeof(float)*grid_size);

    looper<<<grid_size,block_size>>>(max_number_of_cuda_threads,data_device,result_device);

    //reduction with standard c: cudaMemcpy seems slow
    float* result_host=(float*)malloc(sizeof(float)*grid_size);
    cudaMemcpy(result_host, result_device, sizeof(float)*grid_size, cudaMemcpyDeviceToHost); 

    long i;
    float v=0;
    #pragma omp parallel for reduction(+:v)
    for(i=0;i<grid_size;i++)    
        v+=result_host[i];
    printf("result:%f",v);

    return 0;
} 
```

我的显卡

```
Device 0: "Tesla M2050"
  Number of multiprocessors:                     14
  Number of cores:                               448
  Total amount of constant memory:               65536 bytes
  Total amount of shared memory per block:       49152 bytes
  Total number of registers available per block: 32768
  Warp size:                                     32
  Maximum number of threads per block:           1024
  Maximum sizes of each dimension of a block:    1024 x 1024 x 64
  Maximum sizes of each dimension of a grid:     65535 x 65535 x 1
  Maximum memory pitch:                          2147483647 bytes
  Texture alignment:                             512 bytes 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-26T13:01:01.273

我认为这`thrust::transform_reduce`可以解决你的问题。此代码显示了如何使用它：

```
#include <thrust/transform_reduce.h>
#include <thrust/functional.h>
#include <thrust/device_vector.h> 
#include <thrust/host_vector.h>
#include <cmath>

struct get_weigth_of_index
{

    get_weigth_of_index(float* data, size_t n)
    {
        cudaMalloc((void**)&_data,n * sizeof(float));
        cudaMemcpy(_data, data, n * sizeof(float), cudaMemcpyHostToDevice);
        _n = n;
    }

    float* _data;
    size_t _n;
    __host__ __device__
    float operator()(const int& index) const
    { 
        float v=0;
        for(size_t i=0; i<_n; i++)
            v += index * _data[i];
        return v;
    }
};

int main(void)
{

    float x[4] = {1.0, 2.0, 3.0, 4.0};

    size_t len = 1024; // init your value
    float * index //init and fill you array here 
    // transfer to device
    thrust::device_vector<float> d_index(index, index + len);

    get_weigth_of_index unary_op(x, 4);
    thrust::plus<float> binary_op;
    float init = 0;

    float sum = thrust::transform_reduce(d_x.begin(), d_x.end(), unary_op, init, binary_op);

    std::cout << sum<< std::endl;

    return 0;
} 
```

# php - 添加，删除数组元素并通过php访问

> ID：10766117
> 
> 赞同：0
> 
> 时间：2012-05-26T12:13:31.900
> 
> 标签：php, javascript

我有以下代码。每次用户点击一张照片时，它的标题都会被推入一个数组中。如果他再次单击，标题将被删除。我希望以后能够使用 php 访问数组，以便填充数据库。

```
function highlight(elem) {
    var e = array();
    if (elem.style.border == '2px solid blue') {
        var index = e.indexOf(elem.parentNode.title);
        e.splice(index, 1);
        elem.style.border = '';
    } else {
        elem.style.border = '2px solid blue';
        e.push(elem.parentNode.title);
    }
} 
```

这是正确的做法吗？如何使用 php 访问 javascript 数组？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T12:28:04.503

您必须以您选择的格式（XML、JSON 等）序列化数组并通过 AJAX 将其发送回服务器。在服务器端，您必须有一个接受序列化格式的 PHP 脚本，可以对其进行解析，然后执行您想要的 DB 操作。

# css - 有没有关于 flexbox 模块的最新教程？

> ID：10766122
> 
> 赞同：5
> 
> 时间：2012-05-26T12:15:33.043
> 
> 标签：css, flexbox

我知道[灵活框布局模块](http://www.w3.org/TR/css3-flexbox/)规范已经改变，一些浏览器现在实现了不止一个版本（使用不同的语法）。我一直在搜索信息，但我只能找到带有警告说它们现在已经过时的教程。

我知道规范可能会再次更改，但我有一个不寻常的用例（Chrome 扩展），我想以当前形式使用它。我只想知道如何使用 Chrome 中实现的最新版本。

有人知道最新的教程吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-10T09:53:25.213

这是迄今为止我发现的最好的[flexbox 教程](http://weblog.bocoup.com/dive-into-flexbox/)，它解释得很好，或者如果您需要更深入的解释，请查看[w3c 草案](http://www.w3.org/TR/css3-flexbox/)。

为了测试和更好地理解 flexbox 模型，请查看这个[flexbox playground](http://the-echoplex.net/flexyboxes/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T16:04:50.663

Flexbox 模块还没有过时。新模式的实施需要时间，可能需要一年才能实施。

W3C 始终拥有标准文档以及可能未实现或未实现的事物的注释。

这是当前的[Flexbox 布局模块](http://www.w3.org/TR/css3-flexbox/)。

这是新规范[Flexbox Layout Module 2012](http://dev.w3.org/csswg/css3-flexbox/)的编辑草稿。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-02T14:15:56.580

因为过去的实现发生了变化，所以我们知道 flexbox 的 2 个主要实现。[这个页面](http://css-tricks.com/old-flexbox-and-new-flexbox/)提供了一些关于旧的和新的实现的背景信息。

[我在这里](http://css-tricks.com/using-flexbox/)找到了一个很好的关于 Flexbox 实施状态的教程。

页面 HTML 结构的示例代码（[此处在 Codepen 上演示](http://codepen.io/chriscoyier/pen/zlntC)）：

```
<div class="page-wrap">

  <section class="main-content" role="main">
    Main content: first in source order
  </section>

  <nav class="main-nav" role="navigation">
    Links
  </nav>

  <aside class="main-sidebar" role="complementary">
    Sidebar
  </aside>

</div> 
```

要将侧边栏的两倍大分成`page-wrap`3 部分，我们可以使用 flexbox。`main-nav`另一个优点是`main-content`元素在 DOM 中的位置在之前，`main-nav`但是使用 flexbox 我们可以在内容之前渲染它。这对于屏幕阅读器很有用，因此首先阅读内容。

我们需要创建`page-wrap`一个 flexbox 上下文。这样所有的孩子都变成了 flexbox 项目：

```
.page-wrap {
  display: -webkit-box;      /* OLD - iOS 6-, Safari 3.1-6 */
  display: -moz-box;         /* OLD - Firefox 19- (buggy but mostly works) */
  display: -ms-flexbox;      /* TWEENER - IE 10 */
  display: -webkit-flex;     /* NEW - Chrome */
  display: flex;             /* NEW, Spec - Opera 12.1, Firefox 20+ */
 } 
```

属性的顺序很重要。因为有些浏览器支持这两种实现，所以我们需要在旧属性下面指定最新的属性。这是因为`display`-property 没有前缀。

要添加项目的宽度：

```
.main-content {
  width: 60%;
}
.main-nav,
.main-sidebar {
  -webkit-box-flex: 1;      /* OLD - iOS 6-, Safari 3.1-6 */
  -moz-box-flex: 1;         /* OLD - Firefox 19- */
  width: 20%;               /* For old syntax, otherwise collapses. */
  -webkit-flex: 1;          /* Chrome */
  -ms-flex: 1;              /* IE 10 */
  flex: 1;                  /* NEW, Spec - Opera 12.1, Firefox 20+ */
} 
```

我们需要做的最后一件事是更改项目的顺序，因为`main-nav`现在`main-content`

```
.main-content {
  -webkit-box-ordinal-group: 2;   /* OLD - iOS 6-, Safari 3.1-6 */
  -moz-box-ordinal-group: 2;      /* OLD - Firefox 19- */
  -ms-flex-order: 2;              /* TWEENER - IE 10 */
  -webkit-order: 2;               /* NEW - Chrome */
  order: 2;                       /* NEW, Spec - Opera 12.1, Firefox 20+ */
}
.main-nav {
  -webkit-box-ordinal-group: 1;  
  -moz-box-ordinal-group: 1;     
  -ms-flex-order: 1;     
  -webkit-order: 1;  
  order: 1;
}
.main-sidebar {
  -webkit-box-ordinal-group: 3;  
  -moz-box-ordinal-group: 3;     
  -ms-flex-order: 3;     
  -webkit-order: 3;  
  order: 3;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T21:00:41.073

由[html5please.com](http://html5please.com/#flexbox)提供，听起来 Flexbox 规范被认为是稳定的，并且在[Opera](http://dev.opera.com/articles/view/flexbox-basics/)和[Mozilla](https://developer.mozilla.org/en-US/docs/CSS/Using_CSS_flexible_boxes)上有教程。

注意我不确定为什么 html5please 仍然建议避免。它的文字似乎暗示了相反的意思。

# javascript - TinyMCE 和 jquery.colorbox

> ID：10766125
> 
> 赞同：1
> 
> 时间：2012-05-26T12:15:39.543
> 
> 标签：javascript, tinymce, colorbox

我在 jquery.colorbox 中打开了 TinyMCE，一切正常，所有图标都是可点击的，我可以通过 HTML 图标更新文本区域，但我无法点击实际的编辑器框！

如果我在 Colorbox 外打开 TinyMCE，一切正常。

以前有没有人遇到过这个问题，如果有，我该如何解决？

**最新编辑，在这里没有得到任何爱！**

我刚刚发现这实际上在 IE 中几乎可以完美运行。在 Chrome 和 FF 中，我无法在框中输入内容，但在 IE 中我可以，但只有当我的光标位于框的焦点时点击“THE ANY KEY”。然后文本奇迹般地出现，我可以随意输入和更新。

任何人？？？

**下面的旧编辑**

这可能是 z-index 问题吗，我不确定，因为其他所有内容都在 ColorBox 之上打开，包括插入图像和我的文件浏览器。这只是我无法点击的TextAera！

**更多信息**

我的网站是 MVC3，我正在加载 TinyMCE，如本教程中所做的那样：[http ://www.tugberkugurlu.com/archive/tinymce-html-text-editor-and-asp-net-mvc-setting-it-up-使用 nuget 变得容易](http://www.tugberkugurlu.com/archive/tinymce-html-text-editior-and-asp-net-mvc-setting-it-up-has-become-easy-with-nuget)

我能找到的关于这个问题的任何事情都是在加载 tinyMCE 的同时加载 jQuery ColorBox 或 jQuery Dialog，这会产生相同的结果。

在 PHP 和其他技术中执行此操作的人遇到了更多麻烦，在我的情况下，一切正常，但我无法输入 testArea/EditorFor。

我现在认为 z-index 与它无关，所以我将尝试确保**在 ColorBox 完成加载后加载 TinyMCE！**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-04-15T15:26:16.187

我相信这是因为 colorbox 捕获了焦点并阻止了对 colorbox 边界之外的任何东西的关注。TinyMCE 在颜色框外创建一个 iFrame，你不能点击它。

尝试在颜色框选项中将 trapFocus 设置为 false。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-01-30T09:36:30.670

在插件插件中添加链接作为选项：“链接

# java - 按钮在运行时消失，在 Eclipse 设计视图中可见

> ID：10766126
> 
> 赞同：1
> 
> 时间：2012-05-26T12:15:40.010
> 
> 标签：java, android, listview, button, adapter

我的应用程序用于从一个站点阅读新闻。新闻从 RSS 提要解析并显示为包含标题和日期的元素列表。主要布局是 ListView，消息（新闻）的布局 post_entry 如下所示：

```
 <?xml version="1.0" encoding="utf-8"?>
        <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
             android:layout_width="fill_parent"
             android:layout_height="fill_parent" 
             android:orientation="vertical"
         >

    <TextView
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:padding="5dp" 
            android:id="@+id/post_title">
      </TextView>
      <TextView
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:textSize="10sp"
            android:paddingLeft="5dp"
            android:paddingBottom="5dp"
            android:id="@+id/post_pubDate">
      </TextView>

</LinearLayout> 
```

一个 TextView 用于标题，另一个用于日期。

此视图的适配器如下所示：

```
public class PostAdapter extends ArrayAdapter<PostItem> {

    public ArrayList<PostItem> messages;
    public LayoutInflater inflater;

    public PostAdapter(Activity context, int resource,
            ArrayList<PostItem> objects) {
        super(context, resource, objects);
        messages = objects;
        inflater = LayoutInflater.from(context);
    }

    static class ViewHolder {
        public TextView titleView;
        public TextView pubDateView;
    }

    public View getView(int position, View convertView, ViewGroup parent) {
        ViewHolder holder;
        if (convertView == null) {
            convertView = inflater.inflate(R.layout.post_entry, null, true);
            holder = new ViewHolder();
            holder.titleView = (TextView) convertView
                    .findViewById(R.id.post_title);
            holder.pubDateView = (TextView) convertView
                    .findViewById(R.id.post_pubDate);
            convertView.setTag(holder);
        } else {
            holder = (ViewHolder) convertView.getTag();
        }
        holder.titleView.setText(messages.get(position).title);
        holder.pubDateView.setText(messages.get(position).date);
        return convertView;
    }

} 
```

我想在主要活动中添加刷新按钮。

在主要活动之后看起来像这样：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" 
    android:orientation="vertical"
    >

<ListView
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/list"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_weight="0.8" />

<Button
    android:id="@+id/refresh"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_weight="0.2"
    android:text="Refresh" 
    android:onClick="Update"/>

</LinearLayout> 
```

在 Eclipse 的图形模式下，我看到了项目列表及其下方的按钮。

一切似乎都很好，但是当我运行我的应用程序时，屏幕上没有按钮。我只看到新闻列表。

你知道为什么会这样吗？以及如何在列表下方添加按钮？

# php - index.php 不应该像 facebook 一样出现在 url 上？

> ID：10766127
> 
> 赞同：0
> 
> 时间：2012-05-26T12:15:42.757
> 
> 标签：php

我注意到 facebook 网站显示像[http://www.facebook.com/?sk=nf](http://www.facebook.com/?sk=nf)这样的 url 我知道必须有一个索引文件 = index.php，它基于 GET 变量 sk 来获取内容因为它的功能。

有人可以帮忙吗？

我试图在页面 noname.php 上的页面 href="?sp=admin" 中添加一个链接，该页面与 index.php 一起位于文件夹 xxxx 中

xxxx> index.php xxxx> noname.php

因此，当我单击该链接时，它会指向“noname.php?sp=admin”，而我希望它转到“index.php?sp=admin”

我的网站应该像这样 www.xxxx.com/?sp=admin

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T12:25:05.810

你会尝试这样 href="/?sp=admin" 它会重定向到索引页面，如 www.xxxx.com/?sp=admin。请加斜线

```
RewriteEngine On
DirectoryIndex index.php
AddDefaultCharset On
Options +FollowSymLinks -Indexes
RewriteRule ^index.php /noname.php [L] 
```

请在您的 xxx 文件夹中的 .htaccess 文件中使用此 mod_rewrite 规则

# c# - 如何按多个值对 XML 数据进行分组

> ID：10766128
> 
> 赞同：6
> 
> 时间：2012-05-26T12:16:05.860
> 
> 标签：c#, .net, xml, linq, linq-to-xml

我需要从 XML 中对“文档”值进行分组。问题是因为键值（productType）可以是多个。

这是 XML：

```
<Documents>
<Document>
    <id>1</id>
    <title>title1</title>
    <productTypes>
        <productType id="x1">Capital Costs Analysis Forum - Brazil</productType>
  <productType id="x3">Environmental, Health and Safety &amp; Sustainability</productType>
    </productTypes>
</Document>
<Document>
    <id>2</id>
    <title>title2</title>
    <productTypes>
  <productType id="x1">Capital Costs Analysis Forum - Brazil</productType>
    </productTypes>
</Document>
<Document>
    <id>3</id>
    <title>title3</title>
    <productTypes>
  <productType id="x3">Environmental, Health and Safety &amp; Sustainability</productType>
    </productTypes>
</Document>
<Document>
    <id>4</id>
    <title>title4</title>
    <productTypes>
        <productType id="x2">Defense, Risk &amp; Security</productType>
    </productTypes>
</Document> 
```

这就是我尝试的：

```
var documents = from document in some.Descendants("Document")
                group document by (string)document
                    .Element("productTypes")
                    .Elements("productType")
                    .First() into docGroup
select docGroup; 
```

仅当存在一个 productType 元素时，我的代码才有效。如果 productType 有多个值，如何更改我的代码工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T12:47:59.320

您没有解释您想要什么结果，但我怀疑您想要以下分组：

```
 var documentGroups = 
            from document in XDocument.Load("input.xml").Descendants("Document")
            from productType in document.Element("productTypes").Elements("productType")
            group document by (string)productType.Attribute("id");

        foreach (var documentGroup in documentGroups)
        {
            Console.WriteLine("Group {0} has the following members:", documentGroup.Key);
            foreach (XElement document in documentGroup)
            {
                Console.WriteLine("\t{0}", (string)document.Element("title"));
            }
            Console.WriteLine();
        } 
```

输入为

```
<Documents>
  <Document>
    <id>1</id>
    <title>title1</title>
    <productTypes>
      <productType id="x1">Capital Costs Analysis Forum - Brazil</productType>
      <productType id="x3">Environmental, Health and Safety &amp; Sustainability</productType>
    </productTypes>
  </Document>
  <Document>
    <id>2</id>
    <title>title2</title>
    <productTypes>
      <productType id="x1">Capital Costs Analysis Forum - Brazil</productType>
    </productTypes>
  </Document>
  <Document>
    <id>3</id>
    <title>title3</title>
    <productTypes>
      <productType id="x3">Environmental, Health and Safety &amp; Sustainability</productType>
    </productTypes>
  </Document>
  <Document>
    <id>4</id>
    <title>title4</title>
    <productTypes>
      <productType id="x2">Defense, Risk &amp; Security</productType>
    </productTypes>
  </Document>
</Documents> 
```

输出

```
Group x1 has the following members:
        title1
        title2

Group x3 has the following members:
        title1
        title3

Group x2 has the following members:
        title4 
```

# xcode - 如何将字符串转换为 NSDate 格式？

> ID：10766129
> 
> 赞同：-1
> 
> 时间：2012-05-26T12:16:16.020
> 
> 标签：xcode, ios5, nsstring, nsdateformatter

我想将字符串转换为 nsdate 格式。

这是我的字符串 NSString str=@"Sunday, June 6, 2010 5:00:00 AM CDT";

我的代码是

```
 NSDateFormatter * Dateformats= [[NSDateFormatter alloc] init];

        [Dateformats setDateFormat:@"MM/DD/yyyy hh:mm:ss"]; //ex @"MM/DD/yyyy hh:mm:ss" 
        NSDate *myDate=[Dateformats dateFromString:str];
        NSLog(@"%@",myDate); 
```

但它显示为 null 所以告诉我在 MM/DD/yyyy hh:mm:ss 中显示日期的方法

请朋友帮助我，如何做到这一点

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-26T12:28:52.083

您将格式化程序设置为期望字符串，如`@"05/26/2012 8:34:00"`. 但是你给它`@"Sunday, June 6, 2010 5:00:00 AM CDT"`。这两种格式完全不同。它不知道如何解析它，所以返回`nil`。

您提供的示例字符串所需的格式是`EEEE, MMMM d, yyyy h:mm:ss a zzz`.

[此处](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/DataFormatting/Articles/dfDateFormatting10_4.html#//apple_ref/doc/uid/TP40002369-SW1)和[此处](http://unicode.org/reports/tr35/tr35-10.html#Date_Format_Patterns)的详细信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T12:40:12.360

正如您提到的日期字符串： NSString str=@"Sunday, June 6, 2010 5:00:00 AM CDT";

日期格式应该是这样的，

[dateFormatter setDateFormat:@"EEE, MMM dd, yyyy hh:mm:ss a z"];

有关更多详细信息，请查看此内容：[DateFormatter 详细信息](https://stackoverflow.com/questions/2993578/whats-wrong-with-how-im-using-nsdateformatter)

试试这个，希望它对你有用..

享受编码:)

# c# - 应用程序启动时如何显示消息

> ID：10766132
> 
> 赞同：0
> 
> 时间：2012-05-26T12:17:43.570
> 
> 标签：c#, windows-phone-7

启动应用程序（适用于 windows phone 7）时如何显示消息或 xaml 页面，并且该消息应仅显示一次（即，该消息在下次启动应用程序时不可见？有人可以帮我吗？这个。提前感谢您的辛勤工作！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T12:26:39.400

看看这个，[http://www.jimmycollins.org/blog/?p=366](http://www.jimmycollins.org/blog/?p=366)

它允许您检查是否在显示页面之前首次运行，以便您可以选择显示不同的页面。在您的情况下，您将显示相同的页面，但您可以将指示传递给主页或在主页中放置类似的首次运行逻辑。

如果您将版本添加到设置中，您也可以在更新后检查首次运行。

# java - 由 JPanel 实现时，MouseEvent 不会触发

> ID：10766135
> 
> 赞同：0
> 
> 时间：2012-05-26T12:18:15.237
> 
> 标签：java, swing, mouseevent, jcomponent, mouselistener

好的，所以在我正在制作的这个程序中，用户将能够在他们的计算机上创建他们最喜欢的应用程序的快捷方式。我猜我的程序有点像应用程序的中心。不过我有一个小问题，它涉及两个类：`AppButton`和`AppButtonContainer`. 他们都实现了`MouseListener`，但是`AppButton`extends`JComponent`和`AppButtonContainer`extends `JPanel`。基本上，当单击 AppButton 时，它会设置一个以不同颜色绘制边框以使其看起来被选中。否则，它将边框设置为背景颜色。当您双击它时，它会打开指定的应用程序。我有一种方法`AppButton`可以移除焦点，因此将边框设置为背景颜色。在`AppButtonContainer`中，有一些代码，因此当单击面板时，它会将焦点从`AppButton`.

不过，这是我的问题。`AppButtonContainer`没有意识到它被点击了。我认为它与顶级容器或其他东西有关，但我不确定。有人可以帮忙吗？

**编辑：我发现我没有把它放在`addMouseListener(this)`AppButtonContainer 的构造函数中。感谢所有帮助我解决这个问题并一路给我提示的人:)**

`AppButtonContianer`：

```
public class AppButtonContainer extends JPanel implements MouseListener {
private static final long serialVersionUID = 6485231881729120957L;
public List<AppButton> appButtons;
private static final Color BACKGROUND_COLOR = new Color(18, 18, 18);

public AppButtonContainer(List<AppButton> buttons) {
    this.appButtons = buttons;
    setLayout(new GridLayout(5, 5, 20, 20));
    addButtonsToPane();
}

private void addButtonsToPane() {
    List<AppButton> buttons = this.appButtons;
    for (int i = 0; i < buttons.size(); i++) {
        this.add(buttons.get(i));
    }
}

private void removeAllButtonFocus() {
    for (int i = 0; i < this.appButtons.size(); i++) {
        this.appButtons.get(i).removeFocus();
    }
}

@Override
public void paintComponent(Graphics g) {
    super.paintComponent(g);
    setBackground(BACKGROUND_COLOR);
    repaint();
}

@Override
public void mouseClicked(MouseEvent e) {
    System.out.println("Pane Clicked");
    removeAllButtonFocus();
}

    ...Other MouseEvent methods 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T12:54:13.583

`addMouseListener(this)`您可以通过放入AppButtonContainer 类的构造函数来解决手头的问题。否则，它永远不会拾取鼠标事件。

不过，一般来说，把你的类变成这样的鼠标监听器并不好。也许尝试创建一个内部类来监听鼠标事件并将它们传递给 AppButtonContainer。

# c# - C# 中的委托和 C++ 中的 fnc 指针

> ID：10766139
> 
> 赞同：5
> 
> 时间：2012-05-26T12:19:00.197
> 
> 标签：c#, delegates

我试图让自己熟悉代表和[http://msdn.microsoft.com/en-us/library/aa288459(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/aa288459(v=vs.71).aspx)，我正在阅读：

“与 C 或 C++ 中的函数指针不同，委托是面向对象的、类型安全的和安全的。”

意思是，我确实有 C++ 背景，有点不明白如何理解那里的“不像”这个词。委托是面向对象的，而 C++ fnc 指针不是，它们是什么意思？类型安全和安全也是如此。

任何人都可以展示一些例子和反例吗？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-26T14:09:46.670

委托比函数指针做得更多。它不仅存储函数地址，还存储对目标对象的引用。与 C++ 方法指针不同。所以调用实例方法很简单。这照顾了“面向对象”的主张。

从那里有点下坡，但是编译器在分配委托时验证函数签名与委托类型完全匹配，从而确保了类型安全。这在 C++ 中没有什么不同，但没有办法消除不匹配。另一个可能的安全方面是委托对象持有的对象引用对垃圾收集器是可见的。因此，您永远不能在已删除对象上调用实例方法。

# java - 将 System.out 重定向到页面

> ID：10766141
> 
> 赞同：0
> 
> 时间：2012-05-26T12:19:13.983
> 
> 标签：java, jsp, redirect

我正在通过我的 JSP 页面运行 Java 应用程序。是否可以将 Java 应用程序打印到 System.out 的所有内容重定向到我的页面？

**编辑：** 我有一个包*pkg*，其中包含一个主要功能。这个函数有很多 System.out.println 调用。例如

```
package pkg;
public class pkg {
    public static void main(String[] args) {
        System.out.println("Hello");
    }
} 
```

在我的*index.jsp*中，我调用：

```
<%
    pkg.pkg.main(new String[] {});
%> 
```

我需要查看*pkg.pkg.main*在页面上打印的所有内容。例如

```
Hello 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T12:33:15.090

一种天真的方法是使用适当包装的[响应输出流调用](https://tomcat.apache.org/tomcat-5.5-doc/servletapi/javax/servlet/ServletResponse.html#getOutputStream%28%29)[System.setOut()](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/System.html#setOut%28java.io.PrintStream%29)。但是，一旦多个并发请求启动，这将不起作用，因为来自不同线程的输出之间没有区别。

您可以创建自己的输出流子类，该子类委托给另一个线程本地输出流，您将其设置为响应的输出流，然后再`pkgmain()`对每个请求调用您的方法。如果您`pkgmain()`产生额外的线程，那么这种方法可能不起作用（尽管在这种情况下您可以尝试使用[InheritableThreadLocal](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/InheritableThreadLocal.html)）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T12:40:51.750

重构被调用类的代码，使其接受一个 Writer 作为参数，并打印到这个 Writer 而不是 System.out：

```
package pkg;
public class pkg {
    public static void main(String[] args) {
        main(new OutputStreamWriter(System.out), args);
    }

    public static void main(Writer writer, String[] args) {
        PrintWriter out = new PrintWriter(writer);
        out.println("Hello");
    }
} 
```

并从您的 JSP（应该是一个 servlet）中调用第二个主要方法：

```
<%
    pkg.main(out, new String[] {});
%> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T16:32:29.127

另一种方法，如果你不能编辑要执行`Runtime#exec()`的类的源代码，是使用命令以编程`java`方式执行类，就像你在命令提示符下执行它一样，然后捕获它的标准输出（和标准错误） !) 由`Process`.

```
Process process = Runtime.getRuntime().exec("java -cp /path/to/your/pkg pkg.pkg");
InputStream stdout = process.getInputStream();
InputStream stderr = process.getErrorStream();
// Read and write it to response.getOutputStream() the usual way. 
```

如果您以前从未真正使用`Runtime#exec()`过，我强烈建议您阅读[这篇著名的 JavaWorld 文章](http://www.javaworld.com/javaworld/jw-12-2000/jw-1229-traps.html)（全部 4 页）来学习和理解它的注意事项。

最后但并非最不重要的一点是，请记住 Java/JSP 代码物理运行在运行 Web 服务器的机器（服务器端），而不是运行 Web 浏览器的机器（客户端），并且 Web 服务器的 Java 运行时安全管理器应该允许`Runtime#exec()`从 webapp 内部执行。如果您打算将此应用程序部署到您无法控制安全管理器的第 3 方主机，则`Runtime#exec()`调用很可能会被阻止并抛出`SecurityException`.

不用说，这一切都很臭。如果这些类涉及用户控制的代码，那么您可能会打开巨大的安全漏洞。

# iphone - 自定义 TabBar 上的突出显示图像

> ID：10766144
> 
> 赞同：0
> 
> 时间：2012-05-26T12:19:28.720
> 
> 标签：iphone, ios, cocoa-touch

我想用标签栏上的图像替换正常突出显示。

在 iOS4 和 iOS5 上执行此操作的最简单方法是什么？

![强调](../Images/5d3eab3015ff014c224f4fd9422c3595.png)

![标签栏](../Images/7ec75d92b12e20abece1b8f846fdca6a.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T12:40:07.947

这在 iOS 5 中非常简单（请参阅[Apple 的 UITabBar 文档的“自定义外观”部分](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UITabBar_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40007521-CH3-SW4)）。

如果您的客户坚持使用 iOS 4，您就必须更有创意。考虑子类化`UITabBar`或`UITabBarController`做一些你自己的绘图。 这是您可以查看[的示例](https://stackoverflow.com/questions/8909379/setting-a-background-image-for-a-tabbar/9021698#9021698)（[以及另一个示例](https://stackoverflow.com/questions/4640588/really-cool-way-to-create-custom-uitabbar-for-iphone-app)和[另一个示例](https://stackoverflow.com/questions/4640588/really-cool-way-to-create-custom-uitabbar-for-iphone-app)，其中的答案指向名为[**BCTabBarController的东西）。**](http://github.com/briancollins/BCTabBarController)为您提供所有潜在的解决方案。

# matlab - matlab 3D光谱图

> ID：10766145
> 
> 赞同：0
> 
> 时间：2012-05-26T12:08:31.560
> 
> 标签：matlab, graphics3d

如何创建一个应用程序，允许在 matlab 中显示具有时间、幅度和频率（3d 频谱图）的波形文件的 3D 表示。注意：不允许使用 matlab 或任何其他与频谱图相关的库的 ready 函数

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T09:01:31.833

我认为您正在寻找的是频谱图：

[http://www.mathworks.com/help/toolbox/signal/ref/spectrogram.html](http://www.mathworks.com/help/toolbox/signal/ref/spectrogram.html)

# javascript - 使用两个条件验证输入字段

> ID：10766146
> 
> 赞同：1
> 
> 时间：2012-05-26T12:19:35.067
> 
> 标签：javascript, jquery, regex, validation

我有这个 HTML 字段：

```
<input type="text" name="userInput" id="userInput"> 
```

我想确保用户输入**至少五个字符**或**什么都不**输入。

此代码仅测试最少五个字符，运行良好：

```
userInputValue = $("#userInput").val();
if (/^([A-Za-z]{5,})/.test(userInputValue) === false) {
    alert("More than five, please!");
    return false;
} 
```

但是，当我尝试添加条件以跳过此检查字段是否为空白时，就像这样

```
userInputValue = $("#userInput").val();
if (userInputValue !== "") {
    if (/^([A-Za-z]{5,})/.test(userInputValue) === false) {
        alert("Either more than five or none at all, please!");
        return false;
    }
} 
```

或者像这样

```
userInputValue = $("#userInput").val();
if (/^([A-Za-z]{5,})/.test(userInputValue) === false && userInputValue !== "") {
    alert("Either more than five or none at all, please!");
    return false;
} 
```

检查完全失败，任何事情都可以通过。我做错了什么，我该如何让它发挥作用？我没有从调试器获得任何信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T12:21:55.167

只是改变了一下，添加了一个`?`正确的地方。

```
userInputValue = $("#userInput").val();
if (userInputValue !== "") {
    if (/^([A-Za-z]{5,})?$/.test(userInputValue) === false) {
        alert("Either more than five or none at all, please!");
        return false;
    }
} 
```

**正则表达式解释**

```
"^" +              // Assert position at the beginning of a line (at beginning of the string or after a line break character)
"(" +              // Match the regular expression below and capture its match into backreference number 1
   "[A-Za-z]" +       // Match a single character present in the list below
                         // A character in the range between “A” and “Z”
                         // A character in the range between “a” and “z”
      "{5,}" +           // Between 5 and unlimited times, as many times as possible, giving back as needed (greedy)
")?" +             // Between zero and one times, as many times as possible, giving back as needed (greedy)
"$"                // Assert position at the end of a line (at the end of the string or before a line break character) 
```

* * *

希望这可以帮助

# 3d - 匹配世界空间中的对象矩阵 - Three.js

> ID：10766151
> 
> 赞同：2
> 
> 时间：2012-05-26T12:21:11.433
> 
> 标签：3d, three.js

我正在尝试学习在世界空间中操纵对象的正确方法。作为测试，我创建了一个立方体，我正在从任意向量到立方体上的每个顶点绘制一些线。

如果我不以任何方式更改立方体，那么线条会很好地击中顶点：

![正确的](../Images/0a829f9038046b0b6ec6a03e600c4307.png)

但如果我旋转立方体，那么线条不再匹配顶点：

![错误的](../Images/7d45a354f06cc3346fe372c427742f38.png)

显然我知道我可以将线旋转与旋转立方体相同的量，但我知道我应该操纵矩阵或向量来做到这一点。

谁能解释我应该如何解决这样的常见问题，而无需旋转两个对象。

为方便起见，我有一个[jsfiddle 可以玩](http://jsfiddle.net/SCXNQ/110/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-26T16:40:23.667

如果您希望线条与代码一起旋转，您只需将线条添加到立方体而不是场景中：

```
// scene.add(line);
cube.add(line); 
```

但是，如果您想要将线条的原点保持在同一位置并更新线条的结尾。

```
cube.updateMatrixWorld(); // make sure that cube.matrixWorld is updated.

for(var i = 0; i < 8 ;i++){
   var vertex = cube.matrixWorld.multiplyVector3(cube.geometry.vertices[i].clone());
   lineGeometry.vertices.push(vertex);
   lineGeometry.vertices.push(lineStart); 
} 
```

# javascript - 删除 div 内容并添加 iframe

> ID：10766153
> 
> 赞同：1
> 
> 时间：2012-05-26T12:21:25.523
> 
> 标签：javascript, jquery, html, jquery-mobile

在我的应用程序中，我想删除 div 内容并添加 iframe，这是我的代码

索引.html

```
<div data-role="page">
    <div data-role="header" >
    <div data-role="content" id="contents">
        <a href="#" data-role="button" onclick="cif()"><img src="images/zo_connect.png"></a>
        </div>

    </div><!-- /content -->
</div><!-- /page --> 
```

default.js 函数 cif(){

```
$("#contents").remove();
$("#contents").html('<iframe src="http://google.com" style="height: 100%; width: 100%"></iframe>'); 
```

}

当我删除 div 内容并在创建 iframe 之后它不显示时，我需要在单击按钮后删除内容，然后在该内容中创建 iframe

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T12:25:07.777

好吧，如果您删除“内容”，它就消失了……此后您不能更改它的 html()，因为它已经消失了。您可能想完全跳过第一行。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-26T12:25:40.383

`$('#contents").remove()`删除整个`<div id='contents'></div>`

您正在寻找`$('#contents").empty()`，这将删除里面的所有内容`<div id='contents'>`

# arm - Arm Rom.ld ,Ram.ld ,scatterfile ,startup.s ,这些文件是干什么用的？

> ID：10766154
> 
> 赞同：4
> 
> 时间：2012-05-26T12:21:36.343
> 
> 标签：arm, atmel

我已经编写了 avr 微控制器，但对 arm 来说是新手。我只是查看了 winarm 附带的 sam7s64 的示例代码。我对这些文件 rom.ld 、 ram.ld 、 scatter 文件、 cstartup.s 文件感到困惑。我在编写 avr 时从未见过这类文件。请澄清我对它们每个文件的作用的怀疑。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-26T14:50:25.847

我还有更多示例供您思考[http://github.com/dwelch67](http://github.com/dwelch67)

假设您有一个支持特定指令集的工具链。工具经常尝试支持不同的实现。您可能有一个具有 X 数量的闪存和 Y 数量的 ram 的微控制器。一个芯片的 ram 可能与另一个芯片的位置不同，等等。指令集可能是相同的（或者本身可能有细微的变化），以便工具链对它最终想知道的内存布局的一些指令进行编码是。可以为某些纯粹与位置无关的处理器编写代码，尽管这不一定是目标，因为它有成本。工具也倾向于采用 Unix 方法处理事物。从源语言到目标文件，它还不知道内存布局，它留下了一些漏洞，有待以后填补。您可以根据工具链和指令集从不同的语言中获取，可能混合使用 ada 和 C 以及其他编译为对象的语言。然后链接器需要结合所有这些东西。作为程序员，你可以而且有时必须控制什么去哪里。您希望向量表位于正确的位置，您希望您的输入代码可能位于某个位置，您肯定希望最终在 ram 中使用 .data 并在 flash 中使用 .text。

对于 gnu 工具，您使用链接器脚本告诉链接器事情去向，其他工具链可能有其他方法。使用 gnu ld 您还可以使用 ld 命令行...您看到的 .ld 文件可以控制它。现在有时这被埋在工具链安装的内部，有一个默认位置可以找到默认链接器脚本，如果没问题，那么您不需要制作链接器脚本并将其随身携带。根据您在 avr 上使用的工具，您要么不需要弄乱它（使用程序集、avra 或您使用 .org 或其他类似语句控制它的东西），要么工具链/沙箱会为您处理好它，它被掩埋了（例如使用 arduino 沙箱）。例如，如果您编写一个 hello world 程序

```
#include <stdio.h>
int main ( void )
{
   printf("Hello World!\n");
   return(0);
} 
```

并在您的台式机/笔记本电脑上编译

```
gcc hello.c -o hello 
```

有一个链接器脚本，可能是一个讨厌的、可怕的、丑陋的。但是由于您对操作系统的默认链接器脚本和布局感到满意，因此您不需要弄乱它，它就可以工作。对于这些微控制器，一个工具链可以支持大量芯片和供应商，您开始必须处理这个问题。将链接器脚本保留在项目中是一个好主意，因为您不知道从一台机器或个人到下一台机器或人他们有什么确切的 gnu 交叉编译器，如果你创建在许多 gnu 交叉编译器安装上工作的项目并不难在项目中保留一些东西，而不是强迫它们进入工具链。

另一半，特别是 gnu 工具，与链接描述文件密切相关的是启动代码。在调用您的 C 程序之前，有一些期望。例如 .data 已就位且 .bss 已清零。对于微控制器，您希望将 .data 保存在非易失性存储器中，因此当您启动 C 程序时它就在那里，所以它需要在闪存中，但它不能从那里运行，因为 .data 是读/写的，所以在入口点之前调用 C 代码，您需要将 .data 从闪存复制到 ram 中的适当位置。链接描述文件描述了在闪存中保存 .data 的位置以及在 ram 中复制它的位置。启动代码，你可以命名任何你想要的startup.s，start.s，crt0.s等，在链接阶段填充变量，以便代码可以将.data复制到ram，可以将.bss归零，可以设置堆栈指针，以便您拥有一个堆栈（C 工作所需的另一项），然后该代码调用 C 入口点。这对于任何其他高级语言也是如此，如果没有别的，每个人都需要一个堆栈指针，所以你需要一些启动代码。

如果您查看我的一些示例，您会看到我也在为 avr 处理器编写链接器脚本和启动代码。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-27T06:02:02.173

在您的具体情况下，很难确切知道每个文件（rom.ld、ram.ld、scatter file、cstartup.s）的内容是什么。但是，假设它们的名称具有足够的描述性，我将让您了解它们的用途：

1- **rom.ld/ram.ld**：通过文件扩展名，这些是“链接器脚本”。这些文件告诉链接器如何将目标文件的每个内存部分放在哪里（请参阅[GNU LD](http://sourceware.org/binutils/docs/ld/)以了解有关链接器脚本及其语法的所有信息）

2- **cstartup.s**：同样，来自该文件的扩展名。它似乎是用汇编编写的代码。通常在此文件中，软件开发人员将在将控制权传递给您的主应用程序之前初始化该微控制器。此文件执行的操作示例如下：

*   设置 ARM 向量
*   配置振荡器频率
*   初始化易失性内存
*   调用 main()

3- **Scatter**：就我个人而言，我从未使用过这个文件。然而，它似乎是一个文件，用于控制应用程序的内存布局以及它在 micro 中的布局方式（[参见参考资料](http://www.keil.com/forum/14954/)）。这似乎是一个特定于 Keil 的文件，与任何其他链接描述文件没有什么不同。

# asp.net-mvc - 如何为 MVC 4 Api 制作更多 MapHttpRoutes

> ID：10766157
> 
> 赞同：14
> 
> 时间：2012-05-26T12:22:02.900
> 
> 标签：asp.net-mvc, asp.net-mvc-4, asp.net-web-api, asp.net-mvc-routing

我的 API atm 有 2 个 API 路由，但我想添加更多，而且我这样做的方式似乎相互覆盖，所以在我粘贴的代码中，只有`CreateUser`路由有效。

```
public static void RegisterRoutes(RouteCollection routes)
{
    routes.IgnoreRoute("{resource}.axd/{*pathInfo}");
    routes.MapHttpRoute(
        name: "CreateUser",
        routeTemplate: "api/{controller}/{cUser}",
        defaults: new
        {
            controller = "User",
            action = "CreateUser",
            cUser = RouteParameter.Optional
        });
    routes.MapHttpRoute(
        name: "AllGames",
        routeTemplate: "api/{controller}/{playerId}",
        defaults: new
        {
            controller = "Game",
            action = "GetAllGames",
            playerId = RouteParameter.Optional
        });
    routes.MapRoute(
        name: "Default",
        url: "{controller}/{action}/{id}",
        defaults: new
        {
            controller = "Home",
            action = "Index",
            id = UrlParameter.Optional
        });
} 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-26T14:46:23.907

我相信`api/{controller}/{cUser}`“CreateUser”路由中的模式与其他控制器操作匹配，因为它具有更通用的模式。在路由中使用特定的控制器名称作为“用户”（api/User/{cUser}）和“游戏”（api/Game/{playerId}）。更具体的路线应该在顶部，更通用的在底部。

```
routes.MapHttpRoute(
    name: "CreateUser",
    routeTemplate: "api/User/{cUser}",
    defaults: new
    {
        controller = "User",
        action = "CreateUser",
        cUser = RouteParameter.Optional
    }
);

routes.MapHttpRoute(
    name: "AllGames",
    routeTemplate: "api/Game/{playerId}",
    defaults: new
    {
        controller = "Game",
        action = "GetAllGames",
        playerId = RouteParameter.Optional
    }
); 
```

# ravendb - 嵌入式 RavenDB 和索引超过 5 个新文档

> ID：10766158
> 
> 赞同：0
> 
> 时间：2012-05-26T12:22:06.560
> 
> 标签：ravendb

我正在使用 RavenDB Embedded。构建 888。有照片集：

```
public class Photo
    {
        private Dictionary<string, VoteDictionaryValue> _votes = new Dictionary<string, VoteDictionaryValue>();

        public Photo()
        {
            Created = DateTime.Now;
        }

        public string Id { get; set; }
        public string Title { get; set; }
        public string UserId { get; set; }
        public string Image { get; set; }
        public DateTime Created { get; private set; }

        public Dictionary<string, VoteDictionaryValue> Votes
        {
            get { return _votes; }
            protected set { _votes = value; }
        }
} 
```

有索引：

```
public class PhotosSortByCreated : AbstractIndexCreationTask<Photo>
    {
        public PhotosSortByCreated()
        {
            Map = photos => from photo in photos
                            select new {photo.Created};

            Store(x => x.Created, FieldStorage.No);
            Sort(x => x.Created, SortOptions.String);
        }
    } 
```

和查询：

```
RavenQueryStatistics stat;

var query = from photo in RavenSession.Query<Photo>()
                        orderby photo.Created descending
                        select photo;

var result = query.Statistics(out stat).Skip(page*pageSize).Take(pageSize).Customize(x => x.WaitForNonStaleResults(TimeSpan.FromSeconds(3)))); 
```

一张一张地添加10张照片。

通过这个查询，我只得到前 5-6 个。

所有新添加的照片都不会返回。

池重启后，我可以在 ravenDB 停止索引它们之前添加 5-6 张新照片。

所有添加的照片都保存在数据库中，但它们没有被索引。

为什么？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T13:44:06.890

添加：

```
RavenSession.Query<Photo>().Customize(x=>x.WaitForNonStaleResultsAsOfNow()) 
```

怎么了？

# pdf - 表格检测算法

> ID：10766161
> 
> 赞同：0
> 
> 时间：2012-05-26T12:22:44.990
> 
> 标签：pdf, information-extraction

## 语境

我有一堆 PDF 文件。其中一些被扫描（即图像）。它们由文字+图片+表格组成。

我想将表格转换为 CSV 文件。

## 当前计划：

1) 运行 Tesseract OCR 以获取所有文档的文本。

2）？？？运行某种类型的表检测算法？？？

3）提取行/列/单元格，以及其中的文本。

## 问题：

是否有一些标准的“表提取算法”可以使用？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T07:13:40.360

Abbyy Fine Reader 包括表格检测，将是最简单的方法。它可以扫描、导入 PDF、TIFF 等。当自动检测失败时，您还可以手动调整表格和列。

www.abbyy.com - 您应该可以下载试用版，您还会发现 OCR 结果比 Tesseract 准确得多，这也将为您节省大量时间。

由于有太多不同类型的表格需要处理，因此尝试自己编写一些东西会受到打击。IE。有线条，没有线条，阴影，多行，不同的对齐方式，页眉，页脚等。

祝你好运。

# c++ - qt 中的事件池

> ID：10766166
> 
> 赞同：0
> 
> 时间：2012-05-26T12:23:23.503
> 
> 标签：c++, qt, event-handling

我正在开发一个 Qt 应用程序，并且在某些时候我有一个类（我在这里将其命名为“引擎”）来管理程序：它有一个带有超时的信号，这使得该类可以绘制并改进应用程序逻辑。此外，它接收从 QGraphicsScene 捕获的事件。

每个引擎“滴答”，在场景上调用 update()，根据应用进化更新绘图。

自然，我希望绘图与事件的反应同步，否则，可能会在事件的反应破坏同一对象时绘制某个对象，从而导致 SegFault。

我尝试在引擎上使用队列，这样我只会让引擎在更新的特定位置对这些事件做出反应，从而不会干扰绘图部分。

出现了两个问题：

1.  我无法复制 QGraphicsEvent。显然，复制操作员是私有的（无论如何我认为这是有充分理由的）。
2.  当类在处理事件时，在绘制之前，也可能会出现一个新事件，这可能是“坏”的，因为它没有同步

考虑到这种情况，有什么办法可以解决这种情况吗？Qt中是否有任何标准程序？我的意思是，我如何确保绘图不会与应用程序的事件反应不同步？

# cocoa-touch - 使用不同视图和类上的按钮从主视图控制器触发视图切换

> ID：10766169
> 
> 赞同：1
> 
> 时间：2012-05-26T12:24:05.407
> 
> 标签：cocoa-touch, uiviewcontroller, delegation

我正在使用情节提要创建我的页面..每个页面都有自己的类...从 mainViewController，我使用滑动手势识别器管理视图更改...到目前为止一切顺利...但是我有某些页面会出现作为向上滑动并摆脱它们时的“弹出窗口”，用户单击 X 以删除视图...问题是这样做并从超级视图中释放视图会给我一个白屏，因为开关不是由 mainViewController 完成，因为视图是由弹出类发布的……我想我需要使用某种委托来做到这一点……但我的大脑只是不想沉迷于如何使用委托的事情，即使在阅读了它之后......

由于视图切换是在索引 1 上完成的，我想如果我将这些弹出窗口放在索引 2 上并释放它们，索引 1 处的视图仍然存在，但是.. 不.. ... 所以一开始在我的滑动手势功能中，我开始声明动画过程......然后我有一个开关......检查手势是否完成......左边将动画设置为 curlUP，右边将设置为 Curl down...这是切换后会发生什么...我还将***myView***放入***myViewTemp***，并在 switch..case 语句中将新视图添加到***myView*** ..

```
 if (myView.title == @"popup1") {
        [myView viewWillAppear:YES];
        [myViewTemp viewWillDisappear:NO];

        //     [myViewTemp.view removeFromSuperview];
        [self.view insertSubview:myView.view atIndex:2];

        [myViewTemp viewDidDisappear:NO];
        [myView viewDidAppear:YES];
        }     else {
                  [myView viewWillAppear:YES];
                  [myViewTemp viewWillDisappear:YES];

                  [myViewTemp.view removeFromSuperview];
                  [self.view insertSubview:myView.view atIndex:1];

                  [myView viewDidDisappear:YES];
                  [myViewTemp viewDidAppear:YES];
        }

        [UIView commitAnimations];

        } 
```

# c# - 如何等待多个异步 http 请求

> ID：10766172
> 
> 赞同：1
> 
> 时间：2012-05-26T12:24:26.890
> 
> 标签：c#, asynchronous

我想问一下如何等待多个异步http请求。

我的代码是这样的：

```
 public void Convert(XDocument input, out XDocument output)
    {
        var ns = input.Root.Name.Namespace;

        foreach (var element in input.Root.Descendants(ns + "a"))
        {
            Uri uri = new Uri((string)element.Attribute("href"));

            var wc = new WebClient();
            wc.OpenReadCompleted += ((sender, e) =>
            {
                element.Attribute("href").Value = e.Result.ToString();
            }
            );
            wc.OpenReadAsync(uri);
        }

        //I'd like to wait here until above async requests are all completed.
        output = input;  
    } 
```

有人知道解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T13:15:09.570

[Scott Hanselman](http://www.hanselman.com/blog/BackToParallelBasicsDontBlockYourThreadsMakeAsyncIOWorkForYou.aspx)有一篇文章描述了如何进行非阻塞请求。滚动到它的末尾，有一个`public Task<bool> ValidateUrlAsync(string url)`方法。

你可以像这样修改它（响应阅读可能更健壮）

```
public Task<string> GetAsync(string url)
{
    var tcs = new TaskCompletionSource<string>();
    var request = (HttpWebRequest)WebRequest.Create(url);
    try
    {
        request.BeginGetResponse(iar =>
        {
            HttpWebResponse response = null;
            try
            {
                response = (HttpWebResponse)request.EndGetResponse(iar);
                using(var reader = new StreamReader(response.GetResponseStream()))
                {
                    tcs.SetResult(reader.ReadToEnd());
                }                    
            }
            catch(Exception exc) { tcs.SetException(exc); }
            finally { if (response != null) response.Close(); }
        }, null);
    }
    catch(Exception exc) { tcs.SetException(exc); }
    return tsc.Task; 
} 
```

所以有了这个，你就可以像这样使用它

```
var urls=new[]{"url1","url2"};
var tasks = urls.Select(GetAsync).ToArray();
var completed = Task.Factory.ContinueWhenAll(tasks,
                    completedTasks =>{
                                          foreach(var result in completedTasks.Select(t=>t.Result))
                                          {
                                              Console.WriteLine(result);
                                          }
                                      });
completed.Wait();
//anything that follows gets executed after all urls have finished downloading 
```

希望这能让你朝着正确的方向前进。

PS。这可能在不使用 async/await 的情况下尽可能清晰

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T12:47:14.773

考虑使用[延续传递风格](http://en.wikipedia.org/wiki/Continuation-passing_style)。如果您可以像这样重组您的 Convert 方法，

```
public void ConvertAndContinueWith(XDocument input, Action<XDocument> continueWith)
{
    var ns = input.Root.Name.Namespace;
    var elements = input.Root.Descendants(ns + "a");
    int incompleteCount = input.Root.Descendants(ns + "a").Count;
    foreach (var element in elements)
    {
        Uri uri = new Uri((string)element.Attribute("href"));

        var wc = new WebClient();
        wc.OpenReadCompleted += ((sender, e) =>
        {
            element.Attribute("href").Value = e.Result.ToString();
            if (interlocked.Decrement(ref incompleteCount) == 0)
               // This is the final callback, so we can continue executing.
               continueWith(input);
        }
        );
        wc.OpenReadAsync(uri);
    }
} 
```

然后像这样运行该代码：

```
XDocument doc = something;
ConvertAndContinueWith(doc, (finishedDocument) => {
    // send the completed document to the web client, or whatever you need to do
}); 
```

# c# - 通过代码设置图像位置

> ID：10766176
> 
> 赞同：0
> 
> 时间：2012-05-26T12:24:54.900
> 
> 标签：c#, silverlight, image

我想通过代码设置图像位置以适合按钮（见截图）。但我无法解决。在 WinForms 中这很容易，但在 Silverlight 中我显然不能只设置 X 和 Y。

```
 public void LockControls()
    {
        int LockIndex = 0;

        DependencyObject myUserControl = LayoutRoot;
        foreach (var button in FindAll<Button>(myUserControl))
        {
            if (button.Tag != null)
            {
                Image LockedIcon = new Image();

                LockedIcon.Width = 20;
                LockedIcon.Height = 20;
                //LockedIcon.Margin = new Thickness(0,0,0,0);

                LockedIcon.Source = new BitmapImage(new Uri("images/LockedIconx20alpha.png", UriKind.Relative));
                LockedIcon.Name = "Lockie" + LockIndex;

                LayoutRoot.Children.Add(LockedIcon);
                button.Tag = "Locked" + LockIndex;
                LockIndex++;

            }
        }

    } 
```

[http://puu.sh/wS7g](http://puu.sh/wS7g) 屏幕截图显示了图像位置（锁定），但我不明白当前位置是如何设置的。澄清一下，我想将位置设置为“0%”按钮

在此先感谢，杰克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T14:57:16.920

这不是正确的做法。如果我理解正确，您想在按钮顶部叠加图像以防止用户使用它。它行不通。

为此，您必须了解[Silverlight 的布局系统](http://msdn.microsoft.com/en-us/library/cc645025%28v=vs.95%29.aspx)：控件在测量和安排事件期间由引擎布局。尝试像这样覆盖图像将需要您连接这些事件，或者派生 Button 类并覆盖 Arrange 方法以覆盖图像。

但这不会阻止用户使用该按钮，因为该按钮本身并没有被禁用，人们只需“Tab”进入它，然后激活它。

相反，我建议您使用按钮样式，并覆盖，例如，禁用状态以覆盖您的锁定图像。[此处描述了按钮样式。](http://msdn.microsoft.com/en-us/library/cc278069%28v=vs.95%29.aspx) 您所要做的就是替换：

```
<Rectangle x:Name="DisabledVisualElement" RadiusX="3" RadiusY="3" Fill="#FFFFFFFF" Opacity="0" IsHitTestVisible="false" /> 
```

经过

```
<Image x:Name="DisabledVisualElement" IsHitTestVisible="false" Opacity="0" Width="20" Height="20" Source="images/LockedIconx20alpha.png" /> 
```

并将以下不透明度设置为1：

```
 <vsm:VisualState x:Name="Disabled">
      <Storyboard>
          <DoubleAnimation Duration="0" Storyboard.TargetName="DisabledVisualElement" Storyboard.TargetProperty="Opacity" To=".55"/>
      </Storyboard>
  </vsm:VisualState> 
```

在您的按钮上设置此样式（我假设您知道如何执行此操作），然后当您需要锁定按钮时，将其设置为禁用，您的图像将自动放在顶部，您的按钮将不可点击。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T12:39:25.497

一般来说，如果要任意设置 Image 位置，则应将 Image 控件托管在 Canvas 容器中。

但是，在您的情况下，您应该根据是否显示锁的需要来真正更改 Button 的 Content 元素。

```
<UserControl  DataContext="{Binding Main, Source={StaticResource Locator}} 

        <Grid.Resources>
            <converters:VisibilityConverter x:Key="VisibilityConverter" />
        </Grid.Resources>

        <Button Width="100" Height="23" IsEnabled="{Binding IsControlsEnabled}">
            <Button.Content>
                <StackPanel Orientation="Horizontal">
                    <Image Source="lock.png" Margin="10,0,10,0"
                           Visibility="{Binding IsControlsEnabled, Converter={StaticResource VisibilityConverter}}"/>
                    <TextBlock Text="Button"/>
                </StackPanel>
            </Button.Content>
        </Button> 
```

此外，您不应该真的在 Silverlight 中编写您的问题中的那种代码。了解如何使用数据绑定。它非常强大。只需将`IsEnabled`Button 的属性绑定到公开的属性即可。

使用 MVVM Light 工具包执行此操作的示例（我建议您学习用于 Silverlight/WPF 开发的 MVVM 模式）：视图模型：

```
public class MainViewModel : ViewModelBase
{

  private bool isControlsEnabled;
  public bool IsControlsEnabled
  {
    get { return isControlsEnabled; }
    set
    {
      if (IsControlsEnabled.Equals(value)) return;
      isControlsEnabled = value;
      RaisePropertyChanged(() => IsControlsEnabled);
    }
    }
} 
```

可见性转换器：

```
 public class VisibilityConverter : IValueConverter
  {
    public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
      return (bool)value ? Visibility.Collapsed : Visibility.Visible;
    }

    public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
      throw new NotImplementedException();
    }
  } 
```

然后您可以简单地启用/禁用所有绑定的控件，例如使用 CheckBox：

```
<CheckBox IsChecked="{Binding IsControlsEnabled, Mode=TwoWay}" Content="Controls are enabled"/> 
```

# java - 进度对话框阻塞

> ID：10766177
> 
> 赞同：0
> 
> 时间：2012-05-26T12:25:00.570
> 
> 标签：java, android, dialog, progressdialog

通过删除阻塞调用解决了未显示的进度对话框。

我的目的是从互联网下载大量数据并让最终用户了解下载状态，但是我必须等待数据完成下载才能继续下一步，因此我必须阻止代码执行。

阻塞会导致进度对话框不显示或冻结。我需要提示以最佳方式执行这些任务。因为我的任务很简单，所以实现任务完成侦听器对我来说似乎有点矫枉过正，我想知道是否还有其他方法可以解决我的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T13:46:47.990

你可以使用这个：

```
@Override
protected void onPreExecute() {

dialog= ProgressDialog.show(YourActivity.this, "", "MessageYouWantToDisplay");

}       

@Override
protected void onPostExecute(T result) {

dialog.dismiss();

} 
```

您可以通过键入以下内容调用扩展 AsycTask 的类：

```
 new NameOFClass().execute(); 
```

首先尝试这个作为测试，然后在 doInBackground 方法中放置一个 Thread.sleep() 以了解它是如何工作的。然后在你的项目中使用你的真实方法、数据等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T12:28:40.170

试试这个：：：

```
 @Override
    protected void onPreExecute() {
        dialog = new ProgressDialog(YourActivity.this);
        dialog.setMessage("Progress start");
        dialog.show();
        Log.d(TAG, "Showing dialog");
    }

    @Override
    protected void onPostExecute(T result) {
        dialog.dismiss();
        Log.d(TAG, "Dismissing dialog");
    } 
```

# hibernate - 休眠中嵌入属性的多个实例，没有覆盖名称

> ID：10766182
> 
> 赞同：0
> 
> 时间：2012-05-26T12:25:23.407
> 
> 标签：hibernate, nhibernate, jpa, fluent-nhibernate

在 Fluent N-Hibernate + N-Hibernate 中，当您创建和使用组件类时，您不需要为用户类中的每个成员显式指定名称。系统默认或按照某种约定创建具有以下格式的列。

```
[member name.particular component element name] 
```

我想知道使用JPA + Hibernate时是否存在这样的策略，这样您就不必显式指定每个列名？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T05:11:39.837

Hibernate 存在一个命名约定我将此配置放在我的 persistence.xml 文件中，一切都按我的意愿进行。

```
 <property name="hibernate.ejb.naming_strategy"
                  value="org.hibernate.cfg.DefaultComponentSafeNamingStrategy"/> 
```

# php - 自定义灯箱，下一个按钮不会多次使用

> ID：10766185
> 
> 赞同：2
> 
> 时间：2012-05-26T12:25:45.967
> 
> 标签：php, jquery, gallery

我的画廊有缩略图，它们都有对应的同名较大图像，我使用 php 将每个拇指动态链接到其较大的图像。然后我使用jQuery使用href属性显示更大的图像，以获得大图像的路径。当灯箱弹出并单击下一个时，它应该允许我浏览并查看每个图像，而不是当仅单击下一个时，它会转到下一个图像，但如果再次单击下一个，它会显示相同的图像。

我附上了图片来给出一个基本的想法，因为我不擅长解释。

在我的画廊中动态加载的缩略图： ![](../Images/fda070f40810b766a70e9354dda505e0.png)

单击图库中的最后一个拇指时，会弹出（建筑物的图片）： ![](../Images/101e9d41cf5c6fd2603d5dc436b15f2b.png)

单击下一步时，会显示此照片（破裂的气泡），但是单击多次下一步时，仍会保留此照片（破裂的气泡）： ![](../Images/77df6623aeeb8d440891d9adff1ef081.png)

我的代码：

```
var Picture = $('.lightbox'); // path to full sized picture the class lightbox identifies a link <a>
var pic = Picture.index(this) //finds index
var num = Picture.length;//finds the total amount of thumbnails

$('#next').click(function(e){ //when next is click prevent default
    e.preventDefault(); 

    if(pic<(num-1)){ 
    var ntx = (pic)+1;
}
if(pic == (num-1)){ 
    ntx= 0;
}
var nxt = Picture[ntx]; 
var img = $('.box img'); 
img.remove();
$('.box').hide(); // removes the current image

$('.box').append('<img align="center" id="motown" src="'+nxt+'" style=" z-index:52px;" > '); //appends the next image and sets the div container to hidden and hide the new image

    }); 
```

我可以在我的代码中添加什么以使下一个按钮每次都能正常工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T14:40:19.173

尝试将相同的rel添加到同一组中的所有图像，这就是我所做的

```
<a href="first_img.jpg" rel="lightbox[mygroup]">Trigger Text or Image Tag</a>
<a href="second_img.jpg" rel="lightbox[mygroup]"></a>
<a href="third_img.jpg" rel="lightbox[mygroup]"></a>
<a href="forth_img.jpg" rel="lightbox[mygroup]"></a>
<a href="fifth_img.jpg" rel="lightbox[mygroup]"></a> 
```

# c# - 具有正则表达式属性的 Asp.Net MVC 3.0 模型本地化

> ID：10766186
> 
> 赞同：1
> 
> 时间：2012-05-26T12:25:45.897
> 
> 标签：c#, asp.net-mvc-3, localization, data-annotations, validationattribute

我在自定义 DataAnnotationsModelMetadataProvider 类中编写了自定义错误消息本地化逻辑。它适用于内置 StringLengthAttribute 或 RequiredAttribute 验证错误消息。但是我在自定义派生的 RegularExpressionAttribute 类时遇到了问题。我使用的逻辑如下所示：

```
public class AccountNameFormatAttribute : RegularExpressionAttribute {
    public AccountNameFormatAttribute()
      : base(Linnet.Core.Shared.RegExPatterns.AccountNamePattern) {

    }   

    public override string FormatErrorMessage(string name) {
      return string.Format("{0} field must contain only letters, numbers or | . | - | _ | characters.", name);
    }
} 
```

* * *

```
public class SignUpViewModel {
    [AccountNameFormat()]
    [StringLength(16, MinimumLength = 3)]
    [Required]
    [DisplayName("Account Name")]
    public string AccountName { get; set; }

    [Required]
    [DisplayName("Password")]
    [StringLength(32, MinimumLength = 6)]
    [DataType(System.ComponentModel.DataAnnotations.DataType.Password)]
    public string Password { get; set; }

    // .... and other properties, quite similar ... //
} 
```

* * *

```
public class MvcDataAnnotationsModelValidatorProvider : DataAnnotationsModelValidatorProvider {

    protected override IEnumerable<ModelValidator> GetValidators(ModelMetadata metadata, ControllerContext context, IEnumerable<Attribute> attributes) {
      MyMvcController myMvcController = context.Controller as MyMvcController; /* custom mvc controller, that contains methods for wcf service activations and common properties. */
      if (myMvcController == null) {
        return base.GetValidators(metadata, context, attributes);
      }
      List<Attribute> newAttributes = new List<Attribute>();
      foreach (Attribute att in attributes) {
        if (att.GetType() != typeof(ValidationAttribute) && !att.GetType().IsSubclassOf(typeof(ValidationAttribute))) {
          // if this is not a validation attribute, do nothing.
          newAttributes.Add(att);
          continue;
        }
        ValidationAttribute validationAtt = att as ValidationAttribute;
        if (!string.IsNullOrWhiteSpace(validationAtt.ErrorMessageResourceName) && validationAtt.ErrorMessageResourceType != null) {
          // if resource key and resource type is already set, do nothing.
          newAttributes.Add(validationAtt);
          continue;
        }
        string translationKey = "MvcModelMetaData.ValidationMessages." + metadata.ModelType.Name + (metadata.PropertyName != null ? "." + metadata.PropertyName : string.Empty) + "." + validationAtt.GetType().Name;
        string originalText = validationAtt.FormatErrorMessage("{0}"); /* non-translated default english text */

        // clonning current attiribute into a new attribute 
        // not to ruin original attribute for later usage 
        // using Activator.CreateInstance and then mapping with AutoMapper inside..
        var newAtt = this.CloneValidationAttiribute(validationAtt);  

        // fetching translation from database via WCF service...
        // At this point, i can see error strings are always translated.
        // And it works perfect with [Required], [StringLength] and [DataType] attributes.
        // But somehow it does not work with my AccountNameFormatAttribute on the web page, even if i give it the translated text as expected..
        // Even if its ErrorMessage is already set to translated text, 
        // it still displays the original english text from the overridden FormatErrorMessage() method on the web page. 
        // It is the same both with client side validation or server side validation.
        // Seems like it does not care the ErrorMessage that i manually set.
        newAtt.ErrorMessage = myMvcController.Translations.GetTranslation(translationKey, originalText);

        newAttributes.Add(newAtt);
      }
      IEnumerable<ModelValidator> result = base.GetValidators(metadata, context, newAttributes);
      return result;
    }

    private ValidationAttribute CloneValidationAttiribute(ValidationAttribute att) {
      if (att == null) {
        return null;
      }
      Type attType = att.GetType();
      ConstructorInfo[] constructorInfos = attType.GetConstructors();
      if (constructorInfos == null || constructorInfos.Length <= 0) {
        // can not close..
        return att;
      }
      if (constructorInfos.Any(ci => ci.GetParameters().Length <= 0)) {
        // clone with no constructor paramters.
        return CloneManager.CloneObject(att) as ValidationAttribute;
      }

      // Validation attributes that needs constructor paramters...
      if (attType == typeof(StringLengthAttribute)) {
        int maxLength = ((StringLengthAttribute)att).MaximumLength;
        return CloneManager.CloneObject(att, maxLength) as StringLengthAttribute;
      }

      return att;
    }
} 
```

* * *

```
public class CloneManager {

    public static object CloneObject(object input) {
      return CloneObject(input, null);
    }

    public static object CloneObject(object input, params object[] constructorParameters) {
      if (input == null) {
        return null;
      }
      Type type = input.GetType();
      if (type.IsValueType) {
        return input;
      }
      ConstructorInfo[] constructorInfos = type.GetConstructors();
      if (constructorInfos == null || constructorInfos.Length <= 0) {
        throw new LinnetException("0b59079b-3dc4-4763-b26d-651bde93ba56", "Object type does not have any constructors.", false);
      }
      if ((constructorParameters == null || constructorParameters.Length <= 0) && !constructorInfos.Any(ci => ci.GetParameters().Length <= 0)) {
        throw new LinnetException("f03be2b9-b629-4a72-b025-c7a87924d9a4", "Object type does not have any constructor without parameters.", false);
      }
      object newObject = null;
      if (constructorParameters == null || constructorParameters.Length <= 0) {
        newObject = Activator.CreateInstance(type);
      } else {
        newObject = Activator.CreateInstance(type, constructorParameters);
      }
      return MapProperties(input, newObject);
    }

    private static object MapProperties(object source, object destination) {
      if (source == null) {
        return null;
      }
      Type type = source.GetType();
      if (type != destination.GetType()) {
        throw new LinnetException("e67bccfb-235f-42fc-b6b9-55f454c705a8", "Use 'MapProperties' method only for object with same types.", false);
      }
      if (type.IsValueType) {
        return source;
      }
      var typeMap = AutoMapper.Mapper.FindTypeMapFor(type, type);
      if (typeMap == null) {
        AutoMapper.Mapper.CreateMap(type, type);
      }
      AutoMapper.Mapper.Map(source, destination, type, type);
      return destination;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T09:27:31.973

您可以使用我的 Griffin.MvcContrib 更轻松地进行本地化。

1.  使用nuget下载`griffin.mvccontrib`
2.  [按照此处](http://blog.gauffin.org/2011/09/easy-model-and-validation-localization-in-asp-net-mvc3/)所述定义字符串表。
3.  `[RegularExpression]`直接在视图模型中使用常规属性。

将此添加到您的字符串表中：

```
SignUpViewModel_AccountName_RegularExpression "{0} field must contain only letters, numbers or | . | - | _ | characters. 
```

而已..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T21:11:35.307

似乎我的逻辑实际上是一种奇怪的方法。

我发现为每种类型的验证属性制作自定义 DataAnnotationsModelValidators。然后在 Validate() 和 GetClientValidationRules() 方法中翻译 ErrorMessages。

```
public class MvcRegularExpressionAttributeAdapter : RegularExpressionAttributeAdapter {
    public MvcRegularExpressionAttributeAdapter(ModelMetadata metadata, ControllerContext context, RegularExpressionAttribute attribute)
      : base(metadata, context, attribute) {
    }

    public override IEnumerable<ModelClientValidationRule> GetClientValidationRules() {
      return MvcValidationResultsTranslation.TranslateClientValidationRules(base.GetClientValidationRules(), this.Metadata, this.ControllerContext, this.Attribute);
    }

    public override IEnumerable<ModelValidationResult> Validate(object container) {
      return MvcValidationResultsTranslation.TranslateValidationResults(base.Validate(container), this.Metadata, this.ControllerContext, this.Attribute);
    }
} 
```

* * *

```
 public class MvcValidationResultsTranslation {
    public static IEnumerable<ModelClientValidationRule> TranslateClientValidationRules(IEnumerable<ModelClientValidationRule> validationRules, ModelMetadata metadata, ControllerContext context, ValidationAttribute validationAttribute) {
      if (validationRules == null) {
        return validationRules;
      }
      MvcController mvcController = context.Controller as MvcController;
      if (mvcController == null) {
        return validationRules;
      }
      if (!string.IsNullOrWhiteSpace(validationAttribute.ErrorMessageResourceName) && validationAttribute.ErrorMessageResourceType != null) {
        // if resource key and resource type is set, do not override..         
        return validationRules;
      }
      string translatedText = GetTranslation(metadata, mvcController, validationAttribute);
      foreach (var validationRule in validationRules) {
        List<string> msgParams = new List<string>();
        msgParams.Add(!string.IsNullOrEmpty(metadata.DisplayName) ? metadata.DisplayName : metadata.PropertyName);
        if (validationRule.ValidationParameters != null) {
          msgParams.AddRange(validationRule.ValidationParameters.Where(p => p.Value.GetType().IsValueType || p.Value.GetType().IsEnum).Select(p => p.Value.ToString()));
        }
        validationRule.ErrorMessage = string.Format(translatedText, msgParams.ToArray());
      }
      return validationRules;
    }    

    public static IEnumerable<ModelValidationResult> TranslateValidationResults(IEnumerable<ModelValidationResult> validationResults, ModelMetadata metadata, ControllerContext context, ValidationAttribute validationAttribute) {
      if (validationResults == null) {
        return validationResults;
      }
      MvcController mvcController = context.Controller as MvcController;
      if (mvcController == null) {
        return validationResults;
      }
      if (!string.IsNullOrWhiteSpace(validationAttribute.ErrorMessageResourceName) && validationAttribute.ErrorMessageResourceType != null) {
        // if resource key and resource type is set, do not override..         
        return validationResults;
      }
      string translatedText = GetTranslation(metadata, mvcController, validationAttribute);
      List<ModelValidationResult> newValidationResults = new List<ModelValidationResult>();
      foreach (var validationResult in validationResults) {
        ModelValidationResult newValidationResult = new ModelValidationResult();
        newValidationResult.Message = string.Format(translatedText, (!string.IsNullOrEmpty(metadata.DisplayName) ? metadata.DisplayName : metadata.PropertyName));
        newValidationResults.Add(newValidationResult);
      }
      return newValidationResults;
    }
} 
```

# scala - 按需演员获取或创建

> ID：10766187
> 
> 赞同：23
> 
> 时间：2012-05-26T12:25:46.183
> 
> 标签：scala, akka

我可以用 来创建演员`actorOf`并用`actorFor`. 我现在想通过一些演员得到一个演员`id:String`，如果它不存在，我希望它被创造出来。像这样的东西：

```
 def getRCActor(id: String):ActorRef = {
    Logger.info("getting actor %s".format(id))
    var a = system.actorFor(id)
    if(a.isTerminated){
      Logger.info("actor is terminated, creating new one")
      return system.actorOf(Props[RC], id:String)
    }else{
      return a
    }
   } 
```

但这并不像`isTerminated`往常一样`actor name 1 is not unique!`有效，第二次通话我得到了例外。我想我在这里使用了错误的模式。有人可以帮助如何实现这一目标吗？我需要

*   按需创建演员
*   按 id 查找演员，如果不存在则创建他们
*   破坏能力，因为我不知道我是否会再次需要它

我应该为此使用调度程序还是路由器？

**解决方案** 正如建议的那样，我使用了一个具体的主管，它将可用的参与者保存在地图中。可以要求提供他的一个孩子。

```
class RCSupervisor extends Actor {

  implicit val timeout = Timeout(1 second)
  var as = Map.empty[String, ActorRef]

  def getRCActor(id: String) = as get id getOrElse {
    val c = context actorOf Props[RC]
    as += id -> c
    context watch c
    Logger.info("created actor")
    c
  }

  def receive = {

    case Find(id) => {
      sender ! getRCActor(id)
    }

    case Terminated(ref) => {
      Logger.info("actor terminated")
      as = as filterNot { case (_, v) => v == ref }
    }
  }
} 
```

他的同伴对象

```
object RCSupervisor {

  // this is specific to Playframework (Play's default actor system)
  var supervisor = Akka.system.actorOf(Props[RCSupervisor])

  implicit val timeout = Timeout(1 second)

  def findA(id: String): ActorRef = {
    val f = (supervisor ? Find(id))
    Await.result(f, timeout.duration).asInstanceOf[ActorRef]
  }
  ...
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-26T16:16:36.940

我已经很久没有使用akka了，但是actors的*创建*者默认是他们的*supervisor*。因此，父母可以听取他们的终止；

```
var as = Map.empty[String, ActorRef] 
def getRCActor(id: String) = as get id getOrElse {
  val c = context actorOf Props[RC]
  as += id -> c
  context watch c
  c
} 
```

但显然你需要注意他们的终止；

```
def receive = {
  case Terminated(ref) => as = as filterNot { case (_, v) => v == ref } 
```

这是一个解决方案吗？我必须说我没有完全理解*“终止总是正确的 => 演员姓名 1 不是唯一的！”的意​​思。*

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-05-27T07:03:26.413

演员只能由他们的父母创建，根据您的描述，我假设您正试图让系统创建一个非顶级演员，这总是会失败。你应该做的是向父母发送一条消息说“把那个孩子给我”，然后父母可以检查它当前是否存在，是否健康等，可能创建一个新的，然后以适当的方式回复结果消息。

重申这一点非常重要：get-or-create 只能由直接父级完成。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-09T19:49:05.760

我基于 oxbow_lakes 的代码/建议来解决这个问题，但我没有创建所有子角色的简单集合，而是使用（双向）地图，如果子角色的数量很大，这可能是有益的。

```
import play.api._
import akka.actor._
import scala.collection.mutable.Map 

trait ResponsibleActor[K] extends Actor {
  val keyActorRefMap: Map[K, ActorRef] = Map[K, ActorRef]()
  val actorRefKeyMap: Map[ActorRef, K] = Map[ActorRef, K]()

  def getOrCreateActor(key: K, props: => Props, name: => String): ActorRef = {
    keyActorRefMap get key match {
      case Some(ar) => ar
      case None =>  {
        val newRef: ActorRef = context.actorOf(props, name)
        //newRef shouldn't be present in the map already (if the key is different)
        actorRefKeyMap get newRef match{
          case Some(x) => throw new Exception{}
          case None =>
        }
        keyActorRefMap += Tuple2(key, newRef)
        actorRefKeyMap += Tuple2(newRef, key)
        newRef
      }
    }
  }

  def getOrCreateActorSimple(key: K, props: => Props): ActorRef = getOrCreateActor(key, props, key.toString)

  /**
   * method analogous to Actor's receive. Any subclasses should implement this method to handle all messages
   * except for the Terminate(ref) message passed from children
   */
  def responsibleReceive: Receive

  def receive: Receive = {
    case Terminated(ref) => {
      //removing both key and actor ref from both maps
      val pr: Option[Tuple2[K, ActorRef]] = for{
        key <- actorRefKeyMap.get(ref)
        reref <- keyActorRefMap.get(key)
      } yield (key, reref)

      pr match {
        case None => //error
        case Some((key, reref)) => {
          actorRefKeyMap -= ref
          keyActorRefMap -= key
        }
      }
    }
    case sth => responsibleReceive(sth)
  }
} 
```

要使用此功能，您继承`ResponsibleActor`并实现`responsibleReceive`. 注意：此代码尚未经过彻底测试，可能仍有一些问题。我省略了一些错误处理以提高可读性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-03-15T16:01:38.413

目前，您可以在 Akka 中使用 Guice 依赖注入，这在[http://www.lightbend.com/activator/template/activator-akka-scala-guice](http://www.lightbend.com/activator/template/activator-akka-scala-guice)中有说明。您必须为演员创建一个随附的模块。然后，在其配置方法中，您需要创建一个与参与者类和一些属性的命名绑定。属性可能来自配置，例如，为参与者配置了路由器。您还可以通过编程方式将路由器配置放在那里。任何你需要使用@Named("actorname") 来引用你注入的actor 的地方。配置的路由器将在需要时创建一个actor实例。

# java - 构建此正则表达式的问题 [1,2,3]

> ID：10766192
> 
> 赞同：1
> 
> 时间：2012-05-26T12:26:31.337
> 
> 标签：java, regex

我在构建以下正则表达式时遇到问题：[1,2,3,4]

我找到了解决方法，但我认为它很难看

```
String stringIds = "[1,2,3,4]";
stringIds = stringIds.replaceAll("\\[", ""); 
stringIds = stringIds.replaceAll("\\]", "");
String[] ids = stringIds.split("\\,"); 
```

有人可以帮我建立一个正则表达式，我可以在拆分函数中使用它谢谢你的帮助

编辑：我想从这个字符串 "[1,2,3,4]" 到一个有 4 个条目的数组。条目是字符串中的 4 个数字，所以我需要消除“[”，“]”和“，”。“，”不是问题。第一个和最后一个数字包含 [ 或 ]。所以我需要用replaceAll修复。但我认为如果我使用拆分“，”的正则表达式，我也可以传递一个消除“[”“]”的正则表达式。但我不知道，这个正则表达式应该是什么样的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T12:55:35.967

这几乎就是你要找的：

```
 String q = "[1,2,3,4]";
    String[] x = q.split("\\[|\\]|,"); 
```

问题在于，由于前导开括号，它会在数组的开头产生一个额外的元素。你可能无法用一个没有恶作剧的正则表达式做你想做的事。如果您*知道*字符串始终以左括号开头，则可以先将其删除。

正则表达式本身的意思是“（拆分）任何开括号，或任何闭括号，或任何逗号。”

标点符号在正则表达式中经常具有额外的含义。双前导反斜杠......呃，第一个反斜杠告诉 Java 字符串解析器下一个反斜杠不是特殊字符（例如：\n 是换行符......）所以`\\`意味着“我想要一个对上帝诚实的反斜杠”。下一个反斜杠告诉正则表达式引擎*下一个*字符（`[`例如）*不是*特殊的正则表达式字符。这让我哈哈大笑。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-26T13:03:46.743

也许是子字符串`[`，`]`从头到尾，然后将其余部分拆分为`,`

```
String stringIds = "[1,2,3,4]";
String[] ids = stringIds.substring(1,stringIds.length()-1).split(","); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-26T12:31:37.120

在我看来，您正在尝试创建一个数组（不确定您从哪里得到“正则表达式”；这意味着不同的东西）。在这种情况下，您需要：

```
String[] ids = {"1","2","3","4"}; 
```

如果它特别是您想要的整数数组，那么请改用：

```
int[] ids = {1,2,3,4}; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-26T12:59:29.567

您的问题不适合按分隔符拆分。通过匹配整数本身来分割更安全、更通用：

```
static String[] nums(String in) {
  final Matcher m = Pattern.compile("\\d+").matcher(in);
  final List<String> l = new ArrayList<String>();
  while (m.find()) l.add(m.group());
  return l.toArray(new String[l.size()]);
}
public static void main(String args[]) {
  System.out.println(Arrays.toString(nums("[1, 2, 3, 4]")));
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-26T12:32:16.487

如果第一行您的代码如下：

```
String stringIds = "[1,2,3,4]"; 
```

并且您正在尝试遍历所有数字项，那么以下代码片段只能工作：

```
try {
    Pattern regex = Pattern.compile("\\b(\\d+)\\b", Pattern.MULTILINE);
    Matcher regexMatcher = regex.matcher(subjectString);
    while (regexMatcher.find()) {
        for (int i = 1; i <= regexMatcher.groupCount(); i++) {
            // matched text: regexMatcher.group(i)
            // match start: regexMatcher.start(i)
            // match end: regexMatcher.end(i)
        }
    } 
} catch (PatternSyntaxException ex) {
    // Syntax error in the regular expression
} 
```

# jquery - Spring 3 jquery ajax 删除

> ID：10766195
> 
> 赞同：1
> 
> 时间：2012-05-26T12:26:42.613
> 
> 标签：jquery, ajax, spring, methods

我正在尝试使用 jquery 进行 ajax 删除，但收到 http 错误 400。我正在搜索，我发现 jquery 中的删除方法存在一些问题。

这是我的 js、控制器（spring 3）和来自 Chrome 的请求。

如果你现在有什么错误请告诉，或者给一些链接。

```
$.ajax({  
                url: 'additions/cancelUpload',  
                type: 'DELETE',  
                data: {filename : ui.draggable.get(0).file.name},  
                success: function (res) {  
                    alert(res);
                }  
            }); 
```

此处未通过执行：

```
@RequestMapping(value = "cancelUpload", produces="text/html")
    @ResponseBody
    public String cancelUpload(@RequestParam("filename")String filename, HttpSession session ){ 
... 
} 
```

要求：

```
请求网址：http://localhost:8080/WebStore/additions/cancelUpload
请求方法：删除
状态码：400 错误请求
请求标头view source
接受：*/*
接受字符集：windows-1251,utf-8;q=0.7,*;q=0.3
接受编码：gzip、deflate、sdch
接受语言：uk-UA,uk;q=0.8,ru;q=0.6,en-US;q=0.4,en;q=0.2
连接：保持活动
内容长度：17
内容类型：application/x-www-form-urlencoded
Cookie：JSESSIONID=A7DF5CB262C460961BC7B5C7DCB23052
主机：本地主机：8080
来源：http://localhost:8080
引用者：http://localhost:8080/WebStore/items?form
用户代理：Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/535.1 (KHTML, like Gecko) Chrome/13.0.782.112 Safari/535.1
1X-Requested-With:XMLHttpRequest

表单 Dataview URL 编码
文件名：6648.jpg

```

响应标头

```
连接：关闭
内容长度：1043
内容类型：text/html;charset=utf-8
日期：2012 年 5 月 26 日星期六 10:03:58 GMT
服务器：Apache-Coyote/1.1
X-TraceId:4fc0a8f8-46
X-TraceUrl:/insight/services/traces/4fc0a8f8-46?type=json

```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T18:00:52.963

我设法以 DELETE 的形式接收请求

```
 @RequestMapping(value = "cancelUpload", produces="text/html" method = RequestMethod.DELETE) 
```

但是这样做

```
$.ajax({  
            url: 'additions/cancelUpload',  
            type: 'POST',  
            data: {filename : ui.draggable.get(0).file.name, _method: 'DELETE'},  
            success: function (res) {  
                alert(res);
            }  
        }); 
```

[您可以在http://blog.springsource.org/2009/03/08/rest-in-spring-3-mvc/](http://blog.springsource.org/2009/03/08/rest-in-spring-3-mvc/)中阅读关于 _method: 'DELETE' 发布请求的参数

如果有人现在如何发送真正的删除 AJAX 请求。请告诉我

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-04-13T04:04:09.150

我以这种方式使用 JavaScript 发送了一个删除请求：

```
var delete = document.getElementById('#delete');
var url = "url";
var http = new XMLHttpRequest();    
var params = "";
delete.addEventListener('click', function() {
    http.open("DELETE", url, true);     
    http.setRequestHeader("Content-type", "application/json");
    http.onreadystatechange = function() {
        if(http.readyState == 4 && http.status == 200) {
            window.location = url;
        }
    }
    http.send(params);
}); 
```

以及控制器中的方法

```
@RequestMapping(value="url", method = RequestMethod.DELETE, produces = "application/json")
@ResponseBody
public ResponseEntity<String> delete() {
    return new ResponseEntity<String>(HttpStatus.OK);
} 
```

# javascript - 在 Node.js 中编译正则表达式规则？

> ID：10766196
> 
> 赞同：5
> 
> 时间：2012-05-26T12:27:03.893
> 
> 标签：javascript, regex, node.js

是否可以在 Node.js 中编译正则表达式规则以加快使用速度？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-26T12:29:03.593

V8 自动编译正则表达式。请参阅[http://www.scribd.com/doc/16921039/V8-Internals-Building-a-High-Performance-JavaScript-Engine](http://www.scribd.com/doc/16921039/V8-Internals-Building-a-High-Performance-JavaScript-Engine)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-26T12:29:58.803

Node.js 只是在 V8 上运行的 JavaScript，所以你真的只有 V8 提供的东西，即：

```
var r = new RegExp("abc", 'i'); 
```

V8 会做它自己的优化，甚至可能是在内联正则表达式上。

# android - Android将drawable附加到ListView的最后一项

> ID：10766198
> 
> 赞同：1
> 
> 时间：2012-05-26T12:27:07.983
> 
> 标签：android, listview, drawable, footer

无需赘述，我需要在 ListView 的最后一项底部附加一个可绘制对象。限制是我只能使用样式和主题来实现它。不允许使用 Java 代码。我也无法将任何项目添加到适配器的末尾。

我该怎么做？欢迎所有黑客攻击。谢谢！

*补充：或者也许可以通过xml将页脚视图附加到列表视图？*

# jslint - 如何使用 Jslint 纠正“文档在定义之前已使用”

> ID：10766201
> 
> 赞同：27
> 
> 时间：2012-05-26T12:27:58.533
> 
> 标签：jslint

*我在jsLint*中收到以下错误：

> 在定义之前使用了“文档”。

导致错误的行：

```
document.cookie = name + "=" + value + expires + "; path=/"; 
```

我明白为什么会发生这种情况，但我希望我的代码符合要求。

我该如何解决这个问题？

谢谢。

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-05-27T07:57:56.420

地方

```
/*jslint browser:true */ 
```

在函数体的开头。或者，或者，您可以使用

```
/*global document: false */ 
```

JSLint 用于检查任何 javascript 代码，并且`document`全局对象并不存在于任何地方，因此您必须手动告诉 JSLint 您的代码旨在在浏览器中执行，因此`document`定义了全局变量。例如，对于服务器端 javascript，JSLint 应该报告此错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T14:57:53.903

从 jslint 的网站，您可以了解 / *global* / 指令，该指令允许您设置假定在其他地方声明的变量。

这是一个示例（将其放在文件顶部）：

```
/\*global var1,var2,var3,var4,var5\*/ 
```

或者，在starjava的情况下：

```
/\*global document\*/ 
```

我实际上不确定是否需要`:true`or `:false`，但看起来它是从我在网站上阅读的内容中推荐的。[http://www.jslint.com/lint.html](http://www.jslint.com/lint.html)

确保初始全局语句与 位于同一行`'/\*'`，否则它会中断。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-07-29T10:30:52.137

如果您的所有 JS 代码都应该从浏览器运行，那么只需添加`--browser`标志。

```
jslint --browser my.js 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T03:00:15.937

如果您使用的是节点可以添加以下行

```
/ * node JSLint: true * / 
```

在脚本的开头 [http://jslinterrors.com/a-was-used-before-it-was-defined/](http://jslinterrors.com/a-was-used-before-it-was-defined/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-11-16T11:24:53.567

在 cli 模式下，您可以使用配置文件：
**jslint.conf**

```
{
    "predef": [
        "module",
        "require",
        "window",
        "document",
        "jQuery",
        "Backbone",
        "Marionette",
        "Modernizr",
        "_",
        "setTimeout",
        "clearTimeout",
        "setInterval",
        "clearInterval"
    ],
    "evil":false,
    "indent":4,
    "vars":true,
    "passfail":false,
    "plusplus":false
} 
```

并使用带`--config jslint.conf`参数的 jslint。

# c# - C# 一次创建 10 个并行 Web 请求

> ID：10766204
> 
> 赞同：0
> 
> 时间：2012-05-26T12:28:12.660
> 
> 标签：c#, .net, multithreading, parallel-processing

> **可能重复：**
> [在 C# 中多线程处理大量 Web 请求](https://stackoverflow.com/questions/4277844/multithreading-a-large-number-of-web-requests-in-c-sharp)

我正在研究一个刮刀，它必须从一个网站上刮掉大约 12000 个页面。现在我每小时只能得到 1500 页，这太慢了。

我想知道如何一次请求 10 页而不是 1 页？

```
private void backgroundWorker1_DoWork(object sender,
    DoWorkEventArgs e)
{ 
    //Page IDs - Start request loops
    for (int i = 0; i < 12000; i++)
    {
        Get(url + i);
    }
} 
```

代码上的一个例子会很棒

谢谢！

# visual-studio-lightswitch - 灯开关房预订申请

> ID：10766206
> 
> 赞同：1
> 
> 时间：2012-05-26T12:28:34.143
> 
> 标签：visual-studio-lightswitch

我有以下表格：

```
rooms table       contains  Room_Number   INT  PK
res_appointment   contains  Id            INT  PK
                            Room_Number   INT
                            Start_Date    DATE
                            End_Date      DATE 
```

我想构建一个带有参数的查询入住日期（开始日期）和退房日期（结束日期）我希望查询只选择房间表中的房间号，其中在 res_appointment 表中的参数签入日期和检查之间有记录出院日期

在夏季，我只需要列出在 Check In Date 和 Check Out Date Parameters 之间的日期范围内繁忙的房间。

有什么方法可以在 VB lightswitch 中做到这一点

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T14:49:45.503

在 Room_Number 上的两个表之间创建关系或外键。然后使用查询设计器过滤表以返回指定日期范围内的结果。一旦这两个表被链接，您就可以从查询中访问 rooms_table。

# php - 因弃用而更新到 eregi()

> ID：10766213
> 
> 赞同：-1
> 
> 时间：2012-05-26T12:29:30.910
> 
> 标签：php, preg-match, eregi

由于从 PHP 5.2.x 升级到 5.3.x，我必须更新一行不推荐使用的代码

代码行是：

```
if (eregi('Itemid=[0-9]+', $string) === false) { 
```

有谁知道新的 preg_match() 参数也应该转换？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T12:34:28.447

```
if( !preg_match( '/Itemid=[0-9]+/i', $string ) ) {

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T12:37:43.110

```
if ( !preg_match('/Itemid=[0-9]+/i', $string)) { 
```

但也许真正需要的是

```
if ( !preg_match('/^Itemid=[0-9]+$/i', trim($string))) { 
```

# visual-studio-2010 - 将 SVN 存储库迁移到某些分布式 VCS（Git 或 Mercurial）

> ID：10766216
> 
> 赞同：2
> 
> 时间：2012-05-26T12:30:00.720
> 
> 标签：visual-studio-2010, git, svn, mercurial

从[我之前的问题](https://stackoverflow.com/q/9962884/67988)中，我了解到我必须将我的 SVN 存储库更改为分布式 VCS。

所以，目前，我：

*   有一个现有的 SVN 存储库，
*   使用 Visual Studio 2010，
*   客户端和服务器都使用 VisualSVN。

我想要：

*   将客户端和服务器端都转换为分布式 VCS，
*   保留历史，
*   新的 VCS 仍然有一个方便的 Visual Studio 插件。

我的问题：

*   哪个VCS更好用？
*   如何将存储库从 SVN 转换为另一个 VCS？
*   在客户端，我应该只是使用新的 VCS 插件“重新结帐”？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-26T13:19:10.267

通过 SVN 从集中式 VCS（Team Foundation Server）过渡到 Mercurial，我有一个积极的经验。所以我想这适用于你的情况。

[`hg convert`](https://www.mercurial-scm.org/wiki/ConvertExtension)可以将您的 SVN 存储库转换为 Mercurial 存储库，保留历史记录和分支（前提是您坚持使用 SVN 中通常的分支/标签布局）。

[TortoiseHg](http://tortoisehg.bitbucket.io/)将 Mercurial 功能与 DAG 渲染器、源代码树浏览和注释/责备工具等可视化工具完美集成到 Windows 资源管理器中。同时，TortoiseHg 保留命令行`hg`程序，因此您可以自由混合 GUI 和 CLI。

[VisualHG](http://visualhg.codeplex.com/)基于 TortoiseHg，将 Mercurial 存储库支持集成到 Visual Studio 2008/2010 中，在解决方案资源管理器中进行更改时添加、删除和重命名解决方案文件。

这套工具为大部分大中型项目提供了相当不错的支持。但是，如果您的项目非常大，或者它包含很多大（数十兆字节）二进制文件（例如媒体），或者您计划定期将构建的二进制文件置于源代码控制之下，这可能会使 Mercurial 难以使用。

在这种情况下，您可能需要使用其他工具，例如 Mercurial 子存​​储库和大文件扩展，或者考虑使用另一个 VCS (Git)。

# apache - 别名和重写器一起工作

> ID：10766218
> 
> 赞同：0
> 
> 时间：2012-05-26T12:30:31.990
> 
> 标签：apache, url-rewriting, httpd.conf, short-url

我有多个域名指向一个 Apache2 虚拟主机：

```
ServerName domain1.com
ServerAlias domain2.com
ServerAlias domain3.com 
```

为了始终显示相同的 url，我使用了这样的重写器：

```
RewriteCond %{HTTP_HOST} !^domain1.com [NC]
RewriteRule (.*) http://domain1.com/$1 [R=301,QSA,L] 
```

最后我有一个这样的别名：

```
Alias /niceurl /long/path/to/index.php 
```

一切正常，除了当用户访问时`domain2.com/niceurl/foo`，浏览器中显示的 url 将是`domain1.com/path/to/index.php/foo`，而不是`domain1.com/niceurl/foo`

我应该补充一点，其他情况按预期工作，换句话说：

```
domain2.com/foo => domain1.com/foo
domain1.com/shorturl/bar => domain1.com/shorturl/bar 
```

有没有聪明的方法来实现我想要的？感谢您的任何提示！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T13:40:03.860

您真的需要在域重定向上添加查询字符串 (QSA) 吗？

在没有它的情况下尝试你的规则：

```
RewriteRule (.*) http://domain1.com/$1 [R=301] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-03T18:27:15.190

如果您有权访问文档根目录，则解决方案是创建符号链接：

```
ln -s /<path to application> /<document root>/foo 
```

# php - $_SERVER['REQUEST_METHOD'] 是否保证为大写？

> ID：10766221
> 
> 赞同：12
> 
> 时间：2012-05-26T12:30:55.267
> 
> 标签：php

我目前已经`strtoupper($_SERVER['REQUEST_METHOD'])`进入我的代码。

但是有`strtoupper`必要打电话吗？`$_SERVER['REQUEST_METHOD']`已经保证是大写了吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2014-02-02T14:44:57.230

简短回答：不，不能保证，但通常接收非大写 HTTP 方法意味着客户端违反了规范。

### 长答案：

如果您正在处理 W3 规范定义的方法，例如 GET 和 POST，那么您可以保证*符合规范的*客户端会以大写形式向您发送它们。这是因为 HTTP 方法被[定义为区分大小写](https://www.rfc-editor.org/rfc/rfc2616#section-5.1.1)...

> Method 标记指示要对由 Request-URI 标识的资源执行的方法。该方法区分大小写。

W3 定义的方法，如[OPTIONS、GET、POST 等，](https://www.rfc-editor.org/rfc/rfc2616#section-9)均以大写形式定义。

但是，如果您正在处理不符合规范的客户端，您的网络服务器和 PHP 都不会神奇地将值强制`$_SERVER['REQUEST_METHOD']`转换为大写。这可以通过像这样的简单脚本轻松演示......

```
<?php
    echo "The method used by your request was $_SERVER[REQUEST_METHOD]";
?> 
```

如果我们使用方法不是大写的 HTTP 请求命中该脚本，它将以非大写形式回显该方法。大量的常用工具可以让我们做到这一点。例如，让我们从 UNIX shell 中运行它：

```
$ curl http://localhost/echo_method.php -X GET -w "\n"
The method used by your request was GET
$ curl http://localhost/echo_method.php -X gEt -w "\n"
The method used by your request was gEt
$ curl http://localhost/echo_method.php -X fWoRbLeWoRbLe -w "\n"
The method used by your request was fWoRbLeWoRbLe 
```

...或使用 Python：

```
>>> import httplib
>>> connection = httplib.HTTPConnection('localhost')
>>> connection.request('pOsT', '/echo_method.php')
>>> connection.getresponse().read()
'The method used by your request was pOsT' 
```

*“好吧”*，您可能会说，*“因此，如果我的 API 被糟糕编写的脚本或本机应用程序使用，那么可能会出现问题。但是我的 API 仅由运行在 Web 浏览器中的 JavaScript 触发的 AJAX 调用使用。这样做吗？问题对我有影响吗？”*

不幸的是，是的。似乎现代浏览器在发送 AJAX 时将*大多数*标准 HTTP 方法强制为大写，但目前对于自定义 HTTP 方法或特别是[PATCH 方法](https://www.rfc-editor.org/rfc/rfc5789)都没有这样做。

使用之前相同的 PHP 脚本，这次是在 Chrome JavaScript 控制台上......

```
var request;
request = new XMLHttpRequest();
request.open("GeT", "http://localhost/echo_method.php", true);
request.send();
request.onreadystatechange = function() {
    if (request.readyState == 4) {
        console.log(request.responseText);
    }
} 
```

产生结果

```
The method used by your request was GET 
```

但是改变 HTTP 方法`pATcH`给我们

```
var request;
request = new XMLHttpRequest();
request.open("pATcH", "http://localhost/echo_method.php", true);
request.send();
request.onreadystatechange = function() {
    if (request.readyState == 4) {
        console.log(request.responseText);
    }
} 
```

给我们

```
The method used by your request was pATcH 
```

更糟糕的是，Web 浏览器并不是唯一[将 PATCH 方法以外的所有方法强制](http://brendanforster.com/blog/case-sensitive.html)转换为大写的客户端。

总结：虽然 HTTP 规范要求请求包含大写的 HTTP 方法（除非它是在不同情况下专门定义的自定义方法），但常见的 Web 工具使前端开发人员很容易出错，而 PHP 的`$_SERVER['REQUEST_METHOD']`变量如果他们这样做，*不会*神奇地将方法强制为大写。

当然，这取决于您是否要依赖符合规范的客户，验证该方法是否为大写，并以适当的状态码（可能是 400 或 405）和错误消息（如果不是）进行响应，或者不正确地接受-通过`strtoupper($_SERVER['REQUEST_METHOD'])`像这里的问题提问者一样将方法强制为大写，来封装 HTTP 方法。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-26T12:39:42.233

[RFC 3875](http://www.ietf.org/rfc/rfc3875)将`REQUEST_METHOD`变量定义为大写，因此可以依赖它。

> REQUEST_METHOD 元变量必须设置为脚本应该用来处理请求的方法......
> 
> ```
>  REQUEST_METHOD   = method
>   method           = "GET" | "POST" | "HEAD" | extension-method
>   extension-method = "PUT" | "DELETE" | token 
> ```
> 
> 该方法区分大小写。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-26T12:39:33.360

它完全是特定于 SAPI 的，据我所知，PHP“规范”中没有任何内容会强制使用大写的方法名称。这是来自 AOL Server SAPI 的代码片段：

```
Ns_RegisterRequest(ctx->ns_server, "POST", value, php_ns_request_handler, NULL, ctx, 0); 
```

如果有人将其更改`POST`为`post`小写。

一次通话`strtoupper()`绝对不会花费您任何费用，因此不要冒险并使用它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-26T13:07:22.893

是的，这就是 PHP 内部在 php 5.4 下寻找的东西

[http://lxr.php.net/opengrok/xref/PHP_5_4/main/SAPI.c#456](http://lxr.php.net/opengrok/xref/PHP_5_4/main/SAPI.c#456)

```
454     if (SG(server_context)) {
455         if (PG(enable_post_data_reading) && SG(request_info).request_method) {
456             if (SG(request_info).content_type && !strcmp(SG(request_info).request_method, "POST")) { 
```

[http://lxr.php.net/opengrok/xref/PHP_5_4/main/SAPI.c#797](http://lxr.php.net/opengrok/xref/PHP_5_4/main/SAPI.c#797)

```
796                     } else if (SG(request_info).proto_num > 1000 &&
797                        SG(request_info).request_method &&
798                        strcmp(SG(request_info).request_method, "HEAD") &&
799                        strcmp(SG(request_info).request_method, "GET")) { 
```

它从服务器提供这些值，但如果它不符合传递数据[的规范](http://datatracker.ietf.org/doc/rfc3875/?include_text=1)，那么它就是一个行为不良的服务器......但 HTTP RFC 只说大写。所以，这永远不会成为一个问题。

由于这些原因，保证了大写。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-05-26T12:35:37.947

它通常是，但我不会指望它 100%。这样的事情可能会在新的软件版本或不同的配置中发生变化。您真的不希望通过服务器升级破坏您的代码这么小的东西。如果要比较它，请始终确保两个字符串都是小写或大写。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-05-26T12:39:33.963

[php 文档](http://www.php.net/manual/en/reserved.variables.server.php)似乎表明此变量有四个可能的值：GET、HEAD、POST 或 PUT，它们都是大写的。可以肯定的是，您总是可以进行 strcasecmp 而不是 == 比较。

# plot - 绘制以曲面形式给出的 3d 实体（以顶点序列形式给出）

> ID：10766222
> 
> 赞同：0
> 
> 时间：2012-05-26T12:30:57.463
> 
> 标签：plot, gnuplot

标题基本上是这样说的。我想以类似于下面的立方体的形式绘制样本：

```
// Front
0 0 0
0 0 1
1 0 1
1 0 0

// Back
0 1 0
0 1 1
1 1 1
1 1 0

// Left
0 0 0
0 1 0
0 1 1
0 0 1

// Right
1 0 0
1 1 0
1 1 1
1 0 1

// Bottom
0 0 0
1 0 0
1 1 0
0 1 0

// Top
0 0 1
1 0 1
1 1 1
0 1 1 
```

我不受任何特定程序的限制，但我认为可以使用 gnuplot 来做到这一点。你会怎么做？（当然我自己也试过了，但我是一个gnuplot菜鸟，而且gnuplot太大了，无法直接找到答案）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T15:43:00.673

我不得不重新排列你的数据文件一点点：

```
#front
0 0 0
0 0 1

1 0 0
1 0 1

#back
0 1 0
0 1 1

1 1 0
1 1 1

#left
0 0 0
0 1 0

0 0 1
0 1 1

#right
1 0 0
1 1 0

1 0 1
1 1 1

#bottom
0 0 0
1 0 0

0 1 0
1 1 0

#top
0 0 1
1 0 1

0 1 1
1 1 1 
```

然后可以用以下方式绘制：

```
set pm3d depthorder
splot "datafile.dat" u 1:2:3:-2 w pm3d 
```

虽然这很有效（主要是——在 gnuplot 中按深度顺序排序并不完美），但做更复杂的形状很快就会变得乏味。

基本上，它之所以有效，是因为我在数据文件中分别指定了每个四边形（在本例中为正方形）——四边形由 2 个空行分隔。每个正方形由 4 个顶点组成，按 2 次“扫描”排序。因此，第一次扫描从点 (0,0,0) 到 (0,0,1)。然后下一次扫描从 (1,0, 0) 到 (1,0,1). Gnuplot 然后将扫描连接在一起。

使用这种技术，您还可以制作三角形（三角形只是最后两个点相同的四边形；）。

最后，每个表面的着色由`pseudo-column`“-2”完成——实际上只是四边形数。如果您愿意，可以在数据文件中添加第四个字段并将其用作颜色。

但是，我觉得这个使用 gnuplot 的解决方案并不是你真正想要的，因为这种东西并不是 gnuplot 的真正设计目的——可能有一个工具可以更容易地做到这一点——我只是不知道它是什么。

# c - 从函数返回结构

> ID：10766226
> 
> 赞同：6
> 
> 时间：2012-05-26T12:32:04.637
> 
> 标签：c, function, struct

> **可能重复：**
> [返回包含数组的结构](https://stackoverflow.com/questions/8774753/returning-struct-containing-array)

我有一些简单的代码：

```
struct s {
    char str[128];
};

struct s foo()
{
    struct s s = { "some string" };
    return s;
}

int main()
{
    printf("%s\n", foo().str);
    return 0;
} 
```

但它会发出警告：

> 警告：格式“%s”需要“char *”类型的参数，但参数 2 的类型为“char[128]”[-Wformat]

如果我像那样改变主要功能

```
int main()
{
    struct s s = foo();
    printf("%s\n", s.str);
    return 0;
} 
```

一切都好。那么，第一个代码中的问题是什么？谢谢。

附言。我正在使用 gcc-4.7.0

pps。请注意，问题仅出现在 C 编译器中，使用 C++ 一切正常

# asp.net - IIS express 和 IIS 的结果不同

> ID：10766228
> 
> 赞同：1
> 
> 时间：2012-05-26T12:32:19.230
> 
> 标签：asp.net, iis, windows-server-2008, dotnetnuke, iis-express

我最近在 Windows 2008 机器上安装了 webmatrix。我使用 webmatrix 安装了 dotnetnuke，我使用服务器上的浏览器访问了该站点，完成了该站点的安装，一切正常。

然后我在 IIS 中创建了一个站点，并将其指向我安装 dotnetnuke 的文件夹。

当我使用我的域名和服务器上的浏览器在端口 80 上访问该站点时，它会将我带到安装页面。当我使用远程计算机访问该站点时，它显示“此站点当前不可用，请稍后再回来查看”。然而，当我在 iis express 上访问它时，它运行良好！

怎么了？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T21:10:39.610

There are a number of things that could be going on at this point.

1.  Incorrect permissions - Ensure that the ASP.NET Worker Process has full permissions to the DotNetNuke directory. (With IIS Express, you are using your user account IIRC)
2.  Incorrect database access - Ensure that the connection information is correct for the database. As with the above, if the connection for example has a "Integrated Security=true" option defined, you will need to either change this to a SQL account or add the ASP.NET worker Process user to have permissions
3.  It could be a missing Portal Alias, but the current versions of DNN don't have the same issue as you use to.
4.  ALso make sure that the UsePortNumber option in the web.config is set to false.

# web-services - 函数在服务加载之前调用

> ID：10766229
> 
> 赞同：0
> 
> 时间：2012-05-26T12:32:27.183
> 
> 标签：web-services, apache-flex, events

我在我的网络应用程序中使用 blazeDS。我正面临 Java 和 flex 的问题。

我已经使用函数在应用程序的创建完成事件中加载服务。我需要在组合框中获得价值并进行一些操作。但是我的函数将跟踪值，在服务加载之前被调用。出于这个原因，函数没有返回任何值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T12:59:04.920

您可以通过以下更改来克服

1）在[Application](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/core/Application.html) initizlize事件中调用webservice

[2) 在ResultEvent](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/rpc/events/ResultEvent.html)中调用您的方法，在Webservice 的结果上触发或

3）如果您仍然面临同样的问题，您可以使用[callLater()调用它](http://livedocs.adobe.com/flex/3/html/help.html?content=layoutperformance_12.html)

或者

4）如果 callLater() 不起作用，那么您可以使用[ListCollectionView](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/collections/ListCollectionView.html#event%3acollectionChange)的Event [collectionchange](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/collections/ListCollectionView.html#event%3acollectionChange) [ArrayCollection](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/collections/ArrayCollection.html)的父类[XMLListCollection](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/collections/XMLListCollection.html)

我个人建议仅执行第 1 步和第 4 步。

希望有帮助

# mysql - 获取项目类别的递归查询的等效 Doctrine SQL 查询是什么

> ID：10766232
> 
> 赞同：0
> 
> 时间：2012-05-26T12:33:16.747
> 
> 标签：mysql, sql, doctrine-orm

在[这篇文章](https://stackoverflow.com/questions/8542201/how-to-join-category-table-for-parents-in-sql-query)中，**DRapp**提供了一个 SQL 查询来解决**阿里**提出的问题。在实践中，Ali 询问如何编写一个查询，该查询能够返回与*Post*表中的行相关的表*Category*中的所有行，以便我们可以在所有基于目录的网站（eBay、Amazon 等）中看到.)。

 *这就是说， *DRapp 的解决方案*中提出**的 SQL 查询如何****用 Doctrine2 编写**？

 ***请**避免**使用**QueryBuilder**。

PS：我使用MySQL。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T10:24:20.007

我相信通过直接使用 DQL 或 QueryBuilder 来编写像问题中提到的那样的查询是不可能的。但是，一种可能性是使用[Doctrine2 Native Query](http://www.doctrine-project.org/blog/doctrine2-native-queries.html)，它可以让用户执行原始 SQL。

为了完整起见，这里遵循[DRapp](https://stackoverflow.com/users/74195/drapp)的查询。

```
select
      P.ID,
      P.Post_Title,
      P.Category_ID,
      C.Category_Name as FirstCat,
      C.Parent,
      COALESCE( C2.Category_Name, ' ' ) as ParentCategory
   from
      Posts P
         JOIN Categories C
            on P.Category_ID = C.Category_ID
            LEFT JOIN Categories C2
               on C.Parent = C2.Category_ID
   where
      AnyFiltering 
```****

# c - 活动选择

> ID：10766233
> 
> 赞同：0
> 
> 时间：2012-05-26T12:33:20.003
> 
> 标签：c, android-activity, selection, greedy

我的问题是，我们得到了一份活动列表以及开始和结束时间，然后我们必须找出我们可以做的最大活动。这个问题很常见，我已经应用了一种贪婪的方法，但是我的代码中出现了运行时**分段错误**，所以我将它发布在下面。

```
#include<stdio.h>
typedef struct event
{
    long long int start_time;
    long long int end_time;
    long long int event_number;
}event;

long long int compare(const void *x, const void *y) 
{
    event *e1 = (event *)x, *e2 = (event *)y;
    return (*e1).end_time - (*e2).end_time;
}
/* Given the list of events, our goal is to maximise the number of events we can
   attend. */
int main()
{
int tests;
scanf("%d",&tests);
while(tests--)
{
long long int number_of_events;
//printf("enter no  of activities");
    scanf("%lld",&number_of_events);
    event T[number_of_events];
    long long int iter;
    for(iter=0;iter<number_of_events;iter++)
    {
 //         printf("enter start time and end time of %dth activity",iter);
            scanf("%lld%lld",&T[iter].start_time,&T[iter].end_time);
            T[iter].event_number = iter;
    }
    /* Sort the events according to their respective finish time. */
    qsort(T,number_of_events,sizeof(event),compare);

    long long int events[number_of_events]; // This is used to store the event
                                            // numbers that can be attended.

    long long int possible_events = 0; // To store the number of possible events

    //Taking the first task
    events[possible_events++] = T[0].event_number;
    long long int previous_event = 0;

    /* Select the task if it is compatable with the previously selected task*/
    for(iter=1;iter<number_of_events;iter++)
    {
            if(T[iter].start_time >= T[previous_event].end_time)
            {
                    events[possible_events++] = T[iter].event_number;
                    previous_event = iter;
            }
    }
    //printf("Maximum possible events that can be attended are %d. They   are\n",
    //  possible_events);
    printf("%lld\n",possible_events);
    /*  list of selected activities
    for(iter=0;iter<possible_events;iter++)
    {
            printf("%d\n",events[iter]);
    }*/

}
return 0;
} 
```

请帮助！提前谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T12:54:21.630

在你最后的迭代中

```
for(iter=0;iter<possible_events;iter++) 
```

你可能迭代一个过去的大小`events`

原因是，当您通过`possible_events++`以前使用的访问元素时`possible_events`，该变量的值在访问之后会像以前一样大（因为 post-fix `++`），因此如果您在每次迭代中调用评估，则值of`possible_events`将`number_of_events+1`在循环结束后

您需要迭代到少一个：

```
for(iter=0;iter<possible_events-1;iter++) 
```

# javadoc - javadoc parameter without package name

> ID：10766238
> 
> 赞同：9
> 
> 时间：2012-05-26T12:34:12.190
> 
> 标签：javadoc

Basically, eclipse export javadoc output format such as:

```
    Method
    Modifier and type        Method and description
    java.lang.String         getData(java.lang.String key)
    java.lang.String         echo(java.lang.String string) 
    ...

```

If i wanna another format such as:

```
    Method
    Modifier and type        Method and description
    String                   getData(String key)
    String                   echo(String string) 
    ...

```

(without package name)

what should i do in the eclipse javadoc Extra javadoc options item? many thanks.

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-28T18:54:26.953

I'm not sure how one does configure this in Eclipse, but the standard doclet has the [`-noqualifier` option](http://docs.oracle.com/javase/6/docs/technotes/tools/solaris/javadoc.html#noqualifier).

If you don't want any package names to be shown, you can use `-noqualifier all`, if you only want some package names to be omitted, you can list these, like this: `-noqualifier java.lang:java.io`.

Note then in these cases it is a good idea to also have a `-link` or `-linkoffline` option linking to the documentation of these classes, so readers have a chance to find out which class is meant here.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-04-25T09:24:29.320

For those using Maven (and the maven-javadoc-plugin), here is an example of specifying "noqualifier" and "links" for the javadocs plugin (within the project's pom.xml file).

```
<build>
  <plugins>
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-javadoc-plugin</artifactId>
        <version>2.10.3</version>
        <configuration>
          <noqualifier>all</noqualifier>
          <links>
            <link>http://hbase.apache.org/apidocs/</link>
            <link>http://docs.oracle.com/javase/7/docs/api/</link>
          </links>
        </configuration>
        <executions>
          <execution>
            <id>javadocs</id>
            <phase>package</phase>
            <goals>
              <goal>javadoc</goal>
            </goals>
          </execution>
        </executions>
      </plugin>
  </plugins>
</build> 
```

Documentation on the "noqualifier" parameter is very succinct, and can be found here: [https://maven.apache.org/plugins/maven-javadoc-plugin/javadoc-mojo.html#noqualifier](https://maven.apache.org/plugins/maven-javadoc-plugin/javadoc-mojo.html#noqualifier)

Full documentation on the "links" parameter is available here: [https://maven.apache.org/plugins/maven-javadoc-plugin/examples/links-configuration.html](https://maven.apache.org/plugins/maven-javadoc-plugin/examples/links-configuration.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-09-20T21:03:09.257

For Ant you can also remove qualifiers from package names when using Ant's [javadoc task](https://ant.apache.org/manual/Tasks/javadoc.html) to define javadoc output via `build.xml`.

`noqualifier` is an attribute of `<javadoc>` that takes either "all" or a colon-separated list of qualifiers to remove. Here is an example,

An Ant `build.xml` example line that removes Javadoc qualifiers from java.lang, java.io, and java.util will look something like this:

```
<javadoc sourcepath="${src.dir}" destdir="${doc.dir}"
         classpathref="compile.classpath" access="public"
         noqualifier="java.lang:java.io:java.util"/> 
```

# vbscript - 如何在 VBS 中使用 %SYSTEMROOT%？

> ID：10766239
> 
> 赞同：0
> 
> 时间：2012-05-26T12:34:14.043
> 
> 标签：vbscript

我使用此代码下载链接，我想保存一个文件，`%SystemRoot%\system32`但是当替换**`C:\`**为 时**`%SystemRoot%`**，VBS 无法运行。

```
function download(sFileURL, sLocation)

    'create xmlhttp object
    Set objXMLHTTP = CreateObject("MSXML2.XMLHTTP")

    'get the remote file
    objXMLHTTP.open "GET", sFileURL, false

    'send the request
    objXMLHTTP.send()

    'wait until the data has downloaded successfully
    do until objXMLHTTP.Status = 200 :  wcript.sleep(1000) :  loop

    'if the data has downloaded sucessfully
    If objXMLHTTP.Status = 200 Then

            'create binary stream object
        Set objADOStream = CreateObject("ADODB.Stream")
        objADOStream.Open

            'adTypeBinary
        objADOStream.Type = 1
        objADOStream.Write objXMLHTTP.ResponseBody

            'Set the stream position to the start
        objADOStream.Position = 0    

            'create file system object to allow the script to check for an existing file
            Set objFSO = Createobject("Scripting.FileSystemObject")

            'check if the file exists, if it exists then delete it
        If objFSO.Fileexists(sLocation) Then objFSO.DeleteFile sLocation

            'destroy file system object
        Set objFSO = Nothing

            'save the ado stream to a file
        objADOStream.SaveToFile sLocation

            'close the ado stream
        objADOStream.Close

        'destroy the ado stream object
        Set objADOStream = Nothing

    'end object downloaded successfully
    End if

    'destroy xml http object
    Set objXMLHTTP = Nothing

End function

download "http://remote-location-of-file", "C:\name-of-file-and-extension"

download "http://demo.com/test.gif", "C:\test.gif" **OK**  
download "http://demo.com/test.gif", "%SystemRoot%\system32\test.gif"  **Faild** 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-26T12:42:45.137

您需要在**VBS**变量中读取环境变量。就像是：

```
Dim mySystemRoot
Dim myPath
Dim wshShell
Set wshShell = CreateObject( "WScript.Shell" )
mySystemRoot = wshShell.ExpandEnvironmentStrings( "%SystemRoot%" )
wshShell = Nothing
download "http://demo.com/test.gif", myPath & "\test.gif" 
```

然后使用`mySystemRoot`变量来形成你的文件路径。

# codeigniter - 如果记录已存在则显示消息

> ID：10766240
> 
> 赞同：0
> 
> 时间：2012-05-26T12:34:14.310
> 
> 标签：codeigniter

我是**CodeIgniter**的新手。我现在创建了一个在 mysql db 表中插入记录的方法，如果同名的记录已经存在，则使查询停止，所以我写道：

```
public function set_project()
    {
        // If project name already exists?
        $query = $this->db->query("SELECT pro_id FROM projects WHERE pro_name = '".$this->input->post('pro_name')."'");

        if ( sizeof($query->row_array()) == 0) {

            $data = array(
                'is_featured' => $this->input->post('is_featured'),
                'pro_type' => $this->input->post('pro_type'),
                'pro_name' => $this->input->post('pro_name'),
                'pro_client' => $this->input->post('pro_client'),
                'pro_loc_city' => $this->input->post('pro_loc_city'),
                'pro_loc_state' => $this->input->post('pro_loc_state'),
                'pro_yr_start' => $this->input->post('pro_yr_start'),
                'pro_yr_end' => $this->input->post('pro_yr_end'),
                'pro_loc_cur' => $this->input->post('pro_loc_cur'),
                'pro_size' => $this->input->post('pro_size'),
                'pro_size_cat' => $this->input->post('pro_size_cat'),
                'pro_size_units' => $this->input->post('pro_size_units'),
                'pro_desc' => $this->input->post('pro_desc')
            );

            return $this->db->insert('projects', $data);

        } else {
            return "Already exists";
        } 
```

哪个工作正常，但我可以向谁显示我的视图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T12:49:44.063

好的，我做到了，实际上我必须移动那个签入控制器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-20T10:33:40.420

您正在编写`return "Already exists"`，但要查看输出更改该代码`echo '<script>alert("Already exists!")</script>';`。

# c++ - 修改后的观察者设计模式 C++

> ID：10766241
> 
> 赞同：1
> 
> 时间：2012-05-26T12:34:14.593
> 
> 标签：c++, pointers, methods

假设我有一个观察类，一个被观察类，我想通知观察者，但是以一种呈现的方式。

被观察的类有一个指针数组，指向被观察的类中的方法。所以基本上当我在观察类中调用 notifyObservers 时，它会通过这个数组并简单地调用观察者中的必要函数。这个解决方案是我的老师提出的，我很难让它发挥作用，他很遗憾这个解决方案不需要持有指向 obervers 的指针（如观察者设计模式），只需要指向方法的指针。但是我如何存储指向知道谁应该调用它们的方法的指针

我试过这样的事情：

```
class A { 
public:
    void method();
} 
A a;   
void(A::*ptr)()=&a.method;
void (*ptr)()=&a.method; 
```

这显然没有用。有没有办法让它工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T12:37:17.447

尝试使用绑定：

```
std::function<void()> ptr = std::bind(&A::method, a);
ptr(); // calls a.method(); 
```

请注意，正如 betabandido 所提到的，这仅适用于 C++11 原样或使用 boost 的旧版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-24T01:57:44.207

以防万一有人还在看这个。有一篇很好的博客文章正是这样做的。

[http://juanchopanzacpp.wordpress.com/2013/02/24/simple-observer-pattern-implementation-c11/](http://juanchopanzacpp.wordpress.com/2013/02/24/simple-observer-pattern-implementation-c11/)

如果您不使用 C++11，则可以使用 boost::bind 和 boost::function 来完成这项工作。

# c - 如何在 Mac OS X 上的 C 程序中包含 hdf5 头文件？

> ID：10766246
> 
> 赞同：3
> 
> 时间：2012-05-26T12:34:37.007
> 
> 标签：c, macos, compilation, hdf5

我正在尝试学习如何在 C 中编程，并且我希望能够将数据从 .hdf 文件导入到我的 C 程序中。

我正在使用带有 Mac OS X lion 的 2009 年中期 MacBook Pro。

我认为我遇到了问题，因为我不知道将所有与 hdd 关联的头文件放在系统上的哪个位置（请记住，我有点菜鸟）。所以我只是从hdd网站下载了hdf5-1.8.9-freebsd-shared文件夹，并手动将`/include`子目录中的所有.h文件拖到`/usr/include`目录中到我的电脑上。

当我尝试使用普通的 gcc 终端命令编译我的 .c 程序时，我收到一个错误，类似于以下内容（对格式化感到抱歉，但我认为确切的错误并不重要）：

```
Undefined symbols for architecture x86_64:
  "_H5check_version", referenced from:
      _main in cc9FVO6S.o
  "_H5Fcreate", referenced from:
      _main in cc9FVO6S.o
  "_H5Screate_simple", referenced from:
      _main in cc9FVO6S.o
  "_H5open", referenced from:
      _main in cc9FVO6S.o
  "_H5T_STD_I32LE_g", referenced from:
      _main in cc9FVO6S.o
  "_H5Dcreate2", referenced from:
      _main in cc9FVO6S.o
  "_H5T_NATIVE_INT_g", referenced from:
      _main in cc9FVO6S.o
  "_H5Dwrite", referenced from:
      _main in cc9FVO6S.o
  "_H5Dclose", referenced from:
      _main in cc9FVO6S.o
  "_H5Sclose", referenced from:
      _main in cc9FVO6S.o
  "_H5Fclose", referenced from:
      _main in cc9FVO6S.o
  "_H5Fopen", referenced from:
      _main in cc9FVO6S.o
  "_H5Dopen2", referenced from:
      _main in cc9FVO6S.o
  "_H5Dread", referenced from:
      _main in cc9FVO6S.o
ld: symbol(s) not found for architecture x86_64
collect2: ld returned 1 exit status 
```

尽管确切的错误取决于我要编译的代码。这是在我尝试编译[示例程序](http://www.hdfgroup.org/ftp/HDF5/examples/examples-by-api/hdf5-examples/1_8/C/H5D/h5ex_d_rdwr.c)时生成的。

有没有人有让 hdf5 在 Mac OS X 的 C 语言中工作的经验？我发现这一切都非常令人困惑。

顺便说一句，我通常使用python，并且经常使用h5py没有问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T16:11:56.807

当您使用非标准位置的库时`-l<library-name>`，您必须告诉链接器。`-L<library-dir>`

如果您在 中安装了 hdf5 `/usr/local/hdf5`，则需要类似以下内容：

```
gcc -o h5ex_d_rdwr h5ex_d_rdwr.c -I/usr/local/hdf5/include -L/usr/local/hdf5/lib -lhdf5 
```

如果您使用的是高级 API，还请添加`-lhdf5_hl`.

* * *

如果你已经`pkg-config`安装并且它知道你的 hdf5 安装，你可以让它为你做：

```
gcc -o h5ex_d_rdwr h5ex_d_rdwr.c `pkg-config hdf5 --cflags --libs` 
```

# internet-explorer-8 - 在 IE 中遇到问题

> ID：10766248
> 
> 赞同：0
> 
> 时间：2012-05-26T12:34:53.770
> 
> 标签：internet-explorer-8, joomla1.5

一切正常，但是当我在 IE 中移动我的网站时，内容没有显示——我使用的是 IE 8.0。网址是

[http://skjeeelectricals.com/index.php?option=com_content&view=article&id=52&Itemid=59](http://skjeeelectricals.com/index.php?option=com_content&view=article&id=52&Itemid=59)

请帮助我解决此类问题。

谢谢 JS

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T19:11:17.373

只需使您的代码[有效](http://validator.w3.org/check?uri=http://skjeeelectricals.com/index.php?option=com_content&view=article&id=52&Itemid=59&charset=%28detect%20automatically%29&doctype=Inline&group=0)（修复验证错误）就可以了。

# css - 将容器内的边距 div 均匀居中的好方法？

> ID：10766249
> 
> 赞同：0
> 
> 时间：2012-05-26T12:35:08.930
> 
> 标签：css, css-float

我正在尝试做的是在一个容器中将 x 数量的 div 居中，并在 14px 的 div 的每一侧都有一个边距

但是，像这样的代码：

```
divs{
  display: inline-block;
  margin: 0 7px;
} 
```

将在两个外部 div 的外侧产生 7px 的边距，同时在每个 div 的内侧产生均匀的边距。通常有什么好的做法来解决这个问题？我在想将“最后一个”类应用于最后一个 div 并给它 margin-right: 0，而其余的有 margin-right: 14，但这看起来很乱。

小提琴：http: [//jsfiddle.net/ZMqbW/3/](http://jsfiddle.net/ZMqbW/3/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T12:50:53.300

我认为它不是很优雅，但`text-align: center`在容器上适用于此。

**编辑**：测试[http://dabblet.com/gist/2793852](http://dabblet.com/gist/2793852)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T12:40:59.440

**建议 #1**

是什么阻止您向容器添加填充？

```
.container {
    padding: 7px;
    overflow: hidden;
}
.divs {
    display: block;
    float: left;
    margin: 0 7px;
} 
```

另请注意，Internet Explorer 不太喜欢 inline-block，所以我在容器上`float: left;`结合使用。`overflow: hidden;`

你可以[**试试这个小提琴**](http://jsfiddle.net/baqKm/)，看看它是否适合你。

**建议#2**

另一个建议是使用这样的伪类：

```
.divs:first-child {
    margin-left: 14px;
}
​.divs:last-child {
    margin-right: 14px;
}​​​​​​​​​​ 
```

试试[**这个小提琴**](http://jsfiddle.net/e6jU8/)看看它的实际效果。

# r - R计算两个变量的可能值

> ID：10766251
> 
> 赞同：2
> 
> 时间：2012-05-26T12:35:25.513
> 
> 标签：r, math

我正在尝试计算导致相同数量单元格的网格大小（x x y）的所有可能值，因此例如 2x2 网格的单元格大小为 4。我希望 y 是一半x，总数为，例如 4000。所以我想我希望 R 计算 x 和 y 的所有可能的正整数值，其中

```
function (total) {
x*y=total
x/y=2 
x!=total 
y!= total.
} 
```

我想获得正整数并考虑不同解决方案的一种方法是允许总数比其原始值大 10%（但不能更小，我需要网格至少与我的总值一样大give)，在这种情况下，函数可能有两个字段，tot（例如 4000）和容差（例如 10%）。总计（如上面的草图函数中使用的）必须在 tot 和 (tot+tolerance*tot) 之间

我有几个单元格大小，所以 4000 只是一个例子。我正在尝试构建一个仅返回正整数并返回 Xs 和 Ys 矩阵的快速函数。

有任何想法吗？

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T13:52:10.780

那这个呢：

```
possible.sizes <- function(total, tolerance) {

   min.total <- total
   max.total <- total * (1 + tolerance)

   min.y <- ceiling(sqrt(min.total/2))
   max.y <- floor(sqrt(max.total/2))

   if (max.y < min.y)
      return(data.frame(x=numeric(0), y=numeric(0)))

   y <- seq(min.y, max.y)
   x <- 2*y

   return(data.frame(x=x, y=y))
}

possible.sizes(4000, 0.1)
#    x  y
# 1 90 45
# 2 92 46 
```

# c++ - 链接器返回“重定位在符号索引处具有无效符号...”

> ID：10766256
> 
> 赞同：67
> 
> 时间：2012-05-26T12:35:44.843
> 
> 标签：c++, ubuntu, g++

我正在 Ubuntu 上尝试一些代码。我正在尝试运行以下代码

```
#include <cstdlib>
#include <cmath>
#include <ctime>
#include "random.h"

using namespace std;

/* Function prototype! */
void initRandomSeed();

int randomInteger(int low,int high){
    initRandomSeed();
    double d= rand()/(double(RAND_MAX)+1);
    double s= d*(double(high)-low+1);
    return int(floor(low)+s);    
}

double  randomReal(int low,int high){
    initRandomSeed();
    double d=rand()/(double(RAND_MAX)+1);
    double s=d*(double(high)-low+1);
    return low+s;
}    

bool randomChance(double p){
    initRandomSeed();
    return randomReal(0,1)<p;
}            

void setRandomSeed(int seed){    
    initRandomSeed();
    srand(seed);
}    

void initRandomSeed(){
    // to retain updated values across different stack frames! nice!
    static bool initialized=false;

    // this is executed only very first time and random value obtained from system clock!
    if(!initialized){
        srand(int(time(NULL)));
        initialized=true;
    }
} 
```

当我尝试使用 编译上述代码时`g++`，出现以下错误

```
@ubuntu:~/Chardway$ g++ random.cpp
/usr/bin/ld: /usr/lib/debug/usr/lib/x86_64-linux-gnu/crt1.o(.debug_info): relocation 0 has invalid symbol index 10
/usr/bin/ld: /usr/lib/debug/usr/lib/x86_64-linux-gnu/crt1.o(.debug_info): relocation 1 has invalid symbol index 11
/usr/bin/ld: /usr/lib/debug/usr/lib/x86_64-linux-gnu/crt1.o(.debug_info): relocation 2 has invalid symbol index 2
/usr/bin/ld: /usr/lib/debug/usr/lib/x86_64-linux-gnu/crt1.o(.debug_info): relocation 3 has invalid symbol index 2
/usr/bin/ld: /usr/lib/debug/usr/lib/x86_64-linux-gnu/crt1.o(.debug_info): relocation 4 has invalid symbol index 10
/usr/bin/ld: /usr/lib/debug/usr/lib/x86_64-linux-gnu/crt1.o(.debug_info): relocation 5 has invalid symbol index 12
/usr/bin/ld: /usr/lib/debug/usr/lib/x86_64-linux-gnu/crt1.o(.debug_info): relocation 6 has invalid symbol index 12
/usr/bin/ld: /usr/lib/debug/usr/lib/x86_64-linux-gnu/crt1.o(.debug_info): relocation 7 has invalid symbol index 12
/usr/bin/ld: /usr/lib/debug/usr/lib/x86_64-linux-gnu/crt1.o(.debug_info): relocation 8 has invalid symbol index 2
/usr/bin/ld: /usr/lib/debug/usr/lib/x86_64-linux-gnu/crt1.o(.debug_info): relocation 9 has invalid symbol index 2
/usr/bin/ld: /usr/lib/debug/usr/lib/x86_64-linux-gnu/crt1.o(.debug_info): relocation 10 has invalid symbol index 11
/usr/bin/ld: /usr/lib/debug/usr/lib/x86_64-linux-gnu/crt1.o(.debug_info): relocation 11 has invalid symbol index 12
/usr/bin/ld: /usr/lib/debug/usr/lib/x86_64-linux-gnu/crt1.o(.debug_info): relocation 12 has invalid symbol index 12
/usr/bin/ld: /usr/lib/debug/usr/lib/x86_64-linux-gnu/crt1.o(.debug_info): relocation 13 has invalid symbol index 12
/usr/bin/ld: /usr/lib/debug/usr/lib/x86_64-linux-gnu/crt1.o(.debug_info): relocation 14 has invalid symbol index 12
/usr/bin/ld: /usr/lib/debug/usr/lib/x86_64-linux-gnu/crt1.o(.debug_info): relocation 15 has invalid symbol index 12
/usr/bin/ld: /usr/lib/debug/usr/lib/x86_64-linux-gnu/crt1.o(.debug_info): relocation 16 has invalid symbol index 12
/usr/bin/ld: /usr/lib/debug/usr/lib/x86_64-linux-gnu/crt1.o(.debug_info): relocation 17 has invalid symbol index 12
/usr/bin/ld: /usr/lib/debug/usr/lib/x86_64-linux-gnu/crt1.o(.debug_info): relocation 18 has invalid symbol index 12
/usr/bin/ld: /usr/lib/debug/usr/lib/x86_64-linux-gnu/crt1.o(.debug_info): relocation 19 has invalid symbol index 12
/usr/bin/ld: /usr/lib/debug/usr/lib/x86_64-linux-gnu/crt1.o(.debug_info): relocation 20 has invalid symbol index 19
/usr/lib/gcc/x86_64-linux-gnu/4.6/../../../x86_64-linux-gnu/crt1.o: In function `_start':
(.text+0x20): undefined reference to `main'
collect2: ld returned 1 exit status 
```

任何帮助或帮助问题的链接都会非常有帮助！谢谢！

* * *

## 回答 #1

> 赞同：101
> 
> 时间：2012-05-26T12:40:01.953

我不确定您的无效重定位错误，但明显缺少的是您没有`main`功能。您需要为应用程序定义一个名为 的入口点`main`，在全局范围内定义，例如：

```
int main()
{
    // TODO: implementation
} 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-05-26T12:41:12.590

“未定义对'main'的引用”是因为您没有定义`main()`函数，这是程序的入口点：

```
int main()
{
  // call other functions
} 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2014-05-26T05:54:12.250

有趣的是，如果我尝试编译一个`.h`文件而不是一个`.c`文件，并链接到一个库，我会得到同样的错误，所有这些都是一步完成的。

这是一个大大简化的示例：

```
$ echo 'int main () {}' > test.h
$ g++ test.h -ltommath && echo success
/usr/lib/gcc/x86_64-linux-gnu/4.8/../../../x86_64-linux-gnu/crt1.o: In function `_start':
(.text+0x20): undefined reference to `main'
collect2: error: ld returned 1 exit status 
```

在这种情况下，解决方案是将文件重命名为`.c`：

```
$ echo 'int main () {}' > test.c
$ g++ test.c -ltommath && echo success
success 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-04-30T04:36:48.193

在使用 CMake 链接 gtest 并包含一个包含 main 函数的文件时，我也遇到了同样的事情。

所以，如果你确定你有一个 main，并且你正在链接一些东西——确保你没有两个`int main()`s！

简单的解决方案是将 main() 拆分为 main.cpp 并且不将其与测试源链接。

* * *

## 回答 #5

> 赞同：-4
> 
> 时间：2014-06-05T12:41:50.823

您为 g++ 输入了错误的命令。您应该输入如下内容：

```
g++ file_name random.cpp 
```

您需要命名输出文件。否则就像“g++ 语法错误”。

# ios - 您可以在 iTunes 应用商店中为您的客户以他的名义发布应用吗？

> ID：10766258
> 
> 赞同：1
> 
> 时间：2012-05-26T12:35:50.393
> 
> 标签：ios, itunes

在购买苹果开发者帐户之前，我想知道是否可以使用单个帐户为多个不同的客户发布应用程序，并使用这些客户的名称作为发布者？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T12:40:21.080

你，你不能。您需要为您的客户购买开发人员计划。这将花费他/她每年 100 美元。

# logic - 我可以不使用 OR 和 AND 吗？

> ID：10766260
> 
> 赞同：7
> 
> 时间：2012-05-26T12:36:16.590
> 
> 标签：logic

我知道我可以使用 NOT 反转 X。不是 x = x'

但是，我可以用 OR & AND 反转 X 吗？

例子

给定这个函数 F = W'.YZ' + VW'.Z'

我可以只用 OR & AND 制作电路吗？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-26T12:45:09.357

不可能从 AND 和 OR 中得出 NOT。第一个明显的原因是 NOT 只接受一个参数，而 AND 和 OR 都接受两个。即使您将相同的变量两次输入 AND/OR 门，它们也不会反转其值

OTOH，您可以用 OR+NOT 定义 AND，也可以用 AND+NOT 定义 OR

```
x AND y = NOT((NOT x) OR (NOT y))
x OR y = NOT((NOT x) AND (NOT y)) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-26T12:45:15.710

你不能从 OR 和 AND 得到 NOT。证明：

输入 0 时，OR 和 AND 都将为 0。系统中的任何地方都不会出现 1。对于 1 输入，OR 和 AND 都将为 1。任何地方都不会有 0。

这就是 NAND 和 NOR 芯片在小型/爱好电子产品中流行的原因，因为它们可以进行任何其他逻辑组合。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-26T12:39:10.643

不，您不能仅通过**AND**和**OR**的组合得到**NOT**。

# c++ - 共享内存系统性能的消息传递接口

> ID：10766263
> 
> 赞同：3
> 
> 时间：2012-05-26T12:37:01.453
> 
> 标签：c++, multithreading, mpi, shared-memory, performance-testing

据我所知，并行处理消息传递接口和多线程有两种方法。多线程不能用于没有消息传递接口的分布式内存系统；但消息传递接口可用于“共享内存”和“分布式内存”系统。我的问题是关于与 MPI 并行化并在共享内存系统上运行的代码的性能。此代码的性能是否与多线程并行化的代码范围相同？

**更新：**

我的工作是因为进程需要反复相互通信，通信数组可以是 200*200 矩阵

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T12:53:54.283

答案是：**这取决于**. MPI 进程主要是独立的 OS 进程，当通信进程在同一个共享内存节点上运行时，它们之间的通信使用某种共享内存 IPC 技术进行。作为独立的操作系统进程，MPI 进程通常不共享数据，有时必须在每个进程中复制数据，这会导致内存使用不理想。另一方面，线程可以共享大量数据，并且可以从缓存重用中受益，尤其是在具有大型共享最后一级缓存的多核 CPU 上（例如当前一代 x86 CPU 上的 L3 缓存）。缓存重用与更轻量级的线程间数据交换方法（通常只是同步，因为工作数据已经共享）相结合可以带来比单独进程实现的更好的性能。

但再一次 - 这取决于。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-26T12:53:22.910

假设我们只考虑 MPI 和 OpenMP，因为它们是您提到的两个并行编程系列的两个主要代表。对于分布式系统，MPI 是不同节点之间的唯一选择。但是，正如您所说的，在单个节点中，您仍然可以使用 MPI 和 OpenMP。哪个性能更好取决于您正在运行的应用程序，特别是它的计算/通信比率。[在这里](http://www.clusterconnection.com/2009/08/comparing-mpi-and-openmp/)，您可以看到多核处理器的 MPI 和 OpenMP 比较，它们证实了相同的观察结果。

您可以更进一步并使用混合方法。在节点之间使用 MPI，然后在节点内使用 OpenMP。这称为混合 MPI+OpenMP 并行编程。您也可以在包含混合 CMP+SMT 处理器的节点中应用此功能。

[您可以在此处](http://www.cac.cornell.edu/education/Training/Intro/Hybrid-090529.pdf)和[此处](http://mc.stanford.edu/cgi-bin/images/7/78/Hybrid_MPI_openMP.pdf)查看一些信息。此外[，本文](http://cluster.earlham.edu/project/curriculum-modules/JOCSE_PetaKit/Resources/hybrid_nas.pdf)比较了 MPI 方法与混合 MPI+OpenMP 方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-26T12:57:11.587

在我看来，他们只是更擅长不同的工作。Actor 模型非常适合在不同时间异步执行许多不同的任务，而 OpenMP/TBB/PPL 模型非常适合非常简单可靠地并行执行一项任务。

# html - 除了嵌入 a.swf 文件还有其他选择吗 标签？

> ID：10766268
> 
> 赞同：1
> 
> 时间：2012-05-26T12:37:42.267
> 
> 标签：html

我创建了一个页面，在该页面中我使用了 embed 标签来嵌入 .swf 文件，但有时它会在 Firefox 中产生问题，是否有任何其他标签可以代替它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T12:43:30.660

你应该使用[`object`](http://www.w3schools.com/html5/tag_object.asp)标签！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T12:47:16.757

你甚至可以通过这种方式使用 iframe：

```
<iframe src="location/name.swf" frameBorder="0"></iframe> 
```

# php - gettype() 根据变量类型返回类型 - 如何根据内容获取类型？

> ID：10766273
> 
> 赞同：0
> 
> 时间：2012-05-26T12:38:11.830
> 
> 标签：php, casting

我正在尝试制作一个简单的设置脚本，它基本上将设置名称和设置值发送到我的数据库。

这实际上非常简单 - 设置和获取它，只需要很少的代码并完成任务。

但我希望以正确的类型返回数据。每次使用[gettype()](http://php.net/gettype)都会返回`string`- 这是合乎逻辑的，因为从我的数据库返回的内容是一个字符串。

这种效果可以通过对我的内容使用[json_decode()来实现。](http://php.net/json_decode)这会根据内容返回类型，并且它的工作方式与预期一样。

但是我有更好的选择吗？

我正在考虑为我的数据库表分配一个类型，但这只会增加设置和获取数据的复杂性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T12:49:36.690

您可以使用以下任何 php 函数来检查变量是否与特定变量类型的格式匹配：

is_numeric、is_bool、is_null、is_float、is_int、is_string、is_object、is_array

# jquery - Jquery - 父级上的可拖动 div 和 mousedown

> ID：10766274
> 
> 赞同：1
> 
> 时间：2012-05-26T12:38:28.207
> 
> 标签：jquery, jquery-ui, draggable, parent, mousedown

我有一个可拖动的 div (div#paper)，另一个 div (div.whitepaper) 的孩子。我想将 div#paper 无限制地拖动到 div.whitepaper 中。

所以，即使我没有超过 div#paper，即使我将鼠标按下到 div.whitepaper，我也想拖动 div#paper。

这是我的小提琴：

[http://jsfiddle.net/klodenet/x85Uu/](http://jsfiddle.net/klodenet/x85Uu/)

如果我将 div#paper 拖到 div.whitepaper 的空间上，然后继续 mousedown+mousemove 进入 div.whitepaper，我希望 div#paper 继续拖到一边...

我添加了一个评论的 .trigger() 解决方案，因为如果我将此解决方案与 Firebug 一起使用，Firefox 会崩溃。

# prolog - 如何更正 Prolog 上的谓词？

> ID：10766279
> 
> 赞同：2
> 
> 时间：2012-05-26T12:39:10.187
> 
> 标签：prolog, turbo-prolog

我有以下序言代码：

```
predicates
like(string)
clauses
 like(apple).
like(girl).

q :- like(A),write(A).

goal q. 
```

如何获得两个解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T15:59:32.987

使用 findall 谓词 [http://cs.union.edu/~striegnk/learn-prolog-now/html/node96.html](http://cs.union.edu/~striegnk/learn-prolog-now/html/node96.html)

```
domains
Z = symbol*

predicates
like(symbol)
q(symbol)

clauses
like(apple).
like(girl).
q(A) :- like(A).

goal findall(X,q(X),Z),write(Z). 
```

或使用失败

```
domains
Z = symbol*

predicates
like(symbol)

clauses
like(apple).
like(girl).

goal like(X),write(X),nl,fail. 
```

# android - 如何将 HttpResponse 提取到单独的线程中？

> ID：10766286
> 
> 赞同：0
> 
> 时间：2012-05-26T12:39:46.743
> 
> 标签：android, httpresponse

我在 Android 中有：

```
HttpResponse httpGetResponse = client.execute(request);
...     
Log.e("HEADER: ",  httpGetResponse.getStatusLine().toString() ); 
```

即我`execute`一个`HttpGet`请求，然后对响应做一些事情。但是我想以某种方式将它放入一个单独的线程中，以便`UI`在服务器响应时线程不会冻结。你认为最好的方法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T14:32:32.467

将您的请求包装到 AsyncTask 中并在 doInBackground 中执行实际请求。由于您可能必须使用 UI 线程上的输出，因此您可能应该从 doInBackground 中返回您需要的数据，并在 AsyncTask 中使用 postExecute 选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T14:03:08.497

最简单的方法是使用 AsyncTask。

# tsql - 卡在 T-SQL 查询中

> ID：10766291
> 
> 赞同：1
> 
> 时间：2012-05-26T12:40:20.470
> 
> 标签：tsql

我在处理更复杂的（或者我的想法是这样的）SQL 查询时遇到了很大的麻烦。我会尽力解释需要什么。

这就是它本质上的样子：http: [//i.imgur.com/obWY7.png](http://i.imgur.com/obWY7.png)

这个想法是，将有孩子们与职业选手合作并举办锦标赛的体育比赛。现在一切正常，直到我进入乐谱部分。

我需要一个在 4 个列中返回游戏结果的查询：winchildname、winproname、loosechildname、looseproname。

这样很容易在我的 C# 项目中显示。如果我使用这个查询：

```
SELECT * FROM Games WHERE g_win = 1 OR g_lose = 1 
```

这将返回 k_id 为 1 的孩子玩的每个游戏，但结果是整数而不是实际文本。我知道如何内连接 1 个 int 使其变为文本，但不是 2。因为 g_win 和 g_lose 都是子表中的 k_id。

有没有人可以给我一个提示，因为我觉得我想太多了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T12:55:14.610

您可以通过为表指定别名来多次连接同一个表：

```
WITH Names AS (
  SELECT k_id AS id, k_name, p_name
  FROM Child
  JOIN Pro ON k_pro = p_id
)
SELECT win.k_name AS win_k_name, win.p_name AS win_p_name, lose.k_name AS win_k_name, lose.p_name AS lose_p_name
FROM Games
JOIN Names AS win ON g_win = win.id
JOIN Names AS lose ON g_lose = lose.id 
```

# c# - 让事件在 C# 中处理公共数据对象

> ID：10766293
> 
> 赞同：0
> 
> 时间：2012-05-26T12:40:31.263
> 
> 标签：c#, events

我在用 C# 实现事件架构时遇到了一些问题。基本布局是这样的：

我们有一个与服务器通信的网络层（dll）。该层为数据库内的更改事件创建了几个接口。数据库字段发生更改，dll 调用我对相应接口的实现。我有一个 GUI，在它的主要方法中有一个数据对象，它存储我显示的临时数据列表，直到我的用户更改某些内容，在这种情况下，我会将更改发送到数据库。

现在的问题是我无法在网络层或我的接口实现中实现事件处理程序，因为我的数据对象（应该获取事件的结果）只存在于我的 GUI 中，而且它是main 方法，因此对于适当的对象来说是未知的。

我将以伪代码为例：

```
命名空间客户端连接
{
    公共类 DataListener : IDataListener
    {
        公共委托无效的SomethingReceivedHandler（对象发送者，SomethingData数据包）；
        公共事件 SomethingReceivedHandler somethingRecievedHandler；

        公共无效的SomethingReceived（SomethingData数据包）
        {
            如果（SomethingRecievedHandler ！= null）
            {
                SomethingRecievedHandler(this, packet);
            }
        }

```

是我当前的接口实现。该层类似于：

```
private void ProcessPacket(SomethingData 数据包)
        {
            如果（数据包 == 空）
                返回;
            尝试
            {
                如果（数据包是SomethingData）
                    DataListener.SomethingReceived(packet as SomethingData);
//剪辑

```

我的主要方法是：

```
公共部分类 Main : FormMain
    {
        数据客户端数据；//包含GUI中的所有临时数据

        公共 frmMain()
        {
            客户端数据 = 新数据（）；
            数据监听器 dataListener = newDataListener();
            初始化组件（）；
        }

```

如果事件触发，我想做类似的事情： `ClientData.SomeList.Add(packet)` 取决于上下文。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T13:02:00.317

> 现在的问题是我无法在网络层或我的接口实现中实现事件处理程序，因为我的数据对象（应该获取事件的结果）只存在于我的 GUI 中，而且它是main 方法，因此对于适当的对象来说是未知的。

不确定我是否看到了问题。事件的发布者不需要知道关于事件订阅者的任何信息——这就是它们有用的原因。

根据您的伪代码，它应该很简单：

```
public partial class Main : FormMain
{
    Data ClientData; //Contains all temporary data within the GUI

    public frmMain()
    {
         ClientData = new Data();
         DataListener dataListener = new DataListener();
         // Add an event handler
         dataListener.somethingReceivedHandler += 
             (object sender, SomethingData packet)              
             {
                if (someContext) ClientData.SomeList.Add(packet); 
             };
         InitializeComponent();
    } 
```

您可能希望提升`dataListener`到一个字段（而不是本地），以便它在 ctor 之外保持活动状态（并且您可以在表单关闭时取消订阅）。

# openid - 将我的网址设为 openid

> ID：10766294
> 
> 赞同：1
> 
> 时间：2012-05-26T12:40:31.780
> 
> 标签：openid

如何将我的域`mydomainname.com`用作 OpenID？

我有一个带有 OpenID 的 Blogger URL，可以使用它登录。

我用 myOpenID 创建了一个帐户，并在他们给定的代码中`mydomainname`替换为，但它仍然无法正常工作。`myaccountname``youraccount``<head>`

还需要什么？

```
 <link rel="openid.server" href="http://www.myopenid.com/server" />
  <link rel="openid.delegate" href="http://youraccount.myopenid.com/" />
  <link rel="openid2.local_id" href="http://youraccount.myopenid.com" />
  <link rel="openid2.provider" href="http://www.myopenid.com/server" />
  <meta http-equiv="X-XRDS-Location" content="http://www.myopenid.com/xrds?username=youraccount.myopenid.com" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T06:08:38.250

我查看了您的网站，并看到以下 HTML：

```
<link rel="openid.server" href="http://www.myopenid.com/server" />
<link rel="openid.delegate" href="http://technispace.com/" />
<link rel="openid2.local_id" href="http://technispace.com" />
<link rel="openid2.provider" href="http://www.myopenid.com/server" />
<meta http-equiv="X-XRDS-Location" content="http://www.myopenid.com/xrds?username=technispace.com" /> 
```

这不太对；你应该有`http://technispace.myopenid.com/`and `openid.delegate`，`openid2.local_id`最后一个标签中的“用户名”应该是 just `technispace`， not `technispace.com`。

希望这可以帮助！

# php - PHP - 我正在尝试解析 XML？

> ID：10766299
> 
> 赞同：1
> 
> 时间：2012-05-26T12:41:08.910
> 
> 标签：php, xml, parsing

我正在尝试解析下面的 XML，以便最终得到一个看起来像包含的示例的数组......我很难弄清楚如何让标签内的属性以我想要的方式输出它到...

**XML**

```
<?xml version="1.0" encoding="utf-8"?>
<a>
  <a i="A">
    <a i="0">
      <a i="0">20</a>
      <a i="1">10</a>
    </a>
    <a i="1">
      <a i="0">45</a>
    </a>
  </a>
  <a i="B">
      <a i="0">65</a>
  </a>
  <a i="C">95</a>
</a> 
```

**我想要的数组 :: 注意添加的数组元素**

```
array[A][0][0] = '20';
array[A][0][1] = '10';
array[A][1][1] = '45';
array[B][0] = '65';
array[C] = '20';

array(
        'A' => array(
                        '0' => array(
                                        0 => 20,
                                        1 => 10
                                    ),
                        '1' => array(
                                        0 => 45
                                    ),
        ),
        'B' => array(
                        0 => 65
                    ),
        'C' => '20'
    ); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T12:55:46.703

您想使用 SimpleXML。

[你可以在这里](http://coursesweb.net/php-mysql/php-simplexml)找到教程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T13:01:52.347

对于您想做的事情，我认为您需要使用 SimpleXML。它像多维数组一样存储 XML 元素。请参阅此处的[SimpleXML 教程](http://www.coursesweb.net/php-mysql/php-simplexml)

# c++ - 传递额外的 wParam/lParam 参数？

> ID：10766305
> 
> 赞同：4
> 
> 时间：2012-05-26T12:42:27.443
> 
> 标签：c++, windows, visual-studio-2010, visual-studio-2008, winapi

一个标准的窗口过程函数采用这个原型：

```
LRESULT CALLBACK WndProc (HWND hWnd, UINT msg, WPARAM wParam, LPARAM lParam); 
```

当消息如`WM_MOUSEMOVE`or`WM_CHAR`时，该`WndProc`函数将接收消息源自的窗口，以及任何额外的参数，这些参数将带有 msg 和 wParam/lParam。

我现在拥有的是一堂课。说

```
class Random
{
    public:
        void Initialize ();

    private:
        void Draw ();
        HWND hWnd;

    friend LRESULT CALLBACK RandomProc (HWND hWnd, UINT msg, WPARAM wParam, LPARAM lParam);
}; 
```

由`hWnd`初始化创建后`Initialize ()`，会发送`WM_LBUTTONDOWN`to等消息`RandomProc`。一旦收到消息，我想`RandomProc`用它`Draw ()`来重绘类的窗口`Random`。

问题是，我将有多个`Random`变量，每个变量都有一个窗口。所有的窗口都会将它们的消息发送给`RandomProc`，并且会希望它重新绘制相应的窗口`hWnd`。我不知道哪个随机变量根据 hWnd 参数和 msg/wParam/lParam 发送了消息，因此无法访问相应的`Draw ()`函数，也无法重绘正确的窗口。

有没有办法在每次发送消息时将指向窗口类的指针传递给过程，或者是否有另一种方法可以访问其 hWnd 发送消息的 Random 类？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-26T13:01:40.637

您不是在寻找[`GetWindowLongPtr`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633585%28v=vs.85%29.aspx)/[`SetWindowLongPtr`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644898.aspx)功能吗？

此函数分配/检索任意指针到/从窗口句柄。您可以将指向 Random 类实例的指针分配给您创建的每个窗口。在`RandomProc`您只需使用`GetWindowLongPtr`并将指针转换为`Random*`.

正如克里斯在评论中所说，使用`GWLP_USERDATA`属性来分配指针。

# transparency - WebGL z-buffer 工件？

> ID：10766307
> 
> 赞同：2
> 
> 时间：2012-05-26T12:42:43.327
> 
> 标签：transparency, webgl, alpha, three.js

我们正在开发一个基于 Three.js 的 WebGL 项目，并且无法理解 WebGL 中如何处理透明度。该图像显示了一个使用 alpha = 0.7 绘制的双面曲面，它在其右侧表现正确。然而，靠近中间的地方出现了奇怪的伪影，而左侧的透明度似乎根本不起作用。

[http://emilaxelsson.se/sandbox/vis1/alpha.png](http://emilaxelsson.se/sandbox/vis1/alpha.png)

这个问题也可以在这里看到： [http](http://emilaxelsson.se/sandbox/vis1/) ://emilaxelsson.se/sandbox/vis1/ 有没有人见过类似的东西？可能是什么原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T14:33:10.543

您的问题是透明对象需要按从后到前的顺序进行排序和渲染（如果您尝试将网格的不透明度从 0.7（透明）更改为 1.0（不透明），您可以看到 z-buffer工作得很好）。

看：

*   [http://www.opengl.org/wiki/Transparency_Sorting](http://www.opengl.org/wiki/Transparency_Sorting)
*   [http://www.opengl.org/archives/resources/faq/technical/transparency.htm](http://www.opengl.org/archives/resources/faq/technical/transparency.htm) (15.050)

在您的情况下，解决起来可能不那么简单，因为我假设您只有一个网格。

编辑：只是总结下面的讨论。这样的双面透明网格可以实现正确的渲染。为此，您需要创建 6 个版本的网格，对应于立方体的 6 个边。每个版本都需要根据“立方体的侧面”（前、后、左、右、上、下）按从后到前的顺序排序。渲染时选择正确的网格（基于相机的观察方向）并渲染该单个网格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-07T19:37:01.990

对于您的案例（基于您附加的图片），无需进行昂贵的排序和多个网格的简单解决方案是禁用深度测试并启用面部剔除。如果您在网格前面没有任何不透明对象，则会产生可接受的结果。

# javascript - slideUp/slideDown JS 的问题

> ID：10766309
> 
> 赞同：1
> 
> 时间：2012-05-26T12:43:20.097
> 
> 标签：javascript, jquery, slide

我一直在这里使用此代码：

```
$(document).ready(function(){

$('a[href*=#]').bind('click', function(){
    var $href = $(this).attr('href')
    $('html,body').animate({scrollTop: $($(this).attr('href')).offset().top}, 1200, 'easeInOutExpo');
    return false;
});

$(".category-slider-trigger").click(function(e){
    e.preventDefault;
    $this = $(this);
    var isVisible = $this.next().is(":visible");

    $(".category-slider-content").stop(true,true).slideDown('slow');
    $(".trigger-symbol").attr('src', '/images/plus.png');

    if (!isVisible) {
        $this.find(".trigger-symbol").attr('src', '/images/minus.png');
        $this.next().stop(true,true).slideUp('slow');
    }

    return false;
}); 
```

});

在这个 html 上：

```
<div class="category-slider-content">
<div class="grid_1">&nbsp;</div>
<div class="grid_10 category-filter-area">
    <a class="stock-latest-additions" href="/stock/latest-additions">Latest additions</a>
    <?
    foreach ($stock_categories as $cat) {
        echo("<h2 class=\"stock-category-title\">".$cat['title'].":</h2>");
        echo("<ul class=\"stock-categories-list\">");
        foreach ($cat['sub_categories'] as $sub_cat) {
            echo("<li><a href=\"/stock/".$util->formatCategoryParam($sub_cat['title'])."\">".$sub_cat['title']."</a></li>");
        }
        echo("</ul>");
        echo("<div class=\"clear\"></div>");
    }
    ?>
</div>
<div class="grid_1">&nbsp;</div> 
```

显示/隐藏类别

但是我的功能有问题。单击链接时，类别会从顶部显示并向下滑动，但不会向上滑动。

我在这里设置了一个 jsFiddle ... [http://jsfiddle.net/CwP8w/](http://jsfiddle.net/CwP8w/)

有什么建议么？

谢谢，R

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T12:49:55.007

**工作演示** [http://jsfiddle.net/GmpZb/3/](http://jsfiddle.net/GmpZb/3/)

好的 API：[http ://api.jquery.com/slideToggle/](http://api.jquery.com/slideToggle/)

如果您只使用 slideToggle 进行显示和隐藏，则可以避免完整的 isVisible 逻辑。

这会有所帮助。B-)

**代码已更改**

```
$(".category-slider-content").stop(true,true).slideToggle('slow'); 
```

**完整代码**

```
$(document).ready(function() {

    $('a[href*=#]').bind('click', function() {
        var $href = $(this).attr('href')
        $('html,body').animate({
            scrollTop: $($(this).attr('href')).offset().top
        }, 1200, 'easeInOutExpo');
        return false;
    });

    $(".category-slider-trigger").click(function(e) {
        e.preventDefault;
        $this = $(this);
        var isVisible = $this.next().is(":visible");

        $(".category-slider-content").stop(true, true).slideToggle('slow');
        $(".trigger-symbol").attr('src', '/images/plus.png');

        if (!isVisible) {

            $this.find(".trigger-symbol").attr('src', '/images/minus.png');
            //$this.next().stop(true,true).slideUp('slow');
        }

        return false;
    });

});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T12:53:19.790

## *[演示](http://jsfiddle.net/roXon/CwP8w/4/)*

```
$('a[href*=#]').bind('click', function(){
    var $href = $(this).attr('href');
    $('html,body').animate({scrollTop: $($(this).attr('href')).offset().top}, 1200, 'easeInOutExpo');
    return false;
});

$(".category-slider-trigger").click(function(e){
    e.preventDefault;
    $this = $(this);
    var isVisible = $('.category-slider-content').is(":visible");

    if (!isVisible) {
        $('.category-slider-content').slideDown();
        $this.find(".trigger-symbol").attr('src', '/images/minus.png');
    }else{
        $('.category-slider-content').slideUp();
        $this.find(".trigger-symbol").attr('src', '/images/plus.png');
    }

    return false;
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-26T13:06:36.823

我真的不明白第一个函数应该做什么，但无论如何：

```
$(function() {
    $('a[href*="#"]').on('click', function(e) {
        e.preventDefault;        
        $('html,body').animate({scrollTop: $(this.href).offset().top}, 1200, 'easeInOutExpo');
    });

    $(".category-slider-trigger").on('click', function(e) {
        e.preventDefault;
        $(".category-slider-content").stop(true, true).slideToggle('slow');
        $(".trigger-symbol").attr('src', $(this).is(':visible')?'/images/plus.png':'/images/minus.png');
    });
});​ 
```

[小提琴](http://jsfiddle.net/adeneo/CwP8w/5/)

# c# - 在asp.net中调用服务器站点func鼠标悬停？

> ID：10766311
> 
> 赞同：1
> 
> 时间：2012-05-26T12:43:33.090
> 
> 标签：c#, asp.net, ajax, scriptmanager

当用户将鼠标移到按钮之外时，是否有任何方法可以实现将在 ASP.NET 代码中执行代码的东西？

我不能直接使用 javascript 和 aspx 代码，只能使用 ScriptManager。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T12:58:43.800

你可以使用ajax调用。如果你使用 jquery 库，你可以使用这样的东西：

```
$('#SomeObject').mouseover(function() {
    $.ajax({
        type: "POST",
        url: "<%= Url.Action("Action", "Controller") %>",
        data: { id: x },
        success: function (data, textStatus, xhr) {
            alert("Action performed");
        },
        error: function (xhr, textStatus, errorThrown) {
            alert("An error occurred");
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T12:50:20.667

使用 Javascript 中的 onfocusout 事件来触发回发。

# nginx - Flask 应用程序：从上游读取响应标头时出错

> ID：10766313
> 
> 赞同：2
> 
> 时间：2012-05-26T12:43:50.403
> 
> 标签：nginx, flask, uwsgi

该站点使用 nginx 和一个 uwsgi（烧瓶应用程序）和 shellinabox 终端运行。每 20 或 30 分钟后，shellinabox 终端没有被加载并且 nginx 日志显示这个 -

```
2012/05/26 14:20:27 [error] 4547#0: *117 readv() failed (104: Connection reset by peer) while reading upstream, client: 192.168.122.128, server: _, request: "POST /login/ HTTP/1.1", upstream: "uwsgi://127.0.0.1:1973", host: "www.MYwebapp.org", referrer: "http://www.MYwebapp.org/login/"

2012/05/26 14:20:31 [crit] 4547#0: *105 mkdir() "/var/lib/nginx/tmp/proxy/3/00" failed (13: Permission denied) while reading upstream, client: 192.168.122.128, server: _, request: "GET /terminal/proxy/ShellInABox.js HTTP/1.1", upstream: "http://127.0.0.1:4200/ShellInABox.js", host: "www.MYwebapp.org", referrer: "http://www.MYwebapp.org/terminal/proxy/index/"

2012/05/26 14:21:06 [error] 4547#0: *103 upstream timed out (110: Connection timed out) while reading response header from upstream 
, client: 192.168.122.128, server: _, request: "POST /terminal/proxy/? HTTP/1.1", upstream: "http://127.0.0.1:4200/", host: "www.MYwebapp.org", referrer: "http://www.MYwebapp.org/terminal/proxy/index/"

2012/05/26 14:21:06 [error] 4547#0: *103 open() "/var/www/MYwebapp/templates/50x.html" failed (13: Permission denied), client: 192.168.122.128, server: _, request: "POST /terminal/proxy/? HTTP/1.1", upstream: "http://127.0.0.1:4200/", host: "www.MYwebapp.org", referrer: "http://www.MYwebapp.org/terminal/proxy/index/"

2012/05/26 14:22:31 [error] 4547#0: *136 upstream timed out (110: Connection timed out) while reading response header from upstream, client: 192.168.122.128, server: _, request: "GET /terminal/proxy/index/ HTTP/1.1", upstream: "http://127.0.0.1:4200/index/", host: "www.MYwebapp.org", referrer: "http://www.MYwebapp.org/terminal/"

2012/05/26 14:22:31 [error] 4547#0: *136 open() "/var/www/MYwebapp/templates/50x.html" failed (13: Permission denied), client: 192.168.122.128, server: _, request: "GET /terminal/proxy/index/ HTTP/1.1", upstream: "http://127.0.0.1:4200/index/", host: "www.MYwebapp.org", referrer: "http://www.MYwebapp.org/terminal/" 
```

我试图设置一些超时值......到目前为止没有任何帮助。由于我对 nginx/uwsgi/shellinabox 非常陌生，因此我目前对此感到困惑。
这是我的 nginx.conf 文件-

```
http {
    include       /etc/nginx/mime.types;
    default_type  application/octet-stream;

    log_format  main  '$remote_addr - $remote_user [$time_local] "$request" '
                      '$status $body_bytes_sent "$http_referer" '
                      '"$http_user_agent" "$http_x_forwarded_for"';

    access_log  /var/log/nginx/MYwebapp_access.log  main;

    sendfile        on;
    #tcp_nopush     on;

    #keepalive_timeout  0;
    keepalive_timeout  65;

    #gzip  on;

    #
    # The default server
    #
    server {
        listen       80;
        server_name  _;

        #charset koi8-r;

        #access_log  logs/host.access.log  main;

        location /terminal/proxy {
          rewrite           ^/terminal/proxy/(.*)$ /$1 break;
          proxy_pass        http://localhost:4200/index;
          proxy_set_header  X-Real-IP $remote_addr;
      #proxy_read_timeout 3000;
      uwsgi_connect_timeout 6000;
      uwsgi_read_timeout 6000;
      uwsgi_send_timeout 6000;
        }

        location / { try_files $uri @MYwebapp; }
        location @MYwebapp {
          include     uwsgi_params;
          uwsgi_pass  localhost:1973;
      uwsgi_connect_timeout 6000;
      uwsgi_read_timeout 6000;
      uwsgi_send_timeout 6000;
        }

        error_page  404              /404.html;
        location = /404.html {
            root   /var/www/MYwebapp/templates;
        }

        # redirect server error pages to the static page /50x.html
        #
        error_page   500 502 503 504  /50x.html;
        location = /50x.html {
            root   /var/www/MYwebapp/templates;
        }

    }

    # Load config files from the /etc/nginx/conf.d directory
    include /etc/nginx/conf.d/*.conf;

2012/05/26 14:21:06 [error] 4547#0: *103 upstream timed out (110: Connection timed out) while reading response header from upstream 
, client: 192.168.122.128, server: _, request: "POST /terminal/proxy/? HTTP/1.1", upstream: "http://127.0.0.1:4200/", host: "www.MYwebapp.org", referrer: "http://www.MYwebapp.org/terminal/proxy/index/"
2012/05/26 14:21:06 [error] 4547#0: *103 open() "/var/www/MYwebapp/templates/50x.html" failed (13: Permission denied), client: 192.168.122.128, server: _, request: "POST /terminal/proxy/? HTTP/1.1", upstream: "http://127.0.0.1:4200/", host: "www.MYwebapp.org", referrer: "http://www.MYwebapp.org/terminal/proxy/index/"

2012/05/26 14:22:31 [error] 4547#0: *136 upstream timed out (110: Connection timed out) while reading response header from upstream, client: 192.168.122.128, server: _, request: "GET /terminal/proxy/index/ HTTP/1.1", upstream: "http://127.0.0.1:4200/index/", host: "www.MYwebapp.org", referrer: "http://www.MYwebapp.org/terminal/"
2012/05/26 14:22:31 [error] 4547#0: *136 open() "/var/www/MYwebapp/templates/50x.html" failed (13: Permission denied), client: 192.168.122.128, server: _, request: "GET /terminal/proxy/index/ HTTP/1.1", upstream: "http://127.0.0.1:4200/index/", host: "www.MYwebapp.org", referrer: "http://www.MYwebapp.org/terminal/" 
```

# iphone - 如何在 XCode 中设置 SVN 存储库？

> ID：10766314
> 
> 赞同：6
> 
> 时间：2012-05-26T12:43:54.463
> 
> 标签：iphone, xcode, git, svn, version-control

我已经到了开发 iPhone 应用程序的地步，我需要一种管理版本的方法。我已经研究了实现这一点的方法`Xcode`，我发现我可以选择使用`GIT`或`SVN`.

过去我使用过，这就是我更倾向于走这条路的原因（如果人们觉得它比 更好，`SVN`我愿意使用）。我的问题与.`GIT``SVN``Xcode`

我做了相当多的研究，发现了一些有用的教程，但是很多似乎已经过时了。

我的问题有两个：

1.  请有人可以建议通过设置存储库的步骤`Xcode`吗？
2.  我注意到`Xcode`需要我设置存储库的位置。我不确定在这里做什么，因为我没有自己的服务器。有没有办法解决这个问题？我可以以某种方式设置本地存储库（如果可以的话如何设置？如果不是，我的其他选择是什么？）？

![在此处输入图像描述](../Images/959f12c7518728a7f2282b0050c5c781.png)

提前感谢人们可以提供的任何帮助或建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T13:54:59.173

I think you should go with using GIT. You can create free repository on [bitbucket.org](http://bitbucket.org)

It allows you to create free account which can be used using 5 members of your team. If you want more you need to pay.

Once you are done with creating repo. just check it out on your pc. There are steps given on that site how to do that. Then in the folder which you checked out, create your XCode project. Once your project is ready, add it to the repository. How to do that is also given on bitbucket. Then once you have committed your Xcode project to repository, add that repository to XCode. How to do that is very nicely explained in XCode guide. Just read that.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T17:39:20.823

如果您有家庭服务器（或公司服务器），我会使用[uberSVN](http://www.ubersvn.com/)。引导式安装非常简单。我实际上使用它来将我所有的 Xcode 项目置于版本控制之下。

![截屏](../Images/b4f1f52922212e63cc5c22984493f8be.png)

脚步：

1.  安装[SVN 客户端](http://www.ubersvn.com/download)。（页面右下角。您可以通过页面顶部的选项卡选择 1.6 或 1.7，以及您的操作系统）。
2.  安装[uberSVN](http://www.ubersvn.com/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-26T12:49:24.827

设置自己的 Subversion 或 Git 服务器是开发人员不应该与之抗争的事情，这可能会很痛苦（就系统管理而言）。

如果是我，如果您想公开共享代码（免费！）或者如果您想在自己的几台计算机之间私下共享代码，我会考虑使用 GitHub。

如果您在自己的计算机之间共享，GitHub 上的“微型”帐户每月运行 7 美元。这是我为自己的私人和个人项目所做的选择。很高兴在[Xcode 中内置了支持](http://developer.apple.com/library/ios/#recipes/xcode_help-repositories_organizer/_index.html)。

还有其他第三方提供商同时提供 Subversion 和 Git，[例如 WebFaction](http://www.webfaction.com/services/hosting)，但这也需要花费美元。所有这些服务都必须收回进行系统管理的成本。但我认为让其他人为你做这件事是非常值得不用处理麻烦的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-26T12:49:52.773

SVN 要求您使用服务器来托管您的存储库。如果您正在开发一个开源项目，那么有一些网络服务可以让您免费托管您的存储库（例如 Google 代码）。尽管可以在本地计算机上安装服务器，但在这种情况下最好使用 GIT。当您创建一个新项目时，XCode 会建议为您设置一个 GIT 存储库，或者查看[如何](http://developer.apple.com/library/mac/#documentation/ToolsLanguages/Conceptual/Xcode4UserGuide/SCM/SCM.html#//apple_ref/doc/uid/TP40010215-CH7-SW26)为您现有的项目创建一个新存储库。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-02-17T04:55:49.423

在您的 Mac 上设置本地 SVN 存储库并获得版本控制的好处实际上非常容易，而无需远程/网络存储库。

在这里查看例如解释[https://stackoverflow.com/a/10039004/226086](https://stackoverflow.com/a/10039004/226086) 然后你给 Xcode 的路径是你设置存储库的任何地方，比如 file:///Users/Shared/subversion/ - 在 Preferences/Accounts/Add存储库，当它询问“输入存储库地址”时。

# javascript - 以正确的方式使用 z-index

> ID：10766316
> 
> 赞同：0
> 
> 时间：2012-05-26T12:44:29.580
> 
> 标签：javascript, jquery, html, css

![在此处输入图像描述](../Images/caf0c25e126b16bdb6489596915b2d35.png)

我想创建一个简单的滑块，就像我在图片中显示的那样。我有两个 div 包装器 1 和 wrapper2 以 20px 的边距分隔，我在包装器 1 中有一个按钮，单击它应该向下滑动一个新的 div它应该在包装器 1 和 2 的前面，

我使用的代码是

```
<div id="wrapper1" style="width:960px; height:200px;z-index:100;">
<a href="#" class="clickMe">
   <div id="tab1">
   </div>
</a>
<div id="slider" style="width:400px; height:100px; z-index:999;">
</div>
</div>
<div id="wrapper2" style="width:960px; height:200px; z-index:100;">
</div> 
```

脚本看起来像

```
 $(document).ready(function()
 {
 $("#slider").css({"display":"none"});
 $(".clickMe").click(function()
 {
 $("#slider").slideDown("slow");
 }
 );
 }); 
```

使用此代码，我得到的是滑块窗口通过向下推动 wrapper2 而不是向前滑动而向下滑动。可能是什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T17:13:47.443

您需要一个绝对位置才能使 z-index 起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T13:22:59.343

你必须把你`slider`的包装元素放在外面，否则父子关系会覆盖一些格式规则，比如 z-index。`position:absolute`和其他 css 属性应该由 jQuery 自动设置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-26T12:54:12.567

我认为你应该添加`position:absolute;`到“滑块”，并设置它的位置。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-26T14:01:10.840

我已经把[小提琴](http://jsfiddle.net/VF7tp/3/)放在一起。

以下是相关代码：HTML

```
<div id="wrapper1">
  <div class="clickMeWrapper">
    <a class="clickMe" id="tab1" href="#">Click Me!</a>
    <div class="slider">
    </div>
  </div>
  <div class="clickMeWrapper">
    <a class="clickMe" id="tab1" href="#">Click Me!
    </a>
    <div class="slider">
    </div>
  </div>
</div>
<div id="wrapper2">
</div>​ 
```

jQuery

```
$(document).ready(function() {
    $(".slider").hide();
    $(".clickMeWrapper").click(function(e) {
        e.preventDefault();
        e.stopImmediatePropagation();
        $(this).children(".slider").slideToggle("slow");
    });
});​ 
```

如果有不清楚的地方，请告诉我。

# python - Python 正则表达式 - 了解匹配和搜索之间的区别

> ID：10766318
> 
> 赞同：2
> 
> 时间：2012-05-26T12:44:33.607
> 
> 标签：python, regex, string, search, match

据我所知，

**`match`**: 给定一个字符串 str 和一个模式 pat，match 检查 str 是否与 str 开头的模式匹配。

**`search`**：给定一个字符串 str 和一个模式 pat，搜索检查 str 是否与 str 的每个索引中的模式匹配。

如果是这样，`'^'`在正则表达式的开头使用匹配是否有含义？

据我了解，由于`match`从一开始就已经检查过，所以没有。我可能错了；我的错误在哪里？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T12:48:41.917

我相信没有用。以下是复制/粘贴自：[http ://docs.python.org/library/re.html#search-vs-match](http://docs.python.org/library/re.html#search-vs-match)

Python 基于正则表达式提供了两种不同的原始操作：`re.match()`仅在字符串的开头检查匹配，而在`re.search()`字符串中的任何位置检查匹配（这是 Perl 默认所做的）。

例如：

```
>>> re.match("c", "abcdef")  # No match
>>> re.search("c", "abcdef") # Match
<_sre.SRE_Match object at ...> 
```

以 with 开头的正则表达式`'^'`可用于`search()`限制字符串开头的匹配：

```
>>> re.match("c", "abcdef")  # No match
>>> re.search("^c", "abcdef") # No match
>>> re.search("^a", "abcdef")  # Match
<_sre.SRE_Match object at ...> 
```

但是请注意，在 MULTILINE 模式下，`match()`仅匹配字符串的开头，而使用`search()`以 with 开头的正则表达式`'^'`将匹配每行的开头。

```
>>> re.match('X', 'A\nB\nX', re.MULTILINE)  # No match
>>> re.search('^X', 'A\nB\nX', re.MULTILINE)  # Match
<_sre.SRE_Match object at ...> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-26T12:47:36.113

在正常模式下，如果您使用匹配，则不需要 ^。但在多行模式 ( `re.MULTILINE`) 中，它可能很有用，因为 ^ 不仅可以匹配整个字符串的开头，还可以匹配每行的开头。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-26T16:25:33.723

当具体调用该函数时`re.match`，该`^`字符确实没有什么意义，因为该函数在行首开始匹配过程。*但是，它对 re 模块中的其他函数以及在编译*的正则表达式对象上调用 match 时确实有意义。

例如：

```
text = """\
Mares eat oats
and does eat oats
"""

print re.findall('^(\w+)', text, re.MULTILINE) 
```

这打印：

```
['Mares', 'and'] 
```

`re.findall()`启用and后，它会在`re.MULTILINE`文本的每一行为您提供第一个单词（没有前导空格）。

如果做一些更复杂的事情，比如用正则表达式进行词法分析，并将它应该开始匹配的文本中的起始位置传递给编译的正则表达式（您可以选择作为上一个匹配的结束位置），这可能会很有用. 请参阅[RegexObject.match](http://docs.python.org/library/re.html#re.RegexObject.match)方法的文档。

以简单的词法分析器/扫描器为例：

```
text = """\
Mares eat oats
and does eat oats
"""

pattern = r"""
(?P<firstword>^\w+)
|(?P<lastword>\w+$)
|(?P<word>\w+)
|(?P<whitespace>\s+)
|(?P<other>.)
"""

rx = re.compile(pattern, re.MULTILINE | re.VERBOSE)

def scan(text):
    pos = 0
    m = rx.match(text, pos)
    while m:
        toktype = m.lastgroup
        tokvalue = m.group(toktype)
        pos = m.end()
        yield toktype, tokvalue
        m = rx.match(text, pos)

for tok in scan(text):
    print tok 
```

哪个打印

```
('firstword', 'Mares')
('whitespace', ' ')
('word', 'eat')
('whitespace', ' ')
('lastword', 'oats')
('whitespace', '\n')
('firstword', 'and')
('whitespace', ' ')
('word', 'does')
('whitespace', ' ')
('word', 'eat')
('whitespace', ' ')
('lastword', 'oats')
('whitespace', '\n') 
```

这区分了单词的类型；行首的单词，行尾的单词，以及任何其他单词。

# jquery - Highcharts 删除零值标签

> ID：10766320
> 
> 赞同：13
> 
> 时间：2012-05-26T12:45:08.520
> 
> 标签：jquery, highcharts

我正在我的网站中实现 highcharts，但从演示的角度来看，这具有挑战性。

我的数据加载正常，但对于该系列，一些值为零。我想在不为零时显示标签，否则会变得难以阅读。

我正在尝试做这样的事情：

```
plotOptions: {
   column: {
    stacking: 'normal',
    dataLabels: {
           enabled: this.value == 0 ? false : true,
       color: (Highcharts.theme && Highcharts.theme.dataLabelsColor) || 'white' }
}
} 
```

但这不起作用。我试过只使用 'this' 而不是 value，但也没有拿起它。我无法从库中找到允许我执行此操作而无需创建自定义代码的默认选项。

我检查了一些方法，但零在系列之一中。所以我仍然想为该组的非零值显示标签。

我认为当一个人说 this.y 时，它需要整个团队的价值，而不是单个系列的价值......

有什么建议么？显然我做错了什么！

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-05-26T13:02:03.613

您是否尝试过使用该`formatter`选项`dataLabels`？您应该能够访问其中的数据并决定标签的外观。在这里您可以检查零并返回`null`如下所示。

```
dataLabels: {
    enabled: true,
    color: colors[0],
    style: {
        fontWeight: 'bold'
    },
    formatter: function() {
        if (this.y != 0) {
          return this.y +'%';
        } else {
          return null;
        }
    }
} 
```

此外，如果您无法确定要查看数据的哪一部分，请`console.log(this)`在格式化程序函数中使用，这样您就可以看到正在使用的对象。

查看这个有效的 jsfiddle 示例：http: [//jsfiddle.net/VLmKK/69/](http://jsfiddle.net/VLmKK/69/)

希望有帮助！

更新：返回 null 而不是空字符串，以避免创建 Brett 评论中提到的不可见标签。谢谢。

您也可能[不会返回任何](https://stackoverflow.com/a/48709838/903011)零值。

# objective-c - [__NSCFType searchKeyword:]：无法识别的选择器发送到实例 0x6d8eb80

> ID：10766327
> 
> 赞同：7
> 
> 时间：2012-05-26T12:45:46.317
> 
> 标签：objective-c, unrecognized-selector, uncaught-exception

以下代码是从情节提要向当前视图添加子视图：

```
EventSearchViewController* view1 = [self.storyboard instantiateViewControllerWithIdentifier:@"searchView"];

[view1 setBookingSystem:system];

[self.view addSubview:view1.view]; 
```

在视图“view1”中，有一个 textField。以下是文本字段的 IBAction，事件是“退出时结束”。

```
-(IBAction)searchKeyword:(id *)sender
{
    NSLog(@"searchKeyword");
} 
```

以下是错误信息。

> 2012-05-26 20:26:47.369 OnlineBooking[6607:f803]-[__NSCFType searchKeyword:]：无法识别的选择器发送到实例 0x6d8eb80
> 
> 2012-05-26 20:26:47.369 OnlineBooking[6607:f803] *** WebKit 在 webView 中丢弃了一个未捕获的异常：shouldInsertText:replacingDOMRange:givenAction: delegate: -[__NSCFType searchKeyword:]: 无法识别的选择器发送到实例 0x6d8eb80

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-26T12:59:08.570

`EventSearchViewController`如果您使用 ARC，则需要保留您的，或强烈引用它。如果将其分配`view1`为局部变量，则在调用时将不再存在`searchKeyword:`。（错误表明它的内存已被释放并重新用于不同类型的对象。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-04T20:09:36.983

对我来说，问题是我从来没有打电话

```
- (void)removeTarget:(id)target action:(SEL)action forControlEvents:(UIControlEvents)controlEvents 
```

在我打电话之前

```
- (void)addTarget:(id)target action:(SEL)action forControlEvents:(UIControlEvents)controlEvents 
```

再次。

# javascript - Javascript：如何更改页面中所有链接的样式？

> ID：10766328
> 
> 赞同：1
> 
> 时间：2012-05-26T12:45:52.013
> 
> 标签：javascript, hyperlink, tags

我正在尝试通过 Javascript 更改页面中所有链接的样式。

我尝试了这两个但没有成功：

```
document.links.style.cursor = "wait";
document.getElementsByTagName(a).style.cursor = "wait"; 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-26T12:46:34.397

```
var allLinks = document.links || document.getElementsByTagName('a');
for(var n=0;n<allLinks ;n++)
    document.allLinks [n].style.cursor = "wait"; 
```

是`document.links`一个元素数组，所以`document.links.style.cursor = "wait"`等于`[link1,link2].links.style.cursor = "wait"`。
关于`document.getElementsByTagName(a)`：语法错误，您忘记了引号。正确的是`document.getElementsByTagName("a")`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-26T12:51:59.933

```
var style = document.createElement("style");
document.head.appendChild(style);
try {
  style.innerHTML = "a { cursor: wait; }";
}
catch (_ie) {
  style.styleSheet.cssText = "a { cursor: wait; }";
} 
```

当然，您也可以提前计划需要更改链接的可能性，并预加载这样的静态样式表：

```
.wait-links a { cursor: wait; } 
```

然后，每当您将“等待链接”类添加到`<body>`（或您喜欢的任何容器）时，`<a>`标签都会受到影响。这比迭代更改其各自样式的元素（可能）要有效得多，尽管如果链接不多，它可能并不重要。

在我看来，为这些事情使用样式表是一种更好的做法。实际上，在这种情况下，最好不要将类称为“等待链接”，而是使用一些描述实际发生的事情的词或词。然后你的 JavaScript 代码只是通过添加（或删除）类来确定情况，样式表控制外观的变化。如果您决定在某些情况下需要链接更改颜色或变得不可见，您可以这样做，而无需在脚本中寻找样式更改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-07-17T06:54:25.510

使用 JQuery 和“.css”方法消除了对 for 循环的需要并简化了代码。

```
$('a').css("cursor","wait"); 
```

# php - 如何按使用的数组顺序显示哪些元素？

> ID：10766329
> 
> 赞同：0
> 
> 时间：2012-05-26T12:45:56.803
> 
> 标签：php

这个问题似乎应该在这里得到回答，但是我找不到它，可能是由于缺乏术语。希望其他处于相同情况的人可以从中受益。

我有一个数组 $post_item.(se below) 例如，我从中打印数据

```
$post_item->ID 
```

有没有办法按照我打印的顺序获取哪个项目。换句话说，我想计算项目。

如果该项目是 ID 9 的项目，我想返回 0。如果是 ID 12 的项目，我想返回 1 等。

```
stdClass Object
    (
        [ID] => 9
        [post_author] => 1
        [post_date] => 2012-05-18 12:01:49
        [post_date_gmt] => 2012-05-18 12:01:49
        [post_content] => 
        [post_title] => barnbildarkiv
        [post_excerpt] => 
        [post_status] => inherit
        [comment_status] => open
        [ping_status] => open
        [post_password] => 
        [post_name] => barnbildarkiv
        [to_ping] => 
        [pinged] => 
        [post_modified] => 2012-05-18 12:01:49
        [post_modified_gmt] => 2012-05-18 12:01:49
        [post_content_filtered] => 
        [post_parent] => 0
        [guid] => http://dev.nuagency.se/wp-content/uploads/2012/05/barnbildarkiv.jpg
        [menu_order] => 0
        [post_type] => attachment
        [post_mime_type] => image/jpeg
        [comment_count] => 0
        [filter] => raw
    )
    stdClass Object
    (
        [ID] => 12
        [post_author] => 1
        [post_date] => 2012-05-18 12:02:00
        [post_date_gmt] => 2012-05-18 12:02:00
        [post_content] => 
        [post_title] => animals_hm_giftcards
        [post_excerpt] => 
        [post_status] => inherit
        [comment_status] => open
        [ping_status] => open
        [post_password] => 
        [post_name] => animals_hm_giftcards
        [to_ping] => 
        [pinged] => 
        [post_modified] => 2012-05-18 12:02:00
        [post_modified_gmt] => 2012-05-18 12:02:00
        [post_content_filtered] => 
        [post_parent] => 0
        [guid] => http://dev.nuagency.se/wp-content/uploads/2012/05/animals_hm_giftcards.jpg
        [menu_order] => 0
        [post_type] => attachment
        [post_mime_type] => image/jpeg
        [comment_count] => 0
        [filter] => raw
    )
    stdClass Object
    (
        [ID] => 63
        [post_author] => 1
        [post_date] => 2012-05-21 09:27:41
        [post_date_gmt] => 2012-05-21 09:27:41
        [post_content] => 
        [post_title] => wren-2
        [post_excerpt] => 
        [post_status] => inherit
        [comment_status] => open
        [ping_status] => open
        [post_password] => 
        [post_name] => wren-2
        [to_ping] => 
        [pinged] => 
        [post_modified] => 2012-05-21 09:27:41
        [post_modified_gmt] => 2012-05-21 09:27:41
        [post_content_filtered] => 
        [post_parent] => 62
        [guid] => http://dev.nuagency.se/wp-content/uploads/2012/05/wren-2.gif
        [menu_order] => 0
        [post_type] => attachment
        [post_mime_type] => image/gif
        [comment_count] => 0
        [filter] => raw
    ) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T13:04:54.800

如果您想要“键”（0,1,2 ..），只需转换为数组

```
$arr = array();
foreach($objects as $key=>$val) { $arr[$key] = $val; }

foreach($arr as $key=>$val) {
   if ($val["ID"] == 9) { /* $key is 0,1,2.. */ }
} 
```

也许对问题的更好解释会有所帮助。

# android - 无法在 android 的 AlramManager 中设置指定日期

> ID：10766330
> 
> 赞同：0
> 
> 时间：2012-05-26T12:46:06.523
> 
> 标签：android, notifications, alarmmanager, alarm

我有以下代码来设置一个`date`for `AlaramManager`，

```
 AlarmManager alarm = (AlarmManager)getSystemService(Service.ALARM_SERVICE);

    int mYear = 2012;
    int mMonth = 5;
    int mDay = 26;
    int mHour = 12;
    int mMinute = 34;

    Date dateNotif = new Date (mYear - 1900, mMonth, mDay, mHour, mMinute); 

    Long myDate = dateNotif.getTime();
    Long current = System.currentTimeMillis();

    Intent i = new Intent(getApplicationContext(),ShowNotificationService.class);
    PendingIntent pendingIntent = PendingIntent.getService(getApplicationContext(), 12345,i, 0);

    alarm.set(AlarmManager.RTC_WAKEUP, dateNotif.getTime(), pendingIntent); 
```

当模拟器的时间`12:34`没有出现通知时

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T12:51:37.857

我已经设置了今天的日期和时间

```
Calendar calendar = Calendar.getInstance();
calendar.set(Calendar.YEAR, year);//2012
calendar.set(Calendar.MONTH, 4);// It start from 0-11 so use 4 instead of 5
calendar.set(Calendar.DAY_OF_MONTH, 26);                 
calendar.set(Calendar.HOUR_OF_DAY,9);
calendar.set(Calendar.MINUTE, 0);
calendar.set(Calendar.SECOND, 0);

Intent i = new Intent(getApplicationContext(),ShowNotificationService.class);
PendingIntent pendingIntent = PendingIntent.getService(getApplicationContext(), 12345,i, 0);

alarm.set(AlarmManager.RTC_WAKEUP,calendar.getTimeInMillis(), pendingIntent); 
```

# c#-4.0 - 如何为 Form1 中的 toolStripStatusLabel1 赋值？

> ID：10766331
> 
> 赞同：0
> 
> 时间：2012-05-26T12:46:15.007
> 
> 标签：c#-4.0

所以我有这段代码可以运行一个工作线程等等。我缩短了它以仅显示必要的部分。在 UploaderDoWork 我有一个我想要 toolStripStatusLabel1 的文本。如何从那里将值分配给 toolStripStatusLabel1？

```
using Google.GData.Client;
using Google.GData.Extensions.MediaRss;
using Google.GData.Extensions;
using Google.GData.YouTube;
using Google.YouTube;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Net;
using System.Security.Cryptography.X509Certificates;
using System.Security.Cryptography;
using System.Text;
using System.Threading;
using System.Windows.Forms;
using System.Windows;
using System;
using System.Globalization;
using System.Resources;
using System.Reflection;
using System.ComponentModel;

namespace Something
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private static BackgroundWorker uploader;

        static void UploaderDoWork(object sender, DoWorkEventArgs e)
        {
            //How do I assign a value to toolStripStatusLabel1, that is in Form1 from here?
        }

        private void w()
        {
            uploader = new BackgroundWorker { WorkerReportsProgress = true, WorkerSupportsCancellation = true };
            uploader.DoWork += UploaderDoWork;
            uploader.RunWorkerCompleted += delegate { System.Windows.Forms.MessageBox.Show(ursache + " beendet!"); };
            uploader.RunWorkerAsync();
        }

        private void button1_Click(object sender, EventArgs e)
        {
            w();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T12:51:23.630

您将使用 Control.Invoke 或 Control.BeginInvoke 方法。看看这里[http://msdn.microsoft.com/en-us/library/757y83z4(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/757y83z4(v=vs.71).aspx)

像这样的东西：

```
toolStripStatusLabel.Invoke((MethodInvoker)delegate
        {
            toolStripStatusLabel.Text = "foo";
        }); 
```

请注意，这是未经测试的。

# clickonce - 如何找到 *.appref-ms 的目标 *.exe 文件

> ID：10766334
> 
> 赞同：88
> 
> 时间：2012-05-26T12:46:42.977
> 
> 标签：clickonce, shortcut, applicationreference

我必须备份从文件[*.appref-ms](http://dl.dropbox.com/u/40690073/GitHub.appref-ms)
运行的程序 当我使用文本编辑器打开文件[GitHub.appref-ms时，我发现](http://dl.dropbox.com/u/40690073/GitHub.appref-ms)

> [http://github-windows.s3.amazonaws.com/GitHub.application#GitHub.application](http://github-windows.s3.amazonaws.com/GitHub.application#GitHub.application) , Culture=neutral, PublicKeyToken=8f45a2159c87c850, processorArchitecture=x86

目标存储在本地磁盘的什么位置？
编辑**PublicKeyToken**会导致默认或空图标。
编辑**URL**导致“应用程序无法启动”。
*.appref-ms 如何以 Exe 为目标？
[这不能回答我的问题](https://stackoverflow.com/a/281232/1008278)

注意：我尝试离线打开文件，它仍然可以正常工作。

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2014-09-04T02:39:45.793

对此的简单回答；我试图弄清楚同样的事情，它只是击中了我。

GitHub**是**安装在您计算机上的程序，当它运行时，它将**使用**线程和 RAM。所以这使它成为一个过程。您所要做的就是打开任务管理器，单击进程选项卡，找到“Github.exe”，右键单击，打开文件位置。瞧！我的在文件夹下`%LocalAppData%\Apps`，大约 4 层深。

[![截屏](../Images/d993281cc848ec918c9c680fb3ded3aa.png)](https://i.stack.imgur.com/gKuUh.png)

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-05-31T05:07:11.120

appref-ms 文件不指向 exe。当您点击该快捷方式时，它会在部署提供程序 url 处调用部署清单并检查更新。它检查应用程序清单（yourapp.exe.manifest）以查看要下载的文件，该文件包含入口点（即exe）的定义。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-07-19T11:23:00.867

该应用程序存储`%LocalAppData%`在您的`%UserProfile%`. 所以完整的路径可能是：

```
C:\Users\username\AppData\Local\GitHub 
```

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2017-11-30T22:24:23.823

我知道这个问题很老，但是我找到类似应用程序的可执行文件的方法是首先打开应用程序，然后打开**Windows Task Manager**，然后在“**进程**”列表中右键单击它并选择“**打开文件位置**”。

在我的情况下，我似乎无法在应用程序参考文件中找到该位置......

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2017-10-03T13:52:05.207

ClickOnce 应用程序的设计目的是让最终用户下载一个“下载器”——ClickOnce 应用程序，然后当你运行它时，它会下载并安装在 %LocalAppData%\Apps\2.0 ..... 然后它是每个文件夹的随机文件夹名称操作系统安装你做。备份是没有意义的，试图移动程序也是如此。ClickOnce 的要点是 2-Fold： 1\. 程序的自动更新 2\. 最终用户没有安装程序，也无法移动应用程序或中断

%LocalAppData%\Apps\2.0..... 文件夹是程序，%LocalAppData%\GitHub 是设置文件夹。

我不打算介绍如何规避这一点-仅说明上述内容。:P

我可以合法地说的最好的“提示”是：在某些情况下，如果空间不足，您“可以”移动所有文件所在的最终文件夹并使用符号链接。但是，并非所有应用程序都可以运行，并且一旦您运行，它们基本上会删除符号链接。然后他们可能会重新安装或只是删除链接。还要记住，其他应用程序也可能使用相同的最终文件夹，因此移动文件夹也会影响这些应用程序。

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2015-07-08T09:27:26.347

ClickOnce 应用程序存储在用户的配置文件下`%LocalAppData%\Apps\2.0\`。

从那里，使用搜索功能查找您的应用程序。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2022-02-21T23:39:29.653

我需要一种不同的方法，并根据[@fnkr](https://stackoverflow.com/a/31288620/2489494)和[@edgeclub](https://stackoverflow.com/a/46546286/2489494)的最后两个答案，通过这种奇怪的方法找到了我自己创建的“ClickOnce”应用程序的安装文件夹：

1.  通过使用资源管理器（Windows 按钮 + E）在用户目录的 AppData 文件夹中搜索找到您的应用程序“MyAppTool”：

```
 %appdata%/ 
```

2.  在资源管理器的搜索字段中搜索您的应用“MyToolApp”

```
 C:\Users\[USER]\AppData\Roaming\Microsoft\Windows\StartMenu\Programs\[MyAppTool] 
```

3.  在 Notepad++ 中打开 appref-ms 的二进制文件：

```
 C:\Users\[USER]\AppData\Roaming\Microsoft\Windows\Start Menu\Programs\[MyAppTool] 
```

4.  打开该文件后，再次打开 file->open 对话框，然后该对话框似乎指向目标目录：

```
 C:\Users\[USER]\AppData\Local\Apps\2.0\AONBAQC0.9W3\ZG999AGR.2YN\[my..ool]_0000000000000000_0001.0005_14f3f4d5893ce2f9 
```

瞧，一种解决 ClickOnce 应用程序位置的顽固方法！

# less - Linux 上 LESS CSS 的当前状态

> ID：10766340
> 
> 赞同：1
> 
> 时间：2012-05-26T12:47:20.140
> 
> 标签：less

如果我想在本地使用 less.js 并在此文件或导入的文件发生更改时自动重新编译文件，我应该使用什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T12:51:50.607

[lessphp](http://leafo.net/lessphp/)是一个完全用 PHP 编写的 LESS 编译器，如果你已经在使用 PHP，它可以很容易地在服务器端运行。它终于在昨天刚刚添加到[Packagist 中](http://packagist.org/app.php/packages/leafo/lessphp)！[您可以使用composer](http://getcomposer.org/)在项目到项目的基础上安装它。这是一个示例 composer.json 文件，用于将其声明为您自己项目的依赖项：

```
{
    "require": {
        "leafo/lessphp": "dev-master"
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T12:58:32.643

您也可以将 dotless 与单声道一起使用。如果您有单声道，则使用 -w（watch）选项运行 dotless。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-26T13:26:24.413

你可以使用看门狗和[这个脚本](http://keyes.ie/automatically-compile-less-files/)，我觉得这很有用。要安装看门狗，您首先需要安装 python 设置工具（`apt-get install python-setuptools`假设您使用的是 Debian 或基于 Debian 的发行版，例如 Ubuntu）。然后，简单地说`easy_install watchdog`。安装完成后，您将能够运行 lesswatch 脚本。

# php - 使用 jQuery 自动提交表单不起作用

> ID：10766346
> 
> 赞同：0
> 
> 时间：2012-05-26T12:48:30.547
> 
> 标签：php, jquery, ajax, forms, form-submit

我有一个表单：`<form id="form" action="updatescore.php" method="post">`和一个 php 文件：`updatescore.php`其中包含使用表单中的输入值更新数据库的代码。这一切都在使用提交按钮时起作用。

现在，如果 javascript 语句为真，我想删除提交按钮并提交表单。

js代码部分为：

```
if (document.getElementById('uhs').innerHTML > 0) { //this is true because the div gone is hidden
                    $('#gone').hide();
                    $.ajax({
                        type: "POST",
                        data: $("#form").serialize(),
                        cache: false,
                        url: "updatescore.php",
                        success: function () { //if submit to db is done
                            getUsers(1); //a function to reload a page overview
                        }
                    });
                } 
```

但是，如果该语句为真并且数据库未更新，则不会发生任何事情。关于这个有什么想法吗？

亲切的问候，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T12:54:58.823

你确定条件是真的吗？

```
if (document.getElementById('uhs').innerHTML > 0) { //this is true because the div gone is hidden
   alert('its true'); 
```

这也是不对的：

```
if (document.getElementById('uhs').innerHTML > 0) 
```

也许：

```
if (document.getElementById('uhs').innerHTML.length > 0) 
```

或者：

```
if ($('#gone')[0].style.display=="none") { 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T13:07:40.410

提交按钮是触发运行代码的事件：

```
 $('#gone').hide();
                $.ajax({
                    type: "POST",
                    data: $("#form").serialize(),
                    cache: false,
                    url: "updatescore.php",
                    success: function () { //if submit to db is done
                        getUsers(1); //a function to reload a page overview
                    }
                }); 
```

document.getElementById('uhs').innerHTML > 0 不是事件，因此无法运行您的代码。

试试这个.....

```
 document.addEventListener('keyup', function (e) {
           //
          if (document.getElementById('uhs').innerHTML > 0) { 
                $('#gone').hide();
                $.ajax({
                    type: "POST",
                    data: $("#form").serialize(),
                    cache: false,
                    url: "updatescore.php",
                    success: function () { //if submit to db is done
                        getUsers(1); //a function to reload a page overview
                    }
                });
            }
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-26T20:21:18.357

Thanks for the replies. The code worked, but it seemed that a bug in another part of the code was messing with the AJAX call. So in the end there was nothing wrong with the code at all.

Again, thanks for the replies and suggestions!

# jsf - 表达式错误：命名对象：找不到 javax.faces.convert.IntegerConverter

> ID：10766349
> 
> 赞同：1
> 
> 时间：2012-05-26T12:48:43.083
> 
> 标签：jsf, select, richfaces, converter

以下是我的代码

```
<rich:select id="cycle_group" value="#{menuCycleBean.menuCycleDetailTO.menuCycleGroupId}" defaultLabel="#{msg['gobal.select.default.label']}" 
                converter="javax.faces.convert.IntegerConverter">
                <f:selectItems value="#{menuCycleBean.cycleGroupList}" var="n" itemLabel="#{n.label}" itemValue="#{n.id}" />
                </rich:select> 
```

“menuCycleGroupId”是“整数”值，“n.id”是“字符串”值。我需要将字符串转换为整数。我正在使用以下属性`converter="javax.faces.convert.IntegerConverter"`，但它给出了错误。

> 表达式错误：命名对象：找不到 javax.faces.convert.IntegerConverter。

如何使用转换器`<rich:select>`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-26T18:11:43.503

该`converter`属性必须指向具体实例，例如`#{bean.converter}`或包含带有转换器 ID 的字符串文字，而不是完全限定的转换器类名称。如果您单击标准转换器的[javadoc](http://docs.oracle.com/javaee/6/api/javax/faces/convert/IntegerConverter.html)`CONVERTER_ID`中的字段常量，那么您会[发现](http://docs.oracle.com/javaee/6/api/constant-values.html#javax.faces.convert.IntegerConverter.CONVERTER_ID)它是针对.`javax.faces.Integer``IntegerConverter`

所以，这应该这样做：

```
<rich:select ... converter="javax.faces.Integer" /> 
```

# postgresql - PostgreSQL + GROUP_P 的词法定义

> ID：10766360
> 
> 赞同：0
> 
> 时间：2012-05-26T12:50:32.120
> 
> 标签：postgresql

我在哪里可以找到所有 PostgreSQL 关键字/标记的词法定义，例如 GROUP_P？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T16:39:43.463

`GROUP_P`不是关键字，它是 C 编译器上下文中的符号，并且在 C 源代码之外没有词法意义。

在此声明中`parser/kwlist.h`：

```
PG_KEYWORD("group", GROUP_P, RESERVED_KEYWORD) 
```

第一个参数“group”是关键字，第二个参数 GROUP_P 通常是枚举字段或 #define（取决于包含器）。

头文件`src/include/parser/keywords.h`提供了一个结构体类型`ScanKeyword`，可以直接映射到 PG_KEYWORD 宏，逐个字段：

```
typedef struct ScanKeyword
{
    const char *name;           /* in lower case */
    int16       value;          /* grammar's token code */
    int16       category;       /* see codes above */
} ScanKeyword; 
```

一个具体的使用例子，看看ECPG是怎么做的 `src/interfaces/ecpg/preproc/keywords.c`

# python - 使用python在wordpress上发帖

> ID：10766364
> 
> 赞同：1
> 
> 时间：2012-05-26T12:51:16.657
> 
> 标签：python, wordpress, networking

这是我第一次尝试任何互联网应用程序。我正在尝试使用 python 从我的 PC 中的文本文档在我的博客上发布。我的代码在这里

```
f = open('proofs.txt') 
data = f.readline()
print data
import wordpresslib
url = 'http://www.agnsa.wordpress.com/xmlrpc.php'
wp = wordpresslib.WordPressClient(url,'agnsa','pan@13579')
wp.selectBlog(0)
post = wordpresslib.WordPressPost()
post.title = 'try'
post.description = data
idPost = wp.newPost(post,True) 
```

运行该模块后，它给出了连接到服务器失败的错误。这是回应。我试图找到它，但我无法理解如何解决它。我以前从未开发过任何此类应用程序。这很简单，但我现在不明白该怎么做......任何人都可以给我建议做什么吗？

错误是：

```
[Errno 10060] A connection attempt failed because the connected party did
not properly respond after a period of time, or established connection failed
because connected host has failed to respond 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-26T13:14:20.093

一些可帮助您排除故障的提示：

1.  域[http://www.agnsa.wordpress.com/](http://www.agnsa.wordpress.com/)不存在。这个对吗？
2.  在 wordpress 上，默认情况下不启用 XMLRPC。转到设置-> 编写-> 远程发布并选中您帐户上的 XML-RPC 框。[有关 XML-RPC 支持的更多信息](http://codex.wordpress.org/XML-RPC_Support)。
3.  **已编辑**wordpress 上 XML RPC 的正确路径，因为您有一个域`agneesa.wordpress.com`将是`http://agneesa.wordpress.com/wordpress/xmlrpc.php`. [请参阅 Endpoint 部分](http://codex.wordpress.org/XML-RPC_Support)。
4.  您刚刚发布了密码吗？StackOverflow 有一个值得信赖且乐于助人的社区。但我不确定我会相信世界其他地方:)

如果您在服务器端启用了 XML-RPC 并且您的评论中的地址是正确的，那么这段代码应该可以工作：

```
import wordpresslib

# dummy data to be on safe side
data = "Post content, just ensuring data is not empty"

url='http://agneesa.wordpress.com/wordpress/xmlrpc.php'
# insert correct username and password
wp=wordpresslib.WordPressClient(url,'agnsa','pan@13579')
wp.selectBlog(0)
post=wordpresslib.WordPressPost()
post.title='try'
post.description=data
idPost=wp.newPost(post,True) 
```

最新的错误表明您无法建立连接。这可能是由于您的代码中的地址错误，或者是由于服务器端出现故障（由于某种原因不接受连接）。[在关于 SO、 here](https://stackoverflow.com/questions/5136033/python-soap-xmlhttprequest)、[here](https://stackoverflow.com/questions/9019134/httpconnection-request-socket-gaierror-in-python)和[here](https://stackoverflow.com/questions/8860200/python-scraper-socket-error-breaks-script-if-target-is-404d)的其他问题中讨论了同样的错误——虽然它们与您正在使用的库无关，但浏览答案和相关问题可能有助于为您提供线索。

# ruby - 从 ruby 中的标准输入获取整数数组的有效/直接方法

> ID：10766365
> 
> 赞同：3
> 
> 时间：2012-05-26T12:51:21.587
> 
> 标签：ruby, arrays

我的方法

*   获取数组元素作为带有分隔符的字符串，例如空格或逗号
*   拆分字符串
*   将每个元素转换为数字并压入数组

代码如下所示：

```
puts 'Enter array elements with a space'
array_as_string = gets 
if array_as_string.length > 0
  input_array = []
  array_as_string.split(' ').each { |x| input_array.push(x.to_i) }
else
  puts 'Invalid input'
end 
```

是否有更好/更有效的替代方案或直接的方式来做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-26T13:01:39.213

的默认参数`split`是空格。对数组中的每个元素做某事并得到一个数组作为结果的习惯用法是`map`.

```
puts "Enter array elements with a space"
array_as_string = gets
array = array_as_string.split.map(&:to_i) 
```

# java - Java - 绘制 18 个以 20 度角分隔的矩形

> ID：10766367
> 
> 赞同：-4
> 
> 时间：2012-05-26T12:51:28.310
> 
> 标签：java, trigonometry

编写一个小程序，绘制相对于前一个矩形转角 ALPHA 的矩形（使用 fillPolygon() 函数）。旋转中心是矩形的一个角。ALPHA 等于 20 度，矩形的一侧等于 30，另一侧等于 50。矩形的数量等于 18。

请在计算 fillPolygon 函数的矩形角坐标时需要帮助，不幸的是我的三角函数很差。我什至不知道如何找到这些角落

我附上我的作业链接，它是Task2。感谢帮助

[http://staff.neu.edu.tr/~aamircanov/COM442Ass.pdf](http://staff.neu.edu.tr/~aamircanov/COM442Ass.pdf)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T13:25:04.430

您需要执行`rotate`转换。每个扩展抽象类的类都`Graphics2D`实现了这样的方法。

`paint`只需在您的小程序的方法中插入适当的代码。您将需要`drawRect`（或`fillPolygon`按照老师的意愿）`translate`和`rotate`方法的组合。

查看 javadoc [http://docs.oracle.com/javase/1.4.2/docs/api/java/awt/Graphics2D.html#rotate%28double%29](http://docs.oracle.com/javase/1.4.2/docs/api/java/awt/Graphics2D.html#rotate%28double%29)

# c# - 搜索所有连接的驱动器的最佳和有效方法是什么？

> ID：10766372
> 
> 赞同：1
> 
> 时间：2012-05-26T12:51:52.723
> 
> 标签：c#, filesystems

我需要在所有连接的驱动器（逻辑驱动器和物理驱动器）中搜索特定文件类型（例如 mp4）。我知道我可以编写一个递归函数来做到这一点。但我正在寻找一种最有效的方法，因为这可能是一个耗时且消耗 CPU 的操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T13:12:18.440

你可以利用这个`dir`命令，让文件系统做它擅长的事情。

```
static string[] SearchFiles(params string[] patterns)
{
    var searchPatterns = DriveInfo.GetDrives()
        .Where(d => d.IsReady && d.DriveType != DriveType.NoRootDirectory)
        .SelectMany(d => patterns.Select(p => d.RootDirectory + p));

    using (var process = new Process())
    {
        process.StartInfo.FileName = Path.Combine(Environment.SystemDirectory, "cmd.exe");
        process.StartInfo.Arguments = "/C dir " + String.Join(" ", searchPatterns) + " /s/b";
        process.StartInfo.UseShellExecute = false;
        process.StartInfo.RedirectStandardOutput = true;
        process.StartInfo.CreateNoWindow = true;
        process.Start();

        string strOutput = process.StandardOutput.ReadToEnd();
        process.WaitForExit();

        return strOutput.Split(Environment.NewLine.ToArray());
    }
} 
```

并像这样使用它：

```
var files = SearchFiles("*.jpg", "*.mp?", "*.mpeg"); 
```

由于此操作可能需要一些时间，您可以使用[BackgroundWorker](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)在后台线程中运行它。

此外，由于输出可能非常大，您可能会考虑输出到文件（例如，通过添加`> out.txt`after `/s/b`）并处理文件，而不是返回字符串数组。

**编辑：**
您可以通过并行搜索驱动器来提高性能。

```
static List<string> SearchFiles(params string[] patterns)
{
    var result = new List<string>();

    var drives = DriveInfo.GetDrives();
    Parallel.ForEach(drives, drive =>
    {
        if (!drive.IsReady || drive.DriveType == DriveType.NoRootDirectory)
            return;

        var searchPatterns = patterns.Select(p => drive.RootDirectory + p);

        using (var process = new Process())
        {
            process.StartInfo.FileName = Path.Combine(Environment.SystemDirectory, "cmd.exe");
            process.StartInfo.Arguments = "/C dir " + String.Join(" ", searchPatterns) + " /s/b";
            process.StartInfo.UseShellExecute = false;
            process.StartInfo.RedirectStandardOutput = true;
            process.StartInfo.CreateNoWindow = true;
            process.Start();

            string strOutput = process.StandardOutput.ReadToEnd();
            process.WaitForExit();

            result.AddRange(strOutput.Split(Environment.NewLine.ToArray(), StringSplitOptions.RemoveEmptyEntries));
        }
    });

    return result;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T15:22:26.000

最后我让它工作了。代码如下：

```
 static List<string> SearchFiles(string pattern)
    {
        var result = new List<string>();

        foreach (string drive in Directory.GetLogicalDrives())
        {
            Console.WriteLine("searching " + drive);
            var files = FindAccessableFiles(drive, pattern, true);
            Console.WriteLine(files.Count().ToString() + " files found.");
            result.AddRange(files);
        }

        return result;
    }

    private static IEnumerable<String> FindAccessableFiles(string path, string file_pattern, bool recurse)
    {
        Console.WriteLine(path);
        var list = new List<string>();
        var required_extension = "mp4";

        if (File.Exists(path))
        {
            yield return path;
            yield break;
        }

        if (!Directory.Exists(path))
        {
            yield break;
        }

        if (null == file_pattern)
            file_pattern = "*." + required_extension;

        var top_directory = new DirectoryInfo(path);

        // Enumerate the files just in the top directory.
        IEnumerator<FileInfo> files;
        try
        {
            files = top_directory.EnumerateFiles(file_pattern).GetEnumerator();
        }
        catch (Exception ex)
        {
            files = null;
        }

        while (true)
        {
            FileInfo file = null;
            try
            {
                if (files != null && files.MoveNext())
                    file = files.Current;
                else
                    break;
            }
            catch (UnauthorizedAccessException)
            {
                continue;
            }
            catch (PathTooLongException)
            {
                continue;
            }

            yield return file.FullName;
        }

        if (!recurse)
            yield break;

        IEnumerator<DirectoryInfo> dirs;
        try
        {
            dirs = top_directory.EnumerateDirectories("*").GetEnumerator();
        }
        catch (Exception ex)
        {
            dirs = null;
        }

        while (true)
        {
            DirectoryInfo dir = null;
            try
            {
                if (dirs != null && dirs.MoveNext())
                    dir = dirs.Current;
                else
                    break;
            }
            catch (UnauthorizedAccessException)
            {
                continue;
            }
            catch (PathTooLongException)
            {
                continue;
            }

            foreach (var subpath in FindAccessableFiles(dir.FullName, file_pattern, recurse))
                yield return subpath;
        }
    } 
```

# spring-mvc - Spring 3.1 MVC 和安全性：同一页面上的登录和注册表单（多个表单）都被提交

> ID：10766373
> 
> 赞同：1
> 
> 时间：2012-05-26T12:51:57.440
> 
> 标签：spring-mvc, spring-security, spring-3

我正在组合使用 Spring (3.1)、Spring MVC (3.1) 和 Spring Security (3.0)，并且我将一个 JSP 页面放在一起，上面有两个表单；一个是登录表格，另一个是注册表格（即创建新用户）。

对于注册表单，我使用 Spring`form`标签，由控制器支持来处理请求，但对于登录表单，我不关心 Spring`form`标签，因为我认为不需要它们。我也不需要编写控制器来处理表单提交，因为只要将请求提交到 Spring Security 就会负责进行身份验证`j_spring_security_check`。

注册表工作正常，但登录表单有问题。似乎当我点击登录表单上的提交按钮时，注册表也被提交了，或者至少 Spring 认为我正在尝试提交该表单。这是JSP：

```
 <form id="loginform" method="POST" action="<c:url value='j_spring_security_check'/>">
        <label for="existing_email">Email:</label> 
        <input name="j_username" id="existing_email" type="text" value="${SPRING_SECURITY_LAST_USERNAME}" /> 

        <label for="existing_password">Password:</label> 
        <input name="j_password" id="existing_password" type="password" /> 

        <input id="login-form-submit" type="submit" value="Sign in" />
    </form>

    <form:form id="registrationform" modelAttribute="user" method="POST" action="register">
        <form:label path="username" for="email">Email:</form:label> 
        <form:input path="username" name="username" id="email" type="text" /> 
        <form:errors path="username" cssClass="formError" />

        <form:label path="password" for="password">Password:</form:label>
        <form:input path="password" name="password" id="password" type="password" />
        <form:errors path="password" cssClass="formError" />

        <input id="registration-form-submit" type="submit" value="Sign up" />
    </form:form> 
```

请注意，**提交类型的输入的**`form`标签不存在，这在我看到的示例中似乎是正常的事情。我想将表单标签添加到提交按钮没有意义，因为它不会映射到目标对象（在本例中为*用户）上的任何内容。*

 ***当我单击“登录”按钮时，出现以下异常：

```
SEVERE: Servlet.service() for servlet [appServlet] in context with path [/project1] threw exception [An exception occurred processing JSP page /WEB-INF/views/registration.jsp at line 29
28:         <form:form id="registrationform" modelAttribute="user" method="POST" action="register">
29:             <form:label path="username" for="username">Username:</form:label> 
30:             <form:input path="username" name="username" id="username" type="text" />
31:             <form:errors path="username" cssClass="formError" />
32:              

Stacktrace:] with root cause
java.lang.IllegalStateException: Neither BindingResult nor plain target object for bean name 'user' available as request attribute
    at org.springframework.web.servlet.support.BindStatus.<init>(BindStatus.java:141) 
```

我从忘记包含 modelAttribute 属性的情况中认识到这一点`form:form`，但我当然不想将此表单提交给我的控制器。

我有一种感觉，我犯了一个错误或一个简单的解决方案。任何人都可以推荐一种解决方法或不同的方法吗？

这是在需要时处理注册请求的控制器方法：

```
 @RequestMapping(value = "**/register", method = RequestMethod.POST)
    public String registerUser(@ModelAttribute("user") @Validated User user, BindingResult errors, ModelMap model) {
        if (errors.hasErrors()) {
            return "registration";
        }
        // Other stuff then...
        return "profile"
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T16:59:03.927

*如果您在表单标记中使用“user”modelAttribute，则必须*存在名为“user”的非空请求属性。

在请求属性中添加它的一种方法是您在上面的答案中所做的。其他方式有：

(1) 在 ModelMap 中添加：

```
 @RequestMapping(value = "/loginfailed", method = RequestMethod.GET)
public String loginFailed(ModelMap model) {
    model.addAttribute("user", new User());
    model.addAttribute("error", "true");
    return "registration";
} 
```

(2) 添加请求范围（使用 WebRequest 或 HttpServletRequest）：

```
 @RequestMapping(value = "/loginfailed", method = RequestMethod.GET)
public String loginFailed(ModelMap model, WebRequest webRequest) {
   webRequest.setAttribute("user", new User(), WebRequest.SCOPE_REQUEST);
    model.addAttribute("error", "true");
    return "registration";
} 
```

(3) 在方法上使用@ModelAttribute：

```
 @ModelAttribute("user")
public User user() {
    return new User();
} 
```

另请参阅[在方法上](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/mvc.html#mvc-ann-modelattrib-methods)使用 @ModelAttribute和[在方法参数上使用 @ModelAttribute](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/mvc.html#mvc-ann-modelattrib-method-args)

另请注意，您不必使用 type 属性。请参见[form:input](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/spring-form.tld.html#spring-form.tld.input)和[form:password](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/spring-form.tld.html#spring-form.tld.password)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T12:02:26.347

我认为这个问题特别是当登录失败并且提供相同的页面时，尽管在不同的 URL 路径上，因此通过不同的控制器方法。因此，我最初怀疑问题在于提交的两个表格可能是一个红鲱鱼，尽管我仍然不完全理解发生了什么并且可能与它有关。无论如何，这就是为我解决问题的原因：

我有一个最初看起来像这样的控制器方法：

```
@RequestMapping(value = "/loginfailed", method = RequestMethod.GET)
public String loginFailed(ModelMap model) {
    model.addAttribute("error", "true");
    return "registration";
} 
```

在 Spring Security 上下文`/loginfailed`中，如果登录尝试失败，我将默认指定为要访问的路径。这似乎是需要用户对象的地方，因此如果我按如下方式更改签名，则一切正常：

```
@RequestMapping(value = "/loginfailed", method = RequestMethod.GET)
public String loginFailed(@ModelAttribute("user") User user, BindingResult errors, ModelMap model) {
    model.addAttribute("error", "true");
    return "registration";
} 
```

欢迎其他人发表任何评论/澄清。***

# iphone - 如何将此 NSDictionary 数据保存到 plist 并检索它？

> ID：10766376
> 
> 赞同：0
> 
> 时间：2012-05-26T12:52:14.710
> 
> 标签：iphone, arrays, uitableview, plist, nsdictionary

我有这些数据想保存到 plist。MONTH 和 DAY 是系统日期整数。我知道如何得到它们。

```
 MONTH
  DAY
   int, string, int 
```

例子：

```
 5
  25
   10, text, 50 
```

我有一个 UITableView 我必须以这种方式导入数据：

如果系统月份是 3，则在 plist 中搜索键 3 并仅使用月份 3 的天数填充表。

最好的方法是什么？

**编辑**：

年份并不重要。在表格中，它应该是月份的列表，按下时应该列出与特定月份相关的所有日期。每天都应该有与特定日期相关的所有数据。

我对如何构造 plist 中的数据感到困惑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T13:02:09.123

`NSDate`是需要开发人员干预才能归档（或代码）到 plist 文件中的那些 Objective C 对象之一。

而且您的问题仍然如此广泛，我不能 100% 确定在*您的具体情况下*最好的方法是什么。您想在一个单元格中显示“2012”，然后在下面的缩进单元格中显示“5”吗？在这种情况下，您可能希望将 plist 中的日期加载到具有`NSDate`属性的自定义对象中。或者，您可能希望将单独的“年”和“月”值与单个对象关联，该对象列出了多个表格视图单元格。或者，也许您希望将所有这些都列在每个日期的单个自定义表格视图单元格中。

看看 StackOverflow 上的其他问题（[比如这个](https://stackoverflow.com/questions/2013850/whats-the-optimum-way-of-storing-an-nsdate-in-nsuserdefaults)），这些问题描述了如何保存和加载`NSDate`对象，然后考虑如何在你的`UITableViewController`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T13:07:53.227

看起来这个线程有一些关于将 NSDictionary 保存为 plist 的好信息：

[将 NSDictionary 保存到 plist](https://stackoverflow.com/questions/6311037/save-nsdictionary-to-plist)

至于在表格视图中显示你的结果，我对你如何组织你的 NSDictionary 有点困惑。一般来说，你应该这样做：

```
NSArray *arrayDataForMonthZero = [[NSArray alloc] initWithObjects:@"Your",@"Objects",@"For",@"Section",@"Zero"];
NSArray *arrayDataForMonthOne = [[NSArray alloc] initWithObjects:@"Your",@"Objects",@"For",@"Section",@"One"];
...
NSArray *arrayDataForMonthEleven = [[NSArray alloc] initWithObjects:@"Your",@"Objects",@"For",@"Section",@"Eleven"];

NSDictionary *tableData = [[NSDictionary alloc] initWithObjectsAndKeys:arrayDataForMonthZero,@"0",arrayDataForMonthOne,@"1",...,arrayDataForMonthEleven,@"11"]; 
```

然后，创建一个指向要使用的数据集的 NSArray 指针。因此，如果要显示第三部分，只需执行以下操作：

```
NSArray *tableDataPtr = [tableData objectAtIndex:@"3"]; 
```

这将选择您刚刚创建的与第三个月相关的所有数据。在向表视图委托和数据源提供命令时使用此对象。

# android - 安卓模拟器上的3g连接

> ID：10766377
> 
> 赞同：2
> 
> 时间：2012-05-26T12:52:30.633
> 
> 标签：android, android-emulator, 3g

我正在[http://android-er.blogspot.com/2012/03/search-woeid-from-httpqueryyahooapiscom.html](http://android-er.blogspot.com/2012/03/search-woeid-from-httpqueryyahooapiscom.html)试用这个示例应用程序。

以前当我尝试其他示例应用程序时，我能够访问谷歌地图和互联网。

但是，我不确定是什么导致我在 android 模拟器中的 3g 连接现在显示 X。

在模拟器中，我还检查了设置-移动网络-数据启用-勾选。

在清单文件中，我已经放入了这个 " " 。

我什至重新安装了我的 Eclipese 和 Android SDK，看看它是否有帮助。

我目前正在使用 Eclipse 版本：3.7.2 和 Android SDK 4.03

有人可以告诉我如何在模拟器中连接到 3g 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T20:49:26.973

你试过在模拟器打开时按 F8 吗？它应该打开/关闭网络（[http://developer.android.com/guide/developing/tools/emulator.html#KeyMapping](http://developer.android.com/guide/developing/tools/emulator.html#KeyMapping)）。

如果这不起作用，也许您可​​以尝试从命令行使用“adb shell”登录到模拟器 shell 并 ping 一个网站以获取更多有关错误的线索。

# c++ - 一种打印多图地图的方法？

> ID：10766381
> 
> 赞同：2
> 
> 时间：2012-05-26T12:52:41.290
> 
> 标签：c++, stl, operator-overloading, multimap

我试图超载`operator<<`，它让我发疯：

```
std::ostream& operator<<(std::ostream & lhs, TuringMachine::TRTable& rhs){

    for(auto& statePtr : rhs){

        lhs << statePtr.first->getLabel().toStdString();
        for(auto& charPtr: statePtr.second){

            //lhs << '\t';
            lhs << charPtr.first.toAscii() ;
            //lhs << 'b ';
            lhs << charPtr.second.getState().getLabel().toStdString() << std::endl;
        }
    }

return lhs;
} 
```

`TRTable`是一个`typedef`对于 `std::map<State*, std::multimap<QChar, Transition>>`。`State`有它的标签，`QString`因此调用`.toStdString()`.

在另一堂课上，我`std::cout << machine->table << std::endl;`用`machine`beeing a打电话，`TuringMachine*`这给了我

```
error: cannot bind 'std::ostream {aka std::basic_ostream<char>}' lvalue to 'std::basic_ostream<char>&&' 
```

我究竟做错了什么？为什么`&&`？

编辑：使用 g++ 4.6 和`-std=c++0x`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T17:30:03.733

您在哪个命名空间中声明了`operator<<`? 由于`TRTable`is a typedef [ADL](http://en.wikipedia.org/wiki/Argument-dependent_name_lookup)不适用，因此`operator<<`仅`namespace std`由 ADL 搜索，因为这是定义实际类的位置。因此，当您想使用它时，您可能必须使用`use`您定义的名称空间。`operator<<`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T14:40:55.903

`rhs`应该是`const TuringMachine::TRTable&`：

```
std::ostream& operator<<(std::ostream& lhs, const TuringMachine::TRTable& rhs) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-26T12:54:49.103

`lhs`应该有类型`std::ostream &`。没有`const`。

# node.js - nodejs作业服务器（多用途）

> ID：10766382
> 
> 赞同：3
> 
> 时间：2012-05-26T12:52:46.050
> 
> 标签：node.js, job-scheduling

我还很新，刚开始了解 node.js（作为 PHP 开发人员的背景）。我在 nodejs 网站上看过一些 nodeJs 示例和视频。

目前我正在运行一个视频网站，并且在后台必须执行很多任务。目前这是由调用 php 脚本的 cronjobs 完成的。这种方法的缺点是，当前一个进程仍在工作时启动另一个进程时，您会在服务器等上获得高负载。

需要在服务器上完成的工作如下：

*   从网站上抓取提要并将它们插入 mysql 数据库
*   从网站获取数据（抓取）（根据要求）
*   生成用于报告的数据。这些主要是需要执行的 mysql 查询。

未来需要完成的任务

*   记录视频浏览量（当用户访问视频页面时）（这也将记录到 mysql 中）
*   一般记录访问者
*   根据搜索到的视频展示广告

我希望能够调用一个 url，以便可以将作业排队，并且还能够按时间安排作业，或者它们可以持续运行。

我不知道 node.js 是否是要遵循的路径，这就是我在这里问它的原因。在节点中这样做有什么好处？下站？

node.js 的专业人士是什么？

感谢您的回复！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-26T19:19:26.203

虽然传统上用于网络/网络任务（网络服务器、IRC 聊天服务器等），但当你给它任何类型的 IO 绑定（而不是 CPU 绑定）任务时，Node.js 会大放异彩，因为它使用完全异步的 IO（即也就是说，所有 IO 都发生在主事件循环之外）。例如，Node 可以轻松地打开许多套接字，等待每个套接字上的数据，或者非常有效地将数据流式传输到文件和从文件中流出。

听起来您真的只是在寻找[工作队列](http://en.wikipedia.org/wiki/Job_queue)；一个流行的是[Resque](https://github.com/defunkt/resque)，虽然它是为 Ruby 编写的，但也有[PHP](https://github.com/chrisboulton/php-resque)、[Node.js](https://github.com/technoweenie/coffee-resque)等的版本。还有专门为 PHP 构建的作业队列；如果您想坚持使用 PHP，Google 搜索“PHP 作业队列”会让您走得更远。

现在，使用 Node.js 的一个优势是它能够非常轻松地处理大量 IO。当然我只是猜测，但根据您的要求，它可能是完成这项工作的好工具：

*   从网站抓取数据/提要 - 主要等待网络 IO
*   将数据插入 MySQL - 主要等待网络 IO
*   报告——同样，Node 擅长 MySQL 查询，但可能不太擅长分析数据
*   调用 URL 来安排作业 - Node 的内置 HTTP 处理和出色的[Web 库](http://expressjs.com/)使这变得轻而易举

因此，您完全有可能尝试使用 Node 来完成这些任务。如果您这样做，请查看 Resque for Node 或其他作业系统（如[Kue](http://learnboost.github.com/kue/)）。如果您不需要复杂的东西，自己构建也不是很难[——Redis 是一个很好的工具](https://stackoverflow.com/a/7241983/62082)。

*您可能不想*使用 Node.js有几个原因。如果你不熟悉 JavaScript 以及[事件](http://en.wikipedia.org/wiki/Event-driven_programming)和[持续传递风格的编程](http://en.wikipedia.org/wiki/Continuation-passing_style)，Node.js 可能会有一点学习曲线，因为你必须强迫自己停止同步思考。此外，如果您的程序中确实有很多繁重的非 IO 任务，例如分析数据，Node 将不会表现出色，因为这些计算会阻塞主事件循环并阻止 Node 处理异步 IO 的回调等。最后，如果您已经有很多使用 PHP 或其他语言的逻辑，那么用您选择的语言找到解决方案可能会更容易和/或更快。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-28T00:56:32.717

我支持上述答案。但是，您不一定需要提供全方位服务的作业队列：您可以使用[异步](https://github.com/caolan/async)等流控制模块以并行或串行方式运行任务，以尽可能快的速度或以受控的并发方式运行。Node.js 有许多强大的抓取/解析工具。这篇[文章](http://lookfirst.com/2012/05/scrape-webpages-with-nodejs.html)提到了一些；我最近才听说[小号](https://github.com/substack/node-trumpet)；可能有几十种选择。Node.js 在核心中有一个[Stream](http://nodejs.org/docs/latest/api/stream.html)模块，[Request](https://github.com/mikeal/request)使 HTTP 交互变得非常容易。对于定时任务，最简单的方法是基本的 setTimeout/setInterval。或者您可以将刮板编写为在 cron 上调用的脚本。或者使用核心中的 EventEmitter 模块在某些事件上触发它。ETC...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-07T04:17:21.530

不受控制的节点 js 并行作业数量可能会使您的服务器瘫痪。您将需要控制流程或以更好的方式将它们放入队列中以完成每个任务

对于这个需求，如果你知道 php，我建议使用 gearman 并根据需要或通过小型 php 脚本添加作业

# android - 带有侦听器的自动完成文本视图

> ID：10766383
> 
> 赞同：2
> 
> 时间：2012-05-26T12:52:54.117
> 
> 标签：android, autocompletetextview

我的问题非常基本，我的经验也是如此！对不起，帖子的长度！

我正在尝试`AutoCompleteTextView`使用侦听器创建一个，以便在选择项目时可以做“事情”。工作正常，`AutoCompleteTextView`只要我可以输入 2 个字符，然后从出现的列表中选择一个项目。但是应用程序从不执行侦听器代码。

我所有的代码、xml 和日志跟踪都在这里，那么我缺少的简单部分是什么？我已经搜索了所有问题，这似乎是一个常见问题，但没有一个（极少数）答案对我有用。

任何帮助将不胜感激。

来源

```
import android.app.Activity;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemSelectedListener;
import android.widget.ArrayAdapter;
import android.widget.AutoCompleteTextView;
import android.widget.TextView;

public class A_New_StartActivity extends Activity {

private final String LOG_TAG = "CJM";
private static String result = "No result";
private static final String[] myitems =  {
"Item 1",
"Item 2",
"Item 3",
"Item 4",
"Item 5"
};
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    Log.d(LOG_TAG, "Entered onCreate");

    ArrayAdapter<String> itemAdapter = new ArrayAdapter<String>(this, R.layout.destination_item, myitems);
    AutoCompleteTextView itemView = (AutoCompleteTextView) findViewById(R.id.autocomplete_items);
    itemView.setAdapter(itemAdapter);

    itemView.setOnItemSelectedListener(new OnItemSelectedListener() { 
        public void onItemSelected(AdapterView<?> parent, View view, int position, long id) { 
            result = "Selected";
            Log.d(LOG_TAG, "Showing Result 1");
            TextView result_view = (TextView) findViewById(R.id.result_view); 
            result_view.setText(result);
            View scroll_visibility = findViewById(R.id.result_scroll); 
            scroll_visibility.setVisibility(View.VISIBLE); 
            View result_visibility = findViewById(R.id.result_view); 
            result_visibility.setVisibility(View.VISIBLE); 
        } 
        public void onNothingSelected(AdapterView<?> parent) { 
            Log.d(LOG_TAG, "In Nothing Selected");
            result = "Nothing";
            Log.d(LOG_TAG, "Showing Result 2");
            TextView result_view = (TextView) findViewById(R.id.result_view); 
            result_view.setText(result);
            View scroll_visibility = findViewById(R.id.result_scroll); 
            scroll_visibility.setVisibility(View.VISIBLE); 
            View result_visibility = findViewById(R.id.result_view); 
            result_visibility.setVisibility(View.VISIBLE); 
        }
    }); 
    Log.d(LOG_TAG, "completed onCreate");
}
} 
```

* * *

R.layout 中的 MAIN.xml

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"

android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical"
android:padding="5dp" >

<TextView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:orientation="vertical"
    android:padding="10dp" >
</TextView>

<TextView 
    android:id="@+id/item_view"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginTop="10dp"
    android:text="@string/request_item"
    android:visibility="visible" />

<AutoCompleteTextView 
    android:id="@+id/autocomplete_items"
    android:completionThreshold="2"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_marginLeft="5dp"
    android:layout_marginRight="5dp"
    android:visibility="visible" />

<ScrollView
    android:id="@+id/result_scroll"
    android:layout_width="220dp"
    android:layout_height="290dp"
    android:layout_marginTop="10dp" 
    android:layout_marginLeft="50dp"
    android:visibility="invisible" >

    <TextView
        android:id="@+id/result_view"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:maxLines="5"
        android:scrollbars="vertical"
        android:text="@string/result"
        android:visibility="invisible" />
</ScrollView>

<Button
    android:id="@+id/reset_button"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginTop="10dp" 
    android:layout_marginLeft="125dp"
    android:text="@string/button_text" /> 
```

R.layout 中的 DESTINATION_ITEM.xml

```
<TextView 
xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent" > 
```

R.values 中的 STRINGS.xml

```
<resources>

<string name="app_name">A_New_Start</string>
<string name="request_item">Please enter the first 2 letters of the item</string>
<string name="result">Initialised</string>
<string name="button_text">OK</string> 
```

日志输出

```
05-26 10:19:05.550: D/CJM(269): Entered onCreate

05-26 10:19:05.570: D/CJM(269): completed onCreate 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T13:12:03.513

您为 AutoCompleteTextView 设置了错误的侦听器。您必须`addTextChangedListener()`在`addTextChangedListener`.

# php - 正则表达式删除外括号

> ID：10766387
> 
> 赞同：4
> 
> 时间：2012-05-26T12:53:29.933
> 
> 标签：php, regex, preg-replace, brackets

我一直在使用这个`/\(\s*([^)]+?)\s*\)/`正则表达式来删除带有 PHP preg_replace 函数的外括号（在我之前的问题[Regex to match any character 除了尾随空格](https://stackoverflow.com/questions/10765699/regex-to-match-any-character-except-trailing-spaces)中阅读更多内容）。

当只有一对括号时，这很好用，但问题是当有更多时，例如`( test1 t3() test2)`变成`test1 t3( test2)`instead `test1 t3() test2`。

我知道正则表达式的限制，但如果我可以让它不匹配任何东西，如果有一对以上的括号，那就太好了。

因此，示例行为就足够了：

`( test1 test2 )`=>`test1 test2`

`( test1 t3() test2 )`=>`(test1 t3() test2)`

**编辑：**

我想继续修剪已删除括号内的尾随空格。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T14:32:07.340

您可以使用此基于递归正则表达式的代码，该代码也适用于嵌套括号。唯一的条件是括号应该是平衡的。

```
$arr = array('Foo ( test1 test2 )', 'Bar ( test1 t3() test2 )', 'Baz ((("Fdsfds")))');
foreach($arr as $str)
   echo "'$str' => " . 
         preg_replace('/ \( \s* ( ( [^()]*? | (?R) )* ) \s* \) /x', '$1', $str) . "\n"; 
```

### 输出：

```
'Foo ( test1 test2 )' => 'Foo test1 test2'
'Bar ( test1 t3() test2 )' => 'Bar test1 t3() test2'
'Baz ((("Fdsfds")))' => 'Baz (("Fdsfds"))' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T12:57:11.940

**试试这个**

```
$result = preg_replace('/\(([^)(]+)\)/', '$1', $subject); 
```

**更新**

```
\(([^\)\(]+)\)(?=[^\(]+\() 
```

**正则表达式解释**

```
"
\(            # Match the character “(” literally
(             # Match the regular expression below and capture its match into backreference number 1
   [^\)\(]       # Match a single character NOT present in the list below
                    # A ) character
                    # A ( character
      +             # Between one and unlimited times, as many times as possible, giving back as needed (greedy)
)
\)            # Match the character “)” literally
(?=           # Assert that the regex below can be matched, starting at this position (positive lookahead)
   [^\(]         # Match any character that is NOT a ( character
      +             # Between one and unlimited times, as many times as possible, giving back as needed (greedy)
   \(            # Match the character “(” literally
)
" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-26T13:06:52.157

你可能想要这个（我猜这是你最初想要的）：

```
$result = preg_replace('/\(\s*(.+)\s*\)/', '$1', $subject); 
```

这会得到

```
"(test1 test2)" => "test1 test2"
"(test1 t3() test2)" => "test1 t3() test2"
"( test1 t3(t4) test2)" => "test1 t3(t4) test2" 
```

# java - 比较 ArrayList 中的字符串。区分大小写

> ID：10766391
> 
> 赞同：0
> 
> 时间：2012-05-26T12:53:57.607
> 
> 标签：java, arraylist, case

这是我的第一篇文章。我花了几个小时试图弄清楚如何将我的 String ie`word`与我的所有`ArrayList`元素进行比较，检查它们是否相等，不考虑大小写。

这是我的代码。

```
private static void writeFile(Scanner scanWords, ArrayList<String> wordList,
  FileWriter fo, BufferedWriter out) throws IOException {
    String word = null;
    int count = 0;
    boolean contains=false;
    String temp = "";

    for(int i = 0; i<wordList.size();i++){

        while(scanWords.hasNext()){
            word= scanWords.next();

            if(wordList.get(i).equalsIgnoreCase(word)){
                contains = true;
            }else{
                System.out.println(word);
                out.write(word);
                //out.write(word);
            }
        }
    }
    count++;
    out.close();
} 
```

给予的任何帮助都会令人惊叹。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T13:01:15.363

首先，将您`List<String>`的字符串转换为`HashSet`不区分大小写的字符串 - 即全部小写（使用该`String.toLowerCase()`方法）。然后你可以使用`Collection.contains()`方法

例如

```
List<String> strings;
Set<String> lowerCaseStrings = new HashSet<String>(strings.size());
for (String str : strings){
  lowerCaseStrings.add(str.toLowerCase());
}
boolean match = lowerCaseString.contains(myStr.toLowerCase()); 
```

编辑：建议使用`ArrayList<String>`，但应该是`HashSet<String>`- 请参阅下面的评论。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T08:30:14.030

问题来自这样一个事实，即您尝试以错误的顺序以相同的方法做 3 件不同的事情：

*   写入文件
*   在列表中找到一个词
*   从扫描仪读取单词

这些操作中的每一个都应该是一个单独的操作。关于你所要求的：

> 我如何将我的 String ie word 与我的所有 ArrayList 元素进行比较，检查它们是否相等，不考虑大小写

这是您完整程序的一部分，应该采用自己的方法（上面列表中的第二个项目符号）。为此，您不需要 Scanner 和 FileWriter 和 BufferedWriter。您所需要的只是单词和列表。该方法应该返回一个布尔值：

```
public boolean listContainsWordIgnoringCase(List<String> list, String word) { 
```

并且实现非常简单：

```
public boolean listContainsWordIgnoringCase(List<String> list, String word) {
    for (String element : list) {
        if (word.equalsIgnoreCase(element)) {
            // no need to continue looping. We've found the answer
            return true;
        }
    }
    // we've looped through all the elements without finding a match
    return false;
} 
```

现在这个方法可以在你的程序中使用。

诀窍是将逻辑分离为只有一个职责的简单块。并为每个块制作一个方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-26T13:40:34.937

> *我如何将我的 String ie`word`与我的所有`ArrayList`元素进行比较...*

看来，您`scanWords`错误地使用了扫描仪对象。

使用您的代码，如果您的第一个元素`wordsList`与任何元素都不匹配`scanWords`，则不会处理任何元素以`wordsList`进行比较。为什么是因为，为了与列表中的第一个单词进行比较，您已经迭代到最后`scanWords`导致下一次调用`hasNext()`始终返回 a `false`。

以下是对您的要求的修复：

```
while ( scanWords.hasNext() ) {
  word= scanWords.next();
  //for( int i = 0; i < wordList.size(); i++ ) {
  for( String wordInList : wordList ) {
    if( wordInList.equalsIgnoreCase( word ) ) {
      contains = true;
    } else {
      System.out.println( word );
      out.write( word );
    }
  } // for list
} // while scanner 
```

* * *

***解决方案 2***：

> *我之前尝试过这种方法，问题是它循环了同一个单词 6 次。6 是我的数组列表的大小。*

这是一个简单的解决方案，无需对列表元素进行显式循环。

```
String listElements = wordList.toString().toLowerCase();  
while ( scanWords.hasNext() ) {  
  word = scanWords.next();  
  if ( listElements.contains( word.toLowerCase() ) ) {  
    contains = true;  
  } else {  
    System.out.println( word );  
    out.write( word );  
  }  
} // while scanner 
```

* * *

***示例执行***：

```
List<String> ls = new ArrayList<String>( 4 );
ls.add( "raVi" );
ls.add( "sreekaR" );
ls.add( "lakShMi" );
ls.add( "sumAna" );

String listElements = ls.toString();
System.out.println( "listElements: " + listElements );
System.out.println( "listElements.toLowerCase(): " + listElements.toLowerCase() );
scanner = new Scanner( "Ravi Sumana Others sREEKar LAKshmi" );
while( scanner.hasNext() ) {
  String w1 = scanner.next();
  System.out.println( "'" + w1 + "' is in list ? = " + listElements.toLowerCase().contains( w1.toLowerCase() ) );
} 
```

执行的结果是：

```
listElements: [raVi, sreekaR, lakShMi, sumAna]
listElements.toLowerCase(): [ravi, sreekar, lakshmi, sumana]
'Ravi' is in list ? = true
'Sumana' is in list ? = true
'Others' is in list ? = false
'sREEKar' is in list ? = true
'LAKshmi' is in list ? = true 
```

# java - JSF2.0：如何在 Java 中的 MyComponent 中编写 h:form？

> ID：10766395
> 
> 赞同：0
> 
> 时间：2012-05-26T12:54:16.623
> 
> 标签：java, forms, jsf-2, components, renderer

我正在编写一个 JSF2.0 组件作为 Java 类和 Renderer 类等等。我不能在 xhtml 中写出部分输出，比如

```
<h:outputText ... /> 
```

因为元素是动态生成的。

1.  所以我收到消息“按钮/链接/文本组件需要在其祖先中有一个表单。请添加。”。您可以在下面看到我当前如何呈现表单。这也正确吗？或者应该改变一些东西以使警告消失？

    ```
    private void encodeForm(Element elem) throws IOException {
        //ResponsWriter writer
        writer.startElement("form", form);
        encodeChildren(elem);
        writer.endElement("form");
    } 
    ```

2.  是否可以将输入字段连接到在运行时创建的变量（即列表中的对象）？如果是怎么办？如果不是：我必须实现 decode() 方法，对吗？
3.  我应该如何呈现提交此类表单的按钮？例如，它应该在我的组件中调用一个方法，然后以某种方式（如何？像解码方法？）可以处理用户输入。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T14:00:53.087

> 这也正确吗？或者应该改变一些东西以使警告消失？

您最好的选择是删除您显示的代码并要求所述组件的用户将其放置在表单中。

无论如何，您所做的是为表单编写标记。这与将表单组件实际放入树中不同。

# asp.net - asp.net 中的 httpErrors 配置

> ID：10766399
> 
> 赞同：0
> 
> 时间：2012-05-26T12:54:23.783
> 
> 标签：asp.net, iis-7.5

我的 web.config 中有一个 httpErrors 配置

```
 <system.webServer>
    <httpErrors errorMode="DetailedLocalOnly" existingResponse="Replace" /> 
```

由于现有响应 =“替换”，它不会在本地显示脚本错误的详细信息。我想在本地和客户端查看脚本错误的详细信息我想显示自定义错误页面

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T12:58:22.003

检查 web.config 文件中的 customError 标记。

```
<customErrors mode="RemoteOnly">
</customErrors> 
```

将模式设置为“仅远程”。

# visual-studio-2010 - 如何控制自动补丁的 tfs 中的变更集优先级？

> ID：10766401
> 
> 赞同：1
> 
> 时间：2012-05-26T12:54:32.397
> 
> 标签：visual-studio-2010, tfs, tfsbuild

在我们公司，我们使用 tfs 进行 sql 数据库版本的源代码控制，当开发人员更改数据库时，他们会生成等效脚本并将其放入 sql tfs 项目并与相关的 workItem 一起检查。构建后我们使用此脚本为客户端生成补丁，但是在 pacth 之前，我们需要有人决定签入脚本的优先级，现在我希望这个决定成为自动的，我的问题是如何在签入时指定优先级？对不起，我的英语不好，如果您想了解更多信息，请告诉我。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T08:02:52.993

数据库的版本处理似乎是一个永无止境的问题。在以前的客户端中，我们给数据库版本属性，然后将补丁脚本存储在每个版本的文件夹中，例如“Patches/2.0.10”、“Patches/2.1.0”。然后可以按照签入的顺序（创建日期）执行补丁脚本。

发布后，我们最终生成了一个完整的补丁脚本，其中包含所有这些单独的补丁合并在一起（因为补丁通常影响相同的数据，因此可以对其进行优化）以及新的版本号，允许我们记录任何给定数据库的版本实例有。

# javascript - 如何让我的 Javascript 代码更喜欢 cookie，但如果 cookie 不存在，则使用本地存储？

> ID：10766403
> 
> 赞同：0
> 
> 时间：2012-05-26T12:54:37.470
> 
> 标签：javascript, cookies, local-storage

我在网络上使用了一些 Javascript 代码，也在使用 Phonegap 的 Android 应用程序中使用了一些 Javascript 代码。

起初，我的代码设置为默认使用本地存储，如果没有本地存储，则默认使用 cookie。

但是，在某些情况下（这里太复杂，无法进入），这是行不通的，所以我想看看我是否可以采用其他方式：默认使用 cookie，如果无法使用 cookie，则使用本地存储。

真的，只有 Android 的 cookie 有问题，所以基本上如果我的代码在 Android 设备上使用，那么我想切换到本地存储。

无论如何，这里是设置我拥有的 cookie/本地存储数据的代码，但它不起作用：

```
function setCookie(c_name, value, expiredays)
{
    var exdate = new Date();
    exdate.setDate(exdate.getDate() + expiredays);
    document.cookie = c_name + "=" + escape(value) +
    ((expiredays === null) ? "" : ";expires=" + exdate.toUTCString());
    if(document.cookie.length < 1 && typeof localStorage != "undefined")
    {
        localStorage.setItem(c_name, value);
    }
} 
```

我认为问题可能出在它所说的地方`document.cookie.length < 1`。这是查看是否设置了 cookie 的可靠方法吗？

底线：如何可靠地默认设置 cookie，并在不存在 cookie 的情况下使用本地存储作为替代方案？

# permissions - 哈德逊工作设置

> ID：10766404
> 
> 赞同：0
> 
> 时间：2012-05-26T12:54:46.297
> 
> 标签：permissions, hudson

我正在尝试设置 Hudson 来构建我的 Android 项目。

问题是作业是由没有适当权限的用户“hudson”启动的（我的项目位于我的主目录中），所以我在 Hudson 构建日志中得到“权限被拒绝”。这是打印当前用户名的虚拟任务的输出：

`Started by user anonymous
[workspace] $ /bin/sh -xe /tmp/hudson2129720862026016628.sh
+ whoami
hudson
[DEBUG] Skipping watched dependency update; build not configured with trigger: SipPhone 3rd party libs #2
Finished: SUCCESS` 

解决此问题的最佳做法是什么？我可以让 Hudson 从我的用户运行构建吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T19:02:40.420

找到解决方案：有必要在 /etc/default/hudson 配置文件中更改用户（HUDSON_USER 变量）

# javascript - Javascript回调丢失'this'

> ID：10766407
> 
> 赞同：15
> 
> 时间：2012-05-26T12:54:57.127
> 
> 标签：javascript, object, callback, this, scope

我有一个发行人，我在这个“对象”中丢失了“这个”。下面一段 javascript 的输出给了我“some-id”，然后是“undefined”。当我在回调函数中使用“this”时，范围超出了对象，它不能再使用“this”。如何让回调使用“this”或至少可以访问该对象？

由于我将制作多个对象，因此我将无法创建像存储一样的“静态”。请帮助这个 javascript n00b ;-)

这是我的测试代码，您可以使用它来重现我的问题。我想要的是`CheckBox.doSomething()`返回`this.id`应该与`some-id`这个测试用例匹配的值。

```
function CheckBox(input_id) {
    this.id = input_id;
    this.doSomething();
    $('#some-element').click(this.doSomething);
}

Checkbox.prototype.doSomething = function() {
    alert(this.input_id);
}

var some_box = new CheckBox('some-id');
some_box.doSomething();
$('#some-element').click(); 
```

编辑：我什至无法按照我的意愿让它工作：

```
function CheckBox2(input_id) {
    this.id = input_id;
    alert(this.id);
}

CheckBox2.prototype.doSomething = function() {
    alert(this.input_id);
}
var some_box = new CheckBox2('some-id');
some_box.doSomething(); 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-26T13:24:14.680

您的问题出在这一行：`$('#some-element').click(this.doSomething);`

### 为什么这是一个问题

JavaScript 方法对应该分配给 的对象一无所知`this`，它是在显式（使用`myFunction.call(obj)`）或隐式调用（使用调用`obj.myFunction()`）时设置的。

例如：

```
var x = {
    logThis: function () {
        console.log(this);
    }
};

x.logThis(); // logs x
x.logThis.call(y); // logs y

var func = x.logThis;
func(); // logs window: the fallback for when no value is given for `this` 
```

在您的情况下，您将传递`this.doSomething`给 jQuery，然后它使用被单击的元素显式调用它作为`this`. 正在发生的事情是（稍微复杂一点的版本）：

```
var callback = this.doSomething;
callback.call(anElement, anEvent); 
```

### 解决方案

您需要确保`doSomething`使用正确的值调用它`this`。您可以通过将其包装在另一个函数中来做到这一点：

```
var cb = this;
$('#some-element').click(function() {
    return cb.doSomething();
}); 
```

jQuery 提供了一个[`proxy`](http://api.jquery.com/jQuery.proxy/)函数让你更简单地做到这一点：

```
$('#some-element').click(jQuery.proxy(this.doSomething, this)); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-05-26T12:57:02.290

```
function CheckBox(input_id) {
    this.id = input_id;
    this.doSomething = $.proxy( this.doSomething, this );
    $('#some-element').click(this.doSomething);
} 
```

这个的“javascript等价物”是`Function#bind`但不是在每个浏览器中都可用，因为看起来你正在使用jQuery我正在使用jQuery等价物`$.proxy`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-07-04T08:31:07.653

其他人已经解释了问题的原因以及如何使用 jQuery 修复它。剩下的就是如何使用标准 JavaScript 修复它。代替 ...

```
$('#some-element').click(this.doSomething); 
```

... 你写：

```
document.getElementById('some-element').addEventListener('click', this.doSomething.bind(this)); 
```

这改变了`this`inside的上下文`doSomething`。您也可以使用匿名函数来做到这一点 - 而不是......

```
$('#some-element').click(function(event) {
    console.log(this);
}); 
```

... 你写：

```
document.getElementById('#some-element').addEventListener('click', (function(event) {
    console.log(this);
}).bind(this)); 
```

这在有很多回调的项目中对我非常有用，例如在 Node.js 中（您不必关心过时的浏览器）。

编辑：`getElementById()`而`addEventListener()`不是`$(...).click(...)`.

# log4j - 覆盖 slf4j 中的日志记录方法 (logger.warn)

> ID：10766411
> 
> 赞同：3
> 
> 时间：2012-05-26T12:55:24.863
> 
> 标签：log4j, overriding, extend, slf4j

扩展 logger.warn 方法功能的最简单方法是什么？

考虑代码：

```
logger.warn("Invalid value ({}). Defaulting to UNKNOWN.", value); 
```

我还想打印堆栈跟踪 - 或者每次遇到警告时都做一些特别的事情。例如：

```
logger.warn("Invalid value ({}). Defaulting to UNKNOWN.", value);
for (StackTraceElement stackTraceElement:Thread.currentThread().getStackTrace()) {
  logger.warn(stackTraceElement.toString());
} 
```

我希望能够将“for循环”放在记录器方法中。就像是。

```
public void warn (String s, Object o) {
  super(s, o);
  for (StackTraceElement stackTraceElement:Thread.currentThread().getStackTrace()) {
    logger.warn(stackTraceElement.toString());
  }
} 
```

有没有一种简单的方法来扩展记录器来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T22:09:44.880

[Markers](http://www.slf4j.org/api/org/slf4j/Marker.html)是 SLF4J API 的一部分，这是要走的路。不幸的是，只有原生实现 SLF4J API 的 logback 框架支持标记。此外，指定的 logback 的 %caller 转换已经支持您描述的开箱即用的用例。

您可以将 %caller[转换词](http://logback.qos.ch/manual/layouts.html#conversionWord)添加到您的模式中。例如， "%d %t %logger - %m%n%caller{2, WITH_CALLER_MARKER}" 其中 WITH_CALLER_MARKER 表示[评估者](http://logback.qos.ch/manual/layouts.html#Evaluators)。在此配置中，如果 WITH_CALLER_MARKER 评估器返回 true，则将打印 3 行调用者数据。

评估器将在 logback.xml 配置文件中指定如下。

```
<evaluator name="WITH_CALLER_MARKER" 
           class="ch.qos.logback.classic.boolex.OnMarkerEvaluator">
  <marker>WITH_CALLER</marker>
</evaluator> 
```

启用呼叫者信息现在就像使用“WITH_CALLER”标记记录一样简单。这是一个例子，

```
Marker withCallerMaker = MarkerFactory.getMarker("WITH_CALLER");
Logger logger = LoggerFactory.getLogger("some.name");
logger.warn(withCallerMarker, "Invalid value {}. Defaulting to UNKNOWN.", value); 
```

由于您已经在使用 SLF4J，因此迁移到 logback 非常容易。只需将您的 log4j.properties 文件转换为 logback.xml，删除 slf4j-log4j12.jar，并将 log4j.jar 替换为 logback-*.jar 即可。甚至还有一个[工具可以将](http://logback.qos.ch/translator/)log4j.properties 文件转换为 logback.xml。

恐怕用 log4j 实现类似的功能会涉及更多的工作，最终结果也不会那么方便。

# javascript - javascript如何从android请求位置

> ID：10766414
> 
> 赞同：0
> 
> 时间：2012-05-26T12:55:50.710
> 
> 标签：javascript, android, google-maps, mobile, geolocation

我正在开发移动网页。我想从这个页面请求发送到我的本机移动应用程序（例如 android 应用程序，并且 android 应用程序应该向我发送用户的当前位置。

提前致谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T13:15:32.500

看起来您会想要使用[geolocation API](http://diveintohtml5.info/geolocation.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T13:20:38.753

在服务器端查找接受的语言标头。或者通过js：

```
navigator.language 
```

请参阅此问题：[用于检测浏览器语言偏好的 JavaScript](https://stackoverflow.com/questions/1043339/javascript-for-detecting-browser-language-preference)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T16:01:10.073

地理定位 API 将在支持该 API 的手机浏览器上运行。检查您所针对的手机的兼容性可能是值得的。

此外，只是将这些替代方案提请您注意，但它们仅限于某些运营商和地区。

BlueVia 位置 API 在 O2 和 Telefonica 网络上可用，使用他们的 REST API [https://bluevia.com/en/page/tech.APIs.LocationAPI](https://bluevia.com/en/page/tech.APIs.LocationAPI)

AT&T 位置 API 可使用他们的 REST API [http://developer.att.com/developer/apiDetailPage.jsp?passedItemId=10100355](http://developer.att.com/developer/apiDetailPage.jsp?passedItemId=10100355)

只是为了让您了解这些，但地理定位 API 很可能是您的最佳选择。

# xml - libxml：如何将兄弟节点添加到根节点

> ID：10766415
> 
> 赞同：0
> 
> 时间：2012-05-26T12:55:58.000
> 
> 标签：xml, libxml2

我正在实现一个使用 libxml 进行 xml 签名的函数。如何将兄弟节点添加到根节点？

原始xml：

```
<?xml version="1.0"?>
<object>
...
</object> 
```

我想要的是：

```
<?xml version="1.0"?>
<object>
...
</object>
<additional node>
...
</additional node> 
```

解析后对象节点会是根节点，所以不能使用xmlNewChild。我应该使用什么功能来实现我想要的。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T11:36:45.497

你不能。Libxml 应该生成有效的 xml 文件，即只有一个根节点。

Padawan，如果您知道这样做的棘手方法，请发布另一个答案并自己接受。

# c# - C# .NET：调整容器 div 元素内的图像大小

> ID：10766418
> 
> 赞同：0
> 
> 时间：2012-05-26T12:56:15.500
> 
> 标签：c#, .net

我有以下标记代码，其中包含一个容器 div 元素和一个嵌套在 div 内的 img 标签。容器 div 具有宽度、高度、顶部和左侧 CSS 样式属性。

最初上传的图像具有任意宽度和高度，可能大于或小于容器 div。所以肯定的是，最初上传的图像必须调整大小和缩放，并保存为缩略图图像以位于容器 div 的边界内。调整大小的缩略图图像将在以下标记中显示为源 (src)：

```
<div id="divContainer" style="width: 600px; height: 450px; top: 50px; left: 20px;">
   <img src="[my resized and well scaled thumbnail source]..." id="imgResizedThumnail" />
</div> 
```

在另一个 .NET 表单页面中，有一个文件标签让用户可以从本地硬盘上传原始图像。该上传的图像需要调整大小并保存为另一个具有最佳缩放比例的缩略图图像。“最佳缩放”意味着缩略图图像具有宽度和高度的比例，并且缩略图必须位于容器 div 内。

我的 C# .NET 方法如下所示，我对该方法中的代码逻辑有疑问。

...

```
using System.Drawing;

public void SaveThumbnailImageWithbestScaling(Image originalImage, int containerDivWidth, int containerDivHeight)
{
     // input containerDivWidth and containerDivHeight are dynamic!
     // 1\. How can I calculate the scale variable?  
     double scale = ??? // how can I do the codes here?

     // 2\. Use that scale to determine the dimension of resized thumbnail image from       
     // the input originalImage for following variables "thumnailWidth" and "thumnailHeight"    

     string thumbnailFilename = "myThumnailFileName";
     int thumnailWidth = ???  // how can I do the codes here?
     int thumnailHeight = ??? // how can I do the codes here?

     Bitmap thumnailImage = CreateThumbnail(thumbnailFilename,int thumnailWidth, int thumnailHeight);

     // 3\. save thumbnail
     SaveThumnail(thumnailImage);   
}

public void Bitmap CreateThumbnail(string lcFilename,int lnWidth, int lnHeight)
{
    ...
}

public void thumnailImage (Bitmap thumnail)
{
   ...
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T13:55:07.283

This is what I use:

```
 public static Image Resize(
        Image srcImage, 
        int newWidth, 
        int maxHeight,
        int dpi = 72)
    {
        if(srcImage.Width<=newWidth)
        {
            newWidth = srcImage.Width;
        }

        var newHeight = srcImage.Height * newWidth / srcImage.Width;
        if (newHeight > maxHeight)
        {
            newWidth = srcImage.Width * maxHeight / srcImage.Height;
            newHeight = maxHeight;
        }

        var newImage = new Bitmap(newWidth, newHeight);
        newImage.SetResolution(dpi, dpi);

        using (var gr = Graphics.FromImage(newImage))
        {
            gr.SmoothingMode = SmoothingMode.AntiAlias;
            gr.InterpolationMode = InterpolationMode.HighQualityBicubic;
            gr.PixelOffsetMode = PixelOffsetMode.HighQuality;
            gr.DrawImage(srcImage, new Rectangle(0, 0, newWidth, newHeight));
        }
        return newImage;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T14:36:00.290

我会做这样的事情：

```
public void SaveThumbnailImageWithbestScaling(Image originalImage, int containerDivWidth, int containerDivHeight)
{
    string thumbnailFilename = "myThumnailFileName";
    int thumbnailWidth = 0;
    int thumbnailHeight = 0;

    float imgWidth = (float)originalImage.Width;
    float imgHeight = (float)originalImage.Height;

    float scale_w = imgWidth / (float)containerDivWidth;
    float scale_h = imgHeight / (float)containerDivHeight;

    // Compute how much each scale diverge from 1 (1 means no scaling, which is desirable)
    float variance_w = Math.Abs(1.0 - scale_w);
    float variance_h = Math.Abs(1.0 - scale_h);

    if (variance_w > variance_h)
    {
        // Height ratio is closer to 1
        float aspect_ratio = imgWidth / imgHeight;
        thumbnailHeight = containerDivHeight;
        thumbnailWidth = (int)Math.Floor(aspect_ratio * imgWidth);
    }
    else
    {
        // Width ratio is closer to 1
        float aspect_ratio = imgHeight / imgWidth;
        thumbnailHeight = (int)Math.Floor(aspect_ratio * imgHeight);
        thumbnailWidth = containerDivWidth;
    }

    Bitmap thumnailImage = CreateThumbnail(thumbnailFilename,int thumnailWidth, int thumnailHeight);

    // 3\. save thumbnail
    SaveThumnail(thumnailImage);   
} 
```

该算法计算每个维度的比率，然后找出哪个维度与 div 标签的维度差异最大。然后它继续将具有最小差异的维度捕捉到 div 标签的大小，并缩放另一个维度以尊重图像的纵横比。

当然还有其他方法可以做到这一点，例如，您可以不关心纵横比，只需将两个维度都捕捉到 div 标签的维度。

# haxe - 为什么 Api.getSize 返回 0

> ID：10766429
> 
> 赞同：0
> 
> 时间：2012-05-26T12:57:33.800
> 
> 标签：haxe

我现在才遇到haxe，所以我正在做一些测试。但是我做的第一个测试没有用。为什么 Api.getSize() 只返回`0`（不管类型及其分配的值）？

```
import flash.sampler.Api;

class Test {
    static function main() {
        var a = 44;
        trace(Api.getSize(a)); // prints 0
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T09:03:45.693

你的 Flash Player 是什么版本的？

在 Adob​​e 文档中说：

> 当与 Flash Player 9.0.115.0 或更高版本的调试器一起使用时，返回指定对象在内存中的大小。如果与非调试器版本的 Flash Player 一起使用，则此方法返回 0。

# javascript - Javascript 等待问题

> ID：10766432
> 
> 赞同：1
> 
> 时间：2012-05-26T12:58:31.817
> 
> 标签：javascript

我找不到任何可以在 javascript 中完成相同的 .vbs 函数的东西：

```
Do While browser.Busy
   WScript.sleep 200
Loop 
```

等到浏览器加载后才能继续执行脚本。“window.onLoad”是如何检查浏览器是否在 javascript 中加载，但除了“setTimeout()”之外，我不知道有什么方法可以让脚本延迟

所以我想知道是否有任何方法可以做到这一点，并想出 ide 来这里找出:)

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T13:02:54.733

```
// do some stuff
window.onload = function() {
    // do more stuff when the page has finished loading.
} 
```

就个人而言，我将脚本推迟到页面末尾。

```
// start the page with:
loadScripts = [];
loadScript = function(cb) {loadScripts.push(cb);}

// end the page with:
while( x = loadScripts.shift()) x(); 
```

这比使用更好，主要`onload`有两个原因。首先，它不必等待海量图像完全加载。其次，我可以`loadScript()`多次调用，但您只能分配`window.onload`一次而不会覆盖它。

# android - android: Parse.com Parseobject classnotfound 错误

> ID：10766437
> 
> 赞同：0
> 
> 时间：2012-05-26T12:58:45.737
> 
> 标签：android, classnotfoundexception, parse-platform

我在我的 android 应用程序中使用 Parse.com 的库，但出现以下错误。

> 05-26 18:43:31.838: E/AndroidRuntime(4759): 致命异常: main 05-26 18:43:31.838: E/AndroidRuntime(4759): java.lang.NoClassDefFoundError: com.parse.ParseObject 05-26 18:43:31.838: E/AndroidRuntime(4759): 在 com.parse.starter.ParseStarterProjectActivity.onCreate(ParseStarterProjectActivity.java:14) 05-26 18:43:31.838: E/AndroidRuntime(4759): 在 android.app .Instrumentation.callActivityOnCreate(Instrumentation.java:1047) 05-26 18:43:31.838: E/AndroidRuntime(4759): 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1722) 05-26 18:43:31.838 : E/AndroidRuntime(4759): 在 android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1784) 05-26 18:43:31.838: E/AndroidRuntime(4759): 在 android.app.ActivityThread.access$1500(ActivityThread .java:123) 05-26 18:43:31.838:E/AndroidRuntime(4759): 在 android.app.ActivityThread$H.handleMessage(ActivityThread.java:939) 05-26 18:43:31.838: E/AndroidRuntime(4759): 在 android.os.Handler.dispatchMessage(Handler .java:99) 05-26 18:43:31.838: E/AndroidRuntime(4759): 在 android.os.Looper.loop(Looper.java:130) 05-26 18:43:31.838: E/AndroidRuntime(4759 ): 在 android.app.ActivityThread.main(ActivityThread.java:3835) 05-26 18:43:31.838: E/AndroidRuntime(4759): 在 java.lang.reflect.Method.invokeNative(Native Method) 05-26 18:43:31.838: E/AndroidRuntime(4759): 在 java.lang.reflect.Method.invoke(Method.java:507) 05-26 18:43:31.838: E/AndroidRuntime(4759): 在 com.android .internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:847) 05-26 18:43:31.838: E/AndroidRuntime(4759): at com.android.internal.os.ZygoteInit。main(ZygoteInit.java:605) 05-26 18:43:31.838: E/AndroidRuntime(4759): at dalvik.system.NativeStart.main(Native Method)

请帮我解决这个问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-07T21:02:27.913

在检查 SDK 版本后，出于某种疯狂的原因，我在 Parse 和 Android 上遇到了同样的问题，我注意到没有 Target SDK 版本，但 Min SDK 版本有一个。我刚刚添加了目标 SDK 版本（在本例中为 8）以匹配 Min 版本并且它可以工作。我猜 Parse 检查目标 SDK 版本或其他东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-26T08:46:40.820

我希望这对你有帮助。

打开项目的属性。

单击 java 构建路径。

单击 order 和 export 选项卡，然后单击 parse jar file 进行检查。

并构建和清理您的项目，然后运行。

# javascript - 将鼠标悬停在 javascript 选项卡上，页面上有多个选项卡组

> ID：10766439
> 
> 赞同：0
> 
> 时间：2012-05-26T12:58:53.397
> 
> 标签：javascript, tabs

在过去的几天里，我一直在尝试解决这个问题。用新的方法一遍又一遍地开始。但我现在被困住了。

我的页面上有 3 个带有垂直对齐标签的容器。第一个容器仅包含一个选项卡。这里没问题。

第二个容器有三个选项卡。将鼠标悬停在选项卡上时，右侧区域的内容会发生变化。但是当我将鼠标悬停在第二个选项卡上时，第三个容器上显示的内容就会消失。

当我将标签悬停在第三个容器中时，它的内容会显示出来，但这次第二个容器的内容会消失。初始选项卡也一直卡住。我不知道为什么，字体颜色也被第二个容器覆盖。

我知道这与 head 部分中的 javascript 和一些 CSS 有关。

要查看代码[http://www.webpati.com或作为单个文本文件，包括](http://www.webpati.com)[http://www.webpati.com/index.txt](http://www.webpati.com/index.txt)头部中的 CSS 样式

任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T13:21:00.713

您需要删除显示无

```
$(document).ready(function() {

$(".tabs .tab[id^=tab_menu]").hover(function() {
    var curMenu=$(this);
    $(".tabs .tab[id^=tab_menu]").removeClass("selected");
    curMenu.addClass("selected");

    var index=curMenu.attr("id").split("tab_menu_")[1];

    $(".curvedContainer .tabcontent").css("display","none");<----------**HERE**

    $(".curvedContainer #tab_content_"+index).css("display","block");
}); 
```

});

# objective-c - 在 UITableViews 和视图之间导航并保留数据？

> ID：10766447
> 
> 赞同：0
> 
> 时间：2012-05-26T12:59:35.970
> 
> 标签：objective-c, ios, uitableview

我已经创建了一个带有 UITableView 的视图控制器。当我点击一个单元格时，它会将用户引导到另一个视图，其中包含选项的表格视图，方法是：

```
[self.navigationController pushViewController:optionsView animated:YES]; 
```

在这个视图中，我希望点击一个单元格让用户转到上一个视图。所以我使用：

```
[self.navigationController popViewControllerAnimated:YES]; 
```

效果很好。但我只是不知道如何保持所选单元格的索引。有什么建议吗？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T13:11:25.913

您可以通过在类中定义一个`delegate`属性`optionsView`并将其设置为`self`在推送控制器之前使第一个视图控制器成为第二个视图控制器的委托。然后，在弹出控制器之前，您可以通过委托引用将所需的任何信息发送回第一个控制器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T13:11:51.490

所以在父视图控制器中，声明一个类成员`NSIndexPath *_selectedIndexPath;`

在`didSelectRowAtIndexPath`方法中，在推送子视图控制器之前，请执行以下操作：

```
if( _selectedIndexPath )
   [_selectedIndexPath release];

_selectedIndexPath = [indexPath retain]; 
```

所以即使你回来后，你也可以从`_selectedIndexPath`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-26T15:35:43.020

您需要使用委托方法。它是 Objective-C 中常用的模式。[我有一个来自这篇文章](https://stackoverflow.com/questions/8606674/uimodaltransitionstylepartialcurl-doesnt-get-back-to-previous-state-not-dismi/8607949#8607949)的示例答案。如果您以后不清楚，请告诉我。

# java - 解决字符串缩减算法

> ID：10766449
> 
> 赞同：8
> 
> 时间：2012-05-26T13:00:06.670
> 
> 标签：java, algorithm, pseudocode

我正在为周一的面试做准备，我发现这个问题需要解决，称为“[字符串缩减](https://www.interviewstreet.com/challenges/dashboard/#problem/4eac48496bee2)”。问题是这样表述的：

> 给定一个由 a、b 和 c 组成的字符串，我们可以执行以下操作：取任意两个相邻的不同字符并将其替换为第三个字符。例如，如果“a”和“c”相邻，则可以将它们替换为“b”。通过重复应用此操作可以产生的最小字符串是多少？
> 
> 例如，cab -> cc 或 cab -> bb，产生长度为 2 的字符串。对于这个，一个最佳解决方案是：bcab -> aab -> ac -> b。不能再进行任何操作，结果字符串的长度为 1。如果字符串 = CCCCC，则不能执行任何操作，因此答案为 5。

我在stackoverflow上看到了很多[问题和答案](https://stackoverflow.com/questions/8551519/string-reduction-programming-contest-solution-needed)，但我想验证我自己的算法。这是我的伪代码算法。在我的代码中

1.  S是我要减少的字符串
2.  S[i] 是索引 i 处的字符
3.  P 是一个堆栈：
4.  redux 是减少字符的函数。

    ```
    function reduction(S[1..n]){        
    P = create_empty_stack();
    for i = 1 to n
    do
       car = S[i];
       while (notEmpty(P))
       do
          head = peek(p);
          if( head == car) break;
          else {
             popped = pop(P);
             car = redux (car, popped);
           }  
       done
       push(car)
    done
    return size(P)} 
    ```

我的算法的最坏情况是 O(n)，因为堆栈 P 上的所有操作都在 O(1) 上。我在上面的例子中尝试了这个算法，我得到了预期的答案。*让我用这个例子“ abacbcaa* ”执行我的算法：

```
i = 1 :
   car = S[i] = a, P = {∅}
   P is empty, P = P U {car} -> P = {a}

 i = 2 :
   car = S[i] = b, P = {a}
   P is not empty :
       head = a
       head != car ->
            popped = Pop(P) = a 
            car = reduction (car, popped) = reduction (a,b) = c
            P = {∅}

    push(car, P) -> P = {c}

i = 3 :
   car = S[i] = a, P = {c}
   P is not empty :
       head = c
       head != car ->
            popped = Pop(P) = c 
            car = reduction (car, popped) = reduction (a,c) = b
            P = {∅}

    push(car, P) -> P = {b}

 ...

 i = 5 : (interesting case)
  car = S[i] = c, P = {c}
   P is not empty :
       head = c
       head == car -> break

    push(car, P) -> P = {c, c}

 i = 6 :
  car = S[i] = b, P = {c, c}
   P is not empty :
       head = c
       head != car ->
            popped = Pop(P) = c 
            car = reduction (car, popped) = reduction (b,c) = a
            P = {c}

   P is not empty : // (note in this case car = a)
       head = c
       head != car ->
            popped = Pop(P) = c 
            car = reduction (car, popped) = reduction (a,c) = b
            P = {∅}
    push(car, P) -> P = {b}

... and it continues until n 
```

我已经在这样的各种示例上运行了这个算法，它似乎有效。我用 Java 编写了一个测试该算法的代码，当我将代码提交给系统时，我得到了错误的答案。我已经在[gisthub](https://gist.github.com/2793850)上发布了 java 代码， 所以你可以看到它。

有人能告诉我我的算法有什么问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-26T14:20:08.910

我将尝试解释什么`nhahtdh`意思。您的算法失败的原因有多种。但最基本的一点是，在每个时间点，只有观察到的第一个字符才有机会被压入堆栈`p`。不应该这样，因为您基本上可以从任何位置开始减少。

让我给你字符串 `abcc`。如果我在断点

```
car = S[i]; 
```

算法运行为：

```
p = {∅}, s = _abcc //underscore is the position
p = {a}, s = a_bcc  
p = {c}, s = ab_cc 
```

在这一点上，你被困在减少`ccc`

但还有另一个减少：`abcc -> aac ->ab ->c`

此外，返回堆栈的大小`P`是错误的。`cc`不能减少，但算法会返回`1`。您还应该计算跳过的次数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T09:33:15.880

你也可以使用蛮力解决这个问题......和递归

```
for all n-1 pairs(2 char) replace it with 3rd char if possible and apply reduce on this new string of length n-1
    for all n-2 pairs replace it with 3rd char and apply reduce on new string
         for all n-3 pairs....and so on 
```

长度为 n-1 的新字符串将有 n-2 对，类似地，长度为 n-2 的新字符串将有 n-3 对。

在应用这种方法时，继续存储最小值

```
if (new_min < min)
    min = new_min 
```

实施：http: [//justprogrammng.blogspot.com/2012/06/interviewstreet-challenge-string.html](http://justprogrammng.blogspot.com/2012/06/interviewstreet-challenge-string.html)

# html - 如何在 HTML/CSS 中的页面上制作中心背景？

> ID：10766450
> 
> 赞同：0
> 
> 时间：2012-05-26T13:00:30.740
> 
> 标签：html, css

我想将页面的内容添加到背景的一部分。也就是说，我想在主要内容的两侧保留2个未使用的区域列。像[这样](http://www.w3.org/Style/CSS/#news)，您可以在主要内容的两侧看到 2 个未使用的蓝色区域。还可以看到阴影效果。因此，输入内容的主要白色背景区域必须是图像。

我如何实现这些目标？

我需要知道如何在屏幕上看到的整个页面上实际放置另一张纸。（我指的是链接中的 2 个未使用的列）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T13:05:57.260

开发人员工具（IE 和 Chrome 中的 F12）是一个了不起的东西。

例如，如果您尝试使用它们，您会看到身体有：

```
margin: 2em 3% 10em;
box-shadow: 0px 0.3em 1em #000; 
```

该`html`元素具有：

```
background-color: rgb(220, 227, 230); 
```

而且，就像魔法一样，主要内容上有一个“蓝色”背景和阴影。惊人的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T13:36:00.770

> 还可以看到阴影效果。因此，输入内容的主要白色背景区域必须是图像。

嗯……不。阴影可以`box-shadow`在主要区域使用。您可以使用`margin: 25px auto;`

示例[http://dabblet.com/gist/2793972](http://dabblet.com/gist/2793972)

# git - GitHub：是否可以在存储库中创建存储库？

> ID：10766457
> 
> 赞同：2
> 
> 时间：2012-05-26T13:00:52.300
> 
> 标签：git, symfony, github

我将我的 php 项目存储在一个私人 GitHub 帐户下。

例如，现在我有不同的组件（新闻包、用户包等）和一个将所有组件一起使用的项目（例如自定义网站）。我可以以某种方式对它们进行符号链接吗？

还是我应该只使用组件存储库？

问候

编辑：

例如对于 symfony2 项目，有一种简单的方法可以做到这一点。在父存储库中总是有可用的组件。

例如：[https ://github.com/symfony/OptionsResolver](https://github.com/symfony/OptionsResolver)

symfony/OptionsResolver->syfmony/symfony->symfony/标准版

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-27T09:11:28.807

我在 Symfony 2 Git 项目中处理依赖项的方式是这样的：

主要项目在Git下。外部依赖项（Bundles 和所有供应商的东西）进入 .deps 文件（或 composer.json）。然后我要么运行`php bin/vendors install`要么`composer install`安装依赖项。

依赖项将作为 Git 存储库安装，因此，如果我愿意，我可以`cd`进入它们并在那里提交并在我有权限的情况下推送它。这使得编辑您自己的包变得更容易，无需克隆单独的包存储库就可以在那里进行更改。

我也有这个结构：

```
src\Company\SharedBundle
src\Company\ProjectBundle 
```

where`SharedBundle`被简单地指定为依赖，目标安装路径在`src\Company`.

我在`SharedBundle`我所有的项目中都使用了。如果我需要对其进行更改，我会在其中一个项目中进行更改，然后我`cd src\Company\SharedBundle`提交并推送它，并在我需要更改时从所有使用它的项目中提取。

使用`deps`，您可以进行如下定位：

```
[AcmeAwesomeBundle]
    git=http://github.com/johndoe/Acme/AwesomeBundle.git
    target=../src/Acme/AwesomeBundle 
```

如果你使用 Composer，你可能想要这个： http: [//getcomposer.org/doc/01-basic-usage.md#autoloading](http://getcomposer.org/doc/01-basic-usage.md#autoloading)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T13:04:18.507

您可能想看看子模块。

[http://git-scm.com/book/en/Git-Tools-Submodules](http://git-scm.com/book/en/Git-Tools-Submodules)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-26T17:42:36.127

您可以使用[composer](http://getcomposer.org/)来处理依赖关系。这不会像子模块那样将子项目锁定到特定的提交。Symfony 使用作曲家。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-27T07:40:50.367

如果您只想将来自不同存储库的所有文件导入另一个存储库，并能够根据需要更新它们，我相信您可以简单地将所有其他存储库添加到主存储库作为远程存储库。

显然，在尝试之前备份所有内容，但我认为您只是想使用“git remote add [其他存储库的任意名称] [其他存储库的位置]”，“git fetch [其他存储库的任意名称]”和“get合并 [其他存储库的任意名称]/[其他存储库的分支]”。您可以使用任意数量的不同存储库来执行此操作。例如，我所有的存储库现在都是作为构建它们的框架的存储库的克隆开始的。我的项目与框架没有任何关系，只是碰巧将它用作起点，这并不重要。

所以你想要这样的东西：

```
git remote add news-bundle git://example.com/news-bundle.git
git merge news-bundle/master
git remote add user-bundle git://example.com/user-bundle.git
git merge user-bundle/master 
```

然后，当您对 news-bundle 进行了更多更改时，您可以像这样更新其他存储库：

```
git fetch news-bundle
git merge news-bundle/master 
```

# jquery - Shadowbox打开和关闭时如何暂停/播放Drupal Rotating Banner？

> ID：10766459
> 
> 赞同：1
> 
> 时间：2012-05-26T13:01:08.557
> 
> 标签：jquery, lightbox, shadowbox

在网页的标题中有一个显示幻灯片的横幅。一个例子可以在[这里](http://www.denotenbalkers.be/)找到。现在，当用户在包含照片库的页面上并单击缩略图时，将打开一个灯箱 ( [shadowbox.js](http://www.shadowbox-js.com/) )。在打开灯箱的同时，应该停止幻灯片脚本，以免用户被背景分散注意力。

总结： **正常**：幻灯片脚本正在执行 **当用户点击缩略图时**（具有一定的 rel attr “shadowbox”）：幻灯片脚本应该被阻止。 **当灯箱关闭时**（使用 Shadowbox 的`onClose`钩子？）标题中幻灯片放映的脚本应重新初始化。

对此有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T06:15:34.877

您使用的 Shadowbox 版本是**v3.0.3**，当前的稳定版本。

您正在使用的另一个插件的名称是[Durpal Rotating Banner v6](http://drupal.org/node/766604/release?api_version%5b%5d=103)，但可以使用**7.2**版本。

您使用**Shadowbox Hook Options**以及`.onOpen();`与`onClose();`Rotating Banner 脚本进行交互是绝对正确的。但是，Rotating Banner 脚本除了通过自定义菜单配置选项外，没有 API 使用文档。

检查有据可查的 JavaScript 可下载压缩文件显示如何与**Durpal Rotating Banner 交互**，无论您使用的是什么版本。

[首先，我不使用 Shadowbox 的插件版本，只使用来自Shadowbox](http://www.shadowbox-js.com)网站的独立版本，但这种方法应该适用于那些登陆此答案的各种 Shadowbox 插件（例如，Drupal、WordPress）。

如果您无权访问`Shadowbox.init({});`，请在网页的结束 body 标记之前使用此脚本，否则**跳转**到下一个代码块：

```
 <script type="text/javascript">

     window.onload=function(){

        Shadowbox.setup('',{

            // Besides 'pause' and 'resume' are 'prev', 'next', and 'stop' found in the jQuery Cycle Plugin (check inside jQuery Easing Plugin to see if it's combined).

              onOpen: function(){
                  jQuery('.rb-slides').each(function () {
                    if (jQuery(this).cycle) {
                      jQuery(this).cycle('pause');
                    }
                  });
              },
              onClose: function(){
                  jQuery('.rb-slides').each(function () {
                    if (jQuery(this).cycle) {
                      jQuery(this).cycle('resume');
                    }
                  });
              }

            // If you have access to Shadowbox.init({}), then place the above onOpen and onClose in there instead of using this script.

        });

     };

   </script> 
```

如果您可以通过以下方式访问 Shadowbox 初始化，请`Shadowbox.init({});`使用下面的`onOpen();`和`onClose();`部分，如图所示。

```
 <script type="text/javascript">

       Shadowbox.init({

           onOpen: function(){
               jQuery('.rb-slides').each(function () {
                 if (jQuery(this).cycle) {
                   jQuery(this).cycle('pause');
                 }
               });
           },
           onClose: function(){
               jQuery('.rb-slides').each(function () {
                 if (jQuery(this).cycle) {
                   jQuery(this).cycle('resume');
                 }
               });
           }

       });

   </script> 
```

在我的测试环境中，这适用于带有 Base 或 jQuery Adapter 接口的 Shadowbox……对我来说这是一个下载选项（除了 jQuery 库）。

上面的脚本将在 Shadowbox 打开时暂停网页上找到的**所有**Rotating Banners，然后在 Shadowbox 关闭时将它们全部恢复。

# php - php GD图像质量差

> ID：10766462
> 
> 赞同：0
> 
> 时间：2012-05-26T13:01:38.367
> 
> 标签：php, image, gd

我正在从现有的 png 生成一个简单的图像并向其添加文本。但是质量很差，结果参差不齐，请参见[此处](http://tntplants.site11.com)。结果不一定是超高质量，只是比它好一点。我一定做错了什么，因为这很糟糕。任何建议都会很棒。

非常感谢你，

托德

```
 // customizable variables
    $common_font_file = 'fonts/giddyup.ttf';
    $latin_font_file = 'fonts/comic-sans-ms.ttf';
    $font_color       = '#000000' ;
    $image_file       = 'images/oval_template_large.png';
    $mime_type          = 'image/png' ;
    $extension          = '.png' ;
    $s_end_buffer_size  = 4096 ;

    $common_name = html_entity_decode($_POST["Cname"]);
    $latin_name = html_entity_decode($_POST["Lname"]);
    $common_left_indent = html_entity_decode($_POST["cleftIndent"]);
    $latin_left_indent = html_entity_decode($_POST["lleftIndent"]);
    $common_top_indent = html_entity_decode($_POST["ctopIndent"]);
    $latin_top_indent = html_entity_decode($_POST["ltopIndent"]);
    $common_font_size = html_entity_decode($_POST["cFontSize"])* 72 / 96;
    $latin_font_size = html_entity_decode($_POST["lFontSize"])* 72 / 96;

    $font_rgb = hex_to_rgb($font_color) ;

    // create and measure the common text
    $common_box = @ImageTTFBBox($common_font_size,0,$common_font_file,$common_name) ;
    $common_text_width = abs($common_box[2]-$common_box[0]);
    $common_text_height = abs($common_box[5]-$common_box[3]);

    // create and measure the latin text
    $latin_box = @ImageTTFBBox($latin_font_size,0,$latin_font_file,$latin_name) ;
    $latin_text_width = abs($latin_box[2]-$latin_box[0]);
    $latin_text_height = abs($latin_box[5]-$latin_box[3]);

    $image =  imagecreatefrompng($image_file);

    if(!$image || (!$common_box && !$latin_box))
    {
        fatal_error('Error: The server could not create this image.') ;
    }

    // allocate colors and measure final text position
    $font_color = ImageColorAllocate($image,$font_rgb['red'],$font_rgb['green'],$font_rgb['blue']);
    $image_width = imagesx($image);

    $put_common_text_x = $common_left_indent;
    $put_common_text_y = $common_top_indent + $common_text_height;

    $put_latin_text_x = $latin_left_indent;
    $put_latin_text_y = $latin_text_height + $latin_top_indent ;

    // Write the text
    imagettftext($image, $common_font_size, 0, $put_common_text_x, $put_common_text_y, $font_color, $common_font_file, $common_name);
    // Write the text
    imagettftext($image, $latin_font_size, 0, $put_latin_text_x, $put_latin_text_y, $font_color, $latin_font_file, $latin_name);

    header('Content-type: ' . $mime_type) ;
    ImagePNG($image) ;

    ImageDestroy($image) ;
    exit ; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T13:10:38.247

GD 的文本功能不会对他们正在绘制的文本进行抗锯齿处理。解决此问题的最简单方法是生成至少比最终产品大 2 或 4 倍的图像，然后再调整大小，这将作为调整大小的副作用进行一些调整。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T13:14:48.893

也许您需要增加原始的“椭圆”图像，在其上渲染 .ttf 并在输出时渲染较小的版本。

# java - Java“如果”语句

> ID：10766469
> 
> 赞同：2
> 
> 时间：2012-05-26T13:02:01.273
> 
> 标签：java

这是我当前的代码：

```
 import java.util.Scanner;
public class Random {
  public static void main(String ars[]){
        Scanner input = new Scanner(System.in);
        System.out.println("Welcome"); 
        hey = input.nextLine();

        if(hey == "M"){
            System.out.println("Yup");
        }else{ 
            System.out.println("Nope"); 
        }
    }
} 
```

我对 Java 很陌生，对我来说，这看起来应该可以工作，但是 Java 告诉我“嘿，不能解析为变量。

我在互联网上浏览了一些不同的Java参考指南，想了一会儿，我仍然无法弄清楚为什么它不起作用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-26T13:02:33.077

你在哪里声明 hey 变量？

回答：你没有。

所以声明它：

```
String hey = input.nextLine(); 
```

还，...

不要使用`==`. 请改用`equals(...)`or`equalsIgnoreCase(...)`方法。了解 == 检查两个*对象*是否相同，这不是您感兴趣的。另一方面，这些方法检查两个字符串是否具有相同顺序的相同字符，这在这里很重要。所以而不是

```
if (fu == "bar") {
  // do something
} 
```

做，

```
if ("bar".equals(fu)) {
  // do something
} 
```

或者，

```
if ("bar".equalsIgnoreCase(fu)) {
  // do something
} 
```

# python - Google App Engine TextProperty 和 UTF-8：何时编码/解码

> ID：10766472
> 
> 赞同：3
> 
> 时间：2012-05-26T13:02:30.463
> 
> 标签：python, google-app-engine, unicode, utf-8

我在带有 Django 模板和 Webapp 框架的 Google App Engine 2.5 上。

db.TextProperty 和 UTF-8 以及 Unicode 和 Decode/Encode 让我非常困惑。我真的很感谢一些专家可以提供一些建议。我已经用谷歌搜索了一整夜，仍然有很多问题。

我正在尝试做的事情：

```
[utf-8 form input] => [Python, Store in db.TextProperty] => [When Needed, Replace Japanese with English] => [HTML, UTF-8] 
```

根据这个答案[Zipping together unicode strings in Python](https://stackoverflow.com/questions/10650004/zipping-together-unicode-strings-in-python/10650469#10650469)

```
# -*- coding: utf-8 -*- 
```

以及以 utf-8 格式保存的所有 .py 文件

这是我的代码：

```
#Model.py
class MyModel(db.Model):
  content = db.TextProperty()

#Main.py
def post(self):
    content=cgi.escape(self.request.get('content'))
    #what is the type of content? Unicode? Str? or Other?
    obj = MyModel(content=content)
    #obj = MyModel(content=unicode(content))
    #obj = MyModel(content=unicode(content,'utf-8'))
    #which one is the best?
    obj.put()

#Replace one Japanese word with English word in the content
content=obj.content
#what is the type of content here? db.Text? Unicode? Str? or Other?
#content=unicode(obj.content, 'utf-8') #Is this necessary?
content=content.replace(u'ひと',u'hito')

#Output to HTML
self.response.out.write(template.render(path, {'content':content})
#self.response.out.write(template.render(path, {'content':content.encode('utf-8')}) 
```

希望一些 Google App Engine 工程师可以看到这个问题并提供一些帮助。非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T07:09:21.107

首先，[阅读这个](http://www.joelonsoftware.com/articles/Unicode.html)。[而这个](http://blog.notdot.net/2010/07/Getting-unicode-right-in-Python)。

简而言之，每当您在应用程序中处理文本字符串时，它应该是一个 unicode 字符串。当您想将数据作为字节发送时，您应该编码成一个字节字符串（“str”的一个实例而不是“unicode”） - 例如，通过 HTTP，并且当您接收到表示文本的字节时，您应该从字节字符串解码（并且您知道它们的编码）。您应该对包含编码文本的字节字符串执行的唯一操作是对它们进行解码或编码。

幸运的是，大多数框架都做到了这一点。例如，webapp 和 webapp2（我可以看到您正在使用 webapp）应该从所有请求方法返回 unicode 字符串，并对您传递给它们的任何字符串进行适当的编码。确保你负责的所有字符串都是 unicode，你应该没问题。

请注意，字节字符串可以存储任何类型的数据——编码文本、可执行文件、图像、随机字节、加密数据等等。如果没有元数据，例如知道它是文本以及它的编码方式，除了存储和检索它之外，您无法明智地对它做任何事情。

永远不要尝试解码 unicode 字符串或编码字节字符串；它不会像你期望的那样做，事情会变得非常糟糕。

关于数据存储，`db.Text`是`unicode`; 就所有意图和目的而言，它*是*一个 unicode 字符串 - 它只是不同，因此数据存储区可以告诉它不应该被索引。同样，`db.Blob`是 , 的子类`str`，用于存储字节字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T07:52:50.110

尝试

```
db.Text("text", encoding="utf-8") 
```

它可以帮助我将 utf-8 文本保存到 TextProperty()

详情请参考以下链接： [https ://developers.google.com/appengine/docs/python/datastore/typesandpropertyclasses?hl=en#Text](https://developers.google.com/appengine/docs/python/datastore/typesandpropertyclasses?hl=en#Text)

# python - 1500 条记录的列表列表中超过 3 mb 的数据

> ID：10766473
> 
> 赞同：-4
> 
> 时间：2012-05-26T13:02:32.123
> 
> 标签：python, django, performance, object, firebug

在将一些记录列表发送到 HTML 时，我发现我的页面对于 1500 条记录来说非常慢。经过调查，我发现只有 1500 条记录传递了大量数据，大小在 3 到 4 mb 之间。每行有大约 6 个值，都是字符串，其中两个是日期时间对象。

我环顾四周，发现字典很重，将字典更改为数据元组确实减少了另一个页面的负载。但是在我的第一页中，我发送的只是一千条记录的列表，所以它是一个列表列表。

我尝试通过 firebug 查看每条记录发送了多少数据，我发现每条记录的数据量超过 1 kb。

这是一个性能问题，因为我的应用程序是一个 Web 应用程序，所有数据都已被压缩。

任何人都可以帮我解决问题吗？python 列表和对象真的那么重吗？

还请告知是否有任何方法可以进一步检查。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T13:36:21.177

这将显示使用了多少内存：

```
import sys

a = ["abcdef", "ghijklmnop"]
sys.getsizeof(a)    # => 44 (size of list a in bytes) 
```

当您谈论“将列表发送到 HTML”时，您是在谈论用 Python 呈现页面，还是将其作为 JSON 发送？您是仅发送所需的最少数据，还是发送“所有内容”然后进行过滤？

.

**编辑：**好点。以下情况如何：

```
import sys
import datetime

def show_mem(data, indent="    ", depth=0):
    "Recursively show the memory usage of a data structure"
    mysize = sys.getsizeof(data)
    if isinstance(data, (list,tuple,dict)):
        childsize = 0
        print("{}{} bytes: [".format(indent*depth, mysize))
        for d in data:
            childsize += show_mem(d, indent, depth+1)
        print("{}]  (total: {} bytes)".format(indent*depth, mysize+childsize))
        return mysize+childsize
    else:
        print("{}{} bytes: {}".format(indent*depth, mysize, repr(data)))
        return mysize

show_mem([1223456, 1245361536363, 'infooooooooo123', datetime.date(1975,7,21), "http://www.somesite.org/the/path/page.htm"]) 
```

返回

```
56 bytes: [
    12 bytes: 1223456
    18 bytes: 1245361536363L
    36 bytes: 'infooooooooo123'
    20 bytes: datetime.date(1975, 7, 21)
    62 bytes: 'http://www.somesite.org/the/path/page.htm'
]  (total: 204 bytes) 
```

.

**编辑＃2：**您应该在（使用一条记录呈现的页面）与（使用两条记录呈现的页面）上运行差异；这应该准确地向您显示添加一条记录的页面后果。您的 HTML 可能有很多隐藏属性或内联 Javascript，这会增加其大小。

即，在 Linux 命令行上：

```
diff -b saved_one_record.html saved_two_records.html 
```

应该返回类似

```
61a66
><tr class="rowA">
    <td class="_1"><a href="#row=1223456" alt="Show details">1223456</a></td>
    <td class="_2"><span style="">1245361536363</span></td>
    <td class="_3"><a href="http://www.somesite.org/the/path/page.htm"><b>infooooooooo123</b></a></td>
    <td class="_4">July 21 1975</td>
</tr> 
```

作为 Django 模板中最终呈现的每行 HTML。在这个例子中，204 字节的数据结构变成了 306 字节的 HTML 文件。根据您的测试，您应该会看到超过一千个字符。如果您发布差异结果，也许我们可以为您提供一些使其更紧凑的想法。

# javascript - 仅当 Jquery/Javascript 中尚不存在字符串时，如何将字符串添加到数组中？

> ID：10766475
> 
> 赞同：0
> 
> 时间：2012-05-26T13:02:49.373
> 
> 标签：javascript, jquery, arrays, loops, break

当用户浏览我的应用程序时，我正在填充站点地图数组。

但是我填充站点地图的逻辑是有缺陷的。这是我正在做的事情：

```
var siteMap = [],
    j = siteMap.length;

$(document).on( "pagebeforechange", function( e, data ) {

    if (j == 0 ){
        // add cause sitemap has no elements
        siteMap.push( { type: "external", data: data });
        } else {
            // loop through the sitemap object
            for ( var i = 0; i < j; i++) {
            // check if element is already stored
            if ( data.toPage == self.options.siteMap[i].data.toPage ){
                break;
                }   
            self.options.siteMap.push( { type: "external", data: data } );
            }           
        }
    }); 
```

问题是我的**休息**没有按预期工作。我想遍历站点地图并将**data.toPage**（类似 /some/page.html 的字符串）与我已经存储的内容进行比较。如果我找到匹配项，则循环应该在不向站点地图**推送**新元素的情况下结束。但是，现在我正在循环，如果在循环位置（1）处找不到元素，则不会触发中断，并且我在每个循环上添加一个条目，直到条目匹配。

**问题**：
我怎样才能修复循环，所以如果不存在匹配项，它只会添加一个条目？

感谢帮助！

**编辑**：
这就是我现在拥有的：

```
(function( $, window) {
   $.widget("mobile.multiview",$.mobile.widget, {   
      options: {
         siteMap = {};
         },
      eventBindings: function() {

        $(document).on( "pagebeforechange", function( e, data ) {

            var self = this;
            if (!self.options.siteMap[data.toPage]){
               self.options.siteMap[data.toPage] = { type: "external", data: data };
               }
            });
        }
 }) (jQuery,this); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T13:08:56.103

您循环在每次迭代中执行测试。在它找到它正在寻找的东西之前，它会在*每次*迭代中添加新条目。

您需要做的是查看该元素是否已经在数组中，如果没有，*则*添加它。更好的是，首先放弃使用数组的想法，只使用“toPage”值作为对象属性。

```
var sitemap = {};

$(document).on( "pagebeforechange", function( e, data ) {
  if (!sitemap[ data.toPage ])
    sitemap[data.toPage] = { type: "external", data: data };
}); 
```

# actionscript-3 - 为什么0xFFFFFFFF的填充是透明的？

> ID：10766476
> 
> 赞同：1
> 
> 时间：2012-05-26T13:02:51.673
> 
> 标签：actionscript-3, flash

为什么以下代码将矩形绘制为完全透明的？

```
graphics.beginFill(0xFFFFFFFF);
graphics.drawRect(0, 0, 100, 100);
graphics.endFill(); 
```

我知道 beginFill 接受一个不带 alpha 的参数，即 0xRRGGBB，但有一个 alpha 适用于全白以外的任何颜色。例如，它适用于 0xFFFFFFFE。对于全白，您必须在任何地方都使用 0x00FFFFFF ，这很烦人。

这种行为有合理的原因吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T13:06:10.277

如果输入值预期为 0x00RRGGBB，则传入 >= 0x01000000 的值只是无效输入。如果有人传入透明的常量值，这可能是被侵入代码以跳过填充。

# cocoa - 在 NSTextInput 字段中输入时如何滚动？

> ID：10766477
> 
> 赞同：2
> 
> 时间：2012-05-26T13:02:52.123
> 
> 标签：cocoa

我有`NSTextInput`一个附加的字段`NSScrollView`。当我键入并点击字符返回时，视图将不会滚动，并且文本类型低于字段的可见区域`NSTextInput`（不是最佳用户体验）。

我一直在寻找`NSTextInput`，`NSScrollView`但没有找到任何有用的东西。此外，更改为 a`NSTextView`并不是一个真正的选项，因为该类用于我无法篡改的其他对话框中。

我希望这里有人可能对如何滚动视图以使插入点保持可见提出建议？

# python - 如何修复python中Windows路径中的正斜杠问题？

> ID：10766483
> 
> 赞同：7
> 
> 时间：2012-05-26T13:03:26.450
> 
> 标签：python, windows, path, pyside

我在 python 和 pyside 中开发了一个应用程序。我已经在linux机器上开发了它。现在我想将它部署在 Windows 机器上。这里的问题是路径。在 linux 中正斜杠（/）用作分隔符，但 windows 使用反斜杠（\）作为分隔符。

因此，在 Windows 上，所有路径都不起作用。应用程序中有几个路径（用于样式表、图像、日志等）

由于大多数路径都是硬代码，因此很难更改所有路径，例如：

```
 rootPath()+'/static/images/add.png' #rootPath return os.path... 
```

例子：

```
 colorPickerBtnStyle = 'background:url(' + rootPath() + '/static/images/color_icon.png);background-repeat: no-repeat;background-position:center center;' 
```

有没有解决这个问题的方法。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-26T13:09:23.017

[`os.path.join()`](http://docs.python.org/library/os.path.html#os.path.join)将在正确的平台上使用正确的斜线。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-05-26T13:07:57.853

使用[`os.sep`](http://docs.python.org/library/os.html#os.sep)而不是显式编写斜杠。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-11-11T19:21:22.010

或者，您可以使用加入：

```
os.sep.join((dir, file)) 
```

# delphi - E2008 Delphi 中索引属性声明上的类型不兼容

> ID：10766484
> 
> 赞同：0
> 
> 时间：2012-05-26T13:03:37.870
> 
> 标签：delphi, class

继上[一个问题](https://stackoverflow.com/questions/10765722/indexed-property-in-delphi-beginner-is-making-multiple-player-objects-accessib)之后，当我尝试编译它时，我在这一行得到错误不兼容类型：

```
 Property player[i : integer] : TStringList read p; 
```

我不确定为什么？这是全班：

```
unit Battle;

interface

uses
  SysUtils,Dialogs,Classes,inifiles, StdCtrls;
type

  TPlayers = class
  Private
    p : array[1..20] of TStringList;
    FPlaceUnit: Boolean;
    FTeamCount: Integer;
  Public
    Property player[i : integer] : TStringList read p;
    property PlaceUnit : Boolean read FPlaceUnit write FPlaceUnit;
    procedure AddPlayer (PlayerNo : integer; player : String);
    property TeamCount : Integer read FTeamCount write FTeamCount;

    constructor Create;   virtual;
  End;

{Host class}
  THostPlayers = Class(TPlayers)
  Private
    FIsHost: string;
  Public
    constructor Create; override;
    property IsHost : string read FIsHost write FIsHost;
 End;

{Guest Class}
  TGuestPlayers = Class(TPlayers)
  Private
    FIsGuest: string;
  Public
    constructor Create; override;
    property IsGuest : string read FIsGuest write FIsGuest;
  End;

implementation

uses
main;
{constructor}
constructor TPlayers.Create;
begin
  p := TStringList.Create;
end;
constructor THostPlayers.Create;
begin
  inherited;  // Calls TPlayers.Create
  IsHost := 'No';
  PlaceUnit := true;
  TeamCount :=0;
end;
constructor TGuestPlayers.Create;
begin
  inherited;  // Calls TPlayers.Create
  IsGuest := 'No';
  PlaceUnit := true;
  TeamCount := 0;
end;

{ADD Player}
procedure TPlayers.AddPlayer(PlayerNo : integer; player : String);
  var
      CharINI : TIniFile;
  begin
      CharINI := Tinifile.Create(thisdir+'\char\charstats.ini');
      CharINI.ReadSectionValues(player,player[PlayerNo]);
      CharINI.Free;
  end;
end. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T13:16:20.747

首先，属性“返回”一个 TStringList 并且字段 p 是一个 TStringlist 数组，所以这就是你得到不兼容类型错误的原因。

你会期望：

```
// This is not working
Property player[i : integer] : TStringList read p[i];  // Not supported... 
```

解决这个问题。但是你不能直接访问数组元素，所以你需要一个 getter 函数：

```
TPlayers = class
private
  function GetPlayer(i: integer): TStringList;

public
  Property player[i : integer] : TStringList read GetPlayer 
end;

function TPlayers.GetPlayer(i: integer): TStringList;
begin
  Result := p[i];
end; 
```

# jquery - 为什么这个引导下拉示例不起作用？

> ID：10766486
> 
> 赞同：13
> 
> 时间：2012-05-26T13:04:05.267
> 
> 标签：jquery, html, css, twitter-bootstrap

我只是在尝试 Bootstrap 文档中的示例，但它似乎不起作用。我只是得到纯 HTML。这是我的代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<link rel="stylesheet" href="bootstrap.css" type="text/css">
<script type="text/javascript" src="http://twitter.github.com/bootstrap/assets/js/bootstrap-dropdown.js"></script>
<script src="http://code.jquery.com/jquery-latest.js"></script>
<script>

$('.dropdown-toggle').dropdown();

</script>
<title>Dropdown</title>
</head>

<ul class="nav nav-pills">
  <li class="active"><a href="#">Regular link</a></li>
  <li class="dropdown" id="menu1">
    <a class="dropdown-toggle" data-toggle="dropdown" href="#menu1">
      Dropdown
      <b class="caret"></b>
    </a>
    <ul class="dropdown-menu">
      <li><a href="#">Action</a></li>
      <li><a href="#">Another action</a></li>
      <li><a href="#">Something else here</a></li>
      <li class="divider"></li>
      <li><a href="#">Separated link</a></li>
    </ul>
  </li>
  ...
</ul>

</body>
</html> 
```

有没有人看到问题？谢谢。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-26T13:10:03.083

我发现您的标记存在两个问题。

首先，您在 jquery 插件“之前”包含引导插件。首先是 Jquery，其次是引导插件。

其次，您使用的是引导程序不支持的 DOCTYPE，您必须使用 HTML5 的 DOCTYPE：

```
<!DOCTYPE html> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-03-26T12:20:45.660

我认为 jquery.js 应该在引导 javascript 文件之前导入

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-02-24T22:30:26.050

我没有看到你的`<body>`开始标签

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-05-26T13:08:20.473

**工作演示** ~~[http://jsfiddle.net/jyy96/2/](http://jsfiddle.net/jyy96/2/) **或** [http://jsfiddle.net/jyy96/2/show](http://jsfiddle.net/jyy96/2/show)或[http://jsfiddle.net/jyy96/](http://jsfiddle.net/jyy96/)~~

**编辑**2015 年 7 月 9 日 -**在此处修复**：http : [//jsfiddle.net/jyy96/792/](http://jsfiddle.net/jyy96/792/)或[http://jsfiddle.net/jyy96/792/show/](http://jsfiddle.net/jyy96/792/show/)

===========================================

> 看起来 bootstrapcdn 是流行的选择，但对于那些想要使用 cdnjs.com 的人来说，他们拥有“所有文件”并保持最新（版本 2.0.0 到 2.1.1）。

```
http://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/2.1.1/css/bootstrap.css
http://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/2.1.1/css/bootstrap.min.css
http://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/2.1.1/css/bootstrap-responsive.css
http://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/2.1.1/css/bootstrap-responsive.min.css
http://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/2.1.1/bootstrap.js
http://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/2.1.1/bootstrap.min.js
http://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/2.1.1/img/glyphicons-halflings-white.png
http://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/2.1.1/img/glyphicons-halflings.png 
```

===========================================

希望这有帮助。

**脚本**

```
 <script type="text/javascript" src="/js/lib/bootstrap-2.0.2.js"></script>

  <link rel="stylesheet" type="text/css" href="http://twitter.github.com/bootstrap/assets/css/bootstrap.css"> 
```

**jQuery代码**

```
 $('.dropdown-toggle').dropdown(); 
```

[1] [https://github.com/twbs/bootstrap/issues/1679](https://github.com/twbs/bootstrap/issues/1679)

# php - 如何在 zend 框架应用程序中与两个 MySql 服务器实例进行负载平衡？

> ID：10766489
> 
> 赞同：1
> 
> 时间：2012-05-26T13:04:26.610
> 
> 标签：php, mysql, performance, zend-framework, load-balancing

我需要在 zend 框架应用程序中对 Mysql 服务器进行负载平衡。

谁能告诉我我该怎么做？

我需要在运行两个 MySql 服务器实例的情况下实现它，一个作为 Master，另一个作为 Slave，使用循环算法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T13:45:20.643

对于连接设置，您可以使用[Zend_Application_Resource_Multidb](http://framework.zend.com/manual/en/zend.application.available-resources.html#zend.application.available-resources.multidb "Zend_Application_Resource_Multidb")。对于每个客户端循环，您可以更改服务器以在 DB 类中连接下一个。这将在页面加载期间对所有查询进行循环。您还可以使用 memcache 使其在应用程序范围内。

请注意，您必须禁止对从站的写入。

# java - 反转 ArrayList 的最简单方法是什么？

> ID：10766492
> 
> 赞同：358
> 
> 时间：2012-05-26T13:05:04.163
> 
> 标签：java, android, arraylist, collections

反转这个 ArrayList 的最简单方法是什么？

```
ArrayList<Integer> aList = new ArrayList<>();

//Add elements to ArrayList object
aList.add("1");
aList.add("2");
aList.add("3");
aList.add("4");
aList.add("5");

while (aList.listIterator().hasPrevious())
  Log.d("reverse", "" + aList.listIterator().previous()); 
```

* * *

## 回答 #1

> 赞同：857
> 
> 时间：2012-05-26T13:06:15.940

```
Collections.reverse(aList); 
```

示例（[参考](http://www.java2s.com/Code/Java/Collections-Data-Structure/ReverseorderofallelementsofJavaArrayList.htm)）：

```
ArrayList aList = new ArrayList();
//Add elements to ArrayList object
aList.add("1");
aList.add("2");
aList.add("3");
aList.add("4");
aList.add("5");
Collections.reverse(aList);
System.out.println("After Reverse Order, ArrayList Contains : " + aList); 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2014-08-14T21:51:44.313

不是最简单的方法，但如果你喜欢递归，你可能会对以下反转 ArrayList 的方法感兴趣：

```
public ArrayList<Object> reverse(ArrayList<Object> list) {
    if(list.size() > 1) {                   
        Object value = list.remove(0);
        reverse(list);
        list.add(value);
    }
    return list;
} 
```

或非递归：

```
public ArrayList<Object> reverse(ArrayList<Object> list) {
    for(int i = 0, j = list.size() - 1; i < j; i++) {
        list.add(i, list.remove(j));
    }
    return list;
} 
```

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2017-09-19T16:49:05.743

这里的诀窍是定义“反向”。可以就地修改列表，以相反的顺序创建副本，或以相反的顺序创建视图。

*直观地说*，最简单的方法是`Collections.reverse`：

```
Collections.reverse(myList); 
```

这个方法*修改了列表*。也就是说，`Collections.reverse`获取列表并*覆盖*其元素，不留下任何未反转的副本。这适用于某些用例，但不适用于其他用例；此外，它假定列表是可修改的。如果这是可以接受的，我们很好。

* * *

如果没有，可以*按相反的顺序创建副本*：

```
static <T> List<T> reverse(final List<T> list) {
    final List<T> result = new ArrayList<>(list);
    Collections.reverse(result);
    return result;
} 
```

这种方法有效，但需要对列表进行两次迭代。复制构造函数 ( `new ArrayList<>(list)`) 迭代列表， 也是如此`Collections.reverse`。如果我们愿意的话，我们可以重写这个方法只迭代一次：

```
static <T> List<T> reverse(final List<T> list) {
    final int size = list.size();
    final int last = size - 1;

    // create a new list, with exactly enough initial capacity to hold the (reversed) list
    final List<T> result = new ArrayList<>(size);

    // iterate through the list in reverse order and append to the result
    for (int i = last; i >= 0; --i) {
        final T element = list.get(i);
        result.add(element);
    }

    // result now holds a reversed copy of the original list
    return result;
} 
```

这更有效，但也更冗长。

或者，我们可以重写上面的代码以使用 Java 8 的`stream`API，*有些人*认为它比上面的更简洁易读：

```
static <T> List<T> reverse(final List<T> list) {
    final int last = list.size() - 1;
    return IntStream.rangeClosed(0, last) // a stream of all valid indexes into the list
        .map(i -> (last - i))             // reverse order
        .mapToObj(list::get)              // map each index to a list element
        .collect(Collectors.toList());    // wrap them up in a list
} 
```

注意。这`Collectors.toList()`对结果列表几乎没有保证。如果要确保结果以 ArrayList 的形式返回，请`Collectors.toCollection(ArrayList::new)`改用。

* * *

第三个选项是以*相反的顺序创建视图*。这是一个更复杂的解决方案，值得进一步阅读/它自己的问题。Guava 的[Lists#reverse](http://google.github.io/guava/releases/snapshot/api/docs/com/google/common/collect/Lists.html#reverse%28java.util.List%29)方法是一个可行的起点。

选择一个“最简单”的实现留给读者作为练习。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2017-01-06T14:52:39.850

不使用额外的 ArrayList 或 add() 和 remove() 方法的组合的解决方案。如果您必须扭转一个庞大的列表，两者都会产生负面影响。

```
 public ArrayList<Object> reverse(ArrayList<Object> list) {

   for (int i = 0; i < list.size() / 2; i++) {
     Object temp = list.get(i);
     list.set(i, list.get(list.size() - i - 1));
     list.set(list.size() - i - 1, temp);
   }

   return list;
 } 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2017-10-05T00:06:05.437

```
ArrayList<Integer> myArray = new ArrayList<Integer>();

myArray.add(1);
myArray.add(2);
myArray.add(3);

int reverseArrayCounter = myArray.size() - 1;

for (int i = reverseArrayCounter; i >= 0; i--) {
    System.out.println(myArray.get(i));
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-03-10T09:54:48.353

以递归方式反转 ArrayList 并且不创建用于添加元素的新列表：

```
 public class ListUtil {

    public static void main(String[] args) {
        ArrayList<String> arrayList = new ArrayList<String>();
        arrayList.add("1");
        arrayList.add("2");
        arrayList.add("3");
        arrayList.add("4");
        arrayList.add("5");
        System.out.println("Reverse Order: " + reverse(arrayList));

    }

    public static <T> List<T> reverse(List<T> arrayList) {
        return reverse(arrayList,0,arrayList.size()-1);
    }
    public static <T> List<T> reverse(List<T> arrayList,int startIndex,int lastIndex) {

        if(startIndex<lastIndex) {
            T t=arrayList.get(lastIndex);
            arrayList.set(lastIndex,arrayList.get(startIndex));
            arrayList.set(startIndex,t);
            startIndex++;
            lastIndex--;
            reverse(arrayList,startIndex,lastIndex);
        }
        return arrayList;
    }

} 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2018-07-17T09:58:49.980

我们也可以使用 java 8 来做同样的事情。

```
public static<T> List<T> reverseList(List<T> list) {
        List<T> reverse = new ArrayList<>(list.size());

        list.stream()
                .collect(Collectors.toCollection(LinkedList::new))
                .descendingIterator()
                .forEachRemaining(reverse::add);

        return reverse;
    } 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2020-12-17T15:08:00.140

简单的方法是你在 Java 中有“**集合”。**你只需要调用它并使用它的“ **reverse()** ”方法。

**示例用法：**

```
ArrayList<Integer> yourArrayList = new ArrayList<>();
    yourArrayList.add(1);
    yourArrayList.add(2);
    yourArrayList.add(3);
    //yourArrayList is: 1,2,3

Collections.reverse(yourArrayList); 
    // Now, yourArrayList is: 3,2,1 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2017-05-20T04:22:57.377

万一我们使用的是**Java 8**，那么我们可以使用 Stream。ArrayList 是随机访问列表，我们可以逆序获取元素流，然后将其收集到一个新的`ArrayList`.

```
public static void main(String[] args) {
        ArrayList<String> someDummyList = getDummyList();
        System.out.println(someDummyList);
        int size = someDummyList.size() - 1;
        ArrayList<String> someDummyListRev = IntStream.rangeClosed(0,size).mapToObj(i->someDummyList.get(size-i)).collect(Collectors.toCollection(ArrayList::new));
        System.out.println(someDummyListRev);
    }

    private static ArrayList<String> getDummyList() {
        ArrayList dummyList = new ArrayList();
        //Add elements to ArrayList object
        dummyList.add("A");
        dummyList.add("B");
        dummyList.add("C");
        dummyList.add("D");
        return dummyList;
    } 
```

上述方法不适用于 LinkedList，因为它不是随机访问。我们也可以使用`instanceof`检查。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2021-04-28T15:43:16.747

**Kotlin 用户**

```
val reverse: List<Int> = list.reversed(); 
```

快乐编码！

[参考](https://www.techiedelight.com/reverse-copy-list-kotlin/)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-12-11T09:28:04.330

更具可读性:)

```
public static <T> ArrayList<T> reverse(ArrayList<T> list) {
    int length = list.size();
    ArrayList<T> result = new ArrayList<T>(length);

    for (int i = length - 1; i >= 0; i--) {
        result.add(list.get(i));
    }

    return result;
} 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2017-04-06T23:57:57.503

另一个递归解决方案

```
 public static String reverse(ArrayList<Float> list) {
   if (list.size() == 1) {
       return " " +list.get(0);
   }
   else {
       return " "+ list.remove(list.size() - 1) + reverse(list);
   } 
 } 
```

# hibernate - 如何将 MS 访问与休眠连接？

> ID：10766495
> 
> 赞同：-3
> 
> 时间：2012-05-26T13:05:15.707
> 
> 标签：hibernate

我需要将 MS Access 数据库与休眠连接可以帮助我.. 我对什么是驱动程序类以及如何使用我的 Eclipse 配置非常困惑你的帮助非常大

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T13:15:44.227

[https://www.google.com/#hl=en&biw=1143&bih=676&sclient=psy-ab&q=hibernate+with+ms+access&oq=hibernate+with+ms+&aq=2&aqi=g4&aql=&gs_l=hp.3.2.0l4 .0.0.2.27.0.0.0.0.0.0.0.0..0.0...0.0.7fK3_x2Ytd0&pbx=1&bav=on.2,or.r_gc.r_pw.r_qf.,cf.osb&fp=3ca401bf196c59f0](https://www.google.com/#hl=en&biw=1143&bih=676&sclient=psy-ab&q=hibernate+with+ms+access&oq=hibernate+with+ms+&aq=2&aqi=g4&aql=&gs_l=hp.3.2.0l4.0.0.2.27.0.0.0.0.0.0.0.0..0.0...0.0.7fK3_x2Ytd0&pbx=1&bav=on.2,or.r_gc.r_pw.r_qf.,cf.osb&fp=3ca401bf196c59f0)

# c# - 标签自动回发功能

> ID：10766496
> 
> 赞同：0
> 
> 时间：2012-05-26T13:05:23.070
> 
> 标签：c#, asp.net, autopostback

我的 Asp 页面中有两个下拉框。一旦用户更改了下拉列表的值之一，它就会触发 Autopostback 并在标签上显示新的选定值。

```
label.text = Convert.ToString(Convert.Int32(DropDownList1.SelectedValue.ToString())+Convert.Int32(DropDownList2.SelectedValue.ToString())); 
```

我只想将此标签值（动态重现）检索到另一个文本框。

不幸的是，标签没有称为 AutoPostBack 的事件。我该如何克服呢？请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T13:10:03.170

在更新标签值时更新文本框值。

```
label.text = Convert.ToString(Convert.Int32(DropDownList1.SelectedValue.ToString())+Convert.Int32(DropDownList2.SelectedValue.ToString()));
textBox.text = label.text 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T13:11:08.347

```
string Label_Value =Convert.ToString(Convert.Int32(DropDownList1.SelectedValue.ToString())+Convert.Int32(DropDownList2.SelectedValue.ToString()));

Textbox1.Text=Label_Value .Tostring(); 
```

# java - 使用函数覆盖时如何访问父类的函数

> ID：10766503
> 
> 赞同：0
> 
> 时间：2012-05-26T13:06:18.500
> 
> 标签：java

我想从孩子的引用变量中访问父母的成员函数。

我的代码：

```
class Emp
{
static String Cname="Google";
int salary ;
String Name;

void get(String s1,int s2)
{
    Name=s1;
    salary=s2;
}
void show()
{
    System.out.println(Name);
    System.out.println(salary);
    System.out.println(Cname);

}

}
public class Practice extends Emp{

/**
 * @param args
 */
void show()
{
    System.out.println("in Child class");
}
public static void main(String[] args) {
    // TODO Auto-generated method stub
    Practice e=new Practice();
    e.show();
    e.get("Ratan",200000);
    ((Emp)e).show();
}

} 
```

输出是：

```
in Child class
in Child class 
```

这意味着两次调用孩子的成员函数。解决这个问题的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T13:09:44.503

你必须像这样调用超类的方法： super.show();

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T13:12:19.773

在子类之外是不可能的。（在子类中使用 super.show()）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-26T13:28:04.660

你不能真正做你想做的事。正如其他人所说，在子类中，您可以使用 super.methodName(); 调用基类方法；

所以你可以在你的 Practice 类中编写一个方法： showBase() { super.show(); 但这在某种程度上违背了首先覆盖 show() 的观点。

您要么希望通过覆盖更改基类中方法的行为，要么在子类中使用额外的方法来丰富基类的功能。尝试按照您的建议进行操作表明您需要重新考虑您的设计。

# java - 我必须为每个查询连接到数据库吗？

> ID：10766505
> 
> 赞同：2
> 
> 时间：2012-05-26T13:06:42.853
> 
> 标签：java, database, oracle

我使用以下代码连接到 Oracle 的数据库：

```
Connection conn = null;
Statement stmt = null;
ResultSet rset = null;
String jdbc_url = "jdbc:oracle:thin:hr/hr@localhost:1521:XE";
String query = "";
try {
   DriverManager.registerDriver(new oracle.jdbc.OracleDriver());
   conn = DriverManager.getConnection(jdbc_url);
   stmt = conn.createStatement();
   query = "select username " + " from users ";
   rset = stmt.executeQuery(query);

   // my codes

} catch (SQLException sqle) {
   System.out.println("result error, " + e.getMessage());
} catch (NumberFormatException nfe) {

} finally {
   try {
      rset.close();
      stmt.close();
      conn.close();

   } catch (Exception e) {
      System.out.println("Error in closing " + e.getMessage());
   }
} 
```

我是否必须在为我想要的每个查询所做的每个操作中使用此代码？建立连接并终止它？每次？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T13:08:17.897

您不必每次都连接。只要确保每次都关闭结果集和语句。将此[答案](https://stackoverflow.com/a/3507846/575376)视为一个好的数据库包装类的示例。

您可以使您`Connection`的类变量在构造函数中初始化。像这样的东西：

```
public class DbWrapper {
    private Connection conn = null;
    String jdbc_url="jdbc:oracle:thin:hr/hr@localhost:1521:XE";

    public DbWrapper() {
        conn=DriverManager.getConnection(jdbc_url);
    }

    public Arraylist<User> getUsers() {
         ...
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T13:55:37.127

我建议使用池连接/数据源。

一个 DataSource 实例是一个工作单元，应该在工作单元完成时关闭（但请注意，如果您使用池连接，它不会关闭数据库连接）。

还可以考虑使用更高级别的 JPA。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-26T15:16:20.233

如果您的应用程序在 Tomcat、GlassFish 等服务器上运行，最好的方法是使用[JNDI](http://docs.oracle.com/javase/jndi/tutorial/)获取连接。否则，由于您使用的是 Oracle JDBC 驱动程序，因此您可以使用 class [`OracleDataSource`](http://docs.oracle.com/cd/E18283_01/appdev.112/e13995/oracle/jdbc/pool/OracleDataSource.html)。

为了获取`Connection`对象，您可以实现[Singleton 设计模式](http://en.wikipedia.org/wiki/Singleton_pattern)。一种简单的方法是使用[Java 枚举](http://docs.oracle.com/javase/tutorial/java/javaOO/enum.html)。

```
enum DBEnum {
    ORACLE_XE {
        private DataSource ds = initDataSource();
        private DataSource initDataSource() {
            try {
                OracleDataSource ds = new OracleDataSource();
                ds.setDriverType("thin");
                ds.setServerName("localhost");
                ds.setPortNumber(1521);
                ds.setDatabaseName("XE"); // Oracle SID
                ds.setUser("Herong");
                ds.setPassword("TopSecret");
                return ds;
            } catch (Exception e) {
                throw new RuntimeException(e);
            }
        }
        @Override
        public Connection getConnection() throws SQLException {
            return ds.getConnection();
        }
    };
    public abstract Connection getConnection() throws SQLException;
} 
```

有了这个，你会改变你的代码：

```
Connection conn = null;
Statement stmt = null;
ResultSet rset = null;
String query = "";
try {
   conn = DBEnum.ORACLE_XE.getConnection();
   stmt = conn.createStatement();
   query = "select username " + " from users ";
   rset = stmt.executeQuery(query);

   // my codes

} catch (SQLException sqle) {
   System.out.println("result error, " + e.getMessage());
} catch (NumberFormatException nfe) {

} finally {
   try {
      rset.close();
      stmt.close();
      conn.close();

   } catch (Exception e) {
      System.out.println("Error in closing " + e.getMessage());
   }
} 
```

# sed - sed：来自 xdpyinfo 的屏幕分辨率

> ID：10766508
> 
> 赞同：0
> 
> 时间：2012-05-26T13:06:59.817
> 
> 标签：sed

```
xdpyinfo  | grep 'dimensions:'
dimensions:    1280x800 pixels (301x188 millimeters) 
```

我有兴趣只保留上述输出中的第二个字符串，即 1280。我如何使用 sed 来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T13:11:03.707

试试这个：

```
xdpyinfo  | sed 's/^ *dimensions: *\([0-9]*\).*/\1/;t;d' 
```

捕获它们之间匹配的`\( \)`数据，然后`\1`在替换值中引用它。

`s`(substitution)后面的命令，`t;d`删除与替换表达式 ( 不匹配的行，如果不匹配`t`会导致脚本跳回到开头`s`，从而跳过`d`(delete line)。

# python - Python：替换列表中特定单词的所有出现的快速方法？

> ID：10766514
> 
> 赞同：0
> 
> 时间：2012-05-26T13:07:43.123
> 
> 标签：python

我有一个单词列表。它非常大（len(list) ~ 70,000）。我目前正在使用此代码：

```
replacement = "bla"
for word in data:
    if (word in unique_words):
        word = replacement 
```

此代码需要一段*时间*来执行操作。有没有更快的方法来做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-26T13:11:42.590

使用一个`set`for `unique_words`。在确定项目是否在其中时，集合比列表快得多（请参阅[Python Sets vs Lists](https://stackoverflow.com/questions/2831212/python-sets-vs-lists)）。

此外，这只是一个风格问题，但我认为您应该删除`if`. 它看起来更干净。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-26T13:25:32.867

您发布的代码实际上并没有做任何替换。这是一个片段：

```
for key,word in enumerate(data):
   if word in unique_words:
       data[key] = replacement 
```

这是一种更紧凑的方式：

```
new_list = [replacement if word in unique_words else word for word in big_list] 
```

考虑到它的用途，我认为`unique_words`变量的名称很奇怪，也许应该是`search_list`？

*编辑*：

在您发表评论后，也许这会更好：

```
from collections import Counter
c = Counter(data)
only_once = [k for k,v in c.iteritems() if v == 1]

# Now replace all occurances of these words with something else

for k, v in enumerate(data):
    if v in only_once:
        data[k] = replacement 
```

# java - 超类和子类之间的数据所有权

> ID：10766518
> 
> 赞同：0
> 
> 时间：2012-05-26T13:08:05.900
> 
> 标签：java, oop

当一个子类继承一个超类时，子类和超类中定义的具有不同可访问性的字段之间的关系是什么，哪些字段属于子类，哪些不属于。有人可以解释下面的例子：

```
class Parent
{
  private int partOne = 0;
  public int partTwo = 1;

  public void tellMe()
  {
     System.out.println(partOne);
     System.out.println(partTwo);
  }
}
class Child extends Parent
{
  private int partOne = 2;
  public int partTwo = 3;

  public void main(String[] args)
  {
   Child child = new Child();
   child.tellMe();
  }
} 
```

在 Eclipse 中 调试 时 , 观察 栈 中 的 变量*child* , 发现 Child 实例 有 4 个 字段 , 两个 由 其 类 定义 , 两个 由 其 父 类 , 我 很 困惑 . 是 否 是 我 的 时候 创建 了 父 实例 .创建一个子实例，IMP，我认为它只进入父类的构造函数，但我无法解释为什么子类不覆盖这两个字段，或者至少，我认为它应该覆盖具有*公共*可访问性的*partTwo* .请告诉我是什么原因，谢谢。

 ** * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-26T13:14:09.407

> 为什么子类不覆盖这两个字段，或者至少，我认为它应该覆盖具有公共可访问性的 partTwo

在 Java 中，数据成员不是多态的。这意味着在您的示例中，类中定义的两个字段与`Child`类中的两个字段完全无关`Parent`，即使它们碰巧共享它们的名称。

尽管语言允许这样做，但做这种性质的事情只是造成混乱的秘诀（正如您所发现的那样）。

如果您想要多态行为，请创建两个成员*函数*,`getPartOne()`和`getPartTwo()`, 并根据需要覆盖它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T13:15:18.563

发生的情况是，您通过在类上使用相同的名称重新定义它来隐藏对类字段`partTwo`的访问。实际上，您应该从编译器那里得到一个警告。`Parent``Child`

做以下实验，看看发生了什么：

*   向两个类添加适当的构造函数，调用`super`的`Child`构造函数（是的，这不是必需的，但它可以帮助使事情更清晰）。
*   在构造函数中初始化您的字段，而不是直接在字段声明中进行。
*   到目前为止，代码将执行相同的操作。
*   现在`partTwo`从类中删除变量`Child`- 它仍然会编译，但这次`Child`将应用构造函数设置的值（并且警告将消失）。

您可能已经看到我发布的关于封装的评论 - 只有私有字段可以防止这种混淆，并允许以后更好地维护您的类，因为您可以在不影响继承类的情况下更改类的字段（只要访问的方法数据保持不变）。*

# python - Python 2.6.6，MYSQLdb 不会插入/更新

> ID：10766523
> 
> 赞同：-1
> 
> 时间：2012-05-26T13:08:34.287
> 
> 标签：python, mysql, mysql-python, python-2.6, insert-update

你好我有奇怪的问题我在 CentOS 上使用 Python 版本 2.6.6 和 MYSQLdb API 版本（1、2、3、'gamma'、1）当我想更新/插入一些数据到一个表时，python 返回我 1（真）但是mysql中没有数据，当我在phpmyadmin中输入SAME查询时，一切正常

这是代码

```
import MySQLdb
# make mysql connection
try:
    db = MySQLdb.connect(host="192.168.0.*", port=3366, user="*", passwd="*", db="*")
except MySQLdb.Error, e:
     print "Error %d: %s" % (e.args[0], e.args[1])
     exit()

sql = cursor.execute("INSERT INTO `video` SET `title`='testera', `description`='', `featuredesc`='', `keyword`='', `location`='', `embed_code`='', `vPath`='', `vSize`='0', `vText`='', `videoUrl`='', `mod_filestatus`='', `mod_mode`='', `mod_external`=''")
print sql # giving me 1 
```

所以没有错误，一切正常，只是不在 db 中，并且 db/tabel/fields 存在。怎么办，我不知道。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T13:11:40.937

完成所有写入/修改操作后，您应该提交，这样您的数据就不会丢失。

尝试：

```
db.commit() 
```

# android - 如何使用汤姆猫应用程序等不同的语音调制来捕获和重复语音

> ID：10766527
> 
> 赞同：1
> 
> 时间：2012-05-26T13:09:23.907
> 
> 标签：android

我想在 android 中开发一个会说话的汤姆猫应用程序，但我不知道这个概念任何一个指导我。首先我需要如何用不同的调制改变声音和重复声音任何人帮助我任何教程和任何代码非常感谢......！

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T05:51:48.670

不知道开始录音和停止录音，但你可以在播放时改变声音，只需使用`Sound Pool`.

```
 public final int play (int soundID, float leftVolume, float rightVolume, int priority, int loop, float rate) 
```

要让声音听起来像汤姆说话，请将速率设置在 1.0 到 2.0 之间。这将使声音看起来更快。

有关声音池的更多信息，请参阅[此处](http://developer.android.com/reference/android/media/SoundPool.html)

# ajax - 我怎么知道什么时候点击了“分享链接”按钮？

> ID：10766530
> 
> 赞同：0
> 
> 时间：2012-05-26T13:09:51.157
> 
> 标签：ajax, facebook, share

我正在使用带有按钮的旧 Facebook 共享器，该按钮是我主页上的 facebook.com/sharer.php?u=LINK 的链接，因为有很多内容需要有一些共享按钮，但喜欢按钮就可以了非常慢。

所以，现在我自己设计了 fb 分享器，所以当我点击分享按钮时，ajax 会加载一个带有 iframe 的框到 fb 分享器。

现在我很感兴趣，如果我现在可以在单击“共享链接”按钮或“取消”按钮时自动关闭我的框（就像单击这些按钮时关闭原始弹出窗口一样）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T13:15:53.103

正如它在[Share 文档中所述](http://developers.facebook.com/docs/share/)：

> Share 按钮已被弃用，取而代之的是 Like 按钮，并且将不再受支持。请尽可能使用“赞”按钮为您的应用带来最大流量。

由于它不再受支持，因此使用它有一些缺点。使用[Like 按钮](http://developers.facebook.com/docs/reference/plugins/like/)，您可以简单地订阅 like 事件：

```
FB.Event.subscribe("edge.create",
    function(response) {
        alert("You liked the URL: " + response);
    }
); 
```

我不认为有办法知道旧的份额。

# javascript - 使用 javascript onClick 播放 mp3 文件

> ID：10766538
> 
> 赞同：4
> 
> 时间：2012-05-26T13:10:59.420
> 
> 标签：javascript, html

我正在播放 mp3 文件，只是 javascript onClick。

贝娄是我的代码：

```
//Music File 1
<audio id="id1" src="01.mp3"></audio>
<button onClick="document.getElementById("id1").play()">Play</button>
<button onClick="document.getElementById("id1").pause()">Stop</button>

//Music File 2
<audio id="id2" src="02.mp3"></audio>
<button onClick="document.getElementById("id2").play()">Play</button>
<button onClick="document.getElementById("id2").pause()">Stop</button> 
```

我的问题是，我正在播放音乐 01.mp3，如果我在音乐 02.mp3 上按下播放按钮，我希望它停止播放。

谁能给我比这更好的解决方案？完全，我想像 www.mp3skull.com 这样播放音乐，如果按下其他文件播放，其他停止播放。

问候， 维拉克

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-26T13:18:06.507

除了标签错误（假设这只是这篇文章中的一个错字），如果你想要一个更好的 Javascript 音频播放器，请查看[http://jplayer.org/](http://jplayer.org/) - 它是一个开源、免费的播放器 API。

播放器可用的方法之一是`.pauseOthers()`暂停页面上的所有播放器，而不是您运行该方法的播放器 - 在您的情况下很有用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-26T13:15:07.993

你有 html/javascript 语法错误：

```
<button onClick="document.getElementById("id2").play()">Play</button>
                ^                        ^   ^        ^
                1                        2   3        4 
```

引用 #2 关闭引用 #1，因此您的 id2 在 onclick 之外，并且是按钮标签的一部分。3 和 4 同上。将内部引号`'id2'`改为。

# friendly-url - modx revo 友好的网址

> ID：10766542
> 
> 赞同：0
> 
> 时间：2012-05-26T13:11:21.427
> 
> 标签：friendly-url, modx

刚开始使用MODX Revo。当我在 MODX(Revo) 中创建新文档时，填写其别名（例如' **TESTALIAS** '）并尝试获取**mydomain/TESTALIAS**我收到错误**404**。

使用 nginx 和 php-fpm，FURL 在**.htaccess中处于打开状态**

那么我做错了什么？非常感谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T16:23:17.053

唯一让我感到不安的是 NGINX 和 .htaccess ... htaccess 旨在与 Apache Web 服务器一起使用。我想看看[http://rtfm.modx.com/display/revolution20/Nginx+Server+Config](http://rtfm.modx.com/display/revolution20/Nginx+Server+Config)可能有任何用处:)

希望这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T16:21:24.227

如果您已经建立了站点，浏览了一下然后打开了 furls，请清除您的 modx 缓存。[实际上删除所有文件]还要确保不仅在modx中启用了furls，而且：

使用友好别名路径 = on

检查所有上下文中的重复 URI = on

自动生成 alias = on [没必要，只是方便]

您收到的是 modx 404 错误页面还是 apache 404？

但听起来你没有在 modx system->settings->freindly urls 中启用 furls

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T09:57:27.653

记住

```
Options +FollowSymlinks
RewriteEngine On
RewriteBase / 
```

或者

```
Options +FollowSymlinks
RewriteEngine On
RewriteBase /your-path-from/ 
```

多年来，我在我的任何...50 个 modx 页面中的友好 URL 都没有问题。

# objective-c - 在 for 循环中将对象添加到 NSMutableArray 我在所有位置都复制了对象

> ID：10766544
> 
> 赞同：1
> 
> 时间：2012-05-26T13:11:38.893
> 
> 标签：objective-c, nsmutablearray

我有一个带有问题的 sqlite 数据库，我想编写一个函数来从中获取 N 个随机问题。我使用带有 n 次迭代的 for 循环。对于每次迭代，我都会收到一个带有随机 ID 的问题，该 ID 不会重复。我将每列的元素复制到“问题”类的对象的变量中。到这里为止，一切都很完美。我已经使用 NSLog 通过所有函数打印问题，并且所有过程都是正确的，直到我尝试将最后一个对象添加到 NSMutablearray。所有位置都被覆盖。这是我的代码：

```
-(NSMutableArray*)getNQuestions:(int)n
{
    question *aQuestion=[[question alloc]init];

    NSMutableArray *arrayOfChoosenQuestions=[[NSMutableArray alloc]initWithCapacity:n];

    NSMutableIndexSet *choosenQuestionsIDs=[[NSMutableIndexSet alloc]init];

    FMResultSet *rs;
    int questionID;

    for (int i=0; i<n; i++) {
       questionID = (arc4random()%(NUMBER_OF_AVAILABLE_QUESTIONS-1))+1;
        while ([choosenQuestionsIDs containsIndex:questionID]) {
            questionID = (arc4random()%(NUMBER_OF_AVAILABLE_QUESTIONS-1))+1;
        }
        [choosenQuestionsIDs addIndex:questionID];

        rs = [database executeQueryWithFormat:@"SELECT * FROM questions WHERE Questions.ID=%d", questionID];

        if ([rs next] ) {
            aQuestion.statement=[rs stringForColumn:@"Question"];
            aQuestion.rightAnswer=[rs stringForColumn:@"Right_Answer"];
            aQuestion.wrongAnswer1=[rs stringForColumn:@"Wrong_Answer_1"];
            aQuestion.wrongAnswer2=[rs stringForColumn:@"Wrong_Answer_2"];
            aQuestion.image=[rs stringForColumn:@"image"];
        }
        [arrayOfChoosenQuestions addObject:aQuestion];
    }
    return arrayOfChoosenQuestions;
} 
```

这是发生的事情的一个例子

第一次迭代：

arrayOfChoosenQuestions=[问题1]

第二次迭代

arrayOfChoosenQuestions=[问题 2 问题 2]

第三次迭代

arrayOfChoosenQuestions=[question3 question3 question3]

感谢您的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T13:20:56.660

您一遍又一遍地重复使用相同的`question`对象（即），因此您实际上是在修改**相同**的底层对象并将其插入到数组中。`aQuestion`

 **基本上，在您当前的代码中，当您读取/写入`aQuestion`. 所有修改都将转到内存中的相同位置。如您所见，更改“传播”到其他对象，因为它们实际上是`aQuestion`.

对于每个循环，您必须创建一个新`question`对象来容纳新数据。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-26T14:14:57.973

除了 nhahtdh 说的，你的方法过于复杂。大概可以简化为：

```
-(NSMutableArray*)fetchNQuestions:(int)n {
    NSMutableArray *questions = [NSMutableArray array];

    FMResultSet *rs = [database executeQueryWithFormat:@"SELECT * FROM questions ORDER BY RANDOM LIMIT %d", n];
    while ([rs next]) {
      Question *q = [[Question alloc] init];

      [q setStatement:[rs stringForColumn:@"Question"]];
      ...
      [questions addObject:q];

      // if you're not using ARC:
      [q release];
    }
    return questions;
} 
```**

# c# - WCF XmlDictionaryReaderQuotas 不存在

> ID：10766545
> 
> 赞同：9
> 
> 时间：2012-05-26T13:11:40.670
> 
> 标签：c#, wcf

我想在 basichtttpbiding 中设置 maxArrayLength。但是在**没有配置文件**的情况下，唯一的方法是创建一个 XmlDictionaryReaderQuotas，**它在 System.xml 中不存在**，并将其放在 BasicHttpBinding1.ReaderQuotas 中。

**在不使用配置文件**的情况下如何设置 maxArrayLength ？

编辑：

我不能那样做：basichtttpbiding1.ReaderQuotas.MaxArrayLength = 1000000; 因为在此之后我没有任何选项可供选择：basichtttpbiding1.ReaderQuotas.[Options to choose]

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-05-26T15:24:33.690

**解决了。**

需要手动添加引用：`System.Runtime.Serialization` 然后类`XmlDictionaryReaderQuotas`会显示在`System.Xml`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-26T13:56:20.373

您不需要创建`XmlDictionaryReaderQuotas`. 绑定已经有一个这样的实例，所以你可以直接使用它：

```
BasicHttpBinding bhb = new BasicHttpBinding;
bhb.ReaderQuotas.MaxArrayLength = 1000000; 
```

但是，如果您使用的是 Silverlight 等平台（如果是这种情况，请在您的问题中添加适当的标签），则不会公开此属性。那是因为这个配额在那个平台上没有被强制执行——它本质上与配额存在的行为相同，但是它被设置为最大值（int.MaxValue）。所以你不需要增加它（它已经被最大化了），你不能减少它。

# c# - 从数据库中获取单元格的值到字符串中：我不能仅从下一行从当前行中获取它

> ID：10766548
> 
> 赞同：0
> 
> 时间：2012-05-26T13:11:47.787
> 
> 标签：c#, asp.net, sql, gridview

问题是我只能从下一行访问某一行的值。这是代码：

```
protected void GridView1_RowUpdating(object sender, GridViewUpdateEventArgs e)
        {
            int s = GridView1.EditIndex;
            string constr = "con string";
            string statment = "Select Name from tb1 Where [ID] = " + s;
            using (SqlConnection con = new SqlConnection(constr))
            {
                using (SqlCommand comm = new SqlCommand(statment, con))
                {
                    con.Open();
                    Label2.Text = comm.ExecuteScalar().ToString();
                    con.Close();
                }
            }
        } 
```

例如：

```
 ID   Name
Edit Delete Select  1   JOhn 
Edit Delete Select  2   SMith 
```

*   如果我在第一行单击编辑和更新，我会得到：

    > 你调用的对象是空的。

*   如果我单击第二行上的编辑和更新，我会从第一行获取值。

有没有什么办法解决这一问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T13:19:10.840

更改`int sd = GridView1.EditIndex;`为`int sd = GridView1.EditIndex + 1;`

更好的方法是使用 gridview 的 datakeynames 属性。

在 gridview 上设置`datakeyname="id"`将允许您检索 Id`int Id = Convert.ToInt32(GridView1.DataKeys[Gridview1.EditIndex].Values[0])`

与创建对象并将其设置为包含 id 的行中的控件以检索其值相比，这将使用更少的开销。有关实现数据键名的进一步阅读，请参阅[链接。](http://www.codeproject.com/Articles/23833/DataKeyNames)

我还建议使用`System.Data.SqlClient.SqlCommand`SQL 方法并通过参数添加 Id。这将有助于防止注入攻击。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T13:21:17.863

您使用了错误的 ID。EditIndex 是指您正在编辑的项目的行号。您必须从绑定的实体中获取 ID 并传递它。

我不完全确定你想用你的 SQL 做什么，但这并不重要。SQL 表有一个 ID 字段，看起来该 ID 值已绑定到您的 GridView，可能使用标签。您必须通过使用 RowIndex 来获取该 ID 以传递到您的 SQL 语句，因为您的 SQL 表中的 ID 可能不需要与行索引对齐。

```
protected void GridView1_RowUpdating(object sender, GridViewUpdateEventArgs e)
{
  // get the row being updated
  GridViewRow row = (GridViewRow)GridView1.Rows[e.RowIndex];

  // use the FindControl method to retrieve the control holding the ID
  Label lbl = (Label)row.FindControl("lblid");

  // you can find other controls as needed using the same method
  TextBox tb1 = (TextBox)row.FindControl("textbox1");
  TextBox tb2 = (TextBox)row.FindControl("textbox2");

  // perform the SQL update, or whatever using the ID (here's your original code)

  string constr = "con string";          
  string statment = "Select Name from tb1 Where [ID] = " + lbl.Text;          
  using (SqlConnection con = new SqlConnection(constr))          
  {          
    using (SqlCommand comm = new SqlCommand(statment, con))          
    {          
      con.Open();          
      Label2.Text = comm.ExecuteScalar().ToString();          
      con.Close();          
    }          
  } 
} 
```

# emacs - 如何在后台执行 shell 命令？

> ID：10766550
> 
> 赞同：5
> 
> 时间：2012-05-26T13:11:54.763
> 
> 标签：emacs, elisp

这是一个运行 shell 脚本的简单 defun：

```
(defun bk-konsoles ()
  "Calls: bk-konsoles.bash"
  (interactive)
  (shell-command (concat (expand-file-name "~/its/plts/goodies/bk-konsoles.bash ")
                         (if (buffer-file-name) 
                             (file-name-directory (buffer-file-name)))
                         " &") 
                  nil nil)) 
```

如果我启动一个没有 & 符号的程序 - 它会启动脚本，但会阻止 emacs 直到我关闭程序，如果我不放 & 符号它会给出错误：

```
/home/boris/its/plts/goodies/bk-konsoles.bash /home/boris/scl/geekgeek/: exited abnormally with code 1. 
```

**编辑**：

所以现在我正在使用：

```
(defun bk-konsoles ()
  "Calls: bk-konsoles.bash"
  (interactive)
  (shell-command (concat (expand-file-name "~/its/plts/goodies/bk-konsoles.bash ") 
                         (if (buffer-file-name) 
                             (file-name-directory (buffer-file-name))) 
                         " & disown") 
                 nil nil)
  (kill-buffer "*Shell Command Output*")) 
```

**编辑 2**：

不 - 不起作用：

```
(defun bk-konsoles ()
  "Calls: bk-konsoles.bash"
  (interactive)
  (let ((curDir default-directory))
    ;; (shell-command (concat "nohup " (expand-file-name "~/its/plts/goodies/bk-konsoles.bash ") curDir) nil nil)
    (shell-command (concat (expand-file-name "~/its/plts/goodies/bk-konsoles.bash ") 
                           curDir "& disown") nil nil)
    (kill-buffer "*Shell Command Output*"))) 
```

让 emacs 保持忙碌 - 使用`disown`, 或`nohup`.

如果可能有帮助，这是我正在运行的脚本：[bk-konsoles.bash](https://github.com/bk322/bk-goodies/blob/master/bk-konsoles.bash)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T13:47:48.470

我认为问题出在 konsole 上。

```
(shell-command "xterm &") 
```

做你所期望的，在新窗口中打开一个 xterm 并将控制权返回给 Emacs。然而，

```
(shell-command "konsole &") 
```

立即打开和关闭 konsole。关于 konsole 的启动方式似乎是导致问题的原因。我认为 KDE 应用程序有自己的系统来启动应用程序，但我不确定。无论如何，我认为问题不在于 Emacs 方面。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-27T08:54:09.263

您可以使用`nohup`或`disown`像这样：

```
$ your_command & disown
$ nohup your_command 
```

有关差异的描述，请参阅stackexchange 上的[这篇文章](https://unix.stackexchange.com/questions/3886/difference-between-nohup-disown-and)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T10:37:46.943

哦，我解决了：

```
(shell-command (concat (expand-file-name "~/its/plts/goodies/bk-konsoles.bash ")
                curDir " 2>&1 > /dev/null & disown") nil nil) 
```

`2>&1 > /dev/null &`我还在我的 bash 脚本中调用了 konsole 。默默工作！

# asp.net - 从自定义 404 页面获取引荐来源网址

> ID：10766558
> 
> 赞同：3
> 
> 时间：2012-05-26T13:12:31.143
> 
> 标签：asp.net, iis, iis-7, asp-classic

自定义的404错误只会给你使用时找不到的页面，`Request.Servervariables("QUERY_STRING")`这一点深有体会。

但是您如何获得该页面的引用者？

`Request.Servervariables("HTTP_REFERER")`在自定义 404 错误页面中，不返回调用 404 页面的页面的引用页面。

页面顺序如下：

1.  指向无效 URL (/home/) 的页面
2.  无效的 URL (/invalidurl)
3.  404 错误页面 (/404)

我正在尝试从 404 错误页面 (3) 中获取引荐页面 (1)，而不是像您使用`Request.Servervariables("QUERY_STRING")`

有什么建议么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-28T12:17:02.093

对此的简单回答是：不。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-10-25T17:11:08.750

您不能在服务器端*轻松*执行此操作，但您可以在客户端执行此操作，因为浏览器会保留历史记录。您只需在 history.back 方法中使用 -2 即可。

HTML

```
<a id="goBack">Back</a> 
```

JS

```
<script>
document.addEventListener("DOMContentLoaded", function(){
    document.getElementById('goBack').addEventListener('click', () => {
        history.back(-2);
    });
});
</script> 
```

# java - ElasticSearch Java API 的异步特性

> ID：10766562
> 
> 赞同：4
> 
> 时间：2012-05-26T13:12:41.713
> 
> 标签：java, groovy, elasticsearch

想为 elasticSearch 服务编写集成测试：
1\. 索引
2\. 搜索
3\. 检查结果

每个 Java api 方法都是异步执行的。我怎样才能使它成为简单的同步 api：调用`api.a`，等待结果，调用`api.b`，等待结果......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-28T14:06:39.453

正如@loteq 提到的，您可以简单地调用`.actionGet()`a`Future`使其同步。检查[elasticsearch 集成测试](https://github.com/elasticsearch/elasticsearch/blob/1.4/src/test/java/org/elasticsearch/exists/SimpleExistsTests.java)，他们有一些很好的例子。

# java - 有效的对象映射

> ID：10766564
> 
> 赞同：0
> 
> 时间：2012-05-26T13:12:47.153
> 
> 标签：java, object

我正在尝试编写脚本 AI；并遇到了这个问题。在下面的基类中，我怎么知道`x`它也可以期待`write`引用？

```
class Node <T0, T1, T2> {
    Node() {
        // More missing non-relevance.
    }
    T0 write(T1 x) {
        T0.write(x.read());
    }
    T0 write(T2 x) {
        T0.write(x.read());
    }
} 
```

编辑：这是错误：

```
Parser.java:181: cannot find symbol
symbol  : method read()
location: class java.lang.Object 
```

PS 或者我应该在 C++ 函数指针中执行此操作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-26T13:25:25.097

在 java 中，您需要一个具有 read 方法的接口/类。你以太使用标准的（也许 x 是一种`OutputStream`实现？）。否则，您将创建自己的界面。（不得不解释很多，但也许下面的代码会有所帮助）

```
class Node <T0 extends OutputStream, T1 extends InputStream> {

  T0 to;

  Node(T0 to) {
    this.to = to;
  }

  T0 write(T1 x) throws IOException {
    to.write(x.read());
    return to;
  }

} 
```

# objective-c - 根据 NSPopUpButton 在 NSTableViewCell 上设置内容

> ID：10766566
> 
> 赞同：0
> 
> 时间：2012-05-26T13:12:54.773
> 
> 标签：objective-c, cocoa, nstableview, nspopupbutton

我只是想知道如何根据用户从 NSPopUpButton 中选择的选项设置 NSTableCellView 以显示特定字符​​串，任何和所有帮助将不胜感激......

我也想在不使用绑定的情况下做到这一点

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T03:01:58.663

首先，确保您了解[模型-视图-控制器](http://developer.apple.com/library/ios/#documentation/general/conceptual/DevPedia-CocoaCore/MVC.html)设计模式。你需要做三件事：

1.  创建一个数据结构来存储您的模型。
2.  让 NSTableView 显示模型的状态。
3.  让 NSPopUpButton 更改模型。

另外，为什么要在没有绑定的情况下执行此操作？绑定通常比创建自己的 NSTableViewDataSource 更简单、更容易。对于一些复杂的问题，您必须自己完成工作，但如果绑定可以解决问题，它们通常是最好的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T19:33:07.367

也许我没有正确理解您，但它不是实现 NSTableViewDataSources 所需的最简单方法，即

```
-numberOfRowsInTableView
-tableView:objectValueForTableColumn:row 
```

并返回您的表格视图，可能需要什么。据我所知，这甚至适用于您的 NSTableCellView。

您可以使用您的 Button 导致的 IBAction 并使用

```
reloadData 
```

在表视图上。

顺便说一句，通常表视图旨在显示大量数据。如果您只想根据按钮选择显示一个简短的语句，请考虑使用 NSTextField 代替。

# php - 等待 $.post 答案

> ID：10766570
> 
> 赞同：0
> 
> 时间：2012-05-26T13:13:28.673
> 
> 标签：php, javascript, jquery

我正在使用下面的 ajax 函数检查输入的登录名是否已在我的数据库中注册...

```
function freelog(login) {
    var data = {login:login};
    $.post ('freelog.php', data, function(response){
            if(response == '1') {
                freelogin = true;
            } else if(response == '0') {
                freelogin = false;
            } else {
                freelogin =  response;
            }
    });
    return freelogin;
} 
```

当然，我的线路有问题：

```
return freelogin; 
```

原因是 $.post 需要一些时间来回答......我不知道如何解决这个问题......希望你能帮助我:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-26T13:16:34.447

你不能让你的“freelog()”函数返回一个值，正如你所想的那样，所以让它接受第二个参数。这应该是响应可用时调用的函数。

```
function freelog(login, callback) {
    var data = {login:login};
    $.post ('freelog.php', data, function(response){
            if(response == '1') {
                freelogin = true;
            } else if(response == '0') {
                freelogin = false;
            } else {
                freelogin =  response;
            }
            callback( freelogin );
    });
} 
```

JavaScript 浏览器环境的异步特性倾向于将所有 API 都推向这种形式。

*编辑*——调用你的函数，然后，看起来像：

```
 freelog( username, function( isOk ) {
    if ( isOk ) {
      // put a big green check mark next to the username field
    }
    else {
      alert("That user name is taken");
    }
  } 
```

管他呢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T13:54:52.900

Ajax is such a pain, in that the benefits of asynchronocity also has it's drawback (at least until we think of it as the norm).

You need to return the result in the callback, not just set the variable, which, as you discovered, has no value since the ajax is still being tended to. Here's one example of how to change your code easily:

```
function freelog(login) {
    var data = {login:login};
    $.post ('freelog.php', data, function(response){
            if(response == '1') {
                freelogin = true;
            } else if(response == '0') {
                freelogin = false;
            } else {
                freelogin =  response;
            }
            return freelogin;
    });
} 
```

All I did was move the return to within the post callback, so it won't get returned until the request is done. As advised by others, it is better to get more sophisticated and have things like:

1.  A spinner or "checking" or some kind of feedback, assuming the request takes longer than a millisecond.

2.  Having the `freelogin` actually return something meaningful. Assuming it's being called by another function that is awaiting the response to output "Not available" you should be fine, but if you are just outputting the `freelogin` or have some code that depends right away on the response, you'll need to further revamp to get your script asynchronous.

Last bit of advice, here's a nice way to tighten up that callback function:

```
$.post ('freelog.php', data, function(response){
            return (Number(response) <= 1) ? Boolean(Number(response)) : response;
    }); 
```

# sql-server - 在安装项目的先决条件中包括 SQL Server Express Advanced 2012

> ID：10766571
> 
> 赞同：3
> 
> 时间：2012-05-26T13:13:29.613
> 
> 标签：sql-server, visual-studio-2010, setup-project, prerequisites

我们在 VS2010 中创建了一个安装项目。

您能告诉我们如何将 SQL Server Express Advanced 2012 添加到安装项目的先决条件对话框的先决条件列表中吗？

我们看到的是 2008 版本，但不是 2012 版本是列表。

这是第一次做这样的设置项目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-26T14:57:30.243

[这](https://stackoverflow.com/questions/10095462/visual-studio-windows-installer-with-mysql-check-and-install)是一个类似的问题

这是相同的方法：创建自定义先决条件。

# android - 将 ArrayList Activity 传递给 Activity

> ID：10766574
> 
> 赞同：1
> 
> 时间：2012-05-26T13:13:42.877
> 
> 标签：android, android-activity

在我的代码中启动 karsilastir 活动时，我总是得到 nullPointerException，这里发送活动代码：

```
 karsilastir.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {

                Intent intent_notify=new Intent();
                intent_notify.setClass(Evraka1Activity.this,karsilastir.class);

             Bundle bundle=new Bundle();

                 bundle.putStringArrayList("urunler", urunler);

                 intent_notify.putExtra("urunler",bundle);

                 //startService(intent_notify);
                 startActivity(intent_notify);
} 
```

这里接收活动代码：

```
public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.karsilastirmasonuclari);
        Intent intent = getIntent();

        Bundle b = intent.getExtras();
       gelenurunler = b.getStringArrayList("urunler"); 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T13:16:17.353

这取决于数组列表的类型（从[这里](https://stackoverflow.com/questions/4780835/pass-arraylist-from-one-activity-to-other)复制）

1.  putIntegerArrayListExtra（字符串名称，ArrayList 值）
2.  putParcelableArrayListExtra（字符串名称，ArrayList 值）
3.  putStringArrayListExtra（字符串名称，ArrayList 值）
4.  putCharSequenceArrayListExtra（字符串名称，ArrayList 值）

然后，您可以通过将 put 替换为 get 并将键字符串作为参数来读取您的下一个活动，例如

```
myIntent.getStringArrayListExtra("arrayPeople"); 
```

**更新：：**

```
Intent i = new Intent(this,name.class);
Bundle b = new Bundle();
b.putIntegerArrayListExtra(String name, ArrayList<Integer> value);
i.putExtra(String name,b);
startActivity(i); 
```

并将数据获取到另一个活动中，例如

```
Bundle b = getIntent().getExtra().putParcelableArrayListExtra(String name); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T13:25:54.487

在类的顶部创建一个成员字段局部变量。m 表示成员字段，是 Android 编码风格标准的一部分。查看 Android 记事本教程以供参考。

[http://developer.android.com/resources/tutorials/notepad/notepad-ex2.html](http://developer.android.com/resources/tutorials/notepad/notepad-ex2.html)

```
public class karsilastir extends ListActivity {

/* Create an instance variable just below the class constructor. */    
ArrayList mUrunler;

....

karsilastir.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {

            Intent intent_notify=new Intent();
            intent_notify.setClass(Evraka1Activity.this,karsilastir.class);

         Bundle bundle=new Bundle();

             bundle.putStringArrayList("urunler", mUrunler);

             intent_notify.putExtra("urunler",bundle);

             //startService(intent_notify);
             startActivity(intent_notify);
        }
    } 
```

# php - php文件上传表单传递null

> ID：10766580
> 
> 赞同：1
> 
> 时间：2012-05-26T13:14:44.273
> 
> 标签：php, upload

我不知道有什么问题。我正在尝试做一个图像上传脚本。但是选择的文件总是空的（null）。

这是我的表格：

```
<form id="coffee_talk_add" action="include/scripts/add_event.php" method="post" accept-charset="utf-8" enctype="multipart/form-data">
    <table>
        <tr>
            <td class="event_width">Datum:</td>
            <td>
                <select name="day_from" id="day_from_e">
                    <option value="none" class="bold italic">Tag</option>
                        <?php
                            for($i=1; $i<=31; $i++){
                                echo "<option value=\"".$i."\">".$i."</option>\n";
                            }
                        ?>
                </select>
                <select name="month_from" id="month_from_e">
                    <option value="none" class="bold italic">Monat</option>
                        <?php
                            for($i=1; $i<=12; $i++){
                                echo "<option value=\"".$i."\">".$month_name[$i]."</option>\n";
                            }
                        ?>
                </select>
                <select name="year_from" id="year_from_e">
                    <option value="none" class="bold italic">Jahr</option>
                        <?php
                            for($i=2008; $i<=$year; $i++){
                                echo "<option value=\"".$i."\">".$i."</option>\n";
                            }
                        ?>
                </select>
            </td>
        </tr>
        <tr>
            <td>Thema:</td>
            <td class="topic"><input type="text" name="topic" id="topic_e" /></td>
        </tr>
        <tr>
            <td>Referent:</td>
            <td class="contributer"><input type="text" name="contributer" id="contributer_e" /></td>
        </tr>
        <tr>
            <td>Beginn:</td>
            <td class="begin"><input type="text" name="begin_hour" id="begin_hour_e" />:<input type="text" name="begin_min" id="begin_min_e" /> Uhr</td>
        </tr>
        <tr>
            <td>Ort:</td>
            <td class="place"><input type="text" name="place" id="place_e" /></td>
        </tr>
        <tr>
            <td>Eintritt:</td>
            <td class="entrance"><input type="text" name="entrance_euro" id="entrance_euro_e" />,<input type="text" name="entrance_cent" id="entrance_cent_e" /> €&lt;/td>
        </tr>
        <tr>
            <td>Flyer:</td>
            <td class="flyer">
                <input type="hidden" name="MAX_FILE_SIZE" value="5734400">
                <input type="file" name="image" id="image">
            </td>
        </tr>
    </table>
    <input type="hidden" name="coffee_talk_submit" value="true" />​​​​​​​​​​​​​​​​​
    <div id="add_coffee_talk">
        <input type="submit" id="small" class="coffee_talk_submit" value="speichern">
    </div>
</form> 
```

这是我简单的 add_event.php 的提取：

```
if (isset($_POST['coffee_talk_submit'])) {
    $file = $_FILES['image']['tmp_name'];
    echo var_dump($file);

    if (!isset($file)) {
        //No picture choosen
        echo "No file choosen";
    } else {
        //Do stuff
        echo "upload stuff";
    }
} 
```

这里是我的 ajax 表单：

```
$('.coffee_talk_submit').click(function(){
    if ($('#year_from_e').val() == 'none' || $('#month_from_e').val() == 'none' || $('#day_from_e').val() == 'none' 
            || $('#topic_e').val() == '' || $('#contributer_e').val() == '' || $('#begin_hour_e').val() == '' 
            || $('#begin_min_e').val() == '' || $('#place_e').val() == '' || $('#entrance_euro_e').val() == '' || $('#entrance_cent_e').val() == '') {
        $("#dialog_empty").dialog( "open" );
        return false;
    }

    var form = $('#coffee_talk_add');  
    var data = form.serialize(); 

    $.ajax({
        url: "include/scripts/add_event.php",
        type: "POST",
        data: data,
        dataType: 'json',
        success: function (reqCode) {
            if (reqCode['error_code'] == 1) {
                //Termin erfolgreich eingetragen
                $("#dialog_ok").dialog( "open" );
            } else if (reqCode['error_code'] == 2) {
                //Eintrag bereits vorhanden
                $("#dialog_error").dialog( "open" );
            }
            clear_form_elements(form);
        }
    });
    return false;
}); 
```

我查看了 info.php 并发现 file_upload 是允许的，但 temp_folder 没有价值。这是我的脚本找不到 tmp_name 文件的原因吗？我无法更改任何值，因为我的主机不允许在 php.ini 中进行任何更改（甚至无法访问文件）。如果是这样，还有其他方法可以处理吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T13:17:34.933

做一个`var_dump($_FILES['image'])`。该输出的一部分将有一个`['error']`参数。如果不是 OTHER `0`，则表示有问题，您可以从[定义的错误代码](http://php.net/manual/en/features.file-upload.errors.php)列表中查找。

不要检查 tmp_name 是否存在。在某些情况下，上传失败，但仍有 tmp_name。始终检查错误代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T13:37:42.500

二进制数据的数字上传需要通过隐藏的 iframe 完成。ajax 使用二进制数据失败。您可以使用 ajax 来轮询状态

# open-source - 修改代码的 GNU GPL 许可证

> ID：10766584
> 
> 赞同：5
> 
> 时间：2012-05-26T13:14:57.643
> 
> 标签：open-source, licensing, gpl, gnu

我们有一个已经开发多年的项目。该项目在 GNU GPL v2 下获得许可，并且自 10 多年前首次公开以来一直如此。源代码可通过 SVN 免费获得。

最近，一位前开发人员决定出售该软件的一些修改，他在 GNU GPL 许可下可以自由且明确地这样做，前提是许可文件保留在他的代码中并且他不禁止其分发，这两者他目前正在做。

我们作为主要项目的开发团队已经就他违反 GNU GPL 许可的行为与他对质，他同意重新添加许可文件并根据 GNU GPL 许可重新许可原始作品。

但是现在，他说他可以创建一个 .patch 文件或一个 .diff 文件，以便他的“独家用户”可以将它们修补到我们的代码中。他没有发布源代码，但他的修改将对原始代码进行修改。同样，如果他只提供 .diff 或 .patch 文件，他觉得他可以回到他的许可证（基本上说'你根本不能重新分发它，你必须注册它的使用，基本上，很多东西违反 GNU GPL 许可证）。

所以，我的终极问题是：如果某个软件的用户以 .diff 或 .patch 文件（或者做同样事情的安装脚本）的形式创建一个修改，旨在修改一个软件的原始源代码根据 GNU GPL v2 许可发布的软件，这是否违反许可条款？

我进行了一些搜索，我相信如果他的修改甚至使用我们软件中的库或方法，他必须在 GNU GPL 下发布他的。我已经通过电子邮件向 GNU 发送了一些解释，但没有得到任何回复。从这里有什么想法吗？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-26T13:44:26.853

公司可以在内部使用 GPL 程序的修改版本，而无需发布源代码[¹](https://www.gnu.org/licenses/gpl-faq.html#UnreleasedMods)。然而，由于补丁文件——即使它只是一小部分——也包含 GPL 涵盖的代码，如果他决定分发它们，则必须在 GPL 许可下发布**修改后的源代码。**但是，重要的是要注意他不需要将代码分发给**您**[²](https://www.gnu.org/licenses/gpl-faq.html#CompanyGPLCostsMoney)。但是，与他共享程序的每个人都**应该**得到**修改后**的源代码，他们*可能会*重新分发（例如给你）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T14:16:59.733

> 如果某个软件的用户以 .diff 或 .patch 文件（或做同样事情的安装脚本）的形式创建修改，旨在修改在 GNU GPL 下发布的软件的原始源代码v2 许可证，这是否违反许可证条款？

分发 .patch 或 .diff 文件并不是规避 GPL v2 许可的有效方法。GPL v2 带有终止条款，如果该人创建衍生作品并分发命令以修改不在 GPL 下的代码（其是衍生品），则终止生效。

该人违反了您软件的使用条款，您可以在法律范围内追捕他/她。*整个代码库*的使用权被终止，包括。由于您描述的违规行为，有权自行对其进行修改。

违规不再需要分发。实际上 GPL v2 比 GPL v3 有更多的牙齿，实际上，那些使用代码库开发的人已经结束了，直到他主动寻求恢复权利。

请参阅[http://www.groklaw.net/articlebasic.php?story=20100403103524185](http://www.groklaw.net/articlebasic.php?story=20100403103524185)和 http://www.softwarefreedom.org/resources/2008/compliance-guide.html 的[5.2](http://www.softwarefreedom.org/resources/2008/compliance-guide.html)：

> 如果您根据 GPLv2 重新分发了应用程序，但违反了 GPLv2 的条款，则必须在进一步分发之前向版权所有者请求恢复权利，否则将永远停止分发和修改软件。不同的版权持有者根据不同的要求来决定恢复，这些要求可以（并且通常）完全独立于 GPL。您的恢复条款将取决于您与 GPL 程序的版权所有者协商的内容。
> 
> 由于您在 GPLv2 下的权利在您最初违反时自动终止，因此所有后续分发都是侵犯和侵犯版权。因此，即使您自行解决了违规问题，您仍必须向您违反其许可的版权所有者寻求恢复权利，以免您仍需对最初违规后进行的合规分发承担侵权责任。

你应该编制一份他的“客户”名单，收集证据（补丁和周围的（书面）通信），然后如果友好的谈话没有带来任何解决方案，则代表你与法律团队开始法律行动。

由于终止条款，您甚至可以让他还清他/她的屁股，而可怜的家伙对此无能为力。从您写的内容来看，终止似乎已经生效。可怜的那个家伙。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T16:20:45.427

我玩游戏迟到了，而且我不是律师，所以这只是为了将来人们在谷歌上搜索时的理论讨论。

即使按照他的论点，似乎他的任何“客户”都不能合法地分发组合作品，因为这会违反他的许可协议或 GPLv2（由于 GPL 的病毒效应）。唯一可能组合这两个作品的场景是使用组合作品，作为服务而不重新分发组合的二进制文件。

关于补丁本身是 GPLv2，这实际上取决于补丁的制作方式。如果它们包含来自原始源代码的代码片段，补丁文件通常会这样做，那么他的补丁文件是 GPL 的。如果他通过额外的努力来清理补丁文件以仅包含对 GPL 源的引用（使用文件名：行号，包含只有他编写的代码等），那么他可能是对的......虽然我很难想象任何不包含原始源代码的真实内容的补丁文件。

如果您的产品是主要作为 SaaS 运行的二进制文件，那么您可能希望将您的许可转换为 AGPL，这将填补 ASP 漏洞。

[http://en.wikipedia.org/wiki/Affero_General_Public_License](http://en.wikipedia.org/wiki/Affero_General_Public_License)

# c++ - 测量 C++ 程序的功耗

> ID：10766587
> 
> 赞同：2
> 
> 时间：2012-05-26T13:15:09.627
> 
> 标签：c++, power-management

我有一个 C++ 程序，我需要测量它使用的功耗。我首先尝试使用 Simplescalar 和 WATTCH，但都没有成功。它们确实适用于简单的 C 程序，但是当我尝试将它们用于简单的 C++ 程序时，我会收到诸如“iostream not defined”（或类似的东西）之类的错误。

那么首先，有没有人让 SimpleScalar（或 WATTCH）与 C++ 程序一起工作？如果是这样，请您指导我遵循您遵循的确切说明吗？因为我实际上已经从不同的来源安装了大约 20 次，但是在编译 C++ 程序时我总是遇到同样的错误。

其次，对我可以用来模拟 C++ 程序的电源使用的其他工具有什么建议吗？我将在 Unix 系统上运行我的程序。

# jquery - 如何从href列表中获取上一个和下一个链接href？

> ID：10766592
> 
> 赞同：1
> 
> 时间：2012-05-26T13:15:46.070
> 
> 标签：jquery

我有以下代码检查带有 id = menu 的元素内的链接上的点击事件：

```
$("#menu")
   .on('click', 'a[href^="/City"]', function (event) {
      event.preventDefault();
      $('#editLink').attr("data-href", link);
   }); 
```

此代码适用的 HTML 如下所示：

```
<ul class="controls-buttons question-grid" id="menu">
   <li class="question-grid"><a href="/City/0101004H">1</a></li>
   <li class="question-grid"><a href="/City/0101004I">2</a></li>
   <li class="question-grid"><a href="/City/0101004J">3</a></li>
   <li class="question-grid"><a href="/City/0101004K">4</a></li>
</ul> 
```

我在屏幕的另一部分有两个链接，如下所示：

```
<a id="prev" href="#">Prev</a>
<a id="next" href="#">Next</a> 
```

我怎样才能做到这一点，如果用户点击“2”链接，那么这些链接将更改为：

```
<a id="prev"  href="/City/0101004H" title="City 1">Prev</a>
<a id="next"  href="/City/0101004J" title="City 3">Next</a> 
```

如果用户单击链接更改为的“1”：

```
<a id="prev"  href="#"></a>
<a id="next"  href="/City/0101004J" title="City 2">Next</a> 
```

如果用户单击列表中的最后一个元素，则链接将更改为：

```
<a id="prev"  href="/City/0101004H" title="City 3">Prev</a>
<a id="next"  href="#"></a> 
```

对我来说，最大的问题是如何检查当前链接之前或之后是否有链接。我知道基本的 jQuery，但我希望有人可以帮助我提出一些建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T14:43:23.543

我没有对此进行测试，但希望有用：

```
$('.question-grid a').click(function(){

   var number=parseInt($(this).html());

   if(number<2)
   {
      $('#prev').attr('href','#');
      $('#next').attr('href',$(this).next('a').attr('href');
   }else if(number>1 && number<4){
      $('#prev').attr('href',$(this).prev('a').attr('href'));
      $('#next').attr('href',$(this).next('a').attr('href'));  
   }else{
      $('#prev').attr('href',$(this).prev('a').attr('href'));
      $('#next').attr('href','#'); 
   }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T13:42:29.023

我猜是这样的：

```
$("#menu").on('click', 'a[href^="/City"]', function(e) {
    e.preventDefault();
    $('#editLink').attr("data-href", $(this).attr('href'));
});

$('#prev, #next').on('click', function() {
    var isNext = this.id==='next',
        liNow = $('#editLink').attr("data-href") || $('#menu li:first a').attr('href'),
        nextA = $('a[href="'+liNow+'"]', '#menu').parent('li')[isNext?'next':'prev']('li').find('a');
    if (!nextA.length) nextA = isNext ? $('#menu li:last a') : $('#menu li:first a');
    nextA.trigger('click');
}); 
```

[小提琴](http://jsfiddle.net/adeneo/FMgXQ/)

# configuration - 更新服务器，空白页

> ID：10766593
> 
> 赞同：0
> 
> 时间：2012-05-26T13:15:47.207
> 
> 标签：configuration, webserver

我最近参加了初级 Web 开发职位的面试考试。

其中一个问题是：更新服务器后，您的网站没有显示任何页面，只是显示一个空白屏幕，没有错误。

建议什么可能导致这种情况？找出问题原因的过程是什么？你将如何解决它？

我不确定如何回答这个问题，并且非常坚持。任何人都可以为我描述一个答案，或者任何人都可以将我指向一个描述如何处理这个问题的网站？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T13:23:55.660

这是一个非常模糊的问题——我高度怀疑它只是为了看看你如何思考和测试你的知识。

纯空白页的唯一可能原因只是没有从请求的位置读取任何文件内容。

反过来，这可能是由于简单地具有空白文件（0 字节），或者具有不匹配的配置将请求重定向到另一个空白（但存在因此没有错误）位置。例如，错误编写的 .htaccess 可以在 Apache 中执行此操作。

另一种可能是，如果它是一个服务器端脚本，例如 PHP，服务器要么没有正确解析它，要么没有打印到页面，这意味着没有数据可以写入客户端。如果错误被关闭（以免让客户感到困惑），那么它们也不会显示，留下一个空白页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T13:24:01.357

答案将取决于您的网站用于托管页面的技术。

像这样的第一步是检查服务器日志是否有错误。例如，如果您在生产环境中使用 PHP，您应该`display_errors`设置为`off`，因此如果出现问题，您只会得到一个空白页面。例如：您将检查日志并查看您的更新是否破坏了您的数据库连接，然后从那里继续。

我确信他们正在寻找一个能够提供合乎逻辑的进展和一些故障排除能力的答案。希望你做得好！

# android - 实现Phonegap Android的Geolocation API

> ID：10766595
> 
> 赞同：0
> 
> 时间：2012-05-26T13:16:10.940
> 
> 标签：android, cordova, phonegap-plugins

有没有人在 Android 中使用 Phonegap 的地理定位 API 实现地理定位。我正在阅读文档，但在这方面没有太大进展......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T13:43:50.343

```
navigator.geolocation.watchPosition(onSuccess, onError, { frequency: 3000 }); 
```

onScuccess 和 onError 是相关插件执行后会调用的方法名（这个插件的 java 文件在 phonegap.jar 中）......你可以根据需要重命名这个 onSuccess、onError 方法。 ....但是您必须注意您还必须重命名函数名称...最后一个参数是带有选项的json对象

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T11:34:14.157

是的，我在我的一个应用程序中使用了地理定位。您从以下内容开始：

```
navigator.geolocation.getCurrentPosition(
  geolocSuccess,
  error,
  {enableHighAccuracy: true, timeout: 1000000, maximumAge: 2000000}
); 
```

`geolocSuccess`可以类似于（淡化版本）：

```
function geolocSuccess(position) {
  var lat=position.coords.latitude;
  var longit=position.coords.longitude;
  var time=position.timestamp;
  var whereAmI = new google.maps.LatLng(lat, longit);
} 
```

高温高压

# jquery - 通过jquery刷新iframe

> ID：10766598
> 
> 赞同：-2
> 
> 时间：2012-05-26T13:16:21.560
> 
> 标签：jquery

我试图`iframe`通过 jquery 刷新使用：

```
 $("#iframeid").attr("src", $("#iframeid").attr("src")); 
```

但它像无限循环一样不断刷新，有人可以告诉我问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T14:06:55.750

如果您将此代码附加到 iframe 的加载事件，那么您看到的是预期的行为。你基本上对 iframe 说的是：

> 每次加载时，重新加载。

所以我认为您可以在该语句中看到循环行为。

您要做的是将重新加载代码附加到其他事件。可能是用户点击。

```
$("#refreshButton").on('click',function(){
  $("#iframeid").attr("src", $("#iframeid").attr("src"));
}); 
```

这样 iframe 只会在您需要时重新加载。您还可以将重新加载附加到一个间隔以获取定期重新加载：

```
var refreshInterval = setInterval(function(){
  $("#iframeid").attr("src", $("#iframeid").attr("src"));
},60000); 
```

该代码将每 60000 毫秒或每分钟（60 * 1000 = 60000）刷新 iframe。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-09T06:37:45.337

这是解决方案。使用 jquery 刷新 iframe。

```
$('#iframeID',window.parent.document).attr('src',$('#iframeID',window.parent.document).attr('src')); 
```

如果你和同一个父母一起工作，那么

```
$('#iframeID',parent.document).attr('src',$('#iframeID',parent.document).attr('src')); 
```

# yii - 在 Yii 中从布局/视图文件中调用函数

> ID：10766608
> 
> 赞同：1
> 
> 时间：2012-05-26T13:18:26.320
> 
> 标签：yii

我是 Yii 框架的新手，我需要定义一个从 /protected/views/layouts/main.php 页面调用的函数。我可以知道要定义它（控制器/模型），以便我可以获得函数中定义的相应动作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T14:55:59.540

根据功能的作用以及您需要它的可见程度，您可以执行至少两件事之一：

1.  扩展基础 CController 类，在那里定义函数，然后从这个新类派生每个控制器类。要调用该函数，您将运行`$this->myFunction();`)
2.  将函数放入模型中，在控制器动作函数中实例化该模型的对象，然后在视图中通过`$this->myModelObject->myFunction();`.

# python - 从 reStructuredText 中提取字段列表

> ID：10766609
> 
> 赞同：6
> 
> 时间：2012-05-26T13:18:54.900
> 
> 标签：python, restructuredtext, docutils

假设我有以下 reST 输入：

```
Some text ...

:foo: bar

Some text ... 
```

我想结束的是这样的字典：

```
{"foo": "bar"} 
```

我试着用这个：

```
tree = docutils.core.publish_parts(text) 
```

它确实解析了字段列表，但我最终得到了一些伪 XML `tree["whole"]?`：

```
<document source="<string>">
    <docinfo>
        <field>
            <field_name>
                foo
            <field_body>
                <paragraph>
                    bar 
```

由于`tree`dict 不包含任何其他有用的信息，而这只是一个字符串，我不确定如何从 reST 文档中解析出字段列表。我该怎么做？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-28T09:27:25.623

您可以尝试使用类似以下代码的内容。而不是使用`publish_parts`我使用的方法[`publish_doctree`](http://docutils.sourceforge.net/docs/api/publisher.html)来获取文档的伪 XML 表示。然后我已转换为 XML DOM 以提取所有`field`元素。然后我得到每个元素的第一个`field_name`和元素。`field_body``field`

```
from docutils.core import publish_doctree

source = """Some text ...

:foo: bar

Some text ...
"""

# Parse reStructuredText input, returning the Docutils doctree as
# an `xml.dom.minidom.Document` instance.
doctree = publish_doctree(source).asdom()

# Get all field lists in the document.
fields = doctree.getElementsByTagName('field')

d = {}

for field in fields:
    # I am assuming that `getElementsByTagName` only returns one element.
    field_name = field.getElementsByTagName('field_name')[0]
    field_body = field.getElementsByTagName('field_body')[0]

    d[field_name.firstChild.nodeValue] = \
        " ".join(c.firstChild.nodeValue for c in field_body.childNodes)

print d # Prints {u'foo': u'bar'} 
```

xml.dom[模块](http://docs.python.org/library/xml.dom.html)不是最容易使用的（为什么我需要使用`.firstChild.nodeValue`而不是仅仅`.nodeValue`举例），所以您可能希望使用[xml.etree.ElementTree](http://docs.python.org/library/xml.etree.elementtree.html)模块，我发现它更容易使用. 如果您使用 lxml，您还可以使用 XPATH 表示法来查找所有`field`,`field_name`和`field_body`元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-08T16:48:08.707

我有一个替代解决方案，我发现它的负担更小，但可能更脆弱。查看节点类[https://sourceforge.net/p/docutils/code/HEAD/tree/trunk/docutils/docutils/nodes.py](https://sourceforge.net/p/docutils/code/HEAD/tree/trunk/docutils/docutils/nodes.py)的实现后，您会看到它支持可用于拉取的 walk 方法无需为您的数据创建两种不同的 xml 表示形式即可取出所需的数据。这是我现在在原型代码中使用的内容：

[https://github.com/h4ck3rm1k3/gcc-introspector/blob/master/peewee_adaptor.py#L33](https://github.com/h4ck3rm1k3/gcc-introspector/blob/master/peewee_adaptor.py#L33)

```
from docutils.core import publish_doctree
import docutils.nodes 
```

进而

```
def walk_docstring(prop):
    doc = prop.__doc__
    doctree = publish_doctree(doc)
    class Walker:
        def __init__(self, doc):
            self.document = doc
            self.fields = {}
        def dispatch_visit(self,x):
            if isinstance(x, docutils.nodes.field):
                field_name = x.children[0].rawsource
                field_value = x.children[1].rawsource
                self.fields[field_name]=field_value
    w = Walker(doctree)
    doctree.walk(w)
    # the collected fields I wanted
    pprint.pprint(w.fields) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-08T09:19:56.363

这是我的[ElementTree](http://docs.python.org/library/xml.etree.elementtree.html)实现：

```
from docutils.core import publish_doctree
from xml.etree.ElementTree import fromstring

source = """Some text ...

:foo: bar

Some text ...
"""

def gen_fields(source):
    dom = publish_doctree(source).asdom()
    tree = fromstring(dom.toxml())

    for field in tree.iter(tag='field'):
        name = next(field.iter(tag='field_name'))
        body = next(field.iter(tag='field_body'))
        yield {name.text: ''.join(body.itertext())} 
```

用法

```
>>> next(gen_fields(source))
{'foo': 'bar'} 
```

# javascript - jQuery live with time 选择器

> ID：10766613
> 
> 赞同：2
> 
> 时间：2012-05-26T13:19:13.323
> 
> 标签：javascript, jquery, jquery-plugins

为了显示`.timePickr`我需要在使用事件时看到框之前进行*两次悬停并将鼠标移动到另一个地方。*`.timePiker``live`

我怎样才能通过一次悬停来实现它？

```
$(".timePickr").live('hover', function() {
    $(function(){
        $(".timePickr").timepickr();
    });
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T14:05:23.223

问题是您在触发悬停事件*后将时间选择器添加到输入中。*直到您下次悬停时，才会显示时间选择器。

有两种选择。要么再次触发悬停事件：

```
$(function() {
  $(".timePickr").live('hover', function() {
    $(this).timepickr();
    $(this).hover();
  });
}); 
```

一个更好的选择是移动代码以在文档加载函数中应用时间选择器，或者每当您动态引入新元素时。

```
$(function() {
  $(".timePickr").timepickr();
});

//Somewhere else
$.get("someurl", null, function(data) {
  $("#some-div").html(data);
  $(".timePickr").timepickr();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T13:37:50.147

试试这个代码：

```
$(function() {
   $(".timePickr").timePickr(); // set all timePicker on document load

   $(".timePickr").live('hover', function() {
       $(this).trigger('click');
   }); 
}); 
```

# c++ - 使用静态成员作为模板的命名空间：坏主意？

> ID：10766614
> 
> 赞同：2
> 
> 时间：2012-05-26T13:19:18.317
> 
> 标签：c++, c++11

我有一个关于设计的问题。

我有一系列不属于同一个对象但作用于同一个复杂类型的泛型函数。

我正在考虑将它们分组为模板类作为静态成员函数，原因有两个：

a) 我可以将 typedefs 放入我的“命名空间类”中，这样​​代码更具可读性 b) 用户可以一劳永逸地对静态类进行 typedef，然后忘记专门化功能。

所以不要打电话：

`myfunction< char,int,std::set<double> >(...);`

他可以这样做：

`typedef TheClass< char, int, std::set<double> > MyTheClass;`

和写 ：

`MyTheClass::myfunction(...);`

你会考虑这个糟糕的设计吗？为什么？

提前致谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T13:34:04.470

类中的模板函数只有在使用时才会被实例化。因此，即使您将所有函数包装在模板类中，它也不会低效，因为只有与特定类型参数集一起使用的函数才会为具有该类型参数集的模板实例化。

在可读性方面，我个人鄙视 typedef，除非在极少数情况下，因为您最终不得不追查它们以弄清楚您的类型是什么，并且当您有很多它们用于模板化类采用不同的类型参数时，它可以得到无论如何，令人沮丧且难以阅读。

也许将具有相似目的的函数包装在它们自己的真实命名空间中，当你想使用它们时，你可以使用 using 子句引入它们，并为可选的 typedef 创建另一个命名空间，用户可以为这些函数单独引入:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-26T13:45:50.470

我认为在任何可以应用 DRY 原则的地方通常都是一个好主意，所以如果这可以避免重复传递相同的模板参数，并且找不到更简洁的替代方案，那么就去做吧。

# jndi - 使用 Tomcat 7.0.27 和 Atomikos 3.7.1 自动发布后未找到 JNDI 资源

> ID：10766616
> 
> 赞同：0
> 
> 时间：2012-05-26T13:19:36.677
> 
> 标签：jndi, tomcat7, atomikos, server.xml, context.xml

我正在使用 Spring、Tomcat 7.0.27 和 Atomikos 3.7.1 构建一个 Web 应用程序。我遵循了 Atomikos 的集成指南：[Tomcat7Integration35](http://www.atomikos.com/Documentation/Tomcat7Integration35)。除了 Tomcat 7.0.27 中不再存在的两个侦听器之外，一切都正常。所以我没有在 server.xml 文件中包含这两个监听器。

`<Listener className="org.apache.catalina.mbeans.ServerLifecycleListener" />`

`<Listener className="org.apache.catalina.storeconfig.StoreConfigLifecycleListener"/>`

当我第一次启动 Tomcat 时，一切正常。当我进行一些代码更改并且 Tomcat 尝试自动发布应用程序时，找不到在 context.xml 中定义的 JNDI 资源（异常：javax.naming.NameNotFoundException）。我需要停止服务器并重新启动它。通过这样做，应用程序被成功发布。

有没有其他人经历过这个？如果您能给我任何指示，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T14:49:06.273

幸运的是，这个问题得到了解决。我在这里详细解释了解决方案： [Tomcat 7.0.27 Integration with Atomikos 3.7.1](http://www.atomikos.com/Main/SamanehTorkAbadi)

# jquery - 如何从href列表中获取上一个和下一个链接href？

> ID：10766625
> 
> 赞同：0
> 
> 时间：2012-05-26T13:21:14.743
> 
> 标签：jquery

我有以下代码检查带有 id = menu 的元素内的链接上的点击事件：

```
$("#menu")
   .on('click', 'a[href^="/City"]', function (event) {
   event.preventDefault();
   $('#editLink').attr("data-href", link);
}); 
```

此代码适用的 HTML 如下所示：

```
<ul id="menu">
   <li><a href="/City/0101004H">1</a></li>
   <li><a href="/City/0101004I">2</a></li>
   <li><a href="/City/0101004J">3</a></li>
   <li><a href="/City/0101004K">4</a></li>
</ul> 
```

我在屏幕的另一部分有两个链接，如下所示：

```
<a id="prev" href="#">Prev</a>
<a id="next" href="#">Next</a> 
```

我怎样才能做到这一点，如果用户点击“2”链接，那么这些链接将更改为：

```
<a id="prev"  href="/City/0101004H" title="City 1">Prev</a>
<a id="next"  href="/City/0101004J" title="City 3">Next</a> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T13:27:13.847

你可以使用 do like ：

```
$("#menu").on('click', 'a[href^="/City"]', function (event) {
   event.preventDefault();
   if(jQuery(this).text() == 2) { // this check is not required if this functionality is required for any 'a' under #menu
      jQuery(this).closest('ul').find('li:first').find('a').css('color','yellow');
      jQuery(this).closest('ul').find('li:last').find('a').css('color','pink');
      $('#prev').prop('href', $(this).parent().prev().find('a').prop('href')).prop('title','City 1').css('color','red');
      $('#next').prop('href', $(this).parent().next().find('a').prop('href')).prop('title','City 3').css('color','green');
   }
}); 
```

[小提琴](http://jsfiddle.net/mprabhat/34jj3/)

更新：

```
jQuery(this).parent().prev().find('a') // this will give prev a 

jQuery(this).parent().prev().find('a') // this will give next a 
```

[第二小提琴](http://jsfiddle.net/mprabhat/UahMH/1/)

# ios - OpenGL ES 纹理部分移除

> ID：10766627
> 
> 赞同：0
> 
> 时间：2012-05-26T13:21:16.470
> 
> 标签：ios, opengl-es

有没有办法通过使用opengles for ios来删除部分纹理？例如我有一个矩形，想破坏它的一部分

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T13:38:27.417

我相信你需要这个：[如何动态操作纹理内容？](https://stackoverflow.com/questions/3887636/how-to-manipulate-texture-content-on-the-fly/10702468#10702468)

要么创建一个空纹理并使用 FBO 顶部的这个空纹理为你的纹理渲染一个小四边形，要么使用 glTexSubImage2D，这对于这个简单的目的来说更容易。

# java - 在用户描述符中不起作用 pageContext.getOut(" ")

> ID：10766641
> 
> 赞同：1
> 
> 时间：2012-05-26T13:24:47.903
> 
> 标签：java, jsp, taglib, tld

我有一个下一个问题。在 jsp 页面中，我根据角色使用 2 个用户（导师和学生）的菜单，我从菜单文件中选择我应该包含的角色。像这样

```
<c:if test="${role eq 'Tutor'}">
                <c:import url="/page/menuForTutor.html" charEncoding="UTF-8"/>
</c:if>
<c:if test="${role eq 'Student'}">
             <c:import url="/page/menuForStudent.html" charEncoding="UTF-8"/>
</c:if> 
```

我应该使用用户描述符

```
public class MenuTag extends TagSupport{

    private static final String PARAM_ROLE_TUTOR = "Tutor";
    private static final String PARAM_ROLE_STUDENT = "Student";

    @Override
    public int doStartTag(){
        HttpServletRequest request = (HttpServletRequest)pageContext.
                                                   getRequest();
        HttpSession session = request.getSession();
        String role = (String) session.getAttribute("role");
        if (PARAM_ROLE_TUTOR.equals(role)){
            try {
                pageContext.getOut().print("<c:import url=\"/page/menuForTutor.html\" charEncoding=\"UTF-8\"/>");
            } catch (IOException ex) {
                Logger.getLogger(MenuTag.class.getName()).log(Level.SEVERE, null, ex);
            }
        } else if(PARAM_ROLE_STUDENT.equals(role)){
        }
        return SKIP_BODY;
    }       
} 
```

当我使用 debag 时，我看到我完成了所有步骤，但 jsp 上没有显示导师菜单。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T14:18:14.950

我假设 session("role") 设置在另一个代码部分！

设置 JspWriter out = pageContext.getOut();

类似于以下代码

> ```
> JspFactory  factory     = JspFactory.getDefaultFactory();
> PageContext pageContext = factory.getPageContext(
> this,
> request,
> response,
> null,  // errorPageURL
> false, // needsSession
> JspWriter.DEFAULT_BUFFER,
> true   // autoFlush
> ); 
> ```

```
 ....
            JspWriter   out     = pageContext.getOut();
            HttpSession session = request.getSession();
            String role = (String) session.getAttribute("role");
            if (PARAM_ROLE_TUTOR.equals(role)){
                try {
                    out.println("<c:import url=\"/page/menuForTutor.html\" charEncoding=\"UTF-8\"/>");
                    out.flush();
                    // Evaluate the body if there is one
                    return EVAL_BODY_BUFFERED;
.......

else return SKIP_BODY; 
```

编辑查看代码：您必须“返回 EVAL_BODY_BUFFERED；”

# php - 选择 div 中的元素并将数据发送到数据库

> ID：10766642
> 
> 赞同：0
> 
> 时间：2012-05-26T13:24:52.053
> 
> 标签：php, javascript, jquery, ajax

我有以下填充 div 元素的表单，更具体地说，是由用户的 Twitter 关注者个人资料图像填充的 Bootstrap 模态表单。

这是表格：[http ://d.pr/i/ZJMk](http://d.pr/i/ZJMk)

这是完成工作的代码。

```
<div class="modal-body">  

  <?php

    $follower_url = "http://api.twitter.com/1/statuses/followers/Mozammil_K.xml";

    $twFriends = curl_init();

    curl_setopt($twFriends, CURLOPT_URL, $follower_url);
    curl_setopt($twFriends, CURLOPT_RETURNTRANSFER, TRUE);
    $twiFriends = curl_exec($twFriends);
    $response = new SimpleXMLElement($twiFriends);

    foreach($response->user as $friends){ 
        $thumb = $friends->profile_image_url;
        $url = $friends->screen_name;
        $name = $friends->name;

    ?>

    <a title="<?php echo $url;?>" href="#"><img class="photo-img" src="<?php echo $thumb?>" border="2" alt="" width="40" onClick="highlight(this)" /></a>
    <?php

    } 

  ?>

</div> 
```

我想让用户选择点击照片并选择元素。他们还可以再次单击照片并取消选择它。这已通过以下 javascript 实现。

```
<script>

   function highlight(elem) {

    if(elem.style.border == '2px solid blue') {

        elem.style.border = '';
    }
    else{

        elem.style.border = '2px solid blue';

    }

    }

</script> 
```

单击创建按钮时，表单应获取突出显示元素的标题并将元素的标题发送到数据库。除了将元素保存到数组中并通过 JSON 发送数据之外，我还没有找到任何方法。我对 JSON 不是很熟悉。还有其他方法（更简单）吗？也许是 JQuery？

问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T12:40:06.627

我认为这将是您问题的解决方案，我将这三个属性添加到`<a class='a-img'>`标签

```
 "rel=<?echo $thumb?>" 
      "id=<?echo $name?>" 
      "title=<? echo $url;?>" //these will be the diffrent attr to be send on the database 
```

如果单击“aa-img”，则必须将这 3 个属性传递给隐藏输入，必须添加 3 个隐藏字段：

```
 <input type="hidden" id="sname"/>
      <input type="hidden" id="fname"/>
      <input type="hidden" id="thumb"/>

     <a title="<?php echo $url;? class='a-img'>" href="#">
     <img class="photo-img" src="<?php echo  $thumb?>" border="2" alt="" width="40"   
     onClick="highlight(this)" /></a>
     $(document).ready(function(){

      $("#create").click(function(){
      //get the value of the 3 hidden fields 
      var sname =  $("#sname").val(sname);
      var fname = $("#fname").val(fname);
      var thumb = $("#thumb").val(thumb);

         $.ajax({
             type:"POST",
             url:"//your savetodb.php"
             data:{'sname':sname, 'fname':fname, 'thumb':thumb},
             success: function(data){
                        //do success message
                     }
         });

      });

      $("a.a-img").click(function(){
        var sname = $(this).attt('title');
        var fname = $(this).attr('id');
        var thumb = $(this).attr('rel');
               //these 3 attrbute will pass to a hidden input
                $("#sname").val(sname);
                $("#fname").val(fname);
                $("#thumb").val(thumb);
      });
 }); 
```

希望这会帮助你。

# iphone - 子类化代表？

> ID：10766643
> 
> 赞同：2
> 
> 时间：2012-05-26T13:24:53.193
> 
> 标签：iphone, ios, cocoa-touch, design-patterns, delegates

我有一个名为`ToolbarView`的类，它是一个子类，`UIView`基本上创建了一个在顶部`UIView`消失/重新出现的类。`UIToolbar`我还有一个`ToolbarView`被调用的子类，`DraggableToolbarView`它使用户能够在屏幕上拖动视图。

我需要为其创建一个委托，`ToolbarView`以便它可以在工具栏重新出现和消失时通知另一个对象/类。我还需要创建一个委托，`DraggableToolbarView`以便在拖动视图时通知另一个对象/类。

目前，我为每个人创建了一个单独的委托，但我想知道是否有更好的模式？也许为 实现一个委托`ToolbarView`，并将委托方法`DraggableToolbarView`列为可选？或者有没有办法对委托进行子类化？

完成此任务的最佳/最干净的方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-26T13:33:39.400

如果您为您的委托方法创建一个协议（无论如何总是一个好主意），您可以让另一个协议采用第一个。这建立了一种类似继承的关系：

```
@protocol ToolbarViewDelegate
// some methods
@end

@protocol DraggableToolbarViewDelegate <ToolBarViewDelegate>
// additional methods
@end 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-26T13:31:17.553

是的，你可以有`inheriting`协议：

```
@protocol Proto1 

@reqired
-(void) somethingHappened:(id) sender;

@optional
-(void) somethingElseHappened:(id) sender;

@end

@protocol Proto2<Proto1>

// this now contains all of the method signatures found in proto1, with the addition of new ones!

-(void) somethingSpecialHappened:(id) sender;

@end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-26T13:32:06.590

我认为你做对了。

考虑`UITextView`哪个是 的子类`UIScrollView`。每个都有自己的委托协议，负责对一组特定的消息做出反应。只要您将可见性和拖动视为单独的关注点，允许不同的对象处理它们的委托似乎是合乎逻辑的。

# google-apps-script - 谷歌脚本：时间格式的单元格导致错误：溢出

> ID：10766644
> 
> 赞同：0
> 
> 时间：2012-05-26T13:25:01.137
> 
> 标签：google-apps-script, cell

我正在尝试编写一个自定义函数，该函数将两个单元格范围（开始时间和停止时间）作为输入，然后输出总小时数。如果单元格被格式化为正常数字（即晚上 9:00 表示为 0.875），则该函数可以正常工作。如果我将单元格格式化为时间，则公式所在的单元格值会显示“#NUM！” 并且工具提示是“错误：溢出”。有没有办法在没有格式的情况下读取原始单元格数据，以便我的公式可以工作？

公式代码

```
function getHoursTest(startRange, stopRange) {
  var hours = 0; // define "hours" with start value of 0
  var i = startRange.length - 1;  // define "i" and assign the position of the last array element

  while(i>=0){
        hours = hours + ((stopRange[i] - startRange[i])*24);
        i--
  }
  return hours;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T14:27:18.313

当单元格被格式化为日期或时间值时，它的值将作为 JavaScript Date 对象传递给 Apps 脚本。您可以使用以下代码确定该值是否为日期：

```
if (value instanceof Date) {
  ...
} else {
  ...
} 
```

# javascript - html 画布中的 onmousedown、ondmouseup、onclick、ondblclick、oncontextmenu

> ID：10766646
> 
> 赞同：0
> 
> 时间：2012-05-26T13:25:14.303
> 
> 标签：javascript, html, canvas

我在 html canvas 中工作，我需要执行 4 个操作：

*   拖放元素
*   拉伸元素
*   创建元素
*   编辑元素

因此对于：

*   拖放：我应该使用 canvas.onmousedown 和 canvas.ondmouseup
*   拉伸：canvas.onclick 选择元素然后 canvas.onclick 在元素的框架上
*   创建：canvas.ondblclick
*   编辑：canvas.oncontextmenu

但 onmousedown 和 ondmouseup “覆盖”所有其他 clic。和 onclic “覆盖” ondblclick

我试过了：

```
canvas.oncontextmenu = function(event) {
        myContextmenu(canvas);   
       return false;
    } 
```

和

```
canvas.addEventListener('ontextmenu', function(e) {
     alert("right clic"+e.clientX+";"+e.clientY);
   }, true); 
```

如果我尝试使用 onmousedown、ondmouseup、onclick 功能，那么一个和另一个一样不起作用。

如果有人可以帮助我欢迎

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T09:25:56.543

您必须使用 onmousedown 和 onmouseup 管理自己的单击和双击检测。

单击是在 onmousedown 之后的 onmouseup，两者之间几乎没有移动。

双击当然是快速连续的单击。

因此，您必须存储一些状态变量，例如 mousedown 的位置和日期（这在拖动时很有用，因此您可以随时计算移动）。

如果您手动进行拖放（即不使用不那么兼容的 HTML5 新功能），您将必须挂钩 onmousemove 以便您可以在移动期间显示拖动的对象（它有助于检测上下移动）。

# java - 搜索按钮的代码（jbutton8）

> ID：10766651
> 
> 赞同：0
> 
> 时间：2012-05-26T13:25:28.033
> 
> 标签：java, mysql, jdbc, database-connection

第一张图片显示了mysql中的表。
第二张图片显示了我们在netabeans中的搜索条件设计
第三张图片是jbutton8的编码
第四是我们得到的错误。
所以为了检查我试图为单选按钮（按钮组中的粗略）编写代码。但是在对编码进行了几次更改后，我得到了这个错误。

所以请帮忙

[图 1 的链接](http://i.stack.imgur.com/QiXyU.png)

[图 2 的链接](http://i.stack.imgur.com/k6vQy.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-30T08:03:33.993

您正在对 Statement 对象执行查询，然后再对其进行初始化。所以只需在 try 中交换两个语句：

```
 try{
stmt=con.createStatement();
rs=stmt.executeQuery(sqr);} 
```

# php - 我可以将哪些论坛与 codeigniter 和他们的会话集成

> ID：10766653
> 
> 赞同：1
> 
> 时间：2012-05-26T13:25:49.230
> 
> 标签：php, mysql, codeigniter, forum

我正在使用这样的东西：

```
$this->session->userdata('name'); 
```

等等..我想在综合论坛中使用这个会话，在站点和论坛中使用一个会话......

有没有一种快速简便的方法可以在 codeIgniter 中放置一个现成的论坛？就像在 joomla 或其他 CMS 中一样？

因为写我自己的论坛会花费很多时间....有没有快速的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T14:54:39.593

有几个论坛选项。阅读更多：

1.  [Codeigniter 论坛集成](https://stackoverflow.com/questions/2168449/codeigniter-forum-integration)
2.  [codeigniter php中有没有论坛？](https://stackoverflow.com/questions/5523151/is-there-any-forum-in-codeigniter-php)

# c# - AppSettings 从 .config 文件中获取值

> ID：10766654
> 
> 赞同：195
> 
> 时间：2012-05-26T13:25:50.450
> 
> 标签：c#, .net, appsettings, configurationmanager

我无法访问配置文件中的值。

```
Configuration config = ConfigurationManager.OpenExeConfiguration(ConfigurationUserLevel.None);
var clientsFilePath = config.AppSettings.Settings["ClientsFilePath"].Value; 
// the second line gets a NullReferenceException 
```

**.config 文件**：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
  <appSettings>
    <!-- ... -->
    <add key="ClientsFilePath" value="filepath"/>
    <!-- ... -->
  </appSettings>
</configuration> 
```

你有什么建议我该怎么做？

* * *

## 回答 #1

> 赞同：395
> 
> 时间：2012-05-26T13:30:49.960

这对我有用：

```
string value = System.Configuration.ConfigurationManager.AppSettings[key]; 
```

* * *

## 回答 #2

> 赞同：68
> 
> 时间：2015-03-20T13:15:27.620

dtsg 给出的答案有效：

```
string filePath = ConfigurationManager.AppSettings["ClientsFilePath"]; 
```

但是，您需要添加一个程序**集引用**

> 系统配置

转到您的*解决方案资源管理器*并*右键单击*References 并选择*Add reference*。选择*Assemblies*选项卡并搜索*Configuration*。

![参考经理](../Images/bd420299f78834f6941e7169c2281deb.png)

这是我的*App.config*的示例：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
    <startup> 
        <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.5" />
    </startup>
  <appSettings>
    <add key="AdminName" value="My Name"/>
    <add key="AdminEMail" value="MyEMailAddress"/>
  </appSettings>
</configuration> 
```

您可以通过以下方式获得：

```
string adminName = ConfigurationManager.AppSettings["AdminName"]; 
```

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2012-05-26T13:28:34.427

试一试：

```
string filePath = ConfigurationManager.AppSettings["ClientsFilePath"]; 
```

* * *

## 回答 #4

> 赞同：19
> 
> 时间：2016-08-07T12:34:28.350

从配置中读取：

您需要添加对 Config 的引用

1.  在您的项目上打开“属性”
2.  转到“设置”选项卡
3.  添加“名称”和“值”
4.  使用以下代码获取价值：

```
string value = Properties.Settings.Default.keyname; 
```

保存到配置：

```
Properties.Settings.Default.keyName = value;
Properties.Settings.Default.Save(); 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2014-04-30T06:54:37.540

我在用：

```
 ExeConfigurationFileMap configMap = new ExeConfigurationFileMap();
    //configMap.ExeConfigFilename = @"d:\test\justAConfigFile.config.whateverYouLikeExtension";
    configMap.ExeConfigFilename = AppDomain.CurrentDomain.BaseDirectory + ServiceConstants.FILE_SETTING;
    Configuration config = ConfigurationManager.OpenMappedExeConfiguration(configMap, ConfigurationUserLevel.None);
    value1 = System.Configuration.ConfigurationManager.AppSettings["NewKey0"];
    value2 = config.AppSettings.Settings["NewKey0"].Value;
    value3 = ConfigurationManager.AppSettings["NewKey0"]; 
```

其中**value1 = ...**和**value3 = ...**给出 null 和**value2 = ...**有效

然后我决定将内部 app.config 替换为：

```
// Note works in service but not in wpf
AppDomain.CurrentDomain.SetData("APP_CONFIG_FILE", @"d:\test\justAConfigFile.config.whateverYouLikeExtension");
ConfigurationManager.RefreshSection("appSettings");

string value = ConfigurationManager.AppSettings["NewKey0"]; 
```

使用 VS2012 .net 4

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2017-02-23T14:30:08.227

在`app/web.config`文件中设置以下配置：

```
<configuration>
  <appSettings>
    <add key="NameForTheKey" value="ValueForThisKey" />
    ... 
    ...    
  </appSettings>
...
...
</configuration> 
```

然后您可以通过输入以下行在代码中访问它：

```
string myVar = System.Configuration.ConfigurationManager.AppSettings["NameForTheKey"]; 
```

*请注意，这适用于`.net4.5.x`and `.net4.6.x`; 但不适合`.net core`。最好的问候：拉斐尔

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2018-04-30T11:20:44.283

时隔许久回到这个...

鉴于 ConfigurationManager 的消亡，对于仍在寻找此尝试答案的任何人（例如）：

```
AppSettingsReader appsettingsreader = new AppSettingsReader();
string timeAsString = (string)(new AppSettingsReader().GetValue("Service.Instance.Trigger.Time", typeof(string))); 
```

当然需要 System.Configuration。

（将代码编辑为实际有效且更易于阅读的内容）

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2015-06-01T15:34:02.577

看我做了我认为显而易见的事情：

```
string filePath = ConfigurationManager.AppSettings.GetValues("ClientsFilePath").ToString(); 
```

虽然编译它总是返回null。

然而，这（从上面）有效：

```
string filePath = ConfigurationManager.AppSettings["ClientsFilePath"]; 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2016-06-02T21:42:23.720

一些答案似乎有点离**海事组织** 这是我**在 2016 年左右的看法**

```
<add key="ClientsFilePath" value="filepath"/> 
```

确保`System.Configuration`被引用。

问题是询问appsettings**键的****值**

 **最肯定应该是

```
 string yourKeyValue = ConfigurationManager.AppSettings["ClientsFilePath"]

  //yourKeyValue should hold on the HEAP  "filepath" 
```

这是一个转折，您可以将值组合在一起（不适用于这个问题）

```
var emails = ConfigurationManager.AppSettings[ConfigurationManager.AppSettings["Environment"] + "_Emails"]; 
```

`emails`将是 Environment Key + "_Emails" 的值

```
example :   jack@google.com;thad@google.com; 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2017-05-15T08:30:29.303

对于 Web 应用程序，我通常会编写此方法并使用密钥调用它。

```
private String GetConfigValue(String key)
    {
       return System.Web.Configuration.WebConfigurationManager.AppSettings[key].ToString();
    } 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2017-11-14T08:47:44.827

您可以简单地键入：

```
string filePath = Sysem.Configuration.ConfigurationManager.AppSettings[key.ToString()]; 
```

因为`key`是一个对象并`AppSettings`接受一个字符串

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2019-04-09T13:00:18.910

1.  在您的项目上打开“属性”
2.  转到“设置”选项卡
3.  添加“名称”和“值”

代码将自动生成

> ```
>  <configuration>
>       <configSections>
>         <sectionGroup name="applicationSettings" type="System.Configuration.ApplicationSettingsGroup ..." ... >
>           <section name="XX....Properties.Settings" type="System.Configuration.ClientSettingsSection ..." ... />
>         </sectionGroup>
>       </configSections>
>       <applicationSettings>
>         <XX....Properties.Settings>
>           <setting name="name" serializeAs="String">
>             <value>value</value>
>           </setting>
>           <setting name="name2" serializeAs="String">
>             <value>value2</value>
>           </setting>
>        </XX....Properties.Settings>
>       </applicationSettings>
>     </configuration> 
> ```

获取值

属性.设置.默认.名称

或者

Properties.Settings.Default["name"]

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2019-06-03T17:37:39.647

```
ConfigurationManager.RefreshSection("appSettings")
string value = System.Configuration.ConfigurationManager.AppSettings[key]; 
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2019-10-11T11:11:44.693

或者你可以使用

```
string value = system.configuration.ConfigurationManager.AppSettings.Get("ClientsFilePath");

//Gets the values associated with the specified key from the System.Collections.Specialized.NameValueCollection 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2014-08-29T19:11:52.650

按照此处其他答案的建议，我的简单测试也失败了——直到我意识到我添加到桌面应用程序的配置文件被命名为“App1.config”。我将它重命名为“App.config”，一切都立即按预期工作。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2021-12-13T15:25:37.283

# 更新

ConfigurationManager 已过时，需要在.NET Сore 环境中使用IConfiguration（IConfiguration 由.NET Core 内置依赖注入提供）。

```
 private readonly IConfiguration config;

    public MyConstructor(IConfiguration config)
    {
        this.config = config;
    }
    public void DoSomethingFunction()
    {
        string settings1 = config["Setting1"];
    } 
```**

# android - Android 长轮询客户端

> ID：10766657
> 
> 赞同：0
> 
> 时间：2012-05-26T13:26:27.397
> 
> 标签：android, long-polling

如何实现长轮询android客户端？我应该使用 AsyncTask 和 Service 吗？收到响应后如何实现下一个请求立即发货？在方法 doInBackground 子类 AsuncTask 中递归？此机制应在后台运行并更新 GUI 组件。谢谢你。如果你能举个例子。

# android - 活动变化时如何设置计时器？

> ID：10766660
> 
> 赞同：1
> 
> 时间：2012-05-26T13:26:49.527
> 
> 标签：android, android-activity, timer

其实我只是想知道我们是否可以在活动发生变化时设置计时器。

详细说明：

```
startActivity(new Intent(this,Second.class)); 
```

我知道通过使用此代码，我们可以将一项活动更改为另一项活动。通过上面的代码，当活动发生变化时，它会迅速变化，众所周知，但我想要的是在我编写此代码时按钮单击事件中，当我单击该按钮时，相同的活动需要在屏幕上显示一段时间（即，大约 10 秒）& 之后它需要改变活动。我想在这里保留计时器，但我不知道该怎么做。谁能帮我解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T13:30:11.210

最简单的事情是简单地创建一个处理程序并在 10 秒后向它发布一条消息。

```
Handler activityChanger = new Handler();
activityChanger.postDelayed(new Runnable(){
   startActivity(new Intent(this,Second.class));
}, 10000); 
```

把它放在你通常在 startActivity 范围内创建活动的地方。您当前的活动应该再运行 10 秒，然后新的活动就会启动。

# c# - 优化nhibernate session factory，webApp启动时间真慢

> ID：10766662
> 
> 赞同：18
> 
> 时间：2012-05-26T13:26:57.773
> 
> 标签：c#, asp.net-mvc-3, nhibernate, fluent-nhibernate

我已经实现了测试应用程序。它使用流利的 nhibernate 映射到 mssql db 中的 db 对象。因为我想学习微调nhib。mvc3 应用程序，我正在使用这个应用程序。用于测试目的，它只有一个简单实体，具有 10 个枚举属性和一个字符串属性。所以，它真的是光波，但根据 nhibernate profiler 的启动时间是 4.37 秒。对于渲染一个带有几行选中/未选中属性的实体来说，这真的很慢。

代码如下。 **域.SessionProvider.cs**

```
public static ISessionFactory CreateSessionFactory()
{
   var config = Fluently.Configure()
          .Database(MsSqlConfiguration.MsSql2008
          .ConnectionString(c => c.FromConnectionStringWithKey("myConnection")))
          .Mappings(m => m.FluentMappings.Add<FeaturesMap>())
          .ExposeConfiguration(p => p.SetProperty("current_session_context_class", "web"))
          .BuildConfiguration();

          return config.BuildSessionFactory();            
} 
```

**全球.asax**

```
public class MvcApplication : System.Web.HttpApplication
{   
   //SessionPerWebRequest is ommited here as well as other content
   public static ISessionFactory SessionFactory =
               SessionProvider.CreateSessionFactory();

    protected void Application_Start()
    {
       SessionFactory.OpenSession();
    }
} 
```

在 myController 我有以下内容：

```
public ActionResult Index()
{
   return View(GetData());
}

private IList<FeaturesViewModel> GetData()
{
     List<Features> data;
     using (ISession session = MvcApplication.SessionFactory.GetCurrentSession())
     {
          using (ITransaction tx = session.BeginTransaction())
          {
              data = session.Query<Features>().Take(5).ToList();
              tx.Commit();

              var viewModelData = FeaturesViewModel.FromDomainModel(data);
              return viewModelData;
           }
      }
} 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-27T04:28:44.110

您可以通过缓存配置来改善（Web 和 Windows 应用程序的）启动时间。以下课程将完成这项工作：

```
using System.IO;
using System.Reflection;
using System.Runtime.Serialization.Formatters.Binary;
using System.Web;
using NHibernate.Cfg;

namespace NH32AutoMap.Core
{
    public class ConfigurationFileCache
    {
        private readonly string _cacheFile;
        private readonly Assembly _definitionsAssembly;

        public ConfigurationFileCache(Assembly definitionsAssembly)
        {
            _definitionsAssembly = definitionsAssembly;
            _cacheFile = "nh.cfg";
            if (HttpContext.Current != null) //for the web apps
                _cacheFile = HttpContext.Current.Server.MapPath(
                                string.Format("~/App_Data/{0}", _cacheFile)
                                );
        }

        public void DeleteCacheFile()
        {
            if (File.Exists(_cacheFile))
                File.Delete(_cacheFile);
        }

        public bool IsConfigurationFileValid
        {
            get
            {
                if (!File.Exists(_cacheFile))
                    return false;
                var configInfo = new FileInfo(_cacheFile);
                var asmInfo = new FileInfo(_definitionsAssembly.Location);

                if (configInfo.Length < 5 * 1024)
                    return false;

                return configInfo.LastWriteTime >= asmInfo.LastWriteTime;
            }
        }

        public void SaveConfigurationToFile(Configuration configuration)
        {
            using (var file = File.Open(_cacheFile, FileMode.Create))
            {
                var bf = new BinaryFormatter();
                bf.Serialize(file, configuration);
            }
        }

        public Configuration LoadConfigurationFromFile()
        {
            if (!IsConfigurationFileValid)
                return null;

            using (var file = File.Open(_cacheFile, FileMode.Open, FileAccess.Read))
            {
                var bf = new BinaryFormatter();
                return bf.Deserialize(file) as Configuration;
            }
        }
    }
} 
```

要使用它，

```
private Configuration readConfigFromCacheFileOrBuildIt()
{
    Configuration nhConfigurationCache;
    var nhCfgCache = new ConfigurationFileCache(MappingsAssembly);
    var cachedCfg = nhCfgCache.LoadConfigurationFromFile();
    if (cachedCfg == null)
    {
        nhConfigurationCache = buildConfiguration();
        nhCfgCache.SaveConfigurationToFile(nhConfigurationCache);
    }
    else
    {
        nhConfigurationCache = cachedCfg;
    }
    return nhConfigurationCache;
} 
```

然后在调用 BuildSessionFactory 之前，我们可以从缓存中读取配置文件，或者如果映射已更改，则构建它并再次缓存它：

```
public ISessionFactory SetUpSessionFactory()
{
    var config = readConfigFromCacheFileOrBuildIt();
    var sessionFactory = config.BuildSessionFactory(); 
```

在这里您可以找到完整的示例：( [^](https://dotnettipsrepository.svn.codeplex.com/svn/Trunk/ORMs/NHibernate/NH32AutoMap.zip) )。+ 如果要使其工作，请将域类和映射定义程序集与主应用程序的程序集分开（因为如果映射定义程序集比缓存文件的 LastWriteTime 更新，ConfigurationFileCache 类将删除缓存文件）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-26T15:03:46.407

IIRC 正确，在 HttpApplication（或其子类，如 MvcApplication）的构造函数中创建对象不是一个好主意。最好在 Application_Start 处理程序中创建会话工厂。

您应该删除 NHibernate 分析器（因为所有分析器都可能影响测量结果）。相反，调用 CreateSessionFactory() 并使用 Stopwatch 类将其包围以获得准确的测量值。

您的数据库服务器响应缓慢吗？由于连接池，这可能仅在第一次出现时才会注意到。

NHibernate 确实需要一些时间来初始化，但一个轻量级实体的 4 秒似乎太多了。当然，这会受到测试系统的一般性能的影响。

# c++ - 使用 boost 库收听 udp 广播

> ID：10766664
> 
> 赞同：6
> 
> 时间：2012-05-26T13:27:18.407
> 
> 标签：c++, sockets, boost, udp, boost-asio

似乎是很多人都有的问题，但到目前为止我找到的所有答案都没有帮助。

**问题：** 我正在尝试收听通过 UDP 将数据包发送到我的电脑的 Velodyne HDL32。操作系统是 32 位 Ubuntu 和 Boost 库 v1.46。

我通过 Wireshark 获得的数据如下所示：

```
Time     | Source         | Destination   | Protocol | Length | Source Port | Destination Port
0.000000 | 192.168.17.212 | 192.168.3.255 | UDP      | 1248   | https       | opentable 
```

但是使用此代码，没有数据显示给我（端口是正确的）：

```
receiver(boost::asio::io_service& io_service,
  const boost::asio::ip::address& listen_address)
: m_socket(io_service)
{

boost::asio::ip::address ipAddr = boost::asio::ip::address_v4::any();
boost::asio::ip::udp::endpoint listen_endpoint(
         ipAddr, 2368);

m_socket.open(listen_endpoint.protocol());
m_socket.bind(listen_endpoint);

m_socket.async_receive_from(
    boost::asio::buffer(m_data, max_length), m_sender_endpoint,
    boost::bind(&receiver::handle_receive_from, this,
      boost::asio::placeholders::error,
      boost::asio::placeholders::bytes_transferred));
}

void handle_receive_from(const boost::system::error_code& error,
  size_t bytes_recvd)
{
std::cout << "receive" << bytes_recvd << std::endl;

  m_socket.async_receive_from(
      boost::asio::buffer(m_data, max_length), m_sender_endpoint,
      boost::bind(&receiver::handle_receive_from, this,
        boost::asio::placeholders::error,
        boost::asio::placeholders::bytes_transferred));
} 
```

到目前为止，任何人都可以确定问题还是您需要更多信息？我很感激我能得到的任何帮助。

**注意：** 我没有以 root 权限运行程序！

**一些想法：** boost::asio::ip::address_v4::any() 是否有可能不会监听 IP *。*.*.255 当子网掩码为 255.255.255.0 时？

使用 netcat 时，也不会显示任何数据。当我使用 Windows netcat 时，它工作得很好。与 Linux 和 Windows 上的 Wireshark 相同 - 工作正常。也尝试过，但效果相同 - 没有数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T13:50:01.153

谢谢大家试图帮助我。代码没问题，但问题出在 velodyne 和网络设置方面。

对尝试使用 Velodyne 的所有其他人的说明：

velodyne 有自己的子网 (192.168.17.x)。现在所有记录的数据都通过广播发送到子网 192.168.3.x。在正常情况下，应该在该子网中的所有 IP 上接收数据，但这似乎是不可能的。您可以接收数据的唯一 IP 是 IP 255，只要您使用这两种解决方案之一即可。（或使用 windows 或使用 wireshark 转储文件）

**1\. 愚蠢但有效的解决方案**

将网关设置为 192.168.3.1。是的，没有，但没关系。从现在开始，您将收到 IP 255 上的数据。

**2.清洁解决方案**

设置一条新路由，将所有流量从 velodyne 的子网引向子网 192.168.3.x。

我真的不知道为什么会这么复杂，但是我们花了很长时间才发现这个“秘密”。希望你们中的一些人会从我们挑剔的工作中受益。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T20:17:42.433

您是否尝试过设置广播选项？

```
// do this before binding
boost::asio::socket_base::broadcast option(true);
m_socket.set_option(option); 
```

# php - 在 PHP 中使用 Imagick 的 Sprite.curveTo

> ID：10766665
> 
> 赞同：1
> 
> 时间：2012-05-26T13:27:22.850
> 
> 标签：php, actionscript, imagemagick

我正在寻找`sprite.graphics.curveTo()`与 Imagick 的 ActionScript for PHP 中的等效功能。 [可以解决问题的功能列表：](http://php.net/manual/fr/class.imagickdraw.php)

```
bool pathCurveToAbsolute ( float $x1 , float $y1 , float $x2 , float $y2 , float $x , float $y )
bool pathCurveToQuadraticBezierAbsolute ( float $x1 , float $y1 , float $x , float $y )
bool pathCurveToQuadraticBezierRelative ( float $x1 , float $y1 , float $x , float $y )
bool pathCurveToQuadraticBezierSmoothAbsolute ( float $x , float $y )
bool pathCurveToQuadraticBezierSmoothRelative ( float $x , float $y )
bool pathCurveToRelative ( float $x1 , float $y1 , float $x2 , float $y2 , float $x , float $y )
bool pathCurveToSmoothAbsolute ( float $x2 , float $y2 , float $x , float $y )
bool pathCurveToSmoothRelative ( float $x2 , float $y2 , float $x , float $y ) 
```

哪一个 ？有任何想法吗 ？？因为我很迷茫。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T18:32:41.057

flash curveTo 是二次贝塞尔曲线，相当于 php ImagickDraw::pathCurveToQuadraticBezierAbsolute

[Abode：绘制线条和曲线](http://help.adobe.com/en_US/ActionScript/3.0_ProgrammingAS3/WS5b3ccc516d4fbf351e63e3d118a9b90204-7dd9.html)

> curveTo() 方法绘制二次贝塞尔曲线。这会绘制一条连接两个点（称为锚点）的弧，同时向第三个点（称为控制点）弯曲。Graphics 对象使用当前绘图位置作为第一个锚点。当你调用curveTo()方法时，你传递了四个参数：控制点的x和y坐标，然后是第二个锚点的x和y坐标。例如，以下代码绘制一条从点 100、100 开始到点 200、200 结束的曲线。因为控制点位于点 175、125，所以这会创建一条向右移动然后向下移动的曲线：

[AS3 实现（flash.display.Graphics）](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/Graphics.html)：

```
curveTo(controlX:Number, controlY:Number, anchorX:Number, anchorY:Number):void 
```

[PHP实现](http://php.net/manual/en/imagickdraw.pathcurvetoquadraticbezierabsolute.php)：

```
bool ImagickDraw::pathCurveToQuadraticBezierAbsolute ( float $x1 , float $y1 , float $x , float $y ) 
```

# android - How to remove zoom buttons on Android webview?

> ID：10766669
> 
> 赞同：15
> 
> 时间：2012-05-26T13:28:21.197
> 
> 标签：android, zooming, android-webview

Is it possible to remove the zoom buttons ![enter image description here](../Images/f2793acea7da2f306d6448d75aab4e0a.png)? Its showing when I zooming the WebView. I need zoom control without these buttons. I'm using android 2.3.

I used below code,

```
WebView webview = (WebView) findViewById(R.id.webview);
webview.getSettings().setBuiltInZoomControls(false);
webview.getSettings().setJavaScriptEnabled(true);
FrameLayout mContentView = (FrameLayout) getWindow().
        getDecorView().findViewById(android.R.id.content);
final View zoom = webview.getZoomControls();
mContentView.addView(zoom, ZOOM_PARAMS);
zoom.setVisibility(View.GONE); 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-05-26T13:29:47.043

```
getSettings().setBuiltInZoomControls(false); 
```

use the above line of code to remove the zoom buttons.

On API >= 11, you can use:

```
webView.getSettings().setBuiltInZoomControls(true);
webView.getSettings().setDisplayZoomControls(false); 
```

**Updated:::** If you want have zoom in/out without zoom controls then use the below code(copied from [here](http://www.tutorialforandroid.com/2009/02/webview-with-zoomcontrols-in-android.html))

```
public class Main extends Activity {
  private WebView myWebView;
  private static final FrameLayout.LayoutParams ZOOM_PARAMS =
new FrameLayout.LayoutParams(
ViewGroup.LayoutParams.FILL_PARENT,
ViewGroup.LayoutParams.WRAP_CONTENT,
Gravity.BOTTOM);

  @Override
  protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.webview);
    myWebView = (WebView)findViewById(R.id.webView);

    FrameLayout mContentView = (FrameLayout) getWindow().
    getDecorView().findViewById(android.R.id.content);
    final View zoom = myWebView.getZoomControls();
    mContentView.addView(zoom, ZOOM_PARAMS);
    zoom.setVisibility(View.GONE);

    myWebView.loadUrl("http://www.almondmendoza.com");
  }
} 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2014-05-01T19:46:14.997

Change this on your AndroidManifest:

```
 android:minSdkVersion="8" 
```

to this:

```
 android:minSdkVersion="11" 
```

than use this in your web view settings:

```
getSettings().setBuiltInZoomControls(true);
    getSettings().setDisplayZoomControls(false); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-09T11:10:38.070

Finally my answer is, Its not possible to hide/remove these button's on `WebView` in Android 2.3.

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-08-30T10:57:06.400

If you want to disable only zoom controls use this: `webView.getSettings().setDisplayZoomControls(false);`

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-05-26T13:31:08.697

Follow this code. It will help you.

Main.java

```
 WebView wv = (WebView) findViewById(R.id.webview1) ;
    WebSettings webSettings = wv.getSettings();
    webSettings.setBuiltInZoomControls(false);
    wv.loadUrl(url); 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2015-04-12T20:24:29.380

Just add this line:

```
webSettings.setDisplayZoomControls(false); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-08-12T13:19:35.007

zoom buttons can be removed by implementing your own custom webview, and using reflection to get the built in zoom controls and making them invisible for API below 11 (Honeycomb). The code is as thus works for all APIs upto android nougat;

```
public class CustomWebView extends WebView{

    private ZoomButtonsController zoom_controll = null;

    public CustomWebView(Context context) {
        this(context, null);
    }

    public CustomWebView(Context context, AttributeSet attrs) {
        this(context, attrs, android.R.attr.webViewStyle);
    }

    public CustomWebView(Context context, AttributeSet attrs, int defStyleAttr) {
        super(context, attrs, defStyleAttr);
        initWebSettings();
    }

    @SuppressLint("NewApi")
    private void initWebSettings() {
        WebSettings webSettings = getSettings();

        webSettings.setSupportZoom(true);
        webSettings.setBuiltInZoomControls(true);
        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB) {
            webSettings.setAllowContentAccess(true);
            webSettings.setDisplayZoomControls(false);

        } else {
            try {
                Class webview = Class.forName("android.webkit.WebView");
                Method method = webview.getMethod("getZoomButtonsController");
                zoom_controll = (ZoomButtonsController) method.invoke(this, null);
            } catch (Exception e) {
                e.printStackTrace();
            }
        }
    }

    @Override
    public boolean onTouchEvent(MotionEvent event) {
        if(zoom_controll != null)
            zoom_controll.getZoomControls().setVisibility(View.GONE);
        return super.onTouchEvent(event);
    }

} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-08-05T11:39:26.987

Here is a solution:

```
 if (ev.getAction() == MotionEvent.ACTION_DOWN ||
        ev.getAction() == MotionEvent.ACTION_POINTER_DOWN ||
        ev.getAction() == MotionEvent.ACTION_POINTER_1_DOWN ||
        ev.getAction() == MotionEvent.ACTION_POINTER_2_DOWN ||
        ev.getAction() == MotionEvent.ACTION_POINTER_3_DOWN) {
    if (multiTouchZoom && !buttonsZoom) {
        if (ev.getPointerCount() > 1) {
            getSettings().setBuiltInZoomControls(true);
            getSettings().setSupportZoom(true);
        } else {
            getSettings().setBuiltInZoomControls(false);
            getSettings().setSupportZoom(false);
        }
    }
}

if (!multiTouchZoom && buttonsZoom) {
    if (getPointerCount(ev) > 1) {
        return true;
    }
} 
```

In your case `multiTouchZoom` is true and `buttonsZoom` is false.

I found it here [enable/disable zoom in Android WebView](https://stackoverflow.com/questions/5125851/enable-disable-zoom-in-android-webview) and it's worked for me.

# wpf - 向用户控件添加内容

> ID：10766670
> 
> 赞同：1
> 
> 时间：2012-05-26T13:28:30.013
> 
> 标签：wpf, user-controls

我有一个名为 myControl 的 UserControl，其中有一个 3 列 Grid。

```
<Grid Name="main">
  <Grid Grid.Column="0"/><Grid Grid.Column="1"/><Grid Grid.Column="2"/>
</Grid> 
```

客户端可以这样使用就OK了。

```
<myControl /> 
```

我的问题是，客户想要在“主”网格的第一列中添加一个元素，例如：

```
<myControl>
  <TextBlock Text="abc"/>
</myControl> 
```

在这种情况下，TextBlock 将替换原始内容，这里是“主”网格。

我应该怎么做才能支持附加元素？十分感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T15:29:03.980

您可以使用以下内容：

```
// This allows "UserContent" property to be set when no property is specified
// Example: <UserControl1><TextBlock>Some Text</TextBlock></UserControl1>
// TextBlock goes into "UserContent"
[ContentProperty("UserContent")]
public partial class UserControl1 : UserControl
{
    // Stores default content
    private Object defaultContent;

    // Used to store content supplied by user
    private Object _userContent;
    public Object UserContent
    {
        get { return _userContent; }
        set
        {
            _userContent = value;
            UpdateUserContent();
        }
    }

    private void UpdateUserContent()
    {
        // If defaultContent is not set, backup the default content into it
        // (will be set the very first time this method is called)
        if (defaultContent == null)
        {
            defaultContent = Content;
        }

        // If there is something in UserContent, set it to Content
        if (UserContent != null)
        {
            Content = UserContent;
        }
        else // Otherwise load default content back
        {
            Content = defaultContent;
        }
    }

    public UserControl1()
    {
        InitializeComponent();
    }
} 
```

# java - 如何即时更改更改类行为？

> ID：10766674
> 
> 赞同：1
> 
> 时间：2012-05-26T13:29:14.007
> 
> 标签：java, jvm, on-the-fly

我正在尝试编辑一个类文件并使其在运行时可供 JVM 使用。这可能吗，我该怎么做？

例如：

```
main() {
    for (int i=0;i<10;i++) {
        NewClass.method();
        //ask user if to continue..
    }
}

public class NewClass() {
    static void method() {
        sysout("hi");
    }
} 
```

执行此循环时，我想更改文件 NewClass() 并将其加载到 JVM 中，以便打印“再见”。

这是完整的代码：

```
try {
    for (int iCount = 0; iCount < 10; iCount++) {
        BufferedReader br = new BufferedReader(new InputStreamReader(
                System.in));
        System.out.print("Enter which method:");
        int i = Integer.parseInt(br.readLine());
        System.out.println(i);
        if (i == 1) {
            Called.calledMethod1();
        } else {
            Called.calledMethod2();
        }
    }
} catch (NumberFormatException nfe) {
    System.err.println("Invalid Format!");
} 
```

我想运行一个类的主要方法，当它运行时我想引用另一个类，编辑它，然后引用第二个类的相同方法并获得不同的输出。

我*不想*：

1.  停止jvm
2.  编辑代码
3.  再次运行代码。

我想要

1.  在运行时编辑代码，并立即反映更改。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T19:36:18.273

您必须使用 Java 反射。使用反射，

1.  [您可以在运行时使用Class](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Class.html) [forName 方法](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Class.html#forName%28java.lang.String%29)动态加载一个类。
2.  在你得到的类实例上使用[调用](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/reflect/Method.html#invoke%28java.lang.Object,%20java.lang.Object...%29)方法，你可以调用任何你想给它命名的静态方法。

如果您的课程在设计时是固定的，您只需保留第一点。一些代码：

```
...

BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
System.out.print("Enter which class:");
JavaCompiler compiler = ToolProvider.getSystemJavaCompiler();
className=br.readLine()
int results = compiler.run(null, null, null, className+".java");
if(results == 0){

    Class clazz = Class.forName(className+".class");
    System.out.print("Compiled successfully.Enter which method:");
    Object returnValue=clazz.getMethod(br.readLine()).invoke(null);
}
... 
```

但要注意安全问题：上面的代码让任何人都可以执行在运行时可访问的每个类的每个静态方法。如果安全性是您关心的问题之一，最好先验证从控制台接收到的输入并测试它们是否与您希望通过控制台提供的类方法之一匹配。

**编辑**：

阅读您的评论后，我更好地理解了您的问题。如果你的目标是 Java 6，为了在运行时编译一个类，你可以使用[Java Compiler object](http://docs.oracle.com/javase/6/docs/api/javax/tools/JavaCompiler.html)。我已经编辑了代码以包含 JavaCompiler 的使用。

# c# - 鼠标离开imagebutton asp.net上的PageMethod？

> ID：10766675
> 
> 赞同：1
> 
> 时间：2012-05-26T13:29:24.613
> 
> 标签：c#, asp.net

你好我怎么能添加到imagebutton鼠标离开事件来运行pagemethod我不能使用javascript任何想法？

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="Default.aspx.cs" Inherits="Zadanie_1_rysunki._Default" %>
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

 <html xmlns="http://www.w3.org/1999/xhtml">
 <head runat="server">
<title></title>
 </head>
 <body><center>
<form id="form1" runat="server">
<asp:ImageButton ID="ImageButton1" runat="server" ImageUrl="~/img/1.jpg" />
<div>

</div>
<asp:ScriptManager ID="ScriptManager1" runat="server" EnablePageMethods="true">
</asp:ScriptManager>
</form>
</center>
 </body>
 </html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T14:01:06.783

由于您将“EnablePageMethods”设置为“true”，我相信您可以将 OnMouseLeave 事件设置为

```
"PageMethods.MyPageMethod(param1, param2, paramN);" 
```

# java - Java 中的 Object 、 Reference ID 和 Reference Variable 有什么区别？

> ID：10766681
> 
> 赞同：4
> 
> 时间：2012-05-26T13:30:14.580
> 
> 标签：java

java中的以下内容有什么区别：

1.  目的

2.  参考编号

3.  参考变量

当我看到这样的陈述时：

```
Emp e = new Emp(); 
```

这`Emp`是类，但`e`不是它的对象吗？如果是这样..我在其他地方看到过这个：

因为如果是这样的话..某处看起来像

```
Emp e = new Local(); 
```

其中 local 是`Emp`. `e`那么在这种情况下是什么意思呢？它持有什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T13:33:57.403

本质上，对象是堆中的一块内存。（对象的部分内存结构包括对该对象类的引用。）

Java 中的对象变量（如`e`本例中的 ）包含对堆中对象的*引用。*

类与所有这些完全不同；它们可能描述该类型对象的结构，并具有方法实现等，但类与其他对象位于完全不同的内存区域。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-03-19T17:20:17.323

```
Emp e 
```

此语句在堆栈中创建一个引用变量“e”。

```
 new Emp() 
```

此语句在堆中创建一个对象。一个对象只是一个缓冲区，或者我们可以说“一块内存”。因此，缓冲区被保留在堆中。因此声明，

```
 Emp e=new Emp() 
```

将在堆中创建的该对象的引用 id 传递给引用变量“e”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-10-01T17:05:29.230

```
Emp{
int salary;
int name;
} 
```

**新的** 新的 Emp(); Emp是一个类，new用于在堆中保留内存区域。New返回它保留的内存地址。一旦你写了，new Emp()，一个内存缓冲区被保留在堆中。这个保留区域的大小取决于一个类的数据成员的大小（这里是 2 个字节，因为 int Salary 占用 1 个字节，而 int name 占用 1 个字节字节。）

**引用 ID**对象的引用 ID 是存储对象的位置地址。 `new Emp();` 创建对象，但其地址未在任何地方存储和捕获。

**引用变量** 现在，假设你想一次又一次地使用同一个对象，那么你必须有它的地址位置（引用Id）。要存储它的 addressid(ReferenceId)，您可以使用引用变量。引用变量总是占用 4 个字节，它们只是存储地址（对象引用）的变量。

创建参考变量 Emp e2；

将引用 ID 分配给引用变量 Emp e2=new Emp();

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-10-13T08:42:43.063

这里：

```
Emp e=new Emp(); 
```

`e`是引用变量，它保存在堆区域中创建的对象的地址。

参考 id 以哈希码的形式生成，借助对象的魔术方法（对象共有 9 个方法）即`toString()`方法；在内部，使用`toString`对象的方法，它会自动为运行时创建的每个对象生成 Ref id。

对象的内存总是保留在 RAM 的堆区域中。bcz 在 java 中没有可用的显式指针。这里， ref 变量指向栈给对象的引用以在 Heap 中保留内存；bcz 对象也不知道内存在哪里。

堆栈段也是内存的一部分：当我们给 ref 变量时，那么 ref 变量必须已经存储在堆栈中，然后 ref 变量知道 head 的哪一部分内存是空闲的，它指向对象保留位置并保存在引用变量中。

'new' 是一个文本操作符，有助于创建对象。

`Emp()`: 是类的子类；如果程序员在java程序中没有显式提供构造函数，那么编译器会隐式添加一个默认构造函数，并且给子类名作为相同类名的原因是这样“new”可以很容易地知道非需要多少内存静态数据成员。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-11-16T15:26:40.847

这是一个简单的问题...

```
emp e=new emp(); 
```

这里，`e`是对象的引用 id。`emp`是类的引用变量，而您的对象ID不同，它的状态和行为的组合..

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-07-12T04:18:38.757

我刚刚制作了一个用于显示对象参考 ID 的程序。

```
class abc
{

   int a=10;
   int b;
}

class t extends abc
{

   public static void main(String args[])
   {
     abc A=new abc();
     System.out.println(""+A);
   }
} 
```

输出：令人震惊的十六进制字符串：

“abc@52e922”

Java 以十六进制字符串的形式将对象的实际位置映射到一个单独的位置，该字符串称为参考 ID。它从不显示存储在内存中的对象的实际位置。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-01-29T18:52:59.683

汽车 c=新车（）；

对象什么都不是，它只是堆中的缓冲区或内存，非静态数据成员获取内存。

引用 ID 由堆栈中的 new 运算符生成，它是一个内存位置，其中包含哈希码形式的对象的内存位置。参考 ID 是到达对象的唯一方法。生成引用 ID 是因为 java 中有一条规则，即在运行时分配的内存没有任何名称，我们都知道对象是在运行时创建的，所以它们也没有名称，我们需要一个唯一的 ID 来对其执行操作这就是为什么在 java 中每个对象都有一个唯一的引用 ID。

在上面的示例中，c 是一个存储引用 ID 的引用变量。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2018-04-20T16:00:12.700

对象什么都不是，它只是堆区域中的内存区域或缓冲区，类的所有实例数据成员都在其中获取内存。

Emp e = new Emp();

在上面的语句中，e 是一个引用变量，它保存对象的引用 id，但是出于安全目的，java 不允许任何人获取实际对象的 id，它也可以是自我解释的，因为我们使用重定向的单词引用 id我们没有得到我们对象的实际 id 而只是它的引用。

参考 id 也可以命名为类名@对象的 # 代码的十六进制表示。

# sql-server - 如何在sql server中进行时间搜索？

> ID：10766689
> 
> 赞同：1
> 
> 时间：2012-05-26T13:31:55.700
> 
> 标签：sql-server, search, datetime

我在表开始时间和结束时间中有两列。我想根据时间进行搜索。我以以下格式保存了开始时间和结束时间

```
14:57:44 
```

使用`Convert(varchar(20),Getdate(),108)`

请帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T13:38:09.427

```
select * from your_table
where cast(time_column as time) between '10:00:00' and '11:00:00' 
```

# java - 如何使用java从pdf中提取作者详细信息

> ID：10766690
> 
> 赞同：3
> 
> 时间：2012-05-26T13:31:57.430
> 
> 标签：java, pdf

我有 1000 和 1000 篇 PDF 文章，我只需要从中提取作者姓名和他的相关详细信息，例如`address`PDF`email ID`中提供的内容（我的意思是里面的内容）。我不想通过获取与 PDF 元数据相关的详细信息来做到这一点。因为我尝试过，我最终只得到了更少的细节，比如作者姓名、标题和其他一些我根本不需要的常用细节。

我已经通过了互联网上的所有 API，但我仍然得到了解决方案。我需要用Java来做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T13:53:28.950

我认为您无法直接从任何库中获取它。使用 iTest 库[阅读](http://api.itextpdf.com/itext/com/itextpdf/text/pdf/PdfReader.html)pdf。一旦您能够阅读文本，就可以使用正则表达式找到作者。

# iphone - 无法删除视图的子视图

> ID：10766691
> 
> 赞同：0
> 
> 时间：2012-05-26T13:32:03.670
> 
> 标签：iphone, ios, xcode

我似乎无法实现删除视图子视图的子视图。就像这样：

`[self.view addSubview:myView];`

`[myView addSubview:overlay];`

我的 .h ：

```
@interface

    UIView *myView;
    IBOutlet Overlay *overlay;
...
}

@property (strong, nonatomic) UIView *myView;
@property (strong, nonatomic) IBOutlet Overlay *overlay;
... 
```

.m：

```
-(void) method {   
    UIView *myView = [[UIView alloc] initWithFrame:CGRectMake(420.0f,0.0f,604.0f,768.0f)];
    [self.view addSubview:myView]; 

    Overlay *o = [[Overlay alloc] initWithFrame:CGRectMake(000.0f,000.0f,604.0f,768.0f)];
    [myView addSubview:o];
} 
```

我试过了`[myView removeFromSuperview]`，`[myView removeFromSuperview]`在里面`void method`，它有效。我需要的是让它在外部或不同的地方工作，`void`但我所做的却不起作用。

笔记：

它说当我分配 myView`"Local declaration of 'myView' hides instance variable."`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T13:33:36.387

替换`UIView *myView = (init code)`为`self.myView = (init code)`。您正在重新声明`myView`为在您的类中已经具有范围的局部变量，因为您将其设为属性。（同样的事情也适用于`Overlay`。）

然后，您可以`[self.myView removeFromSuperview]`在此类中的任何位置使用。

# php - 如何使用 PHP 在 Lotus Notes 中发送电子邮件

> ID：10766693
> 
> 赞同：1
> 
> 时间：2012-05-26T13:32:31.130
> 
> 标签：php, email, smtp, lotus-domino, lotus

需要通过 Lotus Notes 使用 PHP 发送电子邮件。Notes 在我的系统上配置。所以只是想如果我可以使用 PHP 发送电子邮件。任何人都可以帮助我应该做的代码和配置吗？

* * *

在阅读了你们所有人的回复后，我试图从头到尾确定事情。在你们的帮助下，我至少可以领先一步。我可以使用 GetEnvironmentString 找出我的邮件服务器，它该死的正确，这也反映在我的 lotus notes 工作空间中。但是当我尝试使用下面的代码时，它只会继续加载并最终什么都不返回 -

```
<?php

       require_once "Mail.php";

        $from = "abc@email.com";
        $to = "abc@email.com";
        $subject = "Test!";
        $body = "Hi,\n\nTest?";

        $host = "d23abcd";
        $port = "1352";
        $username = "abc@email.com";
        $password = "mypassword";

        $headers = array ('From' => $from,
          'To' => $to,
          'Subject' => $subject);
        $smtp = Mail::factory('smtp',
          array ('host' => $host,
            'port' => $port,
            'auth' => true,
            'username' => $username,
            'password' => $password));

        $mail = $smtp->send($to, $headers, $body);

        if (PEAR::isError($mail)) {
          echo("<p>" . $mail->getMessage() . "</p>");
         } else {
          echo("<p>Message successfully sent!</p>");
         }

    ?> 
```

我在这里犯了一些错误吗？我怀疑

```
 $host = "d23abcd";
 $port = "1352"; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T14:28:09.233

如果您的 Lotus Domino 服务器设置了 SMTP，您可以将 Domino 服务器用作外发邮件服务器（如果 PHP 能够使用中继服务器发送邮件）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T18:12:23.177

非常感谢您的所有回复和回复。最后，我能够使用多米诺服务器发送邮件。想分享一些我遇到的事情-

1.  使用 $session->GetEnvironmentString("MailServer",True); 找出 session 是 Notes.NotesSession 的 COM 对象实例的服务器，例如 new COM("Notes.NotesSession");

2.  其次，我尝试使用从 netstat 命令获得的用于此特定服务器进程的端口 1352。但它没有用，最后只在 25 上工作。

3.  Domino 服务器不接受身份验证，因此使用了 mail($to,$subject,$message,$headers); 而不是 $mail = $smtp->send($to, $headers, $body);

很高兴它奏效了。感谢大家的帮助和建议。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T12:05:07.703

使用本地 Notes 客户端或通过 COM 安装在“服务器”上的 Notes 客户端来发送邮件并不是一个好主意。您想要的是通过 SMTP 服务器（可以是 Domino 服务器，正如 Per 指出的那样）从 PHP 发送电子邮件。

例如，通过 PHP 发送电子邮件[在此处](https://stackoverflow.com/questions/712392/send-email-using-gmail-smtp-server-from-php-page)和[此处](http://pear.php.net/manual/en/package.mail.mail.php)进行了说明。有关服务器名称、用于 SMTP 的端口和可选凭据，请联系您当地的 Domino 管理员。

# gtk - 从应用程序外部唤醒 gtk 窗口

> ID：10766695
> 
> 赞同：0
> 
> 时间：2012-05-26T13:32:48.413
> 
> 标签：gtk, signals, vala

我有一个运行 gtk 窗口的应用程序。当用户退出应用程序时，我只想隐藏窗口但保持进程运行。所以当应用程序启动时我想检查

```
if app already running: show window, else create new window... 
```

有没有办法在不使用 DBus 的情况下做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T15:54:19.527

我选择使用 libunique，对于 gtk3 应用程序可以使用 GtkApplication。

# internet-explorer - 用fancybox定位错误IE

> ID：10766696
> 
> 赞同：0
> 
> 时间：2012-05-26T13:33:02.750
> 
> 标签：internet-explorer, google-chrome, firefox, fancybox

大家好，我在 Internet Explorer 定位方面遇到问题（像往常一样......）问题是当我点击缩略图时，它必须在页面中心/中间弹出一个幻灯片，firefox/chrome 可以完美运行，但 Internet Explorer 拒绝像这样工作，它将幻灯片放在页面底部。

这是网站：217.120.183.184/cdweb/Portfolio/

如果您需要任何进一步的信息，请随时问我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T13:36:29.677

标头未正确设置：

```
<!DOCTYPE html>
<html>
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T13:36:03.607

尝试添加正确的 DOCTYPE。[这是官方网站http://fancybox.net/howto](http://fancybox.net/howto)上的第一条规则

# python - 您将如何在 Matplotlib 或 Mayavi 中表示以下 3D 数据？

> ID：10766698
> 
> 赞同：7
> 
> 时间：2012-05-26T13:33:13.470
> 
> 标签：python, r, matplotlib, mayavi, mplot3d

我有一大组数据，我试图用 3D 表示，希望能发现一个模式。我花了很多时间阅读、研究和编码，但后来我意识到我的主要问题不是编程，而是实际上**选择了一种可视化数据的方式**。

Matplotlib 的 mplot3d 提供了很多选项（线框、轮廓、填充轮廓等），MayaVi 也是如此。但是有很多选择（每个都有自己的学习曲线），我几乎迷失了，不知道从哪里开始！所以我的问题本质上是如果你必须处理这些数据，你会使用哪种绘图方法？

我的数据是基于日期的。对于每个时间点，我绘制一个值（列表“实际”）。

但是对于每个时间点，我也有一个上限、一个下限和一个中间点。这些限制和中点基于不同平面中的种子。

我想在我的“实际”阅读中发生重大变化时或之前发现这一点或识别模式。是不是所有飞机的上限都满足的时候？还是互相接近？是在实际值触及上限/中值/下限时吗？是不是当一个平面上的上层接触另一个平面的下层时？

在我粘贴的代码中，我将数据集缩减为几个元素。我只是使用简单的散点图和线图，但由于数据集的大小（可能还有 mplot3d 的限制？），我无法使用它来发现我正在寻找的趋势。

```
dates = [20110101,20110104,20110105,20110106,20110107,20110108,20110111,20110112]

zAxis0= [       0,       0,       0,       0,       0,       0,       0,       0]
Actual= [    1132,    1184,    1177,     950,    1066,    1098,    1116,    1211]

zAxis1= [       1,       1,       1,       1,       1,       1,       1,       1]
Tops1 = [    1156,    1250,    1156,    1187,    1187,    1187,    1156,    1156]
Mids1 = [    1125,    1187,    1125,    1156,    1156,    1156,    1140,    1140]
Lows1 = [    1093,    1125,    1093,    1125,    1125,    1125,    1125,    1125]

zAxis2= [       2,       2,       2,       2,       2,       2,       2,       2]
Tops2 = [    1125,    1125,    1125,    1125,    1125,    1250,    1062,    1250]
Mids2 = [    1062,    1062,    1062,    1062,    1062,    1125,    1000,    1125]
Lows2 = [    1000,    1000,    1000,    1000,    1000,    1000,     937,    1000]

zAxis3= [       3,       3,       3,       3,       3,       3,       3,       3]
Tops3 = [    1250,    1250,    1250,    1250,    1250,    1250,    1250,    1250]
Mids3 = [    1187,    1187,    1187,    1187,    1187,    1187,    1187,    1187]
Lows3 = [    1125,    1125,    1000,    1125,    1125,    1093,    1093,    1000]

import matplotlib.pyplot
from mpl_toolkits.mplot3d import Axes3D

fig = matplotlib.pyplot.figure()
ax  = fig.add_subplot(111, projection = '3d')

#actual values
ax.scatter(dates, zAxis0, Actual, color = 'c', marker = 'o')

#Upper limits, Lower limts, and Mid-range for the FIRST plane
ax.plot(dates, zAxis1, Tops1, color = 'r')
ax.plot(dates, zAxis1, Mids1, color = 'y')
ax.plot(dates, zAxis1, Lows1, color = 'b')

#Upper limits, Lower limts, and Mid-range for the SECOND plane
ax.plot(dates, zAxis2, Tops2, color = 'r')
ax.plot(dates, zAxis2, Mids2, color = 'y')
ax.plot(dates, zAxis2, Lows2, color = 'b')

#Upper limits, Lower limts, and Mid-range for the THIRD plane
ax.plot(dates, zAxis3, Tops3, color = 'r')
ax.plot(dates, zAxis3, Mids3, color = 'y')
ax.plot(dates, zAxis3, Lows3, color = 'b')

#These two lines are just dummy data that plots transparent circles that
#occpuy the "wall" behind my actual plots, so that the last plane appears
#floating in 3D rather than being pasted to the plot's background
zAxis4= [       4,       4,       4,       4,       4,       4,       4,       4]
ax.scatter(dates, zAxis4, Actual, color = 'w', marker = 'o', alpha=0)

matplotlib.pyplot.show() 
```

我得到了这个情节，但它并不能帮助我看到任何共同关系。

![在此处输入图像描述](../Images/517045d8aedb1d3bfec2d739e6445991.png) 我不是数学家或科学家，所以我真正需要的是帮助选择可视化数据的格式。有没有一种有效的方法可以在 mplot3d 中显示这一点？还是您会使用 MayaVis？无论哪种情况，您会使用哪个库和类？

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-26T15:23:06.630

为了评论您问题的可视化部分（而不是编程），我已经模拟了一些示例分面图，以建议您可能想要用来探索数据的替代方案。

```
library("lubridate")
library("ggplot2")
library("reshape2")

dates <- c("2011-01-01","2011-01-04","2011-01-05",
           "2011-01-06","2011-01-07","2011-01-08",
           "2011-01-11","2011-01-12")
dates <- ymd(dates)

Actual<- c(    1132,    1184,    1177,     950,    1066,    1098,    1116,    1211,
               1132,    1184,    1177,     950,    1066,    1098,    1116,    1211,
               1132,    1184,    1177,     950,    1066,    1098,    1116,    1211)
z     <- c(       1,       1,       1,       1,       1,       1,       1,       1,
                  2,       2,       2,       2,       2,       2,       2,       2,
                  3,       3,       3,       3,       3,       3,       3,       3)
Tops <- c(    1156,    1250,    1156,    1187,    1187,    1187,    1156,    1156,
              1125,    1125,    1125,    1125,    1125,    1250,    1062,    1250,
              1250,    1250,    1250,    1250,    1250,    1250,    1250,    1250)
Mids <- c(    1125,    1187,    1125,    1156,    1156,    1156,    1140,    1140,
              1062,    1062,    1062,    1062,    1062,    1125,    1000,    1125,
              1187,    1187,    1187,    1187,    1187,    1187,    1187,    1187)
Lows <- c(    1093,    1125,    1093,    1125,    1125,    1125,    1125,    1125,
              1000,    1000,    1000,    1000,    1000,    1000,     937,    1000,
              1125,    1125,    1000,    1125,    1125,    1093,    1093,    1000)

df <- data.frame( cbind(z, dates, Actual, Tops, Mids, Lows))

dfm <- melt(df, id.vars=c("z", "dates", "Actual")) 
```

在第一个示例中，细蓝线是叠加在每个 z 轴的所有三个级别上的实际值。

```
p <- ggplot(data = dfm,
            aes(x = dates,
                y = value,
                group = variable,
                colour = variable)
            ) + geom_line(size = 3) +
                facet_grid(variable ~ z) +
                geom_point(aes(x = dates,
                               y = Actual),
                           colour = "steelblue",
                           size = 3) +
                               geom_line(aes(x = dates,
                                             y = Actual),
                                         colour = "steelblue",
                                         size = 1) +
                                             theme_bw()
p 
```

![折线图](../Images/6d50a29faa6ee1689875397fb8d3e044.png)

在第二组中，每个面板都有一个实际值与每个 z 轴中三个级别（上、中、下）的散点图。

```
p <- ggplot(data = dfm,
            aes(x = Actual,
                y = value,
                group = variable,
                colour = variable)
            ) + geom_point(size = 3) +
                geom_smooth() +
                facet_grid(variable ~ z) +
                theme_bw()
p 
```

![相关性](../Images/f5ac028cd5cdaefbbf4de5030f5f52ad.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-27T12:02:22.040

谢谢你，高登。R 实际上是我研究的一部分，我已经安装了，但在教程中做得还不够。除非它违反 StackOverFlow 规则，否则我会很高兴看到你的 R 代码。

我已经尝试过 2D 表示，但在许多情况下，Tops1/Tops2/Tops3 的值（对于 Lows 也是如此）将是相等的，因此这些线最终会相互重叠和模糊。这就是我尝试 3D 选项的原因。您对 3 个二维图形面板的想法是我没有探索过的一个很好的建议。

我会试一试，但我认为 3D 图会给我一个更清晰的画面，尤其是线框/网格图，它会显示值收敛，我会看到蓝点在 3D 空间中浮动线框上的线条开始形成高峰或低谷。我只是无法让它工作。

我尝试过调整[matplotlib 的线框示例](http://matplotlib.sourceforge.net/mpl_toolkits/mplot3d/tutorial.html#wireframe-plots)，但我得到的情节看起来根本不像线框。

这就是我从下面的代码中得到的![在此处输入图像描述](../Images/94ef0869e3256b55b6def12b578caadf.png)，只有两个数据元素（Tops1 和 Tops2）：

```
dates = [20110101,20110104,20110105,20110106,20110107,20110108,20110111,20110112]

zAxis0= [       0,       0,       0,       0,       0,       0,       0,       0]
Actual= [    1132,    1184,    1177,     950,    1066,    1098,    1116,    1211]

zAxis1= [       1,       1,       1,       1,       1,       1,       1,       1]
Tops1 = [    1156,    1250,    1156,    1187,    1187,    1187,    1156,    1156]
Mids1 = [    1125,    1187,    1125,    1156,    1156,    1156,    1140,    1140]
Lows1 = [    1093,    1125,    1093,    1125,    1125,    1125,    1125,    1125]

zAxis2= [       2,       2,       2,       2,       2,       2,       2,       2]
Tops2 = [    1125,    1125,    1125,    1125,    1125,    1250,    1062,    1250]
Mids2 = [    1062,    1062,    1062,    1062,    1062,    1125,    1000,    1125]
Lows2 = [    1000,    1000,    1000,    1000,    1000,    1000,     937,    1000]

zAxis3= [       3,       3,       3,       3,       3,       3,       3,       3]
Tops3 = [    1250,    1250,    1250,    1250,    1250,    1250,    1250,    1250]
Mids3 = [    1187,    1187,    1187,    1187,    1187,    1187,    1187,    1187]
Lows3 = [    1125,    1125,    1000,    1125,    1125,    1093,    1093,    1000]

import matplotlib.pyplot
from mpl_toolkits.mplot3d import Axes3D

fig = matplotlib.pyplot.figure()
ax  = fig.add_subplot(111, projection = '3d')

####example code from: http://matplotlib.sourceforge.net/mpl_toolkits/mplot3d/tutorial.html#wireframe-plots
#from mpl_toolkits.mplot3d import axes3d
#import matplotlib.pyplot as plt
#import numpy as np

#fig = plt.figure()
#ax = fig.add_subplot(111, projection='3d')
#X, Y, Z = axes3d.get_test_data(0.05)
#ax.plot_wireframe(X, Y, Z, rstride=10, cstride=10)

#plt.show()

X, Y, Z =  dates, Tops1, Tops2 
ax.plot_wireframe(X, Y, Z, rstride=1, cstride=1, color = 'g')

matplotlib.pyplot.show() 
```

# java - 调整大小时 JFrame 图像干净

> ID：10766706
> 
> 赞同：0
> 
> 时间：2012-05-26T13:35:17.697
> 
> 标签：java, swing, graphics, awt

我正在使用双缓冲区在屏幕上绘制随机方块，但是当我调整窗框大小时会自行清理。我该如何阻止这一切？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T13:37:28.210

在被告知时进行绘画。那将是`paint(Graphics)`a 的方法`JFrame`。

当然，最好是`JPanel`在框架中放置一个。然后，要覆盖的方法将变为`paintComponent(Graphics)`.

# java - 是否有检测方向字符的标准方法？

> ID：10766708
> 
> 赞同：1
> 
> 时间：2012-05-26T13:35:44.657
> 
> 标签：java, character

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T14:29:49.040

You could always go the other way round and use a whitelist rather than a blacklist:

```
sc.useDelimiter("[^\\p{L}]+"); 
```

# javascript - innerHTML 替代或用 div 替换 onchange 事件

> ID：10766711
> 
> 赞同：0
> 
> 时间：2012-05-26T13:36:16.650
> 
> 标签：javascript, dom-events, onchange, innerhtml

我遇到了一个问题，我需要你们帮助我。

我有一个 html 表单。它将国家、州、城市和密码（手动输入）发送到 php 文件以在 ajax 的帮助下进行处理。提交后，它会在文本框中返回密码值。

我想要的是，每当用户第二次更改密码的值时，表单都需要重置。

我所做的是，我像这样使用了innerHTML：

```
<form id="someid" method="post">
<input type="text" value="'.$_POST['pin-code'].'" onChange="resetpin();" /> 
```

重置表格是这样的：

```
function resetpin() {
document.getElementById('someid').innerHTML = Full HTML CODE FROM ABOVE FORM GOES HERE 
```

由于 .innerHTML 包含用于选择国家、城市、州的所有代码，这些代码在同一页面中重复了两次，因此这段代码变得难看。

所以我的想法是，我可以做这样的事情吗？

当用户第二次更改引脚时，表单需要重新设置。

```
onchange=showdiv("ID of the form and contents to be displayed") 
```

我可以这样做，这样我就不需要使用innerHTML ...

请帮帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T17:06:15.077

您的`resetpin`函数需要遍历表单的输入元素来重置它们的值（大概除了 pin 之外）。

# android - 为活动中的所有文本视图设置字体？

> ID：10766716
> 
> 赞同：52
> 
> 时间：2012-05-26T13:36:33.360
> 
> 标签：android, fonts, textview, typeface

是否可以为活动中的所有 TextView 设置字体？我可以使用以下方法为单个 textView 设置字体：

```
 TextView tv=(TextView)findViewById(R.id.textView1); 
    Typeface face=Typeface.createFromAsset(getAssets(), "font.ttf"); 
    tv.setTypeface(face); 
```

但我想一次更改所有 textViews，而不是为每个 textView 手动设置它，任何信息都将不胜感激！

* * *

## 回答 #1

> 赞同：93
> 
> 时间：2012-05-26T13:47:17.527

解决方案1:: 只需通过传递父视图作为参数来调用这些方法。

```
private void overrideFonts(final Context context, final View v) {
    try {
        if (v instanceof ViewGroup) {
            ViewGroup vg = (ViewGroup) v;
            for (int i = 0; i < vg.getChildCount(); i++) {
                View child = vg.getChildAt(i);
                overrideFonts(context, child);
         }
        } else if (v instanceof TextView ) {
            ((TextView) v).setTypeface(Typeface.createFromAsset(context.getAssets(), "font.ttf"));
        }
    } catch (Exception e) {
 }
 } 
```

解决方案 2:: 您可以使用自定义字体对 TextView 类进行子类化，并使用它来代替 textview。

```
public class MyTextView extends TextView {

    public MyTextView(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
        init();
    }

    public MyTextView(Context context, AttributeSet attrs) {
        super(context, attrs);
        init();
    }

    public MyTextView(Context context) {
        super(context);
        init();
    }

    private void init() {
        if (!isInEditMode()) {
            Typeface tf = Typeface.createFromAsset(getContext().getAssets(), "font.ttf");
            setTypeface(tf);
        }
    }

} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2016-02-12T12:29:03.653

The one from my personal collection:

```
private void setFontForContainer(ViewGroup contentLayout) {
    for (int i=0; i < contentLayout.getChildCount(); i++) {
        View view = contentLayout.getChildAt(i);
        if (view instanceof TextView)
            ((TextView)view).setTypeface(yourFont);
        else if (view instanceof ViewGroup)
            setFontForContainer((ViewGroup) view);
    }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-07-30T22:24:20.230

如果您正在寻找更通用的编程解决方案，我创建了一个静态类，可用于设置整个视图（活动 UI）的字体。请注意，我正在使用 Mono (C#)，但您可以使用 Java 轻松实现它。

You can pass this class a layout or a specific view that you want to customize. If you want to be super efficient you could implement it using the Singleton pattern.

```
public static class AndroidTypefaceUtility 
{
    static AndroidTypefaceUtility()
    {
    }
    //Refer to the code block beneath this one, to see how to create a typeface.
    public static void SetTypefaceOfView(View view, Typeface customTypeface)
    {
    if (customTypeface != null && view != null)
    {
            try
            {
                if (view is TextView)
                    (view as TextView).Typeface = customTypeface;
                else if (view is Button)
                    (view as Button).Typeface = customTypeface;
                else if (view is EditText)
                    (view as EditText).Typeface = customTypeface;
                else if (view is ViewGroup)
                    SetTypefaceOfViewGroup((view as ViewGroup), customTypeface);
                else
                    Console.Error.WriteLine("AndroidTypefaceUtility: {0} is type of {1} and does not have a typeface property", view.Id, typeof(View));
                }
                catch (Exception ex)
                {
                    Console.Error.WriteLine("AndroidTypefaceUtility threw:\n{0}\n{1}", ex.GetType(), ex.StackTrace);
                    throw ex;
                }
            }
            else
            {
                Console.Error.WriteLine("AndroidTypefaceUtility: customTypeface / view parameter should not be null");
            }
        }

        public static void SetTypefaceOfViewGroup(ViewGroup layout, Typeface customTypeface)
        {
            if (customTypeface != null && layout != null)
            {
                for (int i = 0; i < layout.ChildCount; i++)
                {
                    SetTypefaceOfView(layout.GetChildAt(i), customTypeface);
                }
            }
            else
            {
                Console.Error.WriteLine("AndroidTypefaceUtility: customTypeface / layout parameter should not be null");
            }
        }

    } 
```

In your activity you will need to create a Typeface object. I create mine in the OnCreate() using a .ttf file placed in my Resources/Assets/ directory. Make sure that the file is marked as an Android Asset in its' properties.

```
protected override void OnCreate(Bundle bundle)
{               
    ...
    LinearLayout rootLayout = (LinearLayout)FindViewById<LinearLayout>(Resource.Id.signInView_LinearLayout);
    Typeface allerTypeface = Typeface.CreateFromAsset(base.Assets,"Aller_Rg.ttf");
    AndroidTypefaceUtility.SetTypefaceOfViewGroup(rootLayout, allerTypeface);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-12-21T18:02:35.490

Extending Agarwal's answer... you can set regular, bold, italic, etc by switching the style of your TextView.

```
import android.content.Context;
import android.graphics.Typeface;
import android.util.AttributeSet;
import android.widget.TextView;

public class TextViewAsap extends TextView {

    public TextViewAsap(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
        init();
    }

    public TextViewAsap(Context context, AttributeSet attrs) {
        super(context, attrs);
        init();
    }

    public TextViewAsap(Context context) {
        super(context);
        init();
    }

    private void init() {
        if (!isInEditMode()) {
            Typeface tf = Typeface.DEFAULT;

            switch (getTypeface().getStyle()) {
                case Typeface.BOLD:
                    tf = Typeface.createFromAsset(getContext().getAssets(), "Fonts/Asap-Bold.ttf");
                    break;

                case Typeface.ITALIC:
                    tf = Typeface.createFromAsset(getContext().getAssets(), "Fonts/Asap-Italic.ttf");
                    break;

                case Typeface.BOLD_ITALIC:
                    tf = Typeface.createFromAsset(getContext().getAssets(), "Fonts/Asap-Italic.ttf");
                    break;

                default:
                    tf = Typeface.createFromAsset(getContext().getAssets(), "Fonts/Asap-Regular.ttf");
                    break;
            }

            setTypeface(tf);
        }
    }

} 
```

You can create your Assets folder like this: [![Create Assets](../Images/53259703a98a3c7f0b0163faf798bc83.png)](https://i.stack.imgur.com/kNzJ7.png)

And your Assets folder should look like this:

[![enter image description here](../Images/0ea0787ea6fa349344730da1ab1969c1.png)](https://i.stack.imgur.com/qXSB2.png)

Finally your TextView in xml should be a view of type TextViewAsap. Now it can use any style you coded...

```
<com.example.project.TextViewAsap
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="Example Text"
                android:textStyle="bold"/> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-09-03T05:20:39.373

**Best answers**

**1\. Setting custom font for one textView**

```
Typeface typeface = Typeface.createFromAsset(getContext().getAssets(), "Fonts/FontName.ttf");
textView.setTypeface (typeface); 
```

* * *

**2\. Setting custom font for all textViews**

Create a JavaClass like below

```
public class CustomFont extends android.support.v7.widget.AppCompatTextView {

    public CustomFont(Context context) {
        super(context);
        init();
    }

    public CustomFont(Context context, AttributeSet attrs) {
        super(context, attrs);
        init();
    }

    public CustomFont(Context context, AttributeSet attrs, int defStyleAttr) {
        super(context, attrs, defStyleAttr);
        init();
    }

    private void init() {
            Typeface tf = Typeface.createFromAsset(getContext().getAssets(), "fonts/FontName.ttf");
            setTypeface(tf);
    }
} 
```

And in your xml page

```
<packageName.javaClassName>

...

/> 
```

=>

```
 <com.mahdi.hossaini.app1.CustomFont
    android:id="@+id/TextView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:text="KEEP IT SIMPLE"
    android:textAlignment="center" /> 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-08-12T06:56:39.730

You can use the `Calligraphy` library which is available here:
[Android Calligraphy Library](https://github.com/chrisjenx/Calligraphy)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-07-05T21:10:23.767

## example of more "generic" way with use of reflection:

** it's presenting a idea of involving viewgroup children's method setTextSize(int,float) but you can adopt it as in the case of your question to setTypeFace()

```
 /**
 * change text size of view group children for given class
 * @param v - view group ( for example Layout/widget)
 * @param clazz  - class to override ( for example EditText, TextView )
 * @param newSize - new font size
 */
public static void overrideTextSize(final View v, Class<?> clazz, float newSize) {
    try {
        if (v instanceof ViewGroup) {
            ViewGroup vg = (ViewGroup) v;
            for (int i = 0; i < vg.getChildCount(); i++) {
                View child = vg.getChildAt(i);
                overrideTextSize(child, clazz, newSize);
            }
        } else if (clazz.isAssignableFrom(v.getClass())) {
            /** create array for params */
            Class<?>[] paramTypes = new Class[2];
            /** set param array */
            paramTypes[0] = int.class;  // unit
            paramTypes[1] = float.class; // size
            /** get method for given name and parameters list */
            Method method = v.getClass().getMethod("setTextSize",paramTypes);
            /** create array for arguments */
            Object arglist[] = new Object[2];
            /** set arguments array */
            arglist[0] = TypedValue.COMPLEX_UNIT_SP;
            arglist[1] = newSize;
            /** invoke method with arguments */
            method.invoke(v,arglist);
        }
    } catch (Exception e) {
        e.printStackTrace();
    }
} 
```

**CAUTION:**

using reflection should be very careful. Reflection class it's very "**exceptional**"

*   for example, you should check for the presence of annotations to prevent different kinds of problems. In the case of method SetTextSize () It is desirable to check the annotations *android.view.RemotableViewMethod*

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-03-25T16:36:44.217

You can use style inheritance.

Have every one of your TextViews in the activity declare a style via `android:textAppearence`, instead of manually `android:typeface`.

Then, have each one's style inherit the activity style, like so:

```
<TextView ...
      android:textAppearance="@style/item_name"/>
<TextView ...
      android:textAppearance="@style/item_details"/> 
```

in style.xml:

```
<style name="ActivityStyle">
    <item name="android:fontFamily">@font/font</item>
</style>
<style name="item_name" parent="ActivityStyle">
    <item name="android:textStyle">bold</item>
    <item name="android:textSize">20sp</item>
</style>
<style name="item_details" parent="ActivityStyle">
    <item name="android:textSize">15sp</item>
</style> 
```

# opengl - Window7 中的 OpenGL

> ID：10766719
> 
> 赞同：1
> 
> 时间：2012-05-26T13:37:22.577
> 
> 标签：opengl

我想使用 Visual Studio 2010 在 OpenGL 中编写代码。现在打开 opengl.org ，我被重定向到[http://user.xmission.com/~nate/glut.html](http://user.xmission.com/~nate/glut.html)；假设我使用的是 WindowsXP 和 Visual Studio 6 。此页面[http://user.xmission.com/~nate/glut/README-win32.txt](http://user.xmission.com/~nate/glut/README-win32.txt)中的说明可以追溯到 2001 年，而不是在当前上下文中。

长话短说，是否有任何教程可以帮助我使用 Visual Studio 2010 在 Windows 7 中使用 OpenGL 进行编程。

提前感谢您花时间回答我的问题。我是新手，所以请多多包涵。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T15:53:21.650

Window-7 下的 OpenGL 开发与在 Windows-NT 4、Windows 2k 和 Windows XP 下的开发完全相同。所有教程仍然有效。

您**不需要**OpenGL SDK。您需要的一切都随编译器一起提供。OpenGL 不是一个库，而是由驱动程序实现的 API。因此，请确保直接从 GPU 供应商的主页下载并安装最新的驱动程序（不要使用 Windows 随附的驱动程序，因为这些驱动程序对 OpenGL 的支持非常有限）。

由于您肯定想使用最新的 OpenGL 功能，因此您应该获得[GLEW 库](http://glew.sf.net)，它可以将所谓的“扩展”的加载过程简化几个数量级；强烈推荐。然后，您可以在 OpenGL 上下文激活后立即包含`GL/glew.h`并调用常规的 OpenGL 标头，而不是常规的 OpenGL 标头。`glewInit()`

你应该使用 FreeGLUT 或 OpenGLUT，而不是旧的、过时的、不再维护的 GLUT；如果完全使用 GLUT，因为你很快就会遇到它的限制。我建议改用 GLFW。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T13:46:01.257

1.  首先，将您的项目配置为与 opengl32.lib 等链接： [OpenGL config in Visual Studio 2010](https://stackoverflow.com/questions/3871130/opengl-config-in-visual-studio-2010)。
2.  查看一些 NeHe 教程[http://nehe.gamedev.net/](http://nehe.gamedev.net/)。

Visual Studio 2010 和 Windows 7 怎么样 - 我认为 API 与以前版本的 Visual Studio 和 Windows 没有显着差异（至少对于简单的示例）。

另请参阅：[OpenGL API 文档概述](http://www.opengl.org/documentation/)

# .net - 如何对使用 PetaPoco.Database 的服务进行单元测试

> ID：10766721
> 
> 赞同：8
> 
> 时间：2012-05-26T13:37:31.097
> 
> 标签：.net, unit-testing, mocking, rhino-mocks, petapoco

我在当前项目中使用[PetaPoco](http://www.toptensoftware.com/petapoco/)作为微型 ORM，我必须说我喜欢它。然而，我发现自己在简单的场景中苦苦挣扎——使用**PetaPoco.Database的单元测试服务**

```
public class MyService : IMyService
{
    private readonly PetaPoco.Database _database;

    public MyService(PetaPoco.Database database)
    {
        _database = database;
    }

    public void SaveSomething(MyObject myObject)
    {
        //...custom logic
        _database.Save(myObject);
    }
} 
```

我正在使用**IoC** (Castle.Windsor) 在需要的地方注入**IMyService**和**PetaPoco.Database**。

现在，当我尝试对我的服务进行单元测试时，我无法正确模拟存根**PetaPoco.Database**以验证**Save**方法是否被正确调用。我正在使用**NUnit**和**Rhino.Mocks**进行单元测试和模拟。

```
[TestFixture]
public class MyServiceTests
{ 

    private PetaPoco.Database _database;

    [SetUp] 
    public void SetUp()
    {
        _database = MockRepository.GenerateMock<Database>("");
    }

    [Test]
    public void ShouldProperlySaveSomething()
    {
        //Arrange
        var myObject = new MyObject();
        _database.Expect(db => db.Save(Arg<MyObject>.Is.Anything));
        var myService = new MyService(_database);

        //Act
        myService.SaveSomething(myObject);

        //Assert
        _database.VerifyAllExpectations();   
    }

} 
```

我知道如果我从**PetaPoco.Database**中提取一个接口并对其进行模拟，或者通过虚拟化我想要模拟的 PetaPoco 方法，这可以解决，但关键是我不想对**PetaPoco**进行更改一点也不。

这是可行的吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-28T08:36:00.017

我的分支位于此处：[https](https://github.com/schotime/PetaPoco) ://github.com/schotime/PetaPoco已经为 Database 类定义了一个接口。

还有我的新 Fork [https://github.com/schotime/NPoco](https://github.com/schotime/NPoco)或 NPoco on nuget 具有相同的 api。

我会使用其中之一。;)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T03:23:26.073

您已经使用 IMyService 交互抽象了与 PetaPoco.Database 的交互，那么为什么需要另一个抽象呢？使用您当前的方法，您应该能够使用 IMyService 测试与数据库的交互，例如

```
public class AuthenticationService 
{
    private IMyService myService;

    public AuthenticationService(IMyService service) 
    {
        ...
    }

    public void Authenticate(string username, string password)
    {
       var user = myService.GetUser(username); // <-- Hits the database
    }
} 
```

为了测试它，您只需使用 IMyService 的模拟/存根模拟交互。

现在关于您的原始解决方案，如果 PetaPoco 公共方法不是虚拟的，我会分叉它，修复代码并向他们发送拉取请求。否则，您的方法对我来说看起来不错。

# javascript - Drupal 7 中未定义 JS 函数

> ID：10766726
> 
> 赞同：0
> 
> 时间：2012-05-26T13:38:06.997
> 
> 标签：javascript, jquery, drupal

我在我的外部 .js 文件中添加了一个 javascript 函数，以在我的自定义模块中使用。该文件如下：

```
(function($){
var map;
var markersArray = [];
var selectedMarker;
//..... More functions
function deleteSelectedMarker(){
    alert('Eliminando Marcador');
    var urlCallbackElement=document.getElementById("map_deleted_marker_callback");
    var url=urlCallbackElement.title;

    $.ajax({
        type : "POST",
        url : url,
        success : function(data){
            reload_element(data);
        },
        error: function(xmlhttp) {
            alert('An error ocurred: '+xmlhttp.status);
        }
    });
    selectedMarker.setMap(null);
}

   })(jQuery); 
```

现在在我的模块表单中，我声明了一个执行该功能的按钮：

```
$form['panorama_delete_submit'] = array(
        '#type' => 'submit',
        '#value' => t('Eliminar Panorama'),
        '#prefix' => '<div id="deletepanorama-div">',
        '#sufix' =>'</div>',
        '#attributes' => array(
          'onclick' => "deleteSelectedMarker(); return false;")); 
```

但是，当单击按钮时，我得到**deleteSelectedMarker() is not defined 。**为什么会这样？有任何想法吗？。

# bash - 从文件中读取关联数组

> ID：10766732
> 
> 赞同：6
> 
> 时间：2012-05-26T13:39:03.137
> 
> 标签：bash

我有一个包含内容的文件：

```
( [datname]=template1 [datctype]=cs_CZ.utf-8 )
( [datname]=template0 [datctype]=cs_CZ.utf-8 )
( [datname]=postgres [datctype]=cs_CZ.utf-8 )
( [datname]=some\ stupid\ name [datctype]=cs_CZ.utf-8 )
( [datname]=jqerqwer,\ werwer [datctype]=cs_CZ.utf-8 ) 
```

我会阅读每一行并将上下文推送到关联数组变量。以下代码我没有成功：

```
(cat <<EOF
( [datname]=template1 [datctype]=cs_CZ.utf-8)
( [datname]=template0 [datctype]=cs_CZ.utf-8 )
EOF                      
) |                      
while read r             
do                       
   declare -A row=("$r") 
   echo ${row[datname]}  
done; 
```

我收到一个错误：

```
test3.sh: line 8: row: ( [datname]=template1 [datctype]=cs_CZ.utf-8 ): must use subscript when assigning associative array 
```

是否可以从文件中读取数组？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-26T14:32:22.913

进行以下两项更改：删除声明语句中的括号，并`read`与选项一起使用`-r`（禁用转义字符）：

```
while read -r line; do
   declare -A row="$line" 
    ...  
done 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-26T14:04:41.853

从您的语句中删除括号，`declare`因为它们已经在您的数据中。

```
declare -A row="$r" 
```

# php - jQuery 数据表：编辑按钮

> ID：10766745
> 
> 赞同：0
> 
> 时间：2012-05-26T13:41:11.097
> 
> 标签：php, javascript, jquery, mysql, edit

我将`Edit`按钮添加到我的`jQuery Datatable`. 当用户单击此按钮时，该行变为可编辑的。更新的行应该保存到 MySQL DB，但问题来了 - 更新的行没有保存到 DB。Firebug 不显示任何错误消息。有人可以帮我解决问题吗？

```
<script type="text/javascript" charset="utf-8">
         $(document).ready(function(){
              $('#newspaper-b').dataTable({
              "sPaginationType":"full_numbers",
              "aaSorting":[[3, "asc"]],
              "bJQueryUI":true
              });
             $(".edit_but").click(function() {
              var ID=$(this).attr('id');
              $("#first_"+ID).hide();
              $("#last_"+ID).hide();
              $("#first_input_"+ID).show();
              $("#last_input_"+ID).show();
          });
             $(".edit_tr").change(function() {
                  var ID=$(this).attr('id');
                  var first=$("#first_input_"+ID).val();
                  var last=$("#last_input_"+ID).val();
                  var dataString = 'flightNum='+ ID +'&from='+first+'&STADate='+last;
                  $("#first_"+ID).html('<img src="load.gif" />'); // Loading image
                  if(first.length>0&& last.length>0) {
                  $.ajax({
                      type: "POST",
                      url: "callpage.php?page=tables/edit.php",
                      data: dataString,
                      cache: false,
                      success: function(html) {
                              $("#first_"+ID).html(first);
                              $("#last_"+ID).html(last);
                      }
                  });
                  } else
                  {
                    alert('All fields must be filled out.');
                  }
                });
              // Edit input box click action
              $(".editbox").mouseup(function() {
                return false
              });

              // Outside click action
              $(document).mouseup(function() {
                  $(".editbox").hide();
                  $(".text").show();
              });

              $("tr").click(function(){
                $(this).addClass("selected").siblings().removeClass("selected");
              });
     });
</script>

                <table id="newspaper-b" border="0" cellspacing="2" cellpadding="2" width = "100%">
                    <thead>
                        <tr>
                            <th scope="col">Flt Num</th>
                            <th scope="col">From</th>
                            <th scope="col">STA Date</th>
                            <th scope="col"></th>
                        </tr>
                    </thead>
                    <tbody>
                        <?php foreach ($result1 as $row):
                            $flightNum=$row['flightNum'];
                            $from=$row['frm'];
                            $STADate=$row['STADate'];
                        ?>
                        <tr id="<?php echo $flightNum; ?>" class="edit_tr">
                                                        <td><?php echo $row['flightNum'];?></td>
                            <td class="edit_td">
                                <span id="first_<?php echo $flightNum; ?>" class="text">
                                    <?php echo $from;?>
                                </span>
                                <input type="text" value="<?php echo $from;?>" 
                                       class="editbox" id="first_input_<?php echo $flightNum; ?>"/>
                            </td>
                            <td class="edit_td">
                                <span id="last_<?php echo $flightNum; ?>" class="text">
                                    <?php echo $STADate; ?>
                                </span> 
                                <input type="text" value="<?php echo $STADate; ?>" 
                                       class="editbox" id="last_input_<?php echo $flightNum; ?>"/>
                            </td>
                                                        <td class="edit_td"><?php echo $row['pkID']; ?></td>
                            <td id="<?php echo $flightNum; ?>" class="edit_but">
                                <div>
                                    <img src='images/edit.png' alt='Edit' />
                                </div>
                            </td>
                        </tr>
                        <?php endforeach;?>
                    </tbody>
                </table> 
```

**编辑.php**

```
<?php
    include_once 'include/DatabaseConnector.php';
    if(isset($_POST['flightNum'])) {
        $flightnum=$_POST['flightNum'];
        $from=$_POST['from'];
        $STADate=$_POST['STADate'];
        $query = 'UPDATE flightschedule 
                  SET frm="'.$from.'",STADate="'.$STADate.'" 
                  WHERE flightNum="'.$flightNum.'"';
        DatabaseConnector::ExecuteQuery($query);
        echo '1';
    } else { 
        echo '0'; 
    }
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T14:33:09.043

尝试 $(".edit_tr input").change() 作为触发器。

更改事件仅限于输入、选择和文本区域，但您已尝试将其绑定到表格行。上面的代码会将其绑定到该类所在行内的任何输入。

# java - 在 web 服务中使用 JSON 时出现异常

> ID：10766748
> 
> 赞同：0
> 
> 时间：2012-05-26T13:41:35.900
> 
> 标签：java, json, web-services

我正在尝试构建一个简单的 Web 服务来连接到数据库，检索数据，将它们放入 json 对象中并发送代表对象的 json 字符串，这是代码

我正在使用 eclipse webservice 向导，在测试客户端时出现以下异常异常：java.lang.reflect.InvocationTargetException 消息：java.lang.reflect.InvocationTargetException 并且当我删除和 JSON 对象声明时异常消失，这是我的代码

```
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.sql.Statement;

import org.json.JSONArray;
import org.json.JSONObject;

public class Services {

    public String login(String email,String passwd){
    String JDBC_DRIVER = "com.mysql.jdbc.Driver";
    String DATABASE_URL = "jdbc:mysql://localhost/university";
    Connection connection;
    Statement statement;
    ResultSet resSet;
    //JSONArray resultarr=new JSONArray();
    JSONObject result=new JSONObject();

    boolean gotresult=false;
    try {
        Class.forName(JDBC_DRIVER);
        connection=DriverManager.getConnection(DATABASE_URL,"root","");
        statement=connection.createStatement();
        resSet=statement.executeQuery("select * from users where email='"+email+"' and pass='"+passwd+"'");
        while (resSet.next()){
            String fname=resSet.getString(3);
            String lname=resSet.getString(4);
            int rank=resSet.getInt(5);
            int id=resSet.getInt(1);
            result.put("id", id);
            result.put("fname", fname);
            result.put("lname", lname);
            result.put("rank", rank);

            gotresult=true;

        }
        if (!gotresult){
            result.put("error", "user not found");

        } 

    } catch (ClassNotFoundException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (SQLException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (Exception e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    return (result.toString());

} 
```

}

# android - 如何在 android 中将更新的 long/lat 发送到服务器？

> ID：10766749
> 
> 赞同：1
> 
> 时间：2012-05-26T13:41:39.723
> 
> 标签：android, android-service

在我的应用程序中，我想获取移动用户的更新位置，并且我想在一定时间的周期性间隔之后或在用户移动一定距离（比如 500 米）之后将其连续发送到服务器。我需要完成这些事情在背景中。我知道为此我必须实现服务类。但我不知道如何做到这一点。我做了一些工作。任何人都可以在这个问题上帮助我。我在服务课上做了以下事情。

```
public class BackGroundService extends Service implements LocationListener{

    public static final String Tag = BackGroundService.class.getName();
    LocationManager myLocationManager;
    Location myLocation;
    LocationListener myLocationListener;

    @Override
    public IBinder onBind(Intent arg0) {
        // TODO Auto-generated method stub
        return null;
    }

    public void OnCreate()
    {
        super.onCreate();
        Log.d(Tag, "Service Started");

        android.os.Debug.waitForDebugger();

        Criteria criteria = new Criteria();
        criteria.setPowerRequirement(Criteria.POWER_LOW);
        criteria.setAccuracy(Criteria.ACCURACY_LOW);

        String locationProvider = myLocationManager.getBestProvider(criteria, true);

        myLocationManager = (LocationManager)getSystemService(Context.LOCATION_SERVICE);
        myLocationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 1000*60*5, 500, myLocationListener);
        myLocation = myLocationManager.getLastKnownLocation(locationProvider);

    }

    public void onLocationChanged(Location location) {
        // TODO Auto-generated method stub
        longitude = location.getLongitude(); 
        latitude = location.getLatitude();

    }

    public void onProviderDisabled(String provider) {
        // TODO Auto-generated method stub
        Log.d(Tag, "Provider is disabled");
    }

    public void onProviderEnabled(String provider) {
        // TODO Auto-generated method stub
        Log.d(Tag, "Location Provider is enabled");
    }

    public void onStatusChanged(String provider, int status, Bundle extras) {
        // TODO Auto-generated method stub

    }
} 
```

从这里我想知道如何获取用户的当前纬度/经度并将其发送到服务器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T09:54:01.553

我的问题的答案是......

```
public class LocationService extends Service{

@Override
public void onCreate() {
    // TODO Auto-generated method stub
    super.onCreate();
    final LocationManager mlocmag = (LocationManager)getSystemService(Context.LOCATION_SERVICE);
    final LocationListener mlocList = new MyLocationList();
    final Location loc = mlocmag.getLastKnownLocation(LocationManager.GPS_PROVIDER);
    UpdateWithNewLocation(loc); // This method is used to get updated location. 
    mlocmag.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, mlocList);
}

@Override
public IBinder onBind(Intent arg0) {
    // TODO Auto-generated method stub
    return null;
}

@Override
public void onDestroy() {
    // TODO Auto-generated method stub
    super.onDestroy();
}

@Override
public void onStart(Intent intent, int startId) {
    // TODO Auto-generated method stub
    super.onStart(intent, startId);
}
 private void UpdateWithNewLocation(final Location loc) {
        // TODO Auto-generated method stub

        if(loc!= null)
        {
        final double lat =loc.getLatitude(); // Updated lat
        final double Long = loc.getLongitude(); // Updated long

        ConnectMySQL obj = new ConnectMySQL();
        obj.call(lat,Long); // Call this method when location is updated and save the data.

        }

        else 
        {
            String latLongStr = "No lat and longitude found";
              Toast.makeText(this, "Your location is "+latLongStr ,Toast.LENGTH_LONG).show();
        }

    }
    public class MyLocationList implements LocationListener
    {

        public void onLocationChanged(Location arg0) {
            // TODO Auto-generated method stub
            UpdateWithNewLocation(arg0);
        }

        public void onProviderDisabled(String provider) {
            // TODO Auto-generated method stub
            Toast.makeText(getApplicationContext(),"GPS Disable ", Toast.LENGTH_LONG).show();
        }

        public void onProviderEnabled(String provider) {
            // TODO Auto-generated method stub
            Toast.makeText(getApplicationContext(),"GPS enabled", Toast.LENGTH_LONG).show();
        }

        public void onStatusChanged(String provider, int status, Bundle extras) {
            // TODO Auto-generated method stub

        }

    } 
```

# javascript - document.write 和委托事件处理程序持久性

> ID：10766750
> 
> 赞同：2
> 
> 时间：2012-05-26T13:41:43.780
> 
> 标签：javascript

我只是在测试使用 JavaScript 用另一个页面替换整个页面，[我发现这个答案](https://stackoverflow.com/a/1236378/575527)是`document.write`. 至于为什么`document.write`，我需要替换整个 HTML，包括使用同一页面的脚本和样式。

它做了我想要的，但我似乎无法与我的事件处理程序保持一致。我的处理程序都`document`使用：

```
$(document).delegate(...); 
```

目前，我有奇怪的结果。[在我制作的小提琴中，](http://jsfiddle.net/wphzt/1/)它附加了一个处理程序。单击时，事件触发，重写页面，再次运行该函数 - 但它不附加处理程序。

但是在我的项目中，我正在执行相同的例程（`d.w()`，然后添加处理程序）。它确实重新附加一次并且处理程序工作，但是在执行第二个例程（仍在同一页面上）之后，它不再附加。

所以我的问题是：

*   使用时`d.w()`，是否会删除现有的处理程序`document`？
*   s之后是否`window`也一样？或者他们是否以某种方式“更新”`document``d.w()`
*   已经解析的脚本会留在内存中并在后续`d.w()`s 之后运行吗？还是它们也会被删除？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-26T14:07:43.520

（以下适用于谷歌浏览器）

只有`document`清除了，内存中的脚本仍然保持不变。您可以通过将某些内容设置为变量来轻松测试它，并在使用 清除文档后查看它是否存在`.open`。

旧的本地处理程序因此从文档中丢失，但 jQuery 仍然认为处理程序存在于它自己的事件模型中。您可以通过将日志编辑为：

```
console.log('patch', JSON.stringify($.cache )); 
```

jQuery 只为每个事件附加一个本机处理程序，因此如果您在`"click"`上注册了一个事件`document`，则附加 jQuery 的其他处理程序不会附加新的本机处理程序，而是将处理程序推入 jQuery 内部处理程序数组。

现在，由于`document.open`移除了原生处理程序，但没有清除 javascript，jQuery 仍然认为原生处理程序存在，并且进一步`.delegate`只进入 jQuery 内部处理程序数组。如果你用普通旧的替换你的处理程序，`document.onclick`你会看到它开始工作。

如果在 之前添加`$(document).unbind()`（或更健壮`$.cache = {};`的 ，但这是内部的，可能会更改），您也可以继续使用 jQuery `.delegate`，以便再次同步 jQuery。否则它不会，因为它不知道你打电话给`document.open`.

所以：

1.  是的
2.  它们仍然是相同的对象，可以通过保存引用并`document`在 a`.open`
3.  他们留在记忆中。

[http://jsfiddle.net/wphzt/4/](http://jsfiddle.net/wphzt/4/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T14:06:53.720

它从第二次开始停止工作的唯一原因是因为在你的函数中你已经写了

```
document.write('<span>'+(++i)+'</span>'); 
```

在这种情况下，下次文档没有委托函数来增加跨度值，而只有您在我上面突出显示的代码片段中编写的内容。因此，正如您所怀疑的那样，是的，它们也会被删除。希望这可以帮助。

# css - 指南针/css 淡入淡出边缘的边框？

> ID：10766754
> 
> 赞同：0
> 
> 时间：2012-05-26T13:42:01.253
> 
> 标签：css, compass-sass

我已经看到这种技术被大量使用了。就像说一个在两端淡出的分隔符​​边框（如stackoverflow标题的底部边框）。如何使用指南针实现这一目标？我搜索了他们的文档和谷歌，找不到任何如何做到这一点的例子。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T14:40:16.060

我从来没有使用过 Compass CSS，但是混合 CSS 和 SVG 怎么样？

**您的 SVG 文件：**

```
<svg width="100%" height="100%" version="1.1" xmlns="http://www.w3.org/2000/svg">
    <defs>
        <linearGradient id="div" x1="0%" y1="0%" x2="0%" y2="100%">
            <stop offset="0%" style="stop-color:rgb(255, 255, 225);stop-opacity:0"/>
            <stop offset="50%" style="stop-color:rgb(153,153,153);stop-opacity:1"/>
            <stop offset="100%" style="stop-color:rgb(255, 255, 225);stop-opacity:0"/>
        </linearGradient>
    </defs>

<rect x="0" y="0" width="100%" height="100%" fill="url(#div)" />
</svg> 
```

**CSS：**

```
div.separator
{
    width: 80%;
    height: 16px;
    background-image: url(gradient_file.svg);
} 
```

# java - 在黑莓中检测触摸屏？

> ID：10766755
> 
> 赞同：1
> 
> 时间：2012-05-26T13:42:16.013
> 
> 标签：java, blackberry, touchscreen

我正在开发一个包含缩放捏合功能的黑莓应用程序，但此功能适用于触摸屏设备。我的应用程序也适用于曲线类型的设备。

请让我知道“我是否可以通过编程方式检测设备是否为触摸屏”，以便我可以使我的应用程序对这两种类型都灵活。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T15:42:41.030

自 BlackBerry API 4.7.0 起添加了触控支持。检查[TouchEvent](http://www.blackberry.com/developers/docs/4.7.0api/net/rim/device/api/ui/TouchEvent.html)类的文档。

因此，如果您正在为在 4.7.0 或更高版本上运行的设备构建应用程序，则无需执行任何操作。您可以编写与触摸事件相关的任务，应用程序将在触摸和非触摸设备上运行。对于非触摸设备，与触摸事件相关的代码将不会执行。

但是，如果您需要支持运行在 4.7.0 以下的旧设备，则需要使用预处理器指令。

尝试以下链接以在您的应用程序上使用预处理器指令：

> [为多个黑莓设备编码 - 在 Eclipse 中使用预处理器指令](http://berrytutorials.blogspot.com/2009/11/coding-for-multiple-blackberry-devices.html)

其他相关链接：

> [为工作区创建预处理器指令](http://docs.blackberry.com/en/developers/deliverables/12002/Create_Workspace_Preprocessor_Directives_927626_11.jsp)
> 
> [指定预处理器指令](http://docs.blackberry.com/en/developers/deliverables/21065/Specifying_preprocessor_directives_657636_11.jsp)
> 
> [RIM 编译器支持的预处理器指令](https://stackoverflow.com/questions/1179129/preprocessor-directives-supported-by-the-rim-compiler)
> 
> [在 Eclipse 的 BlackBerry JDE 插件中使用预处理器指令？](https://stackoverflow.com/questions/1383277/using-preprocessor-directives-in-blackberry-jde-plugin-for-eclipse)
> 
> [如何 - 在 BlackBerry JDE 中使用预处理器](http://mobility-techtips.blogspot.com/2010/05/how-to-use-preprocessor-in-blackberry.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-26T21:16:42.697

如果您只需要支持 OS 4.7+ 设备，则不需要使用预处理器。您可以使用以下方式以编程方式测试触摸屏：

```
boolean isTouch = TouchScreen.isSupported(); 
```

Rupak 在他的回答中建议的可能还不够（只是添加触摸处理代码，非触摸设备将被忽略）。在您的情况下，如果您想支持缩放功能，您可能需要主动检测非触摸设备（使用上面的代码），并选择添加新的缩放`ButtonField`，甚至在支持的触摸设备上都不会显示捏手势。如果您不这样做，则非触摸设备将无法缩放，或者触摸设备的屏幕上会出现不必要的按钮。

但是，`TouchScreen`API 仅适用于 4.7+。如果您也需要在较旧的操作系统版本上运行相同的代码，可以使用其他方法：

```
boolean isTouch = (new Canvas(){protected void paint(Graphics graphics){}}).hasPointerEvents(); 
```

我的应用程序大多仍然支持 4.5+，甚至无法**编译**触摸处理代码。所以，我通常依靠这种预处理器宏来选择性地编译不同的代码。首先，在文件的顶部

```
//#preprocess 
```

然后，文件内的任何地方：

```
//#ifndef TOUCH_SCREEN
/*
//#endif

// code only for touch devices:
import net.rim.device.api.ui.TouchEvent;

//#ifndef TOUCH_SCREEN
*/
//#endif 
```

然后对于我将为部署到触摸屏设备而生成的构建，我添加了 TOUCH_SCREEN 预处理器标志。如果您不想为触摸和非触摸设备上传不同的应用程序包，只需使用 Java 代码 ( `isTouch`) 以编程方式检测触摸屏并使用预处理器*删除*无法在 4.7 之前编译的代码操作系统版本。

**注意：**这个有点令人困惑的“双重否定”预处理器逻辑**不是一个错误。** 这是为了适应在支持 BlackBerry 的 IDE（例如 JDE、Eclipse、Netbeans）中预处理器处理预处理的方式略有不同。不幸的是，预处理不是一个标准化的 J2ME 特性，所以它的实现有点不稳定。

# java - EntityManager 在持久化时返回 NullPointerException

> ID：10766760
> 
> 赞同：1
> 
> 时间：2012-05-26T13:42:43.340
> 
> 标签：java, ejb, entity, entitymanager

当我坚持一个“Joueur”（参见下面我的课程）时，我得到一个 NullPointerException，但我不知道为什么

```
em.persist(new Joueur("pseudo", "mdp", "mail")); 
```

这是我的“Joueur”课：

```
@Entity
@NamedQueries({
@NamedQuery(name = "trouverParMail", query = "SELECT * FROM Joueur j WHERE j.mail = :mail")})
public class Joueur implements Serializable {
private static final long serialVersionUID = 1L;

private String pseudo;
private String mdp;
private String mail;
private Integer nbParties;
private Integer nbPartiesGagnees;

public Joueur() {
}

public Joueur(String pseudo, String mdp, String mail)
{
    this.pseudo = pseudo;
    this.mdp = mdp;
    this.mail = mail;

    this.nbParties = 0;
    this.nbPartiesGagnees = 0;
}

@Id
public String getPseudo()
{
    return pseudo;
}

public String getMdp()
{
    return mdp;
}

public String getMail()
{
    return mail;
}

public Integer getNbParties()
{
    return nbParties;
}

public Integer getNbPartieGagnees()
{
    return nbPartiesGagnees;
}

public void setPseudo(String pseudo) {
    this.pseudo = pseudo;
}

public void setMdp(String mdp) {
    this.mdp = mdp;
}

public void setMail(String mail) {
    this.mail = mail;
}

public void setNbParties(Integer nbParties)
{
    this.nbParties = nbParties;
}

public void setNbPartiesGagnees(Integer nbPartiesGagnees)
{
    this.nbPartiesGagnees = nbPartiesGagnees;
} 
```

}

和错误堆栈：

```
java.lang.NullPointerException
at login.LoginBean.inscription(LoginBean.java:46)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.glassfish.ejb.security.application.EJBSecurityManager.runMethod(EJBSecurityManager.java:1052)
at org.glassfish.ejb.security.application.EJBSecurityManager.invoke(EJBSecurityManager.java:1124)
at com.sun.ejb.containers.BaseContainer.invokeBeanMethod(BaseContainer.java:5388)
at com.sun.ejb.EjbInvocation.invokeBeanMethod(EjbInvocation.java:619)
at com.sun.ejb.containers.interceptors.AroundInvokeChainImpl.invokeNext(InterceptorManager.java:800)
at com.sun.ejb.EjbInvocation.proceed(EjbInvocation.java:571)
at com.sun.ejb.containers.interceptors.SystemInterceptorProxy.doAround(SystemInterceptorProxy.java:162)
at com.sun.ejb.containers.interceptors.SystemInterceptorProxy.aroundInvoke(SystemInterceptorProxy.java:144)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at com.sun.ejb.containers.interceptors.AroundInvokeInterceptor.intercept(InterceptorManager.java:861)
at com.sun.ejb.containers.interceptors.AroundInvokeChainImpl.invokeNext(InterceptorManager.java:800)
at com.sun.ejb.containers.interceptors.InterceptorManager.intercept(InterceptorManager.java:370)
at com.sun.ejb.containers.BaseContainer.__intercept(BaseContainer.java:5360)
at com.sun.ejb.containers.BaseContainer.intercept(BaseContainer.java:5348)
at com.sun.ejb.containers.EJBObjectInvocationHandler.invoke(EJBObjectInvocationHandler.java:206)
at com.sun.ejb.containers.EJBObjectInvocationHandlerDelegate.invoke(EJBObjectInvocationHandlerDelegate.java:79)
at $Proxy255.inscription(Unknown Source)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at com.sun.corba.ee.impl.presentation.rmi.StubInvocationHandlerImpl.privateInvoke(StubInvocationHandlerImpl.java:241)
at com.sun.corba.ee.impl.presentation.rmi.StubInvocationHandlerImpl.invoke(StubInvocationHandlerImpl.java:152)
at com.sun.corba.ee.impl.presentation.rmi.codegen.CodegenStubBase.invoke(CodegenStubBase.java:227)
at login.__LoginRemote_Remote_DynamicStub.inscription(login/__LoginRemote_Remote_DynamicStub.java)
at login._LoginRemote_Wrapper.inscription(login/_LoginRemote_Wrapper.java)
at org.apache.jsp.inscription_jsp._jspService(inscription_jsp.java from :95)
at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:111)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:770)
at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:403)
at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:473)
at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:377)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:770)
at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1542)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:281)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161)
at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)
at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:849)
at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:746)
at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1045)
at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:228)
at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
at java.lang.Thread.run(Thread.java:680) 
```

你知道错误在哪里吗？Tkx

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-27T11:50:32.813

根据您给出的描述， NullPointerException 的起源在这一行：

```
em.persist(new Joueur("pseudo", "mdp", "mail")); 
```

唯一可能的原因是 em 为空。它为 null 的可能原因是 LoginBean 未能注入 EntityManager。如果是这样，也许 LoginBean 不是容器管理的组件？也许您忘记了@Stateless 注释？

如果这没有回答您的问题，您必须分享更多详细信息：

*   您如何获得对实体经理的参考？
*   它在其他课程中有效吗？
*   LoginBean 的代码是什么样的？

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2012-05-26T13:57:56.080

这是您的应用程序的架构问题。检查日志文件。

# html - 较少文件之间未定义 CSSless 混合

> ID：10766761
> 
> 赞同：3
> 
> 时间：2012-05-26T13:42:45.193
> 
> 标签：html, css, less, mixins

我下载了 CCSLess 和一个名为 elements.less 的 mixin 集合。当我尝试在我自己的 quickStart.less 文件中使用其中一个 mixin 时，它说：

> .gradient 在第 28 行第 5 列的 quickStart.less 中未定义：
> 
> { 。坡度;}

在控制台中，它以正确的顺序对其进行解析：首先解析 elements.less。

但我无法调用位于不同文件中的 mixin。

有谁知道为什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-26T13:47:59.483

您确定已正确导入 elements.less 吗？试着放

```
@import "elements" 
```

在文件的顶部。

# objective-c - 使单元格在 TableView 中出现和消失

> ID：10766763
> 
> 赞同：0
> 
> 时间：2012-05-26T13:43:48.350
> 
> 标签：objective-c, ios, cocoa-touch, uitableview

我制作了一个带有表格视图和数据源（核心数据）的应用程序。在这个表中，我将几个按日期排序的任务分组，并且我有这个分段控制。我希望表格仅加载晚于或等于今天日期的任务，当用户点击第二段时，我想显示所有任务，如果他点击第一段，则表格只能再次显示较晚日期的任务。

问题是：

1 - 我使用 fetchedResultsController 与 indexPath 关联来获取托管对象。

2 - 我使用 insertRowsAtIndexPaths:withRowAnimation: 和 deleteRowsAtIndexPaths:withRowAnimation: 方法使单元格出现和消失。这与我的 indexPaths 混淆了，如果我想在删除行后转到特定行的详细视图，它与不同的 indexPath 相关联。

这个问题是通过我所做的一种方法解决的，但我仍然有 indexPaths 和单元格的其他问题，而且在我看来，每个问题都已经解决了。

有一种简单的方法可以做到这一点吗？

我试图只是隐藏单元格而不是删除，它工作得很好，但是在隐藏单元格的地方是一个空白空间，如果有办法隐藏这些单元格并使非隐藏单元格占据空白空间我认为这将是最简单的方法。

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T13:51:56.367

set the height of the cell to 0 when it hides, and set the height back to the original value when it appears.

**TableViewController.h**

```
@interface TableViewController{
CGFloat cellHeight;
} 
```

**TableViewController.m**

```
- (void)cellHeightChange{
//if you need hide the cell then
cellHeight = 0;
cellNeedHide.hidden = YES;
//if you need hide the cell then
cellHeight = 44; // 44 is an example
cellNeedHide.hidden = NO;
}

- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath;
{
    switch (section) {
    // for example section 0 , row 0 is the cell you wanna hide.
    case 0:
        switch (row) {
            case 0:
            return cellHeight;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T13:58:47.033

当用户点击一个段时，在您的托管对象上执行一个新的获取请求，为您提供一个适当的数组（所有日期的数组，或者更大/相等的日期）。然后使用`reloadData`数据源中的这个新数组在 tableView 上使用。

或者

给要隐藏的单元格的高度为 0？

# c - AES mixColumns 错误

> ID：10766770
> 
> 赞同：2
> 
> 时间：2012-05-26T13:44:18.800
> 
> 标签：c, encryption, cryptography, aes

现在我正在学习密码学。所以，（为了练习和娱乐），我决定实施 AES。我被困在一点上（混合列是我的代码）：

```
typedef vector< vector<short> > vvector;

short mixBox[4][4] = 
{
    {0x02, 0x03, 0x01, 0x01},
    {0x01, 0x02, 0x03, 0x01},
    {0x01, 0x01, 0x02, 0x03},
    {0x03, 0x01, 0x01, 0x02}
};

short gfMultiply(short h1, short h2)
{
    //h1 can 0x01, 0x02 or 0x03
}

void mixColumns(vvector & v)
{
    vvector res(v.begin(), v.end());
    for(int i=0; i<4; i++)
        for(int j=0; j<4; j++)
            v[i][j] = 0x00;

    for(int i=0; i<4; i++)
        for(int j=0; j<4; j++)
            for(int k=0; k<4; k++)
                v[i][j] = v[i][j] ^ gfMultiply(mixBox[i][k], res[k][j]);
} 
```

从理论上讲，我理解乘法 gf(2^8)，但是对于实现算法，我有问题。我提到了这个[网站](http://en.wikipedia.org/wiki/Advanced_Encryption_Standard)。但是要么我无法理解某些观点，要么我做错了什么。在维基百科中，我读过这个：

> “乘法运算定义为：乘以1表示不变，乘以2表示左移，乘3表示左移然后与初始未移位的值进行异或。移位后，条件异或与如果移位值大于 0xFF，则应执行 0x1B。”

假设上面我已经实现了这个：

```
short gfMultiply(short h1, short h2)
{
    //h1 can 0x01, 0x02 or 0x03
    short r;
    if(h1==0x01)
        return h2;
    if(h1==0x02)
        r = (h2<<1);
    else
        r = (h2<<1)^h2;
    if(r>0xFF)
        r = r^0x1b;
    return r;
} 
```

但是当我测试时结果不正确。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T14:36:33.017

对不起，错误。我自己修好了，这是正确的：

```
short gfMultiply(short h1, short h2)
{
    //h1 can 0x01, 0x02 or 0x03
    short r;
    if(h1==0x01)
        return h2;
    if(h1==0x02)
    {
        r = (h2<<1);
        if(r>0xFF)
            r = r^0x11b;
    }
    else
    {
        r = (h2<<1);
        if(r>0xFF)
            r = r^0x11b;
        r = r^h2;
    }
    return r;
} 
```

# qt - 在 QGraphicsScene 上显示弹出菜单单击或右键单击

> ID：10766775
> 
> 赞同：9
> 
> 时间：2012-05-26T13:45:08.707
> 
> 标签：qt, contextmenu, qgraphicsscene, qmouseevent

当用户右键单击场景的空白部分时，有没有办法显示弹出窗口？

我是 Qt 的新手，我尝试过插槽和子类化，但无济于事。

没有这样的插槽，并且分别：

> “错误：'QMouseEvent' 尚未声明”

尝试实施`onMouseRelease`事件时。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-26T14:00:29.587

QGraphicsView 是用于显示 QGraphicsScene 内容的小部件。所以实现上下文菜单（弹出菜单）的正确位置是QGraphicsView。

你需要重新实现contextMenuEvent函数是你自己继承自QGraphicsView的类：

```
void YourGraphicsView::contextMenuEvent(QContextMenuEvent *event)
{
    QMenu menu(this);
    menu.addAction(...);
    menu.addAction(...);
    ...
    menu.exec(event->globalPos());
} 
```

另请参阅 Qt 的[菜单示例](http://qt-project.org/doc/qt-4.8/mainwindows-menus.html)。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-12-24T02:19:34.930

您可以重新实现该类的`contextMenuEvent`方法`QGraphicsScene`，这将使您能够访问场景坐标以及屏幕坐标（与 相反`QGraphicsView`，它也可以工作但没有此信息）：

```
void YourGraphicsScene::contextMenuEvent(QGraphicsSceneContextMenuEvent *event)
{
    // event->scenePos() is available
    QMenu menu(this);
    menu.addAction(...);
    menu.addAction(...);
    ...
    menu.exec(event->screenPos());
} 
```

# video - 除了使用（闪存）播放器进行视频传输之外的 VOD HTTP 实时流式传输

> ID：10766776
> 
> 赞同：0
> 
> 时间：2012-05-26T13:45:09.837
> 
> 标签：video, ffmpeg, jwplayer, http-live-streaming

我使用 Play 创建了一个 HTTP 实时流传输系统！框架和 FFMPEG。文件在不同的带宽上进行编码，并随后进行分段以传送到当前的 iOS 设备。

但是，我想扩展到网站上的嵌入式播放器（跨平台）和未来的 Android 设备。什么是最好的方法，没有太多的硬盘空间开销。我可以针对不同的比特率对 MP4 文件进行编码，并将它们保留为一个文件。

有没有办法可以在 Flash 播放器和 Android 设备上使用分段文件（使用 FFMPEG 分段功能）？这将使系统保持简单，因为 FFMPEG 似乎在创建片段方面做得很好（考虑到关键帧等）

我可以使用 JWPlayer，但我没有伪直播，所以不要认为它可以切换，搜索会很困难。这也可能意味着当来自 iOS 设备的请求到来时，我需要即时分段，这会增加一点延迟以及一些硬盘驱动器/处理器活动。为了克服伪实时流问题，我可以在启用它的情况下编辑对 Apache 服务器的任何请求，但会增加进一步的复杂性。没有分段文件的伪实时流似乎不是什么大问题，因为它们每个只有 10 分钟。

任何对前进有任何想法的人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T08:37:52.847

jwplayer 的开发版本支持 HLS。一个类似的问题：[是否可以在专为 iOS 设计的 Flash 平台中播放 HTTP Live Streaming 视频？（.m3u8 播放列表）](https://stackoverflow.com/questions/7357848/is-it-possible-to-play-http-live-streaming-video-within-flash-platform-designed)

Android 3.0 及更高版本也支持 HLS。然而，谷歌似乎经常打破它。

仅 HLS 服务对您来说可能就足够了。另一种选择是使用像[Wowza](http://www.wowza.com/)这样的服务器，它可以从单个输入提供 HLS、渐进式和闪存流。然而，它不是免费的。

# perl - 如何改进我的 Twitter 流式爬虫？

> ID：10766782
> 
> 赞同：2
> 
> 时间：2012-05-26T13:45:47.753
> 
> 标签：perl, twitter

我使用 Streaming API 做了一个 Twitter 爬虫。它是在 perl 中使用[Net:Twitter:Stream](http://cpan.uwinnipeg.ca/htdocs/Net-Twitter-Stream/Net/Twitter/Stream.html)编写的。我认为它正在检索一些推文。昨晚我离开它跟踪电视剧推文，我只收到了 30860 条推文。我认为这是一个低价值。你怎么看待这件事？还有其他我可以使用的 perl 库吗？我将我的部分代码放在这里，看看是否有问题。

谢谢大家

蒂亚戈

```
use JSON;
use Solr;
use Net::Twitter::Stream;
sub coletar{
    Net::Twitter::Stream->new ( user => $username, pass => $password,
                    callback => \&got_tweet,
                    connection_closed_cb => \&connection_closed,
                    track => $track); #$track has my string search;
    sub connection_closed {
        if ($count==0){
           sleep 10;
        }
        elsif($count==1){
           sleep 20;
        }
        else{
           sleep 240;
        }
        $count++;
        warn "Connection to Twitter closed";
        coletar();              #Recomeçando o download de tweets.
    }
    sub got_tweet {
        $cont=0;
        my ( $tweet, $json ) = @_; 
        # Here I save the tweet in my NoSQL database...
    }
}
coletar; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T22:12:56.717

关于 Twitter 流，有几件事情需要记住。首先，如果你的代码是一个瓶颈，传入推文的队列将会溢出，你的连接将会中断。所以它很可能不是你的代码。

Twitter 正在限制他们向“普通”消费者提供的推文数量，并对全流收费。因此，您可能会达到速率限制，但很难确定。

测试您收到的推文百分比的一种方法是设置第二个帐户，该帐户随机发送应该在您的过滤器中捕获的推文。然后计算在您的刮板中捕获的推文的百分比。如果不是 100%，您可能会受到速率限制。

# c - 在系统调用中获取 CPU 和内存信息

> ID：10766785
> 
> 赞同：1
> 
> 时间：2012-05-26T13:46:44.120
> 
> 标签：c, linux-kernel

我正在尝试在系统调用中获取当前进程的 CPU 和内存使用信息。我可以使用以下方法获取当前进程名称、pid 和 uid：

```
current->comm //process name
current->pid //process id
current_uid() //uid 
```

但这似乎就是全部。（我使用的是内核 3.2.0-24-generic）

正如我从[C 中当前进程的内存使用情况中](https://stackoverflow.com/questions/1558402/memory-usage-of-current-process-in-c)看到的那样，读取（vfs_read）和解析`/proc/pid/status`似乎是获取内存和 cpu 使用情况的唯一选择。

有没有更好的方法来获取这些信息，还是我走在正确的轨道上？

我还首先将我的代码作为内核模块进行测试，因为系统调用和内核模块都在内核空间中运行。这也是不好的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T09:18:21.527

`current->mm`是存储所有内存信息的地方。
`current->mm->mmap`是进程的内存映射列表，因此您可以对其进行迭代并查看在那里找到的内容。

`current->utime`并且`current->stime`可能有助于获取 CPU 信息。

# django - 我可以在 Django 模板的“if”中嵌套“for”吗？

> ID：10766790
> 
> 赞同：0
> 
> 时间：2012-05-26T13:47:14.940
> 
> 标签：django, for-loop, if-statement

刚刚学习 Django，我正在尝试创建一种情况，当模板具有布局时，它会列出它们，但如果没有，它不会而是会声明没有布局。

当我在没有布局的模板上仅使用“for layout...”语句时，我收到一条错误消息。

我发现我创建了一个“if”语句来首先检查页面是否有布局，如果没有，一个“else”语句说没有。

然而，最终结果是“for”似乎被完全忽略了，“else”条件适用于所有页面——无论它们是否具有相关的布局。

代码：

```
{% block header %}
    <h1>The name of this template? It's {{ boilerplate.name }}.</h1>
{% endblock %}

{% block content %}
    <p>&nbsp;</p>
    <p>{{ boilerplate.content }}</p>
    {% if layout in boilerplate.layouts %}
        {% for layout in boilerplate.layouts.all %}
        <p><a href="{{ layout.file.url }}">{{ layout.user }} -- {{ layout.name }} ({{ layout.file.size }})</a>
        {% endfor %}
    {% else %}
    <p>There are no layouts for this template.</p>
    {% endif %}
{% endblock %} 
```

显然我缺少一些东西。可能是非常简单的事情。我哪里错了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T13:53:55.283

你`{% if layout in boilerplate.layouts %}`是错的，但有一种比使用附加`if`标签更简单的方法来实现这一点。

[如文档所示](https://docs.djangoproject.com/en/dev/ref/templates/builtins/?from=olddocs#for-empty)，您可以使用可选`empty`标签来处理没有布局的情况。重写您的示例代码：

```
 {% for layout in boilerplate.layouts.all %}
    <p><a href="{{ layout.file.url }}">{{ layout.user }} -- {{ layout.name }} ({{ layout.file.size }})</a>
    {% empty %}
    <p>There are no layouts for this template.</p>
    {% endfor %} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T13:52:32.703

[https://docs.djangoproject.com/en/dev/ref/templates/builtins/?from=olddocs#for-empty](https://docs.djangoproject.com/en/dev/ref/templates/builtins/?from=olddocs#for-empty) 看这个标签

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-26T13:54:47.907

要回答您的问题，是的，您当然可以。从您描述问题的方式来看，我的猜测是您在`boilerplate.layouts`.

`boilerplate.layouts`看起来它是一个关系字段。因此，`in`仅对其进行检查可能还不够。在这种情况下，我建议在 shell 中或在视图中使用此代码并在那里查看结果，因为它将极大地帮助调试。

我的简单猜测是你需要做`layout in boilerplate.layouts.all`，但我对你的模型不够熟悉，所以猜测:)

# php - 在 phpmailer 中设置紧急选项

> ID：10766793
> 
> 赞同：16
> 
> 时间：2012-05-26T13:47:37.457
> 
> 标签：php, phpmailer

如何使用 phpmailer 发送邮件，其中设置了 MS Outlook 中的紧急选项？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-05-26T13:55:54.900

这是通过向出站电子邮件添加重要性和优先级标头来完成的。MS Outlook 使用它自己的一个特定的，而大多数其他邮件客户端使用`Importance`或`Priority`. `AddCustomHeader()`通过方法和`$Priority`属性使用 PHPMailer 添加它们。

```
// For most clients expecting the Priority header:
// 1 = High, 2 = Medium, 3 = Low
$yourMessage->Priority = 1;
// MS Outlook custom header
// May set to "Urgent" or "Highest" rather than "High"
$yourMessage->AddCustomHeader("X-MSMail-Priority: High");
// Not sure if Priority will also set the Importance header:
$yourMessage->AddCustomHeader("Importance: High"); 
```

请注意，邮件客户端可以自由地不实现/忽略这些标头，因此您不能完全依赖它们。此外，许多垃圾邮件过滤器会将它们用作识别垃圾邮件的危险信号。谨慎使用它们。

官方文档：

[PHPMailer 属性](https://phpmailer.github.io/PHPMailer/classes/PHPMailer.PHPMailer.PHPMailer.html#property_Priority)

[PHPMailer 方法](https://phpmailer.github.io/PHPMailer/classes/PHPMailer.PHPMailer.PHPMailer.html#method_addCustomHeader)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-04-06T10:17:08.967

**补充：**

这项工作很好，但一些垃圾邮件过滤器将使用优先级配置（设置哪个优先级无关紧要）来过滤垃圾邮件。

并且 php Mailer 将始终设置优先级标志。（默认为 3）

所以在我的 php Mailer 类中，我会评论这条线

`$this->HeaderLine('X-Priority', $this->Priority);`

也许像这样的解决方案：

> 类.phpmailer.php

`if($this->Priority > 0) $this->HeaderLine('X-Priority', $this->Priority);`

> 在你的 php 脚本中是这样的：

`$yourMessage->Priority = 0;`

使它有点可配置

# c# - WPF：如何将线程中文本框的文本传递到主窗口？

> ID：10766794
> 
> 赞同：0
> 
> 时间：2012-05-26T13:47:41.000
> 
> 标签：c#, wpf

主窗体使用线程技术创建的 chlid 窗体中有一个子文本框控件，我想实现这个功能： 在子窗体中，当我单击一个按钮（或 Enter-key-down）时，它通过文本到主窗口窗体。我能做些什么呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T14:02:00.620

一个快速的谷歌会给你带来大量的结果......

最好的办法可能是当您创建 Form2（子）时，有一个可用的公共方法，您可以在其中传递 Form1（父）的实例，然后在 Form1 上再次传递相同的方法，但传递的是字符串而不是 a 的实例形式。所以你最终会得到这样的东西：

表格 1（父级）：

```
private void Button1_Click_ShowChildForm(args..)
{
    Form2 frm2 = new Form2();
    frm2.Show();
    frm2.GetInstance(this);
}

public void PassBack(string var)
{
    TextBox1.Text = var;
} 
```

表格 2（儿童）：

```
private static Form1 _frm1;

public void GetInstance(Form1 Frm1)
{
    this._frm1 = Frm1;
}

private void Button2_Click_Close(args...)
{
   _frm1.PassBack(this.TextBox2.Text);
   this.Close();
} 
```

像这样的东西^^^应该可以解决问题。;)

注意。您可以稍微整理一下，如果您真的愿意，您可以重写 Form2 的 Show 方法以接受 Form1 的实例，而不是声明一个单独的方法，但您明白了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T15:40:50.693

您需要一种方法让*ChildWindow*将消息发送回*MainWindow*。以下示例应该很有用：

### 代码：

允许窗口之间“通信”的接口

```
public interface IListner
{
    void Send(String message);
} 
```

主窗口

```
public partial class MainWindow : Window, IListner
{
    public MainWindow()
    {
        InitializeComponent();
    }

    public void Send(string message)
    {
        // Read the message here.
        // If this code is called from different thread, use "Dispatcher.Invoke()"
    }

    public void OpenAnotherWindow()
    {
        // Since "MainWindow" implements "IListner", it can pass it's own instance to "ChildWindow"
        ChildWindow childWindow = new ChildWindow(this);
    }  
} 
```

子窗口：

```
public partial class ChildWindow : Window
{
    private IListner Listner { get; set; }

    public ChildWindow(IListner listner)
    {
        InitializeComponent();

        Listner = listner;
    }

    private void OnTextBoxTextChanged()
    {
        // This will call "Send" on "MainWindow"
        Listner.Send(TextBox1.Text);
    }
} 
```

# windows - Windows 7/8 驱动程序安装程序

> ID：10766797
> 
> 赞同：1
> 
> 时间：2012-05-26T13:47:55.157
> 
> 标签：windows, installation, driver

我有一个 .inf 文件和一个 .sys 文件以及几个 dll。要手动安装驱动程序，我会从提升的命令提示符处执行：

```
devcon install driver.inf HID\driver 
```

我想要一些关于如何为这个驱动程序制作安装程序的指示。谢谢。

PS：当涉及到与驱动程序相关的事情时，我是一个完全的菜鸟。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T19:59:03.783

我们可以使用基于 NSIS 的简单安装程序来复制文件并执行命令。此外，devcon 二进制文件不可再分发，但我们可以复制我们需要的部分 devcon 源代码，以创建特定的驱动程序安装程序二进制文件。

# java - 唯一随机数生成

> ID：10766801
> 
> 赞同：4
> 
> 时间：2012-05-26T13:48:32.403
> 
> 标签：java

我正在寻找使用java根据当前时间生成唯一随机数的方法。我是一名 C++ 程序员，在 C++ 中，我通常会随时间播种随机数，因此在每个特定时刻我都可以获得一个唯一的随机数，它的工作原理如下：

```
sRand((time)Null);
x=Rand(); 
```

在java中，我发现我可以使用相同的方法通过随时间播种随机数，如下所示：

```
Random rand = new Random(System.currentTimeMillis()); 
```

这是我使用在互联网上找到的所有方法在java中生成随机数的问题，但它们都不是真正随机的，它们的范围从负数到正数。例如：

```
Random rand = new Random(System.currentTimeMillis());
int x=rand.nextInt(); // or long or float ... 
```

我得到的是一系列不是真正的随机数，结果与 C++ 中的结果完全不同。

我只想知道在 java 中执行此操作的最佳方法是什么，有些类似于或非常接近 TAC 号码生成。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-26T13:53:31.773

Java's and C++ random numbers are both [*pseudorandom*](http://en.wikipedia.org/wiki/Pseudorandom_number_generator). Of course the algorithms are different, so the results are different too.

If you would like a random number generator that is strong enough to use for cryptography, you can use [`SecureRandom`](http://docs.oracle.com/javase/6/docs/api/java/security/SecureRandom.html): its interface is less intuitive, and it consumes more CPU, but the quality of its output is much higher than of a regular PRNG of Java,

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T14:37:01.070

如果你想生成一个*随机数*，最简单的方法是使用 new Random().nextInt()，也许将它包装在 Math.abs() 中以避免负数。如果你需要一个*唯一的数字*，你可以使用 UUID.randomUUID()。

# android - 在 ADT 17 之后，我如何使用 ActionBarSherlock 和 Android Support v4 库？

> ID：10766802
> 
> 赞同：1
> 
> 时间：2012-05-26T13:48:35.687
> 
> 标签：android, eclipse, actionbarsherlock

我的应用程序使用 ActionBarSherlock，并且一切正常（在遇到 Dalvik 错误 1 ​​等诸多麻烦之后）。现在我想使用 Android 支持 v4 库中的一个类，但找不到要导入的类。如果我将 v4 库（在 ABS 的属性下）设置为导出，则它可以工作，但随后我得到 Dalvik 错误 1（已添加）错误。

我如何使用这两个库？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-28T08:45:27.493

如果您仍然遇到 ABS 问题，这可能会有所帮助：

*   使用 ABS 和支持库从头开始创建一个新项目可以正常工作，但我现有的项目在升级 ADT 后将无法工作，无论如何（主要活动的 ClassNotFoundException）
*   我将最新版本的支持库添加到 ABS 库项目和引用项目中，但仍然发生异常
*   最后，我比较了正在工作的新项目和我现有项目的所有配置文件，发现以下差异：

现有项目：

```
<classpath>
  <classpathentry kind="src" path="src"/><classpathentry kind="src" path="gen"/>
  <classpathentry kind="con" path="com.android.ide.eclipse.adt.ANDROID_FRAMEWORK"/>  
  <classpathentry kind="con" path="com.android.ide.eclipse.adt.LIBRARIES"/>
  <classpathentry exported="true" kind="con" path="com.android.ide.eclipse.adt.DEPENDENCIES"/>
  <classpathentry kind="output" path="bin/classes"/>
</classpath> 
```

新创建（工作）项目：

```
<classpath>
  <classpathentry kind="src" path="src"/><classpathentry kind="src" path="gen"/>
  <classpathentry kind="con" path="com.android.ide.eclipse.adt.ANDROID_FRAMEWORK"/>
  <classpathentry exported="true" kind="con" path="com.android.ide.eclipse.adt.LIBRARIES"/>
  <classpathentry kind="con" path="com.android.ide.eclipse.adt.DEPENDENCIES"/>
  <classpathentry kind="output" path="bin/classes"/>
</classpath> 
```

请注意，该属性`exported`在 XML 文件的不同节点上设置为 true。在我现有的项目中调整 XML 文件为我解决了这个问题。

希望这可以帮助其他人不要像我一样浪费时间:)

编辑：代码格式

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-26T13:54:33.757

Since ActionBarSherlock itself depends on the Android Support package, merely adding ActionBarSherlock as a library project to your main project will give you access to the Android Support package automatically, without any modifications. You will see `android-support-v4.jar` in your Android Dependencies in the Package Explorer.

For example, [this sample project](https://github.com/commonsguy/cw-omnibus/tree/master/Notifications/DownloadNotify) references [this copy of ActionBarSherlock](https://github.com/commonsguy/cw-omnibus/tree/master/external/ActionBarSherlock) as a library project, and it uses `android.support.v4.app.NotificationCompat` without issue.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-26T15:42:22.280

发现是我的旧版本的 ViewPagerIndicator 导致了这个问题。更新到 5 月版本修复了它，但我不得不在我的适配器中进行一些小改动。

# rest - Basic REST design when dealing with database code tables?

> ID：10766806
> 
> 赞同：0
> 
> 时间：2012-05-26T13:49:38.830
> 
> 标签：rest

What i've read on REST it seems like they always use descriptions rather than IDs when returning REST responses. For example:

```
<order>
    <orderstatus>
        open
     </orderstatus>
     .....
     .....
</order> 
```

Anything wrong with using IDs? For example if "open" was {1}

```
<order>
     <orderstatus>
        1
     </orderstatus>
     .......
     ........
</order> 
```

I image you would have another url for your code tables to get the descriptions. Something like: `http://baseurl/codetables/orderstatus` & `http://baseurl/codetables/orderstatus/{id}`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T14:11:43.267

通常，ID 仅用于数据库以保持其规范化并提供唯一性。因此很少需要会公开 ID 的 REST API。因此，您可能需要重新检查设计以了解为什么会出现这种需求。

也就是说，如果您的用例不同并且 ID 实际上是需要在外部的，那么我认为 REST API 返回 ID 没有任何问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-03T10:42:19.947

The resource state is described or represented exactly to the same extent in both the XML payloads you have shown in the examples. One with the word 'open' is more friendly to human eye compared to number '1', hence requiring less explanation. Still I do not think one is more RESTful than the other option. Because arguably even the word 'open' should be well explained. The consumer should be able to understand what really is meant by open state. What are the possible state transitions from that point on? etc. etc.

Secondly `http://baseurl/codetables/orderstatus/{id}` or `http://baseurl/codetables/orderstatus/open` are not really different from REST URL point of view. But another point to consider is that do you really need to represent attribute references as REST resources? What is the benefit? Sounds like equivalent of schema definitions in the WSDL world to me.

# html - 为什么当我将 CSS 放入外部文件而不是内部文件时，它会停止工作 标签？

> ID：10766809
> 
> 赞同：0
> 
> 时间：2012-05-26T13:50:02.840
> 
> 标签：html, css, width

这有效（即输入滑块的宽度正确）：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
  "http://www.w3.org/TR/html4/loose.dtd">
<html>
  <head>
    <meta http-equiv="Content-type" content="text/html; charset=utf-8">
    <style type="text/css" media="screen">

      div {
        margin-bottom: 1em;
      }

      code {
        color: gray;
      }

      .slider {
        width: 250px;
        height: 25px; 
      }
    </style>
  </head>
  <body>

    <div>
      <code>/qc/lfo/1</code><br />
      <input class="slider" id="/qc/lfo/1" type="range" />
    </div>

    <div>
      <code>/range/1-3</code><br />
      <input class="slider" type="range" value="0" min="0" max="100" onchange="send('/range/1', parseInt(this.value))" /><br />
      <input class="slider" type="range" value="0" min="0" max="100" onchange="send('/range/2', parseInt(this.value))" /><br />
      <input class="slider" type="range" value="0" min="0" max="100" onchange="send('/range/3', parseInt(this.value))" />
    </div>
  </body>
</html> 
```

但是，当我从外部文件加载 CSS 时，宽度样式会丢失（但不会丢失其他样式）：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
  "http://www.w3.org/TR/html4/loose.dtd">
<html>
  <head>
    <meta http-equiv="Content-type" content="text/html; charset=utf-8">
    <link  rel="stylesheet" type="text/css" media="screen" href="websocket.css" /> 
  </head>
  <body>

    <div>
      <code>/qc/lfo/1</code><br />
      <input class="slider" id="/qc/lfo/1" type="range" />
    </div>

    <div>
      <code>/range/1-3</code><br />
      <input class="slider" type="range" value="0" min="0" max="100" onchange="send('/range/1', parseInt(this.value))" /><br />
      <input class="slider" type="range" value="0" min="0" max="100" onchange="send('/range/2', parseInt(this.value))" /><br />
      <input class="slider" type="range" value="0" min="0" max="100" onchange="send('/range/3', parseInt(this.value))" />
    </div>

  </body>
</html> 
```

使用 CSS 样式表文件：

```
div {
   margin-bottom: 1em;
}

code {
  color:maroon;
  font-family: Geneva
}

.slider {
  width: 200 px;
  height: 25px;
} 
```

滑块的宽度不正确，但其他样式的颜色；字体和边距正确。在 Coda 1.7 Coda 2.0 和 Safari 中预览 — 宽度都不正确。尝试过让父元素更宽和一堆其他随机的东西......我在这里没有得到什么？

* * *

哦，亲爱的，这可能是“200”和“px”之间的空格吗？我已经多次重新输入了这个 CSS 代码，我不能一直犯同样的错误吗？

* * *

欺骗我的另一件事是我确实拥有正确的 CSS（'px' 之前没有空格），当我在 Coda 中点击 Cmd+Opt+"B" 时，它没有在 Safari 中更新。只有当我重新加载页面时（Safari 中的 Cmd+"R" 看起来正确）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-26T13:53:28.110

写吧

```
width: 200px; 
```

代替

```
width: 200 px; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T13:53:38.873

```
code {
  color:maroon;
  font-family: Geneva
} 
```

有个 ”;” （分号）在“日内瓦”之后缺失。这可能是问题吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-26T13:58:52.180

根据我的经验，最常见的问题是您错误地引用了 css。

最简单的检查方法是打开网络检查器（例如在 chrome 中），然后转到控制台视图并检查是否有任何 404 错误。

# spss - SPSS combine count and compute

> ID：10766811
> 
> 赞同：0
> 
> 时间：2012-05-26T13:50:29.503
> 
> 标签：spss

Is something like this possible in spss? COMPUTE new_var = (COUNT var1 to var5 (1))*2 + (COUNT var1 to var5 (2))*3

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T19:37:11.573

未经测试的语法。

```
RECODE var1 to var5 (1 = 2) (2 = 3) (else = 0) into tmp1 to tmp5.
COMPUTE new_var = sum(tmp1 to tmp5). 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T14:15:21.393

自己找到了解决办法：

```
COMPUTE myindex= 0.
DO REPEAT v=var1 TO var5.
   DO IF v=1.
      COMPUTE myindex= myindex+2.
   END IF.
   DO IF v=2.
      COMPUTE myindex= myindex+3.
   END IF.
END REPEAT. 
```

# java - Java not detecting class?

> ID：10766813
> 
> 赞同：-2
> 
> 时间：2012-05-26T13:51:05.820
> 
> 标签：java

So, I'm quite new to Java. I've learned quite a bit for being new. But...of course I don't understand everything.

I have 2 classes. One named "Random" and one name "ananas" (Ananas is French for Pineapple)

Random is my main class...but for some reason my main class (Random) is not detecting ananas.

Here is my script in ananas:

```
public class ananas {
    public String a(String PackageA){
        PackageA = "This file shall remain TOP SECRET! The ultimate universal secret code is...'Ananas'"; 
        return PackageA;
    }
    public String b(String PackageB){
        PackageB = "File not created yet";
        return PackageB;
    }
    public String c(String PackageC){
        PackageC = "File not created  yet";
        return PackageC;
    }

} 
```

And here is my code in "Random":

```
import java.util.Scanner;
public class Random {
    public static void main(String ars[]){
        Scanner input = new Scanner(System.in);
        System.out.println("Welcome, Please enter the code: "); 
        String hey = input.nextLine();
            if(hey .equals("The sandman ate my dollar"))

                System.out.println("Welcome! Please choose one: A), B), C)");
                    Scanner input2 = new Scanner(System.in);
                    String heyy = input2.nextLine();
                    if(heyy .equals("A)"))
                        System.out.println("File  not created yet");

                    else if(heyy .equals("B)"))
                        System.out.println("Flid not created yet");

                    else if(heyy .equals("C)"))
                        System.out.println("File not created yet");
                    else 
                        System.out.println("Access Denied"); 
```

I tried to do: "ananas abc = new ananas();"

But even when I go to run my code, it only detects "Random"

Please help?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T14:00:39.527

如果这就是您在 Random 中拥有的所有代码，那么您永远不会构建 ananas 的实例。由于您在 Ananas 中的方法不是静态的，因此您需要创建该类的一个实例。

```
Ananas a = new Ananas(); // Construct new instance calling the default constructor

// Note that you have named your methods so that nobody can really understand what they do!
// Now, to call methods from this class, you would do it like this
//First a = the instance of ananas class we just built. The second a is the method in the class we wish to call. String is the parameter the method requires.
a.a(string); 
```

看起来您想根据用户提供的输入从类 Ananas 调用方法，您可以修改代码以执行此操作。

```
if(heyy.equals("A)"){
      a.a(yourString); // You need to create the ananas instance before this, and have a string called yourString that you pass on to the method
} 
```

在这种情况下，更好的解决方案是不要求 ananas 中的方法需要 String 参数。还要考虑命名该方法，以便它描述它在做什么！所需的更改就像这样简单：

```
public String a(){ // a could be something like 'getStringA'
        String PackageA = "This file shall remain TOP SECRET! The ultimate universal secret code is...'Ananas'"; 
        return PackageA;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T13:56:22.633

我在凤梨中没有看到构造函数。

它应该有类似的东西：

```
public ananas(){
System.out.println("I like pineapples");
} 
```

我希望这有帮助 ：）

# objective-c - How to change the NSPopover's arrow head position?

> ID：10766819
> 
> 赞同：10
> 
> 时间：2012-05-26T13:52:19.420
> 
> 标签：objective-c, xcode, macos, cocoa, popover

I have a NSPopover on my app but i want to change the position of the arrow head.
What i have:
![enter image description here](../Images/2c943571c2be7b66fca5a00d4537050a.png)

What i want:
![enter image description here](../Images/1190d03053aa3c5fe5361ffbc1f828ef.png)

As you can see in the second image the arrow head of the NSPopover is at the top. How can i do that?
my code:

```
[_popover showRelativeToRect:[sender bounds] ofView:sender preferredEdge:NSMaxXEdge]; 
```

Thank you!

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-26T14:17:54.803

不幸的是，这是不可能的`NSPopover`（从 10.7 开始）。您必须使用替代弹出框，例如出色的[`SFBPopovers`](https://github.com/sbooth/SFBPopovers).

# atk4 - Form with head and detail

> ID：10766821
> 
> 赞同：0
> 
> 时间：2012-05-26T13:52:53.600
> 
> 标签：atk4

some time ago I've asked for something similar, but now I'm picking up with this, so asking again.

Maybe this question can sound simple but it's not for me.

I have two tables:

```
header (id,date,field1,field2) // This has One entry on the table
detail (id,idheader,field1,field2) // This can have multiple entries on the table 
```

so header (1) ---> detail (N)

Which can be the best method to make a form and upate on the same $f->update() these two tables ?

Imagine that this can be a lot of things: an invoice, a budget, etc, etc

Very thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T13:33:21.453

看起来您的逻辑模型实际上位于两个表中。首先，决定哪个表是“主要的”，它可以是任何一种方式。我将通过创建以下模型使“标题”表成为主要表：

```
class Model_Header extends Model_Table {
    public $table='header';
    function init(){
        parent::init();

        $this->addField('date')->type('date');
        $this->addField('field1');
        $this->addField('field2');
    }
} 
```

接下来，您需要将它与您的第二个表连接起来并从中添加字段。当您调用 $model->join() 时，它会将“SQL_Relation”对象返回给您，该对象可用于添加其他字段并创建更多连接。您可以创建新对象或扩展现有对象。

```
class Model_Record extends Model_Table {
    public $table='header';
    function init(){
        parent::init();

        $this->addField('date')->type('date');
        $this->addField('field1');
        $this->addField('field2');

        $detail = $this->join('detail.idheader');
        $detail->addField('body');

        $details->addField('body_field1','field1');
    }
} 
```

因为两个表都定义了相同的字段并且模型必须有唯一的字段，所以我为 detail.field1 定义了一个新名称。我还明确指定了用于加入的字段（idheader）。接下来，您将像使用任何其他模型一样使用新模型：

```
$form=$this->add('Form');
$form->setModel('Model_Record');
$form->onSubmit(function($form){
    $form->update()->js()->successMessage('success!')->execute();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T10:51:06.353

传统的方法是使用带有“header”的网格并添加列扩展器，它显示带有“detail”的网格并且模型“detail”具有 setMasterField("idheader", $_GET["header_id"]);

例如

```
class page_test extends Page {
    function initMainPage(){
        $g = $this->add("Grid"); // or CRUD
        $g->setModel("header");
        $g->addColumn("expander", "details");
    }
    function page_details(){
        $this->api->stikcyGET("header_id");
        $g = $this->add("Grid"); // or CRUD
        $m = $this->add("Model_detail")->setMasterField("idheader", $_GET["header_id"]);
        $g->setModel($m);

    }
} 
```

未测试。

# xml - form validation of a text field

> ID：10766831
> 
> 赞同：-5
> 
> 时间：2012-05-26T13:53:44.430
> 
> 标签：xml

Check format of a text field to be XX-XXXX

first two digits represent any value between 01-99 are acceptable values hyphen; last 4 digits represent any value between 0001 to 1,000

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T14:21:31.133

尝试在未来更具体......我想我的问题是正确的，但我不确定。

试一试！不要忘记将“字段名”更改为您的字段名的实际名称。

```
 <validator type="requiredstring">
        <param name="fieldname">someThing</param>
        <message>Number Required.</message>
   </validator>

   <validator type="regex">
        <param name="fieldname">someThing</param>
        <param name="expression"><![CDATA[\d{2}-\d{4}]></param>
        <message>Number must be entered as 99-9999.</message>
   </validator> 
```

**这仅适用于格式化，不适用于第二个数字的最大值。**

查看[范围 1-1000 的正则表达式](https://stackoverflow.com/questions/4484168/regex-for-range-1-1000) 和[http://www.codeproject.com/Articles/206330/Learning-REGEX-regular-expression-in-the-most-easi](http://www.codeproject.com/Articles/206330/Learning-REGEX-regular-expression-in-the-most-easi)

# symfony1 - In a unit test using Propel in symfony, how can I reset the connection after an expected Exception

> ID：10766837
> 
> 赞同：-1
> 
> 时间：2012-05-26T13:54:03.930
> 
> 标签：symfony1, symfony-1.4, propel

Working in symfony 1.4, with Propel for my ORM (not sure how to find the version of Propel).

In a unit test of an object with a unique constraint in the database, I test for the exception being caught:

```
try {
  $room1a->save();
  // Shouldn't have saved, so shouldn't have an id
  $t->ok(!$room1a->getId(), "Failed to save duplicate room");
} catch (Exception $e) {
  $t->ok($e, "Threw exception on creating duplicate room");
} 
```

but if I then correct the duplication and try again, thus

```
$room1a->setCode('1a');
$room1a->save();
$t->ok($room1a->getId()), "Saved this time"); 
```

I get "Unable to get sequence id":

```
 PropelException: Unable to get sequence id. [wrapped:                
  SQLSTATE[25P02]: In failed sql transaction: 7 ERROR:  current        
  transaction is aborted, commands ignored until end of transaction    
  block]                                                               
  (in                                                                  
  lib/vendor/symfony/lib/plugins/sfPropelPlugin/lib/vendor/propel/util/BasePeer.php
  on line 264) 
```

I've tried recreating the object (i.e. a new Room object) and saving it, with the same result; it appears that there is a state in the connection (?) which needs resetting.

The only way round I've found is to roll back the transaction and begin a new one.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T21:34:50.880

我找到了答案：[事务](http://www.propelorm.org/documentation/06-transactions.html)应该是这样工作的。

我将单元测试脚本包装在事务中，以免更改数据库，而且我没有意识到引发约束错误会中止事务。

对我来说有点烦人，因为我必须开始一个新事务并再次设置数据，以进行后续测试。

# c++ - 将 UTF-8 格式的文件转换为 UTF-16

> ID：10766838
> 
> 赞同：3
> 
> 时间：2012-05-26T13:54:20.540
> 
> 标签：c++, windows, unicode, utf-8, utf-16

C++ 中的程序需要读取以 utf-8 编码的文件。不幸的是，使用 char* 它无法获得扩展字符（☺☻♥♦•◘ 等等），并且 wchar_t* 会错误地解释它们。我管理它的算法是：

1）创建一个新文件

2) 将其命名为[原名]Utf-16

3）将原文件复制到新文件，同时进行转换

4) 提取数据。

5) 不再需要时删除此临时文件。

我被困在3），是否有像“FileUTF8toUTF16”这样的功能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T14:03:39.260

也许这会对您有所帮助： [Unicode UTF-16 和 UTF-8 在 C++/Win32 中的转换 | C++](http://msmvps.com/blogs/gdicanio/archive/2010/01/04/conversion-between-unicode-utf-16-and-utf-8-in-c-win32.aspx)

代码：

```
//////////////////////////////////////////////////////////////////////////////
//
// *** Routines to convert between Unicode UTF-8 and Unicode UTF-16 ***
//
// By Giovanni Dicanio <giovanni.dicanio AT gmail.com>
//
// Last update: 2010, January 2nd
//
//
// These routines use ::MultiByteToWideChar and ::WideCharToMultiByte
// Win32 API functions to convert between Unicode UTF-8 and UTF-16.
//
// UTF-16 strings are stored in instances of CStringW.
// UTF-8 strings are stored in instances of CStringA.
//
// On error, the conversion routines use AtlThrow to signal the
// error condition.
//
// If input string pointers are NULL, empty strings are returned.
//
//
// Prefixes used in these routines:
// --------------------------------
//
//  - cch  : count of characters (CHAR's or WCHAR's)
//  - cb   : count of bytes
//  - psz  : pointer to a NUL-terminated string (CHAR* or WCHAR*)
//  - str  : instance of CString(A/W) class
//
//
//
// Useful Web References:
// ----------------------
//
// WideCharToMultiByte Function
// http://msdn.microsoft.com/en-us/library/dd374130.aspx
//
// MultiByteToWideChar Function
// http://msdn.microsoft.com/en-us/library/dd319072.aspx
//
// AtlThrow
// http://msdn.microsoft.com/en-us/library/z325eyx0.aspx
//
//
// Developed on VC9 (Visual Studio 2008 SP1)
//
//
//////////////////////////////////////////////////////////////////////////////

namespace UTF8Util
{

//----------------------------------------------------------------------------
// FUNCTION: ConvertUTF8ToUTF16
// DESC: Converts Unicode UTF-8 text to Unicode UTF-16 (Windows default).
//----------------------------------------------------------------------------
CStringW ConvertUTF8ToUTF16( __in const CHAR * pszTextUTF8 )
{
    //
    // Special case of NULL or empty input string
    //
    if ( (pszTextUTF8 == NULL) || (*pszTextUTF8 == '\0') )
    {
        // Return empty string
        return L"";
    }

    //
    // Consider CHAR's count corresponding to total input string length,
    // including end-of-string (\0) character
    //
    const size_t cchUTF8Max = INT_MAX - 1;
    size_t cchUTF8;
    HRESULT hr = ::StringCchLengthA( pszTextUTF8, cchUTF8Max, &cchUTF8 );
    if ( FAILED( hr ) )
    {
        AtlThrow( hr );
    }

    // Consider also terminating \0
    ++cchUTF8;

    // Convert to 'int' for use with MultiByteToWideChar API
    int cbUTF8 = static_cast<int>( cchUTF8 );

    //
    // Get size of destination UTF-16 buffer, in WCHAR's
    //
    int cchUTF16 = ::MultiByteToWideChar(
        CP_UTF8,                // convert from UTF-8
        MB_ERR_INVALID_CHARS,   // error on invalid chars
        pszTextUTF8,            // source UTF-8 string
        cbUTF8,                 // total length of source UTF-8 string,
                                // in CHAR's (= bytes), including end-of-string \0
        NULL,                   // unused - no conversion done in this step
        0                       // request size of destination buffer, in WCHAR's
        );
    ATLASSERT( cchUTF16 != 0 );
    if ( cchUTF16 == 0 )
    {
        AtlThrowLastWin32();
    }

    //
    // Allocate destination buffer to store UTF-16 string
    //
    CStringW strUTF16;
    WCHAR * pszUTF16 = strUTF16.GetBuffer( cchUTF16 );

    //
    // Do the conversion from UTF-8 to UTF-16
    //
    int result = ::MultiByteToWideChar(
        CP_UTF8,                // convert from UTF-8
        MB_ERR_INVALID_CHARS,   // error on invalid chars
        pszTextUTF8,            // source UTF-8 string
        cbUTF8,                 // total length of source UTF-8 string,
                                // in CHAR's (= bytes), including end-of-string \0
        pszUTF16,               // destination buffer
        cchUTF16                // size of destination buffer, in WCHAR's
        );
    ATLASSERT( result != 0 );
    if ( result == 0 )
    {
        AtlThrowLastWin32();
    }

    // Release internal CString buffer
    strUTF16.ReleaseBuffer();

    // Return resulting UTF16 string
    return strUTF16;
}

//----------------------------------------------------------------------------
// FUNCTION: ConvertUTF16ToUTF8
// DESC: Converts Unicode UTF-16 (Windows default) text to Unicode UTF-8.
//----------------------------------------------------------------------------
CStringA ConvertUTF16ToUTF8( __in const WCHAR * pszTextUTF16 )
{
    //
    // Special case of NULL or empty input string
    //
    if ( (pszTextUTF16 == NULL) || (*pszTextUTF16 == L'\0') )
    {
        // Return empty string
        return "";
    }

    //
    // Consider WCHAR's count corresponding to total input string length,
    // including end-of-string (L'\0') character.
    //
    const size_t cchUTF16Max = INT_MAX - 1;
    size_t cchUTF16;
    HRESULT hr = ::StringCchLengthW( pszTextUTF16, cchUTF16Max, &cchUTF16 );
    if ( FAILED( hr ) )
    {
        AtlThrow( hr );
    }

    // Consider also terminating \0
    ++cchUTF16;

    //
    // WC_ERR_INVALID_CHARS flag is set to fail if invalid input character
    // is encountered.
    // This flag is supported on Windows Vista and later.
    // Don't use it on Windows XP and previous.
    //
#if (WINVER >= 0x0600)
    DWORD dwConversionFlags = WC_ERR_INVALID_CHARS;
#else
    DWORD dwConversionFlags = 0;
#endif

    //
    // Get size of destination UTF-8 buffer, in CHAR's (= bytes)
    //
    int cbUTF8 = ::WideCharToMultiByte(
        CP_UTF8,                // convert to UTF-8
        dwConversionFlags,      // specify conversion behavior
        pszTextUTF16,           // source UTF-16 string
        static_cast<int>( cchUTF16 ),   // total source string length, in WCHAR's,
                                        // including end-of-string \0
        NULL,                   // unused - no conversion required in this step
        0,                      // request buffer size
        NULL, NULL              // unused
        );
    ATLASSERT( cbUTF8 != 0 );
    if ( cbUTF8 == 0 )
    {
        AtlThrowLastWin32();
    }

    //
    // Allocate destination buffer for UTF-8 string
    //
    CStringA strUTF8;
    int cchUTF8 = cbUTF8; // sizeof(CHAR) = 1 byte
    CHAR * pszUTF8 = strUTF8.GetBuffer( cchUTF8 );

    //
    // Do the conversion from UTF-16 to UTF-8
    //
    int result = ::WideCharToMultiByte(
        CP_UTF8,                // convert to UTF-8
        dwConversionFlags,      // specify conversion behavior
        pszTextUTF16,           // source UTF-16 string
        static_cast<int>( cchUTF16 ),   // total source string length, in WCHAR's,
                                        // including end-of-string \0
        pszUTF8,                // destination buffer
        cbUTF8,                 // destination buffer size, in bytes
        NULL, NULL              // unused
        ); 
    ATLASSERT( result != 0 );
    if ( result == 0 )
    {
        AtlThrowLastWin32();
    }

    // Release internal CString buffer
    strUTF8.ReleaseBuffer();

    // Return resulting UTF-8 string
    return strUTF8;
}

} // namespace UTF8Util

////////////////////////////////////////////////////////////////////////////// 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-26T14:09:58.073

这就是我使用的

```
int nLenWide = MultiByteToWideChar(CP_UTF8, 0, (LPCSTR)(pData + nOffset), 
        (int)(nDataLen - nOffset), NULL, 0);
if (MultiByteToWideChar(CP_UTF8, 0, (LPCSTR)(pData + nOffset), 
        (int)(nDataLen - nOffset), 
        str.GetBuffer(nLenWide), nLenWide) != nLenWide)
{
    str.ReleaseBuffer(0);
    ASSERT(false);
    return str;
}
str.ReleaseBuffer(nLenWide);
return str; 
```

其中`pData`是一个`BYTE`指向实际 utf-8 数据的指针，`nOffset`通常是 3（BOM）。

# solr - SIRen N-Tuples 结果

> ID：10766844
> 
> 赞同：1
> 
> 时间：2012-05-26T13:55:01.477
> 
> 标签：solr, lucene, n-triples, siren

SIREn 是否可以在 SolrDocument 中使用 N-Tuples 值（按名称）？我想在没有响应字符串的正则表达式的情况下解析查询结果。

就像是：

```
SolrDocument.getField("ntriple","name"); // get "Jim Maple" value for '<http:/example.org/schema/name> predicate 
```

更多细节：

```
//N-Tuple from the IndexQueryNTriple.java file

 private final String[] doc1 = 

 { "http:/example.org/person/jim",

 "<http:/example.org/person/jim> <http:/example.org/schema/type> <http:/example.org
  /schema/Person> .\n" + 

  "<http:/example.org/person/jim> <http:/example.org/schema/name> \"Jim Maple\" .\n" 
 };

 final SolrInputDocument document1 = new SolrInputDocument();

document1.addField("url", doc1[0]);
document1.addField("ntriple", doc1[1]);
add(document1); 

final SolrQuery query2 = new SolrQuery();
query2.setQueryType("siren");
query2.set(SirenParams.NQ, "* <name> 'john AND gartner'"); // ntriple query
final QueryResponse response2 = server.query(query2);
for (SolrDocument d : response2.getResults()) {

///?????? want to get 'name' value from the long N-Triple string with ALL values
 d.getField("ntriple","name"); // get "Jim Maple" value

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T15:12:48.483

我找到了 NxParser 库来解析所需的 N-Tuples。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T12:06:02.957

不幸的是，NxParser 对它可以解析的三元组的格式有一些限制

# java - java 初学者 - 是一个通过引用调用的数组列表

> ID：10766849
> 
> 赞同：4
> 
> 时间：2012-05-26T13:55:40.760
> 
> 标签：java, arraylist

在 java 程序中，我希望通过调用单个函数来修改 3 个数组列表变量。

我是否正确地认为如果我将这 3 个数组列表作为参数传递给该函数，那么所有 3 个都可以在函数内进行修改？或者我是否必须在单独的函数中修改每个数组列表，并将该数组列表指定为返回值，以确保它被修改。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-26T13:58:40.370

> 我是否正确地认为如果我将这 3 个数组列表作为参数传递给该函数，那么所有 3 个都可以在函数内进行修改？

一句话，是的。

值得注意的是，您问题标题中的“通过引用”术语并不完全正确。在 Java 中，一切都是*按值*传递的，包括对象引用。事实上，这三个`ArrayList`参数*本身*就是引用，这使得对列表所做的任何更改都传播回调用者。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T13:58:47.873

是的，您可以将 3 `ArrayList`s 作为参数传递给该方法。它们被视为任何其他对象。

至于是否返回另一个`ArrayList`，这在很大程度上取决于方法必须做什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-13T15:34:05.280

以下代码类似于“通过引用调用”：

```
package arrayList;

import java.util.ArrayList;

public class CallByValueReference {

class myObject {
    String str;

    public myObject(String str) {
        super();
        this.str = str;
    }

    public String getStr() {
        return str;
    }

    public void setStr(String str) {
        this.str = str;
    }

    @Override
    public String toString() {
        return "myObject [str=" + str + "]";
    }   
}

ArrayList<myObject> strArray = new ArrayList<myObject>();

public static void main(String[] args) {
    new CallByValueReference().test();
}

private void test() {
    strArray.add(new myObject("entry1") );
    System.out.println(strArray);
    strArray.get(0).setStr("entry2");
    System.out.println(strArray);
}
} 
```

输出是：

```
[myObject [str=entry1]]
[myObject [str=entry2]] 
```

# java - java - 如何知道java中的对象在运行时支持克隆？

> ID：10766850
> 
> 赞同：0
> 
> 时间：2012-05-26T13:55:51.867
> 
> 标签：java, reflection, clone, copy-constructor

如何知道java中的对象是否支持克隆？或者它有副本 C'tor ？在运行时

请举个例子，谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T14:02:47.937

检查是否支持克隆检查

```
if(myObject instanceof Cloneable) {

} 
```

以上将告诉您该对象是否实现了 Cloneable 并且是否支持默认克隆。

但是在某些情况下，类不支持克隆方法，但它们为您提供了一些 API，这些 API 将创建实例的副本，对于此类方法，您必须查看 API 文档或源代码。

更新：为什么 instanceof 检查不能保证成功克隆：

```
if(myObject instanceof Cloneable) { 
    Object obj = myObject.clone(); 
} 
```

1->考虑下面的代码片段

```
public class IImplementCloneableButThrowException implements Cloneable{

    //Javadoc has a separate section for Exception, implementation like 
    //this and should clearly specify the condition in which 
    //CloneNotSupportedException will be thrown. 
    public Object clone() throws CloneNotSupportedException {
        //I implement but still wont clone, may be in future will allow myself to be cloned
        throw new CloneNotSupportedException("Sorry I cannot be cloned!");
    }
} 
```

2-> 考虑下面的第二种情况

```
public class IImplementCloneableButCloneIsHidden implements Cloneable{
    //Ouch either no clone method or one which is Object class but that
    //has protected access modifier, which means I cannot call unless 
    //I extend it, too bad
} 
```

因此，尽管`instanceof`检查会正确通过，但要么`clone`不能被调用，要么`clone`会抛出异常。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-26T13:57:49.667

所有支持的对象`clone`都应该实现[`Cloneable`](http://docs.oracle.com/javase/7/docs/api/java/lang/Cloneable.html).

# javascript - 脚本只运行一次

> ID：10766852
> 
> 赞同：1
> 
> 时间：2012-05-26T13:55:58.373
> 
> 标签：javascript

这是一个脚本，[应该]刷新页面，查找价格，如果价格低于用户指定的价格，则购买。如果价格更高，它会刷新页面并再次执行，直到找到价格：

```
var tags = document.getElementsByTagName('b');
var price;
var lp;
var sp;
var setSnipe = false;
var loaded = false;
for (i = 0; i < tags.length; i++) {
    console.log(tags[i].innerHTML);
    if( tags[i].innerHTML.indexOf('R$') !== -1) {
        if (i==5){
            var price = tags[i].innerHTML.match(/\d+/)[0];
            setSnipe = confirm("Lowest price: R$" + price +". Set a sniper?");
        } else {
        }
    } else {
    }
}
if (setSnipe == true) {
    lp = prompt("Snipe Price?");
    refresh();
}

function refresh() {
    location.reload(true);
    setTimeout('checkSnipe()', 3000);
}

function checkSnipe() {
    var tagss = document.getElementsByTagName('b');
    for (i = 0; i < 6; i++) {
        console.log(tagss[i].innerHTML);
        if( tagss[i].innerHTML.indexOf('R$') !== -1) {
            if (i==5){
                var price = tagss[i].innerHTML.match(/\d+/)[0];
                price = Number(price);
                if (price<=lp){
                    alert("Snipe Found!");
                } else {
                    alert("No snipe");
                    refresh();
                }
            }
        }
    }
} 
```

由于某种原因，它只运行一次然后停止。有什么建议/帮助吗？

谢谢，亚历克斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T13:57:47.547

刷新时，您的代码不再存在。您有一个带有新代码的新页面。当您了解这一点时，很明显不存在的代码将无法运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T14:11:11.130

即使用户刷新浏览器，也要尝试使您的代码保持不变。另外，再次检查你的代码，它可能有一些逻辑错误（你可能在 if-else 部分放错了大括号）。

# assembly - 为什么地址寄存器后增量是 (A0)+

> ID：10766855
> 
> 赞同：2
> 
> 时间：2012-05-26T13:57:02.370
> 
> 标签：assembly, 68000

基本上用 68000 的汇编语言来后增量一个地址寄存器，你必须这样做：

```
(A0)+ 
```

例子

```
MOVE (A0)+,D0 
```

这将移动到`D0`地址指向的值，`A0`并且也会增加`A0`1。

考虑到如果`(A0)`postincrement`A0`语法是：

```
(A0+) 
```

? 或者我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T14:03:27.067

```
MOVE.L (A1)+,D0 ; increments A1 by 4, because it is long operation
                ; and 4 is size of long 
```

我认为当前的后增量语法指向此功能，而 `(A1+)`更多表明 A1 始终递增一。

看：使用后增量的[间接寻址](http://en.wikibooks.org/wiki/68000_Assembly#Indirect_addressing_with_postincrement)

# java - 从按钮调用时鼠标事件等待冻结

> ID：10766863
> 
> 赞同：0
> 
> 时间：2012-05-26T13:58:24.567
> 
> 标签：java, multithreading, swing, awt, sleep

我有一个方法可以显示一个透明的窗口覆盖，这样我就可以通过点击来指示一个矩形屏幕区域的角点。

```
public Point getClickPoint(){
        JFrame frame = new JFrame("");
        MyMouseListener mouseL = new MyMouseListener();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setUndecorated(true);
        makeTranslucent(frame, Float.valueOf(0.40f));
        frame.setSize(toolkit.getScreenSize());
        frame.setVisible(true);

      frame.addMouseListener(mouseL);
        while(!mouseL.done){
            try {
                Thread.sleep(4);
                } catch (InterruptedException e) {
                e.printStackTrace();
            }
        }
 } 
```

当我以正常方式调用它时，它工作正常，但如果我通过按下按钮调用它，它就会挂起，不注册点击并最终冻结。

```
 Button.addActionListener(new ActionListener() { 
        public void actionPerformed(ActionEvent actionEvent) {
        getClickPoint();
    }
} 
```

这与动作侦听器最初调用它的事实有关吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T14:05:28.523

您正在阻止[*Event Dispatch Thread*](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/dispatch.html)。由于该`actionPerformed`方法将在 EDT 上调用，因此您的 while 循环`getClickPoint`将阻止 EDT 处理任何事件（包括您正在等待的鼠标事件），从而导致您的程序无响应。

如果您需要执行耗时的任务（例如阻塞），请查看[`SwingWorker`](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/worker.html).

# php - HTTP 错误 401.2 - 未经授权

> ID：10766869
> 
> 赞同：0
> 
> 时间：2012-05-26T13:59:09.557
> 
> 标签：php, jquery, codeigniter

我正在使用 curl 在 php 中调用 Web 服务。但是在服务器端位置更改了我在 IIS7 中的站点并使其安全。

所以现在我在调用网络服务时遇到了问题。发生以下错误：

> HTTP 错误 401.2 - 未经授权
> 
> 由于身份验证标头无效，您无权查看此页面。

我不知道如何传递用户凭据。请告诉问题是什么以及将如何处理。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T17:05:04.067

添加这些选项。希望对您有所帮助 =)

```
curl_setopt($ch, CURLOPT_HTTPAUTH, CURLAUTH_ANY);
curl_setopt($ch, CURLOPT_USERPWD, $username.':'.$password); 
```

**[[参考](http://php.net/manual/en/function.curl-setopt.php)]**：`CURLOPT_HTTPAUTH`

> 要使用的 HTTP 身份验证方法。选项有：CURLAUTH_BASIC、CURLAUTH_DIGEST、CURLAUTH_GSSNEGOTIATE、CURLAUTH_NTLM、CURLAUTH_ANY 和 CURLAUTH_ANYSAFE。
> 
> 按位 | (or) 运算符可用于组合多个方法。如果这样做了，cURL 将轮询服务器以查看它支持的方法并选择最好的方法。
> 
> CURLAUTH_ANY 是 CURLAUTH_BASIC | 的别名。CURLAUTH_DIGEST | CURLAUTH_GSSNEGOTIATE | CURLAUTH_NTLM。
> 
> CURLAUTH_ANYSAFE 是 CURLAUTH_DIGEST 的别名 | CURLAUTH_GSSNEGOTIATE | CURLAUTH_NTLM。

# php - 正确下载存储文件的 PHP 标头

> ID：10766874
> 
> 赞同：0
> 
> 时间：2012-05-26T14:00:10.183
> 
> 标签：php, mysql

我已经使用这种编码风格在我的 MYSQL 数据库中放置了一个文件。我很确定它已正确存储

```
if(isset($_POST['upload']) && $_FILES['userfile']['size'] > 0)
{
$fileName = $_FILES['userfile']['name'];
$tmpName  = $_FILES['userfile']['tmp_name'];
$fileSize = $_FILES['userfile']['size'];
$fileType = $_FILES['userfile']['type'];

$fp      = fopen($tmpName, 'r');
$content = fread($fp, filesize($tmpName));
$content = addslashes($content);
fclose($fp);

if(!get_magic_quotes_gpc())
{
    $fileName = addslashes($fileName);
} 
```

但是我无法从数据库下载它，而且我的标题是错误的。

```
$resumename = get_the_author_meta('resumename', $current_user->ID); 
$resumetype = get_the_author_meta('resumetype', $current_user->ID); 
$resumesize = get_the_author_meta('resumesize', $current_user->ID); 
$content = get_the_author_meta('resumecontent', $current_user->ID);

header("Content-Length: $resumesize");
header("Content-Type: $resumetype");
header("Content-Disposition: attachment; filename=$resumename");

echo($content); 
```

目前它返回一个损坏的页面文件（它使用标题加载实际页面数据，而不是文件数据）。

任何人都知道为此使用的正确标题吗？我试过@readfile，它更糟。文件类型主要是 doc、pdf、rtf。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T14:15:06.210

```
 header("Content-Description: File Transfer");
 header("Content-Disposition: attachment; filename=$resumename");
 header("Content-Type: $MIME_Type"); //you can use application/pdf for PDF
 header("Content-Transfer-Encoding: binary"); 
```

# c - 函数定义 C

> ID：10766875
> 
> 赞同：10
> 
> 时间：2012-05-26T14:00:10.897
> 
> 标签：c, function

> **可能重复：**
> [C 函数语法，在参数列表之后声明的参数类型](https://stackoverflow.com/questions/1585390/c-function-syntax-parameter-types-declared-after-parameter-list)

**我在“专家 C 编程**”中看到了以下函数定义语法

```
int compare(s1, s2)
    char * s1, *s2;
{
    while (*s1++ == *s2) {
        if (*s2++ == 0) return (0);
    }
    return (*--s1 - *s2);
} 
```

上述定义如何有效？它编译和运行完美，没有任何错误。

我对函数定义的以下语法更满意

```
int compare(char * s1,char *s2)
{
    while (*s1++ == *s2) {
        if (*s2++ == 0) return (0);
    }
    return (*--s1 - *s2);
} 
```

并且没有在哪里看到书中给出的内容（在我的大学或其他地方学习 C 时），任何人都可以对书中给出的内容有所了解。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-26T14:06:26.623

这个话题之前在[这里](https://stackoverflow.com/a/1631781/201359)讨论过，它是函数定义的“Kernighan and Ritchie 风格”。

如今，您应该更喜欢第二种语法，出于向后兼容性的原因，某些编译器仍然接受第一种语法，但出于所有实际目的，它应该被视为*已弃用。*

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-26T14:04:03.240

这是 ANSI 之前的语法，有时称为[K&R C](http://en.wikipedia.org/wiki/K&R_C#KRC)。它是 C 语言的原始语法。

# git - 如何解决“致命：索引包失败”？

> ID：10766876
> 
> 赞同：2
> 
> 时间：2012-05-26T14:00:11.367
> 
> 标签：git

我跑：

```
 ira@ira-K42JP:~/code/ros/sam_slam$ git clone       git://github.com/ethz-asl/ros-mapping.git ethzasl_mapping
  Initialized empty Git repository in       /home/ira/code/ros/sam_slam/ethzasl_mapping/.git/      
  remote: Counting objects: 784, done.
  remote: Compressing objects: 100% (238/238), done.
  fatal: The remote end hung up unexpectedlyiB | 18 KiB/s   
  fatal: early EOFs:  31% (244/784), 52.00 KiB | 18 KiB/s   
  fatal: index-pack failed
  ira@ira-K42JP:~/code/ros/sam_slam$
  ira@ira-K42JP:~/code/ros/sam_slam$ git clone       git://github.com/ethz-asl/ros-mapping.git ethzasl_mapping
  Initialized empty Git repository in       /home/ira/code/ros/sam_slam/ethzasl_mapping/.git/
  remote: Counting objects: 784, done.
  remote: Compressing objects: 100% (238/238), done.
  fatal: The remote end hung up unexpectedlyiB | 18 KiB/s   
  fatal: early EOFs:  31% (244/784), 52.00 KiB | 18 KiB/s   
  fatal: index-pack failed
  ira@ira-K42JP:~/code/ros/sam_slam$ 
```

如何解决？

谢谢~

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T18:54:19.737

除非您使用不寻常的协议组合（如“ [Git 检查问题`[fatal: early EOFs]`](https://stackoverflow.com/questions/2505644/git-checking-out-problem-fatal-early-eofs)”），否则这是 GitHub 服务器出现问题的标志。

查看它的[GitHub 系统状态页面](https://status.github.com/)：

```
May 25, 2012 – minor interruption occurred

06:44 am PST
All systems are back to normal.

06:30 am PST
Investigating intermittent 'remote end hung up unexpectedly' errors 
```

它似乎有一些残留的副作用，在 GitHub 提到的官方“解决时间”之后仍然可以看到。

# android - Android 客户端的后端服务器 - 可以验证客户是否购买了应用程序？

> ID：10766879
> 
> 赞同：0
> 
> 时间：2012-05-26T14:00:21.200
> 
> 标签：android

场景：服务器为 Android 客户端提供一个 rest-api。不涉及订阅，但客户必须为应用程序付费才能访问休息服务。

Google 是否提供 API 供后端服务器用来查询 Google 给定客户端是否已为应用程序付费？也许通过从客户端转发安装/购买 ID？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T14:44:32.483

当您在 GooglePlay 上发布 android 应用程序时，如果它是付费应用程序，您可以在代码[LVL](http://developer.android.com/guide/market/licensing/index.html)库中使用外部 jar 来验证许可证。

# macos - mac dns 查找行为不端

> ID：10766881
> 
> 赞同：1
> 
> 时间：2012-05-26T14:00:29.717
> 
> 标签：macos, terminal, dns, lookup, ping

有一个新的 Mac，现在我正在尝试安装/更新一些东西。我得到的第一个问题是从内部脚本/程序（例如 git 或 ruby​​ gem）发出的 http 请求不起作用。我将在下面举例说明我使用的解决方法，因为它比任何解释都更好地说明了这个问题。任何帮助表示赞赏！

```
Leonardos-MacBook-Air:~ leo$ git clone git://github.com/sstephenson/rbenv.git .rbenv
Cloning into '.rbenv'...
fatal: Unable to look up github.com (port 9418) (nodename nor servname provided, or not known)
# it can not find github.com

Leonardos-MacBook-Air:~ leo$ ping github.com
PING github.com (207.97.227.239): 56 data bytes
64 bytes from 207.97.227.239: icmp_seq=0 ttl=50 time=104.279 ms
64 bytes from 207.97.227.239: icmp_seq=1 ttl=50 time=105.658 ms
# it finds it in a ping, curl, or even a browser. this shows that it's not a network (proxy) issue

NOT SO ELEGANT SOLUTION
Leonardos-MacBook-Air:~ leo$ cat /etc/hosts
##
# Host Database
#
# localhost is used to configure the loopback interface
# when the system is booting.  Do not change this entry.
##
127.0.0.1   localhost
255.255.255.255 broadcasthost
::1             localhost 
fe80::1%lo0 localhost
207.97.227.239  github.com
# I added this last line in the /etc/hosts file

Leonardos-MacBook-Air:~ leo$ git clone git://github.com/sstephenson/rbenv.git .rbenv
Cloning into '.rbenv'...
remote: Counting objects: 1040, done.
remote: Compressing objects: 100% (419/419), done.
remote: Total 1040 (delta 650), reused 959 (delta 593)
Receiving objects: 100% (1040/1040), 138.25 KiB, done.
Resolving deltas: 100% (650/650), done.
# now it works 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-27T12:41:35.597

我该死的 ISP 的 DNS 服务器是这里的罪魁祸首。将我的路由器的 DNS 设置更改为[Google 的公共 DNS](https://developers.google.com/speed/public-dns/)后。

# python - Django项目-开发和生产

> ID：10766883
> 
> 赞同：3
> 
> 时间：2012-05-26T14:00:39.607
> 
> 标签：python, django

我是 Django 部署的新手，我想知道在生产服务器上部署 django 项目之前我们需要考虑哪些步骤。我不想要有关服务器详细设置的信息。但是我需要有关开发环境与生产环境的相似程度的信息。因为我遇到了一些神秘的错误，其中没有问题的开发服务器的代码在生产服务器中不起作用。您可以看到我在[django views 之前发布的问题 - 502 bad gateway](https://stackoverflow.com/questions/10728862/django-views-502-bad-gateway)仍然没有得到解决方案。

我们是否需要在生产服务器中拥有与开发服务器中相同的软件版本？我认为我应该对这类问题投一些反对票，但我希望我能得到答案。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T19:33:18.797

如果您使用某个版本的 python 包在开发中创建应用程序，那么应该在生产中使用这些相同的版本。您可以使用`virtualenv`来实现这一点。 [http://www.doughellmann.com/projects/virtualenvwrapper/](http://www.doughellmann.com/projects/virtualenvwrapper/)

使用 virtualenv 将允许您分离应用程序及其版本的所有包依赖项。您将能够创建一个包含所有软件包和版本列表的文本文件，并将它们轻松安装到任何服务器上的虚拟环境中。这确保了生产中的包与开发中的包完全相同。

您的开发环境和生产环境应该完全相同，除非您可能希望使用内置的开发服务器。它是轻量级和单线程的，使调试应用程序变得轻而易举。这意味着您很可能还需要一个暂存环境，以便您可以在将用于生产的同一台服务器上测试您的应用程序。

部署很困难。幸运的是，python 有一些非常棒的工具，可以很容易地复制环境。这些包括`virtualenv`和`fabric`

# geocoding - 地理编码到语言

> ID：10766888
> 
> 赞同：2
> 
> 时间：2012-05-26T14:01:08.093
> 
> 标签：geocoding, latitude-longitude

我正在寻找一个 API，它返回给定坐标所在国家/地区使用的语言。有谁知道这样的东西是否存在？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T13:15:00.853

[`ws.geonames.org`](http://ws.geonames.org)提供这项服务。这是一些使用 JavaScript 和 jQuery 的示例代码，但您可以使用任何语言访问它：

```
var lookupLanguagesWithGeonames = function(lat, lng) {

    $.getJSON('http://ws.geonames.org/countryCode', {
        lat: lat,
        lng: lng,
        type: 'JSON'
    }, function(results) {
        if (results.countryCode) {
            alert('coordinates: ' + lat + ', ' + lng + '\n' + 'languages: ' + results.languages);
        } else {
            alert('coordinates: ' + lat + ', ' + lng + '\n' + 'failed: ' + results.status.value + ' ' + results.status.message);
        }
    });
};

// Coordinates that fall within a country
lookupLanguagesWithGeonames(43.7534932, 28.5743187);

// Coordinates which are not within any country
lookupLanguagesWithGeonames(142, 124);​ 
```

[jsfiddle链接](http://jsfiddle.net/hippietrail/bVPw4/)

# java - URL 连接在小程序中不起作用

> ID：10766891
> 
> 赞同：4
> 
> 时间：2012-05-26T14:01:30.340
> 
> 标签：java, security, applet, request, bufferedreader

我正在尝试在 java 小程序中运行此代码：

```
package test;
import java.applet.Applet;

import java.awt.Graphics;
import java.io.BufferedReader;
import java.io.InputStreamReader;
import java.net.URL;
import java.net.URLConnection;

public class DrawExample extends Applet {
    public void paint(Graphics g) {
        try {
            g.drawString("CODE:",50, 30);
            URL yahoo = new URL("http://www.yahoo.com/");
            URLConnection yc = yahoo.openConnection();      
            BufferedReader in = new BufferedReader(new InputStreamReader(yc.getInputStream()));
            String inputLine;
            int i=65;
            while ((inputLine = in.readLine()) != null) {
                g.drawString(inputLine,50, i);
                i=i+15;
            }
            in.close();
         } catch (Exception e) {
             e.printStackTrace();
         }          
    } 
} 
```

如果我从 Eclipse 将此代码作为小程序运行，它运行良好，但是如果我尝试将它嵌入网页中运行，我只会得到“CODE：”。代码冻结在这一行：

```
BufferedReader in = new BufferedReader(new InputStreamReader(yc.getInputStream())); 
```

有人知道我在做什么错吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T14:04:26.733

这是签名的小程序。未签名的 Applet 可以从它们所在的服务器打开网络连接。Applet 安全模型不允许打开到非源服务器的网络连接

看看这里[http://docs.oracle.com/javase/tutorial/deployment/applet/security.html](http://docs.oracle.com/javase/tutorial/deployment/applet/security.html)

要确认这一点，您可以尝试从托管此小程序的服务器打开流。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T14:20:08.800

您需要签署您的 java 小程序。当您在 Eclipse 中运行时，它可以工作，因为 Eclipse 创建了一个名为**java.policy.applet**的文件，其中包含以下内容。

```
/* AUTOMATICALLY GENERATED ON Tue Apr 16 17:20:59 EDT 2002*/
/* DO NOT EDIT */

grant {
  permission java.security.AllPermission;
}; 
```

为了使您的小程序在 Eclipse 之外运行，您必须对其进行签名：

1.  编译小程序 - javac Applet.java
2.  制作 JAR 文件 - jar cvf Applet.jar Applet.class
3.  生成密钥
4.  签署 JAR 文件
5.  导出公钥证书...

它一直在继续，这是一个非常漫长的过程。您可以按照[此页面中的所有步骤进行操作](http://java.sun.com/developer/onlineTraining/Programming/JDCBook/signed.html#example)

# jsf - 如何解决警告：索引 23 处路径中的非法字符

> ID：10766895
> 
> 赞同：-5
> 
> 时间：2012-05-26T14:01:58.203
> 
> 标签：jsf, jakarta-ee, spring-security, primefaces

我在运行我的应用程序时出错

我正在使用 ：

jsf 2.0
springframework 3.0.2
primefaces 3.1.1
glassfish 服务器 3.0.1

这是我的错误：

```
WARNING: Illegal character in path at index 23: file:/D:/Project/Secret Project/Hobic Project EE/Hobic/dist/gfdeploy/Hobic/Hobic-war_war/WEB-INF/lib/jstl-1.2.jar
java.net.URISyntaxException: Illegal character in path at index 23: file:/D:/Project/Secret Project/Hobic Project EE/Hobic/dist/gfdeploy/Hobic/Hobic-war_war/WEB-INF/lib/jstl-1.2.jar
    at java.lang.Thread.run(Thread.java:662) 
```

任何人都可以帮助我，解决这个问题
thx agungdmt

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T14:21:09.283

这是警告而不是错误。计算路径中的字符会导致*Secret Project*中的空格。从路径中删除所有空格，警告应该消失。

# php - 如何在 jQuery 上使用数据，该数据来自 html 页面上的 php

> ID：10766897
> 
> 赞同：0
> 
> 时间：2012-05-26T14:02:07.530
> 
> 标签：php, jquery, html

我有一个页面，当页面启动时，我像这样使用 php 获取数据

```
<?php $data = $this->data;?> 
```

然后我想将该数据放在选择标签上，我的意思是选择标签将在页面打开时定义，无需用户点击，我的事情就是这样

```
$(document).ready(function(){
  $("#Id").val(data);
}); 
```

但我的问题是 jQuery 函数在另一个文件上，我的意思是不在 html 文件上，所以我怎样才能将我从 php 上的 html 获得的数据发送到 jQuery 文件

我有使用 php 获取一些数据的 html 页面

我有 js 文件，我想使用该数据

如果我无法解释我的问题，请告诉我输入代码

# 一些代码

# html

```
<?php

    $questionInfo = $this->questionInfo->fetch();
    ?>
    <li>
                <label>Type</label>
                <select  name="type"class="TypeSelector"></select>
                <span class="errorMessage"></span>
    </li> 
```

# jQuery

```
 $.getJSON("http://localhost/Mar7ba/Type/getAllTypes/TRUE",function(data){
                var options = '';
                options+="<option>Select Type</option>";
                for(var i=0;i<data.length;i++){
                    options += "<option value='"+data[i]+"'>"+data[i]+"</option>";
                }
                if($("#addPlace #apTypeSelect").length){
                    $("#addPlace #apTypeSelect").html(options);
                }
                if($('.TypeSelector').length){
                    $('.TypeSelector').html(options);
                    $('.TypeSelector').val("<?php echo $questionInfo['typeName']; ?>");
                }
            }); 
```

**在 jQuery 上，检查** 我想要执行的代码的最后一行，但未识别 ​​questionInfo

我不能在我的 HTML 页面上使用 JS，因为我所有的网站都有相同的标题，所以每个页面都从正文开始，而不是从

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T14:21:46.930

根据您的编辑：

```
<?php
    $questionInfo = $this->questionInfo->fetch();
?> 
```

**JS代码：**

```
var typeName = '<?php echo $questionInfo["typeName"];?>'; 
```

和代码的最后一行：

```
$('.TypeSelector').val(typeName); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T14:19:05.573

将此代码放在您的 html 页面中：

```
<script type="text/javascript">
    var data = "<?php $this->data;?>";
</script>
<script type="text/javascript" src="jsPath/jsFile.js"></script> 
```

现在您可以在 js 文件中使用变量`data`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-26T14:19:26.330

我知道的最好的方法是

```
$(document).ready(function(){
  $("#Id").val("<?php echo $this->data;?>");
}); 
```

或者

```
var data = "<?php echo $this->data;?>";
$(document).ready(function(){
  $("#Id").val(data);
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-26T14:24:06.630

一种选择（尽管它不赞成，包括我在内）是将需要 PHP 传入的值的 jquery 脚本元素放在 HTML 的末尾，这样它就会被加载并且脚本可以看到该值。更好的方法是使用 ajax 或重构您的浏览器端代码，以减少对 php 提供的数据的依赖（至少像您所看到的那样减少依赖）。

# cakephp - cakephp 在特定条件下显示数据

> ID：10766899
> 
> 赞同：0
> 
> 时间：2012-05-26T14:02:32.087
> 
> 标签：cakephp

我已经创建了一个关系请求页面，现在我遇到的问题是，当我激活一个关系时，它会继续显示在视图中。我只希望显示字段 active = false 的请求。

这是我的请求控制器，它由于数组而崩溃，我该如何解决这个问题？

```
public function request(){
        $this->set('title_for_layout', 'Relationships');
        $this->set('stylesheet_used', 'homestyle');
        $this->set('image_used', 'eBOXLogoHome.jpg');   
        $this->layout='home_layout';
        $userid = $this->Auth->user('username');
        $this->set('Relationships', $this->Relationship->find('all', array('conditions' => array('Relationship.partytwo' => $userid)) array('conditions'=>array('Relationship.active'=false))));

    } 
```

对于咯咯笑，这是我的观点

```
<?php foreach($Relationships as $relationship):?>
                    <tr> 

                        <td align='center'><?php echo $relationship['Relationship']['partyone']; ?></td>
                        <td align='center'><?php echo $relationship['Relationship']['partytwo']; ?></td>
                        <td> </td>
                        <td><?php echo $this->Html->link($relationship['Relationship']['partyone'], array('action'=>'approve', $relationship['Relationship']['id'])); ;?>
                        </td>

                    </tr>
                <?php endforeach; ?>

            </table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T21:21:03.710

试试这个 set 语句：

```
$this->set('Relationships', $this->Relationship->find('all', 
  array('conditions' => array(
    'Relationship.partytwo' => $userid,
    'Relationship.active' => false)
  )
)); 
```

# c - 是否有用于 C 编程的 REPL？

> ID：10766900
> 
> 赞同：53
> 
> 时间：2012-05-26T14:02:31.977
> 
> 标签：c, read-eval-print-loop

我在osx上。我找到了这个 [http://neugierig.org/software/c-repl/](http://neugierig.org/software/c-repl/) 但该页面上的代码链接似乎已损坏。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2015-08-05T08:44:31.103

刚刚找到[IGCC](http://www.artificialworlds.net/wiki/IGCC/IGCC) (Interactive GCC) REPL。我喜欢。

例子：

```
./igcc

g++> int a = 1, b = 2;
g++> printf("%d\n", a + b);
3
g++> 
```

它会给你这样的编译错误：

```
g++> c = 3;
[Compile error - type .e to see it.]
g++> .e
<stdin>:14:1: error: use of undeclared identifier 'c'
c = 3;
^ 
```

（SF下载： http: [//sourceforge.net/projects/igcc/files/](http://sourceforge.net/projects/igcc/files/)）

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2012-05-26T14:07:09.437

似乎现在可以在[Github 存储库中找到](https://github.com/martine/c-repl)*c-repl*的代码。不过，这似乎是一个死项目（最后一次提交是 3 年前），所以我建议也寻找替代方案：

*   CINT[存档的旧官方页面来自 web.archive.org](https://web.archive.org/web/20200504034257/http://root.cern.ch/cint)或[“Masaharu Goto”CINT 页面](http://www.hanno.jp/gotom/Cint.html)
*   ccons [Github](https://github.com/asvitkine/ccons)或[code.google](http://code.google.com/p/ccons/)
*   [Cling](https://root.cern/cling/)， CINT 的继任者，但仅​​支持 C++（这可能是也可能不是问题，具体取决于您需要的功能）

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2012-05-26T14:08:55.030

[gdb](http://sources.redhat.com/gdb/)是一个很好的 REPL。你不能在那里定义新函数，但你可以评估表达式（包括那些有副作用的）。

# jquery - 使用 Jquery 弯曲文本没有硬编码

> ID：10766901
> 
> 赞同：0
> 
> 时间：2012-05-26T14:02:33.923
> 
> 标签：jquery

我正在使用以下代码来更改在文本框中键入的任何字体文本，效果很好，我现在要做的是使用 Jquery 将文本显示为 CURVE，如下所示。我尝试使用[http://tympanus.net/codrops/2012/01/24/arctext-js-curving-text-with-css3-and-jquery/](http://tympanus.net/codrops/2012/01/24/arctext-js-curving-text-with-css3-and-jquery/)但我看到那里的大部分文本都是硬编码的，我没有想要那个。所以简而言之，如果有人在文本框中键入文本，它应该显示为弯曲而不是单行\

![在此处输入图像描述](../Images/fd0f09a55e8de30eb0eabf3e798be393.png)

```
<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title> - </title>

  <script type='text/javascript' src='https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js'></script>

  <link rel="stylesheet" type="text/css" href="/css/normalize.css">
  <link rel="stylesheet" type="text/css" href="/css/result-light.css">

  <style type='text/css'>

  </style>

<script type='text/javascript'>//<![CDATA[ 
$(window).load(function(){
            $('#ta').keyup(function(){
                $('#float').html("<p>"+$(this).val()+"</p>");
            });
            $("#fs").change(function() {
                $('#float').css("font-family", $(this).val());
            });
            $("#size").change(function() {
                $('#float').css("font-size", $(this).val() + "px");
            });

});//]]>  

</script>

</head>
<body>
  <form id="myform">
    <button>erase</button>
    <select id="fs"> 
        <option value="Arial">Arial</option>
        <option value="Verdana ">Verdana </option>
        <option value="Impact">Impact </option>
        <option value="Comic Sans MS">Comic Sans MS</option>
    </select>

    <select id="size">
        <option value="7">7</option>
        <option value="10">10</option>
        <option value="20">20</option>
        <option value="30">30</option>
    </select>
</form>    <textarea id=ta class="changeMe">Text into textarea</textarea>
    <div id="container" class="changeMe">
        <div id="float">
            <p>
                Text into container
            </p>
        </div>
    </div>

</body>

</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T14:51:54.520

在您的代码中包含插件并将其用于您的脚本

```
$(window).load(function(){
    function update(){
        var text = '<p>' + $('#ta').val() + '</p>',
            size = $('#size').val(),
            font = $('#fs').val();

        $('#float')
            .css({
                fontFamily: font,
                fontSize: size + 'px'
            })
            .html(text)
            .find('p')
            .arctext();

    }

    $('#ta').keyup( update );
    $("#fs, #size").change( update );
}); 
```

**演示在** [http://jsfiddle.net/gaby/AnyNQ/1/](http://jsfiddle.net/gaby/AnyNQ/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-13T21:31:03.507

查看[CircleType.js](http://circletype.labwire.ca)。你可以看到它是如何在[这个网站上](http://petposter.co/poster.php?style=snakeoil)用来创建弯曲的文本输入的。

全面披露：CircleType.js 是我的项目，但我认为它可能对您的情况有所帮助。

# django - 如何检查 django 中的用户组是否更改？

> ID：10766905
> 
> 赞同：0
> 
> 时间：2012-05-26T14:02:50.277
> 
> 标签：django, django-models, django-users

我在我的处理程序中放置了一个断点，由以下方式调用：

```
def handle_user_save(sender, instance, created, **kwargs):
    if created:
        UserProfile.objects.create(user=instance)
        EmailNotifications.objects.create(user=instance)
    else:
        import pdb;pdb.set_trace()

post_save.connect(handler_user_save, sender=User) 
```

在 pdb 中：

```
(Pdb) dir(instance)
['DoesNotExist', 'MultipleObjectsReturned', '__class__', '__delattr__', '__dict__', '__doc__', '__eq__', '__format__', '__getattribute__', '__hash__', '__init__', '__metaclass__', '__module__', '__ne__', '__new__', '__reduce__', '__reduce_ex__', '__repr__', '__setattr__', '__sizeof__', '__str__', '__subclasshook__', '__unicode__', '__weakref__', '_base_manager', '_default_manager', '_deferred', '_get_FIELD_display', '_get_next_or_previous_by_FIELD', '_get_next_or_previous_in_order', '_get_pk_val', '_get_unique_checks', '_meta', '_perform_date_checks', '_perform_unique_checks', '_set_pk_val', '_state', 'addressbookentry_set', 'blogcomment_set', 'blogentry_set', 'check_password', 'clean', 'clean_fields', 'date_error_message', 'date_joined', 'delete', 'email', 'email_user', 'emailnotifications', 'first_name', 'full_clean', 'get_absolute_url', 'get_all_permissions', 'get_full_name', 'get_group_permissions', 'get_next_by_date_joined', 'get_next_by_last_login', 'get_previous_by_date_joined', 'get_previous_by_last_login', 'get_profile', 'groups', 'has_module_perms', 'has_perm', 'has_perms', 'has_usable_password', 'id', 'is_active', 'is_anonymous', 'is_authenticated', 'is_staff', 'is_superuser', 'last_login', 'last_name', 'logentry_set', 'natural_key', 'objects', 'password', 'pk', 'prepare_database_save', 'project_set', 'save', 'save_base', 'serializable_value', 'set_password', 'set_unusable_password', 'unique_error_message', 'user_permissions', 'username', 'userprofile', 'validate_unique', 'vote_set'] 
```

和：

```
(Pdb) instance.groups.all()
[] 
```

此时似乎没有显示更改。但这很可能是这种情况，因为我正在进行数据库查询以获取组。还有其他地方可以拦截用户模型的更新吗？

或者也许这些实例字段之一会给我答案？这些干净的方法/字段似乎都不包含任何有用的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T15:06:45.313

`User`由于和之间的关系`Group`是`ManyToManyField`，因此对该关系的修改会触发另一个信号：`m2m_changed`。从[文档](https://docs.djangoproject.com/en/3.2/ref/signals/#m2m-changed)中：

> 当模型实例上的 ManyToManyField 发生更改时发送。严格来说，这不是一个模型信号，因为它是由 ManyToManyField 发送的，但由于它在跟踪模型更改时补充了 pre_save/post_save 和 pre_delete/post_delete，因此包含在此处。

因此，您可以检查特定用户的组是否已更改：

```
def handle_m2m_changed(sender, instance, action, **kwargs):
    if action == 'post_add' or action == 'post_remove':
        print(instance.groups.all())

m2m_changed.connect(handle_m2m_changed, sender=User.groups.through) 
```

# java - 是否可以重命名 Hashmap 键？

> ID：10766906
> 
> 赞同：106
> 
> 时间：2012-05-26T14:02:59.960
> 
> 标签：java, hashmap

我正在寻找一种重命名 Hashmap 键的方法，但我不知道在 Java 中是否可行。

* * *

## 回答 #1

> 赞同：156
> 
> 时间：2012-05-26T14:05:18.527

尝试删除元素并使用新名称重新放置。假设您的地图中的键是`String`，则可以通过以下方式实现：

```
Object obj = map.remove("oldKey");
map.put("newKey", obj); 
```

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2016-10-30T14:27:45.103

```
hashMap.put("New_Key", hashMap.remove("Old_Key")); 
```

这会做你想做的，但是你会注意到钥匙的位置已经改变了。

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2013-12-18T06:07:50.233

将需要重命名的键的值分配给新键。并取下旧钥匙。

```
hashMap.put("New_Key", hashMap.get("Old_Key"));
hashMap.remove("Old_Key"); 
```

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2015-06-26T09:19:09.597

添加后，您无法重命名/修改哈希图`key`。

唯一的方法是删除/删除`key`和插入新的`key`和`value`对。

***原因***：在hashmap内部实现中，Hashmap`key`修饰符标记为`final`。

```
static class Entry<K ,V> implements Map.Entry<K ,V>
{
    final K key;
    V value;
    Entry<K ,V> next;
    final int hash;
    ...//More code goes here
} 
```

供参考：[HashMap](https://docs.oracle.com/javase/7/docs/api/java/util/HashMap.html#put(K,%20V))

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-05-26T14:05:18.433

您不重命名哈希映射键，您必须使用新键插入新条目并删除旧条目。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2019-07-28T18:15:12.580

我认为 hasmap 键的本质是用于索引访问目的，仅此而已，但这里有一个 hack：围绕键的值创建一个键包装器类，以便键包装器对象成为索引访问的 hashmap 键，所以你可以根据您的特定需求访问和更改密钥包装器对象的值：

```
public class KeyWrapper<T>{

      private T key;
      public KeyWrapper(T key){
         this.key=key;
       }

      public void rename(T newkey){
              this.key=newkey;
       }

} 
```

例子

```
 HashMap<KeyWrapper,String> hashmap=new HashMap<>();
   KeyWrapper key=new KeyWrapper("cool-key");
   hashmap.put(key,"value");
   key.rename("cool-key-renamed"); 
```

虽然你也可以有一个不存在的键能够从哈希图中获取现有键的值，但我担心这可能是犯罪，无论如何：

```
public  class KeyWrapper<T>{

        private T key;
        public KeyWrapper(T key){
            this.key=key;
        }

        @Override
        public boolean equals(Object o) {
            return hashCode()==o.hashCode();
        }

        @Override
        public int hashCode() {
            int hash=((String)key).length();//however you want your hash to be computed such that two different objects may share the same at some point
            return hash;
        }
    } 
```

例子

```
HashMap<KeyWrapper,String> hashmap=new HashMap<>();
KeyWrapper cool_key=new KeyWrapper("cool-key");
KeyWrapper fake_key=new KeyWrapper("fake-key");
hashmap.put(cool_key,"cool-value");
System.out.println("I don't believe it but its: "+hashmap.containsKey(fake_key)+" OMG!!!"); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-05-12T16:19:24.847

请看以下几点：

1.  `key`不，`HashMap`一旦添加，您不能重命名。

2.  首先，您必须删除或删除它`key`，然后您可以使用 new `key`with插入`value`。

3.  因为在`HashMap`内部实现中，`HashMap`键修饰符是`final`.

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2020-05-12T16:00:00.540

在我的情况下，地图包含非真实键-> 真实键，所以我不得不用我的地图中的实数替换非实数（这个想法就像其他人一样）

```
getFriendlyFieldsMapping().forEach((friendlyKey, realKey) ->
    if (map.containsKey(friendlyKey))
        map.put(realKey, map.remove(friendlyKey))
); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-06-06T13:55:07.840

您可以，如果您将使用**Bimap**而不是 Java 本机 HashMap 。
这不是传统的 Map 实现，您需要确保它适合您的需求。

> 双映射（或“双向映射”）是一种映射，它保留其值的唯一性以及其键的唯一性。此约束使 bimap 能够支持“反向视图”，这是另一个 bimap，包含与此 bimap 相同的条目，但具有相反的键和值。

使用 bimap，您可以反转视图并替换键。
查看 Apache Commons [BidiMap](http://commons.apache.org/proper/commons-collections/apidocs/org/apache/commons/collections4/BidiMap.html)和 Guava [BiMap](https://github.com/google/guava/wiki/NewCollectionTypesExplained#bimap)。

# c# - 在文本框中选择用双引号写的文本.. windows 窗体应用程序

> ID：10766909
> 
> 赞同：2
> 
> 时间：2012-05-26T14:03:13.007
> 
> 标签：c#, winforms

很抱歉，我是 C# 新手，需要学习很多东西

```
 cout<<"HELLO WORLD"; 
        HELLO WORLD= new array 
```

, HELLO WORLD 应该被存储到一个新的数组/字符串中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T14:10:35.467

如果您确实在使用 c#（而不是我认为的 c++），您可以执行以下操作：

```
 string  input = TextBox1.Text; //<--- replace Textbox1 with whatever you called your textbox
  string[] txtWithNoQuotes = input.Split('"');
  string noQuotes = txtWithNoQuotes[1]; // <-- this will give you Hello world, without the quotes 
```

编辑：认为我的问题有点错误，如果你只是想要某人在文本框中输入的文本，只需执行

```
string input  = NameOfYourTextbox.Text; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T14:09:55.600

假设您的 RichTextBox 的名称是 RichTextBox1；然后以下设置文本框中的值（您应该将其写入文件后面的代码；如果您的表单命名为 Form1，那么您应该将其写入 Form1.cs）：

```
string s = RichTextBox1.Text; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-26T14:13:07.753

要在里面选择引用的文本，`RichTextBox1`你需要这样的东西：

```
string s = RichTextBox1.Text;
int f = s.IndexOf('"'), l = s.LastIndexOf('"');
if(f != l)
{
  RichTextBox1.Select(s, l - s + 1);
} 
```

# java - 添加到字符串数组时的空指针

> ID：10766910
> 
> 赞同：1
> 
> 时间：2012-05-26T14:03:26.517
> 
> 标签：java, jsoup

此代码有效。它打印出列表中的值

```
ArrayList<String> menuItemsUrl=null;

for (int i = 0; i < modules.size(); i++) {
                String tmp = modules.get(i).attr("href");
                Log.d("", tmp);

            } 
```

但是这个会生成一个空指针。为什么？

```
for (int i = 0; i < modules.size(); i++) {
                String tmp = modules.get(i).attr("href");
                menuItemsUrl.add(tmp);

            } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T14:04:36.687

在您的代码中，您还没有初始化`menuItemsUrl`，因此是 NPE。

您已经在此处声明了您的列表`ArrayList<String> menuItemsUrl=null;`，当您尝试访问它时`menuItemsUrl.add(tmp);`，`menuItemsUrl`并没有引用它指向 null 的任何内容，这意味着没有任何意义因此 NPE，要摆脱 NPE，请在使用之前对其进行初始化。

```
menuItemsUrl = new ArrayList<String>(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T15:41:25.600

空点异常发生在“modules.size()”。模块是空引用。尝试实例化模块引用。

# .net - ef4 按导航条件分组并求和

> ID：10766911
> 
> 赞同：2
> 
> 时间：2012-05-26T14:03:26.543
> 
> 标签：.net, entity-framework

我有 2 张桌子

```
**table 1**
int tid
money money
datetime date
int serviceid
int type

**table2**
int id
int tid
status nvarchr() 
```

我正在使用 Ef4。我对两个实体都有导航属性

我正在尝试按日期获取资金组的总和[我还使用此属性创建了一个新类]

```
Total money
Total money of type [1]
total money where table2 status is a or b 
```

我怎样才能实现查询之王这就是我到目前为止所得到的：

```
return db.TBL1.Include("TBL2").Where(x => x.date >= startDate && x.date <= endDate && x.ServiceID == sid).GroupBy(e => new { e.Date.Value.Year, e.Date.Value.Month, e.Date.Value.Day }).AsEnumerable().Select(group => new entity c (Convert.ToInt32(group.Sum(x => x.Money)), Convert.ToInt32(group.Where(d => d.BillingType == 1).Sum(x => x.Money)),********what can i do here*****, Convert.ToDateTime(group.FirstOrDefault().Date))).AsEnumerable<billingReport>().ToList(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T10:58:47.170

```
return db.TBL1
         .Where(x => x.date >= startDate && 
                     x.date <= endDate && 
                     x.ServiceID == sid)
         .GroupBy(e => new 
         { 
             e.Date.Value.Year, 
             e.Date.Value.Month, 
             e.Date.Value.Day 
         })
         .Select(group => new billingReport
         {
             TotalMoney = Convert.ToInt32(group.Sum(x => x.Money), 
             TotalMoneyOfType1 = Convert.ToInt32(group.Where(d => d.BillingType == 1)
                                                      .Sum(x => x.Money)),
             TotalMoneyForStatus = group.Where(x=>x.TBL2.Any(y => y.Status == "a" || 
                                                                  y.Status == "b"))
                                        .Sum(x => x.Money), 
             Date = Convert.ToDateTime(group.FirstOrDefault().Date))
         })
         .ToList(); 
```

# c# - 与 oracle 客户端的类型化数据集连接超时

> ID：10766916
> 
> 赞同：1
> 
> 时间：2012-05-26T14:04:15.300
> 
> 标签：c#, oracle10g, strongly-typed-dataset

我正在使用带有类型数据集的 .net 4.0 连接到 oracle 数据库。使用开发服务器时，一切正常。但是当移动到暂存环境时，数据集总是会出现连接超时。我无法解决这背后的问题。

如果我删除数据集并使用 OracleCommand 直接查询，它可以正常工作，问题出在类型数据集上，目前没有时间将所有数据集转换为 DAL 层，因为它使用了超过 150-200 个命令。

# java - Javadoc doclet 可以识别空构造函数（编译器创建的默认构造函数）吗？

> ID：10766919
> 
> 赞同：3
> 
> 时间：2012-05-26T14:04:39.713
> 
> 标签：java, constructor, javadoc, doclet

在创建软件应用程序时，我正在创建要插入到 Javdoc 的 doclet。我在使用 Javadoc 和创建的 RootDoc 时遇到的一个问题是它包含由编译器创建的空构造函数。有没有办法通过提供给我的 doclet 的 RootDoc 来防止这种情况发生或识别它们？当我发现 isSynthetic 方法时，我以为我昨晚在这方面取得了进展，但 nullary 构造函数显然不是合成的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T23:10:56.027

进一步调查表明，为封闭的 ClassDoc 返回的 SourcePosition 与为生成的默认构造函数返回的 SourcePosition 具有相同的行号和列号（未记录的功能！）。我成功地将其用作鉴别器。

# macos - 导入 CSV 文件并替换已定义的文本，例如邮件合并

> ID：10766920
> 
> 赞同：1
> 
> 时间：2012-05-26T14:04:40.857
> 
> 标签：macos, csv, text-editor, nstextfield, mailmerge

我已经为 Mac OSX 系统创建了一个 Xcode 项目，我想要做的是导入一个 csv 文件，它将用 CSV 文件中的数据替换打开文档中的某些单词。

例如，当用户打开应用程序时，应用程序已经为他们写好了字母，然后他们导入一个 CSV 文件（CSV 文件的格式永远不会只改变数据），它会将字母中的某些单词替换为CSV 文件中的数据（如 word 或 pages 中的邮件合并）

我正在为字母使用 NSText 字段，以便用户可以在需要时更改字母。

CSV 文件具有以下标题：State、Name、Expires 我只需要 Name 和 Expires 字段来填写预先起草的文本字段。

谢谢

# python - 正则表达式获取太多信息

> ID：10766936
> 
> 赞同：0
> 
> 时间：2012-05-26T14:07:13.843
> 
> 标签：python, regex

我的脚本：

```
def fetch_online():
    pattern = re.search('(<span class="on">)(.*)(</span>)', data)
    return pattern.group(2)

print fetch_online() 
```

在里面`data`，有一行包含这个：

```
 <b><span><span class="on">5879</span> users online</span></b> 
```

但是，运行时，输出是这样的：

```
5879</span> users online 
```

我应该如何解决这个问题，以便它只在第一个之前抓取数据`</span>`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-26T14:11:01.143

在你的具体情况下，得到了`<span class="on">)(\d+)</span>`. 在更一般的方法中，选择非贪婪：

```
<span class="on">(.*?)</span> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-26T14:09:02.450

使用非贪婪量词：`(<span class="on">)(.*?)(</span>)`.

要了解有关非贪婪量词的更多信息，请阅读 Regular-Expressions.info 上的“懒惰而不是贪婪”[部分](http://www.regular-expressions.info/repeat.html)。

只是重申评论中已经说过的话，[非常不鼓励使用正则表达式解析 HTML](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags/1732454#1732454)。

# macos - Qt Mac App Store 应用程序被拒绝

> ID：10766940
> 
> 赞同：3
> 
> 时间：2012-05-26T14:07:52.580
> 
> 标签：macos, cocoa, qt, app-store, macos-carbon

我的新 Qt 应用程序提交已被 Mac App Store 拒绝。原因是：

```
Binary Rejected May 23, 2012 07:42 PM
Reasons for Rejection:
2.5 Apps that use non-public APIs will be rejected
2.30 Apps that do not comply with the Mac OS X File System documentation
will be rejected
May 23, 2012 07:42 PM. From Apple.
2.5

The use of non-public APIs can lead to a poor user experience should these APIs
change in the future, and is therefore not permitted. The following non-public
APIs are included in your application:

: NSAccessibilityCreateAXUIElementRef
: NSAccessibilityHandleFocusChanged
: NSAccessibilityUnregisterUniqueIdForUIElement
: NSMouseMovedNotification
: OBJC_IVAR_$_NSCGSContext._cgsContext
: _NSDrawCarbonThemeBezel
: _NSDrawCarbonThemeListBox
: _NSPopUpCarbonMenu3
: _NXShowKeyAndMain 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T14:17:58.350

***简单的回答：***

摆脱那些有问题的 API？

***更详细的答案：***

[根据这个 Qt page](http://doc.qt.nokia.com/4.7-snapshot/developing-on-mac.html)，如果您使用 Qt 4.7，您可以指定您的构建目标仅使用 Cocoa。

由于 Apple 已弃用 Carbon（并且无法在 64 位机器上运行），因此 Apple 不希望开发人员在将在应用商店发布的应用程序中使用 Carbon API 是有道理的。

通过摆脱任何无法在 64 位机器上运行的旧 API 来证明您的应用程序的未来。Qt 当然有关于如何以非碳方式做事的文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T04:51:20.787

我遇到了完全相同的问题。我终于追溯到了调用这些所谓的私有 api 的位置。它们是从 webkit 内部调用的。webkit使用的是苹果直接提供的webkit系统接口库，格式为编译后的静态库+头文件。更具体地说，它们是位于路径 src\3rdparty\webkit\WebKitLibraries 下的四个文件：

libWebKitSystemInterfaceLeopard.a libWebKitSystemInterfaceLion.a libWebKitSystemInterfaceMountainLion.a libWebKitSystemInterfaceSnowLeopard.a

我一直想知道它是否真的是一个私有 api，如果没有任何文档，还有谁知道如何调用它？现在原来是苹果本身。由于 nokia 或 digia 都没有这些库的源代码，因此他们可能无能为力。

现在，由于来自创建的库的私有 api 访问，任何基于 qtwebkit 的应用程序都会被苹果拒绝，这不是很讽刺吗？

如果我错了或遗漏了什么，请纠正我。我真的希望我错了。

# python - 如何知道类中定义了哪些变量

> ID：10766941
> 
> 赞同：2
> 
> 时间：2012-05-26T14:07:58.370
> 
> 标签：python

如何在没有导入类的情况下获取在类中定义了哪些变量的列表？

`vars(obj)`返回类中的所有变量，不包括不需要的 bliltin 变量，如`__doc__`, `__file__`, `__name__`, `__package__`, `os`,`pdb`等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T14:21:22.840

您有几种方法可以获取`class`变量或实例变量。`'__builtin__'`利用强制使用双下划线字符 ( )包围的内置函数的编码约定：

```
class foo:
    baz = 51
    def __init__(self):
        self.bar = 42 
```

* * *

```
>>> vars(foo)
{'__doc__': None,
 '__init__': <function __init__ at 0x02A35B70>,
 '__module__': '__main__',
 'baz': 51}
>>> {k:v for k,v in vars(foo).items() if k[:2]!="__" and k[-2:]!="__"}
{'baz': 51}
>>> obj = foo()
>>> vars(obj)
{'bar': 42} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T14:17:25.320

查看文档，我想知道 vars 是否是您要使用的

> 如果没有参数，vars() 的行为就像 locals()。请注意，本地字典仅对读取有用，因为本地字典的更新被忽略。

[我在 SO 上看到了这个问题](https://stackoverflow.com/questions/5607307/get-the-list-of-a-classs-variables-methods-in-python)，这似乎是您想要的。

让我知道我是否错了

# android - 在 Android 中更改 EditText 的字体？

> ID：10766943
> 
> 赞同：29
> 
> 时间：2012-05-26T14:08:26.543
> 
> 标签：android, fonts, android-edittext, typeface

有什么方法可以更改 Android 中 EditText 的字体吗？我希望它与我为所有 textViews 设置的字体相匹配。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-05-26T14:09:22.223

```
 editText.setTypeface(Typeface.SERIF); 
```

就像 TextView 一样。

```
 <TextView
  ...
     android:typeface="serif"
  ... /> 
```

编辑：上面是 XML

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-05-26T14:10:16.400

解决方案1:: 只需通过传递父视图作为参数来调用这些方法。

```
private void overrideFonts(final Context context, final View v) {
    try {
        if (v instanceof ViewGroup) {
            ViewGroup vg = (ViewGroup) v;
            for (int i = 0; i < vg.getChildCount(); i++) {
                View child = vg.getChildAt(i);
                overrideFonts(context, child);
         }
        } else if (v instanceof EditText) {
            ((TextView) v).setTypeface(Typeface.createFromAsset(context.getAssets(), "font.ttf"));
        }
    } catch (Exception e) {
 }
} 
```

解决方案 2:: 您可以使用自定义字体对 TextView 类进行子类化，并使用它来代替 textview。

```
public class MyEditView extends EditText{

    public MyEditView(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
        init();
    }

    public MyEditView(Context context, AttributeSet attrs) {
        super(context, attrs);
        init();
    }

    public MyEditView(Context context) {
        super(context);
        init();
    }

    private void init() {
        if (!isInEditMode()) {
            Typeface tf = Typeface.createFromAsset(getContext().getAssets(), "font.ttf");
            setTypeface(tf);
        }
    }

 } 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-08-13T01:59:21.663

*在assets*文件夹上创建一个*fonts*文件夹并放入您的 .ttf 字体文件，然后在 onCreate() 函数中写入：

 *```
EditText editText =(EditText)findViewById(R.id.insert_yors_edit_text_layout);
Typeface type = Typeface.createFromAsset(getAssets(),"fonts/yours_font.ttf"); 
editText.setTypeface(type); 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2017-12-01T08:26:56.600

您可以在最新版本的 Android Studio 3 中的 res 目录下创建**字体文件夹。然后将您的字体复制并粘贴到****字体**文件夹中。现在只需添加`fontFamily`到**EditText**标记 xml。

如下所示。

```
 <EditText
            android:id="@+id/subject"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_below="@id/headerShare"
            android:layout_marginBottom="5dp"
            android:layout_marginEnd="16dp"
            android:layout_marginStart="16dp"
            android:layout_marginTop="16dp"
            android:background="@drawable/edittext_bg"
            android:fontFamily="@font/ritaric"
            android:gravity="start"
            android:hint="Subject"
            android:inputType="text"
            android:maxHeight="50dp"
            android:padding="16dp"
            android:textColor="@color/black"
            android:textColorHint="@color/black"
            android:textSize="@dimen/colors_textview_size" /> 
```

我们`android:fontFamily="@font/ritaric"`用于在 EditText 上应用字体。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-10-28T12:27:11.263

```
void setFont(Context context, ViewGroup vg)
        {
          final String FONT_NAME = "lato_bold.ttf";
            for (int i = 0; i < vg.getChildCount(); i++)
                {
                    View v = vg.getChildAt(i);
                    if (v instanceof ViewGroup)
                        setFont(context, (ViewGroup) v);
                    else if (v instanceof TextView)
                        {
                            ((TextView) v).setTypeface(Typeface.createFromAsset(context.getAssets(), FONT_NAME ));
                        }
                    else if (v instanceof EditText)
                        {
                            ((EditText) v).setTypeface(Typeface.createFromAsset(context.getAssets(), FONT_NAME ));
                        }
                    else if (v instanceof Button)
                        {
                            ((Button) v).setTypeface(Typeface.createFromAsset(context.getAssets(), FONT_NAME ));
                        }
                    else if (v instanceof CheckBox)
                        {
                            ((CheckBox) v).setTypeface(Typeface.createFromAsset(context.getAssets(), FONT_NAME ));
                        }
                    else if (v instanceof RadioButton)
                        {
                            ((RadioButton) v).setTypeface(Typeface.createFromAsset(context.getAssets(), FONT_NAME ));
                        }
                }
        } 
```

在您的 Activity 或 Fragment 中，获取主布局

```
Inflater inflater = (Inflater) getActivity().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
//For Activity
//Inflater inflater = (Inflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
View v = inflater.inflate(R.layout.main_fragment, container, false);
//For Activity
//View v = inflater.inflate(R.layout.signup_fragment, null, false);
if (v instanceof ViewGroup)
    {
      setFont(getActivity(), (ViewGroup) v);
      //For Activity
     //setFont(this, (ViewGroup) v);
    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-03-28T11:58:31.823

# 第一种方法

在您的 java 类中使用此代码

```
 EditText et_brand=(EditText)findViewById(R.id.et_brand);
    et_brand.setTypeface(Typeface.createFromAsset(getAssets(),"Aspergit Bold.ttf")); 
    //Aspergit Bold.ttf is Font style name of text 
```

## 第二种方法

1.  创建一个新的 java 类，它是你想要的

    ```
    public class CustomTextView extends TextView {

    public CustomTextView(Context context, AttributeSet attrs, int defStyle) 
    {
    super(context, attrs, defStyle);
    init();
    }

    public CustomTextView(Context context, AttributeSet attrs) {
        super(context, attrs);
    init();
    }

    public CustomTextView(Context context) {
    super(context);
    init();
    }

    private void init() {
       Typeface tf = Typeface.createFromAsset(getContext().getAssets(), 
    "Aspergit Bold.ttf");
    setTypeface(tf);
    }
    } 
    ```

2.  在您的 XML 文件中使用它

    ```
     <YourPackageNAme.CustomEditText
                   android:layout_width="wrap_content"
                   android:layout_height="wrap_content"
                   android:background="@null"/> 
    ```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-01-18T11:28:03.820

**将此代码添加到您的 java 文件中** ，您可以添加哪种类型，例如 NORMAL、ITALIC、BOLD、BOLD_ITALIC。

edittext.setTypeface(null, Typeface.ITALIC);

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-10-24T10:47:18.127

迟到了，但是，简单的方法

```
 mEditTextMobileNumber.setTextSize(16.0f); 
```

如果您想在输入时更改字体：

```
 // Change text size when started entering number
    mEditTextMobileNumber.addTextChangedListener(new TextWatcher() {
        @Override
        public void beforeTextChanged(CharSequence s, int start, int count, int after) {

        }

        @Override
        public void onTextChanged(CharSequence s, int start, int before, int count) {
            if (s == null || String.valueOf(s).equalsIgnoreCase("")) {
                mEditTextMobileNumber.setTextSize(12.0f);
            } else {
                mEditTextMobileNumber.setTextSize(20.0f);
            }
        }

        @Override
        public void afterTextChanged(Editable s) {

        }
    }); 
```*

# java - 如何在 JLabel 中显示来自动态列表的文本

> ID：10766947
> 
> 赞同：0
> 
> 时间：2012-05-26T14:08:38.727
> 
> 标签：java, swing, for-loop, jlabel

在控制台中，我们可以这样做：

```
 for(int i = 0 ; i <list.size();i++){
    System.out.print("name :"+list.get(i).getName());
    System.out.print("  year :"+list.get(i).getYear());
    System.out.println();
 } 
```

如果我们知道尺寸，我们可以创建许多标签并做到这一点

> 标签.setText("");

如果我们不知道列表的大小，最好的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T14:28:19.963

```
System.out.print("name :"+list.get(i).getName());
System.out.print("  year :"+list.get(i).getYear());
System.out.println(); 
```

对于表格信息，请使用[`JTable`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JTable.html). 有关更多详细信息和代码，请参阅[如何使用表](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html)。

![秋千桌](../Images/06fe31e5adc320339519c3a6c9bccc91.png)

* * *

另一个提示：对于命令行输出，请查看[Formatting Numeric Print Output](http://docs.oracle.com/javase/tutorial/java/data/numberformat.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-26T14:16:40.907

您可以使用[HTML 来格式化](http://docs.oracle.com/javase/tutorial/uiswing/components/html.html)任何显示文本的 Swing 组件中的文本。

```
StringBuilder b = new StringBuilder("<html>");
for(String s : list) {
    b.append(s);
    b.append("<br>");
}

label.setText(b.toString()); // multiline JLabel 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-26T14:12:54.607

label.setText(label.getText() + " " + s);使用[`For-Each`](http://docs.oracle.com/javase/1.5.0/docs/guide/language/foreach.html)循环。

例如：

```
for (String s : listOfStringType){
    label.setText(label.getText() + " " + s);
} 
```

# google-app-engine - Google App Engine 和 django-nonrel

> ID：10766950
> 
> 赞同：3
> 
> 时间：2012-05-26T14:08:55.437
> 
> 标签：google-app-engine, django-nonrel

不久前我发现了 django，并编写了几个应用程序。然后我发现了 Google App Engine，我很高兴能够试一试，特别是因为它特别提到了 python 和 django。

我使用 GAE hello World 应用程序使用 python 2.7 确认了 GAE 安装。然后我在使用 django-nonrel 测试应用程序时遇到了麻烦。谷歌搜索各个错误随后结束，在 python 路径中添加了大约 7 个不同的东西，直到遇到我无法解决的错误。

从外观上看，我似乎在使用 Windows 时有些偏离常规，所以我在虚拟机上安装了一个新的 Ubuntu 副本并重新开始。验证 python 2.7，将 GAE 放在推荐的位置，克隆几个包并将它们符号链接到提供的测试应用程序文件夹中。当我 ./manage.py runserver 它再次踢出相同的错误消息，使我在 Windows 中停滞不前。

我对这个问题的系统层面的看法是 django-nonrel 由于其主要开发人员的辞职而失去了动力。GAE 并没有停滞不前，两者之间正在形成差距。这个观察正确吗？如果是，社区将走向何方？可以吗？(http://code.google.com/p/kay-framework/)

它是使用谷歌自己的最小 python 框架吗？它是Java而不是python吗？

我怀疑有成千上万的人在做 GAE 项目，但我觉得这条路并不好走。有很多人仍然对 django-nonrel 有信心吗？我意识到我可能会丢失一些非常简单的东西，比如路径变量或其他东西，但如果我应该学习其他东西，我不想继续寻找它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-26T16:41:13.383

我正在积极地将 django-nonrel 用于我已经工作了几个月但尚未启动的项目。在过去的一周里，我收到了一位正在开发 django-nonrel 的开发人员的建议，以尝试运行 django 1.4 的最新分支。注意，django 1.4 不能从 GAE SDK 正式获得。不过，在这一点上，感觉就像 django-nonrel 正在向前冲，它的文档已经被抛在了一边。您可能需要一些开发技能才能使用最新最好的。

django-nonrel 可能已经失去了一些动力，但我不认为它已经死了。不过需要注意的一件事是，大多数活跃的开发人员都将它与 mongo-db 一起用作后端。现在这不是问题，尽管我担心 mongo-db 版本和 appengine 版本可能会出现碎片——希望这不会发生。

我在 SO 和邮件列表上关注 App Engine 线程后的看法是，大多数人都在使用 Java。python用户中，常用的平台是webapp2+app引擎原生模型+Jinja2或者类似的模板库。

根据我使用 django-nonrel 的经验：

优点：

*   我想要的第 3 方 python 库可以工作，这为我节省了很多时间。例如，django-social-auth 给了我 facebook 和 twitter 登录，几乎没有任何工作。

*   使您有可能将 AppEngine 关闭到另一个 python+mongo 平台。

缺点：

*   旧版本不支持祖先查询，但现在在 1.4 分支上。

*   你是你自己的支持者。还有其他一些非常有帮助的人，但我不得不跳入代码库来解决问题并添加功能。我已经这样做了几次（比如发布带有错误的 App Engine SDK 时），但这种情况很少见。

*   django 的加载时间比 webapp2 长一点，但如果你摆脱了 django.contrib 中你不使用的所有内容，这还不错。

*   你没有得到 ndb 的好处。您错过了 ndb 实体缓存。但是我发现我更频繁地使用查询，这些查询不是 ndb 缓存的，所以这可能是也可能不是很大的损失。

# android - 为 VideoView 播放器实现自定义按钮/进度条

> ID：10766952
> 
> 赞同：0
> 
> 时间：2012-05-26T14:09:09.103
> 
> 标签：android, android-layout

我需要为 VideoView 控件（如进度条和播放/暂停按钮）设置自定义设计。在过去的几个小时里，我一直在研究 MediaController 类。似乎没有简单的方法来定制它。

我应该放弃使用 MediaController 的想法并改用其他东西吗？如果是 - 你有什么建议。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T14:41:05.123

有许多与 MediaPlayer 相关的侦听器可让您了解歌曲或视频的状态 :) 因此，如果您查看 android 文档，您会找到您想要的。

[文档：媒体播放器](http://developer.android.com/reference/android/media/MediaPlayer.html)

# jquery - ajax jquery添加到表

> ID：10766959
> 
> 赞同：0
> 
> 时间：2012-05-26T14:10:02.730
> 
> 标签：jquery, ajax

我正在努力尝试找出 jquery ajax 的东西。我有一个 HTML 对话框出现，必须输入一些信息。当他们点击“添加”时，它会保存数据（call-add_patient.php），然后我想要的是在原始页面上出现名称（“成功”）部分。

如果列表中没有人，那么什么也不会发生（尽管它确实进入了数据库，所以这似乎是一个 ajax 误解）。如果列表中至少有一个人，*则*添加新人。

所以，我不明白为什么这只有在列表中有人的情况下才有效。我尝试放置一个默认的空人，并希望这会起作用。它没有。

的JavaScript：

```
$.ajax({
    url: 'call-add_patient.php',
    type: 'get',
    data: {
        name: name.val(),
        address: address.val(),
        city: city.val(),
        state: state.val(),
        zip: zip.val(),
        checked: ids.join(),
        CUID: CUID.val(),
        losap: losap.val(),
        ccnumber: ccnumber.val()
    },
    dataType: 'json',
    cache: false,
    success: function(data) {
        $("table#users tbody").append("<tr>" + "<td>" + " <a class=\"cjbutton\" style=\"font-size: 6pt;\" href=\"letter/letter.php?UID=" + data.uid + "&losap=" + data.losap + "\">print</a>" + data.name + "</td>" + "</tr>");
    },
    async: false
}); 
```

创建 HTML 表的 PHP：

```
print '<table id="users" class="ui-widget" style="width: 100%;" 
       style="align: left;"><tbody>';

print '<tr><td>&nbsp;</td></tr>';

while ($row_pt = mysql_fetch_assoc($result_pt)) {
    print ' <tr width="100%" align="left"><td align="left">';
    print ems_print($row_pt['UID']);
    print $row_pt['Patient Name'];
    print '</td> </tr>';
}

print '</tbody></table> <br/> '; 
```

call-add_patient.php 的底部：

```
 echo json_encode(array('uid' => $id, 'name' => $name )); 
```

我很困惑，真的需要一些帮助。

**编辑：** 这是我认为应该工作但没有工作的一段代码。我没有包括 call-add_patient.php，因为我不认为这是一个问题（著名的遗言）。请注意，“警报”提供了正确的名称，所以我认为这是有效的。我正在阅读[jQuery 中的 Add table row](https://stackoverflow.com/questions/171027/add-table-row-in-jquery)并试图模仿这些想法，但它似乎仍然不起作用。

```
<body>
<?
if( isset( $_REQUEST['submit'] ) )
{
    print "here";
?>
    <script>

$.ajax({
    url: 'call-add_patient.php', 
    type: 'get',
    data:{ name: 'anme'},
    dataType: 'json',
    success: function(data) {$( "table#users tbody" ).append( "<tr><td>" + data.name + "</td><td></td></tr>" ); alert( data.name ); },
    async:false
});

    </script>

<?
}

?>

<table id="users">
<tbody>
<tr><td>asdf</td><td>asdf</td></tr>
</tbody>
</table>

<form action="index.php" method="post">
<input type="submit" name="submit">
</form>

</body> 
```

# android - 由通知启动的活动未更新

> ID：10766963
> 
> 赞同：0
> 
> 时间：2012-05-26T14:10:56.600
> 
> 标签：android, android-intent, android-c2dm

我收到了一些带有 C2DM 的 json 消息，到目前为止这很好。从 C2DM 有效负载中提取 json 消息后，我创建了一个通知，用户单击该通知将打开一个活动，该活动将显示收到的消息。

第一次收到 C2DM 消息（例如，“test number 1”消息），通知被创建，当用户单击它时，活动成功启动，我可以看到消息“test number 1”。然后我发送第二条 C2DM 消息，文本为“测试号 2”，通知已创建，但是当我单击通知时，活动开始我看到“测试号 1”消息，而不是第二条消息。

我正在创建这样的通知：

```
 public static void createMessageNotification(Context context, Message msg) {
     int icon = R.drawable.ic_stat_notify_msg;          // icon from resources
     CharSequence tickerText = "You've got a new message";  // ticker-text
     long when = System.currentTimeMillis();            // notification time
     CharSequence contentTitle = "Service Message";  // message title
     CharSequence contentText = "New message";

     Intent notificationIntent = new Intent(Intent.ACTION_MAIN);
     notificationIntent.setClass(context, MessageDetailsActivity.class);
     notificationIntent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP | Intent.FLAG_ACTIVITY_SINGLE_TOP);
     Bundle b = new Bundle();
     b.putSerializable("message", msg);
     notificationIntent.putExtras(b);

     PendingIntent contentIntent = PendingIntent.getActivity(context, 0, notificationIntent, 0);

     Notification notification = new Notification(icon, tickerText, when);
     notification.setLatestEventInfo(context, contentTitle, contentText, contentIntent);
     long[] vibrate = {0,100,200,300};
     notification.vibrate = vibrate;
     notification.flags = Notification.FLAG_AUTO_CANCEL;

     NotificationManager mNotificationManager = (NotificationManager) context.getSystemService(Context.NOTIFICATION_SERVICE);
     mNotificationManager.notify(AppUtil.getNextPushIndexMessage(), notification);
  } 
```

MessageDetailsActivity.java 可以在这里找到：http: [//pastebin.com/tmBK7rNH](http://pastebin.com/tmBK7rNH)

我在日志中看到消息正确来自 C2DM 服务，带有新的数据和值，但我无法让 MessageDetailsActivity 显示新信息。

谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T17:01:22.630

`PendingIntent.getActivity()`第二次调用可能与第一次调用时返回的结果相同`PendingIntent`。

这可能有点令人困惑。Android 会保留一个缓存，`PendingIntents`当您调用`getActivity()`或尝试查找与您提供的参数匹配的缓存`getBroadcast()`时返回给您。你在你的调用中给出了一个匹配的对象，你第一次给出它和你第二次给出它之间的唯一区别是在. 不幸的是，当您调用它时，它会忽略它尝试在其缓存中找到匹配项的时间，因此它会返回您创建的第一个匹配项。`getService()``PendingIntent``Intent``getActivity()``Intent``Intent``Extras``getActivity()``Extras``PendingIntent`

要解决此问题，请将您的调用更改为 getActivity() 以包含 FLAG_UPDATE_CURRENT 标志，如下所示：

```
PendingIntent contentIntent = PendingIntent.getActivity(context, 0, 
                      notificationIntent, FLAG_UPDATE_CURRENT); 
```

这将替换缓存的 PendingIntent 的数据以包含新的 Extras。

# javascript - 在 IE 中预期的对象，但在 Firefox 中有效

> ID：10766964
> 
> 赞同：0
> 
> 时间：2012-05-26T14:11:00.533
> 
> 标签：javascript, cross-browser

我为浏览器兼容性编写了一个函数。当我通过 objTR.cells[0] 时，它在 Firefox 中有效，但在 IE 中出现错误。

这是我的 Javascript 代码

```
function Browser_Compability(container) {
  if (navigator.appName == "Netscape") {
  // appName for both FireFox and Chrome its is "Netscape".
    return container.textContent;
  } else {
    return container.innerText;
  }
}

function selectRow(objTR) {
  var txtSSName = document.getElementById('<%=txtSSName.ClientID%>');
  txtSSName.value=Browser_Compability(objTR.cells[0]);
} 
```

## ASPX 代码

```
<asp:TextBox ID="txtSSName" runat="server" AutoCompleteType="Disabled" CssClass="csstextbox"></asp:TextBox>
<asp:Repeater ID="repeaterModalityList" runat="server">
  <ItemTemplate>
    <tr onclick="selectRow(this);">
      <td class="csstablelisttd">
        <asp:Label ID="lblSSName" runat="server" Text='<%#Eval("SS_NAME")%>'></asp:Label>
      </td>
    </tr>
  </ItemTemplate>
</asp:Repeater> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T08:16:16.763

我试过使用 trim() 它可以在 IE MOZILLA CHROME 中正常工作

```
txtSSName.value=Browser_Compability(objTR.cells[0]).trim(); 
```

# android - Android 服务被 ANR 杀死

> ID：10766966
> 
> 赞同：1
> 
> 时间：2012-05-26T14:11:09.110
> 
> 标签：android, service, android-anr-dialog

我的应用程序中有一个服务（由一个线程创建），在里面我创建了另一个线程，那就是一个 TCP 服务器。在启动线程（并完全工作，接收和处理收到的包）后的短时间内，服务被“超时执行服务”和我的服务中的 ANR**杀死。**

这是我的服务的代码和完成所有工作的线程：

```
public class Android_Wifi_Service extends Service {

    @Override
    public int onStartCommand(Intent intent, int flags, int startId) {
        super.onStartCommand(intent, flags, startId);
        handleStart();
        return START_STICKY;
    }

    private void handleStart() {
        Server server=new Server(this);
        new Thread(server).run();
    }

    @Override
    public void onDestroy(){
    }

    @Override
    public IBinder onBind(Intent intent) {
        return null;
    }

} 
```

这是我的线程：

```
public class Server implements Runnable {
    private boolean end=false;
    private Context context;

    public Server(Context _context){
        this.context=_context;
    }

    @Override
    public void run() {
        try {
            ServerSocket ss= new ServerSocket(5552);

            while(!end){
                //wait for connection
                System.out.println("Server Waiting connection");
                Socket s=ss.accept();
                SenderMessage msg=null;
                // connected 
                InputStream is = s.getInputStream();
                ObjectInputStream obj=new ObjectInputStream(is);
                try {
                    msg= ( SenderMessage ) obj.readObject();
                } catch (Exception e) {
                    Log.e("Message Receive Error", e.toString());
                }
                obj.close();
                is.close();
                s.close();
                if(msg!=null){
                    // do somethings
                }
            }

        } catch (IOException e) {
            Log.e("Messages Server", e.toString());
        }

    }   
} 
```

这是logcat：

```
> 05-26 13:48:39.019: W/ActivityManager(1364): Timeout executing
> service: ServiceRecord{407b1838
> wifi/.auxiliar.Android_Wifi_Service} 05-26
> 13:48:39.179: I/Process(1364): Sending signal. PID: 4129 SIG: 3 05-26
> 13:48:39.179: I/dalvikvm(4129): threadid=4: reacting to signal 3 05-26
> 13:48:39.219: I/dalvikvm(4129): Wrote stack traces to
> '/data/anr/traces.txt' 05-26 13:48:39.229: I/Process(1364): Sending
> signal. PID: 1364 SIG: 3 05-26 13:48:39.229: I/dalvikvm(1364):
> threadid=4: reacting to signal 3 05-26 13:48:39.329: I/dalvikvm(1364):
> Wrote stack traces to '/data/anr/traces.txt' 05-26 13:48:39.339:
> I/Process(1364): Sending signal. PID: 1452 SIG: 3 05-26 13:48:39.339:
> I/dalvikvm(1452): threadid=4: reacting to signal 3 05-26 13:48:39.379:
> I/dalvikvm(1452): Wrote stack traces to '/data/anr/traces.txt' 05-26
> 13:48:39.389: I/Process(1364): Sending signal. PID: 1433 SIG: 3 05-26
> 13:48:39.389: I/dalvikvm(1433): threadid=4: reacting to signal 3 05-26
> 13:48:39.419: I/dalvikvm(1433): Wrote stack traces to
> '/data/anr/traces.txt' 05-26 13:48:39.919: D/dalvikvm(1364):
> GC_CONCURRENT freed 1086K, 42% free 5485K/9351K, external 1223K/1735K,
> paused 7ms+12ms 05-26 13:48:40.089: D/dalvikvm(1364): GC_EXPLICIT
> freed 116K, 41% free 5529K/9351K, external 1223K/1735K, paused 108ms
> 05-26 13:48:40.829: E/ActivityManager(1364): ANR in
> wifi:Service 05-26 13:48:40.829:
> E/ActivityManager(1364): Reason: Executing service
> wifi/.auxiliar.Android_Wifi_Service 
```

谁能帮我？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-26T14:20:18.147

您不能通过`Thread`调用来启动 a `run()`。您`Thread`通过调用`start()`. 现在，您只是在主应用程序线程上调用您自己`Thread`的方法。`run()`

# python - f2py：包装使用分布在不同文件中的子程序的 fortran 模块？

> ID：10766969
> 
> 赞同：4
> 
> 时间：2012-05-26T14:11:23.840
> 
> 标签：python, lapack, f2py

由于我[之前](https://stackoverflow.com/questions/10681812/using-alternative-lapack-driver-in-numpys-svd-method)描述的原因，我需要在 Python 中使用 LAPACK 的 dgesvd 和 zgesvd 方法，而不是使用 numpy 包装的方法。

有人指出，我可以使用 f2py 来创建自己的 python 包。问题是，lapack 中的 dgesdd 调用了许多其他方法，例如 dbdsqr、dgelqf 以及一些 BLAS 例程，我不知道应该如何处理。

谁能指出，在不必重新编译整个 lapack 库的情况下创建 dgesvd python 模块的正确方法是什么？

非常感谢米沙

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-26T15:30:08.727

你不需要包装整个 LAPACK 库，只需要你想要的 LAPACK 例程。这些例程与下面的 Fortran 调用相关联。对于类似于 dgesvd 的求解器之一，我已经使用英特尔的 MKL 成功完成了此操作（显然我无法重新编译它，因为它是封闭源代码！）。

唯一的要求是您提供链接到 LAPACK 库的路径（无论如何您都需要顶级例程）：

```
f2py -L/path/to/lapack -llapack -m module -c module.f 
```

（当然，将库路径和库名称替换为您机器上适用的内容）

module.f 中的代码只需要一个包装器，因为 module.f 中的所有调用都像纯 Fortran 一样完成。

# android - Opengles 1.1 将完整图像渲染到数组

> ID：10766970
> 
> 赞同：0
> 
> 时间：2012-05-26T14:11:29.583
> 
> 标签：android, opengl-es

有什么方法可以在不使用 glreadpixel 的情况下将图像渲染到数组，因为我将使用它来拾色对象并从帧缓冲区读取像素似乎与不同的硬件有问题。

例如，有来自渲染管道的图像通常渲染到屏幕，但我希望 opengles 将其渲染到数组。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T07:58:11.253

这似乎是唯一的方法......在 GL ES 2.0 中，您可以使用帧缓冲区对象，它比 glReadPixel 更灵活，但您仍然必须将像素渲染到纹理。

这个数组是什么？GLubytes 数组？纹理在某种程度上也是一个数组……OpenGL内部的一块内存。

# c# - 为什么在同一个 UI 控件上第二次查询时，WaitForControlExist() 返回 false？

> ID：10766983
> 
> 赞同：4
> 
> 时间：2012-05-26T14:13:51.690
> 
> 标签：c#, visual-studio-2010, ui-automation, coded-ui-tests

我正面临编码 UI 的 WaitForControlExist() 函数的奇怪行为。第二次查询时，即使控件存在，值也会返回false。这是Coded UI的预期行为吗？我的程序看起来类似于下面..

```
//A sample program that Checks for Run window when "Windows + R" key is pressed

public void TestFunction()
{
   bool isExists = false;

   #region Variable Declarations

   UIMap uiMap = new UIMap();

   WinWindow uIRunWindow = uiMap.UIRunWindow;
   WinComboBox uIOpenComboBox = uiMap.UIRunWindow.UIItemWindow.UIOpenComboBox;
   WinButton uICancelButton = uiMap.UIRunWindow.UICancelWindow.UICancelButton;

   #endregion

   //1st Run

   Keyboard.SendKeys("R", ModifierKeys.Windows);
   isExists = uIRunWindow.WaitForControlExist(7000);
   Console.WriteLine("Is Run Window Appears :: " + isExists); 
   Mouse.Click(uICancelButton);
   Playback.Wait(2000);
   isExists = uIRunWindow.WaitForControlNotExist(7000);
   Console.WriteLine("Is Run Window Closes :: " + isExists);

   //2nd Run 

   Keyboard.SendKeys("R", ModifierKeys.Windows);
   isExists = uIRunWindow.WaitForControlExist(7000);
   Console.WriteLine("Run Window Appears :: " + isExists); 
   Mouse.Click(uICancelButton);
   Playback.Wait(2000);
   isExists = uIRunWindow.WaitForControlNotExist(7000);
   Console.WriteLine("Is Run Window Closes :: " + isExists);

} 
```

在上面的程序中，在第二次运行事件期间，虽然运行窗口存在，但该值返回为 false。

我遇到的解决方法是在第一次和第二次运行中使用 2 个不同的对象，或者重新初始化 UIMap 对象，如下[所示](http://social.msdn.microsoft.com/Forums/br/vsautotest/thread/6cf1ab30-af1f-4f20-934f-7c574c1565cb)

如果在这种情况下有任何其他解决方案或最佳实践，请帮助我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T12:53:04.090

由 MSAA/UIAutomation 创建的搜索结果和树被缓存。在控件的[搜索配置](http://msdn.microsoft.com/en-us/library/dd580315)中，您可以打开 AlwaysSearch 以解决问题，而无需重新创建控件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T19:16:21.530

当然，在窗口关闭后， uIRunWindow 引用已“用完”，需要重新初始化。

多次运行测试的完全明智的方法是使用 for() 循环而不是重复相同的语句。在 uiMap 分配之前启动循环，以便获得新的地图。

```
for (int test = 0; test < 2; ++test) {
    UIMap uiMap = new UIMap();
    // etc..
} 
```

# javascript - javascript数字值添加，不同的添加方式返回不同的结果

> ID：10766984
> 
> 赞同：0
> 
> 时间：2012-05-26T14:13:55.960
> 
> 标签：javascript

我是 javascript 的新手，我遇到的一件连线事情是：公式 `(z >>> 5 ^ y << 2) + (y >>> 3 ^ z << 4) ^ (sum ^ y) + (k[p & 3 ^ e] ^ z);`结果是`-529764813`，但是如果我将每个总和部分存储到一个临时变量中，然后将它们相加，结果就不同了`-529691705`。请看一下公式中使用的变量和结果`mx`，`new_mx`是不同的。代码在 chrome JS 控制台中执行和观察。谁能帮我 ？

```
>z
6
>y
13106
>sum
-1640531527
>k
[1685024337, 1683575095, 1110798964, 6387041]
>p
0
>e
2
>mx = (z >>> 5 ^ y << 2) + (y >>> 3 ^ z << 4) ^ (sum ^ y) + (k[p & 3 ^ e] ^ z);
-529764813
>t1  = (z >>> 5 ^ y << 2)
52424
>t2=(y >>> 3 ^ z << 4) ^ (sum ^ y) 
-1640543091
>t3=(k[p & 3 ^ e] ^ z)
1110798962
>new_mx=t1+t2+t3
-529691705 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T14:21:28.423

Javascript只有浮点数，没有整数。Javascript 中的按位运算通常不是一个好主意，请参阅[http://www.crockford.com/javascript/survey.html](http://www.crockford.com/javascript/survey.html)

对于浮点算术，请参阅经典的[What Every Computer Scientist Should Know About Floating-Point Arithmetic](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-26T14:24:14.713

[https://developer.mozilla.org/en/JavaScript/Reference/Operators/Operator_Precedence](https://developer.mozilla.org/en/JavaScript/Reference/Operators/Operator_Precedence)

`+`的优先级高于`^`，因此公式的分组如下：

`((z >>> 5 ^ y << 2) + (y >>> 3 ^ z << 4)) ^ ((sum ^ y) + (k[p & 3 ^ e] ^ z))`

# android - ListView 设置选中项背景颜色

> ID：10766985
> 
> 赞同：0
> 
> 时间：2012-05-26T14:14:25.680
> 
> 标签：android, list

我为表格设计了一个两窗格的 UI。在左窗格中，我正在显示列表视图，在右窗格中，我正在显示列表详细信息。我想显示用户单击的列表行并在右窗格中显示其显示。

所以我设置下面的代码来选择项目。

```
 android:choiceMode="singleChoice"
 android:background="@drawable/selector_list_view" 
```

列表布局在下面的布局文件中。

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:padding="1dp"
android:background="@drawable/bg_dialog_fragment">

    <Button     
        android:id="@+id/SortByTitle"
        android:layout_width="0dip"
        android:textColor="@color/solid_black"
        android:background="@drawable/sort_button_selected"
        android:layout_height="wrap_content"
        android:layout_marginRight="0dip"
        android:paddingTop="5dip"
        android:paddingBottom="5dip"
        android:paddingRight="8dip"
        android:textSize="15sp"
        android:textStyle="bold"
        android:layout_weight="0.5"
        android:text="@string/project"
        android:drawablePadding="5dip"
        android:drawableRight="@drawable/up_arrow"/>
    <Button
        android:id="@+id/SortByDate" 
        android:textColor="@color/solid_black"
        android:background="@drawable/sort_button_unselected"
        android:layout_width="0dip"
        android:layout_height="wrap_content"
        android:paddingTop="5dip"
        android:layout_marginLeft="0dip"
        android:paddingBottom="5dip"
        android:textStyle="bold"
        android:textSize="15sp"
        android:layout_weight="0.5"
        android:drawablePadding="5dip"
        android:paddingRight="8dip"
        android:text="@string/due_date"/>
</LinearLayout>

<TextView
    android:paddingRight="1dp"        
    android:layout_marginRight="1dp"
    android:id="@+id/TextViewTitle"
    style="@style/title_style"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_below="@+id/SortOrder"
    android:text="@string/workflow_incourt" />

  <RelativeLayout
    android:layout_marginRight="1dp"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_above="@+id/SearchFooter"
    android:layout_below="@+id/TextViewTitle"
    android:background="@color/solid_white"
   >

    <ListView
        android:id="@+id/ListViewProject"
        style="@style/listview_style"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:choiceMode="singleChoice"
        android:background="@drawable/selector_list_view" />

</RelativeLayout> 
```

而drawable是

```
<selector xmlns:android="http://schemas.android.com/apk/res/android" >
<item android:state_checked="true" android:state_focused="true" android:drawable="@android:color/background_dark" />
<item android:state_checked="true" android:state_focused="false" android:drawable="@android:color/background_dark" />
<item android:state_selected="true" android:drawable="@android:color/background_dark"/>
<item android:state_checkable="true" android:drawable="@android:color/background_dark"/> 
```

但它仍然没有显示选定的列表行。我还需要做些什么来实现这一目标。

还附上了所选项目的屏幕截图。![在此处输入图像描述](../Images/fe19008b5bced7ecf61454db9608e7c5.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T14:37:22.333

我认为您可以仅在一个变量中跟踪您选择的项目 ID。然后在：

*   如果 ID 与您设置的存储的 ID 匹配（例如红色），则 GetView 适配器
*   OnListItemClickListener 您通过用新 ID ref 替换旧 ID 来删除它

# javascript - 从 JSON 文件中检索数据

> ID：10766990
> 
> 赞同：1
> 
> 时间：2012-05-26T14:15:16.757
> 
> 标签：javascript, jquery, json, jsonp, yahoo-pipes

我正在尝试使用 JQuery 的 JSONP 功能从网站检索气压数据。

首先，我使用雅虎！用于将 XML 数据转换为 JSON 的管道。然后我尝试在警报中接收和使用该数据，但没有成功。在这个[JSFiddle](http://jsfiddle.net/7EPjH/)中，我有一个简单的工作示例，但是当我尝试使用更高级的 JSON 文件时，它不起作用。

另请参阅IBM 的[这篇文章](http://www.ibm.com/developerworks/library/wa-aj-jsonp1/ "使用 JSONP 进行跨域通信，第 1 部分：结合 JSONP 和 jQuery 快速构建强大的 mashup")。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T14:25:25.867

**代码中的问题**

*   您忘记包含`http://`在您的链接中

你需要试试这个（见`alert`。它会提醒标题）

```
<div onClick="$.getJSON('http://pipes.yahoo.com/pipes/pipe.run?_id=467a55b506ba06b9ca364b1403880b65&_render=json&textinput1=40.78158&textinput2=-73.96648&_callback=?', function(data){alert(data.value.title)})">Click Me</div><!--I can't get this to work--> 
```

**[演示](http://jsfiddle.net/thecodeparadox/7EPjH/12/)**

但它更好地使用如下：

```
<div class="loadjson">Click Me</div>

function barometer() {
    $.getJSON('http://pipes.yahoo.com/pipes/pipe.run?_id=467a55b506ba06b9ca364b1403880b65&_render=json&textinput1=40.78158&textinput2=-73.96648&_callback=?', function(data) {
        alert(data.value.title);
    })
}

$('div.loadjson').on('click', function() {
    barometer();
}); 
```

**注意：** 在对象内`$.getJSON()`返回两个。`parameters``data`

```
 - 1st one is `count` that have integer value
     - 2nd one is `value`, which is an `Object`. 
```

要获得**第二个参数**，您需要使用`data.value`.

**[演示](http://jsfiddle.net/thecodeparadox/7EPjH/11/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T15:03:13.133

我修复的代码有*很多很多*问题，并在线评论了这些问题......

jsfiddle在这里：http: [//jsfiddle.net/kritzikratzi/LQcVd/](http://jsfiddle.net/kritzikratzi/LQcVd/)

```
function loadBarometerData(){
    // 1\. it's not generally bad practice to put stuff in the 
    //    onClick listeners, but really... don't put such long code there! it's not readable ... 
    // 2\. you were missing a "http://" and it was downloading
    //    jsfiddle.net/pipes.yahoo.com/....
    // 3\. getJSON doesn't return a result immediately, you need to use callbacks for that!! 
    $.getJSON('http://pipes.yahoo.com/pipes/pipe.run?_id=467a55b506ba06b9ca364b1403880b65&_render=json&textinput1=40.78158&textinput2=-73.96648&_callback=?' ).success( barometer ); 
}; 

function barometer(data) {
    console.log( data );
    // 4\. you had items instead of items[0]
    //    similar with data. 
    alert(data.value.items[0].data[1].parameters.pressure.value);
};

function showPrice(data) {
    alert("Symbol: " + data.symbol[0] + ", Price: " + data.price);
}
​ 
```

# asp.net-mvc - RewritePath 而不是 MVC 中的返回视图

> ID：10766992
> 
> 赞同：1
> 
> 时间：2012-05-26T14:15:24.090
> 
> 标签：asp.net-mvc, rewrite, rewritepath

有没有办法重写显示不同视图而不是 RedirectToAction 或 Redirect 的路径？我不希望 url 改变，但请注意常规 RewritePath 不能“返回”，因此该操作实际上一直在跟踪它！

```
public ActionResult Register(){
    if (somehting){
        HttpContext.RewritePath(url);
        // I want it to stop here, somehow, but it keeps going and expects a return statement
    }
    return View();
} 
```

更新：我刚刚注意到，当我使用stackoverflow（使用ProcessRequest）中循环的一个时，如果我运行F5它可以工作，但是当我直接访问时，它给了我“'HttpContext.SetSessionStateBehavior'只能在'HttpApplication.AcquireRequestState'事件之前调用长大了。” 这意味着我在 IIS 设置中遗漏了一些东西，它是什么？：秒

**[更新]**为了明确这一点，我需要重写一个“url”而不是一个动作或视图名称，它必须是一个 url，就像好的旧 RewritePath(url)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T14:38:59.303

仅用于动作重定向：

使用样本`return RedirectToAction("Action","Controller",new {id=1});`

对于网址重定向：

可以使用`return Redirect(URL);`

*HttpContext.RewritePath(url); 之后的表达式 使用 response.end();*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T09:33:57.390

这就是我最终所做的，受到斯蒂芬回答的启发，创建了一个处理返回视图的方法：

首先是 HomeController.cs 下的全局方法（这里是 Home 控制器中的 Timeout）：

```
public ActionResult TimeOut(){
    return View("TimeOut"); // the string is essential
} 
```

其他地方：

```
if (soemthing){
    return new HomeController().TimeOut(); } 
```

有什么反对意见吗？做错事了？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T06:46:08.890

返回具有不同模型的不同视图，并且 url 不会改变。

像这样假设您有一个名为 Hello.cshtml 的视图。

```
return View('Hello',Model); 
```

因此，您返回与操作不同的视图，url 保持不变，用户的视图发生变化。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T17:24:39.320

除了 Cyril 的回答之外，您还可以直接调用另一个 Controller 方法并返回该方法的结果。假设您有一个方法如下，它返回您想要返回的内容。

```
 public ActionResult SpecialRegistration()
    {
       //TODO:  implement logic that does stuff
       return View();  // Shows the View named SpecialRegistration
    } 
```

现在在您的常规注册方法中，您可以调用它

```
 public ActionResult Register(){
        if (something){
            return SpecialRegistration();
        }
   } 
```

# c# - 在主网格视图更新中捕获唯一约束错误

> ID：10766993
> 
> 赞同：0
> 
> 时间：2012-05-26T14:15:47.537
> 
> 标签：c#, asp.net, sql

我正在使用 gridview 和`SqlDataSource`.

在数据库中，我在其中一列上设置了唯一约束。

当我使用新值从gridview中的一行更改单元格的值但该值已存在于同一列的其他行中时，它给了我错误：

> 无法在具有唯一索引“IX_tb1”的对象“dbo.tb1”中插入重复的键行。
> 该语句已终止。

我需要向用户显示友好的消息，例如在标签中

> 错误：值已存在

有没有办法做到这一点？因为我没有使用任何 sql 命令来捕获某些东西。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T15:00:23.877

看看这个[答案](https://stackoverflow.com/questions/705134/how-to-handle-exceptions-with-a-sqldatasource)。您需要使用 sqldatasource 的事件来处理异常以显示对用户友好的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T14:22:23.773

如果您在 c# 中编码，则在 catch 块中处理错误并显示如下自定义错误：

```
try
{
  // Statement which can cause an exception.
}
catch(Type x)
{
  // Statements for handling the exception
  //show your custom error by assigning to label or other control
}
finally
{
  //Any cleanup code
} 
```

如果您想处理 sql 查询中的错误，请使用如下错误处理方法：

```
BEGIN TRY
   SELECT convert(smallint, '2003121')
END TRY
BEGIN CATCH
   PRINT 'errno: ' + ltrim(str(error_number()))
   PRINT 'errmsg: ' + error_message()
END CATCH 
```

# jquery - Jquery 示例：弯曲文本

> ID：10766996
> 
> 赞同：1
> 
> 时间：2012-05-26T14:15:58.723
> 
> 标签：jquery

我正在雕刻一个产品，我正在尝试以曲线动态雕刻文本，但我无法做到。意味着每当我写入文本时，它都会以弯曲的形状打印在产品图像上。我只想要“顶部中心”和“底部”以弯曲形状居中。​​请参阅以下链接。

[http://dwfek.hmnjw.servertrust.com/v/vspfiles/assets/images/Engraving%20Demo/engraving.html](http://dwfek.hmnjw.servertrust.com/v/vspfiles/assets/images/Engraving%20Demo/engraving.html)

# c# - MonoDevelop Addin：如何在“xpt.xml”文件中设置 CopyToOutput 构建选项

> ID：10766998
> 
> 赞同：2
> 
> 时间：2012-05-26T14:16:15.193
> 
> 标签：c#, mono, monodevelop

我想知道在为新项目类型制作 MonoDevelop 插件时如何将“复制到输出目录”选项设置为“如果更新则复制”？

以这段代码为例，......我需要添加什么才能在构建时将“manifest.json”复制到输出目录？

```
<?xml version="1.0"?>
<Template originator = "Andrew Witte">

    <TemplateConfiguration>
        <_Name>MonoNaCl Project</_Name>
        <_Category>C#/MonoNaCl</_Category>
        <LanguageName>C#</LanguageName>
        <_Description>Creates a MonoNaCl project.</_Description>
    </TemplateConfiguration>

    <!-- Actions -->
    <Actions>
        <Open filename = "Internal.c"/>
        <Open filename = "Main.cs"/>
    </Actions>

    <Combine name = "${ProjectName}" directory = ".">
        <Options>
            <StartupProject>${ProjectName}</StartupProject>
        </Options>
        <References>
            <Reference type="Gac" refto="System" />
        </References>
        <Project name = "${ProjectName}" directory = "." type = "MonoNaCl">
            <Options Target = "Exe"/>
            <Files>
<File name="manifest.json">
<![CDATA[{
"name": "MonoNaCl",
  "description": "Mono for NaCl project.",
  "version": "1.0.0",
  "icons": {
  },
  "requirements": {
    "3D": {
      "features": ["css3d", "webgl"]
    }
  },
  "app": {
    "launch": {
      "local_path": "${ProjectName}.html"
    }
}
}
]]></File>
</Files>
        </Project>
    </Combine>
</Template> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T21:55:22.633

如果不[修改核心](https://github.com/mono/monodevelop/blob/monodevelop-3.0.5/main/src/core/MonoDevelop.Ide/MonoDevelop.Ide.Templates/SingleFileDescriptionTemplate.cs#L59)为此添加属性或[注册自定义模板类型](https://github.com/mono/monodevelop/blob/monodevelop-3.0.5/main/src/addins/AspNet/MonoDevelop.AspNet/MonoDevelop.AspNet.addin.xml#L96)，目前是不可能的。

但是，TBH 而不是复制到输出，我将使用自定义构建操作和构建扩展，该构建扩展将使用该构建操作复制文件。

# c - 检测到堆栈粉碎并且没有 getenv 的来源

> ID：10766999
> 
> 赞同：1
> 
> 时间：2012-05-26T14:16:26.023
> 
> 标签：c, getenv

我在用 C 编程时遇到了最奇怪的问题。我的函数有时会运行，有时则不会，即使我尝试搜索这些错误（检测到堆栈粉碎并且没有 getenv 的源）我似乎无法找到为什么有时会失败的答案。我尝试调试它，它只有最后一个字符（一个“}”）有问题，所以它运行所有其他功能（并且它们已经单独测试了很多）但有时它只是崩溃并且不运行最后一个函数（它可以工作，我可以保证，因为其他时候它甚至在这个函数中运行）。也是我最后几次运行它给分段错误的函数，即使有时它一直运行到最后。有什么办法可以调试这个问题吗？这是我的代码：

```
void main(int argc, char * argv[]) {
FILE * fin=fopen(argv[1],"r");
char v[1024];
int col;
matrix m=emptyS();
while(fscanf(fin, "%s",v)!=EOF) {
    int i=0;
    int * w = (int*) malloc(sizeof (int));
    int str=strlen(v);
    int size=0;
    while(i<str) {
        char a[4];
        int y;
        for(y=0;y<4;y++)
            a[y]='\0';
        int x=0;
        while(v[i]!=',') {
            a[x]=v[i];
            i++;
            x++;
        }
        i++;
        size++;
        w=realloc(w,size*sizeof(int));
        w[size-1]=atoi(a);
    }
    m=add(m,w,size);
    col=size;
}
fclose(fin);
graphW wg=discWD(col-1);
int k=0;
while(k<(col-2)) {
    int j=k+1;
    while(j<(col-1)) {
        wg=add_Wedge(wg,k,j,mi(m,k,j,col));
        j++;
    }
    k++;
}
        int* ms=MST(wg);
graph gbayes=tree(wg,ms);
bayes b=newBN(gbayes,m);
FILE * fout=fopen(argv[2],"w");
serialize(b,fout);
fclose(fout);
} 
```

先感谢您！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T14:22:13.927

你不检查`x`是否越界。Valgrind 会告诉你的。

```
while(i<str) {
        char a[4] = { 0 };
        int x=0;
        while(v[i]!=',') {
            a[x]=v[i]; /* here you access a[x] without check for x */
            i++;
            x++; /* Here it may go >= 4*/
        }
        i++;
        size++;
        w=realloc(w,size*sizeof(int));
        w[size-1]=atoi(a);
    } 
```