# StackOverflow 问答 11029000-11029999

# java - 在有理数的十进制展开中找到循环

> ID：11029001
> 
> 赞同：1
> 
> 时间：2012-06-14T08:02:15.113
> 
> 标签：java, algorithm, decimal

我需要编写一个程序，为输入 1 和 33 打印 0.(03)。（1/33 = 0.03030303.... 我们使用符号 0.(03) 来表示 03 无限重复。）

再举一个例子，8639/70000 = 0.1234(142857)

我明白，我需要使用像弗洛伊德这样的算法。但是如何在 java 中获得 0.0.030303030303 而不是 0.03030303030304。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-14T08:33:22.170

您可以尝试以下哪个更健壮。

理论是所有重复序列必须是的倍数

```
1/9 or 0.(1), 
1/99 or 0.(01)
1/999 or 0.(001)
1/9999 or 0.(0001)
etc. 
```

因此，要找出分数如何成为 9、99、999、9999 等的因数。一旦您知道分母是哪个“九”的因数，您就知道它是如何重复的。

```
/*
8639/70000 : 0.1234(142857)
1/1: 1.
1/2: 0.5
1/3: 0.(3)
1/4: 0.25
1/5: 0.2
1/6: 0.1(6)
1/7: 0.(142857)
1/8: 0.125
1/9: 0.(1)
1/10: 0.1
1/11: 0.(09)
1/12: 0.08(3)
1/13: 0.(076923)
1/14: 0.0(714285)
 etc
 */
public static final BigInteger NINE = BigInteger.valueOf(9);

public static void main(String... args) {
    System.out.println("8639/70000 : " + repeatingFraction(8639, 70000));
    for (int i = 1; ; i++)
        System.out.println("1/" + i + ": " + repeatingFraction(1, i));
}

private static String repeatingFraction(long num, long den) {
    StringBuilder sb = new StringBuilder();
    sb.append(num / den);
    sb.append('.');
    num %= den;
    for (int i = 3, lim = (int) Math.sqrt(num); i <= lim; i++) {
        while (num % i == 0 && den % i == 0) {
            num /= i;
            den /= i;
        }
    }

    while (num > 0) {
        while (den % 2 == 0 && num % 2 == 0) {
            num /= 2;
            den /= 2;
        }
        while (den % 5 == 0 && num % 5 == 0) {
            num /= 5;
            den /= 5;
        }
        // simplify.
        BigInteger nine = NINE;
        BigInteger denBI = BigInteger.valueOf(den);
        long lim = den;
        while (lim % 2 == 0) lim /= 2;
        while (lim % 5 == 0) lim /= 5;
        for (int j = 1; j <= lim; j++, nine = nine.multiply(BigInteger.TEN).add(NINE)) {
            if (nine.mod(denBI).equals(BigInteger.ZERO)) {
                BigInteger repeat = BigInteger.valueOf(num).multiply(nine).divide(denBI);
                sb.append('(').append(String.format("%0" + j + "d", repeat)).append(')');
                return sb.toString();
            }
        }
        num *= 10;
        sb.append(num / den);
        num %= den;
    }
    return sb.toString();
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-14T08:17:46.780

要正确检测十进制扩展中的循环，您应该完全避免使用浮点数学。

这是一种仅使用整数算术的方法：[检测重复小数的算法？](https://stackoverflow.com/questions/1315595/algorithm-for-detecting-repeating-decimals)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-14T08:18:36.640

使用此代码，我认为您会找到所需的内容：

```
BigDecimal one = new BigDecimal(1);

BigDecimal thirtyThree = new BigDecimal(33);

//Fix the decimals you want, i.e. 21
MathContext context = new MathContext(21, RoundingMode.DOWN);

BigDecimal result = one.divide(thirtyThree, context);       

System.out.println(result); 
```

这会产生下一个结果：0.0303030303030303030303

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-14T08:10:43.787

通过使用`BigDecimal`带有`ROUND_DOWN`舍入模式的 a。

# debugging - GWT客户端伞形异常在java中获得完整的错误消息

> ID：11029002
> 
> 赞同：2
> 
> 时间：2012-06-14T08:02:15.617
> 
> 标签：debugging, google-app-engine, gwt, client

我目前正在使用 GWT，但我发现几乎不可能在 Chrome 控制台中找到当前错误消息的错误。在本地开发模式下和在 GAE 上托管应用程序时都会出现错误。如何获得实际的 java 错误？它在哪里说我得到了哪条线和什么异常？顺便说一句，我正在寻找的错误是什么？

提前致谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-14T13:06:18.893

在 GWT 2.1.1 中，出现了 UmbrellaException，它将一组子 Throwable 收集在一起。试试这个：

```
public void onModuleLoad() {
  GWT.setUncaughtExceptionHandler(new GWT.UncaughtExceptionHandler() {
    @Override
    public void onUncaughtException(@NotNull Throwable e) {
      ensureNotUmbrellaError(e);
    }
  });
} 
```

其中`ensureNotUmbrellaError`定义如下：

```
private static void ensureNotUmbrellaError(@NotNull Throwable e) {
  for (Throwable th : ((UmbrellaException) e).getCauses()) {
    if (th instanceof UmbrellaException) {
      ensureNotUmbrellaError(th);
    } else {
      th.printStackTrace();
    }
  }
} 
```

# jakarta-ee - weblogic 11g 中的 XercesImpl.jar 空指针异常

> ID：11029004
> 
> 赞同：0
> 
> 时间：2012-06-14T08:02:20.687
> 
> 标签：jakarta-ee, web-applications, weblogic, xerces

如果 Web 应用程序在 weblogic 中运行，如果 XercesImpl.jar 存在于应用程序的 lib 文件夹中，为什么会导致 nullpointer 异常？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T16:55:27.487

它可能与 WebLogic 中包含的 XML Parser 库发生冲突。尝试使用 ClassLoader Analysis Tool 查看是否存在冲突。

您正在运行哪个版本的 WLS？10.3.什么？

# iphone - UIView 动画问题，当不尝试动画图像时

> ID：11029005
> 
> 赞同：0
> 
> 时间：2012-06-14T08:02:23.817
> 
> 标签：iphone, ios, uiimageview, core-animation, uiviewanimation

我必须显示图像的幻灯片。但在某一时刻，我只知道当前和以前的图像（因为内存管理）。我需要用动画显示下一张图片（用户可以选择动画类型）。但我没有看到动画，只是出现了没有动画的新图像。这是我的代码：

```
 UIImageView *prevImageView = [self getImageViewWithIndex:currentIndex];
    UIImageView *nowImageView = [self getImageViewWithIndex:newIndex];

    currentIndex = newIndex;
    [UIView animateWithDuration:4 delay:0 options:UIViewAnimationOptionTransitionCrossDissolve animations:^{
        [slideShowView addSubview:nowImageView];
    } completion:^(BOOL finished) {
        [prevImageView removeFromSuperview];
    }]; 
```

我尝试了不同的动画选项。试图将新图像设置为现有图像视图

```
nowImageView.image = newImage; 
```

但这没有帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-14T08:33:12.440

添加或删除视图或设置 UIImageView 的图像在`animateWithDuration:...`.

## 和`transitionWithView:...`

您可能尝试做的是使用 UIView 转换（因为您指定了转换选项）。那么你应该使用

```
transitionWithView:duration:options:animations:completion: 
```

相反，像这样：

```
[UIView transitionWithView:slideShowView
                  duration:4.0
                   options:UIViewAnimationOptionTransitionCrossDissolve
                animations:^
                { 
                    [prevImageView removeFromSuperview]; 
                    [slideShowView addSubview:nowImageView]; 
                }
                completion:NULL]; // You don't need the completion if you remove the previous image in the animation block. 
```

* * *

## 和`animateWithDuraion:...`

如果您真的想使用`animateWithDuraion:...`（可能同时发生其他动画），那么您必须为其他一些属性设置动画，例如`alpha`您添加的视图的 以使其淡入。更改代码以执行此操作看起来有些像这样。

```
UIImageView *prevImageView = [self getImageViewWithIndex:currentIndex];
UIImageView *nowImageView = [self getImageViewWithIndex:newIndex];

currentIndex = newIndex;
[slideShowView addSubview:nowImageView];
nowImageView.alpha = 0.0;
[UIView animateWithDuration:4 
                 animations:^
    {
        nowImageView.alpha = 1.0;
    } 
                completion:^(BOOL finished) 
    {
        [prevImageView removeFromSuperview];
    }]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T08:41:23.407

```
[UIView transitionWithView:slideShowView 
                  duration:4.0 
                   options:UIViewAnimationOptionTransitionCrossDissolve 
                animations:^{
                    [prevImagesView removeFromSuperview];
                    [slideShowView addSubview:nowImageView];
                }
                completion:nil]; 
```

在这种情况下，slideShowView 是 prevImagesView 和 nowImagesView 的父视图，充当容器视图。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-14T08:21:27.797

```
[UIView beginAnimations:nil context:nil];
[UIView setAnimationDuration:0.5];
[UIView setAnimationDelay:1.0];

//you can choose type of animation here 

[UIView setAnimationCurve:UIViewAnimationCurveEaseOut];

[prevImageView removeFromSuperview]; 
[slideShowView addSubview:nowImageView]; 

[UIView commitAnimations]; // commit your animation 
```

希望对你有帮助

# facebook - 应用程序发生错误。请稍后再试

> ID：11029010
> 
> 赞同：-2
> 
> 时间：2012-06-14T08:02:56.563
> 
> 标签：facebook

我收到应用程序名称发生错误。请稍后再试。我的应用程序 ID、秘密 ID 和重定向 url 是正确的仍然收到此错误

我的代码是这个

```
<?php
require $DOCUMENT_ROOT.'/temp/socialtest/src/facebook.php';
// Create our Application instance (replace this with your appId and secret).
$facebook = new Facebook(
    array(
      'appId'  => 'XXXXXXXXXXX',
      'secret' => 'XXXXXXXXXXX',
    )
);
// Get User ID

    $user = $facebook->getUser();
if($user)
{
    try
    {
        // Proceed knowing you have a logged in user who's authenticated.
        $user_profile = $facebook->api('/me');
    }
    catch (FacebookApiException $e) 
    {
        error_log($e);
        $user = null;
    }
}
// Login or logout url will be needed depending on current user state.
if($user) 
{
    $logoutUrl = $facebook->getLogoutUrl();
    echo $user_profile['id'];
    echo $user_profile['email'];
    echo $user_profile['user_birthday'];
    echo $user_proile['gender'];
}
else{
    $param = array();
    $param['scope'] = array('email');
    $loginUrl = $facebook->getLoginUrl($param);
 echo "<a href='".$loginUrl."'><img src='fb-login-button.png'></a>";
}

?> 
```

告诉我哪里做错了一切都很好

问题已解决，但现在我想要弹出窗口中的身份验证框，我该怎么做

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-14T08:35:28.143

> 但现在我想要弹出窗口中的身份验证框我该怎么做

通过从服务器端切换到客户端身份验证；嵌入 JavaScript SDK 并调用 FB.login 方法。

顺便说一句，与 gopi1410 的评论相反，它在 localhost 上也应该可以正常工作，以进行测试。通常在浏览器中发生的所有事情（JavaScript API 调用、重定向等）都没有问题；唯一无法在 localhost 上正确测试的情况是 Facebook 的服务器实际上必须联系您的服务器（deauth 回调、提取 OG 元内容……）。如果您通过一些 dyndns 服务使您的开发服务器“通过互联网”可用，那么即使这样也可以设置。

# sql-server - 计算表树中的后代行

> ID：11029012
> 
> 赞同：0
> 
> 时间：2012-06-14T08:03:02.560
> 
> 标签：sql-server, sql-server-2008, tsql, tree, common-table-expression

我们有一个这样的树结构表：

```
Id  Desc  ParentID
===
A    DescrA   NULL
B    DescrB   A
C    DescrC   A
D    DescrD   C
E    DescrE   C
F    DescrF   E 
```

我们需要一个返回特定 ID 的后代（包括子后代）数量的查询，例如：

```
select count(descendants) from Tablex where id='A' --result = 5
select count(descendants) from Tablex where id='B' --result = 0
select count(descendants) from Tablex where id='C' --result = 3
select count(descendants) from Tablex where id='E' --result = 1 
```

我们已经看到使用 CTE 可以“轻松”制作它，但无法理解它的要点......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T08:13:13.537

```
declare @T table
(
  Id char(1),
  ParentId char(1)
);

insert into @T values
('A', NULL),
('B', 'A'),
('C', 'A'),
('D', 'C'),
('E', 'C'),
('F', 'E');

declare @ParentId char(1);
set @ParentId = 'A';

with C as
(
  select Id, ParentId
  from @T
  where ParentId = @ParentId
  union all
  select T.Id, T.ParentId
  from @T as T
    inner join C
      on T.ParentId = C.Id
)
select count(*)
from C; 
```

# python - Celery PeriodicTask 参数

> ID：11029014
> 
> 赞同：0
> 
> 时间：2012-06-14T08:03:05.397
> 
> 标签：python, celery, django-celery

如何以编程方式更改传递给 Celery 的参数？我必须在以下代码中进行哪些更改：

```
from celery.task import PeriodicTask

class MyTask(PeriodicTask):
    run_every = timedelta(seconds=1)
    value = ''
    def run(self, **kwargs):
        print 'Passed value %s' % value 
```

我希望能够在应用程序生命周期内更改 value 属性。该值可能是一个字典，但我怀疑它是否会改变任何东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T08:47:43.393

为什么要改变论点？每次谁来传递论点？调度程序在指定的调度时间调用 run 方法。

您可以简单地从数据库或其他任何内容中读取“值”。

```
def run(self, **kwargs):
    value = get_value_from_database()
    print 'Passed value %s' % value 
```

否则 - 您可能需要按照此处所述创建自定义调度程序类：http: [//celery.github.com/celery/userguide/periodic-tasks.html#using-custom-scheduler-classes](http://celery.github.com/celery/userguide/periodic-tasks.html#using-custom-scheduler-classes)，并覆盖其一些方法。 .

# validation - 验证规则和功能

> ID：11029016
> 
> 赞同：0
> 
> 时间：2012-06-14T08:03:21.730
> 
> 标签：validation, cakephp, model, cakephp-2.0, cakephp-2.1

我在模型中有一个 cakephp 2.1 验证规则

```
 'name' => array(

                'empty' => array(
                  'rule' => 'notEmpty',
                  'required' => true,
                  'allowEmpty' => false,
                  'message' => 'Name is required.'
                ),
                'unique' => array(
                'rule' => 'checkUnique',
                'required' => true,
                'allowEmpty' => false,
                'message' => 'Name already exists.'
                )
              ) 
```

我有以下用于 te checkUnique 方法的代码：

```
 public function checkUnique($data)
  {
//App::import('Model','User');
// $this->User = & new User();

if(empty($this->data['TeacherLocation']['id']))
{
    $locationInfo = $this->find
    (
        'all',
        array
        (
            'conditions'=>array
            (
                'user_id' => $this->data['TeacherLocation']['user_id'],
                'name' => $this->data['TeacherLocation']['name']
            ),
            'recursive' => -1
        )
    );

    return (empty($locationInfo)); 
```

但我不断收到无法找到索引 user_id 的错误。是什么赋予了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T21:26:31.227

isUnique 已经内置在 cake 中：

```
'name' => array(
    'isUnique' => array(
        'rule' => array('isUnique'),
        'message' => 'Name already exists',
    ), 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T08:55:16.810

所以基本上你想根据附加字段检查 isUnique ，对吗？

试试我的 validateUnique 方法： [https ://github.com/dereuromark/tools/blob/2.0/Lib/MyModel.php#L818](https://github.com/dereuromark/tools/blob/2.0/Lib/MyModel.php#L818)

所以你得到了：

```
 'name' => array(
         ...
         'unique' => array(
            'rule' => array('validateUnique', array('user_id')),
            'required' => true,
            'allowEmpty' => false,
            'message' => 'Name already exists.'
         )
      ) 
```

您的问题似乎是即使您传递的数据中没有 user_id，您的验证方法也会被触发。

# javascript - 脚本不调用

> ID：11029025
> 
> 赞同：0
> 
> 时间：2012-06-14T08:04:15.133
> 
> 标签：javascript, asp.net, javascript-events

我有一个简单的 asp 页面，其中包含一个包含执行两个数字相加的函数 myFunction 的脚本。

```
<head runat="server">
    <title></title>

     <script type="text/javascript">
         function myFunction() {
             var x = 10;
             var y = 5;
             x += y;
             var demoP = document.getElementById("demo")
             demoP.innerHTML = "x=" + x;
         }
    </script>

</head>
<body>
    <form id="form1" runat="server">

    <div>

    </div>
    <p>
        &nbsp;</p>
    <p id="demo">
        <asp:Button ID="Button1" runat="server"

            style="z-index: 1; left: 573px; top: 43px; position: absolute; height: 33px; width: 223px;" Text="Button" OnClick="myFunction()" />
    </p>

    </form>
</body> 
```

当我运行此页面时，它显示找不到 myFuntion 的错误。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-14T08:06:05.710

`OnClick`用于服务器端回调。您想调用客户端函数。所以你应该`OnClientClick`改用：

```
OnClientClick="myFunction()" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T09:02:07.833

```
 protected void Page_Load(object sender, EventArgs e)
 {
     Button1.Attributes["onclick"] = "javascript:myFunction();";
 } 
```

您想在页面后面的代码中调用 javascript 函数，请使用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T08:23:41.460

要从 aspbutton 调用 javascript 函数，您必须使用 'onclientclick' 事件而不是按钮的 'onclick' 事件。

尝试使用这个

```
OnClientClick="myFunction()" 
```

否则，您还可以使用任何 html 控件的“OnClick”事件，例如“锚标记”、“div”、“输入”等。例如：

```
<a href= "#" OnClick="myFunction()" > Click to call function</a> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T08:34:56.313

当你想调用一个 javascript 函数时，使用这个

```
<input type="button" id="Button1" value="Button" onclick="myFunction()" /> 
```

控件`<asp:`是服务器端控件，OnClick 事件将调用服务器端方法。您的代码隐藏文件中没有定义“myFunction”方法，因此您将收到服务器端错误。

# ruby - ToolTwist 控制器在终端中运行 ruby 文件 - 致命错误：未知负载

> ID：11029030
> 
> 赞同：3
> 
> 时间：2012-06-14T08:04:46.923
> 
> 标签：ruby, bash, tooltwist

我正在尝试运行一个 ruby​​ 文件，该文件将显示特定有效负载的 git 版本，但出现以下错误：

```
**
** Fatal error: Unknown payload webdesign/gmd.
**

- removing /launchpads/controllerTest/build.xml.
- removing /launchpads/controllerTest/CONFIG_SUMMARY. 
```

我的命令：

```
ruby checkLaunchpad.rb --show-payload-versions controllerTest webdesign gmd 
```

使用选项时我也遇到同样的错误`--update-payload-cache`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T08:13:05.013

如果您需要从 ToolTwist Controller 中从命令行运行 ruby​​ 脚本，则必须首先设置适当的环境变量。通常这是通过运行类似的命令来完成的：

> $ . /ControllerV8/setParams

这将设置 TTC_DEPLOY 和 TTC_CONFIG，由 checkLaunchpad.rb 使用。

*（注意 .（点）和文件名之间的空格。）*

# java - Struts2 中的奇怪行为

> ID：11029035
> 
> 赞同：1
> 
> 时间：2012-06-14T08:05:09.640
> 
> 标签：java, struts2

我正在研究 Struts，遇到了一些奇怪的行为。虽然它没有产生任何错误或错误，但我只是认为与你们分享它会很有趣。

也许你们中的一个可以解释为什么会发生这种情况。

使用以下代码创建一个 Struts 动作 -

```
public class MyAction extends ActionSupport {
    private Map<String, Map<String, Object>> map = new HashMap<String, Map<String, Object>>();
    public String execute() {
        System.out.println(map);
        return SUCCESS;
    }

    public Map<String, Map<String, Object>> getMap() {
        return map;
    }

    public void setMap(Map<String, Map<String, Object>> map) {
        this.map = map;
    }
} 
```

创建关联的映射和所需的 Jsp 并执行操作。您将在控制台上看到以下输出 -

```
{systemProperties={java.runtime.name=Java(TM) SE Runtime Environment, sun.boot.library.path=C:\Program Files\Java\jdk1.6.0_32\jre\bin, java.vm.version=20.7-b02, shared.loader=${catalina.base}/shared/classes .... 
```

显然，Struts 正在将系统属性注入到我的地图中。但它为什么这样做呢？我没有要求它这样做。我没有使用任何特殊的 XML 配置或注释。Struts 的哪一部分（什么拦截器）对此负责？我刚刚发现了一个错误还是这是正常行为？如果这很正常，为什么 Struts 开发人员认为注入每个`Map<String, Map<String, Object>>`系统属性是明智的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T09:10:06.877

我自己试过这个，我的猜测是正确的。您在此处发布的代码不会产生任何此类结果。您可以通过查看代码自己轻松发现这一点。地图上没有任何内容，只有 getter 和 setter。

`"So apparently Struts is injecting the system properties into my map"`

如果您将参数传递给此操作，例如使用表单，Struts 将在该操作中查找其对应的 setter-method。这表明在您的代码、表单或参数中的某处，您有一些被称为`"map"`传递给此操作的东西。

首先查看你的`struts.xml`，看看你是否在那里设置了一些参数。如果不是，请仔细查看您从哪里调用操作以及发送它的参数。然后你应该能够在地图中找到你经过的地方。

# linq-to-sql - MVCMiniProfiler 不显示 Linq 查询的 WHERE 部分

> ID：11029037
> 
> 赞同：0
> 
> 时间：2012-06-14T08:05:17.707
> 
> 标签：linq-to-sql, asp.net-mvc-2, mvc-mini-profiler, mvcminiprofiler

我正在使用 MVCMiniProfiler 来分析一些数据库查询。对于一个查询，它无法显示我在代码中定义的查询的 Where 部分。

代码如下：

*MyAppDataContext.cs：*

```
public partial class MyAppDataContext : System.Data.Linq.DataContext {
    public static MyAppDataContext CreateNewContext() {

        var sqlConnection = new SqlConnection(ConfigurationManager.ConnectionStrings["MyAppConnectionString"].ToString());
        var profiledConnection = new ProfiledDbConnection(sqlConnection, MiniProfiler.Current);
        return new MyAppDataContext(profiledConnection);

    }
} 
```

*程序代码：*

```
MyAppDataContext DataContext = MyAppDataContext.CreateNewContext();
IEnumerable<Requests> Entities = DataContext.Requests;

using (profiler.Step("get data")) {
    var dataset = Entities.Where(x => x.ControleStatus == 4).OrderBy(x => x.ID)
} 
```

我也试过：

```
using (profiler.Step("get data")) {
    var dataset = from x in Entities 
                  where x.ControleStatus == 4
                  orderby x.ID
                  select x;
} 
```

这就是 MVC Mini Profiler 向我展示的内容：

```
SELECT [t0].[ID], [t0].[DatumOntvangst], [t0].[DatumRapport], [t0].[FK_SID], 
    [t0].[ControleStatus], [t0].[SStatus] FROM [dbo].[Request] AS [t0] 
```

如您所见，没有 Where 语句。顺便说一句：输出包含正确的结果，但是由于此查询需要 30 秒才能完成，我想知道是否首先从数据库中检索所有数据，然后在代码中应用 where 条件（而不是在数据库上）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T18:40:07.023

你需要让它返回 IQueryable。通过返回 IEnumerable，您不允许 IQueryable 提供程序转换表达式树的其余部分。查询运算符的 LINQ to Objects 版本适用于 IEnumerable。LINQ to SQL 需要 IQueryable 版本。

# javascript - 如果可以加载脚本，如何使用 Javascript 检查

> ID：11029038
> 
> 赞同：0
> 
> 时间：2012-06-14T08:05:19.050
> 
> 标签：javascript

公司通过代理阻止社交网络是很常见的。现在，如果页面上有一个“喜欢”按钮，它需要一个`script`（例如，Facebook .js），但由于访问被阻止，浏览器将尝试加载它两分钟左右，因此页面的其余部分不会加载。

是否可以使用 JavaScript 检查某个特定网站是否可用并仅在此之后加载脚本？

假设页面上有 Facebook、Twitter 和 Google+，而 Facebook 和 Twitter 被屏蔽。

```
<script src="facebook-api.js">
<script src="twitter-api.js">
<script src="google-api.js"> 
```

无法加载 Google+。在这种情况下我们能做些什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T08:09:13.227

`script``onerror`加载不成功时触发事件。您可以处理加载错误：

```
<script type="text/javascript">
    function scriptLoadingErrorHandler(){
         //Do something
    }
</script>
<script src="facebook-api.js" onerror="scriptLoadingErrorHandler()">
<script src="twitter-api.js" onerror="scriptLoadingErrorHandler()">
<script src="google-api.js" onerror="scriptLoadingErrorHandler()"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T08:10:13.240

`jQuery.getScript()`如果你可以使用 jQuery，你可以通过函数来​​实现这一点。
看看[这里](http://api.jquery.com/jQuery.getScript/)。

# android - selX 和 selY PuzzleView 数独示例的值

> ID：11029040
> 
> 赞同：0
> 
> 时间：2012-06-14T08:05:37.750
> 
> 标签：android, sudoku

请下载以下代码：

[http://media.pragprog.com/titles/eband3/code/Sudokuv2/src/org/example/sudoku/PuzzleView.java](http://media.pragprog.com/titles/eband3/code/Sudokuv2/src/org/example/sudoku/PuzzleView.java)

在代码中，

取什么初始值`selX`以及`selY`如何取值？我问这个是因为有一个`getRect(selX, selY, selRect)`使用这两个变量的函数调用（）。那么，在这个函数调用期间，基本上传递了`selX`和的哪些值？`selY`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T08:25:57.277

它们的*初始*值将是**0**，因为它没有在任何地方（至少在这个文件中）设置为其他任何值。据我从您提供的代码中可以看出，只有一个地方`selX`并且`selY`已设置。

```
private void select(int x, int y) {
  invalidate(selRect);
  selX = Math.min(Math.max(x, 0), 8); <------ Here
  selY = Math.min(Math.max(y, 0), 8); <------
  getRect(selX, selY, selRect);
  invalidate(selRect);
} 
```

`selX`并且`selY`仅在`select(int x, int y)`调用该方法时设置，因此我无法真正为您提供它们的价值。这意味着传入的值是`..getRect(selX, selY, selRect)`最后`select`设置的值。

如果不知道在哪里调用此方法以及将哪些值传递给它，很难回答您的问题。但是我确实注意到在这些方法中调用了 select 方法

```
 @Override
public boolean onTouchEvent(MotionEvent event) {
  if (event.getAction() != MotionEvent.ACTION_DOWN)
     return super.onTouchEvent(event);

  select((int) (event.getX() / width),
        (int) (event.getY() / height));
  game.showKeypadOrError(selX, selY);
  Log.d(TAG, "onTouchEvent: x " + selX + ", y " + selY);
  return true;
}

@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
  Log.d(TAG, "onKeyDown: keycode=" + keyCode + ", event="
        + event);
  switch (keyCode) {
  case KeyEvent.KEYCODE_DPAD_UP:
     select(selX, selY - 1);
     break;
  case KeyEvent.KEYCODE_DPAD_DOWN:
     select(selX, selY + 1);
     break;
  case KeyEvent.KEYCODE_DPAD_LEFT:
     select(selX - 1, selY);
     break;
  case KeyEvent.KEYCODE_DPAD_RIGHT:
     select(selX + 1, selY);
     break;

    ... 
```

所以看起来它们是在用户触摸屏幕或使用箭头键时设置的。

你可以在这里放一个断点并自己检查一下

# c# - 在一个线程中复制多个文件

> ID：11029043
> 
> 赞同：5
> 
> 时间：2012-06-14T08:05:49.907
> 
> 标签：c#, multithreading, file, asynchronous, copy

我有以下场景，我必须复制多个（大约 10,50,200，...）文件。我一个接一个地同步进行。这是我的代码片段。

```
static void Main(string[] args)
        {
            string path = @"";
            FileSystemWatcher listener = new FileSystemWatcher(path);
            listener.Created += new FileSystemEventHandler(listener_Created);
            listener.EnableRaisingEvents = true;

            while (Console.ReadLine() != "exit") ;
        }

        public static void listener_Created(object sender, FileSystemEventArgs e)
        {
            while (!IsFileReady(e.FullPath)) ;
            File.Copy(e.FullPath, @"D:\levani\FolderListenerTest\CopiedFilesFolder\" + e.Name);
        } 
```

因此，当在某个文件夹中创建文件并准备好使用时，我会一个接一个地复制该文件，但是一旦任何文件准备好使用，我就需要开始复制。所以我认为我应该使用线程。那么..**如何实现并行复制？**

@克里斯

**检查文件是否准备好**

```
public static bool IsFileReady(String sFilename)
        {
            // If the file can be opened for exclusive access it means that the file
            // is no longer locked by another process.
            try
            {
                using (FileStream inputStream = File.Open(sFilename, FileMode.Open, FileAccess.Read, FileShare.None))
                {
                    if (inputStream.Length > 0)
                    {
                        return true;
                    }
                    else
                    {
                        return false;
                    }

                }
            }
            catch (Exception)
            {
                return false;
            }
        } 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-14T08:09:06.550

从机械磁盘执行并行 I/O 是一个坏主意，只会减慢速度，因为机械头每次都需要旋转以寻找下一个读取位置（一个非常慢的过程），然后会随着每个线程反弹轮到它运行了。

坚持顺序方法并在单个线程中读取文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T08:59:41.143

您可能有一个`Thread`可以完成所有处理的设备，即

```
Queue files = new Queue();

static void Main(string[] args)
{
      string path = @"";
      FileSystemWatcher listener = new FileSystemWatcher(path);
      Thread t = new Thread(new ThreadStart(ProcessFiles));
      t.Start();
      listener.Created += new FileSystemEventHandler(listener_Created);
      listener.EnableRaisingEvents = true;

      while (Console.ReadLine() != "exit") ;
}

public static void listener_Created(object sender, FileSystemEventArgs e)
{
    files.Enqueue(e.FullPath);
}

void ProcessFiles()
{
    while(true)
    {
        if(files.Count > 0)
        {
              String file = files.Dequeue();
              while (!IsFileReady(file)) ;

              File.Copy(file, @"D:\levani\FolderListenerTest\CopiedFilesFolder\" +           file);
        }
    }
} 
```

并在您的`listener`事件中将文件名添加到队列中。

然后，您`Thread`可以从队列中获取文件名并从那里进行处理。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-14T08:19:36.310

现在仅此而已（@Tudor 所说的），但是由于碎片，并行复制文件会在您的硬盘驱动器中造成混乱。在我的应用程序中，我使用队列复制 200 个先前同时生成的文件，只是为了将它们以“线性”方式放在硬盘上。

[您可以在此处](http://www.videophill.com/blog/how-to-reduce-hard-drive-fragmentation/)阅读有关该主题的更多信息。

# c# - 将用户定义类型的对象放在剪贴板上并检索它

> ID：11029050
> 
> 赞同：0
> 
> 时间：2012-06-14T08:06:08.373
> 
> 标签：c#, clipboard

我有一个班级学生。我想将 Student 'objStu' 类的对象存储在剪贴板上。

```
Class Student
{
    string stuID;
    string Name;
    string email;
} 
```

在main方法中我写了一段代码：

```
Clipboard.SetDataObject(objStu,false); 
```

当我尝试如下检索对象时：

```
Student anotherStu = Clipboard.GetDataObject() as Student; 
```

它返回空值。请指导我如何实现它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T08:27:15.950

使学生类为`Serializable`

```
[Serializable]
public class Student
{
    public string stuID { get; set; }
    public string Name { get; set; }
    public string email { get; set; }
    public void CopyToClipboard()
    {

        DataFormats.Format format =
             DataFormats.GetFormat(typeof(Student).FullName);
        //now copy to clipboard
        IDataObject dataObj = new DataObject();
        dataObj.SetData(format.Name, false, this);
        Clipboard.SetDataObject(dataObj, false);

    } 
```

然后你尝试：

```
Student objStu = new Student();
objStu.Name = "test";
objStu.CopyToClipboard();
Clipboard.SetDataObject(objStu, false);
Student anotherStu = GetFromClipboard(); 
```

下面是 GetFromClipboard 方法

```
protected static Student GetFromClipboard()
{
    Student student = null;
    IDataObject dataObj = Clipboard.GetDataObject();
    string format = typeof(Student).FullName;

    if (dataObj.GetDataPresent(format))
    {
        student = dataObj.GetData(format) as Student;
    }
    return student;
} 
```

检查[此链接](http://www.codeproject.com/Articles/8102/Saving-and-obtaining-custom-objects-to-from-Window)以获取更多信息

# typo3 - TYPO3 Powermail 扩展中 TypoScript 的字段默认值

> ID：11029053
> 
> 赞同：0
> 
> 时间：2012-06-14T08:06:11.697
> 
> 标签：typo3, typoscript

有人知道是否可以使用 TypoScript 设置 Powermail 表单的任何字段的默认值（无需创建特殊的 TypoScript 对象字段）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T12:58:58.673

对的，这是可能的。**在页面[ts config](http://wiki.typo3.org/TSconfig)**中使用 TCAdefaults 打字稿对象。

```
TCAdefaults.tt_news.hidden = 0 
```

此示例使 tt_news 条目不隐藏。格式是

```
TCAdefaults.[table].[field] = [value] 
```

这适用于 tca 中的所有内容。因此，您实际上可以为任何表中的任何字段设置默认值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T19:13:15.340

隐藏字段的设置值是内置在powermail中的，当然它只适用于`fe_users`表格。

编辑字段时，您会在属性的底部找到它：`Fill out this field with fe_user field`

如果需要使用 DB 中的其他字段，可以通过 ExtensionManager 进行配置。

**编辑：**

文档中提到可以用 TS 预填充值，我没有测试，但是看起来，这就是你需要的。

[http://typo3.org/extension-manuals/powermail/1.4.14/view/1/10/#id1632010](http://typo3.org/extension-manuals/powermail/1.4.14/view/1/10/#id1632010)

# javascript - 图像尺寸问题

> ID：11029054
> 
> 赞同：0
> 
> 时间：2012-06-14T08:06:13.303
> 
> 标签：javascript, html, css, image

我为图像竞赛编写了一个应用程序，我现在想要实现的是显示这些图像。我面临一个小问题。

我通过保持纵横比将图像的大小调整为 400 像素 x 400 像素。这意味着一张图像可以是 400 像素宽和 200 像素高。另一个图像可以是 100px 宽和 400px 高。

客户端应用程序希望将它们显示在具有固定高度和宽度的网格中。

> [http://jsfiddle.net/tbedf/1/](http://jsfiddle.net/tbedf/1/)

有这个 css 技巧可以显示图像的一部分，但是当我这样做时，有些只显示图像的左角，在该区域只能显示白色或黑色，所以对我没有好处。

当我查看 facebook 时，他们在对齐图像和显示图像中心方面做得很好。

我怎样才能让它工作？

请求显示的缩略图大小为 100 像素 x 100 像素

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T08:28:02.643

尝试使用 javascript 存储每个图像，`width`然后`height`将以下样式应用于循环中的图像：

```
position: absolute;
top: 50%;
margin-top: -1*($height/2); /* $height = stored height of current image */
right: 50%;
margin-right: -1*($width/2);  /* $width = stored width of current image */ 
```

申请`li`时`position: relative;`

* * *

## 我为你制作了 jQuery 演示**[——jsFiddle 演示](http://jsfiddle.net/matmuchrapna/tbedf/4/)**

**jQuery代码：**

```
$(function() {
    var imgs = $('ul > li img');

    $.each(imgs, function(i, img) {
        /* cache variable for better performance */
        var $img = $(img);
        $img.css({
            'margin-top': $img.height()/-2,
            'margin-left': $img.width()/-2
        });     
    });
});​ 
```

**CSS：**

```
li {
    float: left;
    height: 100px;
    width: 100px;
    overflow: hidden;
    margin: 10px;
    padding: 10px;
    position: relative;
}

li:hover { overflow: visible; }

li img {
    position: absolute;
    display: block;
    top: 50%;
    left: 50%;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T08:14:48.420

为什么不将它们对齐到中心并使用这样的东西隐藏溢出？

```
<div style="overflow:hidden;text-align:center;width:100px;height:100px;>
<img src="">
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T08:42:22.800

```
li { float:left; height:100px; overflow:hidden; margin:10px; padding:10px 10 0;}
li:hover { height:auto; }    ​ 
```

这个使所有的缩略图 100px x 100px

# android - Android 如何配置模拟器以模拟无电话支持

> ID：11029055
> 
> 赞同：1
> 
> 时间：2012-06-14T08:06:17.393
> 
> 标签：android, android-emulator

我想配置模拟器来模拟没有电话功能支持。为了测试我的应用程序以检查，如果设备不支持呼叫功能，应用程序将如何表现。

[我在这里](http://www.freeimagehosting.net/4ccok)查看了 AVD 硬件属性，但我没有找到任何与调用相关的属性。

是否可以在模拟器上测试这个场景，或者只能在真实设备上测试？

编辑1：试过

*   “GSM 调制解调器支持”设置为“否”，其禁用的网络。
*   飞行模式开/关。
*   平板电脑模拟器。

> ```
> TelephonyManager telephonyManager1 = (TelephonyManager) getSystemService(Context.TELEPHONY_SERVICE);
> 
> if(telephonyManager1.getPhoneType() == TelephonyManager.PHONE_TYPE_NONE)
>   System.out.println("No Phone Functionality");       
> else 
>   System.out.println("Phone Functionality"); 
> ```

它总是进入其他部分，电话类型值在所有情况下都是 PHONE_TYPE_GSM

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T08:09:21.120

“GSM 调制解调器支持”设置为“否”

我对其进行了测试，并使用此标志充当没有移动网络的设备。

# php - 如何将 PHP 数据库连接从 MySQL 更改为 MS SQL Server？

> ID：11029061
> 
> 赞同：0
> 
> 时间：2012-06-14T08:06:55.193
> 
> 标签：php, mysql, sql-server

我已经使用 PHP 创建了与 mySQL 数据库的数据库连接。它工作正常。现在，我想将该连接更改为 MS SQL Server 数据库，并使用与以前的 MySQL 数据库相同的表。

这是代码：
config.php

```
<?php
/**
 * Database config variables
 */
define("DB_HOST", "localhost");
define("DB_USER", "root");
define("DB_PASSWORD", "");
define("DB_DATABASE", "android_api");
?> 
```

DB_Connect.php

```
<?php
class DB_Connect {

    // constructor
    function __construct() {

    }

    // destructor
    function __destruct() {
        // $this->close();
    }

    // Connecting to database
    public function connect() {
        require_once 'include/config.php';
        // connecting to mysql
        $con = mysql_connect(DB_HOST, DB_USER, DB_PASSWORD);
        // selecting database
        mysql_select_db(DB_DATABASE);

        // return database handler
        return $con;
    }

    // Closing database connection
    public function close() {
        mysql_close();
    }

}

?> 
```

DB_Functions.php

```
<?php

class DB_Functions {

    private $db;

    //put your code here
    // constructor
    function __construct() {
        require_once 'DB_Connect.php';
        // connecting to database
        $this->db = new DB_Connect();
        $this->db->connect();
    }

    // destructor
    function __destruct() {

    }

    /**
     * Storing new user
     * returns user details
     */
    public function storeUser($name, $email, $password) {
        $uuid = uniqid('', true);
        $hash = $this->hashSSHA($password);
        $encrypted_password = $hash["encrypted"]; // encrypted password
        $salt = $hash["salt"]; // salt
        $result = mysql_query("INSERT INTO users(unique_id, name, email, encrypted_password, salt, created_at) VALUES('$uuid', '$name', '$email', '$encrypted_password', '$salt', NOW())");
        // check for successful store
        if ($result) {
            // get user details 
            $uid = mysql_insert_id(); // last inserted id
            $result = mysql_query("SELECT * FROM users WHERE uid = $uid");
            // return user details
            return mysql_fetch_array($result);
        } else {
            return false;
        }
    }

    /**
     * Get user by email and password
     */
    public function getUserByEmailAndPassword($email, $password) {
        $result = mysql_query("SELECT * FROM users WHERE email = '$email'") or die(mysql_error());
        // check for result 
        $no_of_rows = mysql_num_rows($result);
        if ($no_of_rows > 0) {
            $result = mysql_fetch_array($result);
            $salt = $result['salt'];
            $encrypted_password = $result['encrypted_password'];
            $hash = $this->checkhashSSHA($salt, $password);
            // check for password equality
            if ($encrypted_password == $hash) {
                // user authentication details are correct
                return $result;
            }
        } else {
            // user not found
            return false;
        }
    }

    /**
     * Check user is existed or not
     */
    public function isUserExisted($email) {
        $result = mysql_query("SELECT email from users WHERE email = '$email'");
        $no_of_rows = mysql_num_rows($result);
        if ($no_of_rows > 0) {
            // user existed 
            return true;
        } else {
            // user not existed
            return false;
        }
    }

    /**
     * Encrypting password
     * @param password
     * returns salt and encrypted password
     */
    public function hashSSHA($password) {

        $salt = sha1(rand());
        $salt = substr($salt, 0, 10);
        $encrypted = base64_encode(sha1($password . $salt, true) . $salt);
        $hash = array("salt" => $salt, "encrypted" => $encrypted);
        return $hash;
    }

    /**
     * Decrypting password
     * @param salt, password
     * returns hash string
     */
    public function checkhashSSHA($salt, $password) {

        $hash = base64_encode(sha1($password . $salt, true) . $salt);

        return $hash;
    }

}

?> 
```

索引.php

```
<?php

/**
 * File to handle all API requests
 * Accepts GET and POST
 * 
 * Each request will be identified by TAG
 * Response will be JSON data

  /**
 * check for POST request 
 */
if (isset($_POST['tag']) && $_POST['tag'] != '') {
    // get tag
    $tag = $_POST['tag'];

    // include db handler
    require_once 'include/DB_Functions.php';
    $db = new DB_Functions();

    // response Array
    $response = array("tag" => $tag, "success" => 0, "error" => 0);

    // check for tag type
    if ($tag == 'login') {
        // Request type is check Login
        $email = $_POST['email'];
        $password = $_POST['password'];

        // check for user
        $user = $db->getUserByEmailAndPassword($email, $password);
        if ($user != false) {
            // user found
            // echo json with success = 1
            $response["success"] = 1;
            $response["uid"] = $user["unique_id"];
            $response["user"]["name"] = $user["name"];
            $response["user"]["email"] = $user["email"];
            $response["user"]["created_at"] = $user["created_at"];
            $response["user"]["updated_at"] = $user["updated_at"];
            echo json_encode($response);
        } else {
            // user not found
            // echo json with error = 1
            $response["error"] = 1;
            $response["error_msg"] = "Incorrect email or password!";
            echo json_encode($response);
        }
    } else if ($tag == 'register') {
        // Request type is Register new user
        $name = $_POST['name'];
        $email = $_POST['email'];
        $password = $_POST['password'];

        // check if user is already existed
        if ($db->isUserExisted($email)) {
            // user is already existed - error response
            $response["error"] = 2;
            $response["error_msg"] = "User already existed";
            echo json_encode($response);
        } else {
            // store user
            $user = $db->storeUser($name, $email, $password);
            if ($user) {
                // user stored successfully
                $response["success"] = 1;
                $response["uid"] = $user["unique_id"];
                $response["user"]["name"] = $user["name"];
                $response["user"]["email"] = $user["email"];
                $response["user"]["created_at"] = $user["created_at"];
                $response["user"]["updated_at"] = $user["updated_at"];
                echo json_encode($response);
            } else {
                // user failed to store
                $response["error"] = 1;
                $response["error_msg"] = "Error occured in Registartion";
                echo json_encode($response);
            }
        }
    } else {
        echo "Invalid Request";
    }
} else {
    echo "Access Denied";
}
?> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-14T08:19:42.893

如果我是你，我会编写两个不同的数据库类，看起来像这样：

```
interface DBConnection {
    public function connect();
    public function query($sql);
    public function fetch($query);
    // etc whatever else you need
}

class MySQLConnection implements DBConnection {
   // implement these using all the MySQL funcs
}

class MSSQLConnection implements DBConnection {
   // implement these using all the MSSQL funcs
} 
```

然后，不要在 DB_Functions 中使用 mysql_query()、mysql_fetch_array() 等，使用 $db->query() 和 $db->fetch()，而 $db 包含 MySQLConnection 或 MSSQLConnection 的实例，具体取决于您想在哪一个上使用。该接口将确保您在两个类中实现所有相同的功能。

/edit：当然，我很愚蠢：Tieso T 是对的，应该使用 PDO。这可能更有效...

# c++ - Borland C++ 链接器错误 c 文件包括

> ID：11029062
> 
> 赞同：2
> 
> 时间：2012-06-14T08:06:55.973
> 
> 标签：c++, linker, include, borland-c++

我正在尝试使用 borland C++ Builder V5.5 构建一个 C++ 程序。一切正常，直到我尝试调用 ac 文件中定义的函数。编译器可以找到但链接不起作用。链接器无法找到从 c++ 文件调用的函数。.obj 文件被生成并且是项目 xml 文件的一部分。现在做任何人我如何解决这个错误。为了确保没有副作用，我开始了一个新项目，只是在构造函数中调用 c 函数调用。项目结构如下所示：

Form1.h 定义 Constructor 并包含定义 c 函数的标头

Form1.cpp实现Constructor并调用c函数

test.h 定义了一个 void 函数“void abc();”

test.c 包含 test.h 并实现了一个 void 函数“void abc() {}”

从 ...unit1.obj 引用的未解析的外部“abc()”

有人有想法吗？

这里有一些代码

```
#include <vcl.h>
#pragma hdrstop
#include "Multicopter_Model.h"
#include "Unit1.h"

#pragma package(smart_init)
#pragma resource "*.dfm"
TForm1 *Form1;
__fastcall TForm1::TForm1(TComponent* Owner)
        : TForm(Owner)
{
abcdefg();
return;
} 
```

_

```
#ifndef RTW_HEADER_Multicopter_Model_h_
#define RTW_HEADER_Multicopter_Model_h_

void abcdefg();

#endif */ 
```

_

```
#include "Multicopter_Model.h"
/* Model initialize function */
void abcdefg()
{

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T08:11:31.587

我对 Borland C++ 一无所知，但如果您在 C++ 代码中声明某些内容，并且该代码是作为 C 构建的，那么您通常需要`extern "C" { ... }`在声明周围加上。因此，在这种情况下，您的`Multicopter_Model.h`文件会想说这样的话：

```
#ifndef RTW_HEADER_Multicopter_Model_h_
#define RTW_HEADER_Multicopter_Model_h_

#ifdef __cplusplus
extern "C" {
#endif

void abcdefg();

#ifdef __cplusplus
}
#endif

#endif 
```

这样做的原因是，为了支持诸如重载之类的特性，从 C++ 代码构建的目标文件应用了一个名为*name mangling*的东西，因此（例如）一个`foo`接受 an`int`并返回 an的函数`int`实际上可能被称为`foo__Rint_Aint`类似编码该信息。（注 1：实名修改约定更加简洁和神秘。注 2：理论上可以通过名称修改以外的方式实现相同的目的，但实际上每个人都会进行名称修改。注 3：不同的编译器执行不同形式的名称修改.) 所以当 C++ 编译器看到`abcdefg`如果没有神奇的注释告诉它“这真的是 C，而不是 C++”，名称就会被破坏，编译后的代码实际上希望找到一个名为（在我编造的名称修改约定中）`abcdefg_Rvoid_Anone`或其他东西的函数。该函数不存在，因为构建的 C 编译器`Form1.obj`不执行 C++ 名称修改，因此链接器无法找到它要查找的内容。

链接器的错误消息中隐藏着一些线索。你会注意到它说它找不到`abcdefg()`，而不仅仅是`abcdefg`. 那是因为参数列表被编码成它正在寻找的名称。链接器友好地报告名称的人类可读版本，而不是它实际寻找的任何损坏的怪物。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T08:11:25.207

请参阅 C++ FAQ Item [[32.4] How can I modify my own C header files so that it's more easier to #include them in C++ code](http://www.parashift.com/c++-faq-lite/mixing-c-and-cpp.html#faq-32.4)。（实际上阅读[第 32 节](http://www.parashift.com/c++-faq-lite/mixing-c-and-cpp.html)的全部内容。）。利用：

```
#ifndef RTW_HEADER_Multicopter_Model_h_
#define RTW_HEADER_Multicopter_Model_h_

#ifdef __cplusplus
 extern "C" {
#endif 

void abcdefg();

#ifdef __cplusplus
 }
#endif 
#endif */ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T08:14:18.397

对于在 C++ 中工作的函数重载和覆盖，所有 C++ 编译器都会在函数名称中添加信息（参见[http://en.wikipedia.org/wiki/Name_mangling#Name_mangling_in_C.2B.2B](http://en.wikipedia.org/wiki/Name_mangling#Name_mangling_in_C.2B.2B)）。C 没有，因此当您在 C++ 中有原型时，生成的符号名称将与 C 编译器生成的符号名称不同。

请参阅有关如何解决此问题的其他答案。

# mysql - 如何为 mysql 的 memc_set() 函数设置不到期

> ID：11029067
> 
> 赞同：0
> 
> 时间：2012-06-14T08:07:27.173
> 
> 标签：mysql, memcached, mysql-5.1

我是 MYSQL 的新手，在 MYSQL5.1 的 memcached UDF 函数中遇到问题。如何设置`memc_set()`功能不过期？因为一个数据已经存储在 memcached 中，一段时间后它会显示出来`NULL`。

示例查询在这里：

```
 SELECT id, name, ccode, createdat, updatedat,
  memc_set(concat('TEST:id:',id), id),
  memc_set(concat('TEST:name:',name), name),
  memc_set(concat('TEST:ccode:', ccode), ccode),
  memc_set(concat('TEST:createdat:', createdat), createdat),
  memc_set(concat('TEST:updatedat:', updatedat), updatedat)
  from test.CTEST; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T09:04:41.017

您可以将过期时间设置为 0 值，这意味着没有过期时间。但这并不能保证您的数据不会被删除，它还​​取决于您分配给 memcached 的内存。它使用 LRU 方法来确定由于内存不足而将删除哪些数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T08:12:41.787

Memcached[不是持久数据存储](http://code.google.com/p/memcached/wiki/NewOverview#Forgetting_Data_is_a_Feature)。如果您需要一个行为有点相似，请使用 NoSQL DB。

# iphone - 子项目头文件导入问题

> ID：11029070
> 
> 赞同：1
> 
> 时间：2012-06-14T08:07:41.713
> 
> 标签：iphone, import, subproject

`MySubproject`我在我的主项目（ ）中创建了一个子项目（`TestProject`）。在子项目中，我有 1 个视图控制器（`subprojectviewcontroller.m`）。我想在我的主项目中加载这个 VC。但是当我`#import subprojectviewcontroller.h`在我的`TestProject.m`文件中写入时，它说找不到错误头文件。

*如何在主项目中导入子项目的文件？*

# user-interface - 使用 UIAutomation 框架的 iPhone App UI 自动化？

> ID：11029071
> 
> 赞同：0
> 
> 时间：2012-06-14T08:07:44.397
> 
> 标签：user-interface, automation, ui-automation, ios-ui-automation

大家好，我手头有一个严重的问题，我在我的应用程序中使用了一个导航栏控制器，在该栏中我有一个右键，其代码编写如下：

```
 UIBarButtonItem *rightButton = [[UIBarButtonItem alloc] init];
    rightButton.action = @selector(loadLeaseView);
    rightButton.target = self;
    rightButton.title = @"Next";
    rightButton.style = UIButtonTypeDetailDisclosure;
    rightButton.isAccessibilityElement = YES;
    rightButton.accessibilityLabel = @"Next";

    self.navigationItem.leftBarButtonItem = nil;
    self.navigationItem.hidesBackButton = YES;
    self.navigationItem.rightBarButtonItem  = rightButton;
    [rightButton release]; 
```

我也为这个按钮和`isAccessible`标志设置了可访问性标签，并且我编写了一个 java 脚本来测试它，它基本上打开了应用程序并点击这个按钮，以便我们可以移动到应用程序中的下一页，但问题是脚本无法点击按钮，我编写的java脚本如下 - ：

```
UIALogger.logStart("Starting Test");
var target = UIATarget.localTarget().frontMostApp().mainWindow();
var navBar = target.navigationBar().navigationItem();

var button = navBar.rightButton();
button.tap(); 
```

上面的脚本似乎不起作用，任何人都可以帮助我，每次我尝试使用它说的工具运行脚本时`"Fail"`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T17:59:20.277

我不相信 navigationItem 是 UIAutomation 中的一个函数。

我认为您正在寻找的东西更像是……</p>

```
var target = UIATarget.localTarget();
var app = target.app = target.frontMostApp();
var navBar = app.mainWindow().navigationBar();
var button = navBar.rightButton(); 
button.tap(); 
```

# mysql - 关于mysql上的外键

> ID：11029078
> 
> 赞同：0
> 
> 时间：2012-06-14T08:08:14.190
> 
> 标签：mysql, foreign-keys

我正在将旧的 Sybase 数据库迁移到 MySQL，我必须创建外键。现在，由于 Sybase 导出它的数据，我尝试使用它在 MySQL 上的查询：

```
ALTER TABLE Mosaico.fornit_col
ADD FOREIGN KEY fkey_fco_fornit_maz ( fco_idformaz ) 
REFERENCES Mosaico.fornit_maz ( fma_id );
--
ALTER TABLE Mosaico.fornit_col
ADD FOREIGN KEY fkey_fco_mater_col ( fco_idmatcol ) 
REFERENCES Mosaico.mater_col ( mco_id );
-- 
```

并且似乎效果很好。如果我在 MySQL 管理控制台上执行它们，查询会起作用，但在 Workbench 上，第二个会给出这个错误：

```
ALTER TABLE Mosaico.fornit_col ADD FOREIGN KEY fkey_fco_mater_col ( fco_idmatcol )  REFERENCES Mosaico.mater_col ( mco_id ) Error Code: 1050\. Table '.\mosaico\fornit_col' already exists 
```

有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T18:13:00.623

在此处查看错误报告：

[MySQL 错误 55296](http://bugs.mysql.com/bug.php?id=55296)

最后，有问题的人升级了他们的服务器并解决了问题。通过阅读它，我不确定某处是否存在错误。他们确实有一些解决方法，例如输入约束名称/更改它们。尝试他们的一些修复。如果您认为这是相同的，并且您可以重复错误，我会要求重新打开该错误。

有一次，他们提到类型不匹配并且工作台响应错误错误（应该是 errno 150 或 errno 121）。您可以在此处查看这些错误的原因： [MySQL Foreign Key Errors and Errno 150](http://eliacom.com/wpErrNo150.php)

# java - 如何使用spring在struts2动作中注入依赖项？

> ID：11029079
> 
> 赞同：4
> 
> 时间：2012-06-14T08:08:32.277
> 
> 标签：java, spring, struts2

我有一个基于*struts2*的遗留 Web 应用程序（主要使用注释）。在调试时，我发现所有依赖项（如服务层和 dao 层）都在 struts 2 操作中自动注入。我期待必须定义一些弹簧拦截器，`struts.xml`其中必须这样做。

但是我在那里没有找到任何与弹簧相关的拦截器。同样在`web.xml`我没有找到任何必须做这种工作的相关东西。我不确定如何在*struts2*动作中注入依赖项（使用*spring* ） ......

 *`struts2-convention-plugin-2.2.3.1.jar`我可以在类路径中看到文件。这是否意味着`filterDispatcher`在运行时查找此 jar，如果找到，则在操作中注入依赖项。在此过程中是否有任何拦截器也有帮助？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T09:00:47.087

请参考`struts-plugin.xml`，`struts2-spring-plugin-x.x.x.x.jar`你可以找到关于*对象工厂和自动装配拦截器*的配置。它使用了*struts2*的插件功能，您可以在 Struts 指南中搜索“插件”以获取详细信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T13:49:55.513

如果依赖注入是使用 spring 完成的，请查看[spring 插件](http://struts.apache.org/2.x/docs/spring-plugin.html)。

如果没有，struts2 有自己的[Dependency Injection Implementation](http://struts.apache.org/2.0.11/docs/dependency-injection.html)
看看[Core Developers Guide](http://struts.apache.org/2.2.3.1/docs/core-developers-guide.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T08:20:03.677

必须有一个拦截器..它在动作类之前执行，并且正在使用 Java 反射 API..或 Struts 2 反射工具进行这种依赖注入..http://struts.apache.org/2.3.4/struts2-plugins /struts2-convention-plugin/apidocs/org/apache/struts2/convention/ReflectionTools.html 检查拦截器堆栈。*

# iphone - 一个View可以添加多少个UILabel

> ID：11029083
> 
> 赞同：0
> 
> 时间：2012-06-14T08:08:50.280
> 
> 标签：iphone, ios

我想在一个 UIView 中添加大约 300 个网格，如果我使用 300 个 UILabel 可以吗？或者，除了 UILabel，还有什么更好的方法来处理它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T08:11:43.937

网格意味着您可以制作 300 行的 UITableView 并且您可以在 UIView 中制作任意数量的标签

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T08:12:13.223

或许从[这里](https://stackoverflow.com/questions/1577114/fast-2-dimensional-table-view)开始。除此之外，我没有看到 UILabels 有问题，尽管如此，它可能会变慢。想象一下您将渲染多少个对象...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T13:23:26.947

如果您使用可重复使用的单元格创建 UITableView，则任何时候只会填充可见单元格，因此任何时候只有那些 UILabel（假设每个单元格一个或多个）实际存在。不是问题。

# rest - 通过 REST API、POST 将工件发布到 Nexus

> ID：11029086
> 
> 赞同：3
> 
> 时间：2012-06-14T08:09:04.907
> 
> 标签：rest, publish, nexus

不要精通 Nexus 管理....

“手动”上传工件时，打开控制台查看网络调用。想跳过使用 Maven 或 Ivy 上传到 Nexus。一切明智的查询都通过 ExtJS XHR 调用，除了在 Chrome 开发人员工具中显示为 Documents 调用的工件信息的发布（假设这是通过 ExtJS 发出的表单提交）。

没有尝试使用 curl 进行模拟（如果可能，不知道如何在 curl 中处理多部分表单），但这是除了从 Ivy 或 Maven 进行传统发布之外“发布”工件的唯一方法吗？看起来 Nexus 有一个 Java API，但希望留在 REST HTTP 世界中（希望 Nexus REST 服务基本上使用 apache 的 HTTPCLIENT 之类的多部分表单发布）。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-10-31T05:58:36.877

使用卷曲：

```
curl -v \
    -F "r=releases" \
    -F "g=com.acme.widgets" \
    -F "a=widget" \
    -F "v=0.1-1" \
    -F "p=tar.gz" \
    -F "file=@./widget-0.1-1.tar.gz" \
    -u myuser:mypassword \
    http://localhost:8081/nexus/service/local/artifact/maven/content 
```

对于不使用 maven 的人，这将适用于非 java 依赖项。请参阅我对此答案的评论：[https](https://stackoverflow.com/a/19699327/231573) ://stackoverflow.com/a/19699327/231573 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T23:07:30.810

从 Sonatype 找到这个回复：

*   [https://getsatisfaction.com/sonatype/topics/how_can_we_upload_artifacts_via_the_rest_api](https://getsatisfaction.com/sonatype/topics/how_can_we_upload_artifacts_via_the_rest_api)

简而言之，可以直接 POST 工件，但是 Maven 模块所需的其他文件呢？最重要的是 POM...

上传文件最简单的方法是使用 deploy-file 插件：

[将工件上传到 Nexus，无需 Maven](https://stackoverflow.com/questions/4029532/upload-artifacts-to-nexus-without-maven/4036706#4036706)

不使用 Maven 客户端是否有令人信服的理由？

# rabbitmq - RabbitMQ AMQP 协议不匹配

> ID：11029091
> 
> 赞同：1
> 
> 时间：2012-06-14T08:09:29.663
> 
> 标签：rabbitmq

```
 ConnectionFactory factory = new ConnectionFactory();
    factory.setHost(host);
    Connection connection = factory.newConnection(); 
```

> ```
> com.rabbitmq.client.MalformedFrameException: AMQP protocol version mismatch; we are version 0-9-1, server sent signature 1,1,0,10 
> ```

当我尝试创建一个新的 RabbitMQ 连接时，我收到了这个错误。奇怪的是，我在两个不同的 linux 机器上安装了 RabbitMQ 2.8.2 服务器，一个可以工作，另一个不能。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T08:19:19.417

其中一个盒子上是否运行了 Apache QPID？这可以解释你的版本不匹配。RabbitMQ 服务器目前仅达到 0.9.1。

# java - 如何将 Class 对象写回 .class 文件？

> ID：11029093
> 
> 赞同：-1
> 
> 时间：2012-06-14T08:09:38.173
> 
> 标签：java

我知道我们可以从 .class 文件加载一个对象，我的问题是如何反向执行。我`Class.forName("classname")`用来获取 Class 对象，如何将其写回 .class 文件？序列化类不是这个问题的重点，因为加载的文件可能没有实现 Serializable 接口。

我问这个的原因是我需要将 Class 对象转换为 java 源文本字符串。如果有人知道如何将 Object 类直接转换为源代码，那可能会很有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T08:18:02.607

如果您想将功能等添加到可以使用的类中。

[http://www.jboss.org/javassist](http://www.jboss.org/javassist)

例子：

```
 clazz = fullclass name, method = "public void doxxx(){ int x =0;x++}"

private static void createMethod(String clazz,String method){
        ClassPool pool = ClassPool.getDefault();
        try {
            Class<?> class1 =  Class.forName(clazz);
            class1.getProtectionDomain().getCodeSource().getLocation();
            pool.insertClassPath(new ClassClassPath(class1));
        } catch (ClassNotFoundException e) {
            e.printStackTrace();
        }
        CtClass pt;
        try {

            pt = pool.get(clazz);

            CtMethod m = CtNewMethod.make(method, pt);
            pt.addMethod(m);
            pt.writeFile();
            pt.toClass();

        } catch (NotFoundException e) {
            e.printStackTrace();
        } catch (CannotCompileException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
    } 
```

# android - OpenGL-ES 1.0/2.0 中的正交/投影

> ID：11029095
> 
> 赞同：0
> 
> 时间：2012-06-14T08:09:41.167
> 
> 标签：android, opengl-es-2.0

以前我做过一个关于 OpenGL-ES 1.0 的教程。作为参考，可以在这里找到： [SpaceInvaders](http://www.androidpit.de/de/android/wiki/view/Spieleentwicklung_101)（虽然它是德语）

我现在的目标是将游戏移植到 OpenGL-ES 2.0。到目前为止，我能够加载网格和纹理并渲染它们。

现在我想有一个简单的矩形作为我的背景，上面有纹理。这应该在 Ortho-Perspective 中呈现。然后我更改为 Projection-Perspective 并绘制一个简单的框。当我现在调用**setLookAtM(...)**时，我得到一个空白画面。这是代码：

```
public void onDrawFrame(GL10 gl) {
   long currentFrameStart = System.nanoTime();
   deltaTime = (currentFrameStart - lastFrameStart) / 1000000000.0f;
   lastFrameStart = currentFrameStart;

   GLES20.glClear(GLES20.GL_COLOR_BUFFER_BIT | GLES20.GL_DEPTH_BUFFER_BIT);
   GLES20.glUseProgram(programHandle);
   checkGlError("glUseProgram");

   mMVPMatrixHandle = GLES20.glGetUniformLocation(programHandle, "uMVPMatrix");
   mMVMatrixHandle = GLES20.glGetUniformLocation(programHandle, "uMVMatrix");
   mLightPosHandle = GLES20.glGetUniformLocation(programHandle, "uLightPos");
   mTextureUniformHandle = GLES20.glGetUniformLocation(programHandle, "uTexture");

   mPositionHandle = GLES20.glGetAttribLocation(programHandle, "aPosition");
   mColorHandle = GLES20.glGetAttribLocation(programHandle, "aColor");
   mNormalHandle = GLES20.glGetAttribLocation(programHandle, "aNormal");
   mTextureCoordinateHandle = GLES20.glGetAttribLocation
      (programHandle,"aTexCoordinate");

   Matrix.setIdentityM(mLightModelMatrix, 0);
   Matrix.multiplyMV(mLightPosInWorldSpace, 0, mLightModelMatrix, 0,    
      mLightPosInModelSpace, 0);
   Matrix.multiplyMV(mLightPosInEyeSpace, 0, mViewMatrix, 0, mLightPosInWorldSpace, 0);

   Matrix.orthoM(mProjectionMatrix, 0, -width / 2, width / 2, -height / 2, height / 2, 
      0, 100);
   drawBackground();

   GLES20.glEnable(GLES20.GL_CULL_FACE);

   Matrix.setIdentityM(mProjectionMatrix, 0);
   final float ratio = (float) width / height;
   final float left = -ratio;
   final float right = ratio;
   final float bottom = -1.0f;
   final float top = 1.0f;
   final float near = 1.0f;
   final float far = 100.0f;
   Matrix.frustumM(mProjectionMatrix, 0, left, right, bottom, top, near, far);

   Matrix.setLookAtM(mViewMatrix, 0, 0, 6, 2, 0, 0, -4, 0, 1, 0);

   drawBlock();
} 
```

这里的drawBackground方法：

```
private void drawBackground() {
   GLES20.glActiveTexture(GLES20.GL_TEXTURE0);
   GLES20.glBindTexture(GLES20.GL_TEXTURE_2D, backgroundTextureHandle);
   GLES20.glUniform1i(mTextureUniformHandle, 0);

   Matrix.setIdentityM(mModelMatrix, 0);
   Matrix.setIdentityM(mProjectionMatrix, 0);

   mBackgroundPositions.position(0);
   GLES20.glVertexAttribPointer(mPositionHandle, POSITION_DATA_SIZE, GLES20.GL_FLOAT, 
      false, 0, mBackgroundPositions);
   GLES20.glEnableVertexAttribArray(mPositionHandle);

   mBackgroundColors.position(0);
   GLES20.glVertexAttribPointer(mColorHandle, COLOR_DATA_SIZE, GLES20.GL_FLOAT, false, 
      0, mBackgroundColors);
   GLES20.glEnableVertexAttribArray(mColorHandle);

   mBackgroundNormals.position(0);
   GLES20.glVertexAttribPointer(mNormalHandle, NORMAL_DATA_SIZE, GLES20.GL_FLOAT, 
      false, 0, mBackgroundNormals);
   GLES20.glEnableVertexAttribArray(mNormalHandle);

   mBackgroundTextureCoordinates.position(0);
   GLES20.glVertexAttribPointer(mTextureCoordinateHandle, TEXTURE_COORD_DATA_SIZE,   
      GLES20.GL_FLOAT, false, 0, mBackgroundTextureCoordinates);
   GLES20.glEnableVertexAttribArray(mTextureCoordinateHandle);

   // This multiplies the view matrix by the model matrix, and stores the result in the MVP matrix
   // (which currently contains model * view).
   Matrix.multiplyMM(mMVPMatrix, 0, mViewMatrix, 0, mModelMatrix, 0);

   // Pass in the modelview matrix.
   GLES20.glUniformMatrix4fv(mMVMatrixHandle, 1, false, mMVPMatrix, 0);

   // This multiplies the modelview matrix by the projection matrix, and stores the result in the MVP matrix
   // (which now contains model * view * projection).
   Matrix.multiplyMM(mMVPMatrix, 0, mProjectionMatrix, 0, mMVPMatrix, 0);

   // Pass in the combined matrix.
   GLES20.glUniformMatrix4fv(mMVPMatrixHandle, 1, false, mMVPMatrix, 0);

   // Pass in the light position in eye space.
   GLES20.glUniform3f(mLightPosHandle, mLightPosInEyeSpace[0], mLightPosInEyeSpace[1], 
      mLightPosInEyeSpace[2]);

   ShortBuffer buf = 
      ByteBuffer.allocateDirect(12).order(ByteOrder.nativeOrder()).asShortBuffer();
   buf.put(new short[] {0, 1, 2, 0, 2, 3});
   buf.position(0);

   // Draw the rectangle.
   GLES20.glDrawElements(GLES20.GL_TRIANGLES, 6, GLES20.GL_UNSIGNED_SHORT, buf);
   checkGlError("glDrawArrays");
 } 
```

最后是 drawBlock 方法：

```
private void drawBlocks() {
   GLES20.glUseProgram(colorProgramHandle);
   checkGlError("glUseProgram");

   mMVPMatrixHandle = GLES20.glGetUniformLocation(colorProgramHandle, "uMVPMatrix");
   mMVMatrixHandle = GLES20.glGetUniformLocation(colorProgramHandle, "uMVMatrix");
   mLightPosHandle = GLES20.glGetUniformLocation(colorProgramHandle, "uLightPos");
   mTextureUniformHandle = GLES20.glGetUniformLocation(colorProgramHandle, "uTexture");

   mPositionHandle = GLES20.glGetAttribLocation(colorProgramHandle, "aPosition");
   mColorHandle = GLES20.glGetAttribLocation(colorProgramHandle, "aColor");
   mNormalHandle = GLES20.glGetAttribLocation(colorProgramHandle, "aNormal");
   mTextureCoordinateHandle = GLES20.glGetAttribLocation(colorProgramHandle, 
       "aTexCoordinate");

   Matrix.setIdentityM(mProjectionMatrix, 0);
   Matrix.setIdentityM(mModelMatrix, 0);

   blockMesh.vertexBuffer.position(0);
   GLES20.glVertexAttribPointer(mPositionHandle, POSITION_DATA_SIZE, GLES20.GL_FLOAT, 
      false, 0, blockMesh.vertexBuffer);
   GLES20.glEnableVertexAttribArray(mPositionHandle);

   blockMesh.colorBuffer.position(0);
   GLES20.glVertexAttribPointer(mColorHandle, COLOR_DATA_SIZE, GLES20.GL_FLOAT, false, 
      0, blockMesh.colorBuffer);
   GLES20.glEnableVertexAttribArray(mColorHandle);

   blockMesh.normalBuffer.position(0);
   GLES20.glVertexAttribPointer(mNormalHandle, NORMAL_DATA_SIZE, GLES20.GL_FLOAT, 
      false, 0, blockMesh.normalBuffer);
   GLES20.glEnableVertexAttribArray(mNormalHandle);

   // This multiplies the view matrix by the model matrix, and stores the result in the 
   MVP matrix
   // (which currently contains model * view).
   Matrix.multiplyMM(mMVPMatrix, 0, mViewMatrix, 0, mModelMatrix, 0);

   // Pass in the modelview matrix.
   GLES20.glUniformMatrix4fv(mMVMatrixHandle, 1, false, mMVPMatrix, 0);

   // This multiplies the modelview matrix by the projection matrix, and stores the 
   result in the MVP matrix
   // (which now contains model * view * projection).
   Matrix.multiplyMM(mMVPMatrix, 0, mProjectionMatrix, 0, mMVPMatrix, 0);

   // Pass in the combined matrix.
   GLES20.glUniformMatrix4fv(mMVPMatrixHandle, 1, false, mMVPMatrix, 0);

   // Pass in the light position in eye space.
   GLES20.glUniform3f(mLightPosHandle, mLightPosInEyeSpace[0], mLightPosInEyeSpace[1], 
      mLightPosInEyeSpace[2]);

   // Draw the cube.
   GLES20.glDrawElements(GLES20.GL_TRIANGLES, 36, GLES20.GL_UNSIGNED_SHORT, 
      blockMesh.indexBuffer);
   checkGlError("glDrawElements");
 } 
```

我不确定我在正交和投影透视方面缺少什么。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T08:19:12.327

您正在擦除投影矩阵作为 drawBlocks 的一部分。如果您想使用已经计算的透视投影来绘制它，我认为您不想这样做。

```
...
Matrix.setIdentityM(mProjectionMatrix, 0);   <-----
Matrix.setIdentityM(mModelMatrix, 0);

blockMesh.vertexBuffer.position(0);
... 
```

# sql-server-2008 - 将 IP 存储为 Varchar 有什么缺点吗

> ID：11029101
> 
> 赞同：0
> 
> 时间：2012-06-14T08:09:58.963
> 
> 标签：sql-server-2008, ip

我在这里阅读了很多主题，人们倾向于将 IP 地址存储为 int 或 Byte[]，将 ip 地址存储为 varchar 有什么缺点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T08:13:18.920

我的猜测是，当存储在 varchar 中时，查找某个 ip 会更难，而且它还需要更多的空间来存储。缺点是，为了将其存储为整数，您需要先对其进行转换以去除点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T08:13:35.517

存储为 varchar 会占用数据库中的更多空间。通过转换和存储为 int，您将有更少的存储需求。如果你有很多行，那就更成问题了。

它有点过时了，但这里有更多信息：http: [//web.archive.org/web/20150511204915/http ://sqlserver2000.databases.aspfaq.com/how-should-i-store-an-ip -address-in-sql-server.html](http://web.archive.org/web/20150511204915/http://sqlserver2000.databases.aspfaq.com/how-should-i-store-an-ip-address-in-sql-server.html)

# python - 如何从 Django 中的视图呈现模板标签

> ID：11029103
> 
> 赞同：1
> 
> 时间：2012-06-14T08:10:07.157
> 
> 标签：python, django, django-templates, django-views

我只需要转义部分用户输入以进行输出。例如

```
Hey a status update for <a href="/profile/2353">@Friend Name</a> 
```

我只需要转义文本的链接部分，以防有人做类似的事情

```
<h1>HaCkEDED!!!!</h1> 
```

所以我无法逃脱整个街区。所以我尝试了这个

```
'{%% autoescape off %%} <a href="/profile/%s">%s</a>{%% endautoescape %%}' % (tag, at) 
```

当我将其发送到浏览器中的输出时，这就是我得到的

```
 {% autoescape off %} <a href="/profile/2353">@Friend Name</a>{% endautoescape %} 
```

我怎样才能让自动转义工作？我不能使用单独的变量并放入

```
{{ tag | safe }} 
```

因为一篇文章可能有多个标签，标签将位于不同的位置。那么我怎样才能让 Django 让我输出它的一个模板呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T08:36:46.053

我不完全了解您要做什么，但是在视图中，您可以使用`django.utils.safestring.mark_safe`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T08:39:56.640

我认为使用[自定义模板标签或过滤器](https://docs.djangoproject.com/en/1.4/howto/custom-template-tags/)更容易做到这一点，可能使用一些可以识别标签的[正则表达式。](http://docs.python.org/howto/regex.html)

# javascript - 如何计算数据列表项（这是一个图像）

> ID：11029104
> 
> 赞同：-1
> 
> 时间：2012-06-14T08:10:10.727
> 
> 标签：javascript, asp.net, datalist

我想在javascript中的Datalist中计算项目图像（ImageUploaded）我该怎么做。

```
 <asp:DataList ID="DataListUploadedPhotos" ClientIDMode="Static" runat="server" RepeatDirection="Horizontal" RepeatColumns="3" CellPadding="10" CellSpacing="10" OnItemDataBound="DataListUploadedPhotos_ItemDataBound" ItemStyle-VerticalAlign="Top">
<ItemTemplate>
<table border="0" cellpadding="2" cellspacing="0" align="left" width="100%">
<tr> <td align="left" style="width:200px; height:30px">
    <b>
<asp:Label ID="LabelImageTitle" runat="server" Text='<%#Eval("title")%>' Height="10px"></asp:Label>
 </b> </td> <td align="right">  </td>  </tr> <tr>  <td align="center" colspan="2" style="background-color: #eeeeee; width: 260px; height: 260px" valign="middle">
 <asp:Image ID="ImageUploaded" runat="server" ImageUrl='<%#"../upload/photos/LargeThumbs/"+Eval("fileName")%>'
AlternateText='<%#Eval("title")%>' ClientIDMode="Static"  Style="border: 5px solid #eeeeee;" onclick='<%# "return ImageSelected(this.id, " + Eval("photoId") +",\"ContentPlaceHolder1_txtIds\");"%>' /></td>
                                                                </tr>
                                                                <tr>
                                                                    <td>
  <a href='<%#"../upload/photos/PopUpThumbs/"+Eval("fileName")%>'>
 <asp:ImageButton ID="ImageButtonResultClose" runat="server" ImageUrl="~/images/enlarge.png" /> </a> 
 <asp:Label ID="LabelPhotoid" runat="server"  Text='<%#Eval("photoId")%>'></asp:Label>
                                                                        </td>
                                                                        <td>
 <asp:ImageButton ID="details" runat="server" ImageUrl="~/images/details.png" OnClick="details_Click"
                                                                            CommandArgument='<%#Eval("photoId")%>'/>
</td></tr>
                                                                <tr>
                                                                    <td>
                                                                        &nbsp;
                                                                    </td>
                                                                </tr>
                                                            </table>
                                                        </ItemTemplate>
                                                    </asp:DataList> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T08:57:40.617

例如，给你的图像一个类`ClassName = "imgUploaded"`。如果你使用 jQuery，那么 img 的计数将是`$(".imgUploaded").length`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T08:47:04.237

您需要计算要上传图像的文件夹中的项目像这样

```
string mydir = @"C:\images\";
string[] files;
int numberofFiles;

files = Directory.GetFiles(mydir);
numberofFiles = files.Length;

string nextFileName = (numberofFiles + 1).ToString() + ".jpg"; 
```

让我知道这是否有帮助

# iphone - 如果应用程序名称包含撇号，则 xcode 4.3 中的符号化崩溃日志不起作用

> ID：11029112
> 
> 赞同：0
> 
> 时间：2012-06-14T08:11:13.583
> 
> 标签：iphone, objective-c, ios, xcode4.3, symbolicatecrash

我的应用程序图标名称（跳板中的应用程序名称）如：My'App

当我在组织者中看到崩溃日志时，它们没有被符号化。如果我删除名称的 '（如 MyApp），那么它们就是符号化的。

有人有同样的问题吗？有没有办法让它工作？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T08:35:40.360

尝试创建一个 .sh 文件来执行以下操作：

1) 将您的应用名称重命名为 true

2）做一个象征性的命令

为了让他跑

```
sudo bash Symbolicate.sh 
```

# jquery - 使用谷歌地图 API v3

> ID：11029116
> 
> 赞同：0
> 
> 时间：2012-06-14T08:11:27.907
> 
> 标签：jquery, html, css, google-maps, google-maps-api-3

[在这篇文章](https://stackoverflow.com/questions/10906805/finding-streets-get-their-coordinates-and-calculating-distances-between-marker)之后，我正在尝试使用 Google Mps API 获取两个位置之间的距离。我还找到了[以下示例](http://jsfiddle.net/foxwisp/vQGMr/1/)。

我已经集成了相同的代码，但我没有看到任何结果。我在这里做错了什么？

任何人都可以让我知道已为 Google Maps APIv3 指示示例的任何链接吗？

```
 <html>
  <head>
  <style>
  h1{
      font-family:arial,helvetica,sans-serif;
      font-size:20px;
      font-weight:bold;
  }
  p{
      font-family:arial,helvetica,sans-serif;
  }
  </style>
  <script include="/home/rajeev/Desktop/ge/jquery-1.7.2.js"></script>
  <script>
  var map;
      var marker, marker2;
      function initialize() {
          var mapDiv = document.getElementById('map-canvas');
          map = new google.maps.Map(mapDiv, {
              center: new google.maps.LatLng(-36.86501268451408, 174.723858833313),
              zoom: 16,
              mapTypeId: google.maps.MapTypeId.ROADMAP
          });
      }

      $(function() {
          initialize();

         var geocoder = new google.maps.Geocoder();

         //Geocode the first address
         geocoder.geocode({
            address : '27 West View Road Westmere Auckland New Zealand',
            region: 'no'
         }, function(results, status){
            //Create the first marker
            marker = new google.maps.Marker({
                position: new google.maps.LatLng(results[0].geometry.location.lat(), results[0].geometry.location.lng()),
                map: map,
            });

            //Now geocode the second address
            geocoder.geocode({
              address : '37 Old Mill Road Westmere Auckland New Zealand',
              region: 'no'
            }, function(results, status){
              //Create the second marker
              marker2 = new google.maps.Marker({
                  position: new google.maps.LatLng(results[0].geometry.location.lat(), results[0].geometry.location.lng()),
                  map: map,
              });

              //Now create the line (we have both markers at this point guaranteed)
              var line = new google.maps.Polyline({
                path: new Array(marker.getPosition(),marker2.getPosition()),
                strokeColor: '#ff0000',
                strokeOpacity: 1.0,
                strokeWeight: 2
              });

              line.setMap(map);

              //Now calculate the distance
              var R = 6371; // km
              var dLat = (marker.getPosition().lat() - marker2.getPosition().lat()).toRad();
              var dLon = (marker.getPosition().lng()- marker2.getPosition().lng()).toRad();
              var lat1 = marker2.getPosition().lat().toRad();
              var lat2 = marker.getPosition().lat().toRad();
              var a = Math.sin(dLat / 2) * Math.sin(dLat / 2) + Math.sin(dLon / 2) * Math.sin(dLon / 2) * Math.cos(lat1) * Math.cos(lat2);
              var c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));
              var distance = Math.ceil(R * c * 1000);
                $('p').html('The distance between the two addresses is:' + distance +'m');  
            });
         });
      });

    if (typeof(Number.prototype.toRad) === "undefined") {
      Number.prototype.toRad = function() {
        return this * Math.PI / 180;
      }
    }

  </script>
  </head>
  <body>

  <h1>Distance polyline between two street addresses</h1>
  <hr/>
  <p>
      </p>
  <hr/>
  <div id="map-canvas" style="width:500px;height:500px"></div>
  </body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T08:26:45.260

这是不正确的

```
<script include="/home/rajeev/Desktop/ge/jquery-1.7.2.js"></script> 
```

利用

```
<script src="/home/rajeev/Desktop/ge/jquery-1.7.2.js"></script> 
```

此外，包括 Google Maps API

```
<script src="http://maps.google.com/maps/api/js?sensor=false&.js"></script> 
```

您还可以使用来自 Google CDN 的 jQuery

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script> 
```

# android - 应用内计费 RESTORE_TRANSACTION：服务不可用错误

> ID：11029119
> 
> 赞同：0
> 
> 时间：2012-06-14T08:11:36.590
> 
> 标签：android, google-play, in-app-billing

我对应用内计费 RESTORE_TRANSACTION 命令有一个奇怪的问题。

发送到市场的每个请求 RESTORE_TRANSACTION 请求总是返回 RESPONSE_CODE=2 (SERVICE_UNAVAILABLE)，并且在 logcat 中我发现以下错误：

```
06-14 09:49:40.689: E/Volley(9348): [13] BasicNetwork.performRequest: Unexpected response code 429 for https://android.clients.google.com/vending/api/ApiRequest
06-14 09:49:40.689: E/Finsky(9348): [1] NotifyingErrorListener.onErrorResponse: Server error on InAppPurchaseInformationRequest: com.android.volley.ServerError
06-14 09:49:40.709: D/Finsky(9348): [1] MarketBillingService.sendResponseCode: Sending response RESULT_SERVICE_UNAVAILABLE for request 5566380985346120640 to resistorcalc.main. 
```

直到昨天，RESTORE_TRANSACTION 命令才起作用。现在我读到其他问题，这可能是由于在短时间内向市场发送了太多 RESTORE_TRANSACTION 请求，实际上可能是开发过程中出现错误的情况，但我认为我在不到 40/50 的时间内发送了请求1分钟。

但我认为这可能是一个暂时的问题，我等了几个小时。但是从昨天开始，我仍然收到 SERVICE_UNAVAILABLE 错误，并且无法测试该命令。有关如何解决该问题的任何帮助？

我还尝试从市场上删除已发布的草稿，并用更新版本替换它。我还从设备上卸载了该应用程序并从头开始重新安装，但没有运气。任何想法？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T08:35:49.023

你可能只需要再等一会儿。这要么是临时阻止，要么是 Google 方面的问题。您可以尝试使用不同的 Google 帐户进行测试，看看是否会有所不同。此外，请确保您缓存市场响应并仅在首次安装应用程序时发出 RESTORE_TRANSACTIONS。

# html - 全尺寸链接作为缩进嵌套无序列表中的块？

> ID：11029120
> 
> 赞同：3
> 
> 时间：2012-06-14T08:11:37.140
> 
> 标签：html, css, list, hyperlink, nested

我有一个嵌套列表，其中包含链接。不幸的是，我无法更改 HTML 结构，因为 HTML 是按原样生成的。

# HTML

```
<ul>
    <li>
        <a href="http://www.google.com">Link Level 1</a>
            <ul>
                <li><a href="http://www.amazon.com">Nested Link</a></li>
                <li><a href="http://www.amazon.com">Nested Link</a></li>
                <li><a href="http://www.amazon.com">Nested Link</a></li>
            </ul>
    </li>
</ul> 
```

# 布局

我必须缩进嵌套列表，并且我正在使用`margin-left`嵌套列表上的 a 来执行此操作，例如：

```
ul {
    width: 200px;
}
ul li ul {
    margin-left: 200px;
} 
```

# 问题

由于嵌套列表的高度，父`li`级会调整大小，但链接的`li`高度仅为一行。链接的大小没有`li`/ 完全可点击的那么大。

我无法使链接成为父级的大小`li`并且可以点击。我在想类似的东西：

```
ul li a {
    min-height: 20px;
    height: 100%;
    display: block; /* or inline-block */
    /* z-index has no effect on this */
} 
```

[http://imageshack.us/photo/my-images/7/sitemapul.png/](http://imageshack.us/photo/my-images/7/sitemapul.png/)

**请查看示例更多关于代码的详细信息。**

# 样本

您可以在此处找到一个简单的工作示例和带有嵌套列表的不工作示例：http:
[//jsfiddle.net/Dc6wS/3/](http://jsfiddle.net/Dc6wS/3/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T08:22:33.127

我能想到的唯一解决方案是使用 jQuery / javascript。

[http://jsfiddle.net/Dc6wS/7/](http://jsfiddle.net/Dc6wS/7/)或[http://jsfiddle.net/Dc6wS/8/](http://jsfiddle.net/Dc6wS/8/)

# python - 将二进制转换为十六进制等。没有功能。？

> ID：11029122
> 
> 赞同：1
> 
> 时间：2012-06-14T08:12:05.083
> 
> 标签：python, binary, hex, decimal

我需要一些帮助转换：

*   二进制 - 十六进制
*   二进制十进制
*   十六进制 - 十进制

反之亦然，使用 Python 而不使用函数，例如`binascii`

我懂一点Python，也懂一点数组。只是无法理解这一点。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-14T08:29:36.587

好吧，有内置的转换函数，如 bin 或 hex 或 int，我不确定这将如何影响您的“不使用函数”。您可以检查以下代码。

```
# Convert decimal to binary
>>> bin(10)
'0b1010'
>>> bin(10)[2:]
'1010'
>>> bin(10)[2:].zfill(8)
'00001010'
# Convert binary to decimal
>>> int('00001010',2)
10
# Convert decimal to hexadecimal
>>> hex(123)
'0x7b'
>>> hex(123)[2:]
'7b'
>>> hex(123)[2:].zfill(8)
'0000007b'
# Convert hexadecimal to decimal
>>> int('0000007b', 16)
123
# Convert binary to hexadecimal
>>> hex(int('1010', 2))
'0xa'
# Convert hexadecimal to binary
>>> bin(int('A', 16))
'0b1010' 
```

编辑：

示例算法..

```
def dec2bin(num):
    if num == 0: return '0'
    bin_str = ''
    while num > 0:
        bin_str = str(num % 2) + bin_str
        num = num / 2
    return bin_str 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T09:04:20.470

无功能更新：

```
>>> for c,i in enumerate(st):
...        a+=i
...        if (c+1)%4==0:
...         print MORSECODEMAP[a]
...         a='' 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-14T08:22:40.833

将字符串转换为以 2 为底的 int，然后转换为十六进制

```
>>> hex(int('010110', 2))
>>> '0x16'
>>> hex(int('0000010010001101', 2))
'0x48d' 
```

无功能：

101110101101 例如，要将 101110101101 转换为十六进制，请将其分成四部分： 1011 1010 1101 BAD
现在将每个组映射到其摩尔斯电码..（如下所示）

0000 0

0001 1

0010 2

0011 3

0100 4

0101 5

0110 6

0111 7

1000 8

1001 9

1010 一个

1011乙

1100摄氏度

1101 D

1110 东

1111 楼

# c - 如何释放 GUI 应用程序中分配的内存？

> ID：11029126
> 
> 赞同：0
> 
> 时间：2012-06-14T08:12:38.560
> 
> 标签：c, user-interface, gtk, malloc

我有一个用 C/gtk+(v 2.x) 编写的 GUI 应用程序。如果我单击主窗口的菜单项，将调用以下函数并显示一个对话框。

```
dialog_ui * create_dialog ()
{
    dlg = malloc (sizeof(dialog_ui));
    dlg->window = gtk_window_new (GTK_WINDOW_TOPLEVEL);
    ...
    gtk_widget_show_all (dlg->window);
    return dlg;
} 
```

这是`dialog_ui`结构

```
typedef struct _dialog_ui
{
    GtkWidget * window;
    ...
} dialog_ui; 
```

这是`dlg`头文件中的变量。

```
dialog_ui * dlg; 
```

我的问题是，我`malloc`在`create_dialog`函数中调用。但我不知道我可以从哪里调用`free`，因为 GUI 是事件驱动的。我想过`destroy-event`，但我想知道这样做的正确方法。有任何想法吗.. ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T22:10:40.843

通常，您有一个模态对话框，您使用`gtk_dialog_run()`而不是`gtk_widget_show()`. 在用户关闭对话框之前，该`gtk_dialog_run()`函数不会返回，返回一个响应，您可以使用该响应来确定他们是否单击了是、确定、取消、关闭等。您可以在[GtkDialog API 文档](http://developer.gnome.org/gtk/2.24/GtkDialog.html#gtk-dialog-run)中看到一个示例。

由于您只是展示自己的`GtkWindow`，因此您的主应用程序代码可以连接到 的`"destroy"`信号`GtkWindow`并释放引用该小部件的结构。

作为旁注，`malloc`您可能希望查看由 提供的一些[内存分配](http://developer.gnome.org/glib/2.28/glib-Memory-Allocation.html)功能，而不是使用`GLib`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T08:17:31.140

当您不再需要该对话框并且不再访问它时（例如当它关闭时），您可以释放分配的内存。在销毁事件中这样做是一个好地方。

# javascript - 刷新后，OpenLayers 弹出窗口在地图上仍然可见

> ID：11029127
> 
> 赞同：0
> 
> 时间：2012-06-14T08:12:41.727
> 
> 标签：javascript, popup, openlayers

我正在为地图上的某些项目添加弹出窗口。我每 30 秒刷新一次元素。这是问题所在：

*   我将鼠标悬停在一个元素上，然后将鼠标留在那里直到刷新

*   当我将鼠标移开时，弹出内容仍然存在（仅在放大/缩小或拖动地图时才会消失）

我尝试删除整个图层并再次添加它，删除所有标记，但没有任何变化。

弹出窗口是否以某种方式缓存？这可能是 OpenLayers 的错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T08:17:39.290

您可能希望在刷新事件处理程序中关闭任何弹出窗口。

在它们中的每一个上都可以通过`map.popups`和使用类似`toggle`或`destroy`或`hide`（取决于您的需要）的东西。

# nginx - squid 可以在 nginx 后面跑吗？

> ID：11029129
> 
> 赞同：5
> 
> 时间：2012-06-14T08:12:55.767
> 
> 标签：nginx, squid

我正在尝试在 nginx 后面运行一个 squid 服务器。我这样配置nginx：

```
server {
    listen     8080;
    location / {
        proxy_pass   http://localhost:3128;
        proxy_set_header Host  $host;
        proxy_set_header X-Real-IP   $remote_addr;
    }
} 
```

然后我将我的 http 网络代理设置为：

```
my-nginx-server-address:8080 
```

所以当我尝试查看谷歌主页时，nginx会收到请求：

```
Get http://www.google.com/ HTTP/1.1 
```

但是，当 nginx 将请求传递给 squid 时，它会将 request_uri 更改为

```
/ 
```

所以鱿鱼不行。有什么办法可以将 request_uri 设置回[http://www.google.com](http://www.google.com)然后将其传递给 squid？或者我可以在 nginx 后面运行 squid 的任何其他方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T11:05:15.623

试试 proxy_set_header Request-URI $request_uri;

在回复您的评论时，您可能还希望添加：

`upstream _squid { server localhost:3128; } server { ... proxy_pass http://_squid/$host$uri; }`

# ruby - 来自 Bash 脚本的另一个用户下的 Ruby RVM

> ID：11029132
> 
> 赞同：0
> 
> 时间：2012-06-14T08:13:05.160
> 
> 标签：ruby, bash, rvm, sudo, su

**通过su**命令和另一个脚本在另一个用户下启动 ruby​​ 脚本的最佳方法是什么？

我有一个带有以下命令的 bash 脚本来启动独角兽：

```
sudo -u unicornuser sh -l -c "bundle exec unicorn_rails -E production -D" 
```

这个脚本是一个**init.d**脚本，它在系统启动时执行，也可以手动执行。

问题是系统上的默认红宝石是 1.8，其他红宝石（1.9）在 RVM 下工作。我需要修改上面的脚本，它可以使用 RVM（非系统范围）执行 ruby

现在我已经迁移了这个符号：

```
su -l -c "rvm use ruby-1.9.3-p125 && bundle exec unicorn_rails -E production -D" unicornuser 
```

这对我有用，但我想一定有更好的方法来做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T13:18:14.593

您应该使用包装器：

```
rvm wrapper ruby-1.9.3-p125 ext_1.9.3 bundle 
```

这将创建`$rvm_path/bin/ext_1.9.3_bundle`，所以现在您可以使用：

```
/full/path/to/rvm/bin/ext_1.9.3_bundle exec unicorn_rails -E production -D 
```

替换`/full/path/to/rvm`为来自的输出`echo $rvm_path`

# iphone - MPMoviePlayerController 移除切换按钮并最小化

> ID：11029134
> 
> 赞同：3
> 
> 时间：2012-06-14T08:13:09.993
> 
> 标签：iphone, ios, ipad, xcode4.2, mpmovieplayercontroller

我正在为 iPad 创建一个自定义视频播放器。我想从我的 Video PLayer (Toggle and Minimize) 中删除以下控制器。

![<code>![在此处输入图片描述][1]</code>](../Images/555e7f97eebd50c156ac067190c43b67.png)

![在此处输入图像描述](../Images/8e05886c06d9a178b6ead6452ef6d380.png)

# jquery-mobile - jquery mobile - 每个页面上的事件显示页面

> ID：11029138
> 
> 赞同：1
> 
> 时间：2012-06-14T08:13:22.070
> 
> 标签：jquery-mobile

我需要`showpage`在我的 Web 应用程序（jquery 1.7.1、jquerymobile 1.1.0）中使用 data-role=page 捕获每个 div 上的每个事件以运行函数 InitPage();

所以在 Global.js 中，我做了这个

```
$(".ui-page").live("pageshow", function () { InitPage(); }); 
```

但是，我不知道为什么，在某些页面上它可以工作，但在其他页面上却不起作用。

有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T13:04:12.180

尝试这个：

```
$('[data-role=page]').live('pageshow', function (event, ui) { InitPage(); }); 
```

# plone - 如何减少 blobstorage 中的文件数量？

> ID：11029139
> 
> 赞同：1
> 
> 时间：2012-06-14T08:13:30.570
> 
> 标签：plone, blobstorage

我有一个 Plone 站点，其中包含 95000 个文件的 blobstorage。经过几天的备份，文件总量超过了虚拟服务器的限制。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T09:16:06.263

You have a few options:

*   Pack your ZODB if you haven't already. Removing old transaction data will also result in the BLOB files for those transactions being removed.

    Of course, packing removes history, so if you need to be able to undo transactions you may want to only pack until 30 days ago or similar.

*   Use a dedicated ZEO server with higher virtual server file limits to store your ZODB and the blobstorage, then use a blob cache on the client(s).

    Use a non-shared blobstorage; your Zope servers will pull in BLOBs over the network from the ZEO server to be stored in the local blob cache, which can be limited in total disk space. (A shared blobstorage is a directory shared over NAS or something similar defeating the purpose here).

    This does not lower the number of BLOB files to back up but perhaps makes it more manageable for you as the ZEO server can be spec-ed for disk space instead of CPU and memory load. The blob caches on the client machines need not be backed up at all.

*   Re-tool your application to not have so many BLOBs or to not alter them so often. Ultimately, that's where all your blob files come from; the ZODB uses one blob file per ZODB blob per transaction that alters them.

# backbone.js - 我应该如何引导我的网络应用程序？

> ID：11029142
> 
> 赞同：1
> 
> 时间：2012-06-14T08:13:40.057
> 
> 标签：backbone.js, marionette, backbone-routing

我正在寻找使用和引导我的网络应用程序`Backbone.Marionette`的最佳方式。 以下实现有效，但我想知道这是否是正确的方法。`Backbone.Router``Requirejs`

这是我的一些代码（*）。

我的问题是：
1）以下数据流（`index.html`-> `conf.js`-> `router.js`-> `app.js`）是否正确？
2）`Backbone.View`对于每个区域（`header`，`sidebar`.....）应该根据上下文在`router.js`或`app.js`或展位中实例化？

* * *

```
// index.html
<!doctype html>
<html lang="en">
    <head>
        <!-- Load the script "/js/conf.js" as our entry point -->
        <script data-main="js/conf" src="js/vendor/require.js"></script>
     </head>
     <body>
     </body> 
```

```
// js/config.js
require.config({
    // some code
});
require(['app']);  // instead of  require(['conf']); 
```

* * *

```
// router.js
define([
    'app',
    // others modules
],
function(App, $, _, Backbone, Marionette){
    "use strict";
    var AppRouter = Backbone.Marionette.AppRouter.extend({
        routes: {
            test: test,
            "*defaults": "home"
        }

    var initialize = function ()
    {
        var app_router = new AppRouter;
    };

    return {
        initialize: initialize
    };
}); 
```

* * *

```
// js/app.js
define(
[
    // some modules
],
function ($, _, Backbone, Router, Mustache, Layout, SidebarView) {
    var MyApp = new Backbone.Marionette.Application();

    MyApp.addInitializer(function () {
        $('body').html(Layout);
        MyApp.addRegions({
            header: '#header',
            sidebar: '#sidebar',
            mainColumn: '#main-column',
            rightColumn: '#right-column'
        });
    });

    MyApp.addInitializer(function () {
        var sidebarView = new SidebarView();
        MyApp.sidebar.show(sidebarView);
    });

    MyApp.on("initialize:after", function () {
//        Router.initialize();
    });

    MyApp.start();

    return MyApp;

}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T12:58:51.373

这看起来总体上还不错。我可能会改变一些事情，但这些主要是个人喜好：

1）反转router和app文件的关系，使用初始化器来启动router。

现在，您在路由器和应用程序文件之间存在循环依赖关系，这绝不是一件好事。尽管 RequireJS 可以很好地处理这个问题，但在许多其他方面这都是一个坏主意，因为它可能导致代码无法按您期望的方式工作。

2) 在你的路由器文件中，设置一个初始化路由器的初始化器。

3）不要从路由器文件中启动backbone.history。

在一个项目中拥有多个路由器是很常见的，并且建议这样做。但是你只能调用`Backbone.History.start()`一次。使用路由器的“after:initialize”事件在 app.js 文件中启动它

`MyApp.on("after:initialize", function(){ Backbone.History.start(); }`

4) 将初始化程序回调提取到从单个初始化程序调用的函数中

虽然使用多个初始化器在技术上没有任何问题 - 而且您将需要跨多个模块的多个初始化器 - 我建议在单个模块中使用单个初始化器，并让一个初始化器调用模块中定义的其他函数。

`addRegions`5)在初始化器之外调用

无法保证您的初始化程序将按照您添加它们的顺序运行。这取决于各个浏览器如何处理事情。

* * *

例如，您的 app.js 文件可能如下所示：

```
 // js/app.js
define(
[
    // some modules
],
function ($, _, Backbone, Router, Mustache, Layout, SidebarView) {
    var MyApp = new Backbone.Marionette.Application();

    MyApp.addRegions({
        header: '#header',
        sidebar: '#sidebar',
        mainColumn: '#main-column',
        rightColumn: '#right-column'
    });

    MyApp.addInitializer(function(){
       showLayout();
       initSidebar();
    });

    MyApp.on("initialize:after", function(){
      Backbone.History.start();
    });

    function initSidebar() {
        var sidebarView = new SidebarView();
        MyApp.sidebar.show(sidebarView);
    }

    function showLayout() {
        $('body').html(Layout);
    }

    MyApp.start();

    return MyApp;

}); 
```

...

好吧，这看起来比我最初想象的要多得多。:) 但就像我说的，你的设置总体上看起来不错。这些是我会做的事情，但不一定是使您的应用程序工作的必要条件。

# svn - 在 svn 中获取已删除文件的先前版本

> ID：11029150
> 
> 赞同：4
> 
> 时间：2012-06-14T08:14:18.247
> 
> 标签：svn, version-control

我在 1.01 中有我们所有的代码。我最近将它重命名为trunk。现在我无法获得重命名之前的旧版本。重命名发生在修订版 6090，但我想要文件的修订版 5876。我可以看到日志，但无法导出它说的文件**`url /var/www/project/trunk/file doesn't exists`**

我怎样才能得到那个版本的文件

我跑了**`svn export -r 5876 https://url/project/1.01/file`**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-03-19T12:11:23.343

尽管提供的答案是正确的，但对于可能偶然发现此问题的任何人来说，这是一些重要的建议：

SVN EXPORT 有两种语法，它们**做不同的事情：**

**许多人在应该使用第 2 种语法时使用第一种语法**

```
1\. svn export -r 123 svn://rep/file1.txt

which is shorthand for: svn export -r 123 svn://rep/file1.txt@HEAD 
```

这个命令会做什么？它将首先在当前 HEAD-revision 中搜索名为“file1.txt”的文件。一旦找到，搜索该文件的过去修订并获取修订 123 的文件内容。**因此，如果修订 123 中的文件原始名称是 file.txt，后来重命名为 file1.txt（例如，在修订 133 ) 您将获得修订版 123 中原始文件 file.txt 的内容。**

现在为第二种语法：

```
2\. svn export svn://rep/file1.txt@123

which is shorthand for: svn export -r 123 svn://rep/file1.txt@123 
```

该命令告诉 SVN 在 Revision 123 中搜索一个名为 file1.txt 的文件，而不关心任何其他版本中的不同文件名。因此，如果修订版 123 中的文件原始名称为“file1.txt”，后来重命名为“file2.txt”，此命令仍会为您提供修订版 123 中原始 file1.txt 的内容

总结：

**仅当您想为文件名和文件内容提供单独的修订时，才使用 -r 标志。**仅当您的请求是“SVN 提供修订版 123 中的文件内容时才会出现这种情况，该文件现在称为 'File1.txt'，无论它当时被称为什么......”

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-29T18:14:14.343

我宁愿建议您执行以下任一操作，而不是接受的答案，因为您会丢失历史记录，而您很可能想要找回这些历史记录。

# 恢复到工作副本

```
svn cp FILE_URL@REV local_path_to_file 
```

这将直接获取您需要的修订版，并在您的本地工作副本中为您重新添加和重新更新文件。

然后，您可以提交文件文件以将其放回远程存储库。

# 恢复到存储库

svn cp FILE_URL@REV FILE_URL

这将目录复制旧文件并将其放回 HEAD，其中包含历史记录和所有内容。

* * *

显然，您可以跨分支机构执行此操作，等等...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T08:32:07.943

你有没有尝试过

```
 svn cat TARGET@5876 > /var/www/project/trunk/new/path/to/file 
```

然后重新添加到svn。

目标应该是重命名之前的旧回购路径。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-14T08:27:04.560

你是如何“重命名”主干文件夹的？使用“svn rename”或“svn move”？通常如果使用这些命令，历史记录应该是一致的，并且在使用“svn export -r ...”命令时文件应该可用。

“项目”文件夹是否也在版本控制之下？如果是，我会尝试将工作副本更新为旧版本并将其复制到现在应该位于的位置。

导出命令是否有可能依赖于获取在要导出的修订时正确的路径？

当您将工作副本更新到旧版本时会发生什么，resp。如果您重新检查所需的旧版本？

# c - 将“通用组成的语言 X”编译成可移植 C 的编译器

> ID：11029154
> 
> 赞同：4
> 
> 时间：2012-06-14T08:14:25.113
> 
> 标签：c, compiler-construction, terminology

我正在寻找两件事。第一个是术语。

将一种语言编译成另一种语言的编译器叫什么？

其次，是否有任何编译器可以将*通用语言 X*编译成可移植的 C 代码？

我只是把这个想法扔在那里，但我在想，如果我们为我们自己选择的语言创建自己的前端会怎么样，但编译器不是一路走来，而是发出可移植的 C 代码。这样，我们可以添加新的语言特性，但仍然与现有的 C 代码非常兼容。

现在，这种方法可能存在巨大缺陷（除了您需要构建它），但人们会这样做吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-14T08:16:53.427

人们绝对会这样做。事实上，C++ 的原始实现是一个名为[Cfront](https://en.wikipedia.org/wiki/Cfront)的程序，它将 C++ 翻译成 C 代码，然后用 C 编译器进行编译。

随着当今诸如 JVM、CLR 和 LLVM 等中间“字节码”语言的盛行，将语言转换为 C 源代码的情况现在变得不那么普遍了。直接生成字节码比生成文本源代码要强大得多，也不那么烦人。这些字节码（在 LLVM 的情况下为“位码”）语言的级别低于文本编程语言，但仍高于与特定 CPU 或 CPU 系列相关的原始机器代码。

我将这种程序称为“翻译器”，但这只是我。“编译器”也可以正常工作。

# ruby-on-rails - 如何将额外的参数从 jQuery 传递到 Rails？

> ID：11029155
> 
> 赞同：0
> 
> 时间：2012-06-14T08:14:33.723
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我需要将一个额外的参数 :mobilejs => true 从 jQuery 传递给 rails 控制器。我怎么做？

这个...

```
var settings  = $.extend{  'url': url,
      'data' : '{mobilejs:true}',
      'success' : callback || function () {},
      'dataType' : 'script'
      }, options || {});
 $.ajax(settings); 
```

从服务器创建此响应

```
 [2012-06-14 16:05:48] ERROR bad URI `/airports.js?{mobilejs:true}'. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T08:27:09.240

```
'data' : '{mobilejs:true}', 
```

必须：

```
'data' : {mobilejs:true}, 
```

# android - AlertDialog not working

> ID：11029156
> 
> 赞同：1
> 
> 时间：2012-06-14T08:14:44.473
> 
> 标签：android

Guys I have an activity which has a home button, when the button is pressed,an alert dialog should appear with the message "Exit without Saving ?" and the following options(buttons) should be available to the user:

1-> Yes

2->No

3->Save and Exit

But the problem is when the home button is pressed NO alert dialog is being displayed.

I tried the following code:

// this is when the button is pressed

```
public void onClick(View v) {
    // TODO Auto-generated method stub
switch (v.getId()) {

case R.id.backHome:
        final AlertDialog alertDialog = new AlertDialog.Builder(
                DataView.this).create();
        // alertDialog.setTitle("Exit Without Save ?");
        alertDialog.setMessage("Exit Without Saving");
        alertDialog.setButton("Yes", new DialogInterface.OnClickListener() {

            @Override
            public void onClick(DialogInterface dialog, int which) {
                // TODO Auto-generated method stub
                Intent i = new Intent(DataView.this, DiaryActivity.class);
                startActivity(i);
                finish();

            }
        });

        alertDialog.setButton2("No", new DialogInterface.OnClickListener() {

            @Override
            public void onClick(DialogInterface dialog, int which) {
                // TODO Auto-generated method stub
                alertDialog.dismiss();

            }
        });
        alertDialog.setButton3("Save and Exit",
                new DialogInterface.OnClickListener() {

                    @Override
                    public void onClick(DialogInterface dialog, int which) {
                        // TODO Auto-generated method stub
                        rowIdreceived = getdata.getLong("row_id");
                        String title_updated = topicDisplay.getText()
                                .toString() + " ";
                        String story_updated = StoryField.getText()
                                .toString();
                        DataHolder entry = new DataHolder(DataView.this);

                        try {
                            entry.open();
                        } catch (SQLException e) {
                            // TODO Auto-generated catch block
                            e.printStackTrace();
                        }
                        entry.updateEntry(rowIdreceived, title_updated,
                                story_updated);

                        entry.close();
                        Intent i = new Intent(DataView.this,
                                DiaryActivity.class);
                        startActivity(i);
                        finish();

                    }
                });

        break; 
```

The DiaryActivity is the main class.

DataView is the current activity.

The Yes button simply exits out of the current activity and goes back the main activity that is the DiaryActivity.

The No button "dismisses" the alert dialog and the user can then save his work and exit later.

The save and exit button save the work into the database and then exits out of the current activity to the main activity.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-14T08:16:20.010

`alertDialog.show();` is missing in the code......... you have created the dialog but not shown that ....

put `alertDialog.show()` just before break .....

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T08:16:39.620

You have forgot to write `alertDialog .show();`, it should be after creation of the alertDialog.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-14T08:20:15.780

theck out this. call `alertDialog.show();` to show alertdialog

```
AlertDialog alertDialog = new AlertDialog.Builder(this).create();
alertDialog.setTitle("Reset...");
alertDialog.setMessage("Are you sure?");
alertDialog.setButton("OK", new DialogInterface.OnClickListener() {
   public void onClick(DialogInterface dialog, int which) {
      // here you can add functions
   }
});
alertDialog.setIcon(R.drawable.icon);
alertDialog.show(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-14T08:18:34.753

please call alertDialog.show(); method to display alert dialog

# c# - WPF 矩形图像源

> ID：11029158
> 
> 赞同：1
> 
> 时间：2012-06-14T08:15:00.930
> 
> 标签：c#, wpf, imagesource

我无法用图像填充矩形对象。

```
ImageBrush ib = new ImageBrush();
BitmapImage bmi = new BitmapImage(new Uri(@"/WpfImageApp;component/Images/Penguins.jpg", UriKind.Relative));
ib.ImageSource = bmi;
body.Fill = ib; 
```

body 是 Rectangle 对象，当我运行此代码时，窗口上只有黑屏。我也看不到我的其他控制器（如按钮）。任何解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T08:27:43.653

复制你所做的之后，我可以确认如果 BitmapImage 无法在构造函数中加载，你会得到一个黑色窗口，没有可见的控件。

将您的代码移动到一个按钮，您可以在窗口加载后单击该按钮，您将看到正确的错误消息。

```
Could not find a part of the path 'C:\WpfImageApp;component\Images\Penguins.jpg'. 
```

将您的 URI 更改`pack://application:,,,/Images/Penguins.jpg`为图像后正确加载

# oracle - 在 Oracle 上编写智能查询以查找无效的 SP

> ID：11029160
> 
> 赞同：0
> 
> 时间：2012-06-14T08:15:21.943
> 
> 标签：oracle, stored-procedures, plsql, oracle10g, oracle11g

条件

*   SP 必须存在
*   它在 10g 上有效，但在 11g 上无效
*   我们可以运行一个程序来证明他们是否给出以下错误：

    *   循环失败并出现 ORA-00979: NOT A GROUP BY EXPRESSION (on 11 g)

11g有问题，10g没问题

```
CREATE TABLE testing (AAA NUMBER, BBB NUMBER);

DECLARE
CURSOR curTesting(myGroupID IN NUMBER) IS
SELECT DECODE(myGroupID, AAA, 'PP', 'PP_GROUP') AS p_type,
      COUNT(DISTINCT BBB) AS num_of
FROM testing
GROUP BY DECODE(myGroupID, AAA, 'PP', 'PP_GROUP')
ORDER BY p_type DESC;

BEGIN
FOR row IN curTesting(0) LOOP
NULL;
END LOOP;
END;

insert into testing values(1,2);
insert into testing values(1,2);

DECLARE
CURSOR curTesting(myGroupID IN NUMBER) IS
SELECT DECODE(myGroupID, AAA, 'PP', 'PP_GROUP') AS p_type,
      COUNT(DISTINCT BBB) AS num_of
FROM testing
GROUP BY DECODE(myGroupID, AAA, 'PP', 'PP_GROUP')
ORDER BY p_type DESC;

BEGIN
FOR row IN curTesting(0) LOOP
NULL;
END LOOP;
END;

ERROR at line 1:
ORA-979: not a GROUP BY expression
ORA-6512: at line 3
ORA-6512: at line 10 
```

*   ORA-918 列定义不明确

11g有问题，10g没问题

```
select ps_id, product_scores.ps_id ps_id1, productId 
  from product_scores join (select ps_id productId from products_shop ) on
       productId = ps_ps_id     
 where rownum < 10; 
```

解决方案：

```
select t1.ps_id, t1.ps_id ps_id1, productId
  from product_scores t1
       join (select ps_id productId from products_shop) 
         on productId = ps_ps_id
 where rownum < 10; 
```

请编写查询以查看由于从 10g 升级到 11g 导致的无效 sp

# objective-c - 将文本字段数据添加到表格单元格

> ID：11029163
> 
> 赞同：2
> 
> 时间：2012-06-14T08:16:01.407
> 
> 标签：objective-c

如何使用数据源将视图控制器中的文本字段数据存储到 With Xcode中的`tableView`单元格中？`TableViewController`

这意味着当用户点击“+”时，它将显示另一个具有文本字段的视图。当用户输入文本并按保存时，输入的数据将存储为表格单元格。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T08:50:25.853

将 UITextField 数据获取到 TableView 单元格上。 [这](https://stackoverflow.com/questions/10356758/get-text-from-uitextfield-on-a-tableviewcell)是针对同一问题的一些人的查询。我认为它会对您有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T08:20:59.180

首先确保您了解数据源。然后你必须实施

```
- (NSInteger)numberOfRowsInTableView:(NSTableView *)tableView {
    return self.data.count;
}

- (NSView *)tableView:(NSTableView *)tableView
   viewForTableColumn:(NSTableColumn *)tableColumn
                  row:(NSInteger)row {

        NSTableCellView * result = [tableView makeViewWithIdentifier:@"identifier" owner:self];

        result.textField = @"Your special string";

        return result;

} 
```

在像这样在 IB 中设置它*并将*Table View 数据源的出口连接到您的自定义对象类（上面代码所在的类）之后，它应该看起来像这样![在此处输入图像描述](../Images/075a39c6d78df48df205ff4e0e8ad6b5.png)

请注意，我使用了与代码中相同的标识符，以便我可以轻松获取创建的表格单元格视图。

`self.data`例如，可以是一个数组，您可以在其中存储所有底层对象（用于创建单元格）。

当然，您也可以将任何类型的 UI 元素添加到单元格视图中。在这种情况下，我为单元格视图使用自定义子类。然后你必须做这样的事情（当然，将你的类设置为 IB 中单元格视图的类。这是屏幕截图中当前有一个 NSTableCellView 的部分。从现在开始它必须是 MyGreatCellView ） ：

```
@interface MyGreatCellView : NSTableCellView {
    IBOutlet NSTextField *files;
}

@property (assign) NSTextField *files; 
```

那么你也可以参考例子`result.files`。`tableView:vieForTableColumn:row`

如果有什么不清楚的，就问吧。

# javascript - 如何删除列表表 tr 中已存在的值？

> ID：11029164
> 
> 赞同：1
> 
> 时间：2012-06-14T08:16:03.877
> 
> 标签：javascript

我有一个示例代码：

```
<table id="modem_list">
   <tr class="input_1" name="modem">
      <td>iPad 1<input type="hidden" value="1" class="output_1"></td>
   </tr>
   <tr class="input_2" name="modem">
      <td>iPad 2<input type="hidden" value="2" class="output_2"></td>
   </tr>
   <tr class="input_1" name="modem">
      <td>iPad 1<input type="hidden" value="1" class="output_1"></td>
   </tr>
</table>

<input type="button" class="submit" onclick="update()" value="submit" /> 
```

和 javascript

```
function update() {
  var table = document.getElementById("modem_list");
var rowCount = table.rows.length;
for(var i=0; i<rowCount-1; i++) {
    for(var j=i+1; j<rowCount; j++) {
        if(table.rows[i] == table.rows[j]) {
            rowCount--;
            for(var k=j; k<rowCount; k++) {
                table.rows[k] = table.rows[k+1];
                table.deleteRow(k);
                k--;
            }
        }
    }
}
} 
```

如何修复结果是：

```
<table id="modem_list">
       <tr class="input_1" name="modem">
          <td>iPad 1<input type="hidden" value="1" class="output_1"></td>
       </tr>
       <tr class="input_2" name="modem">
          <td>iPad 2<input type="hidden" value="2" class="output_2"></td>
       </tr>
    </table> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T09:02:17.623

假设您想`tr`根据它们的类删除重复的元素，您可以试试这个：

```
function update() {
    //caches a reference to which table we're working with
    var table = document.getElementById("modem_list");
    //gets all its rows
    var trs = table.rows;

    //iterates through all rows
    for (var i=0; i<trs.length; i++) {
        //stores possible dupes in an array
        var dupes = table.getElementsByClassName(trs[i].className);
        //if there are any dupes.. (more than 1 element with same class)
        if (dupes.length > 1)
            //removes all repeated elements except the first (index 0)
            for (var j=1; j<dupes.length; j++)
                dupes[j].parentNode.removeChild(dupes[j]);
    }
} 
```

**[JSFiddle](http://jsfiddle.net/ult_combo/5bGUn/)**

# ios - 刷新前检查 GDataServiceGoogleCalendar 是否有更新？

> ID：11029173
> 
> 赞同：0
> 
> 时间：2012-06-14T08:16:49.620
> 
> 标签：ios, google-calendar-api, gdata

我正在使用 GDataServiceGoogleCalendar 获取 iOS 应用程序的事件。

有没有办法在重新获取事件之前检查日历是否有更新。我正在尝试减少数据传输，如果谷歌日历上没有更改，我不希望应用程序获取所有数据。

谢谢

沙尼

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T03:03:44.213

从 CalendarService 中，为要与之同步的特定提要执行 getFeed()。Feed 继承自 com.google.gdata.data.Source，它具有 getUpdated 和 setUpdated 方法。您必须在应用程序中跟踪自己的时间戳；您应该能够比较这两次；如果您的日历的最后一次同步时间与您的应用程序设置的此值相同，则没有新条目可提取。

# javascript - JSF中的JQuery通过id获取元素

> ID：11029178
> 
> 赞同：0
> 
> 时间：2012-06-14T08:17:14.750
> 
> 标签：javascript, jquery, jsf

我创建了一个使用 JSF 打印一些文本的网页

我使用标签添加了空格

```
<tr:spacer width="24px" /> 
```

每个单词之间

当浏览器窗口变小时，我想将宽度值减小到 12

我知道使用 Jquery 可以做到这一点。

有人可以指导我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T08:22:05.327

您可以使用

```
<tr:spacer class="spacer" width="24px" /> 
```

并使用 jquery 更改宽度

```
$('.spacer').attr('width','12px'); 
```

要检测浏览器调整大小，您可以使用

```
$(window).resize(function() {
   // put here a check if window is smaller than what you want
   // and set your spacer size accordingly
}); 
```

但是想知道，为什么不直接使用百分比作为宽度呢？然后它会自动缩放

# crystal-reports - 在 Crystal Reports 中将序列号显示为罗马字母

> ID：11029179
> 
> 赞同：6
> 
> 时间：2012-06-14T08:17:17.490
> 
> 标签：crystal-reports, crystal-reports-8.5

需要在我的水晶报告中将序列号显示为罗马字母（i、ii、iii、iv 等）。我将序列号捕获为记录号（1,2,3,4...）。所以我必须在水晶报告中为它做些什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-03-04T07:10:28.593

只需使用`Roman()`水晶报表提供的功能

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T23:24:54.123

我不能承担太多的功劳；[我只是将这篇 VB Helper 文章](http://www.vb-helper.com/howto_roman_arabic.html)中的代码移植到 Crystal 中，但这是一个有趣的练习：

```
NumberVar iCounter := 0;
Local StringVar ch := "";
Local NumberVar result := 0;
Local NumberVar new_value := 0;
Local NumberVar old_value := 0;
Local StringVar temp := "";

temp := UpperCase({?@Roman});

old_value = 1000;

For iCounter := 1 To Len(temp) do
(
    // See what the next character is worth.
    ch := Mid(temp, iCounter, 1);

    if ch = "I" then new_value := 1
    else if ch = "V" then new_value := 5
    else if ch = "X" then new_value := 10
    else if ch = "L" then new_value := 50
    else if ch = "C" then new_value := 100
    else if ch = "D" then new_value := 500
    else if ch = "M" then new_value := 1000;

    // See if this character is bigger
    // than the previous one.
    If new_value > old_value Then
        // The new value > the previous one.
        // Add this value to the result
        // and subtract the previous one twice.
        result := result + new_value - 2 * old_value
    Else
        // The new value <= the previous one.
        // Add it to the result.
        result := result + new_value;

    old_value := new_value;
);

// Format the number without commas or decimals
ToText(result, 0, ""); 
```

只需将我的`{?@Roman}`参数占位符替换为您的变量，就可以了。

# internet-explorer - 字体在ie中不起作用

> ID：11029181
> 
> 赞同：1
> 
> 时间：2012-06-14T08:17:19.137
> 
> 标签：internet-explorer, css, font-face

我创建了一个 html 布局并使用 css3 `@font-face`。这是我的代码

```
@font-face {
    font-family: 'MyriadProRegular';
    src: url('myriad.eot');
    src: url('myriad.eot?#iefix') format('embedded-opentype'),
         url('myriad.woff') format('woff'),
         url('myriad.ttf') format('truetype'),
         url('myriad.svg#MyriadProRegular') format('svg');
} 
```

我正在使用

```
font-family: 'MyriadProRegular'; 
```

它适用于所有接受 IE 的浏览器。请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T08:21:07.013

我不能为此推荐足够的字体松鼠。只需运行他们的字体生成器，您就会得到可以在 IE 中运行的代码。如果您缺少字体文件类型，它甚至会为您制作。它在过去为我节省了很多时间，我不能推荐它。

[http://www.fontsquirrel.com/fontface/generator](http://www.fontsquirrel.com/fontface/generator)

这是来自 Font Squirrel 并且可以跨浏览器工作：

```
@font-face {
    font-family: 'NimbusSanConD-Lig';
    src: url('fonts/228BFB_1_0.eot');
    src: url('fonts/228BFB_1_0.eot?#iefix') format('embedded-opentype'),
         url('fonts/228BFB_0_0.woff') format('woff'),
         url('fonts/228BFB_0_0.ttf') format('truetype');
    font-weight: normal;
    font-style: normal;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T08:30:56.470

**svg**，**woff**和eot**甚至**（支持）字体类型？我很确定 .svg 不是，而且我从未听说过 .woff 和 .eot .. 只是一个 truetype 应该适用于所有浏览器。（虽然我不确定 Macintosh）

font-face 的方式总是对我有用：

```
@font-face {
    font-family:alba;
    src:url(alba.ttf);
} 
```

所以这里没有使用引号。我建议也尝试一下你的情况，就是这样做

```
@font-face {
        font-family:Myriad Pro Regular;/* note the whitespaces, I believe this is what the font itself is called (not the filename) */
        src:url(myriad.ttf);
    } 
```

确保您始终注意大写和小写字母之间的区别！如果在您键入*myriad.ttf*时字体文件名为*Myriad.ttf*，则它可能无法在某些浏览器（版本）中使用。

# .htaccess - 如果没有 chrome 中的 www 前缀，Wordpress 网站无法打开

> ID：11029182
> 
> 赞同：0
> 
> 时间：2012-06-14T05:02:11.800
> 
> 标签：.htaccess

我试着用谷歌搜索这个问题，关于一个网站在没有 www 的情况下无法在 chrome 中打开，但它适用于其他浏览器，这是我的 .htaccess

```
RewriteEngine on
RewriteCond %{HTTP_HOST} ^mydomain.com$
RewriteRule ^(.*)$ "http\:\/\/www\.mydomain\.com\/$1" [R=301,L]

# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule>
# END WordPress 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T05:07:09.660

你的`.htaccess`文件有错误。您激活重写引擎两次。您的`.htaccess`文件必须是这样的：

```
# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /

RewriteCond %{HTTP_HOST} ^mydomain.com$
RewriteRule ^(.*)$ "http\:\/\/www\.mydomain\.com\/$1" [R=301,L]

RewriteRule ^index\.php$ - [L]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule>
# END WordPress 
```

# 更新：

您无法在 chrome 中打开您的网站，`www.`因为您的`.htaccess`文件包含重定向规则，将您的访问者`mydomain.com`从`www.mydomain.com`. 此规则用于 SEO，请通读[Redirection SEO Best Practices](http://www.seomoz.org/learn-seo/redirection)文章（尤其是 Redirecting Canonical Hostnames 段落）以更加熟悉它。

# android - c2dm PushDemo 问

> ID：11029185
> 
> 赞同：0
> 
> 时间：2012-06-14T08:17:34.837
> 
> 标签：android, android-c2dm

我已经编写了一个 ac2dm 应用程序，我按照[本](http://www.vogella.com/articles/AndroidCloudToDeviceMessaging/article.html#implementation_applicationserver)教程进行操作，

但是...我发现代码有些奇怪...这是代码..

```
package de.vogella.android.c2dm.simpleclient;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.util.ArrayList;
import java.util.List;

import org.apache.http.HttpResponse;
import org.apache.http.NameValuePair;
import org.apache.http.client.HttpClient;
import org.apache.http.client.entity.UrlEncodedFormEntity;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.message.BasicNameValuePair;

import android.app.Notification;
import android.app.NotificationManager;
import android.app.PendingIntent;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.content.SharedPreferences;
import android.content.SharedPreferences.Editor;
import android.preference.PreferenceManager;
import android.provider.Settings.Secure;
import android.util.Log;

public class C2DMRegistrationReceiver extends BroadcastReceiver {

    @Override
    public void onReceive(Context context, Intent intent) {
        String action = intent.getAction();
        Log.w("C2DM", "Registration Receiver called");
        if ("com.google.android.c2dm.intent.REGISTRATION".equals(action)) {
            Log.w("C2DM", "Received registration ID");
            final String registrationId = intent
                    .getStringExtra("registration_id");
            String error = intent.getStringExtra("error");

            Log.d("C2DM", "dmControl: registrationId = " + registrationId
                    + ", error = " + error);
            String deviceId = Secure.getString(context.getContentResolver(),
                    Secure.ANDROID_ID);
            createNotification(context, registrationId);
            sendRegistrationIdToServer(deviceId, registrationId);
            // Also save it in the preference to be able to show it later
            saveRegistrationId(context, registrationId);
        }
    }

    private void saveRegistrationId(Context context, String registrationId) {
        SharedPreferences prefs = PreferenceManager
                .getDefaultSharedPreferences(context);
        Editor edit = prefs.edit();
        edit.putString(C2DMClientActivity.AUTH, registrationId);
        edit.commit();
    }

    public void createNotification(Context context, String registrationId) {
        NotificationManager notificationManager = (NotificationManager) context
                .getSystemService(Context.NOTIFICATION_SERVICE);
        Notification notification = new Notification(R.drawable.icon,
                "Registration successful", System.currentTimeMillis());
        // Hide the notification after its selected
        notification.flags |= Notification.FLAG_AUTO_CANCEL;

        Intent intent = new Intent(context, RegistrationResultActivity.class);
        intent.putExtra("registration_id", registrationId);
        PendingIntent pendingIntent = PendingIntent.getActivity(context, 0,
                intent, 0);
        notification.setLatestEventInfo(context, "Registration",
                "Successfully registered", pendingIntent);
        notificationManager.notify(0, notification);
    }

    // Incorrect usage as the receiver may be canceled at any time
    // do this in an service and in an own thread
    public void sendRegistrationIdToServer(String deviceId,
            String registrationId) {
        Log.d("C2DM", "Sending registration ID to my application server");
        HttpClient client = new DefaultHttpClient();
        **HttpPost post = new HttpPost("http://vogellac2dm.appspot.com/register");**
        try {
            List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(1);
            // Get the deviceID
            nameValuePairs.add(new BasicNameValuePair("deviceid", deviceId));
            nameValuePairs.add(new BasicNameValuePair("registrationid",
                    registrationId));

            post.setEntity(new UrlEncodedFormEntity(nameValuePairs));
            HttpResponse response = client.execute(post);
            BufferedReader rd = new BufferedReader(new InputStreamReader(response.getEntity().getContent()));

            String line = "";
            while ((line = rd.readLine()) != null) {
                Log.e("HttpResponse", line);
            }
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
} 
```

看看这个 HttpPost post = new HttpPost("http://vogellac2dm.appspot.com/register");

为什么我必须在这里发送数据？有谁知道？因为当我尝试访问它时，我发现链接已失效...

谢谢之前

================================== 嘿...我已经修好了...但现在我得到了新的麻烦...我的内容有问题...当我尝试从我的 php 发送它时，我收到这样的警告

```
Warning: strlen() expects parameter 1 to be string, array given in /home/k8665578/public_html/android/c2dm/send_notification.php on line 66 
```

这是php代码...

```
<?php
        $host           =       'localhost';
        $user           =       'k8xxx_kiosban';
        $pass           =       'k8xxx';
        $database       =       'k8k8xxx_kiosban';
        $username ="xxxx@gmail.com";
        $password = "xxxxiba";
        $source="My-Server-Event-Alerter"; //anything that says about ur app
        $service="ac2dm";

        $connection = mysql_connect ($host, $user, $pass) or die                      ('Error connecting to mysql'.mysql_error());
               //mysql_select_db ( $database,$connection)or die                     ('Error selecting database '.mysql_error());

            mysql_selectdb($database) or die ('->>Error selecting database'.mysql_error());
                if ( $_GET [ 'message' ] != '' )
                {
                        $message =$_GET ['message'];
                        echo 'Message sent to server '.$message;

            $post_params = array ( "Email" => $username, "Passwd" => $password, "accountType"=>"GOOGLE", "source" => $source, "service"=>$service ); 

            $first = true;
            $data_msg = "";

            foreach ($post_params as $key => $value) {
            if ($first)
              $first = false;
            else
              $data_msg .= "&";

            $data_msg .= urlencode($key) ."=". urlencode($value);
            }

            $x = curl_init("https://www.google.com/accounts/ClientLogin"); 

            curl_setopt($x, CURLOPT_HEADER, 1);
            curl_setopt($x, CURLOPT_POST, 1);
            curl_setopt($x, CURLOPT_POSTFIELDS, $data_msg);
            curl_setopt($x, CURLOPT_RETURNTRANSFER, 1);
            $response = curl_exec($x);
            curl_close($x); 

            echo $response;

            $pos = strpos($response, "Auth=");
            $authKey = trim(substr($response, 5+$pos));

            $result=mysql_query("SELECT * FROM android_devices");
                        if(mysql_num_rows($result)>0 ){
                                $sucess= 'Message sent to '.mysql_num_rows($result).' devices';
                                $row = mysql_fetch_assoc ( $result );

                                do {
                                        $deviceToken = $row['devicetoken'];
                                        echo 'Device Token:'.$deviceToken . '';
                                        $data = array(
                                        'registration_id' => $deviceToken,
                                        'collapse_key' => 'ck_' . 'col_key',
                                        'data.message' => $message,
                                        'data.title' =>'Requestec Push Demo');

                                        //$data = (is_array($data)) ? http_build_query($data) : $data; 

                                        $ch = curl_init();

                                        curl_setopt($ch, CURLOPT_URL, "https://android.apis.google.com/c2dm/send");
                                        echo 'Content-Length:'.strlen($data);
                                        $headers = array('Authorization: GoogleLogin auth=' . $authKey/*,'Content-Length:'.strlen($data)*/);
                                        if($headers){
                                            curl_setopt($ch, CURLOPT_HTTPHEADER, $headers);
                                        }
                                        curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, 0);
                                        curl_setopt($ch, CURLOPT_POST, true);
                                        curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
                                        curl_setopt($ch, CURLOPT_POSTFIELDS, $data);

                                        $messagedata = curl_exec($ch);
                                        echo $messagedata;
                                        curl_close($ch);
                    }while($row = mysql_fetch_assoc ( $result ));
                }
            }
?>

Push Notification

<form action="./send_notification.php" method="get" enctype="application/x-www-form-urlencoded" name="Send Notification" target="_self">
<label>Push Message
<input name="message" type="text" size="50" maxlength="50"></label>
<input name="Send Message" type="submit" value="Send Message">
</form>

<?php $sucess;?> 
```

然后，当我尝试发送时，我收到一条通知，但有时内容与我发送的内容不同......

例如，首先我发送一条消息“Tes percobaan”，在我的设备上我得到“Tes percobaan”，但如果我再次发送一条消息“percobaaan”，我会在我的设备上收到通知，但内容是“Tes percobaan” <-- 之前的内容

所以这里有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T08:20:48.120

您复制的示例代码使用您关心的行将注册 ID 发送回某个服务器进行存储。在大多数情况下，这将是您自己的应用程序服务器，以便您可以存储设备的注册 ID，并在以后使用它来将 C2DM 数据发送到设备。

由于您需要在发送数据之前知道设备的注册 ID，因此只需将此 URL 替换为您的应用程序中的适当 URL，该 URL 可以获取注册 ID 并将其存储在例如用户或类似的旁边。

# iphone - 在这种情况下，ObjC 方法命名约定？

> ID：11029191
> 
> 赞同：0
> 
> 时间：2012-06-14T08:17:50.243
> 
> 标签：iphone, objective-c, ios, methods, naming-conventions

我有一个代表考试的类，它可以开始/重置/暂停考试，所以方法如下：

```
- (void)startExam;
- (void)resetExam;
- (void)pauseExam; 
```

但据我所知，如果方法名称以某个名词结尾，它应该有该名词的参数，例如：

```
- (void)startExam:(Exam *)exam; 
```

但是在这种情况下，该类被命名为“Exam”，所以当使用该类时，人们会知道该对象是一个考试，所以似乎更好的命名方式是：

```
@interface Exam : NSObject
- (void)start;
- (void)reset;
- (void)pause;
@end 
```

所以我可以使用如下：

```
Exam *exam = [[[Exam alloc] init] autoreleased];
[exam start]; 
```

看起来比：

```
[exam startExam]; 
```

或者

```
[exam examStart]; 
```

但这看起来确实太通用了，我觉得 NSObject（或任何超类）将来可能会添加同名的方法，例如，Java 对象有 notify、notifyAll、wait 和子类不应该覆盖这些其他目的。这在Objective C中也是如此吗？

那么在这种情况下，最好的命名约定是什么？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T08:25:40.597

在目标 C 中，实际上没有人会期望该方法`startExam`接受任何论证。这将是方法`startExam:`（注意尾随的冒号）。这些是不同的方法，您甚至可以在同一个类中同时使用它们。所以，我会去`startExam`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T08:29:08.053

开始/暂停/重置属于类`Exam`。所以我会去：

```
@interface Exam : NSObject
- (void)start;
- (void)reset;
- (void)pause;
@end 
```

当我使用 Class 的对象时，`Exam`我只是在脑海中读到它：

```
[myExam start]; 
```

对我来说比这更有意义：

```
[myExam startExam]; 
```

至于有输入参数的那个：

```
- (void)startWith:(Exam *)exam; 
```

**PS：**但我可以看到自己按照 Dirk 的建议去做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T08:31:45.247

> 但这确实看起来太笼统了，

对我来说不是。考虑到对象模型的考试，您的方法中的“考试”一词是多余的。如果你看到代码

```
[myExam start]; 
```

除了考试还有什么开始？

# android - 在自定义 View 类中膨胀 xml 布局

> ID：11029192
> 
> 赞同：39
> 
> 时间：2012-06-14T08:17:55.627
> 
> 标签：android, view, android-inflate

我有一个`View1`扩展类`View`。我想`R.layout.test2.xml`在这堂课上充气`View1`。我在这个类中添加了以下代码

```
public class View1 extends View {

    View view;
    String[] countries = new String[] {"India", "USA", "Canada"};

    public View1( Context context) {
        super(context);
        LayoutInflater  mInflater=(LayoutInflater)context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        view=mInflater.inflate(R.layout.test2, null, false);
    }
} 
```

在另一个类`Home`中，我希望这个膨胀视图在某些情况下存在，在`Home`类中我编写了以下代码：

```
public class Home extends Activity{

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.home);
        CreateView();   
    }

    public void CreateView() {
        LinearLayout lv=(LinearLayout)findViewById(R.id.linearlayout);
        View1 view = new View1(Home.this);
        lv.addView(view);
    }
} 
```

但是当我运行我的项目时，活动并没有显示任何东西。

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-06-14T08:22:45.623

您不能将视图添加到`View`该类，而是应该使用`ViewGroup`或其子类之一（如`Linearlayout`等`RelativeLayout`）。然后你的代码将是这样的：

```
 public class View1 extends LinearLayout {

        View view;
        String[] countries = new String[] {"India", "USA", "Canada"};

        public View1( Context context) {
            super(context);
            inflate(context, R.layout.test2, this);
        }
    } 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-06-14T08:25:56.170

用这个

```
 LayoutInflater li = (LayoutInflater)getContext().getSystemService(infService);
    li.inflate(R.layout.test2, **this**, true); 
```

您必须使用`this`，而不是 null，并将`false`参数（布尔 AttachToRoot ）更改为`true`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-14T08:31:42.250

使用下面的代码来扩展您的布局，然后您可以将该视图用于任何目的。这将为您提供 XML 文件的最父布局。键入 cast 并相应地使用它。

```
View headerView = View.inflate(this, R.layout.layout_name, null); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-05-08T09:52:18.880

您必须使用`ViewGroup`like`FrameLayout`并执行以下操作：

```
public class View1 extends FrameLayout {

    public View1(Context context) {
        super(context);
        inflate(context, R.layout.view1, this);
    }
} 
```

在布局 XML 中，使用`<merge`标签不仅可以将您的`view1`布局添加到根布局，这意味着我们有一个空`FrameLayout`视图和您定义的视图并排放置。

```
<?xml version="1.0" encoding="utf-8"?>
<merge xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:text="content" />

</merge> 
```

见[http://trickyandroid.com/protip-inflating-layout-for-your-custom-view/](http://trickyandroid.com/protip-inflating-layout-for-your-custom-view/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-10-27T06:06:48.277

You are adding in home activity blank view. Because in View1 class you have only inflate view but not add anywhere.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-11-26T06:20:18.107

在科特林
`LayoutInflater.from(this).inflate(R.layout.custom_toolbar, null, false)`

# c# - XML 文档注释中的 XML (C#)

> ID：11029193
> 
> 赞同：2
> 
> 时间：2012-06-14T08:18:02.553
> 
> 标签：c#, .net

如何将 XML 嵌入到 C# XML 文档注释中（例如，在方法的标头中）？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-14T09:49:13.710

将其放入 CDATA 部分，并将 CDATA 部分放入`<code>`元素中，以便正确格式化：

```
/// <example>
/// <code>
/// <![CDATA[ 
/// <someXml>
///     ...
/// </someXml>
/// ]]>
/// </code>
/// </example> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T08:20:45.443

在代码文件中按“/”（斜杠）3 次，它将打开代码摘要部分。您可以在该部分粘贴您的 xml。

# jquery - 无法包含用于客户端幻灯片验证的 js 文件

> ID：11029197
> 
> 赞同：0
> 
> 时间：2012-06-14T08:18:22.863
> 
> 标签：jquery, ruby-on-rails, client-side-validation

我安装了 gem 'client_side_validations'，运行 bundle 并运行 rails g client_side_validations:install

安装 DIDN"T 创建任何 js 文件，所以我创建了它们并将 HitHub 中的代码放在我的 assets/javascript 文件夹中。

在 application.js 中添加了一行

```
 //= require rails.validations 
```

在 application.html.erb 中添加了一行

```
 <%= javascript_include_tag :defaults, "rails.validations", "rails.validations.custom" %> 
```

并且验证无法在线工作（使用 Devise gem）

在我看来：

```
 <%= form_for resource, ... , :validate => true do |f| %> 
```

在 GoogleChrome 控制台日志中：

```
 Failed to load resource: the server responded with a status of 404 (Not Found)
"/assets/javascripts/rails.validations.custom.js"
"/assets/javascripts/rails.validations.js" 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T05:52:07.220

当您运行命令`rails g client_side_validations:install`时，它似乎只生成初始化程序`config/initializers/client_side_validations.rb`。

但是，在“安装”部分下的[github 页面](https://github.com/bcardarella/client_side_validations)上，他们提到了将 javascript 文件复制到项目资产的命令：`rails g client_side_validations:copy_assets`

**注意：**如果您运行 Rails >= 3.1，则不再需要在布局中添加 javascript 文件，`<%= javascript_include_tag "application" %>`只要 application.js 包含包含目录`//= require_tree .`下所有 javascript 文件的行就足够了`app/assets/javascripts`。

在初始化`client_side_validations.rb`文件中，您还需要取消注释最后一个块：

```
# Uncomment the following block if you want each input field to have the validation messages attached.
ActionView::Base.field_error_proc = Proc.new do |html_tag, instance|
  ...
end 
```

完成此操作后，您需要重新启动服务器以使更改生效。

# iphone - 检查 NSMutableArray 中的答案

> ID：11029198
> 
> 赞同：0
> 
> 时间：2012-06-14T08:18:25.267
> 
> 标签：iphone, xcode, compare, nsmutablearray

当我运行此代码并按“下一步”按钮时。我得到一个严重的过度错误。我想要它做的是检查用户输入的内容是否与给定标签的索引进行比较，每次用户输入正确答案时该索引都会发生变化。例如：naam.text =@“氟化钠”。那么formule.text 在“formules”中的索引必须与“namen”中的索引相同。

```
-(IBAction)next:(id)sender {

    if ([formule.text isEqualToString:[formules objectAtIndex:x]]) {
        x = arc4random() % x;
        naam.text = [namen objectAtIndex:x];
    }
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    formules = [NSMutableArray arrayWithObjects:@"NaNO3",@"NaCH3COO",@"NaCl",@"NaBr",@"NaI",@"Na2SO4",@"NaF",@"Na2S",@"NaOH",@"Na2SO3",@"Na2CO3",@"Na3PO4",@"Na2O",nil];

    namen = [NSMutableArray arrayWithObjects:@"Natriumnitraat",@"Natriumacetaat",@"Natriumchloride",@"Natriumbromide",@"Natriumjodide",@"Natriumsulfaat",@"Natriumfluoride",@"Natriumsulfide",@"Natriumhydroxide",@"Natriumsulfiet",@"NatriumCarbonaat",@"Natriumfosfaat",@"Natriumoxide", nil];
    // Do any additional setup after loading the view from its nib.

    x = arc4random() % [formules count];
    naam.text = [namen objectAtIndex:x];
} 
```

任何人都知道我的问题是什么以及如何解决它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T08:27:29.697

我不清楚您为什么要写`x = arc4random() % x;`，也许您可​​以像这样写`x = arc4random() % 10;`。另外，您正在检查随机值。您应该放置一个 for 循环，该循环应该使用您的标签检查数组的每个值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T08:23:16.050

您必须在创建后保留您的数组

```
[formules retain];
[namen retain]; 
```

如果您使用 arc 使用 [NSMutableArray alloc] initWithObjects: 或将您的数组定义为强属性

# mysql - 将数据从 Sybase 导入 MySQL

> ID：11029199
> 
> 赞同：0
> 
> 时间：2012-06-14T08:18:27.393
> 
> 标签：mysql

我正在将旧的 Sybase 数据库迁移到新的 MySQL 数据库。自从 Sybase 可以将数据导出到 .dat 文件（类似于新的 csv）的那一刻起，我决定使用它。

问题是 Sybase 使用逗号作为列分隔符，字符串中的逗号被忽略，因为它包含在 '' 中，但在 MySQL 中没有。

有没有办法解决这个问题？这是我的查询：

```
LOAD DATA LOCAL INFILE 'C:\\UNLOAD\\166.dat'
INTO TABLE linea_col
COLUMNS TERMINATED BY ','
LINES TERMINATED BY '\r\n'; 
```

先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T08:33:14.720

如果它们用单引号括起来，试试这个：

```
LOAD DATA LOCAL INFILE 'C:\\UNLOAD\\166.dat'
INTO TABLE linea_col
COLUMNS TERMINATED BY ','
ENCLOSED BY '\''
LINES TERMINATED BY '\r\n'; 
```

如果这不起作用，那么您应该这样做`ENCLOSED BY ''''`，但我 99.99% 确定第一个是正确的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T08:37:38.953

我不熟悉 DAT 文件与 CSV 的不同之处，但您可以使用 CSV 作为通用格式。

您可以使用 BCP 从 Sybase 导出并强制输出使用 CSV 格式

```
bcp database.dbo.tbl_name out c:\temp\output.csv -c -t, -U user_name -P password -S server_name 
```

然后导入 MySQL

```
load data local infile 'uniq.csv' into table tblUniq fields terminated by ','
enclosed by '"'
lines terminated by '\n'
(uniqName, uniqCity, uniqComments) 
```

# c# - 将 printf C++ 控制台输出重定向到 C#

> ID：11029203
> 
> 赞同：4
> 
> 时间：2012-06-14T08:18:37.793
> 
> 标签：c#, c++, redirect

这是我在 C# GUI 程序中单击按钮时调用的方法。它启动了一个非常简单的 C++ 控制台程序，除了在一个永无止境的循环中每秒打印一行之外什么都不做。

```
private static Process process;

private void LaunchCommandLineApp()
{
    process = new Process();
    process.StartInfo.FileName = "SimpleTest.exe";
    process.StartInfo.UseShellExecute = false;
    process.StartInfo.RedirectStandardOutput = true;
    process.EnableRaisingEvents = true;
    process.StartInfo.CreateNoWindow = false;
    process.OutputDataReceived += process_OutputDataReceived;

    process.Start();
    process.BeginOutputReadLine();
} 
```

这是处理接收到的任何输出数据的方法：

```
private void process_OutputDataReceived(object sender, DataReceivedEventArgs e)
{
    if (e.Data != null)
        Console.WriteLine(e.Data.ToString());
} 
```

我在我的 C# 调试输出中看不到任何输出...但是如果我将 printf 更改为 std::cout，它将显示重定向消息。

我在想是否有任何方法可以使用 printf 显示这些语句？

仅供参考：我的 c++ 代码**[编辑的工作版本]**：

```
#include <stdio.h>
#include <Windows.h>
#include <iostream>

int main()
{
int i = 0;

for(;;)
{
    Sleep(1000);
    i++;
    // this version of printf with fflush will work
    printf("The current value of i is %d\n", i);
    fflush(stdout);

    // this version of cout will also work
    //std::cout << "the current value of i is " << i << std::endl;
}

printf("Program exit\n");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T09:12:03.217

感谢大家的所有投入！

我想我会将我的所有 printf 更改为 std::cout 和 std::endl 用于我的 C++ 控制台程序。

# c# - 如何在 EF4(ORACLE) 中处理并发

> ID：11029204
> 
> 赞同：0
> 
> 时间：2012-06-14T08:19:02.397
> 
> 标签：c#, oracle, entity-framework, odac

我想知道在使用 Entity Framework 4(ODAC) 编程时如何安全地更新数据。

```
void DescreaseInventory(int id, int qty){
  var order = (from o in context.Orders where o.ID ==id select o).FirstOrDefault;
  if( order != null ){
    if( ((Order)order).Qty < qty )
      throw new ApplicationException( "Not Enough Inventory!!" );
    else
      ((Order)order).Qty -= qty;
  }
  else{
  //...some code...
  }
  //will content.savechange
} 
```

一旦发生竞争条件，此代码将是危险的（逃避数量检查）。谁知道如何正确地做到这一点？

**编辑**：现在我知道 EF4 提供了一种将列作为跟踪令牌的机制。但我不确定如何在 oracle DB(9i) 中创建这种列？什么是正确的列类型？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T08:31:25.453

通过使用乐观并发 = 数据库中的 rowversion 或 timestamp 列。这些列由数据库维护，并在更新记录时自动更改它们的值。如果您正确配置 EF 模型以使用此类列进行并发检查，您将避免一些问题。

当一个进程接受您的订单时，它将加载其当前时间戳，并且当它尝试保存记录时，时间戳将成为更新的 Where 条件的一部分。如果订单同时被另一个进程更改，它将找不到要更新的记录并抛出异常。您将不得不通过刷新数据库中的数据以获取实际状态和实际时间戳来处理此类异常，例如通过重新计算数量或将其传递给用户进行解析。

# android - KSoap2 Android接收对象数组

> ID：11029205
> 
> 赞同：4
> 
> 时间：2012-06-14T08:19:03.067
> 
> 标签：android, arrays, web-services, android-ksoap2

我试图在我的应用程序中使用 .NET Web 服务，该服务返回一组对象作为响应。

这是来自网络服务的响应格式。

```
<?xml version="1.0" encoding="utf-8"?>
<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
<soap:Body>
<GetPickersResponse xmlns="http://tempuri.org/">
  <GetPickersResult>
    <Picker>
      <Id>int</Id>
      <StartTime>dateTime</StartTime>
      <EndTime>dateTime</EndTime>
      <PickerCount>int</PickerCount>
    </Picker>
    <Picker>
      <Id>int</Id>
      <StartTime>dateTime</StartTime>
      <EndTime>dateTime</EndTime>
      <PickerCount>int</PickerCount>
    </Picker>
  </GetPickersResult>
</GetPickersResponse>
</soap:Body>
</soap:Envelope> 
```

这是我从 Web 服务获取响应的 Java 代码。

```
SoapObject request = new SoapObject(NAMESPACE, METHOD_GET_CONTROL);
SoapSerializationEnvelope envelope = 
        new SoapSerializationEnvelope(SoapEnvelope.VER11); 
    envelope.dotNet = true;
    envelope.setOutputSoapObject(request);

HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);

 try {
             androidHttpTransport.call(SOAP_ACTION_GET_CONTROL, envelope);
            ..........=envelope.getResponse(); //To get the data. } 
```

我的问题是，我应该用什么替换源代码中的“........”来接收对象数组作为来自服务的响应？我需要接收多个对象，然后使用它们各自的数据成员。

请帮忙。我是 Web 服务和 Ksoap 的新手。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-16T11:33:41.597

要获得多重响应，只需在代码中添加几行而不是`..........=envelope.getResponse();`

```
SoapObject obj1 = (SoapObject) envelope.getResponse();

SoapObject obj2 =(SoapObject) obj1.getProperty(0);

for(int i=0; i<obj2.getPropertyCount(); i++)
{
   SoapObject obj3 =(SoapObject) obj2.getProperty(i);
   int id= Integer.parseInt(obj3.getProperty(0).toString());
   String start_date = obj3.getProperty(1).toString();
   String end_date = obj3.getProperty(2).toString();
   int id= Integer.parseInt(obj3.getProperty(3).toString());
} 
```

如果你还有什么问题可以给我写信。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-13T11:52:31.807

我总是将 Vector 作为响应类型，所以我的解决方案是：

```
 HttpTransportSE conn = new HttpTransportSE(url);
        try{
            conn.call(soapAction, envelope); //send request
            Vector<SoapObject> result= (Vector<SoapObject>)envelope.getResponse();

            int length = result.size();
            for(int i=0;i<length; ++i){
                SoapObject so = result.get(i);
                Log.d(TAG,so.getPropertyAsString(3));
            }
        } catch(Exception e){
            e.printStackTrace();
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T07:04:50.723

```
package com.service;

import java.util.ArrayList;

import org.ksoap2.SoapEnvelope;
import org.ksoap2.serialization.PropertyInfo;
import org.ksoap2.serialization.SoapObject;
import org.ksoap2.serialization.SoapPrimitive;
import org.ksoap2.serialization.SoapSerializationEnvelope;
import org.ksoap2.transport.AndroidHttpTransport;

import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.EditText;
import android.widget.ListView;
import android.widget.TextView;
import android.widget.Toast;

public class KSOAP extends Activity 
{
    ListView list;
    ArrayList<String> arraylist = new ArrayList<String>();
    ArrayAdapter<String>  arrayadapter;

    Button btn;
    TextView tv,tv2,tv3; 
    EditText no1,no2;
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) 
{ 
super.onCreate(savedInstanceState);
setContentView(R.layout.main);

tv=(TextView)findViewById(R.id.textView1);
tv2=(TextView)findViewById(R.id.textView2);
//tv3=(TextView)findViewById(R.id.textView3);

list=(ListView)findViewById(R.id.listView1);

no1=(EditText)findViewById(R.id.editText1);
no2=(EditText)findViewById(R.id.editText2);

btn =(Button)findViewById(R.id.button1);
btn.setOnClickListener(new OnClickListener() {

    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub

        String NAMESPACE = "http://tempuri.org/" ;    
        //"http://vladozver.org/";
        String METHOD_NAME = "GetSumOfTwoIntsList";//"GetStringList"; //
        String SOAP_ACTION = "http://tempuri.org/GetSumOfTwoIntsList";  
        //"http://vladozver.org/GetSumOfTwoInts";
        String URL = "http://192.168.0.203/recharge_service/service.asmx";
        //"http://192.168.0.203/Recharge_Service/Service.asmx";

        SoapObject Request = new SoapObject(NAMESPACE, METHOD_NAME);

        PropertyInfo pi = new PropertyInfo();
        pi.setName("Operand1");
        pi.setValue(Integer.parseInt(no1.getText().toString()));
        pi.setType(int.class);
        Request.addProperty(pi);

        PropertyInfo pi2 = new PropertyInfo();
        pi2.setName("Operand2");
        pi2.setValue(Integer.parseInt(no2.getText().toString()));
        pi2.setType(int.class);
        Request.addProperty(pi2);

        SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
        envelope.dotNet = true;
        envelope.setOutputSoapObject(Request);
        try
        {
        AndroidHttpTransport transp = new AndroidHttpTransport(URL);
        transp.call(SOAP_ACTION, envelope);

        SoapObject obj1 = (SoapObject) envelope.bodyIn;

        SoapObject obj2 =(SoapObject) obj1.getProperty(0);

        for (int i = 0; i< obj2.getPropertyCount(); i++) 
            { 
                 int id1 = Integer.parseInt(obj2.getProperty(0).toString());
              // String id1=obj2.getProperty(0).toString();

               if(id1 != 0)
               { 
                 arraylist.add(""+ id1);    

               }
                /* tv3.setText(id3);*/
            }

        }
        catch(Exception e)
        { tv.setText(e.toString());
        e.printStackTrace();
        }

        //tv.setText(""+ count);

               list.setAdapter(arrayadapter);
    }
});

        arrayadapter = new ArrayAdapter<String>( this, 
        android.R.layout.simple_list_item_1, arraylist );
       list.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,
                long arg3) {
            // TODO Auto-generated method stub

        }
    });

}

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-08T14:13:08.010

这是方法

String NAMESPACE = "你的命名空间" ;

```
//"http://vladozver.org/";

String METHOD_NAME = "get";//"GetStringList"; //

String SOAP_ACTION = "Your SoapAction";

//"http://vladozver.org/GetSumOfTwoInts";

String URL = "Your Soap Url"; 
```

public void involk(String na,String WebMethodName) throws IllegalStateException {

```
 SoapObject request=new SoapObject(NAMESPACE,WebMethodName);

    PropertyInfo sayHellopi=new PropertyInfo();

    sayHellopi.setName("get");
    sayHellopi.setValue(na);
    sayHellopi.setType(String.class);

    request.addProperty(sayHellopi);

    SoapSerializationEnvelope envelope=new SoapSerializationEnvelope(SoapEnvelope.VER11);
    envelope.setOutputSoapObject(request);

    AndroidHttpTransport transp = new AndroidHttpTransport(URL);

    try {
        transp.call(SOAP_ACTION,envelope);
        //ArrayList primitive= (ArrayList) envelope.bodyIn;
        SoapObject primitive= (SoapObject) envelope.bodyIn;
        // SoapObject obj2=(SoapObject)obj1.getProperty(0);
        // KvmSerializable ks=(KvmSerializable)envelope.bodyIn;
        // System.out.println("Values.............."+envelope.bodyIn);
               /* for(int i=0;i<obj2.getPropertyCount();i++){
                  String  id1=obj2.getProperty(0).toString();

                    if(""!=id1 ){

                        System.out.println("Count " + obj2.getPropertyCount());
                        arraylist.add(""+id1);
                        System.out.println("Array ::::::::::::: " + arraylist);

                    }
                }*/
                  //resText= envelope.bodyIn;

                   //resText = new ArrayList<Objects>();
           //for(int i=0;i<resText.equals(resText);i++){

          //}
                 System.out.println("List+++++++++++++++++");
               /* //System.out.println("value of result " + primitive);
                System.out.println("Count " + primitive.getPropertyCount());
                //System.out.println("Prop 1 " + primitive.getProperty(0));
                //System.out.println("A list b4 :; " + arrayList);*/

    /* for(int i=0;i<obj1.getPropertyCount();i++){
             //discount=new Discount((SoapObject)primitive.getProperty(i));
            //Toast.makeText(getApplicationContext(),"Hi",Toast.LENGTH_SHORT).show();

            //System.out.println("is result null????????????"+result);
            arraylist.add(obj1.getPropertyCount());
            System.out.println("Array ::::::::: " + arraylist);
        }*/
       // arraylist=new ArrayList();
        //resText=new String[primitive.getPropertyCount()];

        for(int i=0;i<primitive.getPropertyCount();i++){

            arraylist.add((String) primitive.getProperty(i));
            //arraylist.add(primitive.getPropertyCount());
            System.out.println("ForLoop--------------"+primitive.getProperty(i));

            // System.out.println("is result null????????????"+arrayList.listIterator());

        }
        // ListIterator it = arraylist.listIterator();

        //while(it.hasNext())
        // {
        // System.out.println("arrayListValue--------------"+it.next());
        //}
        // System.out.println("List+++++++++++++++++"+resText.length);

        // list.setAdapter(arrayadapter);

    }catch (Exception e){
        System.out.println("Error Value" + e);
        //resText="Error Occur";
        e.printStackTrace();
    }
    //list.setAdapter(arrayadapter);
  //return "";
} 
```

使用异步任务

私有类 AsyncCall 扩展 AsyncTask {

```
 protected void onPreExecute(){

        super.onPreExecute();

        // pg.setVisibility(View.VISIBLE);
        dialog=new ProgressDialog(MainActivity.this);
        dialog.setIndeterminate(false);
        dialog.setMessage("Loding...");
        dialog.setCancelable(false);
        dialog.show();
    }
    protected Void doInBackground(Void... parms){
      involk(editText,"get");
       // return null;
       // return null;
        return null;
    }

    protected void onPostExecute(Void result){
        super.onPreExecute();
        // tv.setText(displayText);
        if(arraylist.size()!=0){
            dialog.dismiss();
        arrayadapter = new ArrayAdapter<String>( MainActivity.this,
                android.R.layout.simple_list_item_activated_1, arraylist );
            list.setAdapter(arrayadapter);
        }else{
            dialog.dismiss();
            getError();
        }
        // pg.setVisibility(View.INVISIBLE);
    }
} 
```

按钮点击事件

btn.setOnClickListener(new View.OnClickListener() {

```
 public void onClick(View view) {

            if(no1.getText().length()!=0&&no1.getText().length()!=0){

                editText=no1.getText().toString();
                AsyncCall task=new AsyncCall();
                task.execute();
            }
        }
    }); 
```

我希望这会帮助你的朋友:)

# java - xml解析错误

> ID：11029207
> 
> 赞同：0
> 
> 时间：2012-06-14T08:19:12.507
> 
> 标签：java, android

我构建了一个从一个活动切换到另一个活动的代码。运行此代码时，它会打印以下错误。 **XML 文件中的错误：正在中止构建。** 和 **安装错误：INSTALL_PARSE_FAILED_BAD_SHARED_USER_ID** 这是我的 xml 文件

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="wishme.code"
    android:versionCode="1"
    android:versionName="1.0" android:sharedUserId="@string/app_name">

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:name=".WishMeActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name=".Activity2"></activity>
    </application>
<uses-sdk android:minSdkVersion="8" />
</manifest> 
```

这是活动1

```
package wishme.code;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.provider.Contacts.Intents;
import android.widget.TextView;
import android.view.View;
import android.widget.EditText;
import android.widget.Button;
import android.widget.RadioButton;
import android.widget.Toast;

public class WishMeActivity extends Activity {
    private EditText text;
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
     setContentView(R.layout.main);
     text=(EditText) findViewById(R.id.editText1);
    }

 public void myClickhandler(View view)
 {
     switch(view.getId())
     {
     case R.id.button1:
         RadioButton celsiusbutton=(RadioButton) findViewById(R.id.radio0);
         RadioButton fahrenheit=(RadioButton) findViewById(R.id.radio2);
         if(text.getText().length()==0)
         {
             Toast.makeText(this,"Enter a Valid Value",Toast.LENGTH_LONG).show();
             return;

         }
         float input=Float.parseFloat(text.getText().toString());
         if(celsiusbutton.isChecked())
         {text.setText(String.valueOf(convertFahrenheitToCelsius(input)));
        celsiusbutton.setChecked(false);
            fahrenheit.setChecked(true);}
         else
         {
             text.setText(String.valueOf(convertCelsiusToFahrenheit(input)));
             fahrenheit.setChecked(false);
             celsiusbutton.setChecked(true);
         }
         break;
     case R.id.button_nxt:
         Intent myintent=new Intent(view.getContext(),Activity2.class);
         startActivityForResult(myintent, 0);
         break;

     }
 }
 private float convertFahrenheitToCelsius(float fahrenheit) {
        return ((fahrenheit - 32) * 5 / 9);
    }

    // Converts to fahrenheit
    private float convertCelsiusToFahrenheit(float celsius) {
        return ((celsius * 9) / 5) + 32;
    }
} 
```

最后这是活动 2

```
package wishme.code;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;

public class Activity2 extends Activity{

    public void onCreate(Bundle savedInstancestate) {
        super.onCreate(savedInstancestate);
        setContentView(R.layout.main2);
        Button previous=(Button) findViewById(R.id.button_prev);

    }
    public void prevclickhandler(View view)
    {
        Intent intent=new Intent();
        setResult(RESULT_OK,intent);
        finish();
    }
} 
```

请建议我解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T08:31:10.940

如果您只想从一项活动转到另一项活动，则无需提供`sharedUserID`. 它用于您有两个使用相同证书签名的不同应用程序并且您希望在它们之间共享数据或希望它们在同一进程中运行的情况。

如果您删除它，它应该可以解决您的问题。

有关信息：http `sharedUserID`: [//developer.android.com/guide/topics/manifest/manifest-element.html#uid](http://developer.android.com/guide/topics/manifest/manifest-element.html#uid)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-05T10:10:06.220

这可能是由于您的`sharedUserId`值是不允许的值。它必须具有与包结构相同的格式（例如`com.android`）。

# javascript - 有没有使用 Javascript 解析 OpenSearch XML 的好方法？

> ID：11029208
> 
> 赞同：0
> 
> 时间：2012-06-14T08:19:12.817
> 
> 标签：javascript

我想解析 OpenSearch XML 以获取类似“http://stackoverflow.com/search?q={searchTerms}”的搜索网址

XML是这样的：

```
<?xml version="1.0" encoding="UTF-8" ?>

<OpenSearchDescription xmlns="http://a9.com/-/spec/opensearch/1.1/" xmlns:moz="http://www.mozilla.org/2006/browser/search/">
      <ShortName>Stack Overflow</ShortName>
      <Description>Search Stack Overflow: Q&amp;A for professional and enthusiast programmers</Description>
      <InputEncoding>UTF-8</InputEncoding>
      <Image width="16" height="16" type="image/x-icon">http://sstatic.net/stackoverflow/img/favicon.ico</Image>
      <Url type="text/html" method="get" template="http://stackoverflow.com/search?q={searchTerms}"></Url>
</OpenSearchDescription> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T08:31:12.950

```
var domParser = new DOMParser,
    dom = domParser.parseFromString(xml, "application/xml");

console.log( dom.getElementsByTagName("Url")[0].getAttribute("template"));
//"http://stackoverflow.com/search?q={searchTerms}" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T13:15:21.083

只是让[XmlHttpRequest](https://developer.mozilla.org/en/xmlhttprequest)完成工作？我很确定您不会将 XML 作为字符串获取。

```
var dom = xhr.responseXML;
var url = dom.documentElement.querySelector("Url[template]"); // DOM lvl 3!
if (url)
    return url.getAttribute("template"); 
```

# c# - 该成员被多次定义，但为什么呢？

> ID：11029211
> 
> 赞同：-1
> 
> 时间：2012-06-14T08:19:25.897
> 
> 标签：c#, c#-4.0

我有一个这样的 php 代码，我需要将其转换为 .NET

```
function jaktDate2()
{
Global $nameofselectbox,$startYear,$endYear,$year,
$startDate,$endDate,$startMounth,$endMounth,$startDay,$endDay;
$today = getdate();
$year=$today['year'];
$mounth=$today['mon'];
$day=$today['mday'];
//$year="2004";
//$mounth="7";
//$day="1";

if(round($mounth)<="6"){$startYear=$year-1;$startMounth="-07";$startDay="-01";
$endYear=$year;$endMounth="-06";$endDay="-30";}
elseif(round($mounth)>="7"){$startYear=$year;$startMounth="-07";$startDay="-01";
$endYear=$year+1;$endMounth="-06";$endDay="-30";}

$startDate=$startYear.$startMounth.$startDay;
$endDate=$endYear.$endMounth.$endDay;

return $startDate.";".$endDate;
} 
```

这是我的转换：

```
 public class HuntingDate
    {
        public string StartYear;
        public string EndYear;
        public string Year;
        public DateTime StartDate;
        public DateTime EndDate;
        public string StartMonth;
        public string EndMonth;
        public DateTime StartDay;
        public DateTime EndDay;

        private string _startYear;
        public string StartYear
        {
            get { return _startYear;}
            set { _startYear = value;}
        }

        private string _endYear;
        public string EndYear
       {
        get{return _endYear;}
        set { _endYear = value; }
       }

        private DateTime _startDate;
        public DateTime StartDate
        {
            get { return _startDate;}
            set { _startDate = value;}
        }

        private DateTime _endDate;
        public DateTime EndDate
        {
            get { return _endDate;}
            set { _startDate = value;}
        }

        private string _year;
        public string Year
        {
            get { return _year;}
            set { _year = value;}
        }

        private string _startMonth;
        public string StartMonth
        {
            get { return _startMonth;}
            set { _startMonth = value;}
        }

        private string _endMonth;
        public string EndMonth
        {
        get { return _endMonth;}
        set { _endMonth = value;}
        }

        private DateTime _startDay;
        public DateTime StartDay
        {
            get { return _startDay;}
            set { _startDay = value;}
        }

        private DateTime _endDay;
        public DateTime EndDay
        {
            get { return _endDay; }
            set { _endDay = value; }
        }

        public HuntingDate(){
        DateTime today = DateTime.Now;
        int year = today.Year;
        int month = today.Month;
        DateTime day = today;

        DateTime StartDate = (StartYear+StartMonth+StartDay);
        DateTime EndDate   = (EndYear+EndMonth+EndDay);

        if (month <= 6)
        {
            //string StartYear = Convert.ToString(year-1);
            string StartYear = (year - 1).ToString();
            string StartMonth = Convert.ToString(7);
            string EndYear = Convert.ToString(year);
            string EndMonth = Convert.ToString(6);
            string EndDay = Convert.ToString(30);
        }
        else if(month >= 7)

        {
            string StartYear =Convert.ToString(year);
            string StartMonth = Convert.ToString(7);
            string StartDay = Convert.ToString(1);
            string EndYear = Convert.ToString(year+1);
            string EndMonth = Convert.ToString(6);
            string EndDay = Convert.ToString(30);

        }
        }
        }

        } 
```

我在这里发现的问题：

```
 DateTime StartDate = (StartYear+StartMonth+StartDay);
        DateTime EndDate   = (EndYear+EndMonth+EndDay); 
```

问题是：这个成员被定义了不止一次

在这里红色下划线的 startyear startmonth startday & 以及其他部分。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-14T08:21:07.230

因为您已经定义了一个公共字段`StartDate`和一个属性`StartDate`，所以您不能这样做

```
public DateTime StartDate;

public DateTime StartDate
        {
            get { return _startDate;}
            set { _startDate = value;}
        } 
```

如果您只打算`StartDate`用作财产，那么您可以摆脱公共领域，即`public DateTime StartDate;`.

您似乎正在针对每个公共字段定义属性。那是语法错误。您可能会摆脱所有公共字段，并且由于您没有在属性中执行任何操作，因此您可以将它们定义为：

```
public DateTime StartDate { get; set; } 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-14T08:21:35.530

好吧，看`StartYear`一个例子：

```
// Field declaration
public string StartYear;

// Property declaration with the same name
public string StartYear
{
    get { return _startYear;}
    set { _startYear = value;}
} 
```

既然您*还*拥有由公共属性支持的私有字段，为什么还要拥有公共字段？只需摆脱那些公共领域。

在更广泛的意义上，我不会尝试从另一个平台逐字移植代码 - 我会尝试找出*意图*，然后在您的 .NET 代码中以惯用的方式实现它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T08:21:39.587

您之前已经声明`StartDate`过。您正试图在显示错误的部分重新声明它。

# c# - 我不明白这个多态性代码中的参数是如何工作的

> ID：11029222
> 
> 赞同：0
> 
> 时间：2012-06-14T08:20:27.440
> 
> 标签：c#, polymorphism

我的兄弟为我写了这段代码来展示一个多态的例子。但我真的不明白它是如何工作的，从参数开始。有人可以剖析代码并告诉我它是如何一起工作的以及它是如何运作的吗？

**编辑：这是一个具体的问题：mamams.Add(new Cat("Snow white", 1, 0, "White", "blue")); 数字有什么作用？他们的目的是什么以及他们如何使用代码？**

```
namespace ConsoleApplication2
{
    class Program
    {
        static void Main(string[] args)
        {

            List<Mammal> mammals = new List<Mammal>();

            mammals.Add(new Cat("Snow white", 1, 0, "White", "blue"));
            mammals.Add(new HumanFemale("Krysten", 72, 15, "White", "Blue"));
            mammals.Add(new Cat("Larry", 7, 2, "Orange", "Hazel"));
            mammals.Add(new Dog("Walt", 3, 5, "Brown", "Hazel"));
            mammals.Add(new HumanMale("Ryan", 72, 31, "White", "Blue"));
            mammals.Add(new Cat("Blacky", 5, 10, "Black", "Brown"));

            foreach (Mammal m in mammals)
            {
                m.Speak();
                m.Walk();
            }
            Console.ReadKey();
        }
    } // end of Program class declaration

    public abstract class Mammal
    {
        public Mammal(string name, int heightInInches, int age, string color, string eyeColor)
        {
            this.Name = name;
            this.HeightInInches = heightInInches;
            this.Age = age;
            this.Color = color;
            this.EyeColor = eyeColor;
        }

        private int _HeightInInches;
        private int _Age;

        /// <summary>
        /// Gets or sets the age (in years).
        /// </summary>
        public int Age
        {
            get 
            { 
                return _Age; 
            }
            set 
            {
                if (value < 0)
                {
                    throw new Exception("Invalid Age!");
                }
                _Age = value; 
            }
        }

        /// <summary>
        /// Gets or sets the height.
        /// </summary>
        public int HeightInInches
        {
            get 
            { 
                return _HeightInInches; 
            }
            set 
            {
                if (value < 0)
                {
                    throw new Exception("Invalid height!");
                }
                _HeightInInches = value; 

            }
        }

        /// <summary>
        /// Gets or sets the name.
        /// </summary>
        public string Name { get; set; }

        /// <summary>
        /// Gets or sets the skin or fur color.
        /// </summary>
        public string Color { get; set; }

        /// <summary>
        /// Gets or sets the eye color.
        /// </summary>
        public string EyeColor { get; set; }

        /// <summary>
        /// Causes the mammal to speak.
        /// </summary>
        public virtual void Speak()
        {
            Console.WriteLine("The mammal spoke.");
        }

        /// <summary>
        /// Causes the mammal to walk.
        /// </summary>
        public virtual void Walk()
        {
            Console.WriteLine("The mammal is walking.");
        }

    } // end of Mammal class declaration

    public class Dog : Mammal
    {
        public Dog(string name, int heightInInches, int age, string color, string eyeColor) 
            : base (name, heightInInches, age, color, eyeColor)
        {
        }

        public override void Speak()
        {
            Console.WriteLine("{0} the Dog says: 'Ruff!'", this.Name);
        }

        public override void Walk()
        {
            if (this.Age == 0)
            {
                Console.WriteLine("{0}, the {1} newborn puppy was just born and is too little to walk yet!", this.Name, this.Color);
            }

            else if (Age > 0 && Age <= 5)
            {
                Console.WriteLine("{0}, the {1} puppy is {2} years old and is running around like a hyper puppy, chewing up all the furniture. Oh nooo!", this.Name, this.Color, this.Age);
            }

            else if (Age > 5 && Age <= 10)
            {
                Console.WriteLine("{0}, the {1} dog is {2} years old and walks conservatively", this.Name, this.Color, this.Age);
            }

            else if (Age > 10)
            {
                Console.WriteLine("{0}, the {1} dog is {2} years old and walks very slowly, and has arthiritus in the joints.", this.Name, this.Color, this.Age);
            }
        }

    } // end of Dog class

    public class Cat : Mammal
    {
        public Cat(string name, int heightInInches, int age, string color, string eyeColor)
            : base(name, heightInInches, age, color, eyeColor)
        {
        }

        public override void Speak()
        {
            Console.WriteLine("{0} the Cat says: 'Meow!'", this.Name);
        }

        public override void Walk()
        {

            if (this.Age == 0)
            {
                Console.WriteLine("{0}, the {1} newborn Kitten was just born and is too little to walk yet!", this.Name, this.Color);
            }

            else if (Age > 0 && Age <= 5)
            {
                Console.WriteLine("{0}, the {1} Kitten is {2} years old and is running around like a hyper kitten!", this.Name, this.Color, this.Age);
            }

            else if (Age > 5 && Age <= 10)
            {
                Console.WriteLine("{0}, the {1} cat is {2} years old and walks conservatively", this.Name, this.Color, this.Age);
            }

            else if (Age > 10)
            {
                Console.WriteLine("{0}, the {1} cat is {2} years old and walks very slowly", this.Name, this.Color, this.Age);
            }
        }
    } // end of Cat class

    public abstract class Human : Mammal
    {
        public Human(string name, int heightInInches, int age, string color, string eyeColor)
            : base(name, heightInInches, age, color, eyeColor)
        {
        }

        public override void Walk()
        {

            if (this.Age == 0)
            {
                Console.WriteLine("{0}, the {1} newborn baby was just born and is too little to walk yet!", this.Name, this.Color);
            }

            else if (Age > 0 && Age <= 2)
            {
                Console.WriteLine("{0}, the {1} toddler is {2} years old and is crawling around!", this.Name, this.Color, this.Age);
            }

            else if (Age > 2 && Age <= 5)
            {
                Console.WriteLine("{0}, the {1} kid is {2} years old and is walking around!", this.Name, this.Color, this.Age);
            }

            else if (Age > 5 && Age <= 12)
            {
                Console.WriteLine("{0}, the {1} kid is {2} years old and walks briskly", this.Name, this.Color, this.Age);
            }

            else if (Age > 12 && Age <= 19)
            {
                Console.WriteLine("{0}, the {1} audlt is {2} years old and walks briskly", this.Name, this.Color, this.Age);
            }

            else if (Age > 20 && Age <= 60)
            {
                Console.WriteLine("{0}, the {1} adult is {2} years old and walks conservatively", this.Name, this.Color, this.Age);
            }

            else if (Age > 60)
            {
                Console.WriteLine("{0}, the {1} old person is {2} years old and walks with a cane", this.Name, this.Color, this.Age);
            }
        }

        public  override void Speak()
        {
            Console.WriteLine("The human spoke");
        }
    } // end of Human class

    public class HumanMale : Human
    {
        public HumanMale(string name, int heightInInches, int age, string color, string eyeColor)
            : base(name, heightInInches, age, color, eyeColor)
        {

        }

        public override void Speak()
        {
            if (this.Age == 0)
            {
                Console.WriteLine("{0}, the newborn baby boy was just born and is too young to speak", this.Name);
            }
            if (this.Age > 0 && this.Age <= 3)
            {
                Console.WriteLine("{0}, the toddler boy babbles 'goo goo ga ga'", this.Name);
            }

            if (this.Age > 3 && this.Age <= 5)
            {
                Console.WriteLine("{0}, the toddler boy says, 'I like fire trucks'", this.Name);
            }

            if (this.Age > 5 && this.Age <= 12)
            {
                Console.WriteLine("{0}, the young boy says: I want to be a fireman'", this.Name);
            }

            if (this.Age > 12 && this.Age <= 20)
            {
                Console.WriteLine("{0}, the teenage boy says: I want a girlfriend'", this.Name);
            }

            if (this.Age > 20)
            {
                Console.WriteLine("{0}, the adult male says, 'Hey hey hey!'", this.Name);
            }

        }

    } // end of HumanMale class

    public class HumanFemale : Human
    {
        public HumanFemale(string name, int heightInInches, int age, string color, string eyeColor)
            : base(name, heightInInches, age, color, eyeColor)
        {

        }

        public override void Speak()
        {
            if (this.Age == 0)
            {
                Console.WriteLine("{0}, the newborn baby girl was just born and is too young to speak", this.Name);
            }
            if (this.Age > 0 && this.Age <= 3)
            {
                Console.WriteLine("{0}, the toddler girl babbles 'da da goo goo ga ga'", this.Name);
            }

            if (this.Age > 3 && this.Age <= 5)
            {
                Console.WriteLine("{0}, the girl says 'I wanna be a princess'", this.Name);
            }

            if (this.Age > 5 && this.Age <= 12)
            {
                Console.WriteLine("{0}, the young girl says: I AM a princess'", this.Name);
            }

            if (this.Age > 12 && this.Age <= 20)
            {
                Console.WriteLine("{0}, the teenage girl says: Like, totally. Did you see that other chick? Like, what was she wearing'", this.Name);
            }

            if (this.Age > 20)
            {
                Console.WriteLine("{0}, the adult female says, 'Yep, I'm a woman.'", this.Name);
            }

        }

    } // end of HumanFemale class

} // end of namespace declaration 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T08:29:39.303

哺乳动物是所有狗、猫、人类雌性、人类雄性的总称。它们都有一些共同的特性和功能。

公共哺乳动物（字符串名称，int heightInInches，int age，字符串颜色，字符串 eyeColor）

这一行是 mamal 类的构造函数。属性名称、身高英寸、年龄、颜色、眼睛颜色在所有哺乳动物中都很常见。

所有哺乳动物都可以行走（具有相同的功能），但都以不同的方式行走。因此我们需要重写此功能，以便为不同的哺乳动物提供所需的功能。

public override void Walk() 这一行是如何覆盖步行功能的。

哺乳动物类是抽象的。这意味着没有动物叫哺乳动物。它只是一个广义的定义。

希望能帮助到你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T08:31:06.490

因此，**Mamal**是您的基类，它将包含每个**Animals**的所有公共属性。

然后，您为您的动物（猫、狗）等派生类，因此这些将继承与基础相同的属性。

基类使用虚拟方法，以便您可以在派生类中**覆盖它们的功能。**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T08:43:51.770

对于编辑中的具体问题：

```
mammals.Add(new Cat("Snow white", 1, 0, "White", "blue")); 
```

该行可以重写为：

```
Cat aCat = new Cat("Snow white", 1, 0, "White", "blue"); 
mammals.Add(aCat); 
```

在第一行中，您正在调用 Cat 的构造函数：

```
public Cat(string name, int heightInInches, int age, string color, string eyeColor)
            : base(name, heightInInches, age, color, eyeColor) 
```

传递“Snow white”作为名称，1 作为 heightInInches，0 作为年龄，“White”作为颜色，“blue”作为 eyeColor。构造函数是空的（它什么都不做，但是它是基于 Mammal 构造函数的（这是 的意思`base(name, heightInInches, age, color, eyeColor)`），这被称为传递相同的参数。这意味着`public Mammal(string name, int heightInInches, int age, string color, string eyeColor)`执行，所以你最终得到一个 Cat 的实例，其中所有属性具有作为参数传递的值。

现在你执行

```
 mammals.Add(aCat); 
```

在这里，您将 Cat 的实例添加到 Mammal 列表中。你可以这样做，因为 Add 期望一个 Mammal 作为参数，而 aCat 是一个 Mammal，因为它的类是从 Mammal 派生的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T08:51:55.267

基本上，您的兄弟试图向您展示的是，当您从父类派生类时，您可以以不同的并且通常更复杂的方式使用父类的所有字段和属性。这就是多态性的意思。

使用这些参数，您的兄弟做到了，因此派生自`Mammal`的每个类都采用相同的参数：姓名、身高、年龄、颜色和眼睛颜色。然后在`Mammal`类中，他使每个参数设置其各自的属性，即，如果您`"Bob"`作为名称参数传入`Name`，`Mammal`则为 Bob。当涉及到所有其他类时，他只是使用`base()`构造函数使哺乳动物以与`Mammal`.

然后你的兄弟进入了方法，这是实际在做什么。他制作了它们`virtual`，它允许多态性。基本上，这表示任何子类都可以“ `override`”或更改自己的方法。通过覆盖一个方法，子类说“当你在我身上使用这个方法时，用这种方法而不是我的父类是怎么做的。” 他通过覆盖每个子类中的方法，然后使用每个子类调用（或执行）方法来证明这一点。因为这些方法被覆盖，你会得到猫的“喵”或狗的“ruff”而不是“哺乳动物的辐条”。

Also note that since the child class derive from the `Mammal` class, they have the same properties, so every `Mammal` has an age, height, etc that it can use. Your brother used this in the methods to customize them.

It's a lot of info, but I hope it's understandable.

# java - RuneScape 私人服务器 - 缓存下载器

> ID：11029227
> 
> 赞同：1
> 
> 时间：2012-06-14T08:20:45.047
> 
> 标签：java, zip

我有一个`RuneScape`私人服务器，我有一个客户端。

我正在尝试制作一个 Web 客户端，但由于某种原因，它会从我的网站下载缓存并保留在 cache.zip 中。它不会提取它只是下载到我制作的位置。我很困惑，需要帮助来解决这个问题，因为我向我的成员保证它今晚会上线。

这是下载缓存时文件夹的样子。

![http://i50.tinypic.com/2iasgmw.png](../Images/56f765e0772f0bde9bda8cc95fcef1bb.png)

假设将那里的文件提取到文件夹中。

这是我的`CacheDownloader.java`

```
import java.io.File;
import java.io.IOException;
import java.io.OutputStream;
import java.io.FileWriter;
import java.io.BufferedWriter;
import java.io.BufferedOutputStream;
import java.io.BufferedInputStream;
import java.io.FileOutputStream;
import java.io.FileInputStream;
import java.io.InputStream;
import java.net.URLConnection;
import java.net.URL;
import java.util.zip.ZipEntry;
import java.util.zip.ZipInputStream;
import sign.Signlink;

public class CacheDownloader {

    private Client Client;

    private final int BUFFER = 1024;

    private final int VERSION = 1;
    private String cacheLink = "http://www.survivalpkz.com/client/cache.zip";
    private String fileToExtract = getCacheDir() + getArchivedName();

    public CacheDownloader(Client Client) {
        this.Client = Client;
    }

    private void drawLoadingText(String text) {
        Client.drawLoadingText(35, text);
    }

    private void drawLoadingText(int amount, String text) {
        Client.drawLoadingText(amount, text);
    }

    private String getCacheDir() {
        return Signlink.findCacheDir();
    }

    private String getCacheLink() {
        return cacheLink;
    }

    private int getCacheVersion() {
        return VERSION;
    }

    public CacheDownloader downloadCache() {
        try {
            File location = new File(getCacheDir());
            File version = new File(getCacheDir() + "/cacheVersion"
                    + getCacheVersion() + ".dat");

            if (!location.exists()) {
                downloadFile(getCacheLink(), getArchivedName());

                System.out.println("Unzipping the Cache.");
                unZip();
                System.out.println("Cache has Unzipped.");

                BufferedWriter versionFile = new BufferedWriter(new FileWriter(
                        getCacheDir() + "/cacheVersion" + getCacheVersion()
                        + ".dat"));
                versionFile.close();
            } else {
                if (!version.exists()) {
                    downloadFile(getCacheLink(), getArchivedName());

                    System.out.println("Unzipping the Cache.");
                    unZip();
                    System.out.println("Cache has Unzipped.");

                    BufferedWriter versionFile = new BufferedWriter(
                            new FileWriter(getCacheDir() + "/cacheVersion"
                                    + getCacheVersion() + ".dat"));
                    versionFile.close();

                } else {
                    return null;
                }
            }
        } catch (Exception e) {

        }
        return null;
    }

    private void downloadFile(String address, String localFileName) {
        OutputStream out = null;
        URLConnection conn;
        InputStream in = null;

        try {

            URL url = new URL(address);
            out = new BufferedOutputStream(new FileOutputStream(getCacheDir()
                    + "/" + localFileName));

            conn = url.openConnection();
            in = conn.getInputStream();

            byte[] data = new byte[BUFFER];

            int numRead;
            long numWritten = 0;
            int length = conn.getContentLength();

            while ((numRead = in.read(data)) != -1) {
                out.write(data, 0, numRead);
                numWritten += numRead;

                int percentage = (int) (((double) numWritten / (double) length) * 100D);
                drawLoadingText(percentage, "Downloading Cache " + percentage
                        + "%");

            }

            System.out.println(localFileName + "\t" + numWritten);
            drawLoadingText("Finished downloading " + getArchivedName() + "!");

        } catch (Exception exception) {
            exception.printStackTrace();
        } finally {
            try {
                if (in != null) {
                    in.close();
                }
                if (out != null) {
                    out.close();
                }
            } catch (IOException ioe) {
            }
        }

    }

    private String getArchivedName() {
        int lastSlashIndex = getCacheLink().lastIndexOf('/');
        if (lastSlashIndex >= 0 && lastSlashIndex < getCacheLink().length() - 1) {
            return getCacheLink().substring(lastSlashIndex + 1);
        } else {
            System.err.println("Error retreving Archive.");
        }
        return "";
    }

    private void unZip() {

        try {
            InputStream in = new BufferedInputStream(new FileInputStream(
                    fileToExtract));
            ZipInputStream zin = new ZipInputStream(in);
            ZipEntry e;

            while ((e = zin.getNextEntry()) != null) {

                if (e.isDirectory()) {
                    (new File(getCacheDir() + e.getName())).mkdir();
                } else {

                    if (e.getName().equals(fileToExtract)) {
                        unzip(zin, fileToExtract);
                        break;
                    }
                    unzip(zin, getCacheDir() + e.getName());
                }
                System.out.println("Unzipping: " + e.getName());
            }
            zin.close();

        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    private void unzip(ZipInputStream zin, String s) throws IOException {

        FileOutputStream out = new FileOutputStream(s);
        byte[] b = new byte[BUFFER];
        int len = 0;

        while ((len = zin.read(b)) != -1) {
            out.write(b, 0, len);
        }
        out.close();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-03T20:16:18.500

您正在运行哪个版本？...

例如，在 718 网络客户端中，您无需执行任何与缓存相关的操作！

我的网络客户端小程序：

```
<center>
<applet name="Pre-Evolution" width="900px" height="600px" archive="Pre-Evolution_Client.jar" code="Loader.class" mayscript="">
<param name="worldid" value="2"/>
<param name="members" value="1"/>
<param name="modewhat" value="2"/>
<param name="modewhere" value="2"/>
<param name="safemode" value="1"/>
<param name="lang" value="0"/>
<param name="affid" value="0"/>
<param name="settings" value="ROEqp2kbj*NX9PSCbdgpOvokkMwrCkXjg3c6KXgaLZY"/>
<param name="cookieprefix" value=""/>
<param name="cookiehost" value=".google.com"/>
<param name="plug" value="0"/>
<param name="js" value="1"/>
<param name="game" value="0"/>
<param name="colourid" value="0"/>
</applet>
</center> 
```

# c++ - 二叉搜索树（BST）返回左孩子被视为函数，不明白

> ID：11029233
> 
> 赞同：0
> 
> 时间：2012-06-14T08:21:02.300
> 
> 标签：c++, pointers, compiler-errors, return, binary-search-tree

我正在尝试将左孩子作为指针返回

我有

```
 template <typename Type>
 class BSTNode {  
 private:
    int key;                                                             
    Type data;
    BSTNode *left;
    BSTNode *right;
} 
```

和根

```
template <typename Type>
class BST {          
private:
   BSTNode<Type> *root; 
} 
```

我绝对需要这个，我找不到解决方法（不是在我剩下的时间里）

```
this->root = auxRoot.getLeftChild(); 
```

这是getLeft

```
template <typename Type>
BSTNode<Type> *BSTNode<Type>::getLeftChild() {
return this->left();
} 
```

编译错误：`left cannot be used as a function`。我做错了吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T08:21:43.063

`left`不是函数，而是数据成员，所以括号是非法的。它应该是：

```
this->left; 
```

# ruby-on-rails - rails 3关联与使用活动记录的连接表查询

> ID：11029241
> 
> 赞同：0
> 
> 时间：2012-06-14T08:21:16.107
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我有三个模型，分别是用户、域和关联。我的用户模型是从设计中填充的。My Domain 模型由“人们的兴趣，例如 - 跑步、骑自行车等”组成。我的关联表将 user_id 链接到 domain_id 并将其存储为记录。当我添加一个域时，它会自动使用域填充用户注册表单（用户可以在其中选择，例如我喜欢运行）。

我的查询是.. 我可以使用什么活动记录查询来拉动具有相似兴趣的用户，例如与当前登录的用户一起运行。因此，如果一个名为 Tom 的用户已登录并且选择了跑步和骑自行车（链接到）的域兴趣，我怎么能与具有相似域（兴趣）的其他用户一起拉回数据库对象

所以基本上如果 Tom、Paul 和 Steph 是用户，但 Tom 和 Paul 选择了相同的域，而 Steph 选择了不同的域，那么执行此操作的查询代码是什么？希望这是足够的信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T10:12:28.660

我认为你可以这样做：

```
User.joins(:domains).where("domains.id IN (?)", current_user.domains.pluck(:domain_id)) 
```

`current_user.domains.pluck(:domain_id)`收集 current_user 选择的所有域 id。Pluck 仅在 rails 3.2 中，如果您使用的是早期版本，则必须使用 collect 代替。

然后查询的第一部分选择也将该域作为他们的兴趣之一的用户。

您应该按照 Bongs 的建议查看 rails 指南 [http://guides.rubyonrails.org/association_basics.html](http://guides.rubyonrails.org/association_basics.html)

# javascript - 通用代码可用于 C 和 Javascript

> ID：11029244
> 
> 赞同：2
> 
> 时间：2012-06-14T08:21:27.917
> 
> 标签：javascript, c, json, client, common-code

对于该项目，我将从服务器接收数据（可能是 JSON/XML），并且有两个单独的客户端应用程序将处理数据以执行类似的操作。一个应用程序将是基于 Web 的，逻辑将用 JavaScipt 编写，一个是关于 C 应用程序的。如何处理数据的逻辑是一样的，有什么办法可以用某种方法编写通用代码，可以在它们之间重用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T08:24:47.603

存在可以从 C 代码调用的 Javascript 实现。使用这样的实现，您可以用 Javascript 编写大部分代码，并将其与 C 接口。

一种这样的实现是[QtScript](http://doc.trolltech.com/4.3/qtscript.html)。Qt 需要 C++，但您可以轻松地将 C 和 C++ 代码链接在一起。

# objective-c - 目标 c 属性设置器不起作用

> ID：11029250
> 
> 赞同：0
> 
> 时间：2012-06-14T08:21:43.503
> 
> 标签：objective-c, cocos2d-iphone

我现在在我的 iPhone Coco2d 游戏中发现了一个问题，这是我的第一个 Objective-c 游戏。我的二传手似乎没有工作！如果我在将其设置为 NULL（如果为 Stringed）或我得到一个致命的错误访问异常之后尝试访问属性，那么我一定做错了，这是我的代码：

```
@interface Character : CCNode 
    {
        CCSprite* sprite;
        int width;
        int height;
    }
    @property (retain) CCSprite* sprite;
    @property int width;
    @property int height;
@end 
```

和实施：

```
@implementation Character

@synthesize sprite;
@synthesize width;
@synthesize height;

-(id) init
{
    if((self=[super init])) {
        [self setSprite :[CCSprite spriteWithFile:@"character.png"]];
        [self setWidth:28];
        [self setHeight:28];
        NSLog(@"About to try get height...");
        NSLog([self height]); //bad access exception
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T08:23:11.783

这是格式不正确的日志语句

```
NSLog(@"Height :%d", [self height]); 
```

`NSLog`查找要打印的字符串，您已经给它一个不能更改为对象的 int

# css - 两列布局 - 容器的最大宽度

> ID：11029251
> 
> 赞同：0
> 
> 时间：2012-06-14T08:21:47.187
> 
> 标签：css

我有一个两列布局：http: [//jsfiddle.net/KqQ42/1/](http://jsfiddle.net/KqQ42/1/)

现在我希望左右列都共享最大宽度，以便 page_wrapper 和列之间现在有空间。

当我只在宽度上增加百分之一时，它们就不再并排了。

那么诀窍是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T08:33:23.950

像这样写：

```
.content_wrapper > div
{
    -moz-box-sizing:border-box;
    -webkit-box-sizing:border-box;
    box-sizing:border-box;
}
.nav{
 width:25%;
} 
```

检查这个[http://jsfiddle.net/KqQ42/7/](http://jsfiddle.net/KqQ42/7/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T08:28:04.747

您的问题是您在两列上声明的 1px 边框。浏览器的盒子模型将边框与您声明的宽度相加，如果您删除边框声明并将宽度设置为总计 100%，您将不会再遇到任何问题

或者，您可以使用 css 属性`box-sizing: border-box;` [http://paulirish.com/2012/box-sizing-border-box-ftw/](http://paulirish.com/2012/box-sizing-border-box-ftw/)

您还可以使用纯 css 方法清除浮动元素：

[http://css-tricks.com/snippets/css/clear-fix/](http://css-tricks.com/snippets/css/clear-fix/)

而不是在标记中使用额外的 div 来执行此操作

# ruby - .nil?、.blank? 之间的区别？和.empty？

> ID：11029256
> 
> 赞同：36
> 
> 时间：2012-06-14T08:22:29.230
> 
> 标签：ruby, ruby-on-rails-3, object

> **可能重复：**
> [Ruby on Rails 中 nil v.empty v.blank 的简明解释](https://stackoverflow.com/questions/885414/a-concise-explanation-of-nil-v-empty-v-blank-in-ruby-on-rails)

谁能告诉我`nil?`,`blank?`和`empty?`Ruby 中的区别？

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2012-06-14T08:28:18.713

在 Ruby 中，`nil`在一个对象（类的单个实例`NilClass`）中。这意味着可以在其上调用方法。`nil?`是 Ruby 中的一个标准方法，可以在*所有*对象上调用，并`true`为该`nil`对象和`false`其他任何东西返回。

`empty?`是*一些*对象（如数组、哈希和字符串）的标准 Ruby 方法。它的确切行为将取决于特定的对象，但`true`如果对象不包含任何元素，它通常会返回。

`blank?`不是标准的 Ruby 方法，而是由 Rails添加到*所有*`true`对象并返回、`nil`、`false`空或空白字符串。

因为`empty?`不是为所有对象定义的，`NoMethodError`如果你调用so 以避免必须编写诸如Rails 之类的东西添加方法`empty?`，你会得到一个。`nil``if x.nil? || x.empty?``blank?`

* * *

回答后，我发现了一个较早的问题，“[如何在 Rails（和 Ruby）中理解 nil vs. empty vs. blank](https://stackoverflow.com/questions/885414/a-concise-explanation-of-nil-v-empty-v-blank-in-ruby-on-rails) ”，所以你也应该检查这个答案。

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2012-06-14T08:30:23.157

感受一下；）

零？

```
nil.nil?
#=> true
[].nil?
#=> false
"".nil?
#=> false
" ".nil?
#=> false 
```

空的？

```
[].empty?
#=> true
nil.empty?
#=> undefined method
"".empty?
#=> true
" ".empty?
#=> false 
```

空白的？

```
[].blank?
#=> true
nil.blank?
#=> true
"".blank?
#=> true
" ".blank?
#=> true 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-06-14T08:30:46.523

任何 Ruby 变量都是一个对象，因此它可以被未初始化/取消设置（设置为 nil）。`nil?`如果方法未初始化，则返回 true：

```
b = nil
b.nil? # true
b = 'string value'
b.nil? # false 
```

Ruby 中的数组、字符串、流不能包含数据，因此它们可以为空。如果是，则该`empty?`方法返回 true：

```
array = []
array.empty? # true
array << 5 << 4 # [5, 4]
array.empty? # false

string = "" # empty line
string.empty? # true 
```

`blank?`是 Active Support 特定的方法（在任何对象中可用），并且在具有 Active Support 的 Ruby On Rails 中可用。如果对象为 nil 或为空，则返回 true。

# java - JPA 与 JTA：持久化实体并合并级联子实体

> ID：11029260
> 
> 赞同：21
> 
> 时间：2012-06-14T08:22:53.813
> 
> 标签：java, jpa, jpa-2.0, entity-relationship, jta

我与以下实体类具有双向一对多关系：

**0 或 1 个客户 <-> 0 或更多产品订单**

在持久化客户端实体时，我也希望保留关联的产品订单实体（因为它们对“父”客户端的外键可能已更新）。

当然，所有必需的 CASCADE 选项都是在客户端设置的。但是**，如果新创建的客户端在引用现有产品订单时第一次被持久化，则它不起作用，**如在这种情况下：

1.  创建并保留产品订单“1”。工作正常。
2.  创建客户“2”并将产品订单“1”添加到其产品订单列表中。然后它被持久化。不工作。

我尝试了几种方法，但都没有显示出预期的结果。请参阅下面的结果。我在这里阅读了所有相关问题，但它们对我没有帮助。我在 GlassFish 3.1.2 上的 Apache Derby (JavaDB) 内存数据库中使用 EclipseLink 2.3.0、纯 JPA 2.0 注释和 JTA 作为事务类型。实体关系由 JSF GUI 管理。对象级关系管理工作（除了持久化），我用 JUnit 测试对其进行了测试。

**方法 1）“默认”（基于 NetBeans 类模板）**

客户：

```
@Entity
public class Client implements Serializable, ParentEntity {
    private static final long serialVersionUID = 1L;
    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    private Long id;

    @OneToMany(mappedBy = "client", cascade={CascadeType.PERSIST, CascadeType.MERGE, CascadeType.REFRESH},
            fetch= FetchType.LAZY)
    private List<ProductOrder> orders = new ArrayList<>();

    // other fields, getters and setters
} 
```

产品订购：

```
@Entity
public class ProductOrder implements Serializable, ChildEntity {
    private static final long serialVersionUID = 1L;

    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    private Long id;

    @ManyToOne // owning side
    private Client client;

    // other fields, getters and setters
} 
```

通用持久性外观：

```
// Called when pressing "save" on the "create new..." JSF page
public void create(T entity) {
    getEntityManager().persist(entity);
}

// Called when pressing "save" on the "edit..." JSF page
public void edit(T entity) {
    getEntityManager().merge(entity);
} 
```

结果：

create() 立即抛出此异常：

> 警告：在调用 EJB ClientFacade 方法时发生系统异常 public void javaee6test.beans.AbstractFacade.create(java.lang.Object) javax.ejb.EJBException: Transaction aborted ...
> 
> 引起：javax.transaction.RollbackException：事务标记为回滚。...
> 
> 原因：异常 [EclipseLink-4002] (Eclipse Persistence Services - 2.3.0.v20110604-r9504)：org.eclipse.persistence.exceptions.DatabaseException 内部异常：java.sql.SQLIntegrityConstraintViolationException：语句被中止，因为它会在“PRODUCTORDER”上定义的“SQL120513133540930”标识的唯一或主键约束或唯一索引中导致重复键值。错误代码：-1 调用：INSERT INTO PRODUCTORDER (ID, CLIENT_ID) VALUES (?, ?) bind => [2 个参数绑定] 查询：InsertObjectQuery(javaee6test.model.ProductOrder[id=1]) ...
> 
> 原因：java.sql.SQLIntegrityConstraintViolationException：该语句被中止，因为它会导致在“PRO-DUCTORDER”上定义的“SQL120513133540930”标识的唯一或主键约束或唯一索引中出现重复键值。...
> 
> 引起：org.apache.derby.client.am.SqlException：该语句被中止，因为它会导致唯一或主键约束或唯一索引中的重复键值由“定义”上的“SQL120513133540930”标识生产者-DER'。

我不明白这个例外。编辑（）工作正常。但是我想在创建时向客户添加产品订单，所以这还不够。

**方法2）仅合并（）**

通用持久性外观的更改：

```
// Called when pressing "save" on the "create new..." JSF page
public void create(T entity) {
    getEntityManager().merge(entity);
}

// Called when pressing "save" on the "edit..." JSF page
public void edit(T entity) {
    getEntityManager().merge(entity);
} 
```

结果：

在 create() 上，EclipseLink 日志输出显示：

> 很好：INSERT INTO CLIENT (ID, NAME, ADDRESS_ID) VALUES (?, ?, ?) bind => [3 个参数绑定]

但产品订单表上没有“更新”。因此，关系不成立。另一方面，edit() 再次运行良好。

**方法 3) 两种实体类型的 Id GenerationType.IDENTITY**

客户和产品订单类别的更改：

```
...
@Id
@GeneratedValue(strategy = GenerationType.IDENTITY)
private Long id;
... 
```

结果：

在 create() 上，EclipseLink 日志输出显示：

> 很好：INSERT INTO CLIENT (NAME, ADDRESS_ID) VALUES (?, ?) bind => [2 个参数绑定]
> 
> 很好：值 IDENTITY_VAL_LOCAL()
> 
> 很好：INSERT INTO PRODUCTORDER (ORDERDATE, CLIENT_ID) VALUES (?, ?) bind => [2 个参数绑定]
> 
> 很好：值 IDENTITY_VAL_LOCAL()

因此，不是建立与添加到客户列表中的产品订单的关系，而是创建并保留一个新的产品订单实体（！），并建立与该实体的关系。同样在这里， edit() 工作正常。

方法 4) 方法 (2) 和 (3) 结合

结果：与方法（2）相同。

我的问题是：**有没有办法实现上述场景？如何归档？**我想继续使用 JPA（没有特定于供应商的解决方案）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-08T17:44:24.487

**嗨，我今天遇到了同样的问题，我通过这封电子邮件向 openJPA 邮件列表询问：**

你好。我在同一实体中插入和更新引用时遇到问题。

我试图插入一个引用另一个对象（Person）的新对象（Exam），同时我想更新 Person 对象的属性（birthDate）。尽管我将 CascadeType 设置为 ALL，但从未发生过更新。唯一可行的方法是进行持久化，然后进行合并操作。这是正常的吗？我必须改变一些东西吗？

我不喜欢在 Person 对象中使用合并的“手动更新”的想法，因为我不知道用户想要更新多少对象（考试的子对象）。

实体：

```
public class Exam{  
   @ManyToOne(cascade= CascadeType.ALL)
   @JoinColumn(name = "person_id")
   public Person person;
......
}

public class Person{
    private Date birthDate;
   @OneToMany(mappedBy = "person")
    private List<Exam> exams
.......
}

public class SomeClass{
   public void someMethod(){
      exam = new Exam()
      person.setBirthDate(new Date());
      exam.setPerson(person); 
      someEJB.saveExam(exam);
   }
}

public class someEJB(){

   public void saveExam(Exam exam){
        ejbContext.getUserTransaction().begin();
        em.persist(exam);
        //THIS WORKS
        em.merge(exam.getPerson());
        ejbContext.getUserTransaction().commit();       
   }

} 
```

我必须对每个子对象使用 MERGE 方法吗？

**答案是这样的：**

看起来您的问题是考试是新的，但人是存在的，并且在级联持久操作时现有实体被忽略。我相信这是按预期工作的。

只要您的关系设置为 CascadeType.ALL，您就可以随时更改您的 em.persist(exam); 到 em.merge(exam);. 这将负责保持新的考试，并且还将合并调用级联到该人。

谢谢，瑞克

* * *

我希望这可以帮助你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T14:37:08.103

确保您设置了关系的双方，您不能只是将订单添加到客户端，您还需要设置订单的客户端。您还需要合并您已更改的两个对象。如果您只是合并客户端，那么订单的客户端将不会被合并（尽管您的级联导致它被合并）。

persist 不起作用，因为 persist 要求被持久化的对象对于持久性上下文是正确的，即不引用分离的对象，它必须引用托管对象。

您的问题来自您分离对象。如果您没有分离对象，您将不会遇到同样的问题。通常在 JPA 中，您将创建一个 EntityManager，查找/查询您的对象，编辑/保存它们，调用 commit。不需要合并。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-04-13T13:39:08.543

@SputNick，我通过下面描述的步骤解决了它。我将使用你的代码片段来演示我做了什么，

您有**Client 实体 -@OneToMany**和**ProductOrder 实体 -@ManyToOne**。我将使用

```
// Called when pressing "save" on the "edit..." 
public void edit(T entity) {
 getEntityManager().merge(entity);} 
```

持久性，因为它可以让我灵活地保存和更新。

要创建**客户和相应的产品订单，请**使用

```
client.set..(some property to be saved);

productOrder.set..(some property to be saved); 
```

//为客户端设置productOrder

```
List<ProductOrder> order = new ArrayList<>(); 
```

`client.setOrders(order);`//请注意，这需要传递一个列表

//为productOrder设置客户端

```
productOrder.setClient(productOrder);

.edit(client) or .edit(productOrder) 
```

请注意，任何一种方式都可以使用您的更改更新两个实体表。

虽然迟了，但希望它会帮助别人

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T10:34:03.767

在您的 ProductOrder 实体中使用 @Joincolumn 注释，请参见下文。

```
 @Entity
   public class ProductOrder implements Serializable, ChildEntity {
   private static final long serialVersionUID = 1L;

   @Id
   @GeneratedValue(strategy = GenerationType.AUTO)
   private Long id;

   @ManyToOne // owning side
   @JoinColumn(name = "PRODUCTORDER_ID", referencedColumnName = "ID")
   //write your database column names into name and referencedColumnName attributes.
   private Client client;

   // other fields, getters and setters
   } 
```

# java - 有什么方法可以清除 Java 中的 DataInputStream 的数据？（一个安卓应用程序）

> ID：11029262
> 
> 赞同：3
> 
> 时间：2012-06-14T08:23:09.990
> 
> 标签：java, android

更新：

自从分享这篇文章以来，与这个问题相关的项目已经发生了很大变化，实际上我强烈建议避免使用 TCP 套接字传输图像，因为它会使传输速度变慢。我修复了通过 UDP 传输图像并将它们从 YUV 压缩为 JPG 而不是使用 RGB 的问题。这使得传输和重建图像的工作更容易，因为您不必处理图像的每一层。

要知道图像的大小，我只需在 UDP 数据包的第一个字节添加此信息，因此如果未正确接收大小，则套接字超时将丢弃该数据包，并且在接收下一个 UDP 时通信仍然有效包。

由于这不是原始问题的答案，因此我将其保留为未回答，以便其他有相同问题的人可以找到解决方案并将其发布在此处。

------------------------ 原帖：------------ ----

首先感谢您的帮助并为我的英语道歉，我来自西班牙。

我正在使用套接字通过 TCP 从计算机接收图像。对于每张图像，我得到层数 (RGB)、每一层的行和列，然后是每个像素的值。为了收集数据，我使用`DataInputStream`.

通常它工作正常，但有时我得到错误的行数和列数值，导致下一个函数出现问题，即应用程序冻结等待永远不会发送的数据，或者只是导致保存数据的数组出现索引错误.

因此，如果行数和列数过多，我想清除数据，但是我找不到任何方法来清除`DataInputStream`充满错误字节的像素值。

另外，我不知道 的大小`DataInputStream`，因为大小是按以下方式计算的：`Layers * Width * height`. 所以如果我没有得到这个阵营的真实值，我就无法知道我必须跳过的字节数。

问题：

1.  任何人都知道一些方法来清除 a`DataInputStream`吗？

2.  如果不是，我应该使用另一种输入方式 `BufferedInputStream`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T08:26:32.880

我怀疑您的问题实际上并不是关于清除输入流，而是更多关于在不同步后找到一个背部。一种常见的方法是使用[**边界模式**](http://www.w3.org/Protocols/rfc1341/7_2_Multipart.html)（在多部分 html 文档和 mjpeg 流中使用）。因此，如果您迷失在流中，您将继续搜索此模式，直到找到它为止。

如果你真的想跳过字节，你可以使用[`DataInputStream.skipBytes(int n)`](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/DataInputStream.html#skipBytes%28int%29)方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T08:27:30.173

根据定义，流只能按顺序访问。跳过一些数据是可能的，但您必须知道要跳过多少字节。本质上，如果您的协议变得不同步并且不允许通过特殊的字节序列或类似方式进行同步，您唯一能做的就是关闭网络连接并重新建立它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T09:01:10.753

A`DataInputStream`旨在用于在 TCP 连接的两端都使用 Java*时发送和接收原始 Java 类型。*如果您只是从中读取字节，则可以使用普通的`InputStream`.

如果连接的两端确实在您的控制之下，更好的方法是将数据捆绑到一个对象中并使用`ObjectInputStream`. 或 HTTP，如果图像是标准格式。

# c - 枚举的初始化可以自动化吗？

> ID：11029272
> 
> 赞同：1
> 
> 时间：2012-06-14T08:23:33.923
> 
> 标签：c, enums

我有一个字符串文件，我想通过它创建一个枚举，其值由字符串命名。例如列表是：

```
"a" "b" "c" "d" ... 
```

我想得到这样的枚举

```
enum SomeEnum { a, b, c, d }; 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T08:26:15.887

我建议您使用任何流行的脚本语言（perl、python、tcl）并解析文件并生成您喜欢的枚举。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T09:02:05.963

您可以使用 X-Macros，然后只需将您的枚举/字符串放在`myfile.h`.

## 我的文件.h

```
#ifndef ENUM_CONVERT
#define ENUM_CONVERT(val)  val
#define ENUM_HEADER enum SomeEnum
#endif

ENUM_HEADER
{
ENUM_CONVERT(a),
ENUM_CONVERT(b),
ENUM_CONVERT(c),
ENUM_CONVERT(d)
}; 
```

## 我的文件.c

```
#include "myFile.h"  // This declares the enum
#define MKSTR(a)           #a
#define ENUM_CONVERT(val)  MKSTR(val)
#define ENUM_HEADER        char *myStrList[]=
#include "myFile.h"  // This defines the stringList 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T08:27:51.493

在c中很难将字符串转换为变量

# android - ListView 就像一个垂直画廊

> ID：11029275
> 
> 赞同：1
> 
> 时间：2012-06-14T08:24:01.147
> 
> 标签：android, android-listview, gallery

据我所知，没有简单的方法可以使 Android Gallery 垂直。但是画廊有我需要的一件事 - 将项目定位在视图中心。如何在 ListView 中执行此操作？

改编后的 listView 必须像老虎机一样工作 - 所选项目始终位于视图中心。这是一种“离散滚动”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T08:40:10.863

您可以使用 Android Gravity 在其父视图中定位视图。例如：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >
    <LinearLayout
        android:orientation="horizontal"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:gravity="center" >
    <TextView  
        android:layout_width="wrap_content" 
        android:layout_height="wrap_content"
        android:text="@string/hello" />
    <ImageView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/icon" />
    </LinearLayout>
</LinearLayout> 
```

# grails - 应用程序启动后如何启动 RabbitMQ 监听器？

> ID：11029279
> 
> 赞同：3
> 
> 时间：2012-06-14T08:24:16.077
> 
> 标签：grails, rabbitmq, amqp

您好，我在我的 Grails 应用程序中使用 RabbitMQ，并且正在寻找如何延迟侦听器启动的方法。它们现在在我的应用程序的整个布线完成之前启动，所以我想在启动后启动它们..关于如何做到这一点的任何建议？

我为此使用xml配置..

```
<rabbit:listener-container connection-factory="connectionFactory" message converter="jsonMessageConverter" acknowledge="auto">
    <rabbit:listener queue-names="log.soap.in" ref="logSoapInListener" />
</rabbit:listener-container> 
```

因此，当我的 grails 应用程序启动时，上下文已启动，但所有连接都需要一段时间。因此，在我的应用程序启动期间，已经调用了侦听器，但无法正确处理消息。

```
class LogSoapListenerService implements MessageListener {

    LogSoapService logSoapService

    JsonMapper jsonMapper

    @Override
    void onMessage(Message message) {
        String body = new String(message.body, message.properties.contentEncoding ?: "UTF-8")
        logSoapService.process(body)
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-12T18:31:00.517

我遇到了一个类似的问题，这就是我最终添加到 RabbitmqGrailsPlugin 文件中的内容，我有一个本地版本作为我项目的一部分，

在`doWithApplicationContext`方法内部，我改变了，

```
// Now that the listener is properly configured, we can start it.
bean.start() 
```

至

```
// Now that the listener is properly configured, we can start it.
def startDelay = application.config.rabbitmq.startDelay ?: 0
new Timer().runAfter(startDelay, {
    bean.start()
}) 
```

然后你只需要配置，`rabbitmq.startDelay`设置你想要的任何延迟。

更优雅的解决方案是确保在其他插件之后加载 rabbitmq，但 Grails 似乎对此没有很好的支持。请参阅[我可以从 Grails 中的插件外部控制插件加载顺序吗？](https://stackoverflow.com/questions/21146156/can-i-control-plugin-load-order-from-outside-a-plugin-in-grails)

另一种解决方案（仅当您在本地安装了插件时才可用）是指定在导致问题的任何插件之后加载插件，

例如，

```
def loadAfter = ['services'] 
```

变成

```
def loadAfter = ['services', 'converters', 'mail'] 
```

# doctrine-odm - 当代理找不到引用的文档时如何抑制 MongoDDException

> ID：11029286
> 
> 赞同：5
> 
> 时间：2012-06-14T08:24:53.020
> 
> 标签：doctrine-odm

我们正在使用 Symfony2/DoctrineOdm/MongoDB，当我们这样做时：

`if ($doc.referenceOne != null) { ... }`

并且`$doc.referenceOne`包含指向已删除/丢失文档的**MongoDbRef**，Doctrine Proxy 对象引发 MongoDBException。

可以告诉代理返回 null 而不是引发异常吗？

* * *

**详细说明：**

我们的文件：

```
class User {
    /* @MongoDB\ReferenceOne( ... ) */
    private $photo;
} 
```

如果 $photo 包含**MongoDbRef**，但文档丢失/删除，

当我们做`if ($user.photo) { ... }`学说时会引发 MongoDBException：

```
The "Proxies\DocumentPhotoProxy" document with identifier "4fd8b3ef732bafab7b000000" could not be found 
```

我们希望抑制异常，因为我们的应用程序可以处理该变量中的空值。

（我们可以简单地记录该错误，而异常传播到 500 页并中断我们的服务）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-28T16:19:51.393

**编辑 2：** Doctrine 扩展参考完整性也可以提供帮助。它会自动取消无效的引用。您可以在他们的 GitHub 存储库中找到更多信息：[https](https://github.com/l3pp4rd/DoctrineExtensions/blob/master/doc/reference_integrity.md) ://github.com/l3pp4rd/DoctrineExtensions/blob/master/doc/reference_integrity.md和 Symfony2 集成：[https ://github.com/stof/StofDoctrineExtensionsBundle](https://github.com/stof/StofDoctrineExtensionsBundle)

**编辑：**我不明白你指的是树枝模板还是 php。您将在下面找到 twig 的解决方案，但如果您的问题是关于 php `try...catch`，为您的 getter 添加块可能会帮助您解决问题。

我不知道你是否已经找到了解决方案，但如果其他人需要这个，我使用了一个（肮脏的）解决方法：

通过在主配置文件 ( )`Twig_Template`中定义自定义类来覆盖类`config.yml`

例子：

```
# app/config/config.yml
base_template_class: Acme\DemoBundle\Template 
```

并用块覆盖该`getAttribute`方法`try...catch`：

```
<?php

namespace Acme\DemoBundle;

use Doctrine\ODM\MongoDB\DocumentNotFoundException;

abstract class Template extends \Twig_Template
{
    protected function getAttribute($object, $item, array $arguments = array(), $type = \Twig_TemplateInterface::ANY_CALL, $isDefinedTest = false, $ignoreStrictCheck = false)
    {
        try {
            $ret = parent::getAttribute($object, $item, $arguments, $type, $isDefinedTest, $ignoreStrictCheck);
        } catch (DocumentNotFoundException $e) {
            $ret = null;
        }
        return $ret;
    }
} 
```

这将忽略所有 DocumentNotFoundExceptions。

**不过要小心**，无效的引用仍然存在于您的数据库中。这只会忽略在你的树枝模板中抛出的异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-01T15:25:02.137

只添加“排序”

代替

```
/**
 * @ODM\ReferenceMany(targetDocument="Extra", simple=true)
 */
private $extras; 
```

采用

```
/**
 * @ODM\ReferenceMany(targetDocument="Extra", simple=true, sort={"name"="asc"})
 */
private $extras; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-31T13:35:44.030

您应该在文档中添加此注释“mappedBy”

```
/**
 * @ODM\ReferenceMany(targetDocument="Extra", mappedBy="....")
 */
private $extras; 
```

# extjs - Ext JS 扩展 Ext.Toolbar.TextItem 时的奇怪行为

> ID：11029287
> 
> 赞同：0
> 
> 时间：2012-06-14T08:24:56.747
> 
> 标签：extjs, extjs4.1

我正在尝试扩展 Ext.Toolbar.TextItem 以创建一个简单的时钟。这样做的目的是能够在我的应用程序的状态栏中添加时钟。我的扩展类如下所示：

```
Ext.define('Urlopy.Components.TimeDisplay', {
    extend : 'Ext.Toolbar.TextItem',
    initComponent : function() {
        var me = this;

        var dt = new Date();

        Ext.defer(this.onUpdate, 240, this);

        Ext.apply(me, {
            text : Ext.Date.format(dt, "Y-m-d H:i:s")
        });
        delete dt;
        this.callParent(arguments);
    },

    onUpdate : function(obj) {
        var dt = new Date();
        this.setText(Ext.Date.format(dt, "Y-m-d H:i:s"));
        delete dt;
        Ext.defer(this.onUpdate, 240, this);
    }
}); 
```

我不确定我这样做是否正确，在我尝试折叠面板之前它工作正常。我的布局基于 Ext.container.Viewport。

这是我得到的错误：http: [//vimeo.com/43978383](http://vimeo.com/43978383)

我不知道怎么了:(

欢迎任何帮助！

**更新**

这是我更新的组件：

```
Ext.define('Urlopy.Components.TimeDisplay', {
    extend : 'Ext.Toolbar.TextItem',
    initComponent : function() {
        this.callParent(arguments);
        //this.setText(Ext.Date.format(new Date(), "Y-m-d H:i:s"));
        Ext.defer(this.onUpdate, 240, this);
    },
    onUpdate : function(obj) {
        //this.setText(Ext.Date.format(new Date(), "Y-m-d H:i:s"));
        Ext.defer(this.onUpdate, 240, this);
    }
}); 
```

这现在有效，但是当我取消注释负责更新文本的 2 行时，所有崩溃：/

我收到这个错误

> el 未定义
> var id = el.id,

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T10:50:38.983

你能试试这个并告诉我们它是否仍然崩溃？

```
 Ext.define('Urlopy.Components.TimeDisplay', {
        extend : 'Ext.Toolbar.TextItem',
        initComponent : function() {
            this.callParent(arguments);
            Ext.defer(this.onUpdate, 240, this);
        },
        onUpdate : function(obj) {
            console.log('tock');
            Ext.defer(this.onUpdate, 240, this);
        }
    }); 
```

# mysql - PersistenceException：错误执行 DML bindLog[] 错误[字段 'id' 没有默认值]

> ID：11029290
> 
> 赞同：2
> 
> 时间：2012-06-14T08:25:13.810
> 
> 标签：mysql, playframework

我正在尝试使用 MySQL 和 ebeans 来保存我的任务。当我应用脚本时，我收到此错误：

```
[PersistenceException: ERROR executing DML bindLog[] error[Field 'id' doesn't have a default value]] 
```

在使用 MySQL 作为 DB 之前，它在内存中的 H2 DB 以及文件系统中运行良好......

如何解决此错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T21:52:09.993

刚刚得到同样的错误。将 AUTO_INCREMENT 添加到您的 id 字段和进化脚本中的约束。像这样

```
 create table name (
  id                        bigint not null AUTO_INCREMENT,
  ...
  constraint pk_name primary key (id),

); 
```

现在它可以工作了

编辑：如果您在模型中使用@Id 演化注释字段“id”，则应自动添加 AUTO_INCREMENT 和约束

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-08T19:59:22.487

我刚刚遇到这个错误，在我的情况下，数据库已经存在，作为我早期设置我的应用程序的一部分，但一半的表为 id 字段设置了 AI，但另一半没有。

我不确定为什么会这样，这与我最初创建表格的方式有关。

无论如何，我需要做的就是使用 MySQL Workbench 来更改没有 AI id 的表并添加 AI 属性。（作为此过程的一部分，我还必须删除并重新创建一些外键）。

# c++ - OSX Lion 上的 curses.h 问题

> ID：11029293
> 
> 赞同：4
> 
> 时间：2012-06-14T08:25:25.360
> 
> 标签：c++, osx-lion, curses

我`curses.h`第一次尝试使用库，但无论我调用哪个函数，我仍然会收到一条错误消息

> -未找到体系结构 x86_64 的符号-

我错过了某种初始化吗？这是我的代码

```
#include <iostream>
#include <unistd.h>
#include<time.h>
#include <sys/ioctl.h>
#include <iomanip>
#include <ncurses.h>

using namespace std;

int main(int argc, const char * argv[]){
    string a,b = ("...");
    WINDOW *mywindow;
    mywindow = initscr();
    refresh();
    cout<<"Inserisci la frase da passare in coolprint ->";
    cin>>a;
    coolprint(a);
    cout<<endl;
    hackprint(a);
    coolprint(b);
    cout<<endl;
    slideprint(a);
    fflush(stdin);
    getchar();
    return 0;
} 
```

我没有发布所有功能，但如果我从中取出调用`curses.h`并使用它`system("clear")`，一切正常。这可能是一些非常愚蠢的问题，但我是 C++ 的新手。希望有人可以帮助谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-14T08:30:23.077

看来您没有将 ncurses 库链接`/usr/lib/libncurses.dylib`到您的程序中...

目前尚不清楚您如何尝试编译程序（makefile、命令行、Xcode），所以我无法提供进一步的建议，但应该很容易完成......

在 Xcode 中：

1.  在项目导航器中，选择您的项目
2.  选择你的目标
3.  选择“构建阶段”选项卡
4.  打开“使用库链接二进制文件”扩展器
5.  点击“+”按钮
6.  选择您的框架（在您的情况下，在您的 SDK 下查找 libncurses）
7.  （可选）将添加的框架拖放到“框架”组

注意：OSX 很好地支持 unicode，但是许多开源 ./configure 脚本选择阻止 ncurses 显示 unicode 字符的设置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-08-16T06:31:08.690

在终端中使用 gcc：

-> gcc 文件名.c -lncurses

-> ./a.out

# android - Android：如何以编程方式访问 AVD 管理器中显示的设备序列号（API 版本 8）

> ID：11029294
> 
> 赞同：59
> 
> 时间：2012-06-14T08:25:29.523
> 
> 标签：android, serial-number

如何以编程方式访问下图中显示的值？

![在此处输入图像描述](../Images/b4b5e16306e2273feed36de4869dec31.png)

* * *

## 回答 #1

> 赞同：107
> 
> 时间：2012-06-14T08:30:57.163

这是硬件序列号。访问它

*   **需要Android Q** (>= SDK 29) `android.Manifest.permission.READ_PRIVILEGED_PHONE_STATE`。只有系统应用程序可以要求此权限。如果调用包是设备或配置文件所有者，则`READ_PHONE_STATE`权限就足够了。

*   **Android 8 及更高版本**(>= SDK 26) 使用`android.os.Build.getSerial()`需要危险权限[READ_PHONE_STATE](https://developer.android.com/reference/android/Manifest.permission.html#READ_PHONE_STATE)。使用`android.os.Build.SERIAL`返回[android.os.Build.UNKNOWN](https://developer.android.com/reference/android/os/Build.html#UNKNOWN)。

*   **Android 7.1 及更早版本**(<= SDK 25) 及更早版本[`android.os.Build.SERIAL`](http://developer.android.com/reference/android/os/Build.html)会返回有效的序列号。

它对于任何设备都是独一无二的。如果您正在寻找有关如何获取/使用唯一设备 ID 的可能性，您应该阅读[此处](https://stackoverflow.com/questions/2785485/is-there-a-unique-android-device-id)。

有关无需许可而涉及反射的解决方案，请参阅[此答案](https://stackoverflow.com/a/52606366/821894)。

* * *

## 回答 #2

> 赞同：63
> 
> 时间：2017-10-30T18:47:15.200

### 高达 Android 7.1 (SDK 25)

在 Android 7.1 之前，您将获得它：

```
Build.SERIAL 
```

### 从 Android 8 (SDK 26)

在 Android 8 (SDK 26) 及更高版本上，此字段将返回[`UNKNOWN`](https://developer.android.com/reference/android/os/Build.html#UNKNOWN)并且必须通过以下方式访问：

```
Build.getSerial() 
```

这需要[危险的许可](https://developer.android.com/guide/topics/permissions/requesting.html#normal-dangerous) [`android.permission.READ_PHONE_STATE`](https://developer.android.com/reference/android/Manifest.permission.html#READ_PHONE_STATE)。

### 来自 Android Q (SDK 29)

由于 Android Q 的使用`Build.getSerial()`变得有点复杂，需要：

`android.Manifest.permission.READ_PRIVILEGED_PHONE_STATE`（只能由系统应用获取），**或者**调用包为*设备或配置文件所有者*并具有[`READ_PHONE_STATE`](https://developer.android.com/reference/android/Manifest.permission.html#READ_PHONE_STATE)权限。这意味着大多数应用程序将无法使用此功能。请参阅 Google 的[Android Q 公告](https://developer.android.com/preview/privacy/data-identifiers#device-ids)。

请参阅[Android SDK 参考](https://developer.android.com/reference/android/os/Build.html#getSerial())

* * *

## 唯一设备标识符的最佳实践

如果您只需要一个唯一标识符，最好避免使用硬件标识符，因为 Google 出于隐私原因不断尝试使其更难访问它们。`UUID.randomUUID().toString();`您可以在第一次需要在共享首选项中访问它时生成并保存它。或者，您可以使用[`ANDROID_ID`](https://stackoverflow.com/questions/2785485/is-there-a-unique-android-device-id)设备、用户和（仅限 Android 8+）应用程序安装唯一的 8 字节长十六进制字符串。有关该主题的更多信息，请参阅[唯一标识符的最佳实践](https://developer.android.com/training/articles/user-data-ids)。

* * *

## 回答 #3

> 赞同：35
> 
> 时间：2018-10-02T10:17:25.577

`Build.SERIAL` [可以为空](https://stackoverflow.com/a/16929647/1276306)或有时返回与您在设备设置中看到的值不同的值（[证明 1](https://stackoverflow.com/questions/33079734/android-get-serial-number)、[证明 2 ）。](https://stackoverflow.com/questions/11794749/how-to-decode-android-os-build-serial)

如果您想要一个更完整和更强大的解决方案，我已经编译了我可以在一个[gist](https://gist.github.com/flawyte/efd23dd520fc2320f94ba003b9aabfce)中找到的所有可能的解决方案。这是它的简化版本：

```
public static String getSerialNumber() {
    String serialNumber;

    try {
        Class<?> c = Class.forName("android.os.SystemProperties");
        Method get = c.getMethod("get", String.class);

        serialNumber = (String) get.invoke(c, "gsm.sn1");
        if (serialNumber.equals(""))
            serialNumber = (String) get.invoke(c, "ril.serialnumber");
        if (serialNumber.equals(""))
            serialNumber = (String) get.invoke(c, "ro.serialno");
        if (serialNumber.equals(""))
            serialNumber = (String) get.invoke(c, "sys.serialnumber");
        if (serialNumber.equals(""))
            serialNumber = Build.SERIAL;

        // If none of the methods above worked
        if (serialNumber.equals(""))
            serialNumber = null;
    } catch (Exception e) {
        e.printStackTrace();
        serialNumber = null;
    }

    return serialNumber;
} 
```

每当我可以在新设备或 Android 版本上进行测试时，我都会尝试定期更新要点。也欢迎投稿。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-06-22T20:57:21.837

从 Android P 开始，仅在 AndroidManifest 中定义 READ_PHONE_STATE 权限将不起作用。我们必须实际请求许可。下面的代码对我有用：

```
@RequiresApi(api = Build.VERSION_CODES.P)
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    if (ActivityCompat.checkSelfPermission(this, Manifest.permission.READ_PHONE_STATE) != PackageManager.PERMISSION_GRANTED) {
        ActivityCompat.requestPermissions(this, new String[]{Manifest.permission.READ_PHONE_STATE}, 101);
    }
}

@RequiresApi(api = Build.VERSION_CODES.O)
@Override
protected void onResume() {
    super.onResume();
    if (ActivityCompat.checkSelfPermission(this, Manifest.permission.READ_PHONE_STATE) != PackageManager.PERMISSION_GRANTED) {
        return;
    }
    Log.d(TAG,Build.getSerial());
}
@RequiresApi(api = Build.VERSION_CODES.O)
@Override
public void onRequestPermissionsResult(int requestCode, String[] permissions, int[] grantResults) {
    switch (requestCode) {
        case 101:
            if (grantResults[0] == PackageManager.PERMISSION_GRANTED) {
            if (ActivityCompat.checkSelfPermission(this, Manifest.permission.READ_PHONE_STATE) != PackageManager.PERMISSION_GRANTED) {
                return;
            }
        } else {
            //not granted
        }
        break;
        default:
            super.onRequestPermissionsResult(requestCode, permissions, grantResults);
    }
} 
```

在 AndroidManifest.xml 中添加此权限

```
<uses-permission android:name = "android.permission.INTERNET"/>
<uses-permission android:name = "android.permission.READ_PHONE_STATE" /> 
```

希望这可以帮助。

谢谢你，MJ

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-03-30T02:06:57.220

我喜欢我的解决方案：

```
/**
 * Checks some permission
 *
 * @return true - If have any of the permissions sent by parameter
 * @return true - If you do not have any of the permissions sent by parameter
 */
fun Context.hasPermissionSome(vararg permissions: String): Boolean {
    permissions.forEach { permission ->
        if (hasPermission(permission)) {
            return true
        }
    }
    return false
}

@CheckResult
fun validateValue(value: String?, valueToCompare: String? = null): Boolean {
    if (!value.isNullOrEmpty() && value != Build.UNKNOWN && value != valueToCompare)
        return true

    return false
}

/**
 * @see: https://developer.android.com/about/versions/10/privacy/changes#data-ids
 *
 * Retrieve SerialNumber with system commands:
 *   adb shell getprop ro.serialno
 *   adb shell getprop ro.boot.serialno
 *   adb shell getprop ril.serialnumber
 * @return device Serial Number obtained with SystemProperties
 */
@SuppressLint("PrivateApi")
private fun serialNumberBySysProp(): String? {
    var sn: String? = null

    val readPhonePermissions = arrayOf(
        Manifest.permission.READ_PHONE_STATE,
        "android.permission.READ_PRIVILEGED_PHONE_STATE"
    )

    if (!this.context.hasPermissionSome(*readPhonePermissions))
        return sn

    try {
        val systemProps = Class.forName("android.os.SystemProperties")
        val getProp = systemProps.getMethod("get", String::class.java)

        // 1ª tentativa
        sn = getProp("ril.serialnumber") as String?
        if (validateValue(sn)) {
            return sn
        }

        // 2ª tentativa
        sn = getProp("ro.serialno") as String?
        if (validateValue(sn)) {
            return sn
        }

        // 3ª tentativa
        sn = getProp("ro.boot.serialno") as String?
        if (validateValue(sn)) {
            return sn
        }

        // 4ª tentativa
        sn = getProp("sys.serialnumber") as String?
        if (validateValue(sn)) {
            return sn
        }

    } catch (e: Exception) { }

    return if (validateValue(sn))
        sn
    else
        null
}

/**
 * @return device Serial Number obtained with Build Class
 */
@SuppressLint("HardwareIds")
private fun serialNumberByBuild(): String? {
    var sn: String? = null
    MediaDrm.PROPERTY_DEVICE_UNIQUE_ID
    if (!this.context.hasPermissionSome(
            Manifest.permission.READ_PHONE_STATE,
            "android.permission.READ_PRIVILEGED_PHONE_STATE"
        ))
        return sn

    if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.Q) {
        sn = Build.getSerial()
    } else if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.O) {
        sn = Build.getSerial()
    } else if (Build.VERSION.SDK_INT <= Build.VERSION_CODES.N_MR1) {
        sn = Build.getSerial()

        if (!validateValue(sn))
            sn = Build.SERIAL
    }

    return if (validateValue(sn))
        sn
    else
        null
}

val serialNumber: String
    @SuppressLint("HardwareIds", "PrivateApi", "MissingPermission", "StaticFieldLeak")
    get() {
        var serial: String = serialNumberByBuild() ?: ""

        if (!validateValue(serial)) {
            serial = serialNumberBySysProp() ?: ""
        }

        return serial
    } 
```

在 AndroidManifest.xml 中添加此权限

```
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.READ_PHONE_STATE" /> 
```

# oauth-2.0 - 使用 Google Document List + oAuth REST 协议下载文件失败

> ID：11029296
> 
> 赞同：0
> 
> 时间：2012-06-14T08:25:40.223
> 
> 标签：oauth-2.0, google-docs-api, google-drive-api, google-api-java-client, oauth2-playground

通过使用以下工具[oAuth Playground](https://code.google.com/oauthplayground/)并遵循文档[Google Documents List API 3.0 版](https://developers.google.com/google-apps/documents-list/#downloading_documents_and_files)。这是我所做的。

1.  我获得了以下 3 个范围的访问令牌。`https://docs.google.com/feeds/ https://docs.googleusercontent.com/ https://spreadsheets.google.com/feeds/`. 请参考以下附件。

    ![在此处输入图像描述](../Images/7e038a3a71e8f83cb4a1cdd17f955181.png)

2.  获得访问令牌和刷新令牌后，我开始查询，以获取特定文档的下载 URL。我提出了以下 GET 请求`https://docs.google.com/feeds/default/private/full/?v=3`。响应或多或少像

* * *

```
<entry ...
    ...
    <content type='application/zip' src='https://doc-0s-84-docs.googleusercontent.com/docs/securesc/4t...626&amp;e=download&amp;gd=true'/>
    ...
</entry> 
```

3.  然后我输入下载 URL `https://doc-0s-84-docs.googleusercontent.com/docs/securesc/4t...626&amp;e=download&amp;gd=true`。结果看起来像这样。

![在此处输入图像描述](../Images/d92250b75fe5355917c54f31e5ce9996.png)

但是，我收到以下回复。

```
HTTP/1.1 302 Found
Status: 302
Content-length: 0
Via: HTTP/1.1 GWA
Set-cookie: AUTH_98m5tbqk1ftn500bl9bsjcrv52agg3u2_nonce=mupodp3rtqnoc; Domain=doc-0s-84-docs.googleusercontent.com; Expires=Thu, 14-Jun-2012 08:33:15 GMT; Path=/docs/securesc/4t66vjvgb1974sathdoeioitbft52pel; Secure; HttpOnly
Expires: Thu, 14 Jun 2012 08:23:15 GMT
X-google-cache-control: remote-fetch
Server: HTTP Upload Server Built on Jun 7 2012 12:49:38 (1339098578)
Location: https://docs.google.com/nonceSigner?nonce=mupodp3rtqnoc&continue=https://doc-0s-84-docs.googleusercontent.com/docs/securesc/4t66vjvgb1974sathdoeioitbft52pel/kea7kv7gjen26s72ovuvc0lc9to7ogf7/1339660800000/06447459084918146340/06447459084918146340/0B3MN1kmYytfaNWIwMzYzYzYtNmUxNS00OWMzLThkYzctZmUyNjg5MTY2NmUw?amp;gd%3Dtrue%26amp;e%3Ddownload%26h%3D16653014193614665626&hash=rtv0rrnj8bal21va48shlckqbjf5gjhm
Cache-control: private, max-age=0
Date: Thu, 14 Jun 2012 08:23:15 GMT
P3p: CP="This is not a P3P policy! See http://www.google.com/support/accounts/bin/answer.py?hl=en&answer=151657 for more info."
Content-type: text/html; charset=UTF-8 
```

我得到了相同的结果，即使我`?v=3`在 URL 后面附加了它看起来像`https://doc-0s-84-docs.googleusercontent.com/docs/securesc/4t...626&amp;e=download&amp;gd=true?v=3`

知道为什么我会收到这样的错误吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T19:13:44.623

您使用的 URL 是 URL 编码的。只需在 URL 中更改`&amp;e=download&amp;gd=true`为。`&e=download&gd=true`

# php - 将 JavaScript 值传递给 PHP 变量（有限制）

> ID：11029298
> 
> 赞同：0
> 
> 时间：2012-06-14T08:25:47.573
> 
> 标签：php, javascript, facebook, json, facebook-iframe

我了解现有的问题和答案已经解决了这个问题。我已经查看了它们，但我的情况不允许我应用这些线程中提供的解决方案。

鉴于 JavaScript 是客户端而 PHP 是服务器端，以下是提供的两种解决方案：

[GET/POST 方法（发布 #3）](http://tycoontalk.freelancer.com/php-forum/20054-how-do-i-assign-javascript-variable.html)

[AJAX 方法](https://stackoverflow.com/questions/6139663/how-to-pass-a-value-to-php-variable-by-ajax)

* * *

**限制：Facebook 页面选项卡应用程序**

我无法使用上述通过 URL 传递参数的方法，因为 Facebook 页面选项卡已加载到 iFrame 中，它们无权访问查询字符串。`app_data`Facebook 通过使用Facebook 对象中的 GET 参数`signed_request`和 JSON 编码 提供了一种解决方法。

* * *

**解决限制：使用 app_data GET 参数**

我可以通过再次加载同一页面将参数传递到同一页面，但**我仍然只处理 PHP 变量和值**。

**fer.php**

```
<?php
$appData = array();
if (!empty($signedRequest) && !empty($signedRequest['app_data'])) {
    $appData = json_decode($signedRequest['app_data'], true);
}

echo '<pre>' . print_r($appData) .'</pre>';
//prints Array ( [lat] => 123 [lon] => 456 ) when fer.php reloads

$params = array(
'lat' => '123',
'lon' => '456'
);

$encodedParams = urlencode(json_encode($params));

$tabUrl = 'http://www.facebook.com/pages/FACEBOOK_PAGE/367117263337064?sk=app_433576149993619';
//$tabUrl will open fer.php

$linkUrl = $tabUrl . '&app_data=' . $encodedParams;
?>
...
function loopPage() 
{
        top.location = "<?= $linkUrl ?>";
        //reloads fer.php
} 
```

参考： http: [//labs.thesedays.com/blog/2011/06/23/query-strings-for-facebook-page-tabs/](http://labs.thesedays.com/blog/2011/06/23/query-strings-for-facebook-page-tabs/)

* * *

**也试过：**

[Cookie 方法](http://iamskwerl.com/tech/2011/11/passing-query-variables-to-facebook-fan-page-tabs/)（由于我仍然只处理 PHP 变量和值而被删除）

使用 JavaScript`encodeURIComponent()`和`encodeURI()`（错误的方法，因为这些方法对整个 URL 进行编码并且传递的参数无法被 识别`json_decode`）

**目前正在尝试：**带有 Ajax 的 JSON (XMLHttpRequest)

[将 JSON 数据从 Javascript 发送到 PHP？](https://stackoverflow.com/questions/8599595/send-json-data-from-javascript-to-php)

[如何将数据从 Javascript 传递到 PHP，反之亦然？](https://stackoverflow.com/questions/406316/how-to-pass-a-variable-data-from-javascript-to-php-and-vice-versa)

* * *

**我真正想要实现的目标：**

PHP 变量在**Facebook iFrame的****同一页面**中获取 JavaScript 值。页面重新加载以将参数传递给自身是可以的。

 ****fer.php**（错误示例）

```
function someValues(){
    varA = 123;
    varB = 456;
}

<?php
    $cupA = varA;
    $cupB = varB;
?> 
```

我已经尝试解决这个问题好几天了，我什至试图通过在将数据附加到重定向 URL =x 之前`json_decode`添加`%`到我的数据来欺骗我真的很感激任何帮助或指导。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T10:22:49.573

目前尚不清楚您是否要：

1.  将您在 PHP 中收到的数据传递`app_data`给 JavaScript，或

2.  将数据从 JavaScript 传递到 PHP。

## 将数据从 PHP 传递到 JavaScript

```
<head>
<script type="text/javascript">
var app_data = <?php echo json_encode($appData); ?>;
</script>
</head>
<body>
... 
```

## 将数据从 JavaScript 传递到 PHP

```
$.ajax({
    url: location.pathname, // current page
    type: 'POST',
    data: {
        vara: 'hello',
        varb: 'world'
    },
    success: function() {
        // ...
    }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-08T15:04:03.117

您可以使用 javascript 轻松做到这一点，例如 HTML 代码：

```
<select id = "Select" onchange = "FijarPrecio (this.id);" >
    <option value = "10"> product 1 </ option>
    <option value = "20"> product 2 </ option>
    <option value = "30"> product 3 </ option>
</select>
<input type = "text"  name = "Price" id = "Price"/>
<script type = "text/javascript" >
    FijarPrecio function (id) {
       PrecioSel var = document.getElementById (id);
       PrecioActual var = document.getElementById ('Price');
       PrecioActual.value = PrecioSel.value;
    }
</script> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-14T09:53:19.213

> 我真正想要实现的目标：
> 
> PHP 变量在 Facebook iFrame 的同一页面中获取 JavaScript 值。页面重新加载以将参数传递给自身是可以的。

最简单的方法：生成一个表单元素，用一些（隐藏的）输入字段填充它，然后将其发布到您的服务器。

AJAX 也是可能的，并且可能对用户更好，因为它不需要重新加载。

由于您没有*详细*描述任何问题，我只能假设这主要是由于您在这些问题上普遍缺乏知识/经验。因此，也许首先寻找一些教程，以大致了解所涉及的技术。**

# css - css3 过渡在歌剧中无法正常工作

> ID：11029300
> 
> 赞同：0
> 
> 时间：2012-06-14T08:25:53.717
> 
> 标签：css, opera, css-transitions

Opera 根据各种网站完美支持 css3 过渡。当我第一次尝试时，一切都很好，因为我首先尝试了`width`过渡的基本示例。但是当我尝试使用背景颜色进行过渡时，在歌剧中，过渡名称没有任何反应。该代码在 chrome 中运行良好，但在 opera 中运行良好。此外，当我尝试使用其他属性进行转换时`box-shadow`，`text-shadow`Opera 给出了相同的结果 - 没有任何效果。Opera 是否只支持宽度过渡。[在这里](http://jsfiddle.net/C3GBF/14/)，您可以查看问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T14:10:45.843

尝试使用最近发布的 Opera 12，它似乎适用于您的示例。

# mysql - 在 MySQL 存储过程中使用选择

> ID：11029301
> 
> 赞同：0
> 
> 时间：2012-06-14T08:25:56.010
> 
> 标签：mysql, stored-procedures

我在我的数据库中存储了过程，我需要查找一个表并交叉引用一个 id，然后使用返回的行我需要将信息插入到另一个表中，但我似乎无法使用从查找到插入的信息。这就是我所拥有的。。

```
BEGIN
#Routine body goes here...
SET @UID = uid;
SET @UIDTOFB = uid_to;

SET @SQLTEST = CONCAT('SELECT users.user_auto_id FROM users WHERE users.user_fb_uid=     @UIDTOFB LIMIT 1');
PREPARE sqlcmd from @SQLTEST;
EXECUTE sqlcmd;

INSERT INTO challenges(challenge_from_uid, challenge_to_uid, challenge_dateadded) VALUES(@UID, @SQLTEST.users.user_auto_id, now());

SET @LASTID = LAST_INSERT_ID();
SELECT @LASTID as id;

END 
```

任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T08:48:58.637

这不会插入 @UIDTOFB 的值，因为您错过了一些`'`. 它将整个语句作为一个字符串，因此该语句失败。

```
SET @SQLTEST = CONCAT('SELECT users.user_auto_id FROM users WHERE users.user_fb_uid=     @UIDTOFB LIMIT 1');
PREPARE sqlcmd from @SQLTEST;
EXECUTE sqlcmd; 
```

无论如何，我建议您使用这样的参数：

```
PREPARE sqlcmd from 'SELECT users.user_auto_id FROM users WHERE users.user_fb_uid= ? LIMIT 1';
EXECUTE sqlcmd USING @UIDTOFB; 
```

[您可以在手册](http://dev.mysql.com/doc/refman/5.0/en/sql-syntax-prepared-statements.html)中阅读有关它的更多信息。

**更新**：现在我明白了，你想做什么。像这样简单地做：

```
SELECT @anyVariable:=users.user_auto_id FROM users WHERE users.user_fb_uid= @UIDTOFB LIMIT 1;
INSERT INTO challenges(challenge_from_uid, challenge_to_uid, challenge_dateadded) VALUES(@UID, @anyVariable, now()); 
```

# c - 以下是我的闰年计划。它显示每个输出的闰年

> ID：11029305
> 
> 赞同：1
> 
> 时间：2012-06-14T08:26:02.223
> 
> 标签：c, lang, leap-year

我的程序为每个输出显示“这是闰年”。请让我知道我在哪里犯了错误？？

```
#include<stdio.h>
#include<conio.h>

void main()
{
int a;
clrscr();
printf("\n Enter the year : ");
scanf("%d",a);

if (a%400 == 0)
printf("\n It is a leap year");

else
if (a%100 == 0)
printf("\n It is not a leap year");

else
if (a%4 == 0)
printf("\n It is a leap year");

else
printf("\n It is not a leap year");

getch(); 
```

}

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T08:28:21.517

该`scanf()`函数要求您传递变量的*地址*：

```
scanf("%d",&a); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T08:30:19.557

请将您的 scanf 行编辑`scanf("%d", a);`为`scanf("%d",&a);`. 您需要传递 a 的地址，而不是其值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T08:31:06.100

你忘记了一个“&”：

```
scanf("%d",&a); 
```

所以无论你输入什么，它总是返回第一个为真，因为 "a" is = 0

# matlab - 在彼此顶部绘制两个条形图

> ID：11029318
> 
> 赞同：0
> 
> 时间：2012-06-14T08:26:44.170
> 
> 标签：matlab, plot

我有两个信息，并希望它们同时显示。

```
 f=     1.4000    0.8000

 d=    8.0000    8.2000 
```

我在这里使用了几个代码是一个例子：

```
 bar([d, f], 'stacked'); 
 legend(' ', ' '); 
 xlabel('every 5 Run of runs'); 
 ylabel(' ')
 axis([0 T  0 N])
 hold on; 
```

我得到了什么：

1：两个图例和图形颜色相同

2：它们一个接一个地显示。

3：这两个信息是在同一次运行 1 和 2 中读取的，我在这里有 4 次运行

![结果](../Images/4d8fc91710f6e4b9507c44715c8117a7.png)

怎么解决？我当然希望在运行 1 和 2 上以不同的颜色显示在彼此之上。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T08:52:46.823

如果`d`和`f`被定义为

```
f= [1.4000,0.8000];
d= [8.0000,8.2000]; 
```

你这样做

```
bar([d', f'], 1.5);   %Where 1.5 is the width of the bars. 
```

你会让它们相互叠加。不同之处在于`[d, f]`现在是`2x2`矩阵而不是`1x4`行向量。

# load - 使用数据库负载运行器创建报告

> ID：11029327
> 
> 赞同：0
> 
> 时间：2012-06-14T08:27:16.217
> 
> 标签：load, runner

我查看了[什么是用于在 LoadRunner Analysis 中创建运行 Vuser 图表的 SQL 的文档？](https://stackoverflow.com/questions/8221424/what-is-the-sql-used-to-create-the-running-vusers-graph-in-loadrunner-analysis) 我在业务对象中执行相同的表，但我想知道如何拥有多个 vuser，当我在 sql server 中导入分析会话的结果时，我发现了 file_ 中数据库会话的名称>每次我打开会话时会话信息都会更改，如果你知道请我可以有一个像这样的名字我可以在一个数据库中工作谢谢 haddaj

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T00:18:47.940

查看 [Event_Meter] 表和虚拟用户的相关字段。相关表在 [元数据] 表中。您应该能够从 [Event_Meter] 表运行图表以生成您想要的任何图表。

如果您想加快速度，请务必在 [Event_Meter] 和相关表中的所有关键字段上创建索引。

# .net - 为什么单击鼠标后不会触发第一个触摸事件？

> ID：11029328
> 
> 赞同：0
> 
> 时间：2012-06-14T08:27:23.873
> 
> 标签：.net, wpf, touch

我正在听`PreviewTouchDown`a `Canvas`，它工作正常。

问题是，当用户在图像上单击鼠标，然后触摸 时`Canvas`，第一次触摸不会触发触摸事件，但只有*在 之后*，看起来第一次触摸只聚焦 Canvas，然后是 Canvas将为触摸事件做好准备。

仅当用户通过鼠标单击图像时才会出现此问题。似乎这是一个重点问题，但是，我不确定。

任何的想法 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T09:21:25.030

尝试使用 Canvas.Focus() 方法在 TouchEnter 事件上将鼠标移回 Canvas 时设置 Canvas 的焦点。这听起来确实像是焦点问题，因为您单击了图像，因此从画布上移除了焦点。

检查您的假设是否正确的有用工具是[Snoop](http://snoopwpf.codeplex.com/)。我发现解决焦点问题非常有用。

# windows - 如何在 Windows 7 中从 GAC 卸载二进制文件？

> ID：11029334
> 
> 赞同：0
> 
> 时间：2012-06-14T08:27:44.797
> 
> 标签：windows, windows-7, gac

我需要在 win 7 中从 GAC 中删除一个二进制文件。我知道它在 win xp 上是如何工作的，但我无法在 win 7 中执行相同的程序

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-10-30T13:21:38.903

只需在命令提示符下使用它：

```
gacutil /u <assembly name> 
```

上面的关键字是`<assembly name>`. 也许您正在使用`<DLL filename>`这是一个常见的错误。那样不行！

如果您不知道程序集名称，请尝试第二个命令...

```
gacutil /l > C:\GAC_Assemblies.txt 
```

...然后在生成的 C:\GAC_Assemblies.txt 文件的内容中搜索您的 DLL 文件名。请注意相应的程序集名称，并在重试第一个命令时使用它！

# c++ - doxygen 创建错误

> ID：11029347
> 
> 赞同：1
> 
> 时间：2012-06-14T08:28:24.593
> 
> 标签：c++, doxygen

我在我的 c++ 项目中使用 doxygen 来生成文档。我的项目包含类函数和过程调用，例如，

```
 //AAA.h
 namespace NAME
 {
  Class EXPORT AAA
  {
    /*!
     * \brief Sample function.
     *
     * \param a is an integer value.
     *
     * This is a sample function.
     */  
     void SampleFunction(int a);
  }
}' 
```

构建此代码后，doxygen 工作正常并获得详细文档。但是当我用一个程序调用来尝试这个时，

```
//BBB.h
namespace NAME2
{
  /*!
  * \brief This is a function      
  *
  * \param b is a float
  *
  * This is a function
  */
  void function(float b);
 } 
```

构建代码后，文档创建但缺少用于描述的 html 文件，即

doxygen 使用带有简短声明的函数名称创建。但是当我单击函数名称时，它显示函数描述缺少 html 文件。以下是我项目中 doxygen 的 doxyfile。为了生成整个文档，要在 doxyfile 中更改哪个字段？

```
 # Doxyfile 1.5.5

  #---------------------------------------------------------------------------
  # Project related configuration options
  #---------------------------------------------------------------------------
  DOXYFILE_ENCODING      = UTF-8
  PROJECT_NAME           = "SAMPLE"
  PROJECT_NUMBER         = 0.0
  OUTPUT_DIRECTORY       = internal_docs/
  CREATE_SUBDIRS         = NO
  OUTPUT_LANGUAGE        = English
  BRIEF_MEMBER_DESC      = YES
  REPEAT_BRIEF           = YES
  ABBREVIATE_BRIEF       = "The $name class" \
                           "The $name widget" \
                           "The $name file" \
                           is \
                           provides \
                           specifies \
                           contains \
                           represents \
                           a \
                           an \
                           the
  ALWAYS_DETAILED_SEC    = NO
  INLINE_INHERITED_MEMB  = NO
  FULL_PATH_NAMES        = NO
  STRIP_FROM_PATH        = ../src/
  STRIP_FROM_INC_PATH    =
  SHORT_NAMES            = YES
  JAVADOC_AUTOBRIEF      = NO
  QT_AUTOBRIEF           = NO
  MULTILINE_CPP_IS_BRIEF = NO
  INHERIT_DOCS           = YES
  SEPARATE_MEMBER_PAGES  = NO
  TAB_SIZE               = 8
  ALIASES                =
  OPTIMIZE_OUTPUT_FOR_C  = NO
  OPTIMIZE_OUTPUT_JAVA   = NO
  OPTIMIZE_FOR_FORTRAN   = NO
  OPTIMIZE_OUTPUT_VHDL   = NO
  BUILTIN_STL_SUPPORT    = NO
  CPP_CLI_SUPPORT        = NO
  SIP_SUPPORT            = NO
  DISTRIBUTE_GROUP_DOC   = NO
  SUBGROUPING            = YES
  TYPEDEF_HIDES_STRUCT   = NO
  #---------------------------------------------------------------------------
  # Build related configuration options
  #---------------------------------------------------------------------------
  EXTRACT_ALL            = NO
  EXTRACT_PRIVATE        = YES
  EXTRACT_STATIC         = YES
  EXTRACT_LOCAL_CLASSES  = YES
  EXTRACT_LOCAL_METHODS  = YES
  EXTRACT_ANON_NSPACES   = NO
  HIDE_UNDOC_MEMBERS     = NO
  HIDE_UNDOC_CLASSES     = NO
  HIDE_FRIEND_COMPOUNDS  = NO
  HIDE_IN_BODY_DOCS      = NO
  INTERNAL_DOCS          = NO
  CASE_SENSE_NAMES       = YES
  HIDE_SCOPE_NAMES       = NO
  SHOW_INCLUDE_FILES     = YES
  INLINE_INFO            = YES
  SORT_MEMBER_DOCS       = NO
  # GG setting below to YES will cause things to be alphabetic
  SORT_BRIEF_DOCS        = YES
  SORT_GROUP_NAMES       = NO
  SORT_BY_SCOPE_NAME     = NO
  GENERATE_TODOLIST      = YES
  GENERATE_TESTLIST      = YES
  GENERATE_BUGLIST       = YES
  GENERATE_DEPRECATEDLIST= YES
  ENABLED_SECTIONS       =
  MAX_INITIALIZER_LINES  = 30
  SHOW_USED_FILES        = YES
  SHOW_DIRECTORIES       = NO
  FILE_VERSION_FILTER    =
  #---------------------------------------------------------------------------
  # configuration options related to warning and progress messages
  #---------------------------------------------------------------------------
  QUIET                  = YES
  WARNINGS               = YES
  WARN_IF_UNDOCUMENTED   = YES
  WARN_IF_DOC_ERROR      = YES
  WARN_NO_PARAMDOC       = YES
  WARN_FORMAT            = "$file:$line: $text"
  WARN_LOGFILE           =
  #---------------------------------------------------------------------------
  # configuration options related to the input files
  #---------------------------------------------------------------------------
  INPUT                  = ../internal_include/ ../include/
  INPUT_ENCODING         = UTF-8
  FILE_PATTERNS          = *.c \
                           *.cc \
                           *.cxx \
                           *.cpp \
                           *.c++ \
                           *.d \
                           *.java \
                           *.ii \
                           *.ixx \
                           *.ipp \
                           *.i++ \
                           *.inl \
                           *.h \
                           *.hh \
                           *.hxx \
                           *.hpp \
                           *.h++ \
                           *.idl \
                           *.odl \
                           *.cs \
                           *.php \
                           *.php3 \
                           *.inc \
                           *.m \
                           *.mm \
                           *.dox \
                           *.py \
                           *.f90 \
                           *.f \
                           *.vhd \
                           *.vhdl \
                           *.C \
                           *.CC \
                           *.C++ \
                           *.II \
                           *.I++ \
                           *.H \
                           *.HH \
                           *.H++ \
                           *.CS \
                           *.PHP \
                           *.PHP3 \
                           *.M \
                           *.MM \
                           *.PY \
                           *.F90 \
                           *.F \
                           *.VHD \
                           *.VHDL
  RECURSIVE              = YES
  EXCLUDE                =
  EXCLUDE_SYMLINKS       = NO
  EXCLUDE_PATTERNS       = 
  EXCLUDE_SYMBOLS        =
  EXAMPLE_PATH           =
  EXAMPLE_PATTERNS       = *
  EXAMPLE_RECURSIVE      = NO
  IMAGE_PATH             =
  INPUT_FILTER           =
  FILTER_PATTERNS        =
  FILTER_SOURCE_FILES    = NO
  #---------------------------------------------------------------------------
  # configuration options related to source browsing
  #---------------------------------------------------------------------------
  # GG changed below to NO 7/16/2010
  SOURCE_BROWSER         = NO
  INLINE_SOURCES         = NO
  STRIP_CODE_COMMENTS    = YES
  # GG changed below to NO 7/16/2010
  REFERENCED_BY_RELATION = NO
  # GG changed below to NO 7/16/2010
  REFERENCES_RELATION    = NO
  # GG changed below to NO 7/16/2010
  REFERENCES_LINK_SOURCE = NO
  USE_HTAGS              = NO
  # GG changed below to NO 7/16/2010
  VERBATIM_HEADERS       = NO
  #---------------------------------------------------------------------------
  # configuration options related to the alphabetical class index
  #---------------------------------------------------------------------------
  ALPHABETICAL_INDEX     = NO
  COLS_IN_ALPHA_INDEX    = 5
  IGNORE_PREFIX          =
  #---------------------------------------------------------------------------
  # configuration options related to the HTML output
  #---------------------------------------------------------------------------
  GENERATE_HTML          = YES
  HTML_OUTPUT            = html
  HTML_FILE_EXTENSION    = .html
  HTML_HEADER            =
  HTML_FOOTER            = external_docs/files/footer.html
  HTML_STYLESHEET        =
  HTML_ALIGN_MEMBERS     = YES
  GENERATE_HTMLHELP      = NO
  GENERATE_DOCSET        = NO
  DOCSET_FEEDNAME        = "Doxygen generated docs"
  DOCSET_BUNDLE_ID       = org.doxygen.Project
  HTML_DYNAMIC_SECTIONS  = NO
  CHM_FILE               =
  HHC_LOCATION           =
  GENERATE_CHI           = NO
  BINARY_TOC             = NO
  TOC_EXPAND             = NO
  #GG line below changed
  DISABLE_INDEX          = YES
  ENUM_VALUES_PER_LINE   = 1
  #GG line below changed
  GENERATE_TREEVIEW      = NO
  TREEVIEW_WIDTH         = 250
  #---------------------------------------------------------------------------
  # configuration options related to the LaTeX output
  #---------------------------------------------------------------------------
  GENERATE_LATEX         = NO
  LATEX_OUTPUT           = latex
  LATEX_CMD_NAME         = latex
  MAKEINDEX_CMD_NAME     = makeindex
  COMPACT_LATEX          = NO
  PAPER_TYPE             = a4wide
  EXTRA_PACKAGES         =
  LATEX_HEADER           =
  PDF_HYPERLINKS         = YES
  USE_PDFLATEX           = YES
  LATEX_BATCHMODE        = NO
  LATEX_HIDE_INDICES     = NO
  #---------------------------------------------------------------------------
  # configuration options related to the RTF output
  #---------------------------------------------------------------------------
  GENERATE_RTF           = NO
  RTF_OUTPUT             = rtf
  COMPACT_RTF            = NO
  RTF_HYPERLINKS         = NO
  RTF_STYLESHEET_FILE    =
  RTF_EXTENSIONS_FILE    =
  #---------------------------------------------------------------------------
  # configuration options related to the man page output
  #---------------------------------------------------------------------------
  GENERATE_MAN           = NO
  MAN_OUTPUT             = man
  MAN_EXTENSION          = .3
  MAN_LINKS              = NO
  #---------------------------------------------------------------------------
  # configuration options related to the XML output
  #---------------------------------------------------------------------------
  GENERATE_XML           = NO
  XML_OUTPUT             = xml
  XML_SCHEMA             =
  XML_DTD                =
  XML_PROGRAMLISTING     = YES
  #---------------------------------------------------------------------------
  # configuration options for the AutoGen Definitions output
  #---------------------------------------------------------------------------
  GENERATE_AUTOGEN_DEF   = NO
  #---------------------------------------------------------------------------
  # configuration options related to the Perl module output
  #---------------------------------------------------------------------------
  GENERATE_PERLMOD       = NO
  PERLMOD_LATEX          = NO
  PERLMOD_PRETTY         = YES
  PERLMOD_MAKEVAR_PREFIX =
  #---------------------------------------------------------------------------
  # Configuration options related to the preprocessor
  #---------------------------------------------------------------------------
  ENABLE_PREPROCESSING   = YES
  MACRO_EXPANSION        = YES
  EXPAND_ONLY_PREDEF     = YES
  SEARCH_INCLUDES        = YES
  INCLUDE_PATH           =
  INCLUDE_FILE_PATTERNS  =
  PREDEFINED             = EXPORT  =
  EXPAND_AS_DEFINED      =
  SKIP_FUNCTION_MACROS   = YES
  #---------------------------------------------------------------------------
  # Configuration::additions related to external references
  #---------------------------------------------------------------------------
  TAGFILES               =
  GENERATE_TAGFILE       =
  ALLEXTERNALS           = NO
  EXTERNAL_GROUPS        = YES
  PERL_PATH              = /usr/bin/perl
  #---------------------------------------------------------------------------
  # Configuration options related to the dot tool
  #---------------------------------------------------------------------------
  CLASS_DIAGRAMS         = NO
  MSCGEN_PATH            =
  HIDE_UNDOC_RELATIONS   = YES
  HAVE_DOT               = NO
  CLASS_GRAPH            = YES
  COLLABORATION_GRAPH    = YES
  GROUP_GRAPHS           = YES
  UML_LOOK               = NO
  TEMPLATE_RELATIONS     = NO
  INCLUDE_GRAPH          = YES
  INCLUDED_BY_GRAPH      = YES
  CALL_GRAPH             = YES
  CALLER_GRAPH           = NO
  GRAPHICAL_HIERARCHY    = YES
  DIRECTORY_GRAPH        = YES
  DOT_IMAGE_FORMAT       = png
  DOT_PATH               =
  DOTFILE_DIRS           =
  DOT_GRAPH_MAX_NODES    = 50
  MAX_DOT_GRAPH_DEPTH    = 1000
  DOT_TRANSPARENT        = YES
  DOT_MULTI_TARGETS      = NO
  GENERATE_LEGEND        = YES
  DOT_CLEANUP            = YES
  #---------------------------------------------------------------------------
  # Configuration::additions related to the search engine
  #---------------------------------------------------------------------------
  SEARCHENGINE           = NO 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T08:49:24.673

从 doxygen[常见问题解答](http://www.doxygen.nl/manual/faq.html)：

> **当我设置`EXTRACT_ALL`为`NO`文档中不显示我的任何功能时。**
> 
> 为了记录全局函数、变量、枚举、类型定义和定义，您应该使用包含`\file`（或`@file`）命令的注释块记录这些命令所在的文件。
> 
> 对于成员函数或属于命名空间的函数，您应该记录类或命名空间。

您可以检查文件中是否包含`\file`命令`BBB.h`或尝试记录命名空间`NAME2`吗？

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-14T08:49:14.550

如果`EXTRACT_ALL=YES`不起作用，请尝试按以下方式格式化文档：

```
// Format:
/**
*
*/

// ex:
//BBB.h
namespace NAME2
{
  /**
  * \brief This is a function      
  *
  * \param b is a float
  *
  * This is a function
  */
  void function(float b);
 } 
```

# python - 在 python 中处理 org-mode 文件

> ID：11029349
> 
> 赞同：6
> 
> 时间：2012-06-14T08:28:38.567
> 
> 标签：python, emacs, org-mode

我在 emacs org-mode 文件中有很多文档。我想从我的 python 程序中处理其中的一些文件。一个有用的示例是将 org 表导入 python 字典或列表，或者在 org 文件中查找特定部分（由`*`特殊字符标记）。我认为用 python 编写代码并不难`org-mode-importer`，但我想避免重新发明轮子。我找到[了 Orgnode](http://members.optusnet.com.au/~charles57/GTD/orgnode.html)，但似乎没有积极维护。

有没有其他选择？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-14T16:15:36.710

有 PyOrgMode 和 NEO：

[https://github.com/bjonnh/PyOrgMode](https://github.com/bjonnh/PyOrgMode)

[http://lists.gnu.org/archive/html/emacs-orgmode/2011-04/msg00598.html](http://lists.gnu.org/archive/html/emacs-orgmode/2011-04/msg00598.html)

解析.org文件的工具一般都列在这里： http: [//orgmode.org/worg/org-tools/index.html](http://orgmode.org/worg/org-tools/index.html)

# git - 删除 git 中损坏的分支

> ID：11029350
> 
> 赞同：27
> 
> 时间：2012-06-14T08:28:43.437
> 
> 标签：git

我用“git checkout -b mybranch”创建了分支。似乎出了点问题，现在我无法使用“git branch -D mybranch”删除它。它说：错误：找不到分支'mybranch'。

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2012-06-15T12:44:34.993

如果`git branch -D`真的不起作用，那么您唯一的选择是避开它并自己编辑 git check-out 的状态。您应该转到签出的根目录（`.git`目录所在的位置）和

1.  编辑`.git/packed-refs`；如果您看到带有您的分支名称的行，则将其删除
2.  查找`.git/refs/heads`以您的分支命名的文件；如果你看到一个，删除它

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-10-30T01:05:21.270

我曾经`git update-ref -d refs/heads/<branch name>`修复过这个问题。据推测，这与 Rup 在所选答案中建议的内容相同，只是它是通过 Git 的 CLI 接口的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-01-02T13:23:15.580

我有同样的问题`git branch -d <branch_name>`没有工作，我没有找到任何东西`.git/packed-refs`，`.git/refs/heads`但我有文件

> .git/refs/remotes/origin

使用我无法在本地和远程删除的分支名称。但是在删除了`branch_name`我想删除的文件后，它没有在本地显示。

在远程使用时删除它

> `git fetch -p origin`

-p`--prune`选项告诉在获取之前，删除远程不再存在的任何远程跟踪引用。然后使用命令

> `git push origin :<branch_name_you_was_unable_to_delete>`

远程删除。

你完成了。:)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-14T08:35:07.933

您显然不需要删除不存在的分支。用于`git branch`查看分支列表，如果不存在则表示没有分支，无需删除。否则，请确保正确键入名称并且`git branch -D`应该可以工作。

尽管如此，您不需要太在意可能仍然存在但无法访问的损坏分支。Git 中的分支实际上是简单的 40 字节文件，因此您无需担心。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-11-25T12:05:49.250

我有同样的问题。每当我执行命令时，该分支就在分支列表中`git branch`，但我无法删除它。

在我的情况下，解决方案很简单，有点出乎意料：我检查了损坏的分支`git checkout broken_branch`（是的，它有效），然后我检查回 master 并......再次执行`git branch -D broken_branch`。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-05-06T05:43:47.750

如果分支名称包含特殊字符，则需要引用：

```
$ git branch -D 'ENH-Adding-unit-``julian``-to-``to_datetime``' 
```

# delphi - 为什么“字符串数组”的两个别名处理不同？

> ID：11029353
> 
> 赞同：12
> 
> 时间：2012-06-14T08:28:49.940
> 
> 标签：delphi, generics

在 Pascal 中有两种类型声明：

*   类型别名：*type NewName = OldType*
*   类型创建：*type NewType = **type** OldType*

前者只是创建方便的简写，就像C 中的*typedef*一样。别名彼此兼容，并且与它们的原始类型兼容。创建的类型是故意不兼容的，如果没有明确的和不安全的定义类型转换，就不能混合。

```
var
  nn: NewName; nt: NewType; ot: OldType;
...
  nn := ot; // should work
  nt := ot; // should break with type safety violation error.

  nt := NewType(ot); // Disabling type safety. Should work even if 
  // it has no sense semantically and types really ARE incompatible. 
```

据我了解，这些是 Pascal 基础知识。

现在让我们看看一种特定类型及其两个别名：

*   System.Types.TStringDynArray =字符串**数组；**
*   System.TArray<T> = T**的数组**；
    *   *特别是这意味着*TArray<string> =字符串**数组**；*根据定义。*

现在让我们使用返回前一个类型别名的函数并将其结果提供给期望后一个类型的函数：

```
uses Classes, IOUtils;

 TStringList.Create.AddStrings(
    TDirectory.GetFiles('c:\', '*.dll') );

 TStringList.Create.AddStrings(
     TArray<string>( // this is required by compiler - but why ???
         TDirectory.GetFiles('c:\', '*.dll') ) ); 
```

由于类型冲突，第一个片段无法编译。第二个可以愉快地编译和工作，但是对于未来的类型更改很脆弱并且是多余的。

QC 告诉编译器是正确的，而 RTL 设计是错误的。 [http://qc.embarcadero.com/wc/qcmain.aspx?d=106246](http://qc.embarcadero.com/wc/qcmain.aspx?d=106246)

为什么编译器就在这里？为什么这些别名不兼容？甚至 RTL 的设计方式也表明它们被认为是兼容的！

PS。大卫提出了更简单的例子，不使用 TArray<T>

```
 type T1 = array of string; T2 = array of string;

 procedure TForm1.FormCreate(Sender: TObject);
  function Generator: T1;
    begin Result := T1.Create('xxx', 'yyy', 'zzz'); end;
  procedure Consumer (const data: T2);
    begin
      with TStringList.Create do 
      try
        AddStrings(data);
        Self.Caption := CommaText;
      finally
        Free;
      end;
    end;
  begin
    Consumer(Generator);
  end; 
```

相同的陷阱没有解释......

聚苯乙烯。现在有许多文档参考。我想强调一件事：虽然这个限制可能间接继承自 1949 年的帕斯卡报告，但今天是 2012 年，德尔福使用的方式与半个世纪前的学校实验室截然不同。我列举了一些保持这种限制的坏影响，但没有看到任何好的影响。

具有讽刺意味的是，这种限制可以在不违反 Pascal 规则的情况下解除：在 Pascal 中没有像开放数组和动态数组这样的非严格野兽。所以让那些原来的固定数组随心所欲地被限制，但是开放数组和动态数组不是帕斯卡公民，没有义务被它的码本限制！

请在 QC 或什至在这里与 Emba 交流，但如果你只是路过而不表达你的意见 - 什么都不会改变！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-14T14:19:34.737

理解这个问题的关键是语言指南中的[类型兼容性和身份](http://docwiki.embarcadero.com/RADStudio/en/Type_Compatibility_and_Identity)主题。我建议您好好阅读该主题。

简化示例也很有帮助。示例中包含泛型主要是为了使事情复杂化和混淆。

```
program TypeCompatibilityAndIdentity;
{$APPTYPE CONSOLE}

type
  TInteger1 = Integer;
  TInteger2 = Integer;
  TArray1 = array of Integer;
  TArray2 = array of Integer;
  TArray3 = TArray1;

var
  Integer1: TInteger1;
  Integer2: TInteger2;
  Array1: TArray1;
  Array2: TArray2;
  Array3: TArray3;

begin
  Integer1 := Integer2; // no error here
  Array1 := Array2; // E2010 Incompatible types: 'TArray1' and 'TArray2'
  Array1 := Array3; // no error here
end. 
```

从文档中：

> 当一个类型标识符使用另一个类型标识符声明时，没有限定，它们表示相同的类型。

这意味着`TInteger1`和`TInteger2`是**同一**类型，并且确实与 是同一类型`Integer`。

文档中的进一步说明是：

> 用作类型名称的语言结构在每次出现时都表示不同的类型。

的声明`TArray1`和`TArray2`属于这一类。这意味着这两个标识符表示不同的类型。

现在我们需要查看讨论兼容性的部分。这给出了一组规则来确定两种类型是否兼容或分配兼容。事实上，我们可以通过参考另一个帮助主题来简化讨论：[Structured Types, Array Types and Assignments](http://docwiki.embarcadero.com/RADStudio/en/Structured_Types#Array_Types_and_Assignments)，它清楚地说明了：

> 只有当它们是相同类型时，数组才是赋值兼容的。

这清楚地说明了为什么分配`Array1 := Array2`会导致编译器错误。

您的代码查看了传递参数，但我的代码专注于分配。问题是相同的，因为正如[调用过程和函数](http://docwiki.embarcadero.com/RADStudio/en/Calling_Procedures_and_Functions#Program_Control_and_Parameters)帮助主题所解释的：

> 调用例程时，请记住：
> 
> *   用于传递类型化 const 和 value 参数的表达式必须与相应的形式参数赋值兼容。
> *   …………

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-14T12:14:17.040

Delphi 是一种强类型语言。这意味着相同（在这种情况下，我的意思是它们的定义看起来完全相同）类型不兼容赋值。

当您编写时，`array of <type>`您定义的是类型而不是别名。正如大卫在他的评论中已经说过的那样，两种相同的类型

```
type 
  T1 = array of string; 
  T2 = array of string; 
```

不兼容分配。

同样适用

```
type
  TStringDynArray = array of string;
  TArray<T> = array of string; 
```

人们经常忘记相同类型的不兼容，我猜他们在引入 IOUtils 时就会这样做。从理论上讲，TStringDynArray 的定义应该已更改为，`TStringDynArray = TArray<string>`但我想这可能会引发其他问题（不是说泛型的错误......）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-18T10:35:08.973

Delphi 也有同样的问题，我想将值从一个相同的数组传递到另一个数组。我不仅有两个类似数组分配的“不兼容”问题，而且我也无法使用**“Copy()”**过程。为了解决这个问题，我发现我可以使用指向字符串数组**类型**数组的指针。

例如：

```
type RecArry = array of array of string
     end;
var TArryPtr : ^RecArry; 
```

现在，我可以将任何固定数组中的值传递给另一个相同的数组，而不会出现任何兼容性或功能问题。例如：

```
TArryPtr := @RecArry.LstArray //This works!
TArryPtr := @LstArray         //This also works! 
```

使用这个创建的数组分配模板，我现在可以毫无问题地处理所有二维数组。但是，应该理解的是，当访问这种类型的字符串数组指针时，会创建一个额外的元素，这样当我们期望这种类型的数组时，我们会期望下面的二维数组，例如：

```
Two_Dimensional_Fixed_Array[10][0] 
```

我们现在得到一个额外的元素调整数组，如下所示：

```
New_Two_Dimensional_Fixed_Array[10][1] 
```

这意味着我们必须使用一些稍微棘手的代码来访问指针数组，因为 Two_Dimensional_Fixed_Array[10][0] 中的所有填充元素都已向下移动，因此它们偏移 1，如 New_Two_Dimensional_Fixed_Array[10][1 ]。

因此，我们通常会在 Two_Dimensional_Fixed_Array **[1][0]中找到值****'X'** ，现在可以在 TArryPtr **[0][1]**中找到它。

 ****这是我们所有人都必须忍受的权衡！

要记住的另一个重要注意事项是声明指针数组时的定义。当指针数组被声明类型时，Borland 编译器将不允许指针数组具有与其所指向的数组相同的元素大小。例如，如果一个数组被声明为：

`Orig_Arry : array [1..50,1] of string;`

应该指向它的指针数组将以下列方式声明：

`Type Pntr_Arry : array [1..50,2] of string;`

你注意到额外的元素了吗？我猜 Borland 编译器必须扩大数组指针以允许指针地址。****

# facebook - Facebook Graph API（Graph API Explorer 与自己的应用程序）

> ID：11029354
> 
> 赞同：1
> 
> 时间：2012-06-14T08:28:50.690
> 
> 标签：facebook, facebook-graph-api

我正在尝试将 Facebook API 集成到我的 iPhone 应用程序中。

当我使用自己的应用程序并尝试获取它每次返回的另一个用户的状态时，我发现了问题：

```
 {
      "data": [
       ]
   } 
```

但是当为此目的使用 Graph Api Explorer 时，它会返回一个包含用户所有公共状态的数据。

所有状态都是公开的，每个人都可以阅读。可能使用 FQL 但 Facebook 建议使用 Graph API？

那里有什么问题？

另一个问题如果以前没有解决方案：我可以读取任何用户的公开状态吗？可能我可以订阅用户并查看他对其他 Graph API 请求的公开评论。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T09:03:51.627

调用`/me/permissions`这两个应用程序并检查您是否为每个应用程序授予了相同的[权限](https://developers.facebook.com/docs/authentication/permissions/)- 您可能缺少`read_stream`其他应用程序的权限

# php - 网页标题用户名

> ID：11029357
> 
> 赞同：2
> 
> 时间：2012-06-14T08:28:54.373
> 
> 标签：php, sql, title

我想把登录用户的名字作为页面的标题。但我不知道该怎么做。我尝试了几种方法，但每种方法都显示解析错误。这是我用于登录用户然后显示他的详细信息的 php 代码。

```
<?php

                //if the login session does not exist therefore meaning the user is not logged in
                if(strcmp($_SESSION['uid'],"") == 0){
                    //display and error message
                    echo "<center>You need to be logged in to user this feature!</center>";
                }else{
                    //otherwise continue the page

                    //this is out update script which should be used in each page to update the users online time
                    $time = date('U')+50;
                    $update = mysql_query("UPDATE `employer` SET `online` = '".$time."' WHERE `id` = '".$_SESSION['uid']."'");
                    $display_query = mysql_query("SELECT * FROM employer WHERE `id` = '".$_SESSION['uid']."'");
                    echo "<table id='pageTable'><tbody><th>Your Details</th>";
                    echo "<tbody>";
                    while($row = mysql_fetch_array($display_query)){
                        echo "<tr><td>Name&#58;&nbsp;</td><td>".$row['name']."</td><tr>";
                        $titlename = $row['name'];
                        echo "<tr><td>E&#45;Mail ID&#58;&nbsp;</td><td>".$row['email']."</td><tr>";
                        echo "<tr><td>Contact No&#46;&#58;&nbsp;</td><td>".$row['contact']."</td><tr>";
                        echo "<tr><td>Company&#58;&nbsp;</td><td>".$row['company']."</td><tr>";
                        echo "<tr><td>Designation&#58;&nbsp;</td><td>".$row['designation']."</td><tr>";
                    }

                    echo "</tbody>";
                    echo "</table>";
                    echo "<table><tr><td>";
                    echo '<div class="button"><a href="functions/logout.php">Logout</a></td></tr></table>';

                //make sure you close the check if they are online
                }

            ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T08:37:50.057

确保您正确标记您的页面：doctype、html-head-body 等。您可以这样做，并且当正文仍然“打开”时，通过简单地从`<?php`您的脚本开始来声明您的 php 代码。

然后，您的 loginname-as-title 代码的相关部分：

```
<head>
  <title><?php echo $loginName ?></title><!-- thanks to Berry Langerak for noting 'echo' was missing -->
</head>
<body>
<?php 
```

`$loginName`您要显示的登录 ID 的 var 当然在哪里。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T08:38:10.513

您需要在输出`<head>`页面部分之前获取所需的数据，然后在其中包含一个[`<title>`](http://www.w3.org/TR/html4/struct/global.html#h-7.4.2)元素。

```
<title><?php echo htmlspecialchars($myTitle); ?></title> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T08:46:19.120

使用下面的代码将登录名显示为标题

```
 echo '<script language="javascript">';
 echo 'document.title = \''.$row['name'].'\'';
 echo '</script>' 
```

# c# - C++ 异常与 C# 异常

> ID：11029358
> 
> 赞同：5
> 
> 时间：2012-06-14T08:29:01.953
> 
> 标签：c#, c++, exception, error-handling, exception-safety

[在一篇题为“更干净、更优雅、更难识别](http://blogs.msdn.com/b/oldnewthing/archive/2005/01/14/352949.aspx)”的旧博客文章中，作者指出：

> 在 C++ 中，它并没有那么糟糕，因为**C++ 异常仅在执行期间的特定点引发**。在 C# 中，可以随时引发异常。

他到底是什么意思？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T08:34:07.753

首先，我会毫不犹豫地指责 Raymond Chen 将任何事情与任何事情混为一谈。

我怀疑他的意思是在 C++ 中，只有在存在`throw`语句的情况下才会抛出异常。只要您对代码和库函数进行了足够深入的研究，您就可以准确地确定可能从哪里引发异常。另一方面，在 C# 中，运行时环境随时可能抛出异常。例如，您可能会在尝试调用任何其他程序集中的任何函数时遇到安全异常。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-14T09:03:03.280

也许换一种说法：

在 C++ 中可以编写提供 nothrow 保证的函数。

我不知道 C#，我很确定 Raymond Chen 知道，所以我接受他的说法，即“在 C# 中，可以随时引发异常”。因此，您不能在 C# 中编写提供 nothrow 保证的函数。

在 C++ 中，nothrow 函数是提供其他异常保证的函数的一个非常重要的组件。为了做出强有力的保证（即实现事务），您通常*需要*诸如 nothrow 交换之类的东西，它执行多个语句而不会被异常中断。为了做一个基本的保证，你不需要清理资源，你可能还需要很短的 nothrow 代码段，其中你的对象的状态违反了它们的类不变量。

枚举 C++ 中所有可能引发异常的“特定点”可能很乏味，但实际上编写一段绝对不会的短代码并不难。如果你不能在 C# 中做到这一点，那将是一个重要的区别。

如果 Chen 关于 C# 的说法是错误的，那么他的意思可能并不重要。因为他错了。

在完整阅读这篇文章时，我注意到他主要是在谈论示例代码不正确（对实际代码有明显的影响）。因此，如果由于某些绝对不会抛出的 C# 代码的特殊情况而导致他的 C# 声明不正确，但此类 C# 代码从未出现在教程示例中，那么他仍然会对语言的教学方式有一个重要的观点——示例遗漏了使示例代码异常安全所需的基本内容可能是不好的示例，并且它们冒着教坏习惯的风险。并且与错误代码示例不同，学生（Chen 说）不能一眼看出该示例是坏的，因此可能没有意识到需要做更多的工作才能使它们“不坏”。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-14T08:34:00.820

我认为他在谈论异步异常，在 C# 中可以在一个线程中引发，因为在另一个线程中发生了一些事情。（请注意，陈的博客条目中的一位评论者以相同的方式解释了他所写的内容，但不幸的是陈没有对此作出回应。）

参见，例如， http: [//msdn.microsoft.com/en-us/library/system.threading.threadabortexception.aspx](http://msdn.microsoft.com/en-us/library/system.threading.threadabortexception.aspx)，其中一个线程调用`Abort`代表另一个线程的对象的方法，导致另一个线程获得一个`ThreadAbortException`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T08:32:15.370

他可能的意思是，在**C++ 中，异常不是由框架引发的**，而只是来自您的代码（或由将其代码视为“他们自己的代码”的人编写的外部代码）。**在 C# 中，异常也可能发生在框架中。**

然而，我不明白为什么作者似乎更喜欢只从您自己的代码中引发异常。

# c# - 在数据库之间转换类型，在 C# 中允许空值

> ID：11029360
> 
> 赞同：0
> 
> 时间：2012-06-14T08:29:07.933
> 
> 标签：c#, boolean, type-conversion

我正在编写 sql server 和 firebird 之间的数据同步应用程序。在 firebird 中，由于历史原因，bool 由“Y”或“N”等域提供。现在我想在 bool 和 char(1) 之间创建转换函数，但它应该接受空值。

如果输入参数为 bool 或 string 并且来自 db 的值为 null，这会导致问题吗？

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T08:32:42.817

如果您的输入是三态的，而您的输出是双态的，则需要考虑“默认”。如果您只是谈论在 C# 部分中处理可为空的 bool，则可以使用“bool?” 表示一个可为空的布尔值（它在引擎盖下被装箱）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T08:38:31.950

使用[Nullable bool？](http://msdn.microsoft.com/en-us/library/2cf62fcy.aspx)

你可以设置

```
bool? flag = false; // or null 
```

稍后您可以[使用 ?? 操作员](http://msdn.microsoft.com/en-us/library/ms173224.aspx)

```
var result = flag ?? false; // this will return false in case of null 
```

# arrays - 将数组传递给 OpenCL 中的函数参数

> ID：11029363
> 
> 赞同：8
> 
> 时间：2012-06-14T08:29:24.560
> 
> 标签：arrays, opencl

如何将数组传递给 OpenCL 中的函数？我收到错误“..argument of type "_global float *" is incompatible with type of parameter of type "float *" in line *c[n]=FindIndexFromArray(a,3)* ;

```
float FindIndexFromArray(float myArray[], float Key)
{
    // simple looping to find the index
    for (int i=0;i<sizeof(myArray);i++)
       if (myArray[i]==Key)
         return i; 

}

kernel void ProcessArray(
    global read_only float* myArray,
    global read_only float* Key,
    global write_only float* c )
{
    int index = get_global_id(0); 
    c[index] = FindIndexFromArray(myArray, Key); // How do I pass myArray parameter?
} 
```

我编辑的源代码：

```
float FindIndexFromArray(__global read_only float* myArray[], __global read_only float* Key)
{
    // simple looping to find the index
    for (int i=0;i<sizeof(myArray);i++)
       if (myArray[i]==Key)
         return i; 

}

kernel void ProcessArray(
    __global read_only float* myArray,
    __global read_only float* Key,
    __global write_only float* c )
{
    int index = get_global_id(0);
    c[index] = FindIndexFromArray(myArray, Key); // How do I pass myArray parameter?
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T22:14:54.617

如错误消息中所述。你的`myArray`and`Key`带有类型`global`and `read-only`，因此你必须在将它传递给另一个函数时声明相同的类型。简而言之，你`FindIndexFromArray`应该是

```
FindIndexFromArray(global read_only float* myArray, global read_only float* Key) 
```

# ruby - 如何使用 Ruby 脚本向延迟作业添加方法

> ID：11029367
> 
> 赞同：0
> 
> 时间：2012-06-14T08:29:37.757
> 
> 标签：ruby, ruby-on-rails-3, delayed-job

我在 /myapp/scripts/myscript.rb 中有一个 ruby **​​script**

， 当我运行`ruby script/myscript.rb`它时它执行得很好，但是我如何从 ruby​​ 脚本中运行这个带有延迟作业的方法？希望这是有道理的

---myscript.rb---

```
ENV['RAILS_ENV'] = ARGV.first || ENV['RAILS_ENV'] || 'development'
require File.expand_path(File.dirname(__FILE__) + "/../config/environment")

def populate

    #do some stuff here

end
handle_asynchronously :populate 
```

我得到一个**未定义的方法“handle_asynchronously”**错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T01:01:13.093

我认为 handle_asynchronously 仅适用于方法而不适用于顶级函数。也许你可以像这样声明一个模块：

```
# scripts/myscript.rb
class Tasks
  def populate
    puts "Populating..."
  end
  handle_asynchronously :populate
end
# call it in some function
def my_user_task
  Tasks.new.populate
end 
```

# magento - Magento：澳元显示为默认货币，而默认设置为美元

> ID：11029369
> 
> 赞同：0
> 
> 时间：2012-06-14T08:29:45.760
> 
> 标签：magento

我们的服务器上安装了一个 magento 1.5.1。因为默认货币设置为美元，但不知何故，产品以澳元显示。我检查了系统 > 配置 > 货币设置，并再次将默认网站和默认商店视图货币设置为美元。但是，无济于事。

**编辑**：我注意到它选择了允许货币列表中的第一个。我取消了澳元，然后它开始选择英镑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T11:18:25.830

你确定你已经为你的商店视图设置了它吗？检查您的网站范围，确保没有为您的商店视图设置它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T15:07:05.297

之所以发生这种情况，是因为早期的开发人员编写了一个检测国家并分别选择国家的代码。

现在，由于在允许的货币与检测到的国家之一不匹配的情况下，它默认回到第一个允许的货币。

# php - WordPress 简单购物车教程？

> ID：11029376
> 
> 赞同：0
> 
> 时间：2012-06-14T08:30:30.003
> 
> 标签：php, wordpress, e-commerce

是否有任何可用的简单 WordPress 简单购物车插件教程..我不想使用我需要从头开始创建的插件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T10:04:28.943

你想要一个插件，但你不想要一个插件？-没有得到你

无论如何，请查看教程 [http://www.tipsandtricks-hq.com/ecommerce/wordpress-simple-shopping-cart-video-tutorial-969](http://www.tipsandtricks-hq.com/ecommerce/wordpress-simple-shopping-cart-video-tutorial-969)
[http://www.hostingformula.net/search/simplecart-wordpress-tutorial /](http://www.hostingformula.net/search/simplecart-wordpress-tutorial/)

# php - 来自 JQuery .ajax() 调用的空白响应消息长度为 13 个字符？

> ID：11029377
> 
> 赞同：2
> 
> 时间：2012-06-14T08:30:30.377
> 
> 标签：php, jquery

我正在使用 JQUERY .ajax() 使用 PHP 将序列化的表单数据发送到 MySQL。如果处理数据时出现问题，被调用的后端 PHP 将返回一条消息。然后，我的 Javascript 函数会在决定下一步做什么之前检查返回的消息。如果消息长度为'0'，则表示发帖成功，可以继续发帖。如果消息长度 > '0'，那么在表单处理过程中一定发生了错误，它会在那里捕获以处理它。但是，在测试时，我发现成功处理我的表单数据，返回了一条大小为 13 的消息，即使消息本身是空白的。

我使用的javascript函数如下。我已经对其进行了修改以测试超过 13 个字符的消息长度，现在它工作正常。我只是好奇为什么空白响应的长度是 13 个字符。忽略复杂的 .load() 语句，它们只是根据是否检测到错误消息将用户返回到不同的页面。

```
$("button#update").click(function() {
    var cat = $("select#cat_select").val();
    var dataString = $("form#project_update").serialize();
      $.ajax({
      type: "POST",
      url: "process.php",
      data: dataString,
      dataType: 'text', 
      success: function( msg ) {
        console.log('msg is ' + msg);
        length = msg.length;
        console.log('length is ' + length);
        if (length > 13) { // no idea why a blank msg has a length of 13!!
          alert(msg);
          $("#main").load('?app=$app&func=$func&sub=ajax&ajaxSub=edit_project&cat=' + cat + '&proj_id=' + $proj_id).fadeIn('fast');
        }
        else {
          $("#main").load('?app=$app&func=$func&sub=ajax&ajaxSub=project_detail&cat=' + cat + '&proj_id=' + $proj_id).fadeIn('fast');
        }
      }
    });
    return false;
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T08:37:00.890

检查`<?php`和`?>`标签之外的硬编码空格。我想脚本通过ajax调用自己，对吧？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T08:32:56.647

代替

```
length = msg.length; 
```

尝试

```
length = msg.replace(/\s/g,'').length 
```

### 笔记

但是你应该确保`<?php`和`?>`标签中没有空格或换行符，如果你删除它们会更好。

# jquery - 使用 JAVA 将包含 JQuery 的 JSP 转换为 PDF

> ID：11029378
> 
> 赞同：0
> 
> 时间：2012-06-14T08:30:38.977
> 
> 标签：jquery, jsp, pdf

有人可以帮助我吗？

我必须将 JSP 页面转换为 PDF 文件。该 JSP 页面具有 HTML 标记、JQuery (Sparklines)，并从 MySQL 检索数据。

我试过 iText，但它不适用于我的项目。我用 JQuery 绘制的重要图表在转换为 PDF 时消失了。（我使用的是 iText 1.4.3 版本。它很旧，但我在新版本时遇到了问题。）

我还看到很多人谈论 FOP、Apache PDFBox、wkhtmltopdf 和其他许多东西。但是，我自己很难理解和研究所有这些文件。我也尝试使用 iReport，但我认为它不适合我的报告风格。

请注意，我对 JSP 非常陌生，而不是 JAVA 专家。此外，我的项目必须只使用开源工具。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T09:14:10.207

对于 ploats 在 jsp 的情况下生成图像。不要以为你用 jQuery + html5 和画布生成的精美图表适用于 pdf。

如果生成 PDF，请使用图像。

# c# - 原始输入或全局挂钩来捕获击键？

> ID：11029382
> 
> 赞同：0
> 
> 时间：2012-06-14T08:30:48.837
> 
> 标签：c#, .net, capture, keystrokes

我有一个捕获击键的应用程序。但是我读过一些关于win7问题的信息，如果钩子在几秒钟内没有响应，钩子就会被终止。正因为如此，有些人认为原始输入更好。但是我真的不知道这两个的区别。

它们之间有什么区别？您可以在原始输入中捕获 shift/alt/ctrl 按键吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T08:33:01.627

过去，我在未注册的全局键盘挂钩上遇到了同样的问题。在注册表中调整以下值解决了这个问题：

```
[HKEY_CURRENT_USER\Control Panel\Desktop]
"LowLevelHooksTimeout"=dword:00002710 
```

# git - 当我必须在 git 中使用取消引用时，为什么？

> ID：11029383
> 
> 赞同：2
> 
> 时间：2012-06-14T08:30:53.467
> 
> 标签：git, dereference

当我执行命令时，我们使用标签来部署版本：

```
git ls-remote -t origin 
```

我可以看到这样的图片

```
d5a0a2513d71dd94522039d9844daf8b8eed531f    refs/tags/live-0.0.1
43a6228d4bf5839aa934b541c35d19b897b35056    refs/tags/live-0.0.1^{}
a8662ef8bf021ea349dbf56970fd9f62f97093fb    refs/tags/live-0.0.2
b48d63ff5af0c9f488f99c2066824c8891ae394e    refs/tags/live-0.0.3 
```

我在本地代表上找不到此修订版**d5a0a2513d71dd94522039d9844daf8b8eed531f**。请解释一下，我们什么时候必须使用解引用？也许有人知道为什么它是在我的情况下完成的？（也许它是由我完成的，但我不记得了，也许正在测试某些东西）以及为什么我在本地代表处看不到这个提交**d5a0a2513d71dd94522039d9844daf8b8eed531f**？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T13:02:05.207

在 git 中，SHA-1 哈希用于识别所有对象，而不仅仅是提交。对象类型包括：

*   树木
*   斑点
*   提交（修订）
*   标签

并非所有标签都有自己的 SHA-ID。有两种类型的标签：

*   轻量级（没有消息，它们更像是一个无法移动的分支）
*   带注释的（创建为单独的对象，因为标签消息必须保存在某处）

带注释的标签包含消息和提交 SHA-ID，它作为取消引用的结果（`43a6228`在您的情况下）呈现，并被标识为具有 ID（`d5a0a25`）的对象，这是检索标签消息所必需的。

因此，如果您正在寻找提交标识符，您总是需要取消引用标签。无论如何，任何标签名称本身始终是一个有效的提交标识符。

# ios - 无法将框架正确导入 xcode 项目

> ID：11029384
> 
> 赞同：0
> 
> 时间：2012-06-14T08:30:54.217
> 
> 标签：ios, xcode4, import, workspace

我正在尝试将 KKGridView 添加到我的项目中。我已尽我所能从 github 中遵循他们的描述：

*   在 Xcode 中与现有 *.xcodeproj 相同的目录中创建一个新工作区。
*   拖入你现有的 Xcode 项目
*   找到您的 KKGridView 副本，将 KKGridView.xcodeproj 拖到工作区中，使其保持在层次结构的顶部，就像您的原始项目一样。
*   在原始项目的 Build Phases 部分，将您的项目与 libKKGridView.a 链接。
*   现在，只需像 Apple 框架一样导入 KKGridView：

但是 libKKGridView 在我的项目中显示为红色，我无法导入任何代码

```
#import <KKGridView/KKGridView.h> 
```

![在此处输入图像描述](../Images/99e69774281b40aa01dc4658ff3bc487.png)

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T08:44:19.867

将此文件物理复制到您的文件夹，然后从那里将文件添加到 xcode。拖放有时会产生此问题。希望这对您有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T08:32:09.307

您还需要导入 .h 文件

# java - 将 J2SE 画布作为 J2ME Midlet 运行 - Java

> ID：11029389
> 
> 赞同：2
> 
> 时间：2012-06-14T08:31:06.930
> 
> 标签：java, java-me, midp, lcdui

我使用示例游戏 + 源创建了一个 Space Invaders 游戏。使用现有资源，我花了 3 天时间编写游戏代码，并花了 4 天时间尝试让它在手机上运行。

**可运行的 jar 文件可以在我的 PC 上运行，但不能在手机上运行。**

*   有什么方法可以将我的画布应用程序转换为 J2ME 移动应用程序，而无需重新编码所有内容？
*   有什么办法可以更改清单文件以使其正常工作？
*   添加“j2se 应用程序的 j2me 容器”以使其工作？
*   或任何其他解决方案？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T08:58:36.260

您不能在仅支持 J2ME 的手机上运行 J2SE 应用程序。将这样的应用程序移植到 J2ME 也不容易，因为`Canvas`在 MIDP 中是不同的并且非常有限。

# c# - Silverlight 5 使用 clientaccesspolicy.xml 在浏览器中具有提升的权限

> ID：11029399
> 
> 赞同：4
> 
> 时间：2012-06-14T08:31:46.227
> 
> 标签：c#, silverlight, silverlight-5.0

我正在尝试让我的 silverlight 应用程序在浏览器中以提升的权限运行。但是，无论我做什么，它都没有得到提升。

我尝试添加注册表项 AllowElevatedTrustAppsInBrowser（作为值为 1 的 DWORD），并使用 VS 2012 对 XAP 文件进行了签名。我还遇到了一个提到 clientaccesspolicy.xml 文件的博客，但我无法允许使用此提升权限任何一个。我将 xml 文件放在托管显示 XAP 的 html 文件的 Web 项目中。

有没有人真的设法让它运行？

我也尝试过以下操作：http: [//mtaulty.com/CommunityServer/blogs/mike_taultys_blog/archive/2011/04/27/silverlight-5-beta-rough-notes-trusted-apps-in-the-browser.aspx](http://mtaulty.com/CommunityServer/blogs/mike_taultys_blog/archive/2011/04/27/silverlight-5-beta-rough-notes-trusted-apps-in-the-browser.aspx)但是我不确定在哪里运行他在 Windows 上运行的命令。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-14T09:04:04.703

*Goodcat 先生* [在此处](http://www.pitorque.de/MisterGoodcat/post/Silverlight-5-Tidbits-Trusted-applications.aspx)对如何启用浏览器内提升的信任进行了很好的总结，他还提供了一些故障排除技巧：

*   要记住的一件事是，即使您的应用程序作为受信任的浏览器内应用程序运行，它仍然受到浏览器本身施加的安全限制的约束。这意味着它的可能性可能比浏览器用尽时受到的限制要大得多，例如通过 Internet Explorer 的保护模式。此外，Silverlight 运行时本身限制了浏览器内受信任应用程序的某些功能的使用，例如，当您在浏览器中运行时，您不能使用 Window 类和/或创建其他窗口。

*   如果以上都不适用于您并且您仍然遇到问题，那么要做的一件事是检查您的证书是否已正确安装。为此，管理控制台有一个管理单元。[这](http://technet.microsoft.com/en-us/library/cc725849%28v=WS.10%29.aspx)是一篇描述如何到达那里的文章（请注意，您应该为您的用户帐户添加一个管理单元，而不是本描述中的计算机帐户）。

*   您还可以检查您的注册表项是否实际并成功查询，例如使用[Sysinternals Suite](http://technet.microsoft.com/en-us/sysinternals/bb842062)中的 Process Monitor 之类的工具。注意访问我们上面创建的密钥的浏览器可执行文件类型为“ReqQueryValue”的操作，并确保结果为“SUCCESS”。

# python - 在最小的 Ubuntu 上使用 OpenCV 进行视频捕获

> ID：11029400
> 
> 赞同：0
> 
> 时间：2012-06-14T08:31:51.910
> 
> 标签：python, ubuntu, opencv, video-capture

我正在尝试使用 Python 编写一个带有 openCV 的小型测试应用程序，以从网络摄像头捕获帧。我的系统非常小，因此我安装了一个带有 Fluxbox 的最小 Ubuntu。我无法使用 openCV 进行任何视频捕获。当我在更完整的 Ubuntu 安装（例如桌面、Xubuntu 甚至 Lubuntu）上尝试相同的代码时，我能够轻松捕获视频。

我的结论是我的最小 Ubuntu 安装缺少一些东西，我正在尝试找出它是什么。

至于细节：我确实看到我的相机列出了我运行“lsusb”另外，当我执行时：

```
cap = cv.CaptureFromCAM(0) 
```

我确实得到了一个有效的捕获对象。但是当我尝试时：

```
frame = cv.QueryFrame(cap) 
```

我得到一个空对象。

我使用 apt-get 安装了 python-opencv，而不是自己构建它。它似乎在 Xubuntu、Lubuntu 等上运行良好。

在此先感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T12:38:34.797

我之前也遇到过同样的问题，你必须在你的电脑上安装 FFMEPG 库才能使用这个功能，然后你必须再次执行 cmake 并重新编译 opencv 库

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-09-20T11:09:59.253

如果你使用python，你可以安装

```
pip install opencv-python 
```

那么你可以使用

```
import cv2
cap = cv2.VideoCapture(0)

while True:
    ret, img = cap.read()
    cv2.imshow('video', img)
    if cv2.waitKey(1) & 0xFF == ord('q'):
        break
cap.release()
cv2.destroyAllWindows() 
```

它适用于任何最小设置。谢谢。

# android - XML pre-honeycomb 中的旋转（非动画）视图？

> ID：11029401
> 
> 赞同：1
> 
> 时间：2012-06-14T08:31:53.090
> 
> 标签：android, xml, layout, rotation

是否可以使用 Honeycomb 之前的 API 旋转 XML 中的视图 - 也许使用支持包？或者是创建自定义类的唯一方法，如此处所述[Vertical (rotated) label in Android](https://stackoverflow.com/questions/1258275/vertical-rotated-label-in-android)

编辑：我需要的是一个静态旋转的视图（特别是一个TextView，但我想知道如何使用视图就足够了）。从蜂窝开始，有一个可以在 XML 中使用的旋转属性。我需要这样的东西。

到目前为止，我唯一发现的是使用持续时间为 0 的动画，但这仍然在开始时移动了一点，我不希望这样。我尝试将视图设置为不可见并将侦听器附加到动画，这使得它们在动画完成回调时可见，但这产生了奇怪的结果......由于某种原因改变了视图的位置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T21:36:49.653

最好的方法是使用您链接到的自定义子类实现，您可以在其中旋转画布并适当地调整视图大小。这可确保视图边界也设置为与绘制的文本相匹配。

在 HC 之前从外部转换视图的唯一方法是动画框架，并将`Animation`持续时间为 0 并`fillAfter`设置为 true的视图应用到**将起作用**，但您可能会注意到在某些设备上闪烁，因为视图通常会在其上正常呈现第一帧，然后从该点开始动画到其最终位置。您可以通过隐藏视图并稍晚显示它来解决此问题......但您可以看到黑客如何开始堆积起来。

此外，在`Animation`HC 之前进行操作不会改变视图边界本身，因此您将无法在此视图周围整齐地打包其他视图，因为从布局角度来看，它的位置仍然是为水平计算的矩形（非旋转）文本。

简单的子类绝对是首选方法。

高温高压

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T10:58:15.923

> 是否可以使用 Honeycomb 之前的 API 来旋转 XML 中的视图

有`RotateAnimation`。但是，根据您要完成的任务，这可能无法满足您的需求。

# java - 如何在java中创建bitset类对象数组？

> ID：11029403
> 
> 赞同：2
> 
> 时间：2012-06-14T08:31:56.713
> 
> 标签：java, arrays, object, bitset

我有 10101、1000、11101、.... 等数字。我想使用 bitset 类存储这些数字，但不知道该怎么做？请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T08:48:16.603

标准 Java SE API 中有一个[BitSet](http://docs.oracle.com/javase/7/docs/api/java/util/BitSet.html)实现，您应该尝试使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T08:33:50.477

您应该改用字节数组。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T09:00:22.457

如果要使用二进制数表示来创建`BitSet`，可以分两步完成：

*   使用将字符串和基数作为参数的[BigInteger构造函数。](http://docs.oracle.com/javase/7/docs/api/java/math/BigInteger.html)对于二进制，基数为 2。

*   通过使用[BitSet.valueOf()](http://docs.oracle.com/javase/7/docs/api/java/util/BitSet.html#valueOf%28byte%5B%5D%29)调用[BigInteger.toByteArray()](http://docs.oracle.com/javase/7/docs/api/java/math/BigInteger.html#toByteArray%28%29)`BitSet`从 的字节数组表示中初始化 a 。`BigInteger`

例如

```
BigInteger a = new BigInteger("10101", 2); //base 2 for binary
BitSet aBits = BitSet.valueOf(a.toByteArray()); 
```

`BitSet.valueOf()`是 Java 7 中的新功能，因此不适用于早期的 Java 版本。

编辑：

如果您不喜欢`BigInteger`使用字符串进行初始化并且您的二进制数适合 64 位，您也可以使用 Java 7 的[二进制文字](http://docs.oracle.com/javase/7/docs/technotes/guides/language/binary-literals.html)`BigInteger`并使用[BigInteger.valueOf(long)](http://docs.oracle.com/javase/7/docs/api/java/math/BigInteger.html#valueOf%28long%29)方法进行初始化。

# sharepoint - 在 .Net Framework 4.0 应用程序中从 Sharepoint 2010 读取共享文档

> ID：11029404
> 
> 赞同：1
> 
> 时间：2012-06-14T08:32:00.360
> 
> 标签：sharepoint, .net-4.0, sharepoint-2010

**我必须在我的控制台应用程序中从 Sharepoint 的所有站点/子站点读取共享文档，该应用程序将在安装 Sharepoint 的同一台机器上运行，但它将基于 .Net Framework 4.0**。我相信，Sharepoint Server Objects 是基于 Framework 3.5，所以我想出了创建自定义 Web 服务的想法，该服务读取和返回文档列表。我创建了[本博客](http://blog.sharepointbits.com/2010/04/custom-wcf-services-in-sharepoint-2010_17.html)中提到的自定义服务，它运行良好。这是我在我的一种 Web 服务方法中读取文档的代码。

```
SPWebApplication webApp = SPContext.Current.Site.WebApplication;
            #region Traverse all sub sites
            foreach (SPSite subSite in webApp.Sites)
            {
                using (SPWeb sWeb = subSite.OpenWeb())
                {
            foreach (SPList list in sWeb.Lists)
            {
                if (list.BaseType == SPBaseType.DocumentLibrary &&
                                    list.Hidden == false && list.BaseTemplate == SPListTemplateType.DocumentLibrary &&
                                    list.Title.Equals("Style Library", StringComparison.InvariantCultureIgnoreCase) == false &&
                                    list.Title.Equals("Site Assets", StringComparison.InvariantCultureIgnoreCase) == false) 
```

但是，一旦我到达下一行“ **foreach（sWeb.Lists 中的SPList 列表）** ”，它就会抛出“ **'System.Threading.ThreadAbortException'** ”类型的异常

即使我尝试让列表计数高于此 foreach 循环**sWeb.Lists.count**，它仍然会引发相同的异常。请帮助我在这里做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T13:28:40.420

查看[SharePoint 客户端对象模型](http://msdn.microsoft.com/en-us/library/ee857094.aspx)。它提供了一种调用 SharePoint Web 服务的简单方法。在客户端应用程序中使用服务器对象模型很棘手，并且不能提供良好的身份验证技术。我相信您的问题在于身份验证，因为您无法为服务器对象模型设置凭据。

# export-to-excel - 带有货币价值的 Radgrid 导出

> ID：11029409
> 
> 赞同：1
> 
> 时间：2012-06-14T08:32:18.503
> 
> 标签：export-to-excel, radgrid

我正在使用 radgrid 导出到 excel 文件。一切都很好，除了一件事。我想将值格式化为货币样式，但导出完成时，样式是会计

我赶上事件

```
grid_ExcelExportCellFormatting(object source, ExcelExportCellFormattingEventArgs e) 
```

我处理如下

```
e.Cell.Style["mso-number-format"] = "Currency"; 
```

请帮忙！

* * *

**[2012 年 6 月 28 日编辑]** 遵循 Daniel Benitez 提供的链接。我解决了这个问题。我有一些经验。

有兴趣可以参考[我的个人文章](http://kimcuhoang.blogspot.com/2012/06/radgrid-export-to-excel-with-custom.html)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T11:17:35.170

Microsoft 有关 Office HTML 格式的文档不足且含糊不清。您可以在下面看到它：http: [//msdn.microsoft.com/en-us/library/aa155477%28office.10%29.aspx](http://msdn.microsoft.com/en-us/library/aa155477%28office.10%29.aspx)

（自解压存档中包含一个 CHM 文件，您可能更愿意手动解压缩）

如果这不适用于您的方案，您可以使用模仿默认货币格式的自定义数字格式。下面提供了一些示例：

[http://niallodoherty.com/post.cfm/basic-html-to-excel-formatting](http://niallodoherty.com/post.cfm/basic-html-to-excel-formatting)

[http://agoric.com/sources/software/htmltoExcel](http://agoric.com/sources/software/htmltoExcel)

[http://cosicimiento.blogspot.com/2008/11/styling-excel-cells-with-mso-number.html](http://cosicimiento.blogspot.com/2008/11/styling-excel-cells-with-mso-number.html)

[http://www.telerik.com/help/aspnet-ajax/grid-html-export.html](http://www.telerik.com/help/aspnet-ajax/grid-html-export.html)

您可以尝试的另一件事是一些类似逆向工程的方法。即：

*   导出文件，然后在 Excel 中打开
*   将货币格式设置为工作表左上角的单元格
*   将文件另存为 HTML
*   在 Notepad++ 或替代文本编辑器中打开它并检查 MS Excel 如何设置它:)

我希望这有帮助 ：）

# php - 我在 codeIgniter 中的身份验证是正确的

> ID：11029410
> 
> 赞同：0
> 
> 时间：2012-06-14T08:32:22.797
> 
> 标签：php, codeigniter

```
 if($this->session->userdata('admin') === false)
    {
        $this->load->helper('form');
        $data['content'] = $this->load->view(ADMIN.'login', null, true);
        $this->load->view(ADMIN.'layout', $data);

        return false;
    } 
```

所以这是控制器管理中的代码，函数构造函数。

它检查管理会话是否为真，问题是这种类型的授权有多糟糕，通过在构造函数中检查它？因为用户在没有通过构造函数之前不能使用这个控制器中的其他功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T08:43:14.647

```
Class AdminPanel extends CI_Controller{
  function __construct(){
    if($this->session->userdata('admin') === false)
      redirect(site_url());
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T09:29:12.657

做一个图书馆，在里面做所有的检查。`isAdmin();`将此库加载到您的控制器后，您可以在控制器代码的任何部分使用您的 - 例如- 函数。

# java - Java 正则表达式嵌套

> ID：11029411
> 
> 赞同：1
> 
> 时间：2012-06-14T08:32:28.527
> 
> 标签：java, regex

我对 JAVA 中的正则表达式有很大的疑问（花 3 天！！！）。这是我的输入字符串：

```
#sfondo: [#nome: 0, #imga: 0],#111: 222, #p: [#ciccio:aaa, #caio: bbb] 
```

我需要将此字符串解析为数组树，必须像这样匹配：

```
group: #sfondo: [#nome: 0, #imga: 0]
group: #111: 222
group: #p: [#ciccio:aaa, #caio: bbb] 
```

有或没有嵌套括号

我试过这个：

```
"#(\\w+):(.*?[^,\]\[]+.*?),?" 
```

但是这个组由每个元素用“，”分隔，也在括号内

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T08:57:45.590

试试这个：

```
import java.util.regex.*;

class Untitled {
  public static void main(String[] args) {
    String input = "#sfondo: [#nome: 0, #imga: 0],#111: 222, #p: [#ciccio:aaa, #caio: bbb]";
    String regex = "(#[^,\\[\\]]+(?:\\[.*?\\]+,?)?)";
    Pattern pattern = Pattern.compile(regex);
    Matcher matcher = pattern.matcher(input);

    while (matcher.find()) {
      System.out.println("group: " + matcher.group());
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T08:49:08.070

这似乎适用于您的示例：

```
 String input = "#sfondo: [#nome: 0, #imga: 0],#111: 222, #p: [#ciccio:aaa, #caio: bbb]";
    String regex = "#\\w+: (\\[[^\\]]*\\]|[^\\[]+)(,|$)";
    Pattern p = Pattern.compile(regex);
    Matcher matcher = p.matcher(input);
    List<String> matches = new ArrayList<String>();
    while (matcher.find()) {
        String group = matcher.group();
        matches.add(group.replace(",", ""));
    } 
```

**编辑：**
这仅适用于嵌套深度为 1。没有办法用正则表达式处理任意深度的嵌套结构。请参阅[此](https://stackoverflow.com/a/133684/1343161)答案以获取更多说明。

# javascript - jstree，禁用文件节点

> ID：11029413
> 
> 赞同：1
> 
> 时间：2012-06-14T08:32:43.620
> 
> 标签：javascript, jquery, jstree

我如何禁用文件节点，以便树只显示文件夹而不显示文件，这是我目前的代码，

```
$(document).ready(function () {

//$("#MySplitter").splitter();
setupSplitter();

$("#divJsTreeDemo").bind("select_node.jstree", function (e, data) {
    //        if (document.location.href != data.rslt.obj.children("a").attr("href")) {
    //            document.location.href = data.rslt.obj.children("a").attr("href");
    //  

    var id = data.rslt.obj.attr("id").replace("node", "");

    //        var tree = jQuery.jstree._reference("#divJsTreeDemo");
    //        var currentNode = tree._get_node(null, false);
    //        tree.refresh(currentNode);

    GetChildObjects(id);

}).delegate("a", "click", function (e) {

    //$("#divJsTreeDemo").jstree("toggle_node", this);

}).jstree({
    "themes": {
        "theme": "default",
        "dots": false,
        "icons": false
    },
    "plugins": [
           "core", "themes", "json_data", "types", "ui"
    ],
    "types": {
        // I set both options to -2, as I do not need depth and children count checking
        // Those two checks may slow jstree a lot, so use only when needed
        "max_depth": -2,
        "max_children": -2,
        // I want only `drive` nodes to be root nodes 
        // This will prevent moving or creating any other type as a root node
        "valid_children": ["drive"],
        "types": {
            // The default type
            "default": {
                // I want this type to have no children (so only leaf nodes)
                // In my case - those are files
                "valid_children": "none",
                // If we specify an icon for the default type it WILL OVERRIDE the theme icons
                "icon": {
                    "image": "../../Repository/Images/file.png"
                }
            },
            // The `folder` type
            "folder": {
                // can have files and other folders inside of it, but NOT `drive` nodes
                "valid_children": ["default", "folder"],
                "icon": {
                    "image": "../../Repository/Images/folder.png"
                }
            }
        }
    },
    "json_data": {
        "ajax": {
            "type": "POST",
            "url": "GetTreeNodes",
            "data": function (n) {
                return { id: n.attr ? n.attr("id").replace("node", "") : 0 };
            },
            "async": true,
            "success": function (data) {

                RenderFileFolder(data);

            }
        }
    }

});

}); 
```

# symfony - Doctrine2 多对一双向关系不起作用

> ID：11029415
> 
> 赞同：3
> 
> 时间：2012-06-14T08:32:51.897
> 
> 标签：symfony, doctrine, doctrine-orm

我正在尝试在 2 个实体之间进行双向关联。问题是我可以从书中获得他们的所有者，但从所有者那里我无法获得拥有的书籍。

这是代码的重要部分：

**Acme\BookBundle\实体\书籍；**

```
/**
 * @ORM\ManyToOne(targetEntity="Acme\UserBundle\Entity\User", inversedBy="owned_books")
 * @ORM\JoinColumn(name="owner_id", referencedColumnName="id")
 */
protected $owner;

/**
 * Get owner
 *
 * @return Acme\UserBundle\Entity\User 
 */
public function getOwner()
{
    return $this->owner;
} 
```

**Acme\UserBundle\实体\用户；**

```
/**
 * @ORM\OneToMany(targetEntity="Acme\BookBundle\Entity\Book", mappedBy="owner")
 */
protected $owned_books;

public function __construct()
{
    $this->owned_books = new \Doctrine\Common\Collections\ArrayCollection();
}

/**
 * Get owned_books
 *
 * @return Doctrine\Common\Collections\Collection 
 */
public function getOwnedBooks()
{
    return $this->owned_books;
} 
```

然后，要获取数据：

**这个作品**

```
$book = $this->getDoctrine()
  ->getRepository('BookBundle:Book')
  ->find(1);

$owner = $book->getOwner()->getFirstName(); 
```

**这不起作用**（给出致命错误：调用未定义的方法 Doctrine\ORM\PersistentCollection::getName() ）

```
$owner = $this->getDoctrine()
    ->getRepository('UserBundle:User')
    ->find(1);

$books = $owner->getOwnedBooks()->getName(); 
```

有谁知道我做错了什么？先感谢您。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-14T08:43:03.690

$owner->getOwnedBooks() 是所有者的集合。尝试使用 foreach 循环遍历集合。

```
$books = $owner->getOwnedBooks();
foreach ($books as $book) {
    echo $book->getName() . ' <br/>';
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-14T08:42:41.727

错误消息非常清楚：您正在尝试获取书籍集合的名称，而不是尝试获取单本书的名称。

# asp.net-mvc - 通过 MVC 强制使用自定义 HtmlHelper 扩展

> ID：11029418
> 
> 赞同：0
> 
> 时间：2012-06-14T08:33:01.423
> 
> 标签：asp.net-mvc, html-helper

Asp.net MVC 提供了很多（并且非常有用的）`HtmlHelper`扩展。但是，如果我要提供一个带有一些扩展方法的微型子框架来扩展现有的方法呢？

即可`BeginForm`能被重写为更丰富（总是添加防伪令牌等安全内容。

## 问题

为了不重写**所有**Asp.net MVC 的 HTML 辅助方法，我该如何强制使用我的方法？这样使用通常`BeginForm`会引发异常或首先无法访问。`System.Web.Mvc.Html`如果不从视图的文件夹*web.config*文件中删除命名空间，第二个选择可能是不可能的。这意味着**所有**这些助手都需要重写。这是我不想做的事情。

问题是，当使用这个微型子框架时，出于安全原因，它应该防止使用标准助手。时期。

我还有哪些其他选择？

## 例子

假设我只会写我自己的`BeginForm`，我会打电话`BeginSecureForm`，所以有人会把它用作：

```
@using Html.BeginSecureForm() {
    ...
    @Html.EditorFor(m => m.Something)
    ...
} 
```

如您所见，我也使用了自定义助手和标准`EditorFor`助手。这意味着`System.Web.Mvc.Html`仍然包含使用非自定义帮助器，如`EditorFor`.

只要您使用我的自定义帮助方法，上面的代码就可以正常工作......但是如果一些开发人员忘记这样做并使用正常的方法怎么办？

```
@using Html.BeginForm() {
    ...
    @Html.EditorFor(m => m.Something)
    ...
} 
```

那么在这种情况下，我要么想：

*   `Html.BeginForm`根本无法访问
*   `Html.BeginForm`抛出应该使用安全版本的异常
*   可以做任何其他我不知道的事情来防止使用标准`BeginForm`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T09:44:52.263

实现这一目标的一种可能性是编写自定义`WebViewPage`并使用自定义覆盖`Html`属性：

```
public abstract class MyWebViewPage<T> : WebViewPage<T>
{
    public override void InitHelpers()
    {
        this.Ajax = new AjaxHelper<T>(ViewContext, this);
        this.Html = new MyHtmlHelper<T>(ViewContext, this);
        this.Url = new UrlHelper(ViewContext.RequestContext);
    }

    public new MyHtmlHelper<T> Html { get; set; }
} 
```

这是自定义`MyHtmlHelper<T>`类，您将在其中废弃您不希望开发人员直接使用的方法：

```
public class MyHtmlHelper<T>: HtmlHelper<T>
{
    public MyHtmlHelper(ViewContext viewContext, IViewDataContainer viewDataContainer)
        : base(viewContext, viewDataContainer)
    {
    }

    [Obsolete("Use SecureBeginForm instead", true)]
    public MvcForm BeginForm()
    {
        throw new Exception("Use SecureBeginForm instead.");
    }
} 
```

好的，现在剩下要做的就是切换应用程序中所有 Razor 视图的基本类型。这可以`~/Views/web.config`在您将替换的地方完成：

```
<pages pageBaseType="System.Web.Mvc.WebViewPage"> 
```

和：

```
<pages pageBaseType="MyAppName.Mvc.MyWebViewPage"> 
```

好的，现在您可以将微框架扩展方法写入`MyHtmlHelper`类，从而提供默认方法的自定义安全对应物：

```
public static class MyHtmlHelperExtensions
{
    public static MvcForm SecureBeginForm<T>(this MyHtmlHelper<T> html)
    {
        var rawUrl = html.ViewContext.HttpContext.Request.Url.AbsoluteUri;
        var builder = new UriBuilder(rawUrl);
        builder.Scheme = Uri.UriSchemeHttps;
        var form = new TagBuilder("form");
        form.Attributes["action"] = builder.ToString();
        form.Attributes["method"] = "post";

        html.ViewContext.Writer.Write(form.ToString());
        return new MvcForm(html.ViewContext);
    }
} 
```

现在在任何 Razor 视图中：

```
@using (Html.SecureBeginForm())
{
    ...
} 
```

当你尝试：

```
@using (Html.BeginForm())
{
    ...
} 
```

您会收到编译时错误（假设您已启用 Razor 视图的编译）：

![在此处输入图像描述](../Images/50ebb1f91022ca497f7e6aaf9557f483.png)

或者运行时异常，如果你没有。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T09:48:15.057

您正试图通过**强制开发人员**避免使用`Html.BeginForm`而不是使用安全的来实现应用程序的安全性。假设您以某种方式欺骗了框架不使用，那又`Html.BeginForm`如何？一个甚至不知道的年轻开发者`Html.BeginForm`可以直接在视图中编写表单 HTML 并打破规则！

我认为安全性必须通过不强迫某人使用正确的工具而不是必须在应用程序的更高级别完成来在应用程序中实现。在表单示例本身中，如果发布到服务器的所有 HTML 表单都应该具有防伪令牌，那么我将在 MVC 管道中的更高级别进行检查。如果某些开发人员仍然使用正常形式，该模块将无法工作，并且将在测试阶段进行处理。

# c++ - Visual Studio 调试器不工作

> ID：11029422
> 
> 赞同：1
> 
> 时间：2012-06-14T08:33:08.973
> 
> 标签：c++, visual-studio, debugging, remote-debugging

我正在使用 Microsoft Visual Studio 调试器来调试远程应用程序。这些是我已经完成的步骤

1.  我已经在远程机器（具有 32 位操作系统）中获取了 x86 版本的 msvsmon.exe，其中要调试的应用程序正在运行。我已经使用选项 No authentication 和 Allow any user to debug 启动了 exe。
2.  在 Visual Studio 中，我将调试选项设置为 Win32，转到工具并附加进程。我给出 IP，选择传输类型为远程并尝试启动调试器。但是，我收到以下错误消息——无法连接到“MyMachine”。Microsoft Visual Studio 远程调试监视器未在远程计算机上运行或在 Windows 身份验证模式下运行。

我检查了防火墙设置。如果您对可能出现的问题有任何想法，请提供帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T08:46:33.740

您是否在“附加到进程”对话框中指定了“本机调试”？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T09:36:26.850

如果您正在调试本机代码，则在无身份验证模式下运行远程调试器。MSDN[这里](http://msdn.microsoft.com/en-us/library/ms164723.aspx)有注释。请注意，您必须在此模式下快速（在 30 秒内）连接到远程调试器，否则会超时。

# c# - 无法加载 URI 的内容。URI 可能无效

> ID：11029423
> 
> 赞同：1
> 
> 时间：2012-06-14T08:33:12.570
> 
> 标签：c#, silverlight, exception-handling, silverlight-5.0

我必须说我对此感到很困惑，我希望你们中的一些人可能遇到过同样的问题。我有一个 HyperlinkBut​​ton，创建如下：

```
var hb = new HyperlinkButton
{
     Content = fooText,
     ClickMode = ClickMode.Release,
     NavigateUri = new Uri(fooLink.Value)
};
hb.Click += hb_Click;

static void hb_Click(object sender, RoutedEventArgs e)
{
    var btn = (HyperlinkButton)sender;
    HtmlPage.Window.Navigate(btn.NavigateUri, "_blank");
} 
```

该链接是网站的绝对 URL ( [http://..](http://..) .)，而不是应用程序内部。因此，我想在新的浏览器选项卡中打开它。这正是它的作用！该网站在新选项卡中打开，但在应用程序选项卡中出现此错误：

![在此处输入图像描述](../Images/70d2d3641a64f3d228b492f0e3a4fd97.png)

如果我更改事件处理程序以便没有目标参数，如下所示：

```
HtmlPage.Window.Navigate(btn.NavigateUri); 
```

...错误也出现了，就在浏览器离开应用程序之前。但我想打开一个新标签。

我正在使用 Visual Studio 11 中的 Silverlight 业务应用程序模板，我已经注意到它有一些神秘的错误，这可能就是其中之一。总而言之，它有效，我只需要摆脱错误消息。但是事件处理程序中没有抛出我可以吞下的异常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T14:37:19.790

你可以这样做：

```
var hb = new HyperlinkButton
{
     Content = fooText,
     ClickMode = ClickMode.Release,
     NavigateUri = new Uri(fooLink.Value),
     TargetName = "_blank"
}; 
```

没有 Click 事件处理程序。

它应该以更清洁的方式完全按照您的意愿行事。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T10:21:55.573

试试这个：

```
 /// <summary>
    /// Hyperlink button - simulates hyperlink click
    /// </summary>
    private class HyperlinkButtonWrapper : HyperlinkButton
    {
        public void OpenURL(string navigateUri)
        {
            OpenURL(new Uri(navigateUri, UriKind.Absolute));
        }

        public void OpenURL(Uri navigateUri)
        {
            base.NavigateUri = navigateUri;
            base.TargetName = "_blank";
            base.OnClick();
        }
    }

    /// <summary>
    /// Method opens url
    /// <para>Example: OpenURL("http://www.google.com")</para>
    /// </summary>
    /// <param name="navigateUri"></param>
    public static void OpenURL(string navigateUri)
    {
        new HyperlinkButtonWrapper().OpenURL(navigateUri);
    } 
```

# android - 过渡期间的 jQuery Mobile 闪烁屏幕

> ID：11029427
> 
> 赞同：3
> 
> 时间：2012-06-14T08:33:18.353
> 
> 标签：android, jquery-mobile, flicker

我正在测试一个在 jQuery Mobile 1.1.0 中构建的移动 Web 应用程序。我正在使用在 android 4.0 上运行的 Galaxy Nexus 测试网站应用程序。CSS 滑动过渡有一个令人讨厌的闪烁，我四处寻找修复并发现了这个：

```
.ui-page {
    -webkit-backface-visibility: hidden;
} 
```

但是，当我使用此修复程序时，不会显示具有列表视图的索引页面。请帮我。可能是什么问题呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-02T16:08:22.173

防止“闪烁”的唯一真正方法是完全禁用 jQuery Mobile 页面转换。在您的文档中，放置以下代码：

```
// load your custom jQuery Mobile Defaults
<script type="text/javascript" src="mobile/js/mobile-site-custom-jqm-defaults.js"></script>

// load jQuery Mobile
<script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>

// load your scripts.js (your javascript & functions, etc.)
<script type="text/javascript" src="mobile/js/script.js"></script> 
```

要禁用转换，在 mobile-site-custom-jqm-defaults.js 文件中，放置以下代码：

```
$(document).bind("mobileinit", function(){
  $.extend(  $.mobile , {
   defaultPageTransition: 'none'
  });
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-23T16:10:27.757

我在网络上找到了这个解决方案：
`if (navigator.userAgent.indexOf("Android") != -1) { $.mobile.defaultPageTransition = 'none'; $.mobile.defaultDialogTransition = 'none'; }`
我在使用 cordova 2.2.0、jquery 1.8.2 和 jquery mobile 1.2.0 编写的 Android 应用程序上对其进行了测试。我必须说它有效。我希望 jquery 移动开发团队能够解决过渡闪烁的问题，但现在唯一的方法是将它们全部关闭。我想补充一点，我检查了前 30 次关于该主题的谷歌搜索中被欺骗的所有 CSS。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T05:51:23.383

它对我也不起作用（尤其是在 iOS 中）。然后我用

```
<a href="index.php" data-transition="none">Index</a> 
```

它对我有用。 [页面过渡](http://jquerymobile.com/demos/1.2.0/docs/pages/page-transitions.html)

# php - Zend 调试器 - 无法发送消息

> ID：11029430
> 
> 赞同：0
> 
> 时间：2012-06-14T08:33:26.887
> 
> 标签：php, zend-framework, zend-studio, zend-debugger, zend-server-ce

我在设置 Zend 调试器时遇到了一些问题。我已经安装了 Zend Server CE。我使用 Zend Studio 作为我的开发环境。

在 Debug Configurations 下的 Zend Studio 中，我可以测试 Debugger。一切正常。但是当我尝试调试我的项目时，浏览器会弹出并显示正确的页面，但调试会话直接终止。我在 IndexController 中设置了一个断点，但调试会话直接终止。

在我的 Zend 服务器日志选项卡下，服务器错误日志显示“[Zend 调试器] 无法发送消息”。

有谁能够帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T08:47:10.100

服务器是远程的还是本地的？如果它是远程的，您确定 Zend Debugger 端口允许通过网络吗？您可能需要创建一个 SSH 隧道，如此处所述[http://kb.zend.com/index.php?View=entry&EntryID=109](http://kb.zend.com/index.php?View=entry&EntryID=109)。

# java - 将事件处理程序添加到自定义文本框字段

> ID：11029432
> 
> 赞同：0
> 
> 时间：2012-06-14T08:33:30.640
> 
> 标签：java, gwt, uibinder

再会

我有一个自定义文本框，它有一个 IndicatorTextBox.ui.xml 文件以及 IndicatorTextBox.java 文件。通常向文本框添加一个 evenhadler 很简单。

这是在我的主要 .java 文件中

```
@UiHandler("txtFirstName")
void onTxtFirstNameKeyUp(KeyUpEvent event){ 
validateFields();
} 
```

如果 txtFirstName 是我添加到此页面的带有标签的自定义文本框，我将如何添加处理程序。？因此，换句话说 txtFirstnName 不是**@UiField TextBox txtFirstName**而是**IndicatorTextField txtFirstName**。

IndicatorTextBox.java 文件如下所示

```
import com.google.gwt.core.client.GWT; 
```

公共类 IndicatorTextField 扩展 Composite 实现 HasText{

```
public interface Binder extends UiBinder<Widget, IndicatorTextField> {
}

private static final Binder binder = GWT.create(Binder.class);

public interface Style extends CssResource{
    String textStyling();
    String requiredInputLabel();
    String colorNotValidated();

}

@UiField Style style;
@UiField Label label;
@UiField TextBox textBox;

public IndicatorTextField()
{

    initWidget(binder.createAndBindUi(this));
}

public void setBackgroundValidateTextbox(boolean validated)
{
    if(validated)
    {
        textBox.getElement().addClassName(style.colorNotValidated());
    }
    else
    {
        textBox.getElement().removeClassName(style.colorNotValidated());

    }

}

@Override
public String getText() {

    return label.getText();
}

@Override
public void setText(String text) {
    label.setText(text);

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T08:59:09.567

您的 IndicatorTextField 首先必须实现 HasKeyUpHandlers 接口，从 textBox 捕获 KeyUpEvents 并将它们触发到它的处理程序。

```
公共类 IndicatorTextField 扩展复合实现 HasText，HasKeyUpHandlers {
    ...

    @覆盖
    公共 HandlerRegistration addKeyUpHandler(KeyUpHandler 处理程序) {
        返回 addHandler(handler, KeyUpEvent.getType());
    }

    ...

    @UiHandler("文本框")
    公共无效 onKeyUp（KeyUpEvent 事件）{
        DomEvent.fireNativeEvent(event.getNativeEvent(), this);
    }

}

```

然后在你的主java类中，如果你用uiBinder创建这个IndicatorTextField，那么你可以按常规方式向它添加一个UiHandler

```
@UiField
IndicatorTextField myIndi​​catorTextField;

@UiHandler("myIndi​​catorTextField)
公共无效 onKeyUp（KeyUpEvent 事件）{
    验证字段（）；
}

```

如果您是通过调用构造函数来创建，则在其上调用 addKeyUpHandler

```
IndicatorTextField myIndi​​catorTextField = new IndicatorTextField();
myIndi​​catorTextField.addKeyUpHandler(new KeyUpHandler() {
    公共无效 onKeyUp（KeyUpEvent 事件）{
        验证字段（）；
    }
});

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T08:43:18.903

UiBinder，据我了解这种机制，根据方法签名中的事件类型创建调用，因此您的*IndicatorTextField*必须实现*HasAllKeyHandlers*或只是扩展*FocusWidget*。

# javascript - jquery在单选按钮上的选择上应用css类

> ID：11029438
> 
> 赞同：1
> 
> 时间：2012-06-14T08:34:02.013
> 
> 标签：javascript, jquery, radio-button

i have 3 radio buttons.what i need to do is that when one radio button is selected so i need to apply my css class name "line" on the text after it like

```
 <span> <input type="radio" name="group1" value="Milk">  Milk </span> 
```

我需要在 Milk 上应用我的课程，并且当用户选择其他单选按钮时，相同的课程适用于其他单选按钮文本，但从前一个单选按钮文本中删除课程。这就是我尝试过的

```
<style type="text/css">
    .line{
        text-decoration: line-through;
         }
</style>

<script type="text/javascript">
$(document).ready(function(){
   $("input[type='radio']").change(function(){
      if($(this).is(':checked'))
          //i wana do this
           $(this).addClass('line');
         //if another is selected so do this
           $(this).removeClass('line');
      });
   }); 
```

```
 <div>
  <span> <input type="radio" name="group1" value="Milk">  Milk </span> </br>
  <span> <input type="radio" name="group1" value="Butter"> Butter </span> </br>
  <span> <input type="radio" name="group1" value="Cheese"> Cheese </span> </br>
  <hr>
</div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T08:36:53.660

由于您需要将类添加到`span`，您可以使用从单选按钮[`parent`](http://api.jquery.com/parent/)访问。`span`要从其他`span`元素中删除该类，只需将其从所有有问题的类中删除，然后再将该类添加到`span`刚刚选择的类中：

```
$("input[type='radio']").change(function() {
   if(this.checked) {
      $('span.line').removeClass('line');
      $(this).parent().addClass('line');
   }
}); 
```

这是一个[工作示例](http://jsfiddle.net/6B7sS/)。

请注意使用`this.checked`代替您拥有的 jQuery 版本。在可能的情况下使用本机 DOM 属性要快得多。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-14T08:35:22.213

```
$("input[type='radio']").change(function() {
    console.log(this.checked)
    if (this.checked) {
        // remove previously added line class
        $('span.line').removeClass('line');
        // you should add class to span, because text is
        // within span tag, not in input
        $(this).parent().addClass('line');
    }
}); 
```

**[工作样本](http://jsfiddle.net/n2Jcm/2/)**

# sql-server - Excel VBA 错误 End with with out with？

> ID：11029442
> 
> 赞同：1
> 
> 时间：2012-06-14T08:34:20.983
> 
> 标签：sql-server, excel, vba

嗨朋友们我正在以这种方式将 excel 行导出到 Sql Server 2008 表中，我正在检查表中是否已经存在该行

我的桌子有

sap_code 仓库大小 entry_date

如果存在该记录的表，则跳过该行并使用表检查 excel 的下一行

这是我的工作代码

```
' ===== Export Using ADO =====

Function ExportRangeToSQL(ByVal sourceRange As Range, _
    ByVal conString As String, ByVal table As String) As Integer

    On Error Resume Next

    ' Object type and CreateObject function are used instead of ADODB.Connection,
    ' ADODB.Command for late binding without reference to
    ' Microsoft ActiveX Data Objects 2.x Library

    ' ADO API Reference
    ' http://msdn.microsoft.com/en-us/library/ms678086(v=VS.85).aspx

    ' Dim con As ADODB.Connection
    Dim con As Object
    Set con = CreateObject("ADODB.Connection")

    con.ConnectionString = conString
    con.Open

    ' Dim cmd As ADODB.Command
    Dim cmd As Object
    Set cmd = CreateObject("ADODB.Command")

    cmd.CommandType = 1             ' adCmdText

       ' Dim rst As ADODB.Recordset
    Dim rst As Object
    Set rst = CreateObject("ADODB.Recordset")

    With rst
        Set .ActiveConnection = con
        .Source = "SELECT * FROM " & table
        .CursorLocation = 3         ' adUseClient
        .LockType = 4               ' adLockBatchOptimistic
         .CursorType = 1             ' adOpenKeyset
        .CursorType = 0             ' adOpenForwardOnly
        .Open

        ' Do While Not .EOF
        '    .MoveNext
        ' Loop

        ' Column Mappings

        Dim tableFields(100) As Integer
        Dim rangeFields(100) As Integer

        Dim exportFieldsCount As Integer
        exportFieldsCount = 0

        Dim col As Integer
        Dim index As Integer

        For col = 1 To .Fields.Count - 1
            index = Application.Match(.Fields(col).Name, sourceRange.Rows(1), 0)
            If index > 0 Then
                exportFieldsCount = exportFieldsCount + 1
                tableFields(exportFieldsCount) = col
                rangeFields(exportFieldsCount) = index
            End If
        Next

        If exportFieldsCount = 0 Then
            ExportRangeToSQL = 1
            Exit Function
        End If

        ' Fast read of Excel range values to an array
        ' for further fast work with the array

        Dim arr As Variant
        arr = sourceRange.Value

        ' Column names should be equal
        ' For col = 1 To exportFieldsCount
        '     Debug.Print .Fields(tableFields(col)).Name & " = " & arr(1, rangeFields(col))
        ' Next

        ' The range data transfer to the Recordset

        Dim row As Long
        Dim rowCount As Long
        rowCount = UBound(arr, 1)

        Dim val As Variant

        For row = 2 To rowCount

        ' Testing the Ledger data to insert
        Dim qu As String
        Dim br, de, si, da As String
       br = arr(row, rangeFields(1))  ' sap_code from excel
       de = arr(row, rangeFields(2)) ' depot from excel
       si = arr(row, rangeFields(3)) ' size from excel
       da = arr(row, rangeFields(5)) ' entry_date from excel

     Set con = CreateObject("ADODB.Connection")

    con.ConnectionString = conString
    con.Open

      Dim rstTest As ADODB.Recordset
      Set rstTest = New ADODB.Recordset
      With rstTest
       .CursorLocation = adUseClient
       .Open "select TOP 1 sap_code, depot, size, entry_date from openstock where " + "sap_code='" + br + "' and depot='" + de + "' and size='" + si + "' and entry_date='" + da + "' ORDER BY id DESC", con, adOpenStatic, adLockBatchOptimistic, adCmdText
  MsgBox "SAP_CODE" & br & "Depot" & de & "Size" & si & "entry_date" & da & "Duplicate Entry Not Entered into Database"
         If br = rstTest.Fields("sap_code").Value And _
            de = rstTest.Fields("depot").Value And _
            si = rstTest.Fields("size").Value And _
            da = rstTest.Fields("entry_date").Value Then

            Else

      End With  **NOte:  Error showing here as End With with out With**
            .AddNew
            For col = 1 To exportFieldsCount
                val = arr(row, rangeFields(col))
                If IsEmpty(val) Then
                Else
                    .Fields(tableFields(col)) = val
                End If
            Next
            End If
        Next   **NOte: Problem showing here as Next with out FOR**

        .UpdateBatch

    End With

    rst.Close
    Set rst = Nothing

    con.Close
    Set con = Nothing

    ExportRangeToSQL = 0

End Function 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T08:55:02.207

**建议**：总是缩进你的代码。因此，即使您在 6 个月后查看代码，您也会知道代码的作用。缩进还可以帮助您捕获上面代码中发生的错误

这是一个例子

```
Sub Sample()
    For i = 1 to 5
    For j = 1 to 10
    For k = 1 to 7
    If a = 10 then
    End If
    Next
    Next
    Next
End Sub 
```

相同的代码可以写成

```
Sub Sample()
    For i = 1 to 5
        For j = 1 to 10
            For k = 1 to 7
                If a = 10 then

                End If
            Next
        Next
    Next
End Sub 
```

另一个建议（虽然它不是强制性的）为了更好地理解循环在哪里`For`结束，建议写`Next`为 say `Next i`。

所以上面的代码可以进一步改进为

```
Sub Sample()
    For i = 1 to 5
        For j = 1 to 10
            For k = 1 to 7
                If a = 10 then

                End If
            Next k
        Next j
    Next i
End Sub 
```

如果您实施上述建议，您会注意到您的这部分代码

```
 With rstTest
       .CursorLocation = adUseClient
       .Open "select TOP 1 sap_code, depot, size, entry_date from openstock where " + "sap_code='" + br + "' and depot='" + de + "' and size='" + si + "' and entry_date='" + da + "' ORDER BY id DESC", con, adOpenStatic, adLockBatchOptimistic, adCmdText
  MsgBox "SAP_CODE" & br & "Depot" & de & "Size" & si & "entry_date" & da & "Duplicate Entry Not Entered into Database"
         If br = rstTest.Fields("sap_code").Value And _
            de = rstTest.Fields("depot").Value And _
            si = rstTest.Fields("size").Value And _
            da = rstTest.Fields("entry_date").Value Then

            Else

      End With  **NOte:  Error showing here as End With with out With**
            .AddNew
            For col = 1 To exportFieldsCount
                val = arr(row, rangeFields(col))
                If IsEmpty(val) Then
                Else
                    .Fields(tableFields(col)) = val
                End If
            Next
            End If
        Next   **NOte: Problem showing here as Next with out FOR** 
```

**解决方案**：上面的代码可以重写为

```
For row = 2 To rowCount
    '
    '
    '
    With rstTest
        .CursorLocation = adUseClient
        .Open "select TOP 1 sap_code, depot, size, entry_date from openstock where " + _
        "sap_code='" + br + "' and depot='" + de + "' and size='" + si + _
        "' and entry_date='" + da + "' ORDER BY id DESC", con, adOpenStatic, _
        adLockBatchOptimistic, adCmdText

        MsgBox "SAP_CODE" & br & "Depot" & de & "Size" & si & "entry_date" & da & _
        "Duplicate Entry Not Entered into Database"

        If br = rstTest.Fields("sap_code").Value And _
                de = rstTest.Fields("depot").Value And _
                si = rstTest.Fields("size").Value And _
                da = rstTest.Fields("entry_date").Value Then
        Else
           '~~> Removed End With from here
           'End With  **NOte:  Error showing here as End With with out With**
            .AddNew
            For col = 1 To exportFieldsCount
                val = arr(row, rangeFields(col))
                If IsEmpty(val) Then
                Else
                    .Fields(tableFields(col)) = val
                End If
            Next col
        End If
    End With '<~~ Pasted it here
Next row 
```

# java - javax.mail.MessagingException：无法连接到 SMTP 主机？

> ID：11029444
> 
> 赞同：8
> 
> 时间：2012-06-14T08:34:35.070
> 
> 标签：java, email, servlets

以下是我发送邮件的代码：

```
import java.util.Properties;
import javax.mail.Authenticator;
import javax.mail.Message;
import javax.mail.Message.RecipientType;
import javax.mail.MessagingException;
import javax.mail.PasswordAuthentication;
import javax.mail.Session;
import javax.mail.Transport;
import javax.mail.internet.InternetAddress;
import javax.mail.internet.MimeMessage;
public class SendMail {
    public void sendMail(String m_from,String m_to,String m_subject,String m_body){
      try {
            Session m_Session;
            Message m_simpleMessage;
            InternetAddress m_fromAddress;
            InternetAddress m_toAddress;
            Properties m_properties;

            m_properties     = new Properties();
            m_properties.put("mail.smtp.host", "usdc2spam2.slingmedia.com"); 
            m_properties.put("mail.smtp.socketFactory.port", "465");
            m_properties.put("mail.smtp.socketFactory.class","javax.net.ssl.SSLSocketFactory");
            m_properties.put("mail.smtp.auth", "true");
            m_properties.put("mail.smtp.port", "9000");

            m_Session=Session.getDefaultInstance(m_properties,new Authenticator() {
                protected PasswordAuthentication getPasswordAuthentication() {
                    return new PasswordAuthentication("aaaaa","bbbbb@1"); // username and the password
                }
            });

            m_simpleMessage  =   new MimeMessage(m_Session);
            m_fromAddress    =   new InternetAddress(m_from);
            m_toAddress      =   new InternetAddress(m_to);

            m_simpleMessage.setFrom(m_fromAddress);
            m_simpleMessage.setRecipient(RecipientType.TO, m_toAddress);
            m_simpleMessage.setSubject(m_subject);

            m_simpleMessage.setContent(m_body, "text/html");

            //m_simpleMessage.setContent(m_body,"text/plain");

            Transport.send(m_simpleMessage);
        } catch (MessagingException ex) {
            ex.printStackTrace();
        }
    }
    public static void main(String[] args) {
      SendMail send_mail    =   new SendMail();
      String empName = "xxxxx";
      String title ="<b>Hi !"+empName+"</b>";
      send_mail.sendMail("123erft@slingmedia.com", "abz@gmail.com", "Please apply for leave for the following dates", title+"<br>by<br><b>HR<b>");
    }
} 
```

但是当我运行代码时，它给了我以下异常。

```
javax.mail.MessagingException: Could not connect to SMTP host: usdc2spam2.slingmedia.com, port: 9000;
  nested exception is:
    java.net.ConnectException: Connection refused: connect
    at com.sun.mail.smtp.SMTPTransport.openServer(SMTPTransport.java:1934)
    at com.sun.mail.smtp.SMTPTransport.protocolConnect(SMTPTransport.java:638)
    at javax.mail.Service.connect(Service.java:317)
    at javax.mail.Service.connect(Service.java:176)
    at javax.mail.Service.connect(Service.java:125)
    at javax.mail.Transport.send0(Transport.java:194)
    at javax.mail.Transport.send(Transport.java:124)
    at samples.SendMail.sendMail(SendMail.java:46)
    at samples.SendMail.main(SendMail.java:55)
Caused by: java.net.ConnectException: Connection refused: connect
    at java.net.PlainSocketImpl.socketConnect(Native Method)
    at java.net.PlainSocketImpl.doConnect(Unknown Source)
    at java.net.PlainSocketImpl.connectToAddress(Unknown Source)
    at java.net.PlainSocketImpl.connect(Unknown Source)
    at java.net.SocksSocketImpl.connect(Unknown Source)
    at java.net.Socket.connect(Unknown Source)
    at java.net.Socket.connect(Unknown Source)
    at com.sun.mail.util.SocketFetcher.createSocket(SocketFetcher.java:288)
    at com.sun.mail.util.SocketFetcher.getSocket(SocketFetcher.java:231)
    at com.sun.mail.smtp.SMTPTransport.openServer(SMTPTransport.java:1900) 
```

当我对此进行 ping 操作时`usdc2spam2.slingmedia.com`，它会毫无问题地给我答复。我在用`windows 7`

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-14T11:39:35.667

这是让我遇到问题的这两行：

```
m_properties.put("mail.smtp.socketFactory.port", "465");
  m_properties.put("mail.smtp.socketFactory.class","javax.net.ssl.SSLSocketFactory"); 
```

并添加了这一行：

```
m_properties.put("mail.smtp.starttls.enable", "true"); 
```

删除并添加上述代码行后，它工作正常。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-14T08:41:40.777

导致您的问题的原因就在堆栈跟踪中：

```
java.net.ConnectException: Connection refused: connect 
```

您需要密码才能连接到 SMTP 服务器吗？您确定您使用的是正确的设置（如端口号）？你是在代理还是防火墙后面？您可以在常规邮件程序（例如 Thunderbird）中使用这些设置并发送邮件吗？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-14T08:44:50.417

尝试将端口 9000 添加到 Windows 防火墙的入站规则中。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-14T11:07:58.617

当您尝试连接的端口上没有服务侦听时，通常会发生此异常。

尝试使用`putty`或连接`telnet`。我敢打赌你会得到同样的错误。

验证以下内容：

*   您尝试连接的主机名和端口，
*   服务器正在正确监听，并且
*   没有防火墙阻止连接。

# php - 如何获取字符串的最后一个单词

> ID：11029447
> 
> 赞同：3
> 
> 时间：2012-06-14T08:35:02.513
> 
> 标签：php

我们有那个字符串：

```
"I like to eat apple" 
```

我怎样才能得到结果`"apple"`？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-14T08:36:11.763

```
// Your string
$str = "I like to eat apple";
// Split it into pieces, with the delimiter being a space. This creates an array.
$split = explode(" ", $str);
// Get the last value in the array.
// count($split) returns the total amount of values.
// Use -1 to get the index.
echo $split[count($split)-1]; 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-03-05T17:52:46.730

聚会有点晚了，但这也有效

```
$last = strrchr($string,' '); 
```

根据[http://www.w3schools.com/php/func_string_strrchr.asp](http://www.w3schools.com/php/func_string_strrchr.asp)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-14T08:37:05.570

```
$str = 'I like to eat apple';
echo substr($str, strrpos($str, ' ') + 1); // apple 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-01-09T20:48:40.163

尝试：

```
$str = "I like to eat apple";
end((explode(" ",$str)); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-14T08:37:55.100

试试这个：

```
$array = explode(' ',$sentence);
$last = $array[count($array)-1]; 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-05-31T06:23:39.250

获取字符串的最后一个单词

$string ="我喜欢吃苹果";
$las_word_start = strrpos($string, ' ') + 1; // +1 所以我们的结果中不包含空格
$last_word = substr($string, $last_word_start);
echo $last_word // 最后一个词：苹果

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-12-25T12:33:19.507

仅通过传递您需要的单词数量来获取最后一个单词或简单地从字符串中获取最后一个单词怎么样`get_last_words(1, $str);`

```
public function get_last_words($amount, $string)
{
    $amount+=1;
    $string_array = explode(' ', $string);
    $totalwords= str_word_count($string, 1, 'àáãç3');
    if($totalwords > $amount){
        $words= implode(' ',array_slice($string_array, count($string_array) - $amount));
    }else{
        $words= implode(' ',array_slice($string_array, count($string_array) - $totalwords));
    }

    return $words;
}
$str = 'I like to eat apple';
echo get_last_words(1,  $str); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-03-02T03:04:56.177

```
<?php
// your string
$str = 'I like to eat apple';

// used end in explode, for getting last word
$str_explode=end(explode("|",$str));
echo    $str_explode;

?> 
```

输出将是`apple`.

# android - 如何在android中设置事件onclick listview（多个listview）

> ID：11029451
> 
> 赞同：0
> 
> 时间：2012-06-14T08:35:15.960
> 
> 标签：android, android-listview

我是安卓初学者。我有 3 个选项卡控件（每个选项卡控件都有列表视图）。类 Active I 具有功能：

```
 @Override

    protected void onListItemClick(ListView l, View v, int position, long id) {
        // TODO Auto-generated method stub
        super.onListItemClick(l, v, position, id);
        TextView link=(TextView)findViewById(R.id.txt1);
        link.setText("Hot news >> "+lv_arr[position]);
        LinearLayout llo=(LinearLayout)findViewById(R.id.lout_link);
        Button bt_link=new Button(this);
        bt_link.setText("test");
        llo.addView(bt_link);
    } 
```

它只是使用`listview`（第一个选项卡控件，其他选项卡控件中的列表视图不起作用）。那么如何`onclick`在第二个、第三个 tabcotrol 中设置事件列表视图呢？. 非常非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T08:45:38.327

您可以`onClickListeners`为三个列表设置 3 个不同的值。

请使用以下内容：

```
list1.setOnclickListener(list1ClickListener);
list2.setOnclickListener(list2ClickListener);
list3.setOnclickListener(list3ClickListener); 
```

* * *

和`listItemClickLiteners`：

```
/*Item click listener for the list1 item click event.*/
    final private transient OnItemClickListener list1ClickListener = new OnItemClickListener() {

        /*(non-Javadoc)
         * @see
         * android.widget.AdapterView.OnItemClickListener#onItemClick(android
         * .widget.AdapterView, android.view.View, int, long) */

        @Override
        public void onItemClick(final AdapterView<?> parent, final View view,
                final int position, final long itemID) {
            }

/*Item click listener for the list2 item click event.*/
    final private transient OnItemClickListener list2ClickListener = new OnItemClickListener() {

        @Override
        public void onItemClick(final AdapterView<?> parent, final View view,
                final int position, final long itemID) {
            }

/*Item click listener for the list3 item click event.*/
    final private transient OnItemClickListener list3ClickListener = new OnItemClickListener() {

        @Override
        public void onItemClick(final AdapterView<?> parent, final View view,
                final int position, final long itemID) {
            } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-15T08:23:40.520

Shirikants 回答有效。（只需添加几个大括号）

```
 /* Item click listener for the list1 item click event. */
private transient OnItemClickListener list1ClickListener = new OnItemClickListener() {

    /*
     * (non-Javadoc)
     * 
     * @see
     * android.widget.AdapterView.OnItemClickListener#onItemClick(android
     * .widget.AdapterView, android.view.View, int, long)
     */

    @Override
    public void onItemClick(final AdapterView<?> parent, final View view,
            final int position, final long itemID) {
    }
};

/* Item click listener for the list2 item click event. */
private transient OnItemClickListener list2ClickListener = new OnItemClickListener() {

    @Override
    public void onItemClick(final AdapterView<?> parent, final View view,
            final int position, final long itemID) {
    }
};

/* Item click listener for the list3 item click event. */
private transient OnItemClickListener list3ClickListener = new OnItemClickListener() {

    @Override
    public void onItemClick(final AdapterView<?> parent, final View view,
            final int position, final long itemID) {
    }
}; 
```

# drupal - Drupal 迁移到本地服务器后显示空白页

> ID：11029452
> 
> 赞同：0
> 
> 时间：2012-06-14T08:35:19.507
> 
> 标签：drupal, iis-7.5, migrating

首先是一些背景，..

IVe 在一家托管 2 个 Drupal (6.x) 站点的公司开始了 PHP 开发人员的新工作。

虽然我在 PHP 方面有多年的经验，但 Drupal（实际上通常是现成的内容管理系统）对我来说是一个新的体验。尽管如此，还是有大量的文档，而不是火箭科学，所以那里没有问题。

服务器环境是 IIS（实时服务器 7.0，本地 7.5） IIS 对我来说也是一个全新的野兽，所以它增加了学习曲线。

我已经成功安装了 Drupal (7.x) 以在本地运行，所以我知道服务器已启动并正常运行

当我尝试下拉实时站点时，就会出现问题。我已经在本地复制了数据库，并且我知道它正在连接，但是当我尝试运行本地站点时，我得到一个包含以下源代码的空白页面：

```
 <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html lang="en">
  <head>
    <?include '_inc_head_common.tpl.php';?>
  </head>

  <body id="body">

      <?include '_inc_header.tpl.php';?>
      <?include '_inc_content_3col.tpl.php';?>
      <?include '_inc_footer.tpl.php';?>
  </body>
</html> 
```

所以似乎它已经到了一定程度，没有进一步了..

以前有没有人遇到过这种情况，或者有人可以指出我应该关注的方向吗？

谢谢

凯文

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T14:54:25.253

> 我知道它正在连接，

您是否在 sites/default/settings.php 中输入了正确的新数据库登录信息？（默认写保护）。

此外，您似乎没有正确的源代码。此代码应该是主题的 page.tpl.php 文件（sites/all/[theme-name]/page.tpl.php 或 theme/[theme-name]/page.tpl.php.）。

我们也不以这种方式使用包含。有自动包含的预定义名称（html.tpl.php、page.tpl.php、node.tpl.php 等自动嵌套）。

请参阅：[http](http://drupal.org/node/158043) ://drupal.org/node/158043 此外，Drupal 需要放置自己的 .htaccess 文件（或至少是 httpd.conf 文件中某处的功能），以处理更清晰的 URL 和文件保护。如果您无法访问特定的 URL，例如`http://localhost/user`，请尝试`http://localhost/?q=user`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T01:32:40.073

检查您的开发 PC 上的 PHP 配置。该页面使用的是 PHP [`Short Open Tags`](http://www.php.net/manual/en/ini.core.php#ini.short-open-tag)（`<?`而不是`<?php`），您的机器上可能未启用该页面。您可以在`php.ini`文件中找到设置。

# php - 发布表单时，符号“+”在输入文本中消失

> ID：11029454
> 
> 赞同：-1
> 
> 时间：2012-06-14T08:35:26.433
> 
> 标签：php, ajax, forms, zend-framework, textinput

我正在使用 Zend 框架。我有一个包含一些字段的表单，所有这些字段，`type="text"`包括一个名为“电话”的输入。提交时，我使用 Ajax 将数据发送到控制器。那么这是我的问题，如果我输入一个`+`符号，例如： `+34-666666666`我收到的数据是`34-666666666`. 该`+`符号变成一个空格。这个问题只发生在`+`，我已经尝试了所有的符号，没有问题。我快疯了，我在 Google 中没有找到任何解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T08:40:41.633

该`+`符号在 URL 中用于表示空格。您的 ajax 提交可能正在执行 GET 请求，并且`+`URL 字符串中的 正在被转换。在提交 ajax 请求之前通过 javascript 清理您的输入`encodeURIComponent()`。

您可能还会发现这个问题很有用：[URL 中的加号字符转换为 linux 盒子上的空格](https://stackoverflow.com/q/8960969/851811)。

这个问题讨论`encodeURIComponent`：[如何在 Javascript 中编码 URL？](https://stackoverflow.com/q/332872/851811)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-14T08:44:52.227

您需要按照[此处](http://www.w3.org/TR/html401/interact/forms.html#form-content-type)所述对 GET/POST 数据进行编码。[`encodeURIComponent`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/encodeURIComponent)稍加改动即可使用JavaScript函数*：

> 对于 application/x-www-form-urlencoded (POST)，根据规范，空格将被替换为“+”，因此可能希望在 encodeURIComponent 替换之后再将“%20”替换为“+”。

```
"&phone=" + encodeURIComponent("+34-666666666").replace(/%20/, "+");      // "&phone=%2B34-666666666"
"&phone=" + encodeURIComponent("+34-666666666 x123").replace(/%20/, "+"); // "&phone=%2B34-666666666+x123" 
```

*注意：对`+`URL 中字符的处理取决于它是在路径组件还是查询字符串中使用：

1.  `http://example.com/page+1`- 文件名`page+1`
2.  `http://example.com/page%201`- 文件名`page 1`
3.  `http://example.com/?file=page+1`-- 查询字符串参数`file=page 1`
4.  `http://example.com/?file=page%201`-- 查询字符串参数`file=page 1`

# regex - 网站智能数据提取算法

> ID：11029456
> 
> 赞同：0
> 
> 时间：2012-06-14T08:35:32.800
> 
> 标签：regex, algorithm, data-extraction

我正在构建一个交易聚合器，所以我需要一个爬虫来从一些网站中提取数据：价格、折扣、图像、坐标和交易名称。

你知道任何教程、电子书或对我有帮助的东西吗？对于图像和坐标以及折扣，我有一个解决方案和模式：

*   形象：最大的形象永远是交易的主要形象
*   折扣：折扣始终是 50 到 99 之间的数字，并且始终带有“%”符号
*   坐标：总是十进制数字，所以我用正则表达式得到它

如何获得以下物品？

*   交易名称？
*   价格？

你知道任何有用的数据提取算法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T08:44:47.607

我建议您使用基于 XPath 的刮刀。例如[网络收获](http://web-harvest.sourceforge.net/)

或者，如果您想分析原始文本，我建议使用状态机解析器来识别文本的模板化部分。

看这个话题：[Java中是否有用于文本分析/挖掘的API？](https://stackoverflow.com/questions/6800509/are-there-apis-for-text-analysis-mining-in-java/6800681#6800681)

# javascript - 在 Safari 中缩放时 SVG 文本重绘不正确

> ID：11029460
> 
> 赞同：2
> 
> 时间：2012-06-14T08:35:43.807
> 
> 标签：javascript, safari, svg

缩放包含文本的 SVG 元素时，文本无法正确重绘。这个问题似乎只出现在桌面的 Safari（在 Safari 5.1.7 中测试）中，它在 iPad 和其他主要浏览器中正确呈现，包括 Safari 6 的开发者预览版

有关该问题的演示，请参见以下 jsfiddle。

[http://jsfiddle.net/aBW25/](http://jsfiddle.net/aBW25/)

遇到此问题的查看者将看不到红色方块中心的白色文本，否则文本将无法正确呈现。

在 Chrome 或 Firefox 等浏览器中运行演示以查看正确的输出。

有没有其他人遇到过这个问题或知道解决这个问题的方法？

谢谢

# java - JSF2 表单到 DB 特殊字符处理

> ID：11029462
> 
> 赞同：1
> 
> 时间：2012-06-14T08:35:47.347
> 
> 标签：java, mysql, jsf, encoding, jsf-2

我有最简单的 JSF2 表单，在 MySQL 数据库中插入一个表字段。

我的小脸`<?xml version="1.0" encoding="UTF-8"?>`在顶部。

我的输入是这样的`<h:inputText value="#{testController.entity.test}" id="test" />`

所以我尝试在我的 Jpa2/Hibernate 实体中插入“ **provà ”。**然后我坚持它，当我在我的 MySQL 数据库中查找保存的值时......

我找到“ **provÃ** ”。这是我总是通过尝试和尝试来解决的老编码问题......

你能建议我先检查什么来修复它吗？

我的意思是，我知道这个问题缺乏信息，我只是想看看你问我什么：在你的问题中我会找到答案！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T13:52:36.447

> *我的小脸`<?xml version="1.0" encoding="UTF-8"?>`在顶部。*

这与问题无关。这只会告诉 XML 解析器在读取 XML 文件内容时使用哪个字符集，然后再将其解析为基于树的层次结构。

您的具体问题可能有两个可能的原因：

1.  HTTP 请求字符编码设置不正确。然而，这不是正常情况，因为默认情况下 JSF/Facelets 已经在所有层中使用 UTF-8。但是，只要在 JSF/Facelets 设置正确的字符编码之前，有其他东西访问了 HTTP 请求正文，就会出现此问题。众所周知，PrimeFaces 3.x 可以做到这一点。另请参阅[通过 PrimeFaces 输入组件检索到的 Unicode 输入已损坏](https://stackoverflow.com/questions/9634230/typing-chinese-with-primefaces-editor-component/9839362#9839362)。解决此问题的方法之一是创建一个过滤器，看起来就像[在 JSF 中提交的 UTF-8 表单中的那样，正在破坏数据](https://stackoverflow.com/questions/10721342/utf-8-form-submit-in-jsf-is-corrupting-data/10721475#10721475)。

2.  JDBC 连接字符编码设置不正确。MySQL JDBC 驱动程序使用客户端平台默认字符编码而不是服务器表字符编码。确保您的 MySQL JDBC URL 如下所示：

    ```
    jdbc:mysql://localhost:3306/db_name?useUnicode=yes&characterEncoding=UTF-8 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T11:11:12.943

尝试将***h:form acceptcharset="UTF-8"***放入您的 xhtml（为我工作）：

# iphone - 推送通知错误

> ID：11029464
> 
> 赞同：0
> 
> 时间：2012-06-14T08:35:49.970
> 
> 标签：iphone

我正在尝试在我的应用程序中显示推送通知。我创建了 ApId，启用了推送通知并创建了 P12 证书。我向服务器发送了一个请求，但出现以下错误：

> ```
> Error - An error occurred while reading Apple response for token 90241600842ee12f13378b33b03a1600200000009cff033fa037160000b00f00 - Input string was not in a correct format. 
> ```

我应该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T03:04:17.583

万一其他人稍后遇到此问题，当您在沙盒环境中使用生产证书时会出现此错误。

# actionscript-3 - Flash AS3 copyPixels 从 BitmapData 到 jpeg 截图

> ID：11029467
> 
> 赞同：0
> 
> 时间：2012-06-14T08:36:05.070
> 
> 标签：actionscript-3, flash, screenshot

我有代码可以在我的 swf 中创建舞台的实时屏幕截图。之后，它保存为 jpeg。都好。

只是，我不需要整个舞台，我只需要一个抠图：

x,y：357,341 宽度，高度：319,483

我的代码看起来像这样..

在哪里以及如何插入 copypixels 函数？

（我是 Flash 新手，所以请放轻松 :-)

```
function mouseReleaseSave(event:MouseEvent):void {
import com.adobe.images.JPGEncoder;
import flash.events.Event;
import flash.net.URLLoader;
import flash.net.URLRequestHeader;
import flash.net.URLRequest;

var jpgSource:BitmapData = new BitmapData(this.stage.stageWidth, this.stage.stageHeight);
jpgSource.draw(this.stage);
var jpgEncoder:JPGEncoder = new JPGEncoder(70);
var jpgStream:ByteArray = jpgEncoder.encode(jpgSource);

//set the request's header,method and data
var header:URLRequestHeader = new URLRequestHeader("Content-type","application/octet-stream");
var loader:URLLoader = new URLLoader();
//sends jpg bytes to saveJPG.php script
var myRequest:URLRequest = new URLRequest("saveJPG.php");
myRequest.requestHeaders.push(header);
myRequest.method = URLRequestMethod.POST;
myRequest.data = jpgStream;
loader.load(myRequest);
//fire complete event;
loader.addEventListener(Event.COMPLETE,saved);
function saved(e:Event){
    //trace the image file name
    trace(loader.data);
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T08:55:57.103

这应该有助于：

```
var subArea:Rectangle = new Rectangle(0,0, 319,483 );
var newBmp:Bitmap = new BitmapData( 319,483 );
var cutoutBmp:Bitmap = new Bitmap( newBmp, PixelSnapping.ALWAYS, true );
cutoutBmp.bitmapData.draw( jpgSource, new Matrix(1, 0, 0, 1, -357, -341) , null, null, subArea, true ); 
```

# android - Android：以编程方式更新 apk 文件

> ID：11029468
> 
> 赞同：0
> 
> 时间：2012-06-14T08:36:07.717
> 
> 标签：android

我想以编程方式将设备中已安装的 apk 文件从 url 更新为新版本。除了使用 application/vnd.android.package-archive 再次安装文件之外，还有什么方法可以做到这一点（因为我更喜欢在没有用户操作的情况下静默执行此操作）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T08:37:40.117

除非你有系统权限。如果可能的话，任何应用程序都可以在您的设备上安装任何东西（包括恶意软件）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T08:46:30.323

将您当前的版本和 url 保存在远程数据库中。当应用程序在设备中启动时，检查存储在数据库中的应用程序版本和安装的应用程序版本是否相同。如果不同，则从 url 下载文件。如果不同，则运行当前版本。

但是您必须在代码中手动执行这些操作。

为此，您还需要设备中的互联网连接。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T20:42:21.987

我也做过同样的事情。我在 FTP 服务器中有我的新 apk 和新 Apk 的版本号。我正在比较版本号并下载 APK 并安装它。但在此之前，我正在使用 FTP 服务器中的校验和检查下载的 apk 的校验和，以确保正确下载了 APK。

未经用户同意自动安装，我认为这是不可能的。让我知道您是否找到了解决方案。

# iphone - NSRangeException'，原因：'*** -[__NSArrayM objectAtIndex:]: index 0 beyond bounds for empty array' 当呈现视图控制器时

> ID：11029469
> 
> 赞同：4
> 
> 时间：2012-06-14T08:36:08.673
> 
> 标签：iphone, objective-c, ios

我开发了一个在测试中运行良好的应用程序，但是当它可以运行时，我在呈现模态视图控制器时遇到了一些崩溃问题。问题在这里的某个地方：

```
NSLog(@"Looks like we made it here 1");

UIViewController *mtaViewController = [self.storyboard instantiateViewControllerWithIdentifier:@"mtaViewController"];
NSLog(@"Looks like we made it here 2");

[mtaViewController setModalTransitionStyle:UIModalTransitionStyleCrossDissolve];
NSLog(@"Looks like we made it here 3");

[self presentModalViewController:mtaViewController animated:YES]; 
NSLog(@"Looks like we made it here 4"); 
```

我对控制台的输出是：

```
2012-06-14 09:26:24.161 appname[2013:707] Looks like we made it here 1
2012-06-14 09:26:24.165 appname[2013:707] Looks like we made it here 2
2012-06-14 09:26:24.166 appname[2013:707] Looks like we made it here 3
2012-06-14 09:26:28.866 appname[2013:707] *** Terminating app due to uncaught exception 'NSRangeException', reason: '*** -[__NSArrayM objectAtIndex:]: index 0 beyond bounds for empty array'
*** First throw call stack:
(0x343ac8bf 0x345fc1e5 0x342f5b6b 0x6d3fd 0x6e719 0x3778e7ff 0x37798d53 0x37798cc1 0x37838339 0x3783714f 0x37891d97 0x7ce1d 0x7cd47 0x3788eaa5 0x3776a81b 0x3776ffb9 0x34ec1ba7 0x36fe0e8d 0x3437f2dd 0x343024dd 0x343023a5 0x30b86fcd 0x37783743 0x84327 0x6b468)
terminate called throwing an exception 
```

我已经设置了一个函数，当我想更改视图控制器时调用它，你可以看到它一直到“看起来我们在这里做了 3”所以我怀疑线路有问题

```
[self presentModalViewController:mtaViewController animated:YES]; 
```

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T08:42:12.913

你确定你的视图控制器**真的**被初始化了吗？只是一个想法，但这条线

```
[mtaViewController setModalTransitionStyle:UIModalTransitionStyleCrossDissolve]; 
```

如果 mtaViewController 为 nil，则什么也不做。在 Cocoa 中，您可以毫无问题地向 nil 发送消息。只有当您尝试对它们执行特定操作时，您的应用才会在稍后崩溃。做

```
NSLog(@"%@", mtaViewController); 
```

告诉你一些有用的东西？还请确保您连接了 IB 中必须连接的所有内容（如果您没有在原始代码中解决所有问题）。

顺便一提。这已被弃用。利用

```
presentViewController:animated:completion: 
```

反而。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T08:43:31.523

检查 mtaViewController 中的任何数组，我在您的代码中没有看到任何数组，所以我认为问题出在 mtaViewController 中。:)

# java - 加载具有复合组件的页面时出现 Mojarra JSF 2.1.9 异常

> ID：11029472
> 
> 赞同：0
> 
> 时间：2012-06-14T08:36:13.900
> 
> 标签：java, jsf, mojarra

我正在将我的 Web 应用程序上的 Mojarra JSF 2.0 升级到 Mojarra JSF2.1.9 的最新稳定版本。使用早期版本的 Mojarra，页面加载正常。但是对于新版本，我在加载具有复合组件的 JSF 页面时收到以下错误消息。

```
 /faces/page.xhtml @8,62 Tag Library supports namespace: http://java.sun.com/jsf/composite/components, but no tag was defined for name: webContent
javax.faces.webapp.FacesServlet.service(FacesServlet.java:606)
com.ibm.ws.webcontainer.servlet.ServletWrapper.service(ServletWrapper.java:1657)
com.ibm.ws.webcontainer.servlet.ServletWrapper.service(ServletWrapper.java:1597)
com.ibm.ws.webcontainer.filter.WebAppFilterChain.doFilter(WebAppFilterChain.java:131) 
```

我在我的 Web 应用程序中的位置“/resources/components”处定义了一个复合元素“webContent”，它曾经与早期版本的 Mojarra JSF 一起使用。任何线索，为什么我会遇到这个崩溃。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T04:00:16.070

我发现了我真正的问题是什么以及问题的正确解决方案：

我正在使用 Webspehere 7 服务器，它仅支持“Java Servlet 2.5”。从 2.1.1 开始，所有 JSF Mojarra 版本的先决条件都需要“Java Servlet 3.0”。

Mojarra 2.0.9 是支持“Java Servlet2.5”的最新稳定版本。当我使用 Mojarra 2.0.9 时，我没有任何问题，一切正常。

谢谢，乔

# html - 为什么所有 li 和标题都被折叠/对齐/文本包装？

> ID：11029473
> 
> 赞同：0
> 
> 时间：2012-06-14T08:36:27.130
> 
> 标签：html, css, text-alignment, text-justify

我正在试验`text-align:;`and `text-justify:;`，它只出现在`header`id 中，现在正在对我不再想要的 div 产生影响。从那以后，我完全删除了这些规则，没有任何效果。当 's 涉及语法突出显示等时，这尤其令人恼火`li`。知道这是从哪里来的吗？

CSS：

```
 #content{

    position:relative;
    float:left;
    clear:both;
    background-color:#ffffff;
    width:100%;
    overflow:hidden;
    text-align:left;
    vertical-align:left;

    margin:10px 3px 3px 03x;
    padding:10px 10px 10px 10px;

    }

    #contentspace{

    position:relative;
    float:left;
    clear:both;
    background-color:#ffffff;
    width:91%;
    overflow:hidden;
    text-align:left;
    vertical-align:center;
    left:4%;
    margin:10px 0px 0px 0px;
    padding:5px 5px 5px 5px;
    border-top:1px solid #000000;
    border-left:1px solid #000000;
    }

#header{
position:relative;
float:left;
clear:both;
background-color:#ffffff;
vertical-align:center;
text-align:center;
text-align:justify; 
text-justify:distribute;
width:91%;
left:4%;
margin:15px 0px 0px 0px;
padding:5px 5px 5px 5px;
border-top:1px solid #000000;
border-left:1px solid #000000;
} 
```

html:

内容 div 被加载到内容空间 div

# mysql - MySQL全文搜索的替代方案

> ID：11029474
> 
> 赞同：2
> 
> 时间：2012-06-14T08:36:27.323
> 
> 标签：mysql, full-text-search

我读到 MySQL**全文搜索会导致表锁定**。这意味着人们在搜索表格时无法插入或更新表格。

我读到有许多**搜索服务器**（Lucence 和 Sphinx）可以在没有表锁定的情况下完成它，甚至更快。它**需要许多配置并且难以实施**。

**有没有其他方法可以在不使用搜索服务的情况下使用全文或类似的搜索？**我不想再配置一台 MySQL 以外的服务器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T08:44:55.393

创建一个仅用于执行 FULLTEXT 搜索的额外表。在您的代码中，您必须确保所有数据和操作（创建、更新、删除）都正确复制到此表中。如果您的数据表正在运行，例如 InnoDB 引擎，此解决方案也很方便。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T08:45:34.503

Apache Lucene 不需要*太多配置*，也*不难实现*。此外，它是最流行的全文搜索引擎之一，允许用户进行非常精确的查询，如“to be or not to be”、j?hn d?e、func* 等。

我已经使用 Lucene 进行了一些数据库索引，因此如果您可以更精确地确定要索引哪些表的哪些字段，我可以给您一些代码片段，它们应该可以解决问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T09:07:10.223

无论如何，我投票给 Sphinxsearch。它具有接近 Mysql 的 API 之一，易于安装和配置。不像 Apache Lucene 那样通用，但在我的项目中快速且非常有用。

# android - 为什么我的联系人照片没有显示在列表视图中？

> ID：11029475
> 
> 赞同：2
> 
> 时间：2012-06-14T08:36:29.557
> 
> 标签：android, listview, photo, contact

## 重要的是要注意，我使用的 API 是 2.3

我有一个列表视图，当前由在我的设备收件箱中向我发送短信的联系人（目前为 6 个）填充。在收集所有联系人并将其传递到`ArrayList<String>`中之后，ArrayList 将传递到我的**CustomAdapter**类的构造函数中。从那里，这是用我的方法中的收件箱中的联系人填充我的列表视图的代码`getView()`：

```
holder.photo = (ImageView) rowView.findViewById(R.id.iv_contactPic);
holder.contact = (TextView) rowView
                .findViewById(R.id.contactEntryText);

String folder = "content://sms/inbox/";
        Uri mSmsQueryUri = Uri.parse(folder);
        contactID = new ArrayList<String>();

        try {
            c = context.getContentResolver().query(mSmsQueryUri,
                    new String[] { "_id", "address", "date", "body" },
                    null, null, null);
            if (c == null) {
                Log.i(TAG, "cursor is null. uri: " + mSmsQueryUri);
            }

                c.moveToFirst();
                while (c.moveToNext()) {

                cid = c.getString(0);
                contactID.add(cid); // stores contact IDs
            }

        } catch (Exception e) {
            //Log.e(TAG, e.getMessage());
        } finally {
            c.close();
        }

if(holder != null){
    holder.contact.setText(data.get(position)); // displays contact by name

    //Contact photo not showing
    holder.photo.setImageBitmap(getByteContactPhoto(contactID.get(position));
} 
```

从上面的代码中，`holder.contact`显示 6 个联系人没有问题。但问题是`holder.photo`which 什么都没有显示。这是假设获取照片的方法：

```
public Bitmap getByteContactPhoto(String contactId) {
    Uri contactUri = ContentUris.withAppendedId(Contacts.CONTENT_URI, Long.parseLong(contactId));
    Uri photoUri = Uri.withAppendedPath(contactUri, Contacts.Photo.CONTENT_DIRECTORY);
    Cursor cursor = context.getContentResolver().query(photoUri,
                    new String[] {Contacts.Photo.DATA15}, null, null, null);
    if (cursor == null) {
        return null;
    }
    try {
                cursor.moveToFirst();
        if (cursor.moveToNext()) {
            byte[] data = cursor.getBlob(0);
            if (data != null) {
                return BitmapFactory.decodeStream( new ByteArrayInputStream(data));
            }
        }
    } finally {
        cursor.close();
    }
    return null;
    } 
```

但在 LogCat 中，这是唯一显示参考照片的内容：

```
W/Resources(15031): Converting to string: TypedValue{t=0x12/d=0x0 a=3 r=0x7f080015}
W/Resources(15031): Converting to string: TypedValue{t=0x12/d=0x0 a=3 r=0x7f080015}
W/Resources(15031): Converting to string: TypedValue{t=0x12/d=0x0 a=3 r=0x7f080015}
W/Resources(15031): Converting to string: TypedValue{t=0x12/d=0x0 a=3 r=0x7f080015}
W/Resources(15031): Converting to string: TypedValue{t=0x12/d=0x0 a=3 r=0x7f080015}
W/Resources(15031): Converting to string: TypedValue{t=0x12/d=0x0 a=3 r=0x7f080015} 
```

有关解决此问题以显示联系人照片的任何想法？

# svn - 从命令行 svn 获取包含用户名和修订信息的未完成合并列表

> ID：11029481
> 
> 赞同：0
> 
> 时间：2012-06-14T08:36:48.220
> 
> 标签：svn, tortoisesvn

在 TortoiseSVN 中合并时（例如从发布分支到主干），有一个“显示日志”选项可以选择要合并的修订。这会以黑色显示所有未完成的合并，并且所有已完成的合并都显示为灰色。

我基本上希望从 Windows 的命令行获得相同的功能：能够从我的发布分支到主干检索所有未完成（合格）合并的列表，包括修订号、修订日期、用户名、修订消息以及可能的文件他们自己。

我可以使用我的主干文件夹中的以下命令来获取合格（未完成）修订的列表：

```
>svn mergeinfo http://svn.example.com/svn/myProject/branches/1.0 --show-revs eligible
r1001
r1002
r1006 
```

但这实际上只输出修订号列表。

我可以手动将这些修订键入到 log 命令中，这给了我想要的信息：

```
>svn log http://svn.example.com/svn/myProject/branches/1.0  -r 1006
------------------------------------------------------------------------
r1006| rob| 2012-06-13 17:55:37 +0100 (Wed, 13 Jun 2012) | 1 line

Updated code documentation

------------------------------------------------------------------------ 
```

我怎样才能有效地将这两者结合起来？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-07-29T15:50:21.690

我认为 --log 会解决你的问题，

svn mergeinfo [http://svn.example.com/svn/myProject/branches/1.0](http://svn.example.com/svn/myProject/branches/1.0) --show-revs 合格 --log

如果您想了解更多信息，请尝试 -v 选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T17:15:31.527

我找到了一个解决方案，涉及将输出重定向`svn mergeinfo`到文件中，并使用它来驱动`svn log`命令：

```
svn mergeinfo http://svn.example.com/svn/myProject/branches/1.0--show-revs eligible > revs.txt
FOR /F %k in (revs.txt) DO svn log http://svn.example.com/svn/myProject/branches/1.0 -r %k -v
DEL revs.txt 
```

这就是我想要的——但我确信我之前已经看到它直接通过 svn 命令行完成了。

# php - 在 php 中选择有错误的请求

> ID：11029483
> 
> 赞同：0
> 
> 时间：2012-06-14T08:36:55.127
> 
> 标签：php, mysql

我正在尝试使用 php 中的代码从 mysql 数据库中选择数据，但总是有错误。`

```
<?php
$dbhost = "localhost";
$dbuser = "";
$dbpass = "";
$db = "test";
$connect = mysql_connect($dbhost, $dbuser, $dbpass, $db)
or die ("connexion impossible");
mysql_select_db($db) or die ("selection de la base échoué");
$username = $_POST['username'];
$password = $_POST['password'];
query = mysql_query("SELECT * FROM table2 WHERE username= '$username' AND     password='.$password'");
$num = mysql_num_rows($query);
if($num == 1) {
while($list = mysql_fetch_assoc($query)){
$output = $list;
echo json_encode($output);
}
mysql_close();
}
?> 
```

错误：

```
Notice: Undefined variable: username in C:\wamp\www\projet\connect.php on line 11
Notice: Undefined variable: password in C:\wamp\www\projet\connect.php on line 11 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T08:50:28.777

换行

```
query = mysql_query("SELECT * FROM table2 WHERE username= '$username' AND     password='.$password'"); 
```

和

```
$query = mysql_query("SELECT * FROM table2 WHERE username= '".$username."' AND     password='".$password."'"); 
```

您错过了变量查询之前的 $，并且存在一些字符串连接问题

请使用[PDO](http://php.net/manual/en/book.pdo.php)而不是弃用的 mysql_*

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-14T08:55:15.170

`$password`在 mysql 查询之前有额外的点，`query`应该`$query`是`$query`变量。

```
query = mysql_query("SELECT * FROM table2 WHERE username= '$username' AND     password='.$password'"); 
```

应该

```
$query = mysql_query("SELECT * FROM table2 WHERE username= '$username' AND     password='$password'"); 
```

# java - 我应该如何将我的应用数据保存在我的 android 应用中？

> ID：11029484
> 
> 赞同：2
> 
> 时间：2012-06-14T08:36:55.797
> 
> 标签：java, android, stream, fileinputstream, fileoutputstream

我正在制作我的第一个安卓应用程序。我想在一个活动中保存一个字符串数组，然后在第二个活动中我想将这些字符串显示为一个列表。我正在使用带有 API 8 的 android 平台 2.2 所以我不能使用 putStringSet()。有什么方法可以将我的数据保存为我的应用程序中的文本文件？然后，每当用户添加新字符串时，我就可以在该文件中添加一个新行。在制作列表视图时，我可以根据新行解析它并制作字符串数组。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T08:45:21.387

使用文件处理。易于初学者使用，高效满足您的目的。

[http://developer.android.com/guide/topics/data/data-storage.html#filesInternal](http://developer.android.com/guide/topics/data/data-storage.html#filesInternal)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T08:44:01.690

Intent 中有一个方法`putStringArrayListExtra("id", ArrayList list)`可以在启动之前使用。然后在从 Intent 启动的 Activity 中，使用`getStringArrayList("id")`.

例如：

```
Intent intent = new Intent(MainActivity.this.getApplicationContext(), NewActivity.class);
intent.putStringArrayListExtra("id", yourArrayList)
MainActivity.this.startActivity(intent); 
```

然后在 NewActivity onCreate() 方法上

```
ArrayList<String> list = getIntent().getExtras().getStringArrayList("id"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T08:43:05.097

但是您可以使用 putStringArray，或者将 putStringArrayList 包装到一个 Bundle 中。

Bundle 通过 Intents 传递。

-> [http://developer.android.com/reference/android/os/Bundle.html#putStringArray(java.lang.String](http://developer.android.com/reference/android/os/Bundle.html#putStringArray(java.lang.String) , java.lang.String[])

然后，如果要将其保存为文件，则必须使用此方法：[http ://www.java-forums.org/advanced-java/13852-saving-arraylist-file.html](http://www.java-forums.org/advanced-java/13852-saving-arraylist-file.html)

但我认为您更喜欢直接传递字符串列表。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T09:15:11.867

你为什么要使用文件呢？只需检查 sharedPreferences 和 sqliteDb 它可能对您有用..shared 首选项很容易处理

# android - 空指针异常; 升级到 Ubuntu 12 后初始化 Landroid/net/http/HttpsConnection 时抛出

> ID：11029491
> 
> 赞同：1
> 
> 时间：2012-06-14T08:37:06.613
> 
> 标签：android

将我的主机升级到 Ubuntu 12 并成功重建 android 后，在设备上安装后，系统启动循环进入此错误：

```
I/Zygote  (  147): Preloading classes...
D/dalvikvm(  147): GC_EXPLICIT freed 47K, 78% free 232K/1024K, external 0K/0K, paused 3ms
D/dalvikvm(  147): GC_EXPLICIT freed 1K, 73% free 282K/1024K, external 0K/0K, paused 3ms
D/dalvikvm(  147): GC_EXPLICIT freed 20K, 70% free 315K/1024K, external 0K/0K, paused 3ms
D/dalvikvm(  147): GC_EXPLICIT freed 17K, 66% free 353K/1024K, external 0K/0K, paused 3ms
D/dalvikvm(  147): GC_EXPLICIT freed 26K, 63% free 381K/1024K, external 0K/0K, paused 4ms
D/dalvikvm(  147): GC_EXPLICIT freed 22K, 58% free 440K/1024K, external 0K/0K, paused 4ms
W/MediaProfiles(  147): could not find media config xml file
D/dalvikvm(  147): GC_EXPLICIT freed 99K, 47% free 545K/1024K, external 0K/0K, paused 5ms
W/dalvikvm(  147): Exception Ljava/lang/
NullPointerException; thrown while initializing Landroid/net/http/HttpsConnection;
E/Zygote  (  147): Error preloading android.net.http.HttpsConnection.
E/Zygote  (  147): java.lang.ExceptionInInitializerError
E/Zygote  (  147):     at java.lang.Class.classForName(Native Method)
E/Zygote  (  147):     at java.lang.Class.forName(Class.java:234)
E/Zygote  (  147):     at java.lang.Class.forName(Class.java:181)
E/Zygote  (  147):     at com.android.internal.os.ZygoteInit.preloadClasses(ZygoteInit.java:297)
E/Zygote  (  147):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:564)
E/Zygote  (  147):     at dalvik.system.NativeStart.main(Native Method)
E/Zygote  (  147): Caused by: java.lang.NullPointerException: algorithm is null
E/Zygote  (  147):     at javax.net.ssl.KeyManagerFactory.getInstance(KeyManagerFactory.java:77)
E/Zygote  (  147):     at org.apache.harmony.xnet.provider.jsse.SSLParametersImpl.createDefaultKeyManager(SSLParametersImpl.java:387)
E/Zygote  (  147):     at org.apache.harmony.xnet.provider.jsse.SSLParametersImpl.getDefaultKeyManager(SSLParametersImpl.java:380)
E/Zygote  (  147):     at org.apache.harmony.xnet.provider.jsse.SSLParametersImpl.<init>(SSLParametersImpl.java:120)
E/Zygote  (  147):     at org.apache.harmony.xnet.provider.jsse.SSLContextImpl.engineInit(SSLContextImpl.java:97)
E/Zygote  (  147):     at android.net.http.HttpsConnection.initializeEngine(HttpsConnection.java:101)
E/Zygote  (  147):     at android.net.http.HttpsConnection.<clinit>(HttpsConnection.java:65)
E/Zygote  (  147):     ... 6 more
E/Zygote  (  147): setreuid() failed. errno: 17
D/AndroidRuntime(  147): Shutting down VM 
```

* * *

在我的 Ubuntu 11.10（64 位）主机中构建时，相同的源代码运行良好。我做了这样的迁移：

1) 从 11.10 主机完整备份 aosp 源目录

2) 安装新的 Ubuntu 12.04 主机

3）安装AOSP必备包

4）安装Oracle jdk 6

5) 恢复 aosp 源目录（从 1 开始）

“javax.net.ssl.KeyManagerFactory”中的失败表明一些与 SSL 相关的问题，但我想知道我可能会丢失什么，......

PS - 有关设备和移植项目的更多信息，有一个[小组](https://groups.google.com/forum/#!forum/renesas-emev-osp)讨论它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T15:59:32.913

经过几次不同的试验，看起来我设法解决了这个问题。

这完全取决于用于构建 AOSP 的 Java 开发工具包。我最初安装了 Oracle JDK（如 android 教程页面所建议的那样：http: [//source.android.com/source/initializing.html](http://source.android.com/source/initializing.html)），但后来我尝试了安装了 Open-JDK：

sudo apt-get install openjdk-6-jdk

如果您同时安装了 Open-JDK 和 Oracle-JDK，则可以选择使用哪一个来执行：

sudo update-alternatives --config java sudo update-alternatives --config javac sudo update-alternatives --config jar sudo update-alternatives --config javah sudo update-alternatives --config javadoc

并为其中的每一个选择 Open-JDK 版本。

使用 Oracle JDK 构建的 AOSP 无法启动，而使用 Open-JDK 构建的 AOSP 可以正常启动。

希望它可以帮助其他人解决类似的问题。

# java - 如何设置 Spring Classpath

> ID：11029504
> 
> 赞同：1
> 
> 时间：2012-06-14T08:37:57.643
> 
> 标签：java, spring, annotations, intellij-idea

![sfs 控制台中的错误](../Images/f7843914a34a599d694be578351ea0c9.png)

我正在使用 IntelliJ，并从 svn 中检查了工作代码。我正在努力运行 jar。

它是一个简单的核心 java Spring 项目。

由于我收到上述错误。我知道弹簧路径设置不正确。我该如何处理。？

```
 private ApplicationContext appContext = new AnnotationConfigApplicationContext(ApplicationRepositoryConfiguration.class); 
```

应用上下文文件在这里是一个bean类（使用@Bean注解）。我没有使用 xml 文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T08:44:11.910

似乎您正在从命令行运行您的项目。运行以下命令：

> java -classpath spring.jar;spring-sec.jar,......等等 com.example.UrMainClass

在命令中指定 jar 时，请确保提供完整的 jar 路径。另请检查此链接[https://stackoverflow.com/a/10122038/1065180](https://stackoverflow.com/a/10122038/1065180)

# jsp - 用表达式语言打印 servlet 请求属性

> ID：11029507
> 
> 赞同：0
> 
> 时间：2012-06-14T08:38:09.477
> 
> 标签：jsp, servlets, attributes

我想在使用表达式语言的 JSP 文件中打印 servlet 请求属性。我已经完成了以下操作，在我的 Servlet 中设置了所有必要的请求属性

```
setRequestAttributes(String, Object); 
```

在我的 JSP 页面中，我使用以下行来打印属性：

```
<c:out value="${string}"/> 
```

在阅读了其他帖子后，我检查了 Web XML 中是否使用了 2.4 版，是的。

```
When using getAttribute(String) 
```

在 Servlet 本身中，它可以很好地打印该值。有谁知道我需要做什么，这样我才能完成这项工作。

**编辑**

小服务程序代码：

```
package servlets;

import java.io.IOException;
import java.sql.Connection;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.ResultSetMetaData;
import java.sql.SQLException;
import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;
import java.util.Map;

import javax.servlet.RequestDispatcher;
import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

import classes.DBConnection;

public class MessageDetail extends HttpServlet {

    private static final long serialVersionUID = 1L;
    private String messageid;
    private Connection connect;

    public MessageDetail() {

        super();
    }
    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {

    }
    protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {

        connect = new DBConnection().returnConnection();
        messageid = request.getParameter("xxxxx");

        try {
            handleRequest(request);
        } catch (SQLException e) {
            e.printStackTrace();
        }

        RequestDispatcher dispatcher = request.getRequestDispatcher("messageDetail.jsp");
        dispatcher.forward(request, response);
    }

    private void handleRequest(HttpServletRequest request) throws SQLException{

        ResultSet messageData = getMessageData("xxxxxx");
        ResultSet attachmentData = getMessageData("xxxxxx");
        Map<Integer, List<List<Object>>> messageMap = convertResultSetToMap(messageData);
        Map<Integer, List<List<Object>>> attachmentMap = convertResultSetToMap(attachmentData);
        Map<Integer, List<List<Object>>> totalMap = combineMaps(messageMap, attachmentMap);
        setRequestAttributes(request, totalMap);

    }

    private ResultSet getMessageData(String tableName) throws SQLException{

        String sql = "SELECT * FROM " + tableName + " WHERE xxxxxxxx= "+ xxxxxxx;
        PreparedStatement prestm = connect.prepareStatement(sql, ResultSet.CONCUR_READ_ONLY, ResultSet.TYPE_SCROLL_SENSITIVE);
        ResultSet rs = prestm.executeQuery();
        return rs;
    }

    private Map<Integer, List<List<Object>>> convertResultSetToMap(ResultSet rs) throws SQLException{

        Map <Integer, List<List<Object>>> resultSetMap = new HashMap<Integer, List<List<Object>>>(); 
        ResultSetMetaData rsmd = rs.getMetaData();
        int colTotal = rsmd.getColumnCount();
        int rowNumber = 1;

        rs.beforeFirst();
        while(rs.next()){

            List<List<Object>> row = new ArrayList<List<Object>>();
            for(int colCounter = 1; colCounter<=colTotal; colCounter++){

                List<Object> cellData = new ArrayList<Object>();

                cellData.add(rsmd.getColumnName(colCounter));
                cellData.add(rs.getObject(colCounter));

                row.add(cellData);
            }

            resultSetMap.put(rowNumber, row);
        }
        return resultSetMap;
    }

    private void setRequestAttributes(HttpServletRequest request, Map<Integer, List<List<Object>>> resultSetMap){

        for(Map.Entry<Integer, List<List<Object>>> entry : resultSetMap.entrySet()){
            List<List<Object>> rowData = entry.getValue();
            for(List<Object> listItem : rowData){

                request.setAttribute((String) listItem.get(0), listItem.get(1));
            }
        }
    }

    private Map <Integer, List<List<Object>>> combineMaps(Map <Integer, List<List<Object>>> messageData, Map <Integer, List<List<Object>>> attachmentData){
        Map <Integer, List<List<Object>>> totalMap = new HashMap<Integer, List<List<Object>>>();
        totalMap.putAll(messageData);
        totalMap.putAll(attachmentData);
        return totalMap;
    }
} 
```

JSP代码：

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1"%>
    <%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<link href="/ArchiveSearch/resources/css/messageDetail.css" rel="stylesheet" type="text/css">

<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Message detail</title>
</head>
<body>
    <div class="wrapper">
            <h1>Message Details</h1>
            <div class="messageMeta1">
                    <div><span class="label">Sender:</span><c:out value="${messageid}"/></div>
                    <div><span class="label">Receiver:</span></div>
                    <div><span class="label">Subject:</span></div><c:out value="${messagesender}"/>
                    <div><span class="label">Attachments:</span></div>
            </div>
            <div class="messageMeta2">
                    <div><span class="label">Case ID:</span></div>
                    <div><span class="label">Date:</span></div>
            </div>
            <div class="messageContent">
            </div>
    </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T15:48:42.633

这段代码有太多错误，无法给出一个合适的答案。基本上一切都需要重写。您可能会发现以下答案中的启动示例很有帮助：[Show JDBC ResultSet in HTML in JSP page using MVC and DAO pattern](https://stackoverflow.com/questions/5003142/jsp-using-mvc-and-jdbc)。

# ios - 如何从视频中制作音频文件？在 iOS 上

> ID：11029508
> 
> 赞同：3
> 
> 时间：2012-06-14T08:38:09.763
> 
> 标签：ios, audio, avfoundation

我正在寻找从视频中制作 wav、alf 等音频文件的方法。

简单地说，我只想从视频中获取音频。

我怎样才能做到？

我试图 AVAssetExportSession 没有视频，但只有音频，

但这是行不通的。

请帮忙。

这是我的代码

```
- (void)exportAudioComposition
{
    self.filteredSoundURL = [self saveAudioFileRoot];

    AVAssetExportSession *exportSession = [[AVAssetExportSession alloc] initWithAsset:self.assetComposition presetName:AVAssetExportPresetPassthrough];
    exportSession.outputURL = self.filteredSoundURL;
    exportSession.outputFileType = AVFileTypeWAVE;
    exportSession.timeRange = CMTimeRangeMake(kCMTimeZero, self.assetComposition.duration);

    [exportSession exportAsynchronouslyWithCompletionHandler:^
    {
        dispatch_async(dispatch_get_main_queue(), ^{
        });
    }];
    [self doAudioProcessWithFilter:SOUN_TURTLE andAssetURL:self.filteredSoundURL];
}

- (void)setupCompositionWithAudio:(NSURL *)audioURL andVideo:(NSURL *)videoURL
{
    if (self.assetComposition != nil)
    {
        self.assetComposition = nil;
    }

    self.assetComposition = [AVMutableComposition composition];

    if (videoURL != nil) 
    {
        AVURLAsset *videoAsset = [[AVURLAsset alloc] initWithURL:videoURL options:nil];
        AVMutableCompositionTrack *compVideoTrack = [self.assetComposition addMutableTrackWithMediaType:AVMediaTypeVideo preferredTrackID:kCMPersistentTrackID_Invalid];

        AVAssetTrack *videoTrack = [[videoAsset tracksWithMediaType:AVMediaTypeVideo] objectAtIndex:0];
        CMTimeRange videoTimeRange = CMTimeRangeMake(kCMTimeZero, videoAsset.duration);
        [compVideoTrack insertTimeRange:videoTimeRange ofTrack:videoTrack atTime:kCMTimeZero error:nil];
    }

    AVURLAsset *audioAsset = [[AVURLAsset alloc] initWithURL:audioURL options:nil];
    AVMutableCompositionTrack *compAudioTrack = [self.assetComposition addMutableTrackWithMediaType:AVMediaTypeAudio preferredTrackID:kCMPersistentTrackID_Invalid];

    AVAssetTrack *audioTrack = [[audioAsset tracksWithMediaType:AVMediaTypeAudio] objectAtIndex:0];
    CMTimeRange audioTimeRange = CMTimeRangeMake(kCMTimeZero, audioAsset.duration);
    [compAudioTrack insertTimeRange:audioTimeRange ofTrack:audioTrack atTime:kCMTimeZero error:nil];
} 
```

# .net - 构建后事件命令出错

> ID：11029511
> 
> 赞同：1
> 
> 时间：2012-06-14T08:38:18.783
> 
> 标签：.net, visual-studio, post-build-event, build-events

在 Windows 7 上使用 Visual Studio 2010 编译 C# 代码时出现错误。

我有这些构建事件（构建后事件命令行）：

```
if not "$(ConfigurationName)"=="Release" goto :finish 
"$(TargetDir)mt.exe" -manifest "$(ProjectDir)$(TargetName).exe.manifest" –outputresource:"$(TargetDir)$(TargetFileName)";#1
"$(ProjectDir)ILMerge.exe" /out:"$(TargetDir)Merged\Software.exe" "$(TargetPath)" "$(ProjectDir)bin\x86\Dlls\mwc.dll" "$(ProjectDir)bin\x86\Dlls\Interop.Access.dll" "$(ProjectDir)bin\x86\Dlls\Interop.DAO.dll"
:finish 
```

如果我删除：`$(ProjectDir)bin\x86\Dlls\Interop.Access.dll`一切都很好。使用此代码，如果我重建我的代码，我会收到此错误：

> 以代码 1 退出。

我认为它没有找到 dll 文件，但它就在那里。我已经检查了很多次了...

我不知道如何解决这个问题。

@edit：对不起，我犯了一个错误，现在这是正确的代码......它无论如何都不起作用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T08:42:27.580

您在结尾处缺少结束语`$(ProjectDir)bin\x86\Dlls\Interop.Access.dll`

```
"$(ProjectDir)ILMerge.exe" /out:"$(TargetDir)Merged\Software.exe" "$(TargetPath)" "$(ProjectDir)bin\x86\Dlls\mwc.dll" "$(ProjectDir)bin\x86\Dlls\Interop.Access.dll "$(ProjectDir)bin\x86\Dlls\Interop.DAO.dll" 
```

应该...

```
"$(ProjectDir)ILMerge.exe" /out:"$(TargetDir)Merged\Software.exe" "$(TargetPath)" "$(ProjectDir)bin\x86\Dlls\mwc.dll" "$(ProjectDir)bin\x86\Dlls\Interop.Access.dll" "$(ProjectDir)bin\x86\Dlls\Interop.DAO.dll" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T08:43:02.037

`post-build`调试脚本没有简单的方法。我个人使用的一种可能方法是在控制台中单独执行 suspicios 行，并希望能更详细地解释那里发生的事情。

因此，例如，尝试`ILMerge`使用您在构建后事件中使用的命令行参数执行，看看会发生什么。

祝你好运。

# c# - 从 C# 订阅托管 COM 程序集中的 COM 事件

> ID：11029513
> 
> 赞同：0
> 
> 时间：2012-06-14T08:38:26.580
> 
> 标签：c#, events, com, regfreecom

我有一个 .NET 3.5 应用程序，并且需要在其中的某个部分使用 .NET 4。因此，我将 .NET 4 部件公开为免注册 COM 程序集。

在 .NET 3.5 程序集中，我有以下代码，可以正常工作：

```
Type comClassType = Type.GetTypeFromProgID("A.ProgID");
object comObject = Activator.CreateInstance(comClassType);
var managedObj = (IManagedInterface)comObject;
managedObj.MyMethod(); // call .NET 4 method from .NET 3.5 
```

IManagedInterface 的声明如下：

```
[Guid("ED915810-1B19-4357-9FD4-564CFC0AFAFF")]
[ComVisible(true)]
public interface IManagedInterface
{
    void MyMethod();
    ...
} 
```

我还有一个事件接口，声明如下：

```
[Guid("D3633346-EB8B-4F62-A806-3C393D40F694")]
[ComVisible(true)]
[InterfaceType(ComInterfaceType.InterfaceIsIDispatch)]
public interface IMyComEvents
{
    void MyEvent()
} 
```

这是，据我所知，根据这篇文章：http: [//msdn.microsoft.com/en-us/library/dd8bf0x3.aspx](http://msdn.microsoft.com/en-us/library/dd8bf0x3.aspx)

我的 .NET 4 COM 类如下：

```
[Guid("7BA49B2D-A359-4B70-BEB1-2A61EA63EFA4")]
[ComVisible(true)]
[ComSourceInterfaces(typeof(IMyComEvents))]
public class ManagedComWrapper : IManagedInterface
{
    ...
} 
```

那么问题是：如何在顶部显示的 .NET 3.5 客户端中订阅/处理来自 IMyComEvents 的事件？

# html - 在唯一的表格行上取最后一个孩子而不是第一个孩子

> ID：11029517
> 
> 赞同：2
> 
> 时间：2012-06-14T08:38:46.020
> 
> 标签：html, css, css-selectors, css-tables

我有以下 CSS：

```
table tbody tr:last-child td {
  padding-top: 7px;
  border-bottom: 0;
}

table tbody tr:first-child td {
  padding-top: 6px;
} 
```

现在我可能有一张只有一行的桌子。
唯一的表格行现在分配给`first-child`而不是`last-child`，但我希望它是相反的。

有没有没有Javascript的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T08:51:10.957

您可以制定一个规则，仅当 tr 同时是第一个孩子和最后一个孩子时，这`table tbody tr:first-child:last-child td`将添加到与`table tbody tr:last-child td`. 它会是这样的：

```
table tbody tr:last-child td,
table tbody tr:first-child:last-child td{
  padding-top: 7px;
  border-bottom: 0;
}​ 
```

这里似乎工作:) - [http://jsfiddle.net/HjZU4/](http://jsfiddle.net/HjZU4/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T08:51:57.433

这不可能。您的标记中一定有一些错误。如果它真的是唯一的`tr`，两者`last`AND`first`都会匹配。

**[查看示例](http://jsfiddle.net/FEgZE/)**

但是，将应用哪个 CSS 取决于您的 css-rules 的顺序。`padding-top: 7px;` `or padding-top: 6px;`因此，您可以通过相应地放置规则来确定是否应适用。

编辑：

由于您的问题是由插件引起的，该插件在末尾自动插入一行，您可以简单地使用`:nth-last-child(2)`来匹配倒数第二个元素。
[（但请注意，浏览器对 的支持`nth-last-child`略差于`last-child`）]

# iphone - 模拟 iPhone 的低电量

> ID：11029519
> 
> 赞同：34
> 
> 时间：2012-06-14T08:38:51.213
> 
> 标签：iphone, objective-c, ios-simulator, simulation, power-management

我正在开发一款手机游戏，当显示低电量警报时，它似乎会崩溃。它适用于内存不足、来电和其他消息。

测试和调试它很痛苦，因为我找不到模拟这种情况的终端或 iPhone 模拟器，所以我必须给手机充电一点，启动应用程序，等待它耗尽电量，然后开始重新来过。

有谁知道以现实方式产生此错误的方法？希望不会对我的 iPhone 电池造成太大压力。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-19T17:06:12.913

不幸的是，没有很好的方法来模拟低电量环境。实际上，您很可能需要对设备的电池进行物理充电，直到它刚好高于“低电量”状态，然后调试您的应用程序。

为了解决其他人所说的话：

1.  没有办法模拟低电量通知。@Bo 的项目。提供的只是安排 random `UILocalNotifications`。这与仅在您的应用程序中显示 UIAlertView 并没有太大不同。
2.  您可以尝试@Andrew R. 所说的并使用[UIDevice header](http://developer.limneos.net/?framework=UIKit.framework&header=UIDevice.h)中的私有方法。但是，您是否会完全模仿真正的低电量环境的效果是值得怀疑的。

尽管必须等待您的设备真正进入低电量状态是一件痛苦的事，但您可以在您的应用程序中添加一些耗电代码来帮助您。例如，使用 GPS 可能会更快地耗尽电池电量。

祝你好运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T08:53:15.687

您是否尝试过模拟低电量通知？似乎有一个项目可以做到这一点：[https ://github.com/MegaEduX/LowBattery](https://github.com/MegaEduX/LowBattery)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-06-19T03:30:20.223

假设这仅用于测试目的，您可以`UIDevice`尝试以下私有方法：

```
-(void)_setBatteryState:(int)state;
-(void)_setBatteryLevel:(float)level; 
```

您必须进行试验以查看他们期望的参数，或者它们是否有影响。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2015-03-03T05:24:57.333

在 iOS 中有一种方法可以模拟“低电量”

通过将 UIDevice 单例的属性设置为 YES 来启用电池监控：

```
UIDevice *device = [UIDevice currentDevice];
device.batteryMonitoringEnabled = YES; 
```

iOS 提供两种类型的电池监控事件，一种用于状态变化时（例如，充电、拔掉、充满电），另一种用于在电池电量变化时更新。与接近监控的情况一样，您注册回调以接收通知：

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(batteryChanged:) name:@"UIDeviceBatteryLevelDidChangeNotification" object:device];
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(batteryChanged:) name:@"UIDeviceBatteryStateDidChangeNotification" object:device]; 
```

# javascript - JavaScript 常量和对象字面量

> ID：11029525
> 
> 赞同：1
> 
> 时间：2012-06-14T08:39:28.767
> 
> 标签：javascript, json

我知道我可以在 JavaScript 中做到这一点：

```
RequestDate: {
    '0' : 'previous_activity_date',
    '1': 'next_activity_date'
  } 
```

我可以这样做：

```
this.RequestDate = {};
this.RequestDate[App.FORWARD] = 'next_activity_date';
this.RequestDate[App.BACK] = 'previous_activity_date'; 
```

有没有办法使以下工作：

```
RequestDate: {
    App.Back : 'previous_activity_date',
    App.Forward: 'next_activity_date'
  }, 
```

以上明显错误，有没有办法让它工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-01-26T14:34:25.037

你可以这样做。

```
RequestDate: {
    [App.Back]: 'previous_activity_date',
    [App.Forward]: 'next_activity_date'
  } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T08:46:25.580

简短的回答：没有。对象文字中只能有文字键。如果您想使用常量，您自己的解决方案是最好的解决方案。

[http://bclary.com/2004/11/07/](http://bclary.com/2004/11/07/)

> 11.1.5 对象初始化器
> 
> 对象初始化器是描述对象初始化的表达式，以类似于文字的形式编写。它是包含在花括号中的零对或多对属性名称和相关值的列表。这些值不必是文字；每次评估对象初始化器时都会评估它们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T08:42:06.760

如您所见，您可以这样写：

```
RequestDate = {};
RequestDate[App.Back] = 'previous_activity_date';
RequestDate[App.Forward] = 'next_activity_date'; 
```

但是 javascript 语法不允许在 JSON 表示法的 : 之前使用表达式。

# bash - 如果不存在则添加后缀（bash）

> ID：11029526
> 
> 赞同：4
> 
> 时间：2012-06-14T08:39:30.170
> 
> 标签：bash, variables

如果它不存在，我正在尝试找到将后缀添加到字符串（在 bash 中）的最佳方法。

我首先想到了这个：

```
case "$R" in
    *.git ) ;;
    * ) R=$R.git ;;
esac 
```

哪个有效。但是很麻烦。

然后想到了这个：

```
R=${R%.git}.git 
```

这很好，紧凑而整洁。

还有其他选择吗？有什么我应该注意的问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-14T10:16:53.493

```
[[ $r == *.git ]] || r+=.git 
```

将是我的首选方法。

```
shopt -s extglob
case $r in !(*.git)) r+=.git; esac 
```

可能是更好的`case`方法。如果确定`R`已设置且不为空，则您的第二种方法可能已经足够好了。其他可能性包括：

```
${r:+'declare'} r="${r%.git}.git"
r=${r%.git}.git ${r:+'true'} 
```

对于 POSIX sh，您的任何一种方式都可以，但您应该考虑不使用全大写的变量名。

# vba - 从一个工作簿复制并粘贴到另一个工作簿

> ID：11029531
> 
> 赞同：1
> 
> 时间：2012-06-14T08:40:04.117
> 
> 标签：vba, excel

我在一个工作簿中有代码，这应该打开另一个工作簿，将代码复制并粘贴到工作簿中。我可以选择数据，但不能粘贴。

我已经尝试了许多不同的代码变体，或者它没有做任何事情。在 template.xls 中运行了一个示例，我要在其中粘贴数据：

```
Set dlsheet = appexcel.Workbooks.Open(strPath & "downloadedData.xls")

With dlsheet.Sheets("Data")

    .range("A1:H3").Select.copy
    selection.copy

End With 
```

我不知道如何使用选择，因为这将从模板中复制，我尝试在选择之前使用句号。

我可以将整个工作表从 dlsheet 复制到新工作簿中，如果有人可以告诉我如何将其复制到模板而不是新工作簿中，那么这也可以解决问题。

```
dlsheet.Sheets("Data").Copy 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T08:56:58.227

```
Set dlsheet = appexcel.Workbooks.Open(strPath & "downloadedData.xls")
dlsheet.Sheets("Data").range("A1:H3").copy

ThisWorkbook.ActiveSheet.Paste Destination:=ThisWorkbook.ActiveSheet.Range( "A1:H3") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T09:23:48.053

尝试这个

```
Set dlsheet = appexcel.Workbooks.Open(strPath & "downloadedData.xls")

With dlsheet
    .Sheets("Data").Range("A1:H3").Copy

    .Sheets("Data").Range("A1").PasteSpecial Paste:=xlPasteValues, _
    Operation:=xlNone, SkipBlanks:=False, Transpose:=False
End With 
```

# ios - 用于此的更清洁的 XCode 宏

> ID：11029533
> 
> 赞同：1
> 
> 时间：2012-06-14T08:40:08.107
> 
> 标签：ios, xcode, coding-style, macros

目前我正在使用这样的东西来实现 iOS 4.0~4.3 之间的 ARC 兼容性：

```
- (void) viewDidUnload {
#if __IPHONE_OS_VERSION_MIN_REQUIRED > __IPHONE_4_3
#else
    //set outlets to nil
#endif
} 
```

#if<->#else 区域始终为空。所以我的问题是这个。有没有更简洁的方法来编写#if 行，所以我不需要#else 语句？我尝试使用“<”，但似乎不明白。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T07:21:34.563

所以我现在可以回答我自己的问题了。振作起来：

拿

```
#if __IPHONE_OS_VERSION_MIN_REQUIRED > __IPHONE_4_3
#else
    //set outlets to nil
#endif 
```

并将其替换为

```
#if __IPHONE_4_3 > __IPHONE_OS_VERSION_MIN_REQUIRED 
    //set outlets to nil
#endif 
```

似乎编译器不支持宏中的 <。

# c - 复制字符串时出现段错误

> ID：11029536
> 
> 赞同：0
> 
> 时间：2012-06-14T08:40:16.817
> 
> 标签：c, string, struct, char

我正在尝试学习 C，现在我正在玩结构。我有以下代码：

```
#include <string.h>

struct user {
  unsigned int utime;
  char *username;
};

void main()
{
  char username[] = "root";
  struct user *u;
  strcpy(u->username, username);
} 
```

但是，当我尝试运行它时，它会产生分段错误。它出什么问题了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T08:42:58.430

`u`是一个指向结构的指针，但您还没有为它分配任何内存。该行必须是 `struct user *u = malloc(sizeof(struct user))`. 此外，您还必须`username`在调用之前为结构中的指针分配内存`strcpy`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T08:43:11.257

遇到崩溃（如分段错误）时，您应该做的第一件事是在调试器中运行您的程序。它将帮助您确定崩溃的位置，还可以让您检查变量以查看可能导致崩溃的原因。

但是，在您的情况下，它非常简单：

```
struct user *u;
strcpy(u->username, username); 
```

您还没有为`u`or分配内存`u->username`，这意味着它`u`可以指向内存中的任何位置，对于`u->username`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T08:45:46.403

两件事情

您还没有为结构变量“struct user *u;”分配

而且您还没有在结构中为 *username 分配内存

去工作

```
 #include <string.h>
 struct user {
 unsigned int utime;
 char *username;
 };

 void main()
 {
    char username[] = "root";
    struct user *u=malloc(sizeof(struct user));
    u->username=malloc(strlen(username)+1);
    strcpy(u->username, username);
} 
```

如有语法错误请忽略

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T08:46:29.293

另一种方法是使用 u 作为一个简单的变量`struct user u`：然后使用“.”访问 utime 或用户名，如下所示：

```
u.utime = ...;
u.username = ...; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-14T12:28:25.370

同时，您还应该了解内存布局，并尝试推理什么存在于何处。一个起点是 - [Stanford Pointers pdf](http://cslibrary.stanford.edu/102/PointersAndMemory.pdf) 我建议，当你在学习并陷入困境时，尝试在纸上绘制流程、内存访问，然后进入调试器。当我第一次学习 C 时，我没有这样做——内存可视化是一种似乎使一个人成为更好的程序员/调试器的特性——从我从同事那里学到的东西/阅读了几篇在线文章。

# android - 使用 SQLiteDatabase 从多个表中查询 SQLite

> ID：11029538
> 
> 赞同：13
> 
> 时间：2012-06-14T08:40:28.797
> 
> 标签：android, sqlite

我的数据库中有 2 个表，例如：`Table1: id (PK), data1`和`Table2: id (PK), id_table1 (FK), data2`. 我怎样才能进行这样的查询：

```
SELECT * FROM Table1, Table2 WHERE Table1.id = Table2.id_table1 
GROUP BY Table1.data1 
```

我正在使用`SQLiteDatabase`和它的`query()`方法。

```
Cursor mCursor = db.query(true, new String[] {"Table1","Table2"}, 
new String[] {"Table1.id","data1", "Table2.id", "id_table1", "data2"},
"Table1.id=Table2.id_table1", null, "Table1.data1", null,null,null); 
```

但是第二个 arg 有一个问题 - 只能使用 String，而不是 String[] (like `new String[] {"Table1","Table2}`)。我应该怎么做才能以这种方式从多个表中进行查询？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-06-14T08:43:23.597

试试这个：

```
Cursor mCursor = db.rawQuery("SELECT * FROM Table1, Table2 " +
                             "WHERE Table1.id = Table2.id_table1 " +
                             "GROUP BY Table1.data1", null); 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-06-14T08:53:14.560

所以当你需要`JOIN`表格时，你必须使用`rawQuery`而不是`query`. 所以你的陈述

```
String SELECT_QUERY = SELECT * FROM Table1 t1 INNER JOIN Table2 t2 ON t1.id = t2.id GROUP BY t1.data1; 
```

我建议您使用`JOIN`，因为它比您的方法更快、更安全。那么你的`rawQuery`方法可以如下所示：

```
cursor = db.rawQuery(SELECT_QUERY, null); 
```

看看 [SQLiteDatabase 中的 rawQuery](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html)

问候

# jquery - 在 URL ajax 加载后获取请求的 url 参数

> ID：11029542
> 
> 赞同：0
> 
> 时间：2012-06-14T08:40:45.817
> 
> 标签：jquery, ajax, url, parameters

嗨，伙计们在脚本方面遇到了一些问题

我有一些加载 html url 的选项卡字段

我需要在我加载的 html 中获取该 url 的参数

```
<div id="tabs">
<ul>
    <li><a href="hosts/timeline.html?ip=${ipValue}">Timeline</a></li>
</ul> 
```

这是我的timeline.html 文件内容

```
<script id="timelineTmpl" type="text/x-jquery-tmpl"> 

{{each response}}
    <li><b>${time}</b><br />
    {{each items}}
            ${icon}: <em>${text}. </em> <br />
    {{/each}}   
{{/each}}

</li>
</script>

<ul id="timeline"></ul>

<script type="text/javascript" charset="utf-8">

    function getURLParam(urlSearch, param) {
        p = urlSearch.split(/[&?]/);
        p = _.reject(p, function(e) { return e == "" });
        p = _.map(p, function(e) { return e.split("=")});   
        p = _.reduce(p, function(memo, a) {memo[a[0]] = a[1]; return memo; }, {});
        return p[param]
    }

    var request = $.ajax({
        type: 'GET',
        url: 'ajax/hosts/timeline.xsp?ip='+getURLParam(location.search, "ip"),
        dataType: 'json'
    });

    request.done(function(data){
        $("#timelineTmpl").tmpl(data).appendTo("#timeline");
    });

    request.fail(function(jqXHR, textStatus, errorThrown) {
        console.log(errorThrown);
        console.log(textStatus)
    }); 
```

现在该函数 getURLParam 返回 undefined

我怎样才能让它检索我通过的那个 ip vale

好的，这可能是我请求timeline.html 的方式吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T16:45:31.890

我有同样的问题。提供的链接也没有回答您的问题。我无法解决它，所以我使用了可能对您有所帮助的解决方法。只需将数据附加到任何 DOM 元素。

例如，在您的模板文档中：

```
$(document).ready(function() {
    $('#tabs').data('ip', '${ipValue}');
}); 
```

然后，在您的 timeline.html 中，您可以执行以下操作：

```
 url: 'ajax/hosts/timeline.xsp?ip=' + $('#tabs').data('ip') 
```

希望能帮助到你，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T08:53:44.860

First of all, I would change this hosts/timeline.html into hosts/timeline.php; I dont think that HTML knows how to work with parameters passed that way; and then retry; and be carefull where you use the RegEx, you should use split(/[&?]+/) because you could have multiple params and values

# mysql - 关系数据库设计：如何设计长路径的关系？

> ID：11029544
> 
> 赞同：1
> 
> 时间：2012-06-14T08:40:51.043
> 
> 标签：mysql, database-design, orm, relational-database, entity-relationship

我目前正在设计一个 MySQL 数据库，我遇到了以下问题，我不确定如何正确解决/设计。

我有实体：（简化）

```
Providers, Addresses, Letters, Faxes 
```

现在：

```
Adresses belong to providers, Providers have many Addresses

Letters belong to Addresses, Addresses have many Letters

Faxes belong to Letters, Letter have many Faxes 
```

所以现在我在 PHP 中使用带有这个数据库模型的 ORM 并发现自己处于我有一个 Fax-Object 的实例以及加载相应提供程序的内容的情况下。

现在这将花费我一个大连接或几个查询。

我需要走的路是：

```
Fax -> Letter -> Address -> Provider 
```

现在我正在考虑是否应该在传真和提供者之间建立直接关系，这将解决这个问题。但这不会是多余的，而且会以双重努力为代价吗？如果 Fax 和 Provider 之间的关系发生变化怎么办？然后我会调整两个关系路径。

这样做的首选方法是什么？我的例子稍微简化了一点。实际上，我必须走的路要长一些。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-14T09:44:35.630

好吧，识别关系和“更自然”的键可以降低对 JOINing 的需求。

例如：

![在此处输入图像描述](../Images/d12eca4a085f425355a66e94ffa12a8b.png)

既然有`Faxes.ProviderId`，就可以直接JOIN`Faxes`和`Providers`.

并且由于[InnoDB 表是集群的](http://www.ovaistariq.net/521/understanding-innodb-clustered-indexes/)，如果您朝相反的方向前进（例如“获取给定提供商的所有传真”），您可以期待良好的性能。

缺点是“更胖”的键和对 ORM 的相对不友好。所以，我想这是一个妥协的问题，你是决定哪个选项更好的人。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T09:40:34.510

您可以做的是将提供者后续表作为[弱实体](http://en.wikipedia.org/wiki/Weak_entity)相互关联——其中每个表的标识主键的一部分依赖于另一个表（通过 1:N*标识*关系）。你可以这样建模：

```
providers
-----------------
provider_id   [PK]
...

addresses
-----------------
provider_id   [PK] (FK Referencing providers.provider_id)
address_id    [PK]
...

letters
-----------------
provider_id   [PK] (FK Referencing addresses.provider_id)
address_id    [PK] (FK Referencing addresses.address_id)
letter_id     [PK]
...

faxes
-----------------
provider_id   [PK] (FK Referencing letters.provider_id)
address_id    [PK] (FK Referencing letters.address_id)
letter_id     [PK] (FK Referencing letters.letter_id)
fax_id        [PK]
... 
```

这样，给定一条特定的传真记录，您只需要找到有关相关提供商的更多信息，您只需像这样加入一个表：

```
SELECT 
    subj,
    content
FROM
    faxes
INNER JOIN
    providers USING (provider_id)
WHERE
    fax_id = <faxid here> 
```

# entity-framework - 实体框架不查询派生类 - DbOfTypeExpression 中的错误

> ID：11029545
> 
> 赞同：7
> 
> 时间：2012-06-14T08:40:54.770
> 
> 标签：entity-framework, linq-to-entities, ef-code-first, polymorphism, entity-framework-5

我有一个基类和两个派生类。

每个派生类都实现了与属性相同的类型——唯一的区别是属性名称。

*遗憾的是，我对类设计没有太大影响-> 它们是从 wsdl 文件生成的。*

然后我在 BaseType 上有一个属性来封装公共属性。计划是在我的网络视图等中使用这个属性。

我用著名的“水果示例”来演示这个问题：

```
 public class FruitBase
    {
        public virtual int ID { get; set; }

        //
        // The plan is to use this property in mvc view
        //
        [NotMapped]
        public virtual FruitnessFactor Fruitness
        {
            get
            {
                if (this.GetType().BaseType == typeof(Apple))
                    return ((Apple)this).AppleFruitness;
                else if (this.GetType().BaseType == typeof(Orange))
                    return ((Orange)this).OrangeFruitness;
                else
                    return null;
            }
        }
    }

public class FruitnessFactor { } 
```

在我的 MVC 控制器中，以下查询绝对可以正常工作：

```
return View(context.FruitEntities
                           .OfType<Apple>().Include(a =>a.AppleFruitness)
                           .ToList()); 
```

但是这个没有：

```
 return View(context.FruitEntities
                                   .OfType<Apple>().Include(a =>a.AppleFruitness)
                                   .OfType<Orange>().Include(o => o.OrangeFruitness)
                                   .ToList()); 
```

我得到的错误信息是：

***DbOfTypeExpression 需要具有与类型参数兼容的多态结果类型的表达式参数。***

我正在使用 EF 5.0 RC 和 Code First 方法。

任何帮助深表感谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-14T19:29:36.443

据我所知，您不能`Include`在单个数据库查询中应用多个子类型。您可以查询一种类型 ( `OfType<Apple>().Include(a => a.AppelFruitness)`) 并为另一种子类型查询相同的类型。问题是您不能在同一个查询中连接结果，因为结果集合具有不同的泛型类型（苹果和橙子）。

一种选择是运行两个查询并将结果集合复制到基本类型的新集合中 - 正如您已经在问题下的评论部分中指出的那样。

另一个选项（只需要一个查询）是投影。你必须定义一个投影类型（你也可以投影到一个匿名类型）......

```
public class FruitViewModel
{
    public FruitBase Fruit { get; set; }
    public FruitnessFactor Factor { get; set; }
} 
```

...然后可以使用查询：

```
List<FruitViewModel> fruitViewModels = context.FruitEntities
    .OfType<Apple>()
    .Select(a => new FruitViewModel
    {
        Fruit = a,
        Factor = a.AppleFruitness
    })
    .Concat(context.FruitEntities
    .OfType<Orange>()
    .Select(o => new FruitViewModel
    {
        Fruit = o,
        Factor = o.OrangeFruitness
    }))
    .ToList(); 
```

如果您不禁用更改跟踪（通过使用`AsNoTracking`），导航属性会在实体附加到上下文（“关系修复”）时自动填充，这意味着您可以从 viewModel 集合中提取结果......

```
IEnumerable<FruitBase> fruits = fruitViewModels.Select(fv => fv.Fruit); 
```

...您将获得*包括*`FruitnessFactor`属性在内的果实。

这段代码非常尴尬，但是已经多次询问了不使用投影的直接方法，但均未成功：

*   [使用实体框架继承的瓶颈](https://stackoverflow.com/questions/6586574/bottleneck-using-entity-framework-inheritance)
*   [实体框架 - 急切加载子类相关对象](https://stackoverflow.com/questions/7635152/entity-framework-eager-loading-of-subclass-related-objects)
*   [如何通过对持久基类型的实例（实体框架 4）的引用来深切地加载实体](https://stackoverflow.com/questions/7203303/how-do-i-deeply-eager-load-an-entity-with-a-reference-to-an-instance-of-a-persis)

# php - 根据使用 jQuery 的下拉菜单

> ID：11029547
> 
> 赞同：0
> 
> 时间：2012-06-14T08:41:10.403
> 
> 标签：php, javascript, jquery, ajax

我需要像我们跟随的那样创建下拉菜单。

![在此处输入图像描述](../Images/fb2a4cd4bbc54eade277e512ac8b3381.png)

在suppage，幻灯片必须是打开的。

例如，如果我单击服务 2，在服务 2 页面中，幻灯片将打开。服务 2 将作为选定菜单。

我附上了我的代码。

我需要在子页面中打开子菜单。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
<link rel="stylesheet" type="text/css" href="droplinetabs.css" />

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>

<script src="droplinemenu.js" type="text/javascript"></script>

<script type="text/javascript">

droplinemenu.buildmenu("droplinetabs1")

</script>
</head>

<body>
<div id="droplinetabs1" class="droplinetabs">
<ul>
<li><a href="#"><span>Home</span></a></li>
<li><a href="#"><span>About</span></a>
  <ul>
  <li><a href="#">About 1</a></li>
  <li><a href="#">About 2</a></li>
  <li><a href="#">About 3</a></li>
  <li><a href="#">About 4</a></li>
  </ul>
</li>
<li><a href="#"><span>Services</span></a>
  <ul>
  <li><a href="#">Services 1</a></li>
  <li><a href="#">Services 2</a></li>
  <li><a href="#">Services 3</a></li>
  <li><a href="#">Services 4</a></li>
  <li><a href="#">Services 5</a></li>
  </ul>
</li>
<li><a href="#"><span>Gallery</span></a></li>
</ul>
</div>
</body>
</html> 
```

CSS文件

```
.droplinetabs{
    overflow: hidden;
    border-bottom: 1px solid gray; /*underline across bottom of main tabs*/
}

.droplinetabs ul{
    font: bold 11px Verdana, sans-serif;
    margin: 0;
    padding: 0;
    width: 100%;
    list-style: none;
}

.droplinetabs li{
    display: inline;
    margin: 0 2px 0 0;
    padding: 0;
    text-transform: uppercase;
}

.droplinetabs a{
    float: left;
    color: white;
    background: #c76023 url(leftedge.gif) no-repeat left top; /*default background color of tabs, left corner image*/
    margin: 0 4px 0 0;
    padding: 0 0 4px 3px;
    text-decoration: none;
    letter-spacing: 1px;
}

.droplinetabs a:link, .droplinetabs a::visited, .droplinetabs a:active{
    color: white;
}

.droplinetabs a span{
    float: left;
    display: block;
    background: transparent url(rightedge.gif) no-repeat right top; /*right corner image*/
    padding: 7px 9px 3px 6px;
    cursor: pointer;
}

.droplinetabs a span{
    float: none;
}

.droplinetabs a:hover{
    background-color: #b05016; /*background color of tabs onMouseover*/
    color: white;
}

.droplinetabs a:hover span{
    background-color: transparent;
}

/* Sub level menus*/
.droplinetabs ul li ul{
    position: absolute;
    z-index: 100;
    left: 0;
    top: 0;
    background: #c76023; /*sub menu background color */
    visibility: hidden;
}

/* Sub level menu links style */
.droplinetabs ul li ul li a{
    font: normal 13px Verdana;
    padding: 6px;
    padding-right: 8px;
    margin: 0;
    background: #c76023; /*sub menu background color */
}

.droplinetabs ul li ul li a span{
    background: #c76023; /*sub menu background color */
}

.droplinetabs ul li ul li a:hover{ /*sub menu links' background color onMouseover. Add rounded edges in capable browsers */
    background: #714421;
    -webkit-border-radius: 5px;  
    -moz-border-radius: 5px; 
    -khtml-border-radius: 5px;  
    border-radius: 5px;
} 
```

查询文件

```
var droplinemenu={

arrowimage: {classname: 'downarrowclass', src: 'down.gif', leftpadding: 5}, //customize down arrow image
animateduration: {over: 200, out: 100}, //duration of slide in/ out animation, in milliseconds

buildmenu:function(menuid){
    jQuery(document).ready(function($){
        var $mainmenu=$("#"+menuid+">ul")
        var $headers=$mainmenu.find("ul").parent()
        $headers.each(function(i){
            var $curobj=$(this)
            var $subul=$(this).find('ul:eq(0)')
            this._dimensions={h:$curobj.find('a:eq(0)').outerHeight()}
            this.istopheader=$curobj.parents("ul").length==1? true : false
            if (!this.istopheader)
                $subul.css({left:0, top:this._dimensions.h})
            var $innerheader=$curobj.children('a').eq(0)
            $innerheader=($innerheader.children().eq(0).is('span'))? $innerheader.children().eq(0) : $innerheader //if header contains inner SPAN, use that
            $innerheader.append(
                '<img src="'+ droplinemenu.arrowimage.src
                +'" class="' + droplinemenu.arrowimage.classname
                + '" style="border:0; padding-left: '+droplinemenu.arrowimage.leftpadding+'px" />'
            )

            $curobj.hover(
                function(e){
                    var $targetul=$(this).children("ul:eq(0)")
                    if ($targetul.queue().length<=1) //if 1 or less queued animations
                        if (this.istopheader)
                            $targetul.css({left: $mainmenu.position().left, top: $mainmenu.position().top+this._dimensions.h})
                        if (document.all && !window.XMLHttpRequest) //detect IE6 or less, fix issue with overflow
                            $mainmenu.find('ul').css({overflow: (this.istopheader)? 'hidden' : 'visible'})
                        $targetul.dequeue().slideDown(droplinemenu.animateduration.over)
                },
                function(e){
                    var $targetul=$(this).children("ul:eq(0)")
                    $targetul.dequeue().slideUp(droplinemenu.animateduration.out)
                }
            ) //end hover
        }) //end $headers.each()
        $mainmenu.find("ul").css({display:'none', visibility:'visible', width:$mainmenu.width()})
    }) //end document.ready
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T11:42:05.513

我看了你的代码。我不得不说这有点笨拙，因为很多样式都是直接硬编码到你的 JavaScript 中的。理想情况下，您希望分离尽可能多的样式并改用类。下拉菜单的绝对定位并不是真正必要的，并且会导致解决方案更加复杂。

如果您希望其中一个下拉菜单自动出现，您可以例如在该 UL 上添加一个 on 类。所以说你在服务页面上。菜单将改为显示服务选项：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
<link rel="stylesheet" type="text/css" href="droplinetabs.css" />

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>

<script src="droplinemenu.js" type="text/javascript"></script>

<script type="text/javascript">

droplinemenu.buildmenu("droplinetabs1")

</script>
</head>

<body>
<div id="droplinetabs1" class="droplinetabs">
<ul>
<li><a href="#"><span>Home</span></a></li>
<li><a href="#"><span>About</span></a>
  <ul>
  <li><a href="#">About 1</a></li>
  <li><a href="#">About 2</a></li>
  <li><a href="#">About 3</a></li>
  <li><a href="#">About 4</a></li>
  </ul>
</li>
<li><a href="#"><span>Services</span></a>
  <ul class="on">
  <li><a href="#">Services 1</a></li>
  <li><a href="#">Services 2</a></li>
  <li><a href="#">Services 3</a></li>
  <li><a href="#">Services 4</a></li>
  <li><a href="#">Services 5</a></li>
  </ul>
</li>
<li><a href="#"><span>Gallery</span></a></li>
</ul>
</div>
</body>
</html> 
```

然后在您的 JS 中，在所有隐藏发生后，您可以循环遍历 UL 以检查它是否具有“打开”类，它会立即动画。

所以在 $mainmenu.find("ul").... 部分之后添加以下部分

```
 var droplinemenu={

arrowimage: {classname: 'downarrowclass', src: 'down.gif', leftpadding: 5}, //customize down arrow image
animateduration: {over: 200, out: 100}, //duration of slide in/ out animation, in milliseconds

buildmenu:function(menuid){
    jQuery(document).ready(function($){
        var $mainmenu=$("#"+menuid+">ul")
        var $headers=$mainmenu.find("ul").parent()
        $headers.each(function(i){
            var $curobj=$(this)
            var $subul=$(this).find('ul:eq(0)')
            this._dimensions={h:$curobj.find('a:eq(0)').outerHeight()}
            this.istopheader=$curobj.parents("ul").length==1? true : false
            if (!this.istopheader)
                $subul.css({left:0, top:this._dimensions.h})
            var $innerheader=$curobj.children('a').eq(0)
            $innerheader=($innerheader.children().eq(0).is('span'))? $innerheader.children().eq(0) : $innerheader //if header contains inner SPAN, use that
            $innerheader.append(
                '<img src="'+ droplinemenu.arrowimage.src
                +'" class="' + droplinemenu.arrowimage.classname
                + '" style="border:0; padding-left: '+droplinemenu.arrowimage.leftpadding+'px" />'
            )

            $curobj.hover(
                function(e){
                    var $targetul=$(this).children("ul:eq(0)")
                    if ($targetul.queue().length<=1) //if 1 or less queued animations
                        if (this.istopheader){
                            $targetul.css({left: $mainmenu.position().left, top: $mainmenu.position().top+this._dimensions.h})
                        }
                        if (document.all && !window.XMLHttpRequest) //detect IE6 or less, fix issue with overflow
                            $mainmenu.find('ul').css({overflow: (this.istopheader)? 'hidden' : 'visible'})
                        $targetul.dequeue().slideDown(droplinemenu.animateduration.over)
                },
                function(e){
                    var $targetul=$(this).children("ul:eq(0)")
                    $targetul.dequeue().slideUp(droplinemenu.animateduration.out)
                }
            ) //end hover
        }) //end $headers.each()

        $mainmenu.find("ul").css({display:'none', visibility:'visible', width:$mainmenu.width()})
        $($mainmenu.find("ul")).each(function(index) {
            if($(this).hasClass('on')){
                $(this).css({left:$mainmenu.position().left,top:$mainmenu.position().top+$(this).height()})
                $(this).slideDown(droplinemenu.animateduration.over)
            }
        });
    }) //end document.ready
}
} 
```

这不是一个理想的解决方案，因为您应该能够在该 UL 的 on 类上简单地执行“显示：块”，但是因为在您的手风琴 JS 中进行了如此多的样式计算，所以这不能那么容易地完成。不过，这个“hack”应该对你有用，我希望它可以。

我会建议一个更优雅的 jQuery 手风琴解决方案，网上有很多可以查看的。看起来您可能一直在查看您正在使用的 jQuery 版本的一个相对较旧的示例。

# objective-c - Objective-C extern 和 typedef 未定义符号

> ID：11029548
> 
> 赞同：2
> 
> 时间：2012-06-14T08:41:10.683
> 
> 标签：objective-c, typedef, extern

我是objective-c的新手。我有以下内容：

```
@interface HPSEnumerations : NSObject
typedef NSString* HPS_FORMELEMENTTYPE;

extern HPS_FORMELEMENTTYPE Textfield;
extern HPS_FORMELEMENTTYPE Label;
extern HPS_FORMELEMENTTYPE ImageView;
@end 
```

编译器给出以下错误：

> 架构 i386 的未定义符号：“_ImageView”，引用自：

谁能解释发生了什么，以及如何解决？我的基本要求是有一个枚举，其中我有字符串值而不是整数 - 这看起来尽可能接近。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-14T08:52:08.417

`extern`声明不会创建变量，它只是一个承诺，即在当前模块之外的某个地方创建变量。要修复您的错误，您需要在某个实现文件中实际创建它（即在没有“extern”字样的情况下声明它）：

```
// Header
// HPSEnumerations.h
extern HPS_FORMELEMENTTYPE TextfieldType;
extern HPS_FORMELEMENTTYPE LabelType;
extern HPS_FORMELEMENTTYPE ImageViewType;

// Implementation
// HPSEnumerations.m
HPS_FORMELEMENTTYPE TextfieldType = @"Textfield";
HPS_FORMELEMENTTYPE LabelType = @"Label";
HPS_FORMELEMENTTYPE ImageViewType = @"ImageView"; 
```

**PS**我也改变了一些枚举名称，将你的“枚举”放入obj-c接口声明是没有意义的

# svn - Hudson - SCM 轮询配置以检测子项目的修订更改

> ID：11029549
> 
> 赞同：0
> 
> 时间：2012-06-14T08:41:12.413
> 
> 标签：svn, version-control, hudson

我有一个 Maven 项目，它有两个子项目，在我的 SVN 存储库中使用 svn:externals 定义。换句话说，我有一个项目层次结构如下：

-父项目

*   项目
*   测试项目

当我配置我的 hudson 工作时，我只输入了我的父项目的 SVN 地址。当我手动触发构建时，我能够检查所有层次结构并能够运行所有 maven 目标。

所以现在，我想为我的构建配置一个 SCM 轮询机制，所以当我提交代码（尤其是子项目）时，会触发一个构建。问题是 SCM 轮询查看我的父项目的修订号，它没有检测到我的子项目修订更改。

有什么办法可以迫使哈德森也查看我的子项目修订更改？你还有其他建议吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T10:57:52.677

您可以指定多个存储库 URL 并将它们放在适当的位置。例如：

**父项目：**

*存储库网址：*

```
svn://server/repoparent/trunk 
```

*本地模块目录：*

```
. 
```

**项目：**

*存储库网址：*

```
svn://server/repoproject/trunk 
```

*本地模块目录：*

```
./somepath/project 
```

**测试项目：**

*存储库网址：*

```
svn://server/repotest/trunk 
```

本地模块目录：

```
./somepath/project/tests 
```

然后 Hudson 将对 、 和 中的任何一个变化`repoparent/trunk`做出`repoproject/trunk`反应 `repotest/trunk`。

# curl - 卷曲命令不执行我批量执行的操作

> ID：11029551
> 
> 赞同：0
> 
> 时间：2012-06-14T08:41:27.313
> 
> 标签：curl, batch-file, cmd

为什么这个 curl 命令在 CMD 中不起作用。它应该下载一个带有标题的 html 页面，但它看起来像是收到了一些二进制数据..

```
curl -o tested.htm -H "User-Agent: Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.9.1.8) Gecko/20100214 Ubuntu/9.10 (karmic) Firefox/3.5.8" ^
-H "Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8" ^
-H "Accept-Language: en-us,en;q=0.5" ^
-H "Accept-Encoding: gzip,deflate" ^
-H "Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.7" ^
-H "Keep-Alive: 300" ^
-H "Connection: keep-alive" http://request.urih.com/ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T09:32:07.597

```
-H "Accept-Encoding: gzip,deflate" ^ 
```

不应该存在 html 页面

# javascript - 如何在查询中使用特殊字符

> ID：11029557
> 
> 赞同：1
> 
> 时间：2012-06-14T08:41:48.637
> 
> 标签：javascript, html, special-characters

当我尝试搜索 C&A 之类的内容时，我在 Google 中得到的唯一查询是 C... 我怎样才能让这个 JavaScript 转换特殊字符？

```
 function search_google()
{
    window.location = "http://www.google.be/search?q=" + document.google.search.value;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-14T08:45:05.050

您可以使用[encodeURIComponent](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/encodeURIComponent)：

```
function search_google()
{
    window.location = "http://www.google.be/search?q=" + encodeURIComponent(document.google.search.value);
} 
```

# facebook-graph-api - 有位置的对象，有人想出来了吗？

> ID：11029558
> 
> 赞同：1
> 
> 时间：2012-06-14T08:41:52.330
> 
> 标签：facebook-graph-api

此语句可在图形 api (https://developers.facebook.com/docs/reference/api/) 中找到

> 具有位置的对象。以下将返回有关附加了位置信息的对象的信息。此外，返回的对象将是您或您的朋友被标记的对象，或者是您或您的朋友创建的对象。

但是没有说明如何拨打这个电话，有人知道吗？

为了获得纯粹的签到，使用以下内容：[https ://graph.facebook.com/search?type=checkin](https://graph.facebook.com/search?type=checkin)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T12:02:16.423

> 但是没有说明如何拨打这个电话，有人知道吗？

像任何其他 Graph API 调用一样……？通过一个简单的 HTTP 请求，可能包括一个访问令牌，或者借助一个 SDK，它会为您处理更基本的方面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T11:40:53.777

如果您搜索位置对象，您需要包括搜索点和半径，请参见下面的示例，以搜索哥德堡中心 1000 米距离（最大距离为 50000 米）

[https://graph.facebook.com/search?type=location¢er=57.708549,11.975098&distance=1000&access_token=xxx](https://graph.facebook.com/search?type=location&center=57.708549,11.975098&distance=1000&access_token=xxx)

# javascript - 当窗口调整到 480 像素以下时调用函数

> ID：11029559
> 
> 赞同：0
> 
> 时间：2012-06-14T08:41:54.303
> 
> 标签：javascript, jquery

当窗口大小调整到 480 像素以下时，JavaScript 或 jQuery 中有没有办法调用函数？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-14T08:43:05.050

使用 jQuery，您可以执行以下操作：

```
$(window).on("resize", function() {
    if ($(this).width() < 480) {     // or $(this).height() for height check
        // function();
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-09T08:01:02.960

```
var w=$(window).width();
if(w<480)
{
alert(w);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T08:44:41.460

您可以在 Window (http://api.jquery.com/resize/) 上使用 resize 事件，然后检查窗口的大小，如果它低于 480px，请调用您的方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T08:45:03.850

你有没有要求

```
<html>
<head>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
    <script>
        var counter=1;
        $(window).resize(function()
        {
            alert($(this).width());
            if ($(this).width() < 1000)
            {
                counter = incCounter(counter);
            }
            alert("counter = " + counter);
        });
        function incCounter(intvari)
        {
            backValue = intvari;
            backValue++;
            return backValue;
        }
    </script>
</head>
<body>
    Text
</body>
</html> 
```

?

# javascript - 了解 Firefox 扩展结构

> ID：11029560
> 
> 赞同：2
> 
> 时间：2012-06-14T08:41:58.617
> 
> 标签：javascript, firefox-addon

我正在尝试编写一个 Firefox 扩展来拦截某个 HTTP 请求并返回静态内容，而不会将请求发送到实际服务器（类似于 AdBlock）。

我查看了教程，并获得了基本的文件布局。我还发现我需要使用[nsITraceableChannel API](https://developer.mozilla.org/en/XPCOM_Interface_Reference/nsITraceableChannel)并添加一个观察者来做我想做的事情，我有示例代码。

问题是，我实际上将这段代码放在哪里？我的扩展程序何时实际加载和执行？它是在后台持续异步运行，还是按页面视图加载？

文档对此似乎不太清楚。这个扩展不需要 GUI，所以我不需要布局 XUL 文件（或者我需要吗？）。我尝试编写一些 XPCOM（我认为我做得不对）组件，将其注册，`chrome.manifest`但它似乎没有运行。

谁能解释一下 Firefox 扩展是如何工作的，我应该把我的实际 JavaScript 代码放在哪里来监控请求？或者我是否完全了解扩展名有什么问题？附加组件、扩展和插件之间有区别吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-14T11:15:33.480

关于附加组件、扩展和插件之间的区别，你应该看看[这个答案](https://stackoverflow.com/questions/7575658/firefox-add-on-vs-extensions-vs-plugins/7580811#7580811)。但总的来说，你似乎有正确的想法。

问题是，目前有三种截然不同的扩展类型：

1.  经典扩展（不是无重启）：这些通常会[覆盖浏览器窗口](https://developer.mozilla.org/en/XUL_Overlays)并从该覆盖运行代码。由于每个窗口有一个叠加层，因此将有与浏览器窗口一样多的代码实例。然而，经典扩展也可以注册一个 XPCOM 组件（[通过`chrome.manifest`Gecko 2.0](https://developer.mozilla.org/en/XPCOM/XPCOM_changes_in_Gecko_2.0#JavaScript_components)）。该组件将在首次使用时加载，并在整个浏览会话中保留。您可能希望您的组件在浏览器启动时加载，为此您应该在`profile-after-change`类别中注册它并实现`nsIObserver`。
2.  无重启扩展，也称为[引导扩展](https://developer.mozilla.org/en/Extensions/Bootstrapped_extensions)：这些不能注册覆盖，这使得使用浏览器 UI 变得更加复杂。相反，他们有一个`bootstrap.js`脚本，当扩展程序被激活时会加载，这个上下文将留在后台，直到浏览器关闭或扩展程序被禁用。您也可以在无需重启的扩展中拥有 XPCOM 组件，但您必须手动注册它们（通过[nsIComponentRegistrar.registerFactory()](https://developer.mozilla.org/en/XPCOM_Interface_Reference/nsIComponentRegistrar#registerFactory%28%29)和[nsICategoryManager.addCategoryEntry()](https://developer.mozilla.org/en/XPCOM_Interface_Reference/nsICategoryManager#addCategoryEntry%28%29)）。如果扩展程序关闭，您还必须注意取消注册组件。如果您只需要添加一个观察者[nsIObserverService ，这是不必要的](https://developer.mozilla.org/en/XPCOM_Interface_Reference/nsIObserverService#addObserver%28%29)将采用任何实现的对象`nsIObserver`，而不仅仅是已注册为 XPCOM 组件的对象。最大的缺点是：大多数 MDN 示例都是关于经典扩展的，并没有解释如何在无需重启的扩展中做事。
3.  基于[附加 SDK](https://addons.mozilla.org/en-US/developers/builder)的扩展：这些基于生成无需重启扩展的框架。Add-on SDK 有[自己的 API](https://addons.mozilla.org/en-US/developers/docs/sdk/1.7/)，这与您通常在 Firefox 扩展中所做的非常不同 - 但它很简单，它主要负责关闭扩展，因此您不必手动执行此操作。这里的扩展由许多模块组成，`main.js`自动加载并能够根据需要加载其他模块。加载后，只要扩展处于活动状态，每个模块就会一直存在。它们运行沙盒，但您仍然可以[离开沙盒](https://addons.mozilla.org/en-US/developers/docs/sdk/1.7/dev-guide/tutorials/chrome.html)并直接访问 XPCOM。但是，您可能会改用内部[`observer-service`模块](https://addons.mozilla.org/en-US/developers/docs/sdk/1.7/packages/api-utils/observer-service.html)。

# java-bytecode-asm - 在 java 运行时添加额外的代码

> ID：11029580
> 
> 赞同：0
> 
> 时间：2012-06-14T08:43:08.510
> 
> 标签：java-bytecode-asm, bytecode-manipulation, aspect

我正在开发一个库，我需要在运行时向我的对象的一些方法添加额外的代码。这里有两点。首先，我想添加额外代码的程序是之前由其他人编写的，我不想编辑它。其次，我的工作非常类似于在调用方法之前添加方面。

在互联网上搜索和阅读后，我发现了许多框架，如 aspectj、ASPECTWERKZ 等，可以完成这项工作，但例如 aspectj（在 spring 上下文中使用时）的问题是它没有为您提供任何 API在运行时进行编织。我还发现有一些库，如 ASM 和 javassist 等，但它们非常通用且难以学习，而我的工作更可能是方面。

所以你有什么建议？那里有什么好的图书馆吗？我对前面提到的上述库有误吗？请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T14:30:15.133

使用 AspectJ，您可以在运行时加载类时应用方面。请参阅[加载时编织文档](http://www.eclipse.org/aspectj/doc/released/devguide/ltw.html)。或者，您不必更改旧代码，并且可以在编译时应用方面。

# c# - 该进程无法访问文件''，因为它正被另一个进程使用

> ID：11029584
> 
> 赞同：1
> 
> 时间：2012-06-14T08:43:12.773
> 
> 标签：c#, xml

我有 2 个程序，一个是序列化 XXXX.xml，另一个是反序列化 XXXX.xml.temp 文件。这两个程序是独立的，并且使用每个预定义间隔发生的不同线程。

以下是读取 xml 的代码。在这里我得到以下异常：

该进程无法访问文件“”，因为它正被另一个进程使用。

```
 private void StartDiskFlushThread()
    {
        _flushThread = new Thread(ThreadProc);
        _flushThread.IsBackground = true;
        _flushThread.Start();
    }

    private void ThreadProc()
    {
        try
        {
            while (_flushThread.IsAlive)
            {
                FlushStepsToFile();
                Thread.Sleep(_flushInterval);
            }
        }
        catch (Exception ex)
        {
            Console.WriteLine(ex);
            Log.Error("ThreadProc failed", ex);
        }
    }

    private void FlushStepsToFile()
    {
        try
        {
            SerializeSteps(1);
        }
        catch (Exception ex)
        {
            Log.Error("Failed to flush steps to disk, retrying", ex);
            Thread.Sleep(1000);
            SerializeSteps(2);
        }
    }

    private void SerializeSteps(int trycount)
    {
        XmlSerializer serializer = new XmlSerializer(typeof(DetailedSteps));
        try
        {
            using (TextWriter textWriter = new StreamWriter(_targetFileLocation))
            {
                serializer.Serialize(textWriter, _detailedSteps);
            }
        }
        catch (Exception ex)
        {
            Log.ErrorFormat("SerializeSteps method failed. try #{0}. Error:{1}", trycount, ex);
        }
    } 
```

至于读取xml的代码。该程序也是一个将 XXXX.xml 复制到 XXXX.xml.temp 并读取临时文件的线程。

```
 private void CopyPartialLog()
    {
        try
        {
            File.Copy(ReportFile, DestReportFile, true);
        }
        catch (Exception ex)
        {
            Log.Error("CopyPartialLog failed", ex);
        }
    } 
```

我没有例外，因为我正在阅读不同的文件：XXXX.xml.temp

以下是我从第一个编写 xml 的程序中得到的异常：

> 7077846 [SerializeSteps 方法失败。尝试#1。错误：System.IO.IOException：该进程无法访问文件“xxxx.xml”，因为它正被另一个进程使用。在 System.IO.__Error.WinIOError(Int32 errorCode, String maybeFullPath) 在 System.IO.FileStream.Init(String path, FileMode mode, FileAccess access, Int32 rights, Boolean useRights, FileShare share, Int32 bufferSize, FileOptions options, SECURITY_ATTRIBUTES secAttrs , 字符串 msgPath, 布尔 bFromProxy)

我得到的例外是挂起我的作家线程，我不明白为什么。你有什么建议？我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T08:48:16.200

当其他进程正在写入时您无法读取，而当其他进程正在读取时您无法写入（它必须读取文件才能复制它；因此整个复制最终可能毫无意义）。

`FileSystemWatcher`在文件被写入（和关闭）后会收到通知的阅读器上使用怎么样？作者可以使用 a`FileSystemWatcher`来跟踪文件何时被读取或等到完成。

作为替代方案，使用其他形式的进程间通信，例如 TCP/IP、共享内存等。

或者 - 可能有点棘手（如果你不小心，你可能会遇到死锁）：使用互斥锁进行同步。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T08:53:34.827

I had a similiar issue, in a multi-threaded application, where different threads were trying to access the same object. Try using the [lock statement](http://msdn.microsoft.com/en-us/library/c5kehkcz.aspx), for each object that access the file, to prevent simultaneous access to the same file.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T19:50:27.383

我在使用 Xml 时遇到了几乎相同的问题，因为我同时实例化了 XmlReader 和 XmlWiter（您使用了不同的方法，但有同样的问题）。我所做的是在类中设置读取器/写入器变量，但直到它们自己的单独方法才实例化它们。

```
public class XmlTool
{
    public static string filepath = @"C:\\This\That\Folder";
    private static XmlReader reader;
    private static XmlWriter writer;

    public static void Write2Xml(string s)
    {
        writer = XmlWriter.Create(filepath);
        /* Do Stuff */
        writer.Close( );
    }

    public static string ReadFromXml( )
    {
        reader = XmlReader.Create(filepath);
        /* Do Stuff */
        reader.Close( );
    }
} 
```

因此，reader 和 writer 仅在其方法运行时被实例化，然后在方法完成时关闭。此代码不准确，但如果您认为有帮助，我可以将原始代码和评论发送给您。希望能解释一下！

# java - Hibernate OneToOne 加入了唯一但不是主键

> ID：11029590
> 
> 赞同：7
> 
> 时间：2012-06-14T08:43:42.180
> 
> 标签：java, hibernate, annotations, one-to-one

我有两张桌子：

> 1.  用户：
>     
>     
>     *   user_id（主要）
>         
>         
>     *   ETC ..
>         
>         
> 2.  用户信息
>     
>     
>     *   id（主要）
>         
>         
>     *   user_id（唯一）
>         
>         
>     *   ETC ..

我想在现场创建一个从到`user`的oneToOne 关系。请注意，它是唯一的，但不是主要的。可以在Hibernate上完成吗？无论我在做什么，Hibernate 都会尝试使用该字段而不是 u字段。`user_info``user_id``users_info.id``sers_info.user_id`

```
@OneToOne(mappedBy="user_id", cascade = {CascadeType.ALL}, fetch=FetchType.LAZY, optional=true)
@JoinColumn (name="user_id")    
public UserInfo getUserInfo() { return userInfo; }
public void setUserInfo(UserInfo userInfo) { this.userInfo = userInfo; }
private UserInfo userInfo; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T08:55:23.050

在`User`你应该有：

```
@OneToOne(mappedBy="user", cascade = CascadeType.ALL, fetch=FetchType.LAZY, optional=true)
public UserInfo getUserInfo() { return userInfo; } 
```

并在`UserInfo`：

```
@OneToOne
@JoinColumn(name="user_id")
public User getUser() { return user; } 
```

看看[这里](http://docs.jboss.org/hibernate/annotations/3.5/reference/en/html_single/#entity-mapping-association)。这是一对一映射的第二个例子。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T08:48:31.167

为什么你想要一个“唯一”的键，它是一个 1-1 映射和一个代理 ID？这是多余的。只需使两个 PK 相等，因为它是 1-1 映射。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T08:49:15.497

是的，这应该有效。在一对一或多对一中，您在第一个表中有一个主键，在第二个表中有一个外键。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T08:53:20.257

The mapping should work as you have defined the table column to join. But just one thing i am not sure as you defined all annotations over getter method, so will it work in the same manner.

# mysql - 是否可以删除由特定用户创建的所有数据库？

> ID：11029592
> 
> 赞同：3
> 
> 时间：2012-06-14T08:43:52.427
> 
> 标签：mysql, sql

是否可以删除由特定用户创建的所有数据库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T09:12:05.707

查看 MySQL 的[DELETE DATABASE 语法](http://dev.mysql.com/doc/refman/5.1/en/drop-database.html)，通过 MySQL 本身似乎是不可能的。但是，您可以使用查询的 3rd 方应用程序：

```
SELECT db FROM mysql.db WHERE user = "<user>" 
```

获取用户数据库列表，然后遍历结果以查询上面的删除数据库。

# c# - 在 C# 中调试程序集加载问题

> ID：11029599
> 
> 赞同：-2
> 
> 时间：2012-06-14T08:44:23.147
> 
> 标签：c#, .net, vb.net

我创建了两个项目。它们是 VB.Net dll 和 c# .net dll 文件。我正在使用 VB.net dll 文件转换为 c#.dll 文件。当我测试 c#.net dll 文件时，它给出了错误消息**Could not load assemble**。如果我同时使用两者，那么它工作正常。但我必须只使用一个 dll 文件。让我知道如何仅使用 c#.net dll 文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T08:49:09.710

在 .NET 中，项目表示生成的程序集的边界。因此，如果您想要一个 .dll，您需要将所有内容放在一个项目中。

在您无法将 VB.NET 和 C#.NET 混合在一个项目中的情况下，您还有一项额外的任务是使所有内容都使用相同的语言。

# python - Python：如何在异常停止后在 try 语句中继续执行

> ID：11029600
> 
> 赞同：1
> 
> 时间：2012-06-14T08:44:32.440
> 
> 标签：python, exception, try-catch

在我的应用程序中，我正在从文件中加载一些数据。这可能会失败并引发异常。因此，我想记录一个警告并继续加载下一个数据。

我正在这样做：

```
try:
    data_A = getDefaultConf(param_1,param_2)
except Exception as e:
    log(WARNING, "Failed to get default parametres: "+str(e))
try:
    data_B = getDefaultConf(param_1,param_3)
except Exception as e:
    log(WARNING, "Failed to get default parametres: "+str(e))
try:
    data_C = getDefaultConf(param_4,param_5)
except Exception as e:
    log(WARNING, "Failed to get default parametres: "+str(e))
try:
    data_D = getDefaultConf(param_4,param_6)
except Exception as e:
    log(WARNING, "Failed to get default parametres: "+str(e))
try:
    data_E = getDefaultConf(param_4,param_7)
except Exception as e:
    log(WARNING, "Failed to get default parametres: "+str(e)) 
```

它有效，但看起来很重。所以，我的问题是：有没有办法让它更轻？它可能是这样工作的：

```
try:
    data_A = getDefaultConf(param_1,param_2)
    data_B = getDefaultConf(param_1,param_3)
    data_C = getDefaultConf(param_4,param_5)
    data_D = getDefaultConf(param_4,param_6)
    data_E = getDefaultConf(param_4,param_7)
except Exception as e:
    log(WARNING, "Failed to get default parametres: "+str(e))
    # Here something that could work like a "continue" statement so that if loading of
    #  data_2 fails it will store the log and continue by trying to load data_3, etc. 
```

我曾经在其他帖子中看到过一些建议将其放入循环中的答案，但是管理我的参数会不会更重？

我正在以这种方式等待任何建议。无论如何，我的代码都在工作。所以，这只是一个好奇的问题，它也可以帮助其他程序员......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-14T08:48:16.907

在这种情况下，我可能会引入一个新功能（假设您不能或不想更改现有的`getDefaultConf`）：

```
def getDefault(x, y):
    try:
        return getDefaultConf(x,y)
    except Exception as e:
        log(WARNING, "Failed to get default parametres: "+str(e))
    return None

data_A = getDefault(param_1,param_2)
data_B = getDefault(param_1,param_3)
data_C = getDefault(param_4,param_5)
data_D = getDefault(param_4,param_6)
data_E = getDefault(param_4,param_7) 
```

这里唯一的区别是您将`None`返回导致异常的调用。这可能会或可能不会被您的应用程序接受。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-14T08:50:59.050

我会这样做：

```
params = {
    "A": (param_1, param_2),
    "B": (param_1, param_3),
    "C": (param_4, param_5),
    "D": (param_4, param_6),
    "E": (param_4, param_7),
}
data = {}

for key, args in params.items():
    try:
        data[key] = getDefaultConf(*args)
    except Exception as e:
        log(WARNING, "Failed to get default parametres: "+str(e)) 
```

这里唯一的区别是现在可以通过数据字典访问结果，例如`data["A"]`.

请注意，当 引发异常时`getDefaultConf()`，相关条目将不会包含在 dict 中——这可能是好事也可能是坏事，具体取决于您计划如何使用数据。

如果在未分配值时确实需要默认值，则可以使用`data.get("A", None)`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T08:48:25.970

把你的尝试放在方法里面。这样就可以了。

```
def getDefaultConf(param_1,param_2):
    try:
        #code
    except  Exception as e:
        log(WARNING, "Failed to get default parametres: "+str(e)) 
```

# mysql - Drupal 6：无法从 OG 表中获取 group_id(gid)

> ID：11029601
> 
> 赞同：0
> 
> 时间：2012-06-14T08:44:37.293
> 
> 标签：mysql, drupal, drupal-6

我通过获取电子邮件以编程方式创建节点。我在哪里拆分邮件的主题，以便为特定的组和节点的标题创建它。现在我想通过组的描述来获取 group_id 并为其编写查询，但它不起作用。让我在这里粘贴代码..

```
list($group_name, $title_text) = explode(', ', $title);
$query = "SELECT * FROM {og} WHERE og_description = ' ".$group_name." ' ";
$group_details = db_query($query); 
while ($group = db_fetch_object($group_details)) {              
   $gid = $group->nid;
}
echo $gid; 
```

`echo $gid`什么都不给。虽然`$group_name = 'Logo design'`&`gid = 1442`在表中。我在这里有什么遗漏吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T11:59:12.057

查看以下两页，此处给出的示例未在查询中的占位符周围使用单引号（$group_name - 在您的示例中）。

[http://drupal.org/node/310072](http://drupal.org/node/310072)

其中一行说“**请注意，无论其类型如何，都不应转义或引用占位符**”。

[http://drupal.org/node/1407528](http://drupal.org/node/1407528)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T05:39:36.063

我已经解决了。这是答案：-

```
$title = "ED's presentation, This content is for ed's presenation"; //This is the subject of the mail, which I am fetching.

list($group_name, $title_text) = explode(', ', $title);
$query = "SELECT nid FROM {og} WHERE og_description = '".$group_name."'";
$group_details = db_query($query);
while ($group = db_fetch_object($group_details)) {
{
  $gid = $group->nid;
} 
```

谢谢 ：）

# java - 无法插入在 NetBeans GUI 中创建的 JList 模型

> ID：11029607
> 
> 赞同：0
> 
> 时间：2012-06-14T08:44:48.687
> 
> 标签：java, swing, user-interface, netbeans, jlist

我正在尝试使用 NetBeans GUI 编辑器来创建 UI。我读过使用 JLists 时必须手动定义列表模型。我试过这样做，但它仍然不起作用。目标是在单击按钮时在列表中插入一个字符串。

我怀疑我可能把一些东西放在了错误的顺序上，或者把一些东西弄乱了继承。

请参阅以下视频了解问题（观看全屏和 720p）： [http ://www.youtube.com/watch?v=HSB-lDGdQPY&feature=youtu.be](http://www.youtube.com/watch?v=HSB-lDGdQPY&feature=youtu.be)

这是大部分受影响的代码（列表是名为 JList1 的列表）：

```
 private void addBtnActionPerformed(java.awt.event.ActionEvent evt) {                                       
    String post = inputField.getText();
    defaultModel.addElement(post);
} 
```

.

```
private void initComponents() {

titleLbl = new javax.swing.JLabel();
addLbl = new javax.swing.JLabel();
inputField = new javax.swing.JTextField();
addBtn = new javax.swing.JButton();
rememberList = new javax.swing.JScrollPane();
DefaultListModel defaultModel = new DefaultListModel();
jList1 = new javax.swing.JList();

setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);

titleLbl.setFont(new java.awt.Font("Tahoma", 0, 24)); // NOI18N
titleLbl.setText("Remember to:");

addLbl.setFont(new java.awt.Font("Tahoma", 0, 14)); // NOI18N
addLbl.setText("Add new:");

inputField.setFont(new java.awt.Font("Tahoma", 0, 14)); // NOI18N

addBtn.setFont(new java.awt.Font("Tahoma", 0, 14)); // NOI18N
addBtn.setText("Add");
addBtn.addActionListener(new java.awt.event.ActionListener() {
    public void actionPerformed(java.awt.event.ActionEvent evt) {
        addBtnActionPerformed(evt);
    }
});

jList1.setModel(defaultModel);
rememberList.setViewportView(jList1); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T13:52:06.557

我刚刚创建了一个全新的项目，并再次从头开始。现在我让它工作了。不过，现在真的不知道最初的问题是什么。由于继承似乎仍然相同。

# solr - Solr 搜索中的 Solr 字段别名不起作用

> ID：11029612
> 
> 赞同：2
> 
> 时间：2012-06-14T08:44:59.217
> 
> 标签：solr

以下链接说我们可以使用字段别名，如 id、price:crazy_price_field 等。我正在尝试使用它，但这不起作用。 [http://wiki.apache.org/solr/CommonQueryParameters#Field_alias](http://wiki.apache.org/solr/CommonQueryParameters#Field_alias) https://issues.apache.org/jira/browse/SOLR-1205

我的查询：

```
http://localhost:8080/solr/ee_core/select?indent=on&version=2.2&q=\*%3A\*&fq=%2BinstanceId_index_store%3A217&start=0&rows=10&fl=description_index_store%2Cscore&qt=&wt=json 
```

**fl=description_index_store,score**给出正确的结果，字段名称为**description_index_store**和**score**

```
{
    "responseHeader": {
        "status": 0,"QTime": 1,
        "params": {
            "explainOther": "","fl": "description_index_store,score",
            "indent": "on","start": "0","q": "*:*","hl.fl": "","qt": "",
            "wt": "json","fq": "+instanceId_index_store:217","rows": "3",
            "version": "2.2"
        }
    },
    "response": {
        "numFound": 128,"start": 0,"maxScore": 1,
        "docs": [
            {
                "description_index_store": "Apple MacBook - Intel Core 2 Duo",
                "score": 1
            },
            {
                "description_index_store": "Apple MacBook - Intel Core 2 Duo",
                "score": 1
            },
            {
                "description_index_store": "HP Envy - 17.3\" - Intel Core i7",
                "score": 1
            }
        ]
    }
} 
```

但是当我尝试在同一个查询中使用类似**fl=description:description_index_store,score的****别名**时，它不会返回该字段。

 **```
{
    "responseHeader": {
        "status": 0,"QTime": 0,
        "params": {
            "explainOther": "","fl": "description:description_index_store,score",
            "indent": "on","start": "0","q": "*:*","hl.fl": "","qt": "",
            "wt": "json","fq": "+instanceId_index_store:217","rows": "3",
            "version": "2.2"
        }
    },
    "response": {
        "numFound": 128,"start": 0,"maxScore": 1,
        "docs": [
            {
                "score": 1
            },
            {
                "score": 1
            },
            {
                "score": 1
            }
        ]
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T11:52:42.080

您指的是已添加到 Solr 4.0 版本中但尚未发布的功能。事实上，在该wiki 页面的[fl 部分](http://wiki.apache.org/solr/CommonQueryParameters#fl)中有一个感叹号，它告诉您以下内容（仍在 fl 部分中）仅适用于 Solr 4.0。

[SOLR-1205 问题](https://issues.apache.org/jira/browse/SOLR-1205)以及其他改进已在SOLR [-2444 中得到解决：更新 fl 语法以支持：伪字段、AS、转换器和通配符](https://issues.apache.org/jira/browse/SOLR-2444)，这将与 Solr 4.0 一起发布。您可能想查看[Solr 4.0 路线图](http://wiki.apache.org/solr/Solr4.0)以了解何时发布它。**

# matlab - 拉格朗日插值法

> ID：11029615
> 
> 赞同：4
> 
> 时间：2012-06-14T08:45:05.907
> 
> 标签：matlab, interpolation, polynomial-math

我使用卷积和 for 循环（循环太多）来计算插值 `Lagrange's method`，这是主要代码：

```
function[p] = lagrange_interpolation(X,Y)
L = zeros(n);
p = zeros(1,n);

% computing L matrice, so that each row i holds the polynom L_i
% Now we compute li(x) for i=0....n  ,and we build the polynomial 

for k=1:n
    multiplier = 1;
    outputConv = ones(1,1);
    for index = 1:n
        if(index ~= k && X(index) ~= X(k))
            outputConv = conv(outputConv,[1,-X(index)]);
            multiplier = multiplier * ((X(k) - X(index))^-1);
        end
    end
    polynimialSize = length(outputConv);
    for index = 1:polynimialSize
        L(k,n - index + 1) = outputConv(polynimialSize - index + 1);
    end
    L(k,:) = multiplier .* L(k,:);
end

% continues 

end 
```

这些对于计算的循环来说太多了`l_i(x)`（这是在最后一次计算之前完成的`P_n(x) = Sigma of y_i * l_i(x)`）。

有什么建议让它更正式的 matlab 吗？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-19T01:31:32.527

是的，有几个建议（在下面的版本 1 中实现）：`if`循环可以与`for`上面结合（只需通过类似下面的方式`index`跳过）；总是相等的，总是相等的（因为你有数据点，带有系数的多项式），所以最后一个循环和下一行也可以用简单的替换`k``jr(jr~=j)``polynomialSize``length(outputConv)``n``n``(n-1)th``n``for``L(k,:) = multiplier * outputConv;`

所以我在[http://en.wikipedia.org/wiki/Lagrange_polynomial](http://en.wikipedia.org/wiki/Lagrange_polynomial)上复制了这个例子（并采用了他们的`j-m`表示法，但对我来说`j`是`1:n`and `m`is `1:n`and `m~=j`），因此我的初始化看起来像

```
clear; clc;
X=[-9 -4 -1 7]; %example taken from http://en.wikipedia.org/wiki/Lagrange_polynomial
Y=[ 5  2 -2 9];
n=length(X); %Lagrange basis polinomials are (n-1)th order, have n coefficients
lj = zeros(1,n); %storage for numerator of Lagrange basis polyns - each w/ n coeff
Lj = zeros(n); %matrix of Lagrange basis polyns coeffs (lj(x))
L  = zeros(1,n); %the Lagrange polynomial coefficients (L(x)) 
```

然后 v 1.0 看起来像

```
jr=1:n; %j-range: 1<=j<=n
for j=jr %my j is your k
    multiplier = 1;
    outputConv = 1; %numerator of lj(x)
    mr=jr(jr~=j); %m-range: 1<=m<=n, m~=j
    for m = mr %my m is your index
        outputConv = conv(outputConv,[1 -X(m)]);
        multiplier = multiplier * ((X(j) - X(m))^-1);
    end
    Lj(j,:) = multiplier * outputConv; %jth Lagrange basis polinomial lj(x)
end
L = Y*Lj; %coefficients of Lagrange polinomial L(x) 
```

如果您意识到 l_j(x) 的分子只是具有特定根的多项式，则可以进一步简化 - 因为 matlab 中有一个很好的命令 - `poly`。类似地，分母就是在 X(j) 处评估的那个多边形 - 因为存在`polyval`。因此，v 1.9：

```
jr=1:n; %j-range: 1<=j<=n
for j=jr
    mr=jr(jr~=j); %m-range: 1<=m<=n, m~=j
    lj=poly(X(mr)); %numerator of lj(x)
    mult=1/polyval(lj,X(j)); %denominator of lj(x)
    Lj(j,:) = mult * lj; %jth Lagrange basis polinomial lj(x)
end
L = Y*Lj; %coefficients of Lagrange polinomial L(x) 
```

为什么是 1.9 版而不是 2.0 版？好吧，可能有一种方法可以摆脱最后一个 for 循环，并将其全部写在 1 行中，但我现在想不起来 - 这是 v 2.0 的待办事项 :)

而且，对于甜点，如果您想获得与维基百科相同的图片：

```
figure(1);clf
x=-10:.1:10;
hold on
plot(x,polyval(Y(1)*Lj(1,:),x),'r','linewidth',2)
plot(x,polyval(Y(2)*Lj(2,:),x),'b','linewidth',2)
plot(x,polyval(Y(3)*Lj(3,:),x),'g','linewidth',2)
plot(x,polyval(Y(4)*Lj(4,:),x),'y','linewidth',2)
plot(x,polyval(L,x),'k','linewidth',2)
plot(X,Y,'ro','linewidth',2,'markersize',10)
hold off
xlim([-10 10])
ylim([-10 10])
set(gca,'XTick',-10:10)
set(gca,'YTick',-10:10)
grid on 
```

生产

![标度基函数及其总和](../Images/296883614b89e6ac47e49acde09347f7.png)

享受并随意重用/改进

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-17T08:42:33.243

尝试：

```
X=0:1/20:1; Y=cos(X) and create L and apply polyval(L,1). 
polyval(L,1)=0.917483227909543
cos(1)=0.540302305868140 
```

为什么会有巨大的差异？

# iphone - 在内存中缓存uitableview数据

> ID：11029621
> 
> 赞同：2
> 
> 时间：2012-06-14T08:45:44.457
> 
> 标签：iphone, ios, json, caching

我得到一个从 json 调用的数组（包含文本）`titleArray`，我用它填充了一个 uitableview。我想将它缓存在内存中，以便屏幕数据加载一次，每次会话都不需要再次加载。我从来没有这样做过。。

基本上我有两种方法：

`- (void)requestFinishedWithResult:(NSDictionary*)result`

`- (void)requestFailed` 取决于我是否从服务器得到任何东西。

在某处`- (void)requestFinishedWithResult:(NSDictionary*)result`我想我需要一个额外的数组来存储`titleArray`数据......然后做这样的事情：??

```
 -(void)requestFailed
{
    if (titleArray != nil) 
    {
        storeArray = titleArray;
    }
} 
```

或类似的东西？但我真的不知道它应该如何工作。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T08:51:01.537

取决于你想要什么样的持久性。您可以将其存储在磁盘上，然后加载它并拥有更新缓存数据的机制。或者，您可以只存储在 ivar 上并保留它的价值，这样您就可以在应用程序期间获得数据。

# asp.net-mvc - MVC 3 中自定义配置文件属性的最佳策略

> ID：11029625
> 
> 赞同：2
> 
> 时间：2012-06-14T08:45:52.100
> 
> 标签：asp.net-mvc, vb.net

我需要为我的 MVC3 vb.net Web 应用程序的登录用户实现一些（可能是 10 个）自定义属性。这些将定义某些数据如何在我的视图中显示。

我可以想到几个可能的解决方案..

1.  会话变量。会完成这项工作，但看起来有点不整洁，并且不能强类型化
2.  当前用户对象的自定义属性；这甚至可能吗？
3.  自定义配置文件提供程序。看起来这可能是一个不错的选择。

有没有人知道什么对他们有效？

我已经拥有运行良好的自定义成员资格和角色提供程序。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T08:52:01.990

第一个解决方案 - 使用标准的[ASP.NET 配置文件属性](http://msdn.microsoft.com/en-us/library/2y3fs9xs)功能。

如果由于某些原因您不能使用它 - 那么我会投票支持自定义配置文件提供商。

# php - wamp php5.3.5 mssql_connect() 致命错误：调用未定义函数 mssql_connect()

> ID：11029626
> 
> 赞同：0
> 
> 时间：2012-06-14T08:45:54.483
> 
> 标签：php, sql-server

我正在使用 WampServer 版本 2.1、php5.3.5、Apeache2.2.17 我无法使用 mssql_connect()、“mssql_connect() 致命错误：调用未定义的函数 mssql_connect()”我通过谷歌搜索但仍未找到解决方案。

*   我已经尝试安装 SQLSRV30 并配置为导师，但仍然没有运气，
*   我还尝试将此 ntwdblib.dll（版本 2000.80.194.0）复制到目录 php5.3.5/ext 中，但仍然没有成功。

请帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T08:49:28.607

根据[这里](http://www.php.net/manual/en/intro.mssql.php)

> 这些功能允许您访问 MS SQL Server 数据库。此扩展在具有 PHP 5.3 或更高版本的 Windows 上不再可用。SQLSRV，Microsoft SQL 的替代驱动程序可从 Microsoft 获得：» [http://msdn.microsoft.com/en-us/sqlserver/ff657782.aspx](http://msdn.microsoft.com/en-us/sqlserver/ff657782.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-24T22:32:44.673

微软的 sqlsvr 驱动程序没有 x64 支持。安装 32 位版本的 wamp 可能对您有用。

[http://social.msdn.microsoft.com/Forums/sqlserver/en-US/f8bb1ec9-eae1-4bd9-bf71-f2f732f00def/cant-connect-using-64-bit-versions-of-php-and-apache-扩展不会均匀加载](http://social.msdn.microsoft.com/Forums/sqlserver/en-US/f8bb1ec9-eae1-4bd9-bf71-f2f732f00def/cant-connect-using-64-bit-versions-of-php-and-apache-extension-wont-even-load)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T09:20:25.527

首先从[这里](http://www.microsoft.com/en-us/download/details.aspx?id=20098)下载 SQLSRV20.EXE 将文件“php_sqlsrv_53_ts_vc9.dll”放在“wamp\php\ext”文件夹中。

在 php.ini 添加这一行：extension=php_sqlsrv_53_ts_vc9.dll

重启阿帕奇。

然后你应该能够连接：

```
$connectionInfo = array( "Database" => "dbname", "UID" => "username", "PWD" => "password", "CharacterSet" => "UTF-8");
$con = sqlsrv_connect("ipaddress", $connectionInfo);
if( $con === false )
{
  die('Not working: ' . sqlsrv_errors());
} 
```

# android - RadioGroup 选中按钮属性

> ID：11029635
> 
> 赞同：14
> 
> 时间：2012-06-14T08:47:01.600
> 
> 标签：android, xml, radio-button

我正在尝试在默认情况下选中一个 RadioButton 在 Android 中构建 RadioGroup。我想知道这是否可以通过 XML 而不是以编程方式完成。

由于出现错误，以下代码段似乎不起作用：

```
error: Error: No resource found that matches the given name (at 'checkedButton' with value '@id/rdb_positive') 
```

代码是：

```
<RadioGroup
    style="@style/FormInputField"
    android:orientation="vertical"
    android:checkedButton="@id/rdb_positive"> <!-- Error on this line -->
    <RadioButton
        android:id="@+id/rdb_positive"
        android:text="@string/answer_positive" />
    <RadioButton
        android:id="@+id/rdb_negative"
        android:text="@string/answer_negative" />
</RadioGroup> 
```

它在某种程度上确实有意义，因为 RadioButton 的 id 是在设置 RadioGroup 中的属性之后定义的，但是我想知道为什么有这样的属性可用。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-06-14T08:50:19.947

使用`android:checkedButton="@+id/rdb_positive"`，我想你添加`+`符号然后它的作品

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T08:52:34.407

试试这个......

```
<RadioGroup
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:orientation="vertical" >

    <RadioButton
        android:id="@+id/rdb_positive"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:checked="true"
        android:text="answer_positive" />

    <RadioButton
        android:id="@+id/rdb_negative"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="answer_negative" />
</RadioGroup> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-07-15T15:10:08.070

您可以通过在 ids.xml 中声明 id rdb_positive 然后从`RadioGroup`和`RadioButton`元素中引用 id 来消除该错误。

```
<RadioGroup
    style="@style/FormInputField"
    android:orientation="vertical"
    android:checkedButton="@id/rdb_positive"> <!-- REFERENCE TO ids.xml -->
    <RadioButton
        android:id="@id/rdb_positive" 
        android:text="@string/answer_positive" /> <!-- REFERENCE TO ids.xml -->
    <RadioButton
        android:id="@+id/rdb_negative"
        android:text="@string/answer_negative" />
</RadioGroup> 
```

ids.xml：

```
<resources>
    <item type="id" name="rdb_positive" />
</resources> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-03-07T06:52:54.147

```
<RadioGroup
    style="@style/FormInputField"
    android:orientation="vertical"> 
    <RadioButton
        android:id="@+id/rdb_positive"
        android:text="@string/answer_positive"
        android:checked="true"/>  
    <RadioButton
        android:id="@+id/rdb_negative"
        android:text="@string/answer_negative" />
</RadioGroup> 
```

将 android:checked="true" 添加到要设为默认的单选按钮

# jquery - 在 IE 中自动滚动以进行排序

> ID：11029636
> 
> 赞同：0
> 
> 时间：2012-06-14T08:47:02.643
> 
> 标签：jquery

在这个小提琴中，当用户拖动 div 时自动滚动在 chrome 中有效，但在 IE 中无效？

[http://jsfiddle.net/adrianjsfiddlenetuser/FafWW/](http://jsfiddle.net/adrianjsfiddlenetuser/FafWW/)

```
<div style="display:inline-block">
<div id="List1">
        <div>Item1</div>
        <div>Item2</div>
        <div>Item3</div>
        <div>Item4</div>
        <div>Item5</div>
        <div>Item6</div>
        <div>Item7</div>
        <div>Item8</div>
        <div>Item9</div>
    </div>

    <div id="List2">
        <div>Item1</div>
        <div>Item2</div>
        <div>Item3</div>
        <div>Item4</div>
        <div>Item5</div>
        <div>Item6</div>
        <div>Item7</div>
        <div>Item8</div>
        <div>Item9</div>
    </div>
</div>
​
#List1, #List2
{
    height: 300px;
    width: 200px;
    overflow: auto;
    border: solid 2px black;
    margin-bottom: 20px;
    float:left;
    margin:10px;
}

#List1 > DIV, #List2 > DIV
{
    height: 50px;
    border: solid 1px red;
}​

$(function() {
    var sortlists = $("#List1, #List2").sortable({
        tolerance: 'pointer',
        connectWith: '#List1, #List2',
        helper: 'original',
        scroll: true
    });
});​ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T08:51:30.147

我相信这是 jquery-ui 中的一个[已知错误](http://bugs.jqueryui.com/ticket/7546)。正如错误说明所建议的那样，尝试将“位置：相对”放在父 div 上，看看是否可以在 IE 中修复它。

# c# - 将小数四舍五入到特殊位数

> ID：11029638
> 
> 赞同：0
> 
> 时间：2012-06-14T08:47:04.363
> 
> 标签：c#, asp.net

我需要创建一个像这样四舍五入十进制数的函数：

Round("$32.95", 0) 到 -> $33 Round("85.86%", 1) 到 -> 86.9%

其中第一个参数是字符串，第二个参数是所需的小数位数

我正在使用 Math.round 但它正在转换为 85.9

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T08:58:44.793

您可以使用的算法（我不知道 C#）：

*   获得 10 次幂（有效位数）（=P10）
*   将你的十进制数乘以 P10
*   加：0.5
*   将此总和的整数部分除以 (P10) - 答案将是您的四舍五入数

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T09:38:48.520

将字符串转换为 double 并以类似的方式将其传递给 Math.Round，如下所示：

```
double num=32.86;
Math.Round(num);   //Output 33
Math.Round(num, 1) //Output 32.9 
```

# xml - XML XSLT 转换以创建关系主键和外键

> ID：11029640
> 
> 赞同：1
> 
> 时间：2012-06-14T08:47:10.900
> 
> 标签：xml, xslt, primary-key, foreign-key-relationship

我想使用 xslt（主键 PK 和外键 FK）在 xml 中创建父元素和子元素之间的关系。源 xml 如下所示：

```
<root>
    <Patient>
        <Fname>John</Fname>
        <Lname>Doe</Lname>
        <Record>F00025</Record>
        <Disease>
            <Date>3/3/2009</Date>
            <Dcode>D0456</Dcode>
            <Comm>comment</Comm>
            <Medicine>
                <Mcode>M00025</Mcode>
                <Qnt>0.01</Qnt>
                <Unit>l</Unit>
            </Medicine>
        </Disease>
        <Disease>
            <Date>3/15/2009</Date>
            <Dcode>D4415</Dcode>
            <Comm></Comm>
        </Disease>
        <Disease>
            <Date>3/19/2009</Date>
            <Dcode>D0176</Dcode>
            <Comm></Comm>
            <Medicine>
                <Mcode>M00015</Mcode>
                <Qnt>10</Qnt>
                <Unit>ml</Unit>
            </Medicine>
            <Medicine>
                <Mcode>M00006</Mcode>
                <Qnt>1</Qnt>
                <Unit>m</Unit>
                <Icode>
                    <Num>803125</Num>
                    <Num>803005</Num>
                </Icode>
            </Medicine>
        </Disease>
    </Patient>
    <Patient>
        <Fname>Jayne</Fname>
        <Lname>Joyce</Lname>
        <Record>F00156</Record>
        <Disease>
            <Date>3/18/2009</Date>
            <Dcode>D3266</Dcode>
            <Comm></Comm>
            <Medicine>
                <Mcode>M00006</Mcode>
                <Qnt>1</Qnt>
                <Unit>m</Unit>
                <Icode>
                    <Num>803125</Num>
                </Icode>
            </Medicine>
        </Disease>
    </Patient>
</root> 
```

转换后的 XML 应如下所示：

```
<root>
    <Patient>
        <Patient_PK>1</Patient_PK>
        <Fname>John</Fname>
        <Lname>Doe</Lname>
        <Record>F00025</Record>
        <Disease>
            <Disease_PK>1</Disease_PK>
            <Patient_FK>1</Patient_FK>
            <Date>3/3/2009</Date>
            <Dcode>D0456</Dcode>
            <Comm>comment</Comm>
            <Medicine>
                <Medicine_PK>1</Medicine_PK>
                <Disease_FK>1</Disease_FK>
                <Mcode>M00025</Mcode>
                <Qnt>0.01</Qnt>
                <Unit>l</Unit>
            </Medicine>
        </Disease>
        <Disease>
            <Disease_PK>2</Disease_PK>
            <Patient_FK>1</Patient_FK>
            <Date>3/15/2009</Date>
            <Dcode>D4415</Dcode>
            <Comm></Comm>
        </Disease>
        <Disease>
            <Disease_PK>3</Disease_PK>
            <Patient_FK>1</Patient_FK>
            <Date>3/19/2009</Date>
            <Dcode>D0176</Dcode>
            <Comm></Comm>
            <Medicine>
                <Medicine_PK>2</Medicine_PK>
                <Disease_FK>3</Disease_FK>
                <Mcode>M00015</Mcode>
                <Qnt>10</Qnt>
                <Unit>ml</Unit>
            </Medicine>
            <Medicine>
                <Medicine_PK>3</Medicine_PK>
                <Disease_FK>3</Disease_FK>
                <Mcode>M00006</Mcode>
                <Qnt>1</Qnt>
                <Unit>m</Unit>
                <Icode>
                    <Medicine_FK>3</Medicine_FK>
                    <Num>803125</Num>
                    <Num>803005</Num>
                </Icode>
            </Medicine>
        </Disease>
    </Patient>
    <Patient>
        <Patient_PK>2</Patient_PK>
        <Fname>Jayne</Fname>
        <Lname>Joyce</Lname>
        <Record>F00156</Record>
        <Disease>
            <Disease_PK>4</Disease_PK>
            <Patient_FK>2</Patient_FK>
            <Date>3/18/2009</Date>
            <Dcode>D3266</Dcode>
            <Comm></Comm>
            <Medicine>
                <Medicine_PK>4</Medicine_PK>
                <Disease_FK>4</Disease_FK>
                <Mcode>M00006</Mcode>
                <Qnt>1</Qnt>
                <Unit>m</Unit>
                <Icode>
                    <Medicine_FK>4</Medicine_FK>
                    <Num>803125</Num>
                </Icode>
            </Medicine>
        </Disease>
    </Patient>
</root> 
```

到目前为止，这就是我通过搜索这个站点所做的，但我是 XSLT 的新手，所以我被困住了。我想我的主键是正确的，但是问题是外来的，出了点问题。有没有更好的方法将创建的主键复制到子元素？

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method='xml' version='1.0' encoding='UTF-8' indent='yes' />

    <xsl:template match="/ | @* | node()">
            <xsl:copy>
                <xsl:apply-templates select="@* | node()"/>
            </xsl:copy>
    </xsl:template>

    <xsl:template match="Patient">
        <xsl:variable name="PK">
            <xsl:number level="any" count="Patient"/>
        </xsl:variable>

        <xsl:copy>
            <Patient_PK>
                <xsl:value-of select="$PK"/>
            </Patient_PK>
            <xsl:apply-templates select="@*|node()"/>
        </xsl:copy>
    </xsl:template>

    <xsl:template match="Disease">
        <xsl:variable name="PK">
            <xsl:number level="any" count="Disease"/>
        </xsl:variable>
        <xsl:variable name="FK" 
              select="count(../preceding-sibling::*) + 1"/>

        <xsl:copy>
            <Disease_PK>
                <xsl:value-of select="$PK"/>
            </Disease_PK>
            <Patient_FK>
                <xsl:value-of select="$FK"/>
            </Patient_FK>
            <xsl:apply-templates select="@*|node()"/>
        </xsl:copy>
    </xsl:template>

    <xsl:template match="Medicine">
        <xsl:variable name="PK">
            <xsl:number level="any" count="Medicine"/>
        </xsl:variable>
        <xsl:variable name="FK" 
              select="count(../preceding-sibling::*) + 1"/>

        <xsl:copy>
            <Medicine_PK>
                <xsl:value-of select="$PK"/>
            </Medicine_PK>
            <Disease_FK>
                <xsl:value-of select="$FK"/>
            </Disease_FK>
            <xsl:apply-templates select="@*|node()"/>
        </xsl:copy>
    </xsl:template>

    <xsl:template match="Icode">
        <xsl:variable name="PK">
            <xsl:number level="any" count="Icode"/>
        </xsl:variable>
        <xsl:variable name="FK" 
              select="count(../preceding-sibling::*) + 1"/>

        <xsl:copy>
            <Icode_PK>
                <xsl:value-of select="$PK"/>
            </Icode_PK>
            <Medicine_FK>
                <xsl:value-of select="$FK"/>
            </Medicine_FK>
            <xsl:apply-templates select="@*|node()"/>
        </xsl:copy>
    </xsl:template>

</xsl:stylesheet> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T12:52:43.467

**这是一个解决方案**：

```
<xsl:stylesheet version="2.0"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:my="my:my"
    exclude-result-prefixes="xs my">
    <xsl:output omit-xml-declaration="yes" indent="yes"/>

    <xsl:variable name="vPatients" as="element()*">
     <xsl:for-each-group select="/*/Patient/Record" group-by=".">
      <p k="{position()}">
        <xsl:sequence select="."/>
      </p>
     </xsl:for-each-group>
    </xsl:variable>

    <xsl:variable name="vDiseases" as="element()*">
     <xsl:for-each-group select="/*/Patient/Disease" group-by="Dcode">
      <d k="{position()}">
        <xsl:sequence select="Dcode"/>
      </d>
     </xsl:for-each-group>
    </xsl:variable>

    <xsl:variable name="vMedicines" as="element()*">
     <xsl:for-each-group select="/*/Patient/Disease/Medicine" group-by="Mcode">
      <m k="{position()}">
        <xsl:sequence select="Mcode"/>
      </m>
     </xsl:for-each-group>
    </xsl:variable>

 <xsl:template match="node()|@*">
     <xsl:copy>
       <xsl:apply-templates select="node()|@*"/>
     </xsl:copy>
 </xsl:template>

 <xsl:template match="Patient">
  <Patient>
   <Patient_PK><xsl:sequence select="my:PK($vPatients, Record)"/></Patient_PK>
   <xsl:apply-templates/>
  </Patient>
 </xsl:template>

 <xsl:template match="Disease">
  <Disease>
   <Disease_PK><xsl:sequence select="my:PK($vDiseases, Dcode)"/></Disease_PK>
   <Patient_FK><xsl:sequence select="my:PK($vPatients, ../Record)"/></Patient_FK>
   <xsl:apply-templates/>
  </Disease>
 </xsl:template>

  <xsl:template match="Medicine">
  <Medicine>
   <Medicine_PK><xsl:sequence select="my:PK($vMedicines, Mcode)"/></Medicine_PK>
   <Disease_FK><xsl:sequence select="my:PK($vDiseases, ../Dcode)"/></Disease_FK>
   <xsl:apply-templates/>
  </Medicine>
 </xsl:template>

 <xsl:function name="my:PK" as="xs:string">
  <xsl:param name="pCodes" as="element()*"/>
  <xsl:param name="pThis" as="xs:string"/>

  <xsl:sequence select="$pCodes[*[1] eq $pThis]/@k"/>
 </xsl:function>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<root>
    <Patient>
        <Fname>John</Fname>
        <Lname>Doe</Lname>
        <Record>F00025</Record>
        <Disease>
            <Date>3/3/2009</Date>
            <Dcode>D0456</Dcode>
            <Comm>comment</Comm>
            <Medicine>
                <Mcode>M00025</Mcode>
                <Qnt>0.01</Qnt>
                <Unit>l</Unit>
            </Medicine>
        </Disease>
        <Disease>
            <Date>3/15/2009</Date>
            <Dcode>D4415</Dcode>
            <Comm></Comm>
        </Disease>
        <Disease>
            <Date>3/19/2009</Date>
            <Dcode>D0176</Dcode>
            <Comm></Comm>
            <Medicine>
                <Mcode>M00015</Mcode>
                <Qnt>10</Qnt>
                <Unit>ml</Unit>
            </Medicine>
            <Medicine>
                <Mcode>M00006</Mcode>
                <Qnt>1</Qnt>
                <Unit>m</Unit>
                <Icode>
                    <Num>803125</Num>
                    <Num>803005</Num>
                </Icode>
            </Medicine>
        </Disease>
    </Patient>
    <Patient>
        <Fname>Jayne</Fname>
        <Lname>Joyce</Lname>
        <Record>F00156</Record>
        <Disease>
            <Date>3/18/2009</Date>
            <Dcode>D3266</Dcode>
            <Comm></Comm>
            <Medicine>
                <Mcode>M00006</Mcode>
                <Qnt>1</Qnt>
                <Unit>m</Unit>
                <Icode>
                    <Num>803125</Num>
                </Icode>
            </Medicine>
        </Disease>
    </Patient>
</root> 
```

**产生了想要的正确结果：**

```
<root>
    <Patient>
      <Patient_PK>1</Patient_PK>
        <Fname>John</Fname>
        <Lname>Doe</Lname>
        <Record>F00025</Record>
        <Disease>
         <Disease_PK>1</Disease_PK>
         <Patient_FK>1</Patient_FK>
            <Date>3/3/2009</Date>
            <Dcode>D0456</Dcode>
            <Comm>comment</Comm>
            <Medicine>
            <Medicine_PK>1</Medicine_PK>
            <Disease_FK>1</Disease_FK>
                <Mcode>M00025</Mcode>
                <Qnt>0.01</Qnt>
                <Unit>l</Unit>
            </Medicine>
        </Disease>
        <Disease>
         <Disease_PK>2</Disease_PK>
         <Patient_FK>1</Patient_FK>
            <Date>3/15/2009</Date>
            <Dcode>D4415</Dcode>
            <Comm/>
        </Disease>
        <Disease>
         <Disease_PK>3</Disease_PK>
         <Patient_FK>1</Patient_FK>
            <Date>3/19/2009</Date>
            <Dcode>D0176</Dcode>
            <Comm/>
            <Medicine>
            <Medicine_PK>2</Medicine_PK>
            <Disease_FK>3</Disease_FK>
                <Mcode>M00015</Mcode>
                <Qnt>10</Qnt>
                <Unit>ml</Unit>
            </Medicine>
            <Medicine>
            <Medicine_PK>3</Medicine_PK>
            <Disease_FK>3</Disease_FK>
                <Mcode>M00006</Mcode>
                <Qnt>1</Qnt>
                <Unit>m</Unit>
                <Icode>
                    <Num>803125</Num>
                    <Num>803005</Num>
                </Icode>
            </Medicine>
        </Disease>
    </Patient>
    <Patient>
      <Patient_PK>2</Patient_PK>
        <Fname>Jayne</Fname>
        <Lname>Joyce</Lname>
        <Record>F00156</Record>
        <Disease>
         <Disease_PK>4</Disease_PK>
         <Patient_FK>2</Patient_FK>
            <Date>3/18/2009</Date>
            <Dcode>D3266</Dcode>
            <Comm/>
            <Medicine>
            <Medicine_PK>3</Medicine_PK>
            <Disease_FK>4</Disease_FK>
                <Mcode>M00006</Mcode>
                <Qnt>1</Qnt>
                <Unit>m</Unit>
                <Icode>
                    <Num>803125</Num>
                </Icode>
            </Medicine>
        </Disease>
    </Patient>
</root> 
```

# c# - 在 C# 中读取 cookie

> ID：11029643
> 
> 赞同：7
> 
> 时间：2012-06-14T08:47:22.487
> 
> 标签：c#, cookies

我希望访问我的国际化网站的人能够更改语言。我认为最好的方法是将选择的语言存储在 cookie 中 - 所以当页面加载时，它可以在 cookie 中查找首选语言。

编写 cookie 很完美，但是我在尝试读取它时一直遇到错误。由于我是 C# 新手，我无法翻译 Visual Studio 向我抛出的错误。

我想要一个名为 'UserSettings' 的 cookie 在名为 lang 的字符串中的值。我正在尝试这样：

```
string lang = Request.Cookies["UserSettings"].Value; 
```

它抛出的错误是：

> 你调用的对象是空的

我认为问题必须在语句的右侧，因为我正在初始化左侧的字符串。

我也尝试通过做一个cookie实例

```
HttpCookie cookie = Request.Cookies["UserSettings"].Value; 
```

但视觉工作室根本不喜欢这个。

我究竟做错了什么？我是否必须创建 Request 对象的实例？任何帮助，将不胜感激。

我正在关注关于这个主题的不同教程，但它们都会导致同样的错误。

**编辑：**我注意到我有

```
HttpCookie cookie = Request.Cookies["UserSettings"].Value; 
```

我将其更改为：

```
HttpCookie cookie = Request.Cookies["UserSettings"]; 
```

但没有运气，它仍然没有工作。

**编辑：**这就是我的饼干的制作方式

```
 public void Application_BeginRequest()
    {
        myCookie = new HttpCookie("UserSettings");
        myCookie.Value = "nl";
        myCookie.Expires = DateTime.Now.AddDays(1);
        Response.Cookies.Add(myCookie);
        hc = new HomeController();
    } 
```

我的 cookie 100% 在那里，我绝对确定，我可以在 Firefox-web 开发人员中看到它。

更新：这是我现在调用的确切代码

```
 public string getLang()
    {
       // HttpCookie aCookie = Request.Cookies["UserSettings"];
       //  string lang = Server.HtmlEncode(aCookie.Value);
       //  if (lang != null)
       // {
       //      currentLanguage = lang;
       //  }
        return currentLanguage;
    } 
```

这样我的代码就可以编译，如果我取消注释我的代码，那么它就会编译（错误@此方法的第一行）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-14T09:09:20.940

听起来cookie从未被设置。在这种情况下，您需要检查：

```
HttpCookie aCookie = Request.Cookies["UserSettings"];
if(aCookie != null) {
     object userSettings = aCookie.Value;
} else {
     //Cookie not set.
} 
```

要设置 cookie：

```
HttpCookie cookie = new HttpCookie("UserSettings");

cookie["UserSettings"] = myUserSettingsObject;
cookie.Expires = DateTime.Now.AddYears(1);
Response.Cookies.Add(cookie); 
```

这是一篇好文章：[http ://www.java2s.com/Code/ASP/Session-Cookie/CreateandretrieveCookiedataC.htm](http://www.java2s.com/Code/ASP/Session-Cookie/CreateandretrieveCookiedataC.htm)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-14T08:51:31.920

你能试试这个吗？

```
HttpCookie aCookie = Request.Cookies["UserSettings"];
string lang = Server.HtmlEncode(aCookie.Value); 
```

[http://msdn.microsoft.com/en-us/library/ms178194.aspx](http://msdn.microsoft.com/en-us/library/ms178194.aspx)

编辑这对你有帮助吗？ [asp.net mvc 无法访问基本控制器中的 cookie 数据](https://stackoverflow.com/questions/1358085/asp-net-mvc-cant-access-cookie-data-in-base-controller)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-12T13:35:27.703

您在其中创建 cookie`Application_BeginRequest()`并将结果添加到`Response`. 只有*在*返回响应后才会在客户端创建它。

但是您正在从状态中读取 cookie 值，也许在带有 cookie 的响应*之前*`Request`的原始请求已被发送回客户端？然而，在生命周期内的这个时候，这个 cookie 不包含在 中，因此是.*`Request``null`*

 **您的客户端必须在创建 cookie后*发送另一个请求才能使其对服务器可用，这对我来说非常有意义。

您可以在 Web 开发人员工具中看到 cookie 的原因是，服务器将`Response`返回给客户端。但是，它不会以当前`Request`状态存在，除非客户端将发送带有 cookie 的新请求。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-07-03T09:29:07.090

设置 cookie 值：

```
HttpCookie Userinfo= new HttpCookie("Userinfo");
Userinfo["Username"] = application.username.ToString();
Response.Cookies.Add(Userinfo); 
```

要获取 cookie 值：

```
HttpCookie reqUserinfocookies = Request.Cookies["Userinfo"];
if (reqUserinfocookies != null)
{
string username = reqUserinfocookies["username"];
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-14T08:56:10.473

首先检查是否创建了cookie。
为此，请使用 firefox 并添加 webdeveloper 插件
安装 webdeveloper 后，firefox 浏览器上会出现一个工具栏，选择 cookie 选项卡上的
cookies -> 查看 Cookies 信息它将显示所有 cookie 及其属性。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-12-23T20:22:57.167

```
HttpCookie myCookie = new HttpCookie("UserSettings");
myCookie = Request.Cookies["UserSettings"];
string lang = myCookie.Value.ToString(); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-12-30T22:06:15.580

尝试设置 cookie.Path = "/";

在添加 cookie 之前。*

# wpf - 在 XAML 中定义和启动的 Storyboard 上的 GetCurrentState

> ID：11029644
> 
> 赞同：5
> 
> 时间：2012-06-14T08:47:27.623
> 
> 标签：wpf, xaml, storyboard

我已经搜索了所有内容，似乎无法找到有关此问题的答案。我的应用程序生活在松散的 XAML 世界中，因此必须依靠 XamlReaders 和树遍历来查找元素。我有一个组件可以处理这些 XAML 页面的呈现。该渲染器需要知道可以在加载的 XAML 上运行的情节提要的状态。所以我想在我的渲染器中做的是这样的： -

```
var resources = _currentScreenFrameworkElement.Resources;
foreach (var item in resources.Values)
{
    if (item is Storyboard)
    {
        try
        {
            var storyboard = item as Storyboard;
            **if (storyboard.GetCurrentState() == ClockState.Active)** 
```

一切都很好。但是问题是当我尝试对 CurrentState 进行 dcheck 时，它会引发异常：-

```
"Cannot perform action because the specified Storyboard was not applied to this object for interactive control." 
```

环顾四周，我看到这是因为我需要使情节提要可控。所以我的问题是如何在 XAML 中执行此操作？我没有在代码中启动故事板，因此无法将 true 传递给重载的 BeginStoryboard。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-21T19:49:24.217

I just ran into this same problem so i figured i'd share my findings.

**You get that error when your storyboard is not marked as Controllable**. Storyboards are marked as Controllable when the Begin method is called.

If you're doing it from code behind then you just use an overload that has this `IsControllable` boolean argument ([list of Begin overloads](http://msdn.microsoft.com/en-us/library/system.windows.media.animation.storyboard.begin.aspx)).

If you've used the BeginAnimation element in Xaml then you'll need to do 2 things.

1.  assign a `Name` to the BeginAnimation element. The [documentation](http://msdn.microsoft.com/en-us/library/system.windows.media.animation.beginstoryboard.name.aspx) for this property states: "If the Name of BeginStoryboard is unspecified, the Storyboard cannot be interactively affected after it is begun"
2.  When you're trying to interact with your storyboard in codebehind you must pass in the reference to the object that your BeginStoryboard was declared in.

Here's an example showing you step 1 (name the beginstoryboard)

```
<Button Name="btn1" Content="bla">
  <Button.Triggers>
    <EventTrigger RoutedEvent="Button.Click">
      <BeginStoryboard 
             Name="bnt1_beginStoryboard" 
             Storyboard={StaticResource someSharedStoryboard}"/>
    </EventTrigger>
  </Button.Triggers>
</Button> 
```

and here's an example for step 2\. Since you've named your beginStoryboard you can use that as a local variable in your class.. or you can just reference the actual storyboard directly. The main point is that you must pass in the owner of the beginStoryboard (which is the button in this case)

```
//The main point here is that we're passing in btn1
bnt1_beginStoryboard.Storyboard.Stop(btn1);
bnt1_beginStoryboard.Storyboard.SkipToFill(btn1);
bnt1_beginStoryboard.Storyboard.Resume(btn1); 
```

Here's a list of all the "action" methods on a storyboard that require you to pass in the owning framework element: [Control a Storyboard After It Starts](http://msdn.microsoft.com/en-us/library/ms741997.aspx)

# ruby-on-rails-3 - 在 Ruby on Rails 中，有没有办法使用 RSpec/Capybara 检查表中行的顺序以进行视图测试？

> ID：11029646
> 
> 赞同：2
> 
> 时间：2012-06-14T08:47:28.527
> 
> 标签：ruby-on-rails-3, rspec, capybara

我有一张有很多行的桌子。这些行根据其中的数据进行排序。我正在寻找为表中行的顺序编写测试。有没有办法使用 RSpec/Capybara 做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T20:34:41.273

您可以尝试使用 xpath 选择器，例如

```
within(:xpath, "//table/tr[1]/td") do
  page.should have_content('First row content')
end

within(:xpath, "//table/tr[2]/td") do
  page.should have_content('Second row content')
end 
```

# oauth - 访问 Google 电子邮件设置 API 需要哪些权限？

> ID：11029652
> 
> 赞同：0
> 
> 时间：2012-06-14T08:47:56.780
> 
> 标签：oauth, google-api, google-email-settings-api

似乎没有关于此 API 实际需要哪些权限的明确文档，或者在域仪表板中允许它的明显方法。

我有一个脚本可以在“超级管理员”使用它时工作 - 但在“管理员”尝试时不行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T20:26:11.260

电子邮件设置 API 只能由对域具有完全管理权限的用户使用，即超级管理员。

# sql - XML 数据类型方法“值”必须是字符串文字

> ID：11029674
> 
> 赞同：9
> 
> 时间：2012-06-14T08:49:17.650
> 
> 标签：sql, xml, tsql, sqlxml

如何更改我的查询，以免发生此错误：

> XML 数据类型方法“值”必须是字符串文字

T-SQL 代码：

```
Declare @Count Int = 1 
While(@count <= @j) 
Begin 
insert into mytable 
([Word]) 
Select ([XmlColumn].value(N'word['+Cast(@Count as nvarchar(2))+']/@Entry','nvarchar(max)')) 
    from OtherTable WHERE ID=2 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-14T09:16:06.690

对于 value 方法，您不能以这种方式将变量连接为字符串。你需要使用`sql:variable("@VariableName")`.

所以你的例子是这样的：

```
Declare @Count Int = 1 
While(@count <= @j) 
Begin 
insert into mytable 
([Word]) 

Select ([XmlColumn].value(N'/word[sql:variable("@Count")]/@Entry)[1]','nvarchar(max)'))
    from OtherTable WHERE ID=2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T09:32:29.723

以为我会寻找一种不需要`WHILE`循环的方法。主要问题是与节点一起返回项目位置，但我在这篇文章的最后一个答案中找到了解决方法：http: [//social.msdn.microsoft.com/Forums/nl/sqlxml/thread/46a7a90d-ebd6- 47a9-ac56-c20b72925fb3](http://social.msdn.microsoft.com/Forums/nl/sqlxml/thread/46a7a90d-ebd6-47a9-ac56-c20b72925fb3)

因此，替代方法是：

```
insert into mytable ([Word]) 
select word from (
    Select 
        words.value('@entry','nvarchar(max)') as word,
        words.value('1+count(for $a in . return $a/../*[. << $a])', 'int') as Pos   
    from
        OtherTable ot
        cross apply ot.XMLColumn.nodes('words/word') x(words)
) sub where Pos <= @j 
```

基本上内部查询返回每个单词及其位置，这可以由外部查询过滤。

作为参考，我对`OtherWords`表格的定义是：

```
create table OtherTable (XMLColumn xml)
insert OtherTable (XMLColumn)
select '<words><word entry="Wibble"/><word entry="Hello"/><word entry="World"/></words>' 
```

# macros - 可以避免这种自由项变量错误（在宏扩展时产生）吗？

> ID：11029675
> 
> 赞同：9
> 
> 时间：2012-06-14T08:49:20.087
> 
> 标签：macros, scala-2.10

我正在开发 DSL，但在扩展宏时遇到“免费期限”失败。我想知道是否可以避免。我已将问题简化为以下情况。

假设我们有这个表达式：

```
val list = join {
  0
  1
  2
  3
}
println(list) 
```

其中 join 是一个宏，其实现是：

```
def join(c: Ctx)(a: c.Expr[Int]): c.Expr[List[Int]] = {
  import c.mirror._
  a.tree match {
    case Block(list, ret) =>
      // c.reify(List(new c.Expr(list(0)).eval, 
      //              new c.Expr(list(1)).eval,
      //              new c.Expr(list(2)).eval) :+ new c.Expr(ret).eval)
      c.reify((for (expr <- list) yield new c.Expr(expr).eval) :+ new c.Expr(ret).eval)
  }
} 
```

宏的目的是连接参数块中的所有元素并将它们返回到一个列表中。由于块的内容可能是可变的，我不能使用带注释的 reify （效果很好）。未注释的 - 带有 for 理解，生成免费术语 - 抛出消息：

*“宏扩展包含通过在 Macros.scala:48:18 中加入定义的自由术语变量列表。你在将这个变量拼接到一个 reifee 时忘记使用 eval 吗？如果你在跟踪自由术语变量时遇到问题，请考虑使用 -Xlog-free-条款”*

有什么方法可以在不出现此错误的情况下引入 for-comprehension（或迭代器或其他）？顺便说一句，我使用的是2.10-M3。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-14T13:57:36.183

问题是您的代码混合了编译时和运行时概念。

您使用的“列表”变量是编译时值（即它应该在编译时迭代），并且您要求 reify 将其保留到运行时（通过拼接派生值）。这个跨阶段的难题导致了所谓的自由条款的产生。

简而言之，免费术语是指早期阶段的值的存根。例如，以下代码段：

```
val x = 2
reify(x) 
```

将编译如下：

```
val free$x1 = newFreeTerm("x", staticClass("scala.Int").asTypeConstructor, x);
Ident(free$x1) 
```

聪明吧？结果保留了 x 是一个 Ident 的事实，保留了它的类型（编译时特性），但仍然引用了它的值（运行时特性）。这可以通过词法作用域来实现。

但是，如果您尝试从宏扩展中返回这棵树（即内联到宏的调用站点中），事情就会崩溃。宏的调用站点很可能在其词法范围内没有 x，因此它无法引用 x 的值。

更糟糕的是。如果上面的代码片段写在宏中，那么 x 只存在于编译时，即在运行编译器的 JVM 中。但是当编译器终止时，它就消失了。

但是，包含对 x 的引用的宏扩展的结果应该在运行时运行（很可能在不同的 JVM 中）。为了理解这一点，您需要跨阶段持久性，即以某种方式序列化任意编译时值并在运行时反序列化它们的能力。我不知道如何用像 Scala 这样的编译语言来做到这一点。

* * *

请注意，在某些情况下，跨阶段持久性是可能的。例如，如果 x 是静态对象的字段：

```
object Foo { val x = 2 }
import Foo._
reify(x) 
```

那么它就不会成为一个免费的术语，而是会以一种直接的方式被具体化：

```
Select(Ident(staticModule("Foo")), newTermName("x")) 
```

这是一个有趣的概念，SPJ 在 2012 年 Scala 日的演讲中也讨论了这个概念：http: [//skillsmatter.com/podcast/scala/haskell-cloud](http://skillsmatter.com/podcast/scala/haskell-cloud)。

为了验证某些表达式不包含自由项，在 Haskell 中，他们向编译器添加了一个新的内置原语，即`Static`类型构造函数。使用宏，我们可以通过使用 reify（它本身只是一个宏）自然地做到这一点。请参阅此处的讨论：[https](https://groups.google.com/forum/#!topic/scala-internals/-42PWNkQJNA) ://groups.google.com/forum/#!topic/scala-internals/-42PWNkQJNA 。

* * *

好的，现在我们已经看到原始代码到底有什么问题，那么我们如何让它工作呢？

不幸的是，我们将不得不退回到手动 AST 构造，因为 reify 很难表达动态树。在宏观学中 reify 的理想用例是拥有一个静态模板，其中包含在宏编译时已知的漏洞类型。退一步——你将不得不依靠手工建造树木。

底线是您必须使用以下内容（适用于最近发布的 2.10.0-M4，请参阅 scala-language 的迁移指南以了解究竟发生了什么变化：[http ://groups.google.com/group/scala -language/browse_thread/thread/bf079865ad42249c](http://groups.google.com/group/scala-language/browse_thread/thread/bf079865ad42249c)）：

```
import scala.reflect.makro.Context

object Macros {
  def join_impl(c: Context)(a: c.Expr[Int]): c.Expr[List[Int]] = {
    import c.universe._
    import definitions._
    a.tree match {
      case Block(list, ret) =>
        c.Expr((list :+ ret).foldRight(Ident(NilModule): Tree)((el, acc) => 
          Apply(Select(acc, newTermName("$colon$colon")), List(el))))
    }
  }

  def join(a: Int): List[Int] = macro join_impl
} 
```

# php - 关于 ORM 的一些混淆

> ID：11029678
> 
> 赞同：1
> 
> 时间：2012-06-14T08:49:33.390
> 
> 标签：php, mysql, orm

我对 ORM（对象关系映射）几乎没有混淆

我正在考虑在我即将推出的网站（社交网络）中使用 ORM

1.  ORM 是访问/操作数据库的更快方法吗？

2.  如果我使用 ORM，我如何调用过程或函数。

3.  将 ORM 用于流量可能很高的社交网站是否是个好主意（200 个用户可以同时访问网站）（我相信用户不能超过 10 000）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T08:55:13.093

> ORM 是访问/操作数据库的更快方法吗？

通常，ORM 将减少开发时间和维护工作，以换取运行时性能的降低。（性能损失通常不显着）。

> 如果我使用 ORM，我如何调用过程或函数。

这取决于具体的 ORM

> 将 ORM 用于流量可能很高的社交网站是否是个好主意

是的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T08:55:50.863

1.  在性能方面不行，在编码工作方面是的
2.  就好像你不使用它一样......请更清楚这一点
3.  当然好！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T09:41:23.000

请不要认为这是冒犯，但如果您唯一关心的是使用 ORM 可能会受到什么性能损失，那么您已经做错了。)

其实有很多因素需要考虑。这些标签建议您打算在您的项目中使用 PHP-MySQL 组合。但是您真的*了解*这些工具吗？或者您想在过程中学习它们？

*如果是后者，无论如何*我都绝对推荐使用 ORM - 但不是独立的。我建议您在已建立（且文档齐全）的 MVC 框架上构建您的项目，并使用它的 ORM。看，将 ORM 与抽象概念一起使用是一回事，而在特定框架的上下文中将*其用作工具则是另一回事。*

选择什么框架，那是另一个问题；我真的建议看一下[Symfony 2——](http://symfony.com/what-is-symfony)它集成了一个非常强大的 ORM 库（Doctrine），但是如果你需要它，你仍然可以使用直接查询。)

PS 我建议阅读 Martin Fowler 的这篇[精彩的文章](http://java.dzone.com/articles/martin-fowler-orm-hate)：与其说是“讨厌 ORM”，不如说主要关注应该如何看待 ORM。

# php - Facebook：由于第 1106 行 /app/www/sdk/src/base_facebook.php 中的资源限制，无法完成此 API

> ID：11029679
> 
> 赞同：0
> 
> 时间：2012-06-14T08:49:35.250
> 
> 标签：php, facebook, heroku, facebook-fql, facebook-php-sdk

我目前正在使用 Facebook 的 PHP API 来收集共同朋友的数据。我目前正在按照此处的建议进行查询：[Facebook 共同朋友和 FQL 4999/5000 记录限制](https://stackoverflow.com/questions/4281210/facebook-mutual-friends-and-fql-4999-5000-record-limit)，使用 array_chunk 方法。请问抛出上述错误的可能原因是什么？可能的资源限制是什么？

起初，我尝试将 php 脚本的内存限制增加到 128MB，但我使用了 memory_get_usage(true)，当我遇到上述情况时，它给了我的数字远低于这个数字（转换后，它小于 3MB）-提到Facebook错误。

这是由于 Facebook 或我的脚本造成的资源限制吗？

这是我的书面代码：

```
$chunked_friends = array_chunk($all_friends_id, 100); // we use 100 for now, if there is loss of information, then we consider another way

foreach ($chunked_friends as $array) {
  $mutualfriends = $facebook->api(array(
    'method' => 'fql.query',
    'query' => 'SELECT uid1, uid2 FROM friend 
                WHERE uid2 IN 
                (SELECT uid2 FROM friend WHERE uid1=me())   
                AND uid1 < uid2 
                AND uid1 IN ( '. implode(', ', $array) .' )'
    ));

  foreach ($mutualfriends as $mutualfriend) {
        $returned_array["links"][] = array("source" => $mutualfriend['uid1'], "target" => $mutualfriend['uid2']);
  }
    usleep(200000);
} 
```

编辑：我目前正在使用 heroku 开发我的应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T06:36:42.477

最后，我使用了[批处理请求](http://developers.facebook.com/docs/reference/api/batch/)，这似乎解决了问题。我不确定是什么构成了太多的 API 调用，因为 FB 也没有真正说明。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T08:41:24.173

> 这是由于 Facebook 造成的资源限制吗

是的。

检查您的应用洞察（“API”部分）以查看它是否特定于您的应用（在给定时间段内请求过多/过大）。

# java - Java中用于访问/修改的最快数据结构

> ID：11029681
> 
> 赞同：3
> 
> 时间：2012-06-14T08:49:36.330
> 
> 标签：java, performance, data-structures

嗨，Stackoverflowers！

当我想知道如果我必须访问/编辑大量数据时哪个是最快的数据结构可以让我获得最佳性能时，我正在编写一个项目？

让我用一个例子来解释。我有一个名为 User 的类和一个类 Event。一个用户可以有很多事件。到目前为止，我已经使用 ArrayList 实现了这种情况：

```
public class User{
    ArrayList<Event> events;
    public void process(){
    }
    ...
}
public class Event{
    event data like event time etc.
} 
```

由于我有很多用户（数百万），每个用户都可能有数千个事件，此外，我必须使用 process() 方法访问用户的每个事件，我认为使用 HashMaps 等结构不会有帮助（如果错了请告诉我）。但是，很明显，有了这么多的元素，就需要良好的性能。

那么，您认为处理事件最快的数据结构是什么？

非常感谢你，

马可。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T08:55:53.313

这听起来像是更适合数据库的工作，特别是如果您想要持久性和/或您的数据可能不适合您计算机的主内存。

但是，如果您坚持在自己的代码中执行此操作，则可能需要查看[`LinkedHashMap`](http://docs.oracle.com/javase/6/docs/api/java/util/LinkedHashMap.html)该类。它允许以恒定（即 O(1)）复杂度直接访问其元素，同时还结合了内部链表以允许对所有元素进行快速迭代。

当然，一个`HashMap`结构是否有用取决于你想做什么。例如，如果您想根据某种标识符搜索事件，那么 a`HashMap`是理想的。

另一方面，如果您只需要根据事件的插入顺序访问事件，那么您不能做得比 更好[`ArrayList`](http://docs.oracle.com/javase/7/docs/api/java/util/ArrayList.html)，因为它支持以恒定复杂性对其内容进行索引访问。如果您只需要在队列或堆栈中处理它们，Java 有几个[`Deque`](http://docs.oracle.com/javase/7/docs/api/java/util/Deque.html)您可能感兴趣的接口实现。

最后，如果你想随机插入你的键并让底层结构自己对它们进行排序，你可能会发现这个[`TreeMap`](http://docs.oracle.com/javase/6/docs/api/java/util/TreeMap.html)类很有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T09:07:57.020

有两件事：

1-在当前情况下，如果并发用户不是问题，那么您可以轻松地使用 arraylist 作为其更快更简单的数据结构，否则如果并发用户是问题，那么您可以轻松地使用向量来存储您的事件。

2-您可以使用队列 DS，这将帮助您进行动态操作，例如插入/删除，这比 arraylist 和 vecotr 更快，因为它使用迭代器。

我希望它有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T09:22:10.257

如果您的数据适合主内存，那么您最好的解决方案是 java 集合和普通数组（取决于随机访问、顺序性、需要持久更改或其他任何内容）如果您的数据增长超过单个系统内存，您将获得更好的性能一些可集群的 no-sql 解决方案（同样，正确工具的选择取决于您喜欢对数据做什么）

# php - JSON的双重编码

> ID：11029683
> 
> 赞同：0
> 
> 时间：2012-06-14T08:49:48.183
> 
> 标签：php, javascript, ampersand, double-quotes, encodeuricomponent

在我的大多数 AJAX 函数中，我必须对用户输入的自由文本进行双重编码，即我必须执行 encodeURIComponent(encodeURIComponent(myString))。

如果我只做一次，除了双引号和长连字符之外的大多数符号都有效。

如果我从单个编码中警告结果，引号被编码，但它会破坏 JSON 字符串，这就是我感到困惑的原因。

这是 JavaScript 的错误还是我遗漏了什么？它是否与您必须在 PHP 中对 & 符号进行双重编码才能使其工作的方式有关？

* * *

你好，

这是允许用户针对某事存储注释的代码：

```
function saveAdminNote() {

var note = encodeURIComponent(encodeURIComponent($('#adminNote').val().replace(/(\r\n|\n|\r)/gm,""))) ;
JSON = '{"mode":"UPDATE_INTNOTE", "jobid":'+jobId+', "note":"'+note+'"}' ;

clearTimeout(tOut2) ;
tOut2 = setTimeout(function(){             
    $.ajax({
        data: 'dataString='+JSON,
        url: 'core/job-builder-controlV2.php',
        type: 'POST',
        success: function(data){
            if(data)
            {
                $.prompt(data) ;
            }
        }
    })

}, 250) ;

} 
```

* * *

那么如果我的数据结构是扁平的，那么使用 JSON 就没有优势了吗？

我的印象是 JSON 提供了更多的安全性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T10:10:15.553

不要手动构造 JSON，让正确的[`JSON.stringify`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/JSON)方法为您完成工作（也不要覆盖全局 JSON 对象）。

```
json = JSON.stringify({
   "mode":"UPDATE_INTNOTE",
   "jobid": jobId,
   "note": $('#adminNote').val() 
}) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T10:11:07.473

基本问题是您试图通过将字符串混搭在一起（而不是使用 JSON 库）来构造 JSON……并对这些字符串的部分进行编码（而不是对生成的 JSON 字符串进行编码（即您想要放置的非 URI 数据）进入 URI）... jQuery 将为您做的）。

如果您想将 JSON 作为表单编码数据请求的一部分提交，那么您将：

```
$.ajax({
    data: { 
        dataString: JSON.stringify({ 
            "mode": "UPDATE_INTNOTE", 
            "jobid": jobId, 
            "note": $('#adminNote').val() 
        })
    }, 
    … 
```

由于您在这里有一个平面数据结构（即数据中没有对象或数组），因此您根本不需要使用 JSON。

```
$.ajax({
        data: { 
            "mode": "UPDATE_INTNOTE", 
            "jobid": jobId, 
            "note": $('#adminNote').val() 
            }, 
```

（然后，在您的 PHP 中，只需访问`$_POST['mode']`等，而不是解析 JSON，然后从结果对象中获取数据）

# css - 没有javascript的Android和iPhone的不同css

> ID：11029684
> 
> 赞同：0
> 
> 时间：2012-06-14T08:49:48.683
> 
> 标签：css, html, mobile

有没有办法在不使用 JavaScript 的情况下为 Android 使用与 iPhone 不同的 CSS？

我想知道这一点，因为我想为两个操作系统设置不同的元素样式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T09:01:16.810

**没有**。你不能我想。没有万无一失的方法可以清楚地检测这两种类型的设备，因为设备*种类***繁多**，**数量众多**，*软硬件*设置差异很大，分辨率也不同。

# mysql - 使用 SSIS 将具有 utf8 编码的文本转换为 SQL SERVER

> ID：11029685
> 
> 赞同：0
> 
> 时间：2012-06-14T08:49:53.363
> 
> 标签：mysql, sql-server, ssis

我正在尝试找到使用 SSIS 将源表从 MySQL（具有以下列定义：text CHARACTER SET utf8 COLLATE utf8_bin NOT NULL）加载到 SQL SERVER 的最佳方法。SSIS 自动推荐“图像”数据类型。然而并不适合。此外，在“预览”对话框中，我得到以下数据：“System.Byte []”。仅使用 SQL 和 MySQL 转换将此列转换为更可用的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T08:54:27.043

在 MySQL 上转换为 UTF-16。SQL Server NCHAR 是 UTF-16，因此应该可以立即使用。

# .net - 重新安装 .NET 4 后，SharePoint 项目中需要引用 System.Web.DataVisualization

> ID：11029688
> 
> 赞同：1
> 
> 时间：2012-06-14T08:50:19.510
> 
> 标签：.net, sharepoint, sharepoint-2010, assemblies

由于我重新安装了 .NET 4.0 Framework，我需要在我的 SharePoint 项目中直接引用 System.Web.DataVisualization，该项目引用 Nintex、Microsoft.Office.Server.UserProfiles 和 Microsoft.SharePoint.Taxonomy - 其他引用的程序集System.Web.DataVisualization。否则编译时会出现以下错误（FW.Common 是我解决方案中的项目程序集）：

```
 warning MSB3268: The primary reference "FW.Common, Version=1.0.0.0, Culture=neutral, PublicKeyToken=1e89ea7ddbf0abdc, processorArchitecture=MSIL" could not be resolved because it has an indirect dependency on the framework assembly "System.Web.DataVisualization, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" which could not be resolved in the currently targeted framework. ".NETFramework,Version=v3.5". To resolve this problem, either remove the reference "FW.Common, Version=1.0.0.0, Culture=neutral, PublicKeyToken=1e89ea7ddbf0abdc, processorArchitecture=MSIL" or retarget your application to a framework version which contains "System.Web.DataVisualization, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35". 
```

System.Web.DataVisualization 在 GAC 中，代码在我同事的机器上编译得很好。我正在运行 Windows 7 64 位，通过控制面板重新安装了 .NET 3.5，重新安装了 MSChart.exe，重新安装了 SharePoint 2010 SDK，但在我的机器上编译只能在每个目录中直接引用 System.Web.DataVisualization我们的解决方案中的项目。我想避免引用，因为所有其他同事都不需要引用来成功编译解决方案。

提前感谢您的帮助！

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T08:46:55.887

正如我在上面对 Ironman99 答案的评论中所发布的那样，手动添加引用解决了这个问题。最近我不得不重新安装我的 SharePoint 开发机器，当然问题完全消失了。我猜想.NET Framework 的构建目标定义不知何故搞砸了......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T16:17:58.127

你确定你在你的 sp 项目中运行 3.5 并且你运行它的应用程序池至少运行 3.5 吗？

# c# - 传递参数时语法错误

> ID：11029698
> 
> 赞同：1
> 
> 时间：2012-06-14T08:51:10.383
> 
> 标签：c#, asp.net, .net

错误显示为“'@Cmp_DocPath' 附近的语法不正确，如果我使用注释行代码，我得到错误为“此 sqlparametercollection 不包含带有参数名'@Cmp_DocPath'的 sqlparameter”。我如何获取 AsyncFileUpload AJAX 控件的文件名?

```
 protected void BtnCmpApproval_Click(object sender, EventArgs e)
    {
      SqlConnection SqlCon = new SqlConnection(GetConnectionString());
        string query = "INSERT INTO User_Info2 VALUES     (@lblCmpUserName,@txtCmpName,
      @txtRegCountry,@txtCmpRegNo,@txtCmpEstdate,@txtCmpAddress,@ddlAddrIn)";
        try
        {
            SqlCon.Open();
            SqlCommand cmd = new SqlCommand(query, SqlCon);
            cmd.CommandType = CommandType.Text;
            cmd.Parameters.AddWithValue("@UserName", lblCmpUserName.Text);
            cmd.Parameters.AddWithValue("@Cmp_Name", txtCmpName.Text);
            cmd.Parameters.AddWithValue("@Commercial_RegNo", txtRegCountry.Text);
            cmd.Parameters.AddWithValue("@Comm_Country", txtCmpRegNo.Text);
            cmd.Parameters.AddWithValue("@Cmp_EstablishDate", txtCmpEstdate.Text);
            //cmd.Parameters.AddWithValue("@Cmp_DocPath", AFU1.FileName);
            cmd.Parameters["@Cmp_DocPath"].Value=AFU1.FileName;
            cmd.Parameters.AddWithValue("@txtCmpAddress", txtCmpAddress.Text);
            cmd.Parameters.AddWithValue("@ddlAddrIn", ddlAddrIn.SelectedItem.Text);
            cmd.ExecuteNonQuery();
        }
        catch (Exception ex)
        {
           throw new Exception(ex.Message);
        }
        finally
        { 
           SqlCon.Close();
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T08:56:34.547

您已经在 Sql 插入字符串中设置了这些参数（7 个参数）

```
@lblCmpUserName,
@txtCmpName,       
@txtRegCountry,
@txtCmpRegNo,
@txtCmpEstdate,
@txtCmpAddress,
@ddlAddrIn 
```

您已在 SqlCommand 中添加了这些参数（8 个参数）

```
@UserName   -> Missing
@Cmp_Name   -> Missing
@Commercial_RegNo ->Missing
@Comm_Country  -> Missing
@Cmp_EstablishDate ->Missing
@Cmp_DocPath  ->Missing
@txtCmpAddress  ->Found it  !!
@ddlAddrIn  ->Found it!!!! 
```

如您所见，您错过的不止一个。我想您混淆了参数名称的控件名称。您应该将插入字符串中的名称更改为添加到参数集合中的相同名称。

```
string query = "INSERT INTO User_Info2 VALUES (@UserName,@Cmp_pName, " + 
               "@Comm_Country, @Commercial_RegNo,@Cmp_EstablishDate," + 
               "@txtCmpAddress,@ddlAddrIn); 
```

您还添加了 Parameter **Cmp_DocPath"**，但我在您的插入字符串中的任何地方都找不到它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T08:54:42.427

您没有添加带有 name 的参数`@Cmp_DocPath`，您的代码只是假设它已经存在，并且告诉您它不存在。您应该以与添加其他参数相同的方式添加参数，例如：

```
cmd.Parameters.AddWithValue("@Cmp_DocPath", AFU1.FileName); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T08:55:09.103

查询参数名称和添加参数值时提供的参数名称之间应该匹配。检查所有参数名称、类型和参数数量是否与您在查询中给出的相同。

示例代码：

```
try
{
    string query = "INSERT INTO User_Info2 VALUES (@UserName,@Cmp_Name,@Commercial_RegNo,@Comm_Country,@Cmp_EstablishDate,@Cmp_DocPath, @txtCmpAddress,@ddlAddrIn)";
    using (SqlConnection SqlCon = new SqlConnection(GetConnectionString()))
    {
        SqlCon.Open();
        using (SqlCommand cmd = new SqlCommand(query, SqlCon))
        {
            cmd.CommandType = CommandType.Text;
            cmd.Parameters.AddWithValue("@UserName", lblCmpUserName.Text);
            cmd.Parameters.AddWithValue("@Cmp_Name", txtCmpName.Text);
            cmd.Parameters.AddWithValue("@Commercial_RegNo", txtRegCountry.Text);
            cmd.Parameters.AddWithValue("@Comm_Country", txtCmpRegNo.Text);
            cmd.Parameters.AddWithValue("@Cmp_EstablishDate", txtCmpEstdate.Text);
            cmd.Parameters.AddWithValue("@Cmp_DocPath", AFU1.FileName);
            cmd.Parameters.AddWithValue("@txtCmpAddress", txtCmpAddress.Text);
            cmd.Parameters.AddWithValue("@ddlAddrIn", ddlAddrIn.SelectedItem.Text);
            cmd.ExecuteNonQuery();
        }

    }

}
catch (Exception ex)
{
    throw new Exception(ex.Message);
} 
```

# windows-8 - wfc 数据 - 从数据库获取数据后的奇怪行为

> ID：11029700
> 
> 赞同：0
> 
> 时间：2012-06-14T08:51:12.880
> 
> 标签：windows-8, odata, microsoft-metro

我正在学习如何将 win8 metro 应用程序与 azure sql 数据库连接。我创建了 .net Web 表单应用程序，在其中创建了实体模型和 WFC 数据服务。从我正在观看的教程中，我应该从 url [http://domain.com:52034/ServiceName.svc/User接收数据](http://domain.com:52034/ServiceName.svc/User)

当我通过 VisualStudio (http://domain.com:52034/ServiceName.svc) 启动此服务时，我得到带有配置和我的集合名称（用户）的 xml。当我输入第一个 Url 时，我收到问题是否要订阅订阅频道 oO 我没有收到我的收藏数据。当我输入[http://domain.com:52034/ServiceName.svc/User(1](http://domain.com:52034/ServiceName.svc/User(1) ) 时，我没有得到 uid = 1 的用户，但我没有找到页面。我究竟做错了什么 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T13:30:12.043

如果您将浏览器定位到 ~/User 服务响应 application/atom+xml;type=feed 大多数浏览器将其识别为 ATOM 提要（应该如此），并且浏览器尝试“易于使用”并显示它以不同的视图显示或要求您订阅。在 IE 中，您可以通过转到 Internet 选项 -> 内容 -> 提要和网页快讯 -> 设置 -> 打开提要阅读视图来关闭此功能。确保未选中该复选框。然后在新选项卡中重新打开有问题的 URL，它应该会显示原始 XML。（这只适用于桌面 IE）。我想你也可以在其他浏览器中做同样的事情，我只是不知道具体细节。您也可以在示例服务上尝试它，例如在[http://services.odata.org/OData/OData.svc/Products](http://services.odata.org/OData/OData.svc/Products)上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T19:15:16.080

我找到了解决方案。

首先对您 Vitek 大加赞赏。感谢您的建议，我可以正确阅读 xml

其次我必须添加： config.UseVerboseErrors=true; 在那之后，一切都开始起作用了。

关于我评论中的问题。在配置数据模型连接时，有一个选项可以设置登录名和密码随请求一起发送。

最好的问候，大卫

# css - >一些<图片在IE6中不显示

> ID：11029701
> 
> 赞同：0
> 
> 时间：2012-06-14T08:51:14.777
> 
> 标签：css, image, internet-explorer-6

我正在开发一个需要跨多个浏览器工作的网站，*不幸*的是还包括 IE6。

我正在对按钮使用滑动门技术，该技术在 Chrome、Safari 和 FF 中运行良好，但图像在 IE6 中完全不可见。更奇怪的是，它不是所有的图像，只是按钮背景。我放入实际按钮的图标渲染得很好。知道为什么吗？

```
HTML:
    <a id="re" href="#" class="button"><span><span class="resolved">Mark as Resolved</span></span></a>

CSS:
  a.button
  {
   background:transparent url(images/normal_end.png) no-repeat scroll top right;
   display:block;
   float:left;
   height: 32px;
   padding:3px;
   padding-right: 5px;
   margin:4px;
   text-decoration:none;
   color:#555;
   font-weight:normal;
   width:100px;
   font-size: 15px;
  }
  a.button span 
  {
   background: url(images/normal.png) no-repeat;
   display:block !important;
   line-height:22px;
   padding:0 5px 0 5px;
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T08:58:57.463

IE6对png图片有问题，但是可以把图片作为div的背景。

```
<body>  
<div class="imageyouneed"></div>  
</body>

<style>  
body {background-color:#000}  
div.imageyouneed {background:url(flower-transparent.png) no-repeat; height:100px;width:100px}  
</style>

<!--[if gte IE 5]>  
<style type="text/css">  
  div {  
  background:none;  
  filter:progid:DXImageTransform.Microsoft.AlphaImageLoader(src='flower.png',sizingMethod='crop');  
  }  
</style>  
<![endif]--> 
```

请注意，高度和宽度是图像的高度和宽度。

# macos - 右上角通知HUD窗口

> ID：11029708
> 
> 赞同：0
> 
> 时间：2012-06-14T08:51:49.323
> 
> 标签：macos, cocoa, notifications, osx-lion

当 mac 应用程序收到来自 APNS 的通知时，我想在屏幕右上角显示一个通知 HUD 窗口。许多应用程序都做到了，有没有人知道如何通过程序来做到这一点。我相信一定有一个“通知中心”之类的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T11:39:27.417

即将发布的 Mountain Lion 将有一个用于用户通知的新 API。对于 Lion，您最好的选择是使用[Growl](http://www.growl.info)。

# html - div 列（一个在另一个之下）

> ID：11029710
> 
> 赞同：0
> 
> 时间：2012-06-14T08:51:56.887
> 
> 标签：html

我有一个关于 div 的问题。我有一张桌子，`td`里面有一个。在那`td`，我想插入div。它们小于`td`宽度并带有浮动左侧，因此它们彼此并排排列。

这是棘手的部分：它们每个都有一个特定的`margin-top`和一个特定的`height`. 我需要的是一个 div 放置在另一个下方（而不是旁边），如果边距和上行的总和小于下行的边距。

我附上了一张图片的链接，以便您更好地查看它：( [http://dl.dropbox.com/u/3109622/divs.png](http://dl.dropbox.com/u/3109622/divs.png) )。我需要的是放在橙色下面的绿色 div。

编辑以添加我的代码。您看到的列：

```
<td>
    <div class="columna" style="background: #FAA957; height: 8em; margin-top: 5em;"></div>
    <div class="columna" style="background: #F4828C; height: 3em; margin-top: 10em;"></div>
    <div class="columna" style="background: #C4E24D; height: 7em; margin-top: 15em;"></div>
</td> 
```

和风格：

```
.columnCenter .columna {
    width: 20%;
    float: left;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T09:20:02.613

为绿色 div 应用 clear left。

```
<div style="float:left; width:10px; color:#0CC; height: 20px; margin-top: 10px; background:#F60; clear:left"></div> 
```

向左清除会将 div 向下移动。

一个类似于您的图像的快速示例：

```
<body>
<table>
<tr>
<td width="200px" height="50px">
<div style="float:left; width:10px; color:#0CC; height: 20px; margin-top: 10px; background:#0CC"></div>
<div style="float:left; width:10px; color:#0CC; height: 20px; margin-top: 10px; background:#F60"></div>
<div style="float:left; width:10px; color:#0CC; height: 20px;  background:#99C; clear:left"></div>
</td>
</tr>
</table>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T10:00:33.407

只需删除`float:left`每个样式`div`，并记住总 3`div`的高度不应超过`td`高度..

# c# - 如何在一个布局中使用多类型模型（部分）？

> ID：11029713
> 
> 赞同：1
> 
> 时间：2012-06-14T08:52:03.983
> 
> 标签：c#, asp.net-mvc, model, partial

我有一个页面，我使用的模型可以有不同的类型（取决于动作和控制器）。当我想使用从模型中获取参数的部分时，我的问题就开始了**：**

```
@Html.Partial("~/Views/Components/SubMenu.cshtml", MyProject.Web.MenuHelper.GetSubMenu(Model.field1)) 
```

但是，如果我没有声明模型类型，我会出现类似`Partial can not use dynamic values`. 所以我有想法解决它：

```
@if (Model.GetType() == typeof(ContentPage))
{
    @model ContentPage
    @Html.Partial("~/Views/Components/SubMenu.cshtml", MyProject.Web.MenuHelper.GetSubMenu(Model.field1))
}
else if (Model.GetType() == typeof(Data.Models.Directory))
{
    @model Directories
    @Html.Partial("~/Views/Components/SubMenu.cshtml", MyProject.Web.MenuHelper.GetSubMenu(Model.field2))
} 
```

但后来我有这样的错误：`ContentPage.field2 no exist`。

你有什么想法我该如何解决？

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T09:16:57.853

根据条件使用不同的模型强类型化视图或局部视图不是一个好主意。如果您仍想在视图/局部视图中使用不同类型的模型，那么您必须使用`ViewData`/`ViewBag`方法。

另一种选择是您可以使用通用视图模型查看此[线程](https://stackoverflow.com/questions/6388960/generic-view-models)。

# android - xml drawable 中的形状线始终为黑色

> ID：11029714
> 
> 赞同：0
> 
> 时间：2012-06-14T08:52:05.290
> 
> 标签：android, line, xml-drawable, shapedrawable

我正在尝试制作一个如下图所示的可绘制对象： 3 条水平线`1dp`，每条具有不同的颜色，其余空间应填充渐变：

![灰色部分代表渐变](../Images/3b09f47bff5ef34beabe4c2a67862ff5.png)

所以我写了这个：

```
<layer-list xmlns:android="http://schemas.android.com/apk/res/android">
    <item>
        <shape android:shape="line">
            <stroke android:width="1dp" android:color="#c80047"/>
        </shape>
    </item>
    <item android:top="1dp">
        <shape android:shape="line" >
            <stroke android:width="1dp" android:color="#5ec800"/>
        </shape>
    </item>
    <item android:top="2dp">
        <shape android:shape="line" >
            <stroke android:width="1dp" android:color="#ffffff"/>
        </shape>
    </item>
    <item android:left="0dp" android:right="0dp" android:top="3dp"> 
        <shape android:shape="rectangle">

            <gradient android:angle="-90" android:startColor="#3B3B3B"
                android:endColor="#000000" />

        </shape>
    </item>

</layer-list> 
```

渐变绘制正确，但 3 线保持黑色。我试图添加`<stroke android:color="a_color" />`没有结果。

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T09:23:07.093

这些线已绘制，但它们不是绘制在您认为它们所在的顶部，而是绘制在可绘制对象的中心（如果您移动最后一个项目，您可以看到这一点，顶部带有渐变的矩形在任何之前的线条形状）并被最后一项渐变矩形覆盖。

要使该可绘制，您可以尝试以下操作：

```
<layer-list xmlns:android="http://schemas.android.com/apk/res/android" >

    <item>
        <shape>
            <solid android:color="#c80047" />

            <size android:height="1dp" />
        </shape>
    </item>
    <item android:top="1dp">
        <shape>
            <solid android:color="#5ec800" />

            <size android:height="1dp" />
        </shape>
    </item>
    <item android:top="2dp">
        <shape>
            <solid android:color="#ffffff" />

            <size android:height="1dp" />
        </shape>
    </item>
    <item
        android:left="0dp"
        android:right="0dp"
        android:top="3dp">
        <shape android:shape="rectangle" >
            <gradient
                android:angle="-90"
                android:endColor="#000000"
                android:startColor="#3B3B3B" />
        </shape>
    </item>

</layer-list> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T09:22:21.720

所有这三条线都在中心对齐，我看不到任何设置重力的参数。我也会把这些线条当作矩形。

```
<layer-list xmlns:android="http://schemas.android.com/apk/res/android">
   <item> 
        <shape android:shape="rectangle">
            <solid android:color="#c80047"/>
        </shape>
    </item>
        <item android:top="1dp"> 
        <shape android:shape="rectangle">
            <solid android:color="#5ec800"/>
        </shape>
    </item>
    <item android:top="2dp"> 
        <shape android:shape="rectangle">
            <solid android:color="#ffffff"/>
        </shape>
    </item>
    <item android:left="0dp" android:right="0dp" android:top="3dp"> 
        <shape android:shape="rectangle">
            <gradient android:angle="-90" android:startColor="#3B3B3B"
                android:endColor="#000000" />
        </shape>
    </item>
</layer-list> 
```

# python - 如何禁用 Requests 库中的日志消息？

> ID：11029717
> 
> 赞同：414
> 
> 时间：2012-06-14T08:52:12.787
> 
> 标签：python, logging, python-requests, verbosity

默认情况下，[请求](https://requests.readthedocs.io/)python 库将日志消息写入控制台，如下所示：

```
Starting new HTTP connection (1): example.com
http://example.com:80 "GET / HTTP/1.1" 200 606 
```

我通常对这些消息不感兴趣，并想禁用它们。使这些消息静音或减少 Requests 冗长的最佳方法是什么？

* * *

## 回答 #1

> 赞同：657
> 
> 时间：2012-06-14T08:59:53.033

我发现了如何配置*requests*的日志级别，它是通过标准[日志](http://docs.python.org/library/logging.html)模块完成的。我决定将其配置为不记录消息，除非它们至少是警告：

```
import logging

logging.getLogger("requests").setLevel(logging.WARNING) 
```

如果您也希望将此设置应用于 urllib3 库（通常由请求使用），请添加以下内容：

```
logging.getLogger("urllib3").setLevel(logging.WARNING) 
```

* * *

## 回答 #2

> 赞同：127
> 
> 时间：2016-03-24T19:37:45.047

如果您来这里寻找修改任何（可能是深度嵌套的）模块的日志记录的方法，请使用`logging.Logger.manager.loggerDict`获取所有记录器对象的字典。然后可以将返回的名称用作以下参数`logging.getLogger`：

```
import requests
import logging
for key in logging.Logger.manager.loggerDict:
    print(key)
# requests.packages.urllib3.connectionpool
# requests.packages.urllib3.util
# requests.packages
# requests.packages.urllib3
# requests.packages.urllib3.util.retry
# PYREADLINE
# requests
# requests.packages.urllib3.poolmanager

logging.getLogger('requests').setLevel(logging.CRITICAL)
# Could also use the dictionary directly:
# logging.Logger.manager.loggerDict['requests'].setLevel(logging.CRITICAL) 
```

根据评论中的 user136036，请注意，此方法仅向您显示在您运行上述代码段时存在的记录器。例如，如果一个模块在您实例化一个类时创建了一个新的记录器，那么您必须在创建该类*之后*放置此代码段以打印其名称。

* * *

## 回答 #3

> 赞同：29
> 
> 时间：2014-02-12T10:55:25.510

```
import logging
urllib3_logger = logging.getLogger('urllib3')
urllib3_logger.setLevel(logging.CRITICAL) 
```

这样，来自 urllib3 的所有 level=INFO 消息都不会出现在日志文件中。

因此，您可以继续将 level=INFO 用于您的日志消息...只需针对您正在使用的库进行修改。

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2016-02-01T19:52:59.510

对于任何使用`logging.config.dictConfig`您的人，您都可以像这样更改字典中的请求库日志级别：

```
'loggers': {
    '': {
        'handlers': ['file'],
        'level': level,
        'propagate': False
    },
    'requests.packages.urllib3': {
        'handlers': ['file'],
        'level': logging.WARNING
    }
} 
```

* * *

## 回答 #5

> 赞同：17
> 
> 时间：2020-02-28T09:41:42.420

```
import logging

# Only show warnings
logging.getLogger("urllib3").setLevel(logging.WARNING)

# Disable all child loggers of urllib3, e.g. urllib3.connectionpool
logging.getLogger("urllib3").propagate = False 
```

* * *

## 回答 #6

> 赞同：15
> 
> 时间：2013-04-16T17:08:46.023

在遇到与您类似的问题后，让我复制/粘贴我大约一两周前写的文档部分：

```
import requests
import logging

# these two lines enable debugging at httplib level (requests->urllib3->httplib)
# you will see the REQUEST, including HEADERS and DATA, and RESPONSE with HEADERS but without DATA.
# the only thing missing will be the response.body which is not logged.
import httplib
httplib.HTTPConnection.debuglevel = 1

logging.basicConfig() # you need to initialize logging, otherwise you will not see anything from requests
logging.getLogger().setLevel(logging.DEBUG)
requests_log = logging.getLogger("requests.packages.urllib3")
requests_log.setLevel(logging.DEBUG)
requests_log.propagate = True

requests.get('http://httpbin.org/headers') 
```

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2018-12-06T20:39:41.457

将记录器名称设置为`requests`或`requests.urllib3`不适合我。我必须指定确切的记录器名称来更改记录级别。

首先查看您定义了哪些记录器，以查看您要删除哪些记录器

```
print(logging.Logger.manager.loggerDict) 
```

你会看到这样的东西：

`{...'urllib3.poolmanager': <logging.Logger object at 0x1070a6e10>, 'django.request': <logging.Logger object at 0x106d61290>, 'django.template': <logging.Logger object at 0x10630dcd0>, 'django.server': <logging.Logger object at 0x106dd6a50>, 'urllib3.connection': <logging.Logger object at 0x10710a350>,'urllib3.connectionpool': <logging.Logger object at 0x106e09690> ...}`

然后为确切的记录器配置级别：

```
 'loggers': {
    '': {
        'handlers': ['default'],
        'level': 'DEBUG',
        'propagate': True
    },
    'urllib3.connectionpool': {
        'handlers': ['default'],
        'level': 'WARNING',
        'propagate' : False
    }, 
```

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2017-07-09T07:34:26.967

如果你有配置文件，你可以配置它。

在记录器部分添加 urllib3：

```
[loggers]
keys = root, urllib3 
```

添加 logger_urllib3 部分：

```
[logger_urllib3]
level = WARNING
handlers =
qualname = requests.packages.urllib3.connectionpool 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2019-10-22T23:06:20.540

这个答案在这里： [Python：如何抑制来自第三方库的日志语句？](https://stackoverflow.com/questions/21944445/python-how-to-suppress-logging-statements-from-third-party-libraries)

您可以保留 basicConfig 的默认日志记录级别，然后在获取模块的记录器时设置 DEBUG 级别。

```
logging.basicConfig(format='%(asctime)s %(module)s %(filename)s:%(lineno)s - %(message)s')
logger = logging.getLogger(__name__)
logger.setLevel(logging.DEBUG)

logger.debug("my debug message") 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-03-10T03:46:12.460

我不确定以前的方法是否已经停止工作，但无论如何，这是删除警告的另一种方法：

```
PYTHONWARNINGS="ignore:Unverified HTTPS request" ./do-insecure-request.py 
```

基本上，在脚本执行的上下文中添加一个环境变量。

来自文档：[https ://urllib3.readthedocs.org/en/latest/security.html#disabling-warnings](https://urllib3.readthedocs.org/en/latest/security.html#disabling-warnings)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-11-22T17:03:35.697

Kbrose 关于查找哪个记录器正在生成日志消息的指导非常有用。对于我的 Django 项目，我必须对 120 个不同的记录器进行分类，直到我发现是`elasticsearch`Python 库给我带来了问题。根据大多数问题的指导，我通过将其添加到我的记录器来禁用它：

```
 ...
      'elasticsearch': {
          'handlers': ['console'],
          'level': logging.WARNING,
      },     
      ... 
```

在此处发布以防其他人在运行 Elasticsearch 查询时看到无用的日志消息。

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2016-02-09T02:22:10.277

简单：只需在`requests.packages.urllib3.disable_warnings()`之后添加`import requests`

# vb.net - 通过 vb.net 访问具有相同名称和值的 html 元素

> ID：11029720
> 
> 赞同：-2
> 
> 时间：2012-06-14T08:52:27.880
> 
> 标签：vb.net

先生 。有一些没有 id 的 html 按钮。我想访问这些具有相同类型名称和值的 html 按钮。但是由于它们的名称和值相同，我无法访问。你能指导我一下下面是给出的源代码吗

```
<FORM NAME='f1' METHOD='post' action='dfassfeed21.php'><INPUT TYPE='hidden' NAME='txtid' value='E712050-15'><INPUT TYPE='hidden' NAME='txtpsw' value='HH29'><INPUT TYPE='hidden' NAME='txtassno' value='1'><INPUT TYPE='SUBMIT' NAME='btnSub' value='Start' style='background-color:#009900; color:#fff;'></FORM>

<FORM NAME='f1' METHOD='post' action='dfassfeed21.php'><INPUT TYPE='hidden' NAME='txtid' value='E712050-15'><INPUT TYPE='hidden' NAME='txtpsw' value='HH29'><INPUT TYPE='hidden' NAME='txtassno' value='2'><INPUT TYPE='SUBMIT' NAME='btnSub' value='Start' style='background-color:#009900; color:#fff;'></FORM>

<FORM NAME='f1' METHOD='post' action='dfassfeed21.php'><INPUT TYPE='hidden' NAME='txtid' value='E712050-15'><INPUT TYPE='hidden' NAME='txtpsw' value='HH29'><INPUT TYPE='hidden' NAME='txtassno' value='1'><INPUT TYPE='SUBMIT' NAME='btnSub' value='Start' style='background-color:#009900; color:#fff;'></FORM>
.
.
.
.
.
.
.
.
.
.
<FORM NAME='f1' METHOD='post' action='dfassfeed21.php'><INPUT TYPE='hidden' NAME='txtid' value='E712050-15'><INPUT TYPE='hidden' NAME='txtpsw' value='HH29'><INPUT TYPE='hidden' NAME='txtassno' value='1'><INPUT TYPE='SUBMIT' NAME='btnSub' value='Start' style='background-color:#009900; color:#fff;'></FORM> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T08:59:10.037

这是javascript还是CSS？请清楚你的问题。

我假设 VB.NET 在服务器端。您不能使用 ASP.NET 来操作 DOM 中的元素，所以我假设您使用的是 javascript/CSS。如果要选择名称为**btn1**且值为**abc**的输入按钮，请使用以下选择器：

```
[name=btn1] [value=abc] 
```

请注意，该值必须是字母数字。

然后您可以使用 CSS 选择器进一步选择单个元素`nth-child`，尽管仅在 CSS3 中可用。例如，要选择符合上述条件的**第二个按钮，请使用以下选择器：**

```
[name=btn1] [value=abc]:nth-child(2) 
```

# python - UTF-8 和 ASCII 编码的混合使用？

> ID：11029721
> 
> 赞同：1
> 
> 时间：2012-06-14T08:52:32.660
> 
> 标签：python, parsing, unicode, utf-8, ascii

我目前正在使用 Python 2.7 解析大型文本文件，其中一些最初是用 Unicode 或 UTF-8 编码的。

对于包含直接与 UTF-8 中的字符串交互的函数的模块，我将其包含`# -*- coding: utf-8 -*-`在文件的顶部，但对于仅使用 ascii 的函数，我没有打扰。

最终，这些模块导致更大的模块，并且所有解析的字符串混合在一起。`# -*- coding: utf-8 -*-`包含在每个文件的顶部是一种好习惯吗？

这有什么好处吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-14T08:54:35.390

`# -*- coding: utf-8 -*-` declares the encoding of the source file **only**. It has nothing to do whatsoever with the way Python handles input or output. It just means you can write string literals and comments using UTF-8.

Here's the effect of a coding declaration. Let's say I have a program

```
# -*- coding: utf-8 -*-
# the following prints the Dutch word "één"
print(u"\xe9\xe9n") 
```

This does exactly what the comment says. But if I remove the `coding` declaration, it crashes:

```
File "a.py", line 1
SyntaxError: Non-ASCII character '\xc3' in file a.py on line 1, but no encoding declared; see http://www.python.org/peps/pep-0263.html for details 
```

Note that line 1 is the *comment*. The program can be fixed by removing the comment, leaving just

```
print(u"\xe9\xe9n") 
```

which still behaves exactly the same as the first program.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T08:57:40.130

每个 ASCII 文件也是一个有效的 UTF-8。不必担心将 ASCII 文件视为 UTF-8 文件，无需转换，无需增加大小。

# javascript - 在 Google Chrome 中禁用 JavaScript 缓存

> ID：11029726
> 
> 赞同：6
> 
> 时间：2012-06-14T08:52:54.673
> 
> 标签：javascript, google-chrome, disable-caching

是否可以在 Google Chrome 中禁用 JavaScript 缓存？我关闭了开发人员工具中的缓存（Ctrl-Shift-I），但它仍然缓存 JS 文件……使用 Chrome 版本 20。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-14T09:17:56.767

For developing purposes you can use Ctrl+R or Ctrl+F5, they should not send cache headers therefore requesting the resource from server and not cache. This is called Hard Refresh.

But don't expect users to use Ctrl+R/F5, if you want to always send the uncached resource to the user, use [Cache buster](http://www.adopsinsider.com/ad-ops-basics/what-is-a-cache-buster-and-how-does-it-work/) ([Google search for cache buster](http://www.google.com/search?q=cache%20buster))

Web browsers use the url to determine if they already know the resource, so accessing the same url will make the web browser to check if he accessed this url before thus allowing it to send a specific header of the resource it have and validate if the resource changed on the server.

Cache busters are as the name says used to bust the cache and always reload the resource. Here is an example for cache busted url:

```
<script type="text/javascript" src="/static/js/some.js?bust=12356"></script> 
```

Note: it could be any name and not "bust".

A good way to always have a unique bust is using the Unix epoch time (number of seconds passed from 1.1.1970, every language offers you some function to get that number), another commonly used solution is some random number. This way the browser will always get the resource from the web server.

# jsf - 在 Jersey Servlet 和 JSF Backing Bean 之间共享一个范围

> ID：11029727
> 
> 赞同：0
> 
> 时间：2012-06-14T08:52:56.740
> 
> 标签：jsf, jersey, java-ee-6, cdi

我只想问有没有人做过这样的事情。基本上，它就像贝宝快速结帐功能：

1.) 您在商家商店中选择要结帐的商品。

2.) 您将被重定向到登录页面，在我的例子中，我将其实现为 Jersey Rest Servlet。在发布时，将数据存储在会话 EJB 支持 bean 中并调用 Response.seeOther() 以重定向到登录页面 (JSF)。

3.) 如果登录成功，则应保留已发布的交易数据。

但似乎，虽然我可以调用会话支持 bean，但将发布的数据存储在该 bean 内的变量中。当我单击登录（登录确定）并重新访问同一个 bean 时，我存储发布数据的变量变为空。

那么，Jersey Rest Servlet 和 ejb 中的会话范围支持 bean 之间是否不共享会话范围？

还有什么好的方法吗？

谢谢，
czetsuya

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T15:11:07.860

会话范围不适用于 Web 服务调用。您需要使用 Application 范围，或创建自己的范围。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T00:58:02.050

在尝试解决这个问题之后，我得出一个结论，即不可能将 jsf 会话共享到 jersey 或 servlet 会话，因为它们以不同的方式实现。

我对我的问题的解决方案（不回答问题）是使用 HttpServlet，并将事务存储为会话属性：

```
HttpSession session = request.getSession(true);
session.setAttribute("POSTED_ITEMS", postedItems); 
```

所以我将能够访问它到下一页。

*我希望有一种方法可以发布到由 javaee6 bean 支持的 jsf 页面，这将使生活变得简单:-)。

# xml - 在 x++ 中使用 xsd 验证 xml

> ID：11029733
> 
> 赞同：0
> 
> 时间：2012-06-14T08:53:18.107
> 
> 标签：xml, axapta, dynamics-ax-2009, x++

我想在 AX2009 中针对 xsd 验证我的 xml。但是无论我在 xml 中进行什么更改，xml 都将始终验证... Wat 我的代码有问题吗？

```
static void Job174(Args _args)
{
    XMLDocument                 xmlDocument;
    XMLSchema                   xmlSchema;
    XMLSchemaValidationError    validationError;
    XMLReader                   xmlReader;
    FileName                    xsdFile;
    ;

    xsdFile = 'c:\\e\\note.xsd';
    xmlSchema   = xmlSchema::newFile(xsdFile);
    if(xmlSchema)
    {
        //xmlDocument = new XMLDocument();
        //xmlDocument.load('c:\\e\\note.xml');
        xmlReader = XMLReader::newXml('c:\\e\\note.xml');

        validationError = xmlReader.validate(xmlSchema.writeToString());
        if (validationError)
          info(strfmt('%1',checkFailed(validationError.message())));
        else
          info('XML is Ok..!');
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-15T19:18:07.743

您在 xmlReader 对象上使用了 newXml 而不是 newFile。

我尝试了这段代码并且工作正常。

```
static void XMLValidateExample(Args _args) 
{
    XMLSchema                   xmlSchema;
    XMLSchemaValidationError    validationError;
    XMLReader                   xmlReader;
    FileName                    xsdFile;
    ;

    xsdFile = @"C:\Users\c.paz\Desktop\ari.xsd";
    xmlSchema   = xmlSchema::newFile(xsdFile);

    if(xmlSchema)
    {
        xmlReader = XMLReader::newFile(@"C:\Users\c.paz\Desktop\ARRENDAMIENTO OCC-error.xml");
        validationError = xmlReader.validate(xmlSchema.writeToString());

        if (validationError)
            info(strfmt('%1',checkFailed(validationError.message())));
        else
            info('XML is Ok..!');
    }
} 
```

此致！

# javascript - 从内部进入全屏 in HTML5

> ID：11029734
> 
> 赞同：4
> 
> 时间：2012-06-14T08:53:18.633
> 
> 标签：javascript, html, iframe, fullscreen

I want my iframe to go fullscreen from an HTML5 Fullscreen event trigger within the iFrame itself. Is this possible?

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-11T12:31:25.593

当然可以！Youtube HTML5 播放器可以！

您可以使用这个 JavaScript 库[http://brad.is/coding/BigScreen/](http://brad.is/coding/BigScreen/)并记住将标签添加`AllowFullScreen`到您的 iframe。

# image - How to Compress the IMAGE size in Titanium Appcelerator

> ID：11029736
> 
> 赞同：1
> 
> 时间：2012-06-14T08:53:21.733
> 
> 标签：image, upload, compression, titanium, appcelerator

i am using titanium 2.0.1, i need to compress the size of a image taken by camera and then upload it. Right now the image size is 800kb+, which takes a lot of time to upload. i need to compress the size. can anyone tell me the way how to do that.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T04:50:38.550

Titanium 似乎默认以“高”质量导出图像，无法将压缩设置调整为较低质量（没有第三方模块）。如果您将 Titanium 生成的 JPG 与通过 Photoshop 的 Save for Web JPEG 'High' 功能导出的 JPG 进行比较，您会注意到 Ti 图像的文件大小要大得多。

您可以尝试以下模块之一：

iOS 和 Android：marketplace.appcelerator.com/apps/1184?540167410

仅限 iOS： [https ://github.com/gudmundurh/titanium-imaging](https://github.com/gudmundurh/titanium-imaging)

仅限 Android： [https ://github.com/novelys/titanium-jpegencoder](https://github.com/novelys/titanium-jpegencoder)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T18:22:33.553

图像不会压缩太多，因为许多图像格式已经压缩了图像，例如 jpeg。我在 3118 KB 的 jpg 图像上尝试了 zip 和 7zip，然后 zip 将其压缩到 3114 KB，而 7zip 将其大小增加到 3121 KB。

如果您仍想压缩图像大小，可以尝试使用以下 javascript 代码进行 zip 压缩：[https](https://github.com/TermiT/ZipFile) ://github.com/TermiT/ZipFile 。它可能会使您的上传时间更慢，因为您将不得不等待应用程序压缩图像并等待应用程序上传它。

如果您不介意上传较小尺寸的图像，这也会使文件大小更小，您可以使用 Titanium 的**imageAsResized**方法。在 Titanium 2.0 之前，该方法在 Android 中不起作用。我还没有在 Titanium 2.0 中测试过它现在是否可以在 Android 中运行。

您可能想要查看的其他内容是网络连接速度（无线、3G、4G）。也许您的测试连接速度很慢。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-06T07:00:02.580

赞成的答案似乎已经过时了。

[https://github.com/appcelerator-modules/ti.imagefactory](https://github.com/appcelerator-modules/ti.imagefactory)是一个在 iOS 和 Android 上运行的最新模块，允许使用 Appcelerator/Axway/Titanium 进行图像处理。

[来自https://github.com/appcelerator-modules/ti.imagefactory/blob/stable/ios/example/app.js](https://github.com/appcelerator-modules/ti.imagefactory/blob/stable/ios/example/app.js)的一些示例

```
btnSave.addEventListener('click', function (e) {
newBlob = ImageFactory.compress(blob, 0.25);
var filename = Titanium.Filesystem.applicationDataDirectory + "/newflower.jpg";
f = Titanium.Filesystem.getFile(filename);
f.write(newBlob);
var alert = Ti.UI.createAlertDialog({
    title:'Image Factory',
    message:'Compressed image saved to newflower.jpg with compression quality of 25%'
});
alert.show(); 
```

});

# filter - Filter a range by array

> ID：11029737
> 
> 赞同：25
> 
> 时间：2012-06-14T08:53:26.560
> 
> 标签：filter, google-sheets, google-sheets-formula

I have a Google Spreadsheet containing the teams of the UEFA EURO 2012, and their scores:

```
Team     Points  Goals scored
------   ------  ------------
Germany    6          3
Croatia    3          3
Ireland    0          1
...       ...        ... 
```

Now I want to filter that list, so that the result contains only a subset of the teams involved. Specifically, I want the resulting list to contain only the teams *Germany, Netherlands, Portugal, Italy, England, France, Spain* and *Croatia*.

I know I can use the `FILTER` function to extract a single value from the table. Thus, I could probably write a `FILTER` expression like `=FILTER(A2:C; A2:A = 'Germany' OR A2:A = 'Netherlands' OR A2:A = 'Portugal' OR ...)` but I would like to avoid this, as the list of teams is sort of dynamic.

So the question is: How can I filter the table by a **range** of values - not just a single value?

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2014-10-30T00:11:40.990

对于像我一样偶然发现此线程的寻求答案的人，请参阅此[Google 产品论坛页面](https://productforums.google.com/forum/#!searchin/docs/filter$20by$20range$20of$20values/docs/C3oSqDDTrQU/_7ity_vKESAJ)，其中 Yogi 和 ahab 都针对如何通过另一范围数据过滤一系列数据的问题提出了解决方案。

如果`A3:C`包含要过滤的 UEFA EURO 2012 数据范围，并且`D3:D`包含要过滤的球队列表，则`E3`...

```
=FILTER(A3:C, MATCH(A3:A, D3:D,0)) 
```

或者

```
=FILTER(A3:C, COUNTIF(D3:D, A3:A)) 
```

[![阳性过滤结果](../Images/41d246ecedf82e9d84eb15084464af82.png)](https://i.stack.imgur.com/WRqR5.png)

相反，如果您想按**未**列出的团队进行过滤`D3:D`，那么`E3`...

```
=FILTER(A3:C, ISNA(MATCH(A3:A, D3:D,0))) 
```

或者

```
=FILTER(A3:C, NOT(COUNTIF(D3:D, A3:A))) 
```

[![负过滤结果](../Images/506182c15c8954312f1aee67229e898f.png)](https://i.stack.imgur.com/Fm4Ri.png)

这是我为演示这些功能的有效性而制作的[示例电子表格。](https://docs.google.com/spreadsheets/d/14GTYCP1n9iiFnFmNSrXVCPjnAMAm5o8JCJsbPvRzuGc/edit?usp=sharing)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2019-02-20T21:37:46.440

### 对于那些需要使用[greg](https://stackoverflow.com/users/4005713/greg)公式并与范围不匹配作斗争的人`FILTER`

```
=FILTER(A1:A, MATCH(A1:A, B1:B, 0))

=FILTER(A1:A, COUNTIF(B1:B, A1:A))

=FILTER(A1:A, ISNA(MATCH(A1:A, B1:B, 0)))

=FILTER(A1:A, NOT(COUNTIF(B1:B, A1:A))) 
```

如果您需要使用`FILTER`公式来返回两个范围之间的评估，并且这两个范围的大小不同（例如从查询返回时）并且无法更改以匹配相同的大小并且您刚刚遇到`FILTER has mismatched range sizes. Expected row count: etc.`错误，那么这是一种解决方法：

为简单起见，假设您的过滤器范围是**A1:A10**和**B1:B8**，您可以使用数组括号`{}`在范围上附加两个虚拟行`B1:B8`以匹配大小`A1:A10`，方法是使用`REPT`where 需要的重复次数通过简单的计算来计算初始范围。

然后在这个`REPT`公式中，我们需要添加 +1 作为更正/故障保护（在两个初始范围之间的差异为 1 的情况下），因为`REPT`最少重复 2 次。所以从某种意义上说，我们需要创建一个`B1:B11`(from `B1:B8`) 的范围，然后我们将只从一个范围中修剪最后一行，这样它就可以`B1:B10`反对`A1:A10`. 我们将使用 2 个独特的符号`REPT`

下一步是换行`REPT`并`SPLIT`除以第二个唯一符号。然后，（基于进一步的需要）这`SPLIT`需要被包装到`TRANSPOSE`（因为我们想要将列大小与列大小相匹配），最后一步是通过简单的数学将它再次包装进`QUERY`和`limit`输出输出`COUNTA(A1:A10)`以修剪掉最后报告。放在一起看起来像这样：

```
=FILTER(A1:A10, NOT(COUNTIF(QUERY({B1:B8; 
 TRANSPOSE(SPLIT(REPT("♂♀", COUNTA(A1:A10)-COUNTA(B1:B8)+1), "♀"))}, 
 "limit "&COUNTA(A1:A10), 0), A1:A10))) 
```

[![](../Images/658561e8eb7cdc2b2c44937a45123870.png)](https://i.stack.imgur.com/1Qc7g.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-05-28T14:25:17.990

一些可能的和不同的方法：

`=FILTER(C5:C;REGEXMATCH(C5:C;"one|two|five"))`

结果：任何包含一、二、五的文本。区分大小写。

`=FILTER(C5:C;REGEXMATCH(C5:C;JOIN("|";DC5:DC7)))`

与之前相同，但值在列表中：DC5:DC7

`=FILTER(C5:C;REGEXMATCH(C5:C;"^("&JOIN("|";EE5:EE7)&")$"))`

与上一个相同 + 匹配整个文本

* * *

建议的较早选项：

`=FILTER(C5:C;MATCH(C5:C;EG5:EG7;))`

`=FILTER(C5:C;countif(EK5:EK7;C5:C))`

不区分大小写的结果。

相同，不在列表中

`=FILTER(C5:C;ISNA(MATCH(C5:C;EF5:EF7;)))`

有趣：给出列表之间的区别。

# jquery - Jquery-mobile css is not reflecting on HTML page?

> ID：11029738
> 
> 赞同：0
> 
> 时间：2012-06-14T08:53:29.923
> 
> 标签：jquery, html, jquery-mobile

I am using HTML5,Jquery(v1.6.4) and Jquery-mobile(jquery.mobile-1.0.1.js).

I want to populate data dynamically using Jquery. After populating, Page is not displaying properly. Jquery-mobile themes and style-sheets are not effecting on the Page.

**Code**

Test.html

```
<!DOCTYPE html>
<html>
<head>
<link rel="stylesheet" href="jquery.mobile-1.0.1.css" type="text/css" charset="utf-8">
<link rel="stylesheet" href="jquery.mobile.structure-1.0.1.css" type="text/css" charset="utf-8">

<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript"src="jquery.mobile-1.0.1.js"></script>
<script src="main.js" type="text/javascript" charset="utf-8"></script>

<title>Test</title>
 </head>
  <body>
        <div id="test"> </div>
</body>
</html> 
```

**main.js code**

```
 $(document).ready(function(){

    $("#test").append("<ul data-role='listview'>"); 
    $("#test").append("<li>Srikanth</li>");
    $("#test").append("<li>Chil</li>");
    $("#test").append("<li>Devi</li>");
    $("#test").append("</ul>");
 }); 
```

Please help me out on this.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T08:56:10.490

您将`li`元素附加到`#test`以及格式错误的元素（开始和结束标记`ul`）。

您需要将`li`元素附加到`ul`元素，然后将其附加到`#test`元素。

（append() 在 DOM 上工作，它不只是将 HTML 代码像字符串一样放入元素中。）

所以它应该看起来更像这样：

```
var ul = $("<ul data-role='listview'></ul>");
ul.append("<li>foo</li>");
ul.appendTo("#test"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T09:09:14.967

您正在动态创建一个列表，因此您需要告诉 jQuery Mobile 并要求它“增强”内容。你通过调用来做到这一点

```
$("changed-parent-element").listview("create"); 
```

如果您有要添加元素的现有增强列表，则需要告诉 JQM 增强新内容，方法是调用

```
$("changed-parent-element").listview("refresh"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T08:58:24.297

请使用文件的绝对路径，或至少使用 ./ 从当前文件夹加载

```
<!DOCTYPE html>
<html>
<head>
<link rel="stylesheet" href="./jquery.mobile-1.0.1.css" type="text/css" charset="utf-8">
<link rel="stylesheet" href="./jquery.mobile.structure-1.0.1.css" type="text/css" charset="utf-8">

<script type="text/javascript" src="./jquery.js"></script>
<script type="text/javascript"src="./jquery.mobile-1.0.1.js"></script>
<script src="./main.js" type="text/javascript" charset="utf-8"></script>

<title>Test</title>
 </head>
  <body>
        <div id="test"> </div>
</body>
</html> 
```

# xml - 在中使用通配符

> ID：11029749
> 
> 赞同：3
> 
> 时间：2012-06-14T08:54:33.203
> 
> 标签：xml, xslt

我正在尝试创建一个 xsl 模板，该模板将接受通配符作为模板匹配的一部分，如以下示例所示：

```
<xsl:template match="*_Nokia_5.0">
  <xsl:value-of select="."/>
  <xsl:text>,</xsl:text>
  <xsl:if test="position()=last()">
    <xsl:text>&#10;</xsl:text>
  </xsl:if> 
```

我想要实现的是“匹配任何以“Nokia_5.0”作为字符串一部分的标签。有什么办法可以在 xslt 1.0 中做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T12:06:07.967

使用`contains(name(), "Nokia_5.0")`不是解决方案，因为它会在名称上返回误报，例如：

```
myNokia_5.0isAwsome 
```

但是要求是名称必须以字符串*结尾*`'Nokia_5.0'`。

* * *

**正确的解决方案**：

**在 XSLT 2.0 中**：

```
<xsl:template match="*[ends-with(name(), 'Nokia_5.0')]"> 
```

**在 XSLT 1.0 中**：

```
<xsl:template match=
 "*[substring(name(), string-length(name()) -8) = 'Nokia_5.0')]"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T09:16:40.447

假设您的意思是节点名称必须包含给定的字符串，您可以使用 contains()

```
<xsl:template match='*[contains(name(), "Nokia_5.0")]'> 
```

但是，这意味着任何不符合此要求的节点都缺少模板，并且如果您将模板应用于所有节点，则会按原样输出。

相反，您可以不在模板定义中而是在应用模板时制定过滤器规定。

```
<xsl:apply-templates select='node[contains(name(), "Nokia_5.0")]' />
....
<xsl:template match='node'>
    <xsl:value-of select='.' />
</xsl:template> 
```

# android - Android：下拉导航在 ActionBar 中显示一个对话框

> ID：11029754
> 
> 赞同：0
> 
> 时间：2012-06-14T08:54:49.553
> 
> 标签：android, navigation, drop-down-menu, actionbarsherlock

我想知道是否可以实现下拉导航样式（右下角带有小箭头的标题）以及当用户单击时，而不是显示下拉列表本身，而是显示一个对话框。

我是否必须重写 SherlockActivity 的任何方法？现在我只能在用户单击主页按钮执行以下操作时执行此操作：

```
@Override
    public boolean onOptionsItemSelected(MenuItem item) {
        switch (item.getItemId()) {
        case android.R.id.home:
                ...
                }
    } 
```

提前非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T14:53:48.873

在操作栏中放置一个按钮作为自定义导航，其背景图像与微调器相同。单击时，显示一个对话框。

不过要小心，因为您正在更改标准操作栏控件的预期行为，这可能会让用户感到不安。

# php - 我的 MVC 组件真的都需要相互引用吗？

> ID：11029758
> 
> 赞同：4
> 
> 时间：2012-06-14T08:54:58.977
> 
> 标签：php, model-view-controller

我在 PHP 中使用 MVC。我没有使用框架，我只是想了解这种模式。

有时我会看到控制器，例如在本[教程](http://anantgarg.com/2009/03/13/write-your-own-php-mvc-framework-part-1/)中，使用传递给构造函数的模型和视图进行实例化，而在同一个教程中，视图（此处为“模板”）类在构造函数中采用了控制器！

所以我的问题是：

1.  为什么视图可能需要对其控制器的引用？视图不应该是这种关系中的被动伙伴吗？
2.  控制器是否应该有对特定模型的内部引用？或者换一种说法，为什么不在控制器动作中实例化模型并以这种方式使用它们呢？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-14T09:42:24.960

***鉴于网络上 MVC 的许多变化和误解，我投票以“不具建设性”来结束这个问题。由于评论数量有限，我将这个答案作为社区 Wiki 提供。***

![在此处输入图像描述](../Images/3dd8697faf1854469f6f2e1c2423b787.png)

[MVC 最初是由 Trygve Reenskaug 为桌面环境](http://heim.ifi.uio.no/~trygver/themes/mvc/mvc-index.html)而不是为 Web 构想的。我们现在看到的大多是原始模式的某种形式的变体，如 MVP、HMVC、Model2-MVC 等。它们的实现彼此不同，人们花了很多时间争论“MVC”到底是什么或应该如何实现。

![在此处输入图像描述](../Images/6e092dc1b2b726b380598db590c4d66e.png)

就个人而言，我更喜欢[MVC 的企业应用架构模式定义，](http://martinfowler.com/eaaCatalog/modelViewController.html)它说 MVC*将用户界面交互分为三个不同的角色*，因为这个定义没有实现的概念。

在书中，Fowler 指出，最重要的区别是模型与控制器和视图的分离。虽然这本书确实涵盖了角色之间的关联以使该论点得到理解，但我认为重点是理解和关注角色而不是实现。

设计模式是蓝图，而不是详细的示意图。此外，MVC 是一种模式语言。它的目的是为项目添加结构/形式。了解角色的用途，然后提出适用于您项目的实施。

![在此处输入图像描述](../Images/971c66259bd935fa72044f03b380752f.png)

Fowler 还有[一篇关于 GUI 架构的长篇文章，涵盖 MVC](http://martinfowler.com/eaaDev/uiArchs.html#ModelViewController)，详细解释了关联和依赖关系，以防您手头没有这本书。

> 图片/幻灯片来自：[失落的建筑（罗伯特·塞西尔·马丁；2011 年 11 月 4 日）](http://confreaks.com/videos/759-rubymidwest2011-keynote-architecture-the-lost-years)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-14T09:00:05.360

1.  如果您有用户输入，您需要知道将它们发送到哪里......到哪个控制器。

2.  我不喜欢让我的控制器直接玩模型，因为控制器暴露在“外部世界”中，并且容易受到攻击。您可以查看服务层模式、数据传输对象模式等。我喜欢将我的模型隔离在控制器将使用的服务 API 后面。如果您需要一本关于模式的好书，可以查找 Martin Fowler 的 :)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T09:14:15.970

1.  视图不应该引用控制器（当然动作链接除外）。控制器执行它被告知的操作并将结果发送到视图。

2.  就我使用 MVC 而言，我在动作中实例化模型并以这种方式使用它。我不喜欢将控制器绑定到模型。通常我使用存储库结构来访问我的模型。在较大的项目中，我在控制器和模型之间有一个服务层。在 .net MVC 中，我开始使用视图模型作为应用程序的控制器和 MVC 部分查看的实体，而我的服务处理与我的域模型有关的任何事情并返回视图模型。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-14T10:12:04.527

由于我已经[设法](https://stackoverflow.com/a/5864000/727208)在 MVC 和 PHP 的上下文中广泛地编写模型，让我们只关注`View`和`Controller`部分的三元组。

正如[@Gordon](https://stackoverflow.com/a/11030476/727208)已经提到的那样，我们在 Web 中所做的**不是经典的 MVC**。这是不可能的集会。相反，我们在原始想法上提出了[不同的变化。](https://stackoverflow.com/a/7622038/727208)

## 视图不是模板

除非您使用的 MVP 实现特别糟糕，否则`view`实例都是对象，负责表示逻辑。

实例是否`controller`需要访问`view`取决于您使用的受 MVC 启发的模式。在 MVP 和 MVVM 模式中，`controller`实例请求信息`model layer`并将其传递给`view`（通过一些修改或附加标志）。

在 Model2 模式（更接近原始概念）中，`view`实例本身能够从`model layer`. 在这种情况下，例如不需要`controller`访问它。

## 控制器负责什么？

的实例`controller`不应直接从`model layer`. 有两个主要原因：

*   导致与特定类名的紧密耦合，使测试和维护更加困难
*   增加了额外的责任（或改变的理由），因此 - 违反了[SRP](http://en.wikipedia.org/wiki/Single_responsibility_principle)

结构的初始化`model layer`很复杂。它们通常要求您从`model layer`. 此任务应留给控制器使用的单独的类似工厂的实例（在实例之间共享）`controller`。`view`

实例的主要职责`controller`应该是改变`model layer`. 它应该接受用户的输入，并将其翻译成可以理解的形式`model layer`。

请记住，`model layer`作为一个整体，**必须完全不了解**和`view`实例`controller`。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-14T14:11:26.753

根据我的经验，对于 MVC 的确切含义有很多解释。几乎每个人都普遍同意：

*   模型实现业务逻辑，并封装数据访问。
*   视图实现表示逻辑。
*   控制器处理输入和控制流。

他们如何相互联系和交谈是辩论、争论、格斗和圣战的问题。

在实践中，控制器通常会加载视图和模型，视图有时会加载模型和控制器，但模型通常不会加载控制器或视图。

为什么视图会加载控制器？假设您实现了一个拥有自己的控制器、模型和视图的小部件。您想在多个位置的多个页面上加载此小部件。最简单的方法是在视图中加载小部件的控制器。

为什么视图会加载模型？也许您编写了控制器，以便它可以加载两个或更多视图，并且您不想为每个非常不同的视图加载不同的模型。所以你只需告诉每个视图加载它自己的模型。

分离角色，但允许任何最有效和最合乎逻辑地实现您需要的系统的交互。

# python - 比较两个文件并将报告保存在任何其他文件中

> ID：11029762
> 
> 赞同：1
> 
> 时间：2012-06-14T08:55:10.847
> 
> 标签：python, python-3.x, cmd, winmerge

我想比较两个文件的数据并将报告存储在另一个文件中。我尝试通过使用 python3.2 中的子进程模块调用 cmd.exe 来使用 winmerge。我能够获得差异报告，但无法保存该报告.winmerge 或任何其他比较工具 (diffmerge/kdiff3) 有没有办法在 windows7 中使用 cmd.exe 保存差异报告？请帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-15T10:56:35.913

虽然你的问题很老，但我想知道它还没有回答。我一直在寻找答案，有趣的是我找到了你的答案。也许您在一封邮件中混合了*很多问题。*所以我决定回答主要标题，我想你尝试比较人类可读的文件内容。

为了比较两个文件，有一个**[difflib](http://docs.python.org/2/library/difflib.html)**库，它是 Python 发行版的一部分。

顺便说一下，如何生成一个实用程序来比较文件的示例可以在 Python 的文档网站上找到。

链接在这里：**[计算增量的助手](http://docs.python.org/2/library/difflib.html#a-command-line-interface-to-difflib)**

从那里你可以学习创建一个选项并将增量保存到例如文本文件或其他东西。其中一些示例还包含类似 git-difference 的输出，这可能有助于您解决问题。

这意味着，如果您能够执行脚本，则不需要其他增量工具。在 CMD 上通过 Python 调用其他工具并尝试控制它们并没有多大意义...... :)

也许这个带有解释和代码示例的网站也可以帮助您： **[difflib – 比较序列](http://pymotw.com/2/difflib/index.html#module-difflib)**

我希望这对你有一点帮助。

编辑：我忘了提，最后一个站点包含一个如何生成 HTML 输出的简单示例： [HTML 输出](http://pymotw.com/2/difflib/index.html#html-output)

# objective-c - 两个 childViewController 之间的通信

> ID：11029765
> 
> 赞同：2
> 
> 时间：2012-06-14T08:55:15.217
> 
> 标签：objective-c, ios, cocoa-touch, ipad, uiviewcontroller

在两个子视图控制器之间进行通信的最佳方式是什么？我知道使用委托在子视图控制器和父视图控制器之间进行通信，但我无法了解如何在同一父视图控制器的子视图控制器之间进行通信。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T09:00:05.747

好吧，您可以通过网点解决它，在我看来，这是最糟糕的解决方案。或者您可以告知您发生的`parentViewController`所有事情并让他完成工作（例如，告知所有需要特定信息的对象）。

例如，您会这样做：

```
[childViewControllerInstance.parentViewController methodToCall]; 
```

在父视图控制器的类中，您可以做任何您想做的事情并对任何需要的对象执行操作。

**编辑：**

请试试

```
[childViewControllerInstance.parentViewController performSelector:@selector(methodToCall:) 
                 withObject:yourObjectToPass]; 
```

# java - 何时将 OSGi 片段附加到主机？

> ID：11029768
> 
> 赞同：14
> 
> 时间：2012-06-14T08:55:18.337
> 
> 标签：java, osgi, osgi-fragment

我有一个`OSGi`包含持久性服务（使用`hibernate`）的包和一个包含配置（xml 文件）的片段。在捆绑包的激活器中，我正在使用以下方式加载配置：

```
@Override
public void start(BundleContext ctx) {
   URL url = ctx.getBundle().getResource("hibernate.cfg.xml");
   SessionFactory sessionFactory = new AnnotationConfiguration().configure(url).buildSessionFactory();
} 
```

但有时，它`URL`是空的。当我尝试列出所有可用`URL`的（使用`findEntries`方法）时，似乎捆绑包自己的总是可用的，但片段的只是有时。我使用的是`Felix`4.0.2，bundle 和 fragment 是从同一个`Felix`. 自动启动级别。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-06-14T12:47:41.437

解析**主机**时，片段会附加到主机。通常，只要在主机解析之前安装片段，就会附加片段。

然而，主机总是有可能在没有分片的情况下解析，因为主机不依赖于它们的分片。因此，通常你应该编写你的主机，以便它可以处理不存在的片段 - 即它不应该抛出 NPE 等。

`Require-Capability`从 OSGi R4.3 开始，您可以使用和标头将依赖项从主机引入到其片段`Provide-Capability`。通过为依赖项发明自己的命名空间，您可以使您的片段为其提供`Provide-Capability`. 然后你的主机可以要求它`Require-Capability`......现在OSGi框架将确保片段在解析主机之前必须可用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T09:40:14.497

在片段包的解析过程中，片段被附加到主机。主机已解析，即使分片不存在也能成功启动；但片段依赖于主机 - 只有在附加到主机后才能解析并随后启动。

通过使两个包具有相同的起始级别，您似乎为这两个包创建了竞争条件。框架同时开始解析和启动两个包。有时它设法在片段的解析过程完成之前启动主机包 -> 然后主机包的启动方法表现得好像没有可用的片段一样。

例如，您可以为片段提供比主机捆绑包更早的启动级别。即使主机包尚未启动，片段也应该解析并成功启动。它只需要解析主机包。

您还可以在其他 OSGi 框架上测试此行为 - 例如在[ProSyst 的 mBedded Server (mBS)](https://dz.prosyst.com/download/)上- 我知道它完全符合指定上述片段解析的 OSGI 规范 4.2。

# php - 检查字符串是否为日期的函数

> ID：11029769
> 
> 赞同：82
> 
> 时间：2012-06-14T08:55:22.100
> 
> 标签：php, regex, validation, date, datetime

我正在尝试编写一个函数来确定字符串是否是使用 PHP 的日期/时间。基本上一个有效的日期/时间看起来像：

```
 2012-06-14 01:46:28 
```

显然，尽管它完全是动态的，任何值都可以改变，但它应该始终采用 的形式`XXXX-XX-XX XX:XX:XX`，我如何编写正则表达式来检查这种模式并在匹配时返回 true。

* * *

## 回答 #1

> 赞同：140
> 
> 时间：2012-06-14T08:59:25.877

如果这是您的整个字符串，那么只需尝试解析它：

```
if (DateTime::createFromFormat('Y-m-d H:i:s', $myString) !== false) {
  // it's a date
} 
```

* * *

## 回答 #2

> 赞同：62
> 
> 时间：2017-12-02T12:23:33.017

检查字符串是否为日期的最简单方法：

```
if(strtotime($date_string)){
    // it's in date format
} 
```

* * *

## 回答 #3

> 赞同：42
> 
> 时间：2012-06-14T09:00:40.690

这是不使用正则表达式的另一种方法：

```
function check_your_datetime($x) {
    return (date('Y-m-d H:i:s', strtotime($x)) == $x);
} 
```

* * *

## 回答 #4

> 赞同：31
> 
> 时间：2017-01-06T10:34:07.160

如果您不知道日期格式：

```
/**
 * Check if the value is a valid date
 *
 * @param mixed $value
 *
 * @return boolean
 */
function isDate($value) 
{
    if (!$value) {
        return false;
    }

    try {
        new \DateTime($value);
        return true;
    } catch (\Exception $e) {
        return false;
    }
}

var_dump(isDate('2017-01-06')); // true
var_dump(isDate('2017-13-06')); // false
var_dump(isDate('2017-02-06T04:20:33')); // true
var_dump(isDate('2017/02/06')); // true
var_dump(isDate('3.6\. 2017')); // true
var_dump(isDate(null)); // false
var_dump(isDate(true)); // false
var_dump(isDate(false)); // false
var_dump(isDate('')); // false
var_dump(isDate(45)); // false 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2018-04-12T12:36:11.673

在我的项目中，这似乎有效：

```
function isDate($value) {
    if (!$value) {
        return false;
    } else {
        $date = date_parse($value);
        if($date['error_count'] == 0 && $date['warning_count'] == 0){
            return checkdate($date['month'], $date['day'], $date['year']);
        } else {
            return false;
        }
    }
} 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2012-06-14T08:57:15.170

我将此函数用作 PHP[`filter_var`](http://php.net/manual/en/function.filter-var.php)函数的参数。

*   它检查`yyyy-mm-dd hh:mm:ss`格式的日期
*   它拒绝与模式匹配但仍然无效的日期（例如 4 月 31 日）

* * *

```
function filter_mydate($s) {
    if (preg_match('@^(\d\d\d\d)-(\d\d)-(\d\d) (\d\d):(\d\d):(\d\d)$@', $s, $m) == false) {
        return false;
    }
    if (checkdate($m[2], $m[3], $m[1]) == false || $m[4] >= 24 || $m[5] >= 60 || $m[6] >= 60) {
        return false;
    }
    return $s;
} 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2013-10-29T18:41:41.633

尽管这有一个公认的答案，但它并不是在所有情况下都有效。例如，我在使用日期“10/38/2013”​​的表单字段上测试日期验证，我得到了一个有效的 DateObject 返回，但日期是 PHP 所说的“溢出”，所以“10/38/ 2013 年”变为“2013 年 7 月 11 日”。有道理，但我们应该只接受修改后的日期，还是强制用户输入正确的日期？对于我们这些表单验证纳粹分子，我们可以使用这个肮脏的修复：[https](https://stackoverflow.com/a/10120725/486863) ://stackoverflow.com/a/10120725/486863，当对象抛出此警告时返回 false。

另一种解决方法是将字符串日期与格式化的日期相匹配，并将两者进行比较以获得相等的值。这似乎同样混乱。那好吧。这就是 PHP 开发者的本质。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2020-08-11T20:48:59.503

我在这里找到了答案[https://stackoverflow.com/a/19271434/1363220](https://stackoverflow.com/a/19271434/1363220)，基本上

```
$d = DateTime::createFromFormat($format, $date);
// The Y ( 4 digits year ) returns TRUE for any integer with any number of digits so changing the comparison from == to === fixes the issue.
if($d && $d->format($format) === $date) {
    //it's a proper date!
}
else {
    //it's not a proper date
} 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-06-14T08:59:52.237

我不会为此使用正则表达式，而只是拆分字符串并检查日期是否有效：

```
list($year, $month, $day, $hour, $minute, $second) = preg_split('%( |-|:)%', $mydatestring);
if(!checkdate($month, $day, $year)) {
     /* print error */
} 
/* check $hour, $minute and $second etc */ 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2019-03-18T16:24:01.107

if (strtotime($date)>strtotime(0)) { echo '这是一个日期' }

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2012-06-14T09:05:25.900

如果您决定使用 regEx，那么 txt2re.com 始终是一个很好的资源：

```
<?php

  $txt='2012-06-14 01:46:28';
  $re1='((?:2|1)\\d{3}(?:-|\\/)(?:(?:0[1-9])|(?:1[0-2]))(?:-|\\/)(?:(?:0[1-9])|(?:[1-2][0-9])|(?:3[0-1]))(?:T|\\s)(?:(?:[0-1][0-9])|(?:2[0-3])):(?:[0-5][0-9]):(?:[0-5][0-9]))';    # Time Stamp 1

  if ($c=preg_match_all ("/".$re1."/is", $txt, $matches))
  {
      $timestamp1=$matches[1][0];
      print "($timestamp1) \n";
  }

?> 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2014-07-25T14:59:14.297

```
 function validateDate($date, $format = 'Y-m-d H:i:s') 
 {    
     $d = DateTime::createFromFormat($format, $date);    
     return $d && $d->format($format) == $date; 
 } 
```

^(*[函数是从这个答案](https://stackoverflow.com/a/12323025/67332)或[php.net](http://www.php.net/manual/en/function.checkdate.php#113205)复制的*)

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2014-10-27T19:59:19.567

如果您有 PHP 5.2 Joey 的答案将不起作用。您需要扩展 PHP 的 DateTime 类：

```
class ExDateTime extends DateTime{
    public static function createFromFormat($frmt,$time,$timezone=null){
        $v = explode('.', phpversion());
        if(!$timezone) $timezone = new DateTimeZone(date_default_timezone_get());
        if(((int)$v[0]>=5&&(int)$v[1]>=2&&(int)$v[2]>17)){
            return parent::createFromFormat($frmt,$time,$timezone);
        }
        return new DateTime(date($frmt, strtotime($time)), $timezone);
    }
} 
```

而且你可以毫无问题地使用这个类：

```
ExDateTime::createFromFormat('d.m.Y G:i',$timevar); 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2021-10-21T07:05:44.817

这解决了我，但也提出了我认为的其他各种问题。

```
function validateTimeString($datetime, $format = "Y-m-d H:i:s"){
   return ($datetime == date($format, strtotime($datetime)));
 } 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2021-10-21T07:14:55.763

当我使用非常规的 API 时，有时会得到一些混乱的返回，而不是明确定义的日期格式。所以我使用了一个相当不雅的课程，我欣然承认它在原则上是残酷和非传统的，但它有时对我有好处^^。

```
class DateHelper
{
    private const DATE_FORMATS = [
        DATE_ATOM,
        DATE_COOKIE,
        DATE_RFC822,
        DATE_RFC850,
        DATE_RSS,
        DATE_W3C,
        "Y-m-d\TH:i:s.u",
        'Y-m-d\TH:i:s',
        "Y-m-d'T'H:i:s.SSS'Z'",
        "Y-m-d\TH:i:s.uP",
        "Y-m-d\TH:i:sP",
        "d/m/Y H:i:s",
    ];

    /**
     * @param string $inputStringDate
     * @return DateTime|null
     */
    public static function createDateFromUnknownFormat(string $inputStringDate): ?DateTime
    {
        $inputStringDate = str_replace('/', '-', $inputStringDate);
        preg_match('/^(\d{4})\-(\d{2})-(\d{2})$/', $inputStringDate, $result);
        if (!empty($result)) {
            return DateTime::createFromFormat('Y-m-d', $inputStringDate);
        }
        preg_match('/^(\d{2})\-(\d{2})-(\d{4})$/', $inputStringDate, $result);
        if (!empty($result)) {
            return DateTime::createFromFormat('d-m-Y', $inputStringDate);
        }
        foreach (self::DATE_FORMATS as $dateFormat) {
            if ($dateObject = DateTime::createFromFormat($dateFormat, $inputStringDate)) {
                return $dateObject;
            }
        }
        return null;
    }
} 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2022-01-17T12:19:45.127

一个简单的解决方案是：

```
echo is_numeric( strtotime( $string ) ) ? 'Yes' : 'No'; 
```

* * *

## 回答 #17

> 赞同：-2
> 
> 时间：2012-06-14T09:03:36.117

`strtotime`? 列表？常用表达？

PHP 的原生 DateTime 对象有什么问题？

[http://www.php.net/manual/en/datetime.construct.php](http://www.php.net/manual/en/datetime.construct.php)

# c++ - C ++如何从函数返回数组？

> ID：11029783
> 
> 赞同：3
> 
> 时间：2012-06-14T08:56:19.943
> 
> 标签：c++, arrays, dynamic-memory-allocation, dynamic-arrays

我是 C++ 的新手，在尝试获取一个函数（它需要一个数组）来返回一个数组时遇到了麻烦。该函数是一个非常基本的排序算法，用于大小为 4 的整数数组。我所拥有的如下：

```
int[] sortArrayAscending(int arrayToSort[3]) {
    int sortedArray[3];
    sortedArray[0] = minOfFour(arrayToSort[0],arrayToSort[1],arrayToSort[2],arrayToSort[3]);
    sortedArray[1] = lowerMidOfFour(arrayToSort[0],arrayToSort[1],arrayToSort[2],arrayToSort[3]);
    sortedArray[2] = higherMidOfFour(arrayToSort[0],arrayToSort[1],arrayToSort[2],arrayToSort[3]);
    sortedArray[3] = maxOfFour(arrayToSort[0],arrayToSort[1],arrayToSort[2],arrayToSort[3]);
    return sortedArray;
} 
```

我认为我对需要使用的语法感到非常困惑（对 min、lower、higher、max 的函数调用都可以正常工作。

我真的很感激一些帮助。

谢谢

EDIT2：感谢您的所有评论。感谢@Rook 和@Bob Yoplait 的回答，我现在已经解决了。使用的代码是：

```
 int* sortArrayAscending(int arrayToSort[4], int sortedArray[4]) {
    sortedArray[0] = minOfFour(arrayToSort[0],arrayToSort[1],arrayToSort[2],arrayToSort[3]);
    sortedArray[1] = lowerMidOfFour(arrayToSort[0],arrayToSort[1],arrayToSort[2],arrayToSort[3]);
    sortedArray[2] = higherMidOfFour(arrayToSort[0],arrayToSort[1],arrayToSort[2],arrayToSort[3]);
    sortedArray[3] = maxOfFour(arrayToSort[0],arrayToSort[1],arrayToSort[2],arrayToSort[3]);
    return sortedArray;
}

int _tmain(int argc, _TCHAR* argv[])
{
    int testNumbers[4] = {8,14,1,27};
    int testSorted[4];
    sortArrayAscending(testNumbers,testSorted);

    for (int i = 0; i < 4; i++) {
        cout << testSorted[i] << endl;
    }

    system("pause");
    return 0;
} 
```

感谢您的所有帮助 - 现在是查找向量的时候了！

PS我很欣赏@Luchian Grigore的解决方案很可能是做事的最佳实践方式，但这并不是我的具体问题

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-14T09:01:30.693

`std::array<int, 4>`我，如果我使用的是现代 C++ 编译器，我可能会使用它。很好地处理边界检查和内存管理以及从函数返回/传递给函数。您还可以`sort`在其上使用现有的 STL 机制和功能；无需重新发明轮子！

现在，在你的情况下，

```
int sortedArray[3]; 
```

是一个局部变量，你**永远不**应该直接返回对它的引用。您可以执行以下操作：

```
int* sortedArray = new int[4];
// do stuff
return sortedArray; 
```

（还要注意数组的大小，在您的情况下是 4，而不是 3！）但是在这种情况下，您必须记住在将来的某个时候删除该数组，否则您的应用程序会泄漏内存。

您还可以通过引用传递数组，使用类似的方法

```
void sort_array(std::array<int, 4>& the_array); 
```

或者

```
void sort_array(int** the_array) 
```

在这些情况下，您可以就地修改数组，或者在完成排序后将答案复制到参数中。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-14T08:58:54.403

编辑：编辑后，您的函数返回一个指向数组的指针。应该管用。

您可以返回一个指针或一个`std::vector`.

请注意，在您的代码中，您将遇到未定义的行为，因为`sortedArray`在方法结束时超出范围，并且内存被释放。

~~我会这样做：~~

```
std::vector<int> sortArrayAscending(int arrayToSort[4]) {
    std::vector<int> sortedArray(4);
    sortedArray.push_back( minOfFour(arrayToSort[0],arrayToSort[1],arrayToSort[2],arrayToSort[3]));
    sortedArray.push_back(  lowerMidOfFour(arrayToSort[0],arrayToSort[1],arrayToSort[2],arrayToSort[3]));
    sortedArray.push_back( higherMidOfFour(arrayToSort[0],arrayToSort[1],arrayToSort[2],arrayToSort[3]));
    sortedArray.push_back( maxOfFour(arrayToSort[0],arrayToSort[1],arrayToSort[2],arrayToSort[3]));
    return sortedArray;
} 
```

**事实上，我不会。**我只是使用`std::sort`而不是创建自己的函数，但这只是我。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-14T08:59:09.090

您正在返回指向局部变量的指针，这会导致**未定义的行为**。 `sortedArray`是具有自动存储持续时间的静态分配数组，这意味着一旦离开函数范围，它所在的内存就会被释放。

`new[]`您应该通过使用甚至更好地动态分配它：使用`std::vector`代替。如果您选择使用 分配它`new[]`，请不要忘记在`delete[]`不再需要此内存时通过调用来释放它。

另请注意，它`int sortedArray[3];`声明了一个大小为 3 个元素的数组，其索引从`0`到`2`。如果您访问大小为 3 的数组的第 4 个元素（如果您访问*“超过数组对象的最后一个元素”*的内存），**则行为也未定义**。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-14T09:00:41.783

由于这是 C++，建议使用 a[`std::vector<int>`](http://en.cppreference.com/w/cpp/container/vector)代替：

```
std::vector<int> sortArrayAscending(int arrayToSort[3]) {    
    std::vector<int> sortedArray(4); // Note 4, not 3.
    sortedArray[0] = ...;
    sortedArray[1] = ...;
    sortedArray[2] = ...;
    sortedArray[3] = ...;

    return sortedArray;
} 
```

请注意，已经有几种[算法](http://en.cppreference.com/w/cpp/algorithm)可以执行您*似乎*正在执行的一些任务：

*   [`max_element()`](http://en.cppreference.com/w/cpp/algorithm/max_element)
*   [`min_element()`](http://en.cppreference.com/w/cpp/algorithm/min_element)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-14T08:58:37.307

使用为 C 数组提供适当值语义的 Boost::Array（或 C+11 中的 std::array）。

```
boost::array<int,4> sortArrayAscending(boost::array<int,4>7 arrayToSort) 
{
    boost::array<int,4> sortedArray;
    sortedArray[0] = minOfFour(arrayToSort[0],arrayToSort[1],arrayToSort[2],arrayToSort[3]);
    sortedArray[1] = lowerMidOfFour(arrayToSort[0],arrayToSort[1],arrayToSort[2],arrayToSort[3]);
    sortedArray[2] = higherMidOfFour(arrayToSort[0],arrayToSort[1],arrayToSort[2],arrayToSort[3]);
    sortedArray[3] = maxOfFour(arrayToSort[0],arrayToSort[1],arrayToSort[2],arrayToSort[3]);
    return sortedArray;
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-14T09:12:25.897

它不像Java

要么将 sortedArray 作为参数传递给 func

```
int* sortArrayAscending(int* arrayToSort, int* sortedArray) {
    sortedArray[0] = minOfFour(arrayToSort[0],arrayToSort[1],arrayToSort[2],arrayToSort[3]);
    sortedArray[1] = lowerMidOfFour(arrayToSort[0],arrayToSort[1],arrayToSort[2],arrayToSort[3]);
    sortedArray[2] = higherMidOfFour(arrayToSort[0],arrayToSort[1],arrayToSort[2],arrayToSort[3]);
    sortedArray[3] = maxOfFour(arrayToSort[0],arrayToSort[1],arrayToSort[2],arrayToSort[3]);
    return sortedArray;
}

void toto() {
  int array[4]; // and fill values...
  int sortedArray[4];
  sortArrayAscending(array, sortedArray);
} 
```

或者

```
int* sortArrayAscending(int* arrayToSort) {
    int* sortedArray = new int[4];
    sortedArray[0] = minOfFour(arrayToSort[0],arrayToSort[1],arrayToSort[2],arrayToSort[3]);
    sortedArray[1] = lowerMidOfFour(arrayToSort[0],arrayToSort[1],arrayToSort[2],arrayToSort[3]);
    sortedArray[2] = higherMidOfFour(arrayToSort[0],arrayToSort[1],arrayToSort[2],arrayToSort[3]);
    sortedArray[3] = maxOfFour(arrayToSort[0],arrayToSort[1],arrayToSort[2],arrayToSort[3]);
    return sortedArray;
} 
```

然后您需要在第二种情况下删除返回的数组。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-14T09:05:38.520

数组总是通过引用传递给 C++ 中的任何函数。因此，只需将您的数组传递给函数。您的原始数组将被排序，然后您可以在您的程序中使用它。我相信没有必要明确返回数组。

# c# - MonoTouch ResignFirstResponder 不知道是哪个 UIView

> ID：11029785
> 
> 赞同：3
> 
> 时间：2012-06-14T08:56:23.390
> 
> 标签：c#, xamarin.ios

我正在构建一个 MonoTouch iPhone 应用程序，但遇到了一个小问题。

我有 2 个 UITextFields 用于登录（用户名/密码）的视图，但是当我第一次点击一个字段时，它会弹出键盘，并且键盘再也不会消失。

问题是键盘隐藏了我的“登录”按钮，因此用户无法点击它。

如果我点击视图“背景”上的任何位置，我希望键盘退出。

所以我发现我可以在 UIViewController 上的 TouchesEnded 中做到这一点 - 但是要退出键盘，我需要引用当前 UIView 作为 FirstResponder。

这最终导致了我的问题：我可以找出哪个 UIView 当前是 FirstResponder 而不递归地循环遍历我的 UIViewController 的所有视图吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-14T09:50:33.150

您可以使用

```
this.View.EndEditing(true); 
```

# asp.net - Viewstate 是否维护历史记录

> ID：11029786
> 
> 赞同：1
> 
> 时间：2012-06-14T08:56:26.260
> 
> 标签：asp.net, viewstate

根据候选人的回答，我对 ViewState 在 ASP.Net 应用程序中的功能感到困惑。根据候选人的说法，如果您有一个具有某个值的控件并且您更改了该值，则在回发时它将初始值以及更改后的值发送到服务器。因此，如果您继续更改值并提交，则将整个树发送到服务器。我尝试在线搜索，但无法获得有关相同的任何事实。

如果上面的描述令人困惑，这里有一个例子可以更清楚地说明声明：
- 我们有`<asp:TextBox ID="txt1" runat="Server" Text="First Value"/>`
- 页面加载后，我输入“第二值”`txt1`并点击提交并再次加载相同的页面（因为我没有写任何逻辑点击事件）
- 现在我输入“第三值”`txt1`并再次点击提交。

根据候选人第一次点击提交时，“第一个值”和“第二个值”都被发送到服务器，当页面加载之后，它会加密这两个值并将其放入 ViewState 中，所以当我点击提交时第二次，视图状态中的加密值（具有“第一值”和“第二值”）与“第三值”一起提交。

我不是工程背景，候选人曾经并声称这是大学教给他的。我只是想知道这些说法是否有道理。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T09:12:08.860

不，那不是真的。

在第二次提交时，“Second Value”将作为 ViewState 隐藏字段的一部分发送，“Third Value”作为 TextBox 的值发送。

但是，在页面生命周期的不同时间，所有三个值都将在服务器上可见（这可能是造成混乱的原因）。

*   在页面生命周期的初始化阶段，将设置“第一个值”（来自页面标记）。

*   在 LoadViewState 阶段，这将被“第二值”（来自 ViewState）替换

*   在 LoadPostbackData 阶段，这将被“第三值”替换。

On the next Postback (say "Fourth Value"), you'll be able to see "First Value", "Third Value" and "Fourth Value" at different times during the page lifecycle, but "Second Value" will be gone for good.

# javascript - jQuery - 排序后更新可排序列表

> ID：11029787
> 
> 赞同：0
> 
> 时间：2012-06-14T08:56:29.333
> 
> 标签：javascript, jquery, html

假设我有一个列表项，每个列表项中都有一个`span`看起来像这样的标签`<span class="pos">1st</span>`，从`1`到`5`。所以应该是第 1、第 2、第 3、第 4 和第 5。

这是一个可排序的列表，所以在你排序之后。我希望它`span`用数字和后缀正确更新每个标签。但是，在下面的 jsFiddle 中，您会看到情况并非如此。

jsFiddle：http: [//jsfiddle.net/weka/4GN37/](http://jsfiddle.net/weka/4GN37/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T08:59:40.440

```
$('.list').children().each(function(i) {
    $('.pos', this).text(i + 1);
    this.id = 'item-' + (i + 1); // ids cannot start with a number
    // but changing ids is often a bad idea...
}); 
```

演示：http: [//jsfiddle.net/ThiefMaster/hhFYz/1/](http://jsfiddle.net/ThiefMaster/hhFYz/1/)

对于后缀，您可以简单地编写一个函数，该函数返回给定数字的正确后缀。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T09:04:01.530

这是一种解决方案：

```
update: function (event, ui) {
    $(".list span.pos").html(function(i) {
        var suf = ["st", "nd", "rd"];
        return (i + 1) + (suf[i] || "th");
    });
} 
```

**演示：http:** [//jsfiddle.net/4GN37/2/](http://jsfiddle.net/4GN37/2/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T09:08:31.440

这是[您的小提琴的一个分支，可以](http://jsfiddle.net/X58cu/1/)解决您的问题。问题是，在您的循环中，您只是通过他们现有的 id 引用了孩子，而他们没有改变。您需要通过他们的新子位置来引用它们。

以下是相关代码：

```
var children = $('ul.list').children();
while (loopy < 6) {
    //$("li#" + loopy + ".rank > span.pos").text(loopy);
    $('span.pos', children[loopy-1]).text(loopy);
    console.log("Set pos..... " + loopy);
    $(children[loopy-1]).attr("id", loopy);
    loopy++;
} // end loop 
```

# java - 页面上的错误消息 在 JSF 中

> ID：11029792
> 
> 赞同：7
> 
> 时间：2012-06-14T08:56:44.110
> 
> 标签：java, jsf, jsf-2, messages

我正在 JSF 上创建简单的示例。这是一个小的登录应用程序。我的问题是我的页面上有重复的错误消息：

![我的屏幕](../Images/1bf3893bd6edd36d1d602d1db78e2ea7.png)

我的页面上有两个`h:message`（用于用户名和密码）标签和一个`h:messages`（全局消息）：

```
<h:form id="loginForm">

   <h:panelGrid columns="3">

       <h:outputText value="Username" />
       <h:inputText id="username" value="#{loginBean.username}" 
                  required="true" requiredMessage="Please enter your username" />
       <h:message for="username" errorClass="errorMessage" /> <!-- Message for username -->

       <h:outputText value="Password" />
       <h:inputSecret id="password" value="#{loginBean.password}" 
                  required="true" requiredMessage="Please enter your password" />
       <h:message for="password" errorClass="errorMessage" /> <!-- Message for password -->

       <h:commandButton value="Login" action="#{loginBean.login}" />

   </h:panelGrid>

   <h:messages styleClass="errorMessage" /> <!-- Global messages -->

</h:form> 
```

`login()`我的支持 bean 中的操作方法：

```
public String login() {
    FacesContext facesContext = FacesContext.getCurrentInstance();
    if ("admin".equals(username) && "pass".equals(password)) {
        return "success";
    } else {
        facesContext.addMessage("loginForm", new FacesMessage("Username or password is incorrect"));
        return null;
    }
} 
```

我只想在**这些字段旁边显示有关空用户名或密码的消息**，而不是在全局消息中的按钮下方。如果密码或用户名不正确，我想**在全局消息中打印我的操作方法中的错误消息。**我该如何解决这个问题？

我尝试使用该属性`globalOnly`：

```
<h:messages styleClass="errorMessage" globalOnly="true" /> <!-- Global messages --> 
```

但这并没有完全解决我的问题，因为在这种情况下根本不会显示全局消息。

提前致谢！

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-14T09:11:29.750

`globalOnly`如果您在支持 bean 中正确添加消息，则该开关应该可以工作。客户端 ID 必须`null`位于`FacesContext.addMessage(...)`：

```
FacesContext.getCurrentInstance().addMessage(null, new FacesMessage(message)); 
```

# wix - 为什么我的 wix 创建的安装程序 msi 在下载后被 IE 和 Chrome 视为不安全？

> ID：11029796
> 
> 赞同：0
> 
> 时间：2012-06-14T08:57:07.523
> 
> 标签：wix

我通过 Wix 创建了一个 MSI，它运行良好，但是当我将我的 MSI 发布到 Internet 并从 IE 或 Chrome 下载它时，下载完成后，安全扫描程序假定我的 MIS 不是常见的下载文件类型，有潜在风险。

你能给我一些线索吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T14:59:52.220

捆绑我们现在所知道的并创建答案：出现此问题是因为应用程序不受信任，为了使其受信任，必须使用代码签名证书对其进行签名。这可以确保最终用户不会以任何方式更改您的应用程序并且应该可以安全地执行。代码签名证书可以在多个地方购买，例如：

[http://www.instancessl.com](http://www.instantssl.com)

[http://www.verisign.com](http://www.verisign.com)

[http://www.thawte.com](http://www.thawte.com)

[https://www.globalsign.com](https://www.globalsign.com)

除此之外，您可以自己生成一个证书，在将其添加到本地受信任的根证书后，它应该表现得像受信任一样，请注意，这仅用于测试目的，不会使其在任何其他计算机上受信任。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T21:02:16.737

对 MSI 进行签名始终是一个好主意，因为未签名 MSI 的 UAC 提示不同于具有有效数字签名的 MSI。

有关如何执行此操作的更多信息，请参阅 MSDN - [How to: Sign Setup Files with SignTool.exe (Windows Installer)](http://msdn.microsoft.com/en-us/library/ee290833.aspx)

如果您想要标准 Windows PC 信任的证书，则需要由受信任的第三方签名的**Microsoft Authenticode 代码签名证书，我个人使用 Comodo -** [http://www.instantssl.com/code-signing/](http://www.instantssl.com/code-signing/)

# android - android在listview中设置不同的字体/颜色

> ID：11029799
> 
> 赞同：0
> 
> 时间：2012-06-14T08:57:16.013
> 
> 标签：android, listview, fonts, colors

我在 Android 中创建了一个包含 3 行的列表视图。如果我想在行上设置不同的字体/颜色，我该如何实现？到目前为止，我已经尝试了不同的东西，但没有任何成功。这是我最近的尝试，我尝试将 getComment() 设置为斜体，但老实说，我不知道我在做什么：D。请帮忙！

```
public String toString()
{
return this.getAlias() + " " + this.dateFormat.format(this.getDate()) + "\n" +         (Html.fromHtml("<i>" + this.getComment() + "</i>" + "<br />"));  
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T09:07:17.613

您可以从 ListViewAdapter 执行此操作。在我的项目中，我创建了一个扩展 ArrayAdapter 的新类：

```
class SummaryListAdapter extends ArrayAdapter<DynformSummary> {
    static final int mViewResourceId = R.layout.dynformlist_item;
    final Context mContext;

    public SummaryListAdapter(Context context, DynformSummaryList items) {
        super(context, mViewResourceId, items);
        mContext = context;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View view = convertView;
        if (view == null) {
            LayoutInflater inflater = LayoutInflater.from(mContext);
            view = inflater.inflate(mViewResourceId, parent, false);
        }

        DynformSummary summary = getItem(position);
        if (summary != null) {
            TextView nameView = (TextView) view
                    .findViewById(R.id.dynformSummary_name);
            TextView createdOnView = (TextView) view
                    .findViewById(R.id.dynformSummary_createdOn);
            TextView itemSummaryView = (TextView) view
                    .findViewById(R.id.dynformSummary_itemSummary);
            java.text.DateFormat df = DateFormat.getDateFormat(mContext);

            String itemSummary = summary.getItemSummary();
            if (itemSummary == null || itemSummary.length() == 0) {
                itemSummary = mContext
                        .getString(R.string.placeholder_empty);
            }

            nameView.setText(summary.getName());
            createdOnView.setText(df.format(summary.getCreatedOn()));
            itemSummaryView.setText(itemSummary);
        }

        return view;
    }
} 
```

在您的情况下，您可以为每种不同的字体或颜色创建单独的布局 xml，或者您可以在运行时在 getView 方法中编辑字体/颜色。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T09:04:51.127

我假设您已经在 xml 布局文件中定义了行。您可以使用一些简单的参数来更改 TextView 中文本的颜色/样式：

```
<TextView
  ...
  android:textColor="#FFFF0000"
  android:textStyle="italic"
/> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T09:05:28.633

您想要做的是拥有一个包含文本视图的列表视图，当您设置文本视图文本时，您正在设置 CharSequence 对吗？好吧，使用 CharSequence 您可以添加跨度，您可以将其设为粗体、下划线、斜体、彩色等。我很确定当您将其放在列表视图中时它会保持其风格，没有理由不应该这样做，我也认为当您使用字符串时，样式会消失，因此您可能需要使用 CharSequence

[http://developer.android.com/reference/android/text/Spannable.html](http://developer.android.com/reference/android/text/Spannable.html)

使用跨度，您还可以在不使用硬编码 XML 的情况下动态更改外观

# testing - Mock class in a signed Jar file with Mockito

> ID：11029805
> 
> 赞同：1
> 
> 时间：2012-06-14T08:57:49.397
> 
> 标签：testing, mocking, eclipse-rcp, mockito

I'm trying to partially mock a class from a signed Jar file (actually, the target class is in the Eclipse API).

Is there any way to do that with Mockito? I tried out several workarounds, but the result is always something like this:

```
org.mockito.cglib.core.CodeGenerationException: 
    java.lang.reflect.InvocationTargetException-->null
  ...
Caused by: java.lang.reflect.InvocationTargetException
  ...
Caused by: java.lang.SecurityException:
    class "org.eclipse.jdt.launching.AbstractJavaLaunchConfigurationDelegate$$
           FastClassByMockitoWithCGLIB$$6e308a80"'s
    signer information does not match signer information of other classes
    in the same package
    ... 
```

A Bit of Googling showed me that [PowerMock might help me](http://code.google.com/p/powermock/wiki/Motivation#Using_a_3rd_party_or_legacy_framework), but I would like to avoid introducing a new dependency for my project.

Thanks in advance!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T13:15:16.113

我相信 CGLIB 已经过调整以支持签名包，但可能存在一些问题。你能做一个简单的项目来演示问题并在 mockito 项目上打开一个问题吗？

你在 OSGI 中运行模拟吗？

布莱斯

# java - java game picture not display

> ID：11029806
> 
> 赞同：1
> 
> 时间：2012-06-14T08:57:50.643
> 
> 标签：java, graphics, embedded-resource, getresource

I make 2D game in AWT and I had all files in one package. Now I divided files into some packages. Images, which I called with:

```
ImageIcon ii=new ImageIcon(this.getClass().getResource(image));
img=ii.getImage(); 
```

now I call with:

```
ImageIcon ii=new ImageIcon("cz/ryska/awtgame/images/"+image);
img=ii.getImage(); 
```

This code is in class in package `cz.ryska.awtgame.basic`

But when I start game, displays game scene but not display images. Scene is empty. But any Java error is not induced. Images are probably found but not display. What is problem?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T01:23:59.257

> ..在我更改包结构之前，绘画是有效的。

您所做的不仅仅是更改包结构。变化是第一个是通过 加载图像`URL`，而第二个是从 a 加载图像`File`（其中`String`代表路径）。An`URL`可以与嵌入式资源一起使用，而 a`File`不能。

查看[信息。页面`embedded-resource`](https://stackoverflow.com/tags/embedded-resource/info)了解更多信息。

# wpf - 如何根据是否加载相应的模块使视图可见和折叠？

> ID：11029807
> 
> 赞同：0
> 
> 时间：2012-06-14T08:57:56.683
> 
> 标签：wpf, mvvm, prism

我有一个棱镜应用程序已经在生产中。

我需要在此应用程序中创建一个新模块。根据配置文件，该模块可以存在或不存在于应用程序中。

此模块视图应显示在已存在的区域中。该视图应该仅在加载模块时可见。

问题：现有屏幕有一个区域显示来自 2 个不同模块的 2 个选项卡项。现在新视图应该是第一个选项卡的一部分，它让用户可以选择是查看以前的信息还是来自这个新模块的新信息。我被卡住了，不知道如何在加载新模块时显示这些复选框，并在未加载时隐藏它。我把这个逻辑放在哪里？

![需要](../Images/8f0ee7d26255318d1ba5f507f7750823.png)

当前情景： ![当前图像](../Images/a252a51a2c517708e2cfc67e995a1a23.png)

非常模糊的图像来定义我的意思？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T18:21:51.883

这是一个可行的选择，而且不需要太多努力......

在您精美插图的 Tab1 中，添加另一个选项卡控件，并将其设为 Prism 区域。使用原始视图和新模块中的视图填充此区域。

然后，如有必要，重新设置内部选项卡控件的样式，使选项卡标题看起来像单选按钮，并设置一个数据触发器以在选项卡小于或等于 1 时隐藏选项卡标题条。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T07:49:28.700

感谢你的帮助 ：）

经过大量的RND后，我弄清楚了。我创建了两个选项卡控制区域，一个用于主选项卡，另一个用于子选项卡。在子选项卡上，我只有在 item.count 大于 1 时才返回样式以显示 tabitem，如标记所建议的那样。

我已将此代码放入我现有的模块中。

# android - Actionbar Sherlock Search Widget expand does not work

> ID：11029810
> 
> 赞同：5
> 
> 时间：2012-06-14T08:58:18.430
> 
> 标签：android, user-interface, actionbarsherlock

I'm using Actionbar Sherlock. The activity be shown on startup should start in a "search mode" to start searching immediately. For doing so I use the following code:

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    super.onCreateOptionsMenu(menu);

    //collapse search
    MenuItem searchItem = menu.add(Menu.NONE, R.string.inlineSearch, Menu.NONE, getString(R.string.inlineSearch)).setIcon(R.drawable.menu_search);
    searchItem.setShowAsAction(MenuItem.SHOW_AS_ACTION_ALWAYS);
    searchView = new SearchView(this);
    searchItem.setActionView(new SearchView(this));
    searchItem.expandActionView();
    return true;
} 
```

The SearchView is the View provided by Android / Actionbar Sherlock.

The problem I'm facing with that is that no matter what I do, the item is never expanded on startup. I tried calling the expandActionView method after startup by using another actionbar item, nothing changed. I implemented my own View implementing CollapsibleActionView, but the methods onActionViewExpanded() and onActionViewCollapsed() never get called.

But if I click the collapsed button of the SearchView, the view expands as expected.

Does anyone know what I'm doing wrong? Thanks for your help!

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-14T12:55:15.117

在浏览了源文档之后，我终于自己找到了答案。 `menuItem.expandActionView()`只有在 MenuItem 设置了以下标志时才会生效：`searchItem.setShowAsAction(MenuItem.SHOW_AS_ACTION_COLLAPSE_ACTION_VIEW);`

希望对那里的人有所帮助！

# .htaccess - htaccess，子文件夹重写为 index.php

> ID：11029816
> 
> 赞同：2
> 
> 时间：2012-06-14T08:58:39.757
> 
> 标签：.htaccess

我怎样才能做到这一点？

主链接：

```
http://www.domain.com/?link=whatever/something/everythting 
```

转换成：

```
http://www.domain.com/whatever/something/everythting 
```

我试过这个：

```
RewriteEngine On
RewriteRule ^([^/]*)$ index.php?link=$1 [L] 
```

但不工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T09:28:18.023

通过启用 mod_rewrite 和 .htaccess `httpd.conf`，然后将此代码放在您`.htaccess`的`DOCUMENT_ROOT`目录下：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

# If the request is not for a valid directory
RewriteCond %{REQUEST_FILENAME} !-d
# If the request is not for a valid file
RewriteCond %{REQUEST_FILENAME} !-f
# If the request is not for a valid link
RewriteCond %{REQUEST_FILENAME} !-l
RewriteRule ^(.+)$ /?link=$1 [L,QSA] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T09:29:29.773

这应该适合你：

```
RewriteEngine On
RewriteRule ^(.+)$ index.php?link=$1 [L] 
```

**编辑：**

正如@anubhava 在他的[答案](https://stackoverflow.com/questions/11029816/htaccess-sub-folder-rewrite-to-index-hphp/11030252#11030252)中发布的那样，您应该检查请求的文件或目录是否存在于 RewriteCond 中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T09:32:32.327

这应该有效：

```
RewriteRule ^([^.]+)$ index.php?link=$1 [L] 
```

# iphone - 如何在例如 Instagram 应用程序中创建可点击的文本？

> ID：11029821
> 
> 赞同：0
> 
> 时间：2012-06-14T08:59:01.473
> 
> 标签：iphone, objective-c, uiwebview, uilabel, instagram

在 Instagram 中发布的图片下方是其他一些用户的评论。您可以单击其中任何一个来打开他们的个人资料。

![在此处输入图像描述](../Images/37b6b4e7022369f76612afc1b7e7ea3c.png)

如何创造这样的东西？带有标签、webview、任何其他小部件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T09:05:40.737

您可以使用关闭属性`UITextView`。或者，如果您想要更轻的东西，`editable`您可以使用[OHAttributedLabel 。](https://github.com/AliSoftware/OHAttributedLabel)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T09:48:44.943

你想要的是一个自定义类型的 UIButton 并简单地设置一个标题。

您可以访问和修改标签属性，除了带有 titleLabel 属性的文本，但您必须使用 setTitleForState 将文本实际放入按钮中，然后在按钮上简单地 addTarget at selector for state userinteractiontouchupinside

```
 self.webLink = [UIButton buttonWithType:UIButtonTypeCustom];

    [self.webLink setTitle:@"title" forState:UIControlStateNormal];
    [self.webLink setTitleColor:[UIColor customColor] forState:UIControlStateNormal];
    [self.webLink addTarget:self action:@selector(pushWeblink:) forControlEvents:UIControlEventTouchUpInside];
    self.webLink.frame = CGRectMake(x,y,w,h);
    self.webLink.contentHorizontalAlignment = UIControlContentHorizontalAlignmentLeft;
    self.webLink.titleLabel.backgroundColor = [UIColor clearColor];
    self.webLink.titleLabel.font = [UIFont fontWithName:@"yourFont" size:12]; 
```

# facebook-graph-api - 如何使用 JavaScript API 动态获取访问令牌

> ID：11029822
> 
> 赞同：0
> 
> 时间：2012-06-14T08:59:07.570
> 
> 标签：facebook-graph-api

我正在尝试为 Facebook Grahp 发布一个操作，以获得我的应用程序批准。错误：

发布动作 您必须使用此动作类型将至少一个动作发布到您的时间线。

所以我创建了一个简单的页面来发布操作（我得到了代码表单：Graph API），就是这个：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">

<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="de-DE" xmlns:fb="https://www.facebook.com/2008/fbml"> 

<head prefix="og: http://ogp.me/ns# fashion_econtest: http://ogp.me/ns/apps/fashion_econtest#">

    <title>Fashion</title>
    <meta property="fb:app_id" content="MyAppId" /> 
    <meta property="og:type" content="fashion:contest" /> 
    <meta property="og:title" content="eContest" /> 
    <meta property="og:image" content="The Image" /> 
    <meta property="og:description" content="Registrati e vinci cli accessori più fashion dell&#039;anno!" /> 
    <meta property="og:url" content="MyURL">

    <script type="text/javascript">
        function postSubscribe(){
            FB.api(
            '/me/fashion:subscribe',
            'post',
            {share:'MyUrl'},
            function(response){
                if(!response){
                    alert('Error');
                }else if(response.error) {
                    alert(response.error.message);
                }else{
                    alert('Subscribe was successful! Action ID: ' + response.id);
                }
            });
        }
    </script>
</head>
<body>
    <div id="fb-root"></div>
    <script>
        window.fbAsyncInit = function(){
            FB.init({
                appId      : 'MyAppId', // App ID
                status     : true, // check login status
                cookie     : true, // enable cookies to allow the server to access the session
                xfbml      : true  // parse XFBML
            });
        };

        // Load the SDK Asynchronously
        (function(d){
            var js, id = 'facebook-jssdk'; if (d.getElementById(id)) {return;}
            js = d.createElement('script'); js.id = id; js.async = true;
            js.src = "//connect.facebook.net/it_IT/all.js";
            d.getElementsByTagName('head')[0].appendChild(js);
        }(document));
    </script>

    <h3>Fashion</h3>
    <p>
        <img title="Vinci i premi più Fashion!" src="http://xxxxxx.de/img/yyyyyy.jpg" width="550"/>
    </p>

    <br>
    <form>
        <input type="button" value="Subscribe" onclick="postSubscribe();" />
    </form>
</body> 
```

但是一旦我发送请求，我就会收到以下错误：

> 必须使用活动访问令牌来查询有关当前用户的信息。

如何使用 Java Script FB-API 动态获取访问令牌并使其正常工作？

非常感谢您的帮助！！阿明

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T14:28:39.937

Facebook 根据您的应用程序 ID 自动交换 access_tokens。我认为您正在寻找使用 FB API 方法获取当前活动的 access_token 。尝试 FB.getLoginStatus API 调用。有关更多详细信息，请参阅... [http://developers.facebook.com/docs/reference/javascript/FB.getLoginStatus/](http://developers.facebook.com/docs/reference/javascript/FB.getLoginStatus/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T11:57:52.383

首先调用 FB.login，并请求适当的权限 (publish_actions)。

（或者只是使用 Graph API 资源管理器完成所有工作，而不是为只需要一次的东西编写脚本。）

# c# - 数据集排序

> ID：11029823
> 
> 赞同：10
> 
> 时间：2012-06-14T08:59:08.710
> 
> 标签：c#, asp.net, .net, sorting, dataset

在`DataTable`我可以排序

```
 dataTable.DefaultView.Sort = "SortField DESC"; 
```

我正在`DataSet`从数据库中获取一个，我想知道我是否可以对`DataSet`我在`DataTable`.

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-06-14T09:00:46.387

您仍然可以从数据集中访问 DataTable，如下所示，

```
ds.Tables[0].DefaultView.Sort =" criterian"; 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-14T09:02:54.543

```
DataView view = ds.Tables[0].DefaultView;

view.Sort = "SortField DESC"; 
```

[http://msdn.microsoft.com/en-us/library/1ay5y4w0(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/1ay5y4w0(v=vs.71).aspx)

[http://social.msdn.microsoft.com/Forums/nl/netfxbcl/thread/adbd95cd-49d1-483d-b2b2-4b696a66e9a6](http://social.msdn.microsoft.com/Forums/nl/netfxbcl/thread/adbd95cd-49d1-483d-b2b2-4b696a66e9a6)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-14T09:47:08.643

`DataTable`从`DataSet`如下访问，

```
ds.Tables[0].DefaultView.Sort = "SortField DESC"; 
```

希望这可以帮助。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-11-08T23:30:27.347

对于高级排序需求，您可能希望使用[此处](https://docs.microsoft.com/en-us/dotnet/framework/data/adonet/data-binding-and-linq-to-dataset)描述的 LINQ 。[基本上，它允许使用System.Data.DataTableExtensions.AsDataFiew](https://msdn.microsoft.com/en-us/library/bb907985(v=vs.110).aspx)扩展方法从 LINQ 查询创建 DataView 。

或者，如果您可以（或者甚至更喜欢）使用 IEnumerable，您可以使用[System.Data.DataTableExtensions.AsEnumerable](https://msdn.microsoft.com/en-us/library/system.data.datatableextensions.asenumerable%28v=vs.110%29.aspx?f=255&MSPPError=-2147217396)扩展方法。例如：

```
var enumerable = dataSet.Tables[0].AsEnumerable()
                 .OrderBy(x => x.Field<string>("ColumnName")
                 .ThenByDescending(x => x.Field<int?>("OtherColumnName")??0); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-14T09:09:24.773

从 tha DataSet 对象，您可以访问所有要引入的 DataTable。

试试这个：

```
DataDet.Tables[0].DefaultView.Sort = "sort criteria"; 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-05-08T07:23:44.187

```
 DataSet fileTransferDetail = null;//Data to be sorted.
 DataSet result = null;//Declare a dataSet to be filled.

//Sort data.
fileTransferDetail.Tables[0].DefaultView.Sort = "ID DESC";
//Store in new Dataset
result.Tables.Add(fileTransferDetail.Tables[0].DefaultView.ToTable()); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-05-14T09:26:25.877

试试下面的代码。

```
DataView dv = new DataView();
dv = ds.Tables[0].DefaultView;
dv.Sort=value; 
```

# android - Android中SurfaceView和GLSurfaceView的区别

> ID：11029829
> 
> 赞同：19
> 
> 时间：2012-06-14T08:59:25.277
> 
> 标签：android, opengl-es, surfaceview

谁能告诉我 SurfaceView 和 GLSurfaceView 之间的基本区别是什么？什么时候应该使用 SurfaceView，什么时候应该使用 GLSurfaceView？

我在 Stack Overflow 上阅读了一些已经回答的问题，但它们并没有满足我的查询。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-06-14T10:06:00.410

A`GLSurfaceView`是`SurfaceView`您可以使用 OpenGL 渲染的。在它们之间进行选择很简单：

*   如果您熟悉 OpenGL 并需要它提供的功能，请使用`GLSurfaceView`.
*   否则，使用`SurfaceView`.

OpenGL是低级的。如果您还不熟悉它，这是一项需要学习的任务。如果只需要 2D 绘图，请`SurfaceView`使用高级、合理高性能的[Canvas](http://developer.android.com/reference/android/graphics/Canvas.html)。这很容易使用。

除非您有充分的理由使用 a `GLSurfaceView`，否则您应该使用常规`SurfaceView`。我建议如果你还不知道你需要 GL，那么你可能不需要。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2014-04-10T13:31:36.960

GLSurfaceView 是 3D 应用程序的主要构建块，因为 View 是 2D 应用程序。它不仅广泛用于 3D 游戏，还广泛用于相机等多媒体应用程序中，以创建特殊的预览效果。

GLSurfaceView 扩展了 SurfaceView 并且另外拥有一个渲染线程和一个由客户端设置的渲染对象。渲染线程保持运行，连续或按需运行，并委托给渲染对象以使用 OpenGL API 绘制帧。对于 SurfaceView 和 GLSurfaceView，渲染是在主线程之外的单独线程中执行的。不同之处在于 SurfaceView 的渲染线程是由客户端创建的，而 GLSurfaceView 是由系统创建的。更重要的是，GLSurfaceView 将在内部处理主线程和渲染线程之间的同步。

有关更多信息，请查看[此](http://pierrchen.blogspot.jp/2014/04/android-ui-internal-glsurfaceview.html)和[此](http://pierrchen.blogspot.jp/2014/03/anroid-graphics-surfaceview-all-you.html)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-14T09:10:22.760

**表面视图**

AFAIK Canvas 在 2D 绘图中易于实现且有效，但不支持 3D 绘图

**GLSurfaceView**

如果你想设计一些 3D 游戏，那么你应该使用 GLSurfaceView 和 OGLES

我的经验是，如果您只想进行 2D 处理，请选择 Canvas，因为与 GLSurfaceView 相比，它更易于实现且更有效。

# android - 使用 Proguard 时使用 jackson-json 库的问题

> ID：11029836
> 
> 赞同：16
> 
> 时间：2012-06-14T08:59:36.197
> 
> 标签：android, obfuscation, jackson, proguard

我在 Android 项目中使用 jackson-json 库，在使用 Proguard 进行混淆时导出应用程序时，出现以下错误：

```
Proguard returned with error code 1\. See console
Warning: com.fasterxml.jackson.databind.ext.DOMSerializer: can't find referenced class org.w3c.dom.bootstrap.DOMImplementationRegistry
Warning: com.fasterxml.jackson.databind.ext.DOMSerializer: can't find referenced class org.w3c.dom.bootstrap.DOMImplementationRegistry
Warning: com.fasterxml.jackson.databind.ext.DOMSerializer: can't find referenced class org.w3c.dom.bootstrap.DOMImplementationRegistry
Warning: com.fasterxml.jackson.databind.ext.DOMSerializer: can't find referenced class org.w3c.dom.bootstrap.DOMImplementationRegistry
Warning: com.fasterxml.jackson.databind.ext.DOMSerializer: can't find referenced class org.w3c.dom.bootstrap.DOMImplementationRegistry
You should check if you need to specify additional program jars.
Warning: there were 5 unresolved references to classes or interfaces.
You may need to specify additional library jars (using '-libraryjars').
java.io.IOException: Please correct the above warnings first.
at proguard.Initializer.execute(Initializer.java:321)
at proguard.ProGuard.initialize(ProGuard.java:211)
at proguard.ProGuard.execute(ProGuard.java:86)
at proguard.ProGuard.main(ProGuard.java:492) 
```

我尝试过使用项目的设置，添加“-libraryjars”以包含其他 jar 和许多其他东西，但没有任何帮助。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-06-14T12:14:57.243

好的，我添加了从多个网站收集的以下内容：

```
-libraryjars libs/jackson-annotations-2.0.0.jar
-libraryjars libs/jackson-core-2.0.0.jar

-dontskipnonpubliclibraryclassmembers

-keepattributes *Annotation*,EnclosingMethod

-keepnames class org.codehaus.jackson.** { *; }

-dontwarn javax.xml.**
-dontwarn javax.xml.stream.events.**
-dontwarn com.fasterxml.jackson.databind.** 
```

连同用于 json 的每个类的下一个代码（使用 get&set），我认为正在创建 apk，但我不确定我所写的内容是否足以使其正常工作，以及是否有一些不需要我写的：

```
-keep public class MyClass.** {
  public void set*(***);
  public *** get*();
} 
```

# java - Hibernate Criterion - 连接更多表

> ID：11029837
> 
> 赞同：1
> 
> 时间：2012-06-14T08:59:39.217
> 
> 标签：java, hibernate, join

我在这种情况下遇到了问题（我会尽量让它更容易）——我的数据库中有用户具有角色列表和状态列表。

```
public class User implements Serializable {   
   @ManyToMany(cascade = CascadeType.ALL, fetch= FetchType.LAZY)   
   @JoinTable(name = "role_to_user",
               joinColumns={@JoinColumn(name = "user_id")},
                inverseJoinColumns={@JoinColumn(name = "role_id")})
     private Set<Role> roles = new LinkedHashSet<Role>();      
   @ManyToMany(cascade = CascadeType.ALL, fetch= FetchType.LAZY)   
   @JoinTable(name = "status_to_user",
              joinColumns={@JoinColumn(name = "user_id")},
               inverseJoinColumns={@JoinColumn(name = "status_id")})   
     private Set<Status> statuses = new LinkedHashSet<Status>(); 
} 
```

我正在尝试创建一个休眠条件，它能够返回具有指定角色和状态的用户（在加入角色表和状态表之后）。就像是 ：

> 返回角色 = 1 或角色 = 2 且状态 = 1 的用户

我用谷歌搜索了一些东西，现在我可以创建一个查询，它只返回具有指定角色的用户，而不是状态。

```
Criteria cr = session.createCriteria(User.class)
                     .createCriteria("roles")
                     .add(Restrictions.or(Restrictions.eq("roletype", 1), Restrictions.eq("roletype", 2))); 
```

表用户和角色通过具有两列（user_id，role_id）的role_to_user表连接，类似地通过status_to_role表连接表用户和状态

谢谢你的建议 ：）

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-14T09:26:47.163

```
Criteria cr = session.createCriteria(User.class, "user")
                     .createAlias("user.roles", "role", Criteria.INNER_JOIN)
                     .createAlias("user.statuses", "status", Criteria.LEFT_JOIN);
cr.add(Restrictions.or(
           Restrictions.eq("role.roletype", 1),
           Restrictions.and(
               Restrictions.eq("role.roletype", 2),
               Restrictions.eq("status.statusType", 1)))); 
```

# php - Flash Uploader 使用 URLUploader 进度问题

> ID：11029850
> 
> 赞同：0
> 
> 时间：2012-06-14T09:00:34.077
> 
> 标签：php, actionscript-3, upload, progress, urlloader

我想制作一个使用 Flash 和 PHP 服务器的上传器。问题是上传时我无法获得进度。我在 actionscript 3 中使用了 URLLoader 类。我不使用 fileReference，因为我想上传从位图数据编码的图像。我如何获得进度？P/s：有没有办法从 PHP 服务器返回上传文件的大小？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T09:29:56.480

.addEventListener(ProgressEvent.PROGRESS, functionName) - 应该返回你的进度

# sql - 无法使用 ADO 从 VBA/Excel 写入 SQL

> ID：11029855
> 
> 赞同：2
> 
> 时间：2012-06-14T09:00:54.747
> 
> 标签：sql, vba, ado

我正在使用 VBA 处理 SQL 数据库，选择命令分叉很好，问题在于修改 dbase - 插入、删除。如果我使用外部应用程序与 DBase 一起工作，一切都很好，这意味着 - 我的权限还可以。在示例中选择成功完成，休息不...

谢谢你的帮助。

JB

```
Public LinkID As ADODB.Connection
Public QueryID As ADODB.Recordset
Private Record() As String
Public Row As Long
Public NumRows As Long
Public Function connect(Optional server As String = "", Optional uid As String = "", Optional pwd As String = "", _
    Optional dbname As String = "") As Boolean
    Dim connStr As String
    If (server = "") Then server = "DBServer"
    If (uid = "") Then uid = "User1"
    If (pwd = "") Then pwd = "1234"
    If (dbname = "") Then dbname = "Database1"
    If (uid = "") Then
        connStr = "DRIVER={SQL Server};SERVER=" & server & ";Trusted_Connection=Yes;APP=Office 2007 App;DATABASE=" & dbname
    Else
        'connStr = "DRIVER={SQL Server};SERVER=" & server & ";UID=" & uid & ";PWD=" & pwd & ";APP=Office 2007 App;DATABASE=" & dbname
        connStr = "Provider=SqlOleDb;Data Source=DBServer;Initial Catalog = Database1;UID=" & uid & ";PWD=" & pwd & ";Options=-1;"
    End If
    If (LinkID Is Nothing) Then
        Set LinkID = New ADODB.Connection
        On Error Resume Next
        LinkID.Open connStr
        On Error GoTo 0
        If (LinkID.State = 0) Then
            ErrorNo = Err.Number
            ErrorTxt = Err.Description
        End If
    End If
    connect = LinkID.State
End Function
Public Function query(Optional queryStr As String = "") As Boolean
    If (queryStr = "") Then Exit Function
    If Not (connect) Then Exit Function
    If (QueryID Is Nothing) Then
        Set QueryID = New ADODB.Recordset
    ElseIf (QueryID.State) Then
        free_result
    End If
    On Error Resume Next
    QueryID.Open queryStr, LinkID, adOpenForwardOnly, adLockOptimistic, -1 ', adLockBatchOptimistic
    On Error GoTo 0
    Row = 0
    If (QueryID.State = 0) Then
        ErrorNo = Err.Number
        ErrorTxt = Err.Description
    End If
    NumRows = count_records
    query = QueryID.State
End Function
Public Sub free_result()
    If Not (QueryID Is Nothing) Then
        QueryID.Close
    End If
End Sub
Public Function count_records() As Integer
    count_records = 0
    If Not (QueryID Is Nothing) Then
        If (QueryID.State) Then
            While (Not QueryID.EOF)
                count_records = count_records + 1
                QueryID.MoveNext
            Wend
            If (count_records) Then
                QueryID.Requery
            End If
        End If
    End If
End Function
Sub Test()
    query "SELECT * FROM Table1 WHERE Empl = 'Tom'"
    query "INSERT INTO Table1 (EMPL)Values ('Tod')"
    query "DELETE FROM Table1 WHERE Empl = 'Tod'"
End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T09:15:39.637

`RecordSet.Open` is only used to open a cursor (select) not execute some DML. For this you can use `Connection.Execute`. The last can also be used to create a RecordSet.

See for example [http://msdn.microsoft.com/en-us/library/ms807027.aspx]

# backbone.js - 使用 Backbone 跟踪站点活动 (Google Analytics)

> ID：11029857
> 
> 赞同：9
> 
> 时间：2012-06-14T09:01:08.600
> 
> 标签：backbone.js, google-analytics

我正在寻找跟踪`Site Activity`使用和`Google Analytics`制作的网络应用程序的最佳方式。`Backbone``Requires`

查看 Google 的页面，我发现了这个[插件 - Backbone.Analytics](https://github.com/kendagriff/backbone.analytics)。

我的问题是：
1）使用`Backbone.Analytics`，我应该更改backbone.analytics.js 以添加`_gaq.push(['_setAccount', 'UA-XXXXX-X']);`吗？
2）还有其他可能的解决方案/插件吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-22T09:26:04.783

我更喜欢“自己动手”的风格 :) 这真的很简单：

```
var Router = Backbone.Router.extend({

    initialize: function()
    {
        //track every route change as a page view in google analytics
        this.bind('route', this.trackPageview);
    },

    trackPageview: function ()
    {
        var url = Backbone.history.getFragment();

        //prepend slash
        if (!/^\//.test(url) && url != "")
        {
            url = "/" + url;
        }

        _gaq.push(['_trackPageview', url]);
    }
} 
```

然后你像往常一样将谷歌分析脚本添加到你的页面。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-10-03T07:01:11.750

只是想我会分享我是如何做到的。这可能不适用于较大的应用程序，但我喜欢手动告诉 GA 何时跟踪页面浏览量或其他事件。我尝试绑定到“全部”或“路由”，但无法让它自动记录我需要的所有操作。

```
App.Router = BB.Router.extend({
    //...
    track: function(){
        var url = Backbone.history.getFragment();

        // Add a slash if neccesary
        if (!/^\//.test(url)) url = '/' + url;

        // Record page view
        ga('send', {
            'hitType': 'pageview',
            'page': url
        });
    }
}); 
```

所以我只是`App.Router.Main.track();`在导航或做任何我想跟踪的事情后打电话。

请注意，我使用了新的[Analytics.js](https://developers.google.com/analytics/devguides/collection/analyticsjs/)跟踪代码段，该代码段目前处于公开测试阶段，但其 API 非常直观，因此无需使用插件来抽象任何复杂性。例如：我跟踪有多少人滚动到无限滚动视图的末尾，如下所示：

```
onEnd: function(){
    ga('send', 'event', 'scrollEvents', 'Scrolled to end');
} 
```

![在此处输入图像描述](../Images/ccaa9fb12e9ee944a6f788c4fcf234f7.png) 祝你好运。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-17T20:43:55.850

你不应该改变任何东西。只需像往常一样添加您的 Google Analytics 代码片段，并像添加任何其他 Javascript 库一样包含 Backbone.Analytics。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-12-04T13:55:45.597

我写了一篇关于这个的小帖子，希望它对某人有所帮助：

[http://sizeableidea.com/adding-google-analytics-to-your-backbone-js-app/](http://sizeableidea.com/adding-google-analytics-to-your-backbone-js-app/)

```
var appRouter = Backbone.Router.extend({
     initialize: function() {
        this.bind('route', this.pageView);  
    },  
    routes: {
        'dashboard': 'dashboardPageHandler'
    },
    dashboardPageHandler: function() {
      // add your page-level logic here...    
    },
    pageView : function(){  
     var url = Backbone.history.getFragment();

     if (!/^\//.test(url) && url != ""){
          url = "/" + url;
      }

      if(! _.isUndefined(_gaq)){
         _gaq.push(['_trackPageview', url]);
      }  
   }   
});

var router = new appRouter();

Backbone.history.start(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-03-30T05:42:29.833

如果您使用新的通用 analytics.js，您可以这样做：

```
var Router = Backbone.Router.extend({
    routes: {
        "*path":                        "page",
    },

    initialize: function(){
        // Track every route and call trackPage
        this.bind('route', this.trackPage);
    },

    trackPage: function(){
        var url = Backbone.history.getFragment();
        // Add a slash if neccesary
        if (!/^\//.test(url)) url = '/' + url;
        // Analytics.js code to track pageview
        ga('send', {
            'hitType': 'pageview',
            'page': url
        });
    },

    // If you have a method that render pages in your application and
    // call navigate to change the url, you can call trackPage after
    // this.navigate()
    pageview: function(path){
        this.navigate(path);
        pageView = new PageView;
        pageView.render();
        // It's better call trackPage after render because by default
        // analytics.js passes the meta tag title to Google Analytics
        this.trackPage();
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-09-17T13:29:21.583

关于其他可能的解决方案/插件，我在一些项目中使用了[https://github.com/aterris/backbone.analytics](https://github.com/aterris/backbone.analytics)并且效果也很好。它还具有更多选项，例如事件跟踪，这在您的分析集成中的某个时候可以派上用场。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-03-17T09:54:12.617

只是发布这个问题的更新，因为它似乎是我从我认识的或与之合作的骨干.js 开发人员那里得到的一个，他们似乎在最后一个障碍中倒下了。

Javascript：

```
App.trackPage = function() {
 var url;
 if (typeof ga !== "undefined" && ga !== null) {
  url = Backbone.history.getFragment();
  return ga('send', 'pageview', '/' + url);
 }
};

Backbone.history.on("route", function() {
 return App.trackPage();
}); 
```

跟踪片段：

```
<head>
 <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||
  function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();
  a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;
  a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script',
  '//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-XXXXXXXX-X', 'auto');
 </script>
</head> 
```

跟踪代码段应该在您希望跟踪活动的任何页面上可用。这可能是您的所有内容都被注入的 index.html，但有些网站可能有多个静态页面或混合页面。如果您愿意，可以包含 ga('send') 函数，但它只会在页面加载时触发。

我写了一篇更详细的博客文章，解释而不是展示你可以在这里找到的完整过程：http: [//v9solutions.co.uk/tech/2016/02/15/how-to-add- google-analytics-to-backbone.js.html](http://v9solutions.co.uk/tech/2016/02/15/how-to-add-google-analytics-to-backbone.js.html)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-09-28T21:24:43.773

所有答案似乎都*很好*，但已经过时（2015 年 9 月）。遵循此 Google 开发人员指南：[https](https://developers.google.com/analytics/devguides/collection/analyticsjs/single-page-applications) ://developers.google.com/analytics/devguides/collection/analyticsjs/single-page-applications 这是我的解决方案版本（我已将建议的调用添加到`ga('set'...)`）：

```
MyRouter = Backbone.Router.extend
    ...
    initialize: () ->
        # Track every route and call trackPage
        @bind 'route', @trackPage

    trackPage: () ->
        url = Backbone.history.getFragment()
        # Add a slash if neccesary
        if not /^\//.test(url) then url = '/' + url
        # Analytics.js code to track pageview
        global.ga('set', {page: url})
        global.ga('send', 'pageview')
    ... 
```

# windows-phone-7 - DownloadStringCompleted 事件不会触发

> ID：11029859
> 
> 赞同：0
> 
> 时间：2012-06-14T09:01:12.377
> 
> 标签：windows-phone-7, webclient

我正在开发一个 Windows Phone 应用程序。网络客户端没有像我预期的那样触发。相关代码如下：

```
public PArticle(PocketListItem aPli)
    {
        this.pli = aPli;

        using (IsolatedStorageFile isf = IsolatedStorageFile.GetUserStoreForApplication())
        {
            if (!isf.FileExists(aPli.ID + ".json"))
            {
                WebClient client = new WebClient();
                client.DownloadStringCompleted += new DownloadStringCompletedEventHandler(client_DownloadStringCompleted);
                client.DownloadStringAsync(new Uri(pli.Url));
            }
            else
            {
                string json = RetrieveDataFromLocalStorage(aPli.ID + ".json");

                PocketArticle pa = JsonConvert.DeserializeObject<PocketArticle>(json);
                this.text = pa.text;
            }
        }
    }

    void client_DownloadStringCompleted(object sender, DownloadStringCompletedEventArgs e)
    {
        var readability = Readability.Create(e.Result);
        this.text = readability.Content;
    } 
```

我知道这是一个同步/异步问题。但我不知道如何处理它。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T09:58:18.493

[我已经使用 2 个不同的 URL http://riktamtech.com](http://riktamtech.com)和[http://google.com](http://google.com)测试了您的代码的 WebClient 部分。在这两种情况下，都会引发 DownloadStringCompleted 事件。我通过放置一个断点来观察它。

所以我建议你用断点再次测试。

# java - 如何获取对象的历史记录或跟踪对象

> ID：11029860
> 
> 赞同：3
> 
> 时间：2012-06-14T09:01:13.473
> 
> 标签：java, exception-handling, stack-trace, jmx, jconsole

我有一个要求，在我的应用程序中支持大量处理，在某个时间点由于对象而发生异常。现在我想知道那个物体的整个历史。我的意思是自应用程序启动以来该对象在一段时间内发生的任何事情。

这是否可以通过使用 JMX 或其他任何方式来窥探 Object 的历史？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T09:28:51.303

一句话：没有

再说几句：

JVM 不会保留*任何对象过去其当前状态的任何*历史记录，除了与垃圾收集相关的非常少的信息以及可能是 HotSpot 优化器所需的一些方法调用指标。否则将意味着*巨大*的处理和内存开销。还有粒度问题；你只记录字段更改吗？每个方法调用？方法调用期间的每条 CPU 指令？JVM 只是采取简单的方法，并且不执行上述任何操作。

您必须隔离该对象的类和/或特定实例，并自行*记录*您需要的任何操作。您可能必须手动执行此操作 - 我还没有找到允许我在运行时插入日志记录代码的字节码检测库......

或者，您也许可以使用检测分析器，但在这样做时要为性能*大幅*下降做好准备。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T09:40:26.363

我一般同意@thkala 和@artbristol（两者都+1）。

但是你有一个要求，别无选择：你需要一个解决方案。我建议您尝试使用执行审计的动态代理来包装您的对象，即写入对象发生的所有更改。

您可能可以为此使用 AspectJ。该切面将记录调用了什么方法以及发送的参数是什么。您还可以使用其他较低级别的工具，例如 Javasist 或 CgLib。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T09:27:41.817

这对于标准 Java（或我知道的任何其他编程语言）是不可能的。您应该为您的应用程序添加足够的日志记录，这将使您对发生的事情有所了解。此外，如果您还不知道如何使用，请学习使用 IDE 的调试器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T09:44:04.307

答案是`No`.JVM 不会维护对象状态的历史记录。您可以做的最大事情是您可以跟踪对象的状态，这些状态可能在某个地方`in-memory`和何时出现异常，您可以序列化该内存对象，然后我认为你可以做分析。

# c - 为什么空堆栈的顶部是lua中的表？

> ID：11029866
> 
> 赞同：1
> 
> 时间：2012-06-14T09:01:34.577
> 
> 标签：c, lua

我认为 lua_settop() 的文档很清楚：

> void lua_settop (lua_State *L, int index);
> 
> 接受任何可接受的索引或 0，并将堆栈顶部设置为此索引。如果新的顶部比旧的大，那么新元素用 nil 填充。如果 index 为 0，则删除所有堆栈元素。

...然而，这段代码：

```
lua_settop(L, 0);
top = lua_gettop(L);
if (lua_isnoneornil(L, top)) {
  printf("Invalid stack (nil)");
}
else {
  // WTF?
  printf("? %d -> %s", top, lua_typename(L, lua_type(L, top)));
} 
```

产量：

```
? 0 -> table 
```

是什么赋予了？

如何检查堆栈是否为空？使用 (lua_gettop(L) == 0)？

如果是这样，为什么还有一个 lua_isnone() 调用？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-14T09:15:28.450

文档对您的问题进行了简单的回答[`lua_gettop`](http://pgl.yoyo.org/luai/i/lua_gettop)：

> 返回栈顶元素的索引。因为索引从 1 开始，所以这个结果等于堆栈中元素的数量（**因此 0 意味着一个空堆栈**）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T06:49:09.800

仅供任何偶然发现这个问题的人参考，这个问题的另一个答案是来自 lua 文档：

大多数查询函数接受可用堆栈空间内的任何值作为索引，也就是说，索引达到您通过 lua_checkstack 设置的最大堆栈大小。这样的指数被称为可接受的指数。更正式地说，我们定义一个可接受的索引如下：

```
 (index < 0 && abs(index) <= top) ||
 (index > 0 && index <= stackspace) 
```

**请注意，0 绝不是可接受的索引。**

如果 lau_gettop() 返回 0，则无法调用 is_none() 和 isoneornil()，因为 0 不是可接受的索引。

# sql - 使用更新的sql

> ID：11029867
> 
> 赞同：0
> 
> 时间：2012-06-14T09:01:36.213
> 
> 标签：sql, database, postgresql

我使用 pgsql，现在需要更新一列，在每个单元格中添加“.jpg”。

```
UPDATE image SET image_tag= image_location + '.jpg'::character varying; 
```

但它显示

> 错误：运算符不存在：字符变化 + 字符变化第 1 行：更新图像 SET image_tag= image_location + '.jpg'::charact... ^
> 
> 提示：没有运算符与给定名称和参数类型匹配。您可能需要添加显式类型转换。

**错误**

那么如何解决它。谢谢！！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T09:13:27.597

据我所知，PostgreSQL`||`用于连接，而不是`+`.

[9.4: 字符串函数和运算符](http://www.postgresql.org/docs/9.1/static/functions-string.html)

```
UPDATE image SET image_tag = image_location || '.jpg' 
```

# asp.net - WebForm 用户控件的丢失状态

> ID：11029868
> 
> 赞同：3
> 
> 时间：2012-06-14T09:01:36.797
> 
> 标签：asp.net, webforms

首先，我没有使用 ASP.NET WebForms 的经验。但是，我继承了一个非常旧的 WebForm 应用程序，我必须不时进行维护。这是这样一种情况：

有一个具有私有实例变量的用户控件。问题是，这些实例变量的值会丢失，很可能是在页面重新加载之后。到目前为止我发现的是，控件类似乎经常被重新创建。对以下问题有帮助的是：

*   WebForm 用户控件是否保持状态？
*   如果是，一般是如何完成的（指向在线资源以获取详细信息）
*   如果没有，它可以以某种方式实施吗？有样品吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-14T09:06:37.893

可能最常见的维护状态的方法是使用 ViewState 而不是私有实例字段。例如，如果您的 UserControl 包含一个 property `Text`，您可以按如下方式定义它：

```
public string Text
{
    get { return (string) ViewState["Text"]; }
    set { ViewState["Text"] = value; }
} 
```

您还可以将属性委托给子控件。在这种情况下，子控件将为您维护 ViewState（前提`EnableViewState`是`true`）。例如：

```
public string Text
{
    get { return MyTextBox.Text; }
    set { MyTextBox.Text = value; }
} 
```

谷歌`ViewState`了解更多信息。有一些陷阱，彻底理解它是个好主意。

# c# - 有没有办法设置 ViewBag 项目的类型？

> ID：11029869
> 
> 赞同：0
> 
> 时间：2012-06-14T09:01:52.110
> 
> 标签：c#, asp.net-mvc, viewbag

就像在主题中。有可能做到吗？或者在我们不需要动态项目的地方制作一些使用 ViewBag 项目的东西？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T09:03:15.697

最好的方法是`View model`在`model`你的`View`而不是`ViewBag`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T09:05:15.777

这可能不是可取的，因为在这种情况下您可能应该使用模型，但是在视图中，您始终可以将 viewbag 属性转换为类型，例如，如果您需要它是 int，

```
int number = (int)ViewBag.MyNumber; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T09:04:32.187

如果您不能使用动态项目，只需声明一个具有 ViewBag 的“静态”类型的变量：

```
@IList<MyType> mylist= ViewBag.ListOfItemsOfMyType; 
```

并使用 mylist

# responsive-design - 如果没有任何 CSS，功能手机会做什么？

> ID：11029871
> 
> 赞同：0
> 
> 时间：2012-06-14T09:01:56.933
> 
> 标签：responsive-design

过去，我创建了所有支持 CSS 的浏览器和设备都应该能够接收的“全局”样式表。

问题是我的旧诺基亚能理解背景图片，但屏幕太糟糕了，背景图片让网站看起来很糟糕。

然后我开始将任何背景图像放入带有媒体查询的 CSS 文件中，这样像这样的旧手机就无法理解它。但是，这会产生更多的工作。所以我开始将“global.css”放在媒体查询后面。这个想法是，如果手机无法理解媒体查询，我不希望它读取我的样式表。旧（桌面）版本的 IE 仍然使用条件注释提供 CSS。

所以我的问题是，如果手机不理解 CSS，它会像桌面浏览器一样提供自己的回退吗？所以至少一个 h1 比 h2 等大，并且文本不是全部集中在一个大块中吗？

我猜这可能是一个“视情况而定”的答案，但我很感激对此的反馈。我手头没有旧诺基亚，所以目前看不到它在做什么。

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T13:27:59.000

所有诺基亚浏览器（包括旧的 XHTML MP 版本）都包含默认样式表。这包括所有标题的基本样式、列表的基本项目符号和默认项目符号边距以及粗体和斜体样式。不同的标题并不总是那么区分，但它们足以区分一个与另一个。唯一真正的问题是斜体文本。本身通常没有斜体字体，因此浏览器会将每个字符的像素向右移动以模拟倾斜字体。这通常导致易读性差。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T17:22:31.567

它确实取决于许多因素，例如供应商和设备的使用年限。但是，根据我的经验，它们通常会渲染 h1 比普通文本更大；但是，对于更远的 h2，不能说同样的话。

通常对于旧的移动网站（在 XHTML-MP 是新事物并且 WML 风靡一时的时候），我们使用这些 font-size 值使用 CSS 设置字体大小：

```
xx-small, x-small, small, medium, large, x-large and xx-large 
```

根据我的经验，我可以告诉你，只有`small, medium and large`在大多数功能手机移动浏览器中才能可靠地工作。

# file - 使用 Java EE 编写日志文件

> ID：11029878
> 
> 赞同：0
> 
> 时间：2012-06-14T09:02:51.643
> 
> 标签：file, jakarta-ee, logging

为此，我需要创建应用程序日志来捕获用户登录/注销及其请求。

我们正在使用 Java EE，并认为创建新的日志文件（每天新的 txt 文件）是一个好方法，但我看到人们不鼓励这样做，问题是：为什么不这样做，以及什么是正确的方法吗？

还有 - 有没有办法获取应用程序目录？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T09:15:05.590

[log4j](http://logging.apache.org/log4j/1.2/manual.html)是 Java EE 应用程序中常用的记录器之一，其他的是[slf4j](http://www.slf4j.org/)、[logback](http://logback.qos.ch/)

`log4j`具有许多功能，其中之一是能够创建每日日志文件。

为了回答您的问题，
创建每日日志文件不会对您的应用程序造成任何损害。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T13:16:11.647

记录到文本文件并每天滚动它们是一种非常正常的方法，阻止它*本身*是不合理的。

对于某些特定用途，它可能不合适，例如，如果您记录敏感数据（密码、卡号等）。某些集群配置也可能存在问题，但是您必须提出更详细的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T13:23:41.453

Log4J 工作得很好，但是一旦你有许多不同的应用程序记录到不同位置的许多不同的日志文件，你就会遇到必须搜索许多日志文件才能找到某个事务的跟踪的问题。

一位同事曾经推荐过 GrayLog2，这使得查看日志文件变得更加容易。

您可能还想查看一下，具体取决于您计划保留多少日志文件。

[http://graylog2.org/about](http://graylog2.org/about)

# iphone - iPhone日历上ICS全天事件的奇怪行为

> ID：11029882
> 
> 赞同：0
> 
> 时间：2012-06-14T09:02:57.697
> 
> 标签：iphone, calendar, icalendar

我们的体育网站为我们的比赛、抽签等提供 ICS 日历。

为了检索 ICS 文件，我们使用 PHP 脚本读取本地 ics 文件，然后对 VEVENT 记录等进行一些可选过滤并返回 ICS 数据。

`webcal://....`我已经在我的 iPhone 上订阅了这个 ICS webcal 。

我现在有一些像这样的全天事件（持续时间：P1D）的奇怪行为

```
BEGIN:VEVENT
DTSTART;VALUE=DATE:20120623
DURATION:P1D
TRANSP:TRANSPARENT
SUMMARY:Auslosung: VWM: Super Globe
DESCRIPTION:VWM: Super Globe
UID:20110124@thw-provinzial.de
CATEGORIES:THW-Termin
URL:http://www.thw-provinzial.de/thw/
COMMENT:TYPE=VWM
END:VEVENT 
```

如果我通过`webcal://www.thw-provinzial.de/thw/ics.php?config=all?`. （显示在 20120623 和 20120624 上）

如果我直接通过事件订阅 ics 文件，`http://www.thw-provinzial.de/thw/thwdate2.ics`则仅在第 20120623 天正确显示。

如果我做一个

```
wget http://www.thw-provinzial.de/thw/thwdate2.ics
wget http://www.thw-provinzial.de/thw/ics.php?config=all 
```

然后 diff 两个输出唯一的区别是`X-WR-CALNAME`所有其他内容是相同的。

会不会是响应中的某些标头信息让 iPhone 感到困惑？

thwdate2.ics 的响应标头 - 这里的行为很好

```
HTTP/1.0 200 OK
Date: XXXXXX
Server: Apache
Last-Modified: Wed, 13 Jun 2012 20:05:04 GMT
ETag: "6c6f78d-c54d-4c260194d7c00"
Accept-Ranges: bytes
Content-Length: 50509
Vary: Accept-Encoding,User-Agent
Content-Type: text/calendar
Age: 787 
```

ics.php 的响应标头 - 在这里我们遇到了跨越 2 天的问题

```
HTTP/1.0 200 OK
Date: Thu, XXXXXX
Server: Apache
Content-Disposition: inline; filename=thwdates.ics
Pragma: no-cache
Cache-Control: no-cache, must-revalidate
Expires: Sat, 26 Jul 1997 05:00:00 GMT
Last-Modified: Wed, 13 Jun 2012 20:05:04 GMT
Vary: Accept-Encoding,User-Agent
Content-Type: text/calendar; charset=utf-8 
```

有任何想法吗？

# php - 用于静态变量的 PHP Netbeans getter 和 setter

> ID：11029883
> 
> 赞同：2
> 
> 时间：2012-06-14T09:02:58.990
> 
> 标签：php, netbeans, static, setter, getter

**是否可以在 Netbeans 中为 PHP 类的静态**成员变量生成 getter 和 setter 方法？似乎这是不可能的。这有什么合理的理由吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T05:39:53.910

这是一个缺失的功能。在 netbeans PHP bugtracker 上打开功能请求。

# javascript - 在 initComponent Ext JS4 中声明函数

> ID：11029888
> 
> 赞同：1
> 
> 时间：2012-06-14T09:03:27.527
> 
> 标签：javascript, function, scope, extjs4, declare

我正在使用 Ext JS4 开发一个项目。在我们的一些类中，我们在 initComponent 函数中声明函数，然后可以将其设置为控件的处理程序。我将在下面包含一个示例。忽略类中的大部分内容，关键细节是处理程序在 initComponent 中声明并设置为按钮的处理程序这一事实。

现在，这实际上是有效的——这里的问题是为什么它有效。我对 JavaScript 相当陌生，但我认为函数中声明的任何变量或函数在函数完成后都会被销毁。这是不正确的吗？我很欣赏这可能有更好的编码风格，但在考虑更改大量类之前，我真的很想弄清楚这一点。课程如下......一些评论确定了关键领域。

```
Ext.onReady(function () { 
    Ext.application({ 

        name: 'Form2', 
        thisForm: {}, 

        launch: function() { 
            thisForm = Ext.create('Form2', {});
        }
    });
});

Ext.define('Form2', {
    extend: 'Ext.form.Panel',
    layout:'border',

    config: {
        controlManager: {},
        formVariables:  {},
        dataHelper:     {}
    },

    constructor: function () {
        var me = this;

        ...
        ...

        // Initialize the form - I know, this might not be the be best coding style here.
        me.initComponent();
    },

    initComponent: function() {

    Ext.QuickTips.init(); 

    var ButtonControl1 = this.controlManager.createButton('ButtonControl1');

    var ButtonControl2 = this.controlManager.createButton('ButtonControl2');

    ...
    ... 

    // Handler for Btton1 - **I'm not using the var keyword in this declaration**
    function Handler1() { 
        alert('This Works!');
    };

    // Handler for Btton2 - **I'm using the var keyword in this example**
    var Handler2 = function () {
        alert('This Works also!');
    }; 

    // THIS IS THE KEY PART OF THIS QUESTION - even though the handler functions are declared
    // locally (above), clicking the buttons will still execute these. Do the functions
    // still exist by chance, and will be garbage collected at some later time, or are they
    // actually quaranteed to be there. I'm confused!

    ButtonControl1.onClickEventHandler = function () {Handler1();};

    ButtonControl2.onClickEventHandler = function () {Handler2();};

    // Don't need to worry about this part.

    Ext.create('Ext.container.Viewport', { 
        layout:'border', 
        style: { position:'relative' }, 
        defaults: { 
            collapsible: true, 
            split: true, 
            bodyStyle: 'padding:0px' 
        }, 
             items: [ 
                 { 
                       collapsible: false, 
                 split: false, 
                     region: 'north', 
                     height: 50, 
                     margins: '0 2 0 2', 
                     bbar: '', 
                     items: [  ] 
                 }, 
                 { 
                     collapsible: false, 
                     split: false, 
                     region:'west', 
                     margins: '0 0 0 0', 
                     cmargins: '0 2 0 2', 
                     width: 0, 
                     lbar: [  ] 
                 }, 
                 { 
                     collapsible: false, 
                     region:'center', 
                     margins: '0 2 0 2', 
                     layout: { 
                         align: 'stretch', 
                         type: 'hbox' 
                     }, 
                     items: [ 
                         { 
                             xtype: 'form', 
                             fileUpload: true, 
                             layout: { 
                                 align: 'stretch', 
                                 type: 'vbox' 
                             }, 
                             flex: 1, 
                             items: [ 
                             { 
                                 xtype: 'container', 
                                 height: 550, 
                                 layout: { 
                                     align: 'stretch', 
                                     type: 'hbox' 
                                 }, 
                                 items: [ 
                                 { 
                                     xtype: 'container', 
                                     width: 570, 
                                     layout: 'vbox', 
                                     padding: '5 0 0 0', 
                                     style:'background-color:rgb(255, 255, 255);', 
                                     items: [ 
                                         ButtonControl1, ButtonControl2
                                     ] 
                                 }
                                 ] 
                             } 
                             ] 
                         } 
                     ] 
                 } 
             ] 
         }); 
     } 
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T10:19:46.953

对于原始变量（如 string 或 int），当函数完成时，其所有局部变量都会被破坏。

对于非原始变量，本地创建的对象（如数组或 Ext 对象）不会在有任何其他对象引用时被破坏。

在您的示例中，ButtonControl1 和 ButtonControl2 在 initComponent 之外声明。

在 initComponent 函数内部，onClickEventHandler 是对 Handler1 和 Handler2 函数的处理程序引用。当 initComponent 运行结束时，因为 ButtonControl1 和 ButtonControl2 不在 initComponent 的范围内（但在 onReady 函数的范围内），它们仍然保持活动状态，因此它们所引用的所有对象也是如此。

```
var ButtonControl1  = ....; // this global variable object
var ButtonControl2  = ....; // this global variable object

initComponent: function() {

    function Handler1() { 
      ...
    };

    var Handler2 = function () {
      ...
    }; 

    // ButtonControl1 and ButtonControl2 are declared outside of initComponent. 
    // Unless these variables will be distroyed, they keep onClickEventHandler references to Handler1 and Handler2 objects and therefore these objects will alive outside the scope of initComponent. 
    ButtonControl1.onClickEventHandler = function () {Handler1();};
    ButtonControl2.onClickEventHandler = function () {Handler2();};

} 
```

考虑 onReady 范围内的最后一个函数是 initComponent（即没有定义任何其他事件处理程序）。那么为什么所有这些对象在 initComponent 完成后仍然存在呢？

答案是创建了“Ext.container.Viewport”对象，该对象被渲染到文档页面，因此所有附加对象和引用对象也都是活动的。

# php - 使用服务帐户为 Google Cloud Storage REST API 请求 OAuth2 访问令牌时出现 invalid_grant 错误

> ID：11029889
> 
> 赞同：1
> 
> 时间：2012-06-14T09:03:27.730
> 
> 标签：php, rest, google-api, google-cloud-storage

我正在为存储 API 创建一个 API 请求（GET 存储桶），其中一个必需参数是“授权”标头。

请注意，我正在使用**服务帐户**来访问 API。

我按照文档[https://developers.google.com/accounts/docs/OAuth2ServiceAccount](https://developers.google.com/accounts/docs/OAuth2ServiceAccount)获取“授权”标头的访问令牌，以便向他们的 REST API 发送授权请求。问题是我总是收到“invalid_grant”错误。

使用此代码检查它：

```
<?php
error_reporting(E_ERROR);

const CLIENT_ID = 'XXXXXXXXXXXX.apps.googleusercontent.com';
const SERVICE_ACCOUNT = 'XXXXXXXXXXXX@developer.gserviceaccount.com';
const KEY_FILE = 'XXX.p12';

function get_oauth_access_token()
{
    $header[alg] = 'RS256';
    $header[typ] = 'JWT';

    $header = urlencode(base64_encode(utf8_encode(json_encode($header))));

    $assertion_time = time();

    $claim[iss] = CLIENT_ID; //also tried SERVICE_ACCOUNT here, no improvement
    $claim[scope] = 'https://www.googleapis.com/auth/devstorage.read_only';
    $claim[aud] = 'https://accounts.google.com/o/oauth2/token';
    $claim[exp] = $assertion_time + 3600;
    $claim[iat] = $assertion_time;

    $claim = urlencode(base64_encode(utf8_encode(json_encode($claim))));

    $data = $header . '.' . $claim;

    $p12 = file_get_contents(KEY_FILE);
    $cert = array();
    openssl_pkcs12_read($p12, $cert, 'notasecret');
    $priv_key_id = openssl_get_privatekey($cert[pkey]);

    openssl_sign($data, $signature, $priv_key_id, 'sha256');

    $signature = urlencode(base64_encode($signature));

    $assertion = $data . '.' . $signature;

    $ch = curl_init();
    curl_setopt($ch, CURLOPT_URL, 'https://accounts.google.com/o/oauth2/token');
    curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
    curl_setopt($ch, CURLOPT_POST, true);
    curl_setopt($ch, CURLOPT_POSTFIELDS, array('grant_type'=>'assertion', 
                                               'assertion_type'=>'http://oauth.net/grant_type/jwt/1.0/bearer', 
                                               'assertion'=>$assertion));
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);

    $result = curl_exec($ch);
    $error = curl_error($ch);

    curl_close($ch);
    var_dump($result);
    var_dump($error);
}

get_oauth_access_token(); 
```

此代码中是否有任何错误导致“invalid_grant”错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T14:28:09.450

您的问题可能是您的服务器的时间。

我在使用 Google Analytics 时遇到了一个问题：我的所有代码都是正确的，但与 Google 的时间相比，我的服务器时间在未来几秒钟。您可以将服务器的时间延迟几分钟来进行测试。

如果它有效，您可以使用[NTP](https://help.ubuntu.com/8.04/serverguide/NTP.html)例如，以保持服务器时钟正确。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T17:43:00.773

我上次回复中的代码对我来说很好，所以我怀疑你正面临环境问题。无论如何，我咨询了 Google PHP 客户端库的所有者，他提供了一种更好的方法来刷新访问令牌，而无需调用内部 refreshTokenWithAssertion() 方法。他提出了这种技术：

```
 $req = new apiHttpRequest(YOUR_URL);
  $val = $client->getIo()->authenticatedRequest($req); 
```

对 authenticatedRequest() 的调用负责根据需要刷新访问令牌（如果设置了断言凭据，则使用断言凭据）。我修改了上面的代码以使用这种方法，它对我来说很好。请注意，旧版本和新版本都适用于我，因此没有功能差异，但我认为新版本更好，因为它避免了内部调用，使用 Google PHP 客户端库而不是 curl 来执行请求并且结果更短，更简单的代码。

```
<?php

require_once 'apiClient.php';

// Define constants.
const SERVICE_ACCOUNT_NAME = 'YOUR_SERVICE_ACCOUNT_NAME';
const KEY_FILE = 'key.p12';
const BUCKET = 'marc-us';

// Obtain service account credentials assertion.
$client = new apiClient();
$key = file_get_contents(KEY_FILE);
$client->setAssertionCredentials(new apiAssertionCredentials(
  SERVICE_ACCOUNT_NAME,
  array('https://www.googleapis.com/auth/devstorage.full_control'),
  $key)
);

// Create HTTP request, authorize and execute.
$req = new apiHttpRequest('http://commondatastorage.googleapis.com/' . BUCKET);
$resp = $client::getIo()->authenticatedRequest($req);

// Display results.
print '<h2>Response:</h2>' . $resp->getResponseBody();

?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-12T04:18:05.177

我有同样的错误，但使用 Java。我的问题是 exp 和 iat 的时间（以秒为单位）是在 GMT-5 中，而 API google Auth 是在 GMT 中。然后我将时间更改为 GMT 值，一切正常。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-15T16:06:50.837

这是一个简单的 PHP 程序，说明了如何使用具有 Google Cloud Storage RESTful HTTP 接口的服务帐户。我已经用服务帐户测试了这段代码，它似乎工作正常。如果您还有其他问题，请告诉我。

```
<?php

require_once 'apiClient.php';

// Define constants.
const CLIENT_ID = 'YOUR_CLIENT_ID_GOES_HERE';
const SERVICE_ACCOUNT_NAME = 'YOUR_SERVICE_ACCOUNT_NAME_GOES_HERE';
const KEY_FILE = 'key.p12';
const BUCKET = 'marc-us';

// Obtain OAuth 2.0 access token for service account.
$client = new apiClient();
$key = file_get_contents(KEY_FILE);
$client->setAssertionCredentials(new apiAssertionCredentials(
  SERVICE_ACCOUNT_NAME,
  array('https://www.googleapis.com/auth/devstorage.full_control'),
  $key)
);
$client::$auth->refreshTokenWithAssertion();
$json = $client->getAccessToken();
$accessToken = json_decode($json)->access_token;

// Add access token to Authorization header of HTTP request.
$ch = curl_init('http://commondatastorage.googleapis.com/' . BUCKET);
curl_setopt($ch, CURLOPT_HTTPHEADER, 
            array('Authorization: OAuth ' . $accessToken));
$resp = curl_exec($ch);
curl_close($ch);

// Display results.
print '<h2>Response:</h2><pre>' . $resp . '</pre>';
?> 
```

# java - 运行 Ruby 文件时出现 ToolTwist Workbench 错误

> ID：11029906
> 
> 赞同：1
> 
> 时间：2012-06-14T09:04:44.200
> 
> 标签：java, ruby, tooltwist

使用 ToolTwist 工作台，我以编程方式执行 ruby​​ 文件，`java.lang.Runtime`用于执行某些 git 命令（例如加载版本、同步等），但出现以下错误：

```
/Users/myaccount/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require': cannot load such file -- xmlsimple (LoadError)
from /Users/myaccount/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
from /tooltwist/tooltwist_osx_7.0/devel/ttc_t/config/bin/checkLaunchpad.rb:21:in `<main>' 
```

我之前在终端中运行我的 ruby​​ 命令时遇到了同样的错误，但只能通过`gem install xml-simple`在命令行上运行来解决它。

我需要在我的代码上调用相同的命令吗？
希望有更好的方法来解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T01:45:25.443

我认为您只需要重新启动 ToolTwist Workbench。

1.  退出 ToolTwist 工作台。

2.  打开一个新的终端。新终端将加载新创建的环境变量。

3.  开始你的日食。

# facebook - Facebook 评论插件破坏了 Internet Explorer 7

> ID：11029907
> 
> 赞同：1
> 
> 时间：2012-06-14T09:04:44.620
> 
> 标签：facebook, internet-explorer-7, facebook-comments

我在正文标记后使用以下代码：

```
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/sv_SE/all.js#xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script> 
```

并显示评论插件和类似插件，我使用以下代码：

```
<div class="fb-like" data-href="http://example.com/" data-send="true" data-width="450"  data-show-faces="true"></div>
<br /><br />
<div class="fb-comments" data-href="http://example.com/" data-num-posts="5" data-width="470"></div> 
```

在 Windows XP 上的 Internet Explorer 7 上，一段时间后 Internet Explorer 崩溃。还有消息表明存在问题：“对象不支持此属性或方法” https://www.facebook.com/plugins/comments.php?channel_url=http%3A%2F%2Fstatic.ak.facebook.com %2Fconnect%2Fxd_arbiter.php%[.....]&locale=sv_SE&numposts=5&sdk=joey&width=470

如何解决这个问题？

# jquery - 谷歌地图 URL 参数 (saddr) 链接在 href 替换后打不开

> ID：11029910
> 
> 赞同：0
> 
> 时间：2012-06-14T09:05:02.547
> 
> 标签：jquery, google-maps-api-3, geolocation

这是本页讨论的延续：[Geolocation Google Maps Links jQuery](https://stackoverflow.com/questions/10451282/geolocation-google-maps-links-jquery)

当用户单击链接时，我需要通过 navigator.geolocation 设置saddr。我可以通过下面的代码实现这一点，但是替换 href 后，链接不起作用。如果我将创建的链接传递到地址栏中，它会打开谷歌地图并绘制正确的路线，否则该链接将不起作用。

我认为每次按下链接时 href 都会被替换。我将如何在脚本末尾打开链接？

编辑：邓肯提供的解决方案，现在显示工作脚本

```
 $("a.geo").click(function(e) {               
        if (navigator && navigator.geolocation) {
            navigator.geolocation.getCurrentPosition($.proxy(getLoc, $(this)));
            e.preventDefault();
        }
        });

        function getLoc(position) {                     
            var geoLat = position.coords.latitude;
            var geoLon = position.coords.longitude;
            document.location.href = "http://maps.google.com/maps?saddr=" + geoLat + "," + geoLon + "&daddr=35.662296,139.765854&dirflg=w&sensor=true";

        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T09:05:47.253

尝试改变

```
$(a.geo).trigger('click'); 
```

和

```
$("a.geo").trigger('click'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T10:13:01.060

*因此，将当前页面位置更新为"http://maps.google.com/maps?saddr=" + geoLat + "," + geoLon + "&daddr=35.662296,139.765854*并不是您真正想要做的*&dirflg=w&传感器=真"*

而不是从点击事件处理程序（复杂，递归）中调用的函数触发点击事件，为什么不这样做：

```
document.location.href = "http://maps.google.com/maps?saddr=" + geoLat + "," + geoLon + "&daddr=35.662296,139.765854&dirflg=w&sensor=true"; 
```

# azure - Azure VM 意外重启

> ID：11029911
> 
> 赞同：0
> 
> 时间：2012-06-14T09:05:13.827
> 
> 标签：azure, azure-worker-roles, azure-vm-role

这是一个与辅助角色托管 VM 有关的问题。我有一个简单的工人角色，它跨越了它内部的一个进程。产生的进程是 32 位编译的 TCPServer 应用程序。Worker 角色中定义了一个端点，TCPserver 绑定到 Worker 角色的端点。因此，当我连接到我的工作角色端点并发送一些东西时，TCPserver 会接收它，处理它会返回一些东西。所以这里暴露给外界的worker角色的端点，在内部连接到TCPserver。

`string port = RoleEnvironment.CurrentRoleInstance.InstanceEndpoints[""TCPsocket].IPEndpoint.Port.ToString();`

```
 var myProcess = new Process()
            {
                StartInfo = new ProcessStartInfo(Path.Combine(localstorage.RootPath, "TCPServer.exe"))
                {
                    CreateNoWindow = true,
                    UseShellExecute = true,
                    WorkingDirectory = localstorage.RootPath,
                    Arguments = port
                }
            }; 
```

它工作正常。但突然塞弗停下来回应。当我签入门户时，VM 角色会自动重新启动。但它从未成功。它正在显示`Role Initializing..`状态。手动停止和启动也不起作用。我重新部署了相同的包，没有对代码进行任何更改。这次部署本身失败了。

`Warning: All role instances have stopped - There was no endpoint listening at https://management.core.windows.net/<SubscriptionID>/services/hostedservices/TCPServer/deploymentslots/Production that could accept the message. This is often caused by an incorrect address or SOAP action. See InnerException, if present, for more details.`

但过了一段时间我再次尝试部署，它工作正常。谁能告诉我会有什么问题？

**更新：**

```
 public override void Run()
    {
        Trace.WriteLine("RasterWorker entry point called", "Information");
        string configVal = RoleEnvironment.GetConfigurationSettingValue("Microsoft.WindowsAzure.Plugins.Diagnostics.ConnectionString");
        CloudStorageAccount _storageAccount = null;
        _storageAccount = CloudStorageAccount.Parse(configVal); // accepts storage cridentials and create storage account
        var localstorage = RoleEnvironment.GetLocalResource("MyLocalStorage");
        CloudBlobClient _blobClient = _storageAccount.CreateCloudBlobClient();
        bool flag = false;

        while (true)
        {
            Thread.Sleep(30000);
            if (!flag)
            {
                if (File.Exists(Path.Combine(localstorage.RootPath, "test.ppm")))
                {
                    CloudBlobContainer _blobContainer = _blobClient.GetContainerReference("reports");
                    CloudBlob _blob = _blobContainer.GetBlobReference("test.ppm");
                    _blob.UploadFile(Path.Combine(localstorage.RootPath, "test.ppm"));
                    Trace.WriteLine("Copy to blob done!!!!!!!", "Information");
                    flag = true;
                }
                else
                {
                    Trace.WriteLine("Copy Failed-> File doesnt exist!!!!!!!", "Information");
                }
            }
            Trace.WriteLine("Working", "Information");
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T09:13:26.567

为了防止您的工作角色重新启动，您需要阻止入口点类的**Run**方法。

> 如果您确实重写了 Run 方法，您的代码应该无限期地阻塞。如果 Run 方法返回，**则通过引发 Stopping 事件并调用 OnStop 方法自动回收角色**，以便可以在角色脱机之前执行关闭序列。

[http://msdn.microsoft.com/en-us/library/windowsazure/microsoft.windowsazure.serviceruntime.roleentrypoint.run.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/microsoft.windowsazure.serviceruntime.roleentrypoint.run.aspx)

你需要确保，无论发生什么，如果你想保持角色活着，你永远不会从**Run方法返回。**

现在，如果您在控制台应用程序中托管 TCPServer（我假设您正在这样做，因为您粘贴了 Process.Start 代码），您需要在启动进程后阻止**Run**方法。

```
public override void Run()
{
   try
   {
      Trace.WriteLine("WorkerRole entrypoint called", "Information");

      var myProcess = new Process()
        {
            StartInfo = new ProcessStartInfo(Path.Combine(localstorage.RootPath, "TCPServer.exe"))
            {
                CreateNoWindow = true,
                UseShellExecute = true,
                WorkingDirectory = localstorage.RootPath,
                Arguments = port
            }
        };
        myProcess.Start();

      while (true)
      {
         Thread.Sleep(10000);
         Trace.WriteLine("Working", "Information");
      }
      // Add code here that runs in the role instance
   }
   catch (Exception e)
   {
      Trace.WriteLine("Exception during Run: " + e.ToString());
      // Take other action as needed.
   }
} 
```

PS：这与您的部署问题无关，我认为这是一个巧合

# tomcat - 如何将我的战争之外的文件添加到 tomcat webapp-classpath？

> ID：11029918
> 
> 赞同：1
> 
> 时间：2012-06-14T09:05:38.363
> 
> 标签：tomcat, configuration

我想在不同配置的不同服务器上运行我的 webapp。所以我不可能将我的配置（例如 spring application-context.xml）放到我的 webapp 中。我想将它放置在 %CATALINA_HOME/conf/myapp/localhost 下的应用程序的上下文文件夹中。但似乎 tomcat 没有从这个位置添加文件到 webapp 类路径。

这是可配置的吗？如果我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T15:13:14.400

您应该能够通过将目录添加到`shared.loader`或`common.loader`属性来将目录添加到 Tomcat 类路径`catalina.properties`

另请参阅： [此答案](https://stackoverflow.com/a/1863646/80144)（将目录添加到 tomcat 类路径）

或者

[我可以在 Tomcat 中基于每个应用程序创建自定义类路径吗](https://stackoverflow.com/questions/6345793/can-i-create-a-custom-classpath-on-a-per-application-basis-in-tomcat)

# jquery - 将错误消息添加到当前的验证摘要

> ID：11029923
> 
> 赞同：0
> 
> 时间：2012-06-14T09:05:56.387
> 
> 标签：jquery, asp.net-mvc-3

我有一个动态创建的文本框集合（通过按钮单击），并且所有文本框都是必需的。一旦文本框为空，则应将错误消息添加到当前验证摘要中。有关如何执行此操作的任何帮助。

Javascript代码

```
var rowsid = 0;
    // Add button functionality
    $("#btnAddButton").live("click", function () {
        rowsid++;
        var master = $(this).parents().find("table.dynamictable"); //$(this).parents("table.dynatable");

        // Get a new row based on the prototype row
        var prot = master.find(".prototype").clone();
        prot.attr("class", "");
        prot.find(".id").attr("value", "00000" + rowsid);
        master.find("tbody").append(prot);
    }); 
```

HTML 代码

```
<div class="msg-body">
        <table class="dynamictable">
            <thead>
                <tr>
                    <th style="display: none"></th>
                    <th>Package Name</th>
                    <th>Package Cost</th>
                    <th>No. of Attendees</th>
                    <th>Delete</th>
                </tr>
            </thead>
            <tbody>
                <tr class="prototype">
                    <td style="display: none"><input type="hidden" name="id[]" value="" class="id" /></td>
                    <td><input type="text" name="packagename[]" value="" class="pkname" data-val-required="This field is required"  /></td>
                    <td><input type="text" name="packagecost[]" value="0" class="pkcost" style="text-align: right" /></td>
                    <td><input type="text" name="noofattendees[]" value="0" class="nfattendees" style="text-align: right"/></td>
                    <td>@Html.ActionImage("", null, "~/Content/Images/delete.gif", "Delete", new { @class = "deleterows" }) </td>
                </tr>
            </tbody>
        </table>
        <div style="padding:20px 0 20px 100px "><input type="button" id="btnAddButton" value="Add New" class="button addbutton"/></div>
        </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T09:45:12.773

```
function refreshValidation() {
    $("form").removeData("validator");
    $("form").removeData("unobtrusiveValidation");
    $.validator.unobtrusive.parse("form");
} 
```

这将重新验证您动态添加的 texbox

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T09:10:20.373

使用 HTML5`required="required"`属性，但在旧版本的 IE 中不起作用

```
<input type="text" name="usrname" required="required" /> 
```

详解-http: [//www.w3schools.com/html5/att_input_required.asp](http://www.w3schools.com/html5/att_input_required.asp)

# iphone - 是 是一种记忆链接还是被遗弃的记忆？

> ID：11029924
> 
> 赞同：0
> 
> 时间：2012-06-14T09:05:56.667
> 
> 标签：iphone, ios, memory, instruments

我正在使用工具来跟踪内存使用情况。Heapshot Analysis 很棒，但我也发现了一些“非对象”。这是什么？一种被遗弃的记忆还是别的什么？如何解决这个问题？

![堆拍摄图像](../Images/51912d8c7111efec54f5e500291b77d9.png)

另一个问题可能与此有关，我曾经使用 [myObj release], myObj = nil; myObj = [[MyObj alloc] 初始化];

释放对象并创建一个新对象。（myObj = nil，只是为了避免崩溃）有人说，这可能会浪费内存性能。他是对的吗？我想知道一些细节。非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T09:15:06.353

您的问题在这里有答案： [分配“堆”中的 <non-object> 是什么意思？](https://stackoverflow.com/questions/4079253/what-does-non-object-in-allocation-heapshots-mean)

对于内存管理，您的代码绝对没有错。myObj = nil 是没有意义的，因为您在它之后的行中分配了一个新对象。

# slider - coda 滑块 2.0 具有响应的 % 宽度

> ID：11029925
> 
> 赞同：1
> 
> 时间：2012-06-14T09:05:57.260
> 
> 标签：slider, liquid-layout

我已经使用 Nail Doherty 的 coda 滑块几年了，我想知道是否有人知道一种使它具有响应性的方法，以便它对容器使用 % 宽度而不是 px。我知道它需要 css 中的固定宽度来计算 js 中面板的宽度，以使滑块正确工作/显示，但想知道是否有修复方法可以使其流动。

我可以使用媒体屏幕查询来调整它在某些屏幕分辨率下的大小，但如果可能的话，我会在一个流畅的答案之后。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-10T13:27:00.937

我是从 2011 年 7 月左右开始维护 Coda Slider 的人。由于向响应式布局转变的格局，我创建了一个新版本的 Coda Slider，更名为 Liquid Slider，请[在此处](http://liquidslider.kevinbatdorf.com/)获取。

它比 Coda Slider 更容易使用，我计划跟上一个教程系列来教初学者如何使用它。

# objective-c - 无法将 imageView 从一个视图移动到另一个视图

> ID：11029927
> 
> 赞同：0
> 
> 时间：2012-06-14T09:06:30.437
> 
> 标签：objective-c, ios5, touch, imageview, uipangesturerecognizer

我使用 panGestureRecognizer 来移动 imageView..

它可以在这个 imageView 的父视图中工作.. 并且可以移出父视图..

但是当它从父视图出来时，panGestureReconizer 无法工作..它无法为 imageView 重新调整触摸动作..我不知道为什么......

我想找到一些方法来解决它..

如何将 imageView 从父视图移动到另一个视图....

之前，我尝试使用touchBegan，touchMove ..我遇到了同样的问题....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T09:14:23.687

使用此属性

```
 imageView.userInteractionEnabled = YES; 
```

现在使用手势..希望它现在有效

# facebook - 需要用于 links.getStats 替代方案的 Facebook REST API

> ID：11029928
> 
> 赞同：4
> 
> 时间：2012-06-14T09:06:30.710
> 
> 标签：facebook, facebook-graph-api, rest

我正在构建一个需要特定 URL 的社交共享统计信息的网站，例如[http://www.facebook.com/](http://www.facebook.com/)。

所以我通过 facebook 发现了这个 REST api，它完美地解决了这个问题。

[https://api.facebook.com/restserver.php?method=links.getStats&urls=http://www.facebook.com/](https://api.facebook.com/restserver.php?method=links.getStats&urls=http://www.facebook.com/)

但我注意到 API 将被弃用，我不知道什么时候。

我想知道 Facebook Graph API 与相同的旧 REST API 的替代方案是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T09:08:23.030

使用`link_stat`FQL 表 - 这具有相同的信息。您还可以根据需要的指标在 Graph API 上使用 Insights API

# ios - iOS - ASINetworkQueue，即使请求失败，请求也会继续执行

> ID：11029929
> 
> 赞同：0
> 
> 时间：2012-06-14T09:06:31.007
> 
> 标签：ios, http, asihttprequest

我正在使用 ASINetworkQueue 来执行多个 ASIHTTPRequests，如果任何请求失败，我希望队列取消任何挂起的请求并结束。通过阅读文档，这应该是默认行为。但是我发现即使在请求失败后，对于其余的大多数请求，我仍然会收到“requestStarted”，而对于所有请求，我仍然会收到“requestFailed”-这是应该的吗？我猜这可能是因为我的请求非常小，并且一旦检测到故障，请求就在它有机会取消它们之前就开始了。我尝试隐式设置 setShouldCancelAllRequestsOnFailure:YES 但这没有任何区别。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T11:45:30.287

在不知道您的请求的确切性质的情况下......简短的回答：是的，它正在按照它应该的方式工作。您的请求在失败发生之前就开始了。更长的答案：尝试设置队列的 maxConcurrentOperationCount 属性。如果您需要测试失败，这可以帮助您更好地控制请求管道。

# android - 如何使图像按钮可点击？

> ID：11029932
> 
> 赞同：0
> 
> 时间：2012-06-14T09:06:55.277
> 
> 标签：android, onclick, imagebutton

我想做一个广告横幅。
现在我有一个`imagebutton`显示来自网络的图像。问题是我不能让它可点击。

**我应该把`onclick`方法放在哪里？**

到目前为止我尝试过的代码：

```
public class ProjectActivity extends Activity {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    BannerActivity ba = new BannerActivity(this);

    LinearLayout layout = (LinearLayout)findViewById(R.id.main_layout);
    layout.addView(ba);
} 
```

* * *

这就是我的旗帜：

```
public class BannerActivity extends ImageButton{
    public BannerActivity(Context context) {
        super(context);
        setLayoutParams(new LayoutParams(ViewGroup.LayoutParams.MATCH_PARENT, 300));

        URL url = null;
        try {
            url = new URL("http://3.bp.blogspot.com/_9UYLMDqrnnE/S4UgSrTt8LI/AAAAAAAADxI/drlWsmQ8HW0/s400/sachin_tendulkar_double_century.jpg");
        } catch (MalformedURLException e) {
            e.printStackTrace();
        }
        InputStream content = null;
        try {
            content = (InputStream)url.getContent();
        } catch (IOException e) {
            e.printStackTrace();
        }
        Drawable d = Drawable.createFromStream(content , "src"); 
        setBackgroundDrawable(d);
    }
}
} 
```

如您所见，`BannerActivity`类是横幅，项目会将其添加为 jar 文件。

我不想将该`onclick`方法放在“项目”类中，它应该`BannerActivity`位于开发人员需要添加到他的项目中的某个地方。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T09:14:58.283

您需要重写`onClick()`BannerActivity 中的方法来执行您想要的操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T09:26:07.510

```
public class BannerActivity extends ImageButton implements OnClickListener{
    public void BannerActivity(Context context){
        super(context)

        //(...)

        setOnClickListener(this);
    }

    @Override
    public void onClick(View v){
        //Do your stuff.
    }
} 
```

# php - PHP MVC：注册表类

> ID：11029935
> 
> 赞同：2
> 
> 时间：2012-06-14T09:07:15.857
> 
> 标签：php, model-view-controller, class, registry

使用魔术方法在 MVC 中编写注册表类和使用“常规”获取和设置方法编写类有一些关键的区别吗？

例如，如果我用 __get 和 __set 编写类，我会通过 $registry->foo 访问注册表对象，而另一种情况是 $registry->getObject('foo') 或类似的东西，你明白我的意思. 我对这两者之间的差异感兴趣，是更好的还是取决于特定情况或没有差异？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T09:15:58.140

没有区别。它主要是特定于语言的。所有语言对注册表的使用都是相同的，这取决于您如何在实现级别解决读/写问题。唯一重要的是实现的正确性，其他一切都取决于：a）项目级编码约定；b) 你的品味；c) 语言能力。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T09:16:16.707

在 PHP 中几乎没有区别。虽然 getter 和 setter 严格定义了类接口并允许您将额外的代码（例如数据验证）放入其中，但如果要操作的属性很多，魔术方法可能会简化您的工作。但是在重载时魔法明显变慢了。

如果你的班级只是一个实体，你可以使用魔法。您可能也对[`Nette\Object`](http://api.nette.org/2.0/Nette.Object.html)方法感兴趣。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T09:21:54.627

人们倾向于不直接访问公共对象，而是通过它的访问器，没有什么区别，只使用访问器方法更可取，因为它可以更好地了解封装的含义，因此是一个很好的实践。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-14T09:27:45.857

让我们暂时忽略注册表是一种反模式。

使用`__set()`and`__get()`会带来轻微的性能损失。但这可以忽略不计。真正的问题将在以后变得明显。

如果您必须在设置或返回之前存储需要额外计算的东西怎么办。例如，如果您要存储时间怎么办。可以说，在外部`Registry`您以“漂亮”格式使用时间，但您以 unix-time 格式存储它。这需要添加一个特殊的例外去你的魔法吸气剂和二传手。

如果您存储多个这样的值怎么办。如果发生变化并且您的应用程序必须从公制迁移到英制怎么办。

随着您向存储的信息添加越来越多的条件，这通常会导致and中的大量`switch`语句。真的很糟糕的设计选择。`__get()``__set()`

# xslt - 根据任何属性的值获取数据

> ID：11029938
> 
> 赞同：2
> 
> 时间：2012-06-14T09:07:28.080
> 
> 标签：xslt, xslt-1.0

给定一个节点，例如。

```
<SI elem1="TI" elem2="FN" elem3="4099450222" elem4="TM" elem5="4094110000" elem6="MT" elem7="SP" elem8="MC" elem9="DS" elem10="DA" elem11="16"/> 
```

如果任何属性为“DA”，我需要我的输出为“DA”，或者如果任何属性为“BA”，则需要下一个属性的值（即，如果 elem7="BA elem8="03" 我想要“03”输出）

没有多重匹配的危险，所以如果一个属性是“BA”，就不会有“DA”属性，但是值可以出现在任何元素中

我已经查看了 attribute:: 标记，但我不确定这是否能满足我的需求。

非常感谢任何帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T11:22:46.487

I made an assumption that your attributes has names in form of **elemN** where **N = 1,2,3...**, and they are ordered accordingly.

The following XSLT:

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:fo="http://www.w3.org/1999/XSL/Format" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:fn="http://www.w3.org/2005/xpath-functions">
    <xsl:output method="text" />
    <xsl:template match="/SI">
        <xsl:choose>
            <xsl:when test="some $i in @* satisfies $i='DA'">
                <xsl:text>DA</xsl:text>
            </xsl:when>
            <xsl:otherwise>
                <xsl:variable name="attr" select="concat('elem', xs:decimal(substring-after(@*[.='BA']/name(), 'elem')) + 1)" />
                <xsl:value-of select="@*[name() = $attr]" />
            </xsl:otherwise>
        </xsl:choose>
    </xsl:template>
</xsl:stylesheet> 
```

applied to the following input XML:

```
<?xml version="1.0" encoding="UTF-8"?>
<SI elem1="TI" elem2="FN" elem3="4099450222" elem4="TM" elem5="4094110000" elem6="MT" elem7="SP" elem8="MC" elem9="DS" elem10="DA" elem11="16" /> 
```

gives `DA` as the output.

And applied to the following XML:

```
<?xml version="1.0" encoding="UTF-8"?>
<SI elem1="TI" elem2="FN" elem3="4099450222" elem4="TM" elem5="4094110000" elem6="MT" elem7="BA" elem8="03" elem9="DS" elem10="DAs" elem11="16" /> 
```

gives `03` as the output.

**EDIT**

Here's the XSLT 1.0 version (tested under Altova XMLSpy):

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="text" />
    <xsl:template match="/">
        <xsl:apply-templates select="SI/@*" />
    </xsl:template>

    <xsl:template match="@*">
        <xsl:choose>
        <xsl:when test=". = 'DA'">
            <xsl:text>DA</xsl:text>     
        </xsl:when>
        <xsl:when test=".='BA'">
            <xsl:variable name="attr" select="concat('elem', substring-after(name(), 'elem') + 1)" />
            <xsl:value-of select="/SI/@*[name() = $attr]" />
        </xsl:when>
        <xsl:otherwise/>
        </xsl:choose>
    </xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T11:49:12.250

> 如果任何属性为“DA”，我需要我的输出为“DA”，或者如果任何属性为“BA”，则需要下一个属性的值（即，如果 elem7="BA elem8="03" 我想要“03”输出）
> 
> 没有多重匹配的危险，所以如果一个属性是“BA”，就不会有“DA”属性，但是值可以出现在任何元素中

**这个单一的 XPath 表达式产生想要的值**：

```
 string(/*/@*[. = 'DA']
        |
         /*/@*[name()
              =
               concat('elem', substring-after(name(/*/@*[.='BA']), 'elem') +1)]
         ) 
```

**这是完整的转换：**

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output method="text"/>

 <xsl:template match="/">
     <xsl:copy-of select=
     "string(/*/@*[. = 'DA']
            |
             /*/@*[name()
                  =
                   concat('elem', substring-after(name(/*/@*[.='BA']), 'elem') +1)]
             )"/>
 </xsl:template>
</xsl:stylesheet> 
```

可以看出，这种转换只是对 XPath 表达式求值并将求值结果复制到输出。

**当转换应用于此 XML 文档时（您的第二种情况）：**

```
<SI elem1="TI"
    elem2="FN"
    elem3="4099450222"
    elem4="TM"
    elem5="4094110000"
    elem6="MT"
    elem7="BA"
    elem8="03"
    elem9="DS"
    elem10="DD"
    elem11="16"/> 
```

**结果是**：

```
03 
```

**当对最初提供的 XML 文档应用相同的转换时（您的第一种情况）：**

```
<SI elem1="TI"
    elem2="FN"
    elem3="4099450222"
    elem4="TM"
    elem5="4094110000"
    elem6="MT"
    elem7="SP"
    elem8="MC"
    elem9="DS"
    elem10="DA"
    elem11="16"/> 
```

**再次产生所需的正确结果**：

```
DA 
```

**说明**：

正确使用 XPath*联合*运算符和`|`函数`string()`,`substring-after()`和.`name()```concat()`

# java - Android - OutOfMemoryError：位图大小超出 VM 预算？

> ID：11029939
> 
> 赞同：0
> 
> 时间：2012-06-14T09:07:32.043
> 
> 标签：java, android

> **可能重复：**
> [Android：将图像加载到位图对象时出现奇怪的内存不足问题位](https://stackoverflow.com/questions/477572/android-strange-out-of-memory-issue-while-loading-an-image-to-a-bitmap-object)
> [图大小超过 Vm 预算错误 android](https://stackoverflow.com/questions/10737582/bitmap-size-exceeds-vm-budget-error-android)

我正在尝试加载大约 1500x1000 像素的大位图

```
InputStream is = mngr.open( "myBitmap.png");
Bitmap bit = BitmapFactory.decodeStream(is) 
```

使位图更小或对其进行采样不是一个好主意，因为

*   我需要它的原始尺寸。

*   这个错误发生大约 20% 的时间，即大约 80% 的时间它加载正常。

您认为解决此问题的最佳方法是什么？也许将其放入循环中，例如**无法加载->再试一次**？

谢谢！

# codeigniter - 如何在控制器中使用样式表

> ID：11029947
> 
> 赞同：-2
> 
> 时间：2012-06-14T09:08:16.103
> 
> 标签：codeigniter, stylesheet

我有一个应用程序，其中我通过一些 xyz 视图显示一些选项卡。如果有人单击任何选项卡，它将调用控制器中的一个功能。

这个调用的控制器函数将根据通过选项卡传递的 id 显示一些值。

所以我想通过控制器显示这些值，并使用一些 style.css 文件将一些样式应用于生成的输出。

现在我的应用程序正在生成输出，但我无法在其上应用样式。特别是 .hover 样式不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T09:25:54.313

您可以将样式文件包含到您的应用程序中。为此，建议有一个`header.php`文件，在将所有需要的样式表包含到该文件中后，您就可以加载和使用它。

# javascript - 在 Google Maps API v3 中有效地启用事件传播

> ID：11029948
> 
> 赞同：1
> 
> 时间：2012-06-14T09:08:16.927
> 
> 标签：javascript, google-maps-api-3, event-propagation

正如[现有问题](https://stackoverflow.com/q/9620978/594137)中所涵盖的那样，我有一段代码（很好而且很简单）使 div 像这样使用光标的当前位置更新。

```
function updateLocation(e) {
    document.getElementById('current_coordinate').innerText = e.latLng.toUrlValue(6);
} 
```

在光标移到覆盖层上之前，它工作得很好。叠加层会消耗事件，因此我在地图上定义的事件侦听器永远不会触发。

```
google.maps.event.addListener(map, 'mousemove', updateLocation); 
```

问题：

1.  我必须在我创建的每个叠加层上重新定义那个监听器还是有更简单的方法？

2.  如果我必须在每个叠加层上定义侦听器，我大概可以拥有多少个叠加层而不会影响性能？

叠加层是交互式的，因此`clickable`不能设置为 false。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-10T14:14:13.523

另请参阅这些表明这是一个错误的讨论 - 尚未修复：

[https://groups.google.com/forum/#!topic/google-maps-js-api-v3/z_K7hxKhonI](https://groups.google.com/forum/#!topic/google-maps-js-api-v3/z_K7hxKhonI)

[https://groups.google.com/forum/?hl=en#!topic/google-maps-js-api-v3/mM0mB9FcyAU](https://groups.google.com/forum/?hl=en#!topic/google-maps-js-api-v3/mM0mB9FcyAU)

# phpmyadmin - MYSQL查询执行时间

> ID：11029950
> 
> 赞同：0
> 
> 时间：2012-06-14T09:08:24.057
> 
> 标签：phpmyadmin

嗨，我有一个响应时间很长的 MYSQL 查询。我有一个表`for_reg_users`，其中包含不同的字段，例如名字、姓氏和访问日期。我运行查询以获取新记录（即：在特定时间段之前，它们没有条目，并且记录应该是唯一的，因此名字和姓氏结合在一起）。能否以不同的方式编写此查询以缩短响应时间。提前致谢。

```
Query = SELECT * FROM `for_reg_users` where `date_visited` BETWEEN '2012-05-01' AND '2012-05-31' AND CONCAT(first_name, ' ', last_name) NOT IN ( SELECT CONCAT(first_name, ' ', last_name) from `for_reg_users` where `date_visited` < '2012-05-01') AND `deleted` = '0'; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T09:14:19.467

```
Query = SELECT DISTINCT(CONCAT(first_name, ' ', last_name)) , * FROM `for_reg_users` where `date_visited` <= '2012-05-31' and deleted = 0 
```

# php - PHP：来自var的对象方法+属性调用

> ID：11029951
> 
> 赞同：0
> 
> 时间：2012-06-14T09:08:28.550
> 
> 标签：php, object

我想使用存储在 var 中的内容调用对象方法+属性...例如：

```
// setup the object
$xpath = new DOMXpath();

// setup the 'method'+'property' to call 
$var1 = "query('something')->item(O)->nodeValue";
$return = $xpath->$var1(); 
```

显然，我犯了一个错误……假设直接调用有效，即：

```
$return2 = $xpath->query('something')->item(0)->value;
echo "Return2 : ".$return2; //print okeedokee ... 
```

如何将 args 传递给 query()？以及如何为其添加额外的参数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T09:11:45.730

我想你必须打电话

```
$return=$xpath->$var1; 
```

注意：[`call_user_func`](http://php.net/manual/en/function.call-user-func.php)是您需要的功能

例子 ：

### 阿尔法.php

```
class Alpha
{
   public function getAlpha($arr_input)
   {
       echo "<pre>";
       print_r($arr_input);
   }
} 
```

### 索引.php

```
include_once 'alpha.php';
$post = array('one','two','three');
$obj_alpha =  new Alpha();

call_user_func( array( $obj_alpha , 'getAlpha' ), $post ) ;
//here I call `getAlpha` function from object of class alpha (`$obj_alpha`) 
  with argument `$post`

//will print $post array 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T09:27:28.883

您可以使用 eval() 执行此操作：

```
$return = eval('return $xpath->' . $var1 .';'); 
```

但是，将 eval() 与用户输入一起使用几乎总是一个坏主意。所以在那儿要小心。

# java - 在Android中，使用java：确定混合字节字符串的字符串长度？

> ID：11029954
> 
> 赞同：2
> 
> 时间：2012-06-14T09:08:53.483
> 
> 标签：java, android

有一个包含 ascii 字符和双字节字符的 String 变量（例如，中文、日文、...）。

如何确定 String 的总长度？另外，我想用字符串 substring/replace 函数来实现。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-14T09:36:33.973

Java 中的字符串类型是隐含的 UTF-16。所有其他编码（例如 UTF-8）都应该使用`byte`数组来表示。

“长度”是一个模棱两可的术语。

每个 Unicode 代码点将使用一个或两个代码*单元*（16 位`char`）——基本的多语言平面和补充范围。当转码为不同的编码时，字符串将消耗的字节数可能会发生变化。一系列代码点也可以组合形成一个用户可见的字素。

因此，以下是测量字符串“长度”的方法：

*   字节数：[String.getBytes(Charset).length](http://developer.android.com/reference/java/lang/String.html#getBytes%28java.nio.charset.Charset%29)
*   字符数：[String.length()](http://developer.android.com/reference/java/lang/String.html#length%28%29)
*   代码点数：[String.codePointCount(int,int)](http://developer.android.com/reference/java/lang/String.html#codePointCount%28int,%20int%29)
*   字素数：[BreakIterator.getCharacterInstance(Locale)](http://developer.android.com/reference/java/text/BreakIterator.html#getCharacterInstance%28java.util.Locale%29)

*我在[一篇博](http://illegalargumentexception.blogspot.co.uk/2009/05/java-rough-guide-to-character-encoding.html)文中介绍了其中的一些内容。*

* * *

> 评论：是否有一种简单的方法/API 来处理混合字节字符串？（要剪切/缩短/子字符串（）像“sDDsssDDDDsDD”这样的字符串（s：单字节ascii字符，DD：双字节字符）？

考虑 Java 字符串文字`"Hello 您好世界"`，它也可以表示为`"Hello \u60a8\u597d\u4e16\u754c"`.

这可以在传统的 Windows[简体中文](http://msdn.microsoft.com/en-gb/goglobal/cc305153)双字节编码中编码为字节序列：

```
48 65 6c 6c 6f 20 c4 fa ba c3 ca c0 bd e7 
```

为了将其转换为 Java 字符，您将对其进行解码：

```
byte[] data = { 0x48, 0x65, 0x6c, 0x6c, 0x6f, 0x20, (byte) 0xc4,
    (byte) 0xfa, (byte) 0xba, (byte) 0xc3, (byte) 0xca, (byte) 0xc0,
    (byte) 0xbd, (byte) 0xe7 };
Charset encoding = Charset.forName("x-mswin-936");
String hello = new String(data, encoding); 
```

现在您已将数据转码为 Unicode，您可以使用通常的字符串操作机制（[子字符串](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#substring%28int,%20int%29)、[正则表达式匹配](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#matches%28java.lang.String%29)等）。

请注意，您必须知道在转换之前使用的双字节编码。如果您不知道编码，那么您所拥有的就是垃圾。

我不知道 Android 支持哪些编码，但您可以通过调用[Charset.availableCharsets()](http://developer.android.com/reference/java/nio/charset/Charset.html#availableCharsets%28%29)在运行时发现这一点。如果 Android 不支持您需要的编码，请查看[ICU4J](http://site.icu-project.org/)库。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-14T09:14:53.657

Java 字符串是字符，而不是字节。长度是字符数。如果您想要字节数，请使用

`str.getBytes(encoding).length`

其中编码是例如“UTF-8”。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-14T09:36:50.017

正如其他人所说，Java字符串在概念上是Java字符的只读数组，字符串的“长度”是字符数。但是，有一些复杂的问题：

*   Java 字符不一定是您认为的字符。特别是，Unicode 字符（代码点）比使用 Java 字符表示的要多。一些 Unicode 代码点需要两个 Java 字符来表示它们。（这是 Thilo 所指的“扩展平面”问题。）

*   一些 JVM（在启动时设置了适当的 JVM 标志）将使用字符串表示，其中字符以 UTF-8 编码。虽然 String 的长度相同（在本例中为 UTF-8 表示的 Java 字符数），但使用的内存可以显着减少。

然后是需要多少字节才能将字符串的字符表示为 UTF-8 或其他编码的问题。据我所知，JVM 提供的唯一方法是进行转换；例如使用`getBytes(charSet)`.

最后，还有一个字符串在堆中占用多少字节的问题。`String`您可以找出对象及其关联的`char[]`支持对象中有多少字节。但是，当您考虑到该方法`substring`和其他`String`方法可以创建*共享*单个支持数组的字符串集时，预测这将是什么可能会很棘手。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T09:14:32.937

Java 在内部使用 Unicode，因此实际字符是什么并不重要。`String.length()`会给你正确的长度。其他 String 方法也是如此。

# c# - 在winform应用程序c#中重置面板滚动位置

> ID：11029963
> 
> 赞同：6
> 
> 时间：2012-06-14T09:09:28.393
> 
> 标签：c#, winforms

我正在开发 winfom 应用程序 c#。我有两种形式，称为`Welome`和`Details`。详细信息在面板中包含 7 个网格。

**场景：** 如果我单击欢迎页面上的任何项目，它将进入包含七个网格的详细信息页面。如果我向下拖动滚动条，并在回到欢迎表单后返回，滚动条仍然保持在同一位置。

**问题：** 我想在每次用户访问详细信息表单时将滚动位置重置为顶部，以便我始终可以看到第一个网格。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-06-14T10:08:17.767

设置`AutoScroll`为`true`

```
panel1.AutoScroll = true; 
```

然后，在详细信息表单的`load`事件中，设置`VerticalScroll`

```
panel1.VerticalScroll.Value = 0; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-11-26T17:45:06.223

如果 Angshuman Agarwal 的答案对您不起作用，那么罪魁祸首可能是在加载表单中的某些控件后接收焦点，这将滚动到视图中并覆盖对滚动位置的任何更改。

您*可以*设置`TabStop`为 false，但随后您的表单将无法选项卡:(

一个笨重但仍然相对简单的解决方法是手动将焦点放在表单中的第一个控件上：

```
yourFirstControl1.Select(); 
```

*另请参阅*：[如何使面板滚动条在加载表单时位于顶部位置](https://stackoverflow.com/q/1141778/1366033)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-03-19T13:20:25.463

旧帖子，但仍然相关。以上仅在我添加一行时才有效：

```
displayPanel.AutoScroll = true;
displayPanel.AutoScrollPosition = new Point(displayPanel.AutoScrollPosition.X, 0);
displayPanel.VerticalScroll.Value = 0; 
```

然后它工作得很好，无需设置任何标签索引。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-05-28T01:33:06.817

上面提到的很好但是，你应该在 Panel1_Paint 中添加 VerticalScroll.Value

```
Private Sub Panel1_Paint(sender As Object, e As PaintEventArgs) Handles Panel1.Paint    
Panel1.VerticalScroll.Value = 0
End Sub 
```

# android - 如何在 AndroidTestCase 中获取活动或应用程序上下文

> ID：11029965
> 
> 赞同：0
> 
> 时间：2012-06-14T09:09:36.427
> 
> 标签：android, unit-testing

我正在用 AndroidTestCase 编写一些测试用例。我想调用 getCacheDir 来获取目录。

```
/data/data/com.mypackage/cache 
```

但我还没有启动活动或应用程序。我可以通过任何方式在 AndroidTestCase 中获取活动或应用程序上下文。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T10:10:37.937

您可以在 AndroidTestCase 的子类中简单地覆盖 getContext()

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-18T14:26:28.507

由于您正在扩展 AndroidTestCase，因此您只需使用调用 getContext() 即可检索上下文。AndroidTestCase 为您实现它。

# java - 使用 SVNKit 的 SVN 日志

> ID：11029968
> 
> 赞同：0
> 
> 时间：2012-06-14T09:10:09.257
> 
> 标签：java, svnkit

我敢肯定这个问题在多个层面上会很愚蠢或令人讨厌......

我在 Java 中使用 SVNKit。

我想获取在特定提交中提交的文件列表。我有发布ID。通常我会运行类似的东西

svn 日志 url/to/repository -qv -r12345

我会照常获得命令列表。

我不知道如何在 SVNKit 中做类似的事情。有小费吗？:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T22:51:05.037

```
final SvnOperationFactory svnOperationFactory = new SvnOperationFactory();
final SvnLog log = svnOperationFactory.createLog();
log.setSingleTarget(SvnTarget.fromURL(url));
log.addRange(SvnRevisionRange.create(SVNRevision.create(12345), SVNRevision.create(12345)));
log.setDiscoverChangedPaths(true);
final SVNLogEntry logEntry = log.run();

final Map<String,SVNLogEntryPath> changedPaths = logEntry.getChangedPaths();
for (Map.Entry<String, SVNLogEntryPath> entry : changedPaths.entrySet()) {
    final SVNLogEntryPath svnLogEntryPath = entry.getValue();
    System.out.println(svnLogEntryPath.getType() + " " + svnLogEntryPath.getPath() +
            (svnLogEntryPath.getCopyPath() == null ?
                    "" : (" from " + svnLogEntryPath.getCopyPath() + ":" + svnLogEntryPath.getCopyRevision())));
} 
```

如果您想针对修订范围运行一个日志请求，您应该在接收器实现中使用 log.setReceiver() 调用。

# java - 为什么在 Java 中会出现 NoClassDefFoundError 异常？

> ID：11029972
> 
> 赞同：0
> 
> 时间：2012-06-14T09:10:18.333
> 
> 标签：java, exception, cmd

我正在尝试从 cmd 运行 Java 应用程序，但出现以下错误：

```
Exception in thread "main" java.lang.NoClassDefFoundError: Main
    Caused by: java.lang.ClassNotFoundException: Main
    at java.net.URLClassLoader$1.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    Could not find the main class: Main.  Program will exit. 
```

在目录中，您可以找到：

```
Directory of C:\Java

AVLNode.java
AVLTree.java
Comparator.java
HashTable.java
input1.dat
input2.dat
Main.java
StringComparator.java 
```

我正在跑步：

```
java Main input1.dat input2.dat  output1.dat 
```

我在文件夹中有 Main.Java，我有：

`public static void main(String[] args)`Main.Java 上的方法（以及更多功能）

我已经在[这里阅读了有关此问题的答案，](https://stackoverflow.com/questions/5407250/causes-of-java-lang-nosuchmethoderror-main-exception-in-thread-main)但我认为我做的一切都很好:(那可能是什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T09:15:33.343

as stated in another answer check if `Main.class` is present in current directory

also try `java -cp . Main arg1 arg2`

above line sets classpath to current directory

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T09:13:04.817

`Main.class`检查当前目录中是否有文件。如果它已经存在，请检查`path`系统环境变量中的变量。它应该指向`JAVA_HOME\bin`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T09:22:14.767

首先确保你已经编译了你的代码。

您应该在包含 Main.class 的目录中（如果您使用的是 eclipse IDE，它将是 bin/）。

如果你的 Main 类在一个包中，你应该从包含包的目录运行你的命令，你的命令将是 java [package name].Main [arguments]

如果你想从任何地方运行你的命令，你可以使用 -cp 选项，如下所示：

```
java -cp [classpath] [package name].Main [arguments] 
```

with classpath ：包含 .class 的目录的路径，直到包之前

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T12:00:15.190

看起来你还没有编译你的代码。尝试以下操作：

```
cd Java
javac Main.java 
```

这应该在 Java 目录中创建 .class 文件。然后，在不更改目录的情况下，尝试：

```
java Main input1.dat input2.dat output1.dat 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-14T09:29:02.877

除了其他人建议的内容外，请检查您是否`package`在`Main`. 如果是这样，您必须在启动程序时包含它。

例如，如果您有：

```
package mypackage;

public class Main
{
    public static void main (String[] affhf)
    {

    }
} 
```

那么你必须通过调用来启动你的程序：

`java mypackage.Main input1.dat input2.dat output1.dat`

在某些情况下，这可能会在编译过程中溜走......

# c# - 在 Windows Phone 7 中打开位置切换

> ID：11029975
> 
> 赞同：1
> 
> 时间：2012-06-14T09:10:25.827
> 
> 标签：c#, windows, geolocation, location, windows-phone-7.1

我想知道如何在 c# 中打开位置工具，例如对于 wifi 我使用这个：

```
ConnectionSettingsTask connectionSettingsTask = new ConnectionSettingsTask();
connectionSettingsTask.ConnectionSettingsType = ConnectionSettingsType.WiFi;
connectionSettingsTask.Show(); 
```

我喜欢这样的东西，但位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-05T12:43:46.447

虽然，在**Windows Phone 8**中，这可以使用

`Windows.System.Launcher.LaunchUriAsync(new Uri("ms-settings-location:"))`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T19:19:31.187

无需为您执行此操作 - 每个使用位置传感器的应用程序都应在其自己的设置页面中具有此设置。

# jasper-reports - 将单选按钮添加到碧玉报告

> ID：11029978
> 
> 赞同：1
> 
> 时间：2012-06-14T09:10:38.847
> 
> 标签：jasper-reports, jasperserver

我是 jasper 的新手，并创建了一些报告。我的要求是我想在我的报告中添加单选按钮。默认情况下，报告在饼图中显示值。当用户单击单选按钮时，饼图的值将变为百分比。任何机构都可以帮助我实现同样的目标吗？

提前致谢。

![在此处输入图像描述](../Images/b8d2b9b7fcd4cced44a75530e339b883.png)

# linq - LINQ：在 LINQ let 中使用三元 ( ?: ) 是不够的，需要一个“IF”但似乎无法让它工作

> ID：11029980
> 
> 赞同：3
> 
> 时间：2012-06-14T09:10:53.977
> 
> 标签：linq, entity-framework

我试图在 LINQ 中的 LET 中包含一个 IF，但我无法让它工作，它似乎适用于三元运算符，但这是 TRUE 或 FALSE，我需要有两个以上的选项。

我认为这很好地解释了它

基本上我有一个选择，它使用数据库中的连接来选择项目。然后我得到每条记录的状态，但我必须根据 products.type 的类型在单独的表上进行连接

```
var tst = from p in products join i in info on p.id equals i.pid

// if p.type = "home" then ...

let status = from s in homestatus
select new { status = s.status }

// if p.type ="offshore" then

let status = from s in offshorestatus
select new { status = s.status }

// if p.type ="internal" then

let status = from s in internalestatus
select new { status = s.status }

select new {
name = p.name,
status = status.StatusText
} 
```

任何人都知道如何做一个标准的 IF，所以我可以选择我希望执行的状态（让）。

提前致谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-14T09:18:06.220

您可以使用*条件*运算符 (1)

```
var tst = from p in products join i in info on p.id equals i.pid

let status = p.type = "home" ? homestatus.Select(s=>s.status) :
             p.type = "offshore" ? offshorestatus.Select(s=>s.status) :
             p.type = "internal" ? internalestatus.Select(s=>s.status) : null
select new {
name = p.name,
status = status != null ? status.StatusText : string.Empty;
} 
```

如果您没有将状态用于 StatusText 以外的任何其他内容，您也可以这样做

```
var tst = from p in products join i in info on p.id equals i.pid

let status = (p.type = "home" ? homestatus.Select(s=>s.status.StatusText) :
             p.type = "offshore" ? offshorestatus.Select(s=>s.status.StatusText) :
             p.type = "internal" ? internalestatus.Select(s=>s.status.StatusText) : null) ?? string.Empty
select new {
name = p.name,
status = status;
} 
```

（1）*三元*运算符是任何带三个参数的运算符，目前C#中只有一个称为条件运算符

# opengl-es - GLSL绕过浮点数组统一

> ID：11029981
> 
> 赞同：0
> 
> 时间：2012-06-14T09:10:54.430
> 
> 标签：opengl-es, glsl

设置着色器

```
 muOffsetHandle = getUniformLocation("offset");      
    muWeightHandle = getUniformLocation("weight"); 
```

使用程序

```
 GLES20.glUniform1fv(muOffsetHandle, 1, mOffset, 0);
    GLES20.glUniform1fv(muWeightHandle, 1, mWeight, 0); 
```

变量

```
private int muOffsetHandle;
private int muWeightHandle;

protected float mOffset[] =new float[] {0.0f, 1.3f, 3.3f}; 
protected float mWeight[] =new float[] {0.2f, 0.3f, 0.3f}; 
```

片段着色器

```
 "uniform float offset[3];\n" +
        "uniform float weight[3];\n" + 
```

然后试图达到：重量[i]

我明白了：

着色器日志：0:13：S0004：成员引用或 swizzle 尝试在非结构和非向量上

第 13 行：`tc += texture2D(uFrameBufferTexture, vTextureCoord[0].xy + vec2(0.0, offset[i])/uScreenHeight).rgb * weight[i];`

(i = 0 到 2)

所以我的问题：如何绕过浮点数组到制服？浮动[3]

编码

```
protected static final String mFShader = 
        "precision mediump float;\n" +
        "varying vec2 vTextureCoord;\n" +
        "uniform float uTime;\n" +
        "uniform float uScreenWidth;\n" +
        "uniform float uScreenHeight;\n" +
        "uniform sampler2D uFrameBufferTexture;\n"+

        "uniform float offset[3];\n" +
        "uniform float weight[3];\n" +

        "void main() {\n"+
        "  vec3 tc = vec3(1.0, 0.0, 0.0);\n"+
        "  if (vTextureCoord[0].x<(uTime-0.01)) {\n"+
        "    tc = texture2D(uFrameBufferTexture, vTextureCoord[0].xy).rgb * weight[0];\n"+
        "    for (int i=1; i<3; i++) {\n"+
        "      tc += texture2D(uFrameBufferTexture, vTextureCoord[0].xy + vec2(0.0, offset[i])/uScreenHeight).rgb * weight[i];\n"+
        "      tc += texture2D(uFrameBufferTexture, vTextureCoord[0].xy - vec2(0.0, offset[i])/uScreenHeight).rgb * weight[i];\n"+
        "    }\n"+
        "  }\n"+
        "  else if (vTextureCoord[0].x>=(uTime+0.01)) {\n"+
        "    tc = texture2D(uFrameBufferTexture, vTextureCoord[0].xy).rgb;\n"+
        "  }\n"+
        "   gl_FragColor = vec4(tc, 1.0);\n"+
        "}\n"; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T09:24:33.003

问题实际上不在于`weight`or `offset`。编译器抱怨你说`vTextureCoord[0].xy`，但你声明`vTextureCoord`为`varying vec2 vTextureCoord;`。

要么声明`vTextureCoord`为数组，要么不说`[0]`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T11:58:20.013

您不需要将其声明为数组，但如果您愿意，您可以简单地使用：

```
varying vec4 vTextureCoord[3]; // you can use anything you want between the brackets 
```

另外，不要忘记修改顶点着色器的变化，以使它们相同。

# jquery - jQuery没有队列

> ID：11029983
> 
> 赞同：1
> 
> 时间：2012-06-14T09:11:16.090
> 
> 标签：jquery, queue

我有这个功能，我通过 css 为翻转框制作动画。我怎么能实现点击功能没有排队，这样你就不能“垃圾邮件”翻转盒？

```
$(document).ready(function () {
    function flipBack() {
        console.log($(this));
        var $this = $(this);
        $this.removeClass('flip');
        $this.children('.front').delay(600).show(0);
        $this.children('.back').delay(600).hide(0);
        return false;
    }

    function flipForward() {
        var $this = $(this);
        $this.addClass('flip');
        $this.children('.front').delay(600).hide(0);
        $this.children('.back').delay(600).show(0);
        var t = setTimeout(function () {
            $this.trigger("click");
        }, 5000);
    }
    $('.click').toggle(flipForward, flipBack);
}); 
```

任何想法表示赞赏！提前谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T09:15:50.643

我通常使用一个名为`clickban`.

例如：

```
$el.click(function(){
    if( !clickban ){
        clickban = true;
        // Do something, and then afterwards set clickban to false
        // and then you can click again.
    }
}); 
```

我认为您应该能够将其应用于您的情况！

希望有帮助:)

# android - 在android中执行管道命令？

> ID：11029990
> 
> 赞同：1
> 
> 时间：2012-06-14T09:11:36.760
> 
> 标签：android, logging, android-logcat

我想显示应用程序日志。在终端上我使用了这个命令： adb logcat -s brief *:V|grep "pid" 它显示我的应用程序日志。

pid 表示在 logcat 表中显示的应用程序 pid。

```
 public static String logProc()
{
     String value = "";
     try
     {
         String cmd[] = {"logcat","-s","brief","*:V","|","grep",
                 android.os.Process.myPid()+""};
         Process p = Runtime.getRuntime().exec(cmd,null, null);
         BufferedReader reader = new BufferedReader(new 
                 InputStreamReader(p.getInputStream()));
         String line = reader.readLine();

         while (line != null)
         {
             value += line + "\n";
             line = reader.readLine();
         }
         p.waitFor();
     }
     catch (IOException e1)
     {
         e1.printStackTrace();
     } 
     catch (InterruptedException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    return value;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T17:13:21.470

大多数官方 Android 版本不附带 grep（编辑：现在有更新的版本）

如果你想要额外的命令，你可以安装busybox - 如果没有root，你必须把它放在另一个位置。

你还有一个额外的问题是你试图 exec() 一个 shell 命令来通过管道连接两个程序，除非你执行一个 shell 解释器并给它那个命令，否则它不会工作。或者您可以自己设置管道并执行这两个程序。

但是由于您正在编写程序，因此在 java 代码中进行模式匹配可能会更简单。

# ios4 - 如何使用面包屑路径在地图上绘制路线？

> ID：11029991
> 
> 赞同：4
> 
> 时间：2012-06-14T09:11:43.163
> 
> 标签：ios4

我使用了苹果提供的 CrumbPath.o 和 CrumbPathView.o 的类，但是它只支持 iphone 5.0，当我用 iphone 4.0 尝试相同的代码时，它不会更新路由。代码 ：

```
 if (newLocation)
    {

    if (oldLocation.coordinate.latitude == 0.0) {
        initialLocation = [[[CLLocation alloc]initWithLatitude:newLocation.coordinate.latitude longitude:newLocation.coordinate.longitude]retain];
    }
    // make sure the old and new coordinates are different
    if((oldLocation.coordinate.latitude != newLocation.coordinate.latitude) &&
      (oldLocation.coordinate.longitude != newLocation.coordinate.longitude))
    {    
    if (!crumbs)
    {
        // This is the first time we're getting a location update, so create
        // the CrumbPath and add it to the map.
        //
        crumbs = [[CrumbPath alloc] initWithCenterCoordinate:newLocation.coordinate];
        [mapView addOverlay:crumbs];

        // On the first location update only, zoom map to user location
        MKCoordinateRegion region = 
        MKCoordinateRegionMakeWithDistance(newLocation.coordinate, 2000, 2000);
        [mapView setRegion:region animated:YES];
    }
    else
    {
        // This is a subsequent location update.
        // If the crumbs MKOverlay model object determines that the current location has moved
        // far enough from the previous location, use the returned updateRect to redraw just
        // the changed area.
        //
        // note: iPhone 3G will locate you using the triangulation of the cell towers.
        // so you may experience spikes in location data (in small time intervals)
        // due to 3G tower triangulation.
        // 
        Count++;
        double latitude = 0.000500 * Count;
        double longitude = 0.000020 * Count;
        _bean = [[TempBean alloc]init];
        _bean.lat = newLocation.coordinate.latitude + latitude;
        _bean.lon = newLocation.coordinate.longitude - longitude;

        CLLocation *locationToDraw = [[CLLocation alloc]initWithLatitude:_bean.lat longitude:_bean.lon];
        //                UIAlertView *alert = [[UIAlertView alloc]initWithTitle:@"Update_Loc" message:[NSString stringWithFormat:@"Lat:%f , Lon:%f",locationToDraw.coordinate.latitude,locationToDraw.coordinate.longitude] delegate:self cancelButtonTitle:@"ok" otherButtonTitles:@"Cancel",nil];
        //                [alert show];
        //                [alert release];

        MKMapRect updateRect = [crumbs addCoordinate:locationToDraw.coordinate];

        if (!MKMapRectIsNull(updateRect))
        {
            // There is a non null update rect.
            // Compute the currently visible map zoom scale
            MKZoomScale currentZoomScale = (CGFloat)(mapView.bounds.size.width / mapView.visibleMapRect.size.width);
            // Find out the line width at this zoom scale and outset the updateRect by that amount
            CGFloat lineWidth = MKRoadWidthAtZoomScale(currentZoomScale);
            updateRect = MKMapRectInset(updateRect, -lineWidth, -lineWidth);
            // Ask the overlay view to update just the changed area.
            [crumbView setNeedsDisplayInMapRect:updateRect];
        }
        [self calDistance:initialLocation SecondCor:locationToDraw];
        [locationToDraw release];
        locationToDraw =nil;
        [_bean release];
        _bean = nil;

}} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-30T08:20:41.230

如果是这种情况，您应该尝试`CrumbPathView.m`从我在这里看到的内容中查看渲染功能是否正常工作，您从 Apple Docs 复制并粘贴了代码，对吗？在文件中，您应该在方法中找到它`drawMapRect:zoomScale:inContext:`

```
if (path != nil)
{
    CGContextAddPath(context, path);
    CGContextSetRGBStrokeColor(context, 0.0f, 0.0f, 1.0f, 0.6f);
    CGContextSetLineJoin(context, kCGLineJoinRound);
    CGContextSetLineCap(context, kCGLineCapRound);
    CGContextSetLineWidth(context, lineWidth);
    CGContextStrokePath(context);
    CGPathRelease(path);
} 
```

看看它是否`path`为 nil，如果它是 nil-ed，则什么都不会被渲染。你调试过这个视图吗？渲染发生在 CrumbPathView 中，因此您应该看到其中发生了什么。

**如果`path`是 nil 那么你应该检查被调用来分配它的值的方法，位于上面`if (path != nil)`**

# c# - 字符到数字的转换过程失败

> ID：11029994
> 
> 赞同：2
> 
> 时间：2012-06-14T09:11:49.507
> 
> 标签：c#, asp.net, sql, informix, parameterized-query

当我尝试将参数化查询与`informix`.

```
A character to numeric conversion process failed 
```

* * *

```
 StringBuilder sQuery = new StringBuilder();
                    Dictionary<string, string> paramList = new Dictionary<string, string>();
                    cmdTxt.Append(" UPDATE userwidgetto SET widget_color = ?, widget_column = ?, widget_order = ?,widget_state = ?,widget_type = ? ");
                    cmdTxt.Append(" WHERE process_id = ? AND emp_num = ? ");

                    paramList.Add("process_id", Process_id.ToString());
                    paramList.Add("emp_num", Emp_num.ToString());
                    paramList.Add("widget_color", Widget_color.TrimEnd());
                    paramList.Add("widget_column", Widget_column.ToString().TrimEnd());
                    paramList.Add("widget_order", Widget_order.ToString());
                    paramList.Add("widget_state", Widget_state.ToString());
                    paramList.Add("widget_type", Widget_type.ToString());
                    affectedRow = DAL_Helper.Execute_NonQuery(cmdTxt.ToString(), CommandType.Text, paramList); 
```

* * *

```
public int Execute_NonQuery(string cmdText, CommandType cmdType, Dictionary<string, string> Param_arr)
            {
                Open_Connection();
                int return_val = -1;
                command.CommandText = cmdText;
                command.CommandType = cmdType;
                command.Transaction = current_trans;
                command.Parameters.Clear();
                if (Param_arr != null)
                {
                    foreach (KeyValuePair<string, string> parameter in Param_arr)
                    {
                        param = command.CreateParameter();
                        param.ParameterName = parameter.Key.ToString();
                        if (parameter.Value.ToString() == "Null" || string.IsNullOrEmpty(parameter.Value))
                            param.Value = DBNull.Value;
                        else
                            param.Value = parameter.Value.ToString();
                        command.Parameters.Add(param);
                    }
                }
                try
                {
                    return_val = command.ExecuteNonQuery();//means no error message //OK                
                }
                catch (IfxException ifxEx)// Handle IBM.data.informix : mostly catched
                {
                    return_val = ifxEx.Errors[0].NativeError;
                }
                catch (Exception Ex)
                {
                    ErrMapping.WriteLog("\r\n" + Ex.Message);
                    return_val = ExCodeConst;
                }
                finally
                {
                    Close_Connection();
                }
                return return_val;
            } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T09:15:40.247

我想您正在使用 OleDb 客户端。`?`在这种情况下，参数应该以与命令字符串占位符 ( )相同的位置顺序插入

```
cmdTxt.Append(" UPDATE userwidgetto SET widget_color = ?, widget_column = ?, widget_order = ?,widget_state = ?,widget_type = ? ");
cmdTxt.Append(" WHERE process_id = ? AND emp_num = ? ");
paramList.Add("widget_color", Widget_color.TrimEnd());
paramList.Add("widget_column", Widget_column.ToString().TrimEnd());
paramList.Add("widget_order", Widget_order.ToString());
paramList.Add("widget_state", Widget_state.ToString());
paramList.Add("widget_type", Widget_type.ToString()); 
paramList.Add("process_id", Process_id.ToString());
paramList.Add("emp_num", Emp_num.ToString());
affectedRow = DAL_Helper.Execute_NonQuery(cmdTxt.ToString(), CommandType.Text, paramList); 
```

Dictionary<string, string> paramList 也强制传递给 DAL_Helper 的每个值都是字符串类型。
而且，我认为，从给出的参数名称来看，情况并非如此（**process_id**不是数据库表中的字符串，对吧？）。
正如评论中已经建议的那样，您应该将 paramList 更改为 Dictionary<string, object> ，然后仅在适当的地方添加带有字符串转换的参数（意味着表列的数据类型是字符串类型） .

# android - 在菜单按钮上显示自定义菜单单击

> ID：11029995
> 
> 赞同：0
> 
> 时间：2012-06-14T09:11:50.483
> 
> 标签：android

我创建了一个 Activity，它的行为就像一个弹出菜单实际上只是一个菜单项列表。然后我将清单上的活动主题设置为“对话框”以获得弹出效果。现在我需要这个活动来显示设备上的菜单按钮何时被按下。我尝试使用 onCreateOptionsMenu，然后将我的 Activity XML 传递给 Inflater，如下所示：

```
 public boolean onCreateOptionsMenu(Menu menu){
    new MenuInflater(this).inflate(R.layout.popup_menu, menu);

    return (super.onCreateOptionsMenu(menu));
} 
```

“popup_menu”是我的活动的 XML。但这没有用。还有什么建议吗？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T09:16:26.597

你应该在那里开始你的活动。如果我看到您的活动代码，我可以告诉您更多信息

# objective-c - something.somethingElse 和 something->somethingElse 之间有什么区别

> ID：11029997
> 
> 赞同：0
> 
> 时间：2012-06-14T09:11:53.120
> 
> 标签：objective-c, syntax

在 Objective-c 中，使用 . 并使用 ->? 我已经多次使用点符号，但只是遇到过->

例如

```
Object.subObject

or

Object->subObject 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T09:14:37.257

## `myObject.myProperty`

点可以调用属性的 getter/setter 或访问结构。

在您的情况下， subObject 可能不是结构，因此 using`myObject.myProperty`与调用作为`[myObject myProperty]`“myProperty”属性的 getter 的方法相同。

使用点设置新值时的方式相同。您正在调用`[myObject setMyProperty:newValue];`它将为您的属性定义的适当内存管理（如保留、复制或分配值以及释放旧值）。

（使用 getter 和 setter 也会调用 KVO 的工作）

* * *

## `myObject->myProperty`

箭头指向变量的内存。

这仅仅意味着您正在跟踪指向内存所在`myProperty`位置的指针。这是较低级别的，不会为您做任何内存管理，也不适用于 KVO。

# c++ - 如何通过 STL 容器中的子字符串删除元素

> ID：11029999
> 
> 赞同：2
> 
> 时间：2012-06-14T09:11:59.257
> 
> 标签：c++, algorithm, stl

我有一个对象向量（对象是术语节点，在其他字段中包含一个带有术语字符串的字符串字段）

```
class TermNode {
private:
    std::wstring term;
    double weight;
    ...
public:
    ...
}; 
```

经过一些处理和计算分数后，这些对象最终存储在 TermNode 指针向量中，例如

```
std::vector<TermNode *> termlist; 
```

此向量的结果列表（最多包含 400 个条目）如下所示：

```
DEBUG: 'knowledge' term weight=13.5921
DEBUG: 'discovery' term weight=12.3437
DEBUG: 'applications' term weight=11.9476
DEBUG: 'process' term weight=11.4553
DEBUG: 'knowledge discovery' term weight=11.4509
DEBUG: 'information' term weight=10.952
DEBUG: 'techniques' term weight=10.4139
DEBUG: 'web' term weight=10.3733
... 
```

我尝试做的是清理也包含在术语列表中的短语中的*子字符串的最终列表。*例如，查看上面的列表片段，有短语**'knowledge discovery'**因此我想删除单个术语**'knowledge'**和**'discovery'**，因为它们也在列表中并且在这种情况下是多余的。我想保留包含单个术语的短语。我也在考虑删除所有等于或少于 3 个字符的字符串。但这只是暂时的想法。

对于这个清理过程，我想使用 remove_if / find_if （使用新的 C++ lambdas）编写一个类，并且最好将该代码放在一个紧凑的类中。

我不太确定如何解决这个问题。问题是我首先必须通过可能将标志设置为删除标记来确定要删除的字符串。这意味着我必须预处理该列表。我必须找到单个术语和包含这些单个术语之一的短语。我认为这不是一件容易的事，需要一些先进的算法。使用后缀树来识别子串？

向量上的另一个循环以及相同向量的副本可能会进行清理。我正在寻找时间上最有效的东西。

我一直在研究想法或方向，例如[std::list 中](https://stackoverflow.com/questions/5869573/stdlist-erase-incompatible-iterator)使用 remove_if / find_if 擦除不兼容的迭代器和[从 std::vector 中擦除多个对象中使用的想法？](https://stackoverflow.com/questions/3487717/erasing-multiple-objects-from-a-stdvector).

所以问题基本上是有一种聪明的方法来做到这一点并避免多个循环，我如何识别要删除的单个术语？也许我真的错过了一些东西，但可能有人在那里给我一个很好的提示。

谢谢你的想法！

**更新**

我按照 Scrubbins 推荐的方式实现了删除冗余的单个术语，如下所示：

```
/**
 * Functor gets the term of each TermNode object, looks if term string
 * contains spaces (ie. term is a phrase), splits phrase by spaces and finally
 * stores thes term tokens into a set. Only term higher than a score of 
 * 'skipAtWeight" are taken tinto account.
 */
struct findPhrasesAndSplitIntoTokens {
private:
    set<wstring> tokens;
    double skipAtWeight;

public:
    findPhrasesAndSplitIntoTokens(const double skipAtWeight)
    : skipAtWeight(skipAtWeight) {
    }

    /**
     * Implements operator()
     */
    void operator()(const TermNode * tn) {
        // --- skip all terms lower skipAtWeight
        if (tn->getWeight() < skipAtWeight)
            return;

        // --- get term
        wstring term = tn->getTerm();
        // --- iterate over term, check for spaces (if this term is a phrase)
        for (unsigned int i = 0; i < term.length(); i++) {
            if (isspace(term.at(i))) {
if (0) {
                wcout << "input term=" << term << endl;
}
                // --- simply tokenze term by space and store tokens into 
                // --- the tokens set
                // --- TODO: check if this really is UTF-8 aware, esp. for
                // --- strings containing umlauts, etc  !!
                wistringstream iss(term);
                copy(istream_iterator<wstring,
                        wchar_t, std::char_traits<wchar_t> >(iss),
                    istream_iterator<wstring,
                        wchar_t, std::char_traits<wchar_t> >(),
                    inserter(tokens, tokens.begin()));
if (0) {
                wcout << "size of token set=" << tokens.size() << endl;
                for_each(tokens.begin(), tokens.end(), printSingleToken());
}
            }
        }
    }

    /**
     * return set of extracted tokens
     */
    set<wstring> getTokens() const {
        return tokens;
    }
};

/**
 * Functor to find terms in tokens set
 */
class removeTermIfInPhraseTokensSet {
private:
    set<wstring> tokens;

public:
    removeTermIfInPhraseTokensSet(const set<wstring>& termTokens)
    : tokens(termTokens) {
    }

    /**
     * Implements operator()
     */
    bool operator()(const TermNode * tn) const {
        if (tokens.find(tn->getTerm()) != tokens.end()) {
            return true;
        }
        return false;
    }
};

...

findPhrasesAndSplitIntoTokens objPhraseTokens(6.5);
objPhraseTokens = std::for_each(
    termList.begin(), termList.end(), objPhraseTokens);
set<wstring> tokens = objPhraseTokens.getTokens();
wcout << "size of tokens set=" << tokens.size() << endl;
for_each(tokens.begin(), tokens.end(), printSingleToken());

// --- remove all extracted single tokens from the final terms list
// --- of similar search terms 
removeTermIfInPhraseTokensSet removeTermIfFound(tokens);
termList.erase(
    remove_if(
        termList.begin(), termList.end(), removeTermIfFound),
    termList.end()
);

for (vector<TermNode *>::const_iterator tl_iter = termList.begin();
      tl_iter != termList.end(); tl_iter++) {
    wcout << "DEBUG: '" << (*tl_iter)->getTerm() << "' term weight=" << (*tl_iter)->getNormalizedWeight() << endl;
    if ((*tl_iter)->getNormalizedWeight() <= 6.5) break;
}

... 
```

我不能使用 C++11 lambda 语法，因为在我的 ubuntu 服务器上当前安装了 g++ 4.4.1。无论如何。它现在完成了这项工作。可行的方法是检查生成的加权术语与其他搜索结果集的质量，看看我如何提高质量，并找到一种方法来结合原始查询术语来提升更相关的术语。这可能不是一件容易的事，我希望有一些“简单的启发式”。但这可能是另一个新问题，当再进一步时:-)

因此，感谢所有人提供如此丰富的思想贡献！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-14T09:42:01.843

您需要做的是首先遍历列表并将所有多词值拆分为单个词。如果您允许使用 Unicode，这意味着您将需要类似于 ICU 的 BreakIterators 的东西，否则您可以使用简单的标点符号/空格分割。当每个字符串被分成它的组成词时，然后使用哈希映射来保存所有当前词的列表。当你达到一个多词值时，你可以检查它的词是否已经被找到。这应该是识别重复项的最简单方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T09:27:16.823

我可以建议您以这种方式使用[“erase-remove”](http://en.wikipedia.org/wiki/Erase-remove_idiom)习语：

```
struct YourConditionFunctor {
    bool operator()(TermNode* term) {
        if (/* you have to remove term */) {
           delete term;
           return true;
        }
        return false;
    }
}; 
```

然后写：

```
termlist.erase(
    remove_if(
        termlist.begin(),
        termlist.end(), 
        YourConditionFunctor()
    ), 
    termlist.end()
); 
```