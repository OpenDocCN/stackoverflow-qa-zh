# StackOverflow 问答 11413000-11413999

# excel - CountIF 在标准范围内

> ID：11413004
> 
> 赞同：0
> 
> 时间：2012-07-10T12:09:24.217
> 
> 标签：excel, pivot-table

我有以下数据列：

`Pool Amount|Calculated Payment| 10% | 15% | 20% | 30% | 40% | 50%`

池金额和计算的付款是静态货币字段，百分比字段都包含此公式的变化：

例如 C2`=IF(B2<(A2*0.9),A2*0.9,IF(B2>(A2*1.1),A2*1.1,B2))`

该公式将计算的付款限制在由与池金额相关的百分比确定的阈值。我想要做的是每个 % 字段的计数，显示最小值和最大值。

对于 10% 字段中的一个单元格，我将使用：

最小值`=COUNTIF(C2,A2*0.9)`和最大值`=COUNTIF(C2,A2*1.1)`

然后我可以生成两列 0 和 1 以及`SUM`它们，但看起来有点笨拙。我可以使用以下公式是否有变化：

`=COUNTIF(C2:C1162, A2:A1162*0.9)`在一个单元格中显示总计数？

这可能是具有自定义功能的数据透视表的工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T12:20:20.870

[我相信你可以用数组公式](http://office.microsoft.com/en-us/excel-help/introducing-array-formulas-in-excel-HA001087290.aspx)完成你想要的。您的“最小 10% 单元格”的公式应该是正确的，只需在输入公式时按`CTRL`+ `SHIFT`+`ENTER`即可使其成为数组公式。

我相信您需要在数组公式中使用`SUM`而不是`COUNTIF`（将所有 TRUE 和 1 和 FALSE 相加为 0）。我已经有一段时间没有使用了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T12:38:39.367

COUNTIF 不能用于将一个范围/数组的每个元素与另一个范围/数组的每个元素进行比较，但您可以使用 SUMPRODUCT 来做到这一点并避免需要“数组输入”的公式，即此公式用于计算 10% 字段中的最小值

`=SUMPRODUCT((B2:B1162< A2:A1162*0.9)+0)`

对于 Maxs

`=SUMPRODUCT((B2:B1162> A2:A1162*1.1)+0)`

这些公式只是使用原始公式中的条件应用于范围而不是单个单元格。SUM 可以用来代替 SUMPRODUCT 但你确实需要**CTRL+SHIFT+ENTER**

# android - 如何确定所需距离可见的缩放级别？

> ID：11413007
> 
> 赞同：0
> 
> 时间：2012-07-10T12:09:31.367
> 
> 标签：android, google-maps, geolocation, android-mapview

我的 MapView 中有两点。我想在 MapController 中选择缩放级别，这两个点在 Map 中都是可见的。我该如何解决这个问题？

我发现这个问题[Android (MapView): How to set Zoom level of 4 miles in the mapview?](https://stackoverflow.com/questions/5594855/android-mapview-how-to-set-zoom-level-of-4-miles-in-the-mapview) 但这并不能解决我的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T12:14:41.257

您可以将 com.google.android.maps.MapController.zoomToSpan 用于这种目的。

# java - Shopify API 调用使用 AJAX 和 JSP

> ID：11413020
> 
> 赞同：1
> 
> 时间：2012-07-10T12:10:24.993
> 
> 标签：java, ajax, jsp, shopify

我正在使用 JSP、Servlet 和 AJAX 开发 Java Web 应用程序。在其中我尝试通过特定 ID 获取产品的详细信息。当我在 Eclipse 上运行它时，它会显示以下消息：

“此页面正在访问不受其控制的信息。这会带来安全风险。要继续吗？”

当我按确定时，它会显示产品详细信息。

如果我在谷歌浏览器中浏览它不会显示任何细节。我从 Shopify 得到 0 的响应。

这是我用来获取产品详细信息的 ajax 代码：

```
 function getProductDetails(productindex){
    try{
            var intProductId = getProductId(productindex);
            if(intProductId != null){
            var url = 'http://shop.myshopify.com/admin/products/'+intProductId+'.xml';              
                 var httpRequest=GetXmlHttpObject();
                  if (httpRequest==null){
                       alert ("Browser does not support HTTP Request")
                       return
                  }     
                  httpRequest.open("GET", url, true,'apikey,'password'); 
                  httpRequest.onreadystatechange = function() {processRequest(); } ; 
                  httpRequest.send();   
           }
    }catch(e){
        alert(e);
    }
} 

 function processRequest(){ 
 try{           
    if (httpRequest.readyState == 4){               
            if(httpRequest.status == 200){                 
                var xmldata=httpRequest.responseXML; //retrieve result as an XML object
                showDetailsInFields(xmldata);                 
            } else { 
                alert("Error in response check "+ httpRequest.status +":"+ httpRequest.statusText); 
            } 
       }
     }catch(e){
     alert("Error in process request"+e);
    }
} 
```

当我在 Eclipse 中构建和运行时，我得到 200 的响应。但是，当我使用 chrome 浏览时，我得到 httpRequest.status = 0。

任何帮助，将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T12:35:26.137

这是在浏览器中运行的 JavaScript 吗？由于所有浏览器都强制执行跨站点脚本限制，这可能不起作用。您应该在服务器上发出 API 请求，向您自己的服务器发出 Ajax 请求。

# java - 读取输入后无法写入输出

> ID：11413028
> 
> 赞同：15
> 
> 时间：2012-07-10T12:10:49.680
> 
> 标签：java, httpurlconnection

我正在编写一个连接到 servlet 的程序，这要归功于 a`HttpURLConnection`但我在检查 url 时卡住了

```
public void connect (String method) throws Exception {

server = (HttpURLConnection) url.openConnection ();
server.setDoInput (true);
server.setDoOutput (true);
server.setUseCaches (false);
server.setRequestMethod (method);
server.setRequestProperty ("Content-Type", "application / xml");

server.connect ();

/*if (server.getResponseCode () == 200)
{
System.out.println ("Connection OK at the url:" + url);
System.out.println ("------------------------------------------- ------- ");
}
else
System.out.println ("Connection failed"); 

}*/ 
```

我得到了错误：

> java.net.ProtocolException：读取输入后无法写入输出。

如果我用评论中的代码检查 url 但不幸的是没有它它可以正常工作，我需要检查 url 所以我认为问题来自`getResponseCode`方法但我不知道如何解决它

非常感谢你

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-07-10T12:15:25.610

HTTP 协议基于请求-响应模式：您首先发送请求，然后服务器响应。一旦服务器响应，您就不能再发送任何内容，这没有任何意义。（服务器如何在知道您要发送的内容**之前给您响应代码？）**

因此，当您调用 时`server.getResponseCode()`，您有效地告诉服务器您的请求已经完成并且它可以处理它。如果你想发送更多数据，你必须开始一个新的请求。

查看您的代码，您想检查连接本身是否成功，但没有必要这样做：如果连接不成功，`Exception`则会抛出`server.connect()`. 但是连接尝试的结果与 HTTP 响应代码不同，后者总是在服务器处理完您的所有输入之后出现。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-10T12:16:37.800

我认为异常不是由于`printing url`. 在读取响应后，应该有一些代码正在尝试写入以设置请求正文。

`HttpURLConnection.getOutputStream()`如果您在获取后尝试获取，则会出现此异常`HttpURLConnection.getInputStream()`

**下面是 sun.net.www.protocol.http.HttpURLConnection.getOutputStream 的实现：**

```
public synchronized OutputStream getOutputStream() throws IOException {

     try {
         if (!doOutput) {
             throw new ProtocolException("cannot write to a URLConnection"
                            + " if doOutput=false - call setDoOutput(true)");
         }

         if (method.equals("GET")) {
             method = "POST"; // Backward compatibility
         }
         if (!"POST".equals(method) && !"PUT".equals(method) &&
             "http".equals(url.getProtocol())) {
             throw new ProtocolException("HTTP method " + method +
                                         " doesn't support output");
         }

         // if there's already an input stream open, throw an exception
         if (inputStream != null) {
             throw new ProtocolException("Cannot write output after reading 
                input.");
         }

         if (!checkReuseConnection())
             connect();

         /* REMIND: This exists to fix the HttpsURLConnection subclass.
          * Hotjava needs to run on JDK.FCS.  Do proper fix in subclass
          * for . and remove this.
          */

         if (streaming() && strOutputStream == null) {
             writeRequests();
         }
         ps = (PrintStream)http.getOutputStream();
         if (streaming()) {
             if (strOutputStream == null) {
                 if (fixedContentLength != -) {
                     strOutputStream = 
                        new StreamingOutputStream (ps, fixedContentLength);
                 } else if (chunkLength != -) {
                     strOutputStream = new StreamingOutputStream(
                         new ChunkedOutputStream (ps, chunkLength), -);
                 }
             }
             return strOutputStream;
         } else {
             if (poster == null) {
                 poster = new PosterOutputStream();
             }
             return poster;
         }
     } catch (RuntimeException e) {
         disconnectInternal();
         throw e;
     } catch (IOException e) {
         disconnectInternal();
         throw e;
     }
 } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-09-17T21:47:32.770

我有同样的问题。该问题的解决方案是您需要使用序列

```
openConnection -> getOutputStream -> write -> getInputStream -> read 
```

这意味着..：

```
public String sendReceive(String url, String toSend) {
URL url = new URL(url);
URLConnection conn = url.openConnection();
connection.setDoInput(true);
connection.setDoOutput(true);
connection.sets...

OutputStreamWriter out = new OutputStreamWriter(conn.getOutputStream());
out.write(toSend);
out.close();

BufferedReader in = new BufferedReader(new InputStreamReader(conn.getInputStream()));
String receive = "";
do {
    String line = in.readLine();
    if (line == null)
        break;
    receive += line;
} while (true);
in.close();

return receive;
}

String results1 = sendReceive("site.com/update.php", params1);
String results2 = sendReceive("site.com/update.php", params2);
... 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-12-10T02:26:51.353

我也有这个问题，让我吃惊的是错误是我添加的代码引起的`System.out.println(conn.getHeaderFields());`

下面是我的代码：

```
HttpURLConnection conn=(HttpURLConnection)url.openConnection();
conn.setRequestMethod("POST");
configureConnection(conn);
//System.out.println(conn.getHeaderFields()); //if i comment this code,everything is ok, if not the 'Cannot write output after reading input' error happens
conn.connect();
OutputStream os = conn.getOutputStream();
os.write(paramsContent.getBytes());
os.flush();
os.close(); 
```

# android - Android eclipse：导出apk

> ID：11413030
> 
> 赞同：0
> 
> 时间：2012-07-10T12:10:54.980
> 
> 标签：android, eclipse, export, apk

我从 Eclipse 导出 apk 时遇到问题：在我导出项目（甚至未签名，不使用密钥库）之后，如果我将 .apk 重命名为 .zip 并打开，它只包含“classes.dex”，而不包含其他任何内容。它的重量也只有 26 kb，而调试 apk 的重量为 2.6 mb。

即使在最简单的项目（例如一个按钮的一项活动）上，问题仍然存在。在导出过程中，它没有显示错误。

我的系统是 Windows 7，尝试使用 Indigo 和 Juno eclipse。尝试安装新的 android sdk 并重新安装 eclipse，尝试“清理”项目并配置构建。没有变化。

提前致谢。

更新：我刚刚创建了新的“Hello World”项目，带有自动生成的清单：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.example.testproject"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="7"
    android:targetSdkVersion="7" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name=".MainActivity"
        android:label="@string/title_activity_main" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application> 
```

当我单击“运行”按钮时效果很好，但是当我将其导出并尝试使用 adb 安装时，我得到“文件'C:...\TestProject.apk'不包含 AndroidManifest.xml”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T12:51:31.767

通过安装 ubuntu 解决了我的问题，在那里导出工作完美。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T12:33:05.813

.apk 只是一个用于安装您的应用程序的文件。.dex 文件和资源就是这一切所必需的。[您可以在此处](http://developer.android.com/tools/building/index.html)阅读有关构建 android 应用程序的更多信息。由于将类文件压缩为 dex 并使用[proguard ，大小减小了](http://proguard.sourceforge.net/)

# c++ - 存储多维可变长度数据的最有效（但足够灵活）的方法是什么？

> ID：11413031
> 
> 赞同：5
> 
> 时间：2012-07-10T12:11:08.350
> 
> 标签：c++, performance, caching, hpc, fluid-dynamics

我想知道有效存储（并随后访问）具有可变长度的多维数据数组集的最佳实践。重点是性能，但我还需要能够在运行时处理更改单个数据集的长度，而不会产生太多开销。

注意：我知道这是一个有点冗长的问题，但我已经环顾四周，找不到足够准确地描述手头问题的解决方案或示例。

**背景**

上下文是基于不连续 Galerkin 谱元法 (DGSEM) 的计算流体动力学 (CFD) 代码（参见 Kopriva (2009)，*实现偏微分方程的谱方法*）。为简单起见，让我们假设一个 2D 数据布局（实际上是三个维度，但从 2D 到 3D 的扩展应该很简单）。

我有一个网格，它由可以具有不同（物理）大小的`K`方形元素`k`( ) 组成。`k = 0,...,K-1`在每个网格元素（或“单元格”）`k`中，我都有`N_k^2`数据点。`N_k`是每个维度中数据点的数量，并且可以在不同的网格单元之间变化。

在每个数据点`n_k,i`（其中`i = 0,...,N_k^2-1`），我必须存储一个解决方案值数组，该数组`nVars`在整个域（即各处）中具有相同的长度，并且在运行时不会改变。

**尺寸和变化**

网格单元的数量`K`可以`O(10^5)`在**运行**时更改`O(10^6)`。每个网格单元中 的数据点数量介于两者之间，并且**可以**在运行时更改（并且对于不同的单元格可能不同）。存储在每个网格点 的变量数量大约是并且在运行期间**不能**改变（每个网格单元也是相同的）。 **`N_k``2``8` **`nVars``5``10`****

 ********要求**

性能是这里的关键问题。我需要能够以一种有效的方式以有序的方式定期迭代所有单元格的所有网格点（即没有太多的缓存未命中）。通常，`K`并且`N_k`在模拟过程中不会经常更改，因此例如可以选择用于所有单元和数据点的大型连续内存块。

但是，我确实需要能够在运行时细化或粗化网格（即删除单元格并创建新单元格，新单元格可能会附加到末尾）。我还需要能够更改近似顺序`N_k`，因此我为每个单元存储的数据点数量也可以在运行时更改。

**结论**

任何输入表示赞赏。如果您有自己的经验，或者只是知道一些我可以查看的好资源，请告诉我。然而，虽然解决方案对最终程序的性能至关重要，但这只是众多问题之一，因此解决方案需要具有应用性，而不是纯粹的学术性。

如果这是问这个问题的错误地点，请告诉我更合适的地点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T14:57:55.350

通常，这些类型的动态网格结构很难有效处理，但在块结构自适应网格细化代码（在天体物理学中很常见，其中复杂的几何形状并不重要）或具有大块大小的光谱元素代码中，这通常不是一个问题。每个块/元素都有很多工作要做（在您的情况下至少有 10^5 个单元 x 2 个点/单元），因此在块之间切换的成本相对较小。

还要记住，在每个元素或块的大量数据已经在缓存中之前，您通常不能对每个元素或块做太多的努力。无论如何，在对块 N+1 完成大量工作之前，您已经必须将块 N 的大部分数据从缓存中清除。（您的代码中可能有一些操作是例外的，但这些操作可能不是您花费大量时间的操作，缓存或不缓存，因为没有很多数据重用 - 例如，元素操作单元格值）。因此，将每个块/元素放在一起并不一定是一件大事；另一方面，您肯定希望块/元素本身是连续的。

另请注意，您可以移动块以使它们在调整大小时保持连续，但不仅所有这些内存副本也会擦除您的缓存，而且内存副本本身也会变得非常昂贵。如果您的问题是填充了很大一部分内存（我们不总是这样吗？），比如说 1GB，并且您必须在改进后移动 20% 的内存以使事情再次连续，那就是 0.2 GB（读取 + 写入) / ~20 GB/s ~ 20 ms 与以 ~100ns 每个 ~ 1.5 ms 重新加载（例如）16k 缓存线相比。无论如何，您的缓存在洗牌后都会被丢弃。如果您知道您将很少进行细化/取消细化，这可能仍然值得做。

但实际上，天体物理流体动力学中的大多数自适应网格代码（我对代码非常了解）只是维护一个块列表及其元数据，而不用担心它们的连续性。当然是 YMMV。我的建议是——在花太多时间制作完美的数据结构之前——首先测试两个元素的操作，两次；第一个，按顺序排列元素并计算它们 1-2，第二个，以“错误”的顺序执行操作，2-1，并多次计时两次计算。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T04:18:10.833

对于每个单元格，将要在其中查找单元格数据的偏移量存储在一个连续数组中。这种偏移映射非常有效并且被广泛使用。您可以重新排序单元格以在遍历中重用缓存。当单元格的顺序或数量发生变化时，创建一个新数组并进行插值，然后丢弃旧数组。这种存储对于外部分析要好得多，因为可以在不参考网格的情况下管理 Krylov 方法中的内积和 Runge-Kutta 方法中的阶段等操作。它还需要每个向量的最小内存（例如，在 Krylov 基础和时间积分中）。******

# javascript - Javascript TRUE 和“true”为什么有人使用字符串而不是布尔值？

> ID：11413032
> 
> 赞同：5
> 
> 时间：2012-07-10T12:11:16.757
> 
> 标签：javascript, string, boolean

我在一些 javascript 代码中看到人们这样写：

```
var myVar = "true";

//...

if(myVar == "true") {
     //...
}else{
     //...
} 
```

为什么人们不使用 TRUE 或 FALSE？据我所知，布尔类型对于浏览器来说是显而易见的。

或者只是一个糟糕的代码......并尽量不要以这种方式编写。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-10T12:13:37.113

这只是糟糕的代码。尽量不要这样写。

这种代码对于可维护性来说太可怕了。`==`(而不是`===`) 和as`true`字符串。

[PS：除此之外，`"true" == true // false`。对于`===`争论，这仅仅是因为`true == 1 // true`和很多其他人看起来像这样的东西。]

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-10T12:13:57.527

你不应该这样做，除非你真的期望一个包含`true`出于某种原因的字符串:)。但即使在这种情况下，使用[严格相等](https://stackoverflow.com/questions/359494/javascript-vs-does-it-matter-which-equal-operator-i-use)( `===`) 也是正确的选择。

在您展示的代码示例中，这简直是一种糟糕的代码编写方式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T12:14:04.460

正如你所说，这只是糟糕的代码。

一个“真正的”开发者从不写`if (condition == true)`，而只是`if (condition)`

也可以写`if (true == condition)`。这称为 Yoda 样式，旨在防止在您错误地写`=`而不是`==`.

# oauth - 使用 OAuth 通过 google-chrome-extension 登录我的网页

> ID：11413035
> 
> 赞同：0
> 
> 时间：2012-07-10T12:11:24.917
> 
> 标签：oauth, google-chrome-extension

我有两个方面分开工作的情况

1.  使用 OAuth 注册/登录用户的网页（并显示他的帐户数据）
2.  用户通过 OAuth 进行身份验证的 Chrome 扩展程序（还没有涉及我的网页）

所以我不知道如何连接扩展程序来查看用户网页数据。请参阅下图以更好地理解。

![将网页数据同步到 chrome 扩展](../Images/efc251e966e0ed25b06a51776035c86d.png)

有什么可能的方法让它工作？

**更新：** 一个想法是：

1.  在他们的网页帐户中为每个用户提供密钥
2.  在他们授权扩展请求这个密钥之后
3.  成功后，通过我自己编写的 API 获取数据

它可以工作，是吗？也许您可以提供一些改进或完全不同的想法？

# android - Android Google Map - 如何显示匹配位置的所有地址？

> ID：11413036
> 
> 赞同：0
> 
> 时间：2012-07-10T12:11:25.777
> 
> 标签：android, android-maps

我有一个表单，用户将在其中输入他的地址，但我想为地址创建这样的小部件，以便每当用户输入他的地址时，所有类似的位置都将列在建议框中，用户可以选择他的位置。

我在谷歌地图导航应用程序中看到的类似功能。你能告诉我如何创建这样的功能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T18:39:22.233

如果您正在谈论匹配街道地址的地点，这应该有效：

1.  使用反向地理编码将其转换为（纬度，经度）对，[Android本身](http://developer.android.com/reference/android/location/Geocoder.html)和[Google API](https://developers.google.com/maps/documentation/geocoding/)都提供此服务；

2.  使用[Google Places API](https://developers.google.com/places/documentation/)使用这对坐标获取附近的地点

我有一个项目实际上做了类似的工作，虽然由于某些原因它不是公开的，但我可以向你保证这种方式是可行的。

希望能帮助到你。

# jquery - 如果使用表单，则重定向有效，但如果从 javascript 调用则无效

> ID：11413037
> 
> 赞同：0
> 
> 时间：2012-07-10T12:11:32.197
> 
> 标签：jquery, redirect

PHP代码是：

```
<?php

// Inialize session
session_start();

// Include database connection settings
include('config.inc');

// Retrieve username and password from database according to user's input
$sql ="SELECT * FROM user WHERE (email = '" . mysql_real_escape_string($_POST['username']) . "') and (password = '" . mysql_real_escape_string(md5($_POST['password'])) . "')";

$login = mysql_query($sql);

// Check username and password match
if (mysql_num_rows($login) == 1) {
    // Set username session variable
    $_SESSION['username'] = $_POST['username'];
    // Jump to secured page
    header('Location: http://localhost/site/client/index.php');
}
else {
    // Jump to login page
    header('Location: http://localhost/site/acces-client/index.php');
}

?> 
```

**这有效：**

以下表单可以成功让用户登录并重定向：

```
<table border="0">
<form method="POST" action="loginproc.php">
<tr><td>Email:</td><td>:</td><td><input type="text" name="username" size="30"></td></tr>
<tr><td>Mot de passe:</td><td>:</td><td><input type="password" name="password" size="30"></td></tr>
<tr><td>&nbsp;</td><td>&nbsp;</td><td><input type="submit" value="Envoyer"></td></tr>
</form>
</table> 
```

**这不起作用：** “不起作用”是指没有重定向。尽管调用了正确的 URL (http://localhost/site/client/index.php)。

```
$.post("http://localhost/site/loginproc.php", {username: email, password: motdepasse})
    .success(function(result3){
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T12:22:08.303

要使重定向起作用，您需要以下内容：

```
$.post("http://localhost/site/loginproc.php", {username: email, password: motdepasse})
    .success(function(result3){
        // won't reach here, since the php script never returns a 200 OK
    })
    .error(function(jqXHR, textStatus, errorThrown) {
        if(jqXHR.status == 302 || jqXHR.status == 301) {
            // 301 or 302 means redirected (perm, temp respectively)
            window.location.href = jqXHR.getResponseHeader('Location');
        }
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T12:49:46.950

以下作品：

```
$.post("http://localhost/site/acces-client/loginproc.php", {username: email, password: motdepasse})
        .success(function(jqXHR, textStatus, errorThrown) {
        window.location = 'http://localhost/site/client/index.php';
    })
}); 
```

# architecture - 如何使用 Kohana v3.1 组织复杂的 Web 应用程序？

> ID：11413040
> 
> 赞同：0
> 
> 时间：2012-07-10T12:11:35.007
> 
> 标签：architecture, kohana, code-organization

我们编写了一个非常复杂的 Web 应用程序，它具有以下要求：

*   它有一个 API。不同版本的 API 可能表现不同。一段时间以来，我们必须支持旧版本的 API。
*   它有一个网络客户端。Web 客户端使用 AJAX 来获取各种数据。说 99% XHR 请求与 API 请求相同。因此，应该为 API 共享支持这些 XHR 请求的源代码。但同样是不同的，例如登录 api 应该在 web 的情况下使用 cookie 响应，在 api 的情况下使用 JSON 响应。
*   有多种类型的客户端，例如 iPhone、iPad、Android 手机、平板电脑、浏览器扩展等。行为可能会因发出请求的平台而异。

我正在考虑的组织这些东西的一种方法是将 Kohana HMVC 级联样式扩展到更高级别。例如：

```
src/
htdocs/
v1/
    device_group_phone/
        device_iphone/
            controllers/
            views/
        device_android/
            controllers/
            views/
        device_default/
            conrollers/
            views/
    device_group_tablet/
        device_ipad/
            controllers/
            views/
        device_default/
            conrollers/
            views/
    device_group_default/
        controllers/
        views/
        models/        
v2/
    ...
    ...
    ...
modules/
system/ 
```

应为请求提供服务的方式是：

```
 - Go to proper version.
 - if there is a controller/view device(x),
     then load it.
   else, if there exists a controller/view for device_group(x)/device_default, 
     then load it.
   else if there exists a controller/view for device_group_default
     then load it. 
```

*   第一个问题，有没有比这更好的方法来组织这段代码？
*   第二个问题，如果没有，如何在 Kohana 中做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T14:19:00.097

为什么不使用现有的 Kohana Cascade 文件系统？您的组是**模块**，只需`Kohana::modules()`根据请求属性添加您需要的模块（通过）。因此，如果您需要处理 android 设备，模块列表将是这样的：

*   v1/device_group_phone/device_android
*   v2/device_group_phone/device_android
*   v1/device_group_phone/device_default
*   v2/device_group_phone/device_default
*   v1/device_group_default
*   v2/device_group_default

# mysql - Mysql LOAD DATA INFILE - 输入数据意外截断

> ID：11413041
> 
> 赞同：0
> 
> 时间：2012-07-10T12:11:34.963
> 
> 标签：mysql, load, etl, mysqlimport

我正在尝试将数据加载到表中（显然？）。我的表如下所示：

```
CREATE TABLE IF NOT EXISTS `condensed` (
  `id` bigint(20) NOT NULL,
  `src` enum('C_X','C_AH','C_AO','C_B','H_X','H_AH','H_AO','H_B') NOT NULL,
  `hash` int(11) default NULL,
  `ihash` int(11) default NULL,
  `last_updated` datetime default NULL,
  PRIMARY KEY  (`id`,`src`),
  UNIQUE KEY `covering` (`id`,`src`,`hash`)
) ENGINE=MyISAM DEFAULT CHARSET=ascii; 
```

我的数据文件如下所示：

```
320115816,'C_X',692983698,854142703,20120216220954
320124536,'C_X',588472049,1059436251,20100527232845
320120196,'C_X',452117509,855369958,20101118105505
... 
```

但是当我使用加载它时

```
LOAD DATA INFILE '/path/to/data.csv' 
IGNORE
INTO TABLE `condensed` 
(id, src, hash, ihash, last_updated); 
```

它只加载前两列（hash、ihash 和 last_updated 为空）。

```
320115816,'C_X',NULL,NULL,NULL
320124536,'C_X',NULL,NULL,NULL
320120196,'C_X',NULL,NULL,NULL
... 
```

我确实收到了很多警告（大概是因为 mysql 正在丢弃输入集中的 3 列并分配默认值）

```
Query OK, 20 rows affected, 100 warnings (0.00 sec)
Records: 20  Deleted: 0  Skipped: 0  Warnings: 100 
```

（我打算加载几百万条记录 - 而不仅仅是 20 条）

我使用 mysqlimport 遇到了同样的问题。

从 LOAD DATA 语句中省略显式字段列表（数据库中的字段和顺序与文件中的相同）会导致相同的结果。

MySQL 版本是 5.0.22，输入文件中没有不可打印的字符。

帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T12:39:59.460

如果您使用的是 Windows，只需对 Thilo 的答案进行一些改进。

```
LOAD DATA INFILE '/path/to/data.csv' IGNORE 
INTO TABLE `condensed` 
FIELDS TERMINATED BY ','
OPTIONALLY ENCLOSED BY '\''
LINES TERMINATED BY '\r\n' --Windows right line terminator
(id, src, hash, ihash, last_updated) 
```

它对我有用。它解决了我在 Windows 上的所有截断问题。也看看这个： http: [//forums.mysql.com/read.php?79,76131,76871](http://forums.mysql.com/read.php?79,76131,76871)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T08:43:01.960

从来没有设法解决这个问题。我最终编写了一个 php 脚本来将数据映射到数据库中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-06-26T13:48:57.493

我在 IBM 大型机上创建的 CSV 文件遇到了类似的问题，该文件在加载之前已移动到 Windows 文件服务器。除了最后一行，我在所有行上都收到了截断警告。大型机文件看起来不错。添加 '\r\n' 清除了问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-12-02T22:37:41.760

值得注意的是，如果 MySQL 抱怨的字段恰好是表中的最后一个，那么您可能需要修复 FIELDS TERMINATED BY。在 Windows 上，我必须告诉它 \n 而不是 \r\n。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-10T12:37:42.657

我认为只有 enum 字段的引号会混淆导入。尝试这个：

```
LOAD DATA INFILE '/path/to/data.csv' IGNORE 
INTO TABLE `condensed` 
FIELDS TERMINATED BY ','
OPTIONALLY ENCLOSED BY '\''
(id, src, hash, ihash, last_updated) 
```

# c - 使用大量 C 代码块会导致性能下降吗？

> ID：11413042
> 
> 赞同：1
> 
> 时间：2012-07-10T12:11:44.193
> 
> 标签：c, macros, block

我想按照以下方式定义一个宏：

```
#define MYCheckedCall(stmnt) do {         \
    status_t status = (stmnt);            \
    if (MYFail(status)) {                 \
        MYLog("Statement failed!");       \
    }                                     \
} while (0) 
```

每隔几次调用就在整个应用程序中使用它。与到处重复代码相比，它的性能特征是什么？（即只定义 status_t 一次，没有额外的 {} 范围）

需要注意的几点：

*   这会在堆栈中添加一个框架（以存储`status_t`变量），因此我对 perf 感到好奇。
*   status_t 是`typedef int status_t`或类似的东西。
*   这将用于整个库的一半代码。

我知道这有点过早的优化，但只是想知道它，因为它似乎应该是一个微不足道的决定？

* * *

代码现在看起来的示例（没有宏）：

```
status_t status = 0;
status = call1();
if (MYFail(status)) MYLog("call1 failed!");

status = call2();
if (MYFail(status)) MYLog("call2 failed!"); 
```

我希望使用宏的示例：

```
MYCheckedCall( call1() );
MYCheckedCall( call2() ); 
```

如果我只是 C 菜鸟并且有更好的模式/方式来实现这种功能，我也很想知道它。

我在 Mac OS X 10.7 上使用 clang/llvm-gcc。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-10T12:16:01.723

假设`status_t`是整数类型，我希望开销为零`status`每次存储在寄存器中或最坏情况下存储在同一个堆栈槽中的开销为零；编译器不会费心调整堆栈，因为它可以保留函数入口所需的最大堆栈空间并重用相同的堆栈槽。

与往常一样，如果您有兴趣，您应该检查汇编器输出以确认这是编译器所做的。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-10T12:17:19.623

过早的优化不应该是一个担心。此外，代码大小通常也不是性能的可靠指标（认为重复一百万次的三行循环将比具有一千条指令的程序花费大约一千倍的时间）。所以，以后再考虑优化。

在您的情况下，我认为没有区别，因为预处理器将您的所有宏调用替换为您为宏创建的代码。所以，基本上你在谈论相同的代码（检查[这个定义](http://en.wikipedia.org/wiki/C_preprocessor#Macro_definition_and_expansion)）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T12:49:13.940

我根本不会担心这个特定结构的性能。如果稍后分析证明这是一个瓶颈，那么您可以对其进行优化。而不是宏，我会使用一个函数。一旦您想扩展宏，它很快就会成为维护的噩梦。

```
void MYCheckedCall (status_t status, const char *fail_message)
{
    if (MYFail(status))
    {
        MYLog(fail_message);
    }
}

MYCheckedCall(call1(), "call1 failed!");
MYCheckedCall(call2(), "call2 failed!"); 
```

甚至可能将其重命名为 MYStatusCheck，因为这是函数/宏实际所做的。

# shell - 如何正确转义字符串以在 shell 中测试？

> ID：11413044
> 
> 赞同：0
> 
> 时间：2012-07-10T12:11:46.920
> 
> 标签：shell, busybox

我有以下功能：

```
testit()
{
[ "$1" == "OK" ] && echo "good" || echo "bad"
} 
```

但它没有按预期工作。我可以这样称呼它：

```
testit 'OK' #good
testit 'abc' #bad 
```

但是当我用以下方式调用它时：

```
testit '(' 
```

它失败了：“sh：预期关闭paren”。我已经引用了要测试的字符串，那么为什么它的行为就像没有引号一样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T12:25:19.127

这很可能是您的 shell 实现中的错误。我已经在最新的 CentOS 上测试了你的代码，它运行良好。

```
testit '('
bad

 sh -version
GNU bash, version 4.1.2(1)-release (x86_64-redhat-linux-gnu)
Copyright (C) 2009 Free Software Foundation, Inc.
License GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>

This is free software; you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T14:51:00.903

这是一个丑陋的解决方法：

```
if [ "x$1" = "xOK" ]; ... 
```

# ios - 可以在两个开发者帐户下配置单个 iOS 设备吗

> ID：11413046
> 
> 赞同：2
> 
> 时间：2012-07-10T12:11:54.167
> 
> 标签：ios, provisioning-profile

我在 Apple 有两个开发者帐户。通过我工作的公司的个人开发者帐户和公司帐户。

我希望能够使用个人帐户部署我自己编写的应用程序，并使用公司帐户将应用程序部署到**同一个 iPad**上- 可以吗？

配置是否将 iOS 设备绑定到特定的开发人员帐户？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T12:14:01.787

> 配置是否将 iOS 设备绑定到特定的开发人员帐户？

不，它没有。

来自[Apple 文档](http://developer.apple.com/library/ios/#DOCUMENTATION/ToolsLanguages/Conceptual/DevPortalGuide/CreatingandDownloadingDevelopmentProvisioningProfiles/CreatingandDownloadingDevelopmentProvisioningProfiles.html)：

> 开发配置文件将开发人员和设备唯一地与开发团队联系起来。配置文件有效期为一年。一个设备可以添加到多个配置文件中。

# c# - 加密 web.config 中的密码字符串

> ID：11413048
> 
> 赞同：3
> 
> 时间：2012-07-10T12:11:56.863
> 
> 标签：c#, encryption, configuration-files

如何加密 web.config 中的密码字符串？

```
<system.net>
    <mailSettings>
      <smtp deliveryMethod="Network">
        <network host="smtp.gmail.com" userName="guess@gmail.com" password="test" port="587" />
      </smtp>
    </mailSettings>
</system.net> 
```

正确的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T12:14:58.347

您最好对文件的整个部分进行加密，因为为此内置了工具，并且在读取配置文件时会自动解密（因此无需更改代码）。这[在 MSDN 上有完整描述](http://msdn.microsoft.com/en-us/library/zhhddkxy.aspx)，并使用该`aspnet_regiis.exe`工具。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T12:16:21.077

检查这个 Scott gu 博客：[**加密 ASP.NET 2.0 中的 Web.Config 值**](http://weblogs.asp.net/scottgu/archive/2006/01/09/434893.aspx)

[**加密自定义配置部分**](http://odetocode.com/blogs/scott/archive/2006/01/08/encrypting-custom-configuration-sections.aspx)

```
<configSections>
   <section 
      name="sampleSection" 
      type="System.Configuration.SingleTagSectionHandler" 
   />
</configSections>

<MySecrets
   FavoriteMusic="Disco" 
   FavoriteLanguage="COBOL" 
   DreamJob="Dancing in the opening ceremonies of the Olympics" 
/> 
```

加密我的秘密

```
aspnet_regiis -pef MySecrets 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-03-24T11:18:40.693

根据[大卫 M 的回答](https://stackoverflow.com/a/11413095/909882)：

```
aspnet_regiis.exe -pe "system.net/mailSettings/smtp" -app "/myapp" 
```

请注意 aspnet_regiis 区分大小写，因此请确保将 mailSettings 中的“S”大写。

# javascript - 隐藏具有 th 和 colspan 的 tr

> ID：11413055
> 
> 赞同：0
> 
> 时间：2012-07-10T12:12:22.903
> 
> 标签：javascript, jquery

我正在尝试更改“table tr”的背景，如果它有一个“colpan”并且它包含“th”，但下面的这个不起作用。

```
$("#mytable tr").contains('th').attr('colspan').hide(); 
```

你能帮我吗？'

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-10T12:14:24.727

尝试：

```
$('#mytable tr').filter(
    function(){
        return $(this).has('th[colspan]').length;
    }).hide(); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/dJPvX/1/)。

编辑添加`.length`到过滤器，因为找到一个空数组算作找到一些东西，在 jQuery ......叹息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T12:14:27.517

试试这个。

```
$("#mytable th[colspan]").parent().hide() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T12:15:10.360

试试这个代码：

```
$('th[colspan]').parents('tr').hide(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-10T12:38:26.563

给你先生：

$('#mytable > tbody > tr> th[colspan]').hide();

这将隐藏所有**具有**colspan**属性**的**mytable**。

 ****请不要忘记投票。

:)****

# java - 视图和模型之间的关系

> ID：11413069
> 
> 赞同：0
> 
> 时间：2012-07-10T12:13:09.807
> 
> 标签：java, model-view-controller

在 MVC 模式中，如果我有两个不同的视图，我必须有两个不同的模型吗？视图和模型之间是否存在一对一的关系？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T12:17:32.200

不，当然不。您可能使用相同的模型，但有一个视图显示模型的简历，另一个显示模型的完整详细信息，第三个视图以非常适合智能手机的形式显示它。

这是 MVC 模式的优点和核心原则之一：控制器构建模型，并委托给适当的视图来显示模型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T12:24:03.217

**MVC（Model View Controller）是一种设计模式**，是基于**Do one thing and do it well的原则...**

**单个模型可以与 N 个视图一起使用……这就是 MVC 的专长。**

**模型**包含业务逻辑和数据

**视图**是用来向用户显示结果的。

**控制器**是执行操作的对象

Java中的Swing基于MVC。也称为**PLAF**（可插拔外观和感觉）。

模型与视图分离的 Java 程序可以很容易地与不同的视图一起使用。

例如：一个写得很好并与视图部分分开的业务逻辑，可以在 Swing 和 JSP 中使用以显示输出......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T12:19:12.950

不，这不是强制性的。模型可以与视图具有一对多的关系。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T12:20:35.320

您可以使用单个模型和不同的视图来呈现模型。

您可能有一个名为**User**的模型类和一个用于**列出**用户的视图，另一个用于**插入**新用户，另一个用于**更新**用户。

干杯!

# c# - 我如何知道我的 Windows 服务何时不工作

> ID：11413074
> 
> 赞同：1
> 
> 时间：2012-07-10T12:13:19.057
> 
> 标签：c#, windows-services

我有一个 Windows 服务，我想知道它什么时候不工作，不是每隔 xx 分钟左右，而是什么时候停止

我有这个方法

```
 public string ServiceStatus()
          {
                switch (_service.Status)
                {
                     case ServiceControllerStatus.Running:
                          return "Running";
                     case ServiceControllerStatus.Stopped:
                          return "Stopped";
                     case ServiceControllerStatus.Paused:
                          return "Paused";
                     case ServiceControllerStatus.StopPending:
                          return "Stopping";
                     case ServiceControllerStatus.StartPending:
                          return "Starting";
                     default:
                          return "Status Changing";
                }

          } 
```

对不起，我的英语不好

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T12:23:50.220

当服务停止时，会调用服务对应的 OnStop 方法。在此函数中，您可以写入一些事件日志，或将消息发送到消息队列。

需要知道服务是否正在运行的代码，该代码必须轮询此共享源以了解服务何时停止。

也就是说，如果您能详细说明您的问题，我们可以为您提供更好的帮助。例如，关于服务停止需要通知的代码是什么？如果它是一个 Web 应用程序，则该服务可以在其 OnStop 期间进行 http 调用。

一般来说，最好尽快让 OnStop 退出。如果 OnStop 中的代码花费的时间过长，Windows 可能会声明服务无响应并导致错误关闭。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T12:25:01.863

捕获停止等事件。例如，要知道您何时被“停止”：

```
protected override void OnStop()
{
  // Let yourself know the service has been stopped
} 
```

查看[ServiceBase](http://msdn.microsoft.com/en-us/library/system.serviceprocess.servicebase.aspx)了解更多信息。

# sql-server - 如何在 sql compact 数据库中导入 sql 脚本？

> ID：11413075
> 
> 赞同：0
> 
> 时间：2012-07-10T12:13:26.187
> 
> 标签：sql-server, database, sql-server-ce

我有一个 SQL 服务器数据库。我想在 sql 精简版中使用相同的数据库。其实我一直在寻找它，发现有类似 sql scripting 的东西。（任务-> 生成脚本）所以我创建了一个脚本文件（script.sql），但我不知道如何在 sql compact 中导入这个脚本。目的是拥有一个 .sdf 数据库并能够通过 SQL Server Compact 管理数据库。

我之前测试过primeworks（DataPort Wizard）之类的软件，但它没有给出结果，因为我的数据库太大了。

非常感谢任何通过使用脚本文件或其他方式将 SQL 数据库（.mdf）转换为 SQL Compact（.sdf）的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T12:29:16.773

1) 数据门户向导是最好的工具。由于您有一个非常大的数据库，因此您可以以小单位进行转换。就像前一样：使用任务->生成脚本->表生成脚本->存储过程等等。不要一次性转换所有内容。

让我知道这是否对您有帮助。否则我们会想到别的东西。

供参考： http: [//www.primeworks-mobile.com/Products/DataPortWizard.html](http://www.primeworks-mobile.com/Products/DataPortWizard.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T12:24:51.383

右键单击**数据库**>>**任务**>>**生成脚本**>>**下一步**>>**选择整个数据库和所有数据库对象**>>**下一步** >>**将脚本保存到特定位置**>>**下一步**>>**下一步**

现在在 SQl 编辑器中打开保存脚本文件 全选并单击`!Execute` 按钮

# c# - 在 app.config 中组合多个跟踪源过滤器

> ID：11413077
> 
> 赞同：2
> 
> 时间：2012-07-10T12:13:36.483
> 
> 标签：c#, logging, app-config, .net, tracesource

我想在我的应用程序中配置一个 FileTraceListeners，它会忽略“详细”级别的消息，但会记录“信息”级别及更高级别以及“开始”和“停止”事件。

一切都在 app.config 文件中配置。但是，我找不到组合这些不同跟踪级别的正确语法。 [这里解释了过滤器的语法](http://msdn.microsoft.com/en-us/library/ms229326.aspx)。

对“信息”使用单个过滤器将正确过滤掉所有非“信息”、“警告”、“错误”或“关键”的内容。但是我也想包括“开始”和“停止”事件。

我尝试使用 2 个过滤器：

```
<filter type="System.Diagnostics.EventTypeFilter" initializeData="Information"/>
<filter type="System.Diagnostics.EventTypeFilter" initializeData="ActivityTracing"/> 
```

我尝试结合 initializeDate

用逗号： `initializeData="Information,ActivityTracing"`

或分号 `initializeData="Information;ActivityTracing"`

一切都会导致语法错误。

如何在 app.config 中组合这两个过滤器？

（我正在使用本机 .net 3.5 日志库，此时不希望更改为 log4net 或其他框架。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-11-25T09:17:32.960

我的代码如下所示：

```
<filter type="System.Diagnostics.EventTypeFilter"   initializeData="Warning,ActivityTracing"/> 
```

及其作品。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-15T15:58:02.053

我没有尝试使用，`<filter>`但最近设置了类似的东西，并且通过使用`<switches>`and`<sources>`元素成功了。我是这样做的：

```
 <system.diagnostics>
   <trace autoflush="true" indentsize="2" />
   <sources>
     <source name="SyncService" switchName="infoactivity">
       <listeners>
         <clear />
         <add name="file" />
       </listeners>
     </source>
   </sources>
   <switches>
     <add name="none" value="Off" />
     <add name="infoactivity" value="Information, ActivityTracing" />
     <...>
   </switches>
   <sharedListeners>
     <add name="file" type="System.Diagnostics.TextWriterTraceListener" 
          initializeData="sync.log" />
   </sharedListeners>
 </system.diagnostics> 
```

只需将`switchName`值更改为定义的开关之一即可获得适当的日志记录级别。

该代码使用了一个封装在 LogEvent 智能枚举类中的单个静态 TraceSource（我想我曾经在 Jon Skeet 的答案之一中找到了一个示例）。

```
public class LogEvent {
  public static readonly LogEvent SyncStart = new LogEvent(1, 
    "Sync Service started on {0}", TraceEventType.Start);
  public static readonly LogEvent SyncStop = new LogEvent(99, 
    "Sync Service stopped on {0}", TraceEventType.Stop);
  public static readonly LogEvent SyncError = new LogEvent(501, 
    "\r\n=============\r\n{0}\r\n==============\r\n", TraceEventType.Error);
  // etc

  private readonly int id;
  private readonly string format;
  private readonly TraceEventType type;
  private static readonly TraceSource trace = new TraceSource("SyncService");

  private LogEvent(int id, string format, TraceEventType type)
  {
    this.id = id;
    this.format = format;
    this.type = type;
  }

  public void Log(params object[] data)
  {
    var message = String.Format(format, data);
    trace.TraceEvent(type, id, message);
  }
} 
```

在服务代码中，我大量使用了日志语句

```
LogEvent.SyncStart.Log(DateTime.Now);
LogEvent.SyncError.Log("What the??? -- " + e.Message);
LogEvent.SyncStop.Log(DateTime.Now); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T12:41:45.010

它在这里说它们可以按位组合：[MSDN](http://msdn.microsoft.com/en-us/library/system.diagnostics.sourcelevels%28v=vs.90%29)。

你试过`initializeData="Information|ActivityTracing"`吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-08T16:06:48.843

我有同样的问题。我最终尝试为我想要的 TraceEventType 值的按位组合输入十进制值。有效。就我而言，我希望将“关键”、“错误”、“信息”和“警告”发送给一位听众。我将值设置为 1 | 2 | 8 | 4 = 15。我有另一个监听器，我只想要 Verbose，所以我将值设置为 16。然后我将源开关设置为 16 | 15 = 31。

示例（片段）：

```
<filter type="System.Diagnostics.TextWriterTraceListener" initializeData="15"/>

<switches>
    <add name="sourceSwitch" value="31"/>
</switches> 
```

谢谢，尼克

# objective-c - UIToolbar 中的 UISlider -> 无法获取 slider.value 并对其进行处理。iOS SDK

> ID：11413079
> 
> 赞同：1
> 
> 时间：2012-07-10T12:13:37.193
> 
> 标签：objective-c, ios, uitoolbar, uislider

我正在尝试将 UISlider 放入我的 UIToolbar 并从中获取价值并进行处理。我还希望能够通过其他方法更改slider.value。所以，我自己为 UISlider 设置了它（不是在 UIToolBar 上），一切正常。然后，当我将它放入 UIToolBar 时，该值停止与它之间的发送（每当它发生变化时我都会对其进行 NSLogging，并且我不断将 0 返回给我）。这是我的代码的相关部分 - 有人有什么想法吗？

```
- (void)setupToolBarAndSlider {
    CGRect frame = CGRectMake(0.0, 0.0, 200.0, 30.0);
    UISlider *slider = [[UISlider alloc] initWithFrame:frame];
    [slider addTarget:self action:@selector(sliderValueChanged) forControlEvents:UIControlEventValueChanged];
    [slider setBackgroundColor:[UIColor clearColor]];
    slider.minimumValue = 0;
    slider.maximumValue = 8;
    slider.continuous = YES;
    slider.value = questionNumberForArray;
    //Change slider for UIToolbar
    UIBarButtonItem *skipQuestionSlider = [[UIBarButtonItem alloc] initWithCustomView:slider];
    // Set the width of aSlider
    [skipQuestionSlider setWidth:400.0];
    //Set up UIToolBar with Slider in it.
    UIToolbar *toolBar;
    CGRect rect2 = CGRectMake(0, toolBar.frame.origin.y , self.view.frame.size.width , 44);
    toolBar = [[UIToolbar alloc]initWithFrame:rect2];
    toolBar.barStyle = UIBarStyleBlackTranslucent;
    [toolBar setItems:[NSArray arrayWithObjects:skipQuestionSlider, nil]];
    [self.view addSubview:toolBar];
}
- (void)sliderValueChanged {
    NSInteger roundedSliderNumber = round(skipQuestionSlider.value);
    NSLog(@"Slider Value = %d", roundedSliderNumber);
} 
```

山姆

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T14:04:26.443

UIBarButtonItem （在您的情况下，skipQuestionSlider）没有 value 属性，它只是包含该项目。您需要引用您放入 UIBarButtonItem 的项目。

`NSInteger roundedSliderNumber = round(slider.value);`

# c++ - Eclipse 3.7 无法解析 C++ 编辑器中的类型

> ID：11413080
> 
> 赞同：7
> 
> 时间：2012-07-10T12:13:43.447
> 
> 标签：c++, eclipse, ide, indexer

我最近从 Eclipse 3.6 更改为 Eclipse 3.7 ，我在 Ubuntu 11.04 中用于 C++ 开发。

使用 3.6 版时，我没有遇到什么大麻烦，只是索引器总是有一些问题。现在在 3.7 版中，它开始将未解决的类型标记为错误。由于索引器似乎更不喜欢我，我的 Eclipse 显然不知道类似`uint16_t`or的类型`size_t`。

与代码编辑器中显示的错误相反，我的编译器在编译代码和解析所有符号和类型方面没有问题，所以这似乎是 IDE 本身的问题。

有什么方法可以避免这种行为，因为所有的红色下划线使我的代码越来越不可读......？

**更新：**

好的，通过一些研究和丹尼斯的回答，我发现我需要添加一些路径 `Project Properties/ C/C++ General/ Paths and Symbols`

因为我正在为 PowerPC 而不是 I32 目标构建，所以我不能只添加`/usr/include`. 相反，我需要添加

`/usr/powerpc-linux-gnu/libc/usr/include`

对于所有标准标题（如`stdint.h`）。我还需要：

`/usr/lib/gcc/powerpc-linux-gnu/4.5.1/include`

对于`stdarg.h`.

现在几乎所有的错误都消失了。唯一仍然困扰我的功能是`printf`来自 header `stdio.h`。我查了一下，头文件本身位于包含的路径中。我仍然收到一个错误，上面写着`Function printf could not be resolved`。我想再次指出，这些只是 Eclipse 显示的错误 - 编译本身工作正常。

所以这实际上引发了3个问题：

1.  在项目属性中，该`Paths and Symbols`部分与该部分的包含路径相一致`C++ Build/Settings/C++ Includes`。这意味着在其中一个部分中添加/删除路径会直接影响其他部分的条目。由于`C++ Includes`直接与编译器相一致，我想知道为什么编译器可以正确编译（并找到标头），即使它们没有作为路径传递给他？是否有某种我不知道的 GCC 使用的标准路径？

2.  为什么他`printf`在日食中找不到？包含头文件`stdio.h`，它还包含声明`printf`- 那么为什么 Eclipse 代码编辑器告诉我它无法解析呢？

3.  为什么头文件分得这么多？我知道如果我正在为另一个 traget（例如 PowerPC）构建我需要其他头文件 - 但是为什么 GNU GCC 将这些头文件分隔在不同的目录中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T13:19:36.040

常见类型的红色下划线通常是由于包含路径中没有标准库引起的。查看项目的包含...它们在项目属性中。确保您的 C++ 包含的条目与您正在使用的编译器的 C++ 标准库文件夹相匹配。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-24T17:48:33.477

在遇到这个问题并且搜索显示两个堆栈溢出问题遇到相同的问题之后，我想我会提交我如何修复它，因为它让我非常恼火以至于无法进行实际调查。

我正在运行 Fedora，令人讨厌的是，它在 /usr/include/linux.... 中有一个 stddef.h 文件，它实际上是空的。因此，即使我在包含路径中有编译器的 stddef.h，索引器实际上也在解析另一个空文件。所以需要做的是：

**使用编译器特定的包含路径（在我的情况下是 /usr/lib/gcc/x86_64-redhat-linux/4.7.2/include/）为您的路径和符号列表添加前缀**，以避免解析其他空的 stddef.h。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-14T16:08:29.157

我正在使用带有 ARM 编译器（arm-none-eabi，4.4.1）的 Eclipse（Mars.1 Release 4.5.1，Build id：20150924-1200）。我和你有完全一样的问题。我以前的路径是：

> ```
> D:\test\CodeSourcery\Sourcery G++ Lite\lib\gcc\arm-none-eabi\4.4.1\include 
> ```

然后我在编译器目录中发现了另一个包含目录（后缀：'fixed'）：

> ```
> D:\test\CodeSourcery\Sourcery G++ Lite\lib\gcc\arm-none-eabi\4.4.1\include-fixed 
> ```

这解决了我关于类型错误检测的所有错误（例如 uint16_t）。

# java - Thread 和 Runnable 的 Type 参数是什么意思？

> ID：11413088
> 
> 赞同：-1
> 
> 时间：2012-07-10T12:14:33.073
> 
> 标签：java

`ThreadFactory`从界面看下面的代码

```
 public Thread<T> newThread(Runnable<T> runnable); 
```

类型参数在这里传达什么？我的意思是 Collection 是有道理的，因为 T 指定了可以进入 Collection 的对象类型，但是 Runnable 或 Thread 是什么意思？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T12:26:46.600

在[ThreadFactory.newThread(Runnable)](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ThreadFactory.html#newThread%28java.lang.Runnable%29)中没有泛型类型，Runnable 或 Thread 也不是泛型接口/类。原件一定有误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T12:25:03.963

您正在创建的 Thread 类，它必须是某个其他类的子类，它不能从 Thread 类扩展。这是因为 Java 不允许一个类从多个类继承。这就是为什么 Runnable 接口来实现线程。

为了更好地理解，只需看一下[this1](http://www.go4expert.com/forums/showthread.php?t=4202)和[this2这两个链接](https://stackoverflow.com/questions/5853167/runnable-with-a-parameter)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T12:27:44.803

它看起来不像[Runnable](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/7-b147/java/lang/Runnable.java#Runnable)，它是用于 Runnable 接口的。也许您对[Callable](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Callable.html)感到困惑。这里泛型类型将是返回的类型。

# grails - 在grails中会话到期后使用ajax显示登录表单

> ID：11413096
> 
> 赞同：0
> 
> 时间：2012-07-10T12:14:59.213
> 
> 标签：grails

我有一个用户列表显示在一个表中，其**会话**在 20 分钟后过期，但过期后它不会在不刷新的情况下进入登录页面，我想显示一个弹出窗口以显示登录表单，登录后将让我继续相同的网址。我正在研究*grails*；有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T05:13:28.243

我自己做了，这是它的 js 代码“gracefulSession.js”，并在你要嵌入 html 代码的页面上调用这个 javascript。

函数检查会话状态（）{

```
var lStorage = getLocalStorage();
if(lStorage){
    //lStorage.setItem('poleTime',new Date());
    var poleTime = lStorage.getItem("poleTime");
    var parsedTime;
    try{
        parsedTime = new Date(poleTime);
    }catch(e){
    }

    //alert(new Date()-parsedTime)
    //alert(new Date())
    //alert(parsedTime) 
```

//3900000 = 1H5M

```
 if(parsedTime && (new Date()-parsedTime)<3900000){
        //alert('NCATCH'+parsedTime);
    }else{
        //alert('POINT');
        poleSessionStatus();
    }
} 
```

}

函数 setlatestPoleTIme(){

```
//alert("SETTING POLE TIME");
var lStorage = getLocalStorage();
if(lStorage){
    lStorage.setItem('poleTime',new Date());
} 
```

}

函数 setCheckSessionTimer(){

```
var lStorage = getLocalStorage();
var isLoggedOut = false;
if(lStorage){
    if(lStorage.getItem('isLoggedOut')=='true'){
        isLoggedOut = true;
    }
}

//console.log('checkingIfLoggedOut');

if(!isLoggedOut){

    setTimeout ( "setCheckSessionTimer();", 5000);
    //console.log("NOPT LO");
    $('#LoggedoutMessage').hide();
    checkSessionStatus();
}else{

    setTimeout ( "setCheckSessionTimer();", 5000);
    //console.log("KO");
    //alert("You're Logged Out from  other tab");
    $('#LoggedoutMessage').show();

} 
```

}

函数注销（）{

```
//alert("LOGGIN OUT")
var lStorage = getLocalStorage();
if(lStorage){
    lStorage.setItem('isLoggedOut','true');
} 
```

}

函数resetLoggedOutFLag(){

```
var lStorage = getLocalStorage();
if(lStorage){
    lStorage.removeItem('isLoggedOut');
} 
```

}

函数 getLocalStorage(){

```
var storage,fail,   uid;
try {
    uid = new Date;
    (storage = window.localStorage).setItem(uid, uid);
    fail = storage.getItem(uid) != uid;
    storage.removeItem(uid);
    fail && (storage = false);
} catch(e) {}
return storage 
```

}

现在，要嵌入的 HTML 代码，

```
<div id="LoggedoutMessage" style="display:none;position:absolute;background:black;height: 200%;width:100%;top: 0;z-index: 10000;opacity: 0.9;">
    <div id="login_box" style="position:fixed;left:38%;top:30%; padding:10px; width: 365px;margin: 0 auto;border: 0px solid #CCC;margin-top: 35px;height: 150px;background: white; border-radius:3px;">
        <div id="login_title">
            <h1>You have been logged out.</h1>
        </div>
        <div id="reLogin">
            <p>Please login to continue.</p>
            <g:link controller="dashBoard" action="index" target="_blank" onclick="logout();">Login</g:link>
        </div>
    </div>
</div> 
```

最后，在您保留 html 的位置，将此 javascript 代码保留在嵌入脚本标记的顶部：

功能极会话状态（）{

```
 jQuery.ajax({
            type:'POST',
            data:'',
            url:'<g:createLink action="ajaxCheckSession" controller="dashBoard"/>',
            success:function(data,textStatus){
                //setTimeout ( "checkSession();", 5000);
            },
            error:function(XMLHttpRequest,textStatus,errorThrown){
                $('#LoggedoutMessage').show();

            },
            complete:function(XMLHttpRequest,textStatus){
                $.unblockUI();
            }});
    } 
```

# android - 如何使用 Apache POI 在 android 中显示 ppt？

> ID：11413097
> 
> 赞同：1
> 
> 时间：2012-07-10T12:15:04.947
> 
> 标签：android, powerpoint, apache-poi

我正在尝试在 android 中显示 PPT 文件。我从 Apache POI 开始，因为我还没有找到任何免费的开源 jar。我首先将 ppt 幻灯片转换为引用此链接的图像[Export PowerPoint slides into java.awt.Graphics2D](http://poi.apache.org/slideshow/how-to-shapes.html#Render)

现在，这是在 Java 中。我找不到 Dimension、BufferedImage、Graphics2D 类。我在构建路径设置中导入了 poi-scratchpad-3.8-20120326.jar。我想我错过了其他一些罐子。有人会指出必须包含哪些其他罐子，还是有任何其他方法可以在android中完成这项工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T06:33:56.997

你找不到 Graphics2D 其他类支持，因为 android 不支持 java 的 awt 包。您必须使用 apache poi 获取所有图像。

# mysql - mybatis mapper 出现奇怪的错误

> ID：11413105
> 
> 赞同：0
> 
> 时间：2012-07-10T12:15:22.020
> 
> 标签：mysql, mybatis

我在 myBatis 映射器中编写了一个简单的选择：

```
<select id="listAllOrders" parameterType="java.util.HashMap" resultMap="commonMaps.detailedOrderResultMap">

    select

    <include refid="commonSql.fragmentOrderFields" />,
    <include refid="commonSql.fragmentSummaryPriceInfoFields" />

    from graorder order 
          left outer join grasummarypriceinfo summarypriceinfo on order.totalPrice_id = summarypriceinfo.id

    <if test="userGroupId != null">
        where order.userGroupId = #{userGroupId}
    </if>

    order by order_lastUpdated desc

    <if test="limit != null">
        limit #{limit}
    </if>

</select> 
```

运行此查询时的抱怨是：

```
 ### Error querying database.  Cause: com.mysql.jdbc.exceptions.jdbc4.MySQLSyntax
ErrorException: You have an error in your SQL syntax; check the manual that corr
esponds to your MySQL server version for the right syntax to use near 'left oute
r join grasummarypriceinfo summarypriceinfo on order.totalPrice_id = su' at line
 33 
```

我简直气馁。我的选择中看不到任何错误...

你有什么线索吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T02:53:43.043

您正在使用 SQL 关键字`order`作为表别名。这会导致 MySQL 出错。例如，我刚刚在我的一张表上尝试了这个查询：

```
mysql> select order.film_id, order.title from film order 
       where order.film_id > 100 limit 4; 
```

并得到同样的错误：

`ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'where order.film_id > 100 limit 4' at line 1`

# php - Masonry jquery - 对结果不满意

> ID：11413108
> 
> 赞同：2
> 
> 时间：2012-07-10T12:15:26.083
> 
> 标签：php, jquery, css, jquery-masonry

我正在发现 Masonry 并尝试将其用于我的网站。最终目标是拥有像 500px.com 或类似的东西一样流畅的东西。到目前为止，我已经玩过 Masonry 并尝试遵循该论坛的教程和建议，这非常有帮助！- 谢谢

现在这就是我得到的：[http ://www.thejunglemurmurs.com/tags3.php](http://www.thejunglemurmurs.com/tags3.php) ://www.thejunglemurmurs.com/tags3.php 但不幸的是它不如教程好，我有点失望......我期待更好地填充容器，现在我看到很多洞。

这是我的代码：

```
<html>
<head>
<style type="text/css">
#container {
width: 1000px;
border: 1px solid black;
}
.masonryImage {
  float: left;
  background: #BBBBBB;
  border-radius: 5px;
  margin:5px;
  padding:5px;
  width:180px;
}

.col1{width:180px;}
.col2{width:280px;}
.col3{width:380px;}
.col4{width:480px;}
.col1 img{max-width:180px;}
.col2 img{max-width:280px;}
.col3 img{max-width:380px;}
.col4 img{max-width:480px;}   }
</style>
</head>
<body>
<div id="container">
    <?
    $i=0;
// pics is filled with the number of the picture from SQL
    while (isset($pics[$i])){
       $pic = $pics[$i];
       $j = $view[$i];
       echo "<div class=\"masonryImage col$j\"><img src=\"http://www.thejunglemurmurs.com/photos/$pic.jpg\" alt=\"\"></div>";
       $i++;
    }
    ?>
</div>
<script src="http://www.thejunglemurmurs.com/js/jquery.1.7.1.min.js"></script>
<script src="http://www.thejunglemurmurs.com/js/masonry/jquery.masonry.min.js">   </script>
<script>
var $container = $('#container');
$container.imagesLoaded( function(){
$container.masonry({
    itemSelector : '.masonryImage'
});
});
</script>
</body>
</html> 
```

我想知道我在这里是否遗漏了什么，或者是否有一些准则可以正确填充容器将图片（方形图片，列之间的比例......）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T10:15:36.620

您的网格需要在 Masonary 中设置为固定大小，并且您的元素需要被控制。

查看 500px 并看到高度都设置为 500px 高度（这就是我认为它称为 500px 的原因..）

所以每行是 500px .. 但有些图片是 250px 的一半大小，所以它们很合适。我看了你的例子，所有的图片都有不同的尺寸——所以它非常努力地安排它，但网格到处都是。

```
 var gridSize = 500;
 widgets.masonry({
        itemSelector: '.Widget',
        columnWidth: GridSize
    }); 
```

然后你必须确保你的 DIV 不大于 500 或 500 的倍数，即。125px,250px,500px,750px ...然后它会很好地填充。显然，它可以是您需要的任何尺寸，但工程只能由您决定，根据我的经验，它有点棘手......但一旦它起作用，它就很棒。

这是一个很棒的插件，我认为如果存在差距，还可以[选择](http://masonry.desandro.com/docs/options.html)强制进行主动排序或自动调整大小。

# jquery - jQuery 表单验证和 Ajax 提交的问题

> ID：11413111
> 
> 赞同：0
> 
> 时间：2012-07-10T12:15:35.163
> 
> 标签：jquery, ajax, forms, validation, submit

我已经使用 jQuery 创建了一个动态表单，它有两个部分，一旦第一部分正确完成，第二部分加载而不刷新页面。

我的问题是，当第二部分完成时，我需要执行验证，显然要确保没有不正确的数据发送到服务器。发生的情况是，验证在首次单击提交按钮时起作用，但即使在不修复表单输入字段中的数据的情况下，如果我再次单击提交按钮时提交了不正确的数据？

我在网上搜索了答案并尝试了一些不同的方法：

我尝试将第二个提交方法更改为：

```
$('infoform').submit(function() {
// .. stuff 
```

});

但这没有用，也有人建议我尝试：

```
$('#submit_second').submit(function(evt){
evt.preventDefault();
... 
```

});

但这也不起作用，只是阻止了验证完全工作？

我想要的显然是让验证继续检查错误，直到输入的数据是正确的，一旦数据不再有错误，然后使用 ajax 调用发送数据？

表格的代码是：

```
 <form id="infoform" name="infoform" action="#" method="post">

        <div id="first_step">

                <!--<h1>WANT A FREE<br />SOCIAL MEDIA<br />AUDIT?</h1>-->
                <div class="formtext-img"></div>

                <div class="form">

                    <label for="username">Facebook or Twitter page address:</label>
                    <input type="text" name="url" id="url" value="http://" />                       

                </div><!-- clearfix --><div class="clear"></div><!-- /clearfix -->

                    <input class="submit" type="submit" name="submit_first" id="submit_first" value="" />
        </div><!--end of first step-->

        <div id="second_step">

                <div class="form">

                    <div id="nameInput">
                    <label for="yourname">Your Full Name. </label>
                    <!-- clearfix --><div class="clear"></div><!-- /clearfix -->
                    <input type="text" name="yourname" id="yourname" placeholder="Your name" /> 
                    </div>
                    <!-- clearfix --><div class="clear"></div><!-- /clearfix -->
                    <div id="emailInput">                   
                    <label for="email">Your email address.</label>
                    <input type="text" name="email" id="email" placeholder="Email address" />
                    </div>
                    <!-- clearfix --><div class="clear"></div><!-- /clearfix -->
                    <div id="phoneInput">
                    <label for="phone">Your contact number. </label>
                    <!-- clearfix --><div class="clear"></div><!-- /clearfix -->
                    <input type="text" name="phone" id="phone" placeholder="contact number" />  
                    </div>

                </div>      <!-- clearfix --><div class="clear"></div><!-- /clearfix -->

                    <!--<input class="back" type="button" value="" />-->

                    <input class="send submit" type="submit" name="submit_second" id="submit_second" value="" />

        </div><!--end of second step-->

    </form> 
```

这是我的 jQuery，我尝试将两个“submit_second”函数合并为一个，但这阻止了单击第二个提交按钮时发生的任何事情！

```
$('#submit_second').click(function(){

    //remove classes
    $('#second_step input').removeClass('error').removeClass('valid');

    var emailPattern = /^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/;
    var phonePattern = /^\+?[0-9]{0,15}$/ ;  
    var fields = $('#second_step input[type=text]');
    var error = 0;
    fields.each(function(){
        var value = $(this).val();
        if( value.length<1 || value==field_values[$(this).attr('id')] || ( $(this).attr('id')=='email' && !emailPattern.test(value) )  ) {
            $(this).addClass('error');
            $(this).effect("shake", { times:3 }, 50);

            error++;
        } else {
            $(this).addClass('valid');
        }
        if( value.length<1 || value==field_values[$(this).attr('id')] || ( $(this).attr('id')=='phone' && !phonePattern.test(value) )  ) {
            $(this).addClass('error');
            $(this).effect("shake", { times:3 }, 50);

            error++;
        } else {
            $(this).addClass('valid');
        }

 });
 $('#submit_second').click(function(){

    url =$("input#url").val();
        yourname =$("input#yourname").val();
        email =$("input#email").val();
        phone =$("input#phone").val();

        //send information to server
        var dataString = 'url='+ url + '&yourname=' + yourname + '&email=' + email + '&phone=' + phone;  

        //alert (dataString);
        $.ajax({  
            type: "POST",  
            url: "#",  
            data: "url="+url+"&yourname="+yourname+"&email="+email+'&phone=' + phone,
            cache: false,
            success: function(data) {  
                console.log("form submitted");
                alert(dataString);
            }
        });  
    return false;

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T12:31:39.617

你有一个提交按钮和一个提交事件不是更合乎逻辑吗？然后提交函数将运行验证，并根据其结果将提交或不提交表单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T12:46:22.043

好的，所以在大量修改代码并多次尝试相同的事情之后，我终于让它完全按照我想要的方式工作了！

我已经将 Ajax 调用与验证检查一起放回了一种方法中，并找出了我出错的地方......语法错误！在 Ajax 调用提交数据之前，我忘记关闭验证检查的括号！我的错！我对此很陌生，所以我很高兴终于让它工作了！

```
 $('#submit_second').click(function(){

    //remove classes
    $('#second_step input').removeClass('error').removeClass('valid');

    var emailPattern = /^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/;
    var phonePattern = /^\+?[0-9]{0,15}$/ ; 
    var fields = $('#second_step input[type=text]');
    var error = 0;
    fields.each(function(){

        var value = $(this).val();
        if( value.length<1 /*|| value==field_values[$(this).attr('id')]*/ || ( $(this).attr('id')=='email' && !emailPattern.test(value) )  ) {
            $(this).addClass('error');
            $(this).effect("shake", { times:3 }, 50);

            error++;
        } else {
            $(this).addClass('valid');
        }
        if( value.length<1 || value==field_values[$(this).attr('id')] || ( $(this).attr('id')=='phone' && !phonePattern.test(value) )  ) {
            $(this).addClass('error');
            $(this).effect("shake", { times:3 }, 50);
            console.log("running");
            error++;
        } else {
            $(this).addClass('valid');
        }
    });

    if(error==0)    {   
    url =$("input#url").val();
        yourname =$("input#yourname").val();
        email =$("input#email").val();
        phone =$("input#phone").val();

        //send information to server
        var dataString = 'url='+ url + '&yourname=' + yourname + '&email=' + email + '&phone=' + phone;  

        //alert (dataString);
        $.ajax({  
            type: "POST",  
            url: "http://clients.socialnetworkingsolutions.com/infobox/contact/",  
            data: "url="+url+"&yourname="+yourname+"&email="+email+'&phone=' + phone,
            cache: false,
            success: function(data) {  
                console.log("form submitted");
                alert(dataString);
            }
        });  
    return false;

    }

 }); 
```

# php - json_encode 运行时警告“无效的 UTF-8 序列”

> ID：11413116
> 
> 赞同：4
> 
> 时间：2012-07-10T12:15:48.253
> 
> 标签：php, json

我从数据库中检索一个 mysqli-resultset，来自一个 utf-8 编码的表，然后插入到一个数组中：

```
$json = array();

$query = "select artikel_titel from tblArtikel";
if($result = mysqli_query($link, $query))
{
    while($line = mysqli_fetch_array($result, MYSQLI_NUM)) {
    array_push($json, $line);
}
echo json_encode($json); 
```

该数组已正确构建，[您可以在此处看到它 在](http://onezeromany.com/php/getArticles.php) 页面底部您可以看到由 json_encode 创建的错误。我怎样才能解决这个问题？

```
Warning: json_encode(): Invalid UTF-8 sequence in argument in /customers/6/0/6/onezeromany.com/httpd.www/php/getArticles.php on line 13 Warning: json_encode(): Invalid UTF-8 sequence in argument in /customers/6/0/6/onezeromany.com/httpd.www/php/getArticles.php on line 13 Warning: json_encode(): Invalid UTF-8 sequence in argument in /customers/6/0/6/onezeromany.com/httpd.www/php/getArticles.php on line 13 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-10T12:26:11.233

您的数据中*确实*有无效的 UTF-8 序列；显然您的数据库结果在 ISO-8859-1 中。根据[文档，](http://bg2.php.net/manual/en/function.json-encode.php)**仅适用**`json_encode`于UTF-8 数据。您必须确保您的数据采用 UTF-8 格式，并且您的数据库连接也使用 UTF-8 格式；或者，您可以使用将结果转换为 UTF-8，然后再将它们提供给.**[`iconv()`](http://bg2.php.net/manual/en/function.iconv.php)`json_encode`**

 *** * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-03-05T00:41:31.453

我遇到了同样的问题，在 mysqli connect 语句解决了问题之后使用了[mysqli_set_charset 。](http://php.net/manual/en/mysqli.set-charset.php)

```
$con = mysqli_connect('localhost', 'my_user', 'my_password', 'test');
mysqli_set_charset($con, 'utf8'); 
```

希望能帮助到你！**

# javascript - 用于永久链接的集合中所有模型的 Backbone.js 唯一属性名称

> ID：11413117
> 
> 赞同：2
> 
> 时间：2012-07-10T12:15:54.990
> 
> 标签：javascript, backbone.js, underscore.js

我想确保在创建新模型时特定属性在集合中是唯一的，以便我最终可以将此属性用作永久链接。

我有一个列表集合和列表模型。（咖啡脚本）

```
class App.Models.List extends Backbone.Model
  defaults:
    name: "My New List"

class App.Collections.ListSet extends Backbone.Model
  model: App.Models.List 
```

将新模型添加到 ListSet 时，如果已经存在具有该名称的模型，我想在名称属性的末尾添加一个自动递增的数字。例如`My New List 1`，如果模型与`My New List`.

我不希望它突兀并显示错误，而只是自动修复问题。我对添加递增整数背后的逻辑感到满意，但我需要说明在何处放置代码以进行更改。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T18:51:47.547

这可能对您有用：

```
App.Models.List = Backbone.Model.extend({
    initialize: function(attrs) {
        this.set(attrs);
        this.set({originalName: attrs.name});

        var count = yourCollection.reduce(function(count,model){
            return count + (model.get('originalName') === this.get('originalName') ? 1 : 0);
        },0,this);

        if(count > 0) {
            this.set({name: this.get('name') + ' ' + count});
        }
    }
}); 
```

这是一个演示：[**jsFiddle DEMO**](http://jsfiddle.net/446hV/3/)

这应该做的是每次初始化模型时，扫描您的集合以查看是否有任何其他模型具有相同`originalName`的 . 如果是这样，您将结果附加到名称属性。

**=== 更新 ===**

我现在意识到最好在将模型添加到集合时进行修改，以便将模型与集合分离。这是一个更新的代码片段：

```
App.Models.List = Backbone.Model.extend({
    initialize: function(attrs) {
        this.set({originalName: attrs.name});
    }
});

App.Collections.Lists = Backbone.Collection.extend({
    model: App.Models.List,
    initialize: function() {
        this.on('add',this.resolveNameConflict,this);
    },
    resolveNameConflict: function(model){
        var count = this.reduce(function(c,m){
            return c + (m.get('originalName') === model.get('originalName') ? 1 : 0);
        },0);
        if(count > 1) {
            model.set({name: model.get('originalName') + ' ' + (count-1)});
        }
    }
}); 
```

和一个演示：[**jsFiddle DEMO**](http://jsfiddle.net/446hV/5/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T18:18:19.173

**更新：jackwander 的答案是一个更好的解决方案......** 不过，我将把它保留在这里，因为将我的幼稚解决方案与他的解决方案进行比较和对比很有趣。初学者程序员，你可以通过评估两者来学习一些东西。:-)

* * *

我会试一试。你可能会做这样的事情。基本上，我们添加一个 eventListener，每次您将模型添加到集合时都会进行名称检查。该`nameTracking`数组是一种名称对象的目录，具有唯一的名称片段和跟踪名称根的最后计数的计数器。对于我们的递增应用程序很有用。

```
ListSet = Backbone.Collection.extend({

    initialize: function() {
        this.nameTracking = [];
        this.on('add', this.pushModelName, this);
    },

    pushModelName: function(model, collection) {

        // First, look through current collection for a model with same name
        var duplicate = this.find(function(listModel) {
            return model.get('name') === listModel.get('name');
        });

        // If duplicate exists, we lookup the name and counter in the nameTracking array.
        if (duplicate) {

            var nameObj = _.find(this.nameTracking, function(nameObj) {
                return nameObj.name === model.get('name');
            });

            // We increment the counter so that our added model is appended with the
            // correct, "latest" increment/indicator
            nameObj.count = nameObj.count++;
            model.set('name', model.get('name') + '_' + nameObj.count);

        // Otherwise it doesn't exist so we push the name into our nameTracking array
        } else {    // Not a duplicate, new name

            var modelName = model.get('name');

            this.nameTracking.push({
                'name': modelName,
                'count': 0
            });

        }
    }
}); 
```

需要注意的是，这假设您要添加的模型是一个新模型，而不是已经具有集合中已经存在的模型的 id（不是克隆）。您还需要一些方法来更新`nameTracking[]`on集合初始化，或者`fetch()`因为这假设您从头开始。我不处理模型的删除和更新名称计数器的东西，但根据这个草图，如果你想要这种性质的东西，它应该不难实现。

# php - 从linkedin检索联系人所有连接

> ID：11413121
> 
> 赞同：1
> 
> 时间：2012-07-10T12:16:07.520
> 
> 标签：php, linkedin

使用 PHP API 中的链接，是否可以使用 PHP API 检索我所有连接的联系人（地址）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T12:58:09.473

我不知道你的 api 工作到什么程度，你可以通过 LinkedIn REST 控制台尝试请求：[https ://developer.linkedin.com/rest-console](https://developer.linkedin.com/rest-console)

要获取您的连接地址，您可以使用此请求 url：

```
http://api.linkedin.com/v1/people/~/connections:(first-name,last-name,main-address)
                                  ^     ^             ^         ^           ^                   
                                  |     |              \_ required fields _/
                                  | your connections
                                  |
                        authenticated user (you) 
```

# php - MySQL 和 PHP 使用用户时区

> ID：11413122
> 
> 赞同：2
> 
> 时间：2012-07-10T12:16:10.733
> 
> 标签：php, mysql, timezone

我将时间存储在 MySQL DATETIME 字段中的 UTC 时区中。我想将所有这些（在 PHP 中使用它们时）转换为用户定义的时区。我知道我可以用 php DateTime::setTimezone 来做到这一点，但它需要为每个人都做。

是否有一些全局方法可以告诉 php 来自 mysql 的所有日期时间都是 UTC 并将它们自动转换为用户时区？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T12:17:51.497

当您将它们存储到数据库中时，将表列存储为 unix 时间戳。这些都是UTC。然后只需应用您想要的任何用户指定的偏移量。

这是一个有趣的[StackOverflow 问题](https://stackoverflow.com/questions/178704/are-unix-timestamps-the-best-way-to-store-timestamps)，它可能会对您有所帮助。

您还可以使用[MySQL Unix_Timestamp 函数](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_unix-timestamp)通过在进行比较时生成正确的 int 来轻松查询数据。

编辑：如果您确定每次使用它们时都想转换数据库中的所有日期时间，只需编写一个简单的函数来获取日期时间并为用户添加正确的偏移量，然后只需在每次采摘时调用该函数数据库中的日期时间。像下面的代码：

```
<?php

    // Assuming that $_SESSION['UserOffset'] is storing the user's timezone eg
    // $_SESSION['UserOffset'] = new DateTimeZone("Europe/Prague");

    function convert_time_zone($timeFromDatabase_time)
    {
        $userTime = new DateTime($timeFromDatabase, new DateTimeZone('UTC'));
        $userTime->setTimezone(new DateTimeZone($_SESSION['UserOffset']));
        return $userTime->format('Y-m-d H:i:s');
        // or return $userTime; // if you want to return a DateTime object.
    }

?> 
```

# lua - 从给定的url下载和存储文件到lua中的给定路径

> ID：11413127
> 
> 赞同：4
> 
> 时间：2012-07-10T12:16:20.303
> 
> 标签：lua

我是 lua 新手，但正在开发一个适用于具有给定路径的特定文件的应用程序。现在，我想处理我下载的文件。是否有任何 lua 库或代码行可用于将其下载并存储在我的计算机上？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-10T13:29:21.597

您可以使用 LuaSocket 库及其[`http.request`](http://w3.impa.br/~diego/software/luasocket/http.html#request)函数使用 HTTP 从 URL 下载。

该函数有两种风格：

*   简单调用：`http.request('http://stackoverflow.com')`
*   高级调用：`http.request { url = 'http://stackoverflow.com', ... }`

简单的调用返回 4 个值 - 字符串中 URL 的全部内容、HTTP 响应代码、标头和响应行。[`io`](http://www.lua.org/manual/5.2/manual.html#6.8)然后，您可以使用库将内容保存到文件中。

高级调用允许您设置多个参数，例如 HTTP 方法和标头。一个重要的参数是`sink`。它代表[LTN12 式水槽](http://lua-users.org/wiki/FiltersSourcesAndSinks)。要存储到文件，您可以使用[`sink.file`](http://w3.impa.br/~diego/software/luasocket/ltn12.html#sink.file)：

```
local file = ltn12.sink.file(io.open('stackoverflow', 'w'))
http.request {
    url = 'http://stackoverflow.com',
    sink = file,
} 
```

# java - 正则表达式在字符串中查找价格

> ID：11413130
> 
> 赞同：1
> 
> 时间：2012-07-10T12:16:24.507
> 
> 标签：java, regex

您好，我正在使用 00003600 或 00013650 形式的退货价格

我想将其转换为 36.00 Euro 或 136.50 Euro 形式的字符串。这可以使用正则表达式来完成吗？

谢谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T12:17:45.257

只需解析字符串，然后除以 100。或者使用 BigDecimal 和缩放。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T12:22:30.703

如果其他答案不够清楚

```
String text = "00003600";
BigDecimal value = new BigDecimal(text).scaleByPowerOfTen(-2);
System.out.println(value); 
```

印刷

```
36.00 
```

或者

```
String text = "00003600";
double value = Double.parseDouble(text) / 100;
System.out.printf("%.2f%n", value); 
```

印刷

```
36.00 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T12:29:22.350

最正确的方法（恕我直言）：

```
String input = "00013650";
BigDecimal value = BigDecimal.valueOf(Long.parseLong(input), 2);
String output = value.toPlainString();
System.out.println(output); 
```

输出：

```
136.5 
```

# c# - 具有多个线程时的 WriteableBitmap 异常

> ID：11413132
> 
> 赞同：0
> 
> 时间：2012-07-10T12:16:32.410
> 
> 标签：c#, multithreading, windows-phone-7, locking, writeablebitmap

我创建了大约 10 个线程来做同样的工作——从 Internet 下载图像。下载完成后会引发这个回调函数：

```
private void DownloadImageWrapper(IRestResponse response, params object[] args)
{
    byte[] imageData = response.RawBytes;
    using (Stream ms = new MemoryStream(imageData))
    {
        WriteableBitmap wbImg = PictureDecoder.DecodeJpeg(ms);

        callback.DynamicInvoke(wbImg, file);
    };
} 
```

根据 WriteableBitmap 抛出异常。我读到那个锁会对此有所帮助，但找不到任何关于我应该锁在那里的“什么”。有人会帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T13:34:29.750

WriteableBitmap 需要在 UI 线程上创建。

您必须将所有照片保存为像素数组（整数或字节），然后在完成后在 UI 线程上创建 WriteableBitmaps。

# php - PHP是否停止寻找一个“或”（||）被满足？

> ID：11413135
> 
> 赞同：3
> 
> 时间：2012-07-10T12:16:43.667
> 
> 标签：php, if-statement

一个简单的问题可以消除对大量`if/else`陈述的需求。

例如，如果我有这样的查询：

```
if ($success1=$db->query('SELECT * FROM `foo`;') || $success2=$db->query('SELECT * FROM `bar`;')) {
   ...
} 
```

它会在第一次查询成功与否时停止检查吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-10T12:19:50.190

你说的这个叫短路。是的 php 使用短路。使用 AND (&&) 如果条件中的第一次检查失败，则永远不会检查第二次。这同样适用于 OR ( || )。如果第一次检查成功，它永远不会查看第二个语句。

验证见下面帖子： [PHP短路懒评估，php.net手册在哪里？](https://stackoverflow.com/questions/3220919/php-short-circuit-lazy-evaluation-where-is-it-in-the-php-net-manual)

一个非常有用的例子是除以零。在第一次检查中确定分母是否为零，然后在第二次检查中进行除法。顺序很重要。如果分母为零，它将跳过第二次检查并且永远不会被零除。

`if($x != 0 && 10/$x > 3)`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-10T12:20:04.337

如果第一个是真的，那么它不需要检查语句中的任何其他内容，所以它会继续。如果没有，代码如下：

`if(isset($var) && $var == 1)`

永远不会工作，因为它会抛出一个未定义的错误。一旦它发现第一个是假的，它就会停止声明的其余部分。

# php - 从具有开关的 php 函数中调用 ajax ($this->method)

> ID：11413137
> 
> 赞同：0
> 
> 时间：2012-07-10T12:16:50.133
> 
> 标签：php, ajax

在 php 文件中创建**XMLrequest**时，其代码如下所示...我使用的是 MVC（模型-视图-控制器结构），这是一个控制器 php 文件。

```
Controller_Institute extends Controller_Default{

function register(){
    try {

        $this->requireLogin();

        switch($this->method){
            case 'GET':
                $content = $this->render('institute_registration_confirm');
                break;
                case 'POST':

$result = mysql_query("SELECT * FROM password WHERE         pass='".mysql_real_escape_string($_POST['pass'])."'");
$num=mysql_num_rows($result);
if($num==2)
{
$content = $this->render('institute_registration');
}
else
{                   
                $content = $this-  >render("message",array('msg'=>'Your password is incorrect'));

}
break;
}                   
                $institute = R::dispense('institute');
                $institute- >import($_POST,'name,latitude,state,longitude,address,phone,year,url');
                $id = R::store($institute);

                }
                catch(exception $e){
        //If there was an error anywhere, go to the error page.
        $content = $this->render('error',array('exception'=>$e));   
    }
            $page = $this->render('default',array('content'=>$content));
            return $page;

} 
```

我正在从函数内部发送**ajax 请求......所以当****ajax**发回请求时，它会被捕获在 switch case 中......然后响应文本变成替换实际文本的函数返回值......任何想法如何防止 xml 响应进入开关盒...？**Institute_registration**是视图文件，我将该文件包含在我的框架中，然后从该文件中触发 ajax 函数以检查密码（启用注册表单）是否正确......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T12:28:32.687

鉴于信息和伪代码有限，我建议设置一个名为 say...“ajax.php”的独立页面，它是独立的，它的返回值不基于请求方法。使用 AJAX 的页面将需要从该页面进行 POST 或 GET，具体取决于。

如果您确定是否通过请求方法返回常规输出与 AJAX 输出，那么您将通过两种方式限制自己。首先是您将无法在您的网页上执行 1 或其他操作（GET 与 POST），而不是两者。另外，第二个，当涉及到 AJAX 时，您将无法运行 GET 和 POST AJAX 请求，是的，您可以使用 AJAX 进行这两种操作：http: [//net.tutsplus.com/tutorials/javascript-ajax /使用 jquery 进行 ajax 调用的 5 种方式/](http://net.tutsplus.com/tutorials/javascript-ajax/5-ways-to-make-ajax-calls-with-jquery/)

# interface - web api XmlMediaTypeFormatter 异常

> ID：11413140
> 
> 赞同：0
> 
> 时间：2012-07-10T12:17:02.737
> 
> 标签：interface, inversion-of-control, asp.net-web-api, xml-formatting

我想使用 IoC / web api 框架的依赖解析器进行解耦。

XmlFormatter 不能序列化接口，...好的。但是，如果我不能返回 xml，IoC 和 DependencyResolver 的目的是什么？

我什至不能这样做：（我的 ApiController 中的方法）

```
public HttpResponseMessage Get()
        {
            IEnumerable<Project> projects = new List<IProject>() { new Project(), new Project() }.Select(p => p as Project);

            HttpResponseMessage response = Request.CreateResponse<IEnumerable<Project>>(HttpStatusCode.OK, projects);

            return response;
        } 
```

我创建了一个 IProject 列表并将它们转换为“项目”。但是在创建响应时，我得到了这个：

> 配置的格式化程序“System.Web.Http.Tracing.Tracers.XmlMediaTypeFormatterTracer”无法写入“WhereSelectListIterator`2”类型的对象。

那是一个 XmlMediaTypeFormatterTracer？我不想跟踪在序列化时引发错误。（顺便说一句：我用自己的 XMLformatter 替换了标准的 XMLformatter。但是“XmlMediaTypeFormatterTracer”引发了异常......信息：我在使用标准格式化程序时遇到了同样的错误）

即使我实现了自己的 xmlformatter，为什么还要调用这个 XmlMediaTypeFormatterTracer？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T07:35:44.713

我的问题解决了

`config.Formatters.XmlFormatter.UseXmlSerializer = false;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T18:05:36.153

您是否在应用程序中启用了跟踪？如果是，则跟踪逻辑将格式化程序包装到其包装跟踪器格式化程序中。

# java - 没有自己的 HTML 元素的 JSF 组件

> ID：11413143
> 
> 赞同：1
> 
> 时间：2012-07-10T12:17:25.490
> 
> 标签：java, jsf-2

我正在寻找一个 JSF 2.0 组件，它只是其他组件的容器，但不生成自己的 HTML 元素。

我的情况是我有一个（已经样式化的）jsf-xhtml 组件页面。现在我需要禁用很多渲染。

```
<ui:component>
    <h:panelGroup layout="block" rendered="#{not empty user.registrations}">...</>
    <h:panelGroup layout="block" rendered="#{not empty user.registrations}">...</>
    <h:panelGroup layout="block" rendered="#{not empty user.registrations}">...</>
    <h:panelGroup layout="block" rendered="#{not empty user.registrations}">...</>
</ui:component> 
```

但我不想指定`rendered="#{not empty user.registrations}"`前面的时间。相反，我想用一些组件包装它，例如：

```
<ui:component>
    <xxxx  rendered="#{not empty user.registrations}">
        <h:panelGroup layout="block">...</>
        <h:panelGroup layout="block">...</>
        <h:panelGroup layout="block">...</>
        <h:panelGroup layout="block">...</>
    </xxxx>
</ui:component> 
```

因为页面已经设置了样式（而且我担心这是以一种脆弱的方式完成的），所以我需要一个`xxxx`不会生成自己的 html 元素的 jsf-component () `div`。这样的 jsf 组件会退出吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T14:30:03.627

如果您使用的是 primefaces，那么您有一个简单的解决方案：

使用`p:outputPanel`.

如果没有，那么您也可以使用`h:panelGroup`. 这没有任何自己的格式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T14:13:17.950

您可以使用

```
<ui:fragment rendered="#{not empty user.registrations}"> 
```

[http://javaserverfaces.java.net/nonav/docs/2.1/vdldocs/facelets/ui/fragment.html](http://javaserverfaces.java.net/nonav/docs/2.1/vdldocs/facelets/ui/fragment.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T12:30:10.487

试试这个：

```
<c:if test="#{not empty user.registrations}">
    <h:panelGroup layout="block">...</>
    <h:panelGroup layout="block">...</>
    <h:panelGroup layout="block">...</>
    <h:panelGroup layout="block">...</>
</c:if> 
```

或者你可以`<h:panelGroup>`用另一个包裹你的 4 `<h:panelGroup>`：

```
<h:panelGroup rendered="#{not empty user.registrations}">
    <h:panelGroup layout="block">...</>
    <h:panelGroup layout="block">...</>
    <h:panelGroup layout="block">...</>
    <h:panelGroup layout="block">...</>
</h:panelGroup> 
```

# javascript - jQuery 1.5.1 Sizzle 'cannot read property nodename' child '>' selector with knockoutjs

> ID：11413145
> 
> 赞同：1
> 
> 时间：2012-07-10T12:17:35.303
> 
> 标签：javascript, jquery, jquery-selectors, knockout.js, sizzle

我正在使用 jQuery 1.5.1 和 Knockoutjs 2.0.0。我的情况有点复杂，但据我了解，这就是正在发生的事情：

我有一些绑定到 Knockoutjs 的元素也有 jQuery.live 绑定。其中一些绑定包含子（父？）选择器“>”。当我删除元素（使用 Knockout）时，我收到此错误：

> 未捕获的类型错误：无法读取 null 的属性“nodeName”

由 jQuery 中的以下代码引发：

```
">": function (checkSet, part) {
  ...    
    for (; i < l; i++) {
      elem = checkSet[i];

      if (elem) {
        var parent = elem.parentNode;
        checkSet[i] = parent.nodeName.toLowerCase() === part ? parent : false;
        //Uncaught TypeError: Cannot read property 'nodeName' of null
      }
    }
 ... 
```

似乎 Knockout 在 jQuery 开始检查实时绑定之前从文档中删除元素，因此当最终检查元素时，它的父元素为空，并引发此错误。

我的问题：

人们会在哪里/如何建议我解决这个问题？我在想这样的事情：

```
var parent = elem.parentNode;
checkSet[i] = parent && parent.nodeName.toLowerCase() === part ? parent : false; 
```

如果父级为空，似乎“>”选择器应该失败，但我可能错了。你们会怎么做？

**更新：**

[JSFiddle 演示了该问题](http://jsfiddle.net/joelhoward/f79Kn/)（尝试删除表格行）：

仅当我将以下选择器之一用于我的 .live 绑定时，才会发生这种情况。在 :not 选择器中只使用一个类会导致错误消失。

```
'.grid:not(.anything, .anythingelse) > tbody > tr'
'.grid:not(.anything, .anythingelse) tbody > tr' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T19:58:45.337

当您将一个类传递给时，错误似乎消失的原因`:not()`是因为它随后成为一个有效的 CSS3 选择器，所以它被传递给`querySelectorAll()`，完全跳过了 Sizzle。有关详细信息，请参阅[此问题](https://stackoverflow.com/questions/10711730/whats-the-difference-in-the-not-selector-between-jquery-and-css)。

我不确定您所看到的行为是否是`>`Sizzle 的错误，如果是，是否已解决（从 jQuery 1.8 开始），但由于 CSS 选择器可以保证与规范一样接近浏览器可以保证，那么我只能建议使用您拥有的解决方法。

# c++ - 使用向量而不是双精度值作为输入时的模板

> ID：11413147
> 
> 赞同：1
> 
> 时间：2012-07-10T12:17:47.060
> 
> 标签：c++, templates, casting, operator-overloading

我正在尝试使用 C++ 模板来实现一个非常简单的事情。我想构建一个通用符号函数，可以处理`sgn(x)`x 可能是`double`或`std::vector<double>`（即返回`std::vector<double>`包含结果）的情况。为了实现这一点，我正在使用模板

```
double f(double x) {
    return (x>=0)?1.0:-1.0;
};

template<typename T>
T F(T x) {
   // ?
}; 
```

我想转换模板并使用`f`if`double`或`for`循环 if `std::vector<double>`。不幸的是，我的函数不使用任何算术运算符，并且条件运算符不能重载。我应该如何进行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T12:20:09.740

这是通过重载而不是模板来解决的。

```
double sign(double x) {
    return x < 0.0 ? -1.0 :
           x > 0.0 ?  1.0 : 0.0;
};

std::vector<double> sign(std::vector<double> const& x) {
    // ?
}; 
```

也就是说，我怀疑一个`sign`函数对向量是否有意义。

顺便说一句，这与问题标题中所称的“算术”与“非算术”函数无关。这种区别在 C++ 中不存在。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-10T12:23:34.230

虽然重载是实现您想要的最佳方式，但它并不是使用 C++ 标准库的真正方式。

如果要将函数应用于容器的所有元素（改变它们或创建新结果），请使用`std::transform`或 `std::for_each`与要使用的函数一起使用。

```
std::vector<double> doubles, results;
std::transform(begin(doubles), end(doubles), std::back_inserter(results), sgn); 
```

这比您当前的方法更好地分离关注点。仅在确实需要时对整个容器进行操作，在所有其他情况下使用迭代器和高阶函数。

# nsoperation - NSOperations 和它们的完成块是否同时运行？

> ID：11413156
> 
> 赞同：5
> 
> 时间：2012-07-10T12:18:11.760
> 
> 标签：nsoperation, nsoperationqueue, afnetworking

我有一堆`NSOperations`添加到`NSOperationQueue`. 操作队列已`maxConcurrentOperationCount`设置为 1，以便`NSOperations`一个接一个地运行。

现在，`completionBlock`我`NSOperation`想`NSOperations`通过调用来取消所有挂起`cancelAllOperations`的`NSOperationQueue`.

这样做安全吗？我可以确定只有在上一个操作的完全执行`start`之后才调用下一个操作的 -method吗？`completionBlock`还是`completionBlock`上一个操作的任务和当前操作的任务同时运行？

我问的原因：我使用 AFNetworking 执行一批，`AFHTTPRequestOperations`并且仅当该批的所有先前请求都成功时才想执行一个请求。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-11T08:04:33.683

我在下面的发现似乎不再正确。我在 iOS 8 和 iOS 9 上重新运行了测试，并且操作的完成块始终与下一个操作同时运行。目前，我没有看到让操作等待前一个完成块完成的方法。

* * *

我刚刚在示例项目中尝试了这种情况。结果如下：

如果`NSOperationQueue`'s设置`maxConcurrentOperationCount`为 1，则队列中的an和下一个会同时运行。`NSOperation``completionBlock``NSOperation`

但是，如果 every`NSOperation`通过调用 链接到其前一个操作`addDependency:`，则操作的执行将等待前一个操作`completionBlock`完成。

所以，如果你想取消`completionBlock`当前操作中的下一个操作，并确保它在它开始之前被取消，你必须`NSOperations`通过调用来设置它们之间的依赖关系`addDependency:`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-07-04T06:44:06.523

NSOperation 仅**基于操作的完成状态**而**不是已完成操作的结果**建立依赖关系。

但是，我遇到的大多数场景都是这样的，操作的执行不仅取决于其他一些操作的完成，还取决于从完成的操作中获得的结果。

我最终做了下面的方法，但仍在探索是否有更好的方法：

1) 操作-A 运行

2) 操作-A 完成并且它的完成块运行

3) 在 OperationA 的完成块中，检查从 Operation-A 获得的结果。

*   如果结果为 X，则创建 Operation-B 并添加到队列中。
*   如果结果为 Y，则创建 Operation-C 并添加到队列中。
*   如果结果为错误，则创建 Operation-D（通常是警报操作）并添加到队列中

因此，这最终成为一系列操作，根据已完成操作的结果动态添加到队列中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-07-04T17:33:14.177

我想出了另一种看似更好的方法来确保仅在满足某些条件（基于先前完成的操作的结果）时才执行操作，否则操作被取消。

这里一个重要的考虑是运行操作的条件检查不应该在操作子类中编码，从而允许操作子类在不同的场景和应用程序中可移植。

解决方案： - 在子类中具有条件块属性，并设置实例化操作的任何条件形式。- 覆盖 NSOperation 子类的“isReady”getter，检查那里的条件，从而确定它是否准备好执行。- 如果[super isReady]为YES，表示依赖操作全部完成，则评估必要条件。- 如果条件检查通过，返回YES。否则，将 isCancelled 设置为 YES 并为 isReady 返回 YES

代码：在接口文件中有block属性：

```
typedef BOOL(^ConditionBlock)(void);

@property (copy) ConditionBlock conditionBlock; 
```

在实现中，覆盖isReady，并取消：

```
@implementation ConditionalOperation

- (BOOL)isReady {
        if([super isReady]) {
            if(self.conditionBlock) {
                if(!self.conditionBlock()) {
                    [self setCancelled:YES];
                }
                return YES;
            } else {
                return YES;
            }
        } else {
            return NO;
        }
    } 
```

# struts2 - 错误未传递回struts jsp

> ID：11413157
> 
> 赞同：0
> 
> 时间：2012-07-10T12:18:33.010
> 
> 标签：struts2

这在一个月前有效，现在我重新加载代码但它不起作用。这是我的 struts 片段

```
 <action name="checkManager" class="CheckAction">
        <result>/pages/check_manager.jsp</result>
    </action>

    <action name="submitFile" class="SubmitFileAction">
        <result name="success">/pages/submit_file.jsp</result>
        <result name="error">/pages/check_manager.jsp</result>
    </action> 
```

所以，第一页是`checkManager`。它有一个调用`submitFile`动作的按钮。触发时，它会检查密码，如果失败，则操作类会发送错误结果。现在一个月前，上面的结果错误会将用户重定向回原始`check_manager.jsp`页面，其中包含最初加载的数据和错误消息。今天，它将用户重定向到原始`check_manager.jsp`页面。没有数据，它就像 servlet 从未被触发，它只是呈现一个空白的 jsp 页面。我检查了源历史记录，这个应用程序没有任何变化。

我不明白为什么这会停止工作，谁能给我一个想法？我必须在大约一个半小时内向客户介绍这个，所以我真的被困在这里了。

请注意，我尝试将错误更改为此

```
<result name="error" type="redirectAction">checkManager</result> 
```

我找回了我的数据，但我丢失了我的错误消息，这不是一件好事。呃，有什么想法吗？

```
if (enteredHash.equals(storedHash)) {
            _log.debug("The password matched");
            UserSession<User> userSession = (UserSession<User>) session
                    .get("user");
            #do logic#
        } else {
            _log.debug("The password didn't match");
            addActionError("The password you entered was incorrect, nothing was sent to the bank.");
            return ActionSupport.ERROR;
        }
        return ActionSupport.SUCCESS; 
```

我的jsp

```
<s:if test="hasActionErrors()">
            <div class="errors">
            <s:actionerror/>
            </div><br>
        </s:if> 
```

再一次，这在一个月前工作得很好。我所做的只是检查那个未被触及的分支并部署它。现在它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T12:53:48.657

一个快速的解决方法可能是将其添加`getCheckList`到`CheckAction`：

```
public Collection<Check> getCheckList() { 
   ActionContext.getContext().getSession().put("checkList", checkList);
   return checkList; 
} 
```

并将其添加到`SubmitFileAction`：

```
public Collection<Check> getCheckList() { 
   return (Collection<Check>) ActionContext.getContext().getSession().get("checkList"); 
} 
```

这不是一个好的永久性解决方案，但应该让你到达你需要的地方！

# php - 获取图像大小错误

> ID：11413159
> 
> 赞同：0
> 
> 时间：2012-07-10T12:18:37.867
> 
> 标签：php, image, getimagesize

我的上传/裁剪功能几乎是我想要的。除了我必须刷新我的页面以显示上传的图像..然后当我使用删除按钮进一步删除我的代码时，我的标题中显示以下 2 个错误。除非我刷新页面，否则上传表单不会再次显示，然后以下错误将从视图中消失，直到我再次删除上传的图像。

这是两个错误，然后是带有标记为粗体的 getimagesize 函数的代码。

```
 Warning: getimagesize(imgs/pic7.jpg) [function.getimagesize]: failed to open stream: No such file or directory in ----- on line 48

    Warning: getimagesize(imgs/pic7.jpg) [function.getimagesize]: failed to open stream: No such file or directory in ------ 42 
```

这是问题的区域，两个错误标记为粗体 -

```
$id=$_SESSION['id'];
$upload_dir = "imgs";               // The directory for the images to be saved in
$upload_path = $upload_dir."/";             // The path to where the image will be saved
$large_image_name = "pic".$id.".jpg";       // New name of the large image
$thumb_image_name = "cropped".$id.".jpg"; 
$max_file = "1148576";                      // Approx 1MB
$max_width = "500";                         // Max width allowed for the large image
$thumb_width = "100";                       // Width of thumbnail image
$thumb_height = "100";                      // Height of thumbnail image

//Image functions
//You do not need to alter these functions
function resizeImage($image,$width,$height,$scale) {
    $newImageWidth = ceil($width * $scale);
    $newImageHeight = ceil($height * $scale);
    $newImage = imagecreatetruecolor($newImageWidth,$newImageHeight);
    $source = imagecreatefromjpeg($image);
    imagecopyresampled($newImage,$source,0,0,0,0,$newImageWidth,$newImageHeight,$width,$height);
    imagejpeg($newImage,$image,90);
    chmod($image, 0777);
    return $image;
}
//You do not need to alter these functions
function resizeThumbnailImage($thumb_image_name, $image, $width, $height, $start_width, $start_height, $scale){
    $newImageWidth = ceil($width * $scale);
    $newImageHeight = ceil($height * $scale);
    $newImage = imagecreatetruecolor($newImageWidth,$newImageHeight);
    $source = imagecreatefromjpeg($image);
    imagecopyresampled($newImage,$source,0,0,$start_width,$start_height,$newImageWidth,$newImageHeight,$width,$height);
    imagejpeg($newImage,$thumb_image_name,90);
    chmod($thumb_image_name, 0777);
    return $thumb_image_name;
}
//You do not need to alter these functions
function getHeight($image) {
    **$sizes = getimagesize($image);**
    $height = $sizes[1];
    return $height;
}
//You do not need to alter these functions
function getWidth($image) {
    **$sizes = getimagesize($image);**
    $width = $sizes[0];
    return $width;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T12:32:01.407

调用`getimagesize($image)`已删除的图像当然会给您错误。`getimagesize($image)`在使用`file_exists($file_path)`函数调用之前检查文件是否存在。

# mysql - Mysql 按日期分组

> ID：11413162
> 
> 赞同：0
> 
> 时间：2012-07-10T12:18:50.300
> 
> 标签：mysql, date, group-by

我有带有 3 列的表，带有日期的 Column1 和 Column2 存储点，这些点只不过是 1 到 9 之间的一些随机数和第 3 列，每个单元格中都有一些唯一的电子邮件地址。

现在我想添加过去 5 天按日期分组的点。也就是说，如果我第一天有 3 行，第二天有 1 行，第 3 天有 3 行，第 4 天和第 5 天有 2 行，我应该得到这 11 行的点总和，按日期分组为 5 行，为期 5 天.

**输入**

**日期**            **点**            **电子邮件**

2012-07-01 5 a@sample.com
2012-07-01 6 b@sample.com
2012-07-01 2 c@sample.com

2012-07-02 5 d@sample.com

2012-07-03 8 e@sample.com
2012-07-03 7 f@sample.com
2012-07-03 1 y@sample.com

2012-07-04 3 x@sample.com
2012-07-04 2 f@sample.com

2012-07-05 3 g@sample.com
2012-07-05 9 b@sample.com

**输出**

**日期**            **点**

2012-07-01 13
2012-07-02 5
2012-07-03 16
2012-07-04 5
2012-07-05 12

请建议我对上述内容进行 MySQL 查询。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T12:23:00.907

```
select `Date`,sum(`Points`) from my_table group by `Date`; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-27T10:55:00.440

```
select `Date`,sum(`Points`) from my_table group by `Date` Limit 5; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-11-28T19:14:34.340

```
select Date,sum(Points) from my_table group by Date; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T12:25:07.480

```
select [Date],SUM(Points)
from myTable1
group by [Date] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-10T12:32:09.573

你可以做：

```
SELECT date, SUM(points) AS points
FROM tbl
WHERE date > CURDATE() - INTERVAL 5 DAY
GROUP BY date 
```

# antlr - antlr 门控谓词

> ID：11413165
> 
> 赞同：1
> 
> 时间：2012-07-10T12:19:03.477
> 
> 标签：antlr, predicate

[这是来自Antlr](https://stackoverflow.com/questions/11400921/antlr-superfluous-predicate-required)的后续问题，需要多余的谓词吗？我以简化的方式陈述了我的问题，但是在那里无法解决。
我有以下语法，当我删除`{true}?=>`谓词时，文本不再被识别。输入字符串是`MODULE main LTLSPEC H {} {} {o} FALSE;`。请注意，尾随`;`未标记为 EOC，而是标记为 IGNORE。当我添加`{true}?=>`到 EOC 规则时`;`，它被标记为 EOC。
我用 antlr-v3.3 和 v3.4 从命令行尝试了这个，没有区别。在此先感谢，感谢您的帮助。

```
grammar NusmvInput;

options {
  language = Java;
}    
@parser::members{
public static void main(String[] args) throws Exception {
    NusmvInputLexer lexer = new NusmvInputLexer(new ANTLRStringStream("MODULE main LTLSPEC H {} {} {o} FALSE;"));
    NusmvInputParser parser = new NusmvInputParser(new CommonTokenStream(lexer));
    parser.specification();
  }
}    
@lexer::members{
    private boolean inLTL = false;
} 

specification : 
     module+ EOF
     ;
module : 
    MODULE module_decl    
    ;

module_decl : 
    NAME parameter_list ;
parameter_list 
    : ( LP (parameter ( COMMA parameter )*)? RP )?
    ;    
parameter
    : (NAME | INTEGER )
    ;    
/**************
*** LEXER
**************/
COMMA
    :{!inLTL}?=> ','
    ; 
OTHER 
    : {!inLTL}?=>( '&' | '|' | 'xor' | 'xnor' | '=' | '!' |
     '<' | '>' | '-' | '+' | '*' | '/' |
      'mod' | '[' | ']' | '?')
      ;     
RCP
      : {!inLTL}?=>'}'
      ;      
LCP
      : {!inLTL}?=>'{'
      ;
LP 
    : {!inLTL}?=>'('
    ;
RP 
    : {!inLTL}?=>')'
    ;   
MODULE
    : {true}?=> 'MODULE' {inLTL = false;}
    ;
LTLSPEC
    : {true}?=> 'LTLSPEC' 
    {inLTL = true; skip(); }
    ;  
EOC 
    : ';' 
    {
        if (inLTL){
            inLTL = false;
            skip();
        }
    }
    ;   
WS 
    : (' ' | '\t' | '\n' | '\r')+ {$channel = HIDDEN;} 
    ;
COMMENT 
    :  '--' .* ('\n' | '\r') {$channel = HIDDEN;} 
    ; 
INTEGER 
    : {!inLTL}?=> ('0'..'9')+
    ;
NAME 
    :{!inLTL}?=> ('A'..'Z' | 'a'..'z') ('a'..'z' | 'A'..'Z' | '0'..'9' | '_' | '$' | '#' | '-')*
    ;
IGNORE
    : {inLTL}?=> . {skip();}
    ; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T15:59:00.580

似乎在 and 之前没有谓词`MODULE`，`LTLSPEC`即使`NAME`这些标记是在`NAME`标记之前定义的，它们也会优先于它们。这是设计使然还是错误，我不知道。

但是，您尝试解决它的方式似乎相当复杂。据我所知，您似乎想忽略（或跳过）以`LTLSPEC`分号开头和结尾的输入。为什么不这样做：

```
specification  : module+ EOF;
module         : MODULE module_decl;
module_decl    : NAME parameter_list;
parameter_list : (LP (parameter ( COMMA parameter )*)? RP)?;    
parameter      : (NAME | INTEGER);    

MODULE  : 'MODULE';
LTLSPEC : 'LTLSPEC' ~';'* ';' {skip();};
COMMA   : ','; 
OTHER   : ( '&' | '|' | 'xor' | 'xnor' | '=' | '!' |
            '<' | '>' | '-' | '+' | '*' | '/' |
           'mod' | '[' | ']' | '?')
        ;     
RCP     : '}';      
LCP     : '{';
LP      : '(';
RP      : ')';   
EOC     : ';';   
WS      : (' ' | '\t' | '\n' | '\r')+ {$channel = HIDDEN;};
COMMENT : '--' .* ('\n' | '\r') {$channel = HIDDEN;}; 
INTEGER : ('0'..'9')+;
NAME    : ('A'..'Z' | 'a'..'z') ('a'..'z' | 'A'..'Z' | '0'..'9' | '_' | '$' | '#' | '-')*; 
```

# mysql - 任何查询/方式可用于在数据库中搜索单词？

> ID：11413170
> 
> 赞同：0
> 
> 时间：2012-07-10T12:19:14.887
> 
> 标签：mysql, database

我是发展中地区的新手。对于我的产品，我需要处理近 100 个表。我觉得在数据库中找到一个可用的单词有风险。是否有任何查询可用于搜索数据库中任何表中可用的单词。如果可能，结果会给出表名。

谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T12:22:44.750

mysql中有一个FULL TEXT搜索选项。但它一次只能在一个表上工作。

要搜索多个表，您需要编写一些动态查询，或者非规范化

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T12:26:44.947

如果你有 phpMyAdmin 是可能的。选择您的数据库，然后选择“搜索”选项卡。您可以选择一个或多个表进行搜索。如果您将字段名称留空，它将在任何字段中搜索。比您可以按表格查看结果。（注：我在 phpMyAdmin v3.2 中测试过）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T10:15:05.627

对于独立解决方案，我建议使用此功能：

```
<?php
function search_all_databases($search_token){
    $db = array(
          'host'     => 'localhost'
         ,'user'     => 'root'
         ,'pass'     => ''
         ,'database' => 'buns'
         ,'prefix'   => ''
         ,'type'     => 'mysqli'
    );

    $mysqli = new mysqli($db['host'], $db['user'], $db['pass'], $db['database']);

    $output = "<table><thead><tr><th> Database Name </th><th> Occurence </th></tr></thead>";

    $sql = "show tables";
    $ret = $mysqli->query($sql);

    if( 0 < $ret->num_rows ){
        $output.= '<tbody>';

        while( $row = $ret->fetch_array() ){
            $output.= '<tr>';
            $sql_search_fields = Array();

            $table  = $row[0];
            $output.= '<td>'.$table.'</td>';

            $sql2 = "SHOW COLUMNS FROM ".$table;
            $ret2 = $mysqli->query($sql2);
            if( 0 < $ret2->num_rows ){
                while( $row2 = $ret2->fetch_array() ){
                    $colum = $row2[0];
                    $sql_search_fields[] = "`".$colum."` like('%".$search_token."%')";
                }

                $ret2->close();
            }

            if( 0 < count( $sql_search_fields ) ){
                $search = "select * from ".$table." where ";
                $search.= implode(" OR ", $sql_search_fields );

                $rs3 = $mysqli->query($search);
                $output.= '<td>'.$rs3->num_rows.'</td>';
            }else{
                $output.= '<td>0</td>';
            }

            if( 0 < $rs3->num_rows ){
                $rs3->close();
            }

            $output.= '</tr>';
        }

        $output.= '</tbody>';
        $ret->close();
    }

    return $output;
}

echo search_all_databases('a'); 
```

这个函数依赖于mysqli，你可以把它改成另外一个数据库方法，比如mysql。

这也将输出一个包含结果的表格。如果您想在另一个位置使用结果，我建议将所有结果放在一个数组中。

# c# - ASP.NET DropDownList SelectedIndex 在第一个元素上没有改变

> ID：11413171
> 
> 赞同：2
> 
> 时间：2012-07-10T12:19:17.567
> 
> 标签：c#, asp.net

我以前觉得我的c#编程还不错，但今天我在认真地质疑我的脑袋，这么小的东西正在打败我……

我正在尝试让 DropDownList 正常运行，但我们今天没有继续。我在 ascx 控件中有一个简单的 DropDownList，它被动态加载到 aspx 页面中

```
<asp:DropDownList ID="ddl_SortBy" runat="server" AutoPostBack="true">             
  <asp:ListItem Value="0">Sort Alphabetically A to Z</asp:ListItem>
  <asp:ListItem Value="1">Sort Alphabetically Z to A</asp:ListItem>
</asp:DropDownList> 
```

和后面的一些代码..

```
 private short SortBy = 0;

    protected void Page_Load(object sender, EventArgs e)
    {
        this.ddl_SortBy.SelectedIndex = -1;
        this.ddl_SortBy.SelectedIndexChanged += new EventHandler(ddl_SortBy_SelectedIndexChanged);

        if (!IsPostBack)
            SearchDirectory();
    }

    public void ddl_SortBy_SelectedIndexChanged(object sender, EventArgs e)
    {
        SortBy = Convert.ToInt16(this.ddl_SortBy.SelectedItem.Value);
        SearchDirectory();
    } 
```

我永远无法获得触发所选索引更改事件的第一项 - 因为未调用 SearchDirectory() 函数。我可以理解，当控件加载第一个项目时可能是这样的情况，因此在选择时，索引实际上并没有改变。

我尝试将所选项目索引设置为-1，并在页面加载时将 ClearSelection() 设置为，但没有运气。

有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-10T12:22:13.573

您总是`SelectedIndex`在每次回发时将 -1 重置为：

```
this.ddl_SortBy.SelectedIndex = -1; 
```

所以把它也放在回发检查中：

```
if (!IsPostBack)
{
    this.ddl_SortBy.SelectedIndex = -1;
    SearchDirectory();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T23:53:13.070

我发现自己同样需要像您期望的那样在 Page_Load 上执行更改事件。问题是我在 ASP.NET 中发现之前将一些 ListItems 设置为 .SelectecIndex 为 0。

因此，如果我放一些类似 this.ddl_SortBy.SelectedIndex = -1 的东西，之后调试器仍然显示 0...所以它永远不会打开 -1 并且永远不会执行更改事件。就像 ASP.NET 在未选择任何 (-1) 时始终将第一个 ListItem 视为选定的一样，因此强制它执行 -1 或 0 从不首先调用更改事件。

再搜索一下：“默认值为 0，即选择列表中的第一项。”

来自[http://msdn.microsoft.com/en-us/library/vstudio/system.web.ui.webcontrols.dropdownlist.selectedindex(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/vstudio/system.web.ui.webcontrols.dropdownlist.selectedindex(v=vs.100).aspx)所以我认为我们必须强制调用类似的事件: ddl_SortBy_SelectedIndexChanged(null, null);

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T12:25:09.867

将事件处理程序分配从 OnLoad 移至 OnInit 并删除 SelectedIndex 行。

```
protected void Page_Init(object sender, EventArgs e)
{
    this.ddl_SortBy.SelectedIndexChanged += new EventHandler(ddl_SortBy_SelectedIndexChanged);
}

protected void Page_Load(object sender, EventArgs e) 
{ 
    if (!IsPostBack) 
        SearchDirectory(); 
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T12:34:44.827

我的母版页视图状态已关闭，这就是它不起作用的原因。虽然这不是我想要允许的。

我的解决方案是使用 Request.Form 恢复到真实的表单提交数据检索。

```
protected void Page_Load(object sender, EventArgs e)
    {
        if (IsPostBack)
            SortBy = Convert.ToInt16(Request.Form[this.ddl_SortBy.UniqueID]);

        // search directory
        SearchDirectory();
    } 
```

现在工作得很好:)
谢谢大家。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-07-10T12:23:08.760

这个简单的解决方法怎么样。将下拉菜单中的第一项设置为：

```
<asp:ListItem Value="-1">(choose how to sort)</asp:ListItem> 
```

这样，选定的索引将更改，并且当用户选择所需的排序顺序时将触发事件。

首先从后面的代码中删除对下拉菜单的额外摆弄。

# sql - ORA-06550 PL/SQL 中的错误

> ID：11413176
> 
> 赞同：0
> 
> 时间：2012-07-10T12:19:30.137
> 
> 标签：sql, plsql

好吧，我正在尝试在 PL/SQL 中运行此脚本。但是我经常遇到错误，我尝试用双引号替换单引号但没有用。

```
ACCEPT p_name PROMPT "Enter Customer Name: "
VARIABLE g_output VARCHAR2(200)
DECLARE
   v_street VARCHAR2(30);
   v_city VARCHAR2(20);
   v_prov VARCHAR2(20);
   v_postal VARCHAR2(10);
BEGIN
   SELECT cstreet, ccity, cprov, cpostal
     INTO v_address,v_city,v_state,v_zip
     FROM customer
    WHERE cname = "&p_name";
   :g_output := "&p_name" || " " ||v_street || " " || v_city;
   :g_output := :g_output " " || v_prov || " " || v_postal;
END;
/
PRINT g_output 
```

错误：

```
Enter Customer Name: Ankur Kaushal
old  10:     WHERE cname = "&p_name";
new  10:     WHERE cname = "Ankur Kaushal";
old  11:    :g_output := "&p_name" || " " ||v_street || " " || v_city;
new  11:    :g_output := "Ankur Kaushal" || " " ||v_street || " " || v_city;
   :g_output := :g_output " " || v_prov || " " || v_postal;
                          *
ERROR at line 12:
ORA-06550: line 12, column 27:
PLS-00103: Encountered the symbol " " when expecting one of the following:
. ( * @ % & = - + ; < / > at in is mod remainder not rem
<an exponent (**)> <> or != or ~= >= <= <> and or like
between || indicator multiset member SUBMULTISET_
The symbol "." was substituted for " " to continue.

Input truncated to 14 characters

G_OUTPUT
-------------------------------------------------------------------------------- 
```

我在这里犯了什么错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T12:28:21.880

倒数第二行不应该是

```
 :g_output := :g_output || ' ' || v_prov || ' ' || v_postal; 
```

?

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T12:38:31.707

Oracle SQL 和 PL/SQL 使用单引号`'`来分隔字符串。双引号`"`用于表示标识符（表名、列名...）。

用单引号替换所有双引号。

另请注意，SQL*Plus 用作用户界面的工具很差。除了让用户手动输入两个单引号（“O''Reilly”）之外，没有办法让您的实际代码使用包含引号（“O'Reilly”）的名称。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-19T09:29:08.297

```
 SELECT cstreet, ccity, cprov, cpostal
 INTO v_address, v_city, v_prov, v_zip 
```

没有声明`v_state`.

# testing - 像 dispatch_async 这样的代码的单元测试。

> ID：11413177
> 
> 赞同：3
> 
> 时间：2012-07-10T12:19:33.900
> 
> 标签：testing, dispatch-async

需要对以下代码进行单元测试，dispatch_async 表示代码不会按应用逻辑顺序执行，请问如何使其及时运行？

谢谢你。

```
 dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_LOW, 0), ^{
        [AdTracker dosomething];
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T12:43:01.040

见[http://www.mikeash.com/pyblog/friday-qa-2011-07-22-writing-unit-tests.html](http://www.mikeash.com/pyblog/friday-qa-2011-07-22-writing-unit-tests.html)

```
+ (BOOL)waitFor2:(finishBlock)block {
NSTimeInterval timeoutInSeconds = 10.0;
NSDate* giveUpDate = [NSDate dateWithTimeIntervalSinceNow:timeoutInSeconds];

while (!block() && ([giveUpDate timeIntervalSinceNow] > 0)) {
    NSDate *stopDate = [NSDate dateWithTimeIntervalSinceNow:1.0];
    [[NSRunLoop currentRunLoop] runUntilDate:stopDate];   // un-blocking.
    DLog(@"+++++  %@", [NSDate date]);
}   

return block(); 
```

}

# java - 如何在 Tomcat 中启用 JMXMP？

> ID：11413178
> 
> 赞同：5
> 
> 时间：2012-07-10T12:19:34.700
> 
> 标签：java, tomcat, jmx, jmxmp, jsr160

[我已经下载了 JMXMP 扩展](https://stackoverflow.com/questions/11412560/where-to-download-jmxmp)并将它们安装在 Tomcat 的 lib 目录中。现在，我怎样才能让它使用它们，即让 Tomcat 接受 JMXMP 连接？

*   Oracle 的示例展示了如何使用代码来完成此操作，为此我必须编写自己的侦听器，我宁愿将其保留作为最后的手段。
*   [Tomcat 的 JMX 侦听](http://tomcat.apache.org/tomcat-6.0-doc/config/listeners.html#JMX_Remote_Lifecycle_Listener_-_org.apache.catalina.mbeans.JmxRemoteLifecycleListener)器似乎不包括 JMXMP 支持。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T15:19:56.707

好吧，我编写了自己的 JMXMP Tomcat 侦听器。随意使用：

```
package webersg.tomcat;

import java.lang.management.ManagementFactory;

import javax.management.remote.JMXConnectorServer;
import javax.management.remote.JMXConnectorServerFactory;
import javax.management.remote.JMXServiceURL;

import org.apache.catalina.Lifecycle;
import org.apache.catalina.LifecycleEvent;
import org.apache.catalina.LifecycleListener;

public class JMXMPLifecycleListener implements LifecycleListener {

    private int port = 5555;

    private JMXConnectorServer cs;

    @Override
    public void lifecycleEvent(LifecycleEvent event) {

        try {

            // START
            if (Lifecycle.START_EVENT == event.getType()) {

                System.out.println("Start JMXMP on port " + port);

                cs = JMXConnectorServerFactory.newJMXConnectorServer(
                        new JMXServiceURL("jmxmp", "0.0.0.0", port),
                        null,
                        ManagementFactory.getPlatformMBeanServer()
                );
                cs.start();

                System.out.println("Started JMXMP");

            }

            // STOP
            else if (Lifecycle.STOP_EVENT == event.getType()) {

                System.out.println("Stop JMXMP");

                cs.stop();
            }

        } catch (Exception e) {
            throw new RuntimeException(e);
        }
    }

} 
```

因此，在这个问题上折腾了一天之后，我现在可以在我的应用程序上使用 VisualVM。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-09-26T09:50:06.707

我基于[Bart von Heukeloms 的回答](https://stackoverflow.com/a/11416578/977985)创建了一个 mvn 项目，并使用所需的 tomcat-catalina 作为提供的依赖项：[jmxmp-lifecycle-listener](https://github.com/Cashlix/jmxmp-lifecycle-listener)

只是为了插入 tomcat 的 server.xml：
`<Listener className="javax.management.remote.extension.JMXMPLifecycleListener" port="5555" />`

我没有足够的声誉，否则我会有将此作为评论发布。

# python - 如何在 wordpress 博客中编写 python 代码？

> ID：11413180
> 
> 赞同：5
> 
> 时间：2012-07-10T12:19:50.473
> 
> 标签：python, wordpress

我想在 wordpress 博客中编写一些 python 代码，但没有保留空格。有人可以告诉我如何在博客中编写我的 python 代码，并保留正确的缩进和样式，因为缩进对于 python 代码非常重要。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-10T12:25:17.467

使用 html**`<code>`**标签。

你也可以试试这个非常好的插件，用于在 WP 中突出显示代码。

[WP-SynHighlight](http://wordpress.org/extend/plugins/wp-synhighlight/)

对于托管在 wordpress.com 上的博客：

[作为此](https://stackoverflow.com/questions/1273647/how-do-i-add-syntax-highlighting-to-a-wordpress-blog-hosted-on-wordpress-com)堆栈帖子的完美答案。

# android - Android 本地替换缓存

> ID：11413181
> 
> 赞同：1
> 
> 时间：2012-07-10T12:19:54.823
> 
> 标签：android, caching, web

在 iPhone 上，可以有一个本地替换缓存，在加载时替换 Web 内容。我做了一些搜索，但我似乎无法在 android 上找到类似的东西？在 android 平台上执行此操作是否有替代方法？

斯特凡

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T17:56:08.053

根据您所针对的 API 级别，[HttpResponseCache](http://developer.android.com/reference/android/net/http/HttpResponseCache.html)可能是您正在寻找的。[这里](http://android-developers.blogspot.ca/2011/09/androids-http-clients.html)有一些背景信息。

# jquery - jQuery Hover 事件，防止函数被完全执行

> ID：11413189
> 
> 赞同：2
> 
> 时间：2012-07-10T12:20:23.103
> 
> 标签：jquery, hover

首先，我觉得这个有点难以解释，因为英语不是我的母语。所以请原谅混乱。

我写了一个小通知功能，它是在表单提交时触发的。正常行为是：

*   用户提交表单
*   音符淡入
*   2 秒延迟
*   笔记淡出

当音符悬停时，它会扩展`css-transition`。从逻辑上讲，它不应该淡出，直到用户折叠它`mouseleave`。`fadeOut`这就是我的问题：只要 div 悬停，我如何防止语句被执行？

我尝试了类似的东西

```
if ($('#notification').hover()){
    return ;
} 
```

但当然，第一条语句已经执行，如下所示：

[http://jsfiddle.net/6DsJb/](http://jsfiddle.net/6DsJb/)

我还尝试了其他一些东西，比如一个单独的脚本，它正在监听`hover`事件，然后调用`$('#notification').show() ;`

两者都不起作用。我知道这是推理中的一个简单错误，但是地狱，我被卡住了。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T12:27:59.653

`fadeIn`调用后`setTimeout`，使用以下功能：

*   如果通知已折叠，请将其隐藏。
*   否则，`.mouseleave`一旦它失去鼠标焦点，就使用它来隐藏它。

IE：

```
$('#notification').fadeIn(500);

setTimeout(function() {
  if (notification_is_collapsed)
    $('#notification').fadeOut(500);
  else
    $('#notification').mouseleave(function() {
      $('#notification').fadeOut(500);
    });
}, 2000); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T12:30:00.720

悬停函数有 2 个参数：鼠标何时进入，鼠标何时退出（[http://api.jquery.com/hover/](http://api.jquery.com/hover/)）

所以你可以做这样的事情：

```
$('#notification').hover(
function() {}, function() {
    $(this).delay(500).fadeOut(500);
}); 
```

这是您的 jsfiddle 更新：http: [//jsfiddle.net/6DsJb/1/](http://jsfiddle.net/6DsJb/1/)

# database - 存储条件以进一步从数据库中选择。设计挑战

> ID：11413190
> 
> 赞同：0
> 
> 时间：2012-07-10T12:20:23.150
> 
> 标签：database, database-design

假设我有一家在线电脑商店，我想添加一个新功能——广告。作为商店的经理，我想制作一个关于特定产品的广告。假设它是这样的：“如果客户已经注册至少 2 个月，并且在购买期间他的订单价值超过 150 美元，或者产品 A 或 B 已经在他的购物车中，那么向他展示这个广告”。

我的问题是如何将这些语句（条件“A或B”、“A和B”、“（A或B）和C”等）存储在数据库中，然后如何选择记录并显示（或不是）想要的广告？

我的一个想法：

```
Adverts
1\. id,
2\. name,
3\. description,
…
4\. criterias_pattern [i.e “(1 OR 5) AND 4”] 
```

第二张表：

```
AdvertsCriterias
1\. id
...
2\. type
3\. value 
```

简而言之：我解析存储在“criterias_pattern”字段中的模式，提取criterias_id，然后检查条件。

它应该可以工作，但它有许多明显的缺点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T12:25:27.323

胡思乱想——

为什么不存储可以进行评估的实际 sql WHERE 子句。至少那时您不需要重新发明自己的语法和解析器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T21:39:50.280

您有两个问题：对条件进行建模，并将它们存储在数据库中。

**建模条件**：如果您可以使用现有的脚本语言模型或类似的东西，可能会更容易。如果不能，您可以对条件进行建模，例如： interface Expression { public T Evaluate(Context context); } 类 OrExpression : 表达式 { Expressionleft; 表达权；} 类 AndExpression : 表达式 { Expressionleft; 表达权；} 类 IfExpression : 表达式 { 表达式条件；表达式然后从句；表达式其他子句；} 类 EqualExpression : 表达式 { 表达式左; 表达权；} 类 ContextVariableValue : 表达式 { }

“如果客户已经注册至少 2 个月，并且在购买期间他的订单价值超过 150 美元，或者产品 A 或 B 已经在他的购物车中，那么向他展示这个广告”</p>

会是这样的：

var clientIsAlreadySignedUpFor2Months = new GreaterThanExpression(new ContextVariableValue("ClientSignedUpLengthInMonths"), new ConstantExpression(2)); var purchaseExceeds150 = new GreaterThanExpression(new ContextVariableValue("PurchaseAmount"),new ConstantExpression(150)); 新的IfExpression（新））

var result = new AndExpression(clientIsAlreadySignedUpFor2Months, purchaseExceeds150, 等等...)

要将其存储在数据库中，您可以将它们序列化为文本等方程式，然后解析它们，或者您可以使用类似的东西

条件 Id 类型 ParametersType Operand1 Operand2 1 GreaterThanExpression Number 2 3 2 ContextVariableValue Number ClientSignedUpLengthInMonths null 3 ConstantExpression Number 2 null

ETC...

我认为您最好的选择是将所有广告及其条件预加载到内存中，并在每次可以显示添加时运行它们...

如果您检测到很多添加具有“相似”条件，那么您可以添加一些逻辑来仅评估这些条件一次，以加快速度等......

# php - 检索 php 虚拟文档名称

> ID：11413191
> 
> 赞同：1
> 
> 时间：2012-07-10T12:20:27.337
> 
> 标签：php

我想检索 ie 的片段：`www.something.com/something2/something3/page1.php?var1=1&var2=2`

究竟是如何`'page1.php'`从上面得到的`$_SERVER`。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T12:23:19.120

```
$path = parse_url('www.something.com/.../page1.php?var1=1&var2=2', PHP_URL_PATH);
echo basename($path); 
```

[http://php.net/parse_url](http://php.net/parse_url)
[http://php.net/basename](http://php.net/basename)

# javascript - 我怎样才能解密这个JS？

> ID：11413194
> 
> 赞同：0
> 
> 时间：2012-07-10T12:20:36.323
> 
> 标签：javascript

我怎样才能解码这个JS？我知道它做了什么（用警报检查它）并且想解密和编辑它。我该怎么做？

这是什么类型的加密？我知道那里有很多解密器，但没有一个能够解密这个。

顺便说一句，我是新手。

```
function xViewState() {
    var a = 0,
        m, v, t, z, x = new Array('9091968376', '8887918192818786347374918784939277359287883421333333338896', '877886888787', '949990793917947998942577939317'),
        l = x.length;
    while (++a <= l) {
        m = x[l - a];
        t = z = '';
        for (v = 0; v < m.length;) {
            t += m.charAt(v++);
            if (t.length == 2) {
                z += String.fromCharCode(parseInt(t) + 25 - l + a);
                t = '';
            }
        }
        x[l - a] = z;
    }
    document.write('<' + x[0] + ' ' + x[4] + '>.' + x[2] + '{' + x[1] + '}</' + x[0] + '>');
}
xViewState(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T12:27:06.380

这不是加密，这是混淆。现在你知道它写的是什么，去掉混淆，只写你想要的......

```
document.write('<style undefined>.yourstylename{position:absolute;top:-9999px}</style>'); 
```

混淆的工作原理是简单地列出所有相关内容的 ASCII 代码，偏移大约 20（每个数组元素不同），表示为 2 位十进制数。这是非常基本的。

因此：

```
"style"
-> 115, 116, 121, 108, 101 (ASCII codes)
-> 90, 91, 96, 83, 76 (offset of 25 in this case) 
```

# python-sphinx - Sphinx Pygments 词法分析器过滤器扩展？

> ID：11413203
> 
> 赞同：5
> 
> 时间：2012-07-10T12:21:27.080
> 
> 标签：python-sphinx, pygments

我有一种类似 Lisp 的语言，我想在 Sphinx 代码片段文档中使用 Pygments 突出显示。我的方法是扩展现有的 CommonLispLexer 以使用 NameHighlightFilter 添加内置名称。但是，它不起作用，所以我必须遗漏一些明显的东西。我在我的 conf.py 中添加了以下内容：

```
def setup(app): 
    from sphinx.highlighting import lexers
    from pygments.lexers import CommonLispLexer
    from pygments.token import Name
    from pygments.filters import NameHighlightFilter
    tl_lexer = CommonLispLexer()
    tl_lexer.add_filter(NameHighlightFilter(
            names=['define-function', 'define-macro', 
                   'define-variable', 'define-constant'],
            tokentype=Name.Builtin,
            ))
    app.add_lexer('tl', tl_lexer)

highlight_language = 'tl' 
```

但是 NameHighlightFilter 没有效果。代码块像 Lisp 一样突出显示，但我的新内置名称没有特殊突出显示。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-11T12:45:10.883

原因是`NameHighlighFilter`唯一转换词法分析器归类为的标记`Token.Name`，但`CommonLispLexer`几乎所有内容都归类为`Name.Variable`。这是`NameHighlightFilter`来自 Pygments 源代码的过滤器功能：

```
def filter(self, lexer, stream):
    for ttype, value in stream:
        if ttype is Name and value in self.names:
            yield self.tokentype, value
        else:
            yield ttype, value 
```

我唯一的解决方法是编写自己的过滤器。这个功能给了我想要的外观。

```
def filter(self, lexer, stream):
    define = False
    for ttype, value in stream:
        if value in self.tl_toplevel_forms:
            ttype = Name.Builtin
            define = True
        elif define and ttype == Name.Variable:
            define = False
            ttype = Name.Function
        elif value in self.tl_special_forms:
            ttype = Name.Variable
        # the Common Lisp lexer highlights everything else as
        # variables, which isn't the look I want.  Instead
        # highlight all non-special things as text.
        elif ttype == Name.Variable:
            ttype = Name.Text
        yield ttype, value 
```

作为对 Pygments 开发人员的说明，也许它`NameHighlightFilter`可以采用一个可选参数来表示要转换的令牌类型（目前它只采用输出令牌类型）。

# javascript - 从 xmldocument 创建 javascript 文档

> ID：11413204
> 
> 赞同：1
> 
> 时间：2012-07-10T12:21:28.403
> 
> 标签：javascript, xmldocument, samsung-smart-tv

我一直在使用 $.ajax() 从服务器获取一些数据，但由于与我以前版本的系统（三星智能电视）不兼容，我也不得不实现 XMLHttpRequest。我的问题是，使用 jQuery，responseXML 返回一个 [object Document]，而 XMLHttpRequest 的 responseXML 返回一个 [object XMLDocument]。由于我已经使用 Documents 实现了所有内容，有没有办法将 XMLDocument 对象或字符串对象解析为 Document？

感谢任何帮助，我被困在这里，不想为 XMLDocument 重写所有内容。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T14:35:30.460

原来，不同的浏览器返回不同的东西，但最终是相同的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T12:46:28.053

除了 responseXML，您还应该有一个来自 XMLHttpRequests 的 responseText 属性。我[以类似的方式](https://github.com/Incrediberry/jsberry/blob/master/libs/Namespace.class.js)使用以下内容。

```
xhrObj.open('GET', scriptURL, false);
xhrObj.send('');
var se = document.createElement('script');
se.type = "text/javascript";
se.text = xhrObj.responseText;
document.getElementsByTagName('head')[0].appendChild(se); 
```

# tfs - 将工作项保存在“TFS 2010”中时出现“分配的开放转换~推迟完成至少一个原因”之类的错误。

> ID：11413206
> 
> 赞同：0
> 
> 时间：2012-07-10T12:21:40.877
> 
> 标签：tfs

在“TFS 2010”中保存“错误”类型的工作项时出现“分配的开放转换~推迟完成至少一个原因”之类的错误。任何人请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T10:04:29.550

右键单击事务并单击`Open Details`。

![在此处输入图像描述](../Images/e0eb49a9bb4cccc6f8b97da2711a34b1.png)

现在选择`Reasons tab`并输入`at least one reason`，然后单击确定。

![在此处输入图像描述](../Images/01be39e702034f634235fee3fe97c56a.png)

# regex - 在bash中的一行中查找特定字符

> ID：11413207
> 
> 赞同：0
> 
> 时间：2012-07-10T12:21:43.333
> 
> 标签：regex, linux, bash, shell

有没有办法在bash中使用正则表达式从一行文本中提取特定部分。

例如

```
8495 pts/1 S 0:10 /opt/sbin/proc -q 10 -p /opt/etc/plugin/ -c /opt/etc/ -f 200000 -s 10000 -b 3276 
```

如何从上面提取 q 参数**10**？我需要 q 参数后的数字

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T12:35:07.277

```
px aux | sed -n 's/.*-q\s\([0-9]\+\).*/\1/p' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T12:24:59.947

天真的解决方案正则表达式是`.*-q ([^ ]*) .*`. 所以，类似的东西`sed 's/.*-q ([^ ]*) .*/\1/'`应该可以解决问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T14:48:57.473

如果该行存储在变量中`$line`：

```
val=$(
    this_token=false 
    for word in $line; do 
        $this_token && { echo $word; break; } 
        [[ $word = "-q" ]] && this_token=true 
    done
) 
echo $val 
```

# asp.net - UserControl 内 UpdatePanel 中的 GridView 排序

> ID：11413210
> 
> 赞同：1
> 
> 时间：2012-07-10T12:21:51.843
> 
> 标签：asp.net, gridview, user-controls, viewstate

我确实找到了类似的问题，但没有确凿的答案。

如果我把 a`GridView`放在里面`UpdatePanel`，一切正常。但是，如果我将它放在`UserControl`like`<UserControl><UpdatePanel><GridView></..>`中，则通过单击 GridView 上的标题进行排序将不再起作用（没有任何反应）。

我当然可以手动处理排序（手动维护`ViewState`），但这真的是唯一的方法吗？

是否根本不支持 UserControls 内的 UpdatePanels 内的 GridView？

**ASPX 页面：**

```
<%@ Register src="usercontrols/MyModule.ascx" TagPrefix="mm" TagName="MyModule" %>
...
<body>
    <form id="form1" runat="server">
    <div>
        <asp:ScriptManager runat="server"/>
        <mm:MyModule runat="server" />
    </div>
    </form>
</body> 
```

**用户控制：**

```
...
<asp:UpdatePanel ID="MainUpdatePanel" runat="server">
    <ContentTemplate>
    ....
    <asp:GridView ID="GridViewData" runat="server"
        GridLines="None"
        CssClass="gridview"
        AutoGenerateColumns="false"
        AllowPaging="false"
        AllowSorting="true"
        ShowHeaderWhenEmpty="true"
        ShowFooter="true"
        OnSorting="GridViewData_Sorting">
        <Columns>
            <asp:TemplateField HeaderText="MyHeader" SortExpression="dbMyColumn">
                <ItemTemplate>
                    <%# Eval("dbMyColumn") %>
                </ItemTemplate>
            </asp:TemplateField>
        </Columns>
    </asp:GridView> 
```

GridViewData_Sorting 方法对此问题没有做任何有趣的事情。

# android - 如何使用 HttpUrl 连接在服务器上上传图像和视频？

> ID：11413225
> 
> 赞同：0
> 
> 时间：2012-07-10T12:22:51.977
> 
> 标签：android, file-upload, http-upload

我想仅使用 url 连接将视频连同该视频的缩略图上传到服务器。我可以上传视频，但我不知道如何同时上传图像。

这是我的代码供参考：

```
 HttpURLConnection conn = null;
            DataOutputStream dos = null;
            DataInputStream inStream = null;
            String existingFileName = selectedPath;
            String lineEnd = "\r\n";
            String twoHyphens = "--";
            String boundary =  "*****";
            int bytesRead, bytesAvailable, bufferSize;
            byte[] buffer;
            int maxBufferSize = 1*1024*1024;
            String responseFromServer = "";
            String urlString = "http://xxx/yyy/zzz/hh.php;   //path of the php file on server

            try
            {
                //------------------ CLIENT REQUEST
                FileInputStream fileInputStream = new FileInputStream(new File(existingFileName) );

                // open a URL connection to the Servlet
                URL url = new URL(urlString);

                // Open a HTTP connection to the URL
                conn = (HttpURLConnection) url.openConnection();

                // Allow Inputs
                conn.setDoInput(true);

                // Allow Outputs
                conn.setDoOutput(true);

                // Don't use a cached copy.
                conn.setUseCaches(false);

                // Use a post method.
                conn.setRequestMethod("POST");
                conn.setRequestProperty("Connection", "Keep-Alive");
                conn.setRequestProperty("Content-Type", "multipart/form-data;boundary="+boundary);

                bmThumbnail = ThumbnailUtils.createVideoThumbnail(existingFileName, 
                           Thumbnails.MICRO_KIND);

                dos = new DataOutputStream( conn.getOutputStream() );
                dos.writeBytes(twoHyphens + boundary + lineEnd);
                dos.writeBytes("Content-Disposition: form-data;name=\"uploadedfile\";filename=\"" + existingFileName +"\"" + lineEnd);
                // dos.writeBytes(bmThumbnail);
                dos.writeBytes(lineEnd);

                // create a buffer of maximum size
                bytesAvailable = fileInputStream.available();
                bufferSize = Math.min(bytesAvailable, maxBufferSize);
                buffer = new byte[bufferSize];

                // read file and write it into form...
                bytesRead = fileInputStream.read(buffer, 0, bufferSize);
                while (bytesRead > 0)
                {
                    dos.write(buffer, 0, bufferSize);
                    bytesAvailable = fileInputStream.available();
                    bufferSize = Math.min(bytesAvailable, maxBufferSize);
                    bytesRead = fileInputStream.read(buffer, 0, bufferSize);
                }

                // send multipart form data necesssary after file data...
                dos.writeBytes(lineEnd);
                dos.writeBytes(twoHyphens + boundary + twoHyphens + lineEnd);

                //check server response
                int serverResponseCode = conn.getResponseCode();
                String serverResponseMessage = conn.getResponseMessage();
                Log.i("file sent to:" +existingFileName,"Code:" + serverResponseCode +"Message: "+ serverResponseMessage);

                // close streams
                Log.e("Debug","File is written");
                fileInputStream.close();
                dos.flush();
                dos.close(); 
```

有什么建议么？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T12:28:37.857

使用多部分 http 帖子。您可以使用库来执行此操作，或者您可以手动编写 http 请求。

# email - 我可以在我的电子邮件主题中添加星号 (★) 吗？

> ID：11413231
> 
> 赞同：2
> 
> 时间：2012-07-10T12:23:01.523
> 
> 标签：email

我收到客户的请求，他们希望在他们的电子邮件主题中添加星号 (★)（他们通过我们为他们制作的更大的 CRM 的一部分通过应用程序发送这些邮件）。

我尝试发送一封测试邮件，邮件标题很好地显示在我的 Gmail 帐户中，我必须同意我的客户认为它引人注目，但我想到这可能是垃圾邮件磁铁，所以我谷歌搜索，但我找不到实际的“不要这样做”。

一般来说，我的意见是不使用它，但现在我必须向客户解释原因。我最好的解释应该是`there is a probability your emails will be treated as spam`，但我没有这个声明的背景。

你对我应该怎么做有什么建议吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T12:39:33.467

我能找到的唯一信息是关于[如何避免误报的](http://wiki.apache.org/spamassassin/AvoidingFpsForSenders)[SpamAssassin](http://wiki.apache.org/spamassassin/SpamAssassin)页面。我发现的唯一相关部分是这部分。

> 不要使用“可爱”的拼写，不要用空格分隔你的单词，不要将 str@nge |etters 0r 字符放入你的电子邮件中。

SpamAssassin 是一种使用非常广泛的垃圾邮件过滤工具。然而，仅仅打破其中一个规则（奇怪的字符）不会收到被标记为垃圾邮件的电子邮件。但结合其他一些问题可能会导致您的电子邮件被视为垃圾邮件。话虽如此，如果您的电子邮件是完全合法的商业电子邮件，则可能不会触发其他规则，并且使用特殊字符不会造成大问题。话虽如此，您可能应该在 SpamAssassin 和其他一些垃圾邮件过滤工具上尝试几封测试电子邮件，以便对您计划发送的电子邮件得出更好的结论。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T12:32:02.207

只需向您的客户解释，就像您向 SO 解释的那样：您说星号让它引人注目：这并不直接意味着它将被视为垃圾邮件，但您可以解释该概念如何被视为垃圾邮件。

但是，如果明星是他们品牌的一部分，那么这可能是您的客户表达自己的一种很好的方式。

垃圾邮件越来越像人们认为的“正常”，所以我认为他们已经在内部进行了试用，测试了这个概念。

和你的客户讨论一下——像这样的事情，纯粹的社会认知，是没有事实依据的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T14:29:15.013

几个月以来，越来越多的零售商在他们的主题行中使用 unicode 符号。当然，这是为了在杂乱的收件箱中获得更多关注。到目前为止，绝对没有证据表明此类符号会增加垃圾邮件过滤器测试失败的可能性。但是，请记住，稀有符号可能无法（正确）在所有邮件用户代理中呈现。尤其要关注 Android 和 Blackberry 智能手机，还要关注 Outlook。此外，由于 Hotmail 错误，符号将在子行和 Web 前端的电子邮件正文中呈现更大。事实上，它们正在被图像所取代。总而言之，明星应该不会有任何问题。至少，如果它在主题行中正确编码。所以，去吧。

# java - 如何从 Equinox 框架中获取服务返回的捆绑对象 - java.lang.LinkageError

> ID：11413235
> 
> 赞同：0
> 
> 时间：2012-07-10T12:23:20.947
> 
> 标签：java, osgi, classloader, bundle, equinox

我有一个运行 Equinox 框架的类。现在我想获得一个由框架外的服务返回的对象（在其中一个包中定义）。

不幸的是，我得到一个 LinkageError 并且不知道如何摆脱它。是否甚至可以让服务将适当的对象返回给非捆绑代码？

这是完整的故事：

ParserDTOBundle 是一个捆绑包，它定义了 ParserDTO 类并导出了相应的包。

在另一个包 ParserServiceBundle 中，我定义了一个名为 ParserService 的服务。此捆绑包导入 ParserDTO 的包。ParserService 的函数 getDTO() 创建一个新的 ParserDTO 对象并返回它。

现在我创建了另一个类，它启动一个 Equinox 框架并从一个目录加载两个包：

```
...
EclipseStarter.setInitialProperties(frameworkPropertiesMap);
bundleContext = EclipseStarter.startup(new String[] { "-console", "-dev", "bin" }, null);

bundleContext.installBundle("file:/" + dir + "ParserDTOBundle-0.0.1-SNAPSHOT.jar");
Bundle service = bundleContext.installBundle("file:/" + dir + "ParserServiceBundle-0.0.1-SNAPSHOT.jar");
service.start();

ServiceReference serviceReference = bundleContext.getServiceReference(ParserService.class.getName());

if (serviceReference != null) {
     ParserService ps = (ParserService) bundleContext.getService(serviceReference);
     if (ps != null) {
          ParserDTO dto = ps.getDTO();
          System.out.println(dto.getValue());
     }
 } 
```

上述类是非捆绑 Maven 项目的一部分。上述类的运行失败：

```
Exception in thread "main" java.lang.LinkageError: loader constraint violation: loader (instance of sun/misc/Launcher$AppClassLoader) previously initiated loading for a different type with name "de/ParserDTO" 
```

有趣的是，我在 System.out.println 而不是之前的行中收到此错误。我的主类中ParserDTO类的类加载器与对象dto的类加载器明显不同。

如何获取存储在 dto 中的信息？这甚至可能吗？我是否必须 1.) 将我的普通类加载器交给捆绑包或 2.) 使用基本数据类型或 3.) 完全以其他方式？

谢谢大家！塞巴斯蒂安

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T14:44:39.933

所以这个类`ParserDTO`已经被两个不同的类加载器独立加载：一个在你的包中，一个来自你的“外部”应用程序的应用程序类加载器。您需要确保它仅由一个类加载器加载。

当两个普通包出现这个问题时，关键是确保一个包导出包，另一个包导入它（或者它们都从第三个包导入）。

但是在这种情况下，您是在外部应用程序和 OSGi 内部的包之间进行交互。有一个硬性规定：OSGi 框架*不能*从 OSGi 中的包中导入包。因此，该包必须存在于外部应用程序中，并通过将其添加到`FRAMEWORK_SYSTEMPACKAGES_EXTRA`. 还要确保捆绑包导入该包而不是拥有自己的副本。

顺便说一句...您可能想为包选择一个更好的名称，而不仅仅是`de`！我不认为您是德国唯一的 Java 开发人员，因此您不拥有该命名空间 ;-)

# android - Android 编程在 Eclipse 中不起作用

> ID：11413237
> 
> 赞同：1
> 
> 时间：2012-07-10T12:23:30.480
> 
> 标签：android, windows, eclipse, adt, ubuntu-12.04

我的 Eclipse 工作正常，直到我更新了我的 sdk。然后突然间一切都开始变得有点奇怪了。实际上我在 Ubuntu 12.04 中工作，更新后甚至停止显示 Java 项目。当我单击 New--> Project 我找不到java / Android都没有。我什至找不到XML。我已经在一些网站上列出了这么多方法。但没有什么对我有用。任何人都可以提出解决方案。

```
I have even tried in windows.But same problem happened & it says " Android Development Tools (20.0.0.v201206242043-391819) requires plug-in "org.eclipse.core.runtime (3.6.0)", or later version." 
```

该怎么办？请给我一个解决方案

提前谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T12:36:26.497

将您的 ADT 更新为 ADT 20.0.0 然后它将解决您的问题。请参考以下链接 [http://developer.android.com/sdk/installing/installing-adt.html](http://developer.android.com/sdk/installing/installing-adt.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T12:31:41.370

您的更新过程可能导致已安装插件丢失。

您必须将 eclipse 更新到最新版本，然后找到更新的插件、ADT 等。

我相信这应该可以解决。

干杯!

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T13:40:56.817

//你需要下载eclipse 3.6 helios or 3.7 indigo

```
Eclipse 3.6.2 (Helios) or greater
Note: Eclipse 3.5 (Galileo) is no longer supported with the latest version of ADT. 
```

如果需要安装 Eclipse，可以从[http://www.eclipse.org/downloads/](http://www.eclipse.org/downloads/)下载。我们推荐“Eclipse Classic”版本。

**注意：**创建新的 Workspace 清理项目，重新启动将不起作用。

# symfony - 覆盖用户管理表单

> ID：11413240
> 
> 赞同：5
> 
> 时间：2012-07-10T12:23:36.633
> 
> 标签：symfony, symfony-forms, symfony-sonata, sonata-admin

我正在尝试覆盖`SonataUser/Admin/Model/UserAdmin`'s `configureFormFields()`，因为我需要从管理表单中删除一些默认字段。所以我复制了`vendor/bundles/Sonata/UserBundle/Admin/Model/UserAdmin.php`我的包中的文件`app/Application/Sonata/UserBundle/Admin/Model/UserAdmin.php`并修改了它。然后将其声明为服务：

```
# app/application/Sonata/UserBundle/Resources/config/services.yml
services:
    application_user.registration.form.type:
        class: Application\Sonata\UserBundle\Admin\Model\UserAdmin
        arguments: [%sonata_user.model.user.class%]
        tags:
            - { name: form.type, alias: application_user_admin } 
```

现在问题：我做得对吗？我怎样才能告诉奏鸣曲管理员使用它？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-12-31T12:26:44.143

覆盖类应该在 config.yml 中设置：

```
# app/config/config.yml
sonata_user:
  admin:
    user:
      class:      MyCompany\UserBundle\Admin\Model\UserAdmin 
```

扩展原来的 UserAdmin：

```
namespace MyCompany\UserBundle\Admin\Model;

use Sonata\AdminBundle\Form\FormMapper;

class UserAdmin extends \Sonata\UserBundle\Admin\Model\UserAdmin
{

    protected function configureFormFields(FormMapper $formMapper)
    {
        // new logic
    }

} 
```

当然更改类名`MyCompany\UserBundle\Admin\Model\UserAdmin`以反映您的包结构。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T13:17:02.783

最好将包保存在 src 目录中：（请参阅创建包[部分](http://symfony.com/doc/current/book/page_creation.html)）。在这种情况下，如果您使用的是简单扩展，请确保使用`--dest=src`以在 src/ 中的应用程序命名空间内生成包。

```
php app/console sonata:easy-extends:generate SonataUserBundle --dest=src 
```

通过在其中创建覆盖包`src/Application/Sonata/UserBundle`并将供应商包注册为父包，您不必创建新服务。这向您解释了如何正确覆盖捆绑包：[覆盖捆绑包](http://symfony.com/doc/current/cookbook/bundles/inheritance.html)应该可以节省大量时间。

不要忘记在与父包相同的位置创建要覆盖的文件。在您的情况下，您必须将供应商的粘贴复制`SonataUser/Admin/Model/UserAdmin.php`到您的捆绑包`src/Application/Sonata/UserBundle/Admin/Model/UserAdmin.php`中并根据需要进行修改。这就是为什么覆盖捆绑包如此有用的原因。

# c# - 使用键将列表映射到 Automapper 中的现有列表

> ID：11413247
> 
> 赞同：5
> 
> 时间：2012-07-10T12:24:01.203
> 
> 标签：c#, automapper, automapper-2

Automapper 可以轻松处理将一个对象类型列表映射到另一个不同对象类型列表，但是是否可以使用 ID 作为键将其映射到现有列表？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-11T20:35:36.610

我没有找到比以下更好的方法。

这里是来源和目的地。

```
public class Source
{
    public int Id { get; set; } 
    public string Foo { get; set; }
}

public class Destination 
{ 
    public int Id { get; set; }
    public string Foo { get; set; }
} 
```

定义转换器（您应该将 List<> 更改为您使用的任何类型）。

```
public class CollectionConverter: ITypeConverter<List<Source>, List<Destination>>
{
    public List<Destination> Convert(ResolutionContext context)
    {
        var destinationCollection = (List<Destination>)context.DestinationValue;
        if(destinationCollection == null)
            destinationCollection = new List<Destination>();
        var sourceCollection = (List<Source>)context.SourceValue;
        foreach(var source in sourceCollection)
        {
            Destination matchedDestination = null;

            foreach(var destination in destinationCollection)
            {
                if(destination.Id == source.Id)
                {
                    Mapper.Map(source, destination);
                    matchedDestination = destination;
                    break;
                }
            }
            if(matchedDestination == null)
                destinationCollection.Add(Mapper.Map<Destination>(source));
        }
        return destinationCollection;
    }
} 
```

这是实际的映射配置和示例。

```
Mapper.CreateMap<Source,Destination>();
Mapper.CreateMap<List<Source>,List<Destination>>().ConvertUsing(new CollectionConverter());

var sourceCollection = new List<Source>
{
    new Source{ Id = 1, Foo = "Match"},
    new Source{ Id = 2, Foo = "DoesNotMatchWithDestination"}
};
var destinationCollection = new List<Destination>
{
    new Destination{ Id = 1, Foo = "Match"},
    new Destination{ Id = 3, Foo = "DoeNotMatchWithSource"}
};
var mergedCollection = Mapper.Map(sourceCollection, destinationCollection); 
```

您应该得到以下结果。

![映射结果](../Images/1516da32f1af0faf4d5d9f1b2e172cc8.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-05T13:12:31.427

我发现这篇文章非常有用，因此我想我会在我的类型转换器的通用版本中进行反馈，您可以使用它来从每个对象中选择要匹配的属性。

使用它，您需要做的就是：

```
// Example of usage
Mapper.CreateMap<UserModel, User>();
var converter = CollectionConverterWithIdentityMatching<UserModel, User>.Instance(model => model.Id, user => user.Id);
Mapper.CreateMap<List<UserModel>, List<User>>().ConvertUsing(converter);

//The actual converter
public class CollectionConverterWithIdentityMatching<TSource, TDestination> : 
    ITypeConverter<List<TSource>, List<TDestination>> where TDestination : class
{
    private readonly Func<TSource, object> sourcePrimaryKeyExpression;
    private readonly Func<TDestination, object> destinationPrimaryKeyExpression;

    private CollectionConverterWithIdentityMatching(Expression<Func<TSource, object>> sourcePrimaryKey, Expression<Func<TDestination, object>> destinationPrimaryKey)
    {
        this.sourcePrimaryKeyExpression = sourcePrimaryKey.Compile();
        this.destinationPrimaryKeyExpression = destinationPrimaryKey.Compile();
    }

    public static CollectionConverterWithIdentityMatching<TSource, TDestination> 
        Instance(Expression<Func<TSource, object>> sourcePrimaryKey, Expression<Func<TDestination, object>> destinationPrimaryKey)
    {
        return new CollectionConverterWithIdentityMatching<TSource, TDestination>(
            sourcePrimaryKey, destinationPrimaryKey);
    }

    public List<TDestination> Convert(ResolutionContext context)
    {
        var destinationCollection = (List<TDestination>)context.DestinationValue ?? new List<TDestination>();
        var sourceCollection = (List<TSource>)context.SourceValue;
        foreach (var source in sourceCollection)
        {
            TDestination matchedDestination = default(TDestination);

            foreach (var destination in destinationCollection)
            {
                var sourcePrimaryKey = GetPrimaryKey(source, this.sourcePrimaryKeyExpression);
                var destinationPrimaryKey = GetPrimaryKey(destination, this.destinationPrimaryKeyExpression);

                if (string.Equals(sourcePrimaryKey, destinationPrimaryKey, StringComparison.OrdinalIgnoreCase))
                {
                    Mapper.Map(source, destination);
                    matchedDestination = destination;
                    break;
                }
            }

            if (matchedDestination == null)
            {
                destinationCollection.Add(Mapper.Map<TDestination>(source));
            }
        }

        return destinationCollection;
    }

    private string GetPrimaryKey<TObject>(object entity, Func<TObject, object> expression)
    {
        var tempId = expression.Invoke((TObject)entity);
        var id = System.Convert.ToString(tempId);
        return id;
    }
} 
```

# imagemagick - 无法在 ImageMagick 中安装 GhostScript

> ID：11413249
> 
> 赞同：2
> 
> 时间：2012-07-10T12:24:05.540
> 
> 标签：imagemagick, ghostscript

下载最新版本的 ImageMagick。拆开它。像这样安装 Ghostscript：

```
$ sudo apt-get install ghostscript 
```

之后尝试配置 ImageMagick：

```
$ ./configure --with-gslib
$ make
$ make install 
```

之后我尝试将PDF转换为jpg

```
$ sudo /usr/local/bin/convert in.pdf out.jpg 
```

我看到了这个错误

```
convert: no decode delegate for this image format `/tmp/magick-BzHdr4Kp-00000001' @ error/constitute.c/ReadImage/544.
convert: Postscript delegate failed `in.PDF': Нет такого файла или каталога @ error/pdf.c/ReadPDFImage/678.
convert: no images defined `out.jpg' @ error/convert.c/ConvertImageCommand/3044. 
```

我做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T16:48:51.000

尝试以下`convert`命令以更准确地查看可能出现的问题：

```
 convert a.pdf -debug coder a.jpg
 convert a.pdf -debug all   a.jpg 
```

可能会有很多输出到 stderr。在这些行中，您可能会看到 IM 在哪里寻找 Ghostscript。另外，试试

```
 convert -list delegate 
 convert -list delegate | grep --color -E '(eps|pdf)' 
```

查找 ImageMagick 尝试使用哪些确切的命令行运行 Ghostscript（它可能会调用`gsx`而不是`gs`，或者它可能会在`/usr/local/bin/`...中查找它）。如果您发现与真正的 Ghostscript 安装有任何偏差，您可以通过编辑`delegates.xml`.

```
 convert -list configure 
```

将向您展示 ImageMagick 的配置方式（例如，如果`gs`在编译时位于`DELEGATES`变量列表中）。在这里您还可以找到寻找的地方`delegates.xml`：

```
 convert -list configure | grep CONFIGURE_PATH 
```

应该列出这个（以及更多）*.xml 设置文件所在的目录，这些文件控制如何`convert`等。表现...

# php - 如何在 PHP 中包含动态 Javascript 页面的静态 HTML 结果？

> ID：11413250
> 
> 赞同：0
> 
> 时间：2012-07-10T12:24:08.967
> 
> 标签：php, javascript, include

我有一个使用 Javascript 从另一个站点提取 HTML 的小脚本。

我想包含在 PHP 页面中提取的静态 HTML，**而没有** *任何*Javascript 代码出现在最终显示的 PHP 页面中。

我尝试在 PHP 页面中使用 Javascript 代码包含文件，但它只包含实际的 Javascript，而不是 Javascript 的**结果**。

那么我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T12:25:54.810

您需要获取页面，在其中执行 JavaScript，然后从生成的 DOM 中提取您想要的数据。

通常的方法是使用 Web 自动化工具，例如[Selenium](http://seleniumhq.org/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T12:27:05.690

你根本做不到。

您需要了解 PHP 和 Javascript 在不同的地方运行，PHP 在服务器上，而 Javascript 在客户端上。

您唯一的解决方案是更改所有这些完成的方式并使用 PHP 中的“file_get_contents(url)”来获取与您的 javascript 过去获取的相同内容。这样，不再有 javascript，您仍然可以使用远程内容预处理您的页面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T12:31:05.463

您无法直接在 PHP 中执行此操作，因为您需要运行 Javascript 代码。

我建议将 URL（以及任何所需的操作，如点击事件等）传递给无头浏览器，如[Phantom](http://phantomjs.org/)或[Zombie](http://zombie.labnotes.org/)，并在 JS 引擎完成工作后从中捕获 DOM。

您也可以使用真正的浏览器，但当然您不需要 UI，而且它实际上可能会妨碍您尝试执行的操作，因此无头浏览器可能会更好。

这种事情通常用于站点的自动化测试（即功能测试）。

有一个名为[Mink](http://mink.behat.org/)的 PHP 工具可以在 PHP 程序中运行这些类型的脚本。它旨在编写测试脚本，但我想您可以将其用于您的目的。

希望有帮助。

# java - 在 Hibernate 中禁用字符串列表的延迟加载

> ID：11413253
> 
> 赞同：0
> 
> 时间：2012-07-10T12:24:17.313
> 
> 标签：java, hibernate, persistence

我试图避免休眠的延迟加载机制，并且我已经使用 Eager FetchType 创建了这个列表对象，我认为它会这样做：

```
@JsonIgnore
@CollectionTable(name = "nav", joinColumns = @JoinColumn(name="conn"))
@ElementCollection(fetch = FetchType.EAGER)
@IndexColumn(name="filter") private List<String> filters = Lists.newArrayList(); 
```

但我仍在阅读 PersistentList，而不是 java.util.List。对可能出什么问题有任何想法吗？

我没有使用 xml 配置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T12:31:30.773

持久列表是 Hibernate 用来正确存储和从数据库中检索数据的非惰性集合。在定义可持久实体时，并非不能使用 Java 集合实现，例如 ArrayList 或 LinkedList，而只能使用接口。事实上，你要求的是一个 List，你得到的是 PersistentList，它完全尊重接口的约定。

如果你移除了 Eagerness 并调试你的类，你会看到一个惰性集合出现，这通常是一个 CGLIB 代理。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-10T12:31:07.513

为了避免延迟加载，您必须设置`lazy = true`而不是`FetchType.EAGER`make it `FetchType.JOIN`。

对于基于注释的映射，请参考以下链接：[http://docs.jboss.org/hibernate/annotations/3.5/reference/en/html_single/#entity-hibspec-singleassoc-fetching]

让我知道它是否对您有帮助。

# internet-explorer - 在 IE 中禁用 LocalStorage

> ID：11413254
> 
> 赞同：1
> 
> 时间：2012-07-10T12:24:20.110
> 
> 标签：internet-explorer, local-storage

重新安装 Internet Explorer 访问本地存储后返回 null 或未定义，但之前它工作正常，我放松了我的 sequrity 设置，但它没有帮助。我将不胜感激任何帮助

# google-app-engine - App Engine JPA Datastore 删除实体

> ID：11413255
> 
> 赞同：1
> 
> 时间：2012-07-10T12:24:23.067
> 
> 标签：google-app-engine, rest, jpa

我试图用 JPA、JAX-RS 和 JAX-B 构建一个谷歌应用引擎项目。我的 POST 和 GET 方法有效，但我的 DELETE 方法不会删除数据。

资源

```
 @DELETE
 @Path("card/{id}")
 public void deleteCardById (@PathParam ("id") Long id) {
    Service.removeCard(id);
 } 
```

服务

```
public static void removeCard(Long id) {
    EntityManager em = EMFService.get().createEntityManager();
    Card emp = findCard(id);
    if (emp != null) {
        em.remove(emp);
    }
    em.close();
}

public static Card findCard(Long id) {
    EntityManager em = EMFService.get().createEntityManager();
    Card card = em.find(Card.class, id);
    em.close();
    return card;
} 
```

实体

```
@XmlRootElement
@Entity
public class Card {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    Long id;
    String begriff;
    String tabu1;
    String tabu2;
    String tabu3;
public Card(String begriff, String tabu1, String tabu2, String tabu3) {
        super();
        Begriff = begriff;
        Tabu1 = tabu1;
        Tabu2 = tabu2;
        Tabu3 = tabu3;
    }

    public Card() {

    }

    public Long getId() {
        return id;
    }

    public void setId(Long id) {
        this.id = id;
    }

    public String getBegriff() {
        return Begriff;
    }

    public void setBegriff(String begriff) {
        Begriff = begriff;
    }

    public String getTabu1() {
        return Tabu1;
    }

    public void setTabu1(String tabu1) {
        Tabu1 = tabu1;
    }

    public String getTabu2() {
        return Tabu2;
    }

    public void setTabu2(String tabu2) {
        Tabu2 = tabu2;
    }

    public String getTabu3() {
        return Tabu3;
    }

    public void setTabu3(String tabu3) {
        Tabu3 = tabu3;
    }

    @Override
    public String toString() {
        return "Card [Begriff=" + Begriff + ", Tabu1=" + Tabu1 + ", Tabu2="
                + Tabu2 + ", Tabu3=" + Tabu3 + "]";
    } 
```

当我调试应用程序时，它会为删除函数提供正确的对象。但它只是不删除数据......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T12:53:50.217

您的意思是您使用的是 GAE JPA 插件的 v1，并且您不必费心在您的删除周围放置一个事务（因此删除会延迟到下一个事务......这永远不会发生）？

显然，您可以围绕删除进行事务处理，或者最好还是使用 GAE JPA 插件的 v2

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-08T05:14:32.977

我也面临类似的问题。JPA 删除实际上删除了数据存储中的实体，但它不会从 JPA 缓存中删除实体。您的页面实际上是使用 JPA 缓存结果列表来显示..

我用来解决问题的方法是每次删除后都清除 JPA 缓存。

示例代码将是这样的：

```
EM.getTransaction().begin();

EM.remove(current_record);

EM.getTransaction().commit();
EM.getEntityManagerFactory().getCache().evictAll(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T13:27:34.860

好的，我想我应该这样写 *编辑问题是 findCard 函数，我认为是因为 EntityManager 的第二个实例。我在没有使用这种方法的情况下对其进行了更改，现在它可以工作了。

```
public static void removeCard(Long id) {
        EntityManager em = EMFService.get().createEntityManager();
        EntityTransaction tx = em.getTransaction();
        try {
            tx.begin();
            Card card = em.find(Card.class, id);
            if (card != null) {
                em.remove(card);
            }
            tx.commit();
        } finally {
            if (tx.isActive()) {
                tx.rollback();
            }
            em.close();
        }
    } 
```

# python - 如何将 python 中的 Class 对象“转换”为 llvm？

> ID：11413259
> 
> 赞同：1
> 
> 时间：2012-07-10T12:24:43.937
> 
> 标签：python, class, llvm, llvm-py

我愿意使用 llvm 来优化我的 python 代码。我阅读了一些教程，但我还没有弄清楚如何将类对象从 python 代码导出到 llvm。我学会了如何在 llvm-py 中创建一个函数，但是类超出了我的能力。

这是我想在 llvm 代码中创建的类的示例：

```
class Char():
    def __init__(self,c):
        self.c=c
    def next(self,line,p):
        try:
            return self.c==line[p]
        except:
            return False
    def next_rep(self,line,p):
        try:
            return self.c==line[p],p
        except:
            return False,p 
```

如果有任何帮助，我将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T17:55:54.350

简短的回答：你不能。

原因是 Python 是一种解释型语言，该语言中有一些语句不容易用于静态评估。

我的建议是你分析你的程序（例如，如果你正在运行 Linux 使用 IPython 的 run -p 选项，或者通常通过[cProfile](http://docs.python.org/library/profile.html)模块），并找出占用程序大部分时间的原因。

在大多数程序中，总运行时间的很大一部分由相对较小的代码区域占用，并且改进它（通过算法改进或通过编写 C 扩展，例如通过 SWIG）通常会导致性能上的大幅度提升。

这种优化通常比试图让“一切运行得更快”更有效。

# sphinx - Ubuntu 上的 Sphinx 搜索行为很奇怪

> ID：11413260
> 
> 赞同：0
> 
> 时间：2012-07-10T12:24:44.683
> 
> 标签：sphinx, ubuntu-10.04

我在 Ubuntu 上使用 Sphinx Search 时遇到了一些问题。我的测试设置在 Mac 上，我使用来自 sphinxsearch.com 的预编译二进制文件。

测试异常时一切都很好。例如，我想将“星球大战”映射到“星球大战”，所以我`starwars => star wars`的 exceptions.txt 中有，效果很好。当我在我们的 Ubuntu 服务器上做同样的事情时，如果什么都不做。

我试过自己编译狮身人面像，仍然没有运气。发生了什么事，还有其他人看到操作系统之间的这种差异吗？

我正在运行 Ubuntu 10.04 lts 和持续的 Sphinx Search（64 位）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T16:05:20.813

首先检查索引器的输出 - 它很可能会揭示读取异常文件的一些问题。

也许权限不是设置为允许索引器和搜索读取文件？

或者路径不对。它通常是导致这种情况的简单原因

或者可能是您在设置异常后没有重新索引并重新启动 searchd？

# ibm-midrange - 使用 DSPATR(&ATTR) 在支持 RED 输入的字段中显示 CS（列分隔符）

> ID：11413262
> 
> 赞同：0
> 
> 时间：2012-07-10T12:24:47.367
> 
> 标签：ibm-midrange, rpgle, rpg

我正在显示来自 RPG 的 DSPF 格式，不使用指示符，但 P-field 属性可以改变颜色和输入能力。Turquoise 和 Yellow 字段默认具有 CS（列分隔符）。如果我使用带有指标的格式，则在记录级别带有 CHGINPDFT(CS) 的可输入红色字段会显示点。我没有成功获得带有属性的点，也没有在字段级别使用另一个 CHGINPDFT(CS)。DSPF 中是否有一个选项（关键字）允许我使用 RED 和 CS，具有 P 字段属性？

我添加了我的客户端访问会话的屏幕图像，所有默认值 ![在此处输入图像描述](../Images/e1e36329187e1b97b5e0c1c6925abca1.png)

字段alter“Titolo”是红色的，没有CS，不可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T14:35:01.287

5250 数据流不支持 COLOR(RED) 和 DSPATR(CS)。我意识到你有 CHGINPDFT(CS) 但它相当于同一件事。请参阅[http://publib.boulder.ibm.com/infocenter/iseries/v5r4/index.jsp?topic=%2Frzakc%2Frzakcmstdfcolor.htm](http://publib.boulder.ibm.com/infocenter/iseries/v5r4/index.jsp?topic=%2Frzakc%2Frzakcmstdfcolor.htm)和[http://publib.boulder.ibm.com/infocenter/iseries/v5r4/主题/rzakc/rzakcmstdfdspat.htm](http://publib.boulder.ibm.com/infocenter/iseries/v5r4/topic/rzakc/rzakcmstdfdspat.htm)

如果您在红色字段中看到分隔符，则可能是终端仿真程序的设置。

# css - 仅包含所需文本的最小字体文件

> ID：11413277
> 
> 赞同：0
> 
> 时间：2012-07-10T12:25:20.297
> 
> 标签：css, font-face

我目前有一个使用 2 个字体文件和大量图像的网页

*   我已经在一定程度上优化了图像，但我的页面仍然加载很慢，下一个选项是优化字体文件
*   我使用 Diavlo 字体作为标志，字体文件的大小为 55kb。

我已通过在您的字体请求 URL 中指定 text= 值来阅读 Google 字体。

这允许 Google 返回针对您的请求进行了优化的字体文件。在某些情况下，这可以将字体文件的大小减少多达 90%。

```
@font-face{
font-family:'diavlo';
src: url('diavlo_medium_ii_37-webfont.eot');
src: url('diavlo_medium_ii_37-webfont.eot?#iefix') format('embedded-opentype') ,
                      url('diavlo_medium_ii_37-webfont.ttf') format('truetype');
}

 I did not find Diavlo in Google Fonts. 
```

谷歌字体

```
http://fonts.googleapis.com/css?family=Inconsolata&text=Hello 
```

那么有没有一种方法可以只提供我需要的文本来获得最小的 .ttf 文件

我应该包含**.woff**文件还是**.ttf**或两者都包含。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T13:50:13.930

如果您知道具体需要哪些字符，则可以使用 Font Squirel 的[@font-face 生成器](http://www.fontsquirrel.com/fontface/generator/)并仅指定您想要的字符，这是我知道的唯一方法。这将生成所需的字体文件，仅包含您想要的字符。

**注意：**确保将其设置为专家模式

# wpf - 将复选框添加到 ComboboxItem

> ID：11413281
> 
> 赞同：1
> 
> 时间：2012-07-10T12:25:36.210
> 
> 标签：wpf, checkbox, combobox

我想在我的组合框中添加一个或两个复选框（如 microsoft word）![在此处输入图像描述](../Images/407a071a17f74d5f57d5e3da43e1f2e7.png)。

我把我的复选框放在一个单独的组合框项目中，并将它们设置为禁用。（我不希望用户可以选择此项目）。但是该复选框始终处于禁用状态。 ![在此处输入图像描述](../Images/8b4329c4de6b84a38ab1c906fe14b7db.png)

还有其他解决方案吗？

那是我的代码：

```
 <ComboBox Height="36">
        <ComboBoxItem Height="36">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="30"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>
                <Grid Grid.Column="1">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="16" />
                        <RowDefinition Height="16" />
                    </Grid.RowDefinitions>
                    <TextBlock Text="Item Title 1" Grid.Row="0" FontWeight="Bold" />
                    <TextBlock Text="Item Description 1" Grid.Row="1" FontStyle="Italic" />
                </Grid>
            </Grid>
        </ComboBoxItem>
        <ComboBoxItem Height="36">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="30"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>
                <Grid Grid.Column="1">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="16" />
                        <RowDefinition Height="16" />
                    </Grid.RowDefinitions>
                    <TextBlock Text="Item Title 2" Grid.Row="0" FontWeight="Bold" />
                    <TextBlock Text="Item Description 2" Grid.Row="1" FontStyle="Italic" />
                </Grid>
            </Grid>
        </ComboBoxItem>
        <ComboBoxItem Height="25" IsEnabled="False">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="30"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>
                <Grid Grid.Column="1">
                    <CheckBox IsChecked="false" HorizontalAlignment="Left" Width="16" Height="16" IsEnabled="True" />
                    <Label Margin="10 0 0 0" HorizontalAlignment="Left" Content="I'm a checkbox ;)" />
                </Grid>
            </Grid>
        </ComboBoxItem>
    </ComboBox> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T14:44:34.417

当你禁用一个元素时，你也在禁用它作为一个容器，因此也禁用了它的所有子元素。如果您想要一个未禁用但也不可选择的项目，则不应将其包含在 ComboBox 的项目列表中。出于您的目的，使用菜单可能是一个更好的主意，因为这是您尝试复制的内容，而不是尝试将意外功能挤入 ComboBox。

话虽如此，如果您坚持使用 ComboBox，要在列表之外添加项目，您可以修改 ComboBox 的模板（使用 Blend 为您生成副本）：

```
<ComboBox Height="36">
    <ComboBox.Template>
        <ControlTemplate TargetType="{x:Type ComboBox}">
            <Grid x:Name="MainGrid" SnapsToDevicePixels="true">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition MinWidth="{DynamicResource {x:Static SystemParameters.VerticalScrollBarWidthKey}}" Width="0"/>
                </Grid.ColumnDefinitions>
                <Popup x:Name="PART_Popup" AllowsTransparency="true" Grid.ColumnSpan="2" IsOpen="{Binding IsDropDownOpen, RelativeSource={RelativeSource TemplatedParent}}" Margin="1" PopupAnimation="{DynamicResource {x:Static SystemParameters.ComboBoxPopupAnimationKey}}" Placement="Bottom">
                    <Microsoft_Windows_Themes:SystemDropShadowChrome x:Name="Shdw" Color="Transparent" MaxHeight="{TemplateBinding MaxDropDownHeight}" MinWidth="{Binding ActualWidth, ElementName=MainGrid}">
                        <Border x:Name="DropDownBorder" BorderBrush="{DynamicResource {x:Static SystemColors.WindowFrameBrushKey}}" BorderThickness="1" Background="{DynamicResource {x:Static SystemColors.WindowBrushKey}}">
                            <ScrollViewer x:Name="DropDownScrollViewer">
                                <Grid RenderOptions.ClearTypeHint="Enabled">
                                    <Canvas HorizontalAlignment="Left" Height="0" VerticalAlignment="Top" Width="0">
                                        <Rectangle x:Name="OpaqueRect" Fill="{Binding Background, ElementName=DropDownBorder}" Height="{Binding ActualHeight, ElementName=DropDownBorder}" Width="{Binding ActualWidth, ElementName=DropDownBorder}"/>
                                    </Canvas>
                                    <StackPanel>
                                        <ItemsPresenter x:Name="ItemsPresenter" KeyboardNavigation.DirectionalNavigation="Contained" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}"/>
                                        <CheckBox IsChecked="false" Content="I'm a checkbox ;)" Margin="10"/>
                                    </StackPanel>
                                </Grid>
                            </ScrollViewer>
                        </Border>
                    </Microsoft_Windows_Themes:SystemDropShadowChrome>
                </Popup>
                <ToggleButton BorderBrush="{TemplateBinding BorderBrush}" Background="{TemplateBinding Background}" Grid.ColumnSpan="2" IsChecked="{Binding IsDropDownOpen, Mode=TwoWay, RelativeSource={RelativeSource TemplatedParent}}" Style="{StaticResource ComboBoxReadonlyToggleButton}"/>
                <ContentPresenter ContentTemplate="{TemplateBinding SelectionBoxItemTemplate}" ContentTemplateSelector="{TemplateBinding ItemTemplateSelector}" Content="{TemplateBinding SelectionBoxItem}" ContentStringFormat="{TemplateBinding SelectionBoxItemStringFormat}" HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" IsHitTestVisible="false" Margin="{TemplateBinding Padding}" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" VerticalAlignment="{TemplateBinding VerticalContentAlignment}"/>
            </Grid>
            <ControlTemplate.Triggers>
                <Trigger Property="HasDropShadow" SourceName="PART_Popup" Value="true">
                    <Setter Property="Margin" TargetName="Shdw" Value="0,0,5,5"/>
                    <Setter Property="Color" TargetName="Shdw" Value="#71000000"/>
                </Trigger>
                <Trigger Property="HasItems" Value="false">
                    <Setter Property="Height" TargetName="DropDownBorder" Value="95"/>
                </Trigger>
                <Trigger Property="IsEnabled" Value="false">
                    <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.GrayTextBrushKey}}"/>
                    <Setter Property="Background" Value="#FFF4F4F4"/>
                </Trigger>
                <Trigger Property="IsGrouping" Value="true">
                    <Setter Property="ScrollViewer.CanContentScroll" Value="false"/>
                </Trigger>
                <Trigger Property="ScrollViewer.CanContentScroll" SourceName="DropDownScrollViewer" Value="false">
                    <Setter Property="Canvas.Top" TargetName="OpaqueRect" Value="{Binding VerticalOffset, ElementName=DropDownScrollViewer}"/>
                    <Setter Property="Canvas.Left" TargetName="OpaqueRect" Value="{Binding HorizontalOffset, ElementName=DropDownScrollViewer}"/>
                </Trigger>
            </ControlTemplate.Triggers>
        </ControlTemplate>
    </ComboBox.Template>
    <ComboBoxItem Height="36">
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="30"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>
            <Grid Grid.Column="1">
                <Grid.RowDefinitions>
                    <RowDefinition Height="16" />
                    <RowDefinition Height="16" />
                </Grid.RowDefinitions>
                <TextBlock Text="Item Title 1" Grid.Row="0" FontWeight="Bold" />
                <TextBlock Text="Item Description 1" Grid.Row="1" FontStyle="Italic" />
            </Grid>
        </Grid>
    </ComboBoxItem>
    <ComboBoxItem Height="36">
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="30"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>
            <Grid Grid.Column="1">
                <Grid.RowDefinitions>
                    <RowDefinition Height="16" />
                    <RowDefinition Height="16" />
                </Grid.RowDefinitions>
                <TextBlock Text="Item Title 2" Grid.Row="0" FontWeight="Bold" />
                <TextBlock Text="Item Description 2" Grid.Row="1" FontStyle="Italic" />
            </Grid>
        </Grid>
    </ComboBoxItem>
</ComboBox> 
```

在这里，我保留了整个默认模板，但在 ItemsPresenter 周围添加了一个额外的 StackPanel，并将新的 CheckBox 放在那里。如果您不使用 Blend 进行复制，要尝试上述模板，您还需要以下 xmlns（以及项目中的 PresentationFramework.Aero 参考）：

```
xmlns:Microsoft_Windows_Themes="clr-namespace:Microsoft.Windows.Themes;assembly=PresentationFramework.Aero" 
```

和这些资源：

```
<Window.Resources>
    <Geometry x:Key="DownArrowGeometry">M 0 0 L 3.5 4 L 7 0 Z</Geometry>
    <Style x:Key="ComboBoxReadonlyToggleButton" TargetType="{x:Type ToggleButton}">
        <Setter Property="OverridesDefaultStyle" Value="true"/>
        <Setter Property="IsTabStop" Value="false"/>
        <Setter Property="Focusable" Value="false"/>
        <Setter Property="ClickMode" Value="Press"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type ToggleButton}">
                    <Microsoft_Windows_Themes:ButtonChrome x:Name="Chrome" BorderBrush="{TemplateBinding BorderBrush}" Background="{TemplateBinding Background}" RenderMouseOver="{TemplateBinding IsMouseOver}" RenderPressed="{TemplateBinding IsPressed}" SnapsToDevicePixels="true">
                        <Grid HorizontalAlignment="Right" Width="{DynamicResource {x:Static SystemParameters.VerticalScrollBarWidthKey}}">
                            <Path x:Name="Arrow" Data="{StaticResource DownArrowGeometry}" Fill="Black" HorizontalAlignment="Center" Margin="3,1,0,0" VerticalAlignment="Center"/>
                        </Grid>
                    </Microsoft_Windows_Themes:ButtonChrome>
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsChecked" Value="true">
                            <Setter Property="RenderPressed" TargetName="Chrome" Value="true"/>
                        </Trigger>
                        <Trigger Property="IsEnabled" Value="false">
                            <Setter Property="Fill" TargetName="Arrow" Value="#AFAFAF"/>
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
</Window.Resources> 
```

# javascript - 在 JavaScript 中，事件处理程序是否有可能返回到内联事件侦听器？

> ID：11413284
> 
> 赞同：0
> 
> 时间：2012-07-10T12:25:52.983
> 
> 标签：javascript

对于内联事件侦听器，我指的是用于事件注册的 HTML 元素属性，例如 onsubmit/onreset 属性，而不是用于注册事件的 dom 节点属性。

我之所以问，是因为当我注册一个事件处理程序时，该处理程序向表单的 onsubmit/onreset 属性返回 false，通过提交/重置执行提交/重置过程。

```
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <title>New Web Project</title>

        <script type="text/javascript">
            function f()
            {
               return false;
            }

        </script>

    </head>
    <body>
        <form action="" id = "form" onsubmit = "f()" onreset = "f()">
             <input type="text">
             <input type = "submit" value = "submit">
             <input type = "reset" value = "reset">
        </form>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T12:45:21.683

当您通过 HTML 属性提供事件处理程序时，您提供的字符串会创建一个函数，该函数在事件发生时由浏览器调用。

因此，在您的示例中， onsubmit 和 onreset 属性创建了两个等效于：

```
function() {
  f();
} 
```

因为该匿名函数不返回 false，所以不会阻止提交和重置事件。如果这是您想要做的，您可以执行以下操作之一。

要始终阻止默认处理：

```
onsubmit="f(); return false;" onreset="f(); return false;" 
```

有条件地阻止默认处理（以及更好的代码风格，IMO）：

```
onsubmit="return f();" onreset="return f();" 
```

# oracle10g - 使用游标浏览两个表

> ID：11413286
> 
> 赞同：1
> 
> 时间：2012-07-10T12:25:56.870
> 
> 标签：oracle10g, cursor

在我的过程中，我有两个具有相同数据的表。我通过光标浏览我的第一个表格。与第二张表相比，我发现了很多相同的数据。例如，如果在我的 table_1 中我的数据中有 10 个并且我有 12 个数据 table2 如何检测游标遍历的两个 table_1 中的缺失数据怎么办？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T22:16:40.337

听起来你最好使用 MINUS 运算符。

```
SELECT a, b, c
FROM table1
MINUS
SELECT a, b, c
FROM table2 
```

这将向您显示 table1 中存在但 table2 中不存在的所有结果。为了以两种方式显示差异，您可以执行以下操作：

```
SELECT z.*, 'In table1, not in table2' problem_description
FROM (
  SELECT a, b, c
  FROM table1
  MINUS
  SELECT a, b, c
  FROM table2   
) z
UNION ALL
SELECT z.*, 'In table2, not in table1' problem_description
FROM (
  SELECT a, b, c
  FROM table2
  MINUS
  SELECT a, b, c
  FROM table1   
) z 
```

[这个答案的 SQL Fiddle](http://www.sqlfiddle.com/#!4/3a650/5/0)

# php - 如何获取（通过引用）数组的长度

> ID：11413287
> 
> 赞同：4
> 
> 时间：2012-07-10T12:26:04.557
> 
> 标签：php, arrays

我从 mysql 结果中循环了数千行并将它们添加到不同的数组中。

我得到了对数组中要操作的最后一个元素的引用（出于此问题范围之外的原因）。

即（只是场景的一个例子）

```
$myarray = array();
$result = &$myarray;
$row = &$result[count($result)-1] 
```

当然这是可行的，但是正如这个线程（[为什么在引用的值上调用函数（如strlen，count等）这么慢？](https://stackoverflow.com/questions/3117604/why-is-calling-a-function-such-as-strlen-count-etc-on-a-referenced-value-so-s)）解释说，调用一个不期望引用变量的函数，使用引用变量，导致函数复制要操作的变量。

随着我的 $result 数组增长到数千个元素，不断地调用它，导致复制它，使代码无法使用缓慢。

我怎样才能解决这个问题 - 不建议不要通过引用使用变量。另外，我不能保留单独的行计数器。

基本上我需要知道如何取消引用引用变量（我理解不能这样做），或者其他方式来获取数组长度？，或获取对数组中最后一行的引用的方法（不弹出它）

请记住，数组也可能为空。

我已经花了很长时间才发现这是问题所在，所以我非常感谢任何解决问题的帮助。

**编辑** 对于每个说 count 不可能比 end/key 慢的人：只需运行这个简单的测试来确认

```
//setup array of 10 000 elements
$ar = array();
for ($i = 0 ; $i < 10000 ; $i++)
{
    $ar[] = $i;
}
//get a reference to it
$ref = &$ar;
error_log (date("Y/m/d H:i:s")." : speed test 1 \r\n",3,"debug.log");
//do 10 000 counts on the referenced array
for ($i = 0 ; $i < 10000 ; $i++)
{
    $size = count($ref);
}
error_log (date("Y/m/d H:i:s")." : speed test 2 \r\n",3,"debug.log");
//do 10 000 end/key on the referenced array
for ($i = 0 ; $i < 10000 ; $i++)
{
    reset($ref);
    end($ref);
    $size = key($ref);
}
error_log (date("Y/m/d H:i:s")." : end \r\n",3,"debug.log"); 
```

输出：计数需要 15 秒...结束/键不到一秒

```
2012/07/10 17:25:38 : speed test 1
2012/07/10 17:25:53 : speed test 2
2012/07/10 17:25:53 : end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T12:38:33.083

我仍然不确定我是否理解为什么这是必要的。但是，您已将数组索引为数字顺序数组，因此您可以执行此“技巧”来获取大小：

```
// Make sure the array pointer is at the end of the array
end($result); // Not sure if this is necessary based on your description
$size = key($result) + 1; // Get the numeric key of the last array element 
```

请注意，两者都[`end()`](http://php.net/manual/en/function.end.php)通过[`key()`](http://php.net/manual/en/function.key.php)引用获取它们的参数。但是，如果他们现在对引用的引用进行操作，我不会感到惊讶，但这是您可以调查的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T12:39:36.057

根据您提到但未描述的其他需求，也许一些真正的老派（深层）功能可以提供帮助：

```
end($result); // set pointer to (current) last element
$pos = key($result); //index of the last element
$row = &$result($pos); 
```

编辑：我打字太慢了:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T12:39:55.543

您应该看看[SPL 数据结构](http://www.php.net/manual/en/spl.datastructures.php)。也许一个简单的[SplHeap](http://www.php.net/manual/en/class.splheap.php)或[SplDoublyLinkedList 可以满足](http://www.php.net/manual/en/class.spldoublylinkedlist.php)您的要求。而且，表演还不错！

# python - 如何将日期值插入vertica

> ID：11413291
> 
> 赞同：0
> 
> 时间：2012-07-10T12:26:19.503
> 
> 标签：python, vertica

我正在用 python 编写小型应用程序，它从 Oracle 读取记录并将它们插入 Vertica。

要从 Oracle 读取，我使用的是`cx_Oracle`python 包，要写入 Vertica，我使用的是该`pyodbc`包。

当我从 Oracle 读取日期列时，我得到以下格式：

```
datetime.datetime(2011, 9, 13, 10, 47, 54, 795658) 
```

编辑：

当我在 vertica 中点击以下查询时：

```
INSERT INTO "TEST" (COL1) values(datetime.datetime(2011, 9, 13, 10, 47, 54, 795658)) 
```

我收到以下错误：

```
Error: ERROR: schema "datetime" does not exist
SQLState:  3F000
ErrorCode: 0 
```

我的问题是如何将其转换为 Vertica 时间戳列。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T13:31:08.080

您正在尝试混合 Python 代码和 SQL；您的 Vertica 服务器试图将`datetime.datetime`信息解释为 SQL 模式，但它失败了。

改用[参数](https://code.google.com/p/pyodbc/wiki/GettingStarted#Parameters)：

```
from datetime import datetime

cursor.execute('INSERT INTO "TEST" (COL1) values(?)',
    datetime(2011, 9, 13, 10, 47, 54, 795658)) 
```

# excel - 如何检查必填字段是否填写？

> ID：11413292
> 
> 赞同：0
> 
> 时间：2012-07-10T12:26:22.383
> 
> 标签：excel, vba

我想在保存文件之前检查我的工作表中必填字段中的文本。如果单元格 B50:B53 有文本，则相应的单元格 D50:D53 是必需的。如果单元格 B50:B53 为空，则 D 列中的相应字段是可选的。

如果我将此规则应用于一行，则它适用于以下代码。但是，我想测试所有情况（B50 和 D50、B51 和 D51...）。如果不复制代码 4 次，我怎么能做到这一点？

```
Dim MsgStr As String
Dim ws As Worksheet, r As Range, g As Range    

Set ws = wb.Sheets("Allotment hotel")
Set r = ws.Range("B50").Cells
Set g = ws.Range("D50").Cells

If r <> "" And g = "" Then
    MsgStr = "Room type was not found in the sheet 'Allotment hotel'"
End If 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T12:37:28.087

```
Sub check()

    Dim msg As String
    Dim rng As Range
    Set rng = Sheets("Allotment hotel").Range("B50:B53")

    For Each cell In rng
        If Not IsEmpty(cell) Then
            If IsEmpty(cell.Offset(0, 2)) Then
                msg = "Whatever String you want"
            End If
        End If
    Next cell

End Sub 
```

或者为单元格 B50:B53 创建一个命名范围，我们称之为`checkrng`

```
Set rng = Sheets("Allotment hotel").Range("checkrng") 
```

# android - 关闭活动后一段时间的异步任务

> ID：11413293
> 
> 赞同：0
> 
> 时间：2012-07-10T12:26:32.607
> 
> 标签：android

我想从网络服务器下载 4 个视频文件。我使用 Asynctask 下载文件？如果用户离开应用程序怎么办。在下载完成之前，异步任务是否有效？如果没有，请发送代码来管理它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T12:28:43.367

[IntentService](http://developer.android.com/reference/android/app/IntentService.html)是按需处理异步请求（表示为 Intent）的服务的基类。客户端通过调用发送请求`startService(Intent)`；该服务根据需要启动，使用工作线程依次处理每个 Intent，并在工作结束时自行停止。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T12:31:02.637

是的，你的两个问题。我自己尝试过，但实际上，您应该考虑一下 Service

# regex - R正则表达式：http匹配

> ID：11413294
> 
> 赞同：2
> 
> 时间：2012-07-10T12:26:41.953
> 
> 标签：regex, r

我在使用正则表达式匹配 http 链接时遇到问题。我有一个模式，我想从网站源代码中提取。源代码有 200 多行，其中包含大量 HTML 乱码，例如`</html><body... useless links useless images'`

我需要的 http 链接属于这种模式：

```
<a href"http:www.google.com/....1,1">
<a href"http:www.google.com/....2,2">
<a href"http:www.google.com/....3,3"> 
```

我只想获取 http 链接，它们的独特模式是结尾。请帮忙，我在 gusb、regxpr 和 grep 的实验中被困了好几个小时。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-10T12:36:15.980

正则表达式很难与通用 URL ( [URL Matching](http://www.regexguru.com/2008/11/detecting-urls-in-a-block-of-text/) ) 匹配，但是如果您总是希望匹配该精确模式，您可以试试这个

```
`http:www\.google\.com/.*?(\d+),\1` 
```

这将搜索 http:www.google.com 后跟任何内容，并在逗号的每一侧以相同的两个数字结尾，这就是您希望从您显示的模式中看到的内容。

# ios - iPhone横向游戏中的Mo pub + iAds

> ID：11413297
> 
> 赞同：0
> 
> 时间：2012-07-10T12:26:52.377
> 
> 标签：ios, xcode, iad, mopub

现在我有一个要求在 iPhone 游戏中使用 MoPub+iAds。

我使用了 mo pub sdk 并像这样初始化了视图

```
MPAdView *moPubAdView =  [[MPAdView alloc] initWithAdUnitId:MOPUB_ADS_ACCOUNT_ID size:MOPUB_BANNER_SIZE]; 
```

但这显示尺寸为 320x50。如何为此视图启用 iAd？现在它只显示 mo pub 广告。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T21:37:55.490

如果您想要纤细的 iAd 横幅，您必须在 size 参数中传递正确的 CGSize。在这种情况下 CGSizeMake(480, 32)。要为您的应用启用 iAd，请访问 itunesconnect.apple.com 并使用您的捆绑 ID 添加您的应用。之后找到显示 iAd 网络设置并启用 iAds 的按钮。

纤细的景观很少见。您的填充率会很低。我推荐使用 MMA Banner (320, 50) 即使是横向。使用此函数执行此操作：

```
[mpAdView lockNativeAdsToOrientation:MPNativeAdOrientationPortrait]; 
```

还要确保导入 iAd 适配器。它默认包括在内。

# javascript - 未捕获的错误：INVALID_STATE_ERR：带有 webkitEnterFullScreen 的 DOM 异常 11

> ID：11413300
> 
> 赞同：3
> 
> 时间：2012-07-10T12:27:12.253
> 
> 标签：javascript, jquery, html, webkit, html5-video

```
$(document).ready(function(){
        var url = 'video.mp4'
        var video = $(document.createElement('video'))

        video.attr("width", 300);
        video.attr("height", 150);
        video.attr("src", url);
        video.attr("controls", true);
        video.attr("id", "video");

        video[0].addEventListener("play", function() {  }, false);

        video[0].play();
        video[0].webkitEnterFullScreen();

        $('body').append(video);

    }) 
```

未捕获的错误：INVALID_STATE_ERR：DOM 异常 11

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T22:05:40.023

在调用 webkitEnterFullScreen() 之前，您需要等到视频的加载元数据事件被触发。请查看 stackoverflow 上的[这篇文章](https://stackoverflow.com/questions/7226114/dom-exception-11-when-calling-webkitenterfullscreen)或阅读[Apple 的 Safari 文档](http://developer.apple.com/library/safari/#documentation/AudioVideo/Conceptual/Using_HTML5_Audio_Video/ControllingMediaWithJavaScript/ControllingMediaWithJavaScript.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T12:32:28.557

此错误表示视频未加载，请确保视频文件的路径正确并且视频已加载，然后您可以尝试以下操作：

```
if (document.mozFullscreen) {
    video.mozRequestFullScreen();
}

if (document.webkitIsFullscreen) {
    video.webkitEnterFullScreen();
} 
```

# php - 如果文件存在，php显示文件信息和下载链接 - 如何调整多个文件

> ID：11413302
> 
> 赞同：0
> 
> 时间：2012-07-10T12:27:14.283
> 
> 标签：php, file, list, directory

我有一段 php，如果指定的文件夹中有文件，它将显示文件名、创建日期并显示下载按钮，如果文件夹为空，它将不显示任何内容。这很好用，但如果我在文件夹中有多个文件，它会将所有文件名捆绑在一起 - 我想要的是为每个文件显示的单独信息。

为了帮助您理解问题，这里有一张显示问题和代码的图像。我自己走了很远，但它在我的头上，我只是看不到解决问题的简单方法。该代码可能看起来非常尴尬和奇怪，因为我对此完全陌生，但它在浏览器上看起来很正确。我真的很感激任何帮助谢谢。

这是问题的图片：http: [//i46.tinypic.com/m79cvs.png](http://i46.tinypic.com/m79cvs.png)

```
 <?php if (!empty($thelist)) { ?>
<p class="style12"><u>Fix</u></p>
<p class="style12"><?=$thelist?><?php echo " - " ?> <?php $filename = '../../customers/client1/client1.fix.exe';
if (file_exists($filename)) {
    echo "" . date ("m/d/Y", filemtime($filename));
}
?> <?php echo " - <a href='download.php?f=client1/client1.fix.exe'><b>Download</b></a>&nbsp;&nbsp;&nbsp;<a     href='download.php?f=client1/client1.fix.exe'>
<img src='../css/images/dlico.png' alt='download' width='35' height='32'     align='absmiddle' /></a>" ?>
</p>
<?php } ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T12:41:33.707

列表 ( `$thelist`) 包含您的文件，是吗？您不是在处理`$thelist`，而是在处理`$filename`硬编码的字符串。为什么？目前您正在输出`<?=$thelist?>`，它看起来像文件名中的串联字符串。我建议这`$thelist`应该是你的文件数组。然后，您可以遍历文件并为每个条目动态输出 html。

```
<?php
    // define your directory here
    $directory = xy; 

    // fetches all executable files in that directory and loop over each
    foreach(glob($directory.'/*.exe') as $file) { 
        // output each name and mtime
        echo $file . '-' . date ("m/d/Y", filemtime($file));
        // or you might also build links dynamically
        // $directory needs to be added here
        echo '<a href="'.$file.'">'.$file.' - Size: '.filesize($file).'</a>';
    }
?> 
```

# arrays - 交换数组中的按钮

> ID：11413303
> 
> 赞同：0
> 
> 时间：2012-07-10T12:27:16.793
> 
> 标签：arrays, qt, swap

我有一组自定义按钮：

```
Button buttons[5] 
```

现在我想交换这个数组的两个元素，例如buttons[1] 和buttons[2]。我该怎么做呢？只是说明以下内容，不起作用：

```
Button help = buttons[1];
buttons[1] = buttons[2];
buttons[2] = help; 
```

有人可以帮我吗？

我已经使用指针数组解决了：

```
Button *pntArray[5];
Button *help;
pntArray[0]=&buttons[0];
pntArray[1]=&buttons[1];

help=pntArray[0];
pntArray[0]=pntArray[1];
pntArray[1]=help; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T12:37:15.153

`QObject`基类不允许赋值运算符或复制构造函数。除非您手动创建了这些（这通常是[不明智](https://qt-project.org/doc/qt-4.8/object.html#identity-vs-value)的），否则请在堆上声明您的实例并使用数组中的指针。

```
//  Instantiate the buttons however you like, if you were just creating them
//  on the stack before, a default initialisation should suffice.  Though
//  normally in Qt you would at least pass the 'owning' widget as the parent
//  so you don't need to worry about deleting the buttons.
QVector<Button*> buttons(5);
for ( Button* button : buttons ) {  // C++11 only!
    button = new Button();
}

//  Then whenever you need to swap two entries:
std::swap( buttons[1], buttons[2] ); 
```

# visual-studio-2010 - x64 C++/CLI 上的 MSTest

> ID：11413305
> 
> 赞同：1
> 
> 时间：2012-07-10T12:27:31.937
> 
> 标签：visual-studio-2010, visual-c++, c++-cli, mstest, 64-bit

我在 x64 上使用 MSTest 时遇到问题：测试项目依赖于几个 C++/CLI 程序集，并且由于某种原因无法加载。在 Visual Studio 中，我得到（精简）：

`Error loading D:\xxx\Xxx.Test.dll: Unable to load the test container 'D:\xxx\Xxx.Test.dll' or one of its dependencies. Error details: System.BadImageFormatException: Could not load file or assembly 'Common.Geometry.Native, Version=1.1.4574.22395, Culture=neutral, PublicKeyToken=null' or one of its dependencies. An attempt was made to load a program with an incorrect format.`

在命令提示符下手动运行 MSTest，我得到：

`Unable to load the test container 'D:\xxx\Xxx.Test.dll' or one of its dependencies. Error details: System.IO.FileNotFoundException: Could not load file or assembly 'Common.Geometry.Native, Version=1.1.4574.22395, Culture=neutral, PublicKeyToken=null' or one of its dependencies. The system cannot find the file specified.`

值得一提的细节：

*   测试项目本身是使用“Any Cpu”编译的。
*   我使用 x64 特定的 testrunco​​nfig
*   Dependency walker 显示 C++/CLI 程序集 (Common.Geometry.Native) 中没有丢失的本机依赖项
*   更有趣的是，在同一解决方案中还有另一个测试项目使用相同的 C++/CLI 程序集 (Common.Geometry.Native)，它运行时没有任何问题。

我还验证了没有 32 位程序集/dll 干扰。

欢迎任何建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T03:36:07.727

我最初认为微软直到 2012 年才为 MSTest 添加支持 64 位的测试运行器......事实证明，VS2010 能够做到这一点。

然后我要检查的是您的本机 dll 是否有任何其他本机依赖项。

MSTest 有一个“错误功能”，在运行测试之前，它会创建一个临时目录，通常类似于`PC-NAME WORKSPACE_NAME 1782368124\Out`，并将您的代码复制到该目录中。对于 .NET 程序集，它可以找出依赖关系并能够复制它们，但对于本机代码，它似乎没有这样做。

我过去通过将包含任何其他本机依赖项的目录添加到我的用户帐户的 PATH 环境变量中解决了这个问题（请记住，如果您这样做是为了重新启动 Visual Studio，因为它不会注意到）

# c++ - 将EOF重新定义为字符串

> ID：11413308
> 
> 赞同：2
> 
> 时间：2012-07-10T12:27:43.200
> 
> 标签：c++, eof, istream-iterator

我正在尝试编写一个程序来获取一系列单词，将它们放入一个向量中，然后对它们进行处理。我找到了一种可行的方法，即：

```
{
    vector<string> inputs;
    string Input;
    cin >> Input;
    while (Input != "Quit") 
    {
        inputs.push_back(Input);
        cin >> Input;
    }
} 
```

但是我正在尝试使用另一种方法来做到这一点，即：

```
{
    istream_iterator<string> ii(cin);
    istream_iterator<string> eos;
    vector<string> inputs(ii, eos);
} 
```

但我不知道如何制作`Quit`平均 EOF，这将结束输入流并将单词放入向量中。如何使字符串`"Quit"`充当流终止符？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T19:27:40.040

`EOF`定义`-1`为`cstdio`。您可以尝试`#undef EOF`and `#define EOF "Quit"`，但这可能会破坏依赖于`EOF`有符号整数和/或`-1`. 所以基本上，别管它。

# android - 如何解决这个在加载内容之前随机使屏幕变黑的错误？

> ID：11413312
> 
> 赞同：0
> 
> 时间：2012-07-10T12:27:52.767
> 
> 标签：android, error-handling

我正在重新编码其他编码器制作的代码。它使用 SAX 解析器等。当我加载主屏幕时，屏幕首先是黑色的（就像冻结一样），然后加载了布局元素。

这不会经常发生，而是随机发生。我注意到这个错误被捕获了`getPackageInfoItem() NameNotFoundException`。这是堆栈跟踪：

```
07-10 13:11:13.835: ERROR/PackageInfoItemFactory(16118): getPackageInfoItem() NameNotFoundException
android.content.pm.PackageManager$NameNotFoundException: com.app.android
at android.app.ApplicationPackageManager.getApplicationInfo(ApplicationPackageManager.java:214)
at com.sec.android.app.controlpanel.PackageInfoItemFactory.updatePackageInfoItem(PackageInfoItemFactory.java:88)
at com.sec.android.app.controlpanel.PackageInfoItemFactory.updatePackageInfoItem(PackageInfoItemFactory.java:67)
at com.sec.android.app.controlpanel.PackageIntentReceiver.onReceive(PackageIntentReceiver.java:27)
at android.app.ActivityThread.handleReceiver(ActivityThread.java:2131)
at android.app.ActivityThread.access$1500(ActivityThread.java:127)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1209)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:137)
at android.app.ActivityThread.main(ActivityThread.java:4507)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:511)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:790)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:557)
at dalvik.system.NativeStart.main(Native Method) 
```

任何想法如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T12:33:12.677

```
When I load the main screen, the screen is first black (like frozen), but then the layout elements are loaded. 
```

我确定您正在 Activity 的主 UI 线程中进行一些昂贵的 UI 阻塞工作。Spo 将这些代码异步放入[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)中。所以它不会阻止你的用户界面。

```
getPackageInfoItem() NameNotFoundException 
```

当找不到给定的包、应用程序或组件名称时，将引发此异常。所以有时它可能给定的组件没有名称属性。您必须在代码中处理此异常，因为它是随机发生的。

# c# - 在运行时解析成员名称

> ID：11413313
> 
> 赞同：6
> 
> 时间：2012-07-10T12:27:54.593
> 
> 标签：c#, c#-4.0, reflection, c#-5.0, overload-resolution

给定一个*类型*、一个*名称*和一个*签名*，我如何使用 7.4 的 C# 规则（或至少部分的 C# 语言规范中的章节号）对具有名称*名称*和签名*签名*的成员进行成员查找其中...假设我可以**在运行时**接受完全匹配，无需转换/转换） ？我需要得到一个`MethodInfo`/ `PropertyInfo`/... 因为然后我必须将它与反射一起使用（更准确地说，我正在尝试构建一个`Expression.ForEach`构建器（一个能够创建表示`foreach`语句的表达式树的工厂），并且是像素完美的 C#`foreach`我必须能够进行鸭式打字并搜索`GetEnumerator`方法（在集合中），`Current`属性和`MoveNext`方法（在枚举器中），如 8.8.4 中所写）

问题（问题的一个例子）

```
class C1
{
    public int Current { get; set; }

    public object MoveNext()
    {
        return null;
    }
}

class C2 : C1
{
    public new long Current { get; set; }

    public new bool MoveNext()
    {
        return true;
    }
}

class C3 : C2
{
}

var m = typeof(C3).GetMethods(); // I get both versions of MoveNext()
var p = typeof(C3).GetProperties(); // I get both versions of Current 
```

显然，如果我尝试`typeof(C3).GetProperty("Current")`我会得到一个`AmbiguousMatchException`例外。

接口存在类似但不同的问题：

```
interface I0
{
    int Current { get; set; }
}

interface I1 : I0
{
    new long Current { get; set; }
}

interface I2 : I1, I0
{
    new object Current { get; set; }
}

interface I3 : I2
{
} 
```

在这里，如果我尝试做 a`typeof(I3).GetProperties()`我没有得到`Current`属性（这是已知的，例如参见[GetProperties() 以返回接口继承层次结构的所有属性](https://stackoverflow.com/questions/358835/getproperties-to-return-all-properties-for-an-interface-inheritance-hierarchy)），但我不能简单地展平接口，因为那时我不知道谁在隐瞒谁。

我知道这个问题可能在`Microsoft.CSharp.RuntimeBinder`命名空间中的某个地方得到了解决（在程序集中声明`Microsoft.CSharp`）。这是因为我正在尝试使用 C# 规则，并且当您进行动态方法调用时，成员查找是必要的，但我无法找到任何东西（然后我会得到一个`Expression`或可能是直接调用）。

经过一番思考，很明显`Microsoft.VisualBasic`组件中有类似的东西。VB.NET 支持后期绑定。它在 中`Microsoft.VisualBasic.CompilerServices.NewLateBinding`，但它没有公开后期的有界方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T07:55:02.297

（注意：遮蔽 = 隐藏 = C# 中方法/属性/事件定义中的新内容）

没有人回应，所以我将发布我在此期间编写的代码。我讨厌发布 400 行代码，但我想要完整。主要有两种方法：`GetVisibleMethods`和`GetVisibleProperties`。它们是`Type`类的扩展方法。它们将返回一个类型的*公共可见*（非阴影/非覆盖）方法/属性。他们甚至应该处理 VB.NET 程序集（VB.NET 通常使用`hide-by-name`阴影而不是`hidebysig`像 C# 那样）。他们将结果缓存在两个静态集合（`Methods`和`Properties`）中。该代码适用于 C# 4.0，所以我使用的是`ConcurrentDictionary<T, U>`. 如果您使用的是 C# 3.5，您可以用 a 替换它，但是当您读取它和写入它时，您`Dictionary<T, U>`必须用 () { } 保护它。`lock`

它是如何工作的？它通过递归工作（我知道递归通常很糟糕，但我希望没有人会创建一个 1.000 级的继承链）。

对于“真实”类型（非接口），它向上走一级（使用递归，所以这一级可以向上一级，依此类推），并且从返回的方法/属性列表中删除方法/属性它正在超载/隐藏。

对于接口，它有点复杂。`Type.GetInterfaces()`返回所有被继承的接口，忽略它们是直接继承还是间接继承。对于这些接口中的每一个，都会计算声明的方法/属性列表（通过递归）。`HashSet<MethodInfo>`此列表与接口隐藏的方法/属性列表（ / ）配对`HashSet<PropertyInfo>`。这些被一个或另一个接口隐藏的方法/属性将从接口返回的所有其他方法/属性中删除（因此，如果您有`I1`with `Method1(int)`，则`I2`继承自`I1`重新声明`Method1(int)`，并且这样做隐藏`I1.Method1`并`I3`继承自`I1`and ，隐藏`I2`的事实`I2``I1.Method1`将应用于从 explore 返回的方法`I1`，因此删除`I1.Method1(int)`（发生这种情况是因为我没有为接口生成继承映射，我只是看看隐藏了什么））。

从返回的方法/属性集合中，可以使用 Linq 查找查找的方法/属性。请注意，使用接口，您可以找到多个具有给定签名的方法/属性。一个例子：

```
interface I1
{
    void Method1();
}

interface I2
{
    void Method1();
}

interface I3 : I1, I2
{
} 
```

`I3`将返回两个`Method1()`.

编码：

```
using System;
using System.Collections.Concurrent;
using System.Collections.Generic;
using System.Linq;
using System.Reflection;

public static class TypeEx
{
    /// <summary>
    /// Type, Tuple&lt;Methods of type, (for interfaces)methods of base interfaces shadowed&gt;
    /// </summary>
    public static readonly ConcurrentDictionary<Type, Tuple<MethodInfo[], HashSet<MethodInfo>>> Methods = new ConcurrentDictionary<Type, Tuple<MethodInfo[], HashSet<MethodInfo>>>();

    /// <summary>
    /// Type, Tuple&lt;Properties of type, (for interfaces)properties of base interfaces shadowed&gt;
    /// </summary>
    public static readonly ConcurrentDictionary<Type, Tuple<PropertyInfo[], HashSet<PropertyInfo>>> Properties = new ConcurrentDictionary<Type, Tuple<PropertyInfo[], HashSet<PropertyInfo>>>();

    public static MethodInfo[] GetVisibleMethods(this Type type)
    {
        if (type.IsInterface)
        {
            return (MethodInfo[])type.GetVisibleMethodsInterfaceImpl().Item1.Clone();
        }

        return (MethodInfo[])type.GetVisibleMethodsImpl().Clone();
    }

    public static PropertyInfo[] GetVisibleProperties(this Type type)
    {
        if (type.IsInterface)
        {
            return (PropertyInfo[])type.GetVisiblePropertiesInterfaceImpl().Item1.Clone();
        }

        return (PropertyInfo[])type.GetVisiblePropertiesImpl().Clone();
    }

    private static MethodInfo[] GetVisibleMethodsImpl(this Type type)
    {
        Tuple<MethodInfo[], HashSet<MethodInfo>> tuple;

        if (Methods.TryGetValue(type, out tuple))
        {
            return tuple.Item1;
        }

        var methods = type.GetMethods(BindingFlags.DeclaredOnly | BindingFlags.Instance | BindingFlags.Static | BindingFlags.Public);

        if (type.BaseType == null)
        {
            Methods.TryAdd(type, Tuple.Create(methods, (HashSet<MethodInfo>)null));
            return methods;
        }

        var baseMethods = type.BaseType.GetVisibleMethodsImpl().ToList();

        foreach (var method in methods)
        {
            if (method.IsHideByName())
            {
                baseMethods.RemoveAll(p => p.Name == method.Name);
            }
            else
            {
                int numGenericArguments = method.GetGenericArguments().Length;
                var parameters = method.GetParameters();

                baseMethods.RemoveAll(p =>
                {
                    if (!method.EqualSignature(numGenericArguments, parameters, p))
                    {
                        return false;
                    }

                    return true;
                });
            }
        }

        if (baseMethods.Count == 0)
        {
            Methods.TryAdd(type, Tuple.Create(methods, (HashSet<MethodInfo>)null));
            return methods;
        }

        var methods3 = new MethodInfo[methods.Length + baseMethods.Count];

        Array.Copy(methods, 0, methods3, 0, methods.Length);
        baseMethods.CopyTo(methods3, methods.Length);

        Methods.TryAdd(type, Tuple.Create(methods3, (HashSet<MethodInfo>)null));
        return methods3;
    }

    private static Tuple<MethodInfo[], HashSet<MethodInfo>> GetVisibleMethodsInterfaceImpl(this Type type)
    {
        Tuple<MethodInfo[], HashSet<MethodInfo>> tuple;

        if (Methods.TryGetValue(type, out tuple))
        {
            return tuple;
        }

        var methods = type.GetMethods(BindingFlags.DeclaredOnly | BindingFlags.Instance | BindingFlags.Public);

        var baseInterfaces = type.GetInterfaces();

        if (baseInterfaces.Length == 0)
        {
            tuple = Tuple.Create(methods, new HashSet<MethodInfo>());
            Methods.TryAdd(type, tuple);
            return tuple;
        }

        var baseMethods = new List<MethodInfo>();

        var baseMethodsTemp = new MethodInfo[baseInterfaces.Length][];

        var shadowedMethods = new HashSet<MethodInfo>();

        for (int i = 0; i < baseInterfaces.Length; i++)
        {
            var tuple2 = baseInterfaces[i].GetVisibleMethodsInterfaceImpl();
            baseMethodsTemp[i] = tuple2.Item1;
            shadowedMethods.UnionWith(tuple2.Item2);
        }

        for (int i = 0; i < baseInterfaces.Length; i++)
        {
            baseMethods.AddRange(baseMethodsTemp[i].Where(p => !shadowedMethods.Contains(p)));
        }

        foreach (var method in methods)
        {
            if (method.IsHideByName())
            {
                baseMethods.RemoveAll(p =>
                {
                    if (p.Name == method.Name)
                    {
                        shadowedMethods.Add(p);
                        return true;
                    }

                    return false;
                });
            }
            else
            {
                int numGenericArguments = method.GetGenericArguments().Length;
                var parameters = method.GetParameters();

                baseMethods.RemoveAll(p =>
                {
                    if (!method.EqualSignature(numGenericArguments, parameters, p))
                    {
                        return false;
                    }

                    shadowedMethods.Add(p);
                    return true;
                });
            }
        }

        if (baseMethods.Count == 0)
        {
            tuple = Tuple.Create(methods, shadowedMethods);
            Methods.TryAdd(type, tuple);
            return tuple;
        }

        var methods3 = new MethodInfo[methods.Length + baseMethods.Count];

        Array.Copy(methods, 0, methods3, 0, methods.Length);
        baseMethods.CopyTo(methods3, methods.Length);

        tuple = Tuple.Create(methods3, shadowedMethods);
        Methods.TryAdd(type, tuple);
        return tuple;
    }

    private static PropertyInfo[] GetVisiblePropertiesImpl(this Type type)
    {
        Tuple<PropertyInfo[], HashSet<PropertyInfo>> tuple;

        if (Properties.TryGetValue(type, out tuple))
        {
            return tuple.Item1;
        }

        var properties = type.GetProperties(BindingFlags.DeclaredOnly | BindingFlags.Instance | BindingFlags.Static | BindingFlags.Public);

        if (type.BaseType == null)
        {
            Properties.TryAdd(type, Tuple.Create(properties, (HashSet<PropertyInfo>)null));
            return properties;
        }

        var baseProperties = type.BaseType.GetVisiblePropertiesImpl().ToList();

        foreach (var property in properties)
        {
            if (property.IsHideByName())
            {
                baseProperties.RemoveAll(p => p.Name == property.Name);
            }
            else
            {
                var indexers = property.GetIndexParameters();

                baseProperties.RemoveAll(p =>
                {
                    if (!property.EqualSignature(indexers, p))
                    {
                        return false;
                    }

                    return true;
                });
            }
        }

        if (baseProperties.Count == 0)
        {
            Properties.TryAdd(type, Tuple.Create(properties, (HashSet<PropertyInfo>)null));
            return properties;
        }

        var properties3 = new PropertyInfo[properties.Length + baseProperties.Count];

        Array.Copy(properties, 0, properties3, 0, properties.Length);
        baseProperties.CopyTo(properties3, properties.Length);

        Properties.TryAdd(type, Tuple.Create(properties3, (HashSet<PropertyInfo>)null));
        return properties3;
    }

    private static Tuple<PropertyInfo[], HashSet<PropertyInfo>> GetVisiblePropertiesInterfaceImpl(this Type type)
    {
        Tuple<PropertyInfo[], HashSet<PropertyInfo>> tuple;

        if (Properties.TryGetValue(type, out tuple))
        {
            return tuple;
        }

        var properties = type.GetProperties(BindingFlags.DeclaredOnly | BindingFlags.Instance | BindingFlags.Public);

        var baseInterfaces = type.GetInterfaces();

        if (baseInterfaces.Length == 0)
        {
            tuple = Tuple.Create(properties, new HashSet<PropertyInfo>());
            Properties.TryAdd(type, tuple);
            return tuple;
        }

        var baseProperties = new List<PropertyInfo>();

        var basePropertiesTemp = new PropertyInfo[baseInterfaces.Length][];

        var shadowedProperties = new HashSet<PropertyInfo>();

        for (int i = 0; i < baseInterfaces.Length; i++)
        {
            var tuple2 = baseInterfaces[i].GetVisiblePropertiesInterfaceImpl();
            basePropertiesTemp[i] = tuple2.Item1;
            shadowedProperties.UnionWith(tuple2.Item2);
        }

        for (int i = 0; i < baseInterfaces.Length; i++)
        {
            baseProperties.AddRange(basePropertiesTemp[i].Where(p => !shadowedProperties.Contains(p)));
        }

        foreach (var property in properties)
        {
            if (property.IsHideByName())
            {
                baseProperties.RemoveAll(p =>
                {
                    if (p.Name == property.Name)
                    {
                        shadowedProperties.Add(p);
                        return true;
                    }

                    return false;
                });
            }
            else
            {
                var indexers = property.GetIndexParameters();

                baseProperties.RemoveAll(p =>
                {
                    if (!property.EqualSignature(indexers, p))
                    {
                        return false;
                    }

                    shadowedProperties.Add(p);
                    return true;
                });
            }
        }

        if (baseProperties.Count == 0)
        {
            tuple = Tuple.Create(properties, shadowedProperties);
            Properties.TryAdd(type, tuple);
            return tuple;
        }

        var properties3 = new PropertyInfo[properties.Length + baseProperties.Count];

        Array.Copy(properties, 0, properties3, 0, properties.Length);
        baseProperties.CopyTo(properties3, properties.Length);

        tuple = Tuple.Create(properties3, shadowedProperties);
        Properties.TryAdd(type, tuple);
        return tuple;
    }

    private static bool EqualSignature(this MethodInfo method1, int numGenericArguments1, ParameterInfo[] parameters1, MethodInfo method2)
    {
        // To shadow by signature a method must have same name, same number of 
        // generic arguments, same number of parameters and same parameters' type
        if (method1.Name != method2.Name)
        {
            return false;
        }

        if (numGenericArguments1 != method2.GetGenericArguments().Length)
        {
            return false;
        }

        var parameters2 = method2.GetParameters();

        if (!parameters1.EqualParameterTypes(parameters2))
        {
            return false;
        }

        return true;
    }

    private static bool EqualSignature(this PropertyInfo property1, ParameterInfo[] indexers1, PropertyInfo property2)
    {
        // To shadow by signature a property must have same name, 
        // same number of indexers and same indexers' type
        if (property1.Name != property2.Name)
        {
            return false;
        }

        var parameters2 = property1.GetIndexParameters();

        if (!indexers1.EqualParameterTypes(parameters2))
        {
            return false;
        }

        return true;
    }

    private static bool EqualParameterTypes(this ParameterInfo[] parameters1, ParameterInfo[] parameters2)
    {
        if (parameters1.Length != parameters2.Length)
        {
            return false;
        }

        for (int i = 0; i < parameters1.Length; i++)
        {
            if (parameters1[i].IsOut != parameters2[i].IsOut)
            {
                return false;
            }

            if (parameters1[i].ParameterType.IsGenericParameter)
            {
                if (!parameters2[i].ParameterType.IsGenericParameter)
                {
                    return false;
                }

                if (parameters1[i].ParameterType.GenericParameterPosition != parameters2[i].ParameterType.GenericParameterPosition)
                {
                    return false;
                }
            }
            else if (parameters1[i].ParameterType != parameters2[i].ParameterType)
            {
                return false;
            }
        }

        return true;
    }

    private static bool IsHideByName(this MethodInfo method)
    {
        if (!method.Attributes.HasFlag(MethodAttributes.HideBySig) && (!method.Attributes.HasFlag(MethodAttributes.Virtual) || method.Attributes.HasFlag(MethodAttributes.NewSlot)))
        {
            return true;
        }

        return false;
    }

    private static bool IsHideByName(this PropertyInfo property)
    {
        var get = property.GetGetMethod();

        if (get != null && get.IsHideByName())
        {
            return true;
        }

        var set = property.GetSetMethod();

        if (set != null && set.IsHideByName())
        {
            return true;
        }

        return false;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T12:35:12.173

使用带`BindingFlags`参数的重载方法。

```
GetProperties(BindingFlags.DeclaredOnly) 
```

# shopify - 无法将产品添加到自定义集合

> ID：11413318
> 
> 赞同：1
> 
> 时间：2012-07-10T12:28:00.370
> 
> 标签：shopify

使用 shopify gem 我正在尝试将产品添加到自定义集合中。

```
c = ShopifyAPI::CustomCollection.first(:title => "Man")
p = ShopifyAPI::Product.find(95448374) 
```

如果我尝试：

```
c.products << p
c.save
=> true 
```

但该产品并未添加到自定义集合中。

我也试过

```
p.collections << c
p.save
=> true 
```

但是产品仍然没有添加到集合中……为什么？

任何帮助是极大的赞赏！

奥古斯托

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T12:48:03.643

您的答案在于来源：

[https://github.com/Shopify/shopify_api/blob/master/lib/shopify_api/resources/product.rb#L30](https://github.com/Shopify/shopify_api/blob/master/lib/shopify_api/resources/product.rb#L30)

您必须使用 add_to_collection 或 add_product 方法，因为它们创建了一个 Collect 对象，我们使用它来关联产品和集合。

# iphone - 从嵌套文件夹结构中加载带有本地 HTML 文件的 UIWebview

> ID：11413319
> 
> 赞同：4
> 
> 时间：2012-07-10T12:28:02.107
> 
> 标签：iphone, uiwebview

具体来说，我有一个如下所示的文件夹结构：

*   关于（主文件夹）
    *   css（这个子文件夹包含 css 文件）
    *   img（此子文件夹包含 img 文件）
    *   js（此子文件夹包含 js 文件）
    *   页面（此子文件夹包含 index.html 文件）

如果我从普通计算机浏览器单击 index.html 文件，一切都会按预期工作。

但是，我正在尝试将此 index.html 加载到`UIWebView`.

到目前为止，我所做的是将“about”文件夹拖到 XCode 并将其复制到那里，就像我复制任何其他文件一样。然后我尝试了以下代码：

```
NSString *htmlFile = [[NSBundle mainBundle] pathForResource:@"index" ofType:@"html"];
NSData *htmlData = [NSData dataWithContentsOfFile:htmlFile];
NSURL *baseURL = [NSURL fileURLWithPath:[[NSBundle mainBundle] resourcePath]];
[webView loadData:htmlData MIMEType:@"text/html" textEncodingName:@"UTF-8" baseURL:baseURL]; 
```

webview 加载 index.html，但它不加载图像/css/js，因为我认为它无法在文件夹结构中找到它们。

任何帮助，将不胜感激！谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-10T12:41:21.383

哎呀，我居然在这里找到了答案： [Load resources from relative path using local html in uiwebview](https://stackoverflow.com/questions/6420925/load-resources-from-relative-path-using-local-html-in-uiwebview)

我能够使用以下代码的实际文件夹结构：

```
NSURL *url = [NSURL fileURLWithPath:[[NSBundle mainBundle] pathForResource:@"index" ofType:@"html" inDirectory:@"/about/page"]];
[webView loadRequest:[NSURLRequest requestWithURL:url]]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T12:36:28.540

而不是`images/css/js`仅使用`sample.js`.

# javascript - 如何在初始页面呈现时显示 indexDB 数据

> ID：11413322
> 
> 赞同：1
> 
> 时间：2012-07-10T12:28:10.243
> 
> 标签：javascript

我有一个使用 JavaScript 的网页，其中缓存了大量数据，用于填充 select 语句的选项标签。我已经使用 localStorage 实现了这个，但它非常慢（从服务器重新生成/重新加载会快得多）。IndexDB 看起来很有希望作为一种解决方案。

我能够找到的所有示例都打开了 indexDB 数据库，如有必要，请升级（配置/加载）。但是，为了显示 indexDB 数据，示例实现了一个带有 onclick 功能的按钮。我想要的是在页面的第一次呈现时显示 indexDB 数据（以加载 select 语句的选项标签）。

我曾尝试这样做，但似乎因为异步回调使我无法在页面的初始呈现上创建事务，因此无法读取 indexDB 数据。

有没有办法在第一页渲染时读取 indexDB 数据？

谢谢！

# sql-server - 无法连接到 SQL Server，错误：0 - 无法建立连接，因为目标计算机主动拒绝它

> ID：11413323
> 
> 赞同：3
> 
> 时间：2012-07-10T12:28:17.597
> 
> 标签：sql-server

我是 SQL 相关问题的新手，所以请坦白我缺乏知识并提出一个以前被问过无数次的问题。

我必须连接到位于远程位置 xxx.xx.xxx.xx:3306 的 SQL 数据库服务器，但每次尝试连接时都会遇到相同的错误：

> “在建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。找不到或无法访问服务器。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。（提供者： TCP 提供程序，错误：0 - 由于目标机器主动拒绝，无法建立连接。）”

无论我尝试使用 SQL Server Management Studio 连接还是通过以下方式在 C# 程序中连接，我都会收到同样的错误：

```
 SqlConnection myConnection = new SqlConnection(...)
 myConnection.Open(); 
```

我已经在同一个家庭网络上的两台不同的计算机上进行了尝试。我查看了安装 SQL Server 的计算机上的 SQL Server 配置管理器，启用 TCP/IP 并调整端口值设置，但我猜这只是为了在我的计算机上配置 SQL 服务器并且与连接到远程无关。我什至不需要安装 SQL 服务器来在远程服务器上进行查询，对吧？

我已经关闭了我的 Windows 防火墙和路由器防火墙，但[ShieldsUP](https://www.grc.com/x/ne.dll?bh0bkyd2)仍然说

> 端口：3306 状态：隐身
> 
> 您的系统已获得完美的“TruStealth”评级。由于我们的安全探测测试，没有从您的系统收到任何一个数据包（无论是请求的还是其他的）。您的系统忽略并拒绝回复重复的 Ping（ICMP 回显请求）。从任何黑客的路过探测的角度来看，这台机器在互联网上是不存在的。一些有问题的个人安全系统通过尝试“反探测探测器”来暴露其用户，从而暴露自己。但是您的系统明智地在各个方面保持沉默。非常好。

我读到这也无关紧要，因为我不是托管服务器的人，但是当我得到地址时，我也得到了端口，所以我必须对它做点什么。我只是不确定是什么。我对端口的理解真的很不稳定。

我已经尝试了一天多，我想不出我还能做些什么。

编辑：我解决了这个问题。我必须使用 MySQL，而不是 MSSQL。多哈。对不起大家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T12:56:22.617

如果您确定远程 SQL Server 正在端口 3306 上运行（否则我不确定您为什么在问题中专门谈到该端口），请尝试以下连接字符串：

```
user id=username; password=password;
data source=123.45.678.90,3306; 
initial catalog=dbname; 
Network Library=dbmssocn; 
```

我认为如果没有端口，如果另一端禁用​​了 SQL Browser 服务，您将遇到麻烦。您还应该确保它不是命名实例，在这种情况下您可能需要：

```
user id=username; password=password;
data source=123.45.678.90\InstaneName,3306; 
initial catalog=dbname; 
Network Library=dbmssocn; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T12:36:47.323

首先数据库是本地的还是远程的？你必须确保你的连接字符串写得很好。这是一个有效连接字符串的示例：

```
Data Source=myServerAddress;Initial Catalog=myDataBase;User Id=myUsername;Password=myPassword; 
```

有关连接字符串的更多信息： [连接字符串](http://www.connectionstrings.com/sql-server-2008)

现在，如果一切设置正确，您必须在主机上启用与 SQL Server 的远程连接。为此，请参阅本文： [启用 SQL Server 远程连接](http://blogs.msdn.com/b/walzenbach/archive/2010/04/14/how-to-enable-remote-connections-in-sql-server-2008.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-05-18T04:30:06.610

只需转到 ypur services 并检查您的**SQL Server (MSSQLSERVER)**是否正在运行。大多数情况下，此错误发生在 SQL Server (MSSQLSERVER) 停止时。 [![在此处输入图像描述](../Images/85885423199f636f048cfbe1ec9309e8.png)](https://i.stack.imgur.com/0WHbV.png)

然后选择它右键单击并单击开始。问题解决了！！！

# csv - 构建大型线性规划

> ID：11413327
> 
> 赞同：2
> 
> 时间：2012-07-10T12:28:36.970
> 
> 标签：csv, large-files, linear-programming, ampl

我想构建一个 LP，其参数由 5 到 10 个 25,000,000 到 50,000,000 行 .csv 文件（每个大约 500mb 到 1Gb）给出。

我的模型目前使用 AMPL 编码，并直接从 .csv 文件中读取参数值。我正在使用的具有 1 Gb RAM 的 Windows XP 内存不足，试图基于仅来自一个 500mb .csv 的数据构建模型

我的问题：有没有办法管理我的数据，以便我可以使用更少的内存构建 LP？

我感谢任何有建立大规模 LP 经验的人的所有反馈。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T20:06:25.970

如果您的计算机上只有 1 GB 的 RAM，那么很难看到您能够加载和解决仅*.csv文件就有 500 MB 或更多的大问题。*

如果不能选择增加更多的 RAM 内存，则需要分析 LP 问题以查看是否可以将其分成更小的独立部分。例如，如果您有 10,000 个变量和 10,000,000 行的问题，也许可以将主要问题分解为 100 个独立的子问题，每个子问题有 100 个变量和 100,000 行？

[这](http://web.mit.edu/15.053/www/AMP-Chapter-12.pdf)是一个链接到一个尽管过时的书籍章节，该章节讨论了将大型 LP 问题分离为可管理的子问题。

# javascript - 将子框架中的点击事件捕获到父框架中

> ID：11413328
> 
> 赞同：5
> 
> 时间：2012-07-10T12:28:36.890
> 
> 标签：javascript, jquery, iframe, click, jquery-events

没错，这很奇怪。我已经进行了大量的谷歌搜索，发现了数百篇似乎为我指明了正确方向的文章，但似乎没有一个有效。

这是我正在尝试做的最新版本：

父页面

```
<html>
<head>
    <script>
    $('#mainWindow').ready(function () {
       $('#mainWindow').contents().find('#clickThis').live('click', function () {
           alert('Click detected!');
        });
    });
    </script>
</head>
<body>
    <iframe id="mainWindow" name="mainWindow" src="myMainPage.aspx" style="border: 0; position:fixed; top:0; left:0; right:0; bottom:0; width:100%; height:100%"></iframe>
    <iframe src="myOtherPage.aspx"></iframe>
</body>
</html> 
```

框架页面（位于主窗口中）

```
<html>
    ' LOADS OF STUFF INCLUDING:
    <li id="clickThis">Click This</li>
</html> 
```

所以很明显我在这里要做的是在用户单击子框架中的按钮时在父页面中运行一些代码。

它需要工作`live`，因此如果框架中的页面发生更改，它仍会被父级捕获（此元素存在于将加载到框架中的所有页面上）

在各种其他搜索之后，我已经能够跨 iFrame、从父级到 iFrame 以及从 iFrame 到 iFrame 运行代码，但是从 iFrame 到父级运行会导致问题。

上面的代码什么都不做，我尝试过的任何其他选项也没有！

***编辑**应该添加，所有文件都在同一台服务器上，跨域问题不是问题

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T12:59:17.070

[这对我来说很好](http://jsfiddle.net/xNGA9/75/)：

```
$('#myframe').contents().on('click', function () {
    $('#result').text('clicked');
});​ 
```

*如果您想仅在内容文档的一部分上捕获事件，请使用[`.contents().find(<selector>)`](http://api.jquery.com/find/)( `<selector>`being eg `'body'`) 而不是仅仅`.contents()`*

**注意事项**：您的所有页面都必须存在于同一目录下，`document.domain`否则 JavaScript 调用将失败。您将在控制台中看到这作为安全异常出现。发生这种情况是由于[同源策略](http://en.wikipedia.org/wiki/Same-origin_policy)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-12-22T19:14:53.060

方式，答案太晚了，但我遇到了同样的问题，下面的代码适用于所有浏览器：

```
$('#myiframe').on('load', function () {
   $(this).contents().on('click', function () {
      alert('Click detected!');
   })
}) 
```

它附加`onclick`处理程序，但仅在加载 iframe 之后。我将这里留给后代和其他任何寻找相同问题答案的人。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-01-11T11:39:45.760

如果您还想在 iframe 中捕获一些数据，这将适用于您：有一个 iframe 元素，其中包含多个图像。iframe 在父页面内呈现。无论您在 iframe 中单击哪个图像，该图像的 id 都会发送回父级。

内嵌框架：

```
<script>
function vote(e) {
            myMessage = e;
            window.parent.postMessage(myMessage, "*");
            return false;
        }
</script>

        <body><div>
        <img id="Image1" src="file:///Users/abcd/Desktop/1.jpeg" width="200px" onclick="vote(this.id)">
        </div></body> 
```

内部父页面：

```
</script>
function displayMessage (evt) {
        var message = "You voted " + evt.data;
        document.getElementById("received-message").innerHTML = message;
    }

    if (window.addEventListener) {
        // For standards-compliant web browsers
        window.addEventListener("message", displayMessage, false);
    }
    else {
        window.attachEvent("onmessage", displayMessage);
    }
</script>

 <body><div id="received-message"></div></body> 
```

这不仅会捕获点击，还会捕获 iframe 内被点击的元素的 id。此外，这不需要 JQuery。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T12:40:58.757

为什么要使用`find`将事件侦听器绑定到可能不存在的元素？为什么不试试：

```
$('#mainWindow').ready(function()
{
    $('#clickThis').on('click',function()
    {
        alert($(this).html());//or something
    });
}); 
```

顺便说一句：由于您的代码在 的 ready 回调中`#mainWindow`，因此无需`$('#mainWindow')`第二次使用，因为这将再次扫描 DOM 树。只需使用`this`or `$(this)`，因为它无论如何都会引用 mainWindow 元素。

如果 on 对您不起作用，请不要忘记检查您是否也包含最新版本的 jQuery。这也可能是 on 不起作用的原因。

# android - 相对布局使用线程更改背景颜色

> ID：11413332
> 
> 赞同：0
> 
> 时间：2012-07-10T12:28:50.013
> 
> 标签：android

我正在尝试更改相对布局背景颜色，例如闪烁首先设置为绿色，然后在相对布局中设置白色背景颜色。但是，我的问题线程执行第二次强制关闭错误并尝试修复很多方法但不起作用。这是我的代码：

```
 isThreadRunning = true;
       relative=(RelativeLayout) findViewById(R.id.layout);
       Runnable runnable = new Runnable() {
                 public void run() {
                   int i=0;
                   while(isThreadRunning) {
                       if(i==0)
                       {
                       relative.setBackgroundColor(Color.GREEN);
                       i=1;
                       }
                       else
                       {
                         relative.setBackgroundColor(Color.BLACK);
                         i=0;
                       }
                       try {
                        Thread.sleep(1000);
                    } catch (InterruptedException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    } 

                   }
               }
               };
               new Thread(runnable).start(); 
```

我在 logcat 中遇到错误，如下所示：

```
07-10 17:48:42.752: W/dalvikvm(2060): threadid=9: thread exiting with uncaught exception (group=0x40015560)
07-10 17:48:42.756: E/AndroidRuntime(2060): FATAL EXCEPTION: Thread-10
07-10 17:48:42.756: E/AndroidRuntime(2060): android.view.ViewRoot$CalledFromWrongThreadException: Only the original thread that created a view hierarchy can touch its views.
07-10 17:48:42.756: E/AndroidRuntime(2060):     at android.view.ViewRoot.checkThread(ViewRoot.java:2932)
07-10 17:48:42.756: E/AndroidRuntime(2060):     at android.view.ViewRoot.invalidateChild(ViewRoot.java:642)
07-10 17:48:42.756: E/AndroidRuntime(2060):     at android.view.ViewRoot.invalidateChildInParent(ViewRoot.java:668)
07-10 17:48:42.756: E/AndroidRuntime(2060):     at android.view.ViewGroup.invalidateChild(ViewGroup.java:2511)
07-10 17:48:42.756: E/AndroidRuntime(2060):     at android.view.View.invalidate(View.java:5279)
07-10 17:48:42.756: E/AndroidRuntime(2060):     at android.view.View.setBackgroundDrawable(View.java:7626)
07-10 17:48:42.756: E/AndroidRuntime(2060):     at android.view.View.setBackgroundColor(View.java:7516)
07-10 17:48:42.756: E/AndroidRuntime(2060):     at com.example.screen_blinker.Home_activity$1.run(Home_activity.java:44)
07-10 17:48:42.756: E/AndroidRuntime(2060):     at java.lang.Thread.run(Thread.java:1019) 
```

我的代码有什么问题以及如何解决这个问题？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T12:33:26.130

您只能在主线程中更改视图元素。如果您在另一个线程中，请使用以下命令：

```
 Current_Activity.this.runOnUiThread(new Runnable() {

                @Override
                public void run() {
                    // TODO Auto-generated method stub

                }
            }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T12:33:40.030

您需要在 GUI 线程上执行与 GUI 相关的任务。

`relative.setBackgroundColor(Color.GREEN);`像这样包裹你`runOnUiThread`：

```
Current_Activity.this.runOnUiThread(new Runnable() {
        @Override
        public void run() {
            relative.setBackgroundColor(Color.GREEN);               
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T12:34:26.833

将代码更改为使用[runOnUiThread](http://www.google.co.in/url?sa=t&rct=j&q=runonuithread&source=web&cd=1&sqi=2&ved=0CFQQFjAA&url=http://developer.android.com/reference/android/app/Activity.html&ei=YyH8T5rCPJDkrAef2LDBBg&usg=AFQjCNEVbcf_xF52Np66Qp881y0W1JzaTQ)从非 UI 线程更新 UI 元素：

```
public void myThread(){
    Thread th=new Thread(){

     @Override
     public void run(){
      try
      {
       while(isThreadRunning)
       {
       Thread.sleep(1000);
       Current_Activity.this.runOnUiThread(new Runnable() {

        @Override
        public void run() {
         // TODO Auto-generated method stub
             if(i==0)
            {
               relative.setBackgroundColor(Color.GREEN);
               i=1;
            }
            else
              {
               relative.setBackgroundColor(Color.BLACK);
               i=0;
              }

           }
       });
       }
      }catch (InterruptedException e) {
    // TODO: handle exception
   }
}
    };
    th.start();
   } 
```

# linux - Ubuntu：“启动应用程序”中的 shell 脚本

> ID：11413334
> 
> 赞同：0
> 
> 时间：2012-07-10T12:28:57.317
> 
> 标签：linux, shell, ubuntu

我在我的 Ubuntu 来宾操作系统上有一个简单的 shell 脚本（通过 VirtualBox 运行）：称为“add_share.sh”我可以使用 sudo 运行它（我不是 Ubuntu 上的 root 用户）所以我试图在自动运行中添加这个脚本（ “Dash home” -> “启动应用程序”）：

```
bash /home/rusty/add_share.sh 
```

脚本文件的权限是：-rwxrwxr-x 但系统重启后脚本不运行。我认为问题出在非 root 访问权限中，那我该怎么办？我可以将此脚本添加到自动运行而不以 root 身份登录吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T19:17:27.573

添加到 sudoers 文件 (/etc/sudoers): yourusername ALL=(ALL) NOPASSWD: /home/rusty/add_share.sh

# extjs - ExtJS 4.1 MVC：如何在加载时将 LoadMask 应用于视口？

> ID：11413337
> 
> 赞同：6
> 
> 时间：2012-07-10T12:29:08.740
> 
> 标签：extjs, extjs-mvc, extjs4.1

如何在加载所需文件时为[标准 ExtJS MVC 应用程序的视口应用](http://docs.sencha.com/ext-js/4-1/#!/guide/application_architecture)[LoadMask ？](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.LoadMask)

这种 MVC 应用程序的一个示例是以下代码段`app.js`：

```
Ext.Loader.setConfig({enabled:true});

Ext.application({
    requires: [
       'Ext.container.Viewport',
    ],

    name: 'APP',
    appFolder: 'app',

    controllers: [
        'Main'
    ],

    launch: function() {

        Ext.create('Ext.container.Viewport', {
            layout: 'fit',
            items: [
                {
                    xtype: 'main'
                }               
            ]
        });
    }
}); 
```

其中`main`上面是`xtype`MVC 视图，它可能扩展 ExtJS`Panel`等。

是否存在针对这种*普遍*需求的标准方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T13:56:47.823

您要做的是在 index.html 文件中显示加载图像。类似的东西：

```
<div id="page-loader">  
    <img style="position:absolute; width:128px; height:15px; left:50%; top:50%; margin-left:-64px; margin-top: -7px;" src="resources/images/loader.gif" />
</div> 
```

然后将其隐藏`div`在您的`launch()`函数中：

```
if (Ext.get('page-loader')) {
    Ext.get('page-loader').remove();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-05T14:33:51.547

第一个解决方案很好。另一种选择是：

[http://blog.newbridgegreen.com/extjs-4-splash-screen/](http://blog.newbridgegreen.com/extjs-4-splash-screen/)

# node.js - Jade.js 表和变量

> ID：11413344
> 
> 赞同：0
> 
> 时间：2012-07-10T12:29:23.213
> 
> 标签：node.js, pug

如果我使用我在页面上定义的变量，我可以轻松地在 Jade 中创建一个表，但是一旦我尝试使用其他任何东西，它就会打印出一张没有任何内容的长表。

例如，我可以使用以下代码生成一个表格：

```
table
  thead
    tr
      th Bid ID
      th Bid Value
  tbody
    items = [ {"bid_id":1, "bid_value":1.63},{"bid_id":2, "bid_value":1.75},{"bid_id":3, "bid_value":1.00} ]
    each item, i in items
      tr
        td #{item.bid_id}
        td #{item.bid_value} 
```

但是，当我尝试使用以下内容时，我得到一个非常长的桌子，完全是空的！

```
table
  thead
    tr
      th Bid ID
      th Bid Value
  tbody
    items = all_bids
    each item, i in items
      tr
        td #{item.bid_id}
        td #{item.bid_value} 
```

all_bids 包含与上面明确定义的完全相同的 JSON。如果我使用以下命令在 Jade 视图中打印它：

```
p= all_bids 
```

它将数组正确打印为：

[ {"bid_id":1, "bid_value":1.63},{"bid_id":2, "bid_value":1.75},{"bid_id":3, "bid_value":1.00} ]

努力寻找有关在 Jade 中创建表格的任何体面文档，因此我们将不胜感激！

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T12:51:48.117

所以......是`all_bids`一个**数组**或者它可能是一个json**字符串**？在您的情况下，这似乎`all_bids`是一个字符串。在这种情况下`each`，循环遍历字符，并且由于字符既没有`bid_id`也没有`bid_value`属性，您将获得一个大而空的表。

现在我是怎么想出这些东西的？让我们试着当侦探片刻，好吗？:) 看看这一行：`p= all_bids`。它产生这个输出：

```
[ {"bid_id":1, "bid_value":1.63},{"bid_id":2, "bid_value":1.75},{"bid_id":3, "bid_value":1.00} ] 
```

通常，如果它是一个数组，您会得到：

```
"[object Object],[object Object],[object Object]" 
```

因为`.toString()`电话（发生在幕后）。因此`all_bids` **不是**数组，而是字符串！

当您传递`all_bids`给 Jade 时，尝试将其转换为对象，即`JSON.parse(all_bids);`.

# jquery - 将 c# 列表绑定到 jQuery 模板

> ID：11413345
> 
> 赞同：1
> 
> 时间：2012-07-10T12:29:25.650
> 
> 标签：jquery, asp.net-mvc, webforms, jquery-templates

将 C# List 绑定到 jQuery 模板的最佳方法是什么？到目前为止，我发现的唯一方法如下：

```
JavaScriptSerializer serializer = new JavaScriptSerializer();
var jsonData  = serializer.Serialize(ListOfObjects);
Response.Write("<script type='text/javascript'>var jsonData = " + jsonData  + ";</script>"); 
```

在页面上：

```
$("div").html($("#myTemplate").tmpl(jsonData ));

<script id="myTemplate" type="text/x-jquery-tmpl">
  ${}
</script> 
```

有什么更好的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T16:01:56.833

使用 ASMX 网络服务，或`WebMethod`在您的 ASPX 页面中，.NET 很好地将您序列`List<Object>`化为 JavaScript 对象数组：

```
[{Prop1: value, Prop2: value}, {Prop1: value2, Prop2: value2}] 
```

有关更多信息，请参阅[https://stackoverflow.com/a/11314818/622129](https://stackoverflow.com/a/11314818/622129)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T15:47:56.300

不确定您的服务器端架构是什么样的，但是使用类似于本文中显示的技术对Web 服务（WCF 或其他）或[HttpHandler进行 jQuery ajax 调用会更简洁：](http://kartones.net/blogs/kartones/archive/2010/06/07/ajax-in-asp-net-using-only-httphandlers-and-javascript.aspx)

[http://www.diplo.co.uk/blog/2011/3/1/using-jquery-templates-to-bind-to-json-data.aspx](http://www.diplo.co.uk/blog/2011/3/1/using-jquery-templates-to-bind-to-json-data.aspx)

此示例使用 JSONP，如果没有跨域调用，则不需要它。

```
<script id="flickrTemplate" type="text/x-jquery-tmpl">
    <li>${title}</li>
</script>

<script type="text/javascript">
    $(document).ready(function()
    {
        $.ajax({
            url: "http://api.flickr.com/services/feeds/photos_public.gne",
            data: "format=json",
            jsonp: "jsoncallback",
            dataType: "jsonp",
            success: function(data)
            {
                $("#flickrTemplate").tmpl(data.items).appendTo("#placeholder");
            }
        });
    });
</script>

<ul id="placeholder"></ul> 
```

# java - 从 Play 框架调用 Restlet 服务

> ID：11413350
> 
> 赞同：0
> 
> 时间：2012-07-10T12:29:48.647
> 
> 标签：java, web-services, playframework, restlet

有一个使用 Restlet 实现的应用程序提供服务。

我有一个用 Play 编写的 Web 应用程序！应该从上述应用程序调用服务的框架。

我正在使用以下代码：

```
 HttpResponse resp = WS.url("http://blabla/bla").get();
    contact = resp.getString(); 
```

是否可以接收 java 对象而不仅仅是字符串或 xml？我可以在我的播放应用程序中以某种方式将提交资源的接口“附加”到 WS 吗？

或者我可以简单地在我的游戏应用程序中使用 Restlet？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T20:55:37.067

您不能使用 JAXB 之类的东西将 XML 转换为 Java 对象吗？[请参见此处](http://www.mkyong.com/java/jaxb-hello-world-example/)。JAXB 应该足够强大以满足您的需求。

# c# - FluentCassandra 使用 CQL 选择时间戳范围

> ID：11413352
> 
> 赞同：1
> 
> 时间：2012-07-10T12:29:57.040
> 
> 标签：c#, select, range, cql, fluentcassandra

我的 DAL 中有一个方法可以使用 CQL 查询选择对象。我正在尝试按如下方式传递时间间隔：

```
//FilterStartTime, FilterEndTime are of type DateTime, stored in config
// converting DateTime to unix timestamp
var start = (FilterStartTime - new DateTime(1970, 1, 1).ToLocalTime()).TotalSeconds;
var end = (FilterEndTime - new DateTime(1970, 1, 1).ToLocalTime()).TotalSeconds;
// UploadedOn is of type timestamp
var selectQuery2 = "SELECT * FROM MyColumnFamily WHERE DocumentKey=" + key
                            + " AND UploadedOn>=" + start
                            + " AND UploadedOn<=" + end;
//"SELECT * FROM MyColumnFamily WHERE DocumentKey=000001 AND UploadedOn>=1341093600 AND UploadedOn<=1343599200" 
```

数据库包含指定范围内的记录。上面的查询虽然返回 0 个元素。CQL 的使用不是必需的，所以我可能已经使用过 API，但是没有 Fetch 方法了（http://stackoverflow.com/questions/5325035/fluentcassandra-range-selection-problem），我仍然想知道我的查询有什么问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T08:17:32.940

在转换中将秒更改为毫秒，重新创建数据库并且一切正常。

```
var start = (FilterStartTime - new DateTime(1970, 1, 1).ToLocalTime()).TotalMilliseconds;
var end = (FilterEndTime - new DateTime(1970, 1, 1).ToLocalTime()).TotalMilliseconds; 
```

仍然对如何在 API 中执行相同的请求感兴趣（使用 SlicePredicateQuery？）。

# iphone - UITableView 内存泄漏与 imageWithContentsOfFile

> ID：11413355
> 
> 赞同：3
> 
> 时间：2012-07-10T12:30:16.337
> 
> 标签：iphone, ios, xcode, memory, memory-leaks

`UITableView`对于标准图像/文本视图，我正在泄漏内存。我正在加载图像`imageWithContentsOfFile`并将其分配给我`cell`的`imageView.image`.

此图像不会自动释放，我必须迭代`-dealloc`方法中的单元格并将其设置为 0。

但是每次我展示我的时候我仍然会失去记忆`UITableView`，我真的不知道为什么。我还`autorelease`从单元格中删除了它并尝试手动释放它，但我仍然失去记忆。

亚历克斯

```
- (id) initWithProfils:(ColorPainterProfiles*) profils listener:(NSObject<ColorPainterTableListener>*) listener{
    self = [super init];
    if (self) {
        _listener=listener;
        _profils=profils;        
    }
    return self;
}

- (void)dealloc
{
    for (int section = 0; section < [self.tableView numberOfSections]; section++) {
        for (int row = 0; row < [self.tableView numberOfRowsInSection:section]; row++) {
        NSIndexPath* cellPath = [NSIndexPath indexPathForRow:row inSection:section];
        UITableViewCell* cell = [self.tableView cellForRowAtIndexPath:cellPath];
        cell.imageView.image=0;
        //[cell release];
        }
    }

    [super dealloc];
}

- (void)didReceiveMemoryWarning
{
    // Releases the view if it doesn't have a superview.
    [super didReceiveMemoryWarning];

    // Release any cached data, images, etc that aren't in use.
}

#pragma mark - View lifecycle

- (void) viewWillAppear:(BOOL)animated {
    [super viewWillAppear:animated];
}

// Implement loadView to create a view hierarchy programmatically, without using a nib.
- (void)loadView
{

    //((UILabel*)self.navigationItem.titleView).text=NSLocalizedString(@"Change Picture", @""); 

}

- (void) setTableView:(UITableView *)tableView {
    [super setTableView:tableView];
    self.tableView.delegate=self;
    self.tableView.dataSource=self;
    if ([LibTools isIPad]) {
        self.tableView.rowHeight=self.tableView.rowHeight*3;
    } else {
        self.tableView.rowHeight=self.tableView.rowHeight*2;
    }

}

- (void)viewDidUnload
{
    [super viewDidUnload];
}

- (BOOL)tableView:(UITableView *)tableView canEditRowAtIndexPath:(NSIndexPath *)indexPath {
    return YES;
}

- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath
{
    // If row is deleted, remove it from the list.
    if (editingStyle == UITableViewCellEditingStyleDelete)
    {
        // delete your data item here
        [_profils deleteAt:[_profils.profils objectAtIndex:indexPath.row]];
        [_profils removeProfileAt:indexPath.row];
        // Animate the deletion from the table.
        [self.tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade];
    }
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
    [_listener actionColorPainterTable:[_profils.profils objectAtIndex:indexPath.row] sender:self];
}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
    // There is only one section.
    return 1;
}

- (NSInteger) numberOfRows {
           return _profils.profils.count;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    return [self numberOfRows];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    static NSString *MyIdentifier = @"ManageModels";

    // Try to retrieve from the table view a now-unused cell with the given identifier.
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:MyIdentifier];

    // If no cell is available, create a new one using the given identifier.
    if (cell == nil) {
        // Use the default cell style.
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:MyIdentifier] autorelease];
    } else {
        cell.imageView.image=0;
    }

    ColorPainterProfile *cpp=[_profils.profils objectAtIndex:indexPath.row];

    cell.textLabel.text=cpp.title;

    NSString *path=[LibTools documentsSubFolder:cpp._subFolder];
    cell.imageView.image =[UIImage imageWithContentsOfFile:[path stringByAppendingPathComponent:cpp._imageName]];
    //cell.accessoryType=UITableViewCellAccessoryDisclosureIndicator;

    // Set up the cell.
    //cell.textLabel.textColor=[UIColor grayColor];

    return cell;
}

/*- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)sec {
    return @"Hello";
}*/

/*- (NSIndexPath *)tableView:(UITableView *)tableView willSelectRowAtIndexPath:(NSIndexPath *)indexPath {
    return nil;
}*/

- (BOOL) shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation {
    return (toInterfaceOrientation == UIInterfaceOrientationPortrait || toInterfaceOrientation == UIInterfaceOrientationPortraitUpsideDown);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T21:17:24.483

谢谢大家，我在之前的视图中发现了泄漏，现在一切正常，没有任何代码在 dealloc...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T16:27:00.247

如果内存泄漏，可能的原因是 Array `_profils.profils`。或者，您可以像分配和释放图像一样，

```
 NSString *path=[LibTools documentsSubFolder:cpp._subFolder];
 UIImage *cellImage = [[UIImage alloc] initWithContentsOfFile:[path stringByAppendingPathComponent:cpp._imageName]];
 cell.imageView.image =cellImage;
 [cellImage release]; 
```

# javascript - 跟踪来自某个来源的用户

> ID：11413361
> 
> 赞同：11
> 
> 时间：2012-07-10T12:30:34.403
> 
> 标签：javascript, jquery, http, get, tracking

我正在向向我们发送其他访问者的用户进行促销。这是在**客户端**完成的。

我可以使用动态 GET 参数来做到这一点，例如，`http://www.mysite.com?app_source=user_id`或者我可以使用哈希来做到这一点，例如`http://www.mysite.com#app_source,user_id`.

这些方法有什么优点和缺点吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-12T17:39:25.363

对 GET 请求执行此操作的标准方法是简单地使用查询字符串。

```
http://www.mysite.com?app_source=user_id 
```

* * *

如果您使用 URL 锚点，例如

```
http://www.mysite.com#app_source,user_id 
```

锚点部分 ( `#app_source,user_id`)**未发送到服务器**

例如，请参阅此[相关问题](https://stackoverflow.com/questions/774136/retrieving-anchor-link-in-url-for-asp-net)。

这是另一个[相关的问题](https://stackoverflow.com/questions/4108082/get-anchor-part-of-url-in-controller-in-ruby-on-rails)

锚点只是一个客户端标志，用于告诉浏览器在页面上导航的位置。

* * *

为了解决您的重定向问题，您可以在重定向之前处理查询字符串，添加/删除您想要的键/值对，然后重定向。

PHP 让您可以直接访问查询字符串`$_SERVER['QUERY_STRING']`

`request.uri`您可以[解析](https://stackoverflow.com/questions/7316656/how-to-get-query-string-from-passed-url-in-ruby-on-rails)的Rails 用途

此外，当您看到诸如 之类`facebook.com/#stuff`的奇特事物时，锚点部分由客户端 javascript 处理。所以你**可以**这样做，但你将编写发送正常 GET 请求的 ajax 代码，就像这个答案顶部推荐的那样。

为什么要增加复杂性？你只是喜欢`#`更好的外观`?`吗？

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-12T17:44:10.043

使用`?`方法。为什么？因为这就是您应该跨页面传递任意数据的方式。

`#`专门用于页面锚点。

除了语义和最佳实践之外，还有一个实际原因。想想当用户将访问者发送到页面上的锚点时会发生什么。您将无法使用散列方法（至少不是以简单的方式）。

所以我会遵循[这里](http://www.onlineaspect.com/2009/06/10/reading-get-variables-with-javascript/)概述的方法：

```
function $_GET(q,s) {
    s = s ? s : window.location.search;
    var re = new RegExp('&'+q+'(?:=([^&]*))?(?=&|$)','i');
    return (s=s.replace(/^?/,'&').match(re)) ? (typeof s[1] == 'undefined' ? '' : decodeURIComponent(s[1])) : undefined;
}

var app_source = $_GET('app_source'); 
```

然后你可以有这样的 URL：`http://www.mysite.com?app_source=user_id#anchor`

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-12T17:42:22.010

### 请求参数

*   谷歌分析、服务器日志等都会有URL的记录，可能对以后的分析有帮助。
*   多个 URL 使缓存变得更加困难，并有可能使 Google 感到困惑

### 哈希

*   分析和服务器日志不会看到/关注哈希参数

处理这个更*语义化*的方式可能是通过查询字符串参数，但它不是很强大。如果上述几点都不相关，我可能会坚持使用查询字符串，因为它更常见。

如果您的意思是您正在构建其他人集成的服务，并且您不希望他们必须将信息传递回他们的应用程序（通过查询字符串），那么使用哈希参数似乎是一个不错的选择。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-12T17:51:01.473

W3C[在这里](http://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html)说：

> 当然，不可能确保服务器不会因为执行 GET 请求而产生副作用；事实上，一些动态资源认为这是一个特性。这里的重要区别是用户没有请求副作用，因此不能对它们负责。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-07-13T09:09:35.360

使用哈希。

为什么？

因为您开发了 3rd 方插件，并且不知道是否有任何参数不是站点开发人员的用户。当您覆盖使用的 get 参数之一时，您可以破坏本机应用程序开发人员传递给服务器的一些重要信息。此外，您不想让应用程序持有人具有重复的页面，例如：[http](http://somepage.com/) ://somepage.com/和[http://somepage.com/?app_source=user_id](http://somepage.com/?app_source=user_id)将是重复的，因为许多用户会引用该页面，您将创造许多。

哈希是最安全的选项，可以在每个页面上使用。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-07-17T16:07:43.177

哈希是要走的路。

只有2个选择，一个是GET Parameter，第二个是#。

**? 获取参数**

get参数可以被搜索引擎和两个URL索引，`http://www.yoursite.com/`可以`http://www.yoursite.com/?app_id=123`是2个单独的页面

在我的一个网站上，我使用了这个，我收到来自谷歌的电子邮件，说明 `While crawling your site, we have noticed an increase in the number of transient soft 404 errors around 2012-06-30 22:00 UTC (London, Dublin, Edinburgh). Your site may have experienced outages. These issues may have been resolved. Here are some sample pages that resulted in soft 404 errors:`

他们提到的链接可以正常工作，没有任何问题，但我仍然开始收到这些错误。

**# 哈希**

哈希更好，因为它们不会改变任何 SEO 事物的行为（许多人会说它确实有影响，但我不这么认为）

最后，您只需要获取`app_source`并使用 Javascript 将其传递给您的服务器。所以你可以随心所欲。如果我是你，我会粗暴地使用 HASH

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-07-12T18:14:47.190

你的两种方法都不好。最终的方法是使用 URL Segments：

如果你想通过 App 和 UserId 来区分：

```
http://www.mysite.com/appName/UserID/ 
```

或仅通过 UserId：

```
http://www.mysite.com/UserID/ 
```

但我个人会同时使用 AppName 和 UserName：

```
http://www.mysite.com/appName/UserName/ 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-07-12T17:40:43.770

基于当今一些推广“#”符号的现代 Web 应用程序，对于支持 SPA（单页应用程序）如 Twitter 非常有用。请只使用“？” 符号。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-07-13T07:36:57.923

简单的方法是使用带有 userID 的 GET 参数来验证它是否被某人引用。

```
http://www.mysite.com/?ref=1128721 
```

然后，如果您想了解更多关于推荐的信息，您还可以检查用户实际使用哪个 url 点击了您的链接`$_SERVER['HTTP_REFERER']`（如果您使用 php）。这样，您可以确保您的链接不在垃圾位置或“自动访问”。

# php - 运行以下 PHP/MySQL/Linux 系统所需的硬件

> ID：11413362
> 
> 赞同：0
> 
> 时间：2012-07-10T12:30:34.683
> 
> 标签：php, mysql, linux, hardware

我开发了一个系统来处理病人和与医疗相关的东西。

在这种情况下，系统有一个包含 14 个表的 MySQL 数据库。

医生预约表每天将记录 50 次预约。然后，患者记录表每月将记录 2000 个条目。

还有一个消息系统、一个议程和其他一些小东西。该系统将拥有非常少的用户，比如每天有 15 或 20 个用户使用它。

该公司拥有几乎 2.0 ghz 的双核 AMD，配备 4 GB RAM 和 250 GB 磁盘。¿ 你觉得这个硬件配置够吗？或者您认为推荐的硬件是什么？

该系统将在 Debian Linux 下运行。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T12:37:30.787

这完全足够了。

我们的软件规格（取决于客户）：

```
- .NET
- 150 Tables
- Up to 1.000.000 records per Table
- 3-25 users
- about 5 connections per user
- database size 50 MB to 1.5 GB 
```

它几乎可以在我们安装的任何硬件上使用 mysql 运行良好且快速。即使是具有单个磁盘和 1GB RAM 的 Windows XP 工作站

更重要的是优化您的查询并为 MySQL 设置一些好的启动值。即使您在一段时间后发现速度有所放缓（如果您有更多数据），通常也很容易调整软件以再次快速运行。如果这还不够，您可以在一两年内升级到更好的机器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T12:39:29.367

欢迎来到 Stackoverflow。

当您进行查询时，返回的时间是除数，我读过一次这样的内容（不需要数字，而是顺序）：

硬件 10%

设计数据库 30%

查询 60%

这是回应的时候了。这家伙试图说的是查询速度将在很大程度上取决于程序员如何查询他使用了什么以及他是如何使用的。设计也很重要，一定要在需要的地方使用索引，规范化，EER 设计，检查缓冲区大小，缓存等。

最后，它是你的硬件，在你调整了这两件事之后，你将决定你的数据库是否真的可扩展，或者它可以通过更改查询来改进`like '%variable%'`

# javascript - 用于实时多人游戏的 Node.js UDP

> ID：11413364
> 
> 赞同：13
> 
> 时间：2012-07-10T12:30:36.167
> 
> 标签：javascript, node.js, networking, udp

我正在使用 node.js 构建一个基于浏览器的实时多人游戏。目前，我让客户端通过 socket.io 将用户输入发送到游戏逻辑服务器，并将游戏世界的快照发送回客户端进行渲染。

下面是代码的简化版本。是否可以使用 UDP 将数据从基于浏览器的客户端发送到服务器，反之亦然？我知道 Node.js 有一个[UDP 模块](http://nodejs.org/api/dgram.html)，但我不确定如何以这种方式实现它。

任何帮助，将不胜感激。谢谢你。

服务器：

```
var server = http.createServer(handler).listen(8888);
var iosocket = io.listen(server);

// request/response handler
function handler(req, res){

    ...
}

iosocket.sockets.on('connection', function(socket){
    console.log("[x] Socket listener started");

    socket.on('msg', function(data){
        console.log( " [-] incoming message);
    });
});

...

iosocket.sockets.emit("message", msg); 
```

客户：

```
<!DOCTYPE html>
<html>
    <head>
        <title>Test</title>
        <script type="text/javascript" src="/socket.io/socket.io.js"></script>
        <script type="text/javascript">
            socket.on('connect', function(){
             console.log("connected to server");
            });

            socket.on('message', function(message){
            console.log('received message');
            });

        </script>
    </head>

    <body>
        <canvas id='canvas' width="400" height="400">Canvas</canvas>
    </body>

</html> 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-07-10T12:39:35.940

通常，浏览器不支持 UDP 连接。具体来说，某些浏览器会这样做。谷歌浏览器有一个套接字 api：

[http://developer.chrome.com/trunk/apps/socket.html](http://developer.chrome.com/trunk/apps/socket.html)

[2012/10/29 编辑为套接字不再是实验性的 - PhilH]

您也可以使用来自本机客户端接口的套接字 API（不确定，只是猜测）。

如果你打算在不久的将来在浏览器上实时做任何事情，Websockets 可能是你最好的选择，但这些只是 TCP。

关于您对 UDP 与 TCP 速度的评论，UDP 总是更快。TCP 提供排序和传递保证（这意味着可能会重试并保留其他数据包，直到丢失的数据包最终到达其目的地），而 UDP 只承诺发送一次，而不关心它之后会发生什么。UDP只会发送一次它的数据包，你需要弄清楚它是否丢失了。当/如果您收到大量 UDP 数据包时，如果顺序很重要，您需要在数据有效负载中对​​其进行编码才能弄清楚。

一般来说，UDP 非常适用于丢失一些通常无关紧要并且只有最新数据包真正重要的数据包。游戏通常可以使用 TCP 流，其中订购和保证交付很重要（重要的东西），以及 UDP 流用于对象移动等（只有最新位置才真正重要，如果一个更新丢失，只要每个更新都没有关系包包含完整位置[而不是所有数据包都重要的增量]）。

对于你自己的游戏，我建议先在 TCP 上实现它，然后当你有更多经验时，你可以尝试将时间关键的东西（顺序和丢失的数据包不太重要）移动到单独的 UDP 流中。有很多项目都失败了，因为人们首先从 UDP 开始，然后尝试在其之上添加订购和交付保证，有效地尝试重新实现 TCP。这就是为什么反过来做更有意义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-07-11T22:35:58.653

实时应用程序通常是接收至少 30 Hz 且抖动小于 10% 的数据更新的应用程序。TCP/IP 是可靠的，但不能以这种速率发送定期更新，而不会偶尔出现抖动。这是因为 TCP 正在握手和确认以确保可靠传输，这妨碍了发送快速定期平滑更新。UDP 是一个更简单的协议，其中套接字数据是触发后忘记的。这本身就是一个问题，但这个问题比 TCP/IP 的不良抖动更容易克服。以我的经验，UDP 是唯一的前进方式，也是实时应用程序在诸如 VoIP 中使用的 RTP 等协议中使用它的原因。

Web Sockets 也是错误的希望，因为它是基于 TCP 的协议。我使用自定义 UDP 套接字，其中发送方和接收方维护一个序列号，它可以告诉您数据包是否丢失、重复或乱序，以及 WAN 网络上的所有问题。寻找使用 UDP 和检测入站数据包来衡量性能的方法。

* * *

## 回答 #3

> 赞同：-6
> 
> 时间：2013-08-27T04:58:15.547

```
var server = require('http').createServer();

require('dgram-browserify').listen(server);

server.listen(8080); 
```

# html - 如何使表格单元格根据内容缩小？

> ID：11413365
> 
> 赞同：64
> 
> 时间：2012-07-10T12:30:36.907
> 
> 标签：html, css, html-table, width

如何使具有 2 列（单元格）的表格如下所示：

*   第一个单元格根据内容缩小
*   另一个单元格适合表格的其余部分（比两个内容加起来更宽）

例子：

```
<table style="width: 500px;">
   <tr>
      <td>foo</td>
      <td>bar</td>
   </tr>
</table> 
```

我需要表格看起来像这样：

```
.___________________________________________________________________________.
| foo | bar            <a lot of space here>                                |
|_____|_____________________________________________________________________|
                           500 px total width 
```

注意：我不知道“foo”的宽度，所以我不能设置“50px”、“10%”或类似的东西。

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2017-04-25T15:34:24.080

将宽度设置为接近零的任何值，以缩小它，然后将空白设置为 nowrap。解决了。

```
td {
width:0.1%;
white-space: nowrap;
} 
```

* * *

## 回答 #2

> 赞同：54
> 
> 时间：2012-07-10T13:12:21.507

您可以将`width`第二个单元格的`100%`

HTML：

```
<table>
   <tr>
      <td>foo</td>
      <td class="grow">bar</td>
   </tr>
</table>​ 
```

CSS：

```
table { width: 500px; }
.grow { width: 100%; }​ 
```

检查[这个小提琴](http://jsfiddle.net/scumah/bqptb/)。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-02-25T10:49:08.460

设置这个：

```
td {
    max-width:100%;
    white-space:nowrap;
} 
```

这将解决您的问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-10T12:45:21.647

如果表格的总大小为 500 像素并且不会通过，则放`td{max-width: 500px;}`; 如果最小值为 500 像素，则`td {min-width: 500px;}`；看这个[例子](http://jsfiddle.net/5jSZE/)。

# c - 为什么 fopen() 或 open() 使用 errno 而不是只返回错误代码？

> ID：11413366
> 
> 赞同：8
> 
> 时间：2012-07-10T12:30:41.860
> 
> 标签：c, linux, linux-kernel, errno

在通常情况下 `open()`，返回新的文件描述符，如果发生错误，则返回 -1，在这种情况下，`errno`设置适当。

我不明白为什么`errno`这里使用这种机制？这里的目的是什么？为什么我们不能用一些负回报来映射所有错误？

喜欢

```
fd = open("/dev/tty0", O_RDWR | O_SYNC);
if(fd == -1)
  printf("this is EACCES error");
else if (fd == -2)
    printf("this is EPERM error"); 
```

有没有`errno` 机制的好处。？如果是，那么我想知道/理解然后在其他事情上我也可以使用这种机制。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-10T12:52:47.730

由于`fopen`返回 a`FILE*`您不能指望它在该指针中返回错误代码：指针的唯一“特殊”值是`0`.

正如你所观察到的，因为`open`这个限制不成立。事实上，像 linux 这样的系统完全按照您在较低级别提出的建议。如果出现问题，后台的系统调用会返回负错误代码。`errno`然后，该（否定的）代码由浅用户空间包装器插入，然后返回`-1`以向应用程序指示错误。

这样做的原因纯粹是历史原因。在过去的美好时光中，没有线程，`errno`仍然只是一个简单的全局变量。当时所选择的策略不会产生太多开销，并且可能似乎是操作系统和应用程序之间可以接受的通信方式。由于这样的接口基本上不能在不破坏大量代码的情况下进行更改，因此我们将被困在`errno`线程本地的伪变量中。

这并不理想，但开销并不像听起来那么糟糕，因为这些显然是*错误*指示，只应在异常情况下发生。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-10T12:35:12.673

对我来说，优势在于以这种方式统一获取错误信息，返回一些负值可以正常工作，`open`因为它返回一个整数，但`fopen`返回 a`FILE *`所以必须在那里使用另一种技术。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T12:49:11.330

为每个函数提供一组不同的返回值会使以通用方式编写代码变得过于复杂。使用当前语义，您可以采用通用模式：

```
int fd;
if ((fd = some_function(arg1, arg2)) == -1)
{
    perror("some_function");
    exit(1);
} 
```

您甚至可以将其包装在宏中：

```
#define CALL_OR_DIE(function, ret, ...)      \
    if ((ret = function(__VA_ARGS__)) == -1) \
    { perror(#function); exit(1); } 
```

用法：

```
int fd;
CALL_OR_DIE(open, fd, "/dev/tty0", O_RDWR | O_SYNC); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-10T12:34:19.787

`errno`是错误代码。将错误映射到实际发生的情况非常重要，这样您就可以在代码中就下一步做什么做出战略决策。例如，`ERANGE`在 中定义的`errno.h`，将告诉您的结果`strtol("0xfffffffff",NULL,0)`超出了该函数的范围。在您的示例中更重要的是，最好知道您是否有`EACCES`错误`EPERM`，以便您知道如何处理文件。

您无法将所有问题都映射到一个错误代码，因为您可能有多个要捕获和处理的问题。当我说 catch 时，我并不是指 try/catch。

errno 的使用建立了错误处理机制，因此您获得的信息不仅仅是-1。

为了方便起见，ERANGE、EACCES、EPERM 和其他被视为映射到特定错误号的宏。

# sql - 批量插入不插入任何行

> ID：11413367
> 
> 赞同：9
> 
> 时间：2012-07-10T12:30:43.727
> 
> 标签：sql, sql-server, sql-server-2008, csv, bulkinsert

我将 CSV 文件中的数据导入临时表，然后将它们与“真实”表合并。

对于我的其他表，这很好用。但是对于这个特定的文件和表，似乎什么都没有发生。

```
CREATE TABLE #ManifestHeader (  
[ROTATIONNUMBER] [nvarchar](12) NOT NULL,
[ROTATIONVERSIONNO] [nvarchar](2) NOT NULL,
[IMONUM] [nvarchar](50) NULL,
[VESSELNAME] [nvarchar](35) NOT NULL,
[VOYAGENO] [nvarchar](17) NOT NULL,
[CARRIERCODE] [nvarchar](10) NULL,
[CARRIERNAME] [nvarchar](35) NULL,
[ETA] [datetime] NULL,
[ETD] [datetime] NULL,
[ACTUALARRIVALDATE] [datetime] NULL,
[LASTPORTOFCALL] [nvarchar](5) NULL,
[PORTARRIVAL] [nvarchar](5) NULL,
[PORTNEXT] [nvarchar](5) NULL,
[PORTFINAL] [nvarchar](5) NULL,    
[BERTHINGDATE] [datetime] NULL,
[CDRSTARTDATE] [datetime] NULL,
[CDRENDDATE] [datetime] NULL,
[CDRSUBMISSIONDATE] [datetime] NULL,
[NUMOFBOLS] [int] NULL,
)

BULK INSERT #ManifestHeader
FROM 'D:\csvfiles\ManifestHeader.csv'
WITH ( FIELDTERMINATOR = '<,>', ROWTERMINATOR = '\n', FIRSTROW = 2, KEEPIDENTITY );

SELECT * FROM #ManifestHeader; 
```

最后一个 select 语句不返回任何内容，也没有显示错误。

CSV 文件包含数千行。示例行：

```
ROTATIONNUMBER<,>ROTATIONVERSIONNO<,>IMONUM<,>VESSELNAME<,>VOYAGENO<,>CARRIERCODE<,>CARRIERNAME<,>ETA<,>ETD<,>ACTUALARRIVALDATE<,>LASTPORTOFCALL<,>PORTARRIVAL<,>PORTNEXT<,>PORTFINAL<,>BERTHINGDATE<,>CDRSTARTDATE<,>CDRENDDATE<,>CDRSUBMISSIONDATE<,>NUMOFBOLS
12345678911<,>1<,>VB3BV<,>BLACKSTONE<,>020<,>MUNICA<,>MUNICA<,>2012-05-08 10:32:00<,>2012-05-08 11:32:00<,>2012-05-09 07:15:00<,>SGSIN<,>MZZPZ<,>MZZBW<,>MZZBW<,><,>2012-05-09 07:22:00<,><,>2012-05-09 07:22:26<,>1
12345678912<,>1<,>VB4BV<,>REDSTONE<,>021<,>MUNICA<,>MUNICA<,>2011-11-29 11:48:00<,>2011-11-30 11:48:00<,><,>ZADER<,>MZZPZ<,>ZARCB<,>MZZPZ<,><,><,><,><,>
12345678913<,>1<,>VB5BV<,>BLUESTONE<,>022<,>MUNICA<,>MUNICA<,>2012-05-09 08:00:00<,>2012-05-10 10:39:00<,>2012-05-09 11:11:00<,>ZADER<,>MZZPZ<,>ZARCB<,>ITCVV<,><,>2012-05-09 15:00:00<,><,>2012-05-07 11:14:42<,>1
12345678914<,>1<,>VB6BV<,>GREENSTONE<,>023<,>MUNICA<,>MUNICA<,>2012-05-29 07:00:00<,>2012-05-29 23:00:00<,>2012-05-29 09:12:00<,>LKCMB<,>MZMNC<,>MZMNC<,>SGSIN<,><,>2012-05-29 23:00:00<,>2012-05-30 12:00:00<,>2012-05-29 09:30:33<,>1 
```

我在这里能错过什么？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-07-11T10:21:47.760

Ed Harper 引导我朝着正确的方向前进：行终止符是错误的。

所以当我把它改成

```
ROWTERMINATOR = '0x0a' 
```

在 BULK INSERT（而不是 '\n'）中它开始工作。

# ios - EKCalendar 和错误域=NSMachErrorDomain 代码=268435459

> ID：11413371
> 
> 赞同：3
> 
> 时间：2012-07-10T12:31:03.530
> 
> 标签：ios, calendar, ekeventkit

我正在探索 EKEventKit。我连接我的 iPhone 并拨打电话以安装日历

```
EKEventStore *eventDB = [[EKEventStore alloc] init];
NSArray * calendars = [eventDB calendars ]; 
```

但是，当我记录日历时，我收到此错误消息

> “CADObjectGetIntProperty 失败，出现错误 Error Domain=NSMachErrorDomain Code=268435459 “操作无法完成。（马赫错误 268435459 -（ipc/send）无效的目标端口）”

有谁知道这是什么以及为什么我得到它。谢谢

礼萨

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-10T13:28:18.920

我发现了这个问题。

我之前在我的代码中加载并保留了一个 EKEventStore。删除其中一个解决了问题

礼萨

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T07:21:47.030

我的控制台上有相同的警告日志

**之前的代码：**

```
"CalendarEventHandler.m"
eventStore = [[EKEventStore alloc] init];

"CalendarEventHandler.h"

@property (nonatomic,strong) EKEventStore *eventStore; 
```

**代码修改**

```
self.eventStore = [[EKEventStore alloc] init];//This helped me to remove warning 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-03-06T16:24:59.650

@discussion 到`EKEventStore`类`EKEventsStore.h`文件说：

`"It is generally best to hold onto a long-lived instance of an event store, most likely as a singleton instance in your application."`

这里也写了同样的内容：[Reading and Writing Calendar Events](https://developer.apple.com/library/ios/documentation/DataManagement/Conceptual/EventKitProgGuide/ReadingAndWritingEvents.html#//apple_ref/doc/uid/TP40004775-SW1)，在`Connecting to the Event Store`部分：

`"An EKEventStore object requires a relatively large amount of time to initialize and release. Consequently, you should not initialize and release a separate event store for each event-related task. Instead, initialize a single event store when your app loads, and use it repeatedly to ensure that your connection is long-lived."`

所以正确的做法是：

```
@interface MyEventStore : EKEventStore

+ (MyEventStore *)sharedStore;

@end

+ (MyEventStore *)sharedStore
{
    static dispatch_once_t onceToken;
    static MyEventStore *shared = nil;
    dispatch_once(&onceToken, ^{
        shared = [[MyEventStore alloc] init];
    });
    return shared;
}

@end 
```

并使用它调用`[MyEventStore sharedStore]`.

这种方法还修复了警告。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-19T11:16:33.137

将实例 'eventDB' 设为类成员变量或属性可以解决问题。

# android - TextView 超链接不起作用？

> ID：11413372
> 
> 赞同：11
> 
> 时间：2012-07-10T12:31:05.017
> 
> 标签：android, xml, android-layout, hyperlink

为什么`TextView`超链接不起作用。

在 custom 中使用超链接`dialog box`。

超链接不出现。

我在哪里弄错了。怎么解决。给我指导。

XML 代码是

```
<TextView
android:id="@+id/google_Link"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:layout_gravity="center"
android:gravity="center"
android:padding="10dip"
android:textSize="20dip"
android:linksClickable="true"  
android:autoLink="all"
android:textColorLink="#306EFF"
android:text="" /> 
```

安卓代码是

```
TextView googleLink = ( TextView ) layout.findViewById( R.id.google_Link );
googleLink.setClickable(true);
googleLink.setMovementMethod(LinkMovementMethod.getInstance());
googleLink.setText( Html.fromHtml( "<a href=`http://www.google.co.in`>Google</a>" ) ); 
```

Android清单代码是

```
<action android:name="android.intent.action.VIEW" />
<category android:name="android.intent.category.DEFAULT" />
<category android:name="android.intent.category.BROWSABLE" /> 
```

预先感谢。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-10T12:49:55.547

仅替换此链接，它将起作用：

```
TextView textView=(TextView) findViewById(R.id.link);
textView.setClickable(true);
String linkTxt=getResources().getString(R.string.link);
textView.setMovementMethod(LinkMovementMethod.getInstance());
textView.setText(Html.fromHtml( linkTxt)); 
```

在 strings.xml 中添加：

```
<string name="link">&lt;a href=http://www.google.co.in&gt;Google&lt;/a&gt;</string> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-04-06T13:33:15.813

这个问题的最佳解决方案是：首先，创建一个Textview。

```
<TextView
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:id="@+id/link"
android:layout_alignParentBottom="true"
android:layout_alignParentEnd="true"
android:text="@string/developed_by_bracecodes"/> 
```

然后从 strings.xml 向您的 Textview 添加文本，如下所示：

```
<string name="developed_by_bracecodes"><a href="http://www.bracecodes.com">Developed by Bracecodes</a>  </string> 
```

**注意：不要忘记在链接前添加 http://**

然后在您的 java 代码中添加这些行：

```
TextView link = findViewById(R.id.link);
link.setMovementMethod(LinkMovementMethod.getInstance()); 
```

快乐编码！谢谢！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T12:36:27.133

它不起作用，因为您无法将 href 设置为 a `TextView`。

您需要设置一个 OnClickListener ，它的`onClick`方法中有这个：

```
String url = "http://www.google.co.in";
Intent i = new Intent(Intent.ACTION_VIEW);
i.setData(Uri.parse(url));
startActivity(i); 
```

之后，您可以`TextView`像这样将侦听器设置为：`googleLink.setOnClickListener(myListener);`

然后再次运行应用程序，点击应该得到正确处理。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-09-21T21:29:15.283

```
<TextView 
android:layout_width="fill_parent"
android:layout_height="fill_parent" 
android:id="@+id/hyperlink" 
android:text="@string/hyperlink"
android:textColorLink="@color/quantum_yellow"
**android:autoLink="web"**
/> 
```

用于`autoLink=web`将链接文本自动定义为可点击的超链接。您还可以使用来决定它的颜色`textColorLink`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-05-06T08:35:05.517

您的解决方案就在这里。[https://github.com/saket/Better-Link-Movement-Method](https://github.com/saket/Better-Link-Movement-Method)

```
implementation 'me.saket:better-link-movement-method:1.1'

 message?.message?.let {
            chatMessageTextView.setText(HtmlCompat.fromHtml(it.trim(), HtmlCompat.FROM_HTML_MODE_LEGACY),TextView.BufferType.SPANNABLE)
        }

  chatMessageTextView.movementMethod = BetterLinkMovementMethod.newInstance().apply {
        setOnLinkClickListener { _, url ->
            // Handle click or return false to let the framework handle this link.

            handleMessageLink(itemView.context,url)
            true
        }
    }

     <TextView
            android:id="@+id/chat_message_text_view"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_below="@+id/files_layout"
            android:layout_marginStart="@dimen/space_ultra_small"
            android:text="@string/text_small"
            android:textColor="@color/black"
            android:padding="@dimen/space_ultra_small"
            android:textColorLink="@color/sky_blue"
            android:textSize="@dimen/text_size_large" /> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-08-16T19:16:57.107

```
public class HtmlTextView extends TextView {
    public HtmlTextView(Context context) {
        super(context);
    }

    public HtmlTextView(Context context, @Nullable AttributeSet attrs) {
        super(context, attrs);
    }

    public HtmlTextView(Context context, @Nullable AttributeSet attrs, int defStyleAttr) {
        super(context, attrs, defStyleAttr);
    }

    @Override
    public void setText(CharSequence text, BufferType type) {
        Spannable spannable = linkifyHtml(String.valueOf(text), Linkify.ALL);
        super.setText(spannable, type);
    }

    private static Spannable linkifyHtml(String html, int linkifyMask) {
        Spanned text = Html.fromHtml(html);
        URLSpan[] currentSpans = text.getSpans(0, text.length(), URLSpan.class);

        SpannableString buffer = new SpannableString(text);
        Linkify.addLinks(buffer, linkifyMask);

        for (URLSpan span : currentSpans) {
            int end = text.getSpanEnd(span);
            int start = text.getSpanStart(span);
            buffer.setSpan(span, start, end, 0);
        }
        return buffer;
    }
} 
```

HtmlTextView mText = view.findViewById(R.id.text); mText.setMovementMethod(LinkMovementMethod.getInstance()); mText.setText("<a href= `http://www.google.com`>Google");

# c# - 是否将使用从 EAP 创建的任务的额外线程？

> ID：11413376
> 
> 赞同：0
> 
> 时间：2012-07-10T12:31:15.407
> 
> 标签：c#, task-parallel-library

我有一个基于事件的异步操作（EAP）的类。我可以根据[这里](http://msdn.microsoft.com/en-us/library/dd997423.aspx)描述的那样创建一个任务。

当我使用 EAP 时：

我的线程->调用方法->创建线程->在其中执行某些操作。

当我创建任务时，我怀疑：

我的线程->创建任务->**创建线程**->调用方法->创建线程->在其中执行某些操作。

这是真的吗？

编辑：

Offcourse 任务不会创建线程 - 如果需要，它将从线程池中获取线程。但是它会被占用吗？我是否必须从线程池中花费宝贵的额外线程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T13:33:50.010

要确切知道会发生什么，我需要查看您的特定代码，包括您将如何使用生成的`Task`.

但一般来说，如果将 EAP 包装到`Task`using 中`TaskCompletionSource`，它不会用完池中的另一个线程，因为没有要执行的代码。

如果你的意思是如果你`ContinueWith()`在 that 上使用会发生什么`Task`，那么这取决于你是否设置[`TaskContinuationOptions.ExecuteSynchronously`](http://msdn.microsoft.com/en-us/library/system.threading.tasks.taskcontinuationoptions.aspx)。如果您不设置它，延续将在从池中获取的“新”线程上运行。如果您确实设置了它，它将在设置结果的同一线程上运行`Task`。（你应该`ExecuteSynchronously`只使用非常短的延续。）

但是延续是否会从池中获取一个新线程，或者它是否使用由其他人从池中获取的线程并不重要。重要的是在操作完成之前是否会有任何线程阻塞。在这两种情况下，这都不会发生。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T12:34:47.660

它不会创建两个新线程。事实上，它甚至不确定它是否会创建一个新线程。它可能只是从 ThreadPool 中选择一个已经存在的。

# javascript - jquery - 只获得下一级孩子

> ID：11413377
> 
> 赞同：1
> 
> 时间：2012-07-10T12:31:15.950
> 
> 标签：javascript, jquery

例如：

```
<div id="headerWrapper">
                <H1>TEST</H1>
                <div id="paarofileLinks">
                    <ul id="primaryNav" role="navigation">
                        <li id="musicNav" class="navItem">
                            <a href="/music" class="nav-link">Music</a>
                        </li>
                        <li id="listenNav" class="navItem">
                            <a href="/listen" class="nav-link">Radio</a>
                        </li>
                        <li id="eventsNav" class="navItem">
                            <a href="/events" class="nav-link nna" id="vbulletin_css2">Events</a>
                        </li>
                        <li id="chartsNav" class="navItem">
                            <a href="/charts" class="nav-link">Charts</a>
                        </li>
                        <li id="communityNav" class="navItem">
                            <a href="/community" class="nav-link">Community</a>
                        </li>
                        <li id="originalsNav" class="navItem">
                            <div>
                                <a href="http://originals.last.fm" class="nav-link">Originals</a>
                            </div>

                        </li>
                    </ul>
                </div> 
```

如果我使用这个选择器

```
$("#headerWrapper").children("*"); 
```

它会得到所有的孩子，但我需要回来

```
<H1>TEST</H1> 
<div id="paarofileLinks"></div> 
```

没有`<ul>`和剩余的列表

注意：我不知道页面的结构，所以我需要一些通用的东西并且可以处理所有结构

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T12:35:56.783

与 不同[`find()`](http://api.jquery.com/find/)，[`children()`](http://api.jquery.com/children/)仅返回给定元素的*直接*子元素。

因此，您的查询*应该*完全按照您的要求进行，并且只返回有问题的两个元素。如果不是这种情况，那么还有其他问题。使用几乎与您完全相同的代码查看示例代码片段，并给出正确的结果：

```
$("#headerWrapper").children().each(function(){console.log(this)});
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<div id="headerWrapper">
  <H1>TEST</H1>
  <div id="paarofileLinks">
    <ul id="primaryNav" role="navigation">
      <li id="musicNav" class="navItem">
        <a href="/music" class="nav-link">Music</a>
      </li>
      <li id="listenNav" class="navItem">
        <a href="/listen" class="nav-link">Radio</a>
      </li>
      <li id="eventsNav" class="navItem">
        <a href="/events" class="nav-link nna" id="vbulletin_css2">Events</a>
      </li>
      <li id="chartsNav" class="navItem">
        <a href="/charts" class="nav-link">Charts</a>
      </li>
      <li id="communityNav" class="navItem">
        <a href="/community" class="nav-link">Community</a>
      </li>
      <li id="originalsNav" class="navItem">
        <div>
          <a href="http://originals.last.fm" class="nav-link">Originals</a>
        </div>

      </li>
    </ul>
  </div>
</div>
```

旁注：您使用的选择器不是必需的，因为`children()`和`children("*")`在语义上是等效的。

# ruby-on-rails - 获取数组哈希值

> ID：11413381
> 
> 赞同：0
> 
> 时间：2012-07-10T12:31:28.197
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, loops

所以我试图从这一系列哈希中获取所有高中和研究生院：

```
"education": [
    {
      "school": {
        "id": "110703012290674", 
        "name": "Kunskapsgymnasiet Malmö"
      }, 
      "year": {
        "id": "136328419721520", 
        "name": "2009"
      }, 
      "type": "High School"
    }, 
    {
      "school": {
        "id": "112812485399398", 
        "name": "Malmö University"
      }, 
      "year": {
        "id": "118118634930920", 
        "name": "2012"
      }, 
      "concentration": [
        {
          "id": "104076956295773", 
          "name": "Computer Science"
        }
      ], 
      "type": "Graduate School", 
      "classes": [
        {
          "id": "165093923542525", 
          "name": "Programmering", 
          "description": "Kursen fokuserar på metoder och tekniker vid utveckling av webbapplikationer med hjälp av HTML5."
        }
      ]
    }
  ], 
```

像这样：

```
def add_friends
    facebook.get_connections("me", "friends",   :fields => "name, id, education").each do |hash|
      self.friends.where(:name => hash['name'], :uid => hash['id'], 
                                                :highschool_name => hash['education']['school']['name'] if hash['type'] == "High School",
                                                :graduateschool_name => hash['education']['school']['name'] if hash['type'] == "Graduate School").first_or_create
    end
  end 
```

我尝试了这样的事情：

```
def add_friends
    friends_data = facebook.get_connections("me", "friends",   :fields => "name, id, education")
    friends_data.each do |hash|
      friend.name = hash["name"]
      friend.uid = hash["id"]

      if hash["education"]
        hash["education"].each do |e|
          if e["type"] == "High School"
            friend.highschool_name = e["school"]["name"] if (!hash["education"].blank? && !e["school"].blank?)

          elsif e["type"] == "Graduate School"
            friend.graduateschool_name = e["school"]["name"] if (!hash["education"].blank? && !e["school"].blank?)
          end
        end
      end
      friend.save!
      friend
  end
end 
```

但是我得到了这个错误：`undefined local variable or method`朋友'我认为缺少与缺少的朋友模型的联系..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T12:42:02.263

你可能想看看[Array#select](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-select)在那里你可以指定条件来获取所有符合某些条件的值：

```
schools.select{|school| school["type"] == "High School" || school["type"] == "Graduate School"} 
```

# .net - 如何在不调用 application::doevents 的情况下关闭后台工作线程？

> ID：11413384
> 
> 赞同：1
> 
> 时间：2012-07-10T12:31:38.370
> 
> 标签：.net, c++-cli, backgroundworker, shutdown, resource-cleanup

假设我有一个 GUI 应用程序，它有一个在应用程序的生命周期内运行的后台线程。当我关闭应用程序时，我想干净地关闭任何这些后台线程。实际上，我经常运行一些线程来执行数据收集和处理活动，而无需挂起 GUI。

下面的例子演示了这个问题；也就是说，如果您取消后台工作人员，它会尝试在主线程上调用工作人员完成方法。如果不调用`Application::DoEvents()`代码只会无限期地挂起，但我之前遇到过调用问题`DoEvents`，我的直觉告诉我这是不好的做法。

所以问题是；当我的应用程序退出时，干净地关闭后台工作线程的正确方法是什么？

```
using namespace System;
using namespace System::ComponentModel;
using namespace System::Collections;
using namespace System::Windows::Forms;
using namespace System::Data;
using namespace System::Drawing;

/// <summary>
/// Summary for Form1
///
/// WARNING: If you change the name of this class, you will need to change the
///          'Resource File Name' property for the managed resource compiler tool
///          associated with all .resx files this class depends on.  Otherwise,
///          the designers will not be able to interact properly with localized
///          resources associated with this form.
/// </summary>
public ref class Form1 : public System::Windows::Forms::Form
{
private: System::ComponentModel::BackgroundWorker^  backgroundWorker1;

public:
    Form1(void)
    {
        InitializeComponent();

        // 
        // backgroundWorker1
        // 
        this->backgroundWorker1 = (gcnew System::ComponentModel::BackgroundWorker());
        this->backgroundWorker1->DoWork += gcnew System::ComponentModel::DoWorkEventHandler(this, &Form1::backgroundWorker1_DoWork);
        this->backgroundWorker1->RunWorkerCompleted += gcnew System::ComponentModel::RunWorkerCompletedEventHandler(this, &Form1::backgroundWorker1_RunWorkerCompleted);
        this->backgroundWorker1->ProgressChanged += gcnew System::ComponentModel::ProgressChangedEventHandler(this, &Form1::backgroundWorker1_ProgressChanged);
        this->backgroundWorker1->WorkerReportsProgress = true;
        this->backgroundWorker1->WorkerSupportsCancellation = true;

        //
        //TODO: Add the constructor code here
        //
        backgroundWorker1->RunWorkerAsync();
    }

protected:
    /// <summary>
    /// Clean up any resources being used.
    /// </summary>
    ~Form1()
    {
        if( backgroundWorker1 != nullptr )
        {
            backgroundWorker1->CancelAsync();
        }

        while( backgroundWorker1->IsBusy == true )
        {
            System::Diagnostics::Debug::WriteLine("Waiting for background worker to exit..");
            System::Threading::Thread::Sleep(1000);
            // Application::DoEvents(); <-- Don't want to do this but what are the alternatives?
        }

        System::Diagnostics::Debug::WriteLine("Form1 destructor complete!");
    }

private: System::Void backgroundWorker1_DoWork(System::Object^  sender, System::ComponentModel::DoWorkEventArgs^  e) {
             while( backgroundWorker1->CancellationPending == false )
             {
                 System::Diagnostics::Debug::WriteLine("Working..");
                 System::Threading::Thread::Sleep(1000);
             }
         }

private: System::Void backgroundWorker1_ProgressChanged(System::Object^  sender, System::ComponentModel::ProgressChangedEventArgs^  e) {
         }

private: System::Void backgroundWorker1_RunWorkerCompleted(System::Object^  sender, System::ComponentModel::RunWorkerCompletedEventArgs^  e)
         {
            System::Diagnostics::Debug::WriteLine("Exiting..");
            System::Threading::Thread::Sleep(1000);

         }

private:
    /// <summary>
    /// Required designer variable.
    /// </summary>
    System::ComponentModel::Container ^components;

#pragma region Windows Form Designer generated code
    /// <summary>
    /// Required method for Designer support - do not modify
    /// the contents of this method with the code editor.
    /// </summary>
    void InitializeComponent(void)
    {
        this->SuspendLayout();
        // 
        // Form1
        // 
        this->AutoScaleDimensions = System::Drawing::SizeF(6, 13);
        this->AutoScaleMode = System::Windows::Forms::AutoScaleMode::Font;
        this->ClientSize = System::Drawing::Size(443, 343);
        this->Name = L"Form1";
        this->Text = L"Form1";
        this->ResumeLayout(false);

    }
#pragma endregion

}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T21:37:23.423

当 BackgroundWorker 触发 RunWorkerCompleted 事件时，它会在主 GUI 线程上执行此操作，这是运行析构函数的线程。当您调用 DoEvents 时，它使框架有机会运行等待在该线程上运行的其他任务，包括 RunWorkerCompleted 事件。

我添加`Thread::CurrentThread->ManagedThreadId`到您的调试消息中（并且未注释`Application::DoEvents()`），这就是我得到的：

```
Starting background worker from thread 1
Working on thread 3..
Working on thread 3..
Waiting on thread 1 for background worker to exit..
Exiting on thread 1..
Form1 destructor complete! 
```

所以，如果你不想使用 Application::DoEvents()，我会使用不同的机制来告诉 UI 线程 worker 已经退出。ManualResetEvent 在这里可以很好地解决问题。

```
private:
    ManualResetEvent^ mre;

public:
    Form1(void)
    {
        InitializeComponent();

        this->backgroundWorker1 = (gcnew System::ComponentModel::BackgroundWorker());
        this->backgroundWorker1->DoWork += gcnew System::ComponentModel::DoWorkEventHandler(this, &Form1::backgroundWorker1_DoWork);
        // Don't use this->backgroundWorker1->RunWorkerCompleted
        this->backgroundWorker1->ProgressChanged += gcnew System::ComponentModel::ProgressChangedEventHandler(this, &Form1::backgroundWorker1_ProgressChanged);
        this->backgroundWorker1->WorkerReportsProgress = true;
        this->backgroundWorker1->WorkerSupportsCancellation = true;

        this->mre = gcnew ManualResetEvent(false);

        System::Diagnostics::Debug::WriteLine("Starting background worker from thread {0}", Thread::CurrentThread->ManagedThreadId);
        backgroundWorker1->RunWorkerAsync();
    }

protected:
    ~Form1()
    {
        if( backgroundWorker1 != nullptr )
        {
            backgroundWorker1->CancelAsync();
        }

        System::Diagnostics::Debug::WriteLine("Waiting on thread {0} for background worker to exit..", Thread::CurrentThread->ManagedThreadId);
        this->mre->WaitOne();

        System::Diagnostics::Debug::WriteLine("Form1 destructor complete!");
    }

private:
    System::Void backgroundWorker1_DoWork(System::Object^  sender, System::ComponentModel::DoWorkEventArgs^  e)
        {
            try
            {
                while( backgroundWorker1->CancellationPending == false )
                {
                    System::Diagnostics::Debug::WriteLine("Working on thread {0}..", Thread::CurrentThread->ManagedThreadId);
                    System::Threading::Thread::Sleep(1000);
                }
            }
            finally
            {
                this->mre->Set();
            }
        } 
```

现在，说了这么多，您可能要考虑在这里使用常规线程，而不是 BackgroundWorker。通过在 UI 线程上触发“完成”和“进度”事件，我认为它更适合直接在 UI 线程上执行的任务太长，但结果将在几秒钟后在 UI 中可见。（在 UI 线程上触发事件可以很容易地使用操作结果更新 UI 控件。）对于您在此处显示的内容，在表单打开的整个过程中都在运行的东西，您并没有得到很大从 BackgroundWorker 中受益，因此您可以创建一个线程并自己做。

# ios - UISearchDisplayController：取消作为关闭按钮

> ID：11413389
> 
> 赞同：3
> 
> 时间：2012-07-10T12:31:53.907
> 
> 标签：ios, cocoa-touch, uikit, uisearchdisplaycontroller

我有这个问题`UISearchDisplayController`。我想在专用视图中使用它来处理搜索。对于我的控制器类，我使用了搜索栏、搜索控制器和表格视图控制器的组合。SearchViewController 链接到一个`.xib`.

```
@interface SearchViewController : UIViewController <UISearchBarDelegate, UISearchDisplayDelegate, UITableViewDelegate, UITableViewDataSource> {
  NSSet *words;
  UISearchDisplayController *searchController;
  UISearchBar *searchBar;
  PhraseTableViewController *phraseTableViewController;
} 
```

一旦`SearchViewController`出现，搜索栏就会成为第一响应者，因此搜索处于活动状态。一切看起来都很好，但有**一个例外：** 为了返回上一个视图，我想使用 SearchBar 的取消按钮。现在问题来了：如果用户在没有进行搜索时触摸底层 tableview 的灰色区域，取消按钮（因此是返回的唯一方法）消失。

这是我试图解决的问题：

1.  `showsCancelButton = YES`上`searchDisplayControllerDidEndSearch`。有效，但生成的 UI 丑得要命：取消按钮转出然后重新出现。
2.  `UITapGestureRecognizer`在 searchcontroller中添加一个，`searchResultTableView`希望能抓住水龙头。没用，还是通过了。
3.  子类`UISearchBar`和覆盖`self.searchController.searchBar setShowsCancelButton:`- 不起作用。

如何解决这个问题的想法：

1.  始终隐藏取消按钮，而是添加自定义按钮。问题：您知道如何做到这一点以使 UI 看起来不错吗？我最关心的是处理所有情况，以便搜索文本字段始终很好地保持在按钮的一侧。
2.  一起沟渠`UISearchDisplayController`以获得更灵活的解决方案。你知道去哪里看吗？在 iOS 3 之前，这个控制器不存在，对吧？周围没有解决方案仍然有效吗？

我很高兴您的任何意见。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T13:23:29.763

好的，我想我找到了一种可行的方法：我只是为正确的事件取消隐藏导航栏，以便用户获得后退按钮。请参阅下面的相关代码，但是我必须补充一点，一些事件处理是其他“特殊”行为的解决方案的一部分，这些行为`UISearchDisplayController`会使导航栏在错误的时间重新出现（在跳转到也会导致的详细信息页面之前）丑陋的动画）。

编辑：是的，我知道它很丑 - 但如果你问我，那该死的 UISearchDisplayController 也是如此。

```
static BOOL _cancelBtnClicked = NO;
static BOOL _phraseClicked = NO;

- (void)searchBarCancelButtonClicked:(UISearchBar *)_searchBar{ 
  if(self.searchController.active){
    _cancelBtnClicked = YES;
  }else{
    [self back];
  }
}

- (void)searchDisplayControllerDidEndSearch:(UISearchDisplayController *)controller{
  if(_cancelBtnClicked){
    _cancelBtnClicked = NO;
    [self back];
  }
  else if (!_phraseClicked) {
    [self.navigationController setNavigationBarHidden:NO animated:YES];
  }
}

- (void)keyboardWillHide:(NSNotification *)notification {
  if (_phraseClicked) {
    _phraseClicked = NO;
  }
  else if(self.isViewLoaded && self.view.window != nil) {
    self.navigationController.navigationBar.hidden = YES;
  }
}

- (void)hideNavbarAndKeepHidden {        
  self.navigationController.navigationBar.hidden = YES;
  [[NSNotificationCenter defaultCenter] addObserver:self  selector:@selector(keyboardWillHide:) name:UIKeyboardWillHideNotification object:nil];   
}

-(void) tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
  _phraseClicked = YES;
  [self.phraseTableViewController tableView:tableView didSelectRowAtIndexPath:indexPath];
} 
```

# php - PHP简单的html dom：apache崩溃

> ID：11413392
> 
> 赞同：0
> 
> 时间：2012-07-10T12:32:02.017
> 
> 标签：php, simple-html-dom

我正在使用**Simple HTML Dom**。我正在尝试运行以下命令：（使用 WAMP）

```
$doc = file_get_html('http://www.scoop.it/t/curate-your-personal-learning-environment?page=3');
$comments = array();
$CommentList = $doc->find('#commentList div[class=commentContainer]');
if (count($CommentList) > 0)
    var_dump($CommentList);
foreach ($CommentList as $comment)
{
    $text = $comment->find('span[class^=author]');
    $comments[] = $this::ctrim($text[0]->innertext);
} 
```

如果我注释掉 foreach 循环，它运行良好。否则，apache 崩溃。

一个重要的注意事项：如果我注释掉 foreach 循环的内部，它仍然会崩溃。我添加了 var 转储以确保数组具有有效项目。

编辑：

阿帕奇日志：

```
[Tue Jul 10 16:53:53 2012] [notice] Parent: child process exited with status 255 -- Restarting.
[Tue Jul 10 16:53:53 2012] [notice] Apache/2.2.22 (Win64) PHP/5.3.13 configured -- resuming normal operations
[Tue Jul 10 16:53:53 2012] [notice] Server built: May 13 2012 19:41:17
[Tue Jul 10 16:53:53 2012] [notice] Parent: Created child process 5568
[Tue Jul 10 16:53:53 2012] [notice] Child 5568: Child process is running
[Tue Jul 10 16:53:53 2012] [notice] Child 5568: Acquired the start mutex.
[Tue Jul 10 16:53:53 2012] [notice] Child 5568: Starting 64 worker threads.
[Tue Jul 10 16:53:53 2012] [notice] Child 5568: Starting thread to listen on port 80.
[Tue Jul 10 16:53:53 2012] [notice] Child 5568: Starting thread to listen on port 80. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T14:05:04.310

这可能是内存泄漏：
因为您的 apache 说：

> 子进程以状态 255 退出

请参见此处：
[PHP 内存不足 - 使 Apache 崩溃？](https://stackoverflow.com/questions/1990216/php-out-of-memory-crashes-apache)

> 由于 php5 循环引用内存泄漏，创建 DOM 对象后，如果多次调用 file_get_dom() 必须调用 $dom->clear() 释放内存。

从这里：[http ://simplehtmldom.sourceforge.net/manual_faq.htm#memory_leak](http://simplehtmldom.sourceforge.net/manual_faq.htm#memory_leak)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T12:42:06.933

尝试改变

```
$this::ctrim($text[0]->innertext); 
```

到

```
self::ctrim($text[0]->innertext); 
```

或者

```
$this->ctrim($text[0]->innertext); 
```

`$obj->method`是一个实例调用。 `Class::method`是静态调用。 `$this::method`可能会做一些奇怪的事情......

# css - 为用户提供查看桌面版响应式布局的选项

> ID：11413394
> 
> 赞同：4
> 
> 时间：2012-07-10T12:32:03.327
> 
> 标签：css

在使用响应式布局时，让用户选择在移动设备上查看桌面版网站的最简单方法是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-10T12:38:09.777

提供一些类，例如响应您的主要 HTML，例如：

```
<body class="responsive">
...
</body> 
```

`.responsive`并为普通屏幕编写不带父前缀的 CSS ：

```
.myheading {
...
}
.mybutton {
...
} 
```

`.responsive`在您的媒体查询中使用父前缀以获得较小的屏幕

```
@media all and (max-width: 320px) { /* example */
    .responsive .myheading {
    ...
    }
    .responsive .mybutton {
    ...
    }
} 
```

当有人想查看大屏幕版本时，只需执行以下操作：

```
$('body').removeClass('responsive'); 
```

并且您的媒体查询将从那里被忽略。当您想切换回响应式时，只需执行以下操作：

```
$('body').addClass('responsive'); 
```

注意：上述解决方案假设使用 jquery，即使没有 jquery，也可以轻松完成。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T13:08:49.597

像这样的东西不会起作用吗？

```
 $('#TOGGLE').on('click', function() {
     $('meta[name="viewport"]').remove();
 }); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-27T11:36:53.340

这对我有用：

`<head>`和之间`</head>`

```
<meta id="viewport" name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" /> 
```

`<body>`和之间`<body>`

```
<span id="desktopswitch">desktop version</span> 
```

`<script>`和之间`</script>`

```
$('#desktopswitch').on('click', function() {
    $('#viewport').attr('content','width=1024, initial-scale=0, maximum-scale=5.0, user-scalable=1');
}); 
```

不幸的是，它仅适用于当前站点。要在以下站点上以这种方式查看它，您应该使用 php.ini 查询它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-07-26T08:38:29.537

我想我为这个问题找到了很好的解决方案。它允许在“完整”和“移动”版本之间切换，而无需将整个 CSS 样式表与父前缀加倍。如果你有超过 2000-3000 行的 CSS，我认为'techfoobar' 的建议答案不是很简单......

嗯，首先你必须`<meta name="viewport" content="width=device-width">`在`<head>`标签中。

然后在您网站的页脚某处放置两个标签

```
<span id="setvar">FULL version of website</span>
<span id="removevar">Back to mobile version</span> 
```

接下来添加主要功能：主要思想是在localstorage中存储一些局部变量。即使在访问网站的其他页面时，它也允许在移动设备上保留“完整版”。因此，当用户点击“完整版网站”时，当他更改网站页面时，它将保持“完整版”。

```
<script>
$( document ).ready(function() {

   //when we clicking on 'show full version' we are changing viewport and define local variable into the localstorage
   $("#setvar").click(function(){
      localStorage.setItem('localVar', 'exist');
      $('meta[name="viewport"]').prop('content', 'width=1024');

      //imitate toggling effect
      $(this).hide();
      $('#removevar').show();
  });

  // when we go to other pages there is checking 'if the local variable exist' - if exist then window automatically switched to full version
  if (localStorage.getItem('localVar') === 'exist') {
    $('meta[name="viewport"]').prop('content', 'width=1024');
    $('#setvar').hide();
    $('#removevar').show();
  }

  // when we click on 'Back to mobile version' we are removing local variable from localstorage and restore default viewport
   $("#removevar").click(function(){
      localStorage.removeItem('localVar', 'exist');
      $('meta[name="viewport"]').prop('content', 'width=device-width');
      $(this).hide();
      $('#setvar').show();
   }); 
});
</script> 
```

最后 - 添加一些样式以在桌面上隐藏此功能

```
<style>
#removevar{
  display:none;
}
@media screen and (min-width: 1024px) {
  #setvar, #removevar{
  display:none;
  }
}
</style> 
```

# java - 如何使用@ContextConfiguration 在本地和内存中测试 Web Spring 应用程序？

> ID：11413396
> 
> 赞同：1
> 
> 时间：2012-07-10T12:32:06.650
> 
> 标签：java, spring, unit-testing, spring-mvc

让我们想象一个 Spring 3.1 web mvc 应用程序通过 Hibernate JPA 通过 DAO 使用 MySql。

必须在不部署应用程序和使用内存数据库（`hsqldb:mem`例如）的情况下为控制器编写测试。换句话说，应该能够在本地 PC 上运行测试。

如何做到这一点？有人可以提供一个详细的例子来说明如何为这样的控制器编写测试吗？应该怎么`@ContextConfiguration`配置？如何在`WebApplicationContext`本地检索用于测试目的？应该维护一个`hibernate-test.cfg.xml`？

**更新**

我不只是在谈论单元测试，我在谈论集成测试。

**解决方案**

为了在肖恩帕特里克弗洛伊德的回答之上完成这一点，这里有一个灵感来自[这里](http://www.swiftmind.com/de/2012/04/24/spring-3-1-and-mvc-testing-support-slides-from-4developers/)的解决方案：

服务示例：

```
public interface MarkingService {
    public String markItem(String item);
} 
```

使用服务的控制器示例

```
@Controller  
public class TestableController {

    @Autowired
    private MarkingService markerService;

    @RequestMapping(value = "mark/{name}")  
    public String mark(Model ui, @PathVariable String name){  

        String value = this.markerService.markItem(name);
        ui.addAttribute("mark-value", value);

        return "mark-show";  

    }  

} 
```

测试控制器的服务模拟：

```
public class MarkingServiceMock implements MarkingService {

    @Override
    public String markItem(String item) {
        return "mockValue";
    }

} 
```

用于测试配置的配置对象：

```
@Configuration
public class TestableControllerConfig {

    // We return a mock to test the controller layer
    @Bean
    public MarkingService markingService() {
        return new MarkingServiceMock();
    }

} 
```

控制器测试：

```
@RunWith(SpringJUnit4ClassRunner.class)  
@ContextConfiguration(classes={TestableControllerConfig.class})
public class TestableControllerTest {

    // Will be injected with TestableControllerConfig.markingService()
    @Autowired
    private MarkingService markerService;

    @Test
    public void testController() {

        // ...

    }

} 
```

假设服务层依赖于 DAO，也很容易注入基于内存数据库的实现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T12:45:41.483

通常，您不会测试整个设置。为 Web 层编写测试并在其中模拟持久层。为服务层和持久层编写单独的测试。

如果您要测试 web 控制器，请使用[`ModelAndViewAssert`](http://static.springsource.org/spring/docs/current/javadoc-api/org/springframework/test/web/ModelAndViewAssert.html)等[的 Mock 版本`HttpServletRequest`。](http://static.springsource.org/spring/docs/current/javadoc-api/index.html?org/springframework/mock/web/package-summary.html "包 org.springframework.mock.web")

另一方面，如果您想测试整个设置，请使用 HtmlUnit、Selenium 等运行自动化 Web 测试，但要在您真正部署的应用程序上进行（当然是在非公共安装上）。

但在我看来，如果你想测试大局，你需要测试真实的东西。大规模的嘲笑会变得非常混乱。

# c# - 在 C# 中反序列化键值字符串

> ID：11413398
> 
> 赞同：-2
> 
> 时间：2012-07-10T12:32:17.287
> 
> 标签：c#, .net, query-string, deserialization

我在键值对字符串中使用贝宝 NVP 和 NVP 响应

例子

> TOKEN=EC-3XXXXXXXXXXX154J&BILLINGAGREEMENTACCEPTEDSTATUS=1&CHECKOUTSTATUS=PaymentActionNotInitiated&TIMESTAMP=2012-07-10T11:45:59Z&CORRELATIONID=ecf9bfe9b1168&ACK=Success&VERSION=64.0&BUILD=3242673&EMAIL=govind_1341920205_per@gmail.com&PAYERID=3V85HKW32SXKG&PAYERSTATUS=verified&FIRSTNAME=Govind&LASTNAME=Malviya&COUNTRYCODE=US&SHIPTONAME=Govind Malviya&SHIPTOSTREET=1 Main St&SHIPTOCITY=San Jose&SHIPTOSTATE=CA&SHIPTOZIP=95131&SHIPTOCOUNTRYCODE=US&SHIPTOCOUNTRYNAME=United States&ADDRESSSTATUS=Confirmed&CURRENCYCODE=USD&AMT=30.90&SHIPPINGAMT=0.00&HANDLINGAMT=0.00&TAXAMT=0.00&DESC=test EC payment&INSURANCEAMT=0.00&SHIPDISCAMT=0.00&PAYMENTREQUEST_0_CURRENCYCODE=USD&PAYMENTREQUEST_0_AMT=30.90&PAYMENTREQUEST_0_SHIPPINGAMT=0.00&PAYMENTREQUEST_0_HANDLINGAMT=0.00&PAYMENTREQUEST_0_TAXAMT=0.00&PAYMENTREQUEST_0_DESC=test EC payment&PAYMENTREQUEST_0_INSURANCEAMT=0.00&PAYMENTREQUEST_0_SHIPDISCAMT=0.00&PAYMENTREQUEST_0_INSURANCEOPTIONOFFERED=false&PAYMENTREQUEST_0_SHIPTONAME=Govind Malviya&PAYMENTREQUEST_0_SHIPTOSTREET=1 Main St&PAYMENTREQUEST_0_SHIPTOCITY=San Jose&PAYMENTREQUEST_0_SHIPTOSTATE=CA&PAYMENTREQUEST_0_SHIPTOZIP=95131&PAYMENTREQUEST_0_SHIPTOCOUNTRYCODE=US&PAYMENTREQUEST_0_SHIPTOCOUNTRYNAME=United States&PAYMENTREQUESTINFO_0_ERRORCODE=0PAYMENTREQUEST_0_INSURANCEOPTIONOFFERED=false&PAYMENTREQUEST_0_SHIPTONAME=Govind Malviya&PAYMENTREQUEST_0_SHIPTOSTREET=1 Main St&PAYMENTREQUEST_0_SHIPTOCITY=San Jose&PAYMENTREQUEST_0_SHIPTOSTATE=CA&PAYMENTREQUEST_0_SHIPTOZIP=95131&PAYMENTREQUEST_0_SHIPTOCOUNTRYCODE=US&PAYMENTREQUEST_0_SHIPTOCOUNTRYNAME=United States&PAYMENTREQUESTINFO_0_ERRORCODE=0PAYMENTREQUEST_0_INSURANCEOPTIONOFFERED=false&PAYMENTREQUEST_0_SHIPTONAME=Govind Malviya&PAYMENTREQUEST_0_SHIPTOSTREET=1 Main St&PAYMENTREQUEST_0_SHIPTOCITY=San Jose&PAYMENTREQUEST_0_SHIPTOSTATE=CA&PAYMENTREQUEST_0_SHIPTOZIP=95131&PAYMENTREQUEST_0_SHIPTOCOUNTRYCODE=US&PAYMENTREQUEST_0_SHIPTOCOUNTRYNAME=United States&PAYMENTREQUESTINFO_0_ERRORCODE=0

我想在强类型数据中反序列化它，就像 JavaScriptSerializer 对 json 字符串所做的那样。请不要使用字典提供解决方案我想避免使用魔术字符串，我可以在每个属性上添加属性。

我的课是

```
 public class GetExpressCheckoutDetailsResponse : IPaypalResponse
    {
        public string Token { get; set; }
        public string BillingAgreementAcceptedStatus { get; set; }
        public string CheckoutStatus { get; set; }
        public string Timestamp { get; set; }
        public string CorrelationID { get; set; }
        public Status Acknowledgement { get; set; }
        public string Version { get; set; }
        public string Build { get; set; }
        public string Email { get; set; }
        public string PayerID { get; set; }
        public string PayerStatus { get; set; }
        public string FirstName { get; set; }
        public string LastName { get; set; }
        public string CountryCode { get; set; }
        public string ShiptoName { get; set; }
        public string ShiptoStreet { get; set; }
        public string ShipToCity { get; set; }
        public string ShipToState { get; set; }
        public string ShipToZip { get; set; }
        public string ShipToCountryCode { get; set; }
        public string ShipToCountryName { get; set; }
        public string AddressStatus { get; set; }
        public string CurrencyCode { get; set; }
        public string Amount { get; set; }
        public string ShippingAmount { get; set; }
        public string HandlingAmount { get; set; }
        public string TaxAmount { get; set; }
        public string Description { get; set; }
        public string InsuranceAmount { get; set; }
        public string ShipdiscAmount { get; set; }
        public string PaymentRequestCurrencycode { get; set; }
        public string PaymentRequestAmount { get; set; }
        public string PaymentRequestShippingAmount { get; set; }
        public string PaymentRequestHandlingAmount { get; set; }
        public string PaymentRequestTaxAmount { get; set; }
        public string PaymentRequestDescription { get; set; }
        public string PaymentRequestInsuranceAmount { get; set; }
        public string PaymentRequestShipdiscAmount { get; set; }
        public string PaymentRequestInsuranceOptionOffered { get; set; }
        public string PaymentRequestShipToName { get; set; }
        public string PaymentRequestShipToStreet { get; set; }
        public string PaymentRequestShipToCity { get; set; }
        public string PaymentRequestShipToState { get; set; }
        public string PaymentRequestShipToZip { get; set; }
        public string PaymentRequestShipToCountryCode { get; set; }
        public string PaymentRequestShipToCountryName { get; set; }
        public string PaymentRequestInfoErrorCode { get; set; }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T12:47:52.880

您可以使用 LINQ 将您的数据提取到一个`Dictionary<TKey, TValue>`然后您可以使用它来映射您的类中的数据，例如

```
var paypalResponse = "...";
var data = paypalResponse.Split('&') 
                         .Select(x => x.Split('=')) 
                         .ToDictionary(x => x[0], x => x[1]); 
```

然后，您可以将其传递给您的`GetExpressCheckoutDetailsResponse`类的构造函数，甚至可以在其中执行此操作，例如

```
public class GetExpressCheckoutDetailsResponse : IPaypalResponse
{
    public GetExpressCheckoutDetailsResponse(Dictionary<string, string> data)
    {
        this.Token = data["TOKEN"];
        this.BillingAgreementAcceptedStatus = data["BILLINGAGREEMENTACCEPTEDSTATUS"];
        ...
    }
} 
```

对这样的事情使用反射可能比它的价值更麻烦，因为您的属性不完全匹配，因此您需要为每个属性添加元数据属性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T18:31:38.473

您可以使用`HttpUtility.ParseQueryString`将您的字符串转换为`NameValueCollection`. 剩下的只是`reflection`

```
string responseString = "TOKEN=EC......";
var dict = HttpUtility.ParseQueryString(responseString);
GetExpressCheckoutDetailsResponse respObj = new GetExpressCheckoutDetailsResponse();
foreach (var p in respObj.GetType().GetProperties())
{
    p.SetValue(respObj, dict[p.Name]);
}

//respObj is ready to use 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T12:40:47.623

因此，由于您的问题没有现成的反序列化器，您应该执行以下操作：

1.  向代表贝宝响应的每个属性添加属性。
2.  反映类实例的属性并将它们缓存到 中`Dictionary<string, PropertyInfo>`，其中字符串是属性的值。
3.  在贝宝响应中迭代`"some string".Split(..)`方法的结果，收集字符串和值，然后将它们存储到您应该在字典中查找的相应属性中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T04:13:22.643

在您的特定情况下，而不是重新发明轮子；你如何使用 PayPal SDK？

[http://paypal.github.io/sdk/](http://paypal.github.io/sdk/)

您想要的是[用于 C# 的 Express Checkout SDK](http://paypal.github.io/sdk/)

它已经具有正确数据类型所需的所有字段，并且具有在几个简单函数调用之后自动执行所有调用/解析响应的额外好处。

手动构建您自己的 API 调用并解析响应并不是解决此问题的最佳方法。当然，*最终*你会让它工作，但在你这样做之前，这将是一个耗时且容易出错的过程......

# android - 在另一个活动中打开 TextView 链接，而不是默认浏览器

> ID：11413399
> 
> 赞同：18
> 
> 时间：2012-07-10T12:32:21.023
> 
> 标签：android, textview, linkify

将 textView`autoLinkMask`设置为`Linkify.ALL`，我可以打开链接并且浏览器显示网页。

我需要调用另一个活动来完成它的 webView 而不离开应用程序。

重要笔记：

*   更改 textView 内容不是一种选择，我需要将链接与它们所拥有的方案一样显示，
*   textView 中有很多文本，不仅仅是链接。

我看了看`movementMethod`，`IntentFilters`可能会错过一些东西，但看起来无济于事。

那么，是否有任何选项可以拦截中的触摸链接以在`TextView`不打开浏览器的情况下对其进行操作？

如果您想提及[这个](https://stackoverflow.com/questions/1697084/handle-textview-link-click-in-my-android-app)SO 问题，请给出一些论据，为什么它似乎无法解决与我相同的问题。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-07-10T16:12:27.407

步骤#1：创建您自己的子类，`ClickableSpan`在其方法中执行您想要的操作`onClick()`（例如，调用`YourCustomClickableSpan`）

`URLSpan`步骤#2：将所有对象批量转换为`YourCustomClickableSpan`对象。我有一个实用程序类：

```
public class RichTextUtils {
    public static <A extends CharacterStyle, B extends CharacterStyle> Spannable replaceAll(Spanned original,
    Class<A> sourceType,
    SpanConverter<A, B> converter) {
        SpannableString result=new SpannableString(original);
        A[] spans=result.getSpans(0, result.length(), sourceType);

        for (A span : spans) {
            int start=result.getSpanStart(span);
            int end=result.getSpanEnd(span);
            int flags=result.getSpanFlags(span);

            result.removeSpan(span);
            result.setSpan(converter.convert(span), start, end, flags);
        }

        return(result);
    }

    public interface SpanConverter<A extends CharacterStyle, B extends CharacterStyle> {
        B convert(A span);
    }
} 
```

你会像这样使用它：

```
yourTextView.setText(RichTextUtils.replaceAll((Spanned)yourTextView.getText(),
                                             URLSpan.class,
                                             new URLSpanConverter())); 
```

有这样的习惯`URLSpanConverter`：

```
class URLSpanConverter
      implements
      RichTextUtils.SpanConverter<URLSpan, YourCustomClickableSpan> {
    @Override
    public URLSpan convert(URLSpan span) {
      return(new YourCustomClickableSpan(span.getURL()));
    }
  } 
```

将所有`URLSpan`对象转换为`YourCustomClickableSpan`对象。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-01-31T15:05:27.553

我通过添加 Click Listener 使 @CommonsWare 的代码更加优雅和清晰，它可以直接添加到替换 URL Spans 的相同方法中。

1.  定义`YourCustomClickableSpan Class`.

    ```
     public static class YourCustomClickableSpan extends ClickableSpan {

        private String url;
        private OnClickListener mListener;

        public YourCustomClickableSpan(String url, OnClickListener mListener) {
            this.url = url;
            this.mListener = mListener;
        }

        @Override
        public void onClick(View widget) {
            if (mListener != null) mListener.onClick(url);
        }

        public interface OnClickListener {
            void onClick(String url);
        }
    } 
    ```

2.  定义`RichTextUtils Class`哪个将操作 TextView 的跨区文本。

    ```
    public static class RichTextUtils {

        public static <A extends CharacterStyle, B extends CharacterStyle> Spannable replaceAll (
              Spanned original,
              Class<A> sourceType,
              SpanConverter<A, B> converter,
              final ClickSpan.OnClickListener listener) {

                  SpannableString result = new SpannableString(original);
                  A[] spans = result.getSpans(0, result.length(), sourceType);

                  for (A span : spans) {
                      int start = result.getSpanStart(span);
                      int end = result.getSpanEnd(span);
                      int flags = result.getSpanFlags(span);

                      result.removeSpan(span);
                      result.setSpan(converter.convert(span, listener), start, end, flags);
                  }

                  return (result);
              }

              public interface SpanConverter<A extends CharacterStyle, B extends CharacterStyle> {
                  B convert(A span, ClickSpan.OnClickListener listener);

         }
    } 
    ```

3.  定义`URLSpanConverter class`哪个将使用您的自定义跨度执行替换 URLSpan 的实际代码。

    ```
     public static class URLSpanConverter
            implements RichTextUtils.SpanConverter<URLSpan, ClickSpan> {

            @Override
            public ClickSpan convert(URLSpan span, ClickSpan.OnClickListener listener) {
                return (new ClickSpan(span.getURL(), listener));
            }
       } 
    ```

4.  用法

    ```
    TextView textView = ((TextView) this.findViewById(R.id.your_id));
    textView.setText("your_text");
    Linkify.addLinks(contentView, Linkify.ALL);

    Spannable formattedContent = UIUtils.RichTextUtils.replaceAll((Spanned)textView.getText(), URLSpan.class, new UIUtils.URLSpanConverter(), new UIUtils.ClickSpan.OnClickListener() {

        @Override
        public void onClick(String url) {
            // Call here your Activity
        }
    });
    textView.setText(formattedContent); 
    ```

请注意，我在这里将所有类都定义为静态的，因此您可以将其直接放在您的 Util 类中，然后从任何地方轻松引用它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-01-14T08:36:11.957

只是为了分享一个使用我刚刚创建的[Textoo](https://github.com/bluecabin/Textoo)的替代解决方案：

```
 TextView yourTextView = Textoo
        .config((TextView) findViewById(R.id.your_text_view))
        .addLinksHandler(new LinksHandler() {
            @Override
            public boolean onClick(View view, String url) {
                if (showInMyWebView(url)) {
                    //
                    // Your custom handling here
                    //
                    return true;  // event handled
                } else {
                    return false; // continue default processing i.e. launch browser app to display link
                }
            }
        })
        .apply(); 
```

在引擎盖下，库将`URLSpan`TextView 中的 's 替换为自定义`ClickableSpan`实现，该实现将点击事件分派给用户提供`LinksHandler`的（s）。该机制与@commonsWare 的解决方案非常相似。只需打包在更高级别的 API 中，使其更易于使用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-23T12:41:38.770

我认为[David Hedlund 对自己的回答](https://stackoverflow.com/questions/1697084/handle-textview-link-click-in-my-android-app#3452944)是要走的路。在我的情况下，我有一个包含 SMS 内容表单用户收件箱的 TextView，我想处理休闲行为：

1.  如果找到 WEB URL，则链接它并处理应用程序中的点击。
2.  如果找到 PHONE NUMBER，则将其链接并处理显示选择器的点击，让用户选择是拨打该号码还是将其添加到地址簿（都在应用程序中）

为此，我以这种方式使用了链接的答案：

```
TextView tvBody = (TextView)findViewById(R.id.tvBody);
tvBody.setText(messageContentString);

// now linkify it with patterns and scheme
Linkify.addLinks(tvBody, Patterns.WEB_URL, "com.my.package.web:");
Linkify.addLinks(tvBody, Patterns.PHONE, "com.my.package.tel:"); 
```

现在在清单中：

```
<activity
    android:name=".WebViewActivity"
    android:label="@string/web_view_activity_label">
    <intent-filter>
        <category android:name="android.intent.category.DEFAULT" />
        <action android:name="android.intent.action.VIEW"/>
        <data android:scheme="com.duckma.phonotto.web"/>
    </intent-filter>
</activity>
...
<activity
    android:name=".DialerActivity"
    android:label="@string/dialer_activity_label">
    <intent-filter>
        <category android:name="android.intent.category.DEFAULT" />
        <action android:name="android.intent.action.VIEW"/>
        <data android:scheme="com.duckma.phonotto.tel"/>
    </intent-filter>
</activity>
<activity
    android:name=".AddressBook"
    android:label="@string/address_book_activity_label">
    <intent-filter>
        <category android:name="android.intent.category.DEFAULT" />
        <action android:name="android.intent.action.VIEW"/>
        <data android:scheme="com.duckma.phonotto.tel"/>
    </intent-filter>
</activity> 
```

它对我来说很好用，当用户单击电话号码时，选择器将显示拨号器/地址簿选项。在被调用的活动`getIntent().getData()`中，用于查找传递的带有数据的 Url。

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2012-07-10T13:22:24.990

比这样做：

```
 TextView textView=(TextView) findViewById(R.id.link);
        textView.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                Intent intent=new Intent(YourActivityName.this,WebActivity.class);
                startActivity(intent);
            }
        }); 
```

WebActivity 类的 onCreate：

```
WebView webView=(WebView) findViewById(R.id.web);
webView.loadUrl("http://www.google.co.in"); 
```

在 xml 中的 textview 下添加：

```
android:clickable="true" 
```

# wcf - NET TCP/HTTP WCF 托管在 IIS 中

> ID：11413406
> 
> 赞同：7
> 
> 时间：2012-07-10T12:33:02.853
> 
> 标签：wcf, iis, endpoint, net.tcp

我是 WCF 和 IIS 的新手，但一直在阅读有关如何在 IIS 中托管 WCF 应用程序的信息。我们有一个系统正在尝试部署到需要 HTTP 和 NET.TCP 端点的 IIS。我已经按照我在随机教程中看到的所有配置，但我仍然无法从我的客户端连接。任何有关配置的帮助将不胜感激！

我的 WCF 目录中的 EdWCF.svc 文件：

```
< %@ ServiceHost Language="C#" Debug="true" Service="TwoFour.WCF.Engine.EdWCF" % > 
```

我的网络配置：

```
 <?xml version="1.0"?>
<configuration>
<system.serviceModel>

    <behaviors>
      <serviceBehaviors>
        <behavior name="MyBehaviour">
          <serviceMetadata HttpGetEnabled="True" />
        </behavior>
      </serviceBehaviors>
    </behaviors>

<service name="TwoFour.WCF.Engine.EdWCF" behaviorConfiguration="MyBehaviour">
       <host>
          <baseAddresses>
            <add baseAddress="net.tcp://localhost:12345/WCF/EdWCF.svc"/>
          </baseAddresses>
       </host>
       <endpoint address=""
                 binding="netTcpBinding"
                 bindingConfiguration="InsecureTcp"
                 contract="TwoFour.WCF.Interface.Shared.IEdWCF" />
       <endpoint address="mexhttp" binding="mexHttpBinding" contract="IMetadataExchange"/>
</service>

  <bindings>
            <netTcpBinding>
                <binding name="InsecureTcp" portSharingEnabled="true">
                    <security mode="None" />
                </binding>
            </netTcpBinding>
        </bindings>

</system.serviceModel>

</configuration> 
```

感谢您的任何帮助或建议！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-10T12:50:54.670

1.  在 IIS 中将 net.tcp 绑定添加到启用的协议列表中（管理网站 -> 高级设置 -> 启用的协议）

2.  在站点绑定中添加 net.tcp 绑定（编辑绑定 -> 添加 -> 选择类型为 net.tcp 并添加端口，如 12345:*）

您还需要在配置中指定基地址：

```
<system.serviceModel>
 <services>
     <host>
       <baseAddresses>
         <add baseAddress="net.tcp://server:12345/ServiceAddress.svc"/>
       </baseAddresses>
     </host>
     ...
 </service>
     ...
</system.serviceModel> 
```

**编辑：**

尝试这个

```
<system.serviceModel>

    <behaviors>
      <serviceBehaviors>
        <behavior name="MyBehaviour">
          <serviceMetadata />
        </behavior>
      </serviceBehaviors>
    </behaviors>

<service name="TwoFour.WCF.Engine.EdWCF" behaviorConfiguration="MyBehaviour">
       <host>
          <baseAddresses>
            <add baseAddress="net.tcp://localhost:12345/WCF/EdWCF.svc"/>
          </baseAddresses>
       </host>
       <endpoint address=""
                 binding="netTcpBinding"
                 bindingConfiguration="InsecureTcp"
                 contract="TwoFour.WCF.Interface.Shared.IEdWCF" />
       <endpoint address="mextcp" binding="mexTcpBinding" contract="IMetadataExchange"/>
</service>

  <bindings>
            <netTcpBinding>
                <binding name="InsecureTcp" portSharingEnabled="true">
                    <security mode="None" />
                </binding>
            </netTcpBinding>
        </bindings>

</system.serviceModel> 
```

# c# - 编译器为委托关键字生成的密封类包含虚方法

> ID：11413412
> 
> 赞同：18
> 
> 时间：2012-07-10T12:33:33.033
> 
> 标签：c#, .net, delegates, cil, il

在`delegate`C# 中使用关键字时，C# 编译器会自动生成从 class 派生的`System.MulticastDelegate`类。

这个编译器生成的类也包含 3 个方法：`Invoke, BeginInvoke and EndInvoke`.

所有这三个方法都被标记`public virtual extern`了，但有趣的是类本身也被标记了`sealed`。

在密封类中定义的虚拟方法不仅违反直觉，而且在 C# 中实际上是非法的。

所以我的问题是，这是否有特定的原因，或者它只是记住一些假设的未来增强而做的那些无害的事情之一？

编辑1：

原因是否可以强制使用“callVirt”IL操作码而不是“call”，以便在尝试执行这三种方法中的任何一种之前，CLR总是检查委托对象是否为空？虽然我不明白为什么 a`delegate`在这方面应该是一个特例。

强制使用也不是对性能的影响`callvirt`（尽管它可能是微不足道的）

编辑2：

添加了 CIL 标记，事实证明，定义委托的 C# 方式实际上是由 CIL 标准规定的。标准规定（以下不是全文）

> 委托应具有 System.Delegate 的基本类型。代表应被声明为**密封**，并且代表应拥有的唯一成员是此处指定的前两个或全部四个方法。这些方法应在运行时声明和管理。它们不应有实体，因为该实体应由 VES 自动创建。委托上可用的其他方法继承自基类库中的 System.Delegate 类。委托方法是：
> 
> 1.  实例构造函数
> 2.  Invoke 方法应该是**虚拟的**
> 3.  BeginInvoke 方法（如果存在）应该是**虚拟的**
> 4.  EndInvoke 方法应该是**虚拟的**

所以这绝对不是编译器过程的副作用，或者类似于其他有趣的编译器输出。

如果标准强调某事，那一定是有充分理由和理由的。

那么现在的问题是，为什么 CIL 代表标准同时强调密封和虚拟？

问题在这里吗？：

> 它们不应有实体，因为该实体应由 VES 自动创建。

它们是否标记为虚拟，以便可以在调用这些方法时执行 VES/CLR 生成的主体？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T14:01:33.397

你被你用来查看类型定义的反汇编程序绊倒了。必须将 IL 翻译回可识别的语言，例如 C#。这通常不可能完全保真，IL 的规则**与**C# 语言的规则不同。这不仅仅发生在委托身上，接口实现方法也是虚拟的，即使您没有在 C# 代码中声明它是虚拟的。

为了进一步搅浑水，如果编译器可以从代码分析中确定目标对象，IL 实际上允许编译器发出对虚拟方法的非虚拟调用。但是对于委托或接口调用，这永远不会发生。并且 IL 允许对非虚拟方法进行虚拟调用，这是 C# 编译器使用 gusto 执行的操作，以确保永远不能使用 null *this*调用实例方法。

但是这种 C# 用法是一个聪明的技巧，只有在设计 CLR 之后才发现。*virtual*的初衷当然是要注解该方法应该用 Callvirt 调用。最终这并不重要，因为编译器知道委托和接口行为，并且总是会发出 Callvirt。实际的方法调用是在假定 Callvirt 激活的 CLR 代码中实现的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-12T11:40:01.227

正如我在问题中指出的那样，这种密封的虚拟异常实际上是由 CIL 标准规定的。目前尚不清楚为什么 CIL 标准特别提到了委托方法`Invoke`，`BeginInvoke`并且`EndInvoke`应该是虚拟的，同时又强制密封`Delegate`继承的类。

此外，通过 SSCLI 代码后，我了解到 JIT 编译器的内部优化会自动将`callvirt`密封类的虚拟方法上的任何调用转换为带有额外空值检查的正常调用。`callvirt`这意味着，尽管在 IL 中标记为虚拟，但通过指令调用其 Invoke（或其他两个）方法时，委托不会受到任何性能影响。

当一个委托的调用被调用时，CLR 会自动为这个方法发出一个高度优化的主体，而不是编译 IL 代码来生成它为“普通”方法所做的主体。`virtual`这与在 IL中标记无关。

我还通过手动修改 IL 代码并重新组装它来验证虚拟可以安全地从生成的委托类的 IL 代码中删除。尽管违反了 CIL 标准，但生成的程序集运行良好。

```
.class private auto ansi beforefieldinit MainApp
       extends [mscorlib]System.Object
{
  .class auto ansi sealed nested private Echo
         extends [mscorlib]System.MulticastDelegate
  {
    .method public hidebysig specialname rtspecialname 
            instance void  .ctor(object 'object',
                                 native int 'method') runtime managed
    {
    } // end of method Echo::.ctor

    .method public hidebysig instance int32  Invoke(int32 i) runtime managed
    {
    } // end of method Echo::Invoke

    .method public hidebysig instance class [mscorlib]System.IAsyncResult 
            BeginInvoke(int32 i,
                        class [mscorlib]System.AsyncCallback callback,
                        object 'object') runtime managed
    {
    } // end of method Echo::BeginInvoke

    .method public hidebysig instance int32  EndInvoke(class [mscorlib]System.IAsyncResult result) runtime managed
    {
    } // end of method Echo::EndInvoke

  } // end of class Echo

  .method public hidebysig static void  Main() cil managed
  {
    .entrypoint
    // Code size       34 (0x22)
    .maxstack  3
    .locals init ([0] class MainApp app,
             [1] class MainApp/Echo dele)
    IL_0000:  nop
    IL_0001:  newobj     instance void MainApp::.ctor()
    IL_0006:  stloc.0
    IL_0007:  ldloc.0
    IL_0008:  ldftn      instance int32 MainApp::DoEcho(int32)
    IL_000e:  newobj     instance void MainApp/Echo::.ctor(object,
                                                           native int)
    IL_0013:  stloc.1
    IL_0014:  ldloc.1
    IL_0015:  ldc.i4.5
    //callvirt can also be replaced by call without affecting functionality
    // since delegate object is essentially not null here
    IL_0016:  callvirt   instance int32 MainApp/Echo::Invoke(int32)
    IL_001b:  call       void [mscorlib]System.Console::WriteLine(int32)
    IL_0020:  nop
    IL_0021:  ret
  } // end of method MainApp::Main

  .method private hidebysig instance int32 
          DoEcho(int32 i) cil managed
  {
    // Code size       7 (0x7)
    .maxstack  1
    .locals init ([0] int32 CS$1$0000)
    IL_0000:  nop
    IL_0001:  ldarg.1
    IL_0002:  stloc.0
    IL_0003:  br.s       IL_0005

    IL_0005:  ldloc.0
    IL_0006:  ret
  } // end of method MainApp::DoEcho

  .method public hidebysig specialname rtspecialname 
          instance void  .ctor() cil managed
  {
    // Code size       7 (0x7)
    .maxstack  8
    IL_0000:  ldarg.0
    IL_0001:  call       instance void [mscorlib]System.Object::.ctor()
    IL_0006:  ret
  } // end of method MainApp::.ctor

} // end of class MainApp 
```

请注意，我已将虚拟方法转换为普通实例方法。

由于这种更改后的 IL 运行得非常好，因此证明密封委托类中的标准强制虚拟方法不是必需的。它们也可以是普通的实例方法。

所以这个异常很可能是强调调用这三个委托方法实际上会导致调用其他一些方法（即运行时多态性就像“正常”虚拟方法一样）或者这是为了适应未来与代表相关的假设性增强。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-10T12:36:21.253

这是编译过程的副作用。我不知道确切的原因，这种行为还有更多的例子。例如，一个编译的静态类变成了一个抽象的密封类（所以你不能创建它的实例，也不能从它继承）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-10T12:44:08.613

它似乎不是特定于代表的。我试过这个例子：

```
 public abstract class Base
    {
        public abstract void Test();
    }

    public sealed class Derived : Base
    {
        public override  void Test()
        {
            throw new NotImplementedException();
        }
    } 
```

在 ILDasm 中，我得到这个是为了实现 Test() ：

```
.method public hidebysig virtual instance void 
        Test() cil managed
{
  // Code size       7 (0x7)
  .maxstack  8
  IL_0000:  nop
  IL_0001:  newobj     instance void [mscorlib]System.NotImplementedException::.ctor()
  IL_0006:  throw
} // end of method Derived::Test 
```

可能是 override 关键字不是 CLR 关键字。

# java - 7-Zip & Java - 我如何获得完成百分比的值？

> ID：11413416
> 
> 赞同：0
> 
> 时间：2012-07-10T12:33:56.690
> 
> 标签：java, compression, progress-bar, 7zip

我编写了一个 Java 代码，它使用 LzmaAlone.java 发送文件进行压缩。

发送一个文件不是问题，但要发送大量文件，我需要确认前一个文件已完成压缩。我还需要为每个被压缩的文件创建一个进度条......我该怎么做？

谢谢！

```
 Compressor c = new Compressor();
            try {
                c.compress(original, newfile);
            } catch (Exception e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } 
```

......

```
public void compress(String filename, String newPath) throws Exception {

        try {
            LzmaAlone.main(new String[]{ "e", filename, newPath});

        } catch (Exception e) {
            throw e;
        }
    } 
```

# quickbuild - 在 QuickBuild 中发布 NUnit 结果

> ID：11413418
> 
> 赞同：0
> 
> 时间：2012-07-10T12:34:10.707
> 
> 标签：quickbuild

我正在开发名为 QuickBuild 的 CI 工具，使用它我只需单击一下即可执行自动部署。

构建过程包括以下步骤：

1.  获取最新版本
2.  构建代码库
3.  验证数据库
4.  执行 Nunit
5.  发布结果，通过或失败

在 QuickBuild --> Steps --> Publish 下，有许多选项可以发布结果：

![附加快照](../Images/a879c5aa9ff44071b15fad0ad7f5df10.png)

在 NUnit 测试期间，将生成 .xml 文件，我正在尝试使用 Publish NUnit Report 将 .xml 文件发布到 QuickBuild。此外，我在远程服务器上设置了 QuickBuild，在构建服务器上设置了 Nunit.xml 文件，这是一个相对路径。

当我创建一个步骤并执行它时，它无法读取 XML 文件（大小超过 2 MB）。有没有办法在 QuickBuild UI 中查看所有准备就绪的 nUNit 结果。

我尝试过使用其他文件格式（.log、.html），但没有成功。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T10:27:52.297

请发布您的错误消息，这可以帮助您更多地了解您的问题。您可以在构建日志中找到错误消息。顺便说一句，发布步骤默认只接受 XML 格式。另外，请按照以下说明进行操作：

[http://wiki.pmease.com/display/QB50/Publish+NUnit+Report](http://wiki.pmease.com/display/QB50/Publish+NUnit+Report)

# java - 使用 Jaxb 解组通用子级

> ID：11413420
> 
> 赞同：2
> 
> 时间：2012-07-10T12:34:12.227
> 
> 标签：java, xml, jaxb

我有一个格式为 xml 的文件：-

```
<item>
    <item_attribute index="1" type="1" >
        <name>value1</name>
    </item_attribute>
    <item_attribute index="2" type="1" >
        <a_differnt_name>value2</a_different_name>
    </item_attribute>
    <item_attribute index="5" type="2" >
        <another_name>value3</another_name>
    </item_attribute>
</item> 
```

我正在使用 JAXB 来解组 xml，并为除“item_attribute”的子元素之外的每个元素设置一个类。我想一般地解组每个“item_attribute”元素中的数据（元素名称和元素值），而不知道元素的名称。

我所知道的是“item_attribute”总是只有 1 个子元素，并且可以调用该子元素并包含任何内容。

我尝试使用：

```
public class Item_attribute {

    private int index;
    private Object data;

    @XmlAttribute(name = "index")
    public int getIndex() {
        return index;
    }
    public void setIndex(int index) {
        this.index = index;
    }

    @XmlAnyElement(lax = true)
    public Object getData() {
        return this.data;
    }

} 
```

但它不断抛出非法注释异常！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-02T13:59:21.207

将@XmlAnyElement(lax=true) 添加到每个错误（javax.xml.bind.JAXBElement 没有默认构造函数）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T12:45:18.337

如果对字段（实例变量）进行注释，则需要添加以下类型级别的注释：

```
@XmlAccessorType(XmlAccessType.FIELD)
public class Foo {

    @XmlAnyElement(lax = true)
    private Object data;

     public Object getData() {  
          return this.data;
     }

} 
```

或者您可以将注释放在 get 方法上。

```
public class Foo {

    private Object data;

     @XmlAnyElement(lax=true)
     public Object getData() {  
          return this.data;
     }

} 
```

# iphone - 增强现实 SDK

> ID：11413421
> 
> 赞同：7
> 
> 时间：2012-07-10T12:34:14.257
> 
> 标签：iphone, ios, gps, augmented-reality

我一直在闲暇时间寻找有趣的事情做，并发现了一种叫做增强现实的东西。

基本上，我想听听您对我的几个问题的看法，也许您能谈谈您开发 AR 应用程序的经验。我正在考虑开发 iPhone/iOS 应用程序。

1.  有人知道任何功能强大且易于使用的简单的 iPhone AR sdks 吗？
2.  是否有可能从相机获得准确的坐标？IE：我将手机对准桌子并在那里“放置”一个 AR 怪物。然后我明天可以回来，怪物还会在那里。
3.  有什么好的教程可以让我开始吗？
4.  使用 FLAR 工具包并使用 AIR 部署到移动设备是否值得？显然，我已经对此进行了大量研究。但任何帮助，即使它只是你在谷歌上找到的让我开始的链接，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T15:31:18.380

我[在 iOS 中为增强现实分叉了 ARKit](https://github.com/a1phanumeric/iPhone-AR-Toolkit)，并添加了许多改进（例如雷达、范围限制器、更好看的标注等......）。它真的很容易集成，并且我在代码中捆绑了一个演示应用程序：

[iPhone-AR-工具包](https://github.com/a1phanumeric/iPhone-AR-Toolkit)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T10:06:31.410

检查他们提供的 SDK 示例的[AugmentedKit ，包括增强现实游戏示例。](http://www.augmentedkit.com)我认为这就是你正在寻找的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T04:43:54.753

1）最好的 AR SDK 是[Qualcomm 的 Vuforia SDK](http://ar.qualcomm.at) 他们提供单图像跟踪、多图像跟踪、叠加视频等示例。我认为他们不提供基于地理位置的 AR Demo。为此，您需要四处逛逛。

2) 对于基于位置的 AR，您可以查看[Wikitude](http://www.wikitude.com)。他们确实提供免费软件来四处寻找。

3)[维基百科列出了](http://en.wikipedia.org/wiki/List_of_augmented_reality_software)所有可用的 AR 软件以及链接。您可以查看它们并探索更多。仅供参考：我是本页列出的[Alive App的开发者之一。](http://en.wikipedia.org/wiki/Alive_app)

4) FLAR 是基于闪存的。我建议您按照上面和其他用户的建议探索更多选项。

希望这可以帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-04-15T05:52:40.450

对于安卓：

Android Studio 为安卓开发提供了自己的 SDK。Layar 和 Wikitude – 安卓。AFAIK、Wikitude 和 Layar 已经公开了他们的 SDK。

对于 iOS：

iOS，Metaio SDK，现已被苹果收购。您可以使用 Craft SDK。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-02-05T06:21:16.387

请查看 vuforia、wikitude 和 metaio SDK，你会得到一些关于 AR 的很好的信息/教程，因为他们提供了很好的示例应用程序来开始 iOS 和 Android。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-09T08:23:06.580

1
你有很多选择，其中一些是
**免费工具**
Junaio

**商业工具**
metaio SDK
ARToolkit SDK for iOS

2
据我所知，您要求的是基于 GPS 的 AR 体验。从上面提到的工具包中，Junaio 支持该功能。
我认为 FLAR 工具包不支持这一点。它支持基于标记和基于 NFT 的 AR
http://www.artoolworks.com/products/web/flartoolkit-2/

3
上面提到的工具包有很好的文档，你可以从那里开始。

4
这显然取决于您的要求。FLAR 工具包并非专门用于移动设备。因此，您必须将其集成到移动设备中。我提到的框架专门针对包括 iOS 在内的移动设备。

# php - 仅检查域的安全 API (JSONP)

> ID：11413428
> 
> 赞同：0
> 
> 时间：2012-07-10T12:34:28.127
> 
> 标签：php, security, api, cross-domain, jsonp

我正在构建一个只允许通过域名访问的 API(PHP)，我应该如何检查 JSONP 请求来源？
有没有我可以实施的安全层？（我目前没有使用钥匙*）

* =*我希望用户只添加脚本标签，我不希望他们必须插入密钥并搞砸 - 如果你有任何想法来实现它并保护它，我会很高兴听到它。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T12:37:29.273

没有安全的方法可以做到这一点，来源可以被欺骗......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T12:43:52.937

您将得到的最好的结果是：

**`referer`如果标头丢失或设置为具有白名单中域的 URL，则接受请求。**

这将阻止人们在 HTTP 站点上有效地使用您的 API 客户端。

一些（相对较少的）用户将禁用推荐人。他们将能够在任何使用 API 的网站上使用 API（但由于他们是少数，大多数网站都不想依赖它，因为它只会对大多数用户造成破坏）。

它不会阻止人们运行 HTTPS 网站和使用 API - 但他们的用户会被警告安全和不安全内容的混合，所以这也是一个没有吸引力的选择。

这不会阻止人们访问您的 API 服务器端，但您可以通过基于 IP 的速率限制来解决这个问题。

# php - 点击电话线的通话时长

> ID：11413429
> 
> 赞同：0
> 
> 时间：2012-07-10T12:34:29.383
> 
> 标签：php, javascript, iphone, html

在我的网站我有一个电话号码，我希望当访问者通过 iPhone 上网时，电话号码将是可点击的，并且点击次数将被计算在内。（我知道如何通过 google analitycs 做到这一点 - 使用事件）

我还想知道通话时间。（使用 js 或 PHP）

有可能的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T12:37:15.107

链接是链接，它们打开了一个协议，但它们仍然是链接。如果您使用 Jquery 并在您的电话链接上绑定 CLICK 事件，您可以计算它被点击的次数。

只需创建一个页面来响应计数机制（例如 ajax 页面）并将该调用存储在数据库中......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T12:39:46.323

无法使用 JS 或 PHP（或任何语言）检测电话的长度，除非您使用 VOIP 或类似的东西检测到电话本身。这首先与链接没有任何关系。

检测链接上的点击是可能的，请参阅 Dumoulin 的回答。

可以使用以下方法创建到电话号码的链接`<a href="tel:5555555">call</a>`：

# javascript - 使用 Backbone JS 的 jQuery 自动完成插件

> ID：11413430
> 
> 赞同：3
> 
> 时间：2012-07-10T12:34:30.367
> 
> 标签：javascript, jquery, jquery-ui, backbone.js

假设我想使用 jQueryUi 在具有表单的主干视图中实现自动完成。

我实现了以下代码 (*)，但我不喜欢它，因为当用户不键入任何字母时也会执行集合的获取。

只有当用户开始在输入框中输入内容时，我应该如何执行提取集合？

```
var MyView = Backbone.View.extend({
    initialize: function () {
        this.myCollection = new MyCollection();
        this.myCollection.fetch(); // I would like to fetch the collection 
                                   // only when the user start to type the first letter  
    },
    events: {
        'focus #names': 'getAutocomplete'
    },

    getAutocomplete: function () {
        $("#names").autocomplete({
            source: JSON.stringify(this.myCollection)
        });
    }
}); 
```

* * *

PS：
当用户输入第一个字母时，应该只执行一次提取。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-10T13:03:40.663

这应该有效，并且只调用一次 fetch 。

```
var MyView = Backbone.View.extend({
  initialize: function () {
    this.myCollection = new MyCollection();
    this.collectionFetched = false;
  },
  events: {
    'focus #names': 'getAutocomplete'
    'keydown #names': 'fetchCollection'
  },
  fetchCollection: function() {
    if (this.collectionFetched) return;
    this.myCollection.fetch();
    this.collectionFetched = true;
  },
  getAutocomplete: function () {
    $("#names").autocomplete({
        source: JSON.stringify(this.myCollection)
    });
  }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T13:01:22.240

试试这样：

```
var MyView = Backbone.View.extend({
    initialize: function () {
        this.myCollection = new MyCollection();

    },
    events: {
        'focus #names': 'getAutocomplete',
        'keydown #names':'invokefetch'
    },
    invokefetch : function(){
       this.myCollection.fetch(); 
       $("#names").unbind( "keydown", invokefetch);
    },    
    getAutocomplete: function () {
        $("#names").autocomplete({
            source: JSON.stringify(this.myCollection)
        });
    }
}); 
```

# ruby-on-rails - 在 after_save 中调用类方法

> ID：11413431
> 
> 赞同：7
> 
> 时间：2012-07-10T12:34:41.833
> 
> 标签：ruby-on-rails

这可能是一个愚蠢的观点，但我没有找到解决方案。

我有一个带有类方法的简单模型，`update_menu`我希望在每次保存实例后调用它。

```
Class Category
  attr_accessible :name, :content

  def self.menu
     @@menu ||= update_menu
  end

  def self.update_menu
     @@menu = Category.all
  end
end 
```

那么获取`after_filter`呼叫的正确语法是什么`update_menu`？

我试过了：

```
after_save :update_menu 
```

但它在实例（不存在）而不是类上查找方法。

感谢您的回答。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-10T12:36:29.663

通过删除使其成为实例方法`self`。

```
# now an instance method
def update_menu
   @@menu = Category.all
end 
```

`after_save`对类方法进行回调没有多大意义。类不保存，实例保存。例如：

```
# I'm assuming the code you typed in has typos since
# it should inherit from ActiveRecord::Base
class Category < ActiveRecord::Base
  attr_accessible :name
end

category_one = Category.new(:name => 'category one')
category_one.save  # saving an instance

Category.save # this wont work 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-10T12:43:28.100

```
after_save :update_menu

def updated_menu
  self.class.update_menu
end 
```

这将调用类 update_menu 方法

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-04T05:40:38.893

```
after_save 'self.class.update_menu' 
```

Rails will evaluate a symbol as an instance method. In order to call a class method, you have to pass a string which will be evaluated in the correct context.

NOTE: This only works with rails 4\. See Erez answer for Rails 5.

# jquery - 当用户滚动到页面的最底部时淡入/淡出固定位置 div

> ID：11413439
> 
> 赞同：2
> 
> 时间：2012-07-10T12:35:00.340
> 
> 标签：jquery, html, scroll, jquery-animate

这似乎很基本，但我试图让一个固定位置的页脚 div 在用户滚动到网页的最底部时滑动和淡入，然后在用户向上滚动时滑动和淡出。我搜索了 Stack Overflow，其他人提出了解决方案，但我的代码导致我的 div 只能滑动和淡入。当用户向上滚动时，我无法让 div 滑动和淡出。

此外，在我开始滚动后，这个 div 会立即滑入并淡入。我需要它等到它到达页面底部（或我可以放置在页面底部的不可见 div），然后我的固定位置 div 滑动并淡入。

有什么建议么？

**jQuery：**

```
$(function() {
    $('#footer').css({opacity: 0, bottom: '-100px'});
    $(window).scroll(function() {
        if( $(window).scrollTop + $(window).height() > $(document).height() ) {
            $('#footer').animate({opacity: 1, bottom: '0px'});
        }
    });
}); 
```

**HTML：**

```
<div id="footer">
    <!-- footer content here -->
</div> 
```

**CSS：**

```
#footer {
    position: fixed;
    bottom: 0;
    width: 100%;
    height: 100px;
    z-index: 26;
} 
```

### 感谢您的帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-10T13:09:40.717

我想我会尝试这样做。

[http://jsfiddle.net/lollero/SFPpf/3](http://jsfiddle.net/lollero/SFPpf/3)

[http://jsfiddle.net/lollero/SFPpf/4](http://jsfiddle.net/lollero/SFPpf/4) - 更高级的版本。

JS：

```
var footer = $('#footer'),
    extra = 10; // In case you want to trigger it a bit sooner than exactly at the bottom.

footer.css({ opacity: '0', display: 'block' });

$(window).scroll(function() {

   var scrolledLength = ( $(window).height() + extra ) + $(window).scrollTop(),
       documentHeight = $(document).height();

    console.log( 'Scroll length: ' + scrolledLength + ' Document height: ' + documentHeight )

   if( scrolledLength >= documentHeight ) {

       footer
          .addClass('bottom')
          .stop().animate({ bottom: '0', opacity: '1' }, 300);

   }
   else if ( scrolledLength <= documentHeight && footer.hasClass('bottom') ) {           
        footer
           .removeClass('bottom')
           .stop().animate({ bottom: '-100', opacity: '0' }, 300);

   }
}); 
```

HTML：

```
<div id="footer">
    <p>Lorem ipsum dolor sit amet</p>
</div> 
```

CSS：

```
#footer {
    display: none;
    position: fixed;
    left: 0px;
    right: 0px;
    bottom: -100px;
    height: 100px;
    width: 100%;
    background: #222;
    color: #fff;
    text-align: center;
}

#footer p {
    padding: 10px;
} 
```

# html - 正文内容 CSS、HTML 的边框

> ID：11413440
> 
> 赞同：1
> 
> 时间：2012-07-10T12:35:02.003
> 
> 标签：html, border, css

我努力为 HTML 中的正文内容制作边框。我用了：

```
-moz-border-image: url(/images/border.png) 20 repeat;
 -webkit-border-image: url(/images/border.png) 20 repeat;
 -o-border-image: url(/images/border.png) 20 repeat;
 border-image: url(/images/border.png) 20 repeat; 
 behavior: url(/css/PIE.htc); 
```

...但是因为它不能在资源管理器甚至其他一些浏览器的旧版本中工作，所以我决定采用旧的方式来制作它。但是，我不知道该怎么做。我们在旧网页中使用了这样的表格：

```
<BODY leftmargin=0" topmargin=0" marginwidth=0" marginheight=0" class="content">
<TABLE align="center" width="880" cellpadding="0" cellspacing="0" border="0">
    <TR>
        <TD><IMG src="/images/b-01-tl.jpg" alt="" width="20" height="20" border="0"><BR>
        </TD>
        <TD background="../images/b-01-mt.jpg" width="100%" valign="bottom">
        </TD>
        <TD><IMG src="/images/b-01-tr.jpg" alt="" width="20" height="20" border="0"><BR>
        </TD>
    </TR>
    <TR>
        <TD background="../images/b-01-ml.jpg"><BR>
        </TD>
        <TD bgcolor="#000000" class="bg-w0"> 
```

..但现在我用 div 和 HTML5 创建了页面。任何人都可以提出如何围绕内容实施新边界的想法。我们有 8 张边框图片 - 左上、上线、右上、右线、右下、下线、左下和左线。我知道可以用 div 做到这一点，但是我没有找到任何教程如何做到这一点。等待任何帮助:) 如果您需要边框图片，请写信给我，我会上传

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T13:14:46.413

所以你想用“老式的方式”来做，嗯，因为边框图像因为缺乏支持而让你失望？好吧，这或多或少是老式的方式：

```
<body>
<table cellspacing="0" cellpadding="0" border="0" width="100%">
    <tbody>
        <tr valign="top">
            <td class="upper-left" align="left"><img src="/image/blank.gif" alt="" height="20" width="20"></td>
            <td class="upper-center" width="100%"><img src="/image/blank.gif" alt=""height="20" width="20"></td>
            <td class="upper-right" align="right"><img src="/image/blank.gif" alt="" height="20" width="20"></td>
        </tr>    
        <tr valign="top">
            <td class="middle-left"><img src="/image/blank.gif" alt="" height="20" width="20"></td>
            <td width="100%">
                <!-- content below -->

                <!-- content above -->
            </td>
            <td class="middle-right"><img src="/image/blank.gif" alt="" height="20" width="20"></td>
        </tr>        
        <tr valign="top">
            <td class="lower-left" align="left"><img src="/image/blank.gif" alt="" height="20" width="20"></td>
            <td class="lower-center" width="100%"><img src="/image/blank.gif" alt=""height="20" width="20"></td>
            <td class="lower-right" align="right"><img src="/image/blank.gif" alt="" height="20" width="20"></td>
        </tr>        
    </tbody> 
</table>
</body> 
```

和 CSS：

```
<style type="text/css">
body { padding: 0; margin: 0; }
table tbody tr td { background-repeat: repeat; background-position: 0 0; }

.upper-left {background-image: url(/images/b-01-tl.jpg);}
.upper-center {background-image: url(/images/b-01-mt.jpg);}
.upper-right {background-image: url(/images/b-01-tr.jpg);}

.middle-left {background-image: url(/images/b-01-ml.jpg);}
.middle-right {background-image: url(/images/b-01-ml.jpg);}

.lower-left {background-image: url(/images/b-01-bl.jpg);}
.lower-center {background-image: url(/images/b-01-mb.jpg);}
.lower-right {background-image: url(/images/b-01-bl.jpg);}
</style> 
```

所以在桌子本身上，我们希望我们的边框图像彼此完美对齐，这就是我们需要的原因`cellspacing="0" cellpadding="0" border="0"`——你可能可以确保 padding 为 0 并且这些天边框折叠设置为折叠。这种表格可以像您需要的那样有弹性——它可以是全宽或窄至（在本例中）60 像素。请记住，宽度属性不会将“px”作为值的一部分。所以 100% 就是 100%，但 60px 只是 60。

在我们的中间列中，我们`width="100%"`为每个设置设置`<td>`以确保最后一列不会意外地变得太宽，我们迫使事物保持正确的宽度 - 这就是为什么我们还为单元格使用空白 gif 以便我们可以看到背景并获得合适的尺寸。在某些情况下，我们可能会使用`&nbsp;`它，但它们的大小可能无法预测 - 如果您希望这些边框只有 2 个像素高，那就有点冒险了。有一段时间，人们使用实际的 Netscape`<spacer>`标签，但效果并不好。

align="left" 和 align="right" 确实是出于习惯。如果不是在左右`<img>`标签中使用空白 gif，而是使用实际图像，那么您可以这样做。

在这个例子中，我实际上是使用 CSS 应用背景，嗯，我想不出过去 10 年制造的浏览器不会理解这一点，而且它更容易维护。我从不喜欢使用该`background`属性，而且我敢打赌，将来某天某些浏览器会取消对它的支持（如果他们还没有的话）。该解决方案以这种方式向后和向前看。那天我做了很多这种标记。

通常，当我们做这样的边框时，我们还会包含一个与边框有些匹配的背景颜色 - 我们会使用`bgcolor`属性来做到这一点，您可以将其放在`<tr>`指定一次，或放在整个表格上，然后在您需要的单元格。更少的标记总是更好，否则你会在文档中很好地搜索和替换。不幸的是，我无法使用旧迪斯尼乐园网站上的示例，但[http://web.archive.org/web/199](http://web.archive.org/web/19980709083315/http://namco.com/) ​​80709083315/http: //namco.com/ 有很多使用表格和间隔 gif 来，呃，启发你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T12:41:18.770

您的代码错误，您缺少''

```
-moz-border-image: url('/images/border.png') 20 repeat;
 -webkit-border-image: url('/images/border.png') 20 repeat;
 -o-border-image: url('/images/border.png') 20 repeat;
 border-image: url('/images/border.png') 20 repeat; 
 behavior: url('/css/PIE.htc'); 
```

# encryption - 使用 RSA 保护许可证文件

> ID：11413446
> 
> 赞同：2
> 
> 时间：2012-07-10T12:35:16.653
> 
> 标签：encryption, rsa, public-key-encryption

我想使用 RSA 来保护应用程序中的许可证文件。思路如下：

1.  创建许可证文件（明文）。
2.  创建一个 RSA 密钥对。
3.  使用公钥加密许可证文件。
4.  将私钥放入应用程序的二进制文件中。
5.  然后应用程序可以解码许可证文件并开始运行。

问题是我必须将私钥与我的应用程序一起发送。如果我将公钥保密，这会不会有问题？

如果没有，还有什么其他好的（足够的）方案来创建许可证文件系统？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T12:39:30.480

可以从私钥中恢复公钥，因此将私钥嵌入到应用程序中与以明文形式发布私钥和公钥一样好（以从二进制文件中破解私钥的努力为模） .

在这些情况下，许多人会采取混淆措施。其他解决方案是硬件令牌、网络身份验证或现成的许可证管理系统。

这可能会提供一些关于其他人如何使用公钥加密来创建许可证文件系统的想法：http: [//www.codeproject.com/Articles/203840/RSA-License-Protection](http://www.codeproject.com/Articles/203840/RSA-License-Protection)

# file - 阅读异步 tcp 消息 C# 的最佳方法？

> ID：11413450
> 
> 赞同：0
> 
> 时间：2012-07-10T12:35:29.450
> 
> 标签：file, asynchronous, tcp

我有一个文件传输应用程序（大文件），我想让它可以扩展。我使用异步回调来读取 16Kb 的消息。每当我收到一条消息时，我都会将它发送到一个将“解密”并处理它的类。使用的格式很简单：(int)Command->(int)MsgLen->(String)Msg。

这只是一个例子。我遇到的问题是，如果我想进行多次读取，处理这个问题的最佳方法是什么？如果 1 次读取中有多个命令会发生什么？例如，我快结束了，我只有 2 个字节的命令，而不是完整的 4 个？

我想到了一个队列，但是提取字节并转换它们很痛苦。有更好的选择吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T12:46:53.350

最简单的方法是保留`byte[]`所有未完成数据的数组（或类似的数据结构）。当新数据到达时始终附加到该数组，然后仅删除完全接收到的消息。

您唯一需要担心的是，如果您在处理另一条消息时收到一条消息 - 因此您需要锁定`byte[]`阵列上的操作。

有更多“聪明”的方法可以解决这个问题，但在大多数情况下，最简单的方法是最好的。

# internet-explorer - InternetExplorer 中未显示 MHT 文件

> ID：11413451
> 
> 赞同：1
> 
> 时间：2012-07-10T12:35:30.740
> 
> 标签：internet-explorer, internet-explorer-9, base64, mhtml

我有一个不会在 InternetExplorer 9 中显示的 mht 文件。我已经看到，文本/html 部分是用 base64 编码的：

```
Content-Type: text/html; charset="utf-8"
Content-Transfer-Encoding: base64 
```

这可能是 IE9 无法显示 MHT 文件的原因吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T13:16:42.763

Internet Explorer 9 可以毫无问题地打开此类 MHT 文件。

您可以使用以下两个文件进行测试：

*   [原始保存的 MHT 文件](http://db.tt/XIcOJzgu)- 此文件的 HTML 编码为`quoted printable`.
*   [修改保存的 MHT 文件](http://db.tt/kLnttwxN)- 对于此文件，我将`quoted printable`HTML 解码并重新编码为`base64`.

看看你能不能打开这两个文件。

您还可以对 base64 进行解码（例如，此处：[http](http://www.opinionatedgeek.com/dotnet/tools/base64decode/) ://www.opinionatedgeek.com/dotnet/tools/base64decode/ ）并查看它生成的 HTML。如果 base64 编码的数据损坏，它可能会生成浏览器无法显示的错误 HTML。

* * *

更新：我查看了下面评论中链接的 MHT 文件。它不包含有效的 HTML 页面，因此无法在 Internet Explorer 中显示。

原始解码的 HTML：

```
<P style="MARGIN: 0cm 0cm 0pt" class=yiv1976172747msonormal><FONT size=3>
<SPAN style="FONT-FAMILY: Arial; COLOR: black; mso-bidi-font-weight: bold">
My name is Walther </SPAN><SPAN style="COLOR: black"><?xml:namespace prefix = o
ns = "urn:schemas-microsoft-com:office:office" /><o:p></o:p></SPAN></FONT></P>
<P style="MARGIN: 0cm 0cm 0pt" class=yiv1976172747msonormal><FONT size=3><SPAN
style="FONT-FAMILY: Arial; COLOR: black; mso-bidi-font-weight: bold">I have some
money to invest in your country</SPAN><SPAN style="COLOR: black"><o:p></o:p>
</SPAN></FONT></P>
<P style="MARGIN: 0cm 0cm 0pt" class=MsoNormal><FONT size=3><SPAN
style="FONT-FAMILY: Arial; COLOR: black; mso-bidi-font-weight: bold">My email
</SPAN><B><SPAN style="FONT-FAMILY: Arial; COLOR: #ff6600">:</SPAN></B><FONT
face="Times New Roman"> </FONT></FONT><A href="mailto:dipl.george.walther@
hotmail.com"><SPAN style="TEXT-DECORATION: none; text-underline: none"><FONT
size=3 face="Times New Roman">dipl.george.walther@hotmail.com</FONT></SPAN>
</A><B><SPAN style="FONT-FAMILY: Arial; COLOR: #ff6600"><o:p></o:p></SPAN>
</B></P> 
```

当我删除 Outlook 添加的无效标签（`<o:p>`和类似标签）并在整个事物周围添加`<html>`标签`body`时，MHT 文件在 Internet Explorer 中正确打开。

简而言之，Outlook 会生成错误的 HTML，而 Internet Explorer 不知道如何阅读它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-13T16:56:54.760

如果`mht`文件是从 Web 服务器下载的，则`CONTENT-DISPOSITION`标题可能会设置为`Attachment`，这将阻止在 IE9 或更高版本的浏览器中查看它。这是解释：

*   [Internet Explorer 如何通过下载管理器下载 HTML 文件](http://support.microsoft.com/kb/2846926)

# c++ - 无法识别的编译指示：减少子句 | 开放式MP

> ID：11413454
> 
> 赞同：0
> 
> 时间：2012-07-10T12:35:52.610
> 
> 标签：c++, openmp, reduction

对于下面的代码，我得到一个错误：`unrecognized #pragma: #pragma omp reduction (+: sum)`。请注意，函数内部的 for 循环不是并行循环，因为函数本身已经并行化。你能说问题在哪里吗？

**主cpp文件：**

```
#include <omp.h>

int main ()
{
    #pragma omp parallel
    {
        function ();
    }
} 
```

**另一个 cpp 文件，其中定义了函数**

```
#include <omp.h>

void function ()
{
    T priv_var;

    // some calculations

    #pragma omp reduction (+: sum)  // sum is a shared variable
    {
        for (;;)
        {
            sum = sum + priv_var;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T16:55:58.430

我试过`#pragma omp parallel reduction (+: sum)`了，它奏效了。这里有几种用法：http `reduction`: [//msdn.microsoft.com/en-us/library/88b1k8y5 (v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/88b1k8y5(v=vs.80).aspx)

# python - 在 Tkinter 中为框架添加标签会忽略框架的属性

> ID：11413459
> 
> 赞同：4
> 
> 时间：2012-07-10T12:36:01.893
> 
> 标签：python, tkinter, label, frame

我已经创建了一个固定大小的框架，现在我想在上面添加一些标签和其他小部件。但是我观察到，一旦我在这个框架上添加了新的小部件，它的属性就不会被尊重，即大小和默认的背景颜色集不会被尊重。

```
from Tkinter import *
tk = Tk()
page1 = Frame(tk, bg="blue", width=100, height=200)
l1 = Label(page1, text='This is label 1')
page1.pack()
l1.pack()
tk.mainloop() 
```

所以在上面的例子中，如果我注释掉第 4 行和第 6 行，那么我可以看到一个固定大小的框架，带有蓝色背景色。我的要求是我想用这种颜色在这个框架上添加一些其他小部件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T13:18:09.790

你对宽度和高度没有被尊重是正确的，但对于背景颜色却不是。背景颜色不受影响，但您看不到背景，因为背景正好适合标签周围。如果您在打包时为标签添加填充，您将看到背景。

至于宽度和高度……这是 Tkinter 的一大特色。默认情况下，容器小部件会展开或折叠到刚好足以容纳其内容。因此，当您调用 时`pack`，它会导致框架缩小。此功能称为*几何传播*。

对于*绝大多数*应用程序，这是您想要的行为。在极少数情况下，当您想明确设置容器的大小时，您可以关闭此功能。要关闭它，请在容器上调用`pack_propagate`或调用`grid_propagate`（取决于您是在该容器上使用 grid 还是 pack），并为其赋予`False`.

以您的代码为例，您可以：

```
page1.pack_propagate(False) 
```

我的建议是不要这样做，而是学习如何使用几何传播。当用户调整窗口大小时，它将使您的 GUI 表现得更好，并且您不会花时间尝试计算窗口的正确大小。让 Tkinter 为你做这件事。

# python - 如何在不覆盖新颜色条或子图标题的情况下更新 matplotlib 中的 imshow？

> ID：11413460
> 
> 赞同：0
> 
> 时间：2012-07-10T12:36:11.363
> 
> 标签：python, matplotlib, tkinter, python-2.7

**背景：**我正在开发一个数据处理应用程序，并且正在尝试使用嵌入到 tkinter gui 中的 matplotlib 来可视化 2D 数组。我试图通过收集用户输入（即他们想要显示的帧，各种其他选项）来更新 matplotlib 图，所以我不想提前生成动画。

**系统：** Windows xp、Python 2.7、matplotlib 1.1.1rc

**问题：**如何仅更新 imshow 生成的图像而不更新颜色条？

**GUI** ![图形用户界面快照](../Images/dd2f7d4718973a1a5cf6111d68339f87.png) *注意彩条是如何覆盖自身的。*

**代码：** *注意：下面的代码未经测试，但这是我当前代码设置的基本思路*

```
import matplotlib
import matplotlib.pyplot as plt
from matplotlib.backends.backend_tkagg import FigureCanvasTkAgg, NavigationToolbar2TkAgg
import Tkinter as tk
import numpy as np

class MainWindow:
    def __init__(self,application):
        self.mainframe=tk.Frame(application)

        #update button
        ttk.Button(application,text='Update',command=self.update).pack()

        #matplotlib setup
        self.ren2DFig=plt.figure(figsize=(4,4),dpi=100)
        self.renCanvas=FigureCanvasTkAgg(self.ren2DFig,master=self.renWin2D)
        self.renCanvas.show()
        self.renCanvas.get_tk_widget().pack()

        self.subPlot=self.ren2DFig.add_subplot(111)
        self.subPlot.get_yaxis().set_visible(False)
        self.subPlot.get_xaxis().set_visible(False)
        self.subPlot.get_axes().set_frame_on(False)
        frame=np.zeros((20,40),)
        frame[9:11 ,9:11]=1
        frame[5 ,5]=.5
        self.im=self.subPlot.imshow(self.rotate(frame), origin = 'lower')
        self.cbar=self.ren2DFig.colorbar(self.im)
        self.cbar.set_label('Solid Fraction')
        self.renCanvas.draw()
        self.ren2DFig.canvas

    def update(self):
        self.im.set_array(np.zeros((20,40),))
        self.renCanvas.draw() # I think this is the problem?

application=tk.Tk()
application.focus_force()
window=MainWindow(application)
application.protocol("WM_DELETE_WINDOW",window.close)
application.mainloop() 
```

任何帮助将非常感激！谢谢！

**更新**[2012 年 7 月 13 日]：

如果我尝试清除子图，然后添加图像和颜色条，最后重新绘制画布，我得到这个：

![matplotlib](../Images/4e60ef84133bc77c83805c85343518b5.png)

我到底做错了什么？？？？？？这真的开始激怒我了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T15:04:25.163

我想通了。问题在于

```
self.subPlot.get_axes().set_frame_on(False) 
```

我想这是一个错误或其他东西，但如果我将其更改为 True，即

```
self.subPlot.get_axes().set_frame_on(True) 
```

它工作得很好，一切都像往常一样更新。

这个小东西难倒我两天！！！去搞清楚。哈哈。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T13:09:16.727

我没有看到您所看到的行为：

```
import matplotlib.pyplot as plt
import numpy

plt.ion()

data = numpy.arange(12).reshape(3, 4)
im = plt.imshow(data)
plt.colorbar(im)
im.set_array(5-data)
# re-draw now that we have changed the data array
plt.draw() 
```

在不修改颜色条的情况下更新图像。您能否进一步解释您遇到的问题？

# mysql - MySQL：有什么方法可以关闭处于睡眠模式超过 10 分钟的 mysql 连接

> ID：11413462
> 
> 赞同：0
> 
> 时间：2012-07-10T12:36:16.673
> 
> 标签：mysql, database-connection

最近我在一台生产服务器上观察到，许多连接处于睡眠模式超过 3 小时左右。我想知道我们在mysql中是否有一种方法，如果我们设置，将自动关闭这些长时间休眠的连接。

我已经给出了类似手动运行“刷新表”的阅读，但我希望它由 mysql 自动发生。有没有这样的解决方案

如果我制作一个将连接到mysql并定期运行“刷新表”的脚本，它是否会成为一个问题......

提前致谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T16:19:40.813

这是我发现的一种完全符合上述标准的好方法。

=========================================

检查睡眠进程并每 100 秒将它们全部杀死：

mk-kill --match-command 睡眠 --kill --victims all --interval 100

=========================================

# iphone - 如何在 iPhone 应用程序中使用 arcgis 在地图视图上添加要素图层？

> ID：11413464
> 
> 赞同：0
> 
> 时间：2012-07-10T12:36:19.537
> 
> 标签：iphone, ipad, arcgis, arcgis-server, mkmapview

有人可以指导我在 iPhone 应用程序中使用 arcgis 在地图视图上添加带有 URL 的要素图层吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T19:44:50.523

您可以像 ArcGIS JavaScript API 示例中给出的任何示例一样创建 Web 应用程序：

[http://help.arcgis.com/en/webapi/javascript/arcgis/help/jssamples/fl_hover.html](http://help.arcgis.com/en/webapi/javascript/arcgis/help/jssamples/fl_hover.html)

大多数 ArcGis Server 的东西都可以在移动设备上运行。代码看起来像这样：

```
var southCarolinaCounties = new esri.layers.FeatureLayer("http://sampleserver1.arcgisonline.com/ArcGIS/rest/services/Demographics/ESRI_Census_USA/MapServer/3", {
              mode: esri.layers.FeatureLayer.MODE_SNAPSHOT,
              outFields: ["NAME", "POP2000", "POP2007", "POP00_SQMI", "POP07_SQMI"]
            });
southCarolinaCounties.setDefinitionExpression("STATE_NAME = 'South Carolina'");

   map.addLayer(southCarolinaCounties); 
```

# jquery - 字母数字在 jquery 中不起作用

> ID：11413474
> 
> 赞同：0
> 
> 时间：2012-07-10T12:36:39.723
> 
> 标签：jquery, validation, alphanumeric

> **可能重复：**
> [如何检查字母数字字符](https://stackoverflow.com/questions/5732187/how-to-check-for-alphanumeric-characters)

海我使用 alphanumbercic 在 jquery 中验证密码。它只验证字母，假设我只输入了它允许的数字。请指导我

**问题**

不使用它允许的字母

**编码**

```
letters = /^[0-9a-zA-Z]+$/;   
            if(!password.value.match(letters))   
            {   
                alert('Password must be alphanumeric');   
                signupForm.password.focus();   
                return false;   
            } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T12:50:08.657

如果您的密码必须包含**所有**大小写：大写字母、小写字母和数字，那么您需要创建 3 个正则表达式：

```
var regexps = [/[A-Z]/,   //capital letter
              /[a-z]/,    //small letter
              /\d/ ];     //numeric digit
//This regexp is for assuring that 
//password does not contain other symbols than alphanumerics
var nonAlphanumericRegExp = /[^0-9a-zA-Z]/; 
```

然后像这样验证：

```
if(regexps.some(function(value){  return !value.test(password.value); }) ||
       nonAlphanumericRegExp.test(password.value)){
    alert('Password must be alphanumeric');   
    signupForm.password.focus();   
    return false; 
} 
```

[现场演示](http://jsfiddle.net/S5W2D/1/)

*文档*：

[**Array.some()**](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/some)

[**正则表达式.test()**](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/RegExp/test)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T12:40:49.573

我建议，可能：

```
/([a-z])([0-9])/ 
```

它看起来匹配一组`[a-z]`字母和`[0-9]`数字。

原始表达式中的问题似乎是它只寻找*一*组字符，这些字符与标识为的范围的任何部分匹配`a-z`，`A-Z`或者`0-9`，对于只有数字、只有字母或数字*和*字母，这将匹配为真。

上述 RegExp 修改为：

```
/(([a-z])+([0-9]))|(([0-9])+([a-z]))/ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/Qaswd/)。

上述更改的原因是，RegExp 将同时匹配*和* `a1`，`1a`使用`|`(RegExp `or`) 匹配其中一个或另一个，但`false`如果两者都没有找到并且`true`如果找到任何一个，则仍然返回。

# vim - 使 vim ' % ' 命令在 verilog 类型代码中更有用

> ID：11413475
> 
> 赞同：4
> 
> 时间：2012-07-10T12:36:43.407
> 
> 标签：vim, vi, verilog

In`VIM` `%`是一个极好的节省时间的命令。我在verilog工作，它没有太多使用括号。所以我想知道是否有任何机制可以让我`%`在verilog中有效使用。

例如 ：

1.  如果我的光标在 word 下`task`并且我发出`%`命令，它会将我带到我们所在的行`endtask`。

2.  对于`module`to`endmodule`和`begin`to也是如此`end`。

当我们查看大型 Verilog 模块和函数时，这种特性非常有用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-10T13:03:40.120

激活 matchit 插件。它是 Vim 发行版的一部分，但默认情况下未激活。说明在这里：`:help matchit-install`。

我认为不支持 verilog，但添加新定义相对容易。详情请参阅`:help matchit-newlang`。

# django - Django-SES 不考虑 mail_managers 中的 DEFAULT_FROM_EMAIL

> ID：11413477
> 
> 赞同：0
> 
> 时间：2012-07-10T12:36:51.410
> 
> 标签：django, amazon-ses, django-email

我正在使用`django-ses`AWS 简单电子邮件服务发送电子邮件。`send_mail()`我使用设置中设置的相同电子邮件地址发送没有问题，但使用`mail_managers()`时出现`MessageRejected`异常。

这是一个演练：

```
$ python manage.py ses_email_address -l
Fetching list of verified emails:
gez@gez.com 
```

并通过 python 外壳：

```
>>> settings.DEFAULT_FROM_EMAIL
'gez@gez.com'
>>> settings.MANAGERS
(('omat', 'om@tekno.org'),)
>>> send_mail('test', 'test', 'gez@gez.com', ['om@tekno.org'])
1
>>> mail_managers('test', 'test')
BotoServerError: BotoServerError: 400 Bad Request
<ErrorResponse xmlns="http://ses.amazonaws.com/doc/2010-12-01/">
  <Error>
    <Type>Sender</Type>
    <Code>MessageRejected</Code>
    <Message>Email address is not verified.</Message>
  </Error>
  <RequestId>66269bb3-ca86-11e1-80db-5b89cf7a6356</RequestId>
</ErrorResponse> 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T13:06:24.583

这不是由`django-ses`. 两者都`mail_admins`使用`mail_managers`设置`SERVER_EMAIL`作为发件人地址而不是`DEFAULT_FROM_EMAIL`：[https ://docs.djangoproject.com/en/1.4/topics/email/#mail-managers](https://docs.djangoproject.com/en/1.4/topics/email/#mail-managers)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-08-13T19:30:26.433

我在收到 Amazon SES 中出现的错误 500 电子邮件时遇到了一些麻烦。此过程可能对其他人有所帮助。

检查事项：

*   它在本地工作！（我用过[django.core.mail.backends.console.EmailBackend](https://docs.djangoproject.com/en/3.1/topics/email/#console-backend)）

    *   这意味着您可以生成应用程序错误，您将在运行服务器的控制台中看到它
*   [`ADMINS`](https://docs.djangoproject.com/en/3.1/ref/settings/#std:setting-ADMINS)需要定义

*   检查当 DEBUG=False 时没有过滤器阻止邮件发送

*   如果它在本地不起作用，请运行调试器并单步执行[`AdminEmailHandler`](https://docs.djangoproject.com/en/2.2/_modules/django/utils/log/). 这可能会清除电子邮件未发送的原因。

如果一切都在本地运行，请部署到 AWS。

*   检查您的应用程序是否可以发送电子邮件 (!)，例如：

    *   触发内部电子邮件，例如重置密码
    *   通过 EC2 实例连接到应用程序并调用[`send_email()`](https://docs.djangoproject.com/en/3.1/topics/email/)
*   登录到 SES 控制台并检查电子邮件是否已发送（在“发送统计信息”下）

*   触发 500 错误 - 发送统计信息也应该增加，表明 SES 发送了一封电子邮件。

*   是否收到电子邮件？

    *   检查垃圾邮件文件夹
    *   目标电子邮件地址是否列在 SES 中的“电子邮件地址”下（如果您的 SES 帐户在沙箱中，则为必需）
*   我必须确保[`DEFAULT_FROM_EMAIL`](https://docs.djangoproject.com/en/3.1/ref/settings/#std:setting-DEFAULT_FROM_EMAIL)并[`SERVER_EMAIL`](https://docs.djangoproject.com/en/3.1/ref/settings/#std:setting-SERVER_EMAIL)设置为 SES 中已验证的电子邮件地址

# bash - 从文件中捕获序列的开头

> ID：11413490
> 
> 赞同：6
> 
> 时间：2012-07-10T12:37:28.617
> 
> 标签：bash, sed, awk, grep

我有一个像这样的文本文件：

```
 125
      126
      127    {
      566
      567
      568
      569       # blah blah
      570    {  #blah blah
      700
      701    { 
```

数字是左对齐的，模式在增加的意义上总是相同的，最后有一个花括号。我只需要抓住起始数字。总是找到大括号并限制在序列结尾。文件的开头如图所示以“125”开头。

简而言之，我需要：

```
 125
      566
      700 
```

我想出了什么：

```
 grep -A1 '{' | grep -v '{' | grep -oE '(^[0-9]+?)' 
```

但这省略了 '125' 但我通过在头部附加一个换行符并插入一个`{`.

我希望将其简化为一个正则表达式。

欢迎提出建议和更好的算法

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T12:45:53.237

```
awk 'BEGIN {p=1} p==1 {print $1;p=0} $0~/{/ {p=1}'

Output:
125
566
700 
```

鉴于上述文件格式，您可以使用 awk 和一个变量/标志来跟踪您何时找到一个开口`{`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-10T12:43:45.760

```
sed -n '1p;/{/{
N
s/.*\n\([0-9]\+\).*/\1/p
}' input_file 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-10T12:44:17.247

您可能需要调整正则表达式，但是：

```
awk '!k; { k = !/^ *[0-9]* *{/ }' 
```

这将打印第一行以及与正则表达式匹配的行之后的任何行`^ *[0-9]* *{` 您可能会简化事情并执行以下操作：

```
awk '!k;{k=$2!="{"}' 
```

这将打印第一行和第二个字段是单个左大括号的行之后的任何行。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-10T12:41:01.740

我会使用 awk 和一个标志来捕获大括号的存在并打印下一行。在开头设置标志，您将获得第一行。

未经测试，但类似于：

```
BEGIN {hasCurly = 1}
{ 
    if(hasCurly) 
        print $1;

    hasCurly = match($2,"^\{");
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-10T12:48:41.327

这是一个纯 bash 解决方案：

```
start=1
while read n rest; do
    if (( start )); then
        printf '%d\n' $n
        start=0
    elif [[ $rest = \{* ]]; then
        start=1
    fi
done < input 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-10T12:53:39.853

`sed`将在代码高尔夫比赛中获胜 =) ：

```
sed -n '1p;/{/{n;p}' file 
```

要删除号码后的所有内容，请使用：

```
sed -n '1{s/\s*\([0-9]\+\).*/\1/;p};/{/{n;s/\s*\([0-9]\+\).*/\1/;p}' file 
```

# asp.net-mvc - 在需要时创建对象的正确方法

> ID：11413493
> 
> 赞同：0
> 
> 时间：2012-07-10T12:37:34.187
> 
> 标签：asp.net-mvc, dependency-injection, ninject

我正在学习 Ninject 作为我的第一个 DI 容器，我想所有容器都会有类似的想法，所以这是我的问题。

我有一个类 UserRepository 有一个功能：

```
//constructor
public UserRepository(Kernel kernel) { _kernel = kernel; } 

public UserDataModel CreateNewUser(string title, string firstname,
    string lastname, int age ...) 
{
    //I have the kernel registered everything properly
    //Getting a new user object from the kernel
    var user = _kernel.Get<UserDataModel>(); 

    user.Title = title;
    user.Firstname = firstname;
    user.Lastname = lastname;
    ...
    return user;
} 
```

它是使用内核的正确方法吗？我从其他帖子中读到，暴露和传递内核是一个坏主意。如果是这样，正确的方法是什么？

**编辑**

我的一些代码演示了 tempUser 对象的使用

```
public int UpdateSaUser(Guid msuserid, UserProfile saprofile,
    string accesstoken = "") 
{
    using (var db = new SaModelContainer()) 
    {
        var row1 = MakeNewRow(msuserid, saprofile, accesstoken);
        var row2 = db.SaUser.SingleOrDefault(
            r => r.MsUserId.Equals(msuserid));
        if (row2 == null) { //add new
            db.sauth_User.Add(row1);
        } else { //modify
            var entry = db.Entry(row2);
            entry.OriginalValues.SetValues(row2); 
            entry.CurrentValues.SetValues(row1); 
        }
        return db.SaveChanges();
    }
}

private SaUser MakeNewRow(Guid msuserid, UserProfile saprofile,
    string accesstoken = "") 
{
        var row = new SaUser {
            MsUserId = msuserid,
            Provider = (int)saprofile.Provider,
            ProfileId = saprofile.ID,
            Email = saprofile.Email,
            AccessToken = accesstoken,
            FirstName = saprofile.FirstName,
            LastName = saprofile.LastName,
            FullName = saprofile.FullName,
            UserName = saprofile.Username,
            DisplayName = saprofile.DisplayName,
            Country = saprofile.Country,
            DoB = StringParser.ParseDate(saprofile.DateOfBirth),
            Gender = (int)saprofile.GenderType,
            Language = saprofile.Language,
            ProfileURL = saprofile.ProfileURL,
            ProfilePictureURL = saprofile.ProfilePictureURL
        };

        return row;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T13:00:57.047

您应该注入您的依赖项，也称为依赖项注入。而不是注入内核。

示例（这称为构造函数注入）：

```
 private UserDataModel _userDataModel;

[Inject]
public UserRepository(UserDataModel userDataModel)
{
    _userDataModel = userDataModel;
}

//Any other method can now use _userDataModel 
```

您可能应该制作一个您的接口，`UserDataModel`以便您可以在单元测试中模拟或存根它。并使用 ninject 将该接口绑定到正确的实现，请参见示例。那么就不需要属性了。

[Ninject MVC 文档](https://github.com/ninject/ninject.web.mvc/wiki/Setting-up-an-MVC3-application)

[好的mvc例子](http://www.shahnawazk.com/2010/12/dependency-injection-in-aspnet-mvc-3.html)

UserDataModels 列表不是依赖项。IE 您有某种数据库或其他依赖项（WCF 服务、Web 服务、实体框架、nHibernate 等），用户来自哪里，这就是您的依赖项。

```
 public UserRepository(EntityFrameworkContext context)
{
    //The entity framework context is the dependency that you don't want to test.
    _context = context;
}

public List GetAllUsers()
{
   return _context.Users.ToList();
} 
```

# android - 水平自动滚动，如何让它循环？

> ID：11413494
> 
> 赞同：0
> 
> 时间：2012-07-10T12:37:35.247
> 
> 标签：android

我已经使用这个[Vertically AutoScrolling Textview](https://stackoverflow.com/questions/4921844/vertically-autoscrolling-textview)实现了一个水平滚动视图..但是没有描述如何使文本循环滚动..有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T12:55:48.990

在xml中添加这个：

```
<ScrollView 
         android:layout_width="fill_parent"
         android:layout_height="wrap_content"
         android:id="@+id/sc">

         <TextView
            android:id="@+id/mark"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:ellipsize="marquee"
            android:focusable="true"
            android:focusableInTouchMode="true"
            android:marqueeRepeatLimit="marquee_forever"
            android:scrollHorizontally="true"
            android:singleLine="true"
            android:text="Thanks Christian but I am trying to get my text to scroll downwards automatically I am able to scroll horizontally fine."
            android:textSize="50dp"
            android:layout_above="@+id/btn"
            android:layout_below="@+id/txt"  />

     </ScrollView> 
```

这在你的活动中：

```
ScrollView scrollView=(ScrollView) findViewById(R.id.sc);
        scrollView.post(new Runnable() {

            public void run() {
                scrollView.smoothScrollTo(0, scrollView.getBottom());
            }
        }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T13:15:26.853

您可以通过在滚动视图到达底部时将其滚动回顶部来实现。这将使您的 ScrollView 无限循环。

像这样的东西-

```
public void scrollDown(final ScrollView v){
new CountDownTimer(2000, 20) { 

    public void onTick(long millisUntilFinished) { 
        if((2000 - millisUntilFinished)==v.getBottom())
              millisUntilFinished=2000;
        v.scrollTo((int) (0,2000 - millisUntilFinished)); 
    } 

    public void onFinish() { 

    } 
 }.start(); } 
```

虽然我自己没有尝试过，但逻辑应该有效。

# php - Zend ldap 函数 getAttribute() 字符串处理

> ID：11413496
> 
> 赞同：0
> 
> 时间：2012-07-10T12:37:42.063
> 
> 标签：php, zend-framework

嗨，我正在使用 zend ldap 函数 getAttribute 来获取属性值。Openldap 中的特定值是：“telephoneNumber”、“+0123456789”

当我从我的 Zend 应用程序中回显这个值时，它似乎去掉了 + 和 0，我不确定它是如何做到的或如何停止它。

代码：

```
echo "Element: " . $this->_getNode()->getAttribute("telephoneNumber", 0) . "\n"; 
```

结果：

```
Element: 123456789 
```

_getNode() 函数只为特定用户返回一个节点

关于如何阻止这种情况的任何想法？

更多信息：

```
var_dump($this->_getNode()->getAttribute("telephoneNumber", 0));
float(123456789) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T13:30:04.170

通过升级到最新的 Zend 库来修复，不确定这个问题对社区是否有用？

# c++ - C++、ROOT 框架：定期调用的成员方法

> ID：11413505
> 
> 赞同：0
> 
> 时间：2012-07-10T12:38:18.897
> 
> 标签：c++, methods, root-framework

我的应用程序中有一个显示信息的类。
我必须通过 SOAP 从服务器获取这些信息。
这是我的课：

```
class InfoControl : public TGCompositeFrame {
private:
    //char*, int....
    bool bWorking;
public:
    InfoControl(const TGWindow *p);
    virtual ~InfoControl();
    void SetEventRate(char* evnum);
    void SetBufferRate(char* rate);
    void SetSuccess(char *s);
    void RequestInfo();
    ClassDef(InfoControl,1)  //useless : ROOT specific stuff
}; 
```

`RequestInfo()`只要`bWorking`是真的，我希望定期调用方法。我对`pthread`解决方案感到满意，但不知道如何实施。也许更微不足道的事情是可能的？

提前感谢您的帮助，
eo。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T12:42:38.697

嗯... Mb

```
while (bWorking)
{
    RequestInfo();
    /* sleep os sleep function, or boost, or something else. 
    time - period to sleep.*/
    sleep(time);
} 
```

或者你想要异步调用，有一些计时器？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T13:07:20.567

有点不清楚`RequestInfo()`应该对外部产生什么样的影响，因为它是 a `void`，但如果它以某种方式与外部对话并且不专门做一些内部工作（然后在额外的线程中运行它就可以了）你应该也许重新考虑你的设计。

`bWorking` already is private, so an `InfoControl` knows when it changes. You could then use something like ROOT's Qt slots implementation (e.g. with a `TQObject`) to trigger a needed action only when `bWorking` changes (e.g. hook that into some `SetWorking()`).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T09:04:22.200

Ok, found out. If someone has the same issue :

```
TTimer *timer = new TTimer();  
timer->Connect("Timeout()", "InfoControl", this, "RequestInfo()");  
timer->Start(1000, kFALSE); 
```

# c# - 数据未显示在动态下拉列表 asp.net 和 C# 中（也没有错误）

> ID：11413506
> 
> 赞同：0
> 
> 时间：2012-07-10T12:38:23.130
> 
> 标签：c#, asp.net

// asp代码

```
 <asp:DropDownList ID="DropDownList1" runat="server" DataTextField="fullname" DataValueField="username" AutoPostBack="True" Width="125px" Height="22px"></asp:DropDownList> 
```

// 后面的代码

```
 SqlConnection myConnection = new SqlConnection("Server=xyz;Database=db;Uid=db;Pwd=12345");
 myConnection.Open();         
 SqlDataReader myReaderddl = null;
 SqlCommand myCommandddl = new SqlCommand("SELECT [username], [fullname] FROM [qa_users]", myConnection);
 myReaderddl = myCommandddl.ExecuteReader();
 myReaderddl.Read();
 ddlrep.DataSource = myReaderddl;                    
 ddlrep.DataValueField = "[username]";
 ddlrep.DataTextField = "[fullname]";
 ddlrep.DataBind();
 myReaderddl.Close(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T13:20:43.107

我还没有测试过这段代码，但它应该可以工作。

```
using (var myConnection = new SqlConnection("Server=xyz;Database=db;Uid=db;Pwd=12345"))
{
    using (var myCommandddl = new SqlCommand("SELECT [username], [fullname] FROM [qa_users]", myConnection))
    {
        var table = new DataTable();

        using(var myAdapter = new SqlDataAdapter(myCommandddl))
            myAdapter.Fill(table);

        ddlrep.DataSource = table;
        ddlrep.DataValueField = "username";
        ddlrep.DataTextField = "fullname";
        ddlrep.DataBind();
    }
} 
```

我做了一些更改，您应该注意：

*   使用 USING 语句。这提供了许多好处，例如在您的 IDisposable 对象上自动调用 Dispose()，而不管是否引发了异常。在我看来，这是一个很好的视觉效果，可以显示对象被放置的时间和地点。 [http://msdn.microsoft.com/en-us/library/yh598w02.aspx](http://msdn.microsoft.com/en-us/library/yh598w02.aspx)
*   不直接使用 SqlDataRader，而是使用 SqlDataAdapter 填充表：http: [//msdn.microsoft.com/en-us/library/879f39d8](http://msdn.microsoft.com/en-us/library/879f39d8)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T12:46:29.727

更新您的代码隐藏，如下所示：

```
if (!IsPostBack)
{

   SqlConnection myConnection = new SqlConnection("Server=xyz;Database=db;Uid=db;Pwd=12345");
    try 
    {
       myConnection.Open();         
       SqlDataReader myReaderddl = null;
       SqlCommand myCommandddl = new SqlCommand("SELECT [username], [fullname] FROM [qa_users]", myConnection);
       myReaderddl = myCommandddl.ExecuteReader();
       if (myReaderddl.HasRows)
       {
          ddlrep.DataSource = myReaderddl;                    
          ddlrep.DataValueField = "username";
          ddlrep.DataTextField = "fullname";
          ddlrep.DataBind();
       }
    }
    finally 
    {
       if (myConnection != null)
       {
          myConnection.Close();
       }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T12:56:51.670

你的 DropDownlist 应该是这样的：

```
<asp:DropDownList ID="ddlrep" runat="server" Width="200px" ></asp:DropDownList> 
```

并在代码后面，页面加载或任何方法中

```
SqlConnection myConnection = new SqlConnection("Server=xyz;Database=db;Uid=db;Pwd=12345");
 myConnection.Open();         
 SqlCommand myCommandddl = new SqlCommand("SELECT username, fullname FROM qa_users", myConnection);
 SqlDataReader myReaderddl = myCommandddl.ExecuteReader();
 if(myReaderddl.HasRows)
 {
 ddlrep.DataSource = myReaderddl;                    
 ddlrep.DataValueField = "username";
 ddlrep.DataTextField = "fullname";
 ddlrep.DataBind();
 }
 myReaderddl.Close(); 
```

在页面加载中将代码放在此块下

```
if (!IsPostBack)
        {
        } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T13:24:10.733

这是我的一些旧代码，所以它并不漂亮（这些天我使用 EF），但尝试这样的事情：

```
SqlCommand cmd = new SqlCommand("SELECT [username], [fullname] FROM [qa_users]", myConnection);

cmd.Connection.Open();
SqlDataReader data_table = null;
data_table = cmd.ExecuteReader();
ddlrep.DataSource = data_table;
ddlrep.DataValueField = "username";
ddlrep.DataTextField = "fullname";
ddlrep.DataBind();
data_table.Close();
cmd.Connection.Close();
cmd.Connection.Dispose(); 
```

我从一个工作项目中提取了这个，所以它*应该可以*工作。

# visual-studio-2008 - Visual Studio 2008 - 找不到对相应 Crystal Report 版本的引用

> ID：11413507
> 
> 赞同：0
> 
> 时间：2012-07-10T12:38:26.043
> 
> 标签：visual-studio-2008, crystal-reports, gac, .net-assembly

我的开发笔记本电脑最近换成了新型号。我在这台计算机上有 Visual Studio 2005、2008 和 2010。我们的 Web 应用程序之一使用 Crystal Reports。**web.config**文件引用版本 10.2.3600.0 ：

```
<add assembly="CrystalDecisions.Web, Version=10.2.3600.0, Culture=neutral, PublicKeyToken=692FBEA5521E1304"/>
<add assembly="CrystalDecisions.Shared, Version=10.2.3600.0, Culture=neutral, PublicKeyToken=692FBEA5521E1304"/>
<add assembly="CrystalDecisions.ReportSource, Version=10.2.3600.0, Culture=neutral, PublicKeyToken=692FBEA5521E1304"/>
<add assembly="CrystalDecisions.Enterprise.Framework, Version=10.2.3600.0, Culture=neutral, PublicKeyToken=692FBEA5521E1304"/>
<add assembly="CrystalDecisions.Enterprise.Desktop.Report, Version=10.2.3600.0, Culture=neutral, PublicKeyToken=692FBEA5521E1304"/>
<add assembly="CrystalDecisions.CrystalReports.Engine, Version=10.2.3600.0, Culture=neutral, PublicKeyToken=692FBEA5521E1304"/>
<add assembly="CrystalDecisions.Enterprise.InfoStore, Version=10.2.3600.0, Culture=neutral, PublicKeyToken=692FBEA5521E1304"/>
<add assembly="CrystalDecisions.ReportAppServer.ClientDoc, Version=10.2.3600.0, Culture=neutral, PublicKeyToken=692fbea5521e1304"/> 
```

项目解决方案仍然是 Visual Studio 2008 解决方案，但我们最终会升级到 VS 2010。我遇到的问题是，当我在这台新计算机上打开解决方案时，它找不到 Crystal Report 程序集。当我转到**References->Add New Reference**时，**.NET**选项卡显示 CrystalDecisions 组件名称，但版本号为 10.5.3700.0。

当我查看 GAC (C:\Windows\assembly) 时，我看到版本 10.2.3600.0 和 10.5.3700.0 都已安装且可用。

***如何使这些程序集 (v 10.2.3600.0) 可供我在 Visual Studio 2008 项目中引用？***

不幸的是，我还不能将项目升级到 VS 2010，也不能升级服务器以使用新的程序集版本。

# php - 使用 preg_replace 保存换行符

> ID：11413529
> 
> 赞同：6
> 
> 时间：2012-07-10T12:11:45.250
> 
> 标签：php

我有此代码用于将文本区域输入中的换行符保存到数据库：

```
$input = preg_replace("/(\n)+/m", '\n', $input); 
```

在检查数据库中的输入时，实际上保存了换行符。
但问题是当我想回显它时，换行符不会出现在输出中，我如何保留输入中的换行符并将它们回显出来。我不想使用`<pre></pre>`.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T12:31:05.543

您正在用`$input`文字两个字符序列`\n`（反斜杠 + n）替换实际的换行符序列 - 而不是换行符。从数据库读取时，这些需要转换回换行符。尽管我怀疑您打算将这些实际的换行符保留在数据库中，并且应该使用双引号字符串来代替...

```
$input = preg_replace('/(\n)+/m', "\n", $input); 
```

请注意，我已将第一个字符串分隔符替换为单引号，将第二个字符串替换为双引号。`\n`是正则表达式中用于指示换行符（ASCII 10）的特殊序列，但它也是 PHP 中的字符转义以指示相同 - 两者有时会发生冲突。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-10T12:42:11.567

我认为 PHP 有解决方案：

> [`nl2br`](http://php.net/manual/en/function.nl2br.php)— 在字符串中的所有换行符之前插入 HTML 换行符

**编辑：**您可能需要更换 CR / LF 以使其正常工作。

```
// Convert line endings to Unix style (NL)
$input = str_replace(array("\r\n", "\r"), "\n", $input);

// Remove multiple lines
$input = preg_replace("/(\n)+/m", '\n', $input);

// Print formatted text
echo nl2br($input); 
```

# ruby-on-rails-3 - 依赖于 main_app 的 Rails 隔离引擎

> ID：11413532
> 
> 赞同：1
> 
> 时间：2012-07-10T12:39:46.933
> 
> 标签：ruby-on-rails-3, rails-engines

我有一个应用程序，它由一个作为基础的主要 rails 3.2 应用程序和一个管理部分组成。我还有一个独立的引擎来处理网站的非登录部分。

自然，引擎对主应用程序中的类有很多依赖。这使得很难单独测试它。我在主应用程序和引擎之间的某处看到了一个“桥梁”的例子，但我不记得在哪里。

我想我真正要问的是你如何处理这些依赖关系，你能最小化它们，你如何测试引擎？据我了解，您从虚拟应用程序运行测试，但由于我有很多依赖项，但效果并不好。

有没有关于最佳实践的好资源？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T03:19:51.700

> 因此，引擎自然而然地对主应用程序中的类有很多依赖。

**这不是 Rails 引擎背后的想法**。引擎应该能够在大多数情况下独立运行。如果您正在构建的代码项目依赖于 Main Rails 应用程序，那么您正在构建一个扩展。如果这是真的，请查看 Spree 项目。它是一个主要的 Rails 应用程序，具有多个依赖于 Spree 应用程序的扩展。

[https://github.com/spree](https://github.com/spree)

如果您正在寻找真正的 Rails 引擎的示例，请查看这些， [https](https://github.com/westonplatter/questionnaire_engine)
[://github.com/westonplatter/questionnaire_engine https://github.com/radar/forem/](https://github.com/radar/forem/)
[https://github.com/plataformatec/devise/](https://github.com/plataformatec/devise/)

完全披露，我帮助编写了 QuestionnaireEngine。

# jakarta-ee - 在两个不同的路径中部署相同的战争（Tomcat）

> ID：11413535
> 
> 赞同：1
> 
> 时间：2012-07-10T12:39:56.297
> 
> 标签：jakarta-ee, tomcat6

我一直在寻找如何做到这一点，但我找到的解决方案并没有解决我的问题......

我有一个 Tomcat 服务器并在它的**/webapps**文件夹中。我复制**myApp.war**，重新启动 tomcat 并访问应用程序：

```
domain.com/myApp 
```

我想要的是在两个不同的根路径中部署相同的*.war*，其中第二个是：

```
domain.com/beta/myApp 
```

重要的是第二个应用的根 URL 是**/beta/**和第一个**/**

我尝试创建 conf/Catalina/localhost/ **beta.xml**：

```
<Context path="/beta” docBase=”/opt/apache-tomcat-6.0.24/beta"> 
```

然后手动将*/opt/apache-tomcat-6.0.24/webapps/myApp*的内容（首次调用时由 tomcat 自动提取）复制到*/opt/apache-tomcat-6.0.24/beta*

如果这是另一个问题的重复，我很抱歉，但我根本无法让它工作..

# entity-framework - 为什么身份生成器会破坏 nHibernate 中的工作单元？英孚呢？

> ID：11413537
> 
> 赞同：2
> 
> 时间：2012-07-10T12:40:23.263
> 
> 标签：entity-framework, nhibernate

我理解并接受身份生成器会破坏工作单元，因为它需要在事务实际提交时先插入，如[http://fabiomaulo.blogspot.com/2008/12/identity-never-ending-story 中所述。 .html](http://fabiomaulo.blogspot.com/2008/12/identity-never-ending-story.html) _ 我知道替代方案以及为什么它们更好（与手头的问题有关，一般来说）。

我的问题是为什么实现存在，以及这些问题是否会影响 EF（纯粹的好奇心）。我见过的唯一真正的理由是：[“NHibernate 需要身份，因为会话中的每个实体（它们被称为“持久实体”）都需要被识别。身份通常也用于确定数据库中是否已经存在记录（未保存的值）。”](https://stackoverflow.com/a/5234308/981205)

但是，为什么它必须立即具有价值？为什么它不能推迟 INSERT 直到提交发生，提交，检索值，并根据返回的身份更新实体，然后插入/更新/不管它们？

不太重要的问题：EF 是否遇到同样的问题？我知道 ISession 是一个合适的 UoW 实现；EF 没有实现 UoW 模式，还是有不同的方法来处理这个问题，如果有，它是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T13:25:41.003

我不会确切地告诉您为什么 NHibernate 中没有延迟插入，但我猜 NHibernate 只是在您将其放入会话时立即需要真实的实体身份。

EF 不使用这种方法，但这并不意味着 EF 方法更好。首先，EF 没有内置对身份生成器的支持。您可以[实现自己的](https://stackoverflow.com/questions/5275306/does-entity-framework-4-code-first-have-support-for-identity-generators-like-nhi/5277642#5277642)，但由于 NH 试图避免的问题，它可能有点挑战性。

ORM 工具实现身份映射，它们要求唯一标识每个实体。NH 可能立即使用真实身份，而 EF 可以推迟身份定义并使用一些临时密钥。当在数据库中定义真实身份时使用此临时键 - 这意味着`IDENTITY`MS SQL Server 中的列。EF只有在将记录插入数据库并查询后才知道真实身份`SCOPE_IDENTIY()`。当 EF 收到真实密钥时，它会更新实体及其所有关系 (FK) 以反映真实身份。

这也是该方法的最大缺点 - EF 必须在单独的往返中将每条记录插入到数据库以获取其主键值（无论如何，EF 不支持命令批处理）。在这里，您会发现与 NH 最大的区别，它能够使用生成器预生成身份并将这些 DML 命令批处理到单个往返数据库。

当您开始使用 EF 4.0 中引入的 FK 属性时，在 EF 中使用临时键会产生另一个副作用。一旦使用了 FK 属性，您必须将 PK 显式设置为某个唯一的临时值，否则插入两条具有关系的记录将失败并出现异常（您将拥有两个具有默认键值的实体，并且 FK 属性将无法定义哪个是正确的主体）。

EF 旨在使用数据库生成的密钥，而 NH 更喜欢应用程序生成的密钥。

# jquery - Highcharts 图表不显示在 jquery 对话框中

> ID：11413543
> 
> 赞同：3
> 
> 时间：2012-07-10T12:40:48.260
> 
> 标签：jquery, dialog, highcharts

我正在尝试在 jQuery 对话框中显示图表。

我确实这样做了，但只是第一次。当我重新加载页面并显示对话框时，我只得到一个空白空间。这是我的代码：

```
function () {
    var dialog = $('#div_id').dialog({
        'autoOpen': false,
        'closeOnEscape':true, 
        'buttons':[{ 
        'text':'OK',
        'click': function() { $(this).dialog('close'); }
        }],
        'modal':true
    });
    $("#show_dialog_button").click(function () {
            dialog.dialog('open');
            var chart = Highcharts.Chart({/*some configs here*/});
            var jqChart = $("#"+chart.options.chart.renderTo);
        HighchartsHelper.autoResizeChart(jqChart,chart);
    }
} 
```

我希望有人能帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T09:40:42.933

好的，我找到了问题所在。创建对话框时，它会复制给定元素并将其放入 body 标记中。因此，具有相同 id 的元素不止一个。然后在第二次调用时，对话框不知道要获取和显示哪个元素，所以它只是打开。解决方法是从 DOM 中删除除原始元素之外的所有元素。我的代码如下所示：

```
$("[id='dialog_element']").not("#dialog_parent>#dialog_element").remove(); 
```

我删除了那些与 IE7 兼容的寄生虫元素（也许所有 IE7+）

# ruby - 如何从 Rails 3 中的连接表中访问数据

> ID：11413553
> 
> 赞同：0
> 
> 时间：2012-07-10T12:41:39.117
> 
> 标签：ruby, ruby-on-rails-3, has-and-belongs-to-many

我在用户和任务之间有一个 has_and_belongs_to_many 关联。

我希望用户加入任务并在用户控制器中创建一个操作，如下所示：

```
 def joinTask
    @user = current_user
    @task = Task.find(params[:id])
    @users_tasks =  @task
    @task.save

    respond_to do |format|
      if @task.update_attributes(params[:task])
        format.html { redirect_to [@task.column.board.project, @task.column.board], notice: 'You joined the task successfully' }
        format.json { head :no_content }
      else
        format.html { render action: "edit" }
        format.json { render json: @task.errors, status: :unprocessable_entity }
      end
    end
  end 
```

为了查看这是否正常工作，我想列出属于特定任务的所有用户。为此，我向用户控制器添加了一个操作，我试图在其中获取属于某个任务的所有用户：

```
def showTeam
    @users = Task.find(params[:id]).users

    respond_to do |format|
      format.html # showTeam.html.erb
      format.json { render json: @users}
    end
end 
```

但我总是得到错误

```
undefined method `name' for nil:NilClass 
```

当它尝试呈现 html 页面以获取用户名时...

我在错误的轨道上吗？

楷模：

```
class Task < ActiveRecord::Base
  attr_accessible :description, :title, :weight, :story_id, :column_id, :board_id

  belongs_to :story, :foreign_key => "story_id"
  belongs_to :column, :foreign_key => "column_id"
  has_and_belongs_to_many :users

end

class User < ActiveRecord::Base

 attr_accessible :name, :login, :email, :password, :password_confirmation, :status
 has_and_belongs_to_many :projects
 has_and_belongs_to_many :tasks
end 
```

我称之为行动：

```
<%= link_to 'Join task', joinTask_path(task), :class => 'btn' %>
<%= link_to 'Show Team', showTeam_path(task), :class => 'btn' %> 
```

根定义如下：

```
match "joinTask_user/:id" => "users#joinTask", :as => :joinTask
match "showTeam_task/:id" => "tasks#showTeam", :as => :showTeam 
```

最后呈现 showTeam.html.erb 并且我想访问用户名：

```
<p>
  <b>Name:</b>
  <%= @user.name %>
</p> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T14:47:14.257

似乎您从未在用户和任务之间建立关系。

```
@user = current_user
@task = Task.find(params[:id])
@users_tasks =  @task
@task.save 
```

我想你的意思是

```
@task = Task.find(params[:id])
@task.users << current_user
@task.save 
```

你不应该使用`update_attributes`. ]

此外，在您的显示视图中，您正在加载`@users`，但您正在调用`@user.name`.

如果你想显示所有的用户名，它应该更像是

```
<% @users.each do |user| %>
  <p>
    <b>Name:</b>
    <%= user.name %>
  </p>
<% end %> 
```

`rails console`您可以通过找到您的任务并调用它来验证您是否有关系`task.users`。

无论如何，如果您刚刚开始这个项目，我建议您阅读任务的[嵌套资源](http://guides.rubyonrails.org/routing.html#nested-resources)，因为这是它们的典型用例。

# vb6 - 在 VB6 中设置 Adodc ConnectionString

> ID：11413554
> 
> 赞同：1
> 
> 时间：2012-07-10T12:41:40.817
> 
> 标签：vb6

我正在尝试设置 ADODC 控件的连接字符串。但我无法创建成功的测试连接。我收到一个错误。 **“由于初始化提供程序时出错，测试连接失败。无法启动您的应用程序。工作组文件丢失或由其他用户独占打开”。** 我正在使用 Access 2007，并且我的数据库有密码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T12:52:58.303

您可能没有足够的文件系统权限来动态打开 *.mdw 文件和/或创建 *.ldb 文件。最好是授予对 *.mdb 和 *.mdw 文件的 r/w 访问权限以及对包含文件夹的文件创建/更新/删除权限。

请注意，您要么必须使用某些 windows 文件夹中的 system.mdw 文件，要么使用 *.mdb 文件所在文件夹中的自定义 *.mdw 文件。推荐最新的方法；确保您需要相应地设置连接属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T08:49:00.807

听起来您尝试使用的 Access 数据库已经在其他地方打开。验证 Access 数据库是否已关闭，然后再尝试在服务器资源管理器中打开它。此外，在尝试在应用程序中使用它之前，请确保它已在服务器资源管理器中关闭。

尝试使用以下语法连接 Access 2007：

```
conn.ConnectionString = "Provider=Microsoft.Jet.OLEDB.4.0;Data Source=<your db path>;Jet OLEDB:Database Password=<password>;" 
```

有关详细信息，请参阅[Access 2007 的连接字符串](http://www.connectionstrings.com/access-2007)

# javascript - 输入字段未在第一次单击/聚焦时注册 javascript 事件

> ID：11413558
> 
> 赞同：0
> 
> 时间：2012-07-10T12:42:04.393
> 
> 标签：javascript, jquery

我正在尝试在输入文本框上触发 datepicker() 对象。因此，所有带有 .dateField 类的输入都会在点击/聚焦时触发 datepicker()。但它不起作用。我第一次点击时它不起作用。如果我单击框外，然后再次单击框内，它可以工作。

```
$(".dateField").bind('click focus change', function(){
            $(this).datepicker();
        }) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T12:46:09.617

假设您正在使用[来自 jQuery UI 的日期选择器](http://jqueryui.com/demos/datepicker/)，您将需要`datepicker`在与元素进行第一次交互之前调用该方法，例如在 DOM 就绪时：

```
$(function () {
    $(".dateField").datepicker();
}); 
```

您当前执行的方式将在第一次交互时初始化日期选择器（实际上，它将在*每次*交互时初始化它），但它不会在第一次时显示它。

这是一个包含两个版本[的工作示例。](http://jsfiddle.net/jamesallardice/jUCqc/)取消注释您的代码版本（并注释掉我的版本）以查看差异。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T12:46:11.217

该`datepicker`函数为您的输入配备所有需要的回调和代码。

这并不意味着被称为对“点击”或“聚焦”的反应。

它应该只被调用一次，在初始化时：

```
$(function(){
    $(".dateField").datepicker();
}); 
```

# ant - 从 Gradle 调用 Ant 任务时如何拦截或提升日志消息

> ID：11413559
> 
> 赞同：6
> 
> 时间：2012-07-10T12:42:04.483
> 
> 标签：ant, gradle

我从 gradle 脚本调用 ant.signjar。我怎样才能捕获它的输出？我既没有轻松管理将输出从 INFO 提升到另一个级别，也没有拦截或包装输出到错误警告到 WARN 级别。目前，signjar 回显证书将很快过期，但这并没有显示在 WARN 级别，这不是很好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T23:02:12.103

我假设 Ant 任务正在使用 Ant 的日志框架，而不仅仅是打印到标准输出。在这种情况下，您是否尝试过以下方法？

```
task taskThatCallsAntTask {
    logging.level = LogLevel.INFO
} 
```

以这种方式配置时，无论调用 Gradle 时设置了哪个日志级别，任务执行时日志级别都会更改为 INFO（并在之后恢复）。请注意，您不能提升 Ant 日志事件的日志级别；这取决于它在哪个级别记录的 Ant 任务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-12T09:14:07.533

这是一个通过在调用期间注册自定义 BuildListener 来捕获 Ant 任务输出的方法。

```
def captureAntOutput(ant, Closure command) {
    def buffer = new ByteArrayOutputStream()
    def captureStream = new PrintStream(buffer, true, "UTF-8")
    def listener = new org.apache.tools.ant.DefaultLogger(
            errorPrintStream: captureStream,
            outputPrintStream: captureStream,
            messageOutputLevel: org.apache.tools.ant.Project.MSG_INFO
    )

    ant.project.addBuildListener(listener)
    project.configure(ant, command)
    ant.project.removeBuildListener(listener)

    return buffer.toString("UTF-8");
} 
```

示例用法：

```
String result = captureAntOutput(ant) {
    echo(message: "hello")
}
assert result.contains("hello") 
```

# eclipse - 同步 Eclipse 工作区，不同的操作系统，如何？

> ID：11413562
> 
> 赞同：1
> 
> 时间：2012-07-10T12:42:16.280
> 
> 标签：eclipse, sync, workspace

我想在 XP 和 Seven 之间同步 Eclipse 工作区，因为我经常在外出时在上网本上写，在家里写在笔记本上。我以前用过 Dropbox，因为我的两台电脑都是七。现在，在上网本上使用 XP，我发现路径与外部库和其他参考不兼容。分享我的项目的最佳方式是什么？要求：

1.  我的代码不应该公开（没有 git、svn 等）
2.  它不应该是支付服务
3.  没有 USB
4.  我想在同一个文件夹中维护 src + 元数据，所以当我创建一个新项目时，我不必每次都进行任何更改

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T15:17:24.453

与 Team Provider、CVS、SVN、Git 等共享您的项目。如果您必须使用外部库，请将它们也放入项目中（您真的不应该依赖本地机器上安装的任何东西——它太不可预测并且正如您发现的那样不便携）。使用执行环境设置您的 JRE。如果必须，请使用类路径变量。不要试图在机器上保持整个工作空间相同——它完全不受支持，如果/当你开始看到奇怪和无法解释的问题时，你只会责怪自己。如果您完全不喜欢使用 DropBox，就像使用适当的团队提供者一样，请仅在项目级别使用。不要将整个工作区存储在其中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T13:53:27.660

试试[比特桶](https://bitbucket.org/)。它允许您为您的个人项目创建免费的 Git 或 Mercurial 存储库。它还具有其他一些方便的功能，例如 Wiki 或问题跟踪。强烈推荐。

# python - 从中间件获取 URL

> ID：11413565
> 
> 赞同：0
> 
> 时间：2012-07-10T12:42:31.787
> 
> 标签：python, google-app-engine

我正在使用 python 和 Google App Engine。我在我的代码中添加了一个中间件类，它工作正常。但是现在我需要知道在中间件类中调用了哪个 URL。我不知道如何从那里获取 URL。

这就是我所拥有的：

```
class OtherClasses(BaseHandler):
    def get(self):
        # some code...
    def post(self):
        # some code...

class Middleware(object):   
    def __init__(self, app):
        self.app = app
    def __call__(self, environ, start_response):
        #logging.debug("Setting namespace..." + namespace)

        print(self.request.url) #<--- Doesn't work in here...?

app = webapp2.WSGIApplication([ROUTES], debug=True, config=webapp2_config)
app = Middleware(app) 
```

显然**self.request.url**在中间件类中不起作用。任何人都知道如何获取我当前所在的 URL（或路由）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T18:49:00.763

```
import os

path = os.environ['PATH_INFO'] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T01:33:40.233

`self.request`不起作用，因为`self`在这种情况下指的是您的中间件对象，而不是请求处理程序。您的中间件不构造请求对象，因此它不可用。

该`environ`变量是[WSGI environment](http://www.python.org/dev/peps/pep-0333/)，它是 CGI 环境的扩展，因此，部分 URL 存储在多个变量中，包括`PATH_INFO`和`QUERY_STRING`。

获取熟悉对象的最简单方法可能是构建自己的 webob 请求对象，如下所示：

```
request = webob.Request(environ) 
```

现在您可以`request.url`按预期访问 etc；只需注意访问中间件中的 POST 数据，因为这将读取您的处理程序期望读取的相同输入流；如果你想这样做，你需要跳过额外的箍。

# wpf - 我收到这个奇怪的错误“System.Windows.Data.ListCollectionView”未标记为可序列化

> ID：11413567
> 
> 赞同：0
> 
> 时间：2012-07-10T12:42:42.817
> 
> 标签：wpf, cloning, listcollectionview

我有一个克隆类的方法。此类包含子类和属性等。它是由于 ICollectionView-Property 引起的吗？如何检测问题出在哪里？我的意思是哪个属性或类没有标记为序列化或什么？非常混乱...

错误：在程序集“PresentationFramework，版本=4.0.0.0，Culture=neutral，PublicKeyToken=31bf3856ad364e35”中键入“System.Windows.Data.ListCollectionView”未标记为可序列化。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T12:44:56.857

您正在尝试序列化未标记为 .NET Framework 的类型`SerializableAttribute`。

您将无法更改它或使其与二进制序列化程序一起使用 - 您需要将该数据存储在您可以序列化的另一种类型中，用它标记`ListCollectionView`，`NonSerializedAttribute`然后在反序列化时您可以手动重新填充它（使用[`IDeserializationCallback.OnDeserialization`](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.ideserializationcallback.ondeserialization%28v=vs.100%29.aspx)）。

# c# - 获取批准状态

> ID：11413571
> 
> 赞同：0
> 
> 时间：2012-07-10T12:43:03.980
> 
> 标签：c#, sharepoint, sharepoint-2010, workflow, sharepoint-workflow

我正在visualstudio 2010 中为sharepoint 2010 创建一个审批工作流。工作流在开始时创建一个任务，然后等待批准该任务。但是如何检查任务是否被批准？

**也许我更详细地描述了我的 szebario：**

*   我有一个添加后必须审查的项目列表。
*   如果他们被批准或拒绝，这是一个绝对的决定，永远不应该改变
*   如果项目获得批准，一些功能应该被解雇
*   如果被拒绝，应该发送邮件！

**我的想法：**

*想法 - 工作流程*：

我的第一个想法是创建一个在添加 ListItemd 后触发的工作流。WF 应该创建一个可以审查的任务。如果是肯定的，它应该触发一些功能并自行删除。

*Idea-工作流程设计：* ![在此处输入图像描述](../Images/dda4b0bd2b7dd308c69781258b7e4b2f.png)

*Idea-工作流程代码：*

```
 public Guid workflowId = default(System.Guid);
            public SPWorkflowActivationProperties workflowProperties = new SPWorkflowActivationProperties();
            // these properties are for the workflow task that will be created.
            public SPWorkflowTaskProperties CreateTaskApproval_TaskProperties = new SPWorkflowTaskProperties();
            public SPWorkflowTaskProperties CreateTaskApproval_AffterTaskProperties = new SPWorkflowTaskProperties();
            public SPWorkflowTaskProperties CreateTaskApproval_BeforeTaskProperties = new SPWorkflowTaskProperties();
            public String CreateTaskApproval_ContentTypeId = default(System.String);
            public Int32 CreateTaskApproval_ListItemId = default(System.Int32);
            public Guid CreateTaskApproval_TaskId = default(System.Guid);

       private void createTask1_MethodInvoking(object sender, EventArgs e)
            {
                createTask1.TaskId = new Guid();
                // Now create the approval task.
                // Set up some of the properties.
                CreateTaskApproval_TaskId = Guid.NewGuid();
                //Setting the task properties
                CreateTaskApproval_TaskProperties.Title = "TestTitle"
                CreateTaskApproval_TaskProperties.Description = "Description";
                CreateTaskApproval_TaskProperties.AssignedTo = @"testemail\testuser";
                CreateTaskApproval_TaskProperties.SendEmailNotification = false;
                CreateTaskApproval_TaskProperties.TaskType = 1;
                LogComment("Request Task Created.");
            }
         private void onTaskChanged1_Invoked(object sender, ExternalDataEventArgs e)
            {
                try
                {
//!!!! The Problem is here at Status
                    // Check to make sure the field is there on the item.
                    if (CreateTaskApproval_TaskProperties.ExtendedProperties["Status"] != null)
                    {
                        // Evaluate the value of the field.
                        if (CreateTaskApproval_TaskProperties.ExtendedProperties["Status"].ToString() == "Approved" || CreateTaskApproval_TaskProperties.ExtendedProperties["Status"].ToString() == "Declined")
                        {

                            TaskApproval_ApproveComplete = true;

                        }
                        else
                        {
                            TaskApproval_ApproveComplete = false;
                        }
                    }
                    else
                    {
                        // This should never happen because there is a default, but always good just in case.
                        TaskApproval_ApproveComplete = false;
                    }
                }
                catch (Exception ex)
                {
                    TaskApproval_ApproveComplete = false;

                    LogComment(ex.ToString());
                }
            }
            private void completeTask1_MethodInvoking(object sender, EventArgs e)
            {
                workflowProperties.Item.ModerationInformation.Status = SPModerationStatusType.Approved;
    //Fire some code

            } 
```

想法 - 工作流程 - 问题：我根本无法获得任务审核状态。（“批准”等）

```
CreateTaskApproval_TaskProperties.ExtendedProperties["Status"] 
```

有没有人知道怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T18:25:17.727

您可以在更改后获取任务状态 - 从任务的 AfterProperties（在设计器中创建）。然后，您必须使用 onTaskChanged1 的处理程序“Invoked”来访问您的 AfterProperties 对象并获取 ExtendedProperties["isApproved"] 以查看任务批准。

示例方法：

```
 private void Invoke_Task1_TaskChanged(object sender, ExternalDataEventArgs e)
    {
        Task1_IsCompleted = bool.Parse(task1_AfterProperties.ExtendedProperties["isFinished"].ToString());
        Task1_IsApproved = bool.Parse(task1_AfterProperties.ExtendedProperties["isApproved"].ToString());

        if (Task1_IsCompleted)
        {
            ManagerReason = task1_AfterProperties.ExtendedProperties["ManagerReason"].ToString();
        }
    } 
```

希望能帮助到你。

# objective-c - 以编程方式执行更新时，Core Data 不保存更新。

> ID：11413574
> 
> 赞同：0
> 
> 时间：2012-07-10T12:43:22.490
> 
> 标签：objective-c, ios, core-data, restkit

我正在使用 CoreData，我想更新我的一个模型中的一个属性，但我无法使用点表示法让它工作。我的更新操作如下所示：

```
- (void)addNewsPostToFavourites:(UIButton *)sender
{
    // Returns the right id.
    NSLog(@"Sender tag: %d", sender.tag);

    NSNumber *newsPostId = [NSNumber numberWithInt:sender.tag];
    NewsPost *currentNewsPost = [NewsPost findFirstByAttribute:@"newsPostId" withValue:newsPostId]; 
    // Doesn't seem to do anything.
    currentNewsPost.favourite = @"true";  
} 
```

我也尝试过`[currentNewsPost setValue:@"true" forKey:@"currentNewsPost.favourite"];`，但这给了我相同的结果，没有任何反应。

因此，我想知道我做错了什么。

还应该提到我在我的项目中也使用了 RestKit。

任何提示将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T12:49:55.687

您必须在更新后保存当前上下文：

```
[self.context save:nil] // You can put an NSError; 
```

# html - Selenium - 确定透明 HTML 对象的背景颜色

> ID：11413575
> 
> 赞同：2
> 
> 时间：2012-07-10T12:43:23.590
> 
> 标签：html, selenium, webdriver, background-color

我想计算具有特定背景颜色的字符数。要意识到我使用此解决方案遍历所有 HTML 节点：[Counting inner text letters of HTML element](https://stackoverflow.com/questions/11314986/counting-inner-text-letters-of-html-element)

网页：

```
 <span style="background-color: #ffff00;">
    <span id="child">I inherit the background color but Selenium gives me back transparent</span>
  </span> 
```

硒示例：

```
FirefoxDriver firefoxDriver = new FirefoxDriver();
// firefoxDriver.get(...);

WebElement element = firefoxDriver.findElement(By.id("child"));
final String cssValue = element.getCssValue("background-color");

System.out.println("TextColor of the Child Element: " + cssValue); 
```

现在的问题是，System.out 将“透明”打印为 css 值，而不是背景颜色的 #ffff00。

在这种情况下，我现在需要一些代码来查找父级的值。如果父母也有“透明”作为价值，那么它应该继续这样下去。

我使用的是 java 7，但可以按 Selenium 执行 JavaScript 代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T13:53:57.283

默认情况下，CSS 值并不总是继承。在您的情况下，除非您明确告诉它，否则内部跨度不会继承背景颜色。

我已经完成了两个 jsFiddles 来证明这一点：

没有继承：http: [//jsfiddle.net/vLXfr/](http://jsfiddle.net/vLXfr/)

带继承：http: [//jsfiddle.net/B67Bm/](http://jsfiddle.net/B67Bm/)

如您所见，如果您告诉子元素继承背景颜色，则返回的值仅与父背景颜色相同。

更新：

查看您添加的来源后，您需要回答一些问题，但这是可能的。

这是一个丑陋的算法，我面前没有硒，所以你必须检查默认值。基本思想是通过 DOM 查看父/祖父/曾祖父，直到找到具有颜色集的父元素并将其返回。

```
public String getParentBackgroundColor(WebElement element) {
    WebElement current = element;
    //Ugly while true loop, fix this
    while(true) {
        //Get the current elements parent
        WebElement parent = element.findElement(By.xpath("..")); 

        //If the parent is null then doesn't have a parent so we should stop (change to seleniums default if element doesn't have a parent)
        if (parent == null) {
            throw new WeFailedException("Sorry, no parent elements had a background-color set");
        } else {
            //Otherwise get the parents color
            String color = parent.getCssValue("background-color");
            //If the color is transparent (based off your description, this could be some other default value) then set the parent as the current and continue the loop to try and get the parents parents color
            if (color == "transparent") {
                current = parent;
            } else {
                //If we found a color return it
                return color;
            }
        }
    }
} 
```

然后你可以使用它并将你的内部跨度传递给它，它应该返回父母的颜色。

希望这可以帮助。

# c# - 如何在 C# 中实现 Triple DES（完整示例）

> ID：11413576
> 
> 赞同：19
> 
> 时间：2012-07-10T12:43:24.577
> 
> 标签：c#, asp.net, encryption, cryptography

我想在 C# 中使用三重 DES 来加密/解密具有任意长度的 (utf8) 密钥的 (utf8) 字符串。

我正在寻找这三个功能

```
public static string Encrypt(string data, string key)
{
    ...
}

public static string Decrypt(string data, string key)
{
    ...
}

public static string GenerateKeyFromString(string str)
{
    ...
} 
```

注意：在任何人链接到它之前，[http://www.geekzilla.co.uk/view7B360BD8-A77C-4F1F-BCA0-ACD0F6795F61.htm](http://www.geekzilla.co.uk/view7B360BD8-A77C-4F1F-BCA0-ACD0F6795F61.htm)实现不起作用，我已经彻底测试过了。

我做了很多搜索，发现了一些问题，比如`EncryptOneBlock`和其他人，但我正在寻找一个完整的“傻瓜”实现，我认为这对其他人也有用。

提前致谢！

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-07-10T12:48:22.203

完整来源：http: [//www.codeproject.com/Articles/14150/Encrypt-and-Decrypt-Data-with-C](http://www.codeproject.com/Articles/14150/Encrypt-and-Decrypt-Data-with-C)

加密：

```
public static string Encrypt(string toEncrypt, bool useHashing)
{
    byte[] keyArray;
    byte[] toEncryptArray = UTF8Encoding.UTF8.GetBytes(toEncrypt);

    System.Configuration.AppSettingsReader settingsReader = 
                                        new AppSettingsReader();
    // Get the key from config file

    string key = (string)settingsReader.GetValue("SecurityKey", 
                                                     typeof(String));
    //System.Windows.Forms.MessageBox.Show(key);
    //If hashing use get hashcode regards to your key
    if (useHashing)
    {
        MD5CryptoServiceProvider hashmd5 = new MD5CryptoServiceProvider();
        keyArray = hashmd5.ComputeHash(UTF8Encoding.UTF8.GetBytes(key));
        //Always release the resources and flush data
        // of the Cryptographic service provide. Best Practice

        hashmd5.Clear();
    }
    else
        keyArray = UTF8Encoding.UTF8.GetBytes(key);

    TripleDESCryptoServiceProvider tdes = new TripleDESCryptoServiceProvider();
    //set the secret key for the tripleDES algorithm
    tdes.Key = keyArray;
    //mode of operation. there are other 4 modes.
    //We choose ECB(Electronic code Book)
    tdes.Mode = CipherMode.ECB;
    //padding mode(if any extra byte added)

    tdes.Padding = PaddingMode.PKCS7;

    ICryptoTransform cTransform = tdes.CreateEncryptor();
    //transform the specified region of bytes array to resultArray
    byte[] resultArray = 
      cTransform.TransformFinalBlock(toEncryptArray, 0, 
      toEncryptArray.Length);
    //Release resources held by TripleDes Encryptor
    tdes.Clear();
    //Return the encrypted data into unreadable string format
    return Convert.ToBase64String(resultArray, 0, resultArray.Length);
} 
```

解密：

```
public static string Decrypt(string cipherString, bool useHashing)
{
    byte[] keyArray;
    //get the byte code of the string

    byte[] toEncryptArray = Convert.FromBase64String(cipherString);

    System.Configuration.AppSettingsReader settingsReader = 
                                        new AppSettingsReader();
    //Get your key from config file to open the lock!
    string key = (string)settingsReader.GetValue("SecurityKey", 
                                                 typeof(String));

    if (useHashing)
    {
        //if hashing was used get the hash code with regards to your key
        MD5CryptoServiceProvider hashmd5 = new MD5CryptoServiceProvider();
        keyArray = hashmd5.ComputeHash(UTF8Encoding.UTF8.GetBytes(key));
        //release any resource held by the MD5CryptoServiceProvider

        hashmd5.Clear();
    }
    else
    {
        //if hashing was not implemented get the byte code of the key
        keyArray = UTF8Encoding.UTF8.GetBytes(key);
    }

    TripleDESCryptoServiceProvider tdes = new TripleDESCryptoServiceProvider();
    //set the secret key for the tripleDES algorithm
    tdes.Key = keyArray;
    //mode of operation. there are other 4 modes. 
    //We choose ECB(Electronic code Book)

    tdes.Mode = CipherMode.ECB;
    //padding mode(if any extra byte added)
    tdes.Padding = PaddingMode.PKCS7;

    ICryptoTransform cTransform = tdes.CreateDecryptor();
    byte[] resultArray = cTransform.TransformFinalBlock(
                         toDecryptArray, 0, toDecryptArray.Length);
    //Release resources held by TripleDes Encryptor                
    tdes.Clear();
    //return the Clear decrypted TEXT
    return UTF8Encoding.UTF8.GetString(resultArray);
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2017-03-22T18:59:18.293

```
using System;
using System.Configuration;
using System.Security.Cryptography;
using System.Text;

public class TripleDESImp
{
    public static readonly string Key = ConfigurationManager.AppSettings["Encryption_Key"];
    public static readonly Encoding Encoder = Encoding.UTF8;

    public static string TripleDesEncrypt(string plainText)
    {
        var des = CreateDes(Key);
        var ct = des.CreateEncryptor();
        var input = Encoding.UTF8.GetBytes(plainText);
        var output = ct.TransformFinalBlock(input, 0, input.Length);
        return Convert.ToBase64String(output);
    }

    public static string TripleDesDecrypt(string cypherText)
    {
        var des = CreateDes(Key);
        var ct = des.CreateDecryptor();
        var input = Convert.FromBase64String(cypherText);
        var output = ct.TransformFinalBlock(input, 0, input.Length);
        return Encoding.UTF8.GetString(output);
    }

    public static TripleDES CreateDes(string key)
    {
        MD5 md5 = new MD5CryptoServiceProvider();
        TripleDES des = new TripleDESCryptoServiceProvider();
        var desKey= md5.ComputeHash(Encoding.UTF8.GetBytes(key));
        des.Key = desKey;
        des.IV = new byte[des.BlockSize / 8];
        des.Padding=PaddingMode.PKCS7;
        des.Mode=CipherMode.ECB;
        return des;
    }
}

<configuration>
<appsettings>
<add key="Encryption_Key" value="put_your_encryption_key_here"/>
</appsettings>
<configuration> 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-10T12:52:22.697

为什么不使用 .Net Cryptography Library，它有 DES 和 Triple DES 实现。我建议不要重新发明轮子并使用库，如果你需要练习和提高你的技能，而不是推出你自己的实现！:)

```
private static void EncryptData(String inName, String outName, byte[] tdesKey, byte[] tdesIV)
{    
//Create the file streams to handle the input and output files.
FileStream fin = new FileStream(inName, FileMode.Open, FileAccess.Read);
FileStream fout = new FileStream(outName, FileMode.OpenOrCreate, FileAccess.Write);
fout.SetLength(0);

//Create variables to help with read and write.
byte[] bin = new byte[100]; //This is intermediate storage for the encryption.
long rdlen = 0;              //This is the total number of bytes written.
long totlen = fin.Length;    //This is the total length of the input file.
int len;                     //This is the number of bytes to be written at a time.

TripleDESCryptoServiceProvider tdes = new TripleDESCryptoServiceProvider();          
CryptoStream encStream = new CryptoStream(fout, tdes.CreateEncryptor(tdesKey, tdesIV), CryptoStreamMode.Write);

Console.WriteLine("Encrypting...");

//Read from the input file, then encrypt and write to the output file.
while(rdlen < totlen)
{
    len = fin.Read(bin, 0, 100);
    encStream.Write(bin, 0, len);
    rdlen = rdlen + len;
    Console.WriteLine("{0} bytes processed", rdlen);
}

encStream.Close();                     
} 
```

**资料来源：** [MSDN](http://msdn.microsoft.com/en-us/library/system.security.cryptography.tripledes.aspx)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-12-17T21:14:06.153

[这](http://www.achadwick.com/DeveloperBlog/Result/Triple%20DES%20Encryption)是一个完整的示例复制粘贴准备好..

```
using System;
using System.Collections.Generic;
using System.IO;
using System.Linq;
using System.Security.Cryptography;
using System.Text;
using System.Web;

namespace MVC3JavaScript_3_2012.Utilities
{
    public class MyTripleDES
    {
 private readonly TripleDESCryptoServiceProvider _des = new TripleDESCryptoServiceProvider();
        private readonly UTF8Encoding _utf8 = new UTF8Encoding();

        /// <summary>
        /// Key to use during encryption and decryption
        /// </summary>
        private byte[] _keyValue;
        public byte[] Key
        {
            get { return _keyValue; }
            private set { _keyValue = value; }
        }

        /// <summary>
        /// Initialization vector to use during encryption and decryption
        /// </summary>
        private byte[] _ivValue;
        public byte[] IV
        {
            get { return _ivValue; }
            private set { _ivValue = value; }
        }

        /// <summary>
        /// Constructor, allows the key and initialization vector to be provided as strings
        /// </summary>
        /// <param name="key"></param>
        /// <param name="iv"></param>
        public MyTripleDES(string key, string iv)
        {
            _keyValue = Convert.FromBase64String(key);
            _ivValue = Convert.FromBase64String(iv);
        }

        /// <summary>
        /// Decrypt Bytes
        /// </summary>
        /// <param name="bytes"></param>
        /// <returns></returns>
        public byte[] Decrypt(byte[] bytes)
        {
            return Transform(bytes, _des.CreateDecryptor(_keyValue, _ivValue));
        }

        /// <summary>
        /// Encrypt Bytes
        /// </summary>
        /// <param name="bytes"></param>
        /// <returns></returns>
        public byte[] Encrypt(byte[] bytes)
        {
            return Transform(bytes, _des.CreateEncryptor(_keyValue, _ivValue));
        }

        /// <summary>
        /// Decrypt a string
        /// </summary>
        /// <param name="text"></param>
        /// <returns></returns>
        public string Decrypt(string text)
        {
            byte[] input = HttpServerUtility.UrlTokenDecode(text);
            byte[] output = Transform(input, _des.CreateDecryptor(_keyValue, _ivValue));
            return _utf8.GetString(output);
        }

        /// <summary>
        /// Encrypt a string and return Base64String
        /// </summary>
        /// <param name="text"></param>
        /// <returns></returns>
        public string Encrypt(string text)
        {
            byte[] input = _utf8.GetBytes(text);
            byte[] output = Transform(input, _des.CreateEncryptor(_keyValue, _ivValue));
            return HttpServerUtility.UrlTokenEncode(output);
        }

        /// <summary>
        /// Encrypt or Decrypt bytes.
        /// </summary>
        private byte[] Transform(byte[] input, ICryptoTransform cryptoTransform)
        {
            // Create the necessary streams
            using (var memory = new MemoryStream())
            {
                using (var stream = new CryptoStream(memory, cryptoTransform, CryptoStreamMode.Write))
                {
                    // Transform the bytes as requested
                    stream.Write(input, 0, input.Length);
                    stream.FlushFinalBlock();

                    // Read the memory stream and convert it back into byte array
                    memory.Position = 0;
                    var result = new byte[memory.Length];
                    memory.Read(result, 0, result.Length);

                    // Return result
                    return result;
                }
            }
        }

        public static string CreateNewVector()
        {
            using (var des = new System.Security.Cryptography.TripleDESCryptoServiceProvider())
            {
                des.GenerateIV();
                return Convert.ToBase64String(des.IV);
            }
        }

        public static string CreateNewKey()
        {
            using (var des = new System.Security.Cryptography.TripleDESCryptoServiceProvider())
            {
                des.GenerateKey();
                return Convert.ToBase64String(des.Key);
            }
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2021-06-14T15:11:14.517

任何在 2020 年或之后阅读此主题的人都不要使用 TripleDes，因为现在它不太安全。您可以改为选择 AES（高级加密）。

您只需将 TripleDESCryptoServiceProvider 替换为 AesCryptoServiceProvider。

# jquery - 如何停止在 Jquery 中调用此函数？

> ID：11413578
> 
> 赞同：0
> 
> 时间：2012-07-10T12:43:29.680
> 
> 标签：jquery, ajax, ruby-on-rails-3

### 问题：

我在代码中调用滚动函数：

```
$(window).bind('scroll',function (){
    loading();
}); 
```

这里 loading() 发送一个 Ajax 请求来加载页面，现在我想在我的 total_pages 计数等于 current_page 时停止调用这个函数，否则它发送了太多的 Ajax 请求。

### 问题：

如何停止在 Jquery 中调用此函数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T12:46:37.930

您可以使用[unbind](http://api.jquery.com/unbind/)方法`scroll`从`window`. 尝试：

```
$(window).unbind('scroll'); 
```

它应该可以解决问题

# php - 我可以使用 AJAX 将 SUBMIT 按钮或隐藏的 INPUT 添加到 PHP 表单中吗？

> ID：11413581
> 
> 赞同：0
> 
> 时间：2012-07-10T12:43:37.793
> 
> 标签：php, javascript, ajax, forms, input

嘿伙计们，我需要我的 AJAX 结果来向我的表格添加字段，或者添加一个提交按钮来完成表格。

我的 AJAX 结果显示在标准 HTML 表单（来自 PHP 文件）内的 DIV 中。当在 FORM 标记中返回时，AJAX 结果（比如隐藏输入）是否可以包含在 FORM POST 中？

我正在使用标准 JavaScript（改编自发布的“livesearch”）从 AJAXresults.php 获取 AJAX 结果，它工作正常 - 我的 AJAX 结果确实返回 OK，只是我的表单不起作用！javascript是：

```
function showResult(str)
{
if (str.length<4)
  {
  document.getElementById("suburbmatch").innerHTML="Type more than 4 letters...";
  return;
  }
if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  } 
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.onreadystatechange=function()
  {
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
    document.getElementById("suburbmatch").innerHTML=xmlhttp.responseText;
    }
  }
xmlhttp.open("GET","AJAXresults.php?suburbtext="+str,true);
xmlhttp.send();
} 
```

myphp.php 包含这样的表单：（注意加载 AJAX 结果的 DIV，在 FORM 标记内）

```
<form action="myphp.php" method="POST">

 <input type="text" name="addressline1">
 <input type="text" name="addressline2">
 <input type="text" name="suburb" onkeyup="showResult(this.value)">

  <div id=suburbmatch></div>  // AJAX results display here

</form> 
```

AJAXresults.php 包含一个查询数据库然后将结果作为隐藏输入字段返回的脚本，以及一个提交按钮：

```
echo ('<input type="hidden" name="suburbID" value="'.$row['ID'].'">');
echo ('<input type="submit" name="submit" value="');
echo ($row['suburb'].' '.$row['state'].' '.$row['zipcode']);
echo ('"><br>'); 
```

此代码在 WHILE 循环中，因此与键入到 myphp.php 上的“郊区”文本输入中的文本匹配的“郊区”作为显示郊区/州/邮政编码的按钮加载。当您单击它时，它应该在 myphp.php 上提交整个表单，包括 AJAX 结果中隐藏的 INPUT。

我可以将结果作为文本返回并使用 $_GET 超链接数据，例如：(a href=myphp.php?result=x) 但随后它将刷新页面并重置其他表单值：P

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-24T12:16:34.603

**答案是肯定的！**

使用**AJAX**，JavaScript 可以获取**HTML 表单元素**（如 SUBMIT 按钮或隐藏的 INPUT），甚至更好的结构化数据（如对象，如 JSON 字符串），然后创建表单元素，并将它们添加到 HTML / PHP形式。

仅作记录，这就是我解决问题的方法：

首先，我切换到 jQuery 来处理 AJAX 函数，`$.get()`而不是`XMLHttpRequest`. 这使我能够处理错误以及其他优点，例如更好的跨浏览器兼容性。

关于将元素添加到表单中，我在这里实际需要的是**用户输入以在发送表单***之前*选择匹配**地址** （无论表单*如何*发送 - 后来我确实也会使用 AJAX 来执行此功能，使用） . 一旦用户从匹配的地址列表中选择了正确的地址，就会创建一个**隐藏的输入**（带有匹配的地址 ID 号）并出现一个**提交**按钮，以便用户可以提交表单。**`$.post()`**

 ********更多详情...**

当用户在**郊区**字段中输入内容时， JavaScript 函数`showResult()`被触发，并返回匹配地址列表：`onKeyUp`

 **```
// AJAXresults.php code in the WHILE loop:
echo '<li onclick="chooseThisAddress('.$row['ID'].')">'.$row['street'].', '.
$row['suburb'].' '.$row['state'].' '.$row['zipcode'].'</li>';

// which will output, in this example:
<li onclick="chooseThisAddress(64412)">1 Market St, Sydenham NSW 2044</li>
<li onclick="chooseThisAddress(64373)">1 Market St, Sydney NSW 2000</li> 
```

用户点击正确的地址，并`chooseThisAddress()`触发一个新函数（将地址 ID 号传递给它），它只是隐藏地址匹配列表，然后创建**隐藏的输入**（例如：）`<input type="hidden" name="addressID" value="64412">`和一个**SUBMIT**按钮，两者都使用 jQuery 的`.append()`方法（将新的表单元素附加到表单）。

**那么最初的*问题*是什么？**

简而言之，从用户的角度来看，我考虑表单如何工作的方式让我想到让 AJAX 返回一堆提交按钮。从那以后，我发现了很多不同的方法，但这就是我最终完成它的方式，这样它既实用又美观。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T13:47:33.740

问题是你要回来

```
echo ('<input type="hidden" name="suburbID" value="'.$row['ID'].'">'); 
```

在 WHILE 循环中。这意味着您将拥有多个具有相同`name="suburbID"`和不同值的 html 元素。当您提交表单时，您将始终获得最后一个表单的值，该值将覆盖其他表单的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T12:50:38.943

你为什么不只通过 ajax 提交这个表单。这应该可以解决您的刷新问题********

# twitter - Twitter API：搜索关注者推文

> ID：11413584
> 
> 赞同：6
> 
> 时间：2012-07-10T12:43:48.137
> 
> 标签：twitter

有没有办法只在用户的关注者的推文中搜索一个词。显然，搜索 API 是全球性的。我只想在用户的关注者中搜索。

有没有办法做到这一点。即使是一个非常复杂的也将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T16:45:53.057

您可以使用 检索用户关注者的 ID `GET http://api.twitter.com/1.1/followers/ids.json?screen_name=<username>`。每个 ID 对应一个用户，您现在可以下载每个关注者的推文`GET http://api.twitter.com/1.1/statuses/user_timeline.json?user_id=<follower ID>`。我认识到它需要对 Twitter API 的大量请求（这是速率限制的），但你不能用这个 API 做得更好。

# javascript - 如何在单选按钮单击时启用/禁用 asp.net 验证器？

> ID：11413585
> 
> 赞同：0
> 
> 时间：2012-07-10T12:43:48.760
> 
> 标签：javascript, asp.net, validationgroup

我有 asp.net 表单和几个单选按钮，它们包含嵌套的单选按钮（见图）。文本框有验证器。

问题是：如何在未选中相应的单选按钮时禁用必要的验证器，并在选中单选按钮时启用它们？

我需要通过 javascript 在客户端执行此操作。

![在此处输入图像描述](../Images/f701549c2aa6bd6c84c29e1c2533e993.png)

我需要将验证器分组到验证组中吗？

任何帮助表示赞赏。提前感谢））

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T15:30:42.160

```
if(radioButton.Checked)
{
    textBox1.required = false;
} 
```

PS：`AutoPostBack`单选按钮需要为真

# php - 未登录时的cakePHP ACL

> ID：11413589
> 
> 赞同：0
> 
> 时间：2012-07-10T12:43:52.530
> 
> 标签：php, cakephp

我有一个应用程序，所有用户都必须登录。我正在使用该`Auth`组件进行身份验证和`ACL`授权。

我基本上在管理控制器的 `beforeFilter() 中做这样的事情：

```
if(!$this->Acl->check(array('model' => 'User', 'foreign_key' => $this->Auth->user()['id']), 'Admin', 'read')) 
{
    pr('You are NOT allowed to be here!');
} 
```

这适用于任何登录用户，有些用户可以看到管理页面，有些则不能。

但是，当我在未登录时转到*/admin时，我得到：*

> AclNode::node() - 找不到由“Array ([Aro0.model] => model [Aro0.foreign_key] => U)”标识的 Aro 节点

（我不知道为什么它会打印“U”）。就像它正在尝试进行查找一样，但是由于用户信息不存在，因此它崩溃了。我确定我在这里遗漏了一些东西。我可以通过检查用户是否登录来避免这个问题：

```
if($this->Auth->user()) //do the ACL check 
```

但我不喜欢这种方法，我想这是错误的。

我需要某种默认设置吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T20:17:35.377

该错误意味着在您的数据库中您没有 acos 中的节点。关系的foreign_key也是错误的！也许你应该检查[Cake Book - Simple Acl 控制的应用程序](http://book.cakephp.org/2.0/en/tutorials-and-examples/simple-acl-controlled-application/simple-acl-controlled-application.html)，然后我会给你更多关于你不明白的细节。

在 beforeFilter() 中，您应该只有访客允许，其余权限在数据库中。

# css - 如何使用 960 Grid System 实现流体宽度？

> ID：11413591
> 
> 赞同：0
> 
> 时间：2012-07-10T12:43:58.743
> 
> 标签：css, 960.gs

我使用 960gs 来生成 Web 应用程序的布局，但是整个开发过程都是在我的 15 英寸笔记本电脑上完成的。在 22 英寸显示器上查看应用程序，它看起来非常小，即无论显示器尺寸如何，它的宽度都保持固定。

这是 960gs 的限制，还是我自己的 CSS 的问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T10:51:11.990

正如@oezi 提到的，这就是 960gs 的工作原理。

**[话虽如此，您可以通过在 960gs 上](http://www.designinfluences.com/fluid960gs/)**使用基于百分比单位而不是像素的变体来实现您想要的，并生成流体布局而不是固定布局。它链接在[960gs 主页底部的](http://960.gs/)*衍生产品*下。

***注意：**您可以并且当然应该根据您的需要更改代码。如需更多动力，请阅读[Matt Ward](http://blog.echoenduring.com/2011/03/03/why-i-use-css-frameworks/)将 CSS 框架描述为**“工具，而不是拐杖”**的帖子。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T12:53:39.220

正如网站所说，无论用户的分辨率如何，您的网站都会很`960px`宽 - 在 22 英寸显示器（全高清？）上，这只是屏幕宽度的 1/2 ......这就是它的工作原理。

> **本质**
> 
> [...] 基于 960 像素的宽度。

您可以尝试做的是[创建几个网格大小](http://grids.heroku.com/)并使用[媒体查询](http://www.w3.org/TR/css3-mediaqueries/)来包含最适合实际分辨率的那个。

# iphone - 使用 IOS 5 或更高版本使用 google 登录到 iphone sdk

> ID：11413592
> 
> 赞同：1
> 
> 时间：2012-07-10T12:44:00.050
> 
> 标签：iphone, ios, authentication

我想通过 google 登录以使用我的 iphone 应用程序进行身份验证并共享资源。是否有任何 API 或教程可用于将 Google 集成到最新 IOS 的 iPhone 应用程序中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T13:44:04.563

[https://github.com/robbiehanson/XMPPFramework](https://github.com/robbiehanson/XMPPFramework)

要登录谷歌，您必须提供“用户名”、“密码”和谷歌服务器名称，即“talk.google.com”

请参阅上面的 xmppchat application.in APPDelegate.m 委托方法的链接，其中一种方法是 didAuthenticate 方法

```
- (void)xmppStreamDidAuthenticate:(XMPPStream *)sender
{

} 
```

以上方法验证用户名和密码是否正确。如果用户名和密码正确，则它会向您的朋友在线显示您。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T21:16:34.210

Google API 的 Objective-C 库位于

[https://code.google.com/p/google-api-objectivec-client/](https://code.google.com/p/google-api-objectivec-client/)

# c# - CRC32 从 C++/C# 到 PHP

> ID：11413594
> 
> 赞同：1
> 
> 时间：2012-07-10T12:44:11.420
> 
> 标签：c#, php, crc32

我不擅长 CRC32、MD5 等算法，所以我什至很难问这个问题:)

基本上有一个 C# 应用程序使用

```
[DllImport("Crc32.dll")]
private static extern UInt32 CRC32Calc(UInt32 crc32, byte[] buffer, uint length); 
```

并在代码的更下方以这样的方法使用`Generate`它

```
UInt32 crc = CRC32Calc(crcSeed, rawData, (uint)rawData.Length); 
```

在使用某个`crcSeed`值时。

我的工作是将整个`Generate`方法改造成 PHP 函数，同时保留正确的 CRC 计算。

我认为PHP的

```
int crc32 ( string $str ) 
```

功能将不起作用，因为我无法设置 crcSeed。所以我的问题是：

**如何在 PHP 中进行精确的 crc32 计算而不求助于外部 dll 等，以便我可以在 Linux 机器上使用代码？**

编辑：

CRC 是按块计算的，其中 crcSeed 是初始值。

CRC32Calc 方法实际上是使用 SCTP CRC-32C 版本，所以现在只需要一个 PHP 实现。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T13:17:38.090

通常，数据是一次处理一个块而不是一次全部处理，以便使应用程序的内存使用量保持不变，而不是与输入的长度成比例。因此，您需要能够一次处理数据块的函数。crc 函数是为了支持这一点而编写的，因此它们接受与前一个块相距甚远的 crc 值作为参数，然后该函数在应用当前块中的数据后计算 crc 值。

```
updated_crc = crc(last_crc, this_chunk_data_pointer, this_chunk_length) 
```

到目前为止的 crc 值就是您所说的“种子”。

您为第一个块提供的第一个 crc 是零长度序列的 crc 值。它由使用的 crc 标准定义。通常它为零，但它可以是其他值，例如所有二进制值。

```
first_crc = crc(0, first_chunk_data_pointer, first_chunk_length) 
```

快速的 google 搜索不会在 php 中找到支持以块计算 crc 的内置函数 - 只能一次完成。您可能需要自己滚动。网上可以找到很多高效crc计算的例子，一般都是用256个crc的表。首先，您需要知道根据它的用途计算的是哪个 crc。是 gzip、png、以太网等中使用的 crc-32 吗？是 iSCSI 中使用的 crc-32c 吗？还有什么？

*更新：*

好的，所以它是 crc-32c。您可以[在此处](http://www.tty1.net/pycrc/)查找支持该 crc（以及许多其他）的 crc 代码生成器。

# iphone - NSDateFormatter 在 iOS 5 中返回 nil

> ID：11413600
> 
> 赞同：1
> 
> 时间：2012-07-10T12:44:22.083
> 
> 标签：iphone, ios, xcode, ios5, nsdateformatter

使用 iOS 6 一切正常，但使用 iOS 5 myDate 返回 nil

```
NSString *dateString = @"2012-07-12T11:00:00+02:00";

NSLocale *deLocale = [[NSLocale alloc] initWithLocaleIdentifier:@"de_DE"];
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
[dateFormatter setDateFormat:@"YYYY-MM-dd'T'HH:mm:ssZZZZ"];
dateFormatter.locale = deLocale;
NSDate *myDate = [dateFormatter dateFromString:dateString]; 
```

我相信这一定是 DateFormat 的问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T13:26:13.513

```
NSDate *today = [NSDate dateWithTimeIntervalSinceNow:0];
 NSDateFormatter *dateFormat = [[NSDateFormatter alloc] init];
 [dateFormat setDateStyle:NSDateFormatterShortStyle];
 NSString *dateString = [dateFormat stringFromDate:today];
 NSLog(@"Date: %@", dateString); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-10T12:52:28.553

这对我有用：

```
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
[dateFormatter setDateFormat:@"dd/MM/yyyy hh:mm:ss a"];
NSLog(@"%@", [dateFormatter dateFromString:@"12/12/2012 12:12:12 AM"]); 
```

# java - 正则表达式检测“多个”实体

> ID：11413602
> 
> 赞同：1
> 
> 时间：2012-07-10T12:44:31.083
> 
> 标签：java, regex

我有以下类型的字符串：

```
asdf:0123-456-789:USB0::0x1234::0x9ABC::0123-456-789::INSTR 
```

首先是名称`asdf`后跟序列号`0123-456-789`，然后是地址字符串`USB0::0x1234::0x9ABC::0123-456-789::INSTR`。格式是

```
name:serial:addr 
```

**我想将名称、序列号和地址提取到单个 Strings**中。地址也可以包含`::`所以我不能只是`String#split(String regex)`它（或者我可以吗？）。我的想法是使用捕获这三个实体的正则表达式。我对正则表达式很陌生。

我正在使用 Java：

```
String input = "asdf:0123-456-789:USB0::0x1234::0x9ABC::0123-456-789::INSTR";
// name
Matcher nameMatcher = Pattern.compile("[0-9a-zA-Z]+").matcher(input);
nameMatcher.find();
String name = nameMatcher.group();
// serial
Matcher serialMatcher = Pattern.compile("[0-9]{3}-[0-9]{9}-[0-9]{4}").matcher(input);
serialMatcher.find();
String serial = serialMatcher.group();
// address
Matcher addrMatcher = Pattern.compile("[0-9a-zA-Z[:]{2}-]+").matcher(input);
addrMatcher.find();
String address= addrMatcher.group();
System.out.println(name + " / " + serial + " / " + address);

// result:
// asdf, 012-012345678-0123, asdf:012-012345678-01234:USB0::0x1234::0x9ABC::012-012345678-01234::INSTR 
```

这适用于名称和序列号，但不适用于地址（它捕获整个输入字符串而不仅仅是地址）。问题是我只想允许`::`而不是`:`，但它不能按我的预期工作。有没有很好的方法来匹配这个或者这太复杂了？如果是这样，你能告诉我不同​​的方法吗？

编辑：我刚刚为我找到了一个足够好的解决方案：

```
String input = "asdf:012-012345678-01234:USB0::0x1234::0x9ABC::012-012345678-01234::INSTR";
String[] asdf = input.split(":");
String name = asdf[0];
String serial = asdf[1];
String address = asdf[2];
for (int i = 3; i < asdf.length; i++)
  address += ":" + asdf[i];
Log.i(name + ", " + serial + ", " + address); 
```

但是问题仍然存在（出于好奇和学习）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T12:51:01.890

```
String info="asdf:0123-456-789:USB0::0x1234::0x9ABC::0123-456-789::INSTR";
String[] array=info.split(":", 3);//split only in 3 parts

System.out.println("name="+array[0]);
System.out.println("serial="+array[1]);
System.out.println("addr="+array[2]); 
```

输出

```
name = asdf
serial = 0123-456-789
addr = USB0::0x1234::0x9ABC::0123-456-789::INSTR 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T13:04:48.810

你可以做类似的事情

```
input.split("(?<!:):(?!:)") 
```

它基本上环顾 : 字符以确保它旁边没有其他 : 字符。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T13:05:52.890

您可以将地址本身与正则表达式匹配`([\w-])+(::([\w-]+))+`

```
([\w-])+    one or more word (alphanumeric) or hyphen characters ...
(           ... followed by ...
::          ... two colons ...
([\w-]+)    ... with one or more word (alphanumeric) or hyphen characters ...
)+          ... at least one more time 
```

# c# - Database.Script 方法抛出 - ArgumentOutOfRangeException

> ID：11413605
> 
> 赞同：0
> 
> 时间：2012-07-10T12:44:55.540
> 
> 标签：c#

**您好，我正在运行以下代码：**

```
database.UserDefinedFunctions[name, schema].Script(dropstoredProcOptions); 
```

以此作为 dropstoreProcOptions：

```
 ScriptingOptions dropstoreProcOptions = new ScriptingOptions();

       dropstoreProcOptions.IncludeIfNotExists = true;
        dropstoreProcOptions.ScriptDrops = true;
        dropstoreProcOptions.IncludeDatabaseContext = false; 
```

如果您在没有任何参数的情况下运行 .Script() 函数，则不会引发错误，但是一旦将 ScriptingOpstions 作为参数传递，则会引发以下错误：**ArgumentOutOfRangeException**

任何有关如何更好地调试它的帮助或建议将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T13:16:41.453

Arg haha​​ ... 生成 ScriptingOptions 的项目使用的是 9.0 版 dll，而调用 script() 的项目是 SqlServer.SMO 的 uisng 10.0 dll

# oracle - 将双拉丁字母转换为 US7ASCII

> ID：11413607
> 
> 赞同：1
> 
> 时间：2012-07-10T12:45:10.757
> 
> 标签：oracle, oracle11gr2

如何在 oracle 中将**Æ**`(latin capital letter ae)`转换为**AE**`(US7ASCII)`。我尝试过以下查询：

```
SELECT CONVERT ('Æ', 'US7ASCII') FROM DUAL; 
```

但它给了我**？**作为输出，但相同的查询适用于单个字符，如下所示：

```
SELECT CONVERT ('à', 'US7ASCII') FROM DUAL;

OUTPUT
==========
 a
========== 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T15:06:33.467

您在 ASCII 以外的字符集中有一堆数据，并希望将其全部转换为 ASCII。为了更自动地执行此操作，您需要非常熟悉[自定义区域设置](http://docs.oracle.com/cd/B19306_01/server.102/b14225/ch13custlocale.htm)，以便 CONVERT 知道您希望如何完成转换。是的，这意味着对您想要的转换进行硬编码，但只对您想要执行的每个操作进行一次而不是一次。

一般来说，您可能不会乐意转换这些字符。从长远来看，诸如“Æ”转换为“AE”和“ß”转换为“SS”或“SZ”之类的事情可能会导致挫败感。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T13:20:18.937

US7ASCII 是一个 7 位字符集。在这 128 个字符中，您可能没有字符“Æ”。所以这是不可能的。

# c# - iframe 100% 高度不适用

> ID：11413614
> 
> 赞同：2
> 
> 时间：2012-07-10T12:45:29.257
> 
> 标签：c#, asp.net, iframe, height

我有一个带有母版页的网站，我唯一想要的一页是：

```
<asp:Content ID="Content2" ContentPlaceHolderID="MainContent" Runat="Server" style="margin:0px;padding:0px;overflow:hidden">
    <iframe src="http://mylink" frameborder="0" style="overflow:hidden;height:100%;width:100%" height="100%" width="100%"></iframe>
</asp:Content> 
```

iframe 的宽度确实会扩展到屏幕的宽度，但高度总是大约 100 像素，即使它应该接近 1050。

浏览器 IE9。如何解决身高问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T12:56:47.873

仅当父元素已应用特定高度时，才对元素应用 100% 的高度。

例如：

```
<div style="height:500px">
  <iframe style="height:100%;">I am 500px too!</iframe>
</div> 
```

如果您的目标是让 iframe 占据视口的宽度和高度，则需要在样式表中设置以下内容：

```
html, body { height: 100%; } 
```

~~您还需要为 iframe 的所有祖先元素添加 100% 的高度。因此，如果它是 5`<div>`秒深，那么每个 div 都需要 100% 的高度。~~ **编辑**：至少在 Chrome 中，情况似乎并非如此。尽管至少有一个祖先元素确实需要一个特定的高度集。

**编辑：**这里以 jsfiddle 链接为例：http: [//jsfiddle.net/V3rLE/](http://jsfiddle.net/V3rLE/)

HTML 是：

```
<div style="height:100%">
<iframe style="width:100%;height:100%;border:0" src="http://jsfiddle.net"></iframe>
</div>​ 
```

CSS是：

```
html, body { height: 100%; }
iframe { display: block; } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T12:56:59.253

如果你想设置 height=100% 。它将作为内容高度...假设您只有一个 gridview.consider gridview height as 200px ..页面高度也只有 200px ...所以尝试使用像素高度。

# objective-c - iOS中是否有可以使用但用户无法更改的时钟

> ID：11413616
> 
> 赞同：25
> 
> 时间：2012-07-10T12:45:32.037
> 
> 标签：objective-c, ios, time

我正在尝试设计一个发生实时事件的系统，并且我想将它们与时钟同步。 `[NSDate date]`通常没问题，但用户可以更改此设置并欺骗系统。我所需要的只是一个可以从中获取相对时间的时钟（例如 64 位计数器）——我不需要绝对时间（或一天中的时间等）。

我可以使用这样的 API 吗？

编辑：我还想补充一点，这个时钟需要在应用程序的会话中保持不变。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-10T13:05:49.687

iPhone 上最好的单调递增数字是`mach_absolute_time()`自上次重启以来的 CPU 滴答计数。如果您出于任何原因想要在几秒钟内获得它，最容易使用`CACurrentMediaTime()`.

使用它来创建“始终递增”非常容易。首次启动时，将当前值存储在您喜欢的任何位置。当您退出时，并定期保存该值的偏移量。重启时，检查当前值；如果它小于您以前的基本值，请替换您的基本值（已重新启动）。

当然，所有这些都可以通过删除你的应用程序来清除，除非你在服务器上存储了一些东西。

请注意，这不能用作强大的安全措施。没有办法阻止授权用户伪造请求。因此，取决于您所说的“欺骗系统”，这可能不是一个可解决的问题。您能做的最好的事情就是不断努力寻找黑客并与他们打交道。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-10T13:08:36.940

如果您只需要一个时钟来测量单调递增的事件，您只需获取当前系统正常运行时间 ala 即可`clock_gettime(CLOCK_MONOTONIC)`。如果重启设备有问题，只需保存上次使用的值，并在下次启动时使用上次保存的值作为偏移量。这里的问题可能是，如果他们真的关闭了设备，它就不会计算那个时间。但是，如果您担心用户会加快时间，他们就不能这样做，只能放慢速度。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-07-10T13:46:17.657

我在我们的应用程序中使用它

```
+ (NSDate *) getAWSDate
{
    NSDate *today = nil; 
   NSString *dateString = nil;

    NSString *awsURL = @"http://s3.amazonaws.com";
    NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:[NSURL URLWithString:awsURL]];  
    [request setHTTPMethod:@"HEAD"];  

    NSHTTPURLResponse *response;  
    [NSURLConnection sendSynchronousRequest:request returningResponse:&response error: NULL];  

    if ([response respondsToSelector:@selector(allHeaderFields)]) {  
        dateString = [[response allHeaderFields] objectForKey:@"Date"];
        dateString = [dateString stringByReplacingOccurrencesOfString:@"GMT" withString:@"+0000"];
        NSDateFormatter *df = [[NSDateFormatter alloc] init];  
    df.dateFormat = @"EEE, dd MMM yyyy HH:mm:ss z";
    df.locale = [[[NSLocale alloc] initWithLocaleIdentifier:@"en_US_POSIX"] autorelease];  
    df.timeZone = [NSTimeZone timeZoneWithAbbreviation:@"GMT"];  
    today = [df dateFromString:dateString];
    [df release];    
    }           
    return today;
} 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-07-10T13:03:15.193

我想`mach_absolute_time()`可能是你想要的。这里有很多信息：http: [//developer.apple.com/library/mac/#qa/qa1398/_index.html](http://developer.apple.com/library/mac/#qa/qa1398/_index.html)

它基本上是自设备启动以来滴答数的计数器。这将在重新启动时重置，但除此之外它是一个单调递增的计数器。

如果计数器自上次（设备重新启动）以来减少，您可以保留计数器的最后一个值并处理它。在这种情况下，您可以将最后一个已知值添加到当前值以获得已过去时间的下限，您所失去的只是最后一次会话和设备关闭之间的时间，您将保持之间的时间重启和下一个会话。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-07-10T12:58:11.010

据我所知，没有任何其他方法可以获得正确的时间。我会使用**NTP。**

> **网络时间协议 (NTP)**是一种网络协议，用于通过分组交换、可变延迟数据网络同步计算机系统的时钟。更多：[http ://en.wikipedia.org/wiki/Network_Time_Protocol](http://en.wikipedia.org/wiki/Network_Time_Protocol)

在一个项目中，我将使用**NTP**（我明天），但我已经做了一些研究：

**iOS 库：** [https](https://github.com/jbenet/ios-ntp) ://github.com/jbenet/ios-ntp - 作者注释：实施并不像那些 RFC 中描述的那样严格，因为目标是将时间精度提高到一秒，而不是几分之一毫秒.

对于非商业项目，请查看：www.packages.ubuntu.com/source/lucid/ntp

**C 库：** www.hillstone-software.com/hs_ntp_details.htm

**文档：** www.nist.gov/pml/div688/grp40/its.cfm

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-10T12:54:28.593

我能想到的唯一想法是使用 NTP 服务器来获取时钟，但这需要网络连接。

# maven - 如何使用 Maven 持续构建和部署特性分支？

> ID：11413624
> 
> 赞同：38
> 
> 时间：2012-07-10T12:46:10.593
> 
> 标签：maven, continuous-integration, maven-javadoc-plugin, feature-branch, maven-source-plugin

我的团队正在使用功能分支来实现新功能，并不断将快照构建部署到远程存储库中供我们的用户使用。因此，“部署”实际上只意味着“分发到远程 Maven 存储库”。我们目前只为 master 分支而不是 feature 分支运行持续集成构建，原因如下：我们使用 Maven 构建我们的项目并将 JavaDoc 和源代码与 JAR 一起分发。

我现在的计划是为每个功能分支构建添加一个分类器，并希望在创建和部署这样的工件时使用一个分类器：

*   分支：主
*   分类： 无
*   工件：`foo-${version}`.jar、`foo-${version}-sources`.jar、`foo-${version}-javadoc.jar`

*   分支：特征-X

*   分类： myfeature
*   文物：`foo-${version}-feature.jar`, `foo-${version}-sources-feature.jar`,`foo-${version}-javadoc-feature.jar`

我并不关心工件的确切命名，我只需要功能分支的单独的主、源和 JavaDoc 工件。事实证明，JavaDoc 插件和源插件都没有考虑配置分类器，因此有效地覆盖了为我的主构建创建的工件。

我真的不想更改 artifactId，尽管这可能会解决问题。您如何处理功能分支和与 Maven 的持续集成？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-10T12:51:13.707

我建议将分支限定符添加到版本组件中，因为它与该部分更相关。这也允许您的快照依赖于主分支旁边的那些版本。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-10T13:20:38.050

我建议使用代表分支的适当版本以及版本，例如：

1.0.0-SNAPSHOT 主控

和

功能 F1 的 1.0.0-F1-SNAPSHOT

等等

这也给出了一个指标，该功能分支是从哪个版本 1.0.0 生成的。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2015-02-19T08:47:34.537

正如其他人所建议的那样，使用版本号存储分支名称是一个快速的胜利，但如果您使用版本范围会导致问题。版本号并不是要那样使用的。我们在持续集成过程中使用它们来使集成测试依赖于被测试的工件：

```
[1.8-SNAPSHOT,1.9-SNAPSHOT) 
```

版本号内的限定符部分表示同一代码库的不同增量阶段：

```
1.8-alpha1-SNAPSHOT
1.8-alpha1-SNAPSHOT
1.8-beta1-SNAPSHOT 
```

这就是为什么上面的版本范围会捕获上面的内容并且 Maven 会[按这个顺序排列它们](http://docs.codehaus.org/display/MAVEN/Dependency+Mediation+and+Conflict+Resolution)：

```
1.8-SNAPSHOT
1.8-alpha1-SNAPSHOT
1.8-alpha1-SNAPSHOT
1.8-beta1-SNAPSHOT 
```

任何在版本号 ( ) 中带有功能分支名称的工件`1.8-featureA-SNAPSHOT`都将比没有限定符的快照排序。但是功能分支是一个“不同的”代码库，而不是相同代码库的更新表示。对于我们的集成测试场景，这导致了无用的测试失败。功能分支尚未准备好通过集成测试进行测试。

我们现在遵循这条规则：如果您无论如何都必须更改某些内容，为什么不更改工件 ID？我们更改了功能分支的工件 ID，它工作得很好。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2017-04-11T17:34:16.287

[您可以使用maven-branch-extension](https://bitbucket.org/mattshelton/maven-branch-extension/)为每个功能分支有效地创建单独的 SNAPSHOT 命名空间，而不是更改工件的 maven 坐标。从项目页面引用：

> 我们不是在功能分支上更改版本号，而是更改存储库。每个功能都根据其分支名称部署到仅用于功能分支的远程存储库中的子目录中。不存在工件被覆盖的风险。版本号不会改变。与 Git 的分支和合并保持简单（就像它本来的样子！）。
> 
> 扩展获取当前 Git 分支并解析存储库 URL 中的属性，以便可以正确存储和检索工件。它还管理对本地存储库的工件的缓存和提取，以便在从功能分支工作时从功能分支存储库中获取工件（如果存在）。

The beauty of this is that external users of the SNAPSHOT dependencies are completely isolated from the internal work on topic branches.

# c# - 跨文本框的文本选择

> ID：11413627
> 
> 赞同：3
> 
> 时间：2012-07-10T12:46:15.967
> 
> 标签：c#, .net, wpf

我目前正在尝试按照 FinalDraft 和 Adob​​e Story 的方式编写脚本编写器。我正在使用 WPF 和 .NET 4.0。

我没有使用一个巨大的文本框来处理用户的输入以确定下一步的行动，而是决定尝试使用多个文本框，这些文本框是根据用户的操作动态创建并定位在画布顶部的。

我遇到的问题是我无法通过简单地拖动并按住鼠标左键从不同的文本框中选择文本。我意识到这个功能不是内置的，所以我尝试使用各种鼠标事件来通过代码实现这个功能。

不幸的是，如果特定文本框具有鼠标焦点，则不会触发我需要的事件。

您将如何处理这个问题？在 WPF 中是否可以跨 TextBoxes 进行文本选择？

如果没有，除了使用单个文本框之外，我还有什么选择？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T13:17:41.560

[`AddHandler`](http://msdn.microsoft.com/en-us/library/ms598899.aspx)您是否尝试通过在指定`handledEventsToo`为 true时附加到鼠标事件来覆盖事件冒泡？

# amazon-web-services - 在我的场景中使用哪些 AWS 服务？

> ID：11413628
> 
> 赞同：1
> 
> 时间：2012-07-10T12:46:20.287
> 
> 标签：amazon-web-services, amazon-simpledb, amazon-rds

我有一个非常简单的数据库结构（基本上只有一个用户表），有两个基本操作：

用户可以登录，获取身份验证令牌，然后使用存储在此用户表中的令牌提交一些数据（只有几个字节）。

但是，许多用户可以同时执行此操作（例如，在一分钟内有 10 万用户，在有限的时间段内）。

我想知道什么是一个不错的技术选择。我不害怕使用 NoSQL 数据库或任何东西，并试图最终得到可扩展的东西。

我一直在考虑一个排队系统，以及一个填充数据库的任务。或者我只需要 Amazon SimpleDB，甚至不用为消息排队而烦恼吗？还是我需要 RDS 解决方案来让多个 EC2 实例与“相同”数据库通信？或者根本没有亚马逊网络服务？感谢您的任何指点，我对此很陌生，想了解各种权衡取舍以及最适合我的应用程序的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T15:08:36.447

如果您在 AWS 中使用 NoSQL 数据库没有问题，您必须选择：SimpleDB 和 DynamoDB。

使用 SimpleDB，您有 10GB/表的限制，这意味着您将不得不担心将数据分区到多个表中，并且您也有每秒 25 次写入的限制。

使用 DynamoDB，所有这一切都会自动处理，并且您没有大小或写入量的限制。最好的部分是您所有的数据都存储在固态磁盘 (SSD) 中，这可以帮助您获得更好的性能。

如果你是像我这样比较传统的人，你可以使用 RDS（关系数据库服务），在这里你可以选择 MSSQL、MySQL 和 Oracle

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T23:50:25.710

正如 PachinSV 所指出的，您可以选择您喜欢的任何数据库解决方案。我将再添加一个：您可以启动 EC2 实例并安装您选择的 DBMS，无论是 NOSQL（MongoDB、Cassandra）、SQL（MSSQL、MySQL、Oracle）还是其他。我将尝试用这个答案来处理您问题的其他方面（应用程序本身、可伸缩性以及（如果需要）存储）。

不过，我的建议是：

- 一个或两个 EC2 实例，可能是小型或中型（查看[此处](http://aws.amazon.com/ec2/instance-types/)的实例类型），以处理您的应用程序负载。更多关于 EC2[的信息](http://aws.amazon.com/ec2/)。
- 每当您需要扩展时，您都可以在 EC2 实例之前添加一个弹性负载均衡器，这样您就可以在保持水平可扩展性的同时继续向您的生态系统添加实例。
-对于数据库，我将从 RDS 实例（可能很小）开始，使用您喜欢的系统，MySQL、SQL Server 或 Oracle。使用 RDS，您可以随时更改实例大小，还可以添加一个或多个只读副本，以防您的应用程序将来变得读取密集型。更多关于 RDS[的信息](http://aws.amazon.com/rds/)。正如 PachinSV 指出的那样，另一个不错的选择是[DynamoDB](http://aws.amazon.com/dynamodb/)，因为他已经提到的原因——分区、性能、更少的限制等——
虽然你没有提到，如果你需要可扩展的存储，S3 绝对是你要走的路，并且可以随时供你使用。

希望能帮助到你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T11:30:57.767

正如您所提到的，在 RDS 中，您将受限于他们可用的最大实例的容量，并且您无法轻松扩展。如果您最终选择了符合 ACID 的 SQL 解决方案，并且想要数据库服务（而不是自己在 EC2 实例上安装数据库），EC2 上的另一个 MySQL 选项是 Xeround，它具有自动扩展功能，因此可以容纳大型并发用户数和高吞吐量。

# sql-server-2008 - 无法连接 MMSql 数据库

> ID：11413637
> 
> 赞同：-3
> 
> 时间：2012-07-10T12:46:57.993
> 
> 标签：sql-server-2008, asp-classic

请帮助我在我的 asp 应用程序中收到以下错误，

> 用于 SQL Server 错误“80004005”的 Microsoft OLE DB 提供程序
> 
> 无法打开登录请求的数据库“mydb”。登录失败。

我很确定我的用户拥有数据库的权限并且它的凭据是正确的。

我处于死胡同，不知道还能尝试什么......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T12:48:55.303

这听起来像是登录的默认数据库，或连接字符串中明确提到的数据库，已脱机或不再存在。您是否使用其他登录名（例如 sa 或管理员）通过其他工具（例如 Management Studio）进行检查，该工具`mydb`实际上是在线且可访问的？您是否使用以下方法检查了数据库的状态：

```
SELECT state_desc FROM sys.databases WHERE name = N'mydb'; 
```

? 您的数据库是否设置为自动关闭？此登录名是否曾经能够连接到此数据库？最后一次是什么时候？

很多东西要检查。

我们知道数据库在线，接下来让我们确保登录名在数据库中确实有一个用户。此查询是否返回结果？

```
SELECT * FROM sys.server_principals AS s
INNER JOIN mydb.sys.database_principals AS d
ON s.sid = d.sid
WHERE s.name = N'your_login_name'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-19T06:17:18.057

要解决此问题，请确保满足以下条件：

Windows NT 帐户映射到 SQL 帐户。

连接字符串中的用户 ID 有效且不为空。

在 SQL Server 企业管理器中设置标准安全性。要实现 SQL Server 标准安全性，请按照下列步骤操作：
在 SQL 企业管理器中，右键单击出现在服务器管理器窗口中的 SQL Server 名称，然后单击属性。（对于 SQL Server 6.5 版，单击配置）。单击安全选项，然后单击标准和 Windows。（对于 SQL Server 6.5 版，单击标准）。如果您在 Microsoft Internet Information Server (IIS) 4.0 下运行，该项目的密码同步选项将被关闭。

[https://support.microsoft.com/en-in/kb/306586](https://support.microsoft.com/en-in/kb/306586)

# mysql - 具有多个左外连接的 Mysql 案例

> ID：11413641
> 
> 赞同：2
> 
> 时间：2012-07-10T12:47:21.950
> 
> 标签：mysql, sql

我正在尝试以下想法。我正在尝试在单个查询中构建一个后备系统。以下是一些背景信息：

```
posts_table
id, timestamp

posts_content_table
id, post_id, language_id, title, description 
```

这里的目标是查询posts_table，然后在同一个查询中，使用后备系统加入posts_content_table。因此，如果我使用不存在的 language_id 搜索帖子内容，它应该能够回退到包含内容的 language_id。它应该允许多级后备。

例子：

```
SELECT p.id FROM posts_table AS p 

LEFT OUTER JOIN posts_content_table AS pc ON (p.id=pc.post_id AND pc.language_id=1)
LEFT OUTER JOIN posts_content_table AS pc2 ON (p.id=pc2.post_id AND pc2.language_id=2)
LEFT OUTER JOIN posts_content_table AS pc3 ON (p.id=pc3.post_id AND pc3.language_id=3) 
```

自然会发生的是当它返回不为空的数据时，该数据应用作最终结果。所以这让我想到了案例。我将如何实施 CASES 以这种方式工作？以下就足够了吗？

```
SELECT p.id, CASE title
WHEN pc.title is Null THEN pc2.title
WHEN pc2.title is Null THEN ps3.title
WHEN pc3.title is Null THEN '-'
END
FROM posts_table AS p 

LEFT OUTER JOIN posts_content_table AS pc ON (p.id=pc.post_id AND pc.language_id=1)
LEFT OUTER JOIN posts_content_table AS pc ON (p.id=pc.post_id AND pc.language_id=2)
LEFT OUTER JOIN posts_content_table AS pc ON (p.id=pc.post_id AND pc.language_id=3) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T12:51:09.360

这就是 的目的[`COALESCE()`](http://dev.mysql.com/doc/refman/5.0/en/comparison-operators.html#function_coalesce)，它返回其参数的第一个非空值：

```
SELECT 
  p.id, 
  COALESCE(pc.title, pc2.title, pc3.title, '-') AS title
FROM posts_table AS p 
LEFT OUTER JOIN posts_content_table AS pc ON (p.id=pc.post_id AND pc.language_id=1)
LEFT OUTER JOIN posts_content_table AS pc2 ON (p.id=pc2.post_id AND pc2.language_id=2)
LEFT OUTER JOIN posts_content_table AS pc3 ON (p.id=pc3.post_id AND pc3.language_id=3) 
```

（注意：我修复了你的表别名 - 它们都是`pc`，我假设你的意思是别名为`pc, pc2, pc3`）

# javascript - 按降序排序数字，不带 0

> ID：11413648
> 
> 赞同：1
> 
> 时间：2012-07-10T12:47:56.103
> 
> 标签：javascript, jquery

我需要按降序排列数字，但是当它达到 0 时，数字应该变成 9..

例如，假设`num`为 2，则顺序应为`2, 1, 9, 8, 7, 6, 5, 4, 3`

```
var num = 2;
$(function() {
        $(".one").html(num);
        $(".two").html((num-1)%9);
        $(".three").html((num-2)%9);
        $(".four").html((num-3)%9);
        $(".five").html((num-4)%9);
        $(".six").html((num-5)%9);
        $(".seven").html((num-6)%9);
        $(".eight").html((num-7)%9);
        $(".nine").html((num-8)%9);
});​ 
```

但是在代码中有0和负数，我该如何克服呢？

[http://jsfiddle.net/yqGV7/](http://jsfiddle.net/yqGV7/)

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T12:53:20.777

试试这个：

```
var num = 3;
$(function() {
    $('span').each(function(i){
        num--;
        if (num == 0) {
           num = 9;
        }
        $(this).text(num)
    })
}); 
```

[演示](http://jsfiddle.net/yqGV7/4/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T12:55:09.737

不是最干净的代码，但会做你所说的：

```
var num = 2;
num = num + 9;
$(function() {
    $(".one").html(num % 9 || 9);
    $(".two").html((num-1)%9 || 9);
    $(".three").html((num-2)%9 || 9);
    $(".four").html((num-3)%9 || 9);
    $(".five").html((num-4)%9 || 9);
    $(".six").html((num-5)%9 || 9);
    $(".seven").html((num-6)%9 || 9);
    $(".eight").html((num-7)%9 || 9);
    $(".nine").html((num-8)%9 || 9);
});​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T12:58:16.260

清洁器：

```
var num = 2;
$("span").each(function(idx) {
    $(this).text(((num - idx) % 9 + 9) % 9 || 9);
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-10T13:16:35.300

```
var num = 2;
var max = 9;
$(".one, .two, .three, .four, .five, .six, .seven, .eight, .nine").each(function(i,e){
  if(num>i) { 
    $(e).html(num-i);
  } else { 
    $(e).html(max-(i-num));
  } 
}); 
```

这是小提琴：http: [//jsfiddle.net/yqGV7/6/](http://jsfiddle.net/yqGV7/6/)

# asp.net - SignalR：VB.net 中的持久连接示例

> ID：11413650
> 
> 赞同：1
> 
> 时间：2012-07-10T12:47:58.153
> 
> 标签：asp.net, vb.net, signalr

我试图重建我在 VB.net 的 Github 上找到的[C# Persistent Connection Example](https://github.com/SignalR/SignalR/wiki/PersistentConnection)，但我无法让它工作。

这就是我所做的：

## 1) 在新的 VB 类中创建一个新的端点

```
Imports SignalR

Imports System.Threading.Tasks

Public Class MyEndPoint

Inherits PersistentConnection

Protected Overrides Function OnConnectedAsync(request As IRequest, connectionId As   String) As System.Threading.Tasks.Task

Return Connection.Broadcast("Connection " + connectionId + " connected")

End Function

End Class 
```

## 2) 将路由添加到 global.asax 文件中

```
Public Class Global_asax
Inherits System.Web.HttpApplication

Sub Application_Start(ByVal sender As Object, ByVal e As EventArgs)

RouteTable.Routes.MapConnection(Of MyEndPoint)("echo", "echo/{*operation}")

End Sub

End Class 
```

我有以下调试信息：

> 'SignalR.RouteExtensions' 中定义的扩展方法'Public Function MapConnection(name As String, url As String, type As System.Type) As System.Web.Routing.RouteBase' 不是通用的（或没有自由类型参数）等不能有类型参数。

知道如何重写这行代码以使其正常工作吗？

```
RouteTable.Routes.MapConnection(Of MyEndPoint)("echo", "echo/{*operation}") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T04:28:26.793

通过使用 MapConnection 扩展方法的非泛型重载，我能够使代码正常工作：

```
RouteTable.Routes.MapConnection("echo", "echo/{*operation}", GetType(MyEndpoint)) 
```

希望这会让你继续前进。

# selenium-ide - 如何在 Selenium IDE 中编写 gotoif (i > -2 && i < 100)？

> ID：11413653
> 
> 赞同：0
> 
> 时间：2012-07-10T12:48:02.363
> 
> 标签：selenium-ide

我尝试了以下方法，但不幸的是它不起作用。

```
<tr>
    <td>gotoIf</td>
    <td>${lnn}&gt;-2 &amp;&amp; ${lnn}&lt;100</td>
    <td>label111</td>
</tr> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T14:05:41.983

```
store  |  10  |  i
gotoIf | storedVars['i'] > -2 && storedVars['i'] <100  |  true
getEval| alert("Condition Fails")
gotolabel | finish
label  |  true
getEval  | alert("Condition Pass")
label  | finish 
```

您可以为 i 传递任何值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T13:38:33.150

使用以下代码并让我知道您是否仍然收到相同的错误消息？

```
- Created one JScript file ith following content.

var searchValue=new Array("-1","-2","500","300","20","100","12");

store | 0 | looptimes
while | storedVars.looptimes <= 6   
storeEval | searchValue[storedVars.looptimes] | search
open | http://www.google.co.in/     
waitForText | id=gbqfba | Google Search
waitForText | id=hplogo | India
gotoIf | storedVars['search'] > -2 && storedVars['search'] <100 | labelforthis
getEval | alert("Value is not greater than -2 and less than 100.")  
label | labelforthis
type | id=gbqfq | ${search}
click | id=gbqfb    
store | javascript{storedVars.looptimes++;}     
endWhile 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-29T10:36:58.103

```
gotoIf | storedVars['search'] > -2 && storedVars['search'] <100 | labelforthis 
```

可以替换为

```
gotoIf | -2 < storedVars['search'] <100 | labelforthis 
```

# android - 在 Layout 或 FlipperView 上设置 GestureListener

> ID：11413656
> 
> 赞同：1
> 
> 时间：2012-07-10T12:48:06.760
> 
> 标签：android

如何将手势侦听器设置为仅线性布局或翻转视图？因为我有一个翻转的 FlipperView，但我不希望它在我在屏幕的任何部分滑动/滑动时翻转，我只想在布局或 FlipperView 的一部分上滑动/滑动时执行翻转。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T14:29:23.300

// 你可以使用 onTouch Listner 代替 Gesture

```
yourLayout.setOnTouchListener(new OnTouchListener() {

    @Override
    public boolean onTouch(View v, MotionEvent event) {

   Log.e("HIGHT CLICk!!"+ event.getY(), "-----------"+event.getX());

    if((26<event.getX() && event.getX()<120) && (25<event.getY()&&event.getY()<120)){

//do your actions here
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-31T06:41:51.370

Padma Kumar 的回答是正确的。我用自动翻转和飞行手势制作了一个自定义 FlippView。[ViewFlipper](https://github.com/xinanadu/ViewFlipper)，我想分享一下。

# python - 从 Python 2.7 读取 .mpp 文件

> ID：11413657
> 
> 赞同：4
> 
> 时间：2012-07-10T12:48:12.640
> 
> 标签：python, ms-project

我需要从 Python 2.7 上运行的 Python 应用程序中读取 Microsoft 项目计划（.mpp 文件）。

没有在网络上获得任何相同的资源或指针。

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T13:05:42.720

1.  您需要安装[pywin3](http://sourceforge.net/projects/pywin32/ "适用于 Windows 的 Python 扩展")（用于 Windows 扩展的 Python）。
2.  您可以对 .mpp 文件进行操作。

例子：

```
import win32com.client

doc = 'C:\\Project1.mpp'
try:
  mpp = win32com.client.Dispatch("MSProject.Application")
  mpp.Visible = 1
  try:
    mpp.FileOpen(doc)
    proj = mpp.ActiveProject
    print proj.BuiltinDocumentProperties(11), ",", proj.BuiltinDocumentProperties(12)
  except Exception, e:
    print "Error", e
  mpp.FileSave()
  mpp.Quit()
except Exception, e:
  print "Error opening file",e 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T00:42:54.473

尽管您需要使用基于[JVM](http://mpxj.sf.net)的 Python（例如 Jython）来处理 Java 版本的库，或者需要使用基于 CLR 的 Python（例如 IronPython 或 Python .Net) 使用.Net 版本的库，或者您需要使用桥接库（例如JPype）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-09-04T06:05:31.633

[Aspose.Tasks Cloud 的 Python 包](https://products.aspose.cloud/tasks/python)无需任何依赖即可操作 MS Project 和 Oracle Primavera 文件。这是一个付费 API，但免费试用计划每月提供 150 次 API 调用。

PS：我在 Aspose 担任支持开发人员。

# c++ - 减少 C++（或 x-treme x-macros）中的代码重复

> ID：11413663
> 
> 赞同：5
> 
> 时间：2012-07-10T12:48:37.060
> 
> 标签：c++, c-preprocessor, x-macros

我正在使用 x-macros 来减少重复量和代码重复，同时为游戏[Bitfighter](http://bitfighter.org)实现 Lua 接口。以下代码工作正常：

```
 //                            Fn name     Valid param profiles  Profile count                           
#  define TELEPORTER_LUA_METHOD_TABLE \
      TELEPORTER_LUA_METHOD_ITEM(addDest,    ARRAYDEF({{ PT,  END }}), 1 ) \
      TELEPORTER_LUA_METHOD_ITEM(delDest,    ARRAYDEF({{ INT, END }}), 1 ) \
      TELEPORTER_LUA_METHOD_ITEM(clearDests, ARRAYDEF({{      END }}), 1 ) \

// BLOCK A Start
const luaL_reg Teleporter::luaMethods[] =
{
#  define TELEPORTER_LUA_METHOD_ITEM(name, b, c) { #name, luaW_doMethod<Teleporter, &Teleporter::name > },
      TELEPORTER_LUA_METHOD_TABLE
#  undef TELEPORTER_LUA_METHOD_ITEM
   { NULL, NULL }
};
// BLOCK A End

  /* Generates the following:
  const luaL_reg Teleporter::luaMethods[] =
  {
       { "addDest", luaW_doMethod<Teleporter, &Teleporter::addDest > }
       { "delDest", luaW_doMethod<Teleporter, &Teleporter::delDest > }
       { "clearDests", luaW_doMethod<Teleporter, &Teleporter::clearDests > }
       { NULL, NULL }
  };
  */

// BLOCK B Start
const LuaFunctionProfile Teleporter::functionArgs[] =
{
#  define TELEPORTER_LUA_METHOD_ITEM(name, profiles, profileCount) { #name, profiles, profileCount },
      TELEPORTER_LUA_METHOD_TABLE
#  undef TELEPORTER_LUA_METHOD_ITEM
   { NULL, { }, 0 }
};
// BLOCK B End

  /* Generates the following:
  const LuaFunctionProfile Teleporter::functionArgs[] =
  {
     { "addDest",    {{ PT,  END }}, 1 }
     { "delDest",    {{ INT, END }}, 1 }
     { "clearDests", {{      END }}, 1 }
     { NULL, { }, 0 }
  };
  */

#undef TELEPORTER_LUA_METHOD_TABLE 
```

到现在为止还挺好。

除了我在几十门课上做的事情基本相同。我真正想做的是在每个类中定义方法表（可以称为任何东西），然后定义两个可以像这样调用的宏：

```
GENERATE_LUA_METHODS(Teleporter, TELEPORTER_LUA_METHOD_TABLE)
GENERATE_FUNCTION_PROFILE(Teleporter, TELEPORTER_LUA_METHOD_TABLE) 
```

避免上面所有在块 A 和 B 中重复的代码。显而易见的方法是使用嵌套宏，但不幸的是，这是非法的。

有没有更好的办法？

* * *

解决方案

* * *

当我发布这个问题时，我很确定答案将是“无法完成”。相反，我有两种方法，其中一种正是我正在寻找的。还对宏的陷阱（有很多）进行了很好的讨论，并提出了一些替代方法。我根据公认的答案开发的实现是干净且易于理解的，脏宏的东西很容易看不到。

在某处的隐蔽洞中：

```
#define ARRAYDEF(...) __VA_ARGS__   // Don't confuse the preprocessor with array defs

////////////////////////////////////////
////////////////////////////////////////
//
// Some ugly macro defs that will make our Lua classes sleek and beautiful
//
////////////////////////////////////////
////////////////////////////////////////
//
// See discussion of this code here:
// http://stackoverflow.com/questions/11413663/reducing-code-repetition-in-c
//
// Start with a definition like the following:
// #define LUA_METHODS(CLASS, METHOD) \
//    METHOD(CLASS, addDest,    ARRAYDEF({{ PT,  END }}), 1 ) \
//    METHOD(CLASS, delDest,    ARRAYDEF({{ INT, END }}), 1 ) \
//    METHOD(CLASS, clearDests, ARRAYDEF({{      END }}), 1 ) \
//

#define LUA_METHOD_ITEM(class_, name, b, c) \
  { #name, luaW_doMethod<class_, &class_::name > },

#define GENERATE_LUA_METHODS_TABLE(class_, table_) \
  const luaL_reg class_::luaMethods[] =            \
  {                                                \
    table_(class_, LUA_METHOD_ITEM)                \
    { NULL, NULL }                                 \
  }

// Generates something like the following:
// const luaL_reg Teleporter::luaMethods[] =
// {
//       { "addDest",    luaW_doMethod<Teleporter, &Teleporter::addDest >    }
//       { "delDest",    luaW_doMethod<Teleporter, &Teleporter::delDest >    }
//       { "clearDests", luaW_doMethod<Teleporter, &Teleporter::clearDests > }
//       { NULL, NULL }
// };

////////////////////////////////////////

#define LUA_FUNARGS_ITEM(class_, name, profiles, profileCount) \
  { #name, profiles, profileCount },

#define GENERATE_LUA_FUNARGS_TABLE(class_, table_)  \
  const LuaFunctionProfile class_::functionArgs[] = \
  {                                                 \
    table_(class_, LUA_FUNARGS_ITEM)                \
    { NULL, { }, 0 }                                \
  }

// Generates something like the following:
// const LuaFunctionProfile Teleporter::functionArgs[] =
// {
//    { "addDest",    {{ PT,  END }}, 1 }
//    { "delDest",    {{ INT, END }}, 1 }
//    { "clearDests", {{      END }}, 1 }
//    { NULL, { }, 0 }
// };

////////////////////////////////////////
//////////////////////////////////////// 
```

在每个类文件中：

```
//               Fn name     Param profiles       Profile count                           
#define LUA_METHODS(CLASS, METHOD) \
   METHOD(CLASS, addDest,    ARRAYDEF({{ PT,  END }}), 1 ) \
   METHOD(CLASS, delDest,    ARRAYDEF({{ INT, END }}), 1 ) \
   METHOD(CLASS, clearDests, ARRAYDEF({{      END }}), 1 ) \

GENERATE_LUA_METHODS_TABLE(Teleporter, LUA_METHODS);
GENERATE_LUA_FUNARGS_TABLE(Teleporter, LUA_METHODS);

#undef LUA_METHODS 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T14:09:56.670

函数式方法可能会解决您的许多问题，但您应该意识到，大量使用预处理器会导致代码难以调试。每当生成的代码中出现语法错误时，您一定会花费大量时间来格式化代码（并且当您的宏使用充分增长时，您一定会遇到这种情况）；当你需要使用 gdb 或类似的东西时，它也会影响你的心情。

以下显然只是一个草图，给你一个想法。

```
#  define TELEPORTER_LUA_METHOD_TABLE(class_, item) \
      item(class_, addDest,    ARRAYDEF({{ PT,  END }}), 1 ) \
      item(class_, delDest,    ARRAYDEF({{ INT, END }}), 1 ) \
      item(class_, clearDests, ARRAYDEF({{      END }}), 1 ) \

#  define LUA_METHOD_ITEM(class_, name, b, c) \
  { #name, luaW_doMethod<class_, &class_::name > },

#  define LUA_FUNARGS_ITEM(class_, name, profiles, profileCount) \
  { #name, profiles, profileCount },

#define LUA_METHODS_TABLE(class_, table) \
  const luaL_reg class_::luaMethods[] = \
  { \
    table(class_, LUA_METHOD_ITEM) \
    { NULL, NULL } \
  };

#define LUA_FUNARGS_TABLE(class_, table) \
  const LuaFunctionProfile class_::functionArgs[] = \
  { \
    table(class_, LUA_FUNARGS_ITEM) \
    { NULL, { }, 0 } \
  };

LUA_METHODS_TABLE(Teleporter, TELEPORTER_LUA_METHOD_TABLE)

LUA_FUNARGS_TABLE(Teleporter, TELEPORTER_LUA_METHOD_TABLE)

#undef TELEPORTER_LUA_METHOD_TABLE 
```

**编辑**以从评论中回答 Watusimoto 的问题。

Watusimoto 提出了这样的建议：

```
#define LUA_METHODS_TABLE(class_) \
  const luaL_reg class_::luaMethods[] = \
  { \
    LUA_METHOD_TABLE(class_, LUA_METHOD_ITEM) \
    { NULL, NULL } \
  };

#define LUA_FUNARGS_TABLE(class_, table) \
  const LuaFunctionProfile class_::functionArgs[] = \
  { \
    LUA_METHOD_TABLE(class_, LUA_FUNARGS_ITEM) \
    { NULL, { }, 0 } \
  };

#ifdef LUA_METHOD_TABLE
# undef LUA_METHOD_TABLE
#endif

#  define LUA_METHOD_TABLE(class_, item) \
      ... class-specific definition ...

LUA_METHODS_TABLE(Teleporter)
LUA_FUNARGS_TABLE(Teleporter) 
```

这样做的缺点是不清楚 LUA_METHOD_TABLE 与后面的两个宏调用有何关系。就好像 sprintf(3) 没有接受参数，而是期望特定名称的全局变量中的数据。从可理解性的角度来看，任何一段代码最好明确说明它的直接输入、它工作的东西以及它的用途之间的不同之处。但是全局表宏在可组合性方面也失败了：全局宏排除了一次性生成多个类定义，例如。与[BPP](http://www.boost.org/doc/libs/1_50_0/libs/preprocessor/doc/index.html)或类似的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T13:31:05.597

这是一些相当极端的预处理器骇客，但您可以使用几个不同的文件来做到这一点。

传送器.cpp：

```
#define LMT_CLASS_NAME Teleporter
#define LMT_TABLE_FILE "Teleporter.lmt"
#include "lua_method_table.h" 
```

lua_method_table.h：

```
#define LMT_METHOD_ITEM(name, b, c) { #name, luaW_doMethod<LMT_CLASS_NAME, &LMT_CLASS_NAME::name > },

const luaL_reg LMT_CLASS_NAME::luaMethods[] = 
    #include LMT_TABLE_FILE
    { NULL, NULL }
};

#undef LMT_METHOD_ITEM

#define LMT_METHOD_ITEM(name, profiles, profileCount) { #name, profiles, profileCount },

const LuaFunctionProfile LMT_CLASS_NAME::functionArgs[] =
{
    #include LMT_TABLE_FILE
    { NULL, { }, 0 }
}; 

#undef LMT_METHOD_ITEM 
```

最后是teleporter.lmt：

```
LMT_METHOD_ITEM(addDest,    ARRAYDEF({{ PT,  END }}), 1 )
LMT_METHOD_ITEM(delDest,    ARRAYDEF({{ INT, END }}), 1 ) 
LMT_METHOD_ITEM(clearDests, ARRAYDEF({{      END }}), 1 ) 
```

不是使用宏来定义方法表，而是在一个文件中列出，`teleporter.lmt`，该文件包含两次不同的定义`LMT_METHOD_ITEM`。那里没有标题保护，因此可以根据需要多次包含它。如果你愿意，你可以分成`lua_method_table.h`两个文件来分别处理这两个部分。只需从您的 CPP 文件中包含它们。

# java - Java - XMLGregorianCalendar 异常

> ID：11413670
> 
> 赞同：5
> 
> 时间：2012-07-10T12:49:03.920
> 
> 标签：java, xml, eclipse, gregorian-calendar

我正在开发一个以 XML 形式来回调用的 Web 服务程序。然而，我的问题不在于那个。当我在我的机器上本地（在 Eclipse 中）运行它时，它似乎可以工作。但是，当我的同事运行它/如果我尝试在服务器上运行它时，他甚至会在调用 Web 服务之前收到此异常：

ClientMain.java java.lang.IllegalArgumentException 中的异常 #6：2012-07-09T08:19:44-0400

有谁知道为什么它会在一台机器上而不是另一台机器上进行争论？构建不应该是问题，因为我在拇指驱动器上复制了整个 Eclipse 工作区（因此所有关联的 jar 和构建路径都应该保留）。就服务器运行而言，我将整个程序导出为可运行的 jar（运行 Eclipse Indigo）并遇到类似问题。

我会很感激任何见解！

堆栈跟踪/输出：

```
java.lang.IllegalArgumentException: 2012-07-09T09:19:42-0400
      at com.sun.org.apache.xerces.internal.jaxp.datatype.XMLGregorianCalendarImpl$Parser.skip(Unknown Source)
      at com.sun.org.apache.xerces.internal.jaxp.datatype.XMLGregorianCalendarImpl$Parser.parse(Unknown Source)
      at com.sun.org.apache.xerces.internal.jaxp.datatype.XMLGregorianCalendarImpl.<init>(Unknown Source)
      at com.sun.org.apache.xerces.internal.jaxp.datatype.DatatypeFactoryImpl.newXMLGregorianCalendar(Unknown Source)
      at com.travelport.worldspanimageserver.client.ClientMain.requestRun(ClientMain.java:231)******************************************************
Running by Yesterday's Date ...
2012-07-09T09:19:42-0400
Current date being used is 2012-07-09T09:19:42-0400
Exception #6 in ClientMain.java java.lang.IllegalArgumentException: 2012-07-09T09:19:42-0400

      at com.travelport.worldspanimageserver.client.ClientMain.runTypeCheck(ClientMain.java:161)
      at com.travelport.worldspanimageserver.client.ClientMain.main(ClientMain.java:81)
Exception #13 in ClientMain.java java.lang.NullPointerException 
```

导致异常的方法：

```
 import java.text.DateFormat;
    import java.text.SimpleDateFormat;
    import java.util.Calendar;
    import java.util.Date;
    import java.util.GregorianCalendar;
    import java.util.List;
    import java.util.Properties;
    import java.util.TimeZone;

    import javax.mail.Message;
    import javax.mail.Session;
    import javax.mail.Transport;
    import javax.mail.internet.InternetAddress;
    import javax.mail.internet.MimeMessage;
    import javax.swing.text.Document;
    import javax.xml.datatype.DatatypeConfigurationException;
    import javax.xml.datatype.DatatypeFactory;
    import javax.xml.datatype.XMLGregorianCalendar;

    import org.joda.time.format.DateTimeFormatter;
    import org.joda.time.format.ISODateTimeFormat;

        public static void requestRun(String strRunType) throws DatatypeConfigurationException{
                //-TODO: determine how date is passed in/retrieved from database        
                 GregorianCalendar c = new GregorianCalendar();

                 XMLGregorianCalendar dateTime = null;

                 if (strRunType == "fullLoad") {dateTime = null;}
                 if (strRunType.substring(0,2).equals("OD")) 
                 { 
                     System.out.println("Current date being used is " + DatatypeFactory.newInstance().newXMLGregorianCalendar(strRunType.substring(2,strRunType.length())));
                     dateTime = DatatypeFactory.newInstance().newXMLGregorianCalendar(strRunType.substring(2,strRunType.length()));
                 }
                 if (strRunType.substring(0,2).equals("DT")) 
                 { 
                     System.out.println("Current date being used is " + strRunType.substring(2,strRunType.length()));           
                     dateTime = DatatypeFactory.newInstance().newXMLGregorianCalendar(strRunType.substring(2,strRunType.length()));
                 }

 String address = "http://vhligssas001:31860/services/ImageViewerService"; /**getServiceURL(sServer);**/

           try
           {
              ArrayList<PropertyType> propertyIdList = null;                                         
              ArrayList tempList = null;

               if (strRunType.equals("properties"))
               {
                  propertyIdList = getPropertiesFromFile(); //to fix later               
               }
               else
               {
                  propertyIdList = initialCall(dateTime, propertyIdList, address);
               }

               secondCall(propertyIdList, address);

           }  
           catch(Exception e)
           {
              System.out.println("Exception #5 in ClientMain.java " + e);
              try
              {
                 postMail("Exception #5 in ClientMain.java " + e);
              }
              catch (Exception e1)
              {
                  e1.printStackTrace();
              }
              System.exit(16);
           }  
       }  
       catch(Exception e)
       {
          System.out.println("Exception #6 in ClientMain.java " + e);
          try
          {
             postMail("Exception #6 in ClientMain.java " + e);
                 e.printStackTrace(); //added

          }
          catch (Exception e1)
          {
             e1.printStackTrace();
          }
          System.exit(16);
       }        
    } 
```

主类：

```
 public static void main(String args[]) throws Exception 
        {
            String sRunType = new String("");
         try
            {    
              File fPropertiesToLoad = new File("runType.txt");
              BufferedReader in = null;
              String strRunType = new String("");

               if (!fPropertiesToLoad.exists())
               {         
                  System.out.println("******************************************************");
                  System.out.println("Exception #1 - Run Type file does not exist");
                  System.out.println("******************************************************");
                  postMail("Exception #1 - Run Type file does not exist");
                  System.exit(16);
               }           
               else
               {
                   in = new BufferedReader(new FileReader("runType.txt"));   
                   if ((strRunType = in.readLine()) != null)
                   {
                       sRunType = strRunType.trim();
                   }
                   in.close();     
                   runTypeCheck(sRunType);
               }
            }        
            catch (Exception e)
            {
               System.out.println("Exception #2 in ClientMain.java " + e);
               postMail("Exception #2 in ClientMain.java " + e);
               System.exit(16);
            }
        } 
```

运行类型检查：

```
 public static void runTypeCheck(String sRunType)
        {
            try
            {
             //Hard-coded in "yesterday" as the date
             sRunType = "DT";

             System.out.println("******************************************************");
             DateTimeFormatter parser2 = ISODateTimeFormat.dateTimeNoMillis();

             if (sRunType.equals("DT")) 
             {
                 System.out.println("Running by Yesterday's Date ...");
                 Calendar cal = Calendar.getInstance();
                 cal.add(Calendar.DATE, -1);
                 DateFormat dateFormat = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ssZ");
                 sRunType =  dateFormat.format(cal.getTime());
                 System.out.println(sRunType);
                 sRunType = sRunType.replaceAll("-0500", "-05:00");
                 sRunType = "DT" + sRunType;
                 requestRun(sRunType);
             }
System.out.println("******************************************************");

       }
       catch(Exception e)
       {
           System.out.println("Exception #4 in ClientMain.java " + e);
           try
           {
              postMail("Exception #4 in ClientMain.java " + e);
           }
           catch (Exception e1)
           {
              e1.printStackTrace();
           }
           System.exit(16);
        }  
    } 
```

仅输出：

```
******************************************************

Running by Yesterday's Date ...

2012-07-09T08:19:44-0400

Current date being used is 2012-07-09T08:19:44-0400

Exception #6 in ClientMain.java java.lang.IllegalArgumentException: 2012-07-09T08:19:44-0400 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T13:49:41.103

问题是您从中获得的“日期”`strRunType.substring(2,strRunType.length())`不是有效`lexicalRepresentation`的日期。

您需要正确格式化输入值才能解析为`XMLGregorianCalendar`对象。

错误是您在日期中缺少`:`a `-04:00`。

由于代码，您一定已经知道了`sRunType = sRunType.replaceAll("-0500", "-05:00");`……除了您使用的是 5 而不是 4？

# css - 在 Twitter Bootstrap 中的导航栏下方开始背景图片

> ID：11413671
> 
> 赞同：5
> 
> 时间：2012-07-10T12:49:05.840
> 
> 标签：css, twitter-bootstrap, position, background-image

相对 CSS/bootstrap 新手。

我花了一段时间尝试使用[this CSS Tricks page](http://css-tricks.com/perfect-full-page-background-image/)上的第一种方法获取背景图像以与Twitter Bootstrap集成。我最终使用“body”作为 CSS 标记，因为 HTML 只是……不起作用。虽然一切正常，但图像从顶部导航栏“后面”开始，然后向下延伸，因此顶部隐藏在黑色导航栏后面

我尝试使用 margin-top 将背景图像的顶部与导航栏的底部对齐，但这也会将容器和所有其他内容也向下移动（显然，因为我在全身上放置了边距页）。

我还尝试为背景图像（backgroundimage）创建一个独特的类，并在body标签内立即放置一个div，并在html关闭标签之前关闭div，但再次调整它会调整所有页面内容，而不是只是背景图像。

将背景图像的 div 移动到导航栏下方会将其限制在活动的“容器”空间中，因此背景图像现在仅存在于屏幕的中间三分之一处。

```
body { 
    background: url(../images/height-chart500w.png) repeat-y fixed; 
    -webkit-background-size: cover;
    -moz-background-size: cover;
    -o-background-size: cover;
    background-size: 15%;
} 
```

鉴于背景图像的大小调整属性，仅更改图像本身以在顶部创建空间的 hacky 解决方案显然行不通。如何在导航栏下方对背景图像进行 CSS 处理？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-10T12:54:30.467

使用背景位置。它有两个值：一个用于 x 轴，另一个用于 y 轴。在你的情况下，它会是这样的：

`background-position: 0 Y;`其中 Y 是导航栏的高度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-11-12T11:55:02.840

派对迟到了，但由于这个答案，我的页面可以按我的意愿显示，这是我的 CSS 代码。希望对新手有帮助

```
header.masthead {

  position: relative;
  width: 100%;
  min-height: auto;
  text-align: center;
  color: white;
  background-image: url("../img/testimage5.jpg");
  background-position: center;
  -webkit-background-size: cover;
  -moz-background-size: cover;
  -o-background-size: cover;
  background-size: cover;
}
@media (max-width: 992px) {
  header.masthead {

    position: relative;
    width: 100%;
    height: 100%;
    text-align: center;
    color: white;
    background-image: url("../img/testimage5.jpg");
    background-position: 0 20px;
    background-repeat: no-repeat;
    -webkit-background-size: cover;
    -moz-background-size: cover;
    -o-background-size: cover;
    background-size: 100% 100%;
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T12:52:04.583

我查看了 www.builtwithbootstrap.com 博客中的示例，似乎这个人正在使用这个： [www.1in5photo.com](http://www.1in5photo.com/)

```
body {
position: relative;
padding-top: 20px;
background-color: black;
background-image: url(../img/grid-18px-masked.png);
background-repeat: repeat-x;
background-position: 0 40px;
} 
```

# ios - 后台任务即将到期时的本地通知

> ID：11413672
> 
> 赞同：1
> 
> 时间：2012-07-10T12:49:06.997
> 
> 标签：ios, background, uilocalnotification

当后台任务即将到期时，iOS 应用程序可以安排本地通知吗？基本上，当应用程序使用 NSOperationQueue 进入后台时，我有一些服务器端正在进行下载。
我想要的是在后台任务即将完成时通过本地通知通知用户。以便用户可以将应用程序带到前台以继续继续服务器数据下载
下面是我正在使用的代码，但我没有看到任何本地通知

```
UIBackgroundTaskIdentifier bgTask = [application beginBackgroundTaskWithExpirationHandler: ^{
        dispatch_async(dispatch_get_main_queue(), ^{
           /*TO DO
            prompt the user if they want to continue syncing through push notifications. This will get the user to essentially wake the app so that sync can continue.
             */
            // create the notification and then set it's parameters
            UILocalNotification *beginNotification = [[[UILocalNotification alloc] init] autorelease];
            if (beginNotification) {
                beginNotification.fireDate = [NSDate date];
                beginNotification.timeZone = [NSTimeZone defaultTimeZone];
                beginNotification.repeatInterval = 0;
                beginNotification.alertBody = @"App is about to exit .Please bring app to background to continue dowloading";
                beginNotification.soundName = UILocalNotificationDefaultSoundName;
                // this will schedule the notification to fire at the fire date
                //[app scheduleLocalNotification:notification];
                // this will fire the notification right away, it will still also fire at the date we set
                [application scheduleLocalNotification:beginNotification];
            }

            [application endBackgroundTask:self->bgTask];
            self->bgTask = UIBackgroundTaskInvalid;
        });
    }]; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-17T12:38:26.173

我相信你的代码的问题是`dispatch_async`调用。这是文档中的一些内容：

> **`-beginBackgroundTaskWithExpirationHandler:`**
> (...) 处理程序在主线程上同步调用，因此在通知应用程序时暂时阻止应用程序的挂起。

这意味着您的应用程序在此到期处理程序完成后立即暂停。您在主队列上提交异步块，因为这*实际上是*主队列（请参阅文档），它将稍后*执行*。

**解决方案不是调用`dispatch_async`**，而是直接在这个处理程序中运行该代码。

我看到的另一个问题是，在过期处理程序中通知用户为时已晚，应该在过期之前完成（比如一分钟左右）。`backgroundTimeRemaining`您只需要在达到您的时间间隔后定期检查并显示此警报。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T12:56:07.827

你的代码永远不会被执行，因为你安排你的代码在未来运行，然后你通过`endBackgroundTask:`. 此外，到期处理程序在主线程上调用，因此您可以简单地将代码放在那里并避免这种情况`dispatch_async`和`performSelectorOnMainThread:`foobar.

# php - 如何在 PHP 中获取所有 XML 元素（包括标签内的补充信息）

> ID：11413674
> 
> 赞同：1
> 
> 时间：2012-07-10T12:49:11.577
> 
> 标签：php, xml, xml-parsing

我有以下从外部站点获取的 XML 代码：

```
<source>
  <url>http://externalsite.com</url>
  <widget id="1">
    <title>Title1</title>
  </widget>
  <widget id="2">
    <title>Title2</title>
  </widget>
  <widget id="3">
    <title>Title3</title>
  </widget>
  <widget id="4">
    <title>Title4</title>
  </widget>
  <widget id="5">
    <title>Title5</title>
  </widget>
</source> 
```

**我将如何获得PHP 中每个小部件的`id`和？`title`**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T12:56:05.277

这[对我有用](http://viper-7.com/3tNgkP)：

```
$xml = simplexml_load_string( $xml);
foreach( $xml->xpath( '//widget') as $el) {
    $attributes = $el->attributes();
    $children = $el->children(); // OR: $el->xpath('title'); if children vary
    echo $attributes['id'] . ' ' . $children[0] . "\n";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T12:54:17.343

您可以使用[SimpleXML](http://php.net/manual/en/book.simplexml.php)和[`xpath()`](http://www.php.net/manual/en/simplexmlelement.xpath.php).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T12:53:22.727

查看[http://www.php.net/manual/en/simplexml.examples-basic.php](http://www.php.net/manual/en/simplexml.examples-basic.php)了解更多信息。

# ios - 我可以拒绝我的应用并发出一条警告以上传到 iOS 应用商店吗？

> ID：11413677
> 
> 赞同：0
> 
> 时间：2012-07-10T12:49:42.070
> 
> 标签：ios, upload, app-store

在我的 iOS 项目中，我有一个关于 Flite Text To Speech 的警告。

将我的应用程序上传到 App Store 有什么问题吗？

我可以从评论中被拒绝吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T12:54:47.017

通常，警告不足以让您的应用被拒绝。他们将审查您的应用程序并完成它的步伐。如果该警告导致崩溃或可用性问题，您可能会因此而被拒绝。

发布您的应用程序时不发出警告通常是一个很好的规则，但这绝不是一项要求。

# iphone - Twitter 功能，如涂鸦跳跃/寺庙奔跑

> ID：11413678
> 
> 赞同：0
> 
> 时间：2012-07-10T12:49:43.110
> 
> 标签：iphone, xcode, twitter

我正在制作一个 iphone 游戏，一切都很顺利，我现在正在完成它。我想在我的应用程序中添加一个 Twitter 功能，我在 ios 5 上得到了这个功能。我还希望这个功能在较低的 ios 版本上工作。我注意到应用程序涂鸦跳跃和寺庙奔跑有一个功能，你可以在比赛结束后点击，在推特上发布你的分数。我还想在其中使用 twitter 客户端来实现该警报。有谁知道如何做到这一点，或者他们使用什么api？

提前致谢，

乔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T14:46:02.633

ShareKit 将为 Twitter 以及许多其他社交网络完成这项工作。

[https://github.com/ShareKit/ShareKit](https://github.com/ShareKit/ShareKit)

# c# - 静态变量干扰ASP.net？

> ID：11413679
> 
> 赞同：6
> 
> 时间：2012-07-10T12:49:43.703
> 
> 标签：c#, asp.net

我对 Web 开发和 ASP.net 很陌生，但我想知道以下问题：

如果我在网页上声明一个静态变量并且多个用户同时访问同一页面。这个静态变量是每个用户独有的还是会干扰不同的用户？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-10T12:51:32.153

是的，它会干扰用户之间以及单个用户的并发请求之间。除非您非常确定自己在做什么，否则请避免在 ASP.NET（和大多数其他开发）中使用静态字段。

考虑将会话状态用于您在此处所做的事情，或者作为请求本身的一部分（表单数据、cookie 等）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T12:51:55.367

> 这个静态变量对每个用户都是唯一的吗

不。

> 它会干扰不同的用户吗？

是的。

您可能想要使用其他一些持久性介质，例如会话状态、[缓存](http://msdn.microsoft.com/en-us/library/xsbfdd8c%28v=vs.100%29.aspx)等。

有些人`[ThreadStatic]`在 ASP.NET 中的字段上使用该属性，以便它对每个用户都是唯一的，但这是*危险*的，不应该这样做。不惜一切代价避免这种情况。我只在其他人推荐它的情况下提出它。

# ios - ios 2个包含相同符号的不同第3方框架

> ID：11413689
> 
> 赞同：1
> 
> 时间：2012-07-10T12:50:41.207
> 
> 标签：ios, frameworks, duplicates, symbols

在我的项目中，我使用了两个 3rd 方框架，它们都在内部使用`SBJSONParser`，并且在构建`ld: duplicate symbol _OBJC_CLASS_$_SBJsonParser`错误时会引发错误。

**注意：**我无权访问这两个框架中的任何一个的源代码。

知道如何解决这个问题吗？

# javascript - 使用 JavaScript 拨打电话

> ID：11413692
> 
> 赞同：0
> 
> 时间：2012-07-10T12:50:58.750
> 
> 标签：javascript, mobile

我知道这`<a href="tel:+15555555555">1-555-555-5555</a>`会在手机上启动拨号器，并导致 FF 和 Chrome 尝试在传统计算机上启动默认拨号器；但是，我需要在启动默认行为之前执行一些 JavaScript 以实现一些标记（特别是 dcsMultiTrack）。我尝试了以下方法，但它没有打电话，而是坐着。

```
<a href="tel:+15555555555" class="call_now preventPhone" onclick="trackPhone('SomeEvent', 'SomeTag','tel:+15555555555',this)">1-555-555-5555</a>

function setLocation(nextPage, target) {
    if (target == "_blank") {
        window.open(nextPage);
    }
    else {
        location.href = nextPage;
    }
}
function trackPhone(vPageUrl, vPageTitle, phone, aTag) {
    dcsMultiTrack('DCS.dcsuri', vPageUrl, 'WT.ti', vPageTitle);
    setTimeout("setLocation('" + phone + "', '" + aTag.target + "')", 500);
    return false;
}
$(document).ready(function () {
    $('.preventPhone').click(function (e) {
        e.preventDefault();
    });
}); 
```

编辑：

澄清一下，我正在阻止默认设置，因为电话操作触发得太快以至于 dcsMultiTrack 无法返回其回调，这就是为什么我希望 tel:+... 有一个 JS 等价物。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T12:58:54.083

您不必调用函数 preventDefault()？如果被调用，则不会触发事件的默认动作（在传统计算机上启动默认拨号程序）。见[event.preventDefault()](http://api.jquery.com/event.preventDefault/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T19:42:26.427

当我在寻找 dcsMultiTrack 解决方案时，我偶然发现了这篇文章，我相信我有适合您的解决方案。

首先，动态创建您的标签，以便您以后可以对其进行操作。

```
var myLink = document.createElement('a');
myLink.setAttribute('id','myPhoneLink');
myLink.setAttribute('href','javascript://');
var myTextNode = document.createTextNode('1-555-555-5555');
myLink.appendChild(myTextNode); 
```

基本上，这会创建一个在单击时不执行任何操作的链接。

在您的函数中，您可以更改属性 href 的值：

```
myLink.setAttribute('href','tel:+15555555555'); 
```

现在，您的链接有效。您可以将这一行放在一个单独的函数中，该函数具有如下条件语句：

```
var myCheckFunc = function(){
    if(condition){
      myLink.setAttribute('href','tel:+15555555555');
    }else{
        myCheckFunc();
    } 
```

这样，您的函数会自行调用，直到满足条件，当您准备好更改链接时，它会更改链接的 href。

现在，我有一个关于 webtrends 的问题，如果你能帮我配置管理员，我将不胜感激。

单击横幅时，将调用以下函数

```
 dcsMultiTrack('DCSext.Carousel','Home','WT.ti','Home',
 'WT.pc','Banner;Position','WT.pn_sku',tempPC,'WT.tx_u',
 tempQuantity,'WT.tx_s',tempQuantity); 
```

如何设置报告以在三列报告中显示结果，显示轮播是 HOME、横幅和位置？

# llvm - Cabal：由于 LLVM 无法安装光泽光栅

> ID：11413701
> 
> 赞同：2
> 
> 时间：2012-07-10T12:51:36.527
> 
> 标签：llvm, cabal

`cabal install gloss-raster`输出：

```
Resolving dependencies...
Configuring gloss-raster-1.7.4.3...
Building gloss-raster-1.7.4.3...
Preprocessing library gloss-raster-1.7.4.3...
[1 of 2] Compiling Graphics.Gloss.Raster.Array ( Graphics/Gloss/Raster/Array.hs, dist/build/Graphics/Gloss/Raster/Array.o )
Warning: Couldn't figure out LLVM version!
         Make sure you have installed LLVM
ghc: could not execute: opt-3.0
cabal: Error: some packages failed to install:
gloss-raster-1.7.4.3 failed during the building phase. The exception was:
ExitFailure 1 
```

我已经安装了 LLVM ( `apt-get install llvm`) 及其 Haskell 库 ( `cabal install llvm`)，那么 LLVM 有什么问题？

`sudo cabal install llvm-3.0`我尝试使用我得到的安装特定版本：

```
Resolving dependencies...
cabal: Could not resolve dependencies:
next goal: llvm (user goal)
rejecting: llvm-3.0.1.0/installed-d41..., 3.0.1.0, 3.0.0.0, 0.10.0.1,
0.10.0.0, 0.9.1.2, 0.9.1.1, 0.9.1.0, 0.9.0.1, 0.8.2.0, 0.8.1.0, 0.8.0.2,
0.7.1.2, 0.7.1.1, 0.7.1.0, 0.7.0.1, 0.7.0.0, 0.6.8.0, 0.6.7.0, 0.6.6.0,
0.6.5.0, 0.6.4.0, 0.6.3.0, 0.6.2.0, 0.6.0.3, 0.6.0.2, 0.5.0.1, 0.4.4.2,
0.4.4.1, 0.4.2.0, 0.4.1.0, 0.4.0.3, 0.4.0.1, 0.4.0.0, 0.0.2 (global constraint
requires ==3.0) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T01:15:20.300

您需要安装 LLVM 编译器以便 GHC 可以使用它，但光泽库不需要 Haskell LLVM 库。

如果您的“apt-get install llvm”将 LLVM 优化器安装为“opt”而不是“opt-3.0”，那么您可能需要从 opt -> opt-3.0 手动添加链接“ln -s”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T17:49:46.780

它看起来像gloss-raster 中的错误 - 它无法选择安装在您系统上的 LLVM。我建议在gloss@ouroborus.net 询问

# entity-framework - 启用了级联删除的实体框架 1 对 1

> ID：11413704
> 
> 赞同：1
> 
> 时间：2012-07-10T12:51:50.133
> 
> 标签：entity-framework, entity-framework-4, cascading-deletes

我正在使用 EF 4.3.1 并希望创建一个附件对象并单独保存其二进制数据。因此，我在数据库中创建了两个表：Attachments 和 AttachmentData。这是[屏幕截图](http://cache.hostmyjpg.com/e6d7961668_db.png)或它们的关系。

这是我的课程：

```
public class Attachment
{
    public int Id { get; set; }
    public string Name { get; set; }
    public AttachmentData Content { get; set; }
}

[Table("AttachmentData")]
public class AttachmentData
{
    public int Id { get; set; }
    public byte[] Data { get; set; }
}

public class AttachmentConfig : EntityTypeConfiguration<Attachment>
{
    public AttachmentConfig()
    {
        HasRequired(att => att.Content)
            .WithRequiredPrincipal()
            .WillCascadeOnDelete();

        Property(att => entity.Id)
            .HasDatabaseGeneratedOption(DatabaseGeneratedOption.Identity);

        Property(entity => entity.Name).IsRequired();
    }
} 
```

我们使用存储库模式来访问数据库：

```
public class Repository
{
    private readonly Context _db = new Context(); 

    public Attachment Add(string fileName, byte [] data)
    {
        var att = new Attachment
                      {
                          Name = fileName,
                          Content = new AttachmentData {Data = data}
                      };

        _db.Documents.Add(att);
        _db.SaveChanges();

        return att;
    }

    public void Delete(int id)
    {
        /* Try to find in local context
         * otherwise exception might appear:
         * "An object with the same key already exists in the ObjectStateManager. 
         * The ObjectStateManager cannot track multiple objects with the same key."
         */
        var att = _db.Documents.Local
            .FirstOrDefault(a => a.Id == id) ?? new Attachment {Id = id};

        _db.Entry(att).State = EntityState.Deleted;            
        _db.SaveChanges();            
    }
} 
```

我写了一个简单的测试，看看我是否可以添加和删除附件：

```
public void Can_Add_And_Delete()
{
    const string fileName = "FileName.tst";
    var data = new byte[] {0, 1, 2, 3, 4, 5};

    /*************
    * Works fine *
    *************/
    var cont = new Context();
    var att1 = new Attachment
               {
                   Name = fileName,
                   Content = new AttachmentData {Data = data}
               };

    cont.Documents.Add(att1);
    cont.SaveChanges();

    cont.Documents.Remove(att1);
    cont.SaveChanges();

    /********************** 
    * Throws an exception *
    *********************** 
    * The operation failed: The relationship could not be changed because
    * one or more of the foreign-key properties is non-nullable. When a change 
    * is made to a relationship, the related foreign-key property is set to 
    * a null value. If the foreign-key does not support null values, a new 
    * relationship must be defined, the foreign-key property must be assigned
    * another non-null value, or the unrelated object must be deleted. 
    */

    var repo = new Repository();
    var att2 = repo.Add(fileName, data);
    repo.Delete(att2.Id);
} 
```

从抛出异常的详细描述中可以清楚地看出，问题是由上下文中存在 AttachmentData 实体引起的。但是我认为一旦将 Attachment 状态设置为已删除（因为配置了 1 对 1 关系），上下文将足够智能以删除 AttachmentData。如果不是这样，那么使用 WillCascadeOnDelete() 方法有什么意义呢？是否仅用于正确的数据库关系生成，而 C# 端无法从中获得任何好处？

# c# - 如何将 LINQ 结果绑定到数据网格

> ID：11413705
> 
> 赞同：2
> 
> 时间：2012-07-10T12:51:51.553
> 
> 标签：c#, linq

我将 linq 结果数据绑定到数据网格，但没有任何结果。这是我的代码

```
 List<SearchResult> list = new List<SearchResult>() {
        new SearchResult(){ID=1,Title="Geo Prism 1995 GEO* - ABS #16213899"},
        new SearchResult(){ID=2,Title="Excavator JCB - ECU P/N: 728/35700"},
        new SearchResult(){ID=3,Title="Geo Prism GEO 1995 - ABS #16213899"},
        new SearchResult(){ID=4,Title="JCB Excavator JCB- ECU P/N: 728/35700"},
        new SearchResult(){ID=5,Title="Geo Prism GEO,GEO 1995 - ABS #16213899 GEO"},
        new SearchResult(){ID=6,Title="dog"},
        };

        var to_search = new[] { "Geo", "JCB" }.Select(x => x.ToLower()).ToArray();
        var result = from searchResult in list
                     let title = searchResult.Title.ToLower()
                     let key_string = to_search.FirstOrDefault(ts => title.Contains(ts))
                     orderby key_string == null ? -1 : title.Split(new[] { key_string }, StringSplitOptions.None).Length descending
                     group searchResult by key_string into Group
                     orderby Group.Count() descending
                     select Group;

        dataGridView2.DataSource = result; 
```

当我运行上面的代码 datagrid 什么都没有显示，但我期望 datagrid 应该显示**ID 和 Title**

然后我添加了更多的行

```
List<SearchResult> listFinal = new List<SearchResult>();
foreach (var group in result)
{
     foreach (var item in group)
     {
        listFinal.Add(new SearchResult() { ID = item.ID, Title = item.Title });
     }
 }
 dataGridView2.DataSource = listFinal; 
```

现在 datagrid 正在显示数据。所以我的问题是......是否有任何捷径可以将结果转换为列表，因此我可以通过循环迭代将列表直接绑定到数据网格并创建一个新列表并在绑定之前将其填充。寻求指导。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T12:53:12.073

是的，只需在您的 LINQ 查询上调用[.SelectMany()](http://msdn.microsoft.com/en-us/library/bb534336.aspx)和[.ToList() 即可。](http://msdn.microsoft.com/en-us/library/bb342261.aspx)

```
dataGridView2.DataSource = result.SelectMany(e => e).ToList(); 
```

[或使用适当的构造函数](http://msdn.microsoft.com/en-us/library/fkbw11z0)创建您的列表：

```
dataGridView2.DataSource = new List(result.SelectMany(e => e)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T12:52:54.497

这应该这样做

```
 var result = (from searchResult in list
                         let title = searchResult.Title.ToLower()
                         let key_string = to_search.FirstOrDefault(ts => title.Contains(ts))
                         orderby key_string == null ? -1 : title.Split(new[] { key_string }, StringSplitOptions.None).Length descending
                         group searchResult by key_string into Group
                         orderby Group.Count() descending
                         select Group).ToList(); 
```

# sql - 使用 SQL Server“LIKE”函数从文件路径表中查找文件路径的子文件夹

> ID：11413708
> 
> 赞同：5
> 
> 时间：2012-07-10T12:51:55.950
> 
> 标签：sql, sql-server

我的 SQL Server 数据库表中的一列包含路径（不是文件路径，只是目录路径）。

`LIKE`我目前有一个查询，它使用该函数返回给定文件路径的所有子文件夹；

```
WHERE Path LIKE @FilePath + '%' 
```

在旁注中，我知道这种方法存在问题，因为 LIKE 使用的转义字符都是有效的文件路径字符。我将在完成的查询中正确使用 ESCAPE。

无论如何，回到我的问题。我希望能够修改查询，使其仅返回指定路径的**直接**子文件夹。这并不像在字符串末尾放一个斜杠那么简单，因为显然 % 通配符在解析字符串的正确部分时会吞噬所有内容。

我正在考虑使用 [^] 转义序列，也许做一个排除 \ 字符的搜索，但我没有运气。我试过这个；

```
WHERE Path LIKE @FilePath + '[^\]' 
```

但它不会产生预期的结果，所以我什至不确定我是否正确使用它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T13:24:16.003

这是一种无需 LIKE 的方法：

```
WHERE left(Path, len(@FilePath)) = @FilePath and
      charindex('\', substr(Path, len(@FilePath)+2, 1000)) = 0 
```

（语句的第一部分与“Path like @FilePath + '%'”相同）。

第二部分只是查看字符串并检查@FilePath 之后是否没有反斜杠（可能下一个字符是反斜杠）。

如果你喜欢 LIKE，你可以这样写：

```
where Path like @FilePath + '%' and
      Path not like @FilePath + '%[\]%' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T13:46:50.813

不要为此使用 LIKE。LEFT 和 SUBSTRING 将提供更好的性能，因为您不进行任何通配符搜索，在所有情况下都应尽量避免。

下面的查询将执行此操作并排除完全匹配，因此如果有目录 'C:\Temp\ 它不会显示在结果中，但所有子目录都会显示。

我们正在做的是丢弃所有可能有更多子目录（'\'）的结果，而只使用具有单个子目录的结果。

希望这可以帮助！

```
DECLARE @directory VARCHAR(150);
SET @directory = 'C:\Temp\';

SELECT 
    * 
FROM 
    tblDir
WHERE 
    LEFT(Dir, LEN(@directory)) = @directory
    AND CHARINDEX('\', SUBSTRING(Dir, LEN(@directory) ,LEN(Dir) - LEN(@directory)), 2) = 0
    AND Dir <> @directory 
```

# objective-c - 如何在 facebook ios 中获取特定用户的公共提要

> ID：11413711
> 
> 赞同：1
> 
> 时间：2012-07-10T12:51:59.137
> 
> 标签：objective-c, facebook, facebook-graph-api

我需要获取特定用户的公共 JSON 提要。我成功地使用`access_token`和不使用获取 JSON 提要，`FBConnect`但提要返回整个墙帖；我想要的是获取特定用户的提要说“MuzikGarage”发布的提要。这可能吗？

下面是 json 网址。

[https://graph.facebook.com/MuzikGarage/posts?access_token=APP_ID|APP_SECRET](https://graph.facebook.com/MuzikGarage/posts?access_token=APP_ID|APP_SECRET)

粉丝专页
[http://www.facebook.com/MuzikGarage](http://www.facebook.com/MuzikGarage)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T13:10:12.697

看数据——

```
 "data": [
      {
         "id": "171866742868832_401252956589556",
         "from": {
            "name": "MuzikGarage",
            "category": "Musician/band",
            "id": "171866742868832"
         },
         ...
      },
      {
         "id": "171866742868832_476648515696413",
         "from": {
            "name": "MuzikGarage",
            "category": "Musician/band",
            "id": "171866742868832"
         },
        ...
      },
      {
         "id": "171866742868832_379816898740481",
         "from": {
            "name": "MuzikGarage",
            "category": "Musician/band",
            "id": "171866742868832"
         },
         ...
       }
      ...
      ] 
```

您可以看到，对于每个帖子，都有一个`from`对象，其中包含有关谁发布了该特定消息的详细信息。您可以做的是遍历您获得的所有结果并检查该`data['from']['id']`字段以查看该帖子是否由该页面发布。

# extjs - ExtJS 4.1 TreeStore 中的不同节点类型

> ID：11413724
> 
> 赞同：0
> 
> 时间：2012-07-10T12:52:37.617
> 
> 标签：extjs, extjs4.1

我有一个带有嵌套数据的树数据结构。

树节点和数据节点。就像在文件系统中一样，TreeNodes 是文件夹，DataNodes 是文件。

但是JSON结构是这样的：

```
{
  名称：'根'，
  数据： [
    [a, b, 100, 23],
    [a, b, 100, 23],
    [a, b, 100, 23]
    ...
  ]
  孩子们： [
    {
      名称：'child1'，
      数据： [...]，
      孩子们： [...]
    },
    {
      名称：'child2'，
      数据： [...]，
      孩子们： [...]
    },
    ...
  ]
}

```

我想将子节点解析为 TreeNodes，将数据数组解析为 DataNodes，并在一个 TreeStore 中使用它们。

这可能吗？

ATM 我得到了 TreeNodes，每个 Tree 节点都有一个关联的数据记录，这是一个次优的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T20:39:25.033

我也有类似的情况。您需要做的是创建一个包含两种数据类型（提取重叠属性）的模型类。就树存储而言，它不会区分记录类型，但您可以通过图标自定义树的外观，为每种记录类型赋予不同的外观。但是数据必须相同，例如，两种记录类型的名称属性必须相同。

由于来自服务器响应的 JSON 结构有些奇怪，因此您必须自己解析它并形成树库期望的结构。或者，您需要控制您的服务器端实现并在那里进行调整。

# java - View.getId 和 R.id.viewLabel 返回不同的值

> ID：11413725
> 
> 赞同：0
> 
> 时间：2012-07-10T12:52:38.833
> 
> 标签：java, android

假设我在我的活动中有这样的方法，并将其设置`onClick`为 xml 中不同按钮的字段：

```
public void onButtonPressedFromView(View button) {
   switch(button.getId()) {
   case (R.id.button1) :
      //do something
      break;
   case (R.id.button2) :
      //do something different
      break;
   default :
      //default action
      break;
   }
} 
```

结果是，如果我按下例如 button1，用 获得的 id`button.getId()`总是比用 获得的 id 大 1 `R.id.button1`。这很容易解决，我只是将我的代码更改为

`switch(button.getId() - 1)`

但我不喜欢它，并想了解这两种获取视图id的方式之间的区别。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T13:14:41.947

做了一些测试，我得到了相同的ID

```
 TextView tv= (TextView ) findViewById(R.id.my_textview);

    Log.i("Test.java","ID 1 : " +R.id.my_textview);
    Log.i("Test.java","ID 2 : " +findViewById(R.id.my_textview).getId() );
    Log.i("Test.java","ID 3 : " +tv.getId() );
    tv.setOnClickListener(new OnClickListener() {

        public void onClick(View arg0) {
            Log.i("Test.java","ID 4 : " +arg0.getId() );

        }
    }); 
```

这是我的日志：

```
07-10 15:10:19.906: I/Test.java(3680): ID 1 : 2131165227
07-10 15:10:19.906: I/Test.java(3680): ID 2 : 2131165227
07-10 15:10:19.906: I/Test.java(3680): ID 3 : 2131165227
07-10 15:10:21.386: I/Test.java(3680): ID 4 : 2131165227 
```

尝试使用 onClick 并报告您的发现。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T13:10:24.847

您应该将已知按钮与印刷机进行比较。

```
onCreate(...) {
    ...
   Button myButton1 = (Button)findViewById(R.id.somebutton);
   Button myButton2 =....
}

public void onButtonPressedFromView(View button) {
   switch(button.getId()) {
   case (myButton1.getId()) :
      //do something
      break;
   case (myButton2.getId()) :
      //do something different
      break;
   default :
      //default action
      break;
   }
} 
```

重要的是不要假设 myButton == 按钮。例如，如果您在 ListView 中使用一个按钮，它可能有多个实例，因此只能通过 getId() 属性进行比较。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-14T10:30:48.953

我想我遇到了同样的问题。希望你也一样，我的经验可以解决你的问题。

我遇到了这个问题，因为我错误地将 id 值放在相对布局中。看这个例子，`layout_alignTop`和的值`layout_toRightOf`是错误的。它们不应包含`+`标志。不知道你是不是也这样。但这会导致 id 值混乱。

```
<ImageButton
        android:id="@+id/btn_next"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignTop="@+id/btn_start"
        android:layout_toRightOf="@+id/btn_start"
        android:contentDescription=""
        android:src="@drawable/forward" /> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-05-01T06:05:47.270

有同样的问题。将导入添加到您的类：

导入 com.foo.yourapp.R；它解决了问题。我不知道这种行为的原因。导入 com.foo.yourapp.R；

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-10-08T09:43:34.843

我有同样的问题。将导入添加到您的类：

```
import com.foo.yourapp.R; 
```

它解决了问题。我不知道这种行为的原因。

# ckeditor - 在 CKEditor 中 getSelection() 在 IE 中返回空值

> ID：11413734
> 
> 赞同：2
> 
> 时间：2012-07-10T12:53:05.907
> 
> 标签：ckeditor, selection

我有一个小代码来选择 CKEditor 中的文本。为此，我在 javascript 中使用以下代码。

```
 var docx = editor.document;
        var elementx = docx.getById(id);
        editor.getSelection().selectElement(elementx);
        editor.getSelection().scrollIntoView(true); 
```

它在 Mozilla Firefox 中运行良好。但在 IE9 中它会引发错误，因为 selectElement 不是对象。所以我检查了代码，发现 getSelection() 有一个空值。请帮助我如何解决它。即使在 CKEditorfourms 中，我也尝试了在各个网站上给出的一些答案，但对我没有任何帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-13T21:47:04.433

这是正确的解决方案：

```
var editor = CKEDITOR.instances.editor1;
editor.focus(); // Without this selection will be null on IE.

var element = editor.document.getBody().getLast(),
    selection = editor.getSelection();

selection.selectElement(element); // You have to reuse selection.
selection.scrollIntoView(); 
```

[我在http://ckeditor.com/demo](http://ckeditor.com/demo)上的 Firefox、Chrome 和 IE8 上的控制台上对此进行了测试，并且成功了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T12:37:20.890

这可能会奏效。

```
var docx = editor.document;
var elementx = docx.getById(id);

var resRange = new CKEDITOR.dom.range( editor.document );
resRange.selectNodeContents( elementx );
resRange.collapse();
editor.getSelection().selectRanges( [ resRange ] );
resRange.endContainer.$.scrollIntoView(); 
```

* * *

这可能与 IE9 认为的对象有关。您是否尝试过选择不同的元素类型？

也许抓住元素的父元素会给你一些 IE9 认为是对象的东西，你可以试试这个：

```
var docx = editor.document;
var elementx = docx.getById(id);
var parentx = elementx.getParent();
parentx.scrollIntoView(); 
```

# jena - 使用 Jena 读取 RDF(N-Triple) 时，会抛出“com.hp.hpl.jena.shared.InvalidPropertyURIException”

> ID：11413737
> 
> 赞同：0
> 
> 时间：2012-07-10T12:53:13.327
> 
> 标签：jena, nt

我从 dbpedia 下载了一个 N-Triple 文件，但是当我想将其读入 Jena 模型时，会抛出一些异常。以下是该文件的一部分：

```
<http://dbpedia.org/resource/Jacky_Cheung> 

<http://dbpedia.org/resource/Template:%E8%97%9D%E4%BA%BA> "\u9AD4\u91CD"@zh .
<http://dbpedia.org/resource/Jacky_Cheung> <http://dbpedia.org/resource/Template:%E8%97%9D%E4%BA%BA> "\u8EAB\u9AD8"@zh .
<http://dbpedia.org/resource/Jacky_Cheung> <http://dbpedia.org/resource/Template:%E8%97%9D%E4%BA%BA> "\u8840\u578B"@zh .
<http://dbpedia.org/resource/Jacky_Cheung> <http://dbpedia.org/resource/Template:%E8%97%9D%E4%BA%BA> "\u8A9E\u8A00"@zh . 
```

抛出的异常是：

```
Exception in thread "main" com.hp.hpl.jena.shared.InvalidPropertyURIException: http://dbpedia.org/resource/Template:%E8%97%9D%E4%BA%BA
    at com.hp.hpl.jena.xmloutput.impl.BaseXMLWriter.splitTag(BaseXMLWriter.java:393)
    at com.hp.hpl.jena.xmloutput.impl.BaseXMLWriter.startElementTag(BaseXMLWriter.java:368)
    at com.hp.hpl.jena.xmloutput.impl.Unparser$3.wTypeStart(Unparser.java:671)
    at com.hp.hpl.jena.xmloutput.impl.Unparser.wPropertyEltValueString(Unparser.java:488)
    at com.hp.hpl.jena.xmloutput.impl.Unparser.wPropertyEltValue(Unparser.java:473)
    at com.hp.hpl.jena.xmloutput.impl.Unparser.wPropertyElt(Unparser.java:339)
    at com.hp.hpl.jena.xmloutput.impl.Unparser.wPropertyEltStar(Unparser.java:811)
    at com.hp.hpl.jena.xmloutput.impl.Unparser.wTypedNodeOrDescriptionLong(Unparser.java:797)
    at com.hp.hpl.jena.xmloutput.impl.Unparser.wTypedNodeOrDescription(Unparser.java:727)
    at com.hp.hpl.jena.xmloutput.impl.Unparser.wDescription(Unparser.java:686)
    at com.hp.hpl.jena.xmloutput.impl.Unparser.wObj(Unparser.java:642)
    at com.hp.hpl.jena.xmloutput.impl.Unparser.wObjStar(Unparser.java:317)
    at com.hp.hpl.jena.xmloutput.impl.Unparser.wRDF(Unparser.java:298)
    at com.hp.hpl.jena.xmloutput.impl.Unparser.write(Unparser.java:200)
    at com.hp.hpl.jena.xmloutput.impl.Abbreviated.writeBody(Abbreviated.java:143)
    at com.hp.hpl.jena.xmloutput.impl.BaseXMLWriter.writeXMLBody(BaseXMLWriter.java:500)
    at com.hp.hpl.jena.xmloutput.impl.BaseXMLWriter.write(BaseXMLWriter.java:472)
    at com.hp.hpl.jena.xmloutput.impl.Abbreviated.write(Abbreviated.java:128)
    at com.hp.hpl.jena.xmloutput.impl.BaseXMLWriter.write(BaseXMLWriter.java:458)
    at com.hp.hpl.jena.rdf.model.impl.ModelCom.write(ModelCom.java:277)
    at jena.ReadRDF.main(ReadRDF.java:45)
Java Result: 1 
```

问题是由“%E8%97%9D%E4%BA%BA”引起的，当使用URIref.decode()用这个字符串解码URI时，“%E8%97%9D%E4%BA%BA”代表拖中国文字。

但是当我使用 Sesame 读取这个 N-Triple 文件时，就可以了，没有任何问题。

我的问题是，是否有任何方法可以在 Jena 中解决这个问题，以及为什么 dbpedia 选择 N-Triple 作为默认的 RDF 语法？它在非 ASCII 语言中效果不佳。

另外，我想知道，如果我想将我的RDF数据发布为链接数据，但是资源的URI带有一些中文和日文，我应该先解码URI吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T13:32:58.467

好吧，您的问题并不完全清楚，因为您询问了“在 Jena 模型中阅读”，但您引用的堆栈跟踪实际上是从对作者的调用开始的。

总的来说，Jena 非常努力地符合 W3C 和 IETF 的相关 RDF 建议。特别是，它尝试不*生成*任何不符合有效 URI 规则的 URI。这在编写 XML 的情况下更加复杂，因为大多数 RDF 标识符不是合法的 XML 元素 ID，这意味着您必须在某处拆分 URI 并使用 XML 名称空间来生成完整的标识符。并不是所有的 RDF 工具包都像 Jena 那样特殊，即符合标准中的某些规则。

你可以尝试的事情：

*   您需要`Model.write()`在加载过程中调用吗？您应该能够加载和处理模型，而无需调用合法 URI 的检查。

*   尝试使用 Turtle 格式而不是 XML 编写输出。Turtle 没有 XML 那样的限制，而且它对人类来说也更容易阅读。

*   如果您正在加载的数据中有特定格式错误的 URI，请查看是否有更新版本的数据。dbpedia 中的非法 URI 过去一直是个问题。如果非法 URI 在最新版本中仍然存在，请通知 dbpedia 团队。

*   尝试预处理您的数据以在包含非法 URI 的三元组进入您的处理链之前删除它们。

至于包含中日字符的URI，Jena符合[IRI规范](http://www.ietf.org/rfc/rfc3987.txt)，所以只要你的URI符合就可以了。

# xml - 内联 svg 不显示图像

> ID：11413738
> 
> 赞同：0
> 
> 时间：2012-07-10T12:53:17.267
> 
> 标签：xml, image, namespaces, svg

我正在制作 svg 图形艺术。当它在一个单独的文件中时，图像（使用图像标签）可以很好地显示，但是当我将代码复制到 HTML 页面时，到 svg 内部标签时，图像会消失（仅在 chrome 上）。

我怀疑这是关于 XML 命名空间之类的东西。（xlink？）

帮助任何人？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T22:13:33.397

This might be a bug in the SVG parsing or rendering engine of Firefox 16 and other versions. We have SVG drawings that use the image tag for PNG files and show the PNG as expected when viewed as document by themselves. If, however, in an HTML page we use the img tag to show those very same SVG drawings then everything else in those SVG shows fine, except the SVG's image tag's PNG. I should file a bug report at Mozilla Firefox, but I haven't yet.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T13:04:22.193

检查您的 HTML 页面是否为 xhtml 页面：它应该是有效的 XML 页面并具有正确的命名空间声明：

```
<!DOCTYPE html 
      PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" 
      xmlns:svg="http://www.w3.org/2000/svg"
      xmlns:xlink="http://www.w3.org/1999/xlink">

  <body><svg:svg version="1.1" (...) 
```

# jquery - 获取所有选定值的历史推送状态

> ID：11413743
> 
> 赞同：0
> 
> 时间：2012-07-10T12:53:31.737
> 
> 标签：jquery, html

我想获得像[http://example.com/mymovieSeatBook.html?booking=0-0](http://example.com/mymovieSeatBook.html?booking=0-0) >0-1 这样的 url 输出，但我的示例显示[http://example.com/mymovieSeatBook.html?booking=0- 3](http://example.com/mymovieSeatBook.html?booking=0-3)仅表示 li href 值的第一个值当我选择 0-0 行和 0-1 行时

```
<button id="click">Submit</button>

var init = function (Seat) {
                var str = [], seatNo, className;
                var rows= Seat.length;
                var cols= Seat[0].length;
                for (i = 0; i <rows; i++) {
                    for (j = 0; j <cols; j++) {
                        seatNo = (i + j *rows + 1);

                        className = settings.seatCss + ' ' + settings.rowCssPrefix + i.toString() + ' ' + settings.colCssPrefix + j.toString();

                        if (Seat[i][j]==settings.reservedSeat) {
                            className += ' ' + settings.selectedSeatCss;
                            //console.log(inArray(seatNo, reservedSeat));
                        }
                        else if(Seat[i][j]== settings.unavilableSeat){
                           className += ' ' + settings.unavaliableSeatCss;
                           //console.log(settings.unavaliableSeatCss);
                        }
                        str.push('<li title="'+seatNo+'" class="' + className + '"' +
                                  'style="top:' + (i * settings.seatHeight).toString() + 'px;left:' + (j * settings.seatWidth).toString() + 'px" href="'+i,'-',j+'">' +
                                  '<a title="' + seatNo + '">' + seatNo + '</a>' +
                                  '</li>');

                    }
                }
                $('#place').html(str.join(''));
            };

            //case I: Show from starting
            //init();

            //Case II: If already booked
            var Seats =[ [ 0, 0, 0, 0, 0, 0],
                         [0, 0, 0, 0 ,0 , 0],
                         [ 2, 2, 2, 2 ,2, 0],
                         [ 3, 3, 3, 3 ,3, 0],
                      ];

            init(Seats);

            var clickNum=0;
            $('.' + settings.seatCss).on('click',function () {

            if ($(this).hasClass(settings.selectedSeatCss)){
                alert('This seat is already reserved');
            }
            else if($(this).hasClass(settings.unavaliableSeatCss))
            {
                alert('Sorry!!!This is unavailable Seats');
            }

              else
              {
               if($(this).hasClass(settings.selectingSeatCss))
                {
                    $(this).removeClass(settings.selectingSeatCss);
                     var SeatNo=$(this).closest("li").attr("title");

                    $(".sitting:last").remove();

                }
                else
                {
                  $(this).addClass(settings.selectingSeatCss);
                 var link=$(this).attr('href');
                link=link+"";

                var SeatNo=$(this).closest("li").attr("title");
               // console.log(traverse.closest("a"));
                //var SeatNo=$(this).closest("a").attr("title");
                 $('<div class="sitting" title="'+SeatNo+'">SeatNo:>'+SeatNo+ '</div>').appendTo('#order_place');

                 } 
                }

            });
          $("#click").click(function(){
              var his=$('li.selectingSeat').attr("href");
              window.history.pushState({push:this.push},'','?booking='+his);//Here it taking only previous value
          });              
        }); 
```

在这里，我的代码仅采用 selectionSeat 的先前值。我想以这种方式获取所有选定的座位值，并以 0-0>0-1>0-6 的形式

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T17:43:59.323

这可以通过

```
 var realvalues = [];

$('li.selectingSeat').each(function(i){realvalues[i]=$(this).attr("href");});
            realvalues=realvalues.join('>');

             window.history.pushState({push:this.push},'','?booking='+realvalues); 
```

# php - 具有动态链接和准确历史记录的 MySQL 报告页面

> ID：11413746
> 
> 赞同：0
> 
> 时间：2012-07-10T12:53:42.877
> 
> 标签：php, mysql

我已经构建了一个包含 mysql db 的 webapp (PHP)。该应用程序本身从网站上的用户输入和访问者行为中收集数据。由于解释起来太长，我将举一个简短的例子来说明我的问题：

我有一个网站表，其中包含我的网站的 ID 和网站名称。我有另一个表landing_pages，其中包含我的登陆页面的ID 和名称，以及它们所属的website_ID。我有另一个名为访问的表，其中记录了登录页面上的每次访问，并带有登录页面 ID。

我有一个显示访问的报告页面，当然可以按网站 ID 或登录页面 ID 过滤。（或两者，第一个网站，然后是其登录页面）。

到现在为止，一切都很完美。当用户更改登录页面的名称时出现问题，然后在报告上它只显示新名称（显然）。由于我通过登录页面 ID 加入登录页面名称。

我希望仍然能够按 ID 加入表格（因此过滤器仍然有效），但要在发生的确切日期显示名称的更改。所以在那个日期之前我想显示旧名称，在那个日期之后我想显示新名称。

最好的方法是什么？

提前谢谢了

# facebook - Facebook 喜欢不同的域

> ID：11413750
> 
> 赞同：0
> 
> 时间：2012-07-10T12:54:02.327
> 
> 标签：facebook, facebook-graph-api, facebook-like

好的，我有标准的 Facebook Like 代码。

但是我们在 Tumblr 提要中的 Tumblr 帖子中进行 ajaxing，并将 FB Like 按钮放入。

所以我们喜欢 Tumblr 帖子 URL。

但是该页面不在 Tumbler URL 上，因此 FB 会暂时显示评论框，然后将其替换为确认按钮，这会触发弹出窗口。就像在弹出窗口中一样，它允许您使用应该出现在按钮上的普通 JS 注释。

QA 和 UI 已将其标记为不可接受，那么这是 FB 的大规模 UI 失败吗？不管它是什么，我怎样才能绕过它？

如果我们喜欢我们网站/域上的唯一 URL，这将按预期工作；但是然后我们必须编写一个后端来接收该 URL 并提供 OG 标签供 FB 抓取，可能是从 tumblr 帖子中抓取的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T14:32:01.770

是的，默认情况下，Like 插件会在页面中搜索 og:metadata，
继续前进，您可以使用新的内置 Open Graph Like Action
[http://developers.facebook.com/docs/opengraph/actions/builtin/喜欢/](http://developers.facebook.com/docs/opengraph/actions/builtin/likes/)

因此，现在您可以将每个 Open Graph 对象与一个类似的对象关联起来。

# javascript - 根据搜索放置谷歌地图标记

> ID：11413751
> 
> 赞同：0
> 
> 时间：2012-07-10T12:54:03.053
> 
> 标签：javascript, html, google-maps, google-maps-api-3, maps

我正在尝试实现谷歌地图。第一部分是将地图居中到一个特定的地址，效果很好。

我的下一个问题是，我必须根据对商店名称的搜索在地图上为商店放置一个标记。标记可能应该连接到搜索结果，以便在单击时显示信息气泡。如何着手和做到这一点，我完全不知道。

![带有结果的谷歌地图](../Images/2aa90356b0d2141126b08c9de723cef5.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T13:44:23.710

您的步骤对我来说似乎没问题，我假设搜索商店名称**会转到您的服务器**，并且您返回一些带有商店名称和地址的结果，然后您使用 Google Geocoding API 进行查找并获取 lat/lng 坐标并放置标记在地图上，我可能会使用以下步骤：

*   创建地图
*   以特定地址为中心
*   搜索商店
*   如果结果具有与之关联的地理编码，则只需使用它来放置标记。
*   如果结果没有 lat/lng，则向 Google Geocoding API 发出请求以获取 lat/lng 坐标。放置标记之后，将接收到的地理编码存储到您的数据库中（通过使用一些后台 Ajax 请求）。

[Google Geocoding API 最佳实践](https://developers.google.com/maps/articles/geocodestrat)建议您应该存储地理编码，这样您就不必每次都查询 Google 的服务器。为此，您需要修改后端，以便它还存储地理编码以及商店详细信息，并且在搜索结果中，如果可用，您可以返回地理编码。

附带说明一下，您可以使用[GMaps](http://hpneo.github.com/gmaps/) JavaScript 库来轻松进行地图操作。

**更新**

上述解决方案在您修改后的场景中完美运行。让我重新表述一下流程：

1.  当通过商店名称搜索时，后端将返回商店列表（我猜这应该很容易）
2.  如果结果不为空，则遍历列表并查看它们是否都具有关联的 lat/lng 值。
3.  如果您没有找到记录的 lat/lng 值，则向 Google 的服务器发出地理编码请求，传递商店的地址（您至少需要拥有商店的地址，否则您无法获得 lat/lng 值来自 Google）作为参数。如果记录具有 lat/lng 值，则继续在地图上放置一个标记。
4.  一旦您收到来自 Geocode API 的响应，然后继续使用提供的地图库 API 在地图上放置一个标记。对于 GMaps 它是`map.addMarker({...})`.
5.  一旦所有请求都完成了，那么您可以考虑优化之前建议的一点，您可以将接收到的地理编码存储在您自己的服务器中，这样您就不必一次又一次地获取它们。

要实现上述步骤，您需要熟悉 Maps JS 库以及 JavaScript 和 Ajax/JSONP。请记住，您的所有地理编码请求（我认为是 JSONP）都是异步的，只有在您可以使用响应时（通常在回调中）才应该调用标记放置代码。GMaps 库示例非常容易上手。我希望这个解释应该足以解决您的问题，如果它对您有帮助，那么您可以考虑将其标记为答案。

# php - Doctrine2 和 Postgres：布尔输入语法无效：“”

> ID：11413752
> 
> 赞同：4
> 
> 时间：2012-07-10T12:54:07.197
> 
> 标签：php, postgresql, symfony, doctrine-orm

```
 SQLSTATE[22P02]: Invalid text representation: 7 
    ERROR: invalid input syntax for type boolean: ""
    500 Internal Server Error - PDOException 
```

这是由 Doctrine2 (2.2-DEV) 引起的错误消息，恐怕是再次出现的错误：http: [//www.doctrine-project.org/jira/browse/DDC-1394](http://www.doctrine-project.org/jira/browse/DDC-1394)

导致此错误的查询如下：

```
public function getFindAllNonOthersQueryBuilder()
{
    return $this
        ->createQueryBuilder('t')
        ->where('t.isOther = :isOther')
        ->setParameter('isOther', false);
} 
```

字段 isOther 以这种方式映射：

```
/**
 * @var boolean $isOther
 *
 * @ORM\Column(name="isOther", type="boolean")
 */
protected $isOther = false; 
```

这里发生了什么？我已经检查了 postgres 数据库中的类型，它`boolean`也是

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-03T11:44:07.583

我做了更多的谷歌搜索，因为我有同样的问题，我通过[FOSMessageBundle](https://github.com/FriendsOfSymfony/FOSMessageBundle/commit/d99018cff717f694d6ab1fcea000ec5e791e6a29)找到了解决方案，如果你将 '\PDO::PARAM_BOOL' 添加到你的 setParameter 它可以工作，如下所示：

```
$qb->setParameter('isOther', false, \PDO::PARAM_BOOL); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-17T20:52:14.263

你必须使用`Literal`表达。它与[问题 #DDC-1683有关](http://www.doctrine-project.org/jira/browse/DDC-1683)

我的示例代码：

```
$q->andWhere($q->expr()->eq('item.published', $q->expr()->literal(true))); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-10T19:04:49.747

我有同样的问题。

**解决方案：**使用**0**而不是**false**：

```
...
->setParameter('isOther', 0); 
```

# jquery - JScrollPane（Jquery 插件）在我的站点中不起作用

> ID：11413756
> 
> 赞同：2
> 
> 时间：2012-07-10T12:54:20.550
> 
> 标签：jquery, jquery-jscrollpane

我不能在我的课堂上使用 JscrollPane (product-description_r) 我看不到我的自定义滚动条......有什么建议吗？

我有包括

js： [http ://www.siragusafood.com/templates/mod/src/scrollbar.js](http://www.siragusafood.com/templates/mod/src/scrollbar.js)

css： [http ://www.siragusafood.com/templates/mod/css/scrollbar.css](http://www.siragusafood.com/templates/mod/css/scrollbar.css)

最重要的是：

```
<script type="text/javascript">
       jQuery(document).ready(function(){           
            jQuery('.product-description_r').jScrollPane(); 
   });
</script> 
```

我的代码在这里：

[http://www.siragusafood.com/index.php/prodotti-shop/confetture/marmelata-mandarino-detail?showall=1](http://www.siragusafood.com/index.php/prodotti-shop/confetture/marmellata-mandarino-detail?showall=1)

# css - 在 Mobile Safari 中旋转期间出现断断续续的 SVG 渲染

> ID：11413758
> 
> 赞同：0
> 
> 时间：2012-07-10T12:54:30.073
> 
> 标签：css, svg, mobile-safari, css-transforms

有一个非常棘手的问题，我一直试图弄清楚一段时间。本质上，我正在构建一个大型旋转轮，该轮具有多个以不同速度旋转的元件。它大约是 5000px 正方形，但视口是窗口高度的百分比。由于缩放，轮子本身是一个 SVG，因此它在所有设备上看起来都很清晰。SVG 在某些地方有一些非常复杂的路径。

很难解释，所以我对我正在谈论的内容做了一个准系统演示：http: [//jsfiddle.net/UsVeZ/3/e​​mbedded](http://jsfiddle.net/UsVeZ/3/embedded/result/) /result /（在此处编辑：http: [//jsfiddle.net/ UsVeZ/13/](http://jsfiddle.net/UsVeZ/13/) )。单击/点击文档以查看它的旋转。

一切看起来都很好，并且在桌面（Chrome + Safari）上运行良好，但是当我在 iPad 上旋转滚轮时，移动 safari 会滞后于渲染。旋转动画本身还算流畅，只是渲染跟不上。我的复杂 SVG 更糟糕（不幸的是，我不允许分享，但演示给出了一个想法）。在 iPad 上查看一下，看看我的意思。

我不太确定如何解决这个问题 - 理想情况下，如果有某种方法可以将整个 SVG 保存在内存中（不确定渲染的工作原理或它为什么会这样做），那就太好了。如果有人有任何想法，甚至有不同的方法来接近，那将是惊人的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T18:40:46.367

这不是一个完整的答案，只是您可以遵循的几个策略。

如果你申请...

```
body {
  -webkit-transform: scale(0.3);
} 
```

您将看到 Mobile Safari 如何缓存您的 svg，它会被像素化，然后正确呈现。如果您点击并等待，当您再次点击时，它将重新缓存图像。但是如果你连续点击，你会注意到你没有给它重新缓存图像的机会。

这也发生在你的 jsfiddle 中，如果你连续点击最终你不会得到任何波涛汹涌的块。

因此，如果您不让 Safari 通过创建无休止的过渡来重新缓存图像，例如...

```
$("svg").on("webkitTransitionEnd", function(){
  rotation -= .01;
  $("#large").css('-webkit-transform', "translate3d(0, 0, 0) rotate(" + rotation + "deg)");
  $("#small").css('-webkit-transform', "translate3d(0, 0, 0) rotate(" + ( rotation * 1.5 ) + "deg)");
}); 
```

然后缓存永远不会过时。

但是，一旦您移除主体上的比例，Safari 似乎不会在视口之外缓存任何图形。所以，也许如果你让轮子在加载时完全旋转，它会缓存图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T08:08:21.953

所以我最终无法在我的真实示例中正确解决这个问题。我最终恢复到图像（我将我的大图像分成 9 个较小的图像并将它们平铺以绕过 iOS 的 5mp 限制），并且在每张图像上我应用了以下似乎缓存图像的属性：

```
-webkit-transform-style: preserve-3d; 
```

它不能很好地扩展，但它可以顺利运行，这更重要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T21:05:20.637

我实际上采用了几个不同的 SVG 并在 iOS 中对它们应用了旋转，并在我旋转它的瞬间添加了这个框。我无法在 Safari 或 Chrome（桌面）中复制它。尝试了一堆不同的东西来让它停止，但没有运气。我无法在网上找到很多关于它是否是错误的反馈。

只需应用 -webkit-transform: rotate(122deg);

示例在 - [http://bit.ly/QnAgFK](http://bit.ly/QnAgFK)

我发现某些 [object] 标签有 #documents 在 Safari 6 中的 svg 周围添加 [html][body] 标签。其他人没有。所以我的假设是这是一个 mime 类型的主机问题，但我已经为 .svg 添加了 image/svg+xml mime-type。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-12-20T04:50:54.853

我对此有一个肮脏的修复。

```
#topParentId *{
   -webkit-transform-style: preserve-3d !important;
} 
```

我已将 css 应用于 topParentId Id 的每个孩子，这对我来说很好。它在输出中改变了一点css，但对我来说效果很好。

# backup - 如何知道备份文件的版本

> ID：11413765
> 
> 赞同：1
> 
> 时间：2012-07-10T12:54:47.017
> 
> 标签：backup, version, firebird

我有一个火鸟数据库的备份。我会知道哪个版本的 gbak 制作了它以及哪个版本的 firebird 来自。

有可能知道这些信息吗？

PS：我google了很多，但我没有找到解决方案；我发现的唯一解决方法是尝试使用不同版本的*firebird*和*gbak进行恢复*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T07:21:59.793

Firebird 版本的`gbak`实用程序将能够读取早期版本的所有备份格式（理论上从 InterBase 4.0 开始，尽管不再测试）。因此，如果您想恢复备份，只需使用最新版本的 Firebird 来恢复文件。

此外，如果您需要恢复到较早的 Firebird 版本，您可以使用`gbak`最新的 Firebird。当恢复到旧的 Firebird 版本时，它能够将新的备份格式恢复到旧的服务器（尽管如果备份包含新 Firebird 版本的功能，这些部分将不会被恢复或者备份可能会失败，并且您还需要重新编译所有存储过程）。

唯一的潜在障碍是如果备份来自不同的字节序系统，并且备份不是可传输的（尽管默认是可传输的）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T15:19:36.700

通常 Firebird 备份以[外部数据表示](http://en.wikipedia.org/wiki/External_Data_Representation)(XDR) 格式存储。

这意味着文件只包含 XDR 备份版本，而不是 Firebird 版本甚至 Gbak 版本。备份版本与 Firebird 版本没有直接关系。

此外，XDR 备份与 FB 版本兼容。如果您的数据库没有任何新的特定 FB 功能，您可以通过使用旧版本 gbak 恢复它来自由降级它。

# c - C 推送和弹出测试

> ID：11413766
> 
> 赞同：1
> 
> 时间：2012-07-10T12:54:49.513
> 
> 标签：c, assembly, x86

有人可以帮我理解 push_test() 和 pop_test() 方法试图测试什么吗？这些方法试图测试一些东西，我不知道那是什么。

以下代码是用c编写的：

```
int push_test() {
    int ret_val;
    /* movl %esp, %eax    ;; save stack pointer
       pushl %esp         ;; push stack pointer onto stack
       popl %edx          ;; pop the stack into %edx
       subl %edx, %eax    ;; subtract the two values
       movl %eax, ret_val ;; set up the return value
    */
    asm("movl %%esp, %%eax; pushl %%esp; popl %%edx; subl %%edx, %%eax; movl %%eax, %0"
          : "=r" (ret_val)
          : /* no input */
          : "%edx", "%eax");
    return ret_val;
 }

int pop_test() {
  int ret_val = 0xffffffff;  /* -1 in decimal */
  /* pushl ret_val       ;; save ret_val on the stack
     movl %esp, %edx     ;; save the stack pointer
     popl %esp           ;; pop stack into the stack pointer
     movl %esp, ret_val  ;; set the popped value as the return value
     movl %edx, %esp     ;; restore original stack pointer
  */
  asm("pushl %1; movl %%esp, %%edx; popl %%esp; movl %%esp, %0; movl %%edx, %%esp"
      : "=r" (ret_val)
      : "r" (ret_val)
      : "%edx");
  return ret_val;
}

int main() {
  printf("push test: %d\n", push_test()); 
  printf("pop test: %d\n", pop_test()); 
}

/* Output:
  push test: 0
  pop test: -1
*/ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T13:01:50.780

您`push_test()`和`pop_test()`正在保存堆栈状态，销毁堆栈帧，然后根据堆栈上的值执行操作。

让我们通过每个指令`pop_test()`并弄清楚它的作用（`push_test()`在操作上非常相似）。

`pushl ret_val`将 -1 推入堆栈，增加堆栈指针 ( `%esp`)，所以现在您的堆栈看起来像`{-1}`：

`movl %esp, %edx`将堆栈指针复制到`%edx`，因此`%edx`包含堆栈上位置 1 的内存地址，因此现在您的堆栈看起来像 : `{-1}`, `%esp`: `stack[1]`, `%edx`:`stack[1]`

`popl %esp`弹出 -1 并将其存储到`%esp`中，因此堆栈看起来像：`{}`, `%esp`: `-1`, `%edx`:`stack[1]`

`movl %esp, ret_val`取 的值`%esp`，当前为 -1，并将其移入`ret_val`，因此`ret_val`变为 -1。

最后`movl %edx, %esp`将值`%edx`放回`%esp`并返回-1。

* * *

此方法始终返回 -1。这个想法是将一个值压入堆栈，然后将其弹出，然后查看该值是否保持不变。它还破坏和重组堆栈（通过暂时破坏然后恢复`%esp`）。我猜这可能是一些学习组装的交易，而不是实际的测试方法。

# python - Python - 过滤重叠范围

> ID：11413768
> 
> 赞同：2
> 
> 时间：2012-07-10T12:55:00.153
> 
> 标签：python, algorithm, python-2.7

我有一个带有`{integer_key -> list[tuple]}`键/值对的地图。元组包含`(start,end)`表示子字符串操作的字符串索引的值。

我的目标是删除重叠区域并返回键/值对所在的映射`{tuple -> integer_key}`。映射到较低的范围`integer_keys`优先于较高的范围。

下面是我当前实现的一个可运行示例（需要这个[ordereddict](http://obspy.org/browser/obspy/trunk/obspy.core/obspy/core/util/ordereddict.py?rev=3321)类）：

```
from collections import OrderedDict

string_length = 20

idx_region_map = OrderedDict()
idx_region_map[0] = [(0,2), (7,10)]
idx_region_map[1] = [(4,5), (18,19)]
idx_region_map[2] = [(3,3), (5,6), (10,13)]
idx_region_map[3] = [(15,17), (19,20)]

# Which can be represented as follows:
#
#  |012345678901234567890|
# 0|ooo----oooo----------|
# 1|----oo------------oo-|
# 2|---o-oo---oooo-------|
# 3|---------------ooo-oo|
# ...

def filter_overlaps(string_length, idx_region_map):
    region_idx_map = {}
    occupied = [False for i in range(string_length)]
    for idx, regions in idx_region_map.items():
        for region in regions:
            start, end = region[0], region[1] + 1
            overlaps = any(occupied[start:end])

            if not overlaps:
                for i in range(start, end):
                    occupied[i] = True
                region_idx_map[region] = idx
    return region_idx_map

# Prints: {(3, 3): 2, (4, 5): 1, (18, 19): 1, (7, 10): 0, (0, 2): 0, (15, 17): 3}
print filter_overlaps(string_length, idx_region_map) 
```

这似乎足以满足我的需求，但我很想知道有哪些替代算法可以解决这个问题。例如，使用不同的数据结构或比上述更有效的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T13:01:51.777

您可以使用[区间树](http://en.wikipedia.org/wiki/Interval_tree)。

我不懂 Python，但我认为你在这里做的是蛮力。

另一种方法是根据起始索引进行排序；所以对于你的例如你得到

0 3 4 5 7 10 15 18 19

现在遍历每个起始索引并通过二进制搜索检查其对应的结束索引在起始索引之后的位置，即这里我们取 0，得到它的结束索引为 2，然后查看 2 的位置。因为 2 紧跟在 0 之后，所以它不重叠任何东西，但假设 0 的结束索引是 17，那么这意味着 0,17 与所有开始索引重叠，直到 15 是 3,4,5,7,10,15。复杂度为 nlogn。

编辑

我刚刚意识到的是，虽然 4,5 和 5,6 重叠，但您保留了 4,5，我猜是因为 4,5 整数键是 1，它小于 5,6 的整数键，即 2。所以我猜你尽管重叠，但始终保留较低的整数键。

如果是这种情况，复杂度将是 O(n^2)，因为您不能盲目地进行二进制搜索。例如，如果 4 的结束索引是 10，那么您将不得不通过 5,7 和 10 来检查它们的整数键是否小于 4。如果是 4，则可以过滤其结束索引，否则保留 4。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T16:35:45.737

而不是`occupied = [False]*string_length`您可以维护一个存储迄今为止看到的非重叠范围并支持`.overlaps(start, end)`操作的数据结构：

```
def overlaps(self, start, end):
    # invariant: all stored intervals do not overlap
    # perform binary search on non-overlapping intervals O(log n)
    # if overlaps; merge with stored intervals O(m)
    # else store (start, end) O(1)
    # return whether (start, end) overlaps with already seen intervals 
```

复杂性是`O(log n + m)`，其中`n`- 存储间隔的`m`数量， - 与给定范围重叠的间隔数量。

如果`string_length`不是很大，您的算法看起来还不错。

# teamcity - 如何让 TeamCity 只清理某些文件

> ID：11413770
> 
> 赞同：3
> 
> 时间：2012-07-10T12:55:04.910
> 
> 标签：teamcity, teamcity-7.0

是否可以让 TeamCity 在从我的 git 存储库中获取文件时只清理某些文件？我修改一个文件作为构建步骤，因此总是需要该文件的干净版本。但是，实际上没有必要每次都获取整个 repo，因为通常只修改了几个文件（因此，我宁愿不使用 'Clean all files before build' 命令）。

谢谢！

为了澄清，假设我有以下结构： - index.html - js/script.js - js/plugins.js

我只想*始终*（无论是否发生任何更改）检查 index.html。js 文件夹中的文件我只想在发生任何更新时替换它们。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-11T19:31:22.690

如果您使用的是 TeamCity 6.5 或更高版本，则可以使用[Build Files Cleaner (Swabra) Build Feature](http://confluence.jetbrains.net/display/TCD65/Build+Files+Cleaner+%28Swabra%29)。一旦你添加了它，你的构建步骤并运行 clean build 它将在新构建开始之前或当前构建结束时清理在构建过程中生成的任何新的未版本化文件。

我个人更喜欢在新构建开始之前运行它，因为它允许您在尝试找出出现问题的原因时查看任何输出。

基本上，它确保构建代理工作文件夹中没有在每次构建之前未从存储库中提取的任何内容。

# c# - 如何在 C# 中获取打印机图标

> ID：11413771
> 
> 赞同：2
> 
> 时间：2012-07-10T12:55:06.760
> 
> 标签：c#, printers

谁能告诉我如何在 C# 中获取 PrintQueue 对象的图标（如在资源管理器中）。我使用以下代码获取所有打印机的列表：

`LocalPrintServer PrintServer = new LocalPrintServer(); PrintQueueCollection PrintQueuesOnLocalServer = PrintServer.GetPrintQueues(new[] { EnumeratedPrintQueueTypes.Local, EnumeratedPrintQueueTypes.Connections });`

在此先感谢 NeoKript

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T13:06:54.407

给你： http: [//msdn.microsoft.com/en-us/library/ms247035.aspx](http://msdn.microsoft.com/en-us/library/ms247035.aspx) （Visual Studio 图像库图标集合，可在您的应用程序中自由使用）。

'Visual Studio 2010 图像库包含出现在 Microsoft Windows、Office 系统、Microsoft Visual Studio 和其他 Microsoft 软件中的应用程序图像。您可以使用这组超过 1,000 张图像来创建在视觉上与 Microsoft 软件一致的应用程序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T13:02:40.340

如果你想要一个操作系统图标，你应该尝试打开 shell32.dll （或尝试使用系统中的其他 dll）作为 Visual Studio 的资源文件，你应该在那里找到图标，**但我不知道你是否可以在你的应用程序**。这是打开 dll 作为资源的屏幕截图： ![在此处输入图像描述](../Images/dbe4db9b7d0f640f37543ce324070de2.png) 以及您获得的内容：

![在此处输入图像描述](../Images/e8cb94a1488077eab1a2d9e359fa32bb.png)

当然你得试着一个一个打开图标来寻找你需要的那个，也许你想要一个叫 17 的那个？

![在此处输入图像描述](../Images/5078ad067a590f2a9c6e3159399a670d.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T13:14:07.680

大多数系统图标是系统dll文件中的嵌入资源。

试试看`shell32.dll`。

您可以使用[此处](http://www.msfn.org/board/topic/87453-listing-of-shell32dll-icon/)的列表来查找要使用的图标。

# iphone - 如何在 iPhone 的表格中分离 gmail 和 Facebook 联系人的指示

> ID：11413776
> 
> 赞同：0
> 
> 时间：2012-07-10T12:55:28.140
> 
> 标签：iphone, tableview

我正在使用 xmpp 开发聊天应用程序。我在表格中获得了 gmail 和 Facebook 联系人。但我的表包含 3 个部分

```
-(NSString*)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)sectionIndex
{
    NSArray *sections = [[self fetchedResultsController] sections];

    if (sectionIndex < [sections count])
    {
        id <NSFetchedResultsSectionInfo> sectionInfo = [sections objectAtIndex:sectionIndex];

        int section = [sectionInfo.name intValue];
        switch (section)
        {
            case 0  : return @"Available";
            case 1  : return @"Away";
            default : return @"Offline";
        }
    }

    return @"";
} 
```

我的问题是如何区分 gmail 和 Facebook 联系人

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T12:58:57.920

```
UILabel *lblText = [[UILabel alloc] initWithFrame:CGRectMake(290,16,10,20)]; 
    lblText.textColor = [UIColor orangeColor];
    [cell addSubview:lblText]; 

    if ([[user jidStr] rangeOfString:@"gmail"].location == NSNotFound) 
    {
        if([[user jidStr] rangeOfString:@"facebook"].location==NSNotFound)
        {
            lblText.text=@"y";
        }
        else 
        {
            lblText.text=@"f";
        }

    }
    else 
    {
        lblText.text=@"g";
    } 
```

# java - JSON问题：无法获取所需数据，故障一直发生

> ID：11413777
> 
> 赞同：0
> 
> 时间：2012-07-10T12:55:33.110
> 
> 标签：java, android, json

我之前问过一个关于解析 json 的问题，从那时起我找到了一个应该可以正常工作但它不能正常工作的示例。我现在拥有的代码如下：

```
 public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        final TextView tv = (TextView)findViewById(R.id.result);

            StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();
            StrictMode.setThreadPolicy(policy);

            String username = "exampleusername";
            String password = "examplepassword";
            String url = "http://www.example.com/api/core/v1/my/";
            String unp = username+":"+password;

            class MyUser {
                  public String firstName;
                  public String lastName;
            }

            try {
                HttpClient client = new DefaultHttpClient();
                HttpGet header = new HttpGet(url);
                String encoded_login = Base64.encodeToString(unp.getBytes(), Base64.NO_WRAP);
                header.setHeader(new BasicHeader("Authorization", "Basic "+encoded_login));
                HttpResponse response = client.execute(header);
                HttpEntity entity = response.getEntity();

                BufferedReader reader = new BufferedReader(new InputStreamReader(entity.getContent()));
                for (String line; (line = reader.readLine()) != null;) {
                    if (line.isEmpty()) break; // Stop when headers are completed. We're not interested in all the HTML.
                    final String newjson = line.replaceAll("throw 'allowIllegalResourceCall is false.';", "");

                    JSONObject mainObject = new JSONObject(newjson);
                    JSONObject uniObject = mainObject.getJSONObject("firstName");

               // System.out.println(newjson + newjson.contains("firstName") + "," + newjson.contains("lastName"));
               System.out.println(uniObject);
             //   System.out.println(uniURL);
                } 
```

使用此代码，我现在收到以下错误：

```
W/System.err(910): org.json.JSONException: End of input at character 0 of 
W/System.err(910): at org.json.JSONTokener.syntaxError(JSONTokener.java:450)
W/System.err(910): at org.json.JSONTokener.nextValue(JSONTokener.java:97)
W/System.err(910): at org.json.JSONObject.<init>(JSONObject.java:154)
W/System.err(910): at org.json.JSONObject.<init>(JSONObject.java:171)
W/System.err(910): at basic.authentication.BasicAuthenticationActivity.onCreate(BasicAuthenticationActivity.java:84)
W/System.err(910): at android.app.Activity.performCreate(Activity.java:4465)
W/System.err(910): at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
W/System.err(910): at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
W/System.err(910): at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
W/System.err(910): at android.app.ActivityThread.access$600(ActivityThread.java:123)
W/System.err(910): at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
W/System.err(910): at android.os.Handler.dispatchMessage(Handler.java:99)
W/System.err(910): at android.os.Looper.loop(Looper.java:137)
W/System.err(910): at android.app.ActivityThread.main(ActivityThread.java:4424)
W/System.err(910): at java.lang.reflect.Method.invokeNative(Native Method)
W/System.err(910): at java.lang.reflect.Method.invoke(Method.java:511)
W/System.err(910): at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
W/System.err(910): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
W/System.err(910): at dalvik.system.NativeStart.main(Native Method) 
```

我下拉的部分json字符串如下：

```
{
  "enabled" : true,
  "email" : "example@gmail.com",
  "firstName" : "example firstname",
  "lastName" : "example lastname",
  "name" : "example fullname",
  "level" : { 
```

我现在对 json 很困惑，为什么这不起作用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T13:46:25.550

试试这个读取功能

```
public static JSONObject read(String url, String unp){

    System.out.println("Connecting to service URL : "+url);
    InputStream is = null;
    String result = "";
    // http post
    try {
        HttpClient httpclient = new DefaultHttpClient();
        HttpPost httppost = new HttpPost(url);
        String encoded_login = Base64.encodeToString(unp.getBytes(), Base64.NO_WRAP);
        httppost.setHeader(new BasicHeader("Authorization", "Basic "+encoded_login));
        HttpResponse response = httpclient.execute(httppost);
        HttpEntity entity = response.getEntity();
        is = entity.getContent();

    } catch (Exception e) {
        e.printStackTrace();
    }

    // convert response to string
    try {
        BufferedReader reader = new BufferedReader(new InputStreamReader(
                is, "iso-8859-1"), 8);
        StringBuilder sb = new StringBuilder();
        String line = null;
        while ((line = reader.readLine()) != null) {
            sb.append(line + "\n");
        }
        is.close();
        result = sb.toString();

    } catch (Exception e) {
        e.printStackTrace();
    }

    JSONObject json = null;
    try {
        json = new JSONObject(result);
    } catch (JSONException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    return json;
}

} 
```

*   这里我先连接到服务
*   下载响应
*   将其传递给 JSONObject 创建，而不是循环执行

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T13:18:49.337

您可能想尝试编写没有空格的 Json ..

例如

```
{"foo":"bar"} 
```

代替

```
{
    "foo":"bar"
} 
```

# javascript - $("#submit").click 不起作用：/

> ID：11413778
> 
> 赞同：-2
> 
> 时间：2012-07-10T12:55:39.433
> 
> 标签：javascript, jquery

我已经尝试了所有我能想到的让这个“发送”按钮工作的方法，但我不太擅长 javascript :(

[http://www.kimscakes.biz/contactme.php](http://www.kimscakes.biz/contactme.php)

Prehaps 有人在这里可以告诉我我要去哪里错了吗？

非常感谢

宝石

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T13:03:15.033

您在元素存在之前绑定提交，将代码移动到表单之后或将其放入`$(document).ready`：

```
jQuery(document).ready(function () {
    jQuery("#submit").click(function () {
        console.log("button clicked");
        // declare these vars
        var name = jQuery("#name");
        var email = jQuery("#email");
        var message = jQuery("#message");
        var human = jQuery("#human");
        var success = jQuery("#success");
        var error = jQuery("#error");
        // reset these vars
        success.html("");
        error.html("");
        // ajax call to script.php
        jQuery.getJSON("mailer.php", {
            name: name.val(),
            email: email.val(),
            message: message.val(),
            human: human.val()
        }, function (html) {
            // if html from script.php == 1, happy days
            if (html == '1') {
                jQuery("#contact").hide()
                success.html("Thank You, your message has been sent.")
                error.show()
            }
            else {
                error.html(html)
            }
        });
    });
}); 
```

# ios - IOS - 解码 PCM 字节数组

> ID：11413781
> 
> 赞同：1
> 
> 时间：2012-07-10T12:55:59.927
> 
> 标签：ios, audio, decode, pcm

我在我的目标 C 应用程序上遇到了一个问题。

我正在从一个向我发送 PCM 编码声音的服务器（Socket c#）中读取一个字节数组，我目前正在寻找一个示例代码，它可以为我解码这个字节数组（NSData）并播放它。

有谁知道解决方案？或者我如何阅读 u-Law 音频？

非常感谢 ！:D

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T15:43:58.817

此链接包含有关 mu-law 编码和解码的信息：

[http://dystopiancode.blogspot.com.es/2012/02/pcm-law-and-u-law-companding-algorithms.html](http://dystopiancode.blogspot.com.es/2012/02/pcm-law-and-u-law-companding-algorithms.html)

```
#define MULAW_BIAS 33
/*
 * Description:
 *  Decodes an 8-bit unsigned integer using the mu-Law.
 * Parameters:
 *  number - the number who will be decoded
 * Returns:
 *  The decoded number
 */
int16_t MuLaw_Decode(int8_t number)
{
 uint8_t sign = 0, position = 0;
 int16_t decoded = 0;
 number=~number;
 if(number&0x80)
 {
  number&=~(1<<7);
  sign = -1;
 }
 position = ((number & 0xF0) >>4) + 5;
 decoded = ((1<<position)|((number&0x0F)<<(position-4))|(1<<(position-5)))
            - MULAW_BIAS;
 return (sign==0)?(decoded):(-(decoded));
} 
```

当您拥有未压缩的音频时，您应该能够使用音频队列 API 播放它。

祝你好运！

# silverlight - WCF RIA 服务和 System.ServiceModel.DomainServices.Hosting

> ID：11413788
> 
> 赞同：1
> 
> 时间：2012-07-10T12:56:16.940
> 
> 标签：silverlight, ria

我正在使用 WCF RIA 服务开发我的第一个项目。我能够构建一个小型应用程序并在 localhost 上成功运行它。尝试在服务器上上传时，浏览时出现以下错误：

> “无法加载文件或程序集 'System.ServiceModel.DomainServices.Hosting, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35' 或其依赖项之一。系统找不到指定的文件”

我在我的项目中寻找这个参考，但没有找到。我尝试从 C:\Program Files (x86)\Microsoft SDKs\RIA Services\v1.0\Libraries\Server 添加它，但 Visual Studio 警告我：

> 您不能添加对 System.ServiceModel.DomainServices.Hosting.dll 的引用，因为它不是针对 silverlight 运行时构建的。silverlight 项目仅适用于 silverlight 程序集

我应该怎么办？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T13:53:32.847

发现问题：在我的.Web下引用，找到需要的dll.On属性，将copy local改为True

# asp.net-mvc - 如何将 IIS 中的默认页面设置为控制器？

> ID：11413791
> 
> 赞同：2
> 
> 时间：2012-07-10T12:56:19.980
> 
> 标签：asp.net-mvc, model-view-controller, iis, iis-6, startup

我们有一个 MVC 应用程序，可以从两个单独的网站访问。默认网站很好，但是如何将第二个网站设置为在特定控制器中启动？

我们的默认站点是`www.mysite.com`，我们想为标题添加第二个 IIS 站点，`www.subdomain.mysite.com`以便用户访问`www.subdomain.mysite.com/controller`

但是我怎样才能告诉 IIS 以`www.mysubdomain.mysite.com`特定的控制器操作启动`mycontroller`呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T13:33:10.670

我会考虑配置 URL 重写，以便将请求`www.mysubdomain.mysite.com`视为对`www.mysubdomain.mysite.com/controller`.

您可以使用[Ionics Isapi Rewrite Filter](http://iirf.codeplex.com/)。

> Ionic 的 Isapi 重写过滤器，又名 IIRF，是一个小型、免费、易于使用的 URL 重写 ISAPI 过滤器。它结合了良好的价格（免费！）和良好的功能。它快速而强大。它适用于 IIS 6.0 及更高版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T14:24:55.493

我最终`AppSettings`在 web.config 中添加了一个值，并根据该值调整了应用程序的默认路由。

```
public static void RegisterRoutes(RouteCollection routes)
{
    var defaultController = ConfigurationManager.AppSettings["DefaultController"];

    if (string.IsNullOrEmpty(defaultController))
        defaultController = "Home";

    routes.MapRoute(
        "Default", // Route name
        "{controller}/{action}/{id}", // URL with parameters
        new { controller = defaultController, action = "Index", id = UrlParameter.Optional } // Parameter defaults
    );

    ...
} 
```

这允许我托管任意数量的 IIS 站点，每个站点都可以从应用程序中的不同控制器开始。

# c++ - Cygwin g++ 和声明没有声明任何东西

> ID：11413794
> 
> 赞同：2
> 
> 时间：2012-07-10T12:56:25.510
> 
> 标签：c++, cygwin

首先，我不是 C/C++ 的热心用户，但我有一个项目是用两种语言编写的。此外，它基于一些 Unix 类型（所以 VS 不是一个选项，是吗？）我目前使用的是 Windows 7 x32，我决定看看 Cygwin（g++ 编译器）。但在移动整个项目之前，我想在不太困难的情况下尝试它。

所以我有

主文件

```
#include <iostream>
#include "h/math.h"

int main()
{
    Math math; // just declare the Math variable, nothing else

    std::cin.get();
    return 0;
} 
```

数学.h

```
#ifndef math
#define math

class Math
{
public:
    int Addition(int, int);
    int Multiplication(int, int);
};

#endif 
```

数学.cpp

```
#include "math.h"

int Math::Addition(int x, int y)
{
    return x + y;
}

int Math::Multiplication(int x, int y)
{
    return x * y;
} 
```

然后我打开“...\Cygwin\Cygwin.bat”，设置我的文件的路径（cd C:\Proj）并尝试使用以下命令进行编译：

$ g++ main.cpp

我得到的是一个错误： *main.cpp：错误：声明没有声明任何东西*

怎么了？据我了解，它不喜欢我的“数学数学”行，但尝试在我的 VS2010 中没有这样的错误。它是由于g ++编译器而发生的吗？它不支持“类”声明吗？我应该改变什么来运行该代码？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T13:01:38.417

你`#define math`在你的标题。所以预处理器看到`Math math`并说“哦，等等，正确的替换也是如此” `#define math`。`Math`因此，当编译器给出声明时，它会看到`Math ;`. 这显然是不洁的。宏应该总是全部大写，特别是头部保护通常采用非常具体的形式，比如，`HEADER_GUARD_MATH_H`或者类似的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T13:00:47.653

在编译 math.cpp 时，您也可能会遇到问题。您的编译器可能会混淆

```
#include "math.h" 
```

这可能指向`math.h`C 标头。

还有，真的很不好`#define math`。您永远不应该`#define`使用具有如此简单名称的宏。最好的例子就是你的代码：

```
Math math; 
```

但是每次出现的`math`标记都会被预处理/替换为该宏的内容：

```
Math ; 
```

对于 header gurads，我通常推荐 pattern `FILENAME_EXT_INCLUDED_YYYYMMDD`，在你的情况下

```
#ifndef MATH_H_INCLUDED_20120710
#define MATH_H_INCLUDED_20120710
...
#endif 
```

像这样的简单模式`MATH_H`可能已经太简单了，因为您`math.h`将来可能会引入其他模式（这在过去不止一次发生在我身上，自从我使用带有日期的模式以来）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T12:58:18.497

您必须在命令行中包含所有源文件，例如`g++ main.cpp math.cpp`.

# java - java中将字符插入字符串的最快方法是什么？

> ID：11413795
> 
> 赞同：3
> 
> 时间：2012-07-10T12:56:33.467
> 
> 标签：java, string

我正在编写一个例程，该例程接受一个字符串并将其格式化为带引号的可打印。而且它必须尽可能快。我的第一次尝试将字符从一个字符串缓冲区复制到另一个编码并沿途换行。然后我认为只修改原始字符串缓冲区而不是复制所有几乎相同的数据可能会更快。结果插入比复制差得多，第二个版本（带有字符串缓冲区插入）慢了 8 倍，这是有道理的，因为它必须移动大量内存。

我希望的是某种间隙缓冲区数据结构，因此插入不会涉及物理移动字符串缓冲区其余部分中的所有字符。

那么关于每隔一段时间插入字符的字符串的最快方法有什么建议吗？

使用标准 mimeutils 库的建议没有帮助，因为我还对字符串进行了转义，因此可以一次性将其转储到 smtp 服务器。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-10T13:02:51.620

最后，您的间隙数据结构必须转换为字符串，这需要通过将所有块附加到 StringBuilder 来将所有块组装到一个数组中。

所以直接使用 StringBuilder 会更快。我不认为你会找到比这更快的技术。确保使用足够大的大小初始化 StringBuilder 以避免在容量耗尽时复制整个缓冲区。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-06T19:09:49.087

因此，在这里接受其他一些答案的建议，我一直在编写这个函数的许多版本，看看什么是最快的，如果有人能从我的发现中获益，以供将来参考：

1) 最慢的：stringbuffer.append() 但我们知道。

2) 几乎快两倍：stringbuilder.append()。锁似乎很贵。

3) 再快 20% 是......从一个 char[] 复制到另一个。

4) 最后，速度甚至比这快三倍……对用 C 编译的完全相同的代码进行 JNI 调用，该代码从一个 char 数组复制到另一个。

您可能会考虑 #4 作弊，但作弊者会赢。这是迄今为止最快的方法。

GetCharArrayElements 调用存在导致复制 java char 数组以便将其交给 C 程序的风险，但我不知道这是否正在发生，而且与任何 java 实现相比，它仍然非常快。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T13:07:15.313

我认为速度和编码优雅之间的良好平衡将使用`Matcher.appendReplacement`. 制定一个将捕获所有插入点的正则表达式。在您使用的循环`find`中，分析`Matcher.group()`以查看完全匹配的内容，并使用您的程序逻辑来决定要给`appendReplacement`.

无论如何，重要的是不要逐个字符地复制文本。您必须复制尽可能大的块。

不幸的是， `Matcher`API 绑定到 . `StringBuffer`，但是，正如您所发现的那样，它只能从您那里获得最后的 5%。

# sql - 使用 SQL Express 时如何查看执行了哪些 SQL 语句？

> ID：11413797
> 
> 赞同：0
> 
> 时间：2012-07-10T12:56:34.823
> 
> 标签：sql, sql-server-profiler

我正在使用 SQL Express，因此无法访问 SQL Profiler 工具。在运行 ASP.NET MVC 应用程序（实时或调试中，都可以）时，我可以使用什么来查看正在执行的语句。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T12:59:08.933

使用`Anjlab`它适用于 SQL Express [http://anjlab.com/en/projects/opensource/sqlprofiler](http://anjlab.com/en/projects/opensource/sqlprofiler)

# ruby-on-rails - 通过 Heroku 上的 ruby 守护进程拒绝 Redis 连接

> ID：11413800
> 
> 赞同：3
> 
> 时间：2012-07-10T12:56:38.373
> 
> 标签：ruby-on-rails, ruby, heroku, redis, worker

作为“web”Heroku 进程运行的 Rails 3.2.6 应用程序正在使用 ENV["REDISTOGO_URL"] 环境变量连接到 Redis：

```
irb(main):002:0> Redis.current
=> #<Redis client v2.2.2 connected to redis://xxx.redistogo.com:1234/0 (Redis v2.4.11)> 
```

----- /initializers/redis.rb

```
if Rails.env.development?
  Redis.current = Redis.new
elsif Rails.env.test?
  Redis.current = Redis.new
elsif Rails.env.production?
  uri = URI.parse(ENV["REDISTOGO_URL"])
  Redis.current = Redis.new(:host => uri.host, :port => uri.port, :password => uri.password)
end 
```

ruby 守护进程“流式传输”进程作为辅助工作者运行：

----- 过程文件

```
web: bundle exec rails server thin -p $PORT -e $RACK_ENV
worker: bundle exec rake jobs:work
streaming: RAILS_ENV=production ruby bin/streaming.rb start 
```

然而，当它调用与 Redis 连接的 Rails 主应用程序中的方法时，流处理进程会崩溃——即使流处理进程应该加载与“web”Rails 应用程序进程相同的 redis.rb 初始化程序。

----- /bin/streaming_ctl.rb

```
# encoding: UTF-8

require "rubygems"
require "bundler/setup"
require "daemons"

Daemons.run(File.expand_path("../streaming.rb", __FILE__)) 
```

----- /bin/streaming.rb

```
# encoding: UTF-8

# TODO: set rails env in init script
ENV["RAILS_ENV"] ||= "production"

# load rails environment
require File.expand_path('../../config/environment', __FILE__)

logger = ActiveSupport::BufferedLogger.new(File.expand_path("./../../log/streaming.log", __FILE__))

Streaming.start
logger.info("\nStarting streaming in #{Rails.env.to_s} mode.") 
```

为什么流式处理/工作者使用默认的 Redis 主机和端口？

```
[streaming.1]: /app/vendor/bundle/ruby/1.9.1/gems/redis-2.2.2/lib/redis/client.rb:236:in `rescue in establish_connection': Connection refused - Unable to connect to Redis on 127.0.0.1:6379 (Errno::ECONNREFUSED) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T08:47:26.467

从 /initializer/redis.rb 中的“Redis.current”切换并改用“$redis”变量约定（如此处所示[http://jimneath.org/2011/03/24/using-redis-with-ruby- on-rails.html](http://jimneath.org/2011/03/24/using-redis-with-ruby-on-rails.html) ) 修复了连接问题。

该应用当时使用的是 redis gem 版本 2.2.2。这个 gem 版本中的 Redis.current 似乎在“web”和“worker”进程之间不一致，因为 Heroku 在单独的线程上运行这些进程。gem repo 上的文档建议将 gem 更新到 >= 版本 3 将使 Redis.current 能够在多线程环境中运行：

[https://github.com/redis/redis-rb/blob/master/CHANGELOG.md#300](https://github.com/redis/redis-rb/blob/master/CHANGELOG.md#300)

# c# - 如何在 c# .net 中找到转发器的标头控件？

> ID：11413802
> 
> 赞同：0
> 
> 时间：2012-07-10T12:56:43.967
> 
> 标签：c#

我正在研究 asp.net c# 。我试图在 c# 中找到标题控件。但我得到 object not set to an instance of an object 。我的代码是

```
 public void R1_ItemDataBound(Object Sender, RepeaterItemEventArgs e)
    {
        if (e.Item.ItemType == ListItemType.Header)
        {
            HtmlGenericControl ulSubNav2 = (HtmlGenericControl)e.Item.FindControl("da-sliders");
            ulSubNav2.Style.Add("background", "transparent url('DesktopModules/DNAiusParallelSlider/Images/waves.gif') repeat 0% 0%");
            ulSubNav2.Style.Add("width", "100%");
            ulSubNav2.Style.Add("height", "400px");
        }
    } 
```

相关的 HTML 代码

```
 <HeaderTemplate> 
      <div id="da-sliders" class="da-slider" OnItemDataBound="R1_ItemDataBound">
  </HeaderTemplate> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T13:19:13.677

尝试像这样向 div 添加“runat”标签：

```
<div id="da-sliders" class="da-slider" OnItemDataBound="R1_ItemDataBound" **runat="server"**> 
```

现在，在您的 ItemDataBound 中，您可以访问 HeaderTemplate 中的 div 项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T13:00:06.297

这是因为系统找不到您指定的名称的控件。

# java - OSB 中的 XQuery 正则表达式 StackOverflowError

> ID：11413808
> 
> 赞同：0
> 
> 时间：2012-07-10T12:57:01.160
> 
> 标签：java, regex, xquery, osb

对不起，如果我真的很愚蠢（我尽量避免使用 Java-ish RegEx，并且主要使用 Perl 来处理这类事情），但我遇到了一个真正困扰我的问题。

我在 OSB 管道中有一个 XQuery 资源，该资源使用我编写的函数，其核心是将 tlv 数据 (NAME;[number];VALUE;NAME;[number];VALUE;...) 提取为所以：

```
if ($arg != '' and $name != '' and matches($arg, concat('.*;', $name, ';[0-9]+;')))
  then substring(normalize-space(substring-before(replace($arg, concat('.*;', $name, ';[0-9]+;'), ''), ';')), 1, 64)
  else '' 
```

`org.apache.xmlbeans.impl.regex.RegularExpression.matchString`考虑到大量的递归堆栈跟踪，它大约有 50% 的时间工作，并且可能在更大的字符串上失败。

问题是，它有时会在`$arg`以前满意的输入上失败，所以我猜它只是内存不足，这取决于当时发生的其他事情，所以这指向一个低效的表达式，而不是一个没有的表达式不工作。

问题是，我找不到比匹配更好的方法来定义它`.*NAME;\d+;`- 特别是考虑到 XQuery 和/或 OSB 似乎相当有限（\d 实际上没有工作，因此在我的代码中为 [0-9]） ...除非我遗漏了一些明显的东西。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T13:25:40.790

你真的需要 .* 吗？这不会匹配*很多*东西吗？[.&&[^;]]* 或等价物怎么样？即匹配任何东西。* 匹配除了分号。

# java - 倒计时服务器端实现

> ID：11413811
> 
> 赞同：0
> 
> 时间：2012-07-10T12:57:07.523
> 
> 标签：java, javascript, spring, counter

在客户端，我们有典型格式的 JS 计数器：

xx 天 xx 小时 xx 分钟 xx 秒

它一直在计数。每当计数器达到零时，我想自动关闭事件的注册。

我没有得到的是如何在服务器端和客户端同步时间，这样 cron 作业将以至少分钟的时区精度进行计算。我需要吗？除了数据库中的“日期”“时间”“语言环境”之外，我还需要什么？

上下文是 Java + Spring + Postgresql 上的 Web 应用程序

我不需要整个解决方案——关于从哪里开始挖掘的相当好的提示（或链接）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T13:08:05.470

一些想法：

*   将页面设置为自动刷新

*   定期发送 AJAX 请求以重新同步。

然而 ...

*   实际上，客户端和服务器端时钟在几个小时内明显漂移会令人惊讶。一台像样的 PC 每天漂移的时间不会超过几秒钟。

*   在 Internet 上准确同步时钟不是一个简单的问题，而且可能不是您打算使用基于 HTTP 的服务来解决的问题。

将这两者结合起来，我认为 rsyncing 计时器可能不值得尝试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T13:07:26.450

如果计时器到期，则拒绝发送来自客户端的信息

```
//have customer enter entry information

if (endtime > system.currentTimeMillis())
{
    // accept entry
    Outputstream.Write(Entry)
{

else
{
    "Sorry Registration Closed"
} 
```

另一种方法是在服务器端倒计时并在为时已晚时拒绝进入。

```
Entry = Inputstream();
if (system.currentTimeMillis() < endtime)
{
    myEntries[x] = Entry;
    response = "Entry accepted!"
}
else
{
    response = "Entry denied: Registration closed"
}

Outputstream.write(response); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T13:00:05.317

如果您需要让服务器知道客户端的倒计时何时结束，那么您需要做的就是在倒计时完成时发送一个 AJAX 请求。

# python - Python：分解字符串并将其附加到列表的更有效方法

> ID：11413812
> 
> 赞同：1
> 
> 时间：2012-07-10T12:57:11.697
> 
> 标签：python, string, list

我一直在使用这样的东西来获取一个字符串并将其分解以添加到列表中

```
example_string = "Test"
example_list =[]
for x in example_string:
    example_list.append(x) 
```

输出：

```
example_list = ['T','e','s','t'] 
```

有没有更直接的方法来做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T12:58:43.443

你的意思比更好：

```
example_string = "Test"
example_list = list(example_string) 
```

输出：

```
example_list = ["T","e","s","t"] 
```

`tuple()`在 python 中，字符串是可迭代的，如列表或元组，您可以通过调用或轻松将字符串转换为元组或列表`list()`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T13:16:01.907

如果您想为每个列表项分组 3 个字母（根据您对@Cedric 答案的评论），那么这是[文档](http://docs.python.org/library/itertools.html#recipes)`grouper`中的配方：[`itertools`](http://docs.python.org/library/itertools.html#recipes)

```
def grouper(n, iterable, fillvalue=None):
    "Collect data into fixed-length chunks or blocks"
    # grouper(3, 'ABCDEFG', 'x') --> ABC DEF Gxx
    args = [iter(iterable)] * n
    return izip_longest(fillvalue=fillvalue, *args) 
```

（您需要从 导入`izip_longest`函数`itertools`。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T14:11:18.183

要分组为 N 组（没有外部模块），您可以使用[zip](http://docs.python.org/library/functions.html#zip)中的配方`zip(*[iter(s)]*n)`

所以：

```
>>> list(zip(*[iter("longerstring")]*3))
[('l', 'o', 'n'), ('g', 'e', 'r'), ('s', 't', 'r'), ('i', 'n', 'g')] 
```

# html - 是 和 在 HTML5 文档中需要？

> ID：11413815
> 
> 赞同：1
> 
> 时间：2012-07-10T12:57:20.463
> 
> 标签：html

如果你想构建一个没有“花哨”标题的页面并像这样简单：

`<body><h1>title</h1>content</body>`

好吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T13:01:12.333

不，这是无效的。1 个错误，4 个警告：元素头缺少子元素标题的必需实例。不过，没有页眉或页脚很好。

请参阅[W3C 验证器](http://validator.w3.org/check)

这使它有效：

```
<!DOCTYPE html><head><title>title</title></head><body><h1>title</h1>content</body> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T12:58:45.267

是的，HTML5 只是形式化了现有的行为，并添加了可选的新功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T13:15:40.713

从 HTML5[规范](http://dev.w3.org/html5/spec/syntax.html)：

> 文件必须按给定顺序由以下部分组成：
> 
> 1.  （可选）单个“BOM”（U+FEFF）字符。
> 2.  任意数量的注释和空格字符。
> 3.  文档类型。
> 4.  任意数量的注释和空格字符。
> 5.  根元素，采用 html 元素的形式。
> 6.  任意数量的注释和空格字符。

如您所见，问题不在于缺少*<header>*和*<footer>*标签，而在于根元素和 DOCTYPE。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T13:01:24.173

不，语义元素只能在与 HTML5 中的语义相匹配的地方使用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-10T13:02:25.593

是的，但是您可能希望开始学习 HTML5 标签的语义和新功能，因为它们现在可能变得越来越普遍。

如果您需要向后兼容旧版浏览器，您始终可以使用 HTML5Shim，它使用 javascript 为旧版浏览器中的新标签提供结构。（特别是 IE6,7,8）

# android - 对话过渡效果

> ID：11413817
> 
> 赞同：5
> 
> 时间：2012-07-10T12:57:38.037
> 
> 标签：android

我目前正在为我的对话制作过渡效果。请参考下图：![在此处输入图像描述](../Images/25f2301d57e3959e538362eb09d919c4.png)

我的对话的入口动画应该是从上到中。而退出动画应该是中到上。我正在使用以下 XML 动画，但不幸的是，它们不起作用。

slide_down.xml

```
<?xml version="1.0" encoding="utf-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android">
<translate android:fromYDelta="100%p" android:toYDelta="0" 
android:duration="1000"/>
</set> 
```

slide_up.xml

```
<?xml version="1.0" encoding="utf-8"?>
<translate xmlns:android="http://schemas.android.com/apk/res/android"
android:fromYDelta="0%p" android:toYDelta="50%p"
android:duration="1000"/> 
```

编辑：这不是通常的`Dialog`. 它是一个`activity`应用`Theme.Dialog`在`AndroidManifest.xml`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T13:44:18.623

如果您将对话框创建为活动，那么您可以遵循这种方法

您可以创建动画类：

```
public class DropDownToMiddleAnimation extends Animation {
    public int height, width;

    @Override
    public void initialize(int width, int height, int parentWidth,
            int parentHeight) {
        // TODO Auto-generated method stub
        super.initialize(width, height, parentWidth, parentHeight);
        this.width = width;
        this.height = height;
        setDuration(500);
        setFillAfter(true);
        setInterpolator(new LinearInterpolator());
    }

    Camera camera = new Camera();

    @Override
    protected void applyTransformation(float interpolatedTime, Transformation t) {
        // TODO Auto-generated method stub
        super.applyTransformation(interpolatedTime, t);

        Matrix matrix = t.getMatrix();
        camera.save();

        camera.getMatrix(matrix);
        matrix.setTranslate(0, ((height/2) * interpolatedTime)) );

        matrix.preTranslate(0, -height);
        camera.restore();

        this.setAnimationListener(this);
    } 
```

和 ：

```
public class MiddleToTopAnimation extends Animation {
    public int height, width;

    @Override
    public void initialize(int width, int height, int parentWidth,
            int parentHeight) {
        // TODO Auto-generated method stub
        super.initialize(width, height, parentWidth, parentHeight);
        this.width = width;
        this.height = height;
        setDuration(500);
        setFillAfter(true);
        setInterpolator(new LinearInterpolator());
    }

    Camera camera = new Camera();

    @Override
    protected void applyTransformation(float interpolatedTime, Transformation t) {
        // TODO Auto-generated method stub
        super.applyTransformation(interpolatedTime, t);

        Matrix matrix = t.getMatrix();
        camera.save();

        camera.getMatrix(matrix);
        matrix.setTranslate(0, -((height/2) * interpolatedTime)) );//here is the change

        matrix.preTranslate(0, -height);
        camera.restore();

        this.setAnimationListener(this);
    } 
```

并将它们与您的对话框一起使用

```
LinearLayout ll = (LinearLayout) findViewById(R.id.parentLayout);//parent layout in the xml, which serves as the background in the custom dialog

ll.startAnimation(new DropDownToMiddleAnimation());//use with launching of the dialog

ll.startAnimation(new MiddleToTopAnimation());//use while dismissing the dialog/finishing the dialog activity 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-17T05:53:31.253

slide_down.xml

```
<?xml version="1.0" encoding="utf-8"?>
<translate xmlns:android="http://schemas.android.com/apk/res/android"
    android:duration="@android:integer/config_longAnimTime"
    android:fromYDelta="-50%p"
    android:toYDelta="0%p" /> 
```

slide_up.xml

```
<?xml version="1.0" encoding="utf-8"?>
<translate xmlns:android="http://schemas.android.com/apk/res/android"
    android:duration="@android:integer/config_longAnimTime"
    android:fromYDelta="0%p"
    android:toYDelta="-100%p" /> 
```

# python - Python 使用 'ÆØÅ' 解码 Uncode 文件

> ID：11413822
> 
> 赞同：-1
> 
> 时间：2012-07-10T12:57:52.757
> 
> 标签：python, unicode-string

我从一个丹麦文本文件中读取了一些数据。但我似乎无法找到解码它的方法。原始文本是“dør”，但在原始文本文件中存储为“d√∏r”

所以我尝试了明显的

```
InputData = "d√∏r"
Print InputData.decode('iso-8859-1') 
```

可悲的是导致以下错误：

```
UnicodeEncodeError: 'ascii' codec can't encode characters in position 1-6: ordinal not in range(128) 
```

UTF-8 给出了同样的错误。（使用 Python 2.6.5）

我如何解码此文本以便打印的消息为“dør”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T13:33:50.357

`C3 B8`是“ø”的 UTF-8 编码。您需要以 UTF-8 编码读取文件：

```
import codecs
codecs.open(myfile, encoding='utf-8') 
```

你得到 a 的原因是`UnicodeEncodeError`你试图*输出*文本而 Python 不知道你的终端是什么编码，所以它默认为`ascii`. 要解决此问题，请使用`sys.stdout = codecs.getwriter('utf8')(sys.stdout)`或使用环境变量`PYTHONIOENCODING="utf-8"`。

请注意，这会将文本作为`unicode`对象提供给您；如果您的程序中的其他所有内容都是，`str`那么您将遇到兼容性问题。使用 将所有内容转换为`unicode`或（可能更容易）将文件重新编码为 Latin-1 `ustr.encode('iso-8859-1')`，但请注意，如果有任何内容超出 Latin-1 代码页，这将中断。将您的程序转换为`str`在`utf-8`内部编码中使用可能会更容易。

# iphone - Iphone Openears .dic 文件

> ID：11413828
> 
> 赞同：-3
> 
> 时间：2012-07-10T12:58:20.180
> 
> 标签：iphone, openears

我想创建自己的 .dic 文件，而不是 openears 提供的 cmu07a.dic。因此，我在 cmu07a.dic 文件中用我自己的替换了所有 ARPA 投注。更改 cmu07a.dic 后，我的应用程序在启动时崩溃。

这是错误日志：由于未捕获的异常“NSRangeException”而终止应用程序，原因：“-[__NSCFString substringWithRange:]: Range or index out of bounds”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T06:51:28.870

我正在使用打开耳朵的默认字典，这是错误的选择。我制作了自己的 .dic 文件，然后使用该静态 .dic 文件启动 pocketSphinxController。解决了我的问题

# c# - FindSiteMapNode 的替代方案

> ID：11413831
> 
> 赞同：1
> 
> 时间：2012-07-10T12:58:35.487
> 
> 标签：c#, asp.net, sharepoint, user-controls

嗨，有没有 FindSiteMapNode 的替代品

作为 atm，我正在尝试获取原始站点的当前节点，但它返回 null，即使未启用安全性。

SiteMapNode currentNode = contentMapProvider.FindSiteMapNode("www.asdasdasda.com/asdsad.aspx");

但是它适用于

```
SiteMapNode currentNode = contentMapProvider.FindSiteMapNode(HttpContext.Current); 
```

所以寻找替代方案。

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T15:15:57.620

它不能按字符串工作的原因是您必须创建自己的门户站点地图提供程序并覆盖此功能。

来自 msdn -“在派生类中被重写时，检索表示指定 URL 处页面的 SiteMapNode 对象。”

这意味着您必须重写该类并实现您自己的检索代码。这是一个代码示例。[http://msdn.microsoft.com/en-us/library/72b370ha.aspx](http://msdn.microsoft.com/en-us/library/72b370ha.aspx)无论哪种方式，它都使用当前上下文来实现。

# asp.net-mvc - DDD 存储库 EF 性能

> ID：11413835
> 
> 赞同：1
> 
> 时间：2012-07-10T12:58:54.177
> 
> 标签：asp.net-mvc, entity-framework, repository, domain-driven-design

我想知道遵循 DDD 的人如何通过使用 EF 和存储库模式来解决潜在的性能问题，并返回带有子节点的聚合根。

例如父母 ----- 孩子 A

甚至例如 Parent ----- Child A ------- Child A2

1.  如果我从存储库中取回聚合根的数据并使用导航属性 EF，则会触发另一个查询，因为它正在使用延迟加载。这是一个问题，因为当我们处于循环中时，我们会遇到 100 多个查询。
2.  如果我通过使用“包含”语句从存储库中带回聚合根的数据以及子数据，这将从存储库中带回子数据及其父数据。然后，当我使用导航属性时，不会触发任何查询，因为该数据已经在内存中。

第二种方法的问题是我们的一些子对象数据可能非常大，例如 100,000+ 条记录。显然，我不想为孩子在内存中存储 100,000 多条记录。我们决定使用分页一次选择 10 个来解决这个问题，但另一个问题是，当我们尝试对子项使用总和、总数等计算时，我们只能在内存中对我们拥有的 10 条记录执行此操作拉回来。

我知道 DDD 方法是将对象图及其所有数据都放在内存中，然后遍历对象以获取需要显示的数据。

在我们的团队中存在分歧，一些人认为我们应该将聚合根及其子对象一起拉回，而有些人认为我们应该在聚合根的存储库上使用一种方法，直接查询子数据并拉回子对象。

我只是想知道其他人如何解决与父/子一起存储在内存中的大量数据的性能问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T13:42:37.450

如果您必须处理性能，则必须使用第二种方法以及在存储库上公开的特殊方法 - 这是存储库为您提供此类方法的点，否则您可以直接使用 EF 上下文/设置。

如果您使用理论数据，则理论很好 - 一旦您拥有真实数据，您必须调整理论以在现实世界场景中工作。

您也可以查看[这篇文章](http://blog.oneunicorn.com/2011/03/28/extra-lazy-collection-count-with-ef-4-1-part-1/)（博客上有以下三篇文章）。它采用第二种方式，但它假装是第一种方式。它适用于`Count`但也许您也可以将这个想法用于其他一些场景。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-25T20:20:22.037

DDD 方式并不总是撤回所有需要的数据。我们使用一种称为双重调度的模式的技术。在这里，您可以使用所需的所有参数调用聚合根的方法（或域服务），但您也可以使用它传递“仅查询”存储库类型接口参数。这使得根或其子节点可以决定需要哪些额外数据，以及何时应该通过简单地调用这个注入接口上的方法来返回它。

这种方法遵循 DDD 原则，即聚合根不应该知道存储库实现，同时提供可测试和高性能的域代码。

# oop - 代码纠缠和内聚之间的区别？

> ID：11413836
> 
> 赞同：0
> 
> 时间：2012-07-10T12:58:55.110
> 
> 标签：oop, aop, cohesion

关于横切关注点和面向方面的编程，您经常阅读有关代码缠结的信息。本文[1](http://www.javaworld.com/javaworld/jw-01-2002/jw-0118-aspect.html?page=3)将代码纠缠描述为：

> 软件系统中的模块可以同时与多个需求交互。例如，开发人员经常同时考虑业务逻辑、性能、同步、日志记录和安全性。如此众多的需求导致同时存在来自每个关注点的实现的元素，从而导致代码纠结。

这不和低凝聚力完全一样吗？高缠结和低内聚之间有什么区别，还是两个不同的词描述的是同一件事？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T14:25:21.607

Accourding to wikipedia:

> The implementation of a concern is **tangled** if its code is intermixed with code that implements other concerns. The module in which tangling occurs is not cohesive.

**Cohesion is decreased if**:
- The functionalities embedded in a class, accessed through its methods, have little in common.
- Methods carry out many varied activities, often using coarsely-grained or unrelated sets of data.

So.. when the code is tangled, it would violate SOLID principles such Single Responsibility Principle, Open Closed Priciple etc.

All these principles most often go together and violation of one principle/best practice lead to another.

**But tangling doesn't necessarily mean that the code is not cohesive.** For example we could have a class called SecurityChecker, which does the authentication of a user log all authentication related activties. Clearly this would be handling multiple concerns which are Authentication and Logging. Therefroe it would be a tangled class. On the other hand both these conerns would be operating on the same set of data which in this case could be user data, times of logon , number of login attempts etc. Therefore cohesion could still be high.

**Genrally most of these principles/guidlines/best practices look at the same issue from different perspectives, and the end goal is to manage dependencies between different components/classes etc so that the overall design would be more maintainable , efficient and elegant in the long run**.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T13:05:10.663

非常相似是的。

```
Cohesion is used to indicate the degree to which a class has a single, well-focused purpose. 
```

因此，如果您有一个具有单一目标的班级，那么它不会因为尝试做不止一件事而“纠结”。

# jquery - 用滚动链接导航和 jquery 动画编写 js？并且还与 ipad touchswipe 兼容？

> ID：11413840
> 
> 赞同：1
> 
> 时间：2012-07-10T12:59:08.753
> 
> 标签：jquery, ipad, scroll

我环顾四周，但似乎没有任何东西链接有问题的 2 个 jquery 函数。

此外，任何允许它在 ipad 上工作的错误修复（即在页面的该部分上突出显示相关菜单标题的滑动而不是滚动）都是很好的发现。

任何帮助将不胜感激，在 Javascript/jquery 相当新手。

示例：http: [//jqueryfordesigners.com/scroll-linked-navigation/](http://jqueryfordesigners.com/scroll-linked-navigation/)

但在那里添加了动画或缓动..

```
$(window).scroll(function () {
  var inview = '#' + $("#content_about > section > h1:in-viewport:first").parent().attr('id'),
      $link = $('.linked_nav a').filter('[hash=' + inview + ']');

  if ($link.length && !$link.is('.selected')) {
    $('.linked_nav a').removeClass('selected');
    $link.addClass('selected');
  }
}); 
```

WITH ..（可能）：

`$('html,body').animate({scrollTop: $("#"+id).offset().top-120},'slow');`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T09:22:22.757

[http://imakewebthings.com/jquery-waypoints/](http://imakewebthings.com/jquery-waypoints/)

Jquery Waypoints 涵盖了除了 touchwipe 支持之外的所有问题，可以使用此处的链接和信息进行集成：

[使用 jQuery touchwipe 对某些擦除进行默认擦除](https://stackoverflow.com/questions/6156365/default-wipe-for-some-wipes-using-jquery-touchwipe)

# java - 无法停止工作线程，可能会造成内存泄漏。

> ID：11413842
> 
> 赞同：2
> 
> 时间：2012-07-10T12:59:10.260
> 
> 标签：java, tomcat, servlets, quartz-scheduler

我正在使用实现 ServletContextListener 的 servlet 来启动石英调度程序实例@starup。在 contextDestroyed() 方法中，调度程序实例被停止。

```
@Override
public void contextDestroyed(ServletContextEvent sce) {
    try {
        Scheduler scheduler = QuartzSchedulerUtil.getCurrentScheduler();
        scheduler.shutdown(true);
        // Sleep for a bit so that we don't get any errors
        Thread.sleep(1000);
        Driver mySqlDriver = DriverManager.getDriver(hibernateConnectionUrl);
        DriverManager.deregisterDriver(mySqlDriver);
    } catch (SchedulerException ex) {
        Logger.getLogger(QuartzServlet.class.getName()).log(Level.SEVERE, null, ex);
    } catch (InterruptedException ex) {
        Logger.getLogger(QuartzServlet.class.getName()).log(Level.SEVERE, null, ex);
    } catch (SQLException ex) {
        Logger.getLogger(QuartzServlet.class.getName()).log(Level.SEVERE, null, ex);
    }        
    System.out.println("THE QUARTZ APP STOPPED");
} 
```

但是当应用程序被部署时，我收到内存泄漏警告，指出woker 线程没有停止。

```
Jul 10, 2012 3:46:12 PM org.apache.catalina.loader.WebappClassLoader
clearReferencesThreads SEVERE: The web application [/latest-raisin]
appears to have started a thread named [Timer-0] but has failed to
stop it. This is very likely to create a memory leak.

Jul 10, 2012 3:46:12 PM org.apache.catalina.loader.WebappClassLoader
clearReferencesThreads SEVERE: The web application [/latest-raisin]
appears to have started a thread named 
[com.mchange.v2.async.ThreadPoolAsynchronousRunner$PoolThread-#0] but
has failed to stop it. This is very likely to create a memory leak.

Jul 10, 2012 3:46:12 PM org.apache.catalina.loader.WebappClassLoader
clearReferencesThreads SEVERE: The web application [/latest-raisin]
appears to have started a thread named
[com.mchange.v2.async.ThreadPoolAsynchronousRunner$PoolThread-#1] but
has failed to stop it. This is very likely to create a memory leak.

Jul 10, 2012 3:46:12 PM org.apache.catalina.loader.WebappClassLoader
clearReferencesThreads SEVERE: The web application [/latest-raisin]
appears to have started a thread named
[com.mchange.v2.async.ThreadPoolAsynchronousRunner$PoolThread-#2] but
has failed to stop it. This is very likely to create a memory leak. 
```

我尝试了帖子中提到的解决方案 - [http://forums.terracotta.org/forums/posts/list/15/4341.page](http://forums.terracotta.org/forums/posts/list/15/4341.page) 但是在取消部署应用程序时仍然收到严重的内存泄漏警告。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-13T14:43:17.627

`org.quartz.scheduler.interruptJobsOnShutdown` 如果您想关闭作业仍在执行中，您可以设置该属性以中断作业。

# php - 将图像从 iOS 上传到 PHP

> ID：11413846
> 
> 赞同：24
> 
> 时间：2012-07-10T12:59:30.920
> 
> 标签：php, objective-c, ios, http, post

我一直在努力将 UIImage 上传到网络服务器。问题是，图像永远不会出现在服务器上。来自 HTML 文件的普通 POST 有效。我认为这是我的 Objective-C 代码中的一个问题。

这是我的objective-c代码：

```
NSData *imageData = UIImagePNGRepresentation(delegate.dataBean.image);
NSString *urlString = [NSString stringWithFormat:@"%@test.php", delegate.dataBean.hosterURL];

NSMutableURLRequest *request = [[NSMutableURLRequest alloc] init];
[request setURL:[NSURL URLWithString:urlString]];
[request setHTTPMethod:@"POST"];

NSString *boundary = [NSString stringWithString:@"---------------------------14737809831466499882746641449"];
NSString *contentType = [NSString stringWithFormat:@"multipart/form-data; boundary=%@",boundary];
[request addValue:contentType forHTTPHeaderField: @"Content-Type"];

NSMutableData *body = [NSMutableData data];
[body appendData:[[NSString stringWithFormat:@"rn--%@rn",boundary] dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:[[NSString stringWithFormat:@"Content-Disposition: form-data; name=\"uploadedfile\"; filename=\"test.png\"rn"] dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:[[NSString stringWithString:@"Content-Type: application/octet-streamrnrn"] dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:[NSData dataWithData:imageData]];
[body appendData:[[NSString stringWithFormat:@"rn--%@--rn",boundary] dataUsingEncoding:NSUTF8StringEncoding]];
[request setHTTPBody:body];

NSData *returnData = [NSURLConnection sendSynchronousRequest:request returningResponse:nil error:nil];
NSString *returnString = [[NSString alloc] initWithData:returnData encoding:NSUTF8StringEncoding];

NSLog([NSString stringWithFormat:@"Image Return String: %@", returnString]); 
```

这是我的PHP代码：

```
<?php
$uploaddir = 'uploads/';
$file = basename($_FILES['uploadedfile']['name']);
$uploadfile = $uploaddir . $file;

echo "file=".$file; //is empty, but shouldn't

if (move_uploaded_file($_FILES['uploadedfile']['tmp_name'], $uploadfile)) {
    echo $file;
}
else {
    echo "error";
}
?> 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-07-11T09:37:13.680

现在我自己解决了=）

我忘记了正文中的反斜杠。

这是正确的身体：

```
NSMutableData *body = [NSMutableData data];
[body appendData:[[NSString stringWithFormat:@"\r\n--%@\r\n",boundary] dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:[[NSString stringWithFormat:@"Content-Disposition: form-data; name=\"uploadedfile\"; filename=\"test.png\"\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:[[NSString stringWithString:@"Content-Type: application/octet-stream\r\n\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:[NSData dataWithData:imageData]];
[body appendData:[[NSString stringWithFormat:@"\r\n--%@--\r\n",boundary] dataUsingEncoding:NSUTF8StringEncoding]];
[request setHTTPBody:body]; 
```

# iphone - XCode 4 - 轻松访问安装在模拟器上的应用程序的“文档”文件夹

> ID：11413847
> 
> 赞同：4
> 
> 时间：2012-07-10T12:59:31.930
> 
> 标签：iphone, xcode, ios-simulator, directory

在模拟器上运行应用程序时，它会在 Mac 上创建一个文件夹，以将应用程序数据包含在“文档”文件夹中。当您从模拟器中删除应用程序或将某些应用程序设置更改为 XCode 时，此文件夹会更改。当您拥有数十个应用程序时，手动找到好的应用程序是一场噩梦。

有没有办法轻松访问这个文件夹？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-11T01:49:01.867

只是想尝试回答。如何记录它，如下所示：

```
 //App Directory & Directory Contents
   NSString *appFolderPath = [[NSBundle mainBundle] resourcePath];
   NSFileManager *fileManager = [NSFileManager defaultManager];  
   NSLog(@"App Directory is: %@", appFolderPath);
   NSLog(@"Directory Contents:\n%@", [fileManager directoryContentsAtPath: appFolderPath]); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-10T13:09:28.697

我所做的是在 Finder 侧边栏中创建一个指向模拟器文件夹的链接。大约是：

> /Users/userName/Library/Application/Support/iPhone/Simulator/5.0/Applications/

然后我将该文件夹按“上次修改”排序。一旦找到我正在处理的应用程序的应用程序文件夹，我将其展开以显示应用程序（并查看应用程序名称）并在文件夹上设置颜色。Finder 有时不会保留按“上次修改时间”排序的文件夹，除非窗口关闭并重新打开。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-11T23:25:24.940

位置一般是： `/Users/yourusername/Library/Application Support/iPhone Simulator/7.1/Applications/appcode/Documents/yourdocuments.db`

'yourusername'：您用于开发机器的用户
名

路径中的版本号 (7.1) 取决于 Xcode 的版本，因此取决于模拟器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-03-21T10:38:27.790

[Bazinga的回答](https://stackoverflow.com/a/11424447/216129)（连同[sebrenner 的弃用通知](https://stackoverflow.com/a/34582955/216129)）非常适合 Objective-C。

对于 Swift，等价于：

```
let appFolderPath = NSBundle.mainBundle().resourcePath
let fileManager = NSFileManager.defaultManager()
print("App Directory is: \(appFolderPath)")
print("Directory Contents:\n \(fileManager.contentsAtPath(appFolderPath!))") 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-01-03T23:45:11.740

directoryContentsAtPath: 已弃用。

而是使用 contentsOfDirectoryAtPath:error:

```
 //App Directory & Directory Contents
   NSString *appFolderPath = [[NSBundle mainBundle] resourcePath];
   NSFileManager *fileManager = [NSFileManager defaultManager];  
   NSLog(@"App Directory is: %@", appFolderPath);
    NSLog(@"Directory Contents:\n%@", [fileManager contentsOfDirectoryAtPath:appFolderPath error:nil]); 
```

请参阅[https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSFileManager_Class/#//apple_ref/occ/instm/NSFileManager/directoryContentsAtPath](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSFileManager_Class/#//apple_ref/occ/instm/NSFileManager/directoryContentsAtPath)：

# 3dsmax - 在 3dmax maxscript 中更改 vrml 97 导出器窗口必须更改“精度数字 = 8”

> ID：11413854
> 
> 赞同：0
> 
> 时间：2012-07-10T13:00:10.400
> 
> 标签：3dsmax

3ds 文件，我必须以 wrl 格式导出这些文件，我有一个脚本，但问题是我如何通过 maxscript 在 vrml 97 导出器窗口中更改设置

eg: 精度数 = 8 默认为 4

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T01:50:01.130

通常设置保存在`<max>/plugcfg`文件夹中。在那里查找可能存储 VRML 导出器设置的文件。我知道有 FBX 设置，但不确定是否适用于 VRML。

# c++ - 为什么转置 512x512 的矩阵比转置 513x513 的矩阵慢得多？

> ID：11413855
> 
> 赞同：241
> 
> 时间：2012-07-10T13:00:20.647
> 
> 标签：c++, performance, optimization

在对不同大小的方阵进行了一些实验之后，出现了一种模式。**转置一个 size 的矩阵`2^n``2^n+1`**总是**比转置一个 size 的矩阵要慢**。对于较小的 值`n`，差异不大。

然而，在 512 的值上会出现很大的差异。（至少对我来说）

*免责声明：我知道由于元素的双重交换，该函数实际上并没有转置矩阵，但这没有区别。*

遵循代码：

```
#define SAMPLES 1000
#define MATSIZE 512

#include <time.h>
#include <iostream>
int mat[MATSIZE][MATSIZE];

void transpose()
{
   for ( int i = 0 ; i < MATSIZE ; i++ )
   for ( int j = 0 ; j < MATSIZE ; j++ )
   {
       int aux = mat[i][j];
       mat[i][j] = mat[j][i];
       mat[j][i] = aux;
   }
}

int main()
{
   //initialize matrix
   for ( int i = 0 ; i < MATSIZE ; i++ )
   for ( int j = 0 ; j < MATSIZE ; j++ )
       mat[i][j] = i+j;

   int t = clock();
   for ( int i = 0 ; i < SAMPLES ; i++ )
       transpose();
   int elapsed = clock() - t;

   std::cout << "Average for a matrix of " << MATSIZE << ": " << elapsed / SAMPLES;
} 
```

改变`MATSIZE`让我们改变大小（呃！）。我在ideone上发布了两个版本：

*   **大小 512** - 平均**2.46 毫秒**- [http://ideone.com/1PV7m](http://ideone.com/1PV7m)
*   **大小 513** - 平均**0.75 毫秒**- [http://ideone.com/NShpo](http://ideone.com/NShpo)

在我的环境中（MSVS 2010，完全优化），区别是相似的：

*   **大小 512** - 平均**2.19 毫秒**
*   **大小 513** - 平均**0.57 毫秒**

**为什么会这样？**

* * *

## 回答 #1

> 赞同：208
> 
> 时间：2012-07-10T13:00:21.473

解释来自 Agner Fog 在[*Optimizing software in C++ 中*](http://www.agner.org/optimize/optimizing_cpp.pdf)，它简化了数据在缓存中的访问和存储方式。

有关术语和详细信息，请参阅[关于缓存的 wiki 条目](http://en.wikipedia.org/wiki/L2_cache)，我将在这里缩小范围。

缓存以*集合*和*行*的形式组织。一次只使用一组，其中包含的任何行都可以使用。一条线可以镜像的内存乘以线数就可以得出缓存大小。

对于特定的内存地址，我们可以使用以下公式计算哪个集合应该镜像它：

```
set = ( address / lineSize ) % numberOfsets 
```

这种公式理想地给出了跨集合的均匀分布，因为每个内存地址都可能被读取（我说的是*理想情况*）。

很明显，可能会发生重叠。在缓存未命中的情况下，将在缓存中读取内存并替换旧值。请记住，每组都有许多行，其中最近最少使用的行将被新读取的内存覆盖。

我将尝试在某种程度上遵循 Agner 的示例：

假设每组有 4 行，每行包含 64 个字节。我们首先尝试读取`0x2710`set 中的地址`28`。然后我们还尝试读取地址`0x2F00`、`0x3700`和。所有这些都属于同一个集合。在阅读之前，集合中的所有行都将被占用。读取该内存会驱逐集合中的现有行，即最初持有的行。问题在于我们读取的地址（对于这个例子）是分开的。这是**关键的一步**（同样，对于这个例子）。`0x3F00``0x4700``0x4700``0x2710``0x800`

 **还可以计算临界步幅：

```
criticalStride = numberOfSets * lineSize 
```

`criticalStride`间隔或多个分开的变量竞争相同的高速缓存行。

这是理论部分。接下来，解释（也是Agner，我密切关注它以避免出错）：

假设一个 64x64 的矩阵（请记住，效果因缓存而异）具有 8kb 缓存，每组 4 行 * 行大小为 64 字节。每行可以容纳矩阵中的 8 个元素（64 位`int`）。

临界步长为 2048 字节，对应于矩阵的 4 行（在内存中是连续的）。

假设我们正在处理第 28 行。我们正在尝试获取该行的元素并将它们与第 28 列中的元素交换。该行的前 8 个元素组成一个缓存行，但它们将进入 8 个不同的第 28 列中的缓存行。请记住，临界步长相隔 4 行（一列中有 4 个连续元素）。

当列中的元素 16 到达时（每组 4 个缓存行和相隔 4 行 = 麻烦），前 0 元素将从缓存中逐出。当我们到达列的末尾时，所有先前的缓存行都将丢失，并且需要在访问下一个元素时重新加载（整行被覆盖）。

大小不是临界步长的倍数会使这个**完美**的灾难场景变得混乱，因为我们不再处理在垂直方向上临界步距分开的元素，因此缓存重新加载的次数大大减少。

*另一个免责声明*- 我只是理解了这个解释，希望我明白了，但我可能弄错了。无论如何，我正在等待[Mysticial](https://stackoverflow.com/users/922184/mysticial)的回复（或确认） 。:)

* * *

## 回答 #2

> 赞同：85
> 
> 时间：2017-12-29T22:34:59.403

作为[Luchian Grigore 回答](https://stackoverflow.com/a/11413856/673852)中解释的说明，以下是 64x64 和 65x65 矩阵两种情况下矩阵缓存存在的样子（有关数字的详细信息，请参见上面的链接）。

以下动画中的颜色含义如下：

*   [![白色的](../Images/7bc9e6ab8086c7838b1278a631caaf46.png)](https://i.stack.imgur.com/InJut.png)– 不在缓存中，
*   [![浅绿色](../Images/8108d47d0bb700aa9aac53dd30690542.png)](https://i.stack.imgur.com/sCWNW.png)– 在缓存中，
*   [![亮绿色](../Images/d44b64fcfd75a0de817924dfa0f275d0.png)](https://i.stack.imgur.com/hQduW.png)– 缓存命中，
*   [![橙](../Images/7e34c4f9d94acf8ba337ce46de19db79.png)](https://i.stack.imgur.com/YjDKL.png)– 只需从 RAM 中读取，
*   [![红色的](../Images/b07a971af7687547a73f5bec1bad0ba7.png)](https://i.stack.imgur.com/pKyAD.png)– 缓存未命中。

64x64 案例：

[![64x64 矩阵的缓存存在动画](../Images/723b3ecf3929ee898e148dd3b6d9a799.png)](https://media.giphy.com/media/3o752kgqGGmfcti8KY/giphy.gif)

请注意，*几乎每次*访问新行都会导致缓存未命中。现在它是如何寻找正常情况的，一个 65x65 矩阵：

[![缓存 65x65 矩阵的存在动画](../Images/af08f4d827175b6f491c8b2a7c036355.png)](https://media.giphy.com/media/d1G6dyzcFW8CvL3y/giphy.gif)

在这里，您可以看到初始预热后的大多数访问都是缓存命中。这就是 CPU 缓存的一般工作方式。

* * *

[为上述动画生成帧的代码可以在[这里](https://github.com/10110111/cpu-cache-visualization)看到。]

* * *

## 回答 #3

> 赞同：80
> 
> 时间：2012-07-10T13:26:41.610

Luchian 解释了*为什么*会发生这种行为，但我认为展示这个问题的一种可能的解决方案并同时展示一些关于缓存遗忘算法的信息是一个好主意。

你的算法基本上是：

```
for (int i = 0; i < N; i++) 
   for (int j = 0; j < N; j++) 
        A[j][i] = A[i][j]; 
```

这对于现代 CPU 来说太可怕了。一种解决方案是了解有关缓存系统的详细信息并调整算法以避免这些问题。只要您知道这些细节，就可以很好地工作.. 不是特别便携。

我们还能做得更好吗？是的，我们可以：解决这个问题的一般方法是[缓存遗忘算法](http://en.wikipedia.org/wiki/Cache-oblivious_algorithm)，顾名思义，它避免依赖于特定的缓存大小 [1]

解决方案如下所示：

```
void recursiveTranspose(int i0, int i1, int j0, int j1) {
    int di = i1 - i0, dj = j1 - j0;
    const int LEAFSIZE = 32; // well ok caching still affects this one here
    if (di >= dj && di > LEAFSIZE) {
        int im = (i0 + i1) / 2;
        recursiveTranspose(i0, im, j0, j1);
        recursiveTranspose(im, i1, j0, j1);
    } else if (dj > LEAFSIZE) {
        int jm = (j0 + j1) / 2;
        recursiveTranspose(i0, i1, j0, jm);
        recursiveTranspose(i0, i1, jm, j1);
    } else {
    for (int i = i0; i < i1; i++ )
        for (int j = j0; j < j1; j++ )
            mat[j][i] = mat[i][j];
    }
} 
```

稍微复杂一点，但一个简短的测试显示了我古老的 e8400 与 VS2010 x64 版本相当有趣，测试代码为`MATSIZE 8192`

```
int main() {
    LARGE_INTEGER start, end, freq;
    QueryPerformanceFrequency(&freq);
    QueryPerformanceCounter(&start);
    recursiveTranspose(0, MATSIZE, 0, MATSIZE);
    QueryPerformanceCounter(&end);
    printf("recursive: %.2fms\n", (end.QuadPart - start.QuadPart) / (double(freq.QuadPart) / 1000));

    QueryPerformanceCounter(&start);
    transpose();
    QueryPerformanceCounter(&end);
    printf("iterative: %.2fms\n", (end.QuadPart - start.QuadPart) / (double(freq.QuadPart) / 1000));
    return 0;
}

results: 
recursive: 480.58ms
iterative: 3678.46ms 
```

编辑：关于大小的影响：虽然在某种程度上仍然很明显，但它的影响要小得多，这是因为我们使用迭代解决方案作为叶节点，而不是递归到 1（递归算法的通常优化）。如果我们设置 LEAFSIZE = 1，缓存对我没有影响 [ `8193: 1214.06; 8192: 1171.62ms, 8191: 1351.07ms`- 在误差范围内，波动在 100ms 范围内；如果我们想要完全准确的值，我不会对这个“基准”感到满意]）

[1] 这些东西的来源：好吧，如果你不能从与 Leiserson 及其合作者一起工作的人那里得到讲座……我认为他们的论文是一个很好的起点。这些算法仍然很少被描述——CLR 有一个关于它们的脚注。仍然是给人们带来惊喜的好方法。

* * *

**编辑**（注意：我不是发布这个答案的人；我只是想添加这个）：
这是上述代码的完整 C++ 版本：

```
template<class InIt, class OutIt>
void transpose(InIt const input, OutIt const output,
    size_t const rows, size_t const columns,
    size_t const r1 = 0, size_t const c1 = 0,
    size_t r2 = ~(size_t) 0, size_t c2 = ~(size_t) 0,
    size_t const leaf = 0x20)
{
    if (!~c2) { c2 = columns - c1; }
    if (!~r2) { r2 = rows - r1; }
    size_t const di = r2 - r1, dj = c2 - c1;
    if (di >= dj && di > leaf)
    {
        transpose(input, output, rows, columns, r1, c1, (r1 + r2) / 2, c2);
        transpose(input, output, rows, columns, (r1 + r2) / 2, c1, r2, c2);
    }
    else if (dj > leaf)
    {
        transpose(input, output, rows, columns, r1, c1, r2, (c1 + c2) / 2);
        transpose(input, output, rows, columns, r1, (c1 + c2) / 2, r2, c2);
    }
    else
    {
        for (ptrdiff_t i1 = (ptrdiff_t) r1, i2 = (ptrdiff_t) (i1 * columns);
            i1 < (ptrdiff_t) r2; ++i1, i2 += (ptrdiff_t) columns)
        {
            for (ptrdiff_t j1 = (ptrdiff_t) c1, j2 = (ptrdiff_t) (j1 * rows);
                j1 < (ptrdiff_t) c2; ++j1, j2 += (ptrdiff_t) rows)
            {
                output[j2 + i1] = input[i2 + j1];
            }
        }
    }
} 
```**

# android - 从 Android 混合应用程序访问 Salesforce 沙盒

> ID：11413858
> 
> 赞同：2
> 
> 时间：2012-07-10T13:00:26.130
> 
> 标签：android, cordova, salesforce, hybrid

是否可以从使用 Salesforce.com Mobile SDK for Android 生成的混合应用程序访问 test.salesforce.com？

使用 iOS SDK 时，可以通过应用程序设置来设置登录 URL，但这在 Android 上的混合应用程序中似乎是不可能的。

我是否需要修改 PhoneGap 插件 SalesforceOAuthPlugin 来执行此操作？

我指的是[https://github.com/forcedotcom/SalesforceMobileSDK-Android提供的 SDK](https://github.com/forcedotcom/SalesforceMobileSDK-Android)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T14:33:50.797

我认为使用 javascript 无法做到这一点，如果您使用 mac 进行此操作，则必须在（设置 | 您的应用程序 | 自定义主机）更改您的应用程序设置并通过测试替换登录。

如果您在 android 上执行此操作，则必须`DEFAULT_LOGIN_URL`将 classe 的属性编辑`com.salesforce.androidsdk.auth.OAuth2.java`为测试登录 URL ( `https://test.salesforce.com`)。

一个星期以来我就遇到了这个麻烦，这就是我所做的，它适用于我的混合应用程序。

# c++ - 短文件名的最佳字符串散列函数

> ID：11413860
> 
> 赞同：2
> 
> 时间：2012-07-10T13:00:33.570
> 
> 标签：c++, string, hash

对于像字符串这样的文件名来说，最好的字符串散列函数是什么？字符串将类似于：

```
pics/test.pic
maps/test.map
materials/metal.mtl 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-10T13:14:42.777

如果要散列的数据的性质不需要任何花哨的散列算法，例如文本字符串的性质，您可能需要尝试[FNV 散列函数](http://en.wikipedia.org/wiki/Fowler%E2%80%93Noll%E2%80%93Vo_hash_function)。FNV 散列是 Fowler/Noll/Vo 的缩写，以纪念创造者，是一种非常快速的算法，已在许多应用程序中使用并取得了出色的结果，而且由于其简单性，FNV 散列应该是最早尝试的散列之一一个应用程序。

```
unsigned int fnv_hash (void* key, int len)
{
    unsigned char* p = key;
    unsigned int h = 2166136261;
    int i;

    for (i = 0; i < len; i++)
        h = (h*16777619) ^ p[i];

    return h;
} 
```

或者使用[MD5 算法](http://en.wikipedia.org/wiki/MD5)来代替，它是通用的，因此可以很好地满足您的需求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T13:15:11.343

不存在独立于如何使用散列的普遍“最佳”散列函数。

假设您想要一个 32 位的 int 以便在内存中使用一个小的哈希表。

然后你可以使用[FNV-1a 算法](http://isthe.com/chongo/tech/comp/fnv/)：

```
hash = offset_basis
for each octet_of_data to be hashed
 hash = hash xor octet_of_data
 hash = hash * FNV_prime
return hash 
```

如果您的目的是确信两条路径给出不同的哈希，那么您可以使用[SHA1 算法](http://en.wikipedia.org/wiki/SHA-1)。

如果您想确定恶意创建冲突非常困难，那么您可以使用[SHA256](http://en.wikipedia.org/wiki/SHA-256)。

请注意，最后两个算法会生成长哈希（比您的典型路径长）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T13:30:51.847

只需使用`std::hash<std::string>`. 这是您的库实现者对“最佳”通用非加密哈希函数的想法。

# jquery - 如何使 jquery 搜索与动态列表视图一起使用？

> ID：11413866
> 
> 赞同：0
> 
> 时间：2012-07-10T13:01:08.313
> 
> 标签：jquery, mobile

我正在尝试在 listview 上使用 data-filter="true" 功能。我发现它只适用于静态列表（即所有 li 元素都列在 html 文件中）。对于动态生成的列表，它不起作用。似乎它需要以某种方式重新初始化。这是我尝试过的：

```
<!DOCTYPE html>
<html>
<head>
<title>View Events</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="shortcut icon" href="favicon.ico" />
<link rel="stylesheet"
  href="script/jquery.mobile-1.1.0/jquery.mobile-1.1.0.min.css" />
<script type="text/javascript" src="script/jquery-1.7.2.min.js"></script>
<script type="text/javascript"
  src="script/jquery.mobile-1.1.0/jquery.mobile-1.1.0.min.js"></script>
<script type="text/javascript" src="script/pure_min.js"></script>
</head>
<body>
  <div data-role="page" id="view-events">
    <div data-role="header" data-id="header" data-position="fixed">
      <h3>
        View Events of <span id="events-for-pump-id" class="pump-id">...</span>
      </h3>
    </div>
    <div data-role="content">
      <ul id="events" data-role="listview" style="display: none;" data-filter="true">
        <li class="events code"></li>
      </ul>
    </div>
    <script type="text/javascript">
                    $(document).on('pageinit', '#view-events', function() {

                        $('#events-for-pump-id').autoRender({
                            'pump-id' : 123
                        });
                        $('#events').autoRender({
                            events : [ {
                                code : 1
                            }, {
                                code : 2
                            }, {
                                code : 3
                            } ]
                        });

                        $('#events').show();
                    });
                </script>
  </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T13:12:37.437

我在随意的谷歌搜索[http://www.elijahmanor.com/2011/02/dynamically-appending-elements-to.html](http://www.elijahmanor.com/2011/02/dynamically-appending-elements-to.html)上发现了这个，你检查过吗？

# java - 在谷歌应用引擎（Jetty）中禁用 taglib 扫描

> ID：11413869
> 
> 赞同：5
> 
> 时间：2012-07-10T13:01:13.253
> 
> 标签：java, google-app-engine, jsp, jetty, taglib

为了减少我的实例的启动时间，我遇到了 taglib 类路径扫描。

我的应用程序有 50mb 的罐子。tld 的扫描占用了启动时间的 20%。

![Yourkit 捕获的启动时间](../Images/1bc669e800c61620c7057474872fd0b0.png)

有没有办法禁用它？我只使用已经包含的 JSTL 标准库（[用于 jsp 的 gae doc](https://developers.google.com/appengine/docs/java/config/webxml#JSPs)）

我也想禁用 JSP 预编译。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T08:04:21.580

我查看了 TagLibConfiguration 的源代码[http://javasourcecode.org/html/open-source/jetty/jetty-6.1.26/org/mortbay/jetty/webapp/TagLibConfiguration.java.html#line.134](http://javasourcecode.org/html/open-source/jetty/jetty-6.1.26/org/mortbay/jetty/webapp/TagLibConfiguration.java.html#line.134)发现它尊重参数 NoTLDJarPattern

在 web.xml 中配置 NoTLDJarPattern 参数以减少扫描时间：

```
<context-param>
    <param-name>org.mortbay.jetty.webapp.NoTLDJarPattern</param-name>
    <param-value>test.jar|prefix-.*\.jar</param-value>
</context-param> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T13:24:38.503

看到这个...

[Jsp码头配置](http://docs.codehaus.org/display/JETTY/Jsp+Configuration)

问候。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T22:42:14.043

您可以轻松禁用预编译，只需在部署描述符 web.xml 文件中放入下一行：[App-Engine doc here。](https://developers.google.com/appengine/docs/java/config/appconfig#Disabling_Precompilation)

```
<precompilation-enabled>false</precompilation-enabled> 
```

# mysql - 优化此 SQL 查询

> ID：11413870
> 
> 赞同：0
> 
> 时间：2012-07-10T13:01:17.723
> 
> 标签：mysql, sql, performance, optimization

您将如何优化以下查询？

*   “example_companies”包含公司数据。
*   “example_roles_companies”包含公司角色（枢轴）
*   “example_industries_companies”包含公司行业（枢轴）

* * *

```
SELECT DISTINCT a.id,
                a.mode,
                a.name,
                a.city,
                b.name AS USER,
                b.phone
FROM   example_companies a
       LEFT JOIN example_users b
         ON a.contact_id = b.id
       LEFT JOIN example_roles_companies c
         ON a.id = c.company_id
WHERE  "2" IN (SELECT industry_id
               FROM   example_industries_companies
               WHERE  company_id = a.id)
       AND c.role_id = 2
       AND a.account_mode != 2
ORDER  BY a.id 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T13:18:16.120

询问：

```
SELECT DISTINCT a.id,
                a.mode,
                a.name,
                a.city,
                b.name AS USER,
                b.phone
FROM example_companies a
LEFT JOIN example_users b ON a.contact_id = b.id
INNER JOIN example_roles_companies c ON a.id = c.company_id AND c.role_id = 2
INNER JOIN example_industries_companies i
        ON i.company_id = a.id AND i.industry_id = "2"
WHERE 
    a.account_mode != 2
ORDER BY 
    a.id 
```

结构：

*   a.id 上的索引，不为空
*   b.id 上的索引，不为空 [分析向此表添加另一个索引（b.id、b.name、b.phone）的机会]
*   (c.company_id, c.role_id) 上的索引不为空
*   (i.company_id, i.industry_id) 上的索引，两者都不为空

评论：

请注意，您`industry_id = "2"`对我来说似乎很奇怪，ID 通常是数字，如果不是，那么应该查看它，因为整数比字符串处理得更快。此外，这种双引号方式在 mysql 中并不常见。你确定你的语法吗？

# operating-system - 使用虚拟化的系统聚合

> ID：11413872
> 
> 赞同：0
> 
> 时间：2012-07-10T13:01:22.777
> 
> 标签：operating-system, virtualization

理论上可以使多台机器看起来像一台机器，而不是将一台机器虚拟化为多台机器。 [ScaleMP](http://www.scalemp.com)似乎使用了这种技术。

我在哪里可以找到关于开发这样一个系统的研究/文献？有没有这方面的开源平台？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T13:14:51.640

我不知道有一个系统可以透明地执行此操作，即假装多台计算机是一台。

如果程序需要在多台计算机上运行，​​它们通常是专门为此目的而开发的，通常使用诸如[MPI](http://en.wikipedia.org/wiki/Message_Passing_Interface)之类的技术。

此外，具有大量运行进程的系统可能会将一个正在运行的进程[移动](http://en.wikipedia.org/wiki/Process_migration)到另一台计算机上，以更均匀地分配负载。

# .net - 如何验证字段以便只能填写一个？

> ID：11413880
> 
> 赞同：2
> 
> 时间：2012-07-10T13:01:39.297
> 
> 标签：.net, asp.net-mvc-3

我有 2 个文本字段，当按下提交时，如果 a) 未填写任何字段或 b) 两个字段均已填写，我希望弹出一条错误消息。如何实现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T13:04:41.323

`XOR`

```
if (!(string.IsNullOrEmpty(field1) == string.IsNullOrEmpty(field2)))
{ throw error } 
```

# javascript - 只需重置 Javascript 数组的索引

> ID：11413887
> 
> 赞同：9
> 
> 时间：2012-07-10T13:01:55.993
> 
> 标签：javascript, arrays, indexing, indexof

我有一个`for`返回数组的循环。

返回：

```
1st loop:
arr[0]
arr[1]
arr[2]
arr[3] 
```

我得到的长度是`4`（不是问题）。

返回：

```
2nd loop
arr[4]
arr[5]
arr[6]
arr[7] 
arr[8] 
```

我得到的长度是`9`.

我在这里想要的是索引的实际计数，即我需要它`5`。我怎样才能做到这一点。有没有一种方法可以让我每次进入每个循环时都从它开始，`0`以便我在所有循环中获得适当的长度？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-12-14T18:28:39.770

这很容易使用 Array.filter 在本地完成：

```
resetArr = orgArr.filter(function(){return true;}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-10T13:13:41.143

您可以将数组中的所有元素复制到一个索引从零开始的新数组中。

例如

```
function startFromZero(arr) {
    var newArr = [];
    var count = 0;

    for (var i in arr) {
        newArr[count++] = arr[i];
    }

    return newArr;
}

// messed up array
x = [];
x[3] = 'a';
x[4] = 'b';
x[5] = 'c';

// everything is reordered starting at zero
x = startFromZero(x); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-16T19:18:12.343

也许“underscore.js”在这里会很有用。

该`_.compact()`函数返回一个没有 的数组副本`undefined`。

见：[http ://underscorejs.org/#compact](http://underscorejs.org/#compact)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2019-03-08T14:38:21.883

简单的，

```
var filterd_array = my_array.filter(Boolean); 
```

# java - 从 Eclipse 将 Scala 项目导出为 jar

> ID：11413888
> 
> 赞同：2
> 
> 时间：2012-07-10T13:01:59.317
> 
> 标签：java, scala, compilation

我有一个 Scala 项目，我想将其导出为 jar。

*1。起初我尝试为项目创建一个 Java 类作为入口点

```
public class JMain {
 public static void main(String[] args) {
  System.out.println("Java main calling Scala main");
  SMain.main(new String[] {""}); //SMain.main is the actual *main* 
```

当从 Eclipse 启动时，这工作得很好而且很花哨，但是当我将它导出为 jar 时，它会给我 18 个左右的异常。我现在确实知道如何复制 Eclipse 设法启动它的“环境”，我很确定它依赖于 Scala 已经在我的系统上的事实——我需要一个包含所有东西的自包含 jar。

*2。我的第二次尝试包括尝试*lach*在这里建议的内容[如何从 Eclipse 部署 Scala 项目？](https://stackoverflow.com/questions/2921600/how-to-deploy-a-scala-project-from-eclipse) 即：

```
public class JMain {
 public static void main(String[] args) {
  System.out.println("Java Main");
  List<String> argList = new ArrayList<String>();
  argList.add("fully.qualified.ClassName"); //???
  for (String s : args) argList.add(s);
  scala.tools.nsc.MainGenericRunner.main(argList.toArray(new String[0])); 
```

这次它甚至不会从 Eclipse 运行，尽管它只给出了 6 个左右的异常，从著名的**NoClassDefFoundError**开始。我有一种感觉，我没有完全正确*。qualified.ClassName*。*3。如果*主要*的Scala 类被称为“Dis.scala”并且位于包“pack”中，那么这个*fully.qualified.ClassName*不应该是“pack.Dis”吗？

我正在使用 Jre 1.6 和 Scala 2.9.2 编辑：我已经包含了所有外部导入的 jar，甚至是 scala-library.jar - 一切都很好并且装在 jar 中

PS 我不熟悉 Ant 或 Maven 或 Sbt。我只想让我的 Scala 项目 jared - 如果可能的话，不要卷入毛茸茸的事情。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-10T14:13:22.543

这对我有用： 1\. 创建 scala 项目 2\. 创建 Wrapper java 项目 3\. 将 scala-library.jar 添加到您的 java 项目构建路径。

所以你只需要第三步，因为其余的看起来和我做的很相似。然后就可以愉快的使用了：java - jar file.jar

编辑：如何使用 Scala - Eclipse IDE 创建包含另一个 Java 项目可以使用的 Scala/代码的 JAR 文件。

1.  创建一个新的 Scala 项目并定义一个带有 main 方法的对象作为入口点。
2.  现在创建一个新的 Java 项目并将您的 Scala 项目添加到新的构建路径中。此外，将 scala-library.jar 添加到 Java 项目中。
3.  现在在 java 项目中创建一个 Wrapper 类，它从 scala 库中调用您的入口点类。运行包装类创建一个eclipse运行配置并测试是否可以调用scala项目。
4.  使用 Export->Java->Runnable JAR 文件，Wizard 现在在包装器项目上。eclipse 运行配置将用作 JAR 的入口点。根据您的需要，您可能希望：将所需的库提取到生成的 JAR 中或将所需的库打包到生成的 JAR 中

最后你会得到一个完整的打包 JAR，你可以像这样使用它：

java - jar Wrapped.jar

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-20T04:05:42.577

对我来说，这相对简单。

> 1.  使用 scala IDE（或 java 的 eclipse）开发和测试项目。
> 2.  准备好后，使用文件 -> 导出方法为项目生成 jar。

为了提交火花（我正在为火花写一些东西），我只需要提到 --class 选项来指定 jar 的主类。

希望有所帮助。

# unix - 需要强制 tar 抛出错误

> ID：11413889
> 
> 赞同：0
> 
> 时间：2012-07-10T13:02:03.043
> 
> 标签：unix, solaris, tar

索拉里斯 10。

我正在尝试测试对购买的应用程序的修复。以前，当输入文件大于 8 GB 时，应用程序无法正确处理来自 tar 的错误。该应用程序已被修补以使用 tar 的 E 选项，因此它将不再出现此错误。那块很容易测试。

但是，我还想测试应用程序在 tar 返回错误时是否会正确处理错误。由于我不能使用大于 8 GB 的文件，我现在正在寻找另一种方法来让 tar 引发错误。

有什么建议么？

谢谢，吉姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T14:04:29.693

怎么样：

```
% echo wibble >t.tar
% tar tvf t.tar
tar: Unrecognized archive format: Inappropriate file type or format
tar: Error exit delayed from previous errors.
% echo $?
1
% 
```

...或者这太明显了，或者可能是错误的错误？

或者这是创建 tarball 时产生的错误（根据 OP 的评论进行编辑）：

```
% mkdir foo
% chmod 0 foo
% ls -ld foo
d---------  2 norman  wheel  68 10 Jul 18:13 foo/
% tar cf foo.tar foo
tar: foo: Couldn't visit directory: Permission denied
tar: Error exit delayed from previous errors.
% echo $?
1
% 
```

# css - 优化 CSS 720*1280 移动设备

> ID：11413890
> 
> 赞同：3
> 
> 时间：2012-07-10T13:02:06.083
> 
> 标签：css, responsive-design, media-queries, viewport, mobile-devices

我正在尝试将我的网页优化为 720*1200 移动设备： [我的页面](http://teeg.hu/mobile/bejelentkezes.aspx)

它适用于 320*480 和 480*800 设备，但不适用于 720*1200。页面加载放大，就像布局视口是 720*1030 但视觉视口是 360*515。

我已经设置了视口标签，但它没有任何效果。

```
<meta name="viewport" content="width=device-width,user-scalable=false" />
<title>teeg bejelentkezes</title>
<link rel="stylesheet" type="text/css" media="only screen and (min-device-width:720px)" href="css/style-720.css" />
<link rel="stylesheet" type="text/css" media="only screen and (max-device-width:719px) and (max-width:719px) and (min-device-width:480px) and (min-width:480px)" href="css/style.css" /> 
<link rel="stylesheet" type="text/css" media="only screen and (max-device-width:479px) and (max-width:479px)" href="css/style-320.css" /> 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T05:08:59.593

**推荐：**

*   在媒体查询中使用`min-width`和。`max-width`
*   避免使用`min-device-width`and `max-device-width`。

**视口元标记：**

```
<meta name="viewport" content="width=device-width, initial-scale=1" /> 
```

添加`minimum-scale`, `maximum-scale`, 或`user-scalable`如果需要。

**媒体查询：**

```
<link rel="stylesheet" type="text/css"
      media="only screen and (min-width:720px)"
      href="css/style-720.css" />

<link rel="stylesheet" type="text/css"
      media="only screen and (min-width:480px) and (max-width:719px)"
      href="css/style.css" /> 

<link rel="stylesheet" type="text/css"
      media="only screen and (max-width:479px)"
      href="css/style-320.css" /> 
```

**解释：**

`min-width`并且比和`max-width`更容易使用。使用所有 4 个可能会导致在某些情况下不会应用媒体查询，因为这两组值并不总是匹配。`min-device-width``max-device-width`

在 iOS 设备上`min-device-width`，`max-device-width`在横向模式下作用于宽度，与方向无关，而`min-width`作用`max-width`于当前方向的宽度。

此外，在 Android 设备上，`min-device-width`和`max-device-width`对应于物理像素，而`min-width`和`max-width`对应于 dips（与设备无关的像素），这使得使用具有各种像素密度的设备更容易。

[波士顿环球报](http://bostonglobe.com/)是自适应内容响应式设计的最佳范例，几乎完全适用于`min-width`和`max-width`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T13:47:36.870

试试这些：

```
width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T10:51:57.953

感谢您的回答，我尝试了 Matt Coughlin 的建议，但 AVD (720*1280) 包含 480px css 而不是 720。最后我改变了我的方法，并将我的设计改为响应式。[RWD](http://en.wikipedia.org/wiki/Responsive_Web_Design) 和[示例](http://www.awwwards.com/50-examples-of-responsive-web-design.html)

# excel - 计划使用 MS Query 数据自动更新 Excel 2010 文件？

> ID：11413891
> 
> 赞同：2
> 
> 时间：2012-07-10T13:02:06.287
> 
> 标签：excel, excel-2010, scheduled-tasks, ms-query

我认为这很容易，但显然不是。

我有一个返回动态结果集的存储过程。使用将其加载到excel中

```
Data -> From Other Sources -> MS Query -> exec MyProc 
```

将我需要的数据放入电子表格，按照我想要的方式进行格式化（例如，带有过滤器的蓝色标题、斑马条纹等）。

我想把它设置在某个地方的共享上，并安排一个每晚运行的预定作业来更新数据。我认为会有一个命令行开关可以做到这一点，但我没有看到这种情况发生。我可以根据需要使用计划任务或潮汐企业计划程序来完成这项工作。

我不希望用户打开它时刷新它，因为刷新需要 1-2 分钟。如果没有黑客攻击，我正在做的事情可能吗？

# php - php 页面依赖于查询字符串，但是如果没有参数怎么办？

> ID：11413894
> 
> 赞同：0
> 
> 时间：2012-07-10T13:02:25.833
> 
> 标签：php, apache, .htaccess, get

我正在创建依赖于 url 中的查询的页面（例如 europe.php?country=france）。我知道使用 htaccess 将论文重写为 europe.php/france 以进行 SEO 等会很有用，但是如果在没有查询字符串的情况下访问该页面怎么办？

我正在使用 php 来 $_GET 查询，所以如果我在没有查询的情况下访问页面，我会得到 'var=;' 即，它是空的（并检索错误）。我正在尝试使用 if 语句来检查 $_GET 是否没有检索到，但我不确定这是否是正确的做法。

那么：如何检查未检索到的 var 以便设置默认值？或者：我是不是走错了路？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T13:03:59.750

如果您知道索引`$_GET`，请使用[`isset()`](http://php.net/isset)：

```
$country = 'default';
if( isset( $_GET['country'])) {
    $country = $_GET['country'];
} 
```

这只会测试`country`参数是否通过，但它可能已设置为空字符串。如果这是无效输入，您可以使用以下方式组合检查[`empty()`](http://php.net/empty)：

```
$country = 'default';
if( isset( $_GET['country']) && !empty( $_GET['country'])) {
    $country = $_GET['country'];
} 
```

您可以将其压缩为一行并`$country`使用[三元运算符](http://us.php.net/ternary)将结果保存到变量中，如下所示：

```
$country = (isset( $_GET['country']) && !empty( $_GET['country'])) ? $_GET['country'] : 'default'; 
```

`$_GET`最后，您可以通过调用[`count()`](http://php.net/count)来检查您是否绝对没有参数`$_GET`：

```
if( count( $_GET) == 0) {
    die( "No parameters - Invalid input!");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T13:05:12.883

尝试使用这样的东西：

```
$var = ( isset($_GET['var']) ? $_GET['var'] : 'default value' ) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T13:05:54.647

由于 isset() 确实测试“NOT NULL”，因此您应该使用[empty()](http://php.net/empty)来测试是否给出了空字符串：

```
if (empty($_GET['country'])) {
  $_GET['country'] = "default";
} 
```

也就是说，除非您希望`0`是有效输入，否则在这种情况下，您必须检查 isset 并确保字符串至少包含一个字符：

```
if (!isset($_GET['country']) || !strlen($_GET['country'])) {
    $_GET['country'] = "default";
} 
```

可以优化为

```
if (!isset($_GET['country']) || !isset($_GET['country'][0])) {
    $_GET['country'] = "default";
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T13:04:55.623

尝试这样做

```
if(isset($_GET['your_variable'])) { 
    $variable = $_GET['your_variable']; 
} else { 
    $variable = "not set"; 
} 
```

如果它在您的 URL 中设置，它将设置变量 - 或者如果它未在 URL 中设置，它可以将您的变量设置为其他值

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-10T13:08:03.440

在页面开头运行检查以查看是否设置了 var 是可以的。如果它是空的，你可以使用类似的重定向：

```
header("HTTP/1.0 404 Not Found"); 
header('Location:YOUR PAGE NOT FOUND PAGE');
    exit(); 
```

附带说明一下，如果您使用来自 $_GET 的数据，则需要确保对这些数据进行验证和清理，以防止各种安全入侵，例如 XSS，如果您使用数据库，MYSQL 注入。在页面开头运行测试以检查它是否为空可能只是开始 - 您还可以确保数据是您所期望的（例如，检查它是字母数字）。之后，使用 $_GET 数据，任何人都可以用他们喜欢的任何内容填充 URL 栏，并可能损坏您的网站。

希望这有帮助！

# .htaccess - 根据域切换htaccess文件

> ID：11413898
> 
> 赞同：0
> 
> 时间：2012-07-10T13:02:43.127
> 
> 标签：.htaccess

是否可以根据域使用不同的 .htaccess 文件？

例如

```
if sub.domain.com, use .htaccess.sub
if domain.com, use .htaccess.main 
```

或类似的东西。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T13:15:56.117

在设置子域时`httpd.conf`

```
<VirtualHost *>
ServerName subdomain.domain.com
DocumentRoot /home/httpd/htdocs/subdomain/
#You can put RewriteEngine here, or whatever "apachey" stuff you want to use
</VirtualHost> 
```

或者在`.htaccess`其自身内部，您可以指定条件`RewriteCond`，例如。

注意：你**不能**这样做`.htaccess`

```
IF SUBDOMAIN = 'something.domain.com'
THEN load/include/use .different_htaccess 
```

# java - 自定义 Android LocationListener 问题

> ID：11413901
> 
> 赞同：2
> 
> 时间：2012-07-10T13:02:50.227
> 
> 标签：java, android

目前我有如下编码用于我在android上的活动。现在我将其用作对象并开始扫描位置并在 3 秒后使用处理程序使用 returnBestLocation 方法取回它的位置。

但是我想问一下，MyLocationListener 对象是否有可能在位置更改时自动返回调用活动，而不是在 3 秒后调用对象返回位置？

```
public class MyLocationListener implements LocationListener {

    LocationManager locationManager;
    Date currentBestLocationDate;
    Intent notificationIntent;
     Context mContext;
    Location currentBestLocation = null, lastKnownLocation=null;

 public MyLocationListener(Context mContext)
 {this.mContext = mContext;

 }

 public void startLocationScan()
 {
     Log.d(Config.log_id, "Custom Location Listener started");

     if (locationManager == null) {

        locationManager = (LocationManager) mContext.getSystemService(Context.LOCATION_SERVICE);
        Location locationNETWORK = locationManager.getLastKnownLocation(LocationManager.NETWORK_PROVIDER);
        if (locationNETWORK != null) {
            lastKnownLocation=locationNETWORK;
        }
        Location locationGPS = locationManager.getLastKnownLocation(LocationManager.GPS_PROVIDER);
        if (locationGPS != null) {
            lastKnownLocation=locationGPS;

        }
        locationManager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 0, 0,  MyLocationListener.this);
        locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0,MyLocationListener.this);

    }

 }
 public void stopLocationScan()
 {

        if(locationManager!=null)
        {
            locationManager.removeUpdates(MyLocationListener.this);

             Log.d(Config.log_id, "Custom Location Listener Stopped");
        }
        }
public Location returnBestLocation()
{
    return currentBestLocation;
}

    @Override
    public void onProviderDisabled(String provider) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onProviderEnabled(String provider) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onLocationChanged(Location location) {

        // TODO Auto-generated method stub
        if (currentBestLocation == null) {
            currentBestLocation = location;
        }

        long timeDelta = location.getTime() - currentBestLocation.getTime();
        Log.d(Config.log_id, "locationpostingservice's changed with accuracy " + location.getAccuracy() + " s different " + (float) timeDelta / 1000);

        if (timeDelta >= 120000) {
            currentBestLocation = location;
            Log.d(Config.log_id,"posting service Location changed due to over 2min "+ location.getAccuracy() + " s different "+ (float) timeDelta / 1000);

        }

        if (currentBestLocation.getAccuracy() >= location.getAccuracy()) {
            currentBestLocation = location;
        }

    }

    @Override
    public void onStatusChanged(String provider, int status, Bundle extras) {
        // TODO Auto-generated method stub

    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T13:32:45.497

您可以将要通知的活动作为侦听器传递给 MyLocationListener。创建自己的Listener接口，让Activity实现它并向MyLocationListener添加一个方法，比如addListener()。每次您想要通知这些活动时，都会遍历侦听器列表并调用它们的 locationChanged 方法（或您在接口定义中调用的任何方法）。只要确保为空侦听器活动添加错误处理等。

所以基本上你有自己的自定义监听器来监听 LocationListener。

另一种方法是使用广播接收器并广播位置变化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T11:25:17.253

正如 Fraggle 所说，正确的方法是创建您自己的监听器接口，在您的类中实现它，然后从您的活动中调用您的监听器。

但是一个快速n-dirty的替代方法可能是在你的Activity中实现LocationListener接口，而不是把它转变成一个新的类（MyLocationListener）。然后只要把你要运行的所有代码都放到onLocationChanged中，不用担心与其他对象通信。

# python - 将 HTTP 请求与大型数据包捕获中的响应相关联

> ID：11413903
> 
> 赞同：0
> 
> 时间：2012-07-10T13:02:53.237
> 
> 标签：python, http, capture, packet, wireshark

我正在尝试处理以 pdml 格式输出的来自wireshark 的大型数据包捕获。然后使用 lxml 库将这些捕获加载到 python 中以遍历它们。我遇到的问题是我可以提取有关单个 HTTP 响应数据包的信息，然后我需要一种方法将其与它的 HTTP 请求数据包相关联。

我正在考虑实现的当前解决方案是搜索与响应属于同一 TCP 流的 HTTP 请求数据包，但这似乎是解决问题的低效解决方案，必须不断分离出 TCP 流然后搜索它们用于请求数据包。

有没有一种简单的方法可以将响应数据包与我丢失的请求相关联？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T12:31:52.573

到目前为止，我想出的最佳解决方案是在每个 TCP 连接仅包含一个请求/响应对的假设下使用 xpath。

```
#Get the stream index from the packet
streamIndex = packet.xpath('proto/field[@name="tcp.stream"]')[0].attrib['show']
#Use that stream index to get the matching response packet
return packet.xpath('/pdml/packet[proto/field[@name="tcp.stream" and @show="' + streamIndex + '"] and proto/field[@name="http.request.full_uri"]]')[0] 
```

# ruby-on-rails - rspec - 如何检查 allow_blank 是否存在

> ID：11413906
> 
> 赞同：5
> 
> 时间：2012-07-10T13:03:06.300
> 
> 标签：ruby-on-rails, ruby, validation, activerecord, rspec

我对唯一性进行了测试，该测试有效：

```
it { should validate_uniqueness_of(:name).case_insensitive } 
```

但是，当我尝试对名称进行类似测试时，它失败了

```
it { should validate_presence_of(:name).allow_blank } 
```

我收到此错误：`undefined method`allow_blank'`

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-10T14:05:52.403

根据[这个列表](https://web.archive.org/web/20150904101414/http://cheat.errtheblog.com/s/rspec_shoulda)，应该没有可以链接到 validate_presence_of 的方法来支持您想要做的事情。在[这里查看匹配器的源代码](https://github.com/thoughtbot/shoulda-matchers/blob/master/lib/shoulda/matchers/active_model/validate_presence_of_matcher.rb)。

但是，您可以使用另一个匹配器：

```
it { should allow_value("", nil).for(:name) } 
```

哪个测试是否可以将空白值应用于您的属性。

完整的测试将是

```
it { should validate_presence_of(:name) }    
it { should allow_value("", nil).for(:name) } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T14:11:23.230

AFAIK，没有匹配器，`allow_blank`因此您可以使用`allow_value(@subject.name.blank?)`或类似的东西。

附带说明一下，我从不使用验证方法本身测试模型验证，因为您实际上是在测试错误的东西。我使用相关模型的创建来测试它们，并传递有效或无效的参数。这将在现实条件下更准确地测试模型。

# php - php sql查询删除前导0

> ID：11413907
> 
> 赞同：5
> 
> 时间：2012-07-10T13:03:06.200
> 
> 标签：php, mysql

我的代码本质上是

```
$query = mysql_query('SELECT `foo` FROM `Bar` WHERE id=1', $conn)
$result = mysql_fetch_assoc($query)
$val = $map[$result['foo']]; 
```

其中 foo 的类型为`CHAR(2)`， id=1 的值为 07

但是返回的值只有 7，这在将其用作关联数组的索引时会导致问题。

PhpMyAdmin 显示正确的值 07

使用 mysql_fetch_object 时我也得到相同的结果

来自评论： var_dump($result) 的结果是

```
array
  'foo' => string '7' (length=1) 
```

和 var_dump($map) 是数组 '07' => 字符串 'bar' (length=3)

编辑 2：我刚刚发现了一个更大的问题：以 0 开头的电话号码也受到影响。没有简单的方法（如下面建议的 str_pad）来解决这个问题

编辑 3：服务器是 Windows 7，带有 xampp 1.7.7 和 PHP 5.3.8 数据库是 InnoDB，带有 latin1_swedish_ci 和 COMPACT 行格式

```
CREATE TABLE `Bar` (
  `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
  `foo` char(2) DEFAULT NULL
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1; 
```

编辑 4： `SELECT CONCAT("0", foo) FROM Bar WHERE id = 55`返回 07

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-10T13:06:23.150

```
sprintf('%02d', $row['number']); 
```

或者，您也可以使用 str_pad：

```
str_pad($row['number'], 2, '0', STR_PAD_LEFT); 
```

这也可能会停止 PHP 的自动类型转换：

```
$var = (string) $row['number']; 
```

您还可以在第一个零之前添加一个单引号，例如：'07

您可以通过这样做来更新表中的所有值（因此您不必更改每个条目）：

```
mysql_query('UPDATE tablename SET rowname = concat("\'", rowname)'); 
```

# java - 如何将大量数据导入生产数据库？（我们使用的是 Java）

> ID：11413908
> 
> 赞同：1
> 
> 时间：2012-07-10T13:03:11.573
> 
> 标签：java, spring, data-import

我们必须将大量数据从 Web 服务、平面文件和其他外部来源导入生产数据库。我们正在使用 Spring Batch 来执行此操作。

主要问题之一是其中一些数据相互关联，但不会同时导入。另一个主要问题是数据量很大，所以我不能真正做一个巨大的事务，如果出现问题就回滚。

我怎么能那样做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T13:58:04.490

最好的办法是将数据加载到正在运行的应用程序不使用的“保存”表中。然后查看在应用程序最不忙时使用[SELECT INTO](http://www.w3schools.com/sql/sql_select_into.asp)将数据复制到应用程序表中。

这种方法的优点是

1.  将数据加载到保存表中不会对您的应用程序表产生锁定影响
2.  根据您的数据库配置，SELECT INTO 可以通过最少（或不）写入事务日志来完成，使其非常高效

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T13:11:22.207

假设您执行此操作时数据库未处于服务状态：备份数据库，关闭所有约束检查，导入数据，重新打开约束。如果一切都失败了，那么至少你有备份可以依靠。

# xml - XSLT：在保留空格元素之前添加换行符

> ID：11413912
> 
> 赞同：0
> 
> 时间：2012-07-10T13:03:22.307
> 
> 标签：xml, xslt, xpath

这是我在保留空间元素之前编辑的上一个换行问题。

假设我的xml是这样的，

```
<content>
<titleGroup>
<title>text</title>
</titleGroup>
<creators1>
<creator>
<personName>
  <Name>john</Name>
</personName>
</creator>
</creators1>
<creators2>
<affiliation>
<orgDiv> text </orgDiv>
<address>
<country>UK</country>
</address>
</affiliation>
</creators2>
</content> 
```

我使用了以下 xsl：

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:msxsl="urn:schemas-microsoft-com:xslt" exclude-result-prefixes="msxsl"
>
<xsl:output method="xml" indent="yes"/>
<xsl:strip-space elements="*"/>
<xsl:preserve-space elements ="creators1 creators2"/>

<xsl:template match ="/">
 <xsl:copy>
  <xsl:apply-templates select="@* | node()"/>
</xsl:copy>    
</xsl:template>
</xsl:stylesheet> 
```

此 xml 产生的输出，

```
<content><titleGroup><title>text</title></titleGroup><creators1>
<creator><personName><Name>john</Name></personName></creator></creators1><creators2>
<affiliation><orgDiv>text</orgDiv><address><country>UK</country></address></affiliation></creators2></content> 
```

但我需要在保留空间的元素列表中的元素之前换行，而不是在该元素之后（标签需要开始和结束为单行），就像这样，

```
 <content><titleGroup><title>text</title></titleGroup>
 <creators1><creator><personName><Name>john</Name></personName></creator></creators1>
<creators2><affiliation><orgDiv>text</orgDiv><address><country>UK</country></address></affiliation></creators2></content> 
```

**我需要在 titlegroup 的末尾以及 creators1 的末尾换行。**

请不要建议使用`<xsl:text></xsl:text>`我需要通过使用保留空间或其他方式来做到这一点的答案。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T13:32:15.200

显然，这在很大程度上取决于您如何处理它，但是使用 MSXSL 3（我假设您是从命名空间中使用的），删除输出模式，摆脱保留空间并将文本放在空间中

```
 <xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" >
        <xsl:strip-space elements="*"/>

        <xsl:template match ="@* | node()">
            <xsl:copy>
                <xsl:apply-templates select="@* | node()"/>
            </xsl:copy>    
        </xsl:template>

        <xsl:template match="creators1 | creators2">
            <xsl:text>
            </xsl:text>
            <xsl:copy>
                <xsl:apply-templates select="@* | node()"/>
            </xsl:copy>  
        </xsl:template>
    </xsl:stylesheet> 
```

给你：

```
<?xml version="1.0" encoding="UTF-16"?><content><titleGroup><title>text</title></titleGroup>
    <creators1><creator><personName><Name>john</Name></personName></creator></creators1>
    <creators2><affiliation><orgDiv> text </orgDiv><address><country>UK</country></address></affiliation></creators2></content> 
```

在 Xalan 和 Saxon 中也有类似的东西

# apache2 - RVM - Ruby 集成被提取到一个单独的 gem (`remove $LOAD_PATH.unshift`)

> ID：11413916
> 
> 赞同：8
> 
> 时间：2012-07-10T13:03:42.040
> 
> 标签：apache2, rvm, ruby-on-rails-3.2, rails-3-upgrade, load-path

我正在升级到 Rails 3.2.6（ruby 1.9.3-p194）并在 Debian 上安装 RVM 并使用 Apache2 服务器（2.2.19）。

我使用了这些非常好的说明：[http ://dalibornasevic.com/posts/21-rvm-and-passenger-setup-for-rails-2-and-rails-3-apps/](http://dalibornasevic.com/posts/21-rvm-and-passenger-setup-for-rails-2-and-rails-3-apps/)

Apache 服务器配置**/etc/apache2/apache2.conf**包括：

```
LoadModule passenger_module /usr/local/rvm/gems/ruby-1.9.3-p194@rails326/gems/passenger-3.0.13/ext/apache2/mod_passenger.so
PassengerRoot /usr/local/rvm/gems/ruby-1.9.3-p194@rails326/gems/passenger-3.0.13
PassengerRuby /usr/local/rvm/wrappers/ruby-1.9.3-p194@rails326/ruby 
```

当我设置好所有东西（并摆脱大量错误消息：）时，会出现来自乘客的以下错误消息：

### RVM - Ruby 集成被提取到一个单独的 gem，它应该默认与 RVM 一起安装，删除该`$LOAD_PATH.unshift`行并且一切都应该再次正常。

通过`$LOAD_PATH.unshift`在 MyApp/config/setup_load_paths.rb 中注释掉这个错误，我得到一个 500 错误，内部服务器错误。

**/etc/log/apache2/error.log：**

```
[ pid=5262 thr=3075372800 file=ext/apache2/Hooks.cpp:862 time=2012-07-10 12:33:41.475 ]: Unexpected error in mod_passenger: Cannot spawn application '/var/www/MyApp': The spawn server has exited unexpectedly.
  Backtrace:
     in 'virtual Passenger::SessionPtr Passenger::ApplicationPool::Client::get(const Passenger::PoolOptions&)' (Client.h:742)
     in 'Passenger::SessionPtr Hooks::getSession(const Passenger::PoolOptions&)' (Hooks.cpp:294)
     in 'int Hooks::handleRequest(request_rec*)' (Hooks.cpp:563) 
```

如果有人能给我关于这个问题的线索，我会非常高兴。
非常感谢。
鸢尾

# php - 在 Magento 中获取最近查看的产品数组

> ID：11413918
> 
> 赞同：4
> 
> 时间：2012-07-10T13:03:52.317
> 
> 标签：php, magento

我有一个问题，我必须高度定制一个 magento 电子商务商店。因此，如果我能获得请求的数据，那就太好了

> \app\design\frontend\avalanche\default\template\reports\product_viewed_details.phtml

通过

```
$this->getRecentlyViewedProducts() 
```

我已经尝试通过

```
Mage::getBlockSingleton('report/product_view')->getRecentlyViewedProducts(); 
```

，但我唯一得到的是一个空数组。

有人可以帮我吗？我在这里开车有点疯狂。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-10T13:10:18.597

你有没有尝试过 ：

`$collection = Mage::getSingleton('Mage_Reports_Block_Product_Viewed')->getItemsCollection();`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-29T20:28:32.717

您还可以使用别名来生成更“友好”的代码：

`$collection = Mage::getBlockSingleton('reports/product_viewed')->getItemsCollection();`

# java - 在junit中使用@rule检查错误代码

> ID：11413922
> 
> 赞同：3
> 
> 时间：2012-07-10T13:04:05.340
> 
> 标签：java, exception, testing, junit, junit-rule

我发现`@Rule`注释`jUnit`可以更好地处理异常。有没有办法检查错误代码？

目前我的代码看起来像（没有@Rule）：

```
 @Test
    public void checkNullObject() {
    MyClass myClass= null;
    try {
        MyCustomClass.get(null); // it throws custom exception when null is passed
    } catch (CustomException e) { // error code is error.reason.null
        Assert.assertSame("error.reason.null", e.getInformationCode());
    }
    } 
```

但是随着使用`@Rule`，我正在做以下事情：

```
 @Rule
        public ExpectedException exception = ExpectedException.none();

        @Test
        public void checkNullObject() throws CustomException {
        exception.expect(CustomException .class);
        exception.expectMessage("Input object is null.");
        MyClass myClass= null;
        MyCustomClass.get(null);

        } 
```

但是，我想做如下的事情：

```
 @Rule
        public ExpectedException exception = ExpectedException.none();

        @Test
        public void checkNullObject() throws CustomException {
        exception.expect(CustomException .class);
       //currently below line is not legal. But I need to check errorcode.
        exception.errorCode("error.reason.null");
        MyClass myClass= null;
        MyCustomClass.get(null);

        } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T13:15:01.150

`expect(Matcher<?> matcher)`您可以在具有该方法的规则上使用自定义匹配器。

例如：

```
public class ErrorCodeMatcher extends BaseMatcher<CustomException> {
  private final String expectedCode;

  public ErrorCodeMatcher(String expectedCode) {
    this.expectedCode = expectedCode;
  }

  @Override
  public boolean matches(Object item) {
    CustomException e = (CustomException)item;
    return expectedCode.equals(e.getInformationCode());
  }
} 
```

并在测试中：

```
exception.expect(new ErrorCodeMatcher("error.reason.null")); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T13:24:31.687

您还可以查看如何 `expect(Matcher<?> matcher)`在[ExpectedException.java 源代码中使用](https://github.com/KentBeck/junit/blob/master/src/main/java/org/junit/rules/ExpectedException.java)

```
private Matcher<Throwable> hasMessage(final Matcher<String> matcher) {
     return new TypeSafeMatcher<Throwable>() {
      @Override
        public boolean matchesSafely(Throwable item) {
        return matcher.matches(item.getMessage());
        }
   };
}

    public void expectMessage(Matcher<String> matcher) {
         expect(hasMessage(matcher));
 } 
```

# vb.net - 如何在 VB.NET 中创建动态 excel 链接？（不是 .dll）

> ID：11413924
> 
> 赞同：2
> 
> 时间：2012-07-10T13:04:11.230
> 
> 标签：vb.net, excel, user-interface

VB.NET 级别：初学者

我使用 VB.NET 制作了一个 .exe。在这个程序中，有许多指向 excel 文件的链接（excel 文件有特定的文件夹）。

我的问题：

考虑一个名为 abc.xlsx 的 excel 文件，它位于我的家用电脑上。这个文件的链接如下，D:\work\data\abc.xlsx

现在由于显而易见的原因，当我在工作电脑上运行 .exe 时，此链接将无效。（后来我想在多台电脑上运行这个 .exe）

如何解决这个问题？

我的想法是创建一个动态链接，该链接将根据使用中的 pc 进行自我更新，或者创建一个独立于使用中的 pc 的恒定链接。

帮助将不胜感激。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T13:14:43.547

尝试这样的事情：

```
 Public Function GetDynamicFilename(p_filename As String) As String

      Dim tempPath As String

      Select Case My.Computer.Name.ToUpper
         Case "COMPUTER1"
            tempPath = "c:\work\data"
         Case "COMPUTER2"
            tempPath = "d:\work\files"
      End Select

      Return String.Format("{0}\{1}", tempPath, p_filename)

   End Function 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T13:47:31.913

所以使路径相对于.exe

C:\myapp\myapp.exe c:\myapp\data\abc.xslx ...

所以无论你的应用程序在哪里，你都可以像这样访问你的数据

```
Dim dataFolder As String = System.IO.Path.GetDirectoryName(System.Reflection.Assembly.GetExecutingAssembly(‌​).Location)
dataFolder = System.IO.Path.Combine(dataFolder,"data")
Dim theFileIwant as String = System.IO.Path.Combine(datafolder,"abc.xslx") 
```

# objective-c - 为什么使用 UIDocument 而不是标准归档

> ID：11413926
> 
> 赞同：1
> 
> 时间：2012-07-10T13:04:17.297
> 
> 标签：objective-c, ios

我用过`UIDocument`，但我不明白使用存档的优势？假设您不想使用 iCloud。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T13:20:06.517

来自 Apple 的文档：http: [//developer.apple.com/library/ios/#documentation/uikit/reference/UIDocument_Class/UIDocument/UIDocument.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIDocument_Class/UIDocument/UIDocument.html)

> 使用 UIDocument 及其底层架构的应用程序为其文档带来了许多好处：
> 
> *   在后台队列上异步读取和写入数据。因此，在进行读写操作时，您的应用程序对用户的响应不会受到影响。
> *   与云服务自动集成的文档文件的协同读写。支持发现文档的不同版本之间的冲突（如果发生这种情况）。
> *   通过首先将数据写入临时文件然后用它替换当前文档文件来安全保存文档数据。
> *   在适当的时候自动保存文件数据；该机制包括对处理挂起行为的支持。

你也可以很好地与 NSUndoManager 集成

# objective-c - obj-c 从数组中获取字符串

> ID：11413927
> 
> 赞同：0
> 
> 时间：2012-07-10T13:04:17.090
> 
> 标签：objective-c, arrays, string, cocoa

我是 obj-c 的新手（这是我的第一天课，嗯），我正在尝试使用多维数组中的随机字符串更改标签。另外，每次按下按钮时，您都会切换阵列。我知道这有点奇怪，嗯……这是 IBAction：

```
UIButton *button = (UIButton *)sender;
NSMutableArray *firstArray = [NSMutableArray array];
[firstArray addObject:@"foo"];

NSMutableArray *secondArray = [NSMutableArray array];
[secondArray addObject:@"bar"];

NSMutableArray *frasi = [NSMutableArray array];
[frasi addObject:firstArray];
[frasi addObject:secondArray];

NSMutableArray *array  = [NSMutableArray arrayWithObjects:[frasi objectAtIndex:[button isSelected]], nil];
NSString *q = [array objectAtIndex: (arc4random()% [array count] )];
NSString *lab = [NSString stringWithFormat:@"%@", q];
self.label.text = lab; 
```

一切正常，但新标签是

```
(     "foo" ) 
```

而不仅仅是 foo （不带引号）......可能我在最后一段代码中搞砸了......

泰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T13:12:29.487

实际上你在数组中有数组

将此行替换为您的：

```
NSString *q = [[array objectAtIndex: (arc4random()% [array count] )] objectAtIndex:0]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T14:35:43.460

因此，您创建了 2 个可变数组，然后将它们添加到一个新的可变数组`frasi`中。然后你得到这两个数组之一并将其用作新数组的单个元素（因为你使用`arrayWithObjects:`而不是`arrayWithArray:`）`array`。

`array`包含单个数组元素的数组也是如此（而不是您可能认为的字符串数组）。

当您从 获取一个对象时`array`，它始终是用于初始化它的同一个对象：要么`firstArray`要么`secondArray`.

所以你得到一个字符串数组，你期望一个字符串。使用 时`stringWithFormat:`，说明符`%@`将替换为该对象的字符串描述。

字符串返回自身作为自己的描述。但是数组的描述是它所有元素的列表，用逗号分隔并用括号括起来，这就是你得到`( "foo" )`.

因此，或者创建不需要的数组，您可以将所有最后 8 行替换为：

```
NSArray *array = [button isSelected] ？第二阵列：第一阵列；
self.label.text = [array objectAtIndex:arc4_uniform([array count])];
```

# jquery - Highcharts 移除渲染器路径

> ID：11413930
> 
> 赞同：10
> 
> 时间：2012-07-10T13:04:33.820
> 
> 标签：jquery, highcharts

这是它的添加方式：

```
chart.renderer.path(['M', 1200, 10, 'V', 1500, 0])
            .attr({
                'stroke-width': 2,
                stroke: 'red'
            })
            .add(); 
```

但是如何删除呢？

```
var x = someValue;
chart.renderer.path(['M', x, 10, 'V', 1500, 0])
        .attr({
            'stroke-width': 2,
            stroke: 'red'
        })
        .add(); 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2014-02-25T14:36:47.350

对于未来的 Google 员工，这将起作用：

```
var path = chart.renderer.path(['M', 1200, 10, 'V', 1500, 0])
.attr({
    'stroke-width': 2,
    stroke: 'red'
})
.add();

// remove the path
path.element.remove(); 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-07-10T13:27:19.037

**更新**

这是你如何删除它[jsFiddle](http://jsfiddle.net/minagabriel/PEZjq/1/)

```
 function(chart) { // on complete

    chart.renderer.path(['M', 0, 0, 'L', 100, 100, 200, 50, 300, 100])
        .attr({
            'stroke-width': 2,
            stroke: 'red'
        })
        .add();
    $(":button").click(function(){
        $('path[d="M 0 0 L 100 100 200 50 300 100"]').remove() ;
         });
    }); 
```

*按 id 删除路径*

[jsFiddle](http://jsfiddle.net/minagabriel/PEZjq/2/)

```
 function(chart) { // on complete

    chart.renderer.path(['M', 0, 0, 'L', 100, 100, 200, 50, 300, 100])
        .attr({
            'stroke-width': 2,
            stroke: 'red' ,
            id :'myPath'
        })
        .add();
    $(":button").click(function(){
        $("#myPath").remove() ;
                                        });
     }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-07-09T06:50:11.453

我发现它`element.remove()`在 Chrome 中运行良好，但`WebView`在 Android 上运行时就不行，因此可能无法在其他浏览器环境中运行。

深入研究对象的属性和方法，我发现了一个`safeRemoveChild()`方法，它似乎在`WebView`. 这就是：

```
var path = chart.renderer.path(['M', 1200, 10, 'V', 1500, 0])
.attr({
    'stroke-width': 2,
    stroke: 'red'
})
.add();

// remove the path
path.safeRemoveChild(path.element); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-10-10T16:53:55.543

对于使用聚合物或只想使用纯 js 执行此操作的任何人，以下是如何管理将在加载时创建并在每次图表更新时重绘的对象：

[http://jsfiddle.net/57xw879k/1/](http://jsfiddle.net/57xw879k/1/)

这样做的好处是它被添加到图表对象中，因此您不依赖 DOM 或任何特定的访问它的方法。

[如果您想在不同时间执行操作， http://api.highcharts.com/highcharts/chart.events](http://api.highcharts.com/highcharts/chart.events)也值得一读。

HTML：

```
<script src="https://code.highcharts.com/highcharts.js"></script>
<div id="container"></div>

<button id="remove">
  Remove label
</button>
<button id="add">
  Add label
</button> 
```

JS：

```
const chart = Highcharts.chart('container', {

  chart: {
    events: {
      render: function() {
        handleLabel(this)
        var label = this.renderer.label('The chart was just redrawn', 100, 120)
        .attr({
          fill: Highcharts.getOptions().colors[0],
          padding: 10,
          r: 5,
          zIndex: 8
        })
        .css({
          color: '#FFFFFF'
        })
        .add()
        setTimeout(function () {
          label.fadeOut()
        }, 1000)
      }
    }
  },
  title: {text: 'Highcharts label actions'},
  xAxis: {
    categories: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec']
  },    
  series: [{
    data: [29.9, 71.5, 106.4, 129.2, 144.0, 176.0, 135.6, 148.5, 216.4, 194.1, 95.6, 54.4]
  }]    
})

function handleLabel(chart) {
    if (chart.myLabel) {
    chart.myLabel.destroy()
    addLabel(chart)
  } else {
    addLabel(chart)
  }
}

function addLabel(chart) {
  var point = chart.series[0].points[8];
  chart.myLabel = chart.renderer.label('Max observation', 270, 50, 'callout', point.plotX + chart.plotLeft, point.plotY + chart.plotTop)
    .css({
        color: '#FFFFFF'
    })
    .attr({
      fill: 'rgba(0, 0, 0, 0.75)',
      padding: 8,
      r: 5,
      zIndex: 6
    })
    .add()
}

function removeLabel(chart) {
  !objectIsEmpty(chart.myLabel) && chart.myLabel && chart.myLabel.destroy()
}

function objectIsEmpty(obj) {
  return Object.keys(obj).length === 0 && obj.constructor === Object
}

document.getElementById('remove').addEventListener('click', () => removeLabel(chart))
document.getElementById('add').addEventListener('click', () => addLabel(chart)) 
```

# jquery - 重新布局并不总是按照示例工作

> ID：11413932
> 
> 赞同：0
> 
> 时间：2012-07-10T13:04:45.610
> 
> 标签：jquery, jquery-isotope

我正在尝试获得与以下类似的布局：http: [//isotope.metafizzy.co/demos/relayout.html](http://isotope.metafizzy.co/demos/relayout.html)

相反，我得到了这个：http: [//isotope-jul-2012.s3-website-eu-west-1.amazonaws.com/](http://isotope-jul-2012.s3-website-eu-west-1.amazonaws.com/)

单击每行的第三个元素会在顶部和底部产生间隙，这不会在演示页面上发生。我不知道为什么！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T17:29:24.527

将您的原始 .profile 尺寸放入 - 但更改其上的边距以及列宽，所有元素的行为[都应如此](http://jsfiddle.net/3L7gf/)。

# telerik-reporting - 如何打开 Telerik 报告的日志记录？

> ID：11413937
> 
> 赞同：3
> 
> 时间：2012-07-10T13:05:00.700
> 
> 标签：telerik-reporting

我有一个 Telerik Report 项目，它在`ReportProcessor.RenderReport("PDF", reportToExport, null);`方法的某处抛出 NullReferenceException。我得到以下堆栈跟踪：

```
System.NullReferenceException: Object reference not set to an instance of an object.
at Telerik.Reporting.Processing.Table.MeasureColumns(Graphics graphics)
at Telerik.Reporting.Processing.Table.Measure(MeasureDirection dir, Graphics graphics)
at Telerik.Reporting.Processing.ProcessingElement.MeasureElement(MeasureDirection dir, Graphics graphics)
at Telerik.Reporting.Processing.ProcessingElement.Measure(MeasureDirection dir, Graphics graphics)
at Telerik.Reporting.Processing.ReportSectionBase.Measure(MeasureDirection dir, Graphics graphics)
at Telerik.Reporting.Processing.ProcessingElement.MeasureElement(MeasureDirection dir, Graphics graphics)
at Telerik.Reporting.Processing.Group.MeasureElement(MeasureDirection dir, Graphics graphics)
at Telerik.Reporting.Processing.Report.MeasureElement(MeasureDirection dir, Graphics graphics)
at Telerik.Reporting.Processing.ProcessingElement.Measure(MeasureDirection dir, Graphics graphics)
at Telerik.Reporting.Processing.ProcessingElement.MeasureElement(MeasureDirection dir, Graphics graphics)
at Telerik.Reporting.Processing.ProcessingElement.Measure(MeasureDirection dir, Graphics graphics)
at Telerik.Reporting.Processing.ReportSectionBase.Measure(MeasureDirection dir, Graphics graphics)
at Telerik.Reporting.Processing.ProcessingElement.MeasureElement(MeasureDirection dir, Graphics graphics)
at Telerik.Reporting.Processing.Group.MeasureElement(MeasureDirection dir, Graphics graphics)
at Telerik.Reporting.Processing.Report.MeasureElement(MeasureDirection dir, Graphics graphics)
at Telerik.Reporting.Processing.Report.MeasureElement(ProcessingElement elementToMeasure)
at Telerik.Reporting.Processing.ReportProcessor.RenderCore(String format, IList`1 reports, Hashtable deviceInfo, Hashtable renderingContext, CreateStream createStreamCallback)
at Telerik.Reporting.Processing.ReportProcessor.ProcessAndRender(String format, IReportDocument reportDocument, Hashtable deviceInfo, Hashtable renderingContext, CreateStream createStreamCallback)
at Telerik.Reporting.Processing.ReportProcessor.ProcessAndRenderStateless(String format, IReportDocument reportDocument, Hashtable deviceInfo, Hashtable renderingContext, CreateStream createStreamCallback)
at Telerik.Reporting.Processing.ReportProcessor.RenderReport(String format, IReportDocument reportDocument, Hashtable deviceInfo)
at JIIGCAL.CareerCompass.Reports.Views.ReportsDefault.ExportToPDF(IReportDocument reportToExport) in C:\dev\.....\Reports\Viewer.aspx.cs:line 236 
```

Viewer.aspx.cs 中的第 236 行是对 RenderReport() 的调用；我不知道如何追踪这个错误。有没有办法为运行时报告引擎启用日志记录，以便我可以获得更多关于哪个字段/列/表是有问题的信息？

**编辑：找到解决方案**

收到 Telerik 的以下回复：

> 如果表格单元格中的文本框的大小设置为零，则可能会发生此类错误。将大小从零更改为非常小的值将解决问题。请注意，将行/列组设置为零大小会将它们设置为 Visible=false，这是不受支持的。由于 CrossTab/Table 的数据驱动特性，当您想要隐藏某些数据时，您需要过滤 CrossTab 组而不是隐藏它们。

我根据某些条件将几个文本框设置为 Visible=false。我改变了这个，它工作得很好。

至于如何记录内部运行时引擎的结果，他们给出了以下建议：

> 使任何 .NET 应用程序能够输出一些日志的标准方法是使用跟踪侦听器。例如，您可以将 TextWriterTraceListener 添加到应用程序的配置文件中：
> 
> ```
> <configuration>
>   <system.diagnostics>
>     <trace autoflush="false" indentsize="4">
>       <listeners>
>         <add name="myListener"
>           type="System.Diagnostics.TextWriterTraceListener"
>           initializeData="TextWriterOutput.log" />
>         <remove name="Default" />
>       </listeners>
>     </trace>
>   </system.diagnostics>
> </configuration> 
> ```
> 
> 我们在报告引擎中使用相同的方法。您可以在 Visual Studio 输出窗口中看到我们所做的一些跟踪，也可以下载产品源代码以供参考。

# c# - 在 Windows 窗体应用程序中隐藏标题栏

> ID：11413938
> 
> 赞同：0
> 
> 时间：2012-07-10T13:05:06.530
> 
> 标签：c#, winforms

> **可能重复：**
> [按需显示或隐藏标题栏](https://stackoverflow.com/questions/1394197/show-or-hide-a-title-bar-on-demand)

是否可以在winform应用程序中完全隐藏标题栏。不同的形式？？？？？？
我不想只隐藏最小化和最大化按钮，而是想隐藏表单中的总标题栏。
如果是的话，是否有可能比
Plzz如何帮助我我是winform应用程序的新手......

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-10T13:06:54.210

我几乎可以肯定这已经被问/回答了 9000 多次，但最简单的方法是完全删除窗口边框。

```
this.FormBorderStyle = FormBorderStyle.None; // Assuming this code is in a method on your form 
```

# c++ - 为什么 foo->bar->foobar 被认为是不好的风格？以及如何在不添加代码的情况下避免？

> ID：11413939
> 
> 赞同：16
> 
> 时间：2012-07-10T13:05:06.680
> 
> 标签：c++, pointers, coding-style

我们的 C++ 教授提到，使用 operator-> 的结果作为另一个 operator-> 的输入被认为是不好的风格。

所以不要写：

```
return edge->terminal->outgoing_edges[0]; 
```

他更喜欢：

```
Node* terminal = edge->terminal;
return terminal->outgoing_edges[0]; 
```

1.  为什么这被认为是不好的风格？
2.  我怎样才能重组我的程序以避免“坏风格”，同时也避免根据上述建议创建的额外代码行？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-10T13:11:43.157

有很多原因。

得[墨忒耳定律](https://en.wikipedia.org/wiki/Law_of_Demeter)给出了一个结构性原因（请注意，您的 C++ 教授代码仍然违反了这一点！）。在您的示例中，`edge`必须了解`terminal`and `outgoing_edges`。这使得它紧密耦合。

作为备选

```
class Edge {
 private:
   Node* terminal;
 public:
   Edges* outgoing_edges() {
      return terminal->outgoing_edges;
   }
} 
```

现在，您可以`outgoing_edges`在一处更改实现，而无需到处更改。老实说，对于像图这样的数据结构（它是紧密耦合的，边和节点不能相互逃避），我真的不买这个。这在我的书中过于抽象了。

还有空引用问题，在表达式`a->b->c`中，如果`b`为空怎么办？

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-07-10T13:15:08.207

你应该问你的教授为什么他认为这是不好的风格。我不。然而，我认为他在终端声明中省略了 const 是不好的风格。

对于这样的一个片段，它可能不是坏的风格。但是考虑一下：

```
void somefunc(Edge *edge)
{
   if (edge->terminal->outgoing_edges.size() > 5)
   {
        edge->terminal->outgoing_edges.rezize(10);
        edge->terminal->counter = 5;
   }
   ++edge->terminal->another_value;
} 
```

这开始变得笨拙 - 难以阅读，难以书写（我在打字时犯了大约 10 个错别字）。它需要对这两个类的 operator-> 进行大量评估。如果操作员是微不足道的，那么可以，但如果操作员做了任何令人兴奋的事情，它最终会做很多工作。

所以有2个可能的答案：

1.  可维护性
2.  效率

像这样的一个片段，你无法避免额外的行。在类似上面的情况下，它会减少打字。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-07-10T13:17:16.450

嗯，我不确定你的教授是什么意思，但我有一些想法。

首先，这样的代码可能“不那么明显”：

```
someObjectPointer->foo()->bar()->foobar() 
```

您无法真正说出 的结果是什么`foo()`，因此您无法真正说出`bar()`被调用的内容。那是同一个对象吗？或者它可能是一个正在创建的临时对象？或者也许是别的东西？

另一件事是如果你必须重复你的代码。考虑一个这样的例子：

```
complexObject.somePart.someSubObject.sections[i].doSomething();
complexObject.somePart.someSubObject.sections[i].doSomethingElse();
complexObject.somePart.someSubObject.sections[i].doSomethingAgain();
complexObject.somePart.someSubObject.sections[i].andAgain(); 
```

将其与以下内容进行比较：

```
section * sectionPtr = complexObject.somePart.someSubObject.sections[i];
sectionPtr->doSomething();
sectionPtr->doSomethingElse();
sectionPtr->doSomethingAgain();
sectionPtr->andAgain(); 
```

您可以看到第二个示例不仅更短，而且更易于阅读。

有时函数链更容易，因为您不需要关心它们返回的内容：

```
resultClass res = foo()->bar()->foobar() 
```

对比

```
classA * a = foo();
classB * b = a->bar();
classC * c = b->foobar(); 
```

另一件事是调试。调试长链函数调用非常困难，因为您根本无法理解它们中的哪一个导致了错误。在这种情况下，打破链条有很大帮助，更不用说你也可以做一些额外的检查，比如

```
classA * a = foo();
classB * b;
classC * c;
if(a)
   b = a->bar();
if(b)
   c = b->foobar(); 
```

所以，总而言之，你不能说它是一种“坏”或“好”的风格。你必须首先考虑你的情况。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-10T13:16:13.177

您显示的两个代码片段（当然）在语义上是相同的。当谈到风格问题时，建议你简单地遵循教授的要求。

比你的第二个代码片段稍微好一点的是：

```
Node* terminal = (edge ? edge->terminal : NULL);
return (terminal ? terminal->outgoing_edges[0] : NULL); 
```

我假设传出边缘是一个数组；如果不是，您还必须检查它是否为 NULL 或空。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-10T13:41:52.210

目前的形式都不一定更好。但是，如果您要在第二个示例中添加对 null 的检查，那么这将是有意义的。

```
if (edge != NULL)
{
   Node* terminal = edge->terminal;
   if (terminal != NULL) return terminal->outgoing_edges[0];
} 
```

尽管即使这样仍然很糟糕，因为谁会说这`outgoing_edges`是正确填充或分配的。一个更好的选择是调用一个函数`outgoingEdges()`，它会为您进行所有很好的错误检查，并且永远不会导致您出现**未定义的行为**。

# perl - 返回调用脚本 perl 的句柄

> ID：11413942
> 
> 赞同：0
> 
> 时间：2012-07-10T13:05:18.110
> 
> 标签：perl

我有一个可执行文件，它可以在提示符下使用以下命令运行 perl 脚本：blah.exe Launch.pl

我们设置测试的方式是我们从 Parent.pl 中调用 Launch.pl，就像这样“blah.exe Launch.pl” - 脚本中的脚本。但是，当使用反引号/系统命令执行命令时，父 .pl 脚本执行会等到我通过关闭并退出应用程序 (blah.exe) 来取回句柄。此时 parent.pl 中的代码继续执行。

在完成运行 Launch.pl 中包含的代码后，如何将句柄返回给父 .pl 脚本

所以，parent.pl 调用“blah.exe Launch.pl”；但是在应用程序（blah.exe）内的 Launch.pl 中运行代码后，它只是坐在那里等待退出，以便 parent.pl 中的代码可以继续运行。我需要保持应用程序（blah.exe）打开，直到我一个接一个地运行一堆脚本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T14:35:21.493

`blah.exe` [在后台](http://learn.perl.org/faq/perlfaq8.html#How-do-I-start-a-process-in-the-background-)运行。完成后`Parent.pl`，使用 终止应用程序[`kill`](http://p3rl.org/kill)。

# android - 关于Master/Detail Flow Template的两个问题

> ID：11413943
> 
> 赞同：18
> 
> 时间：2012-07-10T13:05:18.983
> 
> 标签：android

我刚刚查看了 Master/Detail Flow 模板，但我无法弄清楚 2 件事。

1) 为什么它生成的代码似乎使用 Fragment 兼容性支持时需要 Android 版本 11？特别是，为什么不能生成运行 Android 版本 8 的模板？（例如这个导入）

```
import android.support.v4.app.FragmentActivity; 
```

2）如果它足够大，主Activity如何知道是在新Activity中显示细节还是在细节窗格中显示细节？它似乎是通过以下代码实现的：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_item_list);

    if (findViewById(R.id.item_detail_container) != null) {
        mTwoPane = true;
        ((ItemListFragment) getSupportFragmentManager()
                .findFragmentById(R.id.item_list))
                .setActivateOnItemClick(true);
    }
} 
```

`setContentView(R.layout.activity_item_list);`将布局设置为`ListFragment`仅设置自己的适配器的布局，但我看不到如何`findViewById(R.id.item_detail_container) != null`返回 true，因为它似乎从未被打开/膨胀。

有什么线索吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-12T09:15:23.880

看了很多，答案是因为这个`values-large/refs.xml`

```
<resources>
    <item type="layout" name="activity_item_list">@layout/activity_item_twopane</item>
</resources> 
```

它将对正常布局的请求重定向到`R.id.item_detail_container`定义的较大布局（两窗格版本）。

这很令人困惑。我不确定为什么他们不只是将大布局称为与普通布局相同的布局，而是使用不同的 xml。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-12-23T08:30:39.663

这对我有用。

1) 将 ActionBarSherlock 添加到项目中：项目 -> 属性 -> Android -> 选择 ActionBarSherlock 并按“添加”按钮。如果您没有 ABS，那么您需要在继续之前从[http://actionbarsherlock.com/获取它。](http://actionbarsherlock.com/)

2）“AndroidManifest.xml”：将 minSdkVersion 设置为 10（姜饼）。我认为你可以再低一点。

```
android:minSdkVersion="10" 
```

3）“activity_item_list.xml”：只需删除“list_content”，因为Eclipse一直抱怨你需要Honeycomb或更高版本。

```
tools:layout="@android:layout/list_content"  <-- remove 
```

4）“activity_item_twopane.xml”：删除 Honeycomb 或更高版本的行。

```
android:divider="?android:attr/dividerHorizontal"  <-- remove
tools:layout="@android:layout/list_content"        <-- remove 
```

5）ItemListActivity.java：使用SherlockFragmentActivity。

```
//public class ItemListActivity extends FragmentActivity implements
public class ItemListActivity extends SherlockFragmentActivity implements 
```

6）ItemListFragment.java：修改参数为setListAdapter()。

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    // TODO: replace with a real list adapter.
        //setListAdapter(new ArrayAdapter<DummyContent.DummyItem>(getActivity(),
        //    android.R.layout.simple_list_item_activated_1,
        //    android.R.id.text1, DummyContent.ITEMS));

        int layout = (Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB) ?
            android.R.layout.simple_list_item_activated_1 :
            android.R.layout.simple_list_item_checked;

        setListAdapter(new ArrayAdapter<DummyContent.DummyItem>(getActivity(),
            layout, DummyContent.ITEMS));
} 
```

7) “ItemDetailActivity.java”：使用 SherlockFragmentActivity 和 getSupportActionBar()。

```
//public class ItemDetailActivity extends FragmentActivity {
public class ItemDetailActivity extends SherlockFragmentActivity {
    ...
    //getActionBar().setDisplayHomeAsUpEnabled(true);
    getSupportActionBar().setDisplayHomeAsUpEnabled(true); 
```

进行更改后，该应用程序可以在 Gingerbread、ICS 和 Jelly Bean 中运行。

__溶胶

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-31T19:34:36.143

尊重你的第一个问题：

你需要改变课堂`ItemListFragment`：

这：

```
setListAdapter(new ArrayAdapter<DummyContent.DummyItem>(getActivity(),
                R.layout.simple_list_item_activated_1,
                R.id.text1,
                DummyContent.ITEMS)); 
```

为了这：

```
setListAdapter(new ArrayAdapter<DummyContent.DummyItem>(getActivity(),
               R.layout.simple_list_item_1,
               R.id.text1,
               DummyContent.ITEMS)); 
```

并在`ItemDetailActivity`这一行评论：

```
// getActionBar().setDisplayHomeAsUpEnabled(true); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T02:37:31.020

我认为 Master/Detail Flow 模板需要 api 级别 11，因为它使用操作栏。我将尝试将此模板与[ActionBarSherlcock](http://actionbarsherlock.com/)一起使用，看看它是否适用于 android 2.2 或 2.3。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-07T16:01:43.247

关于第一个问题，它需要 V11 的一个原因是它使用了 list_content，并且它不包含在兼容性库中。一个解决方法是[here](https://stackoverflow.com/questions/7863074/including-list-content-into-list-layout-to-retain-listfragment-functionality)。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-08T11:07:41.053

[您问题第二部分中使用的技术是Layout Alias](http://developer.android.com/training/multiscreen/screensizes.html#TaskUseAliasFilters)的一个示例。

# jquery - 将 ViewModel 传递给可重用的敲除控件

> ID：11413947
> 
> 赞同：0
> 
> 时间：2012-07-10T13:05:38.930
> 
> 标签：jquery, knockout.js, custom-component, knockout-2.0

我有一个可重复使用的控件/自定义绑定和模板，旨在基于一组传入的配置选项和最终绑定到页面的 ViewModel 构建一个动态向导。我已经正确构建了向导并显示了所有必填字段，但到目前为止，我一直无法获取要显示的实际输入字段值。

有任何想法吗？

*视图模型*

```
var user = function () {
            var self = this;
            self.FirstName = ko.observable("Brent");
            self.LastName = ko.observable("Pabst");
            self.Email = ko.observable("me@brentpabst.com");
            self.FullName = ko.computed(function () {
                return self.FirstName() + " " + self.LastName();
            });
        };

        var tenant = function () {
            var self = this;

            self.Name = ko.observable("Tenant Name");
            self.SubDomain = ko.observable("Sub Domain");
            self.User = ko.observableArray([new user]);

            self.wizardModel = new merlin.wizard({
                title: "Add a Tenant",
                model: self,
                steps: [
                    { Title: "Tenant Information",
                        Fields: [
                            { Name: "Name", Label: "Organization Name", Value: "Name" },
                            { Name: "SubDomain", Label: "Login Page", Value: "SubDomain" }
                        ]
                    },
                    { Title: "Administrator Information",
                        Fields: [
                            { Name: "FirstName", Label: "First Name", Value: "User.FirstName" },
                            { Name: "LastName", Label: "Last Name", Value: "User.LastName" },
                            { Name: "Email", Label: "E-Mail Address", Value: "User.Email" }
                        ]
                    }
                ]
            });

            self.save = function () {
                alert(ko.toJSON(self));
            };
        };

        ko.applyBindings(tenant()); 
```

*向导模型*

```
 merlin.wizard = function (config) {
    var self = this;
    self.steps = config.steps;
    self.title = config.title;
    self.model = config.model;
    self.currentStep = ko.observable(0);
}; 
```

*模板和装订*

```
var templateEngine = new ko.nativeTemplateEngine();

templateEngine.addTemplate = function (templateName, templateMarkup) {
    document.write("<script type=\"text/html\" id='" + templateName + "'>" + templateMarkup + "<" + "/script>");
};

templateEngine.addTemplate("merlin_wizard", "\
    <form class=\"m-ui-wizard\">\
        <h1 data-bind=\"text: title\" />\
        <h2 data-bind=\"text: title\" />\
        <div class=\"m-ui-wizard-steps\" data-bind=\"foreach: steps\">\
            <div class=\"m-ui-wizard-step\">\
                <!-- ko if: $data.Fields -->\
                    <!-- ko foreach: Fields -->\
                        <label data-bind=\"text: Label, attr: { for: Name }\"></label>\
                        <input type=\"text\" data-bind=\"attr: { name: Name }, Value: typeof value === 'function' ? Value($root.model) : $root.model[Value]\" />\
                    <!-- /ko -->\
                <!-- /ko -->\
            </div>\
        </div>\
    </form>");

ko.bindingHandlers.wizard = {
    init: function () {
        return { controlsDescendantBindings: true };
    },
    update: function (element, viewModelAccessor, allBindingsAccessor) {
        var viewModel = viewModelAccessor(), allBindings = allBindingsAccessor();

        while (element.firstChild)
            ko.removeNode(element.firstChild);

        var wizTemplateName = allBindings.gridTemplate || "merlin_wizard";

        var wizContainer = element.appendChild(document.createElement("DIV"));
        ko.renderTemplate(wizTemplateName, viewModel, { templateEngine: templateEngine }, wizContainer, "replaceNode");
    }
}; 
```

*HTML 片段*

```
<div data-bind="wizard: wizardModel"></div> 
```

**注意：**我在 Fiddle 中根本无法让它工作，除了我可能会通过这个设置推动 Fiddle 的界限之外，我不确定为什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T03:37:37.983

您的值绑定字符串`<input>`不正确。它应该更像：

```
value: typeof Value === 'function' ? Value($root.model) : $root.model[Value] 
```

这是**[一个小提琴](http://jsfiddle.net/antishok/qTnew/)**

# jquery - 将滑块调整为全屏，不滚动以它为中心的元素

> ID：11413948
> 
> 赞同：0
> 
> 时间：2012-07-10T13:05:39.117
> 
> 标签：jquery, css, slider, positioning

我有一个滑块 WMUslider，我正在尝试使其全屏显示，图像调整为窗口大小，元素调整以适应方面。这在css中应该是可行的，但我无法让它工作。这是页面上唯一的东西，现在你必须向下滚动才能看到整个图像。任何我能得到的帮助我都非常感激，我一直在尝试这样做一段时间，并且开始变得非常沮丧。

这是网站：

[http://www.klossal.com/js/wmuSlider/demo/demo3.html](http://www.klossal.com/js/wmuSlider/demo/demo3.html)

HTML：

```
<div class="wmuSlider example1">
<div class="wmuSliderWrapper" style="height:100%;">
<article>
<img src="http://www.klossal.com/portfolio/space_1_header.png" />
</article>
<article>
<img src="http://www.klossal.com/portfolio/space_2_header.png" />
</article>
</div>
</div> 
```

CSS

```
/* Demo */
.wmuSlider,
.wmuGallery {
margin-bottom: 20px;
}

/* mwuSlider */
.wmuSlider {
position: relative;
overflow: hidden;
}
.wmuSlider .wmuSliderWrapper {
display: none;
}
.wmuSlider .wmuSliderWrapper article {
position: relative;
text-align: center;
}
.wmuSlider .wmuSliderWrapper article img {
max-width: 100%;
height: auto;
}

/* mwuGallery */
.wmuGallery .wmuGalleryImage {
position: relative;
text-align: center;
}
.wmuGallery .wmuGalleryImage img {
max-width: 100%;
height: auto;
}

/* Default Skin */
.wmuGallery .wmuGalleryImage {
margin-bottom: 10px;
}
.wmuSliderPrev, .wmuSliderNext {
position: absolute;
width: 40px;
height: 80px;
text-indent: -9999px;
background: url(http://klossal.com/js/wmuSlider/demo/images/sprites.png) no-repeat 0 0;
top: 50%;
margin-top: -40px;
z-index: 2;
}
.wmuSliderPrev {
background-position: 100% 0;
left: 20px;
}
.wmuSliderNext {
right: 20px;
}
.wmuSliderPagination {
z-index: 2;
position: absolute;
left: 50%;
bottom: 0px;
}
.wmuSliderPagination li {
float: left;
margin: 0 5px 0 0;
list-style-type: none;
}
.wmuSliderPagination a {
display: block;
text-indent: -9999px;
width: 10px;
height: 10px;
background: url(http://klossal.com/js/wmuSlider/demo/images/sprites.png) no-repeat 0      
-80px;
}
.wmuSliderPagination a.wmuActive {
background-position: -10px -80px;
}

body{
background:#141414;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T13:14:15.463

试试 `background-size: cover` 这将覆盖页面，使其具有屏幕的宽度。

# xpath - Xpath 表也随着组合框的变化而变化

> ID：11413949
> 
> 赞同：0
> 
> 时间：2012-07-10T13:05:39.373
> 
> 标签：xpath, combobox, web-scraping, html-agility-pack

我正在使用 C# 开发一个应用程序，该应用程序可以访问网站并从表格中获取一些内容。它工作正常，但问题是：当我在组合框中选择不同的值时，我正在获取更改内容的表。我使用的 Xpath 总是获取网站上首先显示的表格，而我不知道如何获取其他表格。我在这里发布所有我认为对你有用的东西来帮助我。

该网页是： [http ://br.soccerway.com/national/brazil/serie-a/2012/regular-season/](http://br.soccerway.com/national/brazil/serie-a/2012/regular-season/)

xpath/C# 代码：

```
HtmlNodeCollection no2 = doc.DocumentNode
   .SelectNodes("//*[@id='page_competition_1_block_competition_matches_summary_6']/div[2]/table/tbody/tr/td[@class='team team-a ' or @class='date no-repetition' or @class='score-time score' or     @class='team team-b ']"); 
```

在网站上，您必须单击分数正上方的“Por semana de jogo”选项，才能看到组合框。

我需要从所有表格中获取所有分数，而不仅仅是出现的那个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T18:41:34.447

因此，当您从下拉列表中选择一个比赛周时（或单击下拉列表上方的“前”或“proximo”链接），页面中的 JavaScript 会调用服务器以获取所选比赛周的数据。它只是通过 GET 向服务器发送一个 URL。

数据以 JSON 对象的形式返回，该对象内部是 HTML 表格。这个 HTML 被加载到 DOM 中的正确位置，然后浏览器会立即显示该周的数据。

以编程方式获得此功能需要一些工作，但可以完成。您可以做的是确定每周的 URL。希望大多数查询字符串都是不变的，除了所讨论的那一周。因此，您将有一个样板 URL，您可以根据需要调整一周，并将其发送到服务器。您获取 JSON 并解析出表格 HTML。然后，您就很成功了：您只需将该 HTML 输入到 Agility Pack 中并像往常一样使用它。

我做了一些调查，并使用 Chrome 的开发者工具，在网络选项卡中，我发现当我选择一个游戏周时，发送到服务器的 URL 看起来像这样（这是第 14 周）：

[http://br.soccerway.com/a/block_competition_matches_summary?block_id=page_competition_1_block_competition_matches_summary_6&callback_params=%7B%22page%22%3A%229%22%2C%22round_id%22%3A%2217449%22%2C%22outgroup%22%3A %22%22%2C%22view%22%3A%221%22%7D&action=changePage¶ms=%7B%22page%22%3A13%7D](http://br.soccerway.com/a/block_competition_matches_summary?block_id=page_competition_1_block_competition_matches_summary_6&callback_params=%7B%22page%22%3A%229%22%2C%22round_id%22%3A%2217449%22%2C%22outgroup%22%3A%22%22%2C%22view%22%3A%221%22%7D&action=changePage&params=%7B%22page%22%3A13%7D)

（请注意，您也可以使用其他工具，例如 FireFox 中的 Firebug 或 Fiddler 来获取 URL）。

通过尝试其他周并进行比较，看起来 (selected week - 1) 在 params 查询字符串的末尾附近找到：“...%3A13...”。因此，对于第 15 周，您将使用“...%3A14...”。幸运的是，不同周的 URL 之间似乎只有一个差异区域，它位于 callback_params 查询字符串中。不幸的是，我无法弄清楚它如何与选定的一周联系起来，但希望你能做到。

因此，当您将该 URL 输入浏览器时，您会返回 JSON 块。如果您搜索“<table”和“/table>”，您将看到所需的 HTML。在您的 C# 代码中，您可以使用一个简单的正则表达式将其从 JSON 字符串中解析出来：

```
string json = "..." // load the JSON string here

RegexOptions options = RegexOptions.IgnoreCase | RegexOptions.Singleline;
Regex regx = new Regex( "(?<theTable><table.*/table>)", options );

Match match = regx.Match( json );

if ( match.Success ) {
    string tableHtml = match.Groups["theTable"].Value;
} 
```

将 HTML 字符串输入到 Agility Pack 中，您应该可以上路了。

# python - 用列表中的值替换字符串中的变量名并避免冗余替换

> ID：11413950
> 
> 赞同：1
> 
> 时间：2012-07-10T13:05:41.993
> 
> 标签：python, string, list, replace

给定一个 eval 方程：

```
 eval_str = 'VAR1 > 0 and VAR1 < 10 and (VAR2 == VAR1::VALUE_X or VAR2 == VAR2::VALUE_X)' 
```

任务：我需要用它们的实际值替换变量（本例中为 VAR1、VAR2），并用引号将给定的“常量”（VAR1::VALUE_X）括起来。

问题：由于变量名存在于常量和 eval 字符串中，并且由于变量可以替换为包含变量名本身的字符串 - 我遇到了常量值中的变量名将被另一个常量替换的问题或变量值。更好地展示...

```
 eval_str = '(VAR2 == VAR2::VALUE_X or VAR2 != VAR2::VALUE_Z) and (VAR1 > 0 and VAR1 < 10)'
     var_dict = {'VAR1':'5','VAR2':'VAR1::VALUE_Y'}

     # what I do is strip out most of the special characters
     # the following findall = ['VAR1', '0', 'and', 'VAR1', '10', 'and', 'VAR2', 'VAR1::VALUE_X', 'or', 'VAR2', 'VAR2::VALUE_X']
     for x in re.findall('[^\s()<>=!]+',eval_str):
        # skip digits, and, or, None *need to improve regex
        if x.replace('.','').isdigit() or x == 'and' or x == 'or' or x == 'None':
           continue
        # if variable is in dict
        if x in var_dict.keys():
           # only replace first
           eval_str = eval_str.replace(x,var_dict[x],1) 
        # if is constant
        elif x.__contains__('::'):
           eval_str = eval_str.replace(x,'\'%s\''%x,1)

     print eval_str
     # (5::VALUE_Y == '5::VALUE_Y::VALUE_X' or VAR2 != 'VAR2::VALUE_Z') and (VAR1 > 0 and VAR1 < 10) 
```

与其通过每个变量/值递增，不如为每个变量/值使用正则表达式替换它们会更好？或者，如果有办法在每次替换后记住我在字符串中的位置，我可以修复我现有的解决方案吗？

特维姆！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T13:26:08.687

看起来（对我来说）这样可以通过字符串格式化更容易完成——假设你对输入字符串有一点控制：

```
>>> d={'action':'bar','verb':'foo'}
>>> print ("don't %(action)s a %(verb)s"%d) 
```

或者这个怎​​么样：

```
import re
class DictFormatter(dict):
    def __missing__(self,k):
        return k

eval_str = '(VAR2 == VAR2::VALUE_X or VAR2 != VAR2::VALUE_Z) and (VAR1 > 0 and VAR1 < 10)'
var_dict = DictFormatter()
var_dict.update({'VAR1':'5','VAR2':'VAR1::VALUE_Y'})

extra_space = re.compile(r'[\w:]+')  #words are alphanumeric + ':' + '_'.
eval_str = extra_space.sub(lambda m: ' %s '%(m.group()),eval_str) #make sure there is space between "words"
eval_list = [var_dict[item] for item in eval_str.split()]

print " ".join(eval_list) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T13:19:51.750

要替换`VAR1`离开，`VAR1::VALUE_X`您可以使用负前瞻：

```
string = re.sub(r'VAR\d(?!\:\:)', lambda m: var_dict[m.group(0)], string) 
```

更强大的解决方案会将字符串解析为 AST 并对其进行评估。

# java - 从放置在 Unix 机器中的属性文件中读取值？

> ID：11413953
> 
> 赞同：0
> 
> 时间：2012-07-10T13:05:50.913
> 
> 标签：java, unix

我在下面的位置放置了一个属性文件。我在根目录中创建了一个文件夹并在那里放置了一个属性文件。

```
/someFolder/some.properties 
```

现在通过 java 我需要使用 Properties 类读取属性。我可以给出如下路径吗？

```
Properties props = new Properties();

props.load(new FileInputStream("/someFolder/some.properties")); OR 
```

props.load(new FileInputStream("/someFolder//some.properties"));

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T13:07:48.043

是的，您可以像第一个示例一样给出路径，第二个示例也可以使用，尽管不需要`//`. 您可能已经看到使用 , 的路径`\\`，因为`\`字符需要在字符串文字中转义，但`/`不需要转义。

考虑通过属性（或其他一些配置设置）指定路径，而不是将路径硬编码到代码中：

> java -Dmy.property.file=/someFolder/some.properties com.mine.MyApplication

然后通过 访问路径`System.getProperty("my.property.file");`。

# php - ajax json解码mysql获取数组

> ID：11413963
> 
> 赞同：1
> 
> 时间：2012-07-10T13:06:25.470
> 
> 标签：php, javascript, mysql, ajax

```
$result = mysql_query ("SELECT * FROM order_list");

$test = array();
$i=0;

$myjsons = array();
while($row = mysql_fetch_assoc($result)){ 
    echo $myjsons[] = json_encode(array($row));
} 
```

和一个 AJAX javascript

```
function ajaxFunction() {
    var ajaxRequest; // The variable that makes Ajax possible!
    try {
        // Opera 8.0+, Firefox, Safari
        ajaxRequest = new XMLHttpRequest();
    } catch (e) {
        // Internet Explorer Browsers
        try {
            ajaxRequest = new ActiveXObject("Msxml2.XMLHTTP");
        } catch (e) {
            try {
                ajaxRequest = new ActiveXObject("Microsoft.XMLHTTP");
            } catch (e) {
                // Something went wrong
                alert("Your browser is too old to run me!");
                return false;
            }
        }
    }
    // Create a function that will receive data sent from the server
    ajaxRequest.onreadystatechange = function() {
        if (ajaxRequest.readyState == 4) {
            document.getElementById("resultTXT").value = eval("    (" + ajaxRequest.responseText + ")");
        }
    }
    ajaxRequest.open("POST", "userfind.php", true);
    ajaxRequest.send(null);
}​ 
```

javascript函数不会将数组存储到文本框中

谁能告诉我这里有什么问题？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T13:14:37.583

JSON 输出在您的示例中无效，构建数组并输出单个 json 编码数组，如下所示：

```
$myjsons = array();
while($row = mysql_fetch_assoc($result)){ 
    $myjsons[] = $row;
}
echo json_encode($myjsons); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T13:18:27.647

尝试：

```
 while($row = mysql_fetch_assoc($result)){ 
     $myjsons[] = json_encode(array($row));
    }
 echo json_encode($myjsons); 
```

代替

```
while($row = mysql_fetch_assoc($result)){ 
  echo $myjsons[] = json_encode(array($row));
} 
```

您可以使用 jquery 库进行 tha ajax 调用 [http://api.jquery.com/jQuery.post/](http://api.jquery.com/jQuery.post/)

```
$.post('userfind.php', function(data) {
   $("#resultTXT").val(data);// ==document.getElementById("resultTXT").value =data;
},'json'

); 
```

# javascript - 调用方法时位置 X [object Object]' 处的值无效：[nsIDOMEventListener::handleEvent]

> ID：11413964
> 
> 赞同：1
> 
> 时间：2012-07-10T13:06:26.037
> 
> 标签：javascript, firefox, google-maps-api-3

我目前正在开发一个使用 Google Visualization API 创建热图的 JavaScript 应用程序，但由于某种原因，每当我将我的数据数组添加到热图时，倒数第二个元素总是会引发此错误：

```
Invalid value at position X [object Object]' when calling method: [nsIDOMEventListener::handleEvent] 
```

谁能向我解释这个错误？我以前从未见过它，我对 SO 和 Google 的搜索没有任何用处。

任何帮助，将不胜感激。

```
var heatMapOptions =
    {
            data: weightedLocations,
            dissipating: false,
            map: this.googleMap,
            gradient: [
                      'rgba(0, 0, 0, 0)',       //black - transparent
                      'rgba(0, 0, 255, 1)',     //blue
                      'rgba(0, 255, 255, 1)',   //cyan
                      'rgba(0, 238, 0, 1)',     //green
                      'rgba(0, 255, 0, 1)',     //lime-green
                      'rgba(255, 255, 0, 1)',   //yellow
                      'rgba(255, 165, 0, 1)',   //orange
                      'rgba(255, 0, 0, 1)',     //red
                      'rgba(139, 0, 0, 1)'      //dark-red
                    ],
            maxIntensity: 150,
            opacity: 0.6,
            radius: 4 //4 pixels
    };

    //create a Heatmap overlay to sit on top of the google map, passing it the initialization object created above
    var heatmap = new google.maps.visualization.HeatmapLayer({ options: heatMapOptions}); 
```

**创建对象的位置**

```
function Box(inBox, count)
{
    var box = inBox.toString();
    //strip off any sort keys if they exist
    if(box.indexOf("~") >= 0) {
        box = box.substr(0, box.indexOf('~'));
    }

    //split box into box number and coordinates of four corners
    var splitBox  = box.split("_");
    //console.log(splitBox);

    var boxNumber = splitBox[0];

    this.boxNumber = boxNumber.replace("count|", "");
    this.swlatlon = new google.maps.LatLng( splitBox[1], splitBox[2]);    // a Google LatLng object
    this.selatlon = new google.maps.LatLng( splitBox[3], splitBox[4]);    // a Google LatLng object
    this.nwlatlon = new google.maps.LatLng( splitBox[5], splitBox[6]);    // a Google LatLng object
    this.nelatlon = new google.maps.LatLng( splitBox[7], splitBox[8]);    // a Google LatLng object
    this.points   = [this.swlatlon, this.selatlon, this.nwlatlon, this.nelatlon] //store all points for easy access
    this.count    = count;         // number of ships in this box

    //calculate center of this box
    this.bounds = new google.maps.LatLngBounds(this.swlatlon, this.nelatlon);
    this.center = this.bounds.getCenter();
    this.weightedLocation = { location : this.center, weight : this.count }; // <-- object created here
} 
```

**将对象推入数组的位置**

```
function parseJsonForModelData(json, datatype) {
    for(index in json) {
            obj = json[index];

            if (index == "Model Data") 
            {
                $j.each(obj, function(k, v) 
                {
                    if (datatype == 'heat') 
                    {
                        box = new Box(k, v);

                        // Check boxNumber.  If null, skip messes up world map!
                        if (box.boxNumber == 'null') 
                        {
                            badDataCnt++;
                        }
                        else 
                        {
                            modelData.push(box.weightedLocation); <<- pushed here
                        }
                    }
                });
            }
        }
return modelData;
} 
```

**加权位置**

```
327: {"location":{"$a":-35.5,"ab":172},"weight":"11"} object music.js:730
328: {"location":{"$a":-36.5,"ab":151},"weight":"1"} object music.js:730
329: {"location":{"$a":-37.5,"ab":151},"weight":"1"} object music.js:730
330: {"location":{"$a":-37.5,"ab":168},"weight":"3"} object music.js:730
331: {"location":{"$a":-37.5,"ab":169},"weight":"6"} object music.js:730
332: {"location":{"$a":-39.5,"ab":161},"weight":"4"} object music.js:730
333: {"location":{"$a":-39.5,"ab":162},"weight":"5"} object music.js:730
334: {"location":{"$a":-39.5,"ab":165},"weight":"6"} object music.js:730 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T18:25:38.580

我注意到您发布的 WeightedLocations 有重量字符串。在使用硬编码数据进行测试时，我确实遇到了问题 when `weight`is a string，所以尝试在 parseInt/float 中使用`function Box`，希望这能让事情正常进行。

# ios - 在“AppDelegate *”类型的对象上找不到属性“databaseName”

> ID：11413972
> 
> 赞同：0
> 
> 时间：2012-07-10T13:07:11.097
> 
> 标签：ios, xcode, sqlite

我正在尝试按照[highoncoding 的教程](http://www.highoncoding.com/Articles/836_Persisting_iOS_Application_Data_in_SQLite_Database_Using_FMDB.aspx)学习 SQLite 并将其与 iOS 编程一起使用。

将这行代码添加到我的 AppDelegate.m 文件时：

```
self.databaseName = @"Customers.db"; 
```

我收到以下错误：

> 在“AppDelegate *”类型的对象上找不到 Blockquote 属性“databaseName”

libsqlite3.dylib 在我的框架文件夹中。可能是什么问题呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T13:17:48.193

你合成了变量吗？财产似乎不见了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T13:15:52.377

为 databaseName 添加了 @property 和 @syntesize 并且它起作用了。

# c++ - 停止我的应用程序的两个实例同时写入同一个文件夹

> ID：11413973
> 
> 赞同：0
> 
> 时间：2012-07-10T13:07:11.820
> 
> 标签：c++, locking, directory, block

我有一个将文件写入文件夹的应用程序，如果我的应用程序的另一个实例尝试写入同一目录，我想阻止（或至少显示警告）。

有没有办法可以暂时阻止对文件夹的访问以防止这种情况发生？

编辑：

我有一个关于创建临时文件用作标志的想法，但是有没有办法确保在我的应用程序崩溃时删除临时文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T13:15:51.890

为什么不使用[锁定文件](http://en.wikipedia.org/wiki/File_locking#Lock_files)？

您必须确保“检查并创建”操作是原子的。如果它告诉你锁文件已经存在，那么有另一个进程正在访问该目录。

阻止其他进程的整个目录不是您想要的。您还将阻止 shell 和文件浏览器访问它。

* * *

我看到了您的编辑：您可以将文件的进程 ID 写入锁定文件。如果您的应用程序检测到现有的锁定文件，它可以检查是否存在具有该 ID 的进程。如果没有，请删除锁定文件并重新开始。

# php - import_request_variables() 在 IIS 7 中不起作用

> ID：11413974
> 
> 赞同：0
> 
> 时间：2012-07-10T13:07:12.943
> 
> 标签：php, windows, iis

我刚刚切换到 IIS 来封装我所有的服务器需求并成功安装了 PHP 5.4.4（最新）；但是，`import_request_variables()`被标记为未定义。我的脚本在我的旧 Apache 设置上工作，但不是在这里。关于我可能需要调整的 IIS 特定设置的任何建议？谢谢。

去`http://75.66.61.141/prj/canommonon`看看我说的是哪个。它可能已关闭，因为那是我的笔记本电脑，我把它搬到了我的办公室。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T13:31:42.247

[http://php.net/manual/en/function.import-request-variables.php](http://php.net/manual/en/function.import-request-variables.php)

`import_request_variables()`自 5.4.0 起已删除支持

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T09:58:10.817

why do you wanna use import_request_variables()? You can write a function with the same result, I think.

# visual-studio-2010 - 更改 Resharper 标记栏中状态指示器的颜色

> ID：11413977
> 
> 赞同：3
> 
> 时间：2012-07-10T13:07:15.903
> 
> 标签：visual-studio-2010, visual-studio, resharper, resharper-6.1

我真的很喜欢 Resharper 的标记栏，但我有一种部分色盲（deuteranopia），我想让绿色和黄色状态指示器更容易区分。显然这没什么大不了的，因为我可以检查条上的黄色刻度，但是如果可以更改它，那将是一个不错的选择。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T08:35:04.533

使用 Resharper 7 / Visual Studio 2008：转到工具 > 选项 > 字体和颜色。在显示项目中，滚动到“ReSharper Code Analysis Error Marker on Error Stripe”并更新项目前景色。标记栏上的水平条将显示为此颜色以表示错误。

警告和建议的过程相同。

但是，这似乎不适用于 Visual Studio 2010。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T22:00:00.373

Resharper 7 的状态栏对色盲更加友好，因为它使用图标而不是仅仅改变方块的颜色。

# java - 签署消息并使用 Bouncy Castle 的恢复消息进行验证

> ID：11413980
> 
> 赞同：0
> 
> 时间：2012-07-10T13:07:25.237
> 
> 标签：java, digital-signature, bouncycastle

我编写了以下代码来签署消息，然后在 Bouncy Castle 的 java 中验证它。
签名工作正常但验证不起作用。代码打印结果：
签名被篡改
无法恢复
并返回null。
为什么 eng.hasFullMessage() 函数返回 false 以及为什么下面的代码不起作用？
谢谢大家。

```
 public static String sigVer(PublicKey pu, PrivateKey pr, String original) throws Exception{
        //sign
        BigInteger big = ((RSAKey) pu).getModulus();

        byte[] text = original.getBytes();

        RSAKeyParameters rsaPriv = new RSAKeyParameters(true, big,((RSAPrivateKey) pr).getPrivateExponent());
        RSAKeyParameters rsaPublic = new RSAKeyParameters(false, big,((RSAPublicKey) pu).getPublicExponent());
        RSAEngine rsa = new RSAEngine();
        byte[] data;
        Digest dig = new SHA1Digest();
        ISO9796d2Signer eng = new ISO9796d2Signer(rsa, dig, true);
        eng.init(true, rsaPriv);
        eng.update(text[0]);
        eng.update(text, 1, text.length - 1);

        data = eng.generateSignature();
        String signature = data.toString();
        //verify
        eng = new ISO9796d2Signer(rsa, dig, true);
        eng.init(false, rsaPublic);
        text = signature.getBytes(); 
        if (!eng.verifySignature(text)) {
            System.out.println("signature tampered");
        }
        try{
            if (eng.hasFullMessage()) {
                eng.updateWithRecoveredMessage(signature.getBytes());

            }
                byte[] message = eng.getRecoveredMessage();
                String ss = message.toString();
                return ss;
        }
        catch (Exception e) {
            System.out.println("can not recover");
            return null;

        } `}` 

            回答 #1

赞同：0

时间：2013-03-18T21:47:15.637

实际上，要验证大消息，您必须提供验证输入，即原始消息，而不仅仅是仅用于完全恢复的签名

```
//verify
eng = new ISO9796d2Signer(rsa, dig, true);
eng.init(false, rsaPublic);

// when verifying there has to be also the original plain text
eng.update(text,0,text.length);

signBytes = signature.getBytes(); 
if (!eng.verifySignature(signBytes)) {
     System.out.println("signature tampered");
} 
```

            回答 #2

赞同：0

时间：2013-12-29T10:25:32.863

我玩弄了这种方法，也收到了错误。此外，提到的“更新”方法不起作用，并且“updateWithRecoveredMessage”不存在。

经过一些测试，我发现：

*   我必须起诉 getBytes("UTF-8") 和 String s = new String(message, "UTF-8")
*   我最多可以在签名中使用 234 个字节，如果有 235 个字节就会损坏。（猜想它是 256 字节，但有些用于填充/标记）

如果我理解正确，问题是签名者只允许在签名中包含一定数量的字节。

如果您使用更长的有效负载，您还必须在验证步骤中包含有效负载：

```
 eng.init(false, rsaPublic);
    byte[] message = payload.getBytes("UTF-8");
    eng.update(message, 0, message.length); 
```

然后验证工作正常，您可以使用 eng.getRecoveredMessage() 获得有效负载的第一部分。

对我来说，这违背了目的，所以我走了另一条路。

我使用的解决方法是两个两步法：

1）我生成一个存储在签名中的短密钥 2）使用对称（即AES）加密大有效载荷。我还为有效载荷生成了一个哈希值。3) 有效载荷的密钥和散列是包含在签名中的。

            回答 #3

赞同：0

时间：2019-09-25T09:52:48.800

大多数时候，我们没有要更新和验证签名的原始消息。另一方面，长度限制为 234 个字节。

```

# vb.net - 如何在正斜杠或反斜杠 VB.net 处拆分字符串？

> ID：11413983
> 
> 赞同：2
> 
> 时间：2012-07-10T13:07:27.900
> 
> 标签：vb.net, arrays, split

我目前在每次出现正斜杠时拆分一个字符串。在使用反斜杠而不是正斜杠的路径的情况下，如果改为使用所有反斜杠，我该如何完成拆分功能？谢谢你的帮助。

```
Dim p() as string
p = Split(strP, "/")'Or backward slash 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T13:10:13.227

```
p = someString.Split("/"c, "\"c) 
```

# c# - 从后面剥离 Html 字符串以获得特定数量的 标签

> ID：11413986
> 
> 赞同：1
> 
> 时间：2012-07-10T13:07:33.320
> 
> 标签：c#, html, regex

如果我有一个像这样的 html 字符串：

```
 <strong>
    <br />\r\n
    <br />\r\n
<table></table>
    <br />\r\n
    <br />\r\n
    <br />\r\n
    <br />\r\n
    <br />\r\n
    <br />\r\n
    </strong>\r\n
    </span>\r\n 
```

是否可以剥离 html，以便我`<br>`在 html 末尾只有 1 个，所以人们将无法在最后创建 40 个新行？

**解决方案如下所示：**

```
 <strong>
        <br />\r\n
        <br />\r\n
    <table></table>
        <br />\r\n
        </strong>\r\n
        </span>\r\n 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T13:50:01.563

不确定您在什么上下文中提出问题，但您可以使用[下一个相邻选择器](http://api.jquery.com/next-adjacent-Selector/)在页面本身上使用 jQuery， 如下所示：

```
$("br+br").remove(); 
```

[这是它的一个例子。](http://jsfiddle.net/fpWGG/2/)

如果您*只想*删除表格后面的中断标记，只需将您的 jQuery 语句更改为如下所示：

```
$("table").nextAll("br+br").remove(); 
```

[这是一个实际的例子。](http://jsfiddle.net/fpWGG/6/)

这里是[在您的页面中包含 jQuery 的说明](http://think2loud.com/576-jquery-101-adding-jquery-to-your-website/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T14:54:55.567

如果可以，请查看[HTML Agility Pack](http://htmlagilitypack.codeplex.com/)。它可以在这里为您提供帮助。

这是我写的测试代码：

```
static void Main(string[] args)
{
    var htmlDoc = new HtmlDocument();
    htmlDoc.Load(@"E:\Libs\HtmlAgilityPack.1.4.0\htmlstring.html");

    var nodes = htmlDoc.DocumentNode.SelectNodes("//br").Skip(3);

    foreach (HtmlNode node in nodes)
    {
        node.PreviousSibling.Remove();

        node.Remove();
    }

    var output = htmlDoc.DocumentNode.OuterHtml;

    htmlDoc.Save(@"E:\Libs\HtmlAgilityPack.1.4.0\htmlstring-changed.html");
} 
```

# ios - 调整 UIAlertView 问题的大小（周围有白线）

> ID：11413987
> 
> 赞同：0
> 
> 时间：2012-07-10T13:07:44.243
> 
> 标签：ios, uitableview, uialertview

我在 uialertview 中显示一个表格视图，周围出现一条奇怪的白线。我曾尝试更改内容模式，然后调用 [alertView setNeedsDisplay]，但它似乎不起作用。 ![在此处输入图像描述](../Images/881e9ad6926752c17c3ec7765a098e3d.png)

有人可以帮忙吗？谢谢。

```
// increase the alertview size, if we are going to show the scope
#define ALERT_VIEW_WIDTH 750
#define ALERT_PADDING 20
- (void)willPresentAlertView:(UIAlertView *)alertView {
    {

        id thing;
        if ( [[[alertView class] description] isEqualToString:@"UIAlertTableView"]){ //change the alert view size
            int center=alertView.center.x-ALERT_VIEW_WIDTH/2;
            for (thing in alertView.subviews)
            {
                NSLog(@"%@", [[thing class] description]);
                if([[[thing class] description] isEqualToString:@"UITableView"])
                {
                    UIView* v=(UIView*)thing;
                    v.frame=CGRectMake(v.frame.origin.x+ALERT_PADDING, v.frame.origin.y, ALERT_VIEW_WIDTH-ALERT_PADDING*3, 250);
                }
                if([[[thing class] description] isEqualToString:@"UIAlertButton"])
                {
                    UIView* v=(UIView*)thing;
                    v.frame=CGRectMake(v.frame.origin.x+ALERT_PADDING, v.frame.origin.y, ALERT_VIEW_WIDTH-ALERT_PADDING*3, v.frame.size.height-10);
                }
                if([[[thing class] description] isEqualToString:@"UILabel"])
                {
                    UIView* v=(UIView*)thing;  
                    v.frame=CGRectMake(v.frame.origin.x+ALERT_PADDING, v.frame.origin.y, ALERT_VIEW_WIDTH-ALERT_PADDING*3, v.frame.size.height);
                }
            }
            alertView.contentMode = UIViewContentModeRedraw;
            alertView.frame=CGRectMake(center, alertView.frame.origin.y, ALERT_VIEW_WIDTH, 360);
            [alertView setNeedsDisplay];
        }        
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T13:23:17.637

我知道这绝不是人们想听到的答案……但是显示大量数据通常不是 UIAlertView 的目的。

来自 Apple 的用户界面指南：

“避免创建太长的警报消息。如果可能，请保持消息足够短以显示在一两行。如果消息太长，它会滚动，这不是一个好的用户体验。”

[http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/mobilehig/UIElementGuidelines/UIElementGuidelines.html](http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/mobilehig/UIElementGuidelines/UIElementGuidelines.html)

然而，在一个更有用的注释中...... UIAlertViews 总是有那个白色边框。然而，由于你如此大幅度地增加视图的大小，这条线被拉长了。这是一个普通的 UIAlertView，你可以看到这条线有多大：

![UIAlertView 图像](../Images/a82b660fef31a55845af5b6895c712bc.png)

我的主要建议是重新设计你想要做的任何事情，这样你就不必在 UIAlertView 中显示一条巨大的消息，因为它在大多数时候并不合适。

但是，如果您真的想摆脱白色边框，您可能必须继承 UIAlertView 并覆盖它的 drawrect 以自己进行绘图。

# c# - System.Reflection.RuntimeParameterInfo 由于其保护级别而无法访问

> ID：11413994
> 
> 赞同：0
> 
> 时间：2012-07-10T13:08:08.737
> 
> 标签：c#, reflection, postsharp

尝试序列化通用列表时出现以下错误“System.Reflection.RuntimeParameterInfo 由于其保护级别而无法访问。只能处理公共类型”

这是我下面的代码

```
 XmlSerializer serializer = new XmlSerializer(typeof(List<System.Reflection.ParameterInfo>));
            XDocument document = new XDocument();
            using (XmlWriter xmlWriter = document.CreateWriter())
            {
                serializer.Serialize(xmlWriter, parameterList);
            }
            return document.Root.ToString(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T13:18:30.553

并非所有类型都是可序列化的。使用诸如 之类的序列化`XmlSerializer`程序，最好的方法是**编写一个**包含您感兴趣的部分的 DTO，例如：

```
public class Parameter {
    public string Name {get;set;}
    public string TypeName {get;set;}
    public bool ByRef {get;set;} 
} 
```

然后从 中填充`ParameterInfo`，并序列*化*。请注意，这里有些事情是有问题的，例如序列化 a 会非常不方便`DefaultValue`，除非您将其序列化为字符串并在接收器处将其解析回。

# c# - C# 在线本地化

> ID：11413995
> 
> 赞同：4
> 
> 时间：2012-07-10T13:08:15.030
> 
> 标签：c#

我有一个想要国际化的 C# 应用程序，我希望用户能够在 Internet 上编辑资源文件。有没有办法在互联网上协作更改 C# 资源文件？我知道有一些适用于 android 的开源 PHP 项目可以让用户在线翻译 xml 字符串文件，为 C# 寻找类似的东西，它是免费和开源的

编辑：我已经尝试过 transifex，它很好地列出了 .resx 文件中的所有字符串，这些字符串是手动创建的并且只包含字符串。然而，它发现它对于本地化表单不是很智能和有用。将表单资源上传到 transifex 会导致为翻译填充所有不相关的信息。就像表单中我的控件的所有 x、y 位置一样，甚至像 System.Windows.Forms.RichTextBox, System.Windows.Forms, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089 这样的东西。在我的情况下，我在表单中只有几个字符串用于按钮名称和标签，但 transifex 显示了 100 多个不相关的东西。
因此，如果您的表单是使用 VS 设计器设计的，那么它对于 C# 表单翻译非常无用。翻译人员不一定是程序员，向他们展示所有不必要的字段是一团糟。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T13:11:11.327

看看[Transifex](https://www.transifex.com/)。

这是一个用于协作管理翻译的网络平台。它们还支持[Windows 资源文件](http://help.transifex.com/features/formats.html#resx-files)。

托管对于开源项目是免费的，软件本身也是[开源](http://pypi.python.org/pypi/transifex/)的。

# php - 数组变量正在从 PHP 中的会话中删除

> ID：11413997
> 
> 赞同：0
> 
> 时间：2012-07-10T13:08:39.650
> 
> 标签：php, session

我将我的多选组合的值存储在会话中。

```
<select id="abc" name="abc[]" multiple="multiple">
<option value="select">Select</option>
<option value="first">first</option>
<option value="second">second</option>
<option value="third">third</option>
<option value="fourth">fourth</option>
</select>

$_SESSION['abc']=$_POST['abc']; 
```

我在同一个文件中获得了会话变量的正确值，但是我有一个 3 步注册过程，所以在第 3 步中，我得到了除了多选组合的这个值之外的所有其他变量。

此外，我没有得到一个检查组的值（再次因为它是一个数组变量）。

有人对此有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T13:11:12.203

这可能是别的东西。你会忘记重新开始你的会话吗？您是否有可能用空数据覆盖 $_SESSION['var'] 。

您应该永远不会在会话中存储对象或数组时遇到问题。将数据存储到会话中的唯一问题是存储资源。