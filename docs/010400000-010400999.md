# StackOverflow 问答 10400000-10400999

# mongodb - 用 mongodb 玩 2.0 Morphia 设计模式

> ID：10400000
> 
> 赞同：3
> 
> 时间：2012-05-01T15:29:49.200
> 
> 标签：mongodb, dao, playframework-2.0, morphia

这是我第一次使用 MongoDb 和 morphia，总的来说我对数据库还很陌生。我想知道我应该如何用 morphia 组织我的代码。我正在考虑使用[morphia 文档](http://code.google.com/p/morphia/wiki/DAOSupport)`DAO`中所说的类似方法，但他们似乎这样做的方式是，我必须为我拥有的每个模型对象创建一个。我喜欢 play 的方法，即基本上赋予模型对象自救的能力，但我对这里发生的事情只有模糊的概念，所以我不确定如何用 morphia 来实现这一点，或者是否需要这样做所以。到目前为止，我的代码看起来像这样，用于 User 模型的骨架。`DAO`

```
@Entity("user")
public class User extends BasicDAO<User, ObjectId>{
    @Id ObjectId id;

public String firstName;

public String lastName;

public String email;

@Indexed public String username;

public String password;

public User(Mongo mongo, Morphia morphia){
    super(mongo, morphia, "UserDAO");
}
public User(){
    this(DBFactory.getMongo(), DBFactory.getMorphia());
}

public void save(){
    ds.save(this);
}

public static User findByUsername(String uname){
    return DBFactory.getDatastore().find(User.class, "username =", uname).get();
}

public static boolean authenticate(String uname, String pword){
    User user = DBFactory.getDatastore().createQuery(User.class).filter("username", uname).filter("password", pword).get();
    if(user == null)
        return false;
    else
        return true;
}
} 
```

它目前正在抛出一个`StackOverflowException`，我不知道为什么，但这是一个尝试完成的合理模式吗？

此外，DBFactory 基本上只是为了维护单例 mongodb 连接而存在。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T14:45:33.203

Play 2.0 有一个与 MongoDb 一起工作的模块我认为你应该试一试 [https://github.com/vznet/play-mongo-jackson-mapper#readme](https://github.com/vznet/play-mongo-jackson-mapper#readme)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T03:51:04.727

我开始使用带有 play framework 2.x 的 Marphia。在我看来，它比杰克逊映射器更复杂。我按照这个例子安装了marphia插件：[https ://github.com/czihong/playMongoDemo](https://github.com/czihong/playMongoDemo)

# java - 使用 DDD 方法的领域层和 DAO 层

> ID：10400007
> 
> 赞同：0
> 
> 时间：2012-05-01T15:30:20.580
> 
> 标签：java, jpa, domain-driven-design

许多程序员认为，使用 JPA 时可以绕过 DAO 层。

在使用 DDD 方法时，域层由**基础设施区域**（包含存储库实现等外部资源）和**域区域**（包含实体、所需的值对象和存储库接口和服务等）组成。

因此，如果跳过 DOA 层，基础设施区域是否应该成为称为“基础设施”的包中域层的一部分？

如果基础设施部分应该在一个单独的层中移动（分离项目以使事情更清洁），那么域层和基础设施层之间的循环依赖关系是否可以接受？实际上，**实体和接口存储库必须是共享**的。

否则，我是否应该将实体和存储库接口与域层分开，以便被视为域和基础设施共享的独立事物？

什么是好的做法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T16:35:21.173

DAO 层和基础设施区域/域区域不是一回事。在实现基础设施/域区域时使用 DAO 层。

您的程序员是正确的，JPA 是 DAO 层。您仍然需要基础设施区域和域区域。如果您必须在这两个区域内实现 DAO 层，它们只会更小/不同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T12:54:06.973

在 DDD 中，数据访问对象 (DAO) 是存储库。没有“DAO 层”，持久性是基础设施层的一部分。

正如您所提到的，存储库的合同（接口）是在域层中定义的，而它们的具体实现则驻留在基础设施层中。

领域层不需要引用基础设施，因为实体应该是纯领域对象，不知道它们是如何被持久化、如何转移到其他系统等等的。

> “换句话说，每一层都使用一个抽象接口来代表它的基础设施需求。它不知道它将使用什么基础设施。它只是通过抽象接口声明它的需求，并期望基础设施实现该接口并提供所需的功能。”

[http://www.artima.com/weblogs/viewpost.jsp?thread=35139](http://www.artima.com/weblogs/viewpost.jsp?thread=35139)

# java - SQLite 数据库转储和读取函数 Android

> ID：10400014
> 
> 赞同：0
> 
> 时间：2012-05-01T15:30:40.920
> 
> 标签：java, android, sqlite

我对在 Android 上使用 SQLite 比较陌生。我在 Windows 命令提示符下使用 SQLite 有一些经验。无论如何，是否可以直接在您的 Javacode for android 中使用 sqlite 的 .output、.dump、.mode、.read 和其他本机命令？我知道 android 中有一个 db.exec(raw SQL command)，但你只能执行非返回任务，比如插入一行。

理想情况下，我希望能够直接在手机上将我的 SQLite 数据库查询导出到文本文件或 .csv 文件，而无需手动查询数据库并进行字符串格式化然后输出写入文件。我知道这在计算机上的 sqlite db 的命令提示符下是可能的。

```
>.ouput file.csv
>.separator ,
>select * from test; 
```

然后你的数据库目录中有一个名为 file.csv 的文件，其中包含选择查询的结果。**我可以在 Android 活动中直接使用 sqlite 做同样的事情吗？**（我不介意必须将 file.csv 移动到 sd 卡以便用户获取它等，并且很乐意做那部分。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T16:08:46.760

> 无论如何，是否可以直接在您的 Javacode for android 中使用 sqlite 的 .output、.dump、.mode、.read 和其他本机命令？

不，因为无法保证您的设备上有 SQLite 命令行客户端。您列出的内容不是“sqlite 的本机命令”，而是**`sqlite3`**命令行二进制文件的本机命令。

# java - 无法在scala中设置名为type的java注释成员？

> ID：10400015
> 
> 赞同：6
> 
> 时间：2012-05-01T15:30:45.990
> 
> 标签：java, scala, scala-java-interop

我正在尝试将一些java代码移植到scala。该代码使用带有名为的成员的注释，`type`但是这是 scala 中的关键字。有没有办法在scala中解决这个有效的java成员？

这是Java代码

```
@Component(
        name = "RestProcessorImpl",
        type = mediation // Compile error
        )
public class RestProcessorImpl {
 // impl
} 
```

这部分代码在 scala 中是相同的，只是它`type`是一个关键字，所以它不会编译。有没有办法逃避`type`关键字？

这也是带有`type`成员的java类的问题

**HasType.java**

```
package spike1;

public class HasType {
    public String type() { 
        return "the type";
    }
} 
```

**UseType.scala**

```
class UseType {
    def hasType = new HasType
    hasType.type() // Compile error
} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-01T15:33:19.997

您可以使用反引号来绕过非法标识符：

```
val type = 1    // error
val `type` = 1  // fine 
```

因此，使用您的代码，您可以执行以下操作：

```
val hasType = new HasType
hasType.`type`()   // no error 
```

# c# - 如何从 vsto 插件中以编程方式加载自动化插件 (dll)

> ID：10400020
> 
> 赞同：2
> 
> 时间：2012-05-01T15:31:20.963
> 
> 标签：c#, excel, vsto, user-defined-functions

VSTO
VS2008 SP1
.NET 3.5
Excel 2007

我是一个 .net 菜鸟。我正在尝试从 vsto 插件的 ThisAddIn_Startup() 方法中的 vsto 插件中加载一个自动化插件，它是一个 excel 应用程序/自动化插件（它是一个 dll 不是 xla 或 xll）。从谷歌我得到了以下不起作用的解决方案。

```
private void ThisAddIn_Startup(object sender, System.EventArgs e)
{

        Application excel = Globals.ThisAddIn.Application;
        //Also tried without display alerts being set to false
        excel.DisplayAlerts = false;
        foreach (AddIn addin in excel.AddIns)
        {
            if (addin.progID.Equals("MY_ADDIN_PROG_ID"))
            {
                Debug.WriteLine("Addin installed is " + addin.Installed);
                addin.Installed = false;
                Debug.WriteLine("Addin is: " + addin.FullName + ", " + addin.progID);
                Debug.WriteLine("Addin installed is " + addin.Installed);
            }
        }
        AddIn addIn = excel.AddIns.Add("MY_ADDIN_PROG_ID", false);
        addIn.Installed = true;
        excel.DisplayAlerts = true;
        Debug.WriteLine("Addin is: " + addIn.FullName + ", " + addIn.progID);
        Debug.WriteLine("Addin installed is " + addIn.Installed);
        excel.DisplayAlerts = false;
        //OTHER STARTUP CODE
        Debug.WriteLine("Starting up addin!");
} 
```

请注意，我可以看到 addin.installed 在启动时设置为 false 并返回 true 但是当我尝试使用插件中的 udfs 填充工作表时，我尝试在稍后的 button_click 方法中加载，我得到 #NAME？错误。我已经黔驴技穷了。任何帮助将不胜感激。

如果我首先尝试在调用按钮单击方法之前通过在单元格中手动键入 udf 来调用 udf，则工作表填充工作并且 udf 会按预期进行评估，但这并不理想。

此外，将 installed 属性设置为 true 似乎没有做任何事情，因为我仍然可以看到 udf 插件在 excel 中处于非活动状态，只有当我将它输入到单元格中时它才会被激活。我还需要做些什么来激活我的 vsto 启动中的自动化插件吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T16:46:29.853

我不确定您是否想在启动事件中执行此操作。我之前做过类似但不完全相同的事情，这可能适用。我在不同的事件处理程序中向 VBA 公开了一些 COM 可见函数：

```
protected override object RequestComAddInAutomationService()
{
    // return something com-visible
} 
```

那么也许您可以尝试以这种方式加载您的自动化 dll？这发生在启动事件触发之前...... Excel 可能会在处理启动事件时锁定其插件列表 - 谁知道？如果有可能知道 Excel 编程就不会那么乏味了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T16:52:13.390

在 Excel 中结合 VSTO 和自动化似乎比看起来更难。您可能会发现我的博客文章很有帮助：

[Excel 中 VSTO 和 UDF 之间的通信](http://csharpramblings.blogspot.ca/2011/09/communicating-between-vsto-and-udfs-in.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T03:44:20.207

只需将字符串值添加到以下注册表项即可。

**对于 Office 2007**

找到 regkey, **HKEY_CURRENT_USER\SOftware\Microsoft\Office\12.0\Excel\Options**，然后创建字符串值，其中 name = **OPEN** , value = **/A "YOUR ADDIN NAME HERE"**（还需要包含引号。）

请注意，对于第一个插件，值名称应称为**OPEN**，对于第二个及以后的插件，请使用**OPEN1**、**OPEN2**等。

**对于 Office 2010**

只需将上述regkey路径中的**12.0**替换为**14.0**即可，其余都一样。

查看 MSDN 上的以下文章，这也将对您有很大帮助。

[http://support.microsoft.com/kb/291392](http://support.microsoft.com/kb/291392)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T14:02:31.007

看起来这是 VSTO 特有的错误。我将我的插件转换为 COM 插件，之后就可以使用代码中的自动化插件了。我的团队已将此问题发送给 microsoft，因此我们将看看他们怎么说。

# php - PHP 代码清理 (Multiple If, Else If, Else)

> ID：10400024
> 
> 赞同：1
> 
> 时间：2012-05-01T15:31:34.927
> 
> 标签：php

我有这段代码。它有效，但我确信有一种更简单、更合乎逻辑的方法。而且只是为了保存问题，`$seriespart`而不是`$row["SeriesPart"]`因为以前的代码而具体。

```
// normal titling convention is Number - Series - Series Part - Sermon
if ($row["Number"] && $row["Series"] && $row["SeriesPart"] && $row["Sermon"]) $title = $row["Number"]." - ".$row["Series"]." - Pt. ".$seriespart." - ".$row["Sermon"];
    // but sometimes a series doesn't have sermon titles
    else if ($row["Number"] && $row["Series"] && $row["SeriesPart"]) $title = $row["Number"]." - ".$row["Series"]." - Pt. ".$seriespart;
        // series that are in process don't have product numbers
        else if ($row["Series"] && $row["SeriesPart"] && $row["Sermon"]) $title = $row["Series"]." - Pt. ".$seriespart." - ".$row["Sermon"];
            // but sometimes a series doesn't have sermon titles
            else if ($row["Series"] && $row["SeriesPart"]) $title = $row["Series"]." - Pt. ".$seriespart;
                // and we don't want product singles just showing a sermon title (it should say S74 - Title as a distinction from other oddball sermons)
                // note the substr() as we want it to say S71 and not S0171
                else if ($row["Number"] >= "0100" && $row["Number"] <= "0199") $title = "S".substr($row["Number"], 2)." - ".$row["Sermon"];
                    // just show the bloody sermon title already
                    else $title = $row["Sermon"]; 
```

我们有一堆布道。这些布道通常是系列的一部分。如果一个系列已经完成，它将有一个系列号、系列标题、系列部分，以及可选的讲道标题、讲道部分、副标题和副标题部分。如果一个系列没有完成，就不会有系列号。有时，讲道没有标题。如果它不是一个系列的一部分，那么它本身就可以是一个实际的产品。其他时候，这只是一个奇怪的布道，不属于任何事情的一部分。

例子...

> Made Healed（仅布道，不是系列的一部分，古怪）
> 
> S45 - 吸盘还是播种？（单是产品）
> 
> 助手 - 铂。1 - 您需要帮助吗？（系列进行中，无系列号）
> 
> 0513 - 不要让你的心变硬 - Pt。2（已完成系列，无讲道标题）
> 
> 1101 - 上帝的荣耀 - 铂。11 - 上帝如何荣耀我们 - Pt。5 - 通过使用我们 - 铂。3（完成系列，讲道标题-讲道部分-副标题-副标题部分）

关于如何清理代码的任何想法，这样我就不必用 if、else if、else 重复相同的信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T15:44:24.640

我认为这会做你想要的：

```
$parts = array();
if ($row["Number"] && ($row["Number"] < "Music01" || $row["Number"] > "Music99"))
{
    if ($row["Number"] >= "0100" && $row["Number"] <= "0199") $parts[] = "S". substr($row["Number"], 2);
    else $parts[] = $row["Number"];
}

if ($row["Series"]) $parts[] = $row["Series"];
if ($row["SeriesPart"]) $parts[] = "Pt. $seriespart";
if ($row["Sermon"]) $parts[] = $row["Sermon"];

$title = implode(" - ", $parts); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T15:41:11.630

```
$title = '';
if ($row["Series"] && $row["SeriesPart"]) {
    if ($row["Number"]) {
        $title .= $row["Number"]." - ";
    // series that are in process don't have product numbers
    }
    $title .= $row["Series"]." - Pt. ".$seriespart;
    if ($row["Sermon"]) {
        $title .= " - ".$row["Sermon"];
    }
// and we don't want product singles just showing a sermon title (it should say S74 - Title as a distinction from other oddball sermons)
// note the substr() as we want it to say S71 and not S0171
} elseif ($row["Number"] >= "0100" && $row["Number"] <= "0199") {
    $title = "S".substr($row["Number"], 2)." - ".$row["Sermon"];
}
// just show the bloody sermon title already
else {
    $title = $row["Sermon"];
} 
```

如果你不想部分创建

```
if ($row["Series"] && $row["SeriesPart"]) {
    if ($row["Number"]) {
        if ($row["Sermon"]) {
            $title = $row["Number"]." - ".$row["Series"]." - Pt. ".$seriespart." - ".$row["Sermon"];
            // but sometimes a series doesn't have sermon titles
        } else {
            $title = $row["Number"]." - ".$row["Series"]." - Pt. ".$seriespart;
        }
    // series that are in process don't have product numbers
    } else {
        if ($row["Sermon"]) {
            $title = $row["Series"]." - Pt. ".$seriespart." - ".$row["Sermon"];
        // but sometimes a series doesn't have sermon titles
        } else {
            $title = $row["Series"]." - Pt. ".$seriespart;
        }
    }
// and we don't want product singles just showing a sermon title (it should say S74 - Title as a distinction from other oddball sermons)
// note the substr() as we want it to say S71 and not S0171
} elseif ($row["Number"] >= "0100" && $row["Number"] <= "0199") {
    $title = "S".substr($row["Number"], 2)." - ".$row["Sermon"];
}
// just show the bloody sermon title already
else {
    $title = $row["Sermon"];
} 
```

# twitter-bootstrap - 响应式设计不适用于 wordpress

> ID：10400025
> 
> 赞同：0
> 
> 时间：2012-05-01T15:31:35.207
> 
> 标签：twitter-bootstrap, responsive-design

我正在创建基于 twitter bootstrap 的响应式布局的 WP 主题。[您可以在panel.daweb.cz](http://panel.daweb.cz)上看到该网站，一切正常.. 当您缩小浏览器的大小时，该网站会更改其他设备的布局...但是当您在其他设备上加载相同的网站时（例如 iphone、带有android) 所以响应式设计不起作用。[我已经在vectoryl.vacau.com](http://vectoryl.vacau.com)上完成了这个网站的 HTML 副本，并且响应式设计也可以在 pc 和其他设备上运行。这是我的function.php [https://gist.github.com/2568852](https://gist.github.com/2568852)。如果您需要发布任何另一段代码，没问题。

请问有人知道出了什么问题吗？我真的绝望了。

谢谢你的时间，对不起我的英语。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T15:37:25.113

您需要在 中包含元视口元素，以告诉设备将布局缩放到设备宽度。

```
<meta name="viewport" content="width=device-width, initial-scale=1"> 
```

# jsp - JSTL 中的表单字段不按字母顺序输出

> ID：10400026
> 
> 赞同：0
> 
> 时间：2012-05-01T15:31:35.853
> 
> 标签：jsp, jstl

我有一个带有顺序命名字段（field1、field2 等）的表单，我需要以相同的顺序输出以进行计算。默认情况下，JSTL 似乎不按字母顺序排序。有没有办法这样做？

这是代码：

```
<c:if test="${param.submitted}">

        <c:set var="hits" value="1" />
        <c:set var="damage" value="0" />

        <table border="1">
            <tr>
                <th>Attack</th>
                <th>Damage (Orig)</th>
                <th>Damage (Scaled)</th>
                <th>Total</th>
            </tr>

        <!-- Loop through form fields -->
        <c:forEach var="information" items="${paramValues}" varStatus="field">
            <!-- Loop through fields' values -->
            <tr>

            <c:forEach var="currentField" items="${information.value}">
                <c:if test="${!empty currentField}">
                    <c:if test="${fn:contains(currentField, '|')}">
                        <c:set var="currentAttack" value="${fn:substringAfter(currentField, '|')}" />
                        <td><c:out value="${hits}" />: <c:out value="${fn:substringBefore(currentField, '|')}" /></td>
                        <td><c:out value="${fn:substringAfter(currentField, '|')}" /></td>

                        <td>
                        <c:choose>
                            <c:when test="${hits < 3}">
                                <c:out value="${currentAttack}" />
                                <c:set var="damage" value="${damage + currentAttack}" />
                            </c:when>
                            <c:when test="${hits == 3}">
                                <c:out value="${currentAttack * 0.8}" />
                                <c:set var="damage" value="${damage + (currentAttack * 0.8)}" />
                            </c:when>
                            <c:when test="${hits == 4}">
                                <c:out value="${currentAttack * 0.7}" />
                                <c:set var="damage" value="${damage + (currentAttack * 0.7)}" />
                            </c:when>
                            <c:when test="${hits == 5}">
                                <c:out value="${currentAttack * 0.6}" />
                                <c:set var="damage" value="${damage + (currentAttack * 0.6)}" />
                            </c:when>
                            <c:when test="${hits == 6}">
                                <c:out value="${currentAttack * 0.5}" />
                                <c:set var="damage" value="${damage + (currentAttack * 0.5)}" />
                            </c:when>
                            <c:when test="${hits == 7}">
                                <c:out value="${currentAttack * 0.4}" />
                                <c:set var="damage" value="${damage + (currentAttack * 0.4)}" />
                            </c:when>
                            <c:when test="${hits == 8}">
                                <c:out value="${currentAttack * 0.3}" />
                                <c:set var="damage" value="${damage + (currentAttack * 0.3)}" />
                            </c:when>
                            <c:when test="${hits == 9}">
                                <c:out value="${currentAttack * 0.2}" />
                                <c:set var="damage" value="${damage + (currentAttack * 0.2)}" />
                            </c:when>
                            <c:otherwise>
                                <c:out value="${currentAttack * 0.1}" />
                                <c:set var="damage" value="${damage + (currentAttack * 0.1)}" />
                            </c:otherwise>
                        </c:choose>
                        </td>
                        <td><c:out value="${damage}" /></td>

                        <c:set var="hits" value="${hits + 1}" />
                    </c:if>
                </c:if>
            </c:forEach>
            </tr>
        </c:forEach>

        </table>
    </c:if>

    <form action="foo.jsp" method="post">
        <input type="hidden" name="submitted" value="true" />
        <c:forEach var="rows" begin="1" end="5" varStatus="stat">
            <p> ${stat.count}:
                <select name="move${stat.count}">
                    <option value="">-Select-</option>
                    <c:forEach var="row" items="${result.rows}">
                    <option value="${row.attack}|${row.damage}">${row.attack}</option>
                    </c:forEach>
                </select></p>

        </c:forEach>
        <input type="submit" name="submit" value="Go" />
    </form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T15:42:13.617

JSTL 不会更改排序顺序或其他内容，也根本没有对集合进行排序的工具。它只是允许您控制 JSP 中 HTML 生成的流程，从而显示*您*告诉它显示的任何内容。

您的问题是在其他地方引起的。您很可能使用 a[`HashMap`](http://docs.oracle.com/javase/6/docs/api/java/util/HashMap.html)而不是[`LinkedHashMap`](http://docs.oracle.com/javase/6/docs/api/java/util/LinkedHashMap.html)来保存字段。A`HashMap`本质上是无序的，而 a`LinkedHashMap`是按插入顺序排序的，就像 a 一样`List`。

* * *

**更新**您正在迭代隐式 EL 变量`${paramValues}`，该变量引用[`ServletRequest#getParameterMap()`](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletRequest.html#getParameterMap%28%29)确实返回 unordered `HashMap`。如果您需要保留请求参数的顺序，则必须以不同的方式解决问题。例如，通过使用固定和索引参数名称以便您可以直接引用它们，或者仅使用 MVC 框架。

# java - Java 小程序套接字服务器权限

> ID：10400027
> 
> 赞同：1
> 
> 时间：2012-05-01T15:31:38.570
> 
> 标签：java, security, sockets, applet

*   我想制作一个 Java 小程序，它用作套接字*服务器*（本地网络 ips 或 127 范围都可以）。
*   我希望这个小程序在网页中运行。
*   理想情况下，浏览器可以从文件系统（file://...）加载网页，但如果需要，我可以安装 HTTP 服务器。
*   小程序需要能够与 JavaScript 交互。

我在浏览所有文档时遇到了麻烦。以上可能吗？我不熟悉java的安全模型。如果我需要签署小程序，或者设置一些特殊的安全或配置设置，那很好。

编辑-如果有人好奇，小程序做的很少。我只想将它用作桥梁，以便在本地计算机上运行的另一个程序可以通过套接字进行通信。该程序提供值，javascript 将使用这些值实时更新 ui。ui 很复杂，用 html/javascript 构建它会节省大量时间。我更喜欢小程序作为套接字服务器而不是套接字客户端，因为否则我需要编写一个单独的程序来充当小程序和其他程序之间的服务器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T17:39:18.873

> 以上可能吗？

当然。如果您控制该小程序和防火墙的安全/策略文件，这是一个单一的浏览器交易，它应该是可行的。您可能需要将一些小程序方法包装在`PrivilegedAction`从 JS 调用的 if 中。

# java - 急切的获取在休眠中执行左连接

> ID：10400028
> 
> 赞同：1
> 
> 时间：2012-05-01T15:31:41.713
> 
> 标签：java, hibernate

我正在定义一个实体 myParent，它工作正常，除了一件事。它具有以下定义：

```
@OneToMany(mappedBy = "myParent", cascade = { CascadeType.ALL }, fetch = FetchType.EAGER)
private List<Child> children; 
```

这会导致执行左连接或右连接，因此如果有两个孩子，我会得到两个父母。我不希望我只想要一个父母和两个孩子。

我可以将 fetchtype 更改为惰性，但我真的不想要那个......？

当我选择所有父母时，列表包含重复的父母，我不想要重复的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T15:38:45.673

您应该使用`DISTINCT_ROOT_ENTITY` [ResultTransformer](http://docs.jboss.org/hibernate/orm/4.1/javadocs/index.html?org/hibernate/transform/ResultTransformer.html)。

这意味着每行结果都是根实体的不同实例。

# java - 如何在 Hibernate 中初始化集合的集合

> ID：10400030
> 
> 赞同：3
> 
> 时间：2012-05-01T15:31:58.413
> 
> 标签：java, hibernate, lazy-loading

我得到了一个`util.List`实例。每个实例都有另一个集合。我想初始化集合的所有实例。这是怎么做的。

```
Hibernate.initialize(parentList); 
```

但是当会话关闭时。可以检索 parentList 的对象的属性。但无法检索其集合的实例属性。我初始化的方式不对还是有其他问题？或者如何初始化所有实例。？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-01T15:44:08.453

```
Hibernate.initialize(parentList); 
```

只会初始化列表中的对象而不是列表中的关联。

从文档：

> 注意：这只确保代理对象或集合的初始化；不能保证集合内的元素将被初始化/物化。

编辑：根据评论

假设我有一个`Student`实体并且每个学生实体都有一个实体列表`Course`。然后可以像这样初始化学生列表：

```
for (Student student : studentList) {
     Hibernate.initialize(student.getCourses());
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-25T13:54:31.180

一种干净的工作方式是继续使用延迟加载并使用值对象设计模式将数据从持久对象传输到值对象，反之亦然。

# objective-c - 如何使用 XCode 中的用户名/密码登录网站？

> ID：10400031
> 
> 赞同：0
> 
> 时间：2012-05-01T15:31:59.280
> 
> 标签：objective-c, cocoa, login, webview

我对 Objective-c 编程非常陌生，而且我对 PHP 的了解几乎一无所有。无论如何，我正在尝试在我的应用程序中创建一个登录屏幕，其中有 2 个用于用户名和密码的文本字段，以及一个用于将用户名/密码输入网站登录页面并连接到帐户的按钮。我不确定我是否走对了，但这是我制作的代码示例：

```
-(IBAction)ButtonClicked:(id)sender
{
    NSString *content = @"username=blabla&password=123456";
    NSData *data=[content dataUsingEncoding:NSASCIIStringEncoding allowLossyConversion:YES];
    NSString *postlenght=[NSString stringWithFormat:@"%d",[data length]];

    NSMutableURLRequest *request = [[NSMutableURLRequest alloc] initWithURL:[NSURL URLWithString:@"http://roadster.co.il/forums/ucp.php?mode=login"]];
    [request setHTTPMethod:@"POST"];
    [request setValue:postlenght forHTTPHeaderField:@"Content-Length"];
    [request setValue:@"application/x-www-form-urlencoded" forHTTPHeaderField:@"Content-Length"];
    [request setHTTPBody:data];
    NSError *error=nil;
    NSURLResponse *response=nil;
    NSData *result=[NSURLConnection sendSynchronousRequest:request returningResponse:&response error:&error];

    [webview loadRequest:request];
} 
```

如您所见，我尝试登录的网站是 [http://roadster.co.il/forums/ucp.php?mode=login](http://roadster.co.il/forums/ucp.php?mode=login) 很抱歉，该网站是希伯来语的，但这不是问题。您能告诉我为什么我无法使用此代码登录吗？（尝试使用真实密码/用户名）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T17:42:39.437

您正尝试发出两次请求。

```
NSError *error=nil;
NSURLResponse *response=nil;
NSData *result=[NSURLConnection sendSynchronousRequest:request returningResponse:&response error:&error];

[webview loadRequest:request]; 
```

两者都`+sendSynchronousRequest:returningResponse:error:`将`-loadRequest:`请求发送到服务器。你只想做一个或另一个。要么删除前三行代码，要么使用`-loadHTMLString:baseURL:`将结果加载到 Web 视图中。

```
NSString *HTMLString = [[[NSString alloc] initWithData:result encoding:NSUTF8StringEncoding] autorelease];
[webview loadHTMLString:HTMLString baseURL:[NSURL URLWithString:@"http://roadster.co.il/forums/ucp.php?mode=login"]]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-23T12:54:49.237

确保“ [http://roadster.co.il/forums/ucp.php?mode=login](http://roadster.co.il/forums/ucp.php?mode=login) ”是表单发布到的 URL，而不是表单的 URL（您可以在HTML 的表单标签。

# jquery - 有没有像 DataTables 这样的 jQuery 插件 ?

> ID：10400033
> 
> 赞同：7
> 
> 时间：2012-05-01T15:32:27.500
> 
> 标签：jquery, html, jquery-plugins, datatables

是否有任何 jQuery 插件应用分页，允许用户选择页面大小，并管理在结果中显示用户的当前位置（例如“显示结果：230 中的 1-5”）？我想在初始页面加载时将所有列表项加载到“ul”中，并应用分页后缀。

[DataTables](http://datatables.net/)似乎可以完成所有这些（以及更多），但它不适用于“ul”。

这是我要完成的线框屏幕截图：

![示例线框](../Images/8fe73ca9519dcd1b1c933ca8f8539ba6.png)

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-03-10T14:38:57.903

另一种选择是将您的`UL`/ `LI`s更改为`table` *动态*，然后附加`dataTables()`。此示例添加了一个名为的 jQuery 扩展方法`dataList`，该方法将任何目标转换`ULs`为 a `TABLE`（但不考虑现有表）：

**JSFiddle：http:** [//jsfiddle.net/TrueBlueAussie/r5xf61zp/5/](http://jsfiddle.net/TrueBlueAussie/r5xf61zp/5/)

```
$.fn.dataList = function (options) {
    this.each(function () {
        var $table = $(this);
        if ($table.is('ul')) {
            var $ul = $table;
            $table = $ul.wrap('<table><tbody/></table').closest('table');
            $ul.find('li').wrap('<tr><td/></tr>').contents().unwrap();
            $ul.contents().unwrap()
            $table.prepend('<thead><tr><th>Heading</th></tr></thead>');
        }
        $table.dataTable(options);
    });
} 
```

并像这样使用`.dataTable()`：

```
$('.example').dataList({
    "sPaginationType": "full_numbers"
}); 
```

*唯一突出的问题是标题的显示内容（当前`Heading`在示例中*：）

## 更新 - （添加标题支持）

只是重新审视这个并决定提供标题的最佳方式是`data-heading`通过`UL`.

HTML 中的示例：

```
<ul class="example" data-heading="My new heading"> 
```

代码：

```
$.fn.dataList = function (options) {
    this.each(function () {
        var $table = $(this);
        if ($table.is('ul')) {
            var $ul = $table;
            $table = $ul.wrap('<table><tbody/></table').closest('table');
            $ul.find('li').wrap('<tr><td/></tr>').contents().unwrap();
            $ul.contents().unwrap()
            $table.prepend('<thead><tr><th>' + ($ul.data('heading') || '') + '</th></tr></thead>');
        }
        $table.dataTable(options);
    });
} 
```

**JSFiddle：http:** [//jsfiddle.net/TrueBlueAussie/r5xf61zp/8/](http://jsfiddle.net/TrueBlueAussie/r5xf61zp/8/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T16:32:56.430

经过进一步研究，我没有找到与`<ul>`s 一起使用的 DataTables 的等价物。

因为网站是内部网站，而且 DataTables 非常强大，所以我选择了 DataTables。该页面呈现一个单列表，并且对样式进行了调整以隐藏表格的页眉和页脚。最后，它看起来和上面的线框一模一样。遗憾的是，标记必须被丑陋的`<table>`标签污染。

# c++ - Segmentation Fault - 向量字符串 - 多图实现

> ID：10400034
> 
> 赞同：0
> 
> 时间：2012-05-01T15:32:28.193
> 
> 标签：c++, segmentation-fault

我尝试在 C++ 中实现多映射，但是在尝试访问向量“值”时遇到了段错误，即使 values.size() 返回了正确的答案。

我知道段错误发生在第 22 行，但我不知道为什么。将不胜感激任何帮助。

```
#include <iostream>
#include <vector>
#include <string.h>
using namespace std;
template<class DT1,class DT2>
class Pair
{
public:
  Pair(DT1 key_in, DT2 value_in) 
  {
     key = key_in;
     values.push_back(value_in);
  }
  DT1 key;
  vector<DT2> values;
  int insert_value(DT2 item)
  {
     bool value_found = false;
     cout << "values size "<<values.size() << endl;

     cout << "test " << values[0] << endl;

     for (unsigned int i = 0; i < values.size(); i++)
     {
         cout <<"i " << i << endl;
         if (values[i] == item)     
            value_found = true;
     } 

  if (value_found == false)
  {
      cout<<"not found"<<endl;
      values.push_back(item);
  }

  return 0;
  }
};

template<class T1, class T2>
class MultiMap
{
public:
   MultiMap() {};
   vector<Pair<T1, T2> > pair_container;
   int insert(T1 key_in, T2 value_in)
   {
       bool key_found = false;
       unsigned int i;
       for (i = 0; i < pair_container.size(); i++)
       {
           if (pair_container[i].key == key_in)
       key_found = true;
       }   
       if (key_found == false)
           pair_container.push_back(Pair<T1,T2>(key_in, value_in));
       if (key_found == true)
       {
            pair_container[i].insert_value(value_in); // seg fault
       }
   return 0;
   }

   };

int main()
{
MultiMap<char, string> Map1;
Map1.insert('a', "anchor");
cout << Map1.pair_container[0].values[0] << endl;
Map1.insert('a', "application"); // seg fault
cout << "hello!"<<endl;
Map1.insert('b', "boolean");
return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-01T15:49:45.950

找到正确的向量后，您需要`break`退出循环。`for`

IE：

```
 unsigned int i;
   for (i = 0; i < pair_container.size(); i++)
   {
       if (pair_container[i].key == key_in)
       {
           key_found = true;
           break; // If you don't break out, i will always be one larger than size().
       }
   } 
```

如果您不爆发，那么`key_found`将是`true`但`i`将引用超过向量末尾的一个，因此您将遇到导致分段错误的内存损坏问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T15:59:07.083

当你写

```
 cout << "values size "<<values.size() << endl; 
```

您正在测试`values`包含某些内容。但是当你写

```
 cout << "test " << values[0] << endl; 
```

您假设它包含的内容是正确的。

中的第一个对象是`values`什么？看来这是段错误的原因。让我举个例子吧。如果您有一个指针或引用向量，并且我添加`0x11`了 ，那么第一个输出将是`1`. 但是`0x11`指向哪里呢？

# powershell - 使用 PowerShell 匹配存储在变量中的字符串

> ID：10400035
> 
> 赞同：4
> 
> 时间：2012-05-01T15:32:39.230
> 
> 标签：powershell, string-comparison

我正在尝试创建一个备份脚本，该脚本将移动 30 天以前的文件，但我希望能够从列表中排除文件夹

```
$a = "C:\\Temp\\Exclude\\test"
$b = "C:\\Temp\\Exclude" 
```

如果我运行以下命令：

```
$a -match $b 
```

遵循[PowerShell 基础知识：条件运算符 -Match -Like -Contains & -In -NotIn](http://www.computerperformance.co.uk/powershell/powershell_conditional_operators.htm#Example_1_-Match)：

```
$Guy ="Guy Thomas 1949"
$Guy -match "Th" 
```

这返回`true`。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-01T17:03:28.177

我会说使用通配符之类的运算符，它可以为您节省很多头痛：

```
$a -like "$b*" 
```

匹配运算符使用正则表达式模式，并且路径中包含正则表达式特殊字符（转义字符）。如果您仍想使用 -match - 确保转义字符串：

```
$a -match [regex]::escape($b) 
```

这将起作用，但请记住它可以在字符串的中间匹配，您可以添加 '^' 锚来告诉正则表达式引擎从字符串的开头匹配：

```
$a -match ("^"+[regex]::escape($b)) 
```

# python - 使用 wsgi（并且只有 wsgiref 模块）托管在 shell 中写入的每个字符串到 ip url 的程序

> ID：10400036
> 
> 赞同：1
> 
> 时间：2012-05-01T15:32:39.473
> 
> 标签：python, hosting, cgi, wsgi

我想用 wsgi 制作一个小程序，允许我在 shell 中输入字符串并将其输出到我的 ip url。

目前我有这个`wsgi_app.py`：

```
#!/usr/bin/env python
from wsgiref.simple_server import make_server

def application(environ, start_response):
    start_response('200 OK', [('Content-Type', 'text/plain')])
    return [cont]

while True:
    cont = raw_input(">>>")
    server = make_server('0.0.0.0', 8080, application)
    server.serve_forever() 
```

这`>>>`在我的 shell 中输出，然后我可以输入一个字符串。如果我去，`192.xxx.x.xx:8080`我可以看到我写的。问题是这只工作一次，我`raw_input()`想要循环，这样我就可以输入新的字符串，而不是刷新网页并查看新内容。我的猜测是这`serve_forever()`已经是一个无限循环，这确保我的 while 循环的主体永远不会结束。是否有另一种方法仅使用 wsgiref 模块`>>>`在每次输入后继续输出并将我的输入托管在我的网页上（换句话说，用 wsgiref 中的其他函数结束我的 while 循环体）？

额外的问题：是否可以让我的网页自动刷新，这样我就不必每次都在浏览器中手动刷新才能看到我写的新字符串？

* * *

**改进，版本 1.1**

使用`server.handle_request()`而不是`server.serve_forever()`，这个婴儿终于可以循环了。此版本打印出您在 shell 中键入的新输入。

```
#!/usr/bin/env python
from wsgiref.simple_server import make_server

def application(environ, start_response):
    start_response('200 OK', [('Content-Type', 'text/plain')])
    return [cont]

i = 1

while True:
    cont = raw_input(">>> ")
    if i == 1:
        server = make_server('0.0.0.0', 8080, application)
    server.handle_request()
    i += 1 
```

* * *

但是 1.1 版不显示之前输入的文本。所以现在在**1.2 版**中，我使用一个列表来存储以前输入的文本。*不幸的是，当我第二次输入文本时，此代码不显示文本。有谁知道为什么？*

```
#!/usr/bin/env python
from wsgiref.simple_server import make_server

def application(environ, start_response):
    start_response('200 OK', [('Content-Type', 'text/plain')])
    return [str(cont())]

def cont():
    for k in l:
        return k + '\n'

i = 1
l = []

while True:
    l.append(raw_input(">>> "))
    if i == 1:
        server = make_server('0.0.0.0', 8080, application)
    server.handle_request()
    i += 1 
```

# sql - 针对不同服务器的条件 SQL

> ID：10400046
> 
> 赞同：3
> 
> 时间：2012-05-01T15:33:32.400
> 
> 标签：sql, sql-server, sql-server-2008

如何让一条 SQL 有条件地更改目标服务器？

所以在我的本地开发机器上，我可以运行它并使用命令......

```
INSERT  INTO [sds].[dbo].[Team_Email_Addresses]
        SELECT  [class] AS 'Team number' ,
                [description] AS 'Team name' ,
                [DutyEmail] AS 'Team email address'
        FROM    [DEVSERVER].[cases].[dbo].[sp_class]
        WHERE   [status] = 1 
```

但在测试机器上，我希望运行相同的 SQL 并拥有命令......

```
INSERT  INTO [sds].[dbo].[Team_Email_Addresses]
        SELECT  [class] AS 'Team number' ,
                [description] AS 'Team name' ,
                [DutyEmail] AS 'Team email address'
        FROM    [TESTSERVER].[cases].[dbo].[sp_class]
        WHERE   [status] = 1 
```

我尝试使用变量`@TGT`并将其设置为SQL`devserver`或`testserver`SQL `FROM [@TGT].[cases].[dbo].[sp_class]`，但出现错误`Could not find server '@TGT' in sys.servers.`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-01T15:35:58.660

您将需要使用动态 SQL。此外，您不应该使用`'single quotes'`来分隔列别名；此语法已被弃用。您应该使用`[square brackets]`或`"double quotes"`（通常首选前者）。

```
DECLARE @sql NVARCHAR(MAX), @TGT SYSNAME;

SET @TGT = N'[TESTSERVER]';

SET @sql = N'INSERT  INTO [sds].[dbo].[Team_Email_Addresses]
        SELECT  [class] AS [Team number] ,
                [description] AS [Team name] ,
                [DutyEmail] AS [Team email address]
        FROM    ' + @TGT + '.[cases].[dbo].[sp_class]
        WHERE   [status] = 1;';

PRINT @sql;
EXEC sp_executesql @sql; 
```

（事实上​​，您在这里并不需要别名，尽管您应该指定插入列列表。）

或者，您可以做些什么来使代码更稳定，即在您的两个环境中使用同义词。在开发中：

```
CREATE SYNONYM dbo.sp_class FOR DEVSERVER.cases.dbo.sp_class; 
```

在测试中：

```
CREATE SYNONYM dbo.sp_class FOR TESTSERVER.cases.dbo.sp_class; 
```

现在您的查询可以简单地是：

```
INSERT  INTO [sds].[dbo].[Team_Email_Addresses]
        SELECT  [class],
                [description],
                [DutyEmail]
        FROM    [dbo].[sp_class]
        WHERE   [status] = 1; 
```

当然，同义词只有在您使用 SQL Server 2005 或更高版本时才有效。指定您使用的 SQL Server 版本总是很有用的！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-01T15:43:04.237

对于这种情况，我通常使用同义词。由于您从两个不同的地方运行它，您只需要在每个地方适当地定义您的同义词。

在您的本地开发机器上：

```
CREATE SYNONYM dbo.Cases_sp_class FOR [DEVSERVER].[cases].[dbo].[sp_class] 
```

在您的测试机器上：

```
CREATE SYNONYM dbo.Cases_sp_class FOR [TESTSERVER].[cases].[dbo].[sp_class] 
```

然后，您只需要在所有环境中将您的 SQL 更改为此：

```
INSERT  INTO [sds].[dbo].[Team_Email_Addresses]
        SELECT  [class] AS 'Team number' ,
                [description] AS 'Team name' ,
                [DutyEmail] AS 'Team email address'
        FROM    [dbo].[Cases_sp_class]
        WHERE   [status] = 1 
```

几点注意事项：

1.  TESTSERVER 和/或 DEVSERVER 需要定义为链接服务器
2.  如果 [sp_class] 真的是一个存储过程，您将需要以稍微不同的方式来完成所有这些工作。如果不是，您可能不应该为它使用“sp_”前缀，因为这是 MS 用于它自己的系统过程的前缀，它可能会变得非常混乱。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-01T15:44:53.383

正如 Aaron Bertrand 指出的那样，动态 SQL 是一种选择，在动态 SQL[的诅咒和祝福中对动态 sql 进行了很好的讨论](http://www.sommarskog.se/dynamic_sql.html)

除了动态 sql 选项之外，您还可以简单地将两者都包含在 if 语句中。

```
If <insert condition> then
INSERT  INTO [sds].[dbo].[Team_Email_Addresses]         SELECT  [class] AS 'Team number' ,                 [description] AS 'Team name' ,                 [DutyEmail] AS 'Team email address'         FROM    [DEVSERVER].[cases].[dbo].[sp_class]         WHERE   [status] = 1 
else
INSERT  INTO [sds].[dbo].[Team_Email_Addresses]         SELECT  [class] AS 'Team number' ,                 [description] AS 'Team name' ,                 [DutyEmail] AS 'Team email address'         FROM    [TESTSERVER].[cases].[dbo].[sp_class]         WHERE   [status] = 1 
```

最后，特别是如果问题条件基于运行的机器之类的东西，您可以使用同义词，但根据需要更改别名所指向的内容。这可能是最复杂的选项，但它的优点是使所讨论的存储过程更短更简单。

# javascript - 如何使用 Javascript 设置 ASP 复选框状态？

> ID：10400052
> 
> 赞同：0
> 
> 时间：2012-05-01T15:33:42.890
> 
> 标签：javascript, .net, vb.net, checkbox

在 VB.net 应用程序中，我有几个使用常规 ASP 控件创建的复选框，即`<asp:CheckBox ID="cb3" runat="server" Checked="true" />`

我正在尝试实现“全选/全选”功能，但遇到了一些问题。Javascript 不会更改 Internet Explorer (v9) 中复选框的状态。我尝试使用 IE 的开发工具进行调试，并且复选框肯定将它们的`checked`属性设置为`true`. （也尝试设置为“已检查”。）这是 JS：

```
function setCheckboxes( state )
{
    var inputs = document.getElementsByTagName("input");
    for ( var i in inputs )
    {
        if ( inputs[i].type == "checkbox" )
        {
            // this line is definitely executed on the checkboxes
            inputs[i].checked = state;
            // this doesn't work either
            //inputs[i].checked = (state ? "checked" : "");
        }
    }
}

document.getElementById("cbSelectAll").onclick = function() {
    setCheckboxes(true);
    return false;
}

document.getElementById("cbSelectNone").onclick = function() {
    setCheckboxes(false);
    return false;
} 
```

第二个可能相关的问题出现在 Firefox (v11) 中。上面的 JS 工作正常并取消选中复选框，但是在提交时它们被设置为初始状态。通过单击进行选择和取消选择可以正常工作。我该如何解决？

编辑：明确地说，这**特别是 .net 的问题，而不仅仅是基本的 HTML**。我尝试了一个带有复选框的基本页面，IE（取消）选择它们就好了。

更新2：包括更多信息，因为它可能是相关的。我只是检查了几件事，*单击*复选框似乎不会在 Internet Explorer 中更改它们的状态，但在提交时它们的状态已被存储。

我正在使用 Telerik Grid 视图并将数据绑定到它。这是aspx代码：

```
 <telerik:RadGrid ID="gridContacts" runat="server" Skin="Office2007" GridLines="None" AutoGenerateColumns="False">
        <MasterTableView>
            <RowIndicatorColumn>
                <HeaderStyle Width="20px" />
            </RowIndicatorColumn>
            <ExpandCollapseColumn>
                <HeaderStyle Width="20px" />
            </ExpandCollapseColumn>
            <Columns>
                <telerik:GridBoundColumn DataField="id" DataType="System.String" UniqueName="id" Visible="False">
                    </telerik:GridBoundColumn>
                <telerik:GridBoundColumn DataField="name" DataType="System.String" UniqueName="name" HeaderText="Name">
                    </telerik:GridBoundColumn>
                <telerik:GridBoundColumn DataField="email" DataType="System.String" UniqueName="email" Visible="False">
                    </telerik:GridBoundColumn>
                <telerik:GridBoundColumn DataField="sms" DataType="System.String" UniqueName="sms" Visible="False">
                    </telerik:GridBoundColumn>
                <telerik:GridTemplateColumn DataField="useemail" DataType="System.Boolean" UniqueName="useemail" HeaderText="Email"> 
                    <ItemTemplate> 
                        <asp:CheckBox ID="cbEmail" runat="server" Checked='<%# Eval("useemail") %>' /> 
                    </ItemTemplate> 
                </telerik:GridTemplateColumn> 
                <telerik:GridTemplateColumn DataField="usesms" DataType="System.Boolean" UniqueName="usesms" HeaderText="SMS"> 
                    <ItemTemplate> 
                        <asp:CheckBox ID="cbSMS" runat="server" Checked='<%# Eval("usesms") %>' /> 
                    </ItemTemplate> 
                </telerik:GridTemplateColumn>
            </Columns>
        </MasterTableView>
        <FilterMenu EnableTheming="True" Skin="Office2007">
            <CollapseAnimation Duration="200" Type="OutQuint" />
        </FilterMenu>
    </telerik:RadGrid> 
```

对于每个复选框，输出的 HTML 是这样的：

```
<input name="ctl00$ContentPlaceHolder1$gridContacts$ctl00$ctl04$cbEmail"
class="Office2007 input" id="ctl00_ContentPlaceHolder1_gridContacts_ctl00_ctl04_cbEmail"
type="checkbox" CHECKED="checked" /><label class="Office2007 radfdCheckboxChecked"
for="ctl00_ContentPlaceHolder1_gridContacts_ctl00_ctl04_cbEmail" unselectable="on">&nbsp;</label> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T19:40:25.200

不满，

我认为这可能会有所帮助：在您的 setCheckboxes 函数中。不知道为什么，但是复选框的行为似乎有所不同......好吧，其他一切。

```
function setCheckboxes( state )
{
    var inputs = document.getElementsByTagName("input");
    for ( var i in inputs )
    {
        if ( inputs[i].type == "checkbox" )
        {
            if (state == "true"){
                inputs[i].disabled=false;
                inputs[i].parentElement.disabled = false;
            } else {
                inputs[i].disabled=true;
                inputs[i].parentElement.disabled = true;
            }               
        }
    }
} 
```

希望有帮助！

-sf

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T15:58:30.710

尝试查看这个问题/答案：

[如何在 HTML 中实现“全选”复选框？](https://stackoverflow.com/questions/386281/how-to-implement-select-all-check-box-in-html)

他们实现的 for 循环的语法略有不同，您可能想尝试一下。还有一些我推荐的如何使用 jQuery 执行此操作的很好的示例。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-05-01T15:53:14.253

checked 属性的值应该是“checked”而不是 true/false。Firefox 可以处理真/假值，但 IE 似乎不喜欢它。

检查文档：[http ://www.w3schools.com/tags/att_input_checked.asp](http://www.w3schools.com/tags/att_input_checked.asp)

# android - 单击列表视图中的按钮时显示 AlertDialog

> ID：10400059
> 
> 赞同：0
> 
> 时间：2012-05-01T15:34:25.487
> 
> 标签：android

单击列表视图中的按钮时如何显示 AlertDialog。注意：列表视图是使用自定义适配器创建的。

listview 由 3 个 TextView 和一个 Button 组成。因此，当我单击列表视图内容中的按钮时，我需要知道如何显示警报对话框。

提前致谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T15:41:10.250

在您的`Adapter.getView`方法中，只需将 a 设置`View.OnClickListener`为`Button`具有匿名内部类型的 。例如：

```
myButton.setOnClickListener(new View.OnClickListener() {            
            @Override
            public void onClick(View v) {
                AlertDialog.Builder builder = new AlertDialog.Builder(getContext());
                builder.setMessage("This is just an example!");
                builder.create().show();
            }
}); 
```

# windows - 在 Windows 批处理文件脚本中使用 if 语句

> ID：10400063
> 
> 赞同：1
> 
> 时间：2012-05-01T15:34:53.170
> 
> 标签：windows, scripting, if-statement, batch-file

我对 Windows 脚本完全不熟悉——我可以粗略地阅读它并了解发生了什么，但在写作方面我基本上为零。这就是我想要做的。我有以下脚本

```
echo on

SET LOGNAME=%7
SET LOGNAME=%LOGNAME%.log

Set CURRDATE=%TEMP%\CURRDATE.TMP
Set CURRTIME=%TEMP%\CURRTIME.TMP

DATE /T > %CURRDATE%
TIME /T > %CURRTIME%

Set PARSEARG="eol=; tokens=1,2,3,4* delims=/, "
For /F %PARSEARG% %%i in (%CURRDATE%) Do SET YYYYMMDD=%%l%%k%%j%%i

Set PARSEARG="eol=; tokens=1,2,3,4* delims=:,. "
For /F %PARSEARG% %%i in (%CURRTIME%) Do Set HHMMSS=%%i%%j%%k%%l

sqlcmd -E -S %1 -d %2 -h-1 -b -w 1000 -Q "EXEC spTest %3,%4,%5 " -o %6Test_%YYYYMMDD%%HHMMSS%.DAT

IF ERRORLEVEL 1 GOTO FAILED

ECHO %YYYYMMDD% %HHMMSS% OK>>%LOGNAME%

GOTO END

:FAILED
ECHO %YYYYMMDD% %HHMMSS% FAILED>>%LOGNAME%

:END
EXIT /B %ERRORLEVEL% 
```

不幸的是，文件的 YYYYMMDD 部分有时会丢失（不知道为什么会发生这种情况 - 非常罕见 - 我只能认为这可能是奇怪的网络故障）。我想要做的是有一个 if 语句，以便如果 YYYYMMDD 为空，我将其设置为某个默认日期。我在我的代码中插入了以下行 - 但这对我没有任何作用。

```
if %YYYYMMDD% ==" " (set %YYYYMMDD% =20990101) 
```

请问有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T16:23:01.280

您的 IF 语句失败有两个原因 - 比较错误，您的 SET 语法错误。我相信你想要：

```
if "%YYYYMMDD%"=="" (set YYYYMMDD=20990101) 
```

但我不明白你为什么需要上述内容。我不知道你为什么会出现间歇性故障，但它应该是可以修复的。

我知道您现有的代码可以大大简化。无需使用临时文件来捕获 DATE 和 TIME 值。动态变量`%DATE%`并`%TIME%`提供您需要的值。键入`HELP SET`可用动态变量的列表。并且`FOR /F`可以使用语法解析字符串`IN("string")`。键入`HELP FOR`命令的完整描述。

您的代码可以更改为如下所示：

```
for /F %PARSEARG% %%i in ("%DATE%") do set YYYYMMDD=%%l%%k%%j%%i 
```

和

```
for /F %PARSEARG% %%i in ("%TIME%") do set HHMMSS=%%i%%j%%k%%l 
```

您现有的 PARSEARG 定义对我来说看起来不正确，我认为作业可能也必须更改。由于我不知道您的语言环境设置或所需的输出格式，因此我无法确切告诉您如何更改它。

如果您无法弄清楚，请发布您使用`%DATE%`and获得`%TIME%`的格式以及您想要的格式，我（或其他人）可以进一步提供帮助。

# jquery - 如何在我的 Web 客户端上复制此 cookie 功能？

> ID：10400064
> 
> 赞同：2
> 
> 时间：2012-05-01T15:34:56.190
> 
> 标签：jquery, post, cookies, cross-domain

根据我的阅读，跨域发送 cookie 是不可能的（据我了解，浏览器出于隐私原因阻止了它们）。但是，我希望有人可以告诉我有关解决方法的问题。

我已经在我们的 .Net winForms 客户端中实现了这一点，但是我无法让它在我们的网络软件上运行。

场景：我有我的网站，这需要调用第 3 方系统，该系统使用带有 XML 的 rest 实现，该实现存在于客户防火墙内，并且无法从其办公室外部访问（VPN 也不是一个选项）。

我设置了我的 cookie：

```
$.cookie('name', 'value', {path : '/', domain : '192.168.254.164'}); 
```

并提出发帖请求

```
$.post(call, function(d) {}, 'text')
.success(function(d) {... /*do something*/ 
```

但是，未发送 cookie（请参阅下面的请求和响应标头）

> ```
> Request Headers
> Accept    text/plain, */*; q=0.01
> Accept-Encoding   gzip, deflate
> Accept-Language   en-gb,en;q=0.5
> Connection    keep-alive
> Host  192.168.254.164:8080
> Origin    http://localhost:27249
> Referer   http://localhost:27249/index.html
> User-Agent    Mozilla/5.0 (Windows NT 6.1; WOW64; rv:11.0) Gecko/20100101 Firefox/11.0
> 
> Response Headers
> Access-Control-Allow-Orig...  http://localhost:27249
> Cache-Control no-cache
> Content-Type  application/xml;charset=UTF-8
> Date  Tue, 01 May 2012 15:14:58 GMT
> Server    Sun Java System Application Server 9.1_01
> Set-Cookie    JSESSIONID=8f7fbcd40348c0b5d912830bca8a; Path=/App
> Transfer-Encoding chunked
> X-Powered-By  Servlet/2.5 
> ```

我收到的响应告诉我我未经授权（这是因为未设置 cookie）。

我不能修改第三方服务器上的任何东西，所以在代理服务器上，我不能使用 JSONP，因为一切都在 XML 中。

为了调试，我尝试在发送之前读取 cookie，但结果为“null”：

```
alert($.cookie(_svcMnuCookieSessionIdKey)); 
```

我是网络开发的新手，所以这可能是一个奇怪的问题——但正如你从响应头中看到的那样，我相信我收到了一个 cookie（我登录时收到了相同的 cookie）——因为浏览器处理 cookie ，它不应该保存它并自动将其应用于我的请求吗？而不是我必须像上面那样手动添加它？尽管如此，JSESSIONID 看起来在两个请求中都有不同的值，并且规范说我必须使用我登录时获得的原始 JSESSIONID 作为我的 cookie 的值。

在我的 .Net 应用程序中，我这样做类似于：

```
 Dim httpWebRequest As Net.HttpWebRequest = CType(Net.WebRequest.Create("http://192.168.254.164:8080/App/RestfulService"), Net.HttpWebRequest)

 httpWebRequest.UserAgent = My.Application.Info.AssemblyName
 httpWebRequest.KeepAlive = True 'set the connection keep-alive (this is the default)
 httpWebRequest.Headers.Set(Net.HttpRequestHeader.Pragma, "no-cache") 'we don't want caching to take place so we need to set the pragma header to say we don't want caching
 httpWebRequest.Method = "POST"

 If Not String.IsNullOrEmpty(_sessionId) Then 'it isn't used on some request, so don't add it if it is nothing
     Dim cookie As New System.Net.Cookie("JSESSIONID", _sessionId)
     cookie.Domain = New Uri("http://192.168.254.164:8080/App/RestfulService").Host
     httpWebRequest.CookieContainer = New Net.CookieContainer
     httpWebRequest.CookieContainer.Add(cookie)
 End If

 httpWebRequest.ContentType = "application/x-www-form-urlencoded"

 Dim postData As Byte() = New System.Text.UTF8Encoding(False).GetBytes(RichTextBox1.Text)

 httpWebRequest.ContentLength = postData.Length

 Using tmpStream As IO.Stream = httpWebRequest.GetRequestStream
     tmpStream.Write(postData, 0, postData.Length)
 End Using

 Dim httpWebResponse As Net.HttpWebResponse = CType(httpWebRequest.GetResponse, Net.HttpWebResponse)

 If WebValidation.WebResponseHasContent(httpWebResponse) Then

     Dim str As String = String.Empty
     'Read the raw HTML from the request
     Using sr As New IO.StreamReader(httpWebResponse.GetResponseStream, System.Text.Encoding.UTF8)
         str = sr.ReadToEnd
     End Using

 End If

Return str 
```

那么，这是一个跨域 cookie 请求吗？以及如何在我的 Web 客户端中重新创建此功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T16:10:01.167

**我不认为您正在尝试设置跨域 cookie**。系统不会要求您这样做。通常在这种情况下，您需要与第 3 方系统进行一些握手以获取令牌，或者在您的情况下首先获取 JSESSIONID（来自系统）。但是，从外观上看，您试图在 3rd 方系统上设置 cookie，而不是从系统接受 cookie。那有意义吗？所以我期望的是，您需要向第 3 方系统发出请求以获取令牌，然后在您尝试获取 xml 时为每个后续请求传递该令牌。

我认为在你的场景中你有你的网络应用程序和第 3 方应用程序。您可能会感到困惑的是在您的浏览器上设置的 cookie 与在您的网络应用程序上“设置”的 cookie（用于身份验证）。

当您通过第 3 方系统进行身份验证并返回 JSESSIONID 后，请尝试将后续请求标头设置为包含“cookie”标头，其中包含 JSESSIONID 或第 3 方系统进行身份验证所需的任何内容。

请记住，在这种情况下，当您从您的网络应用程序调用第 3 方作为服务时，您的网络应用程序就是调用第 3 方的“浏览器”。因此，当它对第 3 方系统进行后续调用时，它必须通过假装存在 cookie（包含您的身份验证 sessionid）来模仿浏览器 - 您可以通过设置“cookie”请求标头来做到这一点。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-05-01T15:50:20.583

你不能。浏览器制造商花费了大量时间和精力来确保您尝试完成的事情不会发生，即使您确实找到了临时解决方案，它也会被视为安全漏洞并可能在下一个版本中修补。

相反，尝试弄清楚如何将所需的信息传递到 Web 服务中。

# php - 如何从包含的名称冲突的 PHP 内容中检索值？

> ID：10400067
> 
> 赞同：-2
> 
> 时间：2012-05-01T15:34:59.170
> 
> 标签：php, namespaces, include, constants

我发现了几个类似的问题，但我的细微差别略有不同——即，我无法编辑包含的文件。

我有一个目录，里面有几十个同一个 php 应用程序的克隆。我需要读取每个配置文件，这是一个将数据库设置定义为常量的 php 文件，然后连接到该实例的数据库。显然，由于所有配置文件都是针对同一个应用程序的，遍历目录并包含所有配置文件会给我 100 条“已定义常量 DB_HOST”的通知。

如果我可以为每个配置文件添加一个 php 命名空间，这将很容易，但我不能修改配置文件，只能读取它们。由于不可能在读取目录内容的循环中构建命名空间，所以我被卡住了。

除了使用 fopen/file_get_contents 读取文件并重新解析内容之外，是否有一些巧妙的方法可以遍历这些配置文件以包含它们的常量值？我觉得我必须忽略一些东西。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T15:40:14.500

这显然是一个了不起的设计问题，应该通过改变设计来解决，而不是通过愚蠢的技巧来解决不断出现的问题，让整个混乱局面完好无损。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T15:42:02.103

你没有忽略任何东西。从[手册](http://de2.php.net/manual/en/language.constants.syntax.php)：

> 一旦定义了常量，就永远无法更改或取消定义。

顺便说一句，我希望你能获得一个用于重构该烂摊子的项目获得批准。:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T16:31:33.973

除了在每个文件上使用包含之外，您不能简单地将每个文件作为文本文件打开并使用 将每个文件的内容读入字符串`fread()`吗？

然后，您可以使用正则表达式解析出您想要的字段，并且由于您没有将配置文件包含为 PHP，因此您将回避持续存在的问题。

# python - Python中的动态类实例命名

> ID：10400069
> 
> 赞同：0
> 
> 时间：2012-05-01T15:35:15.900
> 
> 标签：python, python-2.6

我正在尝试编写一个程序来确定两个词是否是同源词。我写了两个类：featTup（基本上是一个包含字母值的元组的包装器）和featWord（基本上是一个featTup对象的包装器。）

（对不起，这一切都这么长！）

这是一些（希望是相关的）代码：

```
class featTup(object):
    def __init__(self,char):
        self.char = char
        self.phone_vals = None
        self.dia_vals = None
        if self.char in phone_codes:
            self.phone_vals = phone_feats[phone_codes.index(char)]
        elif self.char in dia_codes:
            self.dia_vals = dia_feats[dia_codes.index(char)]   
        ...

class featWord(list):
    def do_dia(self,char_feats,dia_feats):
        #This method handles the changes diacritics make to preceding phones
        for val in dia_feats:
            if dia_val:
                char_feats.change_val(tup,char_feats.index(dia_val),dia_val)

    def get_featWord(self):
        return self.word_as_feats

    def __init__(self,word):
        self.word = word
        self.word_as_feats = [featTup(char) for char in self.word]
        for char in self.word_as_feats:
            if char.is_dia():
                i = self.word_as_feats.char_index(char)
                self.word_as_feats.do_dia(self.word_as_feats[i-1],self.word_as_feats[i])

    def word_len(self):
        return len(self.get_featWord())

    def char_index(self,char):
        return self.word_as_feats.index(char) 
```

问题是我想获取一个单词列表并为所有单词制作 featWord 对象。我不知道每个列表会有多长，也不知道每个单词有多少个字符。更多代码：

```
def get_words(text1,text2):
    import codecs
    textin1 = codecs.open(text1,encoding='utf8')
    word_list1 = textin1.readlines()
    textin1.close()
    textin2 = codecs.open(text2,encoding='utf8')
    word_list2 = textin2.readlines()
    textin2.close()
    print word_list1,word_list2
    fixed_words1 = []
    fixed_words2 = []
    for word in word_list1:
        fixed_word = word.replace('\n','')
        fixed_words1.append(fixed_word)
    for word in word_list2:
        fixed_word = word.replace('\n','')
        fixed_words2.append(fixed_word)
    print fixed_words1,fixed_words2
    words1 = [(featWord(word)) for word in fixed_words1]
    words2 = [(featWord(word)) for word in fixed_words2]
    # for word1 in fixed_words1:
        # for x in xrange(len(fixed_words1)):
        words1.append(featWord(word))
    for word2 in fixed_words2:
        #for x in xrange(len(fixed_words2)):
        words2.append(featWord(word))
    print words1
    #words1 = [featWord(word) for word in fixed_words1]
    #words2 = [featWord(word) for word in fixed_words2]
    return words1,words2

def get_cog_dict(text1,text2,threshold=10,print_results=True):
    #This is the final method, running are_cog over all words in
    #both lists.
    word_list1,word_list2 = get_words(text1,text2)
    print word_list1, word_list2 
```

就目前而言，当我调用这最后两种方法中的任何一种时，我都会得到空列表的列表；当我从字符串实例化新的 featWord 对象时，我只是给它（例如 x = featWord("ten") 或其他）它工作正常。一个相关的事情是，featWord 似乎返回一个空列表，而不是（当我从 IDLE 实例化 featWord 时，如上所述，它作为一个 featTup 实例列表返回，这很好）。我不确定为什么/如果这是问题。

在我看来，（至少部分）我的问题源于不正确地初始化featWord。我正在构建它们，或者其他什么，但没有给它们命名。我已经尝试了我能想到的所有东西（正如注释掉的部分所证明的那样），我很困惑。这里有关于使用字典来命名类实例等的答案，但由于我无法预先定义字典（每个单词和单词表的长度可能不同），我不确定该怎么做。

任何帮助将不胜感激。我有点把自己逼疯了。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T16:11:50.757

您的`featWord`类派生自`list`，但您从不向 追加任何内容`self`，并且您已覆盖`__init__`，因此`__init__`也永远不会调用列表。

所以一个`featWord`实例只是一个带有一些属性和方法的空列表。

他们`__repr__`是`list`'s `__repr__`，这就是为什么featwords 列表显示为空列表列表的原因。

所以：实现一个有意义的`__repr__`，不要从子类`list`化，附加一些有意义的东西到`self`. 任何一个都可以解决你的问题。

# javascript - 将 ASP.Net 控件传递给 JavaScript 函数

> ID：10400070
> 
> 赞同：0
> 
> 时间：2012-05-01T15:35:18.113
> 
> 标签：javascript, asp.net, controls

我编写了一个 javascript 函数，我想将它包含在一个文本框、下拉列表和一个整数中。在函数中，我需要检查文本字符串的长度和 DDL 的值。功能如下：

```
function CheckSearch(name, code, iMinSize) {
if (name.value.length < iMinSize && code.value === '') {
    alert('You must enter ' + iMinSize + ' letters or more when searching.');
    name.focus();
    return false;
}
else {
    return true;
} 
```

}

我认为该功能还可以，但我似乎无法从 ASP.NET 中的 Button 控件调用它。

这是我的按钮标签：

```
<asp:Button ID="buttonSearch" runat="server" Text="Search" OnClick="buttonSearch_Click"
                OnClientClick="javascript:return CheckSearch('textBoxSearch','comboCodes', 3);" /> 
```

当我单击按钮时，我收到一个 Object Expected 错误。

以下行的代码中断：

```
<input type="submit" name="ctl00$contentBody$buttonSearch" value="Search" onclick="return CheckSearch(document.getElementById(&#39;textBoxSearch&#39;),document.getElementById(&#39;comboCodes&#39;), 3);" id="contentBody_buttonSearch" /> 
```

错误消息是：Microsoft JScript 运行时错误：预期对象

请帮忙。

我正在使用 ASP.NET4.0

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T15:43:22.370

在您的页面底部，我会添加对您的各种客户 ID 的引用。例如：

```
<script type="text/javascript">
  var buttonSearch  = document.getElementById('<%= buttonSearch.ClientID %>');
  var textBoxSearch = document.getElementById('<%= textBoxSearch.ClientID %>');
  var comboCodes    = document.getElementById('<%= comboCodes.ClientID %>');
</script> 
```

然后，您可以在客户端单击中引用这些 DOM 对象：

```
<asp:Button ID="buttonSearch" runat="server" Text="Search" OnClick="buttonSearch_Click"
                OnClientClick="return CheckSearch(textBoxSearch, comboCodes, 3);" /> 
```

现在您的处理程序不必更改，因为您传入了正确的 DOM 对象：

```
if (name.value.length < iMinSize && code.value === '') {
    alert('You must enter ' + iMinSize + ' letters or more when searching.');
    name.focus();
    return false;
} 
```

另一种方法是`ClientIDMode`在每个控件上设置为静态：

```
<asp:TextBox ID="textBoxSearch" runat="server" ClientIDMode="Static" /> 
```

现在，您可以使用以下命令访问此文本框的值：

```
document.getElementById('textBoxSearch').value; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T15:41:35.833

您可能希望将`CheckSearch`函数更改为如下所示：

```
function CheckSearch(name, code, iMinSize) {
    var textBox, comboBox; // use these variables
    textBox = document.getElementById(name);
    comboBox = document.getElementById(code);
    if (textBox.value.length < iMinSize && comboBox.value === '') {
        alert('You must enter ' + iMinSize + ' letters or more when searching.');
        textBox.focus();
       return false;
    }
    else {
        return true;
    }
} 
```

您当前仅在标记上传递一个字符串，并且您的函数需要一个对象。

**编辑**：或者，您可以保留该功能并更改您的标记，如下所示：

**编辑2**：更改了字符串`document.getElementById`

```
<asp:Button ID="buttonSearch" runat="server" Text="Search" OnClick="buttonSearch_Click"
                OnClientClick="return CheckSearch(document.getElementById('<%= textBoxSearch.ClientID %>'),document.getElementById('<%= comboCodes.ClientID %>'), 3);" /> 
```

这样，您将传递对组合和文本框的引用，而不仅仅是 id 字符串。

**希望*最后一次*编辑**：

我没有仔细研究它，但是当我运行该代码时，我注意到就像你的一样，有些字符没有被转义，所以它呈现如下：

```
document.getElementById(&#39;textBoxSearch&#39;) 
```

（这个可以处理，但是我现在没有时间去做）

因此该函数将接收`null`对象，因为它无法通过该参数找到它，所以我最终这样做了：

```
<body>
    <form id="form1" runat="server">
        <div>
            <asp:TextBox ID="textBoxSearch" runat="server" />
            <asp:DropDownList ID="comboCodes" runat="server" >
            <asp:ListItem Text=""></asp:ListItem>
            <asp:ListItem Value="1" Text="One"></asp:ListItem>
            <asp:ListItem Value="2" Text="Two"></asp:ListItem>
            <asp:ListItem Value="3" Text="Drei"></asp:ListItem>
            <asp:ListItem Value="4" Text="Four"></asp:ListItem>
            </asp:DropDownList>

            <asp:Button ID="buttonSearch" runat="server" Text="Search" OnClick="buttonSearch_Click"
                OnClientClick="return CheckSearch(3);" />
        </div>
    </form>
    <script type="text/javascript">

        function CheckSearch(iMinSize) {
            var textBox, comboBox; 
            textBox = document.getElementById('<%= textBoxSearch.ClientID %>');
            comboBox = document.getElementById('<%= comboCodes.ClientID %>');
            if (textBox.value.length < iMinSize && comboBox.value === '') {
                alert('You must enter ' + iMinSize + ' letters or more when searching.');
                textBox.focus();
                return false;
            }
            else {
                return true;
            }
        }
    </script>
</body> 
```

**请注意**，这并不理想，因为您的函数不够通用，无法处理其他控件，因为我在函数本身中获取了控件的引用。话虽如此，我建议您按照 Mike Christensen 示例 (+1) 的方式做一些事情，因为您在调用时会引用控件并且不会遇到字符转义问题，但我还没有测试过他的代码寿。

希望这可以帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T15:42:27.220

问题是您发送的是硬编码文本：`'textBoxSearch','comboCodes'`. 您应该发送 ClientId：

```
OnClientClick="javascript:return CheckSearch('<%= textBoxSearch.ClientId %>','<%= comboCodes.ClientId %>', 3);" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-01T15:38:10.853

此错误的原因是您没有传递对象，而是传递了对象的 ID。解决方案可能是。

```
OnClientClick="return CheckSearch('<%= textBoxSearch %>','<%= comboCodes %>', 3); 
```

用您的 OnClientClick 替换它并检查它是否有效。

# c++ - Arch Linux 中没有 OpenGL 3 头文件

> ID：10400072
> 
> 赞同：5
> 
> 时间：2012-05-01T15:35:27.560
> 
> 标签：c++, opengl-3, archlinux

我正在尝试使用 FreeGLUT 编译一个非常简单的“Hello world”OpenGL 3.3 程序。在我找到的所有教程中，它们都包含一个标题“gl3.h”。问题是，我没有这样的头文件。

```
$ ls -l /usr/include/GL/
total 2164
-rw-r--r-- 1 root root   8797 20 janv. 17:44 freeglut_ext.h
-rw-r--r-- 1 root root    681 20 janv. 17:44 freeglut.h
-rw-r--r-- 1 root root  26181 20 janv. 17:44 freeglut_std.h
-rw-r--r-- 1 root root 837247 27 janv. 12:55 glew.h
-rw-r--r-- 1 root root 656589 21 mars  18:07 glext.h
-rw-r--r-- 1 root root  84468 21 mars  18:07 gl.h
-rw-r--r-- 1 root root 128943 21 mars  18:07 gl_mangle.h
-rw-r--r-- 1 root root  17255 21 mars  18:07 glu.h
-rw-r--r-- 1 root root   3315 21 mars  18:07 glu_mangle.h
-rw-r--r-- 1 root root    639 20 janv. 17:44 glut.h
-rw-r--r-- 1 root root  62741 27 janv. 12:55 glxew.h
-rw-r--r-- 1 root root  43887 21 mars  18:07 glxext.h
-rw-r--r-- 1 root root  17170 21 mars  18:07 glx.h
-rw-r--r-- 1 root root   4706  3 févr. 13:33 glxint.h
-rw-r--r-- 1 root root   3463 21 mars  18:07 glx_mangle.h
-rw-r--r-- 1 root root   2086  3 févr. 13:33 glxmd.h
-rw-r--r-- 1 root root  80979  3 févr. 13:33 glxproto.h
-rw-r--r-- 1 root root  11246  3 févr. 13:33 glxtokens.h
drwxr-xr-x 2 root root   4096 14 avril 14:03 internal
-rw-r--r-- 1 root root   8497 21 mars  18:07 osmesa.h
-rw-r--r-- 1 root root  51274 21 mars  18:07 vms_x_fix.h
-rw-r--r-- 1 root root  59403 27 janv. 12:55 wglew.h
-rw-r--r-- 1 root root  41377 21 mars  18:07 wglext.h
-rw-r--r-- 1 root root   4468 21 mars  18:07 wmesa.h 
```

在`/usr/include/`我只有`GL`,`GLES`和`GLES2`. `GL3`我在一些教程中发现没有。

我正在使用 NVIDIA 显卡（`nvidia`闭源驱动程序）在 Arch Linux x86_64 上运行。

以下是我在程序中包含 OpenGL 和 FreeGLUT API 的方式：

```
#define GL3_PROTOTYPES 1
#include <GL/gl.h>
#include <GL/freeglut.h> 
```

但代码无法编译：

```
$ g++ -pipe -g -Wall -Wextra -pedantic -I. -IHeaders -c Sources/Main.cpp -o Temp/Objects/Main.o 
Sources/Main.cpp: In function ‘int main(int, char**)’:
Sources/Main.cpp:107:59: error: ‘glVertexAttribPointer’ was not declared in this scope
Sources/Main.cpp:108:30: error: ‘glEnableVertexAttribArray’ was not declared in this scope
Sources/Main.cpp:114:35: error: ‘glUseProgram’ was not declared in this scope
Sources/Main.cpp:138:31: error: ‘glDisableVertexAttribArray’ was not declared in this scope 
```

看来我包括了 OpenGL 2 标头！但是，同样，我在我的系统上没有找到任何 OpenGL 3 头文件，我查看了 Arch 存储库和 AUR，但没有成功。

感谢您的帮助！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-07T12:39:06.050

您不需要 GL3.h，GL3.h 只是摆脱了所有已弃用的功能。所以只需包含`gl.h`而不是`gl3.h`. 下载并手动复制到`/usr/include/GL/`不是一个真正的解决方案，它可以工作，但是如果添加到`mesa`包中会发生什么`gl3.h`？你是包管理器会发现冲突。最好将其添加`gl3.h`到您的项目或主目录中并将其添加到 $PATH 或使用 -I 标志。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T15:44:18.453

如果你`grep`对于 glVertexAttribPointer、glEnableVertexAttribArray、glUseProgram 和 glDisableVertexAttribArray，你会发现它们都包含在`glext.h`和中`glew.h`。尝试包含这些头文件之一并再次编译。

# x86-16 - 将 AX 寄存器与零进行比较

> ID：10400076
> 
> 赞同：1
> 
> 时间：2012-05-01T15:35:46.780
> 
> 标签：x86-16, assembly

我有一个汇编程序要写。我需要检查 AX 寄存器，如果 AX 寄存器大于 0，则在 BX 中移动 +1，如果 AX 寄存器的值小于 0，则在 BX 中移动 -1，否则如果 AX = 0，则在 BX 中移动 0。我有以下代码可以做到这一点，但我正在寻找替代解决方案。请帮忙。谢谢

```
CMP AX, 0
JG GREATER
JL LESS
MOV BX, 0
GREATER:
MOV BX, 1
LESS:
MOV BX, -1 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T15:37:55.797

您提供的代码始终返回 -1。尝试这个：

```
CMP AX, 0
JG GREATER
JL LESS
MOV BX, 0
JMP END
GREATER:
MOV BX, 1
JMP END
LESS:
MOV BX, -1
END: 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T16:04:26.440

试试这个，它只需要一个条件分支并且没有无条件跳转：

```
 mov     bx, ax      // copy ax to bx
    sarw    bx, 15      // arithmetic shift - any -ve => -1, 0 or +ve => 0
    cmp     ax, 0       // compare original number to zero
    jle     end         // if it's <=, we're done
    mov     bx, 1       // else bx = 1
end: 
```

**注意**- 我的 x86 代码*非常*生锈。此外，该版本`sar`不在 8086 中，而是在 286 及更高版本中，并且直到 80386 才变得特别快。

**编辑**我想我找到了一个更好的 386+ 版本，没有任何分支：

```
 mov     bx, ax     // copy ax to bx      
    sarw    bx, 15     // arithmetic shift - any -ve => -1, 0 or +ve => 0
    cmp     ax, 0      // compare original to zero
    setg    bl         // if it was greater, bl = 1 (bh already == 0 from above) 
```

# iphone - OpenCV iOS - 模拟器和 iPhone 上的结果不同

> ID：10400081
> 
> 赞同：1
> 
> 时间：2012-05-01T15:36:21.537
> 
> 标签：iphone, ios, opencv, simulator, perspective

我在真实 iPhone 上使用 OpenCV 库裁剪图像时遇到问题。

我有一个带有选定区域的图像，我想在这个区域的图像上应用透视变换。这在模拟器上运行良好，但在 iphone 上，新图像未映射到矩形，并且新图像也具有蓝色。

这是我的代码：

```
+ (IplImage *)CreateIplImageFromUIImage:(UIImage *)image {
    // Getting CGImage from UIImage
    CGImageRef imageRef = image.CGImage;

    CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();
    // Creating temporal IplImage for drawing
    IplImage *iplimage = cvCreateImage(
                                       cvSize(image.size.width,image.size.height), IPL_DEPTH_8U, 4
                                       );
    // Creating CGContext for temporal IplImage
    CGContextRef contextRef = CGBitmapContextCreate(
                                                    iplimage->imageData, iplimage->width, iplimage->height,
                                                    iplimage->depth, iplimage->widthStep,
                                                    colorSpace, kCGImageAlphaPremultipliedLast|kCGBitmapByteOrderDefault
                                                    );
    // Drawing CGImage to CGContext
    CGContextDrawImage(
                       contextRef,
                       CGRectMake(0, 0, image.size.width, image.size.height),
                       imageRef
                       );
    CGContextRelease(contextRef);
    CGColorSpaceRelease(colorSpace);

    // Creating result IplImage
    IplImage *ret = cvCreateImage(cvGetSize(iplimage), IPL_DEPTH_8U, 3);
    cvCvtColor(iplimage, ret, CV_RGBA2BGR);
    cvReleaseImage(&iplimage);

    return ret;
}

+ (UIImage *)UIImageFromIplImage:(IplImage *)img {
    CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();

    // Creating result IplImage
    IplImage *image = cvCreateImage(cvGetSize(img), IPL_DEPTH_8U, 4);
    cvCvtColor(img, image, CV_BGR2RGBA);

    // Allocating the buffer for CGImage
    NSData *data =
    [NSData dataWithBytes:image->imageData length:image->imageSize];
    CGDataProviderRef provider =
    CGDataProviderCreateWithCFData((CFDataRef)data);
    // Creating CGImage from chunk of IplImage
    CGImageRef imageRef = CGImageCreate(
                                        image->width, image->height,
                                        image->depth, image->depth * image->nChannels, image->widthStep,
                                        colorSpace, kCGImageAlphaNone|kCGBitmapByteOrderDefault,
                                        provider, NULL, false, kCGRenderingIntentDefault
                                        );

    // Getting UIImage from CGImage
    UIImage *ret = [UIImage imageWithCGImage:imageRef];
    CGImageRelease(imageRef);
    CGDataProviderRelease(provider);
    CGColorSpaceRelease(colorSpace);

    return ret;
}

+ (UIImage *)perspectiveTransform: (UIImage*) originalImage :(CGFloat) h :(CGFloat) w :(CGPoint) point1 :(CGPoint) point2 :(CGPoint) point3 :(CGPoint) point4
{

    CvPoint2D32f srcQuad[4];

    srcQuad[0].x = point1.x;
    srcQuad[0].y = point1.y;
    srcQuad[1].x = point2.x;
    srcQuad[1].y = point2.y;
    srcQuad[2].x = point3.x;
    srcQuad[2].y = point3.y;
    srcQuad[3].x = point4.x;
    srcQuad[3].y = point4.y;

    IplImage *src = [self CreateIplImageFromUIImage:originalImage];

    IplImage *dst = cvCreateImage(cvGetSize(src),
                                  src->depth,
                                  src->nChannels);

    cvZero(dst);

    CGFloat width = src->width;
    CGFloat height = src->height;

    CvMat* mmat = cvCreateMat(3, 3, CV_32FC1);

    CvPoint2D32f *c1 = (CvPoint2D32f *)malloc(4 * sizeof(CvPoint2D32f));
    CvPoint2D32f *c2 = (CvPoint2D32f *)malloc(4 * sizeof(CvPoint2D32f));

    c1[0].x = round((width/w)*srcQuad[0].x);   c1[0].y = round((height/h)*srcQuad[0].y);
    c1[1].x = round((width/w)*srcQuad[1].x);   c1[1].y = round((height/h)*srcQuad[1].y);
    c1[2].x = round((width/w)*srcQuad[2].x);   c1[2].y = round((height/h)*srcQuad[2].y);
    c1[3].x = round((width/w)*srcQuad[3].x);   c1[3].y = round((height/h)*srcQuad[3].y);

    c2[0].x = 0;            c2[0].y = 0;
    c2[1].x = width - 1;    c2[1].y = 0;
    c2[2].x = 0;            c2[2].y = height - 1;
    c2[3].x = width - 1;    c2[3].y = height - 1;

    mmat = cvGetPerspectiveTransform(c1, c2, mmat);
    free(c1);
    free(c2);

    cvWarpPerspective(src, dst, mmat, CV_INTER_LINEAR+CV_WARP_FILL_OUTLIERS, cvScalarAll(0));

    cvReleaseImage(&src);
    cvReleaseMat(&mmat);

    UIImage *newImage = [self UIImageFromIplImage:dst];
    cvReleaseImage(&dst);

    return newImage;
} 
```

谢谢你的帮助 ！

# html - 使用自定义滚动条来包含文本？

> ID：10400085
> 
> 赞同：1
> 
> 时间：2012-05-01T15:36:34.487
> 
> 标签：html, css

我编辑了一些很酷的滚动条。我需要文本在中间，所以它就像一个框架......就像你在接受某人的服务条款和东西时看到的那样。我试图添加文本，但我似乎无法让它工作？[http://jsfiddle.net/Hunter4854/RHMCm/](http://jsfiddle.net/Hunter4854/RHMCm/)如果您有任何问题，请不要投反对票，只需添加评论，我会回答 :)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T16:03:01.813

```
<head>
<meta content="en-us" http-equiv="Content-Language">
<style>body {
    top: 0;
    left: 0;
    bottom: 0;
    right: 0;
    background: green;
}

.a::-webkit-scrollbar {
    width: 15px;
    height: 15px;
}

.a::-webkit-scrollbar:vertical {
    background: -webkit-linear-gradient(left, #525252 0%,#202020 50%,#020202 50%,#101010 100%); /* Chrome10+,Safari5.1+ */
    background: linear-gradient(left, #525252 0%,#202020 50%,#020202 50%,#101010 100%); /* W3C */
}

.a::-webkit-scrollbar:horizontal {
    background: -webkit-linear-gradient(top, #525252 0%,#202020 50%,#020202 50%,#101010 100%); /* Chrome10+,Safari5.1+ */
    background: linear-gradient(top, #525252 0%,#202020 50%,#020202 50%,#101010 100%); /* W3C */
}

.a::-webkit-scrollbar-track:vertical {
    background: -webkit-linear-gradient(left, #1d1d1d 0%,#1b1b1b 50%,#171717 50%,#1d1d1d 100%); /* Chrome10+,Safari5.1+ */
    background: linear-gradient(left, #1d1d1d 0%,#1b1b1b 50%,#171717 50%,#1d1d1d 100%); /* W3C */
    border-radius: 15px;
}

.a::-webkit-scrollbar-track:horizontal {
    background: -webkit-linear-gradient(top, #1d1d1d 0%,#1b1b1b 50%,#171717 50%,#1d1d1d 100%); /* Chrome10+,Safari5.1+ */
    background: linear-gradient(top, #1d1d1d 0%,#1b1b1b 50%,#171717 50%,#1d1d1d 100%); /* W3C */
    border-radius: 15px;
}

.a::-webkit-scrollbar-thumb {
    border-radius: 15px;
    border: 1px solid black;
}

.a::-webkit-scrollbar-thumb:vertical {
    background: -webkit-linear-gradient(left, #878787 0%,#474747 50%,#282828 50%,#4a4a4a 100%); /* Chrome10+,Safari5.1+ */
    background: linear-gradient(left, #878787 0%,#474747 50%,#282828 50%,#4a4a4a 100%); /* W3C */
}

.a::-webkit-scrollbar-thumb:horizontal {
    background: -webkit-linear-gradient(top, #878787 0%,#474747 50%,#282828 50%,#4a4a4a 100%); /* Chrome10+,Safari5.1+ */
    background: linear-gradient(top, #878787 0%,#474747 50%,#282828 50%,#4a4a4a 100%); /* W3C */
}

.a::-webkit-scrollbar-thumb:hover {
}

.a::-webkit-scrollbar-corner {
    background: black;
}

.a::-webkit-scrollbar-button:vertical {
    background: -webkit-linear-gradient(left, #525252 0%,#202020 50%,#020202 50%,#101010 100%); /* Chrome10+,Safari5.1+ */
    background: linear-gradient(left, #525252 0%,#202020 50%,#020202 50%,#101010 100%); /* W3C */
}

.a::-webkit-scrollbar-button:horizontal {
    background: -webkit-linear-gradient(top, #525252 0%,#202020 50%,#020202 50%,#101010 100%); /* Chrome10+,Safari5.1+ */
    background: linear-gradient(top, #525252 0%,#202020 50%,#020202 50%,#101010 100%); /* W3C */
}
​&lt;/style>

</head>

<div class="a" style="position:absolute;width:200px;height:200px;background:white;overflow-y:scroll">
    </div> 
```

在这里看到它[http://jsfiddle.net/3uTjv/](http://jsfiddle.net/3uTjv/)

# android - 如何更改 android 中的标签宽度和高度以适用于所有设备

> ID：10400086
> 
> 赞同：2
> 
> 时间：2012-05-01T15:36:45.920
> 
> 标签：android, layout, tabs

我找到了一种更改选项卡宽度和高度的方法，但我不确定它是否适用于所有设备。

这就是方法。

```
Display display = getWindowManager().getDefaultDisplay();
int width = display.getWidth();

tabHost.getTabWidget().getChildAt(0).setLayoutParams(new
        LinearLayout.LayoutParams((width/3)-2,100));
tabHost.getTabWidget().getChildAt(1).setLayoutParams(new
            LinearLayout.LayoutParams((width/3)-2,100));

tabHost.getTabWidget().getChildAt(2).setLayoutParams(new
        LinearLayout.LayoutParams((width/3)-2,100)); 
```

LayoutParams 在 int 变量中采用高度和宽度，那么有没有办法使用其他方法来改变高度和宽度，比如改变布局 xml 或其他一些技术？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T16:49:22.800

您可以在初始化时指定宽度和高度，但是如果您想获得显示宽度，高度可以在调用draw之后获得。

# selenium - 硒、水豚和黄瓜测试拖放重新排序

> ID：10400087
> 
> 赞同：6
> 
> 时间：2012-05-01T15:36:47.480
> 
> 标签：selenium, drag-and-drop, cucumber, capybara

我正在尝试使用 selenium、capybara 和 cucumber 在 Rails 站点上测试拖放重新排序，但我无法让它工作。我努力了：

```
element = page.find_by_id("#{drag_from}")
target = page.find_by_id("#{drag_to}")
element.drag_to(target) 
```

和

```
element = page.find_by_id("#{drag_from}")
target = page.find_by_id("#{drag_to}")
selenium_webdriver = page.driver.browser
selenium_webdriver.mouse.down(element.native)
selenium_webdriver.mouse.move_to(target.native)
selenium_webdriver.mouse.up 
```

和

```
element = page.find_by_id("#{drag_from}")
target = page.find_by_id("#{drag_to}")
selenium_webdriver = page.driver.browser
selenium_webdriver.mouse.move_to(element.native, element.native.size.height/2, element.native.size.width/2)
selenium_webdriver.mouse.down
selenium_webdriver.mouse.move_to(target.native, target.native.size.height/2, target.native.size.width/2)
selenium_webdriver.mouse.up 
```

除其他外，但顺序似乎永远不会改变。下面是我正在使用的 javascript，整个网站都可以在我的[github 上找到](https://github.com/MarvinT/FSD-Training-Site)

```
var hasTouch='ontouchstart'in document.documentElement,startEvent=hasTouch?'touchstart':'mousedown',moveEvent=hasTouch?'touchmove':'mousemove',endEvent=hasTouch?'touchend':'mouseup';if(hasTouch){$.each("touchstart touchmove touchend".split(" "),function(i,name){jQuery.event.fixHooks[name]=jQuery.event.mouseHooks});alert("has Touch")}jQuery.tableDnD={currentTable:null,dragObject:null,mouseOffset:null,oldY:0,build:function(options){this.each(function(){this.tableDnDConfig=jQuery.extend({onDragStyle:null,onDropStyle:null,onDragClass:"tDnD_whileDrag",onDrop:null,onDragStart:null,scrollAmount:5,serializeRegexp:/[^\-]*$/,serializeParamName:null,dragHandle:null},options||{});jQuery.tableDnD.makeDraggable(this)});return this},makeDraggable:function(table){var config=table.tableDnDConfig;if(config.dragHandle){var cells=jQuery(table.tableDnDConfig.dragHandle,table);cells.each(function(){jQuery(this).bind(startEvent,function(ev){jQuery.tableDnD.initialiseDrag(jQuery(this).parents('tr')[0],table,this,ev,config);return false})})}else{var rows=jQuery("tr",table);rows.each(function(){var row=jQuery(this);if(!row.hasClass("nodrag")){row.bind(startEvent,function(ev){if(ev.target.tagName=="TD"){jQuery.tableDnD.initialiseDrag(this,table,this,ev,config);return false}}).css("cursor","move")}})}},initialiseDrag:function(dragObject,table,target,evnt,config){jQuery.tableDnD.dragObject=dragObject;jQuery.tableDnD.currentTable=table;jQuery.tableDnD.mouseOffset=jQuery.tableDnD.getMouseOffset(target,evnt);jQuery.tableDnD.originalOrder=jQuery.tableDnD.serialize();jQuery(document).bind(moveEvent,jQuery.tableDnD.mousemove).bind(endEvent,jQuery.tableDnD.mouseup);if(config.onDragStart){config.onDragStart(table,target)}},updateTables:function(){this.each(function(){if(this.tableDnDConfig){jQuery.tableDnD.makeDraggable(this)}})},mouseCoords:function(ev){if(ev.pageX||ev.pageY){return{x:ev.pageX,y:ev.pageY}}return{x:ev.clientX+document.body.scrollLeft-document.body.clientLeft,y:ev.clientY+document.body.scrollTop-document.body.clientTop}},getMouseOffset:function(target,ev){ev=ev||window.event;var docPos=this.getPosition(target);var mousePos=this.mouseCoords(ev);return{x:mousePos.x-docPos.x,y:mousePos.y-docPos.y}},getPosition:function(e){var left=0;var top=0;if(e.offsetHeight==0){e=e.firstChild}while(e.offsetParent){left+=e.offsetLeft;top+=e.offsetTop;e=e.offsetParent}left+=e.offsetLeft;top+=e.offsetTop;return{x:left,y:top}},mousemove:function(ev){if(jQuery.tableDnD.dragObject==null){return}if(ev.type=='touchmove'){event.preventDefault()}var dragObj=jQuery(jQuery.tableDnD.dragObject);var config=jQuery.tableDnD.currentTable.tableDnDConfig;var mousePos=jQuery.tableDnD.mouseCoords(ev);var y=mousePos.y-jQuery.tableDnD.mouseOffset.y;var yOffset=window.pageYOffset;if(document.all){if(typeof document.compatMode!='undefined'&&document.compatMode!='BackCompat'){yOffset=document.documentElement.scrollTop}else if(typeof document.body!='undefined'){yOffset=document.body.scrollTop}}if(mousePos.y-yOffset<config.scrollAmount){window.scrollBy(0,-config.scrollAmount)}else{var windowHeight=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:document.body.clientHeight;if(windowHeight-(mousePos.y-yOffset)<config.scrollAmount){window.scrollBy(0,config.scrollAmount)}}if(y!=jQuery.tableDnD.oldY){var movingDown=y>jQuery.tableDnD.oldY;jQuery.tableDnD.oldY=y;if(config.onDragClass){dragObj.addClass(config.onDragClass)}else{dragObj.css(config.onDragStyle)}var currentRow=jQuery.tableDnD.findDropTargetRow(dragObj,y);if(currentRow){if(movingDown&&jQuery.tableDnD.dragObject!=currentRow){jQuery.tableDnD.dragObject.parentNode.insertBefore(jQuery.tableDnD.dragObject,currentRow.nextSibling)}else if(!movingDown&&jQuery.tableDnD.dragObject!=currentRow){jQuery.tableDnD.dragObject.parentNode.insertBefore(jQuery.tableDnD.dragObject,currentRow)}}}return false},findDropTargetRow:function(draggedRow,y){var rows=jQuery.tableDnD.currentTable.rows;for(var i=0;i<rows.length;i++){var row=rows[i];var rowY=this.getPosition(row).y;var rowHeight=parseInt(row.offsetHeight)/2;if(row.offsetHeight==0){rowY=this.getPosition(row.firstChild).y;rowHeight=parseInt(row.firstChild.offsetHeight)/2}if((y>rowY-rowHeight)&&(y<(rowY+rowHeight))){if(row==draggedRow){return null}var config=jQuery.tableDnD.currentTable.tableDnDConfig;if(config.onAllowDrop){if(config.onAllowDrop(draggedRow,row)){return row}else{return null}}else{var nodrop=jQuery(row).hasClass("nodrop");if(!nodrop){return row}else{return null}}return row}}return null},mouseup:function(e){if(jQuery.tableDnD.currentTable&&jQuery.tableDnD.dragObject){jQuery(document).unbind(moveEvent,jQuery.tableDnD.mousemove).unbind(endEvent,jQuery.tableDnD.mouseup);var droppedRow=jQuery.tableDnD.dragObject;var config=jQuery.tableDnD.currentTable.tableDnDConfig;if(config.onDragClass){jQuery(droppedRow).removeClass(config.onDragClass)}else{jQuery(droppedRow).css(config.onDropStyle)}jQuery.tableDnD.dragObject=null;var newOrder=jQuery.tableDnD.serialize();if(config.onDrop&&(jQuery.tableDnD.originalOrder!=newOrder)){config.onDrop(jQuery.tableDnD.currentTable,droppedRow)}jQuery.tableDnD.currentTable=null}},serialize:function(){if(jQuery.tableDnD.currentTable){return jQuery.tableDnD.serializeTable(jQuery.tableDnD.currentTable)}else{return"Error: No Table id set, you need to set an id on your table and every row"}},serializeTable:function(table){var result="";var tableId=table.id;var rows=table.rows;for(var i=0;i<rows.length;i++){if(result.length>0)result+="&";var rowId=rows[i].id;if(rowId&&rowId&&table.tableDnDConfig&&table.tableDnDConfig.serializeRegexp){rowId=rowId.match(table.tableDnDConfig.serializeRegexp)[0]}result+=tableId+'[]='+rowId}return result},serializeTables:function(){var result="";this.each(function(){result+=jQuery.tableDnD.serializeTable(this)});return result}};jQuery.fn.extend({tableDnD:jQuery.tableDnD.build,tableDnDUpdate:jQuery.tableDnD.updateTables,tableDnDSerialize:jQuery.tableDnD.serializeTables}); 
```

并在页面上：

```
%script{:charset => "utf-8", :type => "text/javascript"}
  $(document).ready(function() {
  $('#lessons').tableDnD({
  onDrop: function(table, row){
  $.ajax({
  type: "POST",
  url: "#{url_for(:action => 'sort')}",
  processData: false,
  data: $.tableDnD.serialize() + '&authenticity_token=' + encodeURIComponent("#{form_authenticity_token if protect_against_forgery?}")

  });
  }  
  });
  }); 
```

任何帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T23:05:18.263

尝试使用操作生成器 selenium API

```
Actions builder = new Actions(driver);

   Action dragAndDrop = builder.clickAndHold(someElement)
       .moveToElement(otherElement)
       .release(otherElement)
       .build();

   dragAndDrop.perform(); 
```

你可以在[这里](http://code.google.com/p/selenium/wiki/AdvancedUserInteractions)获得一些额外的信息。希望这对你有用）

# javascript - 在动态创建的 iframe 中运行 javascript

> ID：10400089
> 
> 赞同：3
> 
> 时间：2012-05-01T15:37:01.853
> 
> 标签：javascript, jquery, html, iframe

我有一个生成一些 html+javascript 代码的工具，它在一个 div 中显示代码，然后显示代码在 iframe 中显示的预览。

这是一个快速的小提琴，它显示了这个...... [http://jsfiddle.net/Zv4zU/](http://jsfiddle.net/Zv4zU/)

但是 iframe 中的 javascript 永远不会运行，即使您检查 iframe javascript 肯定在那里。如何让 javascript 自行运行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T15:42:01.647

请参阅此[jsfiddle](http://jsfiddle.net/HPmw2/)以获得解决方案！

编辑：正如乔纳森指出的，我也应该在这里发布代码：

```
var html = "html code <script type='text/javascript'>alert('OK');<\/script>";
$("#myFrame").contents().find("body").html(html); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-03T09:26:42.203

我有点更新你的脚本以真正在 iframe 中启动 JS：

```
var script = "alert('OK');document.body.innerHTML = 'hello!'";
myFrame.get(0).contentWindow.eval(script); 
```

见[jsfeedle](http://jsfiddle.net/Zv4zU/9/ "jsfiddle")

# javascript - 是否有用于读取驾驶执照的 JavaScript（或其他）库？

> ID：10400091
> 
> 赞同：16
> 
> 时间：2012-05-01T15:37:20.703
> 
> 标签：javascript, hid, magnetic-cards, cardreader

我正在开发一个 JavaScript 项目，该项目涉及在键盘仿真模式下从 USB 磁条阅读器读取信用卡和驾驶执照。事实证明，让信用卡工作非常容易，因为它们都采用相同的格式。然而，很快就发现驾驶执照要困难得多，因为即使在单个州 (CA) 内，格式也因一张卡而异。

无论如何，我们的目标是从刷驾照（使用磁条阅读器）中获取原始数据并从中提取数字，从而为尽可能多的美国州（全部 50 个州）生成正确的数字。是惊人的）。值得一提的是，**我并不特别关心验证**，至少目前不是。

有没有其他人已经这样做了，并将它们全部打包在我可以使用的库（免费或商业）中？那将是真棒。

我还应该指出，虽然我很想看到 JavaScript 解决方案，但实际上我愿意研究任何用任何语言编写的解决方案。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-25T23:01:10.457

首先，大多数州不在驾驶执照上使用磁条，或者至少在 2009 年是这样：[http ://www.digitaldoorkeep.com/blog/tag/drivers-license-magnetic-stripe/](http://www.digitaldoorkeep.com/blog/tag/drivers-license-magnetic-stripe/)

查找剩余状态的数据格式是花一些时间在 google 上的问题（我在 3 分钟内找到了这个：[http](http://www.dgahouston.com/msrdata2.htm) ://www.dgahouston.com/msrdata2.htm ）或实际请求信息：它是公共信息。

另请阅读：[http](http://www.dgahouston.com/dlsplit1.htm) ://www.dgahouston.com/dlsplit1.htm - 在某些州扫描许可证是非法的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-26T07:47:53.697

嗯，我不确定这是否会有所帮助，但我遇到了具有在线身份验证功能的 Jumio。我不知道它是否适用于您当前实施的条形扫描仪，但看看它可能正是您想要的：[https ://pay.jumio.com/](https://pay.jumio.com/)

它通过使用内置网络摄像头扫描许可证或将许可证图像上传到其服务器进行验证来工作。 [http://jumio.com/products/netverify/online-id-verification/](http://jumio.com/products/netverify/online-id-verification/)

祝你好运！

# c# - C# 获取 ViewBag 的属性？

> ID：10400093
> 
> 赞同：5
> 
> 时间：2012-05-01T15:37:26.470
> 
> 标签：c#, viewbag

我完全了解动态的事实，并且可以通过第一次使用和初始化这些属性`ViewBag`来“添加”新属性而不会出现编译问题。`ViewBag`

但是，我正在寻找一种方法来获取已在`ViewBag`. `ViewBag`（根据 MSDN）被声明为`ControllerBase`类中的对象，并且似乎没有关于如何动态获取对象属性的方法。

也许是反思，但话又说回来，我不知道从哪里开始。

我想这样做的原因是我正在将一个巨大的网站从 MVC 转换为 MVVM 架构。为此，我想进行测试以确保 ViewBag 没有在任何地方使用，并且在运行控制器的方法后没有设置 ViewBag 上的任何属性。

我从哪说起呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-01T15:39:30.900

检查[ViewData](http://msdn.microsoft.com/en-us/library/system.web.mvc.viewpage.viewdata.aspx) - 它以字典的形式包含 ViewBag 中的所有内容。

# c# - .net 和 Java 迁移等效表

> ID：10400094
> 
> 赞同：1
> 
> 时间：2012-05-01T15:37:35.703
> 
> 标签：c#, java, .net

我从 Java 和 C# 中看到了这个感兴趣的迁移表：

[http://www.harding.edu/fmccown/java_csharp_comparison.html#fileio](http://www.harding.edu/fmccown/java_csharp_comparison.html#fileio)

我需要这样的东西，但来自 .net 框架和 Java。

我在互联网上搜索，但我没有找到一个很好的比较。

我在哪里可以找到 .net 和 Java 的非常有用的迁移等效比较？

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T15:44:36.387

MSDN 有一个页面，其中包含各种信息，包括大约一半的表格，这些表格显示了常用 Java 包的 C#/.NET 等效项。

[http://msdn.microsoft.com/en-us/library/ms973842.aspx](http://msdn.microsoft.com/en-us/library/ms973842.aspx)

这足够了吗，还是您需要更具体的内容？

# java - 简单的 While 循环示例说明

> ID：10400096
> 
> 赞同：1
> 
> 时间：2012-05-01T15:37:49.700
> 
> 标签：java, methods

假设方法 enigma 已定义如下：

```
public int enigma(int n)
{
    int m;

    while (n >= 10) {
        m = 0;
        while (n > 10) {
            m += n % 10;
            n /= 10;
        }
        n = m;
    }
    return (n);
} 
```

enigma(1995) 的价值是多少？我知道 enigma(1995) 的值为 3。 一步一步是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T15:47:39.053

好吧，您显然进展顺利，但我不想为您解决整个问题，所以我只是轻推一下：

当内部循环开始时，`n = 1995`和`m = 0`。正如您在循环结束时已经发现的那样，`n = 199`, `m = 5`. 循环再次从顶部开始...... `n = 199`，`m = 5`......等

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T15:46:23.713

外部 while 运行直到`n`小于 10。

内部循环运行直到`n`小于或等于 10，然后我们将值分配给`m`to `n`，因此可以再次评估外部循环。

内循环会发生什么？ `m`增加`n`除以 10 的余数（所以 5 when `n==1995`），然后`n`设置为除法的（整数）结果（所以 now `n==199`）。这重复了几次：

```
n=1995 => m=5,n=f199
n=199  => m=5+9=14,n=19
n=19   => m=14+9=23,n=1 
```

由于`n`现在不大于 10，内部循环结束并`n`设置为`m`(==23)，然后我们再次执行此操作：

```
n=23 => m=3,n=2 
```

由于`n`现在不大于 10，因此内部循环结束并`n`设置为`m`(==3)。由于 now`n`小于 10，因此存在外循环，我们得到了`n`(==3) 的结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T15:52:15.303

只需使用 eclipse (java) 安装，创建一个静态 main 方法并调用您的函数。

当您使用调试器时，您可以一步一步地做任何事情并观察变量

# java - Google App Engine 慢日志更新

> ID：10400099
> 
> 赞同：4
> 
> 时间：2012-05-01T15:38:11.430
> 
> 标签：java, google-app-engine, logging

这个问题困扰了我很久——

我正在使用 Google App Engine \ Java

日志需要永远更新：例如，如果我测试我的应用程序并且在 12:34 发生服务器错误，我只会在“一段时间”后看到适当的错误日志，而这个时间通常至少是一个小时。刷新管理控制台或任何没有帮助的东西。这让我很难调试我的应用程序（本地调试当然没有帮助，因为它是与云相关的错误）。

其他人有过这种经历吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T23:38:44.437

您可能会遇到[此错误](http://code.google.com/p/googleappengine/issues/detail?id=5494)- 还附有错误报告的潜在解决方案，这可能会缓解您的问题。

# c - 在运行时执行的 if 条件的顺序

> ID：10400101
> 
> 赞同：0
> 
> 时间：2012-05-01T15:38:24.463
> 
> 标签：c

> **可能重复：**
> [C/C++ 中是否强制要求短路布尔运算符？和评价顺序？](https://stackoverflow.com/questions/628526/is-short-circuiting-boolean-operators-mandated-in-c-c-and-evaluation-order)

考虑这段代码：

```
char* str=NULL;
if(str!=NULL && str[0]=='h')
    printf("ok"); 
```

验证的第一个条件是 str 不为 NULL。我已尝试编译并运行此代码，但没有出现分段错误。
这意味着代码会在下一条指令中中断 if，因为不需要进一步验证 str[0] 是否等于“h”，因为它是一个与。
但问题是：这是否保证适用于所有编译器？不可能发生编译器出于某种原因生成的汇编代码，首先验证 str 是否等于“h”（导致分段错误），然后检查 str 是否为空？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T15:39:47.747

是的，这是有保证的。这称为[*短路评估*](http://en.wikipedia.org/wiki/Short-circuit_evaluation)。

来自 C99 标准（第 6.5.13 节）：

> 与按位二元`&`运算符不同，运算`&&`符保证从左到右的求值；在计算第一个操作数之后有一个序列点。如果第一个操作数比较等于 0，则不计算第二个操作数。

类似的规则适用于`||`; 如果第一个操作数为真，则不计算第二个操作数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T15:39:44.447

是的。这就是它应该如何工作的方式。

# python - 初学者Python书籍教程问题

> ID：10400102
> 
> 赞同：1
> 
> 时间：2012-05-01T15:38:29.090
> 
> 标签：python, netbeans, python-2.7, netbeans-6.9

*请忽略这个例子，它只是在我目前正在学习的一本书中。*

我在 Netbeans 6.9.1 中运行它，因为 7 不支持 Python :( 尝试在输出控制台中运行它时出现错误。代码与教科书中的内容完全相同。唯一我能想到的是，net beans 只支持 2.7.1，但我正在学习的书是 Python 3.1。这可能是问题吗？如果我忽略了一些东西，请告诉我。

这是基本脚本；

```
# Word Problems
# Demonstrates numbers and math

print("If a 2000 pound pregnant hippo gives birth to a 100 pound calf,");
print("but then eats 50 pounds of food, how much does she weigh?");
input("Press the enter key to find out.");
print("2000 - 100 + 50 =", 2000 - 100 + 50); 

input("\n\nPress the enter key to exit");

Traceback (most recent call last):
  File "/Users/Steve/Desktop/NewPythonProject/src/newpythonproject.py", line 6, in <module>
    input("Press the enter key to find out.");
  File "<string>", line 0

^
SyntaxError: unexpected EOF while parsing 
```

-多谢你们。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-01T15:42:26.733

问题是这`input()`在 Python 3.x 中意味着不同的东西。在 Python 2.x 中，等效函数是[`raw_input()`](http://docs.python.org/library/functions.html#raw_input).

只需将您的呼叫替换为`input()`to `raw_input()`，它就会按预期工作：

```
# Word Problems
# Demonstrates numbers and math

print("If a 2000 pound pregnant hippo gives birth to a 100 pound calf,")
print("but then eats 50 pounds of food, how much does she weigh?")
raw_input("Press the enter key to find out.")
print("2000 - 100 + 50 =", 2000 - 100 + 50)

raw_input("\n\nPress the enter key to exit") 
```

这导致问题的原因是在[Python 2.x 中，`input()`](http://docs.python.org/library/functions.html#input)获取用户文本，然后将其解释为 Python 表达式。当您给它一个空行时，这是一个无效的表达式，它会引发异常。

如果您正在学习 Python 3.x，我强烈建议您使用不同的编辑器。PyCharm 很棒（虽然不是免费的），而且 Eclipse+Pydev 就在那里。老实说，你并不真的*需要*Python 的 IDE——一个像 Gedit 这样支持代码高亮的优秀文本编辑器就是你真正需要的。

另请注意，我删除了分号，这在 Python 中是完全多余的。

# javascript - 根本没有调用Javascript函数

> ID：10400109
> 
> 赞同：1
> 
> 时间：2012-05-01T15:39:05.130
> 
> 标签：javascript, jquery, html, mobile

我制作了以下小型 Javascript 脚本以在我的页面上启用一些表单元素：

```
function unHide()
{
    if($('#UserName').val() == "")
    {
        alert('Please Enter a User Name first');
    }
    else
    {
        $('#radio-choice-1').checkboxradio('enable');
        $('#radio-choice-2').checkboxradio('enable');
        $('#radio-choice-1-board').checkboxradio('enable');
        $('#radio-choice-2-board').checkboxradio('enable');
        $('#TransNum').textinput('enable'); 
        $('#UserContinue').remove();
        $('#nextButton').show();
    }
} 
```

问题是，单击正确的按钮时不会调用它。甚至警报也没有出现。这是HTML：

```
<label for="UserName" style="vertical-align: top;">User Name:</label>
<input type="text" name="UserName" id="UserName" placeholder="Ex: LesniakBjEVS101" />

...

<a data-role="button" data-icon="check" data-mini="true" id="UserContinue"
    style="float:right;" onclick="javascript:unHide(); return false;">Continue...</a>

...

<section id="nextButton" hidden>
    <a href="salamanderSelect.html" data-role="button" data-icon="forward" 
             data-mini="true" style="float:right;">Next</a>
</section> 
```

我遇到的问题是当我单击提交按钮时，绝对没有任何反应。我没有从 Javascript 中得到任何反馈，也没有任何反馈。

任何帮助将不胜感激！谢谢！

编辑：

在尝试了建议后，我仍然无法让 javascript 做任何事情。我尝试了多个浏览器，但仍然没有。

而且我昨天也刚刚完成了这项工作……也没有对代码进行任何更改

编辑2：

显然，如果我的脚本是 HTML 文件中的最后一件事，即使在标签之外，它也可以工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-01T15:41:59.250

虽然 onclick 不需要`javascript:`，但它仍然可以在许多浏览器中使用。这是您的示例的 jsfiddle：http: [//jsfiddle.net/ukWcp/2/](http://jsfiddle.net/ukWcp/2/)

仅`javascript:`在`href`.

虽然我建议在 firebug 或 chrome 中使用 javascript 控制台和调试器进行调试，但其他人提到使用全 javascript 解决方案进行绑定。这是可取的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-01T15:44:25.597

由于您已经在使用 jQuery，为什么不使用它来附加您的事件，而不是使用笨重的`onclick`属性。

```
<a data-role="button" data-icon="check" data-mini="true" id="UserContinue"
style="float:right;">Continue...</a> 
```

```
$("#UserContinue").click(function(e) {
    if($('#UserName').val() == "") {
        alert('Please Enter a User Name first');
    }
    else {
        $('#radio-choice-1').checkboxradio('enable');
        $('#radio-choice-2').checkboxradio('enable');
        $('#radio-choice-1-board').checkboxradio('enable');
        $('#radio-choice-2-board').checkboxradio('enable');
        $('#TransNum').textinput('enable'); 
        $('#UserContinue').remove();
        $('#nextButton').show();
    }
    e.preventDefault();
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-01T15:54:12.810

```
$(document).ready(function() {
    $("#UserContinue").click(function() {
        if($('#UserName').val() == "")
        {
            alert('Please Enter a User Name first');
        }
        else
        {
            $('#radio-choice-1').checkboxradio('enable');
            $('#radio-choice-2').checkboxradio('enable');
            $('#radio-choice-1-board').checkboxradio('enable');
            $('#radio-choice-2-board').checkboxradio('enable');
            $('#TransNum').textinput('enable'); 
            $('#UserContinue').remove();
            $('#nextButton').show();
        }

        return false;
    ); 
}); 
```

如果您使用的是 jQuery，为什么不完全使用它呢？如果这是您想要的，最后的 return false 会阻止单击事件继续。

编辑：

您在原始帖子中说“我遇到的问题是当我单击提交按钮时，绝对没有任何反应。我没有从 Javascript 中得到任何反馈，也没有任何反馈。”

然而，您已将点击事件附加到不完整的锚标记（它缺少 href）。那么您是否希望在单击提交按钮或单击锚标记时触发该行为？如果您希望触发器在单击提交按钮时触发，那么您需要更改 $("#UserContinue") 以引用提交按钮而不是锚标记。或者使用 .submit() 事件处理程序而不是 .click()，[http:](http://api.jquery.com/submit/) //api.jquery.com/submit/ 。

如果这不是问题，那么我建议编辑您的帖子以包含您的所有代码，并说明单击哪些元素后您期望的行为。

编辑2：

我相信您没有将 jQuery 包装在 .ready() 函数周围，请查看现在包含 .ready() 的修改后的代码片段。.ready() 确保 DOM 在使用 jQuery 之前完全加载。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-01T20:18:41.567

保留您的函数并将事件处理程序添加到您的 javacript 而不是标记中：

```
$(document).ready(function() { 
    $('#UserContinue').click(function() { 
       unHide();
    });
}); 
```

简洁版本：

```
$(document).ready(function() { 
    $('#UserContinue').click(unHide);
}); 
```

# python - Django - 基于类的 FormView 中的 Catch 参数

> ID：10400113
> 
> 赞同：11
> 
> 时间：2012-05-01T15:39:17.390
> 
> 标签：python, django, django-generic-views

在我的页面上，我需要显示帖子详细信息和评论表单以供查看者发表评论。我创建了 2 个通用视图：

```
# views.py
class PostDetailView (DetailView):
  model = Post
  context_object_name = 'post'
  template_name = 'post.html'

  def get_context_data(self, **kwargs):
    context = super(PostDetailView, self).get_context_data(**kwargs)
    context['comment_form'] = CommentForm()
    return context

class AddCommentView(FormView):
  template_name = 'post.html'
  form_class = CommentForm
  success_url = '/'

  def form_valid(self, form):
    form.save()
    return super(AddCommentView, self).form_valid(form)

  def form_invalid(self, form):
    return self.render_to_response(self.get_context_data(form=form))

detail = PostDetailView.as_view()
add_comment = AddCommentView.as_view()

# urls.py 
....
url(r'^(?P<pk>\d+)/$', view='detail'),
url(r'^(?P<post_id>\d+)/add_comment/$', view='add_comment'),

.... 
```

AddCommentView 中会出现错误，因为我没有为评论指定帖子的 ID。如何访问 AddCommentView 中的 post_id？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-05-01T15:43:35.990

`self.kwargs['post_id']`或`self.args[0]`包含该值

[文档](https://docs.djangoproject.com/en/dev/topics/class-based-views/#dynamic-filtering)

# syntax-highlighting - 如何在zend studio中更改匹配功能或其他元素的突出显示颜色？

> ID：10400116
> 
> 赞同：0
> 
> 时间：2012-05-01T15:39:20.600
> 
> 标签：syntax-highlighting, zend-studio, color-scheme

如何在 Zend Studio 中更改任何匹配元素（函数、引用或标签）的突出显示颜色？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T12:59:47.770

找到结合2个类似问题和答案的解决方案：

[在哪里更改 Eclipse 中选定事件的突出显示颜色？](https://stackoverflow.com/questions/4699166/where-to-change-highlight-color-in-eclipse)

[在编辑器中匹配关键字突出显示颜色](https://stackoverflow.com/questions/1862931/matching-keyword-highlight-color-in-editor)

所以在 Zend Studio 中你可以这样做：

> 首选项 -> 常规 -> 编辑器 -> 文本编辑器 -> 注释 ->

在那里你可以找到不同的高光着色选项

# c - 验证 C 中的 long long Int 行为异常

> ID：10400123
> 
> 赞同：0
> 
> 时间：2012-05-01T15:39:37.753
> 
> 标签：c, validation, long-long

我正在编写一个 MPI 程序，其中等级 0 从文件中读取参数并使用 MPI_BCAST 在所有其他等级上广播参数。

我正在尝试验证在 C 中获得的长整数是否非零或不在 C 中，虽然我可以验证变量是否非零，但因为我无法验证相反的情况。（我已将变量初始化为零）。我已验证广播确实可以正常工作，但我无法验证

```
if ((min_length==0LL) || (max_length==0LL) || (stride_length==0LL) || (nflops == 0LL)) 
```

而我可以验证它的反面，即

```
if ((min_length!=0LL) || (max_length!=0LL) || (stride_length!=0LL) || (nflops != 0LL)) 
```

只是为了清除这些东西，没有一个值为零，如果获得的任何值为零，我的程序需要终止。

先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T15:45:59.593

使用德摩根是你想反转/否定你的条件

```
if (min_length!=0LL && max_length!=0LL && stride_length!=0LL && nflops != 0LL) {
} 
```

[http://en.wikipedia.org/wiki/De_Morgan%27s_laws](http://en.wikipedia.org/wiki/De_Morgan%27s_laws)

# wcf - 第二次没有提示用户名密码

> ID：10400129
> 
> 赞同：1
> 
> 时间：2012-05-01T15:39:55.130
> 
> 标签：wcf, iis, wcf-security, basic-authentication

我有一个托管在 IIS 中的 WCF 服务。我已为该服务启用基本身份验证。首次通过 iis 托管服务时会询问用户名/密码，而不是后续请求。每次请求服务时如何提示登录？安全设置的 web.config 是

```
<security mode="Transport">
    <transport clientCredentialType="Basic" />
</security> 
```

我通过创建自签名证书在服务上启用了 SSL。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T16:25:04.190

如果您从浏览器访问服务，则无法关闭此行为。首次访问该服务时，系统会提示您输入凭据，然后在内部缓存这些凭据，直到您清除历史记录或关闭浏览器（或者也可能是浏览器选项卡）。浏览器对所有后续请求使用凭据 - 每次请求始终处理基本身份验证。

这是因为浏览器首先用于浏览网页内容，如果没有此功能，如果您想访问受保护的页面，您将不得不访问网站上使用基本保护的每个 html、css、js 或图片文件的凭据验证。

# javascript - HTML如何获取父组件的ID？

> ID：10400130
> 
> 赞同：1
> 
> 时间：2012-05-01T15:39:57.060
> 
> 标签：javascript, html, parent-child, parentid

我想使用 javascript 获取父标签的 id。在此示例中，文本“stackoverflow”的父 ID 为“sofsite”，“This”的父 ID 为“sofbody”。

```
 <body id = 'sofbody'>
      This is <a href = "www.stackoverflow.com" id = "sofsite">stackoverflow</a>.
 </body> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-01T15:43:42.323

```
var parentid = textnode.parentNode.id; 
```

请参阅[文档以获取`parentNode`](https://developer.mozilla.org/en/DOM/Node.parentNode).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T15:48:19.810

您需要做的就是访问单击的元素 parentNode 属性并继续向上，直到找到与您所追求的 id 匹配的一个。

这是一个小小提琴[http://jsfiddle.net/8aPnq/](http://jsfiddle.net/8aPnq/)

```
var parent, elem, id = 'sofbody',
    a = document.getElementById('sofsite'),
    found = false;

a.onclick = function(ev) {

    ev.preventDefault();

    while (!found) {
        parent = parent ? parent.parentNode : ev.target.parentNode;
        if (parent.id === id) {
            elem = parent;
            found = true;
            console.log(elem);
        };
    };
};​ 
```

# grails - grails 应用程序的概念

> ID：10400132
> 
> 赞同：1
> 
> 时间：2012-05-01T15:40:03.210
> 
> 标签：grails, gsp

我正在做一个 Grails 项目，它是一个会计项目。我们有多个客户，他们可以有多种类型的帐户。我必须为客户创建“创建”页面，应该有一种方法可以向客户添加多种类型的帐户。

因此，我正在考虑制作一个包含帐户类型和几个文本框的下拉列表，以输入帐户名称和有关帐户的其他信息。另外，由于一个客户可以有多个帐户，所以我想创建一个“添加”按钮，单击它会显示一个新行以添加新客户。我在使用javascript之前做过这种UI，但是在这种情况下，由于有一个下拉列表和其他组件，我认为它会非常困难并且可能无法正常工作。

我正在考虑创建一个局部视图，每次用户单击带有附加行的“添加”按钮时都会呈现该视图，问题在于验证错误期间，编辑页面，并且每次用户单击“添加”时我还必须传递所有值' 按钮。

还有其他的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T16:21:08.483

对于模板方法，如果您不想继续用户已经设置的参数，则必须使用 ajax。

当用户单击按钮时，可能会出现新的下拉列表（或 a 中的任何元素组`<div>`），因为 Grails 已经带有 jQ​​uery，您可能想看看该`.clone()`方法。
列出的两种方法的问题是可能会有重复。

现在，另一种选择是使用复选框，这样您就可以只*检查*您想要的帐户类型。

但老实说，让用户如此自由地选择他想要的帐户类型似乎有点奇怪甚至不合适。

# c# - 如何将静态行添加到gridview

> ID：10400134
> 
> 赞同：1
> 
> 时间：2012-05-01T15:40:07.300
> 
> 标签：c#, asp.net, static, row, aspxgridview

好的，所以我的目标是在 gridview 标题下仅添加 1 个静态行示例：

|coloumnHeader1|coloumnHeader2|coloumnHeader3|coloumnHeader4|

|---------------------静态行------------- --| |DataBoundField|DataBoundField|DataBoundField|DataBoundField| |DataBoundField|DataBoundField|DataBoundField|DataBoundField| |DataBoundField|DataBoundField|DataBoundField|DataBoundField| |DataBoundField|DataBoundField|DataBoundField|DataBoundField| |DataBoundField|DataBoundField|DataBoundField|DataBoundField| |DataBoundField|DataBoundField|DataBoundField|DataBoundField|

|---------------------页脚-------------- -----|

我的预感是它对 RowDataBound 有所帮助，但就我所知。

我想我需要更好地解释自己：我想做的是相当于添加一个新的 HeaderRow ...... thnx 为所有帮助者：D

找到答案：经过大量谷歌搜索后，我在 asp 上找到了我想要的东西

```
<asp:GridView OnPreRender="grd_Pre" CssClass="table" ID="GridView1" runat="server" AutoGenerateColumns="False" 
   > 
```

在后面的代码中

```
 protected void grd_Pre(object sender, EventArgs e)
{
    GridViewRow gv = new GridViewRow(0, 0, DataControlRowType.Header, DataControlRowState.Normal);
    TableCell tc = new TableCell();
    tc.ColumnSpan = 3;
    tc.Text = "GridView Header";
    tc.Attributes.Add("style", "text-align:center");
    gv.Cells.Add(tc);
    this.GridView1.Controls[0].Controls.AddAt(0, gv);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T15:31:38.713

找到答案：经过大量谷歌搜索后，我在 asp 上找到了我想要的东西

```
<asp:GridView OnPreRender="grd_Pre" CssClass="table" ID="GridView1" runat="server" AutoGenerateColumns="False" 
   > 
```

在后面的代码中

```
 protected void grd_Pre(object sender, EventArgs e)
{
    GridViewRow gv = new GridViewRow(0, 0, DataControlRowType.Header, DataControlRowState.Normal);
    TableCell tc = new TableCell();
    tc.ColumnSpan = 3;
    tc.Text = "GridView Header";
    tc.Attributes.Add("style", "text-align:center");
    gv.Cells.Add(tc);
    this.GridView1.Controls[0].Controls.AddAt(0, gv);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T15:53:11.923

正如您所提到的，您可能可以在 RowDataBound 事件期间插入一行，但这会很混乱。

根据绑定到网格的数据结构，您可以将静态行插入数据结构。我什至有一些实现，其中查询被修改以返回静态行，所以你最终会得到类似的东西：

```
select field1, ... , fieldN from table
union
select 'static 1', ... 
```

相反，您可以将静态行添加为标题模板的一部分吗？

如果不查看更多代码，很难正确回答这个问题。

# asp-classic - 如何阻止某个 IP 地址的 div

> ID：10400135
> 
> 赞同：1
> 
> 时间：2012-05-01T15:40:13.493
> 
> 标签：asp-classic

我必须为我正在使用的某个 IP 地址屏蔽某个 div，这里是代码：

```
 <%
Dim sBlockedIP
sBlockedIP = Request.ServerVariables("REMOTE_ADDR")
'check if the IP is the one that is blocked
If sBlockedIP = "00.000.00.00" Then
'if IP address is banned then redirect to no_access.asp
Response.Redirect "no_access.asp"
End If
%> 
```

这是需要阻止此 IP 的 html

```
 <div id="social_media_outer">
      <div id="social_media">
      <div id="fb-root"> <script src="#">
      </script><fb:like href="" send="true" layout="button_count" 
show_faces="false" action="recommend" border="6" font="">
      </fb:like>
      <span  class='st_linkedin' >
      </span></span>
      <span  class='st_facebook' >
      </span>
      <span  class='st_sharethis' st_title="#"></span>
      <a href="http://twitter.com/share" data-count="none"><img src="#" style="position:relative;
      bottom:-4px; border:none;" /></a><script type="text/javascript" src="http://platform.twitter.com/widgets.js"></script><span class="st_email" ></span>
      <a href="javascript:print(document)"><img src="http://www.gosh.org/facebook/sharethis/print_icon.gif" style="position:relative;
      bottom:-4px; border:none;" /></a>

 </div>
</div>
</div> 
```

有人可以帮忙吗。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T16:00:46.893

为什么不放一个简单的`If Else`？

```
If sBlockedIP <> "123.456.789.000" Then

   <div id="social_media_outer">
      <div id="social_media">
      <div id="fb-root"> <script src="#">
      </script><fb:like href="" send="true" layout="button_count" 
show_faces="false" action="recommend" border="6" font="">
      </fb:like>
      <span  class='st_linkedin' >
      </span></span>
      <span  class='st_facebook' >
      </span>
      <span  class='st_sharethis' st_title="#"></span>
      <a href="http://twitter.com/share" data-count="none"><img src="#" style="position:relative;
      bottom:-4px; border:none;" /></a><script type="text/javascript" src="http://platform.twitter.com/widgets.js"></script><span class="st_email" ></span>
      <a href="javascript:print(document)"><img src="http://www.gosh.org/facebook/sharethis/print_icon.gif" style="position:relative;
      bottom:-4px; border:none;" /></a>

 </div>
</div>
</div> 

Else

End If 
```

我可能真的过于简单化了......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T16:01:50.907

`Response.Redirect`如果您只希望阻止生成的部分内容（并且使用基于 IIS IP 的安全工具来阻止整个页面比对其进行编码更好），则First不是合适的工具。

这会做到

```
 <%
      Function CanShowProtectedContent()
           CanShowProtectedContent = Request.ServerVariables("REMOTE_ADDR") <> "xxx.xxx.xxx.xxx"
      End If
 %>

 ...

 <div id="social_media_outer"> 
 <% If CanShowProtectedContent()  Then %>
    <!-- your normal content here -->     
 <% Else %>
    <span>Content unavailable</span>
 <% End If %>
 </div> 
```

尽管您应该考虑加强`CanShowProtectedContent`以支持被禁止的 IP 地址和/或子网列表。还将该集存储为 ASP 包含文件。

# python - 编程工作流程：哪一个？将参数从函数传递到函数或将输出作为参数传递给其他函数？

> ID：10400139
> 
> 赞同：0
> 
> 时间：2012-05-01T15:40:18.323
> 
> 标签：python, function, workflow, arguments

我正在寻找这些选项工作流程的比较（如下＃1和＃2）。所以我正在使用调用另一个 x() 函数的函数 xx()。这是通用编程工作流程（代码是 python 语法，但流程逻辑可以应用于任何其他语言）。

所以选项#1显示了我必须将参数从一个函数传递给另一个函数的工作流程，而在#2中我不必传递所有参数，只需将第一个函数的输出作为第二个函数的参数。

# 选项1 ：

```
def x(a):
    <code>
    return  value

def xx(a):
    x=x(a)
    <code>
    return value

print xx(a) 
```

# 选项#2：

```
def x(a):
    <code>
    return  value

def xx(x):
    <code>
    return value

x=x(a)
print xx(x) 
```

这只是一个简单的例子。到目前为止，我在选项#1 中发现传递给 x() 的每个参数也必须传递给 xx() 。传递大量参数时的示例（这是我不使用 * 或 ** 传递多个参数的基本示例）：

# 选项1

```
def x(a1,a2,….a100):
    <code>
    return value

def xx(b1,b2,…..b100):
    x=x(b1,b2,….b100)
    <code>
    return value

print xx(45,'test',....,999) 
```

# 选项#2

```
def x(a1,a2,….a100):
    <code>
    return value

def xx(x):
    <code>
    return value

x=x(45,'test',....,999)
print xx(x) 
```

在 #1 中，我必须做很多“打字”来输入要传入 def xx() 的参数，另一方面，#2 更干净，更易于调试。那么你们对这些工作流程有什么看法？工作流#1 有什么优势吗？＃2通常更好吗？你怎么看？选择#1 或#2 的理由是什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T06:09:46.167

`select_color_from_obj`似乎是一个不必要的功能。你可以打电话

```
get_obj().color() 
```

此外，如果`get_obj()`与其他代码在同一范围内，您可以直接使用

```
obj.color() 
```

但是，如果 的定义`obj`出现在不同的文件中，则`get_obj`可能会有用。

# html - rel 值的验证错误

> ID：10400140
> 
> 赞同：0
> 
> 时间：2012-05-01T15:40:19.333
> 
> 标签：html

有什么想法可以解决这个问题吗？

```
Line 58, Column 72: Bad value fancybox2 for attribute rel on
    element a: Keyword fancybox2 is not registered.

…er.jpg" class="grid_1" rel="fancybox2"><img src="images/werk/klein/tubeplayer.…

Syntax of link type valid for <a> and <area>:

A whitespace-separated list of link types listed as allowed
on <a> and <area> in the HTML specification or listed as an
allowed on <a> and <area> on the Microformats wiki without duplicate
keywords in the list. You can register link types on the Microformats
wiki yourself.

    <a href="images/werk/clipta.jpg" class="grid_1" rel="fancybox2">
      <img src="images/werk/klein/clipta.jpg" alt="clipta"/></a> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T15:54:59.033

错误消息很好地解释了它。您正在使用 HTML5 文档类型，这意味着应用了 HTML5 规则，并且它们允许特定的[值](http://www.whatwg.org/specs/web-apps/current-work/multipage/links.html#linkTypes)[列表，`rel`](http://www.whatwg.org/specs/web-apps/current-work/multipage/links.html#linkTypes)但具有基于 wiki 的扩展机制。这意味着`rel`价值规则可能随时更改，恕不另行通知。

你该怎么办？首先，考虑你为什么使用`rel="fancybox2"`. 如果您有充分的理由认为某些软件以一种有用的方式利用了它，请继续使用它并忽略错误消息。如果不是，请删除该属性。

从理论上讲，如果您认为属性值有用且有据可查，您可以并且应该注册该属性值。但这主要应该由那些发明了价值并定义它并推广它并知道它应该如何工作的人来完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T15:45:14.727

rel 只能具有单击此链接时看到的列表中指定的值之一：[w3schools/tags/att_a_rel](http://www.w3schools.com/TAGS/att_a_rel.asp)

首先你想做什么？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T15:55:43.860

您使用的代码似乎滥用该`rel`属性来描述与页面和链接另一端的内容无关的内容。更改它以使用更合适的方式存储信息，可能是一个`class`或一个`data-...`属性。

# audio - 使用 Media 对象在设备上录制和播放音频文件

> ID：10400141
> 
> 赞同：3
> 
> 时间：2012-05-01T15:40:21.227
> 
> 标签：audio, cordova

嗨，我尝试使用 phoneGap Media 对象播放音频内容，但出现此错误 Uncaught ReferenceError:Media is not defined 我从 phonegap 文档[http://docs.phonegap.com/en/获取此代码示例1.0.0/phonegap_media_media.md.html](http://docs.phonegap.com/en/1.0.0/phonegap_media_media.md.html) ![在此处输入图像描述](../Images/a53d8181df8e0c8865c8a295bdba7a4b.png)

我正在使用下面的代码：

```
 <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
                      "http://www.w3.org/TR/html4/strict.dtd">
<html>
  <head>
    <title>Media Example</title>

    <script type="text/javascript" charset="utf-8" src="phonegap-1.4.1.js"></script>
    <script type="text/javascript" charset="utf-8">

    // Wait for PhoneGap to load
    //
    document.addEventListener("deviceready", onDeviceReady, false);

    // PhoneGap is ready
    //
    function onDeviceReady() {
        playAudio("http://audio.ibeat.org/content/p1rj1s/p1rj1s_-_rockGuitar.mp3");
    }

    // Audio player
    //
    var my_media = null;
    var mediaTimer = null;

    // Play audio
    //
    function playAudio(src) {
        // Create Media object from src
        my_media = new Media(src, onSuccess, onError);

        // Play audio
        my_media.play();

        // Update my_media position every second
        if (mediaTimer == null) {
            mediaTimer = setInterval(function() {
                // get my_media position
                my_media.getCurrentPosition(
                    // success callback
                    function(position) {
                        if (position > -1) {
                            setAudioPosition((position) + " sec");
                        }
                    },
                    // error callback
                    function(e) {
                        console.log("Error getting pos=" + e);
                        setAudioPosition("Error: " + e);
                    }
                );
            }, 1000);
        }
    }

    // Pause audio
    // 
    function pauseAudio() {
        if (my_media) {
            my_media.pause();
        }
    }

    // Stop audio
    // 
    function stopAudio() {
        if (my_media) {
            my_media.stop();
        }
        clearInterval(mediaTimer);
        mediaTimer = null;
    }

    // onSuccess Callback
    //
    function onSuccess() {
        console.log("playAudio():Audio Success");
    }

    // onError Callback 
    //
    function onError(error) {
        alert('code: '    + error.code    + '\n' + 
              'message: ' + error.message + '\n');
    }

    // Set audio position
    // 
    function setAudioPosition(position) {
        document.getElementById('audio_position').innerHTML = position;
    }

    </script>
  </head>
  <body>
    <a href="#" class="btn large" 
    onclick="playAudio('http://audio.ibeat.org/content/p1rj1s/p1rj1s_  
    _rockGuitar.mp3');">Play Audio</a>
    <a href="#" class="btn large" onclick="pauseAudio();">Pause Playing Audio</a>
    <a href="#" class="btn large" onclick="stopAudio();">Stop Playing Audio</a>
    <p id="audio_position"></p>
  </body>
</html> 
```

请有任何想法，非常感谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T09:35:47.513

当我在浏览器中打开链接时，您提供的用于播放声音的链接无法正常工作，我无法播放声音。

因此，请将您的 rockGuitar.mp3 存储在您的 assets/www 文件夹中，并在播放该文件时提供该文件的 src 作为

```
src= "/android_asset/www/rockGuitar.mp3";
newMedia= new Media(src,onSuccess1,onError); 
```

或者在声音的 src 中提供工作链接。

# c# - String.Format 与 ToString()

> ID：10400142
> 
> 赞同：16
> 
> 时间：2012-05-01T15:40:22.403
> 
> 标签：c#, tostring, string.format

任何人都可以解释以下任何一种方法是否有任何好处：

```
decimal d = 12.0m;

// 1\. how I'd have done it
myLabel.Text = d.ToString();

// 2\. how I saw someone do it today
myLabel.Text = String.Format("{0}", d); 
```

只是为了澄清一下，我不是在询问这些方法的作用，我显然对此感到满意，只要在这个特定示例中，一个可能比另一个有性能优势。我知道 string.format() 提供的文化和格式的附加灵活性，但我总是只使用 'tostring()' 数字来将它们的值附加到标签或一般基于文本的属性。

对我来说， string.format() 选项似乎在这里输入更多，但没有额外的好处，但我想知道以一种方式与另一种方式做事是否还有其他“幕后”的好处。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-05-01T15:46:40.497

我在 Linqpad 做了一个小基准测试：

```
void Main()
{
    int iterations = 1000000;
    decimal d = 12.0m;
    var text = "";

    var sw = Stopwatch.StartNew();
    for (int i = 0; i < iterations; i++)
    {
        // 1\. how I'd have done it
        text = d.ToString();
    }
    sw.Stop();
    sw.ElapsedMilliseconds.Dump("ToString()");

    sw = Stopwatch.StartNew();
    for (int i = 0; i < iterations; i++)
    {
        // 2\. how I saw someone do it today
        text = String.Format("{0}", d);
    }
    sw.Stop();
    sw.ElapsedMilliseconds.Dump("Format");
} 
```

* * *

第 157 章

格式 264

ToString() 看起来总是更快。

编辑：我应该指出，在我的 PC 上，1000 万次“格式化”操作只用了 2.2 秒。这看起来非常像微优化，除非您所做的事情对性能非常关键或迭代 - 它不会太担心这一点。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-01T15:44:35.537

字符串格式 - 在引擎盖下使用`StringBuilder`- 处理字符串要快得多。

ToString 是对象的默认表示。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-01T15:44:43.500

`string.Format`可用于创建其他复杂的字符串，因为它可以采用`params`参数集；所以这并不是一个真正的苹果VS苹果的问题。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-01T15:44:29.803

`ToString()`更好，因为无论如何都`Format()`需要`ToString()`在引擎盖下调用。如果您需要指定自定义格式，请`Format()`提供格式说明符，如对齐/填充。否则，没有理由不使用`ToString()`.

`ToString()`比 更适合自记录代码`Format()`，而且更有意义。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-01T15:46:15.617

我希望调用会带来边际性能优势，`ToString()`因为它不必解析您的格式字符串。那，如果您不使用`Format()`.

# forms - 在输入按键时避免模态关闭

> ID：10400149
> 
> 赞同：112
> 
> 时间：2012-05-01T15:40:39.030
> 
> 标签：forms, twitter-bootstrap, modal-dialog

我已经设置了一个带有表单的引导模式，我只是注意到当我按下 Enter 键时，模式会被关闭。有没有办法在按 Enter 时不关闭它？

我尝试使用键盘激活模式：false，但这只能防止使用 ESC 键解除。

* * *

## 回答 #1

> 赞同：125
> 
> 时间：2012-05-01T22:07:54.033

我也刚遇到这个问题。
我的问题是我的模态中有一个关闭按钮

```
<button class="close" data-dismiss="modal">&times;</button> 
```

在输入字段中按 enter 会导致此按钮被触发。我改为将其更改为锚点，它现在按预期工作（输入提交表单并且不关闭模式）。

```
<a class="close" data-dismiss="modal">&times;</a> 
```

在没有看到您的消息来源的情况下，我无法确认您的原因是相同的。

* * *

## 回答 #2

> 赞同：82
> 
> 时间：2012-07-21T10:32:16.603

只需将**type="button"**属性添加到按钮元素，一些浏览器默认将类型解释为**提交**。

[https://developer.mozilla.org/en-US/docs/Web/HTML/Element/button#Attributes](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/button#Attributes)

这适用于您在模式中拥有的所有按钮。

```
<button type="button" class="close" data-dismiss="modal">×</button> 
```

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2013-03-06T20:36:37.780

即使从我的引导模式中删除所有按钮后我也遇到了这个问题，所以这里的解决方案都没有帮助我。

我发现如果您在键盘焦点位于文本字段上时按 Enter 键，则具有单个文本字段的表单会导致浏览器执行表单提交（并导致关闭）。这似乎更像是浏览器/表单问题，而不是 Bootstrap 的任何问题。

我的解决方案是将表单的 onsubmit 属性设置为 onsubmit="return false"

如果您实际使用提交事件，这可能是一个问题，但我使用的是生成 AJAX 请求而不是浏览器提交的 JS 框架，所以我更喜欢完全禁用提交。（这也意味着我不必手动调整每个可能触发提交的表单元素）。

此处的更多信息：[具有单个文本输入字段的引导模式对话框始终在 Enter 键上关闭](https://stackoverflow.com/questions/15239236/bootstrap-modal-dialogs-with-a-single-text-input-field-always-dismiss-on-enter-k)

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-05-10T16:08:08.703

您可以将登录按钮放在取消按钮之前，这也可以解决您遇到的问题。

```
<div class="modal-footer">
    <button type="submit" class="btn primary">Login</button>
    <button type="submit" class="btn" data-dismiss="modal">Cancel</button>
</div> 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2014-08-21T07:53:06.433

我有同样的问题，我解决了

```
<form onsubmit="return false;"> 
```

但还有另一种解决方案，您可以添加虚拟不可见输入，因此您的表单如下所示：

```
<form role="form" method="post" action="submitform.php">
    <input type="text" id="name" name="name" >
    <input type="text" style="display: none;">
</form> 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2014-06-07T05:13:02.810

我刚才也有类似的经历，我解决的方法不是使用标签，而是将标签更改为 type="button" 的标签。这似乎解决了按下“回车”键并关闭引导模式的问题。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2014-04-24T11:42:04.453

我也有这个问题，我用这种方式解决了。我在表单中添加了 onsubmit。我还希望能够使用回车键作为保存键，所以我在 onsubmit 中添加了 save_stuff() javascript。返回假；用于防止表单提交。

```
<form onsubmit="save_stuff(); return false;">
 ...
</form>

<script>
    function save_stuff(){
      //Saving stuff
    }
</script> 
```

# sql - 如何使用 case 语句来帮助更改另一个字段？

> ID：10400151
> 
> 赞同：1
> 
> 时间：2012-05-01T15:40:57.810
> 
> 标签：sql, ms-access, case, temp-tables

我在这里有一个非常简单的问题。我正在将一些 Access SQL 脚本转换为 Server Management Studio 2008。

目前，Access 脚本显示以下代码行：

```
IIf([rsosourceID]) IN (254,360,446),"MoneySavingExpert" as SourceName 
```

![示例条目](../Images/ab378622d8ba11ba3da31069c6ad6cb2.png)

基本上它是创建一个有四列的临时表，如果字段匹配说左边的这 3 个数字，那么它将用他们的新名称填充第四列。（用于在以后的报告中进行分组）

如何在 SQL 中做类似的事情？我尝试过使用 Case 语句，但据我所知，这只会改变您正在查看的字段。

在这种情况下，我需要查看一个字段，然后使用它的结果改变另一个字段，有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T15:44:33.507

case 语句可以使用任何其他列的值返回一个新列：

```
SELECT rsoSourceID,
    rsoDescription, 
    rsoCategory,
    case when rsoSourceID in (254,360,446)
        then 'MoneySavingExpert'
        else null end as SourceName
FROM TableName 
```

# ssl - 虚拟主机在哪里可以配置为使用 https？

> ID：10400152
> 
> 赞同：0
> 
> 时间：2012-05-01T15:40:58.850
> 
> 标签：ssl, https, virtualhost, ubuntu-server

我正在尝试在具有许多其他虚拟主机的 ubuntu 服务器上使用 https 设置虚拟主机。

其他虚拟主机都没有明确提及 ssl，并且 apache2.conf 或 httpd.conf 中没有基于特定主机的引用。但是，当我在他们的 url 前面加上 ssl 时，他们会毫无问题地加载。

我的虚拟主机具有完全相同的声明，但是当以 https 为前缀时，它不起作用，而页面似乎只是挂起或不断加载。

如何将这些其他主机配置为使用 ssl？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T17:54:48.063

本文帮助我使用 https 设置虚拟主机以进行测试。这是文章[http://www.codealpha.net/631/name-based-virtual-hosts-with-ssl-using-apache2-on-ubuntu-lucid/](http://www.codealpha.net/631/name-based-virtual-hosts-with-ssl-using-apache2-on-ubuntu-lucid/)

# c# - 从 Excel 内置对话框继承？

> ID：10400155
> 
> 赞同：1
> 
> 时间：2012-05-01T15:41:17.200
> 
> 标签：c#, windows, excel, built-in

我有一个带有 2 个参数的 Excel UDF，我想利用 Excel 内置的 Funciton 参数窗口/对话框，除了标准行为（即您可以选择单元格引用或在文本框中输入参数值），我想第二个参数使用下拉列表，第一个参数具有搜索能力，即当你输入“C”时，它会弹出一个以“C”开头的可用值列表。我想知道是否可以从 Excel 内置对话框继承以及如何继承？

如果不可能，我必须创建自定义表单以使其类似于 Excel 函数参数窗口。我看到[了一个同时表现模态和非模态的窗口](https://stackoverflow.com/questions/2834933/a-window-that-behaves-both-modally-and-non-modally)，也许这就是要走的路？我还没有尝试过，因为我不太明白那里所说的内容。谢谢

# c# - 如何使用 http Web 请求对字符串进行编码？

> ID：10400156
> 
> 赞同：1
> 
> 时间：2012-05-01T15:41:21.797
> 
> 标签：c#, .net, url, url-encoding

我需要将字符串发送到网站并返回结果。

但例如，如果我发送“hello world”，它应该是“hello%world”而不是空格，应该有一个 %

我认为应该有一种方法可以让它自动运行，这样当字符串在这个位置有空格时，它就会知道如何以及何时将这个 % 放在哪里。

例如，我有这个字符串，它是一个站点 url：

```
https://www.googleapis.com/language/translate/v2?key=INSERT-YOUR-KEY&q=hello%20world&source=en&target=de 
```

hello 和 world 之间有一个 %20。我该怎么做 ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-01T15:42:00.460

您可以使用[ParseQueryString](http://msdn.microsoft.com/en-us/library/ms150046.aspx)方法构建正确编码的查询字符串：

```
var values = HttpUtility.ParseQueryString(string.Empty);
values["key"] = "INSERT-YOUR-KEY";
values["q"] = "hello world";
string queryString = values.ToString();
// at this stage queryString="key=INSERT-YOUR-KEY&q=hello+world" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-01T16:13:09.087

您可以使用 HttpUtility.UrlEncode：

`string s = "Hello World";`
`string t = HttpUtility.UrlEncode(s);//t becomes "Hello+World"`

# git - 更新 git repo 名称

> ID：10400158
> 
> 赞同：7
> 
> 时间：2012-05-01T15:41:35.717
> 
> 标签：git

我刚刚更改了我的 github 存储库的名称，现在我的本地存储库（如预期的那样）找不到它。如何更新名称，还是应该将其视为新的远程仓库？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-01T15:43:49.087

从我的阅读方式来看，我的理解是您更改了存储库的名称（更改了它的 URL），现在您想要更新 URL 以匹配新的存储库位置。

您可以使用`git remote set-url <remote-name> <new-url>`切换现有远程存储库的 URL。

# android - 如何确保我的片段的内容视图在提交后可供访问？

> ID：10400162
> 
> 赞同：2
> 
> 时间：2012-05-01T15:41:40.990
> 
> 标签：android, fragment

所以我有一个`AsyncTask`运行登录程序的程序。在运行之前，我打开一个事务并提交一个 DialogFragment 以向用户显示一个进度对话框，其中包含一个 ok 按钮。我想让它**禁用**，仅在/如果登录因某种原因失败并且用户可以单击它并关闭（实际上从堆栈中弹出对话框片段）时启用它。
我只能访问该按钮，以便在解决方法注释之后的代码部分中禁用它。

我试图将该代码放在DialogFragment 的覆盖`onAttach()`和内部，但它总是返回。`onStart()``NullPointerException`

这是我的代码：

```
 class LoginTask extends AsyncTask<String, Integer, String> {
        private DialogFragment  df;

        @Override
        protected void onPreExecute() {
            df = new DialogFragment() {
                public Dialog onCreateDialog(Bundle savedInstanceState) {
                    ProgressDialog pd = new ProgressDialog(LoginActivity.this, ProgressDialog.THEME_HOLO_LIGHT);
                    pd.setIndeterminate(true);
                    pd.setCancelable(false);
                    pd.setMessage(getString(R.string.login_message));
                    pd.setTitle(getString(R.string.login_title));
                    pd.setButton(ProgressDialog.BUTTON_POSITIVE, getString(R.string.ok), new DialogInterface.OnClickListener() {

                        @Override
                        public void onClick(DialogInterface dialog, int which) {
                            getFragmentManager().popBackStack();
                        }
                    });
                    return pd;
                };
            };
            getFragmentManager().beginTransaction().add(df, "LOGIN_DLG_FRAG").commit();
        }

        @Override
        protected String doInBackground(String... params) {
                        // WORKAROUND
            runOnUiThread(new Runnable() {

                @Override
                public void run() {
                    ((ProgressDialog)df.getDialog()).getButton(ProgressDialog.BUTTON_POSITIVE).setEnabled(false);
                }
            });
                         ...
      }
     } 
```

我知道`FragmentTransaction.commit()`操作的计划，所以我想知道如何以正确的方式访问片段的视图组件。

提前致谢。

# gwt - 使用 Gin/Guice 注入实例

> ID：10400163
> 
> 赞同：3
> 
> 时间：2012-05-01T15:41:54.563
> 
> 标签：gwt, dependency-injection, guice, gwt-gin

我的 GWT 项目中通常有这种代码模式：

```
Menu errorMenu = new Menu(user, userController, -1);
Menu  searchMenu = new Menu(user, userController, 0);

errorView.setMenu(errorMenu);
searchView.setMenu(searchMenu); 
```

如何使用 Gin/Guice 在“视图”和其他“视图”`Menu`中注入实例：`ErrorView`

```
public ErrorView implements View {
 // Inject menu instance here
 private Menu menu;
} 
```

这样，我不必手动创建和设置对象？

同样对于`Menu`该类，我如何注入“user”和“userController”对象，这样我就不必在每次实例化时将它传递给每个 Menu 实例。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-02T07:15:54.810

在本教程[http://code.google.com/p/google-gin/wiki/GinTutorial](http://code.google.com/p/google-gin/wiki/GinTutorial)的帮助下，您的问题看起来并不那么困难。您应该运行几个步骤来将菜单实例注入视图。

1.  将@Inject 注解添加到菜单字段。

    ```
    public ErrorView implements View {

      @Inject
      private Menu menu;
    }

    public SearchView implements View {

      @Inject
      private Menu menu;
    } 
    ```

    但在这种情况下，菜单字段在 View 对象初始化期间（在构造函数中）将为空。因此，我更喜欢将此字段添加到构造函数参数中。

    ```
    public ErrorView implements View {

      private final Menu menu;

      @Inject
      public ErrorView(Menu menu) {
        this.menu = menu;
      }
    }

    public SearchView implements View {

      private final Menu menu;

      @Inject
      public SearchView(Menu menu) {
        this.menu = menu;
      }
    } 
    ```

    当然，如果ErrorView的构造函数中有许多其他参数，它就不起作用，因为它们都需要注入。

2.  现在我们必须确保 GIN 知道 ErrorView 中的菜单字段应该被注入，`new Menu(user, userController, -1)`而 SearchView 中的另一个菜单字段应该被注入 - `new Menu(user, userController, 0)`。我们可以通过以下几种方式做到这一点：

    *   添加注释`@Named("searchMenu")`和`@Named("errorMenu")`到您的菜单字段。

        ```
        public ErrorView implements View {

          @Inject
          @Named("errorMenu")
          private Menu menu;
        } 
        ```

        或者

        ```
        public ErrorView implements View {

          private final Menu menu;

          @Inject
          public ErrorView(@Named("errorMenu") Menu menu) {
            this.menu = menu;
          }
        } 
        ```

        在您的 GIN 模块中，您应该提供此注释的定义。

        ```
         public class ApplicationGinModule extends AbstractGinModule {

              protected void configure() {
                bind(Menu.class).annotatedWith(Names.named("errorMenu")).to(DefaultErrorMenu.class);
                bind(Menu.class).annotatedWith(Names.named("searchMenu")).to(DefaultSearchMenu.class);

                //assume that User and UserController classes have default constructors  
                //otherwise you should provide correct injection depending on your business-logic
                bind(User.class).in(Singleton.class); 
                bind(UserController.class).in(Singleton.class);  
              }
            }

            public class DefaultErrorMenu extends Menu {

              @Inject
              public DefaultErrorMenu(User user, UserController userController) {
                super(user, userController, -1);
              }
            }

            public class DefaultSearchMenu extends Menu {

              @Inject
              public DefaultSearchMenu(User user, UserController userController) {
                super(user, userController, 0);
              }
            } 
        ```

    *   创建您自己的注释`@SearchMenu`和`@ErrorMenu`菜单字段，并在您的模块中定义它们。

        注释样本：

        ```
        @Retention(RetentionPolicy.RUNTIME)
        @Target({ElementType.FIELD, ElementType.PARAMETER, ElementType.METHOD, ElementType.TYPE})
        @BindingAnnotation
        public @interface ErrorMenu {
        } 
        ```

        用法：

        ```
        public ErrorView implements View {

          @Inject
          @ErrorMenu
          private Menu menu;
        } 
        ```

        或者

        ```
        public ErrorView implements View {

          private final Menu menu;

          @Inject
          public ErrorView(@ErrorMenu Menu menu) {
            this.menu = menu;
          }
        } 
        ```

        然后按照您定义@Named("ErrorMenu") 的方式定义注释：

        ```
        bind(Menu.class).annotatedWith(ErrorMenu.class).to(DefaultErrorMenu.class); 
        ```

在某些示例中，我将菜单字段设置为最终字段并删除它的设置器，但如果您确实需要菜单的可变状态，您可以将其保持不变。

# python - hgweb 原始视图返回错误的内容类型

> ID：10400164
> 
> 赞同：0
> 
> 时间：2012-05-01T15:41:58.103
> 
> 标签：python, mercurial, content-type, hgweb

背景：我正在使用[https://bitbucket.org/mariocesar/django-hgwebproxy/wiki/Home](https://bitbucket.org/mariocesar/django-hgwebproxy/wiki/Home)将 Mercurial 浏览器添加到我正在构建的 Django 站点。

我遇到的问题是：我们存储在 HG 存储库中的特定文件是绑定区域文件，并且恰好被命名`/some/path/somedomain.com`，这导致 hgweb在返回原始文件时将内容类型设置为`application/x-msdos-program`（当内容真的是）`text/plain`文件的视图。不正确的内容类型导致 hgwebproxy 将内容转储到页面模板中，而不是仅仅返回它。它会进行这样的测试以跳过模板：

```
if response['content-type'].split(';')[0] in ('application/octet-stream', 'text/plain'):
    return response 
```

一些可能的解决方案当然是

1.  将所有文件重命名为 .zone （蹩脚且耗时）
2.  破解 hgwebproxy 以通过`application/x-msdos-program`（蹩脚和肮脏）
3.  说服 hgweb 使用正确的内容类型（太棒了！我希望你能帮忙）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T19:29:47.510

hgweb 使用 mimetypes 来检测文件的 mime 类型。您可以通过添加设置文件来覆盖“.com”后缀检测。请参阅：[mimetypes.knownfiles](http://docs.python.org/library/mimetypes.html#mimetypes.knownfiles)：

```
>>> import mimetypes
>>> mimetypes.init()
>>> mimetypes.knownfiles
['/etc/mime.types', '/etc/httpd/mime.types', '/etc/httpd/conf/mime.types', '/etc/apache/mime.types', '/etc/apache2/mime.types', '/usr/local/etc/httpd/conf/mime.types', '/usr/local/lib/netscape/mime.types', '/usr/local/etc/httpd/conf/mime.types', '/usr/local/etc/mime.types'] 
```

# php - 将地址转换为纬度/经度（使用 php）

> ID：10400169
> 
> 赞同：1
> 
> 时间：2012-05-01T15:42:03.493
> 
> 标签：php, json, web-services, maps

我想用 PHP 解析这个 URL 以获得特定地址的纬度（2+bis+avenue+Foch75116+Paris+FR）：

我使用谷歌地图网络服务：[http ://maps.googleapis.com/maps/api/geocode/json?address=2+bis+avenue+Foch75116+Paris+FR&sensor=false](http://maps.googleapis.com/maps/api/geocode/json?address=2+bis+avenue+Foch75116+Paris+FR&sensor=false)

```
// Get the JSON 
$url='http://maps.googleapis.com/maps/api/geocode/json?address=2+bis+avenue+Foch75116+Paris+FR&sensor=false';
$source = file_get_contents($url);
$obj = json_decode($source);
var_dump($obj); 
```

它不起作用。我有这个错误：

OVER_QUERY_LIMIT

所以我在网上搜索，发现使用 google maps api 存在限制（2 个查询之间最少 1 秒，每天最多 2500 个查询）

您知道将地址转换为-->纬度/经度的任何方法吗？？？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-01T15:47:23.673

您访问`results`不正确。

```
// Get the JSON 
$url='http://maps.googleapis.com/maps/api/geocode/json?address=2+bis+avenue+Foch75116+Paris+FR&sensor=false';
$source = file_get_contents($url);
$obj = json_decode($source);
$LATITUDE = $obj->results[0]->geometry->location->lat;
echo $LATITUDE; 
```

# jquery - 如何使用 jQuery UI 为 div 元素内的文本闪烁颜色变化？

> ID：10400172
> 
> 赞同：1
> 
> 时间：2012-05-01T15:42:16.667
> 
> 标签：jquery, jquery-ui

我需要闪烁性别和评论的颜色变化（闪烁红色并再次变回原来的颜色）

```
 var dataDIV = $("<div id="+dataDivId+" class=\"data\"></div>");
  $("#data").append(dataDIV);
  var divData= $(
   "<h3 class=\"name\">"+person.name+"</h3>"+
   "<h2 class=\"gender\">"+person.gender+"</h2>"+
   "<p class=\"comment\">("+person.comment+")</p>"
   );   
  $("#"+dataDivId).html(divData); 
```

我试图这样做：

```
 $(divData).effect("highlight", {color:"#FF0000"}, 1500); 
```

但它会对整个 divData 应用闪光效果，而不是 h2 和 p 元素。有什么办法可以只针对性别和评论吗？

我也不希望这种情况发生在其他具有此 divData 元素的 div 单元中（不闪烁其他人对象，只是正在更改的那个）

我试图将 ""+person.gender+"" 作为一个单独的变量提取出来并对其应用效果，但这也不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T15:50:54.550

如果我理解正确，您需要以下内容，

```
$('.gender, .comment', $('#' + dataDivId)).effect("highlight", {
   color: "#FF0000"
}, 1500); 
```

[**演示**](http://jsfiddle.net/kG8qJ/4/)点击添加按钮。

# c# - 结构为字节数组？

> ID：10400178
> 
> 赞同：1
> 
> 时间：2012-05-01T15:42:30.800
> 
> 标签：c#, arrays, struct, copy

> **可能重复：**
> [如何在 C# 中将结构转换为字节数组？](https://stackoverflow.com/questions/3278827/how-to-convert-structure-to-byte-array-in-c)

所以我来自 C++，将结构/类转换为数组，反之亦然，简单明了。我喜欢 C# 和 .Net 框架，但是我注意到像这样的事情很难完成并且令人讨厌。

所以我有一个带有浮点数的结构。我需要将它们传输到字节数组。目前，我将结构“包装”在一个类中，并通过属性公开成员。但是我发现将这个结构复制到一个数组是很困难的。我知道 C# 中的“不安全”代码和指针通常是一个很大的禁忌，应该避免，但是这样做会被认为是一种糟糕的编程习惯吗？

```
public class LevelOfDetail {
    private LODDataStruct data;

    public float Scale {
        get {
            return data.Scale;
        }
        set {
            data.Scale = value;
        }
    }

    public float Brightness {
        get {
            return data.Brightness;
        }
        set {
            data.Brightness = value;
        }
    }

    public float Sway {
        get {
            return data.Sway;
        }
        set {
            data.Sway = value;
        }
    }

    public float Detail {
        get {
            return data.Detail;
        }
        set {
            data.Detail = value;
        }
    }

    public float Distance {
        get {
            return data.Distance;
        }
        set {
            data.Distance = value;
        }
    }

    public unsafe void CopyTo(void* dest) {
        *((LODDataStruct*)dest) = data;
    }

    public unsafe void CopyFrom(void* src) {
        data = *((LODDataStruct*)src);
    }

    private struct LODDataStruct {
        public float Scale;
        public float Brightness;
        public float Sway;
        public float Detail;
        public float Distance;
    };
}; 
```

这是做这件事的坏方法吗？我喜欢它，因为它需要一行代码来复制，而且它可能比从每个浮点数中获取单个字节并逐个复制要快一点。

有一个更好的方法吗？

# javascript - 如何使用 jquery 或 javascript 检查页面是否正在重新加载或刷新？

> ID：10400182
> 
> 赞同：16
> 
> 时间：2012-05-01T15:43:07.020
> 
> 标签：javascript, jquery

我必须对页面刷新或重新加载进行某种操作。那是当我点击下一页或过滤或刷新网格时。我需要在此事件上显示一些确认框。

是否有任何事件可以告诉您页面正在执行文件管理？刷新还是分页？使用 javascript？

谢谢

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-01T15:46:25.247

如果是清爽的，`window.onunload`就会火。

```
// From MDN
window.onunload = unloadPage;
function unloadPage()
{
    alert("unload event detected!");
} 
```

[https://developer.mozilla.org/en/DOM/window.onunload](https://developer.mozilla.org/en/DOM/window.onunload)

如果您只想要一个确认框以允许他们留下，请使用：

```
window.onbeforeunload = function() {
    return "Are you sure you want to navigate away?";
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-30T09:49:05.547

您可以创建一个隐藏字段并在第一页加载时设置其值。再次加载页面时，您可以检查隐藏字段。如果它是空的，那么页面是第一次加载，否则它会被刷新。像这样的一些事情：

*HTML*

```
<body onLoad="CheckPageLoad();">

    <input type="hidden" name="visit" id="visit" value="" />

</body> 
```

*JS*

```
function CheckPageLoad() {
    if (document.getElementById("visit").value == "") {
        // This is a fresh page load
        document.getElementById("visit").value = "1";
    }
    else {
        // This is a page refresh
    }
}​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-20T15:45:42.583

我认为有一些关于解决这个问题的澄清说明很重要。

首先，刷新/隐藏字段系统在新页面副本的开头和之后工作，而不是在离开第一个页面副本时工作。

根据我对这种方法和其他一些方法的研究，主要由于隐私标准，无法在卸载期间或更早检测到页面刷新。仅在新页面加载后及以后。

我有一个类似的问题请求，但基本上它是在页面退出时终止会话，并且在查看时发现浏览器将重新加载/刷新视为两个不同的部分：

1.  关闭当前窗口（触发 onbeforeunload 和 onunload js 事件）。
2.  请求该页面，就好像您从未拥有它一样。服务器上的会话当然没有问题，但是没有查询字符串更改/添加到页面最后使用的 url 的值。

这些也以这种顺序发生。只有自定义或非标准浏览器的行为会有所不同。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-02-02T08:50:33.503

```
$(function () {
    if (performance.navigation.type == 1) {
        yourFunction();
    }
}); 
```

更多关于[`PerformanceNavigation`](https://developer.mozilla.org/en-US/docs/Web/API/PerformanceNavigation)返回的对象`performance.navigation`

# jndi - ejb-jar.xml 中缺少数据源

> ID：10400183
> 
> 赞同：1
> 
> 时间：2012-05-01T15:43:07.903
> 
> 标签：jndi, websphere-6.1

如果我在 WAS 上部署 EAR 并且 EAR 缺少 ejb-jar.xml 中描述的 EJB，它会在部署时报错。但是，如果我在 ejb-jar.xml 中为 jndi 数据源定义了一个资源引用，它不会抱怨，除非我执行一个实际尝试查找数据源的测试用例。

是否有可以调整的配置，以便在部署 EAR 时，如果没有在服务器上创建任何资源引用，它会抱怨？所以我立即知道缺少一些资源引用

# visual-studio - Nuget“已经有参考”

> ID：10400189
> 
> 赞同：14
> 
> 时间：2012-05-01T15:43:37.357
> 
> 标签：visual-studio, nuget

Tests.Functional 从`Default project:`下拉列表中选择。

```
PM> install-package nunit
'NUnit 2.6.0.12054' already installed.
Tests.Functional already has a reference to 'NUnit 2.6.0.12054'. 
```

然而 Nunit 并没有出现在解决方案资源管理器的 Tests.Functional 参考中。尝试重新加载 VS.Net (2010) 并更新 Nuget。

我错过了什么吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-30T17:03:51.007

在 TFS 下运行解决方案时，请确保签出 $(SolutionDir)\Packages\repositories.config 文件以进行编辑。

尝试以下操作：

```
Uninstall-Package NUnit -Force 
```

验证 Tests.Functional.csproj 文件（使用记事本）不再有任何对 NUnit 的引用（如果仍然有，请手动删除它们，项目文件可能以某种方式损坏）。

然后运行以下命令：

```
Install-Package NUnit 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T22:13:55.403

在查看实体框架代码时，我在尝试下载 xunit 框架时遇到了类似的问题。我通过选择要安装到 xunit 的项目来解决这个问题，该项目还没有引用，然后只是进入管理并删除了对实际上不需要它的项目的引用。

似乎当一个项目引用它没有的程序集时，nuget 会看到该引用并认为它不需要该程序集，即使它确实需要。只需通过 nuget 将程序集添加到另一个项目即可解决问题。不是最优雅的解决方案，但它有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-24T18:18:15.807

在包管理器控制台中尝试以下操作：

```
Uninstall-Package NUnit -Force 
```

然后，进入您的项目目录并手动从您的 packages.config 和 .csproject 文件中删除 NUnit 引用（如果有）。

现在您可以使用以下方法简单地安装：

```
Install-Package NUnit 
```

# ios - 使用私钥/公钥的 SVN 存储库的 Xcode 4 版本控制

> ID：10400190
> 
> 赞同：1
> 
> 时间：2012-05-01T15:43:41.730
> 
> 标签：ios, xcode, svn, private-key

我只是想知道是否可以使用带有私钥的 svn+ssh 协议使用 Xcode 的版本控制连接到 SVN 存储库。如果是的话，谁能给我一些教程。
非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T16:26:27.857

这可能会有所帮助

[SVN+SSH，不用每次都做 ssh-add 吗？（苹果系统）](https://stackoverflow.com/questions/1909651/)

您的 ssh 密钥目前是否有效？如果是这样，根据上述问题尝试从命令行输入“svn-add”，并输入所需的任何密码短语。如果这一切都很好。

# javascript - 需要将参数和事件信息传递到javascript函数中

> ID：10400192
> 
> 赞同：0
> 
> 时间：2012-05-01T15:43:43.990
> 
> 标签：javascript, javascript-events

下面列出的是我的 javascript 函数。该功能在 IE 上运行良好，但由于包含 window.event 部分而无法在 Firefox 上运行。要做到这一点，它可以在 IE 以外的其他浏览器中工作的方法是在函数头的参数列表中使用参数 e（或其他未定义的东西）。如果已经有另一个参数，如何将事件添加到参数中？下面还列出了从应用程序到函数的示例调用。再次感谢。

```
function entityclick(where) {
    try {
        var tempstring = new String(window.event.srcElement.id)
    }
    catch (oExp) {
        var tempstring = new String("noclickyclicky")
    }
    tempstring = tempstring.substr(0, 3)
    if (tempstring != "img") {
        if (selectedentity != "") {
            try {
                document.getElementById('tbl' + selectedentity).style.backgroundColor = ""
            }
            catch (oExc) {
            }
        }
        selectedentity = where.EntityID + where.EntityCat;
        var EntityID = where.EntityID
        var EntityCat = where.EntityCat
        var ParentEntityID = where.ParentEntityID
        var ParentEntityCat = where.ParentEntityCat
        var projtype = 0
        document.getElementById('tbl' + selectedentity).style.backgroundColor = "lightsteelblue"
        //document.all('tbl'+selectedentity).className = "HighlightMe"
        ifram = document.getElementById('detailframe')
        if (0 == 0) {
            if (EntityCat == 35)
                ifram.src = "../teams/Viewteam.aspx?taskgrpid=" + EntityID + "&taskgrpcategory=" + EntityCat + "&ptaskgrpid=" + ParentEntityID + "&ptaskgrpcategory=" + ParentEntityCat + "&taskgrptype=" + GLOBALTASKGRPTYPE;
            else if (EntityCat == 26)
                ifram.src = "../teams/Viewteam.aspx?taskgrpid=" + EntityID + "&taskgrpcategory=" + EntityCat + "&ptaskgrpid=" + ParentEntityID + "&ptaskgrpcategory=" + ParentEntityCat + "&taskgrptype=" + GLOBALTASKGRPTYPE;
            else if (EntityCat == 34)
                ifram.src = "../teams/Viewteam.aspx?taskgrpid=" + EntityID + "&taskgrpcategory=" + EntityCat + "&ptaskgrpid=" + ParentEntityID + "&ptaskgrpcategory=" + ParentEntityCat + "&taskgrptype=" + GLOBALTASKGRPTYPE;
            else if (EntityCat == 10)
                ifram.src = "../solutions/ViewSolution.aspx?taskgrpid=" + EntityID + "&taskgrpcategory=" + EntityCat + "&ptaskgrpid=" + ParentEntityID + "&ptaskgrpcategory=" + ParentEntityCat + "&taskgrptype=" + GLOBALTASKGRPTYPE;
            else if (EntityCat == 11)
                ifram.src = "../observations/ViewObservation.aspx?taskgrpid=" + EntityID + "&taskgrpcategory=" + EntityCat + "&ptaskgrpid=" + ParentEntityID + "&ptaskgrpcategory=" + ParentEntityCat;
            else if (EntityCat == 12)
                ifram.src = "../actions/ViewAction.aspx?taskgrpid=" + EntityID + "&taskgrpcategory=" + EntityCat + "&ptaskgrpid=" + ParentEntityID + "&ptaskgrpcategory=" + ParentEntityCat;
            else if (EntityCat == 13)
                ifram.src = "../tasks/ViewTask.aspx?taskgrpid=" + EntityID + "&taskgrpcategory=" + EntityCat + "&ptaskgrpid=" + ParentEntityID + "&ptaskgrpcategory=" + ParentEntityCat;
            ifram.style.left = '27%'
            ifram.style.display = 'block'
            //detail.style.display = 'none'
            ifram.style.zIndex = 5
        }
    }
} 
```

这是对函数的调用

```
entityclick(document.getElementById('tbl' + glbRefreshID + glbRefreshCAT)) 
```

编辑：在某些地方也以其他方式调用 entityclick，例如

```
entityclick(this) 
```

或者

```
entityclick(document.getElementById('tbl' + GlobalExplodeID + GlobalExplodeCat)) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T15:53:33.300

使用额外的函数作为事件处理程序。例如

```
function handler(e) {
    if (!e)
        e = window.event;
    entityclick(e.target, e); // have more than one parameter in your fn
}
var elem = document.getElementById("xyz");
if (elem.addEventHandler)
    elem.addEventHanlder("click", handler, false);
else
    elem.attachEvent("onclick", handler);

function entityclick(elem, e) {
/* get: a DOM node with special properties[, an Event object] */
     if (e)
          // we handle something
     else
          // we have to use defaults
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T14:44:37.967

能够使用这篇文章的提示来解决

[http://www.sitepoint.com/forums/showthread.php?330837-window-event-is-not-working-in-Firefox](http://www.sitepoint.com/forums/showthread.php?330837-window-event-is-not-working-in-Firefox)

可以将事件和 this 传递给同一个函数，这样我仍然可以得到我需要的每一个项目。感谢所有查看/帮助的人。

# c++ - 使用“系统”命令从 Matlab 调用（cpp）“App.exe”

> ID：10400196
> 
> 赞同：2
> 
> 时间：2012-05-01T15:43:58.307
> 
> 标签：c++, matlab, command-line, cmd

我正在尝试从 matlab 调用“App.exe”文件（用 cpp 编写），该文件将视频名称（字符串）作为输入

我想使用执行操作系统命令并将结果返回给 Matlab 的函数“系统”。

我在 Matlab 中写了以下内容：

```
 system ('App.exe <'  VideoName); 
```

以及 Cpp 中的以下内容：

```
 // to get the name of the video (the input) from the command.
 std::string str;
 getline(cin, str);
 const char * name = str.c_str(); 
```

但它不起作用。所以我的问题是：我们如何使用输入从 matlab（甚至 cmd）调用“App.exe”。我应该怎么做才能完成这项工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T15:50:04.900

我不熟悉matlab语法，但你可能应该尝试将整个路径放到App.exe。很可能Matlab的工作目录与App.exe所在的目录不同。或者，你可以添加目录App.exe 在您的 PATH 环境变量中（并在执行此操作后重新启动 matlab 以确保它获得新值）。

# trigger.io - 如何使用 Trigger.io 在 iOS 中播放背景音频？

> ID：10400201
> 
> 赞同：4
> 
> 时间：2012-05-01T15:44:18.463
> 
> 标签：trigger.io

我正在尝试使用 Trigger.io 的框架构建流式音频应用程序。

看到它的 API 目前没有任何与音频相关的方法，我用基本的 HTML5`audio`标签对其进行了测试。在这种情况下，流式 MP3 和 AAC 可以工作，但在应用程序处于后台时不起作用，即使在 iOS 5 中也是如此，这通常允许在 Web 应用程序中使用背景音频。

Trigger.io 应用程序中是否有任何背景音频？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T16:01:20.487

**2013 年 4 月更新：**我们在 v1.4.39 平台上添加了原生音频播放 API：http: [//docs.trigger.io/en/v1.4/modules/media.html#createaudioplayer](http://docs.trigger.io/en/v1.4/modules/media.html#createaudioplayer)

使用此 API，当用户从应用程序更改焦点时，音频将继续播放。

* * *

**原答案：**

触发器尚不支持背景音频播放。

设备制造商（正确！）对能够作为后台服务进行工作设置了一些限制：我们尚未将 JavaScript 中的启动和控制播放与实际*执行*播放的非 JavaScript 代码链接在一起。

但是，它在我们的路线图上：目前计划于 2012 年 5 月完成。

# spring-security - 密码加解密 Spring security

> ID：10400205
> 
> 赞同：1
> 
> 时间：2012-05-01T15:44:27.693
> 
> 标签：spring-security, encryption

我正在使用 MD5 加密我的网页中的安全性，我使用以下代码。

```
public static String stringToMD5(String password)
    {

        MessageDigest messageDigest;

        try {
            messageDigest = MessageDigest.getInstance("MD5");
            messageDigest.update(password.getBytes(),0, password.length());  
            String hashedPass = new BigInteger(1,messageDigest.digest()).toString(16);  
            if (hashedPass.length() < 32) {
               hashedPass = "0" + hashedPass; 
            }
            return hashedPass;
        } catch (NoSuchAlgorithmException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }  
        return password;
    } 
```

但是因为一种自定义的登录方式，我必须开发一个自定义的 AbstractAuthenticationProcessingFilter，现在我必须解密那个 MD5。

所以问题是如何解密该函数产生的。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T15:58:03.750

MD5 是一种单向算法。这不是一对一的映射。无法解密其输出。

使用存储的 MD5 加密密码时，您必须通过加密用户的输入并将结果与​​存储的加密密码进行比较来验证用户。

# performance - 具有大 UIImageView 的自定义 UITableViewCell 导致滚动滞后

> ID：10400209
> 
> 赞同：10
> 
> 时间：2012-05-01T15:44:34.850
> 
> 标签：performance, uitableview, uiimageview, uiimage

我有一个由 UIImageView 和 UILabel 组成的自定义 UITableViewCell。单元格为 320x104px，imageView 占据了整个区域，标签位于前面。只有8个细胞。

在 ViewDidLoad 中，我预先创建了所有需要的图像，并将它们缓存在正确尺寸的字典中。

当我滚动 UITableView 时，每次遇到新单元格时都会出现明显的滞后。这对我来说毫无意义，因为它使用的图像已经创建和缓存。我对单元格的要求只是让它的 UIImageView 呈现图像。

我在 xib 中使用其视图的自定义单元格并配置我的 UITableView 以使用它：

[self.tableView registerNib:[UINib nibWithNibName:@"ActsCell" bundle:nil] forCellReuseIdentifier:myIdentifier];

单元创建和配置：

```
- (UITableViewCell *)tableView:(UITableView *)tableView 
         cellForRowAtIndexPath:(NSIndexPath *)indexPath 
{  
    NSString* reuseIdentifier = @"ActsCell";
    ActsCell* cell = [tableView dequeueReusableCellWithIdentifier:reuseIdentifier];
    // Configure the cell...
    [self configureCell:cell atIndexPath:indexPath];
    return cell;
}

- (void)configureCell:(ActsCell *)cell atIndexPath:(NSIndexPath *)indexPath 
{
    Act* act = [self.acts objectAtIndex:indexPath.row];
    cell.selectionStyle = UITableViewCellSelectionStyleNone;
    cell.title.text = act.name;
    cell.imageView.image = [self.imageCache objectForKey:act.uid];
} 
```

什么可能导致滞后？尝试做任何异步操作似乎没有任何好处，因为所有耗时的工作都已完成。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-05-19T11:17:15.040

您是否有机会从本地文件加载图像？

通过使用 Instruments，我发现其中有一些延迟加载机制`UIImage`- 仅在主线程上渲染它的阶段才从 PNG 解压缩真实图像数据，这会导致滚动期间的延迟。

因此，在加载`UIImage`with`-initWithContentsOfFile:`方法之后，我添加了代码以将此图像的内容渲染到屏幕外上下文，将该上下文保存为新上下文`UIImage`并将其用于`UIImageView`in `UITableViewCell`，这使滚动再次变得平滑且令人赏心悦目。

在参考的情况下，我使用简单的代码来强制在单独的线程中读取图像内容（使用 ARC）：

```
UIImage *productImage = [[UIImage alloc] initWithContentsOfFile:path];

CGSize imageSize = productImage.size;
UIGraphicsBeginImageContext(imageSize);
[productImage drawInRect:CGRectMake(0, 0, imageSize.width, imageSize.height)];
productImage = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext(); 
```

而且我认为`UIImage`以这种方式创建的表面将采用适合渲染的支持格式，这也将减轻在主线程上渲染它所需的工作。

编辑：文档`UIGraphicsGetImageFromCurrentImageContext()`说它应该只在主线程中使用，但在网络或 SO 上搜索表明从 iOS 4 开始，这些`UIGraphics..`方法变得线程安全。

# c# - 使用 LINQ 从配置文件中读取键值对

> ID：10400213
> 
> 赞同：0
> 
> 时间：2012-05-01T15:44:42.447
> 
> 标签：c#, linq, dictionary

我有一个包含一些密钥对值的文件

```
key1 = value1
key2 = value2

[section name]
key3 = value3
key4 = value4 
```

所以我不关心部分名称，因为键是唯一的。我只想获取输入键的值。我有以下内容可以阅读。

```
 var userDataLines = File.ReadAllLines(pathToFile); 
```

我有这样的东西

```
 var result = userDataLines.Select(userDataLine => userDataLine.Split(new[] { '=' }))
                           .Where(split => split.Length == 2); 
```

给我一个集合中的所有键值对。

但基本上我想从我的文件中获取一个包含键和值的字典，但不知道该怎么做。任何人都可以向我指出正确的方向吗？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-01T15:47:15.943

您可以使用[ToDictionary 扩展方法](http://msdn.microsoft.com/en-us/library/bb548657.aspx)，如下所示：

```
var result = File.ReadLines(pathToFile)
                 .Select(line => line.Split(new[] { '=' }, 2))
                 .Where(split => split.Length == 2)
                 .ToDictionary(split => split[0], split => split[1]); 
```

（小改进：使用[ReadLines](http://msdn.microsoft.com/en-us/library/dd383503.aspx)代替[ReadAllLines](http://msdn.microsoft.com/en-us/library/s2tte0y1.aspx)，并将每行最多分成[2 个部分](http://msdn.microsoft.com/en-us/library/c1bs0eda.aspx)。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-01T15:47:15.083

有一个 LINQ 扩展方法：

```
var result = userDataLines.Select(userDataLine => userDataLine.Split(new[] { '=' }))
                           .Where(split => split.Length == 2)
                           .ToDictionary(split => split[0], split => split[1]); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T15:49:01.847

您可以使用`ToDictionary`扩展方法并告诉它哪个元素是键，哪个是值：

```
var dictionary = userDataLines.Select(x => x.Split(new[] { '=' }))
                    .Where(x => x.Length == 2)
                    .ToDictionary(x => x[0], x => x[1]); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-01T15:49:57.903

```
var result = (from a in userDataLines
              let pairs = a.Split('=')
              where !string.IsNullOrEmpty(a) && !a.Trim().StartsWith("[")
              select new { Key = pairs[0].Trim(), Value = pairs[1].Trim() }); 
```

我发现 Linq 更容易阅读，而且我不知道 ToDictionary 方法！

# javascript - 刷新父页面改为刷新子页面，Salesforce

> ID：10400218
> 
> 赞同：0
> 
> 时间：2012-05-01T15:44:55.123
> 
> 标签：javascript, salesforce, apex-code

我在salesforce的页面上有一个自定义按钮，这个按钮触发了一个js代码

```
 window.open("{!$Label.SF_Base_URL}/apex/DeletePageiFrame",300,300); 
```

DeletePageiFrame 是一个顶点页面，它有一个 iframe（用于外部网站）和一个应该在单击时刷新父窗口的按钮。

```
<form>
<INPUT TYPE="button" NAME="myButton" onclick="handleOnClose();" value="press to close"/>
</form>

 //the js function
function handleOnClose() 
 {
    alert(window.parent.location); // this gives child window location instead
   window.parent.location.reload();  //refreshes child not parent  
//  window.top.location.reload();

// all the functions bellow didnt work.
 //  window.opener.location.reload(true);
  // window.opener.location.reload(false);   
   //  opener.location.reload();
   //  opener.reload();
    // window.opener.location.reload();
    // document.opener.document.location.href = document.opener.document.location.href;

 } 
```

我还尝试触发窗口关闭事件以调用父窗口刷新，但我遇到了 chrome 问题，并且子窗口被刷新而不是父窗口。

```
<script> window.onBeforeUnload=handleOnClose();</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T19:13:32.577

问题是因为我的帐户启用了开发模式。如果您启用了它并且发现发生了一些奇怪的事情，请禁用它并重试。目前开发模式存在一些问题。

# c++ - 带有 props 文件路径的 Visual Studio 宏

> ID：10400222
> 
> 赞同：7
> 
> 时间：2012-05-01T15:45:18.113
> 
> 标签：c++, visual-studio-2010, msbuild

**简短的问题：**

我希望能够将道具文件的路径用作道具文件内部的宏（例如将项目目录引用为的能力`$(ProjectDir)`）

**长问题**

我使用道具文件来添加对各种 3rd 方库的引用。

如果我可以指定第 3 方库的绝对路径，这很简单。

但是，我想指定一个相对路径——因为不同的团队成员对源代码管理树使用不同的位置。有没有一种方法可以将这样的相对路径添加到 props 文件中？

指定相对于项目目录的路径也不是一个好的解决方案，因为项目的位置不是固定的（所以对于一个项目我需要`$(SolutionDir)\..\XXXX`，而对于另一个我需要 `$(SolutionDir)\..\..\XXXX`

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-10-11T11:04:59.830

解决方案是：（[`$(MSBuildThisFileFullPath)`或者，更确切地说`$(MSBuildThisFileDirectory)`）](http://msdn.microsoft.com/en-us/library/vstudio/ms164309.aspx)。[[（此处](https://stackoverflow.com/a/14797425/321013)][顺便提及。）]

如果在属性表文件 ( `.props`) 中使用它，它将引用此属性文件/目录本身。（注意：在`.vcxproj`关卡上使用时，会引用项目文件/目录。

用 VS2013 RC 和 VS2010 测试。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-10T14:20:25.307

@John Dibling：对于任何在并发分支上工作的团队来说，这都是一个糟糕的解决方案；你必须一直切换你的环境，或者在每个分支上本地编辑 .props 文件。当您不断切换分支时，这很痛苦。

不幸的是，我似乎无法找到更好的解决方案。在我看来，顶级 .props 定义了一个用户宏，如 PROJECT_ROOT（定义为 '../../'），然后其他 .props 文件继承并使用该宏。这样，您可以在多个不同的相对路径中与解决方案共享一个 .props 文件。不幸的是，看起来用户宏没有在 .props 文件中继承。

必须有一个真正的解决方案，它不涉及在给定跨多个分支的静态目录结构的情况下本地配置构建环境。

编辑：

看起来我真的找到了解决方案。基本上你有一个 relativepath.props 文件，它用你的相对路径定义一个用户宏，另一个使用该宏的所有路径的 props 文件，然后你实际导入到 vcxproj 的文件看起来像这样，包括两个属性表. 这是我可以让它在其他文件中使用一个文件中的宏的唯一方法。

那么不同相对路径下的不同解决方案可以使用不同的路径，而属性只在realprops.props中定义一次。

```
 <ImportGroup Label="PropertySheets">
      <Import Project="relativepath.props" />
      <Import Project="realprops.props" />
    </ImportGroup> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-01T16:35:14.513

我建议你有利益冲突：

1.  提供一个所有开发者都使用的 props 文件，并消除开发者限定`#include`路径的需要
2.  允许所有开发人员指定这些`#include`路径的根位置。

这不是您要寻找的答案，但我建议您采取不同的方法。

想到两个：

1.  让每个开发人员在文件中定义构建时宏`Microsoft.Cpp.x64.user`，例如`$(MY_PROJECT_ROOT)`，并在签入的 props 文件中指定与这些宏相关的目录。

2.  在签入的 props 文件中使用绝对路径，但将该绝对路径设为连接点，例如`X:\`. 每个开发人员都会定义`X:\`指向的位置。

2 号的优点是可以更轻松地在中继之间切换。也许说你应用程序的 1.0 版本是你应用程序的 Beta 2.0。您可以在两者中使用相同的道具文件；当从一个主干移动到另一个主干时，开发人员只需运行一个批处理文件来切换连接点。

但是，1 号具有完全包含在 IDE 中的解决方案的优势。

# xml - 解决 XBRL 链接库中的禁止和覆盖问题

> ID：10400228
> 
> 赞同：1
> 
> 时间：2012-05-01T15:45:43.907
> 
> 标签：xml, xsd, xbrl

我为 XBRL 开发了一个解析器。我对最近解析的分类法中的禁止和覆盖规则有疑问：

我在实现解析器时参考了 XBRL 2.1 规范。现在，我缺少一些标签，不知道分类法或我的代码是否无效。

以下是分隔在两个文件中的一些标签弧的示例代码：

```
File 1: <labelArc xlink:from="de-gaap-ci_is.netIncome.regular.operatingTC.otherCost.leaseFix.other"
            xlink:to="extlabel_de-gaap-ci_is.netIncome.regular.operatingTC.otherCost.leaseFix.other"
            priority="1"
            use="prohibited"
            xlink:arcrole="http://www.xbrl.org/2003/arcrole/concept-label"
            xlink:type="arc"/>
<labelArc xlink:from="de-gaap-ci_is.netIncome.regular.operatingTC.otherCost.leaseFix.other"
                xlink:to="label_de-gaap-ci_is.netIncome.regular.operatingTC.otherCost.leaseFix.other"
                xlink:arcrole="http://www.xbrl.org/2003/arcrole/concept-label"
                xlink:type="arc"/>
<label xlink:label="label_de-gaap-ci_is.netIncome.regular.operatingTC.otherCost.leaseFix.other"
             id="label_de-gaap-ci_is.netIncome.regular.operatingTC.otherCost.leaseFix.other"
             xlink:role="http://www.xbrl.org/2003/role/label"
             xlink:type="resource"
             xml:lang="de">Übrige / nicht zuordenbare Miete und Pacht für unbewegliche Wirtschaftsgüter</label>## Heading ##
File 2: <labelArc xlink:from="de-gaap-ci_is.netIncome.regular.operatingTC.otherCost.leaseFix.other"
                xlink:to="label_de-gaap-ci_is.netIncome.regular.operatingTC.otherCost.leaseFix.other"
                priority="0"
                use="optional"
                xlink:arcrole="http://www.xbrl.org/2003/arcrole/concept-label"
                xlink:type="arc"/>
<label xlink:label="label_de-gaap-ci_is.netIncome.regular.operatingTC.otherCost.leaseFix.other"
             id="label_de-gaap-ci_is.netIncome.regular.operatingTC.otherCost.leaseFix.other"
             xlink:role="http://www.xbrl.org/2003/role/label"
             xlink:type="resource"
             xml:lang="de">Übrige Miete und Pacht für unbewegliche Wirtschaftsgüter</label> 
```

我的解析器说这个概念`de-gaap-ci_is.netIncome.regular.operatingTC.otherCost.leaseFix.other`没有标签，因为：

*   该标签对应有3条弧线
*   两条弧线引入了一个优先级为 0 的实际标签并具有属性`use="optional"`集
*   第一条弧是禁止弧，因为它具有属性`use="prohibited"`集
*   禁止弧的优先级为 1，因此所有优先级低于 1 的弧都被排除在网络之外，这就是其他两个标签被踢出的原因

这是我的问题：第一个 acr 的 XBRL 定位器指向最后一个标签。表示`href`属性是`file#label_de-gaap-ci_is.netIncome.regular.operatingTC.otherCost.leaseFix.other`. 我按如下方式开发了我的解析器：如果 ID 或 from/to 值相同，则适用覆盖和禁止规则。因此，我不知道定位器是否将两个标签 ID 更改为相等的值，或者如果它们位于不同的文件中，我是否必须区分这两者......？

你有想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T09:54:22.933

(File 1: labelArc 1) 和 (File 2: labelArc 1) 确实是[等价关系](http://www.xbrl.org/Specification/XBRL-RECOMMENDATION-2003-12-31+Corrected-Errata-2008-07-02.htm#_Ref58749019)，因为它们指向的 XML 片段是相同的（*不是因为“xlink:to”属性的值相等*）。

(File 1: labelArc 2) 不等于上面提到的 2 个 labelArcs，因为它指向不同的 XML 片段（to-attribute 的值不是[x-equal](http://www.xbrl.org/Specification/XBRL-RECOMMENDATION-2003-12-31+Corrected-Errata-2008-07-02.htm#_4.10)，因此 labelArcs 不是[s-equal](http://www.xbrl.org/Specification/XBRL-RECOMMENDATION-2003-12-31+Corrected-Errata-2008-07-02.htm#_4.10)，这意味着它们是**不等价**）。因此，不禁止并应显示以下标签：

```
<label xlink:label="label_de-gaap-ci_is.netIncome.regular.operatingTC.otherCost.leaseFix.other"
         id="label_de-gaap-ci_is.netIncome.regular.operatingTC.otherCost.leaseFix.other"
         xlink:role="http://www.xbrl.org/2003/role/label"
         xlink:type="resource"
         xml:lang="de">Übrige / nicht zuordenbare Miete und Pacht für unbewegliche Wirtschaftsgüter</label> 
```

x-equal 表示*不比较字符串值，而是比较**它们指向的 XML 片段*的标识。

我希望这个答案不会太混乱？

# java - ObjectPool 未按预期重用对象。我该如何设计这个来集中资源？

> ID：10400229
> 
> 赞同：0
> 
> 时间：2012-05-01T15:45:51.597
> 
> 标签：java

我对如何将对象（成功）返回到池中有些困惑。我正在测试为rabbitmq 创建一个频道池（尽管这与rabbitmq 没有任何关系）。rabbitmq 中的过程是创建与服务器的连接，然后创建一个通道，我试图让它创建通道并使用池的一部分，但它只是不断创建新通道，并且似乎没有重用旧通道。我相信是这样，因为当我检查兔子的 Web UI 时，它说我的频道与队列中的项目一样多，但我的上传速度约为每秒 10k 条消息，所以我希望只有该范围内的频道。

我很确定这正在发生，因为我不知道如何成功返回池。我正在使用 returnObject 但我是否需要做任何事情以使其准备好供另一个进程使用？

这是代码（它有很多代码，但我认为问题出在`MyPooledObject class`和 `pool.returnObject(obj)`部分：

```
import org.apache.commons.pool.BasePoolableObjectFactory;
import org.apache.commons.pool.ObjectPool;
import org.apache.commons.pool.PoolableObjectFactory;
import org.apache.commons.pool.impl.GenericObjectPool;

import java.io.IOException;
import com.rabbitmq.client.ConnectionFactory;
import com.rabbitmq.client.Connection;
import com.rabbitmq.client.Channel;
import com.rabbitmq.client.MessageProperties;

public class PoolExample {
    public static class MyPooledObject {
        Connection connection;
        public MyPooledObject() throws IOException {
            System.out.println("hello world");
            ConnectionFactory factory = new ConnectionFactory();
            factory.setHost("localhost");
            connection = factory.newConnection();

        }

        public Channel sing() throws IOException {
            //System.out.println("mary had a little lamb");
            return connection.createChannel();
        }

        public void destroy() {
            System.out.println("goodbye cruel world");

        }
    }

    public static class MyPoolableObjectFactory extends BasePoolableObjectFactory<MyPooledObject> {
        @Override
        public MyPooledObject makeObject() throws Exception {
            return new MyPooledObject();
        }

        @Override
        public void destroyObject(MyPooledObject obj) throws Exception {
            obj.destroy();
        }
        // PoolableObjectFactory has other methods you can override
        // to valdiate, activate, and passivate objects.
    }

    public static void main(String[] args) throws Exception {
        PoolableObjectFactory<MyPooledObject> factory = new MyPoolableObjectFactory();
        ObjectPool<MyPooledObject> pool = new GenericObjectPool<MyPooledObject>(factory);

        // Other ObjectPool implementations with special behaviors are available;
        // see the JavaDoc for details

        try {
            for (int i = 0; i < 500000000; i++) {
                MyPooledObject obj;

                try {
                    obj = pool.borrowObject();
                } catch (Exception e) {
                    // failed to borrow object; you get to decide how to handle this
                    throw e;
                }

                try {
                    // use the pooled object
                    Channel channel = obj.sing();
                    String message = "Mary Had a little lamb";
                    channel.basicPublish( "", "task_queue", 
                            MessageProperties.PERSISTENT_TEXT_PLAIN,
                            message.getBytes());

                } catch (Exception e) {
                    // this object has failed us -- never use it again!
                    pool.invalidateObject(obj);
                    obj = null; // don't return it to the pool

                    // now handle the exception however you want

                } finally {
                    if (obj != null) {
                        pool.returnObject(obj);
                    }
                }
            }
        } finally {
            pool.close();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T16:25:08.623

行为符合预期。在 makeObject 上设置一个断点，你会发现你只使用过一次，因为你一次只使用池中的一个对象。

如果您要同时使用池中的多个对象，则池将填满并使用不同的对象。

# matlab - princomp 中的分数是多少

> ID：10400230
> 
> 赞同：0
> 
> 时间：2012-05-01T15:45:52.887
> 
> 标签：matlab, pca

我有一个包含功能的 CSV 文件。行代表对象，列代表特征。我像这样阅读CSV文件

```
O = csvread('data'); 
```

现在我做了一个

```
[COEFF,SCORE] = princomp(O) 
```

我在 O 上进行 princomp 的目标是执行降维，因为特征数量太大。现在在此操作之后，SCORE 向量是否保留了降维特征集，还是我必须执行更多操作才能获得它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T17:06:55.740

From [the documentation](http://www.mathworks.com/help/toolbox/stats/princomp.html):

> [COEFF,SCORE] = princomp(X) returns SCORE, the principal component scores; that is, the representation of X in the principal component space. Rows of SCORE correspond to observations, columns to components.

# x11 - 如何通过 Xlib 观察连接的显示器的变化？

> ID：10400236
> 
> 赞同：4
> 
> 时间：2012-05-01T15:46:22.033
> 
> 标签：x11, xlib, xrandr

我正在尝试编写一个程序来检测插入的外部监视器并通过 Xlib 自动启用和配置它们。我知道有 XRandr 扩展允许这样做。我的问题是，如何启用接收 XRandr 事件到我的应用程序？我应该使用什么事件掩码？我知道 xev 应用程序能够做到这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T12:45:54.863

Xev的源代码：

*   [http://cgit.freedesktop.org/xorg/app/xev/tree/](http://cgit.freedesktop.org/xorg/app/xev/tree/)

或者：

*   `git clone git://anongit.freedesktop.org/xorg/app/xev`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-02-01T13:02:02.640

对于第二部分，我将配置直接发布到 nvidia-settings。

我已经从我能找到的部件中拼凑出第一部分，这样我的 HTPC 系统就可以在电视打开时重置屏幕环境。

我很想看看我努力的纯 C 端口......

```
#!/usr/bin/python2

"""
Send RESET_COMMAND via os.system() call when xbc.randr reports
that a small screen (main monitor) has just changed configuration.
ie The secondary (TV) monitor has just been turned on.
"""

# Could also be xrandr settings, if need be #
# These values came from the nvidia-settings GUI with Base Mosaic enable with custom scaling on HDMI-0 determined experiementally
RESET_COMMAND = 'nvidia-settings --assign CurrentMetaMode="GPU-08c5ca05-d3cc-b022-4fab-3acab0500b7c.VGA-0: 1280x1024 +0+0, GPU-08c5ca05-d3cc-b022-4fab-3acab0500b7c.HDMI-0: 1920x1080 +1280+0 {viewportin=1920x1080, viewportout=1774x998+73+41}"'

MAIN_MONITOR_HEIGHT = 1024
MAIN_MONITOR_WIDTH = 1280

import os
# Do one reset at startup (login) - this may be a shortcoming of LXDM that has things wrong after the first login #
os.system(RESET_COMMAND)

import xcb
from xcb.xproto import *

import xcb.randr as RandR
from xcb.randr import NotifyMask, ScreenChangeNotifyEvent

def startup():
    """Hook up XCB_RANDR_NOTIFY_MASK_SCREEN_CHANGE"""
    # In the xcb.randr module, the result of
    # key = xcb.ExtensionKey('RANDR')
    # xcb._add_ext(key, randrExtension, _events, _errors)
    # is stored in xcb.randr.key and retrieved in some very odd manner =>
    randr = conn(RandR.key)
    randr.SelectInput(root.root, NotifyMask.ScreenChange)
    # may as well flush()
    conn.flush()

def run():
    """Listen for XCB_RANDR_SCREEN_CHANGE_NOTIFY"""
    currentTimestamp = 0
    connected = False
    startup()

    while True:
        try:
            event = conn.wait_for_event()
            connected = True
        except xcb.ProtocolException, error:
            print "Protocol error %s received!" % error.__class__.__name__
            break
        except Exception, error:
            print "Unexpected error received: %s" % error.message
            break

        # Once the ScreenChangeNotify Event arrives, filter down to the one we care about. #
        if isinstance(event, ScreenChangeNotifyEvent):
            # 3 consecutive events arrive with the same timestamp, #
            if currentTimestamp != event.config_timestamp:
                # so mask off the next two and #
                currentTimestamp = event.config_timestamp
                # mask off the disconnect altogether by looking at the initial screen size. #
                if ((event.width == MAIN_MONITOR_WIDTH) and (event.height == MAIN_MONITOR_HEIGHT)):
                    os.system(RESET_COMMAND)

    # won't really get here, will we?
    if connected:
        conn.disconnect()

conn = xcb.connect()
setup = conn.get_setup()
# setup.roots holds a list of screens (just one in our case) #
root = setup.roots[0]

run() 
```

# applescript - AppleScript：如何从 if() 语句中调用的事件返回布尔值

> ID：10400240
> 
> 赞同：2
> 
> 时间：2012-05-01T15:46:28.080
> 
> 标签：applescript

嗨，Applescript 小节在这里。

我实际上并没有尝试运行下面的脚本，但我正在尝试找到一个 AppleScript 语言结构来实现这种效果（它在我熟悉的语言中运行良好，哈哈）：

```
set adoc to choose file
tell application "Finder"
    tell application "TextEdit"
        open adoc
    end tell
    tell application process "Textedit" of application "System Events"
        if (click menu item "Print…" of menu "File" of menu bar item "File" of menu bar 1 of application process "TextEdit" of application "System Events") then
            display dialog "It worked boss!"
        end if
    end tell
end tell 
```

基本上，我正在编写一个旧应用程序的 GUI 脚本，并且需要在每一步都知道是否发生了事件。我知道我可以通过询问“打印”窗口是否存在来推断事件的成功，但是由于我不会进入的原因，我不想从事件的预期结果中推断事件，我想知道是否它发生了。有没有办法在 AppleScript 中做到这一点？谢谢！

* * *

有趣的是，出于我愚蠢深奥的目的，所提供的两个答案的组合让我完成了编写一些非常古老的应用程序的脚本。在某些情况下，可能会出现具有相似按钮的两个可能窗口之一，其中 {x,y} 解决方案（出于我的目的，在某些情况下更有效）不起作用，因为我仍然可以正确单击错误的按钮，其中 try...on 错误策略的应用（我实际上觉得有点愚蠢，没有考虑过），这并没有给我同样的精确度，因为我正在使用的一些 UI 元素很奇怪而且不t 表现如预期（或具有预期的属性），至少克服了这个问题。感谢大家把我从这个噩梦中拯救出来！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T18:50:38.573

*正如您所发现的， AppleScript*没有真值和*假*值的概念——唯一的值评估为正确的布尔值（值`true`或`false`表达式）。与此一致，既不是 0，也不是空字符串，也不`missing value`能被强制转换为`false`.

如果您想测试您的 GUI 脚本操作是否成功，您必须将返回值与预期值进行比较，例如将返回值的类与*UI 元素*类层次结构中目标对象的类进行比较， IE

```
if class of (click menu item "Print…" of menu "File" of menu bar item "File" of menu bar 1 of process "TextEdit" of application "System Events") is menu item then
    display dialog "It worked, Boss"
end if 
```

或通过将代码包装在一个块中来利用 OSA 对异常的大量使用`try … on error`，即

```
try
    click menu item "Print…" of menu "File" of menu bar item "File" of menu bar 1 of process "TextEdit" of application "System Events"
    display dialog "It worked, Boss"
on error errorMessage
    log errorMessage
end try 
```

我将避免评论您的示例代码，其中包括几个错误，这些错误将阻止它按预期工作，正如您所说，您实际上并没有尝试运行它......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T23:09:48.257

只是另一种方法。对于动作和点击，它会在成功时返回对象或另一个对象。匹配这些对象以确保除了目标之外没有其他对象已收到该操作。

```
tell application "System Events"
    tell process "Safari"
        if (count of windows) < 1 then return --there are no windows, no reason to continue
        tell window 1
            tell checkbox 1 of group 1
                if (click it) is not it then
                    --click has failed; stop 
                    return
                end if
            end tell
        end tell
    end tell
end tell 
```

--编辑：为 adayzdone 添加了一些示例代码，向他展示它如何与打印一起工作

```
tell application "Safari" to activate --comment//uncomment this line
tell application "System Events"
    tell process "Safari"
        set theTarget to menu bar item 3 of menu bar 1
        set {xPos, yPos} to position of theTarget
        if (click at {xPos, yPos}) is not theTarget then
            return false
        end if
        set theTarget to last menu item of menu 1 of menu bar item 3 of menu bar 1
        set {xPos, yPos} to position of theTarget
        if (click at {xPos, yPos}) is not theTarget then
            return false
        end if
        return true
    end tell
end tell 
```

# java - Java中的路线图

> ID：10400241
> 
> 赞同：2
> 
> 时间：2012-05-01T15:46:36.973
> 
> 标签：java, google-maps, maps

我正在用 Java 创建一个简单的应用程序，我希望能够在地图上显示一些点和路径（路线图，而不是卫星地图）。我一直在寻找一些可以让我这样做的 API，但是 Google Maps API 不适用于 Java，只能用于 Web 应用程序，而且 WorldWind 似乎没有提供路线图，而且 API 的大小是比我想象的要大一点。

你知道有什么 API 可以满足我的需求吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T16:05:30.097

它是一个网络应用程序吗？一个日食？一个摇摆？当您在寻找 API 建议时，这些细节很适合告诉您。

那么只有几个想法...

对于渲染，您可能需要：

*   GEF 用于基于 Eclipse 的应用程序；
*   用于 Swing 的 Graphics2D；
*   HTML5 用于 Web 或服务器端的静态图像生成器；

对于地理编码，请查看[GeoTools](http://www.geotools.org)。

最后可能没有你想象的那么简单。

# android - 如何在Andengine中制作粒子效果？

> ID：10400243
> 
> 赞同：1
> 
> 时间：2012-05-01T15:46:40.780
> 
> 标签：android, andengine, effects, particle-system

我正在用andengine 开发游戏。我的游戏需要一些粒子效果。游戏：场景中有球，它们通过 MoveModifier 随机移动。当我触摸它们时，它们会迷路。我想：当他们迷路时，会出现像玻璃破碎，球爆炸或类似的粒子效果..怎么能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T15:50:36.230

你可以查看这个[项目](https://github.com/pocmo/AndEngine-ParticleSystem-Demos)希望你能找到一些有用的资源

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-10T10:23:30.690

初始化粒子发射器，中心为 (0,0)。

```
IParticleEmitter emitter = new PointParticleEmitter(0,0); 
```

使用您自己的参数初始化粒子系统，如下所示。

```
ParticleSystem particleSystem = new ParticleSystem(emitter,5,10,50,textureRegion); 
```

您可以根据需要设置混合功能。

```
particleSystem.setBlendFunction(GL10.GL_SRC_ALPHA, GL10.GL_ONE); 
```

然后您可以根据自己的意愿添加particleInitializers 和ParticleModifiers。

```
 particleSystem.addParticleInitializer(new VelocityInitializer(-20, 20, -40, -60));
    particleSystem.addParticleInitializer(new ColorInitializer(1f, 0.5f, 0.8f));
    particleSystem.addParticleModifier(new ExpireModifier(2f));
    particleSystem.addParticleModifier(new ColorModifier(1f, 0.88f, 1f, 0.6f, 0.8f, 0.3f, 0f, 0.4f)); 
```

**然后您可以将此particleSystem**对象附加到您的场景或任何节点中。

# python - Access alternative through python and sqlite3

> ID：10400256
> 
> 赞同：3
> 
> 时间：2012-05-01T15:47:53.153
> 
> 标签：python, sqlite, qt, py2exe

is there a way to build a standalone rapid embedded databases with forms as front-end like MS Access, using python and sqlite, by rapid i mean, a WYSIWYG GUI builder for forms (like Access form designer), which should also support subforms, i search around and it might work with qt designer 4 + python + sqlite,

for the standalone deployment, i heard that you can turn python script to an .exe (for windows) that would rock!!!

my question: any of you guys tried this? qt designer 4 +python + sqlite, would it replace MS Access? i know there's Libreoffice base , but it's too big (170~ MB) and requires java -not really a standalone- I'm pretty good at SQL so i don't care about SQL easy graphical designer

thanks

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T15:51:01.360

[Dabo](http://dabodev.com/) or [Camelot](http://www.python-camelot.com/) may be what you're looking for, or at least close.

# django - 使用完全独立于项目的设置进行测试

> ID：10400260
> 
> 赞同：0
> 
> 时间：2012-05-01T15:48:06.417
> 
> 标签：django, django-testing, django-settings

我正在尝试测试一个在初始化期间创建一些自定义权限的应用程序。这些是在创建数据库后立即创建的：

```
custom_permissions = getattr(settings,'SOMEAPP_PERMISSIONS',() )

def create_custom_permissions(sender, **kwargs):
    ct, created = ContentType.objects.get_or_create(model = '',
                                                    app_label = 'some_app',
                                                    defaults = {'name':'some_app'})

    for codename, name in custom_permissions: 
        perm = Permission.objects.get_or_create(codename = codename,
                                         content_type__pk = ct.id,
                                         name = name)

post_save.connect(create_custom_permissions, Permission) 
```

我能找到的所有关于覆盖设置的讨论都与`override_settings`，`with self.settings`等等有关。但是当我在 TestCase 期间覆盖设置时，我的函数已经运行，并且设置的更改当然没有效果：

```
@override_settings(SOMEAPP_PERMISSIONS = (('some_custom_permission','No Name'))
class TestCustomPermissions(TestCase):

    fixtures = ['some_app_user_fixture.json']
    urls = 'some_app.tests.test_urls'

    def test_create_point_privileges(self):
        """ check if all necessary privileges have been created """
        Permission.objects.get(codename = 'some_custom_permission') 
```

因此我所有的测试都失败了。现在我如何使用设置文件来测试这个特殊功能并且它与数据库的创建有关？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T16:07:14.367

从一个 Django 项目到另一个项目，您会看到一个单独的设置模块，提供测试配置/覆盖：

```
# project/settings.py
SOMEAPP_PERMISSIONS = (
    'foo', 'bar'
)

# project/test.py
from project.settings import *

SOMEAPP_PERMISSIONS = (
    'bar', 'baz'
) 
```

您现在所要做的就是在运行管理命令时提供设置选项：`python ./manage.py test --settings=project.test`. 它简单、有效且可自我记录。

# c# - 从 Xml 文档中删除 jquery 和 CSS

> ID：10400262
> 
> 赞同：1
> 
> 时间：2012-05-01T15:48:09.283
> 
> 标签：c#, .net, xml, xml-parsing, sgmlreader

我正在使用 sgmlreader 将 HTML 转换为 XML。输出进入一个 XmlDocument 对象，然后我可以使用 InnerText 方法从网站中提取纯文本。我试图通过删除任何 javascript 使文本看起来尽可能干净。遍历 xml 并删除任何`<script type="text/javascript">`内容很容易，但是当任何 jquery 或样式未封装在任何标签中时，我遇到了障碍。有人可以帮帮我吗？

示例代码：

第一步：一旦我使用 webclient 类下载 HTML，我保存它，然后使用文本阅读器类打开文件。

第二步：创建 sgmlreader 类并将输入流设置为文本阅读器：

```
 // setup SGMLReader
            Sgml.SgmlReader sgmlReader = new Sgml.SgmlReader();
            sgmlReader.DocType = "HTML";
            sgmlReader.WhitespaceHandling = WhitespaceHandling.All;
            sgmlReader.CaseFolding = Sgml.CaseFolding.ToLower;
            sgmlReader.InputStream = reader;

            // create document
            doc = new XmlDocument();
            doc.PreserveWhitespace = true;
            doc.XmlResolver = null;
            doc.Load(sgmlReader); 
```

第三步：一旦我有了一个 xmldocument，我就使用 doc.InnerText 来获取我的纯文本。

第四步：我可以像这样轻松删除 JavaScript 标签：

```
 XmlNodeList nodes = document.GetElementsByTagName("text/javascript");

                for (int i = nodes.Count - 1; i >= 0; i--)
                {
                    nodes[i].ParentNode.RemoveChild(nodes[i]);
                } 
```

有些东西还是漏了。这是我正在编写的一个特定网站的输出示例：

```
Criminal and Civil Enforcement | Fraud | Office of Inspector General | U.S. Department of Health and Human Services

#fancybox-right { 
right:-20px; 
} 
#fancybox-left { 
left:-20px; 
} 
#fancybox-right:hover span, #fancybox-right span 
#fancybox-right:hover span, #fancybox-right span { 
left:auto; 
right:0; 
} 
#fancybox-left:hover span, #fancybox-left span 
#fancybox-left:hover span, #fancybox-left span { 
right:auto; 
left:0; 
} 
#fancybox-overlay { 
/* background: url('/connections/images/wc-overlay.png'); */
/* background: url('/connections/images/banner.png') center center no-repeat; */
} 

$(document).ready(function(){

$("a[rel=photo-show]").fancybox({
'titlePosition' : 'over',
'overlayColor' : '#000',
'overlayOpacity' : 0.9
});

$(".title-under").fancybox({
'titlePosition' : 'outside',
'overlayColor' : '#000',
'overlayOpacity' : 0.9
}) 

}); 
```

需要删除该 jquery 和样式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T20:48:50.517

我只是根据此页面的 html 将其放在 LinqPad 中，并正确删除了`script`and`style`标签。

```
void Main()
{
    string htmlPath = @"C:\Users\Jschubert\Desktop\html\test.html";
    var sgmlReader = new Sgml.SgmlReader();
    var stringReader = new StringReader(File.ReadAllText(htmlPath));

    sgmlReader.DocType = "HTML";
    sgmlReader.WhitespaceHandling = WhitespaceHandling.All;
    sgmlReader.CaseFolding = Sgml.CaseFolding.ToLower;
    sgmlReader.InputStream = stringReader;

    // create document
    var doc = new XmlDocument();
    doc.PreserveWhitespace = true;
    doc.XmlResolver = null;
    doc.Load(sgmlReader);

    List<XmlNode> nodes = doc.GetElementsByTagName("script")
                          .Cast<XmlNode>().ToList();
    var byType = doc.SelectNodes("script[@type = 'text/javascript']")
                          .Cast<XmlNode>().ToList();
    var style = doc.GetElementsByTagName("style").Cast<XmlNode>().ToList();
    nodes.AddRange(byType);
    nodes.AddRange(style);

    for (int i = nodes.Count - 1; i >= 0; i--)
    {
        nodes[i].ParentNode.RemoveChild(nodes[i]);
    }

    doc.DumpFormatted();

    stringReader.Close();
    sgmlReader.Close();
} 
```

转换`XmlNode`为使用通用列表并不理想，但我这样做是为了空间和演示。

此外，您不应该同时需要
`doc.GetElementsByTagName("script")`和
`doc.SelectNodes("script[@type = 'text/javascript']")`。
同样，我这样做是为了演示。

如果您有其他脚本并且只想删除 JavaScript，请使用后者。如果要删除所有脚本标签，请使用第一个。或者，如果您愿意，可以同时使用两者。

# logging - JBoss AS 7 配置日志到 Syslog Appender

> ID：10400263
> 
> 赞同：4
> 
> 时间：2012-05-01T15:48:14.013
> 
> 标签：logging, log4j, jboss7.x, syslog, rsyslog

在以前的 Jboss 版本中，我能够在 jboss-log4j.xml 中使用以下配置配置 SYSLOG appender：

```
<appender name="SYSLOG" class="org.apache.log4j.net.SyslogAppender">
  <errorHandler class="org.jboss.logging.util.OnlyOnceErrorHandler"/>
  <param name="Facility" value="LOCAL7"/>
  <param name="FacilityPrinting" value="true"/>
  <layout class="org.apache.log4j.PatternLayout">
    <param name="ConversionPattern" value="[%d{ABSOLUTE},%c{1}] %m%n"/>
  </layout>
</appender> 
```

现在我已经升级到 Jboss AS 7，这似乎应该进入，`$JBOSS_HOME/standalone/configuration/standalone.xml`但语法不同。

我的问题是：如何配置 Jboss AS 7 以使用 SYSLOG appender？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-01T15:58:13.450

log4j 在 JBoss AS 7 中不再使用，因为没有 syslog appender。[`java.util.logging.Handler`](http://docs.oracle.com/javase/6/docs/api/index.html?java/util/logging/Handler.html)如果你想要类似的东西，你必须找到或开发一个定制。

创建处理程序后，最好将其设为模块。假设处理程序被调用`com.example.logging.SysLogHandler`。在`$JBOSS_HOME/modules`创建一个名为`com/example/logging/main`. 在该目录中放置您的库并创建一个`module.xml`文件，请参阅另一个模块以获取示例。

module.xml 示例：

```
<?xml version="1.0" encoding="UTF-8"?>
<module xmlns="urn:jboss:module:1.1" name="com.example.logging">
    <resources>
        <resource-root path="sys-log.jar"/>
    </resources>
    <dependencies>
         <!-- Insert any dependencies here like the example below -->
         <!-- <module name="org.jboss.logmanager"/> -->
    </dependencies>
</module> 
```

您现在可以编辑`standalone.xml`以添加自定义处理程序。

```
<subsystem xmlns="urn:jboss:domain:logging:1.1">
    ...
    <!-- A syslog handler -->
    <custom-handler name="syslog" class="com.example.logging.SysLogHandler" module="com.example.logging">
        <level name="INFO"/>
        <formatter>
            <pattern-formatter pattern="%d{MMM dd HH:mm:ss} %-5p [%c] (%t) %s%n"/>
        </formatter>
        <properties>
            <!-- Set any properties that can accessed through setter methods -->
            <property name="autoFlush" value="true"/>
        </properties>
    </custom-handler>
    ...
    <root-logger>
        <level name="INFO"/>
        <handlers>
            <handler name="CONSOLE"/>
            <handler name="FILE"/>
            <handler name="syslog"/>
        </handlers>
    </root-logger>
</subsystem> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T20:13:11.053

这是一个简单的 LogHandler 实现，它简单地委托给 log4j SyslogAppender。[http://randomtekkstuff.blogspot.in/2013/03/jboss-as-7-syslog-handler.html](http://randomtekkstuff.blogspot.in/2013/03/jboss-as-7-syslog-handler.html)。可以部署为 jboss 模块

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T12:22:54.397

从 JBoss AS 的 7.2.x 版本开始，您可以使用来自 Log4j 的旧式 Appender。

有关详细信息，请参阅[https://issues.jboss.org/browse/AS7-4925](https://issues.jboss.org/browse/AS7-4925)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-21T20:32:21.710

我遇到了同样的问题，从上面的答案开始，我自己实现了一个版本。连同配置文件，您可以在[Github上找到我的解决方案](https://github.com/kifj/jboss-syslog)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-07-06T08:41:48.017

JBoss AS 7.2 有 syslog 处理程序，因此您可以使用：

```
<syslog-handler name="SYSLOG">
    <level name="DEBUG" />
    <server-address value="<syslog.server>"/>
    <port value="<syslog.port>"/>
</syslog-handler>

...

<root-logger>
    <handlers>
    ...
        <handler name="SYSLOG" />
    ...
    </handlers>
</root-logger> 
```

文档中的更多信息： [https ://docs.jboss.org/author/display/AS72/Admin+Guide#AdminGuide-sysloghandler](https://docs.jboss.org/author/display/AS72/Admin+Guide#AdminGuide-sysloghandler)

# android - 可变类型的视频和图像

> ID：10400270
> 
> 赞同：1
> 
> 时间：2012-05-01T15:49:14.827
> 
> 标签：android

正在开发一些应用程序。但是，我已经完成了两个模块，它们调用手机的本机摄像头来拍摄快照并录制视频。我打算使用手机应用程序将手机拍摄和录制的图像和视频发送到我打算创建的网站。但是，对于文本信息，我可以将信息存储为字符串，对于图像和视频，我不确定是否应该在提交时将它们保留为 Uris。下面分别是我的图片和视频节目。谢谢图片代码：

```
package com.project;

import java.io.File;

import android.app.Activity;
import android.content.Intent;
import android.net.Uri;
import android.os.Bundle;
import android.os.Environment;
import android.provider.MediaStore;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.Toast;

public class MyPicture extends Activity {
    /** Called when the activity is first created. */
    /*constant and variable created so as to work with the taken pictures*/
    private static int TAKE_PICTURE = 1;
    private Uri outputFileUri;
    Uri imageUri;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.pic);
        Button pictureButton=(Button) findViewById(R.id.pictureButton);
        pictureButton.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View arg0) {
                // TODO Auto-generated method stub
                Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
                File file = new File(Environment.getExternalStorageDirectory(),"test.jpg");
                outputFileUri = Uri.fromFile(file);
                intent.putExtra(MediaStore.EXTRA_OUTPUT, outputFileUri);
                startActivityForResult(intent, TAKE_PICTURE);

            }
        });
    }
    @Override
    protected void onActivityResult(int requestCode,int resultCode, Intent data){
        if (requestCode == TAKE_PICTURE){
            imageUri = data.getData();
            //do something about the image in the in outputFileUri
            Toast.makeText(MyPicture.this,
                    "Picture successfully taken",
                    Toast.LENGTH_SHORT).show();
                    Intent i = new Intent(MyPicture.this,/*program execution proceeds back to MyPicture, our start page after success of image takin*/
                            Myindex.class);
                    startActivity(i);

        }else{
            Toast.makeText(MyPicture.this,
                    "Picture Unsuccessfully taken",
                    Toast.LENGTH_SHORT).show();
                    Intent i = new Intent(MyPicture.this,/*program execution proceeds back to MyPicture, so we can redo the recording*/
                            MyPicture.class);
                    startActivity(i);
        }

    }
} 
```

视频代码：

```
package com.project;

import android.app.Activity;
import android.content.Intent;
import android.net.Uri;
import android.os.Bundle;
import android.provider.MediaStore;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.Toast;

public class MyVideo extends Activity {
    /*program for the vid button*/
    private static int  RECORD_VIDEO = 1;
    private static int HIGH_VIDEO_QUALITY = 1;
    //private static int MMS_VIDEO_QUALITY = 0;
    Uri recordedVideo;
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.vid);
        Button videoButton=(Button) findViewById(R.id.videoButton);
        videoButton.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View arg0) {
                // TODO Auto-generated method stub
                Intent intent = new Intent(MediaStore.ACTION_VIDEO_CAPTURE);
                //intent.putExtra(MediaStore.EXTRA_OUTPUT, output);
                intent.putExtra(MediaStore.EXTRA_VIDEO_QUALITY, HIGH_VIDEO_QUALITY);
                startActivityForResult(intent, RECORD_VIDEO);
            }
        });
    }
    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data){
        if (requestCode == RECORD_VIDEO){
            recordedVideo = data.getData();
            //to do something with the recorded video
            //we shall insert this information in the database
            Toast.makeText(MyVideo.this,
                    "Video successfully recorded",
                    Toast.LENGTH_SHORT).show();
                    Intent i = new Intent(MyVideo.this,/*program execution proceeds back to Myindex, our start page*/
                            Myindex.class);
                    startActivity(i);
        }
        else{
            /*Happens after unsuccessfull recording of video*/
            Toast.makeText(MyVideo.this,
                    "Video Unsuccessfully recorded",
                    Toast.LENGTH_SHORT).show();
                    Intent i = new Intent(MyVideo.this,/*program execution proceeds back to MyVideo, so we can redo the recording*/
                            MyVideo.class);
                    startActivity(i);
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T16:10:41.663

对于图像，我通常将数据解码为 a `Bitmap`，然后使用多部分内容类型通过 Http Post 发送。

您可以将图像文件解码为`Bitmap`使用：[BitmapFactory.decodeFile](http://developer.android.com/reference/android/graphics/BitmapFactory.html#decodeFile%28java.lang.String%29)。

这是我如何使用[Apache](http://hc.apache.org/httpcomponents-client-ga/httpmime/dependencies.html)库发送`Bitmap`with multipart的示例：

```
public String doHttpMultipart(String url, 
                                  List<NameValuePair> pairs,
                                  Bitmap bitmap,
                                  String fileName) throws IOException, 
                                                ClientProtocolException,
                                                UnsupportedEncodingException {
            ByteArrayOutputStream bos = new ByteArrayOutputStream();        
            bitmap.compress(CompressFormat.PNG, 100, bos);
            byte[] imageData = bos.toByteArray();
            ByteArrayBody byteArrayBody = new ByteArrayBody(imageData, fileName);
            MultipartEntity reqEntity = 
                        new MultipartEntity(HttpMultipartMode.BROWSER_COMPATIBLE);

            reqEntity.addPart("image", byteArrayBody);

            for(NameValuePair p : pairs) {
                reqEntity.addPart(p.getName(), new StringBody(p.getValue()));
            }

            HttpPost request = new HttpPost(url);
            request.setEntity(reqEntity);

            HttpClient client = new DefaultHttpClient();
            HttpResponse httpResponse = client.execute(request);

            String response = "";
            BufferedReader in = null;

            try {
                response = super.readHttpStream(response, in, httpResponse);    
            } catch(IllegalStateException e) {
                throw new IllegalStateException();
            } catch(IOException e) {
                throw new IOException();
            } finally {
                if (in != null) {
                    try {
                        in.close();
                    } catch (IOException e) {
                        e.printStackTrace();
                    }
                }
            }

            return response;
        } 
```

对于视频文件，应该是一样的，您应该看到如何将其解码为字节数组并使用多部分发送。

# ruby-on-rails - 比较 2 个实例对象并找到不常见的元素

> ID：10400273
> 
> 赞同：2
> 
> 时间：2012-05-01T15:49:28.753
> 
> 标签：ruby-on-rails

我有 2 个实例对象：@original_files 和 @version2_files

我想检索在@original_files 中找到但在@version2_files 中未找到的元素。

下面的代码：

```
<% @original_files.each do |original_file| %>

  <% @version2_files.each do |ver2_file| %>
    <% if original_file.name ==  ver2_file.name%>
      <%= original_file.name %> is common to both sets
      <% break %>
      <% else %>
    <% end %>
  <% end %>

<% end %> 
```

如果有人能帮我弄清楚如何找到仅在 @original_files 中找到的元素，我将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-01T15:52:18.793

它们是数组？你可以减去...

```
@original_files - @version2_files 
```

哈希可以使用[diff](http://api.rubyonrails.org/classes/Hash.html#method-i-diff)。

```
 @original_files.diff(@version2_files) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T15:59:11.263

我理解这意味着@original_files 和@version2_files 是散列，并且您想在@original_files 中找到不在@version2_files 中的元素

```
@original_files.keys - @version2_files.keys 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-01T19:56:42.550

*免责声明：* ruby​​ 新手，可能不知道哈希/数组是如何工作的。

如果您想比较键/值对，@danh 的答案是正确的。但是，如果您仅根据它们的值比较 2 个哈希并且键并不重要，那么`diff`可能不是您需要的。在这种情况下，您会执行以下操作：

```
original.values - version2.values => [ ... ] 
```

它返回一个元素数组，该数组仅在`original`但不是`version2`.

此外，[这](https://stackoverflow.com/questions/4928789/how-do-i-compare-two-hashes)和[这](https://stackoverflow.com/questions/1766741/comparing-ruby-hashes)可能会有所帮助。

# jvm - JVM垃圾回收算法

> ID：10400274
> 
> 赞同：5
> 
> 时间：2012-05-01T15:49:30.183
> 
> 标签：jvm

我知道有不同的垃圾收集算法。这些是复制集合和标记紧凑集合，增量集合。我现在有一个查询。JVM中使用了哪种算法？为什么有不同的算法可用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T15:57:14.993

首先，JVM 有[多个](http://en.wikipedia.org/wiki/List_of_Java_virtual_machines)版本。

我相信大多数主要的 JVM 默认使用分[代垃圾收集](http://en.wikipedia.org/wiki/Garbage_collection_%28computer_science%29#Generational_GC_.28ephemeral_GC.29)。然而，他们也可能使用混合策略。

以下是主要 JVM 使用分代垃圾收集的一些链接：

*   [OJVM 分代集合](http://www.oracle.com/technetwork/java/javase/gc-tuning-6-140523.html#generations)
*   [热点JVM](http://www.ibm.com/developerworks/java/library/j-jtp11253/)

这是我发现的一篇很棒的文章，表明 Jrockit 使用了标记策略： [比较三个主要 JVM 的](http://blog.dynatrace.com/2011/05/11/how-garbage-collection-differs-in-the-three-big-jvms/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-01T16:02:24.290

不同的垃圾收集器有不同的优势和劣势，重要的特性是吞吐量、暂停时间和并行化。使用或可用的垃圾收集器取决于 JDK 版本、JVM 模式（客户端或服务器）以及您可以使用的大量配置设置。请记住，GC 技术在不断发展。以下是一些有用的链接：

*   [垃圾优先垃圾收集器](http://www.oracle.com/technetwork/java/javase/tech/g1-intro-jsp-135488.html)
*   [Java SE 6 性能白皮书](http://java.sun.com/performance/reference/whitepapers/6_performance.html)
*   [Java 调优白皮书](http://java.sun.com/performance/reference/whitepapers/tuning.html)
*   [Java HotSpot 虚拟机选项](http://www.oracle.com/technetwork/java/javase/tech/vmoptions-jsp-140102.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T06:38:12.987

随着jvm的发展，出现了越来越多的jvm算法来解决pre-one的不足，现在JDK5.0中有四种类型的clollector：serial、throught、concurrent和train collector

# c# - 将泛型类型隐式转换为非泛型等效项

> ID：10400279
> 
> 赞同：2
> 
> 时间：2012-05-01T15:49:49.423
> 
> 标签：c#, generics, inheritance, .net-2.0

给定以下类：

```
public abstract class MyRecordClass
{
    public int id { get; private set; }
}

public class ExampleMyRecordClass : MyRecordClass {}

public enum SomeIntEnum : int {}

public class MyList<T, E> : IList<T>
where T : MyRecordClass
{

}

public class MyOtherClass
{
    public void MyMethod(MyList<T, E> list) {}
} 
```

，我想这样调用方法：

```
MyList<ExampleMyRecordClass, SomeIntEnum> myList;
MyOtherClass myOtherClass;

myOtherClass.MyMethod(myList); 
```

但是，如果传递 type 列表，这实际上不起作用`MyList<ExampleMyRecordClass, SomeIntEnum>`，因为隐式向上转换在泛型类型中不起作用。由于我真正想要的只是属性`id`，因此我当然可以显式地实现一个属性或方法，`MyList<T, E>`以返回包含此信息的新集合。

我更愿意做的是隐含地完成这项工作。有没有办法（可能是一个隐式运算符，或者一个额外的接口来实现 in `MyList<T, E>`）使这成为可能？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-01T15:55:02.217

我不确定您到底在寻找什么，但是如果您进行以下更改，它会编译并运行得很好：

```
public class MyOtherClass
{
    public void MyMethod<T, E>(MyList<T, E> list) where T : MyRecordClass { }
} 
```

* * *

您是否正在寻找[协方差](http://msdn.microsoft.com/en-us/library/ee207183.aspx)？

```
public class MyList<T, E> : IList<T>, IReadOnlyList<T>
    where T : MyRecordClass
{
}

public class MyOtherClass
{
    public void MyMethod(IReadOnlyList<MyRecordClass> list) { }
} 
```

*用法：*

```
MyList<ExampleMyRecordClass, SomeIntEnum> myList;
MyOtherClass myOtherClass;

myOtherClass.MyMethod(myList); 
```

*[IReadOnlyList<T> 接口](http://msdn.microsoft.com/en-us/library/hh192385%28v=vs.110%29.aspx)：*

```
public interface IReadOnlyList<out T> : IEnumerable<T>
{
    int Count { get; }
    T this[int index] { get; }
} 
```

# jquery - 有什么方法可以让 window.onload 函数只执行一次？

> ID：10400281
> 
> 赞同：1
> 
> 时间：2012-05-01T15:50:03.343
> 
> 标签：jquery, return-value

我有一个`window.onload`函数，它加载 AJAX 内容。当访问者正在查看另一个页面并尝试重新加载它时，它也会触发（顺便说一下，这也被 AJAX 调用）。`window.onload`函数再次执行。

有什么方法可以使`window.onload`函数只执行一次（通过存储在缓存中或其他东西中）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T15:52:06.233

您可以在 AJAX 完成时设置一个 cookie，然后在加载页面时检查此 cookie。一些伪代码：

```
$(function() {
    if (!$.cookie("page-viewed")) {
        // call ajax & display

        $.cookie("page-viewed", true);
    }
}); 
```

这是[jQuery cookie 插件的链接](https://github.com/carhartl/jquery-cookie)

* * *

**更新**

根据您评论中的代码，您可以像这样使用 cookie 插件：

```
$(window).load(function() { 
    if (!$.cookie("page-viewed")) {
        $('#pages_holder').hide(0).delay(2500).fadeIn(1200, 'swing', {queue:false}); 
        $('#za').rotate3Di('+=360', 1000, {queue:false}, 'easeInOutCubic'); 
        $('.za').show().switchClass("za", "nas",500, 'easeOutQuad').switchClass("nas", "zavur6en", 1250, 'easeInOutCubic').delay(2000).hide(0) 
        $.ajax({ 
            url : 'pages/zanas.php', 
            success : function(response) { 
                $("#pages").html(response); 
            } 
        }); 
        $.cookie("page-viewed", true);
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T15:55:54.667

```
<script type="text/javascript">
    $(function() {
        // Have your onload ajax here
    });
</script> 
```

我从来没有见过这个运行超过每页加载一次。

# java - 3 维列表或地图

> ID：10400285
> 
> 赞同：13
> 
> 时间：2012-05-01T15:50:27.167
> 
> 标签：java, arrays, list, dictionary

我需要一个 3 维（如列表或地图）之类的东西，我在一个循环中填充了 2 个字符串和一个整数。但是，不幸的是，我不知道要使用哪种数据结构以及如何使用。

```
// something like a 3-dimensional myData
for (int i = 0; i < 10; i++) {
    myData.add("abc", "def", 123);
} 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-01T15:53:55.260

创建一个将三者封装在一起的对象，并将它们添加到数组或列表中：

```
public class Foo {
    private String s1;
    private String s2; 
    private int v3;
    // ctors, getters, etc.
}

List<Foo> foos = new ArrayList<Foo>();
for (int i = 0; i < 10; ++i) {
    foos.add(new Foo("abc", "def", 123);
} 
```

如果要插入数据库，请编写一个 DAO 类：

```
public interface FooDao {
    void save(Foo foo);    
} 
```

根据需要使用 JDBC 实现。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-05-18T22:11:25.300

Google 的[Guava](https://code.google.com/p/guava-libraries/wiki/NewCollectionTypesExplained#Table)代码如下所示：

```
import com.google.common.collect.Table;
import com.google.common.collect.HashBasedTable;

Table<String, String, Integer> table = HashBasedTable.create();

for (int i = 0; i < 10; i++) {
    table.put("abc", "def", i);
} 
```

上面的代码将在 HashMap 中构造一个 HashMap，其构造函数如下所示：

```
Table<String, String, Integer> table = Tables.newCustomTable(
        Maps.<String, Map<String, Integer>>newHashMap(),
        new Supplier<Map<String, Integer>>() {
    @Override
    public Map<String, Integer> get() {
        return Maps.newHashMap();
    }
}); 
```

如果您想覆盖底层结构，您可以轻松更改它。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-01T15:53:29.613

只需创建一个类

```
 class Data{
  String first;
  String second;
  int number;
 } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-01T15:58:05.603

答案取决于值之间的关系。

1）您只想按照它们来的顺序存储所有三个：创建一个包含所有三个元素的自定义类，并将该类的一个实例添加到`List<MyData>`.

2）您想将第一个字符串与第二个和第三个数据相关联（并将第二个与 int 相关联）：创建一个 Map> 并向其中添加元素（您必须为每个新的第一个创建内部映射细绳）

3）您不想保留重复项，但您不想/不需要地图。：创建自定义类型（a'la 1））并将它们放在`Set<MyData>`

3）混搭

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-09-12T16:38:31.860

如果你不想创建一个类：

```
Map<String, Map<String,Integer>> myData; 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2017-10-07T12:59:37.970

您可以使用此代码！

```
public class List3D {

    public static class MyList {
        String a = null;
        String b = null;
        String c = null;

        MyList(String a, String b, String c) {
            this.a = a;
            this.b = b;
            this.c = c;
        }
    }

    public static void main(String[] args) {

        List<MyList> myLists = new ArrayList<>();
        myLists.add(new MyList("anshul0", "is", "good"));
        myLists.add(new MyList("anshul1", "is", "good"));
        myLists.add(new MyList("anshul2", "is", "good"));
        myLists.add(new MyList("anshul3", "is", "good"));
        myLists.add(new MyList("anshul4", "is", "good"));
        myLists.add(new MyList("anshul5", "is", "good"));

        for (MyList myLista : myLists)
            System.out.println(myLista.a + myLista.b + myLista.c);
    }
} 
```

# objective-c - 将手势识别器应用于所有视图组件？

> ID：10400286
> 
> 赞同：2
> 
> 时间：2012-05-01T15:50:29.397
> 
> 标签：objective-c, uiview, uigesturerecognizer, uiswipegesturerecognizer

是否可以在视图中实现手势识别器并将其传播到所有其他 UI 组件？如果我做这样的事情，它不起作用：

```
 UISwipeGestureRecognizer *swipe = [[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(SwipeRecognizer:)];
  swipe.direction = UISwipeGestureRecognizerDirectionRight;

  [self.view addGestureRecognizer:swipe];
  [TitleLabel addGestureRecognizer:swipe];
  [DescLabel addGestureRecognizer:swipe];
  [_TopView addGestureRecognizer:swipe];
  [_BottomView addGestureRecognizer:swipe];
  [_ScrollView addGestureRecognizer:swipe];
  [_TableView addGestureRecognizer:swipe];

  [swipe release]; 
```

我该怎么做？

我需要在我的视图上添加一个透明视图，覆盖所有对象？或者有一种智能的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T16:15:42.613

您的发现是正确的：多个组件的相同识别器，但是，为了完整起见......

```
NSInteger count = 1;
NSInteger total = [[self.view subviews] count];
for (id obj in [self.view subviews])
{
    NSLog(@"testing object %i of %i", count, total);
    count++;

    if ([obj respondsToSelector:@selector(addGestureRecognizer:)])
    {
        UISwipeGestureRecognizer *swipe = [[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(SwipeRecognizer:)];
        swipe.direction = UISwipeGestureRecognizerDirectionRight;
        [obj addGestureRecognizer: swipe];
        [swipe release];
        NSLog(@"swipe added");
    }
} 
```

我预见的唯一问题是，如果您想要应用识别器的任何对象都嵌入到更多已经是`self.view`. 然后，您需要检查找到的子视图`self.view`是否属于类 type `UIView`，如果是则遍历该视图的子视图等。

# iphone - iPhone -Pthread 条件信号未解除等待线程的阻塞

> ID：10400287
> 
> 赞同：3
> 
> 时间：2012-05-01T15:50:31.437
> 
> 标签：iphone, ios

我有两个线程运行如下。该代码在 iPhone 模拟器上完美运行，但在设备上却不行。在 iPhone（运行 ios 5.1）上，线程 A 发出条件信号，但线程 B 无限期地等待条件。

在线程 A 中，当数据准备好被处理时：

```
pthread_mutex_lock(&mutex);
outstandingSig++;
pthread_cond_signal(&condVar);
pthread_mutex_unlock(&mutex); 
```

在线程 B 中：

```
 while(1) 
{
  pthread_mutex_lock(&mutex);
  while(outstandingSig == 0)
   {
    pthread_cond_wait(&condVar, &mutex);
   }

  outstandingSig = 0;  //Reset outstanding signals
  pthread_mutex_unlock(&mutex);

 // process data
} 
```

有什么建议为什么它在设备上的行为不同？什么可能导致线程 B 不使用信号？为什么模拟器和设备上的行为不同？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T08:29:23.557

您是否找到了问题的根源或找到了解决方法？我认为我在 iPhone 设备上挂起 pthread_cond_wait 时遇到了类似的问题。

该条件在 iOS 模拟器上正确发出信号，但在 iPhone 上运行时挂起。如果我暂停执行然后恢复，则满足条件并继续执行。

但是我确实注意到， pthread_cond_wait 的实现在不同的平台上是不同的。

苹果手机：

> libsystem_c.dylib'pthread_cond_wait

iOS模拟器：

> libsystem_c.dylib'pthread_cond_wait$UNIX2003

# objective-c - 这是使用 NSAutoreleasePool 的正确方法吗？

> ID：10400288
> 
> 赞同：1
> 
> 时间：2012-05-01T15:50:36.330
> 
> 标签：objective-c, ios, memory-management, autorelease

我是 Objective-C 的新手，我不确定我是否以正确的方式使用 NSAutoreleasePool。

1.  如果我只想使用一次自动释放，我使用：

    ```
    NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];
    NSString *newText = [NSString stringWithFormat:@"%d", prograssAsInt];
    sliderLabel.text = newText;
    [pool release]; //newText will be released 
    ```

2.  如果我想多次使用自动释放，我使用：

    ```
    NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];
    NSString *newText = [NSString stringWithFormat:@"%d", prograssAsInt];
    sliderLabel.text = newText;
    [pool drain]; //newText will be released
    newText = [NSString stringWithFormat:@"%d", prograssAsInt];
    sliderLabel.text = newText;
    [pool drain]; //newText will be released
    newText = [NSString stringWithFormat:@"%d", prograssAsInt];
    sliderLabel.text = newText;
    [pool release]; //newText will be released 
    ```

这个可以吗？有内存泄漏吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T16:12:36.670

通常，如果您在主线程上并且没有使用大量资源密集型代码循环，那么您永远不需要创建自己的自动释放池。只需使用为您创建的默认设置。

如果你是多线程或者你正在做一个内存密集型长时间运行的循环（你可能不应该在主线程上做），你只需要自己做。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-01T15:54:36.177

我会说调用`[pool drain]`是不必要的。我从未见过它们在实践中使用过。我想如果你在自动释放池中分配大量内存，这可能是必要的。但在典型情况下，我认为不会。

顺便说一下，您将希望开始使用以下构造来用于自动释放池：

```
@autoreleasepool {
    ... your code ...
} 
```

显然，这比“旧”方式（你正在做的方式）更有效。从功能上讲，它是相同的，但在内部它的性能要好得多。在最近的 Xcode/iOS 发行说明中有一些关于此的内容。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-01T15:55:49.893

很抱歉这么说，但是[RTFM](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSAutoreleasePool_Class/Reference/Reference.html)。调用后`-drain`，池会自行释放，使其无效。

而且，目前，在带有 Apple 的 LLVM 编译器的 Objective-c 中，有一个名为的语言添加`@autoreleasepool`，它适用于 ARC 和非 ARC 代码，您可以这样利用：

```
@autoreleasepool {
    // code that will automatically have any -autoreleased variables cleaned up.
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-01T15:57:40.143

(2) 不行。[`-drain`](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSAutoreleasePool_Class/Reference/Reference.html#//apple_ref/occ/instm/NSAutoreleasePool/drain)并且`-release`是等效的（在引用计数环境中），并且`-drain`在自动释放池被释放之后。因此，您将双重释放自动释放池对象并使程序崩溃。

即使在 ARC 之前，除非您的内存预算非常紧张，否则在样板文件之外创建 NSAutoreleasePool 是不典型的`main()`。`-autorelease`无论如何，在每次 NSRunLoop 滴答之后，对象d 都会被释放到池中。如果您严格遵守所有权转移规则，则不会发生内存泄漏（请参阅[使用 Cocoa 和 Objective-C 了解引用计数](https://stackoverflow.com/questions/6578/understanding-reference-counting-with-cocoa-and-objective-c)）。

启用 ARC后*，*您甚至不需要关心这一点 — 编译器会在正确的位置插入`-retain`和`-release`。

* * *

此外，如果`sliderLabel.text`标记为`@property(retain)`(或`(strong)`)，则在 (1) 中释放自动释放池将不会释放 newText，因为该对象现在有了新所有者。

# vim - vim 支持特定类型的注释

> ID：10400291
> 
> 赞同：1
> 
> 时间：2012-05-01T15:50:38.953
> 
> 标签：vim

在 ruby​​ 元编程中，我们在多行字符串中有特殊类型的注释，它们将被评估。它们看起来像这样：[https ://github.com/rails/rails/blob/8775ffa37231d381cba34f0ecacb8a7bbcf0573f/activesupport/lib/active_support/memoizable.rb#L77](https://github.com/rails/rails/blob/8775ffa37231d381cba34f0ecacb8a7bbcf0573f/activesupport/lib/active_support/memoizable.rb#L77)

该字符串逐行分为两部分：带有插值的字符串，将在左侧进行评估，而代码示例在右侧。手动输入此评论是一项艰巨的工作。它需要许多手动缩进。

vim 中是否有一些插件或工具可以帮助编写此类注释？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-01T20:19:28.317

首先，了解在 vim 中使此类事情变得更轻松的功能：

*   视觉块模式

    *   [块状视觉](http://vimdoc.sourceforge.net/htmldoc/visual.html#CTRL-V)
    *   [分块运算符](http://vimdoc.sourceforge.net/htmldoc/visual.html#blockwise-operators)
*   [虚拟编辑](http://vimdoc.sourceforge.net/htmldoc/options.html#'virtualedit')；您可以将光标移动到没有任何文本的位置。这被称为“虚拟空间”。用户指南有[大量关于编辑 ascii 表的示例](http://vimdoc.sourceforge.net/htmldoc/usr_25.html#25.5)（在某些方面类似于您的情况）：

这里有两种方法：

假设垂直拆分始终位于固定列中（如本示例中的 84）：

```
/\%84v#\zs 
```

将找到垂直分隔条。现在您可以对其进行操作，例如

### 快速而肮脏：成对折叠评论

这导致注释行在“模板”行之后被折叠：

```
:g//s//\r         / 
```

> [*注意：(9) 个空格已被选择以匹配 OP 样本的起始缩进级别。
> IRL，您可以用来`indent('.')`以编程方式计算出多少空间*]

快速：

![在此处输入图像描述](../Images/7341dff7d925125f94b83b202d70000e.png)

重组：

```
:g//join! 
```

可能与“吃掉”多余缩进的东西结合在一起（9 个空格）

```
:g//j!|norm! n9x 
```

## 备择方案：

我通常会选择将块拆分为物理文件。重新组合它们需要更多的努力，但编辑更舒服，你可以利用 vim 的 diffmode。

快速入门：

```
ggn<C-v>ND
:tabnew  | 0put
:tabprev
gvVxgvVd
:tabnext | vert new | 0put 
```

将窗口置于差异模式：

```
:windo diffthis 
```

现在您可以独立编辑两个窗口，并使用实时差异突出显示。

![在此处输入图像描述](../Images/4bb8f25b3698909a2c1d18f0acba2067.png)

如果您想对此策略有更多意见，请告诉我。我可能会尝试从拆分临时窗口配置中重新组合。

# wpf - 如何对矢量图形进行 MVVM？

> ID：10400296
> 
> 赞同：0
> 
> 时间：2012-05-01T15:50:59.723
> 
> 标签：wpf, silverlight, design-patterns, mvvm

我希望显示一些矢量图形并让用户选择项目。

为增加起见，假设我正在显示一个办公室计划，其中包含

*   墙壁，
*   角落，
*   门，
*   视窗，
*   书桌

我希望能够针对视图模型编写测试来检查“逻辑”和“物理”布局。例如，我希望能够编写一个测试来确认墙壁与角落相遇以及确认它们如何显示的测试。

我还需要测试诸如“将门插入所选墙”之类的命令</p>

有没有人试过这样做？

数据绑定到图形项目有哪些问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T07:51:32.397

我将或多或少做同样的事情。我还没有意识到，但我的想法是有一个 ViewModelCanvas，我在其中放置逻辑，其中包含的对象是 WallViewModel、DoorViewModel 等。这些对象中的每一个都包含坐标、方向和其他属性。然后在视图层中，我有一个 WPFCanvas，其中 ViewModelCanvas 作为 Datacontext，每个视图模型类都有一个模板，用于定义它应该如何出现。

它应该适用于静态可视化。不确定拥有交互式视图是否足够灵活，但很有可能;)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T16:01:56.893

**更新**：我想得越多，我就越倾向于具有良好数据绑定支持的自定义控件（对 MVVM 很重要）。网络上有很多资源涵盖了这一点。

这个问题的半答案是有两个问题。第一个是复杂数据的显示和公开绑定支持，第二个是 MVVM 对其绑定的实践（但这变得很简单，因为大部分问题都在图中）。MVVM 是如何做矢量图形的？不会，控制会。控件如何以可扩展/通用的方式公开其需要的内容？不确定，但 CodePlex 上的 WPF Control Toolkit 库将包含更多涉及的示例。

~~这并不是一个真正的“给你”的答案，但从心态的角度来看，我认为需要考虑的重要一点是 ViewModel 不应该关心它是如何“显示”的（例如，ViewModel 不知道 View）。~~

然而，这*并不是*说 ViewModel 不应该关心模型呈现的是什么。

用于表示办公室平面图的良好模型结构（具有高度、x/y 坐标等属性）是重要部分。然后 ViewModel 可以验证模型，视图简单地响应这些验证结果。这显然会在 ViewModel 和 Model 之间产生耦合——我不确定那里的“规则”是什么。

然后，此模型的视觉表示将挂起，并且可以使用标准 MVVM 路由命令样式编码来解决诸如“插入门”之类的命令。在您的情况下，ViewModel 响应将在关联的 CurrentSelectedWall 处向 Office Plan 模型插入一个新的 Door。

或类似的东西。

我无法回答的问题是：视图和模型之间的感知紧密耦合是否允许？在我的示例中，模型将保存视图绘制形状的所有关键信息（高度、x/y 等）。也许这可以抽象出来。

不幸的是，使用 XAML 中的简单数据绑定可能无法创建视图 - 我只能看到一种视图代码繁重的方式来做到这一点...... :-(

~~另一种方法是自定义控件，它公开它需要的数据并提供数据绑定点来接收该数据。~~

# api - 在 Windows 7 手机上访问短信和通话记录

> ID：10400301
> 
> 赞同：2
> 
> 时间：2012-05-01T15:51:25.330
> 
> 标签：api, windows-phone-7, sms

我正在尝试访问短信和通话记录以获取副本并发送到服务器以供公司应用程序使用。是否可以在 Windows 7 设备上读取（不拦截）短信（传入和传出）和通话记录？

谢谢阿里

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T15:53:24.337

> 是否可以在 Windows 7 设备上读取（不拦截）短信（传入和传出）和通话记录？

从 Mango 开始，没有。没有记录在案的 API。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T15:53:57.670

不，确切的原因是这将使应用程序开发人员（*他们所有人*）能够窃取用户的私人数据。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-01T15:57:15.967

向应用程序开发人员公开的个人数据存在限制，仅限于日历信息和地址簿信息。有关这些的更多详细信息，请查看[Microsoft.Phone.UserData](http://msdn.microsoft.com/en-us/library/microsoft.phone.userdata%28v=vs.92%29.aspx)命名空间中的类

# java - 声明后使静态属性不可变

> ID：10400306
> 
> 赞同：1
> 
> 时间：2012-05-01T15:51:58.070
> 
> 标签：java, static, immutability, final

我可以在构造函数中定义静态属性而不是声明时将其设为最终属性吗？

我知道如何创建创建不可变实例的自定义类。但是有可能制作一些标准类的不可变对象吗？例如对象、JPanel、日历或其他任何东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T15:54:21.000

> 但是有可能制作一些标准类的不可变对象吗？

不，Java 中没有任何东西可以支持这一点。您所能做的就是限制引用的发布范围，并确保任何可以访问它的代码都不会改变它。当然，您可以创建自己的*包装器*类型，它只公开只读操作，并自由地公开它。

编辑：正如评论中所指出的，JDK 中对此有一些支持，用于集合 - 而[Guava](http://guava-libraries.googlecode.com)为它们提供了更彻底的不可变集合和构建器。但是，没有什么通用的方法可以获取任何可变类型的对象并为您返回它的不可变视图。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-01T16:03:33.513

# 静态初始化

> 我可以在构造函数中定义静态属性而不是声明时将其设为最终属性吗？

您只能`static final`在声明属性或在`static { }`块中分配属性。`null`当构造函数被调用时为时已晚，因为所有`static`代码都首先被评估，所以引用已经被分配了。

如在`private static final String s = "Hello World!";`

或者

```
private static final String s;
static { s = "Hello World!"; } 
```

# 动态代理

> 我知道如何创建创建不可变实例的自定义类。但是有可能制作一些标准类的不可变对象吗？例如对象、JPanel、日历或其他任何东西？

您可以使用[动态代理](http://docs.oracle.com/javase/1.5.0/docs/guide/reflection/proxy.html)来拥有所有变异方法[，例如抛出一个](http://java.dzone.com/articles/power-proxies-java)而不是它们实际执行的[任何方法。`setXXX()``UnsupportedOperationException`](http://java.dzone.com/articles/power-proxies-java)我认为这种方法是半骇人听闻的，但他们把它放到 Java 中来处理这种情况，所以它就是为这些类型的问题而设计的。

根据所涉及的接口和命名约定，它可能与自己手动创建包装器一样多。

所以这在 Java 中绝对是可能的，[这里有一个禁用`.add()`a 上的方法`List`](http://java.dzone.com/articles/power-proxies-java)的示例，这是使类不可变的开始。

**撞击金属**

[你可以用CGLib](http://cglib.sourceforge.net/)做同样的事情，甚至更多，但没有真正易于使用的文档或示例，所以我在这里仅提及它是为了完整性；这也是修改类行为的唯一方法`final`。[JMock 这样做是为了提供`final`类的 Mock 实现。](http://www.jmock.org/mocking-classes.html). 这是很[深奥的魔法](http://en.wikipedia.org/wiki/Deep_magic)，但如果你真的需要这样做，这是可能的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-01T15:59:58.990

对于问题的第一部分，如果我没看错的话：

```
class Test{

    public static final int x;
    public final int y;

    public Test(){
        y = 16;
    }    

    static{
        x = 42;
    }

} 
```

基本上，`static final`字段也可以在静态初始化块中初始化，并且`final`字段可以在构造函数中初始化。

# iphone - 撤消在视图控制器中所做的所有更改

> ID：10400310
> 
> 赞同：0
> 
> 时间：2012-05-01T15:52:40.423
> 
> 标签：iphone, ios, core-data, nsmanagedobjectcontext, nsundomanager

是否可以撤消视图控制器中所做的所有更改而不影响其父视图控制器中所做的更改？顺便提一句。它们具有相同的 managedObjectContext。附言。我有两个实体 A 和 B。A 与 B 有一对多关系。视图控制器 VCA 用于在 A 中执行一些更改。视图控制器 VCB 用于在 B 中执行一些更改。VCA 是 VCB 的父视图控制器.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T22:09:22.437

您应该为子视图控制器创建新的 NSManagedObjectContext 并将撤消附加到它。NSManagedObjectContext 非常轻巧，成本也不高。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T22:32:58.357

无需创建新的上下文。当您离开子视图控制器时，您可以选择

```
[managedObjectContext save:&error]; 
```

或者

```
[managedObjectContext rollback]; 
```

在后一种情况下，您所有的新实体实例、数据修改等都将被丢弃。

# asp.net - 当按下后退按钮时，如何让 radlistview 分页保持它的索引？

> ID：10400312
> 
> 赞同：0
> 
> 时间：2012-05-01T15:52:44.810
> 
> 标签：asp.net, listview, telerik, pagination

场景是我有一个带有分页的列表视图。如果用户在第 4 页，然后单击一个链接，确定它是错误的链接，然后单击后退按钮，则列表视图需要在第 4 页以相同的排序显示，就像他离开它一样。目前，它正在重置排序并在第 1 页显示。

我尝试在更改索引时将当前页面索引存储在会话中，然后在预渲染事件中从会话中设置它，但随后出现“页面过期”错误。有任何想法吗？TIA

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T14:19:52.497

后退按钮操作只能在客户端 javascript 中处理，因为服务器端代码不运行。对于您正在尝试做的事情，您需要查看这两个资源（应用程序历史记录点）：

*   [http://msdn.microsoft.com/en-us/library/cc488548.aspx](http://msdn.microsoft.com/en-us/library/cc488548.aspx)
*   [http://msdn.microsoft.com/en-us/library/cc488538.aspx](http://msdn.microsoft.com/en-us/library/cc488538.aspx)

# magento - Magento 前端缺少 UPS 运输方式

> ID：10400314
> 
> 赞同：5
> 
> 时间：2012-05-01T15:52:56.140
> 
> 标签：magento, shipping, ups

什么会导致在 magento 的运输方式管理页面中选择的 ups 运输方式不会作为运输选项显示给客户。具体来说，我试图让地面商业选项出现在前端。

我已经对此进行了一些研究，似乎以前有人问过这个问题并且从未回答过（我可以找到），所以我会再问一次并投入我对这个主题的研究。

我从购物车中的运费估算中跟踪了源代码，发现当您输入邮政编码时，它会在“sales_flat_quote_address”表中创建一个条目，其中基本上只填写了邮政编码和 id 字段。

它还在“sales_flat_quote_shipping_rate”中创建行。一个用于该报价/地址对的每种适用的运输方式。

当 magento 列出运输选项时，它会引用此表。

在运输方式管理员和这个数据库表之间的某个地方，一些运输方式被过滤掉了。

我认为这与住宅/商业地址有关。但是，如果仅给出邮政编码，则 ups 的评级 api 无法确定地址是住宅/商业地址。此外，在管理页面中更改目标类型不会影响前端显示的方法。

作为参考，如果在后端选择了所有 ups 运输方式，以下是唯一显示在前端的方式：

地面
3 天 选择
2nd Day Air
Next Day Air Saver
Next Day Air
Next Day Air Early AM

这是在后端选择的 22 个选项中的一个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-27T05:19:56.683

从管理面板转到系统 > 配置 在左侧的配置面板中，在销售下，单击运输方式。单击以展开 UPS 部分。然后将启用设置为是。

# iphone - -systemFontOfSize: 和 -boldSystemFontOfSize: 之间是否有中等粗细字体？

> ID：10400320
> 
> 赞同：41
> 
> 时间：2012-05-01T15:53:24.003
> 
> 标签：iphone, ios, ipad, uifont

-systemFontOfSize 太细，boldSystemFontOfSize 太粗。我需要一些介于两者之间的东西。

当我像这样创建 UIFont 时：

```
[UIFont boldSystemFontOfSize:14]; 
```

然后调试器打印这个字体信息：

> font-family: ".Helvetica NeueUI"; 字体粗细：粗体；字体样式：正常；字体大小：14px

有时字体具有中等字体粗细。如何创建这种类型但重量中等的字体？

* * *

## 回答 #1

> 赞同：85
> 
> 时间：2015-09-02T16:02:51.200

从[iOS 8.2](https://developer.apple.com/library/prerelease/ios/releasenotes/General/iOS82APIDiffs/modules/UIKit.html)开始，您可以使用：

```
[UIFont systemFontOfSize:14 weight:UIFontWeightMedium]; 
```

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-05-01T16:01:50.957

调用`NSLog(@"%@", [UIFont fontNamesForFamilyName:@"Helvetica Neue"]);`会打印 Helvetica Neue 的所有可用字体样式，`HelveticaNeue-Medium`其中听起来像您想要的字体样式：

```
UIFont *font = [UIFont fontWithName:@"HelveticaNeue-Medium" size:14.0f]; 
```

如果您想确保在系统字体更改时字体也会更改（例如，就像从 Helvetica 到 Helvetica Neue 的视网膜设备所做的那样），您可以首先获取系统字体，然后获取它`familyName`并`pointSize`使用中等重量检索一个`+ fontNamesForFamilyName`进而`+ fontWithName:size:`

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2015-10-20T16:50:30.257

斯威夫特 2.0，xcode7.1

```
if #available(iOS 8.2, *) {
   titleLabel?.font = UIFont.systemFontOfSize(15, weight: UIFontWeightMedium)
} else {
    titleLabel?.font = UIFont(name: "HelveticaNeue-Medium", size: 15)
} 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2017-06-20T10:53:40.120

斯威夫特 3：

```
UIFont.systemFont(ofSize: 14, weight: UIFontWeightMedium) 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2017-11-23T10:34:04.280

使用 Swift 4 或 5，添加这个扩展：

```
extension UIFont {
    class func mediumSystemFont(ofSize pointSize: CGFloat) -> UIFont {
        return self.systemFont(ofSize: pointSize, weight: .medium)
    }
} 
```

然后 ：

```
myLabel.font = UIFont.mediumSystemFont(ofSize: 16) 
```

相同的原理适用于`.semibold`,`.black`等，检查[UIFont.Weight](https://developer.apple.com/documentation/uikit/uifont.weight)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-10-19T14:31:21.637

Swift 2.3 并且不改变字体大小：

```
extension UIFont {
    var mediumFont: UIFont {
        return UIFont.systemFontOfSize(self.pointSize, weight: UIFontWeightMedium)
    }
} 
```

用于：

```
titleLabel.font = titleLabel.font.mediumFont 
```

# javascript - 手动输入字符串的 JSON 解析语法错误

> ID：10400322
> 
> 赞同：0
> 
> 时间：2012-05-01T15:29:12.363
> 
> 标签：javascript, python

当我尝试 stringyfy

```
ABC
<a href="abc.co.dds">
 dfsdsf
</a> 
```

JSON给了我

```
"ABC\n<a href=\"abc.co.dds\">\n dfsdsf\n</a>" 
```

但是当我尝试

```
s=('"ABC\n<a href=\"abc.co.dds\">\n dfsdsf\n</a>"');
JSON.parse(s) 
```

`SyntaxError: Unexpected token`我在我的控制台上得到一个

如何使用 JSON 解析手动输入的字符串？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T15:57:34.377

从[JSON 规范](http://www.ietf.org/rfc/rfc4627)（第二个 2）：

> JSON 文本是一个序列化的对象或数组。

由于您从字符串（而不是对象或数组）开始，因此 JSON 序列化程序应该（IMO）抛出异常而不是给您转义字符串。

您可以通过在转换为 JSON 之前包装您的字符串来解决您的问题`{ "data": your_string }`（使用您使用的语言支持对象/哈希映射/关联数组/等的任何语法）。显然，您需要`foo.data`在将 JSON 解析为另一端的本机对象后访问）。

# php - 从 Sharepoint 上传时文件扩展名无效

> ID：10400326
> 
> 赞同：2
> 
> 时间：2012-05-01T15:53:35.527
> 
> 标签：php, html, sharepoint, file-upload

我有一个网站正在运行，它使用文件上传。一切正常，除了其中一位用户。他们使用 IE8 将文件从他们的 SharePoint 服务器上传到网站。当我查看 PHP 中的 $_FILES 变量时，'name' 键看起来像这样：

```
somefilename[1] 
```

代替

```
somefilename.pdf 
```

然后阻止上传，因为不允许扩展。有没有人曾经处理过/见过这个？它看起来像一个临时名称或隐藏的文件扩展名。

编辑：

你们中的一些人请求了 $_FILES 变量：

```
[Filedata] => Array
    (
        [name] => Algemene%20Voorwaarden%20Corporate%20Services%202011[2]
        [type] => application/octet-stream
        [tmp_name] => /tmp/phps19zye
        [error] => 0
        [size] => 148021
    ) 
```

这应该是一个 PDF 文件。我需要扩展，不仅出于安全原因，[type] 更适合于此，而且还用于演示和功能。我需要为文件类型显示正确的图标，并单独处理图像。

HTML 表单只是一个基本的测试表单：

```
<!DOCTYPE html>
<html>
    <head>
        <title></title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>
    <body>
        <form action="uploadtest3.php" method="post" enctype="multipart/form-data">
            <input type="file" name="file_upload" id="file_upload" />
            <br /><input type="submit" value="Uploaden" />
        </form>
    </body>
</html> 
```

PHP文件如下：

```
$targetFolder = '/uploadtests/uploads3';

if (!empty($_FILES)) {
    $tempFile = $_FILES['file_upload']['tmp_name'];
    $targetPath = $_SERVER['DOCUMENT_ROOT'] . $targetFolder;
    $targetFile = $targetPath . $_FILES['file_upload']['name'];

    move_uploaded_file($tempFile,$targetFile);
        echo "OK";
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T19:55:26.047

`somefilename`似乎是一个数组。您的用户是否选择了多个要上传的文件？您需要限制允许上传的文件数量，或者捕获数组并正确处理。您还可以确保将 Sharepoint 设置为[允许上传多个文件](http://social.msdn.microsoft.com/forums/en-US/sharepointdevelopment/thread/54fe06d5-caba-431c-8472-0b500e22f390)。

此外，我还找到了有关[IE8 将文件](http://blogs.iis.net/webtopics/archive/2009/07/27/uploading-a-file-using-fileupload-control-fails-in-ie8.aspx)上传到服务器的方式的信息。源文章指出：

> 此外，Internet 区域的“上传文件时包括本地目录路径”URLAction 已设置为“禁用”。此更改可防止潜在敏感的本地文件系统信息泄露到 Internet。**例如，Internet Explorer 8 现在将只提交文件名 image.png，而不是提交完整路径 C:\users\ericlaw\documents\secret\image.png。**

这意味着，如果您的代码（或 Sharepoint）希望将文件夹结构与文件`PATH_SEP`名分隔开，那么对于 IE8，它显然会失败。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T17:13:11.213

## 介绍

以前见过这个问题，但不确定是什么原因造成的。我什至不想称其为错误，因为`some files extension can be intentionally removed or altered`出于恶意目的。

`important thing is validating file properly`文件是否有扩展名，最省心

**原因：**

*   `File Extension Can easily be faked`如果您的应用程序仅依赖文件扩展名进行验证，那就太糟糕了

*   `$_FILES ['file_upload']['type']`将返回`application/octet-stream`所有没有扩展名的文件，因此它也不是验证选项

*   由于它是浏览器问题，`Client Related Problem`因此您无法控制。如果您能够管理这一点，您肯定会增加用户体验

## 简单补丁

解决方案非常简单。您只需验证您的文件`FILEINFO`并修复上传文件的任何扩展问题。

您还需要根据 Mime 类型验证所有上传的文件......并删除任何无效文件。

**概念证明**

```
$allowedTypes = array (
        "pdf" => "application/pdf" 
);

$pathFinal = "final";
$pathTemp = "temp";
try {
    if (! empty ( $_FILES )) {
        $tempFile = $_FILES ['file_upload'] ['tmp_name'];
        $fileName = $_FILES ['file_upload'] ['name'];
        $destinationTemp = $pathTemp . DIRECTORY_SEPARATOR . $fileName;
        $destinationFinal = $pathFinal . DIRECTORY_SEPARATOR . $fileName;
        /**
         * Move To tempary File
         */
        move_uploaded_file ( $tempFile, $destinationTemp );

        $fileMime = mimeInfo ( $destinationTemp );
        $key = array_search ( $fileMime, $allowedTypes );

        /**
         * Validate Mime Type
         */
        if (empty ( $key )) {
            unlink ( $destinationTemp );
            throw new Exception ( "File Type not Supported" );
        }

        /**
         * Fix Extention Issues
         */
        $ext = pathinfo ( $destinationTemp, PATHINFO_EXTENSION );

        if (empty ( $ext )) {
            $destinationFinal .= "." . $key;
        }

        /**
         * Transfer File to Original Location
         */
        copy ( $destinationTemp, $destinationFinal );
        unlink ( $destinationTemp );

        echo "OK";
    }
} catch ( Exception $e ) {
    echo "ERROR :", $e->getMessage ();
} 
```

**使用的功能**

```
function mimeInfo($file) {
    return finfo_file ( finfo_open ( FILEINFO_MIME_TYPE ), $file );
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T17:50:20.537

您不应该按扩展名而是按 Mime 类型检查文件类型。使用变量`$_FILES["uploaded_file"]["type"]`获取 Mime 类型。

这样用户就不能用奇怪的 ASCII 字符篡改扩展名，并且您知道什么文件是可靠的。

# emacs - 参数数量错误：called-interactively-p, 1

> ID：10400328
> 
> 赞同：8
> 
> 时间：2012-05-01T15:53:42.063
> 
> 标签：emacs, centos

```
~/.emacs

;; http://cx4a.org/software/auto-complete/manual.html
(add-to-list 'load-path "~/.emacs.d/")
(require 'auto-complete-config)
(add-to-list 'ac-dictionary-directories "~/.emacs.d//ac-dict")
(ac-config-default) 
```

当我加载 emacs 时，它会将错误抱怨为“参数数量错误：称为交互式 p，1”。换句话说，emacs 发现错误直到`(ac-config-default)`.

当我检查文件 .emacs.d/auto-complete.elc 时，我发现了字符串“call-interactively-p”。

问题> 我在 ubuntu 上使用了相同的设置，没有问题。现在我正在切换centos 6.2。有没有办法解决这个问题？

emacs --debug-init 显示以下错误：

͂

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-10T00:24:44.960

值得一提的是，如果您将 emacs.d 目录从一台机器移动到另一台机器，则可能会出现此错误。

如果是这种情况，删除已编译的 *.elc 文件应该可以解决问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-01T16:10:10.267

在最近的 Emacsen 中，`called-interactively-p`需要一个参数。

做`C-h f ac-quick-help RET`，然后替换`(called-interactively-p)`为`(called-interactively-p 'any)`并重新编译/重新加载。或者将此错误发送给包的作者。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-01T17:31:09.067

[正如我最近在其他一些stackoverflow问题中提到的，*强烈*建议不要将“~/.emacs.d”放在你`load-path`的目录中，因为~/.emacs.d目录可以/将保存名称与真正的emacs包冲突的配置文件. 即把自动完成文件放在~/.emacs.d 的*子*目录中。]

您的错误看起来很奇怪：虽然`called-interactively-p`在 Emacs-23 中声明为正好采用 1 个参数，但它实际上也接受 0 个参数（以减轻想要同时支持 Emacs-22 和 Emacs-23 的外部包的痛苦）。因此，您的配置中似乎还有其他东西以某种方式重新定义了所谓的交互式-p。

# ember.js - #each 中嵌套子视图上的动态类绑定 - 如何？

> ID：10400329
> 
> 赞同：1
> 
> 时间：2012-05-01T15:53:47.740
> 
> 标签：ember.js

我有一个与每个助手类似的视图：

```
<table class="select-sect" cellspacing="0">
{{#each sections}}
<tr {{bindAttr class="highlight:highlight"}} {{action "selectSection" }}>
  <td class="key">
    {{#each zones}}
      <em {{bindAttr style="color"}}>&nbsp;</em>
    {{/each}}
  </td>
  <td class="sect">{{name}}</td>
  <td class="price">{{currency lowPrice}} - {{currency highPrice}}</td>
</tr>
{{/each}}
</table> 
```

像这样绑定动态类效果很好。如果我在控制器中设置 section.highlight == true，则视图将使用适当的类进行更新。

“调用”代码：

```
zone.section.set('highlight', true); 
```

因为我需要处理每一行的一些其他事件，所以我将整个表格行迁移到嵌套视图。我正在寻找一种使动态类像以前一样工作的方法。

```
{{#each sections}}
{{#view SYOS.SelectSectionRowView sectionBinding="this" }}
  <td class="key">
    {{#each section.zones}}
      <em {{bindAttr style="color"}}>&nbsp;</em>
    {{/each}}
  </td>
  <td class="sect">{{section.name}}</td>
  <td class="price">{{currency section.lowPrice}} - {{currency section.highPrice}}</td>
{{/view}}
{{/each}} 
```

我认为我不能使用相同的 bindAttr 解决方案，因为它需要应用于 #view 助手。我也试过 classNameBindings & classBinding 无济于事。更新 section.highlight 不再触发此视图以应用动态类。

查看 w/ classNameBindings：

```
SYOS.SelectSectionRowView = Em.View.extend({

tagName: 'tr',

classNameBindings: ['isHighlighted:highlight'],

isHighlighted: function () {
    return this.section.highlight;
} //also tried .property('section')
}); 
```

使用 classBinding 查看：

```
{{#view SYOS.SelectSectionRowView sectionBinding="this" classBinding="needsHighlight"}} 
```

在视图类中：

```
needsHighlight: function () {
  if (this.section.highlight) {
return 'highlight';
  }

return '';
} .property('section'), 
```

这些似乎都不起作用。任何人都可以深入了解如何实现这样的场景吗？

非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T16:22:00.487

尝试 classNameBindings: ['section.highlight:highlight']

# jqgrid - jqGrid - 没有这样的方法：setFrozenColumns

> ID：10400330
> 
> 赞同：0
> 
> 时间：2012-05-01T15:53:53.603
> 
> 标签：jqgrid

我使用的是 jqgrid 4.1.2，用于创建网格的代码示例如下所示。一切正常，直到我尝试设置冻结列，此时抛出运行时错误 - 'jqGrid - 没有这样的方法：setFrozenColumns' - 任何人都知道为什么会这样吗？

```
jQuery("#grid").jqGrid({
    url: '@Url.Action("LoadGrid")',
    editurl: '@Url.Action("UpdateGrid")',
    datatype: 'json',
    shrinkToFit: false,
    autowidth: true,
    mtype: 'POST',
    ..... columns ....
    rowNum: 100,
    rowList: [5, 10, 20, 50],
    sortname: 'Id',
    sortorder: "desc",
    viewrecords: true,
    caption: 'Instances',
    height: 225
});
$("#grid").navGrid("#pager", { edit: true, add: false, del: false, search: false });
$("#grid").jqGrid('setFrozenColumns'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T16:05:15.747

在我看来，从 4.3.0 版本的 jqGrid 开始支持冻结列。为了能够使用该功能，您必须更新您使用的 jqGrid。

# php - 正则表达式新手需要帮助

> ID：10400331
> 
> 赞同：1
> 
> 时间：2012-05-01T15:53:53.497
> 
> 标签：php, regex

我对正则表达式完全没用，任何建议都非常感谢。

```
$url = 'http://somedomain.com?var=<##var##>&var2=<##var2##>';
echo preg_replace('^<##(.*)##>$', '', $url); 
```

试图剥离（包括）<## 和##> 之间的任何内容。所以我的结果是：

```
http://somedomain.com?var=&var2= 
```

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-01T16:00:12.433

代码应该是：

```
<?php
$url = 'http://somedomain.com?var=<##var##>&var2=<##var2##>';
$newUrl = preg_replace('/<##.*?##>/', '', $url);
echo $url;
?> 
```

您使用的`^`and`$`是错误的，它们代表字符串的开头或结尾，如果位于字符串的开头和结尾，您将不会只替换`<##...##>`部分。`<##``##>`

`?`after也`.*`意味着它匹配从`<##`到 next的所有内容`##>`。如果您使用`.*`它匹配从第一个`<##`到最后一个的所有内容，`##>`那么您的结果将是`http://somedomain.com?var=`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-01T15:58:16.847

`<##.*?##>`用空字符串替换所有匹配项。

```
$url = 'http://somedomain.com?var=<##var##>&var2=<##var2##>';
echo preg_replace('/<##.*?##>/', '', $url); 
```

诀窍是 ?，意思是“尽可能少地匹配，但我必须尽可能多地匹配”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-01T16:01:21.517

你很接近你的正则表达式。

`^`表示“行首”，而`$`, 表示“行尾”。删除它们，否则只有当整个字符串是`<##var##>`.

`.*`意味着匹配任何东西。包括`>`. 您的正则表达式将匹配`<##var##>&var2=<##var2##>`，而不仅仅是每个组。

试试这个正则表达式：

```
<##([^>]*)##> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-01T16:03:43.670

```
echo preg_replace('(<##.+?##>)', '', $url); 
```

# javascript - 如何读取父域的 cookie

> ID：10400338
> 
> 赞同：4
> 
> 时间：2012-05-01T15:54:07.917
> 
> 标签：javascript, cookies

如何从“foo.bar.com”网页中的 javascript 访问“.bar.com”上的 cookie？

document.cookie（在 Chrome 中）似乎不包含此 cookie，即使我可以在 Chrome 的“资源”选项卡上看到它并看到它通过 POST 发送到 Web 服务器。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T16:07:20.207

在设置 cookie 时，您定义了可以读取的域，子域也可以使用。

也存在仅限 http 的 cookie，它们无法使用 javascript 读取，但您会在 http 请求中看到它们。

# mysql - MySQL：仅在完成所有项目时才选择用户？

> ID：10400341
> 
> 赞同：1
> 
> 时间：2012-05-01T15:54:19.447
> 
> 标签：mysql

我有两个表：users 和missionInfo。只有当该班级的所有用户都完成了所有任务时，我才需要选择班级。

```
users table:
userID  classID
1       1
2       1
3       1
4       2
5       2

missionInfo table:
userID  missionID   
1       1
1       2
1       3
2       1
2       2
2       3
3       1
3       2
3       3
4       1
5       1
5       2 
```

所以，我应该取回 classID 1，因为用户 1 到 3 都完成了所有任务 1 到 3，并且都是同一个班级的一部分。

帮助？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T16:17:52.423

```
SELECT classID FROM (
  SELECT   classID
  FROM     users JOIN missionInfo USING (userID)
  GROUP BY classID, missionID
  HAVING   COUNT(DISTINCT userID) = (
    SELECT COUNT(*) FROM users u WHERE u.classID = users.classID
  )
) AS t
GROUP BY classID
HAVING COUNT(*) = @total_number_of_missions 
```

在[sqlfiddle](http://sqlfiddle.com/#!2/3ef93/8)上查看。

如果在表中只出现一次，则`DISTINCT`可以省略。`(userID,missionID)``missionInfo`

内部查询返回`classID`该类的所有用户已完成的每个任务；外层将结果限制为仅完成指定数量任务的那些班级。

# android - Android RelativeLayout 将一个视图的中心对齐到另一个视图的右上角

> ID：10400348
> 
> 赞同：30
> 
> 时间：2012-05-01T15:54:46.990
> 
> 标签：android, alignment, android-relativelayout

我有使用 RelativeLayout 的经验，但我从来没有遇到过解决我遇到的问题的方法（除了硬编码边距值，我想避免这种情况。）

我想尝试在RelativeLayout 中创建类似下图的内容：

![在此处输入图像描述](../Images/76ea25336737c403d011309a86d13054.png)

该框是它自己的视图，我想让包含橙色圆圈的视图居中于包含蓝色框的视图的右上角。

我试过了`android:alignTop="boxView"`，`android:alignRight="boxView"`但是那把我的橙色圆圈完全放在了我的盒子里。我希望它使圆圈位于框的右上角上方。

任何人都知道我如何通过RelativeLayout 获得这个结果？最好不必为橙色点视图硬编码远离屏幕边缘的边距。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-05-01T16:15:53.353

此代码创建您要查找的内容，但确实使用边距。如果这是您正在创建的动态结构，现在您可以在代码中设置边距。如您所见，我使用负边距将右上角的形状移出蓝色框。这些需要是您尝试移动的圆圈高度的一半。您可以在代码中完成所有这些操作，以使右上角的圆圈居中。

```
 <?xml version="1.0" encoding="utf-8"?>
    <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >

        <LinearLayout
            android:id="@+id/linearLayout1"
            android:layout_width="100dp"
            android:layout_height="100dp"
            android:layout_alignParentBottom="true"
            android:layout_alignParentLeft="true"
            android:background="#0000FF"
            android:orientation="vertical" >
        </LinearLayout>

        <LinearLayout
            android:layout_width="26dp"
            android:layout_height="26dp"
            android:layout_alignRight="@+id/linearLayout1"
            android:layout_alignTop="@+id/linearLayout1"
            android:layout_marginRight="-13dp"
            android:layout_marginTop="-13dp"
            android:background="#FF00FF"
            android:orientation="vertical" >
        </LinearLayout>

    </RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-09-19T19:51:23.083

您可以使用 ConstraintLayout 圆形定位，只需将视图对齐 45 度角并调整半径：

```
<androidx.constraintlayout.widget.ConstraintLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MainActivity">

    <LinearLayout
        android:background="@color/colorAccent"
        android:id="@+id/view"
        android:layout_width="100dp"
        android:layout_height="100dp"
        android:orientation="vertical"
        app:layout_constraintBottom_toBottomOf="parent"
        app:layout_constraintEnd_toEndOf="parent"
        app:layout_constraintStart_toStartOf="parent"
        app:layout_constraintTop_toTopOf="parent" />

    <LinearLayout
        android:background="@color/colorPrimary"
        android:id="@+id/alignedView"
        android:layout_width="30dp"
        android:layout_height="30dp"
        app:layout_constraintCircle="@id/view"
        app:layout_constraintCircleAngle="45"
        app:layout_constraintCircleRadius="60dp" />

</androidx.constraintlayout.widget.ConstraintLayout> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-03-11T18:55:33.480

最好和正确的方法：

```
<androidx.constraintlayout.widget.ConstraintLayout
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginTop="@dimen/_10sdp">

    <View
        android:id="@+id/viewBox"
        android:layout_width="35dp"
        android:layout_height="35dp"
        android:background="@color/black"
        app:layout_constraintBottom_toBottomOf="parent"
        app:layout_constraintLeft_toLeftOf="parent" />

    <View
        android:layout_width="15dp"
        android:layout_height="15dp"
        android:src="@drawable/ic_close"
        app:layout_constraintBottom_toTopOf="@+id/viewBox"
        app:layout_constraintLeft_toRightOf="@+id/viewBox"
        app:layout_constraintRight_toRightOf="@+id/viewBox"
        app:layout_constraintTop_toTopOf="@+id/viewBox" />

</androidx.constraintlayout.widget.ConstraintLayout> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-11-02T13:10:50.530

使用约束布局很容易实现。

只需将圆的开始和结束约束设置为同一点，并将顶部和底部设置为同一点（例如 textview 的右上角），如下所示：

```
<TextView
    android:id="@+id/newWarningLabel"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:gravity="left|center"
    android:lines="2"
    android:text="testtest"
    android:textColor="@color/white"
    android:textSize="12sp"
    android:textStyle="bold"
    app:layout_constraintBottom_toBottomOf="parent"
    app:layout_constraintEnd_toEndOf="parent"
    app:layout_constraintStart_toStartOf="parent"
    app:layout_constraintTop_toTopOf="parent"/>

<TextView
    android:id="@+id/alertCounter"
    android:layout_width="20dp"
    app:layout_constraintStart_toStartOf="@id/newWarningLabel"
    app:layout_constraintEnd_toStartOf="@id/newWarningLabel"
    app:layout_constraintTop_toTopOf="@id/newWarningLabel"
    app:layout_constraintBottom_toTopOf="@id/newWarningLabel"
    android:layout_height="20dp"
    android:gravity="center"
    android:textColor="@color/white"
    android:textStyle="bold"
    android:textSize="10sp"
    android:visibility="visible"
    android:text="1"
    android:background="@drawable/red_circle"/> 
```

[![在此处输入图像描述](../Images/36aa00302202e4856b4c587a3da7ce01.png)](https://i.stack.imgur.com/jx8WW.png)

# spring-mvc - @RequestMapping 映射在 Spring 3.1 中不再起作用

> ID：10400349
> 
> 赞同：1
> 
> 时间：2012-05-01T15:54:54.710
> 
> 标签：spring-mvc

我更新了我的项目以使用 3.0.6.RELEASE 中的 3.1.0.RELEASE（实际上 - 不是我，但 Spring Roo 做到了），并且以下映射不再起作用：

```
@RequestMapping(value = "/partners/public/logos/{id}/{filename}.{ext}")
public void partners_get_logo2(@PathVariable Long id,
        @PathVariable String filename, @PathVariable String ext,
        ModelMap modelMap, HttpServletRequest request,
        HttpServletResponse response) throws Exception {
...
} 
```

如何映射超过 2 个路径变量？

# c# - 如何将“default(SomeType)”从 C# 翻译成 CIL？

> ID：10400358
> 
> 赞同：12
> 
> 时间：2012-05-01T15:55:38.830
> 
> 标签：c#, default, cil

我目前正在处理一个涉及`System.Reflection.Emit`代码生成的问题。我试图弄清楚在我将`default(SomeType)`在 C# 中使用的地方发出什么 CIL。

我从 Visual Studio 11 Beta 运行了一些基本实验。[JustDecompile](http://www.telerik.com/products/decompiler.aspx)`default(bool)`向我显示了、`default(string)`和的以下 CIL 输出`default(int?`：

```
.locals init (
    [0] bool                                         V_0,
    [1] string                                       V_1,
    [2] valuetype [mscorlib]System.Nullable`1<int32> V_2    
)

// bool b = default(bool);
ldc.i4.0
stloc.0

// string s = default(string);
ldnull
stloc.1

// int? ni = default(int?);
ldloca.s V_2
initobj valuetype [mscorlib]System.Nullable`1<int32> 
```

由此看来`default(T)`，编译器似乎已将其解析为给定类型的最合适的 CIL。

* * *

我继续使用三种通用方法查看在更一般的情况下会发生什么：

```
T CreateStructDefault<T>() where T : struct { return default(T); }
T CreateClassDefault<T>()  where T : class  { return default(T); }
T CreateClassNull<T>()     where T : class  { return null;       } 
```

所有三种方法都产生相同的 CIL 方法体：

```
.locals init (
    [0] !!T V_0,
    [1] !!T V_1
)

IL_0000: nop    
IL_0001: ldloca.s V_1
IL_0003: initobj !!T
IL_0009: ldloc.1
IL_000a: stloc.0
IL_000b: br.s IL_000d
IL_000d: ldloc.0
IL_000e: ret 
```

* * *

**问题：**

我能从这一切中得出结论，C#`default(SomeType)`最接近 CIL 的……

*   `initobj`对于非原始类型（除了`string`？）
*   `ldc.iX.0`//`ldnull`等对于原始类型（加号`string`）？

为什么不`CreateClassNull<T>`只是翻译成`ldnull`，而是翻译成`initobj`？毕竟，`ldnull`是为`string`（这也是一个引用类型）发出的。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-01T16:38:14.083

> 我可以从所有这些中得出结论，C#`default(SomeType)`最接近于 CIL 的`initobj`非原始类型和`ldc.i4.0`,`ldnull`等。

这是一个合理的总结，但更好的思考方式是：如果 C# 编译器将分类`default(T)`为*编译时常*量，则发出该常量的值。数字类型为零，bool 为 false，任何引用类型为 null。如果它不会被归类为常量，那么我们必须 (1) 发出一个临时变量，(2) 获取临时变量的地址，(3) 通过其地址初始化该临时变量，以及 (4) 确保临时变量的值是在需要时在堆栈上。

> 为什么不`CreateClassNull<T>`只是转换为 ldnull，而是转换为 initobj？

好吧，让我们按照自己的方式去做，看看会发生什么：

```
... etc
.class private auto ansi beforefieldinit P
       extends [mscorlib]System.Object
{
  .method private hidebysig static !!T  M<class T>() cil managed
  {
    .maxstack  1
    ldnull
    ret
  } 
  ... etc 
```

...

```
D:\>peverify foo.exe

Microsoft (R) .NET Framework PE Verifier.  Version  4.0.30319.17379
Copyright (c) Microsoft Corporation.  All rights reserved.

[IL]: Error: 
[d:\foo.exe : P::M[T]]
[offset 0x00000001]
[found Nullobjref 'NullReference']     
[expected (unboxed) 'T'] 
Unexpected type on the stack.
1 Error(s) Verifying d:\foo.exe 
```

这可能就是我们不这样做的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T15:59:20.297

是的，就是`default`这样。`0`您推断它只是基本（或等价物）的语法糖是正确的。

# c# - 如何确保我的启动程序在加载系统托盘后运行？

> ID：10400361
> 
> 赞同：2
> 
> 时间：2012-05-01T15:55:48.037
> 
> 标签：c#, windows, system-tray

我有一个从网络登录脚本启动的 Windows 窗体应用程序。此应用程序使用一个保持隐藏状态但`NotifyIcon`在系统托盘中有一个的表单。`NotifyIcon`用户使用菜单与程序交互。我遇到的问题是，当脚本运行时，`NotifyIcon`即使进程在后台运行，也不会显示。因此，用户不知道程序是否正在运行。这不会一直发生，但我相信当应用程序在系统托盘准备好之前尝试启动时会发生这种情况。

如何确保我的启动程序在加载系统托盘后运行？

# c# - 如何检查对象内容平等而不是对象引用平等

> ID：10400366
> 
> 赞同：1
> 
> 时间：2012-05-01T15:56:18.160
> 
> 标签：c#, reflection, properties

我有一个看起来像这样的实体框架实体：

```
class ListItemEtlObject
{
    public int ID { get; set; }
    public string ProjectName { get; set; }
    public string ProjectType { get; set; }
    public string ProjectCode { get; set; }
    public string ProjectDescription { get; set; }
    public string JobNo { get; set; }
    public string JobDescription { get; set; }
    public bool Include { get; set; }
} 
```

我将两个不同数据源中的项目拉入 IEnumerable 列表。我如何在不使用一堆 if 语句来检查属性值之间是否存在差异的情况下比较项目，然后在它们不匹配时设置属性值？这个想法是保持列表同步。列表 A 也设置了 ID 值，列表 B 没有。我只是觉得有比一堆更好的方法来做到这一点

```
if(objectA.ProjectName != objectB.ProjectName)
{
   objectA.ProjectName = objectB.ProjectName;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T15:58:59.140

如果您可以控制源对象，那么支持基于值的相等的最佳声明方式是实现`IEquatable<T>`. 不幸的是，这确实需要您枚举所有这些检查，但它在实际对象定义位置完成一次，并且不需要在整个代码库中重复。

```
class ListItemEtlObject : IEquatable<ListITemEtlObject>
{
  ...
  public void Equals(ListITemEtlObject other) {
    if (other == null) {
      return false;
    }
    return 
      ID == other.ID &&
      ProjectName == other.ProjectName &&
      ProjectType == other.ProjectType &&
      ... ;
  }
} 
```

此外，您可以选择在对象类型上重载相等运算符，并允许消费者简单地在实例上使用`!=`and并获得值相等而不是引用相等。`==``ListItemEtlObject`

```
public static bool operator==(ListItemEtlObject left, ListItemEtlObject right) {
  return EqualityComparer<ListItemEtlObject>.Default.Equals(left, right);
}
public static bool operator!=(ListItemEtlObject left, ListItemEtlObject right) {
  return !(left == right);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-01T15:59:01.420

最简单的方法是在你的类上提供一个计算特定哈希的方法，就像`GetHashCode`，然后如果两个实例计算相同的哈希，它们可以说是等价的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-01T17:47:48.513

你可以使用反射来简化它=）

```
 public virtual void SetDifferences(MyBaseClass compareTo)
    {
        var differences = this.GetDifferentProperties(compareTo);

        differences.ToList().ForEach(x =>
        {
            x.SetValue(this, x.GetValue(compareTo, null), null);
        });
    }

    public virtual IEnumerable<PropertyInfo> GetDifferentProperties(MyBaseClass compareTo)
    {
        var signatureProperties = this.GetType().GetProperties();

        return (from property in signatureProperties
                let valueOfThisObject = property.GetValue(this, null)
                let valueToCompareTo = property.GetValue(compareTo, null)
                where valueOfThisObject != null || valueToCompareTo != null
                where (valueOfThisObject == null ^ valueToCompareTo == null) || (!valueOfThisObject.Equals(valueToCompareTo))
                select property);
    } 
```

这是我为你做的几个测试

```
 [TestMethod]
    public void CheckDifferences()
    {
        var f = new OverridingGetHashCode();
        var g = new OverridingGetHashCode();

        f.GetDifferentProperties(g).Should().NotBeNull().And.BeEmpty();

        f.Include = true;
        f.GetDifferentProperties(g).Should().NotBeNull().And.HaveCount(1).And.Contain(f.GetType().GetProperty("Include"));

        g.Include = true;
        f.GetDifferentProperties(g).Should().NotBeNull().And.BeEmpty();

        g.JobDescription = "my job";
        f.GetDifferentProperties(g).Should().NotBeNull().And.HaveCount(1).And.Contain(f.GetType().GetProperty("JobDescription"));
    }

    [TestMethod]
    public void SetDifferences()
    {
        var f = new OverridingGetHashCode();
        var g = new OverridingGetHashCode();

        g.Include = true;
        f.SetDifferences(g);
        f.GetDifferentProperties(g).Should().NotBeNull().And.BeEmpty();

        f.Include = true;
        g.Include = false;
        f.SetDifferences(g);
        f.GetDifferentProperties(g).Should().NotBeNull().And.BeEmpty();
        f.Include.Should().BeFalse();
    } 
```

# ios - 使用 Cocos2d，检测一个 Sprite 是否被点击，我们需要做所有的计算吗？

> ID：10400371
> 
> 赞同：0
> 
> 时间：2012-05-01T15:57:01.777
> 
> 标签：ios, cocos2d-iphone

例如，如果我们有 10 个矩形精灵，我们使用随机的宽度、高度、位置和 z-index 生成它们。现在的方法

```
-(void) ccTouchesBegan:(NSSet *)touches withEvent:(UIEvent *)event 
```

叫做。我们如何知道点击了哪个精灵？我知道一些技术检查点击点是否在精灵矩形的范围内，但在上述情况下，如果矩形 A 在左上角的矩形 B 的顶部，以及当矩形 B 的左上角时怎么办？被点击，它可能是被点击的矩形A——点击点实际上在两个矩形内。

我们是否必须手动完成，甚至考虑 z-index ......？（可能循环遍历从最高 z-index 到最低的所有精灵）。

如果精灵是一个三角形并且旋转呢？Cocos2d 中没有内置的方法来处理这个问题吗？

（那是因为我前几天浏览了Core Graphics的示例代码……好像那样的话，会有两个点击事件，一个是主视图，一个是子视图，我们可以查看是什么视图是用户点击了，没有做任何计算）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T16:07:44.390

一个可能的解决方案是 CCSprite 的子类，它声明自己是 CCStandardTouchDelegate 或 CCTargetedTouchDelegate 的委托。然后在这些委托方法中对精灵执行适当的操作。

# java - 将对象添加到自定义类的数组

> ID：10400373
> 
> 赞同：13
> 
> 时间：2012-05-01T15:57:02.653
> 
> 标签：java, arrays

我是 Java 的初学者，我正在尝试创建一个自定义类的数组。假设我有一个名为 car 的类，我想创建一个名为 Garage 的汽车数组。如何将每辆车添加到车库？这就是我所拥有的：

```
car redCar = new Car("Red");
car Garage [] = new Car [100];
Garage[0] = redCar; 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-05-01T15:59:19.233

如果要使用数组，则必须保留一个包含车库中汽车数量的计数器。最好使用 an`ArrayList`而不是数组：

```
List<Car> garage = new ArrayList<Car>();
garage.add(redCar); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-05-01T16:00:42.570

数组声明应该是：

```
Car[] garage = new Car[100]; 
```

您也可以直接分配：

```
garage[1] = new Car("Blue"); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-05-01T16:01:32.263

如果您想创建一个车库并用以后可以访问的新车填充它，请使用以下代码：

```
for (int i = 0; i < garage.length; i++)
     garage[i] = new Car("argument"); 
```

此外，稍后可以使用以下方式访问这些汽车：

```
garage[0];
garage[1];
garage[2];
etc. 
```

# javascript - 从函数返回 YUI DataTable 的参数

> ID：10400374
> 
> 赞同：0
> 
> 时间：2012-05-01T15:57:04.713
> 
> 标签：javascript, json, yui-datatable, yui2

这是参考[这个](https://stackoverflow.com/questions/1293738/yui-datatable-custom-column-definitions-and-data)问题。

我必须在各个页面使用批准的答案中提到的脚本。所以，我一直保留到 `this.ds.dataProvider = this;`外部 JS 文件中的行。

现在，由于我要重用原型，我如何在引用此 JS 的页面中获取对 DataTable 的构造函数参数的引用，即`"basic", columnList, this.ds`???

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T16:44:08.687

不知道这个问题是在不同的上下文中发布的，所以发布了关闭线程的解决方案。

使用了这个解决方案：[如何使用 YAHOO.util.Connect.asyncRequest 并返回结果？](https://stackoverflow.com/questions/3159368/how-to-use-yahoo-util-connect-asyncrequest-and-return-results)

# amazon-ec2 - 如果我在印度使用亚马逊网络服务会很快吗？

> ID：10400377
> 
> 赞同：7
> 
> 时间：2012-05-01T15:57:15.960
> 
> 标签：amazon-ec2, amazon-web-services, amazon-cloudfront

我的门户将主要在印度访问，它涉及上传/查看图像，这意味着将涉及良好的数据传输。

如果我在位于印度的服务器上托管我的门户；当然访问页面会更快。但我想亲自使用亚马逊网络服务。我们是否可以在亚马逊选择，以便我们可以托管我们的 tomcat 服务器并将图像保存在位于印度的一些服务器上；或最大。在新加坡，因此访问速度相当快。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-01T16:32:26.860

[Amazon Web Services](http://aws.amazon.com/)在其*稳步扩展的全球基础设施*中为其大部分[产品和](http://aws.amazon.com/products/)服务提供了多个*AWS 数据中心区域*，其中包括*亚太地区（新加坡）区域*（通常称为）。**`ap-southeast-1`**

 **[此外，他们确实为Amazon CloudFront](http://aws.amazon.com/cloudfront/)提供了更多所谓的边缘站点，这是他们用于内容交付的类似于[内容交付网络 (CDN)](http://en.wikipedia.org/wiki/Content_delivery_network)*的 Web 服务*。

[您可以在其全球基础设施](http://aws.amazon.com/about-aws/globalinfrastructure/)地图上查看当前区域和边缘位置的概览。

还有一个面向 API 的[区域和端点](http://docs.amazonwebservices.com/general/latest/gr/rande.html)列表，例如，参见[Amazon Elastic Compute Cloud (EC2)](http://docs.amazonwebservices.com/general/latest/gr/rande.html#ec2_region)的列表（请注意，并非每个区域都一定支持每个可用的产品，尤其是测试版产品通常`us-east-1`仅在最初提供）。

因此，您应该可以很好地使用`ap-southeast-1`您的用例，但像往常一样，您可能想在解决这个问题之前尝试一下，这通过[AWS 免费使用套餐](http://aws.amazon.com/free/)产品很容易做到。**

# hl7 - 实施 Mirth HL7 变压器以有条件地更改字段

> ID：10400380
> 
> 赞同：2
> 
> 时间：2012-05-01T15:57:17.647
> 
> 标签：hl7, mirth

我正在使用 Mirth 来读取 HL7 消息。EMR 提供者已要求对于特定实践中的医生，我们应该在 MSH 字段 6 中插入一个实践代码。我有一个医生代码列表；我需要说“如果医生代码（ORC.12.1）在此列表中，则将 MSH.6 更改为此值。” 我不完全确定如何做到这一点，不幸的是，Mirth 文档（简单地说）在这方面相当稀疏。

我可以让转换器提取医生代码 - 但我如何进行有条件更新？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T18:52:36.840

您必须使用 JavaScript 转换器步骤。

基本上，它看起来像：

```
var code = msg['ORC']['ORC.12']['ORC.12.1'].toString();
var msh6 = msg['MSH']['MSH.6'].toString();
if (isInMyList(code))
    msh6 = 'MySpecialReceivingFacility';

tmp['MSH']['MSH.6'] = msh6; 
```

建议将带有简单变量映射器的转换器保存到文件中，并检查 javascript 以在基本错误处理等方面快速启动。

# c - 在一个程序中使用 XOR 对文件进行编码和解码

> ID：10400383
> 
> 赞同：0
> 
> 时间：2012-05-01T15:57:33.153
> 
> 标签：c, xor

```
#include <stdio.h>
#include <string.h>
#include <cstdlib>

const int KEY=118;

int main()
{
    FILE* hOFile = fopen("file1","w");
    FILE* hIFile;
    char sign;

    for(int i=254; i>=0; i--)
    fprintf(hOFile,"%c",i);

    fclose(hOFile);

    hIFile = fopen("file1","r");
    hOFile = fopen("file2","w");

    for(int i=254; i>=0; i--)
    {   
        fscanf(hIFile,"%c",&sign);
        fprintf(hOFile,"%c",(sign^KEY));
    }

    fclose(hIFile);
    fclose(hOFile);

    hIFile=fopen("file2","r");
    hOFile=fopen("file3","w");

    for(int i=254; i>=0; i--)
    {
        fscanf(hIFile,"%c",&sign);
        fprintf(hOFile,"%c",(sign^KEY));
    }

    fclose(hIFile);
    fclose(hOFile);
} 
```

我的意思是 file3 与 file1 相同。不幸的是，file3 在 ASCII KEY-9 字符后崩溃。具体来说，对于这个例子：

文件1：

> ţ令÷ÖTOVORITIOMITAULIS „‚€~}|{zyxwvutsrqponmlkjihgfedcba`_^][ZYXWVUTSRQPONMLKJIHGFEDCBA@?>=<;:9876543210/.-,+*)('&%$#"!

文件3：

> ţ令÷ÖTOVORITIOMITAULIS „‚€~}|{zyxwvutsrqponmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmm

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T16:00:19.047

您必须以读取二进制模式（`rb`, not `r`）和写入二进制模式（`wb`, not just `w`）打开文件，否则系统会尝试为您进行一些您不想要的转换。

# c++ - 为什么 CreatePointFont() 可能会为我返回 NULL？

> ID：10400385
> 
> 赞同：1
> 
> 时间：2012-05-01T15:57:34.777
> 
> 标签：c++, visual-c++, wtl

在我的 WTL 应用程序中，我试图更改静态标签的字体。但是 CreatePointFont 返回 NULL。为什么会这样？

```
CFont font;

font.CreatePointFont(120, _T("Segoe UI")); 
text.Attach(GetDlgItem(IDC_MAINTEXT));
text.SetFont(font); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T16:54:45.510

Are you sure that `CreatePointFont` is returning NULL?

For a font to be set, it must remain in memory, whereas from your code snippet it appears that the variable `font` is destroyed directly after setting it.

Declare the variable somewhere that will not be deleted during the lifetime of the `text` object, such as the class if you are using an MFC object.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T16:03:02.623

该文档在失败条件上并不太冗长，但我猜你机器上没有命名字体

检查它是否由函数列出（从[文档](http://msdn.microsoft.com/en-us/library/chxkwcsd.aspx)`EnumFontFamilies`中引用）：

> Windows EnumFontFamilies 函数可用于枚举所有当前可用的字体

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-01T16:00:48.190

的 nPointSize 参数`CreatePointFont()`是十分之一点，也许你的 12/10 = 1.2 点的大小太小了。你可能是想通过`120`。

稍微轻松一点，如果您将其用于商业应用程序，您可能还想访问[ban Comic sans](http://bancomicsans.com/main/)网站。

# ant - 使用 Jenkins 和 irrFuscator - 不会混淆源代码

> ID：10400386
> 
> 赞同：0
> 
> 时间：2012-05-01T15:57:36.057
> 
> 标签：ant, jenkins

我不知道是否有人会尝试使用 Jenkins / Ant / irrFuscator 组合 - 希望有人有并且可以提供一些方向。

问题是我在 jenkins 中开始构建，一切似乎都在构建良好，直到我到达构建的 ant 文件调用 irrFuscator 的部分。此时 Jenkins 仍然说它正在尝试构建项目（构建的轮子一直在旋转）但 irrFuscator 中似乎没有发生任何事情。

我检查了任务管理器并且 irrFuscator 没有占用 cpu 时间。

如果我从任务管理器中强制退出 irrFuscator，构建会失败 - 所以詹金斯知道 irrFuscator 的存在。

我已经在詹金斯之外运行了构建，一切似乎都很好。

可以提供构建日志，但那里没有有用的信息 - 它只是说它正在等待。

如果有人有任何想法，我很乐意听取您的意见！如果需要更多信息，请随时询问。

感谢您花时间阅读！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T23:14:16.767

从未使用过 irrFuscator，但首先要检查：

*   确保您在前台运行 Jenkins（而不是作为后台服务）。最简单的方法是使用`java -jar jenkins.war [other options]`命令（请参阅[本文档](https://wiki.jenkins-ci.org/display/JENKINS/Starting+and+Accessing+Jenkins)）。

*   当它在 Jenkins 之外运行时，请确保您以与运行它相同的用户身份运行 Jenkins。

# asp.net - c# 获取项目中目录的路径

> ID：10400387
> 
> 赞同：1
> 
> 时间：2012-05-01T15:57:37.760
> 
> 标签：asp.net, .net, c#-4.0

我正在尝试获取我的项目中名为 EmailAttachments 的文件夹的路径。我试过了

```
File.Exists("~/EmailAttachments/TestReport.pdf") 
```

但这返回错误。如何获取程序中目录的路径，以便将文件写入其中并稍后检索它们？

这是在 asp.net 中，而不是 winforms

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-01T16:01:03.040

如果您尝试获取 ASP.NET 本地路径，请使用`Server.MapPath("~/EmailAttachments/TestReport.pdf")`获取其完全限定路径。

# php - 为什么 PHP 文件处理程序不能正常工作？

> ID：10400394
> 
> 赞同：0
> 
> 时间：2012-05-01T15:58:20.630
> 
> 标签：php, file, fseek, splfileobject

我在“test.txt”文件中有这个内容：**卢卡斯**
我想在文件中寻找指针并覆盖前面的信息。假设我这样做：

```
$f = new SplFileObject('test.txt', 'a');

$f->fseek(-5, SEEK_END);

var_dump($f->ftell());

$f->fwrite('one'); 
```

这应该产生：**oneas**但执行的结果：**lucasone**

我对代码逻辑很着迷，甚至不起作用？

如何正确地做我想做的事？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T16:00:41.130

您打开文件进行附加：

```
$f = new SplFileObject('test.txt', 'a'); 
```

这意味着您无法在文件中查找。相反，打开它进行读写：

```
$f = new SplFileObject('test.txt', 'r+'); 
```

他们还在[fseek 文档](http://www.php.net/manual/en/function.fseek.php)中说：

> 如果您以追加（a 或 a+）模式打开文件，则无论文件位置如何，您写入文件的任何数据都将始终被追加，并且调用 fseek() 的结果将是未定义的。

# iphone - 如何使用 +fontWithName:size: 创建字体并指定字体系列名称和字体的特定样式信息？

> ID：10400398
> 
> 赞同：7
> 
> 时间：2012-05-01T15:58:45.247
> 
> 标签：iphone, ios, ipad, uifont

文档说：

```
+ (UIFont *)fontWithName:(NSString *)fontName size:(CGFloat)fontSize 
```

> 完全指定的字体名称。此名称包含字体系列名称和字体的特定样式信息。

我找到的示例仅指定了字体名称。但我还想指定其他属性，例如中等字体粗细等。这是如何编码到名称中的？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-01T16:10:40.307

有关命名方案，请参阅[此答案。](https://stackoverflow.com/a/1384206/204826)完整的字体列表（带有名称）可以在[这里](http://iosfonts.com/)找到。

例子：

```
[UIFont fontWithName:@"HelveticaNeue-Bold" size:15.0]; 
```

* * *

**更新**

iOS 8.2 添加了[这个方法](https://developer.apple.com/library/ios/documentation/UIKit/Reference/UIFont_Class/#//apple_ref/occ/clm/UIFont/systemFontOfSize:weight:)来获取不同权重的系统字体。

例子：

```
[UIFont systemFontOfSize:15.0 weight:UIFontWeightBold]; 
```

# php - PHP 选择查询

> ID：10400399
> 
> 赞同：0
> 
> 时间：2012-05-01T15:58:47.100
> 
> 标签：php, mysql

大家好，

```
 for()
          {
            SELECT * from x union select * from y union select * from z
          } 
```

我将联合添加到所有其他查询中，当 for 循环运行但在我的最后一行中，我必须删除联合，如何做到这一点。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T16:02:55.257

您没有提供太多可使用的信息，但我假设您从一组查询字符串开始。如果是这样，试试这个：

```
$queries = array();
$queries[] = "SELECT * FROM x";
$queries[] = "SELECT * FROM y";
$queries[] = "SELECT * FROM z";

$query = implode(" UNION ", $queries);

// $query now contains "SELECT * FROM x UNION SELECT * FROM y UNION SELECT * FROM z" 
```

# iphone - 显示空的 UITableView

> ID：10400400
> 
> 赞同：-1
> 
> 时间：2012-05-01T15:58:50.007
> 
> 标签：iphone, ios, uitableview

我`UITableView`用来自`MySQL-DB`.

如果我的表没有任何条目，我想显示一个空的表视图。

我可以这样做吗：

```
- (UITableView *)returnNumberOfRowsForSection { (=> Pseudocode)
    if (Table is empty) {
        return 0;
    } else {
        return (Entry Count);
    }
} 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-02T14:37:14.970

是的你可以。正文必须包含 30 个字符。

# java - 选择 textViews 并获取它们的值

> ID：10400401
> 
> 赞同：0
> 
> 时间：2012-05-01T15:58:54.293
> 
> 标签：java, android

我正在努力完成以下事情

假设我有 5-6 个`TextViews`值 `S N A K E`

现在，我想按`S`textView，然后将手指滑过去`N`以选择它，然后移到 E。我想这样做，以便我可以`SNAKE`在我的字符串或字符序列等中获得“”

如果有任何想法，请分享我。我不知道如何在`onTouch`这里使用。另外，我是`textViews`动态添加的，所以我也在动态设置他们的 ID 最好的问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T16:20:24.520

我从来没有这样做过，但这里有一个想法。

假设您的所有文本视图都处于某种布局中，您可以禁用文本视图的可聚焦性并在您的底层容器上创建一个 onTouch 侦听器。

*开始跟踪鼠标按下事件*

```
@Override public boolean onTouch(View v, MotionEvent event) { 
    if(event.getAction == MotionEvent.ACTION_DOWN)
    {
         captureInput = true;
    }
} 
```

*在您的 ACTION_MOVE 事件中，检查当前位置是否在文本视图之上，如果是，则捕获该值*

```
@Override public boolean onTouch(View v, MotionEvent event) { 
    int action = event.getAction();

    if(action == MotionEvent.ACTION_DOWN)
    {
         captureInput = true;
    }
    else if(action == MotionEvent.ACTION_MOVE
    {
        //get x/y of your finger
         int X = (int)event.getX();   
         int Y = (int)event.getY();

        //Somehow check if the x,y are overlapping with one of your textivews
        // If so, add that textview's text to your list
        // Below is pseudo code
        /* for(TextView curTV: allTextViews)
           {
               if(isOverlapping(X,Y))
               {
                   listOfSwipedCharacters.add(curTV.getText());
               }
           }
     }

} 
```

*最后，当用户松开手指时，停止跟踪并对单词列表做一些事情*

```
@Override public boolean onTouch(View v, MotionEvent event) { 
    int action = event.getAction();

    if(action == MotionEvent.ACTION_DOWN)
    {
         captureInput = true;
    }
    else if(action == MotionEvent.ACTION_MOVE
    {
        //get x/y of your finger
         int X = (int)event.getX();   
         int Y = (int)event.getY();

        //Somehow check which textview the X,Y coords are overlapping
        // Below is pseudo code
        /* for(TextView curTV: allTextViews)
           {
               if(isOverlapping(X,Y))
               {
                   listOfSwipedCharacters += (curTV.getText());
               }
           }*/
     }
     else if(action == MotionEvent.ACTION_UP)
     {
         captureInput = false;
         //Do whatever you want with the string of information that you've captured
     } 
```

}

再一次，我不知道这是否可行，这只是对一种方法的猜测。我怀疑通过每个 textview 循环检查重叠的性能会非常糟糕，因此可能有比运行 for 循环更有效的方法。

由于您知道在滑动时不能跳过字母，因此您可以在添加新字母时创建所有可能的滑动位置（周围字母）的简短列表。然后在您的鼠标事件中，检查鼠标移动事件是否击中了这些字母。例如，在一个标准的单词搜索游戏中，一旦你选择了一个字母，你就只有 9 个其他可能的位置可以滑动（周围的字母），所以你应该只在捕获这 9 个位置时检查这 9 个位置是否被击中。鼠标移动事件。

Edit: I suppose you could use the solution above if you attached an onTouch listener to *each* and every textview. The same premise in regards to touch would apply: Down = start capture, move = capture text, up = stop capture. It would save you from having to identify which textview is being hovered as the textview that fires the onTouch event will be the one that the user is swiping across.

# python - 使用 Python 替换 Excel 文件中的数字

> ID：10400403
> 
> 赞同：0
> 
> 时间：2012-05-01T15:58:59.333
> 
> 标签：python, excel

嗨，我是 python 和 excel 的新手。我有一个大型数据集，需要将我列为“*10^”的每个数字转换为“E”；使得 1.345*10^5 转换为 1.345E5。我想尝试使用正则表达式，但无法让我的替换 fxn 工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T05:22:09.527

在 Python 中使用 Excel 电子表格可能不是最好的主意。根据您要完成的工作，可能值得使用[csvkit](http://csvkit.readthedocs.org/en/latest/index.html)将数据转换为 .csv 文件。

这是一个基本的正则表达式，可以帮助您入门：

```
import re

data = '23*10^22, 12, 15.002, 12*10^98'
print re.sub('\*10\^', 'E', data)

# Returns 23E22, 12, 15.002, 12E98 
```

这将简单地用 替换字符`*10^`，`E`这应该可以解决问题。

# javascript - < 在 Javascript RegExp 中是否故意忽略作为断言（正如 JSLint 所建议的那样）？

> ID：10400409
> 
> 赞同：0
> 
> 时间：2012-05-01T15:59:14.993
> 
> 标签：javascript, regex, replace, jslint

我在一些继承的代码上运行 JSLint，并收到以下信息：

```
Problem at line 24 character 36: Unexpected '\'.

content = content.replace(/\<a href=/g, '<a target="blank" href='); 
```

我已经用谷歌搜索了一段时间，发现[这](http://tech.groups.yahoo.com/group/jslint_com/message/152)表明我不必在 Javascript 替换中转义。

```
HTML += '<div class="articleBody">' 
    + this.myData.record[0][0][5].replace(/<\/?a[^>]*>/gi,'') + '</div>'; 
```

但是我的标准 regExp 介绍会建议[他们这样做](http://zez.org/article/articleprint/11/)，就像[其他一些随机网站](http://www.ninjavspenguin.com/regexp.html)一样，最后甚至专门谈论 Javascript（尽管它自己的例子表明 JSLink 是正确的）。

> 下一个断言字符匹配单词的开头和结尾，它们是：
> 
> < 和 >

尽管 Mozilla 的页面（[replace()](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/replace)和[RegExp](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/RegExp)）没有说它*确实*使用 < & > 进行断言，但我一直无法找到明确说明 Javascript在其 RegExp/replace 方法中*故意*不使用 < 进行断言的地方. 也就是说，**我还没有找到任何地方说转义 < 的 Javascript 实现是*错误*的。** 而且，确实，转义*或未转义*的< 似乎工作正常。诚然，任何未保留的转义字符似乎都可以正常工作——例如，\e === e，尽管 \t !== t wrt replace()。

旁白：我确实意识到并非所有 RegExp 实现都是平等的，并且意识到 Javascript 不做，例如，后视。但这是相当普遍的知识。我很难找到的断言。

有人可以帮我把这个放在床上吗？有没有地方可以发现`It Is Written`< 被*故意*忽略为 Javascript RegExp 中断言的标记，而相反的任何行为都是不正确的行为？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T16:29:25.877

JSLint 是[lint](http://en.wikipedia.org/wiki/Lint_%28software%29)，它告诉你你的代码有问题（根据作者的标准），但这并不意味着你的代码在*语义上*是错误的。人们逃避`<`并`>`避免将这段 Javascript 代码解释为 HTML，尽管`<`在您的情况下转义是无用的。

保证，在 JS Regex 中，`\<`等价于`<`. （ECMA-262 §15.10.2，IdentityEscape）。基本上，任何转义的非字母数字都等于它自己。（但是，`\e`标准中似乎没有定义。）它与 assertions 无关`(?<=…)`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T16:10:18.970

给你，在[http://www.regular-expressions.info/lookaround.html上找到](http://www.regular-expressions.info/lookaround.html)

“最后，像 JavaScript、Ruby 和 Tcl 这样的风格根本不支持后视，即使它们支持前瞻。”

从关于 Lookbehind 的重要说明中查看

# scala - 使用 Actor.self 后优雅地终止 Scala 程序

> ID：10400412
> 
> 赞同：2
> 
> 时间：2012-05-01T15:59:29.343
> 
> 标签：scala, actor

使用*scala.actors.Actor.self*创建一个*ForkJoinScheduler*，它会保留并防止程序正常终止。我想在用 Java 编写的程序中使用 Scala 演员，目前使用的线程池可以优雅地关闭。如果我可以强制*Actor*使用*DaemonScheduler*将是理想的，但如果需要，我很乐意发出明确的终止命令。

这是一些示例代码：

```
object EchoActor extends DaemonActor {
  def act() {
    loop {
      react {
        case (x: Any, respondTo: Actor) => {
          println("echoActor Got message " + x)
          respondTo ! "Echoing: " + x
        }
        case msg => println("Can't handle message " + msg)
      }
    }
  }
}

object TestRunner extends App {
  EchoActor.start()
  for (n <- 1 to 3) {
    EchoActor !("Time to echo", self)
    println(self.receiveWithin(1000) { case x => x})
    Actor.clearSelf()   //   <<-- This doesn't allow for graceful shutdown
  }
  Actor.resetProxy()    //   <<-- Neither does this
  println("Done.")
} 
```

即使没有剩余线程可以使用*Actor.self* ，该程序也不会终止。我试过调用*Actor.exit()*，它只是抛出一个*InterruptedException*，我正要完全放弃*Actor.self*。我错过了什么吗？

**更新**

刚刚发现：

```
scala.actorsScheduler.shutdown() 
```

这适用于全局终止，并且现在可以完成工作。我希望将默认调度程序更改为*DaemonScheduler*，所以如果您知道如何，请发布答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T11:51:07.583

Send a message to the actor to exit, eg "exit" or the companion object Exit. In the partial function which reacts to messages, ie the react block, call the exit() method. Works fine for me and my application closes gracefully.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T19:50:28.233

self 给你的是一个`ActorProxy`. An`ActorProxy`有一个空`receive`的和`exit`你已经提到的方法。其他一切都继承自`Actor`. 我认为关闭它的唯一方法是调用`exit`并捕获异常。

# asp.net-mvc - ASP.NET MVC 3 创建具有模型继承的控制器

> ID：10400415
> 
> 赞同：1
> 
> 时间：2012-05-01T15:59:37.710
> 
> 标签：asp.net-mvc, entity-framework, inheritance

这个问题是关于控制器的，即使用代码优先实体框架方法通过模型关联和继承生成的代码。

我有以下具有关联和继承的模型设置。

```
[Table("User")]
public class User {
  [Key]
  public int UserId { get; set; }
  public string Username { get; set; }
}

[Table("UserProfile")]
public class UserProfile {
  [DatabaseGenerated(DatabaseGeneratedOption.None)]
  [Key, ForeignKey("User")]
  public int UserId { get; set; }
  public string FirstName { get; set; }
  public string LastName { get; set; }

  public virtual User User { get; set; }
}

[Table("Client")]
public class Client : UserProfile {
  public bool Approved { get; set; }
} 
```

然后我在 VS2010 中生成一个控制器，将模板设置为“具有读/写操作和视图的控制器，使用实体框架”，将模型类设置为“客户端”，将数据上下文类设置为我的上下文类。

这将生成以下 Index 方法。

```
public class ClientController : Controller {
  private DataContext db = new DataContext();
  public ViewResult Index() {
    var users = db.UserProfiles.Include(u => u.User);
    return View(users.ToList());
  }
  ...
} 
```

怎么不像下面这样？

```
public class ClientController : Controller {
  private DataContext db = new DataContext();
  public ViewResult Index() {
    var users = db.Clients.Include(u => u.User);
    return View(users.ToList());
  }
  ...
} 
```

或者也许这个？

```
public class ClientController : Controller {
  private DataContext db = new DataContext();
  public ViewResult Index() {
    var users = db.UserProfiles.OfType<Client>().Include(u => u.User);
    return View(users.ToList());
  }
  ...
} 
```

此外， Create 方法使用

```
db.UserProfiles.Add(client); 
```

我想知道为什么不使用以下内容？

```
db.Clients.Add(client); 
```

关于我应该使用哪种方法的任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T16:56:03.747

答案在于实体框架如何处理模型中的继承。这种情况称为“按层次结构表”继承。当您运行代码并查看生成的表时，您将看到 UserProfile 和客户端数据都仅存储在一个表中。在此模型中，将使用差异列来了解什么是 object 类型，但两个数据都将仅存储在一个表中。因此，对于每个层次结构的表方案，控制器存根仅使用基类模型生成。

这可以给你更好的洞察力：

[http://weblogs.asp.net/manavi/archive/2010/12/24/inheritance-mapping-strategies-with-entity-framework-code-first-ctp5-part-1-table-per-hierarchy-tph。 aspx](http://weblogs.asp.net/manavi/archive/2010/12/24/inheritance-mapping-strategies-with-entity-framework-code-first-ctp5-part-1-table-per-hierarchy-tph.aspx)

不知道为什么不使用 OfType()，但似乎 VS 只生成通用代码。

# java - 如何判断用户是否在基于 Spring MVC 的 webapp 中提交了具有更改值的表单？

> ID：10400418
> 
> 赞同：2
> 
> 时间：2012-05-01T15:59:54.413
> 
> 标签：java, forms, spring-mvc

在 Spring MVC webapp 中，我有一个表单和一个相应的控制器。在控制器中，我需要知道用户是否更改了表单中的任何值，以便知道是否更新数据库状态表中的“changed_on”列。

我不在乎知道*哪个*字段发生了变化，无论如何我都会保存用户的数据。但是，如果用户在提交之前更改了 A->B，然后又回到了 A，我不想认为这是一个更改。如果用户实际更改数据，我只想更新日期/时间列，因为稍后我需要知道用户上次更改数据的时间。

实现这一目标的最佳方法是什么？在后端还是前端更好？这似乎是一个**非常**普遍的问题：如何判断用户是否正在更改表单上的数据。

我想出了一些潜在的解决方案。我的表单字段是布尔值、整数、字符串和枚举。

## 前端解决方案

1.  在 Javascript 中使用`onChange`或侦听器设置隐藏的表单字段。`onBlur`
2.  使用 jQuery[回调函数](https://stackoverflow.com/questions/3025396/jquery-form-change)，`$("form :input").change()`并使用`.data()`将`changed`值设置为`true`.

## 后端解决方案

1.  在 Web 表单绑定到的表单类中（通过`@InitBinder("formName")`在我的控制器中），`hashCode()`根据我有兴趣监视更改的所有字段进行覆盖。因为我没有在任何集合中使用我的表单类，也没有传递给 Hibernate，所以我不认为这会产生任何不良的副作用。这是使用 Guava 的实现：

    ```
    @Override
    public int hashCode() {
        return Objects.hashCode(this.field1, this.field2, etc.);
    } 
    ```

    然后我可以将旧表单对象（在`get()`方法中创建）与由`WebDataBinder`提交的表单值创建的新表单对象进行比较。如果哈希值不同，则用户更改了某些内容。

    我对这种方法的问题是，如何保留旧的表单对象？有没有办法把它塞进页面中`ModelAndView`，从 GET 到 POST 都可以存活？`doPost()`或者我可以通过重新加载基于数据库的持久实体在我的方法中重新创建它吗？如果 Hibernate 缓存了我的实体，那么在持久化任何新更改之前重新创建原始表单对象应该很快。

2.  类似于 #1，但使用反射而不是对单个字段的硬编码依赖。这样，如果添加了任何新的表单字段，我们就不会忘记将它们添加到`hashCode()`方法中。这是一个实现：

    ```
    public static boolean hasFormChanged(Object form1, Object form2) {
        return HashCodeBuilder.reflectionHashCode(form1) != HashCodeBuilder.reflectionHashCode(form2);
    } 
    ```

    现在，我知道反思很慢；在我的测试中，比上述方法慢了大约 8-12 倍`Objects.hashCode()`。但是，我只有大约 4 个表单字段，并且在我的本地机器上的测试中，基于反射的方法每次调用大约需要 3.5*微秒。*反射的另一个缺点是我们需要注意将任何新的实例变量添加到表单类（或其父类）中，我们*不想*将其包含在比较中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T16:15:47.590

对于前端解决方案，您可以实现更通用的示例，可以应用于任何页面。在页面加载时，遍历`form`元素，然后遍历表单的每个字段并保存其名称和值

例如，

`["form1", {field1: "value1"}, {field2 : "value2"}]` ETC

在提交之前，您可以检查新表单值是否等于旧表单值，并添加附加属性“更改”

每个前端解决方案都很丑陋。当然最好在服务器端进行

您可以将旧对象存储在 httpSession 中，也可以第二次请求它（注意 hibernate 默认不使用缓存）。`hashCode`使用而不是什么感觉`equals`？当不同的对象返回相同的 hashCode 时，发生冲突的可能性很小

最直接的方法 - 第二次从 Db 请求您的对象，并使用 equals 比较它们

# java - 由于权限问题，Java 7 ImageIO 在 Windows 7 中可能无法读取和写入

> ID：10400419
> 
> 赞同：0
> 
> 时间：2012-05-01T15:59:54.677
> 
> 标签：java, windows, permissions

我有一个使用 Java 6 在 Windows 7 64 位中运行的程序，但使用 Java 7 失败。ImageIO 在读写时似乎会生成临时缓存文件。在我的 Eclipse IDE 中，ImageIO 现在挂起，没有错误消息。在另一台机器上，我得到一个 IOException 权限被拒绝。

我采用的解决方法是使用 Toolkit.createImage 读取图像并转换为 BufferedImage。这似乎不需要创建任何文件，但很笨重。我现在通过转换为字节数组来写作。

还有其他人有这些问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T16:07:10.683

我对这些缓存文件有性能问题，并通过调用`javax.imageio.ImageIO.setUseCache(false)`. 只要原始图像文件已经在磁盘上，就不应该有性能损失。

# macos - 如何在emacs 24（Mac OS X Lion）中将Mx映射到“`”键

> ID：10400423
> 
> 赞同：3
> 
> 时间：2012-05-01T16:00:11.310
> 
> 标签：macos, emacs, evil-mode

我已经下载了 Mac OS X 的 Emacs 24 pretest 并使用 Prelude + evil kit。我来自 vim 背景，发现 Mx 使用起来太慢而且太痛苦。有没有办法将 Mx 键映射到 ESC 键附近的 ` 键？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-01T16:27:34.400

```
(global-set-key (kbd "`") 'execute-extended-command) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-03T09:59:51.967

> 发现Mx使用起来太慢太痛苦

我是一名打字员，我碰巧也这么想，而且我也认为，此外，所有的`C-x`快捷方式也很难做到。

> 有没有办法将 Mx 键映射到 ESC 键附近的 ` 键？

我会说 ESC 键并不是真正的“关闭”键：您的左小指必须移动很多才能到达那里（您需要移动整个手，这效率不高，或者您需要“伸展”您的手指）。

我在 QWERTY 键盘上所做的是重新映射`C-X`到`C-,`

您可能想做类似的事情：在我看来，它真的很有帮助。所以也许映射`C-x`到`C-,`和`M-x`到`M-,`会有所帮助？

您可以像通过直接设置全局键建议的其他答案一样执行此操作：

```
(define-key global-map [(control ,)] ctl-x-map) 
```

或者您可以定义自己的次要模式，在其中放置所有映射，然后打开该次要模式（我在 SO 上了解到）：

```
(define-key my-keys-minor-mode-map (kbd "C-,") ctl-x-map)
(define-key my-keys-minor-mode-map (kbd "M-,") 'execute-extended-command)
... put more mappings here ...

(define-minor-mode my-keys-minor-mode
  "A minor mode so that my key settings override annoying major modes."
  t " my-keys" 'my-keys-minor-mode-map)

(my-keys-minor-mode 1) 
```

或者你当然会“丢失”之前对 C- 和 M- 的映射，但恕我直言，这是完全值得的。

您可能想在此处阅读用户*scottfrazer*的出色答案和解释（这就是我在*.emacs*文件中创建自己的密钥次要模式所遵循的方法）：

[在 Emacs 中全局覆盖键绑定](https://stackoverflow.com/questions/683425/globally-override-key-binding-in-emacs)

# c# - 是否可以为 ASP.Net Web 应用程序类型的项目编写使用读/写 .config 的工作代码？

> ID：10400424
> 
> 赞同：2
> 
> 时间：2012-05-01T16:00:12.087
> 
> 标签：c#, asp.net, web, read-write

我一直在使用[此处](http://www.codeproject.com/Articles/14744/Read-Write-App-Config-File-with-NET-2-0)显示的内容并在控制台应用程序类型项目中成功测试运行它，但是在尝试为 ASP.Net Web 应用程序项目调整代码（进行一些修改以成功消除构建错误）时，我结束了收到以下运行时错误。

## “/”应用程序中的服务器错误。

当不在独立 exe 中运行时，必须指定 exePath。说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。

异常详细信息：System.ArgumentException：当不在独立 exe 中运行时，必须指定 exePath。

源错误：

第 24 行：ShowConfig(); 第 25 行：第 26 行：System.Configuration.Configuration config = 第 27 行：ConfigurationManager.OpenExeConfiguration(ConfigurationUserLevel.None); 第 28 行：

我正在尝试的是否可能，或者我应该为 ASP.Net Web 应用程序项目尝试一种完全不同的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T17:13:59.410

我认为可能有更简单的方法，但这取决于您要存储的数据类型以及原因。你应该首先考虑这些事情：

*   碰撞。两个或更多访问者可以同时访问写入您的设置文件的网页吗？
*   永久性。数据是否需要在应用程序重新启动后持续存在？
*   速度。您的应用程序是否经常需要设置数据才能继续运行？

如果没有冲突的风险，您可以写入文件（App_Data 文件夹是此类文件的常用位置，其内容不由 Web 服务器提供，因此它们保持私有。）如果存在冲突风险，您需要在写入文件时锁定文件，这更复杂。

如果不需要持久性，可以使用[ASP.NET 应用程序状态](http://msdn.microsoft.com/en-us/library/ms178594%28v=vs.90%29.aspx)，这也将很快并且确实提供了锁定方法，但它不是永久存储，因此如果应用程序重新启动，您会丢失数据。

如果您需要防止冲突、提供永久存储并让您的应用程序快速访问数据，您可以将这两种方法结合起来。

# php - javascript中的php验证表单

> ID：10400426
> 
> 赞同：0
> 
> 时间：2012-05-01T16:00:15.710
> 
> 标签：php, javascript

我在 php 中创建了一个表单，我在 javascript 中编写了验证，但是当我执行表单时，当时我在表单中输入了一些值，它显示了验证，之后它不显示任何东西。谁能告诉解决方案？

形式是

```
<?php

 session_start();
 // include_once('header.php');

?>

<div id="contentarea">

<div style="background-color:#3fa0c1;color:#FFF">
 <h2 style="color:#FFF"> Checkout </h2>
</div>
<br/>  
<h4> Welcome to Checkout. <br/>
Please fill in the fields below to complete your purchase! 
</h4><br/>

<form action=" " method="POST" name="Form" onsubmit="return ValidateForm();"  style="color:#000000; font-size:18px;" 

<?php switch ($_GET["checkoutType"]) {
        case "Guest":   echo 'action="guestCheckout.php"'; break;
        case "Register": echo 'action="registerCheckout.php"'; break;
    }
?>

>   
    <h3> BILLING ADDRESS </h3><br/>

    First Name*
    <input style="height:20px; margin-bottom:10px;" name="firstname" size="40"/><span id="error1" style="color:red;"></span> <br/>

    Last Name* 
    <input style="height:20px; margin-bottom:10px;"  name="lastname" size="40"/><span id="error2" style="color:red;"></span><br/>

    Email Address* 
    <input style="height:20px; margin-bottom:10px;"  name="email" size="40"/><span id="error3" style="color:red;"></span><br/>

    Confirm Email Address* 
    <input style="height:20px; margin-bottom:10px;"  name="email2" size="40"/><span id="error4" style="color:red;"></span><br/>

    Telephone* 
    <input style="height:20px; margin-bottom:10px;"  name="telephone" size="40"/><span id="error5" style="color:red;"></span><br/>

    Address* <br/>
    <input  style="height:20px; margin-bottom:10px;"  name="addr1" id="addr1" size="40"/><span id="error6" style="color:red;"></span><br/>
    <input  style="height:20px; margin-bottom:10px;"  name="addr2" id="addr2" size="40"/><span id="error7" style="color:red;"></span><br/>

    Country*  <br/>
    <!-- input  style="height:20px; margin-bottom:10px;"  name="country" size="40"/><br/-->
    <select name="country" id="country"><span id="error8" style="color:red;"></span>
         <option value="select_country"> Select Country </option>
         <option value="US"> United States </option>
    </select>
    <br/>
    <br/>

    City*  <br/>
    <input  style="height:20px; margin-bottom:10px;"  name="city" size="40"/><span id="error9" style="color:red;"></span><br/>

    Zip Code* 
    <input  style="height:20px; margin-bottom:10px;" name="postcode" size="40"/><span id="error10" style="color:red;"></span><br/>

    State* <br/>
    <!-- input  style="height:20px; margin-bottom:10px;"  name="state" size="40"/><br/-->
    <select name="region" id="state"><span id="error11" style="color:red;"></span>
         <option value="select_state"> Select Region</option>
         <option value="FL"> Florida </option>
         <option value="GA"> Georgia </option>
    </select>
    <br/><br/>

    Company
    <input  style="height:20px; margin-bottom:10px;" name="company" size="40"/></span><br/>

    <input name="ship_to_same_addr" type="checkbox"  checked="checked" /> Ship to the same address. <br/><br/>

<h3> SHIPPING METHOD </h3><br/>

    <b> Post Office: Priority Mail (USA) - First Class (International) </b> <br/>
    <input type="radio" name="shipping_method" id="shipping_method" checked="checked" />  Fixed <b> $6.95</b>. <br/><br/>

<h3> PAYMENT METHOD </h3><br/>

    <input type="radio" name="pay_method" id="pay_method" checked="checked" />  Credit Card (Authorize.net) <br/><br/>

    Credit Card Type*
    <!--input  style="height:20px; margin-bottom:10px;"  name="cc_type" size="40"/><br/ -->
    <select name="cc_type" id="cc_type"><span id="error12" style="color:red;"></span>
     <option value="AE"> American Express </option>
     <option value="DI"> Discover </option>
     <option value="MC"> Master Card </option>
     <option value="VI"> Visa </option>
    </select>
    <br/><br/>

    Credit Card Number*
    <input  style="height:20px; margin-bottom:10px;"  name="cc_number" id="cc_number" size="40"/><span id="error13" style="color:red;"></span><br/>

    Credit Card Security Code*
    <input  style="height:20px; margin-bottom:10px;"  name="cc_cid" id="cc_cid" size="40"/><span id="error14" style="color:red;"></span><br/>

    Expiration Date*<br/>
    <!-- input  style="height:20px; margin-bottom:10px;"  name="cc_exp_month" size="20"/-->
     <select name="cc_exp_month" id="cc_exp_month"><span id="error15" style="color:red;"></span>
         <option value="select_month"> Select Month </option>
         <option value="01"> 01 - January </option>
         <option value="02"> 02 - February </option>
         <option value="03"> 03 - March </option>
         <option value="04"> 04 - April </option>
         <option value="05"> 05 - May </option>
         <option value="06"> 06 - June </option>
         <option value="07"> 07 - July  </option>
         <option value="08"> 08 - August </option>
         <option value="09"> 09 - September </option>
         <option value="10"> 10 - October </option>
         <option value="11"> 11 - November </option>
         <option value="12"> 12 - December </option>
    </select>
    <br/>
    <!-- input  style="height:20px; margin-bottom:10px;"  name="cc_exp_year" size="20"/--><br/>
    <select name="cc_exp_year" id="cc_exp_year"><span id="error16" style="color:red;">
         <option value="select_year"> Select Year </option>
         <option value="2012"> 2012 </option>
         <option value="2013"> 2013 </option>
         <option value="2014"> 2014 </option>
         <option value="2015"> 2015 </option>
         <option value="2016"> 2016 </option>
         <option value="2017"> 2017 </option>
         <option value="2018"> 2018 </option>
         <option value="2019"> 2019 </option>
         <option value="2020"> 2020 </option>
    </select>
    <br/><br/>

    Coupon Code
     <input  style="height:20px; margin-bottom:10px;"  name="coupon_code" size="40"/><br/>

    Comments
    <textarea rows="6" cols="40" name="comments"></textarea><br/><br/>

    <input type="submit" value="Place Order Now" />

</form>

<script>
function ValidateForm()
{
    var firstname = document.Form.firstname;
    var lastname = document.Form.lastname;

    var email = document.Form.email;
    var email2 = document.Form.email2;   
    var telephone = document.Form.telephone;

    var addrone = document.Form.addrl;
    var addrtwo = document.Form.addr2;
     var country = document.Form.country;
     var city = document.Form.city;

     var postcode = document.Form.postcode;
     var state = document.Form.state;
     var company = document.Form.company;
     var creditcardtype = document.Form.cc_type;
     var creditcardnumber = document.Form.cc_number;
     var creditcardsecuritycode = document.Form.cc_cid;
     var expirationdate = document.Form.cc_exp_month;
     var expirationdate = document.Form.cc_exp_month;
     var err=0;
    if (firstname.value == "")
    {
         document.getElementById("error1").innerHTML = "enter first Name";
        err=1;
    }  
    else{
    document.getElementById("error1").innerHTML = "";
    }

    if (lastname.value == "")
    {
       document.getElementById("error2").innerHTML = "enter last Name";
        err=1;
    } 
      else{
    document.getElementById("error2").innerHTML = "";
    } 

    if (email.value == "")
    {
      document.getElementById("error3").innerHTML = "enter email address";
        err=1;
    }else{
    document.getElementById("error3").innerHTML = "";
    } 

    if (email.value.indexOf("@", 0) < 0)
    {
    document.getElementById("error3").innerHTML = "enter valid email";
        err=1;
     }else{
    document.getElementById("error3").innerHTML = "";
    }  
    if (email2.value == "")
    {
    document.getElementById("error4").innerHTML = "enter confirm email address";
        err=1;
     }else{
    document.getElementById("error4").innerHTML = "";
    } 

    if(email.value != email2.value)
    {
      document.getElementById("error4").innerHTML = "Please enter email & confirm email both same";
        err=1;
      }else{
    document.getElementById("error4").innerHTML = "";
    } 

    if  (telephone.value == "")
    {
        document.getElementById("error5").innerHTML = "Please enter your telephone number.";
        err=1;
     }else{
    document.getElementById("error5").innerHTML = "";
    } 

    if (addrone.value == "")
    {
        document.getElementById("error6").innerHTML = "Please enter your address1.";
        err=1;
    }else{
    document.getElementById("error6").innerHTML = "";
    } 

     if (addrtwo.value == "")
    {
        document.getElementById("error7").innerHTML = "Please enter your address2.";
        err=1;
    }

   if (country.selectedIndex < 1)
    {
        document.getElementById("error8").innerHTML = "Please enter country.";
        err=1;
        }else{
    document.getElementById("error8").innerHTML = "";
    } 
     if (city.value == "")
    {
      document.getElementById("error9").innerHTML = "Please enter city.";
        err=1;        
    }else{
    document.getElementById("error9").innerHTML = "";
    } 
     if (postcode.value == "")
    {
        document.getElementById("error10").innerHTML = "Please enter zipcode.";
        err=1;
    }else{
    document.getElementById("error10").innerHTML = "";
    } 
     if (state.selectedIndex < 1)
    {
        document.getElementById("error11").innerHTML = "Please enter state.";
        err=1;
    }else{
    document.getElementById("error11").innerHTML = "";
    } 

    if (cc_type.selectedIndex < 1)
    {
        document.getElementById("error12").innerHTML = "Please enter credit card type.";
        err=1;   
       }else{
    document.getElementById("error12").innerHTML = "";
    } 

    if (cc_number.value == "")
    {
        document.getElementById("error13").innerHTML = "Please enter credit card number.";
        err=1;
        }else{
    document.getElementById("error13").innerHTML = "";
    } 
    if (cc_cid.value == "")
    {
        document.getElementById("error14").innerHTML = "Please enter credit card security code.";
        err=1;
    }else{
    document.getElementById("error14").innerHTML = "";
    } 

    if (cc_exp_month.selecedIndex < 1)
    {
        document.getElementById("error15").innerHTML = "Please enter expiry date.";
        err=1;
        }else{
    document.getElementById("error15").innerHTML = "";
    } 
    if (cc_exp_year.selectedIndex < 1)
    {
        document.getElementById("error16").innerHTML = "Please enter expiry date.";
        err=1;
    }else{
    document.getElementById("error16").innerHTML = "";
    } 

    return true;
}

</script>

</div>
<?php 

//include_once('footer.php')

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T08:39:30.697

你可以做这样的事情......

```
<script>
function ValidateForm() {
    var firstname = document.Form.firstname;

    if (firstname.value == "")
    {
        document.getElementById("error1").innerHTML = "enter first Name";
        return false;
    } 

    return true;   
}
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T16:02:45.073

在这之后

```
document.getElementById("error1").innerHTML = "enter first Name";
err=1; 
```

添加

```
return false ; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T16:05:27.440

在你的功能结束时，只需添加

```
if(err==1)
   return false; 
```

谢谢。

# android - 我可以使用 Android 的 AccountManager 获取 AppEngine 的 OAuth 访问令牌吗？

> ID：10400428
> 
> 赞同：14
> 
> 时间：2012-05-01T16:00:22.493
> 
> 标签：android, google-app-engine, authentication, login, oauth

我的 AppEngine 服务器有 Android 客户端，两者都使用 Google 帐户。我想使用 AccountManager 为 OAuth 获取*accessToken*。到目前为止，我正在使用 ClientLogin，但我想切换到 OAuth。

在 AppEngine 上设置 OAuth 很简单 - 我按照[这篇文章](http://ikaisays.com/2011/05/26/setting-up-an-oauth-provider-on-google-app-engine/)进行操作。但是客户端是一个谜，特别是我不知道在 AccountManager 术语*authTokenType*中使用什么作为范围。对于 ClientLogin，我将“ah”用于*authTokenType*。但是 OAuth 呢？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-27T17:16:13.363

到今天为止，您可以在 android 上使用 Google Play Services API 在 android 上进行 Oauth 2.0 身份验证。然后，您可以使用@nivco 描述的方法在 appengine 上获取用户信息。我还没有这样做，但我计划完全按照你所说的去做。

[https://developers.google.com/android/google-play-services/authentication](https://developers.google.com/android/google-play-services/authentication)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-05T01:07:59.143

我不确定您要通过您所指的文章中使用的 App Engine OAuthService 来实现什么。还声明 AppEngine OAuthService 仅支持 OAuth 1 但 Android 仅支持 OAuth 2 :) 所以你搞砸了。

如果你想做跨 Android - App Engine 身份验证，我会做的是：

1.  在 Android 中：从 AccountManager获取 UserInfo API（范围 =`https://www.googleapis.com/auth/userinfo.email`和）的访问令牌。`https://www.googleapis.com/auth/userinfo.profile`
2.  在您从 Android 向 AppEngine 发出的请求的 URL 参数中将访问令牌传递给 App Engine（确保使用 HTTPS 以避免拦截！）。
3.  在 App Engine 端：使用访问令牌通过[UserInfo API](https://developers.google.com/accounts/docs/OAuth2Login)读取用户的身份。这基本上是使用 OpenID Connect！
4.  然后，您可以使用从 UserInfo API 获得的信息对用户进行身份验证。您将从 UserInfo API 获得的电子邮件和用户 ID 等同于您从 AppEngine 的 UserService 获得的电子邮件和用户 ID => 您可以信任它！

* * *

[PS：我在本文](https://developers.google.com/google-apps/tasks/oauth-and-tasks-on-android)中描述了使用 Android AccountManager 获取 OAuth 2 令牌。它是在冰淇淋三明治之前写的，但我希望它仍然有效。基本上`authTokenType`需要`oauth2:{scopes}`，例如`oauth2:https://www.googleapis.com/auth/tasks`Tasks API。现在可能有一些更好的方法可以做到这一点。

# svn - 如何在 SVN 中查找最旧的修改文件

> ID：10400429
> 
> 赞同：3
> 
> 时间：2012-05-01T16:00:27.473
> 
> 标签：svn

我想清理我的代码。我想做一个完整的 SVN 搜索以查找从未更改（或很久以前更改）的文件，并按 DESC 顺序列出所有内容（最旧更改为最近更改）。有没有办法做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-01T18:12:15.833

所有文件/文件夹的修订显示它们的最新更改，因此要检索文件，只需使用：

```
svn ls -Rv <URL_TO_REPO/PATH_TO_PROJECT> 
```

您将收到如下列表：

```
<REV>   <AUTHOR>  <SIZE>   <DATE>   <filename> 
```

您可以通过 unix 工具排序对它们进行排序，将它们轻松转换为 csv 文件并将其导入到 excel 或使用 --xml 开关并进行更复杂的处理。

注意：您只会看到当前文件。您不会看到任何**已删除**的文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T16:10:28.310

最小的修订号会给你第一个提示，因为该变更集中的文件越早被更改。所以你可以像这样列出它们：

```
svn log URLReposRoot -v 
```

在我看来，最好的解决方案是将历史记录作为 XML 文件注销，因为 xml 文件包含所有信息和所有文件。之后，您可以读取该 XML 文件并从中提取有关需求的信息。

```
svn log URLReposRoot -v  --xml >result.xml 
```

但这会导致更大的脚本，因为这并不是那么简单，特别是如果文件已被重命名或复制等。

# jquery - 强制 jQuery 子菜单导航在鼠标移出时消失

> ID：10400441
> 
> 赞同：0
> 
> 时间：2012-05-01T16:01:11.127
> 
> 标签：jquery, menu, treeview, hover, mouseout

我正在为我的主管设计的客户建立一个网站。早期，我们决定我们的导航将基于 jQuery TreeView 菜单 ( [http://www.dynamicdrive.com/dynamicindex1/treeview/index.htm](http://www.dynamicdrive.com/dynamicindex1/treeview/index.htm) )。

最初，我的主管喜欢 TreeView 导航的外观和功能。但是在我安装并构建了导航之后，他们改变了主意。现在他们只想要分支的外观，但具有下拉菜单的基本功能。

我不是 jQuery 专家，所以编辑代码对我来说非常困难。但我已经让它做我想做的事了——有一个例外。我希望子菜单在鼠标移出时消失，但它们会一直保留在那里，直到您将鼠标移动到另一个元素。有没有办法使用我拥有的框架来做到这一点，或者我应该从头开始重建并使其全部基于 CSS？

另一种选择是保持每个主导航链接的悬停状态处于活动状态，直到您移动到另一个链接。此时，作为连接分支的背景图像在鼠标移出时消失，而子菜单则不会。

我基本上只是希望主菜单项的背景图像在子菜单框出现时出现/消失。

测试站点可以在这里看到：http: [//tinyurl.com/7novfmc](http://tinyurl.com/7novfmc)

这是我的CSS：

```
#navigation a {
color:#666;
text-decoration:none;
}
#navigation a:hover {
color:#C93;
text-decoration:none;
}
.navlink a:hover {
color:#C93;
text-decoration:none;
background-image:url(../images/treeview-horizontal-line.png);
background-repeat:no-repeat;
background-position:right;
padding-right:17px;
}
.treeview, .treeview ul {
padding: 0;
margin: 0;
list-style: none;
}
.treeview ul {
background-color: #FFF;
margin-top: 4px;
}
.treeview .hitarea {
/*background: url(../images/treeview-default.gif) -64px -25px no-repeat;*/
height: 16px;
width: 16px;
margin-left: -16px;
float: left;
cursor: pointer;
}
/* fix for IE6 */
* html .hitarea {
display: inline;
float:none;
}
.treeview li {
margin: 0;
padding: 12px 0pt 16px 16px;
text-transform: lowercase;
font-size: .75em;
}
.treeview a.selected {
background-color: #eee;
}
#treecontrol {
margin: 1em 0;
display: none;
}
.treeview .hover {
color: #C93;
cursor: pointer;
}
.treeview li ul li {
background: url(../images/treeview-orange-line1.png) 0 10px no-repeat;
font-size: 1em;
margin-top:-24px;
}
.treeview li.collapsable, .treeview li.expandable {
background-position: 0 -176px;
}
.treeview .expandable-hitarea {
background-position: -80px -3px;
}
.treeview li.last {
background-position: 0 -1766px
}
.treeview li.lastCollapsable, .treeview li.lastExpandable {
}
.treeview li.lastCollapsable {
background-position: 0 -111px
}
.treeview li.lastExpandable {
background-position: -32px -67px
}
.treeview div.lastCollapsable-hitarea, .treeview div.lastExpandable-hitarea {
background-position: 0;
}
.treeview-famfamfam li {
background-image: url(../images/treeview-famfamfam-line.gif);
}
.treeview-famfamfam .hitarea, .treeview-famfamfam li.lastCollapsable, .treeview-famfamfam li.lastExpandable {
background-image: url(../images/treeview-famfamfam.gif);
}
.filetree li {
padding: 3px 0 2px 16px;
}
.filetree span.folder, .filetree span.file {
padding: 1px 0 1px 16px;
display: block;
}
.filetree span.folder {
background: url(../images/folder.gif) 0 0 no-repeat;
}
.filetree li.expandable span.folder {
background: url(../images/folder-closed.gif) 0 0 no-repeat;
}
.filetree span.file {
background: url(../images/file.gif) 0 0 no-repeat;
} 
```

这是我的 HTML（带有一些内联 CSS）：

```
 <div id="HEADER_NAVIGATION">
            <div id="MAIN_NAVIGATION">
              <ul id="navigation">
                <li style="margin-left:60px;"><span class="navlink"><a href="about.html">About</a></span>
                    <ul style="margin-left:40px;margin-top:-32px;position:fixed;">
                        <li>Our Approach</li>
                        <li>Experience</li>
                        <li>Global Reach</li>
                    </ul>
                </li>
                <li style="margin-left:75px;"><a href="principals.html">Principals</a></li>
                <li style="margin-left:90px;"><span class="navlink"><a href="offerings.html">Offerings</a></span>
                    <ul style="margin-left:60px;margin-top:-34px;position:fixed;">
                        <li>Performance Improvement</li>
                        <li>Organizational Transformation</li>
                        <li>Solutions Architecture</li>
                        <li>Risk Management</li>
                    </ul>
                </li>
                <li style="margin-left:75px;"><span><a href="testimonials.html">Testimonials</a></span>
                    <ul style="margin-left:70px;margin-top:-3px;position:fixed;">
                        <!--<li>Case Studies</li>-->
                    </ul>
                </li>
                <li style="margin-left:60px;"><span class="navlink"><a href="resources.html">Resources</a></span>
                    <ul style="margin-left:65px;margin-top:-13px;position:fixed;">
                        <li>Strategic Alliances</li>
                        <li>Publications</li>
                    </ul>
                </li>
            </ul>
            </div>
            <div id="MAIN_HEADER_IMAGE"></div>
        </div> 
```

这是我的jQuery：

```
$(document).ready(function(){

// first example
$("#navigation").treeview({
    collapsed: true,
    unique: true,
    persist: "location"
});
}); 
```

* * *

```
;(function($) {

$.extend($.fn, {
    swapClass: function(c1, c2) {
        var c1Elements = this.filter('.' + c1);
        this.filter('.' + c2).removeClass(c2).addClass(c1);
        c1Elements.removeClass(c1).addClass(c2);
        return this;
    },
    replaceClass: function(c1, c2) {
        return this.filter('.' + c1).removeClass(c1).addClass(c2).end();
    },
    hoverClass: function(className) {
        className = className || "hover";
        return this.hover(function() {
            $(this).addClass(className);
        }, function() {
            $(this).removeClass(className);
        });
    },
    heightToggle: function(animated, callback) {
        animated ?
            this.animate({ height: "toggle" }, animated, callback) :
            this.each(function(){
                jQuery(this)[ jQuery(this).is(":hidden") ? "show" : "show" ](); // default here is "show" : "hide"
                if(callback)
                    callback.apply(this, arguments);
            });
    },
    heightHide: function(animated, callback) {
        if (animated) {
            this.animate({ height: "hide" }, animated, callback);
        } else {
            this.hide();
            if (callback)
                this.each(callback);                
        }
    },
    prepareBranches: function(settings) {
        if (!settings.prerendered) {
            // mark last tree items
            this.filter(":last-child:not(ul)").addClass(CLASSES.last);
            // collapse whole tree, or only those marked as closed, anyway except those marked as open
            this.filter((settings.collapsed ? "" : "." + CLASSES.closed) + ":not(." + CLASSES.open + ")").find(">ul").hide();
        }
        // return all items with sublists
        return this.filter(":has(>ul)");
    },
    applyClasses: function(settings, toggler) {
        this.filter(":has(>ul):not(:has(>a))").find(">span").hover(function(event) {
            toggler.apply($(this).next());
        }).add( $("a", this) ).hoverClass();

        if (!settings.prerendered) {
            // handle closed ones first
            this.filter(":has(>ul:hidden)")
                    .addClass(CLASSES.expandable)
                    .replaceClass(CLASSES.last, CLASSES.lastExpandable);

            // handle open ones
            this.not(":has(>ul:hidden)")
                    .addClass(CLASSES.collapsable)
                    .replaceClass(CLASSES.last, CLASSES.lastCollapsable);

            // create hitarea
            this.prepend("<div class=\"" + CLASSES.hitarea + "\"/>").find("div." + CLASSES.hitarea).each(function() {
                var classes = "";
                $.each($(this).parent().attr("class").split(" "), function() {
                    classes += this + "-hitarea ";
                });
                $(this).addClass( classes );
            });
        }

        // apply event to hitarea
        this.find("div." + CLASSES.hitarea).mouseout( toggler );
    },
    treeview: function(settings) {

        settings = $.extend({
            cookieId: "treeview"
        }, settings);

        if (settings.add) {
            return this.trigger("add", [settings.add]);
        }

        if ( settings.toggle ) {
            var callback = settings.toggle;
            settings.toggle = function() {
                return callback.apply($(this).parent()[0], arguments);
            };
        }

        // factory for treecontroller
        function treeController(tree, control) {
            // factory for click handlers
            function handler(filter) {
                return function() {
                    // reuse toggle event handler, applying the elements to toggle
                    // start searching for all hitareas
                    toggler.apply( $("div." + CLASSES.hitarea, tree).filter(function() {
                        // for plain toggle, no filter is provided, otherwise we need to check the parent element
                        return filter ? $(this).parent("." + filter).length : true;
                    }) );
                    return false;
                };
            }
            // click on first element to collapse tree
            $("a:eq(0)", control).click( handler(CLASSES.collapsable) );
            // click on second to expand tree
            $("a:eq(1)", control).click( handler(CLASSES.expandable) );
            // click on third to toggle tree
            $("a:eq(2)", control).click( handler() ); 
        }

        // handle toggle event
        function toggler() {
            $(this)
                .parent()
                // swap classes for hitarea
                .find(">.hitarea")
                    .swapClass( CLASSES.collapsableHitarea, CLASSES.expandableHitarea )
                    .swapClass( CLASSES.lastCollapsableHitarea, CLASSES.lastExpandableHitarea )
                .end()
                // swap classes for parent li
                .swapClass( CLASSES.collapsable, CLASSES.expandable )
                .swapClass( CLASSES.lastCollapsable, CLASSES.lastExpandable )
                // find child lists
                .find( ">ul" )
                // toggle them
                .heightToggle( settings.animated, settings.toggle );
            if ( settings.unique ) {
                $(this).parent()
                    .siblings()
                    // swap classes for hitarea
                    .find(">.hitarea")
                        .replaceClass( CLASSES.collapsableHitarea, CLASSES.expandableHitarea )
                        .replaceClass( CLASSES.lastCollapsableHitarea, CLASSES.lastExpandableHitarea )
                    .end()
                    .replaceClass( CLASSES.collapsable, CLASSES.expandable )
                    .replaceClass( CLASSES.lastCollapsable, CLASSES.lastExpandable )
                    .find( ">ul" )
                    .heightHide( settings.animated, settings.toggle );
            }
        }

        function serialize() {
            function binary(arg) {
                return arg ? 1 : 0;
            }
            var data = [];
            branches.each(function(i, e) {
                data[i] = $(e).is(":has(>ul:visible)") ? 1 : 0;
            });
            $.cookie(settings.cookieId, data.join("") );
        }

        function deserialize() {
            var stored = $.cookie(settings.cookieId);
            if ( stored ) {
                var data = stored.split("");
                branches.each(function(i, e) {
                    $(e).find(">ul")[ parseInt(data[i]) ? "show" : "hide" ]();
                });
            }
        }

        // add treeview class to activate styles
        this.addClass("treeview");

        // prepare branches and find all tree items with child lists
        var branches = this.find("li").prepareBranches(settings);

        switch(settings.persist) {
        case "cookie":
            var toggleCallback = settings.toggle;
            settings.toggle = function() {
                serialize();
                if (toggleCallback) {
                    toggleCallback.apply(this, arguments);
                }
            };
            deserialize();
            break;
        case "location":
            var current = this.find("a").filter(function() { return this.href.toLowerCase() == location.href.toLowerCase(); });
            if ( current.length ) {
                current.addClass("selected").parents("ul, li").add( current.next() ).show();
            }
            break;
        }

        branches.applyClasses(settings, toggler);

        // if control option is set, create the treecontroller and show it
        if ( settings.control ) {
            treeController(this, settings.control);
            $(settings.control).show();
        }

        return this.bind("add", function(event, branches) {
            $(branches).prev()
                .removeClass(CLASSES.last)
                .removeClass(CLASSES.lastCollapsable)
                .removeClass(CLASSES.lastExpandable)
            .find(">.hitarea")
                .removeClass(CLASSES.lastCollapsableHitarea)
                .removeClass(CLASSES.lastExpandableHitarea);
            $(branches).find("li").andSelf().prepareBranches(settings).applyClasses(settings, toggler);
        });
    }
});

// classes used by the plugin
// need to be styled via external stylesheet, see first example
var CLASSES = $.fn.treeview.classes = {
    open: "open",
    closed: "closed",
    expandable: "expandable",
    expandableHitarea: "expandable-hitarea",
    lastExpandableHitarea: "lastExpandable-hitarea",
    collapsable: "collapsable",
    collapsableHitarea: "collapsable-hitarea",
    lastCollapsableHitarea: "lastCollapsable-hitarea",
    lastCollapsable: "lastCollapsable",
    lastExpandable: "lastExpandable",
    last: "last",
    hitarea: "hitarea"
};

// provide backwards compability
$.fn.Treeview = $.fn.treeview;

})(jQuery); 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T16:34:55.600

你不需要那个树视图插件来做你需要的事情。

添加到 CSS

```
#navigation ul { display: none; }
#navigation li.hover ul { display: block; } 
```

将 jquery 更改为

```
$(document).ready(function(){
    $('#navigation>li').hover(
        function() { $(this).addClass('hover'); },
        function() { $(this).removeClass('hover'); }
    );
}); 
```

结果[http://jsfiddle.net/J3Khk/](http://jsfiddle.net/J3Khk/)

您还可以使用纯 css 并通过使用一起抛弃 javascript

```
#navigation ul { display: none; }
#navigation li:hover ul { display: block; } 
```

结果[http://jsfiddle.net/cBf3c/](http://jsfiddle.net/cBf3c/)

编辑：如果您仅将插件用于树视图行，您也可以使用 css 执行此操作。您可以使用背景图像，或者如果您足够聪明，您可以使用一些绝对定位`<hr />`的

# asp.net - 在 MasterPage 中引用样式表

> ID：10400446
> 
> 赞同：2
> 
> 时间：2012-05-01T16:01:41.330
> 
> 标签：asp.net, html, css, webforms

如何在 MasterPage 中添加指向样式表的链接？

这是我网站的目录结构：

```
> MasterPages
  - Site.master
> Styles
  - Site.css
> Default.aspx
> Admin
  - Admin.aspx 
```

如果我在 MasterPage 中添加对我的样式表的引用：

```
<link rel="Stylesheet" type="text/css" href="Styles/Site.css" /> 
```

在 Default.aspx 中一切正常。但是，如果我对 Admin.aspx 页面使用相同的 MasterPage，则无法找到样式表，因为它在错误的目录中查找。我该怎么办？我尝试将 runat="server" 放在 stylehseet 参考中，但这似乎不起作用

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-01T16:03:51.060

您需要指定一个非模棱两可/非当前的相对路径：

```
<link rel="Stylesheet" type="text/css" href="~/Styles/Site.css" /> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-01T16:05:05.610

这应该有助于：

```
<link rel="Stylesheet" type="text/css" href="~/Styles/Site.css" /> 
```

或（不带“~”）

```
<link rel="Stylesheet" type="text/css" href="/Styles/Site.css" /> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-01T16:43:22.740

不同的方向，利用主题。将`App_Themes`文件夹添加到您的项目中，将主题名称从“Theme1”更改为更合乎逻辑的名称（通常是您的项目名称），然后将其`web.config`放置在

```
<system.web>
      <pages theme="myThemeName">
      </pages>
</system.web> 
```

您放置在此主题中的任何 CSS 或皮肤都将应用于您的所有页面

# ruby-on-rails - 使用 accept_nested_attributes_for 时如何在连接模型上设置属性？

> ID：10400448
> 
> 赞同：0
> 
> 时间：2012-05-01T16:01:45.027
> 
> 标签：ruby-on-rails, ruby, activerecord, has-many, has-many-through

`join model`是否可以在使用时设置附加属性`accepts_nested_attributes_for`？

我有用户、帐户和角色模型。Account 模型接受用户的嵌套属性。这样用户可以同时创建他们的帐户和用户记录。

```
class AccountsController < ApplicationController
  def new
    @account = Account.new
    @user = @account.users.build
  end
end 
```

以上将起作用，但`user.roles.type`默认为`member`. 在注册时，我需要`user.roles.type`默认为`admin`. 这不起作用：

```
class AccountsController < ApplicationController
  def new
    @account = Account.new
    @role = @account.role.build
    # Role.type is protected; assign manually
    @role.type = "admin"
    @user = @account.users.build
  end
end 
```

### 帐户#new

```
<%= simple_form_for(@account, html: { class: 'form-horizontal' }) do |f| %>
  <legend>Account Details</legend>
  <%= render 'account_fields', f: f %>

  <%= f.simple_fields_for :users do |user_form| %>
    <legend>Personal Details</legend>
    <%= render 'users/user_fields', f: user_form %>
  <% end %>

  <%= f.submit t('views.accounts.post.create'), class: 'btn btn-large btn-primary' %>
<% end %> 
```

### 楷模：

```
class User < ActiveRecord::Base
  has_many :roles
  has_many :accounts, through: :roles
end

class Account < ActiveRecord::Base
  has_many :roles
  has_many :users, through: :roles
  accepts_nested_attributes_for :users
end

# user_id, account_id, type [admin|moderator|member]
class Role < ActiveRecord::Base
  belongs_to :user
  belongs_to :account
  after_initialize :init

  ROLES = %w[owner admin moderator member]

  private
  def init
    self.type = "member" if self.new_record?
  end
end 
```

继承可以解决这个问题，但我发现它使事情变得复杂。我需要角色是动态的，以便用户可以添加自己的管理员和模组，等等。我认为我遇到了这些问题，因为我没有正确地建模我的数据建模。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T19:27:05.717

您可以更改模型以将类型初始化为“admin”而不是“member”。

```
private
def init
  self.type = "admin" if self.new_record?
end 
```

# sql - 如何将持续时间添加到 hhmm 格式的字符串并将其转换回字符串？

> ID：10400453
> 
> 赞同：4
> 
> 时间：2012-05-01T16:01:52.183
> 
> 标签：sql, sql-server, casting, int, varchar

我在一个表中有两列需要加在一起。其中之一是带有军用时间的 varchar(4)，减去冒号，包括前面的 0。另一个是 int，它以分钟为单位描述约会的持续时间。基本上我需要将两者加在一起并将其保留为 varchar(4)，所有格式都与第一列相同。我以前使用过 SQL，但没有以任何复杂的方式使用。什么是正确的方法？谢谢！

我不必担心东西会延续到第二天。

例如：

```
time:       '1145'
duration:   45
sum:        '1230'

time:       '0915'
duration:   30
sum:        '0945' (not '945') 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-01T16:16:11.753

假设问题是时间将始终采用 4 位格式 hhmm。查询从字符串中提取 hh 和 mm 并转换为时间。以分钟为单位的持续时间被添加到此时间值，然后使用[**CONVERT**](http://msdn.microsoft.com/en-us/library/ms187928.aspx)函数转换回字符串格式 hh:mm，并且从字符串中删除冒号以恢复原始格式。

[**单击此处查看 SQL Fiddle 中的演示。**](http://sqlfiddle.com/#!6/dd993/1)

*脚本*：

```
CREATE TABLE timevalues
(
        timestring  VARCHAR(20) NOT NULL
    ,   duration    INT NOT NULL
);

INSERT INTO timevalues (timestring, duration) VALUES
    ('1145', 30),
    ('2345', 25),
    ('0815', 125);

SELECT      timestring
        ,   duration
        ,   REPLACE(CONVERT(VARCHAR(5), DATEVALUE, 108), ':', '') AS newtimevalue
FROM
(
    SELECT  timestring
        ,   duration
        ,   DATEADD(MINUTE, 
                    duration, 
                    CAST(
                            (   SUBSTRING(timestring, 1, 2) + ':' + 
                                SUBSTRING(timestring, 3, 2)
                            ) AS DATETIME
                        )
                    ) AS DATEVALUE 
    FROM    timevalues
) T1; 
```

*输出*：

```
timestring duration newtimevalue
---------- -------- -------------
  1145        30      1215
  2345        25      0010
  0815       125      1020 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-01T16:17:50.183

它真的很难看，但会给你你想要的结果：

```
create table #temp
(
    militarytime varchar(4),
    duration int
)

insert into #temp values('1410', 10)
insert into #temp values('0415', 5)
insert into #temp values('1145', 45)
insert into #temp values('0915', 30)

select left(replace(convert(varchar, dateadd(mi, duration, convert(datetime, convert(datetime, replace(militarytime, right(militarytime,2), ':' + right(militarytime,2))))), 114), ':', ''), 4)
from #temp

drop table #temp

Results:
1420
0420
1230
0945 
```

CAVEAT - 很可能有更好的方法 - 只是显示另一种选择。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-01T16:20:58.533

我不知道为什么您需要以这种方式执行此操作。

*就个人而言，我会保留数据类型以在 SQL-Server 中产生自然行为。我会在客户端或数据库层之外的任何地方处理格式。让演示文稿考虑远离数据考虑；）*

也就是说，我觉得我已经尽了责任让宇宙变得更美好，所以我现在可以用你真正想要的东西重新污染它！

```
REPLACE(
  CONVERT(
    VARCHAR(5),
    DATEADD(
      MINUTE,
      [duration],
      CAST(LEFT([time], 2) + ':' + RIGHT([time], 2) AS DATETIME)
    ),
    8
  ),
  ':',
  ''
) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-01T16:24:04.943

```
Select left(New_Time,2)+RIGHT(New_Time,2)
from (
Select 
LEFT(
cast(CONVERT ( time , 
dateadd(minute, duration, --Dateadd will add the minutes to the time given.
Cast(LEFT(mil_time,2)+':'+Right(mil_time,2) as time) --This transforms the varchar into a Time format SQL recognizes.
),
8) as varchar),5)
 as New_Time
from (
select '2145' as mil_time, 200 as duration --This is the original data.
) Orig_tbl
) Time_Format 
```

# c++ - 显示带有 \0 字符的字符串的完整字符串

> ID：10400456
> 
> 赞同：2
> 
> 时间：2012-05-01T16:01:56.630
> 
> 标签：c++, std

```
char data_[4096];
...
socket_.async_read_some(boost::asio::buffer(data_, 4096),
    boost::bind(&client::handle_read_header, this,
    boost::asio::placeholders::error,
    boost::asio::placeholders::bytes_transferred)); 
```

当函数`handle_read_header`被触发时，文本`data_`中包含许多`\0`符号。通过哪种方式更容易查看完整的（剥离或转义`\0`的）字符串`std::cout`？（默认情况下 \0 使字符串结束并且不显示其他）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-01T16:06:28.763

Seth 好心地指出了您的要求，以使其“更易于查看”。为了那个原因：

```
for (size_t i = 0; i < num_bytes; ++i)
    if (buffer[i] == '\\')
        std::cout << "\\\\";
    else if (isprint(buffer[i]))
        std::cout << buffer[i];
    else
        std::cout << '\\' << std::fill(0) << std::setw(3) << buffer[i]; 
```

以上使用 3 位反斜杠转义八进制表示法来表示不可打印字符。您可以很容易地更改表示。

（对于简单的二进制写入，您可以调用`std::cout.write(buffer, num_bytes)`执行二进制块写入，而不是`std::cout << buffer`依赖于字符数组/指针的 ASCIIZ 约定。然后您可以将结果通过管道传输到`less`，`cat -vt`或者您的操作系统提供的任何有助于查看二进制数据的内容，包括NUL。）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-01T16:07:19.513

```
std::transform( data_, data_+size, std::ostream_iterator<char>(std::cout)
              , [](char c) { c == 0 ? '*':c; }); 
```

当然，您可以选择除“*”之外的任何内容。如果您不能使用当前的 C++ 工具，那么只需创建一个执行上述 lambda 功能的函数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-01T16:15:35.967

以下是去除字符的三个选项（如您所问），具体取决于您是否需要保持`data_`完整，或者您是否只是想要一种快速简便的方法来输出字符。此外，最后一个选项显示了一种将不同（单个）字符替换为空字符的简单方法。如果您支持 C++11，所有这些都可以实现为 lambda，从而使代码更加简洁。

```
#include <string>
#include <iostream>
#include <algorithm>
#include <iterator>
using namespace std;

int main()
{
   char c[] = "Ch\0ad\0's Answ\0\0\0er.";
   std::string data(c, c+19);

   std::string c1;

   struct is_null
   {
      bool operator()(const char c) const
      {
         return c == '\0';
      }
   };

   // if you need to keep data_ intact (copy)
   std::remove_copy_if(
      data.begin(),
      data.end(),
      std::back_inserter(c1),
      is_null());

   std::cout << c1 << "\n";

   // if you don't need to keep data intact, remove inline
   std::string::iterator nend = std::remove_if(
      data.begin(),
      data.end(),
      is_null());

   data.erase(nend, data.end());

   std::cout << data << "\n";

   // simplest approach, just stream out each byte and skip the null characters
   for(int x = 0; x < 19; ++x)
   {
      if(c[x] != '\0')
         cout << c[x];
   }

   cout << "\n";

   // If you want to decorate the null characters instead
   std::string data2(c, c+19);

   std::replace_if(
      data2.begin(),
      data2.end(),
      is_null(),
      '#'); // <--- this is the character that will replace the nulls

   cout << data2 << "\n";
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-01T16:06:38.810

`cout.write`您可以通过使用并指定要写入的字符串多长时间（应该在读取处理程序中知道）在终端上输出数据“原始”（不替换 \0 ）。

否则，您可以在单独的缓冲区中创建数据的转义副本，如下所示：

```
char data_[4096];
char escaped[sizeof(data_)*2];
size_t dataLength=...;
char *readPtr=data_, *writePtr=escaped;
for( ; readPtr<data_+dataLength; readPtr++, writePtr++)
{
    switch(*readPtr)
    {
        case 0:
            *writePtr='\\';
            *++writePtr='0';
            break;
        case '\\':
            *writePtr='\\';
            *++writePtr='\\';
            break;
        default:
            *writePtr=*readPtr;
    }
} 
```

或在写作时“即时”替换它（但它可能更慢）。

# node.js - 事件循环队列和优先级

> ID：10400458
> 
> 赞同：0
> 
> 时间：2012-05-01T16:01:59.127
> 
> 标签：node.js

想知道是否有人可以澄清以下内容：

```
// Gets fired 10000 times

fireEvent( function(){

  console.log( 'first' );

  setTimeout( ( function(){ console.log( 'second' ); } ), 100 );

}); 
```

这将输出 10000 x“第一”，然后是 10000 x“第二”。是因为console.log( 'first' ) 在console.log( 'second' ) 之前在事件循环中首先排队吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T14:14:26.697

您正在将一个函数（文字）传递给函数 fireEvent，该 fireEvent 可能会在某个时候调用……但您还没有粘贴 fireEvent 的代码，以便我们知道 fireEvent 究竟做了什么。另外，如何调用 fireEvent() ？它是否在循环中被调用 1000 次？

现在，希望下面的示例可能有助于理解正在发生的事情。

```
function foo() {
    console.log( 'first' );
    setTimeout( ( function(){ console.log( 'second' ); } ), 100 );

}

for (var i = 0; i < 1000; i++) {
    foo();
} 
```

这将打印 'first' 一千次，然后打印 'second' 一千次。

在这种情况下，发生的事情应该很明显：for循环在不到100秒的超时时间内完成，因此它对 foo() 的每次调用都会打印“first”并在打印“second”的回调之前返回执行的机会。

然而，这是有趣的一点，即使超时时间非常短（比如 5 毫秒）并且循环运行了一百万次，您仍然会得到“第一”打印一百万次，然后“第二”打印一百万次次。（即使现在执行循环可能需要超过 5 毫秒）。

```
function foo() {
    console.log( 'first' );
    setTimeout( ( function(){ console.log( 'second' ); } ), 5);

}

for (var i = 0; i < 1000000; i++) {
    foo();
} 
```

发生这种情况是因为 setTimeout 仅设置调用回调的*最短*时间。JavaScript 是单线程的。如果事件触发（或回调的超时时间超时），如果没有发生任何事情，即如果事件循环空闲，则将执行其处理程序。但是，如果超时触发，并且 javascript 事件循环很忙，则回调（以及任何准备处理的后续事件等）将被放入队列中，直到事件循环可以自由执行它们。

希望这可以帮助。

# c# - 如何正确修剪 SQL 语句中的值

> ID：10400459
> 
> 赞同：0
> 
> 时间：2012-05-01T16:02:05.897
> 
> 标签：c#, asp.net, sql-server

> **可能重复：**
> [最有效的 T-SQL 方法将左侧的 varchar 填充到一定长度？](https://stackoverflow.com/questions/121864/most-efficient-t-sql-way-to-pad-a-varchar-on-the-left-to-a-certain-length)

我在使用 sql 语句进行语法修剪时遇到了一些问题。这是我失败的 sql 语句：

```
 SqlCommand command = new SqlCommand("SELECT PID = TRIM([PID] & Right("00000000" & TRIM ([PID]),8) & ",END"), FROM dbo.MDRMASTER WHERE PARENTPID = @PARENTPID",con); 
```

如您所见，我一直在到处进行试验，但在我删除我的 SQL 语句之前，我返回的值是：

```
 123456123456123456 
```

我想退货：

```
 00123456,00123456,00123456,END 
```

那么用逗号分隔值，在语句末尾添加一个单词并将值排序为某种格式的正确语法是什么。例如，数字应全部为 8 位。返回是 00000123 还是 01234567。任何帮助或正确方向的点将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T17:01:23.290

适用于此的 SQL 是

```
DECLARE @pidList VARCHAR(2000);

SELECT @pidList = COALESCE(@pidList + ',', '') + REPLICATE('0', 8 - DATALENGTH(MDRMASTER.PID)) + MDRMASTER.PID
FROM dbo.MDRMASTER
WHERE MDRMASTER.PARENTPID = @PARENTPID;

SELECT @pidList + ',END' AS PID; 
```

不幸的是，我无法测试通过 SqlCommand() 对象将所有这些都传递到一个字符串中，但我不明白为什么如果您将命令（用分号分隔）放入一个字符串中它会不起作用。

# r - 当 y 不长于 x 时如何使用 plot.stepfun 绘制一个值

> ID：10400461
> 
> 赞同：1
> 
> 时间：2012-05-01T16:02:06.580
> 
> 标签：r, plot

我正在尝试使用 stepfun 绘制阶跃函数。这要求给出 x 值之间函数值高度的向量比 x 长 1。但是，由于这个要求，我无法绘制与数据中最后一个类别对应的值。

高度由下式给出：

```
beta_dec=c(.0453196,-.0254566,-.0156608,-.0015202,-.0026819) 
```

x 值由

```
temp=seq(8,20,by=3) 
```

当我运行以下语句时出现错误

```
graph<-stepfun(temp,beta_dec,f=0) 
```

> “stepfun 中的错误（temp，beta_dec，f = 0）：'y' 必须比 'x' 长一”

如果我在 17 处终止序列，它运行良好但没有绘制对应于 20 的值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-01T16:31:02.933

`stepfun`需要 y 比 x 长一的原因是因为如果你有 x 个结，那么你需要 x+1 个值来完全定义函数。因此，如果您的结位于 1、2、3，那么您需要*在 1 之前*、1 和 2 之间、2 和 3 之间以及 3 之后具有值，它们加起来是 4 个值。基本上，你需要弄清楚你的函数在 8 之前的值是多少。例如，您可以这样做：

```
# Notice I added a value in front of beta_dec. You should add the real value.
beta_dec=c(.0453196,.0453196,-.0254566,-.0156608,-.0015202,-.0026819) 
temp=seq(8,20,by=3)
graph<-stepfun(temp,beta_dec,f=0)
plot(graph) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-01T16:26:23.630

这样就够了吗？

```
plot(beta_dec ~ temp, type = "s") 
```

`type = "s"`定义在并且`?plot.default`表示楼梯或台阶。上面的调用给出：

![类型 =](../Images/c23795f213635fab0126be173460cafb.png)

# cakephp - CakePHP 1.2 用于表单助手输入的自定义标签

> ID：10400463
> 
> 赞同：0
> 
> 时间：2012-05-01T16:02:14.833
> 
> 标签：cakephp, cakephp-1.2

我正在编辑views/elements/form_user.ctp 并需要一个自定义标签来输入，我无法将当前值从city 更改为city/town，因为该值必须对应于数据库字段。

我的代码目前是：

```
 echo $form->input('city'); 
```

如何将自定义标签添加到表单帮助程序以显示不会将文本输出为数据库字段名称的自定义标签？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T16:03:39.607

```
echo $form->input('city', array(
  'label' => 'My Label'
)); 
```

它在[文档](http://api12.cakephp.org/class/form-helper#method-FormHelperinput)中...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T16:04:57.173

我建议您阅读[文档](http://book.cakephp.org/1.2/en/view/189/Automagic-Form-Elements)，因为这是非常基本的东西恕我直言！

```
echo $form->input('city', array('label' => 'My Field')); 
```

# perl - 在 perl 中多次打印同一行

> ID：10400464
> 
> 赞同：3
> 
> 时间：2012-05-01T16:02:15.473
> 
> 标签：perl

我想在一行中输出，现在可以了，例如：

```
print "$a\t" x 99;
print "$b\n"; 
```

所以上面是一条线的样子。但我也想打印这些行`$c`时间。有没有捷径可以做到这一点，而不是使用 for 循环，如：

```
for ($i = 1; $i <= $c; $i++) {
  print "$a\t" x 99;
  print "$b\n";
} 
```

有没有更简单的方法，就像`"$a\t" x 99`？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-01T16:15:09.713

```
for (1 .. $how_many) { print "$foo\t" x 99, "$bar\n"; } 
```

IMO 比 C 风格的 for (;;) 循环更简单。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-01T16:06:46.040

是的，您已经拥有了所需的一切。

```
print ((("$a\t" x 99)."$b\n") x $c); 
```

# javascript - 需要触摸设备在覆盖另一个元素时保持 touchmove 事件触发？

> ID：10400468
> 
> 赞同：1
> 
> 时间：2012-05-01T16:02:28.640
> 
> 标签：javascript, html, canvas

# tl;博士

*显示第二个画布元素意味着用户的触摸丢失 - 我不希望用户再次触摸屏幕*

* * *

我正在构建一个 HTML5 Canvas 游戏（游戏显示一张图片，将其切成拼图块，然后以随机顺序显示这些块，以便用户将这些块重新组合在一起）。

源代码（我的开发分支）可以在这里看到：

[https://github.com/Integralist/HTML5-Image-Slider-Game/tree/dragdrop](https://github.com/Integralist/HTML5-Image-Slider-Game/tree/dragdrop)

游戏的一个关键部分是，如果用户点击一块拼图，那么选定的一块就会移动到拼图中的任何可用空间中。如果用户按住他们的点击超过几毫秒，我假设他们想要拖动他们选择的拼图而不是自动为他们移动。

我这样做的方法是在原始画布上放置另一个画布。这第二张画布仅用于“拖放”设施。我走这条路的原因是，否则，在拖动我的拼图时，我需要存储当前的拼图状态，然后不断地重新绘制它——出于性能原因，我不想这样做。

到目前为止，我在基于鼠标的计算机上工作得很好，因为在我设置要在第二个画布上拖动的部分后，我有一个 mousemove 事件，它只会触发并让用户在画布周围拖动部分。

我遇到的问题是在触摸设备上，因为没有 mousemove 事件，我正在使用 touchmove 事件，但是当我显示第二个画布并开始拖动过程​​时，我必须再次触摸屏幕才能触发 touchmove 监听器. 就用户而言，这很糟糕，因为他们在设备上单击并按住手指，但是显示的第二个画布导致手指触摸失去焦点，因此他们会有点失望，因为他们现在需要再次触摸屏幕开始拖动。

我尝试通过手动触发 touchmove 事件来解决此问题，但这不起作用。如果您下载代码（见上文）并在触摸设备上尝试此操作，您就会明白我的意思。拼图不知为何突然跳到画布的左上角？并且仍然需要我再次触摸屏幕才能开始触发触摸鼠标事件。

我真的希望这只是一个小问题，并且有人有一个非常聪明的解决方法。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T16:58:44.097

这个策略怎么样？尝试始终将第二个透明画布放在底部的顶部。当用户触摸/单击时，他们是在顶部画布上进行操作，而不是在底部画布上，您只需立即从底部画布上擦除该部分并将其绘制到顶部画布中，然后让他们继续移动它?

# xorg - xorg 获取 windows 可见堆栈（活动，在活动之后，再次落后......）

> ID：10400469
> 
> 赞同：0
> 
> 时间：2012-05-01T16:02:29.203
> 
> 标签：xorg

多亏了出色的 wmctrl (http://tomas.styblo.name/wmctrl/)，我很容易检索列出可见窗口所需的 C 代码。

我仍然需要的是获取有关什么是活动窗口，活动窗口后面是什么，然后又是什么的信息......有人知道我如何获得这些信息吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T12:44:16.640

Try to play with the `xwininfo` command and see if it includes an option that does what you want. If that's the case, take a look at its source code:

*   [http://cgit.freedesktop.org/xorg/app/xwininfo/tree/](http://cgit.freedesktop.org/xorg/app/xwininfo/tree/)

# cordova - 成功回调错误：NetworkStatus0 = TypeError

> ID：10400475
> 
> 赞同：1
> 
> 时间：2012-05-01T16:02:42.247
> 
> 标签：cordova, sencha-touch, extjs, sencha-touch-2

我收到以下错误，这是什么意思，我该如何解决。对我来说一切都很好，我逐行但在代码中找不到任何异常。

> [INFO] 成功回调错误：NetworkStatus0 = TypeError：表达式“（userAgent，navigation.platform）”的结果[iPhone] 不是构造函数。

我在下面包含了我的代码，请看一下。告诉我如何摆脱这个错误；

```
Ext.setup({
          onReady: function() {
          console.log('application launched Ready OK');
          var form;
          //form and related fields config
          var formBase = {
          //enable vertical scrolling in case the form exceeds the
          //page height
          scroll: 'vertical',
          url: 'http://97.74.206.195/web_service/',
          items: [{//add a fieldset
                  xtype: 'fieldset',
                  title: 'Personal Info',
                  instructions: 'Please enter the information above.',
                  //apply the common settings to all the child items
                  // ￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼￼Getting your form ready with FormPanel
                  //￼￼  of the fieldset
                  defaults: {
                  required: true,
                  labelAlign: 'left',
                  labelWidth: '40%'
                  }, items: [
                             //required field
                             {//add a text field
                             xtype: 'textfield',
                             name : 'name',
                             label: 'Name',
                             useClearIcon: true,//shows the clear icon in the
                             //field when user types
                             autoCapitalize : false
                             }, {//add a password field
                             xtype: 'passwordfield',
                             name : 'password',
                             label: 'Password',
                             useClearIcon: false
                             }, {
                             xtype: 'passwordfield',
                             name : 'reenter',
                             label: 'Re-enter Password',
                             useClearIcon: true
                             }, {//add an email field
                             xtype: 'emailfield',
                             name : 'email',
                             label: 'Email',
                             placeHolder: 'you@sencha.com',
                             useClearIcon: true
                             }] }
                  ],
          listeners : {
          //listener if the form is submitted, successfully
          submit : function(form, result){
          console.log('success', Ext.toArray(arguments));
          },
          //listener if the form submission fails
          exception : function(form, result){
          console.log('failure', Ext.toArray(arguments));
          }
          },
          //items docked to the bottom of the form
          dockedItems: [
                        {
                        xtype: 'toolbar',
                        dock: 'bottom',
                        items: [
                                {
                                text: 'Reset',
                                handler: function() {
                                form.reset();  //reset the fields
                                }
                                }
                                ]
                        } ]
          };

          // Check for device
          var navigation = Ext.global.navigator,
          userAgent = navigation.userAgent,
          osEnv, osName, deviceType;

          Ext.os = osEnv = new this(userAgent, navigation.platform);

          osName = osEnv.name;

          var search = window.location.search.match(/deviceType=(Tablet|Phone)/),
          nativeDeviceType = window.deviceType;

          if (search && search[1]) {
          deviceType = search[1];
          console.log('application launched Ready OK1');

          }
          else if (nativeDeviceType === 'iPhone') {
          console.log('application launched Ready OK2');

          formBase.fullscreen = true;
          } else { //if desktop
          Ext.apply(formBase, {
                    autoRender: true,
                    floating: true,
                    modal: true,
                    centered: true,
                    hideOnMaskTap: false,
                    height: 385,
                    width: 480
                    });
          }
          //create form panel
          form = new Ext.form.FormPanel(formBase);
          form.show();  //render the form to the body
          console.log('application launched Ready OK3');

          }
          }); 
```

# handlebars.js - 初学者流星：模板和findOne

> ID：10400480
> 
> 赞同：4
> 
> 时间：2012-05-01T16:02:58.607
> 
> 标签：handlebars.js, meteor

我想尝试 Meteor，所以我说在 coffeescript 中开发一个小型多房间聊天应用程序。我在使用把手将 findOne 的结果传递给 html 页面时遇到问题。

```
if Meteor.is_client
  room=Rooms.findOne({id:1})
  Template.room({room_name:room.name}) 
```

在html页面中

```
 <head>
  <title>Chat!</title>
 </head>
 <body>
   {{> room}}
 </body>

<template name="room">
 Welcome to {{room_name}}
</template> 
```

现在，鉴于 id = 1 的房间文档的名称 = 'Room1'，我希望页面呈现“欢迎来到 Room1”，但得到一个白页，控制台显示 2 个错误：

```
Uncaught TypeError: Cannot read property 'name' of undefined
Uncaught TypeError: Cannot read property 'room_name' of undefined 
```

即使该文档确实存在，显然房间也是未定义的。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-01T16:45:45.563

在客户端数据库缓存有时间同步到服务器之前，它是未定义的。一旦客户端同步，模板应该再次呈现，但由于它第一次抛出错误，这不会发生（我最近被类似的问题弄糊涂了）。

试试这个（使用短路`&&`来测试房间是否存在）：

```
if Meteor.is_client
    Template.room.room_name = ->
        room = Rooms.findOne({id:1})
        room && room.name 
```

Note: I moved the `findOne` call into the function to make sure it gets called when updates happen, but it may have also been fine where you had it

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-14T19:56:13.987

Since you're using Coffeescript, the existence operator, '?', would also work:

```
Template.room.helpers
    room_name: -> Rooms.findOne(id: 1)?.name 
```

# python - 将代码更改为列表理解

> ID：10400483
> 
> 赞同：0
> 
> 时间：2012-05-01T16:03:11.313
> 
> 标签：python

我为 Python 中的一个简单问题编写了以下代码 -

```
def Peu1(numbers):
    "Sum of all the multiples of 3 or 5 below 1000."
    for num in range(numbers):
        if num%3 == 0 or num%5 == 0:
            test = sum(range(numbers),0)
        return test

print Peu1(1000) 
```

我想将其更改为列表理解，我写了以下内容 -

```
test = [sum(range(numbers),0) for num in range(numbers) if num%3 == 0 or num%5 == 0]
print test 
```

但我的列表理解是循环打印结果，我的意思是我得到结果 n 次（mod 3 或 5）。请指出错误并指导。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-01T16:04:21.667

列表推导旨在建立一个列表——如果你不这样做，那么你就不需要使用一个。

但是，您可以在函数中使用列表推导式或生成器表达式来生成要使用的数字列表：

```
sum(num for num in range(numbers) if num%3 == 0 or num%5 == 0) 
```

请注意，这`numbers`是一个误导性的变量名称 - 这对我来说意味着它包含数字范围，我建议要么传入数字范围，要么调用它`highest`或其他东西。

有些人没有使用相同的值，而是`if 0 in {num%3, num%5}`觉得更清晰，我个人认为在这种情况下它有点模糊了含义。

# ruby-on-rails - 如何加快factory_girl协会

> ID：10400489
> 
> 赞同：0
> 
> 时间：2012-05-01T16:03:44.137
> 
> 标签：ruby-on-rails, unit-testing, factory-bot

以经典的博客文章为例，假设我们有以下模型

```
class Blog < ActiveRecord::Base
  has_many :posts
end

class Post < ActiveRecord::Base
  belongs_to :blog
  has_many :comments

  validates_presence_of :blog
end

class Comment < ActiveRecord::Base
  belongs_to :post

  validates_presence_of :post
end 
```

当我们想通过工厂创建评论时，我们必须先建立一个博客并发布，即使我们在测试中并不真正关心它们。经过数百次测试，这会占用大量时间。

有哪些最佳实践可以避免一直创建所有这些未经测试的记录？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T18:10:14.353

我认为为了隔离这个工厂，你必须假装帖子存在并将 comments.post_id 设置为假 id 例如 1

```
FactoryGirl.define do

  factory :comment do 
    content 'testing text'

    factory :comment_without_post do
      post_id 1 
    end

    factory :comment_with_post do
      post
    end
  end 
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T14:02:12.603

尝试对父元素使用固定装置。为此，我通常只为每个模型设置一个或两个固定装置，然后将它们作为父元素提供给任何父元素不重要的工厂创建。

您应该记住，夹具加载不会触发任何验证，因此取决于您如何设置模型，它们实际上可能是无效的。因此，我尽量不使用这些装置作为任何实际测试的主题。

将我的运行时间减少一半，而不必陷入模拟和存根的复杂性。

# java - 变量范围示例说明

> ID：10400494
> 
> 赞同：-1
> 
> 时间：2012-05-01T16:04:04.210
> 
> 标签：java, scope

```
public class Arcane {

    static int x;
    int y;

    public Arcane(int x) {
        int y = x + 1;
        this.y = y;
    }

    public void increment() {
        y += x;
    }

    public void print() {
        System.out.println(y);
    }

    public static void main(String[] args) {
        x = 5;
        {
            int x = 2;
            Arcane t = new Arcane(x);
            t.increment();
            t.print();
        }
    }
} 
```

据我了解，该程序打印出 8 但我不知道为什么。我尝试插入 x=5。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T16:10:26.273

首先将 5 放入静态变量 x：`x = 5;`

然后，您创建另一个在内部范围内有效的 x。它的值为 2，您将其发送给 Arcane 的构造函数，计算`y`为`x+1`(local x)，即`2+1=3`。在此刻

```
static x = 5;
y = 3; 
```

现在你调用增量来计算 as 的新值`y`，`y+=x`也就是 as `y = y + x`，。即`3+5=8`。

然后打印包含 8 的 y。

我希望这有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T16:10:29.900

```
public static void main(String[] args) {
    x =  5; // static x is 5
    {
        int x = 2; //local x is 2
        Arcane t = new Arcane(x); //new arcane with local x = 2
        t.increment(); // add static x (5) to field y which is 3, = 8
        t.print(); //print 8
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T16:13:28.353

```
public Arcane(int 2) {
     int 3 = 2 + 1;
     this.y = 3;
}

public void increment() {
    y += 5; // from static int x -> 8
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-01T16:18:07.087

当您执行以下操作时，您将通过 x=2;

奥术 t = 新奥术（2）；

然后在构造函数中，y的值就变成了。y=2+1=3

公共奥术（int x）{int y = x + 1; 这个.y = y; }

回到您的 main 方法，以下方法调用分配 y=x+y 的值，即 5+3=8

t.increment();

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-01T16:18:44.497

这就是为什么。

> 静态整数 x；

是一个静态变量，行：

> x = 5;

修改这个静态变量。

> 诠释 x = 2;

是影子变量，不用说，不影响早初始化的静态变量。通过阴影变量创建一个对象。
此时 y = 2 + 1 = 3。

> t.increment()

将 y 的值更改为 3 + 5。
此时您得到 y = 8 作为最终结果，这完全是关于作用域和阴影的，您需要熟悉的基本编程概念。

# java - USB 设备无法在 Android 3.1 XOOM 上打开且无法触发附加事件

> ID：10400498
> 
> 赞同：0
> 
> 时间：2012-05-01T16:04:16.130
> 
> 标签：java, android, usb, storage

我正在尝试让我的平板电脑（XOOM）与我的 USB 设备一起使用。

但是，当我根据 adbtest 示例代码 [这里] [http://developer.android.com/resources/samples/USB/AdbTest/index.html](http://developer.android.com/resources/samples/USB/AdbTest/index.html)创建了一个测试程序并对其进行测试时，它可以找到连接的 USB 设备，如果我这样做： for (UsbDevice device : mManager.getDeviceList().values()) ，但它无法打开设备。

另一个非常奇怪的事情是，作为广播接收器，如 adbtest 代码所示，分离和附加操作都应该是可检测的，但只能检测到分离操作。每当我从平板电脑上移除 USB 设备时，可能会触发分离事件，但永远不会触发附加事件。怎么会这样？（在 filter.xml 文件中，我刚刚指定了正确的供应商 ID 以过滤掉不需要的设备）。

除此之外，如果我将大容量 USB 设备插入平板电脑，或者从平板电脑上分离存储设备，或者为 (UsbDevice device : mManager.getDeviceList().values()) 执行此操作以查找现有设备，则没有发生了。

有大佬知道这是什么原因吗？谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T14:09:33.077

（这篇文章与上[一个问题有关](https://stackoverflow.com/questions/10340300/read-and-writer-data-via-usb-port-on-android-3-1/10341040#10341040)。）

抱歉，没有任何代码，我无法帮助您。虽然我为你写了一整页，但我仍然没有声望点。我的代表 1 我什至不能写评论。请考虑将我对您上一个问题的回答标记为正确答案。请记住，stackoverflow 不是讨论论坛。所以我们在这里做的并不好。

请澄清你的意思

> 但它无法打开设备

并提供一些代码。

对于附加操作，搜索会有所帮助：[这可能是一个答案](https://stackoverflow.com/questions/6981736/android-3-1-usb-host-broadcastreceiver-does-not-receive-usb-device-attached)

我猜USB大容量存储设备对android USB API不透明，因为它们是由底层linux操作系统安装的，你只能通过文件系统访问它。因此，在迭代可用设备时，设备可能会保持不可见。

很抱歉将其发布为答案，如果可能的话，这将是一个评论。

# java - Java中最小的数组元素

> ID：10400504
> 
> 赞同：4
> 
> 时间：2012-05-01T16:04:33.537
> 
> 标签：java, performance, algorithm, collections

我有一个整数数组，`value[]`. 它可以是任何长度。

我需要找到最小的数字。我正在处理面试街的一个问题。我的**Time Exceeded**出现错误。我需要提高计算最小值的速度，因为迭代变得更糟。

我对使用 Java 集合或其他任何东西很感兴趣，因此任何人都可以提出一些改进代码的建议。

```
int mini=value[0];
for (int i = 1; i < noinps; i++) {
    if(mini>value[i]) {
        mini=value[i];
    }
}
System.out.println(mini); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-01T16:07:41.587

没有更好的算法来查找数组中的最小或最大元素。您必须查看每个元素。也许你会在其他地方浪费时间——例如阅读输入。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-01T16:08:10.613

该算法似乎可以很好地找到数组的最小值。如果对数组中可能包含的元素一无所知，则*需要*检查每个元素，因此您的性能是线性的（与数组中元素的数量成正比）。

如果元素是完全有序的，您只需查找第一个（或最后一个，dependng 或 ordering）元素（恒定时间性能）

如果元素是半有序的（例如堆结构），您可以通过类似二进制搜索的技术（log(n) 性能）找到它

如果元素是无序的，但您知道它们不能小于某个值，则可以在找到可能的最小值时停止搜索。

回到超时问题：如果元素是无序的并且对它们没有其他限制，那么您的算法很好，因此超时必须来自程序的其他部分（例如，您试图从控制台读取，但是数据在文件中）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-01T16:26:28.467

如果您使用数组作为元素的存储结构，那么您别无选择，只能遍历所有元素以找到最小元素。但是，您的算法在 O(n) 复杂度下运行良好，因为您只在数组中循环一次。

如果数组大小非常非常大，迭代会变得更糟。在这种情况下，如果除了数组别无选择，我建议不要将数组用作存储区域。然后在将元素放入数组本身之前尝试检查每个元素，这样您就无需迭代数组来查找最小元素。

使用集合，这将是最好的方法

```
ArrayList arrayList = new ArrayList();
//Add elements to Arraylist
arrayList.add(new Integer("23"));
arrayList.add(new Integer("1"));
arrayList.add(new Integer("134"));
arrayList.add(new Integer("22"));
arrayList.add(new Integer("0"));

/*
   To find maximum element of Java ArrayList use,
  static Object max(Collection c) method of Collections class.

   This method returns the maximum element of Java ArrayList according to
   its natural ordering.
*/

Object obj = Collections.max(arrayList);

System.out.println("Maximum Element of Java ArrayList is : " + obj); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-01T16:21:12.553

使用 2 个线程，每个线程取数组的一半，在其一半中找到最小值，然后将结果写入变量。之后，在主线程中比较两个结果。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-15T13:08:45.597

**获得最小数字的简单方法..**

```
 import java.util.Arrays;
    public class demoClass {
        public static void main(String[] args) {

                  // consider the below array of data
                    int[] numbers = {12,22,32,43,53};

                   // first sort the array using sort keyword
                   Arrays.sort(numbers);

                 System.out.println("Smallest Number = "+numbers[0]);
        }
    } 
```

# java - 如何防止java游戏卡顿

> ID：10400507
> 
> 赞同：0
> 
> 时间：2012-05-01T16:04:43.233
> 
> 标签：java, swing

我正在设计蛇和梯子游戏。我正在使用计时器来循环浏览骰子的图像以及梯子、蛇类的图像。

`Thread.sleep()`当我习惯在电脑回合和玩家回合之间有一些延迟时，我遇到了麻烦。问题是在计时器的任何过程中间都有一个延迟，例如当玩家按钮被放置在任何有梯子的方格上时，按钮需要时间直到它到达梯子的顶部。蛇和骰子也是如此。

我在谷歌上查了很多，但我找不到任何解决方案。任何帮助都会非常有帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-01T16:11:15.360

在工作开始和结束时获取时间戳，以确定执行工作需要多长时间，然后从您的睡眠时间中减去。

或者，[`Timer`](http://docs.oracle.com/javase/7/docs/api/java/util/Timer.html)如果您希望某事以固定的时间间隔执行，请使用 a。

# c# - 正确的数据库访问身份验证

> ID：10400508
> 
> 赞同：0
> 
> 时间：2012-05-01T16:04:45.147
> 
> 标签：c#, asp.net, .net, sql-server, authentication

我们正在开发一个简单的 web 应用程序，该应用程序将在我们的 Intranet 上提供。对应用程序的访问将由“用户”表控制：如果表中存在您的网络登录名，则您可以使用该应用程序。

该应用程序本身将使用 SQL 数据库。在我们当前的开发设置中，我们都是开发数据库的管理员，因此我们拥有完全的访问权限。然而，当它被部署到生产环境时，我们有几个选项可用于对数据库进行身份验证。

授予每个适当的用户他或她自己的数据凭据是否有意义，或者所有用户都应该在数据库上共享一个应用程序级用户帐户？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T16:54:08.303

Creating separate user accounts for each app user complicates things in my experience. If there isn't a security specification you have to design to, I would create a single logon for the app, create a database role, grant permissions to the role, and add the logon to the role.

You can still audit user actions if you use this method by passing user names as input parameters on your stored procedures.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T17:52:07.223

每个用户的访问凭证将导致除了最小的用户群之外的所有用户群的后勤噩梦。在 Web 环境中，它也使事情变得非常复杂。

我见过（并使用过的）最常见的方法是为每个应用程序使用一个专用用户。所有访问都通过该用户名/密码进行。

您的应用程序将在任何情况下执行授权，因此您可以根据需要审核执行各种操作的用户名。

# jsp - 为什么tomcat在数据库中看不到更新？

> ID：10400514
> 
> 赞同：4
> 
> 时间：2012-05-01T16:05:11.233
> 
> 标签：jsp, tomcat, jpa, netbeans, h2

我目前在 netbeans 我用 java 开发一个 web 应用程序。我将 JPA2.0 与 H2 数据库一起使用。

问题是当我更改数据库中的数据并在浏览器中重新加载页面时=>没有设置更改。仅当我在 中重新运行一个`jsp`页面`netbeans`，或者我重新启动 tomcat 时：

网页.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="2.5" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd">
    <servlet>
        <servlet-name>ajoutAutomobile</servlet-name>
        <servlet-class>controlleurs.ajoutAutomobile</servlet-class>
    </servlet>
    <servlet>
        <servlet-name>ajoutConducteur</servlet-name>
        <servlet-class>controlleurs.ajoutConducteur</servlet-class>
    </servlet>
    <servlet>
        <servlet-name>ajoutMission</servlet-name>
        <servlet-class>controlleurs.ajoutMission</servlet-class>
    </servlet>
    <servlet>
        <servlet-name>ajoutUtilisateur</servlet-name>
        <servlet-class>controlleurs.ajoutUtilisateur</servlet-class>
    </servlet>
    <servlet>
        <servlet-name>selectCinConducteur</servlet-name>
        <servlet-class>controlleurs.selectCinConducteur</servlet-class>
    </servlet>
    <servlet>
        <servlet-name>selectIdAuto</servlet-name>
        <servlet-class>controlleurs.selectIdAuto</servlet-class>
    </servlet>
    <servlet>
        <servlet-name>selectIdAutomobile</servlet-name>
        <servlet-class>controlleurs.selectIdAutomobile</servlet-class>
    </servlet>
    <servlet>
        <servlet-name>ajoutVignette</servlet-name>
        <servlet-class>controlleurs.ajoutVignette</servlet-class>
    </servlet>
    <servlet>
        <servlet-name>selectImei</servlet-name>
        <servlet-class>controlleurs.selectImei</servlet-class>
    </servlet>
    <servlet>
        <servlet-name>ajoutAssurance</servlet-name>
        <servlet-class>controlleurs.ajoutAssurance</servlet-class>
    </servlet>
    <servlet>
        <servlet-name>ajoutVisite</servlet-name>
        <servlet-class>controlleurs.ajoutVisite</servlet-class>
    </servlet>
    <servlet>
        <servlet-name>ajoutIntervention</servlet-name>
        <servlet-class>controlleurs.ajoutIntervention</servlet-class>
    </servlet>
    <servlet>
        <servlet-name>selectAutoLibre</servlet-name>
        <servlet-class>controlleurs.selectAutoLibre</servlet-class>
    </servlet>
    <servlet>
        <servlet-name>selectConducteurLibre</servlet-name>
        <servlet-class>controlleurs.selectConducteurLibre</servlet-class>
    </servlet>
    <servlet>
        <servlet-name>afficheInfoGeo</servlet-name>
        <servlet-class>controlleurs.afficheInfoGeo</servlet-class>
    </servlet>
    <servlet>
        <servlet-name>ajoutAffectation</servlet-name>
        <servlet-class>controlleurs.ajoutAffectation</servlet-class>
    </servlet>
    <servlet>
        <servlet-name>afficheListConducteur</servlet-name>
        <servlet-class>controlleurs.afficheListConducteur</servlet-class>
    </servlet>
    <servlet>
        <servlet-name>afficheInfoGeoRestreinte</servlet-name>
        <servlet-class>controlleurs.afficheInfoGeoRestreinte</servlet-class>
    </servlet>
    <servlet>
        <servlet-name>selectDate</servlet-name>
        <servlet-class>controlleurs.selectDate</servlet-class>
    </servlet>
    <servlet>
        <servlet-name>selectCoordsRestreinte</servlet-name>
        <servlet-class>controlleurs.selectCoordsRestreinte</servlet-class>
    </servlet>
    <servlet>
        <servlet-name>selectAssuranceExpir</servlet-name>
        <servlet-class>controlleurs.selectAssuranceExpir</servlet-class>
    </servlet>
    <servlet>
        <servlet-name>selectVignetteExpir</servlet-name>
        <servlet-class>controlleurs.selectVignetteExpir</servlet-class>
    </servlet>
    <servlet>
        <servlet-name>selectVisiteExpir</servlet-name>
        <servlet-class>controlleurs.selectVisiteExpir</servlet-class>
    </servlet>
    <servlet>
        <servlet-name>selectAssurance</servlet-name>
        <servlet-class>controlleurs.selectAssurance</servlet-class>
    </servlet>
    <servlet>
        <servlet-name>selectVignette</servlet-name>
        <servlet-class>controlleurs.selectVignette</servlet-class>
    </servlet>
    <servlet>
        <servlet-name>selectVisite</servlet-name>
        <servlet-class>controlleurs.selectVisite</servlet-class>
    </servlet>
    <servlet>
        <servlet-name>afficheListAutomobile</servlet-name>
        <servlet-class>controlleurs.afficheListAutomobile</servlet-class>
    </servlet>
    <servlet>
        <servlet-name>historiqueAffectationConducteur</servlet-name>
        <servlet-class>controlleurs.historiqueAffectationConducteur</servlet-class>
    </servlet>
    <servlet>
        <servlet-name>historiqueAffectationAutomobile</servlet-name>
        <servlet-class>controlleurs.historiqueAffectationAutomobile</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>ajoutAutomobile</servlet-name>
        <url-pattern>/ajoutAutomobile</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>ajoutConducteur</servlet-name>
        <url-pattern>/ajoutConducteur</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>ajoutMission</servlet-name>
        <url-pattern>/ajoutMission</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>ajoutUtilisateur</servlet-name>
        <url-pattern>/ajoutUtilisateur</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>selectCinConducteur</servlet-name>
        <url-pattern>/selectCinConducteur</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>selectIdAuto</servlet-name>
        <url-pattern>/selectIdAuto</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>selectIdAutomobile</servlet-name>
        <url-pattern>/selectIdAutomobile</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>ajoutVignette</servlet-name>
        <url-pattern>/ajoutVignette</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>selectImei</servlet-name>
        <url-pattern>/selectImei</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>ajoutAssurance</servlet-name>
        <url-pattern>/ajoutAssurance</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>ajoutVisite</servlet-name>
        <url-pattern>/ajoutVisite</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>ajoutIntervention</servlet-name>
        <url-pattern>/ajoutIntervention</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>selectAutoLibre</servlet-name>
        <url-pattern>/selectAutoLibre</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>selectConducteurLibre</servlet-name>
        <url-pattern>/selectConducteurLibre</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>afficheInfoGeo</servlet-name>
        <url-pattern>/afficheInfoGeo</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>ajoutAffectation</servlet-name>
        <url-pattern>/ajoutAffectation</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>afficheListConducteur</servlet-name>
        <url-pattern>/afficheListConducteur</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>afficheInfoGeoRestreinte</servlet-name>
        <url-pattern>/afficheInfoGeoRestreinte</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>selectDate</servlet-name>
        <url-pattern>/selectDate</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>selectCoordsRestreinte</servlet-name>
        <url-pattern>/selectCoordsRestreinte</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>selectAssuranceExpir</servlet-name>
        <url-pattern>/selectAssuranceExpir</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>selectVignetteExpir</servlet-name>
        <url-pattern>/selectVignetteExpir</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>selectVisiteExpir</servlet-name>
        <url-pattern>/selectVisiteExpir</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>selectAssurance</servlet-name>
        <url-pattern>/selectAssurance</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>selectVignette</servlet-name>
        <url-pattern>/selectVignette</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>selectVisite</servlet-name>
        <url-pattern>/selectVisite</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>afficheListAutomobile</servlet-name>
        <url-pattern>/afficheListAutomobile</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>historiqueAffectationConducteur</servlet-name>
        <url-pattern>/historiqueAffectationConducteur</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>historiqueAffectationAutomobile</servlet-name>
        <url-pattern>/historiqueAffectationAutomobile</url-pattern>
    </servlet-mapping>
    <session-config>
        <session-timeout>
           30
        </session-timeout>
    </session-config>
    <welcome-file-list>
        <welcome-file>index.jsp</welcome-file>
    </welcome-file-list>
</web-app> 
```

服务器.xml：

```
<?xml version='1.0' encoding='utf-8'?>
<!--
  Licensed to the Apache Software Foundation (ASF) under one or more
  contributor license agreements.  See the NOTICE file distributed with
  this work for additional information regarding copyright ownership.
  The ASF licenses this file to You under the Apache License, Version 2.0
  (the "License"); you may not use this file except in compliance with
  the License.  You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->
<!-- Note:  A "Server" is not itself a "Container", so you may not
     define subcomponents such as "Valves" at this level.
     Documentation at /docs/config/server.html
 -->
<Server port="8005" shutdown="SHUTDOWN">

  <!--APR library loader. Documentation at /docs/apr.html -->
  <Listener className="org.apache.catalina.core.AprLifecycleListener" SSLEngine="on" />
  <!--Initialize Jasper prior to webapps are loaded. Documentation at /docs/jasper-howto.html -->
  <Listener className="org.apache.catalina.core.JasperListener" />
  <!-- Prevent memory leaks due to use of particular java/javax APIs-->
  <Listener className="org.apache.catalina.core.JreMemoryLeakPreventionListener" />
  <!-- JMX Support for the Tomcat server. Documentation at /docs/non-existent.html -->
  <Listener className="org.apache.catalina.mbeans.ServerLifecycleListener" />
  <Listener className="org.apache.catalina.mbeans.GlobalResourcesLifecycleListener" />

  <!-- Global JNDI resources
       Documentation at /docs/jndi-resources-howto.html
  -->
  <GlobalNamingResources>
    <!-- Editable user database that can also be used by
         UserDatabaseRealm to authenticate users
    -->
    <Resource name="UserDatabase" auth="Container"
              type="org.apache.catalina.UserDatabase"
              description="User database that can be updated and saved"
              factory="org.apache.catalina.users.MemoryUserDatabaseFactory"
              pathname="conf/tomcat-users.xml" />
  </GlobalNamingResources>

  <!-- A "Service" is a collection of one or more "Connectors" that share
       a single "Container" Note:  A "Service" is not itself a "Container", 
       so you may not define subcomponents such as "Valves" at this level.
       Documentation at /docs/config/service.html
   -->
  <Service name="Catalina">

    <!--The connectors can use a shared executor, you can define one or more named thread pools-->
    <!--
    <Executor name="tomcatThreadPool" namePrefix="catalina-exec-" 
        maxThreads="150" minSpareThreads="4"/>
    -->

    <!-- A "Connector" represents an endpoint by which requests are received
         and responses are returned. Documentation at :
         Java HTTP Connector: /docs/config/http.html (blocking & non-blocking)
         Java AJP  Connector: /docs/config/ajp.html
         APR (HTTP/AJP) Connector: /docs/apr.html
         Define a non-SSL HTTP/1.1 Connector on port 8080
    -->
    <Connector port="8080" protocol="HTTP/1.1" 
               connectionTimeout="20000" 
               redirectPort="8443" />
    <!-- A "Connector" using the shared thread pool-->
    <!--
    <Connector executor="tomcatThreadPool"
               port="8080" protocol="HTTP/1.1" 
               connectionTimeout="20000" 
               redirectPort="8443" />
    -->           
    <!-- Define a SSL HTTP/1.1 Connector on port 8443
         This connector uses the JSSE configuration, when using APR, the 
         connector should be using the OpenSSL style configuration
         described in the APR documentation -->
    <!--
    <Connector port="8443" protocol="HTTP/1.1" SSLEnabled="true"
               maxThreads="150" scheme="https" secure="true"
               clientAuth="false" sslProtocol="TLS" />
    -->

    <!-- Define an AJP 1.3 Connector on port 8009 -->
    <Connector port="8009" protocol="AJP/1.3" redirectPort="8443" />

    <!-- An Engine represents the entry point (within Catalina) that processes
         every request.  The Engine implementation for Tomcat stand alone
         analyzes the HTTP headers included with the request, and passes them
         on to the appropriate Host (virtual host).
         Documentation at /docs/config/engine.html -->

    <!-- You should set jvmRoute to support load-balancing via AJP ie :
    <Engine name="Catalina" defaultHost="localhost" jvmRoute="jvm1">         
    --> 
    <Engine name="Catalina" defaultHost="localhost">

      <!--For clustering, please take a look at documentation at:
          /docs/cluster-howto.html  (simple how to)
          /docs/config/cluster.html (reference documentation) -->
      <!--
      <Cluster className="org.apache.catalina.ha.tcp.SimpleTcpCluster"/>
      -->        

      <!-- The request dumper valve dumps useful debugging information about
           the request and response data received and sent by Tomcat.
           Documentation at: /docs/config/valve.html -->
      <!--
      <Valve className="org.apache.catalina.valves.RequestDumperValve"/>
      -->

      <!-- This Realm uses the UserDatabase configured in the global JNDI
           resources under the key "UserDatabase".  Any edits
           that are performed against this UserDatabase are immediately
           available for use by the Realm.  -->
      <Realm className="org.apache.catalina.realm.UserDatabaseRealm"
             resourceName="UserDatabase"/>

      <!-- Define the default virtual host
           Note: XML Schema validation will not work with Xerces 2.2.
       -->
      <Host name="localhost"  appBase="webapps"
            unpackWARs="true" autoDeploy="true"
            xmlValidation="false" xmlNamespaceAware="false">

        <!-- SingleSignOn valve, share authentication between web applications
             Documentation at: /docs/config/valve.html -->
        <!--
        <Valve className="org.apache.catalina.authenticator.SingleSignOn" />
        -->

        <!-- Access log processes all example.
             Documentation at: /docs/config/valve.html -->
        <!--
        <Valve className="org.apache.catalina.valves.AccessLogValve" directory="logs"  
               prefix="localhost_access_log." suffix=".txt" pattern="common" resolveHosts="false"/>
        -->

      </Host>
    </Engine>
  </Service>
</Server> 
```

请问如何解决这个问题？

**编辑**：我试图删除缓存，也在其他浏览器中打开页面=>相同的结果..

**EDIT2**：persistence.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence version="2.0" xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd">
  <persistence-unit name="webPU" transaction-type="RESOURCE_LOCAL">
    <provider>org.eclipse.persistence.jpa.PersistenceProvider</provider>
    <class>entities.Automobile</class>
    <class>entities.Intervention</class>
    <class>entities.Assurance</class>
    <class>entities.Coordonnees</class>
    <class>entities.Mission</class>
    <class>entities.Affectation</class>
    <class>entities.Conducteur</class>
    <class>entities.Gps</class>
    <class>entities.Vignette</class>
    <class>entities.Utilisateur</class>
    <class>entities.VisiteTechnique</class>
    <exclude-unlisted-classes>false</exclude-unlisted-classes>
    <properties>
      <property name="javax.persistence.jdbc.url" value="jdbc:h2:tcp://localhost/~/ApiGps"/>
      <property name="javax.persistence.jdbc.password" value=""/>
      <property name="javax.persistence.jdbc.driver" value="org.h2.Driver"/>
      <property name="javax.persistence.jdbc.user" value="sa"/>
    </properties>
  </persistence-unit>
</persistence> 
```

我的小服务程序：

```
response.setContentType("application/json");

        PrintWriter out = response.getWriter();
        EntityManagerFactory emf=Persistence.createEntityManagerFactory("webPU"); 

       Timestamp nd=new Timestamp(System.currentTimeMillis());//now
       nd.setMinutes(nd.getMinutes()-20);
      EntityManager em=emf.createEntityManager();
      String req="select a from Automobile a where a.gpsImei.imei in (SELECT c.gpsImei.imei FROM Coordonnees c WHERE c.date < :nd )";
      Query resultat=em.createQuery(req);
      resultat.setParameter("nd", nd);
      java.util.List<Automobile> la= resultat.getResultList();  
      Gson gson=new Gson();
      String json =gson.toJson(La);//convert the List to json

      try {
        out.println(json);//return respons to ajax
       } finally {            
        out.close();
       } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T16:31:42.487

由于您正在使用 `transaction-type="RESOURCE_LOCAL"`

您总是希望只使用一个 EntityManager。有一个父类在您的应用程序中管理相同的 EntityManager 实例。

> 使用多个 EntityManager 实例几乎从来都不是一个好主意（除非您已销毁第一个，否则不要创建第二个）

我认为问题在于在这里创建一个新的 EM

```
EntityManager em=emf.createEntityManager(); 
```

就个人而言，我更喜欢使用事务类型，transaction-type="TRANSACTION"，而不用担心实体管理器[https://stackoverflow.com/a/1963012/643500](https://stackoverflow.com/a/1963012/643500)

你可以在这里阅读更多 [http://openejb.apache.org/jpa-concepts.html](http://openejb.apache.org/jpa-concepts.html)

保存数据时使用 saveOrUpdate 还是 merge？

这可能不是正确的答案，但我希望它有所帮助。

# php - Slim 框架 - 在新版本 1.6 中调用停止

> ID：10400516
> 
> 赞同：0
> 
> 时间：2012-05-01T16:05:14.617
> 
> 标签：php, mysql, slim

我最近将 Slim 从 1.5 升级到了 1.6。

一切正常。但是该应用程序在停止呼叫时中断。没有错误日志。只是返回空白。没有错误信息或任何东西。

以前有人遇到过这个问题吗？

# javascript - 在一页上放置多个 jquery 滑块

> ID：10400519
> 
> 赞同：0
> 
> 时间：2012-05-01T16:05:23.803
> 
> 标签：javascript, jquery, slider

我在一个页面上遇到多个滑块的问题。

滑块： http: [//landofcoder.com/jquery-plugins/lof-jslidernew-plugin.html](http://landofcoder.com/jquery-plugins/lof-jslidernew-plugin.html)

目前我正在使用 jquery 包括来自外部 html 的滑块：

```
 <script src="js/jquery.js"></script>

<script type="text/javascript"> 
function loadslide1() 
{ 
    $("#includeslider1").load("slider1.html");
} 
function loadslide2() 
{ 
    $("#includeslider2").load("slider2.html"); 
} 
</script> 

<style type="text/css">
body {width:900px; height: 600px; background-color: black;}
</style>

    </head>
    <body>

   <div id="includeslider1"></div>
   <script>loadslide1()</script> 
   <div id="includeslider2"></div>
   <script>loadslide2()</script>  

    </body> 
```

滑块1代码：

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

<!-- Slider -->
<link rel="stylesheet" type="text/css" href="css/lofc-layout.css" />
<link rel="stylesheet" type="text/css" href="css/lofc-style2.css" />
<script language="javascript" type="text/javascript" src="js/jquery.js"></script>
<script language="javascript" type="text/javascript" src="js/jquery.easing.js"></script>
<script language="javascript" type="text/javascript" src="js/script.js"></script>
<script type="text/javascript">
 $(document).ready( function(){ 
        var buttons = { previous:$('#jslidernews2 .button-previous') ,
                        next:$('#jslidernews2 .button-next') };          
        $('#jslidernews2').lofJSidernews( { interval:5000,
                                                easing:'easeInOutQuad',
                                                duration:1200,
                                                auto:true,
                                                mainWidth:684,
                                                mainHeight:300,
                                                navigatorHeight     : 100,
                                                navigatorWidth      : 310,
                                                maxItemDisplay:3,
                                                buttons:buttons } );                        
    });

</script>
<style>

    ul.lof-main-wapper li {
        position:relative;  
    }
</style>
<!-- Slider -->
</head>
<body>

<!------------------------------------- THE CONTENT ------------------------------------------------->
<div id="jslidernews2" class="lof-slidecontent" style="width:980px; height:300px;">
    <div class="preload"><div></div></div>

            <div  class="button-previous">Previous</div>

             <!-- MAIN CONTENT --> 
              <div class="main-slider-content" style="width:684px; height:300px;">
                <ul class="sliders-wrap-inner">
                    <li>
                            <img src="images/thumbl_980x340.png" title="Newsflash 2" >           
                          <div class="slider-description">
                            <div class="slider-meta"><a target="_parent" title="Newsflash 1" href="#Category-1">/ Newsflash 1 /</a> <i> — Monday, February 15, 2010 12:42</i></div>
                            <h4>Content of Newsflash 1</h4>
                            <p>The one thing about a Web site, it always changes! Joomla! makes it easy to add Articles, content,...
                            <a class="readmore" href="#">Read more </a>
                            </p>
                         </div>
                    </li> 
                   <li>
                      <img src="images/thumbl_980x340_002.png" title="Newsflash 1" >           
                         <div class="slider-description">
                           <div class="slider-meta"><a target="_parent" title="Newsflash 2" href="#Category-2">/ Newsflash 2 /</a>  <i> — Monday, February 15, 2010 12:42</i></div>
                            <h4>Content of Newsflash 2</h4>
                            <p>Joomla! makes it easy to launch a Web site of any kind. Whether you want a brochure site or you are...
                            <a class="readmore" href="#">Read more </a>
                            </p>
                         </div>
                    </li> 
                   <li>
                      <img src="images/thumbl_980x340_003.png" title="Newsflash 3" >            
                        <div class="slider-description">
                          <div class="slider-meta"><a target="_parent" title="Newsflash 3" href="#Category-3">/ Newsflash 3 /</a>   <i> — Monday, February 15, 2010 12:42</i></div>
                            <h4>Content of Newsflash 3</h4>
                            <p>With a library of thousands of free Extensions, you can add what you need as your site grows. Don't...
                            <a class="readmore" href="#">Read more </a>
                            </p>
                         </div>
                    </li> 
                    <li>
                      <img src="images/thumbl_980x340_004.png" title="Newsflash 5" >            
                        <div class="slider-description">
                          <div class="slider-meta"><a target="_parent" title="Newsflash 4" href="#Category-4">/ Newsflash 4 /</a>   <i> — Monday, February 15, 2010 12:42</i></div>
                            <h4>Content of Newsflash 4</h4>
                            <p>Joomla! 1.5 - 'Experience the Freedom'!. It has never been easier to create your own dynamic Web...
                            <a class="readmore" href="#">Read more </a>
                            </p>
                         </div>
                    </li> 
                    <li>
                      <img src="images/thumbl_980x340_005.png" title="Newsflash 5" >            
                        <div class="slider-description">
                           <div class="slider-meta"><a target="_parent" title="Newsflash 5" href="#">/ Newsflash 5 /</a>    <i> — Monday, February 15, 2010 12:42</i></div>
                           <h4>Content of Newsflash 5</h4>
                            <p>Joomla! 1.5 - 'Experience the Freedom'!. It has never been easier to create your own dynamic Web...
                            <a class="readmore" href="#">Read more </a>
                            </p>
                         </div>
                    </li> 
                    <li>

                      <img src="images/thumbl_980x340_006.png" title="Newsflash 5" >            
                        <div class="slider-description">
                          <div class="slider-meta"><a target="_parent" title="Newsflash 6" href="#">/ Newsflash 6 /</a> <i> — Monday, February 15, 2010 12:42</i></div>
                            <h4>Content of Newsflash 6</h4>
                            <p>Joomla! 1.5 - 'Experience the Freedom'!. It has never been easier to create your own dynamic Web...
                            <a class="readmore" href="#">Read more </a>
                            </p>
                         </div>
                    </li> 

                  </ul>     
            </div>
           <!-- END MAIN CONTENT --> 
           <!-- NAVIGATOR -->
            <div class="navigator-content">
                  <div class="navigator-wrapper">
                        <ul class="navigator-wrap-inner">
                          <li>
                                <div>
                                    <img src="images/lofthumbs/791902news3.jpg" />
                                    <h3> NewsFlash 1 </h3>
                                    <span>20.01.2010</span> - In id, mauris viverra asperiores, bibendum in id. Eu molestie. Ac sit eu...
                                </div>    
                            </li>
                             <li>
                                <div>
                                    <img src="images/lofthumbs/435576news10.jpg" />
                                    <h3> NewsFlash 2 </h3>
                                    <span>20.01.2010</span> -In id, mauris viverra asperiores, bibendum in id. Eu molestie. Ac sit eu. ..
                                </div>    
                            </li>

                            <li>
                                <div>
                                    <img src="images/lofthumbs/641906img1.jpg" />
                                    <h3> NewsFlash 3 </h3>
                                    <span>20.01.2010</span> - In id, mauris viverra asperiores, bibendum in id. Eu molestie. Ac sit eu. ..
                                </div>     
                            </li>

                           <li>
                                <div>
                                    <img src="images/lofthumbs/416719news7.jpg" />
                                    <h3> NewsFlash 4</h3>
                                    <span>20.01.2010</span> - In id, mauris viverra asperiores, bibendum in id. Eu molestie. Ac sit eu. ..
                                </div>
                            </li>    
                            <li>
                                 <div>
                                    <img src="images/lofthumbs/641906img1.jpg" />
                                    <h3> NewsFlash 5</h3>
                                    <span>20.01.2010</span> -In id, mauris viverra asperiores, bibendum in id. Eu molestie. Ac sit eu. ..
                                 </div>   
                            </li>
                           <li>
                                <div>
                                    <img src="images/lofthumbs/416719news7.jpg" />
                                    <h3> NewsFlash 6</h3>
                                    <span>20.01.2010</span> - In id, mauris viverra asperiores, bibendum in id. Eu molestie. Ac sit eu. ..
                                </div>
                            </li>           
                        </ul>
                  </div>

             </div> 
          <!----------------- END OF NAVIGATOR --------------------->
          <div class="button-next">Next</div>

         <!-- BUTTON PLAY-STOP -->
          <div class="button-control"><span></span></div>
          <!-- END OF BUTTON PLAY-STOP -->

<!------------------------------------- END OF THE CONTENT ------------------------------------------------->

    </div>
</body>
</html> 
```

滑块 2 是相同的，只是更改了 id 以使其唯一。

对大代码转储感到抱歉，但有必要看看发生了什么。

收到任何帮助或建议...

（半工作示例（由于某种原因不是 chrome））

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T12:46:05.663

我遇到了和你一样的问题。我发现通过它的 ID 查找 html 元素不是一个好方法。`$('.class').each(function(i,obj){ /* do sth */})`可以处理业务。

检查[这篇文章](http://gosteven.com/blog/2012/08/29/multiple-sliders-on-one-page-jquery/)，里面有一个样本。

希望它会有所帮助。

# android - Sencha Touch 2 应用程序不适用于 Android 手机，但适用于虚拟 Android 设备

> ID：10400523
> 
> 赞同：0
> 
> 时间：2012-05-01T16:05:30.250
> 
> 标签：android, mobile, extjs, sencha-touch-2

我有一个移动 Web 应用程序（不是通过 PhoneGap 打包的），它可以在 iOS 上的 Chrome、Safari 和 Safari 移动设备上成功运行，但我在 Android 手机或 Firefox 上没有任何成功。

但是，当我在虚拟 Android 设备（2.3 或更高版本）上运行该应用程序时，它运行良好。我能做些什么来确保它对两者都有效？

在 HTC Hero (Android 2.1) 上，它似乎没有进入第一个视图的初始化。至于其他设备（高于 2.3）我只是得到一个空白屏幕。

让我知道我可以提供的任何其他信息。我可以在低于或高于 2.3 的虚拟设备上进行测试并报告这些错误，提供代码示例等。

感谢所有帮助。我们觉得我们的应用程序即将推出，这就是阻碍我们的全部！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T08:34:10.653

首先，它不适用于 Firefox。Firefox 不具备`web-kit-engine`Sencha Touch 所需的功能。

> 但我在安卓手机上没有任何成功

您可以使用类似`WampServer`,的软件启动本地主机`Apache Web Server`，将所有代码放在根目录中，然后尝试通过 URL 在您的 android 手机上访问它

```
http://_your_ip_address:_portno_/_root_directory_/app/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T16:13:49.820

你有相对的所有路径（到 javascript 文件，css ...）吗？也许您也可以尝试使用phonegap。这不是很多努力，它至少可以帮助找出问题所在。

您也可以尝试从安卓手机浏览器访问您的计算机/本地主机或其他主机中的应用程序，您将查看它是否加载。

# php - MySQL的编码问题

> ID：10400524
> 
> 赞同：0
> 
> 时间：2012-05-01T16:05:36.657
> 
> 标签：php, mysql

我得到的是小盒子而不是瑞典字符 å、ä 和 ö，尽管我在我能想到的任何地方都使用 UTF-8！我使用 UTF-8 从记事本中保存了没有 BOM 的文件，并且 HTML 页面具有 meta charset="utf-8"，并且我将数据库中的表更改为 UTF8_swedish_ci。我错过了什么？一些帮助！谢谢！

编辑：使用拉丁文并将所有文件保存为拉丁文而不是 UTF8 会更好吗？但是我仍然可以在 HTML 头中使用 meta charset="utf-8" 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T16:09:48.543

检查您在 MySQL 连接中使用的排序规则？设置正确的一个。

您可以使用查询更改当前连接的排序规则： `set names utf8 collate utf8_swedish_ci")`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T16:37:54.177

我相信PHP存在问题。我遇到了您的情况：UTF8 中的数据库，UTF8 中的 HTML 页面，但是我通过**mysql_fetch_assoc()**获得的数据编码不正确（因此，显示 ? 字符，如您的情况）。

我的解决方案是在我的 php 源代码中使用**utf8_encode()**和**utf8_decode()**来处理数据库的输入和输出。

看看这个解决方案是否适合你。

PS。排序规则不是 char 编码。谷歌什么是排序规则。据我所知（不多）默认为 swedish_ci 因为瑞典语是最完整的字符。如果我错了，请纠正这个。

# android - Android：当字段可见性更改为 GONE 时，更改 XML 中的焦点顺序

> ID：10400527
> 
> 赞同：3
> 
> 时间：2012-05-01T16:06:02.687
> 
> 标签：android, android-layout

我有一个包含多个编辑文本（姓名、电话、评论）的布局。在显示视图之前，根据 HTTP 调用的结果隐藏或显示一个编辑文本 (comments.setVisibility(View.GONE))。如果该视图被隐藏并且用户选项卡来自前一个视图，则程序停止。

在 Winforms 中，如果某个字段被隐藏，则 Tab 键顺序中的下一个项目将成为焦点。对于我在 Android 中的视图，有什么方法可以在 XML 中执行此操作吗？

我可以将下一个焦点向下更改并以编程方式将下一个焦点向上更改，但这似乎应该自动完成。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T13:58:19.640

我找不到 Android 这样做的任何方式。所以这是一种设置下一个焦点的方法，假设您的视图通过下一个焦点形成一个循环：

```
protected int getNextFocusDownBasedOnVisibility(View view)
{
    int nextViewDownId = View.NO_ID;

    if (view.getVisibility() != View.GONE)
    {
        boolean keepGoing = true;
        View nextView = view;

        while (keepGoing)
        {
            keepGoing = false;
            nextViewDownId = nextView.getNextFocusDownId();

            if (nextViewDownId != View.NO_ID)
            {
                nextView = findViewById(nextViewDownId);

                if (nextView.getVisibility() == View.GONE)
                {
                    keepGoing = true;
                }
            }
        }
    }

    return nextViewDownId;
} 
```

# multithreading - 带线程的 Perl 脚本渐进式而不是异步地工作

> ID：10400528
> 
> 赞同：0
> 
> 时间：2012-05-01T16:06:03.560
> 
> 标签：multithreading, perl

我正在使用 Perl 5.10.1 中的线程进行一些测试，但我遇到了一些问题。首先，我有 2.6.32-5-amd64（64 位）的 Debian GNU/Linux 挤压/sid。

这是我的脚本

```
#!/usr/bin/perl -w
use strict;
use warnings;
use threads;  

sub threadProcess{
    my ($number, $counter) = @_; 
    print "Enter thread #" . $number . "\n";
    while($counter < 10){
        print "Thread #" . $number . ": " . $counter . "\n";
        $counter++;
    }
    print "Exit thread #" . $number . "\n";
}

sub main{ 
    my $counter = 0;

    my $thr1 = threads->create(\&threadProcess, 1, $counter);  
    my $thr2 = threads->create(\&threadProcess, 2, $counter); 

    my $res1 = $thr1->join();  
    my $res2 = $thr2->join(); 

    print "Bye...\n";
}

main(@ARGV); 
```

这是输出：

```
Enter thread #1
Thread #1: 0
Thread #1: 1
Thread #1: 2
Thread #1: 3
Thread #1: 4
Thread #1: 5
Thread #1: 6
Thread #1: 7
Thread #1: 8
Thread #1: 9
Exit thread #1
Enter thread #2
Thread #2: 0
Thread #2: 1
Thread #2: 2
Thread #2: 3
Thread #2: 4
Thread #2: 5
Thread #2: 6
Thread #2: 7
Thread #2: 8
Thread #2: 9
Exit thread #2
Bye... 
```

可能是什么问题？提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-01T16:12:10.430

什么都没有，只是工作`threadProcess`太短了，以至于第一个线程可以在第二个线程初始化之前完成。

在你的循环中放一个延迟，你会看到线程同时工作。

```
while($counter < 10){
    print "Thread #" . $number . ": " . $counter . "\n";
    sleep 1;      # or Time::HiRes::sleep 0.25, etc.
    $counter++;
} 
```

# javascript - 地理定位在Firefox中不起作用

> ID：10400531
> 
> 赞同：0
> 
> 时间：2012-05-01T16:06:34.093
> 
> 标签：javascript, html, geolocation

我正在尝试使用谷歌地理编码作为后备向站点添加地理位置功能，到目前为止它可以与 chrome 一起正常工作。当我在 Firefox 中试用它时，它不仅显示位置提示，这是我的代码

```
function add_location() {
        if (navigator.geolocation)  
        {  
            $("#pheed-location").fadeIn();
            $('.loading-indicator').fadeIn();
            navigator.geolocation.getCurrentPosition(handle_geolocation_query, handle_location_errors);  
        }  
    }
    function parseLocationError(error)
    {
        switch(error.code)  
        { 
            case error.PERMISSION_DENIED:
            errorMsg = "User did not share geolocation data";  
            code = 1;
            break;  

            case error.POSITION_UNAVAILABLE: 
            errorMsg = "Could not detect your current position";
            code = 2;
            break;  

            case error.TIMEOUT:
            errorMsg = "Retrieving position timedout";  
            code = 2;
            break;  

            default:
            errorMsg = "Unknown error";  
            code = 0;
            break;  
        }
        var _error = {"msg":errorMsg,"code":code};
        return _error;
    }
    /**
    * Handles error from geolocation
    * @param error object
    **/
    function handle_location_errors(error) {
        var msgDisplay = $('.loading-indicator');
        //Error message
        var errorMsg ="";
        console.log(error);
        //Set error message base on error code
        var Error = parseLocationError(error);
        if((Error.code === 1) || (Error.code === 2)) {
        msgDisplay.html('').fadeOut();
        msgDisplay.html(Error.msg).fadeIn();
            if(Error.code === 2)
            $("#location-entry").fadeIn();
        }
    } 
```

我添加了“console.log(error)”以确保返回错误。这些错误在 chrome 中正确记录，但在 Firefox 中似乎根本不起作用。可能是什么问题呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T22:38:48.530

过去几天我一直在使用地理定位 API，发现 Firefox 17/18、Chrome 24.0、Safari 5.1 和 IE 9.0 之间存在间歇性问题。昨天它在 Firefox 中运行良好，但后来开始失败。它会提示授权共享我的位置，但随后什么也没有。没有执行进一步的代码......它只是死了。我试过IE9，它告诉我不支持GPS。我在Safari中尝试过，它也失败了。Chrome 是唯一似乎仍然可以工作的浏览器。

我尝试重新启动我的笔记本电脑。我关闭/打开笔记本电脑（戴尔 XPS 1330）上的无线网络。我尝试检查每个浏览器的设置，但我无法确定问题...直到...

**解决方案：**我重新启动了宽带调制解调器。我正在运行 DGND3700（600Mbps 双频 ADSL2+ 宽带调制解调器/千兆路由器）。我执行了一个远程“重启路由器”，瞧！现在一切都恢复正常了。我确实注意到重启前的连接速度是 3500kbps（3.5Mbps），但重启后它又回升至近 16000kbps（16Mbps！）。

如果您遇到地理定位问题 - 重新启动您的无线路由器（如果可以的话）！希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-08T13:17:17.577

很可能这是网站故障 - 无法使用地理位置检测所需的 HTTPS 协议打开它（[https://www.thesslstore.com/blog/firefox-55-https-for-geolocation/](https://www.thesslstore.com/blog/firefox-55-https-for-geolocation/)）。

# json - 每个用户的 twitter 搜索 API

> ID：10400535
> 
> 赞同：0
> 
> 时间：2012-05-01T16:06:48.677
> 
> 标签：json, api, twitter, httpwebrequest

我能够做到以下几点，

```
$.ajax({
    url : 'http://search.twitter.com/search.json',
    data:{
        q:'from:user1 OR from:user2',
        rpp:1,
        page:1,
        include_entities:1
    },
    type: 'GET',
    dataType:'jsonp',
    success:function (r){
        console.log(r)
    },
    error:function (){

    }
}); 
```

我需要为每个用户获取 x 条推文...

因此，例如 user_1 的前两条推文，然后是 user_2 的后两条推文，所以我总共得到 4 个……或者如果有 3 个用户，则得到 6 个等等…… atm 它向我显示了一个分页选项，而我没有希望为每个用户发出多个请求，因为它们大约有 10 个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T07:27:48.807

继续为此制作了一个简单的 Yahoo Pipe。可能可以对其进行编辑以使其更健壮，但它将 2 个调用合二为一。

[http://pipes.yahoo.com/pipes/pipe.info?_id=15754ad56809f1970a5c7f5ac117f064](http://pipes.yahoo.com/pipes/pipe.info?_id=15754ad56809f1970a5c7f5ac117f064)

```
$.ajax({
    url : 'http://pipes.yahooapis.com/pipes/pipe.run',
    data:{
        Name1:'twitter',
        Name2:'twitterapi',
        id:'15754ad56809f1970a5c7f5ac117f064',
        render:'json'
    },
    type: 'GET',
    dataType:'json',
    success:function (r){
        console.log(r)
    },
    error:function (){

        }
    }); 
```

# protobuf-net - Protobuf-net RuntimeTypeModel 不序列化基类的成员

> ID：10400539
> 
> 赞同：3
> 
> 时间：2012-05-01T16:06:55.597
> 
> 标签：protobuf-net

假设我有以下基类：

```
[DataContract]
[Serializable]
public abstract class DimensionEntity
{
    [DataMember(Order = 1)]
    private readonly Date effectiveDatespan;
    ...
} 
```

以及以下派生类：

```
[DataContract]
[Serializable]
public class ClearingSite : DimensionEntity
{
    [DataMember(Order = 1)]
    private readonly string code;
    ...
} 
```

当我序列化`ClearingSite`如下实例时：

```
 model.Add(typeof(ClearingSite), true);
        model.Serialize(ms, clearingSite); 
```

我可以看到只有`code`成员`ClearingSite`被序列化了；基类`effectiveDatespan`成员的值未序列化。

两个注意事项：

1.  可以看到 add 的`BaseType`成员`ProtoBuf.Meta.MetaType`设置为`null`，导致`effectiveDatespan`成员没有被序列化；相反，如果我编译模型，则它的`BaseType`成员被正确设置为`DimensionEntity`（尽管它稍后会失败，因为成员是这样的`private readonly`，因此编译模型无法访问）；
2.  当然，我可以声明`ClearingSite`为 的已知类型`DimensionEntity`，但我不明白为什么需要这样做：我没有序列化 a `DimensionEntity`，我正在序列化（和反序列化） a `ClearingSite`，而且`DataContractSerializer`不需要我添加如果我正在序列化`KnownType`一个.`DimensionEntity``ClearingSite`

从 Marc 的其他答案来看，Protobuf 似乎需要`KnownType`(or `ProtoInclude`) 属性才能获得“所有重要的字段编号”（引用），但情况似乎并非如此，因为`CompiledModel`没有`ProtoInclude`.

请注意，我正在努力`System.Runtime.Serialization`仅使用属性，因为我试图让我的对象模型不知道序列化程序在路上。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T17:31:38.037

绝对需要 ProtoInclude 或等效项。如果编译版本发生了奇怪的事情，那么这是一个错误，我可以调查。

如果您不想将非 BCL 属性添加到您的类型，这可以在运行时完成：

```
RuntimeTypeModel.Default[typeof(BaseType)]
    .AddSubClass(.....); 
```

（或类似的东西-我不在PC上）

# android - Android 的 runOnUiThread() 方法

> ID：10400540
> 
> 赞同：4
> 
> 时间：2012-05-01T16:06:56.830
> 
> 标签：android, multithreading

我习惯于调用 runOnUiThread() 来确保代码块在 UI 线程上运行。我希望同样轻松地*从*UI 线程启动一段代码。该方法应该是什么样的？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-01T16:12:32.893

我想你会说方法是`start()`：

```
new Thread() {
  public void run() {
    // do something
  }
}.start(); 
```

或使用`AsyncTask`或一些`Executor`来自`java.util.concurrent`或其他。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-01T16:10:39.137

你很可能想要一个`AsyncTask`. 参考这篇文章：http: [//developer.android.com/resources/articles/painless-threading.html](http://developer.android.com/resources/articles/painless-threading.html)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-01T16:13:50.287

ASyncTask 的替代方案

```
 new Thread(){
        public void run() {
            // Do something
        };
    }.start(); 
```

# c# - 使用 ASP.NET 和 MVC 3，如何创建隐藏字段，以便以数组作为列表中每个项目的值的列表正确绑定？

> ID：10400551
> 
> 赞同：2
> 
> 时间：2012-05-01T16:08:01.430
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, linq, razor

我有一个查询语句列表，当需要将另一条语句添加到末尾时，这些语句需要发回 MVC 控制器。对于我现在尝试创建的测试，页面以过滤器列表开头。在执行此示例时，页面将为过滤器创建字段，如下所示：

```
<input id="filters_0__PropertyName" name="filters[0].PropertyName" type="hidden" value="State">
<input id="filters_0__Operator" name="filters[0].Operator" type="hidden" value="=">
<input id="filters_0__Value" name="filters[0].Value" type="hidden" value="CA"> 
```

但是当我看到表单实际上发回控制器时，列表返回为：

```
PropertyName = "State"
Operator = "="
Value= "new string[1]" // The value comes back in the first index of the array 
```

我必须将值参数转换为数组并获取第一个索引才能获取值。这没关系，但并不理想。当 FilterField 包含 Value 属性的整数或字符串数​​组时，就会出现主要问题。发生这种情况时，HTML 会显示为：

```
<input id="filters_2__PropertyName" name="filters[3].PropertyName" type="hidden" value="Schedule_Num">
<input id="filters_2__Operator" name="filters[3].Operator" type="hidden" value="IN">
<input id="filters_2__Value" name="filters[3].Value" type="hidden" value="System.Int32[]"> 
```

然后该值包含对象类型并且根本没有值。所以模型绑定器变得混乱，一切都中断了。有没有更简单的方法可以将此值列表与视图联系起来？

**过滤器字段.cs：**

```
public class FilterField
{
    public string PropertyName { get; set; }
    public string Operator { get; set; }
    public object Value { get; set; }

    public FilterOutput GetOutput()
    {
        return new FilterOutput(PropertyName, Operator, Value);
    }
} 
```

**过滤器输出.cs**

```
public class FilterOutput
{
    private List<QueryProperty> _properties = new List<QueryProperty>();
    private string _propertyName;
    private string _op;
    private object _value;

    public string Sql { get; set; }
    public QueryProperty[] Properties { get; set; }

    public FilterOutput(string propertyName, string op, object value)
    {
        var sql = "[{0}] {1} {2}";
        Sql = string.Format(sql, propertyName, op, FormatParameter(propertyName, op, value));
        Properties = _properties.ToArray();
    }

    private string FormatParameter(string propertyName, string op, object value)
    {
        _properties.Clear();
        var sb = new StringBuilder();
        switch (op.ToUpper())
        {
            case "IN":
                {
                    var values = value as Array;
                    sb.Append("{");
                    var inCount = 0;
                    foreach (var v in values)
                    {
                        var pName = propertyName + inCount;
                        if (inCount == 0)
                            sb.Append("@" + pName);
                        else
                            sb.Append(",@" + pName);
                        _properties.Add(new QueryProperty { Name = pName, Value = v });
                        inCount++;
                    }
                    sb.Append("}");
                }
                break;
            case "LIKE":
                if (value.ToString().Contains("_"))
                    sb.Append("@" + propertyName);
                else
                    sb.Append("'%' + @" + propertyName + " + '%'");
                _properties.Add(new QueryProperty { Name = propertyName, Value = value });
                break;
            case "BETWEEN":
                var range = value as Array;
                var betweenCount = 0;
                foreach (var r in range)
                {
                    if (betweenCount > 0)
                        sb.Append(" AND ");
                    sb.Append("@" + propertyName + betweenCount);
                    _properties.Add(new QueryProperty { Name = propertyName + betweenCount, Value = r });
                    betweenCount++;
                }
                break;
            default:
                sb.Append("@" + propertyName);
                _properties.Add(new QueryProperty { Name = propertyName, Value = value });
                break;
        }
        return sb.ToString();
    }

    public string ConvertToSql()
    {
        var filterOutput = this;
        var output = filterOutput.Properties.Aggregate(filterOutput.Sql, (current, p) => current.Replace("@" + p.Name, FormatObjectToString(p.Value)));
        output = output
            .Replace("[", "t.").Replace("]", "") // Convert [text] to t.text
            .Replace("{", "(").Replace("}", ")") // Convert {'text1','text2'} to ('text1','text2')
            .Replace("'%' + '", "'%").Replace("' + '%'", "%'"); // Convert '%' + text + '%' to '%text%'
        return " AND " + output;
    }

    public override string ToString()
    {
        var filterOutput = this;
        return filterOutput.Properties.Aggregate(filterOutput.Sql, (current, p) => current.Replace("@" + p.Name, FormatObjectToString(p.Value)).Replace("'%' + '", "'%").Replace("' + '%'", "%'"));
    }

    private string FormatObjectToString(object value)
    {
        if (value is int)
            return value.ToString();
        return String.Format("'{0}'", value);
    }
} 
```

**家庭控制器.cs**

```
public ActionResult TestQuery(DateTime date)
{
    var builder = new QueryBuilder(_repo, "INFO", date);

    builder.AddFilters(
            new FilterField
                {
                    PropertyName = "State",
                    Operator = "=",
                    Value = "CA"
                },
            new FilterField
                {
                    PropertyName = "Schedule_Num",
                    Operator = "IN",
                    Value = new[] {2, 6}
                });

    var result = builder.Build();
    return View(result);
 }

 [HttpPost]
 public ActionResult TestPost(QueryResult result)
 {
    var builder = new QueryBuilder(_repo, "INFO", date);

    foreach (var f in result.Filters)
    {
        builder.AddFilters(new FilterField
                                   {
                                       PropertyName = f.PropertyName,
                                       Operator = f.Operator,
                                       Value = ((Array)f.Value).GetValue(0)
                                   });
    }

    builder.AddFilters(
            new FilterField
                {
                    PropertyName = "Gender",
                    Operator = "BETWEEN",
                    Value = new[] {"A", "G"}
                });

    var newResult = builder.Build();
    return View("TestQuery", newResult);
 } 
```

**测试查询.cshtml**

```
@model Models.QueryResult

@using (Html.BeginForm("TestPost", "Home"))
{
    @Html.HiddenFor(m => m.Date)
    for (var i = 0; i < Model.Filters.Count(); i++)
    {
        @Html.Hidden("filters[" + i + "].PropertyName", Model.Filters[i].PropertyName)
        @Html.Hidden("filters[" + i + "].Operator", Model.Filters[i].Operator)
        @Html.Hidden("filters[" + i + "].Value", Model.Filters[i].Value)
    }
    <div class="formArea">
        <p>
            <input type="submit" value="Submit" id="btnSubmit" />
        </p>
    </div>
} 
```

**查询结果.cs**

```
public class QueryResult
{
    public DateTime Date { get; set; }
    public ObjectQuery<EntityObject> Objects { get; set; }
    public string SqlStatement { get; set; }
    public ObjectParameter[] Parameters { get; set; }
    public AdjustResult AdjustResult { get; set; }
    public IList<FilterField> Filters { get; set; }

    public QueryResult()
    {
        Filters = new List<FilterField>();
    }

    public void AddFilter(FilterField filter)
    {
        Filters.Add(filter);
    }

    public string ParsedSqlStatement()
    {
        var output = Parameters.Aggregate(SqlStatement, (current, p) => current.Replace("@" + p.Name, FormatObjectToString(p.Value)));
        return Filters.Aggregate(output, (current, filter) => current + filter.ConvertToSql());
    }

    private string FormatObjectToString(object value)
    {
        if (value is int)
            return value.ToString();
        return String.Format("'{0}'", value);
    }
} 
```

**查询生成器.cs**

```
public class QueryBuilder
{
    public IList<FilterField> Filters { get; set; }

    private IDynamicRepository _repo;
    private string _tablePrefix;
    private DateTime _date;
    private QueryResult _base;

    public QueryBuilder(IDynamicRepository repository, string tablePrefix, DateTime date)
    {
        _repo = repository;
        _tablePrefix = tablePrefix;
        _date = date;
        _base = _repo.GetAll(tablePrefix, date);
        Filters = new List<FilterField>();
    }

    public void AddFilters(params FilterField[] filters)
    {
        foreach (var f in filters)
        {
           Filters.Add(f);
        }
    }

    public void RemoveFilter(FilterField filter)
    {
        Filters.Remove(filter);
    }

    public QueryResult Build()
    {
        return _base.Where(Filters.ToArray());
    }
} 
```

**扩展.cs**

```
public static QueryResult Where(this QueryResult result, string predicate, params QueryProperty[] properties)
{
    result.Objects = result.Objects.Where(predicate.ReplaceIdentifier(), properties.Select(p => new ObjectParameter(p.Name, p.Value)).ToArray());
    return result;
}

public static QueryResult Where(this QueryResult result, FilterField filter)
{
    var filterOutput = filter.GetOutput();
    result.Objects = result.Objects.Where(filterOutput.Sql.ReplaceIdentifier(), filterOutput.Properties.Select(p => new ObjectParameter(p.Name, p.Value)).ToArray());
    result.AddFilter(filter);
    return result;
}

public static QueryResult Where(this QueryResult result, params FilterField[] filters)
{
    return filters.Aggregate(result, Where);
} 
```

由于你们中的一些人想了解更多信息，这里有一些关于一切如何联系在一起的更多细节。基本上，控制器从 UI 中获取过滤器列表，这些过滤器归结为 WHERE 之后的 SQL 语句。所以一个过滤器会变成 FIELD = VALUE 或 FIELD IN (VALUE1, VALUE2)。查询构建器使用 Entity.CreateQuery("SELECT * FROM TABLE") 创建 SQL 语句的基础。运行 querybuilder 上的方法 Build() 后，它会创建一个 QueryResult 模型，该模型具有查询日期和查询的所有 EntityObjects 以及附加的过滤器变成 WHERE 语句以供视图使用。我继续添加了更多的类来展示它们是如何联系在一起的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-01T16:14:47.153

在您看来，您不需要像那样设置名称，因为您可以使用`HiddenFor`它来为您执行此操作。将视图中的 for 循环更改为：

```
for (var i = 0; i < Model.Filters.Count(); i++)
{
    @Html.HiddenFor(m => m.Filters[i].PropertyName)
    @Html.HiddenFor(m => m.Filters[i].Operator)
    @Html.HiddenFor(m => m.Filters[i].Value)
} 
```

这应该为您提供正确的标记，这反过来应该有助于默认模型绑定器将过滤器发送到您`QueryResult`的`HttpPost`方法:)。

**编辑：当您绑定多个值或单个值（`int`或者`string`，可能是 an `Array`）时，您最好将类中的`Value`属性更改`FilterField`为 a `List<string>`。

所以，在`FilterField`课堂上替换这个：

```
public object Value { get; set; } 
```

有了这个：

```
public List<string> Values { get; set; } 
```

然后将您的标记更改为：

```
for (var i = 0; i < Model.Filters.Count(); i++)
{
    @Html.HiddenFor(m => m.Filters[i].PropertyName)
    @Html.HiddenFor(m => m.Filters[i].Operator)
    for (var j = 0; j < Model.Filters[i].Values.Count; j++)
    {
        @Html.HiddenFor(m => m.Filters[i].Values[j])
    }
} 
```

这样，虽然它可能看起来不是世界上最漂亮的一段代码，但它让您不必担心必须破解模型绑定以按照您的意愿工作，它只会默认绑定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T16:15:47.043

[我想你可以从这篇文章](http://blog.stevensanderson.com/2010/01/28/editing-a-variable-length-list-aspnet-mvc-2-style/)中改编这个想法。

您案例中的每个项目都将是 FilterItems 而不是 GiftItems ...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T17:32:30.127

默认情况下，具有相同名称的多个输入将绑定到一个数组。因此，您需要离散地迭代每个值并将其添加为隐藏输入（具有相同名称）。当它回发时，它将绑定为一个数组。

迭代每个值也应该消除对象类型被设置为值的问题。

# java - 将日期时间戳转换为 RSS pubDate

> ID：10400552
> 
> 赞同：0
> 
> 时间：2012-05-01T16:08:03.003
> 
> 标签：java, asp.net, .net, rss

我有一个来自数据库的这种格式的发布日期。“2011-08-30 22:47:38.047”如何将其转换为 RSS pubDate 格式，例如：“2012 年 4 月 25 日，星期三 3:00 PM”。在 DB 中，日期格式如下："2011-08-30 22:47:38.047"

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T17:07:46.223

Here is an example of java code that achieve what you want:

```
String input = "2011-08-30 22:47:38.047";

SimpleDateFormat inputFormat =
    new SimpleDateFormat("yyyy-MM-dd HH:mm:ss.sss");
SimpleDateFormat outputFormat =
    new SimpleDateFormat("EEEEE, MMMMM dd, yyyy hh:mm a");
Date inputDate = inputFormat.parse(input);
System.out.println(outputFormat.format(inputDate)); 
```

the output from this snippet is:

```
Tuesday, August 30, 2011 10:47 PM 
```

# java - Solr中添加自定义查询参数的正确方法

> ID：10400554
> 
> 赞同：6
> 
> 时间：2012-05-01T16:08:07.640
> 
> 标签：java, search, solr, lucene

我目前正在运行一个运行良好的 Solr 客户端/服务器对。

但是，在某些情况下，`fq`发送到 Solr 的过滤器查询（参数）非常大（可能是数千个字符）并且无法修剪。由于查询解析[只占用总时间的一小部分](http://mail-archives.apache.org/mod_mbox/lucene-solr-user/201204.mbox/%3CCAN4YXvfMJYKR2ga-jY1x6Cu-tvQx5k9r90LXS1bgPmVD7%3DpjBA%40mail.gmail.com%3E)，我想尝试压缩此查询部分并将其发送到 Solr。

我正在考虑修改客户端，而不是`fq`使用另一个参数（例如`zfq`）。Solr 然后可以决定 - 如果它接收`zfq`到，它会使用它并将数据解码为`fq`. 否则它应该像往常一样运行。

实现上述目标的标准方法是什么？看起来有`SearchHandler`, `requestHandler`, `<queryParser`（都在 solrconfig.xml 中）和许多其他的，我不太确定什么是最不打扰的。我对 Lucene/Tomcat 相当有信心，但对 Solr 数据结构了解不多。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T09:36:57.140

您可以让 Solr 容器占用极长的 url：[Tomcat here](https://serverfault.com/questions/56691/whats-the-maximum-url-length-in-tomcat)，[Jetty here](https://serverfault.com/questions/136249/how-do-we-increase-the-maximum-allowed-http-get-query-length-in-jetty)。

如果`fq`s 有一些默认值，您可以创建一个默认包含它的查询解析器。

```
 <requestHandler name="for_some_queries" class="solr.SearchHandler" default="true">
    <!-- default values for query parameters -->
     <lst name="defaults">
       <str name="echoParams">explicit</str>
       <str name="fq">MY VERY LONG FQ</str>
     </lst>
  </requestHandler> 
```

* * *

但我同意 Mauricio Scheffer 的观点，他提出了更好的设计。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T19:30:31.547

您是否考虑过使用这种语法 -category:(1 2 3 4 ... N)。这应该将字符串减少 90%。比拉链好。

# python - 如何通过传递文件对象（而不是磁盘上文件的位置）将 ffmpeg 与 Python 一起使用

> ID：10400556
> 
> 赞同：11
> 
> 时间：2012-05-01T16:08:14.560
> 
> 标签：python, ffmpeg, subprocess, pyffmpeg

我正在尝试将 ffmpeg 与 Python 的 subprocess 模块一起使用来转换一些音频文件。我从 URL 中获取音频文件，并希望能够将 Python 文件对象传递给 ffmpeg，而不是先将它们保存到磁盘。如果我可以只取回文件流而不是让 ffmpeg 将输出保存到文件中，那也很好。

作为参考，这就是我现在正在做的事情：

```
tmp = "/dev/shm"
audio_wav_file = requests.get(audio_url)
##              ##                         ##
## This is what I don't want to have to do ##
wavfile = open(tmp+filename, 'wrb')   
wavfile.write(audio_wav_file.content)
wavfile.close()
##              ##                         ##
conversion = subprocess.Popen('ffmpeg -i "'+tmp+filename+'" -y "'+tmp+filename_noext+'.flac" 2>&1', shell = True, stdout = subprocess.PIPE).stdout.read() 
```

有谁知道如何做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-01T17:33:32.653

使用 ffmpeg，您可以将`-`其用作输入/输出文件名，以指示它应该从标准输入读取数据/写入标准输出。

然后你可以使用`stdin`/`stdout`参数`Popen`来读/写你的数据。

一个例子：

```
from subprocess import Popen, PIPE

with open("test.avi", "rb") as infile:
    p=Popen(["ffmpeg", "-i", "-", "-f", "matroska", "-vcodec", "mpeg4",
        "-acodec", "aac", "-strict", "experimental", "-"],
           stdin=infile, stdout=PIPE)
    while True:
        data = p.stdout.read(1024)
        if len(data) == 0:
            break
        # do something with data...
        print(data)
    print p.wait() # should have finisted anyway 
```

相反，您为您提供文件`stdin`也可以使用 a`PIPE`并直接写入进程输入流 ( `p.stdin`)。或者在您的情况下，您只需使用 wavfile ...

请注意，您必须明确指定输出格式和编解码器，因为 ffmpeg 无法像通常那样从文件扩展名中猜测它们。
它只适用于不需要可搜索输出流的多路复用器，但 flac 应该可以工作......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-03-25T18:24:08.440

对于仍在阅读本文的任何人：这可以通过使用[FFMPEG 的管道协议](https://www.ffmpeg.org/ffmpeg-protocols.html#pipe)而不使用子进程来完成。如果使用包调用 FFMPEG `ffmpeg-python`，则可以将 FFMPEG 命令的`stdout, stderr`输出输入 Python 变量，如下[所示](https://github.com/kkroening/ffmpeg-python/issues/63#issuecomment-394064816)：

```
out, err = inpstream.output('pipe:', ... ).run(capture_stdout=True) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T16:55:58.823

Since it looks like you're on Unix (no .exe on the end of 'ffmpeg'), I would recommend using a named pipe, a.k.a. fifo:

```
mkfifo multimedia-pipe 
```

Have the Python script write the audio data into 'multimedia-file' and ask FFmpeg to read from the same file. I have used this pattern to decode multimedia files into their huge, raw representations for validation without having to occupy disk space.

Alternatively, try passing the 'http://...' URL directly to FFmpeg's input option.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-01-26T15:46:21.557

PyAV 可以与[docs](https://pyav.org/docs/stable/api/_globals.html)中的路径或类似文件的对象一起使用：

> file (str) -- 要打开的文件，可以是字符串或类似文件的对象。

（如果你有一个字节数组，你可以在传递给它[`io.BytesIO`](https://docs.python.org/3/library/io.html#binary-i-o)之前将它包装起来`av.open`）

# windows - 64 位 MapViewOfFile 缓慢？

> ID：10400558
> 
> 赞同：3
> 
> 时间：2012-05-01T16:08:17.890
> 
> 标签：windows, performance, 64-bit, memory-mapped-files

我们在这里遇到了一些问题，即 MapViewOfFile 在大容量（数百 GB）上的 64 位性能问题；

在 32 位下，我们的应用程序映射了成千上万个 64 Kb 大小的视图，在数据库中随意交换。在64位下，整个数据库终于可以映射到我们进程的虚拟地址空间了。到目前为止，一切都很好。

人们会期望 64 位版本的性能比 32 位版本好得多，因为我们让 Windows 处理所有交换（如果需要的话，也就是说，这主要取决于服务器中存在的物理内存量）。

然而，在实践中，64 位版本（一次将所有文件映射到内存中）的性能要差得多，花费的时间是 32 位版本通过数据库工作的时间的 2 到 40 倍。

我们排除了很多因素，看来确实是Windows自身的Common Cache造成的。（我们主要但不完全使用 Windows Server 2008——不过，这是一个全面的问题。）

将大文件映射到内存一次时，我们可以做些什么来获得您所期望的额外加速？（与手动连续映射和交换小块相反。）

提前致谢！

# c# - Google Translate API：有什么方法可以更快地发出 http 网络请求？

> ID：10400559
> 
> 赞同：0
> 
> 时间：2012-05-01T16:08:26.313
> 
> 标签：c#, http, httpwebrequest, httpwebresponse, google-translate

我需要发出一个 HTTP 请求来取回翻译后的文本。如果我通过 Internet Explorer 手动操作，它会很快；在一秒钟或更短的时间内，我得到了结果。

但由于某种原因，如果我这样做，`HttpWebRequest`它需要更长的时间。

这是我尝试使用的代码。它工作得很好；我从服务器收到错误 404（未找到）。

有人可以为我修复此代码吗？我也不确定他们使用的编码是否足够好。

我有钥匙；只是没有在这里发布。

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Net;
using System.Web;
using System.IO;

namespace GoogleTranslateing
{
    public partial class Form1 : Form
    {
        string apiKey = "My Key";
        string sourceLanguage = "en";
        string targetLanguage = "de";
        string googleUrl;
        string textToTranslate = "hello world";

        public Form1()
        {
            InitializeComponent();

            googleUrl = "https://www.googleapis.com/language/translate/v2?key=" + apiKey + "&q=" + textToTranslate + "&source=" + sourceLanguage + "&target=" + targetLanguage;

            webRequest();

        }

        private void Form1_Load(object sender, EventArgs e)
        {

        }

        private void webRequest()
        {
            // Create a request using a URL that can receive a post. 
            WebRequest request = WebRequest.Create(googleUrl);
            // Set the Method property of the request to POST.
            request.Method = "POST";
            // Create POST data and convert it to a byte array.
            string postData = textToTranslate;
            byte[] byteArray = Encoding.UTF8.GetBytes(postData);
            // Set the ContentType property of the WebRequest.
            request.ContentType = "application/x-www-form-urlencoded";
            // Set the ContentLength property of the WebRequest.
            request.ContentLength = byteArray.Length;
            // Get the request stream.
            Stream dataStream = request.GetRequestStream();
            // Write the data to the request stream.
            dataStream.Write(byteArray, 0, byteArray.Length);
            // Close the Stream object.
            dataStream.Close();
            // Get the response.
            WebResponse response = request.GetResponse();
            // Display the status.
            Console.WriteLine(((HttpWebResponse)response).StatusDescription);
            // Get the stream containing content returned by the server.
            dataStream = response.GetResponseStream();
            // Open the stream using a StreamReader for easy access.
            StreamReader reader = new StreamReader(dataStream);
            // Read the content.
            string responseFromServer = reader.ReadToEnd();
            // Display the content.
            Console.WriteLine(responseFromServer);
            // Clean up the streams.
            reader.Close();
            dataStream.Close();
            response.Close();
        }
    }
} 
```

还有比使用`WebRequest`and更快的方法`WebResponse`吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T16:57:53.060

正在生成 404 错误，因为您尝试将 POST 数据发送到不允许它的服务（也不需要它）。将您的更改`webRequest()`为以下...

```
private void webRequest()
{
    // Create a request using a URL that can receive a post. 
    WebRequest request = WebRequest.Create(googleUrl);
    // Set the Method property of the request to POST^H^H^H^HGET.
    request.Method = "GET"; // <-- ** You're putting textToTranslate into the query string so there's no need to use POST. **

    //// Create POST data and convert it to a byte array.
    //string postData = textToTranslate;
    //byte[] byteArray = Encoding.UTF8.GetBytes(postData);

    // Set the ContentType property of the WebRequest.
    request.ContentType = "application/x-www-form-urlencoded";

    // ** Commenting out the bit that writes the post data to the request stream **

    //// Set the ContentLength property of the WebRequest.
    //request.ContentLength = byteArray.Length;
    //// Get the request stream.
    //Stream dataStream = request.GetRequestStream();
    //// Write the data to the request stream.
    //dataStream.Write(byteArray, 0, byteArray.Length);
    //// Close the Stream object.
    //dataStream.Close();

    // Get the response.
    WebResponse response = request.GetResponse();
    // Display the status.
    Console.WriteLine(((HttpWebResponse)response).StatusDescription);
    // Get the stream containing content returned by the server.
    Stream dataStream = response.GetResponseStream();
    // Open the stream using a StreamReader for easy access.
    StreamReader reader = new StreamReader(dataStream);
    // Read the content.
    string responseFromServer = reader.ReadToEnd();
    // Display the content.
    Console.WriteLine(responseFromServer);
    // Clean up the streams.
    reader.Close();
    dataStream.Close();
    response.Close();
} 
```

我没有在我的 Google API 帐户上启用结算功能；现在我收到一个 (403) Forbidden 错误，所以我无法验证这是一个完整的修复，但试一试。至少这可以解决 404 错误问题。

# mysql - 引用完整性到类似 rdf 的 mysql 表中？

> ID：10400560
> 
> 赞同：0
> 
> 时间：2012-05-01T16:08:28.343
> 
> 标签：mysql, referential-integrity

我怀疑这听起来像是一个愚蠢的问题，但是，在我老板的要求下，刚刚将一堆表单 (id, value, is_default) 的 identikit 查找表迁移到一个大型通用查找表 (id , type, value, is_default)，有没有一种很好的方法可以从现在引用这个的表中设置参照完整性？

一个建议是为新表中的每个“类型”设置一个视图，这当然意味着我将花费两周的大部分时间来追赶我的尾巴，以便回到我开始的地方。

我是否坚持这一点，或者是否有类似 "FOREIGN KEY (x_type_id) REFERENCES general_values (id) WHERE type="x" 之类的东西？或者更聪明的东西。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T16:23:01.097

> 有没有类似 "FOREIGN KEY (x_type_id) REFERENCES general_values (id) WHERE type="x" 的东西？

不，MySQL 中没有条件引用完整性。

我们无法进行有条件的参照完整性检查，但您可以通过编程方式检查是否。

编辑：

[这篇](https://stackoverflow.com/questions/2002985/mysql-conditional-foreign-key-constraints)文章在同一行讨论您想要实现的目标。

# java - 使用 JSP 的类文件而不是 JSP 本身来发布 WAR 是否更好？

> ID：10400561
> 
> 赞同：1
> 
> 时间：2012-05-01T16:08:29.003
> 
> 标签：java, jsp, jakarta-ee, deployment, architecture

如果我们可以使 Tomcat/Jasper 使用 ANT 任务编译 JSP，那么将 WAR 与预编译的 JSP 作为类文件而不是 JSP 本身一起发布不是更好吗？

这样，我们就不会被 Weblogic/Webshere JSP 编译问题所束缚。他们得到的只是“类”文件。

我认为这需要以某种方式关闭“jsp”servlet。并且必须启用 Spring/Struts Servlet 才能处理“jsp”扩展。

你怎么看？在其他生产环境中更常见的是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T16:16:23.697

JSP 的编译具有以下优点。

*   你确信它可以被编译，即在运行时没有意外。
*   当用户第一次到达 JSP 时，您可以节省一些时间。

我认为第一个优势很重要，第二个不是那么重要。我个人并不关心第一个也是唯一的第一个用户在编译 jsp 时是否会再等一两秒。但是我非常关心现在的用户在使用我的应用程序时永远不会出现编译错误。

我认为在构建期间编译 JSP 仅用于验证就足够了，而不是将生成`.class`的文件与您的应用程序一起打包。但是分发`.class`文件也很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T16:38:31.733

编译的 JSP 不能跨容器移植。它们扩展了运行时特定的类。您总是可以尝试嵌入您自己的 JSP 实现，但这是一个不同的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-01T16:18:25.010

我通常会说不，这不是更好。我认为通过它太麻烦了，然后将耳朵/战争包装起来并运输。

如果您的 JSP 没有在生产环境中编译，而是在本地编译或在 QA 中编译，那么您还有其他问题需要解决。

# ios - 在 MacOS / IOS SDK 上强制 SSLv3 连接

> ID：10400563
> 
> 赞同：0
> 
> 时间：2012-05-01T16:08:47.390
> 
> 标签：ios, macos, ssl

有没有办法强制和/或检查您的系统在 NSURLRequest 上协商的 SSL 版本？我整个上午都在想办法解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T16:15:37.107

不可以。您需要在您的流中下拉`CFNetwork`并设置该`kCFStreamSocketSecurityLevelSSLv3`属性。

# php - 将 ajax 响应从 windows-1255 转换为 UTF8

> ID：10400566
> 
> 赞同：2
> 
> 时间：2012-05-01T16:09:05.867
> 
> 标签：php, ajax, character-encoding

我使用 Ajax 调用来接收希伯来语的响应。结果来自不同的站点并进行了`windows-1255`编码。我的页面是`UTF-8`. 响应如下所示：

```
îéãò ìî÷áì  áæ÷ äçáøä äéùøàìéú  àéï 
```

我找到了这个网站： http: [//kanjidict.stc.cx/recode.php](http://kanjidict.stc.cx/recode.php) 使用 windows-1255 到 UTF-8（+标记最后一个复选框），结果很完美。问题是我如何在 PHP 上做到这一点？

我所做的一切都会导致垃圾。

```
$data = 'îéãò ìî÷áì  áæ÷ äçáøä äéùøàìéú àéï  ';
echo mb_detect_encoding($data); 
```

结果`UTF-8`（也许它真的是 UTF-8，因为我的 php 文件是 utf-8）

**我实际上需要这个结果：**

```
מידע למקבל  בזק החברה הישראלית אין 
```

如果我尝试 iconv：

```
echo iconv("WINDOWS-1255", "UTF-8", "îéãò ìî÷áì  áæ÷ äçáøä äéùøàìéú àéï  "); 
```

我明白了：

```
ֳ®ֳ©ֳ£ֳ² ֳ¬ֳ®ֳ·ֳ¡ֳ¬ ֳ¡ֳ¦ֳ· ֳ₪ֳ§ֳ¡ֳ¸ֳ₪ ֳ₪ֳ©ֳ¹ֳ¸ֳ ֳ¬ֳ©ֳ÷ ֳ ֳ©ֳ¯ 
```

到底是怎么回事？我怎样才能得到希伯来语结果？

谢谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T16:36:26.243

当您有一个包含此内容的文件时：

```
echo iconv("WINDOWS-1255", "UTF-8", "îéãò ìî÷áì  áæ÷ äçáøä äéùøàìéú àéï  "); 
```

保存文件本身的编码非常重要。PHP 的字符串不关心编码，它们只是作为字节数组工作。因此，如果您使用 UTF-8 编码保存此类文件，则该字符串当然会以 UTF-8 保存，并且 iconv 无法将其从 WIN1255 转换，因为它是 UTF-8。

我的建议是 1) 从服务器检索原始编码中的字符串 2) 将其保存到文件中 3) 使用该文件进行实验，因为这样您可以确定您只处理数据。一旦您尝试将其复制并粘贴到某处，您可能会更改事物的编码。

使用十六进制编辑器查看数据也不是一个坏主意，这样您就可以确定文件中存储的内容。

无论如何，您所说的尝试做的似乎是正确的：从服务器获取 WIN-1255 数据，然后在其上调用 iconv(...)，现在它是 UTF-8，将其输出到 HTML 页面（当然有一个`<meta>`表示它是 UTF-8 的）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T19:17:16.413

可能不需要重新编码。您可以简单地使用声明的 win-1255 编码提供相同的内容，并让浏览器处理它。

如果你想重新编码，你需要在服务器上这样做：

1.  从远程服务器获取字符串。
2.  确定字符串的编码（来自 http 标头或 html 标头）。
3.  如有必要，将编码转换为 utf-8。
4.  使用正确的 utf-8 编码声明向客户端返回新值。

您可能`Content-Type: text/html;charset=utf8`在第 4 步中遗漏了标题，这就是您`echo iconv(...)`看起来错误的原因。

这是一个示例函数，可以在常见情况下为您执行步骤 1-3：

```
function getUrlAsUtf8($url) {
    $s = file_get_contents($url);
    if ($s) {
        $contenttype = preg_grep('/content-type:(?:(?:\r\n)?[ \t]+)*+((?:(?:(?:\r\n)[ \t]+)|[ \t\x20-\x7e\x80-\xff])*)/i', $http_response_header);
        $inputcharset = null;
        foreach ($contenttype as $ct) {
            if (preg_match('/charset\s*=\s*(.*?)(?:$|;)/i', $ct, $matches)) {
                $inputcharset = strtolower($matches[1]);
            }
        }
        if ($inputcharset and $inputcharset!=='utf-8') {
            $s = mb_convert_encoding($s, 'utf-8', $inputcharset);
        }
    }
    return $s;
}

echo getUrlAsUtf8('http://example.org'); 
```

# vb.net - 在表单之间传递值（整数）？

> ID：10400567
> 
> 赞同：2
> 
> 时间：2012-05-01T16:09:06.797
> 
> 标签：vb.net, winforms

我的问题是我有两个表格，Form1 和 Form2 ...在 Form1 上有一个`TextBox`名为 txtTotal（这包含机票价格的计算，因此它是一个数值），在 Form2 上有一个`TextBox`名为 txtTotal2。我想要做的就是让出现在 Form1 上的 txtTotal 中的相同数字出现在 Form2 上的 txtTotal2 中

但是，每当我在网上尝试一些帮助提示时，例如使用将 txtTotal 声明为全局或朋友，它都不起作用，并且任何其他代码 iv 尝试尝试将文本框值作为字符串传递，这会带来错误。

任何帮助将不胜感激:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T16:11:47.840

Form2 应该具有需要传递的整数值的公共属性，或者在其构造函数中获取这些值，然后 form1 在创建 form2 时将设置这些值，然后显示表单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T18:29:36.350

![设计师快照](../Images/9f127383e5bedb4484cf307c84d68873.png)

表格1代码：

```
Public Class Form1
    Public x As String = "msg from form2"
    Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
        Form2.Show()
    End Sub

    Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
        Form2.TextBox1.Text = Me.TextBox1.Text
        TextBox2.Text = Form2.x
    End Sub
End Class 
```

表格2代码：

```
Public Class Form2
    Public x As String = "msg from form1"
    Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
        Form1.TextBox1.Text = Me.TextBox1.Text
        TextBox2.Text = Form1.x
    End Sub

End Class 
```

# apache-flex - Flex TabNavigator 选项卡按钮未触发 Click 事件

> ID：10400576
> 
> 赞同：0
> 
> 时间：2012-05-01T16:09:56.403
> 
> 标签：apache-flex, event-listener, tabnavigator

我有一个 TabNavigator，我正在尝试像 Firefox 一样工作，因为最后一个选项卡是一个特殊的“+”选项卡，它向控件添加了一个新选项卡。为此，我将一个事件处理程序添加到我使用的第一个选项卡按钮`tabNavigator.getTabAt(0).addEventListener(MouseEvent.CLICK, clickFunction, false, int.MAX_VALUE, false)`。我将优先级设置为，`int.MAX_VALUE`所以我的方法应该是第一个调用的方法，然后可以阻止其他处理程序使用`stopImmediatePropagation()`.

我的问题是我的点击处理程序不时被调用，而是正常逻辑运行并且“+”选项卡被切换到。

CustomTab 的代码（我删除了很多专有代码）：

```
private var addTab:Function = null;
private var tabCreationAllowed:Boolean = true;

private function onCreationCompleted():void {
    var tabButton:Button = getTab(0);
    Container(getChildAt(0)).setStyle("closable", false);
    tabButton.addEventListener(MouseEvent.CLICK, clickFunction, false, int.MAX_VALUE, false);
    tabButton.addEventListener(MouseEvent.DOUBLE_CLICK, function(event:MouseEvent):void {event.stopImmediatePropagation(); }, false, int.MAX_VALUE, false);
}

private function clickFunction(event:MouseEvent):void {
    event.stopImmediatePropagation();
    if (this.tabCreationAllowed && (this.addTab != null) && (event.eventPhase == EventPhase.AT_TARGET)) {
        this.tabCreationAllowed = false;
        this.addTab();
        var $this:CustomTab = this;
        setTimeout(function ():void {
            $this.tabCreationAllowed = true;
        }, 1500);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T14:22:31.847

在尝试了许多不同的事情之后，我能说的最好的问题是，`TabBar`用于`TabNavigator`创建选项卡按钮的用户可以切换哪个按钮做什么（甚至可能删除和添加），但仅限于添加或删除选项卡时。为了解决这个问题，我将“+”按钮存储在一个类变量中。然后我覆盖所有的添加和删除方法。在它们中的每一个上，我调用一个从按钮中删除所有事件侦听器的方法，如果有的话，将变量设置为最后一个选项卡的按钮（即“+”选项卡），然后重新添加侦听器。

最终代码的精简版：

```
private var addTab:Function = null;  
private var tabCreationAllowed:Boolean = true;  
private var addTabButton:Button = null;

private function prerAddTabButton():void {
    if (addTabButton != null) {
        addTabButton.removeEventListener(MouseEvent.CLICK, clickFunction);
        addTabButton.removeEventListener(MouseEvent.DOUBLE_CLICK, doubleClickFunction);
    }
    addTabButton = getTabAt(numChildren - 1);
    addTabButton.addEventListener(MouseEvent.CLICK, clickFunction, false, int.MAX_VALUE, false);  
    addTabButton.addEventListener(MouseEvent.DOUBLE_CLICK, doubleClickFunction, false, int.MAX_VALUE, false);  
}

private function onCreationCompleted():void {  
    var tabButton:Button = getTab(0);  
    Container(getChildAt(0)).setStyle("closable", false);
    prerAddTabButton();
}  

private function doubleClickFunction(event:MouseEvent):void {
    event.stopImmediatePropagation(); 
}

private function clickFunction(event:MouseEvent):void {  
    event.stopImmediatePropagation();  
    if (this.tabCreationAllowed && (this.addTab != null) && (event.eventPhase == EventPhase.AT_TARGET)) {  
        this.tabCreationAllowed = false;  
        this.addTab();  
        var $this:CustomTab = this;  
        setTimeout(function ():void {  
            $this.tabCreationAllowed = true;  
        }, 1500);  
    }  
} 
```

# c# - 300项查找表的数据存储方法（c#）

> ID：10400589
> 
> 赞同：3
> 
> 时间：2012-05-01T16:11:00.243
> 
> 标签：c#, web-config, encapsulation, appsettings, lookup-tables

我目前正在扩展一些利用查找表的现有代码。现在这个表大约有 25 个条目，无论好坏，键/值都存储在 web.conf 的 appsettings 部分。它们被读入字典并在整个应用程序中使用。

我会将查找表的大小增加到大约 300 个条目，这是该域的完整值集 - 因此它不太可能变得更大也不太可能频繁更改。我不确定将这些数据保存在 web.conf 中是否是个好主意。数据库不是此实现的选项，因此我正在寻找另一种存储此数据的方法。我的一些想法是：

*   静态字典？
*   XML 文件（或其他一些平面外部数据文件）
*   将它留在 web.conf 的 appsettings 部分？

我倾向于在一个包含操作数据集的方法的类中填充一个静态字典。任何建议、评论或愤怒的呼喊都将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-01T16:19:06.323

您可以将附加的键值对存储在通过 appSettings 元素引用的配置文件中 - 这使您的主配置文件保持整洁，并将附加配置存储在它自己的依赖配置文件中。

这在文章[MSDN - appSettings Element (General Settings Schema)](http://msdn.microsoft.com/en-us/library/ms228154%28v=vs.100%29.aspx)中有解释。

这实际上是您的第二项和第三项的组合。

出于维护原因，我不会将它放在代码内的静态字典中 - 配置文件也是此数据的更明显位置。通过利用内置的 .Net 功能，您也不会冒其他人忽略 Xml 文件的风险。

一个更具体的例子是（注意文件路径是相对于主应用程序的）：

**应用程序配置：**

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>   

   <appSettings file="mykeyvaluepairs.config"/>

</configuration> 
```

**mykeyvaluepairs.config**

```
<?xml version="1.0" encoding="utf-8" ?>
<appSettings>

  <add key="imaginativelynamedkey1" value="imaginativelynamedvalue1" />

</appSettings> 
```

请注意，在您的原始 app.config 中，也可以执行以下操作：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>   

   <appSettings file="mykeyvaluepairs.config">
       <add key="CanBeOverridenByItemInChildConfigFileWithSameName" value="UnicornsGoHere" />
   </appSettings>

</configuration> 
```

也就是说，除非您在 mykeyvaluepairs.config 文件中重新定义 appsettings，否则两者将并排存在 - 但 mykeyvaluepairs.config 中具有相同名称的项目将覆盖主配置中的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T16:21:19.333

如果您要求封装，最好的方法是公开一个接口，该接口将返回您想要的值，然后注入具体实现。多亏了这一点，您可以轻松地更改实现。

在实施时，如果数据永远不会更改或更改是为了下一个版本（基本上，如果只有开发人员可以进行更改）我会选择底层字典（并将其配置为 DI 容器中的单例）。更重要的是，我会将键保留为枚举值，以提供额外的类型安全性。恕我直言，如果管理员或业务用户无法配置某些内容，则将其保留在外部配置中只会增加不必要的复杂性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T16:44:53.147

这是给您的 XML 文件示例。您可以像这样利用它：

```
string value = MyConfig.Items[key]; 
```

要为其添加新值：

```
MyConfig.Write(file => file.Add("newKey", "newValue")); 
```

班上：

```
public class MyConfig : IDisposable
{
    string file = "path to file";  // probably in App_Data if this is asp.net
    XElement self;

    public MyConfig()
    {
        if(File.Exists(file))
            self = XElement.Load(file);
        else
            self = new XElement("root");
    }

    public void Add(string key, string value)
    {
        if (!Items.ContainsKey(key))
        {
            self.Add(new XElement("pair",
                new XAttribute("Key", key),
                new XAttribute("Value", value)));
            _Items = null;
        }
    }

    public void Dispose()
    {
        self.Save(file);
    }

    public static Dictionary<string, string> Items
    {
        get
        {
            if (null == _Items)
            {
                _Items = Read.self.Elements().ToDictionary(
                    x => x.Attribute("Key").Value,
                    x => x.Attribute("Value").Value);
            }
            return _Items;
        }
    }
    static Dictionary<string, string> _Items;

    public static MyConfig Read { get { return new MyConfig(); } }
    public static void Write(Action<MyConfig> action)
    {
        using (MyConfig config = new MyConfig())
            action(config);
    }
} 
```

由于网站是多线程的，因此您可能希望在分配/读取 _Items 变量时锁定它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-03T13:10:08.543

`Dictionary`是处理代码中的键/值信息的好选择。最好保持配置文件简洁明了，因此不要将所有 300 个键和值都放在那里。您可以使用 XML 序列化在单独的 XML 文件中轻松存储（和加载）大量或大量自定义设置。看起来很适合你的情况。

使用此示例代码将数据保存到 XML 或从 XML 加载数据。

```
public class KeyValue
{
    public string Key;
    public string Value;
}

static void Save()
{
    // some test data
    Dictionary<string, string> dict = new Dictionary<string, string>();
    dict.Add("key1", "value1");
    dict.Add("key2", "value2");
    dict.Add("key3", "value3");
    dict.Add("key4", "value4");

    // convert to List
    List<KeyValue> list1 = (from itm in dict
                            select new KeyValue
                                       {
                                           Key = itm.Key, Value = itm.Value
                                       }).ToList();

    // serialize
    using (StreamWriter sw = new StreamWriter("C:\\temp\\config.xml"))
    {
        XmlSerializer xs = new XmlSerializer(typeof (List<KeyValue>));
        xs.Serialize(sw, list1);
        sw.Close();
    }
}

static void Load()
{
    // deserialize
    using (StreamReader sr = new StreamReader("c:\\temp\\config.xml"))
    {
        XmlSerializer xs = new XmlSerializer(typeof (List<KeyValue>));
        List<KeyValue> list2 = (List<KeyValue>) xs.Deserialize(sr);
        sr.Close();
    }

    // convert to Dictionary
    Dictionary<string, string> dict2 = list2.ToDictionary(x => x.Key, x => x.Value);
} 
```

*注意：您需要`KeyValue`帮助类，因为其结果`dict.ToList()`没有`List<KeyValuePair<string,string>>`正确序列化。*

# infragistics - 垂直对齐功能区上的 Infragistics TextBoxControl 编辑区域？

> ID：10400592
> 
> 赞同：1
> 
> 时间：2012-05-01T16:11:16.277
> 
> 标签：infragistics, ribbon-control

我有一个带有 3 个 TextBoxTools 的功能区（UltraWinToolbar），在一个垂直排列的组中，有点像：

```
| Short Caption: [xxxxxxxxxxxxxxxxxxxxxx] |
| Very Long Caption Indeed: [xxxxxxxxxxx] |
| Tiny: [xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx] | 
```

但我希望它看起来像这样：

```
| Short Caption:            [xxxxxxxxxxx] |
| Very Long Caption Indeed: [xxxxxxxxxxx] |
| Tiny:                     [xxxxxxxxxxx] | 
```

如何控制编辑区域的宽度？使用 2010.3

**更新** 这似乎是将 SharedProps.Width 设置为定义值的结果，在我的情况下为 100。将其设置为 -1 使控件对齐，但编辑区域现在有点小。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T14:01:46.133

这可以使用创建过滤器来完成。请参阅 Infragistics 网站上的以下主题以获取更多详细信息以及演示如何实现它的示例应用程序：

[http://forums.infragistics.com/forums/p/68686/347701.aspx](http://forums.infragistics.com/forums/p/68686/347701.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T15:48:39.433

我没有一个好的答案，所以如果有人有更好的方法，请告诉我们。

*   右键 - 单击组件​​窗格中的 UltraToolBarsManager 并激活 In Place Designer 选项
*   单击放置在功能区内的工具
*   在工具的右边框上移动鼠标（鼠标图标变为分隔符）
*   向右拖动可展开文本工具的编辑部分（并缩小标签空间）
*   拖动leftware减少文本工具的编辑部分（并增加标签空间）

将鼠标放在文本工具的左边框但反转拖动可以实现相同的效果（向左增加编辑空间，向右增加标签空间）

# jquery - 设置为在 MVC3 / Razor 应用程序中使用 jQuery

> ID：10400595
> 
> 赞同：0
> 
> 时间：2012-05-01T16:11:24.597
> 
> 标签：jquery, asp.net-mvc-3, razor

大家好。

我正在使用一个简单的 MVC 3 .net 应用程序并试图弄清楚为什么我不能让 jQuery 工作。

开发环境：Visual Studio 2010、MVC3 Razor

我在 _layout.cshtml 的部分中放置了以下内容：

```
<link href="@Url.Content("~/Content/Site.css")" rel="stylesheet" type="text/css" />
<link href="@Url.Content("~/Content/themes/base/jquery-ui.css")" rel="Stylesheet" type="text/css" />

    <script src="@Url.Content("~/Scripts/modernizr-1.7.min.js")" type="text/javascript"></script>
    <link href="@Url.Content("~/Content/themes/base/jquery.ui.core.css")" rel="stylesheet" type="text/css" />     
    <link href="@Url.Content("~/Content/themes/base/jquery.ui.datepicker.css")" rel="Stylesheet" type="text/css" />
    <link href="@Url.Content("~/Content/themes/base/jquery.ui.theme.css")" rel="Stylesheet" type="text/css" />   

     @Script("jquery-1.7.2.min.js")
     @Script("jquery-ui.1.8.11.min.js")
     @Script("jquery.ui.core.js")
     @Script("GHRIInventory.js") 
```

@Script 是一个自定义助手：

@helper 脚本（字符串脚本名称）{ }

GHRIInventory.js 是一个包含我的代码的外部 .js 文件，它位于我的 Scripts 目录中：

```
/// <reference path="jquery-1.5.1.js" />
/// <reference path="jquery-ui-1.8.11.js" />
/// <reference path="jquery-1.5.1-vsdoc.js" />
/// <reference path="jquery.ui.autocomplete.js" />

$(document).ready(function () {

      $(".button").click(function () {
        $(this).attr("value", "please wait..");
    });
}); 
```

在我看来，我放置了以下内容：

这不是一个复杂的脚本，我只是用它来证明 jQuery 设置正确。应该做的是，当我单击按钮时，按钮文本从“我的按钮”变为“请稍候..”。当我运行应用程序，我看到了按钮，但是当我单击它时没有任何反应。

我觉得我拥有所有必要的元素，但它仍然有效：1) 将 jQuery 添加到 _layout.cshtml 2) 将我的自定义 .js 添加到 _layout.cshtml 以便我的所有视图都可以使用它。3) 在脚本文件夹中创建、编码和放置自定义 .js 3) 将 HTML 元素添加到视图

这是我运行应用程序时源代码的样子：

<

```
head>
    <meta charset="utf-8" />
    <title>Create</title>

    <link href="/Content/Site.css" rel="stylesheet" type="text/css" />
    <link href="/Content/themes/base/jquery-ui.css" rel="Stylesheet" type="text/css" />

    <script src="/Scripts/modernizr-1.7.min.js" type="text/javascript"></script>
    <link href="/Content/themes/base/jquery.ui.core.css" rel="stylesheet" type="text/css" />     
    <link href="/Content/themes/base/jquery.ui.datepicker.css" rel="Stylesheet" type="text/css" />
    <link href="/Content/themes/base/jquery.ui.theme.css" rel="Stylesheet" type="text/css" />   

          <script src="/Scripts/jquery-1.7.2.min.js" type="text/javascript"></script>   

          <script src="/Scripts/jquery-ui.1.8.11.min.js" type="text/javascript"></script>   

          <script src="/Scripts/jquery.ui.core.js" type="text/javascript"></script>   

     <script src="/Scripts/jquery.ui.core.min.js" type="text/javascript"></script>
          <script src="/Scripts/GHRIInventory.js" type="text/javascript"></script>   

     <script src="../../Scripts/jquery.ui.datepicker.min.js" type="text/javascript"></script>
    <script src="../../Scripts/DatePickerReady.js" type="text/javascript"></script>

</head>

<body>

<input id="button_click" type="button" value="my button" />

</body> 
```

非常欢迎任何故障排除建议...谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T09:38:02.537

```
 you are selecting by class name i.e. $(".button") and no class is assigned. either you should select by control type i.e. $("button") or by id i.e. $("#button_click"). 
```

以及确认您的脚本文件是否放置在与输出源中所写相同的路径上

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T16:22:59.260

看起来你的选择器是错误的；您正在选择所有带有“按钮”类的对象 - 我认为您需要类似 $('input[type="button"]) 或 $('#button_click') 来按 id 选择

# ruby-on-rails - 传递 hidden_ field ids 成为错误

> ID：10400599
> 
> 赞同：0
> 
> 时间：2012-05-01T16:11:38.310
> 
> 标签：ruby-on-rails, hidden-field

我现在有这个

```
<% form_tag add_expt_details_samples_path :method => :post do %>
    <% for sample in @samples %>
        <% fields_for "samples[]", sample do |form| %>
            <fieldset>
                <legend>Sample Name: <%= sample.name %></legend>
                <p><center><%= form.label :sample_title %>
                <%= form.text_field :sample_title, :size => 25 %></center></p>
                <table>
                    <tr>
                        <td>
                            <%= form.label :taxon_id %>
                            <%= form.text_field :taxon_id, :size => 15 %>
                        </td>
                        <td>
                            <%= form.label :scientific_name %>
                            <%= form.text_field :scientific_name, :size => 20 %>
                        </td>
                        <td>
                            <%= form.label :common_name %>
                            <%= form.text_field :common_name, :size => 15 %>
                        </td>
                    </tr>
                </table>
                <p>
                    <center>
                        <%= form.label :sample_descripition %><br \>
                        <%= form.text_area :description %>
                    </center>
                </p>
            </fieldset>
        <% end %>
        <%= hidden_field_tag "sample_ids[]", sample.id %>
    <% end %>
    <p><center><%= submit_tag "Next" %></center></p>    
<% end %> 
```

我想将样本的 hidden_​​field id (sample_ids[]) 发送到控制器方法以添加新的模型详细信息，但需要 sample[] 来更新我的样本记录。

我只能做这两种方式之一。

请有人建议我的方式。

干杯

# windows - 需要通过 GSSAPI 为 svn/svnserve 身份验证确定正确的 SPN 以赢得 2008 AD

> ID：10400606
> 
> 赞同：2
> 
> 时间：2012-05-01T16:11:56.983
> 
> 标签：windows, svn, kerberos, sasl, gssapi

我正在通过 SVNSERVE 设置基于 Windows 的 Subversion 设置，在该设置下，用户通过 SASL 和 GSSAPI 对 Active Directory 进行身份验证。我知道一些供应商提供预打包的 Subversion 安装，并提供开箱即用的集成 AD 支持，但在我的情况下，这些不是一个选项。

我在 Windows 上使用 Subversion 1.7.4，在 Windows 上使用 MIT Kerberos V5 (3.2.2)，并将从 Win64 机器上的 Tortoise SVN 客户端访问存储库。SVNSERVE 在域帐户下作为系统服务运行。

对于我的存储库服务器，我相信我已经准备好所有基本部分（svn、Kerberos，SVNSERVE 推迟到 SASL 身份验证，然后配置为使用 GSSAPI 作为机制）。我现在到了尝试查询存储库会导致“无法协商身份验证机制”的地步，这是我目前所*期望*的，因为我还没有定义存储库主机查询 Kerberos 的 SPN。网络捕获告诉我 spn "svn/*FQDN_of_host_omitted* 不是公认的 SPN，这正是我在这一点上所期望的......

所以，虽然我知道我需要一个 SPN，但我需要一些指导来获得*正确的*SPN 集，因为我不能在这个测试环境中自己做（必须请求，所以我想确保我请求正确的组合）。我的信念是我需要下面列出的 SPN，但如果有人能证实我的方向正确，我将不胜感激。我很困惑是否需要 SPN 纯粹用于针对主机的 svn 服务，或通过指定帐户针对主机的 svn 服务，或*两者兼而有之*。

所以，我相信我可能需要以下一项或全部。哪一个（如果有的话）是对的/错的？：

```
#1 SPN for svn service on non-FQDN of host machine:
setspn -F -A svn/*nonFQDN_of_host* *nonFQDN_of_host*

#2 SPN for svn service on FQDN of host machine:
setspn -F -A svn/*FQDN_of_host* *FQDN_of_host*

#3 SPN for svn service from non-FQDN of host through service account:
setspn -F -A svn/*nonFQDN_of_host* *domain\svnhostaccount*

#4 SPN for svn service from FQDN of host through service account:
setspn -F -A svn/*FQDN_of_host* *domain\svnhostacccount* 
```

提前感谢您的帮助，希望这个问题表面上不会太愚蠢:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-02-07T22:24:44.913

我正在翻阅旧问题，偶然发现了这个问题。因为我从 2016 年 10 月才成为会员，所以回答晚了。这个问题的答案如下。注意：使用`setspn -S`代替`setspn -A`，原因是“-S”开关会查找重复项，而较旧的“-A”开关不会。此外，在设置新的 SPN 时，通常首选将 SPN 绑定到服务帐户，而不是主机帐户，因为这样可以让您在希望通过负载平衡器发送流量时具有更大的灵活性；流量可以路由到预先确定的可用机器池中的任何主机。而绑定到主机的 SPN 只能在指定的主机上工作。话虽如此，当您提出问题时，您可能希望如下运行 setspn 命令：

**#1** SPN 用于主机非 FQDN 上的 svn 服务：

```
setspn -F -S svn/*nonFQDN_of_host* *nonFQDN_of_host* 
```

**#2** SPN 用于主机 FQDN 上的 svn 服务：

```
setspn -F -S svn/*FQDN_of_host* *FQDN_of_host* 
```

**#3**通过服务帐户从主机的非 FQDN 获取 svn 服务的 SPN：

```
setspn -F -S svn/*nonFQDN_of_host* *svnhostaccount* 
```

**#4**通过服务帐户从主机的 FQDN 获取 svn 服务的 SPN：

```
setspn -F -S svn/*FQDN_of_host* *svnhostacccount* 
```

# ruby-on-rails-3 - 编辑对象时simple_form input_html没有抓取日期

> ID：10400607
> 
> 赞同：0
> 
> 时间：2012-05-01T16:12:01.820
> 
> 标签：ruby-on-rails-3, date, activerecord, simple-form

我已经为锻炼计划程序设置了一个表格。我使用 show_date 以用户友好的方式格式化日期，并使用实际日期字段来存储对 Rails 友好的日期。当我查看页面时，我在 show_date 字段中看不到任何内容，尽管 date 仍然按预期工作。

```
#workout.rb
class Workout < ActiveRecord::Base
  validates_presence_of :name
  validates_presence_of :show_date
  validates_presence_of :time

  attr_accessor :show_date
end

#_form.html.erb
<%= simple_form_for @workout, :html => { :class => 'form-horizontal' } do |f| %>
  <%= f.input :name %>
  <%= f.input :date, :as => :hidden%>
  <%= f.input :show_date, :as => :date_picker, :label => 'Date', :input_html => { :value => @workout.date } %>
    <%= f.input :time, :minute_step => 15 %>
    <div class="form-actions">
    <%= f.button :submit, :class => 'btn-primary' %>
    <%= link_to t('.cancel', :default => t("helpers.links.cancel")),
                workouts_path, :class => 'btn' %>
  </div>
<% end %>

#date_picker_input.rb
class DatePickerInput < SimpleForm::Inputs::Base
  def input
    @builder.text_field(attribute_name, :class => 'date_picker')
  end    
end

#datepicker.js
$("input.date_picker").datepicker(
    {
        dateFormat: "mm/dd/yy",
        altField: "#workout_date",
        altFormat: "dd/mm/yy"
    }
); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T16:36:01.980

我把它放在这里而不是在评论中，以便其他人更容易看到。

您已经在日期字段中拥有日期对象，您所需要的只是更改它呈现给用户的方式，并且您应该使用一种方法来做到这一点。

我会将 show_date 更改为使用 strftime 正确格式化查看日期的方法。date.strftime("%m/%d/%Y") 会给你一个格式化为月/日/全年的字符串，即“05/01/2012”。 [http://www.ruby-doc.org/core-1.9.3/Time.html#method-i-strftime](http://www.ruby-doc.org/core-1.9.3/Time.html#method-i-strftime)有不同格式字符串的文档。

```
def show_date
  date.strftime("%m/%d/%Y")
end 
```

# r - R 中的 sort() 和 sort.list() 有什么区别？

> ID：10400611
> 
> 赞同：10
> 
> 时间：2012-05-01T15:53:17.493
> 
> 标签：r

好吧，在决定了解 R 中的一些基本功能后，我偶然发现了该`sort.list()`功能。我得到了非常直接的`sort()`功能，但不明白`sort.list()`. 我读过它应该是一个排列函数，重新排列我的向量的内容（以某种方式）。

有向量；

```
x <- c(5.0, 3.0, 2.0, 2.2, 0.0, 5.0, 3.0, 2.0, 2.2) 
```

运行`sort.list(x)`输出

```
[1] 5 3 8 4 9 2 7 1 6 
```

那个是从哪里来的？有人可以给我一个提示吗？无论如何，这种排列有什么用？

谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-01T16:01:56.047

`sort.list`，正如它在 处所说`?sort.list`，与 相同`order`，只是它不接受多个参数`...`，而是只接受一个原子向量作为参数。

那么，据推测，它可能旨在作为`order`.

它有什么好处？考虑一下：

```
x <- c(5.0, 3.0, 2.0, 2.2, 0.0, 5.0, 3.0, 2.0, 2.2)
> x[sort.list(x)]
[1] 0.0 2.0 2.0 2.2 2.2 3.0 3.0 5.0 5.0
> x[order(x)]
[1] 0.0 2.0 2.0 2.2 2.2 3.0 3.0 5.0 5.0 
```

就像`order`它返回一个排列一样，当用于索引原始向量时对其进行排序。

但我也认为这个名字令人困惑。

# php - 插入记录时查找唯一字段 id

> ID：10400613
> 
> 赞同：0
> 
> 时间：2012-05-01T16:12:21.133
> 
> 标签：php, mysql, unique, unique-key

有没有办法在不复制记录的情况下将记录插入唯一字段。如果记录存在，我需要使用记录 ID 在另一个表中进行引用。我正在使用 php 和 mySql。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T16:18:39.397

例如，在 phpmyadmin 中添加一个类型为“INT”的名为“id”的列，并将其设置为“主键”和“自动增量”。

这样，您将拥有一个从 1 开始并为表中的每条新记录计数的唯一字段，然后您可以在其他表中引用它的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T16:33:01.853

使用[`INSERT ... ON DUPLICATE KEY UPDATE`](http://dev.mysql.com/doc/refman/5.1/en/insert-on-duplicate.html)：

> 如果表包含一`AUTO_INCREMENT`列并[`INSERT ... ON DUPLICATE KEY UPDATE`](http://dev.mysql.com/doc/refman/5.1/en/insert-on-duplicate.html)插入或更新一行，则该[`LAST_INSERT_ID()`](http://dev.mysql.com/doc/refman/5.1/en/information-functions.html#function_last-insert-id)函数返回该`AUTO_INCREMENT`值。例外：对于更新，[`LAST_INSERT_ID()`](http://dev.mysql.com/doc/refman/5.1/en/information-functions.html#function_last-insert-id)在 MySQL 5.1.12 之前没有意义。但是，您可以使用[`LAST_INSERT_ID(expr)`](http://dev.mysql.com/doc/refman/5.1/en/information-functions.html#function_last-insert-id). 假设那`id`是`AUTO_INCREMENT`列。要使[`LAST_INSERT_ID()`](http://dev.mysql.com/doc/refman/5.1/en/information-functions.html#function_last-insert-id)更新有意义，请按如下方式插入行：
> 
> ```
> INSERT INTO table (a,b,c) VALUES (1,2,3)
>   ON DUPLICATE KEY UPDATE id=LAST_INSERT_ID(id), c=3; 
> ```

# perl - 使用 perl 在多个文件中进行搜索和替换时保持时间戳

> ID：10400616
> 
> 赞同：2
> 
> 时间：2012-05-01T16:12:33.097
> 
> 标签：perl, file

我经常用

```
perl -pi -w -e 's/search/replace/g;' [filelist] 
```

在 [filelist] 的所有文件中用“replace”替换每个出现的“search”。不幸的是，所有文件似乎都获得了更新的时间戳。即使“搜索”没有出现在文件中。我可以改变这是一个简单的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T16:22:40.103

不容易，不。所发生的一切是 perl 正在用通过正则表达式的结果覆盖文件。

您可以使用更长的程序来做到这一点，但没有简单的标志可以阻止这种行为。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-01T19:34:00.097

`-i`松散地：

```
rename($ARGV, "$ARGV$^I") or die $! if length $^I;
open(*ARGV, '<', "$ARGV$^I") or die $!;
open(*STDOUT, '>', $ARGV) or die $!; 
```

如您所见，它总是立即替换现有文件。这就是所有打印件 ( `-p`) 发送其输出的地方。

两种选择：

1.  使用临时文件。

    ```
    perl -e'
       $temp_qfn = "temp";
       open(my $fh_out, ">", $temp_qfn) or die $!;
       my $save;
       while (<>) {
          $save = 1 if s/search/replace/g;
          print($fh_out $_);
       } continue {
          if (eof) {  # Not eof()!
             close($fh_out);
             rename($temp_qfn, $ARGV) if $save;
             $save = 0;
             open(my $fh_out, ">", $temp_qfn) or die $!;
          }
       }

       close($fh_out);
       unlink($temp_qfn);
    ' file ... 
    ```

2.  将整个文件加载到内存中。

    ```
    perl -0777ne'
       if (s/search/replace/g) {
          open(my $fh_out, ">", $ARGV) or die $!;
          print($fh_out $_);
       }
    ' file ... 
    ```

（以上两者都有各种可解决的错误处理问题。`-i`有一些相同的问题。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-01T16:21:14.607

从[perldoc perlrun](http://perldoc.perl.org/perlrun.html)：

> `-i[*extension*]`
> 
> 指定由“ `<>`”构造处理的文件将被就地编辑。它通过重命名输入文件、按原始名称打开输出文件并选择该输出文件作为`print()`语句的默认文件来完成此操作。扩展名（如果提供）用于修改旧文件的名称以制作备份副本，遵循以下规则：
> 
> **如果未提供扩展名，则不进行备份并覆盖当前文件。**

强调我的。

为了解决这个问题，您需要编写一个程序，为 中的每个文件打开一个临时文件`@ARGV`，从原始文件中读取，进行替换，将行写入临时文件，并跟踪是否有任何替换更改了原线。当到达文件末尾时，如果任何`s///`调用导致更改，它会将临​​时文件重命名为原始文件。[eof](http://perldoc.perl.org/functions/eof.html)对此以及[File::Temp](http://perldoc.perl.org/File/Temp.html)模块都很有用。

# c# - 装饰器模式 - 从装饰器访问包装对象中的值

> ID：10400619
> 
> 赞同：5
> 
> 时间：2012-05-01T16:12:50.663
> 
> 标签：c#, design-patterns, decorator

我对装饰器模式有疑问

可以说我有这个代码

```
interface IThingy 
{
    void Execute(); 
}

internal class Thing : IThingy
{
    public readonly string CanSeeThisValue;

    public Thing(string canSeeThisValue)
    {
        CanSeeThisValue = canSeeThisValue;
    }

    public void Execute()
    {
        throw new System.NotImplementedException();
    } 
}

class Aaa : IThingy 
{
    private readonly IThingy thingy;

    public Aaa(IThingy thingy)
    {
        this.thingy = thingy;
    }

    public void Execute()
    {
        throw new System.NotImplementedException();
    } 
}

class Bbb : IThingy {
    private readonly IThingy thingy;

    public Bbb(IThingy thingy)
    {
        this.thingy = thingy;
    }

    public void Execute()
    {
        throw new System.NotImplementedException();
    } 
}

class Runit {
    void Main()
    {
        Aaa a = new Aaa(new Bbb(new Thing("Can this be accessed in decorators?")));
    } 
} 
```

我们有一个名为 thing 的类，它由两个装饰器 Aaa 和 Bbb 包装

如何最好地从 Aaa 或 Bbb 访问字符串值“CanSeeThisValue”（在 Thing 中）

我试图为它们所有人创建一个基类，但是当然，虽然它们共享相同的基类，但它们并不共享相同的基类实例

我是否需要将值传递给每个构造函数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T16:23:06.973

装饰器将功能添加到它们正在包装的项目的公共接口中。如果您希望您的装饰器访问`Thing`不属于的成员`IThingy`，那么您应该考虑装饰器是否应该换`Thing`行而不是`IThingy`.

或者，如果所有人都`IThingy`应该有一个`CanSeeThisValue`属性，那么将该属性也作为`IThingy`接口添加（并实现）为属性的一部分。

```
interface IThingy 
{
    string CanSeeThisValue { get; }

    void Execute(); 
} 
```

这`Thing`看起来像：

```
internal class Thing : IThingy
{
    public string CanSeeThisValue { get; private set; }

    public Thing(string canSeeThisValue)
    {
        CanSeeThisValue = canSeeThisValue;
    }

    ...

} 
```

# jquery - Drupal 7：jQuery 根本不起作用

> ID：10400620
> 
> 赞同：1
> 
> 时间：2012-05-01T16:12:57.483
> 
> 标签：jquery, drupal-7

我正在为 Drupal 7 编写一个模块，它有 3 个子模块。所有子模块都有自己的模块、样式和 js 文件。在每个子模块的 init 函数中，我包含模块使用的所有 javascript 文件：

```
 drupal_add_js(path); 
```

除了 jQuery，一切都很好。我尝试了不同的方法：

```
 (function ($) {
     alert("1");    
  })(jQuery);

  alert(jQuery('div'));
  alert($('div')); 
```

什么也没发生。试图在我的模块文件中使用 jQuery 作为内联函数：

```
 drupal_add_js("(function ($) {alert('1');})(jQuery)","inline"); 
```

它也不起作用。

一周前一切正常，甚至是基于 jQuery 的弹出菜单和 ajax。但后来我重写了 php 函数，添加了功能并优化了查询（我没有修改正常工作的 js 文件）。也许我也更改了一些服务器配置文件（我使用丹佛并在 localhost 上运行项目）。

直到现在我才意识到我的 jQuery 不起作用，我已经测试了所有内容，已经花了 2 天时间寻找答案。我知道我犯了一些愚蠢而简单的错误，但我找不到它在哪里。也许有人已经有这样的问题，请帮忙。

PS：这是我的第一篇文章，请不要太苛刻地评价我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T09:20:10.337

我会禁用 js 聚合（如果启用），然后检查源代码以查看这些 JS 文件的路径是否正确。如果是这样，我会在你的 js 周围使用 Drupal.behaviours，如此处所述[http://drupal.org/node/756722#behaviors](http://drupal.org/node/756722#behaviors)如果这不起作用，我会检查是否有 js 错误出现在某处。

# android - 通过 Android 中的活动传递整数和字符串？

> ID：10400621
> 
> 赞同：1
> 
> 时间：2012-05-01T16:12:58.040
> 
> 标签：android

如何在另一个中使用来自 ione Activity 的整数和字符串？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-01T16:16:11.257

直接在意图中设置值会容易得多

Intent 支持**putExtra (Name, Value)**；

```
 Intent intent = new Intent(Search.this, SearchResults.class);  
        EditText txt1 = (EditText) findViewById(R.id.edittext);
        EditText txt2 = (EditText) findViewById(R.id.edittext2);

        intent.putExtra("name", txt1.getText().toString());
        intent.putExtra("state", Integer.parseInt(txt2.getText().toString()));  

        startActivity(intent);  

....

      getIntent().getStringExtra("name"); 
      getIntent().getIntExtra("state", 0); // default 
```

[http://developer.android.com/reference/android/content/Intent.html#putExtra%28java.lang.String,%20android.os.Bundle%29](http://developer.android.com/reference/android/content/Intent.html#putExtra%28java.lang.String,%20android.os.Bundle%29)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-01T16:13:46.667

在活动 1 中：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.search);

    Button search = (Button) findViewById(R.id.btnSearch);
    search.setOnClickListener(new View.OnClickListener() {
        public void onClick(View view) {

            Intent intent = new Intent(Search.this, SearchResults.class);  
            Bundle b = new Bundle(); 

            EditText txt1 = (EditText) findViewById(R.id.edittext);
            EditText txt2 = (EditText) findViewById(R.id.edittext2);

            b.putString("name", txt1.getText().toString());
            b.putInt("state", Integer.parseInt(txt2.getText().toString()));  

            //Add the set of extended data to the intent and start it
            intent.putExtras(b);
            startActivity(intent);  
        }

    });
} 
```

在接收活动中：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.search_results);

    Bundle b = getIntent().getExtras(); 
    int value = b.getInt("state", 0);
    String name = b.getString("name");

    TextView vw1 = (TextView) findViewById(R.id.txtName);
    TextView vw2 = (TextView) findViewById(R.id.txtState);

    vw1.setText("Name: " + name);
    vw2.setText("State: " + String.valueOf(value));
} 
```

但是下一次在发布这样一个基本问题之前搜索 SO。那里有很多类似的问题。

# php - Is there a content management system that fits these requirements or am I stuck rolling my own?

> ID：10400624
> 
> 赞同：2
> 
> 时间：2012-05-01T16:13:05.983
> 
> 标签：php, frameworks

I'm looking for some advice.

My boss is writing a series of lengthy articles. He wants to publish these articles on the web, but is reluctant to use anything other than MS Word for writing. However, he wants the web version of the article to include a lot of custom Javascript content (tooltips, links that pop up modal windows, and the like.) He also wants to be able to modify the articles after they've been published, to add new content, quotations, and the like.

So far, I've been able to convert one of his articles to html using Word, clean up Word's rotten HTML (using jQuery to filter or convert

tags to tags, for example, or remove useless s), add the custom Javascript, and upload the whole thing to the server.

This works, but is very time-consuming, and leaves the paper in a state that is difficult for him to edit. It tends to fall to me to integrate the changes he makes into the HTML version of the article.

Ideally, what I would like is a CMS with the following features:

*   The ability to create a document from a .doc or .docx file (not necessary, but would be great.)
*   An easy to use WYSIWYG interface for editing, so he can edit the content of articles himself.
*   The ability to easily throw in custom JavaScript, or even custom PHP code, to add the modals, and other functionality my boss likes.
*   The ability to export documents back into .doc or .docx, or at least pdf format.

Oh, and it would be nice if the CMS could handle things like footnotes/endnotes, because there are a ton of them.

I've looked into [Silva](http://infrae.com/products/silva) and [Textpattern](http://textpattern.com/) so far. Textpattern uses Textile, which I think I can get my boss to use if necessary. Silva seemed very complicated, and perhaps overkill for what I am doing.

I COULD roll my own solution in PHP, using a framework like Yii, but this was only supposed to be a side-project and I would rather use something pre-made.

Does anyone have any recommendations? It doesn't have to be open-source. I think my employer would be willing to pay for a product if it could do all the things I mentioned. Thanks!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T16:17:09.630

Sounds like a good choice could be Wordpress. The way you've described it is really just getting content published that will be editable.

Wordpress also allows you to create custom themes or modify them. This would allow you to add the custom javascript or php that you desired. There are also a large selection of plugins that are easy to install and use.

Take a look at the features at [http://wordpress.org](http://wordpress.org).

UPDATE:

Two other choices you could look at are joomla and drupal. Both of them are content management systems.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T16:26:26.810

Try convincing your boss to write the documents directly into a web-based wysiwyg system like [http://wikiwig.sourceforge.net/](http://wikiwig.sourceforge.net/). There is no point into duplicating all that content and the additional effort put into all that.

# eclipse-rcp - 如何替换 MethodDeclaration 中的 Javadoc？

> ID：10400628
> 
> 赞同：1
> 
> 时间：2012-05-01T16:13:25.937
> 
> 标签：eclipse-rcp, abstract-syntax-tree

我们知道，从 MethodDeclaration`m`中，我们可以得到`Javadoc d = m.getJavadoc();`. 现在我构建了一个新的 Javadoc，所以我想替换旧的

```
public void replaceJavadoc(ICompilationUnit unit,Javadoc newDoc) {
  // can't use m.setJavadoc(newDoc) although it indeed have this method
} 
```

很容易`MethodDeclaration`从`ICompilationUnit`. 我们也可以得到`CompilationUnit`, `ASTRewrite`，但我不知道如何实现这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T10:05:02.517

我在网上找到了这个答案，它可能会给你一个帮助你的想法：

```
AST ast = cu.getAST();
cu.recordModifications();
Javadoc jc = ast.newJavadoc();
TagElement tag = ast.newTagElement();
TextElement te = ast.newTextElement();
tag.fragments().add(te);
te.setText("ici il faut insérer le commentaire aproprier ");
jc.tags().add(tag);
tag = ast.newTagElement();
tag.setTagName(TagElement.TAG_AUTHOR);
tag.fragments().add(ast.newSimpleName("ici il faut chercher le nom de l'auteur"));
jc.tags().add(tag); 
```

它是创建 au java doc。我也在寻找同样的东西。我想在自动生成的 Java 源代码中添加评论和 Java 文档，请问您有 idé 吗？如果您愿意，我们将更改电子邮件，以获得更快的速度祝您好运

# javascript - 按 id 删除骨干模型？

> ID：10400630
> 
> 赞同：22
> 
> 时间：2012-05-01T16:13:29.157
> 
> 标签：javascript, backbone.js

您可以通过 id 删除模型吗？文档说您需要传入模型本身才能将其删除。

所以我需要先获取模型然后删除它？我不能只通过 id 删除它吗？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-05-01T16:22:15.480

你的意思是从集合中删除模型？查看文档，您似乎确实需要传入一个真实的模型，但源代码建议您也可以传入模型`id`或模型`cid`，并且以上所有内容都应该有效（以及数组以上所有）。

所以以下所有内容都应该是等价的：

```
collection.remove(myModel);
collection.remove(myModel.id);
collection.remove(myModel.cid);
collection.remove([myModel]); 
```

但是，我还没有测试过这个。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-28T21:11:06.620

刚刚偶然发现这篇文章（不要问我如何），`model`默认情况下 a 的 ID 类似于`c1`or `c23`。如果您希望通过 ID 从集合中删除模型，则只需使用以下命令从集合中获取模型：

`myCollection.get('c1');`

这将返回带有 ID 的模型`c1`，如果您想立即删除它，只需将返回的模型传递给集合`remove()`函数。

`myCollection.remove( myCollection.get('c1') );`

# lotus-notes - 如何在具有多个客户端版本的 Lotus Notes 客户端中使用字段加密？

> ID：10400631
> 
> 赞同：0
> 
> 时间：2012-05-01T16:13:31.163
> 
> 标签：lotus-notes, lotus-domino

我们有一个用于所有非个人帐户的中央密码存储库。它们保存在具有与服务类型（即开发、沙盒、验收或生产）相对应的加密密码字段的帐户文档中。我们在使用不同版本的 Notes 客户端时遇到了一些问题。例如，如果您的管理员运行加密文档的代理，则他们必须运行与服务器相同的客户端版本。这是他们升级服务器时不时出现的问题。有没有更好的方法来做到这一点，或者有没有办法解决这个问题？

2012 年 5 月 2 日添加：我们的服务器都在 8.5.3 上（尚未升级包 1），我们的管理员正在运行 8.5.2 客户端。因此，当他们试图在本地运行一个试图加密其中一个文档的代理时，我们的问题就出现了。找出确切的错误需要很长时间，因为我们必须注释掉所有错误处理才能最终让 Notes 给我们正确的错误，这是加密版本错误的影响。无论如何，我认为我们可以通过升级我们的管理员正在运行的客户端版本来解决我们的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T18:32:57.607

在没有从 ID 文件中查看详细信息并且不知道版本的情况下，很难确定...但很可能您的密钥是使用较新版本的 Domino 生成的，并且密钥长度比旧版本的 Notes/Domino 可以处理的要长.

请记住，Notes/Domino 中的加密已经存在了 20 年，当时较短的密钥很常见，考虑到当时的破解能力，被认为是安全的，对于当前硬件上合理的加密/解密响应时间是必要的，并且*受政府* 控制对 Lotus 可以支持的内容进行了人为限制——这实际上意味着旧版本无法合法地发布处理 Lotus 今天支持的较大密钥的代码。通常，Lotus 通过在一个版本中首先交付代码以能够处理这些密钥长度，然后在下一个版本中交付代码以能够生成这些密钥长度，来引入新的更长的密钥长度。因此，在创建新密钥时，您可能需要了解是否有任何超过两个主要版本旧的代码需要使用它们。

# vba - 位置图表相对（超过或低于）VBA中的另一个图表

> ID：10400637
> 
> 赞同：2
> 
> 时间：2012-05-01T16:14:21.317
> 
> 标签：vba, charts, position

我有一张带有图表的表格。我正在使用另一个子创建另一个图表，并希望将其放在第一个图表下。

我知道如何使用 .Top 或 .Left 设置图表的位置，但不知道如何检索第一个图表的位置。有什么建议么？

我试过：

> Activesheet.ChartObjects(2).Top = Activesheet.ChartObjects(1).Top

--> 这工作得很好，但图表是重叠的。我需要用“.Bottom”替换最后一个“.Top”，但“.Bottom”不被接受（事实上，最理想的情况是，我想放在第一个图表的底部，有一点差距）。

听起来很简单，但做不到！

谢谢，艾尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T16:47:06.890

这是你正在尝试的吗？

```
Option Explicit

Sub Sample()
    Dim C1CO As ChartObject, C2CO As ChartObject

    Set C1CO = ActiveSheet.ChartObjects("Chart 1")
    Set C2CO = ActiveSheet.ChartObjects("Chart 2")

    With C2CO
        .Top = C1CO.Top + C1CO.Height + 10
        .Left = C1CO.Left
    End With
End Sub 
```

# codeigniter - codeigniter 中的 allowed_uri_chars

> ID：10400639
> 
> 赞同：2
> 
> 时间：2012-05-01T16:14:29.983
> 
> 标签：codeigniter, codeigniter-url

从 facebook（使用 facebook 登录）返回时，我收到“您提交的 URI 包含不允许的字符”的错误消息。

我已将 allowed_uri_chars 设置如下：`$config['permitted_uri_chars'] = 'a-z 0-9~%.:_\-?=';`

我的网址是：`http://www.example/login?state=460f0c9e013ecc3fcbeeas9592ba2cf2e&code=AQDWuAZtPI3UK6vZVL8NL5h0LE28z1jdMRtAbFVjB0IUM7P5WsGFijwlgmzGGZWM37TG0tnCeD8YD-bqCKxilATkyJpiE6UdXhdN0s_s_25S93JRcGyF3inDvLXkadlB6gobStlkguwFlCbaMxV3eWRfo32ExGlN4Mb6OyU2PnWAoRYchG9it0q1KQm3D0N1gSY5_g#_=_`

当我在配置中更改 allowed_uri_chars 时，如下所示：

`$config['permitted_uri_chars'] = '';`

我得到以下错误：

> 未找到您所请求的页面。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-01T16:30:34.977

欢迎来到 StackOverflow！

`permitted_uri_chars`是 CodeIgniter 在你的 URI 中接受的字符。直接来自上面的文本块，在`config.php`：

> 这使您可以使用正则表达式指定允许的字符 | 在您的网址中。当有人试图提交一个不允许 | 的 URL 时 字符，他们将收到警告消息。
> 
> 留空以允许所有字符——但前提是你疯了。

如果要允许 base64 哈希，则需要添加 +=。改成：

`$config['permitted_uri_chars'] = '+=\a-z 0-9~%.:_-';`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-10T20:46:28.313

而不是[http://www.example/login?state=460f0c9e013e](http://www.example/login?state=460f0c9e013e) .... 等

尝试

[http://www.example/login/?state=460f0c9e013e](http://www.example/login/?state=460f0c9e013e) ....等

URL 后面有一个斜杠。它对我有用

# html - 为什么在 DOM 中不显示多个 HTML 选择标签？

> ID：10400641
> 
> 赞同：2
> 
> 时间：2012-05-01T16:14:32.830
> 
> 标签：html, dom, xhtml, html-select

我正在使用 jQuery 在页面加载时动态填充一些级联下拉控件。但是，当页面加载时，我的三个选择框中只有两个被识别。

考虑以下 HTML：

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> <html
 xmlns="http://www.w3.org/1999/xhtml"> <head>
     <title></title> </head> <body>
     <select id="one" />
     <select id="two"  />
     <select id="three"  /> </body> </html> 
```

当我在 IE、Firefox 或 Chrome 中打开此页面时，只呈现了两个选择框。这三个中只有两个出现在 DOM 中（使用 firebug 或类似工具），但所有三个都出现在源代码中。

我该怎么做才能显示所有控件？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-01T16:17:43.007

编写[有效](http://validator.w3.org)的、[与 HTML 兼容的](http://www.w3.org/TR/xhtml-media-types/#compatGuidelines)标记。

你的选择元素应该有明确的结束标签和至少一个选项元素。

```
<select id="one"><option>foo</option></select>
<select id="two"><option>foo</option></select>
<select id="three"><option>foo</option></select> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-01T16:17:23.757

简单：编写有效的 HTML 代码。浏览器正在尽最大努力解析无效的 HTML，但有时他们只是卡住了它。

`<select>`不是自闭合标签，它必须有一个闭合标签和至少一个`option`or`optgroup`元素。

```
<select id="one"><option></option></select>
<select id="two"><option></option></select>
<select id="three"><option></option></select> 
```

[jsFiddle 演示](http://jsfiddle.net/7ApgN/1)

# jdbc - ClassNotFoundException：com.mysql.jdbc.Driver 在使用服务组合时未找到

> ID：10400642
> 
> 赞同：3
> 
> 时间：2012-05-01T16:14:34.110
> 
> 标签：jdbc, apache-servicemix, classnotfound

我正在使用 servicemix 4.4.1 和 maven 3.0.4。我对 servicemix/java 世界很陌生——我的主要知识是 c#/php。

我已将以下内容添加到我的一条路线中：

```
<bean id="dataSource" class="org.springframework.jdbc.datasource.SimpleDriverDataSource">
  <property name="driverClass" value="com.mysql.jdbc.Driver"/>
  <property name="url" value="jdbc:mysql://10.10.10.29/ServiceMix"/>
  <property name="username" value="somet"/>
  <property name="password" value="somet"/>
</bean> 
```

如果然后我将路由部署到服务组合，我会得到：

```
ClassNotFoundException: com.mysql.jdbc.Driver not found 
```

通过一些谷歌搜索，我发现我的 POM 中缺少一些行，所以我添加了以下内容：

```
<osgi-import-package>
org.apache.servicemix.bundles.commons-dbcp
</osgi-import-package> 
```

和

```
<dependency>
<groupId>org.apache.servicemix.bundles</groupId>
<artifactId>org.apache.servicemix.bundles.commons-dbcp</artifactId>
<version>1.4_3</version>
</dependency> 
```

我还运行了以下命令，以便 servicemix 了解捆绑包：

```
osgi:install -s mvn:org.apache.servicemix.bundles/org.apache.servicemix.bundles.commons-pool/1.5.4_4
osgi:install -s mvn:org.apache.servicemix.bundles/org.apache.servicemix.bundles.commons-dbcp/1.4_3 
```

但是，现在当我尝试启动捆绑包时，我得到：

```
Error executing command: Could not start bundle mvn:com.boohoo/boohoo-esb-products-sage-internal/1.0-SNAPSHOT in feature(s) boohoo-esb-products-sage-internal-1.0-SNAPSHOT: Unresolved constraint in bundle boohoo-esb-products-sage-internal [256]: Unable to resolve 256.0: missing requirement [256.0] package; (package=org.apache.servicemix.bundles.commons-dbcp) 
```

我还做了一些谷歌搜索，说我可以将清单文件添加到项目中，以便允许动态导入。因此，我在项目路径中添加了一个名为：MANIFEST.MF 的新文件，并将以下内容添加到文件中：

```
Fragment-Host:
 org.apache.commons.dbcp 
DynamicImport-Package:
 * 
```

但这也没有任何效果。我觉得我在兜圈子。任何帮助/指针都会很棒。

我希望一切都有意义，但如果没有，就这么说吧，我会尝试更好地解释它。

干杯。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T13:43:45.457

请注意，此错误的另一个原因可能是缺少 mysql 连接器！在 Karaf shell 中使用以下命令安装：

安装 -s mvn:mysql/mysql-connector-java/5.1.18

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T12:05:32.317

修复了问题。我更新了我的代码如下：

```
 <bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource" destroy-method="close">
  <property name="driverClassName" value="com.mysql.jdbc.Driver"/>
  <property name="url" value="jdbc:mysql://10.10.10.29/ServiceMix"/>
  <property name="username" value="something"/>
  <property name="password" value="something"/>
</bean> 
```

聚甲醛：

```
<osgi-import-package>
  org.apache.commons.dbcp
</osgi-import-package>

<dependency>
  <groupId>org.apache.servicemix.bundles</groupId>
  <artifactId>org.apache.servicemix.bundles.commons-dbcp</artifactId>
  <version>1.4_3</version>
</dependency> 
```

删除了清单文件。从 servicemix 卸载 commons-pools。

# xna - 在 XNA 4.0 中设置线宽

> ID：10400647
> 
> 赞同：1
> 
> 时间：2012-05-01T16:15:02.207
> 
> 标签：xna, xna-4.0

`Line`有没有办法在 XNA 4.0 中为基元设置线宽？

在 OpenGL 中，相当于 glLineWidth();

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T16:54:21.300

不，您必须每行创建两个三角形才能获得它。

这里向 OpenGL 用户解释并提供代码解决方案：

[http://bobobobo.wordpress.com/2009/02/16/drawing-primitives-in-xna-from-a-vertex-buffer/](http://bobobobo.wordpress.com/2009/02/16/drawing-primitives-in-xna-from-a-vertex-buffer/)

# java - 从 jsvc 到 Jetty（或其他应用服务器）的安全消息

> ID：10400649
> 
> 赞同：1
> 
> 时间：2012-05-01T16:15:07.183
> 
> 标签：java, security, encryption, jsvc

我有一个使用嵌入式 Jetty 在 Linux 上运行的现有 Java Web 应用程序。该应用程序使用 jsvc 加载，它以 root 身份运行，侦听端口 443，并将请求中继到 Java 应用程序，该应用程序在端口 8443 上以较低权限的用户“appname”运行。

目前，应用程序从我们称为“secrets.properties”的文件中读取加密密钥。它可由“root”写入，由“appname”读取（技术上，由“appname”组的成员读取）。然而，我的偏好是该文件只能由“root”读取，并且 jsvc 读取该文件并将该文件的内容（甚至只是一个属性）传递给应用程序。我的目标是，如果有人能够破坏该应用程序并使用该应用程序的“appname”帐户获得系统访问权限，那么他们将无法检索密钥。

如果没有运行“ps -ex”的人可以看到密钥，这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T06:25:46.807

他们可能无法检索密钥，但他们仍然可以使用它

由于攻击者现在控制了应用程序，他们可以发送他们想要的任何消息以及对它们进行签名/加密的任何消息，相信应用程序没有受到损害，尽职尽责地对它们进行签名或加密。如果您只是尝试对来自应用程序的数据进行身份验证，那么这样做毫无意义。

无论如何，如果服务器遭到破坏，您将明智地撤销您的密钥，因此它也不会为您保存它们。

现在，如果您担心长期存在的密钥泄露，攻击者可以读取之前发送（但不再存储在应用程序中）的消息，那又是一个不同的问题。我建议使用具有[完美前向保密性](http://en.wikipedia.org/wiki/Perfect_forward_secrecy)的加密系统。[如果您使用经过身份验证的 Diffie-Helmen 密钥交换](http://en.wikipedia.org/wiki/Diffie%E2%80%93Hellman_key_exchange)，则TLS/SSL 具有此功能，这是其中包含 ECDHE 或 DHE 的方案（例如 ECDHE-ECDSA-AES128-GCM-SHA256 或 TLS-DHE-RSA-with-AES-256-CBC-沙）

如果由于某种原因您仍然担心密钥被泄露，您可以编写一个代理。它既可以作为 root 运行，也可以作为不同的组运行并将密钥交给它。对于 TLS/SSL，这很容易。对于一些自定义加密/签名系统，谁知道。但同样，几乎没有理由要这样做。

# c++ - 无法使蒙版与 OpenGL 一起正常工作

> ID：10400651
> 
> 赞同：4
> 
> 时间：2012-05-01T16:15:08.330
> 
> 标签：c++, opengl, masking

我正在尝试使用 OpenGL 屏蔽图像，使其部分透明。这是我的代码，它不起作用：

```
draw_img(background);

...

glEnable(GL_BLEND);
glDisable(GL_DEPTH_TEST);
glBlendFunc(GL_ONE, GL_ZERO);
draw_img(mask);
glBlendFunc(GL_DST_ALPHA, GL_ONE_MINUS_DST_ALPHA);

draw_img(foreground);
glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA); 
```

这是我正在尝试绘制的背景图像：

![背景图片](../Images/c1f7cffd436f0adb044ef70113059dd8.png)

这里分别是纹理和蒙版（蒙版中的白色真的是透明的，我只是将其展平以便您看到）：

![质地](../Images/c6c0a9a0edb8dbc061944d69fe668ae1.png)![面具](../Images/e81ae011be91f45daa6ca7521fc77683.png)

这是我期望得到的：

![预期结果](../Images/ecb2d5e3cecbbbb1c027835fd3498c99.png)

这就是我实际得到的：

![实际结果](../Images/2059f2aa09d9489a7e8e8f77fec2b9ac.png)

知道可能是什么问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-01T16:58:54.793

对于初学者来说，我认为这不会达到你的预期：

```
glBlendFunc(GL_ONE, GL_ZERO);
draw_img(mask); 
```

这是将蒙版与背景混合，但您说的是“始终采用 100% 的蒙版，始终采用 0% 的目标”。在此步骤之后，帧缓冲区中将不再有红色像素，因为您已将帧缓冲区的**所有**通道替换为蒙版纹理。

我猜你可能打算只替换 alpha 通道，而保持颜色不变？如果在绘制蒙版之前屏蔽颜色通道，则可以执行此操作，使用`glColorMask(GL_FALSE,GL_FALSE,GL_FALSE, GL_TRUE);`

我想如果你这样做，它可能会奏效。

我认为这种效果通常可以通过 glTexEnv 的多重纹理操作来完成，但如果你不想使用多重纹理，这应该可以。

# postgresql - 分发postgresql的最佳方式是什么

> ID：10400654
> 
> 赞同：10
> 
> 时间：2012-05-01T16:15:27.353
> 
> 标签：postgresql, cassandra, distributed

我在 postgresql 中有一个数据库，用于为数百个客户提供软件即服务，目前每个客户都有一个 postgresql 模式，但我喜欢最好的解决方案，因为客户迅速增加。我读过关于 cassandra 的文章，但我不想失去主键、外键和检查的完整性。还阅读了分布式系统中的 postgresql，但我不知道目前实现这一点的最佳方法是什么

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-01T18:03:02.937

您可以在四个级别上区分客户：

1.  为每个客户运行一个单独的 PostgreSQL 集群。这提供了最大的分离；每个客户端都在一个单独的端口上，具有自己的一组系统表、事务日志等。

2.  将每个客户放在同一集群中的单独数据库中。这样，他们每个人都有一个单独的登录名，但在相同的端口号上，并且他们共享全局表，如 pg_database。

3.  在同一个数据库中为每个客户提供一个单独的模式。如果他们仅通过您的软件连接，则不需要单独的用户 ID，因为您只需设置 search_path。当然，如果您愿意，可以使用单独的用户 ID。

4.  让 customer_id 成为每个表的主键的一部分，并确保在您的软件中受到限制。这可能比为数百个用户中的每个用户都有重复的表更好地扩展，但您必须非常小心，始终通过 customer_id 限定您的查询。

众所周知，有些人会将这些技术结合起来，例如，将每个集群限制为 100 个数据库，并为每个客户提供一个单独的数据库。

没有更多详细信息，很难知道哪种配置最适合您的情况，除了说如果您想允许用户直接访问数据库，而不通过您的软件，您需要考虑系统表中可见的内容每个选项。从用户的角度看 pg_database、pg_user 和 pg_class，看看暴露了什么。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-09T03:03:44.920

> 我不想失去主键、外键和检查的完整性

像 Cassandra 这样的系统的要点是，一旦您的数据集或工作负载不适合单台机器，即使您留在 postgresql 上，您也必须放弃这些东西。（我在我强烈推荐的演讲中介绍了细节：http: [//blip.tv/pycon-us-videos-2009-2010-2011/pycon-2010-what-every-developer-should-know-about-database -可扩展性-21-3280648](http://blip.tv/pycon-us-videos-2009-2010-2011/pycon-2010-what-every-developer-should-know-about-database-scalability-21-3280648)）。

所以 Cassandra 是对这个问题的回答，“如果我们知道我们将不得不放弃外键和连接，我们可以通过重新思考如何设计我们的数据库来构建什么？”

如果你永远都达不到这一点，那么 Cassandra 就太过分了。（但你还是应该看那个演讲。:)

# svn - 使用 pre-revprop-change 钩子修改 svn:log

> ID：10400655
> 
> 赞同：2
> 
> 时间：2012-05-01T16:15:32.847
> 
> 标签：svn, tortoisesvn, hook

**pre-revprop-change**钩子脚本有什么方法可以知道***修改前*****svn:log 的当前值是***多少？
我知道钩子脚本作为标准输入接收预期的新值。但是我需要脚本在修改之前验证当前值是什么。*

 ** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T16:45:06.123

您可以使用

```
svnlook author|date|log -r<HEAD_REVISION> <PATH_TO_REPO> 
```

要查找头部修订，您可以使用

```
svnlook youngest <PATH_TO_REPO> 
```*

# unit-testing - 如何使用 Microsoft UIA 检索控件的屏蔽值

> ID：10400662
> 
> 赞同：0
> 
> 时间：2012-05-01T16:15:47.543
> 
> 标签：unit-testing, coded-ui-tests, microsoft-ui-automation

在我们的应用程序中，我们有诸如日期/SSN 之类的字段，并且这些字段包含默认的掩码值，如“MM/DD/YYYY”或“xxx-xx-xxxx”等。当我们关注这些控件时，这些值会被隐藏并显示空白控件。我们需要检查此控件中可用的默认值，并想知道是否有任何方法使用 UIA 来检索控件的掩码值。

提前谢谢了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T11:17:20.373

Microsoft UIA 框架阻止您检索掩码值，但根据您正在测试的目标应用程序，您可能能够通过更具侵入性的方式获取所需的数据。查看使用 SetWindowsHookEx() 检索属性以获取一些您自己的测试代码以在目标进程的上下文中执行。

# java - 如果所有属性都是键的一部分，为什么休眠的 getPropertyNames 返回一个空列表？

> ID：10400671
> 
> 赞同：3
> 
> 时间：2012-05-01T16:16:17.887
> 
> 标签：java, hibernate, persistence

这是一个有趣的令人头疼的问题，开始五月！

我有一个像这样的休眠映射：

```
<hibernate-mapping default-lazy="false">
  <class name="my.class.name" table="MY_CLASS_TABLE">
     <composite-id>
       <key-property name="prop1" column="PROP_1" />
       <key-property name="prop2" column="PROP_2" />
       <key-property name="prop3" column="PROP_3" />
     </composite-id>
   </class>
</hibernate-mapping> 
```

还有一个函数，它遍历并构建类名和属性的“字典”。在我上这门课之前我没有任何问题，出于某种原因，我的调用`getPropertyNames()`返回一个空列表。如果在 之外至少有一个属性`composite-id`，我没有任何问题。我有一个笨拙的解决方法是在 id 之外添加一个虚拟字段（糟糕！），突然一切正常。

知道为什么会发生这种情况以及我能做些什么来解决它吗？

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T17:35:06.653

经过进一步挖掘，我找到`getIdentifierType()`并`getIdentifierPropertyName()`完成了这项工作。对于像这样的复合键，我检查类型以查看它是 CompositeCustomType 还是 ComponentType 的实例，如果是，则将其放入临时 var，并调用`getPropertyNames()`该临时 var。

# linux - Linux Bash：设置 iptables 规则以允许主动和被动 FTP

> ID：10400672
> 
> 赞同：11
> 
> 时间：2012-05-01T16:16:17.997
> 
> 标签：linux, bash, ftp, iptables

我有一台安装了 FTP 服务器的 PC。我想设置 iptables 规则以允许主动和被动 FTP。我已经尝试了人们报告正在运行的以下代码，但它似乎阻止了我的所有流量（页面将不再加载等）

```
#!/bin/bash

IPT=/sbin/iptables
$IPT -F
$IPT -X
$IPT -t nat -F
$IPT -t nat -X
$IPT -t mangle -F
$IPT -t mangle -X
/sbin/modprobe ip_conntrack
/sbin/modprobe ip_conntrack_ftp

# Setting default filter policy
$IPT -P INPUT DROP
$IPT -P OUTPUT ACCEPT

# Allow FTP connections @ port 21
$IPT -A INPUT  -p tcp --sport 21 -m state --state ESTABLISHED -j ACCEPT
$IPT -A OUTPUT -p tcp --dport 21 -m state --state NEW,ESTABLISHED -j ACCEPT

# Allow Active FTP Connections
$IPT -A INPUT -p tcp --sport 20 -m state --state ESTABLISHED,RELATED -j ACCEPT
$IPT -A OUTPUT -p tcp --dport 20 -m state --state ESTABLISHED -j ACCEPT

# Allow Passive FTP Connections
$IPT -A INPUT -p tcp --sport 1024: --dport 1024: -m state --state ESTABLISHED,RELATED -j ACCEPT
$IPT -A OUTPUT -p tcp --sport 1024: --dport 1024:  -m state --state ESTABLISHED,RELATED -j ACCEPT 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-11-14T10:02:41.367

根据你的问题，我想你有一些普通的主机，有一些常见的应用程序，比如 web 浏览器、邮件客户端，可能是 telnet 和|或 ssh-client，也可能是 ftp-client，可能是一些 IM 等。并且拥有所有这些应用程序正常工作，您还需要允许此主机上的 FTP 服务器以主动和被动模式为将连接的客户端工作。以下是适用于这种情况的 3 条规则。通用规则块是适用于大多数客户端主机的极简规则集。接下来是 ftp-client 的规则块，如果您的主机上有这样的规则。ftp-client 的规则与其他客户端的规则略有不同：始终有两个连接来启用数据传输：ftp-control（端口 21）和 ftp-data（主动模式下的端口 20 或被动模式下的随机端口）。

FTP 服务器的规则在最后一块。

请检查内核中有 ip_conntrack_ftp （可能被命名为 nf_conntrack_ftp ）：

```
> lsmod | grep conn 
```

如果您没有这个内核模块，“相关”规则将不起作用，并且很可能，单独的 ftp 数据连接将不会启动，而主 ftp 控制连接将在“PORT”命令之后的某个地方挂起。在这种情况下，您仍然可以强制执行 ftp 数据连接，但代价是降低了调整后的规则提供的安全性。调整位于规则之前的评论中。

临

```
#!/bin/bash
IPT=/sbin/iptables

$IPT -F
$IPT -t nat -F
$IPT -t mangle -F

$IPT -X
$IPT -t nat -X
$IPT -t mangle -X

/sbin/modprobe ip_conntrack
/sbin/modprobe ip_conntrack_ftp

$IPT -P INPUT DROP
$IPT -P FORWARD DROP
$IPT -P OUTPUT DROP

# Block of common rules #####################################################
$IPT -A OUTPUT -o lo -j ACCEPT
$IPT -A INPUT  -i lo -j ACCEPT

$IPT -A OUTPUT -p icmp -j ACCEPT
$IPT -A INPUT  -p icmp -j ACCEPT

# allow DNS queries and replies
$IPT -A OUTPUT -p udp --dport 53 -j ACCEPT
$IPT -A INPUT  -p udp --sport 53 -j ACCEPT

# allow all Your possible client applications to work 
$IPT -A OUTPUT -p tcp -m multiport --dports ssh,telnet,http,https,xmpp-client,aol,smtp,pop3,imap2,imap3 -m state --state NEW,RELATED,ESTABLISHED -j ACCEPT
$IPT -A INPUT  -p tcp -m multiport --sports ssh,telnet,http,https,xmpp-client,aol,smtp,pop3,imap2,imap3 -m state --state RELATED,ESTABLISHED   -j ACCEPT
# End of block of common rules ##############################################

# If You have ftp-client too, this block of rules 
# will allow it to work with external ftp servers in both modes.
#
# First, allow ftp-control at client side:
$IPT -A OUTPUT -p tcp -m tcp --dport 21 -m state --state NEW,ESTABLISHED -j ACCEPT 
$IPT -A INPUT -p tcp -m tcp --sport 21 -m state --state ESTABLISHED -j ACCEPT 
#
# Then allow ftp-data Active Mode at client side:
# Client accepts RELATED connection from server port 20 
# to client port number negotiated in ftp-control connection.
# nf_conntrack_ftp is REQUIRED at client host 
# to pick up this client port number from payload of ftp-control packets,
# otherwise You are forced to use 'NEW' instead of 'RELATED'.
# And in the case of 'NEW' You allow connection to ANY port of Your host!
$IPT -A INPUT -p tcp -m tcp --sport 20 -m state --state RELATED,ESTABLISHED -j ACCEPT 
$IPT -A OUTPUT -p tcp -m tcp --dport 20 -m state --state ESTABLISHED -j ACCEPT 
#
# Finally, allow ftp-data Passive Mode at client side:
# Client starts RELATED connection from random own high port number 
# to server fixed high port number negotiated in ftp-control connection.
# nf_conntrack_ftp is REQUIRED again at client host 
# to pick up this client port number from payload of ftp-control packets, 
# otherwise You are forced to use 'NEW' instead of 'RELATED' !
-A OUTPUT -p tcp -m tcp --sport 1024:65535 --dport 1024:65535 -m state --state RELATED,ESTABLISHED -j ACCEPT 
-A INPUT -p tcp  -m tcp --sport 1024:65535 --dport 1024:65535 -m state --state ESTABLISHED -j ACCEPT    

#######[ Block of rules needed for Local FTP Server ]#######
# This block of rules allows clients to access Your FTP server at this host
# either in Active or Passive mode. 
# You may need to enable Passive mode in FTP server config file,
# e.g. with pasv_enable=yes in /etc/vsftpd.conf if vsftpd is Your choice.
#
# Ftp-control at server side:
# (some example rules are given below just to show 
# how You can selectively restrict access to Your FTP server):
$IPT -A INPUT -s 1.2.3.0/24 -p tcp -m tcp --dport 21 -m state --state NEW,ESTABLISHED -j ACCEPT 
$IPT -A INPUT -s 5.6.7.8/32 -p tcp -m tcp --dport 21 -m state --state NEW,ESTABLISHED -j ACCEPT 
$IPT -A OUTPUT -p tcp -m tcp --sport 21 -m state --state ESTABLISHED -j ACCEPT 
#
# Ftp-data Active Mode at server side:
# Server starts RELATED connection from server port 20 
# to client port number negotiated in ftp-control connection.
# nf_conntrack_ftp is REQUIRED to pick up this client port number
# from payload of ftp-control packets, 
# otherwise You are forced to use 'NEW' instead of 'RELATED' !
$IPT -A OUTPUT -p tcp -m tcp --sport 20 -m state --state RELATED,ESTABLISHED -j ACCEPT 
$IPT -A INPUT -p tcp -m tcp --dport 20 -m state --state ESTABLISHED -j ACCEPT 
#
# Ftp-data Passive Mode at server side:
# Server accepts RELATED client connection from random client high port number
# to own fixed high port number negotiated in ftp-control connection.
# nf_conntrack_ftp is REQUIRED to pick up this own fixed high port number
# from payload of ftp-control packets,
# otherwise You are forced to use 'NEW' instead of 'RELATED'.
# And in the case of 'NEW' You allow connection to ANY high port of Your server!
$IPT -A INPUT -p tcp -m tcp --sport 1024:65535 --dport 1024:65535 -m state --state RELATED,ESTABLISHED -j ACCEPT 
$IPT -A OUTPUT -p tcp -m tcp --sport 1024:65535 --dport 1024:65535 -m state --state ESTABLISHED -j ACCEPT 
###### 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-01T16:23:40.170

该代码仅允许传入和传出 FTP 连接。它不允许其他任何东西进出。

```
 $IPT -P INPUT DROP 
```

丢弃所有传入流量。因此，如果您从这个开始，您将希望允许流量进入您正在运行的任何其他您希望允许进入的服务。.

```
 $IPT -A INPUT  -p tcp --sport 21 -m state --state NEW,ESTABLISHED -j ACCEPT
 $IPT -A OUTPUT -p tcp --dport 21 -m state --state ESTABLISHED -j ACCEPT 
```

此规则将允许传入的 FTP 流量。

这个脚本是/做什么的解释是它删除所有现有的 IP 表链，然后添加规则以允许所有传出流量并阻止除 FTP 之外的所有传入流量。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-06T16:53:13.303

INPUT 和 OUTPUT 行的参数需要在**# Allow FTP connections @ port 21**部分中翻转，否则新的（活动的）FTP 连接将被阻止。

```
# Allow FTP connections @ port 21
$IPT -A INPUT -p tcp --dport 21 -m state --state NEW,ESTABLISHED -j ACCEPT
$IPT -A OUTPUT  -p tcp --sport 21 -m state --state ESTABLISHED -j ACCEPT 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-12-08T16:58:30.140

请参阅此站点以获取说明：[http ://slacksite.com/other/ftp.html](http://slacksite.com/other/ftp.html)

**FTP客户端：**

```
lsmod | grep ftp
modprobe nf_conntrack_ftp      or   modprobe ip_conntrack_ftp
lsmod | grep ftp
 iptables -A INPUT -s 192.168.1.0/24 -d 192.168.1.0/24 -p tcp -m tcp --sport 21 -m conntrack --ctstate ESTABLISHED -j ACCEPT 
 iptables -A INPUT -s 192.168.1.0/24 -d 192.168.1.0/24 -p tcp -m tcp --sport 20 --dport 1024: -m conntrack --ctstate ESTABLISHED,RELATED -j ACCEPT 
 iptables -A INPUT -s 192.168.1.0/24 -d 192.168.1.0/24 -p tcp -m tcp --sport 1024: --dport 1024: -m conntrack --ctstate ESTABLISHED -j ACCEPT 
 iptables -A OUTPUT -s 192.168.1.0/24 -d 192.168.1.0/24 -p tcp -m tcp --dport 21 -m conntrack --ctstate NEW,ESTABLISHED -j ACCEPT
 iptables -A OUTPUT -s 192.168.1.0/24 -d 192.168.1.0/24 -p tcp -m tcp --dport 20 -m conntrack --ctstate ESTABLISHED -j ACCEPT 
 iptables -A OUTPUT -s 192.168.1.0/24 -d 192.168.1.0/24 -p tcp -m tcp --sport 1024:65535 --dport 1024:65535 -m conntrack --ctstate ESTABLISHED,RELATED -j ACCEPT 
```

**FTP 服务器：**

```
 lsmod | grep ftp
 modprobe nf_conntrack_ftp      or   modprobe ip_conntrack_ftp
 lsmod | grep ftp
 iptables -A INPUT -s 192.168.1.0/24 -d 192.168.1.0/24 -p tcp -m tcp --dport 21 -m conntrack --ctstate NEW,ESTABLISHED -j ACCEPT 
 iptables -A INPUT -s 192.168.1.0/24 -d 192.168.1.0/24 -p tcp -m tcp --dport 20 --sport 1024:-m conntrack --ctstate ESTABLISHED -j ACCEPT 
 iptables -A INPUT -s 192.168.1.0/24 -d 192.168.1.0/24 -p tcp -m tcp --sport 1024: --dport 1024: -m conntrack --ctstate ESTABLISHED,RELATED -j ACCEPT 
 iptables -A OUTPUT -s 192.168.1.0/24 -d 192.168.1.0/24 -p tcp -m tcp --sport 21 -m conntrack --ctstate ESTABLISHED -j ACCEPT 
 iptables -A OUTPUT -s 192.168.1.0/24 -d 192.168.1.0/24 -p tcp -m tcp --sport 20 -m conntrack --ctstate ESTABLISHED,RELATED -j ACCEPT 
 iptables -A OUTPUT -s 192.168.1.0/24 -d 192.168.1.0/24 -p tcp -m tcp --sport 1024:65535 --dport 1024:65535 -m conntrack --ctstate ESTABLISHED -j ACCEPT 
```

在客户端在被动和主动模式之间切换

```
 ftp> passive
 Passive mode on.
 ftp> passive
 Passive mode off. 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-06-15T09:44:32.253

我在上面的脚本中发现了一个很大的错误！

规则打错了，应该是这样的：

```
$IPT -A INPUT  -p tcp --dport 21 -m state --state NEW,ESTABLISHED -j ACCEPT
$IPT -A OUTPUT -p tcp --sport 21 -m state --state ESTABLISHED -j ACCEPT

$IPT -A INPUT -p tcp --dport 20 -m state --state ESTABLISHED,RELATED -j ACCEPT
$IPT -A OUTPUT -p tcp --sport 20 -m state --state ESTABLISHED -j ACCEPT 
```

Dport 和 Sport 换个地方！你要去一个目的地，如果你连接到一个服务器，源端口是动态的并且是客户端特定的，并且不知道但是建立了一个连接！

恕我直言，第二行完全模棱两可，因为您不知道服务器端客户端将使用哪些端口来建立 ftp 连接。如果出站流量被默认值阻止，最好是这样的规则：

```
$IPT -A OUTPUT -p tcp --dport 21 -m state --state NEW,ESTABLISHED -j ACCEPT
$IPT -A OUTPUT -p tcp --dport 20 -m state --state ESTABLISHED,RELATED  -j ACCEPT 
```

但这只有在规则

```
$IPT -P OUTPUT DROP 
```

位于规则集之上。

问候

马库斯

# php - 使用 PHP 打开 MSMQ 队列

> ID：10400676
> 
> 赞同：4
> 
> 时间：2012-05-01T16:16:37.747
> 
> 标签：php, msmq

我有一个示例 php 脚本来连接到 Windows 上的 MSMQ。我可以创建队列并向队列发送消息，但是当我尝试打开队列以读取消息时，我不断收到拒绝访问异常。代码在这里： http: [//pastebin.com/S5uCiP2Z](http://pastebin.com/S5uCiP2Z)

我认为主要问题是

```
$READ = $MSMQInfo->Open(2,0); 
```

行，因为我不确定 2、0 选项代表什么（我在任何地方都找不到对这些选项的引用 - 我从另一个示例中获得了该代码。）查看[http://msdn.microsoft 上的 MSMQQueueInfo.open 文档。 com/en-us/library/windows/desktop/ms707027%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms707027%28v=vs.85%29.aspx)我可以看到一些选项，但看不到任何数字选项..

任何帮助将不胜感激。与 MSMQ 集成的原因是在系统之间移动时提供临时解决方案，我们的旧系统使用 MSMQ，所以我需要这个接口。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T16:27:48.870

从[这里](http://msdn.microsoft.com/en-us/library/windows/desktop/ms707027(v=vs.85).aspx)，您已经知道参数是：

```
Function Open(Access, ShareMode) 
```

他们还说

> 访问权限可以设置为以下之一：
> 
> MQ_PEEK_ACCESS：只能查看消息。它们无法从队列中移除。
> 
> MQ_SEND_ACCESS：消息只能发送到队列。
> 
> MQ_RECEIVE_ACCESS：可以从队列中检索（读取和删除）消息、查看消息或清除消息。有关限制谁可以从队列中检索消息的信息，请参阅 ShareMode 参数的描述。
> 
> MQ_PEEK_ACCESS | MQ_ADMIN_ACCESS：本地传出队列中的消息只能被偷看（读取而不从队列中删除）。
> 
> MQ_RECEIVE_ACCESS | MQ_ADMIN_ACCESS：本地传出队列中的消息可以被检索（读取并从队列中删除）、窥视（读取而不从队列中删除）或清除（删除）。

在 MSDN 的[MQACCESS](http://msdn.microsoft.com/en-us/library/cc218539(v=prot.10).aspx)文档中，它们为您提供了常量的数值：

```
typedef  enum 
{
  MQ_RECEIVE_ACCESS = 1,
  MQ_SEND_ACCESS = 2,
  MQ_PEEK_ACCESS = 0x0020,
  MQ_ADMIN_ACCESS = 0x0080
} MQACCESS; 
```

第二个参数，ShareMode：

> ShareMode 指定谁可以访问队列。设置为以下之一：
> 
> MQ_DENY_NONE：默认值。该队列可供所有人组的所有成员使用。如果 Access 设置为 MQ_PEEK_ACCESS 或 MQ_SEND_ACCESS，则必须使用此设置。
> 
> MQ_DENY_RECEIVE_SHARE：将可以从队列中检索消息的人限制在此进程中。如果队列已被另一个进程打开以检索消息，则此调用将失败并生成 MQ_ERROR_SHARING_VIOLATION (0xC00E0009) 错误。仅当 Access 设置为 MQ_RECEIVE_ACCESS 时适用。

这些常数是：

```
Const MQ_DENY_NONE = 0
Const MQ_DENY_RECEIVE_SHARE = 1 
```

确实有点难找，但你可以[在这里](https://gist.github.com/1985874)得到它，这不是一个可靠的来源，但我相信它是正确的。

# cocos2d-iphone - Cocos2d - 碰撞中的动作？

> ID：10400677
> 
> 赞同：0
> 
> 时间：2012-05-01T16:16:54.723
> 
> 标签：cocos2d-iphone, action, collision-detection

我有一个碰撞检测，它工作正常，问题是，每当我`bird`的“”击中“ `cloud`”，云消散，我得到一些分数。应该发生的“ `sol`”也是如此，但云却没有。

这怎么能改变？我尝试了很多，但似乎可以解决。

**碰撞代码**

```
- (void)update:(ccTime)dt {
    bird.position = ccpAdd(bird.position, skyVelocity);

    NSMutableArray *projectilesToDelete = [[NSMutableArray alloc] init];
    for (CCSprite *bird in _projectiles) {
        bird.anchorPoint = ccp(0, 0);  
        CGRect absoluteBox = CGRectMake(bird.position.x, bird.position.y, [bird boundingBox].size.width, [bird boundingBox].size.height);

        NSMutableArray *targetsToDelete = [[NSMutableArray alloc] init];
        for (CCSprite *cloudSprite in _targets) {
            cloudSprite.anchorPoint = ccp(0, 0); 
            CGRect absoluteBox = CGRectMake(cloudSprite.position.x, cloudSprite.position.y, [cloudSprite boundingBox].size.width, [cloudSprite boundingBox].size.height);

            if (CGRectIntersectsRect([bird boundingBox], [cloudSprite boundingBox])) {
                [targetsToDelete addObject:cloudSprite];

            }                       
        }

        for (CCSprite *solSprite in _targets) {
            solSprite.anchorPoint = ccp(0, 0); 
            CGRect absoluteBox = CGRectMake(solSprite.position.x, solSprite.position.y, [solSprite boundingBox].size.width, [solSprite boundingBox].size.height);

            if (CGRectIntersectsRect([bird boundingBox], [solSprite boundingBox])) {
                [targetsToDelete addObject:solSprite];      
                score += 50/2;
                [scoreLabel setString:[NSString stringWithFormat:@"%d", score]];
            }                       
        }

        // NÅR SKYEN BLIVER RAMT AF FUGLEN
        for (CCSprite *cloudSprite in targetsToDelete) {
            //[_targets removeObject:cloudSprite];
            //[self removeChild:cloudSprite cleanup:YES];       
        }

        // NÅR SOLEN BLIVER RAMT AF FUGLEN
        for (CCSprite *solSprite in targetsToDelete) {
            [_targets removeObject:solSprite];
            [self removeChild:solSprite cleanup:YES];   

        }

        if (targetsToDelete.count > 0) {
            [projectilesToDelete addObject:bird];
        }
        [targetsToDelete release];
    }

    // NÅR FUGLEN BLIVER RAMT AF ALT ANDET
    for (CCSprite *bird in projectilesToDelete) {
        //[_projectiles removeObject:bird];
        //[self removeChild:bird cleanup:YES];
    }
    [projectilesToDelete release];

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T16:56:48.227

好吧，您的 cloud 和 sol 对象都在同一个数组 _targets 中。因此，除非您在循环中测试正确的种类，否则您将无法对其中任何一个执行所需的操作。像这样（假设 cloud 和 sol 是 CCSprite 的子类）：

```
for (CCSprite *cloudSprite in _targets) {
    if(![cloudSprite isKindOfClass:[Cloud class]]) continue;
    cloudSprite.anchorPoint = ccp(0, 0); 
    CGRect absoluteBox = CGRectMake(cloudSprite.position.x, cloudSprite.position.y, [cloudSprite boundingBox].size.width, [cloudSprite boundingBox].size.height);
    if (CGRectIntersectsRect([bird boundingBox], [cloudSprite boundingBox])) {
        [targetsToDelete addObject:cloudSprite];

    }                       
} 
```

这样您只需将云添加到targetsToDelete。关键是在_targets 中区分云和溶胶。子类化是防弹的。否则你可以使用标签来实现它，但它可能是一个更脆弱的设计。一旦您可以区分 _targets 中的对象类型，就可以轻松优化此代码（_targets 和 targetsToDelete.

# java - 检测 Serializable 对象是否真的可序列化？

> ID：10400678
> 
> 赞同：1
> 
> 时间：2012-05-01T16:16:55.520
> 
> 标签：java, serializable, fail-fast

是否有内置方法 - 或者有人可以指出一个好的模式 - 来确定实现的对象`Serializable`在构造时是否实际上是可序列化的？我需要没有副作用的东西，所以我不能只调用我的应用程序服务器中实际序列化对象的方法。

我更喜欢可以在构造函数中利用而不更改构造函数签名的东西。但是，我不介意为这些对象建立一个工厂，如果这样会更容易的话。

**编辑**

根据[这个问题](https://stackoverflow.com/questions/970891/who-actually-implements-serializable-methods) [接受的答案](https://stackoverflow.com/a/970976/182654)，看起来我可以创建自己的`ObjectOutputStream`->`ObjectInputStream`管道来在创建时测试对象的可序列化性。

# android - 按下“主页”按钮后如何将活动置于最前面

> ID：10400679
> 
> 赞同：0
> 
> 时间：2012-05-01T16:16:55.967
> 
> 标签：android, android-activity, foreground, android-homebutton

我一直在阅读很多帖子，但没有运气。我想要的是与 NoLed 应用程序类似的行为，当屏幕关闭时，我想重新启用它并显示低消耗屏幕。如果当我的应用程序在前台（用户可见）时屏幕关闭，一切正常，但如果我按下主页按钮并锁定手机或等到屏幕关闭，我的低功耗屏幕将不可见并且行为不会是预期的。我已经尝试使用此代码，并且所有可能的标志都混合在一起，单独......但没有运气：

```
Intent i=new Intent(Este,BajoConsumo.class);
i.setFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP);
//i.addFlags(...);
startActivity(i); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T20:12:38.950

经过一些研究，我发现这样做的方法是调用；

```
Intent i=new Intent(this, BajoConsumo.class);
i.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
startActivity(i); 
```

从服务中，它将打开并聚焦新活动，并且它将变得可见。

# teamcity - 在 teamcity 服务器上安装 nuget

> ID：10400684
> 
> 赞同：4
> 
> 时间：2012-05-01T16:17:20.183
> 
> 标签：teamcity, nuget, teamcity-7.0

我们有一个 TeamCity 7 服务器，我们希望为 nuget 启用它。

我们在盒子上没有任何外部网络连接，所以当被要求下载 nuget 时，TeamCity 说

“无法从默认提要中获取最新的 NuGet。与[http://packages.nuget.org](http://packages.nuget.org)的连接被拒绝”

是否有一种解决方法可以从独立的 exe 或其他东西安装 nuget，以使 TeamCity 能够识别安装？

在此先感谢，安迪

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-03T04:26:01.803

以下是手动删除包的方法：http: [//devnet.jetbrains.net/message/5317896#5317896](http://devnet.jetbrains.net/message/5317896#5317896)

其他人可能对设置代理设置感兴趣： http: [//devnet.jetbrains.net/message/5452590#5452590](http://devnet.jetbrains.net/message/5452590#5452590)

# apache-flex - 使用 Flex/AIR 中的拖放重新排序 spark 列表中的项目

> ID：10400685
> 
> 赞同：0
> 
> 时间：2012-05-01T16:17:22.410
> 
> 标签：apache-flex, air

我有一个工作正常的简单测试示例，我将拖放属性设置为 true，如下所示：`<s:List dragMoveEnabled="true" dragEnabled="true" dropEnabled="true">`

与工作的测试应用程序和我的真实应用程序的区别在于，真实应用程序上的布局更复杂（我使用的是 ViewStacks 和 Groups）和 dataProvider。在所有情况下，我都使用 ArrayCollection，但在真正的应用程序中，我有一些 SearchResults 对象（这些不是动态对象）。

拖动动画在那里，但在放下时，鼠标下的项目被选中。如果我没有设置dragMoveEnabled，那么该项目会以某种方式被复制，但在它的位置我会看到一个对象。

//工作示例

```
<s:List dragMoveEnabled="true" dragEnabled="true" dropEnabled="true">
        <s:dataProvider>
            <s:ArrayCollection>
                <fx:Object label="Item 1" data="1" />
                <fx:Object label="Item 2" data="2" />
                <fx:Object label="Item 3" data="3" />
            </s:ArrayCollection>
        </s:dataProvider>
    </s:List> 
```

这是来自我的应用程序并且无法正常工作

```
<s:List id="favSavedSearchesList" width="100%" height="100%"  
        contentBackgroundColor="#dfe4ea"  
        change="favSavedSearchesList_changeHandler(event)"
        itemRenderer="generic_components.RemoveItemRenderer"
        dragMoveEnabled="true" dragEnabled="true" dropEnabled="true"/> 
```

更新：我做了一些测试并用字符串的 ArrayCollection 替换了我的 dataProvider 并且它起作用了，所以我现在可以排除应用程序的复杂布局并查看提供程序

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T14:50:33.533

我通过调试 List 的 drop 处理程序发现了问题。问题是由于 dataProvider 有一个排序集，如果您对 ArrayCollection 或用于创建 dataProvider 的 Array 进行了排序，则 dragMove 将被忽略。

第二个问题是我的数组是通过从 sqlite 数据库读取获得的，我没有在代码或 SQL 查询中对其进行排序，所以排序对我来说是意料之外的。

# java - BufferedReader 与 Java 中的 RandomAccessFile

> ID：10400688
> 
> 赞同：8
> 
> 时间：2012-05-01T16:17:37.383
> 
> 标签：java, file, file-io, bufferedreader, readline

我正在用java编写一个小应用程序

我读取各种大小的文本文件，我需要逐行读取它们（并将行插入数组）。和之间在性能方面
有区别吗？`BufferedReader.ReadLine()``RandomAccessFile.ReadLine()`

有任何理由偏爱其中一个吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-01T16:21:55.980

RandomAccessFile.readLine() 可能会稍微快一些，因为它忽略了字符编码。但是它不使用缓冲并且仍然使用 StringBuffer :P 所以它在你的系统上可能会更慢。

BufferedReader.readLine() 是首选，因为它处理字符编码，例如 UTF-8 或 Windows-1252。

还有一个 DataInputStream.readLine() 可以与 BufferedInputStream 一起使用。只有使用它才能确定您想要 ISO-8859-1 或 ASCII 编码。

# android - Android登录应用程序到网站

> ID：10400690
> 
> 赞同：0
> 
> 时间：2012-05-01T16:17:46.807
> 
> 标签：android, cookies, login, parameters, http-post

所以我试图从这个服务器成功登录：www.liuserver.com 和我使用两个类 LoginLayout.java 和 CustomHttpclient.java，现在我已经使用 Httpwatch 监视浏览器与服务器的通信以跟踪类型回复服务器生成的帖子（生成包含用户提供的用户名和密码的 url 以及自动生成的 x 和 y 整数，在此示例中为 31 和 1，其他时候嘿只是零）发布到网页看起来像这样 ：

```
POST /login.php HTTP/1.1
Accept: application/x-ms-application, image/jpeg, application/xaml+xml, image/gif, image/pjpeg, application/x-ms-xbap,     application/vnd.ms-excel, application/vnd.ms-powerpoint, application/msword, application/x-shockwave-flash, */*
Referer: https://www.liuserver.com/login.php
Accept-Language: en-US
User-Agent: Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 6.1; WOW64; Trident/4.0; SLCC2; .NET CLR 2.0.50727; .NET CLR     3.5.30729; .NET CLR 3.0.30729; Media Center PC 6.0; .NET4.0C)
Content-Type: application/x-www-form-urlencoded
Accept-Encoding: gzip, deflate
Host: www.liuserver.com
Content-Length: 38
Connection: Keep-Alive
Cache-Control: no-cache
Cookie: PHPSESSID=e3q4d78jkci3shhn8fq1tlf7i5

USER=20730312&PASS=Password44&x=32&y=1 
```

现在我已成功生成带有参数的 url，我将它们发布到服务器，但当然它给了我否定的答复，现在我被告知，在 httpwatch 插件的 cookie 选项卡中很明显我需要发送phpsessionid 作为 cookie，我的问题是如何做到这一点，我应该在哪个类中放置用于发送带有参数的 cookie 的代码，以及如何在成功验证后跟踪服务器的回复类型的用户名和密码。回复流看起来像：

```
HTTP/1.1 302 Found
Server: nginx/1.0.14
Date: Tue, 01 May 2012 15:57:06 GMT
Content-Type: text/html
Connection: keep-alive
Expires: Thu, 19 Nov 1981 08:52:00 GMT
Cache-Control: no-store, no-cache, must-revalidate, post-check=0, pre-check=0
Pragma: no-cache
Location: student/
X-Powered-By: PleskLin
Content-Length: 0 
```

登录页面的完整网址：`https://www.liuserver.com/login.php`

更新 ：

好的，我已成功从服务器获取 phpsessionid cookie，我可以查看它的值，现在我必须使用将我的登录参数提交到 erver

```
response = CustomHttpClient.executeHttpPost("https://www.liuserver.com/login.php", postParameters); 
```

但是我应该在哪里放置包含 phpsession id 的 cookie 在这个方法中执行 httpPost 我可以更改方法的参数并将 cookie 传递到那里吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T17:00:54.133

要保存 cookie，您需要以下内容：

```
CookieStore cookieStore = new BasicCookieStore();
DefaultHttpClient httpclient = new DefaultHttpClient();

HttpContext ctx = new BasicHttpContext();
ctx.setAttribute(ClientContext.COOKIE_STORE, cookieStore);
HttpGet get = new HttpGet("your URL here");

HttpResponse response = httpclient.execute(get,ctx); 
```

如果你想在请求之间保留 cookie，你必须为每个请求重用`cookieStore`和`ctx`。

此外，您可以阅读您的`cookieStore`内容以查看里面的内容：

```
List<Cookie> cookies = cookieStore.getCookies();
if( !cookies.isEmpty() ){
    for (Cookie cookie : cookies){
        String cookieString = cookie.getName() + " : " + cookie.getValue();
        Log.info(TAG, cookieString);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T08:09:08.240

Your cookie is passed as part of the headers in the HTTP reply (just like in your POST) if you want to play with the headers directly.

But like the other poster says, how to deal with cookies (properly) is in the example he has posted, and it will ultimately help you to use the API properly, even though it may be a pain to learn how it works the first time around :-)

# sql - SQL 主题标签正则表达式到表

> ID：10400696
> 
> 赞同：0
> 
> 时间：2012-05-01T16:17:58.413
> 
> 标签：sql, regex, postgresql, tokenize

我有这张桌子：

```
p_id        name      skills
1         Sam       #IT #communication #administration
2         Alex      #French #Trainer 
```

我想要一个 sql 查询来输出这个

```
 ID     p_fid   skill
   1      1       IT
   2      1       communication
   3      1       administration 
   4      2       French
   5      2       Trainer 
```

使用 PostgreSQL

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T17:34:29.047

如果您可以将 MS SQL Server 用作 RDBMS，并且该`skills`列只包含主题标签和单个空格，则可以将该`skills`列转换为 XML 字符串，然后使用 SQL Server 的内置 XML 操作函数将此字符串拆分为单独的行。

这是适用于您在问题中指定的数据样本的方法。

```
create table people_skills
(
    p_id int identity(1, 1) primary key clustered,
    name nvarchar(200),
    skills nvarchar(1000)
)

go

insert into people_skills (name, skills) values ('Sam', '#IT #communication #administration')
insert into people_skills (name, skills) values ('Alex', '#French #Trainer')

go

select
    row_number() over (order by ps.p_id) as ID,
    ps.p_id as p_fid,
    cast(x.skill_node.query('text()') as nvarchar(100)) as skill
from
    (
        select
            *,
            -- Assuming that there are no leading and trailing spaces and that all hashtags are separated by single space.
            (cast('<skills>' + (replace(replace(skills, '#', '<skill>'), ' ', '</skill>')) + '</skill></skills>' as xml)) skills_xml
        from
            people_skills
    ) ps
cross apply
    ps.skills_xml.nodes('/skills/skill') as x(skill_node) 
```

如果`skills`列可以包含除主题标签和空格之外的其他信息，那么您可能需要一种`skills`比我上面使用的更“智能”的算法来转换为 XML。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T11:54:54.467

像这样的东西：

```
CREATE TABLE testbed (p_id int4,name varchar(50),skills text);
INSERT INTO testbed VALUES
    (1,'Sam','#IT #communication #administration'),
    (2,'Alex','#French #Trainer');

SELECT row_number() OVER () AS id,
       p_fid, skill
  FROM (SELECT
        p_id AS p_fid,
        regexp_split_to_table(
             regexp_replace(skills, '^#', ''),
             '[ ]+#') AS skill FROM testbed) AS s; 
```

请查看[Window](http://www.postgresql.org/docs/current/interactive/tutorial-window.html)、 [String 操作](http://www.postgresql.org/docs/current/interactive/functions-string.html#FUNCTIONS-STRING-OTHER)和[Array](http://www.postgresql.org/docs/current/interactive/functions-array.html#ARRAY-FUNCTIONS-TABLE)函数的文档。

如果您确实需要控制技能的位置，则需要更复杂的查询：

```
WITH arrays AS (
    SELECT p_id,
           regexp_split_to_array(regexp_replace(skills, '^#', ''), '[ ]+#') arr
      FROM testbed
), series AS (
    SELECT p_id, generate_series(1, array_upper(arr, 1)) i
      FROM arrays
)
SELECT row_number() OVER (ORDER BY a.p_id, s.i) AS id,
       a.p_id AS p_fid,
       a.arr[s.i] AS skill
  FROM arrays a
  JOIN series s ON a.p_id = s.p_id
 ORDER BY a.p_id, s.i; 
```

# jquery - jQuery选择器返回html元素

> ID：10400699
> 
> 赞同：1
> 
> 时间：2012-05-01T16:18:15.537
> 
> 标签：jquery

我正在尝试遍历元素集合，尝试定位特定元素并将类应用于该元素。问题是，即使选择器返回一个对象集合，并且确实输入了应用该类的条件，但在查看源时该类并未应用。

这是功能：

```
function HighlightNav() {

$('.quick-launch-nav').css('visibility', 'visible');
var navitems = $('a.topnav-item[href]');
$(navitems).each(function () {
    var item = this;
    var linkUrl = item.href;
    var webUrl = IPC_siteUrl + IPC_webUrl;

    if (webUrl.match('^' + linkUrl)) {
        $(item).addClass('topnavselected');
        var parent = $(item).parent('.topnav-item');
        $(parent).addClass('topnavselected');
    }
});
} 
```

当我尝试通过查看内部 html 来调试它时，它返回一个 javascript 函数，而不是我所期望的。

我在这里做错了吗？

这是标记。仅供参考，它的 SharePoint 太丑了。

```
<td onmouseover="Menu_HoverStatic(this)" onmouseout="Menu_Unhover(this)" onkeyup="Menu_Key(this)" id="zz1_TopNavigationMenun0">
    <table class="topnav-item zz1_TopNavigationMenu_4" cellpadding="0" cellspacing="0" border="0" width="100%">
        <tr>
            <td style="white-space:nowrap;">
                <a class="zz1_TopNavigationMenu_1 topnav-item zz1_TopNavigationMenu_3"
                 href="http://webapp/en/about" 
                 accesskey="1" style="border-style:none;font-size:1em;">About</a>
            </td>
        </tr>
    </table>
</td> 
```

当我尝试做 $(item).html.toString() 这就是我得到的：

```
function(a){return f.access(this,function(a){var c=this[0]||{},d=0,e=this.length;if(a===b)return c.nodeType===1?c.innerHTML.replace(W,""):null;if(typeof a=="string"&&!ba.test(a)&&(f.support.leadingWhitespace||!X.test(a))&&!bg[(Z.exec(a)||["",""])[1].toLowerCase()]){a=a.replace(Y,"<$1></$2>");try{for(;d<e;d++)c=this[d]||{},c.nodeType===1&&(f.cleanData(c.getElementsByTagName("*")),c.innerHTML=a);c=0}catch(g){}}c&&this.empty().append(a)},null,a,arguments.length)}" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T16:34:53.227

按照您的 JavaScript 代码和 HTML 标记，问题似乎出在这一行：

```
var parent = $(item).parent('.topnav-item'); 
```

选择器`.topnav-item`应该选择具有类名的父节点`topnav-item`。但是，每个`a`项目的父项目是`td`没有此类的。

因此，如果您需要向节点添加`topnavselected`类，`table`则可以使用：

```
var parent = $(item).parentsUntil('.topnav-item').parent(); 
```

因此，最终代码应如下所示：

```
function HighlightNav() {
    $('.quick-launch-nav').css('visibility', 'visible');
    $('a.topnav-item[href]').each(function() {
        var item = $(this);
        var linkUrl = this.href;
        var webUrl = IPC_siteUrl + IPC_webUrl;

        if (webUrl.match('^' + linkUrl)) {
            item.addClass('topnavselected');
            var parent = item.parentsUntil('.topnav-item').parent();
            parent.addClass('topnavselected');
        }
    });
}​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T16:22:38.680

`item`将是`each`. 如果你想要一个 jQuery 对象，它看起来像你做的那样：

`$(item)`会给你每个里面的

# c++-amp - 来自多个 parallel_for_each 调用的 lambda 的执行顺序

> ID：10400702
> 
> 赞同：1
> 
> 时间：2012-05-01T16:18:29.587
> 
> 标签：c++-amp

假设我有`parallel_for_each`连续两次调用的 C++ AMP 代码。第一次调用的所有 lambdas 会在第二次调用的 lambdas 开始之前完成吗？

一般来说，对 lambdas 的执行顺序有什么保证吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T23:49:08.960

简短回答：不，lambda 通常不会完成。

更长的答案：parallel_for_each 将请求排队到 GPU，然后您的 CPU 线程继续到第二个 parallel_for_each 并将其排队，然后您的 CPU 线程继续执行其他 CPU 代码。同时，以非确定性的方式，计算将在您将它们排队的加速器上执行（如果在默认加速器上，第一个计算将执行，然后第二个计算将执行）。在计算执行之间，或者甚至在两次计算之后，如果在任何时候您尝试访问任何计算的结果，那么 CPU 线程将在等待结果被复制回来时阻塞（如果有必要等待执行完成）。

如果您只想等待计算完成（不触发返回副本），请在Accelerator_view 上调用wait。

顺便说一句，您不必管理不同的 parallel_for_each 调用之间的数据依赖关系。底层运行时为您执行此操作。因此，可以在后续的 parallel_for_each 调用中使用相同的 array_View，并且数据将为第二个调用做好准备，而无需返回主机 CPU。

如果您仍然不清楚，请分享复制代码，以便我们更具体。

要了解有关 C++ AMP 的更多信息，请从此处开始：http: [//blogs.msdn.com/b/nativeconcurrency/archive/2011/09/13/c-amp-in-a-nutshell.aspx](http://blogs.msdn.com/b/nativeconcurrency/archive/2011/09/13/c-amp-in-a-nutshell.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T16:22:26.180

您可以使用并发可视化工具自己回答这个问题。如果您使用的是队列视图，则两个 pfe 都可能认为自己已完成（它们不会阻塞，它们会返回），而代码尚未在 GPU 上运行。如果您想确保第一个已经完成，请以某种方式使用其结果（例如将数组复制回 CPU 或使用 array_view），这将使代码开始在加速器上运行。

如果您在发送第二个 pfe 之前不触摸/询问第一个 pfe 的结果，您为什么要保证运行顺序？如果您确实触摸或询问结果，那就是控制事情执行方式的因素。

# heroku - Heroku - 由 Schedular (CRON) 运行的任务

> ID：10400703
> 
> 赞同：0
> 
> 时间：2012-05-01T16:18:34.287
> 
> 标签：heroku, cron, request

我需要每天晚上通过 Schedular (CRON) 运行任务。此任务可能需要大约 10 分钟（有时更少，有时更多）。

在 Heroku 上，为每个任务/请求设置了 30 秒的限制。所以我的问题是 - 我的任务会正确完成还是会在 30 秒后被取消（因为“通常”请求已完成，只有在 30 秒后才会在浏览器中显示错误，但我不确定，在克朗）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T16:42:47.687

该作业应该完成，因为您没有使用 HTTP 请求作为代理来启动任务。

考虑为此在工作人员上使用后台作业。然后，您的定期流程只需启动工作人员，并且该流程花费多长时间都没有关系。

# javascript - 应用于单个圆的 RGraph 渐变

> ID：10400704
> 
> 赞同：0
> 
> 时间：2012-05-01T16:18:35.950
> 
> 标签：javascript, jit, radial-gradients

我正在使用 RGraph，我需要创建带有渐变的圆圈，因此它们看起来是 3D 球体。我创建了一个名为 blob 的新节点类型，并实现了如下代码。但是，渐变应用于整个画布。不知道我能不能解释一下，但是有没有人可以提供帮助？

```
$jit.RGraph.Plot.NodeTypes.implement({
'blob': {
    render: function (node, canvas) {
        var pos = node.pos.getc(true),
        dim = node.getData("dim");

        // not sure about this code
        var ctx = canvas.getCtx();
        var radgrad = ctx.createRadialGradient(0, 0, dim, 0, 0, node.getPos().rho);
        radgrad.addColorStop(0, '#A7D30C');
        radgrad.addColorStop(0.9, '#019F62');
        radgrad.addColorStop(1, 'rgba(1,159,98,0)');
        ctx.fillStyle = radgrad;

        this.nodeHelper.circle.render("fill", pos, dim, canvas)
    },
    contains: function (node, canvas) {
        var pos = node.pos.getc(true),
        dim = node.getData("dim");
        return this.nodeHelper.circle.contains(pos, canvas, dim)
    }
}

}); 
```

非常感谢

伊万

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T19:26:56.510

我在这里得到了答案： [Google Group](http://groups.google.com/group/javascript-information-visualization-toolkit/browse_thread/thread/56db3461e71c678c)

基本上，radgrad 应该是这样的：

```
var radgrad = ctx.createRadialGradient(pos.x, pos.y, radius+20, pos.x-radius, pos.y,radius); 
```

# ios - 如何在视图之间实现滑动/滑动动画？

> ID：10400709
> 
> 赞同：27
> 
> 时间：2012-05-01T16:18:45.517
> 
> 标签：ios, swipe

我有几个视图，我想在 iOS 程序中滑动它们。现在，我使用模态样式在它们之间滑动，并带有交叉溶解动画。但是，我想要像您在主屏幕等上看到的那样滑动/滑动动画。我不知道如何编写这样的过渡，并且动画样式不是可用的模态过渡样式。谁能给我一个代码示例？它不需要是模态模型或任何东西，我只是发现最简单。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-05-02T04:27:00.910

从 iOS 7 开始，如果您想为两个视图控制器之间的过渡设置动画，您将使用自定义过渡，如 WWDC 2013 视频[Custom Transitions Using View Controllers](https://developer.apple.com/videos/wwdc/2013/?id=218)中所述。例如，要自定义新视图控制器的显示，您可以：

1.  目标视图控制器将为演示动画指定`self.modalPresentationStyle`and ：`transitioningDelegate`

    ```
    - (instancetype)initWithCoder:(NSCoder *)coder {
        self = [super initWithCoder:coder];
        if (self) {
            self.modalPresentationStyle = UIModalPresentationCustom;
            self.transitioningDelegate = self;
        }
        return self;
    } 
    ```

2.  这个委托（在这个例子中，视图控制器本身）将符合`UIViewControllerTransitioningDelegate`并实现：

    ```
    - (id <UIViewControllerAnimatedTransitioning>)animationControllerForPresentedController:(UIViewController *)presented
                                                                       presentingController:(UIViewController *)presenting sourceController:(UIViewController *)source {
        return [[PresentAnimator alloc] init];
    }

    // in iOS 8 and later, you'd also specify a presentation controller

    - (UIPresentationController *)presentationControllerForPresentedViewController:(UIViewController *)presented presentingViewController:(UIViewController *)presenting sourceViewController:(UIViewController *)source {
        return [[PresentationController alloc] initWithPresentedViewController:presented presentingViewController:presenting];
    } 
    ```

3.  您将实现一个动画器来执行所需的动画：

    ```
    @interface PresentAnimator : NSObject <UIViewControllerAnimatedTransitioning>

    @end

    @implementation PresentAnimator

    - (NSTimeInterval)transitionDuration:(id <UIViewControllerContextTransitioning>)transitionContext {
        return 0.5;
    }

    // do whatever animation you want below

    - (void)animateTransition:(id<UIViewControllerContextTransitioning>)transitionContext {
        UIViewController* toViewController   = [transitionContext viewControllerForKey:UITransitionContextToViewControllerKey];
        UIViewController* fromViewController = [transitionContext viewControllerForKey:UITransitionContextFromViewControllerKey];

        [[transitionContext containerView] addSubview:toViewController.view];
        CGFloat width = fromViewController.view.frame.size.width;
        CGRect originalFrame = fromViewController.view.frame;
        CGRect rightFrame = originalFrame; rightFrame.origin.x += width;
        CGRect leftFrame  = originalFrame; leftFrame.origin.x  -= width / 2.0;
        toViewController.view.frame = rightFrame;

        toViewController.view.layer.shadowColor = [[UIColor blackColor] CGColor];
        toViewController.view.layer.shadowRadius = 10.0;
        toViewController.view.layer.shadowOpacity = 0.5;

        [UIView animateWithDuration:[self transitionDuration:transitionContext] animations:^{
            fromViewController.view.frame = leftFrame;
            toViewController.view.frame = originalFrame;
            toViewController.view.layer.shadowOpacity = 0.5;
        } completion:^(BOOL finished) {
            [transitionContext completeTransition:![transitionContext transitionWasCancelled]];
        }];
    }

    @end 
    ```

4.  您还将实现一个表示控制器，负责为您清理视图层次结构。在这种情况下，由于我们完全覆盖了呈现视图，因此我们可以在转换完成后将其从层次结构中移除：

    ```
    @interface PresentationController: UIPresentationController
    @end

    @implementation PresentationController

    - (BOOL)shouldRemovePresentersView {
        return true;
    }

    @end 
    ```

5.  或者，如果您希望此手势具有交互性，您还可以：

    *   创建一个交互控制器（通常是一个`UIPercentDrivenInteractiveTransition`）；

    *   让你`UIViewControllerAnimatedTransitioning`也实现`interactionControllerForPresentation`，这显然会返回前面提到的交互控制器；

    *   有一个手势（或你有什么）来更新`interactionController`

这在前面提到的[使用视图控制器的自定义转换](https://developer.apple.com/videos/wwdc/2013/?id=218)中都有描述。

自定义导航控制器推送/弹出的示例，请参阅[导航控制器自定义过渡动画](https://stackoverflow.com/questions/26569488/navigation-controller-custom-transition-animation/26569703#26569703)

* * *

下面，请找到我的原始答案的副本，它早于自定义转换。

* * *

@sooper 的回答是正确的， CATransition 可以产生您正在寻找的效果。

但是，顺便说一句，如果你的背景不是白色的，则`kCATransitionPush`在`CATransition`过渡结束时会出现奇怪的淡入和淡出，这可能会分散注意力（尤其是在图像之间导航时，它会产生轻微的闪烁效果） . 如果你遇到这种情况，我发现这个简单的过渡非常优雅：你可以准备你的“下一个视图”到屏幕右侧，然后动画当前视图向左移动，同时你为下一个视图设置动画以移动到当前视图所在的位置。请注意，在我的示例中，我在单个视图控制器中对进出主视图的子视图进行动画处理，但您可能明白了：

```
float width = self.view.frame.size.width;
float height = self.view.frame.size.height;

// my nextView hasn't been added to the main view yet, so set the frame to be off-screen

[nextView setFrame:CGRectMake(width, 0.0, width, height)];

// then add it to the main view

[self.view addSubview:nextView];

// now animate moving the current view off to the left while the next view is moved into place

[UIView animateWithDuration:0.33f 
                      delay:0.0f 
                    options:UIViewAnimationOptionCurveEaseInOut | UIViewAnimationOptionAllowUserInteraction
                 animations:^{
                     [nextView setFrame:currView.frame];
                     [currView setFrame:CGRectMake(-width, 0.0, width, height)];
                 }
                 completion:^(BOOL finished){
                     // do whatever post processing you want (such as resetting what is "current" and what is "next")
                 }]; 
```

显然，您必须根据如何设置所有控件来调整它，但这会产生一个非常简单的过渡，没有褪色或类似的东西，只是一个很好的平滑过渡。

一个警告：首先，这个例子和`CATransition`例子都不像SpringBoard主屏幕动画（你谈到的），它是连续的（即如果你在滑动的一半，你可以停止并返回或任何）。这些转变一旦开始，就会发生。如果您需要实时交互，也可以这样做，但情况不同。

**更新：**

如果您想使用跟踪用户手指的连续手势，您可以使用`UIPanGestureRecognizer`而不是`UISwipeGestureRecognizer`，我认为`animateWithDuration`比`CATransition`这种情况更好。我修改了 my`handlePanGesture`以更改`frame`坐标以与用户的手势相协调，然后我修改了上面的代码以在用户放手时完成动画。效果很好。我不认为你可以`CATransition`很容易地做到这一点。

例如，您可以在控制器的主视图上创建一个手势处理程序：

```
[self.view addGestureRecognizer:[[UIPanGestureRecognizer alloc] initWithTarget:self action:@selector(handlePan:)]]; 
```

处理程序可能看起来像：

```
- (void)handlePan:(UIPanGestureRecognizer *)gesture
{
    // transform the three views by the amount of the x translation

    CGPoint translate = [gesture translationInView:gesture.view];
    translate.y = 0.0; // I'm just doing horizontal scrolling

    prevView.frame = [self frameForPreviousViewWithTranslate:translate];
    currView.frame = [self frameForCurrentViewWithTranslate:translate];
    nextView.frame = [self frameForNextViewWithTranslate:translate];

    // if we're done with gesture, animate frames to new locations

    if (gesture.state == UIGestureRecognizerStateCancelled ||
        gesture.state == UIGestureRecognizerStateEnded ||
        gesture.state == UIGestureRecognizerStateFailed)
    {
        // figure out if we've moved (or flicked) more than 50% the way across

        CGPoint velocity = [gesture velocityInView:gesture.view];
        if (translate.x > 0.0 && (translate.x + velocity.x * 0.25) > (gesture.view.bounds.size.width / 2.0) && prevView)
        {
            // moving right (and/or flicked right)

            [UIView animateWithDuration:0.25
                                  delay:0.0
                                options:UIViewAnimationOptionCurveEaseOut
                             animations:^{
                                 prevView.frame = [self frameForCurrentViewWithTranslate:CGPointZero];
                                 currView.frame = [self frameForNextViewWithTranslate:CGPointZero];
                             }
                             completion:^(BOOL finished) {
                                 // do whatever you want upon completion to reflect that everything has slid to the right

                                 // this redefines "next" to be the old "current",
                                 // "current" to be the old "previous", and recycles
                                 // the old "next" to be the new "previous" (you'd presumably.
                                 // want to update the content for the new "previous" to reflect whatever should be there

                                 UIView *tempView = nextView;
                                 nextView = currView;
                                 currView = prevView;
                                 prevView = tempView;
                                 prevView.frame = [self frameForPreviousViewWithTranslate:CGPointZero];
                             }];
        }
        else if (translate.x < 0.0 && (translate.x + velocity.x * 0.25) < -(gesture.view.frame.size.width / 2.0) && nextView)
        {
            // moving left (and/or flicked left)

            [UIView animateWithDuration:0.25
                                  delay:0.0
                                options:UIViewAnimationOptionCurveEaseOut
                             animations:^{
                                 nextView.frame = [self frameForCurrentViewWithTranslate:CGPointZero];
                                 currView.frame = [self frameForPreviousViewWithTranslate:CGPointZero];
                             }
                             completion:^(BOOL finished) {
                                 // do whatever you want upon completion to reflect that everything has slid to the left

                                 // this redefines "previous" to be the old "current",
                                 // "current" to be the old "next", and recycles
                                 // the old "previous" to be the new "next". (You'd presumably.
                                 // want to update the content for the new "next" to reflect whatever should be there

                                 UIView *tempView = prevView;
                                 prevView = currView;
                                 currView = nextView;
                                 nextView = tempView;
                                 nextView.frame = [self frameForNextViewWithTranslate:CGPointZero];
                             }];
        }
        else
        {
            // return to original location

            [UIView animateWithDuration:0.25
                                  delay:0.0
                                options:UIViewAnimationOptionCurveEaseOut
                             animations:^{
                                 prevView.frame = [self frameForPreviousViewWithTranslate:CGPointZero];
                                 currView.frame = [self frameForCurrentViewWithTranslate:CGPointZero];
                                 nextView.frame = [self frameForNextViewWithTranslate:CGPointZero];
                             }
                             completion:NULL];
        }
    }
} 
```

`frame`这使用了您可能为所需的 UX 定义的这些简单方法：

```
- (CGRect)frameForPreviousViewWithTranslate:(CGPoint)translate
{
    return CGRectMake(-self.view.bounds.size.width + translate.x, translate.y, self.view.bounds.size.width, self.view.bounds.size.height);
}

- (CGRect)frameForCurrentViewWithTranslate:(CGPoint)translate
{
    return CGRectMake(translate.x, translate.y, self.view.bounds.size.width, self.view.bounds.size.height);
}

- (CGRect)frameForNextViewWithTranslate:(CGPoint)translate
{
    return CGRectMake(self.view.bounds.size.width + translate.x, translate.y, self.view.bounds.size.width, self.view.bounds.size.height);
} 
```

您的特定实现无疑会有所不同，但希望这能说明这个想法。

在说明了所有这些（补充和澄清这个旧答案）之后，我应该指出我不再使用这种技术了。如今，我通常使用 a `UIScrollView`（打开“分页”）或（在 iOS 6 中） a `UIPageViewController`。这使您无需编写此类手势处理程序（并享受滚动条、弹跳等额外功能）。在`UIScrollView`实现中，我只是响应`scrollViewDidScroll`事件以确保我正在延迟加载必要的子视图。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-01T16:52:52.017

You could create a `CATransition` animation. Here's an example of how you can slide a second view (from left) into the screen whilst pushing the current view out:

```
UIView *theParentView = [self.view superview];

CATransition *animation = [CATransition animation];
[animation setDuration:0.3];
[animation setType:kCATransitionPush];
[animation setSubtype:kCATransitionFromLeft];
[animation setTimingFunction:[CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseInEaseOut]];

[theParentView addSubview:yourSecondViewController.view];
[self.view removeFromSuperview];

[[theParentView layer] addAnimation:animation forKey:@"showSecondViewController"]; 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-07-31T20:05:03.147

如果您希望在切换页面时获得与跳板相同的页面滚动/滑动效果，那么为什么不直接使用`UIScrollView`?

```
CGFloat width = 320;
CGFloat height = 400;
NSInteger pages = 3;

UIScrollView *scrollView = [[UIScrollView alloc] initWithFrame:CGRectMake(0,0,width,height)];
scrollView.contentSize = CGSizeMake(width*pages, height);
scrollView.pagingEnabled = YES; 
```

然后用`UIPageControl`得到这些点。:)

# android - 从对话框设置壁纸

> ID：10400710
> 
> 赞同：0
> 
> 时间：2012-05-01T16:18:51.147
> 
> 标签：android, wallpaper

我做了一个设置壁纸的应用程序，效果很好！问题是我将清单更改为：

```
android:theme="@android:style/Theme.Dialog" 
```

现在应用程序更改了壁纸，但主屏幕没有刷新。如果我在手机上滑动手指并刷新主屏幕，则壁纸会刷新并出现我的图片。
在模拟器中它工作正常。
我的手机是三星 Galaxy SCL。
我使用的代码是这个：

```
WallpaperManager wpm;
wpm = WallpaperManager.getInstance(getApplicationContext());
Bitmap bm1, bm2;       
bm1 = BitmapFactory.decodeFile(--file path .png--);
bm2 = Bitmap.createScaledBitmap(bmFondo, 960, 800, false);
wpm.setBitmap(bm2); 
```

如果我不使用 Theme.Dialog，该应用程序运行良好

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T16:27:48.857

尝试重绘壁纸。或者尝试创建自己的主题，看起来像对话框主题。

# java - 一个函数更新的Hashmap元素不能被同一个java文件中的其他函数访问

> ID：10400714
> 
> 赞同：0
> 
> 时间：2012-05-01T16:19:12.503
> 
> 标签：java

下面的代码调用 ReadXMLFile 构造函数

```
ReadXMLFile r=new ReadXMLFile("small.xml");
HashMap r=r.getrcset(); 
```

我正在使用将由 ReadXMLFile 构造函数调用的 update fn 更新 sathiya 哈希图。它工作正常，即（元素被添加到 sathiya hashmap）内部更新，因为我可以打印它。但是 getrcset 文件中的 sathiya 哈希图是空的。当我尝试打印它时，我得到 0: {} 1:{} 。想不出它是空的

```
package iws.falcon.matcher.pbm;
import javax.xml.parsers.SAXParser;
import javax.xml.parsers.SAXParserFactory;
import org.xml.sax.Attributes;
import org.xml.sax.SAXException;
import org.xml.sax.helpers.DefaultHandler;
import java.util.HashMap;
import java.util.Iterator;
import java.util.*; 

public class ReadXMLFile {

public HashMap sathiya = new HashMap();
String filepath=null;
int cid=0;
int f=0;
HashMap rc=null;

public HashMap getrcset()
{
System.out.println("inside getsathiya"+sathiya.size());
Set set = sathiya.entrySet();
// Get an iterator
Iterator i = set.iterator();
// Display elements
while(i.hasNext()) {
Map.Entry me = (Map.Entry)i.next();
System.out.print(me.getKey() + ": ");
System.out.println(me.getValue());
}
System.out.println("god"+sathiya);
return sathiya;
}

public void update(HashMap god)
{
sathiya.put(cid,god);
for (int i=0,n=sathiya.size();i<n;i++)
System.out.println("inside update fn"+sathiya.get(i));
cid++;
}

   public ReadXMLFile (String fp) 
    {
    filepath=fp;
     try {
    SAXParserFactory factory = SAXParserFactory.newInstance();
    SAXParser saxParser = factory.newSAXParser();
    DefaultHandler handler = new DefaultHandler() {
    boolean name = false;
    boolean cluster=false;

    public void startElement(String uri, String localName,String qName, 
                Attributes attributes) throws SAXException {

        if (qName.equalsIgnoreCase("CLUSTER")) 
        {rc=new HashMap();

        }`enter code here`

        if (qName.equalsIgnoreCase("URI")) {
            name = true;
        }

    }

    public void endElement(String uri, String localName,
        String qName) throws SAXException {

        if (qName.equalsIgnoreCase("CLUSTER")) 
            {
            update(rc);
            rc.clear();
            }

}

    public void characters(char ch[], int start, int length) throws SAXException {
        if (name) 
        {
            String e= new String(ch, start, length);
            rc.put(e,e);
            name = false;
        }

    }

     };

       saxParser.parse("small.xml", handler);

     } catch (Exception e) {
       e.printStackTrace();
     }

   }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T16:45:33.927

虽然我对问题的标题和你的这行完全感到困惑：

> 但是getrcset文件中的rcset不为空？？

如果你的问题是为什么是`sathiya`空的？原因是您在更新后在 rc 上调用 clear`sathiya`

```
if (qName.equalsIgnoreCase("CLUSTER")) {
    update(rc);
    rc.clear();// This line is clearing the content of rc
} 
```

您的程序行为类似于这段代码：

```
Map<Integer, Map<String, String>> mainCont = new HashMap<Integer, Map<String,String>>();

Map<String, String> content = new HashMap<String, String>();

content.put("1", "1");

mainCont.put(1, content);

System.out.println(mainCont);

content.clear();

System.out.println(mainCont); 
```

在上面的代码中，mainCont 持有对内容的引用，当内容被清除时，mainCont 将显示内容的更新值，因为它引用了该对象。

但`content.clear();`如果你成功了`content = new HashMap<String, String>();`

您将看到 mainCont 具有所有值，因为现在 content 指向不同的对象。

回到你的代码：

代替 ：

```
if (qName.equalsIgnoreCase("CLUSTER")) {
    update(rc);
    rc.clear();
} 
```

做这个：

```
if (qName.equalsIgnoreCase("CLUSTER")) {
    update(rc);
    rc = new HashMap();
} 
```

题外话：

考虑使用泛型而不是使用普通的非安全集合。

# c++ - C++ 中的状态标志

> ID：10400716
> 
> 赞同：0
> 
> 时间：2012-05-01T16:19:27.860
> 
> 标签：c++, constants

我总是创建一个用 Java 调用的类`Constants`来存储将在应用程序中使用的常量值。

*对于应用程序的所有类别*

```
class Constants {

    public static final int GOOD_RES = 1;
    public static final int BAD_RES = 0;
    public static final int FILE_NOT_READ = 10;
    // To be continued
} 
```

*或单个班级*

```
class SomeClass {

    private static final int GOOD_RES = 1;
    private static final int BAD_RES = 0;
    private static final int FILE_NOT_READ = 10;
    // To be continued
} 
```

如何在 C++ 中做同样的事情？我可以在带有声明的头文件中创建一个类，并将定义放在 CPP 文件中。例如。

头文件。

```
class const_values {
    const static int GOOD_STATE = 1;
    const static int BAD_STATE = 2;
    const static string s;
} 
```

文件

```
string const_values::s = "lorem ipsum"; 
```

可以吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-01T16:27:08.483

为此使用命名空间：

常量.h：

```
#include <string>
namespace Constants
{
    const int GOOD_STATE = 1;
    const int BAD_STATE = 2;
    const std::string str("test");
} 
```

主.cpp：

```
#include <iostream>
#include "constants.h"
int main(int argc, char** argv)
{   
    std::cout << Constants::GOOD_STATE << " " << Constants::str << std::endl;
} 
```

输出：1 次测试

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-01T16:27:27.953

仅使用静态常量的类是合法的 C++，但我建议通常有更好的方法来实现您的目标。

首先是命名空间的使用：

```
namespace values
{
    const static int GOOD_STATE = 1;
    const static int BAD_STATE = 2;
    const static string s;  // you can never make this anything but empty, by the way
}; 
```

如果由于某种原因你必须使用一个类，另一种（可能不是更好的）方法是使用`enum`s：

```
class values
{
public:
  enum {GOOD_STATE = 1, BAD_STATE = 2};
}; 
```

使用命名空间的一个好处是您可以使该命名空间不命名。这具有使命名空间内声明的名称在全局范围内可用的效果，但仅在定义它们的翻译单元中可用。因此，其他翻译单元之间不会发生冲突，并且可能不太需要命名空间的愚蠢名称。

# c# - 将字符串数组传递给 LINQ 存储过程

> ID：10400719
> 
> 赞同：1
> 
> 时间：2012-05-01T16:19:35.517
> 
> 标签：c#, linq, stored-procedures, parameters

有人可以告诉我如何处理将字符串数组传递给我的 LINQ 存储过程吗？

storedProc 是通过将现有存储过程拖到 dbml 页面上来创建的。storedProc 接受我确定 in 值的 3 个（或任意数量）参数`GetStringParams()`。

错误：`No overload for storedProc takes 1 argument`

```
DataClassDataContext db = new DataClassDataContext();
//storedProc takes 3 params
gridview.DataSource = db.storedProc(GetStringParams());
gridview.DataBind();

private string[] GetStringParams()
{
    string[] params = new string[3];    
    //Perform some logic here to determine which params to pass
    if (somethingIsTrue)
        params = new string[] { "param1", "param2", "param3" };
    else if (somethingElseIsTrue)
        params = new string[] { "param1", "param2", "" };
    else
        params = new string[] { "", "", "" };
    return params;
} 
```

提前致谢。我搜索了这个问题，但找不到我正在寻找的确切内容。最好不必修改存储过程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T16:26:29.127

```
DataClassDataContext db = new DataClassDataContext();
//storedProc takes 3 params
string[] param = GetStringParams();
gridview.DataSource = db.storedProc(param[0], param[1], param[2]);
gridview.DataBind();

private string[] GetStringParams()
{
    //Perform some logic here to determine which params to pass
    if (somethingIsTrue)
        return new string[] { "param1", "param2", "param3" };
    else if (somethingElseIsTrue)
        return new string[] { "param1", "param2", "" };
    else
        return new string[] { "", "", "" };
} 
```

除非方法要求提供 params 数组，否则您不能将数组传递给多参数方法。

# matlab - MATLAB 编辑器中的自动换行

> ID：10400720
> 
> 赞同：10
> 
> 时间：2012-05-01T16:19:49.833
> 
> 标签：matlab, ide, editor, word-wrap

如何在 MATLAB R2011b 编辑器中对长行脚本和函数进行自动换行？

我不是说使用 Ctrl+J 来换行注释，而是在几行上显示一条长线，每一行（除了最后一行）都是编辑器框架的宽度，就像在大多数文本编辑器中一样，所以我不需要水平滚动; 效果是纯粹的视觉效果，它在文件中保留为单行。

我在任何菜单、工具栏或首选项对话框中都找不到设置。

虽然我可以使用“...”将行拆分为多行，但我不想这样做。我想将其保留为文件中的一行，只需将其显示为包装，如 Windows 记事本中的格式 > 自动换行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T17:25:40.693

这样做的方法是使用三个点`...`例如：

```
Hc_frame_1 = uicontrol(gcf, ...
'Style', 'frame',...
'Units', 'pixels',...
'Position', [25 250 200 230]); 
```

这三个点告诉 MATLAB 在下一行继续执行命令。没有它们，MATLAB 会认为该命令不完整。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-09-09T19:53:51.717

无法在编辑器中换行一般文本。

它可以设置为这样做，但仅用于评论。

# android - Android 联系人操作

> ID：10400726
> 
> 赞同：0
> 
> 时间：2012-05-01T16:20:28.510
> 
> 标签：android, sqlite, orm, contact, accountmanager

我正在 Android 上开发一个 IM 应用程序。目的是具有多帐户和协议的兼容性。我正在寻找一种在 Android 上获得最佳联系人状态的方法。我有一个支持的帐户类型列表。我有一个函数需要很长时间（`contact_id`），并且必须返回最好的`Account`+最好的联系方式（例如`somebody@jabber.org`）。

我已经查看了文档，并且我已经知道 SQL。但是在那一点上文档有点混乱，我不知道如何获得向联系人发送消息的最佳方式。这是我正在尝试做的一些代码：

```
public static Account best(Context context, long contact)
{
    final ContentResolver resolver = context.getContentResolver();
    final Cursor rawContacts = resolver.query(RawContacts.CONTENT_URI,
              new String[]{RawContacts._ID},
              RawContacts.CONTACT_ID + "=? AND " + registeredProtocolsSelection(),
              new String[]{String.valueOf(contact)}, null);
    while(rawContacts.moveToNext())
    {
        final long rawContactId = rawContacts.getLong(0);
        Uri rawContactUri = ContentUris.withAppendedId(RawContacts.CONTENT_URI, rawContactId);
        Uri entityUri = Uri.withAppendedPath(rawContactUri, Entity.CONTENT_DIRECTORY);
        Cursor rawContact = resolver.query(entityUri,
                  new String[]{RawContacts.SOURCE_ID, Entity.DATA_ID, Entity.MIMETYPE, Entity.DATA1},
                  null, null, null);
    }
    return null;
} 
```

我可以选择对我的应用程序重要的所有 RawContact，但我不知道如何加入，也无法获得数据库的清晰架构。我不知道如何从那里访问 StatusUpdate。目标就像`ORDER BY presence`。

有没有简单的方法可以做到这一点？有没有办法通过 ORM 之类的东西像普通对象一样操作联系人？或者我们是否有一种机制可以在 Android 上轻松创建和管理我们自己的 IM 协议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T12:05:13.393

随着时间的推移，我找到了它。我们可以使用 ContentProvider.query(..., sort); 的最后一个参数；为给定的联系人首先拥有最佳的 RawContact Presence。对于那些仍然在这里搜索的人是代码

```
final Cursor cursor = contentResolver.query
(
    StatusUpdates.CONTENT_URI, 
    new String[]
    {
        StatusUpdates.PRESENCE,
        StatusUpdates.STATUS_LABEL,
        StatusUpdates.STATUS_RES_PACKAGE
    }, 
    Data.CONTACT_ID + "=? AND " + Data.MIMETYPE + "=?", 
    new String[]
    { 
        Long.toString(id), 
        CommonDataKinds.Im.CONTENT_ITEM_TYPE 
    },
    StatusUpdates.STATUS_TIMESTAMP + " DESC" // For last Or
    StatusUpdates.PRESENCE + " DESC" // For presence
);
if(cursor!=null && cursor.moveToFirst())
{
    presence = Presence.get(cursor.getLong(0));
    status = Utils.Contact.status(cursor.getInt(1), cursor.getString(2));
}
if(cursor!=null)
{
    cursor.close();
} 
```

您还可以将联系人表的预定义字段用于给定联系人的自动最佳状态。

# pdf - cfdocument 如何调整页脚高度？

> ID：10400728
> 
> 赞同：2
> 
> 时间：2012-05-01T16:20:31.550
> 
> 标签：pdf, coldfusion, coldfusion-9, cfdocument

如何在创建 PDF 的 cfdocument 中调整页脚的大小？

```
<cfdocument format="pdf">
    <cfdocumentitem type="header">
      My Header
    </cfdocumentitem>
    <cfdocumentitem type="footer">
      This text I want to be my footer but I want it to be much bigger. I have a lot of legalize and I need more room so it will be readable.
    </cfdocumentitem>
</cfdocument> 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T16:44:14.550

在`cfdocument`标签上，尝试使用`marginbottom`属性来调出内容区域的下边距。

# visual-studio-2008 - 是否可以从命令行运行 Visual Studio 转换向导？

> ID：10400729
> 
> 赞同：1
> 
> 时间：2012-05-01T16:20:36.017
> 
> 标签：visual-studio-2008, visual-c++, cygwin, visual-studio-2003, conversion-wizard

我目前正在从事一个从外部源接收数据的项目，我们从中接收数据的公司提供了一个带有各种 C 函数和结构的 SDK 来对数据进行编码和解码。SDK 是作为源提供的，我们必须自己编译。

为了让代码在 Windows 上与我们的软件一起工作，我想简单地使用`devenv {project file} /build`他们提供的项目文件来编译代码。但是要这样做，我首先需要将项目从 VS2003 升级到 VS2008，然后对构建配置（运行时类型等）进行一些小的调整。我已经测试了升级项目，进行调整然后编译它，它工作正常，但我想在 bash/Cygwin 中自动化它以供将来的 SDK 更新。

有什么方法可以从命令行运行 VS2008 转换向导，这样我就不必在每次更新 SDK 时手动升级项目，还是我永远注定要手动升级？

或者，有没有办法完全避免转换向导，只编译一个没有安装 VS2003 的 VS2003 项目？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T18:00:33.203

这[表明](http://sourceforge.net/projects/vspc/)微软不支持你所需要的。

> VSPC 是用于在不同版本的 Microsoft Visual Studio 的项目格式之间进行转换的控制台实用程序。目前该项目支持 VS 2002、2003、2005 和 2008。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-05T21:22:23.037

我还没有尝试过，但微软网站确实提供了这个解决方案：

**解决方案或项目的批量转换**

要自动转换许多解决方案或项目，您可以创建一个使用命令行升级工具的批处理文件。有关详细信息，请参阅[/Upgrade (devenv.exe)](http://msdn.microsoft.com/en-us/library/w15a82ay%28v=vs.90%29.aspx "/升级（devenv.exe）")。升级报告提供有关源代码控制解决方案或项目的信息，这些解决方案或项目由于其中的文件已检出而未转换。签入这些文件后，您可以再次运行批处理文件以转换这些解决方案或项目

我建议您访问链接以获取更多信息。

# regex - 在 Perl 中，如何使用多个正则表达式匹配跳过从 DBI 选择返回的某些行？

> ID：10400730
> 
> 赞同：0
> 
> 时间：2012-05-01T16:20:36.017
> 
> 标签：regex, perl

当我写出 a 时，[`HTML::Table`](https://metacpan.org/module/HTML%3a%3aTable)我想跳过某些行。这应该根据我从网页获得的一些用户参数来完成，并将它们编译为正则表达式。

参数是大写的`NOT_*`，带有诸如`cc08`邮政编码之类的值。

```
my $nameRegex =    ($NOT_NAME)  ? qr/$NOT_NAME/  : '';
my $rackRegex =    ($NOT_RACK)  ? qr/$NOT_RACK/  : '';
my $unitRegex =    ($NOT_UNIT)  ? qr/$NOT_UNIT/  : '';
my $addressRegex = ($NOT_ADDR)  ? qr/$NOT_ADDR/  : ''; 
my $townRegex  =   ($NOT_TOWN)  ? qr/$NOT_TOWN/  : '';
my $pcodeRegex =   ($NOT_PCODE) ? qr/$NOT_PCODE/ : ''; 
```

在while循环中（对于其他地方的SQL查询）我得到数据，我认为我正在做的是“除非你匹配其中任何一个”添加这行结果。

```
while ((my $id, my $name, my $rack, my $unit, my $town, my $address, my $pcode, my $lat, my $lon) = $select_sites->fetchrow_array()) {
        my $checkbox = "<input type='checkbox' name='FILTER_SITE' value='$id' $checked{$id} />";

        unless ($name =~ $nameRegex
            || $rack =~ $rackRegex
            || $unit =~ $unitRegex
            || $address =~ $addressRegex
            || $town =~ $townRegex 
            || $pcode =~ $pcodeRegex) {

            $rows++;
            $sitesResultSection->addRow($checkbox, $name, $rack, $unit, $town, $address, $pcode, $lat, $lon);
        } 
```

吐出正则表达式看起来像这样`$NOT_RACK = "cc08"`

```
 = qr//;
 (?-xism:cc08) = qr/cc08/;
  = qr//;
  = qr//; 
   = qr//;
  = qr//; 
```

但是问题是根本没有添加任何行，而“cc08”必须省略查询中的一个结果，并且必须显示所有其他结果。

我在 HTML 中这样做的原因是因为 SQL 查询中已经有其他过滤器（显着限制了结果集），并且根据用户输入使这些过滤器动态化将是一场噩梦。

**接受了答案，但是我还有一个问题：**

这就是我初始化那些 NOT_s 的方式，与我用于查询`REGEXP`条件的方式相同。因此，当用户输入“City rackname”时，它会在`City`

```
my $NOT_NAME = &useOrs(&trim($cgi->param('NOT_NAME')));
my $NOT_RACK = &useOrs(&trim($cgi->param('NOT_RACK')));
my $NOT_UNIT = &useOrs(&trim($cgi->param('NOT_UNIT')));
my $NOT_ADDR = &useOrs(&trim($cgi->param('NOT_ADDR')));
my $NOT_TOWN = &useOrs(&trim($cgi->param('NOT_TOWN')));
my $NOT_PCODE= &useOrs(&trim($cgi->param('NOT_PCODE')));

my $QUICK_SEARCH_SITES = &trim($cgi->param('QUICK_SEARCH_SITES'));
my $searchRegexp = ($QUICK_SEARCH_SITES) ? &useOrs($QUICK_SEARCH_SITES) : '.*';

sub useOrs {
    my $tmp = $_[0];
    $tmp =~ s/\s+/|/g;
    return $tmp;
} 
```

这是 SQL 查询的摘录`WHERE name REGEXP ? OR rack-id REGEXP ? OR [..]` 因此，通过这些技巧可以实现一些合理的灵活性，而无需训练将使用该工具的猴子。但是，仅使用`$var =~ /$NOT_VAR/`显然只会完全匹配，区分大小写等。为了实现 SQL 过滤器的松散性，而不是使用`&useOrs`我使用

```
sub useAny {
    my $tmp = $_[0];
    $tmp =~ s/\s/./g;
    return $tmp;
} 
```

而且最重要的是`$var =~ /.*$NOT_VAR.*/i`

我的印象是应该用 Perl 破解所以那里.. :) 仍然欢迎提出建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-01T16:42:41.757

从[perldoc perlop](http://perldoc.perl.org/perlop.html)：

> 空的图案`//`
> 
> 如果 PATTERN 计算结果为空字符串，则使用最后 *成功*匹配的正则表达式。在这种情况下，只有空模式上的“g”和“c”标志被接受；其他标志取自原始模式。如果之前没有匹配成功，这将（默默地）充当真正的空模式（它将始终匹配）。

因此，您可以通过以下方式让您的生活更轻松：

```
my $nameRegex = qr/$NOT_NAME/;
my $rackRegex = qr/$NOT_RACK/;
my $unitRegex = qr/$NOT_UNIT/;
my $addressRegex = qr/$NOT_ADDR/; 
my $townRegex  = qr/$NOT_TOWN/;
my $pcodeRegex = qr/$NOT_PCODE/; 
```

或者，更好的是，使用哈希（**代码未经测试**）：

```
use List::MoreUtils qw( any );

my %patterns = (
    name => qr/$NOT_NAME/,
    rack => qr/$NOT_RACK/,
    unit => qr/$NOT_UNIT/,
    address => qr/$NOT_ADDR/,
    town => qr/$NOT_TOWN/,
    pcode => qr/$NOT_PCODE/,
);

while (my $row = $select_sites->fetchrow_hashref("NAME_lc")) {
    my $checkbox = '...';

    next if any { $row->{$_} =~ $patterns{$_} } keys %patterns;

    $rows++;
    $sitesResultSection->addRow(
        $checkbox,
        @{ $row }{qw(name rack unit town address pcode lat lon)}
    }
} 
```

这假定列名与您使用的变量名匹配。

最后，您是否`where`在 SQL 中使用了子句`select`？如果可以的话，最好在获取数据之前指定应排除哪些行。

例如，`select name, rack, unit, address, town, pcode lat lon from TABLE where rack <> 'cc08' and town <> 'Concord'`或类似的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T16:35:09.497

**更新：**

正如 Sinan Ünür 所指出的，有一个隐藏的功能，在[perlop](http://perldoc.perl.org/perlop.html#Range-Operators)中描述，任何空的正则表达式`//`都将使用最后一个成功匹配的正则表达式。一个非常奇怪的功能，IMO，在这种情况下会导致细微的错误。

这使得在正则表达式中使用变量是一个坏主意，除非首先检查它们的内容。

**解决方案：**

IMO，您*应该*做的是将其交换为子例程，例如：

```
sub check_var {
    my ($var, $NOT_VAR) = @_;
    return 0 unless $NOT_VAR;
    return ($var =~ /$NOT_VAR/);
} 
```

然后像这样使用它：

```
unless ( check_var($name, $NOT_NAME) 
      || check_var($rack, $NOT_RACK)
      .... 
```

# c++ - 有没有办法从任意点开始在声子媒体对象中的流？

> ID：10400731
> 
> 赞同：0
> 
> 时间：2012-05-01T16:20:41.580
> 
> 标签：c++, qt, phonon

我正在编写一个应用程序来收听 Mac OS X 上 Qt 4.8.1 中的播客。现在，我将我设置`MediaObject`为使用来自播客的 RSS 项目的附件 URL，如下所示：

```
mediaObj->setCurrentSource(Phonon::MediaSource(QUrl(idx.data(Metadata::Enclosure).toString()))); 
```

注意：`idx`是`QModelIndex`对应`QStandardItem`于用户在`QTreeView`小部件中单击的我的模型中的。

不过，我现在有两个问题。

1.  每当我暂停流并再次启动它时，它都会从头开始。没那么有帮助。:-(
2.  如果我使用我的`Phonon::SeekSlider`小部件向前跳到我尚未缓冲的流的一部分，我将被弹回到流的开头。

我（可能有缺陷）的想法是，如果我能找到一种方法`mediaObj`从流中的特定时间开始播放，我可以解决这两个问题。所以，我试过这个：

```
void BrodCastMainWin::pauseStream()
{
    //save the "left off at" point in the stream
    qDebug() << "current time is:" << currentTime;
    qDebug() << "Saving place at" << currentTimeString
             << "in item" << nowPlaying.data(Qt::DisplayRole).toString();
    //need to use QModelIndex for setData()
    QModelIndex nowPlayingHandle = nowPlaying;
    feed.setData(nowPlayingHandle, QVariant(currentTime), Metadata::LeftOffAt);
    //pause the stream
    mediaObj->pause();
}

void BrodCastMainWin::playStream()
{
    //seek to the "left off at" point in the stream
    qDebug() << "Trying to seek to" << convertTime(nowPlaying.data(Metadata::LeftOffAt).toLongLong())
             << "in item" << nowPlaying.data(Qt::DisplayRole).toString();
    mediaObj->seek(nowPlaying.data(Metadata::LeftOffAt).toLongLong());
    //play the file
    mediaObj->play();
} 
```

注意：`currentTime`是最后一个`tick()`信号`mediaObj`发出的时间。我尝试使用 中的`currentTime()`方法获取这些数据`mediaObj`，但没有成功。但这是另一天的战斗。同样，`currentTimeString`是人类可读格式的相同信息。

唉，它不起作用:-(。这是我播放流时该代码发生的情况：

```
current time is: 32153 
Saving place at "00:32" in item "Leo Laporte - The Tech Guy 867" 
switching button to 'play' 
```

时髦的。但是当我再次尝试播放时：

```
Trying to seek to "00:32" in item "Leo Laporte - The Tech Guy 867" 
Playing/Loading/Buffering; switching button to 'pause' 
current time is: 0 
Saving place at "00:00" in item "Leo Laporte - The Tech Guy 867" 
switching button to 'play' 
Trying to seek to "00:00" in item "Leo Laporte - The Tech Guy 867" 
Playing/Loading/Buffering; switching button to 'pause' 
```

我完全糊涂了。似乎我正试图让 Phonon 以它不想要的方式运行。**我担心这似乎是 Phonon 模块的一个长期存在的问题，我可能不得不以其他方式实现流。**帮助？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T00:21:03.357

好吧，看来我太花哨了。我使用一个按钮来播放/暂停。我只需要改变这个：

```
void BrodCastMainWin::handleMediaState(Phonon::State state, Phonon::State)
{
    switch (state)
    {
    case Phonon::PlayingState:
    case Phonon::LoadingState:
    case Phonon::BufferingState:
        qDebug() << "Playing/Loading/Buffering; switching button to 'pause'";
        //If we're playing, the button should pause
        ui->playPauseButton->setIcon(QIcon(":/assets/stock_media-pause.svg"));
        connect(ui->playPauseButton, SIGNAL(clicked()),
                this, SLOT(pauseStream()));
        break;
    case Phonon::PausedState:
    case Phonon::StoppedState:
        qDebug() << "switching button to 'play'";
        //if we're paused, the button should play
        ui->playPauseButton->setIcon(QIcon(":/assets/stock_media-play.svg"));
        connect(ui->playPauseButton, SIGNAL(clicked()),
                this, SLOT(playStream()));
    case Phonon::ErrorState:
        //additionally, if there's an error, do error handling.
        break;
    default:
        break;
    }
} 
```

...对此：

```
void BrodCastMainWin::handleMediaState(Phonon::State state, Phonon::State)
{
    switch (state)
    {
    case Phonon::PlayingState:
        qDebug() << "Playing/Loading/Buffering; switching button to 'pause'";
        //If we're playing, the button should pause
        ui->playPauseButton->setIcon(QIcon(":/assets/stock_media-pause.svg"));
        connect(ui->playPauseButton, SIGNAL(clicked()),
                this, SLOT(pauseStream()));
        break;
    case Phonon::PausedState:
        qDebug() << "switching button to 'play'";
        //if we're paused, the button should play
        ui->playPauseButton->setIcon(QIcon(":/assets/stock_media-play.svg"));
        connect(ui->playPauseButton, SIGNAL(clicked()),
                this, SLOT(playStream()));
        break;
    case Phonon::ErrorState:
        //additionally, if there's an error, do error handling.
        break;
    case Phonon::LoadingState:
    case Phonon::BufferingState:
    case Phonon::StoppedState:
    default:
        break;
    }
} 
```

当然，我最终也会想要处理那些其他状态。但这解决了我的第一个问题。另一个问题可能要等到另一天。

# drupal - Drupal 分组照片库

> ID：10400732
> 
> 赞同：2
> 
> 时间：2012-05-01T16:20:45.013
> 
> 标签：drupal, drupal-7, drupal-views, drupal-modules, image-gallery

我是 Drupal 的新手（我正在使用 D7）并试图了解事物是如何组合在一起的。我需要整理一个显示一系列组的页面，并且在每个组中显示几张图像，并且可以单击每张图像以调出一个灯箱来浏览每张照片。例如，假设页面是一个假期的照片库，它可能是这样的：

第 0 天

* * *

建筑物的照片缩略图，点击它，你会看到我从第 0 天开始的所有建筑照片

我的狗的照片缩略图，点击它，你会看到我从第 0 天开始的所有狗照片

第 1 天

* * *

建筑物的照片缩略图，点击它，你会看到我第一天的所有建筑照片

食物的照片缩略图，点击它，你会看到我第一天的所有食物照片

我姐姐的照片缩略图，点击它，你会看到我第一天的所有家庭照片

* * *

等等。我已经安装并使用了[Views Slideshow](http://drupal.org/project/views_slideshow "观看幻灯片")和[Gallery Formatter](http://drupal.org/project/galleryformatter "图库格式化程序")并设法获得了一种非常简单的画廊，但我想知道是否有一个可分组的画廊插件，或者我是否需要自己推出。

这是我的假设，如果我在这里对drupal 的想法有误，请纠正我，我需要为我的画廊节点创建一个内容类型，为图像添加字段（但我真的觉得我需要一个分组图像数据类型，因为每个组中不会有固定数量的组或固定数量的画廊），然后我需要某种格式化程序插件，它将获取图像列表并生成呈现所需的 html/javascript页面（视图）上的数据（模型）。

想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T17:28:48.703

1.  创建一个没有额外字段的名为 Gallery 的内容类型
2.  创建一个名为 Image 的内容类型，其中包含一个多上传图像字段，然后是一个节点引用字段。
3.  创建一个引入所有画廊节点类型的视图，然后在引入所有图像的同一视图中另一个显示为实体附件。

需要的模块：

*   [http://drupal.org/project/plup](http://drupal.org/project/plup)
*   [http://drupal.org/project/references](http://drupal.org/project/references)
*   [http://drupal.org/project/views](http://drupal.org/project/views)
*   [http://drupal.org/project/eva](http://drupal.org/project/eva)
*   [http://drupal.org/project/entity](http://drupal.org/project/entity)

视图设置示例：

![查看照片库页面设置](../Images/fc4e4a9b322ec2ab020f1068a44cf284.png) ![查看照片库实体附件设置](../Images/afd3a04d0b37ef2a81ccb5669611c665.png)

# bash - 如何消除命令行中的语法错误？

> ID：10400741
> 
> 赞同：1
> 
> 时间：2012-05-01T16:21:26.517
> 
> 标签：bash

如何消除命令行中的语法错误？我创建了一个这样的 bash 脚本：

```
#!/bin/bash

USER="$@"

sed 's/[!@#\$%^&*()]//g'> $@
done

if ! [ -f $@ -a -r $@ ] ; then
 echo "Wrong Option : "${USER}" is not readable or not exist" >&2
 exit -1
fi

cat "${@}"|while read -r line
do
IFS=, read -r f1 f2 f3 f4 f5 <<< "$line"
mysql --user=user --password=password --database=database <<EOF
INSERT INTO table_name VALUES($f1,'$f2','$f3','$f4',$f5);
EOF
done 
```

我在其他终端上执行这个脚本，如下所示：

```
$ ./script.sh test!rr.txt
-bash: !rr.txt: event not found 
```

实际上，这是一个将文本文件中的数据插入数据库表的脚本。如您所见，我想在插入文本文件之前检查文件是否存在。

我尝试使用 tr -d 命令和 sed 命令来消除命令行上的语法错误，但我认为它不起作用..

我的期望是：

```
$ ./script.sh test!rr.txt
Wrong Option : test!rr.txt is not readable or not exist 
```

你有什么主意吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T16:29:23.340

这是您需要调整期望的情况。Bash 只是在做你告诉它做的事情：在将参数传递给脚本之前执行历史扩展。关于引用论点或以其他方式转义“！”的其他答案 都是正确的，但他们假设您在将参数传递给您的脚本之前意识到历史扩展正在发生（您可以在其中检查文件是否存在）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-01T16:23:56.220

`!`在尝试评估该行之前，shell 将 解释为历史命令。尝试逃避它：

```
$ ./script.sh test\!rr.txt 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-01T16:24:06.890

如果要在文件名中包含 bash 特殊字符，请在文件名周围加上引号：

```
$ ./script.sh 'test!rr.txt' 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-01T16:24:23.130

将参数放在引号中以防止 shell 解释特殊符号：

```
$ ./script.sh "test!rr.txt" 
```

# ios - 创建高分列表

> ID：10400742
> 
> 赞同：-1
> 
> 时间：2012-05-01T16:21:30.363
> 
> 标签：ios, iphone, ipad

我正在制作一个游戏应用程序，您可以在其中尝试尽可能多地得分，并且我一直在尝试创建一个高分列表。我通过测量分数是否高于之前的第一来做到这一点，如果然后将第一列为 2、将 2 列为 3、将 3 列为 4 等，等等，将所有内容向下推你知道的一步。但是我使用的方法不起作用;(

显示分数代码： 代码：

```
 NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentPath = [paths objectAtIndex:0];
NSString *path = [documentPath stringByAppendingPathComponent:@"highscore.save"];

NSMutableDictionary* myDict = [[NSMutableDictionary alloc] init];

myDict = [NSKeyedUnarchiver unarchiveObjectWithFile:path];
NSString *nssScore1 = [myDict objectForKey:@"Score1"];
NSString *nssName1 = [myDict objectForKey:@"Name1"];
NSString *nssScore2 = [myDict objectForKey:@"Score2"];
NSString *nssName2 = [myDict objectForKey:@"Name2"];
NSString *nssScore3 = [myDict objectForKey:@"Score3"];
NSString *nssName3 = [myDict objectForKey:@"Name3"];
NSString *nssScore4 = [myDict objectForKey:@"Score4"];
NSString *nssName4 = [myDict objectForKey:@"Name4"];
NSString *nssScore5 = [myDict objectForKey:@"Score5"];
NSString *nssName5 = [myDict objectForKey:@"Name5"];
NSString *nssScore6 = [myDict objectForKey:@"Score6"];
NSString *nssName6 = [myDict objectForKey:@"Name6"];
NSString *nssScore7 = [myDict objectForKey:@"Score7"];
NSString *nssName7 = [myDict objectForKey:@"Name7"];
NSString *nssScore8 = [myDict objectForKey:@"Score8"];
NSString *nssName8 = [myDict objectForKey:@"Name8"];
NSString *nssScore9 = [myDict objectForKey:@"Score9"];
NSString *nssName9 = [myDict objectForKey:@"Name9"];
NSString *nssScore10 = [myDict objectForKey:@"Score10"];
NSString *nssName10 = [myDict objectForKey:@"Name10"];
highestscore = [nssScore1 intValue];
score1i = [nssScore1 intValue];
score2i = [nssScore2 intValue];
score3i = [nssScore3 intValue];
score4i = [nssScore4 intValue];
score5i = [nssScore5 intValue];
score6i = [nssScore6 intValue];
score7i = [nssScore7 intValue];
score8i = [nssScore8 intValue];
score9i = [nssScore9 intValue];
score10i = [nssScore10 intValue];

if(score1i > 0){
    NSString *str1 = [NSString stringWithFormat:@"1\. %@ | %i points", nssName1, score1i];
    score1.text = str1;
} else {
    score1.text = @"No Scores available yet";
}
if(score2i > 0){
    NSString *str2 = [NSString stringWithFormat:@"2\. %@ | %i points", nssName2, score2i];
    score2.text = str2;
} else {
    [score2 setHidden:1];
}
if(score3i > 0){
    NSString *str3 = [NSString stringWithFormat:@"3\. %@ | %i points", nssName3, score3i];
    score3.text = str3;
} else {
    [score3 setHidden:1];
}
if(score4i > 0){
    NSString *str4 = [NSString stringWithFormat:@"4\. %@ | %i points", nssName4, score4i];
    score4.text = str4;
} else {
    [score4 setHidden:1];
}
if(score5i > 0){
    NSString *str5 = [NSString stringWithFormat:@"5\. %@ | %i points", nssName5, score5i];
    score5.text = str5;
} else {
    [score5 setHidden:1];
}
if(score6i > 0){
    NSString *str6 = [NSString stringWithFormat:@"6\. %@ | %i points", nssName6, score6i];
    score6.text = str6;
} else {
    [score6 setHidden:1];
}
if(score7i > 0){
    NSString *str7 = [NSString stringWithFormat:@"7\. %@ | %i points", nssName7, score7i];
    score7.text = str7;
} else {
    [score7 setHidden:1];
}
if(score8i > 0){
    NSString *str8 = [NSString stringWithFormat:@"8\. %@ | %i points", nssName8, score8i];
    score8.text = str8;
} else {
    [score8 setHidden:1];
}
if(score9i > 0){
    NSString *str9 = [NSString stringWithFormat:@"9\. %@ | %i points", nssName9, score9i];
    score9.text = str9;
} else {
    [score9 setHidden:1];
}
if(score10i > 0){
    NSString *str10 = [NSString stringWithFormat:@"10\. %@ | %i points", nssName10, score10i];
    score10.text = str10;
} else {
    [score10 setHidden:1];
} 
```

并保存分数代码：

```
 NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentPath = [paths objectAtIndex:0];
NSString *path = [documentPath stringByAppendingPathComponent:@"highscore.save"];

NSMutableDictionary* myDict1 = [[NSMutableDictionary alloc] init];

myDict1 = [NSKeyedUnarchiver unarchiveObjectWithFile:path];
NSString *nssScore1 = [myDict1 objectForKey:@"Score1"];
NSString *nssName1 = [myDict1 objectForKey:@"Name1"];
NSString *nssScore2 = [myDict1 objectForKey:@"Score2"];
NSString *nssName2 = [myDict1 objectForKey:@"Name2"];
NSString *nssScore3 = [myDict1 objectForKey:@"Score3"];
NSString *nssName3 = [myDict1 objectForKey:@"Name3"];
NSString *nssScore4 = [myDict1 objectForKey:@"Score4"];
NSString *nssName4 = [myDict1 objectForKey:@"Name4"];
NSString *nssScore5 = [myDict1 objectForKey:@"Score5"];
NSString *nssName5 = [myDict1 objectForKey:@"Name5"];
NSString *nssScore6 = [myDict1 objectForKey:@"Score6"];
NSString *nssName6 = [myDict1 objectForKey:@"Name6"];
NSString *nssScore7 = [myDict1 objectForKey:@"Score7"];
NSString *nssName7 = [myDict1 objectForKey:@"Name7"];
NSString *nssScore8 = [myDict1 objectForKey:@"Score8"];
NSString *nssName8 = [myDict1 objectForKey:@"Name8"];
NSString *nssScore9 = [myDict1 objectForKey:@"Score9"];
NSString *nssName9 = [myDict1 objectForKey:@"Name9"];

self.String = textname.text;
NSString *nameString = String;
NSString *nssHighScore = [NSString stringWithFormat:@"%i", highestscore];
NSString *nssIdentifier = [NSString stringWithFormat:@"%@", nameString];

NSMutableDictionary* myDict = [[NSMutableDictionary alloc] init];

[myDict setObject:nssIdentifier forKey:@"Name1"];
[myDict setObject:nssHighScore forKey:@"Score1"];
[myDict setObject:nssName1 forKey:@"Name2"];
[myDict setObject:nssScore1 forKey:@"Score2"];
if(nssScore2 > 0){
[myDict setObject:nssName2 forKey:@"Name3"];
[myDict setObject:nssScore2 forKey:@"Score3"];
}
if(nssScore3 > 0){
[myDict setObject:nssName3 forKey:@"Name4"];
[myDict setObject:nssScore3 forKey:@"Score4"];
}
if(nssScore4 > 0){
[myDict setObject:nssName4 forKey:@"Name5"];
[myDict setObject:nssScore4 forKey:@"Score5"];
}
if(nssScore5 > 0){
[myDict setObject:nssName5 forKey:@"Name6"];
[myDict setObject:nssScore5 forKey:@"Score6"];
}
if(nssScore6 > 0){
[myDict setObject:nssName6 forKey:@"Name7"];
[myDict setObject:nssScore6 forKey:@"Score7"];
}
if(nssScore7 > 0){
[myDict setObject:nssName7 forKey:@"Name8"];
[myDict setObject:nssScore7 forKey:@"Score8"];
}
if(nssScore8 > 0){
[myDict setObject:nssName8 forKey:@"Name9"];
[myDict setObject:nssScore8 forKey:@"Score9"];
}
if(nssScore9 > 0){
[myDict setObject:nssName9 forKey:@"Name10"];
[myDict setObject:nssScore9 forKey:@"Score10"];
}

NSArray *paths1 = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentPath1 = [paths1 objectAtIndex:0];
NSString *path1 = [documentPath1 stringByAppendingPathComponent:@"highscore.save"];

[NSKeyedArchiver archiveRootObject:myDict toFile:path1]; 
```

现在这样做，Highscore #1 已被保存并替换旧的，但之前的第一名消失了，其他（3、4、5 等）都没有显示。你能找到错误或我错过的东西吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T16:52:18.800

第一件事是第一件事。你这样做太错误了！

只需使用数组创建一个高分经理类！这是一个例子：

**高分.h**

```
@interface HighScore : NSObject<NSCoding>

+(id) highScoreWithName:(NSString *) name score:(int) score;

-(id) initWithName:(NSString *) name score:(int) score;

@property (assign) int score;
@property (copy)   NSString *name;

@end 
```

**高分.m**

```
@implementation HighScore

@synthesize score = _score, name = _name;

+(id) highScoreWithName:(NSString *)name score:(int)score
{
    return [[self alloc] initWithName:name score:score];
}

-(id) initWithName:(NSString *)name score:(int)score
{
    if ((self = [super init]))
    {
        self.name = name;
        self.score = score;
    }

    return self;
}

-(id) initWithCoder:(NSCoder *)aDecoder
{
    if ((self = [super init]))
    {
        self.name = [aDecoder decodeObjectForKey:@"name"];
        self.score = [aDecoder decodeIntForKey:@"score"];
    }

    return self;
}

-(void) encodeWithCoder:(NSCoder *)aCoder
{
    [aCoder encodeObject:self.name forKey:@"name"];
    [aCoder encodeInt:self.score forKey:@"score"];
}

-(NSString *) description
{
    return [NSString stringWithFormat:@"%@ - %@: %i", [super description], self.name, self.score];
}

@end 
```

**高分管理器.h**

```
@interface HighScoreManager : NSObject {
    NSMutableArray *_scores;
}

+(HighScoreManager *) instance;

-(void) addHighScore:(HighScore *) score;
-(void) clearHighScores;

-(HighScore *) bestScore;
-(NSArray *) sortedScores;

@end 
```

**高分管理器.m**

```
@implementation HighScoreManager

+(HighScoreManager *) instance
{
    static HighScoreManager *manager;
    static dispatch_once_t onceToken;
    dispatch_once(&onceToken, ^{
        manager = [[HighScoreManager alloc] init];
    });

    return manager;
}

-(id) init
{
    if ((self = [super init]))
    {
        // create from the file
        _scores = [NSKeyedUnarchiver unarchiveObjectWithFile:@"highscore.sav"];

        if (_scores == nil)
            _scores = [NSMutableArray new];
    }

    return self;
}

-(void) _synchronize
{
    // write to the file
    [NSKeyedArchiver archiveRootObject:_scores toFile:@"highscore.sav"];
}

-(void) addHighScore:(HighScore *)score
{    
    // add the score to the end of the array
    [_scores addObject:score];

    // sort on insert
    [_scores sortUsingComparator:^NSComparisonResult(id obj1, id obj2) {
        HighScore *hs1 = obj1;
        HighScore *hs2 = obj2;

        return hs1.score - hs2.score;
    }];

    //  then synchronize
    [self _synchronize];
}

-(void) clearHighScores
{
    // remove all of the objects
    [_scores removeAllObjects];

    // then synchronize
    [self _synchronize];
}

-(HighScore *) bestScore
{
    // simply return the last object in the array
    return [_scores lastObject];
}

-(NSArray *) sortedScores
{
    // note this returns them from lowest to highest scores.
    // also notice we make a copy of the array. This way we 
    // can still add scores without compromising the reciever 
    // of this function.
    return [NSArray arrayWithArray:_scores]; 
}

@end 
```

然后，您只需在进行过程中添加到高分列表中，它就会为您处理所有内部事务。

# linux - VmRSS 和驻留集大小如何匹配？

> ID：10400751
> 
> 赞同：19
> 
> 时间：2012-05-01T16:22:02.097
> 
> 标签：linux, procfs

我解析数据`/proc/[pid]/statm`以获取有关某个进程的内存使用情况的线索。`man proc`指出*驻留集大小*（以“页面”衡量）与`/proc/[pid]/status`. 由于它们具有不同的价值观，我想了解这些价值观之间的联系。有没有我可以在某处读到的因素`/proc`（我想到了 VmPTE，但它的……其他……）？我应该解析两者中的哪一个来获取某个进程的已用内存的大小？

```
#ex 1782 = firefox

~$ cat /proc/1782/statm
  224621 46703 9317 11 0 98637 0
#          \--- resident set size

~$ cat /proc/1782/status | grep Vm
  VmPeak:     935584 kB
  VmSize:     898484 kB
  VmLck:           0 kB
  VmHWM:      257608 kB
  VmRSS:      186812 kB
  VmData:     394328 kB
  VmStk:         220 kB
  VmExe:          44 kB
  VmLib:       61544 kB
  VmPTE:        1224 kB
  VmSwap:          0 kB 
```

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-06-19T09:07:40.623

的 RSS 值`/proc/<pid>/stat`是页数，而 VmRSS 值的单位`/proc/<pid>/status`是 kB。

在您的情况下，46703 * 4kB（页面大小）= 186812 kB。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-05-01T16:32:17.473

我的理解是 VM 是虚拟内存的数量，而 RSS 是它驻留在内存中的多少。所以，

虚拟内存=物理内存的一部分+磁盘的一部分

物理内存中的部分是RSS。所以，VSS 应该大于 RSS。如果它们接近相等，则意味着您的过程在内存中很舒适。如果 VSS 大得多，则意味着没有足够的内存，并且必须将其中的一部分换出到磁盘（即，由于竞争进程等）。

在我的系统上，我可以执行“man proc”并列出以下内容：

```
 * VmPeak: Peak virtual memory size.

          * VmSize: Virtual memory size.

          * VmLck: Locked memory size (see mlock(3)).

          * VmHWM: Peak resident set size ("high water mark").

          * VmRSS: Resident set size.

          * VmData, VmStk, VmExe: Size of data, stack, and text segments. 
```

如果您想报告峰值内存使用情况，那么您可能需要虚拟内存，它看起来像 VmPeak。

希望这可以帮助！

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2016-12-07T19:18:29.317

在上下文中`proc`跟随的状态的手册页`statm`

```
/proc/[pid]/statm  
 Provides information about memory usage, measured in pages.  The columns are:  

  size       (1) total program size  
             (same as VmSize in /proc/[pid]/status)  
  resident   (2) resident set size  
             (same as VmRSS in /proc/[pid]/status)  
  share      (3) shared pages (i.e., backed by a file)  
  text       (4) text (code)  
  lib        (5) library (unused in Linux 2.6)  
  data       (6) data + stack  
  dt         (7) dirty pages (unused in Linux 2.6) 
```

但它没有说明的是，`size`并`resident`以页数表示。

```
~$ cat /proc/1782/statm
  224621 46703 9317 11 0 98637 0
#          \--- resident set size 
```

因此，`46703`是以页数表示的驻留集大小，也是以页数 `224621`表示的虚拟内存大小。

现在要让它们以 KB 为单位，将它们与页面大小相乘。`getconf PAGESIZE`您可以使用命令或`C/C++`通过调用`sysconf(_SC_PAGE_SIZE)`（在 unistd.h 中定义）在程序中获取页面大小。这将为您提供以字节为单位的页面大小。将其除以 1024 以获得以 KB 为单位的页面大小。

例子 ：

```
$getconf PAGESIZE
4096 
```

4096/1024 = 4 KB

> 因此，以 KB 为单位的驻留集大小为 46703 x 4 = 186812 kB (VmRSS)。
> 以 KB 为单位的总程序大小为 224621 x 4 = 898484 kB (VmSize)

# eclipse - 为 Eclipse 配置 Apache HTTP 服务器

> ID：10400752
> 
> 赞同：12
> 
> 时间：2012-05-01T16:22:08.020
> 
> 标签：eclipse, apache

也许这个问题很愚蠢，但我真的不知道如何解决。

首先，作为其他服务器，我想定义新服务器。因此，在 Eclipse 中，我转到：Windows>Preference>Server：

1）当我添加新服务器时，在列表中，没有 Apache HTTP 服务器的类别。只有 Apache Tomcat。所以，我点击下载额外的服务器适配器——>列表中仍然没有。

2）所以，我搜索。我指向我安装的位置。很好，Eclipse 认为这是一个 HTTP 服务器。并且 Eclipse 会为我看到将项目放入的文件夹（因为我使用 LAMP，因此该文件夹不在 Apache 文件夹中）。

但这是我的问题。当我想运行一个新的 PHP 项目时。右键，在服务器上运行。出现一个新对话框，让我选择要运行的服务器。而且，在服务器列表中，没有 HTTP Server，所以，我不知道如何选择 Apache HTTP Server ！！！（因为Eclipse看不到我定义了哪个服务器，所以eclipse只是先找到适配器）

所以，如果我想运行这个项目，我必须全部复制并粘贴到 Apache 文件夹。太方便了！！！

请帮我。

谢谢 ：）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-01T16:52:20.363

Apache 的 HTTP 服务器和 Eclipse 不相互通信。Windows -> Preference -> Server 下的服务器是 Tomcat 和 Glassfish 等 Java 服务器。

您需要做的是在 Eclipse 中定义您的 Web 项目，然后在 httpd.conf 文件中定义与 HTTP 服务器相同的目录。或者，既然您已经设置好了，请在 Eclipse 中编写一个 Ant 脚本来将 PHP 文件复制到您的 HTTP 文件夹中。

编辑添加：这是我的 Ant 脚本，用于保持我的 Eclipse 目录和我的 HTTP 目录同步。我在 Windows 中开发。

```
<?xml version="1.0" encoding="UTF-8"?>
<project name="build" default="" basedir=".">
    <description>
       Synchronize the Eclipse folders and the web site folders
    </description>    
    <!-- Relative location of eclipse folder -->
    <property name="eclipse" value="." />
    <!-- Absolute location of web site folder -->
    <property name="website" value="C:/Presbury UMC/" />

    <!-- Copy new web site files -->
    <copy todir="${eclipse}">
        <fileset file="${website}/index.php"/>
    </copy>
    <copy todir="${eclipse}/css">
        <fileset dir="${website}/css"/>
    </copy>
    <copy todir="${eclipse}/images">
        <fileset dir="${website}/images"/>
    </copy>
    <copy todir="${eclipse}/protected">
        <fileset dir="${website}/protected/">
            <exclude name="yiic*"/>
            <exclude name=".htaccess"/>
        </fileset>
    </copy>   
    <copy todir="${eclipse}/themes">
        <fileset dir="${website}/themes"/>
    </copy>

    <!-- Copy new Eclipse files -->
    <copy todir="${website}">
        <fileset file="${eclipse}/index.php"/>
    </copy>
    <copy todir="${website}/css">
        <fileset dir="${eclipse}/css"/>
    </copy>
    <copy todir="${website}/images">
        <fileset dir="${eclipse}/images"/>
    </copy>
    <copy todir="${website}/protected">
        <fileset dir="${eclipse}/protected/"/>
    </copy>   
    <copy todir="${website}/themes">
           <fileset dir="${eclipse}/themes/"/>
    </copy>   
</project> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-10-17T19:36:08.633

转到 apache>conf>httpd.conf 文件并打开它。在“ServerName localhost:80”下方将您的文档根目录和目录更改为您的工作目录（在 Eclipse 中它是工作区）。现在您可以通过键入运行您的 php 文件/项目它在任何浏览器中的完整 url，或者如果您想通过 eclipse 运行它，您还必须通过在映射选项卡中同步服务器副本和本地副本（在这种情况下两者是相同的）来配置该运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-24T09:46:17.970

这个答案基于 Windows 配置，希望它也适用于 MacOSX 配置。

1.  假设您的 AMP 服务器安装在 C:\AMP 中，那么如果您坚持使用标准配置，那么您的 PHP 文件位于 C:\AMP\www 中。
2.  在 Eclipse 中，您必须安装 PDT（PHP 开发工具）和 SDK。如果不能使用 Eclipse 的“安装新软件”功能获取它。安装 PDT 后，您可以创建一个 PHP 项目。假设您创建了一个 PHP 项目 PHP001。默认情况下，Eclipse 会将项目 PHP001 的源代码存储在 Eclipse 工作区的子文件夹中，例如 ..\workspace\PHP001。这是您需要将位置更改为 C:\AMP\www 的地方。
3.  PHP001 显示在 Eclipse Projects 视图中。您会看到它已经显示了您在 wwww 文件夹中的 PHP 文件。
4.  要添加 PHP 文件，请右键单击您的 PHP 项目，然后单击新建 PHP 文件。
5.  要执行 PHP 文件，右键单击它，运行方式，然后是 PHP Web 应用程序。在这里，Eclipse 将再次建议启动类似 localhost/PHP001/your-php-file.php 的内容；您需要删除 PHP001 级别并提交 localhost/your-php-file.php 代替。

如果您在项目中创建大量测试 php 文件，这种情况可能会变得混乱，在这种情况下，您可能希望在 Eclipse 文件夹中开发您的 php，并仅在使用 Gilbert Le Blanc 的方法完成后将它们复制到 www 文件夹。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-26T21:13:09.087

我让 apache 配置文件在我的源代码文件夹中（例如在文件夹 /etc 中）。

在 ubuntu 中，您可以在代码源文件夹中的此配置文件可用的站点中创建符号链接：

```
sudo ln -s path_to_your_conf . 
```

在启用的站点中，您可以在可用站点中创建指向 conf 文件的符号链接（或使用 apache 2 命令： sudo a2ensite example.com.conf ）。

在 Windows 中，您还可以创建符号链接： google for the command`mklink`

我没有经常使用 Windows，但似乎是相同的选择）。

这样，您无需将任何内容复制到 apache var/www 文件夹，并且您可以在源代码文件夹中访问您正在处理的项目的 Apache 设置。

所以不确定这是否可以在 Windows 中工作，但如果可以，对我来说这是开发任何 Web 项目的最简单方法。将您需要的东西保存在源文件夹中，就像在真实服务器上一样（我使用一些部署和构建脚本来执行此操作，但这是概念，这对我很有用）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-07-21T08:00:37.247

很久以前，有人问过这个问题，但我是这样处理的：

我在 Windows 上开发了一些 Web 应用程序（带有 Python CGI 后端和常用的数据库存储）并`httpd.exe`从它的标准安装路径运行 Apache 2.2`C:\Program Files (x86)\Apache Software Foundation\Apache2.2\bin`

`~\conf\httpd.conf`我更喜欢为我要调试的项目调整 httpd.conf（Windows 上的标准位置）。

使用外部工具运行器手动完成启动/停止。如果您希望将所有必需的命令行选项`httpd.conf`与您的项目一起使用，或者想要添加更多选项，例如记录到标准输出（然后将转到 Eclipse 控制台窗口）与记录到`~\logs`.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-01-04T07:01:27.933

你可以下载Ant，然后去你的项目继续运行，会有两个选项1.Ant build 2.Ant build，选择第二个勾选war（generate war），你的build就会生成，你的将创建战争，将此 .war 文件放在 apache 服务器的 webapps 文件夹中。希望能帮助到你

# sql-server - 如何截断字段并将“...”附加到它？

> ID：10400755
> 
> 赞同：0
> 
> 时间：2012-05-01T16:22:15.607
> 
> 标签：sql-server, tsql

我正在尝试找出一个 select 语句，它将字段值截断为 100 个字符并将 ... 添加到它的末尾，如下所示：

HundredLetterSentence 变成 HundredLetter Sen... 或类似的东西。这是我的存储过程中的 select 语句。我从这里有点卡住了。Select TOP(1) Description 是我想要截断的地方。

```
SELECT      [TI].[TicketID]
        ,   CAST([TI].[Subject] AS VARCHAR(100)) [Subject]
        ,   [TA].[DueDate]
        ,   CAST(
                    (   SELECT 
                        TOP(1)      SUBSTRING(Description, 0, 100)
                        FROM        Comment 
                        WHERE       TicketID = [TI].[TicketID] 
                        ORDER BY    CommentDate DESC
                    ) AS VARCHAR(100)
                ) AS [Description]
FROM        [dbo].[Ticket]      [TI]
INNER JOIN  [dbo].[Task]        [TA] 
ON          [TI].[TicketID]     = [TA].[TicketID]
INNER JOIN  [dbo].[Task_Status] [TS] 
ON          [TA].[StatusID]     = [TS].[StatusID]
WHERE       [TI].[IsDeleted]    = 0 
AND         [TS].[IsDeleted]    = 0
AND         [TS].[Status]       = 'Open'
AND         [TI].[AssigneeView] IS NULL
AND         [TI].[AssignedTo]   = @AssignedTo 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T16:24:28.030

我认为这里最好的方法是创建一个[用户定义函数](http://msdn.microsoft.com/en-us/library/aa214363%28v=sql.80%29.aspx)（UDF）。

在这个 UDF 中，您将有类似的内容：

```
IF LEN(@Value)>100
BEGIN
   SET @Value = SUBSTRING(@Value, 0, 100) + '...'
END
RETURN @Value 
```

然后在你的`SELECT`声明中你会这样做：

```
SELECT [TI].[TicketID], dbo.TruncateString([TI].[Subject]) ..... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T16:42:15.237

什么会起作用是这样的 -

```
SELECT CASE 
           WHEN (LEN(Table1.LongText) < 100) THEN Table1.LongText
           ELSE SUBSTRING(Table1.LongText,1, 97) + '...'
       END AS [Description]
FROM Table1; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T16:37:00.753

```
;WITH x (d, tid, rn) AS
(
  SELECT SUBSTRING(Description, 1, 100) + CASE
    WHEN LEN(Description) > 100 THEN '...' ELSE '' END,
    TicketID, rn = ROW_NUMBER() OVER
    (PARTITION BY TicketID ORDER BY CommentDate DESC)
    FROM dbo.Comment
)
SELECT [TI].[TicketID], 
  CAST([TI].[Subject] AS VARCHAR(100)) [Subject], 
  [TA].[DueDate], 
  x.d AS [Description]
    FROM     [dbo].[Ticket] [TI]
             INNER JOIN [dbo].[Task] [TA] ON [TI].[TicketID] = [TA].[TicketID]
             INNER JOIN [dbo].[Task_Status] [TS] ON [TA].[StatusID] = [TS].[StatusID]
    LEFT OUTER JOIN x ON TI.TicketID = x.tid
    AND x.rn = 1 -- oops, forgot this important part
    WHERE    [TI].[IsDeleted] = 0 AND
             [TS].[IsDeleted] = 0 AND
             [TS].[Status] = 'Open' AND
             [TI].[AssigneeView] IS NULL AND
             [TI].[AssignedTo] = @AssignedTo; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-01T16:50:46.247

您是否需要所有字段都具有“...”或仅需要实际大于 100 个字符的字段。如果您需要全部，您可以执行以下操作：

```
select substring(name,0,97)+'...' from... 
```

# c# - C# 语法问题 - 尝试向数据行添加值

> ID：10400761
> 
> 赞同：0
> 
> 时间：2012-05-01T16:22:33.027
> 
> 标签：c#, gridview, datarow

我正在尝试针对动态填充的 gridview 名称用户编写排序例程。我在 C# 代码中有一个语法错误，我试图在数据表的一行中填充一列。

```
 for (int j = 0; j <= Users.Rows.Count - 1; j++) 
    { 
        DataRow dr = default(DataRow); 
        GridViewRow row = Users.Rows[j]; 
        dr = dt.NewRow(); 
        DataView dvUsers = new DataView(dt); 

        for (int i = 0; i <= row.Cells.Count - 1; i++) 
        { 
            dr.Item(i) = row.Cells[i].Text; 
        } 

        dt.Rows.Add(dr); 
    } 
```

错误信息：

> System.Data.DataRow 不包含“项目”的定义

有人可以帮助使用正确的语法将此值分配给数据行吗？

我是 C# 新手

谢谢你，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T16:23:59.813

你只需要换行

```
dr.Item(i) = row.Cells[i].Text; 
```

至

```
dr[i] = row.Cells[i].Text; 
```

假设数据表中的列与表中单元格的顺序相匹配。

`()`用于调用方法，while`[]`表示[索引器](http://msdn.microsoft.com/en-us/library/6x16t2tx.aspx)。这就是编译错误的原因。`Item`上没有方法`DataRow`，它是一个索引器。

**编辑**

改为。`dr.Item[i]`_ `dr[i]`正如评论中解释的那样，`Item`是默认索引器，因此您不指定属性，提供给对象本身的索引将应用于`Item`索引器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-01T17:52:44.173

尝试这个：

`dr[i] = row.Cells[i].Text;`

# javascript - 循环返回 bool

> ID：10400766
> 
> 赞同：1
> 
> 时间：2012-05-01T16:22:53.270
> 
> 标签：javascript, loops

我有一个循环，我需要以某种模式返回某些数字，因为我可以使用`count`我可以使用的数字以及数字`4`和`4-1(3)`. 我需要返回 5,12,19,26,33 等为真，其他为假。

```
function saturn(count,perline){
  var line_one = perline; // 5
  var line_two = perline-1; // 4
  var line_both = line_one + line_two; // 7
  var x = (perline+1)+(line_both*(Math.floor(count/(perline+1))-1));
  if(x<0) x = 0;
  var capture;
  if(perline == 1){ //if perline = 1 don't indent any
    capture = false;
  }else if(x == count){
    capture = true;
  }
  console.log("("+perline+"+1)+("+line_both+"*(Math.floor("+count+"/("+perline+"+1))-1)) ="+x);  
  console.log(count+" "+capture);
  return capture;
} 
```

控制台输出。

```
script.js:54(4+1)+(7*(Math.floor(1/(4+1))-1)) =0
script.js:561 undefined
script.js:54(4+1)+(7*(Math.floor(2/(4+1))-1)) =0
script.js:562 undefined
script.js:54(4+1)+(7*(Math.floor(3/(4+1))-1)) =0
script.js:563 undefined
script.js:54(4+1)+(7*(Math.floor(4/(4+1))-1)) =0
script.js:564 undefined
script.js:54(4+1)+(7*(Math.floor(5/(4+1))-1)) =5
script.js:565 true
script.js:54(4+1)+(7*(Math.floor(6/(4+1))-1)) =5
script.js:566 undefined
script.js:54(4+1)+(7*(Math.floor(7/(4+1))-1)) =5
script.js:567 undefined
script.js:54(4+1)+(7*(Math.floor(8/(4+1))-1)) =5
script.js:568 undefined
script.js:54(4+1)+(7*(Math.floor(9/(4+1))-1)) =5
script.js:569 undefined
script.js:54(4+1)+(7*(Math.floor(10/(4+1))-1)) =12
script.js:5610 undefined
script.js:54(4+1)+(7*(Math.floor(11/(4+1))-1)) =12
script.js:5611 undefined
script.js:54(4+1)+(7*(Math.floor(12/(4+1))-1)) =12
script.js:5612 true
script.js:54(4+1)+(7*(Math.floor(13/(4+1))-1)) =12
script.js:5613 undefined
script.js:54(4+1)+(7*(Math.floor(14/(4+1))-1)) =12
script.js:5614 undefined
script.js:54(4+1)+(7*(Math.floor(15/(4+1))-1)) =19
script.js:5615 undefined
script.js:54(4+1)+(7*(Math.floor(16/(4+1))-1)) =19
script.js:5616 undefined
script.js:54(4+1)+(7*(Math.floor(17/(4+1))-1)) =19
script.js:5617 undefined
script.js:54(4+1)+(7*(Math.floor(18/(4+1))-1)) =19
script.js:5618 undefined
script.js:54(4+1)+(7*(Math.floor(19/(4+1))-1)) =19
script.js:5619 true
script.js:54(4+1)+(7*(Math.floor(20/(4+1))-1)) =26
script.js:5620 undefined
script.js:54(4+1)+(7*(Math.floor(21/(4+1))-1)) =26
script.js:5621 undefined
script.js:54(4+1)+(7*(Math.floor(22/(4+1))-1)) =26
script.js:5622 undefined
script.js:54(4+1)+(7*(Math.floor(23/(4+1))-1)) =26
script.js:5623 undefined
script.js:54(4+1)+(7*(Math.floor(24/(4+1))-1)) =26
script.js:5624 undefined
script.js:54(4+1)+(7*(Math.floor(25/(4+1))-1)) =33
script.js:5625 undefined
script.js:54(4+1)+(7*(Math.floor(26/(4+1))-1)) =33
script.js:5626 undefined
script.js:54(4+1)+(7*(Math.floor(27/(4+1))-1)) =33
script.js:5627 undefined
script.js:54(4+1)+(7*(Math.floor(28/(4+1))-1)) =33
script.js:5628 undefined 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T16:32:02.260

这就是你想要做的？

```
return (x - 5) % 7 == 0 
```

对于 5、12、19、26 和 33，它返回 true。

编辑：您已编辑，但我仍然无法理解您的内容，但这无济于事，抱歉

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T16:35:59.350

您需要使用 % 运算符。这个小小提琴演示通过 100 个数字，似乎返回了你想要的那个。基本上每 7 次迭代 % 7 将等于 1，因此只需添加 4 即可获得您所追求的数字。

[http://jsfiddle.net/NQr5j/](http://jsfiddle.net/NQr5j/)

```
var iteration = 100,
    store = [];

do {
    if (iteration % 7 == 1) store.push(iteration + 4);
} while (iteration--);

console.log(store); 
```

# image - OpenLayers 中每层有多个图像

> ID：10400774
> 
> 赞同：5
> 
> 时间：2012-05-01T16:23:06.010
> 
> 标签：image, openlayers, layer

是否可以在 OpenLayers 的一个图层中放置多个图像？

理想情况下，我想将我的图片分类（每一层都是一个类别），这样我就可以整体显示和隐藏每个类别，而不是显示/隐藏每张图片。

这可能吗？我发现了几个使用 OpenLayers 的 Image 层（似乎只支持一个图像）或带有 StyleMap 的 Vector 层（似乎也只允许一个外部图像）的示例。

我是否忽略了某些东西或者需要更多的努力（即创建自定义图层类型）？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T18:00:31.347

要将多个图像放在同一层中，您可以像这样创建一个 styleMap

```
var style = new OpenLayers.StyleMap({
    default :new OpenLayers.Style({
          'pointRadius': 10,
          'externalGraphic': '/images/${icon}.png'
    })
}) 
```

其中“${icon}”是特征的一个属性。

在下一个示例中，我使用 2 张图片“star”和“home”

```
var path = new OpenLayers.Layer.Vector( "images" );
//set the styleMap
path.styleMap = style;
map.addLayers([path]);

//create a new feature
var pointHome = new OpenLayers.Geometry.Point(-57.533832,-25.33963);
var featureHome = new OpenLayers.Feature.Vector(pointHome);
//set the icon of the feature
featureHome.attributes["icon"] ="home";

var pointStar = new OpenLayers.Geometry.Point(-57.533371,-25.338946);
var featureStar = new OpenLayers.Feature.Vector(pointStar);
//set the icon of the feature
featureStar.attributes["icon"] ="star";

path.addFeatures([featureHome, featureStar]); 
```

# php - MySQL：如何按 (-) 破折号排序

> ID：10400776
> 
> 赞同：4
> 
> 时间：2012-05-01T16:23:07.867
> 
> 标签：php, mysql, sql, sql-order-by

我该如何`order by`冲刺？

例如，我在下面有这些数据，

```
page_id   url
1         - a
2         - b
3         --- c
4         --- d
5         - e
6         - f
7         -- g
8         -- h 
```

我追求的结果，

```
page_id   url
1         - a
2         - b
5         - e
6         - f
7         -- g
8         -- h
3         --- c
4         --- d 
```

如果我这样做，

```
ORDER by x.url ASC 
```

这个我还是明白的

```
page_id   url
1         - a
2         - b
3         --- c
4         --- d
5         - e
6         - f
7         -- g
8         -- h 
```

有任何想法吗？

**编辑：**

我的实际 SQL，

```
SELECT 
    *,
    IF(grandparentURL REGEXP '^[a-z0-9\-]+$', CONCAT('--- ', url), IF(parentURL REGEXP '^[a-z0-9\-]+$', CONCAT('-- ', url), CONCAT('- ', url))) AS url
FROM
(
    SELECT 
        p.page_id,
        p.url,
        p2.url AS parentURL,
        p3.url AS grandparentURL

    FROM page AS p

    LEFT JOIN page AS p2 
    ON p.parent_id = p2.page_id AND p.page_id != p2.page_id

    LEFT JOIN page AS p3 
    ON p2.parent_id = p3.page_id AND p2.page_id != p3.page_id

    WHERE IF('5' REGEXP '^[0-9]+$', p.page_id != '5', p.page_id IS NOT NULL)
    AND p.url != 'cms' 
) x

ORDER by x.url ASC 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T16:30:28.153

尝试这个

```
ORDER BY SUBSTRING_INDEX(url, ' '),url 
```

第一部分按字符串中第一个空格的位置排序

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T16:57:40.267

做MULTIPLE order by...首先按找到空间的位置首先分组...从那个位置开始，然后按整个URL排序。由于常见的 -b 和 -a 将在同一组中，因此它们的空间将它们保持在组“1”中......然后，整个 URL 将强制您正确的 -a、-b、-c 等

```
ORDER BY INSTR('x.url', ' '), x.url 
```

# c# - 用零将货币填充到固定宽度（ToString（“C”））？

> ID：10400778
> 
> 赞同：1
> 
> 时间：2012-05-01T16:23:22.187
> 
> 标签：c#, string-formatting, currency

所以我很好奇我是否可以使用该`.ToString("C")`方法从我的号码中生成货币值，但让它显示该值与最小值相结合。

举个例子，假设我的号码永远不会超过 1,000.00 美元。但是，通常生成的值如下所示，$0,487.00。我知道你可能在想你为什么要这样做。在这种情况下，我不希望标签大小根据内容增加或减少。另外，如果数字未填写实际美元金额，我希望将数字替换为 0。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T16:28:25.633

这就是你所追求的吗？

```
.ToString("$0,000.00") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T16:29:03.540

您可以只使用自定义格式字符串：

```
.ToString("$0,000.00"); 
```

请注意，通过在格式字符串中使用`0`s 而不是`#`s，它可以保证这些数字将存在，即使数字不够大。

# java - JSP中有关变量（范围？）的编译错误

> ID：10400779
> 
> 赞同：1
> 
> 时间：2012-05-01T16:23:29.970
> 
> 标签：java, jsp, scope

考虑这个例子：

```
<% int testNumber = 1; %>
//Some HTML goes here
<%=testNumber%> 
```

我得到编译错误：

```
testNumber cannot be resolved to a variable 
```

有人可以解释发生了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T16:27:52.633

您需要确保您了解变量范围。它在*scriptlet*中与普通 Java 类中的相同。

因此，如果您*实际上*有例如

```
<%
   if (someCondition) {
       int testNumber = 1;
   }
%>

...

<%=testNumber%> 
```

然后你会得到这个错误（在普通的 Java 类中也是如此！）。要解决此问题，您需要确保在相同的范围内声明变量，如有必要，使用默认值。

```
<%
   int testNumber = 0;

   if (someCondition) {
       testNumber = 1;
   }
%>

...

<%=testNumber%> 
```

* * *

**与具体问题无关**，使用*scriptlet*被认为是[不好的做法](https://stackoverflow.com/questions/3177733/how-to-avoid-java-code-in-jsp-files/)。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-01T16:32:38.430

抛开设计问题，尝试将变量声明为全局变量：

```
<%! int testNumber = 0; %> 
```

# magento - 在管理类别中出现错误 - 未找到属性“navigation_column”

> ID：10400782
> 
> 赞同：1
> 
> 时间：2012-05-01T16:23:47.597
> 
> 标签：magento

在尝试安装一个扩展并尝试卸载后，删除所有文件（扩展） - 我们现在在尝试进入时遇到错误`admin > manage categories`：

```
Source model "gomage_navigation/adminhtml_system_config_source_category_column" not found for attribute "navigation_column"

Trace:
#0 /home/vinylshop/domains/vinylshop.lt/public_html/app/code/core/Mage/Eav/Model/Entity/Attribute/Abstract.php(387): Mage::exception('Mage_Eav', 'Source model "g...')
#1 /home/vinylshop/domains/vinylshop.lt/public_html/app/code/core/Mage/Adminhtml/Block/Widget/Form.php(201): Mage_Eav_Model_Entity_Attribute_Abstract->getSource()
#2 /home/vinylshop/domains/vinylshop.lt/public_html/app/code/core/Mage/Adminhtml/Block/Catalog/Category/Tab/Attributes.php(113): Mage_Adminhtml_Block_Widget_Form->_setFieldset(Array, Object(Varien_Data_Form_Element_Fieldset))
#3 /home/vinylshop/domains/vinylshop.lt/public_html/app/code/core/Mage/Adminhtml/Block/Widget/Form.php(144): Mage_Adminhtml_Block_Catalog_Category_Tab_Attributes->_prepareForm()
#4 /home/vinylshop/domains/vinylshop.lt/public_html/app/code/core/Mage/Core/Block/Abstract.php(862): Mage_Adminhtml_Block_Widget_Form->_beforeToHtml()
#5 /home/vinylshop/domains/vinylshop.lt/public_html/app/code/core/Mage/Adminhtml/Block/Catalog/Category/Tabs.php(140): Mage_Core_Block_Abstract->toHtml()
#6 /home/vinylshop/domains/vinylshop.lt/public_html/app/code/core/Mage/Core/Block/Abstract.php(238): Mage_Adminhtml_Block_Catalog_Category_Tabs->_prepareLayout()
#7 /home/vinylshop/domains/vinylshop.lt/public_html/app/code/core/Mage/Core/Model/Layout.php(430): Mage_Core_Block_Abstract->setLayout(Object(Mage_Core_Model_Layout))
#8 /home/vinylshop/domains/vinylshop.lt/public_html/app/code/core/Mage/Adminhtml/Block/Catalog/Category/Edit/Form.php(55): Mage_Core_Model_Layout->createBlock('adminhtml/catal...', 'tabs')
#9 /home/vinylshop/domains/vinylshop.lt/public_html/app/code/core/Mage/Core/Block/Abstract.php(238): Mage_Adminhtml_Block_Catalog_Category_Edit_Form->_prepareLayout()
#10 /home/vinylshop/domains/vinylshop.lt/public_html/app/code/core/Mage/Core/Model/Layout.php(430): Mage_Core_Block_Abstract->setLayout(Object(Mage_Core_Model_Layout))
#11 /home/vinylshop/domains/vinylshop.lt/public_html/app/code/core/Mage/Adminhtml/Block/Widget/Form/Container.php(82): Mage_Core_Model_Layout->createBlock('adminhtml/catal...')
#12 /home/vinylshop/domains/vinylshop.lt/public_html/app/code/core/Mage/Core/Block/Abstract.php(238): Mage_Adminhtml_Block_Widget_Form_Container->_prepareLayout()
#13 /home/vinylshop/domains/vinylshop.lt/public_html/app/code/core/Mage/Core/Model/Layout.php(430): Mage_Core_Block_Abstract->setLayout(Object(Mage_Core_Model_Layout))
#14 /home/vinylshop/domains/vinylshop.lt/public_html/app/code/core/Mage/Core/Model/Layout.php(446): Mage_Core_Model_Layout->createBlock('adminhtml/catal...', 'category.edit')
#15 /home/vinylshop/domains/vinylshop.lt/public_html/app/code/core/Mage/Core/Model/Layout.php(238): Mage_Core_Model_Layout->addBlock('adminhtml/catal...', 'category.edit')
#16 /home/vinylshop/domains/vinylshop.lt/public_html/app/code/core/Mage/Core/Model/Layout.php(204): Mage_Core_Model_Layout->_generateBlock(Object(Mage_Core_Model_Layout_Element), Object(Mage_Core_Model_Layout_Element))
#17 /home/vinylshop/domains/vinylshop.lt/public_html/app/code/core/Mage/Core/Model/Layout.php(209): Mage_Core_Model_Layout->generateBlocks(Object(Mage_Core_Model_Layout_Element))
#18 /home/vinylshop/domains/vinylshop.lt/public_html/app/code/core/Mage/Core/Controller/Varien/Action.php(345): Mage_Core_Model_Layout->generateBlocks()
#19 /home/vinylshop/domains/vinylshop.lt/public_html/app/code/core/Mage/Core/Controller/Varien/Action.php(270): Mage_Core_Controller_Varien_Action->generateLayoutBlocks()
#20 /home/vinylshop/domains/vinylshop.lt/public_html/app/code/core/Mage/Adminhtml/Controller/Action.php(263): Mage_Core_Controller_Varien_Action->loadLayout(NULL, true, true)
#21 /home/vinylshop/domains/vinylshop.lt/public_html/app/code/core/Mage/Adminhtml/controllers/Catalog/CategoryController.php(191): Mage_Adminhtml_Controller_Action->loadLayout()
#22 /home/vinylshop/domains/vinylshop.lt/public_html/app/code/core/Mage/Core/Controller/Varien/Action.php(420): Mage_Adminhtml_Catalog_CategoryController->editAction()
#23 /home/vinylshop/domains/vinylshop.lt/public_html/app/code/core/Mage/Core/Controller/Varien/Router/Standard.php(250): Mage_Core_Controller_Varien_Action->dispatch('edit')
#24 /home/vinylshop/domains/vinylshop.lt/public_html/app/code/core/Mage/Core/Controller/Varien/Front.php(176): Mage_Core_Controller_Varien_Router_Standard->match(Object(Mage_Core_Controller_Request_Http))
#25 /home/vinylshop/domains/vinylshop.lt/public_html/app/code/core/Mage/Core/Model/App.php(349): Mage_Core_Controller_Varien_Front->dispatch()
#26 /home/vinylshop/domains/vinylshop.lt/public_html/app/Mage.php(640): Mage_Core_Model_App->run(Array)
#27 /home/vinylshop/domains/vinylshop.lt/public_html/index.php(80): Mage::run('', 'store')
#28 {main} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T16:29:25.660

猜测它可能已经为它现在试图查找的类别创建了一个新属性，但它不能。

查看您的 eav_attribute 表，看看里面是否有任何东西。更好的是，通过扩展安装脚本查看它是否添加了任何属性。

# jquery - iPad中的jQuery委托点击功能速度+崩溃问题

> ID：10400785
> 
> 赞同：1
> 
> 时间：2012-05-01T16:23:58.490
> 
> 标签：jquery, ipad

在 iPad ios 5.1 中，[https://s140452.gridserver.com/property/4123](https://s140452.gridserver.com/property/4123)（横向视图）

单击“显示详细信息”按钮在 iPad 上执行大约需要 15 秒。有时它会导致移动 Safari 崩溃。它会在 chrome 或 firefox 中立即发生。

难道我做错了什么？

```
$j('#locations').delegate('.sidebar-expand', 'click', function(){
    var $me = $j(this),
        $locations = $j('#locations');

    if($locations.hasClass('expand')) {
        $locations.removeClass('expand');
    } else {
        $locations.addClass('expand');
    }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T16:29:36.227

首先，使用`on`代替，`delegate`因为它在 1.7+ 中引入了一些小的性能提升，但更重要的是它正在成为最佳实践。相同的语法：

```
$j('#locations').on('.sidebar-expand', 'click', function(){... 
```

其次，iOS Safari JS 非常慢。可笑的慢 - 头发拉得很慢。我的 iPad 1 safari JS 在我的 PC 上的基准测试比 Chrome 慢 38 倍。任何强制 jQuery 遍历和匹配选择器的事件委托类型都会显着降低您在 iOS 移动 Web 上的应用程序的速度。

话虽如此，我敢打赌，如果您使用 PhoneGap 并将其转换为实际的应用程序，它会运行良好，因为它不会依赖于 iOS safari JS 引擎。

简而言之，除非必须，否则不要在 iOS 中使用面向未来的事件观察器。如果您`.sidebar-expand`在 DOM 准备好后不添加节点，请改用它：

```
$j('.sidebar-expand').on('click', function(){... 
```

# vba - VBA Internet Explorer 自动化 - 下载文件时如何选择“打开”

> ID：10400795
> 
> 赞同：14
> 
> 时间：2012-05-01T16:24:52.927
> 
> 标签：vba, automation, internet-explorer-9, download

这是我在stackoverflow上的第一个问题！

我一直在寻找解决这个问题的方法，但没有找到任何帮助。我可能只是在搜索中使用了错误的关键字，但到目前为止我还没有运气。这是问题：

**在 VBA 中，如何从 Internet Explorer 的文件下载对话框中选择“打开”选项？**

只是为了进一步澄清，我说的是下载文件时在 IE9 屏幕底部弹出的橙黄色条。

我正在做一些 VBA 自动化以使用 Internet Explorer 从 Web 下载数百个 PDF，但是有一个中间步骤，在我获得实际 PDF 之前必须打开一个 .fdf 文件。所以我首先需要选择“打开”选项，这样我才能继续进行自动化的下一步。就像我之前说的，我已经做了很多搜索，到目前为止还没有运气。

我尝试过使用`SendKeys`，希望击球`Enter`能奏效，这是最后的努力，但没有奏效。

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-01T16:37:26.847

我在这里广泛地介绍了这一点。

**主题**：**VBA/VB.Net/VB6-点击IE下载窗口上的打开/保存/取消按钮-第一部分**

**链接**：[http ://www.siddharthout.com/2011/10/23/vbavb-netvb6click-opensavecancel-button-on-ie-download-window/](http://www.siddharthrout.com/2011/10/23/vbavb-netvb6click-opensavecancel-button-on-ie-download-window/)

和

* * *

**编辑 (IMP) 如果您使用的是 IE 9，请不要忘记阅读第 2 部分，因为它包含并涵盖了 IE 9 下载窗口的窗口结构**

* * *

**主题**：**VBA/VB.Net/VB6-点击IE下载窗口打开/保存/取消按钮-第二部分**

**链接**：[http ://www.siddharthout.com/2012/02/02/vbavb-netvb6click-opensavecancel-button-on-ie-download-window-part-ii/](http://www.siddharthrout.com/2012/02/02/vbavb-netvb6click-opensavecancel-button-on-ie-download-window-part-ii/)

上面的链接讨论了如何使用 API 来实现你想要的。

从第一个链接...

> 像你我一样，我们都有名字，同样的窗口也有“句柄”（hWnd）、类等。一旦你知道 hWnd 是什么，与那个窗口交互就更容易了。
> 
> Findwindow API 在这种情况下通过使用类名和窗口标题（“文件下载”）来查找特定窗口的 hWnd。“打开”、“保存”和“取消”按钮本身就是窗口，但它们是“文件下载”主窗口的子窗口。这意味着其中的每一个也将有一个 hWnd :) 要查找子窗口，我们不使用 FindWindow，而是使用 FindWindowEx。“打开”、“保存”和“取消”三个按钮都具有相同的类，即“按钮”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-25T04:50:42.883

类似帖子：[链接](https://stackoverflow.com/questions/26038165/automate-saveas-dialouge-for-ie9-vba)

```
 Option Explicit
    Dim ie As InternetExplorer
    Dim h As LongPtr
    Private Declare PtrSafe Function FindWindowEx Lib "user32" Alias "FindWindowExA" (ByVal hWnd1 As LongPtr, ByVal hWnd2 As LongPtr, ByVal lpsz1 As String, ByVal lpsz2 As String) As LongPtr

Sub Download()
    Dim o As IUIAutomation
    Dim e As IUIAutomationElement
    Set o = New CUIAutomation
    h = ie.Hwnd
    h = FindWindowEx(h, 0, "Frame Notification Bar", vbNullString)
    If h = 0 Then Exit Sub

    Set e = o.ElementFromHandle(ByVal h)
    Dim iCnd As IUIAutomationCondition
    Set iCnd = o.CreatePropertyCondition(UIA_NamePropertyId, "Open")

    Dim Button As IUIAutomationElement
    Set Button = e.FindFirst(TreeScope_Subtree, iCnd)
    Dim InvokePattern As IUIAutomationInvokePattern
    Set InvokePattern = Button.GetCurrentPattern(UIA_InvokePatternId)
    InvokePattern.Invoke
End Sub 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-10-12T22:16:24.380

我将快捷键发送到应用程序。在这里，它们适用于 IE11。抱歉，我无法在 IE9 中进行测试。如果您按住`Alt`，它可能会像 IE11 一样向您显示组合的另一个键。

注意：如果 IE 不是您机器上的活动窗口，则代码将不会按您的预期运行，因此它在调试模式下将无法工作。

*   快捷键：`Alt`+`O`
*   VBA：`Application.SendKeys "%{O}"`

# java - 处理数组的 Java 代码（编译但不确定它是否在做它要求的一切）

> ID：10400799
> 
> 赞同：0
> 
> 时间：2012-05-01T16:25:10.917
> 
> 标签：java, arrays

我有以下代码：

```
import java.util.Scanner;
import java.io.FileReader;
import java.io.FileNotFoundException;
import java.util.Arrays;

public class UserInterface
{
    public static void main(String[] args) throws FileNotFoundException {
        Scanner in = new Scanner(System.in); // for user input
        Scanner filein = new Scanner(new FileReader("products.txt")); // file of product information

        final int maxProducts = 10; // change this for maximum number of products in the catalog
        Product[] catalog = new Product[maxProducts]; // product information
        int productCount; // number of products read in from the file

        /*
         * You will need to add additional arrays and variables here.
         * The quantity array is given as an example:
         */
        int[] quantity = new int[maxProducts];
        double[] totalPrice = new double[maxProducts];
        int[] large = new int[maxProducts];
        int[] medium = new int[maxProducts];
        int[] small = new int[maxProducts];
        double[] shippingCost;
        double[] discount;

        // Read in the products from the file
        productCount = 0;
        while (filein.hasNext()) {
            catalog[productCount] = new Product();
            catalog[productCount].setName(filein.next());
            catalog[productCount].setUPC(filein.nextInt());
            catalog[productCount].setPrice(filein.nextDouble());
            catalog[productCount].setLargeCapacity(filein.nextInt());
            catalog[productCount].setMediumCapacity(filein.nextInt());
            productCount++;
        }

        // zero out all the totals and amounts to start a new order
        /* 
         * You will have to zero out all the quantity and total arrays and variables at the start
         * of each new order, or else you will end up with incorrect amounts.
         * The line below shows an easy way to fill an array with zeros, no matter how long it is:
         */
        Arrays.fill(quantity, 0);
        Arrays.fill(totalPrice, 0);
        Arrays.fill(large, 0);
        Arrays.fill(medium, 0);
        Arrays.fill(small, 0);

///////////// THIS IS LINE 56 ///////////////    

        // Ask the user to enter a quantity for each product, calculate totals and shipping boxes
        /* 
         * You will want to do this in a loop that goes through the array of products
         * (remember that the array may not be full - so you may not need to go to the end).
         * You should print out information about each product, then ask for a quantity for
         * that product, and store it in the quantity array.
         * Remember that you can call methods on the product objects even when they are in the
         * array e.g. catalog[i].getName()
         */
    for (int i = 0; i < catalog.length; i++){
          if (catalog[i] != null){
        System.out.println(catalog[i].getName());
          }
    }

        // Print the invoice line for each product ordered
        /*
         * You will want to do this in a loop that goes through the array of products.
         * Skip over products that were not ordered i.e. quantity is zero.
         */

        // Print the totals at the bottom of the invoice

        // Calculate the discounts and the final amounts, and print them

    }
} 
```

请转到上面代码中标记的第 56 行。这就是我正在研究的问题。我在下面有我的循环。它可以编译等，但我不确定这是否能满足问题的要求。

编辑：第 56 行开始像“要求用户输入每个产品的数量......”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T16:28:30.227

您正在显示输出，但您没有向用户询问输入数量。您将需要访问 System.In 并读取用户输入的数量。此外，当评论说您不应该时，您仍在迭代整个循环。通过检查 null，您走在正确的轨道上，但是一旦遇到 null，您应该做一些事情来结束循环。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T00:37:58.407

我会使用扫描仪进行输入。在我看来，您只是在输出目录数组的内容。如果您想输入金额，这可能会有所帮助。

```
for (int i = 0; i < catalog.length; i++){
      if (catalog[i] != null){
    System.out.println(catalog[i].getName());
    System.out.print("Quantity: ");
    quantity[i] = in.nexInt();}

      } 
```

# c++ - B 类中的 A 类初始化，包含指向 A 类的指针

> ID：10400802
> 
> 赞同：1
> 
> 时间：2012-05-01T16:25:31.860
> 
> 标签：c++, pointers, vector, initialization

我希望 A 类包含一些数据，而 B 类将包含指向该数据的指针。我通过返回对数据对象 A 的引用的函数提供对数据的访问。如果创建对象 B，则可以访问对象 A，但是如果创建指向 B 的指针，则等效操作会产生分段错误。像这样：

```
#include <iostream>
#include <vector>

class A {
public:
    A(const int pInt) {mInt = pInt;}
    void print() {std::cout << mInt << std::endl;}
private:
    int mInt; //some data
};

class B {
public:
   B() {mP1 = new A(1);} //initialise to 1
   ~B() {delete mP1;}
   A& access() {return *mP1;} //return reference to the data

private:
    A* mP1; //pointer to some data
};

int main() {
    B vB;
    vB.access().print(); //this works.

    B *vBptr;
    vBptr->access().print(); //Segmentation fault!

    std::vector<B*> vVec;
    vVec.resize(1);
    vVec[0]->access().print(); //Segmentation fault!
} 
```

我猜在创建 B *vBptr 时 B 对象没有被初始化？那么如何创建一个指向自动初始化的 B 对象的指针向量呢？

干杯。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T16:27:24.053

您需要初始化指针：

```
B *vBptr = new B;
vBptr->access().print(); 
```

同样适用于您的向量 - 您必须遍历元素并初始化它们。

```
for ( int i = 0 ; i < vVec.size() ; i++ )
   vVec[i] = new B; 
```

**请注意，您必须手动释放内存**：

```
delete vBptr; 
```

和

```
for ( int i = 0 ; i < vVec.size() ; i++ )
   delete vVec[i]; 
```

不要遇到内存泄漏。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-01T16:35:39.593

程序中有两个问题

```
B *vBptr; 
```

您的指针尚未初始化，虽然它是 B 类型的指针，但未指向 B 类型的有效对象。将其更改为

```
B *vBptr = new B();

vVec.resize(1); 
```

这里调整大小不会为向量的每个元素分配存储空间。您可以通过将初始化提供给向量的 resize 方法来使用实际对象初始化元素

```
vVec.resize(1,new B()); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-01T16:27:59.477

您实际上需要将指针设置为：

```
B *vBptr;          // bad -- uninitialized 
B *vBptr = new B;  // proper 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-01T16:47:13.103

如其他答案中所述，指针变量不会自动为其分配内存，因此您需要手动分配和释放内存，如下所示：

```
B vB;
vB.access().print(); //this works.

B *vBptr = new B;//allocate memory for vBptr
vBptr->access().print();
delete vBptr;//clean up of vBptr
std::vector<B*> vVec;
vVec.push_back(new B);
vVec[0]->access().print(); 
delete vVec[0]; 
```

但是，我建议不要使用原始指针管理内存，因为它很容易导致内存泄漏和错误。`vBptr->access().print()`例如，如果抛出异常，上面的代码会泄漏内存。您的`B`类违反了三规则（手动管理资源时的默认复制构造函数/赋值操作）。因此，如果您复制一个`B`对象，将会发生可怕的事情（准确地说是双重释放并访问已删除的内存）。

因此，我建议您使用某种智能指针。如果您使用 c++11，您可以使用`std::shared_ptr`or `std::unique_ptr`，否则它们是`std::tr1::shared_ptr`. 如果你的编译器没有 tr1，boost 也有`boost:shared_ptr`. 然后您的代码将如下所示：

```
class B {
public:
   B():mP1(new A(1)) {} //initialise to 1
   ~B() {} //no extra managing necessary
   A& access() {return *mP1;} //return reference to the data

private:
    std::shared_ptr<A> mP1; //pointer to some data
};

int main() {
    B vB;
    vB.access().print(); //this works.

    std::shared_ptr<B> vBptr(new B);
    vBptr->access().print();

    std::vector<std::shared_ptr<B> > vVec;
    vVec.push_back(std::shared_ptr<B>(new B));
    vVec[0]->access().print(); 
} 
```

如果您需要最小的开销并且使用 c++11`std::unique_ptr`是您的朋友，否则 iirc boost 具有`boost::unique_ptr`. 只是远离`std::auto_ptr`。除非您喜欢增加的复杂性/潜在的错误，或者您的代码对性能非常敏感（并且使用非常高效的自定义分配器），否则几乎没有理由手动管理您的内存。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-01T16:29:50.610

```
B *vBptr;
vBptr->access().print(); //Segmentation fault! 
```

嗯，当然; 您创建了一个变量来存储指向 B 对象的指针，但实际上并没有让它指向 B 对象。（提示：查看您为 B 类编写的代码，其中 B`A* mP1`指向某事？）

```
std::vector<B*> vVec;
vVec.resize(1);
vVec[0]->access().print(); //Segmentation fault! 
```

嗯，当然; 您创建了一个指向 B 对象的指针向量，然后调整向量的大小以添加一个元素；该元素是默认构造的指向 B 的指针。对于指针类型，默认构造是空指针，因此您也没有指向任何实际的 B 对象。

您的问题与任何 A 或 B 实现无关。

> 那我怎么能创建一个指向 B 对象的指针向量

为什么你认为你想这样做？只制作 B 对象的向量有什么问题？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-01T16:33:01.837

```
B vB;
vB.access().print();

B *vBptr = &vB; // or B *vBptr = new B;
vBptr->access().print();

std::vector<B*> vVec;
vVec.push_back(&vB);  // vVec.push_back(new B);
vVec[0]->access().print(); 
```

但是，有必要这样写 B NOT 吗？

```
class B {
 public:
  //   B() {}
  //   ~B() {}
  A& access() {return a;}

private:
   A a;}; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-02T09:19:46.467

感谢所有做出贡献的人。以下是我现在采用的实现，即使用 boost::shared_ptr：

```
#include <iostream>
#include <vector>
#include "boost/smart_ptr.hpp"

class A {
public:
    A(const int pInt) {mInt = pInt;}
    void print() const {std::cout << mInt << std::endl;}
    void set(const int pInt) {mInt = pInt;}
private:
    int mInt; //some data
};

class B {
public:
    B() {}  //leave A pointer as null
    ~B() { } //delete handled by shared_ptr
    A& access() {return *mP1;} //return reference to the data
    boost::shared_ptr<A>& access_A_ptr() {return mP1;} //return the pointer for assignment

private:
    boost::shared_ptr<A> mP1;
};

int main() {

    std::vector< boost::shared_ptr<A> > vVecA; //data to be shared
    for (unsigned int i = 0; i < 5; i++) {
        boost::shared_ptr<A> vAptr(new A(i));
        vVecA.push_back(vAptr);
        vVecA[i]->print();
    }

    vVecA[2]->set(123);

    for (unsigned int i = 0; i < vVecA.size(); i++) {
        vVecA[i]->print(); //changes to the underlying objects are reflected
    }

    boost::shared_ptr<B> vBptr(new B); //make an empty B
    vBptr->access_A_ptr() = vVecA[2]; //assignment of shared pointer

    vBptr->access().print();

    std::cout << "use count of vVecA[1] = " << vVecA[1].use_count() << std::endl; // = 1
    std::cout << "use count of vVecA[2] = " << vVecA[2].use_count() << std::endl; // = 2

    std::vector< boost::shared_ptr<B> > vVecB;

    //vVecB.resize(vVecA.size(), boost::shared_ptr<B> (new B) ); //resize and init to a SINGLE B object, NO!!!

    for (unsigned int i = 0; i < vVecA.size(); i++) {
        vVecB.push_back(boost::shared_ptr<B> (new B)); //filling array with separate empty Bs
        vVecB[i]->access_A_ptr() = vVecA[i];
        vVecB[i]->access().print(); // = 0,1,123,3,4
    }

    vVecA[2]->set(2); //changes to A objects reflected in the B objects

    for (unsigned int i = 0; i < vVecB.size(); i++) {
        vVecB[i]->access().print(); // = 0,1,2,3,4
    }

    std::cout << "use count of vVecA[1] = " << vVecA[1].use_count() << std::endl; // = 2
    std::cout << "use count of vVecA[2] = " << vVecA[2].use_count() << std::endl; // = 3

} 
```

这实际上已成为共享指针的练习。但是，仍然非常欢迎在任何方面发表评论。

谢谢！

# excel - 为不同列中数字的第一个实例返回 true

> ID：10400804
> 
> 赞同：1
> 
> 时间：2012-05-01T16:25:43.243
> 
> 标签：excel, excel-2007

我有一个这样的专栏： -

1

1

2

2

3

4

5

5

5

在另一列中，我只需要为第一次出现的数字显示 TRUE，否则为 FALSE。所以：-

1 对

1 错误

2 对

2 错误

3 对

4 对

5 对

5 错误

5 错误

请帮忙！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T16:32:38.300

B1：`=(COUNTIF(A$1:A1,A1)=1)`
B2：`=(COUNTIF(A$1:A2,A2)=1)`

等（您可以拖放公式）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T16:32:37.520

请尝试以下公式。这假设您的号码是从 C4 开始的。这是D4中的公式

```
=COUNTIF($C$1:$C3,C4)=0 
```

# jquery-mobile - 使用 PhoneGap 进行闪烁导航的 Jquery Mobile 代码

> ID：10400806
> 
> 赞同：5
> 
> 时间：2012-05-01T16:25:53.637
> 
> 标签：jquery-mobile, cordova

我相信这篇文章是解决我 [在页面之间导航时闪烁](https://stackoverflow.com/questions/5953753/flickering-when-navigating-between-pages)的问题的解决方案。具体来说：

```
$(document).bind("mobileinit", function()
{
   if (navigator.userAgent.indexOf("Android") != -1)
   {
     $.mobile.defaultPageTransition = 'none';
     $.mobile.defaultDialogTransition = 'none';
   }
}); 
```

我来自 C# 世界，对`jQuery`移动设备几乎一无所知。我想添加这个片段，但不确定在哪里。如果这很重要，我认为我会将它添加到其中，`jquery.mobile-1.1.0.rc.1.js`但我不知道在哪里，如果那是正确的文件。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-01T16:48:43.313

此代码必须在包含 jQuery Core 之后和包含 jQuery Mobile 之前运行。原因是要运行代码，jQuery 必须存在，但这个事件处理程序需要在 jQuery Mobile 初始化之前绑定。

例如：

```
<script src="http://code.jquery.com/jquery-1.6.4.min.js"></script>
<script>
$(document).bind("mobileinit", function()
{
   if (navigator.userAgent.indexOf("Android") != -1)
   {
     $.mobile.defaultPageTransition = 'none';
     $.mobile.defaultDialogTransition = 'none';
   }
});
</script>
<script src="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.js"></script> 
```

文档：http: [//jquerymobile.com/demos/1.1.0/docs/api/globalconfig.html](http://jquerymobile.com/demos/1.1.0/docs/api/globalconfig.html)

此外，UA 嗅探不是必需的，因为 jQuery Mobile 测试设备是否支持 CSS 3D 转换，并且只在支持它们的设备上使用漂亮的转换。这是在 jQuery Mobile 1.1.0+ 中为您完成的，但默认的回退转换是`fade`​​所以无论如何您都必须更改该默认值。

> **为非 3D 支持定义后备过渡**
> 
> 默认情况下，除淡入淡出之外的所有过渡都需要 3D 变换支持。缺少 3D 支持的设备将退回到淡入淡出转换，无论指定的转换如何。我们这样做是为了主动将 Android 2.x 等性能不佳的平台排除在高级转换之外，并确保它们仍然拥有流畅的体验。请注意，有些平台（如 Android 3.0）在技术上支持 3D 变换，但动画性能仍然很差，因此这并不能保证每个浏览器都 100% 无闪烁，但我们尝试负责任地针对这一点。
> 
> 对于不支持 3D 变换的浏览器，可以为每种过渡类型配置后备过渡，但默认情况下，我们将“fade”指定为后备。例如，这会将滑出过渡的后备过渡设置为“无”：

```
$.mobile.transitionFallbacks.slideout = "none" 
```

*来源：http: [//jquerymobile.com/demos/1.1.0/docs/pages/page-transitions.html](http://jquerymobile.com/demos/1.1.0/docs/pages/page-transitions.html)*

作为一般性观察，我注意到您将`if/then`语句放在事件处理程序中，您不妨将其放在外面，因此如果它不是 Android 设备，则永远不必发生事件绑定/触发。

例如：

```
<script src="http://code.jquery.com/jquery-1.6.4.min.js"></script>
<script>
if (navigator.userAgent.indexOf("Android") != -1)
{
    $(document).bind("mobileinit", function()
    {
      $.mobile.defaultPageTransition = 'none';
      $.mobile.defaultDialogTransition = 'none';
    });
}
</script>
<script src="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.js"></script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T19:57:30.963

我确实有同样的问题，网上的解决方案似乎都没有奏效。我正在使用 Android 2.3.6 在 Galaxy mini 上进行测试，就 UX 而言，甚至褪色也很糟糕。

摆弄我的代码，不幸的是，我发现这在一定程度上提高了我的性能

```
$(document).on("mobileinit", function(){
        $.mobile.defaultPageTransition = 'slide';
        $.mobile.transitionFallbacks='none';
}); 
```

就像奇迹一样，没有闪烁！偶尔会出现一些毛刺，但绝对比以前好！

# dos - JCXZ的优势是什么？

> ID：10400809
> 
> 赞同：1
> 
> 时间：2012-05-01T16:26:13.260
> 
> 标签：dos, x86-16, assembly

我有以下代码，

## 客观的：

显示一行 N 个`*`符号

## 代码：

```
MOV CX, N
MOV AH, 2
MOV DL, '*'
JCXZ END_P
BACK:
    INT 21H
    LOOP BACK
END_P: 
```

上面的例子是用来告诉如何使用的`JCXZ`，但我不明白。即使我删除`JCXZ`，它也会做同样的工作。请帮帮我。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T16:31:06.437

是什么让你认为没有它也会做同样的事情`jcxz`？`jcxz`如果 n 为零，会发生什么？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-01T16:31:33.797

如果 CX = 0，它肯定不会做同样的事情！如果 CX=0，则跳过 INT 21H 调用，否则执行。

# objective-c - 这个 ABaddressBook NSLog 是什么意思？

> ID：10400813
> 
> 赞同：0
> 
> 时间：2012-05-01T16:26:27.367
> 
> 标签：objective-c, ios, xcode, nslog, abaddressbook

我正在尝试按名称在地址簿中搜索电话号码，

```
-(void)textMessage{
ABAddressBookRef addressBook = ABAddressBookCreate();
NSMutableArray *array;
    for(int i = 0;i<[savedPeople count];i++){
        array = [[[NSMutableArray alloc]initWithArray:savedPeople]objectAtIndex:i];
        CFArrayRef people = ABAddressBookCopyPeopleWithName(addressBook, (CFStringRef)array);
        NSLog(@"%@",people);
    }
} 
```

我得到了这个的日志

```
2012-05-01 09:22:31.688 UpOut[5829:15803] (
    "<CPRecord: 0x84edf90 ABPerson>"
)
2012-05-01 09:22:31.694 UpOut[5829:15803] (
    "<CPRecord: 0x84ee1c0 ABPerson>"
) 
```

我不知道中间的字符串是什么意思，它是否正确返回？

## 编辑

```
for(NSString *name in savedPeople){
    CFArrayRef people = ABAddressBookCopyPeopleWithName(addressBook, (CFStringRef)name);
    CFTypeRef phoneProperty = ABRecordCopyValue((ABRecordRef)people, kABPersonPhoneProperty);
    NSLog(@"%@",phoneProperty);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T16:28:59.913

是的，它是[ABPerson](http://developer.apple.com/library/ios/#DOCUMENTATION/AddressBook/Reference/ABPersonRef_iPhoneOS/Reference/reference.html)记录。

你的代码正在做你想做的事，但写得很糟糕，`[[[NSMutableArray alloc]initWithArray:savedPeople]objectAtIndex:i];`是一个 NSString，而不是一个数组。

```
for(NSString *name in savedPeople)
    CFArrayRef people = ABAddressBookCopyPeopleWithName(addressBook, (CFStringRef)name); 
```

要从`ABPerson`查看文档中提取值。例如：

```
CFTypeRef phoneProperty = ABRecordCopyValue((ABRecordRef)people, kABPersonPhoneProperty); 
```

# android - 表面视图画布。@Override 按下键

> ID：10400818
> 
> 赞同：0
> 
> 时间：2012-05-01T16:26:43.863
> 
> 标签：android, android-layout, canvas, surfaceview, onkeydown

onKeyDown 方法不起作用。当我按下按钮时，位图 s 不会移动。当它直接通过设置 j=j+5 来完成时；在画布里面它工作。什么时候直接在 onkeydown j+5 中进行的，然后它也没有移动。

```
public class SmileyView extends SurfaceView implements SurfaceHolder.Callback {
        public SmileyView(Context context, AttributeSet attrs) {
            super(context, attrs);
            // TODO Auto-generated constructor stub
            holder = getHolder();
             s= BitmapFactory.decodeResource(context.getResources(),R.drawable.smiley);
             holder.addCallback(this);
             sd=context.getResources().getDrawable(R.drawable.lander_plain);
        }

        @Override
    public boolean onKeyDown(int keyCode, KeyEvent msg) {

        return rv.dokey();
        }
    private int i=100;private int j=0;
        private Bitmap s;private SurfaceHolder holder;private RenderView rv ;
         boolean grun=true;long t=0;private boolean key=false;private Drawable sd;volatile private int f=0;
        public void resume()
        {
            rv=new RenderView();
        }

        @Override
        public void surfaceChanged(SurfaceHolder arg0, int arg1, int arg2, int arg3) {
            // TODO Auto-generated method stub

        }

        @Override
        public void surfaceCreated(SurfaceHolder arg0) {
            // TODO Auto-generated method stub
            grun=true;
            if(rv!=null)
            rv.start();
        }

        @Override
        public void surfaceDestroyed(SurfaceHolder arg0) {
            // TODO Auto-generated method stub
        try {
            grun =false;
            rv.join();
            rv=null;
        } catch (InterruptedException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        }

    class RenderView extends Thread  {

        RenderView(){
        super();

        }
        @Override
        public void run()
        {
            SurfaceHolder h=holder;
            while(grun)
            {
                Canvas ca=null;
                try{ca = h.lockCanvas(null);
                   synchronized (h) {

                dodraw(ca);
                   }
                }
                finally
                {
                    if(ca!=null)
                    h.unlockCanvasAndPost(ca);
                }
            }
        }
        public void dodraw(Canvas canvas)

        {   canvas.drawColor(Color.BLACK);
            canvas.drawBitmap(s, j, j, null);

            sd.setBounds(10, 10, 230, 180);
            sd.draw(canvas);
            key =false;

            canvas.restore();
        }

         boolean dokey()
        {
            j=j+5;
            return true;
        }
    }

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T16:35:38.750

视图必须具有焦点才能接受关键事件，并且除了强制对元素进行焦点之外，没有好的方法可以让您的 SmileyView 获得焦点。相反，如果这个表面视图是屏幕上唯一的东西，则在您的活动中覆盖 onKeyDown 以传递关键事件：

```
public class MyActivity extends Activity {
  private SmileyView mSmileyView

  @Override
  protected boolean onKeyDown(int keyCode, KeyEvent event) {
    return mSmileyView.onKeyDown(keyCode, event);
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T16:43:13.523

你试过调试吗？j 应该是同步的。您从一个线程编辑它并在渲染线程中使用

# delphi - 如何正确实现 TBitmap 的扫描线访问？

> ID：10400819
> 
> 赞同：5
> 
> 时间：2012-05-01T16:26:45.693
> 
> 标签：delphi, graphics, bitmap, delphi-xe2, scanline

[根据Embarcadero](http://edn.embarcadero.com/article/29173)上的一篇文章，我正在尝试访问 Bitmap 的扫描线。使用扫描线如

```
for y := 0 to n do
begin
   line := bitmap.scanline [y];
   for x := 0 to n do line [x] := value; 
```

我之前实施过。我注意到访问扫描线需要相当多的时间，上面提到的文章提供了一个解决方案。我无法正确实现它。我的代码是：

```
unit SCTester;

interface

uses Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
     ExtCtrls;

type
   TRGBQuad = packed record
      b: uInt8;
      g: uInt8;
      r: uInt8;
      alpha: uInt8;
   end; // Record: TQuad //

// Override the definitions in Graphics.pas
   TRGBQuadArray = packed array [0..MaxInt div SizeOf (TRGBQuad) - 1] of TRGBQuad;
   PRGBQuadArray = ^TRGBQuadArray;

  TForm1 = class(TForm)
    Image: TImage;
    procedure ImageDblClick(Sender: TObject);
  end;

var Form1: TForm1;

implementation

{$R *.dfm}

procedure TForm1.ImageDblClick(Sender: TObject);
var Bitmap: TBitmap;
    q: TRGBQuad;
    x, y: NativeInt;
    FirstLine: PRGBQuadArray;
    idx: NativeInt;
    LineLength: NativeInt;
begin
   q.r := 0; q.g := 0;
   Bitmap := TBitmap.Create;
   Bitmap.Height := Image.Height;
   Bitmap.Width  := Image.Width;
   Bitmap.PixelFormat := pf32Bit;
   FirstLine := Bitmap.ScanLine [0];
   LineLength := (NativeInt (Bitmap.Scanline [1]) - NativeInt (FirstLine)) div SizeOf (TRGBQuad);
   try
      for y := Bitmap.Height - 1 downto 0 do
      begin
         for x := 0 to Bitmap.Width - 1 do
         begin
            q.b := (x xor y) mod 255;
            idx := y * LineLength + x;
            FirstLine [idx] := q;
         end; // for
      end; // for
      Image.Picture.Assign (Bitmap);
   finally
       Bitmap.Free;
   end; // try..finally
end;

end. 
```

当 y=1 和 x=0 时，我总是得到非法访问。LineLength 是负数（位图的宽度），但这可能是预期的。我究竟做错了什么？

**编辑：**上面的代码已更改以反映到目前为止处理的备注。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-01T20:08:15.093

为了不访问任何负面索引，我会这样做

```
procedure TForm1.Button1Click(Sender: TObject);
var Bitmap: TBitmap;
    q: TRGBQuad;
    x, y: LongInt;
    line{, FirstLine}: PRGBQuadArray;
    idx: NativeInt;
    LastLine: PRGBQuadArray;
    LineLength: NativeInt;
begin
   q.r := 0; q.g := 0;
   Bitmap := TBitmap.Create;
   Bitmap.Height := Image.Height;
   Bitmap.Width  := Image.Width;
   Bitmap.PixelFormat := pf32Bit;

   LastLine := Bitmap.ScanLine[Bitmap.Height - 1];
   LineLength := (NativeInt(Bitmap.Scanline[Bitmap.Height - 2]) - NativeInt(Lastline)) div SizeOf(TRGBQuad);
   try
      for y := 0 to Bitmap.Height - 1 do
      begin
         for x := 0 to Bitmap.Width - 1 do
         begin
            q.b := (x xor y) mod 255;
            idx := y * LineLength + x;
            LastLine [idx] := q;
         end; // for
      end; // for
      Image.Picture.Assign (Bitmap);
   finally
       Bitmap.Free;
   end; // try..finally
end; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T17:04:49.880

LineLength 对于很多位图来说都是负数，因为它们经常使用自底向上的方法来存储线条。[MSDN：BITMAPINFOHEADER](http://msdn.microsoft.com/en-us/library/dd183376%28v=vs.85%29.aspx)。所以这个解决方案应该针对这种情况进行修改。

# android - Android ListView 使用自定义行布局更改特定元素

> ID：10400820
> 
> 赞同：0
> 
> 时间：2012-05-01T16:26:46.143
> 
> 标签：android, listview, android-layout

我有一个带有 listView 的活动，它使用 XML 布局文件中定义的自定义行布局。行布局由几个字符串和一个 ImageView 组成，其中包含一个图标以反映用户对相应列表元素的决定。

对于列表视图的每个元素，使用相关菜单，用户可以选择一个操作，例如保留单击的元素、处理它或执行其他操作。最初，listView 的行用问号图标呈现，以表明没有为该条目选择任何操作。如果用户选择了一项操作，我想根据该操作更改图标，以便稍后向用户显示他为该元素决定的操作。

从 onContextItemSelected 中，如何访问行布局并动态更改 ImageView 中的图标？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T16:35:37.913

你需要重绘列表。我认为它在适配器 getItem 中，您可以在其中将内容设置为标签和图像。

因此，从列表适配器中的 onContextItemSelected 编辑项，然后调用 yourAdapter.notifyDataSetChanged();

# c# - 两个服务的 Windows Service Onstart 问题

> ID：10400821
> 
> 赞同：0
> 
> 时间：2012-05-01T16:26:47.873
> 
> 标签：c#, .net, service, windows-services

我在 servicebase 中有 2 个服务，它的 onstart 方法是无限循环（使用 AsyncReadContext 方式完成），但是当启动服务时，它正在启动列表中的第一个服务，并且永远不会进入第二个服务的 onstart。一些代码：

```
 ServiceBase[] ServicesToRun;

            ServicesToRun = new ServiceBase[]
            {
                            new Service1(),
                new Service 2(),
            };

            ServiceBase.Run(ServicesToRun); 
```

开始：

```
 protected override void OnStart(string[] args)
        {
//read MsMQ async way
} 
```

服务 1 正在读取队列，但服务 2 没有读取队列。当我将服务 2 更改为列表中的第一个然后服务 2 正在读取队列时，它的代码相同。这两种服务的队列是不同的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T16:52:45.097

You should kick off another thread in the OnStart - method which does the actual work.

For example with an anonymous method:

```
var t = new Thread(new ThreadStart(() => {
   //Actual work here
}));
t.Start(); 
```

This causes the OnStart method to finish right away and should also startup your second service.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T11:26:42.223

我的代码中有问题。两个服务 Service1 和 service 2 并且不是由 serviceinstaller 安装的。当我更改为 serviceIntaller 和 ServiceInstaller 为 ProjectInstaller。我是 1093 错误并且服务无法启动，这是因为一旦我更改为服务问题的类名，服务的服务名称就相同。

# c# - 当我从源文件编译应用程序时，默认的目标 .NET Framework 版本是什么？

> ID：10400825
> 
> 赞同：1
> 
> 时间：2012-05-01T16:27:14.630
> 
> 标签：c#, frameworks, .net

在构建器应用程序中，目标框架设置为版本 4，然后我将其更改为版本 2.0，突然我收到一条错误消息：

```
Error   1   No overload for method 'CreateProvider' takes 2 arguments 
```

这发生在这行代码上：

```
provider = CodeDomProvider.CreateProvider("CSharp", providerOptions); 
```

然后我只是将上面的行更改为：

```
provider = CodeDomProvider.CreateProvider("CSharp"); 
```

现在一切正常。但问题是当我不添加 ProviderOptions （包含编译器版本的字典项）时，哪个网络框架将成为目标？v2 还是 v4 ？

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T16:41:39.423

正如您在 MSDN 文档的 2.0 版本中看到的那样，在 2.0 版本的框架 CreateProvider 中没有重载以接受 providerOptions

[2.0 创建提供者](http://msdn.microsoft.com/en-us/library/6yzxs14d%28v=vs.80%29.aspx)

而从 4.0 版本开始，该方法被重载

[4.0 创建提供者](http://msdn.microsoft.com/en-us/library/6yzxs14d%28v=vs.100%29.aspx)

我认为在这种情况下将使用 2.0 框架。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T16:42:23.913

鉴于您在框架的 v2.0 中运行，我无法想象您可以针对任何其他版本的运行时。找到确认这一点有点棘手，但是您可以从较新版本的框架中定位旧框架，但您不能反过来做。我敢肯定，它会破坏时空连续体。

无论如何，这是 2.0 中 CodeDomProvider 的微软文档的链接 [http://msdn.microsoft.com/en-us/library/6yzxs14d.aspx](http://msdn.microsoft.com/en-us/library/6yzxs14d.aspx)

另一个是引用的 GetAllCompilerInfo 方法，您可以利用它来检查编译器设置。

[http://msdn.microsoft.com/en-us/library/system.codedom.compiler.codedomprovider.getallcompilerinfo.aspx](http://msdn.microsoft.com/en-us/library/system.codedom.compiler.codedomprovider.getallcompilerinfo.aspx)

# logging - 使用 Vala 进行日志记录

> ID：10400842
> 
> 赞同：11
> 
> 时间：2012-05-01T16:28:21.663
> 
> 标签：logging, vala, defensive-programming

我是 Vala 编程的新手，并且有使用 Java 和 .NET 的经验，但我还没有找到任何有用的关于如何使用 Vala 登录的信息。是否有任何有用的日志记录工具，如 log4j 或 log4net，或者有什么建议的方式来登录 Vala，并扩展到多个日志记录级别，如错误、警告、调试和跟踪？那么像断言和合同这样的防御性编程呢？是否有任何或建议的方法来进行防御性编程并获得带有堆栈跟踪和精确根本原因的最有用的日志？谢谢你的建议。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-05-01T21:05:51.207

**日志记录**

Vala 内置了一些相当强大的日志记录工具。您可以使用`debug()`、`message()`、`warning()`、`error()`和`critical()`作为稍微复杂的[`log()`](http://valadoc.org/#!api=glib-2.0/GLib.log)功能的快捷方式。所有都包含在基本（自动包含）[`GLib`命名空间](http://valadoc.org/#!wiki=glib-2.0/index)中。

如果你想重定向日志输出或将不同类型的消息发送到不同的目的地，你需要的一切都在[`GLib.Log`namespace](http://valadoc.org/#!api=glib-2.0/GLib.Log)中。您可能想阅读[有关日志记录的 glib 文档，](http://developer.gnome.org/glib/stable/glib-Message-Logging.html)以了解幕后发生的事情。

**防御性编程**

Vala 还包括对断言和合同的支持。简短版本：`assert()`and`assert_not_reached()`用于断言，and`requires()`用于`ensures()`合约的方法签名。[有关更多信息，请参阅关于断言和合同编程](http://live.gnome.org/Vala/Tutorial#Assertions_and_Contract_Programming)的教程部分。

**错误处理**

Vala 的错误处理有点奇怪：看起来与异常相似，但并不完全相同。[关于错误处理](http://live.gnome.org/Vala/Tutorial#Error_Handling)的教程部分很好地涵盖了基础知识，再次阅读[有关错误的 glib 文档](http://developer.gnome.org/glib/stable/glib-Error-Reporting.html)以更深入地了解幕后发生的事情可能会有所帮助。据我所知，没有办法从 Vala 错误中获取堆栈跟踪——只有一个类型和一个消息。

**最佳实践**

在最佳实践方面，我认为 Vala 与 Java 或 C# 足够相似，您已经知道的实践可以在一般意义上应用。我建议使用这些功能来感受一下 Vala 中的细节。祝你好运！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-04-21T18:07:30.820

作为对@chazomaticus 很好的答案的补充，您*可以*通过展开调用堆栈从 Vala 获取堆栈跟踪。

只是这并没有融入 Vala 语言。

我碰巧写了这样一个库：[`ivy`](https://github.com/I-hate-farms/ivy)

![常春藤](../Images/a43bf3cd17a3c05d2c643aef080e0f38.png)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-12-21T19:37:57.367

我想在@chazomaticus 回答中添加两件事：

1.  为什么我看不到任何调试/日志输出？

    您必须将环境变量设置`G_MESSAGES_DEBUG`为`all`. 文档中也提到了这一点，但没有进一步解释。例如[调试](https://valadoc.org/glib-2.0/GLib.debug.html)：

    ```
    public static int main (string[] args) {
        // Use "G_MESSAGES_DEBUG=all ./test" to print debug messages!

        // Output: ``** (process:<PID>): DEBUG: <FILENAME>:<LINE>: my 10\. debug message``
        debug ("my %d. %s", 10, "debug message");
        return 0;
    }

    valac --pkg glib-2.0 GLib.debug.vala

    G_MESSAGES_DEBUG=all ./GLib.debug

    ./GLib.debug 
    ```

    如果要[进一步限制](https://developer.gnome.org/glib/unstable/glib-running.html#id-1.2.7.3.2)输出，可以使用`error`, `warning`, `critical`, `message`, `info`,`debug`和`help`代替`all`。

2.  在哪里可以找到每个日志记录功能的文档？

    *   [Valadoc - GLib.debug](https://valadoc.org/glib-2.0/GLib.debug.html)
    *   [Valadoc - GLib.warning](https://valadoc.org/glib-2.0/GLib.warning.html)
    *   [Valadoc - GLib.info](https://valadoc.org/glib-2.0/GLib.info.html)
    *   [Valadoc - GLib.critical](https://valadoc.org/glib-2.0/GLib.critical.html)
    *   [Valadoc - GLib.message](https://valadoc.org/glib-2.0/GLib.message.html)
    *   [Valadoc - GLib.error](https://valadoc.org/glib-2.0/GLib.error.html)

进一步阅读：

*   [developer.gnome.org - GLib 参考手册 - 消息输出和调试函数 - 调试消息输出](https://developer.gnome.org/glib/stable/glib-Message-Logging.html#id-1.4.12.6.10)
*   [valadoc.org - GLib.log.default_handler](https://valadoc.org/glib-2.0/GLib.Log.default_handler.html)
*   [developer.gnome.org - 运行和调试 GLib 应用程序](https://developer.gnome.org/glib/unstable/glib-running.html)
*   [stackoverflow.com - Vala 如何支持 C 语言的**函数** **文件** **行**宏？](https://stackoverflow.com/questions/36055888/how-does-vala-support-the-c-languages-function-file-line-macros)

# c# - 验证字符串是否包含一些确切的单词

> ID：10400844
> 
> 赞同：2
> 
> 时间：2012-05-01T16:28:27.373
> 
> 标签：c#, regex

我有一个看起来像这样的字符串

```
string myString = "Master Language=\"C#\" MasterPageFile=\"~/masterpages/Libraries.master\""; 
```

1.  我需要验证它是否包含确切的单词 Master 和 Language="C#"
2.  我不能总是保证 Master 和 Language 会像这样放置，因此 Contains("Master Language") 这样的东西不会做

我已经玩`regex.IsMatch`了一段时间没有任何结果，所以如果有人能帮助我，我将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T16:51:10.850

由于您需要以任何顺序查找单词的出现，您可以使用以下模式：

```
string pattern = @"^(?=.*\bMaster\b)(?=.*Language=""C#"").+$"; 
```

这使用正面环视来检查 和 的`Master`存在`Language="C#"`。请注意单词边界元字符 的使用`\b`，它确保“Master”是完全匹配的。这可确保不会出现“MasterPage”中的部分匹配。

例子：

```
string[] inputs = 
{
    "Master Language=\"C#\" MasterPageFile=\"~/masterpages/Libraries.master\"", // true
    "Language=\"C#\" MasterPageFile=\"~/masterpages/Libraries.master\" Master", // true
    "Language=\"C#\" MasterPageFile=\"~/masterpages/Libraries.master\"" // false
};

string pattern = @"^(?=.*\bMaster\b)(?=.*Language=""C#"").+$";

foreach (var input in inputs)
{
    Console.WriteLine(Regex.IsMatch(input, pattern));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T16:30:16.820

您可以使用字符串类的 Contains() 方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T16:30:59.737

[您可以使用 IndexOf 方法LINK](http://msdn.microsoft.com/en-us/library/system.string.indexof.aspx)找出字符串中是否存在模式。

```
bool found = myString.IndexOf("Master Language=\"C#\"") != -1; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-01T16:32:32.877

```
string strTestMe = Regex.Replace(myString, ".*(Master Language=\"C#\").*", "$2")
If strTestMe <> ""
  DO STUFF
End If 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-01T16:32:48.413

我意识到这可能不是您正在寻找的答案，但老实说，在这里使用正则表达式似乎有点过头了。只需使用 string.Contains，您就可以获得更好的整体性能

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-05-01T16:56:58.647

这就是我所做的

```
bool containMaster = Regex.IsMatch(myString, @"\bMaster\b");
bool containLanguage = Regex.IsMatch(myString, "Language=\"C#\""); 
```

简单有效

# naudio - 麦克风音量计

> ID：10400845
> 
> 赞同：1
> 
> 时间：2012-05-01T16:28:28.333
> 
> 标签：naudio

我目前正在做一个个人项目来创建 ac# 小程序，让我知道人们什么时候拍手大笑（我只需要知道音量峰值）？使用笔记本电脑内部麦克风或输入线（用于外部麦克风）。我不是什么专家，所以我想知道是否有人可以指导我如何使用 NAudio 来实现我的目标。

此致。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-02T08:29:58.683

请查看我为 Coding4Fun 撰写的这篇[文章](http://channel9.msdn.com/coding4fun/articles/NET-Voice-Recorder)，了解如何使用 NAudio 创建 .NET 录音机。它包括一个音量计，源代码作为一个[开源项目](http://voicerecorder.codeplex.com/)提供。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-02-12T14:16:54.460

首先从 dll-files.com 下载最新版本的[**NAudio**](https://www.dll-files.com/naudio.dll.html)

然后将 NAudio 添加到您的项目参考中

然后在`using`组中插入下面给出的代码：

```
using NAudio;
using NAudio.CoreAudioApi;
using NAudio.Wave; 
```

添加上面给出的代码后，添加这个 void "For Mono Use" 或者如果你想要立体声，请往下

```
private void Mono_REC(ProgressBar pb)
{
    MMDeviceEnumerator MDE = new MMDeviceEnumerator();
    MMDevice MD = MDE.GetDefaultAudioEndpoint(DataFlow.Capture, Role.Multimedia);
    WaveIn mic = new WaveIn();
    mic.StartRecording();
    var AMI = MD.AudioMeterInformation;
    pb.Value = AMI.MasterPeakValue * 100;
} 
```

立体声

```
private void Stereo_REC(ProgressBar left, ProgressBar right)
{
    MMDeviceEnumerator MDE = new MMDeviceEnumerator();
    MMDevice MD = MDE.GetDefaultAudioEndpoint(DataFlow.Capture, Role.Multimedia);
    WaveIn mic = new WaveIn();
    mic.StartRecording();
    var AMI = MD.AudioMeterInformation;
    left.Value = AMI.PeakValues[0] * 100;
    right.Value = AMI.PeakValues[1] * 100;
} 
```

如果`mic.StartRecording();`在任何一个或两个空隙中都不起作用，则删除：

```
WaveIn mic = new WaveIn();
mic.StartRecording(); 
```

并添加：`WaveIn mic = new WaveIn();`在所有空隙之外并添加`mic.StartRecording();`以下任何一项：

```
private void Form1_Load(Object sender, EventArgs e) {}
private void Button1_Click(Object sender, EventArgs e) {} 
```

# dispose - 如何处理与 Caliburn Micro 一起使用的 Autofac 容器

> ID：10400849
> 
> 赞同：4
> 
> 时间：2012-05-01T16:28:57.827
> 
> 标签：dispose, autofac, caliburn.micro

我有一个 Winforms 菜单项，单击时会显示 WPF 表单。WPF 表单使用 Caliburn Micro，使用 Autofac 引导。

最近我突然想到，Caliburn 引导程序解决了根 Autofac 容器的依赖关系。因此，这些依赖项（例如，具有 1000 多个要绑定到网格的数据项的视图模型）永远不会被释放。

我想使用 Autofac 生命周期容器来管理处置，但是，我不确定如何使用 Caliburn 执行此操作。最初，我想为每个打开的 WPF 表单实例化一个 Caliburn 引导程序（带有自己的 Autofac 生命周期容器）。然后，当表单被释放时，引导程序可以被释放（以及生命周期容器）。

但是，从查看 Caliburn 源代码来看，似乎应该为整个应用程序创建一个引导程序。这是因为实例化引导程序似乎分配了静态字段来处理 UI 编组（也许还有其他我可能没有看到的东西）。

是否有人对关闭 WPF 表单时如何处理依赖项有任何建议/建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T23:44:26.547

我目前正在使用以下内容发布从 Castle 解析的视图模型（直到出现更好的东西！）。我不熟悉 AutoFac，但也许这种方法可能有用。在您的引导程序中：

```
protected override object GetInstance(Type serviceType, string key)
{
        // Get the instance from the container
        ...

        // If it's activatable, monitor it so we can release when closed.
        IDeactivate activatable = result as IDeactivate;
        if (activatable != null)
        {
            activatable.Deactivated += activatable_Deactivated;
        }
        return result;
}

    void activatable_Deactivated(object sender, DeactivationEventArgs e)
    {
        if (e.WasClosed)
        {
            ((IDeactivate)sender).Deactivated -= activatable_Deactivated;
            container.Release(sender); // or whatever AutoFac equivalent is...
        }
    } 
```

# objective-c - 线程在获取数据之前被释放。你知道为什么吗？

> ID：10400853
> 
> 赞同：1
> 
> 时间：2012-05-01T16:29:09.640
> 
> 标签：objective-c, ios, objective-c-blocks

我试图在一个视图控制器中有几个不同的 uitableviews。在此处的答案之一的帮助下，我能够做到这一点并将每个 tableviewcontroller 设置在单独的文件中。现在的问题是数据是从核心数据加载的，并且加载速度不够快，无法让主 tableview 显示它。我必须在数据加载后重新加载。问题是我正在尝试自动执行此操作。我设置了一个线程，当发布被调用时，应用程序在 uidocument 打开操作中崩溃。我不确定如何在数据加载完成之前让线程不被释放。这是一些代码。

```
[self.pplTableView setDelegate:self.peopleListController]; //pplTableView is the tableview in the mainviewcontroller that shows on the screen
[self.pplTableView setDataSource:self.peopleListController];
dispatch_queue_t fetchPpl = dispatch_queue_create("pplFetch", NULL);
dispatch_async(fetchPpl, ^{
        self.peopleListController.view = self.peopleListController.tableView;
    dispatch_async(dispatch_get_main_queue(),
                   ^{
                       [self.pplTableView reloadData];
                       NSLog(@"rows %@",[self.pplTableView numberOfSections]); 

                   });
});

dispatch_release(fetchPpl); 
```

这是来自委托数据的 tableviewcontroller

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    if(!self.peopleDatabase){

        NSURL *url = [[[NSFileManager defaultManager]URLsForDirectory:NSDocumentDirectory inDomains:NSUserDomainMask]lastObject];

        url = [url URLByAppendingPathComponent:@"Database"];
        //NSLog(@"URL ->  %@",url);
        self.peopleDatabase = [[UIManagedDocument alloc]initWithFileURL:url];
    }else {
        [self useDocument];
    }

}

-(void)useDocument{

if (self.peopleDatabase.documentState == UIDocumentStateClosed){
    [self.peopleDatabase openWithCompletionHandler:^(BOOL success){
        [self setupFetchResultsController];

    }];

} else if (self.peopleDatabase.documentState == UIDocumentStateNormal){
    [self setupFetchResultsController];
} 
```

}

```
self.peopleListController.view = self.peopleListController.tableView; 
```

当此行被调用时，控制器被加载并调用 useDocument。它不会等待 useDocument 完成继续。我怎么能让这个等待。

谢谢你！

# jquery - 如何为 jQuery 扩展插件？

> ID：10400864
> 
> 赞同：3
> 
> 时间：2012-05-01T16:29:49.000
> 
> 标签：jquery, jquery-plugins

我正在为 jQuery 编写插件。我有扩展插件的问题。例如，我编写了插件：[http://docs.jquery.com/Plugins/Authoring](http://docs.jquery.com/Plugins/Authoring)。

请参阅以下示例代码：

```
(function($){
    var i18n    = {};
    var methods = {};
    $.fn.myPlugin = function(options){
        //...
   };
})(jQuery); 
```

我怎样才能扩展财产`i18n`？

我希望能够支持存储在单独文件中的国际化插件设置。我应该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T16:37:55.787

例如：

```
// plugin definition
$.fn.hilight = function(options) {
  // Extend our default options with those provided.
  // Note that the first arg to extend is an empty object -
  // this is to keep from overriding our "defaults" object.
  var opts = $.extend({}, $.fn.hilight.defaults, options);
  // Our plugin implementation code goes here.
};
// plugin defaults - added as a property on our plugin function
$.fn.hilight.defaults = {
  foreground: 'red',
  background: 'yellow'
}; 
```

从这里[http://www.learningjquery.com/2007/10/a-plugin-development-pattern](http://www.learningjquery.com/2007/10/a-plugin-development-pattern)。

这是一个非常好的入门教程

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T16:32:23.500

jQuery 插件通常会像这样扩展选项：

```
var i18nOpts = $.extend({}, i18n, options.i18n); 
```

文档：[http ://docs.jquery.com/Plugins/Authoring#Defaults_and_Options](http://docs.jquery.com/Plugins/Authoring#Defaults_and_Options)

这发生在插件本身内部。

```
(function($){
    var i18n    = {};
    var methods = {};
    $.fn.myPlugin = function(options){
        var i18nOpts = $.extend({}, i18n, options.i18n);
   };
})(jQuery); 
```

`i18n`仅存在于该函数内部，要扩展它，您现在可以将选项传递给插件。

```
$('#myDiv').myPlugin({
    i18n: {
        option1: "value",
        option2: "Value2"
    }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-01T17:26:21.813

下面是我自己使用的一个方便的模板。

```
(function($){

var MyClass = function (element, options){

   this.options = $.extend({}, options);

   this.someFunction = function (){...}  //Public members

   var otherFunction = function(){...}   //Private members

   $(element).data('pluginInstance', this);   

}

$.fn.myPlugin = function(options){

    var myClassInstace = new MyClass(this, options);

    //Do other things with the object.
}

})(jQuery); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-23T11:46:57.807

您可以通过jQuery 的**$.extend(objectA, objectB)**方法来完成。我认为你最好开始学习 jquery 插件开发。来自基本的 hello world 教程，例如此链接[http://www.tectual.com.au/posts/3/How-To-Make-jQuery-Plugin-jQuery-Plugin-Hello-World-.html](http://www.tectual.com.au/posts/3/How-To-Make-jQuery-Plugin-jQuery-Plugin-Hello-World-.html) 或检查此帖子这里[https://stackoverflow.com/a/11611732/1539647](https://stackoverflow.com/a/11611732/1539647)或

# c++ - 产生内存映射的字符串流

> ID：10400868
> 
> 赞同：1
> 
> 时间：2012-05-01T16:30:01.810
> 
> 标签：c++, stringstream, dijkstra

我在使用字符串流时遇到了一些问题；每当我尝试在非空字符串上使用 in-operator (<<) 时，我都会在运行程序时打印出内存映射。这是代码：

```
for(int i=1 ; i<djikstra_result[0] ; i++)
{
    cout << "DEBUG 5:10 - Round " << i << endl;
    if(i==djikstra_result[0]-1)
    {
        ss << djikstra_result[i] << "km.";
        cout << "DEBUG 5:11" << endl;
    }
    else
    {
        int j = djikstra_result[i];
        cout << "DEBUG 5:13 - j=" << j << endl;
        ss << this->airport[j] << " - ";
        cout << "DEBUG 5:14" << endl;
    }
} 
```

ss 是我的字符串流，djikstra_result[] 是动态 int 数组，this-airport[] 是动态字符串数组。

代码编译得很好，但它只运行到**"cout << "DEBUG 5:13 - j=" << j << endl;"** . 从那时起的结果是：

```
调试 5:13 - j=0
*** 检测到 glibc *** ./graph: malloc(): 内存损坏：0x0000000000ec10f0 ***
======= 回溯：=========
/lib/libc.so.6(+0x77806)[0x7f9f8403a806]
/lib/libc.so.6(+0x7b928)[0x7f9f8403e928]
/lib/libc.so.6(__libc_malloc+0x6e)[0x7f9f8403f7de]
/usr/lib/libstdc++.so.6(_Znwm+0x1d)[0x7f9f848ab24d]
/usr/lib/libstdc++.so.6(_ZNSs4_Rep9_S_createEmmRKSaIcE+0x59)[0x7f9f84887d79]
/usr/lib/libstdc++.so.6(_ZNSs4_Rep8_M_cloneERKSaIcEm+0x2b)[0x7f9f8488874b]
/usr/lib/libstdc++.so.6(_ZNSs7reserveEm+0x3c)[0x7f9f8488927c]
/usr/lib/libstdc++.so.6(_ZNSs6appendERKSs+0x4f)[0x7f9f848896ff]
./graph[0x402138]
./graph[0x4032ce]
/lib/libc.so.6(__libc_start_main+0xfd)[0x7f9f83fe1c4d]
./graph[0x401439]
======= 内存映射：========
00400000-00404000 r-xp 00000000 00:15 15341576 /home/psyberion/Dropbox/algorithms/assign-3b/graph
00604000-00605000 r--p 00004000 00:15 15341576 /home/psyberion/Dropbox/algorithms/assign-3b/graph
00605000-00606000 rw-p 00005000 00:15 15341576 /home/psyberion/Dropbox/algorithms/assign-3b/graph
00ec1000-00ee2000 rw-p 00000000 00:00 0 [堆]
7f9f7c000000-7f9f7c021000 rw-p 00000000 00:00 0
7f9f7c021000-7f9f80000000 ---p 00000000 00:00 0
7f9f83fc3000-7f9f8413d000 r-xp 00000000 08:05 2887651 /lib/libc-2.11.1.so
7f9f8413d000-7f9f8433c000 ---p 0017a000 08:05 2887651 /lib/libc-2.11.1.so
7f9f8433c000-7f9f84340000 r--p 00179000 08:05 2887651 /lib/libc-2.11.1.so
7f9f84340000-7f9f84341000 rw-p 0017d000 08:05 2887651 /lib/libc-2.11.1.so
7f9f84341000-7f9f84346000 rw-p 00000000 00:00 0
7f9f84346000-7f9f8435c000 r-xp 00000000 08:05 2884391 /lib/libgcc_s.so.1
7f9f8435c000-7f9f8455b000 ---p 00016000 08:05 2884391 /lib/libgcc_s.so.1
7f9f8455b000-7f9f8455c000 r--p 00015000 08:05 2884391 /lib/libgcc_s.so.1
7f9f8455c000-7f9f8455d000 rw-p 00016000 08:05 2884391 /lib/libgcc_s.so.1
7f9f8455d000-7f9f845df000 r-xp 00000000 08:05 2887634 /lib/libm-2.11.1.so
7f9f845df000-7f9f847de000 ---p 00082000 08:05 2887634 /lib/libm-2.11.1.so
7f9f847de000-7f9f847df000 r--p 00081000 08:05 2887634 /lib/libm-2.11.1.so
7f9f847df000-7f9f847e0000 rw-p 00082000 08:05 2887634 /lib/libm-2.11.1.so
7f9f847e0000-7f9f848d6000 r-xp 00000000 08:05 25175504 /usr/lib/libstdc++.so.6.0.13
7f9f848d6000-7f9f84ad6000 ---p 000f6000 08:05 25175504 /usr/lib/libstdc++.so.6.0.13
7f9f84ad6000-7f9f84add000 r--p 000f6000 08:05 25175504 /usr/lib/libstdc++.so.6.0.13
7f9f84add000-7f9f84adf000 rw-p 000fd000 08:05 25175504 /usr/lib/libstdc++.so.6.0.13
7f9f84adf000-7f9f84af4000 rw-p 00000000 00:00 0
7f9f84af4000-7f9f84b14000 r-xp 00000000 08:05 2887636 /lib/ld-2.11.1.so
7f9f84ceb000-7f9f84cef000 rw-p 00000000 00:00 0
7f9f84d10000-7f9f84d13000 rw-p 00000000 00:00 0
7f9f84d13000-7f9f84d14000 r--p 0001f000 08:05 2887636 /lib/ld-2.11.1.so
7f9f84d14000-7f9f84d15000 rw-p 00020000 08:05 2887636 /lib/ld-2.11.1.so
7f9f84d15000-7f9f84d16000 rw-p 00000000 00:00 0
7fff9500a000-7fff9501f000 rw-p 00000000 00:00 0 [堆栈]
7fff951ff000-7fff95200000 r-xp 00000000 00:00 0 [vdso]
ffffffffff600000-ffffffffff601000 r-xp 00000000 00:00 0 [vsyscall]
中止

```

我以前遇到过这个问题，但除了某种内存问题之外，我无法弄清楚是什么原因造成的。有人可以帮忙吗？这是整个函数的代码：

```
string graph::get_shortest(string name1, string name2)
{
int* djikstra_result;
int result[this->nr_airport];
int source=-1;
int goal=-1;
bool source_found = false;
bool goal_found = false;
string final="";
string space=" - ";
stringstream ss;
cout << "DEBUG 5:1" << endl;
for(int i=0 ; i<this->nr_airport ; i++)
{
    cout << "DEBUG 5:2 - Round " << i << endl;
    if(name1==this->airport[i])
    {
        cout << "DEBUG 5:3" << endl;
        source = i;
        source_found = true;
    }
    else if(name2==this->airport[i])
    {
        cout << "DEBUG 5:4" << endl;
        goal = i;
        goal_found = true;
    }
}
cout << "DEBUG 5:5" << endl;
if(!source_found || !goal_found)
{
    throw "Starting point or destination not found";
}
cout << "DEBUG 5:6" << endl;
for(int i=0 ; i<this->nr_airport ; i++)
{
    result[i] = -1;
    cout << "DEBUG 5:7 - Round " << i << endl;
}
cout << "DEBUG 5:8" << endl;
djikstra_result = djikstra(source, goal);
cout << "DEBUG 5:9" << endl;
for(int i=1 ; i<djikstra_result[0] ; i++)
{
    cout << "DEBUG 5:10 - Round " << i << endl;
    if(i==djikstra_result[0]-1)
    {
        ss << djikstra_result[i] << "km";
        cout << "DEBUG 5:11" << endl;
    }
    else
    {
        int j = djikstra_result[i];
        cout << "DEBUG 5:13 - j=" << j << endl;
        //string val = this->airport[j];
        cout << "DEBUG 5:14" << endl;
        ss << this->airport[j];
        cout << "DEBUG 5:15" << endl;
    }
}
ss >> final;
return final;   
} 
```

编辑：

数组 this->airport[] 声明如下：

```
this->cap_airport = 1;
this->airport = new string[this->cap_airport]; 
```

当我向数组中添加一些东西时，我使用以下函数对其进行扩展：

```
void graph::expand_list()
{
if(this->nr_airport==this->cap_airport)
{
    this->cap_airport++;
    string* temp = new string[this->cap_airport];
    for(int i=0 ; i<this->nr_airport ; i++)
    {
        temp[i] = "";
        if(this->airport[i]!="")
        {
            temp[i] = this->airport[i];
        }
    }
    delete [] this->airport;
    this->airport = temp;
}
} 
```

我这样做是为了避免分配比需要更多的空间，并且我只在从文件读取时将信息添加到数组中。

编辑：

去掉**<<"-"后；**从字符串来看，似乎取得了一些进展。我在我的主函数中调用函数**get_shortest(string name1, string name2)**，如下所示：

```
graph g1;
cout << g1.get_shortest("A","E") << endl; 
```

现在，当我运行程序时，我可以看到更多输出：

```
调试 5:15
调试 5:10 - 第 5 轮
调试 5:11
AAAA0公里
*** 检测到 glibc *** ./graph: free(): invalid pointer: 0x0000000001ba7070 ***
======= 回溯：=========
/lib/libc.so.6(+0x77806)[0x7f400d9cf806]
/lib/libc.so.6(cfree+0x73)[0x7f400d9d60d3]
//以此类推

```

所以问题似乎与字符串流本身无关。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T10:19:12.750

我在程序的其他部分发现了问题；内存映射是无效内存操作的结果，但它没有按照建议从 djikstra_result[] 或 this->airport[] 中读取。仅仅试图从数组中的无效位置读取将导致分段错误。问题是我在函数 djikstra(int source, goal) 中试图*将*数据添加到数组中的无效位置。这是代码：

```
result = new int[nr_visited];
for(int i=0 ; i<nr_visited+2 ; i++)
{
    if(i==0)
    {
        result[i] = nr_visited;
    }
    else if(i==nr_visited+1)
    {
        result[i] = distance;
    }
    else
    {
        result[i] = route[i-1];
    }
}
return result; 
```

我创建了一个长度为 nr_visited 的动态 int 数组，但我尝试将数据放在 nr_visited+1 的位置，这是无效的。这会导致内存映射。因此，解决方法是声明长度为 nr_visited+2 的 int 数组：

```
result = new int[nr_visited+2]; 
```

所以，现在，一切正常。

# javascript - 使用 Handlebars.js 处理 executeSql 语句的结果

> ID：10400870
> 
> 赞同：0
> 
> 时间：2012-05-01T16:30:05.983
> 
> 标签：javascript, mustache

这是一个简化的场景：

```
var dbo = openDatabase('xxx','1.0','xxx', 1048576);
myPromise = new $.Deferred();
dbo.transaction(function(myTrans) {
    myTrans.executeSql(
        'SELECT * FROM myTable',
        [], 
        function(tx, result) {
            myPromise.resolve(result);
        }
    );
});
myPromise.done(function(result) {
    var X = $('#result-template').html();
    var template = Handlebars.compile(X);
    template(result.rows);
}); 
```

我认为一切都在工作到第二行到最后一行 - 模板（result.rows）行。

编辑：这是一个[jsFiddle](http://jsfiddle.net/PhillipSenn/GUGjS/)，包括删除表格、创建表格、填充表格、从中选择和（尝试）显示结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T19:37:48.863

最后一行应该是这样的：

```
$('ul').append(template(data)); 
```

投票给佩德罗！

# c++ - C++ 等价于 Python getattr

> ID：10400874
> 
> 赞同：7
> 
> 时间：2012-05-01T16:30:29.127
> 
> 标签：c++, python, serialization, boost, getattr

在 python 中，有一个名为 getattr 的函数，如下所示：

```
class MyObject():
    def __init__(self):
        self.xyz = 4

obj = MyObject()
getattr(obj, 'xyz') 
```

对 getattr 的调用将返回 4。

在 C++（不是 Visual C++）中有类似的方法吗？

是否有任何具有此功能的库，我可以使用字符串查找对象的成员变量？

我试图找到一种方法来查找我无法更改的 C++ 类中的公共数据成员。所以我不能使用映射将字符串文字映射到值。也许就像一个带有宏的“unstringify”？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-01T16:35:05.607

您所要求的通常称为**Introspection**。

C++ 语言本身不支持自省。你可以模仿它，但这就是它的程度。

您提出的 API 中还有另一个问题：您将如何制定方法的返回类型？有*一个*类`boost::any`适合存储该项目，但如果您不知道它的类型，您将无法使用它做任何有用的事情。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-01T16:37:34.543

标准 C++ 中没有这样的东西。考虑结构或类的实际工作方式：

```
struct MyStruct {
  int a;
  int b;
}; 
```

假设 an`int`的大小为 32 位，则`MyStruct`'s的位置`b`始终与 的位置相距 4 个字节`a`。该*偏移*算术由编译器预先处理。这就是 C 访问成员数据如此之快的原因：没有运行时查找！

因此，如果我想`"b"`在运行时查找，我必须找到它在结构中的位置。为此，编译器必须生成一个偏移表以存储在代码中的某个位置。对于一种不会有任何隐藏的低效率的语言来说，这是一个很大的开销。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T16:35:30.270

不幸的是，我不知道。这需要编译器的特殊支持，因为当前的编译器不存储这种反射所需的任何类型的元数据

# c# - 使用WebRequest获取cookies自动登录Sharepoint Online，报错

> ID：10400875
> 
> 赞同：0
> 
> 时间：2012-05-01T16:30:34.213
> 
> 标签：c#, http, sharepoint-2010, httpwebrequest

我正在按照本教程远程验证 Sharepoint Online，但我是在 C# 中进行的。

[http://allthatjs.com/2012/03/28/remote-authentication-in-sharepoint-online/](http://allthatjs.com/2012/03/28/remote-authentication-in-sharepoint-online/)

我可以毫无问题地从 STS 获取 SAML，但我似乎无法将此令牌发送到 Sharepoint 以接收 Cookie 以便登录。下面是我的代码，请原谅任何明显的错误，我是新手！

```
 //Send cookie to SPO. The token is from STS.
        byte[] spbyteArray = Encoding.UTF8.GetBytes(theToken);
        WebRequest sprequest = WebRequest.Create("https://login.microsoftonline.com/login.srf?wa=wsignin1.0&rpsnv=2&ct=1335885737&rver=6.1.6206.0&wp=MBI&wreply=https%3A%2F%2Fcamida.sharepoint.com%2F_forms%2Fdefault.aspx&lc=1033&id=500046&cbcxt=mai&wlidp=1&guest=1");
        sprequest.Method = "POST";
        sprequest.ContentLength = spbyteArray.Length;
        sprequest.ContentType = "application/x-www-form-urlencoded";
        sprequest.Headers.GetType().InvokeMember("ChangeInternal", BindingFlags.NonPublic | BindingFlags.Instance | BindingFlags.InvokeMethod, null, sprequest.Headers, new object[] { "Host", "mydomain.sharepoint.com" });
        Stream spdataStream = sprequest.GetRequestStream();
        spdataStream.Write(spbyteArray, 0, spbyteArray.Length);
        spdataStream.Close();

        //Get response from SPO
        WebResponse spresponse = sprequest.GetResponse();
        spdataStream = spresponse.GetResponseStream();
        StreamReader spreader = new StreamReader(spdataStream);

        // Read the content.
        string spresponseFromServer = spreader.ReadToEnd(); 
```

如果我使用教程中的 URL，我会收到 403 禁止。我使用的 URL 是当我到达[http://mydomain.sharepoint.com时它重定向到的 URL](http://mydomain.sharepoint.com)

非常感谢任何帮助和建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T16:23:15.513

从 SharePoint 请求时，您必须设置用户代理，否则它会返回 403 此行；

```
 sprequest.UserAgent = "Mozilla/5.0 (Windows NT 6.0; rv:12.0) Gecko/20100101 Firefox/12.0"; 
```

是不是都花了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T16:51:16.097

您似乎没有添加任何 cookie，这可能是必需的。如果将[WebRequest](http://msdn.microsoft.com/en-us/library/system.net.webrequest.aspx)转换为[HttpWebRequest](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.aspx)，则可以使用[cookie](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.cookiecontainer.aspx)。请参阅[使用 WebBrowser cookie 的 c# WebRequest](https://stackoverflow.com/questions/650536/c-sharp-webrequest-using-webbrowser-cookie)。

此外，我会熟悉[Fiddler 之](http://www.fiddler2.com/fiddler2/)类的工具，以检查您从浏览器发送的请求和响应。这使您可以准确地看到来回发送的内容，以便您可以尝试在 C# 中复制/模拟请求。

# perl - 如何使用 tr/// 运算符中的变量计算模式数量？

> ID：10400877
> 
> 赞同：1
> 
> 时间：2012-05-01T16:30:40.320
> 
> 标签：perl, variables, tr

我想计算核苷酸的出现次数（字符串中的字母“A、T、G、C”）。我试图为此使用`tr///`运算符，但它在下面的代码中每次都返回零计数。

仅当我在`tr///`运算符中使用变量时才会发生这种情况。如果我单独输入单个字母，它就可以工作。我想知道我们是否可以在`tr///`运算符中使用变量进行模式匹配（和计数）。如果可以的话，有人告诉我如何修改我的代码。

稍后我计划计算密码子的数量（~64）。因此麻烦。珍惜你的时间。谢谢！

```
#!/usr/bin/perl

use strict;
use warnings;

my $orf = "ATGCTAGCTAGCATAGAGCTAGCTA";
my @atgc = qw(A T G C);
my %hash = ();

foreach my $nt(@atgc) {
  $hash{$nt} = ($orf =~ tr/$nt//);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-01T16:37:38.490

“”中没有“ `$`”、“ `n`”或“ `t`”的实例`ATGCTAGCTAGCATAGAGCTAGCTA`，因此`tr`正确返回零。

如果要构建`tr///`运算符，则需要对其进行解析和编译。

```
my %counts;
for my $nt (@atgc) {
   $counts{$nt} = eval "\$orf =~ tr/\Q$nt\E//";
} 
```

但我不会使用`tr///`.

```
my %atgc = map { $_ => 1 } @atgc;
my %counts;
++$counts{$nt} for grep $atgc{$_}, split //, $orf; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-01T16:37:39.193

不幸的是，Perl 不会将变量插入到`tr///`. 您将不得不使用正则表达式：

```
use strict;
use warnings;

my $orf = "ATGCTAGCTAGCATAGAGCTAGCTA";
my @atgc = qw(A T G C);
my %count;

$count{$1}++ while $orf =~ /([@atgc])/g;

printf "%s => %d\n", $_, $count{$_} for @atgc; 
```

**输出**

```
A => 8
T => 6
G => 6
C => 5 
```

* * *

**谨防**

这不是 - 正如它可能出现的那样 - 匹配字符串数组中的任何一个的通用解决方案。正在发生的事情是`@atcg`被插入到正则表达式中，就好像它在一个*双引号字符串*中一样。这意味着 Perl 将使用`$"`内置变量（默认设置为单个空格）将其转换为等效于`join $", @atgc`.

所以代码实际上看起来像

```
$count{$1}++ while $orf =~ /([A T G C])/g; 
```

它将匹配空格和字母，并且如果`@atgc`在正则表达式字符类中包含任何特殊内容，例如`^`,`]`或`-`.

不必要地计算空格应该不是问题，但是如果您的列表可能包含符号，那么这不是您应该使用的解决方案。

每个 ASCII 字符的计数可以安全地写为

```
$count{$1}++ while $orf =~ /(.)/sg; 
```

`%count`并且可以简单地忽略散列中不需要的信息。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-01T16:35:32.063

```
$hash{$nt} = eval "\$orf =~ tr/\Q$nt\E//" 
```

应该做的工作。也许这不是最有效的解决方案。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-01T17:40:49.343

你可以使用`s///g`：

```
#!/usr/bin/env perl

use strict; use warnings;

my $orf = "ATGCTAGCTAGCATAGAGCTAGCTA";
my @atgc = qw(A T G C);

my %hash = map {$_ => $orf =~ s/$_/$_/g } @atgc; 
```

输出：

```
---
答：8
C: 5
克：6
时间：6
```

如果源字符串真的很长，您可以将其视为保存一段时间的内容并一次读取一个字节，假设字符保证为 ASCII。

```
#!/usr/bin/env perl

use strict; use warnings;

my $orf = "ATGCTAGCTAGCATAGAGCTAGCTA";
my %atgc = map { $_ => undef } qw(A T G C);

use YAML;
print Dump count(\$orf, \%atgc);

sub count {
    my $src_ref = shift;
    my $lookup = shift;

    my %count;

    open my $src, '<', $src_ref or die $!;
    {
        local $/ = \1;
        exists $lookup->{$_} and $count{ $_ } += 1 while <$src>;
    }
    close $src;

    return \%count;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-01T18:31:31.633

您不需要正则表达式等来执行此操作，您只需要遍历一个字符串：

```
my $orf = "ATGCTAGCTAGCATAGAGCTAGCTA";
my %nt;

$nt{$_}++ foreach (split('', $orf)); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-01T19:37:02.980

做一个模式编译器。

```
sub make_counter {
  my @sequences = @_;

  my $pattern = "(?:" . join("|", map quotemeta, @sequences) . ")";

  my $compiled = eval q<
    sub {
      local($_) = @_;
      my $n = () = /$pattern/g;
    }
  >;

  if (defined $compiled) {
    return $compiled;
  }
  else {
    die "$0: internal: counter compilation failed:\n$@\n";
  }
} 
```

使用[`quotemeta`](http://perldoc.perl.org/functions/quotemeta.html)，我们强制序列中的所有字符仅匹配自身，没有特殊含义。[Perl FAQ 的第 4 节](http://perldoc.perl.org/perlfaq4.html#How-can-I-count-the-number-of-occurrences-of-a-substring-within-a-string?)描述了计数匹配的时髦位：

> 另一个版本在列表上下文中使用全局匹配，然后将结果分配给一个标量，产生匹配数的计数。
> 
> ```
> $count = () = $string =~ /-\d+/g; 
> ```

请注意，它可以容忍序列中的垃圾。例如，用

```
my @nucleotides = qw/ G A T C /;

my $numnuc = make_counter @nucleotides;
print $numnuc->("xGxAxTxxxxTyA1C2A"), "\n"; 
```

输出：

```
7
```

计数密码子

```
my @codons = qw(
  TTT TCT TAT TGT TTC TCC TAC TGC TTA TCA TAA TGA
  TTG TCG TAG TGG CTT CCT CAT CGT CTC CCC CAC CGC
  CTA CCA CAA CGA CTG CCG CAG CGG ATT ACT AAT AGT
  ATC ACC AAC AGC ATA ACA AAA AGA ATG ACG AAG AGG
  GTT GCT GAT GGT GTC GCC GAC GGC GTA GCA GAA GGA
  GTG GCG GAG GGG
);

my $numcod = make_counter @codons;
print $numcod->("GAG-GGG!AGG,TAT#TTT"); 
```

请注意，任何垃圾（如果存在）必须出现*在*密码子序列之间。

输出：

```
5
```

# ruby-on-rails - Rails 和导入 CSV 问题？

> ID：10400878
> 
> 赞同：1
> 
> 时间：2012-05-01T16:30:48.297
> 
> 标签：ruby-on-rails, csv

这似乎是一个非常小的错误，但我找不到任何解决此问题的方法。我正在尝试在我的 rails(3.2) 应用程序（ruby 1.9.3）中使用 CSV gem，但我收到错误“NoMethodError”。我的控制器是：

```
require 'csv'

def import
  file = params[:file] <-- error
  CSV.parse(file, :headers => false) do |row|
      Event.new(:Ename => row[0], :Edate => row[1], :Elocation => row[2], :Edesc => row[3], :Oname => row[4], :Oemail => row[5], :Odetail => row[6])
  end
end 
```

我从用户可以上传 csv 文件的视图中获取此文件。我得到一个 NoMethodError（nil:NilClass 的未定义方法'nil'）。我最好的猜测是我使用这种方法是错误的，但是我的下一个问题是如何解析 Csv 数据？我想从我的视图中检索文件，然后将数据解析到数据库中。我怎样才能打开相同的文件？上述方法不正确吗？快速说明一下，我尝试使用“FasterCSV”gem，但得到了“使用标准 FasterCsv 1.9.2 gem”。我不得不从 fastcsv 更改为标准 csv，因为部署到 heroku 的 gem 出现了问题。

忘了给视图文件，

```
<%= form_tag({:action => :import}, :multipart => true) do %>
<%= file_field_tag 'file' %>
<% end %> 
```

这是基本的。我得到的错误是关于 parse 方法的。我确实查看了文档，发现我应该使用一个字符串。但我认为'params [：file]'给了我这个。抱歉，我对 Rails 比较陌生..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T22:36:22.787

您的代码可能如下所示：

```
if request.post? && params[:file].present?
  infile = params[:file].read

  CSV.parse(infile) do |row|

  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T17:48:17.243

CSV.parse 需要一个字符串而不是文件[http://ruby-doc.org/stdlib-1.9.3/libdoc/csv/rdoc/CSV.html](http://ruby-doc.org/stdlib-1.9.3/libdoc/csv/rdoc/CSV.html)，请尝试使用 CSV.read

@tommasop 也正确，您的文件可能不会保留在文件系统上。确保先保存

# c# - MVC .NET - 是否有允许基于权限的系统的安全框架

> ID：10400879
> 
> 赞同：1
> 
> 时间：2012-05-01T16:30:49.367
> 
> 标签：c#, asp.net-mvc-3, security, rbac

我是 MVC .Net 的新手。我想实现一个 RBAC 系统。我有某些成员可以执行的某些操作/权限。

是否有允许我这样做的安全框架？

**更多信息**

我正在寻找类似于论坛的东西 - 用户可以发布新帖子，回复他们等。另一方面，版主应该有权修改帖子，禁止用户等以及那些提供给普通用户的权限。

我读到.NET 框架提供了一个成员表。我对此没有太多了解，但据我了解，它只是将用户分组为某些成员。它没有权限的概念。

我是否必须在 Membership 表的顶部添加另一层（似乎我正在重新发明轮子），或者是否有一个框架已经这样做了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T16:32:12.177

您应该看看 Rhino Security - 它允许您定义自己的操作并将权限应用于特定组/用户/等

[http://ayende.com/blog/3109/rhino-security-overview-part-i](http://ayende.com/blog/3109/rhino-security-overview-part-i)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T16:33:47.707

阅读[成员资格](http://msdn.microsoft.com/en-us/library/yh26yfzy.aspx)和[角色](http://msdn.microsoft.com/en-us/library/aa478950.aspx)提供者。它们旨在满足您的要求。

> 角色提供者的基本工作是与包含角色数据的数据源接口，将用户映射到角色，并提供创建角色、删除角色、将用户添加到角色等的方法。Microsoft .NET Framework 的 System.Web.Security 命名空间包括一个名为 RoleProvider 的类，它定义了角色提供者的基本特征。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T17:04:41.883

您可以使用具有成员资格提供程序的角色来执行基于权限的简单安全性。您只需定义一个角色“管理员”，然后根据该角色设置权限。

如果您需要更高级的权限（例如允许拒绝等），那么您将需要做更多的工作。

但是，您说您正在寻找 RBAC（基于角色的访问控制），而 asp.net 已经内置了它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-01T17:40:27.207

您可以使用会员资格提供程序，但使用起来可能很复杂，而且经常令人困惑。我会从小处着手，逐步向上，Membership Provider 非常适合单点登录 (SSO) 之类的事情，在这种情况下，您有多个应用程序但只有一个身份验证点。

否则，使用 MVC 中的 AuthorizeAttribute。您可以对它进行子类化并创建完全符合您需要的属性扩展。

# java - 无法在 JavaFX 应用程序中找到 RXTX 本机 DLL

> ID：10400881
> 
> 赞同：0
> 
> 时间：2012-05-01T16:31:01.417
> 
> 标签：java, windows, netbeans-7, rxtx

我正在构建需要通过串行端口与读卡器交互的桌面 JavaFX 2.0 应用程序。所以我使用的是 RxTx 库版本 2.1-7r2 32bit。

为了进行一些初始测试/学习，我在一个 Java 控制台应用程序中构建了 RxTx 功能，并按照说明将本机 DLL 和 jar 文件复制到我的各种 32 位 JDK 版本 jdk1.7.0_04 目录中，并使其运行良好。

然后，我创建了一个带有原始 UI 的 JavaFX 应用程序，并开始将 RxTx 代码迁移到这个新项目。这个 JavaFX 应用程序指向我用于控制台应用程序的同一个 32 位 JDK。

JavaFX 应用程序完美地定位了 jar 文件，因为我可以导入 gnu.io.*，然后编写 NetBeans 以及 JavaDocs、自动完成等正确识别的代码。不幸的是，它在执行时返回以下错误，看起来很可疑未找到本机 DLL：

```
Exception in Application start method
java.lang.reflect.InvocationTargetException
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at com.javafx.main.Main.launchApp(Main.java:486)
    at com.javafx.main.Main.main(Main.java:638)
Caused by: java.lang.RuntimeException: Exception in Application start method
    at com.sun.javafx.application.LauncherImpl.launchApplication1(Unknown Source)
    at com.sun.javafx.application.LauncherImpl.access$000(Unknown Source)
    at com.sun.javafx.application.LauncherImpl$1.run(Unknown Source)
    at java.lang.Thread.run(Thread.java:722)
Caused by: java.lang.NoClassDefFoundError: gnu/io/CommPortIdentifier
    at testfxscreens.TestFXScreens.setupSerialPort(TestFXScreens.java:186)
    at testfxscreens.TestFXScreens.start(TestFXScreens.java:61)
    at com.sun.javafx.application.LauncherImpl$5.run(Unknown Source)
    at com.sun.javafx.application.PlatformImpl$4.run(Unknown Source)
    at com.sun.javafx.application.PlatformImpl$3.run(Unknown Source)
    at com.sun.glass.ui.win.WinApplication._runLoop(Native Method)
    at com.sun.glass.ui.win.WinApplication.access$100(Unknown Source)
    at com.sun.glass.ui.win.WinApplication$2$1.run(Unknown Source)
    ... 1 more
Caused by: java.lang.ClassNotFoundException: gnu.io.CommPortIdentifier
    at java.net.URLClassLoader$1.run(URLClassLoader.java:366)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
    ... 9 more 
```

我查看了 RxTx 主页并找到了上述错误的示例解决方案，但它只是提到您的 JDK 中可能没有正确的 DLL 和 JAR 文件。

这真的很奇怪，因为我能够使用相同的 JDK 目录获得控制台应用程序，并且运行良好。我希望我在做一些明显错误的事情，但我并没有摆弄项目设置让我觉得我搞砸了。

是否有任何 JavaFX 2.0 特定的项目设置可以使 RxTx 工作？

任何关于在哪里寻找这个问题的指示，非常感谢！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T01:30:52.883

Andre，我正在将一个使用 RXTX 库工作正常的 java Swing 应用程序移植到一个新的 JavaFX 应用程序，没有编译问题，但在运行时出现相同的错误。解决方案：在您的 HD 中找到库（在我的情况下为 /system/library/java/Extensions/RXTXComm.jar），打开项目属性面板，转到库，选择按钮选项 Compile 并单击 Add Jar/Folder，添加RXTXComm.jar 到列表中。

# javascript - “NetworkStatus0 = TypeError: 'undefined' 不是函数” 没有原因的错误

> ID：10400883
> 
> 赞同：0
> 
> 时间：2012-05-01T16:31:02.363
> 
> 标签：javascript, ios, networking, cordova

我有一个适用于 iOS 的新 Cordova（又名 PhoneGap）项目，它使用 jQuery 方法`$.getJSON`与在测试服务器上运行的 RESTful API 进行交互。问题是当我尝试运行应用程序时，我在 Xcode 调试日志中得到了这个：

> 2012-05-01 11:10:49.031 RESTtest[223:707] [INFO] 成功回调错误：NetworkStatus0 = TypeError：'undefined' 不是函数

我已经对这个错误进行了一些搜索，并且遇到了[这个问题](https://stackoverflow.com/questions/10371986/networkstatus0-typeerror-undefined-is-not-a-function)，但问题是我没有使用`navigator.network.isReachable`，也没有`navigator.network.connection.type`，因为它只是一个测试项目。出了什么问题，我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T20:01:13.010

这与其说是一个答案，不如说它是一种帮助您获得答案的技术 - 您需要做的第一件事是弄清楚哪一行引发了错误。尝试注释掉代码块，直到找出导致问题的代码行。通常这会让您更清楚地了解正在发生的事情 - 如果没有，它会让您知道要引用哪些代码块以帮助*我们*弄清楚发生了什么。

我的猜测，只是从解析错误来看，在从你的一个调用到测试服务器的成功回调中，你要么调用了一个未正确定义的函数，要么 javascript 解析器认为你正在尝试在你不在的地方调用一个函数。以我的经验，其中任何一个都可能来自（例如）将括号放在错误的位置，或类似的拼写错误 - 在您使用“注释并重新运行”技巧后，捕捉它们会容易得多缩小确切的位置。

# mysql - mysql - 从表中选择值 LIKE 来自另一个表的值

> ID：10400884
> 
> 赞同：2
> 
> 时间：2012-05-01T16:31:02.893
> 
> 标签：mysql, select, where, sql-like

我有带有两个表的 MySQL 数据库：用户和项目。它们看起来像这样：

用户：

```
id | user_name | desc
--------------------------
1  | john      | tall
2  | dave      | fat
3  | maria     | pretty 
```

项目：

```
id | item_name | color
--------------------------
1  | trousers  | red
2  | shoes     | blue
3  | shoes     | red 
```

我想从具有特定 ID 的项目的数据库列表中进行选择，并且它的名称是 LIKE 关键字。它用于简单的搜索引擎。我正在做这样的查询：

```
SELECT id, user_name, ( SELECT item_name FROM items WHERE id = u.id ) as desc FROM users u WHERE desc LIKE "%shoes%" AND color LIKE "%blue%" 
```

结果，我希望一行包含 id = 2、username = dave 和 itemname = shoes，因为它是唯一满足我查询的一行。不幸的是，我收到一条消息，说没有“desc”列。我知道“用户”中没有这样的列，但是如何告诉 MySQL 从名为 desc 的子查询中获取它？

附加问题：是否可以使用 WHERE ... LIKE 命令和数组样式，如 IN (val1, val2, val3)？我的意思是代替 loooong 查询：

```
SELECT name 
FROM users 
WHERE name 
LIKE "%john%" OR name 
LIKE "%steven%" OR name LIKE "bob%" 
```

缩短：

```
SELECT name FROM users WHERE name LIKE IN ( "%john%", "%steven%", "%bob%") 
```

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T16:39:18.653

尝试这个 ：

```
SELECT 
    u.id, u.user_name, i.item_name, i.color
FROM
    users AS u,
    items AS i
WHERE
    i.id = u.id
AND
    i.item_name LIKE "%shoes%" 
AND 
    i.color LIKE "%blue%" 
```

对于第二部分，如果您查看[MySQL 开发网站](http://dev.mysql.com/doc/refman/5.0/en/pattern-matching.html)上的此页面，您将看到您可以使用`REGEXP`来匹配您的结果，而不是`LIKE`我认为您可以使用类似的东西

`REGEXP 'john|steven|bob'`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-01T16:37:52.307

您需要与项目进行内部连接。另外我不认为你可以使用 desc。在我的答案中使用了descr

还没有测试过，但是请尝试以下

```
SELECT u.id, u.user_name, i.item_name as descr 
FROM users u INNER JOIN items i
ON i.id = u.id
WHERE i.item_name LIKE '%shoes%' 
AND i.color LIKE '%blue%' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T18:36:04.033

经过数小时无望地搜索正确的语法后，我找到了我想要的东西。最好的方法，而不是使用正则表达式和使查询复杂化，我建议使用将所有列名连接到字符串中，然后通过尽可能多的 LIKE 搜索它，因为我们有关键字。也许这看起来并不优雅，但对我来说已经足够了。例子：

```
SELECT user_name, item_name FROM table WHERE CONCAT(user_name, item_name) LIKE '%keyword1%' 
```

注意 NULL 记录 - 如果您只将一个字段与 null 连接，结果也会变为 null，因此请使用 IFNULL(null_record, '')。

希望它可以帮助任何人。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-26T10:16:51.750

```
SELECT *
FROM users u
WHERE
   u.id IN (SELECT id
               FROM items
               WHERE
                  items.id=u.id
               AND
                  color LIKE '%$search%'
               AND
                  item_name LIKE '%$search%'
            ) 
```

# java - 在构建的程序集插件（带有依赖项）jar 中包含 Maven 配置文件名称

> ID：10400886
> 
> 赞同：7
> 
> 时间：2012-05-01T16:31:03.947
> 
> 标签：java, maven-3, maven-assembly-plugin

我正在使用 maven-assembly-plugin 构建一个可执行的、具有依赖关系的整体 jar。我还使用资源过滤来设置一些自定义的、特定于通道的（dev、stage、prod 等）属性。

如何使 jar 的 finalName 包含通道名称（dev、stage、prod 等）？

我希望以下 mvn 命令生成看起来像这样的 jar：

*   mvn clean install -P DEV --> ws-client-DEV.jar
*   mvn clean install -P STAGE --> ws-client-STAGE.jar
*   mvn clean install -P PROD --> ws-client-PROD.jar

有没有我找不到的 Maven 属性？如果可能的话，我想避免使用多余的命令行参数（即 - 'mvn clean install -P DEV -Dlane=DEV'）。

这是我的程序集插件配置：

```
<plugin>
    <artifactId>maven-assembly-plugin</artifactId>
    <version>2.2.2</version>
    <executions>
        <execution>
            <id>jar-with-dependencies</id>
            <phase>package</phase>
            <goals>
                <goal>single</goal>
            </goals>
        </execution>
    </executions>
    <configuration>
        <descriptorRefs>
            <descriptorRef>jar-with-dependencies</descriptorRef>
        </descriptorRefs>
        <finalName>ws-client</finalName>
        <appendAssemblyId>false</appendAssemblyId>
        <archive>
            <manifest>
                <mainClass>Example</mainClass>
            </manifest>
        </archive>
    </configuration>
</plugin> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-01T17:11:10.183

与 Bhaskar 相似，但略有修改。

在 <build> 标签之后，添加

```
<finalName>${project.artifactId}-${lane}</finalName> 
```

您可以将车道值设置为配置文件中的属性。

```
<profiles>
    <profile>
        <id>DEV</id>
        <properties>
            <lane>DEV</lane>
        </properties>
    </profile>
</profiles> 
```

然后像你说的那样执行构建： mvn ... -P DEV（例如 mvn clean install -P DEV）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-01T16:45:40.243

在 <build> 标签之后，添加

```
<finalName>${project.artifactId}-${lane}</finalName> 
```

并将“lane”环境变量设置为配置文件名称，例如

mvn -P DEV -Dlane=DEV 等。

或者您可以更有创意并发现活动配置文件 ID，如此处所述[Maven - 我可以在配置文件定义中引用配置文件 ID 吗？](https://stackoverflow.com/questions/2012198/maven-can-i-reference-profile-id-in-profile-definition)

编辑 - - -

如果你想避免多余的参数。

为什么不使用 env 触发相应的配置文件。财产。

等等命令行

```
mvn -Dlane=DEV|STAGE|PROD 
```

在 pom 中

```
<profile>  
  <id>DEV</id>  
  <activation>
    <property>
      <name>lane</name>
      <value>DEV</value>
    </property>
  </activation>
  <build>  
    // rest of the profile  
</profile> 
```

对于 STAGE 和 PROD 配置文件也是如此。

# php - PHP登录系统/会话第一次不工作

> ID：10400889
> 
> 赞同：2
> 
> 时间：2012-05-01T16:31:13.693
> 
> 标签：php, session, login

在这里诊断问题有点困难，如果我的描述有点模糊，很抱歉。我有一个非常标准的登录系统，并且在大多数情况下都可以正常工作。今天我注意到一个问题，但是当我重新启动浏览器时......它不会让我登录到 admin1.php，除非我先访问 admin2.php 并导航回 admin1.php。

之后一切正常。我可以注销并重新登录就好了。

这是我有的两个文件...

**admin1.php**

```
<style>
#form_contain {
    text-align: center;
}

form {
    display: inline-block;
    margin: 100px 0 0 !important;
}

label {
    display: table-cell !important;
    vertical-align: middle;
}

input[type='text'], input[type="password"] {
    float: left;
    display: table-cell !important;
    margin: 0 0 10px;
    height: 25px;
    width: 260px !important;
}
</style>

<?php
session_start();
include "lib/head.php";

function protect($string)
{
 $string = mysql_real_escape_string($string);
 return $string;
} 

$user = $_SESSION['username']; 

if(!$_POST['submit'])
{
    if ($_SESSION['logged'] == true) {
        include_once("admin_main.php");
        }
    else {

?>

<div id="form_contain">
    <form method="post" action="<?=$_SERVER['PHP_SELF']; ?>">
        <label>Username:</label>
        <input type="text" name="username" maxlength="16">
        <br>
        <label>Password:</label>
        <input type="password" name="password" maxlength="16">
        <br>
        <br>
        <br>
        <input type="submit" name="submit" value="Login" class="btn">
    </form>
    <p id="alert"></p>  
</div>

<?php
    }
}
else
{
  $user = protect($_POST['username']);
  $pass = protect($_POST['password']);

if($user && $pass)
{
    $sql="SELECT id,username FROM catalog_users WHERE username='$user' AND password='$pass'";
    $query=mysql_query($sql) or die(mysql_error());

        if(mysql_num_rows($query) == 1)
        {
            $row = mysql_fetch_assoc($query); // mysql_fetch_assoc gets the value for each field in the row
            $_SESSION['id'] = $row['id']; //creates the first session var
            $_SESSION['username'] = $row['username']; // second session var
            $_SESSION['logged'] = true;

            echo '
                <script language="javascript">
                    window.location = "admin1.php";
                </script>";

            ';

        }
        else
       {
            echo '
                <script language="javascript">
                    window.location="admin_wrong.php";    
                </script>
            ';
        }   
}
else
{           
    echo '
        <script language="javascript">
            window.location="admin_wrong.php";    
        </script>
    ';
}
}
?> 
```

**admin2.php**

```
<?php
session_start();
include('lib/head.php');

if (isset($_SESSION['logged']) && $_SESSION['logged'] == true) {
    echo "
        This is a secured page, welcome <b>".$_SESSION['username']."</b>
        <br>
        <br>
        <a href='admin1.php'>Back</a>
        <a href='logout.php'>Logout</a>

        ";
    }
else {
    echo "<b>Sorry, you cannot access this page</b>";
}   

?> 
```

**更新：**`<?php session_start()`我的代码顶部之前的 CSS导致了问题

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-01T16:52:10.223

可能是因为您的登录代码出现**在**您的 html 之后，因此即使脚本在脚本末尾确实让您登录，您似乎也没有登录。

通常，您希望将 PHP 和 HTML 尽可能分开（在不同的文件中），并首先执行所有 PHP 业务逻辑，然后输出所有 HTML。

# c++ - c ++在运行时检查对象是否实现接口

> ID：10400890
> 
> 赞同：4
> 
> 时间：2012-05-01T16:31:18.143
> 
> 标签：c++, casting, multiple-inheritance

我前段时间问过这些问题： [从基类到不同派生类的多重继承转换](https://stackoverflow.com/questions/7426422/multiple-inheritance-casting-from-base-class-to-different-derived-class)

但我仍然不确定我是否理解答案。**问题是：下面的代码有效吗？**

```
#include <iostream>

using namespace std;

struct Base
{
    virtual void printName() 
    {
        cout << "Base" << endl;
    }
};

struct Interface
{
    virtual void foo()
    {
        cout << "Foo function" << endl;
    }
};

struct Derived : public Base, public Interface
{
    virtual void printName()
    {
        cout << "Derived" << endl;
    }
};

int main(int argc, const char * argv[])
{
    Base *b = new Derived();
    Interface *i = dynamic_cast<Interface*>(b);
    i->foo();

    return 0;
} 
```

代码按我的意愿工作。但据我了解，根据前面的问题，它不应该。所以我不确定这样的代码是否有效。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-01T16:38:40.593

这是有效的代码。

**为什么？**
因为`dynamic_cast`告诉您所指向的对象是否实际上是您要转换的类型。
在这种情况下，指向的实际对象是类型，并且该类型的`Derived`每个对象`Derived`也是类型`Interface`（因为`Derived`继承自`Interface`），因此它`dynamic_cast`是有效的并且它有效。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-01T16:39:00.980

只要所涉及的类至少有一个虚拟方法（可能是虚拟析构函数），`dynamic_cast`按原样使用就是正确的，并且可以在符合标准的编译器上工作。

与 不同`static_cast`，`dynamic_cast`可以允许对类型信息进行运行时检查。但是，这也意味着它可能会失败，并`NULL`在使用它来转换指针时返回 a。如果有任何可能不成功，则应检查转换结果。

在您问的上一个问题中，这些类没有任何虚拟方法，因此无法工作，因为`dynamic_cast`不能在这样的类上使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T16:45:29.667

您的代码是有效的，因为标准在 5.2.7 第 4 段（C++ 2003 标准）中这样说：

> 运行时检查在逻辑上执行如下：
> 
> — 如果在 v 指向（引用）的最派生对象中，v 指向（引用）一个 T 对象的公共基类子对象，并且如果只有一个 T 类型的对象是从所指向的子对象派生的（引用）由 v 引用，结果是指向该 T 对象的指针（左值引用）。
> 
> — 否则，如果 v 指向（引用）最派生对象的公共基类子对象，并且最派生对象的类型具有类型 T 的明确且公共的基类，则结果为指向最派生对象的 T 子对象的指针（左值引用）。
> 
> — 否则，运行时检查失败。

请注意在运行时检查中使用“大多数派生对象”。在您的示例中，您的对象的“最衍生对象”`Base *b`是一个`Derived`对象。由于类`Derived`从两者公开继承`Base`and ，在这种特殊情况下`Interface`，该`Base*`对象可以强制转换为 a 。`Interface*`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-01T16:36:29.093

如果`dynamic_cast`成功则有效。它已经在运行时执行了类型安全检查。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-01T16:40:00.063

考虑以下：

```
Base *b = new B();
Interface *i = dynamic_cast<Interface *>( b ); 
```

这应该工作吗？不，为什么，因为`Base`和`Interface`彼此无关。`Base`但是，在指针指向一个对象的特殊情况下，`Interface`您可以强制转换（阅读：诱使编译器考虑对象是 type `Interface`）`Base`指针并`dynamic_cast`进一步使用运算符的结果。

# haskell - 在 Haskell 中循环一个函数

> ID：10400891
> 
> 赞同：1
> 
> 时间：2012-05-01T16:31:18.467
> 
> 标签：haskell, loops, repeat, shuffle

我只是对这个感到困惑，这是一个 Haskell 循环之类的东西，我不知道如何编写。基本上，我已经定义了三个函数**split**、**riffle**和**shuffle**。

```
split :: [a] -> ([a],[a])
split xs = splitAt (length xs `div` 2) xs

riffle :: [a] -> [a] -> [a]
riffle xs [] = xs
riffle [] ys = ys
riffle (x:xs) (y:ys) = x:y:riffle xs ys

shuffle :: Int -> [a] -> [a]
shuffle 0 xs = xs
shuffle n xs = shuffle (n-1) (riffle a b)
    where (a, b) = split xs 
```

基本上 split 只是将一个列表分成两半， riffle 应该“交错”两个列表，例如：

```
riffle [1,2,3] [4,5,6] = [1,4,2,5,3,6] 
```

而 shuffle 就是迭代列表项的拆分和 riffling 的数量。现在我需要定义一个函数**repeats**，它输出重新获得原始列表需要多少次随机播放。函数定义如下：

```
repeats :: [Int] -> Int 
```

我只是不知道如何在随机播放中执行循环......我认为这与列表理解有关，但我什么也得不到。我还没有尝试过 lambda 表达式，但我认为没有必要。顺便说一句，应该在具有偶数个项目的列表上进行洗牌。有任何想法吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-01T16:46:19.527

解决此问题的一种方法是利用惰性并用于`iterate`生成输入的迭代随机播放的无限列表。

```
> iterate (uncurry riffle . split) "ABCDEF"
["ABCDEF","ADBECF","AEDCBF","ACEBDF","ABCDEF","ADBECF","AEDCBF","ACEBDF", ...] 
```

列表的第一个元素是原始元素，所以我们用 删除它`tail`，然后使用`takeWhile`来获取与原始元素不同的元素。

```
> takeWhile (/= "ABCDEF") . tail $ iterate (uncurry riffle . split) "ABCDEF"
["ADBECF","AEDCBF","ACEBDF"] 
```

现在，您只需要获取`length`该列表中的一个并添加一个即可获得所需的随机播放次数。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-01T16:44:53.557

在许多情况下，您可以使用无限列表而不是“循环”。这是其中之一。

前奏函数“迭代”重复地将一个函数应用于一个值，所以（从记忆中）

```
iterate f x = [x, f x, f (f x), f (f (f x)) ....] 
```

因此，如果您将“迭代随机播放”应用于起始列表，那么您将获得渐进式随机播放。然后使用 takeWhile 找到列表中与您的起点相等的第一个条目，然后使用“length”找出它有多长。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-01T16:51:01.657

在 Haskell 中，迭代最常使用递归而不是循环来表示。

这通常通过使用告诉您如何进行迭代的内部函数来完成，然后简单地使用适当的参数调用内部函数。

也许您可以填补以下代码中的空白？

```
repeats xs = iter 1 (...) where
    iter n ys = if ys == xs
        then n
        else iter (...) (...) 
```

另一种方法是利用 Haskell 的惰性并使用无限列表执行此操作，使用高阶函数`iterate`，它重复将函数应用于初始参数：

```
repeats xs = (...) $ takeWhile (...) $ iterate (shuffle 1) (...) 
```

虽然`iterate`返回一个无限列表，但我们只会使用它的有限部分，因此我们不会进入无限循环。

# php - zend_validate_regex 对重音字符不满意

> ID：10400892
> 
> 赞同：2
> 
> 时间：2012-05-01T16:31:22.097
> 
> 标签：php, regex, zend-framework, zend-validate, non-ascii-characters

所以我正在使用 Zend_Framework，我需要验证一个文本，不仅接受数字和普通字母，还接受一些像 'ã'、'ç' 等的人......

我相信一个简单的正则表达式验证就可以完成这项工作：

```
 public function SetTitle($title) 
    {
      $validator = new Zend_Validate_Regex('/^[0-9a-zA-ZÀ-ú]+[0-9A-Za-zÀ-ú\'\-\.:,; ]{1,50}$/');

      if ($validator->isValid($title)) {
        if ($this->title != $title) {
            $this->title = $title;
        }
      } else {
        throw new MyApp_Projects_ProjectException("This ($title) is not a valid title.");
      }

} //SetTitle 
```

在下面报告了一些想法之后，它确实有效，我测试了这样的东西：

```
public function testIfCanAttributeTitleToProject()
{            
    $someTitle = "some title with ç, á and ã";
    $this->project->SetTitle($someTitle);
    $this->assertEquals($this->project->getTitle(), $someTitle);
} 
```

但是，当我尝试添加验证器以检查表单中的数据时，如下所示：

```
 $title = new Zend_Form_Element_Text('title');
    $title->setLabel('Nome:')
        ->setOptions(array('size' => '50'))
        ->setRequired(true)
        ->addValidator('Regex', false, array(
            'pattern' => "/^[0-9a-zA-ZÀ-ú]+[0-9A-Za-zÀ-ú\'\-\.,: ]{1,50}$/"
            ))
        ->addFilter('HtmlEntities')
        ->addFilter('StringTrim');
    // attach elements to form
    $this->addElement($title); 
```

当我尝试测试时出现错误

```
public function testUserCanUseAccentedCharacters() {

   $form = new MyApp_Form_ProjectCreate();
   $formData = array(
       'title' => 'we scream to weird chars like ã é or ç',
       'submit' => true
       );
    $form->process($formData);
} 
```

其中流程功能是这样的：

```
public function process($data) 
{
    if ($this->isValid($data) !== true) {
        throw new MyApp_Form_ProjectCreateException('Invalid data!');
    } else {
        $db = Zend_Registry::get('db');
        $projectMapper = new MyApp_Projects_ProjectMapper($db);        
        $project = new MyApp_Projects_Project();
        $project->SetTitle($this->title->GetValue());
        $projectMapper->insert($project);
    }
} 
```

我已经在其他上下文中检查并重新测试了正则表达式，看起来没问题，但由于某种原因，即使 Zend_Validate 本身使用此表达式，表单元素内的验证器也不接受 À-ú 范围内的任何内容。 .

当然，我（仍然）在这里失去了一些基本的东西......或者当我有更好的方法时，我的头撞到了墙上......

有人可以帮助我吗？

TIA，再次... :)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T16:59:03.577

```
'/^[0-9a-zA-ZÀ-ú]+[0-9A-Za-zÀ-ú\'\-\. ]{1,50}$/' 
```

嵌入单引号。这对你有用吗？

```
"/^[0-9a-zA-ZÀ-ú]+[0-9A-Za-zÀ-ú\'\-\. ]{1,50}$/" 
```

**更新**

还有三件事要尝试。不知道Zend实现正则表达式的细节，所以不知道前两个能不能用。

Unicode 字母属性：

```
"/^([0-9]\p{Letter})+([0-9\'\-\. ]\p{Letter}){1,50}$/" 
```

Posix 字符类：

```
"/^([0-9][[:alpha:]])+([0-9\'\-\. ][[:alpha:]]){1,50}$/" 
```

您关心的字母的暴力枚举：

```
"/^[0-9a-zA-ZÀÁÂ ...et cetera... øùú]+[0-9A-Za-zÀÁÂ ...et cetera... øùú\'\-\. ]{1,50}$/" 
```

# apache - grails应用程序的apache ajp配置

> ID：10400893
> 
> 赞同：0
> 
> 时间：2012-05-01T16:31:22.790
> 
> 标签：apache, tomcat, grails, ajp

我有多个使用 ajp 协议在 tomcat 服务器上运行的 grails 应用程序。在同一台服务器上，我将 apache 作为这些 tomcat 应用程序的前端运行。apache配置如下：

```
ProxyPass /example1/ ajp://localhost:8082/example1/
ProxyPassReverse /example1/ ajp://localhost:8082/example1/
ProxyPass /example2/ ajp://localhost:8082/example1/
ProxyPassReverse /example2/ ajp://localhost:8082/example2/ 
```

我希望 example1 作为根上下文运行

```
ProxyPass / ajp://localhost:8082/example1/ 
```

这不起作用。所有静态内容都已损坏。网页文本呈现，图像将指向：/example1/images/myimage.jpg 如果您转到：/images/myimage.jpg，图像将得到解析

我已经尝试了很多方法来避免将 example1 部署为 ROOT.war。但这似乎是解决此问题的唯一方法。这不足以满足我的需要。

在 grails 方面，我已将 ${appName} 从服务器 url 中删除，看起来像：grails.serverURL = "http://apacheajp.example.com/"

我已将 grails.app.context=/ 添加到 application.properties，这也不起作用。

这里的最终目标是使用这个 apache 来为多个子域服务。我希望 example1.example.com（apacheajp.example.com 的别名）解析为 example1 应用程序。同样，我希望 example2.example.com 对 example2 应用程序采取相同的方式。这解释了为什么部署为 ROOT 是不可取的。

我使用的服务器是 RHEL6

这篇文章最好地描述了我遇到的相同问题：http: [//grails.1312388.n4.nabble.com/Grails-context-big-problem-with-apache-mod-proxy-td1392448.html](http://grails.1312388.n4.nabble.com/Grails-context-big-problem-with-apache-mod-proxy-td1392448.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T18:30:04.550

如果您更改 ProxyPass 中的路径，那么您还需要考虑许多其他问题。这些非常棘手/昂贵，通常将应用程序部署为 ROOT.war 更容易

鉴于您不能/不会这样做，您需要考虑以下事项：

*   添加 ProxyPassReverse 指令以修复一些 HTTP 响应标头
*   添加 ProxyPassReverseCookiePath 指令来修复任何 cookie
*   使用 mod_headers 修改包含不正确路径引用的任何其他标头
*   使用 mod_substitute 更正任何响应正文中的上下文路径

这通常就足够了，但可能需要一些时间来追踪您需要更改的所有内容。我真的鼓励您将 WAR 重命名为 ROOT.war。是什么阻止了你？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T18:10:20.783

因此，解决问题的唯一方法是按照 rlovtang 在第一个回复中的建议进行操作，并使用虚拟主机将应用程序部署为 ROOT.war

请参阅我的另一个问题： [使用 ajp 协议连接到备用备用主机别名](https://stackoverflow.com/questions/10488253/connect-to-alternate-alternate-host-alias-with-ajp-protocol)

## 阿帕奇

```
NameVirtualHost *:80

<VirtualHost *:80>
    ServerName app1.myserver.com
    ProxyPass / ajp://tomhost1:8009/
    ProxyPassReverse / ajp://tomhost1:8009/
</VirtualHost>

<VirtualHost *:80>
    ServerName app2.myserver.com
    ProxyPass / ajp://tomhost2:8009/
    ProxyPassReverse / ajp://tomhost2:8009/
</VirtualHost> 
```

## 雄猫

```
<Host name="tomhost1" appBase="tomhost1" unpackWARs="true"
autoDeploy="true" xmlValidation="false" xmlNamespaceAware="false" >
    <Alias>app1.myserver.com</Alias>
</Host>

<Host name="tomhost2" appBase="tomhost2" unpackWARs="true"
autoDeploy="true" xmlValidation="false" xmlNamespaceAware="false" >
    <Alias>app2.myserver.com</Alias>
</host> 
```

## /etc/hosts

**在主机上，myserver.com**

```
127.0.0.1       localhost       tomhost1     tomhost2 
```

**在客户端**

```
188.555.555.555  app1.myserver.com   app2.myserver.com 
```

如果 app1 和 app2 有 CNAME 或 ANAME 设置，您就不必弄乱您的客户端主机文件。如果服务器和客户端是同一台计算机，请将 app1 和 app2 主机别名添加到 localhost 别名。对于 tomcat，确保有 tomhost1 和 2 的目录。如果您将 grails 应用程序部署为 ROOT.war，请确保您的服务器 url 看起来像

```
grails.serverURL = "http://app1.myserver.com/" 
```

创建war文件，并将其放在tomhost1文件夹中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T18:45:58.763

正如 Mark Thomas 所建议的那样，在 Tomcat 上使用与在 Apache 上相同的上下文根来部署应用程序是最简单的。因此，对于上下文根“/”，这意味着在 Tomcat 上部署为 ROOT.war。要让多个应用程序具有上下文根“/”但不同的子域，最简单的解决方案可能是运行多个 Tomcat 实例，每个应用程序一个，并将所有这些实例部署为 ROOT.war。这是我们的做法。这也意味着在不关闭所有应用程序的情况下更容易进行升级。

每个 Tomcat 实例都需要在 conf/server.xml 中拥有自己的关闭端口、http 端口和 ajp 端口。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T15:01:51.780

我能够解决图像损坏的问题。取自此处的示例： [http ://www.wthr.us/2010/01/25/improve-grails-performance-with-static-resources/](http://www.wthr.us/2010/01/25/improve-grails-performance-with-static-resources/)

```
NameVirtualHost *:80

<VirtualHost *:80>
            ServerName subdom1.example.com
            ProxyPass / ajp://localhost:8082/app1/
            ProxyPassReverse / ajp://localhost:8082/app1/
            RewriteEngine on
            RewriteRule ^/app1/images/(.*) /home/tomcat/webapps/app1/images/$1
            RewriteRule ^/app1/css/(.*) /home/tomcat/webapps/app1/css/$1
            RewriteRule ^/app1/js/(.*) /home/tomcat/webapps/app1/js/$1
</VirtualHost> 
```

这应该足够好了。

# ios - 对于 iOS，您可以通过 MMS 以编程方式强制发送短信吗

> ID：10400895
> 
> 赞同：0
> 
> 时间：2012-05-01T16:31:30.417
> 
> 标签：ios, sms, mms

我有一个 iOS 应用程序，它使用该标准`MFMessageComposeViewController`向人们发送带有 URL 的文本。查看 iPhone 设置，您可以打开彩信。即使手机设置在启动时打开了彩信，有没有办法强制发送短信`MFMessageComposeViewController`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T19:58:29.747

不幸的是，没有办法强迫任何事情。你只会得到一个消息撰写视图，它可以完成它的工作。虽然，除非您添加媒体，否则它应该默认使用 SMS。

# php - 如何使用 Inkscape 将 SVG 字符串转换为 jpg

> ID：10400897
> 
> 赞同：7
> 
> 时间：2012-05-01T16:31:33.120
> 
> 标签：php, svg, inkscape

在花了两天时间尝试使用 ImageMagick 从 SVG 字符串中光栅化 jpeg 之后，我终于放弃了。

尽管我设法使实际转换工作正常，但似乎 Imagemagick 在渲染图像时无法正确转换变换/旋转功能，从而使输出与原始 SVG 不同。

经过进一步研究，这似乎是一个已知问题，并且“Inkscape”是在 PHP 中将 SVG 转换为 jpeg/png 的最佳方法。

问题是我的 SVG 数据是通过 JSON 发送到我的 PHP 脚本的。如何将 blob 或字符串放入 Inkscape 命令行以进行转换？

非常感谢您的任何建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T16:35:37.673

如果您有一个 SVG 字符串，并且通过 AJAX 将其从浏览器发送到服务器，则需要将其写入临时文件，以便可以从 Inkscape 命令行引用它。您无法使用 Inkscape 命令行渲染为 JPEG，但您可以轻松渲染为 PNG，如果您确实需要不同的格式，当然您可以随后使用 ImageMagick 进行转换。

你需要类似的东西：

```
/path/to/inkscape \
    --without-gui \
    --export-png=/path/to/output.png \
    /tmp/file/input.svg 
```

如果您接受来自用户的全部/部分 SVG 输入，请记住您需要牢记许多安全问题。如果需要，很高兴对此进行扩展。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-13T21:22:09.873

您可以使用标准输入将 SVG 字符串传递给 inkscape，但代码的可移植性较差。

```
// Open Inkscape process
$process = proc_open(
    '/path/to/inkscape -z -f /dev/fd/0 -e /path/to/output' 
    array(0 => array('pipe', 'r'), 1 => array('pipe', 'w'), 2 => array('pipe', 'w')), 
    $pipes
);

// Write svg to stdin
fwrite($pipes[0], $svg);

// Close process
foreach ($pipes as $pipe) fclose($pipe);
proc_close($process); 
```

# cvs - 无法从外部局域网连接到 CVS 存储库

> ID：10400901
> 
> 赞同：1
> 
> 时间：2012-05-01T16:31:41.897
> 
> 标签：cvs, ubuntu-11.10

我最近通过 ubuntu 服务器（11.10）安装了 cvs。我可以使用服务器名称从局域网中通过 Eclipse IDE 连接到我的存储库。但是，当我使用 IP 地址时，我无法连接。

给出此错误：“无法连接到主机：连接被拒绝”。

我有端口转发，可以从我的局域网外部连接到 apache2、mysql 等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T16:35:19.163

我在谷歌搜索时发现了这个。

[http://kulitkulit.wordpress.com/2009/08/06/installation-cvs-ubuntu-jaunty/](http://kulitkulit.wordpress.com/2009/08/06/installation-cvs-ubuntu-jaunty/)

# c# - 创建新 DbCommand 时出错

> ID：10400903
> 
> 赞同：2
> 
> 时间：2012-05-01T16:31:50.257
> 
> 标签：c#, ado.net

我想创建一个新的 DbCommand，但得到一些错误：

```
DbCommand insertcommand = new DbCommand("insert into persons(firstname, lastname, email) values(?, ?, ?)", connection);
insertcommand.Parameters.Add(1, DbType.String, 50, "fistname");
insertcommand.Parameters.Add(2, DbType.String, 50, "lastname");
insertcommand.Parameters.Add(3, DbType.String, 100, "email");
dbAdapter.InsertCommand = insertcommand; 
```

这会产生错误

> 无法创建抽象类或接口“System.Data.Common.DbCommand”的实例

和

> 方法“添加”没有重载需要 4 个参数

我应该如何创建这些命令并填充参数？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-01T16:36:33.107

您通常需要*直接*创建一个具体实例（`new SqlCommand`等）或使用[`IDbConnection.CreateCommand`](http://msdn.microsoft.com/en-us/library/system.data.idbconnection.createcommand.aspx).

目前尚不清楚哪个最适合您的情况。

至于`Add`调用 - 如果您使用具体的命令类型，您可能会有更多的重载可供您使用。否则，您可能需要使用[`IDbCommand.CreateParameter`](http://msdn.microsoft.com/en-us/library/system.data.idbcommand.createparameter.aspx)、设置属性，然后将其添加到参数集合中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T16:37:25.743

您需要创建一个新的 SQLParameter 并向其中添加所有内容。然后，将 SQLParameter 作为参数传递。我相信，Parameters.Add 只接受一个参数，那就是你的 SQLParameter。

[http://msdn.microsoft.com/en-us/library/yy6y35y8(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/yy6y35y8(v=vs.80).aspx)

# c# - 如何使用外部 c# 页面

> ID：10400905
> 
> 赞同：1
> 
> 时间：2012-05-01T16:32:01.893
> 
> 标签：c#

> **可能重复：**
> [是否可以动态编译和执行 C# 代码片段？](https://stackoverflow.com/questions/826398/is-it-possible-to-dynamically-compile-and-execute-c-sharp-code-fragments)

我知道这不是常态，但我正在构建一些需要访问然后使用外部 .cs 文件的东西，该文件可以位于同一命名空间中。

我不是在寻找更好的 c# 协议或通常做的事情。在我在这个问题之前所做的所有研究中，每个人都说这不是常态。但我知道这一点，我仍然想知道是否有办法做到这一点。

非常感谢 =)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T16:38:07.157

幸运的是，这已经在框架中：[CSharpCodeProvider](http://msdn.microsoft.com/en-us/library/microsoft.csharp.csharpcodeprovider.aspx)

# sql - 将视图复制到另一个数据库

> ID：10400907
> 
> 赞同：2
> 
> 时间：2012-05-01T16:32:07.753
> 
> 标签：sql, sql-server

我有 2 个 SQL Server 数据库 A 和 B，并且希望**仅使用 SQL 将视图从数据库 A 复制到数据库**B。B用作历史数据库，A中的所有表也在B中。

**来自 A 的现有视图应该以指向 B 中数据的方式复制（重新创建）到 B 中。**

[使用 SQL Management Studio（例如此处](https://stackoverflow.com/questions/1913685/how-to-copy-views-from-one-database-to-another-database)）很容易解决该任务，但我需要能够使用我自己的程序复制这些视图。

生成 CREATE VIEW 语句所需的信息存储在哪里？

SELECT INTO 或 INSERT INTO 能否为我的问题提供解决方案？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-01T16:58:39.400

```
USE DatabaseA;
GO

DECLARE @sql NVARCHAR(MAX);

SELECT @sql = definition
FROM sys.sql_modules
WHERE [object_id] = OBJECT_ID('dbo.ViewName');

EXEC DatabaseB..sp_executesql @sql; 
```

如果要创建*所有*视图，则：

```
USE DatabaseA;
GO

DECLARE @sql NVARCHAR(MAX);

SET @sql = N'';

SELECT @sql = @sql + CHAR(13) + CHAR(10) + 'GO'
    + CHAR(13) + CHAR(10) + m.definition
FROM sys.sql_modules AS s
INNER JOIN sys.objects AS o
ON s.[object_id] = o.[object_id]
WHERE o.type_desc = 'VIEW';

EXEC DatabaseB..sp_executesql @sql; 
```

如果您希望这是可重复的，您还需要先删除每个视图，如果它已经存在于目标数据库中。例如：

```
USE DatabaseA;
GO

DECLARE @sql NVARCHAR(MAX);

SET @sql = N'';

SELECT @sql = @sql + CHAR(13) + CHAR(10) + 'IF OBJECT_ID('''
    + QUOTENAME(SCHEMA_NAME(o.[schema_id]))
    + '.' + QUOTENAME(o.name) + ''') IS NOT NULL
      BEGIN
        DROP VIEW ' 
        + QUOTENAME(SCHEMA_NAME(o.[schema_id]))
        + '.' + QUOTENAME(o.name) + ';
      END'
    + CHAR(13) + CHAR(10) + 'GO'
    + CHAR(13) + CHAR(10) + s.definition
FROM sys.sql_modules AS s
INNER JOIN sys.objects AS o
ON s.[object_id] = o.[object_id]
WHERE o.type_desc = 'VIEW';

EXEC DatabaseB..sp_executesql @sql; 
```

现在请记住，如果其中任何一个是索引视图，这将不会创建索引，它也不会验证视图是否可以在另一个数据库中实际创建（除非您确定所有依赖对象在两者之间都是相同的数据库），并且不确保创建顺序（在 ViewA 调用 ViewB 的情况下，它可能不会以正确的顺序创建它们）。使用模式比较工具为您自动执行此操作要好得多。我在这里写了这个：

[http://bertrandaaron.wordpress.com/2012/04/20/re-blog-the-cost-of-reinventing-the-wheel/](http://bertrandaaron.wordpress.com/2012/04/20/re-blog-the-cost-of-reinventing-the-wheel/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T17:25:37.627

Aaron Bertrand 的回答一如既往地棒极了。但是为了完整起见，Red Gate 的[SQL 比较](http://www.red-gate.com/products/sql-development/sql-compare/index-b)可以很好地做到这一点，并且[SMO](http://msdn.microsoft.com/en-us/library/ms162557.aspx)提供了一些功能，例如脚本类，这使得这相对简单。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T16:42:59.250

这至少适用于 SQL2005 及更高版本，不确定早期版本。

```
SELECT definition
FROM sys.sql_modules
WHERE object_id = OBJECT_ID('<schema_name.object_name>') 
```

您不能使用 SELECT INTO 或 INSERT INTO 因为视图不是表并且本身不包含任何数据。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-01T16:43:32.787

从您的目标数据库（databaseB）执行此操作：

```
DECLARE @sql NVARCHAR(MAX)
SELECT  @sql = OBJECT_DEFINITION(OBJECT_ID)
FROM    [databaseA].sys.views
WHERE   name = 'View_1'
EXEC (@sql) 
```

# iphone - NSDictionary 的 allKeys 数组搞砸了——不是按照它们在字典中的顺序吗？

> ID：10400920
> 
> 赞同：5
> 
> 时间：2012-05-01T16:32:57.597
> 
> 标签：iphone, ios, nsarray, plist, nsdictionary

在我的项目中，我从 .plist 中提取数据，更具体地说是从 NSDictionary 中提取数据。我用 .plist 的内容初始化了一个字典，效果很好。当我这样做的时候

```
NSArray *array = [dict allKeys]; 
```

它用所有键填充数组，但顺序完全随机，与它们在 .plist 文件中的顺序不同。我真的需要保留订单。字典中的键是数组，如果这可能会导致问题。我没有得到什么？

提前非常感谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-01T16:36:02.043

就像 NSSet 中的项目之间没有顺序一样，NSDictionary 中的键值对也没有内在的顺序。

如果您想要特定顺序下的键，则需要使用类似的东西，[`- (NSArray *)keysSortedByValueUsingComparator:(NSComparator)cmptr`](http://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSDictionary_Class/Reference/Reference.html#//apple_ref/occ/instm/NSDictionary/keysSortedByValueUsingComparator%3a)但这不会给出 NSDictionary 在 plist 文件中序列化的顺序。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-22T09:10:34.330

没有这样的内置方法可以从中获取。但是一个简单的逻辑对你有用。准备字典时，您可以在每个键前简单地添加一些数字文本。像

```
NSDictionary *dict = [[NSDictionary alloc] initWithObjectsAndKeys:
                       @"01.Created",@"cre",
                       @"02.Being Assigned",@"bea",
                       @"03.Rejected",@"rej",
                       @"04.Assigned",@"ass",
                       @"05.Scheduled",@"sch",
                       @"06.En Route",@"inr",
                       @"07.On Job Site",@"ojs",
                       @"08.In Progress",@"inp",
                       @"09.On Hold",@"onh",
                       @"10.Completed",@"com",
                       @"11.Closed",@"clo",
                       @"12.Cancelled", @"can",
                       nil]; 
```

现在，如果您可以使用sortingArrayUsingSelector，同时按照您放置的顺序获取所有键。

```
 NSArray *arr =  [[dict allKeys] sortedArrayUsingSelector:@selector(localizedStandardCompare:)]; 
```

在UIView中要显示key的地方，把前面的3个字符剪掉即可。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-01T16:41:40.433

正如 Qwerty Bob 所说，NSDictionary 不会对其内容进行排序。如果您需要保留密钥的顺序，一种方法是将密钥数组单独存储在 .plist 文件中。然后，枚举数组并使用它按顺序访问字典值。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-19T15:38:13.407

您可以按照您想要的顺序使用 Dictionary 键创建一个 NSArray。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2014-12-19T01:33:47.013

试试这个：

```
NSArray *array = [dict allKeys];

NSSortDescriptor *descriptor = [[NSSortDescriptor alloc] initWithKey:@"self" ascending:NO];
NSArray *descriptors = [NSArray arrayWithObject:descriptor];

NSArray *orderedKeys = [array sortedArrayUsingDescriptors:descriptors]; 
```

# ruby-on-rails - Rails 会话丢失一个键：动作之间的值对

> ID：10400930
> 
> 赞同：2
> 
> 时间：2012-05-01T16:33:36.377
> 
> 标签：ruby-on-rails, session

我有一个 before_filter 确保`session[:event_id]`存在并重定向到，`select_event`如果它不存在。 `select_event`向 发送 ajax 调用`choose_event_by_keycode`。 `choose_event_by_keycode`然后设置`session[:event_id]`并重定向到索引。问题是`check_event_permissions`过滤器`session[:event_id]`在调用时没有。怎么了？

```
before_filter :check_event_permission, :except => [:select_event, :choose_event_by_keycode]

def check_event_permission
  puts "@!@@@@@@@@@@@@@@@@@@@@@@@"
  puts session
  puts "@!@@@@@@@@@@@@@@@@@@@@@@@"
  redirect_to :action =>'select_event' if !session[:event_id]
end     

def choose_event_by_keycode
  @event = Event.find_by_keyCode(params[:keyCode])
  if @event
    current_user.add_to_event_as_patron(@event.id)
    session[:event_id] = @event.id
    puts "!!@@@@@@@@@@@@@@@@@@@@@@@"
    puts session
    puts "!!@@@@@@@@@@@@@@@@@@@@@@@"
    redirect_to mobile_path
  else
    render 'select_event', :notice => "No event found with that key.", :layout => false
  end
end 
```

服务器日志（为清楚起见修改了空格，并移动了 puts 输出，以便它们按操作顺序显示）：

```
Started GET "/mobile/choose_event_by_keycode?keyCode=12345" for 192.168.5.101 at 2012-05-01 12:29:53 -0400
Processing by MobileController#choose_event_by_keycode as */*
  Parameters: {"keyCode"=>"12345"}
  Event Load (0.1ms)  SELECT `events`.* FROM `events` WHERE `events`.`keyCode` = '12345' LIMIT 1
  User Load (0.1ms)  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
  EventPatron Load (0.0ms)  SELECT `event_patrons`.* FROM `event_patrons` WHERE     `event_patrons`.`user_id` = 1 AND `event_patrons`.`event_id` = 1
!!@@@@@@@@@@@@@@@@@@@@@@@
{"session_id"=>"ea0a0930f7723719d5c29c722ab3d1ed", "_csrf_token"=>"jzhMJcs2lcsGc9LFZi5PhJbGRG1mTrznFeawWHdUOHk=", "user_id"=>1, "user_type"=>"super", "event_id"=>1}
!!@@@@@@@@@@@@@@@@@@@@@@@
Redirected to http://192.168.5.205:3000/mobile
Completed 302 Found in 259ms (ActiveRecord: 6.3ms)

Started GET "/mobile" for 192.168.5.101 at 2012-05-01 12:29:54 -0400
Processing by MobileController#index as */*
@!@@@@@@@@@@@@@@@@@@@@@@@
{"session_id"=>"ea0a0930f7723719d5c29c722ab3d1ed", "_csrf_token"=>"jzhMJcs2lcsGc9LFZi5PhJbGRG1mTrznFeawWHdUOHk=", "user_id"=>1, "user_type"=>"super"}
@!@@@@@@@@@@@@@@@@@@@@@@@
Redirected to http://192.168.5.205:3000/mobile/select_event
Filter chain halted as :check_event_permission rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms) 
```

从日志中您可以看到`session[:event_id]`已成功设置`choose_event_by_keycode`，但随后消失在`check_event_permission`

**更新**

我发现了问题。事实证明，只有在您注销并重新登录时才会发生这种情况。在我的注销功能中，我有：

```
reset_session
session[:user] = nil 
```

不要问我为什么`session[:user] = nil`会在那里。但是，我删除了它，一切正常。SOOOO，现在问题变成了`Why did having session[:user] = nil cause the observed behavior?`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T17:36:15.100

我假设您更改了路线，这`choose_event_by_keycode`实际上是`GET "/mobile/choose_event?keyCode=12345"`因为您没有向我们展示choose_event（如果不是）。

另外，你的@event 也在那里吗？如果它是空白的或什么的......它会在你设置它时把它弄掉。也许在某处添加`puts @event.id`您的`puts`陈述......只是为了验证。

`/mobile`看起来像什么？肯定的是，有些东西没有加起来。

这是你真正的数据库列名吗？`keyCode`＃好奇的。

# html - 自定义滚动条溢出？

> ID：10400931
> 
> 赞同：0
> 
> 时间：2012-05-01T16:33:40.037
> 
> 标签：html, css, scrollbar

我制作了一个看起来很酷的滚动条。我似乎无法做到这一点。我只希望东西在 y 轴上滚动。由于某种原因，它保持在 x 和 y 上。我希望能够输入尽可能多的内容，并且当 x 轴上没有足够的空间时它会缩小空间...... [http://jsfiddle.net/Hunter4854/VgB2F/](http://jsfiddle.net/Hunter4854/VgB2F/)我在做什么错了，我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T16:35:07.970

你必须拥有`overflow-x:hidden`并且`word-wrap:break-word`

[http://jsfiddle.net/VgB2F/2/](http://jsfiddle.net/VgB2F/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T16:35:57.220

在css中替换

```
.scrollx{
    width: 400px;
    height: 300px; 
    background-color: #2A2A2A; 
    overflow-y:scroll; 
} 
```

和

```
 .scrollx{
    width: 400px;
    height: 300px; 
    background-color: #2A2A2A; 
    overflow-y:scroll; 
    overflow-x:hidden;
    word-wrap:break-word;
} 
```

[http://jsfiddle.net/enve/VgB2F/5/](http://jsfiddle.net/enve/VgB2F/5/)

# gwt - 如何使用实体动态创建 GWT CellTable

> ID：10400932
> 
> 赞同：0
> 
> 时间：2012-05-01T16:33:45.113
> 
> 标签：gwt, gwt-celltable

我有一个问题，我需要将实体持久性插入到 celltable 行中，我已经在 Google Developer's Guide 中看到了 celltable 的所有示例，并且在没有实体类的情况下进行了很多搜索。这是我的实体（包 entity.commun）：

```
public class Eleve implements java.io.Serializable{

@PrimaryKey

        @Persistent(valueStrategy = IdGeneratorStrategy.IDENTITY) private String email;

    @Persistent private String nom;

    @Persistent private String prenom;
    @Persistent private char sexe;
    @Persistent private String adresse;
    @Persistent private String codePostal;
    @Persistent private String dateNaissance;
    @Persistent private String lieuNaissance;
    @Persistent private String groupe;
    @Persistent private String emailParent;

    public Eleve(String nom,String prenom,char sexe,String adresse,String codePostal, String dateNaissance,String lieuNaissance,String email,String emailParent) {

        this.email=email;
        this.nom=nom;
        this.prenom=prenom;
        this.sexe=sexe;
        this.adresse=adresse;
        this.codePostal=codePostal;
        this.dateNaissance=dateNaissance;
        this.lieuNaissance=lieuNaissance;
        this.emailParent=emailParent;
        this.groupe=null;

    }
//Getters and Setters   

} 
```

我在客户端包中的单元格表：

```
CellTable<Eleve> cellTable_Eleve = new CellTable<Eleve>();
        Panel_Read_Eleve.add(cellTable_Eleve , 0, 32);
        cellTable_Eleve .setSize("189px", "156px"); 
```

当我编译项目时，有很多错误：你忘了继承一个需要的模块吗？

我需要帮助，我是 GWT 开发的入门者，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T00:00:56.497

你好，就像在 Bonjour Monsieur 中一样，

看起来您需要在客户端包中为 Eleve 实体创建某种 DTO。

例如，您将通过远程调用（JSON、RPC、RequestFactory 等）获取 Eleve 列表，然后返回一个 EleveDTO 对象列表。

看起来[RequestFactory](https://developers.google.com/web-toolkit/doc/latest/DevGuideRequestFactory)很适合你。

# javascript - JQuery datepicker设置默认值

> ID：10400934
> 
> 赞同：4
> 
> 时间：2012-05-01T16:33:51.340
> 
> 标签：javascript, jquery, datepicker

我使用[这个日期选择器](http://www.eyecon.ro/bootstrap-datepicker)。我需要在页面加载时输入为空，但在 datepicke popap 上将默认值设置为今天。现在当我刚刚写：

```
$(".dp").datepicker({
                format: 'dd.mm.yyyy',
                startDate: '01.01.2012',
                endDate: ''
});; 
```

默认情况下，当数据选择器弹出时，它是 1970 年 1 月的第一个。如何更改默认值？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-11-10T04:18:06.080

快速但有效

```
 var myDate = new Date();
  var date = myDate.getFullYear() + '-' + ('0'+ myDate.getMonth()+1).slice(-2) + '-' + ('0'+ myDate.getDate()).slice(-2);
  $("#datepicker").val(date); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-01T16:47:50.990

您可以从`show`活动中做到这一点，但我不得不说 datepicker 的文档确实缺乏。就是这样：

```
(function() {

  $(".dp").datepicker({
    format: 'dd.mm.yyyy',
    startDate: '01.01.2012',
    endDate: ''
  }).on("show", function() {
    $(this).val("01.05.2012").datepicker('update');
  });

})(); 
```

自然，在我拥有`01.05.2012`的地方，放置实际日期。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-01-16T19:08:02.797

如果有人遇到这种情况，他们希望显示输入值中的默认值以及初始化 datetimepicker，这对我有用。我将 html 中的值设置为 data-val 并在 ready 函数中检查它。然后，我使用 moment 来隐藏字符串并设置初始选择器值：

```
$(function(){
  if($('#complianceBy').data('val').length){
  $('#complianceBy').data('DateTimePicker').date(moment($('#complianceBy').data('val')));
 }
}); 
```

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2012-06-14T20:17:17.937

在 bootstrap-datepicker.js（~第 331 行）中更改：

```
date = new Date(1971, 1, 1, 0, 0, 0), 
```

至

```
date = new Date(), 
```

# c# - 我正在尝试通过 hostgator 中的邮件发送联系表格数据

> ID：10400935
> 
> 赞同：0
> 
> 时间：2012-05-01T16:33:54.273
> 
> 标签：c#, email

我正在尝试通过在 hostgator 中创建 dotnetnuke 模块来发送邮件，但邮件不起作用。请给我任何有用的建议。

```
protected void btnSubmit_Click(object sender, EventArgs e)
    {   
        string Fname = txtFname.Text;
        string Lname = txtLname.Text;
        string Email = txtEmail.Text;
        string Telephone = txtTelephone.Text;
        string comments = txtComments.Text;
        MailMessage newmail = new MailMessage(ConfigurationManager.AppSettings["FromEmailHelpForm"].ToString(), ConfigurationManager.AppSettings["ToEmailHelpForm"].ToString());
        newmail.Subject = "Contact Form Notification";
        newmail.IsBodyHtml = true;
        newmail.Body = "<table><tr><td>First Name:<td><td>' " + Fname + " '</td><tr><tr><td>Last Name:<td><td>' " + Lname + " '</td><tr><tr><td>Primary Email Address: <td><td>' " + Email + " '</td><tr><tr><td>Telephone: <td><td>' " + Telephone + " '</td><tr><tr><td>Comments: <td><td>' " + comments + " '</td><tr></table>";

        SmtpClient mail = new SmtpClient("localhost");
        try
        {
            if (CaptchaControl1.IsValid)
            {
                mail.Send(newmail);
                reset();
                pnlMessage.Visible = true;
                pnlform.Visible = false;
                lblError.Text = "Thankyou for submiting the form we will get you soon";
                lblError.ForeColor = System.Drawing.Color.Blue;
            }
            else
            {
                lblError.Text = "Invalid Security Code ";
                lblError.ForeColor = System.Drawing.Color.Red;
            }

        }
        catch (Exception err)
        {
            lblError.Text = "An error Occured -->"+err.Message;
            lblError.ForeColor = System.Drawing.Color.Red;
        }
    }

    public void reset()
    {
        txtFname.Text = "";
        txtLname.Text = "";
        txtTelephone.Text = "";
        txtEmail.Text = "";
        txtComments.Text = "";

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T16:51:03.680

为了发送电子邮件，您需要一个真正的**SMTP 服务器**。需要设置 SMTPClient 的 Host 属性。

您可以使用现有的 SMTP 中继服务器，例如 GMail，也可以将 IIS 配置为虚拟 SMTP 服务器。

# objective-c - NSException raise:format: 作为方法中的最后一条语句

> ID：10400936
> 
> 赞同：4
> 
> 时间：2012-05-01T16:34:01.683
> 
> 标签：objective-c, exception, nsexception

我有这个方法：

```
+ (MHTwitterParser*)createParser:(NSString*)format {
    if ([format compare:@"json"] == NSOrderedSame) {
        return [[MHJsonTwitterParser alloc] init];
    }

    [NSException raise:@"Unknown format" format:@"Unknown format of parser"];
} 
```

编译器抱怨：

```
Control may reach end of non-void function 
```

这只是一个警告，但没关系。

明显的解决方法是`return nil;`在`[NSException raise: ...`.

但是，我认为它是不需要的（甚至会误导读者），因为抛出了异常，所以“控制可能到达非无效函数的结尾”是不正确的。还是我错过了什么……？仅仅是编译器的缺陷还是有一些相当大的原因？

编译器是 Apple LLVM 编译器 3.1

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-01T17:51:13.363

替换`[exception raise];`为`@throw exception;`在功能上是相同的，并且会阻止警告（请参阅：[抛出异常](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/Exceptions/Tasks/RaisingExceptions.html)）。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-01T16:46:32.223

原因很简单。

对于编译器，该方法`[NSException raise: ...]`是一个黑盒方法。它不知道该方法实际上会引发异常。

如果将其与 Java 或 C++ 进行比较，它们的`throw`语句是一种语言特性，编译器确切地知道当它找到它时会发生什么。在 Obj-C 中它是不同的，有时它取决于运行时条件。考虑以下。

```
NSException* exception = nil;

if (someCondition) {

   exception = [NSException exceptionWithName:...];
}

[exception raise]; 
```

编译器不知道是否真的引发了异常。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-01T16:46:22.947

警告之所以存在，是因为并非代码中的每条路径都以编译器认为可能有问题的 return 语句结尾。也就是说，您可能不应该在这里抛出异常，而应该生成一个`NSError`并返回`nil`. Objective-c 中异常和错误之间的区别在[此处](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Exceptions/Exceptions.html#//apple_ref/doc/uid/10000012i)和[此处](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ErrorHandlingCocoa/ErrorHandling/ErrorHandling.html#//apple_ref/doc/uid/TP40001806)进行了解释。

# html - css和html中的图像和单选按钮对齐问题

> ID：10400940
> 
> 赞同：0
> 
> 时间：2012-05-01T16:34:36.053
> 
> 标签：html, css

我目前正在使用此代码：

```
<div style="width:200px; height:300px;">
<img src="./imgs/Apeiron-Island-Hotel.jpg" style="width:200px; height:200px;"/> <input align="middle" type="radio" name="venue"/></div>
<div style="width:200px; height:300px;">
<img src="./imgs/Apeiron-Island-Hotel.jpg" style="width:200px; height:200px;"/> <input align="middle" type="radio" name="venue"/></div>
<div style="width:200px; height:300px;">
<img src="./imgs/Apeiron-Island-Hotel.jpg" style="width:200px; height:200px;"/> <input align="middle" type="radio" name="venue"/></div> 
```

它给了我像 [http://i.stack.imgur.com/ppjjF.png](http://i.stack.imgur.com/ppjjF.png)这样的解决方案， 但我希望它像这样 [http://i.stack.imgur.com/sIDX1.png](http://i.stack.imgur.com/sIDX1.png)

我从最近几个小时就开始尝试它，但我找不到任何解决方案。请帮助我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T16:40:43.073

用这个

```
<style type="text/css">
.auto-style1 {
text-align: center;
display:inline-block
}

</style>

<div class="auto-style1" style="width: 200px; height: 300px; float: left">
    <img src="./imgs/Apeiron-Island-Hotel.jpg" style="width: 200px; height: 200px;">
    <input align="middle" name="venue" type="radio" ></div>
<div class="auto-style1" style="width: 200px; height: 300px; float: left">
    <img src="./imgs/Apeiron-Island-Hotel.jpg" style="width: 200px; height: 200px; float: left">
    <input align="middle" name="venue" type="radio" ></div>
<div class="auto-style1" style="width: 200px; height: 300px;">
    <img src="./imgs/Apeiron-Island-Hotel.jpg" style="width: 200px; height: 200px; float: left">
    <input align="middle" name="venue" type="radio" ></div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T16:59:38.043

尝试这样的事情

```
 <div style="width:200px; height:300px; float:left; padding:0px 10px;" align="center">
    <img src="test.png" style="width:200px; height:200px;" /> <input align="middle" type="radio" name="venue"/></div>
    <div style="width:200px; height:300px; float:left; padding:0px 10px;" align="center">
    <img src="test.png" style="width:200px; height:200px;"/> <input align="middle" type="radio" name="venue"/></div>
    <div style="width:200px; height:300px; float:left; padding:0px 10px;" align="center">
    <img src="test.png" style="width:200px; height:200px;"/> <input align="middle" type="radio" name="venue"/></div> 
```

**检查 Jsfiddle 输出**：http: [//jsfiddle.net/8ZJP5/](http://jsfiddle.net/8ZJP5/)

# c# - 在图片框上添加标签

> ID：10400943
> 
> 赞同：4
> 
> 时间：2012-05-01T16:34:58.537
> 
> 标签：c#, forms, label, picturebox

我正在尝试在我的图片框上写一些文本，所以我认为最简单和最好的做法是在其上绘制标签。这就是我所做的：

```
PB = new PictureBox();
PB.Image = Properties.Resources.Image; 
PB.BackColor = Color.Transparent;
PB.SizeMode = System.Windows.Forms.PictureBoxSizeMode.StretchImage;
PB.Size = new System.Drawing.Size(120, 30);
PB.Location = new System.Drawing.Point(100, 100);
lblPB.Parent = PB;
lblPB.BackColor = Color.Transparent;
lblPB.Text = "Text";
Controls.AddRange(new System.Windows.Forms.Control[] { this.PB }); 
```

我得到没有图片框的空白页。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-01T16:53:43.170

While all these answers work, you should consider opting for a cleaner solution. You can instead use the picturebox's `Paint` event:

```
PB = new PictureBox();
PB.Paint += new PaintEventHandler((sender, e) =>
{
    e.Graphics.TextRenderingHint = System.Drawing.Text.TextRenderingHint.AntiAlias;
    e.Graphics.DrawString("Text", Font, Brushes.Black, 0, 0);
});
//... rest of your code 
```

**Edit** To draw the text centered:

```
PB.Paint += new PaintEventHandler((sender, e) =>
{
    e.Graphics.TextRenderingHint = System.Drawing.Text.TextRenderingHint.ClearTypeGridFit;

    string text = "Text";

    SizeF textSize = e.Graphics.MeasureString(text, Font);
    PointF locationToDraw = new PointF();
    locationToDraw.X = (PB.Width / 2) - (textSize.Width / 2);
    locationToDraw.Y = (PB.Height / 2) - (textSize.Height / 2);

    e.Graphics.DrawString(text, Font, Brushes.Black, locationToDraw);
}); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-01T16:39:37.343

代替

```
lblPB.Parent = PB; 
```

做

```
PB.Controls.Add(lblPB); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-04-22T01:41:32.253

我试过这个。（不使用图片框）

1.  首先使用“面板”控件
2.  设置面板的 BackgroundImage & BackgroundImageLayout (Stretch)
3.  在面板内添加标签

就这样

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-01T16:40:47.423

您必须将控件添加到`PictureBox`. 所以：

```
PB.Controls.Add(lblPB): 
```

**编辑：**

> 我得到没有图片框的空白页。

您没有看到图片框，因为它具有与表单相同的背景颜色。所以尝试设置 BorderStyle 和 BackColor。另一个错误是您可能没有设置标签的位置。所以：

```
PB.BorderStyle = BorderStyle.FixedSingle;
PB.BackColor = Color.White;
lblPB.Location = new Point(0,0); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-22T17:56:35.997

还有另一种方法。这很简单，但可能不是最好的。（我是初学者，所以我喜欢简单的东西）

如果我正确理解了您的问题，您想将标签放在图片框的上方/顶部。以下代码行将执行此操作。

```
myLabelsName.BringToFront(); 
```

现在，您的问题已经得到解答，但也许这可以帮助其他人。

# ruby-on-rails - Ruby 使用 FbGraph gem :: 获取朋友的电子邮件地址

> ID：10400944
> 
> 赞同：2
> 
> 时间：2012-05-01T16:35:03.233
> 
> 标签：ruby-on-rails, ruby, email

我正在尝试使用 FbGraph gem 获取朋友的电子邮件地址。我发现某处说我可以通过“电子邮件”对象获取它们，所以我尝试了但没有任何反应。这是我的代码和..

```
me= FbGraph::User.me( @access_token )
@friends= me.friends

@friends.each do |f|
  puts f.email
end 
```

有人知道我如何使用 Ruby FbGraph gem 从 facebook 获取朋友的电子邮件地址吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T19:00:27.237

看起来你错过了用户的获取

```
@friends.each do |f|
  friend = FbGraph::User.fetch(f, :access_token => @access_token)
  puts friend.email
end 
```

还应该有一种方法来获取用户列表，而不是为每个用户进行调用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T17:56:40.830

不幸的是，Facebook 文档现在这样说：
“注意：应用程序无法获取用户朋友的电子邮件地址。”

来源：[https ://developers.facebook.com/docs/reference/login/email-permissions/](https://developers.facebook.com/docs/reference/login/email-permissions/)

# cakephp - 可以在 CakePHP 身份验证组件中内置额外的标准吗？

> ID：10400945
> 
> 赞同：1
> 
> 时间：2012-05-01T16:35:05.083
> 
> 标签：cakephp

我想建立一个像 RSA/Page Token 这样的安全措施，其中令牌是登录中的 3 表单参数。（用户名、密码、令牌）

我不清楚用户控制器的“登录”操作的作用是什么。这是 Auth 组件的“AfterFilter”吗？

这个逻辑行得通吗？

```
// controllers/users_controller.php
login()
{
    if(isbadtoken($this->data['User']['Token']))
        $this-redirect('http://dev.null');
} 
```

这个逻辑是否应该像 cookie 登录和社交网络登录一样进入应用程序控制器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T17:37:43.993

在 cake 2.0+ 中，您需要手动调用 auth login 方法，所以这样的事情应该可以工作：

```
function login()
{
    if (isbadtoken($this->request->data['User']['Token']))
    {
        return;
    }

    // login user etc..
    if ($this->Auth->login())
    { /* ... */ }
} 
```

在以前的蛋糕版本中，auth login 已经在您的代码之前被调用，所以这样的事情是必要的：

```
function login()
{
    if (isbadtoken($this->request->data['User']['Token']))
    {
        // since auth doesn't know about about token,
        // log out the user in case auth login was successfull
        $this->Auth->logout();
        return;
    }

    if (!$this->Auth->user())
    {
        /* user is not logged in */
        return;
    }

    /* user is logged in */
} 
```

更好的解决方案可能是让 auth 组件知道令牌并以某种方式将其包含在登录过程中，但如果这样做太复杂，那么上面的内容应该不会给您带来麻烦。

# php - SQL SELECT 语句从具有外键和关联关系的多个表中提取数据

> ID：10400950
> 
> 赞同：3
> 
> 时间：2012-05-01T16:35:10.230
> 
> 标签：php, mysql, sql, xml

我有以下表格：

1.  `Universities( iduni, uniname )`
2.  `Campuses( idcampus, iduni, campusname, campusaddress )`
3.  `Projects( idproject, idcampus, projectname )`
4.  `IndustryCode( idindustrycode, codenumber, description )`
5.  `Specialization( idspec, specname )`

以下是上面列出的一些表的关联表

1.  `CampusSpecialization( idcampus, idspec )`
2.  `ProjectSpecialization( idproject, idSpec )`
3.  `ProjectIndustryCode( idproject,idindustrycode )`

我想通过 PHP 生成具有以下结构的 XML 文件，但无法弄清楚`SELECT`从数据库中提取数据的语句。数据是每个项目的校园、大学、项目、行业代码和专业，以便稍后我可以根据这些相互关联的数据在我的小型应用程序中过滤结果。

```
 <items>
        <item>
            <campus campusname="$CAMPUSNAME" uniname="$UNINAME" campusaddress="$CAMPUSADDRESS">
                <projects>
                    <project>
                        <name>$PROJECTNAME</name>
                        <specs>
                            <spec>$SPECNAME1</spec>
                            <spec>$SPECNAME2</spec>
                            ...
                        </specs>
                        <industries>
                            <industry>$CODENUMBER1</industry>
                            <industry>$CODENUMBER2</industry>
                            ...
                        </industries>
                    </project>
...
                </projects>
            </campus>
        </item>
        <item>
            <campus ... >
                <projects>
                    <project ... >
                        ...
                    </project>
            </campus>
    </items> 
```

到目前为止，这是我的 SQL 语句：

```
SELECT
  campusname, 
  specname,
  projectname
FROM
  Specialization,Projects
  JOIN CampusSpecialization ON CampusSpecialization.idspec = Specialization.idspec
  JOIN Campuses ON CampusSpecialization.idcampus = Campuses.idcampus
  JOIN ProjectSpecialization ON ProjectSpecialization.idspec = Specialization.idspec 
```

**编辑：**

项目可能有一个或多个代码和行业。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T16:54:51.160

试试这个：

```
SELECT c.campusname,u.uniname,c.campusaddress, s.specname, ic.codenumber, p.projectname
FROM campuses c
INNER JOIN universities u ON u.iduni = c.iduni
INNER JOIN camousspecialization cs ON cs.idcampus = c.idcampus
INNER JOIN speicialization s ON s.idspec = cs.idspec
INNER JOIN projectspecialization ps ON ps.idproject = s.idspec
INNER JOIN projectindustrycode pi On pi.idproject = ps.idproject
INNER JOIN industrycode ic on ic.industrycode = pi.industrycode
INNER JOIN projects p on p.idproject = ps.idproject 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T19:23:49.363

未经测试，但这应该会拉出所有带有项目的校园，以及*项目的*codeNumber 和 specName。

请注意，我不完全确定您的架构。关联表暗示每个项目可能有多个代码和规范名称。而 xml 意味着每个项目只有一个。此查询将为关联表中的每个条目返回一条记录。即，如果“项目 A”有三 (3) 个规范，则 SELECT 将返回三 (3) 个记录。

```
SELECT  c.idCampus
        , c.campusName
        , c.campusAddress
        , u.uniName
        , p.projectName
        , s.specName as ProjectSpecName
        , ic.codeNumber AS ProjectCodeNumber
FROM    Campuses c
            INNER JOIN Universities u ON u.iduni = c.iduni
            INNER JOIN Projects p ON p.idcampus = c.idcampus
            INNER JOIN ProjectSpecialization ps ON ps.idproject = p.idproject
            INNER JOIN Specialization s ON s.idspec = ps.idspec
            INNER JOIN ProjectIndustryCode pic ON pic.idproject = p.idproject
            INNER JOIN IndustryCode ic ON ic.idindustrycode = pic.idindustrycode 
```

**编辑：**不幸的是，我不使用 php。所以我不知道在 php 中生成 xml 的最佳或标准方法。您可以在 SELECT 中使用[group_concat](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat)来返回每个项目的代码和名称的串联列表。然后将这些字符串拆分为 php 中的数组，并使用数组计数生成所需数量的 xml 元素。

```
SELECT  c.idCampus
        , c.campusName
        , c.campusAddress
        , u.uniName
        , p.projectName
        , GROUP_CONCAT(s.specName SEPARATOR '|') as SpecNameList
        , GROUP_CONCAT(ic.codeNumber SEPARATOR '|') AS CodeNumberList
       ... 
```

# excel - 使用 SSIS 将数据从电子表格加载到数据库时，Excel 源不同步问题

> ID：10400954
> 
> 赞同：3
> 
> 时间：2012-05-01T16:35:15.800
> 
> 标签：excel, ssis

我想使用 SSIS 包将信息从 excel 电子表格加载到数据库，并且当电子表格没有更改时，该包可以正常工作。

此任务的要求之一是让用户在电子表格上添加评论。电子表格中已经有一个评论列，因此用户只需向该列添加评论。

当他们保存编辑的电子表格并运行包时，Excel Source 抱怨外部列不同步，更奇怪的是，显示的列数`Mapping`少于原始电子表格。

是什么原因造成的，我该如何解决它，以便我可以在 SSIS 中将这个包作为计划作业自动运行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T16:44:33.007

尝试删除到列名的自动映射。

在 excel 源中，有一个选项可以选择第一行是否有列名。配置映射后，将其设置为 false。它应该可以解决问题，但是您的转换现在将失败，因为它将第一行视为数据行，因此您可以配置输出错误以避免包失败，或者以某种方式从 excel 文件中删除第一行。您可以添加条件拆分来做到这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T17:17:58.213

发现问题：我的电子表格前面有几个小的空列。我的猜测是，当用户将信息保存回来时，这些列会被 excel（？）删除，因此这些列发生了移动，导致它与包不同步。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-07-30T14:30:42.883

我也遇到了这个错误，原因是一张表没有某些映射列的数据。一旦我在excel表中删除了该列然后运行。包成功运行。我认为这也会对你们中的任何人有所帮助。

# java - Java linux/unix 命令

> ID：10400959
> 
> 赞同：2
> 
> 时间：2012-05-01T16:35:27.540
> 
> 标签：java, linux

我有一个自定义的 java 可执行文件`jar file - mytestapp.jar`，它执行一些基本检查，如系统名称、IP 地址、规范名称、正常运行时间等，并在屏幕上以自定义共振峰打印相同的内容。该程序运行良好，我在运行时得到了所需和预期的输出

```
java -jar /mytestapp/mytestapp.jar 
```

我没有每次都运行上述命令，而是创建了一个文件`myappinfo`并将上述命令添加到文件中并保存。添加`/mytestapp`到 PATH 变量中。当我这样做时`echo $PATH`，它会显示`/mytestapp`在`PATH`.

我将 myappinfo 的文件权限设置为`755`并使其可执行。

现在，当我`myappinfo`从任何文件夹运行命令时，我得到相同的输出。

现在的要求是，我想让这个文件`myappinfo`成为一个二进制文件，不被任何人使用任何编辑器程序（如 vi、nano 等）更改或检查。有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T16:53:46.697

> 现在的要求是，我想让这个文件 - myappinfo 成为一个二进制文件，任何人都不能使用任何编辑器程序（如 vi、nano 等）来更改或检查。

只需将 shell 脚本设置为不可读/可写就可以满足您的要求。

但是，如果您坚持要将您的 shell 脚本转换为已编译的 shell 脚本，那么[shc](http://www.datsi.fi.upm.es/~frosal/sources/shc.html)声称可以做到这一点。

我敢肯定，如果您使用 Google 搜索，`shell script compiler`您也会发现许多其他选择。这只是我知道的一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T16:44:57.013

您可以使用 GCJ 将您的 Java 程序编译为本机机器代码（或任何其他以这种方式工作的编译器）。这将是唯一真正可行的解决方案，因为 Java 类文件可以很容易地反编译。

另一种解决方案是启动包装器。有很多包装器将 jar 文件和本机启动器代码部分结合起来，用于搜索 Java 运行时，然后使用它来执行嵌入的类文件。通过或多或少的努力，您可以从组合的可执行文件中提取类文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T16:45:12.663

.class 文件可以被反编译，因此您可能需要研究某种混淆器。但是，要使其在 Linux 上可执行，您只需要做`chmod +x <name-of-file.jar>`.

# jquery - AJAX 网站和动态 HTML 画布的 SEO 优化

> ID：10400971
> 
> 赞同：1
> 
> 时间：2012-05-01T16:36:08.127
> 
> 标签：jquery, html, ajax, api, seo

我有一个站点使用 AJAX 查询 Last.fm 数据库，然后在 HTML 画布上动态绘制结果图。在搜索功能中，我有一个将 window.location.hash 设置为搜索参数的命令。我还有一个函数可以检查 url 中是否提供了哈希，如果是，则生成页面。

例如，[http://www.thenlistento.com/#](http://www.thenlistento.com/#!/led+zeppelin) !/ led+zeppelin 将自动导航到 Led Zeppelin 的搜索页面。

我的问题是，如何为 SEO 优化这个设置？可以做到吗？我查看了 Google Webmaster Docs 并阅读了 hashbang 协议，但我不完全确定如何将它应用到我的情况......或者即使我可以。

任何帮助/建议将不胜感激。

网站链接：[http ://www.thenlistento.com](http://www.thenlistento.com)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T17:14:18.427

首先查看没有任何样式表的站点。

您的代码看起来很棒而且很干净！

您所有的链接都显示为 # 而不是转到 somepage.php/.html 等 - 我从事 SEO 已经有一段时间了，但如果我没记错的话 # 链接的排名低于进入新页面的链接。

此外，您的所有错误文本都在页面上可见，没有样式，如果某些蜘蛛认为您“隐藏”了文本，它们会将您排名较低。

您在 etc 中有元标记/描述（尽管它们是否影响您的 PR 仍有待商榷）。

你提到了谷歌网站管理员，所以我认为你已经提交了你的网站进行索引。

您有一个 robots.txt 文件。

到目前为止，您已经做对了所有事情。我想说是时候开始建立链接了；从排名较高的相关网站到您自己的链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-11T14:02:10.853

我最终使用phantomjs在服务器端提供了一个爬虫版本，phantomjs会渲染页面，等到页面渲染出来，然后你就可以得到最终的html，这对爬虫有好处。

在此处查看我的解决方案：[https](https://github.com/liuwenchao/ajax-seo) ://github.com/liuwenchao/ajax-seo ，您可能还需要一些额外的工作，因为我不确定我的解决方案是否会完全生成 Canvas，欢迎您 fork 我的存储库。

# c# - 如何使用 windows 7 平台创建具有行和列的动态表

> ID：10400972
> 
> 赞同：1
> 
> 时间：2012-05-01T16:36:22.117
> 
> 标签：c#, .net, silverlight, windows-phone-7, wpfdatagrid

我正在为轮滑德比制作一个应用程序，它将获取诸如回合、球队名称和统计数据等信息。信息以 JSON 格式存储。当我最终获得并解析数据时，我想以类似于以下的格式排列：Team1 Team2 Venue Date Result。行数应该是每个回合列表的长度。我无法在 C# 代码中找到执行此操作的方法。谁能指出我正确的方向。

编辑：我已经尝试实现一个列表框，我正在尝试按照此处找到的教程[http://msdn.microsoft.com/en-us/library/cc265158%28v=vs.95%29.aspx](http://msdn.microsoft.com/en-us/library/cc265158%28v=vs.95%29.aspx)

当我运行该程序时，我收到此错误消息：错误 1 ​​事件处理程序 'PhoneApplicationPage_Loaded' not found on class 'PhoneApp2.Page1' c:\users\lewis\documents\visual studio 2010\Projects\PhoneApp2\PhoneApp2\Page1.xaml Roller德比应用

这是我第 1 页的 Xaml

```
<!--LayoutRoot is the root grid where all page content is placed-->
<Grid x:Name="LayoutRoot" Background="Transparent">
    <Grid.RowDefinitions>
        <RowDefinition Height="Auto"/>
        <RowDefinition Height="*"/>
    </Grid.RowDefinitions>

    <!--TitlePanel contains the name of the application and page title-->
    <StackPanel x:Name="TitlePanel" Grid.Row="0" Margin="12,17,0,28">
        <TextBlock x:Name="ApplicationTitle" Text="MY APPLICATION" Style="{StaticResource PhoneTextNormalStyle}"/>
        <TextBlock x:Name="PageTitle" Text="Upcoming Bouts" Margin="9,-7,0,0" Style="{StaticResource PhoneTextTitle1Style}" Width="297" TextWrapping="NoWrap" FontSize="40" HorizontalAlignment="Left" />
        <Button Name="Home" Content="Home" Width="310" HorizontalContentAlignment="Center" HorizontalAlignment="Left" Click="Home_Click" />
    </StackPanel>

    <!--ContentPanel - place additional content here-->
    <Grid x:Name="ContentPanel" Grid.Row="1" Margin="12,0,12,0">
        <ListBox Height="100" HorizontalAlignment="Left" Margin="544,177,0,0" Name="ListofBouts" VerticalAlignment="Top" Width="460" Loaded="ListofBouts_Loaded">
            <ListBox.ItemTemplate>
                <DataTemplate>
                    <StackPanel Orientation="Horizontal">
                        <TextBlock Padding="5,0,5,0"
                     Text="{Binding Venue}" />
                        <TextBlock Text="{Binding Team1}" />
                        <TextBlock Text="{Binding Team2}"/>
                        <TextBlock Text="{Binding Date}"/>
                    </StackPanel>
                </DataTemplate>
            </ListBox.ItemTemplate>

            </ListBox>

    </Grid>
</Grid>

<!--Sample code showing usage of ApplicationBar-->
<!--<phone:PhoneApplicationPage.ApplicationBar>
    <shell:ApplicationBar IsVisible="True" IsMenuEnabled="True">
        <shell:ApplicationBarIconButton IconUri="/Images/appbar_button1.png" Text="Button 1"/>
        <shell:ApplicationBarIconButton IconUri="/Images/appbar_button2.png" Text="Button 2"/>
        <shell:ApplicationBar.MenuItems>
            <shell:ApplicationBarMenuItem Text="MenuItem 1"/>
            <shell:ApplicationBarMenuItem Text="MenuItem 2"/>
        </shell:ApplicationBar.MenuItems>
    </shell:ApplicationBar>
</phone:PhoneApplicationPage.ApplicationBar>--> 
```

这里是 C#

```
namespace PhoneApp2
{
  public partial class Page1 : PhoneApplicationPage
  {
    public Page1()
    {
        InitializeComponent();
    }

    private void Home_Click(object sender, RoutedEventArgs e)
    {
        NavigationService.Navigate(new Uri("/MainPage.xaml", UriKind.Relative));
    }

    private void ListofBouts_Loaded(object sender, RoutedEventArgs e)
    {
        InitializeComponent();
    }
    public class Bouts
    {
        public string Venue { get; set; }
        public string Team1 { get; set; }
        public string Team2 { get; set; }
        public string Date { get; set; }

        public Bouts(String venue, String team1, String team2, String date)
        {

            this.Venue = venue;
            this.Team1 = team1;
            this.Team2 = team2;
            this.Date = date;

        }
    }

    public class bouts : ObservableCollection<Bouts>
    {
        public bouts()
        {
            Add(new Bouts("Yankee Sadium", "Yankees", "Mets", "March 3"));
            Add(new Bouts("Yankee Sadium", "Yankees", "Mets", "March 3"));
            Add(new Bouts("Yankee Sadium", "Yankees", "Mets", "March 3"));
            Add(new Bouts("Yankee Sadium", "Yankees", "Mets", "March 3"));

        }
    }

  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T21:29:37.253

错误是说有一个`Loaded`事件为`Page1`. 由于事件未在代码隐藏中定义，因此必须在 XAML 中声明：

```
<phone:PhoneApplicationPage
  x:Class="PhoneApp2.Pag1"
  Loaded="PhoneApplicationPage_Loaded"
  OtherStuff...
  >
  <RestOfXaml> 
```

删除 Loaded="PhoneApplicationPage_Loaded" 并且错误应该消失。或者在后面的代码中定义事件。要么应该工作。

# android - 安卓和node.js

> ID：10400975
> 
> 赞同：0
> 
> 时间：2012-05-01T16:36:30.400
> 
> 标签：android, json, node.js, client-side

我试图通过我的 android 客户端连接到 nodejs 服务器，但我什至无法建立连接.. 我试图按照一些教程进行操作，但徒劳无功.. 如何将 json 对象发送到 nodejs 服务器..

```
try{
    DefaultHttpClient httpClient = new DefaultHttpClient();
    HttpPost request = new HttpPost();
    request.setHeader("Content-type", "application/json");

    URI uri = new URI("http://192.168.1.100:8080/"); 
    request.setURI(uri);
    JSONObject json = new JSONObject();
    Log.i("request", "OBject made");
    json.put("users", et.getText().toString());
    StringEntity se = new StringEntity(json.toString());
    Log.i("request", "String Entity made");
    se.setContentType(new BasicHeader(HTTP.CONTENT_TYPE, "application/json"));
    request.setEntity(se);
    Log.i("request", "Set String Entity made");
    HttpResponse response = httpClient.execute(request);
    tv.setText(response.getEntity().getContent().toString());

    }
    catch(Exception ex)
    {
        ex.printStackTrace();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T23:33:37.427

检查事项：

1.  你是在办公室电脑上尝试这个吗？那台电脑可以连接`http://192.168.1.100:8080/`吗？（*在 cURL 或通过网络浏览器尝试*）
2.  你是在你的安卓设备上尝试这个吗？该设备是否在正确的网络上？
3.  异常是否告诉您问题所在？

如果 #1 或 #2 失败，则问题是配置问题。否则，我至少会包含错误消息。

# .net - 如何在 .NET 分析器（ICorProfilerCallback）中获取唯一的方法 ID？

> ID：10400976
> 
> 赞同：1
> 
> 时间：2012-05-01T16:36:32.057
> 
> 标签：.net, profiling, clr-profiling-api

我使用 .NET 分析 API (ICorProfilerCallback) 并很快发现 FunctionID 不稳定（它可能会被重用，请参阅[http://msdn.microsoft.com/en-us/library/bb384619.aspx](http://msdn.microsoft.com/en-us/library/bb384619.aspx)）。没关系。我想出了用模块版本 ID (MVID) 和方法令牌 (mdTokenDef) 对方法进行编码的想法。

但是，我担心这是空间无效（GUID 为 16 个字节 + 令牌为 4 个字节）。现在我考虑使用某种散列（我认为 32 位散列应该足够了）。

你怎么看，有更好的方法来编码方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T18:35:08.240

很难弄错，FunctionIDs 是稳定的，直到 appdomain 被拆除。FunctionUnloadStarted 回调是从符号表中清除 id 的最直接方法。

请注意泛型。当 Foo 和 Bar 是引用类型时，例如`List<Foo>`和的方法共享相同的函数 id。`List<Bar>`这就是工作中的代码重用，这是 .NET 泛型的一个特性。

# eclipse - 如何使用键盘快捷键在 Eclipse 中切换视图的可见性？

> ID：10400978
> 
> 赞同：0
> 
> 时间：2012-05-01T16:36:42.593
> 
> 标签：eclipse, keyboard-shortcuts

可以设置键盘快捷键来显示任何给定的视图。但是，我没有看到一种方法来设置键盘快捷键来隐藏任何给定的视图（或至少是活动的视图），甚至更好地切换可见性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T16:57:31.097

有一个用于“最小化 Active View 或编辑器”的命令，您可以为其分配键盘快捷键，但似乎没有用于还原的类似命令。我想那是因为最小化的视图不能有焦点或“活动”，所以没有可以使用恢复命令的上下文。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T17:36:58.847

还有一个命令“关闭零件”来关闭活动的工作台零件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-05T09:18:40.323

我发现这可以最大限度地减少 eclipse 中的任何视图。

聚焦任何视图 Alt + Shift +（和相应的键）

EX : Alt + Shift + C, Shift + Tab ( 重复 Tab 直到焦点最小化按钮。) , Enter

# xml - 类型未找到或不是编译时常量：XML

> ID：10400987
> 
> 赞同：0
> 
> 时间：2012-05-01T16:37:40.623
> 
> 标签：xml, actionscript-3, class, import, fla

好吧，我用类 test.as 实例化了我的 .fla，因此，当我尝试声明像 XML 这样的 var 时，它会启动此错误类型未找到或不是编译时常量：XML。我不明白为什么，如果我加载了 xml 并且它真的很容易，但这次我不知道会发生什么，有什么想法吗？

```
////////////////////////////////////////////
// Project: Flex Builder PDVSA La Estancia
// Date: 11/4/12
// Author: Carlos Blanco
////////////////////////////////////////////

package {

    ////////////////////////////////////////////
    // IMPORTS
    ////////////////////////////////////////////

    //import flash.utils.*;
    //import flash.media.*;
    import fl.video.*;
    import flash.xml.*;
    import flash.display.Bitmap;
    import flash.display.BitmapData;
    import flash.display.DisplayObject;
    import flash.display.Loader;
    import flash.display.MovieClip;
    import flash.display.Shape;
    import flash.display.Sprite;
    import flash.display.StageQuality;
    import flash.display.StageScaleMode;
    import flash.events.Event;
    import flash.events.IOErrorEvent;
    import flash.events.MouseEvent;
    import flash.geom.ColorTransform;
    import flash.geom.Point;
    import flash.geom.Rectangle;
    import flash.net.URLLoader;
    import flash.net.URLRequest;
    import flash.system.fscommand;
    import flash.text.TextField;
    import flash.utils.ByteArray;
    import flash.utils.setInterval;

    import org.as3kinect.as3kinect;
    import org.as3kinect.as3kinectUtils;
    import org.as3kinect.as3kinectWrapper;
    import org.as3kinect.events.as3kinectWrapperEvent;
    import org.as3kinect.objects.motorData;

    [SWF(width='1280', height='720', backgroundColor='#000000', frameRate='30')]

    public class TestCam extends Sprite {
        ////////////////////////////////////////////
        // VARIABLES
        ////////////////////////////////////////////

        public var xmlParametros :XML;

        private var coverflow :Coverflow;

        public var btm:BitmapData;

        public var bitmapStandar :BitmapData;

        public var cargador :Cargador;

        public var contte :MovieClip = new MovieClip();
        public var currentCover:Sprite;

        public var capa :MovieClip = new Background();

        public var coverActivo :Boolean=false;

        public var overback :MovieClip = new OverBackground();

        public var caja :MovieClip = new MovieClip();

        public var flvideo :FLVPlayback;

        public var listener :Object = new Object();

        private var _canvas_depth   :BitmapData;
        private var _canvas_video   :BitmapData;

        private var _bmp_depth      :Bitmap;
        private var _bmp_video      :Bitmap;

        private var _min_depth_dragging :Boolean = false;
        private var _max_depth_dragging :Boolean = false;
        private var _motor_dragging     :Boolean = false;
        private var _threshold_dragging :Boolean = false;
        private var _blobs_on           :Boolean = false;
        private var _wb_filter_on       :Boolean = false;

        private var _threshold_value    :int = 50;

        private var _tone   :Tone;
        private var _as3w   :as3kinectWrapper;

        public var mc :MovieClip = new MovieClip();
        public var bmd :BitmapData;

        //VARIABLES PARA CALIBRAR EL DISPOSITIVO DEL KINECT
        //punto para el movieclip que va a la izquierda, este de color Azul
        public var izq_x:Number = 155;
        public var izq_y:Number = 260;

        //Punto para mover el movieclip que va a la derecha y es de color verde
        public var der_x:Number = 416;
        public var der_y:Number = 260;

        //Punto para mover el movieclip que va en el centro, este es de color rojo
        public var cen_x:Number = 291;
        public var cen_y:Number = 260;

        //Con esta Variable add_cam_depth se muestra o remueve del escenario la camara del kinect
        //True : Se muestra en pantalla
        //False : Es removida o nunca se muestra en la pantalla
        public var add_cam_depth :Boolean = true;

        public var container_mc_depth :MovieClip = new MovieClip();

        ////////////////////////////////////////////
        // CONSTRUCTOR - INITIAL ACTIONS
        ////////////////////////////////////////////

        public function TestCam() {
            XML();
            fscommand("fullscreen", "true");

            setupStage();

            //Resize Listener
            stage.addEventListener(Event.RESIZE, resizeHandler);

            resizeMe();

            init();

        }

        public var myLoader:URLLoader

        ////////////////////////////////////////////
        // FUNCTIONS
        ////////////////////////////////////////////

        public function XML(){
            myLoader = new URLLoader();
            myLoader.load(new URLRequest("xml/parametros.xml"));
            myLoader.addEventListener(Event.COMPLETE, loadXML);

        }

        public function loadXML(e :Event)
        {
            xmlParametros  =  new XML(e.target.data);

            izq_x = Number( xmlParametros .@izq_x);
            izq_y = Number( xmlParametros .@izq_x);

            der_x = Number( xmlParametros .@der_x);
            der_y = Number( xmlParametros .@der_x);

            cen_x = Number( xmlParametros .@cen_x);
            cen_y = Number( xmlParametros .@cen_x);

        if( xmlParametros.@add_cam_depth == "Yes")
        {
            add_cam_depth = true;
        }else
        {
            add_cam_depth = false;
        }
        }

        public function errorXML(e:Event)
        {

        }

        public function setupStage():void {
            //stage.quality = StageQuality.HIGH;
            //stage.scaleMode = StageScaleMode.NO_SCALE;
            //stage.align = StageAlign.TOP_LEFT;
        }

        private function resizeHandler(event:Event):void {
            resizeMe();
        }

        public function setbitmap():void
        {           
            _as3w = new as3kinectWrapper();
            _as3w.depth.mirrored = !_as3w.depth.mirrored;
            //Add as3kinectWrapper events (depth, video and acceleration data)
            _as3w.addEventListener(as3kinectWrapperEvent.ON_DEPTH, got_depth);
            //Add depth BitmapData to depth_cam MovieClip
            _canvas_depth = _as3w.depth.bitmap;
            _bmp_depth = new Bitmap(_canvas_depth);
            bmd = new BitmapData(640,480);

            container_mc_depth.addChild(_bmp_depth);
            if(this.add_cam_depth){
                addChild(container_mc_depth);
            }
            container_mc_depth.scaleY = -1; 
            container_mc_depth.y = container_mc_depth.height + container_mc_depth.y;
            this.addEventListener(Event.ENTER_FRAME, update);       
        }

        public function showMC():void{
            if(coverActivo == false){
                addChild(capa);
                flvideo = null;
                flvideo = new FLVPlayback()
                flvideo.source = coverflow._data[coverflow._currentCover].link;
                addChild(flvideo);
                flvideo.x = 450;
                flvideo.y = 200;
                flvideo.addEventListener(VideoEvent.COMPLETE, completePlay);
                coverActivo = true;
            }else{
                //ns.close();
                if(this.contains(capa)){
                    removeChild(capa);
                    removeChild(flvideo);
                }
                coverActivo = false;
            }
        }

        public function completePlay(e:VideoEvent):void {
            trace("VIdeo Complete"+e.toString());
            if(this.contains(capa)){
                removeChild(capa);
                removeChild(flvideo);
            }
            coverActivo = false;
        }

        private function resizeMe():void {
            //No Resizing for This
        }

        var maske :Shape = new Shape();
        var i :Sprite = new Sprite();
        var c :Sprite = new Sprite();

        private function init():void {
            coverflow = new Coverflow(stage.stageWidth, stage.stageHeight, stage);
            addChild(coverflow);
            maske.graphics.beginFill(0xffff00);
            maske.graphics.drawRect(0,0,stage.width,stage.height);
            overback.mouseEnabled = false;
            addChild(overback);
            addChild(maske);
            this.mask = maske;
            setbitmap();

            d.graphics.beginFill(0x0000ff);
            d.graphics.drawCircle(0,0,3);
            container_mc_depth.addChild(d); d.x = der_x;d.y = der_y;

            i.graphics.beginFill(0x00ff00);
            i.graphics.drawCircle(0,0,3);
            container_mc_depth.addChild(i); i.x=izq_x; i.y=izq_y;
            //izq_x,izq_y
            c.graphics.beginFill(0xff0000);
            c.graphics.drawCircle(0,0,3);
            container_mc_depth.addChild(c); c.x=cen_x;c.y=cen_y;
        }

        public var got_depth_on :Boolean =false;
        public var d :MovieClip = new MovieClip();

        public var _playing :Boolean = false;

        public var forward :Boolean = false;
        public var rewi :Boolean = false;

        public var touch_event_izq :Boolean = false;
        public var touch_event_der :Boolean = false;

        public var cont_touchevent_i :int = 0;
        public var cont_touchevent_d :int = 0;

        //UPDATE METHOD (This is called each frame)

        private function update(event:Event){
            //  trace(mouseX+" "+mouseY);
            _as3w.depth.getBuffer();
            if(got_depth_on){
                bmd.draw(_bmp_depth);
                //trace(cont_touchevent_i+", BOOL: "+touch_event_izq);
                //BOTON EN LA IZQUIERDA, ITEM PREVIO
                if(bmd.getPixel(izq_x,izq_y) != 0){

                    this.cont_touchevent_i++;
                    if(!this.contains(capa))
                    {
                        if(this.coverflow != null && got_depth_on == true)
                        {
                            if(!touch_event_izq)
                            {
                                this.coverflow.clickPre();
                                got_depth_on = true;
                                touch_event_izq = true;
                            }
                            if(cont_touchevent_i > 15)
                            { 
                                cont_touchevent_i = 0;
                                touch_event_izq = false; 
                            }else
                            {
                                touch_event_izq = true;
                            }
                        }
                    }else{
                        if(!rewi){
                            flvideo.seek(0);
                            rewi = true;
                        }else{
                            rewi = false;
                        }
                    }
                }else{
                    this.cont_touchevent_i = 0;
                    touch_event_izq = false;
                }
                //CENTRO
                if(bmd.getPixel(cen_x,cen_y) != 0){
                    if(this.coverflow != null && got_depth_on == true){
                        if(!_playing){
                            showMC();
                            got_depth_on = false;
                            _playing = true;
                        }

                    }
                }else{
                    _playing = false;
                }
                //DERECHA

                if(bmd.getPixel(der_x,der_y) != 0){
                    this.cont_touchevent_d++;
                    if(!this.contains(capa))
                    {   
                        if(this.coverflow != null && got_depth_on == true)
                        {
                            if(!touch_event_der)
                            {
                                this.coverflow.clickNext();
                                got_depth_on = false;
                                touch_event_der = true;
                            }
                            if(cont_touchevent_d > 15)
                            { 
                                this.cont_touchevent_d = 0;
                                touch_event_der = false; 
                            }else
                            {
                                touch_event_der = true;
                            }
                        }
                    }else
                    {
                        if(!forward)
                        {
                            flvideo.seek(flvideo.playheadTime+0.05);
                            forward = true;
                        }else
                        {
                            forward = false;
                        }           
                    }

                }else{
                    this.cont_touchevent_d = 0;
                    touch_event_der = false;
                }
            }
            //trace("Valor IZquierda:"+bmd.getPixel(izq_x,izq_y) +"Valor Centro:"+bmd.getPixel(cen_x,cen_y)+"Valor derecha:"+bmd.getPixel(der_x,izq_y));            
        }

        //GOT DEPTH METHOD
        private function got_depth(event:as3kinectWrapperEvent):void{
            got_depth_on = true;
            _as3w.depth.mirrored = true;
            as3kinectUtils.byteArrayToBitmapData(event.data, _canvas_depth);
            //as3kinectUtils.fireTouchEvent(1 , new Point(82,60), _touch_data, stage);
        }

        //GOT VIDEO METHOD
        private function got_video(event:as3kinectWrapperEvent):void{
            //Convert Received ByteArray into BitmapData
            as3kinectUtils.byteArrayToBitmapData(event.data, _canvas_video);
        }

        //GOT MOTOR DATA (Accelerometer info)
        function got_motor_data(event:as3kinectWrapperEvent):void
        {
            var object:motorData = event.data;
            //info.text = "raw acceleration:\n\tax: " + object.ax + "\n\tay: " + object.ay + "\n\taz: " + object.az + "\n\n";
            //info.appendText("mks acceleration:\n\tdx: " + object.dx + "\n\tdy: " + object.dy + "\n\tdz: " + object.dz + "\n");
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T17:32:31.890

你有一个名为的方法`XML`：

```
 public function XML(){
        myLoader = new URLLoader();
        myLoader.load(new URLRequest("xml/parametros.xml"));
        myLoader.addEventListener(Event.COMPLETE, loadXML);

    } 
```

那是与类顶级类冲突的[`XML`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/XML.html)。

当您`xmlParametros = new XML(e.target.data);`在第 157 行说时，编译器认为您引用的是您的方法而不是类。

将您的函数更改为与您尝试实例化的类不冲突的标识符。也许`public function requestXML() {`

# vb.net-2010 - 如何为不同语言更改 RadGrid 的 GridButtonColumn 确认对话框确定和取消按钮文本

> ID：10400988
> 
> 赞同：0
> 
> 时间：2012-05-01T16:37:43.227
> 
> 标签：vb.net-2010

我有一个 Radgrid，为删除设置了 GridButtonColumn。我正在使用确认对话框并使用资源文件根据用户的语言设置 ConfirmText 和 ConfirmTitle 属性。如何在确认对话框中找到确定按钮、取消按钮和关闭工具提示，以便根据用户语言进行相应设置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T06:20:28.117

为此，您必须创建自己的确认模板。

首先，您必须在页面中添加一个隐藏字段来存储您的文化信息。（如果可能的话，不要将此代码放在母版页中，以便在每个页面中都可以使用）。

```
protected override void OnLoad(EventArgs e)
{
    base.OnLoad(e);

    HtmlInputHidden hi = new HtmlInputHidden();
    HtmlHead head = (HtmlHead)Page.Header;
    hi.ID = "HtmlInputHiddenLang";
    hi.Attributes.Add("class", "HtmlInputHiddenLang");
    hi.Value = System.Threading.Thread.CurrentThread.CurrentUICulture.Name;
    head.Controls.Add(hi);
} 
```

然后在为 radwindowmanager 创建您自己的主题或模板之后。

```
 <telerik:RadWindowManager runat="server" SkinID="CustomSkin">
        <ConfirmTemplate>
            <div class="rwDialogPopup radconfirm">
                <div class="rwDialogText">
                    {1}
                </div>
                <div class="rwDialogButton">
                    <a onfocus="RadWindowConfirm_DefaultFocus();" onclick="$find('{0}').close(true);"
                        class="MyrwPopupButton" href="javascript:void(0);">
                        <img id="Img2" runat="server" class="imgCurrentCulture" src="~/Images/CURRENT_CULTURE/Yes.png"
                            onmouseover="ImageButtonMouseOver(this);" onmouseout="ImageButtonMouseOut(this);" /></a>
                    <a id="hrefNo" name="hrefNo" onclick="$find('{0}').close(false);" class="MyrwPopupButton"
                        href="javascript:void(0);">
                        <img id="Img3" runat="server" class="imgCurrentCulture" src="~/Images/CURRENT_CULTURE/No.png"
                            onmouseover="ImageButtonMouseOver(this);" onmouseout="ImageButtonMouseOut(this);" /></a>
                </div>
                <script type="text/javascript">

                    $('img.imgCurrentCulture').each(function () {
                        var culture = $('.HtmlInputHiddenLang')[0].value;
                        this.src = this.src.replace('/CURRENT_CULTURE/', '/' + culture + '/');
                    });

                    function RadWindowConfirm_DefaultFocus() {
                        document.getElementById("hrefNo").focus();
                    } 
                </script>
            </div>
        </ConfirmTemplate>
    </telerik:RadWindowManager> 
```

根据上面的代码，默认 url 类似于“~/Images/CURRENT_CULTURE/Yes.png”。一旦你在隐藏字段中设置了你的文化名称，它就会被 CURRENT_CULTURE 替换为 En_us，所以你的最终图像 url 是“~/Images/en_us/Yes.png”。

注意：我在我的代码中使用了 jquery，所以不要忘记在你的项目中添加 jquery。

# tridion - 如何检测我的代码是否应该模拟？

> ID：10400989
> 
> 赞同：16
> 
> 时间：2012-05-01T16:37:50.810
> 
> 标签：tridion

我有作为事件处理程序的一部分运行的代码，需要创建一个新的 TOM.NET 会话（我不能重用`subject.Session`）。此事件处理程序被加载到许多 Tridion 进程（TcmServiceHost、COM+、Publisher、TcmTemplateDebugHost、IIS 应用程序池）中，这些进程可能：

*   在有权访问 Tridion 的身份下运行（例如，COM+ 应用程序在 MTSUser 下运行，它是 Tridion 管理员）
*   在无权访问 Tridion 但允许模拟 Tridion 用户的身份下运行（例如，TcmServiceHost 作为 NetworkService 运行，配置为 Tridion 模拟用户）。

我尝试用这个 TOM.NET 代码来满足这两种情况：

```
Session session = null;
try
{
    session = new Session();
}
catch (AccessDeniedException ex)
{
    // this process doesn't have TCM access, so impersonate a user that does
    session = new Session("Administator");
}
if (session != null)
{
    var item = session.GetObject(id);
    ... 
```

这是检查我的代码是否在有权访问 Tridion 的进程下运行的正确方法（忽略我硬编码“管理员”的事实）？该代码有效，但我只是想知道是否有更有效的方法来执行“有权访问 Tridion”检查？

**注意**：当我使用核心服务访问 Tridion 时会出现同样的问题，所以问题不在于 TOM.NET 是否是此处使用的正确 API。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-02T12:35:34.683

我不会使用此代码。异常捕获速度很慢，您目前正在向无法访问系统的任何人授予（管理员）访问权限 - 这是一个很大的安全漏洞。

相反，我会查看当前用户是谁，并确定他是否是模拟用户。如果没有 API（我没有检查），您可以直接从 Tridion.ContentManager.config 文件中读取模拟用户。

```
var isImpersonationUser = IsImpersonationUser(WindowsIdentity.GetCurrent());
var session = isImpersonationUser ? new Session("Administrator") : new Session();
var item = session.GetObject(id); 
```

或者您可以为您的事件代码单独配置它。甚至硬编码，如果你不关心代码是通用的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-01T17:29:04.073

这段代码对我来说似乎很有效——但是通过检查您是否可以创建会话对象并不能保证代码将能够执行您想要在 CMS 中实际执行的操作。

似乎这样的代码正在创建一个大型安全漏洞，允许进程在没有权限时回退到更高级别的安全性。另请记住，如果您正在修改 CMS 中的任何项目，则该冒充将导致不显示可能触发更改的个人的真实姓名。它将作为您模拟的用户存储。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-02T13:59:30.073

首先，这是一个很好的问题/话题。

我认为您正在尝试“构建”可以在每个 Tridion 流程上运行的通用程序。在我看来，您应该知道您何时处于一个或另一个流程中，因为根据最佳实践（R&D/you），我们不应该创建 Session 对象，而是在那些没有的流程中使用核心服务访问 Session 对象并在可能的情况下重用可用的会话。

正如你在模板和事件系统中所知道的，例如，我们可以访问 Session，所以我们应该重用它（除非我们想做用户不允许做的事情，在这种情况下我们应该模拟）。

如果在另一个进程中会话不可用，您应该使用核心服务。

所以我对你的问题的回答是不要使用 TOM.NET。我会改变我的方法并使用核心服务构建它，我可以在其中模拟我之前已经配置的特定用户。而且您的代码会更通用，并且会“随处”运行（但不是在烤面包机中）。

我了解您在此处试图确定的内容，“到底是谁在运行我当前的进程”？所以你可以相应地模仿，

不幸的是（AFAIK），您必须编写一些代码来查看谁是运行该进程的身份，然后进行相应的模拟。这很棘手，这也是为什么我建议使用核心服务而不是 TOM.NET API 的原因。

希望这是有道理的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-02T22:58:33.083

回到最初实现 TDSE.Impersonate() 方法时，如果调用线程标识不是模拟用户，它被有意设计为静默失败。例如，这允许当时 GUI 中的 ASP 代码盲目地尝试模拟（基于 REMOTE_USER 标头 IIRC）。关键是，如果您不是冒充用户，好吧，好吧，您可以做您自己，但如果您是，您可以/将会冒充。

我刚刚使用 COM API 对此进行了测试（我将由您来验证 .NET API 是否一致）。我的结果（在 Tridion 2011 SP1 上）如下：

1）。作为受托人并且不冒充的冒充用户成为他自己。2）。作为受托人和模拟的模拟用户将成为他们模拟的任何人（注意您通常不希望创建这样的用户）。3）。调用 impersonate 的非模拟用户仍然是他自己。

显然，很大程度上取决于进程身份是否是模拟用户。也许在某些情况下，您可能更愿意避免使用 NETWORK SERVICE 并为 TcmServiceHost 显式创建一个身份，只是为了允许对此类用户是否可以模拟进行细粒度控制。

那么......您是否需要明确测试您的进程是否作为模仿者运行？简单地尝试模仿并接受结果可能会更好。最初的想法当然包括这个意图，但我怀疑事情已经变得更加复杂。

对于这个问题+1，因为毫无疑问，这一领域的预期行为是绝对必要的。