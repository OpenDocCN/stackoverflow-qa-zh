# StackOverflow 问答 11153000-11153999

# java - 请告诉我在下面的java代码中我做错了什么

> ID：11153004
> 
> 赞同：-4
> 
> 时间：2012-06-22T08:52:13.857
> 
> 标签：java, visual-c++, file-io, binaryfiles

我正在读取一个二进制文件，其中数值数据以 16 位形式存储。当这个文件被读取视觉 c++ 程序时，它工作正常，但是当我使用下面的 java 代码时，我无法得到想要的结果，并且输出似乎是垃圾值。我正在使用`RandomAccessFile`你可以看到的。但我得到了绝对荒谬的价值观。还有一件事，我在这个文件中存储了浮点值，但即使我使用`readFloat()`, or `readInt()`or `readShort()`，我也无法得到想要的结果。请指出我哪里出错了。 **文件中的前 10 个字节**： 01100000 00000000 00100011 00100000 11000000 00100011 11000001 00100010 10111111 00100001 。*谢谢大家给我们时间*

```
public class Test {
    public static void main(String[] args) throws IOException {
        RandomAccessFile data = new RandomAccessFile("D:\\RawEEGData.bin","r");
        try {
            while(data != null) {

                // i have tried readFloat(), readShort() and readInt()
                // but none of them seems to be working
                float myInt16 = data.readFloat(); 

                System.out.printf(" %f\n", myInt16);
            }
        } finally {
            if (data != null) { data.close(); };
        }
     }
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T11:34:25.163

您需要澄清*int16*数据的真正含义：

*   字节顺序（字节序）？
*   签名还是未签名？
*   二进制补码还是其他？

除非您*知道*数据的形式，否则您将无法正确解释它。根据结果​​，RandomAccessFile 上提供的方法可能没用，因为它们只涵盖了 java 中常用的格式。

最有可能的问题是 VC++ 以平台相关顺序存储数据，而 Java 总是使用大端字节顺序（也称为网络字节顺序）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T09:29:34.493

它看起来像一个字节顺序问题。如果您的同事使用 ReadInt16，那么这些数字就不是浮点数。尝试这个 ：

```
 byte b0 = data.readByte();
  byte b1 = data.readByte();
  int i = (((int)b1)<<8) + b0;
  System.out.print(" int value : " + i); 
```

编辑：如果这不起作用，请编辑您的问题以将前 8 个字节显示为`10101000 01...`或十六进制

# ruby-on-rails - JRuby on rails 框架 Web 应用程序

> ID：11153005
> 
> 赞同：0
> 
> 时间：2012-06-22T08:52:18.647
> 
> 标签：ruby-on-rails, jruby

我需要有关 Jruby on rails 框架的更多信息。我已经阅读了很多关于 ruby​​/ruby on rails/jruby/jruby on rails 之间的区别，但仍然不知道基本的事情，例如：

*   这是服务器端还是客户端；
*   如果我在 Rails 上使用 jruby，将能够使用例如 jquryUI
*   无法找到网站开发步骤的清晰示例
*   如果不是客户端语言/哪种语言适合与 DB2 一起使用

注意：到目前为止，我只使用过 T-SQL、经典 ASP（服务器端）、javacript 和 jquery（客户端）。我只在 Java 和 mySQL 中完成了很少的桌面应用程序，这就是为什么我需要更多关于 jruby on rails 的信息，然后再深入研究我所拥有的书籍。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T08:57:32.647

*   这是服务器端
*   如上所述它是服务器端，因此可以毫无冲突地使用 jQueryUI
*   创建模型，创建控制器，创建视图，FIN

# ajax - 更新 text in JavaServer Faces 2 + PrimeFaces 3.3.1

Is it possible to periodically update the text of the `<title></code> of a page? For example with <code><p:poll></code&g</h1> <blockquote> <p>ID：11153010</p> <p>赞同：0</p> <p>时间：2012-06-22T08:52:34.413</p> <p>标签：ajax, jsf, primefaces</p> </blockquote> <hr/> <h2>回答 #1</h2> <blockquote> <p>赞同：0</p> <p>时间：2012-06-22T09:55:10.420</p> </blockquote> <p>我通过使用 PrimeFaces 的<a href="http://www.primefaces.org/showcase/ui/requestContext.jsf" rel="nofollow noreferrer">RequestContext</a>解决了这个问题：</p> <pre><code>RequestContext context = RequestContext.getCurrentInstance(); context.execute("document.title='Number: " + number + "'"); </code></pre> <p>我将此代码添加到我的支持 bean 中的一个方法中，该方法作为<code><p:poll></code>.</p> <p>感<a href="https://stackoverflow.com/users/620338/matt-handy">谢马特汉迪</a>的指导！</p> </body> </html></title>`

# django - 我应该在 Google Blogger Data API 中为我的 Facebook 应用程序使用哪种身份验证

> ID：11153011
> 
> 赞同：0
> 
> 时间：2012-06-22T08:52:36.260
> 
> 标签：django, facebook, oauth-2.0, google-data-api

我正在构建一个 facebook 应用程序（使用 Django），我必须在其中使用 Google Blogger Data API 从博客中读取数据。博客可以是任何公共博客。

那么，我应该在 Google Blogger API 中为我的应用程序使用哪种身份验证/授权机制以及如何使用？我不希望在我的应用中打开重定向的 Google 登录页面。

Google Console 还提供 API 密钥，我们可以通过它读取公共数据，但我不确定它是否真的是我的应用程序的正确选择。

*我目前正在使用正在开发的 ClientLogin。*

我什至有一个奇怪的想法，即使在发布后使​​用 ClientLogin 从我的博客中读取数据，因为它不限制请求/天的数量。这会让我的博客不安全吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T06:00:18.960

使用`OAuth Service protocols`或`Google API Access tokens`提取公共数据就可以完成这项工作。

# android - 如何使用循环从 id 加载多个可绘制对象？

> ID：11153013
> 
> 赞同：0
> 
> 时间：2012-06-22T08:52:46.367
> 
> 标签：android, resources

必须是循环通过此代码的一种方式：

```
private void loadSprites() {
    this.sprites[0] = BitmapFactory.decodeResource(getResources(), R.drawable.ic_boom01);
    this.sprites[1] = BitmapFactory.decodeResource(getResources(), R.drawable.ic_boom02);
    this.sprites[2] = BitmapFactory.decodeResource(getResources(), R.drawable.ic_boom03);
    this.sprites[3] = BitmapFactory.decodeResource(getResources(), R.drawable.ic_boom04);
    this.sprites[4] = BitmapFactory.decodeResource(getResources(), R.drawable.ic_boom05);
    this.sprites[5] = BitmapFactory.decodeResource(getResources(), R.drawable.ic_boom06);
    this.sprites[6] = BitmapFactory.decodeResource(getResources(), R.drawable.ic_boom07);
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T08:57:25.193

如果我理解你的问题，你想要类似的东西，

```
int[] drawables = {R.drawable.ic_boom01,R.drawable.ic_boom02,R.drawable.ic_boom03,R.drawable.ic_boom04,R.drawable.ic_boom05,R.drawable.ic_boom06,R.drawable.ic_boom07}

private void loadSprites() {
for(int i=0; i<this.sprites.length; i++)
    this.sprites[i] = BitmapFactory.decodeResource(getResources(), drawables[i]);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T08:54:41.907

您应该将图像放在资产文件夹中。从他们那里，您可以通过他们的文件名访问它们。请参阅[http://developer.android.com/reference/android/content/res/AssetManager.html](http://developer.android.com/reference/android/content/res/AssetManager.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T09:04:09.523

请查看下面的代码。

首先制作int数组

```
int[] mImgArray = { R.drawable.ic_boom01, R.drawable.ic_boom02,
            R.drawable.ic_boom03, R.drawable.ic_boom04, R.drawable.ic_boom05,
            R.drawable.ic_boom06, R.drawable.ic_boom07 }; 
```

或使用以下代码将此图像设置为 ImageView

```
mImgView1.setImageResource(mImgArray[0]); 
```

您可以使用以下代码将此图像直接转换为位图并存储到位图数组中。

```
Bitmap mBmpArray=new Bitmap[mImgArray.length];
for(int i=0; i<mImgArray.length; i++)
    mBmpArray[i] = BitmapFactory.decodeResource(getResources(), mImgArray[i]);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-07-06T02:20:33.910

这对我有用

```
//Bitmap of images for fly asset
     private Bitmap fly[] = new Bitmap[8];

    //Initialize array of images
    for(int i = 0; i < fly.length; i++){
                this.fly[i] = BitmapFactory.decodeResource( getResources(), getResources().getIdentifier("fly_frame" + i, "drawable", context.getPackageName() ) );
    } 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-06-22T08:55:43.807

您可以在一个简单的 for 循环中执行此操作..并从第一个 id 开始并在每个循环中将其递增 1.. 虽然我不建议您这样做..

# objective-c - 如何在目标 c 中的对象之间传递对象，然后确保它们不会全部被删除？

> ID：11153020
> 
> 赞同：0
> 
> 时间：2012-06-22T08:53:26.680
> 
> 标签：objective-c, class, object, memory-management

> **可能重复：**
> [如何将 NSString 发送到另一个视图控制器](https://stackoverflow.com/questions/10719017/how-to-send-an-nsstring-to-another-view-controller)

我创建了一个存储数据的类（classA）。classB 将数据发送给它。发生的情况是 classB 向 classA 发送一个对象，然后该对象在 classB 中被删除。我认为我的程序的问题在于，当从 classB 中删除对象时，它会从 classA 中删除，因为我猜该对象只有一个真正的“副本”。我理解对了吗？我将如何解决这个问题？我只能想到在 classB 中复制对象，但有更好的方法吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T08:58:38.913

在objective-c中，对象在其保留计数等于0时删除。因此，如果您的classB希望此传递的对象存在，只需保留它并在不需要它后释放。如果它是一个属性，则将属性声明为保留（或强，如果你使用弧）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T10:52:49.950

最好的方法是将对象从 classB 获取到 classA 中的保留对象（您可以使用 classA 中保留的属性）。这样您就不会丢失从 classA 传递到 classB 的对象的范围。

# android - xmlvm - 在 xcode 中导入错误兼容库

> ID：11153032
> 
> 赞同：0
> 
> 时间：2012-06-22T08:54:09.207
> 
> 标签：android, objective-c, xcode

有谁知道 android compat 库在 xmlvm 中的位置，所以我可以自己将其复制到项目文件夹中，因为我猜这是缺少的，也将由 target=android-on-iphone 提供，但正如下面提到的这个目标在当前版本中不可用。

我安装 xmlvm 并与演示/示例取得联系完全没有问题，而且所有演示对我来说都很完美。

但是现在我遇到了 xcode 中的最后 4 个错误，我通过迁移我的 android 项目，`-- skeleton=android:migrate`然后通过交叉编译它`--target=iphone`并在 Xcode 中打开项目。经过几次项目设置更改后，错误从 72 个下降到 4 个错误；）

但是错误是导入文件未找到兼容库的错误，所以我认为这应该以某种方式解决...

是`--target=android-on-iphon`不是因为我没有使用 e，因为这个选项会将 android 兼容库复制到项目文件夹中。我尝试使用 xmlvm 的 2 个文档中提到的这个目标，但是在 xmlvm 的实际构建中，这个目标不存在。 .

如何解决这些错误？

截图：

[http://img526.imageshack.us/img526/8957/bildschirmfoto20120620u.png](http://img526.imageshack.us/img526/8957/bildschirmfoto20120620u.png)

[http://imageshack.us/f/138/bildschirmfoto20120620u.png/](http://imageshack.us/f/138/bildschirmfoto20120620u.png/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T13:53:32.830

从我所见，您似乎正在使用尚未实现的 Android API 的一部分。不幸的是，您似乎需要重写您的应用程序或自己实现 API。

# eclipse - Eclipse 安装 Ubuntu 10.04

> ID：11153035
> 
> 赞同：1
> 
> 时间：2012-06-22T08:54:12.933
> 
> 标签：eclipse, development-environment, ubuntu-10.04

我正在尝试在 Ubuntu 10.04 上设置 Eclipse。我已经从 Synaptic 包管理器安装了 Eclipse SDK 3.5.2。问题是，Eclipse 没有给我创建 Java 或动态 Web 项目的选项。它也无法正确识别我导入的项目（显示源文件夹但不显示包）。 **我是否拥有正确版本的 Eclipse，或者我是否需要安装除此之外的任何东西。** 请注意，我已经将 Sun 的 JVM 设置为我系统的默认值。已经尝试了一段时间并且没有运气到处搜索，任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T08:57:35.127

我猜您需要用于 Java EE 开发人员的 Eclipse IDE ..[在这里](http://www.eclipse.org/downloads/packages/eclipse-ide-java-ee-developers/indigosr2)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T09:07:34.057

Ubuntu 中打包的版本是 Java SE 开发的轻量级版本（即独立的 Java 应用程序）。如果你想创建 web 项目，你需要一个包含更多插件的版本。[面向 Java EE 开发人员的 Eclipse IDE](http://www.eclipse.org/downloads/packages/eclipse-ide-java-ee-developers/indigosr2)

# bash - 为什么命令选项“-f”被 bash 当作命令

> ID：11153041
> 
> 赞同：3
> 
> 时间：2012-06-22T08:54:30.157
> 
> 标签：bash, shell

我运行从**time**的手册中复制的命令，但它抱怨**-f** command not found。为什么它将**-f**识别为命令？

```
$ time -f "%E real,%U user,%s sys" ls -Fs
-f: command not found

real    0m0.152s
user    0m0.108s
sys 0m0.040s 
```

我怀疑外壳并决定尝试另一个外壳。在上面，shell 是**bash**。我切换到**破折号**，发现**时间**现在运行正常。

我的系统是 Linux Mint 13。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-22T08:56:11.717

`time``bash`是and中的内置命令`zsh`。如果您想改为执行外部命令，则应调用`/usr/bin/time -f ...`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-22T13:02:17.763

您可以使用`bash`built-in`command`来抑制 shell 函数和内置函数：

```
command time -f "%E real,%U user,%s sys" ls -Fs 
```

（比使用更长，但更明确一点`\time`。）

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-22T08:55:40.550

Bash 包含一个精简版的`time`. 改为使用`/usr/bin/time`。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-22T09:07:59.377

添加到其他答案中，您可以通过`\`.

```
\time -f "%E real,%U user,%s sys" ls -Fs 
```

# php - 比较从 php 文件中读取的域

> ID：11153048
> 
> 赞同：1
> 
> 时间：2012-06-22T08:55:14.360
> 
> 标签：php, string, dns, strstr, parse-url

我有一个 txt 文件，其中包含域和 ips 看起来像这样

aaa.bbb.com 8.8.8.8
bbb.com 2.2.2.2
...
...
..

如何将 bbb.com 替换为 3.3.3.3 但不更改 aaa.bbb.com？

这是我功能的一部分，但根本不起作用。

第一部分我通过在获得匹配记录后逐行从文件中读取匹配域来搜索匹配域，然后
将其删除。
第二部分我在其中写了一个新行。

```
 $filename = "record.txt";
    $lines = file($filename);

    foreach($lines as $line) 
    if(!strstr($line, "bbb.com") //I think here is the problem core
    $out .= $line;

    $f = fopen($filename, "w");
    fwrite($f, $out);
    fclose($f);

    $myFile = "record.txt";
    $fh = fopen($myFile, 'a') or die("can't open file");
    $stringData = "bbb.com\n 3.3.3.3\n";
    fwrite($fh, $stringData);
    fclose($fh); 
```

执行代码后，aaa.bbb.com 和 bbb.com 都被删除了，我该如何解决这个问题？

我尝试过“parse_url”，但“parse_url”只解析带有“http://”前缀的 url，而不是域。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T09:57:58.153

好吧，很抱歉造成误解，这应该有效：

```
<?php

$file = "record.txt";
$search = "bbb.com";
$replace = "3.3.3.3";

$open = file_get_contents($file);
$lines = explode(PHP_EOL, $open);
$dump = "";
foreach($lines as $line){
    $pos = strpos($line, $search);
    if($pos === false){
    echo "<b>$line</b>";
        $dump .= $line.PHP_EOL;
    }else{
        if($pos !== 0){
            $dump .= $line.PHP_EOL;
        }else{
            $dump .= $search." ".$replace.PHP_EOL;
        }
    }
}
$dump = substr($dump,0,-1);
file_put_contents($file, $dump);

?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T09:07:58.923

我能想到的最简单的解决方案是使用`substr($line,0,7) == 'bbb.com'`而不是您的`strstr`比较。

# php - php中heredoc与nowdoc的优点/不便

> ID：11153049
> 
> 赞同：56
> 
> 时间：2012-06-22T08:55:20.030
> 
> 标签：php, heredoc, nowdoc

作为一个新手，我被建议最好使用heredoc，而不是太多的嵌套代码（请参阅[PHP代码中的Unexpected T_ELSE](https://stackoverflow.com/questions/11111128/unexpected-t-else-in-php-code)）。

但是我无法理解heredoc和nowdoc之间是否存在显着差异。

与对新手理解很重要的另一个相比，heredoc 和 nowdoc 的优势是什么（即不是很小的优势，但对我来说很重要）。

* * *

## 回答 #1

> 赞同：133
> 
> 时间：2012-06-22T09:03:38.400

> Nowdocs 是单引号字符串，就像 heredocs 是双引号字符串。nowdoc 的指定与heredoc 类似，但在nowdoc 内部不进行解析。该构造非常适合嵌入 PHP 代码或其他大型文本块而无需转义。
> 
> [http://php.net/manual/en/language.types.string.php#language.types.string.syntax.nowdoc](http://php.net/manual/en/language.types.string.php#language.types.string.syntax.nowdoc)

换句话说：

```
$foo = 'bar';

$here = <<<HERE
    I'm here, $foo !
HERE;

$now = <<<'NOW'
    I'm now, $foo !      
NOW; 
```

`$here`是*“我在这里，酒吧！”* , 而`$now`“*我现在，$foo ！”* .

如果您不需要变量插值但需要字符串中的特殊字符`$`，Nowdocs 更易于使用。就这样。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-10-13T09:42:54.080

**heredocs**
1\. **heredocs**文本的行为就像一个双引号字符串，没有双引号。
2、**heredoc**中的引号不需要转义，但转义码**\n换行符
\r回车符\t水平制表符\v垂直制表符\e转义符\f换页符\反斜杠\$美元符号，\" 双引号**仍然可以使用。变量被扩展了，但是当在**heredoc**中表达复杂变量时必须像使用字符串一样小心。

例子 ：

```
$myname='Tikku';
$heredoc_exmaple= <<<HEREDOC
\\n ,\\r ,\t ,\r ,\\v ,\\e ,\f ,\\ , \ ,$89 ,$ , $myname , ' , \$myname ,  \" ,\'
HEREDOC;
echo $heredoc_exmaple;

//OUTPUT \n ,\r ,   , ,\v ,\e , ,\ , \ ,$89 ,$ , Tikku , ' , $myname , \" ,\' 
```

**nowdocs**
1\. **nowdocs**文本的行为就像一个单引号字符串，没有单引号。
2\. **nowdocs**中的引号不需要转义，里面不展开**变量。nowdocs**的优点是嵌入PHP代码和转义码，不需要转义。

例子 ：

```
$myname='Tikku';
$nowdoc_exmaple= <<<'NOWDOC'
\\n ,\\r ,\t ,\r ,\\v ,\\e ,\f ,\\ , \ ,$89 ,$ , $myname  , ' , \$myname ,  \" ,\'
NOWDOC;

echo $nowdoc_exmaple;

//OUTPUT \\n ,\\r ,\t ,\r ,\\v ,\\e ,\f ,\\ , \ ,$89 ,$ , $myname , ' , \$myname , \" ,\' 
```

**语法**：nowdoc 使用与 heredocs 相同的 <<< 序列标识，但后面的标识符用单引号括起来，例如 <<<'NOWDOC'。heredoc 标识符的所有规则也适用于 nowdoc 标识符，尤其是那些关于结束标识符外观的规则。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T21:24:13.403

当您不想处理引用和取消引用复杂字符串时，Nowdoc 非常棒，因为它不会解释任何引号并且它不会接受变量。因此，它非常适合手动显示实际的代码片段！

但是，如果您将 heredocs 和 nowdocs 混合用于字符串内容块，这很容易陷入其中，那么无论您在哪里使用 heredoc，您都可能很容易遇到 XSS（跨站点脚本）问题！因此，这种方法对我来说还不够干净，无法推荐给从 php 开始的开发人员！相反，您应该尝试对这些大型信息块使用模板（任何类型的，或您喜欢的任何模板引擎）。毕竟，您不希望 html 在您的 php 中，而且您 - 当然 - 不希望用户注入 javascript，例如：

```
$username = '<script>alert(document.cookie.toString())</script>';

$insecure_example = <<<HERE
    I really like having my site exploited, $username
HERE; 
```

因此，不要使用 HEREDOCS 和 NOWDOCS 代替适当的模板方法或模板引擎。

无论语言或技术之间存在接口，您都必须进行编码。php转sql？绑定。php转html？编码。http到php？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-12-27T09:20:44.660

*Heredoc 比 "text"、echo 'text' 和 nowdoc 快 1000 倍。*

Sql1 与 echo = 0.00011205673217773

带有heredoc的sql2 = 9.7751617431641E-6

**结果 = Sql1 慢了 1046.3414634146%。**

# c# - 在 Oracle 10g 服务器上调用存储过程时出错

> ID：11153055
> 
> 赞同：0
> 
> 时间：2012-06-22T08:55:53.417
> 
> 标签：c#, oracle, stored-procedures, plsql

我从 C# 调用我的存储过程，我得到以下异常：

> ORA-06550：第 1 行，第 7 列：
> PLS-00306：调用“MY_PROC”时参数的数量或类型错误
> ORA-06550：第 1 行，第 7 列：
> PLS-00306：调用“的参数数量或类型错误” MY_PROC'
> ORA-06550：第 1 行，第 7 列：
> PL/SQL：语句被忽略

由于我的程序有 57 个参数，因此很难知道真正的问题出在哪里。有没有办法得到更详细的消息？

注意：但是参数类型和数量似乎匹配！

这是我的存储过程参数：

```
Var_PE_...  IN  NUMBER(8,0),
Var_PE_...  IN  NUMBER(4,0),
Var_PE_...  IN  NUMBER(3,0),
Var_PE_...  IN  DATE,
Var_PE_...  IN  DATE,
Var_PE_...  IN  NUMBER(2,0),
Var_PE_...  IN  NUMBER(4,0),
Var_PE_...  IN  NUMBER(4,0),
Var_PE_...  IN  NUMBER(8,0),
Var_PE_...  IN  NUMBER(7,0),
Var_PE_...  IN  VARCHAR2(1 BYTE),
Var_PE_...  IN  CHAR(1 BYTE),
Var_PE_...  IN  NUMBER(15,0),
Var_PE_...  IN  VARCHAR2(25 BYTE),
Var_PE_...  IN  VARCHAR2(25 BYTE)
Var_PE_...  IN  VARCHAR2(25 BYTE),
Var_PE_...  IN  VARCHAR2(25 BYTE),
Var_PE_...  IN  NUMBER(5,0),
Var_PE_...  IN  VARCHAR2(25 BYTE),
Var_PE_...  IN  VARCHAR2(25 BYTE),
Var_PE_...  IN  NUMBER(5,0),
Var_PE_...  IN  NUMBER(5,0),
Var_PE_...  IN  VARCHAR2(11 BYTE),
Var_PE_...  IN  NUMBER(2,0),
Var_PE_...  IN  CHAR(2 BYTE),
Var_PE_...  IN  VARCHAR2(17 BYTE),
Var_PE_...  IN  DATE,
Var_PE_...  IN  DATE,
Var_PE_...  IN  DATE,
Var_PE_...  IN  NUMBER(12,5),
Var_PE_...  IN  NUMBER(9,2),
Var_PE_...  IN  NUMBER(3,0),
Var_PE_...  IN  NUMBER(9,2),
Var_PE_...  IN  CHAR(2 BYTE),
Var_PE_...  IN  CHAR(3 BYTE),
Var_PE_...  IN  NUMBER(3,0),
Var_PE_...  IN  NUMBER(7,2),
Var_PE_...  IN  NUMBER(3,0),
Var_PE_...  IN  NUMBER(9,2), 
Var_PE_...  IN  NUMBER(9,2),
Var_PE_...  IN  NUMBER(10,0),
Var_PE_...  IN  VARCHAR2(49 BYTE),
Var_PE_...  IN  CHAR(1 BYTE),
Var_PE_...  IN  CHAR(1 BYTE),
Var_PE_...  IN  CHAR(6 BYTE),
Var_PE_...  IN  CHAR(1 BYTE),
Var_PE_...  IN  NUMBER(9,2),
Var_PE_...  IN  VARCHAR2(13 BYTE),
Var_PE_...  IN  NUMBER(2,0),
Var_PE_...  IN  VARCHAR2(2 BYTE),
Var_PE_...  IN  DATE,
Var_PE_...  IN  DATE,
Var_PE_...  IN  VARCHAR2(1 BYTE),
Var_PE_...  IN  NUMBER(2,0),
Var_PE_...  IN  VARCHAR2(20 BYTE),

Var_PS...   OUT VARCHAR2,
Var_PS...   OUT VARCHAR2 
```

这是我从 c# 调用此过程的方法：

```
l_Params.Add(CreateInputDbParameter(DbType.Int32,      0, "PE_..."));
l_Params.Add(CreateInputDbParameter(DbType.Int32,      0, "PE_..."));
l_Params.Add(CreateInputDbParameter(DbType.Int32,      0, "PE_..."));
l_Params.Add(CreateInputDbParameter(DbType.Date,       0, "PE_..."));
l_Params.Add(CreateInputDbParameter(DbType.Date,       0, "PE_..."));
l_Params.Add(CreateInputDbParameter(DbType.Int32,      0, "PE_..."));
l_Params.Add(CreateInputDbParameter(DbType.Int32,      0, "PE_..."));
l_Params.Add(CreateInputDbParameter(DbType.Int32,      0, "PE_..."));
l_Params.Add(CreateInputDbParameter(DbType.Int32,      0, "PE_..."));
l_Params.Add(CreateInputDbParameter(DbType.Int32,      0, "PE_..."));
l_Params.Add(CreateInputDbParameter(DbType.AnsiString, 0, "PE_..."));
l_Params.Add(CreateInputDbParameter(DbType.AnsiString, 0, "PE_..."));
l_Params.Add(CreateInputDbParameter(DbType.Int32,      0, "PE_..."));
l_Params.Add(CreateInputDbParameter(DbType.AnsiString, 0, "PE_..."));
l_Params.Add(CreateInputDbParameter(DbType.AnsiString, 0, "PE_..."));
l_Params.Add(CreateInputDbParameter(DbType.AnsiString, 0, "PE_..."));
l_Params.Add(CreateInputDbParameter(DbType.AnsiString, 0, "PE_..."));
l_Params.Add(CreateInputDbParameter(DbType.Int32,      0, "PE_..."));
l_Params.Add(CreateInputDbParameter(DbType.AnsiString, 0, "PE_..."));
l_Params.Add(CreateInputDbParameter(DbType.AnsiString, 0, "PE_..."));
l_Params.Add(CreateInputDbParameter(DbType.Int32,      0, "PE_..."));
l_Params.Add(CreateInputDbParameter(DbType.Int32,      0, "PE_..."));
l_Params.Add(CreateInputDbParameter(DbType.AnsiString, 0, "PE_..."));
l_Params.Add(CreateInputDbParameter(DbType.Int32,      0, "PE_..."));
l_Params.Add(CreateInputDbParameter(DbType.AnsiString, 0, "PE_..."));
l_Params.Add(CreateInputDbParameter(DbType.AnsiString, 0, "PE_..."));
l_Params.Add(CreateInputDbParameter(DbType.Date,       0, "PE_..."));
l_Params.Add(CreateInputDbParameter(DbType.Date,       0, "PE_..."));
l_Params.Add(CreateInputDbParameter(DbType.Date,       0, "PE_..."));
l_Params.Add(CreateInputDbParameter(DbType.Double,     0, "PE_..."));
l_Params.Add(CreateInputDbParameter(DbType.Double,     0, "PE_..."));
l_Params.Add(CreateInputDbParameter(DbType.Double,     0, "PE_..."));
l_Params.Add(CreateInputDbParameter(DbType.Double,     0, "PE_..."));
l_Params.Add(CreateInputDbParameter(DbType.AnsiString, 0, "PE_..."));
l_Params.Add(CreateInputDbParameter(DbType.AnsiString, 0, "PE_..."));
l_Params.Add(CreateInputDbParameter(DbType.Int32,      0, "PE_..."));
l_Params.Add(CreateInputDbParameter(DbType.Double,     0, "PE_..."));
l_Params.Add(CreateInputDbParameter(DbType.Int32,      0, "PE_..."));
l_Params.Add(CreateInputDbParameter(DbType.Double,     0, "PE_..."));
l_Params.Add(CreateInputDbParameter(DbType.Double,     0, "PE_..."));
l_Params.Add(CreateInputDbParameter(DbType.Int32,      0, "PE_..."));
l_Params.Add(CreateInputDbParameter(DbType.AnsiString, 0, "PE_..."));
l_Params.Add(CreateInputDbParameter(DbType.AnsiString, 0, "PE_..."));
l_Params.Add(CreateInputDbParameter(DbType.AnsiString, 0, "PE_..."));
l_Params.Add(CreateInputDbParameter(DbType.AnsiString, 0, "PE_..."));
l_Params.Add(CreateInputDbParameter(DbType.AnsiString, 0, "PE_..."));
l_Params.Add(CreateInputDbParameter(DbType.Double,     0, "PE_..."));
l_Params.Add(CreateInputDbParameter(DbType.AnsiString, 0, "PE_..."));
l_Params.Add(CreateInputDbParameter(DbType.Int32,      0, "PE_..."));
l_Params.Add(CreateInputDbParameter(DbType.AnsiString, 0, "PE_..."));
l_Params.Add(CreateInputDbParameter(DbType.Date,       0, "PE_..."));
l_Params.Add(CreateInputDbParameter(DbType.Date,       0, "PE_..."));
l_Params.Add(CreateInputDbParameter(DbType.AnsiString, 0, "PE_..."));
l_Params.Add(CreateInputDbParameter(DbType.Int32,      0, "PE_..."));
l_Params.Add(CreateInputDbParameter(DbType.AnsiString, 0, "PE_..."));

l_Params.Add(CreateOutputDbParameter(DbType.AnsiString, 2000, "PS_..."));
l_Params.Add(CreateOutputDbParameter(DbType.AnsiString, 2000, "PS_..."));

ExecuteStoreProcedure("MY_PROC", l_Params); 
```

用于创建参数的主页代码：

```
 public DbParameter CreateInputDbParameter(DbType typeParam, int sizeparam,
        string nameParam, object valueParam)
    {
        DbParameter DbParam = Parameter;
        DbParam.DbType = typeParam;
        DbParam.Size = sizeparam;
        DbParam.Direction = ParameterDirection.Input;
        DbParam.ParameterName = nameParam;
        if (valueParam == null)
        {
            DbParam.Value = DBNull.Value;
        }
        else
        {
            DbParam.Value = valueParam;
        }
        return DbParam;
    }

    public DbParameter CreateOutputDbParameter(DbType typeParam, int sizeparam, string nameParam)
    {
        DbParameter DbParam = Parameter;
        DbParam.DbType = typeParam;
        DbParam.Size = sizeparam;
        DbParam.Direction = ParameterDirection.Output;
        DbParam.ParameterName = nameParam;
        return DbParam;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T09:09:28.537

如果是输出，则需要将参数方向设置为 ParameterDirection.Output

```
OracleParameter test= 
    new OracleParameter("testparameter", OracleDbType.Varchar2);
test.Direction = ParameterDirection.Output;
cmd.Parameters.Add(test); 
```

如果是输入，则将其设置为 ParameterDirection.Input

检查参数的大小，声明时没有给出大小。而且参数的类型也很重要。例如，您已`NUMBER(15,0)`映射为`DbType.Int32`,`NUMBER(3,0)`映射为`DbType.Double`

## 编辑

您正在尝试使用 ADO.NET 基类连接 oracle，您知道它甚至`System.Data.OracleClient`已被弃用。

> System.Data.OracleClient 中的类型已弃用。这些类型在 .NET Framework 版本 4 中受支持，但将在未来版本中删除。Microsoft 建议您使用第三方 Oracle 提供商。

您最好使用[Oracle Data Provider for .NET](http://www.oracle.com/technetwork/topics/dotnet/index-085163.html)，这些错误中的大部分都会得到解决。

# java - Java7拒绝信任信任库中的证书

> ID：11153058
> 
> 赞同：12
> 
> 时间：2012-06-22T08:55:57.293
> 
> 标签：java, ssl, ssl-certificate

我有一个奇怪的问题 - 供应商使用带有自签名客户端和服务器证书的 TLS SSLv3。这对 Java1.5 和 Java1.6 来说不是问题——只需将客户端证书和私钥导入密钥库，将服务器公共证书导入信任库。一切正常。但是，对于 Java7，即使使用了相同的信任库，服务器证书也无法被信任。我尝试过使用 Java7（1.7.03、04 和 05、x86 和 x64 版本）的 Windows 和 Red Hat，但均未成功。

我从头开始重新创建了密钥库/信任库，它们只包含这些证书。已设置适当的系统属性（javax.net.ssl.keyStore、javax.net.ssl.trustStore），关键方面是完全相同的代码和配置在 JDK5/6 中完美运行。

我不知所措 - 我找不到任何关于额外检查的参考，但我认为证书位于信任库中的事实应该意味着它是受信任的，无论是自签名的。

任何帮助表示赞赏。广告

异常跟踪：

```
Exception in thread "main" javax.net.ssl.SSLHandshakeException:     sun.security.validator.ValidatorException: PKIX path validation failed:     java.security.cert.CertPathValidatorException: Path does not chain with any of the trust anchors
sun.security.validator.ValidatorException: PKIX path validation failed: java.security.cert.CertPathValidatorException: Path does not chain with any of the trust anchors
at sun.security.ssl.Alerts.getSSLException(Alerts.java:192)
at sun.security.ssl.SSLSocketImpl.fatal(SSLSocketImpl.java:1868)
at sun.security.ssl.Handshaker.fatalSE(Handshaker.java:276)
at sun.security.ssl.Handshaker.fatalSE(Handshaker.java:270)
at sun.security.ssl.ClientHandshaker.serverCertificate(ClientHandshaker.java:1338)
at sun.security.ssl.ClientHandshaker.processMessage(ClientHandshaker.java:154)
at sun.security.ssl.Handshaker.processLoop(Handshaker.java:868)
at sun.security.ssl.Handshaker.process_record(Handshaker.java:804)
at sun.security.ssl.SSLSocketImpl.readRecord(SSLSocketImpl.java:998)
at sun.security.ssl.SSLSocketImpl.performInitialHandshake(SSLSocketImpl.java:1294)
at sun.security.ssl.SSLSocketImpl.writeRecord(SSLSocketImpl.java:685)
at sun.security.ssl.AppOutputStream.write(AppOutputStream.java:111)
at sun.nio.cs.StreamEncoder.writeBytes(StreamEncoder.java:221)
at sun.nio.cs.StreamEncoder.implFlushBuffer(StreamEncoder.java:291)
at sun.nio.cs.StreamEncoder.implFlush(StreamEncoder.java:295)
at sun.nio.cs.StreamEncoder.flush(StreamEncoder.java:141)
at java.io.OutputStreamWriter.flush(OutputStreamWriter.java:229)
at com.alltria.ypsilon.testing.TestSSL.main(TestSSL.java:65)
Caused by: sun.security.validator.ValidatorException: PKIX path validation failed: java.security.cert.CertPathValidatorException: Path does not chain with any of the trust anchors
at sun.security.validator.PKIXValidator.doValidate(PKIXValidator.java:350)
at sun.security.validator.PKIXValidator.engineValidate(PKIXValidator.java:249)
at sun.security.validator.Validator.validate(Validator.java:260)
at sun.security.ssl.X509TrustManagerImpl.validate(X509TrustManagerImpl.java:326)
at sun.security.ssl.X509TrustManagerImpl.checkTrusted(X509TrustManagerImpl.java:231)
at sun.security.ssl.X509TrustManagerImpl.checkServerTrusted(X509TrustManagerImpl.java:126)
at sun.security.ssl.ClientHandshaker.serverCertificate(ClientHandshaker.java:1320)
... 13 more
Caused by: java.security.cert.CertPathValidatorException: Path does not chain with any of the trust anchors
at sun.security.provider.certpath.PKIXCertPathValidator.engineValidate(PKIXCertPathValidator.java:208)
at java.security.cert.CertPathValidator.validate(CertPathValidator.java:279)
at sun.security.validator.PKIXValidator.doValidate(PKIXValidator.java:345)
... 19 more
Java Result: 1 
```

ssl 调试失败的部分是尝试验证服务器证书：

```
***
%% Invalidated:  [Session-1, SSL_RSA_WITH_RC4_128_SHA]
main, SEND SSLv3 ALERT:  fatal, description = certificate_unknown
main, WRITE: SSLv3 Alert, length = 2
[Raw write]: length = 7
0000: 15 03 00 00 02 02 2E                               .......
main, called closeSocket()
main, handling exception: javax.net.ssl.SSLHandshakeException: sun.security.validator.ValidatorException: PKIX path validation failed: java.security.cert.CertPathValidatorException: Path does not chain with any of the trust anchors
main, called close()
main, called closeInternal(true) 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-27T22:43:12.927

实际上，我遇到了一个类似的问题，Tomcat 应用程序在使用 Java 1.6 时会信任信任库中的 ca 证书，而使用 Java 1.7 会拒绝它。添加`keyUsage`到我的 ca 证书后它可以工作（在阅读错误报告后，[JDK-7018897：CertPath 验证无法处理带有错误 KeyUsage 的自签名证书](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=7018897)）。

我做了什么（Ubuntu 12.04 x64）：

1.  编辑 /etc/ssl/openssl.cnf 并取消注释部分`keyUsage`中的行`v3_ca`。
2.  `keyUsage`使用以下命令从旧证书生成新的 ca 证书：

    ```
    openssl x509 -in oldca.pem -clrext -signkey oldca.key -extfile /etc/ssl/openssl.cnf -extensions v3_ca -out newca.pem 
    ```

3.  从信任库中删除旧的 CA 密钥并插入新的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-18T09:06:50.840

我在处理JDK 1.7时也遇到过这种情况。如果使用 -x509 选项调用 req 命令，最好取消注释**v3_ca部分中的****keyUsage**行并再次生成 CA（参见[http://wwwneu.secit.at/web/documentation/openssl/openssl_cnf.html](http://wwwneu.secit.at/web/documentation/openssl/openssl_cnf.html)）

 **```
openssl req -new -x509 -days 3650 -keyout ca.key -out ca.crt -config openssl.cnf -extensions v3_ca -batch 
```

如果您使用生成的 CA 证书签署其他证书，请确保您还取消注释项目**basicConstraints = CA:true**并将值设置为 true

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-08-15T11:53:49.730

由于某些原因，Java 8 不接受甚至添加到其`cacerts`存储中的自签名证书。

我的解决方法是创建一个自定义密钥库：

`openssl req -x509 -newkey rsa:4096 -keyout key.pem -out cert.pem -days 365 -subj "/C=MA/ST=ByExample/L=Test/O=Chapter3/OU=Org/CN=bip70.com" -node`s

```
keytool -import -keystore clientkeystore -file cert.der -alias bip70.com -storepass changeit 
```

然后在我的 IDE 中使用它作为 jvm 参数：`-Djavax.net.ssl.trustStore=clientkeystore`**

# c# - 作为参数传递给 onclick() 的 C# 变量未定义

> ID：11153060
> 
> 赞同：2
> 
> 时间：2012-06-22T08:55:59.580
> 
> 标签：c#, javascript, .net, asp.net-mvc, exception-handling

我有一个视图`Details`，它由一个局部视图`_Tabs`和第二个局部视图组成`_Contents`。

在其中一个部分视图 ( `_Tabs`) 中，我有一个图像链接，在`onclick`函数中，我传递了一个变量`CatID`。此变量包含局部视图的 ViewModel 的属性值（称为`TabsForItemViewModel`）。

调试时，点击图片时，VS显示：

> Microsoft JScript 运行时错误：“CatID”未定义

**部分视图“_Tabs”：**

局部视图的视图模型`_Tabs`是`TabsForItemViewModel`

```
@model TabsForItemViewModel
@{
   int CatID = Model.CategoryInfo.CatID; 
 }

<ul>
<li>
   <a href="#GoToCatLevel">
     <img border="0" src="view_cat.png" alt ="Up" title="Go To This Category" 
          width="10" height="10" onclick="LoadCategoryData(CatID, this.href)" />
   </a>
</li>
... 
```

**查看详情”：**

```
@model ItemDetailsViewModel
@{    
    ViewBag.Title = "Item Details";
}

<div id="Main">
...
   CategoryInfoViewModel categoryData = new CategoryInfoViewModel(itemD.Ca_ID);                                                   

    TabsForItemViewModel tabsForItem = new TabsForItemViewModel(categoryData);
    <div id="Tabs" class="div-tab">                      
        @{Html.RenderPartial("~/Views/Item/_Tabs.cshtml", tabsForItem );}
    </div>
    ...
</div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T08:58:37.013

`CatID`不是 Javascript 变量...它是需要呈现到页面中的 ac# 变量。使用 Razor 语法，这将是：

```
onclick="LoadCategoryData(@CatID, this.href)" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-22T09:00:25.957

你在 onclick 函数中发送的时候忘记在 CatID 前面放一个@符号。

它应该是：

```
 onclick="LoadCategoryData(@CatID, this.href)" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T09:23:38.893

首先`<img>`没有财产`href`。您是否尝试将点击处理程序添加到`<a>`？

我个人不建议您像以前那样在 html 元素中混合 javascript。您应该使用不显眼的 javascript。

你可以试试这样的

```
<img id=".img" border="0" src="view_cat.png" alt ="Up" title="Go To This Category" 
          width="10" height="10" data-catid="@CatID" />

<script type="text/javascript">
  $(".img").click(function(){
     LoadCategoryData($(this).data("catid"), $(this).attr("src"));
  });
</script> 
```

现在您可以将此脚本放在单独的文件中。

# c# - 提供的 AutoMapper 值类型错误

> ID：11153061
> 
> 赞同：3
> 
> 时间：2012-06-22T08:56:07.180
> 
> 标签：c#, type-conversion, automapper

我正在尝试将一个类型映射`UserProfileEditorViewModel`到一个类型`UserProfile`，如下所示：

```
public ActionResult Edit(UserProfileEditorViewModel userProfileViewModel)
        {
            UserProfile user = _getUserByIdQuery.Invoke(SessionData.UserId);

            Mapper.Map(userProfileViewModel, user); 
```

当前抛出此错误：

> 提供的值是 System.String 类型，但应为 MyNamespace.Web.Models.UserProfileEditorViewModel。

就行了`Mapper.Map(userProfileViewModel, user);`。

我的映射配置如下：

```
Mapper.CreateMap<UserProfileEditorViewModel, UserProfile>()
                .ForMember(
                   dto => dto.Tags, 
                   opt => opt.ResolveUsing<TagNameStringToTagCollectionResolver>()); 
```

`TagNameStringToTagCollectionResolver`看起来像：

```
 protected override IEnumerable<Tag> ResolveCore(string source)
        {
            return _getTagsByNamesQuery.Invoke(source.Split(','));
        } 
```

有什么想法为什么会抛出该异常？我是 Automapper 的新手，有点难过。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T10:31:47.857

这里的问题是需要在其方法上`TagNameStringToTagCollectionResolver`接受类型参数。`UserProfileEditorViewModel``ResolveCore`

显示的错误消息表明映射中的某处在需要提供 type 的值时`string`在其方法签名中提供了 type 的值`UserProfileEditorViewModel`。

考虑到措辞，这有点令人困惑，但这就是我解决问题的方法。

```
protected override IEnumerable<Tag> ResolveCore(UserProfileEditorViewModel source)
        {
            return _getTagsByNamesQuery.Invoke(source.Tags.Split(','));
        } 
```

# android - 如何在 Android 上将第三方库 (jar) 链接到 systerserver.java (services.jar)？

> ID：11153064
> 
> 赞同：0
> 
> 时间：2012-06-22T08:56:32.280
> 
> 标签：android, jar, android-service

现在我已经构建了一个名为 telephony_DA 的第三方 jar。而且我已经可以在应用程序级别使用这个 telephony_DA 库。（修改 AndroidManifest.xml 并将权限添加到 /etc/permissions）

我的问题是我在
“com.android.server”包中编写了一个名为 TelephonyRegistry_DA.java 的新服务，并使用了 telephony_DA 库中的类。注意到 Android.mk 中的 telephony_DA 库后，我可以成功构建服务库。但是在运行时它出现了崩溃，原因是

```
"java.lang.NoClassDefFoundError: com.android.server.TelephonyRegistry_DA" 
```

我试图找出问题所在，然后我发现了一些东西。一旦我从 TelephonyRegistry_DA.java 中的 telephony_DA 库中删除了类，那么在运行时从 TelephonyRegistry_DA.java 创建和添加服务就没有问题了。似乎 systemserver 不知道与 telephony_DA 库的链接。

那么如何将第三方 jar 添加到 systemserver.java 中呢？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T01:59:14.943

在应用程序级别，您可以从 manifest.xml 中 inidcat 3rd 方库。但是在来自系统服务器的服务中，您应该将第 3 方库添加到默认链接路径中。所以请修改（例如：telephony_DA.jar）init.rc 如下。

导出 BOOTCLASSPATH /system/framework/core.jar:/system/framework/core-junit.jar:/system/framework/bouncycastle.jar:/system/framework/ext.jar:/system/framework/framework.jar:/ system/framework/android.policy.jar:/system/framework/services.jar:/system/framework/apache-xml.jar:/system/framework/filterfw.jar:/system/framework/telephony_DA.jar

# typo3 - TYPO3/TemplaVoila：添加新模板对象时，“字段列表”中的未知列“belayout”

> ID：11153065
> 
> 赞同：0
> 
> 时间：2012-06-22T08:56:35.137
> 
> 标签：typo3

我们正在尝试[实现 Typo3 网站的移动版本](http://www.dmitry-dulepov.com/2009/04/creating-mobile-version-of-web-site.html)，但是每当我添加一个新的模板对象并在“使其成为子模板”中选择某些内容时，我都会收到此错误：

![错字3错误](../Images/c0b8d88c7f229b2f41055d4102f548d2.png)

我对typo3不是很好，所以如果有人能指出我正确的方向，那就太好了。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T09:47:51.933

转到`Install Tool`> `Database Analyser`>`COMPARE`并标记复选框以添加缺少的字段和表格（您不需要删除建议的内容）

根据需要重复操作，如果某些字段不能通过 COMPARE 添加，则需要通过 phpMyAdmin 手动添加。在这种情况下，您很可能需要解决一些冲突。

接下来转到扩展管理器，找到`TemplaVoila`ext 并搜索`Update`按钮，以确保配置正确保存到文件中。

# sugarcrm - 升级后 SugarCRM CE smarty 错误

> ID：11153069
> 
> 赞同：1
> 
> 时间：2012-06-22T08:57:01.110
> 
> 标签：sugarcrm

我最近将我们的 SugarCRM CE 表格 5.x 升级到了 6.2.6。我有一些上坡的经历，但除了一个问题，我克服了一切。

以下错误出现在“联系人”、“机会”和其他类似页面的“电子邮件地址”区域。

> 警告：Smarty 错误：无法读取资源：第 1095 行 /home/campusre/public_html/sugar/include/Smarty/Smarty.class.php 中的“include/SugarFields/Fields/Base/detailViewFunction.tpl”

我在 SugarCRM 论坛上进行了搜索，我发现只有一个类似的帖子是旧的并且没有回答。我还联系了我们的托管公司以检查此问题是否与文件或文件夹权限有关，但他们确认在这种情况下不是问题。

我是一名开发人员，但之前没有做过任何 SugarCRM 和 Smarty 开发。我正在自己调查代码，但到目前为止还没有成功。

任何建议将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T15:21:46.327

> 无法读取资源：include/SugarFields/Fields/Base/detailViewFunction.tpl

这通常意味着在此文件上设置了不正确的权限或该文件不存在。但是，在这种情况下，它看起来像是一个外壳问题。该文件是实际的骆驼案例并命名为 DetailViewFunction.tpl。看起来您遇到了区分大小写的问题。我最初的猜测是，这是由于 5.x 中的旧模块或代码段所致。

# ghostscript - 将 A4 PDF 调整为 SRA4 并将内容居中

> ID：11153072
> 
> 赞同：2
> 
> 时间：2012-06-22T08:57:09.800
> 
> 标签：ghostscript, postscript

我希望能够将 A4 PDF 调整为稍大的 SRA4 格式，供印刷专业人士使用。内容不应调整大小，而只能居中。换句话说，我想为我的 A4 文档添加边距。

我通过这个 Ghostscript (9.05) 调用或多或少地做到了这一点：

```
gs -dPDFSETTINGS=/default -dBATCH -dNOPAUSE -q -sDEVICE=pdfwrite 
-sOutputFile=out.pdf -dDEVICEWIDTHPOINTS=637 -dDEVICEHEIGHTPOINTS=907 
-dFIXEDMEDIA in.pdf 
```

问题是A4内容不在SRA4页面居中，而是放在左下角。

知道如何使内容居中吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T13:00:16.713

我在[这里](https://stackoverflow.com/questions/3447720/how-can-i-shift-page-images-in-pdf-files-more-to-the-left-or-to-the-right "这里")找到了一个解决方案，使用 -c "<> setpagedevice"，如下所示：

```
gs -dPDFSETTINGS=/default -dBATCH -dNOPAUSE -q -sDEVICE=pdfwrite 
-sOutputFile=out.pdf -dDEVICEWIDTHPOINTS=637 -dDEVICEHEIGHTPOINTS=907 
-dFIXEDMEDIA -c "<</PageOffset [21 32]>> setpagedevice" -f in.pdf 
```

内容完全集中在 SRA4 文档中。

# vba - 如何在 VBA 中将记录集读取为字符串

> ID：11153073
> 
> 赞同：4
> 
> 时间：2012-06-22T08:57:11.570
> 
> 标签：vba, excel, recordset

我有一些代码可以从数据库中读取记录。当我阅读时，记录集变量将表值修改为自己的格式。例如：

在数据库中

> 时间值是 12345 （不是日期和时间），但是当记录集读取它时，它来自例如：23-06-2012 10:15:23

我刚刚发现记录集本身在完成后以自己的格式存储值。

`Set rs = CmdSqlData.Execute()`

那么有没有办法将记录集定义为`String`？

这是代码。

```
Dim rs As ADODB.RecordSet
Set rs = CmdSqlData.Execute()
Do While (rs.EOF = FALSE And rs.BOF = FALSE)
  p = rs.GetRows(1)
  cell(1,1) = p(0,0)
Loop 
```

谁能告诉我如何将数据读取为字符串（因为它在数据库中），这样格式就不会发生变化。

注意：由于其他要求，我无法转换 Excel 单元格格式，但我想从表中读取所有内容

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T09:46:11.627

如果你写

```
CStr(p(0,0)) 
```

对于单元格，Excel 将转换为适合内容的类型，因此如果 p(0,0) 是数字，则单元格将为数字。

但是，如果你写

```
ActiveSheet.Cells(1, 1) = "'" & p(0, 0) 
```

单元格 A1 将包含 '2 以查看，但可以作为字符串进行操作。这是 Excel 早期遗留下来的，在哪里输入一个字符串，你必须在它前面加上一个单引号。

```
A1
2   
=A1=2   FALSE
=A1="2" TRUE 
```

# java - 使用连接表作为 JPA 的参数

> ID：11153076
> 
> 赞同：0
> 
> 时间：2012-06-22T08:57:22.523
> 
> 标签：java, orm, jpa-2.0, jpql, jointable

在以下来自数据库的实体类中，如何编写查询以使用集合 productsCollection2 作为参数从表中选择并检索 productsCollection3。？？？我可以使用 productCollection2 并使用 IN 子句将列表传递给它进行选择。

```
@Table(name = "Products")
public class Products implements Serializable {
    private static final long serialVersionUID = 1L;
    @Id
    @Basic(optional = false)
    @Column(name = "SKU")
    private String sku;
    @Basic(optional = false)
    @Column(name = "ProductName")
    private String productName;

    private boolean allowPreOrder;
    @ManyToMany(mappedBy = "productsCollection")
    private Collection<Categories> categoriesCollection;
    @JoinTable(name = "Products_CrossSell", joinColumns = {
        @JoinColumn(name = "SKU", referencedColumnName = "SKU")}, inverseJoinColumns = {
        @JoinColumn(name = "CrossSKU", referencedColumnName = "SKU")})
    @ManyToMany
    private Collection<Products> productsCollection;
    @ManyToMany(mappedBy = "productsCollection")
    private Collection<Products> productsCollection1;
    @JoinTable(name = "Products_Related", joinColumns = {
        @JoinColumn(name = "SKU", referencedColumnName = "SKU")}, inverseJoinColumns = {
        @JoinColumn(name = "RelatedSKU", referencedColumnName = "SKU")})
    @ManyToMany
    private Collection<Products> productsCollection2;
    @ManyToMany(mappedBy = "productsCollection2")
    private Collection<Products> productsCollection3; 
```

# servlets - 多部分请求重命名文件策略

> ID：11153080
> 
> 赞同：1
> 
> 时间：2012-06-22T08:57:31.233
> 
> 标签：servlets, request, multipart

我试图避免在我上传的文件中出现一些命名冲突（我使用了 com.oreilly.servlet.MultipartRequest ）。

此时我的构造函数如下所示：

```
MultipartRequest multi = new MultipartRequest(request, uploadPath); 
```

我想用 FileRenamePolicy 实现构造函数，以便使用从表单中获取的值重命名我的文件（类似于 request.getParameterValue("title");

我想我应该使用下面的构造函数？但我不知道如何设置“策略”参数

```
 MultipartRequest(javax.servlet.http.HttpServletRequest request,
                  java.lang.String saveDirectory, 
                  int maxPostSize, 
                  java.lang.String encoding, 
                  FileRenamePolicy policy) 
```

你有什么建议吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T10:17:56.450

您应该实现一个自定义 `FileRenamePolicy`，它可以为您`File`附加`title`发送的请求。

**这是您要查找的内容：**

```
 private static class MyTitleRenamePolicy extends FileRenamePolicy {
      java.io.File rename(java.io.File f) {
       return new File(f.getParentFile(), 
            rename.getName() + "_"+ request.getParameter("title"));
      }
  }

 new MultipartRequest(request, saveDirectory, maxPostSize, encoding, 
                        new MyTitleRenamePolicy(request)); 
```

# javascript - IE8 中的 createElement 内部 HTML 错误

> ID：11153083
> 
> 赞同：0
> 
> 时间：2012-06-22T08:57:45.697
> 
> 标签：javascript, innerhtml, createelement

以下代码适用于除 IE8 及以下的所有浏览器。

```
 // Create Paragraph
            var para1 = document.createElement('p');
            var htmlstring = '<div style="width: 300px; font-family: "Lucida Grande", Helvetica, Arial, sans-serif; font-size: 6pt; color: #FF0000;">'
            htmlstring = htmlstring + '<table style="width: 300px; font-family: "Lucida Grande", Helvetica, Arial, sans-serif; font-size: 6pt; color: #FF0000;">'
            htmlstring = htmlstring + '<tr><td style="width: 100px;"><strong>ID</strong></td><td style="width: 200px;">' + ID + '</td></tr>';
            htmlstring = htmlstring + '<tr><td><strong>Date/Time</strong></td><td>' + DateStamp + '</td></tr>';
            htmlstring = htmlstring + '<tr><td><strong>Location</strong></td><td>' + Location + '</td></tr>';
            htmlstring = htmlstring + '<tr><td><strong>Event</strong></td><td>' + Event + '</td></tr>';
            htmlstring = htmlstring + '<tr><td><strong>Speed</strong></td><td>' + Speed + '</td></tr></table></div>';
            para1.innerHTML = htmlstring;  << THIS IS GENERATING AN UNKNOWN ERROR 
```

任何人都有解决方案，甚至知道为什么会这样？

谢谢，吉姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T09:03:44.580

在 IE8 及以下版本中存在很多“问题” `innerHtml`，例如查看此[文档。getElementById().innerHtml + IE7 可能会导致问题](http://www.jamischarles.com/blog/documentgetelementbyidinnerhtml-ie7-can-cause-problems/)。

最安全的解决方案可能是设置`innerHtml`一个 div 而不是一个段落。

# php - mysql_connect：访问被拒绝

> ID：11153088
> 
> 赞同：1
> 
> 时间：2012-06-22T08:57:55.903
> 
> 标签：php, mysql

我找到了商店定位器的谷歌教程： [https ://developers.google.com/maps/articles/phpsqlsearch_v3#findnearsql](https://developers.google.com/maps/articles/phpsqlsearch_v3#findnearsql)

MySQL 表已完成，它可以在我的服务器上运行。我可以在 phpmyadmin 中写地址并正确执行

```
SELECT id, ( 3959 * acos( cos( radians(37) ) * cos( radians( lat ) ) * cos( radians( lng ) - radians(-122) ) + sin( radians(37) ) * sin( radians( lat ) ) ) ) AS distance FROM markers HAVING distance < 25 ORDER BY distance LIMIT 0 , 20; 
```

但是在教程点“使用 PHP 输出 XML”我不能继续。

我已经创建了文件“phpsqlsearch_dbinfo.php”，将我的数据库详细信息放入并上传。（“”中的所有内容）

```
<? $username="username"; $password="password"; $database="username-databaseName"; ?> 
```

然后我创建了“phpsqlsearch_genxml.php”，将教程中的代码放入并上传。我需要改变哪些部分？

当我在浏览器中启动文件时，会出现以下消息：

警告：mysql_connect() [function.mysql-connect]: Access denied for user: 'dbo420324620@localhost' (使用密码: YES) in /homepages/6/d11799920/htdocs/markisen/mx/2/phpsqlsearch_genxml.php 在线15
未连接：拒绝用户访问：'dbo420324620@localhost'（使用密码：是）

我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T03:02:44.353

我在使用 1and1.com 托管服务器时遇到了同样的问题。什么都试过了。

localhost:/tmp/mysql5.sock 和所有组合都不起作用。

尝试了许多其他事情，然后发现了解决方案。

转到 PhpMyAdmin 控制面板。选择您的数据库并单击 phpMyAdmin

然后您将看到您的数据库表，在顶部您将看到您的数据库名称 dbXXXXXXXX 前面有一些信息，例如 infoxyz1234:5678 这是托管服务器和服务器正在使用的端口。

使用它而不是 localhost:/tmp/mysql5.sock 和我的工作就像一个魅力。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T11:18:35.967

您的用户名、密码或数据库名称有误。

错误消息故意含糊不清，以免未经授权的系统破解者无法找到他们需要更改的内容；虽然我猜你知道你的用户名和密码。

您需要在 PHP 代码中使用的数据库名称*可能*与 phpMyAdmin 中显示的名称不完全相同。询问您的托管公司您应该在包含文件中使用什么。

# jquery-ui - 检查切换状态？

> ID：11153098
> 
> 赞同：1
> 
> 时间：2012-06-22T08:58:42.483
> 
> 标签：jquery-ui, jquery-selectors, jquery

我有以下代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
    <head> 
        <title></title> 
        <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>

        <script type="text/javascript" language="javascript"> 
            $(document).ready(function() {
                $("#widget_list").hide();

                $("#click_me").click(function() {
                    $(this).parents( "#clipboard" ).find( "#widget_list" ).toggle();
                });
            });
        </script>
    </head> 
    <body> 
       <div id="clipboard">

           <div href="#" id="click_me" style="border:solid 1px black;text-align:center;cursor:pointer;">
                \/
           </div>

           <div id="widget_list" style="border:solid 1px black;text-align:center;">
                some stuff here
           </div>

       </div>

       some other stuff here

    </body> 
</html> 
```

[jsFiddle 演示](http://jsfiddle.net/QFTsb/)。

而不是将文本硬编码`some stuff here`为`#widget_list`. 如何将该文本添加到`#widget_list`，当它的切换状态可见时，以及如何从`#widget_list`它的切换状态隐藏时删除该文本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T09:02:18.070

**演示** [http://jsfiddle.net/QFTsb/1/](http://jsfiddle.net/QFTsb/1/) **或** [http://jsfiddle.net/QFTsb/3/](http://jsfiddle.net/QFTsb/3/)

使用`.is(":visible")`：[http ://api.jquery.com/visible-selector/](http://api.jquery.com/visible-selector/)

您可以看到您将在演示中收到警报，当它可见或现在处于切换状态时

这将有助于

**代码**

```
$("#widget_list").hide();

$("#click_me").click(function() {
    $(this).parents("#clipboard").find("#widget_list").toggle(function() { alert($(this).is(':visible'));});
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T09:03:43.903

[工作演示](http://jsfiddle.net/epinapala/QFTsb/2/)

隐藏 Div 时，只需在此处填充一些内容

```
$("#widget_list").hide(function(){ $(this).html('some stuff here')});

$("#click_me").click(function() {
    $(this).parents( "#clipboard" ).find( "#widget_list" ).toggle();
});​ 
```

# javascript - 是否有一个 JavaScript / Jquery 组件可以像在 Eclipse 中一样创建一个工作区？

> ID：11153099
> 
> 赞同：1
> 
> 时间：2012-06-22T08:58:43.870
> 
> 标签：javascript, jquery, jquery-ui

我目前正在寻找创建类似于 Eclipse 工作区的“工作区”体验的 Jquery（或本机 JavaScript）组件。我尝试了 JQuery UI 布局，但这不符合我的需要。搜索网络没有获得任何合适的结果。

*   我想将页面分成框架（区域），可以是：
    *   打开/关闭
    *   隐藏/显示
    *   固定或未固定（固定或浮动）
    *   （在最好的情况下，可以通过将框架拖动到其他位置来重新组织框架）
*   帧应该能够包含子帧
*   还有一个重要特性（在 jquery ui 布局中不可用）：应该可以动态添加单帧。

有谁知道一个好的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T09:46:44.087

[http://www.webresourcesdepot.com/6-flexible-jquery-plugins-to-control-webpage-layouts-easily/](http://www.webresourcesdepot.com/6-flexible-jquery-plugins-to-control-webpage-layouts-easily/) http://www.jquery.wisdomplug.com/jquery-plugins/11-best-jquery-布局插件/ [http://archive.plugins.jquery.com/project/layoutmanager](http://archive.plugins.jquery.com/project/layoutmanager)

我想这些会对你有很大帮助

# regex - TCL、正则表达式函数和 if 语句

> ID：11153101
> 
> 赞同：0
> 
> 时间：2012-06-22T08:59:13.527
> 
> 标签：regex, if-statement, tcl, activestate

我有以下一段 TCL 代码：

```
 #wrong format:
    set in_val "12 0 2 0 0 0 1 0 3 698"
    #correct format:
    #set in_val "12 0 1 0 0 0 1 0 3 698"
    set val_ok [regexp {(\d+)\s([01]\s)([01]\s)([01]\s)([01]\s)([01]\s)([01]\s)([01]\s)(\d+)\s(\d+).*} $in_val Var1 Var2 Var3 Var4 Var5 Var6 Var7 Var8 Var9 Var10 Var11]
    if {$val_ok==1} {
       # correct format
       puts "Correct format, continuing..."
       puts "$Var2 $Var3 $Var4 $Var5 $Var6 $Var7 $Var8 $Var9 $Var10 $Var11"
    } else {
       # wrong format
       puts "Wrong format, stimulus [$in_val]"
    } 
```

我想检查用 regexp 函数描述的格式是否正确。当 in_val var 具有正确的格式时，一切都很好，if 块被执行。但是，当格式错误时，我没有输入 else 块，而是收到以下错误：

```
invalid command name "12 0 2 0 0 0 1 0 3 698"
    while executing
"$in_val"
    invoked from within
"if {$val_ok==1} {
# correct format
puts "Correct format, continuing..."
puts "$Var2 $Var3 $Var4 $Var5 $Var6 $Var7 $Var8 $Var9 $Var10 $Var11"

} else {..."
    (file "xxx.tcl" line 3) 
```

我正在为 Windows 使用 ActiveState ActiveTcl 8.5.11.1。关于当 val_ok=0 并且正则表达式不匹配时为什么会出现错误的任何想法？谢谢！

JB

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T09:04:24.680

这是因为您正在尝试执行`$in_val`：

```
puts "Wrong format, stimulus [$in_val]"
                                 ^
                                 |
               you are trying to execute $in_val here 
```

看到方括号了吗？删除它们可以防止错误：

```
puts "Wrong format, stimulus : $in_val" 
```

如果您仍想打印方括号，则可以使用反斜杠转义它们：

```
puts "Wrong format, stimulus \[$in_val\]" 
```

# javascript - 蛇脚本没有将值传递给变量

> ID：11153102
> 
> 赞同：0
> 
> 时间：2012-06-22T08:59:15.350
> 
> 标签：javascript, jquery

所以这是我的蛇脚本 -

[http://jsfiddle.net/6bKHc/24/](http://jsfiddle.net/6bKHc/24/)

我开始创建一个蛇游戏，但基本上 move(top), move(bottom) ec 不起作用。任何想法为什么？我知道我不能像这样将元素传递给变量，所以也许你可以告诉我如何正确地做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T09:20:21.097

好的，清除语法并查看错误，这应该可以帮助您入门

```
$(document).keydown(function(event){
    var move, inter;
    inter = setInterval(move = function() {
        var dir = $(".snake").data('dir');
        var snake = $('.snake');

        if(dir == 'top') {
            snake.stop().animate({"top": "+=5px"});
        }
        if(dir == 'bottom') {
            snake.stop().animate({"top": "-=5px"});
        }
        if(dir == 'left') {
            snake.stop().animate({"left": "+=5px"});
        }
        if(dir == 'right') {
            snake.stop().animate({"top": "-=5px"});
        }
    }, 500);
    if(event.which == 40) {
        $(".snake").data('dir','top');
    } else if(event.which == 39) {
        $(".snake").data('dir','left');           
    } else if(event.which == 37) {
        $(".snake").data('dir','right');        
    } else if(event.which == 38) {
       $(".snake").data('dir','bottom');    
    }; });​ 
```

[小提琴](http://jsfiddle.net/6bKHc/36/)

几个明显的补充：

*   边界检查
*   动画的流畅度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T09:02:10.283

为了让它工作，你必须像下面这样修改你的代码：

```
$(document).keydown(function() {
    var inter;
    return function(event) {
        var move, prevDirection;
        clearInterval(inter);
        inter = setInterval(move = function(direction) {
            var value, prop;
            switch (direction || prevDirection) {
            case "top":
                prop = "top";
                value = -5;
                break;
            case "bottom":
                prop = "top";
                value = 5;
                break;
            case "left":
                prop = "left";
                value = -5;
                break;
            case "right":
                prop = "left";
                value = 5;
                break;
            }
            if (direction) prevDirection = direction;
            $(".snake").css(prop, $(".snake").position()[prop] + value);

        }, 500);
        if (event.which == 40) {
            move('bottom');
        } else if (event.which == 39) {
            move('right');
        } else if (event.which == 37) {
            move('left');
        } else if (event.which == 38) {
            move('top')
        };
    }
}());​
  ​ 
```

[http://jsfiddle.net/6bKHc/42/](http://jsfiddle.net/6bKHc/42/)

# asp.net-mvc - _ViewStart.cshtml 中定义的访问函数

> ID：11153104
> 
> 赞同：3
> 
> 时间：2012-06-22T08:59:28.517
> 
> 标签：asp.net-mvc, layout, view, razor

在 ASP.MVC 应用程序中，我在**_ViewStart.cshtml**中定义了一个函数，如下所示：

```
@functions
{
    public void Foo()
    {
      ....
    }
} 
```

当我尝试在我的视图中使用这个函数时，我得到一个异常说： *名称'Foo'在当前上下文中不存在* 我认为我在 _ViewStart.cshtml 中定义的所有内容都可以被我定义的所有视图访问它作为布局。

我在这里遗漏了一些东西...谢谢您的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T09:03:53.990

您可以将可重用函数放置在特殊`App_Code`文件夹的 Razor 视图中。

例如在里面`~/App_Code/Foo.cshtml`你可以声明一个`Bar`函数：

```
@functions {
    public static void Bar() {

    }
} 
```

可以从任何 Razor 视图访问：

```
@{Foo.Bar();} 
```

另请注意，该函数必须声明为**static**。

# css - 如何水平对齐文本框

> ID：11153105
> 
> 赞同：2
> 
> 时间：2012-06-22T08:59:36.597
> 
> 标签：css, html

我想将两个文本框与其显示名称对齐，并排在一行中我正在使用 dl、dt 和 dd。我在水平对齐它们时遇到了问题。任何人都可以建议我对这种对齐方式有一些想法吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T09:13:29.360

删除 .tm dt 上的“clear:left”，它们将位于同一行

像这样：http: [//jsfiddle.net/kude9/1/](http://jsfiddle.net/kude9/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T09:34:27.997

您不需要在 .tm dt, dd 类中定义float **:** **left**因为您已经定义了**display:inline**我希望您可能熟悉**块和内联元素**，因此内联元素将以水平形式出现并自动设置在一排...

 ********CSS**

```
 .tm dt, dd
        {
            color:Black;
            margin: 0;
            padding: 0;
            height: 30px;
            line-height: 30px;
            display:inline;
            border:1px solid red;               
        }   
       .tm dt
        {
            padding: 0 5px 0 15px;
            text-align: right;
            opacity: 0.6;
            width: 100px;       
        } 
```

**HTML**

```
<div class="tm">
  </dl>             
  <dt>Course </dt>              
  <dd>hello</dd>  

 <dt> Spl</dt>                
     <dd>hello</dd></dl></div> 
```

看演示：- [http://jsfiddle.net/kude9/3/](http://jsfiddle.net/kude9/3/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T09:07:38.600

在不知道您的确切情况的情况下，我会设置

```
float:left; 
```

到 dd 和 dt。

[http://jsfiddle.net/WFzfR/](http://jsfiddle.net/WFzfR/)

编辑：在你的小提琴中，只需擦除 clear: left; 从 .tm dt

[http://jsfiddle.net/3hqws/2/](http://jsfiddle.net/3hqws/2/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T09:20:44.103

`display:inline`通常是我的第一次尝试。如果这不起作用或不是理想的解决方案，我经常`float:left`像 Alvaro 所说的那样使用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-22T09:12:05.827

如果您正在寻找在一行上对齐两个文本框。下面是关于 jsfiddle 的演示。我只能从你的问题中看出这一点

[链接到 Jsfiddle](http://jsfiddle.net/rutwik/RwYMG/)******

# sql - 在 sql 中使用聚合函数

> ID：11153106
> 
> 赞同：1
> 
> 时间：2012-06-22T08:59:38.163
> 
> 标签：sql, aggregates

我可以在不使用来自一个查询的视图的情况下执行以下操作。

```
!--CREATE THE VIEW

CREATE OR REPLACE VIEW BDGTMGR
AS
  SELECT MANAGERID,SUM(BUDGET) AS BDGT FROM 
  N_DEPT GROUP BY MANAGERID ;

!-- THEN GET RESULT FROM THE VIEW

SELECT MANAGERID FROM BDGTMGR WHERE BDGT = (select MAX(BDGT) FROM BDGTMGR); 
```

这里 N_DEPT 可能是原始表，其中包含名为 DID、MANAGERID 和 BUDGET 的列。

我想获得控制最大预算的 MANAGERID。一名经理可以控制多个部门。DID 是该表的主键。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T09:10:58.753

```
select   MANAGERID,SUM(BDGT) 
from     N_DEPT 
group by MANAGERID 
order by SUM(BDGT) desc limit 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T09:06:14.140

你可以这样做：

```
SELECT aux.MANAGERID
FROM
  (SELECT MANAGERID,
         SUM(BUDGET) AS BDGT
   FROM N_DEPT
   GROUP BY MANAGERID) aux
INNER JOIN BDGTMGR b ON b.MANAGERID = aux.MANAGERID
WHERE b.BDGT = (select MAX(BDGT) FROM BDGTMGR); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T09:08:07.630

以下查询将起作用（根据您的 SQL 风格进行修改）：

```
SELECT TOP 1 MANAGERID FROM N_DEPT GROUP BY MANAGERID ORDER BY SUM(BUDGET) DESC 
```

# actionscript-3 - 在 as3 中移动带有另一个影片剪辑的影片剪辑

> ID：11153107
> 
> 赞同：0
> 
> 时间：2012-06-22T08:59:42.770
> 
> 标签：actionscript-3, flash, apache-flex, air, flex4.5

我们如何才能将一个movieclip 朝另一个movieclip 移动的方向移动？我有一个影片剪辑，即猎物，它随着加速度计的更新而移动。我希望跟随者影片剪辑像猎物一样赶上那个影片剪辑。猎物随着加速度计的变化而移动。我希望跟随者影片剪辑跟随猎物。这可以做到吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T01:15:22.967

这是让一个剪辑追逐另一个剪辑的一种非常简单的方法。将其复制粘贴到一个新的 fla 文件中并编译它以查看结果。

```
import flash.display.MovieClip;

var mcOne : MovieClip = new MovieClip();
mcOne.graphics.beginFill( 0x000000 );
mcOne.graphics.drawCircle( 0, 0, 10 );
mcOne.speedX = 1.9;
mcOne.speedY = 1.9;
addChild( mcOne );

var mcTwo : MovieClip = new MovieClip();
mcTwo.graphics.beginFill( 0xFF0000 );
mcTwo.graphics.drawCircle( 0, 0, 10 );
mcTwo.speedX = 2;
mcTwo.speedY = 2;
addChild( mcTwo );

moveClipsToRandomPosition( mcOne );
moveClipsToRandomPosition( mcTwo );

stage.addEventListener( Event.ENTER_FRAME, onStageEnterFrame );

function onStageEnterFrame( evt : Event ) : void
{
    moveMC( mcOne );
    chase( mcTwo, mcOne );
    checkBounds( mcOne );
}

function chase( chasingMC : MovieClip, chasedMC : MovieClip ) : void
{
    if( chasingMC.x < chasedMC.x )
    {
        if( chasingMC.x + chasingMC.speedX > chasedMC.x )
        {
            chasingMC.x = chasedMC.x;
        }
        else
        {
            chasingMC.x += chasingMC.speedX;
        }
    }
    else if( chasingMC.x > chasedMC.x )
    {
        if( chasingMC.x - chasingMC.speedX < chasedMC.x )
        {
            chasingMC.x = chasedMC.x;
        }
        else
        {
            chasingMC.x -= chasingMC.speedX;
        }
    }

    if( chasingMC.y < chasedMC.y )
    {
        if( chasingMC.y + chasingMC.speedY > chasedMC.y )
        {
            chasingMC.y = chasedMC.y;
        }
        else
        {
            chasingMC.y += chasingMC.speedY;
        }
    }
    else if( chasingMC.y > chasedMC.y )
    {
        if( chasingMC.y - chasingMC.speedY < chasedMC.y )
        {
            chasingMC.y = chasedMC.y;
        }
        else
        {
            chasingMC.y -= chasingMC.speedY;
        }
    }

    if( chasingMC.y == chasedMC.y && chasingMC.x == chasedMC.x )
    {
        trace( "ChasingMC caught chasedMC" );
        moveClipsToRandomPosition( mcOne );
        moveClipsToRandomPosition( mcTwo );
    }
}

function moveClipsToRandomPosition( mc : MovieClip ) : void
{
    mc.x = ( Math.random() * ( stage.stageWidth - 20 ) ) + 10;
    mc.y = ( Math.random() * ( stage.stageHeight - 20 ) ) + 10;
}

function moveMC( mc : MovieClip ) : void
{
    mc.x += mc.speedX;
    mc.y += mc.speedY;
}

function checkBounds( mc : MovieClip ) : void
{
    if( ( mc.x + mc.width / 2 ) >= stage.stageWidth )
    {
        mc.speedX *= -1;
    }
    else if( ( mc.x - mc.width / 2 ) <= 0 )
    {
        mc.speedX *= -1;
    }

    if( ( mc.y + mc.height / 2 ) >= stage.stageHeight )
    {
        mc.speedY *= -1;
    }
    else if( ( mc.y - mc.height / 2 ) <= 0 )
    {
        mc.speedY *= -1;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T09:53:42.447

你可以让movieclip #2像这样跟随第一个：

```
//this would usually be in an ENTER_FRAME event since there's no tweening going on here
//mc1 is your first movieclip, mc2 the second
mc1.x += 20; //this is the first one that needs to be followed
mc2.x = (mc1.x - 40); //this is the follower; it's always 40px horizontally behind mc1 
```

此外，您可以使用“容器”精灵。这是您添加其他 Sprite 或 MovieClip 的空精灵。它是这样工作的：

```
myContainerVar.addChild(mc1); //myContainerVar is a(n empty) Sprite.
myContainerVar.addChild(mc2);
myContainerVar.x += 20; //this moves both movieclips.
//make sure you do this INSTEAD of the normal addChild(m1);! 
```

我在这里做的是添加`mc1`和`mc2`进入`myContainerVar`. 诸如移动`myContainerVar`变量之类的更改也将自动应用于`mc1`和`mc2`。

一个小旁注：如果你再深入一点，你应该知道，在统计上，改变 myContainerVar 的位置时，mc1 和 mc2 的位置不会改变。谨防 ;）

# java - Spring Batch 多个作业中的相同步骤名称？

> ID：11153108
> 
> 赞同：4
> 
> 时间：2012-06-22T08:59:45.793
> 
> 标签：java, spring, spring-batch, jobs

我对使用 spring-batch 2.1.8.RELEASE 的 Spring Batch 命名约定感到非常困惑。

**主要问题：**

2 个不同的作业，但内部具有相同的步骤（将获得不同的属性），其名称不是唯一的。如果我尝试运行其中一项作业，例如 job1。然后它获取 prop2 的值“file2”，即使它是为 job2 定义的。（*只是一个抽象示例，没有太多关于stepamount，听众等的细节。*）无法弄清楚该过程的任何规律或原因。

```
<batch:job id="job1" parent="parentJob">
    <batch:step id="copyFile">
        <batch:tasklet>
            <bean class="xxx.xyz.classXXX"
                scope="step">
                <property name="prop1"
                    value="file1" />
            </bean>
        </batch:tasklet>
    </batch:step>
</batch> 
```

每个作业都在自己的文件中定义。

```
<batch:job id="job2" parent="parentJob">
    <batch:step id="copyFile">
        <batch:tasklet>
            <bean class="xxx.xyz.classXXX"
                scope="step">
                <property name="prop2"
                    value="file2" />
            </bean>
        </batch:tasklet>
    </batch:step>
</batch> 
```

我们得到了大约 80 个工作 - 每个工作都将 copyFile 作为第一步。但是每个工作中间也有步骤，应该平等命名。有没有可能避免那些注入混乱/失败？除了命名步骤，如“copyFile1”、“copyFile2”等。

（名称和属性不过是烟雾和镜子！）

您需要任何进一步的信息吗？希望我的解释不会太糟糕。先感谢您！

欢呼最大。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-13T13:41:43.200

显然步骤 id 在春季批次中是全局的（今天检查过）。它们在上下文创建时被加载到地图中，并且由于它们具有相同的 ID，因此读取的步骤与上次获胜的步骤相同。

此功能的解决方法：使用不同的步骤 id，例如使用等于 batch:job id 的前缀，如下所示：

```
<batch:job id="job1" parent="parentJob">
  <batch:step id="job1_copyFile">
    <batch:tasklet>
      <bean class="xxx.xyz.classXXX" scope="step">
        <property name="prop1" value="file1" />
      </bean>
    </batch:tasklet>
  </batch:step>
</batch>

<batch:job id="job2" parent="parentJob">
  <batch:step id="job2_copyFile">
    <batch:tasklet>
      <bean class="xxx.xyz.classXXX" scope="step">
        <property name="prop2" value="file2" />
      </bean>
    </batch:tasklet>
  </batch:step>
</batch> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T13:05:35.827

您有两个相互覆盖的匿名 bean，因为尽管它们具有相同的类，但它们没有设置 id 属性。

由于具有不同的参数不会区分您的 bean，因此它们会被覆盖。

只需将 id 属性放入您的 bean 即可解决您的问题。

```
 <bean id="file1" class="xxx.xyz.classXXX"
        scope="step">
        <property name="prop1"
            value="file1" />
    </bean> 
```

希望这会有所帮助...

# java - 无法更改黑莓中矢量元素的字体

> ID：11153110
> 
> 赞同：2
> 
> 时间：2012-06-22T08:59:53.787
> 
> 标签：java, blackberry, vector, fonts

我正在使用 Vector 在黑莓项目的表中添加元素。字体似乎没有以编程方式更改。我已经在不同屏幕的黑莓手机上对其进行了测试。在 BOLD & CURVE 中看起来不错，但在 9810 手电筒、9790 BOLD 等大屏幕手机中，它需要一些非常大的默认字体。即使我通过设置更改了手机的字体，它也会更改 LabelFields 和 TextFields 的字体，但应用 FontFamily 字体不会反映在 Vector 元素上。

我附上 9800 和 9810 的屏幕截图...在 9800 中看起来不错，在 9810 中看起来很大 ![在此处输入图像描述](../Images/bdc6f91111e8a4c2ad706f7c94f4e535.png) ![在此处输入图像描述](../Images/eb9b9eda4da30e2666798c9f1e2b4824.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T09:07:43.963

试试这个

```
for (int x = 0; x < vector.size(); x++) {
      FriendListObject b = (FriendListObject) vector.elementAt(x);
      name_ = b.getf_name().toString();
    }
TableRowManager row = new TableRowManager() {
            public void paint(Graphics g) {
                 g.setBackgroundColor(0xa2b8c3);
                g.fillRect(0, 0, getWidth(), getHeight());
                 g.setColor(0xe5e7e7);
                 g.clear();
                 super.paint(g);
            }
        };

LabelField name= new LabelField(name_+" :", DrawStyle.ELLIPSIS);
name.setFont(Font.getDefault().derive(Font.PLAIN));

 row.add(name); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T09:23:55.257

我也面临同样的情况，我为每个分辨率定制了字体系列。例如

```
if (Display.getWidth()==480 && Display.getHeight()==360) {
   _custHeadNews = new CustTextField(_newsHead,30,0x05235b,TextField.FOCUSABLE);
   _custMainNews = new CustTextField(_newsMain,25,0x666666, RichTextField.FOCUSABLE);
   _custMetadata = new CustTextField(_metaData,15,0x666666,TextField.FOCUSABLE);
}
else if (Display.getWidth()==320 && Display.getHeight()==240) {
   _custHeadNews = new CustTextField(_newsHead,25,0x05235b,TextField.FOCUSABLE);
   _custMainNews = new CustTextField(_newsMain,15,0x666666, RichTextField.FOCUSABLE);
   _custMetadata = new CustTextField(_metaData,10,0x666666,TextField.FOCUSABLE);
} 
```

不同分辨率的粗体字号。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T08:08:40.087

通过更改 RegionStyles 解决了这个问题。最初我们将 Font 参数设为 null。将其更改为 appFont1 而不是 null 后，应用字体停止覆盖并且现在可以正常工作。

```
 RegionStyles style = new RegionStyles(BorderFactory.createSimpleBorder(new XYEdges(5,0,0,0), Border.STYLE_TRANSPARENT), appFont1, null,null, RegionStyles.ALIGN_LEFT, RegionStyles.ALIGN_MIDDLE); 
```

# php - Yii 错误 400 尝试删除帖子时无法验证 CSRF 令牌

> ID：11153112
> 
> 赞同：14
> 
> 时间：2012-06-22T08:59:58.040
> 
> 标签：php, yii

当我试图删除一个帖子时，我收到了这个错误：

```
Yii Error 400 The CSRF token could not be verified 
```

我不知道究竟是什么导致了这种情况以及它可能与什么有关。这是我的删除操作：

```
 public function actionDelete($id) {

         if (Yii::app()->request->isPostRequest) {
                // we only allow deletion via POST request
                $this->loadModel($id)->delete();

                // if AJAX request (triggered by deletion via admin grid view), we should not redirect the browser
                if (!isset($_GET['ajax']))
                $this->redirect(isset($_POST['returnUrl']) ? $_POST['returnUrl'] : array('admin'));
        }
        else
              throw new CHttpException(400, 'Invalid request. Please do not repeat this request again.');
    }

    protected function afterDelete()
    {
        parent::afterDelete();
        Image::model()->deleteAll('name='.$this->id);
        Date::model()->deleteAll('tbl_show_id='.$this->id);
        Press::model()->deleteAll('tbl_show_id='.$this->id);
    } 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-08-01T13:38:48.743

我有同样的问题，但以下解决了它。希望能帮助到你。我添加了

```
'params'=> array('YII_CSRF_TOKEN' => Yii::app()->request->csrfToken) 
```

到以下代码：

```
<?php
    echo CHtml::linkButton('Delete',array(
        'submit'=>$this->createUrl('delete',array('id'=>$model->id)),
        'confirm'=>"Are you sure want to delete ".$item->product->name."from the shopping cart?",
        'params'=> array('YII_CSRF_TOKEN' => Yii::app()->request->csrfToken)));
?> 
```

谢谢。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-22T10:09:36.773

看来您已启用[CSRF 验证](http://www.yiiframework.com/doc/guide/1.1/en/topics.security#cross-site-request-forgery-prevention)。如果您想使用它，请阅读文档并确保在每个 POST 请求中发送 CSRF 令牌。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-23T23:01:58.460

CSRF 将不断给您此错误，因为您正在使用 URL (GET) 删除

为了使用 CSRF 验证，您应该使用生成 CSRF 令牌并在每个帖子中提交的有效表单发出请求。

查找：Yii CForm

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2018-08-21T13:25:28.580

即使您正确地遵循了 Yii CSRF 文档，您的错误也可能是由缓存系统引起的。在我的情况下，服务器缓存了登录页面，然后使用登录表单一遍又一遍地提供相同的令牌，从而在验证时返回 false。

# windows-phone-7 - 我可以通过点击 toast 通知来判断用户是否打开了我的应用程序吗？

> ID：11153113
> 
> 赞同：4
> 
> 时间：2012-06-22T09:00:01.213
> 
> 标签：windows-phone-7

无论如何要获得应用程序已打开的上下文？IE。用户是否按下了收到的 toast 通知或点击了应用程序磁贴？我的理由是我会向用户发送一个 toast 通知（例如，给你 1 条新消息！）。如果他们点击 toast 通知，我希望应用程序在类似收件箱的屏幕上打开，而不是在我的主屏幕上。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T10:39:57.597

`Toast`在or中添加一些参数`Tile` `Url`。例如，`/Views/MainPage.xaml?from=toast`这会告诉您用户点击 toast 而不是从菜单中启动您的应用程序。它被称为`Deep Links`

# javascript - 函数调用者无效元素

> ID：11153117
> 
> 赞同：0
> 
> 时间：2012-06-22T09:00:13.630
> 
> 标签：javascript, function, function-call

如果我有 ：

```
<div id="mydiv" onmouseover="myfunc()">
  <div id="mydiv1"></div>
  <div id="mydiv2"></div>
</div>

<script>
  function myfunc() {
    var evt = window.event || arguments.callee.caller.arguments[0];
    var em = evt.target || evt.srcElement;
    return em.id;
  }
</script> 
```

该函数由`mydiv`onmouseover 调用，但如果鼠标光标位于`mydiv1`函数上，则返回`mydiv1`.

**如何让它始终显示`mydiv`？**

*PS：我知道我可以使用类似的东西`myfunc(this)`，但我想从我的函数中找到调用者。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T09:10:43.417

就个人而言，我更喜欢使用 jQuery 来连接事件：

```
$('#mydiv').on('mouseover',function(){
    var id = $(this).attr('id');
    // ...
}); 
```

如果这应该应用于多个元素，那么请改用类选择器：

```
$('.hoverable').on('mouseover',function(){
    var id = $(this).attr('id');
    // ...
}); 
```

要同时处理未来的内容，请将事件处理程序附加到一个共同的祖先，然后在第二个参数中选择可悬停元素`on`：

```
$('body').on('mouseover','.hoverable',function(){
    var id = $(this).attr('id');
    // ...
}); 
```

[在此处查看未来内容的实际应用。](http://jsfiddle.net/sveinatle/XVbyf/5/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T09:04:49.160

您应该通过 JavaScript 附加事件处理程序。然后，您可以访问它直接绑定到其中的元素`this`。

```
<div id="mydiv">
  <div id="mydiv1"></div>
  <div id="mydiv2"></div>
</div>

<script>
  function myFunc() {
    return this.id;
  }

  var mydiv = document.getElementById('mydiv');
  mydiv.onmouseover = myFunc;
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T09:27:27.080

您可以使用 Jquery 轻松完成此操作。

```
$('#mydiv').hover(function(){
alert(this.id); 
```

});​​​​​​​</p>

检查这个：http: [//jsfiddle.net/shahvj27/6zE96/](http://jsfiddle.net/shahvj27/6zE96/)

# biztalk - 使用 MSBuild 扩展包在远程服务器上创建 BizTalk 应用程序失败

> ID：11153119
> 
> 赞同：0
> 
> 时间：2012-06-22T09:00:14.920
> 
> 标签：biztalk, msbuildextensionpack, biztalk-deployment

我有一个尝试创建 BizTalk 应用程序并将其部署到远程服务器的 msbuild 脚本。我使用以下任务：

```
 <MSBuild.ExtensionPack.BizTalk.BizTalkApplication TaskAction="Create" MachineName="$(BizTalkServer)" Applications="$(BizTalkApplicationName)" /> 
```

尝试在远程服务器上部署时，出现以下错误

> 错误：COMException：应用程序注册失败，因为应用程序已经存在。

但事实并非如此，该应用程序不存在。

在网上搜索结果如下链接，建议设置 MSDTC 属性：[http ://social.msdn.microsoft.com/Forums/sa/biztalkediandas2/thread/251250c1-3f95-4457-8fbc-0274c722c7b0](http://social.msdn.microsoft.com/Forums/sa/biztalkediandas2/thread/251250c1-3f95-4457-8fbc-0274c722c7b0)

但是 DTC 在本地和远程服务器上都是这样设置的：

![故障诊断代码配置](../Images/0fa57ebdeddb6be771184d341419d830.png)

还值得注意的是，我对远程 BizTalk 服务器运行了另外两个任务，以检查应用程序的存在以及 WCF-SQL 适配器的存在。这两个都成功了。

```
<MSBuild.ExtensionPack.BizTalk.BizTalkApplication TaskAction="CheckExists" MachineName="$(BizTalkServer)"  Application="$(BizTalkApplicationName)">
  <Output TaskParameter="Exists"
          PropertyName="ApplicationExists" />      
</MSBuild.ExtensionPack.BizTalk.BizTalkApplication>
<MSBuild.ExtensionPack.BizTalk.BizTalkAdaptor TaskAction="CheckExists" MachineName="$(BizTalkServer)" AdaptorName="WCF-SQL">
  <Output TaskParameter="Exists" PropertyName="AdaptorExists" />
</MSBuild.ExtensionPack.BizTalk.BizTalkAdaptor> 
```

**更新**：

我检查了事件日志。不知道为什么我一开始就没有想到这一点。我收到以下 3 个事件：

第一个事件，Level=Information，Source=Sql 服务器

> 正在尝试初始化 Microsoft 分布式事务协调器 (MS DTC)。这只是一条信息性消息。无需用户操作。

第二个事件，Level=Information，Source=Sql server

> 无法联系 Microsoft 分布式事务处理协调器 (MS DTC) 服务。如果您想要分布式事务功能，请启动此服务。

第三个事件，级别=错误，来源=BizTalk

> 无法与 SQL 实例上的 MessageBox BizTalkMsgBoxDb 通信。错误代码：0x8004d01c。可能的原因包括：
> 1) MessageBox 不可用。
> 2) 从这台机器到 MessageBox 的网络链接已断开。
> 3) 此本地机器或托管此 MessageBox 的机器上的 DTC 配置不正确。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T08:15:15.727

我发现虽然远程服务器上没有 BizTalk 应用程序，但我尝试部署到的那个名称，在本地服务器上有一个 BizTalk 应用程序，我尝试部署的那个，使用指定的名称。

这不应该阻止我将应用程序部署到远程服务器，但确实如此。

当我使用 MSBuild 扩展包 BizTalk 任务以及尝试使用 btstask.exe 创建远程应用程序时，都会出现此行为。

# templates - 我应该使用什么通用模板处理器？

> ID：11153120
> 
> 赞同：3
> 
> 时间：2012-06-22T09:00:18.620
> 
> 标签：templates, language-agnostic, emacs, programming-languages

这是一个潜在的危险问题，因为跨学科的问题和答案*会有*偏见，但无论如何我都会尝试一下。一切都好精神！

所以，我们开始吧。我正在为 Emacs 编写一个主要的编辑模式，它几乎不支持它。而我现在必须决定生成项目文件的方法。以下是未来任务的大纲：

*   模板必须代表项目目录树，而不仅仅是单个文件。

*   生成的文件具有各种格式，可能包括类似 SGML 的语言，但不限于这种类型。他们还必须生成类似 C 的源代码、eLisp 源代码和纯文本文件，例如 README。

*   模板必须根据用户启动的操作批量处理（如用户想要创建一个项目 - 必须在用户指定的目录中创建多个文件）。具有监督创建的能力可能是有益的，但这不如完全自动运行该过程的能力重要。

奖励功能：

*   模板语言已经有一个用户群（具有重用现有模板的潜力）。

*   模板可用于代码片段（包含空白，一旦用户在编辑文件时调用代码生成例程，就会以交互方式填充这些空白）。

*   显而易见的东西，例如跨平台性，通过图形界面和命令行都易于使用。

我做了一项研究，但我不会（还）分享我的结果，所以我不会对答案有偏见。回答这个问题的问题不是很难找到答案，而是很难从众多答案中选择一个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T07:43:45.443

我正在为您描述的用例开发一个基于 Mustache 的系统。模板语言本身是 Mustache 的一个非常简单的扩展，称为[Groome](http://cjerdonek.github.com/groome/ "新郎")。

[我还发布了一个名为Molt](http://cjerdonek.github.com/molt/ "蜕皮")的命令行工具，用于渲染 Groome 模板。我很想知道它是否可以满足您的所有需求。我仍在为该工具添加功能，但尚未宣布。谢谢。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T01:01:48.780

几年前我去解决一个类似的问题，我想使用 Emacs 从 UML 图 (cogre) 生成代码，并从项目规范生成 Makefile。我第一次尝试使用 Tempo，但是当我尝试让模板嵌套时，我遇到了问题。我也研究了骨架，但这也不完全符合计划。

我最终使用了谷歌模板，并且喜欢它的语法，并开发了 SRecode，只是从谷歌模板中借用了一些好的部分。SRecode 是专门为机器生成的代码编写的。模板插入的交互（又名 - 编写的节奏）不是 SRecode 中的第一类。然而，对于从数据结构生成代码，它非常健壮，并且具有很多特性，并且可以自动填充变量。它与您的主要模式密切合作，并允许许多嵌套模板，并控制嵌套字典值。有一个子系统将使用语义标签并从中为几种语言生成代码。这意味着您可以使用 Semantic 解析一种语言的代码，并使用这些标签使用 SReocde 生成另一种语言的代码。漂亮！

模板本身允许循环、if 语句和 include 语句。SRecode 中有几个用于制作“应用程序”的示例，例如评论编写器，EDE 使用它来创建 Makefile，这几乎正是您想要做的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-13T03:22:03.290

另一个选择是[Generator](https://github.com/thisandagain/generator)，它提供“语言无关的项目引导，强调简单性”。安装需要[Node.js 和 npm](https://docs.npmjs.com/getting-started/installing-node)。

Generator 对简单性的强调意味着学习如何制作模板非常容易。生成器还使您不必通过文件路径引用模板——它在`~/.generator`.

但是，如果不将这些文件复制到生成的项目中，就无法为模板本身编写文件`README`。`LICENSE`此外，写在 中的后生成命令`Makefile`将被复制到生成的`Makefile`中，即使它们不再使用。最后，ad-hoc 模板语言并没有提供逃避它的方法`__lowercasevariables__`——尽管我想不出有一种语言会出现这种限制。

# c# - 实现静态全局集合的更好方法是什么？

> ID：11153121
> 
> 赞同：0
> 
> 时间：2012-06-22T09:00:20.653
> 
> 标签：c#, collections

我在想如果每个应用程序都是全局的，那么将数据加载到集合的最佳方式是什么？

```
public static class ErrorValues
{
        public static readonly Dictionary<int, string> errorInfo = new Dictionary<int, string>
        {
            {0, "Error 404"},
            {1, "Error 500"},
            {2, "Error 301"}
        };
} 
```

或者像这样

```
public static class ErrorValues
{
    public static Dictionary<int, string> errorInfo;

    static ErrorValues()
    {
      if (errorInfo == null)
      {
        errorInfo = LoadDataToDictionary();
      }
   }
} 
```

更好的解决方案？为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T09:17:08.113

如果您的数据是静态的，我建议创建一个有意义的类型

例子：

```
public class ErrorValue
{
    private static Dictionary<Int32, ErrorValue> _errors;

    public static readonly ErrorValue Error404 = new ErrorValue(404, "Error 404");
    public static readonly ErrorValue Error500 = new ErrorValue(500, "Error 500");
    public static readonly ErrorValue Error301 = new ErrorValue(301, "Error 301");

    public String ErrorName { get; private set; }
    public Int32 ErrorCode { get; private set; }

    private ErrorValue(Int32 errorCode, String errorName)
    {
        if (_errors == null)
            _errors = new Dictionary<int, ErrorValue>();

        ErrorName = errorName;
        ErrorCode = errorCode;

        _errors.Add(errorCode, this);
    }

    public static IEnumerable<ErrorValue> Errors { get { return _errors.Values; } }

    public static ErrorValue GetErrorByCode(Int32 errorCode)
    {
        return _errors[errorCode];
    }
} 
```

由于类型安全，这将导致代码不易出错，因为您可以编写带有 type 参数的方法`ErrorValue`：

```
void HandleError(ErrorValue ev)
{ 
    // bla bla
} 
```

另一个好处是，使用这种方法，您可以轻松地扩展类型；例如添加其他属性，例如`Description`，无需对您的代码进行重大更改。

如果你需要类似的静态全局集合，你可以提取一个通用的通用基类来提供类似`GetById`或`GetByName`类似的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T09:05:50.803

如果项目是静态/硬编码并且不从数据库或其他数据源加载，我认为第一个很简单。

第二个是使用单例模式，这种模式在对象只创建一次并在整个应用程序生命周期中重用该对象引用的应用程序中大量使用。并提供从任何其他数据源初始化集合。

结论：两者都很好，但取决于你需要什么。我个人喜欢第二种方式，因为它遵循设计模式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T09:04:35.310

[除了beforefieldinit](http://msdn.microsoft.com/en-us/library/system.reflection.typeattributes.aspx)标志之外，生成的 IL 应该没有区别。

# sql-server - 如何为用户和配置文件场景建模

> ID：11153124
> 
> 赞同：1
> 
> 时间：2012-06-22T09:00:30.030
> 
> 标签：sql-server, database, sql-server-2008, database-design

我需要使用用户和关联的配置文件来建模一个场景。

**要求：**

用户必须具有**强制性**的个人资料 (ProfileA)，用户也可以**选择**拥有业务资料 (ProfileB)。

用户必须与每个配置文件类型关联只有 1 个配置文件。

这是我关于数据库设计的想法，我很想听听你的意见和想法，特别是在想法 B 中使用 Nullable FK。

如果您也有替代建模解决方案，请与我分享。提前致谢。

**想法一：**

```
Users
------------------
UserID   PK

ProfilesA
------------------
UserID   PK FK 

ProfilesB
------------------
 UserID   PK FK 
```

**IDEA B（使用 Nullable FK）：**

```
Users
------------------
UserID     PK
ProfileAId  NULL    FK
ProfileBId  NULL    FK

ProfilesA
------------------
ProfileAId   PK

ProfilesB
------------------
ProfileBId   PK FK 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T10:31:16.790

**IDEA A**不会强制`ProfileA`.

**假设不是 NULL， **IDEA B**`User.ProfileAId`可以，但这引入了只能通过延迟约束（MS SQL Server 不支持）解决的循环 FK。除此之外，您还需要一个 UNIQUE 约束`User.ProfileBId`来防止不同的用户共享相同的`ProfileB`内容（这需要额外的索引，并且每个新索引都会带来一定的开销，特别是如果您打算使用[集群](http://use-the-index-luke.com/sql/clustering/index-organized-clustered-index)）。**

 *** * *

由于我们正在处理“1:1”（`User`: `ProfileA`）和“1:0 或 1”（`User`: `ProfileB`）关系，我可能只是将所有内容放在同一个表中，然后使用 NOT NULL 与 NULL 约束来要求`ProfileA`与。只是允许`ProfileB`。

```
User
------------------
UserID PK

ProfileARequiredField1  NOT NULL
ProfileARequiredField2  NOT NULL
ProfileARequiredField3  NOT NULL (...)
ProfileAOptionalField1  NULL
ProfileAOptionalField2  NULL
ProfileAOptionalField3  NULL (...)

ProfileBRequiredField1  NULL
ProfileBRequiredField2  NULL
ProfileBRequiredField3  NULL (...)
ProfileBOptionalField1  NULL
ProfileBOptionalField2  NULL
ProfileBOptionalField3  NULL (...)

-- For ProfileB, if one required field is present, all must be present,
-- and optional fields are allowed only if required ones are present.
CHECK (
    (
        ProfileBRequiredField1 IS NULL AND 
        ProfileBRequiredField2 IS NULL AND 
        ProfileBRequiredField3 IS NULL AND
        ProfileBOptionalField1 IS NULL AND
        ProfileBOptionalField2 IS NULL AND
        ProfileBOptionalField3 IS NULL
    )
    OR (
        ProfileBRequiredField1 IS NOT NULL AND 
        ProfileBRequiredField2 IS NOT NULL AND 
        ProfileBRequiredField3 IS NOT NULL
    )
) 
```

* * *

或者，将`ProfileA`字段保留在 中`User`，但将`ProfileB`字段移动到单独的表中，就像您在 IDEA A 中所做的那样（不需要 IDEA B 的复杂性）。但是，NULL 存储很便宜，您可以使用[过滤索引](http://technet.microsoft.com/en-us/library/cc280372%28v=sql.105%29.aspx)从索引中排除 NULL，因此这可能不值得。**

# c# - 在C#中获取ListBox中多个选定项的索引

> ID：11153130
> 
> 赞同：2
> 
> 时间：2012-06-22T09:01:09.603
> 
> 标签：c#, listbox, multiple-select

我有两个列表框。第一`ListBox`项是“产品”列表。第二个`ListBox`项目是“产品中的项目”列表，因此当用户单击第一个（产品）列表框中的项目时，第二个`ListBox`将显示所选产品中的项目列表。

例如：

```
Products     Items in Proucts
  AA*                 1
  BB                  2
  CC                  3 
```

在上面的示例中，当前用户选择了 AA 产品。1,2,3 是产品 AA 中的项目。

对于当前的程序，我已经完成了。用户**一次只能选择一个“产品”**。然后我想**更改为多选。**所以我想获取用户选择的每个产品的索引号，然后我可以从数据库中检索数据以获取所有选定产品的“产品中的项目”。

```
if (productsListBox.SelectedItmes.Count >= 0)
{
 // please provide me coding here to get index number for each selected items in   productListBox.
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T09:15:14.663

我已经得到答案：

```
 if (productListBox.SelectedItems.Count >= 0)
 {
    for (int i = 0; i < productListBox.SelectedItems.Count; i++)
       {
            MessageBox.Show(productListBox.SelectedIndices[i].ToString());
       }
  } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T09:04:50.127

```
if (productsListBox.SelectedItmes.Count >= 0)
{

    string IDs = string.Empty;
    foreach( ListItem li in productsListBox.SelectedItmes ) 
    {
        IDs += li.Value+"," ;
    }
        IDs = IDs.Trim(',');

} 
```

它会为您提供所选 ID 的 CSV

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-24T14:15:22.773

```
private string GetTagsList()
    {
        string Tags = string.Empty;

        if (lstTags.SelectedItems.Count >= 0)
        {
            for (int i = 0; i < lstTags.SelectedItems.Count; i++)
            {
                Tags += lstTags.SelectedIndices[i].ToString() + ",";
            }
            Tags = Tags.Trim(',');
        }

        return Tags;
    } 
```

# hibernate - Hibernate批量删除多对多表

> ID：11153135
> 
> 赞同：1
> 
> 时间：2012-06-22T09:01:16.047
> 
> 标签：hibernate, many-to-many

还有另一个多对多的 Hibernate 问题。我有最简单的多对多映射，如下所示：

```
@Entity
public class Strategy implements Serializable {
    @ManyToMany(fetch = FetchType.EAGER)
    @JoinTable(name = "STRATEGY_TO_GROUP", joinColumns = {@JoinColumn(name="STRATEGY_ID")}, inverseJoinColumns = {@JoinColumn(name = "STRATEGY_GROUP_ID")})
    private Set<StrategyGroup> groups;
...
} 
```

而关系的反面如下：

```
@Entity
public class StrategyGroup implements Serializable {

    @ManyToMany(fetch = FetchType.EAGER)
    @JoinTable(name = "STRATEGY_TO_GROUP", joinColumns = {@JoinColumn(name="STRATEGY_GROUP_ID")}, inverseJoinColumns = {@JoinColumn(name = "STRATEGY_ID")})
    private Set<Strategy> strategies = new HashSet<Strategy>(); 
```

我现在要做的是以最简单的方式清空两个表。我正在尝试关注（他们是我的 entityManager）。

```
em.createQuery("delete from StrategyGroup sg").executeUpdate();
em.createQuery("delete from Strategy s").executeUpdate(); 
```

这使我违反了@joinTable 的约束。另一方面，如果我按`em.remove(strategyGroup);`ti 删除工作正常 - 策略组被删除并且 @joinTable 被正确更新。

那么如何清空表呢？我需要加载对象并一一删除吗？

感谢帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T09:16:43.277

首先，您的映射是错误的。关联的一方必须是所有者方，并定义关联的映射。另一个必须是插入端，并且只使用 mappedBy 属性：

```
@ManyToMany(fetch = FetchType.EAGER, mappedBy = "groups")
private Set<Strategy> strategies = new HashSet<Strategy>(); 
```

其次，您应该真正避免在 toMany 关联上进行 EAGER 获取，尤其是在双方：这将强制 Hibernate 递归加载所有关联实体，并且每次加载时都有很好的机会将两个表的所有行加载到内存中一排。

现在回答你的问题：

如果要从两个表中删除所有内容，首先需要确保连接表为空，否则其中一个表中的某些行仍将被连接表的一行引用，并且显然会失败。为此，在您的情况下，最好的选择是在执行您已有的两个 HQL 查询之前，使用 SQL 查询从连接表中删除所有内容。

# math - 哪个更随机？

> ID：11153137
> 
> 赞同：1
> 
> 时间：2012-06-22T09:01:24.167
> 
> 标签：math, random

哪个更随机？

```
rand() 
```

或者

```
rand() + rand() 
```

或者

```
rand() * rand() 
```

只是如何确定这一点？我是说。这真的让我很困惑！感觉可能都是一样随机的，但怎么可能绝对确定呢？！

任何人？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-22T09:13:47.783

“更随机”的概念并没有真正的意义。您的三种方法给出了不同的随机数分布。我可以在 Matlab 中说明这一点。首先定义一个函数`f`，当调用它时，它会为您提供一个包含 10,000 个随机数的数组：

```
f = @() rand(10000,1); 
```

现在看看你的三个方法的分布。

您的第一种方法`hist(f())`给出了均匀分布：

![在此处输入图像描述](../Images/ac44cf1053b385358853d7046b525d5c.png)

您的第二种方法`hist(f() + f())`给出了在中心达到峰值的分布：

![在此处输入图像描述](../Images/5f607185a4db254d7b6bf74286d40c47.png)

您的第三种方法`hist(f() .* f())`给出了一个分布，其中接近零的数字更有可能：

![在此处输入图像描述](../Images/329f2aa9427ea29f72bcfba80b9c1e00.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T09:10:14.087

至于熵的数量，我想，是可比的。

如果您需要比目前更多的熵（随机性），请使用加密强的随机生成器。

为什么它们具有可比性 --- 因为如果攻击者可以猜测下一个伪随机值返回

```
rand() 
```

接下来他猜对他来说并不难

```
rand()*rand() 
```

然而，关于不同分布的争论是重要且有效的！

# case-sensitive - 如何在 Oracle ADF 中设置 inputComboboxListOfValues 搜索对话框不区分大小写

> ID：11153139
> 
> 赞同：0
> 
> 时间：2012-06-22T09:01:34.613
> 
> 标签：case-sensitive, case-insensitive, oracle-adf

我`inputComboboxListOfValues`在 ADF 页面片段 (.jsff) 中使用如下：

![inputComboboxListOfValues](../Images/7ce8243181b332fbd196dd951175ea78.png)

当我单击“搜索...”时，我可以输入我要查找的内容，但这里的搜索区分大小写。

如何设置此字段不区分大小写？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T14:48:57.597

[http://dkleppinger.blogspot.com/2010/06/case-insensitive-search.html](http://dkleppinger.blogspot.com/2010/06/case-insensitive-search.html)。此外，您可以尝试设置不区分大小写的视图标准，并将其应用于 LOV 设置的 UI 提示面板中的 LOV。

# javascript - 如何使用 javascript 将 html 内容（也有图像）转换为文档文件？

> ID：11153143
> 
> 赞同：1
> 
> 时间：2012-06-22T09:02:01.473
> 
> 标签：javascript, html

我正在尝试在 html 中捕获 div 的一些内容（文本和图像），我想将其转换为 doc 文件，以便我可以邮寄它。我正在使用 html5 javascript 和 jQuery。

我必须在客户端进行转换。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T09:03:51.947

这是您的解决方案[http://www.phpdocx.com/](http://www.phpdocx.com/)。您需要一种服务器端语言来执行此操作，该示例使用 PHP。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T09:26:03.457

由于您有如此严格的要求：通过电子邮件向用户发送一个链接，其中包含您希望用户在打开文档时看到的报告版本。

告诉用户打开 MS Word，单击文件，打开，然后将链接粘贴进去。

然后，用户可以将其保存为 .doc 文件在任何他们想要的地方。

注意：顺便说一句，这是错误的答案，虽然你已经拒绝了，但 slash197 的答案是正确的方法，也是我通常建议的方法。

或者只是以 html 格式通过电子邮件发送报告。

# c++ - 错误：strstream.h：没有这样的文件或目录

> ID：11153152
> 
> 赞同：1
> 
> 时间：2012-06-22T09:02:29.327
> 
> 标签：c++, gcc

我正在尝试在 Linux (Redhat) 中运行旧的 C++ 代码。我正在使用 gcc 版本 4.1.2。

我收到以下错误：

```
error: strstream.h: No such file or directory
/trnuser1/rmtrain/DevelopmentEnv/Generic/CoreObjects/GCVTransformationServices.cpp:41: error: âostrstreamâ was not declared in this scope
/trnuser1/rmtrain/DevelopmentEnv/Generic/CoreObjects/GCVTransformationServices.cpp:41: error: expected `;' before âstrDestXMLâ
/trnuser1/rmtrain/DevelopmentEnv/Generic/CoreObjects/GCVTransformationServices.cpp:62: error: âstrDestXMLâ was not declared in this scope 
```

此代码在 gcc 版本 2.95 的 Solaris 下运行良好。错误指向的行包含以下语句：

```
ostrstream strDestXML; 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-22T09:08:51.893

您可以`#include <strstream>`（注意没有“.h”后缀）。但是，如果您想将代码正确地移植到现代 C++，您应该考虑将其更改为注释`#include <sstream>`中`std::ostringstream strDestXML;`的建议。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-22T09:09:39.630

标准 C++ 头文件没有扩展名。

```
#include <sstream> 
```

标准类包含在`std`命名空间中：

```
std::ostringstream strDestXML; 
```

最后，`strstream`不推荐使用；改用`stringstream`- 这就是我在这里使用它的原因。

* * *

而且，只是关于 GCC 版本的注释 - 4.1.2 是**旧的**，无论如何 - 使用更新的东西。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-22T09:11:34.087

此包含的现代名称是`<strstream>`. （虽然它已正式弃用，但它仍然是必需的。）它定义的类位于 namespace 中`std`，并且与经典 iostream 的语义略有不同，因此您可能需要稍后进行一些修改。`<sstream>`（根据使用方式，更改为，替换`[io]strstream`为可能有意义`std::[io]stringstream`。）

# ruby-on-rails - solr 太阳黑子精确搜索词

> ID：11153155
> 
> 赞同：3
> 
> 时间：2012-06-22T09:02:40.710
> 
> 标签：ruby-on-rails, ruby, solr, sunspot

我有一个大约 50 M 推文的存档。我想看看其他用户是否互相提及。但是有问题：有一个名为 facebook (www.twitter.com/facebook) 的帐户。我想搜索那些提到这个帐户的推文，而不是简单地说 facebook。

所以我使用太阳黑子的语法是：

```
search = FeedEntry.search do        
  without(:person_id,person.id) # No self referencing
  fulltext "@#{person.username}" #Find those Feeds that mention this person
  paginate :page => 1, :per_page => 1000000 #Make sure we dont paginate 
end 
```

Solr 似乎完全忽略了@ 符号，即使在搜索时将用户名放在“”或“”中也没关系。

```
search = FeedEntry.search{fulltext "facebook -RT"}
=> <Sunspot::Search:{:start=>0, :defType=>"dismax", :fq=>["type:FeedEntry"], :rows=>30, :q=>"facebook -RT", :fl=>"* score", :qf=>"retweeters_text text_text"}>
>> search.total
=> 299525 
```

我能做些什么？我必须检查这些结果并使用 ruby​​ "include?"@facebook" 来整理耗时的误报。

我怀疑它与我正在使用的标记器工厂有关： [http ://wiki.apache.org/solr/AnalyzersTokenizersTokenFilters#solr.KeywordTokenizerFactory](http://wiki.apache.org/solr/AnalyzersTokenizersTokenFilters#solr.KeywordTokenizerFactory)

我在 schema.xml 中的配置是：

```
<fieldType name="text" class="solr.TextField" omitNorms="false">
      <analyzer>
        <tokenizer class="solr.StandardTokenizerFactory"/>
        <filter class="solr.StandardFilterFactory"/>
        <filter class="solr.LowerCaseFilterFactory"/>
      </analyzer>
    </fieldType> 
```

我认为将 StandardTokenizerFactory 更改为 WhitespaceTokenizerFactory 对我来说会有所帮助。顺便提一句。有没有办法查看这些工厂在我的语料库上生产了哪些令牌？

我的最后一个问题是更改标记器后是否需要重新索引？我的假设是肯定的。

干杯托马斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-18T16:31:56.743

`StandardTokenizerFactory`抛出标点符号，除了不跟空格的句点。特别是，它会抛出“@”，因此您的 @name 搜索注定要失败（就像搜索完整的电子邮件地址一样。虽然`ClassicTokenizerFactory`保留了电子邮件地址，但我相信它仍然会从 @name 中抛出“@”。

将`WhitespaceTokenizerFactory`保留@name，但如果它后跟逗号（与 不同），它会以不同的方式处理它，`@name`因此`@name,`它可能仍然不适合您。您可能最终想要使用`PatternTokenizerFactory`您确切指定要如何通过正则表达式进行解析的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T11:33:56.057

如果您可以在索引这些推文时解析哈希标签、转发推文、@name 等，并在 solr 中使用单独的字段，那么您将拥有更强大的搜索 (恕我直言)。

如您所述，更改为空白标记器应该会有所帮助，并且您需要重新索引。您还需要在搜索期间使用相同的标记器、分析器。

# objective-c - Objective-C 中的#define vs const

> ID：11153156
> 
> 赞同：82
> 
> 时间：2012-06-22T09:02:41.893
> 
> 标签：objective-c, constants, c-preprocessor

我是 Objective-C 的新手，我有一些关于`const`preprocessing 指令的问题`#define`。

首先，我发现无法使用`#define`. 这是为什么？

其次，使用其中一个比另一个有什么优势吗？

最后，哪种方式更有效和/或更安全？

* * *

## 回答 #1

> 赞同：107
> 
> 时间：2012-06-22T10:11:02.260

> 首先，我发现使用#define 定义常量的类型是不可能的，这是为什么呢？

为什么是什么？这不是真的：

```
#define MY_INT_CONSTANT ((int) 12345) 
```

> 其次，使用其中一个比另一个有什么优势吗？

是的。 `#define`定义了一个宏，它甚至在编译开始之前就被替换了。 `const`仅修改一个变量，以便在您尝试更改它时编译器将标记错误。在某些情况下，您可以使用 a`#define`但不能使用 a `const`（尽管我正在努力使用最新的 clang 来寻找一个）。理论上，a`const`会占用可执行文件中的空间并需要对内存的引用，但实际上这无关紧要，并且可能会被编译器优化掉。

`const`s 比`#define`s 对编译器和调试器更友好。在大多数情况下，这是您在决定使用哪一个时应该考虑的最重要的一点。

只是想到了一个可以使用`#define`但不能使用的上下文`const`。如果您有一个要在大量`.c`文件中使用的常量，`#define`只需将其粘贴在标题中即可。使用 a`const`你必须在 C 文件中有一个定义，并且

```
// in a C file
const int MY_INT_CONST = 12345;

// in a header
extern const int MY_INT_CONST; 
```

在标题中。 `MY_INT_CONST`不能用作任何 C 文件中的静态或全局范围数组的大小，但定义它的文件除外。

但是，对于整数常量，您可以使用`enum`. 事实上，这就是苹果几乎一成不变的做法。这具有`#define`s 和`const`s 的所有优点，但仅适用于整数常量。

```
// In a header
enum
{
    MY_INT_CONST = 12345,
}; 
```

> 最后，哪种方式更有效和/或更安全？

`#define`理论上更有效，尽管正如我所说，现代编译器可能确保几乎没有区别。 `#define`更安全，因为尝试分配给它总是一个编译器错误

```
#define FOO 5

// ....

FOO = 6;   // Always a syntax error 
```

`const`尽管编译器可能会发出警告，但 s 可能会被欺骗：

```
const int FOO = 5;

// ...

(int) FOO = 6;     // Can make this compile 
```

根据平台的不同，如果常量放置在只读段中并且根据 C 标准它是官方未定义的行为，则分配可能在运行时仍然失败。

就个人而言，对于整数常量，我总是将`enum`s 用于其他类型的常量，`const`除非我有充分的理由不使用。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-06-22T09:09:43.213

来自 C 编码器：

A`const`只是一个变量，其内容不能更改。

`#define name value`然而，是一个预处理器命令，它用 替换所有`name`实例`value`。

例如，如果您是 ，则您的代码中的`#define defTest 5`所有实例都将在您编译时`defTest`替换为`5`。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-06-22T09:25:20.903

了解#define 和 const 指令之间的区别很重要，它们并不意味着相同的事情。

## `const`

`const`用于从所要求的类型生成一个对象，一旦初始化，该对象将是常量。这意味着它是程序内存中的一个对象，可以作为只读的。每次启动程序时都会生成该对象。

## `#define`

`#define`用于简化代码的可读性和未来的修改。使用定义时，您只需要在名称后面屏蔽一个值。因此，在使用矩形时，您可以使用相应的值定义宽度和高度。然后在代码中，它将更容易阅读，因为将有名称而不是数字。

如果稍后您决定更改宽度的值，您只需在定义中更改它，而不是在整个文件中进行无聊且危险的查找/替换。编译时，预处理器会将所有定义的名称替换为代码中的值。因此，使用它们不会浪费时间。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-06-22T09:14:40.623

除了其他人的评论之外，`#define`由于预处理器在编译器之前获取它们，因此使用错误是非常难以调试的。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-06-22T09:06:23.610

由于预处理器指令不受欢迎，我建议使用`const`. 您不能使用预处理器指定类型，因为预处理器指令在编译之前已解析。好吧，你可以，但类似：

```
#define DEFINE_INT(name,value) const int name = value; 
```

并将其用作

```
DEFINE_INT(x,42) 
```

编译器会将其视为

```
const int x = 42; 
```

> 首先，我发现使用#define 定义常量的类型是不可能的，这是为什么呢？

你可以，看看我的第一个片段。

> 其次，使用其中一个比另一个有什么优势吗？

通常有一个`const`而不是预处理器指令有助于调试，在这种情况下没有那么多（但仍然如此）。

> 最后，哪种方式更有效和/或更安全？

两者都一样有效。我想说宏*可能*更安全，因为它在运行时无法更改，而变量可以。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-22T10:27:49.093

我之前使用过#define 来帮助从一种方法中创建更多方法，例如我有类似的方法。

```
 // This method takes up to 4 numbers, we don't care what the method does with these numbers.
 void doSomeCalculationWithMultipleNumbers:(NSNumber *)num1 Number2:(NSNumber *)num2 Number3:(NSNumber *)num23 Number3:(NSNumber *)num3; 
```

但我也有什么方法只需要 3 个数字和 2 个数字，所以我将使用 #define 来使用相同的方法，而不是编写两个新方法，就像这样。

```
 #define doCalculationWithFourNumbers(num1, num2, num3, num4) \
         doSomeCalculationWithMultipleNumbers((num1), (num2), (num3), (num4))

 #define doCalculationWithThreeNumbers(num1, num2, num3) \
         doSomeCalculationWithMultipleNumbers((num1), (num2), (num3), nil)

 #define doCalculationWithTwoNumbers(num1, num2) \
         doSomeCalculationWithMultipleNumbers((num1), (num2), nil, nil) 
```

我认为这是一件很酷的事情，我知道您可以直接使用该方法并将 nil 放在您不想要的空间中，但如果您正在构建一个库，它非常有用。这也是如何

```
 NSLocalizedString(<#key#>, <#comment#>)
     NSLocalizedStringFromTable(<#key#>, <#tbl#>, <#comment#>)
     NSLocalizedStringFromTableInBundle(<#key#>, <#tbl#>, <#bundle#>, <#comment#>) 
```

完成。

而我不相信你可以用常量做到这一点。但是常量确实比#define 有好处，就像你不能用#define 指定一个类型，因为它是一个在编译之前解析的预处理器指令，如果你在#define 中遇到错误，那么它们就更难调试了常数。两者都有优点和缺点，但我想说这完全取决于您决定使用哪个程序员。我已经用它们编写了一个库，使用#define 来执行我所展示的操作，并使用常量来声明我需要指定类型的常量变量。

# 64-bit - 目前 Liferay Portal CE 安装在 java 32 位上，如果我将 java 重新安装到 64 位，它是否无害？

> ID：11153170
> 
> 赞同：0
> 
> 时间：2012-06-22T09:03:52.083
> 
> 标签：64-bit, java

目前 Liferay Portal CE 安装在 java x32 上，如果我将 java 重新安装到 x64，它是否无害？如果我将 java 重新安装到 x64，我需要更改哪些配置文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T11:39:47.593

“重新安装”是什么意思？

通过简单地更改 JAVA_HOME 环境变量并在路径的开头添加 64 位二进制文​​件，一切都应该工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T10:33:33.863

Liferay 只是一组 API 和一组称为 portlet、主题、布局等的 Web 应用程序。它带有标准容器和服务器，如 Tomcat、JBoss 等。

如果 Tomcat/JBoss 在 Java 64 位上运行良好，Liferay 也可以使用它。

我认为 Liferay 的架构不会有任何问题。这取决于您拥有的 JVM 的兼容性。

# java - 如何使用 LoadingCache 将递归转换为迭代？

> ID：11153173
> 
> 赞同：6
> 
> 时间：2012-06-22T09:03:56.633
> 
> 标签：java, caching, recursion, tree, guava

我完全重写了这个问题，因为原来的问题无法解决。为了简单起见，我使用斐波那契数作为一个玩具示例。

正如预期的那样，琐碎的[递归缓存计算以非常长的堆栈跟踪结束。](https://dl.dropbox.com/u/4971686/published/maaartin/itercache/RecursiveCacheDemo.java)这就是为什么我想要一个像[IterativeLoadingCache](https://dl.dropbox.com/u/4971686/published/maaartin/itercache/IterativeLoadingCache.java)这样的抽象类，我可以[在这里](https://dl.dropbox.com/u/4971686/published/maaartin/itercache/DemoIterativeLoadingCache.java)像这样扩展它

```
@Override
protected Integer computeNonRecursivelly(Integer key) {
    final Integer x1 = getOrEnqueue(key-1);
    final Integer x2 = getOrEnqueue(key-2);
    if (x1==null) return null;
    if (x2==null) return null;
    return x1+x2;
} 
```

它会在不使用递归的情况下处理所有缓存和计算。

我*真的*不是在寻找斐波那契数的有效计算。我需要一些允许将缓存与递归函数一起使用的东西，其中递归深度可以任意高。

我已经有了一种解决方案，但是效率很低而且很丑陋，所以我希望得到一些好的建议。我也很好奇其他人是否需要它或者可能已经实现了它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T11:23:08.113

既然你已经重写了你的问题，这里有一个新的答案。

首先，在我看来，您的实现`computeNonRecursivelly`仍然是递归的，因为`getOrEnqueue`调用它。

我认为您不能`Cache`直接使用 a ，因为您需要在计算中有两个步骤：一个说明所需值的依赖关系，另一个在满足依赖关系后进行计算。不过，它只有在你从来没有循环依赖的情况下才会起作用（这与递归中的要求相同）。

这样，您可以将尚未在缓存中的依赖项（及其依赖项等）排队，然后以正确的顺序计算它们。类似的东西：

```
public abstract class TwoStepCacheLoader<K, V> extends CacheLoader<K, V> {
    public abstract Set<K> getDependencies(K key);
}

public class TwoStepCache<K, V> extends ForwardingLoadingCache<K, V> {
    private final TwoStepCacheLoader<K, V> loader;
    private LoadingCache<K, V> cache;

    public TwoStepCache(TwoStepCacheLoader<K, V> loader) {
        this.loader = loader;
        cache = CacheBuilder.newBuilder().build(loader);
    }

    @Override
    public V get(K key) 
            throws ExecutionException {
        V value = cache.getIfPresent(key);
        if (value != null) {
            return value;
        }

        Deque<K> toCompute = getDependenciesToCompute(key);
        return computeDependencies(toCompute);
    }

    private Deque<K> getDependenciesToCompute(K key) {
        Set<K> seen = Sets.newHashSet(key);
        Deque<K> dependencies = new ArrayDeque<K>(seen), toCompute = new ArrayDeque<K>(seen);
        do {
            for (K dependency : loader.getDependencies(dependencies.remove())) {
                if (seen.add(dependency) && // Deduplication in the dependencies
                    cache.getIfPresent(dependency) == null) {
                    // We need to compute it.
                    toCompute.push(dependency);
                    // We also need its dependencies.
                    dependencies.add(dependency);
                }
            }
        } while (!dependencies.isEmpty());
        return toCompute;
    }

    private V computeDependencies(Deque<K> toCompute)
            throws ExecutionException {
        V value;
        do {
            value = cache.get(toCompute.pop());
        } while (!toCompute.isEmpty());
        // The last computed value is for our key.
        return value;
    }

    @Override
    public V getUnchecked(K key) {
        try {
            return get(key);
        } catch (ExecutionException e) {
            throw new UncheckedExecutionException(e.getCause());
        }
    }

    @Override
    protected LoadingCache<K, V> delegate() {
        return cache;
    }
} 
```

现在您可以实现一个`TwoStepCacheLoader`安全地调用缓存的方法：

```
public class Fibonacci {
    private LoadingCache<Integer, Integer> cache = new TwoStepCache<Integer, Integer>(new FibonacciCacheLoader());

    public int fibonacci(int n) {
        return cache.getUnchecked(n);
    }

    private class FibonacciCacheLoader extends TwoStepCacheLoader<Integer, Integer> {
        @Override
        public Set<Integer> getDependencies(Integer key) {
            if (key <= 1) {
                return ImmutableSet.of();
            }
            return ImmutableSet.of(key - 2, key - 1);
        }

        @Override
        public Integer load(Integer key)
                throws Exception {
            if (key <= 1) {
                return 1;
            }
            return cache.get(key - 2) + cache.get(key - 1);
        }
    }
} 
```

我已经对其进行了单元测试，它似乎运行正确。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-22T11:10:12.313

**编辑：**`Expression`更改了实现以允许在多个线程中将相同作为参数传递时进行单个计算。

不要使用 a `LoadingCache`，只需将结果缓存在`eval`（一旦它被修改为使用迭代而不是递归）：

```
public Node eval(final Expression e) {
    if (e==null) return null;
    return cache.get(e, new Callable<Node>() {
        @Override
        public Node call() {
            final Node n0 = eval(leftExpression(e));
            final Node n1 = eval(rightExpression(e));
            return new Node(n0, n1);
        }
    });
}

private final Cache<Expression, Node> cache
= CacheBuilder.newBuilder().build(); 
```

# c++ - 如何初始化参数化模板类的静态成员

> ID：11153182
> 
> 赞同：2
> 
> 时间：2012-06-22T09:04:27.133
> 
> 标签：c++, visual-studio-2010, templates

我不认为我的问题与[这个](https://stackoverflow.com/questions/3229883/static-member-initialization-in-a-template-class)问题重复。

我尝试做的事情：

```
template<const char* szFunctionName>
class CReentranceLock
{
public:
    CReentranceLock(){}
    ~CReentranceLock(){}
    bool isLocked(){return s_bLock;}
    void setLocked(bool b)
    {
        const bool Result=(bool)InterlockedCompareExchange(
                    (unsigned long *)&s_bLock, b, !b);
    }

private:
    static bool s_bLock;
};

template<const char* szFunctionName>
bool CReentranceLock<const char*szFunctionName>::s_bLock=false; 
// error C2146: syntax error : missing ',' before identifier 'szFunctionName' 
```

暗示所有 CReentranceLock 实例都有自己的静态，依赖于作为模板参数传递的函数名的 const char 地址。

可以这样使用：

```
void CMyObject::InAnyFunction()
{
    const char* szFunctionName = __FUNCTION__; 
    CReentranceLock<szFunctionName> lock; // Edit: <- this doesn't work
    if(lock.isLocked()) return;
    lock.setLocked(true);
    /// business code
   lock.setLocked(false);
} 
```

好吧，这只是理论……不幸的是，这在我尝试初始化静态的那一行在 Visual 2010 下无法编译。

```
error C2146: syntax error : missing ',' before identifier 'szFunctionName' 
```

我在做什么或想错了什么？

PS：我并没有处理重入闻起来像一个糟糕的设计（在 MFC 中）的事实，我知道，我迷失在其中 ;-)

**编辑**：虽然下面的答案很好，并且定义编译......我在 CMyObject::InAnyFunction() 中使用 const char * 作为编译时可用的模板参数似乎是错误的。:-(

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T09:15:34.507

```
bool CReentranceLock<const char*szFunctionName>::s_bLock=false; 
```

这应该是：

```
bool CReentranceLock<szFunctionName>::s_bLock=false; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T09:16:07.067

只需将行更改为

`bool CReentranceLock<szFunctionName>::s_bLock=false;`

# c++ - 指向 Direct3D 函数的指针

> ID：11153184
> 
> 赞同：1
> 
> 时间：2012-06-22T09:04:35.323
> 
> 标签：c++, detours

我有代码：

```
#include <windows.h>
#include <detours.h>
#include <d3d11.h>
#include <d3dx11.h>
#include <d3dcompiler.h>
#include <xnamath.h>
#include <sstream>

#pragma comment(lib, "detours.lib")
BOOL (WINAPI * TrueSetWindowText)(HWND hWnd, LPCTSTR  lpString) = SetWindowText; 
```

TrueSetWindowText 一个指向winapi 函数SetWindowText 的指针。接下来我使用它一切正常。

我决定尝试 Direct3D 功能。添加：

```
HRESULT (WINAPI * TrueD3DX11CreateShaderResourceViewFromFile)(
    ID3D11Device *pDevice, 
    LPCTSTR pSrcFile, 
    D3DX11_IMAGE_LOAD_INFO *pLoadInfo, 
    ID3DX11ThreadPump *pPump, 
    ID3D11ShaderResourceView **ppShaderResourceView,
    HRESULT *pHResult) = D3DX11CreateShaderResourceViewFromFile; 
```

指向[D3DX11CreateShaderResourceViewFromFile](http://msdn.microsoft.com/en-us/library/windows/desktop/ff476283%28v=vs.85%29.aspx)的指针。当我编译项目时，我得到一个错误。

```
dllmain.obj : error LNK2001: unresolved external symbol _D3DX11CreateShaderResourceViewFromFileW@24
fatal error LNK1120: 1 unresolved externals 
```

在项目属性VC++目录中，我添加了：

包括目录 C:\Program Files %28x86%29\Microsoft DirectX SDK %28June 2010%29\Include

库目录 C:\Program Files %28x86%29\Microsoft DirectX SDK %28June 2010%29\Lib\x86

有谁知道为什么会出现这个错误？

# c# - 短语“HTTP.SYS 中的 URL 保留”是什么意思？

> ID：11153187
> 
> 赞同：3
> 
> 时间：2012-06-22T09:04:42.390
> 
> 标签：c#, http, winhttp, http.sys

无法理解这句话的意思。论坛上的人互相建议在HTTP.sys中保留url，但这是什么意思？它是干什么用的？它是如何工作的？这一切都来自 HttpWebRequest 的 uac 问题。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-22T09:11:10.243

一些 Win32 API 和 .NET 框架组件（如 WCF）在想要发送或接收以本地计算机为目标的 HTTP 请求时使用[HTTP Server API 。](http://msdn.microsoft.com/en-us/library/windows/desktop/aa364510%28v=vs.85%29.aspx)HTTP Server API 基本上以操作系统管理的方式提供此类功能，而无需在机器上部署独立的 Web 服务器，例如 IIS。

此时最好引用上面链接的开发中心页面：

> 保留将 URL 命名空间的一部分永久分配给各个用户，允许他们保留或“拥有”命名空间的该部分。预留赋予用户注册服务命名空间请求的权利。HTTP Server API 确保用户不会从他们不拥有的命名空间部分注册 URL。为了确保命名空间的安全性，ACL（访问控制列表）应用于为每个用户保留的命名空间部分。
> 
> 保留的命名空间由 URL 前缀字符串标识，其格式与用于注册的 URL 前缀相同。这意味着所有不同的主机说明符类别也可用于预订。
> 
> 命名空间保留在重新启动后保持不变，并且更改会动态生效，因此无需停止和重新启动机器。

这意味着在 HTTP Server API 允许您侦听对特定 URL 命名空间的传入请求（将其视为“URL 路径”）之前，您必须为它们*注册*。如上所述，注册是基于用户帐户执行的，因此这里重要的是*要侦听请求的进程在哪个用户帐户下运行*，它可能与当前登录用户的帐户不同。

# android - 有没有办法以编程方式控制android后退按钮的背光？

> ID：11153188
> 
> 赞同：1
> 
> 时间：2012-06-22T09:04:43.300
> 
> 标签：android, back-button

我目前正在制作一个安卓应用程序并在三星 GT-S5830 上进行测试。

我遇到的问题是应用程序运行时后退按钮的背光总是关闭（所以它不可见），这似乎让我要求测试应用程序的用户感到困惑。

问题是是否有办法以编程方式确保后退按钮的背光始终亮起？

我对此表示怀疑，因为问题似乎与手机型号有关。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T09:56:44.457

已经有一个stackoverflow答案，但我会再次发布：

```
private void setDimButtons(boolean dimButtons) {
    Window window = getWindow();
    LayoutParams layoutParams = window.getAttributes();
    float val = dimButtons ? 0 : -1;
    try {
        Field buttonBrightness = layoutParams.getClass().getField(
                "buttonBrightness");
        buttonBrightness.set(layoutParams, val);
    } catch (Exception e) {
        e.printStackTrace();
    }
    window.setAttributes(layoutParams); 
```

}

或者尝试在这里找到一些东西（新设计太可怕了......）[http://developer.android.com/reference/android/os/PowerManager.html](http://developer.android.com/reference/android/os/PowerManager.html)

# java - 使用javascript更改java变量的值？

> ID：11153197
> 
> 赞同：1
> 
> 时间：2012-06-22T09:05:22.890
> 
> 标签：java, javascript, html, servlets

如何使用 javascript 更改 java 变量的值？

假设我已经在 java servlet 中声明了一个变量，`int x=0;` 所以现在我想在 servlet 上的任何按钮的 onclick 事件上将其值更改为 1，我该怎么做？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T09:13:52.353

**笔记！**你不应该在你的 servlet 中保存状态，因为它可能被多个线程（多个用户）使用。这些值应该存储在`Session`对象中，或者存储在某个后端——例如数据库中。

现在回到您的问题：您的浏览器 JavaScript 代码不能直接对服务器上执行的 Java 代码进行操作。但是，您可以将`click`事件处理程序绑定到您的按钮，并对您的 servlet 执行 AJAX 调用以增加此值。有关如何使用 JQuery 执行此操作的示例，请参阅[此答案。](https://stackoverflow.com/a/3611062/1344008)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T09:37:41.650

`JavaScript`在客户端执行，`Servlets`写入在`Java`服务器端执行。

两者是不同的环境。如果你想改变服务器端对象的状态`JavaScript`，你应该通过`AJAX`.

**问题：**假设我在 java servlet 中声明了一个变量，例如 int x=0; 所以现在我想在 servlet 上的任何按钮的 onclick 事件上将其值更改为 1 我该怎么做？

**答：** Servlet 中不应该有变量。因为`Servlets are not Thread Safe.`我认为您只想更改客户端的状态，这可能存储为会话。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T09:15:10.983

无法从 javascript 更改 java 变量的值。

但是通过java代码我们可以改变java脚本变量的值。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-22T09:09:37.807

您不能使用 javascript 更改 java 变量，尽管您可以反过来做。Javascript是客户端，jsp页面中的java代码在服务器端执行

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-22T09:16:16.567

不，如果不在服务器上发送请求，您就无法做到这一点，如果您准备好发送请求，那么您可以在值中分配变量值`<input>`并将其发送到请求中，或者使用`Ajax`javascript 来执行此操作。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-22T09:36:48.610

我不明白为什么每个人都说你不能这样做。

当然可以。我已经多次使用 JavaScript 中的远程 API 从 javascript 调用 java 方法。例如，如果使用 Seam，您可以这样做：[http ://docs.jboss.com/seam/latest/reference/en-US/html/remoting.html](http://docs.jboss.com/seam/latest/reference/en-US/html/remoting.html)

在这里，OP 必须找出他想使用哪个框架，或者哪种远程技术最适合 OP

例如，您调用一个以 int 作为参数的 java 方法，并将该值应用于变量。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-22T09:17:22.830

您不能直接使用 javascript 更改 java 变量的值。你可以做什么首先通过放置隐藏文件或将其传递给url来获取请求参数中的javascript变量，然后使用`rwquest.getParameter（“field”）获取值。

`Javascript runs on client browser so you can't get it directly.`

# ios - IOS：反向地理编码省

> ID：11153199
> 
> 赞同：0
> 
> 时间：2012-06-22T09:05:26.647
> 
> 标签：ios, xcode, reverse-geocoding

我有这个代码来反向地理编码，它可以工作

```
- (void)reverseGeocoder:(MKReverseGeocoder *)geocoder didFindPlacemark:(MKPlacemark *)placemark
{
    MKPlacemark * myPlacemark = placemark;
    // with the placemark you can now retrieve the city name
    NSString *region = [myPlacemark.addressDictionary objectForKey:(NSString*) kABPersonAddressStateKey];
    NSString *city = [myPlacemark.addressDictionary objectForKey:(NSString*) kABPersonAddressCityKey];
    NSString *address = [myPlacemark.addressDictionary objectForKey:(NSString*) kABPersonAddressStreetKey];
    NSLog(@"region:%@", region);
    NSLog(@"city:%@", city);
    NSLog(@"address:%@", address);

} 
```

它工作正常，但我无法拥有“省”......获得省份的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T09:17:35.587

这些是地址字典的所有键：

```
const ABPropertyID kABPersonAddressProperty;
const CFStringRef kABPersonAddressStreetKey;
const CFStringRef kABPersonAddressCityKey;
const CFStringRef kABPersonAddressStateKey;
const CFStringRef kABPersonAddressZIPKey;
const CFStringRef kABPersonAddressCountryKey;
const CFStringRef kABPersonAddressCountryCodeKey; 
```

> **常量**
> **kABPersonAddressProperty**
> 地址多值属性的标识符。
> 在 iOS 2.0 及更高版本中可用。
> 在 ABPerson.h 中声明。
> 
> **kABPersonAddressStreetKey**
> 街道。
> 在 iOS 2.0 及更高版本中可用。
> 在 ABPerson.h 中声明。
> 
> **kABPersonAddressCityKey**城市。
> 在 iOS 2.0 及更高版本中可用。
> 在 ABPerson.h 中声明。
> 
> **kABPersonAddressStateKey**
> 状态。
> 在 iOS 2.0 及更高版本中可用。
> 在 ABPerson.h 中声明。
> 
> **kABPersonAddressZIPKey**
> 邮政编码。
> 在 iOS 2.0 及更高版本中可用。
> 在 ABPerson.h 中声明。
> 
> **kABPersonAddressCountryKey**
> 国家。
> 在 iOS 2.0 及更高版本中可用。
> 在 ABPerson.h 中声明。
> 
> **kABPersonAddressCountryCodeKey**
> 国家代码。支持的值列在“国家代码”中。<br/> 适用于 iOS 2.0 及更高版本。
> 在 ABPerson.h 中声明。

不幸的是，没有一个省。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-03T00:22:34.787

在我的代码中，我有以下方法来获取地址和地名。省是州或行政区

```
[geocoder reverseGeocodeLocation:newLocation completionHandler:^(NSArray *placemarks, NSError *error) {
        if(placemarks.count){

        NSDictionary *dictionary = [[placemarks objectAtIndex:0] addressDictionary];
        addressLabel.Text = [dictionary valueForKey:@"Street"];
        cityLabel.Text = [dictionary valueForKey:@"City"];
        stateLabel.Text = [dictionary valueForKey:@"State"];
        zipCodeLabel.Text = [dictionary valueForKey:@"ZIP"];
        countryLabel.text = [dictionary valueForKey:@"Country"];
        countryCodeLabel.text = [dictionary valueForKey:@"CountryCode"];

        placeNameLabel.text = [placemarks[0] name];
        addressNumberLabel.text = [placemarks[0] subThoroughfare];
        addressLabel.text = [placemarks[0] thoroughfare];
        neighborhoodLabel.text = [placemarks[0] subLocality];
        cityLabel.text = [placemarks[0] locality];
        countyLabel.text = [placemarks[0] subAdministrativeArea];
        stateLabel.text = [placemarks[0] administrativeArea];
        zipCodeLabel.text = [placemarks[0] postalCode];
        countryLabel.text = [placemarks[0] country];
        countryCodeLabel.text = [placemarks[0] ISOcountryCode];
        inlandWaterLabel.text = [placemarks[0] inlandWater];
        oceanLabel.text = [placemarks[0] ocean];
    }
}]; 
```

你可以试试我的开源项目。很容易获得地标。[设备详细信息](https://github.com/robert-yi-jones/Device-Details) [https://github.com/robert-yi-jones/Device-Details](https://github.com/robert-yi-jones/Device-Details)

# java - 使用“ImageIO.write()”API 调用我得到 NullPointerException

> ID：11153200
> 
> 赞同：11
> 
> 时间：2012-06-22T09:05:42.407
> 
> 标签：java, exception, javax.imageio

通过`ImageIO.write()`API 调用，`NullPointerException`当我通过一个不存在的路径（如`"\\abc\abc.png"`. 我故意通过不存在的路径来测试某些东西，但我没有得到`FileNotFoundException`，而是得到`NPE`。这是为什么？

`ImageIO.write()`API 应该抛出`IOException`，但不知道为什么我得到`NPE`.

我使用异常消息字符串在消息框中向用户显示它，但在这种情况下`NPE.getLocalizedMessage()`返回空字符串，因此弹出窗口是空的，上面只有一个图标。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-22T10:29:28.930

不过，他*是*对的。例如，这段代码：

```
public static void main(String[] args) throws IOException {
 BufferedImage image = new BufferedImage(32, 32, BufferedImage.TYPE_INT_ARGB);
 File out = new File("\\\\ABC\\abc.png");
 ImageIO.write(image, "png", out);
} 
```

给

```
java.io.FileNotFoundException: \\ABC\abc.png (The network path was not found)
at java.io.RandomAccessFile.open(Native Method)
at java.io.RandomAccessFile.<init>(RandomAccessFile.java:233)
at javax.imageio.stream.FileImageOutputStream.<init>(FileImageOutputStream.java:69)
at com.sun.imageio.spi.FileImageOutputStreamSpi.createOutputStreamInstance(FileImageOutputStreamSpi.java:55)
at javax.imageio.ImageIO.createImageOutputStream(ImageIO.java:419)
at javax.imageio.ImageIO.write(ImageIO.java:1530)
at javaapplication145.JavaApplication145.main(JavaApplication145.java:24)
Exception in thread "main" java.lang.NullPointerException
at javax.imageio.ImageIO.write(ImageIO.java:1538)
at javaapplication145.JavaApplication145.main(JavaApplication145.java:24) 
```

原因是`FileImageOutputStreamSpi.createOutputStreamInstance`吞下 FileNotFoundException，然后在`ImageIO.write`尝试关闭未打开的流时出现 NPE。

为什么异常被如此残酷地压制，我不知道。代码片段是

```
try {
 return new FileImageOutputStream((File)output);
} catch (Exception e) {
 e.printStackTrace();
 return null;
} 
```

唯一的解决方案是在尝试使用 ImageIO*之前*验证路径。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T10:53:09.937

我发现了此线程中提到的问题的 NPE 原因。彼得赫尔说的完全正确

```
public static void main(String[] args) throws IOException {  BufferedImage image = new BufferedImage(32, 32, BufferedImage.TYPE_INT_ARGB);  File out = new File("\\\\ABC\\abc.png");  ImageIO.write(image, "png", out); } 
```

这正是我的代码的样子。感谢彼得强调。

这个问题的原因是 new FileImageOutputStream() 抛出了 FileNotFoundException 但一些 Sun 程序员去捕获了异常，打印了堆栈跟踪，并返回了 null。这就是为什么不再可能捕获 FileNotFoundException - 它已经打印出来了。不久之后，返回的 null 值会导致 NullPointerException，这是我调用的方法中抛出的异常。当打印异常的堆栈跟踪时，由于上述原因，我可以看到*FileNotFoundException*和*NPE 。*

-纳扬

# jquery - 在prototypejs中点击函数

> ID：11153203
> 
> 赞同：0
> 
> 时间：2012-06-22T09:05:54.543
> 
> 标签：jquery, prototypejs

如何在prototypejs中编写以下jquery？

```
<a class="button view" style="cursor:pointer" id="addComment"></a>

$(function() {
 $("#addComment").click(function(){

         alert("hello world");
     });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T09:12:37.600

[工作演示](http://jsfiddle.net/epinapala/U4fCu/)

```
Event.observe('addComment', 'click', function(event) {
    alert('u clicked on click here');
});​ 
```

# watin - 使用 WatiN 进行测试时：“'DebuggerDisplayProxy()' 引发了 'System.InvalidCastException' 类型的异常”

> ID：11153205
> 
> 赞同：1
> 
> 时间：2012-06-22T09:06:04.073
> 
> 标签：watin

```
FrameworkActionsLink = CurrentBuyerSite.BuyerWorkAreaFrame.Link(Find.ById("actions")); 
```

我有通过 ID 查找来查找链接元素的代码。

页面上的 HTML 是：

```
<a id="actions" href="Javascript:ShowMenuItem('options','actions'); ... > 
```

我已在您看到“...”的 href 中排除了完整的 Javascript 代码。

在测试执行时，有时此代码可以正常工作，但有时我会收到以下错误：

> “DebuggerDisplayProxy()”引发了“System.InvalidCastException”类型的异常

这是一段非常简单的代码，我只是想知道是否有人遇到过类似的问题或错误消息。您认为这是 WatiN 工具、Web 应用程序、互联网浏览器的问题，还是完全是其他问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T18:17:36.057

你用的是什么跑步者？如果 nUnit 64bit 然后尝试 32bit 或其他运行器。

也许问题是该页面没有完全下载并且导致javascript函数出现问题，请尝试将Click()替换为ClickNoWait()。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T11:14:09.590

你可以试试下面的代码：

```
FrameworkActionsLink = (WatiN.Core.Link)CurrentBuyerSite.BuyerWorkAreaFrame.Link(Find.ById("actions")); 
```

我很确定它不喜欢链接`JavaScript:...`

**编辑**：试试这个：

```
CurrentBuyerSite.Eval("ShowMenuItem('options','actions'); ..."); 
```

# php - 初学者正则表达式案例，简单匹配

> ID：11153206
> 
> 赞同：1
> 
> 时间：2012-06-22T09:06:08.853
> 
> 标签：php, regex

我想创建一个适用于的预匹配模式：

```
http://site.local/app/**/admin 
```

文本。我创造了一些东西，看起来不错，但它也通过了

```
http://site.local/app/vf/adming 
```

我不想做什么。基本创建的模式：

```
preg_match('/http:\/\/site.local\/app\/.*\\/admin/', $siteUrl) 
```

应该如何纠正？

顺便说一句：操作员/管理员，我之前创建了这个线程，从那时起该帐户被禁用。[https://stackoverflow.com/questions/11139579/i-need-a-regexp](https://stackoverflow.com/questions/11139579/i-need-a-regexp)现在你看，我真的很努力，我可以拿回那个帐户吗？如果没有，我明白

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T09:18:47.520

**[a-zA-Z]**只有字母和**{1,5}**长度为 1 到 5。如果您允许数字，只需将其更改为**[a-zA-Z0-9]**

```
$site = 'http://site.local/app/at/admin';

if(preg_match('/^http:\/\/site.local\/app\/[a-zA-Z]{1,5}\/admin$/', $site)){
    echo 1;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T09:13:02.693

使用 ^ 和 $ 来“告诉”正则表达式模式的开始和结束。

```
preg_match('/^http:\/\/site.local\/app\/(.*)\/admin$/', 'http://site.local/app/abcd/admin');
preg_match('/^http:\/\/site.local\/app\/(.*)\/admin$/', 'http://site.local/app/abcd/admins'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T09:15:26.147

我想说的问题是`.*`匹配所有你真正想要匹配两个 *.

```
/^http:\/\/site.local\/app\/[\*]{2}\\/admin$/ 
```

应该做...

编辑：向标记下的人解释自己。

提问者说他​​想要一个 preg_match 来匹配

> 文本

```
http://site.local/app/**/admin 
```

我就是这么做的。你怎么能因为理解英语而给我打分？

但是为了统计提问者，因为他确实是指应用程序和管理员之间的任何字符和任意数量的字符，这里是修改后的版本：

```
/^http:\/\/site.local\/app\/.*\\/admin$/ 
```

# html - 没有一个 TD 的 TR 课程

> ID：11153208
> 
> 赞同：0
> 
> 时间：2012-06-22T09:06:10.147
> 
> 标签：html, css

```
<table>
    <tr class="here"><td><input type="text" readonly=readonly></td></tr>
    <tr class="here"><td><input type="text" readonly=readonly></td></tr>
    <tr class="here"><td><input type="text" ></td></tr>
</table>

td {
    padding: 15px;
    margin: 10px;
}

.here {
    background-color: red;
} 
```

[http://jsfiddle.net/dZYEM/](http://jsfiddle.net/dZYEM/)

我如何修改类 .here 以使子输入具有只读属性的工作？我不想修改html。

编辑：

现在我有：jsfiddle.net/dZYEM/2/

我想收到：http: [//jsfiddle.net/dZYEM/3/](http://jsfiddle.net/dZYEM/3/)

但没有使用风格。我只想用 css 接收这个。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T09:25:56.377

没有纯 CSS 方法可以做到这一点，因为 CSS 没有*has*或*contains*选择器。

但这可以使用一行 jQuery 来完成。而且它真的很快。

`$("tr.here:has(input[readonly='readonly'])").css('background', 'red');`

这是一个可以尝试的工作 jsFiddle - [http://jsfiddle.net/T7hnR/2/](http://jsfiddle.net/T7hnR/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T09:46:43.820

嘿，你有两个选择

**首先是**如果你的**tr**是**最后一个**而不是应用这个 css

```
tr:last-child{
background:none;
} 
```

**其次是**如果您的**tr 编号**比习惯的**3**多。

```
tr:nth-of-type(3){
background:none;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T09:17:42.337

可以通过使用[CSS2 选择器来编辑内部元素](http://www.w3.org/TR/CSS2/selector.html)

> E[foo="warning"] 匹配任何 "foo" 属性值正好等于 "warning" 的 E 元素。

但这将不允许您选择外部父元素。在 CSS2 或 CSS3 下，这都不存在，您*必须*使用 JavaScript/jQuery 提供的解决方案来完成。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T09:17:48.783

喜欢这里：http: [//jsfiddle.net/dZYEM/10/](http://jsfiddle.net/dZYEM/10/)

**CSS：**

```
tr:nth-child(3n) {
    background: none !important;
} 
```

# asp.net-mvc - ASP.Net MVC 4 和 WebApi 的身份验证

> ID：11153215
> 
> 赞同：2
> 
> 时间：2012-06-22T09:06:29.690
> 
> 标签：asp.net-mvc, authentication, asp.net-web-api

我想建立一个同时使用这两种技术的系统。我的 MVC 应用程序生成并返回 html/css/jaavascript 文件，然后我在客户端做一些工作，通过 ajax 请求获取数据。到目前为止没有什么新东西，但我也希望 ajax 端点也可以用作纯 REST 服务。

我怎样才能有一种统一的身份验证方式（MVC 客户端的 Web 表单（然后将 REST 端点用于 ajax 请求），纯 REST 客户端的其他方式）。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T09:09:15.283

您可以在您的 Web API 控制器操作上使用[`[Authorize]`](http://msdn.microsoft.com/en-us/library/system.web.http.authorizeattribute%28v=vs.108%29.aspx)属性（`System.Web.Http.AuthorizeAttribute`一个和 not ）：`System.Web.Mvc.AuthorizeAttribute`

```
public class ValuesController: ApiController
{
    [Authorize]
    public HttpResponseMessage Get()
    {
        string username = User.Identity.Name;
        ...
    }
} 
```

# jquery - 获取值在单击按钮的正上方我试图在单击按钮时获取 <select>的值。</select> 直接与 DOM 中的按钮有关，我正在尝试使用 .closest() 我的来源是 -<select id="bulk-action-selection" name="bulk-action"><option value="-1" selected="selected">批量操 ID：11153216 赞同：0 时间：2012-06-22T09:06:34.133 标签：jquery, closest 回答 #1 赞同：2 时间：2012-06-22T09:07:56.913 像这样改变你的功能： $('#doaction2').click(function(e){ action = $(this).prev('select').val(); // or action = $('#bulk-action-selection2').val(); }) e是事件，而不是对您单击的元素的引用（并且您的按钮 id 是#doaction2） 回答 #2 赞同：1 时间：2012-06-22T09:07:36.943 einsideclick指的是event对象，我想你的意思是$(this)。此外，您定位错误的按钮，您正在寻找的 id 是doaction2 另外，不确定这是否是一个错字，但你需要一个额外的)after $('#doaction').click()： $('#doaction2').click(function(e){ action = $(this).prev('select').val(); }); // <-- this 但是由于您已经ID为 select 元素分配了一个，我建议您直接将其作为目标： $('#doaction2').click(function(e){ action = $('#bulk-action-selection2').val(); }); 这样，每当您的 HTML 更改时，您仍然可以获得正确的行为。 回答 #3 赞同：1 时间：2012-06-22T09:07:42.013 我认为 $('#doaction') 应该 $('#doaction2') 完整代码 $('#doaction2').click(function(e){ action = $(e.target).prev('select').val(); }); 回答 #4 赞同：1 时间：2012-06-22T09:14:53.073 $(function() { $('#doaction2').click(function(e){ action = $('#doaction2').prev().val(); console.log(action); }); });</option></select>

# html - 用于高分辨率屏幕的响应式 CSS 网格

> ID：11153217
> 
> 赞同：1
> 
> 时间：2012-06-22T09:06:34.843
> 
> 标签：html, css, frameworks

我现在正在使用[Skeleton](http://www.getskeleton.com/)，喜欢它如何管理不同尺寸的屏幕，但它的最大宽度是 960 像素。请向我推荐一些响应式 CSS 框架，该框架针对宽度不超过 1920 像素的屏幕创建和测试。我知道我可以根据需要更新现有的 Skeleton 实例，但我想尝试一些现成的东西。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T10:18:56.780

大多数网格框架不会一直到 1920 年，最终由您来扩展它们。不过，请查看这两个以了解 Skeleton 的替代方案：

[http://www.cssgrid.net](http://www.cssgrid.net)

[http://www.tinyfluidgrid.com](http://www.tinyfluidgrid.com)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T20:22:37.793

我相信您可以使用[Zurb Foundation](http://foundation.zurb.com)设置任意高的宽度。就个人而言，我从来没有走这么高，但看看它的表现如何。它应该适当缩小。Foundation 确实提供了很多附加功能，但您可以在下载页面上选择退出。

...实际上，我只是快速下载了响应式 CSS 和主要样式以及一些预制的 HTML 模板，并调整了窗口大小。效果很好，我认为。我将最大宽度设置为 1920 像素。弄清楚您需要多少列等并进行测试。

# asp.net - 所有 asmx Web 服务都停止使用 url 中的端口

> ID：11153218
> 
> 赞同：1
> 
> 时间：2012-06-22T09:06:46.210
> 
> 标签：asp.net, web-services, asmx

我们有一些托管在本地服务器上的 asmx 网络服务，例如 http://192\. 168.180。102/网络服务.asmx

但是，当这些托管在具有另一个端口或别名的 IIS 中时，例如

```
http:// 192\. 168.180\. 102:8000/webservice.asmx
or http://somehostname:8000/webservice.asmx 
```

..然后服务器上的所有 Web 服务都停止工作，返回 404 错误，但是所有其他 aspx 页面工作正常。我在这里缺少什么吗？

此外，如果有帮助，.asmx 不会单独托管在 IIS 中，它位于托管在 IIS 中的 Web 应用程序中。

这是对尝试连接到任何 asmx Web 服务的任何 aspx 页面发出的每个请求的 windows 错误显示的内容：

异常类型：WebException 异常消息：无法解析远程名称

它太奇怪了，因为它托管在相同的设置上！

# java - Hibernate + Informix + Blob + 字节数组

> ID：11153226
> 
> 赞同：3
> 
> 时间：2012-06-22T09:07:20.427
> 
> 标签：java, hibernate, bytearray, blob, informix

我在将字节数组保存到我的 Informix 数据库时遇到了麻烦，我将向您展示我是如何尝试的：

在 Fichero.java 中，我有这个：

```
@Column(name="fichero", columnDefinition="blob")
private byte[] contenido; 
```

我不得不这样做，因为我无法让 Informix+Hibernate 接受 @Lob 注释（是的，我尝试过扩展 Hibernate 的方言解决方法，但它对我不起作用）

然后我读取一个文件并以这种方式将其转换为字节数组：FileManager.java

```
private byte[] fromFile2ByteArray(String nombreFichero) throws FileNotFoundException, IOException{
   File file = new File(nombreFichero);
   InputStream is = new FileInputStream(file);
   byte[] contenido = new byte[(int)file.length()];
   is.read(contenido);
   is.close();
   return contenido;
} 
```

接下来我尝试将其保存到我的数据库中：FicheroDAO.java

```
public void save(Object object) {
   getHibernateTemplate().save(object);      
} 
```

对象是我的 Fichero 对象。

Buuuuut，我得到以下异常。

```
Hibernate: 
    /* insert es.cosas.modelo.datos.dominio.fichero.Fichero
        */ insert 
        into
            cosas_fichero
            (fichero, idEnvio, nombrefichero, respuesta) 
        values
            (?, ?, ?, ?)
WARN : org.hibernate.util.JDBCExceptionReporter - SQL Error: -841, SQLState: S0000
ERROR: org.hibernate.util.JDBCExceptionReporter - Name must start with a letter or '_' and contain letters, digits, or '_'.
22-jun-2012 9:25:32 org.apache.catalina.core.StandardWrapperValve invoke
GRAVE: Servlet.service() para servlet Spring MVC Dispatcher Servlet lanzó excepción
java.sql.SQLException: Name must start with a letter or '_' and contain letters, digits, or '_'.
   at com.informix.util.IfxErrMsg.getSQLException(IfxErrMsg.java:379)
   at com.informix.jdbc.IfxSqli.addException(IfxSqli.java:3109)
   at com.informix.jdbc.IfxSqli.receiveError(IfxSqli.java:3419)
   at com.informix.jdbc.IfxSqli.dispatchMsg(IfxSqli.java:2282)
   at com.informix.jdbc.IfxSqli.receiveMessage(IfxSqli.java:2202)
   at com.informix.jdbc.IfxSqli.executeFastPath(IfxSqli.java:5475)
   at com.informix.jdbc.IfxSqli.executeFastPath(IfxSqli.java:5400)
   at com.informix.jdbc.IfxSmartBlob.IfxLoColInfo(IfxSmartBlob.java:306)
   at com.informix.jdbc.IfxSmBlob.createSmartLob(IfxSmBlob.java:751)
   at com.informix.jdbc.IfxSmBlob.createBlobOnServer(IfxSmBlob.java:497)
   at com.informix.jdbc.IfxResultSet.executeUpdate(IfxResultSet.java:301)
   at com.informix.jdbc.IfxStatement.executeUpdateImpl(IfxStatement.java:885)
   at com.informix.jdbc.IfxPreparedStatement.executeUpdate(IfxPreparedStatement.java:279)
   at org.apache.tomcat.dbcp.dbcp.DelegatingPreparedStatement.executeUpdate(DelegatingPreparedStatement.java:105)
   at org.apache.tomcat.dbcp.dbcp.DelegatingPreparedStatement.executeUpdate(DelegatingPreparedStatement.java:105)
   at org.hibernate.id.insert.AbstractSelectingDelegate.performInsert(AbstractSelectingDelegate.java:57)
   at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:2329)
   at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:2836)
   at org.hibernate.action.EntityIdentityInsertAction.execute(EntityIdentityInsertAction.java:71)
   at org.hibernate.engine.ActionQueue.execute(ActionQueue.java:267)
   at org.hibernate.event.def.AbstractSaveEventListener.performSaveOrReplicate(AbstractSaveEventListener.java:321)
   at org.hibernate.event.def.AbstractSaveEventListener.performSave(AbstractSaveEventListener.java:204)
   at org.hibernate.event.def.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:130)
   at org.hibernate.event.def.DefaultSaveOrUpdateEventListener.saveWithGeneratedOrRequestedId(DefaultSaveOrUpdateEventListener.java:210)
   at org.hibernate.event.def.DefaultSaveEventListener.saveWithGeneratedOrRequestedId(DefaultSaveEventListener.java:56)
   at org.hibernate.event.def.DefaultSaveOrUpdateEventListener.entityIsTransient(DefaultSaveOrUpdateEventListener.java:195)
   at org.hibernate.event.def.DefaultSaveEventListener.performSaveOrUpdate(DefaultSaveEventListener.java:50)
   at org.hibernate.event.def.DefaultSaveOrUpdateEventListener.onSaveOrUpdate(DefaultSaveOrUpdateEventListener.java:93)
   at org.hibernate.impl.SessionImpl.fireSave(SessionImpl.java:705)
   at org.hibernate.impl.SessionImpl.save(SessionImpl.java:693)
   at org.hibernate.impl.SessionImpl.save(SessionImpl.java:689)
   at org.springframework.orm.hibernate3.HibernateTemplate$12.doInHibernate(HibernateTemplate.java:686)
   at org.springframework.orm.hibernate3.HibernateTemplate$12.doInHibernate(HibernateTemplate.java:1)
   at org.springframework.orm.hibernate3.HibernateTemplate.doExecute(HibernateTemplate.java:406)
   at org.springframework.orm.hibernate3.HibernateTemplate.executeWithNativeSession(HibernateTemplate.java:374)
   at org.springframework.orm.hibernate3.HibernateTemplate.save(HibernateTemplate.java:683) 
```

异常中的下一行指向 FicheroDAO.java 文件以及它尝试保存对象的行号...

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T10:19:24.187

好吧，最后我想出了一个更简单的解决方法：我只是将数据库中的列定义为字节......它就像一个魅力......无论如何谢谢......

# ruby-on-rails - Paperclip (3.0) 和 Rails (3.2)：在验证错误后，f.file_field 在“新”操作中丢失文件路径

> ID：11153227
> 
> 赞同：8
> 
> 时间：2012-06-22T09:07:27.273
> 
> 标签：ruby-on-rails, file-upload, paperclip

我设置了一个带有由 Paperclip 处理`story`的附件的模型，如下所示：`image`

```
class Story < ActiveRecord::Base  
  has_attached_file :image # [...]
  attr_accessible :user_id, :title, :image, :image_file_name
  belongs_to: user

  validates_presence_of :user_id
  validates :title,     :length => { :maximum => 50 }
  validates_attachment_size :image, :less_than => 2.megabytes, :unless => Proc.new { |story| story[:image].nil? }
  # [...] 
end 
```

当我填写我的故事表格时，它看起来像：

```
<%= form_for @story, html: { multipart: true } do |f| %>
<% if @story.errors.any? %>
<div id="error-explanation">
    <ul>
        <% @story.errors.full_messages.each do |msg| %>
        <li class="error-mess">Error: <%= msg.downcase %></li>
        <% end %>
    </ul>
</div>
<% end %>

<%= f.text_field :title %></td>
<%= f.file_field :image %>
<%= f.submit t('.send') %>

<% end %> 
```

如果 story.title 太长验证失败，表格会正确重新显示，同时显示正确的错误消息**和**已填写的无效标题，**但`file_field`现在为空白，我必须再次单击它才能重新选择文件我要上传**。

这是我的**stories_controller.rb 的**样子：

```
def create
  @story = @current_user.stories.new(params[:story]) 
  if @story.save                                                                                                                   
    redirect_to thanks_path    
  else
    # !@story.save so I render action 'new' again just to
    # bang my head against this 'anomaly' 
    render action: "new"
  end              
end 
```

*如何避免用户在验证错误后重新选择要上传的文件？*

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-24T18:29:30.267

HTTP 文件上传在浏览器中的工作方式，文件已经在第一次提交时上传到你的应用程序——所以你应该把它存储在某个地方，这样你以后仍然可以在第二次提交表单时访问它。（至少在 PHP 中，一个上传的文件在脚本运行后会被删除，如果它没有被明确地移动到其他地方——我不知道这是否也适用于 RoR。）

出于安全原因，您*不能*在 HTML 中预先填写 input type=file 字段。即使用户再次选择文件，他们也必须再次发送——浪费用户和您的带宽。

*因此，要么在第一次提交时将其存储在某处，要么在允许*提交（尽可能）之前尝试在客户端也使用 JavaScript 进行验证，以便最大限度地减少实际上在服务器端验证失败的表单提交。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T18:19:11.690

CBroe 是对的，最好的解决方案是临时存储文件。我要做的是： - 将文件移动到临时目录，并使用尝试上传它的用户的 ID 命名。- 当表单发布并且没有上传文件时，尝试使用该用户的临时文件（如果存在）。- 如果故事成功保存，请删除该用户的所有临时文件。

我认为这应该可以解决问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-16T22:22:56.987

我不得不在最近的一个项目中解决这个问题。这有点hacky，但它有效。我尝试在模型中使用 after_validation 和 before_save 调用 cache_images() ，但由于某种我无法确定的原因，它在创建时失败，所以我只是从控制器调用它。希望这可以节省其他人一些时间！

模型：

```
class Shop < ActiveRecord::Base    
  attr_accessor :logo_cache

  has_attached_file :logo

  def cache_images
    if logo.staged?
      if invalid?
        FileUtils.cp(logo.queued_for_write[:original].path, logo.path(:original))
        @logo_cache = encrypt(logo.path(:original))
      end
    else
      if @logo_cache.present?
        File.open(decrypt(@logo_cache)) {|f| assign_attributes(logo: f)}
      end
    end
  end

  private

  def decrypt(data)
    return '' unless data.present?
    cipher = build_cipher(:decrypt, 'mypassword')
    cipher.update(Base64.urlsafe_decode64(data).unpack('m')[0]) + cipher.final
  end

  def encrypt(data)
    return '' unless data.present?
    cipher = build_cipher(:encrypt, 'mypassword')
    Base64.urlsafe_encode64([cipher.update(data) + cipher.final].pack('m'))
  end

  def build_cipher(type, password)
    cipher = OpenSSL::Cipher::Cipher.new('DES-EDE3-CBC').send(type)
    cipher.pkcs5_keyivgen(password)
    cipher
  end

end 
```

控制器：

```
def create
  @shop = Shop.new(shop_params)
  @shop.user = current_user
  @shop.cache_images

  if @shop.save
    redirect_to account_path, notice: 'Shop created!'
  else
    render :new
  end
end

def update
  @shop = current_user.shop
  @shop.assign_attributes(shop_params)
  @shop.cache_images

  if @shop.save
    redirect_to account_path, notice: 'Shop updated.'
  else
    render :edit
  end
end 
```

看法：

```
= f.file_field :logo
= f.hidden_field :logo_cache

- if @shop.logo.file?
  %img{src: @shop.logo.url, alt: ''} 
```

# c++ - 从 C++ 打印共享库依赖项

> ID：11153239
> 
> 赞同：0
> 
> 时间：2012-06-22T09:08:00.953
> 
> 标签：c++, dependencies, shared

我需要为二进制程序分配一组精确的共享库依赖项。我正在使用 linux，该项目是用我的 C++ 编写的。因此，我需要 C++ 中的类似 ldd 的递归功能。我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T09:49:12.000

引用 Han Solo 的话，“我对此有一种不好的预感”。从 C++ 程序中为子进程设置 chroot 听起来像是一些架构上的误解/进一步搞砸了。抱歉，我没有想到现成的 C++ 解决方案。当然，您*可以运行 ltrace / strace / recursive-ldd 并解析它们的输出......*

...但一般来说，这个想法是*静态*设置 chroot 环境（即在任何进程启动之前），而不是动态设置。使用动态方法，攻击者可以欺骗主进程，使其相信它应该给子进程一些它不应该在 chroot 中拥有的东西。这违背了整个目的。

*为给定的可执行文件静态*设置 chroot 环境的工具很多，动态*设置*的工具我找不到。这本身就是一个提示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T09:23:08.157

与此同时，我发现了以下内容： [linux/gcc：来自 C/C++ 程序内部的 ldd 功能，](https://stackoverflow.com/questions/1519684/linux-gcc-ldd-functionality-from-inside-a-c-c-program) 其中接受的答案建议使用：
`setenv("LD_TRACE_LOADED_OBJECTS", "1", 1); FILE *ldd = popen("/lib/libz.so");`
我尝试了它并从 bash 和 C++ 工作（在这种情况下我认为是 ofc等效版本）。但是，如果我为 SUID 二进制文件（我实际拥有的）运行任一版本，那么我会得到退出代码 5（我猜是权限问题）。

然后我追踪了 ldd 究竟做了什么，以下似乎很好（至少在命令行中）：（
`LD_TRACE_LOADED_OBJECTS=1 /lib64/ld-linux-x86-64.so.2 binary_name`
虚拟）问题是：C++ 中这个的等效实现是什么？

# mysql - MySQL 是否支持安全信用交易？

> ID：11153242
> 
> 赞同：-3
> 
> 时间：2012-06-22T09:08:12.950
> 
> 标签：mysql

我一直致力于为我当地的杂货店设计和制作一个网站。他们希望通过网站进行购买，我预计他们将保留客户数据。但我真正想知道的是，我能否将信用卡详细信息安全地存储在 MySQL 数据库中？您能否描述一下实现这一目标的一般过程。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T09:17:55.663

是也不是，您可以通过 MySQL 中的加密和/或散列来安全地存储数据。MySQL 只是一个关系型数据库，你可以使用这样的关系型数据库来安全地存储客户数据，也可以使用它来不安全地存储它。

无论如何，正确地做这件事很难，真的很难，无论是使用 MySQL 还是使用任何其他数据库。

我建议使用第三方服务来处理交易，这个领域有很多公司与大公司（亚马逊、贝宝、谷歌）竞争。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T09:17:55.590

MySQL 是一个数据库，而不是一个订单处理软件。使您的 MySQL 事务代码安全是您程序员的任务。所以答案是肯定的和否定的。

# html - 网站加载问题 - 大量图片

> ID：11153243
> 
> 赞同：0
> 
> 时间：2012-06-22T09:08:13.017
> 
> 标签：html, pageload

我已经完成了几个网站，并且了解基本的 html、javascript 和 php。

我最近创建了一个站点[themefinder.dk](http://themefinder.dk)，它按我的预期工作，除了它最初加载的时候。在将图像移动到正确位置之前，这些图像会显示“不在位置”几秒钟。这是一张[图片](http://themefinder.dk/wp-content/uploads/2012/06/ThemeFinder-load-problems.png)。

我的问题是如何处理这个问题。

我发现一些我认为会影响这一点的事情：
- 从 .image 类中删除 position:absolute 可以解决加载问题，但反过来会导致页面看起来不像预期的那样。
- 页面上有大量的 DOM 元素。
- Javascript 在 document.ready 上运行

我已经尝试过使用上述方法，但还没有成功。任何关于如何解决这个问题的想法或想法都将受到欢迎。

我目前正在研究 ajax，以找到一种方法或减少加载图像的初始数量。但我还没有这方面的经验，所以在我了解更多关于 ajax 的同时，如果有一个解决方案会很棒。

如果我应该详细说明我的 html 结构或网站上的任何内容，请告诉我。任何帮助深表感谢。

最好的问候
安德斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T09:15:10.627

无需使用 ajax 加载图像。您可以在页面加载后立即在 javascript 中创建图像元素。

```
var yourimage = $("<img />").attr('src', 'http://yourimageurl.com/image.jpg')
                      .load(function() {
                         if (!this.complete || typeof this.naturalWidth == "undefined" || this.naturalWidth == 0) {
                             alert('Can\'t load image');
                         } else {
                             $("#someid").append(yourimage);
                         }
                      }); 
```

# ruby-on-rails - Rails：生成唯一随机数以填充 CSS 类字符串 如何？

> ID：11153244
> 
> 赞同：1
> 
> 时间：2012-06-22T09:08:18.690
> 
> 标签：ruby-on-rails, random, unique, erb

因此，假设我们有一个带有以下代码的 rails 视图：

```
<h1>Users who have the <%= @title.name %> Title</h1>
<ul>
  <% @title.users.each do |user| %>
    <li><%= user.username %> <div class="rw-ui-container rw-urid-X"></div></li>
  <% end %>
</ul> 
```

我们想要做的是自动*打印*这一行：

```
<div class="rw-ui-container rw-urid-X"></div> 
```

在循环向我们抛出的每个用户名旁边，但我们希望**X**每次都是一个不同**的唯一随机数......**

如何实现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T13:02:44.517

可能这个解决方案可以帮助您：1.您可以`user_id`用作随机的第一部分`X`以确保另一个用户没有它 2.第二部分是 UTC 格式的时间，`X`每次设置不同 3.第三部分只是一个标准随机函数。如果你愿意，你还没有使用它。

```
<h1>Users who have the <%= @title.name %> Title</h1>
<ul>
  <% @title.users.each do |user| %>
    <li><%= user.username %> <div class="rw-ui-container rw-urid-<%= "#{user_id}#{Time.now.utc.to_i}#{rand(100000)}".to_i %>"></div></li>
  <% end %>
</ul> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T10:06:31.010

```
css_arr = ["rw-ui-container rw-urid-1","rw-ui-container rw-urid-2","rw-ui-container rw-urid-3"]

<div class="<%= css_arr.sample %>"></div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-23T12:51:40.277

Well You could easily add a new field to user table call `uuid` or give it any name that you like and assign a unique id using the [gem](https://github.com/assaf/uuid/) called uuid

This help ensure that you have uniqueness in `X` section and also on refresh the value wont change as you mention in one of your comment

so here how your `X` code would look like

```
<% @title.users.each do |user| %>
    <li><%= user.username %> <div class="rw-ui-container rw-urid-<%=user.uuid %>"></div></li>
  <% end %> 
```

# ruby - 是否可以通过复制 ruby 文件夹来安装 Ruby？

> ID：11153245
> 
> 赞同：1
> 
> 时间：2012-06-22T09:08:21.593
> 
> 标签：ruby, installation

这是一个非常愚蠢的问题......

我对红宝石安装有疑问。如果我们从另一台服务器复制 Ruby187 文件夹并将其添加到环境变量的 PATH 中，ruby 是否会安装在 Windows 服务器中？

或者我们是否需要始终从安装程序安装 Ruby 才能安装它？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T12:36:07.140

我昨天在工作中实际上做了类似的事情。一位没有在系统上安装 Ruby 的同事需要能够在我休假时运行我的脚本。因此，我将整个 Ruby 文件夹从 C: 复制到共享网络驱动器。

您不仅需要将 Ruby 文件夹的路径添加到`PATH`变量中，还可能希望将 Ruby 扩展`.rb`与 Ruby 相关联。不需要，只是一个想法。

我遇到的一个问题是在工作中我们无权`PATH`手动更改我们的变量。因此，为了让我的同事启动我需要运行的脚本，我编写了一个小型 C++ 应用程序，它只运行一个命令行`call`到 Ruby 解释器，然后运行到要运行的脚本。

所以，简而言之，是的，这是可能的。=)

编辑：关于为什么要将 Ruby 安装的路径添加到 PATH 变量中，这样您就可以从命令行简单地调用 Ruby 了`C:\>ruby some_script.rb`。如果没有将其添加到您的 PATH 中，您每次都需要键入整个路径，例如`C:\>C:\ruby192\bin\ruby some_script.rb`. 但是，您仍然需要先输入“ruby”。

关于“.rb”文件与 Ruby 解释器的关联，这是使用 ruby​​-lang.org 提供的安装程序在 Windows 上安装 Ruby 时的一个选项。这样，您就无需在命令行上的脚本名称之前键入“ruby”。`C:\>some_script.rb`会工作。我不知道如何使用 Ruby 的网络版本执行此操作，但一种方法可能是右键单击“.rb”文件，选择“打开方式...”并在`\ruby192\bin\ruby.exe`.

我希望这能解释你在评论中提出的问题。

# firefox - firefox全新的“新标签页” - 如何查看/编辑被阻止/固定的项目？

> ID：11153250
> 
> 赞同：0
> 
> 时间：2012-06-22T09:08:33.547
> 
> 标签：firefox

虽然在 Firefox 的新漂亮标签页中固定/阻止链接屏幕截图很简单，但我看不到编辑被阻止/固定项目列表的方法，有人知道该怎么做吗？EG 我屏蔽了一个页面，但现在我想解锁，怎么办？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T14:07:22.793

这适用于 Windows 上的 FF17，Mac/Linux 用户参见下面

要解锁被阻止的页面退出 Firefox，请在 sourceforge.net 下载[sqlitebrowser](http://sourceforge.net/projects/sqlitebrowser/ "sqlite浏览器")（目前约为 6MB，仅限 Windows），使用它在“Profiles”目录中打开 chromeappsstore.sqlite。在 Win Vista 上，例如：

```
[DRIVENAME]:\Users\[USERNAME]\AppData\Roaming\Mozilla\
Firefox\Profiles\[ALPHANUMERICSTRING].default\chromeappsstore.sqlite 
```

切换到“浏览数据”选项卡，打开与“固定链接”键对应的值的编辑视图（双击它）。将一个条目（例如**null**）替换为

```
{"url":"YOUR_URL","title":"YOUR_TITLE"} 
```

应用更改，保存更改。

还有一个关键的“被阻止的链接”。直观地说，从它的值中删除被阻止的 url 应该会有所帮助，但是当我尝试时它没有。上面的技巧很笨拙，但到目前为止，我无法用谷歌搜索任何更优雅的东西。我也找不到任何有用的搜索 Firefox 的 about:config 选项卡。在我的配置文件目录中对被阻止的 url 进行字符串搜索时，我找到了这个解决方案。

Mac/Linux 用户应该寻找其他 sqlite 浏览器。使用 firefox 插件[SQLite Manager](https://addons.mozilla.org/de/firefox/addon/sqlite-manager/ "火狐/插件/sqlite-manager")时，您需要先复制数据库文件并对其进行编辑。然后退出 Firefox 并用新文件替换旧文件。

这是 bugzilla[条目](https://bugzilla.mozilla.org/show_bug.cgi?id=722234)（“错误 722234 - [新标签页] 提供撤消删除站点的选项”），状态已**分配**，未**解决**。评论中写道：“目前，有一种方法可以撤消网站的删除或使用新布局重置页面。”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T17:22:38.657

有一种更简单的方法可以在不下载的情况下做到这一点，特别是对于那些可能无法很好地浏览计算机的人。[Mozilla 确实有办法做到这一点](http://support.mozilla.org/en-US/kb/new-tab-page-show-hide-and-customize-top-sites?esab=a&s=New%20tab%20page&r=1&as=s#w_add-a-site)，他们只是给它贴上了不好的标签，而且有点迂回。

将您在新标签页上阻止的页面设为收藏夹，然后单击并拖动到新标签页上的空白处，它将自动固定。一个缺点是，如果您取消固定它，该网站将再次消失。在我删除 Google 后的几周内，我感到很沮丧，而且似乎没有太多简单的帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-05-04T01:01:08.787

“将您在新标签页上阻止的页面设为收藏夹”这是什么意思？书签？

我单击了一对夫妇上的 PIN 图标，而不是固定它，它似乎完全从新标签选择中删除了该页面......事实上，我看不出有什么办法让它回来。为什么钉住东西会把它拿走！？它们是我每天多次使用的页面；非常失望。

我点击的那些在我的书签中（“收藏夹”是一个 IE 术语），但它们并没有像上面建议的那样重新出现。

上面的 sqlitebrowser 方法太复杂了，我可以看到它试图把所有事情都做对会出错。对我来说这是悲伤的一天。

# oracle - 带有 Oracle 的 Playframework 2 抛出 InvocationException

> ID：11153252
> 
> 赞同：0
> 
> 时间：2012-06-22T09:08:45.950
> 
> 标签：oracle, hibernate, playframework-2.0, ebean

当使用 Oracle 数据库而不是 H2 数据库运行“java/computer-database”示例时，`Computer.find.byId()`会导致“com.sun.jdi.InvocationException 发生调用方法。”。正在显示正确的`Application.list()`数据。

我的 application.conf 中有这个：

```
db.default.url="jdbc:oracle:thin:@xx.xx.xx.xx:1521:somename"
db.default.driver=oracle.jdbc.driver.OracleDriver 
```

在我的 lib 目录中，我有 ojdbc6.jar orai18n.jar

在搜索有关如何在 playframework 2.0 中使用 oracle 的示例时，我注意到您应该在 application.conf 中有与此类似的一行：jpa.dialect=org.hibernate.dialect.Oracle11gDialect

但是，这个（或我能想到的任何其他版本号）给出了一个错误：PersistenceException: No Persistence provider for EntityManager named org.hibernate.dialect.Oracle10gDialect

我已经将 hibernate-3.3.2.jar 放在我的 lib 文件夹中，但不知何故 play 没有使用它。

有谁知道如何解决这个问题，所以我可以在游戏中使用 oracle！框架2.0？

# android - 片段与共享偏好

> ID：11153253
> 
> 赞同：0
> 
> 时间：2012-06-22T09:08:48.607
> 
> 标签：android, android-fragments, sharedpreferences

任何人都可以在android上区分片段和共享偏好吗？

因为，

现在我有一个包含编辑文本框和按钮的屏幕，如果我在给出正确输入后单击该按钮，它应该根据用户在同一屏幕上的文本框上的输入返回一些数据，结果值来自网络服务使用它（SOAP 方法）...

在这里我的问题是，我想在下一个屏幕上的 tabhost 选项卡上显示该答案...我要使用片段概念还是共享偏好概念？谁能帮我？

感谢您宝贵的时间......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T09:12:58.003

这些概念不相关。

SharedPreferences 用于以持久的方式保存数据。

片段是可重用的 UI 组件。

[http://developer.android.com/guide/components/fragments.html](http://developer.android.com/guide/components/fragments.html)

[http://developer.android.com/reference/android/content/SharedPreferences.html](http://developer.android.com/reference/android/content/SharedPreferences.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T09:15:46.940

> Shared Preference 和 Fragment 互不相关，两者完全不同。一个用于 UI 设计，另一个用于保存数据。
> 
> **通常，片段**是具有自己生命周期的一大块用户界面。如果这听起来很像 Activity，那是因为它很像 Activity。但是，Fragment 与 Activity 不同，Fragment 必须存在于 Activity 中。Fragment 不必每次实例化时都与同一个 Activity 配对，这给了它一些灵活性。和 Activity 一样，Fragment 不需要包含任何用户界面。
> 
> **SharedPreferences**类提供了一个通用框架，允许您保存和检索原始数据类型的持久键值对。您可以使用 SharedPreferences 保存任何原始数据：布尔值、浮点数、整数、长整数和字符串。此数据将在用户会话中持续存在（即使您的应用程序被终止）。
> 
> 您可以使用共享首选项来保存数据并在下一个屏幕活动中访问该数据，或者您可以使用 .putExtra() 将该结果字符串传递给意图。

# wso2 - 回复 onEvent 时消息交换中的空输出消息

> ID：11153254
> 
> 赞同：0
> 
> 时间：2012-06-22T09:08:51.110
> 
> 标签：wso2, bpel, apache-ode

我有以下简单的 bpel 过程：

1.  接收订单请求
2.  回复订单请求（实例化相关集 - 订单 ID）
3.  范围内带有事件处理程序。目前定义了一个事件（取消订单），我向其发送回复给客户。`<onEvent>`有一个相关集（再次是订单 ID），它与实例化的集相匹配。问题是在我回复 onEvent 之后，ODE 说消息交换中没有输出消息。

这是 onEvent 代码（已删除分配）：

```
<bpel:scope>
        <bpel:eventHandlers>
            <bpel:onEvent partnerLink="orderPlacementPL" operation="cancelOrder"
                          messageType="tns:cancelOrderReqMessage"
                          portType="tns:orderPlacementPT" variable="Input_CancelClientOrder"
                          messageExchange="CancelMex">
                <bpel:correlations>
                    <bpel:correlation set="OrderId_CS" initiate="no"/>
                </bpel:correlations>
                <bpel:scope name="Cancel Event Scope">
                    <bpel:sequence>
                        <bpel:assign name="Initialize client reply message">....</bpel:assign>
                        <bpel:reply partnerLink="orderPlacementPL" operation="cancelOrder"
                                    variable="Output_CancelClientOrder"
                                    portType="tns:orderPlacementPT"
                                    name="Send Reply for Cancel Operation"
                                    messageExchange="CancelMex"/>
                    </bpel:sequence>
                </bpel:scope>
            </bpel:onEvent>
        </bpel:eventHandlers>

        <bpel:sequence name="Event Loop - wait 2 min">
            <bpel:wait>
                <bpel:for>'PT2M'</bpel:for>
            </bpel:wait>
        </bpel:sequence>
    </bpel:scope> 
```

堆栈跟踪是：

```
ERROR -  Error processing response for MEX {MyRoleMex#hqejbhcnphr7dn78tn3hgb [Client hqejbhcnphr7dn78tn3hga] calling {http://orders}OrderPlacementService.cancelOrder(...)} {org.wso2.carbon.bpel.core.ode.integration.BPELProcessProxy}
java.lang.NullPointerException: Null message.
at org.wso2.carbon.bpel.core.ode.integration.utils.SOAPUtils.checkForNullValuesInResponse(SOAPUtils.java:397)
at org.wso2.carbon.bpel.core.ode.integration.utils.SOAPUtils.createSOAPResponse(SOAPUtils.java:70)
at org.wso2.carbon.bpel.core.ode.integration.BPELProcessProxy.onResponse(BPELProcessProxy.java:410)
at org.wso2.carbon.bpel.core.ode.integration.BPELProcessProxy.onAxisServiceInvoke(BPELProcessProxy.java:189)
at org.wso2.carbon.bpel.core.ode.integration.axis2.receivers.BPELMessageReceiver.handleInOutOperation(BPELMessageReceiver.java:100)
at org.wso2.carbon.bpel.core.ode.integration.axis2.receivers.BPELMessageReceiver.invokeBusinessLogic(BPELMessageReceiver.java:73)
at org.apache.axis2.receivers.AbstractMessageReceiver.receive(AbstractMessageReceiver.java:110)
at org.apache.axis2.engine.AxisEngine.receive(AxisEngine.java:181)
at org.apache.axis2.transport.http.HTTPTransportUtils.processHTTPPostRequest(HTTPTransportUtils.java:172)
at org.apache.axis2.transport.http.AxisServlet.doPost(AxisServlet.java:146)
at org.wso2.carbon.core.transports.CarbonServlet.doPost(CarbonServlet.java:199)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
at org.eclipse.equinox.http.servlet.internal.ServletRegistration.handleRequest(ServletRegistration.java:90)
at org.eclipse.equinox.http.servlet.internal.ProxyServlet.processAlias(ProxyServlet.java:111)
at org.eclipse.equinox.http.servlet.internal.ProxyServlet.service(ProxyServlet.java:67)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
at org.wso2.carbon.bridge.BridgeServlet.service(BridgeServlet.java:164)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:304)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:240)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:164)
at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:462)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:164)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:100)
at org.wso2.carbon.server.CarbonStuckThreadDetectionValve.invoke(CarbonStuckThreadDetectionValve.java:154)
at org.wso2.carbon.server.TomcatServer$1.invoke(TomcatServer.java:254)
at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:563)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:399)
at org.apache.coyote.http11.Http11NioProcessor.process(Http11NioProcessor.java:396)
at org.apache.coyote.http11.Http11NioProtocol$Http11ConnectionHandler.process(Http11NioProtocol.java:356)
at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1534)
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
at java.lang.Thread.run(Thread.java:662) 
```

# c# - 使用 const 字符串作为 ASP.net Webforms 控件的 ID

> ID：11153258
> 
> 赞同：2
> 
> 时间：2012-06-22T09:08:55.337
> 
> 标签：c#, asp.net, webforms

您知道，如果您使用的是中继器控件，则无法以通用方式访问控件（据我所知）。因此，我们尝试在 C# 中必须使用字符串的大多数情况下使用 const 字符串。

所以我用 const 字符串创建了一个类。它们定义中继器内控件的 ID 名称。这使得以比在代码中使用纯字符串更通用的方式访问控件成为可能。例子：

```
public class FormularRepeaterFieldIDs
{
    public const string RubrikLiteral = "BuchungRubrikLiteral";
    public const string RubrikDropDownList = "BuchungRubrikList";
    public const string RubrikIdHiddenField = "BuchungRubrikIdHidden";
} 
```

它可以实现这样的访问（当然，您可以为此制作一个更简单的访问包装器）：

```
 Literal rubrikLiteral = (Literal)e.Item.FindControl(TimeExpressHelper.FormularRepeaterFieldIDs.RubrikLiteral);
                rubrikLiteral.Visible = false; 
```

现在我也很高兴在 Webforms 前端代码中使用预定义的 ID。目前看起来是这样的：

```
<asp:Literal ID="BuchungRubrikLiteral" Text='<%#Eval("strRubrik")%>' runat="server" /> 
```

**有可能做这样的事情吗？**

```
<asp:Literal ID="<% FormularRepeaterFieldIDs.RubrikLiteral %>" Text='<%#Eval("strRubrik")%>' runat="server" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T08:32:22.243

您可能可以使用自定义[ExpressionBuilder](http://msdn.microsoft.com/en-us/library/system.web.compilation.expressionbuilder.aspx)来完成这项工作。就像是：

```
 <asp:Literal ID="<%$ Const:FormularRepeaterFieldIDs.BuchungRubrik" 
     Text='<%#Eval("strRubrik")%>' runat="server" /> 
```

使用 ExpressionBuilder`Reflection`和/或 a`CodeSnippetExpression`来读取值：

```
 class ConstExpressionBuilder : ExpressionBuilder {
       override bool SupportsEvaluate { get { return true; } }

       override CodeExpression GetCodeExpression(BoundPropertyEntry entry, ...) {
           return new CodeSnippetExpression(entry.Expression);
       }

       override object EvaluateExpression(BoundPropertyEntry entry, ...) {
           var splitExpression = entry.Expression.Split('.');
           var fieldName = splitExpression.Last();
           var typeName = entry.Expression.Substring(entry.Expression.Length - fieldName.Length - 1);
           var type = Type.GetType(typeName);
           return type.GetField(fieldName).GetValue(null);
       }
  } 
```

和一个 web.config 来注册它来处理`Const`前缀：

```
 <expressionBuilders>
     <add expressionPrefix="Const" type="ConstExpressionBuilder" />
  </expressionBuilders> 
```

或者，您可以利用现有的[ResourceExpressionBuilder](http://msdn.microsoft.com/en-us/library/system.web.compilation.resourceexpressionbuilder.aspx)，并让它们成为资源而不是常量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T10:52:35.077

You can try

```
<div runat="server" id="container">
<% 
   List<string> listOfIds = new List<string>{FormularRepeaterFieldIDs.RubrikLiteral};
   foreach(var i in listOfIds.Count)
   {
      var l = new label();
      l.ID = listOfIds[i];
      container.Controls.Add(l);
   }
%>
</div> 
```

# apache - .htaccess 重定向丢失查询字符串？

> ID：11153262
> 
> 赞同：0
> 
> 时间：2012-06-22T09:09:13.637
> 
> 标签：apache, .htaccess, redirect

我有一个看起来像这样的 .htaccess：

```
Options +FollowSymLinks
RewriteEngine on
RewriteCond %{HTTP_HOST} !^www\.
RewriteRule ^(.*)$ http://www.%{HTTP_HOST}/$1 [R=301,L]
RewriteRule ^([^.]+)/?$ index.php?query=$1 [L] 
```

我希望这将使所有非 www url 重定向到 www 版本，并在最后给出一个整洁的查询字符串。所以这些网址：

```
http://site.com/index.php?query=test/page
http://www.site.com/index.php?query=another/test/page 
```

都会重定向到：

```
http://www.site.com/test/page
http://www.site.com/another/test/page 
```

分别。

但是，一切都只是重定向到：

```
http://www.site.com 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T11:21:00.150

RewriteRule 忽略 url 中的查询字符串。因此，您需要按如下方式更改规则：

```
Options +FollowSymLinks
RewriteEngine on

RewriteCond %{HTTP_HOST} !^www\.
RewriteRule ^(.*)$ http://www.%{HTTP_HOST}/$1 [R=301,L,QSA]

RewriteCond %{HTTP_HOST} ^www\.
RewriteRule ^/index[.]php$ /%{QUERY_STRING} [L] 
```

确保在第一条规则中包含 QSA 标志

# php - base_convert() 函数的最大数量限制是多少？

> ID：11153264
> 
> 赞同：1
> 
> 时间：2012-06-22T09:09:16.220
> 
> 标签：php

我想使用 base_convert 函数将 60 位二进制数据转换为 Hex 代码，如下所示。但结果不正确。下面代码的输出是 4e08556312ffc00，但正确的输出是 4E08556312FFBFF。谁能告诉我为什么？60位对功能来说太大了吗？

```
echo "The beacon ID in Hexadecimal is".base_convert
         ("010011100000100001010101011000110001001011111111101111111111",2, 16); 
```

感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T09:49:09.837

我在[此处](https://stackoverflow.com/questions/5301034/how-to-generate-random-64-bit-value-as-decimal-string/5302533#5302533)对另一个问题的回答中发布了一个没有此类限制的基本转换函数的实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T09:15:03.137

根据[base_convert](http://www.php.net/manual/en/function.base-convert.php)和[浮点数](http://www.php.net/manual/en/language.types.float.php)文档，`base_convert`在大数上会丢失精度。

取而代之的是，您可以使用[`bin2hex`](http://php.net/manual/en/function.bin2hex.php)，它不受限制（此函数使用并返回字符串）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-08T10:59:12.387

我的测试显示超过 43 位的精度损失。

我使用默认设置在 Win XP base + easyphp 3.1.81 上工作。

我将此 base_convert 用于家谱应用程序，而 43 代的限制 - 有时 - 还不够。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-12T06:26:03.957

It is the larger of:

1.  **PHP_INT_MAX** and
2.  The maximum of the contiguous set of integers that can be expressed as a float.

Typical PHP implementations use IEEE 754 for implementing floating point numbers, which has a 53-bit significand, so the typical limit for 32-bit environments is 2⁵³ (`0x20000000000000`) and for 64-bit environments, the limit is 2⁶³-1 (`0x7fffffffffffffff`).

There’s a trivial solution if you have the PHP gmp extension ( [http://php.net/gmp](http://php.net/gmp) ):

```
$hexNumber = gmp_strval( gmp_init( $binNumber, 2 ), 16 ) ; 
```

If you have the bc extension ([http://php.net/bc](http://php.net/bc) ), my (free & open source) [WeirdoCustomDigits module](http://danorton.github.io/WeirdoCustomDigits/dox/) will do conversions with arbitrary bases and arbitrary digit characters, without limitation.

If you're simply converting between base 2 and base 16, as with your example, you can get by without bc or gmp. See the source in the WeirdoCustomDigits module for WeirdoCustomDigits::binFromHex() and WeirdoCustomDigits::hexFromBin().

# php - 如何在php MVC框架中使用ajax调用替换jcarousel滑块html

> ID：11153270
> 
> 赞同：0
> 
> 时间：2012-06-22T09:09:43.873
> 
> 标签：php, jquery, json

我的 php Web 应用程序中有两个 jcarousel 滑块，一个用于选择月份，另一个用于与该月相关的日期，我想使用 jquery ajax 来完成，无论我选择哪个月份，所有日期都应该出现在第二个滑块中，有什么办法请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T11:58:36.070

首先设置月份和日期基本html。

```
<ul id="months" class="jcarousel-skin">
    <li>Jan</li>
    <li>Feb</li>
    <li>Mar</li>
    <li>Apr</li>
    <li>May</li>
    <li>Jun</li>
    <li>Jul</li>
    <li>Aug</li>
    <li>Sep</li>
    <li>Oct</li>
    <li>Nov</li>
    <li>Dec</li>
</ul>

<ul id="dates" class="jcarousel-skin">

</ul> 
```

现在在 javascript 中设置月份的轮播和日期 ajax

```
$(document).ready(function(){
    $('#months').jcarousel();

    // Assuming you are going to load months' dates onclick
    $('#months > li').click(function(){
        $.ajax({
            url : 'your-server-script.php?month=' . $(this).text(),
            success : function(data){
                /* Return the dates as html in li tags from server
                    <li>1, Friday</li><li>2, Saturday</li> .... <li>30, whatever</li>
                   and put in the dates ul.
                   You can also pass json(or any other format) and create the html here and put it in.
                */
                $('#dates').html(data);

                // Now setup the dates carousel.
                $('#dates').jcarousel();
            }
        });
    });

}); 
```

希望这可以帮助。如果您有更多问题，请与 html 一起粘贴。

# android - 从可绘制文件夹中裁剪图像

> ID：11153271
> 
> 赞同：2
> 
> 时间：2012-06-22T09:09:46.740
> 
> 标签：android, crop, wallpaper

我正在使用墙纸应用程序。在此，我在可绘制文件夹中添加了一些图像并在 gridview 中显示。当用户选择一个时，我需要裁剪该图像并根据**android 默认壁纸设置**设置为壁纸。搜索了很多，但所有这些都包含来自 sdcard 的裁剪图像。请给我任何建议。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T09:18:51.757

试试这种方式：

```
Uri imgUri=Uri.parse("android.resource://your.package.name/"+R.drawable.image);
 Intent intent = new Intent("com.android.camera.action.CROP");  
        intent.setDataAndType(imgUri, "image/*");  
        intent.putExtra("crop", "true");  
        intent.putExtra("aspectX", 1);  
        intent.putExtra("aspectY", 1);  
        intent.putExtra("outputX", 80);  
        intent.putExtra("outputY", 80);  
        intent.putExtra("return-data", true);
        startActivityForResult(intent, 1); 
```

# objective-c - if语句在多个CALayer之间进行选择

> ID：11153272
> 
> 赞同：2
> 
> 时间：2012-06-22T09:09:53.760
> 
> 标签：objective-c, ios, if-statement, core-animation, calayer

我在 boxLayer 上有一个核心动画图像，我正在复制它，改变第二个（boxLayer2）的动作和位置，以便有人可以在 2 个之间进行选择。

我希望用户能够点击 boxLayer 的图像，而 boxLayer2 图像除了 boxLayer 移动之外什么都不做（除了接收触摸之外，我没有包含我的动画代码），反之亦然。

我无法让 if 语句起作用。我尝试了多种变体 self.layer == boxLayer 或 CALayer == boxlayer ... sublayer 是一个数组，所以它已经出来了。我知道我遗漏了一些东西的任何帮助/解释将不胜感激。

谢谢！

UIView *BounceView 在VC中声明

在 BounceView 中，我声明了 2 个 CALayers：boxlayer 和 boxlayer2

弹跳视图.m

```
- (id)initWithFrame:(CGRect)frame       
{
    self = [super initWithFrame:frame];
    if (self) {
        [self setBackgroundColor:[UIColor clearColor]];

        // Create the new layer object
        boxLayer = [[CALayer alloc] init];
        boxLayer2 = [[CALayer alloc] init];

        // Give it a size
        [boxLayer setBounds:CGRectMake(0.0, 0.0, 185.0, 85.0)];
        [boxLayer2 setBounds:CGRectMake(0.0, 0.0, 185.0, 85.0)];

        // Give it a location
        [boxLayer setPosition:CGPointMake(150.0, 140.0)];
        [boxLayer2 setPosition:CGPointMake(150.0, 540.0)];

        // Create a UIImage
        UIImage *layerImage = [UIImage imageNamed:@"error-label.png"];
        UIImage *layerImage2 = [UIImage imageNamed:@"error-label.png"];

        // Get the underlying CGImage
        CGImageRef image = [layerImage CGImage];
        CGImageRef image2 = [layerImage2 CGImage];

        // Put the CGImage on the layer
        [boxLayer setContents:(__bridge id)image];
        [boxLayer2 setContents:(__bridge id)image2];

        // Let the image resize (without changing the aspect ratio) 
        // to fill the contentRect
        [boxLayer setContentsGravity:kCAGravityResizeAspect];
        [boxLayer2 setContentsGravity:kCAGravityResizeAspect];

        // Make it a sublayer of the view's layer
        [[self layer] addSublayer:boxLayer];
        [[self layer] addSublayer:boxLayer2];

    }
    return self;
}

- (void)touchesBegan:(NSSet *)touches
           withEvent:(UIEvent *)event
{
  if (CAlayer == boxLayer)
  {
  // do something
  }

  else
  {
  // do something else
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T09:52:27.500

在我看来，您正试图知道用户在里面点击的哪一层开始了，这是您的问题。

# 如何找出点击了哪一层

[CALayer](http://developer.apple.com/library/ios/#DOCUMENTATION/GraphicsImaging/Reference/CALayer_class/Introduction/Introduction.html)有一个实例[`- (CALayer *)hitTest:(CGPoint)thePoint`](http://developer.apple.com/library/ios/#DOCUMENTATION/GraphicsImaging/Reference/CALayer_class/Introduction/Introduction.html#//apple_ref/occ/instm/CALayer/hitTest:)方法

> 返回包含指定点的层层次结构（包括其自身）中接收器的最远后代。

因此，要找出您点击的图层，您应该执行以下操作

```
- (void)touchesBegan:(NSSet *)touches
           withEvent:(UIEvent *)event {
    UITouch *anyTouch = [[event allTouches] anyObject];
    CGPoint pointInView = [anyTouch locationInView:self];

    // Now you can test what layer that was tapped ...
    if ([boxLayer hitTest:pointInView]) {
        // do something with boxLayer
    } 
    // the rest of your code
} 
```

`nil`这是有效的，因为如果该点在图层边界之外，hitTest 将返回。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T17:35:05.140

David Rönnqvist 的帖子告诉您如何在图层上使用 hitTest 来确定哪个图层被触摸。那应该行得通。不过，我对该方法的编码会略有不同。我会让我的视图层包含 boxLayer 和 boxLayer2 作为子层，然后将 hitTest 方法发送到父层。然后它将返回包含触摸的图层。

但是，如果您使用单独的视图，每个视图都有一个包含您的内容的层，它会简单得多。然后，您可以在每个视图上使用手势识别器，以及更高级别的 Cocoa Touch 代码而不是 CA 代码来管理点击。更清洁，更易于维护。

# emacs - 无法在 C++ 项目中的原型和实现之间切换

> ID：11153274
> 
> 赞同：1
> 
> 时间：2012-06-22T09:10:01.423
> 
> 标签：emacs, cedet, emacs-semantic

我曾经`semantic-analyze-proto-impl-toggle`在函数的 proto 和 impl 之间切换，但是当我使用此功能时，它总是什么都不做，除了说它找不到对应的实现，其他功能如名称完成是可以的。谁能帮我这个问题？而且我真的很想知道语义是否只解析当前缓冲区和包含路径中的头文件，而不解析其他实现文件。我的意思是当它试图找到一个函数的实现时，语义是否会解析项目中的所有文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T00:51:56.193

proto/impl 切换将在项目的所有文件中查找迄今为止已解析的符号。当源没有正确的包含并且您尝试在方法之间跳转时，它会遇到麻烦。有一个解释，这里的邮件列表上有一个 hacky 变通补丁：

[http://sourceforge.net/mailarchive/forum.php?thread_name=4FDBF890.8010505%40siege-engine.com&forum_name=cedet-devel](http://sourceforge.net/mailarchive/forum.php?thread_name=4FDBF890.8010505%40siege-engine.com&forum_name=cedet-devel)

# c# - 按添加顺序访问 DataGridView 行

> ID：11153277
> 
> 赞同：6
> 
> 时间：2012-06-22T09:10:13.810
> 
> 标签：c#, collections, .net-3.5, datagridview, row

我有一个 DataGridView，它在设置 States 属性时为其行着色。
States 是一个字符串，它表示一个以分号分隔的数字列表。

如果我收到`"0;1;2"`前三行将分别用紫色、绿色和红色着色。
当我点击列标题对数据网格进行排序时，问题就来了：颜色的应用方式相同。

例如 ：

```
Names|Labels  
Name1|Label1  
Name2|Label2  
Name3|Label3 
```

我收到`"0;1;2"`这意味着`"Purple;Green;Red"`：

```
Names|Labels  
Name1|Label1 => Purple  
Name2|Label2 => Green  
Name3|Label3 => Red 
```

我排序（降序）：

```
Names|Labels  
Name3|Label3 => Red  
Name2|Label2 => Green  
Name1|Label1 => Purple 
```

我收到`"3;4;5"`这意味着`"Yellow;Orange;Pink"`：

```
Names|Labels  
Name3|Label3 => Yellow  
Name2|Label2 => Orange  
Name1|Label1 => Pink 
```

但这不是我在等待的，我想要的是：

```
Names|Labels  
Name3|Label3 => Pink  
Name2|Label2 => Orange  
Name1|Label1 => Yellow 
```

这是我的代码：

```
protected String m_States;

public virtual String States
{
  get { return m_States; }

  set {
    m_States = value;
    if (m_bRunning)
    {
      UpdateColors();
    }
  }
}

private void UpdateColors()
{
  String[] sStates = new String[] { };
  if (m_States != null)
  {
    sStates = m_States.Split(m_sSeparators);

    int nState = 0;
    int nRowNumber = 0;
    foreach (System.Windows.Forms.DataGridViewRow row in Rows)
    {
      nState = int.Parse(sStates[nRowNumber]);

      if (nState < 0 || nState > m_Couleurs_Fond_Etats.Length)
      {
        nState = m_Couleurs_Fond_Etats.Length - 1;
      }
      row.DefaultCellStyle.BackColor = m_Couleurs_Fond_Etats[nState];
      row.DefaultCellStyle.ForeColor = m_Couleurs_Texte_Etats[nState];
      row.DefaultCellStyle.SelectionBackColor = m_Couleurs_Sel_Fond_Etats[nState];
      row.DefaultCellStyle.SelectionForeColor = m_Couleurs_Sel_Texte_Etats[nState];

      nState = 0;
      ++nRowNumber;
    }
  }
} 
```

没有办法按照在 DataGridView 中添加的顺序访问行吗？

PS：我第一次使用row.Index而不是nRowNumber，所以我认为问题来自于此，但显然，Rows集合被重新组织或者foreach根据rowIndexes解析它。

=====感谢[LarsTech的回答](https://stackoverflow.com/a/11157144/1407337)，这是我使用的解决方案=====

添加行后，我以这种方式标记它们：

```
foreach(System.Windows.Forms.DataGridViewRow row in Rows)
{
  row.Tag = row.Index;
} 
```

然后我可以使用这个标签作为行号：

```
private void UpdateColors()
{
  String[] sStates = new String[] { };
  if (m_States != null)
  {
    sStates = m_States.Split(m_sSeparators);

    int nState = 0;
    int nRowNumber = 0;
    foreach (System.Windows.Forms.DataGridViewRow row in Rows)
    {
      nRowNumber = Convert.ToInt32(row.Tag);
      if (nRowNumber >= 0 && nRowNumber < sEtats.Length)
      {
        nState = int.Parse(sStates[nRowNumber]);

        if (nState < 0 || nState > m_Couleurs_Fond_Etats.Length)
        {
          nState = m_Couleurs_Fond_Etats.Length - 1;
        }
        row.DefaultCellStyle.BackColor = m_Couleurs_Fond_Etats[nState];
        row.DefaultCellStyle.ForeColor = m_Couleurs_Texte_Etats[nState];
        row.DefaultCellStyle.SelectionBackColor = m_Couleurs_Sel_Fond_Etats[nState];
        row.DefaultCellStyle.SelectionForeColor = m_Couleurs_Sel_Texte_Etats[nState];

        nState = 0;
      }
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T13:30:14.030

您可以尝试使用行的`Tag`属性来放置行索引号。这就是我初始化 DataGridView 的方式：

```
dataGridView1.Rows.Add(3);
for (int i = 0; i < 3; i++) {
  dataGridView1.Rows[i].Tag = i;
  dataGridView1.Rows[i].Cells[0].Value = "Name " + i.ToString();
  dataGridView1.Rows[i].Cells[1].Value = "Label " + i.ToString();
} 
```

这是我的`UpdateColors`例程版本：

```
private void UpdateColors() {
  String[] sStates = new String[] { };
  if (m_States != null) {
    sStates = m_States.Split(';');
    for (int i = 0; i < sStates.Length;i++) {
      int nState = Convert.ToInt32(sStates[i]);
      foreach (DataGridViewRow row in dataGridView1.Rows) {
        int rowIndex = Convert.ToInt32(row.Tag);
        if (rowIndex == i) {
          row.DefaultCellStyle.BackColor = m_Couleurs_Fond_Etats[nState];
        }
      }
    }
  }
} 
```

我首先遍历您的拆分状态字符串以获取行索引并将实际值转换为颜色索引。然后我遍历行以找到我放置在属性中的匹配索引`Tag`属性。

这是一个仅使用一个循环的清理版本：

```
private void UpdateColors() {
  String[] sStates = new String[] { };
  if (m_States != null) {
    sStates = m_States.Split(';');
    foreach (DataGridViewRow row in dataGridView1.Rows) {
      int rowIndex = Convert.ToInt32(row.Tag);
      int colorIndex = Convert.ToInt32(sStates[rowIndex]);
      row.DefaultCellStyle.BackColor = m_Couleurs_Fond_Etats[colorIndex];
    }
  }
} 
```

显然需要错误检查。

# javascript - 亲子活动

> ID：11153279
> 
> 赞同：2
> 
> 时间：2012-06-22T09:10:18.450
> 
> 标签：javascript, jquery

我有一个 2 div 元素。一个是孩子，一个是父母，例如：

```
<div id="p">
  <div id="c">
  </div>
</div> 
```

div 附加了`parent`2 个事件`click`，`dblclick`并且子 div 附加了 1 个事件`click`。现在我的问题是当我点击`child div`父 div 点击事件时也执行了。我尝试了`e.stopPropagation();`但仍然是相同的行为。帮我 ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T09:12:09.253

你一定是试错了，因为[`stopPropagation`](http://api.jquery.com/event.stopPropagation/)应该在这里解决问题。确保在子元素处停止事件的传播：

```
$("#c").click(function (e) {
    e.stopPropagation(); //Will prevent event bubbling to #p
}); 
```

这是一个[工作示例](http://jsfiddle.net/8GuzJ/)。

* * *

上述情况的唯一例外是，如果您已将事件处理程序与该`live`方法绑定（您不应该这样做，因为`live`已弃用）。您无法停止事件的传播，`live`因为事件处理程序绑定到文档而不是元素，并且事件必须在执行之前一直传播到文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T09:26:34.480

除了使用之外，`stopPropagation`您还可以在处理事件之前检查条件（[事件委托](http://www.nczonline.net/blog/2009/06/30/event-delegation-in-javascript/)方法）。通过这种方式，您还可以使用事件处理程序（如果我是正确的，现在在 jQuery 中`live`替换为）。`on`看到[这个小提琴](http://jsfiddle.net/KooiInc/hkKLq/)

[**编辑**]：使用`bind`，您只需要一个处理程序，为`div#p`. 提供的 jsfiddle 会相应调整。

# jquery - Jquery - 如何将文本添加到上面 div 的文本框中？

> ID：11153285
> 
> 赞同：0
> 
> 时间：2012-06-22T09:10:35.087
> 
> 标签：jquery

当使用单击删除时，我正在尝试将文本添加到下面 div 中的隐藏文本框中...

html

```
<div class="documentRow">    
<div class="documentHeader">
    <b>Title:</b> 
     <input data-val="true" data-val-required="Required" id="EventDocuments_1__Title" name="EventDocuments[1].Title" style="width:100px" type="text" value="test.doc">   
</div>
<div class="documentDelete">
    <input data-val="true" data-val-required="The Delete field is required." id="EventDocuments_1__Delete" name="EventDocuments[1].Delete" type="hidden" value="False">
</div>
<div class="deleteDoc">
     <button class="button delDocButton ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only" role="button" aria-disabled="false"><span class="ui-button-text">Delete</span></button>
</div> 
```

查询：

```
$(".delDocButton").click(function() {
        $(this).parent().parent().toggle();
        $(this).parent().find(".documentDelete input").val("True");  
        return false;
    }); 
```

我在页面上有几个这样的“行”，所以我不能通过 id 引用文本框。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T09:13:22.947

问题是这一行：

```
$(this).parent().find(".documentDelete input").val("True"); 
```

`$(this).parent()`是按钮 ( `<div class="deleteDoc">`) 的直接父级，并且您的隐藏字段不在其中，因此不会出现`find`。

为了避免重复调用`parent()`我建议这样的事情：

```
$(".delDocButton").click(function() {
    var $container = $(this).parent().parent();
    $container.toggle();  
    $(".documentDelete input",$container).val("True");  
    return false;
}); 
```

现场示例：http: [//jsfiddle.net/SqHzU/](http://jsfiddle.net/SqHzU/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T09:21:26.177

你也会检查这个

[jsFiddle](http://jsfiddle.net/umairnoor84/hf4sx/)

希望它有用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T09:16:30.097

更换你的线路

`$(this).parent().find(".documentDelete input").val("True");`

有了这个

`$(this).parent().siblings(".documentDelete").find("input").val("True");`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T09:17:37.417

即使这样也应该有效：

```
 $(this).parent().find(".documentDelete").find('input').val("True"); 
```

# php - 尝试获取长期访问令牌时出现未知错误

> ID：11153295
> 
> 赞同：1
> 
> 时间：2012-06-22T09:11:17.053
> 
> 标签：php, facebook-page, facebook-access-token

我正在尝试使用以下代码为我的一个页面获取长期访问令牌：

```
$page_info = $facebook->api("/page-id?fields=access_token");

$args = array(
    "client_id" => $facebook->getAppId(),
    "client_secret" => $facebook->getAppSecret(),
    "grant_type" => "fb_exchange_token",
    "fb_exchange_token" => $page_info["access_token"]
);

$result = $facebook->api("/oauth/access_token", $args);
echo json_encode($result); 
```

...但我得到这个响应： {"error_code":1,"error_msg":"An unknown error occurred"}

如果我浏览到，我会得到相同的响应

```
https://graph.facebook.com/oauth/access_token?             
    client_id=APP_ID&
    client_secret=APP_SECRET&
    grant_type=fb_exchange_token&
    fb_exchange_token=EXISTING_ACCESS_TOKEN 
```

如[https://developers.facebook.com/roadmap/offline-access-removal/#page_access_token中所述](https://developers.facebook.com/roadmap/offline-access-removal/#page_access_token)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T09:58:46.327

如果我正确阅读了您的代码，您将页面传递`access_token`到该端点，这不是文档所说的 - 您需要将页面管理员的短期令牌交换`access_token`为长期令牌，并使用获取页面的长期令牌`access_token`

# geolocation - 在多个多边形中搜索点的最佳方法

> ID：11153296
> 
> 赞同：2
> 
> 时间：2012-06-22T09:11:18.380
> 
> 标签：geolocation, gis, geospatial

我需要将给定点（纬度，经度）与几个多边形进行匹配，以确定是否存在匹配。

最简单的方法是遍历每个多边形并应用多边形中的点检查算法，但这非常昂贵。

我所做的下一个优化是为每个多边形（上限、下限）定义一个边界矩形，并针对每个边界框迭代检查该点（与检查多边形中的所有点相比，比较少）。

还有其他可能的优化吗？绑定矩形点或 geohash 上的空间索引会有所帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T09:46:08.117

进一步优化：

边界框的想法很好。检查一个点是否在边界框中非常快。

如果您仍然需要更快的速度，您可以像这样进行更多的预计算：

1.  为每个 polgon 创建一个边界框。
2.  定义覆盖地图的相同大小的“图块”。
3.  对于每个图块，创建一个重叠的多边形列表。您可以通过首先检查边界框是否与图块重叠来做到这一点。如果是这样，您检查多边形是否与图块重叠。

搜索时，请执行以下操作：

1.  确定你所在的瓷砖。这是一个快速的操作。
2.  现在您有了潜在多边形的列表。
3.  对于每个多边形，检查该点是否在边界框中。
    如果是，请使用您提到的更昂贵的算法检查该点是否在多边形中。

我已经多次使用过这个算法，而且速度非常快。通过更改磁贴大小，您可以在内存占用和性能之间选择适当的平衡：

想想极端情况：

*   一个覆盖整个地图的巨大图块：
    您将获得地图中所有元素的列表，您必须检查所有边界框。

*   非常小的图块（对于每个国家只有一个多边形的地图为 1x1 米）：
    您将获得大量图块。所有的多边形将被分割成许多块，每个块只有一个多边形。但是，一旦您（快速）确定了该点在哪个图块中，几乎可以 100% 确定只有一个多边形需要检查。

你需要介于两者之间。如果您只是偶尔需要它，您可能希望选择低内存占用而不是性能。最佳切片大小还取决于多边形大小的同质性。所以，没有自动的方法来计算最佳的瓷砖大小，你只需要稍微调整一下，直到你做对了。

# objective-c - Objective-C：点击屏幕截图按钮时 iPad 崩溃

> ID：11153297
> 
> 赞同：2
> 
> 时间：2012-06-22T09:11:20.920
> 
> 标签：objective-c, ios, ipad, screenshot

好的，我正在制作一个着色应用程序，它有一个“保存”按钮，可以截取绘图所在视图的屏幕截图。

我有 6 张图片要上色。在介绍页面中有 6 个按钮，每个按钮都会将您链接到特定的着色页。

一切都运行良好，包括“保存”按钮，除了一个。所有着色视图都具有相同的内容和功能，但在一张图像中，每当我单击“保存”按钮时，它都会使 iPad 崩溃。

这是我的一些代码：

点击按钮：

```
 [self saveScreenshotToPhotosAlbum];

    camFlash = [[UIImageView alloc] initWithFrame:CGRectMake(0, 0, 1024, 768)];
    [camFlash setBackgroundColor:[UIColor whiteColor]];
    [camFlash setAlpha:0.0];
    [cbHolder addSubview:camFlash];
    [cbHolder bringSubviewToFront:camFlash];

    [UIView beginAnimations:@"Flash-On" context:NULL];
    [UIView setAnimationDuration:0.2];
    [UIView setAnimationRepeatAutoreverses:NO];
    [camFlash setAlpha:1.0];
    [UIView commitAnimations];

    NSString *soundPath = [[NSBundle mainBundle] pathForResource:@"flash" ofType:@"wav"];
    AVAudioPlayer *flashSFX = [[AVAudioPlayer alloc] initWithContentsOfURL:[NSURL fileURLWithPath:soundPath] error:NULL];
    flashSFX.volume = 0.5;
    flashSFX.numberOfLoops = 0;
    self->camFlashSFX = flashSFX;
    if ([flashSFX currentTime] != 0) [flashSFX setCurrentTime:0];
    [flashSFX play];

    [self performSelector:@selector(removeFlash) withObject:nil afterDelay:0.2]; 
```

移除闪光灯：

```
- (void) removeFlash
{
    [camFlash removeFromSuperview];
} 
```

对于屏幕截图：

```
- (UIImage*)captureView { 
    UIGraphicsBeginImageContext(CGSizeMake(1024, 768));    
    CGContextRef context = UIGraphicsGetCurrentContext();  
    [cbHolder.layer renderInContext:context];  
    UIImage *img = UIGraphicsGetImageFromCurrentImageContext();  
    UIGraphicsEndImageContext();  
    return img;
}

- (void)saveScreenshotToPhotosAlbum {
    UIImageWriteToSavedPhotosAlbum([self captureView], nil, nil, nil);
} 
```

这是一个用于显示着色页的按钮：

```
uc4 = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"tpUncolored1.png"]];
    [uc4 setUserInteractionEnabled:YES];
    [uc4 setFrame:CGRectMake(0, 0, 1024, 768)];
    [cbHolder addSubview:uc4];

    clrd4 = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"tpColored1.png"]];
    [clrd4 setUserInteractionEnabled:YES];
    [clrd4 setFrame:CGRectMake(0, 0, 1024, 768)];
    [cbHolder addSubview:clrd4];

    [UIView beginAnimations:@"fabe-out" context:NULL];
    [UIView setAnimationDuration:1.5];
    [clrd4 setAlpha:0.0];
    [UIView commitAnimations];

    [self performSelector:@selector(cb4) withObject:nil afterDelay:1.5]; 
```

我有这个错误：

线程 5：EXC_BAD_ACCESS（代码=1，地址=0xd9bbd40）

# git - 我想我不明白 git 分支

> ID：11153298
> 
> 赞同：3
> 
> 时间：2012-06-22T09:11:24.807
> 
> 标签：git, bitbucket

问候大家，

我一直在编写一个 bash 脚本作为一个小型夏季项目，以了解有关 UNIX 脚本和使用 git 的更多信息。

这是我第一次在git中使用分支，通常我只是坚持master。

`git log --graph`当我注意到我的“开发”分支似乎已与“主”合并时，我正在查看带有图形 () 的 git 日志。像这样的东西：

```
主人----1--------3----4----5----6----HEAD
开发\---2---/

```

但是提交 3 之后是在开发分支中完成的。这样做`git checkout master`并`git checkout develop`证明这是真的。

到底发生了什么？这就是所谓的快进吗？

**更新＃1：**

提交 1，实际上并不是我的仓库中的第一次提交，它是我在“master”上所做的最后一次提交

**更新#2：**

这是给出的图表`gitk --all`

```
                   标记“1.0-0”
                        |
主人 --*--*--*--*--*--*----2\
开发\1----3----4----5----6

```

**更新#3：**

我仔细查看`gitk`并发现直到提交 1 之前的所有提交都发生在“开发”分支和“主”分支中。

感谢 SimoneDemoGentili 指出我的错误使用`git checkout develop`

PS：提交 1 和 2 对我来说也是一个谜，因为提交 2 实际上是对提交 1 的修正（据我所知，我使用了这个[建议](http://nathanhoad.net/git-amend-your-last-commit)）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T11:04:27.543

## 分支机构

git 分支只是指向特定提交的可移动指针。他们自己的提交没有附加任何分支属性。如果提交是分支指针附加到的提交的祖先，Git 会显示属于分支的提交。

假设您有以下历史记录：

```
 4 <- A
     |\
     | \
     2  3 <- B
     | /
     |/
     1
     |
     0 
```

然后所有提交都在分支 A 上，因为所有提交都是提交 4 的祖先，分支 A 指向。但是分支 B 上只有 0、1 和 3，因为这些提交是提交 3 的历史。

## 快进

快进合并是一种合并，其中一个分支的分支指针可以简单地移动到新的提交而不会丢失历史记录。当目标提交是分支当前指向的提交的后继时，就是这种情况。在前面的示例中，分支 A 可以 FF-Merged 到分支 B，因为提交 4 是提交 3 的后继。在此合并之后，B 还希望 A 指向提交 4。以下历史记录显示了非 FF 合并的示例：

```
A -> 2  3 <- B
     | /
     |/
     1
     |
     0 
```

这里 B 不能移动到提交 2，因为那时提交 3 将退出历史记录。为了解决这个问题，必须在 2 和 3 之间创建真正的合并，导致以下历史记录：

```
 4 <- B
     |\
     | \
A -> 2  3
     | /
     |/
     1
     |
     0 
```

# computer-science - 通用图灵机示例

> ID：11153299
> 
> 赞同：4
> 
> 时间：2012-06-22T09:11:25.557
> 
> 标签：computer-science, turing-machines

我正在寻找一个使用二进制字母表的通用图灵机的解释良好的实现。特别是，我正在寻找一个带有解释的 UTM 的动作表。谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-23T05:45:25.330

您可能会发现这些感兴趣的链接：

1.  [麻省理工学院在 Scheme 中实现的 UTM 页面](http://web.mit.edu/manoli/turing/www/turing.html)
2.  [最短 UTM 实施竞赛](http://www.mathrix.org/experimentalAIT/TuringMachine.html)
3.  [用 C 语言编写的图灵机](http://www2.lns.mit.edu/~dsw/turing/turing.html)
4.  [用 Haskell 编写的图灵机](http://code.google.com/p/hs-turing-machine/)
5.  [UTM 的 Java 实现](https://github.com/thiyagaraj/universal-turing-machine/blob/master/src/TuringMachine.java)

我希望您发现这些链接足以使您朝着正确的方向前进。

# .net - 如何从类型化数据集中删除一行并将其保存到数据库中？

> ID：11153301
> 
> 赞同：2
> 
> 时间：2012-06-22T09:11:30.110
> 
> 标签：.net, database, sql-server-2008-r2, ado.net, dataset

我这样做是作为一个小项目来了解 .NET 4.0 和 SQL Server 2008 R2 中的断开连接和连接模型。

我有三张桌子：

```
Companies (PK CompanyID) 
Addresses (PK AddressID, FK CompanyID) 
ContactPersons (PK ContactPersonID, FK CompanyID) 
```

CompanyID 由用户手动分配。其他 ID 是自动生成的。公司与 ContactPerson 具有一对多的关系。我已将任何更改设置为级联。

我在 DataGridView 中显示公司中的所有记录，当单击一行时，ContactPersons 中的相应记录显示在第二个 DataGridView 中。

我已经成功地实现了更新和插入新记录，但是我在尝试删除行并将更改保存到数据库时完全失败了。

我是一个类型化的数据集。

如果我使用这个：

```
DataRow[] contactPersonRows = m_SoldaCompaniesFileDataSet.ContactPersons.Select("ContactPersonID = "
                                                  + this.m_CurrentContactPerson.ContactPersonID);

m_SoldaCompaniesFileDataSet.ContactPersons.Rows.Remove(contactPersonRows[0]); 
```

记录在 DataGridView 中正确显示，但以后不会保存在数据库中。

如果我使用这个：

```
DataRow row = m_SoldaCompaniesFileDataSet.ContactPersons.Rows.Find(this.m_CurrentContactPerson.ContactPersonID);
row.Delete(); 
```

记录已设置，但当我尝试刷新 DataGridView 时出现异常：DeletedRowInaccessibleException。自动生成的 dataset.design 文件中弹出异常。

从昨天开始，我几乎被困在这一点上。我在任何地方都找不到任何与我的问题相似的地方。我无法理解到底发生了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T11:14:27.097

我一直在做这样的 Linq-to-Data 集查询：

```
var dataRows_ContactPersons = from row in this.m_SoldaCompaniesFileDataSet.ContactPersons
                              where row.CompanyID == companyID
                              select new
                              {
                                   ContactPersonID = row.ContactPersonID,
                                   CompanyID = row.CompanyID,
                                   NameFirst = row.NameFirst,
                                   NameLast = row.NameLast,
                                   PhoneNumber = row.PhoneNumber,
                                   EmailAddress = row.EmailAddress,
                                   Position = row.Position
                              }; 
```

我花了很长时间才弄清楚我需要通过执行以下检查从 Linq 查询中排除已删除的行：

```
row.RowState != DataRowState.Deleted 
```

所以上面的代码是这样固定的：

```
var dataRows_ContactPersons = from row in this.m_SoldaCompaniesFileDataSet.ContactPersons
                              where row.RowState != DataRowState.Deleted && row.CompanyID == companyID
                              select new
                              {
                                   ContactPersonID = row.ContactPersonID,
                                   CompanyID = row.CompanyID,
                                   NameFirst = row.NameFirst,
                                   NameLast = row.NameLast,
                                   PhoneNumber = row.PhoneNumber,
                                   EmailAddress = row.EmailAddress,
                                   Position = row.Position
                              }; 
```

不再有 DeletedRowInaccessibleException :) 请注意，必须在代码中的任何地方执行检查行是否处于已删除状态。

# jquery - 加载其他数据后如何加载图形

> ID：11153303
> 
> 赞同：0
> 
> 时间：2012-06-22T09:11:34.180
> 
> 标签：jquery, ruby-on-rails-3, html, jquery-ui

**我正在使用导轨 3.2.1**

我的页面分为5个部分

**part-1 header
part-2 div 区域
part-3 图形部分
part-4 表格格式的数据
part-5 页脚**

现在我的问题是图表需要太多时间来上传。
由于此页面需要太多时间来加载。

请告诉我任何方法，以便**我的图表在最后加载**但其他数据将显示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T09:40:58.437

如果问题是图形数据下载时间过长，那么您需要通过 AJAX 调用单独下载它，而不是直接将其包含在页面中。就像是：

```
$.getJSON("/url/to/your/data", function(data){$.jqplot('chart1', data)}); 
```

...您必须通过`/url/to/your/data`提供您当前嵌入页面中的相同图形数据来支持服务器。该代码将开始下载，然后将图形数据与页面的其余部分分开呈现。

如果这导致 DOM 没有完全准备好（不知道为什么会这样），那么包装你的调用，以便它只在文档完全呈现时发生：

```
$(function(){
    $.getJSON("/url/to/your/data", function(data){$.jqplot('chart1', data)});
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T09:28:11.123

您可以做的第一件事是在条件为真时调用绘制图形的函数。例如：

```
(function isMyDataLoaded(){

    //if the table is rendered
    if($('#TableData').length==0){
         setTimeout(isMyDataLoaded,100);    
    }else{
          DrawGraphFunction();    
    }
 })(); 
```

注意：我不知道你的逻辑，所以你可以使用其他条件。

# iphone - XCode 4.1 项目在应用启动时显示空白视图

> ID：11153305
> 
> 赞同：1
> 
> 时间：2012-06-22T09:11:47.383
> 
> 标签：iphone, xcode, xcode4

我有一个以前在 Xcode 4.3.2 中开发的项目，但是当我尝试在使用 Xcode 4.1 的设备上运行它时，我得到一个空白屏幕，但我能够打印所有日志消息并且还能够点击断点。可能有什么问题？该项目还利用了一些第三方库。

谢谢

# android - 如何从 mySql 数据库中填充微调器

> ID：11153310
> 
> 赞同：0
> 
> 时间：2012-06-22T09:12:22.433
> 
> 标签：android, mysql

我如何填充这个，我的应用程序中有 2 个微调器，一个用于省，另一个用于城市，当我在省微调器中选择豪登省时，我希望我的第二个微调器显示约翰内斯堡、比勒陀利亚、百夫长，如果我在省中选择 KZN我想让我的第二个微调器展示马里茨堡和德班。

我使用 mySql 数据库，我有省表和市表。这是我的省表(idprovince,provincename)

```
1   Gauteng 
2   Free-State 
3   Limpopo 
4   Northen-Cape 
5   North-West 
6   Western-Cape 
7   Eastern-Cape 
8   Kwa-Zulu-Natal 
9   Mpumalanga 
```

这是我的城市表（idcity,cityname,province_idprovince）

```
1  Johannesburg    1 
2   pretoria    1 
3   Centurion   1 
4   Bloemfontein    2 
5   Welkom  2 
6   Polokwane   3 
7   Phalaborwa  3 
8   Potgiersrus 3 
9   Tzaneen 3 
10  Kimberley   4 
11  Upington    4 
12  Mafikeng    5 
13  Klerksdorp  5 
14  Mmabatho    5 
15  Potchefstroom   5 
16  Brits   5 
17  Cape-Town   6 
18  Stellenbosch    6 
19  George  6 
20  Saldhana-Bay    6 
21  Bisho   7 
22  Port-Elizabeth  7 
23  East-London 7 
24  Pietermaritzburg    8 
25  Durban  8 
26  Ulundi  8 
27  Richards-Bay    8 
28  Newcastle   8 
29  Nelspruit   9 
30  Witbank 9 
31  Middleburg  9 
32  Ermelo  9 
```

我会感谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T09:17:49.387

您应该按照一些教程来看看加载您的微调器，例如这个[http://www.dcpagesapps.com/developer-resources/android/21-android-tutorial-spinners?start=2](http://www.dcpagesapps.com/developer-resources/android/21-android-tutorial-spinners?start=2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T09:34:06.480

好的，那么你应该看看一些教程，在这样做之后获得微调器的基础知识

第一步：从数据库中获取数据并使用适配器将其设置为第一个微调器

第 2 步：在第一个微调器的 OnItemSelected 事件中，您还必须设置第二个适配器（根据所选项目从 db 获取数据并使用适配器将其设置为第二个微调器）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T09:39:14.183

这是一个例子。在这里，我使用 SAX 解析从服务器获取详细信息。这里 District_districtname 和 District_districtid 是数组列表，我在其中存储来自服务器的详细信息

```
Spinner sp1, sp2;
ArrayList<String> loc = new ArrayList<String>();
static ArrayList<String> mov = new ArrayList<String>();

ArrayAdapter<String> ad = new ArrayAdapter<String>(this,
            android.R.layout.simple_spinner_item, district_districtname);
    // apply the Adapter:
    sp1.setAdapter(ad);
    sp1.clearFocus();

    sp1.setOnItemSelectedListener(new OnItemSelectedListener() {

        public void onItemSelected(AdapterView<?> arg0, View arg1,
                int arg2, long arg3) {

            int pos = sp1.getSelectedItemPosition();
            selecteddistrict = district_districtname.get(pos);

            loc.clear();
            for (int i = 0; i < district_districtname.size(); i++) {

                if (district_districtname.get(i).equals(selecteddistrict)) {

                    districtid = district_districtid.get(i);
                    for (int j = 0; j < locality_localityname.size(); j++) {

                        if (locality_districtid.get(j).equals(districtid)) {

                            loc.add(locality_localityname.get(j));

                        }
                    }
                }
            }

            sp2 = (Spinner) findViewById(R.id.Spinner01);

    ArrayAdapter<String> ad2 = new ArrayAdapter<String>(this,
            android.R.layout.simple_spinner_item, loc);
    // apply the Adapter:
    sp2.setAdapter(ad2);

    sp2.setOnItemSelectedListener(new OnItemSelectedListener() {

        public void onItemSelected(AdapterView<?> arg0, View arg1,
                int arg2, long arg3) { 
```

}

# node.js - opa 1.01：node.js -> 错误：找不到模块“mongodb”

> ID：11153316
> 
> 赞同：0
> 
> 时间：2012-06-22T09:12:46.367
> 
> 标签：node.js, opa

我尝试使用新版本 1.0.1 编译我的 opa 项目。我现在正在使用：

```
node myApp.js 
```

运行服务器。我收到以下错误：

```
module.js:337
    throw new Error("Cannot find module '" + request + "'");
Error: Cannot find module 'mongodb' 
```

我是否需要安装 node.js 模块或其他东西才能使用 mongodb ？我的 mongodb 过去可以很好地与旧的本地后端配合使用。

我还尝试使用本机后端编译我的应用程序，并收到该消息：

```
Error: No implementations provided for the following modules:
MailMLRuntime referenced from /usr/lib/opa/stdlib/stdlib.qmlflat/stdlib.web.mail.smtp.client.opx/_build/cstdli
_2eweb_2email_2esmtp_2eclient.cmxa(Bsl_init_stdlib_2eweb_2email_2esmtp_2eclient) 
```

任何想法 ？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T10:23:20.563

当您使用 启动已编译的节点应用程序时`node myapp.js`，它将在您的 NODE_PATH 中查找节点模块。

但是，如果您使用 启动它`./myapp.js`，它将首先查看 Opa 安装文件夹，这样您就不必自己安装节点依赖项:)

# algorithm - 可以用少于 n-1 次连续乘法计算 2^n 吗？

> ID：11153321
> 
> 赞同：1
> 
> 时间：2012-06-22T09:12:57.990
> 
> 标签：algorithm, complexity-theory

我有一个问题与计算 2^n 的可能性有关，给定任何 n，小于 n-1 次连续乘法。通过避免执行 n-1 乘法的任务，我可以用来实现相同操作的最佳策略是什么？这可以在较小的乘法中完成吗？如果是，那么如何？

-谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-22T09:24:24.237

对于 (2^n) 和 (n>=0) 您可以使用按位移位：**(2^n) 是 (1 << n)**

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-22T09:15:53.433

是的 2^n 可以在 Log(n) 乘法中计算，这被称为[Exponentiation by squareing](http://en.wikipedia.org/wiki/Exponentiation_by_squaring)。

# java - Java Swing 和 Postgres 用户身份验证：打开新连接时关闭旧连接

> ID：11153322
> 
> 赞同：0
> 
> 时间：2012-06-22T09:13:02.703
> 
> 标签：java, postgresql, connection, singleton

我有一个 Java Swing 应用程序，它使用简单的单例模式访问 Postgres 数据库：

```
public class DatabaseConnection {
    private static final String uname = "*******";
    private static final String pword = "*******";
    private static final String url = "*******************************";

    Connection connection;
    // load jdbc driver
    public DatabaseConnection(){
        try{
            Class.forName("org.postgresql.Driver");
            establishConnection();
        } catch (ClassNotFoundException ce) {
            System.out.println("Could not load jdbc Driver: ");
            ce.printStackTrace();
        }
    }
    public Connection establishConnection() {
        // TODO Auto-generated method stub
        try{
            connection = DriverManager.getConnection(url, uname, pword);
        } catch (SQLException e){
            System.out.println("Could not connect to database: ");
            e.printStackTrace();
        }
        return connection;
    }
}

public class SingletonConnection {

    private static DatabaseConnection con;

    public SingletonConnection(){}

    public static DatabaseConnection instance(){

        assert con == null;
            con = new DatabaseConnection();
        return con;
    }
} 
```

这是我由 Pgadmin3 创建的用户表（因此丑陋的大写字母）：

```
CREATE TABLE "user"
(
  id serial NOT NULL,
  "userRoleId" integer NOT NULL,
  "employeeId" bigint NOT NULL,
  "subjectId" bigint NOT NULL,
  username text NOT NULL,
  cryptpwd text NOT NULL,
  "userStatusId" integer NOT NULL,
  md5pwd text NOT NULL,
  CONSTRAINT pk_user PRIMARY KEY (id),
  CONSTRAINT "subjectId" FOREIGN KEY ("subjectId")
      REFERENCES subject (id) MATCH FULL
      ON UPDATE RESTRICT ON DELETE RESTRICT DEFERRABLE INITIALLY IMMEDIATE,
  CONSTRAINT user_employee_id FOREIGN KEY ("employeeId")
      REFERENCES employee (id) MATCH FULL
      ON UPDATE RESTRICT ON DELETE RESTRICT DEFERRABLE INITIALLY IMMEDIATE,
  CONSTRAINT "user_userRole_id" FOREIGN KEY ("userRoleId")
      REFERENCES "userRole" (id) MATCH FULL
      ON UPDATE RESTRICT ON DELETE RESTRICT DEFERRABLE INITIALLY IMMEDIATE,
  CONSTRAINT "user_userStatus_id" FOREIGN KEY ("userStatusId")
      REFERENCES "userStatus" (id) MATCH FULL
      ON UPDATE RESTRICT ON DELETE RESTRICT DEFERRABLE INITIALLY IMMEDIATE,
  CONSTRAINT "unique_user_userName" UNIQUE (username)
) 
```

由于此应用程序将在本地网络中的许多机器上运行，我希望每个特定用户只有一个连接实例。也就是说，如果 userA 从一台机器登录，而 userA 稍后从另一台机器登录，则通知应该出现在两台机器上，第二次登录可以选择继续连接 - 在这种情况下，现有连接将被删除/丢失的。

我想我必须在我的用户表中添加一个新列（logged_on boolean）......在这种情况下，通过查找logged_on 的值并采取适当的行动来处理第二次登录。我的问题是，我如何才能关闭第一个连接？如何在数据库级别最多维护一个连接 - 每个用户？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T16:21:42.920

好的，这就是我正在做的事情。令人惊讶的是，我正在考虑与您提到的 Zamezela 类似的事情......我还没有让它工作，但我认为这应该工作。

我的用户表：

```
CREATE TABLE "user"
(
  id serial NOT NULL,
  "userRoleId" integer NOT NULL,
  "employeeId" bigint NOT NULL,
  "subjectId" bigint NOT NULL,
  username text NOT NULL,
  cryptpwd text NOT NULL,
  "userStatusId" integer NOT NULL,
  md5pwd text NOT NULL,
  "loggedIn" boolean NOT NULL DEFAULT false,
  CONSTRAINT pk_user PRIMARY KEY (id),
  CONSTRAINT "subjectId" FOREIGN KEY ("subjectId")
      REFERENCES subject (id) MATCH FULL
      ON UPDATE RESTRICT ON DELETE RESTRICT DEFERRABLE INITIALLY IMMEDIATE,
  CONSTRAINT user_employee_id FOREIGN KEY ("employeeId")
      REFERENCES employee (id) MATCH FULL
      ON UPDATE RESTRICT ON DELETE RESTRICT DEFERRABLE INITIALLY IMMEDIATE,
  CONSTRAINT "user_userRole_id" FOREIGN KEY ("userRoleId")
      REFERENCES "userRole" (id) MATCH FULL
      ON UPDATE RESTRICT ON DELETE RESTRICT DEFERRABLE INITIALLY IMMEDIATE,
  CONSTRAINT "user_userStatus_id" FOREIGN KEY ("userStatusId")
      REFERENCES "userStatus" (id) MATCH FULL
      ON UPDATE RESTRICT ON DELETE RESTRICT DEFERRABLE INITIALLY IMMEDIATE,
  CONSTRAINT "unique_user_userName" UNIQUE (username)
) 
```

我创建了一个记录每个用户登录的表。将有助于追踪用户活动：

```
CREATE TABLE "userLoginHistory"
(
  "userId" integer NOT NULL,
  _datetime timestamp without time zone NOT NULL,
  hostname text NOT NULL,
  "osUsername" text NOT NULL,
  id bigserial NOT NULL,
  CONSTRAINT "pk_userLoginHistory" PRIMARY KEY (id),
  CONSTRAINT "userLoginHistory_user_id" FOREIGN KEY ("userId")
      REFERENCES "user" (id) MATCH FULL
      ON UPDATE RESTRICT ON DELETE RESTRICT DEFERRABLE INITIALLY IMMEDIATE
) 
```

到目前为止，我现在有三个主要的存储功能......明天可能会添加到它们。要迟到了。

第一个涉及请求用户登录。这将返回用户 ID、角色、是否有人登录此用户帐户以及此用户是否处于活动状态：

```
create type userLoginRequestReturnType as
(
  userId integer, -- user.id
  userRoleId integer, -- user.roleId
  loggedIn boolean, -- user.loggedIn
  userActive boolean -- whether user is active
);

CREATE OR REPLACE FUNCTION "user_login_request"(usernameIn text, passwordIn text)
returns setof userLoginRequestReturnType as
$$
declare
    user_Id integer;
    user_RoleId integer;
    user_StatusId integer;
    user_loggedIn boolean;
    user_Active boolean;

    sql text;
begin
      user_Active = false;
      select into user_Id, user_RoleId, user_StatusId, user_loggedIn id, "userRoleId", "userStatusId", "loggedIn" from "user" where username = usernameIn and cryptpwd = crypt(passwordIn, cryptpwd);
      if (user_id > 0) then -- record found
    select into user_Active "user_is_active"(user_StatusId);
      else
    user_id = 0;
    user_RoleId = 0;
    user_loggedIn = false;
    user_Active = false;
      end if;
      sql =  'select ' || user_Id || ', ' || user_RoleId || ', ' || user_loggedIn || ', ' || user_Active ||';';
      return query execute sql;
end;
$$ language 'plpgsql'; 
```

这被传递到前端。如果 user_loggedIn 为 true，并且其他所有属性都支持成功登录，那么前端会通知用户存在一个现有的连接，以及是否继续（断开现有的连接）。如果它是假的，那么它只是继续（没有任何提示）这个函数：

```
CREATE OR REPLACE FUNCTION "user_login_complete"(userIdIN integer, hostnameIN text, osUsernameIN text)
returns bigint as
$$
declare
    currentTime timestamp without time zone;
    userLoginHistoryId bigint;
begin
      -- update user.loggedIn
      update "user" set "loggedIn" = true where id = userIdIN;
      -- insert into userLoginHistory
      currentTime = NOW()::timestamp without time zone;
      insert into "userLoginHistory" ("userId", _datetime, hostname, "osUsername") values (userIdIN, currentTime, hostnameIN, osUsernameIN);
      select into userLoginHistoryId currval('"userLoginHistory_id_seq"');
      return userLoginHistoryId;
end;
$$ language 'plpgsql'; 
```

userLoginHistoryId 存储在前端，因为我的 Java Swing 项目使用 MVC 架构，所以我的抽象模型类将在其构造函数中调用以下函数。我已听取您的建议，并将在每种方法中关闭连接。

```
-- function to check if the current logged in session is the last one recorded in database
-- to be run before each connection to the database as per userId
-- new userLoginHistoryId must be inserted into table userLoginHistory, and the id PK value stored in the front end
--
-- returns: true, if current session is the last session recorded in table userLoginHistory for this user_autosuggest_by_ID
--    : false, if another login session has been recorded.
-- MUST BE EXECUTED BEFORE EACH AND EVERY DATABASE TRANSACTION!!!!!
CREATE OR REPLACE FUNCTION "user_login_session_check"(userIdIN integer, userLoginHistoryIdIN bigint)
returns boolean as
$$
declare
    results boolean;
    userLoginHistoryId bigint;
begin
      results = true;
      select into userLoginHistoryId id from "userLoginHistory" where "userId" = userIdIN ORDER BY id DESC LIMIT 1;
      if (userLoginHistoryIdIN = userLoginHistoryId) then
    results = true;
      else
    results = false;
      end if;
end;
$$ language 'plpgsql'; 
```

明天将测试，希望它工作正常。请随意发表评论。

谢谢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T13:51:59.687

@greatkalu你的问题更深，很难实现，我会建议你一些方法：当用户登录时，你应该更新两个字段（last_access_timestamp，computer_id），每次访问数据库你都应该更新last_access_timestamp。computer_id 和 last_access_time 应该有效可能 1 小时或更短，具体取决于应用程序的使用。当其他人尝试使用相同的 user_id 登录时，如果 now() - 1 hour < last_access_timestamp 则不应授予该用户访问权限。computer_id 是从应用程序生成的，每台计算机都应该是唯一的，并且始终生成相同的 computer_id。

我希望这个能帮上忙

# sql-server-2008 - 自动重组和重建索引

> ID：11153329
> 
> 赞同：5
> 
> 时间：2012-06-22T09:13:28.637
> 
> 标签：sql-server-2008, sql-server-2008-r2

我正在使用 MS SQL 2008 R2，我想知道数据库中是否有任何功能允许以**特定时间间隔**为指定数据库**重建所有表中的所有索引，**例如每周重建一次。

 **请让我知道，谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T09:26:06.140

[维护计划。](http://msdn.microsoft.com/en-us/library/ms187658.aspx)

但是最好不要使用这些，而是​​使用根据需要（碎片级别）更智能地重建的东西，例如[Ola Hallengren 的 SQL Server 索引和统计维护脚本](http://ola.hallengren.com/sql-server-index-and-statistics-maintenance.html)**

# c - 在 time.h 中找不到 timespec

> ID：11153334
> 
> 赞同：18
> 
> 时间：2012-06-22T09:13:42.783
> 
> 标签：c, struct

我必须将应用程序从 C++ 重写为 C。我在 Ubuntu 12.04 上使用 gcc 和 Eclipse。这样做我遇到了这个错误

```
../src/TTNoddy.c: In function ‘main’:
../src/TTNoddy.c:16:2: error: unknown type name ‘timespec’ 
```

这是我重现问题的代码片段

```
#include <time.h>

int main(void) {

    timespec TS;
    TS.tv_nsec = 1;

    return 0;
} 
```

我在这里感到困惑 - 我是一名 C++ 编码员，在我的生活中从未编写过纯 C 应用程序，但手册页`clock_gettime`清楚地表明在我包含在这里`timespec`的头文件中找到了它。`time.h`我错过了什么？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-06-22T09:16:51.933

timespec 是一个`struct`，你需要明确地告诉编译器。如果您仔细阅读手册页，您会看到它是这样说明的。

这应该有效：

```
#include <time.h>

int main(void) {
    struct timespec TS;
    TS.tv_nsec = 1;

    return 0;
} 
```

**附加说明**：如果已将其定义为`typedef struct`，则无需`struct`手动添加部件。但是，您应该假设大多数/所有纯 C 结构都没有定义为`typedef`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-22T09:16:10.247

它不应该只是 timespec，因为 timespec 是一个结构。应该是`struct timespec`。请相应地修改您的代码。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-11-08T10:37:38.547

尝试在**Visual Studio 2015**下编译工作项目时出现此错误。

解决方案是添加`HAVE_STRUCT_TIMESPEC`到预处理器定义中。

**通过 GUI：**项目属性 (pan) > 属性页 (icon) > 配置属性 > C/C++ > 预处理器 > 预处理器定义 > 编辑 > 添加`HAVE_STRUCT_TIMESPEC`

**或手动：**`<PreprocessorDefinitions>`编辑每个项目文件并用以下内容替换（每个文件可以有几个）的每个实例：

```
<PreprocessorDefinitions>HAVE_STRUCT_TIMESPEC;WIN32;__GNU_LIBRARY__;_DEBUG;_CONSOLE;_CRT_SECURE_NO_WARNINGS;%(PreprocessorDefinitions)</PreprocessorDefinitions> 
```

*[注意：我在 Github issue 的某个地方](https://github.com/libusb/libusb/issues/63)找到了这个答案，所以我把它贴在这里。*

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-03-18T06:13:22.223

这个问题给了我一段时间的问题，我最终做的是在我的代码中定义*struct timespec 。*（直接从 man [nanosleep](http://man7.org/linux/man-pages/man2/nanosleep.2.html)复制过来）

```
#include <time.h>

struct timespec {
    time_t tv_sec;        /* seconds */
    long   tv_nsec;       /* nanoseconds */
};

int main(void) {
    struct timespec TS;
    TS.tv_nsec = 1;

    return 0;
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-09-18T15:56:48.980

我知道这是一个老问题，但从 gcc 6.3 升级到 7.1 后我遇到了同样的问题。查看更改后，您必须定义 _GNU_SOURCE 以包含 struct_timespec.h。

# css - 垂直对齐文本mac和PC

> ID：11153336
> 
> 赞同：3
> 
> 时间：2012-06-22T09:13:50.640
> 
> 标签：css, fonts

我试图将一些符号垂直居中在一个盒子里。但我无法让符号在 OSX 和 Windows 中垂直对齐

这是我为演示该问题而制作的一个非常简单的示例 [http://dabblet.com/gist/2971548](http://dabblet.com/gist/2971548)

你会注意到 x 在 windows 中垂直居中，但在 OS X 上没有。如何解决这个问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-22T18:08:08.947

您在 Mac OS X 和 Windows 中看到的差异是因为使用了两种不同的字体，并且这些特定符号相对于基线处于不同的高度。垂直居中使*字体*居中，而不仅仅是字符串中的字符。

您的 CSS 字体堆栈指定“Helvetica Neue、Helvetica、Arial、sans-serif”。在 Mac OS X 下，将使用 Helvetica Neue。在 Windows 下，Helvetica Neue （通常）不存在，甚至普通的 Helvetica 也不存在，因此几乎可以肯定使用 Arial。在没有这些字体中的任何一种可用的其他平台上，您仍然会得到不同的结果。

以下链接图形显示了两种字体叠加的符号，设置为公共基线。Helvetica Neue 是红色的；Arial 是绿色的。你可以很清楚地看到，Helvetica Neue 中的符号比 Arial 中的符号要低很多：

[加号比较](http://imgur.com/Jsmw6)

[乘法符号的比较](http://imgur.com/YIgtm)

最好的解决方法是使用@font-face 字体来确保在两个（所有）平台上使用完全相同的字体。有许多免费和商业服务提供字体数据来做到这一点。我将由您自行搜索并确定最适合您的特定应用的方法。

# windows - 批处理脚本循环以检查多个参数

> ID：11153339
> 
> 赞同：2
> 
> 时间：2012-06-22T09:13:54.120
> 
> 标签：windows, batch-file, dos

好的，我一直在玩这个，但无法让它为每个参数运行命令。

批处理文件运行方式

```
test.bat /r /a /c 
```

完整的批次代码

```
@echo on
SETLOCAL ENABLEEXTENSIONS
SETLOCAL ENABLEDELAYEDEXPANSION

:checkloop
set argtoken=1
FOR /F "Tokens=* delims=" %%G IN ("%*") DO (call :argcheck %%G)
pause
GOTO:END

:argcheck
if /i "%1"=="/r" set windows=1
if /i "%1"=="/a" set active=1
goto:eof

:end 
```

"%*" 显示所有参数，例如

```
/r /a /c 
```

但是由于某种原因，无论我尝试什么，我都无法让 for 循环分解不同的参数并`:argcheck`为每个参数运行。

更新：对于任何对这里感兴趣的人来说，我最终都会这样做。我在几个不同的脚本中实现它，它的工作令人惊叹。只需将它放在带有调用函数和“％​​”的脚本中的某个位置，你应该会很好。:) 如果您有任何问题，请发布。

```
@echo off
SETLOCAL ENABLEEXTENSIONS
SETLOCAL ENABLEDELAYEDEXPANSION

call:ArgumentCheck %*
echo %DebugMode%
echo %RestartAfterInstall%
pause
goto:eof

:ArgumentCheck
if "%~1" NEQ "" (
    if /i "%1"=="/r" SET DebugMode=Yes & GOTO:ArgumentCheck_Shift
    if /i "%1"=="/a" SET RestartAfterInstall=Yes & GOTO:ArgumentCheck_Shift
    SET ArgumentCheck_Help=Yes
    :ArgumentCheck_Shift
        SHIFT
        goto :ArgumentCheck
)
If "%ArgumentCheck_Help%"=="Yes" (
    Echo An invalid argument has been passed, currently this script only supports
    ECHO /r /a arguments. The script will continue with the arguments 
    ECHO you passed that is supported.
)
GOTO:EOF
:end 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-22T09:37:37.410

原因是 FOR/F 会将一行拆分为固定数量的令牌，名为 %%A、%%B、%%...（此处%%A 是第一个命名的令牌）。
但是当你使用空`delims=`时，即使这也行不通。

```
FOR /F "tokens=1-5 delims= " %%A in ("%*") do (
  echo %%A, %%B, %%C, %%D, %%E
) 
```

这会将您的行拆分为令牌，但它甚至会将令牌拆分为

```
One "two and three" 
```

输出：

```
One, "two, and, three", 
```

它更容易使用`SHIFT`和循环。

```
:loop
if "%~1" NEQ "" (
  call :argcheck
  SHIFT
  goto :loop
) 
```

# visual-studio-2010 - 从 Visual Studio 2010 应用程序连接到 mongos 路由器

> ID：11153340
> 
> 赞同：0
> 
> 时间：2012-06-22T09:14:03.150
> 
> 标签：visual-studio-2010, connection-string, mongodb, mongo-shell

我对 MongoDB 有点陌生，这可能是一个愚蠢的问题，但我正在尝试建立一个分片集群。我有两个 mongods 在两台不同的机器上运行，比如 A 和 B，分别在端口 10000 和 20000 上。

在机器 A 本身上，我也配置了 mongos（在端口 27019 上）并在其上添加了上述两个分片。我的块集合也使用正确的键进行分片。我知道如何从 mongos shell 访问数据库..但是我有一个 ASP.NET 应用程序，我想连接到 mongos..

在分片之前，当我在一台机器上的默认端口上只有一个数据库时，我在应用程序中使用了这个连接字符串：

```
string connectionString = "mongodb://localhost:27017"; 
```

现在我想连接到“mongos”..类似于：

```
string connectionString = "mongos://localhost:27019"; 
```

我试过了：`"mongodb://localhost:27019"`; 但它不起作用，这实际上很好，因为我“知道”那里没有 mongod！

我该怎么做？还是我在这里错过了一个核心概念？

提前致谢 ：）

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T12:32:51.477

连接 mongodb 或 mongos 没有区别。它将是相同的连接字符串，因为驱动程序不关心它是连接到 mongod 还是 mongos。正如您提到的那样，您尝试过它，请确保您正确识别了主机和端口。

# java - Java-Scanner 不适用于 nextByte()

> ID：11153341
> 
> 赞同：4
> 
> 时间：2012-06-22T09:14:04.570
> 
> 标签：java

```
Scanner Sc = new Scanner(new File("Input.bin"));
String s = Sc.nextLine();
fsize = Integer.parseInt(s); // Reads 4

s = Sc.nextLine();
int mapSize = Integer.parseInt(s);     // Reads 3 
for (int i = 0; i < mapSize; i++)
{
    byte value = 0;
    value = Sc.nextByte();  // Here it is throwing the exception it should have
                            // print the ascii of 'b' which is 98????

    String key = Sc.nextLine();
    key = key.trim();

    dcMap.put(key, (char)value);
 // System.out.println(key + " " + (char)value);
} 
```

*Input.bin*文件内容：

```
4
3
b 0
c 10
a 11 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T09:55:10.257

`java.util.Scanner`用于扫描*文本*。

因此，当您调用 时`Scanner#nextByte()`，它真正期望找到的是数字的文本表示。例如，如果那里有“98”而不是“b”，它会将 98 读入该字节变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T10:16:43.037

`Scanner`用于解析**文本**，该[`Scanner#nextByte()`](http://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html#nextByte%28%29)方法尝试匹配由数字（有符号或无符号）组成的输入，以将其转换为等效的单字节值。

**不是相反，它不会读取一个字母并返回他的字节值。**

如果您想知道 Scanner 尝试匹配的内容，请查看方法`hasNextByte()`（检查是否可以读取字节）。它尝试匹配此模式：

> "(([-+]?(((((?i)[0123456789]|\p{javaDigit})++)|(\p{javaDigit}&&[^0]?((?i)[0123456789] |\p{javaDigit})?(\ ((?i)[0123456789]|\p{javaDigit})((?i)[0123456789]|\p{javaDigit})((?i)[0123456789]|\ p{javaDigit}))+)))))|(((((?i)[0123456789]|\p{javaDigit})++)|(\p{javaDigit}&&[^0]?((? i)[0123456789]|\p{javaDigit})?(\ ((?i)[0123456789]|\p{javaDigit})((?i)[0123456789]|\p{javaDigit})((?i) [0123456789]|\p{javaDigit}))+)))|(\Q-\E((((?i)[0123456789]|\p{javaDigit})++)|(\p{javaDigit}&& [^0]?((?i)[0123456789]|\p{javaDigit})?(\((?i)[0123456789]|\p{javaDigit})((?i)[0123456789]|\p{ javaDigit})((?i)[0123456789]|\p{javaDigit}))+)))"

所以你在那里看到它只寻找数字。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-22T09:47:12.140

nextByte 的 JavaDoc 说：

> 如果下一个标记与上面定义的整数正则表达式匹配，则该标记被转换为字节值

所以它期望一个整数标记作为一个字符串，然后将其转换为一个字节。尝试使用 next() 方法来获取作为字符串的令牌。然后，您可以自己将字符转换为字节。

# html - CSS中的背景透明度

> ID：11153342
> 
> 赞同：2
> 
> 时间：2012-06-22T09:14:08.397
> 
> 标签：html, css, background

我只需要黑色 div 的背景透明。但它甚至适用于标签中的按钮。

这是我的链接 [http://jsfiddle.net/rCGJH/](http://jsfiddle.net/rCGJH/)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-22T09:17:23.007

使用在那里设置不透明度的 RGBa（带有 RGB 后备）颜色。这只会做背景 - [http://jsfiddle.net/spacebeers/rCGJH/13/](http://jsfiddle.net/spacebeers/rCGJH/13/)

```
/* Fallback for web browsers that doesn't support RGBa */
background: rgb(0, 0, 0);
/* RGBa with 0.5 opacity */
background: rgba(0, 0, 0, 0.5); 
```

否则，只需使用在那里设置不透明度的图像。这将涵盖所有浏览器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-21T16:24:53.233

```
background-color:rgba(255,0,0,0.5); 
```

# vim - 在 vi/vim 编辑器中从文件中删除几个选定的字符

> ID：11153343
> 
> 赞同：2
> 
> 时间：2012-06-22T09:14:14.403
> 
> 标签：vim, command, vi

下面是删除`N`vi 中第一个字符的命令：

```
:%s/^.\{N}//g 
```

但是，我不明白 ; 的含义`^.\{N}`。任何人都可以逐个解释*每个字符*的含义吗？
如何扩展此命令以从行中删除中间字符？

> **例如**从给定的行范围中删除第 4 到第 50 个字符

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T09:53:08.433

您可以将特定列与**[`\%c`](http://vimdoc.sourceforge.net/htmldoc/pattern.html#%2f%5c%25c)**或匹配**[`\%v`](http://vimdoc.sourceforge.net/htmldoc/pattern.html#%2f%5c%25v)**

删除第 4 到第 50 列：

```
 :%s/\%4c.\{-}\(\ze\%50c\|$\)// 
```

仅删除 IFF 有第 50 列：

```
 :%s/\%4c.\{-}\ze\%50c// 
```

要使用虚拟列（例如，如果您使用制表位则很方便）：

```
 :%s/\%4v.\{-}\ze\%50v// 
```

哦，

*   `.\{-}`是零个或多个字符的非贪婪匹配。
*   `\ze`是*匹配结束*指令，这会在第 50 列停止匹配

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T09:44:54.877

`^`是起点锚点；`.`是通用匹配，`{N}`重复上一次匹配 N 次。

要删除第 4 到第 50 个字符，请使用`:%s/^\(.\{4}\).\{46}/\1/g`.

但是，使用矩形选择模式可能更容易：从普通模式，移动到起始位置，然后点击`Ctrl+V`，您可以通过移动光标来创建矩形选择。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T09:18:18.940

这是正则表达式部分解释

`^`是行首锚点。

`.`匹配任何字符。

`N`表示将匹配前一个标记的字符数

`{}`用于对计数进行分组。例如，您可以将其用作`{1, 9}`

所以它说，`From the beginning of the line, match N characters`剩下的就是 VIM 的东西。

# c# - 如何从后面的代码中将 sql 选择的结果分配给标签？

> ID：11153346
> 
> 赞同：1
> 
> 时间：2012-06-22T09:14:25.567
> 
> 标签：c#, asp.net, sql

我想在标签中显示结果，我写了一个查询，通过它我得到一些记录，我想根据名称分配这些记录。

我有 5 个标签：A、B、C、D、E 在这些标签中我想显示记录。

询问：

```
select s.Name, count(1)as Records from tbl_Case tc
inner join tbl_subcase ts on ts.id = tc.Id
inner join tbl_supercase tsc on tsc.id = tc.supercaseid
inner join course c on c.id = b.courseid
where s.isvalid = 1 group by s.Name 
```

从查询中假设我得到 A = 4, B = 10, c = 2, E= 100 并且我没有得到 D 的记录。所以我想在标签中显示为 4 条记录、10 条记录、2 条记录、否找到的记录，100 条记录。

请有人告诉我如何从代码背后分配标签中的记录。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T09:25:00.527

```
lblA.Text = lblB.Text = ... = "No records found";
using (var con = new SqlConnection("Data Source=myServerAddress;" +
        "Initial Catalog=myDataBase;User Id=myUsername;Password=myPassword;"))
{
    con.Open();
    var com = con.CreateCommand();
    com.CommandType = CommandType.Text;
    com.CommandText = @"
        select s.Name, count(1)as Records from tbl_Case tc
        inner join tbl_subcase ts on ts.id = tc.Id
        inner join tbl_supercase tsc on tsc.id = tc.supercaseid
        inner join course c on c.id = b.courseid
        where s.isvalid = 1 group by s.Name";
    using (var read = com.ExecuteReader())
    {
        while (read.Read())
        {
            if (read["Name"] as string == "A")
                lblA.Text = Convert.ToString(read["tc"]);
            else if (read["Name"] as string == "B")
                lblA.Text = Convert.ToString(read["tc"]);
            ...
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T09:27:57.660

您是说您想知道如何将代码中的标签控件 ID 与查询返回的名称相匹配。如果是这样，您可以使用

```
Page.FindControl() 
```

或者

```
Control.FindControl() 
```

在您遍历返回的数据时匹配正确的控件。您将需要添加一些额外的代码来处理丢失的记录（即示例中的 D）。您后面的代码需要知道可能有多少记录（即，可能是一个简单的 for 循环来迭代所需的次数）。

[http://msdn.microsoft.com/en-us/library/31hxzsdw.aspx](http://msdn.microsoft.com/en-us/library/31hxzsdw.aspx)

# iphone - 将数据附加到 NSDictionary

> ID：11153347
> 
> 赞同：0
> 
> 时间：2012-06-22T09:14:28.370
> 
> 标签：iphone, objective-c, ios, xcode, ipad

我的应用程序是 SplitView 类型，我正在使用`UITableView`它来显示网站的名称。在`didSelectRowAtIndexPath`方法中，我使用以下代码行::

```
dateString = [formatter stringFromDate:[NSDate date]];
dict = [[NSDictionary alloc] init];
dict = [NSDictionary dictionaryWithObjectsAndKeys: urlString, dateString, nil];

[history addObject:dict];

NSLog(@"dateString: %@", dateString); //will let you know if it's nil or not
NSLog(@"urlString : %@", [dict objectForKey:dateString]);

NSString *docDir = [NSHomeDirectory() stringByAppendingPathComponent:@"Documents"];
NSLog(@"docDir is yoyo :: %@", docDir);
NSString *spaceFilePath = [docDir stringByAppendingPathComponent:@"space.txt"];
[history writeToFile:spaceFilePath atomically: TRUE]; 
```

我正在尝试将访问过的网站的网址与时间戳一起添加到`NSDictionary`“dict”中。我已经在`viewDidLoad`方法中初始化了格式化程序。History 是一个存储字典列表的数组。

我在`viewDidLoad`方法中使用了以下代码行：

```
formatter = [[NSDateFormatter alloc] init];
[formatter setDateFormat:@"yyyy-MM-dd HH:mm:ss"]; 
```

我想将访问的新站点的名称附加到已经存在的文件 space.txt 中。

但是，只有一个名称出现（最后访问的站点的 url）。如何将新访问的站点名称附加到我已经存在的文件 space.txt 中？我无法解决这个问题。

谢谢并恭祝安康。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T09:48:45.057

您正在创建的对象（“dict”）每次都不同。仅仅意味着您在字典中添加选定的详细信息并编写它。因此您无法看到之前保存的详细信息。检查以下代码以将新访问的站点名称附加到我已经存在的文件 space.txt 中。

```
dateString = [formatter stringFromDate:[NSDate date]];

NSString *docDir = [NSHomeDirectory() stringByAppendingPathComponent:@"Documents"];
NSString *spaceFilePath = [docDir stringByAppendingPathComponent:@"space.txt"];

if ([[NSFileManager defaultManager] fileExistsAtPath:spaceFilePath]) {
    NSMutableDictionary *appendDict = [[NSMutableDictionary alloc] initWithContentsOfFile:spaceFilePath];
    [appendDict setObject:urlString forKey:dateString];
    [appendDict writeToFile:spaceFilePath atomically: TRUE];  
    [appendDict release];
} else {
    NSMutableDictionary *appendDict = [[NSMutableDictionary alloc] initWithObjectsAndKeys:urlString, dateString, nil];
    [appendDict writeToFile:spaceFilePath atomically: TRUE];  
    [appendDict release];
} 
```

我认为这很有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T09:20:45.830

使用 NSMutableDictionary（而不是 NSDictionary）来拥有一个可变的字典（= 可以修改）。

* * *

*附录*：请注意，您的行`dict = [[NSDictionary alloc] init];`完全没用，因为您在下一行重新影响了变量“dict”。这就像你做了类似的事情：`int a = 5;`后跟`a=8`，当然之前变量中的值被新的值替换，并且之前的值（你`[[NSDictionary alloc] init]`在你的 cas 中）丢失了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T09:57:13.913

你也可以使用你的代码。请交叉检查您是否在 viewDidLoad 中分配了“历史”对象。如果没有，请做出来。

# jquery - 我需要在同一个 html 中使用两个不同版本的 jquery

> ID：11153348
> 
> 赞同：-5
> 
> 时间：2012-06-22T09:14:29.123
> 
> 标签：jquery, html

```
<script type="text/javascript" src="lib/jquery-1.3.2.min.js"></script>

<script type="text/javascript" src="lib/jquery.tools.js"></script>

<script type="text/javascript" src="js/jquery-1.4.min.js"></script>

<script type="text/javascript" src="js/jquery.easing.min.js"></script> 
```

我只能执行两个之一。我不明白任何 jquery 只能复制和使用。但在这种情况下，我需要同时使用这两个。

我能怎么做？请帮忙

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T09:16:21.120

只需使用最新的库。它将向后兼容。

```
<script type="text/javascript" src="js/jquery-1.4.min.js"></script>
<script type="text/javascript" src="lib/jquery.tools.js"></script>
<script type="text/javascript" src="js/jquery.easing.min.js"></script> 
```

更好的是，在这里下载最新版本：

[http://docs.jquery.com/Downloading_jQuery](http://docs.jquery.com/Downloading_jQuery)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T09:38:13.133

尝试类似的事情....

```
<script type="text/javascript" src="http://code.jquery.com/jquery-1.3.2.min.js"></script>
<script>
var jQ3=jQuery.noConflict();
</script>
<script type="text/javascript" src="http://code.jquery.com/jquery-1.4.min.js"></script>
<script>
var jQ4=jQuery.noConflict();
</script>
<script>
jQ3(function($){
    alert($.fn.jquery + ' - jQuery - 1.3.2')    
});
jQ4(function($){
    alert($.fn.jquery + ' - jQuery - 1.4')  
});
</script> 
```

# oracle11g - 具有聚合函数的函数问题 (ORACLE)

> ID：11153349
> 
> 赞同：0
> 
> 时间：2012-06-22T09:14:31.953
> 
> 标签：oracle11g

**这是关于 ORACLE**

我有一个函数可以返回一些 xml 值，但是只要有任何聚合函数（例如在当前函数中是 COUNT()），它就会给我一个错误，例如，

```
ORA-00978: 没有 GROUP BY 的嵌套组函数

```

建议我解决这个问题的方法是什么？？？

以下是我的功能：

```
创建或替换函数 funxmlresultAGGTest (abc varchar2)
返回CLOB
作为
   my_xml CLOB；
开始
   选择 XMLELEMENT ("数据集",
                      XMLAGG（XMLELEMENT（“行”，
                                          XMLFOREST (COUNT (*) AS count1)
                                         )
                             )
                     ).getclobval ()
     进入 my_xml
     从 pam_tab;

   返回 my_xml;
结尾;

```

提前致谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T15:39:59.613

由于您只有一列，我建议进行以下更改：

```
SELECT XMLELEMENT (
         "DATASET",
         XMLAGG (XMLELEMENT ("ROW", XMLFOREST (COUNT ( * ) AS count1)))
     ).getclobval ()
INTO my_xml
FROM pam_tab
GROUP BY 1; 
```

# c++ - MSVC 2012 RC std::thread 实现中的最大参数数？

> ID：11153352
> 
> 赞同：4
> 
> 时间：2012-06-22T09:14:44.813
> 
> 标签：c++, multithreading, visual-c++, c++11, visual-studio-2012

显然，当前 MSVC 2012 RC 中的 std::thread 实现的 std::thread 参数有最大数量。

此代码在 MSVC 和带有 -std=c++0x 的 g++ 中都能正常编译：

```
std::thread t = std::thread(printf, "%d, %d, %d, %d", 1, 2, 3, 4);
t.join(); 
```

但是对于超过 6 个参数，MSVC 会返回错误：

```
std::thread t = std::thread(printf, "%d, %d, %d, %d, %d", 1, 2, 3, 4, 5);
t.join(); 
```

> 错误 C2661：“std::thread::thread”：没有重载函数需要 7 个参数

这是出于某种目的吗？或者可能是 MSVC 实现中的错误？是因为 MSVC 中还不支持可变参数模板吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T09:18:33.693

MSVC2010 没有可变参数模板，因此它们是在预处理器的帮助下实现的。

我认为您可以设置 a`#define`来设置支持的参数数量。我可以稍后在我回到家时检查它是哪一个。

**编辑**：

我刚刚意识到这是大约 2012 版本。[正如在VS connect 错误报告](http://connect.microsoft.com/VisualStudio/feedback/details/747001/c-variadic-templates-fail-to-compile-vs2012)中可以看到的那样，它仍然不支持可变参数模板。

# git - 在其他人推送他们的更改后，将推送的 git 提交移动到不同的分支

> ID：11153360
> 
> 赞同：4
> 
> 时间：2012-06-22T09:15:13.830
> 
> 标签：git

实际上，我必须在单独的分支中执行某些代码时，我已经向 master 提交了一些代码。更糟糕的是，我推送了更改（更准确地说，做了 a `svn dcommit`，但这不应该有任何区别）并且有几个人在我之后将他们的更改推送给了主人。这是master现在的样子：

```
A (theirs) - B (mine) - C (mine) - D (mine) - E (theirs)
                                              ↑
                                              master 
```

我想将我的提交移动到一个单独的分支，使其看起来像这样：

```
A (theirs) - E (theirs)
|            ↑
|            master
|
+ - B (mine) - C (mine) - D (mine)
                          ↑
                          newbranch 
```

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T10:56:29.413

SVN 永远不会忘记。您只能用新的历史记录替换现有的“主干”。我可以告诉如何使用 SmartGit 做到这一点

我建议你使用cherry-picks：在这种情况下 svn:mergeinfo 将被正确翻译。

1.  我想你在 master 上并且没有本地更改。将master重置为A（Local->Reset，找到A）。
2.  现在您需要重新应用 E。打开 Log，找到 E -> 右键单击​​ -> cherry-pick（在 Cherry-pick & commit 对话框中）。
3.  您现在可以推送 master 来替换您的中继：Remote->“Push advanced”，选中“Force”复选框。
4.  现在主干是正确的。创建一个分支“newbranch”并切换到它。
5.  再次打开 Log，找到并选择提交 B、C、D -> 右键单击​​ -> 樱桃挑选（Cherry-pick & commit again）。
6.  按推。在可能出现的对话框中选择“Push as new”。

# html - 如何让你的设计在不同的浏览器中更兼容，特别是 IE

> ID：11153362
> 
> 赞同：-2
> 
> 时间：2012-06-22T09:15:18.283
> 
> 标签：html, css

我只是想知道，当我在 Chrome 和 Firefox 中测试我的网页设计时，一切似乎都很好，位置、对齐、悬停等。但是当我在 IE8 中测试我的布局时，一切都发生了变化，定位变得更糟，对齐和甚至悬停功能也不起作用。所以我的问题是，我怎样才能制作一个不会改变的网页设计，即使我在不​​同的浏览器中加载它，特别是在 IE 中。

提前感谢和问候朋友。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T09:21:19.530

> 当我在 IE8 中测试我的布局时，一切都发生了变化，定位变得更糟，对齐甚至悬停功能都不起作用

听起来您的页面以[quirks mode](http://en.wikipedia.org/wiki/Quirks_mode)显示，在 IE 中模拟 IE5.5。

按 F12 打开[Developer Tools](http://msdn.microsoft.com/en-us/library/ie/gg699337%28v=vs.85%29.aspx)，检查正在使用的模式。

quirks 模式最可能的原因是您没有有效的文档类型，例如`<!DOCTYPE html>`第一行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T09:34:43.587

您应该将 CSS 属性应用于您的 div 容器或 HTML5 容器`box-sizing: border-box`。这将应用于您在 CSS 中指定的大小的容器，并且不会随填充或边距更改，因为填充和边距将应用于容器内。

Chrome 和 Firefox 不使用相同的填充和边距概念，但使用它们将使用相同的概念。

# javascript - Javascript Array 从特定索引获取偏移索引

> ID：11153364
> 
> 赞同：2
> 
> 时间：2012-06-22T09:15:19.827
> 
> 标签：javascript, arrays

任何人都可以提出一个片段或一个简短的方法来解决这个问题：

```
array = [a,b,c,d,e,f]

currentIndex = 2;

getOffset(array,currentIndex,2); // 2+2 = 4 -> return 'e'

getOffset(array,currentIndex,-2); // -> return 'a'

getOffset(array,currentIndex,-3); // -> return 'f'

getOffset(array,currentIndex,-4); // -> return 'e'

getOffset(array,currentIndex, 5); // -> return 'b' 
```

因此，如果目标索引大于 array.length 或 < 0 -> 模拟数组内部的循环并继续进入索引。

谁能帮我？我试过了，但得到了一个错误的脚本:(

泰！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T09:33:31.660

尝试这个：

```
function getOffset(arr,index, offset){   
    return arr[(arr.length+index+(offset%arr.length))%arr.length];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T09:35:41.150

我想这应该可以解决问题：

```
function getOffset(arr,n,offset) {
   offset = offset || 0;
   var raw = (offset+n)%arr.length;
   return raw < 0 ? arr[arr.length-Math.abs(raw)] : arr[raw];
}

var arr = ["a", "b", "c", "d", "e", "f"];
getOffset(arr,-3,2); //=> 'f'
getOffset(arr,-3);   //=> 'd'
//but also ;~)
getOffset(arr,-56,2);  //=> 'a'
getOffset(arr,1024,2); //=> 'a' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T09:18:51.200

使用模运算符：

```
function getOffset(arr, index, step) {
  return arr[(((index + step) % arr.length) + arr.length) % arr.length];
} 
```

# opencart - Opencart，不同语言的产品描述，并根据用户选择的语言自动更改描述

> ID：11153365
> 
> 赞同：0
> 
> 时间：2012-06-22T09:15:21.700
> 
> 标签：opencart

全部

我想在我的 opencart 中支持多语言是非常紧迫的。所以我想用不同的语言设置翻译的产品描述。

最后，当用户从主页选择一种语言时，所有产品描述都将显示在所选语言上。

例如：默认语言：英语，产品描述：英语。如果用户选择法语，则产品说明：法语。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T16:47:25.177

你描述的是opencart的基本功能。您需要安装语言扩展并将新语言添加到 opencart。添加新语言后，您将能够将产品描述设置为这些新语言。其余的将按照您的描述进行

这是我找到的教程。 [http://www.tmdhosting.com/tutorials/opencart/opencart-add-language.html](http://www.tmdhosting.com/tutorials/opencart/opencart-add-language.html)

语言扩展可以在 opencart 网站上找到

# jquery-mobile - 消息提醒 Jquery Mobile

> ID：11153369
> 
> 赞同：2
> 
> 时间：2012-06-22T09:15:34.517
> 
> 标签：jquery-mobile, alert

是否有 Jquery Mobile 功能可以在页面内容上提供警报消息，但它会在一段时间后消失？以咆哮为例。

最好它不是一个插件，但如果没有其他选择，谁能给我一个吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-02T00:36:12.393

好吧，当被问到这个问题时，实际上并没有一种方法可以“原生”地做到这一点 - 但是，我（最近）做了一个快速插件，以使用一种主要是原生的方式来做到这一点，而且，我希望，有点理智添加快速信息对话框弹出窗口（超时）的方法。

[http://dev.jtsage.com/jQM-AlertBox/](http://dev.jtsage.com/jQM-AlertBox/)或[https://github.com/jtsage/jquery-mobile-alertbox](https://github.com/jtsage/jquery-mobile-alertbox)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-25T15:59:33.830

我已经搜索了一段时间相同的东西，但我发现除了一个 3 岁的待处理请求之外什么都没有： [https ://github.com/jquery/jquery-mobile/issues/499](https://github.com/jquery/jquery-mobile/issues/499)

如果您像我想的那样使用 PhoneGap，您可以使用这个简单的 PhoneGap 插件：

[https://github.com/Pyo25/Phonegap-Toast-plugin](https://github.com/Pyo25/Phonegap-Toast-plugin)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T10:05:31.177

也许您可以使用对话框？您使用javascript自动关闭哪个？

[http://jquerymobile.com/test/docs/pages/page-dialogs.html](http://jquerymobile.com/test/docs/pages/page-dialogs.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T10:31:33.317

以下是您可以尝试使用的工具提示的几个选项

[在 JQM 中开发中](http://jquerymobile.com/test/docs/pages/popup/index.html)...不确定何时以及是否会发布到主版本。

[JQMTooltip 插件 弹出框](http://yupso.com/jqmTooltip/) 的插件。您可以使用计时器为您的案例隐藏它。

# javafx-2 - 如何为 JavaFX XYChart.Series 设置特定颜色？

> ID：11153370
> 
> 赞同：12
> 
> 时间：2012-06-22T09:15:39.050
> 
> 标签：javafx-2

我正在尝试设置我的 JavaFX 折线图的样式，但找不到任何方法将颜色设置为特定系列。我知道，我可以通过 CSS 设置样式，但我找不到如何为我的系列设置 ID 或 CLASS。

谁能给我一个线索：

1.  如何为折线图设置颜色？
2.  如何将css类设置为系列？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-22T22:37:20.240

一般来说，样式图表的首选方式是没有代码，只使用 jschoen 推荐的 css 样式表。此外，如果需要进一步定制，您可以使用代码中的 css 查找来挖掘从系列数据生成的节点并应用各种额外的 css 样式。

这是有关动态更改[JavaFX 折线图样式](https://stackoverflow.com/questions/9757848/how-to-dynamically-change-line-style-in-javafx-2-0-line-chart)的信息以及与答案相关的[示例程序。](https://gist.github.com/2129306)在示例应用程序中，所有额外的 css 样式都是通过代码中的 setStyle 调用完成的。使用类似的查找技术，您可以访问系列节点以应用适当的样式表样式类而不是 setStyle 调用。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-02-12T12:22:03.447

**如何为折线图设置颜色？**

**这是AreaChart**或**LineChart**的简单方法

 **```
XYChart chart = new AreaChart();
Series series = new Series();
chart.getData().add(series);

Node fill = series.getNode().lookup(".chart-series-area-fill"); // only for AreaChart
Node line = series.getNode().lookup(".chart-series-area-line");

Color color = Color.RED; // or any other color

String rgb = String.format("%d, %d, %d",
        (int) (color.getRed() * 255),
        (int) (color.getGreen() * 255),
        (int) (color.getBlue() * 255));

fill.setStyle("-fx-fill: rgba(" + rgb + ", 0.15);");
line.setStyle("-fx-stroke: rgba(" + rgb + ", 1.0);"); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-22T16:20:20.083

我找到了一个关于[使用 CSS 设计图表样式](http://docs.oracle.com/javafx/2/charts/css-styles.htm)的 Oracle 文档，并在该页面上向下滚动到`Setting Chart Colors`您正在寻找的内容。

**如何为折线图设置颜色？**

最简单的方法是以下 CSS 片段：

```
.default-color0.chart-series-line { -fx-stroke: #e9967a; }
.default-color1.chart-series-line { -fx-stroke: #f0e68c; }
.default-color2.chart-series-line { -fx-stroke: #dda0dd; } 
```

不幸的是，这不适用于 id 或哪个系列，而是该系列在图中的顺序。您也可以通过以下方式设置线条样式：

```
.chart-series-line {    
    -fx-stroke-width: 2px;
    -fx-effect: null;
} 
```

**如何将css类设置为系列？**

不幸的是，我看不到这样做的方法。能够基于 XYChart.Series 名称属性创建 CSS 规则会很好，但我认为这是不可能的。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-05T17:08:59.477

Jewelsea 的回答似乎表明您必须在该系列的每个节点上放置一个样式类。我正在使用以下代码来设置面积图系列的样式，并且只为与该系列关联的节点分配一个类。

**示例代码在 Scala 中，但应该易于翻译。**

创建系列时，我添加了一个系列特定的样式类：

```
 val s = new XYChart.Series[Number, Number]() //create a new series
   s.setName(seriesName)                      //set its name (display in legend)
   s.getNode.getStyleClass.add("series-" + seriesName) //add specific style class 
```

然后在 CSS 文件中，我执行以下操作来更改系列的填充颜色`butterwings`：

```
.series-butterwings *.chart-series-area-fill{
    -fx-fill: #aab597; 
} 
```

这是可行的，因为系列区域的节点位于系列节点下方（在面积图的情况下是一个组）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-03-17T16:05:26.520

要将 getNode() 放置在代码中的某个位置可能会导致 NullPointerException，请覆盖 XYChart（AreaChart、BarChart、BubbleChart、LineChart、ScatterChart、StackedAreaChart、StackedBarChart）中的 layoutPlotChildren() 抽象方法。无需使用 CSS 样式表即可更改线条和形状的最小图表示例：

```
public class MyChart extends LineChart {

Series s1;

public MyChart() {
    this(new NumberAxis(), new NumberAxis());
    this.getXAxis().setLabel("X");
    this.getYAxis().setLabel("Y");
}

public MyChart(Axis axis, Axis axis1) {
    super(axis, axis1);
    s1 = new XYChart.Series();
    getData().add(s1);
}

public void adddata() {
    s1.setName("Demo");
    s1.getData().add(new XYChart.Data(0, 1));
    s1.getData().add(new XYChart.Data(1, 2));        
    s1.getData().add(new XYChart.Data(2, 0));
    s1.getData().add(new XYChart.Data(3, 1));
}

// Override the abstract class
public void layoutPlotChildren() {
    // call super so you don't have to do all the work
    super.layoutPlotChildren();
    // not really necessary check
    if (s1 != null && s1.getNode() != null) {
        //(optional) get all the possible CSS styles you can change
        List<String> styles = s1.getNode().getStyleClass();
        //get the line from the series
        Node line = s1.getNode().lookup(".chart-series-line");
        //set some styles
        line.setStyle("-fx-stroke: black; -fx-stroke-width: 1px; -fx-effect: null; -fx-stroke-dash-array: 10 10 10 10;");
        //change the shapes
        for (Object data : s1.getData()) {
            if (data != null) {
                //only display the last data point, change the style same way as shown with the line
                if (s1.getData().indexOf(data) != s1.getData().size()-1) {
                    StackPane stackPane = (StackPane) ((XYChart.Data) data).getNode();
                    stackPane.setVisible(false);
                }
            }
        }
    }

}

} 
```

以及启动它的执行代码：

```
public class RunJavaFX extends Application {

public static void main(String[] args) {
    launch(args);
}

@Override
public void start(Stage primaryStage) throws Exception {
    MyChart chart = new MyChart();
    chart.adddata();
    Scene scene = new Scene(chart);
    primaryStage.setScene(scene);
    primaryStage.show();
}

} 
```

[![在此处输入图像描述](../Images/84ead683b70304892ac55c1ec9398ce7.png)](https://i.stack.imgur.com/hyZNZ.png)**

# mysql - 在 Rails 中忽略时区

> ID：11153392
> 
> 赞同：0
> 
> 时间：2012-06-22T09:16:44.757
> 
> 标签：mysql, ruby-on-rails, ruby-on-rails-3, datetime, timezone

我正在 Rails 3.2 中开发一个将在本地使用的应用程序。例如，如果用户将事件设置为在 16:00 开始，那么无论何时检索它都应该是 16:00。

在 Rails 中配置它的最佳方法是什么，这是一个好主意吗？似乎无论我设置什么，当存储在数据库中或被拉取时，时间都会发生变化。

我在后端使用 MySQL。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T00:18:15.007

将用户时区存储在用户表中。将所有事件时间数据存储为特定时区（例如 UTC？），然后在每次为用户存储/提取该数据时进行相应的转换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T13:50:19.140

如果该应用程序仅在本地使用，我认为您不应该担心您的时间。它将对用户透明。如果您的值不正确，您可能会遇到问题，我相信这些问题与 Rails 如何计算 DateTime 或 Time 值无关。

# c++ - C++ 调用函数时出错

> ID：11153393
> 
> 赞同：0
> 
> 时间：2012-06-22T09:16:47.817
> 
> 标签：c++

我有以下形式的函数定义（在大代码中）：

```
class Abc{
 public:
 bool func(const std::string& text,::DE::d type,unsigned a,unsigned& b);
 }; 
```

这里的 DE 是一个如下形式的类：

```
class DE
{
   public:
   enum d{U,L};

}; 
```

现在我以以下形式调用该函数：

```
string s;
unsigned st=0;
int idj;
cout<<"\n Enter the value of string:";
cin>>s;
Abc abc;
abc.func(s,DE::U, 0,  idj); 
cout<<idj; 
```

在调用函数 func 时， `abc.func(s,DE::U, 0, idj);`我收到下面提到的错误。有人可以帮助找到并纠正错误吗？

我得到的错误是：

```
 error: no matching function for call to ‘Abc::func(std::string&, DE::U, unsigned int&, int&)’ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T09:22:17.323

您应该阅读[访问说明符](https://stackoverflow.com/questions/4919460/c-access-specifiers)。

```
class Abc{
 bool func(const std::string& text,::DE::d type,unsigned a,unsigned& b);
}; 
```

`Abc::func()`是私有的，因此不能从外部调用或引用。与中的枚举相同`DE`。

另外，你不能通过`int`，`unsigned int`需要参考。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T09:20:47.650

`idj`是类型`int`；它应该`unsigned int`作为参数传递`b`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-22T09:22:21.387

最后一个参数类型是对 的引用`unsigned`。您正在尝试传递对 的引用`int`，这是一种不同的类型。

一旦你解决了这个问题，你会发现你不能调用这个函数，因为它是私有的；同样，您也无法访问`DE::U`，因为这也是私有的。（**更新**：这是指在`public`添加访问说明符之前最初发布的问题。）

# objective-c - 简单程序在 90 分钟左右后停止

> ID：11153401
> 
> 赞同：1
> 
> 时间：2012-06-22T09:17:10.187
> 
> 标签：objective-c, macos, cocoa

我有一个非常简单的程序，它每 2 秒运行一次脚本并将输出放入菜单栏项。但是，大约 90 分钟后，菜单栏项目停止更新。谁能明白为什么？

```
- (void)applicationDidFinishLaunching:(NSNotification *)aNotification
{
    [_window setIsVisible:NO];
    ProcessSerialNumber psn = { 0, kCurrentProcess };
    TransformProcessType(&psn, kProcessTransformToUIElementApplication);
    //the above code stops the dock icon from appearing (and also stops the application from appearing in the alt tab menu

    statusItem = [[NSStatusBar systemStatusBar] statusItemWithLength:NSVariableStatusItemLength];
    [statusItem setHighlightMode:YES];
    [statusItem setTitle:@"0%"]; 
    [statusItem setEnabled:YES];
    [statusItem setToolTip:@"Script output"];

    //[statusItem setAction:@selector(updateIPAddress:)];
    [statusItem setTarget:self];

    //NSString *output = [self unixSinglePathCommandWithReturn:@"/usr/bin/osascript \"/Users/Velox/Projects/Geektool Scripts/WorkDay.scpt\""];

    [NSThread detachNewThreadSelector:@selector(calcPercent) toTarget:[self class] withObject:nil];
}

+(void)calcPercent{
    while(true){
        NSString *output = [self unixSinglePathCommandWithReturn:@"/usr/bin/osascript \"/Users/Velox/Projects/Geektool Scripts/WorkDay.scpt\""];
        [statusItem setTitle:output];
        [statusItem setEnabled:YES];
        [NSThread sleepForTimeInterval:2];
    }
}

+ (NSString *)unixSinglePathCommandWithReturn:(NSString *) command {

    NSPipe *newPipe = [NSPipe pipe];
    NSFileHandle *readHandle = [newPipe fileHandleForReading];
    NSData *inData = nil;
    NSString* returnValue = nil;

    NSTask *unixTask = [[NSTask alloc] init];

    unixTask = [[NSTask alloc] init];
    [unixTask setStandardOutput:newPipe];
    [unixTask setLaunchPath:@"/bin/csh"];
    [unixTask setArguments:[NSArray arrayWithObjects:@"-c", command , nil]]; 
    [unixTask launch];
    [unixTask waitUntilExit];
    //int status = [unixTask terminationStatus];

    while ((inData = [readHandle availableData]) && [inData length]) {

        returnValue= [[NSString alloc] initWithData:inData encoding:[NSString defaultCStringEncoding]];

        returnValue = [returnValue substringToIndex:[returnValue length]-1];

    }

    return returnValue;

} 
```

我正在使用 ARC。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T12:12:34.807

仅仅因为您正在使用 ARC（总体而言，这是一件很棒的事情）并不意味着您必须停止考虑内存使用和性能。

在你的 " `calcPercent`" 方法中，你反复调用 " `unixSinglePathCommandWithReturn:`"。当您分配 returnValue 并设置并跳出您的“ `while`”循环时，您应该执行“ `unixTask = nil;`”，这将鼓励 ARC 正确释放 unix 任务对象。

另一件事，你每两秒调用一次。轮询非常浪费，所以你应该尝试想出一个更好的方法来做你想做的事情。例如，不是每两秒一次（而对该函数的多次其他调用可能会被卡住或挂起或其他），为什么不安排在上一次调用“ ”*结束后*`unixSinglePathCommandWithReturn`2 秒运行一次？

顺便说一句，你一个接一个地双重分配 " `unixTask"`（两次单独调用 " `[NSTask alloc] init]`）。如果这是非 ARC 代码，那将是一个很大的内存泄漏。就像现在一样，它看起来很糟糕。

# c - NtQueryInformationThread 在我的代码中总是失败？

> ID：11153402
> 
> 赞同：0
> 
> 时间：2012-06-22T09:17:11.463
> 
> 标签：c, windows, multithreading, winapi

我想使用进程 ID 和线程 ID 检索进程的线程起始地址。
这是我的代码：

```
DWORD WINAPI GetThreadStartAddress(DWORD tid, DWORD pid)
{

 NTSTATUS ntStatus;

 HANDLE hDupHandle;

 DWORD dwStartAddress;

 HANDLE hProcess;

HANDLE hTread;

pNtQIT NtQueryInformationThread;

hTread = OpenThread(THREAD_ALL_ACCESS, FALSE, tid);

NtQueryInformationThread = (pNtQIT)GetProcAddress(GetModuleHandle(L"ntdll.dll"), "NtQueryInformationThread");

if(NtQueryInformationThread == NULL)
    return 0;
hProcess = OpenProcess(PROCESS_ALL_ACCESS, FALSE, pid);
SuspendThread(hTread);
if(!DuplicateHandle(hProcess, hTread, hProcess, &hDupHandle, THREAD_QUERY_INFORMATION, FALSE, 0)){

    SetLastError(ERROR_ACCESS_DENIED);

    return 0;

}

ntStatus = NtQueryInformationThread(hDupHandle, ThreadQuerySetWin32StartAddress, &dwStartAddress, sizeof(DWORD), NULL);
ResumeThread(hTread );
CloseHandle(hTread);
CloseHandle(hProcess);

CloseHandle(hDupHandle);

if (ntStatus != 0)
    return 0;

return dwStartAddress; 
```

}

但 ntStatus 始终不为 0。为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T07:20:06.830

OpenThread & OpenProcess 可能会失败（尤其是由于权限不足）。在调用 NtQueryInformationThread 之前，您需要确保您有有效的句柄。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T21:46:15.783

假设这`pid`指向您尝试获取信息的进程，那么您是`hDupHandle`在该远程进程的上下文中创建的，而不是您自己的。您自己的进程可能有也可能没有具有相同数值的句柄，但它不是您打算使用的。

此外，出于同样的原因，您正在从远程进程复制一个随机句柄，而不是从 OpenThread 获得的句柄。

调用`DuplicateHandle`应该是

```
DuplicateHandle(GetCurrentProcess(), hTread, GetCurrentProcess(), &hDupHandle, 
  THREAD_QUERY_INFORMATION, FALSE, 0) 
```

虽然我不知道为什么你首先要复制手柄而不是直接使用它。

# authentication - 身份验证始终重定向到 /login

> ID：11153403
> 
> 赞同：2
> 
> 时间：2012-06-22T09:17:22.027
> 
> 标签：authentication, symfony, fosuserbundle

我正在使用[FOSUserBundle](https://github.com/FriendsOfSymfony/FOSUserBundle)。我创建了另一个防火墙（请参阅下面的 security.yml），但是当我登录并尝试访问页面 localhost/BEL/app_dev.php/back_office 时，我被重定向到我登录的 localhost/BEL/app_dev.php/login。我未登录时的行为完全相同。

我试图在我的防火墙模式和我的 access_control 路径的末尾放一个 $ ，当我登录和未登录时我可以访问该页面（所以这不是我所期望的） .

只有在连接时（我的用户只有 ROLE_USER 角色），我才能访问此页面？

```
# app/config/security.yml
security:
    providers:
        fos_userbundle:
            id: fos_user.user_manager

    encoders:
        'FOS\UserBundle\Model\UserInterface': sha512

    firewalls:
        dev:
            pattern:  ^/(_(profiler|wdt)|css|images|js)/
            security: false
        main_bo:
            pattern: ^/back_office/
            form_login:
                provider: fos_userbundle
            logout:       true
            anonymous:    false
        main:
            pattern: ^/
            form_login:
                provider: fos_userbundle
            logout:       true
            anonymous:    true

    access_control:
        - { path: ^/login$, role: IS_AUTHENTICATED_ANONYMOUSLY }
        - { path: ^/register, role: IS_AUTHENTICATED_ANONYMOUSLY }
        - { path: ^/resetting, role: IS_AUTHENTICATED_ANONYMOUSLY }
        - { path: ^/admin/, role: ROLE_ADMIN }
        - { path: ^/back_office/, role: ROLE_USER }
        - { path: ^/.*, role: IS_AUTHENTICATED_ANONYMOUSLY }

    role_hierarchy:
        ROLE_ADMIN:       ROLE_USER
        ROLE_SUPER_ADMIN: ROLE_ADMIN 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T22:31:11.167

您始终可以实现身份验证成功处理程序，您可以使用该处理程序拦截登录重定向并在特殊情况下进行自定义重定向（例如后端用户登录）

看[这里](http://blog.alterphp.com/2011/10/set-up-authenticationsuccesshandler.html)的教程

# python - 如何分配字符串？

> ID：11153406
> 
> 赞同：0
> 
> 时间：2012-06-22T09:17:25.857
> 
> 标签：python

我有这个命令可以唤醒系统`os.system('sudo sh -c "echo date \'+%s\' -d \'+ 24 hours\' > /sys/class/rtc/rtc0/wakealarm"')`。执行此命令后，我只需打开 wakealaram 文件。它是空的，什么都没有写。

1.  为什么它是空的，它不应该写一些日期吗？
2.  如何为wakealaram 提供手动日期而不是系统日期+ 24 小时？例如：日期=“2147472000”

会`os.system('sudo sh -c "echo date > /sys/class/rtc/rtc0/wakealarm"')`工作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T09:32:16.430

尝试

```
os.system("sudo date >/sys/class/rtc/rtc0/wakealarm") 
```

# java - PKCS #7 签名

> ID：11153410
> 
> 赞同：-3
> 
> 时间：2012-06-22T09:17:43.200
> 
> 标签：java, cryptography, bouncycastle, public-key-encryption, pkcs#7

*当我们使用以下类org.bouncycastle.cms.CMSSignedData*和*org.bouncycastle.cms.CMSSignedDataGenerator*对数据进行签名时，我应该向文件写入什么以验证签名

 *非常感谢

我已经编写了代码来实现这一点，但我遇到了异常

```
public class T2 {
    public static String ROOT_ALIAS = "root";
    public static String INTERMEDIATE_ALIAS = "intermediate";
    public static String END_ENTITY_ALIAS = "end";
    public static String PLAIN_TEXT = "Hello World!123";
    private static final char[] KEY_PASSWORD = "keyPassword".toCharArray();

    public static CMSSignedData signData(KeyStore keyStore,
            byte[] plainTextToSign) throws Exception {
        // GET THE PRIVATE KEY
        PrivateKey key = (PrivateKey) keyStore.getKey(END_ENTITY_ALIAS,
                KEY_PASSWORD);

        Certificate[] chain = keyStore.getCertificateChain(END_ENTITY_ALIAS);
        CertStore certsAndCRLs = CertStore.getInstance("Collection",
                new CollectionCertStoreParameters(Arrays.asList(chain)), "BC");
        X509Certificate cert = (X509Certificate) chain[0];

        // set up the generator
        CMSSignedDataGenerator gen = new CMSSignedDataGenerator();
        gen.addSigner(key, cert, CMSSignedDataGenerator.DIGEST_SHA224);
        gen.addCertificatesAndCRLs(certsAndCRLs);

        // create the signed-data object
        CMSProcessable data = new CMSProcessableByteArray(plainTextToSign);
        CMSSignedData signed = gen.generate(data, "BC");

        // recreate
        signed = new CMSSignedData(data, signed.getEncoded());
        // ContentInfo conInf = signed.getContentInfo();
        // CMSProcessable sigContent = signed.getSignedContent();

        new File("D:\\pkcs7\\encrypted-file.p7b");
        FileOutputStream fileOuputStream = new FileOutputStream(
                "D:\\pkcs7\\encrypted-file.p7b");
        fileOuputStream.write(signed.getEncoded());
        // fileOuputStream.flush();
        fileOuputStream.close();
        return signed;
    }

    public static boolean verifyData(KeyStore keyStore) throws Exception {

        File file = new File("D:\\pkcs7\\encrypted-file.p7b");
        FileInputStream fileInputStream = new FileInputStream(file);
        byte[] signedByte = new byte[(int) file.length()];
        fileInputStream.read(signedByte);
        fileInputStream.close();

        // verification step
        X509Certificate rootCert = (X509Certificate) keyStore
                .getCertificate(ROOT_ALIAS);

        CMSSignedData signed = new CMSSignedData(signedByte);
        if (isValidSignature(signed, rootCert)) {
            System.out.println("verification succeeded");
            return true;
        } else {
            System.out.println("verification failed");
        }
        return false;
    }

    /**
     * Take a CMS SignedData message and a trust anchor and determine if the
     * message is signed with a valid signature from a end entity entity
     * certificate recognized by the trust anchor rootCert.
     */
    @SuppressWarnings("rawtypes")
    private static boolean isValidSignature(CMSSignedData signedData,
            X509Certificate rootCert) throws Exception {

        boolean[] bArr = new boolean[2];
        bArr[0] = true;
        CertStore certsAndCRLs = signedData.getCertificatesAndCRLs(
                "Collection", "BC");
        SignerInformationStore signers = signedData.getSignerInfos();
        Iterator it = signers.getSigners().iterator();

        if (it.hasNext()) {
            SignerInformation signer = (SignerInformation) it.next();
            SignerId signerConstraints = signer.getSID();
            signerConstraints.setKeyUsage(bArr);
            PKIXCertPathBuilderResult result = buildPath(rootCert,
                    signer.getSID(), certsAndCRLs);
            return signer.verify(result.getPublicKey(), "BC");
        }

        return false;
    }

    /**
     * Build a path using the given root as the trust anchor, and the passed in
     * end constraints and certificate store.
     * <p>
     * Note: the path is built with revocation checking turned off.
     */
    public static PKIXCertPathBuilderResult buildPath(X509Certificate rootCert,
            X509CertSelector endConstraints, CertStore certsAndCRLs)
            throws Exception {
        CertPathBuilder builder = CertPathBuilder.getInstance("PKIX", "BC");
        PKIXBuilderParameters buildParams = new PKIXBuilderParameters(
                Collections.singleton(new TrustAnchor(rootCert, null)),
                endConstraints);

        buildParams.addCertStore(certsAndCRLs);
        buildParams.setRevocationEnabled(false);

        return (PKIXCertPathBuilderResult) builder.build(buildParams);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T09:49:38.567

当签名包装时，您不需要向文件中写入任何内容 - 签名操作的产品是您使用签名包包装的数据。请注意，处理原始未签名数据的应用程序不能直接处理此类签名数据。例如。如果您使用包装 PKCS#7/CMS 签名对 PDF 文档进行签名，Adobe Reader 将无法直接打开签名数据（直到签名被删除）。通过将签名数据提供给验证程序来验证签名。

使用分离签名，签名操作的产物是签名块本身，您可以将其存储在单独的文件中或作为某些文件系统上的备用数据流或数据库中的单独字段中。在这种情况下，您的原始数据保持不变。通过将原始数据和签名块提供给验证程序来验证签名。*

# entity-framework-4 - 可能的实体框架急切加载问题

> ID：11153411
> 
> 赞同：1
> 
> 时间：2012-06-22T09:17:43.713
> 
> 标签：entity-framework-4, linq-to-entities, eager-loading

我有这个方法

```
public ReadOnlyCollection<Auction> GetAuctionsByCriteria(Expression<Func<Auction, bool>>[] whereConditions, int pageSize, int pageIndex, out int total, AuctionCriteria criteria)
{
    // Applying filters
    var query = _composeFilter(criteria);

    // Adding external condition
    foreach (var whereCondition in whereConditions)
    {
        query = query.Where(whereCondition);
    }

    // Ordering and converting to list
    var orderBy = _getOrderBy(criteria);

    total = query.Count();
    List<Auction> list;
    if (criteria.Ascending)
        list = query.OrderBy(orderBy).Skip(pageSize * pageIndex).Take(pageSize).ToList();
    else
        list = query.OrderByDescending(orderBy).Skip(pageSize * pageIndex).Take(pageSize).ToList();

    return new ReadOnlyCollection<Auction>(list);
} 
```

线条

现在，Auction 对象有一个关联的 Bids 集合。当这个集合在数据库中很大（30000+）时，上述方法中的以下几行超时。当收藏量很小时，它们不会。

```
list = query.OrderBy(orderBy).Skip(pageSize * pageIndex).Take(pageSize).ToList(); 
```

和

```
list = query.OrderByDescending(orderBy).Skip(pageSize * pageIndex).Take(pageSize).ToList(); 
```

我无法调试这个（不要问），但是（对我来说）投标集合与拍卖一起被急切地加载似乎是合乎逻辑的。我该如何解决这个问题？它甚至是一个急切的加载问题吗？

# ruby-on-rails - 我的 Postgres 端口文件应该是什么样的？

> ID：11153417
> 
> 赞同：3
> 
> 时间：2012-06-22T09:18:07.053
> 
> 标签：ruby-on-rails, ruby-on-rails-3, postgresql, port

首先道歉，如果“端口文件不是正确的术语”，但 Postgres 不是我的强项之一。我试图找出这个端口文件应该是什么样子，因为它似乎已经从我的系统中丢失了。请继续阅读以获取解释和我（很可能不正确）的想法。

我正在将 Postgres 与 rails 项目（通过 postgres gem）一起使用，直到昨天它在我更新一些 HTML 时停止工作时一直运行良好。我用通常的方式重新启动了我的 Rails 服务器

> 导轨

只为得到：

> /Users/pedr/.rvm/gems/ruby-1.9.3-p0/gems/activerecord-3.2.1/lib/active_record/connection_adapters/postgresql_adapter.rb:1161：在“初始化”中：无法连接到服务器：否这样的文件或目录 (PG::Error) \n \n
> 服务器是否在本地运行并接受 Unix 域套接字“/tmp/.s.PGSQL.5432”上的连接？

我正在使用Lunchy 来启动和停止postgres，那里似乎没有问题。

但是，我使用以下终端命令来检查 Postgres 正在侦听的端口：

```
sudo lsof -p 286| awk '$5 == "unix" && $NF ~ /\// { print $NF }' 
```

它没有列出任何东西。所以我认为该端口已以某种方式被删除。

我对端口的有限了解导致我在以下位置查找端口文件：

> /tmp/.s.PGSQL.5432

有一个文件叫：

> .s.PGSQL.5432.lock

![临时目录](../Images/0f62fd21054930b2645fdcbd61ebd605.png)

据我了解，此文件可防止编辑丢失的端口文件。

我尝试使用 Time machine 来查找这个丢失的文件，但似乎 Time Machine 没有在 /tmp 目录中存储任何内容。

那么我怎样才能重新创建这个文件呢？它应该是什么样子？

[更新]

回应@wildplasser 的建议：

使用以下命令测试 postgres 是否正在运行：

> ps辅助| grep postgres

得到我：

> 633 0.0 0.0 2442564 392 ?? Ss 9:23am 0:00.09 postgres：统计收集器进程 632 0.0 0.0 2446480 1516 ?? Ss 9:23am 0:00.09 postgres：autovacuum 启动器进程 631 0.0 0.0 2446348 520 ?? Ss 9:23am 0:00.32 postgres: wal writer process 630 0.0 0.0 2446348 580 ?? Ss 9:23am 0:00.48 postgres: writer process 520 0.0 0.1 2446348 3640 ?? S 9:22am 0:00.33 /usr/local/bin/postgres -D /usr/local/var/postgres -r /usr/local/var/postgres/server.log 我的用户名 1187 0.0 0.0 2434892 540 s000 S+ 10:35am 0:00.00 grep postgres

测试 Unix 域套接字是否正在运行：

> ls -l /tmp/ | grep PGSQL | grep -v grep

什么都得不到。

postgres 是否在侦听 Internet 协议 localhost？

> psql -H 本地主机

得到我：

> psql：致命：数据库“localhost”不存在

postgres 是否在监听 Unix 域套接字？

> psql -H /tmp/.s.PGSQL.5432

得到我：

> psql：致命：数据库“/tmp/.s.PGSQL.5432”不存在

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T09:28:26.790

“端口文件”是 PostgreSQL 正在侦听的 unix 套接字。它将在启动时创建它。停止 PostgreSQL 服务器，如果 .lock 文件仍然存在，请删除它，重新启动 PG 并查看您的套接字是否恢复。

我很困惑为什么它实际上不能在那里。我以前从未听说过这种情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T09:58:45.923

似乎阻止编辑套接字文件 .s.PGSQL.5432 的 .s.PGSQL.5432.lock 在应该被删除时被保留在原地。这意味着当 postgres 尝试启动时，它无法启动，因为锁定文件阻止了它创建新的套接字，即使没有套接字可供锁定文件保护。

**删除 .s.PGSQL.5432.lock 并重新启动 postgres，然后启动（Rails）服务器通常工作正常。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-30T22:56:37.050

我发现这个答案很有帮助

[升级到 OSX 10.7 Lion 后修复 Postgresql](https://stackoverflow.com/questions/6770649/repairing-postgresql-after-upgrading-to-osx-10-7-lion)

并通过把这个解决了我的错误..

```
export PATH=/usr/local/bin:$PATH 
```

在我的 .bash_profile

# jquery - 使用 jQuery 在多个 li 上滑动切换

> ID：11153418
> 
> 赞同：2
> 
> 时间：2012-06-22T09:18:08.057
> 
> 标签：jquery, slidetoggle

我有一个 UL 有 3 个 Li，每个 LI 下都有隐藏的 div。我在 LI 上有一个跨度，当我单击单个 LI 时，我希望 div 滑出。请问你能帮我吗？这是演示 jsfiddle 链接[http://jsfiddle.net/jB83e/1/](http://jsfiddle.net/jB83e/1/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T09:21:09.753

使用它，因为您只想元素旁边`toggle`的div 。`.slide``icon`

```
tglHandle.click(function() {
        $(this).next('div.slide').slideToggle("slow");
    });​ 
```

**演示：http:** [//jsfiddle.net/joycse06/jB83e/6/](http://jsfiddle.net/joycse06/jB83e/6/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T09:22:53.167

试试看

```
$(".slide").hide();

var tglHandle = $(".icon");

tglHandle.click(function() {
    $(".slide").hide();
    $(this).next(".slide").slideToggle("slow");
});​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T09:22:59.203

我编辑了脚本，将其更改为：

```
$(".slide").hide();

var tglHandle = $(".icon");

    tglHandle.click(function() {
        $(this).next(".slide").slideToggle("slow");
    });​ 
```

工作演示[在这里](http://jsfiddle.net/H4CcN/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T09:23:41.200

[工作演示](http://jsfiddle.net/epinapala/jB83e/7/)

```
$(".slide").hide();
$("span").click(function() {
$(this).next().toggle();
}); 
```

# text - 基于相似度的文本流聚类算法最近有什么突破吗？

> ID：11153419
> 
> 赞同：3
> 
> 时间：2012-06-22T09:18:10.750
> 
> 标签：text, cluster-analysis, similarity

我需要一个用于文本流聚类的轻量级工具。轻量级，因为它没有记忆，因此它可以记住以前的文本条目。这里的文本流意味着连续输入字母数字和半结构化的句子/短语，例如：任何应用程序的日志。基于相似性的聚类意味着算法应该将具有模式相似性的文本分组。例如： text1 = 'aaababac' 和 text2 = 'aaaaabac' 应该组合在一起，因为它们之间只有一个字符不同。场景是：首先出现 text1，算法应该给它一个索引。然后出现 text2 现在算法采用相同的方法给它一个索引。但条件是两个索引应该彼此靠近，并且在处理 text2 时，算法不知道早期文本中出现了什么。它是一种基于模式相似性的散列。

现在我找不到任何有用的东西。我发现的最佳解决方案是 simhash。 [http://matpalm.com/resemblance/simhash/](http://matpalm.com/resemblance/simhash/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T23:34:10.220

这个问题有点不明确。如果您不记得以前的条目，您将如何记住您看到的集群？特别是，通常只有在您看到大量“相似”项目时才将事物视为一个集群。如果没有至少一些关于频繁和不频繁的“记忆”，您就无法做到这一点。因此，不存在真正没有*任何*记忆的合理聚类算法。它可能不会记住文字对象，但记住摘要并没有那么不同。散列意味着记住至少部分先前看到的数据。但是，记忆数据中具有统计意义的随机部分是否比准确记忆更有好处呢？

发生的很多事情都是假装不记住事情，但实际上他们只是以不同的方式记忆数据。但只要它出版，它就被认为是成功的。即使它在实践中不起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T23:48:14.157

我认为您所描述的称为[增量集群](http://web.eecs.utk.edu/~itamar/Papers/ITNG2010.pdf)或[数据流集群](http://en.wikipedia.org/wiki/Data_stream_clustering)。

# c++ - 如何使用 fastcgi 程序处理多个请求

> ID：11153428
> 
> 赞同：0
> 
> 时间：2012-06-22T09:18:40.450
> 
> 标签：c++, nginx, cgi, fastcgi

我阅读了文档，`www.fastcgi.com`但我无法理解。如何在 fastcgi 中处理多个请求？假设我有带有配置的 nginx：

```
location ~ \.fcgi$ {
fastcgi_pass    127.0.0.1:9999;
...
} 
```

我有一些 fastCGI 程序（取自[http://retechorg.ru/index.php?q=node/239](http://retechorg.ru/index.php?q=node/239)）。

所以当我在这个while循环中时：

> 而(FCGX_Accept_r(&request) == 0)

当 clculate 需要很长时间（比如 1 分钟计算）或 sleep() 时，它会阻止其他请求。

在这种情况下如何正确处理多个请求？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T12:25:36.320

If you want to process multiple requests at once, you need multiple threads, each executing the same main loop.

# winforms - 在 c# Winforms 应用程序中将本地报告超链接选项设置为另一个本地 .rdlc 报告

> ID：11153429
> 
> 赞同：2
> 
> 时间：2012-06-22T09:18:43.740
> 
> 标签：winforms, reporting-services, rdlc, report-viewer2010

从下面的屏幕截图窗口中，如何在我的应用程序报告文件夹中指定本地（.rdlc）报告？如果我只是输入我的报告的名称，超链接不起作用，当您将鼠标悬停在字段值上时，完全没有迹象表明超链接存在。

但是，如果我选择 Go to URL 并输入**="http://www.mysite.co.ug/"**作为表达式，它就可以工作。

我感觉在引用我的报告路径的方式上出错了，我想查看一个示例，其中选择了**“转到报告**”选项并指定了本地 .rdlc 报告。

![在此处输入图像描述](../Images/ee2ba153c6c2dc7511b7c320e6288f7b.png)

如何在**指定报告区域**引用本地报告？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T20:07:45.933

> 如果我只输入我的报告的名称，超链接不起作用

您需要在项目中指定 .rdlc 文件的完全限定名称（包括命名空间），并用引号将其括起来 - 因为它是一个表达式，所以它必须以等号开头，所以类似的东西`="MyCompany.MySolution.MyProject.Reporting.MyReport.rdlc"`（刚刚测试过） ）。

# python - pycrypto 错误....ImportError: cannot import name Counter

> ID：11153431
> 
> 赞同：1
> 
> 时间：2012-06-22T09:18:49.963
> 
> 标签：python, counter

我正在尝试使用 pycrypto++ 在 python 中设计 AES CTR 加密/解密程序。但每次我运行以下代码时：

```
decryptor = AES.new(key, AES.MODE_CTR, counter=Counter.new(64, prefix=nonce)) 
```

我收到以下错误：

```
Traceback (most recent call last):
  File "aes-ctr.py", line 3, in <module>
  from collections import Counter
ImportError: cannot import name Counter 
```

随机数是我给的。请帮助我。我的python版本是2.7.3

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T09:40:49.590

我可以想到两件事可能导致这种情况。

要么您创建了一个名为“collections.py”的文件，并且它隐藏了同名的库模块。如果是，请重命名。

如果没有，那么您以某种方式弄乱了您的 python 版本。`Counter`绝对应该在 python 2.7.3 中。尝试重新安装 python 并仔细检查您实际运行的版本（例如，通过`sys.version_info`在程序中的某个位置打印出来）。

要诊断问题，请尝试`import collections`和`print collections.__file__`。它应该在 python2.7 目录中。打开文件并搜索`class Counter`.

# mysql - 选择查询结果作为插入语句

> ID：11153434
> 
> 赞同：-2
> 
> 时间：2012-06-22T09:18:51.650
> 
> 标签：mysql, mysqldump

假设您有 2 个数据库：xpto 和 zpto。我想在 db xpto 中进行选择查询，将其导出为插入语句并将这些插入语句导入数据库 zpto。这可能吗 ？

编辑：我真的需要转储，因为数据库不在同一台机器上，而且我没有远程访问 zpto。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T09:21:09.920

```
insert into zpto.table select * from xpto.table where ....... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T09:23:46.660

看一眼：

[http://www.tutorialspoint.com/mysql/mysql-database-export.htm](http://www.tutorialspoint.com/mysql/mysql-database-export.htm)

（将表或数据库复制到另一台主机的部分）

```
mysqldump -u root -p xpto table_name > dump.txt
mysql -u root -p zpto < dump.txt 
```

如果你有 PHPMyAdmin，你可以使用导出/导入工具来做你所追求的。

# maven - Maven 依赖与 Jersey 冲突

> ID：11153438
> 
> 赞同：1
> 
> 时间：2012-06-22T09:19:08.970
> 
> 标签：maven, dependencies, jersey

我正在开发带有球衣的休息服务。该项目有几个模块。我的外观模块的依赖项是：

```
<?xml version="1.0"?>
<project xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org /xsd/maven-4.0.0.xsd" xmlns="http://maven.apache.org/POM/4.0.0"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
 <modelVersion>4.0.0</modelVersion>
<parent>
<artifactId>com-myproject</artifactId>
<groupId>com.myproject</groupId>
<version>1.0-SNAPSHOT</version>
</parent>
    <groupId>com.myproject.facade</groupId>
    <artifactId>com-myproject-facade</artifactId>
    <version>1.0-SNAPSHOT</version>
    <packaging>jar</packaging>
    <name>com-myproject-facade Jersey Webapp</name>
   <properties>
    <jersey-version>1.8</jersey-version>
   </properties>
<dependencies>
<dependency>
  <groupId>com.sun.jersey</groupId>
  <artifactId>jersey-server</artifactId>
  <version>${jersey-version}</version>
</dependency>
<dependency>
  <groupId>com.sun.jersey</groupId>
  <artifactId>jersey-json</artifactId>
  <version>${jersey-version}</version>
</dependency>
<dependency>
  <groupId>junit</groupId>
  <artifactId>junit</artifactId>
  <version>4.8.2</version>
  <scope>test</scope>
</dependency>

<dependency>
  <groupId>com.sun.jersey</groupId>
  <artifactId>jersey-client</artifactId>
  <version>${jersey-version}</version>
  <scope>test</scope>
</dependency>
<dependency>
  <groupId>org.glassfish.distributions</groupId>
  <artifactId>web-all</artifactId>
  <version>10.0-build-20080430</version>
  <scope>test</scope>
</dependency>
<dependency>
  <groupId>org.glassfish.embedded</groupId>
  <artifactId>gf-embedded-api</artifactId>
  <version>1.0-alpha-4</version>
  <scope>test</scope>
</dependency>
<!-- Hyperlinking -->

</dependencies>
<repositories>
<repository>
  <id>glassfish.java.net</id>
  <name>GlassFish Maven Repository</name>
  <url>http://download.java.net/maven/glassfish</url>
</repository>
<repository>
  <id>m2.java.net</id>
  <name>Java.net Maven 2 Repository</name>
  <url>http://download.java.net/maven/2</url>
</repository>
</repositories>
 <pluginRepositories>
<pluginRepository>
  <id>m2.java.net</id>
  <name>Java.net Maven 2 Repository</name>
  <url>http://download.java.net/maven/2</url>
</pluginRepository>
</pluginRepositories>
<build>
<finalName>com-bachelor-facade</finalName>
<plugins>
  <plugin>
    <artifactId>maven-compiler-plugin</artifactId>
    <inherited>true</inherited>
    <configuration>
      <source>1.6</source>
      <target>1.6</target>
    </configuration>
  </plugin>
  <plugin>
    <groupId>org.glassfish</groupId>
    <artifactId>maven-glassfish-plugin</artifactId>
  </plugin>
</plugins> 
```

有用。

当我为带有球衣的超媒体添加新的依赖项时：

```
 <dependency>
   <groupId>com.sun.jersey</groupId>
   <artifactId>jersey-server-linking</artifactId>
   <version>${jersey-version}</version>
 </dependency> 
```

我在这个外观项目和所有其他同级模块中收到一个 pom 错误，因为它们依赖于外观模块。

在外观项目中，我收到有关缺少工件的错误：

```
 22.06.12 11:11:02 MESZ: Missing artifact com.sun.jersey:jersey-server:jar:1.8:compile
 22.06.12 11:11:02 MESZ: Missing artifact asm:asm:jar:3.1:compile
 22.06.12 11:11:02 MESZ: Missing artifact com.sun.jersey:jersey-core:jar:1.8:compile
 22.06.12 11:11:02 MESZ: Missing artifact com.sun.jersey:jersey-json:jar:1.8:compile
 22.06.12 11:11:02 MESZ: Missing artifact   org.codehaus.jettison:jettison:jar:1.1:compile
 22.06.12 11:11:02 MESZ: Missing artifact stax:stax-api:jar:1.0.1:compile 
```

等等。

其他模块依赖于这个项目并得到错误：

```
 Build errors for com-myproject-core; org.apache.maven.lifecycle.LifecycleExecutionException: Failed to execute goal on project com-myproject-core: Could not resolve dependencies for project com.myproject.core:com-bachelor-myproject:war:1.0-SNAPSHOT: Failed to collect dependencies for [com.myproject.facade:com-myproject-facade:jar:1.0-SNAPSHOT (compile), com.sun.jersey:jersey-server:jar:1.8 (compile), com.sun.jersey:jersey-json:jar:1.8 (compile), junit:junit:jar:4.8.2 (test), com.sun.jersey:jersey-client:jar:1.8 (test), org.glassfish.distributions:web-all:jar:10.0-build-20080430 (test), org.glassfish.embedded:gf-embedded-api:jar:1.0-alpha-4 (test), log4j:log4j:jar:1.2.14 (provided)] 
```

我想我只需要使用 maven 安装更改的项目，然后其他项目得到修复。但是我不能进行 maven 安装，因为更改的项目 pom 也是由于缺少工件而导致的红色。如何解决这个问题？

# asp.net - 最适合显示动态查询结果的 ASP.NET 控件

> ID：11153442
> 
> 赞同：0
> 
> 时间：2012-06-22T09:19:51.170
> 
> 标签：asp.net, controls

我有一个关于如何在 ASP.NET 中显示动态查询结果的问题。
假设我从数据库中收集了一个查询结果，然后将其显示在我的页面上。
问题是我的查询结果中的列数量是动态的。
第一个查询可能返回 3 列，但下一个查询可能返回 5 列，依此类推。

我通常`ASP:Repeater`在某些情况下使用，但对于这种情况我不这么认为，因为我需要明确声明列（例如： in `ASP:Literal`、`ASP:Label`等）。

注意：我也需要分页。因为查询结果可能返回一百行。

有什么建议吗？提前致谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T09:25:42.193

听起来 ASP.NET 动态数据是适合您的工具，请参阅：http: [//msdn.microsoft.com/en-us/library/ee845452.aspx](http://msdn.microsoft.com/en-us/library/ee845452.aspx)

> 在运行时从数据库模式推断数据实体的外观和行为并从中派生 UI 行为

我唯一的保留：我只在实际工作中使用过一次。在那种情况下，我需要在部署后进行一些重大更改 - 这很麻烦，以至于我希望我只是构建自己的（或者甚至将所有内容都倾倒到一个`StringBuilder`.）尽管如此，如果你所做的只是显示表格数据，这就是您所需要的。

# java - 在eclipse中显示java包接口

> ID：11153444
> 
> 赞同：1
> 
> 时间：2012-06-22T09:20:07.550
> 
> 标签：java, eclipse

有没有办法在eclipse中显示包的公共界面？对于公共接口，我的意思是可以在包之外看到的所有内容，例如公共类/接口和公共/受保护的类成员。

我想这通常是不可能的，因为包可以在任何地方扩展，但我很乐意看到仅用于预定义源目录的界面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T09:22:54.783

您无法直接在 eclipse 中看到这一点。但是您可以为您的项目 ( `Project`-> `Generate Javadoc`) 生成 JavaDoc 并将成员可见性设置为 Public。

# php - 需要一个正则表达式与 PHP 中的 preg_replace() 一起使用

> ID：11153445
> 
> 赞同：0
> 
> 时间：2012-06-22T09:20:10.297
> 
> 标签：php, regex, string

我打算替换所有以 style=" 开头的字符串，中间有任何内容并以 " 结尾。我正在尝试使用此调用，但它不起作用：

```
preg_replace('/style="*"/', '', $feed[$x]['desc']); 
```

它仅替换 style=" 而其余部分保持不变，例如 style="border:1px solid red" 在替换后仍然会得到border:1px solid red" ，这意味着此处使用 * 通配符是错误的。我怎么能表明在“”之间可以有任何东西呢？

提前致谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T09:22:28.050

您显然想要除引号字符之外的所有内容，因此请使用`/style="[^"]*"/`

在正则表达式中，星号表示“前一个字符的 0 次或多次重复”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T09:22:54.897

在您的模式中，通配符用于`"`您应该使用`".*?"`或类似的东西

# c# - C# 文件的结构会影响编译的内容吗？

> ID：11153446
> 
> 赞同：2
> 
> 时间：2012-06-22T09:20:11.243
> 
> 标签：c#, .net, compilation, file-structure

C# 文件的结构会影响编译的内容吗？

例如，成员的顺序（根据它在文件中的位置）会影响编译的类吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T09:23:46.850

根据我前几天阅读的 Eric Lippert 的一篇博客文章，编译器不保证同一源代码的两次编译最终会产生相同的 IL。不过，这与方法排序无关，但我认为这也适用 - 所以，我认为在编译的类中假设任何方法排序是不安全的。我也不希望源文件方法排序和 IL 方法排序之间有任何联系。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T09:27:46.347

虽然在大多数情况下顺序并不重要，但匿名类型**并非如此：**

```
new{a=1,b=2} 
```

创建一个不同的、不兼容的类型

```
new{b=2,a=1} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T09:23:48.970

不保证成员的顺序。

# c# - 在 ASP.NET 中使用 LINQ to SQL

> ID：11153456
> 
> 赞同：0
> 
> 时间：2012-06-22T09:21:07.037
> 
> 标签：c#, asp.net, .net, linq, linq-to-sql

到目前为止，我构建的大多数 Web 应用程序背后都有一个 Oracle 数据库，因此在获取或更新数据时，我会将搜索变量传递给一个类以构建 SQL，打开一个连接并创建一个 DataTable 以传递回表单然后我绑定到一个gridview - 简单的东西。

我现在将 Linq 用于 SQL Server 数据库。我可以轻松地构建它并让它在 button_click 事件（下面的代码）上工作，但是如果我要将变量传递给一个单独的类来执行此操作，以便它不会从代码隐藏运行，它到底是什么我返回回到表格？

希望这是有道理的 - 我基本上想做下面的事情，但不是在代码隐藏中。

```
ASB_DataDataContext adb = new ASB_DataDataContext();
var qryAdb = from asb in adb.Inputts
             select new
             {
                 NRTno = asb.NRT_No,
                 PerpSurname = asb.Allg_Perp_Surname,
                 PerpSteet = asb.Allg_Perp_Street,
                 HouseNo = asb.Allg_Perp_House_No,
                 Complainer = asb.Complainant_Surname,
                 Complainer_Street = asb.Complainant_Street
             };

if (txtCompSurname.Text != "")
    qryAdb = qryAdb.Where(asb => asb.Complainer == txtCompSurname.Text);
if (txtCompStreet.Text != "")
    qryAdb = qryAdb.Where(asb => asb.Complainer_Street == txtCompStreet.Text);
if (txtPerpSurname.Text != "")
    qryAdb = qryAdb.Where(asb => asb.PerpSurname == txtPerpSurname.Text);
if (txtPerpStreet.Text != "")
    qryAdb = qryAdb.Where(asb => asb.PerpSteet == txtPerpStreet.Text);
if (txtNrtNo.Text != "")
    qryAdb = qryAdb.Where(asb => asb.NRTno == Convert.ToInt32(txtNrtNo.Text));

gvResults.DataSource = qryAdb.Select(o => new { o.NRTno, o.PerpSurname, o.PerpSteet, o.HouseNo, o.Complainer, o.Complainer_Street });
gvResults.DataBind(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T09:27:20.390

您不能从该“其他类”返回匿名类型，因此您需要为单个返回值创建一个“真实”类。然后你可以`IEnumerable<ReturnClass>`从你的方法中返回一个。

然后，您可以绑定该返回值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T09:38:57.543

为您返回的任何内容创建一个 POCO 类：

```
public class Person
{
    public NRTNo string {get; set;}
    ....
} 
```

在您的 LINQ 中选择进入此类（请注意选择新后的 Person 类名称）：

```
var qryAdb = (from asb in adb.Inputts
                          select new Person
                          {
                              NRTno = asb.NRT_No,
                              PerpSurname = asb.Allg_Perp_Surname,
                              PerpSteet = asb.Allg_Perp_Street,
                              HouseNo = asb.Allg_Perp_House_No,
                              Complainer = asb.Complainant_Surname,
                              Complainer_Street = asb.Complainant_Street
                          }); 
```

对查询执行您已经在执行的操作：

```
 if (txtCompSurname.Text != "")
                qryAdb = qryAdb.Where(asb => asb.Complainer == txtCompSurname.Text);
            if (txtCompStreet.Text != "")
                qryAdb = qryAdb.Where(asb => asb.Complainer_Street == txtCompStreet.Text);
            if (txtPerpSurname.Text != "")
                qryAdb = qryAdb.Where(asb => asb.PerpSurname == txtPerpSurname.Text);
            if (txtPerpStreet.Text != "")
                qryAdb = qryAdb.Where(asb => asb.PerpSteet == txtPerpStreet.Text);
            if (txtNrtNo.Text != "")
                qryAdb = qryAdb.Where(asb => asb.NRTno == Convert.ToInt32(txtNrtNo.Text)); 
```

现在返回您的 POCO 对象列表：

```
return qryAdb.ToList<Person>(); 
```

您现在可以在您的 UI 中以与当前绑定相同的方式绑定到 this。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T09:43:24.603

这是一种可能性：使用网络表单进行用户输入。将查询发送到一个类（不是表单后面的代码），仍然像以前一样编写 sql。（仅无 oracle 语法）并将其解析为对象并返回对象的`List`集合。您还可以返回一个数据表并将其绑定到gridview。希望它有点帮助。

WebForms1.aspx：

```
<asp:TextBox runat="server" ID="tb"></asp:TextBox>
<asp:Button runat="server" ID="btn" Text="go" OnClick="btn_OnClick"/><br/>
<asp:GridView runat="server" ID="gv"></asp:GridView> 
```

WebForm1.aspx.cs：

```
protected void btn_OnClick(object sender, EventArgs e)
{
    if(!String.IsNullOrWhiteSpace(tb.Text))
    {
        Class1 cl = new Class1();
        List<Complainer> complainers = cl.SearchBySurname(tb.Text);
        gv.DataSource = complainers;
        gv.DataBind();
    }
} 
```

Class1.cs：

```
public class Class1
{
    internal List<Complainer> SearchBySurname(string p)
    {
        SqlCommand com = new SqlCommand("select * from Complainers where surname = @sur ");
        com.Parameters.AddWithValue("sur", p);
        List<Complainer> complainers = new List<Complainer>();
        using (SqlConnection con = new SqlConnection(System.Configuration.ConfigurationManager.ConnectionStrings["yourconstring"].ToString()))
        {
            con.Open();
            DataTable dt = new DataTable();
            SqlDataAdapter da = new SqlDataAdapter(com);
            da.Fill(dt);

            foreach(DataRow dr in dt.Rows)
            {
                Complainer c = new Complainer(dr);
                complainers.Add(c);
            }
        }
        return complainers;
    }
} 
```

投诉者.cs：

```
public class Complainer
{
    private int _id;

    public Complainer(System.Data.DataRow dr)
    {
        // TODO: Complete member initialization
        _id = Convert.ToInt32(dr["id"]);
    }
} 
```

**编辑** 将示例项目放在保管箱上：[https ://www.dropbox.com/s/l7clhlvgdk2gul3/WebApplication2.zip](https://www.dropbox.com/s/l7clhlvgdk2gul3/WebApplication2.zip)

# asp.net-4.5 - 中继器控件没有公共属性 ModelType

> ID：11153460
> 
> 赞同：7
> 
> 时间：2012-06-22T09:21:16.703
> 
> 标签：asp.net-4.5

我正在尝试使用 asp.net 4.5 的模型绑定功能。我正在使用 Repeater 控件，在其上设置 ModelType 属性，但是一旦我运行应用程序，我就会收到解析器错误，它指出，Repeater 没有 ModelType 公共属性。这是标记

```
<ul>
    <asp:Repeater ID="rptDepartments" runat="server" ModelType="TestWebApp.Models.Department">
        <ItemTemplate>
            <li>
                <%#: Item.DeptName %>
            </li>
        </ItemTemplate>
    </asp:Repeater>
    </ul> 
```

有任何想法吗 ？我看到了很多将模型绑定与网络中的中继器控制结合使用的示例。

我正在使用 VS 2012 RC。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-22T22:06:05.503

看起来 ModelType 属性已重命名为 ItemType 请参阅[http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.repeater.itemtype(v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.repeater.itemtype(v=vs.110).aspx)了解更多信息.

# xml - XSLT 转换添加空 标签

> ID：11153462
> 
> 赞同：-1
> 
> 时间：2012-06-22T09:21:19.200
> 
> 标签：xml, xslt

我必须调整一组复杂的 XSLT 文件，但我遇到的问题是它添加了空段落标签，我不知道为什么。我相信它与 for-each 有关，但我不知道这些标签来自哪里，因为转换中的任何地方都没有 p-Tags。

当 for-each 中的某些内容为空时，这是 xsl 可能会自行添加的内容吗？它总是直接在 for-each 之后和 for-each 结束之前（有效地围绕生成的输出）。

如果标签为空，我如何检查 for-each 内部？

感谢您的帮助。

文件主要是这样的结构：

```
// Base File
<?xml version="1.0"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:import href="library.xsl" />
<xsl:output method="html" encoding="utf-8" indent="yes"/>

// Some keys are defined here ...

<xsl:template name="base">                  
    <xsl:call-template name="someTemplate" />
    // More templates follow ...
</xsl:template>

</xsl:stylesheet> 
```

library.xsl 现在有这样的模板“someTemplate”：

```
<xsl:template name="someTemplate">
     <xsl:for-each select="[very complicated XPath here]">
        // Some HTML generation, but absolutely withoug p-tags!!!!
     </xsl:for-each>
</xsl:template> 
```

我已阅读线程[XSLT：如何从我的结果中排除空元素？](https://stackoverflow.com/questions/2706202/xslt-how-to-exclude-empty-elements-from-my-result)并且还尝试应用命名模式（因为我的文件正在使用 for-each），但它没有成功。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T09:38:57.540

不，XSLT 不会自行创建`<p>`元素。如果`<p>`在样式表或任何导入/包含的样式表中找不到元素，则可以从源文档中复制它们。

从您显示的代码中很难分辨。您应该尝试使用尽可能小的输入文件来重现该问题，并将 XSLT 转换减少到最少的规则集。

# python - 无法使用自定义 NetworkAccessManager 将 ogg 本地文件流式传输到 webview

> ID：11153466
> 
> 赞同：1
> 
> 时间：2012-06-22T09:21:26.723
> 
> 标签：python, pyqt, pyqt4, qtwebkit, qtnetwork

我一直在调查这个问题，但我大部分时间都被困住了，我正在使用 python、pyqt 和 pywebkit 编写一个自定义音乐播放器。情况是我可以毫无问题地播放 .mp3 文件甚至 .wav 文件，但永远无法访问 ogg 文件。

示例代码

```
#!/usr/bin/env python

import sys,gtk,webkit,os,json,re,base64,urllib2,sqlite3,math,time,Queue,mimetypes,subprocess
from PyQt4 import QtGui, QtCore, QtWebKit, QtNetwork
from PyQt4.QtCore import QUrl

class NetworkAccessManager(QtNetwork.QNetworkAccessManager):
    def __init__(self, parent):
        QtNetwork.QNetworkAccessManager.__init__(self, parent)

    def createRequest(self,operation,request,outgoingData):
        url = unicode(request.url().toString())

        if url.startswith('http://mycustomprotocol') :
            localFile = url[24:];
            print localFile
            request.setUrl(QUrl.fromLocalFile(localFile))

        reply = QtNetwork.QNetworkAccessManager.createRequest(self,operation,request,outgoingData)
        self.emit(QtCore.SIGNAL('networkRequestCreated(QNetworkReply*)'),reply)
        print 'createRequest',url,operation
        #self.connect(reply, QtCore.SIGNAL('downloadProgress(qint64, qint64)'), self.foo)
        return reply

    def foo(self, *args):
        print args

class Browser(QtGui.QMainWindow):
    # Ventana del programa
    def __init__(self):
        super(Browser,self).__init__(None)

        self.tabWidget = QtGui.QTabWidget(self)
        self.setCentralWidget(self.tabWidget)

        self.webview = QtWebKit.QWebView()
        self.n = NetworkAccessManager(self);
        self.webview.page().setNetworkAccessManager(self.n)
        self.tabWidget.setCurrentIndex(self.tabWidget.addTab(self.webview,'loading...'))
        #self.webview.setUrl(QUrl.fromLocalFile("index.html"))
        self.webview.setUrl(QUrl.fromLocalFile("/home/marcos/Descargas/examp/index.html"))

def main():
    app = QtGui.QApplication(sys.argv)
    browser = Browser()
    browser.show()
    sys.exit(app.exec_())

if __name__ == '__main__':
    main() 
```

索引.html

```
<html>
<body>
    <div><audio src='http://mycustomprotocol/1.mp3' controls=true/></div>
    asd
    <div><audio src='http://mycustomprotocol/1.ogg' controls=true/></div>
    asd
    <div><audio src='http://mycustomprotocol/1.wav' controls=true/></div>
</body>
</html> 
```

您只需要使用不同类型的音频文件填充文件夹（注意加载 webview URL 中的 index.html 路径是绝对的，无法使示例使用相对）。测试资源：

[http://en.wikipedia.org/wiki/File:Example.ogg](http://en.wikipedia.org/wiki/File:Example.ogg)

http://audio.online-convert.com/convert-to-wav

找到谷歌“文件类型：mp3”

您会看到音频 mp3 播放得很好，wav 也是如此，但奇怪的是 ogg 文件无法播放。如果您将 webview 指向 URL [http://en.wikipedia.org/wiki/File:Example.ogg](http://en.wikipedia.org/wiki/File:Example.ogg)，您将能够播放该 ogg 文件，并且页面 html5test 表示 webview 支持 vorvis 音频。但是再次无法通过NetworkAccessManager玩，我有点迷茫，请给我一些提示

# java - 功率谱的自相关

> ID：11153467
> 
> 赞同：1
> 
> 时间：2012-06-22T09:21:28.377
> 
> 标签：java, math, fft, spectrum, spectral

有谁知道如何实现一张图像的功率谱的自相关？我尝试使用：

```
 autocorrel = ifft( | fft(power spectrum) | ^ 2 ); 
```

但它不工作？你知道为什么或其他方式吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T01:39:30.873

*时域中*的自相关是通过卷积完成的。函数与 0 附近的自镜像卷积。因此，`autocorrel = linear_2d_convolution( S(x,y), S(-x,-y) )`，其中`S`表示功率谱。

# sharepoint - 使用 jquery 获取多行字段值

> ID：11153468
> 
> 赞同：0
> 
> 时间：2012-06-22T09:21:39.423
> 
> 标签：sharepoint, sharepoint-2010, sharepoint-designer

我已经使用下面的代码来获取自定义 NewForm.aspx 中的单行文本字段值，并且它工作正常。

```
function PreSaveAction()
  {
  var value = $("input[title="Title"]").val();
  alert(value);
  }; 
```

如果我使用相同的代码来获取多行文本字段的值，则意味着它返回未定义。我希望这是因为多行文本内容将在 html 中。

```
function PreSaveAction()
  {
  var value = $("input[title="Notes"]").val();
  alert(value);
  }; 
```

请帮助我获取此 html 内容。

提前致谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T16:55:10.930

尝试：

```
function PreSaveAction()
{
    var value = $("input[id$='TextField_spSave']").val();
    alert(value);
}; 
```

SharePoint 2010 中的 WYSIWYG 控件不是`input`控件（嗯，不完全是）。它是 、 和 控件的`div`混合`p`体`span`。但是，`input`您可以使用一个名为 TextField_spSave 的隐藏名称。

有关详细信息，请参阅[jquery 找不到richtextbox](http://social.msdn.microsoft.com/Forums/en-US/sharepointdevelopment/thread/ae414aec-1dd0-474b-bda7-04092f1c4908/)。

# java - 延迟加载和多个事务

> ID：11153471
> 
> 赞同：0
> 
> 时间：2012-06-22T09:21:59.017
> 
> 标签：java, spring, hibernate

我对一个休眠会话中的惰性迭代器和多个事务有点困惑。有以下代码块：

```
@Transactional
public void runtProcessing() {
HibernateTemplate hibernateTemplate = ...
Session hibernateSession = hibernateTemplate.getSessionFactory().getCurrentSession();
Iterator<DomainObject> domainObjects = hibernateTemplate.iterate(...);
            try {
                while (domainObjects.hasNext()) {
                    hibernateSession.beginTransaction();
                    DomainObject domainObject = domainObjects.next();

                    processDomainObject(domainObject);
                    hibernateSession.getTransaction().commit();
                }
} 
```

由于有多个事务，我想知道迭代器在什么事务中工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T09:50:17.147

从这里[http://ayende.com/blog/3775/nh-prof-alerts-use-of-implicit-transactions-is-discouraged](http://ayende.com/blog/3775/nh-prof-alerts-use-of-implicit-transactions-is-discouraged)

> 当我们不定义自己的事务时，我们会退回到隐式事务模式，其中对数据库的每条语句都在自己的事务中运行，从而导致更高的性能成本（数据库构建和拆除事务的时间）并降低一致性.

因此迭代器作为其自身事务的一部分运行。希望这是有道理的。

# ruby-on-rails-3 - 字符 # 用于分隔 jquery 移动网站中的 url

> ID：11153472
> 
> 赞同：0
> 
> 时间：2012-06-22T09:22:06.270
> 
> 标签：ruby-on-rails-3, url, jquery-mobile

我不理解 url 与 jquery mobile 的使用。当我在 jquery 移动网站中导航时，url 很奇怪（对我来说），甚至有 2 个 url 由“#”字符分隔。例如，如果我首先访问我网站的登录页面，然后转到主页，则 url 变为： `http://mysite/login#/home`

为什么？我怎样才能解决这个问题？

我希望 che url 作为经典浏览器模式工作，如果我访问登录页面，则 url 必须是：`http://mysite/login` 如果我转到主页，则 url 必须是：`http://mysite/home`

我的网站是用 ruby​​ on rails 3 编写的，我使用最新版本的 jquery (1.7.1) 和 jquery mobile (1.1.0)

我不会使用 rel=external 解决方案，导航变得太慢了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T10:23:04.010

您可以使用[此页面](http://jquerymobile.com/test/docs/pages/page-navmodel.html)`pushStatePlugin`上的描述。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T10:02:09.523

您可以尝试使用 data-ajax="false"，但这会破坏转换...

# python - Association_proxy 创建者中的会话

> ID：11153474
> 
> 赞同：2
> 
> 时间：2012-06-22T09:22:06.953
> 
> 标签：python, sqlalchemy

我使用 SQLAlchemy 0.5 和 Python 2.6.6。

我想在 Association_proxy 的创建者中选择或创建一个引用对象。我的问题是，我需要一个会话，但我不知道在创建者回调中从哪里得到它。

*如何在其关联代理的创建者之一中使用对象所属的会话？*

**我尝试过的方法不起作用**

我找到了`session.object_session`，但回调中没有任何对象，除非它是我的 ORM 对象的一部分。如果它是我的对象的一部分，则调用者将不会作为方法调用（第一个参数是代理的值，而不是对象的引用）：

```
class Event(ManagerBase):

    # If association_proxy calls this, 'self' is the key, not the
    # reference to the calling instance.
    def _field_find_or_create(self, key, val):
        session = session.object_session(self)
        field = session.query(Field).filter_by(name=key).first()
        if not field:
            field = Field(name=key)

        return EventFieldValue(field=field, value=val)

    fields = association_proxy("field_values", "value",
                               creator=_field_find_or_create) 
```

我可以将对象本身传递给创建者函数吗？在这种情况下，我可以在这个对象上调用 object_session。

我的项目使用了几个会话，因此我必须确定创建者执行的具体会话。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-05T08:39:10.317

我认为您需要的是一种验证方法：

```
from sqlalchemy.orm import validates, object_session

class Event(ManagerBase):
   value = relationship(FieldValue)    
   fields = association_proxy("field_values", "value",
                              creator=lambda group: FieldValue(value=value))

   @validates("field_values") 
   def _validate_field_values(self, key, value): 
       session = object_session(self) 
       if session is not None: 
           v = value.value 
           with session.no_autoflush: 
               uvalue = session.query(FieldValue) \ 
                   .filter_by(name=a) \ 
                   .first() 
               if uvalue: 
                   session.expunge(value) 
                   return ugroup 
       return value 
```

学分转到[https://groups.google.com/forum/#!topic/sqlalchemy/RMDI1SnGhd0](https://groups.google.com/forum/#!topic/sqlalchemy/RMDI1SnGhd0)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T15:04:39.303

这个问题在 SQLAlchemy 0.7 中也存在。我在略有不同的情况下遇到了同样的问题。因为关联代理是*Python 描述符*，并且描述符在类级别上运行，所以您不能为创建者函数提供对绑定方法（在实例级别上运行）的引用。

我得出了以下解决方案：

1.  在您的创建者函数中，从全局会话创建者创建一个新会话并获取您的对象
2.  *立即从此临时会话中删除您获取的*对象**
**   关闭会话*   归还你的物品*

 *我的代码如下所示：

```
def find_object(name):                                                                                                                                                                                    
    # Because we can't get a grip on the actual session we instead use a global
    # session for querying this instance.
    session = Session()
    obj = Model.query(session).filter_by(name=name).first()
    # We also have to dump the reference to that session, so the created object
    # can be used on other sessions.
    session.expunge(obj)
    # We don't need that session any more.
    session.close()
    return obj 
```*

# visual-studio-2010 - Visual Studio 2010 将内容文件复制到自定义目录

> ID：11153476
> 
> 赞同：3
> 
> 时间：2012-06-22T09:22:20.680
> 
> 标签：visual-studio-2010, resources, directory, copy, config

我有一个关于将内容文件复制到 Visual Studio 中的自定义目录的问题。在项目中，我的组件中有许多配置 xml 文件的文件夹，以避免重复。因此，对于所有其他项目，我已将配置文件添加为链接文件，其中“复制到输出目录”属性设置为“始终复制”。

一切都很好，按预期工作，直到现在。目前我添加了 WCF 项目，以同样的方式添加了配置文件。但是当这个配置文件被复制到 bin 目录时有一个小问题，但是 WCF 的工作目录是项目的根目录。所以现在所有的 init 方法都无法执行。

是否有人对如何设置自定义目录以复制 Visual Studio“复制到输出”属性的文件有想法或解决方法？

PS：抱歉没有代码，可以根据要求提供一些截图。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T09:25:42.577

尝试使用[构建后事件](http://msdn.microsoft.com/en-us/library/e2s2128d%28v=vs.80%29.aspx)进行复制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T09:31:54.437

我可能误解了您的问题，但是您是在将文件构建到一个目录之后吗？

如果我在解决方案中有多个项目，我将有一个主要的起始项目构建到它的标准目的地

**斌\调试**

然后将其他项目构建到与我的主目录相同的目录中。

**..\OriginalProjectNameHere\bin\Debug**

要到达那里，请右键单击解决方案中的项目探索并选择**属性**，然后**构建**并向下滚动到**输出路径**

我可能误解了你的问题，如果这没有帮助，对不起。

# caching - EntLib 5 缓存 - 疑似死锁 - cpu 挂在 100%

> ID：11153477
> 
> 赞同：0
> 
> 时间：2012-06-22T09:22:20.800
> 
> 标签：caching, deadlock, cpu-usage, enterprise-library-5

我有这个问题好几个月了。我从 entlib 4.1 升级到 5。我的应用程序正在缓存越来越多的项目。有时（有时一天三次）CPU 以 100% 的使用率挂起，但应用程序保持响应。发生这种情况时，我使用 dotTrace 获取快照，并且似乎大部分时间都花在`PriorityDateComparer.Compare`. 此比较器仅由 System.Collections.SortedList 的构造函数使用，并包含以下主体：

```
public int Compare(object x, object y)
{
   CacheItem leftCacheItem = (CacheItem)unsortedItems[(string)x];
   CacheItem rightCacheItem = (CacheItem)unsortedItems[(string)y];

   lock (rightCacheItem)
   {
         lock (leftCacheItem)
         {
            if (rightCacheItem == null && leftCacheItem == null)
            {
               return 0;
            }
            if (leftCacheItem == null)
            {
               return -1;
            }
            if (rightCacheItem == null)
            {
               return 1;
            }

            return leftCacheItem.ScavengingPriority == rightCacheItem.ScavengingPriority
               ? leftCacheItem.LastAccessedTime.CompareTo(rightCacheItem.LastAccessedTime)
               : leftCacheItem.ScavengingPriority - rightCacheItem.ScavengingPriority;
         }
   }
} 
```

问题1：我们能确定两个缓存项总是以相同的顺序锁定吗？如果我检查 SortedList 的实现，我不这么认为。

问题 2：如果我的第一个问题的答案是*否定*的，那么我们如何解决这个问题？我看到了一些可能性：

1.  移除锁定并确保只使用一个线程。
2.  将一把锁放在 unsortedItems 集合上而不是 cacheItems 上。
3.  以某种方式找出锁定项目的顺序，例如首先比较 (string)x 和 (string)y，然后以正确的顺序锁定它们。
4.  其他： ...

你喜欢哪个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T20:08:53.580

I changed the comparer so that it does not need to lookup the cache items:

```
 int IComparer<CacheItem>.Compare(CacheItem leftCacheItem, CacheItem rightCacheItem)
  {
     lock (rightCacheItem)
     {
        lock (leftCacheItem)
        {
           if (rightCacheItem == null && leftCacheItem == null)
           {
              return 0;
           }
           if (leftCacheItem == null)
           {
              return -1;
           }
           if (rightCacheItem == null)
           {
              return 1;
           }

           return leftCacheItem.ScavengingPriority == rightCacheItem.ScavengingPriority
               ? leftCacheItem.LastAccessedTime.CompareTo(rightCacheItem.LastAccessedTime)
               : leftCacheItem.ScavengingPriority - rightCacheItem.ScavengingPriority;
        }
     }
  } 
```

And in `Microsoft.Practices.EnterpriseLibrary.Caching.ScavengerTask` I changed the calling method accordingly from:

```
 private static SortedList SortItemsForScavenging(Hashtable unsortedItemsInCache)
  {
     return new SortedList(unsortedItemsInCache, new PriorityDateComparer(unsortedItemsInCache));
  } 
```

to

```
 private static List<CacheItem> SortItemsForScavenging(Hashtable unsortedItemsInCache)
  {
     List<CacheItem> cacheValues = new List<CacheItem>(unsortedItemsInCache.Values.Cast<CacheItem>());
     cacheValues.Sort(new PriorityDateComparer());
     return cacheValues;
  } 
```

# php - Visual Basic iPhone IMEI CHECK？

> ID：11153480
> 
> 赞同：0
> 
> 时间：2012-06-22T09:22:28.517
> 
> 标签：php, iphone, ipod, imei

嗨，我需要苹果直接主机的imei检查源代码： [https ://selfsolve.apple.com/warrantyChecker.do?sn=IMEI](https://selfsolve.apple.com/warrantyChecker.do?sn=IMEI)

进口系统.Net

Public Class Form1 '获取值 Private WithEvents webclient As New webclient Public Function getresult(ByVal url As String) As String Return New System.Text.UTF8Encoding().GetString(webclient.DownloadData(url)) End Function

```
Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
    TextBox2.Text = getresult("https://selfsolve.apple.com/warrantyChecker.do?sn=" + TextBox1.Text)
End Sub 
```

结束类

我使用这个脚本，但是当我从网页获取原始数据时（在文本框中查看源代码而不是数据示例（IMEI、MODEL、Carrier 等），你能帮我制作自己的软件或 php 脚本吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T09:36:09.313

你的问题不是真正的问题。这更像是一个任务。

该 URL 会返回一个您需要解析的 JSONP 对象。

你说你想要一个 php 脚本来告诉你如何解析 JSON 对象，所以你需要这样做：

```
<?php
$sn = $_GET['sn'];
//load the input (the serial number), you should then perform input filtering on the SN by filtering out non required characters

$o = file_get_contents("https://selfsolve.apple.com/warrantyChecker.do?sn=".$sn);
//fetch the URL's response body into a variable

$o = json_decode($o, true);
//decode the json object into an array

print_r($o);
//recursively print the array to show you what's inside the array
?> 
```

调用它：scriptname.php?sn=ENTER_SN_HERE

# php - php上传文件的安全问题？

> ID：11153481
> 
> 赞同：0
> 
> 时间：2012-06-22T09:22:29.710
> 
> 标签：php, security, file-upload, upload

> **可能重复：**
> [上传的安全威胁](https://stackoverflow.com/questions/11061355/security-threats-with-uploads)

我允许用户将图像上传到我们的网站。我是否认为我应该检查文件 .jpg/.jpeg/.gif 的扩展名以及 mime 类型以确保没有上传危险文件？

我还应该在上传时调整文件大小以检查它是否是实际的图像文件，而不是重命名的 exe 或类似文件？例如，如果调整大小失败，则它不是图像文件。

我还应该防范其他形式的攻击吗？

编辑：还在图像文件夹中添加一个 .htaccess 文件，因此无法执行 php 文件：

```
AddHandler cgi-script .php .php3 .php4 .phtml .pl .py .jsp .asp .htm .shtml .sh .cgi
Options -ExecCGI
order deny,allow
deny from all 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T09:33:26.083

识别文件类型的最佳方法是使用`file`命令行工具或任何其他基于相同“魔术字符串”数据库原理的工具，它知道许多文件的二进制签名并告诉你哪个是匹配的。

这种方法的优点是它不受扩展名和 MIME 类型操作的影响，也不受用于调整文件大小的图像操作库的潜在攻击（其中一些多年来一直存在）。

这种方法的缺点是它可能会在临界情况下失败（一般来说，验证问题不大），并且您需要能够使用这样的工具，这在许多共享托管服务提供商上可能不可用。从好的方面来说，这里有一个使用这种方法的 PHP 扩展：[http ://www.php.net/manual/en/intro.fileinfo.php](http://www.php.net/manual/en/intro.fileinfo.php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T09:56:39.027

调整图像大小听起来是个好主意。不要忘记，有些真实图片是用 php 代码上传的，只是为了在任何本地包含漏洞中使用它们。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-22T09:26:12.047

您绝对应该检查上传文件的 mime 类型，因为攻击者可以有效地上传一个名为 somethingbad.php.jpg 的文件，并且它将像普通的 php 脚本一样执行。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-06-22T10:20:32.800

上传文件没有安全问题。

1.  只需确保您只存储带有图像扩展名的上传文件
2.  对文件大小设置上限 - 这将保护服务器免受恶意人员发送（例如`/dev/zero`）给您的影响。
3.  提供这些文件时，请确保 MIME 类型适用于图像。

其他帖子不正确

1.  浏览器不运行 PHP 代码
2.  不要相信来自浏览器的任何东西。只需从浏览器中获取数据作为建议。即你可以伪造 MIME 类型。

# java - 从通用 SOAP 请求实现 ResultSet 接口

> ID：11153482
> 
> 赞同：3
> 
> 时间：2012-06-22T09:22:35.850
> 
> 标签：java, xml, web-services, soap, wsdl

我需要创建一个实现 Java ResultSet 接口的对象，从通用 SOAP 请求中获取数据（我需要在更高级别上使用这些 SOAP 结果集和 JDBC 结果集）。

正如我在标题中所写，SOAP 请求可以是通用的：它取决于传递的参数并且可以使用不同的 Web 服务，所以我只知道运行时的 wsdl 和 SOAP 服务将提供给我的结构。

在过去的几天里，我一直在试图弄清楚如何做到这一点，我提出了一些想法：

1- 将 SOAP 主体转换为 xml WebRowSet 文档，该文档可以解组为 WebRowSetImpl 类，该类实现 WebRowSet 接口（接口扩展 ResultSet）。在这种情况下，我必须从 WSDL 和 SOAP 响应文档开始即时制作自定义 XSLT。

2- 从 SOAP 响应创建 Java 对象，然后尝试使用 Java 对象中的数据映射和填充通用存根 JDBC 结果集

3- 将来自 SOAP 响应的所有数据存储到（规范化或非规范化）数据库中，然后使用任何 JDBC 驱动程序从数据库中读取。

您认为哪种方式总体上是最好的？最简单的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T09:30:00.333

我不认为可以也不应该这样做。

我永远不想看到任何实现`ResultSet`逃离持久层的东西。您需要将其映射到集合或对象中并在方法范围内关闭它。

您真正需要的是映射`ResultSet`到的通用集合。最好的方法是 a `Map`of `Lists`，其中键是列名，值是`Lists`列，或者 a `List`of `Maps`，其中每个 Map 代表一行的列名/值对。

任何一个都是绝对通用的，但也没有合同。

我认为这是考虑 Web 服务的糟糕方式。好的人通常会牢记合同的概念。它们的功能狭窄且定义明确；他们的输入和输出也是如此。

您听起来像是希望能够发送用户希望的任何 SQL 查询，并发送回任何结果。这对我的口味来说太松散了。

真正的服务拥有自己的数据并将其用于自己的狭隘目的。任何客户都不应该提取一堆东西，做一些事情，然后把它放回去。将所有这些隐藏在服务中。将这些客户端正在对数据执行的操作添加到其 API 中，并且不要让抽象泄漏。

如果您想更好地了解如何实现面向服务的架构，请阅读 Werner Vogel。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T10:25:06.760

据我了解，您需要获取数据：

.1。从*关系数据库*通过`JDBC`

或者

.2\. 通过请求从*Web 服务*`SOAP`

`ResultSet`接口是其中的一部分，**仅**`JDBC`适用于关系*数据库*，**绝对**不适用于*Web 服务*。这就是为什么看起来你想为你的任务使用错误的工具。

 ******正确的方法是：

.1。编写您自己的高级抽象，从*关系数据库*和*Web 服务*作为数据源进行抽象（不要与`javax.sql.DataSource`类混淆），然后提供两种实现：一种与*关系数据库*一起使用`JDBC`，另一种与*Web 服务*处理`SOAP`请求一起使用。

.2\. 如果存在，请使用一些现有的框架来执行此操作。虽然我不确定，但你可以查看[http://www.smooks.org/](http://www.smooks.org/) - 也许它有一些相关的东西。

如果您**真的没有任何选择**，并且**必须**仅使用接口来处理数据源`JDBC`-我认为最简单的方法是您的第三个建议，尽管它会有很多缺点（例如*性能不佳*）

希望这可以帮助******

# iphone - iPhone用户登录的编码示例

> ID：11153484
> 
> 赞同：-5
> 
> 时间：2012-06-22T09:22:43.150
> 
> 标签：iphone, security, login, passwords

我是 iPhone 开发的新手。我将学习创建一个用户需要登录的页面。如果用户凭据正确，则应允许他/她进入应用程序的下一页。

任何帮助将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T09:56:32.007

在这里，我们调用执行选择器 sentAuthenticateDetails 来进行 Web 服务身份验证。

```
-(IBAction)login_Button_Clicked:(id)sender  
{ 

    [currentTextField resignFirstResponder];
    BOOL allFieldsSuccess;

    if((![self.userNameOrEmail_Str length]>0)||(![self.password_Str length]>0)) 
    {
        UIAlertView *alertView=[[UIAlertView alloc]initWithTitle:@"for Login" message:@"Please enter proper Userid & Password" delegate:self cancelButtonTitle:@"Ok" otherButtonTitles:nil];
        [alertView show];
        [alertView release];
        NSLog(@"no values");
        allFieldsSuccess = NO;
        return;

    }
    else
    {
      allFieldsSuccess = YES;  
    }

    if (allFieldsSuccess==YES)// && (emailSuccess==YES))
    {

        [self.spinner startAnimating];

        [self performSelector:@selector(sentAuthenticateDetails) withObject:nil afterDelay:0.2];
    }   
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T09:33:57.987

在您的登录按钮上给出以下方法...

```
-(IBAction)onClickLogin:(id)sender
{
    if ([txtUserName.text isEqualToString:@""]) 
    {
        ///here paste your Alert View with message:@"Please Fill Up Email and Password"
    }
    else if([txtPassWord.text isEqualToString:@""])
    {
        ///here paste your Alert View with Message message:@"Please Fill Up Email and Password"        
    }
    ///if here you use web-service for store the user data then give the request with username and password also
    if([txtUserName.text isEqualToString:storeduserName] && [txtPassWord.text isEqualToString:storedpassWord]
    {
       yourViewController *objviewController = [[yourViewController alloc] initWithNibName:@"yourViewController" bundle:nil];
       [self.navigationController objviewController animated:YES];
    }
   else
   {
        ///Alert with username or password is incorrect try again
   }
} 
```

还检查下面的演示...

[https://github.com/ijoshsmith/iOSLogin](https://github.com/ijoshsmith/iOSLogin)

希望这可以帮助你...... :)

# ember.js - 从 ember.js 主干样式触发自定义事件

> ID：11153492
> 
> 赞同：5
> 
> 时间：2012-06-22T09:23:09.373
> 
> 标签：ember.js

我有一个无限滚动器，可以在用户滚动时向页面添加新元素。我希望多个订阅者能够绑定到我每次添加新元素时触发的事件。

我是否可以像在 Backbone 中一样发起自定义事件？

例如，在主干中，我可以创建一个这样的事件模型：

```
this.vent = _.extend({}, Backbone.Events); 
```

然后我可以像这样绑定事件：

```
this.vent.bind('my:custom:event', this.handler); 
```

然后我可以像这样解雇他们：

```
this.trigger('my:custom:event', args); 
```

我可以像这样使用 Ember.evented 还是有更好的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T18:06:17.317

如果您希望 Ember.js 识别这些事件，您可以将这些事件添加到您的 App 定义中。查看[这篇了解 Ember.js 的文章](http://emberjs.com/guides/understanding-ember/the-view-layer/#toc_adding-new-events)，就在“包含”事件列表的下方。

# javascript - OnebyOne.js 脚本支持

> ID：11153494
> 
> 赞同：0
> 
> 时间：2012-06-22T09:23:15.600
> 
> 标签：javascript, jquery, html, jquery-ui, user-experience

您好，我有这个脚本，但是当我将鼠标悬停在它上面时我想在它里面添加它会停止动画，当我出去时它应该正常完成动画。它

```
<script type="text/javascript" src="js/jquery-1.7.1.min.js"></script>
<script src="js/onebyone/jquery.onebyone.js"></script> 
<script type="text/javascript" charset="utf-8"> 
         $(document).ready(function() {     
           $('#banner').oneByOne({
                className: 'oneByOne1', // the wrapper's name
                easeType: 'fadeInDown', //'fadeInLeft',  // the ease animation style
                width: 580,  // width of the slider
                height: 200, // height of the slider
                delay: 300,  // the delay of the touch/drag tween
                tolerance: 0.25, // the tolerance of the touch/drag  
                enableDrag: true,  // enable or disable the drag function by mouse
                showArrow: true,  // display the previous/next arrow or not
                showButton: false,  // display the circle buttons or not
                slideShow: true,  // auto play the slider or not
                slideShowDelay: 5000 // the delay millisecond of the slidershow
            });
         });
        </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T09:37:02.507

在[OneByOne 插件主页](http://codecanyon.net/item/jquery-onebyone-slider-plugin/684613)上有一个明确的提示：

> **喜欢在鼠标悬停时暂停幻灯片？**
> 请通过我的个人资料页面的联系表给我留言。我可以把更新源发给你。

我建议你这样做。

# java - 如何正确转义 lucene 查询？

> ID：11153495
> 
> 赞同：1
> 
> 时间：2012-06-22T09:23:31.203
> 
> 标签：java, lucene, escaping

我对 Lucene 很陌生，最近遇到了一个问题。我有一个看起来像这样的 lucene 文档：

```
--- type ---
gene
--- id ---
xla:379474
--- alt_id ---
emb:BC054227
gb:BC054227
ncbi-geneid:379474
ncbi-gi:148230166
rs:NM_001086315
rs:NP_001079784
unigene:Xl.24622
xla:379474 
```

我创建了下面的查询以检索该文档。它适用于`altId = 379474`但不适用于`altId = ncbi-geneid:379474`or `Xl.24622`。我猜想 altId 必须被转义并且`String altId = QueryParser.escape(altId)`没有运气。这是查询的预期行为吗？我错过了什么？

```
Query query1 = new TermQuery(new Term("type", "gene"));
Query query2 = new TermQuery(new Term("alt_Id", altId));

BooleanQuery query = new BooleanQuery();
query.add(query1, BooleanClause.Occur.MUST);
query.add(query2, BooleanClause.Occur.MUST); 
```

顺便说一句，我正在运行 lucene v3.0。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T09:26:04.763

这应该可以帮助你。试着让我知道。 [http://www.strongd.net/?p=44](http://www.strongd.net/?p=44)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T09:23:29.203

原来问题与转义无关，而是与`alt_id`索引方式和`TermQuery`. 有两种可能的解决方案：

1.  替换`TermQuery`为 的输出`QueryParser.parse`，用`QueryParser`创建的`StandardAnalyzer`。
2.  或索引`alt_id`为`Index.NOT_ANALYZED`并坚持使用`TermQuery`.

我实施了最后一个，效果很好。

# iphone - JPG 格式地图图块周围的空白区域

> ID：11153496
> 
> 赞同：0
> 
> 时间：2012-06-22T09:23:38.157
> 
> 标签：iphone, ios, mkmapview, mapkit

我正在尝试使用图块在 MKMapView 上显示自定义地图。但我的问题是当我使用 png 格式的瓷砖时，它占用了太多的存储空间。但是当我使用 jpg 格式的瓷砖时，地图上的瓷砖周围会出现空白，因为 jpg 不支持透明度。谁能指导我如何删除地图图块周围的空白。

红色是叠加层。自定义地图 .jpg 瓷砖周围出现白色。

![在此处输入图像描述](../Images/d49f118d506173ef39ec2ba63b2ac064.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T18:49:05.900

我使用 pngnq 来优化叠加层中的 png 图块，并且由于它们的内容比 jpeg 小。

你能混合使用jpeg和Pngs吗？每列的第一列和最后一列以及整个侧列是您唯一需要具有透明度的列（假设是凸图）。

# php - vBulletin 模板中论坛徽标的更改

> ID：11153507
> 
> 赞同：0
> 
> 时间：2012-06-22T09:23:59.700
> 
> 标签：php, vbulletin

我的问题的标题可能不清楚，所以让我解释一下我面临的问题是什么。

我是 vBulletin 系统的新手，但我在现有论坛上有一些工作要做。给定论坛的顶部标题上有一个徽标。该论坛应该可以从基于区域设置的不同域访问，并且在每种情况下，徽标都必须不同。

正如我所了解的，vBulletin 系统将它的所有模板保存在数据库中（一个名为“模板”的表）。我找到了带有标题内容的行，其中插入了徽标。它看起来像这样：

```
$final_rendered = '<div class="above_body"> <!-- closing tag is in template navbar -->
<div id="header" class="floatcontainer doc_header">
    ' . ''; 
if (vB_Template_Runtime::fetchStylevar('titleimage')) {
   $final_rendered .= '<div><a name="top" href="' . vB_Template_Runtime::linkBuild("forumhome") . '" 
     class="logo-image"><img src="' . vB_Template_Runtime::fetchStylevar("titleimage") . '" 
     alt="' . vB_Template_Runtime::parsePhrase("x_powered_by_vbulletin", '' . $vboptions['bbtitle'] . '') . '" /></a></div>';
} else {
    $final_rendered .= '';
}
 ... 
```

这里的关键部分是`src="' . vB_Template_Runtime::fetchStylevar("titleimage") . '"`实际设置图像源。源本身再次保存在数据库中，并在 vBulletin 的管理工具中设置。现在我需要的是根据域更改源。

我当然知道要这样做，但我不确定在哪里做。我认为手动更改数据库是不对的。据我了解，系统使用这些数据库行生成每个页面模板，所以我最好在完成的地方做一些更改？

问题是，我找不到构建实际模板的正确位置，或者**第一次加载**DB 中这些行的位置。

谁能给我一个线索在哪里或如何实现这一目标？

请注意，我不仅需要对标题图像进行更改，还需要对页脚、侧边栏等中的其他一些内容进行更改……所以最好找到一些最终的“变量”或其他东西，然后对其进行更改替换字符串。

解决方案不需要是一个完美的想法，只要一个粗略而快速的想法就会令人满意......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T04:50:17.447

创建一个使用“global_bootstrap_init_start”钩子的插件，这样它就可以在您需要的各个领域使用。

让插件确定哪个域正在为页面提供服务，然后设置一个全局变量，您可以在任何需要的地方检查它。在你的插件中加入这样的东西：

`$GLOBALS[yourDomainNameVariable] = "yourKeywordForParticularDomain";`

有趣的讨论在这里：[HTTP_HOST vs. SERVER_NAME](https://stackoverflow.com/questions/2297403/http-host-vs-server-name)

* * *

您需要根据域修改具有要更改的项目的每个模板。如果您通过查看 HTML 源代码获得了不同的 ID、类等，那么查找和更新模板的简单方法是：
`Admin Control Panel -> Styles and Templates -> Search in Templates`

我尝试搜索“ `<div class="above_body">`”并很快找到了标题模板。这是图像的代码：

```
`<img src="{vb:stylevar titleimage}" alt="{vb:rawphrase x_powered_by_vbulletin, {vb:raw vboptions.bbtitle}}" />` 
```

* * *

似乎最简单的事情是为每个域创建一个包含图像的单独文件夹，并为跨域的每个图像使用相同的名称。然后你可以用你的替换默认图像路径。例如：

```
`<img src="/images/{vb:raw GLOBALS.yourDomainNameVariable}/title.png" alt="{vb:rawphrase x_powered_by_vbulletin, {vb:raw vboptions.bbtitle}}" />` 
```

* * *

我刚刚仔细查看了您发布的代码，我怀疑您正在使用 vBulletin 3.x。我猜是因为我只使用过 4.x。我不确定我写的任何东西对你有多大用处。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T09:40:27.607

选项 1 替换为您的徽标

论坛\图片\杂项\vbulletin3_logo_white.gif

* * *

选项 2：转到管理面板并按照步骤操作

```
-Admin CP
-Expand Styles and Templates
-Style Manager
-Select StyleVars from the menu for the style you using. Click Go.
-In the search box type titleimage. It should show up under ImagePaths.
-In the Url textbox set the location to your new logo.
-Click on Save 
```

# java - 多类路径规范 - 无法创建 Java 虚拟机

> ID：11153510
> 
> 赞同：1
> 
> 时间：2012-06-22T09:24:08.303
> 
> 标签：java, classpath

我正在创建一个提交系统，我希望我的 Java 框架 .class 文件保存在特定位置，另一个 .class 文件由用户在另一个位置上传。框架应该在运行时找到上传的.class文件并输入各种测试数据。

我用来设置多个类路径的命令如下；

> java -cp /users/userD/SubmissionSystem/Java/Assessment4/Framework:/users/userD/SubmissionSystem/Java/Assessment4/Test 2>&1 -dataset=/home/users/userD/SubmissionSystem/Java/Assessment4/Test/dataset_9 .dat

不过，我在终端中收到以下错误；

> 无法识别的选项：-dataset=/home/users/userD/SubmissionSystem/Java/Assessment4/Test/dataset_9.dat
> 
> 无法创建Java虚拟机。

我正在尝试设置类路径以查找 .class 文件而不是 .jar 文件，但没有运气！

任何帮助将不胜感激！谢谢。

* * *

从命令中删除以下内容（之后将其连接起来）

> -dataset=/home/users/userD/SubmissionSystem/Java/Assessment4/Test/dataset_9.dat

我剩下：

> java -cp /users/userD/SubmissionSystem/Java/Assessment4/Framework:/users/userD/SubmissionSystem/Java/Assessment4/Test

尽管出现了 java -help 列表，但我认为我缺少命令中的参数？

* * *

根据[http://docs.oracle.com/javase/1.5.0/docs/tooldocs/windows/classpath.html](http://docs.oracle.com/javase/1.5.0/docs/tooldocs/windows/classpath.html)

针对我的问题设置类路径的正确语法是：

> java -cp /users/userD/SubmissionSystem/Java/Assessment4/Framework:/users/userD/SubmissionSystem/Java/Assessment4/Test 文件名

添加不带扩展名的文件名。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T10:49:15.773

我认为您必须指定要作为主要运行的类，例如“java -cp classpath classname arguments”。它也必须是全名，例如“com.stackoverflow.SomeClass”。

类路径告诉 JVM 在哪里可以找到代码，但可能包含多个可执行类，这就是为什么在这种情况下必须命名它的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T09:29:08.717

根据[这个页面](http://docs.oracle.com/javase/7/docs/technotes/tools/solaris/java.html)，没有调用选项`dataset`。

^([PS：虽然链接说的是 Solaris，但它也适用于 Linux。]).

# c# - Sharepoint Central Administrator V3 无法连接到配置服务器

> ID：11153511
> 
> 赞同：0
> 
> 时间：2012-06-22T09:24:08.733
> 
> 标签：c#, asp.net, sharepoint

我有一个正在运行的门户应用程序，它与 sharepoint 集成。现在我们必须为新的测试门户关闭服务器。但是克隆服务器后，sharepoint 停止工作。

错误是“无法连接到配置服务器”。当然，我们必须更改计算机的名称。服务器是windows server 2008 r2。我已经更改了配置文件、regedit 存储但没有任何效果。任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-26T10:26:10.967

更改 webconfig，并提供新的连接字符串名称。

# html - XSLT 在编码符号时使用 HTML 数字而不是 HTML 名称？

> ID：11153514
> 
> 赞同：3
> 
> 时间：2012-06-22T09:24:16.173
> 
> 标签：html, xslt, encoding

目前我们使用的符号`£`如下 `&pound;`：

但是 XSLT 中有没有办法强制这样的符号使用数字变体，例如`&#163;`？

我们需要能够转换所有具有 HTML 名称的符号，例如 `&pound;` `&copy;` etc。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T11:49:36.097

**使用**：

```
<xsl:output encoding="ascii"/> 
```

这会强制序列化程序为数值大于 127 的任何字符输出相应的字符实体引用。

# ruby-on-rails - 加载部分“没有路由匹配 {:controller=>"devise/home", :action=>"lng", :locale=>"en"} 时出现奇怪的设计路由错误

> ID：11153515
> 
> 赞同：0
> 
> 时间：2012-06-22T09:24:18.150
> 
> 标签：ruby-on-rails, ruby-on-rails-3, routing, devise, renderpartial

当加载低于部分时，我得到了奇怪的设计路由错误。

```
#lng_select 
```

= I18n.name_for_locale(locale) #lngs

```
#lngs_col1
  %ul
    %li
      = link_to "English", :controller => 'home', :action => 'lng', :locale => 'en'
    %li
      = link_to "Dutch", :controller => 'home', :action => 'lng', :locale => 'nl'
    %li
      /#= link_to "Belgian", :controller => 'home', :action => 'lng', :locale => 'nl'
      = link_to "Belgian", "#", :style => "color: #AFAFAF"
    %li
      /#= link_to "German", :controller => 'home', :action => 'lng', :locale => 'de'
      = link_to "German", "#", :style => "color: #AFAFAF"

#lngs_col2
  %ul
    %li
      /#= link_to "Español", :controller => 'home', :action => 'lng', :locale => 'es'
      = link_to "Español", "#", :style => "color: #AFAFAF"
    %li
      /#= link_to "Français", :controller => 'home', :action => 'lng', :locale => 'fr'
      = link_to "Français", "#", :style => "color: #AFAFAF"
    %li
      /#= link_to "Italiano", :controller => 'home', :action => 'lng', :locale => 'it'
      = link_to "Italiano", "#", :style => "color: #AFAFAF" 
```

设计输出的错误是：

```
No route matches {:controller=>"devise/home", :action=>"lng", :locale=>"en"} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T10:11:02.383

您的 routes.rb 文件似乎有问题。

# sungridengine - 在 SGE 中按编号及其名称请求节点

> ID：11153524
> 
> 赞同：11
> 
> 时间：2012-06-22T09:24:54.977
> 
> 标签：sungridengine

1.  在 SGE 中提交作业时如何请求节点数（不是 procs）？

    例如在 TORQUE 中，我们可以指定`qsub -l nodes=3`

2.  如何在 SGE 中通过节点名称请求节点？

    例如，在 TORQUE 中，我们可以通过、`qsub -l nodes=abc+xyz+pqr`where和are 主机名来做到这一点`abc``xyz``pqr`

    对于单个主机名，`qsub -l hostname=abc`它可以工作。但是如何在 SGE 中分隔多个主机名？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-10T06:40:56.950

使用 Grid Engine 请求节点数是间接完成的。当您想提交并行作业时，您必须请求并行环境 ( `man sge_pe`) 以及插槽数量（处理器等），例如`qsub -pe mytestpe 12`...

根据`allocation_rule`并行环境 ( `qconf -sp mytestpe`) 中的定义，插槽分布在一个或多个节点上。如果您有一个所谓的固定分配规则，您只需添加某个数字作为分配规则，例如 4（每个主机 4 个插槽），这很容易。如果您喜欢一台主机，只需提交`-pe mytestpe 4` 10 个节点，只需提交`-pe mytestpe 40`.

节点名称可以由`-l h=abc`. 由于节点名称是 `RESTRINGS`Grid Engine 中的（正则表达式字符串），因此您可以为主机过滤创建正则表达式：`qsub -l h="abc|xyz"`. 您还可以创建主机组 ( `qconf -ahgrp`) 并请求所谓的队列域 ( `qsub -q all.q@@mygroup`)。

丹尼尔

[http://www.gridengine.eu](http://www.gridengine.eu)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T21:42:41.520

1.  您可以使用 -tc 来限制并发任务的数量（即，将用于数组作业的槽数）。当我提交具有 100 个子作业的数组作业时，我使用它来限制对我们队列的影响，使用 -tc 10 默认为 10 个同时作业。当每个作业完成时，将提交来自待处理池的另一个数组作业。

2.  我能够弄清楚的唯一方法是设置特定的资源配额集（使用 qconf -mrqs），指定您要使用的特定主机组。您必须首先设置所需的所有组合。但是，我看不出指定特定主机的真正理由，除非这些主机具有您想要使用的特定资源（在这种情况下，我会为这些主机设置可消耗资源并将适当数量的资源应用于每个主机可以提供它们，然后使用它而不是为特定作业指定特定主机）。

# css - 我该如何为此做css？

> ID：11153527
> 
> 赞同：3
> 
> 时间：2012-06-22T09:25:09.403
> 
> 标签：css, layout

![在此处输入图像描述](../Images/b7b8ec173a7e78ce35bf9a328f38de12.png)

我是 CSS 新手，这让我很困惑。

1.  如何让父 div 始终包含其子级？一旦我开始使用浮点数进行对齐，父级就停止包含子级。
2.  我其实不想浮动的东西。我想对齐它们。我们如何在 CSS 中进行对齐和边距，而不是对所有维度进行硬编码？
3.  有人可以为此提供CSS吗？为了这个例子，让我们假设总宽度为 960 像素，所有边距为 15 像素；

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-22T09:26:59.513

三种选择：

1.  设置`clear: both`在绿色元素上。
2.  `overflow: hidden`在父容器上设置。
3.  在父容器上使用[clearfix 。](http://nicolasgallagher.com/micro-clearfix-hack/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-22T09:43:22.003

让我们看一个清晰灵活的版本：

```
#container { background: gray; overflow: hidden; padding: 15px; }
#left { background: purple; width: 200px; float: left; margin: 0 15px 15px 0; } 
#content { background: blue; overflow: hidden; margin: 0 0 15px 0 } 
#footer { background: green; height: 50px; clear: left; } 
```

即使是`width`and `height`you see set 也是不必要的，框可以在省略时调整其内容，我只是出于演示目的添加它们。

*   [jsFiddle 演示](http://jsfiddle.net/bazmegakapa/ge4ax/)
*   [`overflow: hidden`影响布局](https://stackoverflow.com/questions/6128139/can-overflowhidden-affect-layout/6128264#6128264)
*   [Chris Coyier：关于花车的一切](http://css-tricks.com/all-about-floats/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-22T09:39:52.280

看看这个：http: [//jsfiddle.net/kMQbt/](http://jsfiddle.net/kMQbt/)

html:

```
<div id="parent">
 <div id="purple">
     purple
 </div>
 <div id="blue">
     blue
 </div>
 <div id="green">
     green
 </div>
</div>​ 
```

CSS：

```
#parent{
 width: 960px;
 background-color: grey;    
 float:none;
 padding-bottom: 15px;
}

#purple{
 width: 200px;
 height: 200px;
 float:left;   
 margin-top: 15px;
 margin-left: 15px;
 background-color: purple;
}
#green{
 width: 930px;
 height: 200px;
 background-color: green;  
 clear: both;
 margin-left: 15px;
}

#blue{
 width: 715px;
 float:left;
 height: 300px;
 margin: 15px;
 background-color: blue;
} 
```

​</p>

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T09:30:20.780

使用 clearfix 并将类分配给您的容器是解决问题的方法之一。

```
/* let's clear some floats */
.clearfix:before, .clearfix:after { content: "\0020"; display: block; height: 0; overflow: hidden; }  
.clearfix:after { clear: both; }  
.clearfix { zoom: 1; } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-22T09:35:24.133

```
<div id="container">
<div id="main">
<div id="main_left"></div>
<div id="main_right"></div>
</div>
<div id="last"></div>
</div> 
```

css

```
#container
{
width:xx;
height:xx;
background:
}
#main
{
width:xx;
height:xx;
}
#main_left{
float:left;
width:xx;
height:xx;
}
#main_right
{
float:right
width:xx;
height:xx;
}
#last
{
clear:both;
width:xx;
height:xx;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-22T09:38:08.713

演示[http://jsfiddle.net/yTUU6/](http://jsfiddle.net/yTUU6/)

HTML

```
<div id="contaner">
    <div id="top_left">
        left box
    </div>
    <div id="top_right">
        right box<br />
        height will be changed <br />
        <br /><br /> <br /><br />         <br /><br /> <br /><br />       <br /><br /> <br /><br />
    </div>
    <div class="clear"></div>
    <div id="bottom"></div>
</div> 
```

CSS

```
#contaner{
    width: 100%;
    height: 400px;
    background: #EEEEEE;
}
#top_left{
    width: 30%;
    border:solid 1px;
    height: 200px;    
    float:left;
}
#top_right{
    width:69%;
    float:left;
    border:solid 1px red;
}
.clear{
    clear: both;
}
#bottom{
    height: 100px;
    border: solid 1px green;
} 
```

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2012-06-22T09:39:23.960

经典方式（我是如何学会的）在两者之间使用更清晰的元素

CSS

```
.clearer{
    clear:both;
}
#parent{
    width:500px;
    background-color:#343434;
    padding:10px;
    color:#fff;
}

#box{
    width:50px;
    height:50px;
    margin:10px;
    float:left;
    background-color:#545454;
}

#variable{
    width:400px;
    float:left;
}

#footer{
    height:40px;
    margin-top:30px;
    background-color:#646464;
} 
```

HTML

```
<div id="parent">
    <div id="box"></div>
    <div id="variable">
    </div>
    <div class="clearer"></div>
    <div id="footer"></div>
</div> 
```

[这里](http://jsfiddle.net/pleasedontbelong/4FGpS/)有一个例子

希望这可以帮助

# windows - 如何在cmd for循环中迭代字符串？

> ID：11153532
> 
> 赞同：6
> 
> 时间：2012-06-22T09:25:34.560
> 
> 标签：windows, string, for-loop, batch-file, cmd

我正在尝试在批处理脚本中迭代一个字符串：

```
set var="1 2 3"

for /F %%i in (%var%) do (  
  echo %%i
) 
```

并得到这个输出：

```
C:\>batch.bat

C:\>set var="1 2 3"

C:\>for /F %i in ("1 2 3") do (echo %i )

C:\>(echo 1 )
1 
```

我希望将打印所有 3 个数字：

```
1
2
3 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-22T10:00:21.837

这是因为 FOR/F 将每一行拆分为多个标记，但您需要定义要处理的标记数量。

```
set var="1 2 3"

for /F "tokens=1-3" %%i in (%var%) do (  
  echo %%i
  echo %%j
  echo %%k
) 
```

**编辑：**其他解决方案

就像 Ed harper 的回答一样：
您也可以使用普通的 FOR 循环，但限制是它也会尝试搜索磁盘上的文件，并且`*`和`?`.

```
set var=1 2 3

for %%i in (%var%) do  (
    echo %%i
) 
```

或者您将**换行技术**与 FOR/F 循环一起使用，用换行符替换您的分隔符。

```
setlocal EnableDelayedExpansion
set LF=^

set "var=1 2 3 4 5"
set "var=%var: =!LF!%"
for /F %%i in ("!var!") do (  
  echo %%i
) 
```

这是因为 FOR/F 看到由换行符分割的五行而不是只有一行。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-22T09:33:12.650

尝试`FOR`代替`FOR /F`. 此外，在设置时引用该值`var`是不必要的：

```
set var=1 2 3

for %%i in (%var%) do  (
echo %%i
) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-22T10:00:51.523

因为`FOR /F`循环文本文件的每一行，并且当与字符串（带`""`引号）一起使用时，它只在该行上执行操作。它*确实*由空格分隔，但要与 option 一起使用`tokens`。

你应该使用`FOR`

```
set var=1 2 3

for %%i in (%var) do (
  echo %%i
) 
```

如果要循环数字，请使用以下命令：

```
for /L %%i in (1,1,3) do (
  echo %%i
) 
```

# ravendb - RavenDB 查询记分牌

> ID：11153538
> 
> 赞同：3
> 
> 时间：2012-06-22T09:25:44.830
> 
> 标签：ravendb

给定这样的记分牌：即（允许相同的分数和用户）

```
user    |  score  |  date

user1   |   1000  | 10-05-2012
user1   |    999  | 10-05-2012
user2   |    998  | 10-05-2012
user1   |    998  | 10-05-2012
user4   |    987  | 10-05-2012 
```

我想查询文档以获取特定分数并获得低于和高于 x 的结果

例如说我想以分数 998 为目标 user2 并获得 2 以上和 2 以下

日期在那里但不影响查询，当新分数进入并且存在相同的值时，它将包含在下面。

最好的方法是什么？

目前我正在做最糟糕的事情，那就是有三个查询：一个得到我正在寻找的分数，然后另外两个得到上面和下面的一些行。我看过一些关于[GG](https://groups.google.com/d/topic/ravendb/wsMl0t7tPsU/discussion)的讨论， 但我无法做出任何有意义的工作，希望在这里发布问题是可以的

[更新：讨论组](https://groups.google.com/d/topic/ravendb/m3dKKpRpb6k/discussion)中也有这个线程，但似乎也没有解决它。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T05:01:30.190

Miau，你真的别无选择，你可以把它放到两个查询中：

```
var q1 = session.Query<Score>().Where(x=>x.Value >= 998).OrderBy(x=> x.Value).Take(3).ToList();
var q2 = session.Query<Score>().Where(x=>x.Value < 998).OrderByDescending(x=> x.Value).Take(3).ToList(); 
```

您可以通过使用惰性查询来改进它：

```
var q1 = session.Query<Score>().Where(x=>x.Value >= 998).OrderBy(x=> x.Value).Take(3).Lazily();
var q2 = session.Query<Score>().Where(x=>x.Value < 998).OrderByDescending(x=> x.Value).Take(3).Lazily(); 
```

现在，两个查询都将在一个请求中针对 db 发出。

# c# - 如何压缩文件

> ID：11153542
> 
> 赞同：18
> 
> 时间：2012-06-22T09:26:03.783
> 
> 标签：c#, .net, io, compression, c#-2.0

我想在 C# 中压缩一个文件和一个目录。我在互联网上找到了一些解决方案，但它们太复杂了，我无法在我的项目中运行它们。有人可以建议我一个清晰有效的解决方案吗？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-06-22T09:29:03.450

您可以`GZipStream`在`System.IO.Compression`命名空间中使用

`.NET 2.0.`

```
public static void CompressFile(string path)
{
    FileStream sourceFile = File.OpenRead(path);
    FileStream destinationFile = File.Create(path + ".gz");

    byte[] buffer = new byte[sourceFile.Length];
    sourceFile.Read(buffer, 0, buffer.Length);

    using (GZipStream output = new GZipStream(destinationFile,
        CompressionMode.Compress))
    {
        Console.WriteLine("Compressing {0} to {1}.", sourceFile.Name,
            destinationFile.Name, false);

        output.Write(buffer, 0, buffer.Length);
    }

    // Close the files.
    sourceFile.Close();
    destinationFile.Close();
} 
```

`.NET 4`

```
public static void Compress(FileInfo fi)
    {
        // Get the stream of the source file.
        using (FileStream inFile = fi.OpenRead())
        {
            // Prevent compressing hidden and 
            // already compressed files.
            if ((File.GetAttributes(fi.FullName) 
                & FileAttributes.Hidden)
                != FileAttributes.Hidden & fi.Extension != ".gz")
            {
                // Create the compressed file.
                using (FileStream outFile = 
                            File.Create(fi.FullName + ".gz"))
                {
                    using (GZipStream Compress = 
                        new GZipStream(outFile, 
                        CompressionMode.Compress))
                    {
                        // Copy the source file into 
                        // the compression stream.
                    inFile.CopyTo(Compress);

                        Console.WriteLine("Compressed {0} from {1} to {2} bytes.",
                            fi.Name, fi.Length.ToString(), outFile.Length.ToString());
                    }
                }
            }
        }
    } 
```

[http://msdn.microsoft.com/en-us/library/ms404280.aspx](http://msdn.microsoft.com/en-us/library/ms404280.aspx)

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-04-18T16:14:52.327

我添加了这个答案，因为我找到了比任何现有答案更简单的方法：

1.  在您的解决方案中安装[DotNetZip](https://dotnetzip.codeplex.com/) DLL（最简单的方法是从 nuget安装[包）](http://nuget.org/packages/DotNetZip)
2.  添加对 DLL 的引用。
3.  通过添加导入命名空间： using Ionic.Zip;
4.  压缩文件

代码：

```
using (ZipFile zip = new ZipFile())
{
    zip.AddFile("C:\test\test.txt");
    zip.AddFile("C:\test\test2.txt");
    zip.Save("C:\output.zip");
} 
```

如果您不希望在 zip 文件中镜像原始文件夹结构，请查看 AddFile() 和 AddFolder() 等的覆盖。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-01-11T09:33:03.770

对于 .Net Framework 4.5，这是我发现的最清晰的示例：

```
using System;
using System.IO;
using System.IO.Compression;

namespace ConsoleApplication
{
    class Program
    {
        static void Main(string[] args)
        {
            string startPath = @"c:\example\start";
            string zipPath = @"c:\example\result.zip";
            string extractPath = @"c:\example\extract";

            ZipFile.CreateFromDirectory(startPath, zipPath);

            ZipFile.ExtractToDirectory(zipPath, extractPath);
        }
    }
} 
```

您需要添加对 System.IO.Compression.FileSystem 的引用

来自：[https ://docs.microsoft.com/en-us/dotnet/standard/io/how-to-compress-and-extract-files](https://docs.microsoft.com/en-us/dotnet/standard/io/how-to-compress-and-extract-files)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-22T09:28:42.433

`System.IO.Packaging`有一个名为的内置类`ZipPackage`：

[http://msdn.microsoft.com/en-us/library/system.io.packaging.zippackage(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/system.io.packaging.zippackage(v=vs.100).aspx)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-12-05T13:20:23.867

使用 DotNetZip [http://dotnetzip.codeplex.com/](http://dotnetzip.codeplex.com/)， ZipFile 类上有一个 AddDirectory() 方法可以满足您的需求：

```
using (var zip = new Ionic.Zip.ZipFile())
{
    zip.AddDirectory("DirectoryOnDisk", "rootInZipFile");
    zip.Save("MyFile.zip");
} 
```

邦尼继续...

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-01T23:25:03.670

您可以只使用 ms-dos 命令行程序 compact.exe。查看 cmd 中的参数 compact.exe 并使用 .NET 方法 Process.Start() 启动此进程。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-06-22T09:27:43.903

[http://www.icsharpcode.net/opensource/sharpziplib/](http://www.icsharpcode.net/opensource/sharpziplib/)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-01-19T16:28:11.120

只需使用以下代码压缩文件。

```
 public void Compressfile()
        {
             string fileName = "Text.txt";
             string sourcePath = @"C:\SMSDBBACKUP";
             DirectoryInfo di = new DirectoryInfo(sourcePath);
             foreach (FileInfo fi in di.GetFiles())
             {
                 //for specific file 
                 if (fi.ToString() == fileName)
                 {
                     Compress(fi);
                 }
             } 
        }

public static void Compress(FileInfo fi)
        {
            // Get the stream of the source file.
            using (FileStream inFile = fi.OpenRead())
            {
                // Prevent compressing hidden and 
                // already compressed files.
                if ((File.GetAttributes(fi.FullName)
                    & FileAttributes.Hidden)
                    != FileAttributes.Hidden & fi.Extension != ".gz")
                {
                    // Create the compressed file.
                    using (FileStream outFile =
                                File.Create(fi.FullName + ".gz"))
                    {
                        using (GZipStream Compress =
                            new GZipStream(outFile,
                            CompressionMode.Compress))
                        {
                            // Copy the source file into 
                            // the compression stream.
                            inFile.CopyTo(Compress);

                            Console.WriteLine("Compressed {0} from {1} to {2} bytes.",
                                fi.Name, fi.Length.ToString(), outFile.Length.ToString());
                        }
                    }
                }
            }
        }

    } 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-06-22T09:27:55.587

使用[http://dotnetzip.codeplex.com/](http://dotnetzip.codeplex.com/)压缩文件或目录，没有内置类可以直接在 .NET 中完成

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-06-22T11:55:45.727

[源代码取自 MSDN，兼容 .Net 2.0 及更高版本](http://msdn.microsoft.com/en-us/library/ms404280%28v=vs.80%29.aspx)

```
public static void CompressFile(string path)
        {
            FileStream sourceFile = File.OpenRead(path);
            FileStream destinationFile = File.Create(path + ".gz");

            byte[] buffer = new byte[sourceFile.Length];
        sourceFile.Read(buffer, 0, buffer.Length);

        using (GZipStream output = new GZipStream(destinationFile,
            CompressionMode.Compress))
        {
            Console.WriteLine("Compressing {0} to {1}.", sourceFile.Name,
                destinationFile.Name, false);

            output.Write(buffer, 0, buffer.Length);
        }

        // Close the files.
        sourceFile.Close();
        destinationFile.Close();
    } 
```

# ruby-on-rails - Ruby on Rails collection_select 复杂性

> ID：11153546
> 
> 赞同：4
> 
> 时间：2012-06-22T09:26:26.143
> 
> 标签：ruby-on-rails, associations, ruby-on-rails-3.2

我有以下问题，我的客户账单视图中有以下问题

```
<%= f.collection_select :product_id,Product.all,:id,:name %> 
```

这是从“产品”模型中获取所有产品的列表，并提供从中选择的选项。但我想从“StoreOpeningStock”模型中选择产品列表。

我的模型中有这些

```
class Product< ActiveRecord::Base
has_many :store_opening_stocks
has_many :customer_bills
attr_accessible :name
end

class StoreOpeningStock < ActiveRecord::Base
attr_accessible :product_id
belongs_to :product 
end

class CustomerBill < ActiveRecord::Base
attr_accessible :product_id
 belongs_to :product
accepts_nested_attributes_for :store_opening_stock
end 
```

谁能指导我如何从 store_opening_stock 获取产品名称和 id ？？？我应该使用助手吗？？？还是有其他方法？？提前致谢

我尝试使用助手

```
def getting_prod_names
        @sto = StoreOpeningStock.all

          for x in @sto
        [
            ['{x.product.title}', '{x.product_id}']
        ]
    end
    end 
```

获得以下输出

```
<%= f.select :product_id, options_for_select(getting_prod_names) %> 
```

![在此处输入图像描述](../Images/361c4ee1e3d5655d214578f57636135e.png)

任何帮助？:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T11:22:33.790

当您创建表单时，用于创建表单的数据`collection_select`不限于您要为其创建对象的类。您可以简单地执行以下操作：

```
<%= f.collection_select :product_id,StoreOpeningStock.all,:product_id ,:name %> 
```

这应该给你，...

将此添加到您的`StoreOpeningStock`课程中：

```
def name
    return self.product.name unless self.product.nil?
    ""
end 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-22T11:53:57.993

你需要澄清你的模型之间的关系......

但只是给你一个想法。您可以在与视图相关的`controller`内部（显示集合的位置）定义要在 中显示的产品集合。`action`

控制器：

```
@products= #here you should call all products you want 
```

然后，您的产品集合可以显示如下：

```
<%= f.collection_select :product_id, @products,:id,:name %> 
```

**编辑**

您需要修改模型之间的关系。A`product`有很多`customer_bills`，但你确定每个都`customer_bill`属于一个`product`吗？
我认为你有一个多对多的关系，因为 a`customer_bill`也可以有很多`products`.
如果我理解正确，解决方案是`ProductLine`在这种多对多关系之间创建一个模型。

`Product`另外，和 和有什么区别`StoreOpeningStock`？您在 中包含了哪些属性`StoreOpeningStock`？
如果您创建此模型只是为了显示产品的可用性，为什么不在`Product`模型中添加一个属性，例如一个名为`availability`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T12:58:45.653

因此，您想查找所有具有 StoreOpeningStock 的产品。这只是一个模型问题，与助手无关。

```
class Product
  # Find all products that have a StoreOpeningStock
  def self.in_stock
    find(StoreOpeningStock.product_ids)
  end
end

class StoreOpeningStock
  # Collect all product ids from stocks
  def self.product_ids
    uniq.pluck(:product_id)
  end
end 
```

现在您可以使用 Product.in_stock 而不是 Product.all 来拥有唯一的库存。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-22T15:58:40.870

我会为您的产品模型添加一个范围：

```
class Product< ActiveRecord::Base
    has_many :store_opening_stocks
    has_many :customer_bills
    attr_accessible :name

    scope :having_store_opening_stocks, :joins => : store_opening_stocks, :select => 'distinct product.*', :conditions => 'store_opening_stocks.product > 0'
end 
```

然后您可以使用 Product.all.having_store_opening_stocks 仅选择具有此类库存的产品，例如：

```
<%= f.select :product_id, Product.having_store_opening_stocks.map { |product| [product.name, product.id] } %> 
```

# c - 组装一个 lParam 消息，这是正确的代码吗？

> ID：11153550
> 
> 赞同：0
> 
> 时间：2012-06-22T09:26:56.497
> 
> 标签：c, winapi

我编写了下面的代码。我在我的程序中使用过它，它似乎工作。无论如何，我在问它是否正确。

```
int SendMessageWMSIZE(HWND hwnd) {
    RECT rc;
    GetClientRect(hwnd,&rc);
    int lParam_my;
    short low=rc.right-rc.left; // LOWORD
    short high=rc.bottom-rc.top; // HIWORD
    lParam_my=(high<<16)|low;  // construct an int 32 from two int 16

    SendMessage(hwnd, WM_SIZE, 0, lParam_my);

    return lParam_my;
} 
```

难道我不必用“int”改变“short”（我可以将 32 int 移动 16，但将 16 移动 16）？

如果我使用“short”或“int”而不是短裤，为什么它会起作用？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-22T09:34:11.007

[`MAKELPARAM`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms632661.aspx)使用宏会更惯用。

```
SendMessage(hwnd, WM_SIZE, 0, MAKELPARAM(low, high)); 
```

# android - 在原始文件夹中打开数据库并对其执行不同的读取操作

> ID：11153551
> 
> 赞同：2
> 
> 时间：2012-06-22T09:26:59.067
> 
> 标签：android, sqlite

**标题**-Android-读取原始文件夹中的数据库..

我的原始文件夹包含一个数据库'abc'& abc 数据库包含一个表say-xyz 我想打开'abc'数据库以获取其中的数据..

我想使用类似的东西

SQLiteDatabase db=SQLiteDatabase.openDatabase（路径，工厂，标志）；

1）如何给出访问数据库的路径？

2) 我想打开表并执行操作 Cursor c=db.query("xyz",null,null,null,null,null);

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T09:29:07.757

> Raw 没有路径：它是一种资源，因此您需要使用 getResources() 来引用它。
> 
> 您应该在第一次运行时将其复制到 /data/data/YOUR_APP_FOLDER/databases/YOUR_DB.db
> 
> 遵循本教程。
> 
> [http://www.reigndesign.com/blog/using-your-own-sqlite-database-in-android-applications/](http://www.reigndesign.com/blog/using-your-own-sqlite-database-in-android-applications/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T09:29:17.990

从目录中复制您的数据库文件，`/res/raw`并提供`/asset`该`/data/data/<application_package_name>/database/`目录的路径。

现在您可以轻松地从 /data/data//database/ 目录访问您的数据库文件。

查看[使用数据库发送应用程序](https://stackoverflow.com/questions/513084/how-to-ship-an-android-application-with-a-database)

# java - 简单的图像旋转

> ID：11153553
> 
> 赞同：0
> 
> 时间：2012-06-22T09:27:00.643
> 
> 标签：java, image, user-interface, java-2d

我正在用Java制作游戏。我制作了一个从外太空看到的行星，我想让它看起来像是行星在缓慢旋转。但我不知道如何旋转图像。我需要一个简单的命令，将我的图像围绕自己的中心旋转 1 度。有什么帮助吗？

* * *

这就是我想要做的： [图片](http://imageshack.us/photo/my-images/266/examplea.png/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T09:33:50.893

看看这些教程：

*   [Java2D：享受仿射变换的乐趣](http://www.javalobby.org/java/forums/t19387.html)
*   [坐标平移和旋转：示例代码](http://www.apl.jhu.edu/~hall/java/Java2D-Tutorial.html#Java2D-Tutorial-Transforms-Example1)
*   [变换形状、文本和图像](http://docs.oracle.com/javase/tutorial/2d/advanced/transforming.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T09:32:50.640

您所描述的不是旋转图像，而是更改图像以表示图像中对象的 3D 旋转。

理想情况下，您不会将其用作图像，而是将其用作具有不同摄像机角度的 3D 对象。然后，您只需围绕对象旋转相机并将生成的图像显示给用户。

但是，如果您打算将其作为图像执行，那么您需要创建一个不同的图像来表示您的行星的各种旋转状态，并有一个单独的线程以重复的时间间隔将显示的图像依次替换为下一个图像. 在网上搜索“java 图像动画”——有很多关于如何做到这一点的教程。

如果要在 2d 空间中旋转图像，可以使用以下方法：

```
Image image = ...
Graphics2D g2d = ...; // 
g2d.translate(170, 0); // If needed
g2d.rotate(1);  // Rotate the image by 1 radian
//or g2d.rotate(180.0/3.14); to rotate by 1 degree
g2d.drawImage(image, 0, 0, 200, 200, observer); 
```

# java - 如何使用按钮设置值以在检票口中输入文本

> ID：11153557
> 
> 赞同：0
> 
> 时间：2012-06-22T09:27:24.983
> 
> 标签：java, wicket

我有输入文本：

```
 <div><label wicket:for="name">Name</label><input type="text" wicket:id="name" /></div> 
```

现在我需要添加两个按钮，它们只是为这个输入文本添加一些值。我该如何实现呢？

使用此按钮，我不想发送表单，只需在输入 rext 中编辑值

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T09:32:51.500

使用`<input type="button">Click Me</input>`.

并且在`onclick`这些按钮的事件中调用将编辑输入文本的javascript函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T10:10:42.803

您不必发送整个表格。您可以使用带有 onClick 方法的 AjaxButton 来更改输入字段的模型并将该字段添加到 AjaxRequestTarget。任何不涉及至少通过 Ajax 的服务器往返的事情都很难使用 wicket 方法来完成，因为 wicket 在服务器上运行。当然，你可以通过 JavaScript 来做到这一点，但这不会涉及检票口。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T09:46:16.677

这与 Wicket 无关，这只是普通的 Javascript。你可以做这样的事情

```
<div>
 <label wicket:for="name">Name</label>
 <input type="text" wicket:id="name" id="markupId"/>
 <input type="button" value="Do something" onclick="javascript:editField();"/>
</div> 
```

在您的页面（或加载的脚本文件）中的某处使用以下 Javascript：

```
function editField(){
  document.getElementById("markupId").value = "My value";
} 
```

如果您使用 Javascript 框架`JQuery`，您应该使用您的框架将函数绑定到 onclick 事件（防止您的 javascript 污染 HTML）

# iphone - 在哪里保存核心数据上下文...？

> ID：11153559
> 
> 赞同：0
> 
> 时间：2012-06-22T09:27:27.513
> 
> 标签：iphone, objective-c, ios, core-data, nsmanagedobjectcontext

我已经经历了几个类似的问题，但可以对此达成明确的观点......

我认为将上下文保存在`applicationWillTerminate`: 中应该足够了，但是在核心数据暂存器上进行太多更改会增加我的应用程序的内存...？

我应该更频繁地保存它吗..？我知道一遍又一遍地保存上下文会减少设备闪存驱动器的寿命，苹果建议我们应该减少这样做的频率。

是否有任何其他情况下应用程序忘记了核心数据上下文 appart 从它被终止的地方......？

感谢您的输入..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T10:07:59.167

您的应用程序的保存行为取决于...取决于应用程序。我的意思是，在基于文档的应用程序中，用户希望在点击 cmd-S 时保存文档。所以你应该这样做。越来越多的用户希望他们使用的应用程序能够自动保存。

从用户的角度来看，保存行为是一种设计选择。用户界面和交互设计决定了应用程序的行为方式。

除了这些考虑之外，当然也不能忽视技术现实。内存使用、崩溃错误和数据丢失、撤消管理、电池消耗，所有这些都会对应用程序行为和最终用户产生影响。我真的不认为 SSD 的预期寿命是您应该考虑的因素。

最后一句话：对于给定的商店，您可以拥有多个对象上下文。您可以有子上下文。因此，您可以保存部分数据而不是完整的变更积压，您可以将某些实体优先于其他实体......许多实现选择和可能的策略，但它们应该由用户界面和交互设计驱动。他们必须。

在对用户有意义时保存。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-22T09:45:49.697

这是一种将数据存储到 Coredata 的方法。

```
-(void) setEmailContactsToCoredata:(id)sender  
{    

        NSManagedObjectContext *context=[appDelegate managedObjectContext];

        NSManagedObject *newData = [NSEntityDescription insertNewObjectForEntityForName:@"EmailContacts" inManagedObjectContext:context];

        [newData setValue:self.emailTextField.text forKey:@"email_ID"];

        NSError *error;

       if (![context save:&error])
       {
            NSLog(@"There was an error while inserting Data into coredata");
       }
       else
       {
           NSLog(@"Success fully Saved your email id");  
       }  
} 
```

# php - 在php中连接字符串和数组

> ID：11153560
> 
> 赞同：1
> 
> 时间：2012-06-22T09:27:27.720
> 
> 标签：php, arrays, string, concatenation

我有一个数组，我想将它与一个字符串连接起来。

这是数组：

```
Array ( 
    [0] => Orange 1JD = 1
    [1] => Orange 5JD = 0
    [2] => Orange 10JD = 0
    [3] => Orange 20JD = 0
    [4] => Orange 50JD = 0
    [5] => Umniah 1JD = 0
    [6] => Umniah 5JD = 0
    [7] => Umniah 10JD = 0
    [8] => Umniah 20JD = 0
    [9] => Umniah 50JD = 0
    [10] => Zain 5JD = 0
    [11] => Zain 10JD = 0
    [12] => Zain 20JD = 0
    [13] => Zain 50JD = 0
) 
```

这是我的代码：

```
function emailSending($arrs){
    $to = getAdminEmail();
    $subject = "Card Quantity Alert!";
    $body = "Your Card is out of Quantity, Purchased more Card!\n\nThe Following Cards are:\n";
    foreach($arrs as &$arr){
        echo $arr;
    }
    echo $body;
    if (mail($to, $subject, $body)) {
        echo("<p>Message successfully sent!</p>");
    } else {
        echo("<p>Message delivery failed...</p>");
    }
} 
```

$body 的值有可能是这样的吗？

```
Your Card is out of Quantity, Purchased more Card! The Following Cards are:
Orange 1JD = 1
Orange 5JD = 0
Orange 10JD = 0
Orange 20JD = 0
Orange 50JD = 0
Umniah 1JD = 0
Umniah 5JD = 0
Umniah 10JD = 0
Umniah 20JD = 0
Umniah 50JD = 0
Zain 5JD = 0
Zain 10JD = 0
Zain 20JD = 0
Zain 50JD = 0 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T09:29:47.890

您可以使用[join](http://php.net/manual/en/function.join.php) / [implode](http://www.php.net/manual/en/function.implode.php)将数组转换为字符串。

```
join("\r\n", $arrs) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T09:31:14.243

如果数组存储在 $array 中，请尝试以下代码：

```
<?php
$body = 'Your Card is out of Quantity, Purchased more Card! The Following Cards are:' . "\n";

foreach ($array as $item) {
    $body .= $item . "\n";
}

print $body;
?> 
```

# c# - 如何找到以 Watin 结尾的 id

> ID：11153561
> 
> 赞同：0
> 
> 时间：2012-06-22T09:27:28.377
> 
> 标签：c#, browser, watin

我如何使用 Watin 在 html 文档中通过 id 找到元素。例如：

```
 browser.Link(Find.ById(string+"abc")); 
```

有可能吗？

后期编辑：

我发现了这个，似乎工作

```
browser.Element(wat.Find.BySelector("a:contains('pdf')")).ClickNoWait(); 
```

现在......我如何添加以列出包含“pdf”的每个元素？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T11:26:03.790

我认为这样的事情会起作用，但我还没有测试过。它可能会很慢，但您可以将 ElementCollection 更改为其他内容。该`if`条款也可以改进。

```
ElementCollection elc = ie.Elements;
System.Collections.Generic.List<Element> pdfList = new System.Collections.Generic.List<Element>();
for (int i = 0; i < elc.Count; i++)
{
    if(elc[i].Text.Contains("pdf"))
    {
        pdfList.Add(elc[i]);
    }
} 
```

# windows-8 - PinCode 在应用程序运行时阻止操作系统

> ID：11153563
> 
> 赞同：1
> 
> 时间：2012-06-22T09:27:38.417
> 
> 标签：windows-8, microsoft-metro

几天前，我参加了一个 Windows 8 开发营。我有一段记忆，一些演讲者告诉 W8 提供了要求 pincode 交互以允许退出正在运行的应用程序的可能性。我在这里吗？

在这种情况下，退出意味着除了应用程序本身之外的环境完全被阻止，直到输入正确的密码。我认为它非常适合儿童应用程序，但也便于借出电话/标签。

这应该是一个既定的问题，今天？

# apache-flex - 错误：文件规范中只允许一个来源 - 相关的 SO 答案不起作用

> ID：11153564
> 
> 赞同：0
> 
> 时间：2012-06-22T09:27:39.077
> 
> 标签：apache-flex, mxmlc

我收到以下错误，它在 Flash Builder 4.5 中运行良好，但不适用于 Flex SDK

> C:\FlexSDK\bin>mxmlc -static-link-runtime-shared-libraries=false -use-network=fa lse "C:\workspace\gui\Mill_UI.mxml" -output "C:\workspace\gui\out \op.swf"
> 
> 加载配置文件 C:\FlexSDK\frameworks\flex-config.xml 加载配置文件> C:\workspace\gui\Mill_UI-config.xml Adob​​e Flex Compiler (mxmlc) Version 4.6.0 build 23201 Copyright (c) 2004-2011 Adobe Systems, Inc. 保留所有权利。
> 
> 错误：文件规范中只允许一个来源
> 
> 使用“mxmlc -help”获取有关使用命令行的信息。
> 
> C:\FlexSDK\bin>

[我在这里](https://stackoverflow.com/questions/5951753/mxmlc-strange-error-error-only-one-source-is-allowed-in-the-filespec)尝试了针对类似问题建议的补救措施，我添加了引号，修改了文件夹结构，因此没有空格，但我仍然收到错误

我还使用 -dump-config 创建了一个项目特定的配置文件并修改了路径，但无济于事

谢谢 ！

# function - 如果不使用引号''，将函数作为参数传递给另一个函数将无法编译？

> ID：11153565
> 
> 赞同：2
> 
> 时间：2012-06-22T09:27:42.063
> 
> 标签：function, matlab, function-handle

当我将一个函数（我们称之为`f`）传递给我的 Base 函数时，Base 函数无法识别该`f`函数，而不使用`''`引号，代码如下：

```
function y = test(a, b, n ,f)

if ( rem(n,2) ~= 0 )
   error ( 'n is not even' )
end

% create a vector of n+1 linearly spaced numbers from a to b
x = linspace ( a, b, n+1 );

for i = 1:n+1
    % store each result at index "i" in X vector
    X(i) = feval ( f, x(i) );
end
y=sum(X);
end 
```

这是`f.m`：

```
function [y] = f (x)
y = 6-6*x^5; 
```

当我从带有引号的命令行运行时：

```
>> [y] = test(0,1,10,'f')

y =

   52.7505 
```

但是当我删除它们时：

```
>> [y] = test(0,1,10,f)
Error using f (line 2)
Not enough input arguments. 
```

我的错误在哪里？为什么我不能执行`[y] = test(0,1,10,f)` ？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T09:36:24.567

该函数[`feval`](http://www.mathworks.de/help/techdoc/ref/feval.html)需要函数名（即字符串）或函数句柄作为输入。在您的代码中，`f`既不是名称，也不是句柄。调用基本函数时使用字符串`'f'`或句柄。`@f``test`

如果，如评论中所述，在调用基本函数时，每个赋值都不允许函数句柄，您仍然可以使用函数句柄创建一个带有函数名称的字符串。此功能由以下功能提供[`func2str`](http://www.mathworks.de/help/techdoc/ref/str2func.html)：

```
functionName = func2str(@f); 

test(0,1,10,functionname); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T09:40:45.507

尝试`@f`作为参数传递而不是`'f'`，并将行更改为

```
X(i) = f(x(i)); 
```

问题是那只是`f`不是一个函数句柄。`feval`在这种情况下也不需要使用。

# linux - 在服务器上添加启动脚本

> ID：11153571
> 
> 赞同：0
> 
> 时间：2012-06-22T09:28:05.160
> 
> 标签：linux, shell

我以 root 身份登录到我的服务器并尝试运行以下命令：

```
# update-rc.d -f tk10xbooting.sh default 5 
```

这里的 tk10xbooting.sh 是我想在每次服务器重启时运行的脚本。但是当我运行它时，结果是这样的：

```
update-rc.d: using dependency based boot sequencing
usage: update-rc.d [-n] [-f] <basename> remove
       update-rc.d [-n] <basename> defaults [NN | SS KK]
       update-rc.d [-n] <basename> start|stop NN runlvl [runlvl] [...] .
       update-rc.d [-n] <basename> disable|enable [S|2|3|4|5]
        -n: not really
        -f: force

The disable|enable API is not stable and might change in the future. 
```

知道发生了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T09:38:44.323

（根据您提供的输出）的语法与`updte-rc.d`您提供的不同：

*   你使用 default 应该是 default **s**
*   `-f`仅用于`remove`命令
*   你可能需要使用`05`而不是`5`语法告诉它应该是`NN`（但它可能工作为 5，我不知道）

# css - TinyMCE 默认字体未通过表单提交

> ID：11153576
> 
> 赞同：1
> 
> 时间：2012-06-22T09:28:12.897
> 
> 标签：css, email, tinymce, html-email

我使用 TinyMCE 作为编辑器来创建 HTML 表单，以便人们能够发送 HTML 电子邮件。

一切似乎都工作得很好，所以当您提交表单时，您所做的任何编辑都会通过它发送，但是它使用的默认字体是 Times，我更希望它是 Ariel。

我创建了一个 CSS 模板供它使用，它在 TinyMCE 编辑器中工作，但是当我提交电子邮件时，它默认返回 Times！

任何想法如何让它像在编辑器中显示的那样通过 Ariel？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T09:59:05.033

在这种情况下，只要您不在那里应用 css，您的字体将无法在其他上下文中使用（请参阅电子邮件客户端的设置）。

# search - 如何从 lucene 索引中的两个字段中检索搜索结果，给出一个查询？

> ID：11153579
> 
> 赞同：0
> 
> 时间：2012-06-22T09:28:22.757
> 
> 标签：search, lucene, indexing, field

假设我在字段 A 中搜索一个查询，并且我想从我的索引中检索相应的字段 B 和 C，我应该怎么做呢？我正在使用 Lucene 3.6.0。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T13:18:00.240

您的查询结果将作为一组文档而不是字段返回。获得文档后，您可以加载您感兴趣的任何字段内容。

可能值得关注的一件事是确保您的字段已“存储”。

祝你好运，

# java - 使 Java 的 ByteBuffer 线程安全的选项

> ID：11153583
> 
> 赞同：12
> 
> 时间：2012-06-22T09:28:36.210
> 
> 标签：java, thread-safety, bytebuffer

我有哪些选项可以使 ByteBuffer 线程安全？众所周知，它不是线程安全的，因为它保护位置、限制和一些（/全部？）方法取决于这个内部状态。

就我的目的而言，如果多个读取线程是安全的就足够了，但对于其他未来的访问者，我想知道我需要知道哪些技术/技巧/陷阱才能使其完全线程安全。

我的想法是：

*   为所有方法同步或使用读写锁。可能是最慢的方法（？）
*   子类化 ByteBuffer 并避免持久化线程绑定状态，如位置等。并为所有需要使用内部状态的方法相应地抛出异常。这将是禁食。但是有什么陷阱吗？（除了我必须将直接映射的内存读入堆内存......）

我还能使用什么其他技巧？例如，我将如何使用 DirectBuffer 实现“读取时克隆字节”——这可能吗？一种解决方案可能会涉及对完整的 ByteBuffer (ByteBuffer.slice) 进行切片吗？

**更新**：这个[问题](https://stackoverflow.com/questions/7002510/can-multiple-threads-see-writes-on-a-direct-mapped-bytebuffer-in-java)的含义是*“复制（同步时）以获取指向相同映射字节的新实例”*

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-22T10:35:03.053

*可以*使Buffer 类成为线程安全的……从某种意义上说，各个操作已正确同步，等等。但是，API 在设计时并没有考虑到多线程，所以这可能是浪费时间。

基本问题是 Buffer 上的单个操作过于细粒度，无法成为同步单元。应用程序无法在 get 和 put 操作或翻转、位置等级别进行有意义的同步。一般来说，应用程序需要原子地执行这些操作的序列，以便有效地同步。

第二个问题是，如果您确实在精细级别进行同步，这可能会在方法调用上增加大量开销。由于使用 Buffer API 的目的是有效地进行 I/O，这违背了目的。

* * *

如果确实需要同步线程访问共享缓冲区，最好使用外部同步；例如这样的：

```
 synchronized (someLock) {
        buffer.getByte();
        buffer.getLong();
        ...
    } 
```

如果使用给定缓冲区的所有线程都正确同步（例如，使用相同的锁对象），那么缓冲区不是线程安全的并不重要。线程安全在缓冲区对象的外部进行管理，并且以更粗粒度的方式进行。

* * *

正如评论指出的那样，您还可以使用`ByteBuffer.slice()`或`buffer.asReadOnlyBuffer()`给您另一个缓冲区，现有缓冲区作为支持。但是，javadocs 在这两种情况下都不保证线程安全。事实上，[javadocs](https://docs.oracle.com/javase/9/docs/api/java/nio/Buffer.html)做出`Buffer`了这样的概括性声明：

> 多个并发线程使用缓冲区是不安全的。如果一个缓冲区要被多个线程使用，那么对缓冲区的访问应该由适当的同步控制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-06-17T11:12:19.040

使用 JDK13，您现在可以在没有 byteBuffer.position(int) 的情况下使用 ByteBuffer 并获得线程安全。

请参阅[发行说明](https://www.oracle.com/technetwork/java/13-relnote-issues-5460548.html#NewFeature)。

> java.nio.ByteBuffer 和 java.nio 中的其他缓冲区类型现在定义了绝对批量 get 和 put 方法来传输连续的字节序列，而不考虑或影响缓冲区位置。

# javascript - 如何重置表单提交事件的 event.preventDefault()？

> ID：11153585
> 
> 赞同：2
> 
> 时间：2012-06-22T09:28:45.540
> 
> 标签：javascript, javascript-events, jquery

我有一个将购物车数据提交到支付网关 (WorldPay) 支付处理页面的表单。我需要在自定义决定进行付款时但在表单提交本身之前执行一些额外的逻辑。基本上，我只是想在最后一刻生成对订单的唯一引用。

这是提交事件的 jQuery 代码：

```
$(function(){

   $('#checkout-form').submit(function(e){

       var $form = $(this);

       var $cartIdField = $('#cartId');

       console.log($cartIdField.val());

       if($cartIdField.val() == ''){

            e.preventDefault();

            $.ajax({
                url: baseUrl + '/shop/ajax/retrieve-shopping-cart-reference/',
                data: {}, type: 'post', dataType: 'json',
                success: function(json){
                    if(json.error == 0){
                        $('#cartId').val(json.data.cart_reference_number);
                        $form.submit();
                    }else{
                        alert(json.message);
                    }
                }
            });
        }else{
            console.log('Submitting form...'); //Does not submit!
        }
   });

}); 
```

问题是在`success:`子句中触发的第二次提交期间，表单仍然没有提交。我假设`event.preventDefault()`持续超出当前条件。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T09:39:48.337

为了在表单提交之前执行任何操作，我使用了以下方法希望它会有所帮助

```
 $('#checkout-form').live("submit",function(event){

    //handle Ajax request use variable response
         var err =false;

         var $form = $(this);
        //alert($form);
        var values = {};
         $.each($form.serializeArray(), function(i, field) {
             values[field.name] = field.value;
        });
     //here you get all the value access by its name [eg values.src_lname]
       var $cartIdField = $('#cartId');

       console.log($cartIdField.val());

       if($cartIdField.val() == ''){
             $.ajax({

                   // your code and condition if condition satisfy the return true
                   // else return false 
                   //   it submit your form
                   /*if(condition true)
                      {
                        var err =true;
                      }
                     else
                      {
                         var err = false;
                       }*/

                 })
        }
        else
        {
           return true;
        }
      if(err)
  {
     return false
  }
 else
 {
   return true;

}
     }) 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-22T09:30:22.253

仅当您确实需要时才调用 e.preventDefault()：

```
if(not_finished_yet) {
  e.preventDefault();
} 
```

# windows-phone-7.1 - 如何保护 Windows Phone 7 的独立存储上的 mp4 文件？

> ID：11153587
> 
> 赞同：0
> 
> 时间：2012-06-22T09:28:58.487
> 
> 标签：windows-phone-7.1, mp4, copy-protection

我不知道如何保护 IsolatedStorage 上的视频文件。我加密了 mp4 文件，然后我必须解密它才能在 MediaElement 上播放。解密后的 mp4 文件无法保护。

我将如何绝对保护 mp4 文件？

# excel - 加载过程中出现以下问题： 表

> ID：11153595
> 
> 赞同：3
> 
> 时间：2012-06-22T09:29:21.460
> 
> 标签：excel, temporary-files

我已经从 xml 生成了一个 excel 文件。但我无法用 Excel 打开它。Excel 打开它会出现以下错误：

```
Problems came up in the following areas during load: 
Table 
```

然后它显示一条消息，可以在以下位置找到与错误对应的日志文件：`C:/Documents and Setting/myUserName/Local Settings/Temporary Internet Files/Content.MSO/xxxxx.log`

但我在 Windows 中找不到 Content.MSO 文件夹。我检查了文件夹设置并使所有文件夹可见，但我仍然无法访问此文件夹。这样我就无法分析日志文件。
我怎样才能找到生成的日志文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T12:37:49.620

我在没有分析日志文件的情况下发现了问题。我仍然无法访问临时 Internet 文件中的日志文件。但我意识到我在 Excel xml 中的数字样式单元格上放置了一个字符串（非数字）字符。因此，如果您对从 xml 生成的 Excel 文件有类似问题，请查看您的单元格值是否适合您的单元格数据类型。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-10-09T18:22:11.340

如果您将日志文件的路径键入或粘贴到资源管理器或您选择的文本编辑器中，您可能会发现该文件夹确实存在，尽管它不可​​见。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-09-14T09:59:09.013

就我而言，这是一个`<Row>`不正确的 ss:Index

我使用的是模板，最后一行有一个固定的 Index=100。如果我添加的行数超过 100，则最后一行的索引错误，并且 excel 在没有任何其他消息或日志的情况下抛出错误（MacOSX、Excel 15.25.1）。我希望他们打印更多信息丰富的错误消息，这真是浪费我们的时间。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-01-31T15:44:30.973

Excel 2016\. My error message was "Worksheet Settings". Path was pointing to non-existing file.

My cause of the problem was ExpandedRowCount not big enough for number of rows in Worksheet. If you add rows in XML directly (i.e. on a machine where Excel is not installed), make sure to increment number of rows in ExpandedRowCount.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-15T08:46:35.367

是的。即使我也面临同样的问题，问题是使用 xslt 生成的 Excel 单元格的数据类型

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-02-11T22:50:39.220

除了检查正在使用的数据与分配的“类型”，确保需要为 XML 编码的字符列表确实已编码。

我有一个似乎正在运行的系统，但随后一些用户数据包括`&`并`<`抛出了这个错误。

如果您不确定您的文件发生了什么，请尝试[http://www.xmlvalidation.com/](http://www.xmlvalidation.com/) - 这有助于立即在大文件中发现问题。

我用这个函数来修复它，[从这篇文章修改](https://stackoverflow.com/a/9446666/947370)：

```
function xmlsafe($s) {
  return str_replace(array('&','>','<','"'), array('&amp;','&gt;','&lt;','&quot;'), $s);
} 
```

然后`echo xmlsafe($myvalue)`在您刚刚`$myvalue`在脚本中回显的地方运行。

`htmlentities()`这似乎比PHP 中内置的其他选项更适合 XML 。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-06-15T08:30:40.647

我有同样的问题，答案是 - Cell 的类型是 Number 并且某些值不会在我的后端转换为这种类型。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2017-07-06T09:45:48.587

我遇到了同样的**问题**，这是因为 de 文件**太大**了。我尝试从 SAP 中提取，而不是出错的那个）并将其保存在 XML 文件中。它工作，没有更多的错误。

所以也许如果你可以保存在 2 个 Excel 文件中而不是 1 个它会很好；）

艾丽西亚

# php - 在表单中显示错误消息

> ID：11153596
> 
> 赞同：0
> 
> 时间：2012-06-22T09:29:32.603
> 
> 标签：php

我想在检查条件后显示错误消息或警报消息。

这是我的代码

```
 session_start();

    $plan = @$_GET['plan'];
    $plan = +$plan; 
    include('connect.php');

            If (isset($_POST['submit']))
            {
            $CompanyName = $_POST['CompanyName'];

            $CompanyEmail = $_POST['CompanyEmail'];
            $CompanyContact = $_POST['CompanyContact'];
            $CompanyAddress = $_POST['CompanyAddress']; 

            $RegistrationType = $_POST['RegistrationType'];
            $Plans = $_POST['plan'];
            $Status = "Active";
    $query1 = "select count(CompanyEmail) from ApplicationRegister where CompanyEmail = '$CompanyEmail'" ;
    $result1 = mysql_query($query1) or die ("ERROR: " . mysql_error());
    //$result1 = mysql_result($query1, 0, 0);
    //echo $result1;
     while ($row = mysql_fetch_array($result1))

                {
                    //$companyemail = $row['CompanyEmail'];
                    //if($companyemail != '' || $companyemail!= 'NULL')
                    //{
                        if($row['count(CompanyEmail)'] > 0)
                        {

        echo "This E-mail id is already registered ";
    }
    else
    {

    $sql = "INSERT INTO ApplicationRegister(CompanyName, CompanyEmail, CompanyContact, CompanyAddress, RegistrationType, ApplicationPlan, ApplicationStatus, CreatedDate) VALUES ('$CompanyName', '$CompanyEmail', '$CompanyContact', '$CompanyAddress', '$RegistrationType', '$Plans', '$Status', NOW() )";
$result = mysql_query($sql) or die(mysql_error());

$id = mysql_insert_id(); 

$_SESSION['application_id'] = $id;

//if(isset($plan == "trail"))
if($plan == "trail")
{

header("Location: userRegister.php?id=$id");
exit();
}
else
{
    header("Location : PaymentGateway.php");
    exit();
}

    }
    }
                }

?> 
```

在此之后我放置了我的html表单

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<link href="style.css" rel="stylesheet" type="text/css" />

<title>Welcome</title>
</head>
<body>
<table width="100%" border="0" cellspacing="0" cellpadding="0">
              <tr>
                <td><h2><br />
                  Application Registration</h2>
                  <p>&nbsp;</p></td>
              </tr>
              <tr>
                <td><form action="<?php echo $_SERVER['PHP_SELF']; ?>" method="post" enctype="multipart/form-data" name="form1" id="form1"  onsubmit="return Validate();">
                <input type="hidden" name="plan" value="<?php echo $plan ?>"/>
    Company Name: 
        <input type="text" name="CompanyName" style="width:230px; height:20px;" /><br /><br />
    Company E-mail : 
    <input type="text" name="CompanyEmail" style="width:230px; height:20px;" /><br /><br />
     Company Contact <input type="text" name="CompanyContact" style="width:230px; height:20px;" /><br /><br />
     Company Address: <input type="text" name="CompanyAddress" style="width:230px; height:20px;" /><br /><br />
    Select Your Registration Type : <br /><br />
Trail: <input type="radio" name="RegistrationType" value="Trail" /><br />
                                     Paid<input type="radio" name="RegistrationType" value="Paid" /><br /><br />

     <input type="hidden" name="form_submitted" value="1"/> 
     <input type="submit" value="REGISTER" name="submit" />

</form> 

    </td>
              </tr>

            </table> 
```

当用户输入的公司电子邮件已经存在时，它应该在表单中公司电子邮件字段的下方显示警报消息。但现在它显示在页面的开头。我不知道该使用什么以及如何使用。请建议

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T09:31:16.723

```
$msg = "";
if($row['count(CompanyEmail)'] > 0)
                    {

    $msg = "This E-mail id is already registered ";
} 
```

和 HTML

```
<input type="text" name="CompanyEmail" style="width:230px; height:20px;" /><br />
<?php echo $msg; ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T10:05:35.127

此查询将只返回一条记录。所以它不需要使用while循环

```
$query1 = "select count(CompanyEmail) from ApplicationRegister where CompanyEmail = '$CompanyEmail'" ;
$result1 = mysql_query($query1) or die ("ERROR: " . mysql_error()); 
```

尝试这个，

```
 $query1 = "select count(CompanyEmail) from ApplicationRegister where CompanyEmail = '$CompanyEmail'" ;
    $result1 = mysql_query($query1);     
    $row = mysql_ferch_array($result1); 
 if($row['count(CompanyEmail)'] > 0){
     error message 
}else{ 
 insert uery 
 } 
```

# java - 通过 @XmlPath MOXy 注释解组嵌套集合

> ID：11153599
> 
> 赞同：2
> 
> 时间：2012-06-22T09:29:35.320
> 
> 标签：java, jaxb, eclipselink, moxy

给定以下 XML 结构：

```
<root>
  <data>x</data>
  <details>
    <some_other_element>...</some_other_element>
    <collection>
      <element><a>1</a></element>
      <element><a>2</a></element>
      <element><a>3</a></element>
    <collection>
  </details>
</root> 
```

我将如何使用 MOXy 将其解组为一个基本平坦的 POJO？我尝试了这种方法（为简洁起见，省略了 getter 和 setter）：

```
@XmlRootElement(name = "root")
class Root {
  @XmlElement
  private String data;

  @XmlElement
  @XmlPath("details/some_other_element")
  private String someOtherElement;

  @XmlPath("details")
  @XmlElementWrapper(name = "collection")
  @XmlElement(name = "element")
  private Collection<Element> elements;
}

class Element {
  @XmlElement
  private String a;
} 
```

不幸的是，这只是将一个未初始化的集合添加到`elements`集合中。我想避免必须声明一个`Details`类（确实有效），因为这会破坏`@XmlPath`下面元素的其他映射`<details>`。

我已经验证 MOXy 实际已加载（如 jaxb.properties 中声明的那样）。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T09:53:51.200

尝试将包装标签和元素添加到`@XmlPath`而不是使用`@XmlElementWrapper`：

```
@XmlPath("details/collection/element")
@XmlElement(name = "element")
private Collection<Element> elements; 
```

我认为您甚至可以保留`@XmlElementWrapper`注释以防将来更改 jaxb 提供程序。

* * *

以下是您的用例所需的最少注释：

```
package forum11153599;

import java.util.Collection;
import javax.xml.bind.annotation.*;
import org.eclipse.persistence.oxm.annotations.XmlPath;

@XmlRootElement
class Root {
    @XmlElement
    private String data;

    @XmlPath("details/some_other_element/text()")
    private String someOtherElement;

    @XmlPath("details/collection/element")
    private Collection<Element> elements;

} 
```

# java - 渲染 Play framework 2.0 模板的一部分

> ID：11153615
> 
> 赞同：3
> 
> 时间：2012-06-22T09:30:30.357
> 
> 标签：java, playframework, playframework-2.0

我正在尝试从控制器为模板而不是模板内的标签（函数）调用渲染。这样我就可以将它用于 ajax 调用的页面的部分渲染。当然，我可以将表单的组件分成几个模板，然后在这些模板上调用渲染，但我认为换一种方式会更干净。

我试图做的是如下：

formpage.scala.htm

```
@()
<html>
...

@content

...
</html>

@**********************************
* Helper generating form *
***********************************@
@content() = {

<h3 class="form-heading">@Messages("employees")</h3>

@form(routes.AppController.save()) {    

@inputText...
...

} 
```

并且使用 ajax 渲染内容功能，无需将其分离到单独的文件中。这样我就可以渲染模板的某些部分，而无需将其分割成多个文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T15:22:30.090

事实上，标签只是较小的模板，因此您可以同时使用标签 - 在模板和控制器中使用，最简单的示例：

`/app/views/tags/mytag.scala.html`

```
This is my tag... 
```

在控制器中可以呈现为：

```
public static Result createFromTag(){
    return ok(views.html.tags.mytag.render());
} 
```

在其他模板中，您只需插入：

```
....
And there is my tag rendered
<b>@tags.mytag()</b> 
```

* * *

## 更大的灵活性

当然，由于它也是模板*ergo* Scala 函数，您可以将一些参数传递给它甚至 Html 正文：

`/app/views/tags/othertag.scala.html`

```
@(headline: String)(body: Html)

<h3>@headline</h3>
<div class="tagsBody">
    @body
</div> 
```

在控制器中可以呈现为：

```
public static Result createFromTag(){

    return ok(
            views.html.tags.othertag.render(
                    "Head from controller",
                    new play.api.templates.Html("This code becomes from <i>controller</b>")
            )
    );
} 
```

（当然，您可以导入这两个以获得更短的代码，`import play.api.templates.Html;`并且`import views.html.tags.othertag`）

最后在您的模板中，您可以将标签用作：

```
And there is my tag rendered <br/>
@tags.othertag("Head from template"){
    some content for the tag's body from <b>The Template!</b>
} 
```

最后。

您将在[文档](http://www.playframework.org/documentation/2.0.1/JavaTemplateUseCases)中找到标签描述。

# ruby-on-rails-3 - 在 mongoid 中查询多个条件

> ID：11153617
> 
> 赞同：0
> 
> 时间：2012-06-22T09:30:38.487
> 
> 标签：ruby-on-rails-3, mongodb, mongoid

我对这个 mongoid 有一些问题。我是第一次使用 mongoDB，之前一直使用 mySQL。

这是我的问题。我有模型“用户”。在模型“用户”中嵌入了一个“个人资料”，我想在“profile.first_name”、“profile.last_name”和“username”字段中搜索标准名称为“dummy”的用户数据。

我已经使用了这种语法，但结果为空：

```
@filter = "dummy"
@users = User.any_of({'profile.first_name' => /#{@filter}/i, 'profile.last_name' => /#{@filter}/i, :username => /#{@filter}/i}) 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-22T09:34:24.690

试试这个

```
@filter = "dummy"
@users = User.any_of({:profile.first_name => "/@filter/i"},{:profile.last_name="/@filter/i"}, {:username => "/@filter/i"}) 
```

看括号。

# c# - 在鼠标悬停时更改单元格 bgcolor

> ID：11153618
> 
> 赞同：1
> 
> 时间：2012-06-22T09:30:44.420
> 
> 标签：c#, asp.net, row, html-table

我有一个列表视图，当您使用以下代码将鼠标悬停在一行时，它会突出显示一行：

对于 TR：

```
<tr class="trAlt" onmouseover="over(this)" onmouseout="outalt(this)">

<script>
    function over(o) {
        if ('trClicked' != o.className)
            o.className = 'trOver';
    function outalt(o) {
        if ('trClicked' != o.className)
            o.className = 'trAlt';
   function clicked(o) {
        o.className = ('trClicked' == o.className) ? 'tr' : 'trClicked';
</script> 
```

现在对于一个特定的单元格，我需要根据它包含的值设置 bgcolor ，我这样做是这样的：

```
<td nowrap="nowrap" bgcolor='<%#Get_BGColor(Eval("Efficiency"),Eval("AvgAdjEfficiency"))%>'>
   <asp:Label ID="EfficiencyLabel" runat="server" 
       Text='<%# Eval("Efficiency") %>' />
</td> 
```

款式标签：

```
<style>
       /* ItemTemplate TR background colour */
        .tr 
        {
            background-color:#222;
        } 
        /* AlternatingItemTemplate TR background colour */
        .trAlt
        {
            background-color:#595959;
        }
        /* When mouse is over TR background colour */
        .trOver 
        {
            background-color:#898989;
        } 
        /* When mouse click on TR background colour */
        .trClicked 
        {
            background-color:Red;
        } 
    </style> 
```

问题是当鼠标悬停时，上面的单元格会覆盖该行的 bgcolor（上面的函数 over()）。

我怎样才能做到这一点，当您将鼠标悬停时，它也会将该单元格 bgcolor 更改为突出显示颜色，然后将其设置回来（上面的函数 outalt() ）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T09:47:30.627

你可以使用 css

```
.trAlt:hover td{
   background: red;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T11:25:52.763

```
 <asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False" 
DataSourceID="ObjectDataSource1">
<Columns>
  <asp:TemplateField>
    <ItemTemplate>
      <table>
        <tr>
          <td>
            <%# Eval("ItemID") %>
          </td>
          <td>
            <div class="highlightBox">
              <%# Eval("Title") %>
            </div>
          </td>
        </tr>
      </table>
    </ItemTemplate>
  </asp:TemplateField>
</Columns> 
```

```
.highlightBox
{

}

.highlightBox:hover
{
  background-color: Yellow;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-03-05T08:41:37.143

好的，如果你想让你的bg恢复到原来的样子，那么

在你的 tr 标签中

```
class="trAlt" onmouseover="over(this)" onmouseout="outalt(this)" 
```

一旦你完成了所有这些，添加顶部的那个人给你的样式并将那件好的工作放入头部标签......然后你应该看到当你将鼠标悬停在其中的任何单元格上时行它应该突出显示该行中的所有单元格。如果这不起作用，请查看您的代码......并找到问题所在。

此外，我没有使用脚本标签或 asp 标签，因为它们只是一些额外的东西，它们会干扰单元格，比如......其中一个单元格会变成绿色并保持这种状态，除非你将鼠标悬停在它上面然后它就会消失回到保持绿色。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-22T09:43:20.677

trOver 和 trAlt 的定义是什么？你在那里设置背景颜色吗？

# php - Symfony 2 验证与相关实体

> ID：11153620
> 
> 赞同：2
> 
> 时间：2012-06-22T09:30:49.437
> 
> 标签：php, symfony, doctrine-orm

我有用户和订单实体。当用户创建订单时，我应该检查用户现金是否大于订单成本。这个怎么做？示例订单实体：

```
class Order
{
    /**
     * @var integer $id
     *
     * @ORM\Column(name="id", type="integer")
     * @ORM\Id
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    private $id;

    /**
     * @var integer $user
     *
     * @ORM\ManyToOne(targetEntity="\App\UserBundle\Entity\User", inversedBy="orders")
     * @ORM\JoinColumn(name="user_id", referencedColumnName="id")
     */
    private $user;

    /**
     *
     * @ORM\Column(type="integer")
     * @Assert\Min(limit = "1", message = "You must enter positive number")
     */
    private $price;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T11:30:24.530

您需要使用[回调](http://symfony.com/doc/current/reference/constraints/Callback.html)。

> Callback 断言的目的是让您创建完全自定义的验证规则并将任何验证错误分配给对象上的特定字段。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T08:14:06.453

最简单的解决方案 - 编写自己的验证约束。例如 FOS 用户包中的唯一约束。

# java - 没有从 JSlider 获得价值

> ID：11153621
> 
> 赞同：1
> 
> 时间：2012-06-22T09:30:59.890
> 
> 标签：java, swing, jslider, changelistener

我在我的程序中使用了一个 JSlider，并为此实现了一个 ChangeListener。

```
public void stateChanged(ChangeEvent e)
    {
        JSlider source=(JSlider) e.getSource();
        frame_value.setText(Integer.toString(source.getValue()));

        //Condition to change the frame_no only when user has stopped moving the slider
        if (!source.getValueIsAdjusting()) 
        {
            frame_no=(int) source.getValue()-1;
            if(frame_no<0)
                frame_no=0;
        }
        ....
} 
```

发生的情况是，每当调用 ChangeListener 时，程序都会跳过 if 块，然后转到代码。我不明白为什么会这样。我无法从 JSlider 获得正确的值。请帮忙！！

PS：我不知道是不是这个原因，但是最近我设置了JSlider的UI，将勾选放在我点击它的地方。我不知道这是否对它负责。这是代码：

```
slider.setUI(new MetalSliderUI() {
                protected void scrollDueToClickInTrack(int direction) {
                    int value = HEVC_Analyzer.slider.getValue(); 

                   value = this.valueForXPosition(HEVC_Analyzer.slider.getMousePosition().x);
                   HEVC_Analyzer.slider.setValue(value);
                }
            }); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T10:16:10.510

你的代码一定有问题，因为它在这个例子中工作正常：

```
import javax.swing.*;
import javax.swing.event.ChangeEvent;
import javax.swing.event.ChangeListener;

public class SliderChangeEffect extends JFrame
{
    private JSlider slider;
    private int count = 0;
    private ChangeListener changeListener = new ChangeListener()
    {
        public void stateChanged(ChangeEvent ce)
        {
            JSlider slider = (JSlider) ce.getSource();
            if (!slider.getValueIsAdjusting())
                System.out.println(slider.getValue());
        }
    };

    private void createAndDisplayGUI()
    {
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setLocationByPlatform(true);

        JPanel contentPane = new JPanel();
        contentPane.setOpaque(true);

        slider = new JSlider(0, 10, 5);
        slider.setMajorTickSpacing(2);
        slider.setMinorTickSpacing(1);
        slider.addChangeListener(changeListener);

        contentPane.add(slider);

        getContentPane().add(contentPane);
        pack();
        setVisible(true);
    }

    public static void main(String... args)
    {
        SwingUtilities.invokeLater(new Runnable()
        {
            public void run()
            {
                new SliderChangeEffect().createAndDisplayGUI();
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-03T05:40:32.530

只需使用 String.valueOf() 和 event.MouseReleased()。

```
 private void jSlider1MouseReleased(java.awt.event.MouseEvent evt) {                                       
    // TODO add your handling code here:
    try {

        String valueOf = String.valueOf(jSlider1.getValue());
        jLabel1.setText(valueOf);

    } catch (Exception ex) {
        ex.printStackTrace();
    }

} 
```

# jquery - 更改鼠标光标样式（Chrome）时如何避免选择元素内的跳转位置？

> ID：11153624
> 
> 赞同：0
> 
> 时间：2012-06-22T09:31:15.423
> 
> 标签：jquery, google-chrome, html-select, mouse-cursor

我在我的网络应用程序中使用以下内容来提供反馈，即当前正在加载某些内容：

```
jQuery(document).ajaxStart(function(){
    jQuery('body').css('cursor', 'wait');
});
jQuery(document).ajaxStop(function(){
    jQuery('body').css('cursor', 'auto');
}); 
```

不幸的是，当涉及到选择字段时，这似乎在 Chrome (Linux v20) 中产生了不好的副作用：位置跳跃

你可以在这里看到它：http: [//jsfiddle.net/Riesling/4QCL3/](http://jsfiddle.net/Riesling/4QCL3/)

有没有办法避免这种行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T13:24:40.053

这是我当前的解决方法，但是由于我无法[确定选项面板是否可见，因此](https://stackoverflow.com/questions/141450/javascript-to-detect-whether-the-dropdown-of-a-select-element-is-visible?lq=1)在选择元素失去焦点之前不会更改光标。

```
function ajax_start() {
    if(jQuery(document.activeElement).prop('tagName').toLowerCase() == 'select') {
        window.setTimeout('ajax_start', 1000);
    } else {
        jQuery('body').css('cursor', 'wait');
    }
} 
```

# c# - DataGridView 单元格值增量

> ID：11153626
> 
> 赞同：0
> 
> 时间：2012-06-22T09:31:19.840
> 
> 标签：c#, datagridview

我想将行中单元格的值增加 1，我该怎么做？尝试了以下方法：

```
dataGridViewX1.Rows[dataGridViewX1.CurrentRow.Index].Cells[2].Value =+ 1; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T09:33:52.613

`(int)(dataGridViewX1[row_index][column_index].Value) += 1`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T09:36:45.353

.Value 是对象类型，所以 ++ 或 += 不起作用。

尝试：

```
int value = (int)dataGridViewX1.Rows[dataGridViewX1.CurrentRow.Index].Cells[2].Value;
dataGridViewX1.Rows[dataGridViewX1.CurrentRow.Index].Cells[2].Value = value + 1; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T09:40:22.167

您不能添加 as `Value`for `datagridview`is 类型的对象。所以你必须使用解析值`int.TryParse`（所以如果单元格包含像文本这样的无效值，解析将失败，你可以根据你的要求更改行为），然后将其添加 1 并将其分配回单元格.

你也可以使用`dataGridViewX1.CurrentRow.Cells[2]`

# .net - 用 Newtonsoft Json.Net json 序列化器替换 WCF 内置的 JavascriptSerializer

> ID：11153628
> 
> 赞同：8
> 
> 时间：2012-06-22T09:31:26.897
> 
> 标签：.net, json, wcf, serialization, json.net

有什么办法可以用 Newtonsoft Json.Net json 序列化器替换 WCF 服务应用程序内置的 JavascriptSerializer？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-22T09:35:37.157

WCF 不使用`JavascriptSerializer`. 它使用[DataContractJsonSerializer](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.json.datacontractjsonserializer.aspx)。[是的，您可以通过编写自定义消息格式化程序](http://msdn.microsoft.com/en-us/library/system.servicemodel.dispatcher.idispatchmessageformatter.aspx)将其替换为 Json.NET，如[以下博客文章](https://web.archive.org/web/20190126174548/https://blogs.msdn.microsoft.com/carlosfigueira/2011/05/02/wcf-extensibility-message-formatters/)所示。

# java - 限制字符串的长度

> ID：11153630
> 
> 赞同：0
> 
> 时间：2012-06-22T09:31:40.233
> 
> 标签：java, android, string

我有一个字符串，上面写着`15:00:00`如何限制字符串的长度，所以它说`15:00`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T09:34:31.400

尝试这个，

```
String time = "15:00:00";
time = time.subString(0,time.lastIndexOf(":")); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-22T09:52:42.040

对于日期

```
Date date = new Date();
SimpleDateFormat sd = new SimpleDateFormat("HH:mm");
sd.format(date); //will return formatted date 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T09:38:04.237

尝试这个：

```
String time = "15:00:00";
String str =time.substring(0,result.length() - 3); 
```

# iphone - 增加推送通知徽章 iPhone

> ID：11153631
> 
> 赞同：44
> 
> 时间：2012-06-22T09:31:45.110
> 
> 标签：iphone, objective-c, xcode, push-notification

是否可以在收到通知时增加徽章值。或者我应该将计数作为有效负载发送吗？

如果我每次都将徽章值发送为“1”，如果应用程序未打开，我如何增加应用程序图标中的徽章值。

我已经使用了此代码，但不起作用。

```
-(void)application:(UIApplication *)application didReceiveRemoteNotification:(NSDictionary *)userInfo
{
    [UIApplication sharedApplication].applicationIconBadgeNumber = [UIApplication sharedApplication].applicationIconBadgeNumber + 1; 
} 
```

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-06-22T10:44:45.963

通常在所有应用程序中，未读通知计数都保存在服务器中。当服务器向特定设备令牌发送推送通知时，它们会连同有效负载一起发送徽章计数。一旦设备收到通知并且您的应用程序处于后台（或被终止），操作系统会自动将徽章计数更新为您的应用程序图标。如果您的应用程序是否正在运行，您将在

```
application:didReceiveRemoteNotification: 
```

委托，因此您可以从 (NSDictionary *)userInfo 接收徽章计数。因此，您可以使用该功能更新应用程序图标徽章计数

```
[UIApplication sharedApplication].applicationIconBadgeNumber = [[[userInfo objectForKey:@"aps"] objectForKey: @"badgecount"] intValue]; 
```

认为这应该对您有所帮助。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-06-22T09:32:58.283

如果应用程序未打开，您将无法增加徽章，除非从有效负载中。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-06-22T09:51:33.907

当您的应用程序处于后台模式时出现推送通知并且您想要增加徽章编号时，您应该向服务器发送一个`badgeCount`，以便服务器知道当前计数。

如果您从服务器端管理徽章计数，那么此代码就足够了：-

```
- (void)application:(UIApplication *)application didReceiveRemoteNotification:(NSDictionary *)userInfo  {
    NSLog(@"remote notification: %@",[userInfo description]);

    if (userInfo) {
        NSLog(@"%@",userInfo);

        if ([userInfo objectForKey:@"aps"]) { 
            if([[userInfo objectForKey:@"aps"] objectForKey:@"badgecount"]) {
                [UIApplication sharedApplication].applicationIconBadgeNumber = [[[userInfo objectForKey:@"aps"] objectForKey: @"badgecount"] intValue];
            }
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-08-08T13:58:45.617

Urban Airship使用他们的“autobadge”功能支持[这一点。](http://docs.urbanairship.com/reference/glossary.html#term-autobadge)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2014-03-14T08:22:29.500

打开App收到远程通知后，

使用以下代码在 Appdelegate 文件的“didBecomeActive”方法中获取当前徽章编号：

```
int badgeCount = [UIApplication sharedApplication].applicationIconBadgeNumber;
    badgeCount = badgeCount + 1; 
```

# tomcat - 设置 catalina 选择 tomcat 配置

> ID：11153632
> 
> 赞同：19
> 
> 时间：2012-06-22T09:31:49.093
> 
> 标签：tomcat

嗨，我在选项卡 java 和字段 java 选项的配置窗口中设置了 tomcat 的参数。我想将配置添加到 catalina_opts 有没有办法做到这一点？

在那个领域我有

```
-Dcatalina.home=d:\apache-tomcat-7.0.23
-Dcatalina.base=d:\apache-tomcat-7.0.23
-Djava.endorsed=d:\apache-tomcat-7.0.23\endorsed
-Djava.io.tmpdir=d:\apache-tomcat-7.0.23\temp
-Djava.util.logging.manager=org.apache.juli.ClassLoaderLogManager
-Djava.util.logging.config.file=d:\apache-tomcat-7.0.23\conf\logging.properties
-XX:MaxPermSize=256m 
```

编辑：22.06.2012 12:26

我想添加这个参数

```
-Dcom.sun.management.jmxremote 
-Dcom.sun.management.jmxremote.port=8777 
-Dcom.sun.management.jmxremote.ssl=false 
-Dcom.sun.management.jmxremote.authenticate=false 
-Djava.rmi.server.hostname=192.168.1.1 
```

编辑：22.06.2012 12:51

我将这些参数直接放入“Java 选项”字段中，它可以工作，不知道为什么它第一次没有工作。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-05-20T14:51:04.280

将以下内容放入`catalina.sh`（文档下方）

```
export CATALINA_OPTS="-Dfoo=foo -Dbar=bar" 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-06-23T06:53:28.853

如果您想将 Tomcat 用作 Windows 服务，只需忽略编辑`catalina.bat`（也`CATALONA_OPTS`或`JAVA_OPTS`）。之后，你将 Tomcat 安装为 WS，只需使用`++JvmOptions="<JvmOptions>"`（你应该在 tomcat_home/bat 目录中），例如

```
tomcat8.exe //US/Tomcat_Service ++JvmOptions="-D<option>" 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-03-13T10:58:33.550

不幸的是，如果您将其作为服务运行，它将不会使用参数。使用此[文档](https://tomcat.apache.org/tomcat-7.0-doc/windows-service-howto.html)更新 --JvmOptions 参数或直接从 CATALINA_HOME/bin/ 执行以下命令对其进行编辑

```
tomcat7w //ES/myServiceName 
```

如果您使用 tomcat .bat 脚本，我将创建[环境变量](http://www.computerhope.com/issues/ch000549.htm) **CATALINA_OPTS**，并将所有 thouse 选项作为值。初始脚本*startup.bat*将调用*catalina.bat*，它会根据 Tomcat 版本执行如下操作：

```
%_EXECJAVA% %JAVA_OPTS% %CATALINA_OPTS% %JPDA_OPTS% %DEBUG_OPTS% [...] 
```

这样你就不需要修改 tomcat 脚本，如果你更新到 Tomcat 8，新版本的 Tomcat 将读取这个环境变量。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-11-23T03:18:46.867

使用 Tomcat 作为 Windows 服务，我发现您可以更改注册表项以编辑 Java 选项。就我而言，它解决了我的问题。

> HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\Apache Software Foundation\Procrun 2.0\[服务名称]\Parameters\Java

在这里您可以找到[示例](https://www.codesenior.com/en/tutorial/Run-Java-Program-as-a-Windows-Service-With-Procrun)和[参考资料](https://commons.apache.org/proper/commons-daemon/procrun.html)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-22T09:44:51.537

见这里： [http ://www.springwebdevelopment.com/tomcat-more-memory-catalina_opts](http://www.springwebdevelopment.com/tomcat-more-memory-catalina_opts)

以防万一链接不再起作用：

在 Windows 上编辑文件 $TOMCAT_HOME\bin\startup.bat 并插入或更改以下行，替换为所需的值： set CATALINA_OPTS=...

在 Linux 上编辑文件 $TOMCAT_HOME/bin/startup.sh 并插入以下行，替换所需的值，例如。Bash Shell：export CATALINA_OPTS=... 您添加的行应该在开始 exec “$PRGDIR...”的行之前。</p>

米海

# forms - Symfony2 访问 Twig 中的每个实体字段元素值

> ID：11153636
> 
> 赞同：4
> 
> 时间：2012-06-22T09:32:05.967
> 
> 标签：forms, symfony, twig

我有一个包含实体类型字段的表单`parameters`：

```
 ->add('parameters', 'entity', array(
                'class' => 'SPlaceBundle:Parameter',
                'query_builder' => function(ParameterRepository $er)
                {
                    return $er
                            ->createQueryBuilder('s')
                            ->where('s.type = :type1 or s.type = :type2')
                            ->setParameter('type1', 1)
                            ->setParameter('type2', 2)
                            ->orderBy('s.name', 'ASC');
                },
                'property' => 'name',
                'multiple' => true,
                'expanded' => true,
            )) 
```

如您所见，我只显示 type=1 或 type=2 的参数。在渲染模板时，我想在代表不同参数类型的复选框之间放置 hr （或其他东西）。我试图使用 {{ field.get('value').type }} 技巧来获取参数类型：

```
{% for p in form.parameters %}
    {{ form_widget(p) }} 
    {{ form_label(p) }}
    {{ p.get('value').type }}
    <br>
{% endfor %} 
```

问题是上面`{{ p.get('value') }}`返回`parameter id (int)`而不是`parameter object`. 有没有办法返回对象？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T13:56:23.877

它不是很优雅，但您可以在您的选择中连接类型和名称，并将其用作标签。然后，在显示标签时，在分隔符上拆分，您就有了类型和名称。

# crystal-reports - 在 Crystal Reports 2011 中导出时抑制（隐藏）数据

> ID：11153639
> 
> 赞同：0
> 
> 时间：2012-06-22T09:32:12.287
> 
> 标签：crystal-reports

我使用 Crystal Reports 2011 设计器只是为了测试它。在导出为 Excel 或 .pdf 等不同格式时，我需要能够隐藏某些组件，例如子报告。我猜这可以通过带有公式的 Suppress 字段来实现，但我找不到正确的语法。需要是这样的：

```
If ExportFormat="Excel" then Suppress
Else if ExportFormat="PDF" then Show 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T07:16:02.687

在 Crystal Reports 中使用表达式时，似乎没有表示 ExportFormat 类型的变量。

可以通过在导出事件期间以编程方式设置参数来解决此问题，即创建参数@ExportFormat 并在导出事件期间根据导出类型设置此参数，例如，如果导出到 Excel，则设置 @ExportFormat= “卓越”。然后可以使用以下表达式来抑制控件：

```
{?@ExportFormat}='Excel' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T09:53:33.190

你几乎完全正确：

```
If ExportFormat='Excel' then TRUE
Else if ExportFormat='PDF' then FALSE 
```

该公式进入抑制公式。（你需要点击这个带有“x-2”和铅笔的小按钮......）

# javascript - Javascript 检查变量

> ID：11153640
> 
> 赞同：-1
> 
> 时间：2012-06-22T09:32:14.883
> 
> 标签：javascript, json, validation, object, null

> **可能重复：**
> [如何测试来自 JSON 的空 Javascript 对象？](https://stackoverflow.com/questions/679915/how-do-i-test-for-an-empty-javascript-object-from-json)

```
var test= {};

var incidentReport = {
      "place1": "n/a",
      "place2": "n/a",
      "place3": "n/a",
 } 
```

以上是我的变量的两种外观。我尝试执行以下代码来测试它是否为空/看起来像 {}

```
if(test == "") 
```

并尝试过

```
if(test == null) 
```

也试过

```
if(!test) 
```

有谁知道我哪里出错了？只是 JavaScript 和 JSON 的初学者。我正在做的事情是否被认为是回溯练习有没有更好的方法来宣布这个为空？

感谢您的支持

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T09:36:55.920

使用 JSON.stringify

```
var test= {};
if(JSON.stringify(test).length==2)
alert('null') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T09:35:51.817

```
if(test == "") 
```

检查它是否为空字符串，所以这不起作用

```
if(test == null) 
```

检查它是否`null`与“相似” `undefined`- 不是这种情况

```
if(!test) 
```

检查它是否是一个假值，这也不是这种情况。

您必须检查是否存在子元素（属性）：

```
function isEmpty(obj) {
    for(var prop in obj) {
        if(obj.hasOwnProperty(prop)) return false;
    }
    return true;
}

if ( isEmpty(test) ){...} 
```

非常重要的一点是`.hasOwnProperty()`- 这会检查它是否是对象的真实属性，而不仅仅是通过原型链继承。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T09:36:41.747

这里的测试是一个对象。所以你必须检查他的对象中是否有任何优先级/元素。您可以尝试以下方法

```
var test= {};

function isEmptyObject(obj) {
   // This works for arrays too.
   for(var name in obj) {
       return false
   }
   return true
}

alert("is this object empty?" + isEmptyObject(test));​ 
```

# api - 使用自定义图层时 Gmaps 地形选项灰显

> ID：11153643
> 
> 赞同：0
> 
> 时间：2012-06-22T09:32:22.520
> 
> 标签：api, google-maps, google-maps-api-3

我在网站的主地图中添加了一个自定义图层（开放循环地图）。自定义图层正在工作，但在下拉菜单（mapTypeControlOptions）中，TERRAIN 显示为灰色，不是作为主要项目，而是作为复选框（参见附图）。

![gmaps地形变灰](../Images/e9e7c8ab50256c481fa596ebc28bd61d.png)

在地图代码下方：

```
 var mapoptions = {
        scrollwheel: scrollzoom,
        zoom: zoom,
        mapTypeControl: true,
        mapTypeControlOptions: {
        mapTypeIds: ['ocm', google.maps.MapTypeId.ROADMAP, google.maps.MapTypeId.TERRAIN,],style: google.maps.MapTypeControlStyle.DROPDOWN_MENU},
           navigationControl: true,
        navigationControlOptions: {style: google.maps.NavigationControlStyle.DEFAULT},
           streetViewControl: streetview, 
           mapTypeId: google.maps.MapTypeId.ROADMAP,
           sensor: 'false'  
    }

    var map = new google.maps.Map(document.getElementById("advmap_canvas"),mapoptions);
    var markerArray = [];
var markerIDArray = [];
    var infowindow = new google.maps.InfoWindow();

    map.mapTypes.set("ocm", new google.maps.ImageMapType({
            getTileUrl: function(coord, zoom) {
            return "http://tile.opencyclemap.org/cycle/" + zoom + "/" + coord.x + "/" + coord.y + ".png";
            },
            tileSize: new google.maps.Size(256, 256),
            name: "OpenCycleMap",
            maxZoom: 18
        })); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T10:36:23.480

地形图层并非始终可用于所有缩放级别，从而导致复选框变灰。

如果地形图层可用或不可用，请尝试使用相同缩放级别的标准地图进行检查。唯一的解决方法可能是缩小。

# oracle - Oracle 尝试更新列

> ID：11153644
> 
> 赞同：2
> 
> 时间：2012-06-22T09:32:27.357
> 
> 标签：oracle

我有一个包含数十亿条记录的表，只需要更新一个没有条件的字段。

`update <table name> set flag='N'`这是我的更新查询，需要很长时间。如何使其快速执行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T10:52:13.280

If you *really* cannot wait that long to run your update, and can live with the flag being null instead of 'N', then you can do this very quickly (untested, but should work):

```
alter table my_tab set unused column flag;

alter table my_tab add (flag char(1)); 
```

You can later drop unused with checkpoints if you care to reclaim some space (note that the drop will take some time, so be careful if you choose to do this).

Hope that helps

EDIT: Thanks to @TTT for this [article](http://oracletoday.blogspot.nl/2007/10/fasttrue-for-adding-columns-in-11g.html), apparently in 11g Oracle can store a default value in the data dictionary rather than performing an update to all rows (what I expected from previous experiences). This means you can use 'N' value instead of NULL. *Just make sure you specify NOT NULL as well as the default value*:

```
SQL> set timing on
SQL> drop table test1
Table dropped.
Elapsed: 00:00:00.23

SQL> create table test1
(
col1 varchar2(10),
flag char(1)
)
Table created.
Elapsed: 00:00:00.14

SQL> insert into test1
select 'x','Y'
from dual
connect by level <= 1000000
1000000 rows created.
Elapsed: 00:00:02.09

SQL> alter table test1 set unused column flag
Table altered.
Elapsed: 00:00:00.07

SQL> alter table test1 add (flag char(1) default 'N' not null )
Table altered.
Elapsed: 00:00:01.01 
```

Without the "NOT NULL" and just a default, it took over 20 secs, showing this "fast=true" trick only works when specifying not null and a default (which makes sense really).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T10:42:29.930

不要更新。使用 CTAS，然后重命名新表。

```
CREATE TABLE T_NEW NOLOGGING PARALLEL AS
SELECT COL1, COL2, 'N' FLAG FROM T_OLD; 
```

**然后应用旧表中的索引、约束或授权。**如果你忘记了这一步，你会受苦。

```
DROP TABLE_T_OLD;
RENAME T_NEW TO T_OLD; 
```

*尽量小心，因为你要丢弃旧桌子。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T10:44:15.880

**第一个想法：** 如果你有空间：

```
 create table tmp_tab as select col1, ..., coln, "N" as flag 
  from your_tab; 

  rename table your_tab to your_tab_old; 

  rename tmp_tab to your_tab; 
```

与简单更新相比会非常快。

如果一切正常，请删除 your_tab_old。

**第二个想法：**

`update /*+parallel(your_tab 8)*/ your_tab set flag='N';`

将比非并行版本更快。

# svg - SVG - raphael：存储最后选择的路径，以便可以更改元素数据

> ID：11153650
> 
> 赞同：0
> 
> 时间：2012-06-22T09:32:55.287
> 
> 标签：svg, path, raphael, element

[当前状态](http://danu2.it.nuigalway.ie/09101916/trazoo/stack/)

从我的链接中，您可以在地图上选择不同的地区，一切似乎都在工作，直到您重新选择之前选择的县。与每条路径一起存储的数据值决定是它`isSelected`还是`notSelected`. 我在更改刚刚单击的元素数据方面没有问题，`this`但我找不到以可以更改元素数据的方式存储最后一个选定元素的方法。这意味着我首先必须单击上一个县将其元素数据设置为`notSelected`

首先我定义`var currentcountyselected = "";`. 这允许我存储`paths[arr[this.id]].name;`. 当我单击新路径时，我可以更改最后一个路径填充`$('#'+currentcountyselected).attr({fill: attributes.fill});`

在 Raphael 的 for 循环中，我设置`obj.data('selected', 'notSelected');`了所有路径元素都设置为`notSeelected`.

所以我需要一些方法来存储最后一个路径，这样我就可以改变它的元素数据

这是从现场示例中清除的点击功能。

```
obj.click(function(){
if(this.data('selected') == 'notSelected')
    {this.animate({fill: '#698B22'  }, 300);                
    this.data('selected', 'isSelected');
    $('#'+currentcountyselected).attr({fill: attributes.fill}); 
    paths[arr[this.id]].value = "isSelected";
    currentcountyselected = paths[arr[this.id]].name;
    }
else
    {this.animate({fill: '#32CD32'}, 300);                  
    paths[arr[this.id]].value = "notSelected"; /* set path value*/
    this.data('selected', 'notSelected');                       
    }   
});/* end mark selections */ 
```

我已经在这个项目上工作了一段时间，客户现在希望界面以不同的方式工作。这真的占用了我的时间。

* * *

编辑：
虽然我通过简单地取出解决方案找到了解决方案，但`if/else`我仍然想知道如何获取先前路径（或任何路径）中的元素数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T16:53:56.680

这是我的解决方案，因为它可能对某人有帮助而发布。**我的问题中的链接在点击满意的用户方面存在问题。**

* * *

全局变量

```
var previouscountyselected = "Mayo"; /* default start, can be any county(path) */
var start = true;
var past = null; 
```

更改代码

```
obj.click(function(){
if(paths[arr[this.id]].value == 'notSelected')
    {
    this.animate({fill: '#698B22'}, 200);
    paths[previouscountyselected].value = "notSelected";
    paths[arr[this.id]].value = "isSelected";
    previouscountyselected = paths[arr[this.id]].name;

    if (!start && past != this)
        {
            past.animate({ fill: '#fff' }, 200);
        }
    past = this;
    start = false;                  
}
else if(paths[arr[this.id]].value == 'isSelected')
{
    this.animate({fill: '#32CD32'}, 200);
    paths[arr[this.id]].value = "notSelected"; /* set path value */ 
}
}); 
```

概述 `if (!start && past != this)`有点不寻常，是必需的，否则动画淡入淡出会变得混乱和不稳定。如果是第一次单击路径，则不会触发淡入淡出，并且如果您只是锤击一条路径，它不会淡入白色。主要的**if/else**处理实际的控制值。在我得到一个 jsfiddle 之前，这个链接将展示所需的行为。

* * *

**笔记！**此链接中的下拉菜单不起作用。

[点击快乐友好](http://danu2.it.nuigalway.ie/09101916/trazoo/stack/solution/)

# actionscript-3 - 如何在 Flash 中即时将 MovieClip 导出为矢量文件（SVG、EPS）？

> ID：11153653
> 
> 赞同：1
> 
> 时间：2012-06-22T09:33:05.677
> 
> 标签：actionscript-3, flash, svg, bytearray

我正在尝试构建一个应用程序，允许用户排列不同的形状、添加文本并将结果导出为矢量文件。

我一直在研究[as3swf](https://github.com/claus/as3swf)库，尤其是[SVGShapeExporter 类](https://github.com/claus/as3swf/blob/master/src/com/codeazur/as3swf/exporters/SVGShapeExporter.as)。

如果您在应用程序中加载 swf 并尝试将其动态导出到 svg 文件中，它工作正常，但我想使用 movieClips 而不是加载的 swfs。

由于 as3swf.SWF 对象基于 ByteArrays，我一直试图为我的 MovieClip 获取一个 ByteArray，但它似乎是空的。

任何想法？

谢谢

# wpf - MVVM WPF DataGrid SelectedItem 通过绑定触发 OnPropertyChanged 两次

> ID：11153659
> 
> 赞同：0
> 
> 时间：2012-06-22T09:33:28.267
> 
> 标签：wpf, binding, mvvm, datagrid, selecteditem

我花了好几个小时试图解决下面描述的问题：

我在我的 MVVM WPF 应用程序中定义了一个 DataGrid，精简后的 XAML 代码如下所示：

```
<DataGrid AutoGenerateColumns="False" Name="dgdSomeDataGrid" SelectedItem="{Binding SelectedSomeItem, Mode=TwoWay}" ItemsSource="{Binding SomeItemCollection}">
    <DataGrid.Columns>
        <DataGridTextColumn Binding="{Binding Path=Id}" Header="ID" />
        <DataGridTextColumn Header="Titel" Binding="{Binding Path=Title}" />
        <DataGridTextColumn Header="Status" Binding="{Binding Path=State}" />
    </DataGrid.Columns>
</DataGrid> 
```

在我关联的 ViewModel 中，我有一个相应的属性，例如：

```
public WorkItemForUi SelectedSomeItem
{
    get
    {
        return SomeObject.SelectedSomeItem;
    }
    set
    {
        SomeObject.SelectedSomeItem = value;
        OnPropertyChanged( "SelectedSomeItem" );
    }
} 
```

在我的控制器中，我有以下内容：

```
private void MainWindowViewModelPropertyChanged( object sender, PropertyChangedEventArgs e )
{
    if ( e.PropertyName == "SelectedSomeItem" )
    {
        UpdateSelectedSomeItem();
    }
} 
```

我通常想做的是从 中检索所选项目，`DataGrid`从外部数据存储（在本例中为 TFS）获取有关该项目的更多信息，并在 TextBox 中显示这些额外信息。

所有这些都已按预期工作，但**问题是 MainWindowViewModelPropertyChanged 方法被调用了两次，而不是一次**。

可能是这种情况下，该`SelectedItem`属性被设置为发生两次，但我不太确定，因为我发现的很多信息有点矛盾（有时也不太清楚 Windows 窗体或 WPF 是的意思）。

我已经看到一些建议，其中为 定义了 SelectionChanged 事件处理程序`DataGrid`并使用了一个`IsSelected`属性，但据我所知，由于我的数据绑定，这不应该是必需的。

**更新** 作为 MainWindowController 的一部分，有一个 Initialize 方法引用 MainWindowViewModelPropertyChanged 处理程序。

```
 public void Initialize( string tfsProjectCollection )
    {
        InitializeCommands();
        InitializeViewModel();
        AddWeakEventListener( m_MainWindowViewModel, MainWindowViewModelPropertyChanged );
    } 
```

任何想法可能是我的问题的原因是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T09:56:10.463

你的`SomeObject.SelectedSomeItem`二传手也加注`OnPropertyChanged( "SelectedSomeItem" );`吗？是什么类型的`SomeObject`？为什么`SomeObject`还需要`SelectedSomeItem`Property？

还请在您订阅的地方发布一些代码`MainWindowViewModelPropertyChanged`。

我的行为从来没有问题`selecteditem`，但公平地说，我不需要订阅`INotifyPropertyChanged`来获取这些信息。我认为你也不需要那个。有更好的方式在视图模型之间进行通信

编辑：这可行，但我不知道 SomeObject 在您的代码中是什么。

```
private WorkItemForUi _selected;
public WorkItemForUi SelectedSomeItem
{
get
{
    return this._selectedSomeItem;
}
set
{
    this._selectedSomeItem = value;
    OnPropertyChanged( "SelectedSomeItem" );
}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T10:06:44.377

好吧，在这上面花了一些时间后，我们发现问题出在`ApplicationController`课堂上。

构造函数调用了`Initialize`那个类中的`Run`方法，同一个类中的方法也调用了这个方法。

在该`Initialize`方法中调用了主窗口的视图模型“Initialize”方法，其中添加了一个事件监听器：

```
[...]
AddWeakEventListener( m_MainWindowViewModel, MainWindowViewModelPropertyChanged );
[...] 
```

`Initialize`从类的构造函数中删除对方法的调用`ApplicationController`解决了这个问题。

# ruby-on-rails - 无法显示父母和孩子的数量

> ID：11153663
> 
> 赞同：0
> 
> 时间：2012-06-22T09:33:38.873
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有一个名为 Question 的类和一个名为 Answers 的相关类。我想以 JSON 格式返回问题以及答案的分组计数。举个例子：

```
["question":"What's 3 x 4?", ["12":15, "10":2]] 
```

因此，15 名受访者表示是 12 名，2 名受访者表示是 10 名。

现在，我可以使用以下代码从 Answers 返回数组：

```
@answers = Answer.where(:question_id => params[:id]).count(:group => 'answer') 
```

我还可以使用以下代码为每个用户添加答案：

```
format.json { render json: @question , :include => :answers, :conditions => {:answers => { :user_id => user_id}}} 
```

但是我无法同时返回问题以及按结果数组分组的计数...

请指教？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T05:50:38.777

您可以使用[jbuilder gem](https://github.com/rails/jbuilder)来构建您自己的 json 模板。

```
# /app/views/question.show.json.jbuilder
if question
  json.id question.id
  json.answers do |answer|
    json.answer_text answer.text
    json.answer_count answer.count
  end
else 
  nil
end 
```

# jquery - Python CGI 是否收到由 JQuery 在提交时设置的表单值？

> ID：11153670
> 
> 赞同：0
> 
> 时间：2012-06-22T09:34:16.930
> 
> 标签：jquery, html, forms, cgi, submission

我有一个提交给 Python CGI 脚本的 HTML 表单。从 Java Applet 提交时，需要额外的数据。使用 JQuery，我尝试在提交时将此数据附加到表单“字符串”，使用类似

```
form_data += '&additionalData=' + java_applet_function().getVal() + ';'
$.post('script.cgi', form_data, cb); 
```

但是，CGI 脚本显然没有接收到这些附加数据。虽然这`java_applet_function`不是错误的来源。所以我现在的解决方案是，在提交表单之前，将 写入`additionalData`隐藏的 HTML 表单元素，CGI 脚本确实从那里接收数据。

如上所示，用 JQuery 是否不可能做到这一点？我在问，因为我相信 HTML 隐藏输入会干扰应用程序的其他部分。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T07:22:47.250

据我了解您的情况，我认为“提交时”触发器将在提交发生后（在表单数据已经发送后）进行数据追加。

# jquery - jquery砌体图像大小

> ID：11153683
> 
> 赞同：0
> 
> 时间：2012-06-22T09:34:58.917
> 
> 标签：jquery, html, jquery-masonry

这是我目前拥有的，但是，图像被压缩以适应文本宽度的大小。无论我在 html 中指定什么大小，它都不会改变。对这件事有任何启示吗？

```
$('#append').click(function(){
    var $boxes = $('<div class="box">'+balls($iterator)+'</div>');
    $container.append( $boxes ).masonry( 'appended', $boxes );

});

function balls($i){
    $iterator += 1;
    return '<p>'+$test[$iterator][1][2]+'</p><p><img src="'+$test[$iterator][2]+'" alt="'+$test[$iterator][1][2]+'" height="196" width="319"></a></p>';
} 
```

![在此处输入图像描述](../Images/f904c8b6cf187df1b37e6123b39a6638.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T09:59:29.683

这应该用 imagesLoaded 插件触发吗？从[砌体现场](http://masonry.desandro.com/docs/intro.html)

`"If your content contains any images, you’ll want to ensure that Masonry is triggered after all the images your content has loaded"`

尝试

```
$container.append( $boxes ).imagesLoaded( function(){$container.masonry( 'appended', $boxes);}); 
```

# c# - Linq to Xml - 删除操作后获取有效的 xml 文档

> ID：11153685
> 
> 赞同：0
> 
> 时间：2012-06-22T09:35:13.423
> 
> 标签：c#, linq, xml-parsing, linq-to-xml

对于像下面这样的 xml 文档，我会显示当前所选文件夹的所有子文件夹和文件。为此，我从 xml 字符串中删除了不匹配的文件夹并在前端使用 XSLT 构建了一个 UI。似乎该操作正在删除使结果字符串无效的 xml 的所有节点。所以

*   如何在不更改文档有效性的情况下使用 Linq to Xml 从 xml 中删除元素

### xml文件

```
<?xml version="1.0" encoding="utf-8"?>
<Folder>
  <Folders>
    <Folder ID="1" Name="Root" ParentId="0">
      <Files></Files>
    </Folder>
    <Folder ID="2" Name="My Documents" ParentId="1">
      <Files>
        <File Name="LicenceCode.txt" Size="2000" CreatedOn="1/1/2012 12:12:00 PM" CreatedBy="1" ModifiedOn="1/10/2012 10:12:56 AM" ModifiedBy="2"></File>
      </Files>
    </Folder>
  </Folders>
</Folder> 
```

### 代码

```
XElement filesAndFolders = XElement.Parse(xmlDocumentString);
string outputFolders = string.concat(from folders in filesAndFolders in filesAndFolder.Elements("Folder").Folder("Folders") where folders.Attribute("ParentId").Value.Equals(selectedFolderId) select folders);
//pass outputFolders string to xsl to build the UI 
```

### 问题

该`outputFolders`字符串无效，因为它仅包含以下字符串而不是有效文档

```
<Folder ID="2" Name="My Documents" ParentId="1">
  <Files>
    <File Name="LicenceCode.txt" Size="2000" CreatedOn="1/1/2012 12:12:00 PM" CreatedBy="1" ModifiedOn="1/10/2012 10:12:56 AM" ModifiedBy="2"></File>
  </Files>
</Folder> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T09:57:42.600

如何删除您不想要的元素：

```
 var doc = XDocument.Parse(xmlString);

        doc.Element("Folder").Element("Folders").Elements("Folder").Where(f => f.Attribute("ID").Value == "1").Remove(); 
```

# visual-studio - 安装后的 VS Setup 项目第二次启动应用程序需要很长时间

> ID：11153686
> 
> 赞同：1
> 
> 时间：2012-06-22T09:35:17.030
> 
> 标签：visual-studio, setup-project

嗨，我已经做了一个 eclipse 的安装项目，并在开始菜单和桌面中给出了 eclipse.exe 的快捷方式。

安装 setup.msi 后，我通过桌面快捷方式或启动程序启动它，第一次安装后应用程序打开速度非常快，但在关闭应用程序并再次通过快捷方式启动后，启动它需要很长时间。它显示消息“请稍候，Windows 配置“项目名称””超过 5 分钟。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T13:52:16.280

发生这种情况是因为 Windows Installer 检测到丢失的资源并触发修复。这是一个类似的讨论： [安装的快捷方式导致安装重新运行 Visual Studio 2010](https://stackoverflow.com/questions/10215458/installed-shortcut-causing-install-to-rerun-visual-studio-2010)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-18T19:15:47.433

按照[mmx 的](https://stackoverflow.com/questions/10215458/installed-shortcut-causing-install-to-rerun-visual-studio-2010)建议，我查看了事件日志，它为我提供了一些关于 MSI 为何抱怨的线索。就我而言，它是：

> 检测产品“{5BF6F4BA-4266-42E8-A376-EB341856049F}”、功能“DefaultFeature”、组件“{5BF6F4BA-4266-42E8-A376-EB341856049F}”失败。资源“C:\Program Files (x86)\My Company\My App\”不存在。

这没有意义，因为我没有将我的应用程序放在那个特定的文件夹中。我将我的应用程序文件夹放入另一个文件夹，如下所示：

> 'C:\Program Files (x86)\My Company\Some Other Folder\My App\'

在搜索了一下MSI文件后，我终于找到了罪魁祸首。如果您查看“应用程序文件夹”（在 Visual Studio 中右键单击您的设置 MSI 项目 -> 查看 -> 文件系统）。您将看到其 DefaultLocation 属性设置为：

> [ProgramFilesFolder][制造商]\[产品名称]

在我的情况下，修复只是用以下内容替换它：

> [ProgramFilesFolder][Manufacturer]\Some Other Folder\My App

之后，MSI 不再在启动时触发修复。

# xcode - 如何在越狱的iphone上后台运行应用程序？

> ID：11153691
> 
> 赞同：0
> 
> 时间：2012-06-22T09:35:49.307
> 
> 标签：xcode, background, jailbreak

我尝试在 XCode 中开发一个在后台运行的应用程序。例如，主启动屏幕或其他应用程序显示在显示屏上，并且仍在运行。

我怎么做？

iphone是IOS 5.1.1越狱的3gs

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T02:12:28.057

您可以使用theos编译一个dylib文件，并通过钩子跳板启动它。

# windows - WSMan 和基本授权

> ID：11153692
> 
> 赞同：4
> 
> 时间：2012-06-22T09:35:49.660
> 
> 标签：windows, basic-authentication, remote-access, winrm, wsman

我正在尝试使用基本授权让 WSMan 工作。我总是收到拒绝访问错误。Kerberos 身份验证工作正常。

Windows 远程管理服务在域 A 中的 Windows Server 2008 R2 上运行，并具有以下配置：

```
配置
    MaxEnvelopeSizekb = 800
    MaxTimeoutms = 600000
    MaxBatchItems = 20
    MaxProviderRequests = 4294967295
    客户
        网络延迟 = 5000
        URLPrefix = wsman
        AllowUnencrypted = false
        认证
            基本=真
            摘要 = 真
            Kerberos = 真
            协商=真
            证书 = 真
            CredSSP = 假
        默认端口
            HTTP = 5985
            HTTPS = 5986
        受信任主机 = *
    服务
        RootSDDL = O:NSG:BAD:P(A;;GA;;;S-1-5-21-2516571543-3809851355-1508507046-1008)(A;;GA;;;BA)(A;;GAGXGWGR;; ;S-1-5-21-3465154619-3242790773-2173928322-17804)S:P(AU;FA;GA;;;WD)(AU;SA;GXGW;;;WD)
        MaxConcurrentOperations = 4294967295
        MaxConcurrentOperationsPerUser = 200
        枚举超时时间 = 600000
        最大连接数 = 15
        MaxPacketRetrievalTimeSeconds = 120
        AllowUnencrypted = true
        认证
            基本=真
            Kerberos = 真
            协商=真
            证书 = 真
            CredSSP = 真
            CbtHardeningLevel = 放松
        默认端口
            HTTP = 5985
            HTTPS = 5986
        IPv4过滤器 = *
        IPv6过滤器 = *
        EnableCompatibilityHttpListener = false
        EnableCompatibilityHttpsListener = false
        CertificateThumbprint = ee cd g2 5e 61 ad d0 07 07 b7 77 95 ec 38 16 02df 7f 64 51
    赢家
        AllowRemoteShellAccess = true
        空闲超时 = 180000
        最大并发用户数 = 5
        MaxShellRunTime = 2147483647
        MaxProcessesPerShell = 15
        MaxMemoryPerShellMB = 150
        MaxShellsPerUser = 5

```

我正在域 B 中的 Windows 7 工作站上执行 Test-WSMan：

```
Test-WSMan -ComputerName https://server2008:5986 -Auth basic -Cred B\MY_USER_NAME

```

并得到以下错误：

```
Test-WSMan：访问被拒绝。
在行：1 字符：11
+ 测试-WSMan -ComputerName https://server2008:5986 -Auth basic -Cred B\MY_USER_NAME
    + CategoryInfo : InvalidOperation: (https://server2008:5986:5986:String) [Test-WSMan], InvalidOperationException
    + FullyQualifiedErrorId : WsManError,Microsoft.WSMan.Management.TestWSManCommand

```

请注意，以下命令可以正常工作：

```
Test-WSMan -ComputerName https://server2008:5986 -Auth kerberos

```

Windows Server 上出现以下日志：

```
错误 6/22/2012 12:21:27 PM Windows 远程管理 168 用户身份验证

常规：向客户端发送 HTTP 401 响应并在发送响应后断开连接
细节：
    日志名称：Microsoft-Windows-WinRM/Operational
    来源：Microsoft-Windows-WinRM
    日期：2012 年 6 月 22 日下午 12:21:27
    事件编号：168
    任务类别：用户认证
    级别：错误
    关键词：安全、服务器
    用户：网络服务
    电脑：server2008
    描述：
        向客户端发送 HTTP 401 响应并在发送响应后断开连接

```

有人可以帮我解决这个问题吗？这是配置问题还是我做错了什么？

谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-06-21T21:06:50.737

WinRM 基本身份验证不支持域。基本上您只能作为目标机器的本地用户进行身份验证

# sql-server - SQL Server 未连接

> ID：11153696
> 
> 赞同：1
> 
> 时间：2012-06-22T09:36:29.837
> 
> 标签：sql-server

我创建了一个表单并连接到 SQL Server 数据库。表格中输入的数据进入数据库。但是，当我将相同的表单上传到上传中时，表单会被提交，但会出现错误提示。请帮帮我

> “/”应用程序中的服务器错误。建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。（提供者：SQL 网络接口，错误：26 - 错误定位服务器/指定的实例） 描述：在执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。
> 
> 异常详细信息：System.Data.SqlClient.SqlException：建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。（提供者：SQL 网络接口，错误：26 - 错误定位服务器/指定的实例）
> 
> 源错误：
> 
> 第 23 行：
> 第 24 行：SqlConnection con = new SqlConnection(@"Data Source=.\sqlexpress;Initial Catalog=Accomdation;Integrated Security=True");
> 
> 第 25 行：con.Open();

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T18:59:14.193

您可以仔细检查“SQL Server 配置管理器”中的服务器和客户端设置吗？服务器端和客户端都应该启用相同的“协议”（TCP/IP、共享内存、命名管道、VIA）。您实际上也可以指定在连接字符串中使用哪一个。

[http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlconnection.connectionstring.aspx](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlconnection.connectionstring.aspx)

# iphone - 从完成的 ASIHTTPRequest 中获取 postValue

> ID：11153697
> 
> 赞同：2
> 
> 时间：2012-06-22T09:36:32.400
> 
> 标签：iphone, objective-c, ios, ipad, asihttprequest

我想知道如何从完成的 ASIHTTPRequest 中检索 post 值。

当我执行请求时，我会这样做：

```
[request setPostValue:uniqueID forKey:@"bookUniqueId"];
NSFileManager *fileManager = [[NSFileManager alloc]init];
if (![fileManager fileExistsAtPath:tempDir]) {
    [fileManager createDirectoryAtPath:tempDir withIntermediateDirectories:YES attributes:nil error:nil];
}
[fileManager release];

tempDir = [[tempDir stringByAppendingPathComponent:uniqueID]stringByAppendingPathExtension:@"zip"];
[request setDownloadDestinationPath:tempDir];
[request setDelegate:self];
[request startAsynchronous]; 
```

因为我想下载 zip 文件，命名为我的书的 ID。

在`- (void)requestFinished:(ASIHTTPRequest *)request`方法中，我需要该 ID 来解压缩文件。我无法将 ID 保存在 ivar 中，因为我想支持多个异步下载。

我怎样才能做到这一点？有没有类似于不存在的方法的东西`[request postValueForKey: key]`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-22T09:42:21.467

每当你创建你的`ASIFormDataRequest`只是设置它的**用户信息**并像这样得到它。

要设置用户信息，请使用此选项。

```
[request setUserInfo:[NSDictionary dictionaryWithObject:@"YOUR_VALUE" forKey:@"YOUR_KEY"]]; 
```

要获取用户信息，请使用此功能。

```
-(void)requestFinished:(ASIHTTPRequest *)request
{
     NSDictionary *dict = [request userInfo];
     NSString *str = [dict objectForKey:@"YOUR_KEY"];
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-22T09:43:01.990

您可以使用`userInfo`的属性`ASIHTTPRequest`

像下面这样

```
request.userInfo = [[NSMutableDictionary alloc] init];
[request.userInfo setValue:yourID forKey:@"your id"]; 
```

然后在`requestFinished`

```
- (void)requestFinished:(ASIHTTPRequest *)request
    yourid = [request userInfo] valueForKey:@"your id"]; 
```

# nginx - 为什么 nginx 总是用默认站点响应，即使它现在应该响应？

> ID：11153699
> 
> 赞同：3
> 
> 时间：2012-06-22T09:36:40.303
> 
> 标签：nginx

我最近将（Debian）升级到 nginx 1.2.1，现在似乎 nginx 总是用默认服务器响应，即使它不应该。

/etc/nginx/conf.d

```
server {
listen       80 default_server;
server_name  _;
server_name_in_redirect off;
proxy_intercept_errors on;
return 401;
} 
```

/etc/nginx/sites-enabled/search.config

```
server {
listen   80; ## listen for ipv4
server_name  search.example.com;

location / {
   proxy_pass        http://search.example.com:8080;
   proxy_set_header  X-Real-IP  $remote_addr;
   }
} 
```

当我尝试访问：[http](http://search.example.com) ://search.example.com时，它会给我 401 而不是端口 8080 上的内容（如果直接使用，则可以使用）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T09:41:48.553

该死，它没有加载启用站点，因为 nginx 发行版不使用此目录，并且在升级时它替换了 nginx.conf

# python - python从内核日志中读取最后三行

> ID：11153700
> 
> 赞同：0
> 
> 时间：2012-06-22T09:36:41.157
> 
> 标签：python, linux, file, logging

`/var/log/messages`我想循环读取内核日志的最后三行。

```
for i in xrange(0,100): 
    # do_stuff()
    file = open('/var/log/messages')
    lines = file.readlines()[-3:]
    # analyse_stuff()
    file.close() 
```

但我对这段代码有疑问：

```
 [...]
 1013477960613797 1013477960959759 1013477961174602 
 1013477960613797 1013477960959759 1013477961174602 
 1013477960613797 1013477960959759 1013477961174602 
 1013477960613797 1013477960959759 1013477961174602 
 1013477973551967 1013477973773506 1013477977678559 
 1013477973551967 1013477973773506 1013477977678559 
 1013477973551967 1013477973773506 1013477977678559 
 1013477973551967 1013477973773506 1013477977678559 
 1013477973551967 1013477973773506 1013477977678559 
 1013477973551967 1013477973773506 1013477977678559 
 1013477973551967 1013477973773506 1013477977678559 
 1013477973551967 1013477973773506 1013477977678559 
 1013477973551967 1013477973773506 1013477977678559 
 1013477973551967 1013477973773506 1013477977678559 
 1013477973551967 1013477973773506 1013477977678559 
 1013477973551967 1013477973773506 1013477977678559 
 1013477973551967 1013477973773506 1013477977678559 
 1013477973551967 1013477973773506 1013477977678559 
 1013477973551967 1013477973773506 1013477977678559 
 1013477973551967 1013477973773506 1013477977678559 
 1013477973551967 1013477973773506 1013477977678559 
 1013477973551967 1013477973773506 1013477977678559 
 1013477973551967 1013477973773506 1013477977678559 
 1013477973551967 1013477973773506 1013477977678559 
 1013477973551967 1013477973773506 1013477977678559 
 1013477973551967 1013477973773506 1013477977678559 
 1013477973551967 1013477973773506 1013477977678559
 1013477986756370 1013477990527612 1013477990834895 
 1013477986756370 1013477990527612 1013477990834895 
 1013477986756370 1013477990527612 1013477990834895
 1013477986756370 1013477990527612 1013477990834895
 1013477986756370 1013477990527612 1013477990834895
 1013477986756370 1013477990527612 1013477990834895
 1013477986756370 1013477990527612 1013477990834895
 1013477986756370 1013477990527612 1013477990834895
 [...] 
```

如您所见，值重复了很多次。 `do_stuff()`执行一个二进制文件，它发出三个日志消息。 `analyse_stuff()`将分析这三行并做*魔术* 我总是关闭文件并重新打开它，因为我认为这会解决问题，但事实并非如此。知道会发生什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T11:03:58.377

我通常会使用tail，但如果你**真的**只想要最后的'n'行，并且不太关心跟随（类似于'tail -f'），那么你最简单的选择是这样的：

```
from collections import deque
last3 = deque(open('/path/to/your/file'), 3)
print last3 
```

`deque`将逐行消耗，丢弃最旧的条目以保持 3 行的约束。查看[http://docs.python.org/library/collections.html#collections.deque](http://docs.python.org/library/collections.html#collections.deque)了解更多信息

# python - Python (2.7) 中的 XOR 错误

> ID：11153705
> 
> 赞同：1
> 
> 时间：2012-06-22T09:36:54.040
> 
> 标签：python, binary, hex, xor, type-mismatch

我有一个以十六进制编写的 XOR 加密字节列表（包含在“cipher.txt”中，每行一个字节），我知道使用的 XOR 密钥是一个字节。因此，我正在尝试这样的蛮力方法：

```
f = open("cipher.txt", "r")
ciphers = f.readlines()
f.close

for x in range(0, 255):
    key = bin(int(x))[2:]
    for line in ciphers:
        w = bin(int(line, 16))[2:]
        y = int(w)
        z = y ^ x
    print chr(z),
print "" 
```

在那里，我的结果 (z) 不会保持二进制。相反，我得到类似“10010084”的结果。如果我不使用“y = int(w)”部分，我会得到“^: 'str' and 'int' 不支持的操作数类型”作为错误，即使我不明白为什么，因为变量的定义类似于有效的“关键”变量。

我怀疑我的代码中有一个非常愚蠢的错误导致它失败。任何人都可以建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T09:51:32.753

试试这个：

```
y = int(w, base=2) 
```

你还没有关闭`f`：

```
f.close() 
```

我建议使用上下文管理器来管理打开的文件：

```
with open("cipher.txt", "r") as f:
    ciphers = f.readlines() 
```

# javascript - 附加后使用jQuery将div自动滚动到底部

> ID：11153707
> 
> 赞同：13
> 
> 时间：2012-06-22T09:36:57.327
> 
> 标签：javascript, jquery, css, scroll, scrolltop

我有一个 div class='messages'。我通过 jQuery.append() 将日期添加到此 div 以下是样式：

```
.messages {
border: 1px solid #dddddd;
padding:10px;
height: 400px;
overflow-x:visible;
overflow-y: scroll;
-webkit-border-radius: 5px;
-moz-border-radius: 5px;
border-radius: 5px;
margin-bottom:10px;
font-size:14px;
} 
```

对于自动滚动，我使用这样的功能：

```
receiveMessage = function (name, message, type) {
    //adding new message
    $("#messages").append('<strong>' + name + ": " + '</strong>' + message + '<br>');
    /autoscrolling to the bottom
    $("#messages").animate({
        scrollTop: $("#messages").height()
    }, 300);
} 
```

大约 20 条消息正常滚动，但在“挂起”之后，新消息不会滚动。Chrome 版本 19.0.1084.56 。我做错了什么？谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-22T09:52:01.830

改变

```
scrollTop: $("#messages").height() 
```

到

```
scrollTop: $("#messages").scrollHeight 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-07-28T22:53:14.457

该解决方案对我不起作用，但是，以下确实...

```
$(document).ready(function(){
   $('#chat-scroll').animate({
   scrollTop: $('#chat-scroll').get(0).scrollHeight}, 2000); 
 }); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-11-24T07:22:46.173

请试试：

```
$(document).ready(function(){
   $('#chat-scroll').animate({scrollTop: $('#chat-scroll')[0].scrollHeight}, 2000);
}); 
```

# c# - 如何使用 Windsor 模仿 Guice 的 MapBinder？

> ID：11153712
> 
> 赞同：0
> 
> 时间：2012-06-22T09:37:09.273
> 
> 标签：c#, java, castle-windsor, guice

Guice IoC 容器提供 MapBinder，这通常很有用。我们还在 .NET 中使用 Windsor v3.0。鉴于以下稍微做作的示例，任何人都可以建议如何以相同的方式使用温莎吗？

```
enum Format {
    Xml,
    Json
}
interface Formatter {
    String format(Object o);
}
class XmlFormatter implements Formatter {
    @Override
    public String format(Object o) {
        throw new NotImplementedException();
    }
}
class JsonFormatter implements Formatter {
    @Override
    public String format(Object o) {
        throw new NotImplementedException();
    }
}
class FormattersModule extends AbstractModule {
    @Override
    protected void configure() {
        MapBinder<Format, Formatter> formattersMapBinder
                = MapBinder.newMapBinder(
                        binder(), Format.class, Formatter.class);
        formattersMapBinder.addBinding(Format.Xml).to(XmlFormatter.class);
        formattersMapBinder.addBinding(Format.Json).to(JsonFormatter.class);
    }
}
class FormattersClient {
    private final Map<Format, Formatter> formatters;
    @Inject
    FormattersClient(Map<Format, Formatter> formatters) {
        this.formatters = formatters;
    }
    public void Format(Format format, Object o) {
        String s = formatters.get(format).format(o);
        // ... do something with s ...
    }
}
public class Main {
    private static Injector injector;
    public static void main(String[] args) {
        injector = Guice.createInjector(new FormattersModule());
        FormattersClient formattersClient
                = injector.getInstance(FormattersClient.class);
        formattersClient.Format(Format.Json, new String("Foo"));
        formattersClient.Format(Format.Xml, new String("Foo"));
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T14:08:13.337

因此，如果您愿意为键使用字符串值，那么这个示例非常简单。

```
class FormattersInstaller : IWindsorInstaller
{
    public void Install(IWindsorContainer container, IConfigurationStore store)
    {
        container.Register(
            Component
                .For<IFormatter>()
                .ImplementedBy<XmlFormatter>()
                .Named(Format.Xml.ToString()));
        container.Register(
            Component
                .For<IFormatter>()
                .ImplementedBy<JsonFormatter>()
                .Named(Format.Json.ToString()));
    }
}
class Program
{
    static void Main(string[] args)
    {
        var container = new WindsorContainer();
        container.Install(new FormattersInstaller());
        var xmlFormatter = container.Resolve<IFormatter>(Format.Xml.ToString());
        var jsonFormatter = container.Resolve<IFormatter>(Format.Json.ToString());
        // use the formatters...
    }
} 
```

# python - Django项目结构/导入python视图（初学者）

> ID：11153713
> 
> 赞同：0
> 
> 时间：2012-06-22T09:37:16.360
> 
> 标签：python, django

我正在使用 django 1.4，到目前为止，我一直在很大程度上关注免费的在线 Django Book，我的文件夹结构如下所示：

```
TestWebsite/
        TestApp/
                __init.py
                admin.py
                models.py
                views.py
        TestWebsite/
                Webpage_Templates/
                        homepage.html
                __init__.py
                settings.py
                urls.py
                views.py
        manage.py 
```

到目前为止，我只是在 TestWebsite 子目录中呈现视图，因此没有任何路径问题。

现在我想做的是（如果这不是应用程序集成的工作方式，请纠正我），是：

*   使用*TestApp/views.py*`return render_to_response("homepage.html", {})`中 的行
**   然后我需要将*TestApp/views.py*导入到*TestWebsite/urls.py*中，这样我就可以将其添加到 urlpatterns 中。（我想我也会有两个具有相同名称的导入的问题 - 视图？）*

 *我想过`PROJECT_ROOT = os.path.dirname(os.path.abspath(__file__))`像我在 settings.py 中所做的那样使用你，但我仍然不知道如何处理目录结构的上下移动。另外，无论如何，这并不是我真正需要的路径，而是一条python导入语句（我认为），我想它们并不是真正的同一锅鱼吗？你可以说我是新手。非常感谢一些可靠的指导！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T10:47:06.660

我发现/记得因为模板目录是在设置文件中设置的，所以我不必担心第一个要点，我制作的任何应用程序视图都可以返回我的 Webpage_Templates 文件夹中的页面，而在实现上没有任何区别。

至于第二个要点，为了防止 urls.py 中的同名问题，我改为`import views`：

```
from views import * #Now instead of views.ShowTime i just use ShowTime 
```

并访问我刚刚添加的应用程序视图，

```
from TestApp.views import * 
```

比我想象的要简单得多。

回答我的问题，因为我知道很多指南都是针对 django 1.4 之前的版本，默认文件夹结构有点不同，其他 1.4 初学者可能会偶然发现这个问题，想知道同样的事情。

但是，如果有人想通过更多解释来扩展我的解决方案，请继续提交答案！*

# javascript - 如何在共享点母版页中包含来自共享位置的 js 文件

> ID：11153716
> 
> 赞同：0
> 
> 时间：2012-06-22T09:37:22.363
> 
> 标签：javascript, sharepoint, master-pages

我想包含来自现在不同位置的 js 文件。目前在母版页代码中，它如下所示：

```
<SharePoint:ScriptLink ID="ScriptLink1" language="javascript" name="Company/Scripts/myJsfile.js" Localizable="false" runat="server"/> 
```

它工作正常。

但我想做的是改变这个 javascript 文件的当前位置。此 .js 文件的目标位置是共享位置（“\\v-share\share\javascript”）。

有没有办法将这个 .js 文件从共享位置包含在 sharepoint 母版页中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T09:55:50.620

你可以试试这个：

`<script type="text/javascript" src="\\serverip\path\to\jsfile" ></script>`

# asp.net - 将 RequireJS 与 .NET 控件一起使用时出现脚本错误

> ID：11153718
> 
> 赞同：0
> 
> 时间：2012-06-22T09:37:37.593
> 
> 标签：asp.net, requirejs, ascx

我对 RequireJS 有点问题。

我有一个 .NET 站点，其中包含多个控件，其中包含需要由 .NET 生成的参数的 JS 代码。我一直在尝试在我的网站中实现 RequireJS，但遇到了一个小问题。

我在页面顶部包含了引用 RequireJS 的脚本标记，以及该脚本标记中对 main.js 的引用。在我的 main.js 中，我有以下代码；

```
require.config({
    paths: {
        'jquery' : '//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min'
    }
}); 
```

然后我有一个应该显示 Flash 视频的 Web 控件。此 Web 控件包含以下代码；

```
require(['jquery'], function ($) {
    if (!eval('<%= FlashAvailable.ToString().ToLowerInvariant() %>')) {
        var url = '<%= FallbackImageUrl %>';
        if (!url) {
            $("#flashcontent").remove();
        }
        return;
    }

    var link = '<%= Page.ResolveUrl("~/Templates/AlloyTech/scripts/slideshow.swf") %>';
    var width = '<%= Width %>';
    var height = '<%= Height %>';

    var variables = { xml: '<%= ConfigXml %>' };
    var params = { wmode: 'transparent' };
    var attributes = { };

    swfobject.embedSWF(link, 'flashcontent', width, height, '10', false, variables, params, attributes);
}); 
```

这应该可以正常工作吧？但是，执行页面会导致两组错误。

```
 1\. GET http://episerversite6/scripts/jquery.js 404 (Not Found)
 2\. Uncaught Error: Script error http://requirejs.org/docs/errors.html#scripterror 
```

为什么当我定义 jquery 的路径是“http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min”时它试图找到 jquery.js。我尝试为路径添加第二个参数，这是一个本地后备 jQuery 文件，这使得一切正常，但我仍然会在控制台中收到第一个错误。

其次，为什么我会收到脚本错误消息？我已经检查了我的代码几次，我似乎找不到任何问题。它与在 jQuery 有时间加载之前执行的代码有关吗？

所以我想我要问的是，将 RequireJS 与内联脚本一起使用的最佳方式是什么？我希望有人能帮帮忙。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T15:15:51.947

似乎我误解了 RequireJS 的工作原理以及相应地重写我的代码的需要。

所以我决定改为将所有 ASP.NET 生成的变量附加到它们作为 data-* 属性影响的元素中，并将所有 JavaScript 代码移动到单个文件中，然后在页面上运行的 main.js 脚本中引用这些文件加载。稍后加载脚本及其依赖项时会获取 data-* 属性值。

所以这就是我对我在最初的问题中提到的项目所做的，它实际上是一个名为 Alloytech 的 EPiServer CMS 演示项目。

Flash.ascx

```
<div id='flashcontent'  data-flash-available="<%= FlashAvailable.ToString(CultureInfo.InvariantCulture).ToLowerInvariant() %>"
                    data-fallback-image="<%= FallbackImageUrl %>"
                    data-flash-link="<%= Page.ResolveUrl("~/Templates/AlloyTech/scripts/slideshow.swf") %>"
                    data-flash-width="<%= Width %>"
                    data-flash-height="<%= Height %>"
                    data-flash-variables="<%= ConfigXml %>">
    <img src='<%= FallbackImageUrl %>' alt='<%= FallbackImageAlt %>' />
</div> 
```

main.js

```
require.config({
    shim: {
        'swfobject' : {
            exports: 'swfobject'
        }
    },

    paths: {
        'jquery': ['http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min', '/Scripts/jquery-1.7.2.min'],
        'alloytech': '/templates/alloytech/scripts/alloytech',
        'mobile': '/templates/alloytech/scripts/mobile/mobile',
        'swfobject': '/Templates/AlloyTech/scripts/swfobject'
    }
});

define(['jquery', 'alloytech', 'mobile', 'swfobject'], function ($, A, M, swfobject) {
    $.fn.addFlash = function () {
        return this.each(function () {
            var el = $(this);
            var flashAvailable = el.data('flash-available'),
                fallbackImage = el.data('fallback-image'),
                flashLink = el.data('flash-link'),
                flashWidth = el.data('flash-width'),
                flashHeight = el.data('flash-height'),
                flashVariables = el.data('flash-variables');

            if (!eval(flashAvailable)) {
                var url = fallbackImage;
                if (!url) {
                    el.remove();
                }

                return;
            }

            var link = flashLink;
            var width = flashWidth;
            var height = flashHeight;

            var variables = { xml: flashVariables };
            var params = { wmode: 'transparent' };
            var attributes = {};

            swfobject.embedSWF(link, 'flashcontent', width, height, '10', false, variables, params, attributes);
        });
    };

    $(function () {
        $("#flashcontent").addFlash();
    });
}); 
```

我希望其他人会发现这很有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T01:04:28.173

它在加载配置路径之前寻找所需的模块“jquery”。所以基本上什么 require.js 假设“jquery”是一个 javascript 文件并尝试在与“data-main”（在 HTML 标头中定义）相同的目录中查找它。

我不知道这种特殊情况的解决方案是什么，因为我正在打同样的仗，但这似乎与 jquery.js 创建者打算使用他们的插件的方式不同，从这个页面的内容来看：[常见错误](http://requirejs.org/docs/errors.html)

# python - 在 Twisted 上处理多部分/混合

> ID：11153719
> 
> 赞同：2
> 
> 时间：2012-06-22T09:37:38.247
> 
> 标签：python, json, rest, twisted, multipart

在拥有处理 JSON 请求的 Twisted Rest 接口之后，现在我需要处理多部分/混合请求，其中 JSON 和二进制文件将结合在一起。

在用 curl 进行了一些测试之后，我意识到请求变量将填充一个“*文件*”类型，我想知道 Twisted 中是否有任何方法可以正确处理这种请求。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T09:56:22.643

虽然这是一篇旧帖子，但我记得用[电子邮件模块](http://docs.python.org/library/email)解决了这个问题，任何人都感兴趣......

# database - 具有内部连接探索的 SQL 客户端

> ID：11153721
> 
> 赞同：1
> 
> 时间：2012-06-22T09:37:43.867
> 
> 标签：database, squirrel-sql

我有一个数据库，有时我喜欢手动探索它以获取信息。

我目前使用的是 squirrel sql 客户端，非常好，但有一个功能我很怀念：当我对表发出简单的选择时，假设有一行我想知道引用。

为此，我需要手动编写带有内部连接的大 sql 请求，这可能非常令人生畏......

所以我的问题是：是否有任何（可能是免费的）SQL 客户端可以让您探索可能的内部连接？

例如，单击行 id 将为我提供引用它的其他表中的所有行，就像超文本链接所做的一样简单......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T07:44:24.960

试试[DBeauty](http://dbeauty.sourceforge.net/)：“面向关系的数据库浏览器。提供对数据和行间相互关系的洞察。”

# php - 向 OO PHP 添加数据库调用的最佳方法

> ID：11153723
> 
> 赞同：0
> 
> 时间：2012-06-22T09:37:55.370
> 
> 标签：php, mysql, oop

我正在编写一个使用 PHP 和 MySQL 的新网站。我正在尝试使用 OO 来做到这一点，并欢迎一些建议。

我知道我应该按如下方式构造类，但我不确定是否应该创建单独的方法来访问数据库以插入、更新等名称。

有关系吗？我应该有单独的方法还是可以将代码滚动到 set_name 和 get_name 中？

```
<?php  

class person { 

 var $name;  

  function set_name($new_name) {  

  $this->name = $new_name;   

 } 

 function get_name() { 

  return $this->name;  
 }  

}  
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T09:46:14.777

您可能对[对象关系映射](http://en.wikipedia.org/wiki/Object-relational_mapping)和/或特别是[Active Record 模式](http://en.wikipedia.org/wiki/Active_record_pattern)感兴趣。另请参阅[此示例](http://www.devshed.com/c/a/PHP/Using-the-Active-Record-Pattern-with-PHP-and-MySQL/1/)以获取实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T09:40:56.433

可以用php5吗？

寻找现成解决方案的方向，例如 Doctrine-ORM 或其他 ORM 引擎。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T10:07:04.200

你基本上不应该关心你的具体数据库。该类`Person`根本不应该关心它是如何存储的，或者即使它存储在某个地方。

只是把事情分开。例如，对于初学者，您创建一个`ObjectMockStorage`具有`store`and`retrieve`方法的类。

这些方法可以由您传入的对象决定该对象应该发生什么。

然后，您可以创建您的应用程序，直到您真正需要存储（可能甚至今天已经不知道的 MySQL？），您可以`Storage`使用相同的[接口](http://php.net/interface)将类型更改为不同的类型。

这也可以帮助您更快地运行您的应用程序，并且实际上不会浪费时间来关心您不需要关心的事情。

# c# - 字符串未被识别为有效的 DateTime。无法在购买日期列中存储 <22/06/2012 12:00:00 AM>。预期类型为 DateTime

> ID：11153727
> 
> 赞同：0
> 
> 时间：2012-06-22T09:38:09.220
> 
> 标签：c#, asp.net

我在运行 XP 的机器上收到此异常，但在 Windows 7 上，没有问题。我正在尝试按如下方式格式化日期时间，

```
dr.BeginEdit();                                     
dr["Pdate"] = ((DateTime)dr[dc]).ToString("dd/MM/yyyy hh:mm:ss tt", CultureInfo.InvariantCulture);
dr.EndEdit();
dr.AcceptChanges(); 
```

'2012-03-04 00:00:00.000' 工作正常，但问题是 '2011-06-22 00:00:00.000' 知道吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T01:37:04.347

我在 web.config 文件中添加了以下内容，它解决了问题。

```
<globalization culture="en-GB"/> 
```

[http://msdn.microsoft.com/en-us/library/bz9tc508.aspx](http://msdn.microsoft.com/en-us/library/bz9tc508.aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-22T09:41:09.287

Convert.ToDateTime 时需要使用明确的文化。受影响的机器上的默认文化可能不同，

[http://msdn.microsoft.com/en-us/library/ms130987.aspx](http://msdn.microsoft.com/en-us/library/ms130987.aspx)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-22T09:44:04.597

该错误可能是由于错误的月份与日期造成的。

如果你知道日期格式，你可以尝试使用`DateTime.ParseExact`

[http://msdn.microsoft.com/en-us/library/w2sa9yss.aspx](http://msdn.microsoft.com/en-us/library/w2sa9yss.aspx)

例如：

```
DateTime dt = DateTime.ParseExact(dr["Pdate"].ToString(), "yyyy-MM-dd hh:mm:ss", CultureInfo.InvariantCulture); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-22T11:27:19.330

您可以使用以下代码，这对我有帮助，我相信它也会对您有所帮助：

```
dr.BeginEdit();                                     
dr["Pdate"] = Convert.ToDateTime(dr[dc]).ToString("your format"); 
dr.EndEdit();
dr.AcceptChanges(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-22T10:41:50.517

您正在尝试将字符串存储在 DateTime 列中。请尝试以下代码：

```
dr.BeginEdit();                                     
dr["Pdate"] = (DateTime)dr[dc]; // No need to convert this to a string :)
dr.EndEdit();
dr.AcceptChanges(); 
```

# weblogic-10.x - 如何在 weblogic 10.3.5 中配置 Spring 3

> ID：11153733
> 
> 赞同：0
> 
> 时间：2012-06-22T09:38:51.050
> 
> 标签：weblogic-10.x, spring-3

如何将 Spring 3 配置为 Weblogic 10.3.5。目前我得到这个例外。

引起：java.lang.NoSuchMethodError: org.springframework.beans.MutablePropertyValues.add(Ljava/lang/String;Ljava/lang/Object;)Lorg/springframework/beans/MutablePropertyValues;

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T09:43:32.777

根据 javadocs，在 Spring 2.5 中该类没有 add 方法：

[http://static.springsource.org/spring/docs/2.5.x/api/org/springframework/beans/MutablePropertyValues.html](http://static.springsource.org/spring/docs/2.5.x/api/org/springframework/beans/MutablePropertyValues.html)

但是在版本 3 中有：

[http://static.springsource.org/spring/docs/3.1.x/javadoc-api/](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/)

听起来您混合了不正确的 2.5 和 3.x 版本。

# snmp - 错误运算符 (�)：在 /usr/share/snmp/mibs/ZYXEL-ES2108G-MIB.txt 中的第 1 行

> ID：11153734
> 
> 赞同：0
> 
> 时间：2012-06-22T09:38:53.473
> 
> 标签：snmp, mib

Bad operator (�)：在 /usr/share/snmp/mibs/ZYXEL-ES2108G-MIB.txt 的第 1 行...执行 snmptranslate 命令时出现此错误...这是什么意思？？？？任何帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-09-07T20:46:10.100

尝试添加 -Pu

-P MIBOPTS 切换控制 MIB 解析的各种默认值： u：允许在 MIB 符号中使用下划线

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T23:21:50.967

听起来您的 MIB 的 SMI 语法格式不正确。尝试使用`smilint`并将您的 MIB 重写为 SMI 一致性。

# wordpress - 使用帖子id查询帖子

> ID：11153741
> 
> 赞同：2
> 
> 时间：2012-06-22T09:39:22.217
> 
> 标签：wordpress

SSomeone 可以告诉我使用 id 获取帖子的最佳方式是什么？

我正在使用这个：

$query = query_posts('post_id='.$_GET['php_post_id']); 全球 $post;
foreach ($query 作为 $post):

做东西...

这是返回一个包含所有帖子的数组

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T09:46:04.203

```
get_post( $post_id, $output ); 
```

所以在实践中看起来像：

```
$my_id = 7;
$post_id_7 = get_post($my_id); 
```

关于帖子的参数和字段的进一步参考，在这里：[http ://codex.wordpress.org/Function_Reference/get_post](http://codex.wordpress.org/Function_Reference/get_post)

**更新：**当您需要通过 id 获取单个帖子时，这是**最佳实践，不需要 cicles。**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-12-18T15:45:51.200

更改`post_id=`为`p=`。

```
$setQuery = 'p='.$_GET['php_post_id'];
query_posts($setQuery); 
```

单击此链接可查看：[检索特定帖子](https://codex.wordpress.org/pt-br:Refer%C3%AAncia_de_Fun%C3%A7%C3%A3o/query_posts#Retrieve_a_Particular_Post)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-11-12T22:13:46.110

如果您正在寻找具有您已经知道的 ID 或从其他来源获得的单个帖子，我将建议以下代码。

```
$args = array(
        'post_type' => 'post',
        'post_status' => 'publish',
        'p' => $id,   // id of the post you want to query
    );
    $my_posts = new WP_Query($args);  

   if($my_posts->have_posts()) : 

        while ( $my_posts->have_posts() ) : $my_posts->the_post(); 

          get_template_part( 'template-parts/content', 'post' ); //Your Post Content comes here

        endwhile; //end the while loop

endif; // end of the loop. 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-07-05T15:36:58.713

您可以像这样创建查询：

```
 $rd_args = [
       'ID' => $postId
  ];

  $query = new WP_Query($rd_args); 
```

然后您可以从查询中检索帖子。或者将其设置为全局查询并循环它：

```
$GLOBALS['wp_query'] = $query;

while ( have_posts() ) : the_post(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-22T09:45:29.967

如果您知道 ID，这是使用 query_post 获取帖子的代码。

```
<?php
    $my_query = query_posts('post_id=111&post_type=parks'); // in place of 111 you need to give desired ID.
    global $post;
    foreach ($my_query as $post) {
       setup_postdata($post);
       the_title();
       the_content();
    }
?> 
```

# openerp - 如何在 openerp 6.1 中将 one2many 列表视图分组到另一个模型中？

> ID：11153743
> 
> 赞同：3
> 
> 时间：2012-06-22T09:39:25.100
> 
> 标签：openerp

在我的 sale.order 中，我添加了一个新的 one2many 字段 sale_bom 用于显示物料清单行。每当我添加销售订单行时，如果产品有物料清单，则其 bom 行应显示在新字段 sale_bom 下。

我找到了在 openerp v6.0.3 的 web 客户端和 gtk 客户端中使用 sale_order_lines 对 sale_bom 行进行分组的方法`context="{'group_by':'sale_order_line'}"`，但它在 openerp v6.1 中不起作用 ![在此处输入图像描述](../Images/8cc13558ec2ff7762272bdfb163ed9cf.png) 有没有办法在 openerp v6.1 Web 客户端中进行分组？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T09:21:07.720

在 openerp6.1 webclient 中无法使用 GTK 客户端。或在右侧面板中提供树视图的链接。

# silverlight - 如何在 Silverlight 浏览器外应用程序中管理 cookie

> ID：11153744
> 
> 赞同：0
> 
> 时间：2012-06-22T09:39:34.913
> 
> 标签：silverlight, cookies, out-of-browser

我有一个浏览器外的应用程序，我在 cookie 中存储了一些值，但在应用程序退出时，它会删除所有 cookie 值。所以任何人都可以在这方面帮助我。我再次需要 cookie 值，即在浏览器外模式下午餐的应用程序。

我已阅读此链接 [http://forums.silverlight.net/t/180264.aspx/1](http://forums.silverlight.net/t/180264.aspx/1)

这是最终的答案吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T10:39:06.160

您可以使用独立存储来代替 cookie。您可以使用它来将数据保存在文件中。它将存储在硬盘中，并在重新启动应用程序后可用。

# jquery - .find() 在一个带有变量的语句中的多个类

> ID：11153747
> 
> 赞同：1
> 
> 时间：2012-06-22T09:39:44.737
> 
> 标签：jquery, html

我有一个循环

```
$(".box").find('.video, .print, .web').closest('.box').each(function (index)
 {
     $(this).delay(100 * index).fadeIn(300);
 }); 
```

这段代码工作得很好。但是我经常调用这 3 个类，我想把它放入一个变量中。前任：

```
var resetBoxClass = ".print .web .video";

$(".box").find('resetBoxClass').closest('.box').each(function (index)
 {
     $(this).delay(100 * index).fadeIn(300);
 }); 
```

令我失望的是，我无法让它工作......这只是愚蠢的语义？有人可以向我解释为什么吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-22T09:40:49.800

缺少逗号`resetBoxClass = ".print, .web, .video";` **&** `$(".box").find('resetBoxClass')`应该是`$(".box").find(resetBoxClass)`

这会有所帮助，

休息如下：

```
var resetBoxClass = ".print, .web, .video";

$(".box").find(resetBoxClass).closest('.box').each(function (index)
 {
     $(this).delay(100 * index).fadeIn(300);
 }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T09:41:31.960

不带引号试试：

```
$(".box").find(resetBoxClass).etc(... 
```

使用引号，您没有传递变量，而是传递了字符串文字。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T09:43:34.180

在类之间的第一行添加逗号，并从`find()`

这是代码

```
var resetBoxClass = ".print, .web, .video";

$(".box").find(resetBoxClass).closest('.box').each(function (index)
{
     $(this).delay(100 * index).fadeIn(300);
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T10:08:32.207

你应该需要缓存你的元素而不是类来快速执行你的代码：

```
var yourTarget = $(".box").find('.video, .print, .web').closest('.box');

yourTarget.each(function (index)
 {
     $(this).delay(100 * index).fadeIn(300);
 }); 
```

上面的代码将执行得更快，因为您的元素已经被缓存。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-22T11:46:10.820

@Tats_innit 回答了你的实际问题，所以我不会重复。

这是一个有点笨拙的结构：

```
$( ".box" ).find( ".video, .print, .web" ).closest( ".box" )

// or

$( ".box" ).find( resetBoxClass ).closest( ".box" ) 
```

您应该可以这样做：

```
$( ".box" ).has( ".video, .print, .web" )

// or

$( ".box" ).has( resetBoxClass ) 
```

> 但是我经常调用这 3 个类，我想把它放入一个变量中。

您的意思是您也在代码的其他部分（问题中未显示）中使用该选择器，对吗？对于您问题中的代码片段，您是否将选择器传递给`find()`使用文字或变量并不重要。如果您在代码的其他部分使用相同的选择器，则使用变量将是有益的。我只是在您错误地认为使用`each()`循环意味着您“大量调用这 3 个类”时才提到这一点。

# php - 每秒调用一个 PHP 函数

> ID：11153750
> 
> 赞同：4
> 
> 时间：2012-06-22T09:39:52.020
> 
> 标签：php

有没有办法定期执行一个函数？

我有一个数据库表，我需要知道何时添加或删除条目。我尝试使用的逻辑是 Ajax 调用服务器，但不是立即响应，而是服务器连续检查 30 秒是否更新数据库，如果是，则只有它响应，否则它会在 30 秒后响应。这样，我试图通过每秒调用 Ajax 请求来最小化服务器上​​的负载。

我该怎么做呢？使用`while`循环有意义吗？这样的事情可能是——

```
while (SomeCondition)
{
   if (CheckIfDatabaseChanged())
   {
      echo "System Updated";
      break;
   }
} 
```

如果这是一个没有意义的解决方案，那么我如何确保循环仅运行 30 秒并中断。还是有更好的解决方案？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-22T10:03:14.347

您正在考虑的是一种称为长轮询的东西，它在 PHP 上的扩展性不好，尤其是在您使用阻塞 IO 时。

有关更多信息，请参阅[https://stackoverflow.com/a/6488569/11926 。](https://stackoverflow.com/a/6488569/11926)

但是您的代码可能看起来像这样

```
set_timeout_limit(31);
$i=0;
while ($i<30) {
    // poll database for changes which is a bad idea.
    i = i + 1;
    sleep(1); // sleep 1 second
} 
```

我敢打赌你不能同时运行许多这些。我的建议是使用类似[redis](http://redis.io) [pubsub](http://redis.io/topics/pubsub)的东西来通知数据库更改和某种长轮询/websocket 解决方案。

如果可能，您应该`subscribe`为数据库更改生成一个后台进程，然后将更改发布到`pusher`，例如，因为拥有多个长时间运行的进程确实对性能不利。

您可以自己托管它们，也可以使用托管服务，例如：

**雷迪斯：**

*   [http://redistogo.com](http://redistogo.com)

**长轮询/Websocket：**

*   [http://pusher.com](http://pusher.com)

他们都有小型免费计划，可以帮助您入门，当您对这些计划变得太大时，您可以考虑自己托管这些解决方案。

* * *

**PS ：我还在 PHP 中找到了一个名为**[React](https://github.com/react-php/react)的非阻塞解决方案。此解决方案可能会在 PHP 中扩展（更好）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T09:42:50.877

用这个：

```
set_timeout_limit(0) 
```

[http://se.php.net/manual/ru/function.set-time-limit.php](http://se.php.net/manual/ru/function.set-time-limit.php)

# java - 从 java 与已经运行的外部程序通信

> ID：11153752
> 
> 赞同：0
> 
> 时间：2012-06-22T09:39:58.343
> 
> 标签：java, external-process

我正在尝试使用 java 在已经运行的外部程序上编写基于 Unicode 的虚拟键盘。

即我不想启动程序。它应该已经在运行。我的 java 代码将在后台运行，生成输出并将其发送到记事本或浏览器。

实现这一目标的最佳方法是什么？任何链接/建议将不胜感激。提前致谢！！

# c# - 使用excel文件处理异常

> ID：11153754
> 
> 赞同：0
> 
> 时间：2012-06-22T09:40:20.427
> 
> 标签：c#, .net

我创建了一个代码。理想情况下，代码的作用是：-

1.  它执行函数GetTaskStatus()。我的代码中还有其他几个类似的功能。
2.  如果任何函数发生异常，它会将控件移动到 ExcelRecorder() 函数
3.  如果因此在任何函数中捕获到异常，我必须在给定行的 J 单元格中的 Excel 工作表中写入 FAIL ，并且在同一行的 K 单元格中写入确切的异常错误（*例如，找到 NullReferenceException*）。简而言之，J 单元格是 RESULT，K 单元格是 REMARKS。我的 excel 表中有几行。
4.  如果任何函数都没有发生异常，我只需要在给定行的 J 单元格中写入 PASS
5.  我的代码能够做到这一点。但是，有一个问题。无论是否发生异常，我的代码都在为我的 excel 中的所有行输入 FAIL 和 REMARKS（尽管某些函数不会导致任何异常）

我已经发布了我的代码的主要片段。谁能让我知道我哪里出错了？如果函数没有发生异常，我需要输入 PASS。

代码如下

```
public void GetTaskStatus()
        {
            try
            {
                Console.WriteLine("Invoking GetTaskStatus method");
                Console.WriteLine("------------------****-----------------");
                m_taskStatus = taskClient.GetTaskStatus(m_taskID);
                Console.WriteLine("Task status : " + m_taskStatus.taskStatus.ToString());
                Console.WriteLine("-----------------------------------");
            }
            catch (Exception ex)
            {
                MessageBox.Show("An exception has occured. Please check the Excel sheet for more info", "Exception Caught" + ex);
                ExcelRecorder(true, ex.Message);
            }
            finally
            {
                GC.Collect();
            }
        }

public void ExcelRecorder(bool isExceptionalData, string message)
        {
            MessageBox.Show("ExcelRecorder method reached when exception occurs");
            //Code for recording into excel should be written here
            Excel.Application xlApp = new Excel.Application();
            Excel.Workbook xlWorkbook = xlApp.Workbooks.Open(@"D:/dsds.xlsx");
            Excel._Worksheet xlWorksheet = xlWorkbook.Sheets[1];
            Excel.Range xlRange = xlWorksheet.UsedRange;
            int rowCount = xlRange.Rows.Count;
            int colCount = xlRange.Columns.Count;
            int numSheets = xlWorkbook.Sheets.Count;
            for (int row = 2; row <= rowCount; row++)
            {
                if (isExceptionalData)
                {
                    ((Range)xlWorksheet.Cells[row, "J"]).Value2 = "FAIL";
                    ((Range)xlWorksheet.Cells[row, "K"]).Value2 = message;
                }
                else
                {
                    ((Range)xlWorksheet.Cells[row, "J"]).Value2 = "PASS";
                }
            }
            xlWorkbook.Save();
            xlWorkbook.Close(0,0,0);
            xlApp.Quit();
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T09:43:58.470

在我看来这`isExceptionalData`总是正确的，因此这个代码块

```
if (isExceptionalData)
{
    ((Range)xlWorksheet.Cells[row, "J"]).Value2 = "FAIL";
    ((Range)xlWorksheet.Cells[row, "K"]).Value2 = message;
}
else
                {
    ((Range)xlWorksheet.Cells[row, "J"]).Value2 = "PASS";
} 
```

总是会沿着'FAIL'分支

在你的尝试中添加这个将在没有异常发生时相应地添加行。

```
 ExcelRecorder(false, null); 
```

# plone - 在 ploneformgen 的表单中添加“返回”按钮

> ID：11153759
> 
> 赞同：2
> 
> 时间：2012-06-22T09:40:30.223
> 
> 标签：plone, ploneformgen

我在 Plone 中有一个使用 ploneformgen 的多页表单。我希望用户能够使用后退按钮向后导航。有人可以指出如何在我的表单中添加后退按钮吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T16:07:49.877

我认为在 PFG 中没有简单的方法可以做到这一点，但您可以使用[http://plone.org/products/collective.z3cform.wizard](http://plone.org/products/collective.z3cform.wizard)。警告：这不是点击式配置。

# css - Logo img 在 IE 8 中使 Bootstrap 导航栏崩溃

> ID：11153763
> 
> 赞同：0
> 
> 时间：2012-06-22T09:40:41.120
> 
> 标签：css, internet-explorer, twitter-bootstrap

我正在使用 Twitter 引导程序。我不会写很长，只是给你看。（没有img一切都很好）

IE截图： [https ://www.dropbox.com/s/k1dn6ss1ue5y2c9/ie_screen.png](https://www.dropbox.com/s/k1dn6ss1ue5y2c9/ie_screen.png)

普通浏览器： [https ://www.dropbox.com/s/bp0spch1yvowglp/chrome_screen.png](https://www.dropbox.com/s/bp0spch1yvowglp/chrome_screen.png)

HTML 代码：

```
 <div class="topbar"> 
<div class="navbar ">
     <div class="container">                 
    <ul class="nav nav-pills pull-left">       
      <li><%= link_to "Overview",    root_path %></li>
      <li class="divider-vertical"></li>
      <li><%= link_to "About",    about_path %></li>
      <li class="divider-vertical"></li>
      <li><%= link_to "What we do", what_we_do_path %></li>
      <li class="divider-vertical"></li>
      <li><%= link_to "Partners", partners_path %></li>
      <li class="divider-vertical"></li>
      <li><%= link_to "Contact", contact_path %></li>
      <li class="divider-vertical"></li>        
    </ul>
</div>
 </div>
   </div> 
```

我的 CSS ：

```
.container{
background-color: white;
width: 960px;
}

.navbar .nav {
background-color: white;
position: relative;
display: block;
float: left;
margin: 0 0px 0 0;
 }

.navbar .nav .active > a, .navbar .nav .active > a:hover {
padding-top:0px;
padding-bottom:0px;
color: black;
text-decoration: none;
background-color: white;
}

 .navbar .nav img{
float:left;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T09:58:07.007

鉴于：

```
 <%= link_to(image_tag("/images/logo.png"), root_path, id: "logo") %> 
```

CSS：

```
#logo{
float:left;
} 
```

# c - 在 Ubuntu 上的 MonoDevelop 中编译和运行 C 代码

> ID：11153765
> 
> 赞同：0
> 
> 时间：2012-06-22T09:40:47.957
> 
> 标签：c, monodevelop

我有 C 代码，我想在 Ubuntu 上的 MonoDevelop 中编译和运行此代码。我是 Ubuntu 和 MonoDevelop 的新手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T09:50:40.423

看看`Creating C and C++ projects in Monodevelop` [http://monodevelop.com/Documentation/Creating_C_and_CPP_Projects](http://monodevelop.com/Documentation/Creating_C_and_CPP_Projects)

# iphone - iPhone： - 为什么“应用内购买”中的 id 不匹配？

> ID：11153768
> 
> 赞同：1
> 
> 时间：2012-06-22T09:40:52.090
> 
> 标签：iphone, ios5, in-app-purchase

我正在我的应用中实现应用内购买。我已在应用商店提交应用，但我的应用和应用内购买的苹果 ID 不同。这是错误的问题吗？

![在此处输入图像描述](../Images/de53f3d755fd046c4101f6c2b5f0dab4.png)

我想提一下，我的应用程序非常大，因此测试应用程序内购买时，我创建了一个具有相同捆绑 ID 和配置文件的虚拟应用程序，并将该应用程序提交到应用商店。那么由于这个原因会出现问题吗？

# android - Android ViewPager 前置新视图

> ID：11153771
> 
> 赞同：2
> 
> 时间：2012-06-22T09:40:53.927
> 
> 标签：android, android-viewpager

我想在我的 ViewPager 的第一页中添加一个新视图。我的适配器如下所示：

```
public class PagerAdapter extends FragmentPagerAdapter {

    private final List<Fragment> fragments;

    public PagerAdapter(FragmentManager fm, List<Fragment> fragments) {
        super(fm);
        this.fragments = fragments;
    }

    @Override
    public Fragment getItem(int index) {
        return fragments.get(index);
    }

    @Override
    public int getCount() {
        return fragments.size();
    }

    public void add(int i, ImageFileObject imageFile) {
        ImageViewFragment f = new ImageViewFragment();
        f.setImage(imageFile);
        fragments.add(0, f);
        notifyDataSetChanged();
    }

    public void add(ImageFileObject imageFile) {
        ImageViewFragment f = new ImageViewFragment();
        f.setImage(imageFile);
        fragments.add(f);
        notifyDataSetChanged();
    }

} 
```

但是在调用 add(0, aImageFile) 时，该项目不会添加到片段列表中。（它甚至没有附加）。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-09T16:44:13.497

**更新：**您在评论中描述的问题是真实的，我在第一次测试时错过了它。在分析了源代码后，`FragmentPagerAdapter`我意识到我们需要做的就是以一种不会为不同的片段项返回相同 id 的方式进行**覆盖。`getItemId()`**例如，当前的默认实现只会将位置作为片段的 id 返回，这不适用于这种情况：

```
 public long getItemId(int position) {
    return position;
} 
```

我正在更新这个答案，请看一下。和以前一样，我已经测试了这段代码，你描述的问题现在没有发生。

* * *

您唯一需要做的就是**不要**自己保留对片段的引用`List`，这是由`FragmentPagerAdapter`. 据我所知，这也不是一个好习惯。而且即使您按照其他答案的建议返回`POSITION_NONE`，`getItemPosition()`您最终也会遇到异常

> 原因：java.lang.IllegalStateException：无法更改片段的标记。

这是因为您试图通过在第 0 个索引处添加一个片段（这会导致其他片段重新定位）并根据位置分配标签来重新`Fragment`定位`List`alive `ViewPager`。

牢记这一切，这是一个经过测试且可以**工作**的修改后的适配器：

```
public class PagerAdapter extends FragmentPagerAdapter {
public static class FragmentInfo {
    public String classz;
    public ImageFileObject imageFile;

    public static long IDS;
    public long id;

    public FragmentInfo(){
        id = IDS++;
    } 
}

private final List<FragmentInfo> fragments;
private Context context;

public PagerAdapter(FragmentManager fm, List<FragmentInfo> fragments,
        Context context) {
    super(fm);
    this.fragments = fragments;
    this.context = context;
}

@Override
public Fragment getItem(int index) {
    FragmentInfo info = fragments.get(index);
    ImageViewFragment frag = (ImageViewFragment) Fragment.instantiate(
            context, info.classz, /* null arguments*/ null);
    frag.setImage(info.imageFile);
    return frag;
}

@Override
public long getItemId(int position) {
    return fragments.get(position).id;
} 

@Override
public int getCount() {
    return fragments.size();
}

@Override
public int getItemPosition(Object object) {
    return POSITION_NONE;
}

public void add() {
    FragmentInfo f = new FragmentInfo();
    f.classz = ImageViewFragment.class.getName();
    fragments.add(0, f);
    notifyDataSetChanged();
}
} 
```

请相应地更改您的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-09T14:51:12.507

问题实际上出在 notifyDataSetChanged 上。只需添加到您的适配器：

```
public int getItemPosition(Object object) {
    return POSITION_NONE;
} 
```

* * *

但是，我认为当适配器实际尝试`getItem`再次调用时，您会遇到其他问题。这些问题将出现在“已添加片段”的行中。

# wpf - 在命令后设置属性

> ID：11153777
> 
> 赞同：0
> 
> 时间：2012-06-22T09:41:12.987
> 
> 标签：wpf, silverlight, telerik, rad-controls

我`StatusBar`在 SL4 的屏幕下方有一个（使用 PRISM），只是一个非常简单的`Telerik` `RadDockPanel`.

我也有一个菜单（Telerik和`RibbonView`）。当按下切换按钮时，我想将文本设置为“ON”和“OFF”，并且我想隐藏状态栏，但是......仅在 XAML 中（不使用后面的代码）。`RadRibbonGroup``RadRibbonToggleButton`

我相信这是一种常见的 SL/WPF 编码实践......但是如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T11:18:30.593

必须使用[EventTrigger](http://msdn.microsoft.com/en-us/library/system.windows.eventtrigger.aspx)（通过我提供的链接查看页面下方的示例）和[ObjectAnimationUsingKeyFrames](http://msdn.microsoft.com/en-us/library/system.windows.media.animation.objectanimationusingkeyframes.aspx)来更改未设置动画的属性（文本、可见性等）。

检查[其他答案](https://stackoverflow.com/questions/942548/setting-a-property-with-an-eventtrigger)中的好例子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T11:50:18.857

`DataTrigger`您可以像这样在窗口中指定-

```
<StatusBar.Style>
    <Style>
        <Style.Triggers>
            <DataTrigger
                Binding="{Binding ElementName=MyRadRibbonToggleButton, Path=IsChecked}"
                Value="True">
                <Setter Property="Grid.Visibility" Value="Collapsed" />
            </DataTrigger>
        </Style.Triggers>
    </Style>
</StatusBar.Style> 
```

如果您不能使用`ElementName`绑定，那么您可以在 ViewModel 中使用一个属性（对应于`RadRibbonToggleButton`状态）。`Trigger`可以为`TextBlock`/创建类似的内容`Label`以显示 On/Off 文本。

这就是我在 WPF/MVVM 应用程序中实现这种功能的方式；

您可能必须应用一些技巧才能使这项工作与 Telerik 控件一起使用。

# android - 触发警报时启动活动

> ID：11153781
> 
> 赞同：1
> 
> 时间：2012-06-22T09:41:40.910
> 
> 标签：android, android-intent, nullpointerexception, android-alarms

**1）**我需要在警报触发时启动一个活动，我尝试在 BroadCastReceiver 的 onRecieve 事件中添加该活动，但它失败了。

```
public class AlarmReceiver extends BroadcastReceiver {
public void onReceive(Context context, Intent intent){
    Toast.makeText(context, "Recieved!!", Toast.LENGTH_LONG).show();

    Activity act = new Activity();
    act.startActivity(intent);
    }
} 
```

* * *

**错误：**

```
06-22 13:42:00.733: W/dalvikvm(750): threadid=1: thread exiting with uncaught exception (group=0x40015560)
06-22 13:42:00.763: E/AndroidRuntime(750): FATAL EXCEPTION: main
06-22 13:42:00.763: E/AndroidRuntime(750): java.lang.RuntimeException: Unable to start receiver com.exercise.AndroidTime.AlarmReceiver: java.lang.NullPointerException
06-22 13:42:00.763: E/AndroidRuntime(750):  at android.app.ActivityThread.handleReceiver(ActivityThread.java:1805)
06-22 13:42:00.763: E/AndroidRuntime(750):  at android.app.ActivityThread.access$2400(ActivityThread.java:117)
06-22 13:42:00.763: E/AndroidRuntime(750):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:981)
06-22 13:42:00.763: E/AndroidRuntime(750):  at android.os.Handler.dispatchMessage(Handler.java:99)
06-22 13:42:00.763: E/AndroidRuntime(750):  at android.os.Looper.loop(Looper.java:123)
06-22 13:42:00.763: E/AndroidRuntime(750):  at android.app.ActivityThread.main(ActivityThread.java:3683)
06-22 13:42:00.763: E/AndroidRuntime(750):  at java.lang.reflect.Method.invokeNative(Native Method)
06-22 13:42:00.763: E/AndroidRuntime(750):  at java.lang.reflect.Method.invoke(Method.java:507)
06-22 13:42:00.763: E/AndroidRuntime(750):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
06-22 13:42:00.763: E/AndroidRuntime(750):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
06-22 13:42:00.763: E/AndroidRuntime(750):  at dalvik.system.NativeStart.main(Native Method)
06-22 13:42:00.763: E/AndroidRuntime(750): Caused by: java.lang.NullPointerException
06-22 13:42:00.763: E/AndroidRuntime(750):  at android.app.Activity.startActivityForResult(Activity.java:2827)
06-22 13:42:00.763: E/AndroidRuntime(750):  at android.app.Activity.startActivity(Activity.java:2933)
06-22 13:42:00.763: E/AndroidRuntime(750):  at com.exercise.AndroidTime.AlarmReceiver.onReceive(AlarmReceiver.java:23)
06-22 13:42:00.763: E/AndroidRuntime(750):  at android.app.ActivityThread.handleReceiver(ActivityThread.java:1794)
06-22 13:42:00.763: E/AndroidRuntime(750):  ... 10 more 
```

* * *

**2）**即使按下后退按钮，我如何使活动继续运行。当满足源代码中的某些条件时，活动将关闭。例如警报不会响起，他也无法关闭应用程序，直到用户正确回答问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T09:50:26.490

将以下代码写入您的 BroadcastReceiver 类。

```
Intent i = new Intent();
i.setClassName("your package name", "your package name.your activity name");
i.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
context.startActivity(i); 
```

代替

```
Activity act = new Activity();
act.startActivity(intent); 
```

将 Receiver 类定义到您的 androidmanifest.xml 文件中。

```
<receiver android:name="MyReceiver" >
    <intent-filter>
         <action android:name="de.vogella.android.mybroadcast" />
    </intent-filter>
</receiver> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T09:51:38.173

至于第二部分，通过

```
@Override
public void onBackPressed() {
    //do nothing or whatever you would want to display
    return;

} 
```

要覆盖菜单和主页按钮，请使用以下代码..

```
public boolean onKeyDown(int keyCode, KeyEvent event) {

        if ((keyCode == KeyEvent.KEYCODE_HOME)) {
            //Toast.makeText(this, "You pressed the Home button!", Toast.LENGTH_LONG).show();                     
            return true; // event has been handled
        }

        if(keyCode == KeyEvent.KEYCODE_MENU)
        {
            //Toast.makeText(this, "You pressed the Menu button!", Toast.LENGTH_LONG).show(); 

            return true; // tell your phone that you have handled the event
        }
        return super.onKeyDown(keyCode, event);
    } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-22T10:15:17.197

修改你的 onReceive 方法

```
Intent intent;

public void onReceive(Context context, Intent intent){
       Toast.makeText(context, "Recieved!!", Toast.LENGTH_LONG).show();
       intent = new Intent();
       intent.setClass(context, Test.class); //Test is a dummy class name where to redirect
       intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
       intent.putExtra("msg", str);
       context.startActivity(intent);
} 
```

# linux - PVOP_VCALL2 linux函数

> ID：11153785
> 
> 赞同：0
> 
> 时间：2012-06-22T09:41:50.703
> 
> 标签：linux, function, linux-kernel

我正在浏览 Linux 内核代码，我在其中找到了`PVOP_VCALL2`函数。我想知道这个功能是做什么的？它是如何定义的以及在哪里定义的？

`arch/x86/include/asm/paravirt.h`我在文件中找到了调用 。我试图找到的是`PVOP_VCALL2(pv_lock_ops.spin_lock_flags, lock, flags)`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T08:51:27.037

PVOP_VCALL2 是一个用于超级调用的宏，有 2 个参数

# php - php会话函数说不推荐使用

> ID：11153787
> 
> 赞同：-3
> 
> 时间：2012-06-22T09:41:52.673
> 
> 标签：php

我正在构建一种迷你 cms，但是当我尝试使用会话时出现此错误：

已弃用：函数 session_is_registered() 在第 4 行的 index.php 中已弃用，我使用的代码是：

```
<?php
session_start(); //Start the session
define(ADMIN,$_SESSION['name']); //Get the user name from the previously registered super global variable
if(!session_is_registered("admin")){ //If session not registered
header("location:login.php"); // Redirect to login.php page
}
else //Continue to current page
header( 'Content-Type: text/html; charset=utf-8' );
?> 
```

它还说明了有关已发送标头的信息...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T09:45:11.033

已`session_is_registered`弃用，仅用于`isset`检查：

```
if(!isset($_SESSION['admin'])){ 
```

并且需要`header already sent`注意的是，您应该确保之前没有输出`session_start()`和任何`head()`功能。

如果您的`display_errors`配置打开，您的情况主要是由已弃用的通知引起的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T09:45:34.090

使用函数 isset()

```
if(isset($_SESSION['admin'])){
    ...
} 
```

[http://php.net/manual/ru/function.session-is-registered.php](http://php.net/manual/ru/function.session-is-registered.php)

# browser - wappalyzer(Mozila addon),GTmetrix如何找到cms平台

> ID：11153788
> 
> 赞同：7
> 
> 时间：2012-06-22T09:42:00.757
> 
> 标签：browser

我目前正在开发一个不应公开其开发人员 magento 平台的站点（对此感到抱歉）。

我认为 wappalyzer（Mozila 插件），GTmetrix 网站正在通过其 html 格式查找 cms 名称，但是当我看到一个带有该工具的空白页面时，它仍然向我显示我正在使用 Magento（源视图中没有任何内容 - 它的白色page），所以现在他们是如何发现正在使用 magento 的。关于他们如何工作的任何想法？我检查了标题，但没有特别提到magento。wordpress/joomla 也是如此 - 只需 wappalyzer(Mozila 插件)，即使没有 html 源，GTmetrix 也能找到站点平台。

所以我猜标题中有一些东西（我可能会遗漏一些东西）或者它可能是什么？请指教。附上它的截图。 ![在此处输入图像描述](../Images/193e581c0631ff753b23bef60072a123.png)

提前致谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-15T07:17:45.490

可以查看Wappalyzer的源码：（Ctrl+F Magento）：

[https://github.com/ElbertF/Wappalyzer/blob/master/share/js/apps.js](https://github.com/ElbertF/Wappalyzer/blob/master/share/js/apps.js)

Wappalyzer 最有可能选择了“Mage”JavaScript 变量。您可以通过单击 Firebug 中的 DOM 选项卡来查看这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T10:13:11.453

他们使用 mage、varien、magento 等词找到它。如果它在 css/js 文件类中找到这些词中的任何一个，#id,inside comment 那么它发现它是 magento。

gtmetrix 还做了一个步骤，就像它正在检查 css/js url 路径 - 如果它像 skin/frontend 这样找到 url，那么它说它是 magento。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-19T11:48:57.677

别忘了饼干...

我使用 FireBugs。进入主菜单 -> Cookies

饼干里有`frontend`。

# date - 将日期与 Spring Data neo4j 进行比较

> ID：11153790
> 
> 赞同：3
> 
> 时间：2012-06-22T09:42:03.393
> 
> 标签：date, neo4j, cypher, spring-data-neo4j

在查询`java.util.Date`属性上的关系时，我应该使用什么语法？我尝试只使用类似的查询（这只是一个显示我正在尝试做的事情的示例，所以请不要注意那里的变量名）：

```
@Query("start n1=node({0}) match n1-[r:TYPE]->n2 where r.dateCreated>={1} return r")
Page<Relationship> findAll(Node node, long date, Pageable pager); 
```

但它会引发以下错误：

```
Caused by: Don't know how to compare that. Left: 1339845862883; Right: 1339827156836
at org.neo4j.cypher.internal.Comparer$class.compareValuesOfDifferentTypes(Comparer.scala:45)
at org.neo4j.cypher.internal.Comparer$class.compare(Comparer.scala:67)
at org.neo4j.cypher.commands.ComparablePredicate.compare(ComparablePredicate.scala:30)
at org.neo4j.cypher.commands.ComparablePredicate.isMatch(ComparablePredicate.scala:41)
at org.neo4j.cypher.internal.pipes.matching.PatternMatcher$$anonfun$isMatchSoFar$1.apply(PatternMatcher.scala:148)
at org.neo4j.cypher.internal.pipes.matching.PatternMatcher$$anonfun$isMatchSoFar$1.apply(PatternMatcher.scala:148) 
```

我也尝试通过传递一个日期，但它只是抛出相同的错误，但试图比较一个长和一个日期。

我正在使用 spring-data-neo4j 版本 2.0.1.RELEASE

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T11:40:22.783

因此，日期属性的长值作为字符串存储在图中（在较新版本的 SDN 中，您可以在日期字段上定义 @GraphProperty(targetType=long.class)。

因此，如果您将参数值传递为`String.valueOf(longValue)`

# c - 纯函数的好处

> ID：11153796
> 
> 赞同：83
> 
> 时间：2012-06-22T09:42:13.850
> 
> 标签：c, pure-virtual

今天我在阅读纯函数，对它的使用感到困惑：

**如果一个函数为相同的输入集返回相同的值集并且没有任何可观察到的副作用，则该函数被称为纯函数。**

eg`strlen()`是纯函数，`rand()`而是不纯函数。

```
__attribute__ ((pure)) int fun(int i)
{
    return i*i;
}

int main()
{
    int i=10;
    printf("%d",fun(i));//outputs 100
    return 0;
} 
```

[http://ideone.com/33XJU](http://ideone.com/33XJU)

上述程序的行为方式与没有`pure`声明的情况相同。

**将函数声明为`pure`[如果输出没有变化] 有什么好处？**

* * *

## 回答 #1

> 赞同：146
> 
> 时间：2012-06-22T09:48:38.393

`pure`让编译器知道它可以对函数进行某些优化：想象一下像这样的代码

```
for (int i = 0; i < 1000; i++)
{
    printf("%d", fun(10));
} 
```

使用纯函数，编译器可以知道它只需要计算`fun(10)`一次，而不是 1000 次。对于一个复杂的功能，这是一个巨大的胜利。

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2012-06-22T09:49:19.873

当你说一个函数是“纯的”时，你保证它没有外部可见的副作用（正如评论所说，如果你撒谎，可能会发生坏事）。知道一个函数是“纯的”对编译器有好处，它可以利用这些知识进行某些优化。

以下是[GCC 文档](http://gcc.gnu.org/onlinedocs/gcc/Function-Attributes.html)关于该`pure`属性的说明：

> 纯的
> 
> 许多函数除了返回值外没有任何影响，它们的返回值仅取决于参数和/或全局变量。这样的函数可以像算术运算符一样进行公共子表达式消除和循环优化。这些函数应该用纯属性声明。例如，
> 
> ```
>  int square (int) __attribute__ ((pure)); 
> ```

[菲利普的回答](https://stackoverflow.com/a/11153898/274261)已经表明，知道一个函数是“纯的”如何有助于循环优化。

这是一个用于消除常见子表达式的方法（给定`foo`是纯的）：

```
a = foo (99) * x + y;
b = foo (99) * x + z; 
```

可以变成：

```
_tmp = foo (99) * x;
a = _tmp + y;
b = _tmp + z; 
```

* * *

## 回答 #3

> 赞同：29
> 
> 时间：2012-06-22T09:56:18.780

除了可能的运行时好处之外，纯函数在阅读代码时更容易推理。此外，测试纯函数要容易得多，因为您知道返回值仅取决于参数的值。

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2012-06-22T15:08:37.497

非纯函数

```
int foo(int x, int y) // possible side-effects 
```

就像一个纯函数的扩展

```
int bar(int x, int y) // guaranteed no side-effects 
```

在其中，除了显式函数参数 x、y 之外，宇宙的其余部分（或您的计算机可以与之通信的任何东西）作为隐含的潜在输入。同样，除了显式的整数返回值之外，您的计算机可以写入的任何内容都是返回值的隐含部分。

应该清楚为什么推理纯函数比推理非纯函数要容易得多。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2012-06-22T15:40:24.760

作为一个附加组件，我想提一下，C++11 使用 constexpr 关键字在某种程度上对事物进行了编码。例子：

```
#include <iostream>
#include <cstring>

constexpr unsigned static_strlen(const char * str, unsigned offset = 0) {
        return (*str == '\0') ? offset : static_strlen(str + 1, offset + 1);
}

constexpr const char * str = "asdfjkl;";

constexpr unsigned len = static_strlen(str); //MUST be evaluated at compile time
//so, for example, this: int arr[len]; is legal, as len is a constant.

int main() {
    std::cout << len << std::endl << std::strlen(str) << std::endl;
    return 0;
} 
```

对 constexpr 使用的限制使得该函数可以证明是纯的。这样，编译器可以更积极地优化（请确保您使用尾递归！）并在编译时而不是运行时评估函数。

因此，要回答您的问题，如果您使用的是 C++（我知道您说的是 C，但它们是相关的），以正确的样式编写纯函数允许编译器使用该函数执行各种很酷的事情： -)

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2015-05-13T18:53:32.733

一般来说，纯函数比编译器可以利用的非纯函数有 3 个优势：

# 缓存

假设您有`f`被调用 100000 次的纯函数，因为它是确定性的并且仅取决于其参数，编译器可以计算其值一次并在必要时使用它

# 并行性

纯函数不会读取或写入任何共享内存，因此可以在单独的线程中运行而不会产生任何意外后果

# 通过引用传递

一个函数通过值`f(struct t)`获取它的参数`t`，另一方面，编译器可以通过`t`引用传递`f`它是否声明为纯，同时保证的值`t`不会改变并有性能提升

* * *

除了编译时间的考虑之外，纯函数可以很容易地测试：只需调用它们。

无需构造对象或模拟与数据库/文件系统的连接。

# javascript - Prototypejs观察函数抛出错误

> ID：11153800
> 
> 赞同：0
> 
> 时间：2012-06-22T09:42:19.110
> 
> 标签：javascript, prototypejs

我有这行代码，但它会引发错误。代码有什么问题？

```
<html>
    <head>
        <script src="http://prototypejs.org/javascripts/prototype.js" type="text/javascript"></script>
        <script type="text/javascript">

            Event.observe('target', 'click', function(event) {
                // ...
            });

        </script>   
    </head>
    <body>
        <p id='target'>Click me!</p>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T09:47:17.813

在执行代码时，您尝试将事件处理程序绑定到的元素在 DOM 中不存在。将其包装在 DOM 就绪事件处理程序中：

```
document.observe("dom:loaded", function() {
    Event.observe('target', 'click', function(event) {
        // ...
    });
}); 
```

[原型文档](http://api.prototypejs.org/dom/Event/observe/)中提到了这一点：

> 尝试观察事件的最常见错误之一是尝试在元素存在于 DOM 之前执行此操作。在 dom:loaded 事件或窗口加载事件被触发之前，不要尝试观察元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T09:56:42.773

在你之后加载脚本

标签已加载。这样您就不需要检测 dom:loaded 事件。:)

```
<html>
    <head>
        <script src="http://prototypejs.org/javascripts/prototype.js" type="text/javascript"></script>

    </head>
    <body>
        <p id='target'>Click me!</p>
          <script type="text/javascript">

                Event.observe('target', 'click', function(event) {
                    alert('clicked me');
                });

            </script>
    </body>
</html> 
```

# vb.net - 有没有更好的方法来使用 VB.NET 从 Google Map 获取 Sublocality？

> ID：11153803
> 
> 赞同：1
> 
> 时间：2012-06-22T09:42:44.383
> 
> 标签：vb.net, google-maps

有没有更好的方法来`sublocality`使用`Google Map API`VB.Net？谢谢。

```
Dim SubLocality As String = "--"
Dim xelement As XElement = xelement.Load(String.Format("http://maps.googleapis.com/maps/api/geocode/xml?latlng={0},{1}&sensor=false", 3.1424342, 101.710032))
If String.Compare(xelement.Element("status").Value, "OK", True) = 0 Then
    For Each c As XElement In xelement.Element("result").Elements
        If String.Compare(c.Name.ToString, "address_component", True) = 0 Then
            If c.Elements("type").Any() Then
                For Each d As XElement In c.Elements
                    If String.Compare(d.Name.ToString, "type") = 0 Then
                        If String.Compare(d.Value.ToString, "sublocality") = 0 Then
                            MsgBox(c.Elements("long_name").Value)
                            Exit 
                        End If
                    End If
                Next
            End If
        End If
    Next
End If 
```

# javascript - 如果单击焦点元素的子元素，则会在焦点父元素上触发模糊事件

> ID：11153804
> 
> 赞同：2
> 
> 时间：2012-06-22T09:42:47.037
> 
> 标签：javascript, jquery, javascript-events

我坚持了几个小时。我需要创建一个表单的一部分，如果你点击一个选择，一个复选框字段应该弹出，如果你再次点击其他任何地方，这个字段应该消失。我想在单击选择后通过聚焦字段来执行此操作，但由于某种原因，我的复选框字段不仅会在您单击其他任何地方时失去焦点，甚至当您单击复选框 INSIDE 的标签时也会失去焦点其中。所以问题是我正在关注一个元素，我在其中单击一个标签，并且由于某种我无法弄清楚的原因，聚焦的父元素失去了焦点。

代码：http: [//jsfiddle.net/RELuL/2/](http://jsfiddle.net/RELuL/2/)

任何帮助表示赞赏！

PS：

只是一些额外的问题:) 正如你所看到的，如果你点击选择输入，我隐藏的复选框部分显示得有点晚，它没有立即显示，看起来有点糟糕。任何提示如何优化这个？

编辑：我使用 Firefox 13.0.1

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T03:43:46.457

当您单击 a`<label>`时，浏览器会聚焦关联的输入字段。因此焦点离开父级并转到复选框（并调用您的模糊事件处理程序）。

与其关注父 div 并依赖它被模糊，不如将点击处理程序附加到文档：

```
$(document).click(function() {
    multiSelectUpdate();
});

$('.multiselect.container').click(function(event) {
    event.stopPropagation(); // prevent click event from reaching document
}); 
```

此外，在 Webkit 中，单击`<select>`不会触发单击事件。一种解决方法是改用焦点事件。

[演示](http://jsfiddle.net/jefferyto/RELuL/17/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T12:22:37.840

好的，两个简单的更改使此工作首先将选择框上的单击侦听更改为像这样的[mousedown](http://api.jquery.com/mousedown/)侦听器。

```
 $('.multiselector').mousedown(function(event) {
        event.preventDefault();
        currentMulti = $(this).attr('id');
        thisOffset = $(this).offset();
        $(this).hide();
        $('#' + currentMulti + '-container')
            .css('top', thisOffset.top + 'px').show().attr("tabindex", -1).focus();
        $(this).addClass('active');
    }); 
```

这会在盒子出现之前触发，因此它永远不会显示。

其次，当孩子获得焦点以修复此更改为[focusout](http://api.jquery.com/focusout/)时，模糊侦听器认为它失去了焦点。

```
 $('.multiselect.container').focusout(function() {
        multiSelectUpdate();
    }); 
```

这仅在选择器失去焦点时触发，即使当前焦点在选择器的子级上。

固定[小提琴](http://jsfiddle.net/RELuL/15/)

请享用 ：）

**编辑**

出于某种原因，模糊会在 FF 上多次触发，因此要解决此使用问题，而不是模糊鼠标离开。

```
$('.multiselect.container').mouseleave(function() {
        multiSelectUpdate();
    }); 
```

# .net - 如何实现具有 instance["variable_name"] 访问权限的数据容器？

> ID：11153808
> 
> 赞同：0
> 
> 时间：2012-06-22T09:43:01.967
> 
> 标签：.net, datareader

我正在使用`DataTable["content_name"]`, `DataReader["content_name"]`，但我不知道如何使用这种方式创建自己的对象来访问数据。

我想创建 datareader 结果容器（DataTable 让我对 firebird 上的 db 进行了一些不需要的查询）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T09:49:51.137

你需要的是一个索引器，阅读[这个](http://msdn.microsoft.com/en-us/library/2549tw02.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T09:55:55.063

就像是

```
public class MyClass
{
  private List<String> _myData;

  public MyClass()
  {
    _myData = new List<String>();
  }

  public String this[String argIndex]
  {
    get
    {
      return _myData[argIndex];
    }
    set
    {
      _myData[argIndex] = value;
    }
  }
} 
```

正是这一点通常会让你感到困惑，直到你知道它，有点不明显......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T09:56:50.810

向您的类添加字典和新的索引器属性：

```
private Dictionary<string, string> dataTable = new Dictionary<string, string>();

public string this[string key]
{
   get
   {
      if (this.dataTable.ContainsKey(key))
          return this.dataTable[key];
      else
          return string.Empty;
   }
   set
   {
       if (this.dataTable.ContainsKey(key))
          this.dataTable[key] = value;
   }
} 
```

当然，您可以`dataTable`在代码中的其他地方添加一些抛出或填充私有字段的异常

# objective-c - 为什么 [NSTextStorage setAttributedString] 与 NSMutableAttributedString 一起崩溃？

> ID：11153810
> 
> 赞同：11
> 
> 时间：2012-06-22T09:43:02.397
> 
> 标签：objective-c, macos, cocoa

当我运行以下代码时，它在最后一行崩溃。我不知道为什么。此函数在 awakeFromNib 中调用。

```
- (void)setMotdText:(NSString *)text
{
    NSString *boldFontName = [[NSFont boldSystemFontOfSize:12] fontName];
    NSMutableAttributedString *attrstr = [[NSMutableAttributedString alloc] initWithString:text];

    [attrstr beginEditing];

    [attrstr addAttribute:NSFontAttributeName value:boldFontName range:NSMakeRange(0, 16)];

    [attrstr endEditing];

    [self.motdTextView.textStorage setAttributedString:attrstr];
} 
```

我得到这个崩溃日志：

```
2012-06-22 11:32:22.348 MSM-Plan[20785:403] -[__NSCFConstantString _isDefaultFace]: unrecognized selector sent to instance 0x7fff79b9f380
2012-06-22 11:32:22.349 MSM-Plan[20785:403] An uncaught exception was raised
2012-06-22 11:32:22.349 MSM-Plan[20785:403] -[__NSCFConstantString _isDefaultFace]: unrecognized selector sent to instance 0x7fff79b9f380
2012-06-22 11:32:22.351 MSM-Plan[20785:403] (
    0   CoreFoundation                      0x00007fff8a5bef56 __exceptionPreprocess + 198
    1   libobjc.A.dylib                     0x00007fff8ae19d5e objc_exception_throw + 43
    2   CoreFoundation                      0x00007fff8a64b1be -[NSObject doesNotRecognizeSelector:] + 190
    3   CoreFoundation                      0x00007fff8a5abe23 ___forwarding___ + 371
    4   CoreFoundation                      0x00007fff8a5abc38 _CF_forwarding_prep_0 + 232
    5   AppKit                              0x00007fff8e0b060c -[NSMutableAttributedString(NSMutableAttributedStringKitAdditions) fixFontAttributeInRange:] + 1249
    6   AppKit                              0x00007fff8e0afeb7 -[NSMutableAttributedString(NSMutableAttributedStringKitAdditions) fixAttributesInRange:] + 64
    7   AppKit                              0x00007fff8e19b521 -[NSTextStorage processEditing] + 107
    8   AppKit                              0x00007fff8e0c2564 -[NSTextStorage edited:range:changeInLength:] + 385
    9   Foundation                          0x00007fff8d6f4497 -[NSConcreteMutableAttributedString replaceCharactersInRange:withAttributedString:] + 328
    10  AppKit                              0x00007fff8e1dfd19 -[NSConcreteTextStorage replaceCharactersInRange:withAttributedString:] + 81
    11  MSM-Plan                            0x000000010206af5a -[MSM_PlanAppDelegate setMotdText:] + 314
    12  MSM-Plan                            0x000000010206c455 -[MSM_PlanAppDelegate awakeFromNib] + 1701
    13  CoreFoundation                      0x00007fff8a5b5fb1 -[NSObject performSelector:] + 49
    14  CoreFoundation                      0x00007fff8a5b5f32 -[NSSet makeObjectsPerformSelector:] + 274
    15  AppKit                              0x00007fff8e0369ff -[NSIBObjectData nibInstantiateWithOwner:topLevelObjects:] + 1245
    16  AppKit                              0x00007fff8e02cf73 loadNib + 322
    17  AppKit                              0x00007fff8e02c470 +[NSBundle(NSNibLoading) _loadNibFile:nameTable:withZone:ownerBundle:] + 217
    18  AppKit                              0x00007fff8e02c38b +[NSBundle(NSNibLoading) loadNibFile:externalNameTable:withZone:] + 141
    19  AppKit                              0x00007fff8e02c2ce +[NSBundle(NSNibLoading) loadNibNamed:owner:] + 364
    20  AppKit                              0x00007fff8e29d06f NSApplicationMain + 398
    21  MSM-Plan                            0x000000010206adf2 main + 34
    22  MSM-Plan                            0x000000010206adc4 start + 52
)
2012-06-22 11:32:22.416 MSM-Plan[20785:403] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[__NSCFConstantString _isDefaultFace]: unrecognized selector sent to instance 0x7fff79b9f380'
*** First throw call stack:
(
    0   CoreFoundation                      0x00007fff8a5bef56 __exceptionPreprocess + 198
    1   libobjc.A.dylib                     0x00007fff8ae19d5e objc_exception_throw + 43
    2   CoreFoundation                      0x00007fff8a64b1be -[NSObject doesNotRecognizeSelector:] + 190
    3   CoreFoundation                      0x00007fff8a5abe23 ___forwarding___ + 371
    4   CoreFoundation                      0x00007fff8a5abc38 _CF_forwarding_prep_0 + 232
    5   AppKit                              0x00007fff8e0b060c -[NSMutableAttributedString(NSMutableAttributedStringKitAdditions) fixFontAttributeInRange:] + 1249
    6   AppKit                              0x00007fff8e0afeb7 -[NSMutableAttributedString(NSMutableAttributedStringKitAdditions) fixAttributesInRange:] + 64
    7   AppKit                              0x00007fff8e19b521 -[NSTextStorage processEditing] + 107
    8   AppKit                              0x00007fff8e0c2564 -[NSTextStorage edited:range:changeInLength:] + 385
    9   Foundation                          0x00007fff8d6f4497 -[NSConcreteMutableAttributedString replaceCharactersInRange:withAttributedString:] + 328
    10  AppKit                              0x00007fff8e1dfd19 -[NSConcreteTextStorage replaceCharactersInRange:withAttributedString:] + 81
    11  MSM-Plan                            0x000000010206af5a -[MSM_PlanAppDelegate setMotdText:] + 314
    12  MSM-Plan                            0x000000010206c455 -[MSM_PlanAppDelegate awakeFromNib] + 1701
    13  CoreFoundation                      0x00007fff8a5b5fb1 -[NSObject performSelector:] + 49
    14  CoreFoundation                      0x00007fff8a5b5f32 -[NSSet makeObjectsPerformSelector:] + 274
    15  AppKit                              0x00007fff8e0369ff -[NSIBObjectData nibInstantiateWithOwner:topLevelObjects:] + 1245
    16  AppKit                              0x00007fff8e02cf73 loadNib + 322
    17  AppKit                              0x00007fff8e02c470 +[NSBundle(NSNibLoading) _loadNibFile:nameTable:withZone:ownerBundle:] + 217
    18  AppKit                              0x00007fff8e02c38b +[NSBundle(NSNibLoading) loadNibFile:externalNameTable:withZone:] + 141
    19  AppKit                              0x00007fff8e02c2ce +[NSBundle(NSNibLoading) loadNibNamed:owner:] + 364
    20  AppKit                              0x00007fff8e29d06f NSApplicationMain + 398
    21  MSM-Plan                            0x000000010206adf2 main + 34
    22  MSM-Plan                            0x000000010206adc4 start + 52
)
terminate called throwing an exception(lldb) 
```

有人有想法吗？如果我用 NSAttributedString-Object 调用它，则没有错误。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-22T10:09:49.107

我不得不将第一行更改为：

```
 NSFont *boldFont = [NSFont boldSystemFontOfSize:12]; 
```

现在它可以工作了，因为 value 属性需要一个 NSFont-Object 而不是带有字体名称的 NSString。

这是工作代码：

```
- (void)setMotdText:(NSString *)text
{
    NSFont *boldFont = [NSFont boldSystemFontOfSize:12];
    NSMutableAttributedString *attrstr = [[NSMutableAttributedString alloc] initWithString:text];

    [attrstr beginEditing];

    [attrstr addAttribute:NSFontAttributeName value:boldFont range:NSMakeRange(0, 16)];

    [attrstr endEditing];

    [self.motdTextView.textStorage setAttributedString:attrstr];
} 
```

# python - 在 Python 中链接“==”和“！=”的规则是什么

> ID：11153817
> 
> 赞同：15
> 
> 时间：2012-06-22T09:43:28.467
> 
> 标签：python

今天早上，我发现自己在写这样的东西：

```
if (a == b == c):
  # do something 
```

并且很惊讶它给了我预期的结果。

我认为它会表现为：

```
if ((a == b) == c):
  # do something 
```

但显然没有。似乎 Python 对第一个语句的处理与第二个不同，这很好，但我找不到任何关于此的文档或解释。

我测试并得到了这个：

```
In [1]: 2 == 2 == 2
Out[1]: True

In [2]: (2 == 2) == 2
Out[2]: False 
```

有人愿意向我解释一下关于`==`（或`!=`）这种“链接”的规则是什么？

非常感谢你。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-06-22T09:48:03.823

这适用于所有比较运算符 - 例如，您还可以执行以下操作：

```
>>> 4 < 5 < 6
True
>>> 4 < 5 !=2
True 
```

一般来说，[根据文档](http://docs.python.org/reference/expressions.html#not-in)，`a op1 b op2 c`where`op1`和`op2`are any: `<`, `>`, `!=`, `==`, `<=`, `>=`, `is`, `is not`, `in`or`not in`将给出与以下内容相同的结果：

```
a op1 b and b op2 c 
```

文档还说这可以进行任意多次比较，所以：

```
>>> 5 != '5' != 'five' != (3+2)
True 
```

有时这可能是一个稍微令人困惑的结果，因为它似乎在说`5 != (3+2)`- 每个操作数仅与与其紧邻的操作数进行比较，而不是进行所有可能的组合（从仅使用的示例中可能不清楚`==`，因为它不会如果一切都合理定义，则会影响答案`__eq__`）。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-06-22T09:47:18.597

据我所知，您指出的示例不是链接。

`2 == 2 == 2`就像 `(2 == 2) and ( 2 == 2)`原来是这样`True and True`

尽管

`(2 == 2) == 2`就好像`(True) == 2`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-22T09:46:46.300

在这里查看：http: [//docs.python.org/reference/expressions.html#not-in](http://docs.python.org/reference/expressions.html#not-in)

# objective-c - 如何使用 UINavigationController 从一个视图推送多个视图

> ID：11153823
> 
> 赞同：1
> 
> 时间：2012-06-22T09:43:57.167
> 
> 标签：objective-c, ios5, uinavigationcontroller

我使用`UINavigationController`.

这是我的过渡图像

1.  “主要”-->“第二”-->“第三”-->“第四”
2.  “第二”-->“A”-->“B”
3.  “第二”-->“C”
4.  “第三”-->“D”

    *   “主要”是 RootViewController。
    *   在 2 号和 3 号，`if (["boo" isEqual:"foo"]){transit "A"} else if ("boo"...){transit "C"}`.

我可以将“Main”转换为“Forth”，No.1 过渡。
像这样

```
ThirdViewController *thirdView = [[ThirdViewController alloc] init];
[self.navigationController pushViewController:thirdView animated:YES]; 
```

但我不能让“A”和“B”成为“第二”。
我想将 UIRootViewController 设置为“第二”。
但是“Second”需要经过“A”和“C”。

在“第二”这样...

`SecondViewController.m`

```
AViewController *aView = [[AViewController alloc] init];
[self.navigationController pushViewController:aView animated:YES]; 
```

我该如何编码？

谢谢！对不起，英语很差。
请帮我！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T09:47:13.197

```
NSInteger index = 0;
for (UIViewController *view in self.navigationController.viewControllers) {
    if([view.nibName isEqualToString:@"RootViewController"])//put any `XIB name` where u want to navigate 
        break;
    index = index + 1;
}
[[self navigationController] popToViewController:[[self.navigationController viewControllers] objectAtIndex:index] animated:YES]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T09:56:50.653

尝试使用此代码推送到控制器

```
 DrawImgViewcontroller *ObjImageViewController = [[DrawImgViewcontroller alloc] initWithNibName:@"DrawImgViewcontroller" bundle:nil];
    [self.navigationController  pushViewController:ObjImageViewController  animated:YES];
    [ObjImageViewController release]; 
```

并使用下面的代码返回

```
[self.navigationController popViewControllerAnimated:YES]; 
```

并将其用于您喜欢的任何控制器

```
[self.navigationController popToViewController:[self.navigationController.viewControllers objectAtIndex:1] animated:NO];//Instead of one you can use the currect index you need 
```

# javascript - 覆盖 jQuery 的 .load 函数

> ID：11153827
> 
> 赞同：1
> 
> 时间：2012-06-22T09:44:06.763
> 
> 标签：javascript, jquery, overriding

我有一个在 300 多个页面中使用 $(selector).load(path) 函数的网站。现在我的客户的需求发生了变化，我需要访问跨域来调用这些页面。

为此，我必须在 YQL 的帮助下将所有 .load( 函数替换为某个跨域函数。

是否可以覆盖我的 .load 函数并调用 prevent default 并执行我自己的代码？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-22T09:47:39.513

没有干净的方法可以做到这一点，特别是因为`$.fn.load`根据参数做不同的事情并且替换它会影响所有这些子函数。

但是，jQuery[支持 AJAX 钩子](http://api.jquery.com/extending-ajax/)，您可能能够实现您想要的。

如果您只需要支持 IE 的 XDomainRequest，请查看此插件：[https ://github.com/jaubourg/ajaxHooks/blob/master/src/ajax/xdr.js](https://github.com/jaubourg/ajaxHooks/blob/master/src/ajax/xdr.js)

* * *

无论如何，如果你真的想替换 jQuery 的 ajax 加载功能，这段代码应该可以做到：

```
var _load = $.fn.load;
$.fn.load = function(url, params, callback) {
    if(typeof url !== "string") {
        return _load.apply(this, arguments);
    }

    // do your ajax stuff here
} 
```

`onload`这与 jQuery 用来决定是否有人要绑定事件或执行 AJAX 加载的检查完全相同。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-22T09:50:35.147

在我看来，最合理的方法是不要重载 jquery 函数，而只需在您喜欢的编辑器中进行搜索和替换以替换`$(xxx).load(`为`yourpackage.load(xxx,`.

即使在 300 个 js 文件上也可以在几分钟内完成。未来的更改将更容易，代码将更具可读性，因为**读者永远不会期望 jquery 函数做一些不在文档中的事情**。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-22T09:46:50.507

是的，有可能：

```
$.fn.load = yourFunc; 
```

**推荐吗？我想不是。**

# php - Xpath 选择没有其子节点的节点

> ID：11153830
> 
> 赞同：4
> 
> 时间：2012-06-22T09:44:22.687
> 
> 标签：php, html, xml, xpath

我有一个网页，我想通过代码修改（在特定单词上添加链接）。

HTML 代码：

```
<div class="section">
<h2>Notre histoire</h2>
<p style="text-align: justify;">SPECIFICS WORDS<strong>1998 : la création</strong></p>
<p style="text-align: justify;">pour objectif « de promouvoir, selon une démarche d’éducation active, auprès des jeunes et à travers eux, des projets d’expression collective et d’action de solidarité » (article 2).<br><br><strong>1999-2001 : les débuts SPECIFICS WORDS</strong></p>
<p style="text-align: justify;">SPECIFICS WORDS<a href="#">SPECIFICS WORDS</a></p>
</div> 
```

所以我的目标是 preg_replace 特定单词，但仅限于那些在 P 中，但从 A 或 STRONG 或任何一个标签中出来的人。

我不能使用任何类或任何 id，因为我以前不知道代码！我尝试了 preg_replace PHP 函数，但它不起作用，并且执行时间太长。

所以我的问题是：如何使用 XPATH 选择没有 A、STRONG、IMG 子节点的节点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T10:50:41.413

You cannot select nodes without their children. A node is a subpart of a tree, unless it is a leaf in which case it has not further children. To select the TextNode leaves containing the word "SPECIFIC" which are direct children of P elements, you do

```
//p/text()[contains(.,'SPECIFIC')] 
```

This will exclude the text nodes inside other elements, e.g. in strong or a.

To replace them, you do

```
$dom = new DOMDocument;
$dom->loadHTML($html);
$xpath = new DOMXPath($dom);
foreach ($xpath->query('//p/text()[contains(.,"SPECIFIC")]') as $textNode) {
    $textNode->nodeValue = "REPLACED";
}
echo $dom->saveHTML(); 
```

Also see [DOMDocument in php](https://stackoverflow.com/questions/4979836/noob-question-about-domdocument-in-php/4983721#4983721) and this [XPath Tutorial](http://schlitt.info/opensource/blog/0704_xpath.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T11:07:31.197

如果我理解正确，您希望选择 Xml 文档中作为`<p>`元素的直接子级的所有节点，中间没有任何其他元素。这是可能的，如下所示：

```
`//p/node()[not(self::*)]` 
```

这个表达式选择

1.  在所有`<p>`元素中
2.  直接子节点（没有任何中间层）
3.  除非它们是元素。

# android - 在模拟器中打开画廊时强制关闭

> ID：11153832
> 
> 赞同：1
> 
> 时间：2012-06-22T09:44:31.503
> 
> 标签：android, image

我正在尝试打开我的画廊并在我的 SD 卡中选择一个图像，但是当我单击按钮打开画廊时，它给了我强制关闭的错误，这是我的代码

```
 public void openGallery(int req_code){

        Intent intent = new Intent();
        intent.setType("image/*");
        intent.setAction(Intent.ACTION_GET_CONTENT);
        startActivityForResult(Intent.createChooser(intent,"Select file to upload "), req_code);
   } 
```

这是我的错误强制关闭..应用程序相机

![在此处输入图像描述](../Images/9ad135f6be701ec2b8611c7e23125f09.png)

**日志猫**

```
06-22 15:03:27.511: D/dalvikvm(179): GC_EXPLICIT freed <1K, 6% free 6439K/6791K, paused 6ms+6ms
06-22 15:03:28.893: I/Process(13882): Sending signal. PID: 13882 SIG: 9
06-22 15:03:29.041: W/InputManagerService(80): Window already focused, ignoring focus gain of: com.android.internal.view.IInputMethodClient$Stub$Proxy@414c1a38
06-22 15:03:30.121: I/ActivityManager(80): Process com.android.gallery (pid 13882) has died.
06-22 15:03:30.121: W/WindowManager(80): Failure taking screenshot for (230x143) to layer 21015
06-22 15:03:30.765: I/ActivityManager(80): Starting: Intent { act=android.intent.action.PICK dat=content://media/external/images/media cmp=com.android.gallery/com.android.camera.ImageGallery } from pid 13692
06-22 15:03:30.771: W/WindowManager(80): Failure taking screenshot for (230x143) to layer 21015
06-22 15:03:30.878: I/ActivityManager(80): Start proc com.android.gallery for activity com.android.gallery/com.android.camera.ImageGallery: pid=13920 uid=10017 gids={1015, 1024, 1006, 2001, 3003}
06-22 15:03:32.221: W/ActivityManager(80): Activity destroy timeout for ActivityRecord{40e28e70 com.android.gallery/com.android.camera.ImageGallery}
06-22 15:03:33.151: D/AndroidRuntime(13920): Shutting down VM
06-22 15:03:33.151: W/dalvikvm(13920): threadid=1: thread exiting with uncaught exception (group=0x40014760)
06-22 15:03:33.241: E/AndroidRuntime(13920): FATAL EXCEPTION: main
06-22 15:03:33.241: E/AndroidRuntime(13920): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.android.gallery/com.android.camera.ImageGallery}: android.util.AndroidRuntimeException: You cannot combine custom titles with other title features
06-22 15:03:33.241: E/AndroidRuntime(13920):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1748)
06-22 15:03:33.241: E/AndroidRuntime(13920):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1764)
06-22 15:03:33.241: E/AndroidRuntime(13920):    at android.app.ActivityThread.access$1500(ActivityThread.java:122)
06-22 15:03:33.241: E/AndroidRuntime(13920):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1002)
06-22 15:03:33.241: E/AndroidRuntime(13920):    at android.os.Handler.dispatchMessage(Handler.java:99)
06-22 15:03:33.241: E/AndroidRuntime(13920):    at android.os.Looper.loop(Looper.java:132)
06-22 15:03:33.241: E/AndroidRuntime(13920):    at android.app.ActivityThread.main(ActivityThread.java:4025)
06-22 15:03:33.241: E/AndroidRuntime(13920):    at java.lang.reflect.Method.invokeNative(Native Method)
06-22 15:03:33.241: E/AndroidRuntime(13920):    at java.lang.reflect.Method.invoke(Method.java:491)
06-22 15:03:33.241: E/AndroidRuntime(13920):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:841)
06-22 15:03:33.241: E/AndroidRuntime(13920):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:599)
06-22 15:03:33.241: E/AndroidRuntime(13920):    at dalvik.system.NativeStart.main(Native Method)
06-22 15:03:33.241: E/AndroidRuntime(13920): Caused by: android.util.AndroidRuntimeException: You cannot combine custom titles with other title features
06-22 15:03:33.241: E/AndroidRuntime(13920):    at com.android.internal.policy.impl.PhoneWindow.requestFeature(PhoneWindow.java:204)
06-22 15:03:33.241: E/AndroidRuntime(13920):    at com.android.internal.policy.impl.PhoneWindow.generateLayout(PhoneWindow.java:2339)
06-22 15:03:33.241: E/AndroidRuntime(13920):    at com.android.internal.policy.impl.PhoneWindow.installDecor(PhoneWindow.java:2546)
06-22 15:03:33.241: E/AndroidRuntime(13920):    at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:219)
06-22 15:03:33.241: E/AndroidRuntime(13920):    at android.app.Activity.setContentView(Activity.java:1780)
06-22 15:03:33.241: E/AndroidRuntime(13920):    at com.android.camera.ImageGallery.onCreate(ImageGallery.java:113)
06-22 15:03:33.241: E/AndroidRuntime(13920):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1048)
06-22 15:03:33.241: E/AndroidRuntime(13920):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1712)
06-22 15:03:33.241: E/AndroidRuntime(13920):    ... 11 more
06-22 15:03:33.311: W/ActivityManager(80):   Force finishing activity com.android.gallery/com.android.camera.ImageGallery
06-22 15:03:33.401: W/WindowManager(80): Failure taking screenshot for (230x143) to layer 21020 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T10:06:40.647

用这个 ：

```
 button.setOnClickListener(new View.OnClickListener() {

        public void onClick(View arg) {
            Intent i = new Intent(Intent.ACTION_PICK,
                    android.provider.MediaStore.Images.Media.EXTERNAL_CONTENT_URI);
            startActivityForResult(i, ACTIVITY_SELECT_IMAGE);
        }
    }); 
```

然后在 onActivityResult()

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);

    switch (requestCode) {
        case REQ_CODE_PICK_IMAGE:
            if (resultCode == RESULT_OK) {
                Uri selectedImage = data.getData();
                String[] filePathColumn = {MediaStore.Images.Media.DATA};

                Cursor cursor = getContentResolver().query(selectedImage, filePathColumn, null, null, null);
                cursor.moveToFirst();

                int columnIndex = cursor.getColumnIndex(filePathColumn[0]);
                String filePath = cursor.getString(columnIndex);
                cursor.close();
                //   Bitmap yourSelectedImage = BitmapFactory.decodeFile(filePath);
            }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T09:48:59.597

使用此代码，

```
Intent i = new Intent(Intent.ACTION_PICK,
                    android.provider.MediaStore.Images.Media.EXTERNAL_CONTENT_URI);
     startActivityForResult(i,REQUEST_CODE); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T09:51:02.030

用这个：

```
 Intent i = new Intent(Intent.ACTION_PICK,
           android.provider.MediaStore.Images.Media.EXTERNAL_CONTENT_URI);
 startActivityForResult(i, ACTIVITY_SELECT_IMAGE); 
```

然后在onActivityForResult中，调用intent.getData()获取Image的Uri。然后你需要从 ContentProvider 中获取 Image。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T12:18:11.463

也许您在清单中忘记了这一点？

```
 <uses-permission android:name="android.permission.CAMERA" /> 
```

# iphone - 调用启动后移动故事板的自定义大小的 ZBarReaderView

> ID：11153835
> 
> 赞同：3
> 
> 时间：2012-06-22T09:44:40.240
> 
> 标签：iphone, ios, barcode-scanner, zbar-sdk

我有一个从情节提要创建的 ZBarReaderView，大小为 216x20 像素，显示为大约 230x50 像素，因为 ZBarReaderView 并没有把它的大小看得太严重......这一切都很好，但是当我在那个 readerView 上调用 start 时它的行为真的很奇怪. 它启动了凸轮，但可能在半秒后，readerView 会放大一点，并且 readerView 内的相机图片向下移动，然后再次向上移动。这并不可怕，但看起来有点糟糕。任何人都有任何想法可能导致这种情况以及如何解决它？也许 sdk 对扫描仪的准备情况有某种隐藏的回调，我可以隐藏它，直到扫描仪说它准备好了，然后在 0.5 秒后显示扫描仪......

barcodeReader 是 ZBarReaderView 的 iboutlet，scannerLoading 是 uiactivityindicatorview 的 iboutlet，它在扫描仪加载之前一直处于动画状态。这些是唯一从默认更改的设置，当然故事板中设置的框架除外。

```
[barcodeReader setReaderDelegate:self];
[barcodeReader setAllowsPinchZoom:false];
[barcodeReader start];

/* this works because [barcodeReader start] blocks ui updates until the scanner
   is running, i know it's not a good solution but since there doesn't seem to 
   be a callback or delegate method like scannerDidStart or something it seems 
   to be the only way... */
[scannerLoading stopAnimating]; 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T14:09:52.623

我刚刚发布了一个报复性问题的答案：

[ZBarReadview 具有来自 StoryBoard 的自定义大小，但是当它被调用时，它的大小不是我设置的](https://stackoverflow.com/q/12906557/986756)

也许答案也解决了你的问题。

简而言之：

当使用 Interface Builder 或 Storyboard 创建视图并将 ZBarReaderView 分配给它时，您必须在相机图像的属性中选中“剪辑子视图”以保持视图的大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T12:23:57.017

只需添加另一个视图以使其成为cameraoverlayview，其中的图像视图具有所需的图像部分为透明的。然后在按钮操作中`

// ADD: 显示一个从摄像头扫描的条形码阅读器

```
 ZBarReaderViewController *reader = [ZBarReaderViewController new];
reader.readerDelegate = self;

reader.supportedOrientationsMask = ZBarOrientationMaskAll;

reader.sourceType=UIImagePickerControllerSourceTypeCamera;
//reader.cameraDevice = UIImagePickerControllerCameraDeviceFront;

reader.cameraOverlayView=cameraOverlay;

if( [UIImagePickerController isCameraDeviceAvailable:                         UIImagePickerControllerCameraDeviceFront ])
{
       reader.cameraDevice = UIImagePickerControllerCameraDeviceFront;
}
ZBarImageScanner *scanner = reader.scanner;

reader.wantsFullScreenLayout = YES;
// TODO: (optional) additional reader configuration here

// EXAMPLE: disable rarely used I2/5 to improve performance

[scanner setSymbology: ZBAR_I25
               config: ZBAR_CFG_ENABLE
                   to: 0];
 reader.showsZBarControls = NO; 
// present and release the controller 
```

[自我presentModalViewController：阅读器动画：是]；//[appdel.navigationController pushViewController:reader animated:YES];

```
//[reader.view addSubview:collect];

[reader release];add this and then also add 
```

`- (void) imagePickerController: (UIImagePickerController*) reader didFinishPickingMediaWithInfo: (NSDictionary*) info { // ADD: 获取解码结果 id results = [info objectForKey: ZBarReaderControllerResults]; ZBarSymbol *symbol = nil; for(symbol in results) // 示例：只抓取第一个条形码中断；

```
 [self rewards:symbol.data]; 
```

} `

作为一种方法。希望这能解决您的问题

# java - CCCallFunc 中 cocos2d-android 中的 NoSuchMethodException

> ID：11153841
> 
> 赞同：2
> 
> 时间：2012-06-22T09:44:55.880
> 
> 标签：java, android, cocos2d-android, nosuchmethoderror

我正在使用cocos2d for android（周维宽版）。CCCallFunc 在任何地方都不起作用。它总是抛出 NoSuchMethodException。一段代码

```
...
CCJumpBy action7 = CCJumpBy.action(0.4f, CGPoint.ccp(60f,0f), 30f, 1);
        CCJumpBy action8 = CCJumpBy.action(0.4f, CGPoint.ccp(-60f,0f), 30f, 1);
        CCCallFuncN action9 = CCCallFuncN.action(this,"stopDancing");
        CCSequence action10 = CCSequence.actions(action1,action2,action3,action4,action5,action6,action7,action8,action9);
        this.runAction(action10);
... 
```

“stopDancing”属于同一类。我觉得这里面有问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T10:01:32.127

您需要将您的方法创建为**公开**的，其中包含一个**参数作为对象**

所以你的方法看起来像这样

```
public void stopDancing(Object sender){    
//Your code...
......    
} 
```

# ado.net - Oracle 00306 使用参数调用过程时出错 - 数字数组

> ID：11153842
> 
> 赞同：0
> 
> 时间：2012-06-22T09:44:57.977
> 
> 标签：ado.net, oracle11g

我在像这样的类型“ `create or replace type numbers_table is table of numbers`”中定义了一个类型。我有一个具有这种类型参数的过程 ( `ids_list IN numbers_table`)。

在使用 Oracle 客户端调用该过程时，我不断收到“..Wrong number or types of arguments ...”错误。

我像这样传递这个参数：

```
 OracleParameter param1 = new OracleParameter("ids_list", OracleDbType.Decimal, ParamDirection.Input);
param1.CollectionType = OracleCollectionType.PLSQLAssociativeArray;
param1.ArrayBindSize = new int[collectioncount];
param1.ArrayBindStatus = new OracleParameterStatus[collectioncount];
param1.Size = collectioncount;

for(int i = 0; i < collectioncount; i++)
{
param1[i].ArrayBindSize = 8000;
param1[i].ArrayBindStatus = new OracleParameterStatus.Success;

}

param1.Value = collection; 
```

仍然没有运气......我试图将 OracleDbType.Decimal 更改为 Double、Long、Int64 等，但对我没有任何作用。

# .net - 在 WCF 服务中无法访问 SQL Server DB

> ID：11153845
> 
> 赞同：1
> 
> 时间：2012-06-22T09:45:09.530
> 
> 标签：.net, sql-server, wcf, exception-handling, authorization

我创建了 edmx 实体框架文件来映射数据库 Herbalshop 中的表。在我的 WCF 服务中，我创建了对象上下文并尝试运行检索第一条记录的查询。当我尝试运行我的 WCF 服务时，我收到错误，因为访问被拒绝。但我是 Herbalshop 数据库的所有者。我试图调试我的服务并得到错误：

> System.Web.AspNetHostingPermission，系统，版本=2.0.0.0，文化=中性，PublicKeyToken=b77a5c561934e089

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T09:47:54.193

运行 Web 服务的帐户必须具有服务器和数据库连接权限。

# oracle - 通过 SQL 加载器加载数据的问题

> ID：11153853
> 
> 赞同：1
> 
> 时间：2012-06-22T09:45:33.943
> 
> 标签：oracle, sql-loader

我在通过 SQL Loader 加载 CSV 文件时遇到了一些问题。

这是控制文件：

```
LOAD DATA 
INFILE 'mp.csv'
BADFILE mp.bad'
INSERT 
INTO TABLE mp_staging
FIELDS TERMINATED BY ','
OPTIONALLY ENCLOSED BY '"'
TRAILING NULLCOLS
(
mp_id INTEGER,
mp_name CHAR,
mp_desc CHAR,
oid CHAR,
ptye_cd CHAR,
creation_tmstmp TIMESTAMP WITH TIME ZONE "YYYY-MM-DD HH24:MI:SS,FF9",
modified_tmstmp TIMESTAMP WITH TIME ZONE "YYYY-MM-DD HH24:MI:SS,FF9",
last_generation_tmstmp TIMESTAMP WITH TIME ZONE "YYYY-MM-DD HH24:MI:SS,FF9",
deact_dt DATE,
) 
```

以下是 CSV 文件中的一些示例记录：

```
1083,"Test3","","mills_b","PRIVATE",2000-12-06 14:29:21.17,1999-12-06 14:29:21.17,2011-    10-01 04:03:44.6

116,"Mike1","","mills_b","PRIVATE",1999-09-15 11:15:29.42,1999-09-15 11:15:59.663,2011-    10-01 04:01:23.923,,0,"F","" 
```

我面临两个问题-

1.  第二条记录被插入，但表中的 mp_id 不同，因为表中插入的值不是 1083，而是一个完全不同的数字，这似乎是由序列生成的，尽管我没有提到任何序列控制文件。

2.  第一条记录无法加载，出现以下错误：

> 记录 1：拒绝 - 表 EQ_MP_STAGING、列 CREATION_TMSTMP 上的错误。ORA-01841: （完整）年份必须介于 -4713 和 +9999 之间，而不是 0

有人可以帮助我朝着正确的方向前进，以便我可以调试这些问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T09:52:21.730

秒和毫秒之间的分隔符是 CSV 文件中的一个点 ( `1999-12-06 14:29:21.17`)，但格式中的逗号 ( `YYYY-MM-DD HH24:MI:SS,FF9`)

我的猜测是它可能与`FIELDS TERMINATED BY ','`指令冲突。

你能试试这个吗？

```
creation_tmstmp TIMESTAMP WITH TIME ZONE "YYYY-MM-DD HH24:MI:SS.FF9",
modified_tmstmp TIMESTAMP WITH TIME ZONE "YYYY-MM-DD HH24:MI:SS.FF9",
last_generation_tmstmp TIMESTAMP WITH TIME ZONE "YYYY-MM-DD HH24:MI:SS.FF9", 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T11:02:26.870

更改`mp_id`表明您在表上有一个插入触发器，该触发器`mp_staging`始终从序列中设置 ID。如果需要指定 ID 值的能力，触发器可以检查传递的是否`:new.mp_id`为空，如果是则只分配序列值。您还需要检查该序列是否设置为高于您正在加载的任何值，否则您以后可能会遇到冲突。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T12:35:57.050

好的，我已经发现了错误。这都与控制文件定义有关。我所要做的就是删除数据类型声明。据我所知，当您指定数据类型时，您必须指定字段的限制。我试图指定**POSITION(*)**，认为这将处理可变长度字段，但我再次遇到相同的错误。

```
LOAD DATA  
INFILE 'mp.csv' 
BADFILE mp.bad' 
INSERT  INTO TABLE mp_staging
FIELDS TERMINATED BY ',' 
OPTIONALLY ENCLOSED BY '"' 
TRAILING NULLCOLS 
( mp_id , 
mp_name , 
mp_desc , 
oid , 
ptye_cd , 
creation_tmstmp TIMESTAMP WITH TIME ZONE "YYYY-MM-DD HH24:MI:SS,FF9", 
modified_tmstmp TIMESTAMP WITH TIME ZONE "YYYY-MM-DD HH24:MI:SS,FF9",              last_generation_tmstmp TIMESTAMP WITH TIME ZONE "YYYY-MM-DD HH24:MI:SS,FF9", 
deact_dt ) 
```

# c++ - 检查未释放的指针

> ID：11153863
> 
> 赞同：2
> 
> 时间：2012-06-22T09:46:18.920
> 
> 标签：c++, pointers, memory-management

假设一个指针对象被分配在一个点上，并且它被返回给不同的嵌套函数。有一次，我想在检查它是否有效或已被某人取消分配后取消分配该指针。

是否有任何保证这些都会起作用？

```
if(ptr != NULL)
   delete ptr; 
```

或者

```
if(ptr)
   delete ptr; 
```

此代码不起作用。它总是给出分段错误

```
#include <iostream>
class A
{
    public:
    int x;
     A(int a){ x=a;}
     ~A()
     { 
          if(this || this != NULL) 
              delete this;
     }
};
int main()
{ 
    A *a = new A(3);
    delete a;
    a=NULL;
} 
```

**编辑**

每当我们谈论指针时，人们就会开始问，为什么不使用智能指针。仅仅因为有智能指针，每个人都无法使用它。

我们可能正在研究使用旧式指针的系统。美好的一天，我们无法将它们全部转换为智能指针。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-22T09:47:13.153

> `if(ptr != NULL) delete ptr;`
> 
> 或者
> 
> `if(ptr) delete ptr;`

这两者实际上是等价的，也与 相同`delete ptr;`，因为调用指针可以保证`delete`工作`NULL`（如，它什么都不做）。

如果`ptr`是一个悬空指针，它们不能保证工作。

意义：

```
int* x = new int;
int* ptr = x;
//ptr and x point to the same location
delete x;
//x is deleted, but ptr still points to the same location
x = NULL;
//even if x is set to NULL, ptr is not changed
if (ptr)  //this is true
   delete ptr;   //this invokes undefined behavior 
```

在您的特定代码中，您会收到异常，因为您调用`delete this`了析构函数，而析构函数又再次调用了析构函数。因为`this`is never `NULL`，你会得到一个堆栈溢出，因为析构函数将不受控制地递归。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-22T09:50:51.737

不要调用`delete this`析构函数：

> **5.3.5、删除：**如果delete-expression的操作数的值不是空指针值，delete-expression将为被删除的对象或数组元素调用析构函数（如果有）。

因此，您将在析构函数内进行无限递归。

然后：

```
if (p)
    delete p; 
```

检查`p`不为空（`if (x)`在 C++ 中是指`if x != 0`）是多余的。`delete`已经检查过了。

这将是有效的：

```
class Foo {
public:
    Foo () : p(0) {}
    ~Foo() { delete p; }
private:
    int *p;

    // Handcrafting copy assignment for classes that store 
    // pointers is seriously non-trivial, so forbid copying:
    Foo (Foo const&) = delete;
    Foo& operator= (Foo const &) = delete;
}; 
```

不要假设任何内置类型，如`int`，`float`或指向某物的指针，会自动初始化，因此，不要假设它们`0`在未显式初始化它们时会自动初始化（只有全局变量将被零初始化）：

> **8.5 初始化器：**如果没有为对象指定初始化器，则该对象是默认初始化的；如果不执行初始化，则具有自动或动态存储持续时间的对象具有不确定的值。[注意：具有静态或线程存储持续时间的对象是零初始化的

所以：**总是初始化内置类型！**

* * *

> 我的问题是我应该如何避免指针的双重删除并防止崩溃。

析构函数应该只输入和离开一次。不是零次，不是两次，一次。

如果您有多个可以到达指针的位置，但不确定何时允许删除，即如果您发现自己在记账，请使用更简单的算法、更简单的规则或智能指针，例如`std::shared_ptr`or `std::unique_ptr`：

```
class Foo {
public:
    Foo (std::shared_ptr<int> tehInt) : tehInt_(tehInt) {}
private:
    std::shared_ptr<int> tehInt_;
};

int main() {
    std::shared_ptr<int> tehInt;
    Foo foo (tehInt);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-22T09:48:40.303

您不能假设指针在有人删除后会设置为 NULL。embarcadero C++ Builder XE 肯定就是这种情况。之后它可能会被设置为 NULL 但不要使用它不允许您的代码再次删除它的事实。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T11:18:44.110

你问：“有一次，我想在检查它是否有效或已经被某人解除分配后解除分配。”

C/C++中*没有可移植的方法来检查 >naked pointer< 是否有效*。就是这样。故事到此结束。**你不能这样做。**再说一遍：仅当您使用*裸*指针或 C 样式指针时。还有其他类型的指针没有这个问题，所以为什么不使用它们呢！

现在问题变成了：你为什么坚持应该使用裸指针？不要使用裸指针，适当地使用`std::shared_ptr`和`std::weak_ptr`，你甚至不需要担心删除任何东西。当最后一个指针超出范围时，它将自动删除。下面是一个例子。

示例代码显示在堆上分配了两个对象实例：一个整数和一个 Holder。当 test() 返回时，`std::auto_ptr<Holder>`调用者不使用返回的值`main()`。因此指针被破坏，从而删除了 Holder 类的实例。当实例被破坏时，它会破坏指向整数实例的指针——指向该整数的两个指针中的第二个。然后`myInt`也被破坏，因此最后一个指向整数的指针被破坏，并且内存被释放。自动且无后顾之忧。

```
class Holder {
  std::auto_ptr<int> data;
public:
  Holder(const std::auto_ptr<int> & d) : data(d) {}
}

std::auto_ptr<Holder> test() {
  std::auto_ptr<int> myInt = new int;
  std::auto_ptr<Holder> myHolder = new Holder(myInt);
  return myHolder;
}

int main(int, char**) {
  test(); // notice we don't do any deallocations!
} 
```

只是不要在 C++ 中使用裸指针，没有充分的理由。它只会让你在脚下开枪。多次。放弃;)

智能指针的粗略指南如下：

*   **std::auto_ptr** - 当作用域是对象的唯一所有者时使用，并且对象的生命周期在作用域死亡时结束。因此，如果`auto_ptr`是一个类成员，那么当类的实例被销毁时，指向的对象被删除必须是有意义的。将其用作函数中的自动变量也是如此。在所有其他情况下，请勿使用它。

*   **std::shared_ptr** - 它的使用意味着所有权，可能在多个指针之间共享。指向对象的生命周期在指向它的最后一个指针被销毁时结束。使管理对象的生命周期变得非常简单，但要注意循环引用。如果 Class1 拥有 Class2 的一个实例，而 Class2 的同一个实例拥有 Class1 的前一个实例，则指针本身永远不会删除这些类。

*   **std::weak_ptr** - 它的使用意味着非所有权。它不能直接使用，但必须`shared_ptr`在使用前转换回a。A`weak_ptr`不会阻止对象被销毁，因此不会出现循环引用问题。否则它是安全的，因为如果它悬空，您将无法使用它。它将断言或向您提供一个空指针，从而导致立即的段错误。使用悬空指针更糟糕，因为它们通常看起来有效。

    这实际上是 的主要好处`weak_ptr`：使用裸 C 风格的指针，您永远不会知道是否有人删除了该对象。A`weak_ptr`知道最后一次`shared_ptr`超出范围的时间，它将阻止您使用该对象。您甚至可以询问它是否仍然有效：如果对象被删除，该`expired()`方法将返回。`true`

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-06-22T10:02:36.263

你永远不应该使用`delete this`. 有两个原因，析构函数正在删除内存并给你整理的机会（释放操作系统资源，删除对象创建的对象中的任何指针）。其次，对象可能在堆栈上。

# jquery - jqGrid 行中的 Twitter Bootstrap 按钮下拉菜单

> ID：11153866
> 
> 赞同：3
> 
> 时间：2012-06-22T09:46:30.637
> 
> 标签：jquery, jqgrid, twitter-bootstrap

我正在尝试在 jqGrid 行的列中添加引导下拉按钮，但是当用户单击按钮中的向下箭头以便查看选项时，选项会隐藏在网格的下一行后面。

已尝试设置 zIndex 但没有奏效。

请建议。

* * *

解决了：

通过覆盖 jqGrid css ".ui-jqgrid .ui-jqgrid-view .ui-jqgrid-bdiv" 来解决问题，使其溢出：可见

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T17:24:05.470

您的问题与此类似[https://stackoverflow.com/a/11067115/1416911](https://stackoverflow.com/a/11067115/1416911)

有几种解决方案（感谢赏金）来处理下拉溢出问题。

特别看看@ScottS 的回答。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-26T04:24:24.247

通过执行以下操作使此工作：

1.  添加对列模型的类引用

{名称：“编辑”，搜索：假，宽度：90，对齐：“中心”，可排序：假，**类：“bootstrap_dropdown”** }，

2.  添加 bootstrap_dropdown css

    ```
    <style>
    td.bootstrap_dropdown {
        overflow:visible !important;
        white-space: normal !important;
    } 
    ```

3.  编辑**ui.jqgrid.css**，并更改 " `.ui-jqgrid .ui-jqgrid-bdiv`" 元素

    .ui-jqgrid .ui-jqgrid-bdiv {位置：相对；边距：0；填充：0； **溢出：可见！重要；** 文本对齐：左；}

4.  将下拉列表添加到行

    ```
     gridComplete: function () {
            var rows = $("#grid").getDataIDs();
            for (var i = 0; i < rows.length; i++) {

                // code here 

                var edit = " ";
                edit = edit + "<div class='btn-group'>";
                edit = edit + "  <button type='button'  onclick=\"viewmodal.showEditPage('#grid'," + rows[i] + ");\" class='btn btn-primary  btn-xs'><i class='fa fa-pencil-square-o lg'></i> Edit</button>";
                edit = edit + "  <button type='button' class='btn btn-primary  btn-xs dropdown-toggle' data-toggle='dropdown' aria-expanded='false'>";
                edit = edit + "    <span class='caret'></span>";
                edit = edit + "    <span class='sr-only'>Toggle Dropdown</span>";
                edit = edit + "  </button>";
                edit = edit + "  <ul class='dropdown-menu' role='menu'>";
                edit = edit + "    <li><a href='#' onclick=\"viewmodal.showUploadPage('#grid'," + rows[i] + "); return false;\"><i class='fa fa-upload lg'></i> Upload images</a></li>";
                edit = edit + "    <li class='divider'></li>";
                edit = edit + "    <li><a href='#' onclick=\"window.open('" + link + "','','');\"><i class='fa fa-search lg'></i> Preview web</a></li>";
                edit = edit + "    <li><a href='#'><i class='fa fa-search lg'></i> Preview mobi</a></li>";
                edit = edit + "  </ul>";
                edit = edit + "</div>";

                // Add buttons to 'edit' column
                $("#grid").jqGrid('setRowData', rows[i], { edit: edit });

                // more code here
            };  
        } 
    ```

# tree - 使用 prefuse 以 DFS 顺序显示树节点

> ID：11153873
> 
> 赞同：0
> 
> 时间：2012-06-22T09:46:57.537
> 
> 标签：tree, visualization, traversal, depth-first-search, prefuse

是否可以一次显示一个节点，作为对按钮单击的反应，可以说，从 DFS 顺序中的 prefuse 树结构使用 prefuse 可视化原语，如果可以，如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T16:15:26.920

您可以使用 手动设置每个节点的可见性`setVisible(boolean visible)`。

# c# - 使用证书身份验证访问 Web 服务和 HTTP 接口

> ID：11153880
> 
> 赞同：11
> 
> 时间：2012-06-22T09:47:23.107
> 
> 标签：c#, web-services, authentication, certificate, http-authentication

这是我第一次必须使用证书身份验证。一个商业伙伴公开了两个服务，一个 XML Web 服务和一个 HTTP 服务。我必须使用 .NET 客户端访问它们。

**我试过的**

**0.设置环境**

我已经使用 certmgr.exe 在我的本地计算机（win 7 专业版）中安装了 SSLCACertificates（在 root 和两个中间）和客户端证书。

**1.对于网络服务**

*   我有客户证书（der）。
*   该服务将通过 .NET 代理使用。

这是代码：

```
OrderWSService proxy = new OrderWSService();
string CertFile = "ClientCert_DER.cer";

proxy.ClientCertificates.Add(new System.Security.Cryptography.X509Certificates.X509Certificate(CertFile));
orderTrackingTO ot = new orderTrackingTO() { order_id = "80", tracking_id = "82", status = stateOrderType.IN_PREPARATION };
resultResponseTO res = proxy.insertOrderTracking(ot); 
```

在最后的声明中报告了异常：`The request failed with an empty response`。

**2.对于HTTP接口**

*   这是我必须通过 POST 方法调用的 HTTPS 接口。
*   HTTPS 请求将使用 HTTPWebRequest 从 .NET 客户端发送。

这是代码：

```
string PostData = "MyPostData";

//setting the request
HttpWebRequest req;
req = (HttpWebRequest)HttpWebRequest.Create(url);
req.UserAgent = "MyUserAgent";
req.Method = "POST";
req.ContentType = "application/x-www-form-urlencoded";
req.ClientCertificates.Add(new System.Security.Cryptography.X509Certificates.X509Certificate(CertFile, "MyPassword")); 

//setting the request content
byte[] byteArray = Encoding.UTF8.GetBytes(PostData);
Stream dataStream = req.GetRequestStream();
dataStream.Write(byteArray, 0, byteArray.Length);
dataStream.Close();

//obtaining the response
WebResponse res = req.GetResponse();
r = new StreamReader(res.GetResponseStream()); 
```

在最后的声明中报告了异常：`The request was aborted: Could not create SSL/TLS secure channel`。

**3\. 最后尝试：使用浏览器**

在 Chrome 中，安装证书后，如果我尝试访问这两个 url，我会收到 107 错误：

```
Error 107 (net::ERR_SSL_PROTOCOL_ERROR) 
```

我被困住了。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-27T11:00:08.940

以下内容应该可以帮助您识别问题，这里有两种测试 SSL 连接性的方法，一种是测试站点，另一种是回调方法，以确定 SSL 失败的原因。如果没有别的，它应该让您更好地了解它失败的原因。

调用该方法时，它会弹出选择证书对话框，显然，当您真正执行此操作时，您将希望自动从证书存储中读取。我之所以把它放进去是因为如果没有找到有效的证书，那么你就会知道你的问题出在证书的安装方式上。

最好的办法是将此代码放在一个简单的控制台应用程序中：

```
using System.Security.Cryptography.X509Certificates;
using System.Net.Security;
using System.Net;

private static void CheckSite(string url, string method)
{
    X509Certificate2 cert = null;
    ServicePointManager.ServerCertificateValidationCallback += ValidateRemoteCertificate;

    X509Store store = new X509Store(StoreLocation.LocalMachine);
    store.Open(OpenFlags.ReadOnly | OpenFlags.OpenExistingOnly);
    X509Certificate2Collection certcollection = (X509Certificate2Collection)store.Certificates;
    // pick a certificate from the store
    cert = X509Certificate2UI.SelectFromCollection(certcollection, 
            "Caption",
            "Message", X509SelectionFlag.SingleSelection)[0];

    store.Close();

    HttpWebRequest ws = (HttpWebRequest)WebRequest.Create(url);
    ws.Credentials = CredentialCache.DefaultCredentials;
    ws.Method = method;
    if (cert != null)
        ws.ClientCertificates.Add(cert);

    using (HttpWebResponse webResponse = (HttpWebResponse)ws.GetResponse())
    {
        using (Stream responseStream = webResponse.GetResponseStream())
        {
            using (StreamReader responseStreamReader = new StreamReader(responseStream, true))
            {
                string response = responseStreamReader.ReadToEnd();
                Console.WriteLine(response);
                responseStreamReader.Close();
            }

            responseStream.Close();
        }
        webResponse.Close();
    }
}

/// <summary>
/// Certificate validation callback.
/// </summary>
private static bool ValidateRemoteCertificate(object sender, X509Certificate cert, X509Chain chain, SslPolicyErrors error)
{
    // If the certificate is a valid, signed certificate, return true.
    if (error == System.Net.Security.SslPolicyErrors.None)
    {
        return true;
    }

    Console.WriteLine("X509Certificate [{0}] Policy Error: '{1}'",
        cert.Subject,
        error.ToString());

    return false;
} 
```

# java - 是否可以为android打开详细的详细错误

> ID：11153882
> 
> 赞同：0
> 
> 时间：2012-06-22T09:47:36.897
> 
> 标签：java, android

是否可以为 android 打开详细的详细错误，以便当应用程序崩溃时，它会为您提供被调用的异常？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T09:54:53.693

看看[ACRA](http://code.google.com/p/acra/)项目。ACRA 是一个用于 Android 的自动崩溃报告库，可让您配置如何提交崩溃报告。默认机制是更新 Google Doc，但您可以通过许多其他方式对其进行配置。

# validation - 播放 2.0 表单日期验证失败

> ID：11153884
> 
> 赞同：1
> 
> 时间：2012-06-22T09:47:41.843
> 
> 标签：validation, date, model, playframework-2.0

我正在使用“Play 2.0”-Framework (v. 2.0.1) 并且在日期值的表单验证方面遇到了一些麻烦。

我的模型代码的和平：

```
@Entity
public class Appointment extends Model {
    public Date start;

    public Date end;
} 
```

我的模板代码和平：

```
<input type="text" id="start" name="start" placeholder="yyyy-mm-dd" />

<!-- ALSO tested with chrome beta v. 20 with html5 support-->
<input type="date" id="end" name="end" placeholder="yyyy-mm-dd" /> 
```

我的控制器：

```
public class Appointment extends Controller {
    static Form<Appointment> appointmentForm = form(Appointment.class);

    //on calling form page
    public static Result create() {
        return ok(create.render("create", appointmentForm));
    }

    //called on saving form data
    public static Result save() {
        Form<Appointment> filledForm = appointmentForm.bindFromRequest();
        if (filledForm.hasErrors()) {
            return badRequest(
                    create.render("create", filledForm)
            );
        } else {
            Appointment.create(filledForm.get());
            return redirect(routes.Appointment.index());
        }
    }
} 
```

如果我通过 jquery ui datepicker 选择一个日期或以“yyyy-mm-dd”之类的格式输入我自己，或者没关系，但必须是正确的格式，我在控制器保存（）方法中遇到验证错误检查“filledForm.hasErrors()”和错误信息“错误的日期格式”。

我以为它会从 play 自动转换，所以我不必自己添加转换。我能做些什么来解决这个问题？它仍然是play 2.0的问题吗？

谢谢你。

干杯，

马可

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T11:35:10.720

我认为您必须定义日期的格式。请参阅[Play Framework 2.0：自定义格式化程序](https://stackoverflow.com/questions/10939741/play-framework-2-0-custom-formatters)的自定义格式化程序。也许需要自定义活页夹，请参阅[https://groups.google.com/d/topic/play-framework/Xi2xAiCnINs/discussion](https://groups.google.com/d/topic/play-framework/Xi2xAiCnINs/discussion) 就像一些提示给你一个方向一样。希望有人能给你一个更好的答案。

# ruby-on-rails - Michael Hartl 的 Ruby on Rails 教程。第 9.1 章中的未通过测试

> ID：11153892
> 
> 赞同：0
> 
> 时间：2012-06-22T09:48:07.910
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1

嗨，我正在学习 Hartl 的 Ruby on Rails 教程，但在第 9.1 章中遇到了一个失败的测试。当我在终端运行规范时，它返回：

```
sis-macbook-pro:sample_app Lagaspi$ bundle exec rspec spec/
...............................F................................

Failures:

1) AuthenticationPages signin with valid information 
 Failure/Error: it { should have_link('Users',       href: users_path) }
   expected link "Users" to return something
 # ./spec/requests/authentication_pages_spec.rb:37:in `block (4 levels) in <top (required)>'

Finished in 1.42 seconds
64 examples, 1 failure

Failed examples:

rspec ./spec/requests/authentication_pages_spec.rb:37 # AuthenticationPages signin with valid information 
```

这是我的代码 - authentication_pages_spec.rb

```
require 'spec_helper'

describe "AuthenticationPages" do

subject { page }

describe "signin page" do
before { visit signin_path }

it { should have_selector('h1',    text: 'Sign in') }
it { should have_selector('title', text: 'Sign in') }
end

describe "signin" do
before { visit signin_path }

 describe "with invalid information" do
  before { click_button "Sign in" }

  it { should have_selector('title', text: 'Sign in') }
  it { should have_selector('div.alert.alert-error', text: 'Invalid') }

  describe "after visiting another page" do
    before { click_link "Home" }
    it { should_not have_selector('div.alert.alert-error') }
  end
 end

 describe "with valid information" do
  let(:user) { FactoryGirl.create(:user) }
  before { sign_in user }

  it { should have_selector('title', text: user.name) }
  it { should have_link('Profile',     href: user_path(user)) }
  it { should have_link('Sign out',    href: signout_path) }
  it { should have_link('Settings',    href: edit_user_path(user)) }
  it { should have_link('Users',       href: users_path) }
  it { should_not have_link('Sign in', href: signin_path) }

  describe "followed by signout" do
    before { click_link "Sign out" }
    it { should have_link('Sign in') }
  end
end
end
end 
```

我认为这是问题所在（37）：

```
it { should have_link('Users',       href: users_path) } 
```

但是我该怎么办？我是新手，无法弄清楚。谢谢思。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T10:19:08.043

如果您按照本教程进行操作，则该链接仅在用户登录时才可见。当用户登录时，您没有逃避任何其他测试失败，即

```
it { should have_link('Profile',     href: user_path(user)) }
it { should have_link('Sign out',    href: signout_path) }
it { should have_link('Settings',    href: edit_user_path(user)) } 
```

因此，考虑到这一点，我倾向于认为问题在于观点，而不是规范。乍一看，规范看起来不错。

您的 _header.html.erb 是否包含此

```
...
<% if signed_in? %>
  <li><%= link_to "Users", users_path %></li>
... 
```

# c#-4.0 - 如何在将大量数据添加到 Dictionary 时提高性能？

> ID：11153903
> 
> 赞同：1
> 
> 时间：2012-06-22T09:49:02.963
> 
> 标签：c#-4.0

如何在 C# 中将 1000000 个值添加到 Dictionary 中时提高内存使用率和性能。

在添加大量记录时，我收到“系统内存不足”异常。

任何人都可以帮助解决这个问题。

我的字典将如下所示。

```
 Dictionary<string, List<string>> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T09:52:51.123

你在字典中编码什么？你如何添加它？也许 Linq 扩展[ToLookup](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.tolookup.aspx)可能更适合这里。[ILookup](http://msdn.microsoft.com/en-us/library/bb534291.aspx)提供或多或少与创建`IDictionary<TKey,IList<TValues>>`

否则...在设置字典的大小时要明确：

```
new Dictionary<string,List<string>>(int capacity) 
```

以及您存储在其中的 List 实例

```
new List<string>(int capacity) 
```

这会阻止不断增长的算法（达到时容量翻倍）被部署并破坏内存。

# jquery - 将可选择的 ui 应用于加载的数据

> ID：11153907
> 
> 赞同：0
> 
> 时间：2012-06-22T09:49:17.210
> 
> 标签：jquery, jquery-ui

我正在使用加载函数来加载数据。我如何将其`UI selectable`应用于加载的数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T10:10:19.753

您需要调用`.selectable()`您的`load()`回调函数：

```
$("div").load("url_here", function(){
   $(this).find("ul").selectable();
}); 
```

显然将`div`,`url_here`和更改`ul`为适合您的代码的变量。

# javascript - 什么是分析变量名称？

> ID：11153909
> 
> 赞同：2
> 
> 时间：2012-06-22T09:49:23.497
> 
> 标签：javascript, google-analytics, bookmarklet

我在 Google Analytics 调用中设置了自定义变量，它们工作正常。

我想让用户更容易看到页面上设置了哪些自定义变量，这样他们就不必查看源代码。他们将使用设置的值来过滤 Google Analytics（分析）中的自定义报告。

所以想法是写一个小书签来显示值集。

**我的问题是我找不到存储值的变量的名称。**

这不是自定义变量名称本身。

我查看了 Analytics API，在 Chrome 中使用了 gatest.js 并检查了跟踪 GIF。

我想在警报中显示的是来自以下的数据：

```
Custom Var 5: label:'MenuIDs' value:'xxx' scope:'Page' 
```

我假设它是这样的：

```
utme or _utme 
```

为这么简单的问题道歉。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T22:54:12.857

Using the google analytics debugger shows that the utme parameter in the gif contains custom variable labels in some kind of encoded format.

In my site it shows:

utme=8(2![CVlabel1]*[CVlabel2]*[CVlabel3])9(2![CVvalue1]*[CVvalue2]*[CVvalue3])11(4!1)

where [CVlabelX] and [CVvalueX] is where my CV data appeared.

Hope that helps

# php - 子文件夹中的 codeigniter 控制器

> ID：11153910
> 
> 赞同：1
> 
> 时间：2012-06-22T09:49:23.930
> 
> 标签：php, codeigniter, routes, controllers

我正在设计一个系统，其中 uri 的外观如下

```
my-app.com/client-name/admin/foo
my-app.com/client-name/admin/bar 
```

其中客户端名称是可变的。显然我想把管理控制器放在一个子文件夹中以保持我的理智。所以我的文件夹可以如下所示......

```
/application/controllers/admin/foo.php
/application/controllers/admin/bar.php 
```

问题：

来自文档：“将控制器组织到子文件夹中使用此功能时，URI 的第一段必须指定文件夹。”

有没有办法解决这个问题？

我可以创建一个管理控制器吗

```
/application/controllers/admin.php 
```

并使用 _remap 函数从子文件夹手动加载控制器？

更新：

我的路线看起来像这样

```
// Admin Root
$route['(:any)/admin'] = "admin/welcome"; 
```

然后在加载任何控制器之前，我验证第一个 URI 段以确保客户端存在。

所有客户端都使用相同的控制器和路由。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T09:57:31.933

您可以尝试扩展您的路由方法。喜欢：

```
<?php

/*
 * Custom router function v 0.1
 *
 * Add functionality : read into more than one sub-folder
 *
 */

Class MY_Router extends CI_Router
{
    Function MY_Router()
    {
        parent::CI_Router();
    }

    function _validate_request($segments)
    {
        if (file_exists(APPPATH.'controllers/'.$segments[0].EXT))
        {
            return $segments;
        }

        if (is_dir(APPPATH.'controllers/'.$segments[0]))
        {
            $this->set_directory($segments[0]);
            $segments = array_slice($segments, 1);

            /* ----------- ADDED CODE ------------ */

            while(count($segments) > 0 && is_dir(APPPATH.'controllers/'.$this->directory.$segments[0]))
            {
                // Set the directory and remove it from the segment array
            $this->set_directory($this->directory . $segments[0]);
            $segments = array_slice($segments, 1);
            }

            /* ----------- END ------------ */

            if (count($segments) > 0)
            {
                if ( ! file_exists(APPPATH.'controllers/'.$this->fetch_directory().$segments[0].EXT))
                {
                    show_404($this->fetch_directory().$segments[0]);
                }
            }
            else
            {
                $this->set_class($this->default_controller);
                $this->set_method('index');

                if ( ! file_exists(APPPATH.'controllers/'.$this->fetch_directory().$this->default_controller.EXT))
                {
                    $this->directory = '';
                    return array();
                }

            }

            return $segments;
        }

        show_404($segments[0]);
    }
}

?> 
```

尽管这种方法可能不适用于所有人，并且从长远来看可能会导致更多问题，但如果您想将自己的控制器分开，无论出于何种原因，这是可能的。但是需要一些相当多的调整才能开始工作。注意：您可能希望通过全新安装来执行此操作，并确定这是您想要处理的方式。

我不相信上面的代码，原始参考可以在这里找到。 [http://glennpratama.wordpress.com/2009/10/20/multi-level-subfolder-for-controller-in-codeigniter/](http://glennpratama.wordpress.com/2009/10/20/multi-level-subfolder-for-controller-in-codeigniter/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T11:02:56.200

事实证明，如果您手动设置路线，这将有效。

惊人的！

# c# - 数据库未使用 Attach 方法更新

> ID：11153915
> 
> 赞同：1
> 
> 时间：2012-06-22T09:49:42.900
> 
> 标签：c#, .net, sql-server, linq, linq-to-sql

我正在尝试学习 LINQ to SQL。我已经成功实现了插入方法，并且数据正在插入数据库中。当我尝试更新现有数据时，即使没有异常，它也不会反映在数据库中。你能说明一下可能出了什么问题吗？

注意：AccountNumber 是主键

**编辑**

以下代码行使其工作。但是，你能解释一下**为什么我们需要刷新**吗？

```
 accountRepository.UpdateChangesByAttach(acc1);
    accountRepository.RefreshEntity(acc1);
    accountRepository.SubmitChanges(); 
```

笔记：

```
DataContext.Refresh method refreshes object state by using data in the database. 
```

刷新是使用 KeepCurrentValues 选项完成的。我的理解是它将保留我在实体对象中更新的值。我提供（仅）需要在数据库中更新的所需信息。是否需要刷新才能**获取剩余的列值？**

客户

```
using (var context = new   RepositoryLayer.LibraryManagementClassesDataContext(connectionstring)) 
   {
            context.Log = Console.Out;

            RepositoryLayer.Repository<RepositoryLayer.Account> selectedRepository = new RepositoryLayer.Repository<RepositoryLayer.Account>();
            //selectedRepository.Context = context;
            AccountBusiness accountBl = new AccountBusiness(selectedRepository);

            //Transaction 1
            //List<RepositoryLayer.Account> accountList = accountBl.GetAllAccounts();

            //Transaction 2
            //accountBl.InsertAccounts();

            //Transaction3
            accountBl.UpdateAccounts();

   } 
```

业务层

```
 public void  InsertAccounts()
    {
        RepositoryLayer.Account acc1 = new RepositoryLayer.Account();
        acc1.AccountNumber = 4;
        acc1.AccountType = "Contract";
        acc1.Duration = 6;

        accountRepository.InsertOnSubmit(acc1);
        accountRepository.SubmitChanges();

    }

    public void UpdateAccounts()
    {
        RepositoryLayer.Account acc1 = new RepositoryLayer.Account();
        acc1.AccountNumber = 4;
        acc1.AccountType = "TEST";
        acc1.Duration = 10;

        accountRepository.UpdateChangesByAttach(acc1);
        accountRepository.SubmitChanges();

    } 
```

存储库

```
public class Repository<T> : IRepository<T> where T : class
{
    public System.Data.Linq.DataContext Context
    {
        get;
        set;
    }

    public virtual System.Data.Linq.ITable GetTable()
    {
        return Context.GetTable<T>();
    }

    public virtual void InsertOnSubmit(T entity)
    {
        GetTable().InsertOnSubmit(entity);
    }

    public virtual void UpdateChangesByAttach(T entity)
    {
        GetTable().Attach(entity);
    }

    public virtual void SubmitChanges()
    {
        Context.SubmitChanges();
    }

    public virtual void RefreshEntity(T entity)
    {
        Context.Refresh(System.Data.Linq.RefreshMode.KeepCurrentValues, entity);
    }

} 
```

阅读

1.  [LINQ to SQL：在“UpdateCheck = Never”时更新而不刷新</a>](https://stackoverflow.com/questions/11189688/linq-to-sql-updating-without-refresh-when-updatecheck-never)

[](https://stackoverflow.com/questions/11189688/linq-to-sql-updating-without-refresh-when-updatecheck-never)
3.  [Linq To SQL 附加/刷新实体对象](https://stackoverflow.com/questions/898267/linq-to-sql-attach-refresh-entity-object?rq=1)

4.  [LINQ-to-SQL Table<T>.Attach 有什么作用？](https://stackoverflow.com/questions/5244096/what-does-linq-to-sql-tablet-attach-do)

5.  [为什么我应该在我的 LINQ To SQL 存储库保存方法中使用 GetOriginalEntityState()？](https://stackoverflow.com/questions/3472408/why-should-i-use-getoriginalentitystate-in-my-linq-to-sql-repository-save-meth)

6.  [如何拒绝 Linq 中对 SQL 的 DataContext 的所有更改？](https://stackoverflow.com/questions/259219/how-can-i-reject-all-changes-in-a-linq-to-sqls-datacontext)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T06:26:56.407

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T12:59:17.833

我使它按如下方式工作。但我仍然想知道为什么我们需要刷新才能使其正常工作。你能解释一下吗？

在存储库中添加了功能

```
 public virtual void RefreshEntity(T entity)
    {
        Context.Refresh(System.Data.Linq.RefreshMode.KeepCurrentValues, entity);
    } 
```

呼叫更改为

```
 public void UpdateAccounts()
    {
        RepositoryLayer.Account acc1 = new RepositoryLayer.Account();
        acc1.AccountNumber = 4;
        acc1.AccountType = "TEST";
        acc1.Duration = 10;

        accountRepository.UpdateChangesByAttach(acc1);
        accountRepository.RefreshEntity(acc1);
        accountRepository.SubmitChanges();

    } 
```

# vaadin - vaadin：如何在 attachfield 方法中启用字段？

> ID：11153918
> 
> 赞同：0
> 
> 时间：2012-06-22T09:50:20.610
> 
> 标签：vaadin, valuechangelistener

我有一个 Vaadin 表单，我重写了 attachField 方法。现在假设我有一个复选框、一个文本字段和另一个文本字段，我只希望在复选框为真时启用文本字段。

我将 2 个文本字段存储在 Group 类中：

```
package be.certipost.as2.gui.components.detail.custom; 
```

导入 java.util.HashMap；导入 java.util.Map；

导入 com.vaadin.ui.Field；

公共类组{

```
private String id;
private Map<String, Field> fields;

public Group(String groupsId){
    this.id=groupsId;
    fields = new HashMap<String,Field>();
}

public Field findFieldById(String fieldId){
    System.out.println(fields.size());
    for( Map.Entry<String, Field> f: fields.entrySet()){
        if(f.getKey().equals(fieldId)){
            return f.getValue();
        }

    }

    return null;
}

public void setEnabled(Boolean enabled){
    for( Map.Entry<String, Field> f: fields.entrySet()){
        f.getValue().setEnabled(enabled);
    }
}

public String getId() {
    return id;
}

public void setId(String id) {
    this.id = id;
}

public void addField(String fieldId, Field field) {
    fields.put(fieldId,field);
    System.out.println(fields.size());

} 
```

}

现在在表格中我有一个列表组..

对于复选框，我说当它被点击时，它将检查正确组的组列表，并在该组中找到正确的字段。然后我将此字段设置为启用/禁用...在编译级别这有效，但是当我单击复选框时，我得到该字段的空指针异常。所以我的组在我单击复选框时的字段为零

我应该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T08:40:14.217

我认为您必须将复选框字段设置为立即

```
final Form form = new Form();
form.addItemProperty("checkbox", new ObjectProperty<Boolean>(Boolean.FALSE));
form.addItemProperty("txt1", new ObjectProperty<String>(""));
form.addItemProperty("txt2", new ObjectProperty<String>(""));
form.getField("txt1").setEnabled(Boolean.FALSE);
AbstractField field = (AbstractField) form.getField("checkbox");
field.setImmediate(true);
field.addListener(new ValueChangeListener() {
    @Override
    public void valueChange(ValueChangeEvent event) {
        form.getField("txt1").setEnabled((Boolean) event.getProperty().getValue());
    }
}); 
```

# android - 哪个数据库与 android 应用程序一起使用

> ID：11153924
> 
> 赞同：2
> 
> 时间：2012-06-22T09:50:56.720
> 
> 标签：android, database

我正在使用 eclipse 开发一个 android 移动应用程序。我需要一个驻留在台式计算机上的数据库。我需要在数据库和移动应用程序之间保存和检索信息。我将存储详细信息，例如登录详细信息、注册和用户位置。SQLite 不适用于此，因为创建的数据库只能由其自身访问。我可以为此使用 SQL Server 吗？我是 android 新手，我不确定要使用什么数据库以及如何在数据库和移动应用程序之间保存和检索信息。请帮忙。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-22T09:55:22.417

使用 SQL Server 管理桌面上的数据并在 Visual Studio 上的 .Net 中创建 Web 服务。

然后连接到应用程序中的 Web 服务并从数据库中设置/获取数据。

关于如何在 .NET 中创建 Web 服务的链接（不包括 Android 中的实现）：[http ://srikanthtechnologies.com/blog/dotnet/wsdaljava.aspx](http://srikanthtechnologies.com/blog/dotnet/wsdaljava.aspx)

关于如何将您的服务与 Android 连接的链接：http: [//seesharpgears.blogspot.in/2010/11/basic-ksoap-android-tutorial.html](http://seesharpgears.blogspot.in/2010/11/basic-ksoap-android-tutorial.html)

[http://www.codeproject.com/Articles/304302/Calling-Asp-Net-Webservice-ASMX-From-an-Android-Ap](http://www.codeproject.com/Articles/304302/Calling-Asp-Net-Webservice-ASMX-From-an-Android-Ap)

[http://adrianandroid.blogspot.in/2012/05/access-c-net-web-service-in.html](http://adrianandroid.blogspot.in/2012/05/access-c-net-web-service-in.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T09:54:30.587

如果您使用 Windows，最好的选择是[WAMP](http://www.wampserver.com/en/)服务器。它带有 phpmyadmin（尽管您确实需要进行一些调整才能使其正常运行）。然后很容易使用数据库（mysql），因为你有一个带有 phpmyadmin 的图形界面。当然，如果您需要从您的应用程序中访问它，您必须提供一个中间 php 脚本才能使其正常工作

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T09:58:22.960

Ypu 可以将 SQL Server 与您的移动应用程序一起使用，但您仍然必须使用一个 Web 服务将其与**SQL Server DB**连接，或者您也可以将**WAMP Server**与**MySql DB**一起使用，这将很容易实现。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-15T16:43:25.050

我强烈推荐使用 Sybase SQL Anywhere。他们的 UltraLite DB 可以在 Android 和 Windows 上运行。它有一个 MobilLink 服务器，允许在 PC 和 Android 设备之间进行双向数据传输。您可以从 www.sybase.com 免费获得 Developer Edition。当前安装还包括一个完整的 Android 示例应用程序，其中包括 PC 和 Android 设备之间的数据同步。

毕竟，Sybase 最初是为 Microsoft 编写 SQL Server - 请参阅：[http ://en.wikipedia.org/wiki/Microsoft_SQL_Server](http://en.wikipedia.org/wiki/Microsoft_SQL_Server)

标记

# clojure - defpartial 返回对象而不是 HTML 字符串

> ID：11153925
> 
> 赞同：1
> 
> 时间：2012-06-22T09:50:58.803
> 
> 标签：clojure, clojurescript

我正在使用 Chris Ganger 的 crate 库在客户端生成 html。

```
(defpartial html [] form)

(def form 
  [:div.form-horizontal
   [:fieldset
    [:legend "Student Registeration"]
    [:div.control-group
     [:label.control-label "Hello World"]]]) 
```

当我在 clojurescript repl 中执行上述函数时，`(html)`我得到`#<[object HTMLDivElement]>.`

但是，当我将其执行为 时`(.log js/console (html))`，正确生成的 html 会登录到浏览器的控制台中。

如何让它返回 HTML 字符串而不是对象？

谢谢，穆尔塔萨

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T11:40:51.550

该对象是 DIV 元素的 Dom Element 对象。您可以使用此 DOM 元素的“outerHTML”属性来获取其字符串表示形式。

# php - 将数据从 $_POST 传递到 jQuery

> ID：11153927
> 
> 赞同：0
> 
> 时间：2012-06-22T09:51:07.207
> 
> 标签：php, jquery, ajax, post

我想在 return.php 页面发送输入数据（code_bar），在 MySQL 选择回调 3 数据（prezzo;prodotto;descrizione）之后，它不起作用。我在这里发布带有 JavaScript 和 PHP 文件的 html 文件，该文件将数据从 select 调用到我的数据库。

**HTML**

```
<form action="" method="post" name="">
Codice a Barre <p>
<input id="code_bar" name"code_bar" />
<button onclick="button">Chiama</button><p>
Prodotto<p>
<input id="Prodotto" name="Prodotto" /><p>
Prezzo<p>
<input id="Prezzo" name="Prezzo"  /><p>
Descrizione <p>
<input id="Descrizione" name="Descrizione"  / 
```

**脚本**

```
<script type="text/javascript">
function invia(){
    var code_bar = $("input#code_bar").val();
     $.ajax({
      url:"return.php", 
      data: {code_bar: 'code_bar'},
      success:function(data) {
            $("#Prezzo").val(data.Prezzo);
            $("#Prodotto").val(data.Prodotto);
            $("#Descrizione").val(data.Descrizione);

       "json"}
     });
}
</script> 
```

**返回.php**

```
<?php
 if(isset($_POST['code_bar'])){
      $code_bar = $_POST['code_bar'];
   }
mysql_select_db($database_mydb, $mydb);
$query_estraggo = "SELECT * FROM prodotti WHERE code_bar = '$code_bar'";
$estraggo = mysql_query($query_estraggo, $mydb) or die(mysql_error());
$row_estraggo = mysql_fetch_assoc($estraggo);
$totalRows_estraggo = mysql_num_rows($estraggo);

      if ($row_estraggo = mysql_fetch_assoc($estraggo)){
          $ritorno = '{"Prezzo":'.$row_estraggo['Prezzo'].',"Prodotto":'.$row_estraggo['Prodotto'].',"Descrizione":'.$row_estraggo['Descrizione'].'}';

         $json = $JSON->encode($ritorno);
         echo $json;
         exit($ritorno);

      }
mysql_free_result($estraggo);
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T09:52:39.950

您传入的`GET`是字符串而不是实际值

```
data: {code_bar: 'code_bar'}, 
```

改写

```
data: {code_bar: code_bar}, 
```

无论如何，您至少应该能够理解您的调用失败的地方（在您的 ajax 调用或服务器端脚本中）：例如 Firebug 有一个`xhr`面板，您可以在其中清楚地看到数据是如何传递的

作为旁注，在你的`php`你应该避免所有`mysql_*`有利于`PDO`陈述的功能

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T09:53:44.243

请求的默认类型`$.ajax`是`GET`，您需要将其设置为`POST`，或者`$.post`改为使用。（你`$.ajax`有语法错误）。

并且`data: {code_bar: 'code_bar'},`会导致`code_bar`永远是字符串`code_bar`，应该是`data: {code_bar: code_bar},`。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-22T09:52:24.710

```
 You should also define type of input
        <input id="code_bar" name"code_bar" type="text"/>
    In $.ajax default type is get if you send data with post method then add type:"post" in $.ajax method

    $.ajax({
          url:"return.php", 
          type:"post",
          data: {code_bar: code_bar},
          dataType:"json",
          success:function(data) {
                $("#Prezzo").val(data.Prezzo);
                $("#Prodotto").val(data.Prodotto);
                $("#Descrizione").val(data.Descrizione);

           }
         }); 
```

# c++ - 如何在 Qt 中更改 QCheckBox 文本标签颜色？

> ID：11153945
> 
> 赞同：6
> 
> 时间：2012-06-22T09:52:27.827
> 
> 标签：c++, qt, checkbox, qcheckbox

我无法更改**QT**`Qcheckbox`中的颜色，有人可以帮助我使用代码更改复选框文本标签的颜色。我试过了..我使用**的是QT4.7.4**版本..**`Qpalette`**

 ***** * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-22T11:17:31.143

您可以使用[样式表](http://qt-project.org/doc/qt-4.8/qwidget.html#styleSheet-prop)。

例如：

```
checkBox->setStyleSheet("QCheckBox { color: red }"); 
```

有关更多详细信息，请查看[Qt 参考](http://doc.qt.nokia.com/4.7/stylesheet-reference.html)中的样式表和[样式表文档](http://doc.qt.nokia.com/4.7/stylesheet.html)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-22T16:41:22.977

这对我有用：

```
QPalette p = myCheckBox->palette();
p.setColor(QPalette::Active, QPalette::WindowText, green);
myCheckBox->setPalette(p); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-02-18T16:34:20.200

我使用各种版本的 Qt5（5.2、5.4）遇到了这个问题。要使用样式表，我必须使用 Pseudo-States 属性：[http ://doc.qt.io/qt-4.8/stylesheet-reference.html#list-of-pseudo-states](http://doc.qt.io/qt-4.8/stylesheet-reference.html#list-of-pseudo-states)

例子：

```
myCheckbox->setStyleSheet("QCheckBox:unchecked{ color: red; }QCheckBox:checked{ color: red; }"); 
```

设置这两种状态改变了我的颜色。样式表和调色板系统中似乎有一些像这样的奇怪之处，所以请留意它们并尝试一些不同的东西（即选择器、伪状态等）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-05-23T14:41:34.053

看起来对于某些小部件，您必须强制使用非系统“小部件引擎”。对于复选框，可以通过将边框设置为无来完成。所以复选框的样式看起来像：

```
QCheckBox {
   border: none;
   color: white;
} 
```

其他小部件也需要类似的行为。某些样式属性不会禁用原生外观。例如 QPushButton ( [http://doc.qt.io/qt-4.8/stylesheet-reference.html](http://doc.qt.io/qt-4.8/stylesheet-reference.html) )****

# python - Python cypher：如何构建更复杂的移位器系统？

> ID：11153955
> 
> 赞同：1
> 
> 时间：2012-06-22T09:53:02.293
> 
> 标签：python, encryption

我想用python构建一个密码，它通过从左到右然后从右到左反复遍历移位器的数字来解码文本，并将字母表中的字母移动相应的数字。

例子：

*   变速杆：123
*   文本：`i like python`
*   过程：i+1=j，空间，l+2=n，i+3=l，k+3=n，e+2=g，空间，p+1=q，y+1=z，t+ 2=v, h+3=j, o+3=q, n+2=p
*   结果：`j nlng qzvjqp`

到目前为止的代码：

```
import string

numbers = ""

x = 3

while x < 10000:
    numbers = numbers + str(x)
    x += 1

shift = 221

#string.ascii_lowercase
letters = string.ascii_letters + string.punctuation + numbers
text = (raw_input("Please enter text"))

encoded = ''
for letter in text:
    if letter == ' ':
        encoded = encoded + ' '
    else:
        x = letters.index(letter) + shift
        encoded = encoded + letters[x]

print encoded 
```

它使用迄今为止的基本编码方法。我很想知道如何在代码中实现上述编码系统。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T10:15:01.083

这是您的版本优化（和工作）：

```
import string

shift = 221

letters = string.ascii_letters + string.punctuation + string.digits
text = raw_input("Please enter text\n")

e = ''.join(letters[letters.index(l) + shift % len(letters)]
            if letters.index(l) is not None else ' ' for l in text)
print e 
```

**编辑**带有数字的部分确实是错误的，因为它在您的编码序列中添加了重复的字母。这意味着编码的文本不能被唯一地解码。

**Edit2**：如果你想要安全的加密/解密，你需要像 AES 这样的现代算法。如果您希望它自己实现或理解代码，RC4 是一个简单的（但如果使用正确仍然是安全的）替代方案。

**Edit3**：这是优化版本的 Vigenere：

```
from itertools import cycle, izip
from operator import add, sub
from string import printable as alphabet

def vigenere(text, key, mode='encode'):
    alen = len(alphabet)
    key = cycle(key + key[-2:0:-1])
    op = add if mode == 'encode' else sub
    return ''.join(alphabet[op(alphabet.index(c),
                               alphabet.index(k)) % alen]
                   for c, k in izip(text, key))

c = vigenere('attack at dawn', 'secret', mode='encode')
print c  # CHFBqN8BF8FoIO
print vigenere(c, 'secret', mode='decode') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T10:26:11.823

只是为了好玩，这里有一个（故意冗长的）[vigenere](http://en.wikipedia.org/wiki/Vigen%C3%A8re_cipher)实现，带有一个“摆”键：

```
def pendulum(s):
    """Given abcd yields abcdcbabcdc... """
    while True:
        for p in s: yield p
        for p in reversed(s[1:-1]): yield p

def vigenere(text, key, mode='encode'):
    alphabet = 'abcdefghijklmnopqrstuvwxyz '
    key = pendulum(key)
    encoded = ''

    for char in text:
        index = alphabet.index(char)
        offset = alphabet.index(next(key))

        if mode == 'encode':
            shifted = index + offset
        else:
            shifted = index - offset

        encoded += alphabet[shifted % len(alphabet)]
    return encoded

# test

print vigenere('attack at dawn', 'secret', mode='encode') # sxvrgcdrvdveyd
print vigenere('sxvrgcdrvdveyd', 'secret', mode='decode') 
```

如果您有任何问题，请告诉我们。

# logging - 如何启用命名/绑定/DNS 完整日志记录？

> ID：11153958
> 
> 赞同：44
> 
> 时间：2012-06-22T09:53:12.267
> 
> 标签：logging, dns, bind, named

我试图在 named.conf 中找到完美的日志记录子句，这将帮助我为命名服务启用完整级别的日志。有人可以在这里举个例子吗？下面给出了我当前的子句，但这会生成非常少的日志。

```
 logging {
     channel querylog{
             file "/var/log/querylog";
             severity debug 10;
             print-category yes;
             print-time yes;
             print-severity yes;
             };
     category queries { querylog;};
 }; 
```

* * *

## 回答 #1

> 赞同：89
> 
> 时间：2012-08-24T17:34:28.247

我通常将每个日志扩展到它自己的通道，然后扩展到一个单独的日志文件，当您尝试调试特定问题时，这肯定会使事情变得更容易。所以我的日志记录部分如下所示：

```
logging {
    channel default_file {
        file "/var/log/named/default.log" versions 3 size 5m;
        severity dynamic;
        print-time yes;
    };
    channel general_file {
        file "/var/log/named/general.log" versions 3 size 5m;
        severity dynamic;
        print-time yes;
    };
    channel database_file {
        file "/var/log/named/database.log" versions 3 size 5m;
        severity dynamic;
        print-time yes;
    };
    channel security_file {
        file "/var/log/named/security.log" versions 3 size 5m;
        severity dynamic;
        print-time yes;
    };
    channel config_file {
        file "/var/log/named/config.log" versions 3 size 5m;
        severity dynamic;
        print-time yes;
    };
    channel resolver_file {
        file "/var/log/named/resolver.log" versions 3 size 5m;
        severity dynamic;
        print-time yes;
    };
    channel xfer-in_file {
        file "/var/log/named/xfer-in.log" versions 3 size 5m;
        severity dynamic;
        print-time yes;
    };
    channel xfer-out_file {
        file "/var/log/named/xfer-out.log" versions 3 size 5m;
        severity dynamic;
        print-time yes;
    };
    channel notify_file {
        file "/var/log/named/notify.log" versions 3 size 5m;
        severity dynamic;
        print-time yes;
    };
    channel client_file {
        file "/var/log/named/client.log" versions 3 size 5m;
        severity dynamic;
        print-time yes;
    };
    channel unmatched_file {
        file "/var/log/named/unmatched.log" versions 3 size 5m;
        severity dynamic;
        print-time yes;
    };
    channel queries_file {
        file "/var/log/named/queries.log" versions 3 size 5m;
        severity dynamic;
        print-time yes;
    };
    channel network_file {
        file "/var/log/named/network.log" versions 3 size 5m;
        severity dynamic;
        print-time yes;
    };
    channel update_file {
        file "/var/log/named/update.log" versions 3 size 5m;
        severity dynamic;
        print-time yes;
    };
    channel dispatch_file {
        file "/var/log/named/dispatch.log" versions 3 size 5m;
        severity dynamic;
        print-time yes;
    };
    channel dnssec_file {
        file "/var/log/named/dnssec.log" versions 3 size 5m;
        severity dynamic;
        print-time yes;
    };
    channel lame-servers_file {
        file "/var/log/named/lame-servers.log" versions 3 size 5m;
        severity dynamic;
        print-time yes;
    };

    category default { default_file; };
    category general { general_file; };
    category database { database_file; };
    category security { security_file; };
    category config { config_file; };
    category resolver { resolver_file; };
    category xfer-in { xfer-in_file; };
    category xfer-out { xfer-out_file; };
    category notify { notify_file; };
    category client { client_file; };
    category unmatched { unmatched_file; };
    category queries { queries_file; };
    category network { network_file; };
    category update { update_file; };
    category dispatch { dispatch_file; };
    category dnssec { dnssec_file; };
    category lame-servers { lame-servers_file; };
}; 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-06-23T00:54:54.877

运行命令`rndc querylog on`或添加`querylog yes;`到`options{};`部分`named.conf`以激活该通道。

如果您的绑定是 chrooted，还要确保检查正确的目录。

# drupal-6 - 如何在视图中添加总和字段？

> ID：11153962
> 
> 赞同：0
> 
> 时间：2012-06-22T09:53:31.553
> 
> 标签：drupal-6, views, drupal-views

我使用 Drupal 6.26。我为具有价格字段的自定义内容类型创建了一个视图。我想在视图末尾添加一个总和行（表格样式）以显示总价。我该怎么做？你能帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T11:22:42.310

查看[Views Calc](http://drupal.org/project/views_calc/)模块。它完全符合您的要求。

您需要安装它，并将视图的“样式”设置更改为“视图计算表”。然后在样式的选项中，您将看到“列计算”，您可以在其中为相应的字段选择“显示计算”和“SUM”。

确保价格字段的字段设置输出正常的纯文本/数字字符串（而不是某种链接或其他东西），以便 Views Calc 使用数据进行计算不会有问题。

# python - 是双重的实例

> ID：11153970
> 
> 赞同：-3
> 
> 时间：2012-06-22T09:54:07.703
> 
> 标签：python, floating-point, isinstance

这可能是一个愚蠢的问题，但我在某处读到 Python 中的浮点数等于 C++ 中的双精度数。因此，如果我想检查变量是否为双精度变量，我应该使用以下内容：

```
isinstance(v, float) 
```

或者这个：

```
isinstance(v, double) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-22T10:03:15.567

您无法在 Python 中检查 C/C++ 类型。如果你想知道一个值是否是一个浮点数，那么`isinstance(v, float)`就为你做。如果返回 true，您将得到一个对应于 C（在 CPython 中）的浮点值`double`，这在典型平台上意味着 64 位 IEEE 浮点数。FP 格式的详细信息可作为[`sys.float_info`](http://docs.python.org/library/sys.html#sys.float_info).

如果出于某种原因你想要更小的浮点数，那么安装[Numpy](http://numpy.scipy.org/)并使用它的`np.float32`or`np.float16`类型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T10:01:53.940

对不起，python中没有`Double`，python只有`floats`和`int`。

在 python 2.x 中我们也有`long int`，但在 3.x 中没有。（不要将 long int 与 C 的 long 混淆）

# domain-driven-design - CQRS - 是否“允许”从域和/或读取站点发布命令？

> ID：11153971
> 
> 赞同：3
> 
> 时间：2012-06-22T09:54:08.937
> 
> 标签：domain-driven-design, cqrs

我试图掌握更多的 cqrs 概念。命令仅从客户端发送还是从域和/或投影事件侦听器发送命令很常见？

假设我想根据某个事件启动另一个业务流程。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-22T09:55:53.457

在许多情况下，由于域内的另一个事件而发送命令是绝对有意义的。例如，Saga（作为长期运行流程的协调者/协调者）将订阅事件并提交新命令。

此外，系统事件，如超时或异常或其他一些情况可能会产生新命令。

在我看来，如果只允许“客户端”提交命令，CQRS 将根本不起作用。

# c++ - 如何在 C++ 中获取字符串中的输入？

> ID：11153974
> 
> 赞同：1
> 
> 时间：2012-06-22T09:54:23.027
> 
> 标签：c++

我写了以下功能

```
 void validateUser(void)
 {
         string uName;
         string uPassword;
         char c;

         map <char*, char*> authMap;
         authMap["balaji"] = "balaji";
         authMap["rohan"] = "rohan";

         cout << "Please Enter your user name :";
         cin >> uName;
         cout << "Please Enter your password :";
        // initTermios(0);
         while((c = getchar()) != '\n')
         {
           uPassword.push_back(c);
         }
         cout << "YOU Entered :: "<<  uPassword <<std::endl;
} 
```

当我执行上述函数时，我发现输入用户名后我按下回车键然后控制不会进入while循环，即使我没有输入任何密码字符串。上面的蚂蚁解决方案？预先感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T10:00:56.233

作为输入用户名的结果输入的换行符仍在标准输入中，接下来读取的是这个，因此循环终止条件立即为假。您需要跳过换行符，这可以通过以下方式实现[`ignore()`](http://en.cppreference.com/w/cpp/io/basic_istream/ignore)：

```
cin.ignore(); 
```

建议不要混合使用 C 和 C++ IO 函数（我不确定它如何交互的确切规则，但我更愿意避免它）：

```
while (cin.get(c) && '\n' != c)
{
    uPassword.push_back(c);
} 
```

或者只是使用[`std::getline()`](http://en.cppreference.com/w/cpp/string/basic_string/getline)：

```
getline(cin, uPassword); 
```

正如我在评论中提到的，地图将由字符串文字的地址而不是字符串内容作为键控。建议`map<std::string, std::string>`改用。

# google-app-engine - 谷歌云sql：每个实例的应用数量是多少？

> ID：11153978
> 
> 赞同：4
> 
> 时间：2012-06-22T09:54:34.730
> 
> 标签：google-app-engine, cloud, google-cloud-sql

我正在使用 D1 大小的谷歌云 sql 实例并启用计费。直到几天前，我只能使用该实例创建 3 个授权应用程序。当我尝试创建三个以上时，它会显示“您已达到授权应用程序的最大数量”。但现在我可以创建超过 5 个应用程序。那么可以连接到单个实例的授权应用程序的实际数量是多少。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T18:11:12.460

不再有限制。听起来控制台中仍然存在一些限制。我们会解决的。

# sql - 减去表中同一列的两条记录

> ID：11153980
> 
> 赞同：2
> 
> 时间：2012-06-22T09:54:39.490
> 
> 标签：sql, postgresql, window-functions

我正在使用 PostgreSQL，我想减去同一个表的两条记录并在同一个查询中使用结果。

这是表格：

### 分数

6
8
9

* * *

### 结果

6
2
1

我想做的事：

```
Result = Score(i) - Score(i-1) 
```

最后，我想要这些结果的总和。`sum(result)`在我的示例中必须为 9。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T13:06:28.847

您需要一些方法来确定`score`. 关系数据库中的表中没有“自然顺序”。所以我假设你有一个`id`（或时间戳或其他东西）来订购你的记录。还是`i`保证在每个新行中都更大？然后你就可以订购了`i`。

查询本身很简单 - 一旦您了解[**窗口函数**](http://www.postgresql.org/docs/current/interactive/functions-window.html)：

```
SELECT i - lag(i, 1, 0) OVER (ORDER BY id) AS result
FROM   score
ORDER  BY id; 
```

包括@Clodoaldo 的改进（见评论）。

```
lag(i, 1, 0) OVER (ORDER BY id) 
```

等效于，但比：

```
COALESCE(lag(i) OVER (ORDER BY id), 0) 
```

目的是覆盖第一行没有前行的特殊情况。
[sqlfiddle 上的演示。](http://sqlfiddle.com/#!1/b6dd3/3)

`sum(result)``i`是微不足道的，因为根据您的描述，它必然等于最后一个：

```
SELECT i
FROM   score
ORDER  BY id DESC
LIMIT  1; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T10:43:00.630

就像是

```
SELECT SUM(COALESCE(rx.diff,rx.val))
  FROM
(SELECT x.val,
        x.val - lag(x.val) over () as diff
  FROM (SELECT unnest(ARRAY[6,8,9]) as val) AS x) AS rx 
```

将您的表选择替换为我的 unnest，它只是根据您的示例生成数据。

# android - 如何从服务类调用 Activity 类中的 void 方法？

> ID：11153981
> 
> 赞同：-6
> 
> 时间：2012-06-22T09:54:47.003
> 
> 标签：android, android-activity

> **可能重复：**
> [如何在另一个活动中调用方法](https://stackoverflow.com/questions/8295735/how-to-call-a-method-in-another-activity)

我想`Public void sendmessage(){}`从服务类调用 Activity 类中的方法方法。我不想返回任何结果来使用`StartActivityforresult()`方法，也不想加载另一个活动来使用意图。

最好的方法是什么？因为我什至不能扩展父类。

提前谢谢了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T11:37:40.157

在 SecondActivity 中创建一个 FirstActivity 的对象，并使用该对象调用 FirstActivity 的方法。

```
 public class FirstActivity extends Activity{

        public void yourMethod(){
           // your code.
        }
    } 
```

在第二活动中：

```
 public class SecondActivity extends Activity{

        public void someMethod(){ 
            FirstActivity firstActivityObject= new FirstActivity();
            firstActivityObject.yourMethod();
        }

     } 
```

# css - 如何在 webkit 浏览器中隐藏滚动条？

> ID：11153986
> 
> 赞同：0
> 
> 时间：2012-06-22T09:55:14.397
> 
> 标签：css, webkit, scrollbar, custom-scrolling

[http://jsfiddle.net/mWPLC/](http://jsfiddle.net/mWpLC/)

请检查链接。当您在文本上按下鼠标时，然后将光标向右拖动 - 出现浏览器滚动。

如何为 webkit 浏览器解决这个问题？文本必须是可滚动的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T10:16:19.313

移除这个溢出 -y:scroll;

```
.custom-scroll__scroll-area {
    height: 100%;
    overflow-y: scroll; /*Remove This Line*/
    position: relative;
    right: -16px;
} 
```

# excel - 在Excel中查找范围的第一个非空白单元格的标题索引的公式？

> ID：11153987
> 
> 赞同：4
> 
> 时间：2012-06-22T09:55:16.927
> 
> 标签：excel, formula, gantt-chart

我有这张表，可以看作是一个基本的自定义甘特图：

![表格1](../Images/81aebcfd8a03bcc9a24f7e86e7639486.png)

而且我想根据同一行上范围的第一个填充单元格及其相应列（第 1 行）的标题值，用开始日期填充 A 列。显示我的预期结果比实际编写它更容易：

![在此处输入图像描述](../Images/c3da89abffeab2b7c042d6ba7e747596.png)

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-22T10:03:39.063

在 A2 中试试这个公式复制下来

`=IF(COUNTA(B2:Z2),INDEX(B$1:Z$1,MATCH(TRUE,INDEX(B2:Z2<>"",0),0)),"")`

您可能必须使用所需的日期格式格式化 A 列

假设数据到 Z 列，根据需要进行调整

# java - jsp 会话变量返回 null（有时）

> ID：11153994
> 
> 赞同：-4
> 
> 时间：2012-06-22T09:55:40.853
> 
> 标签：java, ajax, jsp

我有一个已经在运行的应用程序。它使用大量与 JSP 通信的 Ajax 请求。我必须设置很多必要的会话变​​量，但有时由于某种原因，我之前设置的会话变量返回“null”，我真的不知道为什么......它在大多数情况下都有效。什么可能导致这种情况？

提前致谢，

小时

示例：在一个 JSP 中，我设置了这样的金额..

```
double n=curbal*2;
request.getSession().setAttribute("amount",new Double(n)); 
```

然后我在另一个 JSP 中使用以下内容得到它..

```
Double temp=(Double) request.getSession().getAttribute("amount"); 
```

设置变量和获取变量之间大约有 3 分钟..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T14:17:14.533

我建议你在这一行设置一个断点：

`request.getSession().setAttribute("amount",new Double(n));`

并查看当会话变量为空时是否真的设置了您的属性。

# excel - 编辑单元格时按下键时是否会触发任何事件？

> ID：11153995
> 
> 赞同：22
> 
> 时间：2012-06-22T09:55:43.367
> 
> 标签：excel, keypress, vba

*当*您在工作表中的特定单元格中按下一个键（进行编辑）时，是否可以以任何方式捕获事件？

最接近的是已知`Change`事件，但只有在取消选择已编辑的单元格后才能激活它。我想在编辑单元格*时捕获事件。*

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-06-22T10:16:10.273

这是答案，我已经测试过了，它对我来说工作正常。

[在 Excel 中跟踪按键](http://www.mrexcel.com/forum/showthread.php?402721-Custom-Worksheet-KeyPress-Event-for-catching-Key-strokes-and-data-validating-as-you-type-into-cells-!)

有趣的问题：`Worksheet_Change`当您完成更改并离开单元格时，MS Excel 的事件总是被触发。捕获`Key Press`事件。使用 Excel 标准或内置函数无法跟踪 Keypress 事件。

这可以通过使用`API`.

```
Option Explicit

Private Type POINTAPI
    x As Long
    y As Long
End Type

Private Type MSG
    hwnd As Long
    Message As Long
    wParam As Long
    lParam As Long
    time As Long
    pt As POINTAPI
End Type

Private Declare Function WaitMessage Lib "user32" () As Long

Private Declare Function PeekMessage Lib "user32" Alias "PeekMessageA" _
    (ByRef lpMsg As MSG, ByVal hwnd As Long, _
     ByVal wMsgFilterMin As Long, _
     ByVal wMsgFilterMax As Long, _
     ByVal wRemoveMsg As Long) As Long

Private Declare Function TranslateMessage Lib "user32" _
    (ByRef lpMsg As MSG) As Long

Private Declare Function PostMessage Lib "user32" Alias "PostMessageA" _
    (ByVal hwnd As Long, _
     ByVal wMsg As Long, _
     ByVal wParam As Long, _
     lParam As Any) As Long

Private Declare Function FindWindow Lib "user32" Alias "FindWindowA" _
    (ByVal lpClassName As String, _
     ByVal lpWindowName As String) As Long

Private Const WM_KEYDOWN As Long = &H100
Private Const PM_REMOVE  As Long = &H1
Private Const WM_CHAR    As Long = &H102
Private bExitLoop As Boolean

Sub TrackKeyPressInit()

    Dim msgMessage As MSG
    Dim bCancel As Boolean
    Dim iKeyCode As Integer
    Dim lXLhwnd As Long

    On Error GoTo errHandler:
        Application.EnableCancelKey = xlErrorHandler
        'initialize this boolean flag.
        bExitLoop = False
        'get the app hwnd.
        lXLhwnd = FindWindow("XLMAIN", Application.Caption)
    Do
        WaitMessage
        'check for a key press and remove it from the msg queue.
        If PeekMessage _
            (msgMessage, lXLhwnd, WM_KEYDOWN, WM_KEYDOWN, PM_REMOVE) Then
            'strore the virtual key code for later use.
            iKeyCode = msgMessage.wParam
           'translate the virtual key code into a char msg.
            TranslateMessage msgMessage
            PeekMessage msgMessage, lXLhwnd, WM_CHAR, _
            WM_CHAR, PM_REMOVE
           'for some obscure reason, the following
          'keys are not trapped inside the event handler
            'so we handle them here.
            If iKeyCode = vbKeyBack Then SendKeys "{BS}"
            If iKeyCode = vbKeyReturn Then SendKeys "{ENTER}"
           'assume the cancel argument is False.
            bCancel = False
            'the VBA RaiseEvent statement does not seem to return ByRef arguments
            'so we call a KeyPress routine rather than a propper event handler.
            Sheet_KeyPress _
            ByVal msgMessage.wParam, ByVal iKeyCode, ByVal Selection, bCancel
            'if the key pressed is allowed post it to the application.
            If bCancel = False Then
                PostMessage _
                lXLhwnd, msgMessage.Message, msgMessage.wParam, 0
            End If
        End If
errHandler:
        'allow the processing of other msgs.
        DoEvents
    Loop Until bExitLoop

End Sub

Sub StopKeyWatch()

    'set this boolean flag to exit the above loop.
    bExitLoop = True

End Sub

'\\This example illustrates how to catch worksheet
'\\Key strokes in order to prevent entering numeric
'\\characters in the Range "A1:D10" .
Private Sub Sheet_KeyPress(ByVal KeyAscii As Integer, _
                           ByVal KeyCode As Integer, _
                           ByVal Target As Range, _
                           Cancel As Boolean)

    Const MSG As String = _
    "Numeric Characters are not allowed in" & _
    vbNewLine & "the Range:  """
    Const TITLE As String = "Invalid Entry !"

    If Not Intersect(Target, Range("A1:D10")) Is Nothing Then
        If Chr(KeyAscii) Like "[0-9]" Then
            MsgBox MSG & Range("A1:D10").Address(False, False) _
            & """ .", vbCritical, TITLE
            Cancel = True
        End If
    End If

End Sub 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-10-02T15:12:38.030

我知道这是一个老问题，但我最近需要类似的功能，并且提供的答案有一些限制，我必须解决它如何处理（或不处理）Del、Backspace、功能键等。

解决方法是发回原始消息而不是翻译的消息。

也更改为使用带有事件的类模块，因为它在 Excel 2010 中工作正常，我不想将相同的代码复制到多个工作表：

## 类模块（将其命名为 KeyPressApi）

```
Option Explicit

Private Type POINTAPI
    x As Long
    y As Long
End Type

Private Type MSG
    hwnd As Long
    Message As Long
    wParam As Long
    lParam As Long
    time As Long
    pt As POINTAPI
End Type

Private Declare Function WaitMessage Lib "user32" () As Long

Private Declare Function PeekMessage Lib "user32" Alias "PeekMessageA" _
    (ByRef lpMsg As MSG, ByVal hwnd As Long, _
     ByVal wMsgFilterMin As Long, _
     ByVal wMsgFilterMax As Long, _
     ByVal wRemoveMsg As Long) As Long

Private Declare Function TranslateMessage Lib "user32" _
    (ByRef lpMsg As MSG) As Long

Private Declare Function PostMessage Lib "user32" Alias "PostMessageA" _
    (ByVal hwnd As Long, _
     ByVal wMsg As Long, _
     ByVal wParam As Long, _
     lParam As Any) As Long

Private Declare Function FindWindow Lib "user32" Alias "FindWindowA" _
    (ByVal lpClassName As String, _
     ByVal lpWindowName As String) As Long

Private Const WM_KEYDOWN As Long = &H100
Private Const PM_REMOVE  As Long = &H1
Private Const WM_CHAR    As Long = &H102
Private bExitLoop As Boolean

Public Event KeyPressed
    (ByVal KeyAscii As Integer, _
     ByVal KeyCode As Integer, _
     ByVal Target As Range, _
     ByRef Cancel As Boolean)

Public Sub StartKeyPressInit()
    Dim msgMessage As MSG
    Dim bCancel As Boolean
    Dim iMessage As Integer
    Dim iKeyCode As Integer
    Dim lXLhwnd As Long

    On Error GoTo errHandler
    Application.EnableCancelKey = xlErrorHandler
    'Initialize this boolean flag.
    bExitLoop = False
    'Get the app hwnd.
    lXLhwnd = FindWindow("XLMAIN", Application.Caption)

    Do
        WaitMessage

        'Exit the loop if we were aborted
        If bExitLoop Then Exit Do

        'Check for a key press and remove it from the msg queue.
        If PeekMessage(msgMessage, lXLhwnd, WM_KEYDOWN, WM_KEYDOWN, PM_REMOVE) Then
            'Store the virtual key code for later use.
            iMessage = msgMessage.Message
            iKeyCode = msgMessage.wParam

            'Translate the virtual key code into a char msg.
            TranslateMessage msgMessage
            PeekMessage msgMessage, lXLhwnd, WM_CHAR, WM_CHAR, PM_REMOVE

            bCancel = False
            RaiseEvent KeyPressed(msgMessage.wParam, iKeyCode, Selection, bCancel)

            'If not handled, post back to the window using the original values
            If Not bCancel Then
                PostMessage lXLhwnd, iMessage, iKeyCode, 0
            End If
        End If
errHandler:
        'Allow the processing of other msgs.
        DoEvents
    Loop Until bExitLoop
End Sub

Public Sub StopKeyPressWatch()
    'Set this boolean flag to exit the above loop.
    bExitLoop = True
End Sub 
```

## 用法

```
Option Explicit

Dim WithEvents CKeyWatcher As KeyPressApi

Private Sub Worksheet_Activate()
    If CKeyWatcher Is Nothing Then
        Set CKeyWatcher = New KeyPressApi
    End If
    CKeyWatcher.StartKeyPressInit
End Sub

Private Sub Worksheet_Deactivate()
    CKeyWatcher.StopKeyPressWatch
End Sub

'\\This example illustrates how to catch worksheet
'\\Key strokes in order to prevent entering numeric
'\\characters in the Range "A1:D10" .
Private Sub CKeyWatcher_KeyPressed(ByVal KeyAscii As Integer, _
                                   ByVal KeyCode As Integer, _
                                   ByVal Target As Range, _
                                   Cancel As Boolean)

    Const MSG As String = _
    "Numeric Characters are not allowed in" & _
    vbNewLine & "the Range:  """
    Const TITLE As String = "Invalid Entry !"

    If Not Intersect(Target, Range("A1:D10")) Is Nothing Then
        If Chr(KeyAscii) Like "[0-9]" Then
            MsgBox MSG & Range("A1:D10").Address(False, False) _
            & """ .", vbCritical, TITLE
            Cancel = True
        End If
    End If

End Sub 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-05-26T02:05:41.827

我有同样的问题，并通过在单元格上放置一个文本框来解决它。我设置了属性，使文本框看起来像 Excel 单元格，然后使用 Top 和 Left 属性将其放置在单元格上，使用单元格中的相同属性，并将 Width 和 Height 设置为比细胞。然后我让它可见。我使用 KeyDown 事件来处理击键。在我的代码中，我在单元格下方放置了一个列表框，以显示另一张纸上列表中的匹配项。注意：此代码在工作表中，单元格变量在模块中声明：全局单元格为范围。这比组合框好得多。tb1 是一个文本框，而 lb1 是一个列表框。您将需要一张名为 Fruit 的工作表，其中第一列中包含数据。仅当所选单元格在列 = 2 中并且为空时，运行此代码的工作表才会运行。

```
Option Explicit

Private Sub lb1_Click()
  Cell.Value2 = lb1.Value
  tb1.Visible = False
  lb1.Visible = False
  Cell.Activate
End Sub

Private Sub tb1_KeyDown(ByVal KeyCode As MSForms.ReturnInteger, ByVal Shift As Integer)
Dim Row As Long
Dim Temp As String
  Select Case KeyCode
  Case vbKeyBack
    If Len(tb1.Value) > 0 Then tb1.Value = Left(tb1.Value, Len(tb1.Value) - 1)
  Case vbKeySpace, vbKeyA To vbKeyZ
    tb1.Value = WorksheetFunction.Proper(tb1.Value & Chr(KeyCode))
  Case vbKeyReturn
    If lb1.ListCount > 0 Then
      Cell.Value2 = lb1.List(0)
    Else
      Cell.Value2 = tb1.Value
      With Sheets("Fruit")
        .Cells(.UsedRange.Rows.Count + 1, 1) = tb1.Value
        .UsedRange.Sort Key1:=.Cells(1, 1), Header:=xlYes
      End With
      MsgBox tb1.Value & " has been added to the List"
    End If
    tb1.Visible = False
    lb1.Visible = False
    Cell.Activate
  Case vbKeyEscape
    tb1.Visible = False
    lb1.Visible = False
    Cell.Activate
  End Select
  lb1.Clear
  Temp = LCase(tb1.Value) & "*"
  With Sheets("Fruit")
    For Row = 2 To .UsedRange.Rows.Count
      If LCase(.Cells(Row, 1)) Like Temp Then
        lb1.AddItem .Cells(Row, 1)
      End If
    Next Row
  End With
KeyCode = 0
End Sub

Private Sub Worksheet_SelectionChange(ByVal Target As Range)

  If Target.Column = 2 And Target.Cells.Count = 1 Then
    If Target.Value2 = Empty Then
      Set Cell = Target
      With Cell
        tb1.Top = .Top
        tb1.Left = .Left
        tb1.Height = .Height + 1
        tb1.Width = .Width + 1
      End With
      tb1.Value = Empty
      tb1.Visible = True
      tb1.Activate
      With Cell.Offset(1, 0)
        lb1.Top = .Top
        lb1.Left = .Left
        lb1.Width = .Width + 1
        lb1.Clear
        lb1.Visible = True
      End With
    Else
      tb1.Visible = False
      lb1.Visible = False
    End If
  Else
    tb1.Visible = False
    lb1.Visible = False
  End If
End Sub 
```

# java - 如何在java中的一列ireport 4.5中显示多个名称

> ID：11153996
> 
> 赞同：0
> 
> 时间：2012-06-22T09:55:44.003
> 
> 标签：java, ireport

stackoverflow 论坛成员 我在使用 ireport 4.5 设计的某个报告时遇到问题，我可以对数据进行分组。现在我希望员工姓名应该只出现在一行中，例如：Hiren、Yogesh、Jayesh、Aakash、Niraj 等。

**但是在我的设计中，员工的名字出现了新的一行。**

我**希望员工姓名应该排成一行，只用“，”分隔，例如 Hiren、Yogesh、Jayesh、Aakash、Niraj**

![员工报告](../Images/7a6e1a2d8eae401dc357da55b6bc36f0.png)

**有什么办法吗？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T00:35:03.513

如果您的源是 SQL 数据库，请执行[此](https://stackoverflow.com/questions/102317/how-to-get-multiple-records-against-one-record-based-on-relation)操作。

如果您的来源是别的东西，那么创建一个变量来连接字符串值。不要使用细节带。将变量作为员工放入组页脚（或页眉）。

# javascript - 通过javascript动态附加html代码

> ID：11153999
> 
> 赞同：0
> 
> 时间：2012-06-22T09:55:51.963
> 
> 标签：javascript, jquery, html

我建立了自己的无限滚动，类似于谷歌图片搜索。一切工作正常。我只想知道是否有另一种方法可以在 javascript 中附加 html 代码，尤其是当它包含 javascript 函数的行不止一行时。

此刻它看起来像这样：

```
appenddiv += '<div class="actbtn">'+
        '<a href="javascript:void(0)" onclick="OWNER.feedaction(\''+feedid+'\','action_delete')">'+
              '<img id="delicon_'+feedid+'" src="images/icons/delete.gif" title="'+delete_text+'">'+
        '</a>'+
 '</div>'; 
```

有没有其他方法可以做到这一点，因为这只是一个很小的例子。我想到了一个函数，我可以在其中输入“正常”的 html 代码，而无需引号 ' 和 + 以及转义 \' 等，然后得到上面的格式化代码。

正常代码：

```
<div class="actbtn">
       <a href="javascript:void(0);" onclick="OWNER.feedaction('{$profile_actions[actions_loop].action_id}','action_delete')">
           <img id="delicon_{$profile_actions[actions_loop].action_id}" src="images/icons/delete.gif" title="my text" />
        </a>
</div> 
```

我对你的想法很感兴趣，还有其他方法可以做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T10:02:11.870

您可以使用“JavaScript Micro-Templating”，将 html 添加到半 js 格式的脚本标签中，如下所示：

```
<script type="text/html" id="user_tmpl">
  <% some js %>
  some html
</script> 
```

查看[John Resigs 的博客](http://ejohn.org/blog/javascript-micro-templating/)，了解如何使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T09:58:49.040

您可以使用 jquery html 函数，如`$("#parent_div_id").html(appenddiv);`

`$("#parent_div_id").append(appenddiv);`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T10:02:48.337

在 Jquery 中，您可以使用：

[。附加（）;](http://api.jquery.com/append/)

[.html();](http://api.jquery.com/html/)