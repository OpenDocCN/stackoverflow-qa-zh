# StackOverflow 问答 10354000-10354999

# python - 使用 openCV +python 打开视频

> ID：10354000
> 
> 赞同：2
> 
> 时间：2012-04-27T16:02:22.843
> 
> 标签：python, opencv, video-capture

我使用 python 2.7 和 openCV 2.3.1 (win 7)。我尝试打开视频文件：

```
stream = cv.VideoCapture("test1.avi")
if stream.isOpened() == False:
print "Cannot open input video!"
exit() 
```

但我有警告：

```
warning: Error opening file (../../modules/highgui/src/cap_ffmpeg_impl_v2.hpp:394) 
```

如果使用摄像机 ( `stream = cv.VideoCapture(0)`)，则此代码有效。关于我做错了什么的任何想法？非常感谢大家！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T16:11:20.210

Try using `cv.CaptureFromFile()` instead.

Copy this code if you must: [Watch Video in Python with OpenCV](http://web.michaelchughes.com/how-to/watch-video-in-python-with-opencv).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-16T14:17:46.527

您可以使用 OpenCV (cv2) 的新接口，它是从 c++ 绑定的面向对象的接口。我发现它更容易阅读。

注意：如果你用这个打开图片，fps 没有任何意义，所以图片保持静止。

```
import cv2
import sys

try:
    vidFile = cv2.VideoCapture(sys.argv[1])
except:
    print "problem opening input stream"
    sys.exit(1)
if not vidFile.isOpened():
    print "capture stream not open"
    sys.exit(1)

nFrames = int(vidFile.get(cv2.cv.CV_CAP_PROP_FRAME_COUNT)) # one good way of namespacing legacy openCV: cv2.cv.*
print "frame number: %s" %nFrames
fps = vidFile.get(cv2.cv.CV_CAP_PROP_FPS)
print "FPS value: %s" %fps

ret, frame = vidFile.read() # read first frame, and the return code of the function.
while ret:  # note that we don't have to use frame number here, we could read from a live written file.
    print "yes"
    cv2.imshow("frameWindow", frame)
    cv2.waitKey(int(1/fps*1000)) # time to wait between frames, in mSec
    ret, frame = vidFile.read() # read next frame, get next return code 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-15T04:43:13.757

从此[答案](https://stackoverflow.com/a/11703998/623999)开始，尝试将`.dll`OpenCV 安装中的所有文件复制到`C:\Python27`.

# android - 是否可以在 webview 应用程序中定义建议列表？

> ID：10354003
> 
> 赞同：2
> 
> 时间：2012-04-27T16:02:34.880
> 
> 标签：android, cordova, webview, textinput

在基于 webview 的应用程序的文本类型输入元素中输入字符串时，虚拟键盘上方会显示可能的单词列表。

在我的应用程序中，不允许用户输入任意单词，而只有数据库中的单词和短语是合法的。

所以，我想从我的 phonegap 应用程序中设置单词列表并禁用此列表的自动创建。

问：这是否可以创建列表 - 以及如何创建？

（这是一个 phonegap 应用程序，我正在 android 上进行测试，但这可能是不同平台上的 webview/文本输入字段的问题）

**编辑：**
刚刚发现（是的，我是 android 开发新手），可以通过以下方式禁用建议列表：设置/语言和键盘/Android 键盘/显示建议。

但当然，此设置应仅针对应用程序进行，从应用程序内部进行，无需用户交互，也不能更改应用程序外部的任何内容。

有机会完成这件事吗？

**编辑 2：**
我没有禁用建议列表，而是尝试使用它。InputMethodManager 的 displayCompletions 方法听起来很有希望，所以我尝试了以下代码：

```
...
// data member
InputMethodManager mInputMethodManager = null;
...

    ...
    // initialized
    mInputMethodManager = (InputMethodManager) context.getSystemService(Context.INPUT_METHOD_SERVICE);
    ...

public void showSuggestions(String[] words) {
    Log.d(TAG, "showSuggestions (in Java!): " + words.length);  // yes, this code is executed
    CompletionInfo[] completions = new CompletionInfo[words.length];
    for (int i=0; i<words.length; i++) {
        completions[i] = new CompletionInfo(i, i, words[i]);    // no idea, what the 2 extra integers mean
    }
    mInputMethodManager.displayCompletions(mView, completions);
} 
```

只要有可用的新列表（在输入更改并且服务器已响应请求之后），就会执行该方法。

然而，什么都没有改变——内置机制仍在做它不利的工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T16:18:12.590

如果有不同的虚拟键盘变体（swype 和其他），可能没有可能的单词列表。所以，我想没有不显示此列表的通用解决方案。

有一个参数[http://developer.android.com/reference/android/widget/TextView.html#attr_android:editorExtras](http://developer.android.com/reference/android/widget/TextView.html#attr_android:editorExtras) editorExtras 定义了传递给输入法实现的参数，但我不确定你会如何在PhoneGap中使用它应用

**编辑：**

我想您可以扩展默认输入法并使其不显示建议 inputmethod 参考[http://developer.android.com/reference/android/inputmethodservice/InputMethodService.html](http://developer.android.com/reference/android/inputmethodservice/InputMethodService.html)

> 提供定制软件键盘
> 
> 如果您有兴趣开发自己的软件键盘，我们强烈推荐以下参考资料：
> 
> IME 被实现为 Android 服务。首先查看名为 android.inputmethodservice 和 android.view.inputmethod 的 Android 包，它们可用于实现自定义输入法。Android SDK 中的 SoftKeyboard 示例应用程序提供了软件键盘的实现。Android 开发者关于屏幕输入法和创建输入法的技术文章。

在这里找到它[http://e-university.wisdomjobs.com/android/chapter-946-288/handling-advanced-user-input.html](http://e-university.wisdomjobs.com/android/chapter-946-288/handling-advanced-user-input.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T19:02:45.887

为什么不使用 jQuery UI 中的自动完成功能。

[http://jqueryui.com/demos/autocomplete/](http://jqueryui.com/demos/autocomplete/)

此外，用 JavaScript 自己编写它并不难。

[http://www.javascript-examples.com/autocomplete-demo/](http://www.javascript-examples.com/autocomplete-demo/)

# attributes - mib2c - 显示所有变量属性

> ID：10354004
> 
> 赞同：2
> 
> 时间：2012-04-27T16:02:35.753
> 
> 标签：attributes, net-snmp, mib

我对 mib2c 很陌生，我需要列出属于一个变量的所有属性。我使用来自 NET-SNMP 的 mib2c 工具，并且有用于生成代码的配置模板。

有许多属性的变量，如下所示：

```
$var.defval
$var.type 
```

我想查看所有这些属性，以便在生成的代码中使用它们。我知道，对于 mib2c 属性，有[man page](http://www.net-snmp.org/docs/man/mib2c.conf.html)，但不是全部。（例如，我知道该属性`$var.needlength`存在，并且该手册页中未提及）。

我不知道如何`$var`定义和实现。

如何列出 的所有属性`$var`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T22:19:06.043

鉴于 mib2c 伪 Perl 的约束，我不确定如何以编程方式执行此操作，但我只是查看`/usr/bin/mib2c`（它是一个脚本，而不是编译的可执行文件，因此您可以轻松检查代码）并找到以下内容。

mib2c 脚本中只有四个**未记录的变量：**

*   最后一次变更
*   存储类型
*   需要长度
*   枚举范围

mib2c 脚本中有更多**记录在案的变量：**

*   uc
*   对象ID
*   commaoid
*   oid长度
*   子项
*   模块
*   父母
*   标量
*   栏目
*   孩子们
*   perltype
*   类型
*   声明
*   可读
*   可设置
*   可创建的
*   无法访问
*   无障碍
*   行状态
*   有定义值
*   定义值
*   哈希值
*   暗示
*   范围
*   枚举
*   使用权
*   地位
*   句法
*   参考
*   描述

话虽如此，我不确定您到底希望找到什么，所以我不确定这是否真的回答了您的问题。

# c# - 注册按钮没有反应

> ID：10354006
> 
> 赞同：1
> 
> 时间：2012-04-27T16:02:43.117
> 
> 标签：c#, asp.net-mvc-3, custom-membershipprovider

基本问题：我们目前正忙于开发 C# MVC3 Web 应用程序，在编写了 CustomMembershipProvider 和自定义 RegisterModel 之后，我们的 Register 表单似乎无法正常工作。这个错误非常令人沮丧。

以下是发生的情况： 显示表单，底部有注册按钮：

```
<input type="submit" value="Register" /> 
```

但是，当您单击注册按钮时，什么也没有发生。这是 HttpPost 方法：

```
 [HttpPost]
    public ActionResult Register(RegisterModel model, string returnUrl)
    {
        if (ModelState.IsValid)
        {
            // Attempt to register the user
            MembershipCreateStatus createStatus = ((CustomMembershipProvider)Membership.Provider).CreateUser(model);

            if (createStatus == MembershipCreateStatus.Success)
            {
                if (Url.IsLocalUrl(returnUrl) && returnUrl.Length > 1 && returnUrl.StartsWith("/")
                    && !returnUrl.StartsWith("//") && !returnUrl.StartsWith("/\\"))
                {
                    return Redirect(returnUrl);
                }
                else
                {
                    return RedirectToAction("Index", "Home");
                }
            }
            else
            {
                ModelState.AddModelError("","Something went wrong");
            }
        }

        // If we got this far, something failed, redisplay form

        return View(model);
    } 
```

有什么想法吗？任何帮助将不胜感激。

编辑：为了您的“观看”娱乐 - 这是完整的视图

```
@model PMES.Models.RegisterModel

@{
ViewBag.Title = "Register";
}

<h2>Create a New Account</h2>
<p>
Use the form below to create a new account. 
</p>
<p>
Passwords are required to be a minimum of 
@Membership.MinRequiredPasswordLength          characters in length.
</p>

<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript">            </script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")"    type="text/javascript"></script>

@using (Html.BeginForm()) {
@Html.ValidationSummary(true, "Account creation was unsuccessful. Please correct the    errors and try again.")
<div>
    <fieldset>
        <legend>Account Information</legend>

        <div class="editor-label">
            @Html.LabelFor(m => m.Email)
        </div>
        <div class="editor-field">
            @Html.TextBoxFor(m => m.Email)
            @Html.ValidationMessageFor(m => m.Email)
        </div>

        <div class="editor-label">
            @Html.LabelFor(m => m.Password)
        </div>
        <div class="editor-field">
            @Html.PasswordFor(m => m.Password)
            @Html.ValidationMessageFor(m => m.Password)
        </div>

        <div class="editor-label">
            @Html.LabelFor(m => m.ConfirmPassword)
        </div>
        <div class="editor-field">
            @Html.PasswordFor(m => m.ConfirmPassword)
            @Html.ValidationMessageFor(m => m.ConfirmPassword)
        </div>

        <div class="editor-label">
            @Html.LabelFor(m => m.Name)
        </div>
        <div class="editor-field">
            @Html.TextBoxFor(m => m.Name)
            @Html.ValidationMessageFor(m => m.Name)
        </div>

        <div class="editor-label">
            @Html.LabelFor(m => m.FirstName)
        </div>
        <div class="editor-field">
            @Html.TextBoxFor(m => m.FirstName)
            @Html.ValidationMessageFor(m => m.FirstName)
        </div>

        <div class="editor-label">
            @Html.LabelFor(m => m.Mobile)
        </div>
        <div class="editor-field">
            @Html.TextBoxFor(m => m.Mobile)
            @Html.ValidationMessageFor(m => m.Mobile)
        </div>
        <p>
            <input type="submit" value="Register" />
        </p>
    </fieldset>
</div>
} 
```

为了获得更多观看乐趣：

```
namespace PMES.Controllers
{
public class AccountController : Controller
{
    private IUserRepository userRepository;
    //
    // GET: /Account/LogOn
    public AccountController()
    {
        ProjectManagementContext context = new ProjectManagementContext();
        this.userRepository = new UserRepository(context);
    }

    /*public AccountController(IUserRepository userRepository)
    {
        this.userRepository = userRepository;
    }*/

    public ActionResult LogOn()
    {
        return View();
    }

    //
    // POST: /Account/LogOn

    [HttpPost]
    public ActionResult LogOn(LogOnModel model, string returnUrl)
    {
        if (ModelState.IsValid)
        {
            if (Membership.ValidateUser(model.Email, model.Password))
            {
                FormsAuthentication.SetAuthCookie(model.Email, model.RememberMe);
                if (Url.IsLocalUrl(returnUrl) && returnUrl.Length > 1 && returnUrl.StartsWith("/")
                    && !returnUrl.StartsWith("//") && !returnUrl.StartsWith("/\\"))
                {
                    return Redirect(returnUrl);
                }
                else
                {
                    return RedirectToAction("Index", "Home");
                }
            }
            else
            {
                ModelState.AddModelError("", "The user name or password provided is incorrect.");
            }
        }

        // If we got this far, something failed, redisplay form
        return View(model);
    }

    //
    // GET: /Account/LogOff

    public ActionResult LogOff()
    {
        FormsAuthentication.SignOut();

        return RedirectToAction("Index", "Home");
    }

    //
    // GET: /Account/Register

    public ActionResult Register()
    {
        return View();
    }

    //
    // POST: /Account/Register

    [HttpPost]
    public ActionResult Register(RegisterModel model, string returnUrl)
    {
        if (ModelState.IsValid)
        {
            // Attempt to register the user
            MembershipCreateStatus createStatus = ((CustomMembershipProvider)Membership.Provider).CreateUser(model);

            if (createStatus == MembershipCreateStatus.Success)
            {
                if (Url.IsLocalUrl(returnUrl) && returnUrl.Length > 1 && returnUrl.StartsWith("/")
                    && !returnUrl.StartsWith("//") && !returnUrl.StartsWith("/\\"))
                {
                    return Redirect(returnUrl);
                }
                else
                {
                    return RedirectToAction("Index", "Home");
                }
            }
            else
            {
                ModelState.AddModelError("","Something went wrong");
            }
        }

        // If we got this far, something failed, redisplay form

        return View(model);
    }

    //
    // GET: /Account/ChangePassword

    [Authorize]
    public ActionResult ChangePassword()
    {
        return View();
    }

    //
    // POST: /Account/ChangePassword

    [Authorize]
    [HttpPost]
    public ActionResult ChangePassword(ChangePasswordModel model)
    {
        if (ModelState.IsValid)
        {

            // ChangePassword will throw an exception rather
            // than return false in certain failure scenarios.
            bool changePasswordSucceeded;
            try
            {
                MembershipUser currentUser = Membership.GetUser(User.Identity.Name, true /* userIsOnline */);
                changePasswordSucceeded = currentUser.ChangePassword(model.OldPassword, model.NewPassword);
            }
            catch (Exception)
            {
                changePasswordSucceeded = false;
            }

            if (changePasswordSucceeded)
            {
                return RedirectToAction("ChangePasswordSuccess");
            }
            else
            {
                ModelState.AddModelError("", "The current password is incorrect or the new password is invalid.");
            }
        }

        // If we got this far, something failed, redisplay form
        return View(model);
    }

    //
    // GET: /Account/ChangePasswordSuccess

    public ActionResult ChangePasswordSuccess()
    {
        return View();
    }

    public JsonResult checkEmail(String email)
    {
        var result = Membership.FindUsersByEmail(email).Count == 0;
        return Json(result, JsonRequestBehavior.AllowGet);
    }

    #region Status Codes
    private static string ErrorCodeToString(MembershipCreateStatus createStatus)
    {
        // See http://go.microsoft.com/fwlink/?LinkID=177550 for
        // a full list of status codes.
        switch (createStatus)
        {
            case MembershipCreateStatus.DuplicateUserName:
                return "User name already exists. Please enter a different user name.";

            case MembershipCreateStatus.DuplicateEmail:
                return "A user name for that e-mail address already exists. Please enter a different e-mail address.";

            case MembershipCreateStatus.InvalidPassword:
                return "The password provided is invalid. Please enter a valid password value.";

            case MembershipCreateStatus.InvalidEmail:
                return "The e-mail address provided is invalid. Please check the value and try again.";

            case MembershipCreateStatus.InvalidAnswer:
                return "The password retrieval answer provided is invalid. Please check the value and try again.";

            case MembershipCreateStatus.InvalidQuestion:
                return "The password retrieval question provided is invalid. Please check the value and try again.";

            case MembershipCreateStatus.InvalidUserName:
                return "The user name provided is invalid. Please check the value and try again.";

            case MembershipCreateStatus.ProviderError:
                return "The authentication provider returned an error. Please verify your entry and try again. If the problem persists, please contact your system administrator.";

            case MembershipCreateStatus.UserRejected:
                return "The user creation request has been canceled. Please verify your entry and try again. If the problem persists, please contact your system administrator.";

            default:
                return "An unknown error occurred. Please verify your entry and try again. If the problem persists, please contact your system administrator.";
        }
    }
    #endregion
} 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T16:07:00.637

根据您如何设置所有内容，您可能必须明确告诉表单在哪里发布（在您看来）：

改变这个：

```
Html.BeginForm() 
```

至：

```
Html.BeginForm("Register", "YourController") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T04:34:48.973

您是否更改了默认设置的路线？由于路由问题，它可能没有击中控制器？

此外，使用 firebug 或 chrome 开发工具的检查元素功能，并确保表单 action="/Account/Register" 并且在构建表单时它没有做一些奇怪的事情。

有时会发生奇怪的事情，并且无法正确构建表单。

您还可以使用 chrome 开发工具中的网络选项卡来查看当您点击提交按钮时发布到服务器的内容，您可以看到服务器响应。

# php - 许多下拉列表的搜索查询

> ID：10354009
> 
> 赞同：0
> 
> 时间：2012-04-27T16:02:48.193
> 
> 标签：php, mysql, search, get

我的数据库是：

```
CREATE TABLE `user` (
  `id` int(4) NOT NULL auto_increment,
  `name` varchar(77) NOT NULL,
  `pass` varchar(77) NOT NULL,
  `datetime` varchar(22) NOT NULL,
  `level` varchar(33) NOT NULL,
  PRIMARY KEY  (`id`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8 AUTO_INCREMENT=6 ;

INSERT INTO `user` VALUES (1, 'majid', '123', '2012-04-16', 'admin');
INSERT INTO `user` VALUES (2, 'feras', '123', '2012-04-15', 'gs');
INSERT INTO `user` VALUES (3, 'sami', '123', '2012-04-12', 'gs');
INSERT INTO `user` VALUES (4, 'rashed', '123', '2012-04-09', 'gs');
INSERT INTO `user` VALUES (5, 'saad', 'dfd', '2012-04-13', 'bb'); 
```

我的搜索页面是一个包含三个下拉列表的表单……第一个是名称，第二个是通过，第三个是级别。

现在，如果我选择一个下拉列表，它会给我一个很好的结果，但如果我选择两个或更多列表，它不会给我任何东西。

我怎样才能使所有下拉列表像特定结果的过滤器一样？像“所有通过（123）和水平（gs）”

我的查询是：

```
$name= $_GET['name'];
$pass= $_GET['pass'];
$level= $_GET['level'];
mysql_select_db($database_sqltest, $sqltest);
$query_Recordset1 = "SELECT * FROM user WHERE '$name' OR pass LIKE '$pass' OR level LIKE '$level'";
$Recordset1 = mysql_query($query_Recordset1, $sqltest) or die(mysql_error());
$row_Recordset1 = mysql_fetch_assoc($Recordset1);
$totalRows_Recordset1 = mysql_num_rows($Recordset1); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T16:34:55.987

您需要使用`AND`运算符而不是`OR`来增加特异性并限制查询。我添加了`%`符号（通配符），以便搜索“12”将匹配通行证“123”。如果您不想要该功能，可以删除它们。

```
$query_Recordset1 = "SELECT * FROM user WHERE `pass` LIKE '%$pass%' AND `level` LIKE '%$level%' AND `name` LIKE '%$name%'"; 
```

# windows - Windows 中的文件重定向和 %errorlevel%

> ID：10354016
> 
> 赞同：24
> 
> 时间：2012-04-27T16:03:20.290
> 
> 标签：windows, batch-file, error-handling, io-redirection

假设我们想使用以下命令在 windows 中创建一个空文件：

```
type nul > C:\does\not\exist\file.txt 
```

该目录不存在，所以我们得到错误：

```
The system cannot find the path specified 
```

如果你打印`%errorlevel%`输出是：

```
echo %errorlevel%
0 
```

然而命令没有成功！

我注意到，如果您使用重定向，Windows 不会设置`%errorlevel%`最后一个命令的 ..

有没有解决的办法？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-04-27T22:02:18.840

您可以使用以下内容：

```
C:\>type nul > C:\does\not\exist\file.txt && echo ok || echo fail
The system cannot find the path specified.
fail

C:\>echo %errorlevel%
1 
```

我总是假设 && 和 || 运营商使用了 ERRORLEVEL，但显然不是。

非常好奇，只有在使用 || 时才会在重定向错误之后设置 ERRORLEVEL 操作员。我永远不会猜到。如果不是因为您的出色问题，我也不会费心去测试。

如果您只想在重定向失败时设置 ERRORLEVEL，那么您当然可以简单地执行以下操作：

```
type nul > C:\does\not\exist\file.txt || rem 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-11-12T08:54:25.287

命令

```
type nul > C:\does\not\exist\file.txt 
```

使用不存在的路径调用会在重定向失败时终止，并且`type`根本不会被调用。因此它没有机会设置`ERRORLEVEL`。由 shell 执行的重定向不会设置`ERRORLEVEL`.

`ERRORLEVEL`一种解决方案是使用非零值进行预初始化。失败时它将保持不变，`type`成功时将重置为零（按 ）：

```
@echo off
::pre-initialise ERRORLEVEL with a value of 1:
call :SETERROR 1
type NUL > NOSUCHDIR\test.txt
IF ERRORLEVEL 1 goto ERROR
echo All is well.
goto END
:ERROR
echo Error detected.
:END
goto :eof
:SETERROR
exit /b %1 
```

短形式

```
type NUL > NOSUCHDIR\test.txt && goto OK || goto ERROR 
```

之所以有效，是因为它分析退出代码，这[与](https://ss64.com/nt/errorlevel.html)错误级别不同：

> 可以使用重定向运算符直接检测退出代码（成功/失败忽略`ERRORLEVEL`），这通常比信任可能更可靠`ERRORLEVEL`，也可能未正确设置。

*Herbert Kleebauer在* *Usenet*小组中向我[解释](http://al.howardknight.net/?ID=157354809800)了这一点。*`alt.msdos.batch`*

 ***更新：**
一位匿名用户根据以下`COPY`命令提出了替代解决方案：

```
COPY NUL: C:\does\not\exist\file.txt 
```

这个命令确实 set `ERRORLEVEL`，可以通过脚本中的下一个命令来分析。非常方便，所以我感谢他提议的编辑。*

# cuda - cudaBindTexture2D 上的 CUDA 错误

> ID：10354020
> 
> 赞同：1
> 
> 时间：2012-04-27T16:03:51.093
> 
> 标签：cuda

我遇到了 cudaBindTexture2D 的问题。以下代码是我为重现此问题而创建的，但是这个...有效：

```
#include "cuda.h"
#include <stdio.h>

// This will output the proper CUDA error strings in the event that a CUDA host call returns an error
#define checkCudaErrors(err)  __checkCudaErrors (err, __FILE__, __LINE__)

inline void __checkCudaErrors(cudaError err, const char *file, const int line )
{
    if(cudaSuccess != err)
    {
        fprintf(stderr, "%s(%i) : CUDA Runtime API error %d: %s.\n",file, line, (int)err, cudaGetErrorString( err ) );
        exit(-1);        
    }
}

texture<float,2> myTex;

int main(int argc, char* argv[])
{
    float* input;
    input = new float[656 * 480];
    for(int i = 0; i < 656*480; ++i)
    {
        input[i] = i;
    }
    float* inputDevice;
    checkCudaErrors(cudaMalloc ((void**)&inputDevice, 656 * 480 * sizeof(float) ));
    checkCudaErrors(cudaMemcpy(inputDevice, input, 656 * 480 * sizeof(float), cudaMemcpyHostToDevice));

    cudaChannelFormatDesc desc = cudaCreateChannelDesc<float>();

    checkCudaErrors(cudaBindTexture2D(0, myTex, inputDevice, desc, 656, 480, sizeof(float) * 656));

    cudaUnbindTexture(myTex);
    cudaFree(inputDevice);

    return 0;
} 
```

但在我的真实项目中，大概相同的代码不起作用。

```
texture<float,2> texInput;

/* a lot of code here, but nothing with texInput */

    void CUDAConv::DoConvolution(float* input, float* kernel1D, float* resultMap, unsigned char* rMap, unsigned char* orientMap, int width, int height, int kernelSize)
    {
        int fDim = (int)(floor((sqrt((float)(width * width + height * height)) / 2 + 0.5f)));
        //Lock* locks = new Lock[width * height];
        int dim = fDim * 2 + 1;
        devWidth = width;
        devHeight = height;

        // allocate memory on GPU for the summing images
        checkCudaErrors(cudaMalloc((void**)&inputDevice, width * height * sizeof(float)));

        checkCudaErrors(cudaMemcpy(inputDevice, input, width * height * sizeof(float), cudaMemcpyHostToDevice));

        cudaChannelFormatDesc desc = cudaCreateChannelDesc<float>();
        checkCudaErrors(cudaMalloc((void**)&kernel1DDevice, kernelSize));

        checkCudaErrors(cudaBindTexture2D(0, texInput, inputDevice, desc, width, height, sizeof(float) * width));

        checkCudaErrors(cudaMalloc((void**)&radiusDevice, width * height));
        checkCudaErrors(cudaMalloc((void**)&orientationDevice, width * height));
        checkCudaErrors(cudaMalloc((void**)&resultDevice, width * height * sizeof(float)));
        checkCudaErrors(cudaMemset(resultDevice, 0x00, width * height * sizeof(float)));
        checkCudaErrors(cudaMemcpy(kernel1DDevice, kernel1D, kernelSize * sizeof(float), cudaMemcpyHostToDevice));
        for(int i = 0; i < angles; ++i)
        {
            checkCudaErrors(cudaMalloc((void**)&sumUpImage[i], angles * width * height * sizeof(float)));
            checkCudaErrors(cudaMemset(&sumUpImage[i], 0x00, width * height * angles * sizeof(float)));
            checkCudaErrors(cudaMalloc((void**)&rotationImage[i], angles * dim * dim * sizeof(float)));
            checkCudaErrors(cudaMemset(&rotationImage[i], 0x00, dim * dim * angles * sizeof(float)));
        }

        // do all convolution calculations in the Convolution function
        convolution <<<1, angles>>> (/*locks, */inputDevice, kernel1DDevice, rotationImage, sumUpImage, resultDevice, radiusDevice, orientationDevice, devWidth, devHeight, angles);

        checkCudaErrors(cudaMemcpy(resultMap, resultDevice, width * height * sizeof(float), cudaMemcpyDeviceToHost));

        // free memory allocated on the GPU
        for(int i = 0; i < angles; ++i)
        {
            checkCudaErrors(cudaFree(sumUpImage[i]));
        }

        //free(locks);
        cudaUnbindTexture(texInput);
        cudaFree(inputDevice);
        cudaFree(kernel1DDevice);
        cudaFree(radiusDevice);
        cudaFree(orientationDevice);
        cudaFree(resultDevice);
    } 
```

我因此在 cudaBindTexture2D 上得到的错误是：

CUDA_Conv.cu(203)：CUDA 运行时 API 错误 18：纹理引用无效。

调试时 texInput 看起来就像 myTex，我不知道这里发生了什么。

将 CUDA4.2 与 VS2010 一起使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T15:21:30.320

答案在评论中，我使用了一个我的 GPU 不兼容的 sm，奇怪的是它不会在 cudaMalloc 上抛出错误，而只是在 cudaBindTexture 上，但设置相同的 sm / arch，它们的行为相同的。

谢谢罗杰！

# android - 在后台收听传入的文本

> ID：10354025
> 
> 赞同：2
> 
> 时间：2012-04-27T16:04:15.250
> 
> 标签：android, sms, broadcastreceiver

我试图让我的应用程序以持久的方式监听传入的文本消息。最好的方法是什么？

目前，我有一个正在工作的 BroadcastReceiver，我正在为我的应用程序实现本地服务。以某种方式将 BroadcastReceiver 实施到服务中是正确的方法吗？该服务会在内存不足的情况下工作吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T16:16:46.663

是的，广播接收器是收听传入文本的最佳方式。如果接收到传入的短信，请使用 IntentService 为您的工作您想在接收到的短信上做什么。您可以为传入的短信注册一个接收器：

**清单文件**

```
<receiver class="SMSApp">  
   <intent-filter>  
      <action android:value="android.provider.Telephony.SMS_RECEIVED" />  
     </intent-filter>  
</receiver>  
<uses-permission android:name="android.permission.RECEIVE_SMS" /> 
```

**Java 文件**

```
 public class SMSApp extends BroadcastReceiver{
    private static final String LOG_TAG = "SMSApp"; 
    /* package */
    static final String ACTION = "android.provider.Telephony.SMS_RECEIVED"; 
    public void onReceive(Context context, Intent intent){ 
        if (intent.getAction().equals(ACTION)){ 
          Bundle bundle = intent.getExtras();
          if (bundle != null){
               Object[] pdus = (Object[]) bundle.get("pdus");
               SmsMessage[] messages = new SmsMessage[pdus.length];
               for (int i = 0; i < pdus.length; i++){
                 messages[i] = SmsMessage.createFromPdu((byte[]) pdus[i]);
               }
               for (SmsMessage message : messages){
                    String strFrom = message.getDisplayOriginatingAddress();
                    String strMsg = message.getDisplayMessageBody();
               }
            }    
        } 
    } 
} 
```

**第二种方式**，您可以注册一个[ContentObserver](http://developer.android.com/reference/android/database/ContentObserver.html)以`content://sms/inbox`收听收件箱中的传入短信

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T16:07:53.337

广播接收器不需要启动您的应用程序，因此是收听传入文本的正确方法。

只需确保在清单中注册即可

# css - 过渡在 Opera 中不起作用

> ID：10354028
> 
> 赞同：2
> 
> 时间：2012-04-27T16:04:29.300
> 
> 标签：css, opera, css-transitions

你们知道为什么以下 CSS3 过渡在 Opera 中不起作用，即使使用了 -o-transition ？Firefox 和 IE 10 正确呈现菜单项：

[http://jsfiddle.net/JYLZ3/](http://jsfiddle.net/JYLZ3/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T16:12:36.630

You could try the following syntax instead:

```
-o-transition-property: background-color;
-o-transition-duration: 4s; 
```

I just modified the fiddle and this indeed works in Opera 11.62\. In fact, it appears you could just use the shorthand form, but include `-color` to make it work with Opera:

```
-o-transition: background-color 5s; 
```

Source: [http://dev.opera.com/articles/view/css3-transitions-and-2d-transforms/](http://dev.opera.com/articles/view/css3-transitions-and-2d-transforms/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T20:31:09.190

这在 Opera 12 alpha 中已修复。`-o-transition: background 5s`将工作。

# c# - 将参数传递给控制台应用程序

> ID：10354029
> 
> 赞同：0
> 
> 时间：2012-04-27T16:04:31.013
> 
> 标签：c#, windows, console

我能够使用以下命令成功地将参数传递到控制台应用程序中：

```
ProcessStartInfo psi = new ProcessStartInfo();
psi.FileName = Properties.Settings.Default.EmailBlasterAppPath;

string subject = txtSubject.Text.Replace(@"""", @"""""");
string emailbody = txtEmail.Text.Replace(@"""", @"""""");
string args = String.Format("{0},{1},{2},{3},{4}",
                            "SendPlainEmail",
                            B2BSession.Doctor.DoctorId.ToString(),
                            DocEmail.Trim(), subject, emailbody);

psi.Arguments = args;
psi.UseShellExecute = false;
psi.CreateNoWindow = true;

Process process = Process.Start(psi); 
```

但是，一旦进入控制台应用程序，控制台应用程序只需要将参数作为由空格分隔的单个字符串（见下文）：

```
static void Main(string[] args) 
```

我的问题是我将主题行和电子邮件正文传递到控制台应用程序，但它只获取参数中的第一个单词。因此，如果我传入这样的内容（请注意，“测试主题行”应该是一个参数，“测试正文行”应该是另一个参数）总共 5 个参数：

SendPlainEmail 25498 test@test.com 测试主题行 测试正文行

但是，控制台应用程序会将其解析为具有 9 个参数（每个单词一个）：

SendPlainEmail 25498 test@test.com 测试主题行 测试正文行

有没有办法将参数传递到控制台应用程序中，仅使用 5 个参数，其中主题和正文被视为单个参数？

因此，如您所见，就在 Process.Start 语句之前，psi.arguments 属性中包含的内容。

数据传递正确，只是接收控制台应用程序只能接收由空格分隔的字符串数组。因此，不是第 4 和第 5 个参数分别是“测试主题行”和“测试正文行”，而是控制台应用程序将其处理如下：

args[3] = 测试

args[4] = 主题

args[5] = 行

args[6] = 测试

args[7] = 正文

args[8] = 行

那么，代替这个，我如何将“测试主题行”和“测试主体行”分别视为数组中的一项？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T17:14:29.263

您需要将参数括在引号（`"`）中，所以就像

```
SendPlainEmail 25498 test@test.com "test subject line" "test body line" 
```

否则它不会知道你的主题在哪里结束，你的身体从哪里开始。;)

# php - 通过 PHP 发布到论坛或博客

> ID：10354032
> 
> 赞同：0
> 
> 时间：2012-04-27T16:04:34.917
> 
> 标签：php

这是一个随机的问题，但是，是否可以制作一个 PHP 脚本（或其他基于 Web 的语言）来登录论坛或 wordpress 博客并在那里发帖？我想在各种论坛上登录我自己的帐户，并为每个论坛发布相同的更新。

显然，如果这是不可能的，那么好吧，但我不得不问。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T16:06:50.343

是的，使用 cURL 之类的东西完全有可能。

不，您正在这样做的论坛可能不喜欢它，并且他们可能有验证码或其他东西来防止它。

# c# - MemoryStream 和解密文本文件

> ID：10354035
> 
> 赞同：1
> 
> 时间：2012-04-27T16:04:51.180
> 
> 标签：c#, winforms, cryptography, encryption

我在尝试解密加密的文本文件时遇到了一个奇怪的问题。基本上 .txt 文件的内容是“这是一个测试:)”，当解密输出是“这是一个测试:”时，找出丢失的“）”。

当我一次解密文件一个字节（while循环）时，情况并非如此，但是当使用下面的代码时，它似乎有上述问题。

```
private static void DecryptFile(string inputFile, string outputFile, string skey)
        {
            RijndaelManaged aes = new RijndaelManaged();

            try
            {
                byte[] key = ASCIIEncoding.UTF8.GetBytes(skey);
                byte[] file = File.ReadAllBytes(inputFile);

                using (MemoryStream ms = new MemoryStream())
                {
                        using (CryptoStream cs = new CryptoStream(ms, aes.CreateDecryptor(key, key), CryptoStreamMode.Write))
                        {
                            cs.Write(file, 0, file.Length);

                            File.WriteAllBytes(outputFile, ms.ToArray());
                            aes.Clear();
                        }
                }

            }
            catch (Exception ex)
            {
                Console.WriteLine(ex.Message);
                aes.Clear();
            }
        } 
```

请原谅草率的代码，它只是用于测试目的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T16:10:58.797

块密码 CryptoStream 只能加密或解密固定块大小的内容。你没有给它足够的内容来填充最后一个块，所以它正在等待更多。这个部分不完整的块正在丢失。

您要么需要在 CryptoStream 上调用[FlushFinalBlock](http://msdn.microsoft.com/en-us/library/system.security.cryptography.cryptostream.flushfinalblock.aspx)，要么不在其范围内，`using`以便它自动关闭它。那么你的 MemoryStream 应该包含缺失的字符。

请注意，在解密时，您的输出现在将被四舍五入到一个完整的块，即您将获得额外的零填充数据的末尾。

# javascript - 调用 Web 服务时的 ASP.NET Windows 身份验证框

> ID：10354041
> 
> 赞同：1
> 
> 时间：2012-04-27T16:05:14.487
> 
> 标签：javascript, asp.net, web-services, authentication

Got a very strange issue, never seen it before. Basically in the admin section of our website, a user attempts to edit something by clicking a button.

This button attempts to call a webservice (via jquery, which the page will then use to show an edit form in shadowbox).

However the user informs me that instead of the form popping up as usual it is blank for a few seconds. Then this pops up:

![在此处输入图像描述](../Images/058aec1ff1281c2260e2053ef3f3e362.png)

Any ideas? The webservice is in the admin section, which requires the user to be in a role (which the user is, otherwise they would never get to the point of being able to click the edit button).

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T16:11:57.520

This is normal if your web service is located on a different machine as your web server.

If the two machines are on the same domain, then the browser will attempt to use the default network credentials that has been cached.

This dialog will also pop up if the default credentials used to access the web server (which could be anonymous) does not have access to the resource (folder) where the web service is running. The pop up gives the user an opportunity to enter another set of credentials.

# c#-4.0 - 检测 EntityFrameWork 中的变化

> ID：10354042
> 
> 赞同：0
> 
> 时间：2012-04-27T16:05:16.167
> 
> 标签：c#-4.0, entity-framework-4

在我当前的项目中，我需要在表格中写入应用程序中的所有值。前任。这家伙更新了用户名，我需要在表中输入用户名旧值“1”新值“2”。

我尝试使用 ObjectStateEntry 但这会返回所有字段。我认为固件返回全部是因为我的代码。

```
public USER Save(USER obj) 
        {
            using(TPPTEntities db = new TPPTEntities())
            {
                db.Connection.Open();
                USER o = (from n in db.USERs where n.ID == obj.ID select n).FirstOrDefault();
                if (o == null)
                {
                    o = new USER()
                    {
                        BruteForce = 0,
                        Email = obj.Email,
                        IsBlock = false,
                        LastLogin = DateTime.Now,
                        Name = obj.Name,
                        UserName = obj.UserName,
                        UserPassword = new byte[0],

                    };
                    db.AddToUSERs(o);
                }
                else
                {
                    o.Email = obj.Email;
                    o.Name = obj.Name;
                    o.UserName = obj.UserName;

                }
                db.SaveChanges();
                db.Connection.Close();
            }
            return obj;
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T15:11:03.077

获取新旧值的一种方法是：

```
var ose = this.ObjectStateManager.GetObjectStateEntry(o.EntityKey);
foreach (string propName in ose.GetModifiedProperties())
{
    string.Format("Property '{0}', old value: {1}, new value: {2}",
        propName, ose.OriginalValues[propName], ose.CurrentValues[propName]);
} 
```

当然，这没什么用，但我相信你会知道在`foreach`循环中要做什么来存储更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T16:28:33.070

这是 WCF 服务吗？在这种情况下，更改可能永远不会发生，因为对对象图的更改是在对象上下文不可用的情况下进行的。考虑使用自我跟踪实体

# javascript - JQuery基本表单帖子

> ID：10354043
> 
> 赞同：1
> 
> 时间：2012-04-27T16:05:22.557
> 
> 标签：javascript, jquery

我正在验证表单，但是当验证未通过时，它仍然会发布表单。我该如何防止这种情况？

```
<form action="/Account/Registration" method="get">
           <fieldset id="enterCode">
                <ul>
                    <li class="inputBlock">
                        <input type="text" id="Code" name="Code" value="">

                    </li>
                </ul>

            </fieldset>
            <div class="submitBlock">
                <input type="submit" value="Send" class="button" onclick="validate();" />
            </div>
        </form>

        <script type="text/javascript">
            function validate() {

                var val = $('#Code').val();

                if (val == "") {
                    alert("Please enter code");
                }

                return false;

                }

        </script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T16:11:04.367

我会这样做：

```
 <form action="/Account/Registration" method="get" id="registrationForm">
       <fieldset id="enterCode">
            <ul>
                <li class="inputBlock">
                    <input type="text" id="Code" name="Code" value="">

                </li>
            </ul>

        </fieldset>
        <div class="submitBlock">
            <input type="submit" value="Send" class="button" id="submitButton" />
        </div>
    </form>

    <script type="text/javascript">
        $(function(){
          $('#submitButton').click(function(e){ 
             e.preventDefault();
             var val = $('#Code').val();
             if (val.length > 0) {
                 $('#registrationForm').submit();
              }

          });
        });
    </script> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T16:22:24.783

您需要停止触发提交事件，或者在触发它时，通过在该事件而不是按钮的单击事件上返回 false 来停止它。您可以更改提交按钮的行为方式，例如 bunting 的示例，或者将提交事件绑定到表单本身。

```
<form action="/Account/Registration" method="get" id="registrationForm">
   <fieldset id="enterCode">
        <ul>
            <li class="inputBlock">
                <input type="text" id="Code" name="Code" value="">

            </li>
        </ul>

    </fieldset>
    <div class="submitBlock">
        <input type="submit" value="Send" class="button" />
    </div>
</form>

<script type="text/javascript">
    $(document).ready(function () {
        $('#registrationForm').submit(function () {
            var val = $('#Code').val();
            if (val == "") {
                alert("Please enter code");
                return false;
            }
            return true;
        });
    });
</script> 
```

# iphone - UDPEcho or C Code?

> ID：10354046
> 
> 赞同：0
> 
> 时间：2012-04-27T16:05:34.383
> 
> 标签：iphone, objective-c, c, sockets, udp

Im making an iPhone application that sends commands and retrieves data through an UDP connection.

我有一个问题，因为我[之前的问题没有得到回答](https://stackoverflow.com/questions/10313278/receiving-data-from-udp-server-on-ios-app-is-not-working-from-linux-server-but)，而且我现在无法修复它，我正在寻找其他两种方法来实现 UDP 连接。

1.  UDP回声
2.  C代码

哪个更好[优点/缺点]，哪个更容易或建议将其实现到 iphone 应用程序中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T17:40:39.247

[UDPEcho](http://developer.apple.com/library/mac/#samplecode/UDPEcho/Introduction/Intro.html#//apple_ref/doc/uid/DTS40009660-Intro-DontLinkElementID_2)已经为您设置了 iOS 项目，因此除非您之后需要将您的应用程序移植到其他平台，否则与 C 代码相比，这将给您一个先机。

# linux - Ciphertext-Policy Attribute-Based Encryption toolkit "make" libgmp 错误

> ID：10354053
> 
> 赞同：1
> 
> 时间：2012-04-27T16:05:52.890
> 
> 标签：linux, makefile, cryptoapi

尝试在 Ubuntu 12.04（64 位）上“制作”cpabe-0.11[工具包/库时出现以下错误。](http://acsc.cs.utexas.edu/cpabe/)所有必需的库，包括 libgmp，都已正确安装在系统中。

```
/usr/bin/ld: /usr/lib/gcc/x86_64-linux-gnu/4.6.1/../../../../lib/libpbc.so: undefined reference to symbol '__gmpz_clear'
/usr/bin/ld: note: '__gmpz_clear' is defined in DSO /usr/lib/libgmp.so.3 so try adding it to the linker command line
/usr/lib/libgmp.so.3: could not read symbols: Invalid operation
collect2: ld returned 1 exit status
make: *** [cpabe-setup] Error 1 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T12:28:51.010

所以我终于解决了这个问题。基本上我得到了错误 bcz 由于某种原因 libgmp 没有在 make 中链接（这就是错误的意思）。但是当我检查通过运行 ./configure 创建的 Makefile 时，它​​说：-

```
...blah blah blah ...
LDFLAGS = -O3 -Wall \
        -lglib-2.0   \
        -Wl,-rpath /usr/local/lib -lgmp \
        -Wl,-rpath /usr/local/lib -lpbc \
        -lbswabe \
        -lcrypto -lcrypto
... blah blah blah ... 
```

如您所见，LDFLAGS 中提到了 libgmp。如此多的混乱随之而来。一时兴起，它尝试了对 Makefile 的以下修改：-

```
LDFLAGS = -O3 -Wall \
        -lglib-2.0   \
        -Wl,-rpath /usr/local/lib -lgmp \
        -Wl,-rpath /usr/local/lib -lpbc \
        -lbswabe \
        -lcrypto -lcrypto \
        -lgmp 
```

所以现在，由于某种奇怪的原因，它编译得很好。

# php - PHP 使用 loadXML 和 loadHTML 检索站点上的所有链接

> ID：10354055
> 
> 赞同：0
> 
> 时间：2012-04-27T16:05:57.153
> 
> 标签：php, regex, domdocument

我正在使用 cUrl 提取网站的内容。然后我想浏览所有内容并获取所有超链接（仅限锚标签），我没有太多运气使用正则表达式，并被指向 loadXML(contents) 和 loadHTML(contents) 方向。对于初学者，我不确定我正在检查的网站是 XHTML (loadXML) 还是纯 html，在这种情况下我会使用 HTML，而且当我使用任何一种时，我都会收到诸如“开始和结束标签不匹配”之类的错误。我按照其他人的建议尝试了 strictErrorChecking = FALSE 和 libxml_use_internal_errors(true) ，还尝试了 tidy_parse_string ，但这没有返回任何内容。只是想知道是否有人有类似的问题或知道另一种方法，也许有一个简单的正则表达式来获取所有超链接？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T16:51:04.813

那是一条漫长的路……你为什么不直接使用`file_get_html` [http://simplehtmldom.sourceforge.net](http://simplehtmldom.sourceforge.net)

例子

```
include 'simple_html_dom.php';
$url = "http://php.net/";
$html = file_get_html ( $url );
echo "<pre>";
foreach ( $html->find ( 'a' ) as $element ) {
    $link = $element->href;
    $link = ltrim ( $link, "/" );

    if (!preg_match ( "/http/i", $link )) {
        $link = $url . $link;
    }
    echo $link . PHP_EOL;
    flush ();
} 
```

输出

```
http://php.net/
http://php.net/downloads.php
http://php.net/docs.php
http://php.net/FAQ.php
http://php.net/support.php
http://php.net/mailing-lists.php
http://php.net/license
https://wiki.php.net/
https://bugs.php.net/
http://php.net/sites.php
http://php.net/links.php
http://php.net/conferences/
http://php.net/my.php
http://php.net/tut.php
http://php.net/docs.php
http://php.net/links.php
http://php.net/usage.php
http://php.net/thanks.php
http://www.easydns.com/?V=698570efeb62a6e2
http://www.directi.com/
http://promote.pair.com/direct.pl?php.net
http://www.servercentral.net/
http://www.hostedsolutions.com/
http://www.spry.com/
http://www.osuosl.org
http://www.yahoo.com/
http://www.nexcess.net/
http://www.rackspace.com/
http://www.eukhost.com/
http://www.sohosted.nl/webhosting/
http://www.redpill-linpro.com
http://www.facebook.com
http://krystal.co.uk
http://servergrove.com/
http://www.bauer-kirch.de/
http://www.apache.org/
http://www.mysql.com/
http://www.postgresql.org/
http://www.zend.com/
http://www.linuxfund.org/
http://ostg.com/
http://php.net/feed.atom
http://php.net/downloads.php#v5
http://php.net/downloads.php#v5
http://php.net/submit-event.php
http://php.net/cal.php?id=2662
http://php.net/cal.php?id=3422
http://php.net/cal.php?id=4019
http://php.net/cal.php?id=1099
http://php.net/cal.php?id=4767
http://php.net/cal.php?id=1745
http://php.net/cal.php?id=1860
http://php.net/cal.php?id=2301
http://php.net/cal.php?id=2814
http://php.net/cal.php?id=3294
http://php.net/cal.php?id=2352
http://php.net/cal.php?id=2682
http://php.net/cal.php?id=3793
http://php.net/cal.php?id=109
http://php.net/cal.php?id=272
http://php.net/cal.php?id=561
http://php.net/cal.php?id=1005
http://php.net/cal.php?id=1304
http://php.net/cal.php?id=1624
http://php.net/cal.php?id=1632
http://php.net/cal.php?id=1706
http://php.net/cal.php?id=1918
http://php.net/cal.php?id=2017
http://php.net/cal.php?id=2418
http://php.net/cal.php?id=2734
http://php.net/cal.php?id=2932
http://php.net/cal.php?id=3416
http://php.net/cal.php?id=3861
http://php.net/cal.php?id=4014
http://php.net/cal.php?id=4147
http://php.net/cal.php?id=4799
http://php.net/cal.php?id=153
http://php.net/cal.php?id=2663
http://php.net/cal.php?id=1923
http://php.net/cal.php?id=2540
http://php.net/cal.php?id=4720
http://php.net/cal.php?id=1385
http://php.net/cal.php?id=1523
http://php.net/cal.php?id=1670
http://php.net/cal.php?id=1652
http://php.net/cal.php?id=1665
http://php.net/cal.php?id=1847
http://php.net/cal.php?id=3643
http://php.net/cal.php?id=3980
http://php.net/cal.php?id=4222
http://php.net/cal.php?id=4511
http://php.net/cal.php?id=1395
http://php.net/cal.php?id=3684
http://php.net/cal.php?id=4512
http://php.net/cal.php?id=4751
http://php.net/cal.php?id=5017
http://php.net/cal.php?id=5212
http://php.net/cal.php?id=1848
http://php.net/cal.php?id=1946
http://php.net/cal.php?id=4636
http://php.net/cal.php?id=1732
http://php.net/cal.php?id=2580
http://php.net/cal.php?id=3722
http://php.net/cal.php?id=4258
http://php.net/cal.php?id=3760
http://php.net/cal.php?id=4308
http://php.net/cal.php?id=2246
http://php.net/cal.php?id=3708
http://php.net/cal.php?id=3761
http://php.net/cal.php?id=4725
http://php.net/cal.php?id=5222
http://php.net/cal.php?id=1545
http://php.net/cal.php?id=1546
http://php.net/cal.php?id=2208
http://php.net/cal.php?id=3925
http://php.net/cal.php?id=1704
http://php.net/cal.php?id=1719
http://php.net/cal.php?id=1820
http://php.net/cal.php?id=4507
http://php.net/cal.php?id=5092
http://php.net/cal.php?id=1131
http://php.net/cal.php?id=1346
http://php.net/cal.php?id=1671
http://php.net/cal.php?id=2449
http://php.net/cal.php?id=409
http://php.net/cal.php?id=384
http://php.net/cal.php?id=3075
http://php.net/cal.php?id=3653
http://php.net/cal.php?id=5135
http://php.net/cal.php?id=4256
http://php.net/cal.php?id=5052
http://php.net/cal.php?id=2662
http://php.net/cal.php?id=3422
http://php.net/cal.php?id=4019
http://php.net/cal.php?id=1099
http://php.net/cal.php?id=4648
http://php.net/cal.php?id=4767
http://php.net/cal.php?id=2527
http://php.net/cal.php?id=2600
http://php.net/cal.php?id=2660
http://php.net/cal.php?id=4626
http://php.net/cal.php?id=5276
http://php.net/cal.php?id=2500
http://php.net/cal.php?id=4922
http://php.net/cal.php?id=1316
http://php.net/cal.php?id=1708
http://php.net/cal.php?id=2499
http://php.net/cal.php?id=841
http://php.net/cal.php?id=1490
http://php.net/cal.php?id=5187
http://php.net/cal.php?id=2144
http://php.net/cal.php?id=3703
http://php.net/cal.php?id=5289
http://php.net/cal.php?id=5305
http://php.net/cal.php?id=1516
http://php.net/cal.php?id=2702
http://php.net/cal.php?id=3560
http://php.net/cal.php?id=2023
http://php.net/cal.php?id=4230
http://php.net/cal.php?id=338
http://php.net/cal.php?id=456
http://php.net/cal.php?id=641
http://php.net/cal.php?id=998
http://php.net/cal.php?id=1198
http://php.net/cal.php?id=1360
http://php.net/cal.php?id=1981
http://php.net/cal.php?id=2051
http://php.net/cal.php?id=3053
http://php.net/cal.php?id=5193
http://php.net/cal.php?id=5190
http://php.net/cal.php?id=5191
http://php.net/cal.php?id=5188
http://php.net/cal.php?id=5186
http://php.net/cal.php?id=5185
http://php.net/cal.php?id=5184
http://php.net/cal.php?id=5298
http://php.net/cal.php?id=5308
http://php.net/cal.php?id=3385
http://php.net/cal.php?id=3386
http://php.net/cal.php?id=1466
http://php.net/cal.php?id=1583
http://php.net/cal.php?id=5125
http://php.net/cal.php?id=5228
http://php.net/cal.php?id=5194
http://php.net/cal.php?id=5251
http://php.net/cal.php?id=1389
http://php.net/cal.php?id=2408
http://php.net/cal.php?id=1200
http://php.net/cal.php?id=2589
http://php.net/cal.php?id=5247
http://php.net/cal.php?id=5279
http://php.net/cal.php?id=5303
http://php.net/cal.php?id=231
http://php.net/cal.php?id=5192
http://php.net/cal.php?id=5309
http://php.net/cal.php?id=1137
http://php.net/cal.php?id=4220
http://www.php.net/conferences/index.php#id2012-01-20-1
http://www.php.net/conferences/index.php#id2011-12-23-1
http://www.php.net/conferences/index.php#id2012-02-09-1
http://www.php.net/archive/2012.php#id2012-04-26-1
http://php.net/ChangeLog-5.php
http://php.net/downloads.php
http://windows.php.net/download/
http://www.php.net/archive/2012.php#id2012-04-13-1
http://qa.php.net
http://windows.php.net/qa/
http://git.php.net/?p=php-src.git;a=blob;f=NEWS;h=d647f8de7cf080b599a73e092d683273fbf744e8;hb=fa1437b144683eae4d253473c35e375f7b743811
http://php.net/mailto:php-qa@lists.php.net
https://bugs.php.net/
http://www.php.net/archive/2012.php#id2012-03-20-1
https://github.com/php/php-src
http://git.php.net/
http://php.net/git
https://wiki.php.net/vcs/gitfaq
http://www.php.net/archive/2012.php#id2012-03-01-1
http://php.net/downloads.php#v5.4.0
http://php.net/traits
http://docs.php.net/manual/en/language.types.array.php
http://php.net/manual/en/features.commandline.webserver.php
http://php.net/migration54
http://php.net/downloads.php#v5.4.0
http://php.net/downloads.php#v5.4.0
http://php.net/releases/5_4_0.php
http://php.net/ChangeLog-5.php
http://www.php.net/archive/2012.php#id2012-02-02-1
http://php.net/downloads.php
http://windows.php.net/download/
http://php.net/archive/index.php
http://php.net/feed.atom
http://php.net/source.php?url=/index.php
http://php.net/credits.php
http://php.net/stats/
http://php.net/sitemap.php
http://php.net/contact.php
http://php.net/contact.php#ads
http://php.net/mirrors.php
http://php.net/copyright.php
http://php.net/mirror.php
http://developer.yahoo.com/ 
```

# javascript - Handlebars.js：是否可以将多个哈希作为参数传递给 Handlebars 助手？

> ID：10354057
> 
> 赞同：2
> 
> 时间：2012-04-27T16:06:03.790
> 
> 标签：javascript, template-engine, handlebars.js

假设我已经声明了以下助手

```
Handlebars.registerHelper("linkTo", function(request, params) {
    return window.linkTo(request, params);
}); 
```

我怎么能（如果可能的话）在视图中做这样的事情（语法不正确，只是为了展示）

```
<a href="{{link_to module='products' controller='view', product=product.id artist= artist.id}}">foo</a> 
```

逗号只是表示两个哈希之间的分隔。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T22:05:06.150

**不，由于Handlebars.js**使用参数的方式，它不能分隔多个散列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T16:55:09.973

如果您可以看到将参数放入可以作为对象文字的一部分传递的结构的方法，那么我知道这将起作用。例如：

```
{ 
  "params" : {
    "module" : "products",
    "controller" : "view",
    "product" : 5,
    "artist" : 25
  }
} 
```

加上这个助手：

```
Handlebars.registerHelper("link_to", function(params) {
  var result = "";
  var insertAmpersand = false;

  for (var prop in params) {
      if (insertAmpersand) {
          result += "&";
      } else {
          insertAmpersand = true;
      }

      result += prop + "=" + params[prop];
  }
  return result;
}); 
```

可以这样调用：

```
{{link_to params}} 
```

生成：

```
module=products&controller=view&product=5&artist=25 
```

显然，您希望对其进行改进，以便事物周围有正确的引号等。但是这样的东西对您有用吗？

# jquery - jquery 进行选择

> ID：10354058
> 
> 赞同：1
> 
> 时间：2012-04-27T16:06:04.517
> 
> 标签：jquery

我有一个下拉菜单。选择之一是请输入。

我如何强制它转到请输入

选择列表的 id 称为 makeSelection

```
 $('select.makeSelection').val("Please Enter").attr('selected', 'selected'); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T16:12:03.740

```
$("#makeselection option[value='Press Enter']").prop('selected', 'selected'); 
```

对于 jQuery 1.6，您可以使用

```
$("#makeselection option[value='Press Enter']").attr('selected', 'selected'); 
```

[演示](http://jsfiddle.net/mprabhat/VvJrx/)

编辑：类似[的帖子](https://stackoverflow.com/questions/149573/check-if-option-is-selected-with-jquery-if-not-select-a-default)

您甚至可能对[为什么使用 Prop 和 Attr感兴趣](https://stackoverflow.com/questions/5874652/prop-vs-attr)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T16:08:32.090

如果 makeSelection 是 Id，则只有一个，所以

```
 $('#makeSelection').val("Please Enter").attr('selected', 'selected'); 
```

足够。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T16:09:45.253

将您的选择器更改为：

`$('#makeSelection').val("Please Enter").attr('selected', 'selected');`

[jsFiddle](http://jsfiddle.net/senoramor/bNG4S/)

# java - 如何避免相机在四元数旋转时翻转？

> ID：10354059
> 
> 赞同：2
> 
> 时间：2012-04-27T16:06:06.003
> 
> 标签：java, opengl, rotation, jogl, quaternions

我有一台使用四元数围绕固定点运行的相机。问题在于，当相机围绕 x 轴旋转并越过极点时，相机将翻转并产生镜像图像。这是有道理的，因为相机面向相反的方向，但相机的向上矢量没有改变。显然，需要从外观向量和右向量计算一个新的向上向量，但我似乎无法让它工作。注意：这使用[http://commons.apache.org/math/api-2.2/org/apache/commons/math/geometry/Rotation.html](http://commons.apache.org/math/api-2.2/org/apache/commons/math/geometry/Rotation.html)来表示四元数。

无论如何，我正在使用以下基本程序来旋转相机。

旋转四元数初始化为恒等式 [1, 0, 0, 0]：

```
private Rotation total = Rotation.IDENTITY; 
```

并且相机的向上向量初始化为：

```
private Vector3D up = new Vector3D(0, 1, 0); 
```

旋转是通过将相机的当前旋转存储为四元数，然后对该四元数应用任何后续旋转来完成的，然后使用组合的四元数（总）来旋转相机的位置。以下代码描述了此过程：

```
/**
 * Rotates the camera by combining the current rotation (total) with any new axis/angle representation of a new rotation (newAxis, rotation).
 */
public void rotateCamera() {
    if (rotation != 0) {
        //Construct quaternion from the new rotation:
        Rotation local = new Rotation(Math.cos(rotation/2), Math.sin(rotation/2) * newAxis.getX(), Math.sin(rotation/2) * newAxis.getY(), Math.sin(rotation/2) * newAxis.getZ(), true);

        //Generate new camera rotation quaternion from current rotation quaternion and new rotation quaternion:
        total = total.applyTo(local);

        //Rotate the position of the camera using the camera rotation quaternion:
        cam = rotateVector(local, cam);

        //rotation is complete so set the next rotation to 0
        rotation = 0;
    }
}

/**
 * Rotate a vector around a quaternion rotation.
 * 
 * @param rotation The quaternion rotation.
 * @param vector A vector to be rotated.
 * @return The rotated vector.
 */
public Vector3D rotateVector(Rotation rotation, Vector3D vector) {
    //set world centre to origin, i.e. (width/2, height/2, 0) to (0, 0, 0)
    vector = new Vector3D(vector.getX() - width/2, vector.getY() - height/2, vector.getZ());

    //rotate vector
    vector = rotation.applyTo(vector);

    //set vector in world coordinates, i.e. (0, 0, 0) to (width/2, height/2, 0) 
    return new Vector3D(vector.getX() + width/2, vector.getY() + height/2, vector.getZ());
} 
```

存储任何新旋转的轴/角度的字段 newAxis 和 rotation 由按键生成，如下所示：

```
@Override
public void keyPressed(KeyEvent e) {
    if (e.getKeyCode() == KeyEvent.VK_W) {
        camera.setAxis(new Vector3D(1, 0, 0));
        camera.setRotation(0.1);
    }
    if (e.getKeyCode() == KeyEvent.VK_A) {
        camera.setAxis(new Vector3D(0, 1, 0));
        camera.setRotation(0.1);
    }
    if (e.getKeyCode() == KeyEvent.VK_S) {
        camera.setAxis(new Vector3D(1, 0, 0));
        camera.setRotation(-0.1);
    }
    if (e.getKeyCode() == KeyEvent.VK_D) {
        camera.setAxis(new Vector3D(0, 1, 0));
        camera.setRotation(-0.1);
    }
} 
```

在每个渲染循环期间，都会调用 rotateCamera() 方法，然后以下代码设置相机：

```
glu.gluLookAt(camera.getCam().getX(), camera.getCam().getY(), camera.getCam().getZ(), camera.getView().getX(), camera.getView().getY(), camera.getView().getZ(), 0, 1, 0); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T03:28:00.690

你在做一些奇怪的事情。一个单位四元数代表一个完整的方向。您通常不会使用“向上”向量。但是......看起来你只需使用一个恒定的“向上”向量 [0,1,0] 而不是从四元数中获取它，就可以获得你想要的效果。

听起来你真的不需要四元数。您想要的是 [0,1,0] 的恒定“向上”向量。然后你想要一个“at”点，它始终是你正在绕行的点。然后，您想要一个可以围绕 y 轴或围绕由您的“向上”向量与您的轨道点和'眼'点。

# wpf - 创建 ListBoxItem 属性

> ID：10354061
> 
> 赞同：0
> 
> 时间：2012-04-27T16:06:27.357
> 
> 标签：wpf, properties, triggers, listbox, datatemplate

我有两个列表框和一个按钮。Button 将 List1.SelectedItems 发送到 List2。我想为 List1 中已添加到 List2 的项目添加视觉提示，类似于选择项目时的视觉提示。是否可以向它们添加属性以便完成此操作？

```
 _______             _______
|       |     _     |       |
| List1 |    |>|    | List2 |
|_______|           |_______| 
```

下面是使用 IsSelected 属性修改背景的示例。

```
<DataTemplate.Triggers> 
    <Trigger Property="IsSelected" Value="True"> 
        <Setter TargetName="listItem" Property="Background" Value="Blue" /> 
    </Trigger> 
</DataTemplate.Triggers> 
```

我想添加一个名为“IsAdded”的附加属性，如果设置为 True，它也会影响背景。这样的事情是否可能，或者是否有替代方法？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T18:28:23.960

我希望你使用`ViewModel`类，或类似的来代表你的项目。您需要的 - 是将属性 IsAdded 添加到项目类中，并且，当您处理`Button.Click`事件时（或者更好的是 - 您`ViewModel`的`ICommand`属性将 List1 中的选定项目插入到 List2 中），您可以对添加到的选定项目感到难过添加了它们所在的 List2。

```
private bool isAdded;
public bool IsAdded
{
    get { return isAdded; }
    set
    {
        if (isAdded == value)
            return;
        isAdded = value;
        OnPropertyChanged("IsAdded");
    }
} 
```

where`OnPropertyChanged`方法将引发接口`PropertyChanged`事件（[请参阅 msdn 文章](http://msdn.microsoft.com/en-US/library/system.componentmodel.inotifypropertychanged.aspx)）。`INotifyPropertyChanged`

当你处理 时`Button.Click`，你知道要添加哪些元素，所以把这行代码放在那里：

```
...
foreach(var item in List1.SelectedItems)
{
    item.IsAdded = true;
}
... 
```

`DataTemplate.Triggers`然后，将以下触发器添加到您的集合中：

```
<DataTrigger Binding="{Binding Path=IsAdded, Mode=OneWay}" Value="True">
    <Setter TargetName="listItem" Property="Background" Value="Red" />
</DataTrigger> 
```

# gdb - 如何在 gdb 中使用具有 FS 或 GS 基数的逻辑地址？

> ID：10354063
> 
> 赞同：14
> 
> 时间：2012-04-27T16:06:35.633
> 
> 标签：gdb, x86, memory-segmentation

gdb 提供读取或写入特定*线性地址*的功能，例如：

```
(gdb) x/1wx 0x080483e4
0x80483e4 <main>:       0x83e58955
(gdb) 
```

但是你如何指定一个逻辑地址？我遇到了以下说明：

```
 0x0804841a <+6>:     mov    %gs:0x14,%eax 
```

如何在 gdb 中读取“%gs:0x14”处的内存，或者将这个逻辑地址转换为我可以在`x`命令中使用的线性地址？

注意：我知道在这条指令之后我可以简单地阅读 %eax，但这不是我关心的问题

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-28T17:56:53.320

> 我如何在 gdb 中读取“%gs:0x14”的内存

你不能：GDB 无法知道所`%gs`引用的段是如何设置的。

> 或将此逻辑地址转换为我可以在 x 命令中使用的线性地址

同样，您通常不能这样做。但是，您似乎在 32 位 x86 Linux 上，您*可以*在其中执行此操作 -设置为通过系统调用`%gs`指向线程描述符。`set_thread_area`

你可以`catch syscall set_thread_area`在 GDB 中做，并检查参数（每个线程都会有一个这样的调用）。实际执行此操作的代码在[这里](http://repo.or.cz/w/glibc.git/blob/HEAD:/nptl/sysdeps/i386/tls.h#l230)。一旦你知道如何`%gs`设置，只需将 0x14 添加到`base_addr`，就完成了。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2021-06-19T22:31:17.857

正如[使用 GDB 读取 MSR](https://stackoverflow.com/questions/23095665/using-gdb-to-read-msrs)中所回答的那样，这可以通过 gdb 8 使用寄存器`$fs_base`和`$gs_base`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-01-31T20:12:19.393

我认为最简单的方法是读取 EAX 寄存器的内容，因为您可以看到 %gs:0x14 的值已移至 EAX。

在 GDB 中，在 0x0804841a 之后的地址处设置断点并使用 break。例如

```
break *0x0804841e 
```

然后运行程序，你可以打印 EAX 寄存器的内容

```
info registers eax 
```

# jquery - jquery Tipsy触发手动切换

> ID：10354065
> 
> 赞同：1
> 
> 时间：2012-04-27T16:06:38.347
> 
> 标签：jquery, tipsy

Tipsy 是很棒的 jQuery 工具提示插件，例如 facebook。这适用于许多选项，但我现在需要在工具提示中打印 mypage 的链接（rel 方法）正文或外部工具提示/隐藏工具提示隐藏。在醉酒文档（***手动触发示例***）中，如果我们将其更改为 1 个链接（工具/单击显示/单击隐藏）或更改正文/外部的单击，则仅触发显示/隐藏链接（2 个链接）的链接，我认为我的问题已解决。这个解决方案/问题的任何方法？谢谢

触发提示：

```
<div class='caption'>Manual triggering example:</div>
<div id='manual-example' class='example'>
<a rel='tipsy' title='Well hello there'>My tooltip is manually triggered</a> |
<a href='#' onclick='$("#manual-example a[rel=tipsy]").tipsy("show"); return false;'>Show it</a> |
<a href='#' onclick='$("#manual-example a[rel=tipsy]").tipsy("hide"); return false;'>Hide it</a>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-10T15:20:32.690

您可以使用此代码在状态之间切换：

```
var el = $('#manual-example a[rel=tipsy]').tipsy({trigger: 'manual'});
$('#toggleIt').click(function(e){
    e.preventDefault();
    if($('.tipsy').length == 0){
        el.tipsy('show');
    }else{
        el.tipsy('hide');        
    }
}); 
```

[JSFIDDLE](http://jsfiddle.net/rFvfz/)

# .net - 使用 VB .net 从 Sqlserver db 检索记录

> ID：10354068
> 
> 赞同：0
> 
> 时间：2012-04-27T16:06:47.643
> 
> 标签：.net, sql-server, vb.net, ado.net

这是我正在使用的内容：

```
Dim connstr = "data source=mydatasource;initial catalog=gcs_dw;persist security   info=True;user id=myuser;password=mypassword;Asynchronous Processing=True"
Dim sqlquery = "SELECT * FROM Customer WHERE CITY = 'Anytown'"
Dim connection As SqlConnection = New SqlConnection(connstr)
connection.Open()

Dim command As SqlCommand = connection.CreateCommand()
command.CommandText = sqlquery
Dim reader As SqlDataReader = command.ExecuteReader()
reader.Read()
Console.WriteLine(reader.ToString)
connection.Close()
Console.Read() 
```

如您所见，我正在尝试将查询结果显示到命令行，目前它显示的只是“System.Data.SqlClient.SqlDataReader”。我的 sql 查询的结果在哪里，为什么我不能检索它们？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-27T16:10:00.530

这就是问题：

```
Console.WriteLine(reader.ToString) 
```

您`ToString`直接调用阅读器，而不是从当前行中询问特定值。就像是：

```
Console.WriteLine(reader.GetString(0)) 
```

应该没事。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T10:33:01.047

```
Dim str As String

Dim myConn As SqlConnection = New SqlConnection("Server=(local)\netsdk;" & _
                                                "uid=sa;pwd=;database=master")

str = "CREATE DATABASE MyDatabase ON PRIMARY " & _
      "(NAME = MyDatabase_Data, " & _
      " FILENAME = 'D:\MyFolder\MyDatabaseData.mdf', " & _
      " SIZE = 2MB, " & _
      " MAXSIZE = 10MB, " & _
      " FILEGROWTH = 10%) " & _
      " LOG ON " & _
      "(NAME = MyDatabase_Log, " & _
      " FILENAME = 'D:\MyFolder\MyDatabaseLog.ldf', " & _
      " SIZE = 1MB, " & _
      " MAXSIZE = 5MB, " & _
      " FILEGROWTH = 10%) "

Dim myCommand As SqlCommand = New SqlCommand(str, myConn)

Try
    myConn.Open()
    myCommand.ExecuteNonQuery()
    MessageBox.Show("Database is created successfully", _
                    "MyProgram", MessageBoxButtons.OK, _
                     MessageBoxIcon.Information)
   Catch ex As Exception
       MessageBox.Show(ex.ToString())
   Finally
       If (myConn.State = ConnectionState.Open) Then
           myConn.Close()
       End If
   End Try 
```

结束子

# vb.net - 实体框架更新声明

> ID：10354071
> 
> 赞同：0
> 
> 时间：2012-04-27T16:06:55.010
> 
> 标签：vb.net, asp.net-mvc-3, entity-framework-4.3

我正在尝试根据用户选择更新特定记录。关于实体框架语法，我不是很熟悉。是否可以在 Entity FrameWork 中实现这条 SQL 语句？

谢谢！

```
 update Table1
  set Colum1='1'
  where Column2='1234567' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T16:10:00.360

```
var record = _db.Table1.where(r => r.Column2 == '1234567');
record.Column1 = '1'
_db.SaveChanges(); 
```

其中 _db 是实体框架 DbContext 类...

HTH。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T16:10:18.253

是的，Linq 版本：

```
Table1Entity entity = from e in dbContext.Table1Entitys
                      where e.Column2 = '1234567'
                      select e

entity.Column1 = '1';
dbContext.SaveChanges(); 
```

并且看起来 Sunny 有[Lambda 版本](https://stackoverflow.com/a/10354126/209259)。

但是，这和 Sunny 的答案都没有产生确切的 SQL，因为它们实际上都产生了一个 SELECT 和一个 UPDATE：

```
SELECT <all columns>
FROM <table>
WHERE Column2 = '1234567'

UPDATE <table>
SET <allcolumns> = <allvalues>, etc etc
WHERE Column2 = '1234567' 
```

如果您只想更新，那么您将执行以下操作：

```
var row = new Row();
// assuming a single column PK (id)
row.Column1 = '1';
row.Column2 = '1234567';
dbContext.Attach(row);
var entity = dbContext.Entity(entity);
entity.Property(e => e.Column2).IsModified = true;
dbContext.SaveChanges(); 
```

准确地产生：

```
UPDATE <Table>
SET Column2 = '1234567'
WHERE Column1 = '1' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T16:12:45.033

// 注意：ctx = 你的 DbContext

```
 var tbl1 = (from t in ctx.Table1 where t.Id == 1234567 select t).FirstOrDefault();
  if (tbl1 != null) {
      tbl1.Column1 = "1";
      ctx.SaveChanges();

  } 
```

# ruby-on-rails - Ruby-on-Rails Web 应用程序前端开发的常见做法是什么？

> ID：10354073
> 
> 赞同：0
> 
> 时间：2012-04-27T16:07:01.553
> 
> 标签：ruby-on-rails, frontend

在一个 Rails Web 应用程序项目中，我被指派为企业客户开发前端，该前端将包含丰富的动态表单（用户将能够在表单中添加元素/组件）和图表。我的前端经验有限，所以我想听听非常有经验的前端开发人员的最新实践，比如“使用这个 JS 框架并远离那个”“看看这本书”“看看那些链接”“X 工具很棒”“考虑这个工作流程”等。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T17:15:30.287

我不认为这个问题是不合适的.. 撞回 0

Rails 使用各种模板语言呈现视图。[erb](http://ruby-doc.org/stdlib-1.9.3/libdoc/erb/rdoc/ERB.html)是默认设置，一开始应该没问题。查看[渲染指南以](http://guides.rubyonrails.org/layouts_and_rendering.html)获取更多信息。

Rails 3.1(?) 默认包含[jQuery](http://jquery.com/)，因此它在默认应用程序中可用。好熟悉。

我还会查看[有关表单助手的指南](http://guides.rubyonrails.org/form_helpers.html)。

希望这可以帮助。

# makefile - Cmake add_custom_command 中的双斜杠导致“无规则制定”错误

> ID：10354079
> 
> 赞同：0
> 
> 时间：2012-04-27T16:07:11.480
> 
> 标签：makefile, cmake

使用 CMake 2.8.3 无法为我编译以下内容。注意由“DIR”变量上的斜杠引起的“//”。如果删除了尾部斜杠，它会编译。

任何人都知道这是 CMake 或 Make 中的错误，还是只是用户错误？

谢谢。

**CMakeLists.txt：**

```
 SET(DIR ${CMAKE_CURRENT_SOURCE_DIR}/)
    FILE(MAKE_DIRECTORY ${DIR})

    ADD_CUSTOM_COMMAND(
            OUTPUT ${DIR}/test.cc
            COMMAND echo "int main(void) { }" > ${DIR}/test.cc
            VERBATIM
    )

    ADD_EXECUTABLE(test ${DIR}/test.cc) 
```

**安慰：**

```
-- Configuring done
-- Generating done
-- Build files have been written to: /home/sam/tmp
Scanning dependencies of target test
make[2]: *** No rule to make target `test.cc', needed by `CMakeFiles/test.dir/test.o'.  Stop.
make[1]: *** [CMakeFiles/test.dir/all] Error 2
make: *** [all] Error 2 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T12:47:13.980

这段代码有几个问题：

1.  您正在使用 shell 重定向 ( `>`)，`add_custom_command`但您指定了`VERBATIM`不通过 shell 处理的标志。

2.  您没有将路径括在引号中，如果它们包含空格会导致问题，`set(DIR ...`应该是：`set(DIR "${CMAKE_CURRENT_SOURCE_DIR}/")`

3.  您正在源代码树中创建文件；CMake 通常与无源构建一起使用，因此应在构建树中创建临时文件

4.  您可以使用`file(WRITE`来创建文件，这将比调用 shell 更快

5.  `cmake_minimum_required`不见了

固定`CMakeLists.txt`：

```
cmake_minimum_required(VERSION 2.8)

set(DIR "${CMAKE_CURRENT_BINARY_DIR}")

file(MAKE_DIRECTORY "${DIR}")
file(WRITE "${DIR}/test.cc" "int main(void) {}")

add_executable(test "${DIR}/test.cc") 
```

# c++ - 从终端运行 C++ 程序。在同一终端窗口中获 取输出

> ID：10354085
> 
> 赞同：2
> 
> 时间：2012-04-27T16:07:26.070
> 
> 标签：c++, macos, terminal

当我从终端 (Mac OS X) 运行我的 c++ 程序时，程序的输出显示在新的终端窗口中。

我能做些什么来防止新窗口出现，而只是将程序的输出直接放在已经打开的窗口中？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-10T18:51:49.597

我相信 gcc 带有 XCode 工具包。

如果您安装了 gcc，请打开终端窗口，cd 到您放置 cpp 文件的目录，然后键入：

```
g++ myTestFile.cpp -o main; ./main 
```

自然地，用您的文件名替换“myTestFile”。您还可以重命名“main”，它只是已编译模块的名称，您需要通过键入 ./main 来运行它来检索代码的输出。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T16:31:52.210

我猜你正在使用`open`命令。

```
$ open foo 
```

这将打开一个新的终端窗口。

`open`如果您希望程序在当前终端窗口中运行，请不要使用该命令。^(†</sup>)

```
$ foo 
```

* * *

^(† 您显然应该省略美元符号。)

# operating-system - bios和实模式

> ID：10354088
> 
> 赞同：4
> 
> 时间：2012-04-27T16:07:31.717
> 
> 标签：operating-system, x86, kernel, bios

据说bios程序只能在实模式下看到，也知道bios是存储在ROM中的，但是CPU映射的通常是RAM，是不是说在实模式下，内存的一部分空间映射到ROM ，所以我们可以看到bios程序。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-27T19:47:23.463

物理地址空间不仅仅是 RAM。它包含 ROM 和内存映射设备，例如 APIC 和视频内存。您不能在实模式之外使用 BIOS 的主要原因是它被编写为在实模式下使用。一些函数可能在 16 位保护模式下工作，而更多函数可以在虚拟 8086 模式下工作，但试图调用错误的函数可能会导致系统崩溃。此外，中断在保护模式下的工作方式与实模式下不同，因此您必须重新映射函数。

BIOS 在实模式之外不可用的另一个原因是分页。分页是将虚拟地址映射到物理地址的过程。如果操作系统使用分页，它可以选择根本不将包含 ROM 的页面映射到虚拟内存中，因此它们实际上不存在，因此无法调用。ROM 仍然占用一些物理地址空间，但不能通过虚拟内存获得。

# jsf - 自定义验证器，我应该使用 FacesContext#addMessage() 还是抛出 ValidatorException？

> ID：10354089
> 
> 赞同：2
> 
> 时间：2012-04-27T16:07:41.373
> 
> 标签：jsf, validation, jsf-1.2, custom-validators, facescontext

我想知道在 JSF 1.2 中实现自定义验证器的正确方法是什么。在我的验证器类中'

```
public void validate(FacesContext context, UIComponent component,Object value) throws   ValidatorException {} 
```

方法，我正在做验证检查，只是在出现无效条件的情况下将`FacesMessage`实例添加到上下文中。`context.addMessage(new FacesMessage(xxx...);`这似乎在我的应用程序中运行良好。但是，我不确定是否还需要明确地`throw new ValidatorException()`让 JSF 正确处理生命周期？或者 JSF 是否足够聪明，可以在上下文中查看错误消息来管理生命周期？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T16:22:04.963

你确实应该扔一个`ValidatorException`. 否则 JSF 仍将继续处理请求并更新模型值并调用操作方法。你不想拥有它。

不要手动添加`FacesMessage`. 用它构建`ValidatorException`，JSF 将自动将消息添加到正确的组件，然后 JSF 将正确跳过*更新模型值*和*调用操作*阶段。

```
if (!valid) {
    FacesMessage message = new FacesMessage(SEVERITY_ERROR, "Invalid", null);
    throw new ValidatorException(message);
} 
```

# jpa - 避免主要和测试持久性单元之间的重复

> ID：10354095
> 
> 赞同：1
> 
> 时间：2012-04-27T16:08:07.323
> 
> 标签：jpa, jpa-2.0, eclipselink, openjpa

我有两个同名的持久性单元，一个 in `src/main/resources`，另一个 in `src/test/resources`。但是，它们之间有一些信息是相同的：实体类列表、一些（不是全部）属性等。我怎样才能避免重复呢？如果答案取决于 JPA 实现，我对 OpenJPA 和 EclipseLink 都感兴趣。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T13:34:12.943

您可以在运行时在 Persistence.createEntityManagerFactory(Map) 中传递持久性单元属性。

如果它们是单独的持久性单元，它们应该具有不同的名称......

# c# - 通过 ASP.NET bin 文件夹中的 P/Invoke 读取/写入文件的问题

> ID：10354098
> 
> 赞同：0
> 
> 时间：2012-04-27T16:08:29.550
> 
> 标签：c#, c++, asp.net, file-io, pinvoke

我一直在尝试通过我的 ASP.NET 网站通过 P/Invoke 写入和读取文件。在网站中执行此操作时，我面临着文件写入/读取位置的问题`dlls`。我试图用下面的例子来解释这个问题：

**.cpp 文件（包含读写函数）**

```
extern "C" TEST_API int fnTest(char* fileDir)
{
ofstream myfile;
myfile.open (strcat(fileDir, "test.txt"));
myfile << "Writing this to a file.\n";
myfile.close();
}

extern "C" TEST_API char* fnTest1(char* fileDir)
{
ifstream myReadFile;
myReadFile.open(strcat(fileDir, "test1.txt"));
char output[100];
if (myReadFile.is_open()) {
while (!myReadFile.eof()) {
    myReadFile >> output;
return output;
} 
```

**发布网站的构建事件以将 dll 从上面的 C++ 项目复制到网站的`bin`文件夹**

**Default.aspx.cs - C#**
**Dll 函数**

```
public static class Functions(){
DllImport[("Test1.dll", EntryPoint="fnTest", CharSet=CharSet.Ansi]
public static extern int fnTest(string dir);

DllImport[("Test1.dll", EntryPoint="fnTest1", CharSet=CharSet.Ansi]
public static extern StringBuilder fnTest1(string dir);
} 
```

**Page_Load 事件**

```
string direc = AppDomain.CurrentDomain.BaseDirectory + "bin\\";
string txt1 = Functions.fnTest(direc).ToString(); //failing here - keeps on loading the page forever
string txt2 = Functions.fnTest(direc).ToString(); //failing here - keeps on loading the page forever 
```

如果我在桌面应用程序中尝试相同的 Page_Load 代码并将`direc`其设置为项目输出的当前目录，则一切正常。只是在网站的情况下要写入或读取文件的目录有点混乱，我真的不知道如何纠正这个问题并让它工作。建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T16:19:32.233

您仍然有许多与上一个问题相同的[问题](https://stackoverflow.com/questions/10313144/p-invoke-in-asp-net-reading-writing-text-file-from-dll)。

这一次你最大的问题在这里：

```
strcat(fileDir, "test.txt") 
```

您无法修改`fileDir`，因为它归 pinvoke marshaller 所有。不要将目录传递给您的本机代码，而是将完整路径传递给文件。在您的托管代码中使用`Path.Combine`来创建它，并将其传递给本机代码。

```
extern "C" TEST_API int fnTest(char* filename)
{
    ofstream myfile;
    myfile.open(filename);
    myfile << "Writing this to a file.\n";
    myfile.close();
} 
```

在托管代码中

```
string filename = Path.Combine(
    AppDomain.CurrentDomain.BaseDirectory, "bin", "test.txt");
string txt1 = Functions.fnTest(filename).ToString(); 
```

* * *

在评论中，您解释说您需要在本机代码中连接字符串。您将需要创建一个本机字符串来执行此操作，因为您不允许写入`fileDir`. 像这样的东西：

```
string fileName = string(fileDir) + "test.txt";
myfile.open(fileName.c_str()); 
```

* * *

但是您仍然需要修复`fnTest1`读取文件的内容。我对您其他问题的回答告诉您如何做到这一点。

# javascript - Backbone.js 将此绑定到 $.each

> ID：10354100
> 
> 赞同：1
> 
> 时间：2012-04-27T16:08:32.030
> 
> 标签：javascript, jquery, backbone.js

我正在使用backbonejs，并且在我拥有的方法中：

```
$.each(response.error, function(index, item) {
    this.$el.find('.error').show();
}); 
```

但是，因为它在`$.each`,`this.$el`中是未定义的。

我有`_.bindAll(this, 'methodName')`哪些将在每个之外工作。那么，现在我需要将它绑定在里面吗？

任何帮助都会很棒！谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-27T17:07:49.800

您正在使用 Backbone，因此您有下划线，这意味着您有[`_.each`](http://underscorejs.org/#each)：

> **每个** `_.each(list, iterator, [context])`
> 
> 迭代一个元素**列表**，依次将每个元素生成一个**迭代器**函数。如果传递了一个，则**迭代器**绑定到**上下文**对象。

所以你可以这样做：

```
_.each(response.error, function(item, index) {
    this.$el.find('.error').show();
}, this); 
```

或者你可以使用[`_.bind`](http://underscorejs.org/#bind)：

```
$.each(response.error, _.bind(function(index, item) {
    this.$el.find('.error').show();
}, this)); 
```

或者，因为你一遍又一遍地发现同样的事情，预先计算并停止关心`this`：

```
var $error = this.$el.find('.error');
$.each(response.error, function(index, item) {
    $error.show();
}); 
```

这是两种下划线方法的快速演示：http: [//jsfiddle.net/ambiguous/dNgEa/](http://jsfiddle.net/ambiguous/dNgEa/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T16:11:03.593

在循环之前设置一个局部变量：

```
var self = this;
$.each(response.error, function(index, item) {
    self.$el.find('.error').show();
}); 
```

# java - Java - 扩展 HashMap - 对象与泛型行为

> ID：10354103
> 
> 赞同：15
> 
> 时间：2012-04-27T16:08:41.250
> 
> 标签：java, generics, inheritance, casting

我正在编写一个`HashMap`基于简单的 Cache ，其工作方式如下：

1.  如果请求`key` **在**缓存中，则返回其`value`.
2.  如果请求`key` **不**存在，则运行`value`基于生成的方法`key`，存储两者，返回`value`。

编码：

```
import java.util.HashMap;

abstract class Cache<K, V> extends HashMap<K, V> {  
    @Override
    public V get(Object key) {
        if (containsKey(key)) {
            return super.get(key);
        } else {
            V val = getData(key);
            put((K)key, val);    // this is the line I'm discussing below
            return val;
        }
    }

    public abstract V getData(Object key);
} 
```

它非常简单并且效果很好。但是，我*讨厌*Sun 决定`get()`将 a`Object`作为其论点而不是`K`. 我已经阅读了足够多的内容，知道它背后有一些基本原理（我不同意，但这是另一个故事）。

我的问题出在注释行中，因为似乎必须取消选中演员*表*。由于类型擦除，我无法检查是否`key`是类型`K`（正确`put()`功能所必需的），因此该方法容易出错。

一种解决方案是从“is a”切换到“has a”`HashMap`关系，这种关系更好更干净，但由于多种原因`Cache`无法实现这种关系。`Map`编码：

```
import java.util.HashMap;
import java.util.Map;

abstract class Cache<K, V> {
    private final Map<K, V> map = new HashMap<K, V>();

    public V get(K key) {
        if (map.containsKey(key)) {
            return map.get(key);
        } else {
            V val = getData(key);
            map.put(key, val);
            return val;
        }
    }

    public abstract V getData(K key);
} 
```

任何人都可以提出任何其他（甚至是骇人听闻的）解决方案，以便我可以在 and 方面保持`Cache`一个并且`Map`仍然是类型安全的吗？`get(Object key)``put(K key, V val)`

我唯一能想到的就是创建另一个名为 ie 的方法`getValue(Key k)`，该方法将委托给`get(Object key)`，但是我不能强迫任何人使用新方法而不是通常的方法。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-27T16:12:10.577

没有。您已经找到了切换到“拥有”关系的正确解决方案。（坦率地说，`get`如果一个新值不存在，让该方法计算一个新值是令人惊讶的，违反了`Map`合同，并且可能导致许多其他方法的极其奇怪的行为。这是 Guava 离开的重要部分`MapMaker`，它提供了几乎这种精确的行为——因为它[充满](http://code.google.com/p/guava-libraries/wiki/MapMakerMigration#MapMaker_and_ConcurrentMap)了问题。）

也就是说，例如 Guava`Cache`所做的是它公开了一个`Map<K, V> asMap()` *视图*，这是您可以做的事情。这为您提供了 a 的大部分优点，`Map`而不会影响类型安全。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T16:24:15.093

毫无疑问，has-a 关系是正确的实现。应该从缓存类中删除如何生成值的业务逻辑。

# c# - 使用 c# 创建嵌套的 json

> ID：10354107
> 
> 赞同：7
> 
> 时间：2012-04-27T16:08:50.920
> 
> 标签：c#, .net, json, nested

我可以很容易地用 c# 创建一个平面序列化的 JSON 字符串

我的问题是我想创建一个像下面这样的嵌套字符串

```
[ { 
    title: "Yes",
    id : "1",
    menu: [ { 
        title: "Maybe",
        id : "3",
        alert : "No",
        menu: [ {
            title: "Maybe Not",
            id : "8",
            alert : "No",
            menu: []
        } ]
    } ]
},
{
    title: "No",
    id : "2",
    menu: []
}] 
```

任何帮助都会很棒

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-27T16:13:48.293

Are you using MVC 3? - Do something like:

```
return Json(myObectWithListProperties, JsonRequestBehavior.AllowGet); 
```

I use this to return complex C# objects that match the structure of the JavaScript objects I want.

e.g.:

```
var bob = new {
    name = "test",
    orders = new [] {
        new  { itemNo = 1, description = "desc" },
        new  { itemNo = 2, description = "desc2" }
    }
};

return Json(bob, JsonRequestBehavior.AllowGet); 
```

gives:

```
{
    "name": "test",
    "orders": [
        {
            "itemNo": 1,
            "description": "desc"
        },
        {
            "itemNo": 2,
            "description": "desc2"
        }
    ]
} 
```

EDIT: A bit more nesting for fun:

```
var bob = new {
    name = "test",
    orders = new [] {
        new  { itemNo = 1, description = "desc" },
        new  { itemNo = 2, description = "desc2" }                  
    },
    test = new {
        a = new {
            b = new {
                something = "testing",
                someOtherThing = new {
                    aProperty = "1",
                    another = "2",
                    theThird = new {
                        bob = "quiteDeepNesting"
                    }
                }
            }
        }
    }
};

return Json(bob, JsonRequestBehavior.AllowGet); 
```

gives:

```
{
    "name": "test",
    "orders": [
        {
            "itemNo": 1,
            "description": "desc"
        },
        {
            "itemNo": 2,
            "description": "desc2"
        }
    ],
    "test": {
        "a": {
            "b": {
                "something": "testing",
                "someOtherThing": {
                    "aProperty": "1",
                    "another": "2",
                    "theThird": {
                        "bob": "quiteDeepNesting"
                    }
                }
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-27T16:15:41.340

尝试使用

```
using System.Web.Script.Serialization;

//Assumed code to connect to a DB and get data out using a Reader goes here

Object data = new {
    a = reader.GetString(field1),
    b = reader.GetString(field2),
    c = reader.GetString(field3)
};
JavaScriptSerializer javaScriptSerializer = new JavaScriptSerializer();
string json = javaScriptSerializer.Serialize(data); 
```

这是内置的，可以节省您自己序列化为 JSON 的工作！

此示例假设您使用某种阅读器从数据库中获取数据，然后它使用匿名类构造您想要序列化的对象。您的匿名类可以根据需要简单或复杂，JavaScriptSerializer 将处理将其转换为 JSON。这种方法也很有用，因为您可以轻松控制它将在 JSON 中创建的 JSON 属性名称。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-07-17T13:07:46.093

```
using System.Web.Script.Serialization;

var strNJson = new
            {
                to = "hello",
                notification = new
                {
                    title = "textTitle",
                    body = "bodyText"
                }
            };
            JavaScriptSerializer javaScriptSerializer = new JavaScriptSerializer();
            string json = javaScriptSerializer.Serialize(strNJson); 
```

```
{   "to":"hello",
       "notification": {
                        "title":"titleText",
                         "body":"bodyText"
                     } 
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-01-23T05:59:07.157

您可以使用命名空间`ExpandoObject`下的`System.Dynamic`。

这是实现您的解决方案的一个小片段：

```
dynamic parameters = new dynamic[2];

parameters[0] = new ExpandoObject();
parameters[0].title = "Yes";
parameters[0].id = "1";

parameters[0].menu = new dynamic[1];
parameters[0].menu[0] = new ExpandoObject();

parameters[0].menu[0].title = "Maybe";
parameters[0].menu[0].id = "3";
parameters[0].menu[0].alert = "No";
parameters[0].menu[0].menu = new dynamic[1];
parameters[0].menu[0].menu[0] = new ExpandoObject();
parameters[0].menu[0].menu[0].title = "Maybe Not";
parameters[0].menu[0].menu[0].id = "8";
parameters[0].menu[0].menu[0].alert = "No";
parameters[0].menu[0].menu[0].menu = new dynamic[0];

parameters[1] = new ExpandoObject();
parameters[1].title = "No";
parameters[1].id = "2";
parameters[1].menu = new dynamic[0];

string json = JsonConvert.SerializeObject(parameters, Formatting.Indented);
Console.WriteLine(json); 
```

[这是小提琴中的工作](https://dotnetfiddle.net/imrHR9)

**注意：** 还有其他方法可以实现这一点，但我一直在使用这种方法。

# iphone - 在 Xcode 4.0 上使用 Reachability.h 时出错

> ID：10354109
> 
> 赞同：2
> 
> 时间：2012-04-27T16:08:55.037
> 
> 标签：iphone, ios, xcode, ipad, reachability

我在为我的项目添加可达性时遇到了一些问题。我以前只使用过可达性，但这次我失败了。我总是遇到以下错误：

```
Undefined symbols for architecture armv7:
    "_OBJC_CLASS_$_Reachability", referenced from:
    objc-class-ref in DelegatePrincipal.o
ld: symbol(s) not found for architecture armv7
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

我的项目不使用 ARC（我也不想要它）、基本 sdk 5.0、ARchitecture 标准（armv7），并且我已经添加了 SystemConfiguration.framework。

我还测试了托尼百万可达性，它不起作用。同样的问题。

我从其他主题中看到了同样的问题，但它是关于 ARC 的。我的项目没有 ARC。

此外，我正在委托内部进行一个简单的测试，如下所示：

```
Reachability *reach = [Reachability reachabilityForInternetConnection]; 
    NetworkStatus netStatus = [reach currentReachabilityStatus];    
    if (!netStatus == NotReachable) {
        NSLog(@"Not connected");
    } 
```

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-27T16:12:42.407

您确定将 Reachability.m 文件添加到您的项目吗？还要检查它是否已分配给您当前的目标。

该错误绝对意味着链接器在编译器为 armv7 体系结构生成的二进制文件中没有找到类定义。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-27T16:14:21.543

在您的项目中添加**消息 UI 框架** ..

希望，这会帮助你...享受..

# c# - 创建 DirectShow 过滤器以选择 HWND

> ID：10354112
> 
> 赞同：0
> 
> 时间：2012-04-27T16:09:07.027
> 
> 标签：c#, .net-4.0, filter, directshow, directshow.net

如何创建 DirectShow 过滤器，主要关注的是如何选择要跟随的窗口。我想做一些类似谷歌加环聊的事情来选择要在屏幕共享中显示的窗口。

感谢帮助:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T06:08:41.930

您不需要 DirectShow 来捕获窗口图像。使用 DC-to-DC `BitBlt`，图片已经是您的了。看：

*   [使用 BitBlt 从屏幕写入屏幕](https://stackoverflow.com/questions/10052130/writing-to-the-screen-from-the-screen-using-bitblt)
*   [如何加快 BitBlt 以使用 aero 捕获屏幕？](https://stackoverflow.com/questions/7044154/how-to-speed-up-bitblt-to-capture-screen-with-aero)
*   [将屏幕截图 (Bitblt) 存储在内存缓冲区中以通过 IdTCPClient 发送](https://stackoverflow.com/questions/1256605/store-a-screen-capture-bitblt-in-a-memory-buffer-to-send-over-idtcpclient)

如果您想将其包装到 DirectShow 过滤器中，Windows SDK 示例[Push Source](http://msdn.microsoft.com/en-us/library/windows/desktop/dd377481%28v=vs.85%29.aspx)正在做一个接近的事情 ( `CPushSourceDesktop`)。

# visual-studio-2012 - 如何阻止 MSBuild 复制任务自动重试

> ID：10354114
> 
> 赞同：14
> 
> 时间：2012-04-27T16:09:08.533
> 
> 标签：visual-studio-2012

如果输出二进制文件在 Visual Studio 2010（或更早版本）中被锁定，则构建将简单地失败并说它无法复制，因为文件正在使用中。

现在它进入了一个重试循环，这真的很烦人，因为：

*   不能中断
*   这对情况没有帮助

这只是意味着我必须等待更长时间才能使构建失败。

有谁知道如何关闭这个？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-09-18T14:55:30.917

以下几行应该会有所帮助：

```
<PropertyGroup>
  <CopyRetryCount>0</CopyRetryCount>
</PropertyGroup> 
```

您应该将它们添加到您的项目文件（`*.*proj`例如`csproj`）中，紧跟在开始`<Project>`标记之后。

为了全局解决这个问题，这些行应该放在`c:\Windows\Microsoft.NET\Framework\v4.0.30319\Microsoft.Common.targets`开始`<Project>`标签之后。更多信息：http: [//msdn.microsoft.com/en-us/library/3e54c37h.aspx](http://msdn.microsoft.com/en-us/library/3e54c37h.aspx)

不确定它是否会在将来导致一些构建问题 - 我现在发现了这一点。

**更新：** 对于 VS 2013，旧位置不再起作用，因此您可以将这些行放在`c:\Program Files (x86)\MSBuild\12.0\Microsoft.Common.props`.

# php - 我应该将过滤器添加到用于输入的 zend 表单吗？

> ID：10354117
> 
> 赞同：1
> 
> 时间：2012-04-27T16:09:18.407
> 
> 标签：php, mysql, database, forms, zend-framework

在得到启发后，通过使用准备好的语句，我不应该过滤/清理仅在出路时保存到数据库的数据。

我应该在 zend 表单中添加 htmlEntities 或 htmlspecialchars 之类的过滤器吗？

亲切的问候，

# .net - 有人知道可以挂钩 Dotnet 方法的挂钩/弯路库吗？

> ID：10354121
> 
> 赞同：0
> 
> 时间：2012-04-27T16:09:40.757
> 
> 标签：.net, hook

有人知道可以挂钩 Dotnet 方法的挂钩/弯路库吗？我知道鼹鼠可以在运行单元测试的情况下做到这一点。但是，它使用分析器，实际上不适合或设计用于您自己的库，而且您不能使用内部方法或静态方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T20:45:33.177

不是我知道的。在我的公司，我自己创建了一个。你必须使用探查器来做到这一点。另外，请注意，如果存在本机 dll，您将无法检测该功能，您必须以其他方式删除它或执行其他操作，例如使用 loadlibrary 钩子绕道阻止它。

最后，目前的处理方法是自己编辑函数或完全替换它。出于稳定性原因，这是一件非常危险的事情。有更复杂的方法，但首先你必须从基础开始。IIRC 我开始使用这个来了解分析：http: [//msdn.microsoft.com/en-us/magazine/cc188743.aspx](http://msdn.microsoft.com/en-us/magazine/cc188743.aspx)

当我了解到这一点时，我缺少关于本机与字节码的一点，因此您可以避免这种特别的头痛。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-19T12:10:02.397

今天至少存在这两个不使用分析 api 的框架（当然，它们使用可能非常脆弱的 .NET 内部进行模拟）

*   [和谐](https://github.com/pardeike/Harmony)：麻省理工学院许可。似乎实际上已经在一些游戏模组中成功使用，同时支持 .NET 和 Mono。
*   [过程仪表引擎中的偏差](https://github.com/nektra/Deviare-InProc)：GPLv3 和商业。.NET 支持目前被标记为实验性的，但另一方面也有商业支持的好处。

# java - 书籍类：如何连续打印而不分页

> ID：10354128
> 
> 赞同：1
> 
> 时间：2012-04-27T16:10:01.373
> 
> 标签：java, swing, printing, jtable, graphics2d

在[这个](https://stackoverflow.com/questions/10250772/append-text-for-printing-before-and-after-a-jtable)关于如何在`JTable`（不是页眉和页脚）之前和之后打印一些预定义文本的答案之后，我想更进一步。使用`Book`该类，可以像[示例](https://stackoverflow.com/questions/10250772/append-text-for-printing-before-and-after-a-jtable)一样依次打印不同格式的页面；但是这里出现了一个问题：如果我需要在另一个文本之后制作它怎么办？因此，当第一个文本完成时，`JTable`使用空闲页面的其余部分并继续后续文本。

在这个[例子](https://stackoverflow.com/questions/10250772/append-text-for-printing-before-and-after-a-jtable)中，一整页被浪费在了单词“REPORT”上。有没有办法做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T10:06:16.157

A`java.awt.print.Book`是面向页面的，但您可以`print()`在页面上的任何位置使用任何组件，如[*打印用户界面的内容中*](http://docs.oracle.com/javase/tutorial/2d/printing/gui.html)所示。您可以`translate()`使用图形上下文来组成页面。

```
Graphics2D g2d = (Graphics2D) g;
g2d.translate(pf.getImageableX(), pf.getImageableY());
table.getTableHeader().print(g2d);
g2d.translate(0, table.getTableHeader().getHeight());
table.print(g2d); 
```

# c# - 检查datagridview是否被编辑

> ID：10354129
> 
> 赞同：1
> 
> 时间：2012-04-27T16:10:07.360
> 
> 标签：c#, winforms

我的 C# winform 有一个 datagridview，当我单击更新按钮时，我应该输入什么代码来检查是否有任何单元格已被编辑？

我只需要有一个真假。

谢谢。

==================================================== ==========================

我现有的代码：

```
#region Edit Records
        private void InProSysAdministrationEventsUpdateButton_Click(object sender, EventArgs e)
        {
            if (MessageBox.Show("Please Click Ok to Edit the Events", "Confirmation", MessageBoxButtons.OKCancel) == DialogResult.OK)
            {
                ManipulateData.UpdateData(connectionString, tblconn, tblscmd, tbldataadaptor, tbldatatable, cmbuilder, "usp_readallevents", readalleventsdataGridView);
            }
        }
#endregion 
```

我需要执行以下操作：

1）用户点击编辑

2) 系统检查是否有任何单元格被编辑过

3）如果没有编辑单元格，它将 messagebox.show("No Changes Done.")

4）否则，它将更新数据库。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T16:20:43.963

您是否看过 DataGridView.CellValueChanged 事件？[MSDN](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.cellvaluechanged.aspx)

只需为此编写一个处理程序并设置一个标志，或者执行您想要的任何操作，这将是相当简单的。

您可能如何执行此操作的一个示例是：

```
 protected override void OnLoad(EventArgs e)
    {
        myDataGridView.CellValueChanged += new DataGridViewCellEventHandler(
        myDataGridView_CellValueChanged);
    }

    private void myDataGridView_CellValueChanged(
    object sender, DataGridViewCellEventArgs e)
    {
       //some very crude examples of actions you might want to perform when the event handler is triggered.
       myObject.update();
       //or something else like
       myObject.isUpdatable = true;
    } 
```

关于第 3 点，msgbox 可能不是通知用户非关键事件的最佳方式。他们很可能已经知道他们没有输入任何信息，您可以通过标记所需的单元格或其他方式来提供这种不那么烦人的反馈。深思熟虑。

将来，我建议您在 MSDN 中搜索您正在使用的类，并搜索您正在寻找的事件、方法或属性的类型，看看是否有任何匹配项。**也有很多有用的例子。**

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-06-02T00:09:07.537

```
int x=0;     
private void dataGridView1_CellEndEdit(object sender, DataGridViewCellEventArgs e)
{
     x = 1;
}

if(x==1)   //this means that gridView has been updated 
```

# perl - 如何访问 Perl 嵌套哈希中的某些键？

> ID：10354132
> 
> 赞同：0
> 
> 时间：2012-04-27T16:10:12.137
> 
> 标签：perl, hash

我转储了一个数据结构：

```
print Dumper($bobo->{'issues'}); 
```

并得到：

```
$VAR1 = {
    '155' => {
        'name' => 'Gender',
        'url_name' => 'gender'
    }
}; 
```

我怎样才能提取`155`？

如果我有怎么办：

```
$VAR1 = {
    '155' => {'name' => 'Gender',  'url_name' => 'gender'},
    '11'  => {'name' => 'Toddler', 'url_name' => 'toddler'},
    '30'  => {'name' => 'Lolo',    'url_name' => 'lolo'}
}; 
```

我想打印**一个**键，即第一个或第二个来查看键的值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T16:20:08.887

因此，根据您发布的示例，哈希如下所示：

```
$bobo = {
    issues => {
        155 => {
            name     => 'Gender',
            url_name => 'gender',
        },
    },
}; 
```

' `155`' 是您的示例代码中的一个键。要提取密钥，您将使用`keys`.

`my @keys = keys %{$bobo->{issues}};`

但是要获得`155`索引的值，您可以说：

`my $val = $bobo->{issues}{155};`

然后`$val`将包含一个如下所示的 hashref：

```
{
    name     => 'Gender',
    url_name => 'gender'
} 
```

看看`perldoc perlreftut`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T16:20:56.740

它是由 引用的哈希中的一个键`$bobo->{'issues'}`。所以你会遍历

```
keys %{$bobo->{'issues'}} 
```

找到它。

# wpf - TextBox bound to Decimal with UpdateSourceTrigger=PropertyChanged

> ID：10354135
> 
> 赞同：10
> 
> 时间：2012-04-27T16:10:26.723
> 
> 标签：wpf, binding, textbox, string-formatting, propertychanged

I've been battling this issue for a while now and seem not to be able to come up with a concrete workaround - I have a TextBox which is bound to a decimal, and the binding has UpdateSourceTrigger set to PropertyChanged and is so by necessity (LostFocus won't work well in this case). The default behavior while I'm sure is somehow explainable, is not acceptable for my purposes, so I've tried the following StringFormat, which I had thought remedied the issue, but only partially and am now looking for something more concrete. My originaly fix was to add a string format to the binding...in my case it was

```
StringFormat={0:#.#####} 
```

so when typing something like .12345 or 1.5 the solution works great, however if I type .01234, as soon as I hit the zero key, it removes the decimal I had just typed...which for obvious reasons would be disasterous in terms of data entry. I'm hoping that my familiarity with string formatting is just lacking. Wost case scenario I'll have my exposed property be a string and the setter and getter just convert to decimal, but that seems like a hacky solution.

Thanks!

Aj

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-07-02T19:42:40.107

我遇到了这个问题，因为我在 .Net 4.6.2 版本中看到了同样的问题。我需要输入一个汇率，例如 1.15，发现它以 115 结束，小数点被删除。我的解决方法是绑定到一个字符串属性，该属性在输入时保持它自己的字符串值，例如 1、1.、1.1、1.15。但是每个输入都尝试更新 Try Catch 中的基础数字属性。它远非优雅，但可以满足我的需求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-31T08:15:03.740

你有两个简单的选择来实现你想要的：

1.  尝试先输入“0”...您可以毫无问题地输入“0.01234”。

2.  改用`StringFormat={}{0:0.00000}`...然后您可以毫无问题地输入“.01234”。

# asp.net - ASP.NET Web API 的完整版本是否可以与 VS2010 一起使用？

> ID：10354137
> 
> 赞同：1
> 
> 时间：2012-04-27T16:10:40.363
> 
> 标签：asp.net, visual-studio, visual-studio-2010, asp.net-web-api

ASP.NET Web API 的 beta 版可用，并且可以在 VS2010 上正常工作。是否有迹象表明完整版在发布时不会出于任何原因？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T18:50:07.370

ASP.NET Web API 将与 VS2010 和 .Net 4 兼容。据我所知 :-)

# javascript - 是否可以将此 JQuery 代码转换为 JavaScript？

> ID：10354138
> 
> 赞同：0
> 
> 时间：2012-04-27T16:10:41.613
> 
> 标签：javascript, jquery, code-analysis

以下来自 Google-Caja 游乐场的代码显示了两个框。一旦你在另一个内部拖动，封闭框就会改变颜色：

```
<style>
  #draggable { width: 100px; height: 100px; padding: 0.5em; float: left; margin: 10px 10px 10px 0; }
  #droppable { width: 150px; height: 150px; padding: 0.5em; float: left; margin: 10px; }
 <script>
  $(function() {
    $( "#draggable" ).draggable();
    $( "#droppable" ).droppable({
      drop: function( event, ui ) {
        $( this )
          .addClass( "ui-state-highlight" )
          .find( "p" )
            .html( "Dropped!" );
      }
    });
  });
  </script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T16:12:38.313

是的，它需要做一些工作。find、addClass 和 html 很容易，但拖放是另一回事。这是它的教程[http://luke.breuer.com/tutorial/javascript-drag-and-drop-tutorial.aspx](http://luke.breuer.com/tutorial/javascript-drag-and-drop-tutorial.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T16:12:23.167

是的。您绝对可以将任何 JavaScript 库代码转换为纯 JS，因为这毕竟是他们使用的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T16:14:26.463

这是可能的，但是 .draggable() 和 .droppable() 函数太复杂了，无法在此处解释如何操作。查看未缩小的 jQuery UI。这将为您提供一个良好的开端（尽管它仍将使用 jQuery）。

# c# - SQL插入查询不执行而不在c#中抛出任何异常

> ID：10354141
> 
> 赞同：0
> 
> 时间：2012-04-27T16:10:56.050
> 
> 标签：c#, asp.net, sql-server-2008, exception, insert-query

我为讨论论坛网站编写了一个插入函数，用于在数据库中插入新的讨论线程。功能如下：

```
public int createDiscuss(Discussion dis)
    {
        query = "insert into [MyForums].[dbo].[Discussions](desid, text, date, time, replyto, uid, isPrivate) values(@id, @text, @date, @time, @replyto, @uid, @pvp)";
        string did=getDesID();
        if (did == null)
            return -1;
        try
        {
            com = new SqlCommand(query, con);
            com.Parameters.AddWithValue("@id", did); 
            com.Parameters.AddWithValue("@text", dis.gettext()); 
            com.Parameters.AddWithValue("@date", SqlDateTime.Parse(DateTime.Now.ToString())); 
            com.Parameters.AddWithValue("@time", SqlDateTime.Parse(DateTime.Now.ToString()));
            com.Parameters.AddWithValue("@replyto", dis.getreplyto());
            com.Parameters.AddWithValue("@uid", dis.getuid());
            if (dis.IsPrivate() == false)
            { com.Parameters.AddWithValue("@pvp", 1); }
            else
            { com.Parameters.AddWithValue("@pvp", 2);  }
            con.Open();
            int r=com.ExecuteNonQuery();
            if (r <= 0)
            {
                return -1;
            }
            con.Close();

        }
        catch (Exception)
        {
            return -1;
        }
        return 0;
    } 
```

此函数如果遇到错误或异常，则返回 -1 并由调用函数检查，然后调用函数显示错误。问题是这个插入函数没有执行查询。当我检查这些值是否作为参数正确传递给 AddWithValue 函数时，我发现每个值都按照 asp.net 页面上给出的方式传递。但是当控制权来到 com.ExecuteNonQuery() 函数时。它返回 -1 是错误的。谁能告诉我我的代码有什么问题？或者我如何检查为什么 com.ExecuteNonQuery() 没有返回任何受影响的行？

* * *

此异常显示

```
A first chance exception of type 'System.Threading.ThreadAbortException' occurred in mscorlib.dll
An exception of type 'System.Threading.ThreadAbortException' occurred in mscorlib.dll but was not handled in user code 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T16:15:57.470

话虽如此，SQL Profiler 是您的朋友。从分析器中获取生成的 sql 并在 SQL mgmt studio 中运行它。我有 99% 的把握答案是显而易见的。如果没有，请使用分析器生成的 sql 更新您的答案，我们将从那里获取。

如果你需要一些关于 SQL Profiler 的指导，一个简单的谷歌搜索会带来很多选择：[SQL Profiler Search](http://www.google.com/search?aq=f&sourceid=chrome&ie=UTF-8&q=sql%20profiler%20tutorial)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T17:07:40.260

*   `finally`您应该在一个块中关闭您的连接。您之前遇到的任何异常都`con.Close();`将导致您的连接保持打开状态。这可能是这里的错误（取决于 的范围`con`）

*   您不应该吞下异常，而是记录它。然后您可以正确检查错误。如果您没有日志记录，请获取日志记录。但与此同时，请查看您使用调试器捕获的异常。

*   您还应该捕获更具体的异常，以便您可以区分应用程序中的连接错误和慢性错误。检查您正在调用的方法可能会引发哪些异常。例如， con.Open() 可以抛出这些：

`SqlException`

`InvalidOperationException`

所以先抓住那些，`Exception`最后抓住。

根据异常的类型，您可以返回不同的错误代码和/或以不同的严重级别记录。

* * *

此外，找出一种方法（使用分析或只是复制+粘贴）对数据库运行该查询并查看会发生什么。例如，您确定这部分是正确的：

```
 com.Parameters.AddWithValue("@date",
            SqlDateTime.Parse(DateTime.Now.ToString())); 
        com.Parameters.AddWithValue("@time",
            SqlDateTime.Parse(DateTime.Now.ToString())); 
```

`@date`并且`@time`是相同的。数据库值是否也相同，列是否都需要字符串？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T16:14:34.477

你需要做一些基本的调试。设置您的代码，如：

```
catch(Exception ex)
{
  return -1;
} 
```

返回时设置断点，看看异常是什么。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-27T16:16:25.473

你可能没有达到`int r=com.ExecuteNonQuery();`代码。可能是`con.Open();`方法上的错误。

你能在你的 catch 中抛出一个新的异常并向我们展示实际的错误吗？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-27T16:53:47.380

您当前代码的一个挑战是在几种不同的情况下返回“-1”：

*   发生异常
*   getDesID 的结果为空
*   INSERT 语句插入行失败

检查这一点的一种简单方法是从每个故障点返回不同的数字（例如 -2 或 -3）。这样，您就可以确定错误出现的位置，而无需过多更改代码或附加调试器。

在我看来，问题不太可能出在您的 SQL INSERT 语句上——如果该语句本身无效或违反了数据库约束，SQL Server 会向您返回一个异常，该异常将被您的异常处理程序捕获。

# c# - 通过 WPF 中 ViewModel 中的命令将 UserControl 添加到画布

> ID：10354146
> 
> 赞同：1
> 
> 时间：2012-04-27T16:11:11.987
> 
> 标签：c#, wpf, mvvm, viewmodel, delegatecommand

我有一个 UserControl 说 Stock，它有一个 Button 叫做 Display

```
<Button Command="{Binding DisplayCommand}" CommandParameter="StockGroups">Display</Button> 
```

现在，当我单击此按钮时，它应该将另一个名为 Display 的 UserControl 添加到位于 HomeWindow 中的 Canvas 中，并且应该将 CommandParameter 传递给 Display userControl。

```
private DelegateCommand<string> _displayCommand;        
public virtual void DisplayExecuted(string param){}
public ICommand DisplayCommand
{
    get
    {
        if (_displayCommand == null)
            _displayCommand = new DelegateCommand<string>(new Action<string>(DisplayExecuted));
        return _displayCommand;
    }            
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T17:25:15.883

另一种更接近 MVVM 的方法是拥有一个名为 的布尔属性`ShouldDisplayControl`，然后将其绑定到控件的属性`Visibility`（使用 [BooleanToVisibilityConverter]) [1](http://msdn.microsoft.com/en-us/library/system.windows.controls.booleantovisibilityconverter.aspx)），同时将也必然。`CommandParameter``ControlParameter`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T16:59:57.450

这不是一个应该涉及 ViewModel 的操作，因为它不操作任何模型数据。

考虑仅在 xaml 的代码隐藏中处理按钮的 OnClick，而不是 ViewModel 命令。

在您的 HomeWindow.xaml.cs 文件中：

```
protected override void Display_OnClick(object sender, EventArgs e) {
    var buttonName = ((Button)sender).Name; // gets the name of the button that triggered this event
    var displayControl = new DisplayControl(); // your user control
    displayControl.param = buttonName; // set the desired property on your display control to the name of the button that was clicked
    ((Canvas)Content).Children.Add(displayControl); // 'Content' is your Canvas element
} 
```

在您的 HomeWindow.xaml 文件中：

```
<Button x:Name="StockGroups" Click="Display_OnClick" Text="Display" /> 
```

这应该可以满足您的需求，而无需在视图模型中创建和调用命令。单击的按钮的名称将设置为用户控件中的指定属性，并且将在 Canvas 中创建控件的实例。

# c - 在不调试的情况下查找哪个汇编指令导致了非法指令错误

> ID：10354147
> 
> 赞同：39
> 
> 时间：2012-04-27T16:11:12.217
> 
> 标签：c, linux, assembly, x86-64, yasm

在运行我用汇编编写的程序时，`Illegal instruction`出现错误。有没有办法知道是哪条指令导致了错误，而无需调试，因为我正在运行的机器没有调试器或任何开发系统。换句话说，我在一台机器上编译并在另一台机器上运行。我无法在我正在编译的机器上测试我的程序，因为它们不支持 SSE4.2。尽管如此，我正在运行程序的机器确实支持 SSE4.2 指令。

我想这可能是因为我需要告诉汇编程序（YASM）识别 SSE4.2 指令，就像我们通过传递`-msse4.2`标志来处理 gcc 一样。或者你认为这不是原因？知道如何告诉 YASM 识别 SSE4.2 指令吗？

也许我应该捕获[SIGILL](http://en.wikipedia.org/wiki/SIGILL)信号，然后对 SA_SIGINFO 进行解码，看看程序做了什么样的非法操作。

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2016-10-24T17:01:00.183

最近我因为132退出状态码（128 + 4：程序被信号中断+非法指令信号）而遇到崩溃。以下是我如何找出导致崩溃的指令。

首先，我启用了核心转储：

```
$ ulimit -c unlimited 
```

有趣的是，我运行二进制文件的文件夹包含一个名为`core`. 我不得不告诉 Linux 将 PID 添加到核心转储中：

```
$ sudo sysctl -w kernel.core_uses_pid=1 
```

然后我运行我的程序并得到一个名为`core.23650`. 我用 gdb 加载了二进制文件和核心。

```
$ gdb program core.23650 
```

一旦我进入 gdb，它就会显示以下信息：

```
Program terminated with signal SIGILL, Illegal instruction.
#0  0x00007f58e9efd019 in ?? () 
```

这意味着我的程序由于`0x00007f58e9efd019`地址内存中的非法指令而崩溃。然后我切换到*asm 布局*来检查最后执行的指令：

```
(gdb) layout asm
>|0x7f58e9efd019  vpmaskmovd (%r8),%ymm15,%ymm0
 |0x7f58e9efd01e  vpmaskmovd %ymm0,%ymm15,(%rdi)
 |0x7f58e9efd023  add    $0x4,%rdi
 |0x7f58e9efd027  add    $0x0,%rdi 
```

是指令`vpmaskmovd`导致了错误。显然，我试图在一个不支持 AVX2 指令集的系统上运行一个针对 AVX2 架构的程序。

```
$ cat /proc/cpuinfo | grep avx2 
```

最后，我确认[vpmaskmovd 是仅 AVX2 指令](https://www.cs.utexas.edu/~hunt/class/2016-spring/cs350c/documents/Agner-Fog/instruction_tables.pdf)。

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2012-04-27T16:15:50.967

实际上，您经常遇到非法指令错误不是因为您的程序包含非法操作码，而是因为您的程序中存在错误（例如，缓冲区溢出）使您的程序跳转到带有纯数据或代码的随机地址而不是操作码的开始。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-04-27T18:08:25.143

如果您可以在该系统上启用核心转储，只需运行程序，让它崩溃，然后将核心转储从目标机器上拉到您的开发机器上，并将其加载到为调试目标架构而构建的 GDB 中 - 这应该会告诉您确切的信息坠机发生的地方。只需使用 GDB 的`core`命令将核心文件加载到调试器中。

*   要在目标上启用核心转储：

    ```
    ulimit -c unlimited 
    ```

*   控制核心文件如何命名的伪文件（cat这些以查看当前配置，写入它们以更改配置）：

    ```
    /proc/sys/kernel/core_pattern
    /proc/sys/kernel/core_uses_pid 
    ```

在我的系统上，一旦启用核心转储，崩溃的程序将在工作目录中写入一个简单命名为“核心”的文件。这对于您的目的可能已经足够了，但是更改核心转储文件的命名方式可以让您在必要时保留核心转储的历史记录（可能是为了更间歇性的问题）。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-04-27T16:13:09.873

嗯...您当然可以插入跟踪打印输出，这样您就可以快速排除大面积的代码。完成后，运行例如

```
$ objdump --disassemble my-crashing-program | less 
```

然后跳转到例如你知道导致错误的函数，并阅读代码，寻找任何看起来奇怪的东西。

我不完全确定如何`objdump`显示非法指令，但它们应该脱颖而出。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-04-27T16:22:42.903

对于手写组装，我怀疑堆栈管理问题会导致无处返回。编写一个保存每个寄存器的调试打印输出例程，并在每个函数的顶部插入对它的调用。

然后你会看到你能走多远......

（顺便说一句，一个好的编辑器和对汇编器宏语法的良好理解是编写机器代码时的救星。）

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2018-07-23T15:07:16.957

`return`在函数末尾缺少语句可能会导致这种情况。

# ejb - 在 EJB 中声明资源引用

> ID：10354149
> 
> 赞同：0
> 
> 时间：2012-04-27T16:11:21.140
> 
> 标签：ejb, jndi, websphere-6.1, ejb-jar.xml

这就是他们在 ejb-jar.xml 中声明资源引用的方式：

```
<enterprise-beans>
<session>
<ejb-name>ResourceBean</ejb-name>
<resource-ref>
<res-ref-name>jdbc/employee</res-ref-name>
<res-type>javax.sql.DataSource</res-type>
</resource-ref>
</session>
</enterprise-beans> 
```

在此链接： http: [//javahowto.blogspot.ca/2006/06/5-ways-to-get-resources-in-ejb-3.html](http://javahowto.blogspot.ca/2006/06/5-ways-to-get-resources-in-ejb-3.html) 现在，如果我有另一个需要使用相同资源的会话 bean- ref，我是否必须在第二个 EJB 中再次声明它？或者有解决方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T16:37:46.107

在 EE 6（在 WebSphere Application Server 8.0 中可用）之前，无法`resource-ref`跨 EJB 共享。您必须`resource-ref`在每个 EJB 中重新声明。

在 EE 6 中，您可以使用诸如 之类的名称声明资源引用`java:module/env/jdbc/employee`，它将对模块中的所有 EJB`java:app`可见（并且对所有模块可见，并且`java:global`对所有应用程序可见）。

# php - 合并2个多维数组并求和

> ID：10354154
> 
> 赞同：1
> 
> 时间：2012-04-27T16:12:01.550
> 
> 标签：php, arrays, multidimensional-array, merge, sum

我有两个存储 x 和 y 坐标的多维数组，我试图将它们合并到一个数组中，同时保留 x 值但将 y 值相加。

阵列 1：

```
Array(
[0] => Array
    (
        [x] => 1327449600000
        [y] => 5
    )

[1] => Array
    (
        [x] => 1327450500000
        [y] => 1
    ) 
```

阵列 2：

```
 Array(
[0] => Array
    (
        [x] => 1327449600000
        [y] => 1
    )

[1] => Array
    (
        [x] => 1327450500000
        [y] => 3
    ) 
```

所以综合结果将是：

```
 Array(
[0] => Array
    (
        [x] => 1327449600000
        [y] => 6
    )

[1] => Array
    (
        [x] => 1327450500000
        [y] => 4
    ) 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T16:18:15.253

您的每个原始数组都是一个向量；让我们允许它们包含任意数量的点（任何维度）：

```
function addPoints( vectorA, vectorB )
{
  if( vectorA.length != vectorB.length ) return [];
  var vectorC = [];
  for( var i=0; i<vectorA.length; ++i )
  {
    var tmp = [];
    for( var j in vectorA[i] ) tmp.push( vectorA[i][j]+vectorB[i][j] );
    vectorC.push( tmp );
  }
  return vectorC;
} 
```

编辑：

我刚刚意识到您正在编写 PHP。请给我一秒钟转换代码。

```
function addPoints( $veca, $vecb )
{
   if( count($veca)!=count($vecb) ) return array();

   $vecc = array();
   for( $i=0; $i<count($veca); ++$i )
   {
      $tmp = array();
      foreach( $veca[$i] as $key => $val ) $tmp[$key] = $val + $vecb[$i][$key];
      $vecc[] = $tmp;
   }
   return $vecc;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T16:27:52.083

```
function add_array($a1, $a2) {
    $c = count($a1);
    for ($i=0;$i<$c;$i++) {
        if (isset($a2[$i]) && isset($a2[$i]['y'])) {
            $a1[$i]['y'] += $a2[$i]['y'];
        }
    }
    return $a1;
} 
```

# javascript - Accurate floating point arithmetic in JavaScript

> ID：10354155
> 
> 赞同：3
> 
> 时间：2012-04-27T16:12:01.933
> 
> 标签：javascript, floating-point, modulus

I am creating number spinner widget in JavaScript to essentially mimic the number field in webkit.

When you change the number, it needs to check to see if the value is not only within the accepted range, but also that it's in step:

```
<input type="number" min="0" max="100" step="1" /> 
```

If a user enters `5.5` the field will truncate this to the closest step lower than the value, which in this case is `5`.

For a step of `2`, if the user entered `5.5`, the result would be `4`.

The equation I was planning on using for this calculation looks like this:

```
...code...
_checkStep: function (val) {
    val ret,
        diff,
        moddedDiff;
    diff = val - this._min;
    moddedDiff = diff % this._step;
    ret = val - moddedDiff;
    return ret;
},
//set elsewhere
_min,
_step,
...more code... 
```

Although for testing purposes, you could simply use this:

```
function checkStep(val, min, step) {
    var ret,
        diff,
        moddedDiff;
    diff = val - min;
    moddedDiff = diff % step;
    ret = val - moddedDiff;
    return ret;
} 
```

This works great for integers and larger values, however I've run into issues with decimals due to how JavaScript handles floating point numbers.

For example:

```
checkStep(0.5, 0, 0.1) //returns 0.4, 0.5 is expected 
```

In analyzing each line, it turns out that `0.5 % 0.1` in JavaScript returns `0.09999999999999998`.

What can be done to make this function more accurate*?

* * *

*accurate being that it works for increments of `0.01` and up.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T20:03:21.783

您可以尝试确保 step 大于 1（通过反复乘以 10），然后进行模数，然后按比例缩小到原始值。例如：

```
function checkStep(val, min, step) {
  var ret,
    diff,
    moddedDiff;
  var pows = 0;
  while( step < 1 ) { // make sure step is > 1
    step *= 10;
    val *= 10;
    min *= 10;
    pows++;
  }
  diff = val - min;
  moddedDiff = diff % step;
  ret = val - moddedDiff;
  return ret / Math.pow( 10, pows );
} 
```

这适用于您提供的示例，但我不能保证它适用于所有情况。在此处查看 jsfiddle：

[http://jsfiddle.net/bCTL6/2/](http://jsfiddle.net/bCTL6/2/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-27T16:15:26.740

没有绝对保证准确的浮点计算。请改用整数计算。在您的 0.1 示例中，您可以用整数计算“0.1”的数量，在用户的最后一位数字之前直观地添加点。

# windows-8 - Visual studio 11 .xaml design view error

> ID：10354156
> 
> 赞同：2
> 
> 时间：2012-04-27T16:12:03.493
> 
> 标签：windows-8, visual-studio-2012

Ok, first off I am confused on what is happening, I open up the code Blankpage.xml and click design view, but when I click on design view I get an error that says this

```
 System.UnauthorizedAccessException

       Access is denied. (Exception from HRESULT: 0x80070005 (E_ACCESSDENIED))

        at Microsoft.Expression.DesignHost.Isolation.Remoting.ThreadMarshaler.DirectInvoke[T](WaitHandle abort, Func`1 func)
          at Microsoft.Expression.DesignHost.Isolation.Remoting.ThreadMarshaler.MarshalOut[TResult,TValue]         (RemoteHandle`1 targetObject, Func`1 func)
       at Microsoft.Expression.DesignHost.Isolation.Remoting.ThreadMarshaler.MarshalOut[TResult,TValue](RemoteHandle`1 targetObject, Func`2 func)
    at Microsoft.Expression.DesignHost.Isolation.Remoting.LocalDesignerService.Microsoft.Expression.DesignHost.IDesignerService.CreateDesigner(IHostSourceItem item, IHostTextEditor editor)
      at Microsoft.Expression.DesignHost.IsolatedDesignerService.CreateDesignerViewInfo(IIsolationTarget isolationTarget, IHostSourceItem item, IHostTextEditor editor, CancellationTokenSource cancelSource)

          System.UnauthorizedAccessException
          Access is denied. (Exception from HRESULT: 0x80070005 (E_ACCESSDENIED))

              Server stack trace: 
                at          Microsoft.Expression.DesignHost.Isolation.Remoting.ThreadMarshaler.CallQueue.WaitForCompletion(BlockingCall call)
        at Microsoft.Expression.DesignHost.Isolation.Remoting.ThreadMarshaler.CallQueue.Invoke(BlockingCall call)
         at Microsoft.Expression.DesignHost.Isolation.Remoting.ThreadMarshaler.CallQueue.Invoke[T](Func`1 func, WaitHandle aborted)
              at Microsoft.Expression.DesignHost.Isolation.Remoting.ThreadMarshaler.MarshalIn[TResult](IRemoteObject targetObject, Func`1 func)
               at         Microsoft.Expression.DesignHost.Isolation.Remoting.RemoteDesignerService.Microsoft.Expression.DesignHost.Isolation.Remoting.IRemoteDesignerService.CreateDesigner(IRemoteHostSourceItem remoteItem, IRemoteHostTextEditor remoteEditor)
          at System.Runtime.Remoting.Messaging.StackBuilderSink._PrivateProcessMessage(IntPtr md, Object[] args, Object server, Object[]& outArgs)
         at System.Runtime.Remoting.Messaging.StackBuilderSink.SyncProcessMessage(IMessage msg)

       Exception rethrown at [0]: 
      at System.Runtime.Remoting.Proxies.RealProxy.HandleReturnMessage(IMessage reqMsg, IMessage retMsg)
       at System.Runtime.Remoting.Proxies.RealProxy.PrivateInvoke(MessageData& msgData, Int32 type)
         at            Microsoft.Expression.DesignHost.Isolation.Remoting.IRemoteDesignerService.CreateDesigner(IRemoteHostSourceItem remoteItem, IRemoteHostTextEditor remoteEditor)
         at Microsoft.Expression.DesignHost.Isolation.Remoting.LocalDesignerService.<>c__DisplayClass8\.           <Microsoft.Expression.DesignHost.IDesignerService.CreateDesigner>b__7(IRemoteDesignerService d)
          at Microsoft.Expression.DesignHost.Isolation.Remoting.ThreadMarshaler.<>c__DisplayClass4`2.<MarshalOut>b__3()
            at Microsoft.Expression.DesignHost.Isolation.Remoting.ThreadMarshaler.DirectInvoke[T](WaitHandle abort, Func`1 func) 
```

... I cant figure out what is wrong, This happened right after I deployed my project as a windows 8 metro application

# java - Java Array to List 问题

> ID：10354159
> 
> 赞同：9
> 
> 时间：2012-04-27T16:12:04.677
> 
> 标签：java

我有以下Java代码，

```
int a[] = new int[] {20, 30} ;
List lis = Arrays.asList(a) ;
System.out.print(lis.contains(20)); 
```

但是，输出是错误的。任何人都可以帮助我，为什么这不给 True ？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-27T16:14:13.557

你得到的不是整数列表，而是整数数组列表，即`List<int[]>`. 您不能创建`List`原始类型的集合（如 ）。

在您的情况下，`lis.contains(20)`将创建一个`Integer`值为 20 的对象并将其与 int 数组进行比较，这显然不相等。

尝试将数组的类型更改为`Integer`，它应该可以工作：

```
Integer a[] = new Integer[] {20, 30} ;
List lis = Arrays.asList(a) ;
System.out.print(lis.contains(20)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T16:22:49.953

静态方法 asList 用作参数 varargs: `...`。仅通过要求`<Integer>`您防止`List<Object>`where a is an Object。

```
int[] a = new int[] {20, 30} ;
List<Integer> lis = Arrays.asList(a) ;
System.out.print(lis.contains(20)); 
```

# python - 将函数分配给变量

> ID：10354163
> 
> 赞同：80
> 
> 时间：2012-04-27T16:12:13.457
> 
> 标签：python

假设我有一个功能

```
def x():
    print(20) 
```

现在我想将该函数分配给一个名为 的变量`y`，这样如果我使用`y`它，它就会再次调用该函数`x`。如果我只是简单地做作业`y = x()`，它就会返回`None`。

* * *

## 回答 #1

> 赞同：127
> 
> 时间：2012-04-27T16:13:16.880

您根本不调用该函数。

```
>>>def x():
>>>    print(20)
>>>y = x
>>>y()
20 
```

括号告诉python你正在调用函数，所以当你把它们放在那里时，它会调用函数并分配*返回*的`y`值（在这种情况下是）。*`x``None`*

 ** * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-04-27T16:14:29.360

当您将函数分配给变量时，您*不*使用 ()，而只是使用函数的名称。

在你的情况下 given`def x(): ...`和 variable`silly_var`你会做这样的事情：

```
silly_var = x 
```

然后你可以调用这个函数

```
x() 
```

或者

```
silly_var() 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-04-27T16:39:52.140

当您执行时，`y=x()`您实际上是将 y 分配给调用函数对象的结果，`x`并且该函数的返回值为`None`. python 中的函数调用是使用`()`. 要进行分配`x to y`，您可以`y`像将`x`函数对象 x 分配给 y 一样`y=x`调用并使用调用函数`y()`

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2018-11-16T17:52:39.553

语法

```
def x():
    print(20) 
```

基本相同`x = lambda: print(20)`（引擎盖下存在一些差异，但对于大多数实际目的，结果相同）。

语法

```
def y(t):
   return t**2 
```

基本相同`y= lambda t: t**2`。当你定义一个函数时，你正在创建一个以函数为值的变量。在第一个示例中，您设置`x`为 function `lambda: print(20)`。所以`x`现在指的是那个函数。 `x()`不是函数，而是函数的*调用*。在 python 中，函数只是一种变量，通常可以像任何其他变量一样使用。例如：

```
def power_function(power):
      return  lambda x : x**power
power_function(3)(2) 
```

这返回 8.`power_function`是一个返回函数作为输出的函数。当它被调用时`3`，它返回一个对输入进行立方处理的函数，所以当在输入上调用*该*`2`函数时，它返回 8。你可以这样做`cube = power_function(3)`，现在`cube(2)`将返回 8。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2018-04-11T04:39:47.277

lambda 应该对这种情况有用。例如，

1.  创建函数 y=x+1 `y=lambda x:x+1`

2.  调用函数 `y(1)` 然后返回`2`。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-12-16T09:16:16.090

我不知道重命名函数并用新名称调用它的价值/用处是什么。但是使用字符串作为函数名，例如从命令行获得的，**有**一些价值/用处：

```
import sys
fun = eval(sys.argv[1])
fun() 
```

在本例中，乐趣 = x。*

# java - 桌面开发中的 JavaFX 2.x？

> ID：10354168
> 
> 赞同：4
> 
> 时间：2012-04-27T16:12:32.917
> 
> 标签：java, desktop, javafx

我只需要为 Java 上的新桌面应用程序寻找技术。我不想使用摇摆，但我找不到好的和透视的替代品。我知道JavaFX，但我有很强的要求：它必须看起来不错，而不是大致在linux、windows和macOx上。JavaFX 在每个平台上都能正常工作吗？我在使用 JavaFX 时会遇到哪些大麻烦？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T15:42:41.403

我在桌面开发中使用 FX。这很棒，但离完美还差得很远。目前还没有 Linux 版本，至于 Mac，它只有 beta 2.1（我现在正在使用）。最让我烦恼的是冻结。[你可以在这里](http://www.oracle.com/technetwork/java/javafx/downloads/devpreview-1429449.html#sb)下载可视化编辑器

BTW Gosling[相信](http://www.zdnet.com.au/gosling-rebirth-of-java-on-desktops-339277112.htm)FX 在桌面开发中比在 RIA 开发中更有用

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T01:53:06.293

绝对应该考虑Eclipse 的[SWT 。](http://www.eclipse.org/swt/)它支持所有提到的三个平台，而且 IMO 比 Swing 更好用。

# macos - CFRunLoop non-blocking wait for a buffer to be filled

> ID：10354176
> 
> 赞同：1
> 
> 时间：2012-04-27T16:12:52.807
> 
> 标签：macos, callback, bluetooth, wait, runloop

I am porting an app reading data from a BT device to Mac. On the mac-specific code, I have a class with the delegate methods for the BT callbacks, like -(void) rfcommChannelData:(...)

On that callback, I fill a buffer with the received data. I have a function called from the app:

```
-(int) m_timedRead:(unsigned char*)buffer length:(unsigned long)numBytes time:(unsigned int)timeout
{

double steps=0.01;
double time = (double)timeout/1000;
bool ready = false;
int read,total=0;
unsigned long restBytes = numBytes;
while(!ready){
    unsigned char *ptr = buffer+total;
    read = [self m_readRFCOMM:(unsigned char*)ptr length:(unsigned long)restBytes];
    total+=read;
    if(total>=numBytes){
        ready=true; continue;
    }
    restBytes = numBytes-total;
    CFRunLoopRunInMode(kCFRunLoopDefaultMode, .4, false);       
    time -= steps;
    if(time<=0){
        ready=true; continue;
    }
} 
```

My problem is that this RunLoop makes the whole app un extremely slow. If I don't use default mode, and create my on runloop with a runlooptimer, the callback method rfcommChannelData never gets called. I create my one runloop with the following code:

```
//  CFStringRef myCustomMode = CFSTR("MyCustomMode");
//  CFRunLoopTimerRef myTimer;
//  myTimer = CFRunLoopTimerCreate(NULL,CFAbsoluteTimeGetCurrent()+1.0,1.0,0,0,foo,NULL);   
//  CFRunLoopAddTimer(CFRunLoopGetCurrent(), myTimer, myCustomMode);
//  CFRunLoopTimerInvalidate(myTimer);
//  CFRelease(myTimer); 
```

Any idea why the default RunLoop slows down the whole app, or how to make my own run loop allow callbacks from rfcommchannel being triggered?

Many thanks,

Anton Albajes-Eizagirre

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T23:33:36.203

如果您正在处理 GUI 应用程序的主线程，请不要在您自己的方法内部运行运行循环。安装运行循环源（或允许框架的异步 API 代表您安装源）并返回主事件循环。也就是说，让执行流程从您的代码中返回并返回给您的调用者。主事件循环运行主线程的运行循环，当源准备好时，它们的回调将触发，这可能会调用您的方法。

# c# - Finding related images in the Amazon Product Advertising API

> ID：10354177
> 
> 赞同：0
> 
> 时间：2012-04-27T16:12:53.663
> 
> 标签：c#, rest, amazon-product-api

Is there a way of requesting Related Images like the Amazon website shows of certain products? I wanted to get the images so that I can mirror the functionality in my own retail client. The Images response group doesn't seem to help.

like this one [http://www.amazon.co.uk/gp/product/B004SGLDM6/ref=s9_simh_gw_p21_d0_g21_i1?pf_rd_m=A3P5ROKL5A1OLE&pf_rd_s=center-2&pf_rd_r=179Q3KXHNZGJQSHFBGZ3&pf_rd_t=101&pf_rd_p=467128533&pf_rd_i=468294](http://www.amazon.co.uk/gp/product/B004SGLDM6/ref=s9_simh_gw_p21_d0_g21_i1?pf_rd_m=A3P5ROKL5A1OLE&pf_rd_s=center-2&pf_rd_r=179Q3KXHNZGJQSHFBGZ3&pf_rd_t=101&pf_rd_p=467128533&pf_rd_i=468294)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T17:55:54.383

首先，我假设您使用的是[Product Advertising API](http://docs.amazonwebservices.com/AWSECommerceService/latest/DG/CHAP_ResponseGroupsList.html)。如果是这样，那么您需要询问[图像响应组](http://docs.amazonwebservices.com/AWSECommerceService/latest/DG/RG_Images.html)

一个示例请求是：

```
http://ecs.amazonaws.com/onca/xml?AWSAccessKeyId=AWSKEY&AssociateTag=ASSOCIATETAG&ItemId=B004SGLDM6&Operation=ItemLookup&ResponseGroup=Images&Service=AWSECommerceService&Timestamp=2012-04-27T17%3A52%3A13Z&Version=2009-03-31&Signature=SIGNITURE 
```

您显然需要将您的密钥、标签和签名放在最后一个 URL 中。

# php - PHP 邮件功能不工作 (jQuery/php)

> ID：10354186
> 
> 赞同：1
> 
> 时间：2012-04-27T16:13:26.367
> 
> 标签：php, jquery, email

我对以下代码有一点问题。当我单击“发送”时，它显示“PHP 警告：mail() [function.mail]：“sendmail_from”未在 php.ini 中设置或自定义“发件人：”标头在 C:** ***** .com**\mail中丢失.php 在第 21 行"

这是 jQuery：

```
$(document).ready(function(){
$("#send").click(function(){

    var valid = '';
    var isr = ' requested.</h6>';
    var name = $("#name").val();
    var mail = $("#email").val();
    var messaggio = $("#message").val();

    if (name.length<1) {
        valid += '<h6>A valid name is'+isr;
    }
    if (!mail.match(/^([a-z0-9._-]+@[a-z0-9._-]+\.[a-z]{2,4}$)/i)) {
        valid += '<h6>A valid e-mail address is'+isr;
    }

    if (valid!='') {
        $("#re").fadeIn("slow");
        $("#re").html("<h6><b>Error:</b></h6>"+valid);
        $("#re").css("background-color","#ffc0c0");
    }

    else {
        var datastr ='name=' + name + '&mail=' + mail + '&messaggio=' + encodeURIComponent(messaggio);
        $("#re").css("display", "block");
        $("#re").css("background-color","#FFFFA0");
        $("#re").html("<h6>Sending..</h6>");
        $("#re").fadeIn("slow");
        setTimeout("send('"+datastr+"')",2000);
    }
    return false;
});
});

function send(datastr){
    $.ajax({    
        type: "POST",
        url: "mail.php",
        data: datastr,
        cache: false,
        success: function(html){
        $("#re").fadeIn("slow");
        $("#re").html(html);
        $("#re").css("background-color","#e1ffc0");
        setTimeout('$("#re").fadeOut("slow")',2000);
    }
    });
} 
```

和 PHP

```
<?php
$mail = $_POST['mail'];
$name = $_POST['name'];
$text = $_POST['messaggio'];
$ip = $_SERVER['REMOTE_ADDR'];

$to = "admin@****.com";

$message = "E-mail received from: ".$name.", ".$mail.".<br />";
$message .= "Messaggio: <br />".$text."<br /><br />";
$message .= "IP: ".$ip."<br />";
$headers = "From: $mail \n";
$headers .= "Reply-To: $mail \n";
$headers .= "MIME-Version: 1.0 \n";
$headers .= "Content-Type: text/html; charset=ISO-8859-1 \n";

 if(mail($to, $message, $headers)){
    echo "<h6>Message sent.</h6>";
}

else{ 
    echo "<h6>Ops! We've got a problem! :(</h6>";
}
?> 
```

提到的行是“if（mail（$to，$message，$headers））{”但我不明白这个错误。

我在另一个网站（另一个域）上使用相同的代码，它运行没有问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T16:21:18.920

标头需要以`\r\n`not终止`\n`。

```
$headers = "From: $mail \r\n"; 
$headers .= "Reply-To: $mail \r\n";
$headers .= "MIME-Version: 1.0 \r\n";
$headers .= "Content-Type: text/html; charset=ISO-8859-1 \r\n"; 
```

您的代码中还存在**标头注入漏洞**。您应该验证您放入电子邮件标题的所有帖子数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T16:16:28.430

您是否检查过 PHP.INI 中的 SMTP 设置？

在您的代码或 php.ini 中进行设置：

```
 <?php 
     ini_set("SMTP","smtp-server-address" ); 
     ini_set('sendmail_from', 'from-email-address'); 
   ?> 
```

如果您通过不同于 25 的端口发送，您还可以覆盖默认值：

```
 ini_set('smtp_port', '2525'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T16:22:08.957

您可以尝试将您的 FROM 标头替换为：

```
$headers = "From: $name <$mail>\r\n"; 
```

在 lt/gt 括号内指定电子邮件地址。

另一种想法是确保确实传递了 $_POST['mail'] 值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-27T16:31:45.263

我想你可能有一个来自你的领域的回车。您需要清理 $_POST 中的数据输入，例如：

```
$mail = trim($_POST['mail']); 
```

如果输入数据库，您可能还想在正则表达式中使用 mysql_real_escape_string 或类似的东西。

同样为了代码的一致性：

```
$headers = "From: ".$mail." \r\n";
$headers .= "Reply-To: ".$mail." \r\n"; 
```

另外我认为您缺少正确的邮件参数。根据邮件文档，您缺少主题参数：

```
mail($to, $subject, $message, $headers); 
```

# deployment - TeamCity Build & Deploy：如何将相关工件路径传递给脚本？

> ID：10354187
> 
> 赞同：19
> 
> 时间：2012-04-27T16:13:27.167
> 
> 标签：deployment, build-automation, teamcity, teamcity-7.0

如何将工件路径传递给 TeamCity 中的脚本。场景是这样的

1.  构建项目
2.  部署项目（与 #1 的工件依赖项）

第 2 步由一个脚本组成，该脚本

1.  停止服务（解锁文件）
2.  将构建工件复制到服务器
3.  重新启动服务

我在第 2 步中苦苦挣扎，我想我需要将构建工件的路径传递到脚本中，但我看不到你是怎么做的？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-27T17:15:13.697

我们做这样的事情。这不是 100% 清楚，但看起来您希望在 TeamCity 中将构建和部署作为两个单独的构建进行，并具有来自主构建上的部署构建的工件依赖关系，这正是我们所做的。这是我们如何做到的。

*   从听起来好像您已经完成的主构建中设置您的工件。

    ```
    示例：**\bin\release\*.* => bin
    ```

*   设置工件依赖项（我们也执行快照依赖项，但您不必这样做）以从主构建中提取您的工件并将它们放入部署构建中的本地文件夹中。

    ```
    示例：工件路径：bin\**\*.* 目标路径：bin\
    ```

*   我们混合使用 MSBuild 和 PowerShell 来完成实际的部署工作。在每种情况下，您都可以使用相对路径引用工件。

    如果构建工作文件夹如下所示：

    ```
    根
     |- bin（从主构建中提取的工件）
     |- 源
     |- build（您的构建和部署脚本所在的位置）

    ```

    您可以从位于构建文件夹中的部署脚本访问 bin 文件，例如：

    ```
    ..\bin\[你的文件]
    ```

然后，您可以像这样将路径传递给您的构建工件

```
%teamcity.build.checkoutDir%\bin\ 
```

# javascript - 使用 Javascript 打开客户端程序

> ID：10354192
> 
> 赞同：1
> 
> 时间：2012-04-27T16:13:51.810
> 
> 标签：javascript, local-storage

我创建了一个 Java 程序，它需要一些命令行参数来运行。我需要对程序进行浏览器扩展，以便可以使用浏览器中的数据打开程序。

我知道 Javascript 不允许任何本地文件访问，但是有一些程序可以完成我需要的任务。

示例是 Internet 下载管理器，它具有用于运行它的浏览器扩展，从浏览器接收命令行参数。显然，包括 Chrome 和 Firefox 在内的大多数浏览器的扩展都是使用 Javascript 制作的？有没有办法通过 JavaScript 执行本地程序（我认为肯定有办法）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T16:19:40.923

您不能直接从客户端 PC 上的 JS 沙箱中运行任何东西（想想安全风险！）但是还有其他方法：让您的应用程序在安装时将自己注册为协议处理程序，并在您的页面上使用带有此协议的链接（想想如何电子邮件客户端服务于 mailto：或 torrent 客户端服务于磁铁：链接）。由于您同时控制发送方和接收方，因此您可以在其中传递几乎任何信息。[您可以在 MSDN](http://msdn.microsoft.com/en-us/library/aa767914%28v=vs.85%29.aspx)找到用于注册句柄的 Windows 示例。如果您需要它用于任何其他系统，我很确定搜索“system_or_gui_name 注册协议处理程序”将首先显示您想要的结果。

# javascript - IE9 中的原型 $$

> ID：10354193
> 
> 赞同：1
> 
> 时间：2012-04-27T16:13:52.340
> 
> 标签：javascript, internet-explorer, prototypejs, internet-explorer-9

我对原型还很陌生，但我遇到了一些奇怪的行为。

据我了解，使用`$$('yourcssselector')`允许您使用 CSS 选择器选择多个元素。在 FF、Chrome、Safari 中，这一切都很好。

但是，在 IE9 中，我的代码中使用它时遇到了未定义的错误。

我发现如果你运行这个：

```
console.log($$('.btn1').size()); 
```

我得到：

```
LOG: 1 
```

但是，如果我再次运行完全相同的查询，我会得到

```
LOG: 0 
```

在我的代码中，这个 .btn1 被这种选择器多次调用，所以我想知道我是否正确使用它，或者这是一个常见的 IE 错误？

# opengl - 顶点着色器中的透视划分？

> ID：10354194
> 
> 赞同：5
> 
> 时间：2012-04-27T16:14:03.343
> 
> 标签：opengl, opengl-3

在顶点着色器中使用透视矩阵时，我应该编写代码来除以 w 还是在稍后阶段自动完成？

我提出问题的原因是我看到很多顶点着色器使用：

```
gl_Position = matrix * pos; 
```

如果有一个后期阶段将向量与其 w 分量相除，这是有道理的。

但是，直到我在顶点着色器中使用以下内容之前，我才让它工作：

```
gl_Position = matrix * pos;
gl_Position = gl_Position / gl_Position.w; 
```

第二个示例是正确的示例还是缺少其他设置？

换一种说法：[OpenGL顶点变换](http://www.songho.ca/opengl/gl_transform.html)（第一张图像）中显示的哪些步骤我必须在顶点着色器中编写？

我确定 ModelView 和 Projection 矩阵属于那里（或两者的合并）。视口变换不是顶点着色器的一部分，但是`divide by w`呢？

**我的设置**是一些简单的三角形，x/y/z 的坐标在 [-1 1] 内。

透视矩阵应该将坐标从 z=-1 到 -10 投影到 z=-1，x=[-1,1]，y=[-1,1]。

```
-1.0   0.0   0.0   0.0
 0.0  -1.0   0.0   0.0
 0.0   0.0  -1.2  -2.2
 0.0   0.0   1.0   0.0 
```

它是由以下人员生成的：

```
x = 2.0f * zNear / (xMax - xMin);
y = 2.0f * zNear / (yMax - yMin);
a = -(xMax + xMin) / (xMax - xMin);
b = -(yMax + yMin) / (yMax - yMin);
c = (zFar + zNear) / (zNear - zFar);
d = -(2.0f * zFar * zNear) / (zNear - zFar); 
```

制作矩阵 P：

```
x, 0, a, 0
0, y, b, 0
0, 0, c, d
0, 0, 1, 0; 
```

最后，我通过 matrix = P * T 生成最终矩阵，其中 T 是平移 (0,0,-2)

我试图在 CPU 上进行数学运算，它似乎可以产生预期的结果，但是我也手动进行除以 w 。

**更新**：已解决但需要理解

我否定了矩阵中的所有组件（乘以-1），现在它可以工作了。上面的示例还存在将正负 z 坐标投影到投影平面上的问题，该更改也解决了该问题。

欢迎任何参考或解释为什么它通过此更改得到解决。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-27T16:23:43.067

您不应该在顶点着色器中自己进行透视分割，稍后会在管道中自动完成。

如果这不起作用，您可以显示一些代码或更多地描述问题吗？我很惊讶它对你产生了影响。

# git - Git：如何在反向合并后提交本地更改

> ID：10354195
> 
> 赞同：2
> 
> 时间：2012-04-27T16:14:06.457
> 
> 标签：git, merge, commit, reverse

现在的情况：

两名开发人员正在同一个名为 Sprint1的**远程分支中工作：**

开发人员 1：更改 2 个文件中的一些代码，提交（意外添加了 3 个其他文件），然后推送到 Sprint1。

开发人员 2：不知何故，开发人员 1 还意外添加了 3 个我们不想推送的文件。因此，他在开发人员 1 的更改之前将更改反向合并回提交。

此时，开发人员 1 想要再次尝试提交他的两个文件（而不是他仍在处理的额外 3 个文件）并推送到远程分支（Sprint1）。问题是 pull 将覆盖 Developers 1 本地文件并有效地“删除”他在所有 5 个文件中的本地更改。

开发人员 1 获得最新的 head 但这次能够推送正确的文件而不会丢失更改的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T16:29:02.257

让开发人员 1 使用他当前的本地编辑创建另一个分支，然后在他的本地文件上的 Sprint1 分支上向他的 Sprint1 分支（不是他创建的新分支）发出拉取请求。然后，他可以`git rm`在新分支中运行他不想提交的三个文件，然后将该分支合并回 Sprint1。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T16:38:28.387

git 的好处是，你一旦提交就很难完全删除。如果您不想强制推送到存储库以删除这两个提交（原始提交和恢复提交的提交）并从头开始提交您的更改，那么 Developer 1 可以执行以下操作：

1.  `git pull`- 好的，我们拉回还原提交并拥有这样的历史记录：

    ```
    ca798ca revert 'commit1'
    cf76cf7 commit1 
    ```

    好吧，我们“丢失”了我们的更改，但别担心 - 下一步会将它们带回来。

2.  `git revert -n HEAD`（或显式`git revert -n ca798ca`）恢复还原提交。现在原始提交的所有更改（必要和不必要的更改）都在索引中，但尚未提交（感谢`-n`选项）。

3.  `git reset HEAD`将所有更改从索引移回工作目录。

4.  `git add necessary_file && git commit -m 'necessary changes'`仅将必要的更改添加到索引并提交它们。您不希望在此提交中进行的所有更改都将保留在您的工作目录中。

5.  `git push`与同事分享您的结果。

这些步骤是按原样提供的，所以如果您对上述内容有不明白的地方，请在执行之前询问。否则，事情可能会变得更加混乱。

# java - 实现一个没有任何数组列表的堆

> ID：10354197
> 
> 赞同：0
> 
> 时间：2012-04-27T16:14:14.480
> 
> 标签：java, data-structures, arraylist, heap

我的插入方法有问题。当我去添加一个需要交换的数字时，我得到一个索引越界异常。这里： Collections.swap(table, table.get(parent), table.get(child)); 这就是我添加到堆中的方式。tHeap.insert(14); 谢谢你的帮助。

```
 public class Heap {
private ArrayList<Integer> table;

public Heap() {
    table = new ArrayList<Integer>();
}

public void insert(Integer toInsert) {
    table.add(toInsert);
    int child = table.size() - 1;
    int parent = (child - 1) / 2;
    //TextIO.putln("1  " + parent + " " + toInsert + " " + child);
    while (parent >= 0 && table.get(parent) > table.get(child)) {
        TextIO.putln("Swapping: " + parent + " Parent for Child: " + child);
        Collections.swap(table, table.get(parent), table.get(child));
    }

}

public void printTable() {
    for (int i = 0; i < table.size(); i++) {
        TextIO.putln("Index: " + i + " Data: " + table.get(i));

    }

}
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T14:09:42.113

I think you mean `Collections.swap(table, parent, child);`? `ArrayList.get` will return the element at an index ([Java ArrayList API](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/ArrayList.html#get%28int%29)) `Collections.swap` swaps the elements at an index ([Java Collections API](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Collections.html#swap%28java.util.List,%20int,%20int%29)). You want to be passing in the indices, not the values at the indices. Also I think in your while loop you may want to be updating child and parent.

# java - 从 JAXB (WebService) 生成 XML 时出错

> ID：10354200
> 
> 赞同：1
> 
> 时间：2012-04-27T16:14:17.570
> 
> 标签：java, web-services, jaxb, marshalling

我有以下代码正在返回`Foo`

```
@GET
@Produces (MediaType.APPLICATION_XML)
public Foo getXML (){
    System.out.println ("getXML Request");
    Foo f = new Foo();
    d.setA("test");
    d.setB("xyxyx");
    return f;
} 
```

我的`Foo`班级是

```
@XmlRootElement
public class Foo{

    public void setA(String a) {
        this.a = a;
    }

    public void setB(String b) {
        this.b = b;
    }

        public String getB (){
           return b;
        }

        public String getA (){
           return a;
        }

    @XmlAttribute(name="atrribB")
    private String b;

    @XmlElement(name="elementA")
    private String a;

} 
```

这样做时，我得到了错误`Foo`，`Class has two properties of the same name "A"`对于`B`.

当我删除`getters`这两个属性的方法时，一切都很好。我想不创建getter setter并让字段公开吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T16:28:43.180

您需要注释 get 方法

```
@XmlRootElement
public class Foo{

    public void setA(String a) {
        this.a = a;
    }

    public void setB(String b) {
        this.b = b;
    }

    @XmlAttribute(name="atrribB")
    public String getB (){
       return b;
    }

    @XmlElement(name="elementA")
    public String getA (){
       return a;
    }

    private String b;

    private String a;

} 
```

或指定`@XmlAccessorType(XmlAccessType.FIELD)`。

```
@XmlRootElement
@XmlAccessorType(XmlAccessType.FIELD)
public class Foo{

    public void setA(String a) {
        this.a = a;
    }

    public void setB(String b) {
        this.b = b;
    }

    public String getB (){
       return b;
    }

    public String getA (){
       return a;
    }

    @XmlAttribute(name="atrribB")
    private String b;

    @XmlElement(name="elementA")
    private String a;

} 
```

**了解更多信息**

*   [http://blog.bdoughan.com/2011/06/using-jaxbs-xmlaccessortype-to.html](http://blog.bdoughan.com/2011/06/using-jaxbs-xmlaccessortype-to.html)

# java - 从 Servlet 连接到 Oracle 数据库需要很长时间

> ID：10354211
> 
> 赞同：1
> 
> 时间：2012-04-27T16:14:42.040
> 
> 标签：java, database, oracle, servlets

我正在开发一个仪表板应用程序，我需要连续（每 30 秒）轮询数据库以检查数据库是否启动并运行。为了确定数据库是否正常工作，我正在做一个简单的查询以从表中仅检索 1 行。

一切正常，但问题是 servlet 需要很长时间才能建立与数据库的连接并检索一行。此过程大约需要 15 秒。我将相同的代码复制到一个 java 文件中，以确定它是否仍然需要那么多时间。但是，正如我所怀疑的，java 程序运行只需要 1 或 2 秒。我处理这件事的方式似乎有问题。

我在 doGet() 函数中编写了数据库连接代码，因为我需要反复轮询数据库。这是我犯的错误吗？我应该在 init() 中编写数据库连接代码并在 doGet() 函数中编写查询吗？

任何帮助将不胜感激。谢谢

这是可能帮助您理解我的问题的部分代码：

```
 protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
//Send Request to DB CAT
LinkedHashMap<String,String> hm=new LinkedHashMap<String,String>();
   try
   {
    DriverManager.registerDriver(new oracle.jdbc.driver.OracleDriver());
    //CONNECT TO DB
    String serverName = "*****.1dc.com"; // * is just to hide the real database name
    int port = 1535;
    String user = "mbank";
    String password = "****";
    String SID = "mbkwqa";
    String URL = "jdbc:oracle:thin:@" + serverName + ":" + port + ":" + SID;
    Connection conndb = DriverManager.getConnection(URL, user, password);
    String SQL = "select CITY from ADDRESS where rownum<=1";
    Statement stat = conndb.createStatement();
    ResultSet rs = stat.executeQuery(SQL);
    while (rs.next()) 
    {
        System.out.println(rs.getString(1));
    }
    stat.close();
    conndb.close(); 
    hm.put("Server1","OK");
    }
      catch(Exception e)
    {
        hm.put("Server1","Failed");         
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T16:23:47.050

您正在从 doGet 函数连接到数据库，这是非常糟糕的做法。如果您的 servlet 有 100、1000、10000 个请求，会发生什么？

您需要审查您的设计。

请为您的 Oracle 数据源创建连接池，将其放入 Servlet ApplicationContext，创建 Dao 类并从 doGet Servlet 调用您的 Dao 类。

我相信这些教程会有所帮助：

[http://balusc.blogspot.com/2008/07/dao-tutorial-data-layer.html](http://balusc.blogspot.com/2008/07/dao-tutorial-data-layer.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T16:22:48.840

这不是一个好的做法，每次请求到来时都建立与数据库的连接。您应该创建连接池，它将节省大量连接时间。看看tomcat conntion pool或apache DBCP。

# iphone - iPhone - 试图在表格视图中显示 2 种不同的对象类型

> ID：10354213
> 
> 赞同：0
> 
> 时间：2012-04-27T16:14:50.280
> 
> 标签：iphone, objective-c, ios, arrays, uitableview

我有一个 UITableView，我用它来尝试显示 2 个不同的对象 - 收据和里程。

这是我用来尝试完成此操作的原始代码：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{    
    Project *project = [[Project alloc] init];
    project = [appDelegate.projects objectAtIndex:indexPath.section];

    if (indexPath.row >= [project.receipts count])
    {
        if (indexPath.row >= [project.milages count]){
            return NULL;
        }
        else {
            //Create a new journey cell and set its UI values
            MilageCell *cell = (MilageCell *)[tableView 
                                              dequeueReusableCellWithIdentifier:@"MilageCell"];
            Milage *milage = [project.milages objectAtIndex:indexPath.row];
            cell.locationLabel.text = milage.location;
            cell.dateLabel.text = [NSString stringWithFormat:@"%@", milage.date];
            cell.totalLabel.text = [NSString stringWithFormat:@"£%@", milage.total];
            return cell;
        }
    }
    else 
    {
        ReceiptCell *cell = (ReceiptCell *)[tableView 
                                            dequeueReusableCellWithIdentifier:@"ReceiptCell"];
        Receipt *receipt = [project.receipts objectAtIndex:indexPath.row];
        cell.dateLabel.text = receipt.receiptDate;
        cell.descriptionLabel.text = receipt.descriptionNote;
        cell.amountLabel.text = [NSString stringWithFormat:@"£%@", receipt.amount];
        return cell;
    }

} 
```

我知道，如果我在每个数组（project.receipts 和 project.milages）中有 1 个对象，那么这段代码将根本不起作用。我也知道你不能从这个方法返回 NULL。我想做的是以某种方式显示我所有的收据对象，然后是我的所有里程对象（所以说表格视图中的第 0 部分有 3 个收据和 3 个里程数，它会首先显示收据，然后是里程数）。但是我完全不知道该怎么做，有人可以解释我如何解决这个问题吗？有没有什么方法可以构造一个包含所有里程和收据对象的数组，然后以某种方式辨别我在这个方法中拥有什么样的对象，以便使用适当的单元格类型？

非常感谢，

杰克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T16:52:41.443

试试这个，我刚刚删除了一个 if 条件并`[project.milages count]`从`index.row`Receipt 单元格中减去了。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{    
    Project *project = [[Project alloc] init];
    project = [appDelegate.projects objectAtIndex:indexPath.section];

        if (indexPath.row >= [project.milages count]){
            ReceiptCell *cell = (ReceiptCell *)[tableView 
                                                dequeueReusableCellWithIdentifier:@"ReceiptCell"];
            Receipt *receipt = [project.receipts objectAtIndex:indexPath.row-[project.milages count]];
            cell.dateLabel.text = receipt.receiptDate;
            cell.descriptionLabel.text = receipt.descriptionNote;
            cell.amountLabel.text = [NSString stringWithFormat:@"£%@", receipt.amount];
            return cell;
        }
        else {
            //Create a new journey cell and set its UI values
            MilageCell *cell = (MilageCell *)[tableView 
                                              dequeueReusableCellWithIdentifier:@"MilageCell"];
            Milage *milage = [project.milages objectAtIndex:indexPath.row];
            cell.locationLabel.text = milage.location;
            cell.dateLabel.text = [NSString stringWithFormat:@"%@", milage.date];
            cell.totalLabel.text = [NSString stringWithFormat:@"£%@", milage.total];
            return cell;
        }
} 
```

您还可以将 an`UITableView`与两个不同的部分一起使用。

# php - 如何与facebook时间线整合分享活动？

> ID：10354214
> 
> 赞同：0
> 
> 时间：2012-04-27T16:14:55.213
> 
> 标签：php, facebook

我想与 facebook 时间轴集成，以便我网站上的每个活动都在用户的 facebook 时间轴上共享。我之前习惯使用发布流权限在用户的墙上发布活动，并且在我的网站上注册时会出现第二个对话框来获取发布流权限。

但是我最近观察到一些网站正在做一些不同的事情，在这些网站上注册时，您将永远不会获得发布流权限的第二个对话框，并且每个活动都将在 fb 墙上共享。如果有人能详细解释我会很棒，我也在 php 中做这一切。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T16:36:12.223

您所描述的是开放图操作 (OG)。启用 OG 的网站使用的是不需要确认的“publish_action”，而不是“publish_stream”。所有 OG 操作都是针对 OG 对象发布的，这些对象通常是网页。查看[https://developers.facebook.com/docs/opengraph/](https://developers.facebook.com/docs/opengraph/)上的 Open Graph 简介，然后按照[https://developers.facebook.com/docs/opengraph/tutorial/](https://developers.facebook.com/docs/opengraph/tutorial/)上的教程了解如何为您的网站实施它。

# blackberry - 在黑莓 java 上完成后，如何使 gif 消失？

> ID：10354219
> 
> 赞同：3
> 
> 时间：2012-04-27T16:15:28.927
> 
> 标签：blackberry, java-me, gif

我知道如何加载 gif 并让它运行，但你如何让它消失？

IE。它位于另一个位图背景之上，看起来像是与背景交互，我希望它在完成一次后消失。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T16:18:30.347

您可以将 gif 设置为不重复，并使最终帧 100% 透明。

# mysql - 输出的数据显示每个相关记录，而不是最后一个字段中没有数据的记录

> ID：10354224
> 
> 赞同：0
> 
> 时间：2012-04-27T16:15:43.377
> 
> 标签：mysql

我正在输出一个游轮列表以显示可用性状态，但是我在每个舱室状态下多次获得每个游轮，我只想要游轮，那么如果所有舱室都售罄，则输出的状态应该是 C，否则为 A

这是我的疑问

```
<?php
$maketemp = "CREATE TEMPORARY TABLE temp (
                 `sailingId` varchar(5) NOT NULL,
                 marketCurrency varchar(3),
                 `Status` varchar(1)
             )";

mysql_query( $maketemp, $connection ) or
    die ( "Sql error : " . mysql_error ( ) );

$inserttemp = "INSERT INTO
                   temp
               SELECT
                   code AS sailingId,
                   'USD' AS marketCurrency,
                   CASE
                       WHEN fares_usa.status = 'sold_out' THEN 'C'
                   END AS Status
               FROM
                   cruises,
                   fares_usa
               WHERE
                   live ='Y' AND
                   cruises.id = fares_usa.cruise_id";

mysql_query( $inserttemp, $connection ) or
    die ( "Sql error : " . mysql_error ( ) );

$select = "SELECT sailingId, marketCurrency, Status FROM temp";

$export = mysql_query ( $select, $connection ) or
    die ( "Sql error : " . mysql_error( ) );

$fields = mysql_num_fields ( $export ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T08:03:02.197

所以我就是这样做的...

```
 $inserttemp = "INSERT INTO temp SELECT code AS sailingId, 'USD' AS marketCurrency, CASE WHEN GROUP_CONCAT(DISTINCT status) = 'Sold Out' THEN 'C' ELSE 'A' END AS Status FROM cruises, fares_usa WHERE live ='Y' AND cruises.id = fares_usa.cruise_id GROUP BY cruises.code"; 
```

结果 ！

# wpf - Graphics.CopyFromScreen 有时会捕获透明窗口，有时不会

> ID：10354232
> 
> 赞同：4
> 
> 时间：2012-04-27T16:16:00.063
> 
> 标签：wpf, winforms, graphics, screen-capture

我正在使用 System.Drawing.Graphics.CopyFromScreen 来获取桌面的部分屏幕截图。我注意到一些奇怪的行为。在某些机器上，当应用程序 (WPF) 窗口具有 AllowsTransparency="True" 时，调用 CopyFromScreen 将捕获窗口“下方”的内容。但在其他机器上，它也会捕获调用窗口。

我已经在许多机器和操作系统上尝试过，但没有找到模式。在 XP 和 Windows 7 笔记本电脑上，它在透明窗口下捕获。在我们拥有的一个 Windows 7 桌面上，它捕获了窗口本身。Aero 或其他 Windows 7 显示功能似乎没有什么区别。

会不会是显卡问题？有没有办法在所有机器上获得一致的行为，或者预测或检测何时会发生此问题？

**编辑**感谢下面 Hans Passant 提供的链接，以及一些进一步的测试，我现在明白这个问题只与窗口透明度有关。在某些机器上，CopyFromScreen 捕获所有窗口，在其他机器上它只捕获非透明窗口。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T16:31:23.627

不太确定有时不是行为。自 Aero 以来，分层窗口的行为一直很奇怪。可以确定的是，Graphics.CopyFromScreen() 默认情况下不会捕获分层窗口，除非您使用指定 CopyPixelOperation 的重载。必需的选项是 CaptureBlt，描述为：

> 层叠在窗口顶部的窗口包含在生成的图像中。默认情况下，图像仅包含您的窗口。

这是不准确的，如果它是分层窗口，则不会捕获“您的窗口”。更糟糕的是该方法有一个错误。您不仅需要 CaptureBlt，还需要 SourceCopy。并且参数验证代码不允许这种组合，当您尝试使用它时会收到 InvalidEnumArgumentException。

好吧，GDI+ 是一个包'o bug。您会在[此答案](https://stackoverflow.com/questions/10233055/how-to-get-screenshot-to-include-the-invoking-window-on-xp/10234693#10234693)中找到解决此问题所需的丑陋 pinvoke 代码。

# firefox - Firefox 插件生成器和 Jquery Mobile

> ID：10354233
> 
> 赞同：0
> 
> 时间：2012-04-27T16:16:02.130
> 
> 标签：firefox, jquery-mobile, firefox-addon, firefox-addon-sdk

我在这里尽我所能将 jquerymobile.1.0.1 插入到我为 firefox 构建的扩展中。

我可以安装，链接到任何其他脚本，一切似乎都很好，但是让 jquerymobile 工作时遇到了各种各样的错误。

我尝试通过附加构建器上传我尝试远程链接文件我尝试将文件复制并粘贴到其他代码中......没有任何效果。

我已经为 safari、chrome 和 opera 编写了这个扩展，没有问题，但是 Firefox 阻塞了我在代码中链接到/包含 jquerymobile 的第二个返回这个错误：

时间戳：12-04-27 12:10:33 PM 错误：未捕获的异常：[异常...“组件返回失败代码：0x80004005（NS_ERROR_FAILURE）[nsIDOMHistory.replaceState]”nsresult：“0x80004005（NS_ERROR_FAILURE）”位置：“ JS 框架 :: resource://jid0-d4zlaxz3cfuahkcdoecsmya637m-at-jetpack/idesireit/data/js/jquery.mobile-1.0.1.min.js :: :: line 72" data: no]

还有一个关于“unallowed unicode”的错误，我没有机会复制或粘贴，但我还没有看到有几次保存...

我读过上面的错误可能是由跨域函数引起的，但是我所有的跨域函数都在另一个 js 文件中，并且它们都工作得很好（从我可以使用 jquerymobile 导航到的那些判断是正确的现在 ）

我是新手 - 如果我的错误是基于我的愚蠢，请轻描淡写：O

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T04:35:38.617

我继续创建了一个全新的扩展，只包含弹出窗口，在弹出窗口中，称为 jquery 和 jquery.mobile。

我立即再次收到此错误。

我将继续使用我在仪表板小部件上使用的替代 UI，我在这方面浪费了太多时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-28T19:18:39.740

该错误在 addonsdk 中，而不是在 JQ Mobile 中。任何访问或操作面板中的 window.history 对象的尝试都会引发此错误。

# javascript - 将当前页面作为模板发送 - HTML

> ID：10354234
> 
> 赞同：1
> 
> 时间：2012-04-27T16:16:05.297
> 
> 标签：javascript, html, mailto

`mailto:`我需要使用HTML、JavaScript 中的函数将当前页面作为模板邮寄。我什至可以使用`mailto:`函数附加文件。但我不知道如何将当前页面创建为模板并将其附加到邮件中。帮我做这件事。

# java - jni - 应用程序崩溃

> ID：10354236
> 
> 赞同：2
> 
> 时间：2012-04-27T16:16:20.413
> 
> 标签：java, android, android-ndk, java-native-interface

这是一个与 NDK 和 Android SDK 有关的问题。目前，我的 C 代码正在调用 Java 中定义的方法。此方法称为 callFromNDK()。

在这个方法中，我引用了一个媒体播放器的实例来播放一个简短的测试音。callFromNDK() 每 2 秒调用一次。测试音本身是一秒。

我看到的是（SIGSEGV），代码 1（SEGV_MAPERR），有时是故障地址 fffffff4。

我想知道这是不是因为媒体播放器实例是在与它正在使用的上下文不同的上下文中创建的？

这是相关的代码[Java文件]

```
public class Canvastutorial extends Activity {
    private static MediaPlayer mediaPlayer = null;
    public void callFromNDK() {
        if (mediaPlayer != null) {
            mediaPlayer.start();
        }
    }

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        mediaPlayer = MediaPlayer.create(getApplicationContext(), R.raw.audioclip);
        mediaPlayer.setLooping(false);
    }

    @Override
    protected void onDestroy() {
        mediaPlayer.release();
        mediaPlayer = null;
        System.gc();
        super.onDestroy();
    }

    @Override
    protected void onPause() {
        stopAndPrepare();
        super.onPause();
    }   

    private void stopAndPrepare() {
            mediaPlayer.stop();
            try {
                mediaPlayer.prepare();
            } catch (IllegalStateException e) {
                e.printStackTrace();
            } catch (IOException e) {
                e.printStackTrace();
            }
            mediaPlayer.seekTo(0);
    }
} 
```

应用崩溃时的LogCat如下：

```
04-27 10:42:13.228: I/DEBUG(8926): Build fingerprint: 'google/passion/passion:2.3.6/GRK39F/189904:user/release-keys'
04-27 10:42:13.228: I/DEBUG(8926): pid: 10362, tid: 11222  >>> <package_name> <<<
04-27 10:42:13.228: I/DEBUG(8926): signal 11 (SIGSEGV), code 1 (SEGV_MAPERR), fault addr fffffff4
04-27 10:42:13.238: I/DEBUG(8926):  r0 4214cdc0  r1 00000000  r2 00000000  r3 0000ce68
04-27 10:42:13.238: I/DEBUG(8926):  r4 44628398  r5 00000000  r6 4472fbd8  r7 0000000e
04-27 10:42:13.238: I/DEBUG(8926):  r8 80018000  r9 00000000  10 00000000  fp 800a5368
04-27 10:42:13.238: I/DEBUG(8926):  ip 00000000  sp 4472fb88  lr 8001d084  pc 8001d090  cpsr 60000010
04-27 10:42:13.238: I/DEBUG(8926):  d0  00650072006800b8  d1  00000044bed7f457
04-27 10:42:13.238: I/DEBUG(8926):  d2  0069006400650052  d3  004d0049002e0040
04-27 10:42:13.238: I/DEBUG(8926):  d4  0061006900640065  d5  00790061006c0050
04-27 10:42:13.238: I/DEBUG(8926):  d6  0065005300720065  d7  0063006900760072
04-27 10:42:13.238: I/DEBUG(8926):  d8  0000000000000000  d9  0000000042ba56de
04-27 10:42:13.238: I/DEBUG(8926):  d10 0000000000000000  d11 0000000000000000
04-27 10:42:13.238: I/DEBUG(8926):  d12 0000000000000000  d13 0000000000000000
04-27 10:42:13.238: I/DEBUG(8926):  d14 0000000000000000  d15 0000000000000000
04-27 10:42:13.238: I/DEBUG(8926):  d16 0000000000000001  d17 c053000000000000
04-27 10:42:13.238: I/DEBUG(8926):  d18 0000000000000000  d19 0000000000000000
04-27 10:42:13.238: I/DEBUG(8926):  d20 3ff0000000000000  d21 8000000000000000
04-27 10:42:13.238: I/DEBUG(8926):  d22 0000000000000000  d23 ff00000000000000
04-27 10:42:13.238: I/DEBUG(8926):  d24 ff00000000000000  d25 ff00000000000000
04-27 10:42:13.238: I/DEBUG(8926):  d26 0100010001000100  d27 0100010001000100
04-27 10:42:13.238: I/DEBUG(8926):  d28 0100010001000100  d29 3ff0000000000000
04-27 10:42:13.238: I/DEBUG(8926):  d30 0000000000000000  d31 3ff0000000000000
04-27 10:42:13.238: I/DEBUG(8926):  scr 60000012
04-27 10:42:13.328: I/DEBUG(8926):          #00  pc 0001d090  /system/lib/libdvm.so
04-27 10:42:13.328: I/DEBUG(8926):          #01  pc 000220e4  /system/lib/libdvm.so
04-27 10:42:13.328: I/DEBUG(8926):          #02  pc 00020fdc  /system/lib/libdvm.so
04-27 10:42:13.328: I/DEBUG(8926):          #03  pc 0005fc40  /system/lib/libdvm.so
04-27 10:42:13.328: I/DEBUG(8926):          #04  pc 0004cff8  /system/lib/libdvm.so
04-27 10:42:13.328: I/DEBUG(8926):          #05  pc 00001590  /data/data/<package_name>/lib/libtest-jni.so
04-27 10:42:13.328: I/DEBUG(8926):          #06  pc 000016ca  /data/data/<package_name>/lib/libtest-jni.so
04-27 10:42:13.328: I/DEBUG(8926):          #07  pc 000118e4  /system/lib/libc.so
04-27 10:42:13.328: I/DEBUG(8926):          #08  pc 000114b0  /system/lib/libc.so
04-27 10:42:13.328: I/DEBUG(8926): code around pc:
04-27 10:42:13.328: I/DEBUG(8926): 8001d070 fa0108cc ea000017 e3a00001 e3a09000 
04-27 10:42:13.328: I/DEBUG(8926): 8001d080 ebffff72 e2450014 e5905000 e5909004 
04-27 10:42:13.328: I/DEBUG(8926): 8001d090 e515200c e5963018 e3520000 1592a000 
04-27 10:42:13.328: I/DEBUG(8926): 8001d0a0 e3a01000 0affff8a e1f970b6 e5862010 
04-27 10:42:13.328: I/DEBUG(8926): 8001d0b0 e59a1028 e5835028 e590a010 e1a04009 
04-27 10:42:13.328: I/DEBUG(8926): code around lr:
04-27 10:42:13.328: I/DEBUG(8926): 8001d064 e088f30c e1a01000 e5960018 fa0108cc 
04-27 10:42:13.328: I/DEBUG(8926): 8001d074 ea000017 e3a00001 e3a09000 ebffff72 
04-27 10:42:13.328: I/DEBUG(8926): 8001d084 e2450014 e5905000 e5909004 e515200c 
04-27 10:42:13.328: I/DEBUG(8926): 8001d094 e5963018 e3520000 1592a000 e3a01000 
04-27 10:42:13.328: I/DEBUG(8926): 8001d0a4 0affff8a e1f970b6 e5862010 e59a1028 
04-27 10:42:13.328: I/DEBUG(8926): stack:
04-27 10:42:13.328: I/DEBUG(8926):     4472fb48  4472fbe0  
04-27 10:42:13.328: I/DEBUG(8926):     4472fb4c  4214cce4  
04-27 10:42:13.328: I/DEBUG(8926):     4472fb50  0000ce60  
04-27 10:42:13.328: I/DEBUG(8926):     4472fb54  00000001  
04-27 10:42:13.328: I/DEBUG(8926):     4472fb58  4472fbe0  
04-27 10:42:13.338: I/DEBUG(8926):     4472fb5c  80049697  /system/lib/libdvm.so
04-27 10:42:13.338: I/DEBUG(8926):     4472fb60  4214cce4  
04-27 10:42:13.338: I/DEBUG(8926):     4472fb64  431fbec9  
04-27 10:42:13.338: I/DEBUG(8926):     4472fb68  ad34675d  /system/lib/libandroid_runtime.so
04-27 10:42:13.338: I/DEBUG(8926):     4472fb6c  4472fbe0  
04-27 10:42:13.338: I/DEBUG(8926):     4472fb70  42f8e91e  
04-27 10:42:13.338: I/DEBUG(8926):     4472fb74  4214cd00  
04-27 10:42:13.338: I/DEBUG(8926):     4472fb78  4472fbd8  
04-27 10:42:13.338: I/DEBUG(8926):     4472fb7c  40038360  
04-27 10:42:13.338: I/DEBUG(8926):     4472fb80  df002777  
04-27 10:42:13.338: I/DEBUG(8926):     4472fb84  e3a070ad  
04-27 10:42:13.338: I/DEBUG(8926): #00 4472fb88  4214e32c  
04-27 10:42:13.338: I/DEBUG(8926):     4472fb8c  4472fbd8  
04-27 10:42:13.338: I/DEBUG(8926):     4472fb90  00000001  
04-27 10:42:13.338: I/DEBUG(8926):     4472fb94  002c2c40  
04-27 10:42:13.338: I/DEBUG(8926):     4472fb98  0000ce68  
04-27 10:42:13.338: I/DEBUG(8926):     4472fb9c  000f45b8  
04-27 10:42:13.338: I/DEBUG(8926):     4472fba0  800aad38  
04-27 10:42:13.338: I/DEBUG(8926):     4472fba4  fffffe84  
04-27 10:42:13.338: I/DEBUG(8926):     4472fba8  800a5368  
04-27 10:42:13.338: I/DEBUG(8926):     4472fbac  800220e8  /system/lib/libdvm.so
04-27 10:42:13.338: I/DEBUG(8926): #01 4472fbb0  4472fbd8  
04-27 10:42:13.338: I/DEBUG(8926):     4472fbb4  0000ce60  
04-27 10:42:13.338: I/DEBUG(8926):     4472fbb8  80022058  /system/lib/libdvm.so
04-27 10:42:13.338: I/DEBUG(8926):     4472fbbc  423298c8  
04-27 10:42:13.338: I/DEBUG(8926):     4472fbc0  00000000  
04-27 10:42:13.338: I/DEBUG(8926):     4472fbc4  80020fe0  /system/lib/libdvm.so 
```

任何想法都值得赞赏。

谢谢。

项目的本机方面：thread_function get 定期调用（间隔 2 秒），这就是我调用 Java 代码中定义的函数的地方。

```
// Callbacks to Android
JavaVM *j_vm;
jobject *j_obj;
JNIEnv *j_env;
jclass j_cls;
jmethodID android_call;

int JNI_OnLoad(JavaVM* vm, void* reserved) {
    j_vm = vm;
    (*j_vm)->GetEnv(j_vm, (void**) &j_env, JNI_VERSION_1_6);
    j_cls = (*j_env)->FindClass(j_env, "<package_name>/<class_name>");
    android_call = (*j_env)->GetMethodID(j_env, j_cls, "callFromNDK", "()V");
    j_obj = (*j_env)->NewGlobalRef(j_env, (*j_env)->NewObject(j_env, j_cls, android_call));
    return JNI_VERSION_1_6;
}

void JNI_OnUnload(JavaVM *vm, void *reserved) {
    (*j_env)->DeleteGlobalRef(j_env, j_obj);
}

void *thread_function(void *ptr) {
    int *which = (int *) ptr;
    (*j_vm)->AttachCurrentThread(j_vm, &j_env, NULL);
    int rc;
    while (!stop_thread) {
        rc = pthread_mutex_lock(&mtx);
        rc = pthread_cond_wait(&cond, &mtx);
        rc = pthread_mutex_unlock(&mtx);
        if (!stop_thread) {
            (*j_env)->CallVoidMethod(j_env, j_obj, android_call);
        }
    }
    (*j_vm)->DetachCurrentThread(j_vm);
    return NULL;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T21:08:59.960

您是否尝试过在模拟器中运行它？由于它在 libdvm 中崩溃，您可能会在本机崩溃之前获得一些非常有用的日志记录。

问题可能是以下行：

```
j_cls = (*j_env)->FindClass(j_env, "<package_name>/<class_name>"); 
```

假设您替换`"<package_name>/<class_name>"`为实际的命名空间和类名是否安全？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T13:58:27.723

通过眼睛，我在这段代码中看到了三个错误，但是使用 CheckJNI (http://android-developers.blogspot.com/2011/07/debugging-android-jni-with-checkjni.html) 运行，Dalvik 应该告诉你你什么做错了。（您应该使用最新版本运行以获得最佳检查。我注意到的错误之一不会被 Gingerbread 发现 [而且您也会在 Gingerbread 中侥幸逃脱]。）

在开发和调试时，您应该始终使用 CheckJNI。StackOverflow 可能应该让人们在发布任何包含 JNI 一词的问题之前检查“是的，我试过 CheckJNI”框 :-)

# flatiron.js - Flatiron Union“after”函数在“before”函数之前执行？

> ID：10354240
> 
> 赞同：0
> 
> 时间：2012-04-27T16:16:30.293
> 
> 标签：flatiron.js

我正在开发一个基于 Flatiron Union 的应用程序，似乎我在运行路由之前正在开发日志的简单记录器，所以它不能准确地报告发生了什么。我从 Union 示例中获取了记录器示例代码。这是一个精简的代码示例：

```
 var
   union = require('union')
   , server;

 server = union.createServer({
   before: [ function (req,res) {
     console.log('before');
     res.writeHead(404, {"Content-Type": "text/plain"});
     res.end("Hello World");
   } ],
   after: [
     function LoggerStream() {
         var stream   = new union.ResponseStream();
         stream.once("pipe", function (req) {
           console.log({res: this.res.statusCode, method: this.req.method});
         });
         return stream;
     }
   ]
 });

 server.listen(8800);
 console.log('union running on 8800'); 
```

这是我的控制台中显示的内容：

```
 $ DEBUG=*  node ./union.js
 union running on 8800
 { res: 200, method: 'GET' }
 before 
```

请注意，当 http 服务器实际返回 404 时，报告的状态为 200。

为什么会出现这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T04:13:00.323

这是我们的邮件列表中[indexzero](http://twitter.com/indexzero)对您问题的最新回复：

> 斯图尔特，
> 
> 这实际上是预期的行为。管道链由 union.RoutingStream 实例从以下位置构造：
> 
> union.ResponseStream() --> after0 --> after1 --> after2 --> ... --> aftern --> http.Response() （见 [https://github.com/flatiron/union/blob /master/lib/routing-stream.js#L74-83](https://github.com/flatiron/union/blob/master/lib/routing-stream.js#L74-83) )
> 
> 因此，`pipe`after 链中每个 Stream 上的事件都会立即被调用，但是这些 Stream 中的每个人都有机会通过实现自己的 .pipe() 方法来修改发送到响应的数据。
> 
> 因此，例如，如果您的 LoggingStream 是
> 
> var stream = new union.ResponseStream(); stream.once("数据", function (req) { console.log({res: this.res.statusCode, method: this.req.method}); }); 返回流；
> 
> 您会看到 console.log 语句按您期望的顺序触发。阅读 Max Ogden 最近关于 Node.js 中的 Streams 及其工作原理的博客文章可能会很有用：http: [//maxogden.com/node-streams](http://maxogden.com/node-streams)
> 
> 干杯，查理

如果您有更多问题，可以在 github、irc（freenode 上的#nodejitsu）和我们的邮件列表 flatironjs@googlegroups.com 上找到我们。:)

# php - 将 Symfony 与 Backbone.js 一起使用

> ID：10354241
> 
> 赞同：1
> 
> 时间：2012-04-27T16:16:32.890
> 
> 标签：php, javascript, symfony

我想从 symfony 社区获得关于如何使用`backbone.js`创建单页应用程序来实现的观点。
甚至可以通过backbone.js调用symfony中的函数（例如公共函数executeCreate（））有人做过吗？
你能给我一些资源吗？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T22:40:48.663

I would recommend you to have a look at the [FOSRestBundle](https://github.com/FriendsOfSymfony/FOSRestBundle). Another attempt could be to handle the requests yourself, and return the date from the orm/odm via [Serializer](http://jmsyst.com/bundles/JMSSerializerBundle)

the only thing bothered me so far, was the form handling (used [backbone-forms](https://github.com/powmedia/backbone-forms)), where I simply not was able to keep my code DRY (had duplicate data for the form+validation in symfony and in the frontend-part).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T16:27:40.477

为什么不？Symfony 可以轻松地根据骨干客户端应用程序的请求返回 JSON 数据。对于 Symfony2，它可以是这样的：

```
use Symfony\Bundle\FrameworkBundle\Controller\Controller;
use Symfony\Component\HttpFoundation\Request;
use Symfony\Component\HttpFoundation\Response;

class MyController extends Controller {
    public function createAction($requestParam1, $requestParam2)
        $response = new Response(json_encode(array(
            'requestParam1' => $requestParam1,
            'requestParam2' => $requestParam2
        )));
        $response->headers->set('Content-Type', 'application/json');

        return $response;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-14T19:04:39.647

如果你想启动一个新的 Symfony2 + 主干应用程序，我会推荐这个包：

[https://github.com/gigo6000/DevtimeBackboneBundle](https://github.com/gigo6000/DevtimeBackboneBundle)

还有一个演示应用程序可以帮助查看主干.js 和 Symfony2 交互：

[https://github.com/gigo6000/DevtimeRafflerBundle](https://github.com/gigo6000/DevtimeRafflerBundle)

# mysql - 在 innoDB 中优化 MySQL LIKE '%string%' 查询

> ID：10354248
> 
> 赞同：26
> 
> 时间：2012-04-27T16:17:06.417
> 
> 标签：mysql, sql, indexing, query-optimization

有这张表：

```
CREATE TABLE `example` (
`id` int(11) unsigned NOT NULL auto_increment,
`keywords` varchar(200) NOT NULL,
PRIMARY KEY  (`id`)
) ENGINE=InnoDB; 
```

我们想优化以下查询：

```
SELECT id FROM example WHERE keywords LIKE '%whatever%' 
```

该表是 InnoDB，（所以现在没有 FULLTEXT）哪个是用于优化此类查询的最佳索引？

我们尝试了一个简单的：

```
ALTER TABLE `example` ADD INDEX `idxSearch` (`keywords`); 
```

但是一个解释查询表明，如果我们的查询是 LIKE 'whatever%'，则需要扫描**整个表** ，该索引执行良好，否则没有任何价值。

反正有没有为 innoDB 优化这个？

谢谢！

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-04-27T16:19:47.827

索引是从字符串的开头到结尾构建的。当你使用`LIKE 'whatever%'`type 子句时，MySQL 可以使用那些基于 start 的索引来`whatever`非常快速地查找。

但是切换到`LIKE '%whatever%'`删除字符串开头的锚点。现在不能使用基于开始的索引，因为您的搜索词不再锚定在字符串的开头 - 它在中间某处“浮动”并且必须搜索整个字段。任何`LIKE '%...`查询都不能使用索引。

如果您所做的只是“浮动”搜索，这就是您使用全文索引的原因，因为它们是为这种类型的使用而设计的。

主要注意事项：InnoDB 现在[支持从 5.6.4 版本开始的全文](http://blogs.innodb.com/wp/2011/12/innodb-full-text-search-in-mysql-5-6-4/)索引。因此，除非您不能升级到至少 5.6.4，否则没有什么可以阻止您使用 InnoDB * *AND*全文搜索。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-01-18T10:18:54.463

我想评论一下，`like '%abc%'`在我的案例中，创建索引也有助于加快查询速度。

继续运行（将所有`MySQL 5.5.50`内容`Ubuntu`保留为默认值），我创建了一个包含很多列并插入了`100,000`虚拟条目的表。在一列中，我插入了完全随机的 32 个字符的字符串（即它们都是唯一的）。

我运行了一些查询，然后在该列上添加了一个索引。一个简单的

```
select id, searchcolumn from table_x where searchcolumn like '%ABC%' 
```

`~2 seconds` **在没有**索引和`0.05 seconds` **有**索引的情况下返回结果。

这不符合上面的解释（以及许多其他帖子）。这可能是什么原因？

**编辑** 我检查了解释输出。输出显示 rows 是`100,000`，但 Extra info 是 " `Using where; Using index`"。所以不知何故，DBMS 必须搜索所有行，但仍然能够利用索引？

# objective-c - NSApplicationSupportDirectory 无效的 CFStringRef

> ID：10354249
> 
> 赞同：1
> 
> 时间：2012-04-27T16:17:10.800
> 
> 标签：objective-c, ios, xcode, file, nsapplication

我正在尝试将文件存储在 NSApplicationSupportDirectory 中，因为我的应用程序中有一个预加载的文件夹，我想在应用程序初始化后添加文件。我正在尝试 NSLog 文件的内容，所以我可以看看它是否真的有效。从调试器中，我可以看到内容是 ，我不是什么意思。有人吗？

```
NSString *document = [NSString stringWithFormat:@"%@ %@ %@ %@ %@", description, focus, level, equipment, waterDepth];

//NSLog(@"%@", document);

//get the documents directory:
NSArray *paths = NSSearchPathForDirectoriesInDomains
(NSApplicationSupportDirectory, NSUserDomainMask, YES);
NSString *supportDirectory = [paths objectAtIndex:0];

//filename
NSString *filename = [NSString stringWithFormat:@"%@/%@", supportDirectory,[_nameTextField.text stringByAppendingString:@".txt"]];
NSLog(@"%@", supportDirectory);
NSLog(@"%@", filename);

[document writeToFile:filename atomically:NO encoding:NSStringEncodingConversionAllowLossy error:nil];

NSString *content = [[NSString alloc]initWithContentsOfFile:filename usedEncoding:nil error:nil];
NSLog(@"%@", content); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-27T23:00:14.233

您没有传递字符串编码，而是传递`NSStringEncodingConversionAllowLossy`了一个选项，该选项会影响某些方法（不是您正在使用的方法）的编码转换方式。你需要通过类似的东西`NSUTF8StringEncoding`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T16:37:38.103

写入或读取文件时，强烈建议使用 error 参数并处理出现错误的情况。此外，这对于帮助您调试代码非常有用。

例如，在您的情况下，您可以这样做：

```
NSError *error = nil;
BOOL success = [document writeToFile:filename atomically:NO encoding:NSStringEncodingConversionAllowLossy error:&error];

if (!success) {
    NSLog(@"Could not write file: %@", error);
} else {
    NSString *content = [[NSString alloc]initWithContentsOfFile:filename usedEncoding:nil error:&error];
    if (!content) {
        NSLog(@"Could not read file: %@", error);
    }
} 
```

如果您收到一条错误消息，表示`The operation couldn’t be completed. No such file or directory`您之前没有创建该文件夹。因此，您在尝试向其添加内容之前创建它：

```
NSString *supportDirectory = [paths objectAtIndex:0];
NSError *error = nil;
BOOL success;
if (![[NSFileManager defaultManager] fileExistsAtPath: supportDirectory]) {
    success = [[NSFileManager defaultManager] createDirectoryAtPath:supportDirectory withIntermediateDirectories:YES attributes:nil error:&error];
    if (!success) {
        NSLog(@"Could not create directory: %@", error);
    }
} 
```

# ant - 是否有测试工具来检查类似 Ant 的通配符？

> ID：10354251
> 
> 赞同：3
> 
> 时间：2012-04-27T16:17:18.083
> 
> 标签：ant, wildcard

事情不断要求像通配符一样的蚂蚁从文件夹中挑选文件......是否有一个快速的 Windows 工具来检查特定通配符将从特定文件夹返回什么？

# javascript - 如何防止 Enter 按钮在 Firefox 12 中运行其默认行为？

> ID：10354254
> 
> 赞同：3
> 
> 时间：2012-04-27T16:17:31.923
> 
> 标签：javascript, jquery, asp.net, firefox, enter

我有一个用 ASP.NET 构建的表单。第一个控件允许用户从自动完成列表中选择一个人。当用户按下回车键时，它将刷新页面并复制通过第一个控件获取的任何信息。我试图从刷新页面中删除回车键的功能。此代码均适用于 Chrome 和 IE7/8/9（不要关心 6）。我只需要返回 false 即可在除 Firefox 之外我们支持的所有浏览器中工作。.click() 是一个额外的好处，可以为键添加一些可用性（这样它将激活控件并选中或取消选中复选框等）

这些都不适用于 Firefox 12。点击发生（证明代码在我想要的时候到达）但页面每次刷新。

focusNextInputfield() 是来自类似问题的建议之一，并没有做任何我想做的事情。它可能已经完成了它的预期用途，但我无法判断，因为页面已刷新。

我自己从另一个类似的问题中找到了 preventDefault() 和 stopPropagation() ，但它在 FF 中什么也没做。

我什至尝试过回归真实。

```
 $(document).keydown(function (event) {
   //handles what happens when the user hits enter
       if (document.activeElement.nodeName !== 'TEXTAREA') {
           if (event.keyCode === 13 || event.which === 13) {
                $(document.activeElement).click();
               // $(document.activeElement).focusNextInputField();
                event.preventDefault();
                event.stopPropagation();
                return false;
           }
       }
    }); 
```

我只是在寻找任何关于这在 FireFox 12 中没有任何影响的任何建议或新闻？而且我知道代码已经到达并且它都可以正常运行而没有错误，即使有所有多余的代码，它仍然可以在 Chrome 和 IE 7/8/9 中正常运行，正如我所说的。

通过较早的迭代，我尝试强制单击提交按钮，但无论如何它仍然刷新并经过验证，总体上是一个糟糕的用户体验。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T16:29:05.490

看起来您正在使用 jQuery，所以您只需要在表单提交事件中防止默认值。

```
$j("#form-id").submit(function(e) {
    e.preventDefault();
    ...
}); 
```

或者：

```
$j("#form-id").submit(false); 
```

# php - JavaScript 表格转换成 PHP 表格

> ID：10354258
> 
> 赞同：0
> 
> 时间：2012-04-27T16:17:38.593
> 
> 标签：php, javascript, mysql, html

我正在创建一个网站。在其中一个页面上有一个 JavaScript 表单，它要求提供通常的信息：姓名、电子邮件等，然后我需要使用 MYSQL 将其保存到一个表中，然后我想在另一个页面上使用 PHP 显示该表。我不知道如何开始将数据保存到表格中（点击提交时），然后在另一个页面上显示表格。有什么建议吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-27T16:29:19.573

[http://teamtutorials.com/web-development-tutorials/php-tutorials/inserting-data-into-a-mysql-database-using-php#.T5rIZLNWq9Q](http://teamtutorials.com/web-development-tutorials/php-tutorials/inserting-data-into-a-mysql-database-using-php#.T5rIZLNWq9Q)

# jquery - 创建 xhrCallbacks Ajax 调用 + JQuery

> ID：10354263
> 
> 赞同：0
> 
> 时间：2012-04-27T16:17:55.307
> 
> 标签：jquery, ajax

我想使用 JQuery 库来进行异步 ajax 调用，而不是在同时进行不同调用时创建泄漏。（您建议使用除 JQuery 之外的任何替代库来实现此目的吗？）。

我目前的挑战是让它在我们的开发环境中使用 IE8 工作。它适用于 Firefox，但不适用于 IE8。问题是我需要使用特定的 ActiveXObject - Msxml2.ServerXMLHTTP 在我们的环境中工作。那么，我如何告诉 JQuery 创建这个特定的 ActiveXObject 而不是默认的呢？谢谢你

到目前为止（这在 Firefox 中有效）：

```
var request = $.ajax({
        url: "http://mkapacs.com/SimulateUser.php",
        cache: false,
        type: "GET",
        timeout: 14000,
        crossDomain: true,
        data: {screen: "901", state: "000", trans: "cwd"},
        dataType: "xml"
        });

    request.done(function(msg) {
        var fdk="",eppKey="",uInput="";
        var xml = msg;
        try{
        fdk = xml.documentElement.getElementsByTagName("fdk")[0].firstChild.nodeValue;
        eppKey = xml.documentElement.getElementsByTagName("eppKey")[0].firstChild.nodeValue;
        uInput = xml.documentElement.getElementsByTagName("user_input")[0].firstChild.nodeValue;
        //alert('userInput: ' + uInput + ';eppKey: ' + eppKey + ';fdk: ' + fdk);
        }catch(er){
            alert('error occured while parsing XML for fdk.Error:' + er.message);
        }

        document.getElementById("ajaxResponse").innerHTML='fdk: '  + fdk + '; eppKey: ' + eppKey + '; uInput: ' + uInput;

        //alert('done: ' + msg);
        $("#log").html( msg );
    });

    request.fail(function(jqXHR, textStatus) {

        /*for (property in jqXHR) {
        alert(jqXHR[property].value);
    }*/
        alert( "Request failed: " + typeof(jqXHR) + textStatus );
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T16:38:41.677

您可以使用 jQuery 的`.ajax()`选项来传递您需要的特定 XHR 对象：

```
var request = $.ajax({
    xhr: new window.ActiveXObject( "Msxml2.ServerXMLHTTP" ),
    url: "http://mkapacs.com/SimulateUser.php",
    cache: false,
    type: "GET",
    timeout: 14000,
    crossDomain: true,
    data: {screen: "901", state: "000", trans: "cwd"},
    dataType: "xml"
}); 
```

（当然，这只适用于 IE）。

此外，如果您坚持使用 jQuery，您可以简化代码的其他部分。例如，这一行：

```
fdk = xml.documentElement.getElementsByTagName("fdk")[0].firstChild.nodeValue; 
```

可以变得简单

```
fdk = $(msg).find('fdk').text(); 
```

# java - 在 ImageJ 中显示非 ASCII 字符

> ID：10354264
> 
> 赞同：3
> 
> 时间：2012-04-27T16:18:00.127
> 
> 标签：java, macros, imagej

简单的问题，但我无法在任何地方找到答案。到目前为止，没有任何搜索策略对我有用。

我有一个 ImageJ 宏，它打开一个对话框，供用户设置图像叠加层的大小。该对话框提示用户提供以微米为单位的覆盖层尺寸：

```
Dialog.addNumber("Width (µm):", 500);
Dialog.addNumber("Height (µm):", 250); 
```

问题是对话框没有按预期显示：微米符号前面印有一个额外的字符。而不是这个（μm），我得到这个（¬μm）。

很明显，这是一个字符编码问题。但是我在任何地方都找不到任何文档告诉我如何正确地将非 ASCII 字符插入 ImageJ 对话框。我已经尝试过以我能想到的各种方式使用 ASCII 代码 (230) 和 Unicode (U+00B5)，但在这些情况下，它只是呈现为代码而不是符号。ImageJ 中有宏调用来获取字符的 Unicode 字符串，但是除了作为数字字符串之外，没有办法将其打印回来？我难住了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T05:17:04.367

你要做的是：

```
Dialog.addNumber("Width (" + fromCharCode(181) + "m):", 500);
Dialog.addNumber("Height (" + fromCharCode(181) + "m):", 250); 
```

`181`十六进制的十进制值在哪里`00B5`

# c# - 访问从 WebMethod 返回的数组中的不同元素

> ID：10354269
> 
> 赞同：1
> 
> 时间：2012-04-27T16:18:15.523
> 
> 标签：c#, ajax, json, webmethod

我有一个返回数组字符串的 WebMethod：

```
[WebMethod]
public static string[] GetDataFromServer()
{
    return new string[] { "one", "two", "three" };
} 
```

我正在使用以下代码调用 WebMethod：

```
$.ajax({
    type: "POST",
    url: "MyPage.aspx/GetDataFromServer",
    data: "{}",
    success: function (msg) {
        alert(msg.d);
    },
    error: function (x, e) {
        alert("The call to the server side failed. " + x.responseText);
    }
}); 
```

由于 WebMethod 正在返回一个字符串数组，因此在调用 时`alert(msg.d);`，我得到了由 a 分隔的数组的所有元素`,`。我知道我可以`msg.d`用`,`分隔符拆分，但我认为这不是一个好习惯。如何通过索引访问结果数组中的不同元素？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T16:21:03.530

您应该能够使用`msg.d[0]`，例如获取数组中的第一项。

# jquery - 阻止 CSS 悬停

> ID：10354271
> 
> 赞同：0
> 
> 时间：2012-04-27T16:18:18.833
> 
> 标签：jquery, css

我有一个 MyButton 类的按钮，其定义有点像这样：

```
.MyButton{
 color:black;
 background:white;}

.MyButton:hover{
 color:white;
 background:black;} 
```

此按钮类用于寻呼机按钮，当寻呼机处于边界时，我将此类添加到其中：

```
.ButtonDisabled{
 opacity:0.3} 
```

问题是，如果用户将鼠标悬停在按钮上，它仍然继承自 MyButton:hover 样式。

我知道我可以用 jquery 控制所有这些来解决悬停问题，但我想知道当按钮也有类 ButtonDisabled 时是否有办法防止悬停类触发。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T16:21:12.617

```
.MyButton:hover{
 color:white;
 background:black;

}

// has more specificity than above selector, so it will stop previous hover effect
.MyButton.ButtonDisabled:hover{
 // write your configs
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T16:20:58.177

也许添加

```
.ButtonDisabled:hover{...} 
```

会帮助你

# objective-c - 比较 NSStrings 与 Ä,Ö,Ü

> ID：10354274
> 
> 赞同：3
> 
> 时间：2012-04-27T16:18:21.487
> 
> 标签：objective-c, ios, cocoa-touch, nsstring, diacritics

我面临一个奇怪的问题。我有一个 UITextField 和一个 NSString ，我想使用 isEqualtoString 方法进行比较。只要字符串不包括德语变音符号如 Ä,Ö,Ü 一切都可以正常工作，但如果他们这样做了，它就不再工作了。NSLog 正确地给出了变音字符串。

```
 NSLog([currentAnswer lowercaseString]);
 NSLog([[self.antwortTextField text]lowercaseString]);

if ([[currentAnswer lowercaseString] isEqualToString:[[self.antwortTextField text]lowercaseString]]) {......} 
```

我必须以某种方式格式化字符串吗？这个问题快把我逼疯了！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T16:21:00.750

您可以使用高级`NSString`比较方法，例如：

```
- (NSComparisonResult)compare:(NSString *)aString
                      options:(NSStringCompareOptions)mask
                        range:(NSRange)range
                       locale:(id)locale 
```

然后指定高级选项。您可能感兴趣的具体选项：

*   `NSCaseInsensitiveSearch`
*   `NSDiacriticInsensitiveSearch`
*   `NSWidthInsensitiveSearch`

# c# - 如果方法花费超过 2 秒，C# 如何停止方法？

> ID：10354275
> 
> 赞同：6
> 
> 时间：2012-04-27T16:18:25.800
> 
> 标签：c#, timer

以下程序将连接到网络并获取“msnbc.com”网页的html内容并打印出结果。如果从网页获取数据的时间超过 2 秒，我希望我的方法停止工作并返回。你能告诉我如何用一个例子来做到这一点吗？

```
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
    }

    private void button1_Click(object sender, EventArgs e)
    {
        gethtml();
        MessageBox.Show("End of program");
    }

    public void gethtml()
    {
        HttpWebRequest WebRequestObject = (HttpWebRequest)HttpWebRequest.Create("http://msnbc.com/");

        WebResponse Response = WebRequestObject.GetResponse();
        Stream WebStream = Response.GetResponseStream();

        StreamReader Reader = new StreamReader(WebStream);
        string webcontent = Reader.ReadToEnd();
        MessageBox.Show(webcontent);
    }
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-27T16:34:33.177

两秒钟对于阻止 UI**来说太长了。**如果您计划在 50 毫秒或更短的时间内获得结果，您应该只阻止 UI。

阅读这篇文章，了解如何在不阻塞 UI 的情况下执行 Web 请求：

[http://www.developerfusion.com/code/4654/asynchronous-httpwebrequest/](http://www.developerfusion.com/code/4654/asynchronous-httpwebrequest/)

请注意，在 C# 5 中，这一切都会变得容易得多，目前它是 beta 版本。在 C# 5 中，您可以简单地使用`await`运算符来异步等待任务的结果。如果您想了解这种事情在 C# 5 中是如何工作的，请参阅：

[http://msdn.microsoft.com/en-us/async](http://msdn.microsoft.com/en-us/async)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-27T16:21:35.433

设置对象的`Timeout`属性`WebRequest`。[文档](http://msdn.microsoft.com/en-us/library/system.net.webrequest.getresponse.aspx)

MSDN 示例：

```
// Create a new WebRequest Object to the mentioned URL.
WebRequest myWebRequest=WebRequest.Create("http://www.contoso.com");
Console.WriteLine("\nThe Timeout time of the request before setting is : {0} milliseconds",myWebRequest.Timeout);

// Set the 'Timeout' property in Milliseconds.
myWebRequest.Timeout=10000;

// This request will throw a WebException if it reaches the timeout limit before it is able to fetch the resource.
WebResponse myWebResponse=myWebRequest.GetResponse(); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-27T16:28:54.483

如上所述。超时

```
 public void gethtml()
    {
        HttpWebRequest WebRequestObject = (HttpWebRequest)HttpWebRequest.Create("http://msnbc.com/");
        WebRequestObject.Timeout = (System.Int32)TimeSpan.FromSeconds(2).TotalMilliseconds;
        try
        {
            WebResponse Response = WebRequestObject.GetResponse();
            Stream WebStream = Response.GetResponseStream();

            StreamReader Reader = new StreamReader(WebStream);
            string webcontent = Reader.ReadToEnd();
            MessageBox.Show(webcontent);
        }
        catch (System.Net.WebException E)
        {
            MessageBox.Show("Fail");
        }
    } 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-27T16:22:19.767

您可以在 HttpWebRequest 上使用[TimeOut属性](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.timeout.aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-27T16:26:44.757

考虑切换到内容的异步下载。您将停止阻塞 UI 线程，并且能够轻松处理多个请求。您将能够在不影响 UI 的情况下显着增加超时，并且可以在接收响应时决定是否仍要获取数据。

# php - 如何使字符串不可见？

> ID：10354276
> 
> 赞同：0
> 
> 时间：2012-04-27T16:18:26.947
> 
> 标签：php, variables, string

我在下面有一个片段，它使用 $name 来显示一个人的名字。如果名称不存在，则显示未添加名称。我怎样才能做到这一点，而不是说该变量根本不显示任何内容？

```
 $name = "Name - $variablefromdatabase";

     // If $name is empty
     if (empty($name)) {

     $name = "No Name added";
     } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T16:21:54.293

```
$name = (strlen($varFromDb) > 0) ? "Name - " . $varFromDb : ""; 
```

如果我正确理解了这个问题，如果用户没有设置名称，则不应显示任何内容，否则它会看到`Name - {their name}`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T16:31:19.293

正如评论中提到的，您当前的代码并没有按照您所说的那样做。原因如下：

**您将$name**初始化为“Name - $variablefromdatabase”。因此，即使**$variablefromdatabase**为空，您最终仍会得到一个字符串“Name -”。这不会被视为空的，因此代码永远不会进入 if 语句。下面是更正确的版本

```
// If $name is empty
if (empty($variablefromdatabase)) {
    $name = "Name - $variablefromdatabase";
} else {
    $name = "No Name added"; // or $name = "Name - No Name added"
} 
```

转到问题的下一部分；当数据库没有返回任何值时，如何不显示任何内容。试试下面的代码：

```
$variablefromdatabase = trim( $variablefromdatabase ); // just make sure there is no white space

if (! empty( $variablefromdatabase ) ) { // check if an empty value is returned from the database
    $name = "Name - $variablefromdatabase"; // not empty, so set the name variable
} else {
    $name = ""; // set the name variable to an empty string
} 
```

# algorithm - 快速分解

> ID：10354278
> 
> 赞同：6
> 
> 时间：2012-04-27T16:18:30.397
> 
> 标签：algorithm, discrete-mathematics, factorization

> 对于给定的数字 n（我们知道 n = p^a * q^b，对于一些素数 p,q 和一些整数 a,b）和给定的数字 φ(n)（[http://en.wikipedia. org/wiki/Euler%27s_totient_function](http://en.wikipedia.org/wiki/Euler%27s_totient_function)）找到 p、q、a 和 b。

问题是 n 和 φ(n) 大约有 200 位数字，因此算法必须非常快。这似乎是一个非常困难的问题，我完全不知道如何使用 φ(n)。

如何解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-27T17:01:47.870

因为`n = p^a * q^b`，全部是`φ(n) = (p-1)*p^(a-1) * (q-1)*q^(b-1)`。不失一般性，`p < q`.

所以`gcd(n,φ(n)) = p^(a-1) * q^(b-1)`如果`p`不分`q-1`，`gcd(n,φ(n)) = p^a * q^(b-1)`如果`p`分`q-1`。

在第一种情况下，我们有`n/gcd(n,φ(n)) = p*q`and `φ(n)/gcd(n,φ(n)) = (p-1)*(q-1) = p*q + 1 - (p+q)`，因此您有`x = p*q = n/gcd(n,φ(n))`and `y = p+q = n/gcd(n,φ(n)) + 1 - φ(n)/gcd(n,φ(n))`。然后找到`p`和`q`很简单：`y^2 - 4*x = (q-p)^2`、 所以`q = (y + sqrt(y^2 - 4*x))/2`和`p = y-q`。然后找到指数`a`并且`b`是微不足道的。

在第二种情况下，`n/gcd(n,φ(n)) = q`。然后你可以很容易地找到指数`b`，除以，`q`直到除法留下余数，从而得到`p^a`。分`φ(n)`给`(q-1)*q^(b-1)`你`z = (p-1)*p^(a-1)`。然后`p^a - z = p^(a-1)`和`p = p^a/(p^a-z)`。找到指数`a`又是微不足道的。

因此，仍有待决定您拥有哪种情况。当且仅当`n/gcd(n,φ(n))`是素数时，您有案例 2。

为此，您需要一个体面的素性测试。或者您可以首先假设您有案例 1，如果这不起作用，则得出结论您有案例 2。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T16:30:37.733

尝试计算 n / (n - φ(n)) 是什么。

跟进：

n / (n - φ(n)) = pq。您只需将 n 除以 pq。

# ollydbg - 同一类中的函数

> ID：10354279
> 
> 赞同：0
> 
> 时间：2012-04-27T16:18:31.043
> 
> 标签：ollydbg

ollydbg 中有没有一种方法可以让我找到一个类中的所有函数，比如如果我知道那个类的一个函数，我可以找到其他函数，比如

```
class A{

int sum();
int powr();
} 
```

在 ollydbg 中，我知道在哪里休息，`sum()`但我不知道在哪里休息`power()`，有什么方法可以让我这样做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T13:49:14.213

如果函数是非虚拟的，那么没有通用的方法可以从二进制文件中确定它们是否属于同一类。非虚拟函数（如您提供的示例中）在编译时静态链接，在生成的可执行文件中，它们显示为对该函数的简单调用。甚至没有简单可靠的方法来知道这样的函数属于哪个类。

然而在实践中，链接器经常将一个类中的函数彼此靠近。有时甚至与定义的顺序相同。但这并不能保证，而且在很多情况下这不是真的。

如果你在谈论*虚*函数，那么这是一个完全不同的故事，因为指向虚函数的指针必须存储在一个名为“虚方法表”的结构中。这个结构必须在二进制文件的某个地方定义（每个类一个），如果你能找到它，那么你会得到一个虚方法及其指针的列表。

# actionscript-3 - 将影片剪辑居中于子 mc 的位置以获取地图位置

> ID：10354280
> 
> 赞同：1
> 
> 时间：2012-04-27T16:18:42.787
> 
> 标签：actionscript-3

我有一个名为“map”的地图影片剪辑，其中包含一堆建筑剪辑。每个建筑物都是一个可以单击的影片剪辑。我需要将地图置于该点击项目的中心。我怎样才能使这项工作？

```
//This doesn't make the map move where i need it to
function moveMap(childmc:String):void {
    Tweener.addTween(themap, {x:themap[childmc].x, time:1, transition:"easeOutCubic"});
    Tweener.addTween(themap, {y:themap[childmc].y, time:1, transition:"easeOutCubic"});
} 
```

任何帮助都会很棒，一直在寻找几个小时。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T16:25:34.990

查看您的代码，您似乎正在尝试将父 MC 补间到嵌套在其中的 MC 的位置。如果这不是您想要做的，也许 {this[childmc].x, this[childmc].y} 在描述您补间的对象中可能会有所帮助？此外，时间和过渡应该在该对象内部还是外部？我是 Tweensy 用户，所以我不确定，但我觉得它不合适。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T17:29:06.310

尝试这样的事情：

```
function objClick(e:MouseEvent):void{
    var target_x = STAGE_WIDTH/2 - e.target.x;
    var target_y = STAGE_HEIGHT/2 - e.target.y;

    TweenLite.to(map_mc, 1, {x: target_x, y: target_y})
} 
```

抱歉，编写的代码与您的示例有很多不同，但我认为这种方式更好。

**[编辑]** 我测试了这段代码，它工作正常。可点击的影片剪辑位于另一个名为“map_mc”的影片剪辑中。STAGE_WIDTH/HEIGHT 是我的舞台尺寸，但您可以添加到您的视口。

# c# - linq2sql，用一个 .dbml 使用不同的数据库

> ID：10354283
> 
> 赞同：0
> 
> 时间：2012-04-27T16:18:57.910
> 
> 标签：c#, linq

我正在使用几个不同的数据库（3 MS SQL，2 SYBASE v12.5）。它们都具有相同的结构/模式。

我使用 Designer 制作了一个初始 .dbml（使用 C# 4.0 从 data.linq.DataContext 扩展）。DataContext 有一个构造函数，它接受一个参数（一个连接字符串）。考虑到所有数据库在结构上看起来都相似，我用它来切换我查询的数据库（与 MS SQL 配合得很好）。

1.  我可以用连接字符串代替我的 SYBASE 数据库吗？
2.  在开始之前，我一直在我正在尝试构建的连接字符串上遇到错误。我正在尝试在 connectionStrings.com 上提供以下内容但没有成功： Provider=Sybase.ASEOLEDBProvider.2;Server Name=myASEserver;Server Port Address=5000;Initial Catalog=myDataBase;User ID=myUsername;Password=myPassword; 我收到一条错误消息，提示无法识别关键字“provider”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T19:43:35.927

linq2sql 仅支持 Ms SQL Server。底层 Sqlclient 的连接字符串中没有提供程序属性。

# javascript - Salesforce - 通过 Apex 控制器执行 Javascript

> ID：10354284
> 
> 赞同：2
> 
> 时间：2012-04-27T16:18:59.850
> 
> 标签：javascript, web-services, wsdl, salesforce, apex-code

我一般是 Salesforce 的新手，我试图决定如何处理 SOAP Web 服务的调用。当前，当用户单击“机会”页面上的按钮时，Web 服务正在通过 AJAX 执行。我被要求从按钮中移动 web 服务调用并将其放入自定义控制器页面中。因此，当满足某些条件时，需要无缝调用 Web 服务，而不是让用户单击按钮。

我想使用相同的 ajax 语句启动 web 服务，因为它可以节省我的时间。虽然通过 Apex 调用 Web 服务似乎更有意义，但我仍在研究该主题。所以这是我的问题：

是否可以从 Apex 控制器中执行以下 javascript？如果有怎么办？

```
{!REQUIRESCRIPT("/soap/ajax/24.0/connection.js")}
{!REQUIRESCRIPT("/soap/ajax/24.0/apex.js")}
var xfolder = "MyNewFolder"
var parentid = "999999999999999"
var myvar = sforce.apex.execute("myWS","invokeExternalWs", {folderName:xfolder,ObjectID:parentid});
window.alert('Folder created: ' + myvar); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T19:05:44.540

首先通读这些参考文档：[Action Functions](http://www.salesforce.com/us/developer/docs/pages/index_CSH.htm#pages_compref_actionFunction.htm)、[Ajax 中的 Apex](http://www.salesforce.com/us/developer/docs/apexcode/index_CSH.htm#apex_and_ajax.htm)或[Visualforce JavaScript Remoting](http://www.salesforce.com/us/developer/docs/pages/Content/pages_js_remoting.htm)。

执行您要求的最简单方法是使用标签在页面上包含`connection.js`和文件（如下所示）。`apex.js`[`<apex:includeScript>`](http://www.salesforce.com/us/developer/docs/pages/Content/pages_compref_includeScript.htm)

```
<apex:includeScript value="/soap/ajax/24.0/connection.js"/>
<apex:includeScript value="/soap/ajax/24.0/apex.js"/> 
```

`<script>`然后，将你的 JavaScript 放在标签下的一个标签中的一个函数中`<page>`。

```
<script>
    function invokeWebService()
    {
        var xfolder = "MyNewFolder"
        var parentid = "999999999999999"
        var myvar = sforce.apex.execute("myWS","invokeExternalWs", {folderName:xfolder,ObjectID:parentid});
        window.alert('Folder created: ' + myvar);
    }
</script> 
```

`onclick`最后，使用输入按钮上的属性调用您的函数。

```
<button type="button" onclick="invokeWebService();" style="btn">Invoke</button> 
```

注意..我还没有测试过这些，但它应该可以进行一些小的调整（我已经多次使用过类似的方法）。

# java - 将单个元素添加到不可变集合的有效且优雅的方法是什么？

> ID：10354286
> 
> 赞同：34
> 
> 时间：2012-04-27T16:19:14.260
> 
> 标签：java, guava

我有一个`Set<Integer>`可能包含许多元素的不可变集合（转换为 a ）。我需要一个包含该集合中的元素和一个附加元素的集合。我有 kludgy 代码来复制集合，然后附加元素，但我正在寻找使事情尽可能高效的正确方法。

我有 Guava 可用，但我不需要使用它。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-04-27T16:23:03.900

不确定性能，但您可以使用 Guava 的[`ImmutableSet.Builder`](http://docs.guava-libraries.googlecode.com/git-history/v11.0.2/javadoc/com/google/common/collect/ImmutableSet.Builder.html)：

```
import com.google.common.collect.ImmutableSet

// ...
Set<Integer> newSet = new ImmutableSet.Builder<Integer>()
                                .addAll(oldSet)
                                .add(3)
                                .build(); 
```

当然，您也可以为此编写一个辅助方法：

```
public static <T> Set<T> setWith(Set<T> old, T item) {
  return new ImmutableSet.Builder<T>().addAll(old).add(item).build();
}

// ...
Set<Integer> newSet = setWith(oldSet, 3); 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2020-03-30T16:15:27.913

使用 Java 8，您还可以使用流来实现该效果

```
Stream.concat(oldSet.stream(),
              Stream.of(singleElement))
      .collect(Collectors.toSet()) 
```

顺便说一句，从 JDK 10 开始，`Collectors`还允许累积到不可变类型（与静态工厂创建的类型相同`Set.of()`）：

```
Stream.concat(oldSet.stream(),
              Stream.of(singleElement))
      .collect(Collectors.toUnmodifiableSet()) 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-04-29T03:23:20.050

你可以考虑 Sets.union()。建设会更快，但使用更慢。

```
public static <T> Set<T> setWith(Set<T> old, T item) {
  return Sets.union(old, Collections.singleton(item);
} 
```

(com.google.common.collect.Sets & java.util.Collections)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-27T16:22:19.557

如果 Set 是不可变的，除了复制 Set，然后添加新元素之外，我看不到任何其他方法。请记住，复制一个集合就像在创建新集合时将基本集合传递给构造函数一样简单。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-04-27T16:23:32.223

你有三个选择。

*   使用可变集合。
*   检查元素不存在，如果不存在，则创建集合的副本并添加元素。
*   创建一个包含前一个集合和元素的包装集。

有时 a`BitSet`是比`Set<Integer>`取决于您的值的分布更好的选择。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-10-27T13:03:31.853

当您想要比完整副本更好的性能并且对元素进行排序时，您可以在[B+ 树](http://opendatastructures.org/ods-java/14_2_B_Trees.html)周围使用有效的不可变包装器来获得良好的增量集性能。

将项目添加到 B+ 树需要 O(log(n)) 时间和增量分配，而不是像使用`ImmutableSet.builder().addAll(...).add(...).build()`. 这意味着从 n 个增量添加构建一个集合是 O(n*log(n))，而不是 O(sqr(n))。

这个[答案](https://stackoverflow.com/a/2577029/20394)有一个指向 jdbm 库的指针，因此可能值得一看[`jdbm:jdbm`](http://search.maven.org/#artifactdetails%7Cjdbm%7Cjdbm%7C1.0%7Cjar)。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-04-27T16:22:56.483

当我在同一个句子中阅读“不可变”和“添加到”时，我正在经历认知失调。您可以将新元素添加到不可变值的可变副本的末尾，但不能修改不可变集。我不知道有什么优雅的。

# forms - Drupal 7：使用电子邮件识别回访用户

> ID：10354289
> 
> 赞同：0
> 
> 时间：2012-04-27T16:19:37.353
> 
> 标签：forms, drupal

我已经在网上搜索试图找到答案但无法这样做决定在这里发布我的问题。我必须在我们的网站上实现类似订阅的服务，流程如下：

1\. 新用户要下载文件
   a. 为新用户/返回用户提供弹出/决策页面
   b. 用户选择新用户
   c. 将用户引导至 Web 表单
   d. 填写并提交表单（如果用户选择订阅复选框，我们应该在添加新文件时发送带有通知的电子邮件 - 在我们的例子中，这意味着我们添加了一个新页面/节点）
   e。在感谢页面上，为用户提供了下载文件的链接

2\. 返回用户
   a。在弹出/决定页面上，用户要求输入电子邮件
   湾。验证电子邮件是否已登录数据库，并将用户引导至带有下载文件或启动下载链接的页面。（电子邮件在用户首次提交表单时记录）

这种机制应该允许我们跟踪谁下载了文件，同时不会让用户每次都填写相同的表格。

请告诉我如何实现这个流程。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T13:13:11.463

我能想到两种选择——一种是使用 Drupal 的用户系统。您可以提供一个将用户实际注册到系统的链接——他还需要提供一个密码。注册用户将获得一个允许他们下载页面的特殊角色。

第二种选择是使用 Drupal webform + webform_validation - 查看：[http ://drupal.org/project/webform_validation](http://drupal.org/project/webform_validation)

# php - 如何在关闭时删除对话框中的选定元素/文本？

> ID：10354291
> 
> 赞同：0
> 
> 时间：2012-04-27T16:19:46.003
> 
> 标签：php, jquery, html, dialog

当用户关闭对话框时，我试图删除对话框中的文本。我在一个页面中有多个对话框，有些对话框里面有表单。其中一个是向用户发送消息，另一个是更新用户详细信息的表单。

提交表单时，表单上方会显示一条关于状态的消息，即它是失败还是成功。

jQuery：

```
$('form.updateDetailsForm').on('submit', function()
{
    //console.log("hello");
    event.preventDefault();
    var form =  $(this);
    post = form.serialize();
    $.post("",{ form: post, studentHub: true}, function(msg)
    {
        var popUpDialog = form.parent();
        console.log(msg);
        var status = $('.notifications', popUpDialog);

        status
            .html(msg)
            .hide()
            .fadeTo(2500, 1)
            .delay(20000)//<== wait 3 sec before fading out
            .fadeTo(2000, 0, function()
            {
                status.html('');
            }); 
    }); 
    //return false;     

});//END OF updatedetails form submit 

/****For each popuplink we bind the dialog that is ---IMMEDIATELY NEXT--- to it and click event to it.  ***/
$('.popUpLink').each(function()
{
     if(!$.data(this, 'dialog'))//if not bound then we bind it. This is for dynamic issues
     {
        $divDialog = $(this).next('.popUpDialog');

        $.data(this, 'dialog', $divDialog.dialog(
        {
            autoOpen: false,
            modal: true,
            minWidth: '100',
            width: '800',
            hide: 'fold',
            show: 'drop',
            title: $divDialog.attr('title'),     
            close: function() {
                  $('.notifications, div:animated', $divDialog).html(''); //this is what I've tried but it doesn't work. 
            } 
        }));
     }
}).on('click',function() 
{ 
    $.data(this, 'dialog').dialog('open').css('maxHeight', $(window).height()-90);
    return false; 
}); 
```

HTML：

```
<div class="flexi_box">
    <h2 class="sendMessageHeader hubFormHeader">Send a message to your tutor </h2>
    <div class="notifications"></div> //div to insert status updates                                        
    <form class="sendMessageForm" id="tutorForm" action="" method="POST">   
        <fieldset>
            <textarea class="messageArea" name="message"></textarea>
            <input type="submit" value="Send Message" class="cap_button hubSubmit">
        </fieldset>
    </form>
</div> 
```

我的问题是当我重新打开对话框时状态更新仍然存在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T16:58:24.370

我认为选择器不会像这样工作：

```
$('.notifications, div:animated', $divDialog).html(''); //this is what I've tried but it doesn't work. 
```

选择对我来说是空的。尝试将它们分开：

```
$('.notifications, div:animated').html('');
$divDialog.html(''); 
```

# javascript - 从jQuery中的函数返回一个值

> ID：10354300
> 
> 赞同：0
> 
> 时间：2012-04-27T16:20:09.113
> 
> 标签：javascript, jquery

我在 jquery 中有一个函数。我的函数返回一个值，但是当我检查返回的值时，我得到一个“NAN”可能是什么问题：

```
[CODE]

 var vax = ('#textbox1').val();

 var newVal = calculateMB(vax,11,3.1);
 alert(newVal);

 function calculateMB(num,charge,fixed)
 {
   if(num>50)
   var e = num - 50;
    var new_e = e * charge;
    new_var = new_e / 20;

     return (new_var + fixed);

   }
 [/CODE] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T16:24:55.673

您并不总是为 赋值`e`，而是在计算中使用它。这是正确缩进的代码：

```
function calculateMB(num,charge,fixed)
{
    if(num>50)
        var e = num - 50;

    var new_e = e * charge;
    new_var = new_e / 20;
    return (new_var + fixed);
} 
```

当`num`为`<=`50 时，`e`永远不会获得值（因此保持默认值`undefined`），因此`e * charge`是`NaN`并`NaN`在其余计算中传播。

你可能想要：

```
function calculateMB(num,charge,fixed)
{
    var e, new_e, new_var;

    e = (num > 50) ? num - 50 : num;
    new_e = e * charge;
    new_var = new_e / 20;
    return new_var + fixed;
} 
```

那里的变化：

1.  我把所有`var`的陈述都放在最上面，因为[那是它们真正所在的地方](http://blog.niftysnippets.org/2008/03/poor-misunderstood-var.html)。

2.  我宣布，你根本没有宣布，[*成为隐式全球恐怖的*](http://blog.niftysnippets.org/2008/03/horror-of-implicit-globals.html)`new_var`牺牲品。[](http://blog.niftysnippets.org/2008/03/horror-of-implicit-globals.html)

**   我确保`e`总是被分配一个值。我猜你想`e`成为`num`when `num <= 50`，但要酌情调整。

    *   我一致地缩进了代码。执行一致的代码缩进之类的操作可以帮助您避免错误，并帮助其他人理解您的代码。*强烈*推荐它。* 

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T16:25:46.120

我认为这是因为从文本框中读取的数字是一个字符串。尝试`var vax = Number(('#textbox1').val());`

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-27T16:24:14.823

尝试

```
 return (Number(new_var + fixed)); 
```

它将您的变量转换为数字。还要确保传递给 calculateMB 的参数实际上是数字。*

# cakephp - cakephp模型类扩展基类然后appmodel

> ID：10354301
> 
> 赞同：0
> 
> 时间：2012-04-27T16:20:14.463
> 
> 标签：cakephp, orm, base-class, cakephp-2.1

我正在尝试为 cakephp 设置一个简单的 ORM，所以我想这样做

App::import('Model','TheBaseModel');

类 YourModel 扩展 TheBaseModel {

}

类 TheBaseModel 扩展 AppModel {

函数 OptionSetter() {

}

}

但我想将 TheBaseModel 放在模型（app/model/DB）下的 DB 文件夹中。我怎样才能做到这一点。我正在使用 cakephp 2.x

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T17:04:02.127

把它放在下面`plugin`并将其用作插件。

# batch-file - cmd 脚本：删除旧的、递增的、复制的

> ID：10354305
> 
> 赞同：2
> 
> 时间：2012-04-27T16:20:27.150
> 
> 标签：batch-file, cmd

这是[我之前遇到的相同问题，](https://stackoverflow.com/questions/10287762/powershell-script-filename-increment)但现在它必须在 bat 文件中。

1）我想删除“file.rollback3”

2）然后我想将所有文件增加 1 file.rollback1 --> file.rollback 2 file.rollback2 --> file.rollback 3

3）将file.data从不同目录复制到回滚目录

这是我目前所拥有的......

```
 @echo off
set path=c:\temp3
cd %path%
set fileCount=0
for /f "tokens=1*" %%a in ('dir /a * /b /s') do (
       call set /a fileCount=%%fileCount%%+1)
echo %fileCount%
set /a delFile=(%fileCount%-1)
echo %delFile%
del *.rollback%delFile%
pause
set counter=%delFile%
:incrementLoop
IF "%counter%" geq "0"
(
    ren \.rollback%counter% \.rollback
    set /a %counter% = %counter%-1
    goto incrementLoop
)
goto incrementLoop
pause 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T00:30:57.177

```
@echo off
setlocal EnableDelayedExpansion
cd C:\temp3
for %%f in (*.rollback?) do set delFile=%%f
echo del %delFile%
pause
set lastFile=%delFile:~-1%
set /A lastButOne=lastFile-1
for /L %%i in (%lastButOne%,-1,1) do (
   echo ren *.rollback%%i *.rollback!lastFile!
   set lastFile=%%i
)
echo copy C:\different\directory\file.data file.rollback1
pause 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T18:55:50.780

```
@ECHO OFF
SET "rollbackdir=..."
SET "differentdir=..."
SET "filename=..."
SET "numcopies=3"
FOR /L %%i IN (%numcopies%,-1,1) DO (
  IF %%i == %numcopies% (
    DEL "%rollbackdir%\%filename%.rollback%%i" 2>NUL
  ) ELSE (
    SETLOCAL EnableDelayedExpansion
    RENAME "%rollbackdir%\%filename%.rollback%%i" "%filename%.rollback!next!" 2>NUL
    ENDLOCAL
  )
  SET next=%%i
)
COPY "%differentdir%\%filename%.data" "%rollbackdir%" 
```

# android - 如何与 Adob e Air 的锁屏播放器控件集成？

> ID：10354306
> 
> 赞同：0
> 
> 时间：2012-04-27T16:20:27.927
> 
> 标签：android, ios, apache-flex, audio, air

我开始在 Adob​​e Flex 中为 iOS 和 Android 编写应用程序。到目前为止，我唯一没有弄清楚的难题是如何与 iOS 和 Android 中的 OS 媒体播放器控件集成。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T09:57:29.690

正如@www.Flextras.com 提到的那样，唯一的方法是创建一个本机扩展[如何扩展空气](http://www.adobe.com/devnet/air/articles/extending-air.html)

那里有很多示例和一些用于各种功能的开源库，但我看不到任何东西提供对锁屏音频的支持。创建自己的可能是最好的解决方案，祝你好运。

# internet-explorer - IE9收到ETag后伪造304

> ID：10354309
> 
> 赞同：10
> 
> 时间：2012-04-27T16:20:46.407
> 
> 标签：internet-explorer, xmlhttprequest, etag, http-status-code-304

我遇到了 AJAX 和 Internet Explorer 9 的问题：它在收到对初始 etagged GET 的响应后停止轮询我们的服务器。

它假装发出带有响应的请求，例如“响应 HTTP/1.1 304 未修改，状态 200 OK”（是的，一个响应中有两个不同的状态代码）和相同的 ETag（应该随时间变化），但它们实际上都没有出现在服务器中日志。

此问题仅出现在 IE 中，相同的代码在 Chrome 和 FF 中运行良好。

也许将 {cache: false} 传递给 jQuery.ajax() 可能会有所帮助，但我想知道是否有办法在服务器端解决问题。

我们的 ETag 使用可能存在错误。

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-18T08:58:58.897

我想这篇文章对你有用： [http ://www.dashbay.com/2011/05/internet-explorer-caches-ajax/](http://www.dashbay.com/2011/05/internet-explorer-caches-ajax/)

问题在于 AJAX 缓存。对于必要的请求，您无论如何都应该禁止它。

# makefile - 为什么 GNU make 的 vpath 匹配路径将路径匹配为字符串，而不是路径？

> ID：10354312
> 
> 赞同：0
> 
> 时间：2012-04-27T16:20:55.133
> 
> 标签：makefile, gnu

我正在优化一个非常大的项目的一些 makefile，我发现 GNU make 的`vpath`命令只能做非常有限的工作。例如：

```
vpath %.o $(OBJPATH) 
```

表示通过 OBJPATH 搜索路径值中的所有目标文件。这意味着`/dir1/../dir2/obj1.o`和`/dir3/../dir2/obj1.o`是同一个文件，但是，如果我已经制作了`/dir1/../dir2/obj1.o`，当工具考虑规则时`/dir3/../dir2/obj1.o`，它仍然找不到它，并且必须重新制作`/dir3/../dir2/obj1.o`，即使它代表相同的文件`/dir1/../dir2/obj1.o`。

我检查了 GNU make 源代码；它使用哈希表来比较文件路径字符串，因此如果字符串不同，虽然它们代表同一个文件，但仍然无法使用`vpath`.

为什么不实现`vpath`更强大的功能呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-27T20:53:36.573

关于：

*[GNU Make] 使用哈希表来比较文件路径字符串，因此如果字符串不同，虽然它们代表同一个文件，但仍然无法使用 vpath 进行匹配。*

Make 正在做大约正确的事情。检测两个对象是否相同需要依赖文件系统中的唯一 ID（例如 inode 编号），这些 ID 是操作系统和文件系统特定的。

为什么要使用两条不同的路径来引用相同的目标或先决条件？可以说，您在 Makefile 中所做的事情比 Make 依赖字符串相等性进行路径比较更糟糕。

另外，你可能误解了一些东西。该`vpath`指令和`VPATH`变量与搜索必备文件有关。

您很少，如果有的话，想要搜索目标文件作为先决条件（当然，它们是构建可执行文件或库的先决条件）。

这是因为不能假定目标文件存在，并且您不会搜索可能不存在的东西。当您进行干净构建时，目标文件不存在。您的 Makefile*必须知道它们的确切名称是什么*。这是可以变化的先决条件。例如，您知道要构建`foo.o`（可能已经存在于以前的构建中，也可能不存在）。您不一定知道`foo.o`构建的源文件。是`libfoo/foo.c`还是`utils/foo.c`？这是要`vpath`解决的问题：它将搜索那些地方并找到`foo.c`，类似于如何`PATH`帮助您的 shell`foo`在`/bin`or`/usr/bin`等​​中查找程序。

`VPATH/vpath`为小型项目编写快速而肮脏的makefile有点像hack，这些项目不会扩展到大型配置。试图改进它们是没有意义的。

# javascript - 带有 JQuery-UI 警报的复选框

> ID：10354316
> 
> 赞同：0
> 
> 时间：2012-04-27T16:21:02.070
> 
> 标签：javascript, jquery, jquery-ui

单击链接时，它应该会在单击稍后下载按钮时弹出对话框，它会切换按钮的选中变量。然后关闭对话框按钮

我是 Javascript 和 Jquery 的新手，不知道我在做什么

```
 $(function download_box(checkbox) {
        // a workaround for a flaw in the demo system (http://dev.jqueryui.com/ticket/4375), ignore!
        $( "#opener" ).click(function() {
            $( "#dialog-download" ).dialog( "open" );
            return false;
        });

        $( "#dialog-download" ).dialog({
            autoOpen: false,
            resizable: false,
            height:140,
            width:325,
            modal: true,
            buttons: {
                "Download Now": function() {
                    var mycheckbox1 = document.getElementById(checkbox);
                    if(mycheckbox1.checked){
                        box.checked=false;
                    }
                    else{
                        box.checked=true;
                    }
                    $( this ).dialog( "close" );
                },              
                "Download Later": function() {
                    $('#c2').prop("checked", true);
                    $( this ).dialog( "close" );
                },
                Cancel: function() {
                    $( this ).dialog( "close" );
                }
            }
        });
    }); 
```

```
<form method="post" action="<?php echo $PHP_SELF;?>">
   <a id="opener" href="#" OnClick="download_box('#c1')">db1.csv:</a>
   <input id="c1" type="checkbox" name="download[]" value="db1.csv" />
   <!-- ... -->
   <input type="submit" value="submit" name="submit">
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T17:09:00.850

我给了你所有的锚标签一类开启者，然后我绑定了一个点击函数到那个锚上，设置对话框上的选项。选项集主要是您希望在表单上具有的按钮及其相应的功能。我使用这种方法是因为函数需要稍微动态一些，因此在最初创建对话框时我无法声明它们。按钮切换复选框，稍后下载按钮单击复选框并关闭对话框，最后关闭按钮只是关闭对话框。

需要注意的一点是，每个页面应该只有 1 个具有给定 id 的元素，因此有 9 个 id 为 opener 的锚标签是自找麻烦。同样使用 jquery 很容易将函数绑定到 html 元素上的事件，这是在 html 中内联附加函数的首选方法，即（onclick=download_box）。

HTML

```
<div id="dialog-download" title="Download Now?">
    <p><span style="float:left; margin:0 7px 20px 0;"></span>Download the file now or later?</p>
</div>    
<form method="post" action="<?php echo $PHP_SELF;?>">
<a class="opener" href="#">db1.csv:</a>
<input id="c1" type="checkbox" name="download[]" value="db1.csv" /><br />
<a class="opener" href="#" >db2.csv:</a>
<input id="c2" type="checkbox" name="download[]" value="db2.csv" /><br />
<a class="opener" href="#" >db3.csv:</a>
<input id="c3" type="checkbox" name="download[]" value="db3.csv" /><br />
<a class="opener" href="#" >db4.csv:</a>
<input id="c4" type="checkbox" name="download[]" value="db4.csv" /><br />
<a class="opener" href="#" >db5.csv:</a>
<input id="c5" type="checkbox" name="download[]" value="db5.csv" /><br />
<a class="opener" href="#" >db6.csv:</a>
<input id="c6" type="checkbox" name="download[]" value="db6.csv" /><br />
<a id="opener" href="#">db7.csv:</a>
<input id="c7" type="checkbox" name="download[]" value="db7.csv" /><br />
<a class="opener" href="#">db8.csv:</a>
<input id="c8" type="checkbox" name="download[]" value="db8.csv" /><br />
<a class="opener" href="#" >db9.csv:</a>
<input id="c9" type="checkbox" name="download[]" value="db9.csv" /><br />
<input type="submit" value="submit" name="submit">
</form> 
```

Javascript

```
$(document).ready(function(){
    $("#dialog-download ").dialog({
        autoOpen: false,
        resizable: false,
        height: 140,
        width: 325,
        modal: true
    });
    $(".opener").click(function(){
        var that = this;
        var checkbox = $(that).next(":checkbox");

        $("#dialog-download").dialog("option", {
            buttons: {
                "Download Now": function(){
                    $(checkbox).prop("checked", !$(checkbox).attr("checked"));
                    $("#dialog-download").dialog("close");
                },
                "Download Later ": function(){
                    $(checkbox).prop("checked", true);
                    $("#dialog-download").dialog("close");
                },
                "Cancel": function(){
                    $("#dialog-download").dialog("close");
                }
            }
        });
        $("#dialog-download").dialog("open");
    });
}); 
```

工作示例：http: [//jsfiddle.net/ccrAF/](http://jsfiddle.net/ccrAF/)

# plugins - 钛 Appcelerator 插件

> ID：10354318
> 
> 赞同：0
> 
> 时间：2012-04-27T16:21:10.437
> 
> 标签：plugins, osx-lion, ios-simulator, coffeescript, titanium

我在 Mac OSX Lion 上使用 Titanium appcelerator，我正在尝试将其配置为在构建中编译咖啡脚本文件。我已按照[https://github.com/billdawson/ti_coffee_plugin](https://github.com/billdawson/ti_coffee_plugin)的说明进行操作。我的问题是，每当我尝试在任何环境（Android 或 iphone）的模拟器中运行我的应用程序时，都会出现以下错误：

```
[ERROR] Build Failed (Missing Plugins Directory) 
```

似乎希望我的插件位于我的本地 ~/Documents/Titanium Studio Workspace/testCoffee 以及 ~/Library/Titanium Support/plugins 目录中。我尝试将它们复制过来，但这会导致不同的问题。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T20:46:45.467

我也在为此苦苦挣扎，但我通过在 plugin.py 文件上方的插件目录中添加一个“1.0”文件夹来解决丢失的插件目录。我没有看到它需要工作区中的插件文件，但它是否在全局或用户库目录中查找存在歧义，或者可能两者兼而有之，我不知道它在 OS X 中是如何工作的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T09:03:50.967

您实际上已经在您的问题中找到了这个特定问题的答案。（在括号中添加了说明）

> 我尝试将它们复制到[Titanium Support/plugins]，但这会导致不同的问题。

当我在 OS X 上使用它时，我相信文件的正确文件夹结构是`~/Library/Titanium Support/plugins/ti_coffee_plugin/1.0/plugin.py`

我回到这个是因为我试图在 Ubuntu 上进行设置，所以我只是想为那些试图在这个系统中工作的人添加它。Ubuntu 的正确文件夹设置是：`~/.titanium/plugins/ti_coffee_plugin/1.0`

在这两种情况下，您首先必须转到该钛支持文件夹并`mkdir -p plugins/ti_coffee_plugin/1.0`从全新安装的钛，因为它不会默认创建插件文件夹。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T14:04:49.770

我有一个模板项目可以在 Titanium 上使用 Coffeescript：[titanium-coffeescript](https://github.com/alfonsocora/titanium-coffeescript)

所有代码都应写入该`coffee`文件夹。然后，在运行时`rake`，所有的 javascript 文件都会生成到`Resources`Titanium 使用的文件夹中。然后，您可以从 Titanium Studio 运行该应用程序。

# c++ - C++：使用“.hh”作为 C++ 头文件扩展名的原因

> ID：10354321
> 
> 赞同：31
> 
> 时间：2012-04-27T16:21:12.960
> 
> 标签：c++, header-files

我想知道为什么我们使用“.hh”作为 C++ 头文件的扩展名，而不是只使用“.h”。

头文件被预处理，预处理器甚至不关心头文件的扩展名。所以，即使我创建了一个扩展名为“.qwe”（test.qwe）的头文件。那么，为什么要使用“.hh”作为 C++ 头文件的扩展名。

有人说，我们使用“.cc”作为 C++ 文件的扩展名以区别于 C 文件（扩展名为“.c”），同样我们使用“.hh”作为 C++ 头文件的扩展名以区别于 C头文件（扩展名为“.h”）。我不认为这是一个正当的理由。

有谁知道以这种方式命名的原因？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-04-27T16:24:12.603

> 有人说，我们使用“.cc”作为 C++ 文件的扩展名以区别于 C 文件（扩展名为“.c”），**同样我们使用“.hh”作为 C++ 头文件的扩展名以区别于 C头文件（扩展名为“.h”）**。

这正是原因。这只是区分 CPP 标头和 C 标头。

一些程序员和库，例如 Boost，`.hpp`用于 CPP 标头。我个人的选择是这样的：

*   例子.c
*   例子.cpp
*   例子.h
*   例子.h++

即使它们都属于一个巨大的项目，您仍然可以弄清楚哪个是哪个。无需描述。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-27T16:23:42.433

您可以根据需要命名标题，它们甚至可以根本没有扩展名。

[此常见问题解答](http://www.parashift.com/c++-faq-lite/coding-standards.html#faq-27.9)提到了标头命名约定。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-27T16:26:29.993

我认为这主要是一种社会惯例。

但是，最近的 GCC 编译器能够在解析该标头后将（单个）标头编译成类似`foo.hh`或基本上包含编译器（由启动的程序）的持久内存堆映像的东西。`foo.h``foo.hh.gch``foo.h.gch``cc1plus``g++`

请注意，C++11 标准库定义了头文件，例如`<vector>`，没有任何扩展名。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-27T16:24:03.277

这不是出于任何特定原因，它只是一个（开发人员或项目特定的）约定。由于“文件扩展名”只是名称的一部分，它并不重要，因为源文件只是纯文本文件。此外，头文件只是复制粘贴到包含它们的文件中（通过`#include`，因此文件扩展名对它们来说意味着更少。

Borland 的图书馆的标题有`.hpp`扩展名。C++ 的标准库头文件根本没有扩展名。这只是惯例和个人品味的问题。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-27T16:25:29.927

这完全是约定俗成的，没有什么特别的原因。通常人们试图在整个项目、团队甚至整个公司中保持一致。它可以帮助在您离开很久之后拿起您的代码的开发人员了解您 abc.hh 与文件 abc.cc 一起使用，而 abc.h 与 abc.c 一起使用。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-27T16:26:19.000

一个原因，如果我正在创建一个包含围绕一堆 C++ 代码的 C API 的 dll，我需要区分客户端可能用来导入 C 函数的 C 头文件和我明确不使用的内部 C++ 头文件想让客户端导入。

在大多数语言/环境中，绑定到 C 函数非常简单，几乎没有开销。您不必考虑 C++ 中继承的所有复杂性。因此，如果我要使用这样的库，我一定要将我的 C++ 与我的 C 接口分开。

# javascript - 为什么 Javascript 的 instanceof 对这些原生构造函数返回 true？

> ID：10354324
> 
> 赞同：0
> 
> 时间：2012-04-27T16:21:28.670
> 
> 标签：javascript, prototype

这是在 Mozilla Firefox Web 控制台上；

```
> Function instanceof Function;
>true

>Array instanceof Function;
>true

>String instanceof Function
>true 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-27T16:23:56.593

因为所有构造函数都是函数，并且`Function`, `Array`, 和`String`都是构造函数（即，您`new`与它们一起使用）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T16:28:04.453

通常人们不会为这些类型使用构造函数，而是选择像`[]`,`""`和`function(){}`. 但是，您可以使用它们的构造方法创建字符串、数组和函数：

```
var str = new String("Hello World"); 
```

请注意，我们正在调用一个函数 - 字符串构造函数。数组也是如此：

```
var arr = new Array("Hello", "World"); 
```

再次，调用一个函数。这些都是 Function 的实例，因为我们使用了它们的构造函数。这不是文字的情况：

```
var str = "Hello World";
console.log( str instanceof Function ); // false

var arr = ["Hello", "World"];
console.log( arr instanceof Function ); // false 
```

# javascript - 使用 Javascript 在 iframe 内重定向？

> ID：10354325
> 
> 赞同：1
> 
> 时间：2012-04-27T16:21:29.923
> 
> 标签：javascript, iframe, html

这是一个跨域 iframe（无法控制 iframe 的内容。）

这是小提琴网址[http://jsfiddle.net/biggenius/wH4p7/](http://jsfiddle.net/biggenius/wH4p7/)

但它不起作用。单击“开始”按钮后，我需要将用户重定向到 google.com。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T16:24:00.990

您的 Go 按钮的代码需要在该 iframe 上，而不是在其他页面上，因为其他页面无法控制您所说的内容。使用 iframe 无法解决它。

如果您通过 ajax 将内容加载到 div 中，这将很容易实现，如果它只是一个小搜索框，它应该可以正常工作。

iframe 是一场噩梦，在 99% 的情况下它们是可以避免的。

但是，您可以更改 src 属性，这将在 iframe 中加载另一个页面。

# visual-c++ - 如何使用 C/C++ 启动/停止名称中包含空格的 Windows 服务

> ID：10354327
> 
> 赞同：1
> 
> 时间：2012-04-27T16:21:41.837
> 
> 标签：visual-c++, windows-services

我正在尝试编写启动/停止我系统的任何 Windows 服务的 ac/c++ 应用程序。

我的应用程序对于名称之间没有空格的服务运行良好，但对于它们之间有空格的服务名称没有响应。

以下是我用于打开服务的命令：

```
SC_HANDLE serviceDbHandle = OpenSCManager(NULL,NULL,SC_MANAGER_ALL_ACCESS);
SC_HANDLE serviceHandle = OpenService(serviceDbHandle,
                                      "My Service",
                                      SC_MANAGER_ALL_ACCESS); 
```

这里`"My Service"`- 第二个参数是`LPCSTR`，它的空终止正在产生问题。

我如何启动/停止名称中包含空格的服务 - 任何线索或建议都会有所帮助。

我在 xp 机器上使用 Visual Studio 2005。

谢谢，

阿尼尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T16:28:43.467

您需要使用服务的内部名称（没有空格），而不是显示名称（可能）。

来自[MSDN](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684330%28v=vs.85%29.aspx)：

> 要打开的服务的名称。这是创建服务对象时由函数`lpServiceName`参数指定的名称，**而不是用户界面应用程序显示的用于标识服务的服务显示名称**。`CreateService`

# monodevelop - 如何为 MonoDevelop 安装 protobuf-net

> ID：10354331
> 
> 赞同：1
> 
> 时间：2012-04-27T16:22:03.077
> 
> 标签：monodevelop, nant, protobuf-net

我下载了最新版本的 protobuf-net (v2 r480) 但我不知道如何安装它以在 MonoDevelop 中使用它。我找不到 README 文件或指令 :( 我也尝试用 nant 构建它，但它失败了[http://eugeneciurana.com/pastebin/pastebin.php?show=45036](http://eugeneciurana.com/pastebin/pastebin.php?show=45036)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T17:03:53.500

这取决于你在做什么！

对于常规的单声道和类型优先（即 DTO 作为代码），只需添加引用即可。

如果您的意思是“来自 .proto”，那么我没有任何神奇的 IDE 插件（尽管我愿意接受建议）。您可以在命令行（在您的构建脚本中）将“protogen”用于 .proto 到 c#

如果您使用的是 MonoTouch，您可能想要使用序列化程序集预生成 - 如果是，请告诉我。

# jquery - Jquery 在选择器中有井号

> ID：10354340
> 
> 赞同：0
> 
> 时间：2012-04-27T16:22:20.110
> 
> 标签：jquery

我想检查隐藏字段是否有值，并且隐藏字段的 id 包含井号，当我使用 jquery 获取它的值时，它会抛出，因为井号在 id 之前只允许一次. 我必须将井号转换为 ASCII 码还是有其他方法可以处理它？

有人可以帮忙吗？

```
var v = $('#ddlSort1#').val(); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-27T16:23:31.490

试试这个：

```
 var v = $('#ddlSort1\\#').val(); 
```

或者

```
 var v = $('input[id$="#"]').val(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T16:23:40.893

```
var v = $('#ddlSort1\\#').val(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T16:39:59.073

这对我有用。

```
var v = $('#\\ddlSort1\\#') 
```

[这里的例子](http://jsfiddle.net/u2LhJ/1/)

[写在这里不错。](http://mathiasbynens.be/notes/css-escapes)

[CSS 选择器在此处转义生成器页面](http://mothereff.in/css-escapes)

# c# - ASP.NET HttpHandler 是否超时

> ID：10354343
> 
> 赞同：11
> 
> 时间：2012-04-27T16:22:32.823
> 
> 标签：c#, asp.net, httphandler

我已经实现了一个 ASP.NET http 处理程序。在我看来，没有办法设置超时，例如，如果处理程序已经运行超过 X 秒，则不提供结果。

我在这里是正确的还是有办法为 ashx 处理程序实现超时？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-27T16:25:53.410

ASP.Net 有一个内置超时，这将导致它终止超过配置限制的连接。

[默认值为 110 秒。](http://msdn.microsoft.com/en-us/library/system.web.configuration.httpruntimesection.executiontimeout.aspx)

```
<system.web>
    <httpRuntime executionTimeout="110">        
</system.web> 
```

但是，在 DEBUG 模式下编译时会禁用此功能。

```
<!-- Execution Timeout Will Not Be Enforced -->
<compilation debug="true" /> 
```

如果您需要为特定处理程序设置执行超时，那么您始终可以专门为该处理程序创建一个位置，并在那里设置超时。

```
<location path="MyHandler.ashx">
  <system.web>
    <!-- Set execution timeout to 10 minutes -->
    <httpRuntime executionTimeout="600"/>
  </system.web>
</location> 
```

# mysql - 比较 MySql 表

> ID：10354346
> 
> 赞同：0
> 
> 时间：2012-04-27T16:22:48.817
> 
> 标签：mysql, database

我有 2 个表，每个表都有数字：

例如->

表 1：1 2 3 4 5

表 2：5 3 1

我正在尝试编写一个查询来显示表 1 中但不在表 2 中的任何值（反之亦然）。这些数字可以是任何顺序，并且都是主键。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T16:52:39.610

使用 进行两个单独的查询[`WHERE NOT EXISTS`](http://dev.mysql.com/doc/refman/5.6/en/exists-and-not-exists-subqueries.html)，然后将它们的输出与[`UNION`](http://dev.mysql.com/doc/refman/5.6/en/union.html).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T17:00:18.563

如果您编辑您的问题并给出您的表格架构，我可以给出更明确的答案。现在我只是假设。

```
select t1.* 
from table1 t1
left join table2 t2 on t2.id=t1.id
where t2.id is null 
```

**选择：**

```
select t1.* 
from table1 t1
where t1.id not in (select id from table2) 
```

# iphone - hello world 应用程序 - 为 iPhone 学习开发

> ID：10354348
> 
> 赞同：1
> 
> 时间：2012-04-27T16:22:49.207
> 
> 标签：iphone, xcode

我正在寻找一些使用 xCode 4 的教程。我找到了这个[，](http://paulpeelen.com/2011/03/17/xcode-4-ios-4-3-hello-world/)但它看起来不像我的 xCode。例如：
1）当我想创建一个新项目时，我没有找到“基于视图的应用程序”选项，只有单视图应用程序。目前我使用的是单一视图应用程序。
2）生成的项目不包含“HelloWorldViewController.xib”文件，所以我从新文件中添加了它。

现在，当我是文件的所有者时，我无法选择正确的函数（“changeTheTextOfTheLabel”），因为我在选项之间看不到它。

你能给我你的建议以完成我的第一个 HelloWorld 应用程序吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T16:31:32.787

如果您使用的是最新版本，Apple 提供的教程更有可能与您的工具相匹配。以下可能会有所帮助：

[您的第一个 iOS 应用程序](http://developer.apple.com/library/ios/documentation/iphone/conceptual/iPhone101/Articles/00_Introduction.html#//apple_ref/doc/uid/TP40007514-CH1-SW1)

[你的第二个 iOS 应用](http://developer.apple.com/library/ios/documentation/iPhone/Conceptual/SecondiOSAppTutorial/Introduction/Introduction.html#//apple_ref/doc/uid/TP40011318-CH1-SW1)

可以尝试使早期方法适应新模板和结构，但这也可能非常令人沮丧。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T16:32:19.350

您应该考虑遵循[Apple 的指南](https://developer.apple.com/library/ios/#referencelibrary/GettingStarted/RoadMapiOS/Introduction/Introduction.html)

从该指南的第三页，它们链接到[Hello World 教程](https://developer.apple.com/library/ios/#referencelibrary/GettingStarted/RoadMapiOS/JumpRightIn/iPhone101/Articles/00_Introduction.html#//apple_ref/doc/uid/TP40011343-TP40007514)

完成后，iTunes-U 上的以下课程*非常*好：http: [//itunes.apple.com/us/itunes-u/ipad-iphone-application-development/id473757255](http://itunes.apple.com/us/itunes-u/ipad-iphone-application-development/id473757255)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T16:33:26.843

可能您正在查看 xcode 3 的示例

但别担心

如果您使用的是 xcode 4.2+

单一视图 = 基于视图

如果删除故事板的勾号（复选标记），您可以找到 ViewController.xib

这是你的 HelloWorldViewController.xib

# bash - bash：将变量注入字符串会增加额外的 \r

> ID：10354351
> 
> 赞同：0
> 
> 时间：2012-04-27T16:22:57.937
> 
> 标签：bash, curl

我有一个使用 curl 将文件发送到我们的第三方云文件存储的脚本。

我正在使用 grep 提取在 http 响应中提供给我的 URL

看起来像这样

```
curl -X PUT -T media/file.tar.gz -D - \
     -H "ETag: ${md5}" \
     -H "Content-Type: application/x-gzip" \
     -H "${AuthToken}" \
     -H "X-Object-Meta-Date: ${today}" \
     "${StorageUrl}/dp/file1.tar.gz" 
```

然后我在 url 上收到一个错误的请求，打印出来就像

```
'PUT /v1/MossoCloudFS100213=123-123-1233a-ss9\r/dp/file1.tar.gz' 
```

看到在我的变量和 /dp/ 之间注入了令人讨厌的 \r 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T16:42:30.740

我猜你`$StorageUrl`从网络请求中获得了价值，并且网络响应行以 CRLF 结尾（网络标准通常要求 CRLF 行结尾）。外壳为您删除了 LF（换行符），但没有删除 CR（`\r`，回车）。在使用 URL 之前，您可能需要自己处理这些问题。

# python - 使用 render_to_string 时填充 {% csrf_token %}？

> ID：10354352
> 
> 赞同：1
> 
> 时间：2012-04-27T16:23:03.660
> 
> 标签：python, django

我需要使用render_to_string，但我不能使用

```
@csrf_protect 
```

并通过

```
context_instance=RequestContext(request)) 
```

到 render_to_string 因为我认为装饰器期望的是 HttpResponse，而不是 SafeString。

如何将 csrf_token 放入字符串中的表单中？

> “NoneType”对象没有属性“COOKIES”

编辑：感谢您的评论，这里有一些澄清：

我正在创建一个类似于“portlets”的“面板”系统，其中面板在数据库中配置（包括将面板呈现为字符串的 python 函数的名称 - 面板函数在运行时从它们在数据库）。

为了将这些面板放入页面中，我创建了一个自定义模板标签，它从数据库中读取所需面板的名称，将它们呈现为字符串，然后将一大块 html（作为字符串）返回到页面呈现。（这允许用户选择为他们显示哪些面板。）

我的问题是其中一个面板（使用 render_to_string 将模板呈现为字符串的简单 python 函数）中有一个表单。

我需要将 CSRF 字段插入到该表单中，因为它被呈现为字符串。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-28T08:12:58.760

我已经解决了这个问题，但我仍然非常想要一个好的解决方案。

面板功能现在看起来像：

```
def render_to_s(request, *args, **kwargs):
    panelDisplays = PanelDisplay.listAll()
    csrf_token_value = request.COOKIES['csrftoken']

    c = {"panelDisplays": panelDisplays, "csrf_token_value": csrf_token_value}
    return render_to_string('panels/config.html', c) 
```

虽然模板现在包括：

```
<div style='display:none'><input type='hidden' name='csrfmiddlewaretoken' value='{{ csrf_token_value }}'/></div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T09:44:37.297

在您看来，您使用 request.COOKIES['csrftoken'] 我不确定 cookie 是否始终可用，因此我的解决方案是在每个请求上生成 csrf 令牌。

```
from django.middleware.csrf import get_token

def render_to_s(request, *args, **kwargs):
    panelDisplays = PanelDisplay.listAll()
    csrf_token_value = get_token(self.request)

    c = {"panelDisplays": panelDisplays, "csrf_token_value": csrf_token_value}
    return render_to_string('panels/config.html', c) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-28T04:57:54.343

视图应始终返回 HttpResponse（或其祖先之一）。所以你应该 return `HttpResponse(your_rendered_string)`，但它和 call 是一样的`render_to_response`。如果您需要修改响应正文，您也可以使用响应来完成：

```
response = render_to_response(...)
response.content = response.content.replace('A', 'B')
return response 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T19:32:49.193

这是一个完整解决方案的示例。一切都源于这篇优秀的帖子。

这是基于您希望在网站的多个页面上包含邀请表单而不重复自己的情况。

邀请.widgets.py：

```
from invitations.forms import InvitationForm
from django.middleware.csrf import get_token
from django.template.loader import render_to_string

def invitation_widget_function (request):
    # ... blah blah blah 
    # ... stuff I don't want 
    # ... to repeat in every view
    invitation_form = InvitationForm ()
    csrf_token_value = get_token(request)
    context = { 'invitation_form': invitation_form, 
                'csrf_token_value': csrf_token_value }
    return render_to_string ( 'invitation_widget_template.html', context ) 
```

邀请小部件模板.html：

```
<form action="/whatever/" method="post">
    {% csrf_token %}  {# don't do this because it won't work in streamed output #}
    {# do this instead: #}
    <div style='display:none'>
    <input type='hidden' name='csrfmiddlewaretoken value='{{ csrf_token_value }}'/>
    </div>
    {{ invitation_form }}
    <button type="submit">Invite Someone</button>
</form> 
```

视图.py：

```
from invitations.widgets import invitation_widget_function 
from django.shortcuts import render         

def page_view (request):
    invitation_widget = invitation_widget_function(request)
    context = { 'invitation_widget': invitation_widget }
    return render (request, 'page_template.html', context ) 
```

page_template.html：

```
<body>
    <div>
    {% include "some_normal_template.html" %} {# takes context from page_view() #}

    {{ invitation_widget }} {# not an include, but a fully rendered string #}
    {# took context from invitation_widget_function() -- has csrf token included #}
    </div>
</body> 
```

# php - 远程检查机器是 windows 还是 linux 的最佳方法是什么？

> ID：10354354
> 
> 赞同：0
> 
> 时间：2012-04-27T16:23:06.240
> 
> 标签：php, windows, linux, ls, plink

我不知道这个或服务器故障是否是提出这个问题的最佳地点。我将把它放在这里，因为我描述的方法是通过 PHP 脚本启动的。

我想从网络上的一台机器远程检查该网络上的另一台机器是 Windows 机器还是 linux 机器。我知道目标机器的登录信息。

我在 PHP 中使用 proc_open 运行 plink 来启动 ls 命令。这是跨平台（我想要的），因为有一个 windows 和一个 linux plink。如果它成功并且我得到一个输出，那么这台机器就是一台 linux 机器。如果它失败了，那么我假设它的窗口。我可以放心地假设 Windows 机器没有在 cygwin 中运行 OpenSSH。

问题是，在某些 Windows 机器上，在它对 Windows 机器失败之前的超时需要永远。我需要一些更快的东西，它仍然可靠并且很容易放入脚本中。谁能想到任何等效的东西？

# servlets - javax.servlet.HttpServletResponse.sendRedirect 不重定向

> ID：10354358
> 
> 赞同：0
> 
> 时间：2012-04-27T16:23:19.650
> 
> 标签：servlets, redirect, response, servlet-filters

我有一个 javax.servlet.Filter 类，我想重定向 url。问题是当我打电话时

```
httpResponse.sendRedirect("http://myurl/login.jsp")
return; 
```

它不会重定向到那里。我可以从 firebug 网络控制台看到请求匹配正确的 url，但页面没有改变，当前地址栏 url 保持不变。

该请求看起来有效。

```
Request URL:http://myurl/login.jsp
Request Method:GET
Status Code:200 OK
Request Headersview source
Accept:*/*
Accept-Charset:ISO-8859-1,utf-8;q=0.7,*;q=0.3
Accept-Encoding:gzip,deflate,sdch
Accept-Language:en-US,en;q=0.8
Connection:keep-alive
Host:localhost:7001
Referer:http://myurl/index.jsp
User-Agent:Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/535.19 (KHTML, like Gecko) Chrome/18.0.1025.162 Safari/535.19
X-Requested-With:XMLHttpRequest
Response Headersview source
Content-Language:en-US
Content-Length:764
Content-Type:text/html; charset=ISO-8859-1
Date:Fri, 27 Apr 2012 16:49:55 GMT
X-Powered-By:Servlet/3.0 JSP/2.2 
```

响应包含 login.jsp 的内容

```
<!DOCTYPE html>
<html>
<head>
<title>Login</title>
</head>
<body>
...
</body>
</html> 
```

我试过使用

```
request.getRequestDispatcher("/login.jsp").forward(request, response); 
```

这根本行不通，正如我在 Firebug 中看到的那样，它请求我当前所在的 url。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T16:27:14.077

发送重定向时**不要**打电话。否则，过滤器仍将继续对初始 URL 的请求，并且每次您尝试重定向`chain.doFilter()`时，您的服务器日志都会充满异常。`IllegalStateException: response already committed`

另请参阅此相关答案：[java.lang.IllegalStateException: Cannot (forward | sendRedirect | create session) after response has been commited](https://stackoverflow.com/questions/2123514/java-lang-illegalstateexception-cannot-forward-after-response-has-been-committe/2125045#2125045)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T17:27:40.307

初始化响应流（例如 response.getWriter()）后，重定向不起作用：

对我来说，以下代码失败：

```
protected void doGet(HttpServletRequest request, HttpServletResponse response)
        throws ServletException, IOException {
    log.info("incoming request :{}", request.getRequestURL());
    boolean failed;
    try {
         // do something
        failed = processGetRequest(request, response.getWriter());
    } catch (Exception e) {
        log.error("Error during collecting resource data -> redirect to root");
        failed = true;
    }

    if (failed) {
        response.setHeader("Location", "http://www.somewhere.de" );
        // 301 Moved Permanently
        // 307 Temporary Redirect
        response.setStatus( HttpServletResponse.SC_MOVED_PERMANENTLY);

    } else {
        response.setContentType("text/html;charset=UTF-8");
        response.setStatus(HttpServletResponse.SC_OK);
    }
} 
```

但是如果我在临时缓冲区中准备数据（替换 processGetRequest（））并稍后打开编写器，它就可以工作.....

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T18:16:17.510

我正在重定向来自 CometD 的请求，它实际上并没有将我发送到任何地方。必须对 GET 请求进行重定向。

# php - 嵌入 youtube 视频参数被忽略

> ID：10354359
> 
> 赞同：0
> 
> 时间：2012-04-27T16:23:23.370
> 
> 标签：php, regex, preg-replace, pattern-matching, embed

我使用以下代码替换 youtube url 以嵌入链接，以便将它们显示为视频。但是我遇到了一个问题，我无法从具有除 ?v=video_code 以外的更多参数的链接中查看视频

php代码：

```
function embedYoutube($text)
{

    $pattern = '|http://www\.youtube\.com/watch\?.*?\bv=([^ ]+)|';
    $replacement = '<div style="width:100%;float:left;margin-top:15px;margin-bottom:15px;"><iframe width="570" height="315" src=http://www.youtube.com/embed/$1 frameborder="0" allowfullscreen></iframe></div>';
    return preg_replace($pattern, $replacement, $text, 1);

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T16:30:51.003

更新您的正则表达式以仅匹配`v`参数，并且在第一个之前`&`：

```
|http://www\.youtube\.com/watch\?.*?\bv=([^ ]+)\&?| 
```

# ruby-on-rails - ruby on rails - 建立多对多连接后 - 我如何显示数据

> ID：10354366
> 
> 赞同：0
> 
> 时间：2012-04-27T16:23:41.687
> 
> 标签：ruby-on-rails, associations, relationship, has-and-belongs-to-many

我在这个网站的帮助下建立了多对多的关系。
我已经在模型中添加了 has_and_belongs_to_many
现在我想在屏幕上显示来自该对象的数据
我假设我应该在 html.erb 中执行它
让我们说我想要它在索引表单和编辑/新表单中

我该如何介绍呢？谢谢。

编辑：
我有两个对象：
即人和状态 - 一个人可以有很多状态）
我想要一个屏幕，我可以在其中显示该人的所有状态，另一个屏幕可以在其中添加他的其他状态。
正如我提到的，我创建了这样的 rb 脚本（两者都适用）

```
class CreateStates < ActiveRecord::Migration
def change
  create_table :states do |t|
    t.string :name
    t.timestamps
  end
 end
end 
```

和一个连接表

```
def up
  create_table 'persons_states', :id => false do |t|
  t.integer :persons_id
  t.integer :states_id
end 
```

结束并在模型中添加 has_and_belongs_to_many :ingredients

如何更新我的 gui 代码？感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T17:25:58.153

如果你有一个 Person 可以有许多状态，那么它很简单：

模型 person.rb

```
has_many :states 
```

状态.rb

```
belongs_to :person 
```

您生成的迁移：

```
rails generate model State person_id:integer name:string
rails generate model Person name:string 
```

如果您需要将`person_id`此外键添加到此人，只需执行以下操作：

```
rails generate migration Add_Person_ID_To_States person_id:integer
rake db:migrate 
```

通常不需要`has_and_belongs_to_many`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T20:27:36.203

Kulgar 的回答涉及建立关系，这是正确的。有了这些，您可以在视图中显示如下信息：

```
<%= @person.name %>
<ul>
  <% @person.states.each do |state| %>
    <li><%= state.name %></li>
  <% end %>
</ul> 
```

这假设您有一个适当的控制器操作，该操作设置`@person`为`Person`该类的一个实例。也许是这样的：

```
def show
  @person = Person.find(params[:id])
end 
```

你可以更进一步，添加一个局部视图来显示 State 类，然后在你的视图中引用它：

```
<%= @person.name %>
<% @person.states.each do |state| %>
  <%= render state %>
<% end %> 
```

这将使用 _state.html.erb 渲染部分并将局部变量状态传递给它。

所有这一切的重要部分是`@person.states`指与人相关的状态:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T16:35:26.027

你应该看看这个指南：[协会 - 拥有并属于许多官方指南](http://guides.rubyonrails.org/association_basics.html#has_and_belongs_to_many-association-reference)

如果没有与此关联绑定的模型/资源的名称，我将无法进一步帮助您。如果您想要更准确的答案，请提供。

好的，在您编辑问题之前已回答。

所以你想在你的 Person 和 States 模型之间建立一个“has_and_belong_to_many”关联。所以在你的“人”模型中你应该有：has_and_belongs_to_many :states。在您的“状态”模型中，您应该有： has_and_belongs_to_many :people （人的复数）。您与“has_and_belongs_to_many”关联的联接表必须是“people_states”，因为这是一个约定，您实际上没有选择权。

您还可以查看提供有用信息的[官方文档。](http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html)

# sql - 数据仓库设计

> ID：10354370
> 
> 赞同：0
> 
> 时间：2012-04-27T16:23:48.660
> 
> 标签：sql, database

我了解用于在线分析处理的数据仓库的概念。

我的问题特别与查询数据仓库有关。用于数据仓库的 SQL 和用于数据仓库的 SQL 有什么区别？我试图了解是否存在专门用于数据仓库类型系统的 SQL 变体，或者“多维数据挖掘”工具是否只是其实现级别的 SQL 工具。

例如，面向对象的 SQL 和对象关系 SQL 被记录为 SQL 语言的超集。其中一个在超立方体（多维）数据模型中使用得更多吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T16:30:18.290

您应该使用 T-SQL 查询 OLTP 数据库和[MDX](http://en.wikipedia.org/wiki/Multidimensional_Expressions)查询多维数据集 (OLAP)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-23T20:06:15.647

另外，您提到了数据挖掘。查询语言，如 SQL Server 中的 T-SQL 和 MDX，在您知道数据中存在哪些模式并希望查找统计结果时使用。数据挖掘被用作人工智能，当数据中存在您不知道的模式时，软件会搜索数据库并为您发现这些模式。在使用 SQL Server 堆栈时，SSAS 提供了此功能。

# c++ - std::tr1 尚未声明

> ID：10354371
> 
> 赞同：7
> 
> 时间：2012-04-27T16:23:52.367
> 
> 标签：c++, qt, compilation

我正在尝试第 n 次从源代码编译 qt，这次使用选项 configure -release -platform-win32 但我遇到了错误：
![在此处输入图像描述](../Images/69b1a04ac5c1c29e5b22e16cc5dedfe0.png)

任何人都知道如何解决它？
谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-06-23T19:06:07.773

当使用 MinGW 编译器（可能是任何 gcc 编译器）编译 Qt 时，您可能会遇到此问题，该编译器默认编译启用 C++11 标准的 C++ 程序。

第 3 方库 JavaScriptCore 尝试定义一些“规范化”`has_trivial_constructor`和相关模板的包装器，但显然它尚未更新以处理 GCC 的更新以合并完整的 C++11 标准。

`mkspecs\win32-g++\qmake.conf`修复方法是使用默认情况下不启用 C++11 功能的 MinGW 编译器，或者通过编辑将`-std=gnu++98`选项添加到 C++ 构建来关闭它们：

```
QMAKE_CXXFLAGS = $$QMAKE_CFLAGS -std=gnu++98
#                               ^^^^^^^^^^^^ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-27T16:33:05.047

如果您使用的是 gcc 4.7，则您可以访问大部分 C++11（如果您使用）进行编译，`-std=c++11`或者您可以在[此处查看](http://gcc.gnu.org/gcc-4.7/cxx0x_status.html)命名空间`-std=gnu++11`下支持的功能。子命名空间用于现在已成为标准的草案。`std``tr1`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-07-29T09:39:16.330

您可以用`std::tr1::has_trivial_constructor`C++11 标准化的`std::is_trivially_constructible`. 请参阅[http://www.cplusplus.com/reference/type_traits/is_trivially_constructible](http://www.cplusplus.com/reference/type_traits/is_trivially_constructible)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-01T10:23:23.253

尝试（包含在宏中`#include <type_traits>`）添加 `#include <tr1/memory>`TypeTraits.h

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-02-04T01:14:40.500

我能够解决这个问题只是把

QMAKE_CXXFLAGS += -std=gnu++98

在 src/script/script.pro 中。我希望编译一些编译单元 c++-11 和其他 gnu++98 不会造成任何问题。

# android - 像 Draw Something 这样的移动应用程序使用什么应用程序协议？

> ID：10354373
> 
> 赞同：1
> 
> 时间：2012-04-27T16:23:58.710
> 
> 标签：android, iphone, mobile

如果我要做 Draw Something、Zynga Poker 等，我应该考虑哪些应用程序协议和选择？这样的应用程序是基于 http 构建的吗，这意味着应用程序本身本质上是一个 Web 浏览器，或者它们使用的是自定义应用协议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T16:29:32.413

他们很可能使用 HTTP。所有移动应用程序客户端都连接到中央服务器，该服务器跟踪正在玩的游戏以及有关该游戏的各种信息。自定义协议在 Peer-2-Peer 应用程序中更为常见，但由于防火墙和 NAT 的数量以及对如何更改其防火墙设置缺乏了解，很少有应用程序以这种方式编写。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T16:48:18.840

正如 Spencer 所说，他们都在使用 HTTP 调用 Web 服务来保存和加载数据。尽管它们不呈现或下载 HTML，但它们本质上不是 Web 浏览器。他们使用协议来传递数据，但数据可能是 JSON、XML 或专有的。虽然它不是 HTML。

我要补充一点，如果您要开发自己的访问集中式 Web 服务的应用程序，您将需要 a) 使用 Web 服务框架（我推荐 RestKit 或 iPhone AFNetworking）编写您的应用程序，然后编写您的服务器端API 代码（使用您喜欢的任何语言），然后确定在何处托管您的服务器（我会推荐 EC2），或者 b) 使用新的 API 服务器服务之一，如 StackMob 或 Parse，为您处理创建和托管您的 API然后你只需要担心编写应用程序。

# python - DreamPie 不适用于 Python 3.2

> ID：10354376
> 
> 赞同：4
> 
> 时间：2012-04-27T16:24:00.650
> 
> 标签：python, python-3.2

我最喜欢的 Python shell 是[DreamPie](http://dreampie.sourceforge.net/)，我想在 Python 3.2 中使用它。我使用了“添加解释器”DreamPie 应用程序并添加了 Python 3.2。打开 Python 3.2 DreamPie 实例时，我收到以下错误消息：

![DreamPie 错误消息](../Images/0823cfa90a595a0f3cd0dd8ba6fc0ee0.png)

实际上，DreamPie 网站上没有提到 Python 3.2 支持，但我仍然想知道是否有办法让它工作。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-27T16:30:48.013

快速搜索发现的 DreamPie 问题[Can't launch python 3.2](https://bugs.launchpad.net/dreampie/+bug/716377)在第一条评论中包含以下解决方法：

> 要修复问题编辑`\dreampie\subp_main.py`，请替换：
> 
> ```
> sys.setdefaultencoding('utf-8') 
> ```
> 
> 和：
> 
> ```
> import platform 
> if not "3.2" in platform.python_version(): 
>     sys.setdefaultencoding('utf-8') 
> ```
> 
> 在 WindowsXP SP3 上测试，Python2.7 和 Python3.2 都可以与此修复一起使用。

在后面的评论中还有许多其他建议的解决方法。

**编辑：**

已经提交了针对此问题的修复程序，但据我所知，它还没有处于稳定版本中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-25T22:31:29.327

此问题现已修复，可在最新的稳定 DreamPie 版本 1.2.1 中使用。我正在使用它，它工作正常；我使用 Python 3.2 和 3.4 进行了测试。DreamPie[主页](http://www.dreampie.org/)上说：

> 几乎支持所有 Python 实现：2.5+、3.1+、Jython、IronPython 和 PyPy。

这是我截取的截图：

![在此处输入图像描述](../Images/d5009754ef5f5d0eb9c944fc415a2380.png)

# php - 性能最佳的 MySQL 查询

> ID：10354379
> 
> 赞同：0
> 
> 时间：2012-04-27T16:24:04.363
> 
> 标签：php, mysql, database

我有这个 mysql 数据库，我需要在其中执行更大的 MySQL 查询。用户 A 在名为 users 的表中有一行。在名为“trackers”的字段的值中，有一个逗号分隔的值，其中包含用户 A 收到通知的朋友的 id。

MySQL --> users (table) --> trackers (field) --> 2,3,4 (value)。

MySQL 服务器必须在一次查询中用逗号分隔值。我认为如果服务器只执行一个查询而不是使用 PHP foreach 每个值执行一个查询，它对服务器会更友好。

我需要这样的查询： SELECT * FROM users WHERE in (SELECT trackers FROM users WHERE id = $me SEPERATED BY ,)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T16:47:17.930

我对此的感觉是，表格设计不适合您希望实现的目标。我个人的方法是将跟踪器分成自己的表格。由于一个用户基本上是在跟踪另一个用户，因此该表将与用户表链接两次。

请参阅下面我建议的表格设计。

![建议的表设计](../Images/6f0af79209b0aae58af90256fd6a3bae.png)

因此，此设计将允许您通过如下查询选择用户正在跟踪的所有用户：

```
SELECT users.* 
FROM trackers
INNER JOIN users ON id = tracker
WHERE user.id = {your user id} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T16:30:29.960

我一直发现，对于像你这样的查询，做 2 个查询通常是最好的解决方案。

首先：

```
SELECT trackers FROM users WHERE `user_id` = $me 
```

然后第二次，将第一次的结果分解为：

```
SELECT * FROM users WHERE `id` IN (".implode(',',$results).") 
```

不确定这是否是*最好*的解决方案，但根据我的经验，它对我工作的某些网站的页面加载时间产生了巨大的影响。

# sql - 我正在尝试使用 servlet 和 bean 文件从表单中插入数据，但是当我尝试插入我得到的数据时 - 驱动程序不支持此功能

> ID：10354384
> 
> 赞同：0
> 
> 时间：2012-04-27T16:24:13.633
> 
> 标签：sql, ms-access, servlets, javabeans, prepared-statement

我正在使用 Access 和 Prepared Statement，下面的代码是我的 insertData 方法：

```
public static Bean insertData(String name, int age, String date, boolean hero, boolean villian) {
....
sql = "insert into hv(name, age, firstApperance, hero, villian) values (?,?,?,?,?)";
PreparedStatement ps = con.prepareStatement(sql);
ps.setString(1, name);
ps.setInt(2, age);
ps.setString(3, date);
ps.setBoolean(4, hero);
ps.setBoolean(5, villian);          
ps.executeUpdate (sql);         
...... 
```

前几个错误行是：

```
Driver does not support this function
at sun.jdbc.odbc.JdbcOdbcPreparedStatement.executeUpdate(Unknown Source)
at org.enterprise.Bean.insertData(Bean.java:59)
at org.enterprise.InsertData.doPost(InsertData.java:49) 
```

我只是对问题所在感到困惑，因为我已经检查了它们是否是变量名称、年龄、日期、英雄、恶棍中的数据；他们是在我的 servlet 中请求并转发给这个 bean。

```
String name = request.getParameter("nameIn");
String ageInState = request.getParameter("ageIn");
.... 
```

并使用以下命令发送到 bean 类：

```
bean = Bean.insertData(name, age, date, hero, villian); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T16:33:43.470

当您已经将 SQL 放入顶部的准备好的语句中时，为什么还要调用 ps.executeUpdate(sql) ？

ps.executeUpdate() 可能会起作用。

查看[http://docs.oracle.com/javase/tutorial/jdbc/basics/prepared.html](http://docs.oracle.com/javase/tutorial/jdbc/basics/prepared.html)以供参考。

# javascript - Firefox 插件生成器 - 无法使内容脚本工作

> ID：10354385
> 
> 赞同：0
> 
> 时间：2012-04-27T16:24:14.507
> 
> 标签：javascript, firefox, firefox-addon, add-on, firefox-addon-sdk

我有一个带有按钮的插件，可以打开一个带有几个按钮的面板。当一个按钮被按下时，它*应该*改变`keyword.URL`偏好，但事实并非如此。

这是main.js：

```
data = require("self").data

var panel = require("panel").Panel({
  height: 135,
  width: 260,
  contentURL: data.url("popup.html"),
  contentScriptFile: data.url("clicklisten.js"),
  onMessage: function(contentScriptMessage) {
    require("preferences-service").set('keyword.URL', contentScriptMessage);
  }
  //I think the problem is right there, but i have no idea why.
});

var button = require("widget").Widget({
  id: "search-engine-button",
  label: "Set search engine",
  contentURL: data.url("Refresh.ico"),
  panel: panel
}); 
```

这是 HTML 按钮的示例：

```
<button class="searchButton" id="addons" _keywordURL="https://addons.mozilla.org/en-US/firefox/search/?q=">Add-ons</button> 
```

这是 clicklisten.js（内容脚本）：

```
// Add event listener
var buttons = document.getElementByClassName("searchButton");
for (var i = 0; i < buttons.length; i++)
  buttons[i].addEventListener("click", changekeywordurl, false);

// Send a message to the extension if a button is clicked
function changekeywordurl(event)
{
  var button = event.target;
  self.postMessage(button.getAttribute("_keywordURL"));
} 
```

我觉得我已经尝试了我能想到的一切，但我无法让它发挥作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T20:31:04.203

在扩展程序中搜索错误时，检查错误控制台通常是一个很好的第一步。如果您按 Ctrl-Shift-J 打开它，您应该会看到：

```
Error: An exception occurred.
Traceback (most recent call last):
  File "resource://.../clicklisten.js", line 2, in 
    var buttons = document.getElementByClassName("searchButton");
TypeError: document.getElementByClassName is not a function 
```

那是因为该函数被调用`getElementsByClassName`（因为`s`缺少）。如果您更改为正确的名称，一切都会正常工作。

PS：我认为您从我对上一个问题的回答中复制了该错误（我没有在那里测试代码）。但是看看[https://stackoverflow.com/a/10309914/785541](https://stackoverflow.com/a/10309914/785541) - 似乎你没有，我的代码没有这个错误:)

# java - java（自动完成）文本字段中的多个选择/值

> ID：10354389
> 
> 赞同：0
> 
> 时间：2012-04-27T16:24:16.567
> 
> 标签：java, autocomplete, textfield

我正在做一个项目，我需要实现一个提供“自动完成多项选择”功能的组件。

当然，我阅读了很多教程并查看了很多示例，但我没有找到任何可以解决我的问题的方法。最后几天我一直在搜索和搜索，最后我看到的最好的组件是这个：

![Primefaces 自动完成多项选择](../Images/fbdd5c8d6ef0715e706a682cfc667522.png)

当您提出新问题并且必须指定所需的标签时，Stackoverflow 也支持这种功能。但这是 css，Java 无法处理“复杂”的 css 样式表。：/

所以，我想知道这是否可以用纯 Java 来完成。

如果没有，那么拥有一个包含不同组件的文本字段（或另一个字段？）来分隔不同的输入就足够了，如图所示。这正是我所需要的。

**包含可通过单击“X”删除的组件的字段**

但我不确定这是否可以用 Java 解决。我需要一种方法来分隔文本字段（或其他组件？）中的不同输入，例如在文本周围添加边框。这听起来很容易，但我想这可能真的很棘手。. .

有没有人有什么建议？或想法如何解决我的问题？我真的很感激，因为我的想法已经用完了。

PrimeFaces 的网址：http: [//www.primefaces.org/showcase-labs/ui/autoCompleteMultiple.jsf](http://www.primefaces.org/showcase-labs/ui/autoCompleteMultiple.jsf)

约安尼斯·K。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T16:57:03.403

Alice In Wonderland 的 swing 演示在 JTextPane/JEditorPane 中引入了组件。在空格前添加一个可点击的图像并进行一些着色可能就足够了。

另一种方法是在面板之类的编辑框中添加一个组件列表，其中最后是一个 JTextField，在空间/焦点丢失时会变成你的蓝色组件，并创建一个新的 JTextField。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T22:28:11.477

对于所有对解决方案感兴趣的人：

[http://tips4java.wordpress.com/2009/09/27/component-border/](http://tips4java.wordpress.com/2009/09/27/component-border/)

您可以添加包含多个按钮的面板，而不是添加单个按钮。玩一下设置，瞧！

# asp.net-mvc - 用于 json 嵌套数组的 MVC3 绑定

> ID：10354390
> 
> 赞同：4
> 
> 时间：2012-04-27T16:24:17.653
> 
> 标签：asp.net-mvc, json, asp.net-mvc-3, data-binding

我有一个简单的 javascript 数组。它是这样声明的：

```
coords = [] 
```

每次用户单击图像时，我都会执行以下操作：

```
coords.push([x,y]) 
```

所以我最终得到了这样的东西：（在javascript中）

```
[[342,144],[477,99],[632,148],[529,162]] 
```

但我不知道在控制器方法中将它绑定到什么......我试过了

```
List<List<int>>, int[][], int[,] 
```

它们似乎都不起作用。它仅在我使用字符串时有效。

这是我用来将其发送到服务器的代码：

```
$.ajax({
    type: "POST",
    url: "/home/SaveCoords",
    data: { coords: JSON.stringify(coords) }
}).done(function (msg) {
    alert("Data Saved: " + msg);
}); 
```

这是我在控制器上使用的代码

```
[HttpPost]
public ActionResult SaveCoords(string coords)
{
    return Json("Hello", JsonRequestBehavior.AllowGet);
} 
```

帮助？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-27T17:03:46.487

您应该将请求内容类型设置为`application/json`，并进行相应更改`data`。

这是工作示例：

```
 $.ajax({
        type: "POST",
        url: "/home/SaveCoords",
        contentType : 'application/json',
        data: JSON.stringify(coords)
    }).done(function (msg) {
        alert("Data Saved: " + msg);
    }); 
```

和服务器

```
 public ActionResult SaveCoords(int[][] coords)
    {
        return View();
    } 
```

# c# - 我可以在运行时 c# 应用程序中打开图表向导，如 excel 图表向导吗？

> ID：10354391
> 
> 赞同：0
> 
> 时间：2012-04-27T16:24:17.757
> 
> 标签：c#, charts, wizard

我正在构建 c# 应用程序并在其中使用了图表控件，但我想知道是否可以在运行时打开图表向导，我找到了一个库（devexpress - xtrachat 控件）可以让我做到这一点，但它不是免费的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T16:31:39.170

我对此表示怀疑。但是您可以放置​​表单控件并根据用户选择绘制图表。例如。您可以为系列设置复选框，并根据用户的复选框选择，您可以绘制系列。

# python - 绘图右侧的 Python Matplotlib Y 轴刻度

> ID：10354397
> 
> 赞同：132
> 
> 时间：2012-04-27T16:24:42.153
> 
> 标签：python, matplotlib

我有一个简单的线图，需要将 y 轴刻度从图的（默认）左侧移动到右侧。关于如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：228
> 
> 时间：2012-04-27T17:11:42.827

采用`ax.yaxis.tick_right()`

例如：

```
from matplotlib import pyplot as plt

f = plt.figure()
ax = f.add_subplot(111)
ax.yaxis.tick_right()
plt.plot([2,3,4,5])
plt.show() 
```

![在此处输入图像描述](../Images/fe388d9b33cfba0a80a0f02fc32fec6d.png)

* * *

## 回答 #2

> 赞同：116
> 
> 时间：2012-12-05T12:40:11.537

对于正确的标签使用`ax.yaxis.set_label_position("right")`，即：

```
f = plt.figure()
ax = f.add_subplot(111)
ax.yaxis.tick_right()
ax.yaxis.set_label_position("right")
plt.plot([2,3,4,5])
ax.set_xlabel("$x$ /mm")
ax.set_ylabel("$y$ /mm")
plt.show() 
```

* * *

## 回答 #3

> 赞同：64
> 
> 时间：2013-12-09T21:39:24.187

华金的回答有效，但具有从轴左侧移除刻度的副作用。要解决此问题，`tick_right()`请致电`set_ticks_position('both')`. 修改后的示例：

```
from matplotlib import pyplot as plt

f = plt.figure()
ax = f.add_subplot(111)
ax.yaxis.tick_right()
ax.yaxis.set_ticks_position('both')
plt.plot([2,3,4,5])
plt.show() 
```

结果是一个两边都有刻度的图，但右边有刻度标签。

![在此处输入图像描述](../Images/ede8756518193b7b0feee0421020ad20.png)

* * *

## 回答 #4

> 赞同：27
> 
> 时间：2014-04-17T17:45:19.490

只是有人问的情况（就像我一样），当使用 subplot2grid 时，这也是可能的。例如：

```
import matplotlib.pyplot as plt
plt.subplot2grid((3,2), (0,1), rowspan=3)
plt.plot([2,3,4,5])
plt.tick_params(axis='y', which='both', labelleft='off', labelright='on')
plt.show() 
```

它将显示：

![在此处输入图像描述](../Images/410570c8bea1b7a07a4bf77d7d79b109.png)

# java - 将 Wicket Repeater 与支持 Map 一起使用

> ID：10354398
> 
> 赞同：3
> 
> 时间：2012-04-27T16:24:45.407
> 
> 标签：java, wicket

所以本质上我想使用 Wicket 1.5 来显示一个项目及其相关数量。我用来支持这一点的数据结构是一个 Map (new HashMap())，其中 Item 是一个 POJ，其细节无关紧要。本质上我想使用一个wicket 的中继器，但我只有使用ListView 的经验。是否有一个可以很好地与地图配合使用的中继器，还是我需要自己编写代码？如果我需要自己编写代码，最好覆盖什么类？

我希望中继器的输出基本上是这样的：

QuantityX : 项目名称 (ItemNum)

例如：

2x : 一些物品 (255609)

地图可以通过用户输入进行更改，但我熟悉通过 Wicket 使用 AJAX 刷新组件的标记。非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T18:34:14.813

我最终使用 ListView ，其中 ListView 模型持有 Map.Entry ，正如上面 Thorsten 所建议的那样。它按预期工作，谢谢Thorsten。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T03:40:40.200

请参阅本文：[Wicket 模型魔术：地图支持的 ListView](https://community.jboss.org/people/ozizka/blog/2013/01/21/wicket-model-magic-map-backed-listview)

```
public CustomFieldsPanel( String id, final IModel<Map<String,ProductCustomField>> fieldMapModel, final FeedbackPanel feedbackPanel ) {

    super( id, fieldMapModel );
    this.feedbackPanel = feedbackPanel;

    this.setOutputMarkupId( true ); // AJAX JavaScript code needs to have some id="...".

    IModel<List<ProductCustomField>> listModel = new LoadableDetachableModel() {
        @Override protected List<ProductCustomField> load() {
            Map<String,ProductCustomField> map = (Map) CustomFieldsPanel.this.getDefaultModelObject();
            return new ArrayList(map.values());
        }
    };

    ListView<ProductCustomField> listView;
    add( listView = new ListView<ProductCustomField>("fieldsRows", listModel){
        @Override
        protected void populateItem( final ListItem<ProductCustomField> item ) {
            item.add( new CustomFieldRowPanel("fieldRow", item.getModel()){
                // Delete icon was clicked.
                @Override
                protected void onDelete( AjaxRequestTarget target ) {
                    Map<String,ProductCustomField> fieldsMap = (Map) CustomFieldsPanel.this.getDefaultModelObject();
                    fieldsMap.remove( item.getModelObject().getName() );
                    target.add( CustomFieldsPanel.this ); // Update UI.
                    try {
                        CustomFieldsPanel.this.onChange( target ); // Persists.
                    } catch (Exception ex){
                        feedbackPanel.error( ex.toString() );
                    }
                }
            });
        }
    });
    ...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-28T11:03:08.547

一种选择是使用您的 Listview 并为其提供一个您可以从地图中检索的列表，例如`Arrays.asList(HashMap#values#toArray)` 通常我更喜欢 Loop to Reapeat 的东西，因为您只需提供一个像 AbstractReadOnlyModel 这样的整数模型来定义迭代次数。在这种情况下，您可以轻松地构建自己的模型和辅助方法来从任何地方获取数据。如果您真的想构建自己的中继器，您应该扩展 AbstractRepeater，但您应该围绕 Loop 构建。

# android - OnPause()、OnResume() 和 OnDestroy

> ID：10354400
> 
> 赞同：4
> 
> 时间：2012-04-27T16:24:50.467
> 
> 标签：android, optimization

我开发了一个小应用程序，它使用几个不同的类来允许用户添加、删除和查看某些数据。我使用 arrayList 来存储条目，它有自己的类，该类具有链接到数组的方法，因此我可以从我的所有类中访问该数组。

我想介绍上述方法来优化我的代码，并想知道我是否可以将它们放在一个类中，希望与我有我的数组的应用程序类相同，并在那里定义它们将被使用的地方，这将让我不必在几个类中编写相同的代码，这可能吗？

谢谢

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-27T16:46:50.840

Android 调用`onPause`、`onResume`、时的示例。`onDestroy`

**暂停（）**

`OnPause()`当用户收到电话或短信等事件时调用，`onPause()`调用时`Activity`可能会部分或完全隐藏。

您可能希望将用户数据保存在 中`onPause`，以防他在没有明确保存数据的情况下点击返回按钮。

**OnResume()**

`OnResume()`当用户恢复他刚刚`Activity`离开的他时调用，例如他按下主页按钮然后返回应用程序，`onResume()`被调用。

您可以在此处进行与网络相关的更新，也可以在`onResume`.

**OnDestroy()**

`OnDestroy`当`Activity`被系统或用户销毁时调用，例如通过回击，直到应用程序退出。

您必须保存您想要持久保存的任何用户数据`onDestroy()`，因为系统不会为您执行此操作。

话虽如此，我必须告诉您，您不能在 onPause() 和 onDestroy() 中调用任何用户定义的方法，因为它们是在某些情况下调用的，并且除了我上面指定的操作之外，它们不会执行任何操作。

当 Activity 启动时，`onCreate()`调用设置您的屏幕，然后调用`onResume()`，您可以使用`onResume`它来做您想做的事情，但强烈建议您创建另一个类来进行此类操作，这有时可能是数据密集型的。最后调用你在另一个类中创建的那些方法`onCreate()`和.`onResume()``Activity`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-27T16:35:43.690

最好是包含您的覆盖方法代码的基本活动，然后您可以将其扩展为您的活动而不是活动。

所以所有扩展baseactivity的activity都会用三种方法来体现。

```
public class BaseActivity extends Activity {
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
    }
   @Override
protected void onPause(){
    super.onPause();

}
@Override
protected void onResume(){
    super.onResume();

}
@Override
protected void onDestroy(){
    super.onDestroy();

}

} 
```

**请注意**您要在上述三种方法中执行什么任务？它们在所有活动中是否相同，然后仅使用上述内容。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-27T16:31:18.810

不确定这是否是您正在寻找的，但请尝试单例模式。这将允许从任何活动访问您的类对象。IE。MyObject 对象 = Singleton.getInstance();

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-27T16:30:37.027

好吧，您可以创建一个扩展 Activity 的 BaseActivity 类，覆盖您想要覆盖的方法，而不是在所有其他活动上扩展 Activity，而是扩展 BaseActivity。

# mysql - iOS 上的回合制多人游戏

> ID：10354402
> 
> 赞同：2
> 
> 时间：2012-04-27T16:25:03.967
> 
> 标签：mysql, ios, multiplayer

我创建了一个应用程序，我现在希望将基于回合的多人游戏应用到该应用程序上。需要明确的是，我根本没有太多服务器经验。不过，我确实对 mySql 有所了解。

你们中有人知道这是如何实现的吗？我正在寻找一种与 Draw Something 和 Words With Friends 一样的解决方案。

**他们只是使用网络服务和数据库来存储每个游戏会话吗？**

我研究了 Amazon Web Services，似乎他们在他们的 iOS SDK 中有很多我正在寻找的东西，但我不知道它是否会太贵。

我已经搜索了很多“开箱即用”的解决方案，例如 photon 和 smartfox，但对于那些想要基于回合制多人游戏的人来说，它们似乎都过大了。

任何帮助将不胜感激，我将使用我找到的信息编辑这篇文章:)

干杯，奥拉夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T05:18:26.973

也许我没有正确理解您的问题，但是如果您对服务器端计算不太了解并且想要开箱即用的 TurnBased Match 处理，您可能应该查看 Apple 的官方回合制比赛 GameCenter Framework .

[请参阅此处](http://developer.apple.com/library/ios/#documentation/GameKit/Reference/GKTurnBasedMatch_Ref/Reference/Reference.html#//apple_ref/doc/uid/TP40010894-CH1-DontLinkElementID_1)的官方文档以及[Ray Wenderlich](http://www.raywenderlich.com/3276/how-to-make-a-simple-multiplayer-game-with-game-center-tutorial-part-12) 的一个非常好的教程

OpenFeint 还有一个[用于回合制比赛处理的 API](http://support.openfeint.com/dev/openfeint-api-for-ios-turn-based-multiplayer-implementation-guide/)

这些解决方案永远不会为您提供与您自己的服务器相同的控制，但它似乎可以满足您的需求。

祝你项目好运

# desire2learn - 使用 Desire2Learn 的 REST API 上传到我的个人储物柜中的文件夹

> ID：10354403
> 
> 赞同：1
> 
> 时间：2012-04-27T16:25:04.610
> 
> 标签：desire2learn

如何使用 Desire2Learn 的 REST API 将文件上传到我的储物柜？服务器返回状态码 200 但“发生意外错误”

```
POST /d2l/api/le/1.0/locker/mylocker/?x_a={appID}&x_c={appSig}&x_b={myUserID}&x_d={myUserSig}&x_t={time) HTTP/1.1
Host: myHost.com
Accept: */*
Content-type: multipart/mixed;boundary=BOUNDARY
Content-Length: 181

--BOUNDARY
Content-Type: text/plain
Content-Length: 4

test
--BOUNDARY
Content-type: application/json
Content-Length: 36

{"Description":"","IsPublic":"true"}
--BOUNDARY-- 
```

编辑（另一个请求，相同的结果）

```
POST /d2l/api/le/1.0/locker/mylocker/testFile?{authQueryparms}
Host: myHost.com
Accept: */*
Content-type: multipart/mixed;boundary=BOUNDARY
Content-Length: 288

--BOUNDARY
Content-Type: text/plain
Content-Length: 4

test
--BOUNDARY
Content-type: application/json
Content-Length: 142

{ "Description": {"Text": "Text description string for file.", "HTML": "<p>Text description string for <i>file</i>.</p>" }, "IsPublic": true }
--BOUNDARY-- 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T17:15:33.103

(OK, let's try this again)

It seems that the issue with your original question is that the back-end service doesn't know what file name to give to your uploaded file, not that it has a problem with where to put it (it will attempt to put it in your locker's root folder). The file-upload part in your request has to have a *Content-Disposition* header that provides the filename. Here's an example request that we've confirmed works on our test servers:

```
POST http://test.host/d2l/api/le/1.0/locker/mylocker/?{authQueryPams} HTTP/1.1
Content-Type: multipart/mixed; boundary=8cefca62f73c56c
Host: test.host
Content-Length: 595514

--8cefca62f73c56c
Content-Type: application/json

{"Description":"Test","IsPublic":false}
--8cefca62f73c56c
Content-Disposition: form-data; name=""; filename="test.jpg"
Content-Type: image/jpeg

<binary data>
--8cefca62f73c56c-- 
```

# ajaxcontroltoolkit - Umbraco Base 无法在共享主机环境中工作

> ID：10354410
> 
> 赞同：1
> 
> 时间：2012-04-27T16:25:39.280
> 
> 标签：ajaxcontroltoolkit, umbraco, base

每当我尝试访问诸如[http://mysite/Base/BaseClass/BaseFunction/ 之](http://mysite/Base/BaseClass/BaseFunction/)类的基本 url 时，我都会收到一条错误消息：

```
Unable to load one or more of the types in assembly 'AjaxControlToolkit, Version=4.1.51116.0, Culture=neutral, PublicKeyToken=28f01b0e84b6d53e'. Exceptions were thrown:
System.Security.SecurityException: Request failed.
System.Security.SecurityException: Request failed.
System.Security.SecurityException: Request failed. 
```

它在我的开发机器上运行良好，但在共享主机上出现此错误。有没有人遇到过这个错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T03:46:10.713

是的，您似乎缺少另一个程序集引用的程序集。也有可能该程序集已被比预期的新版本或旧版本覆盖。

# javascript - Javascript，查询主干-文本框不允许输入

> ID：10354414
> 
> 赞同：0
> 
> 时间：2012-04-27T16:25:55.793
> 
> 标签：javascript, jquery, html, backbone.js

我正在使用 javascript 和主干开发移动网络应用程序。

我在 html 页面上有一个文本框，如下所示：

```
<input type="text" id="searchquery" name="name" value="Alien"/> 
```

但是在 html 页面上，它不允许我在框中输入任何值。我很困惑，因为我已经为盒子下载了许多具有相同 html 的示例，并且它们都可以正常工作。

我必须在我的 .js 文件中初始化它吗？

任何帮助将不胜感激，因为该应用程序运行良好，但这个小错误正在造成巨大的破坏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T16:40:18.633

如果您使用 jQuery，您必须在以下位置初始化代码：

```
jQuery(document).ready(function(){ $("#searchquery").click(_your_function) }); 
```

另一种可能性是在底部页面初始化，但建议不要将 javascript 代码放在页面内容中（阅读有关 XSS 的信息）。

```
<body>
...
<script>init();</script><!-- By default it is javascript -->
</body> 
```

最后一种可能性是创建代码来检查页面的状态：请参阅： [检查文档状态](https://stackoverflow.com/questions/978740/javascript-how-to-detect-if-document-has-loaded-ie-7-firefox-3)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T16:42:13.120

你需要确保没有东西覆盖你的输入。你的html没有问题。除非您有一些脚本禁用它，否则我认为最可能的原因是 div 或没有背景的东西，因此透明地覆盖了它。

# c# - 无法使用 DateTime 执行 INSERT INTO 以在 MS Access 中保存时间戳

> ID：10354415
> 
> 赞同：3
> 
> 时间：2012-04-27T16:26:01.907
> 
> 标签：c#, ms-access, ado.net

我正在尝试将用户名和 DateTime 对象保存到 MS-Access 数据库，但出现“INSERT INTO 语句中的语法错误”。当我调试程序时，我看到日期已正确传递。此外，我完全删除了 DateTime 信息，并仅使用用户名使用 insert 命令并正确保存，因此它与 DateTime 本身有关，但我不知道是什么。以下是相关代码：

```
//event handler for Begin Program button
private void btnBeginProgram_Click(object sender, EventArgs e)
{
  //assign DateTime object to current computer date/time 
  busObject.DtDate = DateTime.Now;

  //assign input to busObject.UserName property
  busObject.UserName = txtEnterName.Text;   

  //call method to save input data
  busObject.SaveData();           

  this.Close();
}

//properties for variables and objects
public string UserName
{
  get { return userName; }
  set { userName = value; }
}

public DateTime DtDate
{
  get { return dtDate; }
  set { dtDate = value; }
} 

//method to call SaveData method in ProgramLoginDAL class
public void SaveData()
{
  ProgramLoginDAL.SaveData(this);
}

//method to save user input to database
public static void SaveData(ProgramLoginBOL busObject)
{
  try
  {
    OleDbCommand cmd = aConnection.CreateCommand();

    String sSQLCommand = "INSERT INTO ProgramLogin (UserName, DateTime) VALUES (?,?)";

    cmd.Parameters.AddWithValue("?", busObject.UserName);
    cmd.Parameters.AddWithValue("?", busObject.DtDate);

    if (aConnection.State == ConnectionState.Closed)
    {
      aConnection.Open();
    }

    cmd.CommandText = sSQLCommand;
    // Execute the SQL command
    cmd.ExecuteNonQuery();
    aConnection.Close();

    MessageBox.Show("Data Saved");                
  }
  catch (Exception ex)
  {
    Console.WriteLine(ex.ToString());
    MessageBox.Show("Error! Data was not saved.");
  }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T16:29:23.390

尝试在您的字段名称周围放置括号。大概是一个关键词：

```
String sSQLCommand = "INSERT INTO ProgramLogin (UserName, [DateTime]) VALUES (?,?)"; 
```

对于 DateTime，您可能必须指定数据类型：

```
sSQLCommand .Parameters.Add(
  new OleDbParameter("?", OleDbType.Date) { Value = busObject.DtDate }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T16:28:28.680

尝试在设置参数之前设置命令文本...这可能没什么，但我从未见过按此顺序完成...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T16:31:16.073

尝试为参数赋予不同的名称？

```
String sSQLCommand = "INSERT INTO ProgramLogin (UserName, DateTime) VALUES (@Name,@Date)";           

cmd.Parameters.AddWithValue("@Name", busObject.UserName);     
    cmd.Parameters.AddWithValue("@Date", busObject.DtDate); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-27T16:32:39.240

试试这个方法：

```
com.CommandText = "INSERT INTO ProgramLogin (UserName, [DateTime]) values (@userName, @date)";

cmd.Parameters.AddWithValue("@userName", busObject.UserName);
cmd.Parameters.AddWithValue("@date", busObject.DtDate); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-27T16:34:00.067

尽管 OleDb 提供程序使用位置参数而不是命名参数，但在集合中拥有两个同名的参数并不是一件好事。

此外，如果您使用的是访问数据库，则 DateTime 是保留字。需要用方括号封装

# ios - AVPlayer 播放期间出现无法解释的崩溃

> ID：10354416
> 
> 赞同：0
> 
> 时间：2012-04-27T16:26:10.310
> 
> 标签：ios, memory-management, memory-leaks, crash, avplayer

我有一个 UIViewController ，其中包含一个显示电影的 AVPlayer。

我编写了一对按钮来允许向前和向后跳到视频中的某些点。

单击其中任何一个按钮 12 次后，我的应用程序崩溃了。

我试过运行仪器，单击按钮时没有泄漏物体。分配大约为 14-15MB。调试时，应用程序甚至不会中断。

有人对如何隔离问题有任何建议吗？关于跟踪显然与内存相关但不会导致应用程序在调试期间中断的崩溃的任何建议。

提前致谢。

邓肯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T16:33:35.683

尝试使用 NSZombieEnabled 运行您的应用程序？单击方案下拉栏转到编辑方案，然后在参数选项卡中的环境变量列中添加 NSZombieEnabled 并将其值设置为 YES。使用僵尸时，任何发送到已释放对象的消息都会导致异常。

# javascript - Rails Asset Pipeline JS 压缩插入“非法字符”

> ID：10354420
> 
> 赞同：0
> 
> 时间：2012-04-27T16:26:38.667
> 
> 标签：javascript, ruby-on-rails, compression, asset-pipeline, ruby-on-rails-3.2

我[刚刚在我的 javascript 中问了一个](https://stackoverflow.com/questions/10353468/syntaxerror-invalid-character-u0008-message-from-the-doctype-tag/10353592#10353592)关于“非法字符”的问题。

![在此处输入图像描述](../Images/43574e4cdb062ef8a6771f9735e14017.png)

那里的答案让我发现在Rails资产管道中压缩javascript插入各种非法字符存在问题。

我在帖子中收到的错误是：

```
SyntaxError: Invalid character '\u0008' 
```

我发现**不使用压缩会导致这种情况完全消失**......但我想要压缩！该错误是使用 Rails 默认`uglifer`gem 发现的。我想这可能是那个特定压缩 gem 的错误，所以我尝试按照[Rails 文档](http://guides.rubyonrails.org/asset_pipeline.html#javascript-compression)中的指示使用其他压缩器。我得到了非常相似但不同的错误：

```
Uglifier: SyntaxError: Invalid character '\u0008'
Closure:  SyntaxError: Invalid character '\u0190'
YUI:      SyntaxError: Invalid character '\u0025' 
```

我尝试查看这些的最小化代码，但由于“无效字符”每次都不同，这让我相信其他问题是问题所在。

[这](http://cloudfront.giantuser.com/assets/application-37b1a9bb0cb78bb8680fcf0682eb769d.js)是一个示例压缩的 JS 文件。有人可以在这里指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T16:47:28.137

好像您`\b`在某些 JavaScript 正则表达式中使用了我认为不受支持的内容。尝试替换`\b`为`\u0008`, Ex

```
string.replace(/\u0008/g, '\\b') 
```

# php - 我的 $_SESSION['vars'] 似乎不起作用

> ID：10354421
> 
> 赞同：0
> 
> 时间：2012-04-27T16:26:39.343
> 
> 标签：php, .htaccess

我正在使用一个`$_SESSION['loggedIn']= true`似乎没有被保存的。我`session_start()`在保存之前使用它。我可以直接回显变量并设置，但是，一旦我更改页面，变量就消失了。`session_start()`我在另一页阅读之前也使用过...

现在，我有一个这样的 .htaccess 文件：

```
RewriteEngine On

RewriteCond %{REQUEST_FILENAME} !-d

RewriteCond %{REQUEST_FILENAME} !-f

RewriteCond %{REQUEST_FILENAME} !-l

RewriteRule ^(.+)$  index.php?v=$1 [QSA,L] 
```

好的..所以这是 index.php

```
@session_start();

define("x_app", "1");

define('X_BASE', dirname(__FILE__));

require_once X_BASE.'/config/config.php';

include "classes/browser.php";

$browser = new Browser();

$browser->setBrowserCookie();

$_SESSION['browser'] = $browser;

$_SESSION['language'] = "english";

//Getting View

$v = explode('/', $_GET['v']);

$view = $v[0];

After this I load the view..
In this case Login, which is loaded by a require function

defined('x_app') or die;

require('helper.php');

$email = $_POST['email'];

$password = $_POST['password'];

if(isset($_SESSION['loggedIn']) && $_SESSION['loggedIn'] == true){

    //Redirect to my portfolio landing page

}

else{ //Not Logged In

    //Process Form
    if(isset($_POST['email']) && isset($_POST['password'])){

        $xLogin = new X_Login();

        if($xLogin->login($email, $password) == true){

            echo 'User is logged In';

            //@session_start() ---> should I put this here again? Don't think so...
            // ! This is the variable that I can't save 
            $_SESSION['loggedIn'] = true;

                    // ! I have an echo here but if change the page, it gets lost
            echo 'session->'.$_SESSION['loggedIn'];

        }else{

            echo 'User is not logged in';

        }

    }
    //Error in Form

    elseif(!isset($_POST['email']) || !isset($_POST['password'])){

        $error = "Login Error";

        include('views/default.php');

    }

} 
```

这是cookie功能

公共函数 setBrowserCookie(){

```
if(empty($_COOKIE['verifyUser'])){  

$ip = $_SERVER['REMOTE_ADDR'];

$ub = $this->getBrowser(); 

@setcookie("verifyUser", $ip.$ub, time()+31536000);

} 
```

}

这会影响保存会话变量的路径吗？如果是这样，我该如何解决？

提前致谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T16:33:59.567

您的重写规则不会影响保存变量的路径，因为保存这些变量的路径不是由 Web 服务器处理，而是由操作系统处理。很难说问题的原因是什么，因为您没有提供有关程序代码的太多信息。我的猜测是，会话 ID 如何从一个请求传递到下一个请求存在问题（实际上会话 ID 丢失的方式有很多种，包括混合使用 cookie 和基于 url 的会话 ID 的情况，或在表单中混合 POST 和 GET 变量，并与 SID 参数混合——这些甚至可以是特定于浏览器的）。

发布一些有关您传递会话 ID 方式的更多信息，以便我们可以在那里找到问题。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-14T11:19:53.623

检查网站的磁盘空间。自从我为我的客户建立他的网站以来，我的客户就一直在上传照片，而当托管空间用完时，他就无法再登录了。原来会话因此无法存储。

# python - 什么在这个 python 代码（谷歌应用引擎）中产生“405 Method Not Allowed”？

> ID：10354425
> 
> 赞同：3
> 
> 时间：2012-04-27T16:27:01.007
> 
> 标签：python, html, google-app-engine

我是一个 python 新手，我正在尝试构建一个应用程序，逐步复制我在课堂上早先教授的内容，但是我收到“405 Method Not Allowed”错误。

这是教授所做的： ![在此处输入图像描述](../Images/8de64e0ef2d2202410d3d5ec2cd2e0ab.png)

这是我所做的：

![在此处输入图像描述](../Images/a01a2d59de3d19ef87dec26b5b4b744c.png)

有人可以指出我下面代码中出现此错误“405 Method Not Allowed”的原因吗？我看不出我所做的和教授教的有什么区别。缩进也可以（这里是 main.py 文件[https://docs.google.com/open?id=0B8TXLR_e14aCVDFfdlpYSU9DNDg](https://docs.google.com/open?id=0B8TXLR_e14aCVDFfdlpYSU9DNDg)）。

提前感谢您的帮助！

这是我的代码：

```
form= """
  <html>
  <head>
    <title>Unit 2 Rot 13</title>
  </head>

  <body>
    <h2>Enter some text to ROT13:</h2>
    <form method="post" action="/rot13">
      <textarea name="text"
                style="height: 100px; width: 400px;"></textarea>
      <br>
      <input type="submit">
    </form>
  </body>

  </html> """

class MainHandler(webapp2.RequestHandler):
    def get(self):
        self.response.out.write(form)

class Rot13Handler(webapp2.RequestHandler):
    def post(self):
        text = self.request.get("text")
        self.response.out.write(text)

app = webapp2.WSGIApplication([('/', MainHandler), ('/rot13', Rot13Handler)],
                          debug=True) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-17T01:10:53.023

我只是在 Udacity 的在线课程之后尝试 Python 并遇到了 AppEngine 无法找到 post 方法的类似问题。

最后事实证明，根本原因是**INDENTION**。

我使用 Notepad++ 作为小项目的编辑器，但它无法工作，不断抛出 405 错误。然后我将代码复制并粘贴到安装了 Python 插件的 Netbean IDE，IDE 显示错误的缩进使 POST 方法成为 GET 方法的内部方法，在 Notepad++ 中找不到，尽管看起来缩进已经处理得很好。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-27T17:11:23.340

代码是正确的并且工作正常。您需要在其他地方查找此 405 错误的解释。

**编辑**

您是否发布了实际代码？当您单击提交时，下面的代码将为您提供 405 Method not Allowed 错误。它有一个微妙的错误...... :)

```
import webapp2

form= """
  <html>
  <head>
    <title>Unit 2 Rot 13</title>
  </head>

  <body>
    <h2>Enter some text to ROT13:</h2>
    <form method="post" action="/rot13">
      <textarea name="text"
                style="height: 100px; width: 400px;"></textarea>
      <br>
      <input type="submit">
    </form>
  </body>

  </html> """

class MainHandler(webapp2.RequestHandler):
    def get(self):
        self.response.out.write(form)

class Rot13Handler(webapp2.RequestHandler):
    # Error here: mistyped get instead of post :)
    def get(self):
        text = self.request.get("text")
        self.response.out.write(text)

app = webapp2.WSGIApplication([('/', MainHandler),
                               ('/rot13', Rot13Handler)],
                              debug=True) 
```

如果您的路由输入错误，也会发生同样的情况，例如：

```
app = webapp2.WSGIApplication([('/', MainHandler),
                               ('/rot13', MainHandler)],
                              debug=True) 
```

**编辑**（谢谢，@尼克约翰逊）

如果上述方法都不起作用，请考虑从头开始并检查您的 GAE 设置。

1.  `app.yaml`模块旁边是否有有效文件`main.py`？
2.  您能否在标准的 Google AppEngine 安装中运行留言簿演示应用程序？
3.  如果没有，请发布错误消息（如果有）以及运行它的系统的详细信息。
4.  如果您能够运行留言簿，您是否可以尝试通过编辑该留言簿来重建您的应用程序？我发现这在过去对我有用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-30T07:49:11.873

有同样的问题。问题又是缩进。定义时：

```
def post(self): 
```

如果我使用“制表符”进行缩进，则它不起作用。当我使用空格时，它确实如此。错误日志什么也没显示。为避免此类问题，您可以使用 python IDE，例如 Wing IDE。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-07-22T13:54:27.357

我对 Notepad++ 也有同样的问题。我用 Python IDLE 改变的唯一一件事是用制表符替换一些空格，它工作正常:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-10-18T09:27:14.153

使用 Notepad++ 遇到同样的问题。在我读到这篇文章之前，我花了几天的时间才弄清楚出了什么问题。切换到使用 Python IDLE。奇迹般有效。我会回应@Aris 并说使用“传统”Python IDE 是最好的方法。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-07-30T00:31:27.703

我的代码遇到了同样的问题，当我重新排列处理程序的顺序时，该问题已修复。通过几个不同的 SO 答案检查处理程序定义中的错误，缩进并最终将其修复为查看处理程序的顺序。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-03-12T06:01:57.770

就我而言，当我尝试拨打电话时：我收到 405 Method not allowed

```
@app.route("/test")
def test():
    print('inside test')
    if request.method == 'POST':
    # some code
    res = json.dumps({ 'success': True, 'message': db_res }), 200, headers
    return res 
```

我错过的地方：

> 方法=['POST']

```
@app.route("/test" , methods=['POST']) 
```

然后它对我有用

# c++ - 寻找基于四叉树的 LOD 地形的示例

> ID：10354430
> 
> 赞同：1
> 
> 时间：2012-04-27T16:27:23.117
> 
> 标签：c++, opengl, terrain, quadtree

我一直在搜索谷歌和亚马逊，但在基于四叉树的 LOD 地形上找不到任何合适的资源。有些人只是解释了粗略的概念，但这是我已经知道的，我需要的是带有一些评论的示例。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-27T18:48:37.913

很久以前（>10 年）我写了一个基于四叉树的地形渲染器，它直接读取 Terragen-1 文件。您需要提供预渲染的表面/照明纹理。整件事从来都不是严肃的事情。代码的第一次迭代开始于在大约 6 小时内的漫长火车旅行中“让我远离无聊”。然后我添加了 LOD 和其他一些好东西。

我已将代码原样放在 Github 上的硬盘上，享受：

[https://github.com/datenwolf/codesamples/tree/master/samples/OpenGL/qt_terr](https://github.com/datenwolf/codesamples/tree/master/samples/OpenGL/qt_terr)

这个东西使用即时模式渲染地形。在基于顶点数组的渲染器中打开它作为练习留给读者。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T17:12:32.050

您是否查看过 Virtual Terrain Project 中的[LOD 页面](http://vterrain.org/LOD/Implementations/)。

# mysql - 在有条件的重复键更新？

> ID：10354431
> 
> 赞同：4
> 
> 时间：2012-04-27T16:27:23.937
> 
> 标签：mysql, sql

我有类似的东西：

```
INSERT INTO tbl (count,otherID) VALUES (2,'a') ON DUPLICATE KEY UPDATE count = 2 
```

只有当新值大于当前值时，我才想更新计数。所以假设已经有一条`ON DUPLICATE KEY UPDATE count = 3`不应该被触发的 count: 4 和 otherID: 'a' 的记录

我怎样才能做到这一点？

我可以用如果吗？`... UPDATE count = IF (NEWVALUE > count) NEWVALUE else count`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-27T16:35:08.840

另外一个选项：

```
INSERT INTO tbl (count, otherID) 
  VALUES (2, 'a') 
ON DUPLICATE KEY UPDATE 
  count = GREATEST(VALUES(count), count) ; 
```

**警告：**如果传递的值`count`是`NULL`（而不是`2`），这将失败。它将使用 更新列`NULL`。因此，最好使用`IF()`or`CASE`子句。

除非你更喜欢（有优雅......）：

```
ON DUPLICATE KEY UPDATE 
  count = GREATEST(COALESCE(VALUES(count), count), count) ; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-27T16:32:17.523

没有测试过，但我认为这应该有效。

```
INSERT INTO tbl (count, otherID) VALUES(2,'a')
ON DUPLICATE KEY 
UPDATE count = IF(VALUES(count) > count, VALUES(count), count) 
```

# django - 使用 django 编辑身份验证页面

> ID：10354436
> 
> 赞同：0
> 
> 时间：2012-04-27T16:27:50.653
> 
> 标签：django

我对 django 很陌生，正在尝试创建一个简单而标准的登录设置。

我将使用 django-registraion（遗憾的是，因为作者不知道如何清楚地记录他的努力......）

无论如何，我想知道如何设置一个简单的“编辑您的个人资料”页面。在我之前问过的一个类似问题中，我被指示阅读 django 教程（没用）并告诉我 auth 组件提供了这个功能（但不是 doco 的用途）——有人有任何明确的步骤来做到这一点吗？

干杯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T16:55:29.340

如果你想从头开始。假设您有一个 UserProfile 模型，一种方法是使用 django 表单。例如，如果您有

```
class UserProfile(models.Model):
    user = models.ForeignKey(User, unique=True)

    name = models.CharField(max_length=60 , blank=True, null=True )
    gender = models.SmallIntegerField(choices=SEX_CHOICES, blank=True, null=True)

    bio  = models.TextField() 
```

然后，如果您愿意，您将需要实现一个用户配置文件表单（让您的生活更轻松），就像这样：

```
class UserProfileForm(forms.ModelForm):

    class Meta:
        model = UserProfile
        exclude = ('user') #you dont want anybody seeing this :) 
```

ModelForm，因为如果用户有能力更改它将反映在数据库中的任何细节。

接下来，您将编写一个用于更新配置文件的视图函数：这是让您入门

```
def edit_profile(request):
    view_kwargs = {
        'model': UserProfile, 
        'form_class': UserProfileForm,
        'success_url': "/path/to/success",
        ),
        'template_name': "/path/to/edit_profile.html",
    }

    user_profile, created = UserProfile.objects.get_or_create(user_id=request.user)

     #TODO 
```

如果一切都失败了，你总是可以使用 django-profiles 这是一个独立的应用程序

# jquery - jQuery flex 滑块

> ID：10354441
> 
> 赞同：0
> 
> 时间：2012-04-27T16:28:05.393
> 
> 标签：jquery, flexslider

出于某种原因，导航按钮被切断而不是坐在滑块的顶部 这是一个屏幕[截图 导航按钮被切断](http://www.ajb-webdesign.co.uk/screenshot.jpg)的屏幕截图我尝试了各种方法但无法让它工作我错过了什么

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T13:44:56.483

只是为了让你知道我解决了这个问题。我没有正确设置 flex-container。在用新鲜的眼睛扫描代码后，我看到了错误。

# c++ - 设置碰撞检测，然后在 2D 游戏中处理碰撞

> ID：10354445
> 
> 赞同：1
> 
> 时间：2012-04-27T16:28:37.267
> 
> 标签：c++, collision-detection

我搜索了碰撞检测主题，但它们都是关于检测本身的。我的问题更多是关于检测过程之前和之后的。我正在编写我的第一个大型游戏，我想让它尽可能高效。

游戏的前提是您在运动场周围驾驶一艘船。在这个领域将是由环境、敌舰和在太空中飞行和漂浮的弹丸提供的不同性质的障碍物。如果需要或想要，这些对象将能够围绕它们的中心等旋转。

我设置测试的想法是让对象以某种方式将自己加载到队列和列表中。然后，游戏将获取队列前面的任何内容，并针对列表中的所有内容进行测试。它会首先检查以确保列表中的东西不是它自己（这会一直为所有东西产生冲突，哈哈）。接下来，游戏将检查队列中的对象与列表中的对象之间是否存在碰撞。如果发生碰撞，它将标记对象说它们已经碰撞并保存引用或对象碰撞的任何内容。

例如，如果 A 与 B 发生碰撞，游戏将告诉 A 运行碰撞函数，B 运行碰撞函数，并将对 B 的引用存储到 A 中，并且 B 将存储对 A 的引用。

然后，游戏将继续检查队列中对象的碰撞，直到它遍历列表，每次都执行上述操作以说明一个对象击中或被多个对象击中。

例如，如果有三个球，A、B 和 C，并且 A 在同一帧中同时被 B 和 C 击中，则 A 的速度会先由 B 再由 C 修改，而 B 和 C 将由 A 修改它们的速度。

这会是一个聪明的方法吗？我现在并不担心碰撞的实际检测，有很多可用的文章或教程加上我自己的想法来解决这个问题。我没有遇到任何谈论之前和之后的事情。我不确定队列和列表中有多少东西会开始导致大量负载并减慢游戏速度。现在我的对象都只是 x,y 位置、x,y 速度、它们面对的方向以及其他一些东西。

现在我想我开始喋喋不休地谈论无关的事情了。任何见解或智慧将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T16:49:44.787

对于许多游戏开发主题，没有通用答案，这取决于您的游戏类型，但在遍历对象时请记住一些事项：

*   试着想想在碰撞检测之后你将如何做实际的反应（你会使用双重调度、访问者、向下转换/rtti、存储可以在函数映射中使用的特征，...）。有多种技术，都有其优点和缺点。您选择的方法可以反映您如何进行实际遍历。
*   尝试将场景拆分为对象类型。例如，如果您有许多永远不会移动的静态对象，那么将它们全部相互测试是荒谬的，您应该将它们分开。但是作为经验法则，不要尝试过多地专门化这个，拥有类似`static`vs的东西`dynamic`可能会带来很大的好处，拥有 100 种类型会产生维护地狱，通常没有真正的收益。
*   这可能与您的遮挡机制有关。例如，如果它是基于门户的，则来自不同单元的对象不太可能发生碰撞。

我现在可能忘记了其他一些技巧，因为这是一个复杂的话题，但我希望它能让你继续前进。

# javascript - 访问选择器后如何访问css选择器属性

> ID：10354448
> 
> 赞同：1
> 
> 时间：2012-04-27T16:28:44.247
> 
> 标签：javascript, css

```
.test
{
 color:Red;
 width: 100px;
}

   var r = document.styleSheets[index].rules;   

   r[0].selectorText => Here we get ".test"; 
```

现在我想访问数组中的所有 .test 属性（在本例中为颜色和宽度）及其值（在本例中为 Red & 100px）。我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T16:34:29.460

你想要`.cssText`CSSStyleRule 的。（您可以`console.log(document.styleSheets[2])`在此页面上自己找到它，并浏览 Chrome 或 Firebug 控制台中的项目。）

另请注意，虽然`.rules`在某些浏览器中有效，但[DOM Level 2 CSS 绑定](http://objjob.phrogz.net/css/object/233)是`.cssRules`.

**编辑**：如果您需要访问单个样式，请使用该`.style`属性。同样，您可以查看您是否使用了开发者控制台。

```
var sheet = document.styleSheets[2];
var rules = sheet.cssRules[1];
console.log( rules ); // Lots of properties
console.log( Object.keys(rules) );
// ["parentRule", "cssText", "type", "selectorText", "style", "parentStyleSheet"]
console.log( rules.style.display ); // "none" 
```

如果您只想查看此规则中应用*的*样式，则必须遍历`.style`集合的属性（包括未明确设置的属性）并检查空值，否则您将需要自己解析cssText。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-27T16:30:51.273

jQuery 让这一切变得简单。

```
$('.test').each(function(){
    var curColor = $(this).css('color');
    // etc
}); 
```

# php - 文件已上传，但未在修改后的 Uploadify 脚本中创建缩略图

> ID：10354451
> 
> 赞同：0
> 
> 时间：2012-04-27T16:29:04.593
> 
> 标签：php, file-upload, uploadify, image-uploading

我有一个相当简单的脚本来处理从 Uploadify 发送到服务器的文件信息，除了创建缩略图之外一切正常。谁能看到我的错误在哪里？

```
<?php
session_start();
include "../_db.inc";

/*
Uploadify v3.1.0
Copyright (c) 2012 Reactive Apps, Ronnie Garcia
Released under the MIT License <http://www.opensource.org/licenses/mit-license.php> 
*/

// Define a destination
$targetFolder = '/images/artist_pictures/'; // Relative to the root
$thumbsFolder = '/images/artist_pictures/thumbs/'; // Relative to the root

if (!empty($_FILES)) {
    $tempFile = $_FILES['Filedata']['tmp_name'];
    $targetPath = $_SERVER['DOCUMENT_ROOT'] . $targetFolder;
        $yourid = (int)$_POST['yourid'];
        $extension = end(explode(".", $_FILES['Filedata']['name']));
        $filename = "artist_".$yourid.".".$extension;
    $targetFile = rtrim($targetPath,'/') . '/' . $filename;
        $targetThumb = rtrim($thumbsFolder,'/') . '/' . $filename;

    // Validate the file type
    $fileTypes = array('jpg','jpeg','gif','png','JPG','bmp'); // File extensions
    $fileParts = pathinfo($_FILES['Filedata']['name']);

    if (in_array($fileParts['extension'],$fileTypes)) {
                // CREATE THUMBNAIL
                if($extension=="jpg" || $extension=="jpeg") {
                    $src = imagecreatefromjpeg($tempFile);
                }
                else if($extension=="png") {
                    $src = imagecreatefrompng($tempFile);
                }
                else {
                    $src = imagecreatefromgif($tempFile);
                }

                list($width,$height)=getimagesize($tempFile);

                $newwidth=50;
                $newheight=($height/$width)*$newwidth;
                $tmp=imagecreatetruecolor($newwidth,$newheight);

                imagecopyresampled($tmp,$src,0,0,0,0,$newwidth,$newheight,$width,$height);

                $thumbname = $targetThumb;

                if (file_exists($thumbname)) {
                    unlink($thumbname);
        }

                imagejpeg($tmp,$thumbname,100);

                imagedestroy($src);
                imagedestroy($tmp);

        move_uploaded_file($tempFile,$targetFile);
        echo '1';
    } else {
        echo 'Invalid file type.';
    }
}
?> 
```

提前致谢！科林

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T16:42:13.167

我测试了您的代码，它适用于一些原因更改

用过的

```
$targetFolder = realpath('/temp'); // Relative to the root
$thumbsFolder = realpath('/temp/thumbs/'); // Relative to the root 
```

也有错误`$extension = end(explode(".", $_FILES['Filedata']['name']));`

将其替换为

```
 $extension = $fileParts ['extension']; 
```

完整代码

```
<?php
session_start ();
//include "../_db.inc";

/*
 * Uploadify v3.1.0 Copyright (c) 2012 Reactive Apps, Ronnie Garcia Released
 * under the MIT License <http://www.opensource.org/licenses/mit-license.php>
 */

// Define a destination
    $targetFolder = realpath('/temp'); // Relative to the root
    $thumbsFolder = realpath('/temp/thumbs/'); // Relative to the root

if (! empty ( $_FILES )) {
    $tempFile = $_FILES ['Filedata'] ['tmp_name'];
    $targetPath = $_SERVER ['DOCUMENT_ROOT'] . $targetFolder;
    $yourid = 2 ;//( int ) $_POST ['yourid'];

    $fileParts = pathinfo ( $_FILES ['Filedata'] ['name'] );
    $extension = $fileParts ['extension'];
    $filename = "artist_" . $yourid . "." . $fileParts ['extension'];
    $targetFile = rtrim ( $targetPath, '/' ) . '/' . $filename;
    $targetThumb = rtrim ( $thumbsFolder, '/' ) . '/' . $filename;

    // Validate the file type
    $fileTypes = array (
            'jpg',
            'jpeg',
            'gif',
            'png',
            'JPG',
            'bmp' 
    ); // File extensions

    if (in_array ( $fileParts ['extension'], $fileTypes )) {
        // CREATE THUMBNAIL
        if ($extension == "jpg" || $extension == "jpeg") {
            $src = imagecreatefromjpeg ( $tempFile );
        } else if ($extension == "png") {
            $src = imagecreatefrompng ( $tempFile );
        } else {
            $src = imagecreatefromgif ( $tempFile );
        }

        list ( $width, $height ) = getimagesize ( $tempFile );

        $newwidth = 50;
        $newheight = ($height / $width) * $newwidth;
        $tmp = imagecreatetruecolor ( $newwidth, $newheight );

        imagecopyresampled ( $tmp, $src, 0, 0, 0, 0, $newwidth, $newheight, $width, $height );

        $thumbname = $targetThumb;

        if (file_exists ( $thumbname )) {
            unlink ( $thumbname );
        }

        imagejpeg ( $tmp, $thumbname, 100 );

        imagedestroy ( $src );
        imagedestroy ( $tmp );

        move_uploaded_file ( $tempFile, $targetFile );
        echo '1';
    } else {
        echo 'Invalid file type.';
    }
}
?>

<form method="post" target="_self" enctype="multipart/form-data">
    <input type="file" name="Filedata" id="file" /> <input name="submit"
        type="submit" value="submit" />
</form> 
```

结论..这个问题似乎是你的文件路径和一些 php 未定义的错误，yse 输出错误

```
 error_reporting(E_ALL);
 ini_set('display_errors','On'); 
```

# flash-builder - 将组件添加到 TitleWindow 的标题栏

> ID：10354454
> 
> 赞同：0
> 
> 时间：2012-04-27T16:29:15.037
> 
> 标签：flash-builder

我使用 flash builder 4.6，我尝试在 titlewindow 组件的标题栏中添加最大化/最小化按钮。我记得在 Flash 的上一个版本中存在一个标题栏组件，但在新版本中我没有找到它！

如果有人知道在标题栏中添加组件的方法，或者知道最大化/最小化标题窗口的更好方法，感谢分享。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T01:16:54.700

我一直只使用 resizableTitleWindow。你可以在这里找到它：

[http://www.adobe.com/cfusion/exchange/index.cfm?event=extensionDetail&loc=en_us&extid=1207017](http://www.adobe.com/cfusion/exchange/index.cfm?event=extensionDetail&loc=en_us&extid=1207017)

# javascript - jquery mobile url 参数未在浏览器中更新，但使用“data-url”得到正确的参数

> ID：10354455
> 
> 赞同：4
> 
> 时间：2012-04-27T16:29:19.037
> 
> 标签：javascript, jquery, jquery-mobile, url-parameters

我创建了以下示例来展示我正在经历的事情。

如果我使用 Page 2a 按钮从第 1 页导航到第 2 页，则 URL 将是 ...#page2?id=a 正如预期的那样。

当我单击按钮返回第 1 页，然后导航到第 2b 页时，URL 仍将显示“#page2?id= **a** ”，但`<a>`标签显然有一个“#page2?id= **b** ”的 href当我到达#page2 时 ，它`$(e.target).attr("data-url")`是“#page2?id= **b ”。**

有什么想法吗？提前感谢您的帮助。

```
<html>
   <head>
      <link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.css" />
      <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
      <script src="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.js"></script>
          <script>
             $("#page2").live('pageshow', function(e) {
                alert($(e.target).attr("data-url"));
                $("#page_text").html("Page 2"+($(e.target).attr("data-url").replace(/.*id=/, "")));
             });
          </script>

   </head>
   <body>
      <div data-role="page" data-theme="c" id="page1">
         <div data-role="content">
            <p>Page 1</p>
            <a href ="#page2?id=a" data-transition="flip" data-role="button">Page 2a</a>
            <a href ="#page2?id=b" data-transition="flip" data-role="button">Page 2b</a>
         </div>
      </div>

      <div data-role="page" data-theme="a" id="page2">
         <div data-role="content">
            <p id="page_text"></p>
            <a href ="#page1" data-transition="flip" data-role="button">Page1</a>
         </div>
      </div>

   </body>
</html> 
```

代码示例[也在](http://jsfiddle.net/UZM3B/2/)jsfiddle 上。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T21:34:32.910

在 stackoverflow 上的[这个](https://stackoverflow.com/questions/8238762/passing-parameters-to-a-page-id-in-jquery-mobile)问题的帮助下，我能够通过使用[jqm.page.params](https://github.com/jblas/jquery-mobile-plugins/blob/master/page-params/jqm.page.params.js)插件来解决这个问题。这是我使用此插件的代码：

```
<html>
   <head>
      <link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.css" />
      <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
      <script src="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.js"></script>

      //Added the jqm.page.params plugin
      <script src="https://raw.github.com/jblas/jquery-mobile-plugins/35fcf54e2af380aa0e98e9f384572b02f58a1ea1/page-params/jqm.page.params.js"></script>
      <script>
         $("#page2").live('pageshow', function(e) {
            alert($(e.target).attr("data-url")+$.mobile.pageData.id);
            //$("#page_text").html("Page 2"+($(e.target).attr("data-url").replace(/.*id=/, "")));
            $("#page_text").html("Page 2"+$.mobile.pageData.id);

         });
         $(document).bind("pagebeforechange", function( event, data ) {
            $.mobile.pageData = (data && data.options && data.options.pageData)
                                   ? data.options.pageData
                                   : null;
         });
      </script>

   </head>
   <body>
      <div data-role="page" data-theme="c" id="page1">
         <div data-role="content">
            <p>Page 1</p>
            <a href ="#page2?id=a" data-transition="flip" data-role="button">Page 2a</a>
            <a href ="#page2?id=b" data-transition="flip" data-role="button">Page 2b</a>
         </div>
      </div>

      <div data-role="page" data-theme="a" id="page2">
         <div data-role="content">
            <p id="page_text"></p>
            <a href ="#page1" data-transition="flip" data-role="button">Page1</a>
         </div>
      </div>

   </body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T20:18:32.600

问题在于带有 ajax 导航的附加 url 变量。JQM 使用带有自己导航的附加变量。根据文档，要么丢失 ajax 导航，要么丢失变量。如果是网站（而不是应用程序），则使用 rel="external" 将其分成几个页面也可以解决问题。

# sql-server-2008 - 高效的键/值表

> ID：10354457
> 
> 赞同：0
> 
> 时间：2012-04-27T16:29:20.693
> 
> 标签：sql-server-2008, sql-server-2005, database-design

我需要一个用于存储键/值对的表（如 Windows 注册表）。这是我所拥有的：

```
CREATE TABLE REG         
(                       
    ID VARCHAR(255) NOT NULL,
    DATA VARCHAR(1024),  
    PRIMARY KEY(ID)          
); 
```

我正在使用 SQL Server 2008 R2、2008 和 2005。

任何人都可以提供更有效的存储键/值对的想法。

我正在存储这样的密钥：

/USER/REX/AUTO_LOGIN = "T"

/USER/REX/MESSAGE/1 = "这是一条较长的消息"

在大约 10000 条记录中，我已经看到了性能问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T16:33:26.107

您可以引入一个附加列，它是键名的哈希；例如，“/USER/REX/AUTO_LOGIN”可能散列为 102454。然后您可以在散列列上添加索引（或在散列列和键名列上添加复合索引）并将其包含在任何查询的 where 子句中；例如

```
SELECT DATA
FROM REG
WHERE HASH = 102454 and ID = '/USER/REX/AUTO_LOGIN' 
```

在列上搜索`int`应该比查询`varchar` `ID`列更有效，并且应该具有缩小到具有相同哈希值的几行的效果，然后将检查匹配`ID`值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T16:34:29.010

我会避免使用`varchar(255)`作为我的主键，而是选择唯一索引：

```
CREATE TABLE REG (
    id bigint identity not null,
    key VARCHAR(256) NOT NULL,
    DATA VARCHAR(1024),
    PRIMARY KEY(ID)
);

create unique index reg_key on REG(key); 
```

# objective-c - 更改跟踪区域时，未检测到事件 mouseEntered

> ID：10354460
> 
> 赞同：0
> 
> 时间：2012-04-27T16:29:25.317
> 
> 标签：objective-c, xcode, cocoa, mouseevent, nstrackingarea

我有两个跟踪区域定义为：

```
NSTrackingArea * area1 = [[NSTrackingArea alloc] initWithRect:NSMakeRect(0,0,200,200) options:NSTrackingMouseEnteredAndExited|NSTrackingActiveAlways owner:self userInfo:nil];

NSTrackingArea * area2 = [[NSTrackingArea alloc] initWithRect:NSMakeRect(0,200,200,200) options:NSTrackingMouseEnteredAndExited|NSTrackingActiveAlways owner:self userInfo:nil]; 
```

我的问题是，当我直接从 area1 到 area2 时，不会调用 area2 的“mouseEntered”方法，因为检测到的事件是来自 area1 的“mouseExited”。离开 area1 并进入 area2 时，我应该怎么做才能检测到事件？

# c++ - 以“simple c++”模式编译的程序在从 QtCreator 启动时不起作用

> ID：10354464
> 
> 赞同：0
> 
> 时间：2012-04-27T16:30:18.203
> 
> 标签：c++, ide, qt-creator, breakpoints, launching-application

在 QtCreator 中以“simple c++”模式编译的程序在从 qtcreator 启动时无法正常运行，但在从该 ide 启动时可以正常运行。

从 QtCreator 启动时，终端窗口打开，我可以在其中输入任何内容，但程序指令不起作用。没有 QtCreator 的行为是正常的。此问题存在于：调试和发布 - 构建。此外，当我尝试使用调试时，断点也不起作用（即使断点设置为 main.cpp 中 main() 函数的第一行）。

我能做些什么来解决这个问题？这是一个错误还是我只是笨拙？谢谢你。

重现此问题的简单代码：

```
#include <iostream>

using namespace std;

int main()
{
    int num;
    cin >> num;
    cout << num << "\nHello world!\n";
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T23:35:02.860

可能有几件事没有正确配置..您可以尝试：

在您的 .pro 文件中检查`CONFIG += console is present`.

检查项目->运行设置，勾选“在终端中运行”。

Qt Creator->Preferences : Environnement : General : Terminal : 尝试将整个路径放到终端。

根据您的操作系统，您应该检查正在使用的控制台 qtcreator 是否配置正确。如果您使用的是 linux，请检查您的终端是否设置为：`/usr/bin/xterm -e`

要修复调试问题，请尝试：
- 转到项目（左面板） -> 构建 -> 编辑构建配置：选择 Qt XXX 调试
- 在常规下选择 Qt 版本 Qt XXX for Desktop (Qt SDK)
- 在运行按钮上方（左面板) 你有一个按钮来配置当前的构建.. 选择调试一个
- 选择构建(从菜单) -> 全部清除
- 按 F5

# c# - PetaPoco 分页查询生成改进

> ID：10354468
> 
> 赞同：1
> 
> 时间：2012-04-27T16:30:25.440
> 
> 标签：c#, sql, petapoco

我是 PetaPoco 的忠实粉丝，当我看到其中编写的代码时，我感到非常惊讶。但是，在将它用于现实生活项目时，我遇到了一个问题，其中我有一个类似这样的查询：

```
SELECT  em.SysEmailID, 
        [DisplayID], 
         Case When em.SysEmailCategoryID IS NULL Then em.CategoryName Else cat.CategoryName End as 'ResultCategoryName',
         [Name], 
         IsActive, 
         em.ModifiedDateTime, 
         us.Username  
            FROM [dbo].[SysEmail] em 
                Left JOIN dbo.Users us ON em.CreatedBy = us.UserID  
                    Left JOIN dbo.SysEmailCategory cat on em.SysEmailCategoryID = cat.SysEmailCategoryID 
```

ResultCategoryName 是用`Case When`语句“飞”生成的。这是一个相当简单的查询。现在，如果您曾经注意到用 PetaPoco 编写的代码，您会看到它包含了您的语句并附加了行号函数。所以你的查询变成：

```
SELECT * FROM 
    (
        SELECT ROW_NUMBER() OVER (ORDER BY ResultCategoryName desc) peta_rn,
         em.SysEmailID, 
         [DisplayID], 
         Case When em.SysEmailCategoryID IS NULL Then em.CategoryName Else cat.CategoryName End as 
         'ResultCategoryName',
         [Name], 
         IsActive, 
         em.ModifiedDateTime, 
         us.Username  
            FROM [dbo].[SysEmail] em Left JOIN dbo.Users us ON em.CreatedBy = us.UserID  
                Left JOIN dbo.SysEmailCategory cat on em.SysEmailCategoryID = cat.SysEmailCategoryID 

     ) peta_paged WHERE peta_rn>0 AND peta_rn<=10 
```

发生这种情况时，您会收到 Sql 错误`Invalid column name`“ResultCategoryName”。我修改了方法`'BuildPageQueries<T>'`，在`if (_dbType == DBType.SqlServer || _dbType == DBType.Oracle)`生成实际 SQL 的地方，我将其修改为：

```
 sqlPage = string.Format("SELECT * FROM (SELECT ROW_NUMBER() OVER ({0}) peta_rn, peta_query.* From (Select {1}) as peta_query) peta_paged WHERE peta_rn>@{2} AND peta_rn<=@{3}",
                                        sqlOrderBy == null ? "ORDER BY (SELECT NULL)" : sqlOrderBy, sqlSelectRemoved, args.Length, args.Length + 1); 
```

这产生了查询：

```
SELECT * FROM (SELECT ROW_NUMBER() OVER (ORDER BY ResultCategoryName asc) peta_rn, 
    peta_query.* 
        From (
                Select em.SysEmailID, [DisplayID], 
                Case When em.SysEmailCategoryID IS NULL Then em.CategoryName Else cat.CategoryName End as 'ResultCategoryName',
                [Name], 
                IsActive, 
                em.ModifiedDateTime, 
                us.Username  
                    FROM [dbo].[SysEmail] em Left JOIN dbo.Users us ON em.CreatedBy = us.UserID  
                        Left JOIN dbo.SysEmailCategory cat on em.SysEmailCategoryID = cat.SysEmailCategoryID 
                            ) as peta_query) peta_paged WHERE peta_rn>0 AND peta_rn<=10 
```

这行得通！:)。但是我需要知道这是否是正确的方法，或者有没有更好的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T13:20:05.580

您所要做的就是用另一个选择包装您的 sql。

例如。

```
select * from (**your query here**) query order by ResultCategoryName asc 
```

只有在计算列时才需要这样做。

# c++ - 循环内的 C++ std::thread 同步

> ID：10354472
> 
> 赞同：2
> 
> 时间：2012-04-27T16:30:40.417
> 
> 标签：c++, multithreading, c++11, synchronization

我选择 std::thread 进行线程并发分配时犯了一个错误。我没有时间学习其他方法。所以我希望你能在这里帮助我，我真的对所有这些类型的互斥锁、承诺、期货等感到困惑。缺乏多样化的文档/教程令人沮丧。所以我希望 3 个线程（玩家）做同样的事情 - 选择 2 个随机数作为全局二维数组的索引，如果单元格的值为 0，则将其设置为等于线程的 ID，否则停止线程的执行. 循环执行此操作，直到只剩下一个线程。我需要的是找到一种方法在每次（下一次）迭代之后同步 3 个线程，这样一个线程不能在第 50 次迭代，而另一个线程在第 30 次迭代，即线程必须等待让所有其他人在继续之前完成迭代。我需要某种屏障。我尝试使用条件变量让线程进入睡眠状态，直到最后一个完成线程发出信号来唤醒它们，但我无法让它工作。我不成功的尝试被注释掉：

```
std::mutex GridMutex, FinishMutex, LeftMutex;
int Grid[X][Y], Finished = 0, PlayersLeft = 3;

void Fight(int Id) {
  int RandX, RandY, i = 0;
  std::random_device rd; // access random device
  std::mt19937 e(rd()); // seed the engine
  std::uniform_int_distribution<int> r1(0, X-1);
  std::uniform_int_distribution<int> r2(0, Y-1);
  LeftMutex.lock(); // mutex on PlayersLeft
  while (PlayersLeft != 1) {
    ++i;
    /*std::call_once(flag, [Id, i](){*/std::cout << " Round " << i << "  Left: " << PlayersLeft << '\n';/*});*/
    LeftMutex.unlock();
//     FinishMutex.lock();
//     std::call_once(flag, [](){Finished = 0;});
//     FinishMutex.unlock();
    RandX = r1(e);
    RandY = r2(e);
    GridMutex.lock();
    if (Grid[RandX][RandY] != Id) {
      if (Grid[RandX][RandY] == 0) {
        Grid[RandX][RandY] = Id;
        std::cout << "i= "<< i << " Thread " << Id << " occupied cell " << RandX << RandY << '\n';
        std::chrono::milliseconds sleepDuration(100);
        std::this_thread::sleep_for(sleepDuration); //just to lock the grid for some time
        GridMutex.unlock();
      }
      else {
        GridMutex.unlock();
        LeftMutex.lock();
        --PlayersLeft;
        LeftMutex.unlock();
        break; //stop thread if cell occupied
      }
    }
    //Wait for the others here
//     FinishMutex.lock();
//     ++Finished;
//     if (Finished == 3) {
//       FinishMutex.unlock();
//       AllReady.notify_all();
//     }
//     else {
//       FinishMutex.unlock();
//       AllReady.wait(Lk, [](){return Finished == 3;});
//       Lk.unlock();
//     }
    LeftMutex.lock();
  }
}
int main() {
  SetGrid();
  std::thread t1(&Fight, 1);
  std::thread t2(&Fight, 2);
  std::thread t3(&Fight, 3);
  t1.join();
  t2.join();
  t3.join();
  GetGrid();
  return 0;
} 
```

我希望“call_once”事物中的表达式在每次迭代中仅由一个线程（以先到者为准）执行，但显然这不是我认为的那样，因为这会导致一些奇怪的行为。怎么做？好的，代码可能很难看，应该放在类和方法之类的东西中，但无论多么原始，我都需要让它工作。先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T17:00:02.223

您可以通过[使用](http://en.cppreference.com/w/cpp/atomic/atomic)和（`std::atomic_int`或.`std::atomic_bool``std::atomic_flag`

除此之外，不要自己进行锁定和解锁，而是`RAII`为此使用包装器，例如[`std::lock_guard`](http://en.cppreference.com/w/cpp/thread/lock_guard). 这将锁定指定的互斥体，直到锁定对象本身被销毁（通常是当它超出范围时）。

现在，虽然使用这些东西会极大地改进您的代码，但您的实际逻辑错误非常简单：您不应该与常量 3 进行比较，而是与`playersLeft`. 请注意，由于条件取决于此，因此您还必须在更改此变量时发出信号。

# symfony - 为特定表生成的学说实体

> ID：10354479
> 
> 赞同：3
> 
> 时间：2012-04-27T16:31:02.803
> 
> 标签：symfony, doctrine-orm

> **可能重复：**
> [使用 symfony2 和教义从现有数据库生成单个实体](https://stackoverflow.com/questions/10371600/generating-a-single-entity-from-existing-database-using-symfony2-and-doctrine)

我正在将一个遗留企业应用程序迁移到 Symfony2。全部完成后，我们将拥有数十张桌子。每个应用程序使用表的一个子集，我们希望将表保存在 3 个数据库中，而不是每个 Symfony 包中的一个数据库。

是否可以使用教义命令行工具为数据库中的一部分表生成元数据和实体？我们希望能够在开发和表更改时生成/重新生成元数据，但我们不想为数据库中的所有表生成信息。

# sql-server - 如何在 Oracle 和 SQL Server 之间进行兼容的 SQL 查询？

> ID：10354486
> 
> 赞同：0
> 
> 时间：2012-04-27T16:31:35.177
> 
> 标签：sql-server, oracle, sql-server-2000, syntax-error

以下查询拒绝在 Sql server 上运行，而它在 Oracle 10gR2 上运行良好。

```
SELECT COUNT(*)
FROM (
   SELECT count(*)
   FROM MYTABLE
   WHERE id IS NOT NULL
   GROUP BY id
) 
```

它以这条消息结束：

```
Microsoft OLE DB Provider for SQL Server error '80040e14'

Ligne 7 : syntaxe incorrecte vers ')'. 
```

如何使它与两个 DBMS 兼容？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T16:35:11.133

SQL Server 需要派生表的别名，所以...

```
SELECT COUNT(*) 
FROM ( 
   SELECT count(*) 
   FROM TABLE 
   WHERE id IS NOT NULL 
   GROUP BY id 
)  a 
```

我不确定如何在 Oracle 中使用别名。此外，您需要在派生表中为 count(*) 提供列名。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T16:35:32.613

这应该适用于：

```
SELECT COUNT(DISTINCT id)
FROM yourtable
WHERE id IS NOT NULL 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T16:35:52.957

如果我了解您要完成的工作，我认为您可以将其简化为

```
SELECT COUNT( DISTINCT id )
  FROM someTable
 WHERE id IS NOT NULL 
```

这应该适用于两个数据库。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-27T16:35:45.220

在 Sql Server 中，这应该可以工作：

```
SELECT count(id)
FROM TABLE
WHERE id IS NOT NULL
GROUP BY id 
```

不确定它是否可以在 Oracle 中使用

# iphone - 如何将 plist 从捆绑包移动到 iOS 上的文档文件夹

> ID：10354488
> 
> 赞同：3
> 
> 时间：2012-04-27T16:31:41.910
> 
> 标签：iphone, objective-c, ios, ipad

所以我只想知道如何在应用程序第一次运行时将 plist 从捆绑包移动到文档文件夹，因为我需要它。请我不知道该怎么做，所以请帮助我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T16:43:25.373

如果您的 plist 名称是“朋友”

只需使用以下代码（它将查找文件是否存在并复制）

```
NSFileManager *fileManger=[NSFileManager defaultManager];
NSError *error;
NSArray *pathsArray = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,NSUserDomainMask,YES);

NSString *doumentDirectoryPath=[pathsArray objectAtIndex:0];

NSString *destinationPath= [doumentDirectoryPath stringByAppendingPathComponent:@"friends.plist"];

NSLog(@"plist path %@",destinationPath);    
if ([fileManger fileExistsAtPath:destinationPath]){
    //NSLog(@"database localtion %@",destinationPath);
    return;
}
NSString *sourcePath=[[[NSBundle mainBundle] resourcePath]stringByAppendingPathComponent:@"friends.plist:];

[fileManger copyItemAtPath:sourcePath toPath:destinationPath error:&error]; 
```

这会将 plist 从资源复制到文档目录

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T16:42:49.383

这个函数应该可以解决问题。

```
- (void)copyPlist {
    NSString *plistPath = [[NSBundle mainBundle] pathForResource:@"myplist" ofType:@"plist"];

    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];

    [[NSFileManager defaultManager] copyItemAtPath:plistPath toPath:documentsDirectory error:nil];
} 
```

您不需要*在*该行中使用 NSError 参数`[[NSFileManager defaultManager] copyItemAtPath:plistPath toPath:documentsDirectory error:nil];`，但它可能对调试有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T16:38:40.867

只是提醒......这来自[http://samsoff.es/posts/iphone-plist-tutorial](http://samsoff.es/posts/iphone-plist-tutorial) “现在使用JSON比Plists更受欢迎，因为JSON解析器在速度上已经走了很长一段路。它们实际上更快“

# vim - 错别字：自动插入第一个拼写检查建议并突出显示它们

> ID：10354489
> 
> 赞同：1
> 
> 时间：2012-04-27T16:31:44.660
> 
> 标签：vim, spell-checking, highlighting

我经常犯类型错误并进行拼写检查以纠正它们。

我注意到拼写字典中的第一个建议通常是正确的，所以我创建了一个地图来插入第一个拼写检查建议：

```
map <leader>q 1z= 
```

这工作正常。但是我必须在缓冲区中多次执行此操作（每个拼写检查错误一次）。

我想创建一个脚本，然后搜索每个类型错误；使用上面的地图插入第一个拼写检查建议，然后突出显示它们，以便查看脚本插入的内容。

使用命令创建脚本并从一个拼写检查错误转移到下一个并不难，`]s`但是如何突出显示所有更改的拼写错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T12:58:08.370

接受拼写建议时，您需要记录（行，列）位置，并从中构建正则表达式（使用`/\%l`和`/\%c`特殊原子），用于搜索（`@/`）或自定义突出显示通过`:match`。

但我宁愿让你考虑改变你的要求，因为这种突出显示的改变（尽管它经常在 IDE 中使用）对 Vim 来说是陌生的（因此实现起来相当麻烦！）更接近的匹配是 quickfix 列表，它主要用于编译器错误。

顺便说一句，我编写了一个插件[SpellCheck](http://www.vim.org/scripts/script.php?script_id=3844)，它允许您使用在缓冲区中找到的所有拼写错误填充快速修复列表，以便对拼写错误有一个很好的概述。通过 创建该概览后`:SpellCheck`，您可以通过映射甚至批量接受拼写建议，最后使用`:cnext`（或更快的映射）访问所有替换项。

# javascript - Highcharts - 在显示、隐藏或 legendItemClick 上打开和关闭网格线

> ID：10354491
> 
> 赞同：1
> 
> 时间：2012-04-27T16:31:46.003
> 
> 标签：javascript, highcharts

我有一个带有多个 y 轴的多系列柱形图。y 轴设置为只有数组中的第一个 yAxis 的 gridLineWidth=1。其余为零。

我看到的是，如果我隐藏 yAxis 的[gridLineWidth](http://www.highcharts.com/ref/#yAxis--gridLineWidth) = 1 的所有系列项目，则其余系列项目（那些使用非主 yAxis 的项目）根本不会显示网格线。这是有道理的，因为我已将它们的 gridLineWidth 设置为零......

因此，为了始终显示至少一组网格线，我决定处理 plotOptions.column.events 上的[隐藏](http://www.highcharts.com/ref/#plotOptions-series-events--hide)和[显示](http://www.highcharts.com/ref/#plotOptions-series-events--show)事件（我也尝试了[legendItemClick](http://www.highcharts.com/ref/#plotOptions-series-events--legendItemClick)）首先将所有 gridLineWidth 设置为零，然后查找第一个可见系列并将其 yAxis 对象上的 gridLineWidth 设置为 1，如下所示：

```
plotOptions: {
    column: {
        ...
        events: {
            show: function (event) {
                var series = this.chart.series;
                var yAxes = this.chart.yAxis;

                // first hide all the gridlines
                _.each(yAxes, function (axis) { axis.gridLineWidth = 0; });
                var firstVisibleSeries = _.find(series, function (ser) { return ser.visible == true; });
                if (firstVisibleSeries != null) {
                    firstVisibleSeries.yAxis.gridLineWidth = 1;
                }
                this.chart.redraw();
            }
        },
    ...
    },
},
... 
```

我将 Underscore.js 用于 _.each() 和 _.find() 方法。

使用 firebug，一切看起来都很好（这意味着第一个可见系列项目的 gridLineWidth = 1，所有其他项目在方法执行结束时都设置为零）。

但无论我做什么，包括我最后绝望地坚持的 this.chart.redraw() 调用，它似乎都没有处理我对 yAxis 对象的更改。如果我隐藏所有使用第一个 yAxis 的系列项目，网格线仍然丢失。

我做错了什么 - 我是否缺少最后一步来使更改永久化，或者我可以采取不同的方法来实现这个目标？

谢谢你的帮助

**编辑：**

这是一个提出问题的 jsFiddle：http: [//jsfiddle.net/kmkuntz/7NEhU/2/](http://jsfiddle.net/kmkuntz/7NEhU/2/)

隐藏两个“金钱”类型系列显示网格线消失。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T16:13:22.153

感谢[highslide 论坛上的 Cailie](http://www.highslide.com/forum/viewtopic.php?f=9&t=17114) ，这已解决。

来自帖子：在 yAxis 调用之后我需要“.options”：

```
firstVisibleSeries.yAxis.options.gridLineWidth = 1; 
```

基础 jsfiddle 包含修复：http: [//jsfiddle.net/7NEhU/](http://jsfiddle.net/7NEhU/)

# matlab - 相位角大于2pi和小于-2pi有什么意义

> ID：10354494
> 
> 赞同：1
> 
> 时间：2012-04-27T16:31:59.510
> 
> 标签：matlab, theory, fft, quaternions

我可以对语音/音频信号进行 fft 并准确地获得不同的相位、强度和频率。我想了解的是为什么相位角的某些值会大于 2pi 或小于 -2pi？我知道我可以对相位角进行取模，因此它不会超过 2pi 或 -2pi，但我试图理解为什么我可以获得 -1343 弧度或 234 弧度的相位角，以及是否还有其他含义具有如此大的相位角。

一个例子是处理高维数学的四元数，我们是否通过不考虑如此大的负相角和正相角值来任意忽略某些东西？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T16:50:25.673

如果您尝试绘制或分析随时间（频率调制等）或随频率（多极点滤波器响应、相位声码器或倒谱/倒谱分析或合成）的连续相位变化，则 FT 频谱的展开相位角非常有用，随着时间、频率或频率没有跳跃不连续性，这可能会破坏线性运算、绘图斜率回归等。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T19:45:32.830

@hotpaw 的回答很好。另一种可能出现大相位角的情况是在锁相环 (PLL) 中。PLL 跟踪相位误差（即频率误差的积分），并试图使其为零。大于 2pi 的相位滞后意味着合成振荡器需要捕获超过一个完整周期。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T20:16:16.407

特别是对于带有四元数的示例，您可能会执行一些四元数代数运算（其含义是*旋转的组合*）并得到一个超出范围的旋转角度值`[-2 * pi , 2 * pi]`。但这不会破坏数学，你不会从中得到任何问题。当您想解释它时，只需将角度映射回所需的范围。

然而，该示例与语音信号示例的 FFT 相位有很大不同。

# matlab - k 表示聚类输入？

> ID：10354498
> 
> 赞同：0
> 
> 时间：2012-04-27T16:32:06.970
> 
> 标签：matlab, sign, k-means

我想做 k 意味着在 1024 * 1024 * 3 .ppm 文件上进行聚类。我必须承认这张图片中的点强度非常低。现在，我阅读了图片，然后调整了它的大小，以便 aleast matlab 可以显示它。然后是重塑它并将其转换为双精度的代码行，以便我可以将其传递给内置的 matlab kmeans 函数。

```
img1 = imread('picture.ppm');
img= imresize(img1,0.15);
imshow(img);
imf = double(reshape(img,size(img,1)*size(img,2),size(img,3)));
imf = imresize(imf,.15);
[m,n,z]=size(imf) 
```

但我遇到了很多错误。1）点的强度很低。在我这样做之后：

```
Y=Y*255; %y being of the same dimension as my img
imf1 = Y-imf; 
```

我的大部分图片都是白色的，散布着低强度的点。还有其他方法可以增加这些点的强度吗？

2) 我如何处理图像，以便它可以作为有效输入传递给各种 kmeans 算法？我需要两个集群，黑色和红色点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T04:36:21.547

K-means 不允许您根据预定义的标准指定输出集群的组成。它只是试图找到与您的点距离最小的质心。您通常可以提供`[0,0,0;1,0,0]`对应于黑色和红色的起点，但不能保证最终的质心与起点相似。

但是，如果您*先验地*知道质心应该是什么样子，则不需要 k-means。只需计算每个像素到黑色像素和红色像素的距离，然后选择最小的距离。

# ubuntu - 这个错误是什么意思：“不支持特立独行”。

> ID：10354499
> 
> 赞同：1
> 
> 时间：2012-04-27T16:32:12.517
> 
> 标签：ubuntu

我正在尝试在集群上安装 AppScale，并且正在运行以下命令：

```
debian/appscale_build.sh 
```

当我收到此错误时：

```
 maverick is not supported 
```

这是什么意思？我无法理解。

这是我的 ubuntu 详细信息：

```
lsb_release -a
No LSB modules are available.
Distributor ID: Ubuntu
Description:    Ubuntu 10.10  
Release:    10.10
Codename:   maverick 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T16:34:14.957

这意味着此 AppScale 版本不支持您的 Ubuntu 版本，即 Maverick。

# java - 我的第一个反向 ajax 应用程序

> ID：10354503
> 
> 赞同：3
> 
> 时间：2012-04-27T16:32:22.893
> 
> 标签：java, jsf, jakarta-ee, icefaces, reverse-ajax

我想学习反向 ajax，我发现了一个名为 ICEPush 的小工具，我认为这可能是一个很好的起点。我在实现一个非常简单的应用程序时遇到了麻烦。我正在关注本[教程](http://wiki.icesoft.org/display/ICE/Easy+Ajax+Push#EasyAjaxPush-downloads)，但我使用的是 Glassfish 3.1 而不是 Tomcat，而不是 Eclipse 我使用的是 NetBeans 7.1

我完全按照教程中的说明进行操作，请参阅我的代码。这是将成为 Ajax 推送目标的页面：

```
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core">
    <h:head>
        <title>Easy Ajax Push - Color</title>
    </h:head>

        <h:body>
            <h:dataTable value="#{messageBean.textList}" var="current">
                <h:column>
                    <h:outputText value="#{current.text}"
                                  style="color: #{current.color};"/>
                </h:column>
            </h:dataTable>

            <hr width="100%"/>

            <h:form>
                <h:panelGrid columns="4">
                    Choose a Color:
                    <h:commandButton value="Red"
                                     action="#{colorBean.chooseColor}"
                                     style="color: white; background-color: red;">
                        <f:setPropertyActionListener target="#{colorBean.color}" value="red"/>
                    </h:commandButton>
                    <h:commandButton value="Blue"
                                     action="#{colorBean.chooseColor}"
                                     style="color: white; background-color: blue;">
                        <f:setPropertyActionListener target="#{colorBean.color}" value="blue"/>
                    </h:commandButton>
                    <h:commandButton value="Green"
                                     action="#{colorBean.chooseColor}"
                                     style="color: white; background-color: green;">
                        <f:setPropertyActionListener target="#{colorBean.color}" value="green"/>
                    </h:commandButton>
                </h:panelGrid>
            </h:form>

        </h:body>

</html> 
```

以下是需要的 2 个托管 bean： **ColorBean.java**

```
@ManagedBean(name="colorBean")
@ViewScoped
public class ColorBean implements  Serializable {

   private static final String PUSH_GROUP = "colorPage";

    @ManagedProperty(value="#{messageBean}")
    private MessageBean messageBean;
    private String color = "black";
    private String sessionId;

    public ColorBean() {            
                PushRenderer.addCurrentSession(PUSH_GROUP);
        FacesContext fcontext = FacesContext.getCurrentInstance();
        HttpSession session = (HttpSession)fcontext.getExternalContext().getSession(false);
        sessionId = session.getId();
    }

    public void setMessageBean(MessageBean messageBean) {
        this.messageBean = messageBean;
    }

    public String getColor() {
        return color;
    }

    public void setColor(String color) {
        this.color = color;
    }

    public String chooseColor() {
        messageBean.addToList(sessionId, color);
                PushRenderer.render(PUSH_GROUP);
        return null;
    }
} 
```

**MessageBean.java**

```
@ManagedBean(name="messageBean")
@ApplicationScoped
public class MessageBean implements  Serializable {

    private static final int MAX_SIZE = 25;
    private List<TextModel> textList = new ArrayList<TextModel>(0);

    public MessageBean() {
    }

    public List<TextModel> getTextList() {
        return textList;
    }

    public void setTextList(List<TextModel> textList) {
        this.textList = textList;
    }

    public void addToList(String sessionId, String color) {
        textList.add(makeTextModel(sessionId, color));

        if (textList.size() > MAX_SIZE) {
            textList.clear();
        }
    }

    private TextModel makeTextModel(String sessionId, String color) {
        return new TextModel("User with session ID of " + sessionId + " selected color \"" + color + "\".",
                             color);
    }
} 
```

还有一个简单的 pojo 来表示正在呈现的文本。 **文本模型.java**

```
public class TextModel implements Serializable {

    private String text;
    private String color;

    public TextModel() {
    }

    public TextModel(String text, String color) {
        this.text = text;
        this.color = color;
    }

    public String getText() {
        return text;
    }

    public void setText(String text) {
        this.text = text;
    }

    public String getColor() {
        return color;
    }

    public void setColor(String color) {
        this.color = color;
    }

    public String toString() {
        return text;
    }
} 
```

我正在使用 IceFaces 3.0.1 版，这就是我的**web.xml**的样子：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="3.0" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd">
    <context-param>
        <param-name>javax.faces.PROJECT_STAGE</param-name>
        <param-value>Development</param-value>
    </context-param>
    <context-param>
        <param-name>javax.faces.STATE_SAVING_METHOD</param-name>
        <param-value>server</param-value>
    </context-param>
    <context-param>
        <param-name>javax.faces.FACELETS_SKIP_COMMENTS</param-name>
        <param-value>true</param-value>
    </context-param>
    <context-param>
        <param-name>org.icefaces.mandatoryResourceConfiguration</param-name>
        <param-value/>
    </context-param>
    <context-param>
        <param-name>org.icefaces.ace.theme</param-name>
        <param-value>sam</param-value>
    </context-param>
    <context-param>
        <param-name>javax.faces.VALIDATE_EMPTY_FIELDS</param-name>
        <param-value>false</param-value>
    </context-param>
    <context-param>
        <param-name>com.icesoft.faces.gmapKey</param-name>
        <param-value>ABQIAAAADlu0ZiSTam64EKaCQr9eTRTOTuQNzJNXRlYRLknj4cQ89tFfpxTEqxQnVWL4k55OPICgF5_SOZE06A</param-value>
    </context-param>
    <servlet>
        <servlet-name>Faces Servlet</servlet-name>
        <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet>
        <servlet-name>Resource Servlet</servlet-name>
        <servlet-class>com.icesoft.faces.webapp.CompatResourceServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>Faces Servlet</servlet-name>
        <url-pattern>/faces/*</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>Faces Servlet</servlet-name>
        <url-pattern>*.jsf</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>Faces Servlet</servlet-name>
        <url-pattern>/icefaces/*</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>Resource Servlet</servlet-name>
        <url-pattern>/xmlhttp/*</url-pattern>
    </servlet-mapping>
    <session-config>
        <session-timeout>
            30
        </session-timeout>
    </session-config>
    <welcome-file-list>
        <welcome-file>faces/index.xhtml</welcome-file>
    </welcome-file-list>
</web-app> 
```

这段代码给了我3个问题：

1 - 当我运行应用程序并单击 3 个按钮中的一些按钮时，会出现一个异常，指出我不能调用一个在另一个内部使用一个托管 bean，因为它们的范围不兼容：

> 警告：排队异常 javax.faces.FacesException：无法创建托管 bean colorBean。发现以下问题： - 表达式#{messageBean}，request所引用的对象的范围比引用的托管bean（colorBean）的视图范围短

2 - 在控制台中我一直看到一条消息：

> WARNING: PWC4011: Unable to set request character encoding to UTF-8 from context /ReverseAjaxExample，因为请求参数已经被读取，或者 ServletRequest.getReader() 已经被调用

3 - 如果我在托管 bean 中将 @ApplicationScope 更改为 @ViewScope 并将 @ViewScope 更改为 @ApplicationScope，第一个问题就会消失，我可以看到应用程序是如何工作的，但是反向 ajax 不起作用，因为其他浏览器不显示变化。而且我总是`PWC4011`在控制台中看到警告

我从未使用过反向 Ajax，但我从理论的角度理解它。如果您能帮我修复这个简单的应用程序，我将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-27T17:22:20.230

很多次发生在我身上，我花费数小时进行调试，而错误的原因只是最简单的事情。

在这里，我回答了我自己的问题，表明我的错误是多么愚蠢：

而不是使用

> javax.enterprise.context.ApplicationScoped

我应该使用

> javax.faces.bean.ApplicationScoped

原因是我没有使用上下文和依赖注入，我只是使用 JSF 托管 bean。

多亏了这一点，我才记住了它，我只是重构了导入，这就是 Ctrl+Space 不喜欢我的原因 :)

# php - 用于处理输出 json 的 JSON/XML 解析和 jQuery 回调

> ID：10354504
> 
> 赞同：0
> 
> 时间：2012-04-27T16:32:31.393
> 
> 标签：php, jquery, xml, ajax, json

**案例 1：什么对我不起作用？**

```
$phpObj=json_decode(file_get_contents($url),true); 
```

在上面的 file_get_contents 中返回一个 json，我使用上面的方法将其转换为 php 对象，然后解析 $phpObj（提取某些字符串），它是一个多维数组，并形成一个新的键值数组，比如 $newObj。之后，我只需使用 json_encode 将 newObj 转换为 json。

我使用 jQuery 解析 $newObj 并将其呈现为 html。

**案例 2：什么对我有用？**

我没有解析 json，而是让我的服务器返回 XML，而不是像上面那样使用 json_decode：

```
$xmlDoc->load($url); 
```

我解析 XML 创建 $newObj（键值对）然后我使用与上面相同的 jQuery，它在浏览器上呈现记录集。工作得很好。

现在除了解析 JSON 和 XML 之外，案例 1 和 2 之间的唯一区别是 jQuery 在回调函数中接收到的用于渲染的值：

对于案例 1（不起作用）：

```
{"1002":"I am Yavar","1003":"I work for XYZ","1004":"California is in US"} 
```

对于案例 2（作品）：

```
[{"1000":"California is in US","xmlNode":{}},{"1001":"I work for XYZ","xmlNode":{}}] 
```

如果有人可以帮助我了解案例 1 中出了什么问题，并且方括号 ([]) 和 xmlNode 的内容是否真的需要在案例 2 中使其工作，那就太好了？

如果真的需要这里是我的 jQuery 函数：

```
<script>
$(document).ready( function() {
$('#term').keyup( function() {

  $.get('search_json.php?q='+escape($('#term').val()), function(data) {
    html = '<table id="results">';
    $.each( data, function( ind, ep ) {
        html += '<tr><td class="document"><b>'+ind.key+'</b>&nbsp;';
        html += +ep.value+'</td></tr>';
    } );
    html += '</html>';
    $('#results').replaceWith( html );
  } );
} );
} );
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T16:39:46.930

您不能对具有非零索引键的对象执行 $.each() 。方法二起作用的原因是因为它将它作为一个对象数组返回，而不是一个对象。

使用方法二，或者遍历你的 json 对象，然后简单地将其吐出为：

```
$outObj = array(); // Don't forget to initialise your arrays!
foreach($phpObj as $key => $value) {
   $value['key'] = $key;
   $outObj[] = $value; 
}
json_encode($outObj); 
```

创建一个内部数组，可以使用您建议的 Javascript 进行迭代。您将需要参考`ep.key`而不是`ind.key`。

# cakephp - CakePHP 1.3 exists($id) 函数示例/如何

> ID：10354505
> 
> 赞同：1
> 
> 时间：2012-04-27T16:32:35.830
> 
> 标签：cakephp, associations, exists

cakephp 1.3 是否有一个exists($id) 函数来查看表中是否存在记录？我有一个从另一台服务器同步的数据库。我的数据库有 2 个表，即同步表，以及我放入的一个以扩展同步表。我的应用程序现在列出了主（同步）表中的所有项目，当他们单击该项目时，它会将它们带到一个视图以添加与第二个表不同的信息。它将 ID 传递给第二个表。

我要做的是首先检查第二个表，看看是否存在具有相应外键的记录，如果存在，然后移动到第二个表中该记录的编辑屏幕，如果不存在，我想确保该记录存在于第一个表中，如果存在，则使用给定的 $id 作为外键将记录添加到第二个表中。

现在考虑一下，它将正确的 id 传递给第二个表，我只是不希望用户能够输入一个数字并假设它存在于主表中并向第二个表添加一条记录，这不会t 实际存在。如果没有检查的功能，我可以使用关联来检查吗？像：

```
if (!$this->Table2->Table1->id) {
    //if id does not exist in parent table don't create the record in the second table and print an error
} else {
    //id does exist in parent table either add a new record with the foreign key being the id passed from parent or redirect to edit screen for that record in second table
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-27T16:57:57.660

使用 Model::exists() 函数：

```
$model->id = 5;
if($model->exists()){
    // Record with ID 5 found
}else{
    // Record not found
} 
```

您也可以尝试同时加载和执行这两项操作（检查并加载是否存在）

```
$model->id = 5;
if($model->read()){
    // Record exists and you have in $model->data the data
}else{
    // Record not found
} 
```

如果我理解得很好（我的英语不太好），在你的情况下你可以这样做：

```
if(!$this->Table2->Table1->id || !$this->Table2->Table1->exists()){
    // Table1->id is empty or record not found
}else{
    // Table1->id has id and record exists
} 
```

# sql - 查找列值连续增加的行

> ID：10354506
> 
> 赞同：8
> 
> 时间：2012-04-27T16:32:38.170
> 
> 标签：sql, sql-server-2008-r2

我有一个存储股票每日价格的 sql 表。每天收市后都会插入新记录。我想找到价格连续上涨的股票。

该表有很多列，但这是相关的子集：

```
quoteid     stockid      closeprice     createdate
--------------------------------------------------
    1           1               1       01/01/2012
    2           2              10       01/01/2012
    3           3              15       01/01/2012

    4           1               2       01/02/2012
    5           2              11       01/02/2012
    6           3              13       01/02/2012

    7           1               5       01/03/2012
    8           2              13       01/03/2012
    9           3              17       01/03/2012

   10           1               7       01/04/2012
   11           2              14       01/04/2012
   12           3              18       01/04/2012

   13           1               9       01/05/2012
   14           2              11       01/05/2012
   15           3              10       01/05/2012 
```

该`quoteid`列是主键。

在表中，股票 id 1 的收盘价每天都在上涨。股票 id 3 波动很大，股票 id 2 的价格在最后一天下跌。

我正在寻找这样的结果：

```
stockid     Consecutive Count (CC)
----------------------------------
    1                5
    2                4 
```

如果你能得到连续连胜的日期输出，那就更好了：

```
stockid     Consecutive Count (CC)      StartDate      EndDate
---------------------------------------------------------------
    1                5                 01/01/2012    01/05/2012
    2                4                 01/01/2012    01/04/2012 
```

`StartDate`是价格开始上涨`EndDate`的时间，也是牛市实际结束的时间。

我认为这不是一个容易的问题。我在这里查看了其他帖子，这些帖子也处理了这种连续场景，但它们不符合我的需求。如果您知道任何与我相似的帖子，请告诉我。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-27T18:57:25.740

在任何情况下，它都有助于增加每只股票的行数（实际`quoteid`值在这里并没有真正的帮助）。*捕获*的天数（在此表中）是最简单的 - 如果您想要其他内容（例如仅工作日、忽略周末/节假日或其他），它会涉及更多；你可能需要一个日历文件。如果你还没有索引，你会想要一个超过 [ `stockid`, ] 的索引。`createdate`

```
WITH StockRow AS (SELECT stockId, closePrice, createdDate,
                         ROW_NUMBER() OVER(PARTITION BY stockId 
                                           ORDER BY createdDate) rn
                  FROM Quote),

     RunGroup AS (SELECT Base.stockId, Base.createdDate,
                         MAX(Restart.rn) OVER(PARTITION BY Base.stockId
                                              ORDER BY Base.createdDate) groupingId
                  FROM StockRow Base
                  LEFT JOIN StockRow Restart
                         ON Restart.stockId = Base.stockId
                            AND Restart.rn = Base.rn - 1
                            AND Restart.closePrice > Base.closePrice)

SELECT stockId, 
       COUNT(*) AS consecutiveCount, 
       MIN(createdDate) AS startDate, MAX(createdDate) AS endDate
FROM RunGroup
GROUP BY stockId, groupingId
HAVING COUNT(*) >= 3
ORDER BY stockId, startDate 
```

从提供的数据中产生以下结果：

```
Increasing_Run
stockId   consecutiveCount  startDate    endDate
===================================================
1         5                 2012-01-01   2012-01-05
2         4                 2012-01-01   2012-01-04
3         3                 2012-01-02   2012-01-04 
```

`[SQL Fiddle Example](http://sqlfiddle.com/#!6/b1e78/4/0)`
（小提琴也有一个多次运行的例子）

此分析将忽略所有间隙，正确匹配所有运行（下一次正运行开始时）。

* * *

那么这里发生了什么？

```
StockRow AS (SELECT stockId, closePrice, createdDate,
                    ROW_NUMBER() OVER(PARTITION BY stockId 
                                      ORDER BY createdDate) rn
             FROM Quote) 
```

此 CTE 用于一个目的：我们需要一种方法来查找下一行/上一行，所以首先我们按（日期）顺序对每一行进行编号......

```
RunGroup AS (SELECT Base.stockId, Base.createdDate,
                    MAX(Restart.rn) OVER(PARTITION BY Base.stockId
                                         ORDER BY Base.createdDate) groupingId
             FROM StockRow Base
             LEFT JOIN StockRow Restart
                    ON Restart.stockId = Base.stockId
                       AND Restart.rn = Base.rn - 1
                           AND Restart.closePrice > Base.closePrice) 
```

...然后根据索引加入它们。如果您最终选择了具有`LAG()`/的东西，那么`LEAD()`使用它们几乎肯定会是一个更好的选择。不过，这里有一件关键的事情——只有当行*无序*（小于前一行）时才匹配。否则，该值最终为`null`（使用`LAG()`，您需要使用类似的东西`CASE`来完成此操作）。你得到一个看起来像这样的临时集合：

```
B.rn   B.closePrice   B.createdDate  R.rn   R.closePrice   R.createdDate  groupingId
1      15             2012-01-01     -      -              -              -
2      13             2012-01-02     1      15             2012-01-01     1
3      17             2012-01-03     -      -              -              1
4      18             2012-01-04     -      -              -              1
5      10             2012-01-05     4      18             2012-01-04     4 
```

...所以`Restart`只有当前一个大于“当前”行时才有值。窗口函数中的使用`MAX()`被用于迄今为止看到的最大值......因为它`null`是最低的，导致为所有其他行保留行索引，直到发生另一个不匹配（这给出了一个新值）。此时，我们基本上已经有了[间隙和孤岛](/questions/tagged/gaps-and-islands "显示标记为“差距和岛屿”的问题")查询的中间结果，为最终聚合做好了准备。

```
SELECT stockId, 
       COUNT(*) AS consecutiveCount, 
       MIN(createdDate) AS startDate, MAX(createdDate) AS endDate
FROM RunGroup
GROUP BY stockId, groupingId
HAVING COUNT(*) >= 3
ORDER BY stockId, startDate 
```

查询的最后一部分是获取运行的开始日期和结束日期，并计算这些日期之间的条目数。如果日期计算有更复杂的事情，则可能需要在此时发生。这显示了在子句中**不**包含列`GROUP BY`的少数合法实例之一。该子句用于消除“太短”的运行。**`SELECT``HAVING`**

 *** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T17:07:43.687

我会尝试 CTE，大致如下：

```
with increase (stockid, startdate, enddate, cc) as
(
    select d2.stockid, d1.createdate as startdate, d2.createdate as enddate, 1
    from quote d1, quote d2
    where d1.stockid = d2.stockid
    and d2.closedprice > d1.closedprice
    and dateadd(day, 1, d1.createdate) = d2.createdate

    union all

    select d2.stockid, d1.createdate as startdate, cend.enddate as enddate, cend.cc + 1
    from quote d1, quote d2, increase cend
    where d1.stockid = d2.stockid and d2.stockid = cend.stockid
    and d2.closedprice > d1.closedprice
    and d2.createdate = cend.startdate
    and dateadd(day, 1, d1.createdate) = d2.createdate
)
select o.stockid, o.cc, o.startdate, o.enddate
from increase o where cc = (select max(cc) from increase i where i.stockid = o.stockid and i.enddate = o.enddate) 
```

这假设没有间隙。`dateadd(day, 1, d1.createdate) = d2.createdate`必须用其他指示 d2 是否是 d1 之后的“下一天”的东西来替换标准。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-28T16:19:16.013

这是根据我的需要的最终工作 SQL。测试表明它工作正常。我正在使用@Oran 的 CC 方法

```
WITH StockRow (stockId, [close], createdDate, rowNum)
 as
 (
     SELECT stockId,         [close],                   createdDate,
            ROW_NUMBER() OVER(PARTITION BY stockId ORDER BY createdDate)
     FROM dbo.Quote
     where createddate >= '01/01/2012' --Beginning of this year
     ),

     RunStart (stockId, [close], createdDate, runId) as (
     SELECT      a.stockId,       a.[close], a.createdDate,
            ROW_NUMBER() OVER(PARTITION BY a.stockId ORDER BY a.createdDate)
     FROM StockRow as a
     LEFT JOIN StockRow as b
     ON b.stockId = a.stockId
     AND b.rowNum = a.rowNum - 1
     AND b.[close] < a.[close]
     WHERE b.stockId IS NULL)
     ,
 RunEnd (stockId, [close], createdDate, runId) as (
     SELECT a.stockId, a.[close], a.createdDate,
            ROW_NUMBER() OVER(PARTITION BY a.stockId ORDER BY a.createdDate)
     FROM StockRow as a
     LEFT JOIN StockRow as b
     ON b.stockId = a.stockId
     AND b.rowNum = a.rowNum + 1
     AND b.[close] > a.[close]
     WHERE b.stockId IS NULL) 

SELECT a.stockId,        s.companyname,         s.Symbol, 
a.createdDate as startdate,        b.createdDate as enddate,
(select count(r.createdDate)       from      dbo.quote r      where r.stockid = b.stockid and        r.createdDate          between  a.createdDate      and       b.createdDate) as BullRunDuration
FROM RunStart as a JOIN RunEnd as b
ON b.stockId = a.stockId
join dbo.stock as s
on a.stockid = s.stockid
AND b.runId = a.runId
AND b.[close] > a.[close]
and (select count(r.createdDate) from dbo.quote r where r.stockid = b.stockid and 
r.createdDate between  a.createdDate and b.createdDate)  > 2 -- trying to avoid cluter
order by 6 desc, a.stockid 
```**

# jquery - jQuery自动完成将选择添加到div

> ID：10354512
> 
> 赞同：1
> 
> 时间：2012-04-27T16:33:02.937
> 
> 标签：jquery, jquery-autocomplete

我正在使用 jQuery 中的自动完成插件，我想将我的结果选择附加到带有其他元素的 div 元素：隐藏输入和文本输入。

这是我的html代码：

这是我在 jQuery 中的函数：

```
$("#buscar").autocomplete({
    source: "procesos/buscarPersona.php",
    minLength: 2,
    select: function( event, ui ) {
        $("#acreditados")
            .append('<div class="col50"><p>'
            + '<input type="hidden" name="id" value="' + ui.item.id_persona + '"/>'
            + ui.item.value 
            + '</p></div>'
            + '<div class="col50 f-right"><p>Monto:' 
            + '<input type="text" /></p></div>');
        }
}); 
```

现在我的代码工作正常，但是我发现很难维护显示选择结果和附加输入的附加函数。有没有办法可以使用 load() 函数来使这更简单？最终输出必须附加多个选择，而不仅仅是最后一个选择

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T16:38:05.323

不要使用load，load是Ajax，意思是与服务器的通信，对于每一个选择，除非你需要一些验证或更复杂的逻辑，我们应该避免网络访问。

如果您使用负载，那么对于每个选择，您都将与您的服务器进行通信，然后它会将 html 传递给您。

恕我直言，这个解决方案看起来很难看，但效率更高。

编辑：

单独保存这个 div：

```
 <div class="dynamiccontentcont">
       <div class="col50">
          <p><input type="hidden" name="id" value=""/></p>
       </div>
      <div class="col50 f-right">
         <p>Monto:<input type="text" /></p>
     </div>
   </div> 
```

选择时

1.  通过调用克隆此 div`jQuery('.dynamiccontentcont').clone()`
2.  放置选定的值（正如您当前在代码中所做的那样）
3.  在代码中附加 div

# html - 将半径角应用于菜单的末尾而不是每个项目

> ID：10354529
> 
> 赞同：0
> 
> 时间：2012-04-27T16:34:13.920
> 
> 标签：html, css, menu

这是我的菜单——

```
<div ><ul id="menu">
        <li class="one"><a href="http://www.domain.com">Dashboard</a></li>
        <li class="two"><a href="<?php echo bp_loggedin_user_domain() ?>">Profile</a></li>
        <li class="three"><a href="<?php echo bp_loggedin_user_domain() ?>messages">Messages</a></li>
        <li class="four"><a href="<?php echo bp_loggedin_user_domain() ?>friends">Friends</a></li>
        <li><?php bp_adminbar_notifications_menu() ?>
        <ul>
        <li> </li>
        </ul>
        </li>
    </ul> 
```

这是 CSS -

```
ul#menu li {
    list-style: none;
    float: left;
    margin: 0 0px 0 0;
    background-color: #F8FCFE;
    position: relative;
    z-index: 1;
    border-top-left-radius: 10px 10px;
    border-bottom-left-radius: 10px 10px;

}

ul#menu li a:link, ul#menu li a:visited {
    display: block;
    text-align: center;
    width: 88px;
    height: 53px;
    line-height: 53px;
    font-family: 'Montserrat', sans-serif;
    text-decoration: none;
    font-size: 13px;
    color: black;
    letter-spacing: 1px;
    outline: none;
    float: left;
    background: #F8FCFE;
    border-top-left-radius: 10px 10px;
    border-bottom-left-radius: 10px 10px;
} 
```

我想要的是左边的项目有左上角，左下角半径，最后一个项目有右上角和右下角有半径。所以它看起来像带有半径角的垂直矩形。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T16:50:18.280

像这样**[的 jsFiddle 示例](http://jsfiddle.net/j08691/gHrAp/)**怎么样？

我保持您的 HTML 不变，但将 CSS 更新为：

```
ul#menu li {
    list-style: none;
    float: left;
    margin: 0 0px 0 0;
}

li.one a{
    border:2px solid #999;
    border-top-left-radius: 10px 10px;
    border-bottom-left-radius: 10px 10px;
    border-right:none;
}
li.two a, li.three a {
    border-top:2px solid #999;
    border-bottom:2px solid #999;
}
li.four a{
    border:2px solid #999;
    border-top-right-radius: 10px 10px;
    border-bottom-right-radius: 10px 10px;
    border-left:none;
}

ul#menu li a:link, ul#menu li a:visited {
    display: block;
    text-align: center;
    width: 88px;
    height: 53px;
    line-height: 53px;
    font-family: 'Montserrat', sans-serif;
    text-decoration: none;
    font-size: 13px;
    color: black;
    letter-spacing: 1px;
    outline: none;
    float: left;
    background: #ccc;

}​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T16:40:47.473

让第一个`li`和最后一个有不同的类，例如`first`and `last`，首先是左上和下，最后是右上和下

```
li.first {
border-top-left-radius: 10px;
border-bottom-left-radius: 10px; }

li.last {
border-top-right-radius: 10px;
border-bottom-right-radius: 10px; } 
```

菜单

```
<ul id="menu">
<li class="one first"><a href="http://www.domain.com">Dashboard</a></li>
<li class="two"><a href="<?php echo bp_loggedin_user_domain() ?>">Profile</a></li>
<li class="three"><a href="<?php echo bp_loggedin_user_domain() ?>messages">Messages</a></li>
<li class="four"><a href="<?php echo bp_loggedin_user_domain() ?>friends">Friends</a></li>
<li class="last"><?php bp_adminbar_notifications_menu() ?></li>
</ul> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T16:41:59.253

html:

```
<ul id="menu">
    <li class="one"><a href="http://www.domain.com">Dashboard</a></li>
    <li class="two"><a href="<?php echo bp_loggedin_user_domain() ?>">Profile</a></li>
    <li class="three"><a href="<?php echo bp_loggedin_user_domain() ?>messages">Messages</a></li>
    <li class="four"><a href="<?php echo bp_loggedin_user_domain() ?>friends">Friends</a></li>
    <li class="five"><?php bp_adminbar_notifications_menu() ?>
    <ul>
    <li> </li>
    </ul>
    </li>
</ul> 
```

CSS：

```
ul#menu li {
list-style: none;
float: left;
margin: 0 0px 0 0;
background-color: #F8FCFE;
position: relative;
z-index: 1;
border-top-left-radius: 10px 10px;
border-bottom-left-radius: 10px 10px;
overflow:hidden;}

ul#menu li.one {border-radius: 10px 0px 0px 10px;}

ul#menu li.five {border-radius: 0px 10px 10px 0px;} 
```

您可以像这样顺时针指定每个项目的角：左上角、右上角、右下角、左下角。

纠正了直接复制和粘贴到 css 的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-27T18:28:13.217

CSS3 允许您为特定子项定义样式。例如：

```
#menu li:last-child {
 // some def
}

#menu li:first-child {
 // some other definition
} 
```

希望这可以帮助。

# android - Android“找不到类”错误

> ID：10354533
> 
> 赞同：2
> 
> 时间：2012-04-27T16:34:28.840
> 
> 标签：android, layout, android-mapview, arcgis

我是 Android 编程新手，并且在 Eclipse 中从事一个项目。我尝试了第一个教程“HelloWorld”，并得到了这个错误：

```
Could not find class 'com.esri.android.map.MapView', referenced from method com.esri.arcgis.android.samples.helloworld.HelloWorldActivity.onCreate 
```

是否必须有一个名为 的布局`MapView`？如果是这样，我的项目中没有。您能告诉我如何将它纳入项目吗？

我也有项目中的所有源文件夹。即使是mapview，也不知道为什么会出现这种错误。我需要这个项目的帮助，我需要在几天内完成它，但由于这个错误我被卡住了，无法继续。我在所有项目中都面临同样的问题，即使我尝试的每个项目都是 ArcGIS 提供的示例。

这是代码：

```
package com.esri.arcgis.android.samples.helloworld;

import android.app.Activity;
import android.os.Bundle;

import com.esri.android.map.MapView;
import com.esri.android.map.ags.ArcGISTiledMapServiceLayer;

public class HelloWorldActivity extends Activity {
MapView map = null;

/** Called when the activity is first created. */
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    // Retrieve the map and initial extent from XML layout
    map = (MapView)findViewById(R.id.map);
    // Add dynamic layer to MapView
    map.addLayer(new ArcGISTiledMapServiceLayer("" +
    "http://services.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer"));

}

protected void onPause() {
    super.onPause();
    map.pause();
}

protected void onResume() {
    super.onResume();
    map.unpause();
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T05:14:18.450

以下内容适用于 ArcGIS Runtime SDK for Android 1.1.1，但也可能适用于其他版本的 ArcGIS Runtime SDK：

1.  右键单击您的 HelloWorld 项目并选择属性
2.  选择 Java 构建路径
3.  在 Java 构建页面上，选择库选项卡
4.  确保 ArcGIS for Android 库存在
5.  如果没有，请选择“添加库”并选择“ArcGIS for Android Library Container”
6.  同样在 Java Build Page 上，选择 Order and Export 选项卡
7.  确保“ArcGIS for Android”类被**选中！！**<--这可能是你的问题

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T23:12:55.463

我对样本有类似的问题。我不得不多次将 ArcGIS 库重新添加到项目中，因为 Eclipse 不断删除它，否则在项目加载时它将被归类为持久容器。

如果它被列为持久容器，我首先将其从构建路径中删除

然后修复它我做了以下操作：右键单击 PackageExplorer 中的项目名称 -> 单击构建路径 -> 添加库 -> 选择 ArcGIS 库并单击下一步

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T16:42:59.370

听起来您没有正确导入 MapView，请验证您在 HelloWorldActivity.java 中是否有此导入：

```
import com.google.android.maps.MapView; 
```

并查看[Hello mapview 教程](http://developer.android.com/resources/tutorials/views/hello-mapview.html)，看起来他们没有提到这一点。

在 Eclipse 中，您可以按 Ctrl+Shift+O 来更新丢失的导入。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-27T17:01:55.663

我想你可以看看：
[Arcgis API for Android](http://proceedings.esri.com/library/userconf/devsummit11/papers/tech/introduction_to_arcgis_api_for_android.pdf)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-27T21:01:13.720

我也是这里的新手，所以我不太确定，但我认为 HelloWorldActivity 应该扩展 MapActivity 而不是 Activity。

# jquery - 控制 jQuery 异步 ajax 调用次数？

> ID：10354536
> 
> 赞同：4
> 
> 时间：2012-04-27T16:34:30.977
> 
> 标签：jquery

如何控制允许多少个异步 ajax 调用？比方说，如果我将此限制设置为 3，则第 4 个请求将排队，直到 3 个请求之一完成。

注意：执行 ajax 调用的代码会动态插入到我的页面中，我无法控制哪个函数会发出请求。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T16:47:26.010

也许尝试这样的事情。抱歉，我没有方便的站点进行测试。

```
$.queueAjax = (function() {

  var queue = [];
  var maxConnections = 4;
  var running = 0;

  function flush() {
    while (running < maxConnections && queue.length) {
      running += 1;
      var args = queue.shift();
      var xhr = $.ajax.apply($, args);
      xhr.done(function() {
        running -= 1;
        flush();
      });
    }
  }

  return function() {
    var args = Array.prototype.slice(arguments);
    queue.push(args);
    flush();
  }
})(); 
```

你会像你一样调用它，`$.ajax`但它会缓冲请求并且只允许 4 个同时运行。

如果您不想使用单独的函数，也可以替换主 jQuery 函数，但这很丑陋。像这样的东西：

```
$.ajax = (function() {
  var ajax = $.ajax;

  var queue = [];
  var maxConnections = 4;
  var running = 0;

  function flush() {
    while (running < maxConnections && queue.length) {
      running += 1;
      var args = queue.shift();
      var xhr = ajax.apply($, args);
      xhr.done(function() {
        running -= 1;
        flush();
      });
    }
  }

  return function() {
    var args = Array.prototype.slice(arguments);
    queue.push(args);
    flush();
  }
})(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T17:06:39.730

既然你说你不能使用任何插件，这是我能想到的，但不能保证效率。

var ajax_calls = new Array(); //全局变量

```
if( ajax_calls.length < 3 ){
    ajax_calls.push( 
        jQuery.ajax({
            url: "target.php",
            type: "POST", //or GET
            data: {varname: "value"}
            }) 
        );
} 
```

然后稍后，您可以在成功时删除相应的ajax控制器。

# wpf - 使用 MVVM 在 VM 中获取控件的非依赖属性值

> ID：10354539
> 
> 赞同：0
> 
> 时间：2012-04-27T16:34:40.040
> 
> 标签：wpf, mvvm

我有一个使用 MVVM 构建的 WPF 应用程序。该控件有一个文本框，我需要在其中插入标签。我使用的控件是**XamT**。

所以当用户按下插入按钮时，我需要查询焦点控件的 SelectionStart 值，这样我就可以在属性文本索引处插入标签。

选择开始属性不是 DP，因此我无法对其值进行数据绑定并接收更改通知。

我想知道如何有人会在 MVVM 中做到这一点？

控件定义为：

```
<x:XamTextEditor Grid.Column="1" Grid.Row="3" 
                 Grid.ColumnSpan="2"  Margin="0 5 0 5" 
                 Template="{StaticResource ResourceKey=MyTextEditorTemplate}" 
                 Name="TBody" 
                 Text="{Binding Body}" 
                 TextWrapping="Wrap" 
                 IsAlwaysInEditMode="{Binding InEditMode,Mode=OneWay}"
                 AcceptsReturn="True" AcceptsTab="True">
    <igEditors:ValueConstraint Nullable="False" MinLength="1"/>
</x:XamTextEditor> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T17:08:18.030

注意：在这种情况下，除非我有很多额外的时间花在这上面，否则我会将其归结为对 MVVM 不完全友好的第三方控件，稍微打破“规则”，然后放一些代码在您的 View 类后面将对该文本编辑器的引用传递给您的视图模型。

但是，如果您想使用“纯无代码隐藏 MVVM”，则需要创建某种代理对象，该对象知道如何与 XamTextEditor 通信并接收来自底层视图模型的事件。这类似于 Blend/Prism 用于执行用户交互对话框的机制：“动作”对象充当视图模型（它只是引发交互请求事件）和页面上的一些其他 UI 元素之间的桥梁。

我认为解决这个问题的最“稳健”的方法是创建一个知道如何“在当前选择位置将字符串插入 XamTextEditor”的对象。

```
<local:XamEditorInserter 
    SourceObject="{Binding InsertTagRequest}" 
    TargetEditor="{Binding ElementName=TBody}" /> 
```

您可以通过几种方式实现此技术。最简单的方法是定义一个具有事件的接口，您的自定义“桥”对象可以订阅该事件。（`TriggerBase`来自 Blend SDK 公开了一个实际的`List<Action>`，这实际上是同一件事，但要实现更多代码）：

```
public class CustomTriggerEventArgs : EventArgs
{
  public string StringData
  { 
    get;
    set;
  }
}

public interface ICustomTrigger
{
  event EventHandler<CustomTriggerEventArgs> CustomTriggerRaised;
}

public class CustomTrigger : ICustomTrigger
{
  event EventHandler<CustomTriggerEventArgs> CustomTriggerRaised;
  public void Raise(string s)
  {
    if (this.CustomTriggerRaised != null)
    {
      this.CustomTriggerRaised(this, new CustomTriggerEventArgs { StringData = s });
    }
  }
} 
```

然后，您的桥对象将需要在`SourceObject`更改时连接到该事件：

```
public DependencyObject SourceObject
{
  get
  {
    return this.GetValue(SourceObjectProperty) as DependencyObject;
  }
  set
  {
    if (value is ICustomTrigger)
    {
      ((ICustomTrigger)value).CustomTriggerRaised += this.TriggerRaised;
    }
    this.SetValue(SourceObjectProperty, value);
  }
}

public void TriggerRaised(object sender, CustomTriggerEventArgs e)
{
  if (this.TargetEditor != null)
  {
    var sel = this.TargetObject.SelectionStart;
    var tag = e.StringData;
    // do whatever.
  }
} 
```

在您的视图模型中，您只需定义 type 的属性`ICustomTrigger`，将其设置为 a ，并在需要将新标签插入文本编辑器时`new CustomTrigger()`调用其方法。`Raise()`

# java - JVM 程序的理论方面：类文件和内部化，以及执行状态

> ID：10354540
> 
> 赞同：4
> 
> 时间：2012-04-27T16:34:50.130
> 
> 标签：java, caching, binary, jvm

我最近一直在玩开发、测试和删除构建目录 - 并注意到这导致的错误比我想象的要少。

我很好奇是否有人可以详细解释当我们在 Java 应用程序运行时删除类文件目录时会发生什么。我假设在某些时候，这不会影响应用程序（即因为所有操作都将作为字节码推入堆栈）。但是我们什么时候会到达这个不归路？JVM 是否会在某个时候缓存或完全拥有正在运行的应用程序中的所有类，从而使它们的初始位置（即，当我们最初开始运行 java 进程时的 .class 文件的位置）不再重要？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T16:42:11.810

首次访问时需要该类文件。它通常不被缓存，而是 ClassLoader 提取它需要的所有信息并且不会`.class`再次读取。

通常最好的做法是写入一个新目录，如果最后一个版本仍然存在（或者如果您希望能够回滚到该版本），则在创建新版本时

在程序运行时删除/编辑程序会导致 shell 脚本和 C 程序出现问题，因此它在 Java 中不能很好地运行也就不足为奇了。

正如@Louis Wasserman 指出的那样，OP 表示它的效果比预期的要好。恕我直言，这将取决于应用程序。如果加载了所有需要的类，您可以将它们全部删除。启动后很长时间才加载类的应用程序不会以这种方式运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T17:49:30.623

如今，大多数 JVM 以“按需”方式加载类，因此当您启动 Java 程序时，JVM 根据活动引用根据需要读入 .class 文件。（它比这更复杂，但为了简单起见，假设它接近现实。）一旦加载，磁盘上的字节不再需要，因为它们已被转换为 JVM 内部表示并保存在内存中。实际上，一旦加载了类，就不再需要将它们放在磁盘上（假设您再也不会从头开始运行相同的程序！）。

但是，有一个很大的问题......很可能并非程序中的所有类实际上都是在平均运行中加载的。想象一个只在奇怪的情况下才需要的错误类。正常执行不会加载它，因此，如果您在程序“正常”运行后简单地从文件系统中删除所有内容，然后遇到需要加载类的错误条件，那么 JVM 将失败两次-不好的方式 - 而不是抛出预期的异常（将通过您的 catch 块正常处理）会发生更严重的错误，从而使您的逻辑脱轨。

可以“预加载”所有类，但它有点小技巧，通常通过诸如保留应用程序中所有类的列表并为每个类执行“Class.forName()”等方法来完成。请参阅这篇 SO[文章](https://stackoverflow.com/questions/677739/preloading-java-classes-libraries-at-jar-startup)，了解人们出于性能原因如何做到这一点。

# c# - 来自 OleDbCommand 的返回值

> ID：10354543
> 
> 赞同：5
> 
> 时间：2012-04-27T16:34:54.827
> 
> 标签：c#, sql, parameters, oledb, sqlparameter

```
sqlQuery = "SELECT [ID] from [users] WHERE CallerName=@CallerName";

OleDbConnection conn = new OleDbConnection(connectionString);
conn.Open();
cmd = new OleDbCommand(sqlQuery, conn);
cmd.CommandText = sqlQuery;
cmd.Parameters.Add("@CallerName", OleDbType.VarChar).Value = labelProblemDate.Text.Trim();
cmd.Parameters["@CallerName"].Value = name;
cmd.ExecuteNonQuery();          
conn.Close(); 
```

有人告诉我这是如何使用参数从 SELECT 查询中读取数据，但它不起作用。我想我做错了什么。

我正在使用 WinForms 和 Microsoft Access 2007

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-16T15:27:34.270

看起来你有你的答案，但我想从你的示例代码中指出一些事情：

```
sqlQuery = "SELECT [ID] from [users] WHERE CallerName=@CallerName";

OleDbConnection conn = new OleDbConnection(connectionString);
conn.Open();
cmd = new OleDbCommand(sqlQuery, conn);
cmd.CommandText = sqlQuery;
cmd.Parameters.Add("@CallerName", OleDbType.VarChar).Value = labelProblemDate.Text.Trim();
cmd.Parameters["@CallerName"].Value = name;
cmd.ExecuteNonQuery();
conn.Close(); 
```

首先，请注意您的 SQL 查询使用的是 Microsoft SQL 语法，并且 Microsoft Access 更喜欢稍微不同的语法。不要将列名括在方括号中，而是使用波浪号：

```
sqlQuery = "SELECT `ID` from `users` WHERE `CallerName`=@CallerName"; 
```

接下来，在您的 SQL 查询中，请注意 Microsoft Access 不接受命名参数。您上面使用的 SQL 文本`@CallerName`将毫无问题地执行，但所有 OleDb 对象将看到是这样的：

```
sqlQuery = "SELECT `ID` from `users` WHERE `CallerName`=?"; 
```

如果稍后您决定使用存储过程而不是文本 SQL，请记住在添加参数之后和执行命令之前调用Prepare ( [) 。](http://msdn.microsoft.com/en-us/library/system.data.oledb.oledbcommand.prepare)`OleDbCommand`

如果您有多个参数，请确保按照您`OleDbCommand`在 SQL 文本中调用它们的顺序将这些参数添加到您的参数中。OleDb 不在乎你给它们起什么名字，但你可以自己使用它们，帮助你；它不在查询中使用。`@CallerName`不会尝试匹配 SQL 文本中的任何内容。

接下来，我想看看您对该`OleDbParameter`项目的使用情况。`OleDbCommand`在下面的两行中，您将使用值*labelProblemDate.Text.Trim()*向您添加一 (1) 个参数，并且在下一行中，您将相同参数的值**重新分配**给一个变量（我们不知道) 称为`name`。用一个值声明参数然后将其重新分配给其他值对您没有好处。

您可以使用下面修改后的代码段并获得相同的结果（请记住添加 size 字段，如下所示并在您的数据库中指定）：

```
cmd.Parameters.Add("@CallerName", OleDbType.VarChar, 255).Value = labelProblemDate.Text.Trim();
// cmd.Parameters["@CallerName"].Value = name; 
```

同样，您`OleDbCommand`是使用`sqlQuery`参数创建的，因此无需指定命令的`CommandText`属性：

```
cmd = new OleDbCommand(sqlQuery, conn);
//cmd.CommandText = sqlQuery; 
```

最后，正如其他人所说，如果您想按照 SQL 语句的建议查询数据，则必须读取数据而不是调用`ExecuteNonQuery()`（注意它称为**Non Query**）。

总结一下，我把它写在这里：

```
sqlQuery = "SELECT `ID` from `users` WHERE `CallerName`=?";
int result = 0;
OleDbConnection conn = new OleDbConnection(connectionString);
try {
  conn.Open();
  var cmd = new OleDbCommand(sqlQuery, conn);
  //cmd.CommandText = sqlQuery; This command was specified by your initializer
  cmd.Parameters.Add("?", OleDbType.VarChar, 255).Value = labelProblemDate.Text.Trim();
  //cmd.Parameters["@CallerName"].Value = name; Possible bug here
  using (OleDbDataReader reader = cmd.ExecuteReader())
  {
    if(reader.HasRows)
    {
      reader.Read();
      result = reader.GetInt32(0);
    }
  }
} finally {
  conn.Close();
}
return result; 
```

始终将 Close 放在一个`finally`块中，以防您的程序因任何原因引发错误。这可以防止您的应用程序崩溃并使文件保持打开状态。我发现，一个`using`子句在完成时不一定会关闭连接（就像他们应该做的那样）。

我希望这有帮助。我现在正在刷新我的知识`OleDb`，并想指出一些事情。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-27T16:37:40.063

ExecuteNonQuery 不返回数据，只返回受命令影响的行
您需要将 ExecuteReader 与 OleDbDataReader 一起使用

```
OleDbDataReader reader = cmd.ExecuteReader();           
if(reader.HasRows)
{
    reader.Read();
    var result = reader.GetInt32(0);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-27T16:36:51.923

如果查询返回一个值，您可以使用它`ExecuteScalar`来检索该值。 `ExecuteNonQuery`不会从您的数据库中返回值；相反，它旨在用于`UPDATE`语句等，它返回受语句影响的行数。

您可能知道这一点，但一般来说，SELECT 查询可以返回多于一行（和多于一列），因此要“从 SELECT 查询中读取数据”，您可以`ExecuteReader`使用`DbDataReader`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-27T16:48:14.053

读取数据并将其加载到 DataTable 中：

```
OleDataReader rdr = (OleDataReader) cmd.ExecuteReader();
DataTable dt = new DataTable();
dt.Load(rdr); 
```

读取标量值数据并将其加载到变量中：

```
int result = (int)cmd.ExecuteScalar(); //Assume scalar value to be return is int 
```

我希望它有帮助

# sql-server - 在禁用外键约束和索引之前更改列的数据类型

> ID：10354554
> 
> 赞同：0
> 
> 时间：2012-04-27T16:35:29.683
> 
> 标签：sql-server, sql-server-2008, constraints, indexing

我想更改列的数据类型。

因为该列与其他 2 个表作为外键引用，所以我需要删除其他 2 个表的外键约束。

当前表也有需要删除的索引。

如何才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T17:58:13.037

您需要知道可以从`sys`表中提取的索引和外键名称。删除它们的语法是：

**外键**

```
IF  EXISTS (SELECT * FROM sys.foreign_keys WHERE object_id = OBJECT_ID(N'[dbo].[foreign_key_index_name]') AND parent_object_id = OBJECT_ID(N'[dbo].[tablename]'))
ALTER TABLE [dbo].[tablename] DROP CONSTRAINT [foreign_key_index_name] 
```

**指数**

```
IF  EXISTS (SELECT * FROM sys.indexes WHERE object_id = OBJECT_ID(N'[dbo].[tablename]') AND name = N'index_name')
DROP INDEX [index_name] ON [dbo].[tablename] WITH ( ONLINE = OFF ) 
```

此信息也可在 BOL 中获得。

您可以使用以下查询找到索引和外键名称：

```
select * from sys.indexes where object_id = object_id(N'[dbo].[tablename]')
select * from sys.foreign_keys where parent_object_id = object_id(N'[dbo].[tablename]') 
```

# php - PDOStatement fetchColumn() 的 PHP 致命错误

> ID：10354557
> 
> 赞同：1
> 
> 时间：2012-04-27T16:35:40.447
> 
> 标签：php, pdo, rowcount, pdostatement

我无法理解这个错误，有人可以向我解释一下吗？

> PHP 致命错误：在第 27 行的 /user/dal.php 中的非对象上调用成员函数 fetchColumn()

我试图通过使用正则表达式对最后一个查询执行新`SELECT COUNT(*)`查询来获取最后一个查询的计数。问题是`$stmt->fetchColumn()`导致致命错误，然后我得到`Error 500`.

```
function dbRowsCount($sql) {
    global $db;
    $regex = '/^SELECT\s+(?:ALL\s+|DISTINCT\s+)?(?:.*?)\s+FROM\s+(.*)$/i';
    if (preg_match($regex, $sql, $output) > 0) {
        $stmt = $db->query("SELECT COUNT(*) FROM {$output[1]}", PDO::FETCH_NUM);
        return $stmt->fetchColumn();
    }

    return false;
} 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T16:37:41.600

您应该检查您的调用是否`$db->query`返回一个有效的 PDO 对象。像这样的东西：

```
$stmt = $db->query(...);
if (! $stmt) {
    print_r($db->errorInfo());
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T16:40:22.327

大概

```
 $db->query("SELECT COUNT(*) FROM {$output[1]}", PDO::FETCH_NUM); 
```

失败，所以 $stmt 的值为 false 并且你不能调用它 fetchColumn(); 我认为sql查询有问题

[http://www.php.net/manual/en/pdo.query.php](http://www.php.net/manual/en/pdo.query.php)

# android - android休眠杀死应用程序-onDestroy

> ID：10354560
> 
> 赞同：0
> 
> 时间：2012-04-27T16:35:48.727
> 
> 标签：android, hibernate, ondestroy, hibernation

我正在使用 android 2.2 上的 API 级别 8 进行开发

我读到这个关于 android 应用程序的生命周期：http: [//developer.android.com/reference/android/app/Activity.html](http://developer.android.com/reference/android/app/Activity.html) 但没有关于休眠状态以及如何正确处理它的评论......

当我关闭设备时（并且当我的应用程序仍在运行时），操作系统调用 onDestroy 方法......当我打开设备时，我的应用程序从头开始，操作系统调用 onCreate 方法......

操作系统在休眠时只调用 onPause / onResume 可能会更好，不是吗？

我在android上查看了愤怒的小鸟，当设备打开时它仍然存在，它们不会重新加载纹理或其他任何类似瞬间的东西......

那么怎么做呢？:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T17:27:05.953

你需要一个**部分唤醒锁**，这样即使屏幕关闭，你的应用程序也能继续运行。在部分唤醒锁定中，CPU 不会进入睡眠状态，只有屏幕变暗。我认为这就是愤怒的小鸟游戏所做的。[http://developer.android.com/reference/android/os/PowerManager.WakeLock.html](http://developer.android.com/reference/android/os/PowerManager.WakeLock.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T15:28:01.153

添加清单 xml 文件：

*   android:launchMode="singleTask"
*   android:configChanges="keyboardHidden|orientation"

谢谢克里斯和所有人

# sql - 将 postgres 函数的结果作为参数返回到 SQL 存储过程

> ID：10354563
> 
> 赞同：1
> 
> 时间：2012-04-27T16:35:56.000
> 
> 标签：sql, sql-server, sql-server-2008, postgresql

我想查询包含信息列表的 PostgreSQL 数据库，以获取 MSSQL 中当前记录的简单计数。PG 服务器是 MSSQL 中的链接服务器。

我对 Postgre 知之甚少，但足够危险。我创建了一个简单的查询来驻留在函数中，如下所示：

```
CREATE FUNCTION get_count(id text, division text, company integer, INOUT recCount integer) AS $$
BEGIN
recCount := (SELECT COUNT(0)
               FROM test.inventory
               WHERE inv_id = $1 AND div_code = $2 AND cmpy_no = $3);
END;
$$ LANGUAGE plpgsql; 
```

我可以像这样整天查询它：

```
SET @Query = 'SELECT test.get_count(''' + @Id+ ''', ''' + @Div + ''', ' + CAST(@Company AS VARCHAR) +', ?);'
EXEC (@Query) AT POSTGRESQLTEST; 
```

但我不能将它分配给这样的变量：

```
SET @i = EXEC (@Query) AT POSTGRESQLPROD;
-- Error: Incorrect syntax near the keyword 'EXEC'. 
```

办公室伙伴说将值存储在临时表中，查询它，然后删除它。恕我直言，效率不是很高，但它会完成工作。

那我还能做什么？如何利用 PG 服务器的 INOUT 参数 recCount？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T16:51:33.023

^(编辑以下评论的反馈。)
我认为这应该适用于[**`OpenQuery`**](http://msdn.microsoft.com/en-us/library/ms188427.aspx)：

```
SELECT * FROM OpenQuery(POSTGRESQLTEST,
                'SELECT test.get_count(''some_inv_id'', ''some_div_code'', 123') 
```

正如@Andriy 指出的，OpenQuery 不接受变量。对于准动态 SQL，您必须先组装*整个*查询字符串，然后才能执行它。为此，您必须将字符串周围的单引号加倍 - 两次！

这是[.databasejournal.com 上的一个示例，](http://forums.databasejournal.com/showthread.php?t=16170)它是如何完成的。
@sighlent 在下面提供了他的解决方案。

* * *

顺便说一句，关于 plpgsql 函数：

您似乎不需要`recCount`. 为了简化一些事情，将其作为一个`OUT`参数而不是，`INOUT`您将少一个输入参数：

```
CREATE OR REPLACE FUNCTION x.get_count(id text, division text, company integer
                                                       , OUT recCount integer) AS
$BODY$
BEGIN
    recCount := (
       SELECT COUNT(*)
       FROM   test.inventory
       WHERE  inv_id   = $1
       AND    div_code = $2
       AND    cmpy_no  = $3);
END;
$BODY$ LANGUAGE plpgsql; 
```

# zend-framework - 公共文件夹中的脚本调用 index.php

> ID：10354567
> 
> 赞同：0
> 
> 时间：2012-04-27T16:36:19.947
> 
> 标签：zend-framework, .htaccess

我有用 Zend Framework 编写的应用程序，结构是

```
app/
    application/
    library/
    public/ 
```

我在公共文件夹下有一个名为 test.php 的 php 脚本。当我通过[http://localhost/test.php](http://localhost/test.php)访问它时，它也会执行 index.php 代码。我的 .htaccess 看起来像这样。

```
RewriteEngine On

RewriteCond %{REQUEST_FILENAME} -s [OR]
RewriteCond %{REQUEST_FILENAME} -l [OR]
RewriteCond %{REQUEST_FILENAME} -d

RewriteRule ^.*$ - [NC,L]
RewriteRule ^.*$ index.php [NC,L] 
```

它应该在找到 test.php 时停止，不是吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T15:38:56.543

缺少 favicon.ico 导致调用 index.php。添加 favicon.ico 解决了问题。

# javascript - 在没有轨迹球控件或其他相机控件库的threeJS中缩放相机

> ID：10354574
> 
> 赞同：14
> 
> 时间：2012-04-27T16:36:54.940
> 
> 标签：javascript, 3d, three.js

我正在尝试使用threeJS来控制我场景中的相机。我目前使用键盘上的左右键将相机设置为围绕我的对象绕一圈运行。但是有人知道我会如何缩放吗？这是我当前的代码：

```
camera = new THREE.PerspectiveCamera(45, window.innerWidth / window.innerHeight, 1, 10000 );
camera.position.set(0,20,35);
var rotSpeed = .02;

function checkRotation(){

    var x = camera.position.x,
        y = camera.position.y,
        z = camera.position.z;

    if (keyboard.pressed("left")){ //MH - find a way to do this in a switch statement 
        camera.position.x = x * Math.cos(rotSpeed) + z * Math.sin(rotSpeed);
        camera.position.z = z * Math.cos(rotSpeed) - x * Math.sin(rotSpeed);
    } else if (keyboard.pressed("right")){
        camera.position.x = x * Math.cos(rotSpeed) - z * Math.sin(rotSpeed);
        camera.position.z = z * Math.cos(rotSpeed) + x * Math.sin(rotSpeed);
    } else if(keyboard.pressed("up")){
        //zoom in
    } else if (keyboard.pressed("down")){
        //zoom out
    }

    camera.lookAt(scene.position);

} 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-04-28T08:27:18.240

如果你想要一个真正的变焦，而不移动相机，那么你可以玩相机的视野（fov）参数：

```
 camera.fov *= zoomFactor;
  camera.updateProjectionMatrix(); 
```

见：http: [//jsfiddle.net/bvcCB/87/](http://jsfiddle.net/bvcCB/87/)

如果要将相机移动到目标附近（或远处），则计算从相机位置到目标的矢量，并沿着该矢量移动相机位置。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2015-11-24T23:13:17.873

从 r69 开始，您现在可以使用 camera.zoom：

```
camera.zoom = zoomFactor;
camera.updateProjectionMatrix(); 
```

# devexpress - AspxClientPopupControl: CloseButtonClick 和 ValueChanged

> ID：10354576
> 
> 赞同：0
> 
> 时间：2012-04-27T16:36:59.287
> 
> 标签：devexpress

我正在使用 DevExpress v10。我有一个带有 AspxPopupControl 的 ASP.NET 页面。AspxPopupControl 包含几个文本框 AspxTextBox。

我需要以下功能：当用户单击 AspxPopupControl 弹出窗口标题中的关闭按钮时，检查自弹出窗口打开以来 AspxTextBox 字段中是否发生了更改。如果有，确认“您真的要关闭窗口而不保存吗？”

我打算将其实现如下：为 AspxClientTextBox 控件处理客户端事件 ValueChanged。在这样的处理程序中，我可以设置一个标志，然后在关闭事件的客户端处理程序（AspxClientPopupControl）中分析它

但问题是：如果我更改了 AspxTextBox 中的某些内容，然后立即单击关闭按钮，Closing 事件将首先触发，ValueChanged 事件将在关闭后触发！

这不允许我做我想做的事。

这里有什么解决办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T03:39:52.640

该事件接收一个[ASPxClientPopupWindowCancelEventArgs](http://documentation.devexpress.com/#AspNet/clsDevExpressWebASPxPopupControlScriptsASPxClientPopupWindowCancelEventArgstopic)`Closing`作为参数，您可以使用它来取消关闭事件。

您可以按照以下方式做一些事情：

```
<dx:ASPxPopupcontrol>
    ...
    <ClientSideEvents Closing="popup_Closing" />
</dx:ASPxPopupControl>

<script type="text/javascript">

    function popup_Closing(s,e)
    {
        if (textbox1.GetText() == '' || ...) // or logic here
        {
            e.cancel = !confirm('You've empty fields. Continue anyway?');
        }
    }

</script> 
```

# php - 检测超过两年的浏览器

> ID：10354577
> 
> 赞同：7
> 
> 时间：2012-04-27T16:37:00.597
> 
> 标签：php, javascript, jquery, browser

这是针对拥有约 10,000 名用户的私人公司网站。

我已经看到了一些用于浏览器检测的努力，但随着浏览器的老化，没有人对此有任何想法吗？

相关项目：

*   [http://fresh-browsers.com/en](http://fresh-browsers.com/en)
*   [https://github.com/Groozly/Fresh-Browsers](https://github.com/Groozly/Fresh-Browsers)
*   [http://jquery.thewikies.com/browser/](http://jquery.thewikies.com/browser/)

到目前为止，我一直在考虑客户端，但如果有任何服务器端选项，我也对此持开放态度。

不希望抓取网站。

他们正在寻求升级浏览器，目前希望放弃对超过两年的浏览器的支持

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-27T16:40:00.500

你正在以错误的方式去做这件事。你不支持浏览器，你支持功能。浏览器不会像储藏室里的一罐豆子那样过期。开发时使用特性检测和 polyfills - 这将追溯为 10 年前的浏览器提供支持。

存在各种工具来帮助您支持功能部门可能缺少的浏览器。一种流行的是Modernizr。这不仅公开了一个对象，告诉您有关用户代理功能的 40 多种不同的事情，它还填充 HTML5 标记的子集，并将信息丰富的 CSS 类名附加到您的文档中，让您针对支持或不支持的浏览器进行样式设置'不支持任何给定的功能。

使用像这样的优秀实践最终将为您的客户带来更好的体验，为您的雇主提高声誉，并减少您不得不尝试找出一些神奇的表达方式来通过一些可变的用户代理字符串来确定匿名浏览器的古老性.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-27T16:45:30.310

Firefox 在其用户代理字符串中包含构建日期，但我不确定其他浏览器是否这样做。我认为您最好的选择是使用白名单方法，而不是尝试将未知数量的浏览器列入黑名单。这里有一些网站可以帮助您在用户的浏览器不在您的白名单上时向他们发出警告。

*   [http://code.google.com/p/ie6-upgrade-warning/](http://code.google.com/p/ie6-upgrade-warning/)
*   [http://browser-update.org/](http://browser-update.org/)
*   [http://www.ajaxblender.com/browser-detection.html](http://www.ajaxblender.com/browser-detection.html)
*   [http://www.updateyourbrowser.net/en/](http://www.updateyourbrowser.net/en/)
*   [http://www.privacychoice.org/resources/browser_upgrade](http://www.privacychoice.org/resources/browser_upgrade)

# iphone - 适用于 iOS (iPhone) 的 WindowsAzure ACS 工具包 - Facebook 身份提供者

> ID：10354579
> 
> 赞同：1
> 
> 时间：2012-04-27T16:37:24.170
> 
> 标签：iphone, ios, azure, acs

当 Facebook 是身份提供者时，有没有办法将 Azure 工具包配置为在 iPhone 上使用移动版 Facebook 登录页面？目前该工具包使用桌面网页，这使得它有点无法使用......

**编辑**

[在 Windows Azure 开发论坛上](http://social.msdn.microsoft.com/Forums/en-US/windowsazuredevelopment/thread/0c1ec319-bd69-4b76-a27a-fe708a6f9035)看到同样的错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T22:32:26.260

这实际上与工具包无关，坦率地说，甚至与 FaceBook 登录协议的 ACS 实现无关。对此，我们目前无法控制。并且更愿意继续使用这样的 ACS。

更多的是 Facebook 自己根据用户设备适当地选择要显示的登录页面，就像他们为他们的网站所做的那样。

我会尝试编辑我的 FaceBook 应用程序，并将我的 ACS 命名空间也添加到移动 Web 应用程序部分，以检查结果：

![在此处输入图像描述](../Images/a9cdf40a0ba7151ec44305c471c5a1ca.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T08:04:11.257

Arwind 将在[适用于 iOS 的 Azure ACS 上与您联系 - 是否有任何支持？iPhone 上的 Facebook 问题](http://social.msdn.microsoft.com/Forums/zh/windowsazuredevelopment/thread/0c1ec319-bd69-4b76-a27a-fe708a6f9035)。

请参考上面的线程，看看它是否有帮助。

# python - 如何在保存之前为 django 表单的字段赋值？

> ID：10354580
> 
> 赞同：5
> 
> 时间：2012-04-27T16:37:28.917
> 
> 标签：python, django-models, django-forms

如果我有这样的模型和形式：

```
class Test(models.Model):
    name = Charfield()
    nickname = CharField()

class getNickname(forms.ModelForm):
    class Meta:
    model = Test;
    exclude = ['nickname']; 
```

昵称将是使用函数随机生成的名称。

```
def msms():
    return randomName;

def getNick(request):
    if request.method = 'POST':
        form = getNickname(request.POST);
        if form.is_valid():
            form.nickname = msms(); <--
            nickname = form.save(); 
```

当我调用 msms() 时，它给了我一个错误。使用函数更改“昵称”的正确方法是什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-27T16:42:30.443

在模型上做。

```
 if form.is_valid():
        nickname = form.save(commit=False)
        nickname.nickname = msms()
        nickname.save() 
```

# linux - 使用具有文件夹权限 <= 750 的 WordPress

> ID：10354588
> 
> 赞同：1
> 
> 时间：2012-04-27T16:37:44.870
> 
> 标签：linux, wordpress, permissions, file-permissions

我的网络托管服务提供商每天将所有文件夹权限重置为 750，但几天后，我在 wordpress 中上传图片时遇到了问题。把上传文件夹的权限改成755，一切正常，但第二天就被重置了……提供者告诉我，750应该足够了，我也这么认为，但我不知道该怎么做这个用wordpress...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T18:13:24.840

/wp-content/uploads/ 目录需要可由运行 Web 服务器的用户写入，因为当您上传文件时，是 Web 服务器将新文件写入上传目录。

您需要将上传目录的所有权更改为 Web 服务器用户。用户名和更改所有权的方法在某种程度上取决于服务器设置，但您的网络主机应该能够帮助您在目录上设置正确的所有权。

755 和 750 的区别在于 755 赋予每个人对目录的写权限，而 750 只有所有者和组才有写权限。

[http://codex.wordpress.org/Changing_File_Permissions](http://codex.wordpress.org/Changing_File_Permissions)

# javascript - 新的 sencha touch sdk 工具

> ID：10354592
> 
> 赞同：1
> 
> 时间：2012-04-27T16:37:57.677
> 
> 标签：javascript, sencha-touch, extjs, sencha-touch-2

我有一个使用 sencha touch 2.0 构建的 sencha touch 应用程序。我使用 sencha touch sdk tools-beta(1) 为这个应用程序创建了一个自定义构建。在阅读了 sencha 博客上最近的博文后，我最近下载了 sdk tools-beta3：

[http://www.sencha.com/blog/behind-sencha-command-and-the-build-process](http://www.sencha.com/blog/behind-sencha-command-and-the-build-process)

我想知道的是如何在我当前的应用程序上使用这篇博文中概述的技术？博客文章讨论了微加载器和 HTML 5 应用程序缓存的东西。这些东西对我来说似乎很有趣，我想让它们与我当前的应用程序一起工作，但我对如何做到这一点感到困惑。谁能指出我正确的方向？似乎我必须运行命令：

```
sencha app create MyApp /path/to/www/myapp 
```

然后移植我所有现有的代码。这是使用 beta 3 sdk 工具中发布的新技术的唯一方法吗？任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T16:49:33.140

理解很简单。

整个应用程序是一个 4 步过程。

*   里面`microloader > development.js`

    => 在针对开发环境时使用此文件（相对于 production.js[PROD] 和 testing.js [TEST] 环境）。
    => 将此文件包含在您的文件中`index.html`而不是直接链接到您的主文件始终是一个好习惯`app.js`

*   然后，在你的`app.json`文件中，

    => 可以在`app.json`文件中找到有关应用程序结构的所有信息。它包括您的 javascript 文件的所有路径，包括 app.js（主启动应用程序文件）以及样式表。

*   `App.js`

    => 这是您的应用程序中最重要的 js 文件。它就像您的应用程序的启动器。这是文件，其中在`launch( )`函数中，您提到了您的第一个主视图。

*   确保您的应用程序遵循正确的 MVC 结构并且所有文件都已正确配置。

# mysql - 如何对我在 Wordpress 数据库中创建的自定义表进行 SQL 注入证明调用？

> ID：10354593
> 
> 赞同：1
> 
> 时间：2012-04-27T16:37:58.630
> 
> 标签：mysql, database, wordpress, pagination

所以这就是我想要完成的事情：过去我曾多次使用 SQL，但它总是使用冷融合，从来没有使用 PHP。我已经查看了进行 sql 查询的语法并提出了这么多（我相信使用 prepare 有助于防止 sql 注入）。我的总体目标是设置一个页面，以便从具有与类别表对应的 cat_id 的珠宝表中提取所有行。我只是不确定我是否正确启动了这个。珠宝表有 4 个字段（id、cat id、name 和 image）

```
<?php

 $categorys = $wpdb->get_results ( $wpdb->prepare("SELECT id FROM $wpdb->categories
        WHERE name = '(the_slug())'") );

    $jewelrys = $wpdb->get_results( $wpdb->prepare("SELECT * FROM $wpdb->jewelry
        WHERE post_status = 'publish'
        AND cat_id = $categorys->id ") );

    foreach ($jewelrys as $jewelry) {
    echo '<div id="jBox"><a href="/wp-includes/images/jewelryImages/' . $jewelry->image . '"><img src="/wp-includes/images/jewelryImages/' . $jewelry->image . '" /><br />' . $jewelry->name . '</div>';
    }
?> 
```

此外，我希望添加分页，每页仅显示 9 个。非常感谢任何提示或指导 =)

更新：我刚刚用一个简单的 echo 语句测试了这个类别，看看它是否拉了任何东西，但它没有，这是编码错误吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T16:41:11.817

为避免 SQL 注入，请使用准备好的语句 - 这样您就可以将变量项作为参数传递给 MySQL（它知道不会对 SQL 进行评估），而不是将它们作为 SQL 命令的一部分。

请参阅[如何防止 PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/best-way-to-stop-sql-injection-in-php)

要实现分页，您需要查看 MySQL 的`LIMIT`子句 - 例如

```
SELECT ... LIMIT  0,9;  -- get 9 records starting from record 0
SELECT ... LIMIT  9,9;  -- get 9 records starting from record 9
SELECT ... LIMIT 18,9;  -- get 9 records starting from record 18
-- etc 
```

# tsql - SQL 嵌套游标的替代方案

> ID：10354594
> 
> 赞同：0
> 
> 时间：2012-04-27T16:38:03.597
> 
> 标签：tsql, cursor, sql-server-2000

我创建了嵌套游标，它基本上将一个表的列值与另一个表的列值进行比较并返回最接近的匹配项。

表格的内容是：

（ColumnName 和 Values 如下） 表 A

```
**Names**
MandarinOrange
SweetApple
SourApple
AppleThatTasteslikeGrapes 
```

表 B

```
**Names**
PlainOrange
SourOrange
Grapple
.
.
. 
```

因此 Cursor1（外部光标）从 table1 中获取每个名称，并与 Table2 中的所有名称进行比较并返回最接近的匹配项。Cursor 2（内部）是检索表 2 中的名称

我想看看，是否有办法使用游标实现相同的避免（因为它太慢了）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T11:08:25.550

避免使用游标始终是一种更好的做法，在您的情况下，我认为它也是可以实现的。它的关键是您为了评估比较结果而执行的计算。

一种解决方案是创建一个函数，接收两个字符串并返回一个 1/0 值作为比较结果。然后您可以调用该函数作为 SELECT 语句的一部分并保存游标迭代。

以下是此类函数的示例：

```
CREATE FUNCTION fn_Compare
(
    @firstValue     varchar(50),
    @secondValue    varchar(50)
)
RETURNS bit
AS
BEGIN
    DECLARE @Result bit
    SET @Result = 0 --False by default

    --!Here goes your specific logic for comparing string!  
    IF @firstValue = @secondValue
        SET @Result = 1

    RETURN @Result

END
GO

--Use it in a sentance
SELECT dbo.fn_Compare('TEST', 'TEST') AS Match --True
SELECT dbo.fn_Compare('TEST', 'TEST2') AS Match --False

--Use it in a query
SELECT 
    name,
    name,
    dbo.fn_Compare(name, name) AS Match
FROM sysobjects
WHERE 
    Type = 'u'

--Cleanup
DROP FUNCTION fn_Compare 
```

我希望这有帮助。

# javascript - 脚本执行两次，但时间戳相同

> ID：10354596
> 
> 赞同：1
> 
> 时间：2012-04-27T16:38:11.927
> 
> 标签：javascript, jquery, ajax

我遇到了关于使用 Ajax 加载的页面的问题。加载页面的 javascript 以某种方式执行两次。

这是加载页面的方式。

```
$(this).html("<img src='loader.gif' />").load(page, parameters, function(response){
$(".dynamic_load").html(response).show();
); 
```

这是javascript：

```
 $(document).ready(function(){
 alert("<?=time()?>");
}); 
```

该脚本会提醒两个相同的值。

有没有人遇到过类似的问题？

* * *

解决了：

问题是不必要的 $(".dynamic_load").html(response)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T16:40:42.857

因为您要嵌入 PHP 生成的时间值。该值作为固定值发送到您的客户端浏览器，例如您的页面源具有

```
alert("123456789"); 
```

在其中，它在页面的生命周期内永远不会改变。

# android - 具有多个系列的 Android 绘图条形图

> ID：10354597
> 
> 赞同：2
> 
> 时间：2012-04-27T16:38:12.887
> 
> 标签：android, plot, bar-chart

我已经使用 Android plot 几个星期了。然而，有一件事我永远无法理解，我想知道是否有善良的灵魂可以提供帮助。

我目前有两个系列的条形图数据正在显示。问题是 Android Plot 将它们相互叠加，即第一系列在第二系列之上。麻烦的是，当第二系列小于第一系列时，您永远看不到它，因为它隐藏在第一系列栏后面。

我的第一个操作是将条形的不透明度设置为 50%。这是可行的，但是，结果是条形图显示四种不同的颜色，因为一个条形的颜色可以覆盖在另一个上。

所以

1) 有没有办法在每根柱子的基础上更改柱子的 Z 顺序，以确保在顶部绘制最低值？

或者

2）有没有办法将每个系列偏移到两个系列可以并排显示？

谢谢阅读。我对此表示怀疑，正如我从堆栈溢出中看到的那样，许多与 Android 情节有关的问题并没有得到经常或很好的回答。PS：作者的网站目前已关闭。

# jquery - 你在哪里运行 openid 选择器 generate-sprite.js

> ID：10354598
> 
> 赞同：0
> 
> 时间：2012-04-27T16:38:13.950
> 
> 标签：jquery, openid, dotnetopenauth

ASP.NET MVC3 Razor 项目

尝试使用[http://weblogs.asp.net/haithamkhedre/archive/2011/03/13/openid-authentication-with-asp-net-mvc3-dotnetopenauth-and-openid-selector.aspx实现 OpenID](http://weblogs.asp.net/haithamkhedre/archive/2011/03/13/openid-authentication-with-asp-net-mvc3-dotnetopenauth-and-openid-selector.aspx)

我已将 openid-en.js 脚本编辑为：

```
var providers_large = {
  myopenid: {
    name: 'MyOpenID',
    label: 'Enter your MyOpenID username.',
    url: 'http://{username}.myopenid.com/'
  },
  openid: {
    name: 'OpenID',
    label: 'Enter your OpenID.',
    url: null
  }
}; 
```

删除所有对 Google 的引用。我还删除了 var providers_small 部分并在 open-jqeury.js 中对其进行了引用。

这是我的 LogOn.cshtml 中的表单

```
<form action="Authenticate?ReturnUrl=@HttpUtility.UrlEncode(Request.QueryString["ReturnUrl"])" method="post" id="openid_form">
<input type="hidden" name="action" value="verify" />
<div>
    <fieldset>
        <legend>Agency use only</legend>
        <div class="openid_choice">
            <p>
                Please click your account provider:</p>
            <div id="openid_btns">
            </div>
        </div>
        <div id="openid_input_area">
            @Html.TextBox("openid_identifier")
            <input type="submit" value="Log On" />
        </div> 
```

问题是，无论我做什么，Google 都会显示为第一个提供者，而且很多时候都不会列出 MyOpenID 提供者（雅虎有时也会出现）。我尝试删除 cookie 和历史记录（从 IE 并在 AppData\Roaming...\Cookies 子文件夹、AppData\Local\ 等中手动删除，重新启动 Visual Studio，重新启动计算机等。我只希望 MyOpenID 提供程序是显示。我猜 openid-en.js 已保存在我找不到的地方。我已经在整个计算机上搜索了该文件并删除了临时文件夹中的所有文件。

任何帮助，将不胜感激。

经过进一步的故障排除，我发现我可以让它只使用 MyOpenID。问题出在显示的提供程序图标中。它们总是按顺序显示；Google、Yahoo、Aol 然后它将显示 MyOpenID。因此，即使我只在 provider_large 代码块中列出了 MyOpenID，它也会将 Google 图标放在选择框上。单击 Google 图标将显示 MyOpenId，因此它是功能性的，但显然会让用户感到非常困惑。问题出在 open-jquery.js 中的这个代码块中

```
getBoxHTML : function(box_id, provider, box_size, index) {
        if (this.no_sprite) {
            var image_ext = box_size == 'small' ? '.ico.gif' : '.gif';
            return '<a title="' + this.image_title.replace('{provider}', provider["name"]) + '" href="javascript:openid.signin(\'' + box_id + '\');"'
                    + ' style="background: #FFF url(' + this.img_path + '../images.' + box_size + '/' + box_id + image_ext + ') no-repeat center center" '
                    + 'class="' + box_id + ' openid_' + box_size + '_btn"></a>';
        }
        var x = box_size == 'small' ? -index * 24 : -index * 100;
        var y = box_size == 'small' ? -60 : 0;
        return '<a title="' + this.image_title.replace('{provider}', provider["name"]) + '" href="javascript:openid.signin(\'' + box_id + '\');"'
                + ' style="background: #FFF url(' + this.img_path + 'openid-providers-' + this.sprite + '.png); background-position: ' + x + 'px ' + y + 'px" '
                + 'class="' + box_id + ' openid_' + box_size + '_btn"></a>';
    }, 
```

如果我删除第二个 ---'" href="javascript:openid.signin(\"'--- 选择块是空白的，但仍然指向 MyOpenID，它会破坏功能，尽管单击选择框不会执行任何操作.如果我删除第一个 openid.signin 行为不会改变。有人知道如何修改此代码块，以便在不破坏功能的情况下显示正确的图标吗？

深入挖掘，发现 Opened-jquery.js 从opened-providers-en.png 中提取了provider 图像。当您编辑 openid-en.js providers_large 时，您必须更新 opens-providers-en.png。你可以通过运行 generate-sprite.js 来实现，它是 openid select 的一部分，需要 ImageMagick。安装了这两个，运行 generate-sprite.js 时，我收到“Microsoft JScript 运行时错误：'WScript' 未定义”错误。目前尚不清楚我如何运行 generate-sprite.js。如果我将它作为脚本包含在我的项目中，我会在 generate-sprite.js 的这部分代码中收到“Microsoft JScript 运行时错误：'WScript' is undefined”错误

```
var locale = 'en';
if (WScript.Arguments.length == 0) {
    // assuming english locale
} else {
    locale = WScript.Arguments(0);
} 
```

你如何运行 generate-sprite.js 脚本？

任何 javascript 大师都可以告诉我如何在我的 Win7 和 VS2010 Express 设置中执行此操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T06:16:19.687

回答

将 openid-selector 安装到文件夹中，并根据自述文件编辑 generate-sprite.js。然后从该文件夹中的命令行运行 wscript generate-sprite.exe。它将生成一个新的 openid-provider-en.png。我将它复制到我的图像文件夹中，MyOpenID 选择框有 MyOpenId 图标并将我连接到 MyOpenId 登录。

另请参阅[WScript 未定义](https://stackoverflow.com/questions/4426651/wscript-is-undefined)

# sql - Oracle 生成 IW 周日期列表

> ID：10354600
> 
> 赞同：2
> 
> 时间：2012-04-27T16:38:21.380
> 
> 标签：sql, oracle, optimization

目标：根据当前日期输出给定时间范围内的 IW 标准周日期列表。

所需输出：当前日期 = 2012 年 4 月 27 日，过去 7 个 IW 周日期列表

![在此处输入图像描述](../Images/3da22aa2dab066888503386cd02cd938.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-27T16:44:29.217

试试这个：

```
 SELECT TRUNC(SYSDATE - (LEVEL * 7), 'IW') TheDate
      FROM dual
   CONNECT BY LEVEL <= 7 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T16:40:59.897

目前我正在使用此代码生成列表。我很好奇是否有更好的解决方案。但想为可能正在寻找的任何人提供此解决方案。

```
SELECT DISTINCT
  TRUNC(sysdate-(rownum+1),'iw') IW_week,
  TO_CHAR(TRUNC(sysdate-(rownum+1),'iw'),'iw') AS week_num
FROM dual
  CONNECT BY level <= 49
ORDER BY TRUNC(sysdate-(rownum+1),'iw'); 
```

电流输出：

![在此处输入图像描述](../Images/7232c9cb35b0a8c31bc0afea0c10e6b3.png)

# java - 如何使用 ruby 获取 java 输出

> ID：10354602
> 
> 赞同：2
> 
> 时间：2012-04-27T16:38:39.930
> 
> 标签：java, ruby-on-rails, ruby

我目前正在编写一个需要 java jar 输出的 ruby​​ 应用程序。

我目前无法使用 open3 从 java 命令获得任何输出。

但是，我已经使用“ls”成功测试了以下 ruby​​ 代码。

```
require 'open3'
 Open3.popen3('java -version') do |stdrin, stdout, stderr|
   @output = stdout.read
 end 
```

我也尝试过使用 java 的绝对路径：'/opt/java/jre/bin/java'，但没有成功。

先感谢您

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T16:41:52.503

`java -version`写入 STDERR，因此以下应该有效：

```
@output = stderr.read 
```

在 Linux 上，您可以通过抑制 STDERR 或 STDOUT 来检查输出所在的 shell：

```
java -version >/dev/null 
```

仍然打印信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T16:47:49.933

你需要open3吗？在 Ruby 1.9 中，我会这样做：

```
pipe = IO.popen( [ '/path/to/java', '-jar', '/path/to/jarfile.jar',
                 {SDTERR=>STDOUT} ]
pipe.close_write
puts pipe.readlines 
```

但是运行 Java 程序（例如，设置 CLASSPATH）通常还有很多工作要做；所以你最好运行一个运行 Java 程序的 shell 脚本。

# ruby-on-rails - 无法在选择表单中找出 Has_many

> ID：10354605
> 
> 赞同：0
> 
> 时间：2012-04-27T16:38:43.310
> 
> 标签：ruby-on-rails, ruby-on-rails-3, has-many

我正在尝试创建一个简单的 has_many 关系，然后使用表单进行更新。在此先感谢您的帮助。

楷模

```
class Position < ActiveRecord::Base
  #position attributes
  has_many :educations, :foreign_key => "position_id"

class Education < ActiveRecord::Base
  belongs_to :position 

  EDUCATION_CHOICES = ([["Undergrad", "0"],["Master", 1],["PHD", 2]]) 
```

教育数据模型有 PK (auto)、position_id、education_value 和时间戳。education_value 用于存储来自 EDUCATION_CHOICES 的值

```
startupfeeder_dev=# 从教育中选择 *；
 编号 | position_id | 教育价值 | created_at | 更新时间         
----+--------------+-----------------+------------- ---------------+----------------
  3 | 11 | 1 | 2012-04-27 08:26:28.077517 | 2012-04-27 16:27:50.330082
  1 | 12 | 1 | 2012-04-27 00:40:22.868336 | 2012-04-27 16:30:07.123653
  2 | 12 | 2 | 2012-04-27 00:45:06.613306 | 2012-04-27 16:30:07.127601
(3 行)

```

形式：

```
 <%= f.select(:education_ids, Education::EDUCATION_CHOICES,{ :prompt => "Please select"},
    { :multiple => true, :size => 5 }) %> 
```

位置控制器：

```
@position = Position.new(params[:position]) 
```

标准，尚未添加任何内容。

我手动添加了一些数据，结果很好。

但是更新和创建没有正确映射。

这是我在日志中得到的：

```
Processing by PositionsController#create as HTML 
```

参数：{"position"=>{"title"=>"test13", "education_ids"=>["", "1", "2"], "description"=>"test13"}, "commit"= >“创建职位”，“authenticity_token”=>“XZRsnWTKkpprCOfmekOuXdPFKbZea1bfckCsLgG3/go=”，“utf8”=>“\342\234\223”}教育负载（0.9ms）选择“教育”。*从“教育”WHERE“教育"."id" IN (1, 2)

我认为我的问题出在我拥有的 f.select 中：education_ids，它应该映射到education_values。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T17:09:13.613

我看不到特定的错误。没有必要用 来定义 foreign_key `:foreign_key => "position_id"`，但这并没有什么坏处。`"education_ids"=>["", "1", "2"]`我只是想知道如果您的表单中只有一个选择框，您的日志 ( ) 中如何可以有多个 ID ？如果您想为一个“职位”分配多个“教育”，您可能需要查看有关[通过复选框更新](http://railscasts.com/episodes/52-update-through-checkboxes)的 railscasts 。关于[rails form helpers](http://guides.rubyonrails.org/form_helpers.html)的指南也可能提供一些有价值的提示。数组中传递的第一个 id`["", "1", "2"]`为空，这可能会导致问题。

# opencv - 如何使用 Kinect 在 OpenCV 中获取深度值然后转换为毫米？

> ID：10354609
> 
> 赞同：2
> 
> 时间：2012-04-27T16:39:15.797
> 
> 标签：opencv, kinect, depth, openni

我有 VS2010 运行带有 kniect 的 OpenCV 3.2.1。

我正在使用[这里的教程](http://opencv.itseez.com/doc/user_guide/ug_highgui.html?highlight=kinect "这里")

```
int main( int argc, char* argv[] ){

VideoCapture capture(CV_CAP_OPENNI); // or CV_CAP_OPENNI
for(;;)
{
    Mat depthMap;
    Mat bgrImage;

    capture.grab();

    capture.retrieve( depthMap, CV_CAP_OPENNI_DEPTH_MAP ); // Depth values in mm (CV_16UC1)
    capture.retrieve( bgrImage, CV_CAP_OPENNI_BGR_IMAGE );

    cout << "rows: " << depthMap.rows << " cols: " << depthMap.cols << endl;
    cout << "depth: " << depthMap.at<int>(0,0) << endl;

    imshow("RGB image", bgrImage);

    if( waitKey( 30 ) >= 0 )
        break;
}h
return 0; 
```

运行代码后，我得到以下结果：

靠近墙壁约一米远：

```
rows: 480 cols: 640
depth: 1157
rows: 480 cols: 640
depth: 1157
rows: 480 cols: 640
depth: 1157
rows: 480 cols: 640
depth: 1157 
```

（Kinect 对着墙，一米多远）

```
rows: 480 cols: 640
depth: 83690629
rows: 480 cols: 640
depth: 83690629
rows: 480 cols: 640
depth: 83690629
rows: 480 cols: 640
depth: 83690629
rows: 480 cols: 640
depth: 83690629 
```

有人告诉我这些值实际上是两个像素？我真的不明白。

所以这是我到目前为止的理解：

我抓取了一个深度帧并将其存储在一个名为 depthMap 的矩阵中。矩阵的大小现在是 640*480。我正在使用代码 depthMap.at(0,0) 从第 0 行第 0 列中获取第一个深度值。但我没有返回毫米的结果，而是返回 83690629！这与我期望的最大值 10000 相差甚远

如何将这些值转换为毫米以便我可以使用它们？谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T08:02:00.137

深度图数据是单通道无符号 16 位。尝试替换`int`为`CV_16UC1`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T18:42:37.307

我目前正在使用 kinect (+OpenNi + OpenCv)，我不知道你是否还在为你的问题而苦恼。

我尝试了完全相同的代码，但`depthMap.at<unsigned short>(i,j)`它工作得很好，给了我以毫米为单位的值（当我距离 kinect 50 厘米时为 502）

问题是：我不知道深度值是如何传递的，我在互联网上看到了很多相互矛盾的信息。为什么会是2像素？为什么要转换为十六进制？

我敢肯定，我不是那种难以理解这里的基本原则的人。那么，是否有人有一些关于 kinect 深度的可靠文档？

（我读过关于 stephane Magnenat/Nicolas Burrus 的公式：11 位上的 kinect 原始数据，添加一些几何材料等等……但是 OpenNi 是否已经处理了这个问题并提供了原样的深度？？）

随意发表评论。干杯。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-09-21T09:59:10.377

深度值以 11 位存储，封装在 16 位变量中。因此，当您访问矩阵时，您必须提供正确的元素数据类型。如前所述，您可以使用`depthMap.at<unsigned short>(i,j)`，但必须确保`unsigned short`在所有编译器中都是 16 位长。我更喜欢使用`uint16_t`数据类型。

此外，根据您选择的openni PIXEL_FORMAT，存储在矩阵内的深度值可以是：

*   以毫米为单位 - openni::PIXEL_FORMAT_DEPTH_1_MM
*   十分之一毫米 - openni::PIXEL_FORMAT_DEPTH_100_UM

`void openni::VideoMode::setPixelFormat(PixelFormat)`您可以使用函数 [http://www.openni.ru/wp-content/doxygen/html/classopenni_1_1_video_mode.html#af7fd37bba526fced9c7dbbbf1ab419ea](http://www.openni.ru/wp-content/doxygen/html/classopenni_1_1_video_mode.html#af7fd37bba526fced9c7dbbbf1ab419ea)设置pixel_format

如果您想要更精确的数据 ( `PIXEL_FORMAT_DEPTH_100_UM`) 以毫米为单位，您可以将其转换为浮点数并将其除以 10：

```
uint16_t redValue = depthMap.at<uint16_t>(i,j);
float myVal = ( (float) redValue ) / 10.0f; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-18T23:49:25.683

check for the correct datatype, debug mode and then breakpoint having the matrix, then check the file datatype

# c# - CopyFileEx“参数无效”错误

> ID：10354610
> 
> 赞同：2
> 
> 时间：2012-04-27T16:39:26.647
> 
> 标签：c#, .net, winapi, copy

我正在编写一个（相当）简单的 C# 应用程序，使用 .NET 4 在运行可执行文件之前检查更新。如果网络共享上存在较新版本的 exe，只需将其复制到本地文件夹并启动它。一切都很完美，除了在阅读 File.Copy() 的限制时，我意识到在执行此操作时我将无法显示进度条，而且我看到的所有内容都说使用 CopyFileEx，所以我我试图这样做。

[我使用了此处](https://stackoverflow.com/questions/187768/can-i-show-file-copy-progress-using-fileinfo-copyto-in-net/8341945#8341945)找到的示例代码，它编译得很好（尽管我仍然有点不确定后台工作程序究竟是如何发挥作用的），除非我实际运行应用程序时，CopyFilEx() 方法返回 false，与错误是“参数不正确”。

我的代码（仅相关部分，如果需要我会添加更多）

调用函数：

```
XCopy.Copy(strServerAppPath + strExeName, strLocalAppPath + strExeName, true, true, (o,    pce) =>
{
worker.ReportProgress(pce.ProgressPercentage, strServerAppPath + strExeName);
}); 
```

（源路径计算为“C:\test.txt”，目标路径计算为“C:\test\test.txt”）

上面链接的代码中出现错误的地方：

```
bool result = CopyFileEx(Source, Destination, new CopyProgressRoutine(CopyProgressHandler), IntPtr.Zero, ref IsCancelled, copyFileFlags);
            if (!result)
                throw new Win32Exception(Marshal.GetLastWin32Error()); 
```

在此先感谢您的帮助，我已经为此苦苦挣扎了几个小时...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T16:51:52.383

与其处理所有的编组，不如简单地“滚动你自己的”复印机，逐块进行：

```
private static void CopyFile(string source, string destination, int bytesPerChunk)
{
    int bytesRead = 0;

    using (FileStream fs = new FileStream(source, FileMode.Open, FileAccess.Read))
    {
        using (BinaryReader br = new BinaryReader(fs))
        {
            using (FileStream fsDest = new FileStream(destination, FileMode.Create))
            {
                BinaryWriter bw = new BinaryWriter(fsDest);
                byte[] buffer;

                for (int i = 0; i < fs.Length; i += bytesPerChunk)
                {
                    buffer = br.ReadBytes(bytesPerChunk);
                    bw.Write(buffer);
                    bytesRead += bytesPerChunk;
                    ReportProgress(bytesRead, fs.Length);  //report the progress
                }
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-06-03T21:08:27.720

与其在每次调用时`ReadBytes()`分配一个新的`byte[]`缓冲区数组的调用不同，不如分配一个缓冲区（例如大小为 64KB）并调用`Read(buf, 0, buf.Length)`，它将最多读取`buf.Length`字节到数组中，然后返回实际读取的字节数。然后为每次读取重新使用相同的缓冲区数组（在将其内容写入目标流之后）。这样就不必为每个读/写操作重新分配一个新的缓冲区。

**例子**

例如，流复制方法的内部循环看起来像这样：

```
byte[]  buf;

// Allocate an I/O data buffer
buf = new byte[64*1024];

// Copy the contents of the input stream to the output stream
for (;;)
{
    int     len;

    // Read a block of data from the input stream
    len = inp.ReadBytes(buf, 0, buf.Length);
    if (len <= 0)
        break;

    // Write the data to the output stream
    outp.Write(buf, 0, len);
} 
```

循环从输入流中读取多达 64KB 的字节到缓冲区，然后将读取的实际字节数写入输出流。每个读/写操作都使用相同的缓冲区，因此我们不会对缓冲区进行不必要的分配和释放。当读取操作失败时，我们已经到达输入流的末尾，所以我们退出循环。

# ios - 低功耗蓝牙 - 反复更新特征值

> ID：10354613
> 
> 赞同：21
> 
> 时间：2012-04-27T16:39:44.683
> 
> 标签：ios, performance, bluetooth, packet, bluetooth-lowenergy

[**关于电气工程 Stackexchange 的后续问题**](https://electronics.stackexchange.com/questions/30964/improving-throughput-of-a-bluetooth-low-energy-connection)

我想在短时间内重复写入**低功耗蓝牙特性的值（作为一个可能的用例，想象一下鼠标）。**

*   128 位 UUID 的特征是**20 字节**长。因此，它可以写在单个 Low Energy 事务中。
*   **写入以 50 Hz 的速率发生，即每 20ms**写入一次。
*   因此，写入20 * 50 * 8 = **8 kbit/s 。**
*   我正在使用**无响应的****命令**/写入模式来写入特征。因此，属性层上不会发生任何确认。
***   未连接其他蓝牙或蓝牙低功耗设备。没有通过 WLAN 执行任何操作。在测试期间不会读取或写入其他特征。**

 **我通过从 iPhone 4S 发送包含序列号的数据包来测试程序。每发送一个数据包后，序列号就加一。

在接收端，使用包含[CSR1000](http://www.csr.com/products/45/csr-energy) BLE 芯片的可编程开发板接收数据包并将接收到的序列号打印到串行连接。

**我的问题如下：**

*   一段时间后，数据包开始被丢弃。前约 100 个数据包在 50 Hz 下工作正常。从那时起，数据包开始被丢弃。

    ```
     0x00 - 0x46   received
                0x47, 0x48   missing
    0x49, 0x4a, 0x4b, 0x4c   received
                      0x4d   missing
    0x4e, 0x4f, 0x50, 0x51   received
                      0x52   missing
    0x53, 0x54, 0x55, 0x56   received
                      0x57   missing
    ... 
    ```

    大多数情况下，一包四个数据包可以很好地传输（很少，只有 2 个数据包）。然后，1-7 个数据包丢失。

    当我减小特征值大小时，问题仍然存在。

    当我以 100Hz 而不是 50Hz 写入时，情况是一样的 - 只是在大约 35 个数据包之后开始发生丢包，并且在四个数据包的成功传输之间丢弃了 5-7 个数据包。

    对于丢失的数据包，无论写入频率如何，最终的传输速率约为 5 kbit/s。这显然低于蓝牙低功耗技术上应该可行的约 305 kbit/s。

*   当我从开发板向 iPhone 4S 发送数据包时，问题也出现在相反的方向。同样，5 kbit/s 是我得到的最大值。通知机制用于这种情况。同样，属性层上不会发生任何确认。

*   当我尝试同时向两个方向发送时，事情开始恶化到我必须重置开发板和 iPhone 4S 的地步。

**问题：**

*   这可能是开发板上使用的蓝牙低功耗芯片的问题吗？

    如果是，为什么问题也会出现在相反的方向，即 iPhone 充当接收器？

    市面上有支持高频访问特性的开发板吗？

*   问题的根源可能是什么？

    除了假设之外，还请尝试参考蓝牙规范/演示幻灯片/文章的部分内容。

市场上有蓝牙低功耗鼠标。鼠标的典型轮询速率为 125 Hz，并且必须至少发送两个 16 字节的值以及每个滴答的额外 HID 开销。因此，我的问题的解决方案应该是可用的。

**更新**

*LE 连接完成事件*在*蓝牙规范版本 4.0 Vol 2 Part E 第 7.7.65.1 节中进行了*描述。我收到以下不同连接参数的值：

```
Parameter               Value      Description
--------------------------------------------------
Conn_Interval           0x0054     Time =  105 ms
Conn_Latency            0x0000     Time =    0 ms
Supervision_Timeout     0x00fc     Time = 2520 ms
Master_Clock_Accuracy     0x05              50 ppm 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-30T11:29:24.827

发布*连接参数更新*解决了该问题并将吞吐量从 5 kbit/s 提高到**~33 kbit/s**。然而，这仍然低于预期的~305 kbit/s。

```
Conn_Interval = 0x000f = 18.75 ms
Conn_Latency  = 0x0000
Supervision_Timeout = 0x00fc 
```

有什么方法可以达到完整的 ~305 kbit/s？

**[关于电气工程 Stackexchange 的后续问题](https://electronics.stackexchange.com/questions/30964/improving-throughput-of-a-bluetooth-low-energy-connection)**

> 烧掉一个TSI，等一个月就可以得到苹果的回复。
> 
> 基本上，他们说这种行为是在 iOS 5.1 中设计的。这在某种程度上是有道理的，因为他们不希望您的应用程序的性能取决于另一个应用程序是使用蓝牙还是 W​​iFi。
> 
> > 根据工程师的评论 - 在 iOS 5.1 下，在连接间隔期间应该有 6 对通知，即 6*packetSize*1000/interval 。这应该转换为最大约 55kbps（最小间隔为 20 毫秒，数据包大小为 23 字节）。由于 iPhone 和 iPad 都在 BT classic、BT LE 和 WiFi 之间共享天线，我们决定限制每个间隔的对数并设置最小间隔。
> > 
> > iOS LE 被设计为低功耗传输。对于更高的吞吐量，BT 经典是一种更好的传输方法。
> > 
> > 回到我身边——根据上面工程师的评论，如果希望达到 200 kbs 的吞吐量，经典蓝牙就是答案。但是，如果希望在 iPhone 上使用应用程序，我可以理解这不是简单的更改 - 经典 BT 需要 MFI 许可。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T21:12:46.743

主要问题似乎是您正在使用的芯片上的缓冲区问题。来自核心规范，第 3 卷，F 部分，3.3.2：

> 对于没有响应 PDU 的通知，没有流量控制，可以随时发送通知。
> 
> 不需要响应的命令没有任何流控制。注意：服务器可以被命令淹没，更高层的规范可以定义如何防止这种情况发生。
> 
> 接收到但由于缓冲区溢出或其他原因无法处理的命令和通知应被丢弃。因此，这些 PDU 必须被认为是不可靠的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-07-09T20:59:07.587

当数据包被丢弃时，您看到的是由于 iPhone 端（我认为很可能）或主机端的缓冲区溢出。从 iOS 11.2 开始，Apple 提供了一种机制，允许您在写入下一个数据包之前检查缓冲区是否准备好；canSendWriteWithoutResponse：

如果您等到 canSendWriteWithoutResponse 为真后再写入数据包，则保证已将交付放入接收缓冲区，但不保证已处理（未确认）。另一件可能有帮助的事情是协商一个大于 20 的 MTU。Apple 支持 MTU 为 185B，最高为 251（扩展数据长度，即 EDL）。通过将数据包分块为 MTU-3 大小，每个连接间隔的数据包 ==(MTU-3) x 1。@185B MTU，24 ms 连接间隔我的吞吐量约为 48kbps，没有丢包。当从设备向 iPhone 发送数据时，该端的 SDK 将需要等效于“canSendWriteWithoutResponse”，在我使用 SiLabs 硬件/SDK 的情况下，它确实具有例如

```

```
 do {
     result = gecko_cmd_gatt_server_send_characteristic_notification(
              0xFF,
              evt->data.evt_gatt_server_attribute_value.attribute,
              chunk.length,
     [chunk bytes])->result;
 } while(result == bg_err_out_of_memory); 
  //retry until buffer is empty and ready for more 
 //then update the offset
 offset += thisChunkSize; 
```

```

这是来自苹果的视频和 .pdf 文件，解释了不同的 BLE 技术和预期速度。MTU + 连接间隔用于确定最大吞吐量。48kbps 应该很容易实现，96kbps 甚至更高一点是可能的。

**核心蓝牙的新功能**

```
video: https://devstreaming-cdn.apple.com/videos/wwdc/2017/712jqzhsxoww3zn/712/712_hd_whats_new_in_core_bluetooth.mp4?dl=1
pdf: https://devstreaming-cdn.apple.com/videos/wwdc/2017/712jqzhsxoww3zn/712/712_whats_new_in_core_bluetooth.pdf 
```**

# objective-c - 在 UIWebView 委托方法中检测何时离开视图

> ID：10354615
> 
> 赞同：0
> 
> 时间：2012-04-27T16:39:48.090
> 
> 标签：objective-c, xcode, ipad, ios4, uiwebview

我有一个 iPad 应用程序，它使用 UIWebView 在应用程序本身中显示一些 URL。我还使用 SVProgressHUD 控件根据状态在屏幕上显示一些用户警报。

我的问题是我想在显示错误时优雅地处理视图。当调用 UIWebView 错误委托方法时，我向用户显示 SVProgressHUD 的实例，以使用以下命令通知他们错误：

```
-(void)webView:(UIWebView *)webView didFailLoadWithError:(NSError *)error
{

    [SVProgressHUD dismissWithError:@"An Error Has Occurred\nCheck Network Connection." afterDelay:2.0];
{ 
```

除此之外，我还想做点别的。要么从堆栈中弹出视图并将用户带回上一页，要么淡入显示自定义创建的 404 页面的 UIImage。我还没有真正决定。但是，我的问题是如何检测到 SVProgressHUD 的实例已从视图中消失，以便我可以在不重叠的情况下执行下一步？

或者创建某种计时器，以便在显示器上显示 UIImage 或 Label 之前等待几秒钟？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T16:49:33.217

我建议子类化（或者，如果您愿意，直接修改`SVProgressHUD`源），以便在`dismiss`执行该方法时将给定类型的通知（例如，SUVHUDDismissedNotification）发送到通知中心；如果您的 UIWebView 委托注册了此类通知，那么您将完成这个技巧。

这真的是两行代码......

# c++ - 虚函数调用错误的函数，C++和Cocos2dX中的名字完全不同

> ID：10354619
> 
> 赞同：1
> 
> 时间：2012-04-27T16:40:01.990
> 
> 标签：c++, virtual-functions, vtable, cocos2d-x

虽然我看到过多的 Stack Overflow Questions and Answers 虚函数调用类似名称的子/超类函数，但我得到了这个：

```
CCLog("Yay"); //ensure it's called
CCScene * tScene = TitleDescription::scene(); //grab the scene

TitleDescription * t = reinterpret_cast<TitleDescription *>(tScene); //Unsure why this even works when I think about it, a scene is returned but the below call:

t->loadWithDataFrom("Information.xml", "story"); //calls setScaleX on CCObject instead.

CCDirector::sharedDirector()->replaceScene(tScene ); //runs with an empty scene on one condition 
```

使用 loadWithData 加载场景的条件是我将函数设为 void name(types)。我遵循 cocos2d-x 的模式并使用了 virtual，在这种情况下，它调用了 setScaleX，我使用了调试器并进入了它。

我有两个问题。

1）如果 scene() 函数返回一个场景（带有 TitleDescription 类型的子节点），那么这个调用如何运行（当非虚拟并按我想要的方式运行时，例如：调用正确的函数）？

2）当它搞砸时，vTable是否只是指向一个垃圾位置，恰好总是相同的功能？

注意：在 cocos2d（和 X）中，场景是图层的子类，是 CCObject 的子类。CCObject 确实包含被调用的函数，但名称和参数差异很大，我不明白为什么调用名称和参数完全不同的函数。

我对这方面的任何参考资料和良好的文档持开放态度。我怀疑我的演员表（设置为重新解释只是为了强制绕过所有内容），这可能是为什么虚拟函数每次运行都指向同一个函数，包括当我将签名更改为 bool 而不是 void 并清理构建时.

注意：XCode 是我所处的环境。我也不相信它使用 LLVM。我会尝试调整它，看看会发生什么。

像其他人一样，我认为我并不完全理解 vFunctions，尽管我知道抽象类的使用和强制覆盖。（作为具有该功能的第一类，我不明白为什么此时它需要是虚拟的，但由于我正在做的事情，我确实计划在子类中扩展该功能）。

谢谢，史蒂夫·J

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T23:11:41.717

`reinterpret_cast`不会正确地向下转换。请记住，基础子对象可能不在完整对象的开头。

`static_cast`对向上转换、`dynamic_cast`向下转换和交叉转换使用隐式转换 `dynamic_cast`。它们将在需要时包含适当的偏移量，而不仅仅是返回相同的地址`reinterpret_cast`。

而且这些都不会让你在父对象和成员（非基础）子对象之间。

完全避免演员阵容是迄今为止最好的。

# r - 加速嵌套在R中的for循环中的while循环

> ID：10354622
> 
> 赞同：1
> 
> 时间：2012-04-27T16:40:11.453
> 
> 标签：r

在 RI 中有以下示例模块，它重复一个 for 循环`n`时间：

```
function(n){
#inputs - n - number of results required
    #reserve n spaces for results
    r_num_successes <- 1:n

    #start looping n times
    for(i in 1:n){

        #set first uniform "random" deviate equal to 0.05 and number of successes to 0
        current_unif <- 0.05
        num_successes <- 0

        #start while loop that updates current_unif - it runs as long as 
        #current_unif is less than 0.95, increments num_successes each loop
        while(current_unif < 0.95){

            #set current_unif to a uniform random deviate between the
            #existing current_unif and 1
            current_unif <- runif(1,current_unif)
            num_successes <- num_successes + 1
        }

        #set the i-th element of the results vector to that final num_successes
        #generated by the while loop
        r_num_successes[i] <- num_successes
    }

            #output the mean of all the successes
    return(mean(r_num_successes))
} 
```

当`n`变大时，它开始变得非常缓慢。有没有什么好的优化方法？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-27T18:09:17.623

使用纯 R 无法显着提高速度。字节编译会给您带来小的改进，但您需要转向已编译的代码以获得任何显着的速度提升。

更新：这是一个 Rcpp 解决方案，仅适用于 Dirk :)

```
> nCode <- '
+   int N = as<int>(n);
+   std::vector<double> rns;
+ 
+   RNGScope scope;  // Initialize Random number generator
+ 
+   for(int i=0; i<N; i++) {
+     double current_unif = 0.05;
+     double num_successes = 0;
+     while(current_unif < 0.95) {
+       current_unif = ::Rf_runif(current_unif, 1.0);
+       num_successes++;
+     }
+     rns.push_back(num_successes);
+   }
+ 
+   double mean = std::accumulate(rns.begin(), rns.end(), 0.0) / rns.size();
+   return wrap(mean);  // Return to R
+ '
>
> library(inline)
> nFunRcpp <- cxxfunction(signature(n="int"), nCode, plugin="Rcpp")
> library(compiler)
> nFunCmp <- cmpfun(nFun)
> system.time(nFun(1e5))
   user  system elapsed 
  3.100   0.000   3.098 
> system.time(nFunCmp(1e5))
   user  system elapsed 
  2.120   0.000   2.114 
> system.time(nFunRcpp(1e5))
   user  system elapsed 
  0.010   0.000   0.016 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T19:14:52.580

为了完整起见，这是我向@JoshuaUlrich 提出的建议：

```
R> res <- benchmark(nFun(1e5L), nFunCmp(1e5L), nFunRcpp(1e5L), nFun2Rcpp(1e5L),
+                  columns = c("test", "replications", "elapsed", "relative"),
+                  replications=10,
+                  order="relative")
R> print(res)
               test replications elapsed  relative
4 nFun2Rcpp(100000)           10   0.117   1.00000
3  nFunRcpp(100000)           10   0.122   1.04274
2   nFunCmp(100000)           10  13.845 118.33333
1      nFun(100000)           10  23.212 198.39316
R> 
```

nFun2Rcpp 只需添加一行：

```
rns.reserve(N); 
```

并将分配更改为

```
rns[i] = num_successes; 
```

而不是使用`.push_back()`which 使内存分配更有效。

*编辑*结果证明这是不准确的，并且反映了*随机*算法。如果我`set.seed()`为每个添加一个集合，两个 C++ 版本之间的时间是相同的。这里没有可衡量的收益。

# c# - XNA - 分辨率独立的基于瓷砖的游戏

> ID：10354627
> 
> 赞同：2
> 
> 时间：2012-04-27T16:40:30.523
> 
> 标签：c#, xna

我开始学习如何使用 XNA 制作一个简单的基于图块的游戏，但我发现自己遇到了问题。使用 OpenGL，当我定义要绘制的坐标时，例如，一个矩形，这些坐标指的是我创建的视口（正交或透视）。因此，例如，坐标 0,0 的点被放置在屏幕的中心。

使用 XNA，所有尺寸和坐标都以像素表示，所以如果我绘制一个 10x10 的矩形，它将是一个 10 像素 x 10 像素的矩形，原点坐标也是如此。这样，如果我改变分辨率，比例就会改变（在 OpenGL 中，它们没有，都具有相同的大小）。如何在不受像素比例限制的情况下使用 XNA？谁能告诉我我在哪里做错了或者我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T01:57:43.413

我将假设您正在使用[Spritebatch.Draw(Texture2D texture, Vector2 position, Color color)](http://msdn.microsoft.com/en-us/library/ff433991.aspx)绘制代表瓷砖的二维精灵。是的，在这种情况下，“Vector2 位置”确实是窗口空间中的一对坐标。但是在 XNA 中还有许多其他的绘图方法，包括完全按照您在 OpenGL 中所做的操作，即创建多边形并使用世界/视图矩阵对其进行变换。例如，请参阅MSDN 上的[本教程](http://msdn.microsoft.com/en-us/library/bb464051.aspx)。

也就是说，您可以继续使用 Spritebatch 并使用[Spritebatch.Draw(Texture2D texture, Rectangle destinationRectangle, Color color)](http://msdn.microsoft.com/en-us/library/ff433986.aspx) “手动”执行缩放。假设一个 tile 应始终占据屏幕宽度的 5% 和屏幕高度的 6%，那么缩放将如下所示：

```
var destinationRectangle = new Rectangle(
    positionX, 
    positionY, 
    0.05 * screenWidth, 
    0.06 * screenHeight);
spritebatch.Draw(tileTexture, destinationRectangle, Color.White); 
```

您可以使用 GraphicsDevice.Viewport.Width/Height 获取屏幕的宽度和高度。

更一般地说，没有什么可以阻止您缩放坐标，但是您认为使用[Matrix](http://msdn.microsoft.com/en-us/library/microsoft.xna.framework.matrix_members.aspx)类和 Vector2/3.Transform 方法很合适，无论您是想通过着色器还是在 cpu 上执行计算，甚至通过自定义进行转换线性代数什么的。

# sql - 删除+插入（移动）DB2 OLD TABLE

> ID：10354630
> 
> 赞同：0
> 
> 时间：2012-04-27T16:40:44.657
> 
> 标签：sql, stored-procedures, db2, batch-processing

我有两个表 TARGET 和 SOURCE。我需要更新 SOURCE 表的行并将这些更新的行插入到 TARGET 表中，然后从 SOURCE 中删除原始行。目前我首先通过 SP 完全更新 SOURCE 表，然后在另一个 SP 中执行移动操作。

```
BEGIN P1:
insert into TARGET(select * from SOURCE where col=someValue)
delete from SOURCE where col=someValue;
END P1 
```

我也尝试过类似的东西

```
insert into TARGET(SELECT * FROM OLD TABLE(DELETE FROM SOURCE WHERE col=someValue)) 
```

但这在 SP 中不起作用。

我认为这是常见的场景，例如历史/存档表，并且必须在 DB2 中有解决方案。谁能告诉我如何在不影响性能的情况下实现这一目标？我的意思是SP不应该花很长时间来运行。我也可以删除多余的更新 SP。相反，我可以直接将更新的行插入 TARGET 并从 SOURCE 中删除相应的行吗？此外，我被建议在单个事务中进行删除和插入操作。这会导致任何性能损失吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T22:19:14.473

如果我正确理解了您的问题，并且这些都是更新，您可以创建 a以将旧行放入审计表中（不过，您可以定义触发器[`TRIGGER`](http://publib.boulder.ibm.com/infocenter/db2luw/v9r7/topic/com.ibm.db2.luw.sql.ref.doc/doc/r0000931.html)的不仅仅是s 。并且也是可触发的）。就像是：`UPDATE``INSERT``DELETE`

```
CREATE TRIGGER AUDIT_SOURCE
 AFTER UPDATE ON SOURCE
 REFERENCING OLD AS O
 FOR EACH ROW
 BEGIN ATOMIC
   INSERT INTO TARGET
     VALUES (O.Col1, O.Col2, ..., O.ColN);
 END 
```

# c++ - 在 C++ 中重载结构

> ID：10354632
> 
> 赞同：1
> 
> 时间：2012-04-27T16:40:47.147
> 
> 标签：c++, inheritance, overloading

我想创建一个非常通用的纯虚拟类 i_BIS_Data 将由唯一的 BIS_Data 类继承。

```
class i_BIS_Data
{
public:

i_BIS_Data(void) { }
virtual ~i_BIS_Data( void ) { }

  virtual void setData(bis_data data) = 0;
}; 
```

我希望 i_BIS_Data 的所有孩子都定义 bis_data 结构，因为它们都会有所不同。我希望我的子类看起来类似于以下内容：

```
class BIS_0192_Aircraft_ID_Data : i_BIS_Data
{
  public:

  struct bis_data
  {
   UInt16  acid; 
   UInt16  parity; 
  };

  void setData(bis_data data){   m_data.parity = data.parity; 
                             m_data.acid   = data.acid; }
} 
```

当我尝试编译使用 BIS_0192_Aircraft_ID_Data 的类时，我收到以下错误：错误 C2061：语法错误：标识符“bis_data”。我相信这是因为我没有在父类中定义 bis_data 。

那么是否可以“重载”结构并允许多个子类定义 bis_data 是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T16:51:00.643

```
 template<typename BIS_DATA_T>
 class i_BIS_Data
 {
      typedef BIS_DATA_T bis_data;
      ...
      virtual void setData(bis_data data) = 0;
 };

 struct bis_0192_data
 {
    UInt16  acid; 
    UInt16  parity; 
 };

 class BIS_0192_Aircraft_ID_Data : public i_BIS_Data<bis_0192_data>
 {
   public:
   void setData(bis_data data){   m_data.parity = data.parity; 
                         m_data.acid   = data.acid; }
 }; 
```

这应该可以，但是`i_BIS_Data<XX>`XX 的不同类型的子类是不兼容的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T16:44:16.030

不。

在 OOP 理论中，函数重载的参数可以是逆变的，返回类型可以是协变的。

在 C++ 中，允许协变返回类型，但参数类型是不变的。

您要求的是参数类型的协方差，这在理论上是错误的，并且在 C++ 中也是不允许的。

我建议您阅读有关 Liskov 替换原则的内容。当您设计具有继承的类层次结构时，它将非常有帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T17:05:06.010

```
class i_BIS_Data
{
  public:

  i_BIS_Data(void) { }
  virtual ~i_BIS_Data( void ) { }

  virtual void setData(void* data) = 0;
};

class BIS_0192_Aircraft_ID_Data : i_BIS_Data
{
  public:

  struct bis_data
  {
   UInt16  acid; 
   UInt16  parity; 
  };

  bis_data m_data;

  void setData(void* data)
  {   
      m_data = *(bis_data*)data;
      // m_data.parity = data.parity; 
      // m_data.acid   = data.acid; 
  }
}; 
```

例子：

```
BIS_0192_Aircraft_ID_Data::bis_data data;

data.acid = 7;
data.parity = 8;

BIS_0192_Aircraft_ID_Data c;

c.setData((void*)&data); 
```

# c++ - 你如何找到你的 linux 机器上安装了哪个版本的 libstdc++ 库？

> ID：10354636
> 
> 赞同：76
> 
> 时间：2012-04-27T16:41:31.093
> 
> 标签：c++, linux, shared-libraries

我找到了以下命令：`strings /usr/lib/libstdc++.so.6 | grep GLIBC`from [here](https://stackoverflow.com/questions/5216399/usr-lib-libstdc-so-6-version-glibcxx-3-4-15-not-found)。它似乎有效，但这是一种临时/启发式方法。

是否有特定的命令可用于查询 C++ 的库版本？还是我找到的方法是可接受的方法？

* * *

## 回答 #1

> 赞同：89
> 
> 时间：2012-04-27T17:28:54.873

要查找正在使用的库，您可以运行

```
 $ /sbin/ldconfig -p | grep stdc++
    libstdc++.so.6 (libc6) => /usr/lib/libstdc++.so.6 
```

libstdc++ 3.4.0 及更高版本的兼容版本列表由提供

```
 $ strings /usr/lib/libstdc++.so.6 | grep LIBCXX
 GLIBCXX_3.4
 GLIBCXX_3.4.1
 GLIBCXX_3.4.2
 ... 
```

对于早期版本，符号`GLIBCPP`已定义。

库的日期戳在宏中定义`__GLIBCXX__`或`__GLIBCPP__`取决于版本：

```
// libdatestamp.cxx
#include <cstdio>

int main(int argc, char* argv[]){
#ifdef __GLIBCPP__
    std::printf("GLIBCPP: %d\n",__GLIBCPP__);
#endif
#ifdef __GLIBCXX__
    std::printf("GLIBCXX: %d\n",__GLIBCXX__);
#endif
   return 0;
}

$ g++ libdatestamp.cxx -o libdatestamp
$ ./libdatestamp
GLIBCXX: 20101208 
```

[文档](http://gcc.gnu.org/onlinedocs/libstdc++/manual/abi.html#abi.versioning)中列出了 libstdc++ 版本的日期戳表：

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-07-28T22:20:49.110

你到底想知道什么？

共享库 soname？这是文件名的一部分`libstdc++.so.6`，或由 显示`readelf -d /usr/lib64/libstdc++.so.6 | grep soname`。

次要修订号？您应该能够通过简单地检查符号链接指向的内容来获得它：

```
$ ls -l  /usr/lib/libstdc++.so.6
lrwxrwxrwx. 1 root root 19 Mar 23 09:43 /usr/lib/libstdc++.so.6 -> libstdc++.so.6.0.16 
```

这告诉你它是 6.0.16，这是版本的第 16`libstdc++.so.6`版，对应于`GLIBCXX_3.4.16`符号版本。

或者你的意思是它来自的版本？它是 GCC 的一部分，所以它与 GCC 的版本相同，所以除非你通过安装不匹配的版本搞砸了你的系统，`g++`你`libstdc++.so`可以从：

```
$ g++ -dumpversion
4.6.3 
```

或者，在大多数发行版上，您可以询问包管理器。在我的 Fedora 主机上

```
$ rpm -q libstdc++
libstdc++-4.6.3-2.fc16.x86_64
libstdc++-4.6.3-2.fc16.i686 
```

正如其他答案所说，您可以通过检查[ABI 文档将发布映射到库版本](http://gcc.gnu.org/onlinedocs/libstdc++/manual/abi.html)

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2012-04-27T19:30:49.823

我倾向于使用的机制是从 libstdc++`readelf -V`转储`.gnu.version`信息，然后是与`GLIBCXX_`提取的最大值匹配的查找表。

```
readelf -sV /usr/lib/libstdc++.so.6 | sed -n 's/.*@@GLIBCXX_//p' | sort -u -V | tail -1 
```

如果您的版本`sort`太旧而无法`-V`选择（按版本号排序），那么您可以使用：

```
tr '.' ' ' | sort -nu -t ' ' -k 1 -k 2 -k 3 -k 4 | tr ' ' '.' 
```

而不是 ,`sort -u -V`按最多 4 个版本数字排序。

一般来说，匹配 ABI 版本应该足够好了。

但是，如果您试图追踪`libstdc++.so.<VERSION>`，您可以使用一些 bash ，例如：

```
file=/usr/lib/libstdc++.so.6
while [ -h $file ]; do file=$(ls -l $file | sed -n 's/.*-> //p'); done
echo ${file#*.so.} 
```

所以对于我的系统来说，这产生了`6.0.10`。

但是，如果您试图让在 systemX 上编译的二进制文件在 systemY 上运行，那么这些事情只会让您到目前为止。在这些情况下，携带用于应用程序的 libstdc++.so 的副本，然后使用运行脚本执行以下操作：

```
export LD_LIBRARY_PATH=<directory of stashed libstdc++.so>
exec application.bin "$@" 
```

通常可以解决 .so 的问题，即盒子上的 .so 与应用程序的版本不兼容。对于更极端的环境差异，我倾向于只添加所有依赖库，直到应用程序正常工作。这是 linux 的等价物，对于 windows，将被视为*dll hell*。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-04-27T16:54:16.087

您可以`g++ --version`结合使用[GCC ABI 文档](http://gcc.gnu.org/onlinedocs/libstdc++/manual/abi.html)来找出答案。

# python - Pygame：绘制单个像素

> ID：10354638
> 
> 赞同：20
> 
> 时间：2012-04-27T16:41:52.747
> 
> 标签：python, pygame

我正在寻找允许我在显示屏上绘制单个像素的方法。例如，当我单击鼠标时，我希望单击像素的位置改变颜色。我知道如何读取鼠标位置，但我找不到简单的像素绘制（有 screen.fill 方法，但它没有按我的意愿工作）。

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-04-27T16:43:29.627

你可以这样做[`surface.set_at()`](http://www.pygame.org/docs/ref/surface.html#Surface.set_at)：

```
surface.set_at((x, y), color) 
```

您还可以使用[`pygame.gfxdraw.pixel()`](http://www.pygame.org/docs/ref/gfxdraw.html#pygame.gfxdraw.pixel)：

```
from pygame import gfxdraw
gfxdraw.pixel(surface, x, y, color) 
```

但是，请注意警告：

> EXPERIMENTAL!：意味着这个 api 可能会改变，或者在以后的 pygame 版本中消失。如果你使用它，你的代码将在下一个 pygame 版本中中断。

你也可以[`surface.fill()`](http://www.pygame.org/docs/ref/surface.html#Surface.fill)用来做这项工作：

```
def pixel(surface, color, pos):
    surface.fill(color, (pos, (1, 1))) 
```

您也可以简单地画一条起点和终点相同的线：

```
def pixel(surface, color, pos):
    pygame.draw.line(surface, color, pos, pos) 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2020-10-28T10:59:37.277

*在Surface*或显示器上绘制点的常用方法是使用 [`pygame.Surface.set_at']：

```
window_surface.set_at((x, y), my_color) 
```

但是，此功能非常缓慢，如果要绘制超过 1 个点，则会导致性能严重不足。

单独设置每个像素的最小示例：`[![](../Images/1046507529a28f50314afc43ea70d681.png) repl.it/@Rabbid76/PyGame-DrawPixel-1](https://repl.it/@Rabbid76/PyGame-DrawPixel-1#main.py)`

[![](../Images/ebf5777929fdc760bc486762e00be593.png)](https://i.stack.imgur.com/OiqGY.png)

```
import pygame

pygame.init()
window = pygame.display.set_mode((300, 300))

run = True
while run:
    for event in pygame.event.get():
        if event.type == pygame.QUIT:
            run = False

    window.fill(0)

    rect = pygame.Rect(window.get_rect().center, (0, 0)).inflate(*([min(window.get_size())//2]*2))

    for x in range(rect.width):
        u = x / (rect.width - 1)
        color = (round(u*255), 0, round((1-u)*255))
        for y in range(rect.height):
            window.set_at((rect.left + x, rect.top + y), color) 

    pygame.display.flip()

pygame.quit()
exit() 
```

* * *

另一种选择是使用[“pygame.PixelArray”](https://www.pygame.org/docs/ref/pixelarray.html)对象。*此对象支持对Surface*对象的直接像素访问。可以直接分配一个*PixelArray像素项。*可以通过订阅访问像素。PixelArray 锁定*Surface*，您必须在[`close()`](https://www.pygame.org/docs/ref/pixelarray.html#pygame.PixelArray.close)更改像素时使用它：

```
pixel_array = pygame.PixelArray(window_surface)

pixel_array[x, y] = my_color
pixel_array[start_x:end_x, start_y:end_y] = my_color

pixel_array.close() 
```

一次设置一行像素的最小示例：`[![](../Images/1046507529a28f50314afc43ea70d681.png) repl.it/@Rabbid76/PyGame-DrawPixel-2](https://repl.it/@Rabbid76/PyGame-DrawPixel-2#main.py)`

[![](../Images/ebf5777929fdc760bc486762e00be593.png)](https://i.stack.imgur.com/OiqGY.png)

```
import pygame

pygame.init()
window = pygame.display.set_mode((300, 300))

run = True
while run:
    for event in pygame.event.get():
        if event.type == pygame.QUIT:
            run = False

    window.fill(0)

    rect = pygame.Rect(window.get_rect().center, (0, 0)).inflate(*([min(window.get_size())//2]*2))

    pixel_array = pygame.PixelArray(window)

    for x in range(rect.width):
        u = x / (rect.width - 1)
        color = (round(u*255), 0, round((1-u)*255))
        pixel_array[rect.left + x, rect.top:rect.bottom] = color 

    pixel_array.close()

    pygame.display.flip()

pygame.quit()
exit() 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2019-09-09T04:57:16.423

对于那些对问题的更现代答案感兴趣的人，您可以使用[pygame.draw.circle()](https://www.pygame.org/docs/ref/draw.html#pygame.draw.circle)在给定位置（或中心）绘制单个像素。

```
pygame.draw.circle(surface, color, center, 0) 
```

该文档特别指出：

> radius (int or float) -- 圆的半径，从中心参数测量，半径为0只会绘制中心像素

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-12-10T09:16:10.657

这样做的一种方法是画一条在同一点凝视和结束的线。

```
pygame.draw.line(surface, (255,255,255), (x,y), (x,y)) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-11-29T16:04:20.667

绘制单个彩色像素

```
def drawPoint(x,y,color):

    s = pygame.Surface((1,1))   # the object surface 1 x 1 pixel (a point!)

    s.fill(color)               # color as (r,g,b); e.g. (100,20,30)

# now get an object 'rectangle' from the object surface and place it at position x,y

    r,r.x,r.y = s.get_rect(),x,y    

    screen.blit(s,r)            # link the object rectangle to the object surface 
```

当然你必须调用： pygame.display.update() 一旦你绘制了你需要的所有点，不要在每个点都调用更新。

# c# - 在 C# 中自定义以下 app.config？

> ID：10354653
> 
> 赞同：2
> 
> 时间：2012-04-27T16:42:42.237
> 
> 标签：c#

我必须通过通用解析器解析几个包含标题的逗号分隔文件。标头数量众多，我需要提供选择少数几个重要标头的能力。

为每种文件类型实现我的通用解析器的具体解析器必须覆盖 onLine(IDictionary|string,string| line) 方法等。此行将标题值映射到行中的相应数据。

我的问题：我现在在我的 app.config 中使用逗号分隔的列表。问题是我的具体解析器将不得不使用实际的标头值作为键。我希望能够引入常量，以便在标题更改的情况下不需要重建。

目前我的 app.config 看起来像这样：

```
 <configSections>
    ...
    <section name="headers" type="System.Configuration.NameValueSectionHandler" />
    ...
  </configSections>
  ...
  <headers>
    ...
    <add key="file1" value="actualheader1,actualheader2,actualheader3" />
    <add key="file2" value="actualheader4,actualheader5,actualheader6" />
    <add key="file3" value="actualheader7,actualheader8,actualheader9" />
    ...
  </headers>
  ... 
```

我需要类似的东西（在标签、键、值方面没有要求，只是试图显示我所追求的逻辑）：

```
 <configSections>
    ...
    <section name="headers" type="?" />
    ...
  </configSections>
  ...
  <headers>
    ...
    <file1>
      <add key="headerconstant1" value="actualheader1" />
      <add key="headerconstant2" value="actualheader2" />
      <add key="headerconstant3" value="actualheader3" />
    </file1>
    <file2>
      <add key="headerconstant4" value="actualheader4" />
      <add key="headerconstant5" value="actualheader5" />
      <add key="headerconstant6" value="actualheader6" />
    </file2>
    <file3>
      <add key="headerconstant7" value="actualheader7" />
      <add key="headerconstant8" value="actualheader8" />
      <add key="headerconstant9" value="actualheader9" />
    </file3>
    ...
  </headers>
  ... 
```

第二个选项将使实际标头值的更改能够在文件中找到而不会影响代码。

我怎样才能做到这一点 ？我有任何快速修复已经实施了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T16:59:46.160

如果您想使用配置来完成此操作，但不希望在配置部分手动编码的学习曲线，请查看[http://csd.codeplex.com/](http://csd.codeplex.com/)以获取 Visual Studio 插件。非常干净且易于理解。

# javascript - 如何手动创建ajax请求？

> ID：10354654
> 
> 赞同：-3
> 
> 时间：2012-04-27T16:42:42.333
> 
> 标签：javascript, ajax, asp.net-mvc

我需要发送请求以采取行动 /Home/Start

元素 id 'js_script' 中的响应集。

我找不到怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T16:55:32.553

如果您想要的只是一个基本请求，那么您可以轻松地完成它，而无需任何具有此处功能的库[http://www.quirksmode.org/js/xmlhttp.html](http://www.quirksmode.org/js/xmlhttp.html)

```
function sendRequest(url,callback,postData) {
    var req = createXMLHTTPObject();
    if (!req) return;
    var method = (postData) ? "POST" : "GET";
    req.open(method,url,true);
    req.setRequestHeader('User-Agent','XMLHTTP/1.0');
    if (postData)
        req.setRequestHeader('Content-type','application/x-www-form-urlencoded');
    req.onreadystatechange = function () {
        if (req.readyState != 4) return;
        if (req.status != 200 && req.status != 304) {
//          alert('HTTP error ' + req.status);
            return;
        }
        callback(req);
    }
    if (req.readyState == 4) return;
    req.send(postData);
}

var XMLHttpFactories = [
    function () {return new XMLHttpRequest()},
    function () {return new ActiveXObject("Msxml2.XMLHTTP")},
    function () {return new ActiveXObject("Msxml3.XMLHTTP")},
    function () {return new ActiveXObject("Microsoft.XMLHTTP")}
];

function createXMLHTTPObject() {
    var xmlhttp = false;
    for (var i=0;i<XMLHttpFactories.length;i++) {
        try {
            xmlhttp = XMLHttpFactories[i]();
        }
        catch (e) {
            continue;
        }
        break;
    }
    return xmlhttp;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T16:57:59.713

我不得不猜测您的意思，但基本上，您使用该[`XMLHttpRequest`对象](http://www.w3.org/TR/XMLHttpRequest/)来执行 ajax 请求。这是微软的一项创新，其他浏览器已经采用，现在正处于标准化过程中。在现代浏览器中看起来像这样：

```
function sendRequest() {
    var request = new XMLHttpRequest();
    request.open('GET', '/Home/Start', false);
    request.onreadystatechange = handleStateChange;
    request.send(null);

    function handleStateChange() {
        if (request.readyState === 4) {
            // The request is complete; did it work?
            if (this.status >= 200 && this.status < 300) {
                // Yes, you can use the data on request.responseText
                // or (for requests with XML replies) request.responseXML

                // In our case, let's say we want to put all of the text
                // into the element with the `id` "js_script":
                var elm = document.getElementById("js_script");
                elm.innerHTML = request.responseText;
            }
        }
    }
} 
```

这显然是相当简化的。在旧浏览器上，您必须围绕创建对象进行一些检查（`new XMLHttpRequest`例如，在 IE7 上不起作用，但在 IE7 上有一些方法可以做到这一点。）

* * *

[在旧浏览器上创建对象的复杂性是我推荐使用任何像样的 JavaScript 库（如jQuery](http://jquery.com)、[Prototype](http://prototypejs.org)、[YUI](http://developer.yahoo.com/yui/)、[Closure](http://code.google.com/closure/library)或[其他任何](http://en.wikipedia.org/wiki/List_of_JavaScript_libraries)一个）的众多原因之一。它们为您消除浏览器差异，添加许多实用功能，让您专注于完成特定任务，而不是担心（比如说）HTTP 状态代码。这并不是说没有图书馆就没有时间和地点——当然有——只是通常情况下，一个人在别人的工作上比完全靠自己更有效率。

# php - 在google中搜索并解析url后如何获取搜索结果页面源？

> ID：10354656
> 
> 赞同：-2
> 
> 时间：2012-04-27T16:42:49.873
> 
> 标签：php, python, ruby

如果我用关键字在谷歌搜索，我会得到很多结果。我需要获取该结果的页面来源。然后我需要解析它以获取实际的 url。我怎样才能做到这一点？

但如果我看到搜索结果页面的页面来源，我看到它只是 javascript。

我需要来自这数千个结果的实际页面源和实际 url/链接。

我无法理解这一点，[（PHP）如何解析谷歌搜索结果中的 URL？](https://stackoverflow.com/questions/4070247/php-how-to-parse-urls-in-google-search-results)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T16:46:14.957

试试这个：[https](https://developers.google.com/custom-search/v1/overview) ://developers.google.com/custom-search/v1/overview 。这是他们的自定义搜索 API。尽可能尝试使用公司提供的 API，而不是抓取他们的页面。

# nhibernate - Web 服务 nHibernate SessionFactory 问题

> ID：10354663
> 
> 赞同：0
> 
> 时间：2012-04-27T16:43:16.817
> 
> 标签：nhibernate, service, web, sessionfactory

我有一个 C# .Net Web 服务。我正在调用一个使用 nHibernate 连接到我的数据库的 dll (C# .Net)。当我调用 dll 时，它会对数据库执行查询并加载父对象“任务”。但是，当 dll 尝试访问子对象“Task.SubTasks”时，会引发以下错误：

```
NHibernate.HibernateException failed to lazily initialize a collection of role:  SubTasks no session or session was closed 
```

我是 nHibernate 的新手，所以不确定我缺少什么代码。

在调用 dll 之前，我是否需要在我的 Web 服务中启动工厂会话？如果是这样，我该怎么做？

编辑：添加了 Web 服务代码和 CreateContainer() 方法代码。此代码在调用 dll 之前被调用

```
 [WebMethod]
    public byte[] GetTaskSubtask (string subtaskId)
    {
        var container = CreateContainer(windsorPath);

        IoC.Initialize(container);
        //DLL CALL
        byte[] theDoc = CommonExport.GetSubtaskDocument(subtaskId);

        return theDoc;

    }

/// <summary>
/// Register the IoC container.
/// </summary>
/// <param name="aWindsorConfig">The path to the windsor configuration 
/// file.</param>
/// <returns>An initialized container.</returns>
protected override IWindsorContainer CreateContainer(
   string aWindsorConfig)
{
    //This method is a workaround.  This method should not be overridden.  
    //This method is overridden because the CreateContainer(string) method 
    //in UnitOfWorkApplication instantiates a RhinoContainer instance that 
    //has a dependency on Binsor.  At the time of writing this the Mammoth 
    //application did not have the libraries needed to resolve the Binsor 
    //dependency.

    IWindsorContainer container = new RhinoContainer();

    container.Register(
       Component.For<IUnitOfWorkFactory>().ImplementedBy
          <NHibernateUnitOfWorkFactory>());
    return container;
} 
```

编辑：添加 DLL 代码和存储库代码...

DLL 代码

```
public static byte[] GetSubtaskDocument(string subtaskId)
{
    BOESubtask task = taskRepo.FindBOESubtaskById(Guid.Parse(subtaskId));

    foreach(subtask st in task.Subtasks) <--this is the line that throws the error
    {
    //do some work
    }

} 
```

任务存储库

```
/// <summary>
/// Queries the database for the Subtasks whose ID matches the 
/// passed in ID.
/// </summary>
/// <param name="aTaskId">The ID to find matching Subtasks 
/// for.</param>
/// <returns>The Subtasks whose ID matches the passed in 
/// ID (or null).</returns>
public Task FindTaskById(Guid aTaskId)
{ 
    var task = new Task();
    using (UnitOfWork.Start())
    {
        task =  FindOne(DetachedCriteria.For<Task>()
                    .Add(Restrictions.Eq("Id", aTaskId)));
        UnitOfWork.Current.Flush();
    }
    return task;
} 
```

子任务的存储库

```
/// <summary>
/// Queries the database for the Subtasks whose ID matches the 
/// passed in ID.
/// </summary>
/// <param name="aBOESubtaskId">The ID to find matching Subtasks 
/// for.</param>
/// <returns>The Subtasks whose ID matches the passed in 
/// ID (or null).</returns>
public Subtask FindBOESubtaskById(Guid aSubtaskId)
{ 
    var subtask = new Subtask();
    using (UnitOfWork.Start())
    {
        subtask =  FindOne(DetachedCriteria.For<Subtask>()
                    .Add(Restrictions.Eq("Id", aSubtaskId)));
        UnitOfWork.Current.Flush();
    }
    return subtask;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T16:59:51.263

您显然已经在启用延迟加载的 NHibernate 数据类之一中映射了一个集合（或者更好：未禁用，因为它是默认行为）。NHibernate 加载实体并为映射的集合创建代理。一旦它们被访问，NHibernate 就会尝试为该集合加载项目。但是如果您在此之前关闭您的 NHibernate 会话，您收到的错误将会发生。您可能正在通过 Web 服务向 Web 服务客户端公开数据对象。在序列化过程中，XmlSerializer 尝试序列化提示 NHibernate 填充它的集合。当会话关闭时，会发生错误。

防止这种情况的两种方法：

*   发送响应后关闭会话

或者

*   为您的收藏禁用延迟加载，以便立即加载它们

上述修改后的补充：

在您的存储库中，您在 using 语句中启动 UnitsOfWork。一旦代码完成，它们就会被处理掉。我不知道 UnitOfWork 的实现，但我认为它控制 NHibernate 会话的生命周期。通过处理 UnitOfWork，您可能会关闭 NHibernate 会话。当您的映射初始化延迟加载的集合时，这些集合尚未填充并且会发生错误。NHibernate 需要加载实体的会话的确切实例来填充延迟初始化的集合。

如果您使用延迟加载并且有一个在响应完成之前关闭会话的存储库，您将遇到这样的问题。一种选择是在请求开始时初始化 UnitOfWork，并在响应完成后关闭它（例如在 Application_BeginRequest 中，在 Global.asax.cs 中的 Application_EndRequest）。这当然意味着将您的存储库紧密集成到 Web 服务中。

无论如何，为单个请求创建 Session 并结合延迟加载是一个坏主意，并且很可能在将来产生类似的问题。如果您无法更改存储库实现，您可能必须禁用延迟加载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T21:10:08.047

使用 Garland 的反馈，我解决了这个问题。我从 DLL 的存储库中删除了 UnitOfWork(s) 代码，并将对 DLL 的 Web 服务调用包装在 UnitOfWork 中。请参阅下面的代码模块：

网络服务

```
[WebMethod]
public byte[] GetSubtaskDocument (string subtaskId)
{
    var container = CreateContainer(windsorString);

    IoC.Initialize(container);

    byte[] theDoc;
    using (UnitOfWork.Start())
    {
        //DLL call
        theDoc = CommonExport.GetSubtaskDocument(subtaskId);
        UnitOfWork.Current.Flush();
    }
    return theDoc;
} 
```

DLL 中的存储库调用

```
public Subtask FindSubtaskById(Guid aSubtaskId)
{ 
    return FindOne(DetachedCriteria.For<Subtask>()
                .Add(Restrictions.Eq("Id", aSubtaskId)));
} 
```

# ant - 其他常春藤代币可用吗？

> ID：10354666
> 
> 赞同：1
> 
> 时间：2012-04-27T16:43:27.510
> 
> 标签：ant, ivy

在指定解析器常春藤模式时有没有办法能够产生以下输出？

```
C:/MyRepository/MyCompany/MyModule/1.2.3/4/ivy.xml 
```

目前，[revision] 令牌解析为完整的 4 位版本号。我希望能够将修订的前三位数字用于模式的一部分，并将最后一位数字用于其下方的子文件夹。这是可能的还是我必须编写自定义的蚂蚁代码来做到这一点？

像这样的东西：

```
<resolvers>
    <filesystem name="myresolver">
        <ivy pattern="${my.dir}/[organisation]/[module]/[shortversion]/[rev]/ivy.xml" />
        <artifact pattern="${my.dir}/[organisation]/[module]/[shortversion]/[rev]/([target])[artifact].[ext]" />
    </filesystem>
</resolvers> 
```

在哪里：

```
${my.dir} = C:/MyRepository/ 
```

常春藤令牌具有以下值：

```
[organisation] = MyCompany
[module] = MyModule
[shortversion] = 1.2.3
[rev] = 4 
```

我意识到我正在编造这些虚构的标记（shortrevision 和 rev），但我想做的是获得修订号部分（主要、次要、构建、修订），以便我可以使用它们模式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T18:34:17.380

ivy 支持可以附加到依赖声明的[额外属性](http://ant.apache.org/ivy/history/latest-milestone/concept.html#extra)，如下所示：

```
<ivy-module version="2.0" xmlns:e="http://ant.apache.org/ivy/extra">
    ..
    <dependency org="MyCompany" name="MyCompany" rev="1.2.3" e:buildnum="4"/> 
```

额外的属性在您的解析器模式中正常使用，如下所示：

```
<resolvers>
    <filesystem name="myresolver">
        <ivy pattern="${my.dir}/[organisation]/[module]/[revision]/[buildnum]/ivy.xml" />
        <artifact pattern="${my.dir}/[organisation]/[module]/[revision]/[buildnum]/[artifact].[ext]" />
    </filesystem>
</resolvers> 
```

# seo - “过滤器”是否应该包含在 sitemaps.xml 中？

> ID：10354670
> 
> 赞同：-1
> 
> 时间：2012-04-27T16:44:03.010
> 
> 标签：seo, indexing, search-engine, sitemap

我有一个条目列表，例如

```
- Video 1
- Video 2
- (...)
- Video 1123 
```

每页显示 20 个，因此页面链接为：

```
?page=1
?page=2
etc 
```

但是，可以应用一些过滤器，例如：

```
- Language
- Length
- Quality
- Category 
```

页面选择器的结果链接是：

```
?page=1&language=es
?page=2&language=es
?page=3&language=es
(...) 
```

对于任何可用的过滤器，依此类推。

我的问题是，考虑到将生成的链接数量，是否应该将所有这些变体过滤器链接包含到 sitemaps.xml 中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T16:47:20.940

站点地图中的链接数量无关紧要，因为只要您正确遵循其格式，搜索引擎就可以很好地支持大型站点地图。

您应该包括所有产生独特内容的 URL。将内容拆分到多个页面也可以，内容的不同翻译也可以。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T16:47:42.477

它是由你决定。当这些结果出现在 Google 中时，我个人感到很恼火。

除了每个站点地图不超过 50,000 个链接外，Google 没有任何限制。

# java - 如何使用 HornetQ 延迟 JMS 消息的传递？

> ID：10354672
> 
> 赞同：7
> 
> 时间：2012-04-27T16:44:14.880
> 
> 标签：java, jboss, jms, hornetq

基本上，我想要 HornetQ 相当于：

```
message.setLongProperty("JMS_JBOSS_SCHEDULED_DELIVERY", System.currentTimeMillis() + processingDelayInMS); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-27T16:46:19.717

使用[HornetQ 预定交付属性](http://docs.jboss.org/hornetq/2.2.5.Final/user-manual/en/html_single/index.html#d0e5312)：“_HQ_SCHED_DELIVERY”（或常量 Message.HDR_SCHEDULED_DELIVERY_TIME）。

# jquery - 在客户端添加数据到 Jqgrid

> ID：10354675
> 
> 赞同：1
> 
> 时间：2012-04-27T16:44:36.637
> 
> 标签：jquery, jquery-plugins, jqgrid, jqgrid-asp.net

我正在使用 Jqgrid 显示一些数据，使用 DataType 作为本地，我不想回发到服务器并返回带有要绑定的数据的 jsonString。我将 Json 字符串传递给客户端，并使用 addRowData 将数据一一添加。如果由于我在每个单元格中拥有的信息而导致数据数量很大，那么用户似乎需要花费大量时间。

```
 for (var i = 0; i < gridData.length; i++)
       jQuery("#jqgInventory").jqGrid('addRowData', i + 1, JSON.parse(gridData[i])); 
```

有没有其他方法可以将数据绑定到 jqgrid，例如只需将 JsonString 作为数据源，它会更快地绑定它或任何其他建议。

注意：使用 DataType 作为 Json 并设置 postUrl 会比上述方法更快。

请帮忙！在此先感谢，阿拉

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T16:50:09.800

这句话直接来自jqGrid文档：“一个存储传递给网格的本地数据的数组。你可以直接指向这个变量，以防你想加载一个数组数据。它可以代替addRowData方法，它在相对大的时候很慢数据”。这正是你所说的。

在这里看到它：[http ://www.trirand.com/jqgridwiki/doku.php?id=wiki:options](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:options)

这是您的工作示例：http: [//jsfiddle.net/yNw3C/649/](http://jsfiddle.net/yNw3C/649/)

您只需输入以下选项：

```
data: my_data 
```

`my_data`信息数组在哪里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T17:20:21.907

我同意 Jeffery_The_Wind 的另一个回答。他不仅写了他推荐的选项的名称：**`data`参数**。重要的是要添加一个应该使用`gridview: true`选项并且不要使用[afterInsertRow](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3aevents#list_of_events)回调。

供理解：使用`addRowData`是填充网格最慢、最无效的方式。最大的问题是，如果您在页面上插入元素或更改元素**，则至少所有现有元素的位置**必须由 Web 浏览器重新计算。您放置在页面上的元素越多，在下一个页面上插入的速度就越慢。

一种主要通过以下两种方式解决问题：

*   一种用于`DocumentFragment`准备 DOM 元素的分离层次结构，然后将片段放在页面上的一个操作中。
*   一种将所有或大部分更改的内容创建为代表 HTML 片段的字符串，并使用`innerHTML`属性将许多元素放在页面上的一个操作中。

jqGrid 使用第二种方法。使用`gridview: true`具有行为很重要。因此，填充本地网格的推荐方法是：

*   数据的使用`datatype: 'local'`和`data`参数。输入参数值的标准格式`data`是包含行项目的数组。每个项目都具有相同的属性，例如 的`name`属性值`colModel`。此外，每个项目都应该具有`id`定义“rowid”的属性 -`<tr>`网格元素（行）的 id。如果您有其他格式的输入数据，则必须使用描述数据格式的对应[localReader](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3aretrieving_data#array_data)参数。
*   指定输入数据的`datatype: 'jsonstring'`和参数的用法。`datastr`参数的值`datastr`可以是 JSON 字符串，也可以是内容相同的 JavaScript 对象。因此，如果您将数据作为对象，则无需使用`JSON.stringify`. 您还可以使用与您可能知道的相同格式的[jsonReader](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3aretrieving_data#json_data)`datatype: 'json'`。

从`data`参数（在 的情况下）和`datatype: 'local'`参数`datastr`（在`datatype: 'jsonstring'``data``datastr`

# jms - 只处理一次消息

> ID：10354676
> 
> 赞同：7
> 
> 时间：2012-04-27T16:44:40.373
> 
> 标签：jms, messaging, esb

请考虑附图中所示的场景：

![多个应用程序的多个实例。](../Images/9aa0d7befa00ae540da4f15f2f38c87a.png)

1.  门户（生产者）将向总线发送一些消息，这些消息必须由多个应用程序（消费者）处理——PAYROLLAPP、HELPDESK 等。
2.  消费者应用程序的多个实例可能正在运行，这些**实例也可以动态添加/删除**
3.  现在，确保**每个应用程序只处理一次消息**至关重要，即如果 PAYROLLAPP -1 处理消息，则 PAYROLLAPP -2 不应该处理它；当然，在上图中，HELPDESK-1 必须对其进行处理。简而言之，在多个实例的情况下，只有一个必须处理消息，一次
4.  当我搜索答案时，大部分内容都是关于创建一个“选择性消费者”——一个基于某种逻辑接受/拒绝消息的消费者——请注意，不能对显示的应用程序进行任何更改/添加/包装图表; 逻辑必须驻留在管理总线的提供程序中的某个位置

请指导一下。

在 Petter 的回答之后添加更多细节：

![我目前的理解和方法](../Images/ef3df5ffd7b3eaacdcf25d04e81ed60c.png)

1.  左侧虚线左侧的项目是“方法” - Pure JMS,ESB,EAI
2.  右虚线右侧的项目是“实现”

**现在，最重要的部分 - 查询：**

1.  无论解决方案如何（纯 JMS、ESB、EAI），是否需要实现水平虚线下方的部分（特定于应用程序的队列）？
2.  ESB（JBoss ESB 等）而不是“纯”JMS（Active MQ 等）的使用如何帮助/阻碍？ESB 是否比“仅限 java”（？）的 JMS 提供任何优势。我很困惑 - 'ESB 或 JMS'，即使在引用了这样的线程之后：[JMS 和 ESB - 它们是如何相关的？](https://stackoverflow.com/questions/5322675/jms-and-esb-how-they-are-related). 它有一个回复说：“JMS 不太适合集成 REST 服务、文件系统、S/FTP、电子邮件、Hessian、SOAP 等，最好使用原生支持这些类型的 ESB 来处理这些服务。例如，如果您有一个进程在午夜转储一个 500MB 的 CSV 文件，并且您希望另一个系统提取该文件、解析 CSV 并导入数据库，这可以通过 ESB 轻松完成 - 而只有JMS 会很糟糕。同样，使用原生支持 HTTP/S 的 ESB 可以更好地集成 REST 服务，以及到多个后端实例的负载平衡/故障转移。” *它只会增加我的困惑！*
3.  使用 EAI 框架（Apache Camel 等）是完全不同于纯 JMS 或 ESB 方法的方法吗？如果是，如何以及有哪些优点/缺点？
4.  有人告诉我，单独使用 ESB 无济于事，需要使用 BPM（或其他什么？）来定义和存储“路由”逻辑——这是真的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T22:19:49.220

我明白了。对于“纯”JMS，这可能有点棘手。

您本质上想要做的是让门户将消息发布到主题，但不让 PAYROLLAPP 订阅该主题（因为他们都会获得消息的副本）。因此，您需要一些逻辑，将消息从主题订阅分发到每个应用程序类型的一个队列。从该队列中，可以使用 JMS 实现正常的负载平衡（竞争消费者模式）。

不同的 JMS 提供者有可以完成这个任务的特殊实现 [ActiveMQ 有它的虚拟目的地](http://activemq.apache.org/virtual-destinations.html)，[WebSphere MQ 有它的服务器端订阅，可以从一个主题订阅到一个队列](http://publib.boulder.ibm.com/infocenter/wmqv7/v7r0/topic/com.ibm.mq.amqnar.doc/ps10120_.htm)。如果您的 JMS 提供者没有任何方法来处理这个问题，您可能需要考虑将一些路由中间件添加到您的拓扑中。Apache Camel 是一个不错的、轻量级的，但还有很多其他的可以在中间设置一些路由而不影响实际应用程序。

> > 更新详细问题

1.  该行下方的队列必须肯定存在（如果您的应用程序使用消息传递）。不应该需要“一些分布逻辑”框。“某些路由逻辑”框可以是 ESB，或者在这种情况下，可以在消息传递服务器中实现，例如具有虚拟目标的 ActiveMQ（或 WebSphere MQ 或 RabbitMQ 等）。

2.  在集成领域有很多流行语。简化（取决于你问谁 - ESB 也可以被视为一种架构模式，但让我们保持简单），ESB 是一个服务器应用程序（或实际上是多个服务器的拓扑），它是集成环境的核心。ESB 服务器只包含逻辑和小消息流，它们从一个应用程序获取消息（文件或其他内容）并将它们路由到许多应用程序，将它们转换为其他格式，加密，从一种传输协议（如 HTTP/SOAP）转换为文件等.

JMS 是一个相当混乱和误用的词。Java 在过去几年中在一定程度上主导了企业消息传递领域，因此 JMS 有时几乎被用作 Messaging 的同义词。然而，消息（或消息队列、异步消息、MOM=面向消息的中间件等）被简单地视为具有中央中继服务器的类似传输协议系列。Is 根本不是 Java 独有的东西。我使用的许多成功的 ESB 设置实际上都利用了消息传递主干

1.  在您的情况下，我不会深入探讨 ESB 和 EAI 软件之间的学术/哲学差异。他们很可能会为您做几乎相同的事情。相反，请查看价格、支持、资源占用、监控、技术等确凿事实。功能、学习曲线等。无论是 Camel/ServiceMix、Mule、JBoss ESB、Microsoft BizTalk、IBM Message Broker、Tibco 等。

2.  哈！可能是推销员？ESB 就可以了。在您的情况下，消息服务器也可以使用，例如已经指出的 ActiveMQ。BPM 套装非常适合编排半自动化业务流程，或者如果集成层中有主要业务逻辑。否则，请避免增加复杂性。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-01T22:35:13.850

> 1.  无论解决方案如何（纯 JMS、ESB、EAI），是否需要实现水平虚线下方的部分（特定于应用程序的队列）？

消费者需要以与您选择的解决方案一起使用的方式实现，但您不必担心为每个消费者创建队列或分配逻辑（假设消费者可以直接从所选技术消费）

> 1.  ESB（JBoss ESB 等）而不是“纯”JMS（Active MQ 等）的使用如何帮助/阻碍？ESB 是否比“仅限 java”（？）的 JMS 提供任何优势。我很困惑 - 'ESB 或 JMS'，即使在引用了这样的线程之后：JMS 和 ESB - 它们是如何相关的？它有一个回复说：“JMS 不太适合集成 REST 服务、文件系统、S/FTP、电子邮件、Hessian、SOAP 等，最好使用原生支持这些类型的 ESB 来处理这些服务。例如，如果您有一个进程在午夜转储一个 500MB 的 CSV 文件，并且您希望另一个系统提取该文件、解析 CSV 并导入数据库，这可以通过 ESB 轻松完成 - 而只有JMS 会很糟糕。同样，集成 REST 服务，使用原生支持 HTTP/S 的 ESB 可以更好地实现负载平衡/故障转移到多个后端实例。” 它只会增加我的困惑！

我的观点是 ESB 会使这个解决方案过于复杂。它（除其他外）旨在帮助与不同技术的集成，但更简单的解决方案也可以做到这一点 - 例如 - Apache Camel 提供了一种使用多种传输（包括 ActiveMQ）进行通信的非常简单的方法。

并非所有 JMS 实现都满足来自其他语言的连接，但 ActiveMQ 确实使用它的 STOMP 连接器。

> 1.  使用 EAI 框架（Apache Camel 等）是完全不同于纯 JMS 或 ESB 方法的方法吗？如果是，如何以及有哪些优点/缺点？

Apache Camel 和 JMS 是互补的技术，JMS 和 ESB 也是如此。Camel (& Spring Integration) 是轻量级、简单和便携的。ESB 的重量级要大得多，通常会导致与 ESB/应用程序服务器的耦合度更高。

> 1.  有人告诉我，单独使用 ESB 无济于事，需要使用 BPM（或其他什么？）来定义和存储“路由”逻辑——这是真的吗？

这取决于您的“路由”逻辑是什么，在我看来您不需要路由逻辑，您只需要保证交付给 1 个工资单消费者和 1 个帮助台消费者。如果您希望根据数据的某些特征选择性地公开数据/调用服务，BPM 会更有用。

我强烈建议阅读[http://activemq.apache.org/virtual-destinations.html](http://activemq.apache.org/virtual-destinations.html)，使用这些你会：

1.  将消息发送到 ActiveMQ 代理，发送到 VirtualTopic，例如 VirtualTopic.X
2.  注册 Payroll 和 Helpdesk 消费者，作为 ActiveMQ 在主题上动态创建的队列上的消费者 - 例如 Consumer.Payroll.VirtualTopic.X。两个 Payroll 消费者都应该使用相同的字符串进行注册。
3.  ActiveMQ 将自动保留一个标记，表示每组消费者尚未消费的内容。这意味着 100% 的消息将由工资单消费者处理，但消息永远不会发送给 > 1 个工资单消费者。
4.  随意添加/删除消费者。

NBI 相信其他产品，例如 Apache QPID 提供类似的功能 - 我只是最了解 ActiveMQ，并且在这种方法上取得了成功

# android - 使用 Android 编程 USB 连接

> ID：10354679
> 
> 赞同：0
> 
> 时间：2012-04-27T16:45:07.550
> 
> 标签：android, android-ndk, connection, usb

我在Andorid上开始了一个项目，但是我对NDK不是很了解。我想根据 USB 端口上的接收消息发送自定义数据。如果手机处于恢复状态，我看到一些应用程序可以在 USB 端口上发送/接收自定义数据。我以前在 Windows 中编写过 USB 连接。但我不知道我应该从哪里开始在android中。是否有任何适用于 android 的 USB 编程文档？如果 NDK 不适合实现这一点，我有哪些选择？应用程序是否特定于设备并不重要。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T17:00:17.313

问题更多在于系统架构和权限，这是 NDK 提供的与 SDK 相比几乎没有的领域。

Android 并不真正支持（直接）自定义使用 USB 端口，至少在设备连接到计算机时（当设备托管 USB 外围设备时有一些最近的选项）。恢复模式下的可能性基本上是无关紧要的，除非您想对设备上运行的 Android 安装进行重大修改。

通常，在设备和主机 PC 之间进行应用程序级通信的唯一实用方法是通过 USB 电缆使用 IP 网络范例。您可以通过在设备上启用 USB 调试并在 PC 上安装大部分 android SDK 或通过启用某些形式的网络共享来实现此目的，这可能会产生一般网络作为副作用。

SDK方式，阅读adb port forwards，包括PC端必须发起连接的限制。

也可以创建自定义驱动程序，让 PC 伪装成 android 附件套件 (ADK) 电路并使用与此相关的 api。

不幸的是，几乎所有这些想法都更适合开发人员/高级用户，而不是一般的消费者应用程序。对于消费类应用，大多数开发者忽略了 USB 线，通过 WIFI 进行 IP 联网，要求用户将设备和 PC 放在同一网络上，或者通过 PC 和设备的移动网络都可见的 Internet 服务器进行代理。

# ruby-on-rails-3 - jquery ui 对话框出现在页面底部

> ID：10354682
> 
> 赞同：1
> 
> 时间：2012-04-27T16:45:26.510
> 
> 标签：ruby-on-rails-3, jquery-ui

相当随机的行为，我正在调用一个模态对话框来显示部分内部。

我正在使用 simple_form + bootstrap 和 jquery-ui。

调用该函数的按钮在视图中有以下代码：

```
<p><%= link_to 'New Boots', new_boot_path, :class => 'btn btn-primary pull-right', :remote => true, :id => 'new_boot_link' %></p> 
```

在我的意见/靴子/新的代码是这样的：

```
<div id="content">
<%= render :partial => 'form' %>
</div> 
```

并在 views/boots/_form 以下

```
<%= simple_form_for(@boot, :html => { :class => 'form-vertical' }, :remote => true) do |f| %>
<fieldset>
    <%= f.input :number %>
    <%= f.input :size, :collection => boot_size_options %>
    <%= f.input :condition, :collection => boot_condition_options %>
    <%= f.input :brand , :collection => boot_brand_options %>
</fieldset>
    <div class="form-actions">
    <%= f.button :submit, :class => 'btn btn-primary' %>
    <%= submit_tag 'Reset', :type => :reset, :class => "btn btn-danger" %>
    </div>
<% end %> 
```

在 application.js 我有以下内容：

```
$(document).ready(function() {

        $('#new_boot_link').click(function(e) {
        var url = $(this).attr('href'); 
        $('#modal').dialog({
                title: "New Boots",     
                draggable: true,
                resizable: false,
                modal: true,
                width:'auto',
                open: function() {
                        return $(this).load(url + ' #content');}
        });
        });
    }); 
```

所以模态应该正常工作，但它出现在屏幕底部，但是如果我关闭它并再次单击按钮，它会显示在中间，就像它应该首先完成的那样。

是css吗？我想也许不是，否则它会继续在同一个地方不断出现......所以我不知道我调用函数的方式是什么？

欢迎提出建议，这是一个非常烦人的故障！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T21:47:23.557

很抱歉之前的错误。不幸的是，我无法亲自重现您的问题。我怀疑这会有所帮助，因为它将转换 DIV 和随叫随到的填充和显示。

```
$(document).ready(function(){
var modal=$('#modal');
$('#new_boot_link').click(function(e) {
  var url = $(this).attr('href'); 
  modal.load(url + ' #content',function(){
    modal.dialog("open");
  });
});
modal.dialog({ autoOpen: false, title: "New Boots", draggable: true,
resizable: false, modal: true, width:'auto'});
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T17:03:59.793

包括：[jQuery 中心](http://andreaslagerkvist.com/jquery/center/)

改成：

```
$(document).ready(function() {

    $('#new_boot_link').click(function(e) {
    var url = $(this).attr('href'); 
    $('#modal').dialog({
            title: "New Boots",     
            draggable: true,
            resizable: false,
            modal: true,
            width:'auto',
            open: function() {
                    return $(this).load(url + ' #content');}
            });
    }).center(false);
}); 
```

这会将您的对话框设置在页面的中间。

如果您有特定的地方要显示对话力：

```
..}).css({position:"relative"}).css("left",null).css("top",null);
// Last too remove value of left and top. Trick with {left:null,top:null} does not work! 
```

# java - 使用扫描仪读取输入语句

> ID：10354684
> 
> 赞同：2
> 
> 时间：2012-04-27T16:45:30.810
> 
> 标签：java, java.util.scanner

我正在编写代码来读取简单的单词语句，例如“一二三”，并将每个单词放入数组 String [] 标记中，我想使用 Scanner 输入语句，但它只读取第一个单词。当我使用 main 方法输入语句时，它运行良好。我能知道我的错误是什么吗？

这是2个代码：

//使用main方法：

```
public class MyLangyage {
    public static void main(String[] args) {
        String statement = "one two three";
        screen(statement);
    }
    public static void screen(String statement) {
        String token[]= statement.split(" ");

        for (int i = 0; i < token.length; i++) {
            System.out.println(token[i]);
        }
    }
} 
```

控制台的结果将是：

*一二三*

//使用扫描仪：

```
import java.util.Scanner;

public class MyLangyage {
    public static void main(String[] args) {
        Scanner scanner = new Scanner(System.in);
        String statement = scanner.next();
        screen(statement);
    }
    public static void screen(String statement) {
        String token[]= statement.split(" ");

        for (int i = 0; i < token.length; i++) {
            System.out.println(token[i]);
        }
    }
} 
```

如果我在控制台写：

*一二三*

然后按回车结果将是：

*一*

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-27T16:48:20.533

您正在使用`scanner.next()`which 获取它读取的下一个单词。如果您想阅读整行然后拆分使用[`scanner.nextLine()`](http://docs.oracle.com/javase/6/docs/api/java/util/Scanner.html#nextLine%28%29)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T16:46:25.693

要么拆分一整行输入，要么使用 Scanner 一次获取一个令牌。不要两者都做。

如果你想从 a 中提取多个单词`Scanner`，那么你将不得不使用`scanner.next()`不止一次——实际上，每个单词一次。

# javascript - 如何使用 jQuery 设置 ajax 帖子的最大执行时间？

> ID：10354685
> 
> 赞同：8
> 
> 时间：2012-04-27T16:45:34.650
> 
> 标签：javascript, ajax, jquery

有没有办法指定 ajax 发布到服务器的最大执行时间，所以如果服务器没有响应，那么继续尝试 10 秒，然后继续执行其余代码？

```
Function doajaxPost(){
    var returned_value="";

    // #############I NEED THIS CODE TO TRY TO POST THE DATA TO THE SERVER AND KEEP
    // #############TRYING FOR 10 SECONDS AND THEN CONTINUE WITH THE REST OF THE CODE.
        jQuery.ajax({
            url: 'ajaxhandler.php',
            success: function (result) {                               
                returned_value=result;
            },
            async: false
        });
    // ###################################################

    alert(returned_value);

    some other code
    .
    .
    .           
 } 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-04-27T16:48:54.997

使用`timeout`：

```
jQuery.ajax({
    url: 'ajaxhandler.php',
    success: function (result) {                               
        returned_value=result;
    },
    timeout: 10000,
    async: false
}); 
```

但是，`alert(returned_value);`将在您调用后立即执行（不会等待调用完成）。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-04-27T16:48:53.630

JQuery API 文档讲述了如何设置“超时”。

[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

虽然这里的其他答案是正确的，但学习自己检查文档比只知道这个答案更有价值。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-04-27T16:48:11.377

您可以为您的 ajax 请求设置超时值。

[超时](http://api.jquery.com/jQuery.ajax/)

> 为请求设置超时（以毫秒为单位）。这将覆盖使用 $.ajaxSetup() 设置的任何全局超时。超时时间从 $.ajax 调用开始；如果其他几个请求正在进行中并且浏览器没有可用的连接，则请求可能会在发送之前超时。在 jQuery 1.4.x 及以下版本中，如果请求超时，XMLHttpRequest 对象将处于无效状态；访问任何对象成员都可能引发异常。仅在 Firefox 3.0+ 中，脚本和 JSONP 请求不能被超时取消；即使脚本在超时期限之后到达，它也会运行。

这是一个例子：

```
$.ajax({
   url: "ajaxhandler.php",
   ...
   timeout: 10000,
   ... 
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-05T05:48:53.560

为请求设置超时（以毫秒为单位）。这将覆盖使用 设置的任何全局超时`$.ajaxSetup()`。超时时间从`$.ajax`拨打电话的那一刻开始；如果有几个其他请求正在进行并且浏览器没有可用的连接，则请求可能会在发送之前超时。在 jQuery 1.4.x 及以下版本中，`XMLHttpRequest`如果请求超时，对象将处于无效状态；访问任何对象成员都可能引发异常。仅在 Firefox 3.0+ 中，脚本和 JSONP 请求不能被超时取消；即使脚本在超时期限之后到达，它也会运行。

# eclipse - 如何在 Eclipse 插件中打印到 Java 堆栈跟踪控制台？

> ID：10354686
> 
> 赞同：0
> 
> 时间：2012-04-27T16:45:40.417
> 
> 标签：eclipse, eclipse-plugin

我正在为 Eclipse 创建一个插件，我想在“Java Stack Trace Console”中打印消息和异常。我正在创建一个新的 MessageConsole 来打印消息，但是异常堆栈跟踪是以纯文本形式打印的，没有指向类和方法的链接。

它是如何工作的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T00:07:53.453

如果在启动配置参数（或命令行）中添加 -consoleLog 参数，则日志记录（写入 {workspace}/.metadata/.log 文件）也将复制到控制台。堆栈跟踪可以从那里导航。

# xslt - 如何从一堆变量中选择最小值？

> ID：10354690
> 
> 赞同：6
> 
> 时间：2012-04-27T16:45:51.573
> 
> 标签：xslt, xslt-1.0, minimum

假设我有变量`$a`, `$b`,`$c`并且`$d`它们都包含数字。我想获得最小（最大）的值。我的典型 XSLT 1.0 方法是

```
<xsl:variable name="minimum">
  <xsl:for-each select="$a | $b | $c | $d">
    <xsl:sort
      select="."
      data-type="number"
      order="ascending" />
    <xsl:if test="position()=1"><xsl:value-of select="." /></xsl:if>
  </xsl:for-each>
</xsl:variable> 
```

但是，我的 xslt **1.0**处理器抱怨

> 运行时错误：文件 stylesheet.xslt 第 106 行元素 for-each
> 'select' 表达式不计算为节点集。

如何计算给定值的最小值（最大值）？

* * *

当然，我可以使用一长串`<xsl:when>`语句并检查所有组合，但我更喜欢更小的解决方案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-28T01:47:10.447

**如果变量具有静态定义的值（不是动态计算的），那么可以使用 XSLT 1.0 完成类似以下的操作**：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output method="text"/>

 <xsl:variable name="vA" select="3"/>
 <xsl:variable name="vB" select="1"/>
 <xsl:variable name="vC" select="9"/>
 <xsl:variable name="vD" select="5"/>

 <xsl:template match="/">
     <xsl:for-each select=
      "document('')/*/xsl:variable
         [contains('|vA|vB|vC|vD|', concat('|', @name, '|'))]
           /@select
      ">
      <xsl:sort data-type="number" order="ascending"/>

      <xsl:if test="position() = 1">
       Smallest: <xsl:value-of select="."/>
      </xsl:if>
      <xsl:if test="position() = last()">
       Largest: <xsl:value-of select="."/>
      </xsl:if>
     </xsl:for-each>
 </xsl:template>
</xsl:stylesheet> 
```

**当将此转换应用于任何 XML 文档（未使用）时，将产生所需的正确结果**：

```
 Smallest: 1
   Largest: 9 
```

* * *

**二、现在，假设变量是动态定义的**。

**我们可以这样做**（但需要`xxx:node-set()`扩展功能）：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:ext="http://exslt.org/common">
 <xsl:output method="text"/>

 <xsl:variable name="vA" select="number(/*/*[3])"/>
 <xsl:variable name="vB" select="number(/*/*[1])"/>
 <xsl:variable name="vC" select="number(/*/*[9])"/>
 <xsl:variable name="vD" select="number(/*/*[5])"/>

 <xsl:template match="/">
     <xsl:variable name="vrtfStore">
       <num><xsl:value-of select="$vA"/></num>
       <num><xsl:value-of select="$vB"/></num>
       <num><xsl:value-of select="$vC"/></num>
       <num><xsl:value-of select="$vD"/></num>
     </xsl:variable>

     <xsl:for-each select="ext:node-set($vrtfStore)/*">
      <xsl:sort data-type="number" order="ascending"/>

      <xsl:if test="position() = 1">
       Smallest: <xsl:value-of select="."/>
      </xsl:if>
      <xsl:if test="position() = last()">
       Largest: <xsl:value-of select="."/>
      </xsl:if>
     </xsl:for-each>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于以下 XML 文档时：**

```
<nums>
  <num>01</num>
  <num>02</num>
  <num>03</num>
  <num>04</num>
  <num>05</num>
  <num>06</num>
  <num>07</num>
  <num>08</num>
  <num>09</num>
  <num>10</num>
</nums> 
```

**产生了想要的正确结果：**

```
 Smallest: 1
   Largest: 9 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-28T02:36:35.110

这个 XSLT 1.0 解决方案使用递归模板来解析一个分隔的值列表，以从列表中返回最小值/最大值。

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="xml" version="1.0" encoding="UTF-8" indent="yes"/>

   <xsl:variable name="a" select="'3'"/>
    <xsl:variable name="b" select="'1'"/>
    <xsl:variable name="c" select="'9'"/>
    <xsl:variable name="d" select="'5'"/>

    <xsl:template match="/">
        <xsl:text>&#xa;Smallest: </xsl:text>
        <xsl:call-template name="min">
            <xsl:with-param name="values" select="concat($a,',',$b,',',$c,',',$d)"/>    
        </xsl:call-template>

        <xsl:text>&#xa;Largest: </xsl:text>
        <xsl:call-template name="max">
            <xsl:with-param name="values" select="concat($a,',',$b,',',$c,',',$d)"/>    
        </xsl:call-template>
    </xsl:template>

    <xsl:template name="min">
        <xsl:param name="values" />
        <xsl:param name="delimiter" select="','"/>
        <xsl:param name="min"/>

        <xsl:variable name="currentValue" >
            <xsl:choose>
                <xsl:when test="contains($values, $delimiter)">
                    <xsl:value-of select="substring-before($values,$delimiter)"/>
                </xsl:when>
                <xsl:otherwise>
                    <xsl:value-of select="$values"/>
                </xsl:otherwise>
            </xsl:choose>
        </xsl:variable>

        <xsl:variable name="minimumValue">
            <xsl:choose>
                <xsl:when test="$min and $min > $currentValue">
                    <xsl:value-of select="$currentValue"/>
                </xsl:when>
                <xsl:when test="$min">
                    <xsl:value-of select="$min"/>
                </xsl:when>
                <xsl:otherwise>
                    <xsl:value-of select="$currentValue" />
                </xsl:otherwise>
            </xsl:choose>
        </xsl:variable>

       <xsl:choose>
            <xsl:when test="substring-after($values,$delimiter)">
                <xsl:call-template name="min">
                    <xsl:with-param name="min" select="$minimumValue" />
                    <xsl:with-param name="values" select="substring-after($values,$delimiter)" />
                    <xsl:with-param name="delimiter" select="$delimiter"/>
                </xsl:call-template>
            </xsl:when>
            <xsl:otherwise>
                <xsl:value-of select="$minimumValue" />
            </xsl:otherwise>
        </xsl:choose>                
    </xsl:template>

    <xsl:template name="max">
        <xsl:param name="values" />
        <xsl:param name="delimiter" select="','"/>
        <xsl:param name="max"/>

        <xsl:variable name="currentValue" >
            <xsl:choose>
                <xsl:when test="contains($values, $delimiter)">
                    <xsl:value-of select="substring-before($values,$delimiter)"/>
                </xsl:when>
                <xsl:otherwise>
                    <xsl:value-of select="$values"/>
                </xsl:otherwise>
            </xsl:choose>
        </xsl:variable>

        <xsl:variable name="maximumValue">
            <xsl:choose>
                <xsl:when test="$max and $currentValue > $max">
                    <xsl:value-of select="$currentValue"/>
                </xsl:when>
                <xsl:when test="$max">
                    <xsl:value-of select="$max"/>
                </xsl:when>
                <xsl:otherwise>
                    <xsl:value-of select="$currentValue" />
                </xsl:otherwise>
            </xsl:choose>
        </xsl:variable>

        <xsl:choose>
            <xsl:when test="substring-after($values,$delimiter)">
                <xsl:call-template name="max">
                    <xsl:with-param name="max" select="$maximumValue" />
                    <xsl:with-param name="values" select="substring-after($values,$delimiter)" />
                    <xsl:with-param name="delimiter" select="$delimiter"/>
                </xsl:call-template>
            </xsl:when>
            <xsl:otherwise>
                <xsl:value-of select="$maximumValue" />
            </xsl:otherwise>
        </xsl:choose>                
    </xsl:template>
</xsl:stylesheet> 
```

执行时，产生以下输出：

```
Smallest: 1
Largest: 9 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T17:37:41.350

我从来没有在 1.0 中这样做（我使用 2.0），但你可以这样做：

```
 <xsl:variable name="minimum">
    <xsl:choose>
      <xsl:when test="$b > $a and $c > $a and $d > $a"><xsl:value-of select="$a"/></xsl:when>
      <xsl:when test="$a > $b and $c > $b and $d > $b"><xsl:value-of select="$b"/></xsl:when>
      <xsl:when test="$b > $c and $a > $c and $d > $c"><xsl:value-of select="$c"/></xsl:when>
      <xsl:when test="$b > $d and $c > $d and $a > $d"><xsl:value-of select="$d"/></xsl:when>
    </xsl:choose>
  </xsl:variable> 
```

不过一定有更好的办法。

# javascript - 带有 autoSubmit 的 ValuechangeListener

> ID：10354691
> 
> 赞同：1
> 
> 时间：2012-04-27T16:45:54.303
> 
> 标签：javascript, jsf, trinidad, partial-page-refresh

我有一个州下拉列表填充城市的要求。所以我在 statedropdown 和 valuechangeListener 上使用了 autosubmit 来使用部分触发器来引用城市下拉列表，因为我希望我在客户端的值我已经在 state 下拉列表中使用了 valuepassthru 但这会阻止我的 valluechange 监听器被调用。

如果我将 valuepassthru 属性设置为 false，则调用 valuechange 侦听器，但我需要将 valuepassthru 设置为 true 才能访问客户端 javascript 的值。

我在状态上的绑定对象是一个字符串，选项是 selectItems 列表，所以我认为这可能是一个问题并使用了客户转换器，但这也不起作用

关于不使用 autosubmit 和 valuepassthrough=true 触发 valuechangelistener 的原因有什么想法吗？对此的任何帮助都非常感谢

我正在使用 trinidad 组件作为下拉菜单和 Jsf1.1 谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T09:08:13.603

您只需要选定的值，还是需要访问所有值？如果您只需要选定的值，您可以在 bean 的值更改侦听器中添加一些 Javascript：

```
FacesContext context = FacesContext.getCurrentInstance();
ExtendedRenderKitService erks = Service.getRenderKitService(
  context
, ExtendedRenderKitService.class
);
String jsValue = StringEscapeUtils.escapeJavaScript(value);
erks.addScript(context, "alert('"+ jsValue +"');"); 
```

# android - 如何动态刷新 ListView？

> ID：10354692
> 
> 赞同：4
> 
> 时间：2012-04-27T16:45:57.017
> 
> 标签：android, listview, baseadapter

我正在为每行制作一个带有 TextView 和 1 个删除按钮的 ListView。

为了填充列表，我使用我的自定义适配器（扩展基本适配器）和 sqlite db 映射到列表中。

我的要求是单击一行中的删除按钮，应删除记录并刷新列表。

我可以从 db 中删除记录，但在我旋转设备或从活动中分配我的适配器的新实例之前，我的列表不会刷新。

我尝试了以下[答案](https://stackoverflow.com/questions/7831395/android-how-to-delete-a-row-from-a-listview-with-a-delete-button-in-the-row) ，但在我的情况下没有用。这个答案和我的案例之间的区别是我使用的是baseAdapter，而他使用的是cursorAdapter。

```
 public class BookmarksPDFAdapter extends BaseAdapter { 

            public View getView(int position, View convertView, ViewGroup parent) {
            openDatabase();

            btnDelete.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View v) {

                    deleteBookmark(getLocation(v));//getlocation(View) method returns which delete button clicked
                    notifyDataSetChanged();

                }
            });
        }
        closeDatabase();
        return convertView;
    } 
```

我的活动看起来像

```
public class BookmarkActivity extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub

    super.onCreate(savedInstanceState);
    setContentView(R.layout.bookmarks);
    btnEdit = (Button) findViewById(R.id.edit_bookmarks);
    btnAdd = (Button) findViewById(R.id.add_bookmarks);

    list = (ListView) findViewById(android.R.id.list);

    adapter = new BookmarksPDFAdapter(this);

    list.setAdapter(adapter);
} 
```

书签.xml

```
<LinearLayout 
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:orientation="horizontal"
android:weightSum="10.0" 
android:paddingTop="5dp">

<LinearLayout
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:orientation="vertical"

    android:padding="3dip"
    android:layout_alignParentLeft="true"
    android:weightSum="1.0" 
    android:layout_marginRight="5dip">

    <ImageView
        android:id="@+id/iconShow"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/delete_icon"
        android:visibility="invisible" 
        android:layout_weight="1.0"/>
</LinearLayout>

<TextView
    android:id="@+id/bookmark_text"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginTop="6dp"
    android:layout_weight="7.0"
    android:gravity="center_horizontal|center_horizontal"
    android:lines="1"
    android:text="@+id/TextView01"
    android:textSize="24dp" />

<Button
    android:id="@+id/btnDelete"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="right"
    android:layout_weight="2.0"
    android:text="@string/btn_txt_delete"
    android:visibility="invisible" >
</Button> 
```

列表项.xml

```
<LinearLayout 
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:orientation="horizontal"
android:weightSum="10.0" 
android:paddingTop="5dp">

<LinearLayout
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:orientation="vertical"

    android:padding="3dip"
    android:layout_alignParentLeft="true"
    android:weightSum="1.0" 
    android:layout_marginRight="5dip">

    <ImageView
        android:id="@+id/iconShow"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/delete_icon"
        android:visibility="invisible" 
        android:layout_weight="1.0"/>
</LinearLayout>

<TextView
    android:id="@+id/bookmark_text"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginTop="6dp"
    android:layout_weight="7.0"
    android:gravity="center_horizontal|center_horizontal"
    android:lines="1"
    android:text="@+id/TextView01"
    android:textSize="24dp" />

<Button
    android:id="@+id/btnDelete"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="right"
    android:layout_weight="2.0"
    android:text="@string/btn_txt_delete"
    android:visibility="invisible" >
</Button> 
```

删除书签方法

```
void deleteBookmark(int wantedChild) {

    String bookmarkItem = getBookmarkItemText(wantedChild, true);
    datasource.open();
    int check = datasource.deleteBookmark(bookmarkItem);
    if (check == 1) {

        btnDelete = (Button) (viewList.get(wantedChild)
                .findViewById(R.id.btnDelete));

        btnDelete.setText(R.string.btn_txt_deleted);
        btnDelete.setEnabled(false);
    }

    datasource.close();
} 
```

在这里，我正在从我的数据库中删除记录并将删除按钮的文本从**删除**更改为**已删除**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-27T16:47:36.650

```
adapter.notifyDataSetChanged(); 
```

您可以随时调用上述方法刷新列表视图。在您从数据库中删除记录后调用它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T16:50:14.237

我通过调用更新列表视图：

```
listview.invalidateViews(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T10:51:08.983

```
notifyDataSetChanged(); 
```

对我来说也是唯一的解决方案，现在我的 deleteBookmark 方法看起来像

```
void deleteBookmark(int wantedChild,  String bookmarkItem) {

    openDatabase();
    int check = datasource.deleteBookmark(bookmarkItem);
    if(check==1)
    Toast.makeText(context, R.string.msg_bookmark_delete, ReaderConstants.TOAST_SHOWTIME).show();
    else
        Toast.makeText(context, R.string.msg_bookmark_delete_failed, ReaderConstants.TOAST_SHOWTIME).show();
    notifyDataSetChanged();
    closeDatabase();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-08-05T00:47:31.077

在适配器内部设置更新数据集的自定义方法并通知更改

```
public void updateData(ArrayList<DataSet> d) {

        this.data = d;
        notifyDataSetChanged();
    } 
```

然后在 Activity 中调用方法，（对于我的情况，我在 onResume 方法中调用）

```
@Override
        public void onResume(){
            super.onResume();
                adapter.updateData(dataList);
        } 
```

# c# - 如何优化这个子检索 linq-to-sql 语句？

> ID：10354694
> 
> 赞同：2
> 
> 时间：2012-04-27T16:46:09.027
> 
> 标签：c#, sql-server-2005, linq-to-sql

我有这个功能性的 Linq-to-Sql 语句。

```
public IEnumerable<int> GetChildIds(IEnumerable<int> selectedParentIds)
{
    using (var context = new MyContext())
    {
        return context.Children
            .Where(c => selectedParentIds.Contains(c.parentId))
            .Select(c => c.Id)
            .ToList();
    }
} 
```

它按照要求为我提供了选定的子 ID，但我一直在运行 SQL Profiler。

该语句似乎向数据库发送了一个单独的请求，`selectedParentId`这对我来说似乎不是最佳的。

有没有办法可以重组这个语句来最小化与服务器的流量？我应该采取不同的方法吗，或者，这是否一样好？

**编辑**

感谢您的指导。

这是我对跟踪输出的解释的错误，Linq-To-SQL 为 SQLServer 2005 做出了完全合理的陈述，就像它为 SQLServer 2008 所做的那样。问题出在其他地方。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T16:50:40.657

针对 SQL 2008 使用 LINQ to SQL 的相同查询会生成单个 SQL 查询。您是否能够针对 SQL Server 2008 进行测试？

例如：

```
IEnumerable<int> list = new List<int>{1,2,3};

Models.Where (m => list.Contains(m.Id)).Select (m => m.Id).ToList(); 
```

生产

```
-- Region Parameters
DECLARE @p0 Int = 1
DECLARE @p1 Int = 2
DECLARE @p2 Int = 3
-- EndRegion
SELECT [t0].[Id]
FROM [Models] AS [t0]
WHERE [t0].[Id] IN (@p0, @p1, @p2) 
```

使用实体框架产生同样的事情

```
SELECT 
[Extent1].[Id] AS [Id]
FROM [dbo].[Models] AS [Extent1]
WHERE [Extent1].[Id] IN (1,2,3) 
```

因此，如果无法对照 SQL 2005 检查这一点，我会冒险说，不，除非您升级服务器，否则您无能为力。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T16:52:53.240

这会产生什么不同吗？

```
public IEnumerable<int> GetChildIds(IEnumerable<int> selectedParentIds)
{
using (var context = new MyContext())
{
    return context.Children
        .Where(c => selectedParentIds.Any( p => p == c.parentId ))
        .Select(c => c.Id)
        .ToList();
}
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T17:20:22.587

如果您为不同版本的 SQL Server 获得不同的输出，您可以随时尝试这样的事情

```
public IEnumerable<int> GetChildIds(IEnumerable<int> selectedParentIds)
{
    using (var context = new MyContext())
    {
        var query = context.Children;
        foreach (var id in selectedParentIds)
        {
            query = query.Where(q => q.parentId == id);
        }

        return query.Select(q => q.Id)
                    .ToList();
    }
} 
```

我不再有一个 SQL Server 2005 的实例来测试它（使用兼容模式的 SQL Server 2008 R2 仍然会产生一个查询，即使对于您的初始代码也是如此），但这应该产生一个带有多个 where 子句的单个查询，无论是什么版本您正在使用的 SQL Server。

# ruby - 异常没有被救援块捕获

> ID：10354698
> 
> 赞同：0
> 
> 时间：2012-04-27T16:46:49.640
> 
> 标签：ruby, exception, redis, rescue

问题与`radis-rb`宝石有关。

我的救援块没有捕获到异常，并且我的应用程序出现故障。

我的代码：

```
begin
  redis = Redis.new 
  puts "WTF?"
rescue Exception
  puts "Exception"
end 
```

如果`redis`是down，消息*WTF？*被暴露。

无论有没有 Exception 语句，都会发生这种情况。

为什么我的救援块没有引发异常？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T05:45:37.400

我自己解决了这个问题（在社区和评论的帮助下）。

该异常仅发生在 IRB 中。

一个原因是`inspect`IRB 尝试打印结果时 IRB 的调用`Redis.new`。

在脚本（不是 IRB）中，不会发生异常，因为如果服务关闭`Redis.new`，不会引发异常。`Redis`

这个[问题](https://stackoverflow.com/questions/7035054/rescue-timeouterror-from-redis-gem-ruby)有助于解决我的问题。

# c++ - 如果我链接到 libmysqld，我需要调用 mysql_thread_init 吗？

> ID：10354700
> 
> 赞同：1
> 
> 时间：2012-04-27T16:47:02.650
> 
> 标签：c++, mysql, multithreading, embedded

我有一个链接到 libmysqld 的程序。在 linux 下，我可以在 Windows 下执行“LOAD DATA LOCAL INFILE”，同样的命令会使应用程序崩溃。我看到了一个与使用 mysql_thread_init() 相关的错误报告，但是在 Windows 下调用 mysql_thread_init() 会使我的应用程序崩溃。

知道我做错了什么吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T07:35:48.873

我能够使用 mingw 跟踪问题。

我的应用程序在 linux 加载数据本地 infile '/home/cquiros/temp/test.csv' 下执行。在 Windows 下，它执行 load data local infile 'c:\temp\test.csv' 。因为 Windows 使用 \\t 被解释为 tab 。如果应用程序是使用 nmake (Visual C++) 构建的，不知道为什么，将选项卡作为加载数据本地 infile 的一部分传递会使 libmysqld 崩溃。使用 mingw-make libmysqld 能够报告消息“找不到文件”。

我将所有 \ 替换为 / 现在一切正常。

# java - Google Drive SDK DrEdit Java 版本返回 401 错误

> ID：10354701
> 
> 赞同：2
> 
> 时间：2012-04-27T16:47:05.573
> 
> 标签：java, oauth-2.0, google-drive-api

我正在尝试*完全*按照说明中的[说明](https://developers.google.com/drive/examples/java)在 GAE 上运行 Java DrEdit 示例。我已经到了可以从文档创建一个新的“dredit”文档，允许身份验证并进入实际应用程序的地步，但是对于返回到 gdrive 的每个操作，我都会在 GAE 日志中得到这个：

```
Uncaught exception from servlet
com.google.api.client.googleapis.json.GoogleJsonResponseException: 401 OK
{
  "code" : 401,
  "errors" : [ {
    "domain" : "global",
    "location" : "Authorization",
    "locationType" : "header",
    "message" : "Login Required",
    "reason" : "required"
  } ],
  "message" : "Login Required"
}
at com.google.api.client.googleapis.json.GoogleJsonResponseException.from(GoogleJsonResponseException.java:159) 
```

我在 7 上所做的与说明不同的地方：

> 在项目的 Eclipse 构建路径编辑器中，将 war/WEB-INF/lib/ 目录中的所有 JAR 添加到项目的构建路径中。

我也在 lib/dependencies 下添加了库，只是添加了 lib 留下了编译错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T21:47:15.823

DrEdit Java 中存在一个错误，导致它被释放，基本上跳过了检查令牌是否丢失。修复此错误的相关更改在[此处](https://code.google.com/p/google-drive-sdk-samples/source/detail?r=54312a4a583d5a2ba546330a892c4b0aca75c00d)。

我认为应用该更改将为您解决问题。我还更新了此示例的指南。

# delphi - 为什么我不能通过 TObjectList 到一个需要 TObjectList 的函数 ?

> ID：10354710
> 
> 赞同：8
> 
> 时间：2012-04-27T16:47:30.950
> 
> 标签：delphi, generics, tobjectlist

我的代码有问题，它使用泛型类型。为什么编译器不知道传递的列表 ( `Result`) 是`TObjectList<TItem>`( `TItem`is type for `T`in `TItems`)？

界面：

```
type
   TItem = class
end;

type
  IItemsLoader = interface
    procedure LoadAll(AList : TObjectList<TItem>);
end;

type
  TItemsLoader = class(TInterfacedObject, IItemsLoader)
public
  procedure LoadAll(AList : TObjectList<TItem>);
end;

type
  IItems<T : TItem> = interface
  function LoadAll : TObjectList<T>;
end;

type
  TItems<T : TItem> = class(TInterfacedObject, IItems<T>)
  private
    FItemsLoader : TItemsLoader;
  public
    constructor Create;
    destructor Destroy; override;
    function LoadAll : TObjectList<T>;
end; 
```

执行：

```
procedure TItemsLoader.LoadAll(AList: TObjectList<TItem>);
begin
  /// some stuff with AList
end;

{ TItems<T> }

constructor TItems<T>.Create;
begin
  FItemsLoader := TItemsLoader.Create;
end;

destructor TItems<T>.Destroy;
begin
  FItemsLoader.Free;
  inherited;
end;

function TItems<T>.LoadAll: TObjectList<T>;
begin
  Result := TObjectList<T>.Create();

  /// Error here
  /// FItemsLoader.LoadAll(Result);
end; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T21:46:42.980

您还必须使用通用版本的 Loader：

```
type
   TItem = class
end;

type
  IItemsLoader<T: TItem> = interface
    procedure LoadAll(AList : TObjectList<T>);
end;

type
  TItemsLoader<T: TItem> = class(TInterfacedObject, IItemsLoader<T>)
public
  procedure LoadAll(AList : TObjectList<T>);
end;

type
  IItems<T : TItem> = interface
  function LoadAll : TObjectList<T>;
end;

type
  TItems<T : TItem> = class(TInterfacedObject, IItems<T>)
  private
    FItemsLoader : TItemsLoader<T>;
  public
    constructor Create;
    destructor Destroy; override;
    function LoadAll : TObjectList<T>;
end;

implementation

{$R *.dfm}

procedure TItemsLoader<T>.LoadAll(AList: TObjectList<T>);
begin
  /// some stuff with AList
end;

{ TItems<T> }

constructor TItems<T>.Create;
begin
  FItemsLoader := TItemsLoader<T>.Create;
end;

destructor TItems<T>.Destroy;
begin
  FItemsLoader.Free;
  inherited;
end;

function TItems<T>.LoadAll: TObjectList<T>;
begin
  Result := TObjectList<T>.Create();

  /// Error here
  FItemsLoader.LoadAll(Result);
end; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-27T17:51:15.420

在有错误的函数中，`Result`是 a `TObjectList<T>`，其中`T`是 的某个子类`TItem`，但编译器不知道它是什么特定类。编译器必须对其进行编译，以便它可以安全地运行*任何*. 这可能与需要 a`T`的参数类型不兼容，因此编译器会拒绝该代码。`LoadAll``TObjectList<TItem>`

假设`T`是`TItemDescendant`，并且编译器允许错误代码编译和执行。如果`LoadAll`调用`AList.Add(TItem.Create)`，那么`AList`最终将持有不是 a 的东西`TItemDescendant`，即使它是 a `TObjectList<TItemDescendant>`。它拥有一个类型与其泛型类型参数所说的不同类型的对象。

仅仅因为`S`是的子类型`T`并不意味着它`X<S>`是的子类型`X<T>`。

# java - 如何从 JavaDoc 中删除 R.java

> ID：10354716
> 
> 赞同：8
> 
> 时间：2012-04-27T16:47:54.043
> 
> 标签：java, android, eclipse, javadoc, r.java-file

我尝试使用 Eclipse 生成 Java 文档，然后使用“在浏览器中预览附加的 JavaDoc”选项预览了我的 JavaDocumenttation。

存在所有自动生成的 android 类，例如 R.drawable。我怎样才能删除它们？我应该删除它们吗？

![在此处输入图像描述](../Images/74356c57dd6473631974bef8682623a5.png)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-27T17:07:09.563

在 Eclipse 中，当我单击生成 Javadoc 时，它会弹出一个向导，可以选择要生成哪些类/包，从中排除 gen （其中包含 R.java）

![在此处输入图像描述](../Images/c31b2b97321feaa2ac3a27fa85420736.png)

至于您是否应该，我建议排除整个 gen 包/源文件夹，因为对于阅读您的文档的任何人来说，它并不是真正相关的信息

# google-chrome - 如何在 Chrome 18 中使用软件 webgl 引擎

> ID：10354717
> 
> 赞同：2
> 
> 时间：2012-04-27T16:48:08.233
> 
> 标签：google-chrome, webgl, chromium

我想测试[据称在 Chrome 18 中](http://blog.chromium.org/2012/03/moar-better-graphics.html)的基于 SwiftShader 的新软件 WebGL 引擎。我在 Mac OS X 10.7.3 上运行 18.0.1025.165。我试过这个命令行[（这里建议）](http://blog.chromium.org/2012/02/gpu-accelerating-2d-canvas-and-enabling.html)，但是当我用 WebGL 访问某些东西时，它只是说它被禁用了：

```
/Applications/Google\ Chrome.app/Contents/MacOS/Google\ Chrome  --blacklist-accelerated-compositing --blacklist-webgl 
```

SwiftShader 在 Mac 版 Chrome 18 中吗？我应该使用不同的技巧来启用它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T08:22:08.723

目前 SwiftShader 仅适用于 Windows 下的 Chrome。在 Mac OS 上需要它有什么特别的原因吗？Apple 通常有足够的图形硬件和 OpenGL 驱动程序。

# c++ - 如果左值不再在其定义范围内使用，编译器是否允许将左值转换为右值引用？

> ID：10354719
> 
> 赞同：5
> 
> 时间：2012-04-27T16:48:10.330
> 
> 标签：c++, c++11, move-semantics

考虑以下：

```
ComplexObject foo()
{
    ComplexObject temp;
    //Do things with temp
    ComplexObject result(temp, SOME_OTHER_SETTING); //1
    //Do things with result. Do not use temp at all
    return result; //2
}

ComplexObject foo()
{
    ComplexObject temp;
    //Do things with temp
    ComplexObject result(std::move(temp), SOME_OTHER_SETTING); //1
    //Do things with result. Do not use temp at all
    return std::move(result); //2
} 
```

假设 ComplexObject 有一个移动构造函数，它比它的复制构造函数效率高得多。

是否允许编译器有效地将第一个代码转换为第二个代码，因为它知道 ComplexObject 不能用于该块的其余部分？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T16:59:47.830

不是 for `temp`，但是编译器可以在*as-if*规则下进行其他优化，可能会有同样的效果。

对于`result`，有一条关于`return`语句的特殊规则，如果可能，它将使用移动（并且省略比移动或复制更受欢迎）。

# algorithm - 大哦对数（ish）复杂度计算

> ID：10354726
> 
> 赞同：0
> 
> 时间：2012-04-27T16:48:22.187
> 
> 标签：algorithm

所以我一直在尝试处理 Big Oh 的计算。我觉得我已经掌握了基础知识，但对似乎非常简单的计算感到困惑。所以如果下面的计算有很大的 O(n log n) 哦（我真的希望我至少做对了）改变循环的顺序对复杂性有什么影响？非常感谢您抽出宝贵的时间。

```
 int ONLogN(int N) //O(n log n)
    {
        int iIterations = 0;
        for (int i = 0; i < N; ++i)
        {
            ++iIterations;
            for (int j = 1; j < N + 1; j *= 2)
                ++iIterations;
        }
        return iIterations;
    }
    int WhatBigOhIsThis(int N) //???
    {
        int iIterations = 0;
        for (int j = 1; j < N + 1; j *= 2)
        {
            ++iIterations;
            for (int i = 0; i < N; ++i)                
                ++iIterations;
        }
        return iIterations;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T16:58:44.227

两个循环上的索引变量是独立的，因此产生的复杂度必然相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T17:01:04.710

您仍在循环相同数量的迭代。更改循环的顺序不会影响复杂性

# sql-server - ASP.NET 实体框架更新 SQL 将 int 值设置为 0

> ID：10354727
> 
> 赞同：0
> 
> 时间：2012-04-27T16:48:30.103
> 
> 标签：sql-server, entity-framework

我有一个 SQL 列作为 int 数据类型。

我正在尝试使用实体框架更新条目，将其值设置为 0，但它没有得到更新。提交更改时我也没有收到错误...奇怪。好吧，我更改了标签名称并将计数设置为 0，名称已更新但计数未修改

有任何想法吗？

提前致谢

代码片段：

添加标签 - 增加标签数量：

```
 Tag tag = _tagsRepository.GetTagByName(TagName);
  if (tag == null)
  {
      tag = new Tag();
      tag.CreateDate = DateTime.Now;
      tag.Name = TagName;
      tag.Count = 1;
  }
  else
  {
      tag.Count += 1;
  }
  tag = _tagsRepository.SaveTag(tag); 
```

从项目中删除标签，更新标签计数

```
 Tag tag = _tagsRepository.GetTagByName(TagName);
   if (tag != null)
   {
       tag.Count -= 1;
   }
   tag = _tagsRepository.SaveTag(tag); 
```

GetTagByName 方法

```
 public Tag GetTagByName(string Name)
    {
        Tag result = null;
        using (ISADataContext dc = conn.GetContext())
        {
            result = dc.Tags.Where(t => t.Name == Name).FirstOrDefault();
        }
        return result;
    } 
```

保存标签方法

```
public Tag SaveTag(Tag tag)
{
    using (ISADataContext dc = conn.GetContext())
    {
        if (tag.TagID > 0)
        {
            dc.Tags.Attach(new Tag { TagID = tag.TagID });
            dc.Tags.ApplyCurrentValues(tag);
        }
        else
        {
            dc.Tags.AddObject(tag);
        }
        dc.SaveChanges();
    }
    return tag;
} 
```

解决方法：

```
using (ISADataContext dc = conn.GetContext())
{
    if (tag.TagID > 0)
    {
        if (tag.Count == 0)
        {
            Tag t =  dc.Tags.Where( tt=> tt.TagID == tag.TagID).First();
            t.Count = 0;
        }
        else
        {
            dc.Tags.Attach(new Tag { TagID = tag.TagID });
            dc.Tags.ApplyCurrentValues(tag);
        }
    }
    else
    {
        dc.Tags.AddObject(tag);
    }
    dc.SaveChanges();
}
return tag; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-19T14:28:18.470

我遇到了和你一样的问题——除了 0 之外的所有其他值都可以正常工作。我们能得到一些解决方案吗？

编辑：经过一番研究，我找到了解决这个问题的方法。您必须修改此行：

```
dc.Tags.Attach(new Tag { TagID = tag.TagID }); 
```

在存根对象中，添加有问题的属性（在您的情况下为计数）并将其值设置为数据库中永远不可能的值，例如 -2。这样，EF 上下文也会比较附加对象的计数值，并始终知道存在差异。所以你的行变成：

```
dc.Tags.Attach(new Tag { TagID = tag.TagID, Count = -2 }); 
```

我不确定这是否每次都有效，但现在它似乎可以完成这项工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T11:48:03.587

你不应该`DataContext`在你的场景中包含你的 using 语句。这样做意味着您正在检索一个对象`context`并尝试将现有对象保存在一个新的`context`. 这意味着当您尝试在 second 中保存时`context`，它不知道该对象已经存在于数据库中。

# c - cURL 得到响应

> ID：10354730
> 
> 赞同：0
> 
> 时间：2012-04-27T16:48:53.717
> 
> 标签：c, curl, libcurl

我正在寻找要阅读/理解的 cURL 文档。我在这里尝试做的是发布一个邮政编码并返回它是否有效。到目前为止，这是我的功能（我设法从教程中总结出来的）

```
int checkPostCode(char postCode[5])
{
    printf("checkPostCode\n");

    char uidPath[200] = "http://zim.cs.uow.edu.au/~dfs/cgi-bin/postcodes.cgi?pcode=";
    //Concatinate poth strings
    strcat (uidPath,postCode);
    //Output URl
    printf("%s \n ", uidPath);

    CURL *curl;
    CURLcode res;

    // Create our curl handle  
        curl = curl_easy_init();

    if (curl)  
        {  
        curl_easy_setopt(curl, CURLOPT_URL, uidPath);
        res = curl_easy_perform(curl);

        /* always cleanup */ 
        curl_easy_cleanup(curl);
    }

    return 0;
} 
```

该脚本返回“是”或“否”。我只是不知道在 if 语句中输入什么来得到我的结果。

提前致谢 ：）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T16:56:17.783

听起来您想从服务器读取响应。为此，您需要启用该选项`CURLOPT_READFUNCTION`并指定一个回调，该回调将从网络接收数据并将其存储在`char`.

# ios - AVAudioPlayer 在 5.0 中工作正常，在 4.0-4.3.5 中出现问题

> ID：10354732
> 
> 赞同：0
> 
> 时间：2012-04-27T16:49:02.523
> 
> 标签：ios, ipad, avaudioplayer

我有一个应用程序可以跨不同的 ViewController 播放和控制音乐。为此，我在应用程序委托的 DidFinishLaunchingMethod 中创建了两个 AVAudioPLayer 实例：

```
NSString *path = [[NSBundle mainBundle] pathForResource:@"minnie1" ofType:@"mp3"];
NSURL *path1 = [[NSURL alloc] initFileURLWithPath:path];
menuLoop =[[AVAudioPlayer alloc] initWithContentsOfURL:path1 error:NULL];
[menuLoop setDelegate:self];  
menuLoop.numberOfLoops = -1;
[menuLoop play];

NSString *path2 = [[NSBundle mainBundle] pathForResource:@"minnie2" ofType:@"mp3"];
NSURL *path3 = [[NSURL alloc] initFileURLWithPath:path2];
gameLoop=[[AVAudioPlayer alloc] initWithContentsOfURL:path3 error:NULL];
gameLoop.numberOfLoops = -1;
[gameLoop setDelegate:self];
[gameLoop prepareToPlay]; 
```

在此之后，我在各种视图控制器中调用它，以使用如下代码停止或重新启动：

```
- (IBAction)playGameLoop{

NSLog(@"Begin playGameLoop");
FPAppDelegate *app = (FPAppDelegate *)[[UIApplication sharedApplication] delegate];

if ([FPAVManager audioEnabled] == NO){
    //DO NOTHING   
}
else {
    if (app.gameLoop.playing ==YES ) {
        //DO NOTHING
    }
    else {  [app.gameLoop play];
    NSLog(@"End playGameLoop");
    }
    } 
```

音频文件第一次播放良好，并在被要求停止时停止。但是，在 iOS4 设备上，它们不会在再次调用时开始重播。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T18:02:21.450

从文档：

```
调用此方法 [stop] 或让声音完成播放，
撤消调用 play 或 prepareToPlay 时执行的设置
方法。

stop 方法不会重置 currentTime 属性的值
为 0。也就是说，如果你在播放过程中调用 stop 然后调用
播放时，播放会从中断处继续。

```

在您循环播放声音的地方，我希望能够先调用`stop`然后调用`play`。但我对自己遇到这种情况有模糊的回忆。我发现调用`pause`，而不是`stop`，是一个更好的解决方案。特别是因为我可以再次打电话`play`恢复比赛。至少在我的经验中，打电话`stop`似乎总是需要在打电话`prepareToPlay`之前再次打电话。`play`

iOS4.x 和 iOS5 之间的 API 实现也可能有一些变化。您应该检查开发人员网站上的 API 差异以确定。

# php - 您如何有效地将 1 行与数据库中的所有其他行进行比较

> ID：10354733
> 
> 赞同：2
> 
> 时间：2012-04-27T16:49:27.077
> 
> 标签：php, sql

我有一个主要包含 3 个表的数据库，（ImageID，imageName），（ImageID | Tags）和（tagID，tagName）

因此，每个图像都可以有许多与之关联的标签。我将如何有效且可扩展地选择 1 张图像并找到最相似的下 x 张图像（具有与其关联的相同标签）

全部使用 javascript、ajax 和 php 在网络上完成。感谢您提供有关如何解决此问题的任何建议和提示！

编辑：

是的

格式为 ( Table ) 和 ( ROW | ROW )

IMAGEID、TAGID 为主键

所以是的，有一个 IMAGEIDS 和 TAGIDS 的标准化索引来节省空间。

我想知道如果图像 A 与图像 B 有 10 个标签中的 10 个，它的返回值将高于图像 C，它有 10 个标签中的 6 个。

很抱歉模棱两可。我正在开发网站，所以我可以添加键、外键等，如果它不可能用我拥有的东西来做的话。而且它不必在一个巨大的 SQL 语句中完成，我只是不想通过一次将我的第一行与每隔一行 1 进行比较来进入 ao(n^2) 的情况。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T17:00:46.693

不幸的是，这种设计实际上并不是非常可扩展的。仅仅是因为您确实会将一张图像的标签与几乎所有其他图像的标签进行比较。

它是可编码的，只是不太可扩展。（100 张图片？太棒了！数万张？您将能够测量查找速度。）

```
SELECT
  allImage.ImageID,
  COUNT(*)           AS commonTags
FROM
  image_tag    AS allImage
INNER JOIN
  image_tag    AS myImage
    ON allImage.TagID = myImage.TagID
WHERE
  myImage.ImageID = 123
GROUP BY
  allImage.ImageID
ORDER BY
  COUNT(*) DESC 
```

然后使用 LIMIT 或 TOP（取决于您的 SQL 风格）仅选择前 (N) 个图像。

**注意：**这假设您没有将字符串中的图像的所有标签保存在一行的一个字段中。如果你这样做了，你*真的*应该将数据标准化为`(ImageID,TagID)`每行一个，

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T16:54:50.513

我会在前两个表中创建 ImageID 的索引以提高速度。然后使用一个简单的 SELECT WHERE 查询。

# android - 更新应用程序时的 Android 内部存储

> ID：10354735
> 
> 赞同：13
> 
> 时间：2012-04-27T16:49:30.463
> 
> 标签：android, storage, internal

我使用内部存储（http://developer.android.com/guide/topics/data/data-storage.html#filesInternal）来存储用户创建的一些必要的应用程序文件。

我想这些文件是永远存储的吧？它们仅在用户卸载应用程序时才被删除，对吗？

如果通过 Android Market 更新应用程序（例如从版本 1.0 到 1.1），那么从以前版本存储的文件会怎样？他们是否被删除？

先感谢您。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-27T16:51:22.030

如果通过 Android Market 更新应用程序（例如从版本 1.0 到 1.1），从以前版本存储的文件将在设备上，如果您卸载应用程序以获取新版本，那么文件将被删除。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T17:03:31.170

好问题 - 文档实际上并没有说明任何持久性解决方案在升级时保留其数据。但就像 SharedPreferences 和 Sqlite 数据库一样，我想它也会在应用程序升级期间持续存在。不过，最好的确定方法是自己测试。（我知道这听起来可能很粗鲁，因为我想告诉你“自己看看”。但如果我目前的机器是为安卓开发设置的，我不介意为你做这件事）

# php - PHP getcwd() 函数与不同目录中的 include 或 require 一起使用

> ID：10354739
> 
> 赞同：0
> 
> 时间：2012-04-27T16:49:42.930
> 
> 标签：php, include-path, getcwd

我需要在其他脚本的一个目录中包含一个配置文件的路径，向上或向下几个目录。

我的配置文件有这样的功能：

```
$execute_path = getcwd() . "/execute.php"; 
```

execute.php 文件与配置文件位于同一目录中，这样就可以了，输出将变为：

```
public-html/config-directory/execute.php 
```

现在，如果在原始目录之外的目录中使用相同的函数，它会将 getcwd() 函数视为在该目录中。

例如，如果从目录 public-html/one/two/three/somefile.php 调用它，如下所示：

```
<?php 
include(pathto/config.php)
echo $execute_path;
?> 
```

输出变为 publichtml/one/two/three/execute.php 而不是保持 publichtml/config-directory/execute.php

我怎样才能在这里实现我想要的？抱歉，解释太长了。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T16:54:18.507

包含可能非常棘手，为什么我的建议是

```
//config.php

define("SITE_PATH", "public-html/config-directory");

//execute.php

$execute_path =SITE_PATH . "/execute.php";

//run.php
include_once 'config.php';
include_once 'execute.php';

echo $execute_path; 
```

# linux - Libcurl 支持多播文件传输吗？

> ID：10354741
> 
> 赞同：0
> 
> 时间：2012-04-27T16:50:00.167
> 
> 标签：linux, libcurl, file-transfer

我想知道 libcurl 是否支持多播文件传输。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T16:59:11.910

curl 是一个使用 URL 语法传输数据的命令行工具，支持 DICT、FILE、FTP、FTPS、Gopher、HTTP、HTTPS、IMAP、IMAPS、LDAP、LDAPS、POP3、POP3S、RTMP、RTSP、SCP、SFTP、SMTP、 SMTPS、Telnet 和 TFTP。curl 支持 SSL 证书、HTTP POST、HTTP PUT、FTP 上传、基于 HTTP 表单的上传、代理、cookie、用户+密码身份验证（Basic、Digest、NTLM、Negotiate、kerberos...）、文件传输恢复、代理隧道和

```
特征

卷曲工具
 - 配置文件支持
 - 单个命令行中的多个 URL
 - 范围“通配符”支持：[0-13]、{一、二、三}
 - 在单个命令行上上传多个文件
 - 自定义最大传输率
 - 可重定向的标准错误

libcurl 支持
 - 完整的 URL 语法，没有长度限制
 - 自定义最大下载时间
 - 自定义可接受的最低下载速度
 - 完成后的自定义输出结果
 - 除非指定，否则从主机名猜测协议
 - 使用 .netrc
 - 下载时的进度条/时间规格
 - “标准”代理环境变量支持
 - 在 win32 上编译（报告在 40 多个操作系统上构建）
 - 用于传出流量的可选网络接口
 - 在 unix 和 Windows 上支持 IPv6
 - 持久连接
 - 袜子5支持
 - 支持代理环境变量中的用户名+密码
 - 通过代理“隧道”进行操作（使用 CONNECT）
 - 支持上传/下载大文件（>2GB 和>4GB）
 - 可替换的内存函数（malloc、free、realloc 等）
 - 异步名称解析 (*6)
 - 推拉式界面

HTTP
 - 符合 HTTP/1.1（可选使用 1.0）
 - 得到
 - 放
 - 头
 - 邮政
 - 流水线
 - 多部分表单（RFC1867 风格）
 - 身份验证：Basic、Digest、NTLM(*9)、GSS-Negotiate/Negotiate(*3) 和
   SPNEGO (*4) 到服务器和代理
 - 简历（GET 和 PUT）
 - 跟随重定向
 - 要遵循的最大重定向数量
 - 自定义 HTTP 请求
 - cookie 获取/发送完全解析
 - 读取/写入 netscape cookie 文件格式
 - 自定义标题（替换/删除内部生成的标题）
 - 自定义用户代理字符串
 - 自定义引用字符串
 - 范围
 - 代理身份验证
 - 时间条件
 - 通过 http 代理
 - 检索文件修改日期
 - 对 deflate 和 gzip 的内容编码支持
 - “传输编码：分块”支持“上传”

HTTPS (*1)
 - （所有 HTTP 功能）
 - 使用客户端证书
 - 验证服务器证书
 - 通过 http 代理
 - 选择所需的加密
 - 强制使用特定的 SSL 版本（SSLv2(*7)、SSLv3 或 TLSv1）

FTP
 - 下载
 - 验证
 - kerberos4 (*5), kerberos5 (*3)
 - 使用 PORT、EPRT、PASV 或 EPSV 的主动/被动
 - 单个文件大小信息（与 HTTP HEAD 相比）
 - 'type=' URL 支持
 - 目录列表
 - 仅列出名称的目录
 - 上传
 - 上传附加
 - 通过 http-proxy 作为 HTTP PUT 上传
 - 下载简历
 - 上传简历
 - 自定义 ftp 命令（传输之前和/或之后）
 - 简单的“范围”支持
 - 通过 http 代理
 - 所有操作都可以通过 http-proxy 进行隧道传输
 - 可定制以检索文件修改日期
 - 没有目录深度限制

FTPS (*1)
 - 在两个连接上都使用 SSL 的隐式 ftps:// 支持
 - 明确的“AUTH TSL”和“AUTH SSL”使用来“升级”普通的 ftp://
   为两个或一个连接使用 SSL 的连接

SCP (*8)
 - 密码和公钥认证

SFTP (*8)
 - 密码和公钥认证
 - 在传输之前/之后发送自定义命令

TFTP
 - 下载上载

远程网络
 - 连接协商
 - 自定义远程登录选项
 - 标准输入/标准输出 I/O

LDAP (*2)
 - 完整的 LDAP URL 支持

信息和通信技术
 - 扩展 DICT URL 支持

文件
 - 网址支持
 - “上传”
 - 恢复

脚注
=========

  *1 = 需要 OpenSSL、GnuTLS、NSS、yassl、axTLS 或 PolarSSL
  *2 = 需要 OpenLDAP
  *3 = 需要符合 GSSAPI 的库，例如 Heimdal 或类似库。
  *4 = 需要 FBopenssl
  *5 = 需要 krb4 库，例如 MIT 库或类似库。
  *6 = 需要 c-ares
  *7 = 需要 OpenSSL 或 NSS，因为 GnuTLS 仅支持 SSLv3 和 TLSv1
  *8 = 需要 libssh2
  *9 = 需要 OpenSSL、GnuTLS、NSS 或 yassl
```

# firefox - Firefox 的背景图像的 CSS3 过渡不起作用

> ID：10354742
> 
> 赞同：5
> 
> 时间：2012-04-27T16:50:05.770
> 
> 标签：firefox, css, css-transitions

我的背景图像转换在 Chrome 中运行良好，但在 Firefox 中没有任何作用。我是 CSS3 过渡的新手。做过研究，我的语法似乎是正确的。从我读过的内容来看，FF 应该支持这一点。我在FF 12.0。为什么这种 CSS3 过渡在 Firefox 中不起作用。

没有 JavaScript。没有解决方法。只是解释为什么会失败会很棒。

[http://jsfiddle.net/VCdGt/3/](http://jsfiddle.net/VCdGt/3/)

```
a.call_to_action
{
    text-decoration: none;
    display: block;
    color: #232744;
    font-size: 20px;
    font-weight: bold;
    height: 47px;
    width: 185px;
    overflow: hidden;
    margin: 10px auto 15px auto;
    text-align: center;
    border: none;
    background: yellow;
    background-image: url(http://www.pslover.com/images/thumb/2751.jpg);
    -webkit-transition: background-image .5s linear;
    -moz-transition: background-image .5s linear;
}

a.call_to_action:hover {
    background: orange;
    background-image: url(http://www.tutorialdash.com/avatars/3b1f70c20325d8676ce1f56cb9b43f17.gif);
    color: #4F4246;
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-27T20:05:37.797

在 MDN 文档中找到了答案。

[http://oli.jp/2010/css-animatable-properties/#background-image](http://oli.jp/2010/css-animatable-properties/#background-image)

> **背景图片**
> 
> 这仍然有点悬而未决，当前工作草案中“只有渐变”，当前编辑草案中根本没有背景图像，CSS 背景和边框模块级别中的背景图像“动画：没有” 3 编辑草稿。不过，Chrome 19 Canary 中已经出现了支持，这也是设计师想要的。在得到广泛支持之前，这可以通过图像精灵和背景位置或不透明度来伪造。

此时我发现实际上没有人支持渐变（Chrome 17、FF 12、IE9）。只有 Chrome 支持背景图像（这就是为什么它在 FF 中对我不起作用的原因）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-26T12:34:56.877

It is 2014 and background-image property is still not animatable: [http://dev.w3.org/csswg/css-backgrounds/#background-image](http://dev.w3.org/csswg/css-backgrounds/#background-image)

Works fine in webkit but not in Firefox. It seems that the only way to make some animation is to use jQuery fallback for Firefox.

# iphone - 将“复制期间剥离调试符号”设置为 NO 后经常出现内存警告

> ID：10354745
> 
> 赞同：0
> 
> 时间：2012-04-27T16:50:16.563
> 
> 标签：iphone, objective-c, ios, cocoa-touch, xcode4.3

我已将“复制期间剥离调试符号”构建参数设置为 NO。它使我的二进制应用程序的大小增加了 0.5 MB。令人惊讶的是，我开始经常在我的应用程序中看到内存警告。这可能是一个原因吗？

在这种情况下，我可以将其设置回 YES。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T17:05:28.140

调试符号不是问题，这是非常确定的。

要找出内存问题的根本原因，请使用以下方法：

1.  ***Xcode Analyzer*** - 甚至在不运行您的应用程序的情况下就已经（除其他外）定位了大多数潜在的内存泄漏。

2.  ***仪器：泄漏仪器***- 将定位所有剩余的泄漏问题。

在极少数情况下，您可能会从这两种工具中得到误报。但请放心，根据我的经验，这些通常不是误报，而是发现您的代码/应用程序的问题。

# asp.net - 401 自定义 IHttpHandler 尝试从虚拟目录读取时未授权

> ID：10354748
> 
> 赞同：2
> 
> 时间：2012-04-27T16:50:19.343
> 
> 标签：asp.net, iis-7, httphandler, virtual-directory, http-status-code-401

我有一个自定义 IHttpHandler，在 web.config 中指定如下：

```
<httpHandlers>
  <add verb="*" path="*.html" validate="true" type="PipingRedirectHandler" />
  <add verb="*" path="*.htm" validate="true" type="PipingRedirectHandler" />
</httpHandlers> 
```

在 IIS 7（在 Win 2008 R22 上）中，我添加了带有 Path:`*.html/*.htm`和 executable:的处理程序映射`%windir%\Microsoft.NET\Framework\v2.0.50727\aspnet_isapi.dll`。

我还有一个虚拟目录映射到另一台机器上的 Windows 共享，别名：`ClientFiles`，物理路径：`\\othermachine\ClientFiles`。我将此虚拟目录设置为“连接为”域用户，该用户对共享具有完全控制访问权限（读取、写入、执行等），但有关网站、应用程序池标识、连接到物理路径的所有其他内容网站的其余部分等都是默认的（`ApplicationPoolIdentity`）。

我的 IHttpHandler 可以很好地处理网站上的任何本地 html 文件，并且我在 ClientFiles 虚拟目录上的所有 css 和图像也可以完美地工作。唯一的问题是当我试图从虚拟目录中读取 html 文件时。`HTTP 401 Unauthorized`尝试这样做时出现错误。

我认为这是本地 ASP.Net ISAPI 试图直接加载文件而不尊重虚拟目录的“连接为”设置，所以我将应用程序池的身份更改为具有访问权限的同一个域用户，以及所有内容*似乎*工作。

我是在想：

*   这是正常的吗？
*   为什么不使用虚拟目录设置中指定的用户？
*   我是否以适当的方式解决了这个问题？

我相信通过将应用程序池设置为使用域用户会稍微降低安全性，并且不希望这样做。

# database - Postgres 数据库错误：关系不存在

> ID：10354756
> 
> 赞同：3
> 
> 时间：2012-04-27T16:51:21.203
> 
> 标签：database, django, postgresql, system, legacy

我正在修复遗留系统的一些问题，并且遇到了一个令我惊讶的是没有尽早发现的问题。我正在运行 Django 1.3 并在运行此应用程序时使用 postgres 9.1.3。该系统是一个验证系统，供用户使用系统的其余部分。它使用 Django 用户界面的一部分，但大多数情况下它都有自己的“用户”。

当我尝试向用户提出他们的帐户问题时，我的问题就出现了（类似于如果您忘记了网站的密码）。当我尝试这样做时，它会引发此错误：

```
Database Error at admin/password/user

relation "password_user_answered_questions_id_s" does not exist
LINE 1: SELECT CURRVAL('"password_user_quest...
              ^ 
```

有谁知道可能导致此错误的原因？我曾尝试重置数据库（不认为它会做任何事情，只是想确定一下），并且还使用 phppgadmin 在数据库中四处寻找，发现除了这个之外，其他所有内容都正确存储。它在分配时使用 ManyToMany 字段，以便用户可以有多个问题，并且一个问题可以被多个用户使用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T17:03:54.820

原因很可能是

> 关系“password_user_answered_questions_id_s”不存在

就像错误消息告诉我们一样。你知道[PostgreSQL 如何处理标识符](http://www.postgresql.org/docs/current/interactive/sql-syntax-lexical.html#SQL-SYNTAX-IDENTIFIERS)吗？

此外，序列通常命名为***_seq**。结尾的字母不见了？

* * *

关于标识符的**最大长度**- 我从上面的链接中引用手册：

> 系统使用的标识符不超过 NAMEDATALEN-1 个字节；较长的名称可以写在命令中，**但它们会被截断**。默认情况下，NAMEDATALEN 为 64，因此最大标识符长度为**63** 个字节。如果这个限制有问题，可以通过更改 src/include/pg_config_manual.h 中的 NAMEDATALEN 常量来提高它。

大胆强调我的。似乎您应该稍微缩短标识符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-01T15:13:36.230

问题是你还没有同步你的数据库，我猜。请执行以下命令：

1.  `python manage.py makemigrations myappname`
2.  `python manage.py migrate myappname`

# java - 当客户端计算机具有多个 IP 地址时，RMI 服务器到客户端调用失败

> ID：10354758
> 
> 赞同：3
> 
> 时间：2012-04-27T16:51:22.110
> 
> 标签：java, rmi

首先，我很想为这个问题发布一些真实的代码，但我不能，因为它太多行了。也就是说，这是我的情况：

**服务器端**

我有一个 RMI 服务器，它等待客户端连接并“注册”自己，以便服务器可以对客户端进行函数调用。基本上，服务器有一个发布的函数，其工作方式类似于以下伪代码：

```
public class Server extends UnicastRemoteObject implements ServerInterface{
    public Server(){ /* Server publishes itself here */ }

    ...

    /** One of many methods visible to a remote Client */
    public void registerClient(Client c) throws RemoteException{
        //1\. Make some remote calls on 'c' for book-keeping purposes
        //2\. Store reference to c to make calls on it later
    }
} 
```

**客户端**

在启动时，客户端调用以`Naming.lookup([url])`获取我将调用的服务器的存根`serverRef`，然后调用`serverRef.registerClient(this)`. 问题发生在服务器`registerClient(Client c)`方法的第一行。

**问题**

当服务器对方法`Client`内部进行第一次远程方法调用时`registerClient`，会引发 RemoteException。虽然客户端和服务器机器在同一个子网上，但客户端机器有一个辅助 IP 地址。所以IP看起来像这样：

服务器机器 IP：*123.45.67.1*
客户端机器*IP*：*123.45.67.2、192.168.67.2*

 *在服务器第一次远程回调客户端期间抛出的 RemoteException 表明服务器正在尝试连接到客户端的 192.168.67.2 地址，这就是导致失败的原因。服务器应该尝试连接到 123.45.67.1 地址。我知道禁用属于第二个 IP 地址的网络接口可以解决问题，但这对我来说并不是一个真正的选择。

在打开与新客户端对象存根的连接时，有什么方法可以“告诉”服务器端 RMI 连接哪个 IP 地址？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T16:58:36.560

有几种可能的解决方案，包括

*   编写自定义客户端套接字工厂

*   在 java.rmi.server.hostname 属性中指定地址

    `-Djava.rmi.server.hostname=ip_address`

*   ETC

看看这个链接：

*   [http://weblogs.java.net/blog/emcmanus/archive/2006/12/multihomed_comp.html](http://weblogs.java.net/blog/emcmanus/archive/2006/12/multihomed_comp.html)

这些链接也很有用：

*   [java rmi -Djava.rmi.server.hostname=localhost 仍然打开一个监听 0.0.0.0 的套接字](https://stackoverflow.com/questions/10173834/java-rmi-djava-rmi-server-hostname-localhost-still-opens-a-socket-listening-on)

*   [http://www.chipkillmar.net/2011/06/22/multihomed-hosts-and-java-rmi/4/java-rmi-djava-rmi-server-hostname-localhost-still-opens-a-socket-聆听](http://www.chipkillmar.net/2011/06/22/multihomed-hosts-and-java-rmi/4/java-rmi-djava-rmi-server-hostname-localhost-still-opens-a-socket-listening-on)*

# jpa - CriteriaBuilder 并为选择原因使用别名

> ID：10354762
> 
> 赞同：0
> 
> 时间：2012-04-27T16:51:51.317
> 
> 标签：jpa, eclipselink, jpql, criteria-api

我想用 CriteriaBuilder 为这种 sql 创建一个查询；

```
SELECT myDefinedAlias.id, myDefinedAlias.name, myDefinedAlias.aFieldForFK select from Person as myDefinedAlias where myDefinedAlias.name = ?1 
```

**我怎样才能完成为此定义别名？**

我可以创建没有别名的查询，但我无法定义别名......

```
CriteriaQuery<Person> cq = criteriBuilder.createQuery(Person.class);
Root<Person> person = cq.from(Person.class);
cq = cq.select(person);
cq = cq.where(criteriaBuilder.equal(person.get(Person_.name), "Chivas"))) 
```

我需要这个用于 QueryHints，批量获取。

```
.setHint(QueryHints.BATCH, "myDefinedAlias.aFieldForFK.itsNestedAttribute"); 
```

我被卡住了，找不到任何关于我的问题的信息。任何人？

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-11T12:04:18.877

这样做`cq.select(person).alias("myDefinedAlias")`会分配您的别名，该别名随后可用于批处理/获取查询提示。只要您不转移到多关系（集合），Eclipselink 就支持嵌套提取连接。即`.setHint(QueryHints.BATCH, myDefinedAlias.toOneRelation.toManyRelation")`在`.setHint(QueryHints.BATCH, .setHint(QueryHints.BATCH, "myDefinedAlias.toManyRelation.toOneRelation")`不应该的情况下工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T21:27:48.000

我认为你正在以错误的方式解决这个问题。JPA 在生成 sql-statements 时需要 sql-statement-aliases 供自己使用。要使嵌套查询提示起作用，需要在实体中指定关系。例如，如果您的 Person 实体有一个到 House 实体的 OneToMany 映射 - 并且 Person 类中的属性名称是 liveInHouses。查询提示将变为：.setHint(QueryHints.BATCH, "Person.livedInHouses")。使用数据库中存在但未注释为 JPA 中实体上/实体中的关系的 FK 几乎是不可能的。

# php - DataTables 将表放在数据表中

> ID：10354764
> 
> 赞同：4
> 
> 时间：2012-04-27T16:52:11.927
> 
> 标签：php, javascript, jquery, datatable, datatables

我需要将表放在我的数据表中，但它看起来不像数据表喜欢它。有谁知道我怎样才能获得我需要的功能？我尝试放入看起来像表格而不是表格的 div，但它仍然坏了。我认为是因为 tr 只有一个 td。

我的代码：

```
foreach($campaigns as $campaign):?>
<tr>
    <td><?php echo $campaign['name']?></td>
    <td><?php echo date('m/d/Y', strtotime($campaign['created_date']))?></td>
    <td><?php echo $campaign['country_id']?></td>
    <td><?php echo $campaign['domain_getter_type']?></td>
    <td><?php echo $campaign['domain_metrics']?> <?php echo $campaign['metric_filter_setting_id']?></td>
    <td><?php echo $campaign['domain_contact']?></td>
    <td>0</td>
</tr>
<!--campaign runs-->
<tr>
    <td colspan="99">
        <table>
            <thead>
                <tr>
                    <th>dfad</th>
                    <th>t3wtaw3 On</th>
                    <th>dfw</th>
                    <th>Domain dawfd</th>
                    <th>p3p3</th>
                </tr>
            </thead>
            <tr>
                <td>1</td>
                <td>2</td>
                <td>3</td>
                <td>4</td>
                <td>5</td>
            </tr>
            <tr>
                <td>1</td>
                <td>2</td>
                <td>3</td>
                <td>4</td>
                <td>5</td>
            </tr>
            <tr>
                <td>1</td>
                <td>2</td>
                <td>3</td>
                <td>4</td>
                <td>5</td>
            </tr>
        </table>
    </td>
</tr>
<?php endforeach;?> 
```

在每一行数据之后，我想放置一个可以显示或隐藏的隐藏表，其中包含有关该活动的每个特定运行的附加信息。

我在 chrome 中收到此错误：Uncaught TypeError: Cannot read property 'className' of undefined

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-27T17:58:34.197

假设这个问题是指[jQuery DataTables](http://datatables.net/index) JavaScript 插件（假设因为我在提供的示例代码中没有提到 JS），我会按照作者在他的博客中概述的示例：http: [//datatables.net/blog /向下钻取行](http://datatables.net/blog/Drill-down_rows)

我以前用过这种方法，效果很好。

它确实假设您在呈现时将表初始化为空，然后使用 AJAX 获取数据，但我认为没有理由不能轻松地将其修改为在服务器端生成。

另一种选择是使用主/详细示例作为指南，您可以在此处找到示例代码：[http ://datatables.net/examples/api/row_details.html](http://datatables.net/examples/api/row_details.html)

# android - 如何从android铃声偏好中的铃声中过滤掉通知声音？

> ID：10354769
> 
> 赞同：0
> 
> 时间：2012-04-27T16:52:46.063
> 
> 标签：android, android-notifications

在我的应用程序中，我刚刚建立了铃声首选项，以便用户可以选择他们在收到通知时想要接收的声音类型，但是我在这里遇到的问题是显示的列表同时提供了电话铃声信使的呼叫和通知声音等，我只想要信使的通知声音，如果用户为电话选择铃声，我的应用程序可能会很快变得非常烦人。有没有办法从铃声声音中过滤通知声音？我看到其他应用程序这样做，但我无法找到在线方法，任何帮助都会非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T17:22:44.677

通过仅选择作为通知声音的音频来过滤列表。当您查询音频文件时，您需要在 where 子句中检查它： MediaStore.Audio.AudioColumns.IS_NOTIFICATION 是非零（并且所有其他字段，例如 IS_ALARM 是零）。您将在此处找到有关我所指的表列的更多信息：http: [//developer.android.com/reference/android/provider/MediaStore.Audio.AudioColumns.html](http://developer.android.com/reference/android/provider/MediaStore.Audio.AudioColumns.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T20:45:41.547

没关系，我想通了，对于xml中的铃声类型，我将其设置为全部，我只是将其更改为`android:ringtoneType="notification"`并解决了它，还有其他铃声类型用于警报等等，希望这可以帮助遇到同样情况的其他人问题！

# iphone - 启用 ARC 后自定义 MKAnnotationView 停止工作

> ID：10354771
> 
> 赞同：0
> 
> 时间：2012-04-27T16:53:07.467
> 
> 标签：iphone, objective-c, xcode, mkannotation

我已经实现了自定义 MKAnnotationView，并且在启用 ARC 之前它工作正常。initWithAnnotation 方法是这样实现的：

```
- (id)initWithAnnotation:(id <MKAnnotation>)annotation reuseIdentifier:(NSString *)reuseIdentifier 
{
    self.hasBuiltInDraggingSupport = [[MKAnnotationView class] instancesRespondToSelector:NSSelectorFromString(@"isDraggable")];

    if (self.hasBuiltInDraggingSupport)
    {
        MKPinAnnotationView *pinAnnView  = [[MKPinAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:reuseIdentifier];
        self = (AnnotationView*)pinAnnView;
        if (self) 
        [self performSelector:NSSelectorFromString(@"setDraggable:") withObject:[NSNumber numberWithBool:YES]];

    }
    self.canShowCallout = YES;
    return self;
} 
```

启用 ARC 后，我开始在以下行中收到 EXC_BAD_ACCESS：

```
self = (AnnotationView*)pinAnnView; 
```

目前我不知道会发生什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T17:07:26.713

原因是使用 ARC 时，变量一超出范围就会被释放，因此它永远不会离开函数。我有同样的问题，但我还没有找到解决方案。

# c++ - 基于类成员的存在/不存在专门化 C++ 模板？

> ID：10354774
> 
> 赞同：8
> 
> 时间：2012-04-27T16:53:14.037
> 
> 标签：c++, templates, template-specialization, typetraits

考虑以下：

```
struct A {
  typedef int foo;
};

struct B {};

template<class T, bool has_foo = /* ??? */>
struct C {}; 
```

我想根据类型名 T::foo 的存在与否来特化 C，以便 C<A> 获得一种特化，而 C<B> 获得另一种特化。这可能使用类型特征或其他一些模板魔法吗？

问题是我在实例化 C<B> 时尝试的所有操作都会产生编译错误，因为 B::foo 不存在。但这就是我想要测试的！

* * *

编辑：我认为 ildjarn 的答案更好，但我最终想出了以下 C++11 解决方案。伙计，它很老套，但至少它很短。:)

```
template<class T>
constexpr typename T::foo* has_foo(T*) {
  return (typename T::foo*) 1;
}
constexpr bool has_foo(...) {
  return false;
}
template<class T, bool has_foo = (bool) has_foo((T*)0)> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-27T17:05:22.337

另一种（C++03）方法：

```
template<typename T>
struct has_foo
{
private:
    typedef char no;
    struct yes { no m[2]; };

    static T* make();
    template<typename U>
    static yes check(U*, typename U::foo* = 0);
    static no check(...);

public:
    static bool const value = sizeof(check(make())) == sizeof(yes);
};

struct A
{
    typedef int foo;
};

struct B { };

template<typename T, bool HasFooB = has_foo<T>::value>
struct C
{
    // T has foo
};

template<typename T>
struct C<T, false>
{
    // T has no foo
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T16:58:23.197

这样的事情可能会有所帮助：[has_member](http://lists.boost.org/Archives/boost/2002/03/27229.php)。

```
typedef char (&no_tag)[1]; 
typedef char (&yes_tag)[2];

template< typename T > no_tag has_member_foo_helper(...);

template< typename T > yes_tag has_member_foo_helper(int, void (T::*)() = &T::foo);

template< typename T > struct has_member_foo {
    BOOST_STATIC_CONSTANT(bool
        , value = sizeof(has_member_foo_helper<T>(0)) == sizeof(yes_tag)
        ); }; 

template<class T, bool has_foo = has_member_foo<T>::value> 
struct C {}; 
```

# ios - 计算下载完成百分比时出错

> ID：10354783
> 
> 赞同：2
> 
> 时间：2012-04-27T16:54:43.437
> 
> 标签：ios, xcode

我有以下代码用于计算下载文件的百分比和剩余时间。我有来自 chilkat FTP2 模块的以下数据：字节/秒以及总文件大小和剩余文件大小。

怎么了？我仍然得到很高的负百分比数字和负数或非常小的时间（ 0.00213 ）

```
int Calcbytesreceived = [ftp.AsyncBytesReceived intValue];

int Calcdownloadrate = [ftp.DownloadRate intValue];

// data from FTP chilkat module: fileSize (bytes) ,  ForCalcbytesreceived (bytes) , ForCalcdownloadrate ( bytes / sec ) all Int format

double PercentOfFile = ( (double)Calcbytesreceived / (double)fileSize) * 100 ; 

double SecondsRemaining = ((double)fileSize - (double)Calcbytesreceived) / (double)Calcdownloadrate ;

double MinutesRemaining = (double)SecondsRemaining / 60 ;

NSLog(@"percent loaded = %@", PercentOfFile); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-27T17:03:36.690

PercentOfFile 是 double 类型。您需要使用“%f”而不是“%@”来显示双精度值。将最后一行更改为：

```
NSLog(@"percent loaded = %f", PercentOfFile); 
```

编辑：这是一个很好的资源链接，用于确定何时使用不同的 NSLog

[http://www.cocoadev.com/index.pl?NSLog](http://www.cocoadev.com/index.pl?NSLog)

# java - NoSuchMethodError 与 slfj4

> ID：10354785
> 
> 赞同：1
> 
> 时间：2012-04-27T16:54:54.613
> 
> 标签：java, maven, solr, slf4j

我正在尝试将 Solr 与 slfj4 和 logback 一起使用，当我使用 CTRL+C 关闭 Solr 时，出现此错误：

```
 java.lang.NoSuchMethodError: org.slf4j.spi.LocationAwareLogger.log(Lorg/slf4j/Marker;Ljava/lang/String;ILjava/lang/String;[Ljava/lang/Object;Ljava/lang/Throwable;)V 
```

这不会在编译时发生。

我在 1.6.4 版本中检查了 org.slf4j.spi.LocationAwareLogger.log 的方法签名，它似乎是正确的：

```
 public void log(Marker marker, String fqcn, int level, String message, Object[] argArray, Throwable t); 
```

**完整的堆栈跟踪：**

```
2012-04-27 12:02:09.806 [Shutdown] ERROR o.a.s.h.c.HttpShardHandlerFactory - java.lang.NoSuchMethodError: org.slf4j.spi.LocationAwareLogger.log(Lorg/slf4j/Marker;Ljava/lang/String;ILjava/lang/String;[Ljava/lang/Object;Ljava/lang/Throwable;)V
        at org.apache.commons.logging.impl.SLF4JLocationAwareLog.debug(SLF4JLocationAwareLog.java:133
)
        at org.apache.http.impl.conn.tsccm.ThreadSafeClientConnManager.shutdown(ThreadSafeClientConnManager.java:282)
        at org.apache.solr.handler.component.HttpShardHandlerFactory.close(HttpShardHandlerFactory.java:172)
        at org.apache.solr.core.CoreContainer.shutdown(CoreContainer.java:599)
        at org.apache.solr.servlet.SolrDispatchFilter.destroy(SolrDispatchFilter.java:124)
        at org.mortbay.jetty.servlet.FilterHolder.destroyInstance(FilterHolder.java:127)
        at org.mortbay.jetty.servlet.FilterHolder.doStop(FilterHolder.java:107)
        at org.mortbay.component.AbstractLifeCycle.stop(AbstractLifeCycle.java:76)
        at org.mortbay.jetty.servlet.ServletHandler.doStop(ServletHandler.java:176)        at org.mortbay.component.AbstractLifeCycle.stop(AbstractLifeCycle.java:76)
        at org.mortbay.jetty.handler.HandlerWrapper.doStop(HandlerWrapper.java:142)
        at org.mortbay.component.AbstractLifeCycle.stop(AbstractLifeCycle.java:76)
        at org.mortbay.jetty.handler.HandlerWrapper.doStop(HandlerWrapper.java:142)        at org.mortbay.jetty.servlet.SessionHandler.doStop(SessionHandler.java:125)
        at org.mortbay.component.AbstractLifeCycle.stop(AbstractLifeCycle.java:76)
        at org.mortbay.jetty.handler.HandlerWrapper.doStop(HandlerWrapper.java:142)
        at org.mortbay.jetty.handler.ContextHandler.doStop(ContextHandler.java:592)        at org.mortbay.jetty.webapp.WebAppContext.doStop(WebAppContext.java:537)
        at org.mortbay.jetty.plugin.Jetty6PluginWebAppContext.doStop(Jetty6PluginWebAppContext.java:1
23)
        at org.mortbay.component.AbstractLifeCycle.stop(AbstractLifeCycle.java:76)        at org.mortbay.jetty.handler.HandlerCollection.doStop(HandlerCollection.java:169)
        at org.mortbay.component.AbstractLifeCycle.stop(AbstractLifeCycle.java:76)
        at org.mortbay.jetty.handler.HandlerCollection.doStop(HandlerCollection.java:169)
        at org.mortbay.component.AbstractLifeCycle.stop(AbstractLifeCycle.java:76)        at org.mortbay.jetty.handler.HandlerWrapper.doStop(HandlerWrapper.java:142)
        at org.mortbay.jetty.Server.doStop(Server.java:283)
        at org.mortbay.component.AbstractLifeCycle.stop(AbstractLifeCycle.java:76)
        at org.mortbay.jetty.Server$ShutdownHookThread.run(Server.java:561) 
```

**我的`pom.xml`：**

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">

    <modelVersion>4.0.0</modelVersion>
    <groupId>com.shutterstock</groupId>
    <artifactId>solr</artifactId>
    <version>0.0.1</version>
    <packaging>war</packaging>
    <name>Apache Solr Web Application</name>
    <properties>
        <solr.build.dir>../build/solr-maven</solr.build.dir>
        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
    </properties>

    <repositories>
        <repository>
            <id>central</id>
            <name>Maven Repository Switchboard</name>
            <layout>default</layout>
            <url>http://repo1.maven.org/maven2</url>
        </repository>
        <repository>
            <id>trunk</id>
            <name>solr snapshots</name>
            <url>http://repository.apache.org/snapshots</url>
        </repository>
        <repository>
            <id>ubercraft</id>
            <name>ubercraft statsd packages</name>
            <url>https://oss.sonatype.org/content/repositories/releases</url>
        </repository>
    </repositories>

    <pluginRepositories>
        <pluginRepository>
            <id>central</id>
            <name>Maven Plugin Repository</name>
            <url>http://repo1.maven.org/maven2</url>
            <layout>default</layout>
        </pluginRepository>
    </pluginRepositories>

    <dependencies>
        <dependency>
            <groupId>org.apache.solr</groupId>
            <artifactId>solr</artifactId>
            <version>4.0-SNAPSHOT</version>
            <type>war</type>
        </dependency>
        <dependency>
            <groupId>org.apache.solr</groupId>
            <artifactId>solr-core</artifactId>
            <version>4.0-SNAPSHOT</version>
            <exclusions>
                <exclusion>
                    <artifactId>slf4j-api</artifactId>
                    <groupId>org.slf4j</groupId>
                </exclusion>
                <exclusion>
                    <artifactId>jcl-over-slf4j</artifactId>
                    <groupId>org.slf4j</groupId>
                </exclusion>
                <exclusion>
                    <artifactId>slf4j-jdk14</artifactId>
                    <groupId>org.slf4j</groupId>
                </exclusion>
            </exclusions>
        </dependency>
        <dependency>
            <groupId>org.apache.solr</groupId>
            <artifactId>solr-analysis-extras</artifactId>
            <version>4.0-SNAPSHOT</version>
            <exclusions>
                <exclusion>
                    <artifactId>slf4j-api</artifactId>
                    <groupId>org.slf4j</groupId>
                </exclusion>
            </exclusions>
        </dependency>
        <dependency>
            <groupId>org.apache.solr</groupId>
            <artifactId>solr-commons-csv</artifactId>
            <version>4.0-SNAPSHOT</version>
            <exclusions>
                <exclusion>
                    <artifactId>slf4j-api</artifactId>
                    <groupId>org.slf4j</groupId>
                </exclusion>
            </exclusions>
        </dependency>
        <dependency>
            <groupId>org.apache.lucene</groupId>
            <artifactId>lucene-core</artifactId>
            <version>4.0-SNAPSHOT</version>
            <type>jar</type>
        </dependency>
        <dependency>
            <groupId>org.apache.lucene</groupId>
            <artifactId>lucene-spatial</artifactId>
            <version>4.0-SNAPSHOT</version>
        </dependency>
        <dependency>
            <groupId>org.apache.lucene</groupId>
            <artifactId>lucene-queryparser</artifactId>
            <version>4.0-SNAPSHOT</version>
        </dependency>
        <dependency>
            <groupId>org.apache.lucene</groupId>
            <artifactId>lucene-analyzers-common</artifactId>
            <version>4.0-SNAPSHOT</version>
        </dependency>
        <dependency>
            <groupId>org.apache.lucene</groupId>
            <artifactId>lucene-queries</artifactId>
            <version>4.0-SNAPSHOT</version>
        </dependency>
        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>slf4j-api</artifactId>
            <version>1.6.4</version>
        </dependency>
        <dependency>
            <groupId>ch.qos.logback</groupId>
            <artifactId>logback-classic</artifactId>
            <version>0.9.22</version>
        </dependency>
        <dependency>
            <groupId>org.ubercraft.statsd</groupId>
            <artifactId>statsd-over-slf4j</artifactId>
            <version>1.0.0</version>
        </dependency>
    </dependencies>

    <build>
        <plugins>
            <plugin>
                <groupId>org.mortbay.jetty</groupId>
                <artifactId>maven-jetty-plugin</artifactId>
                <version>6.1.26</version>
            </plugin>
        </plugins>
    </build>

</project> 
```

**Maven依赖树：**

```
$ mvn dependency:tree
[INFO] Scanning for projects...
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building Apache Solr Web Application 0.0.1
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- maven-dependency-plugin:2.1:tree (default-cli) @ solr ---
[INFO] com.shutterstock:solr:war:0.0.1
[INFO] +- org.apache.solr:solr:war:4.0-SNAPSHOT:compile
[INFO] +- org.apache.solr:solr-core:jar:4.0-SNAPSHOT:compile
[INFO] |  +- org.apache.solr:solr-solrj:jar:4.0-SNAPSHOT:compile
[INFO] |  |  \- org.apache.zookeeper:zookeeper:jar:3.3.4:compile
[INFO] |  +- org.apache.lucene:lucene-analyzers-kuromoji:jar:4.0-SNAPSHOT:compile
[INFO] |  +- org.apache.lucene:lucene-analyzers-morfologik:jar:4.0-SNAPSHOT:compile
[INFO] |  |  \- org.carrot2:morfologik-polish:jar:1.5.2:compile
[INFO] |  |     \- org.carrot2:morfologik-stemming:jar:1.5.2:compile
[INFO] |  |        \- org.carrot2:morfologik-fsa:jar:1.5.2:compile
[INFO] |  +- org.apache.lucene:lucene-analyzers-phonetic:jar:4.0-SNAPSHOT:compile
[INFO] |  +- org.apache.lucene:lucene-highlighter:jar:4.0-SNAPSHOT:compile
[INFO] |  +- org.apache.lucene:lucene-memory:jar:4.0-SNAPSHOT:compile
[INFO] |  +- org.apache.lucene:lucene-misc:jar:4.0-SNAPSHOT:compile
[INFO] |  +- org.apache.lucene:lucene-suggest:jar:4.0-SNAPSHOT:compile
[INFO] |  +- org.apache.lucene:lucene-grouping:jar:4.0-SNAPSHOT:compile
[INFO] |  +- commons-codec:commons-codec:jar:1.6:compile
[INFO] |  +- commons-fileupload:commons-fileupload:jar:1.2.1:compile
[INFO] |  +- org.apache.httpcomponents:httpmime:jar:4.1.3:compile
[INFO] |  |  +- org.apache.httpcomponents:httpcore:jar:4.1.4:compile
[INFO] |  |  \- commons-logging:commons-logging:jar:1.1.1:compile
[INFO] |  +- commons-io:commons-io:jar:2.1:compile
[INFO] |  +- commons-lang:commons-lang:jar:2.6:compile
[INFO] |  +- com.google.guava:guava:jar:r05:compile
[INFO] |  +- org.codehaus.woodstox:wstx-asl:jar:3.2.7:runtime
[INFO] |  \- org.apache.httpcomponents:httpclient:jar:4.1.3:compile
[INFO] +- org.apache.solr:solr-analysis-extras:jar:4.0-SNAPSHOT:compile
[INFO] |  +- org.apache.lucene:lucene-analyzers-icu:jar:4.0-SNAPSHOT:compile
[INFO] |  |  \- com.ibm.icu:icu4j:jar:4.8.1.1:compile
[INFO] |  +- org.apache.lucene:lucene-analyzers-smartcn:jar:4.0-SNAPSHOT:compile
[INFO] |  \- org.apache.lucene:lucene-analyzers-stempel:jar:4.0-SNAPSHOT:compile
[INFO] +- org.apache.solr:solr-commons-csv:jar:4.0-SNAPSHOT:compile
[INFO] +- org.apache.lucene:lucene-core:jar:4.0-SNAPSHOT:compile
[INFO] +- org.apache.lucene:lucene-spatial:jar:4.0-SNAPSHOT:compile
[INFO] |  \- com.spatial4j:spatial4j:jar:0.2:compile
[INFO] +- org.apache.lucene:lucene-queryparser:jar:4.0-SNAPSHOT:compile
[INFO] |  \- org.apache.lucene:lucene-sandbox:jar:4.0-SNAPSHOT:compile
[INFO] |     \- jakarta-regexp:jakarta-regexp:jar:1.4:compile
[INFO] +- org.apache.lucene:lucene-analyzers-common:jar:4.0-SNAPSHOT:compile
[INFO] +- org.apache.lucene:lucene-queries:jar:4.0-SNAPSHOT:compile
[INFO] +- org.slf4j:slf4j-api:jar:1.6.4:compile
[INFO] +- ch.qos.logback:logback-classic:jar:0.9.22:compile
[INFO] |  \- ch.qos.logback:logback-core:jar:0.9.22:compile
[INFO] \- org.ubercraft.statsd:statsd-over-slf4j:jar:1.0.0:compile
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 2.383s
[INFO] Finished at: Fri Apr 27 12:14:43 EDT 2012
[INFO] Final Memory: 10M/482M
[INFO] ------------------------------------------------------------------------ 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-27T17:07:34.153

确保您使用的是 sfl4j 的正确版本

从例外：

```
 2012-04-27 12:02:09.806 [Shutdown] ERROR o.a.s.h.c.HttpShardHandlerFactory - java.lang.NoSuchMethodError: org.slf4j.spi.LocationAwareLogger.log(Lorg/slf4j/Marker;Ljava/lang/String;ILjava/lang/String;[Ljava/lang/Object;Ljava/lang/Throwable;)V
        at org.apache.commons.logging.impl.SLF4JLocationAwareLog.debug(SLF4JLocationAwareLog.java:133
)
        at org.apache.http.impl.conn.tsccm.ThreadSafeClientConnManager.shutdown(ThreadSafeClientConnManager.java:282)
        a 
```

表明错误来自 Apache HTTP 的库，来自您的 maven 依赖树，它包含：

```
org.apache.httpcomponents:httpclient:jar:4.1.3 
```

根据他们的文档[here](http://hc.apache.org/httpcomponents-client-ga/httpclient-cache/dependencies.html)，在您使用 1.6.4 时使用 slf4j 版本 1.5.11

# c++ - boost::singleton_pool 中的对象创建

> ID：10354786
> 
> 赞同：3
> 
> 时间：2012-04-27T16:54:56.237
> 
> 标签：c++, memory-management, boost-pool

我正在尝试使用[boost::singleton_pool](http://www.boost.org/doc/libs/1_48_0/libs/pool/doc/html/boost_pool/pool/interfaces.html#boost_pool.pool.interfaces.interfaces.singleton_pool)在高性能关键多线程应用程序中创建大量“订单”类型的对象。查看文档，这是我应该做的，

```
struct OrderTag{};
typedef boost::singleton_pool<OrderTag, sizeof(Order)> OrderPool; 
```

boost::singleton_pool 有一个静态成员函数 malloc，它返回 void* 的指针，但我需要通过调用其构造函数在 OrderPool 中创建 Order 类型的对象。我应该使用[boost::pool_allocator](http://www.boost.org/doc/libs/1_48_0/libs/pool/doc/html/boost/pool_allocator.html)和 singleton_pool 来这样做吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T22:24:32.523

简而言之：没有。boost::pool_allocator 实现本身使用 boost::singleton_pool 并提供像 std::allocator 这样的接口，因此您可以将它与向量、列表等 STL 容器（但不仅是 STL 并且不仅是容器）一起使用。 UserAllocator 概念不像boost::pool_allocator 但它是在最低级别控制内存管理的东西。例如，我编写了 UserAllocator，它通过 mmap() 函数分配内存，根本不使用堆。

因此，要创建“订单”类型的对象，您应该使用[boost::pool_allocator](http://www.boost.org/doc/libs/1_48_0/libs/pool/doc/html/boost/pool_allocator.html)或[boost::fast_pool_allocator](http://www.boost.org/doc/libs/1_48_0/libs/pool/doc/html/boost/fast_pool_allocator.html)。在您的情况下，没有必要直接使用 boost::singleton_pool 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-29T12:51:07.337

您可以像这样使用`singleton_pool`放置`new`：

```
Order* p = new (OrderPool.malloc()) Order(/* add ctor parameters if any*/); 
```

或使用`boost::object_pool<Order>`

# html - 如何解决我的 MailChimp HTML 时事通讯的跨浏览器问题？

> ID：10354793
> 
> 赞同：0
> 
> 时间：2012-04-27T16:55:46.907
> 
> 标签：html, html-email, html-table, mailchimp

我的 HTML 时事通讯遇到了很多浏览器不一致的情况。是否有任何明显的问题可以通过查看代码来诊断？例如，时事通讯的高度非常长，远远超出了内容的高度。这只是一个具体问题。

```
 <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

    <!-- Facebook sharing information tags -->
    <meta property="og:title" content="*|MC:SUBJECT|*" />

    <title>*|MC:SUBJECT|*</title>

    <style type="text/css">

        /* Client-specific Styles */
        #outlook a{padding:0;} /* Force Outlook to provide a "view in browser" button. */
        body{width:100% !important;} .ReadMsgBody{width:100%;} .ExternalClass{width:100%;} /* Force Hotmail to display emails at full width */
        body{-webkit-text-size-adjust:none;} /* Prevent Webkit platforms from changing default text sizes. */

        /* Reset Styles */
        body{margin:0; padding:0;}
        img{border:0; height:auto; line-height:100%; outline:none; text-decoration:none;}
        table td{border-collapse:collapse;}
        #backgroundTable{height:100% !important; margin:0; padding:0; width:100% !important;}

        body, #backgroundTable{
             background-color:#FAFAFA;
             font-family: Arial;
        }
        #templateContainer{
             border: 1px solid #DDDDDD;
        }
        p {
            color: #5a5a5a;
        }
        a {
            color: #8b8b8b;
        }
        h1, .h1{
            color:#202020;
            display:block;
            font-family:Arial;
            font-size:16px;
            font-weight:bold;
            line-height:100%;
            margin-top:0;
            margin-right:0;
            margin-bottom:10px;
            margin-left:0;
            text-align:left;
        }

        h2, .h2{
            color:#202020;
            display:block;
            font-family:Arial;
            font-size:22px;
            font-weight:bold;
            line-height:100%;
            margin-top:0;
            margin-right:0;
            margin-bottom:10px;
            margin-left:0;
            text-align:left;
        }

        h3, .h3{
            color:#202020;
            display:block;
            font-family:Arial;
            font-size:16px;
            font-weight:normal;
            line-height:100%;
            margin-top:0;
            margin-right:0;
            margin-bottom:10px;
            margin-left:0;
             text-align:left;
        }
        h4, .h4{
             color:#202020;
            display:block;
             font-family:Arial;
             font-size:22px;
             font-weight:bold;
             line-height:100%;
            margin-top:0;
            margin-right:0;
            margin-bottom:10px;
            margin-left:0;
             text-align:left;
        }
        #templatePreheader{
             background-color:#FAFAFA;
        }
        .preheaderContent div{
             color:#505050;
             font-family:Arial;
             font-size:10px;
             line-height:100%;
             text-align:left;
        }
        .preheaderContent div a:link, .preheaderContent div a:visited, /* Yahoo! Mail Override */ .preheaderContent div a .yshortcuts /* Yahoo! Mail Override */{
             color:#336699;
             font-weight:normal;
             text-decoration:underline;
        }
        #templateHeader{
             background-color:#FFFFFF;
             border-bottom:0;
        }
        .headerContent{
             color:#202020;
             font-family:Arial;
             font-size:34px;
             font-weight:bold;
             line-height:100%;
             padding:0;
             text-align:center;
             vertical-align:middle;
        }
        .headerContent a:link, .headerContent a:visited, /* Yahoo! Mail Override */ .headerContent a .yshortcuts /* Yahoo! Mail Override */{
             color:#336699;
             font-weight:normal;
             text-decoration:underline;
        }
        #headerImage{
            height:auto;
            max-width:600px;
        }
        #templateContainer, .bodyContent{
             background-color:#FFFFFF;
        }
        .bodyContent div{
             color:#505050;
             font-family:Arial;
             font-size:14px;
             line-height:150%;
             text-align:left;
        }
        .bodyContent div a:link, .bodyContent div a:visited, /* Yahoo! Mail Override */ .bodyContent div a .yshortcuts /* Yahoo! Mail Override */{
             color:#336699;
             font-weight:normal;
             text-decoration:underline;
        }
        .bodyContent img{
            display:inline;
            height:auto;
        }
        .leftColumnContent{
             background-color:#FFFFFF;
        }

        .leftColumnContent div{
             color:#505050;
             font-family:Arial;
             font-size:14px;
             line-height:150%;
             text-align:left;
        }
        .leftColumnContent div a:link, .leftColumnContent div a:visited, /* Yahoo! Mail Override */ .leftColumnContent div a .yshortcuts /* Yahoo! Mail Override */{
             color:#336699;
             font-weight:normal;
             text-decoration:underline;
        }
        .leftColumnContent img{
            display:inline;
            height:auto;
        }

        .rightColumnContent{
             background-color:#FFFFFF;
        }
        .rightColumnContent div{
             color:#505050;
             font-family:Arial;
             font-size:14px;
             line-height:150%;
             text-align:left;
        }
        .rightColumnContent div a:link, .rightColumnContent div a:visited, /* Yahoo! Mail Override */ .rightColumnContent div a .yshortcuts /* Yahoo! Mail Override */{
             color:#336699;
             font-weight:normal;
             text-decoration:underline;
        }
        .rightColumnContent img{
            display:inline;
            height:auto;
        }

        #templateFooter{
             background-color:#FFFFFF;
             border-top:0;
        }
        .footerContent div{
             color:#707070;
             font-family:Arial;
             font-size:12px;
             line-height:125%;
             text-align:left;
        }
        .footerContent div a:link, .footerContent div a:visited, /* Yahoo! Mail Override */ .footerContent div a .yshortcuts /* Yahoo! Mail Override */{
             color:#336699;
             font-weight:normal;
             text-decoration:underline;
        }
        .footerContent img{
            display:inline;
        }
        #social{
             background-color:#FAFAFA;
             border:0;
        }
        #social div{
             text-align:center;
        }
        #utility{
             background-color:#FFFFFF;
             border:0;
        }

        #utility div{
             text-align:center;
        }

        #monkeyRewards img{
            max-width:190px;
        }
        ol {
            padding-left: 20px;
        }
        li {
            margin-bottom: 10px;
        }
        .letter-from-editor {
            float: left;
            display: inline;
            color: #24ae04;
            font-size: 22px;
            margin-left: 40px;
        }
        .publication-date {
            float: right;
            margin-top: 0;
            text-transform: uppercase;
            margin-right: 20px;
            font-size: 12px;
        }
        td.bodyContent {
            padding: 25px;
        }
        .support {
            text-align: center;
            color: #24ae04;
            font-size: 22px;
            margin: 15px 0;
        }
        .continue-reading {
            text-decoration: none;
        }
        .footer-links {
            font-size: 12px;
            text-decoration:none;
        }
        .the-footer {
            width: 600px;
            text-align: right;
            margin:20px 0 50px 0;
        }
        .all-footer-links {
            margin-top: 65px; 
            border-top: 1px solid #e8e8e8; 
            border-bottom: 1px solid #e8e8e8; 
            width: 600px;
            padding: 15px 0 15px 0;
            text-align: right;
            font-size: 12px; 
            color:#e8e8e8;"
        }
    </style>
</head>

<body leftmargin="0" marginwidth="0" topmargin="0" marginheight="0" offset="0">
    <center>

        <table border="0" cellpadding="0" cellspacing="0" height="100%" width="100%" id="backgroundTable">
            <tr> 
                <td align="center" valign="top">
                    <!-- // Begin Template Preheader \\ -->
                    <table border="0" cellpadding="0" cellspacing="0" width="100%" id="templatePreheader">
                        <tr>
                            <td valign="top" class="preheaderContent">

                                <!-- // Begin Module: Standard Preheader \ -->
                                <table border="0" cellpadding="10" cellspacing="0" width="100%">
                                    <tr>
                                        <!-- *|IFNOT:ARCHIVE_PAGE|* -->
                                        <td valign="top" style="background-color: #000000;color: #FFFFFF;">
                                            <div mc:edit="header_links" style="text-align:center;">
                                                Having trouble viewing this email? <a target="_blank" href="*|ARCHIVE|*" target="_blank">View it in your browser</a>
                                            </div>
                                        </td>
                                        <!-- *|END:IF|* -->
                                    </tr>
                                </table>
                                <!-- // End Module: Standard Preheader \ -->

                            </td>
                        </tr>
                    </table>
                    <!-- // End Template Preheader \\ --> 

                    <table border="0" cellpadding="0" cellspacing="0" height="100%" width="100%" id="backgroundTable">
                        <tr>
                            <td align="center" valign="top">
                            <!-- // Begin Template Preheader \\ -->
                            <table border="0" cellpadding="0" cellspacing="0" width="100%" id="templatePreheader" style="border-bottom:1px solid #e8e8e8;">
                                <tr>
                                    <td valign="top" class="preheaderContent">
                                    <!-- // Begin Module: Standard Preheader \ -->
                                    <table border="0" cellpadding="0" cellspacing="0" width="100%">
                                        <tr>
                                        <!-- <td valign="top">
                                        <div mc:edit="std_preheader_content">
                                        Use this area to offer a short teaser of your email's content. Text here will show in the preview area of some email clients.
                                        </div>
                                        </td> -->
                                        <!-- *|IFNOT:ARCHIVE_PAGE|* -->
                                        <td valign="top" style="background-color: #FFFFFF;">
                                            <div mc:edit="message" style="text-align:left; margin:30px auto; width:600px;">
                                                <h1 style="color:#3db0df;">example's Weekly Newsletter</h1>
                                                <p mc:edit="top-header-message" style="width:440px;display:inline;font-size:12px;line-height:140%;">Each week we'll keep you informed about features, products, and service<br>updates. Be sure to go to our <a target="_blank" href="http://www.example.com">website</a> and follow us on <a target="_blank" href="http://www.twitter.com/example">twitter</a> for more<br>frequent news in between.</p>
                                                <img mc:edit="logo-main" style="float:right;margin-top:-55px;" src="logo.png" />
                                            </div>
                                        </td>
                                        <!-- *|END:IF|* -->
                                    </tr>
                                </table>
                                <!-- // End Module: Standard Preheader \ -->
                            </td>
                        </tr>
                    </table>
                    <!-- // End Template Preheader \\ -->

                    <table border="0" cellpadding="0" cellspacing="0" width="600" style="margin-top:50px;">
                        <tr>
                            <td align="center" valign="top">
                                <h1 mc:edit="from-the-editor" class="letter-from-editor">A letter from the editor</h1>
                                <p mc:edit="publication-date" class="publication-date">March 28, 2012</p>
                            </td>
                        </tr>
                    </table>

                    <table border="0" cellpadding="0" cellspacing="0" width="600" id="templateContainer">
                        <tr>
                            <td align="center" valign="top">
                                <!-- // Begin Template Header \\ -->
                                <table border="0" cellpadding="0" cellspacing="0" width="600" id="templateHeader">
                                    <tr>
                                        <td class="headerContent">

                                            <!-- // Begin Module: Standard Header Image \\ -->
                                            <img src="header.png" style="max-width:600px;" id="headerImage campaign-icon" mc:label="header_image" mc:edit="header_image" mc:allowdesigner mc:allowtext />
                                            <!-- // End Module: Standard Header Image \\ -->

                                        </td>
                                    </tr>
                                </table>
                                <!-- // End Template Header \\ -->
                            </td>
                        </tr>
                        <tr>
                            <td align="center" valign="top">
                                <!-- // Begin Template Body \\ -->
                                <table border="0" cellpadding="0" cellspacing="0" width="600" id="templateBody">
                                    <tr>
                                        <td colspan="3" valign="top" class="bodyContent">

                                            <!-- // Begin Module: Standard Content \\ -->
                                            <table border="0" cellpadding="20" cellspacing="0" width="100%" height="100%">
                                                <tr>
                                                    <td valign="top">
                                                        <div mc:edit="std_content00">
                                                            <h2 class="h2" style="color: #3db0df;">5 Ways To Be Happy Right Now</h2>
                                                            <p>Down in the dumps. The Blues. The doldrums. No matter what you call it - sometimes, even if you are the happiest person around, you start to feel like crud.</p>
                                                            <p>This week there seems to be a crazy amount of negative info swirling around - whether it's deadly tornados or horrible rhetoric as the Republican primaries heat up (especially negative for women on this one, but I'll try to not get political!) And, I guess some of this finally got to me...so I tried everything I could to get myself out of my funk.</p>

                                                            <h3 class="h3" style="color: #3db0df;"><em>Here were the 5 things that worked the best:</em></h3>
                                                            <ol>
                                                                <li>I did a <strong>20 minute workout</strong> (mostly going for brisk walks) right after I woke up in the morning - before I started my day. No matter what happened that day, i knew i had done something good for myself. That made me happy.</li>
                                                                <li>I made sure to <strong>drink a lot of water</strong>. Dehydration is very fatiguing on the body - this fatigue can quickly turn to crankiness. So drink up!</li>
                                                                <li>I <strong>made a playlist</strong> of 'pump up' tunes. Played them on blast and repeat. I made sure to choose songs that had great memories attached and got my heart rate going. It's amazing how much dancing around your house (or apartment) totally uninhibited, can put a smile on your face!</li>
                                                                <li>Made a point to <strong>hang out with a friend that really makes me feel good</strong> - is a lot of energy and has a great sense of humor. Laughter is always the best medicine for the blues.</li>
                                                                <li><strong>Read example</strong>, of course! There is so much great stuff here, that i can always find something to cheer me up. ;) (some of those great finds are below!)</li>
                                                                <p>Hope you are having an excellent week!</p>
                                                                <p>Be well,</p>
                                                                <p>Erin</p>
                                                            </ol>
                                                        </div>
                                                    </td>
                                                </tr>
                                            </table>
                                            <!-- // End Module: Standard Content \\ -->
                                        </td>
                                    </tr>
                                </table>
                                <!-- // End Template Body \\ -->
                            </td>
                        </tr>
                    </table>
                    <br />
                </td>
            </tr>
        </table>

        <br>

        <table>
            <tr>
                <td valign="top" width="275" class="leftColumnContent">
                    <!-- // Begin Module: Top Image with Content \\ -->
                    <table border="0" cellpadding="0" cellspacing="0" width="100%" height="400">
                        <tr mc:repeatable>
                            <td valign="top" style="border:1px solid #e8e8e8;">
                                <img src="bulb.png" mc:label="image" mc:edit="post1" />
                                <div mc:edit="tiwc300_content00" style="padding:20px;">
                                   <h4 class="h4" style="color:#3db0df;">3 Tips for Finding Positivity in an Endlessly Negative Workplace</h4>
                                   <p>Today’s society is riddled with negativity. Maybe it’s like this for every generation...</p>
                                   <a target="_blank" href="" style="text-decoration:none;color:#3db0df;">Continue Reading >></a>
                                </div>
                            </td>
                        </8r>
                    </table>
                    <!-- // End Module: Top Image with Content \\ -->
                </td>

                <td width="44"></td>

                <td valign="top" width="275" class="rightColumnContent">

                    <!-- // Begin Module: Top Image with Content \\ -->
                    <table border="0" cellpadding="0" cellspacing="0" width="100%" height="400">
                        <tr mc:repeatable>
                            <td valign="top" style="border: 1px solid #e8e8e8;">
                                <img src="dog.png" mc:label="image" mc:edit="post2"/>
                                <div mc:edit="post2" style="padding:20px;">
                                   <h4 class="h4" style="color:#3db0df;">What to Do When You Don’t Feel Like Doing Anything</h4>
                                   <p>Where in your life is stress a noticeable concern? Maybe you get stressed out from work, family responsibilities...</p>
                                   <a target="_blank" href="" style="text-decoration:none;color:#3db0df;">Continue Reading >></a>
                                </div>
                            </td>
                        </tr>
                    </table>
                    <!-- // End Module: Top Image with Content \\ -->
                </td>
            </tr>
        </table>

        <table>
            <h1 mc:edit="sponsor" class="support">example is pleased to support</h1>
        </table>

        <table border="0" cellpadding="0" cellspacing="0" height="100%" width="600" style="background-color:#FFFFFF;">
            <div style="width:600px;background-color:#FFFFFF;padding:10px 0;margin-bottom:70px;">
                <img mc:edit="advertisement" src="ad.png" />
            </div>
        </table>

        <table border="0" cellpadding="0" cellspacing="0" height="100%" width="600" style="background-color: #FFFFFF; border-top:1px solid #e8e8e8;">
            <div class="all-footer-links" style="margin-right:20px;">
                <div style="float:left;margin:-127px 0 0 0;">
                    <img mc:edit="footer-logo" src="logo-footer.png"/>
                </div>
                <div style="margin-right:10px;">
                    <a target="_blank" class="footer-links" href="http://www.example.com/blog/motivation/">Motivation</a> | 
                    <a target="_blank" class="footer-links" href="http://www.example.com/blog/productivity/">Productivity</a> | 
                    <a target="_blank" class="footer-links" href="http://www.example.com/blog/health/">Health</a> | 
                    <a target="_blank" class="footer-links" href="http://www.example.com/blog/self-improvement/">Self Improvement</a> | 
                    <a target="_blank" class="footer-links" href="http://www.example.com/blog/contact/">Contact Us</a>
                </div>
            </div>
            <div mc:edit="footer-links" class="the-footer">
                <p style="float:left;font-size:10px;margin-left:10px;">Copyright &copy; 2012 example</p>
                <div style="margin-right:10px;">
                    <a target="_blank" href="http://www.facebook.com/example"><img mc:edit="facebook" src="facebook.png" /></a>
                    <a target="_blank" href="http://www.twitter.com/example"><img mc:edit="twitter" src="twitter.png" /></a>
                    <a target="_blank" href="https://plus.google.com/102257056998496075187"><img mc:edit="googleplus" src="googleplus.png" /></a>
                    <a target="_blank" href="http://feeds.feedburner.com/example/LYVv/"><img mc:edit="rss" src="rss.png" /></a>
                </div>
            </div>
        </table>
    </center>
</body> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T17:17:27.613

电子邮件客户端会忽略 CSS 类。如果您使用独立客户端（如 Outlook Express）来查看您的电子邮件，`div`s 也将不起作用（`float:left`将被忽略）。

我建议您更改您的 HTML 页面，例如 -

*   把所有东西都丢在外面`<body>...</body>`
*   使用`<table>`代替`<div>`
*   不要使用`<style>`标签来定义样式类，或者使用`.css`文件来加载样式。而是像/容器一样使用*内联 css 。*希望这可以帮助您进行电子邮件模板设计。`style="...."``<td>``<table>`

这样，您可以使您的电子邮件跨浏览器兼容所有网站（如 gmail.com）和独立客户端（如 Outlook Express）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T17:24:46.597

1 - 将高度更改为自动

`#backgroundTable{height:auto; margin:0; padding:0; width:100% !important;}`

2 - 添加`text-aligh:center`到 TD

`<td valign="top" style="text-align:center;background-color: #FFFFFF;"> <div mc:edit="message" style="text-align:left; margin:30px auto; width:600px;"> <h1 style="color:#3db0df;">example's Weekly Newsletter</h1> <p mc:edit="top-header-message" style="width:440px;display:inline;font-size:12px;line-height:140%;">Each week we'll keep you informed about features, products, and service<br>updates. Be sure to go to our <a target="_blank" href="http://www.example.com">website</a> and follow us on <a target="_blank" href="http://www.twitter.com/example">twitter</a> for more<br>frequent news in between.</p> <img mc:edit="logo-main" style="float:right;margin-top:-55px;" src="logo.png" /> </div> </td>`

3 - 将高度更改为自动

`<table border="0" cellpadding="0" cellspacing="0" height="auto" width="600" style="background-color:#FFFFFF;"> <div style="width:600px;background-color:#FFFFFF;padding:10px 0;margin-bottom:70px;"> <img mc:edit="advertisement" src="ad.png" /> </div> </table>`

# solr - solr 索引文档但不在其中搜索

> ID：10354795
> 
> 赞同：1
> 
> 时间：2012-04-27T16:55:56.897
> 
> 标签：solr

我是 Solr 的新手，我正在尝试 Solr(3.6) package( `apache-solr-3.6.0.tgz`) 的示例文件夹中的示例。我启动了服务器并在其中发布了示例*xml*文件`example/exampledocs`，然后我可以搜索东西，Solr 会返回匹配项，一切都很好。但后来我尝试发布另一个包含 10,000 多个文档的 xml 文件。我修改了`example/solr/conf/schema.xml`文件以添加我的 xml 文件的字段，然后重新启动服务器并发布了我的 xml 文件。我检查了 Solr 管理面板（`http://localhost:8983/solr/admin/stats.jsp`）中的统计信息，它显示`numDocs : 10020`. 现在这意味着文件已成功过帐。但是当我搜索我发布的文档中存在的任何内容（来自 10,000 个文档 xml 文件）时，它返回 0 个结果。但是 Solr 仍然能够返回与`example/exampledocs`文件夹中默认出现的文档内容相匹配的搜索结果。我对这里发生的事情一无所知。的值`numDoc`清楚地表明我在 xml 文件中发布的文档已被索引。还有什么我可以检查的，看看这有什么问题吗？

Solr 包的示例中的模式是这样的

```
<field name="id" type="string" indexed="true" stored="true" required="true"/>
<field name="sku" type="text_en_splitting_tight" indexed="true" stored="true" omitNorms="true"/>
<field name="name" type="text_general" indexed="true" stored="true"/><field name="alphaNameSort" type="alphaOnlySort" indexed="true" stored="false"/>
<field name="manu" type="text_general" indexed="true" stored="true" omitNorms="true"/>
<field name="cat" type="string" indexed="true" stored="true" multiValued="true"/>
<field name="features" type="text_en_splitting" indexed="true" stored="true" multiValued="true"/>
<field name="includes" type="text_general" indexed="true" stored="true" termVectors="true" termPositions="true" termOffsets="true"/>
<field name="weight" type="float" indexed="true" stored="true"/>
<field name="price" type="float" indexed="true" stored="true"/>
<field name="popularity" type="int" indexed="true" stored="true"/>
<field name="title" type="text_general" indexed="true" stored="true" multiValued="true"/>
<field name="subject" type="text_general" indexed="true" stored="true"/>
<field name="description" type="text_general" indexed="true" stored="true"/>
<field name="inStock" type="boolean" indexed="true" stored="true"/> 
```

和更多....

我发布的 xml 文件的架构与上述架构有一些共同的字段，如标题、描述、价格等，所以我像这样在 schema.xml 中输入了其余字段

```
<field name="cid" type="int" indexed="false" stored="false"/>
<field name="discount" type="float" indexed="true" stored="true"/>
<field name="link" type="string" indexed="true" stored="true"/>
<field name="status" type="string" indexed="true" stored="true"/>
<field name="pubDate" type="string" indexed="true" stored="true"/>
<field name="image" type="string" indexed="false" stored="false"/> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-30T00:31:57.667

如果您使用 Solr 示例站点中的默认设置，那么凭借请求处理程序`df`的 solrconfig.xml 文件中的`/select`设置，它将默认搜索字段设置为该`text`字段。

```
<requestHandler name="/select" class="solr.SearchHandler">
   <!-- default values for query parameters can be specified, these
        will be overridden by parameters in the request
    -->
   <lst name="defaults">
     <str name="echoParams">explicit</str>
     <int name="rows">10</int>
     <str name="df">text</str>
   </lst>
  ....
 </requestHandler> 
```

如果您查看字段定义正下方的 schema.xml 文件，您将看到多个`copyField`设置将值从某些字段移动到`text`字段中，因此可以通过默认字段设置进行搜索。在您在标题字段中搜索的示例中`Sony`，如果您查看 copyField 语句，您将看到该`title`字段没有被复制到`text`默认搜索字段。因此，具有 Sony 标题值的文档不会在您的查询中返回。

我建议如下：

1.  通过指定以下内容尝试查询：`title:Sony`应该返回您所期望的。
2.  如果您希望该`title`字段包含在默认查询字段中，则将以下 copyField 语句添加到 schema.xml 文件并重新加载您的 10000 文档文件。 `<copyField source="title" dest="text">`

我希望这有帮助。

# git - 如何在将 HEAD 保持在当前变更集上的同时签出另一个变更集？

> ID：10354798
> 
> 赞同：2
> 
> 时间：2012-04-27T16:56:34.330
> 
> 标签：git

我正在查看我最近的两个变更集：

```
$ git log --oneline
123798 most recent stuff
349873 earlier changes
... 
```

目前，我正在使用“最新内容”变更集。我想要做的是让 HEAD 指针停留在这个变更集上，但让文件看起来好像我在“早期更改”中。与 的相反`git reset --soft`，HEAD 指针移动但文件不改变。

**编辑**

我发现的工作就是做

```
$ git checkout 349873
$ git reset --soft 123798
$ git reset HEAD 
```

所以这描述了我*想要*发生的事情。但我想知道是否有更简洁的方法来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T16:58:16.627

```
git update-ref HEAD <desired-SHA> 
```

这不会触及您的工作副本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T19:45:04.290

我不知道执行此操作的更短方法，但是：

```
if current=$(git symbolic-ref HEAD); then
    git checkout $@
    git symbolic-ref HEAD $current
fi 
```

做一个shell脚本的伎俩。（这当然是一件不寻常的事情......）你会从 checkout 命令中得到通常的“分离的 HEAD”消息，随后尝试回到你开始的任何分支都会抱怨你已经在它，即使你不是。

（以上假设您在某个分支的顶端并希望留在那里。如果您已经处于`detached HEAD`状态，它将抱怨没有符号引用。使用`rev=$(git rev-parse HEAD)`而不是找到 rev HEAD 是什么，然后使用`git update-ref HEAD $rev`返回那里。）

# php - 美德文件上传没有选项

> ID：10354799
> 
> 赞同：0
> 
> 时间：2012-04-27T16:56:42.693
> 
> 标签：php, joomla, virtuemart

**我在Joomla 2.5**版本上安装了**virtumart** 2.0.2版本。当我将文件上传到产品**时，它只支持图像文件**，不允许使用其他类型的文件。谁能帮我解决这个问题

 ***** * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T01:00:15.073

1.  首先升级到最新版本（[2.0.6](http://virtuemart.net/news/list-all-news/418-virtuemart-206-bug-fix-release-new-languages-more-security)）在 2.0.6 之前的 VM 存在严重的安全问题（即使[2.0.4 也有严重的安全修复](http://virtuemart.net/news/list-all-news/417-happy-easter-new-virtuemart-204-released-security-update-sqli)，会更好）

2.  产品镜像界面仅针对镜像构建，如果您希望上传其他文件以用作虚拟产品，则需要升级并添加 VM 扩展。

3.  我认为是 2.0.4 为电子商品添加了更好的支持，但为了能够[销售和运送虚拟商品，您将需要此扩展](http://extensions.virtuemart.net/extensions-virtuemart-2/shipment-for-virtual-products-detail)（来自 VM 的核心开发人员）****

# asp.net - 网站认证

> ID：10354800
> 
> 赞同：0
> 
> 时间：2012-04-27T16:56:55.140
> 
> 标签：asp.net, c#-4.0

我只想知道是否有一种方法可以通过编辑文件 (machine.config) 或其他文件而不是使用 Asp.net 配置来添加用户名和密码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T17:14:30.257

`system.web`这在元素内部的 web.config 文件中：

```
<authentication mode="Forms">
  <forms>
    <credentials passwordFormat="SHA1">
      <user name="moses"
            password="02726D40F378E716981C4321D60BA3A325ED6A4C" /> <!-- Pa$$w0rd -->
    </credentials>
  </forms>
</authentication> 
```

对用户进行身份验证的 C#：

```
if(FormsAuthentication.Authenticate(username, password))  // You supply the username and password
{
    FormsAuthentication.SetAuthCookie(userName, createPersistentCookie);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T17:07:31.717

你可以这样试试：

密码格式应该是任何一种方式：

```
<credentials 
   passwordFormat="[Clear|SHA1|MD5]">
  <user/>
</credentials> 
```

在 web.config 中，您可以进行如下修改：

例如：

```
<configuration>
   <system.web>
      <authentication mode="Forms">
         <forms name="your app name" loginUrl="/login.aspx">
            <credentials passwordFormat = "SHA1">
               <user 
                  name="UserName1" 
                  password="SHA1EncryptedPassword1"/>
               <user 
                  name="UserName2" 
                  password="SHA1EncryptedPassword2"/>
               <user 
                  name="UserName3" 
                  password="SHA1EncryptedPassword3"/>
            </credentials>
         </forms>
      </authentication>
   </system.web>
</configuration> 
```

您可以从[这里](http://msdn.microsoft.com/en-us/library/e01fc50a.aspx)查看更多信息。

# git - 减少 .git 文件夹大小：Jenkins 版

> ID：10354802
> 
> 赞同：0
> 
> 时间：2012-04-27T16:57:06.940
> 
> 标签：git, jenkins, diskspace

我正在使用 Jenkins 从 git 存储库中提取特定分支。.git 文件夹大约是它正在拉取的项目大小的 5 倍！我试过`git gc --aggressive --prune`了，但问题仍然存在。

我永远不会从 Jenkins 推送回存储库。我只需要快速检查对 repo 的更改，并在发现任何更改时获取这些更改并构建项目。如果这是历史问题，显然我可以没有。

我专门使用 git 插件，因此为此量身定制的方法将是理想的，因为每次都会进行初始提取。如果我必须在获取后运行命令，我会这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T21:08:43.523

通常的答案是：忽略 .git 文件夹的大小。当您拉入更改时，只会复制更改，而不是完整的 git 存储库。（除非您在构建之前删除 jenkins 工作区，但这不是一个好主意，因为它会迫使您的工作在每次构建时进行完整克隆。）

如果您担心获得干净的构建，请选中该框：结帐后清洁。它使 Jenkins 在构建之前运行 git clean"。

如果你担心磁盘空间，就买一个大磁盘。或者，如果您使用的是小型 SSD，请安装 postbuild 插件并从 postbuild 步骤运行“git clean -fxd”以清理工作区。

如果以上都不适合你，那么你所能做的就是等待。部分 git checkout 支持将来可能会变得更好。或者您可以使用 Subversion 或其他一些非分布式版本控制系统。几乎所有的分布式系统都依赖于完整的历史可用。

# oracle - 执行前自动提交 DDL 语句的解决方法

> ID：10354803
> 
> 赞同：0
> 
> 时间：2012-04-27T16:57:10.700
> 
> 标签：oracle

我为我的网站保留了两个密码（就网站人类用户所知，实际上是相同的密码，但使用两种不同的算法和盐进行散列和加盐）。一个放在 WebUsers 表中，这是用户登录网站时验证密码的地方。另一种是oracle用户的密码，每个网站用户对应一个oracle用户。

在进行更改密码程序时，我必须在事务中更改 WebUsers 表以及 oracle 中的密码。问题是，DDL 语句 [alter user ...] 在执行任何操作之前提交。如果 [alter user ...] 失败并且在异常处理代码中我回滚事务，则不会回滚 WebUsers 表中的更改。有什么解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T17:06:37.083

在 Oracle 下，没有办法在一个原子事务中拥有 DML 和 DDL。

在 Oracle 中，DDL 总是会在运行 DDL 之前显式地导致提交。

通常在这些场景中，您应该首先执行最有可能失败的步骤，即在您的情况下为 DDL 'Alter User'。

然后运行你的 DML ，只有在 DDL 成功的情况下，但是再一次，有这个 DML 失败的问题，然后无法回滚 DDL，此时你只需要运行另一个 DDL 来恢复第一个 DDL 所做的更改。

这个想法是第二步比第一步更有可能失败。

这种模式也被使用，您必须处理 JMS + JDBC 之类的事情，并且您不能使用 JTA 事务将 JMS + JDBC 活动包装在单个事务中。

# php - 当 allow_url_fopen 打开时，php file_get_contents 返回 null

> ID：10354805
> 
> 赞同：5
> 
> 时间：2012-04-27T16:57:16.473
> 
> 标签：php, apache, tomcat, file-get-contents

我收到警告消息：file_get_contents failed to open stream permission denied

我在 php.ini 文件中将 all_url_open 设置为 on。

我的 php 文件在我的 apache 服务器中，它试图从同一台机器上的 tomcat 服务器访问一个 url（返回 JSON）。

php 文件中的代码如下所示：

```
 $srcURL = 'http://samemachine:8080/returnjson/';

  $results = file_get_contents($srcURL); 
```

我也尝试过 curl ，它什么也不返回，也没有命中 tomcat 服务器：

```
 function curl($url){
        $ch = curl_init();

        curl_setopt($ch, CURLOPT_HTTPHEADER, array('Accept-Language: en-us'));
        curl_setopt($ch, CURLOPT_URL, $url);
        curl_setopt($ch, CURLOPT_RETURNTRANSFER,1);
        $data = curl_exec($ch);

        curl_close($ch);
        return $data;
    } 
```

为什么权限被拒绝？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T20:28:48.260

*   确保它是真的`allow_url_fopen`而不是`all_url_open`你写的
*   通过运行仔细检查`phpinfo()`。确保它将选项列为已启用。如果它没有重新启动您的网络服务器
*   `lo`要调试您的 curl 问题，请运行 Wireshark 并在界面上观看

# python - 在我的工作目录的目录中创建一个文件

> ID：10354807
> 
> 赞同：3
> 
> 时间：2012-04-27T16:57:38.620
> 
> 标签：python

我使用以下方法创建了一个目录：

```
def createDir(dir_name):
    try:    
        os.mkdir(dir_name)
        return True;
    except:
        return False

createDir(OUTPUT_DIR) 
```

现在我想创建一个用于写入的文件并将其放在我新创建的目录中，即`OUTPUT_DIR`. 我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-27T17:00:19.937

使用 python 内置函数[open()](http://docs.python.org/library/functions.html#open)创建文件对象。

```
import os

f = open(os.path.join(OUTPUT_DIR, 'file.txt'), 'w')
f.write('This is the new file.')
f.close() 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-27T17:01:04.717

```
new_file_path = os.path.join(OUTPUT_DIR, 'mynewfile.txt')

with open(new_file_path, 'w') as new_file:
    new_file.write('Something more interesting than this') 
```

# javascript - 浏览器中无休止的页面更新（javascript）

> ID：10354808
> 
> 赞同：0
> 
> 时间：2012-04-27T16:57:49.237
> 
> 标签：javascript, cycle

```
<script language="javascript">
<!--
writeCookie();

function writeCookie()
{
var today = new Date();
var the_date = new Date("December 31, 2023");
var the_cookie_date = the_date.toGMTString();
var the_cookie = "users_resolution="+ screen.width +"x"+ screen.height;
var the_cookie = the_cookie + ";expires=" + the_cookie_date;
document.cookie=the_cookie

location = 'screen.php';
}
//-->
</script> 
```

此脚本检测屏幕分辨率。如果我在浏览器中“打开”阻止 cookie，我会得到一个“迷你 ddos​​”，一个无休止的更新站点页面 screen.php。如何摆脱这种局面？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T17:01:32.650

您的代码在页面加载时被调用并始终刷新页面。您没有条件语句来防止无限循环。

为了让事情更清楚，这就是正在发生的事情。

**步骤 1)**页面已加载

**步骤 2)**你的函数被调用

**步骤 3)**函数刷新页面。我们回到第 1 步。

# php - PHP Initialize class with a var 是可以的，但使用常量它会失败。为什么？

> ID：10354812
> 
> 赞同：0
> 
> 时间：2012-04-27T16:58:12.667
> 
> 标签：php, oop

我目前正在构建一个 MVC，但遇到了一个小问题（我已经得到了解决方案），但是：

这次失败是因为`Fatal error: Call to undefined method Controller_Home::DMVC_DEF_CTRL_FUNCTION()`..

```
if(method_exists($Controller, DMVC_DEF_CTRL_FUNCTION)){
    $Controller->DMVC_DEF_CTRL_FUNCTION($SecondRoute);
} else {
    // 404
    die;
} 
```

这项工作：

```
$MethodName = DMVC_DEF_CTRL_FUNCTION;
if(method_exists($Controller, $MethodName)){
    $Controller->$MethodName($SecondRoute);
} else {
    // 404
    die;
} 
```

`DMVC_DEF_CTRL_FUNCTION`是一个常数。

有人可以向我解释为什么常量不起作用吗？[我也尝试用常量](http://www.php.net/manual/fr/function.constant.php)函数取乐，但没有成功。

我认为PHP认为它是一个函数。我如何告诉 PHP 常量`DMVC_DEF_CTRL_FUNCTION`不是函数？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T17:09:30.317

如果你想使用一个常量值作为方法名，你可以使用 curly 表达式语法：

```
 $Controller->{CONSTANT_NAME}($SecondRoute); 
```

否则，标识符只会被解释为方法名称。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T17:10:04.940

在您当前的代码中，解释器认为您正在调用名为 DMVC_DEF_CTRL_FUNCTION 的对象上的方法。由于 DMVC_DEF_CTRL_FUNCTION 是常量而不是变量，php 使用名称而不是它所持有的实际值。

您可以通过以下方式强制 php 取值：

```
 $controller->{DMVC_DEF_CTRL_FUNCTION}( "Blah" ); 
```

**更新**

当使用类常量而不是全局常量时，以下内容也可以使用：

```
 $controller->{self::DMVC_DEF_CTRL_FUNCTION}( "Blah" ); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T17:02:33.547

PHP 知道变量保存数据，这就是变量的用途。这就是为什么您可以使用变量变量并通过评估变量来执行您正在尝试执行的函数它如何知道您打算将其用作常量而不仅仅是函数的实际名称？

您可以使用以下内容来执行相同的目的：

```
if(method_exists($Controller, DMVC_DEF_CTRL_FUNCTION)){
    call_user_func(array($Controller, DMVC_DEF_CTRL_FUNCTION),$SecondRoute);
} else {
    // 404
    die;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-27T17:03:21.910

对于这一行：

```
if(method_exists($Controller, DMVC_DEF_CTRL_FUNCTION)){ 
```

你`define('DMVC_DEF_CTRL_FUNCTION', 'some value')`以前做过吗？如果不是，您正在检查一个未定义的常量，它实际上会变成

```
if (method_exists($Controller, NULL)){ 
```

`method_exists()`要求您将方法的名称作为字符串传递。由于您没有引用该`DMVC...`部分，它作为一个常量进入，这意味着它必须是之前定义的。

编辑：

```
$x = 'hello';
define('x', 'goodbye');

$obj->x();  // this is NOT going to call hello() **OR** goodbye() 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-27T17:13:51.157

PHP 不知道您没有调用函数 DMVC_DEF_CTRL_FUNCTION，如

```
function DMVC_DEF_CTRL_FUNCTION()
{
    // some function
} 
```

Crashspeeder 是对的。您可以使用 call_user_func，但为什么不告诉 PHP 在尝试调用函数之前替换常量：

```
$Controller->{DMVC_DEF_CTRL_FUNCTION}($SecondRoute); 
```

在常量周围添加括号。

# java - 在 LINUX 下，应用程序初始化和支持文件应该放在哪里？

> ID：10354816
> 
> 赞同：2
> 
> 时间：2012-04-27T16:58:23.587
> 
> 标签：java, linux

我正在编写一个 Java 应用程序，当无头计算机启动以控制和保存来自数码相机的数据时，该应用程序将开始运行。该应用程序需要一些初始化文件、其他支持文件和我已放入 /usr/local/data 的日志文件夹。文件夹“数据”对每个人都是读/写的。远程用户将需要不时访问初始化文件。

这是一个好地方吗？LINUX 是否为应用程序文件和文件夹使用标准位置？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T17:00:42.393

有几个标准可供选择。

恕我直言，创建一个用户以在其主目录下使用配置和数据运行进程是将所有内容保存在一个地方的最佳方式（这很容易找到）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-27T17:01:24.673

有定义这些[LSB](https://wiki.linuxfoundation.org/en/LSB)约定的[Linux 标准库。](http://en.wikipedia.org/wiki/Linux_Standard_Base)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-27T17:04:17.423

*   日志：/var/log/.log 或 /var/logs/.d/ 用于日志。示例：/var/log/samba.log 或 /var/log/samba.d/error.log

*   配置文件：/etc/ 或 /etc/.d/

*   运行时需要的数据，但不用于初始配置：/var/cache/

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-27T18:46:31.050

检查文件系统层次标准

[http://www.pathname.com/fhs/](http://www.pathname.com/fhs/)

通常，应用程序数据存储在 /var/lib/ 中，登录 /var/log/ ， /etc/ 用于配置等等。

# mongodb - MongoDB：你如何执行这个更新查询

> ID：10354818
> 
> 赞同：0
> 
> 时间：2012-04-27T16:58:23.830
> 
> 标签：mongodb

我的集合中有一个名为“foo”的顶级字段的文档，它是一个哈希数组。我需要能够浏览我的所有文档并找到 db.mycollection.foo 包含子属性“name”等于“bar”的哈希的位置。匹配完成后，我需要将名为“hit”的顶级字段更新为值 1。

所以只是重申集合被称为mycollection。foo 是一个数组类型的字段，包含散列，其中每个散列都有一个名为 name 的字段。如果任何散列包含名称 == 'bar'，我需要执行更新。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T17:12:03.093

我相信你想要的是：

```
db.mycollection.update({"foo.name": "bar"}, {$set: {"hit": 1}}, false, true); 
```

# wcf - IClientMessageInspector 检测单向操作

> ID：10354828
> 
> 赞同：0
> 
> 时间：2012-04-27T16:58:56.683
> 
> 标签：wcf

我需要在 IClientMessageInspector 中进行一些操作日志记录，并且知道操作何时开始和结束是至关重要的。但是，我无法为单向操作获取 AfterReceiveReply，这很清楚原因。有没有办法知道在 BeforeSendRequest 重载中操作是单向的，所以我可以忽略它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T23:16:19.320

没有关于检查器本身的信息（或传递给 BeforeSendRequest 的消息），但您可以将此信息传递给检查器，并使用消息操作来查看操作是否是一种方式。

```
public class StackOverflow_10354828
{
    [ServiceContract]
    public interface ITest
    {
        [OperationContract]
        string Echo(string text);
        [OperationContract(IsOneWay = true)]
        void Process(string input);
    }
    public class Service : ITest
    {
        public string Echo(string text)
        {
            return text;
        }
        public void Process(string input) { }
    }
    class MyInspector : IClientMessageInspector
    {
        public HashSet<string> oneWayActions;

        public MyInspector(ServiceEndpoint endpoint)
        {
            this.oneWayActions = new HashSet<string>();
            foreach (var operation in endpoint.Contract.Operations)
            {
                if (operation.IsOneWay)
                {
                    oneWayActions.Add(operation.Messages[0].Action);
                }
            }
        }

        public void AfterReceiveReply(ref Message reply, object correlationState)
        {
            Console.WriteLine("In AfterReceiveReply");
        }

        public object BeforeSendRequest(ref Message request, IClientChannel channel)
        {
            Console.WriteLine("In BeginSendRequest");
            if (this.oneWayActions.Contains(request.Headers.Action))
            {
                Console.WriteLine("This is a one-way operation");
            }

            return null;
        }
    }
    class MyBehavior : IEndpointBehavior
    {
        public void AddBindingParameters(ServiceEndpoint endpoint, BindingParameterCollection bindingParameters)
        {
        }

        public void ApplyClientBehavior(ServiceEndpoint endpoint, ClientRuntime clientRuntime)
        {
            clientRuntime.MessageInspectors.Add(new MyInspector(endpoint));
        }

        public void ApplyDispatchBehavior(ServiceEndpoint endpoint, EndpointDispatcher endpointDispatcher)
        {
        }

        public void Validate(ServiceEndpoint endpoint)
        {
        }
    }
    public static void Test()
    {
        string baseAddress = "http://" + Environment.MachineName + ":8000/Service";
        ServiceHost host = new ServiceHost(typeof(Service), new Uri(baseAddress));
        host.AddServiceEndpoint(typeof(ITest), new BasicHttpBinding(), "");
        host.Open();
        Console.WriteLine("Host opened");

        ChannelFactory<ITest> factory = new ChannelFactory<ITest>(new BasicHttpBinding(), new EndpointAddress(baseAddress));
        factory.Endpoint.Behaviors.Add(new MyBehavior());
        ITest proxy = factory.CreateChannel();
        proxy.Echo("Hello");
        Console.WriteLine();

        proxy.Process("world");
        Console.WriteLine();

        ((IClientChannel)proxy).Close();
        factory.Close();

        Console.Write("Press ENTER to close the host");
        Console.ReadLine();
        host.Close();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T09:31:51.097

在我这样做的那一刻回复自己：

bool isOneWay = request.Headers.ReplyTo == null;

# asp.net-mvc - [HandleError] 相对于 Application_Error 的优势

> ID：10354833
> 
> 赞同：7
> 
> 时间：2012-04-27T16:59:30.543
> 
> 标签：asp.net-mvc, error-handling

我知道**SO**中有很多关于**ASP.NET MVC 中的错误处理**的问题。

我知道，大多数人都试图通过三种方式实现目标：

1.  创建一个`BaseController`并覆盖该`OnException`方法

2.  使用`[HandleError]`或自定义异常过滤器。

3.  `Application_Error`global.asax.cs 中的事件

前两种方法不能处理所有异常，它们只能处理由操作方法/过滤器引发的异常，因此显然第三种方法将是全局异常处理程序的最佳方法。

我的问题是为什么我应该去`[HandleError]`接近？它带来了哪些我无法通过的好处`Application_Error`？

最后，我想`customErrors`在 MVC 应用程序中认真对待该部分吗？

注意：我的要求是通常的。每当发生异常时，记录它并返回自定义错误页面。自定义错误页面可能会根据状态代码而改变。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-27T17:09:01.680

最明显的是，它`[HandleError]`允许您在不同的控制器和操作中以不同的方式处理错误。它比处理程序中的某种 switch 语句优雅得多`Application_Error`。

另一个好处是它`[HandleError]`仍然可以访问控制器以及它附带的所有 MVC 优点，因此您仍然可以返回 a`View`或调用另一个操作。一旦你掉到`Application_Error`，你就输了`ControllerContext`，除了重定向之外，你真的别无选择。

# django - 扩展 Django 注册应用程序时覆盖保存方法时出错

> ID：10354834
> 
> 赞同：0
> 
> 时间：2012-04-27T16:59:33.900
> 
> 标签：django, django-forms, django-registration, django-1.3

我正在使用 django-registration 应用程序。并在 forms.py 中有以下代码

```
from django.contrib.auth.forms import UserCreationForm
from registration.forms import RegistrationFormUniqueEmail
from django import forms
from django.contrib.auth.models import User
from accounts.models import UserProfile
from pprint import pprint

class UserRegistrationForm(RegistrationFormUniqueEmail):
    #email = forms.EmailField(label = "Email")
    fullname = forms.CharField(label = "Full name")

    class Meta:
        model = User
        fields = ("fullname", "email", )

    def __init__(self, *args, **kwargs):
        super(UserRegistrationForm, self).__init__(*args, **kwargs)
        del self.fields['username']

    def save(self, commit=True):
        user = super(UserRegistrationForm, self).save(commit=False)
        user.userprofile.full_name = self.cleaned_data["fullname"]
        user.email = self.cleaned_data["email"]
        if commit:
            user.save()
        return user 
```

我从 Django-registraion 应用程序的类 RegistrationFormUniqueEmail 继承，所以当我调用它的保存方法时`user = super(UserRegistrationForm, self).save(commit=False)`，我说保存属性不存在。我实际上是用继承自`UserCreationForm`. 我刚刚阅读了关于 RegistrationFormUniqueEmail 的 SuperClass 的评论：

```
 """
Form for registering a new user account.

Validates that the requested username is not already in use, and
requires the password to be entered twice to catch typos.

Subclasses should feel free to add any additional validation they
need, but should avoid defining a ``save()`` method -- the actual
saving of collected user data is delegated to the active
registration backend.

""" 
```

这些评论要求不要定义另一个保存方法，但我需要。那么有没有办法我可以定义保存方法并调用父保存方法来定义其他字段？以下是 django-registration 应用程序 forms.py 的代码：

```
 """
Forms and validation code for user registration.

"""

from django.contrib.auth.models import User
from django import forms
from django.utils.translation import ugettext_lazy as _

# I put this on all required fields, because it's easier to pick up
# on them with CSS or JavaScript if they have a class of "required"
# in the HTML. Your mileage may vary. If/when Django ticket #3515
# lands in trunk, this will no longer be necessary.
attrs_dict = {'class': 'required'}

class RegistrationForm(forms.Form):
    """
    Form for registering a new user account.

    Validates that the requested username is not already in use, and
    requires the password to be entered twice to catch typos.

    Subclasses should feel free to add any additional validation they
    need, but should avoid defining a ``save()`` method -- the actual
    saving of collected user data is delegated to the active
    registration backend.

    """
    username = forms.RegexField(regex=r'^[\w.@+-]+$',
                                max_length=30,
                                widget=forms.TextInput(attrs=attrs_dict),
                                label=_("Username"),
                                error_messages={'invalid': _("This value may contain only letters, numbers and @/./+/-/_ characters.")})
    email = forms.EmailField(widget=forms.TextInput(attrs=dict(attrs_dict,
                                                               maxlength=75)),
                             label=_("E-mail"))
    password1 = forms.CharField(widget=forms.PasswordInput(attrs=attrs_dict, render_value=False),
                                label=_("Password"))
    password2 = forms.CharField(widget=forms.PasswordInput(attrs=attrs_dict, render_value=False),
                                label=_("Password (again)"))

    def clean_username(self):
        """
        Validate that the username is alphanumeric and is not already
        in use.

        """
        existing = User.objects.filter(username__iexact=self.cleaned_data['username'])
        if existing.exists():
            raise forms.ValidationError(_("A user with that username already exists."))
        else:
            return self.cleaned_data['username']

    def clean(self):
        """
        Verifiy that the values entered into the two password fields
        match. Note that an error here will end up in
        ``non_field_errors()`` because it doesn't apply to a single
        field.

        """
        if 'password1' in self.cleaned_data and 'password2' in self.cleaned_data:
            if self.cleaned_data['password1'] != self.cleaned_data['password2']:
                raise forms.ValidationError(_("The two password fields didn't match."))
        return self.cleaned_data

class RegistrationFormTermsOfService(RegistrationForm):
    """
    Subclass of ``RegistrationForm`` which adds a required checkbox
    for agreeing to a site's Terms of Service.

    """
    tos = forms.BooleanField(widget=forms.CheckboxInput(attrs=attrs_dict),
                             label=_(u'I have read and agree to the Terms of Service'),
                             error_messages={'required': _("You must agree to the terms to register")})

class RegistrationFormUniqueEmail(RegistrationForm):
    """
    Subclass of ``RegistrationForm`` which enforces uniqueness of
    email addresses.

    """
    def clean_email(self):
        """
        Validate that the supplied email address is unique for the
        site.

        """
        if User.objects.filter(email__iexact=self.cleaned_data['email']):
            raise forms.ValidationError(_("This email address is already in use. Please supply a different email address."))
        return self.cleaned_data['email']

class RegistrationFormNoFreeEmail(RegistrationForm):
    """
    Subclass of ``RegistrationForm`` which disallows registration with
    email addresses from popular free webmail services; moderately
    useful for preventing automated spam registrations.

    To change the list of banned domains, subclass this form and
    override the attribute ``bad_domains``.

    """
    bad_domains = ['aim.com', 'aol.com', 'email.com', 'gmail.com',
                   'googlemail.com', 'hotmail.com', 'hushmail.com',
                   'msn.com', 'mail.ru', 'mailinator.com', 'live.com',
                   'yahoo.com']

    def clean_email(self):
        """
        Check the supplied email address against a list of known free
        webmail domains.

        """
        email_domain = self.cleaned_data['email'].split('@')[1]
        if email_domain in self.bad_domains:
            raise forms.ValidationError(_("Registration using free email addresses is prohibited. Please supply a different email address."))
        return self.cleaned_data['email'] 
```

我只想知道如何覆盖 save() 方法，否则如何创建新的附加字段？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T14:18:43.217

我找到了自己发布的问题的解决方案：

我已经删除了 django-registration 应用程序的 RegistrationFormUniqueEmail，而是从 UserCreationForm 继承并将所需的方法添加到我自己的 UserRegistrationForm 中，这样我就能够覆盖保存方法并能够做我想做的事情。

# jquery - 在 AJAX 请求响应之间传递状态信息

> ID：10354840
> 
> 赞同：1
> 
> 时间：2012-04-27T16:59:59.523
> 
> 标签：jquery, ajax

我的 JavaScript 中有一个“保存”功能，负责在我的服务器上保存一些信息。这个函数会被连续调用多次。我担心比赛条件的形成。出于这个原因，我希望有一种方法可以将状态变量从调用函数 (save) 传递给请求-响应函数 (save_Succeeded)。这样，我一定会知道成功保存了哪个项目。有没有办法做到这一点？目前，我有以下内容，但我不知道如何传递状态变量。谢谢！

```
function save(item) {
  $.ajax({
    url: getUrl(),
    type: "POST",
    data: JSON.stringify(item),
    contentType: "application/json",
    success: save_Succeeded
  });
}

function save_Succeeded(result) {
  alert("Display Saved Item ID here");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T17:05:08.560

当然，这是非常重要的。这是我的 AJAX 调用之一的示例：

```
 $.ajax({
        url: "/phpAJAX/save_data.php",
        type: "post",
        data : querystring + "&schema=" + schema + "&table=" + table,
        success: function(data){
            if (data != "Data saved successfully."){
                show_dialog(data);
            }else{
                show_dialog(data,"bad");
            }
        }
    }); 
```

如果你这样做

```
success: function(data) 
```

该`data`变量将包含从您的服务器响应返回的数据。您可以控制服务器响应是成功还是失败。你看这里，我检查以确保数据是“数据保存成功。”，如果不是我知道有一个错误，我会显示那个错误消息。

在您的情况下，如果成功，您必须更改服务器代码以返回已保存数据的 id，然后它将包含在`data`变量中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T17:40:42.083

使用`complete`选项还可以获取 ajax 调用的状态。像这样 ：

```
function save(item) {
   $.ajax({
      url: getUrl(),
      type: "POST",
       data: JSON.stringify(item),
       contentType: "application/json",
       complete : function(xhr, responseText, thrownError) {
          //request is complete
          save_Succeeded(xhr.status, responseText);
       }
    });
} 
```

现在`save_Succeeded()`是这样的：

```
function save_Succeeded(status, result) {
    alert("Status ---------> " + status +
          "Result ---------> " + result
         );
} 
```

# json - Jquery ajax 调用的问题

> ID：10354845
> 
> 赞同：0
> 
> 时间：2012-04-27T17:00:12.993
> 
> 标签：json, jquery-ui, jquery, user-controls

我正在使用 jqueryui 对话框向用户显示一些详细信息并传递给代码隐藏`usercontrol`以便执行 CRUD 操作。但是，我没有成功。谁能帮我解决我哪里出错了？下面是完整的代码：

```
 <script>
  $(function() {
    // a workaround for a flaw in the demo system (http://dev.jqueryui.com/ticket/4375), ignore!
    $( "#dialog:ui-dialog" ).dialog( "destroy" );

    var name = $( "#name" ),
      email = $( "#email" ),
      selectedVal= $('#DropDownList1').val();
      allFields = $( [] ).add( name ).add( email ).add( selectedVal ),
      tips = $( ".validateTips" );

    function updateTips( t ) {
      tips
        .text( t )
        .addClass( "ui-state-highlight" );
      setTimeout(function() {
        tips.removeClass( "ui-state-highlight", 1500 );
      }, 500 );
    }

    function checkLength( o, n, min, max ) {
      if ( o.val().length > max || o.val().length < min ) {
        o.addClass( "ui-state-error" );
        updateTips( "Length of " + n + " must be between " +
          min + " and " + max + "." );
        return false;
      } else {
        return true;
      }
    }

    function checkRegexp( o, regexp, n ) {
      if ( !( regexp.test( o.val() ) ) ) {
        o.addClass( "ui-state-error" );
        updateTips( n );
        return false;
      } else {
        return true;
      }
    }

    $( "#dialog-form" ).dialog({
      autoOpen: false,
      height: 310,
      width: 310,
      modal: true,
      buttons: {
        "Login": function() {
          var bValid = true;
          allFields.removeClass( "ui-state-error" );

          bValid = bValid && checkLength( name, "username", 1, 16 );
         bValid = bValid && checkLength( email, "email", 6, 80 );
           bValid = bValid && checkRegexp( email, /^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i, "eg. ui@jquery.com" );

          if ( bValid ) {
             //do ajax post , pass the login details and display  details.aspx page

             $.ajax({
                url: '/GroupSchemeLogin.ascx/insertLoginDetails'
                type: 'POST',
                // serialize the full name , email , selected list
                data: $('#dialog-form').serialize(), //"{no:" + selectedVal + "}", 
                contentType: "application/json; charset=utf-8",
                dataType: "json",       
                success: function(response) {
                            if (response.d != "") {
                                alert(response.d);

                            }
                        }

                    });

            $( this ).dialog( "close" );
          }
        },
        Cancel: function() {
          $( this ).dialog( "close" );
        }
      },
      close: function() {
        allFields.val( "" ).removeClass( "ui-state-error" );
      }
    });

    $( "#login" )
      .click(function(e) {
      e.preventDefault();

        $( "#dialog-form" ).dialog( "open" );
      });
  });
  </script>

  <div id="dialog-form" title="Login to Portfolio"
  <p class="validateTips">All fields are required.</p>

  <form>
  <fieldset>
    <label for="name">Username</label>
    <input type="text" name="name" id="name" class="text ui-widget-content ui-corner-all" />
   <label for="email">Email</label>
    <input type="text" name="email" id="email" value="" class="text ui-widget-content ui-corner-all" />
     <select id="DropDownList1">
     <option value="product1">Camera</option>
     <option value="product2">DVD</option> 
     <option value="product3">LCD</option> 
 </select> 
  </fieldset>
  </form>
</div>

<a href="#" id="login"><img src="/images/login.jpg" alt="b2bLogin" /></a> 
```

代码隐藏 ascx：

```
[WebMethod]
    public static string insertLoginDetails(string name, string email , string selection)
    {
       //do Calculation
        return result;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T20:12:48.543

你有一个未关闭的 div 标签：

```
<div id="dialog-form" title="Login to Portfolio" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T15:02:15.700

您正在将 ajax 请求发送到用户控件（.ascx）。通常在 ASP.NET Web Form 应用程序中，您不能向用户控件发送 Ajax 请求，这会导致服务器抛出 Http 异常（403 Forbidden）。

```
//.....
$.ajax({
                url: '/GroupSchemeLogin.ascx/insertLoginDetails'
                type: 'POST',
                // serialize the full name , email , selected list
//..... 
```

您可以在 .aspx 页面中移动用户控制器（或`insertLoginDetails`WebMethod）。您还可以使用通用处理程序来呈现用户控件的内容。

# c# - Streaminsight 用户定义函数限制

> ID：10354848
> 
> 赞同：1
> 
> 时间：2012-04-27T17:00:19.180
> 
> 标签：c#, .net, user-defined-functions, streaminsight

流洞察用户定义函数的限制是什么？

对象是否需要可序列化？

它可以调用外部（远程）服务吗？

如果是这样的话，这些看起来非常 - 非常 - 非常强大！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T15:41:24.600

在我的脑海中，用户定义函数 (UDF) 是一种静态方法调用，一次对一个事件进行操作。如果您需要一次处理多个事件，则需要查看用户定义的运算符 (UDO) 或用户定义的聚合 (UDA)。如果出于任何原因需要维护状态，您应该查看 UDO 或用户定义的流运算符 (UDSO)。

请记住，您的有效负载类仅向 StreamInsight 提供架构。所以它们不需要被标记为可序列化的。任何被 StreamInsight 序列化的东西都需要标记为可序列化（即适配器的配置类）。

您可以使用不同的 UDF、UDO、UDA 和 UDSO 调用外部/远程服务。但是，这些调用将有效地阻塞 StreamInsight 调度程序线程之一上的调用，这将增加延迟。事件输入和输出应仅由适配器完成，UDF 等应用于处理流。

# syntax-highlighting - SublimeText 将线条括在白色矩形中

> ID：10354857
> 
> 赞同：120
> 
> 时间：2012-04-27T17:00:56.567
> 
> 标签：syntax-highlighting, sublimetext2, sublimelinter

这很烦人，我似乎无法弄清楚为什么。

![在此处输入图像描述](../Images/7c66bd049afeb40f049fda392fa1a6a1.png)

* * *

## 回答 #1

> 赞同：162
> 
> 时间：2014-09-08T06:24:13.067

如果您仍然对上述建议的解决方案有疑问（使用 anaconda lint）：

通过文件菜单在用户定义的 Anaconda 设置文件 Anaconda.sublime-settings 中完全禁用 linting：Sublime > Preferences > Package Settings > Anaconda > Settings – User：打开文件时，只需键入以下内容并保存即可； -)

{“anaconda_linting”：假}

至少，它解决了我的问题。祝福（债务人）<><

* * *

## 回答 #2

> 赞同：68
> 
> 时间：2012-04-27T17:03:53.313

看起来你已经安装了[SublimeLinter](https://github.com/SublimeLinter/SublimeLinter-for-ST2)。它突出显示错误和警告。

* * *

## 回答 #3

> 赞同：42
> 
> 时间：2016-06-21T04:33:10.423

在 sublimetext 3 中为当前文件禁用 Annaconda linting：

1.  通过 Cntrl + Shift + P 或 Command + shift + P 进入 Mac OS X 的命令面板
2.  输入`Anaconda: Disable linting on this file`并按回车
3.  重新启用 linting`Anaconda: Enable linting on this file`

禁用 linting 在会话之间仍然存在。

[来源](http://damnwidget.github.io/anaconda/IDE/#toc_32)

* * *

## 回答 #4

> 赞同：35
> 
> 时间：2015-07-01T20:23:53.580

您可能可以更改`"anaconda_linter_mark_style"`为`"none"`并保留`"anaconda_linter_underlines"`为`true`. 这样，它只会在错误下添加下划线，但不会突出显示整行。

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2013-05-04T02:31:32.810

如果你不想完全禁用 SublimeLinter，你可以设置 Syntax Specific Preferences。 `Preferences -> Package Settings -> Sublime Linter -> Settings Syntax Specific User`

首选项的评估类似于 CSS，它是级联的。考虑最后评估的最特定于用户、特定于语法的规则。

例如：我也不喜欢白色矩形，所以我选择了填充。

```
 {
  /*
        Selects the way the lines with errors or warnings are marked; "outline"
        (default) draws outline boxes around the lines, "fill" fills the lines
        with the outline color, and "none" disables all outline styles
        (useful if "sublimelinter_gutter_marks" is set).
    */
    "sublimelinter_mark_style" : "fill",

    /*
        If true, lines with errors or warnings will be filled in with the
        outline color.

        This setting is DEPRECATED and will be ignored in future
        versions. Use "sublimelinter_mark_style" instead. For backwards
        compatibility reasons, this setting overrides "sublimelinter_mark_style"
        if that one is set to "outline", but has no effect if it's set to "none".
    */
    "sublimelinter_fill_outlines": false,

    // If true, lines with errors or warnings will have a gutter mark.
    "sublimelinter_gutter_marks": false,

    // If true, the find next/previous error commands will wrap.
    "sublimelinter_wrap_find": false,
} 
```

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2016-03-15T11:01:50.387

对于 Anaconda/Sublime 用户

我有 Anaconda，lint 功能很有用，但开箱即用，它对风格非常苛刻。当您将鼠标悬停在矩形上时，它会告诉您它正在执行的规则的编号。您可以禁用您认为不需要的那些或妨碍您编写代码的方式。

在 Mac 上：

1.  转到首选项 | 浏览包 | 蟒蛇 | Anaconda.sublime-settings
2.  搜索“pep8_ignore”
3.  添加要删除的规则。

我在我的列表中列出了以下规则，这些规则删除了一些减慢我速度但保留“无制表符”规则的空白规则。

```
 "E201",
    "E202",
    "E203",
    "E302",
    "E309",
    "W291",
    "W293",
    "W391" 
```

如果您使用此列表，您将需要在您的用户设置中设置 "translate_tabs_to_spaces": true 。

或者，您可以将“pep8”设置为 false 以完全停止它。

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2014-12-08T13:06:00.347

**如果您使用[Anaconda](http://damnwidget.github.io/anaconda/)插件**（用于 Python 开发），这就是它的 linting 功能 - 它突出显示 Python 语法错误和[PEP8](https://www.python.org/dev/peps/pep-0008/)违规。

您可以完全禁用此功能或 通过向当前的 SublimeText 主题添加一些自定义规则来**更改此轮廓的颜色：**

1.  在崇高文本菜单中：`Preferences > Browser Packages...`
2.  在打开的目录中找到您当前主题的源文件（*.twTheme 文件，名称对应的文件，在 中选择`Preferences > Color Scheme > ...`）
3.  复制此文件，添加另一个名称（例如`Tomorrow-my.tmTheme`from `Tomorrow.tmTheme`）
4.  将以下代码粘贴到这个新创建的主题文件中，就*在* `</array>`标签之前：

    ```
    <dict>
      <key>name</key>
      <string>anaconda Error Outline</string>
      <key>scope</key>
      <string>anaconda.outline.illegal</string>
      <key>settings</key>
      <dict>
        <key>background</key>
        <string>#FF4A52</string>
        <key>foreground</key>
        <string>#FFFFFF</string>
      </dict>
    </dict>
    <dict>
      <key>name</key>
      <string>anaconda Error Underline</string>
      <key>scope</key>
      <string>anaconda.underline.illegal</string>
      <key>settings</key>
      <dict>
        <key>background</key>
        <string>#FF0000</string>
      </dict>
    </dict>
    <dict>
      <key>name</key>
      <string>anaconda Warning Outline</string>
      <key>scope</key>
      <string>anaconda.outline.warning</string>
      <key>settings</key>
      <dict>
        <key>background</key>
        <string>#DF9400</string>
        <key>foreground</key>
        <string>#FFFFFF</string>
      </dict>
    </dict>
    <dict>
      <key>name</key>
      <string>anaconda Warning Underline</string>
      <key>scope</key>
      <string>anaconda.underline.warning</string>
      <key>settings</key>
      <dict>
        <key>background</key>
        <string>#FF0000</string>
      </dict>
    </dict>
    <dict>
      <key>name</key>
      <string>anaconda Violation Outline</string>
      <key>scope</key>
      <string>anaconda.outline.violation</string>
      <key>settings</key>
      <dict>
        <key>background</key>
        <string>#ffffff33</string>
        <key>foreground</key>
        <string>#FFFFFF</string>
      </dict>
    </dict>
    <dict>
      <key>name</key>
      <string>anaconda Violation Underline</string>
      <key>scope</key>
      <string>anaconda.underline.violation</string>
      <key>settings</key>
      <dict>
        <key>background</key>
        <string>#FF0000</string>
      </dict>
    </dict> 
    ```

5.  根据您的需要调整颜色。保存存档。
6.  选择您的“新”主题`Preferences > Color Scheme >`并观察变化。

在我的情况下需要第 3 点，因为在保存主题并重新启动 Sublime/切换主题（sublime 使用某种缓冲区？...）之后，颜色没有立即更新。所以，当你想玩一点颜色时，也许你必须重复步骤 3-6。

资料来源：[Anaconda 的文档](http://damnwidget.github.io/anaconda/IDE/#toc_50)

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2020-06-26T10:51:43.197

在第 300 行“anaconda_linter_mark_style”：“none”，在 Preferences -> Package Settings -> Anaconda -> Settings - Default 中。这消除了“烦人”的突出显示，但仍检查 pep8 错误

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2016-05-10T22:27:06.843

如果以前的解决方案都不适合您，请尝试以下操作：

1.  转到首选项 | 包装设置 | 皮林特 | 用户设置
2.  在文件中，只需添加/修改以下行：

    ```
    "run_on_save": false,
    "disable_outline": true 
    ```

它对我有用，在我的情况下，我只将 anaconda 作为一个文件夹，将 Sublime 的 python 编译器与 anaconda 文件夹中的 python 编译器（python.exe）相关联。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2015-07-24T00:12:53.707

我刚刚发现这也可能随机发生在您搜索的最后一个单词上。因此，例如，如果您搜索“整数”。然后“整数”的所有实例将在它们周围有那个白色方块。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2018-09-30T08:31:14.480

In Anaconda with Sublime Text, if you don't want to make any changes to the settings:

In the case highlighting occurs, you can use a keyboard shortcut (in my case it's CTRL-ALT-R) to autoformat the code! The highlighting will be gone immediately.

You just have to repeat that every once in a while, after having added new code (which is not formatted according to the PEP8 rules).

The command is "anaconda_auto_format".

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2018-08-13T05:18:34.627

如果你有 anaconda linting

像这样进入目录 C:\Users\giova\AppData\Roaming\Sublime Text 3\Packages\Anaconda 并更改 anaconda.sublime-settings （找到 anaconda linter 键并将它们设置为 false）。看看你是否安装了其他 linter 东西，并将它们的设置更改为 false，它似乎依赖 linting，直到一切都适合你。我安装了不同的 linter，所以我必须全部更换。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2018-09-24T15:43:51.020

您可以通过文件菜单禁用 anaconda.sublime-settings 中的警告：

> Sublime > Preferences > Package Settings > Anaconda > Settings – 用户：

在打开的文件中输入以下代码，然后按`Ctrl + S`保存文件

```
{"pep8": false} 
```

你也可以输入这个：

```
{"anaconda_linting": false} 
```

但它禁用警告和错误，这不好

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2020-06-11T20:22:00.713

For me, on sublime 3 this was the PyLinter Package. While the linting feature's useful i also wanted to get rid of the annoying highlight. Found this on their docs if it's helpful! :) [https://packagecontrol.io/packages/Pylinter](https://packagecontrol.io/packages/Pylinter) I was able to remove the highlight with `Command + option + x`

```
The plugin can be invoked by a keyboard shortcut:

OS X: Command+option+z
Linux, Windows: Control+Alt+z

**Toggle Marking**

The marking of the errors in the file can be toggled off and on:

OS X: Command+option+x
Linux, Windows: Control+Alt+x 
```

# java - 使用 Java 将二维码生成为可扩展的 EPS

> ID：10354858
> 
> 赞同：2
> 
> 时间：2012-04-27T17:01:01.153
> 
> 标签：java, qr-code

我目前正在开发一个使用 ZXing 生成 QR 码作为图像的应用程序。这是一个简单的例子：

```
import java.io.File;
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.io.IOException;

import com.google.zxing.BarcodeFormat;
import com.google.zxing.MultiFormatWriter;
import com.google.zxing.WriterException;
import com.google.zxing.client.j2se.MatrixToImageWriter;
import com.google.zxing.common.BitMatrix;

public class MyQREncoder {

    /**
     * @param args
     * @throws WriterException 
     * @throws IOException 
     * @throws FileNotFoundException 
     */
    public static void main(String[] args) throws WriterException, FileNotFoundException, IOException {
        String text = "Some text to encode";
        int width = 300;
        int height = 300;
        BitMatrix bitMatrix = new MultiFormatWriter().encode(text, BarcodeFormat.QR_CODE,width,height);
        String file = "plop.png";
        String format = "png";
        MatrixToImageWriter.writeToStream(bitMatrix, format, new FileOutputStream(new File(file)));
    }

} 
```

这会生成一个带有可闪烁二维码的 PNG 文件，上面写着“一些要编码的文本”。

我的问题是，如果我尝试将格式更改为 eps，那么我会得到一个空文件。我们目前使用的解决方案是通过 imagemagick convert 实用程序将 png 文件转换为 eps。但是给定的 EPS 只是嵌入原始图像，并且不能很好地缩放（特别是在打印时）。

有人知道是否有任何开源解决方案（使用 Zxing 或其他）来构建可扩展的 Eps 文件？（或任何矢量格式，例如）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T17:22:58.797

**编辑：这是一个完整的 Java 工作解决方案：**

```
PrintStream psFile = /* Open file */;

final int blockSize = 4;

psFile.println("%!PS-Adobe-3.0 EPSF-3.0");
psFile.println("%%BoundingBox: 0 0 " + bitMatrix.getWidth() * blockSize + " " + bitMatrix.getHeight() * blockSize);

psFile.print("/bits [");
for(int y = 0; y < bitMatrix.getHeight(); ++y) {
    for(int x = 0; x < bitMatrix.getWidth(); ++x) {
        psFile.print(bitMatrix.get(x, y) ? "1 " : "0 ");
    }           
}
psFile.println("] def");

psFile.println("/width " + bitMatrix.getWidth() + " def");
psFile.println("/height " + bitMatrix.getHeight() + " def");

psFile.println(
        "/y 0 def\n" + 
        blockSize + " " + blockSize + " scale\n" + 
        "height {\n" +
        "   /x 0 def\n" +
        "   width {\n" +
        "      bits y width mul x add get 1 eq {\n" +
        "         newpath\n" +
        "         x y moveto\n" +
        "         0 1 rlineto\n" +
        "         1 0 rlineto\n" +
        "         0 -1 rlineto\n" +
        "         closepath\n" +
        "         fill\n" +
        "      } if\n" +
        "      /x x 1 add def\n" +
        "   } repeat\n" +
        "   /y y 1 add def\n" +
        "} repeat\n");
psFile.close(); 
```

自己生成 PS 文件怎么样？像这样的东西：

```
%!PS-Adobe-3.0 EPSF-3.0
%%BoundingBox: 0 0 288 288

/bits [0 0 1 0  1 0 1 1  0 1 1 0  1 1 0 0] def

/width 4 def
/height 4 def
/y 0 def

72 72 scale

height {
   /x 0 def
   width {
      bits y width mul x add get 1 eq {
         newpath
         x y moveto
         0 1 rlineto
         1 0 rlineto
         0 -1 rlineto
         closepath
         fill
      } if
      /x x 1 add def
   } repeat
   /y y 1 add def
} repeat 
```

（当然，您可以用自己的值填写顶部的 defs，遍历 BitMatrix 并打印 1 和 0 来填写`bits`） ![ps文件输出](../Images/6523e74503c5e3de4c1cdd28b259cfe2.png)

# objective-c - Objective-C 编码风格（相当语义）

> ID：10354861
> 
> 赞同：1
> 
> 时间：2012-04-27T17:01:10.683
> 
> 标签：objective-c

我是 Cocoa 的新手，我想确保我使用的样式和代码的格式适合我的目的。

特别是在标题中（在标记处`a)`）将变量设置在外部有什么影响`@interface`？

其次，使用实例中的变量（在点`b)`）而不在类声明中注册它会产生什么影响？

头文件：

```
 #import <UIKit/UIKit.h>

    ///////////// a) Is this good use?
    int myint; 
    /////////////        

    @interface InstancecheckViewController : UIViewController
    - (IBAction)plusone:(id)sender;
    @property (weak, nonatomic) IBOutlet UILabel *counting;
    @end 
```

执行：

```
 #import "InstancecheckViewController.h"
    @interface InstancecheckViewController ()
    @end
    @implementation InstancecheckViewController
    @synthesize counting;

    ///////////////////// b) is this good use?
    - (void)resetit {
        myint = 0;   
    } 
    /////////////////////

    - (IBAction)plusone:(id)sender {
        myint ++;
        if (myint >10){
            [self resetit];
        }
        NSString* myNewString = [NSString stringWithFormat:@"%d", myint];
        counting.text = myNewString;
    }
    @end 
```

* * *

**编辑**
感谢大家的评论。我想我现在已经正确地重新定义了 .h 中的实例和整数

```
 @interface instancecheckViewController : UIViewController
    {
    @private
    int myint;
    }
    - (IBAction)plusone:(id)sender;
    - (void)resetIt;
    @end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T17:19:15.137

with:

```
///////////// a) Is this good use?
int myint; 
///////////// 
```

you've declared a global, mutable variable. it is not the same as an instance variable. this should not be used. furthermore, it's a *definition* -- this approach will result in linker errors.

with:

```
///////////////////// b) is this good use?
- (void)resetit {
    myint = 0;   
} 
///////////////////// 
```

you're writing to a global, mutable variable. this is not thread safe. that's not to imply that an ivar is implicitly threadsafe, but it is generally more safe thatn global accesses because its access is restricted to the instance.

just declare it as an instance variable :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T17:25:53.403

只是我的2美分。它是一个全局变量，不太好。最好不要养成使用它的习惯。您很少会看到使用全局变量的代码。如果您学习了Objective-C 的所有基础知识，即协议、类别、扩展，您会发现您几乎不需要全局变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T17:09:50.923

这样，您就声明了一个跨实例共享的全局变量。因此，如果您从类的实例更改它，它将影响所有其他实例。我不确定你是否想要这个；如果您不需要明确的上述行为，我建议您改用实例变量。

# jquery - CSS 类没有按预期工作

> ID：10354864
> 
> 赞同：-1
> 
> 时间：2012-04-27T17:01:34.773
> 
> 标签：jquery, css

我的 HTML 代码没有实现 CSS 样式。CSS 文件中的边框没有被实现。我在 Firefox 和 IE 中都试过了。请提供您的意见。

请在下面找到代码：

HTML

```
<html>
    <head>
        <link href="file://c:/jquery/chapter-1/begin/styles/my_style.css" rel="stylesheet"> 
    </head>
    <body>
        <div id="header" class="no_hover"><h1>Header</h1></div>
        <button type="button" id="btn1">Click to Add</button>
        <button type="button" id="btn2">Click to Remove</button>
        <script src="file://c:/jquery/chapter-1/begin/scripts/jquery.js"    type="text/javascript"></script>
        <script src="file://c:/jquery/chapter-1/begin/scripts/test4.js" type="text/javascript"></script>
    </body>
</html> 
```

js文件

```
$(document).ready(function() {
    $("#btn1").click( function(){
        $("#header").addClass("hover");
        $("#header").removeClass("no_hover");
    });
    $("#btn2").click( function(){
        $("#header").removeClass("hover");
        $("#header").addClass("no_hover");
    });
}); 
```

CSS文件

```
.hover{
    border: solid #f00 3px;
}
.no_hover{
    border: solid #000 3px;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T17:07:00.177

问题可能在于您将文件链接为文件系统的路径......您希望改为链接到`CSS`和`JS`文件作为您的 Web 服务器的虚拟路径。

您的代码有效。看到这个小提琴：http: [//jsfiddle.net/pratik136/x4zda/](http://jsfiddle.net/pratik136/x4zda/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T18:19:08.550

这里有一些代码可以帮助您使用 jQuery 或清理它。不要潜入 DOM 乘数。如果你是然后创建一个变量。你也可以链接你的事件。看起来你刚刚开始使用 jQuery，所以当你深入了解它时，你会学到这一点。希望这可以帮助。

[JSFiddle](http://jsfiddle.net/LCKTd/9/)

```
$(document).ready(function() {
    var header = $("#header");

    $("#btn1").on("click", function() {
       header.addClass("hover").removeClass("no_hover");                      
    });
    $("#btn2").on("click", function() {
        header.removeClass("hover").addClass("no_hover");
    });
});​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T17:11:18.957

`js`本地化和`CSS`文件时工作正常。

[看到这个 JSFiddle](http://jsfiddle.net/LCKTd/2/)

尝试以下代码，其中包含一页中的所有内容。

```
<html>
 <head>
    <style type="text/css">
        #header {}
        .hover{
         border: solid #f00 3px;
        }
        .no_hover{
         border: solid #000 3px;
        }
    </style>
 </head>

 <body>

  <div id="header" class="no_hover"><h1>Header</h1></div>
  <button type="button" id="btn1">Click to Add</button>
  <button type="button" id="btn2">Click to Remove</button>

  <script src="http://code.jquery.com/jquery-1.7.2.min.js" type="text/javascript"></script>   

     <script type="text/javascript">
             $(document).ready(function() {
            $("#btn1").click(function() {
                $("#header").addClass("hover");
                $("#header").removeClass("no_hover");
            });
            $("#btn2").click(function() {
                $("#header").removeClass("hover");
                $("#header").addClass("no_hover");
            });
        });
     </script>
 </body>
</html>​ 
```

# vbscript - 获取使用 VBScript/JScript 启动（例如）iexplore 的进程

> ID：10354865
> 
> 赞同：1
> 
> 时间：2012-04-27T17:01:40.637
> 
> 标签：vbscript, wmi, jscript

有没有办法（理想情况下使用像 VBScript / JScript 这样的脚本语言）获取生成不同程序的进程的详细信息，即在 Computrace LoJack 启动 iexplore 的情况下，处理与 Internet 的通信？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T18:01:48.170

您可以使用 WMI 检查您感兴趣的进程的 ParentProcessId。在“普通”用户模式应用程序的情况下，父进程应该是 explorer.exe。

```
strProcess = "iexplore.exe"
strComputer = "."
Set objWMIService = GetObject("winmgmts:\\" & strComputer & "\root\cimv2")
Set colProcesses = objWMIService.ExecQuery("Select * from Win32_Process " _
    & " Where name = '" & strProcess & "'")

For Each objProcess in colProcesses
    WScript.Echo objProcess.ParentProcessId
Next 
```

在 Internet Explorer 的情况下，请务必检查 IE 的 ID，因为它会生成多个自身实例。尝试这样的事情：

```
strProcess = "iexplore.exe"
strComputer = "."
Set objWMIService = GetObject("winmgmts:\\" & strComputer & "\root\cimv2")

Set colProcesses = objWMIService.ExecQuery("Select * from Win32_Process " _
    & " Where name = 'explorer.exe' OR name = 'iexplore.exe'")

i = 0
arrIds = Array()
For Each objProcess in colProcesses
    ReDim Preserve arrIds(i)
    arrIds(i) = objProcess.ProcessId
    i = i + 1
Next

Set colProcesses = objWMIService.ExecQuery("Select * from Win32_Process " _
    & " Where name = '" & strProcess & "'")

For Each objProcess in colProcesses
    intParentID = objProcess.ParentProcessId

    blnIsFound = False
    For Each intID in arrIds
        If intID = intParentID Then
            blnIsFound = True
            Exit For
        End If
    Next

    If blnIsFound = False Then
        WScript.Echo "Process " & objProcess.ProcessId & " spawned by process " & objProcess.ParentProcessId
    End If
Next 
```

# c++ - 为什么这不是内存泄漏？或者是吗？删除没有虚拟析构函数的基类指针

> ID：10354866
> 
> 赞同：0
> 
> 时间：2012-04-27T17:01:43.087
> 
> 标签：c++, inheritance, memory-leaks, virtual-destructor

当我注意到不应该发生的事情时，我一直在插手，使用 Intel Inspector 测试内存泄漏。我从不应具有虚拟析构函数的 std::vector 继承，派生类中有一个额外的成员，我对其进行动态内存分配，在 main 中我在堆上创建派生类，强制转换为基类，调用delete...并没有检测到内存泄漏？？？按照所有逻辑，我应该得到内存泄漏。

```
template <typename T>
class DynamicArray : public std::vector<T> {
public:    
    DynamicArray() : children(nullptr) {
        children = new int(50);
    }
    ~DynamicArray() {
        if (children) delete children;
    }
    DynamicArray& operator<<(const T& value)
    {
        push_back(value);
        return *this;
    }
private:
    int *children;
};

int main() {
    DynamicArray<int> *pArray = new DynamicArray<int>;
    (*pArray) << 4 << 5;
    static_cast<std::vector<int>*>(pArray);
    delete pArray;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-27T17:03:05.497

`pArray`仍然是类型`DynamicArray<int>`并且将调用正确的析构函数，这可能会泄漏：

```
std::vector<int>* wrong = static_cast<std::vector<int>*>(pArray);
delete wrong; 
```

编辑：正如 Ben Voigt 正确提到的，最后一个代码片段实际上是未定义的行为，因为析构函数`std::vector`不是虚拟的。所以甚至不能保证这会泄漏

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-27T17:04:14.993

这个表达式没有副作用：

```
static_cast<std::vector<int>*>(pArray); 
```

在您的代码中，`delete`and`new`实际上完全匹配。

* * *

此外，这一行分配 ONE `int`，因此您可能不会在内存分析中注意到它：

```
children = new int(50); 
```

# apache-flex - ASDoc 转码

> ID：10354870
> 
> 赞同：0
> 
> 时间：2012-04-27T17:02:22.207
> 
> 标签：apache-flex, actionscript, asdoc

我已经尝试了几个小时来解决这个问题，但一直没能找到。

我正在尝试使用以下命令运行 ASDoc：

```
asdoc -doc-sources
 "C:\My Projects\TheProject\Flex\TheProject\src" -main-title TheProject
 -output "c:\My Projects\TheProject\Flex\TheProject"\asdoc -warnings=false 
```

我收到以下错误：

```
Loading configuration file C:\Program Files\Adobe\Adobe Flash Builder 4.5\sdks\4
.5.1\frameworks\flex-config.xml
C:\My Projects\TheProject\Flex\TheProject\src\com\company\common\comp
onents\Header.mxml: Error: unable to resolve '/com/company/common/co
mponents/images/logo.gif' for transcoding

C:\My Projects\TheProject\Flex\TheProject\src\com\company\common\comp
onents\Header.mxml: Error: Unable to transcode /com/company/common/c
omponents/images/logo.gif. 
```

我尝试按照[此处](https://stackoverflow.com/questions/3329224/asdocs-seems-unable-to-find-embedded-assets)的建议添加额外的斜杠，但这并没有解决问题。

有人知道解决这个问题的方法吗？删除有问题的代码（嵌入）可以解决问题......但显然我不想删除它。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T18:00:36.093

不确定它是否会有所帮助。但可能尝试添加 -source-path 参数。由于嵌入是相对 url，它可能试图从运行命令的目录而不是源路径中查找资产。

```
asdoc -source-path "C:\My Projects\TheProject\Flex\TheProject\src"
      -doc-sources "C:\My Projects\TheProject\Flex\TheProject\src"
      -main-title TheProject
      -output "c:\My Projects\TheProject\Flex\TheProject\asdoc" 
      -warnings=false 
```

# debugging - 如何使用 WebStorm 跨多个进程调试我的节点应用程序？

> ID：10354879
> 
> 赞同：2
> 
> 时间：2012-04-27T17:03:08.250
> 
> 标签：debugging, node.js, intellij-idea, child-process, webstorm

我的节点应用程序调用`child_process.exec`，此时我不能再“进入”每一行代码，并且正在启动的节点应用程序中的断点`.exec`似乎都不起作用。

我如何使用 WebStorm 来调试此应用程序，就好像调用`child_process.exec`与任何其他函数调用一样？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-28T07:02:03.387

'exec' 启动一个新进程，因此您需要将 '--debug=port' 命令行参数传递给它。你的代码看起来像`child_process.exec('node --debug=8787 ' + __dirname + '/childProcess.js');`

之后，您可以在 Run | 中创建 NodeJS 远程调试配置。“编辑配置”对话框并按“调试”按钮连接到子进程。

# c++ - 简单的 C++：如何重载乘法运算符，以便 float*myClass 和 myClass*float 工作

> ID：10354886
> 
> 赞同：16
> 
> 时间：2012-04-27T17:03:39.373
> 
> 标签：c++, operator-overloading

```
class MyClass;

int main()
{
  float a = 5;
  MyClass c1;
  MyClass c2 = a*c1;
  MyClass c3 = c1*a;
} 
```

如何重载乘法运算符以便 a*c1 和 c1*a 都可以工作？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-04-27T17:05:57.017

像这样：

```
MyClass operator* (float x, const MyClass& y)
{
    //...
}

MyClass operator* (const MyClass& y, float x)
{
    //...
} 
```

第二个也可以是成员函数：

```
class MyClass
{
    //...
    MyClass operator* (float x);
}; 
```

前 2 个选项用作类范围之外的声明。

# django-models - Django 在 admin 中的 DecimalField 表示为 0,00 值

> ID：10354891
> 
> 赞同：0
> 
> 时间：2012-04-27T17:03:56.770
> 
> 标签：django-models, django-admin

我想在我的模型中以 0,00 的形式表示价格。这是我模型的一部分。

`price = models.DecimalField(max_digits=5, decimal_places=2, default=Decimal('0.00'))`

但是，价格等`2.10`仍然表示为`2.1`。

第二个问题是`.`用`,`. 但是`default=Decimal('0,00')`当然不可能，因为`,`它不是 Decimal 的有效文字。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T07:10:28.740

确保您的字段处于数据库状态`decimal(5,2)`

并查看这个关于[用逗号替换小数点的](https://stackoverflow.com/a/3430023/538471)答案。

# mercurial - 作为 Jenkins 的一部分，您如何指定 Mercurial 的身份验证信息？(mercurial_keyring)

> ID：10354894
> 
> 赞同：5
> 
> 时间：2012-04-27T17:04:01.247
> 
> 标签：mercurial, jenkins, mercurial-extension

我的代码在 Mercurial 存储库中（使用自签名证书保护），我正在尝试设置 Jenkins 来使用它。

我已经在 J​​enkins 中安装了 Mercurial 插件（指向在 Jenkins Server/Slaves 上安装 TortoiseHg），并且 Jenkins 作业已正确配置为从存储库中获取源代码。

当我手动构建（即通过网络界面）时，一切都按预期工作。

但是，似乎对存储库的轮询没有成功，因为我得到了类似于以下内容的输出：

```
Started on Apr 27, 2012 1:07:41 PM
[<jobname>] $ hg pull --rev default
warning: <MercurialServerIP> certificate with fingerprint e3:5f:5e:ea:4f:da:ef:a4:0b:4a:bb:00:e8:31:59:de:ce:d0:28:94 not verified (check hostfingerprints or web.cacerts config setting)
abort: mercurial_keyring: http authorization required but program used in non-interactive mode
[<jobname>] $ hg log --style <workspace>\<jobname>\tmp688470509422797505style --branch default --no-merges --prune 65d180b20a1e625841c8385709c86b83c3e10421
Done. Took 1.9 sec
No changes 
```

我之前已经手动克隆了一个存储库，这样我就可以输入用户的密码来使用 Mercurial 密钥环扩展来进行授权，但是根据错误输出，它似乎并没有被应用。

如何配置 Jenkins 或运行构建的机器以成功进行轮询？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T17:10:46.013

这可能不是解决问题的*最佳*方法，但它对我有用，我可以继续前进。

**我能够弄清楚如何让服务器记住我的设置中的密码的唯一方法是在 \mercurial.ini 中手动指定它。**

注意：您可能还需要从 mercurial.ini 中删除 mercurial_keyring 行。（这会禁用密钥环扩展，因为我们手动指定所有内容。）

我以前认为在服务器上克隆一次存储库会让它记住密码，但这似乎不适用于 Jenkins 中的轮询功能（尽管当它们在服务器上执行时它确实适用于我的实际构建脚本）。

我对在服务器上使用纯文本密码并不特别满意，但在我找到更好的方法让轮询工作之前，我可以忍受这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T12:28:47.453

使用“kilnauth 扩展”，您可以将凭据存储在您的机器上。这样你就不必在 Jenkins 上配置任何特殊的东西。

```
$ hg help kilnauth
kilnauth extension - stores authentication cookies for HTTP
repositories. This extension knows how to capture Kiln
authentication tokens when pushing over HTTP.
This means you only need to enter your login and password once;
after that, the FogBugz token will be stored in your home
directory, allowing pushing without a password. 
```

有关如何安装它的说明，请遵循： http: [//kiln.stackexchange.com/questions/341/how-can-i-install-kilns-mercurial-extensions-manually](http://kiln.stackexchange.com/questions/341/how-can-i-install-kilns-mercurial-extensions-manually)

# c# - 如何在另一台计算机上测试 VS C# 程序

> ID：10354895
> 
> 赞同：0
> 
> 时间：2012-04-27T17:04:01.527
> 
> 标签：c#, visual-studio, command-line, .net

我想要以下命令提示符解决方案或 Visual Studio 2008 解决方案：

我正在 Visual Studio 2008 C# 中构建一个解决方案，我需要对其进行测试。

为了测试解决方案，我需要将其复制到另一台机器上。

我的流程是：

1.  将调试文件夹复制到共享位置
2.  从共享位置复制到源计算机

我尝试这样做：

```
rmdir s:\debug /s /q
s:
md debug
copy "C:\Documents and Settings\user123\Desktop\eFormsSystem\eFormsApp\bin\Debug\*.*" s:\debug\ 
```

但是它是说系统找不到指定的路径。

我确定上面的代码有问题；但是我想知道：

1.  有没有办法使用 Visual Studio 做到这一点？我希望它在构建后立即将调试目录复制到共享位置。
2.  如果命令提示符更适合这个，你能告诉我上面的代码有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T17:10:25.687

您的陈述似乎是正确的，并且我测试了它们在我本地机器上的项目中运行良好。您运行语句的用户是否可能无权从“复制”语句中的文件夹中读取？您可以通过将以下内容替换为复制行来验证这一点 - 确保它以您打算复制的文件列表进行响应：

```
dir "C:\Documents and Settings\user123\Desktop\eFormsSystem\eFormsApp\bin\Debug" 
```

请注意，在 Visual Studio 中，您可以添加“生成后事件”。在 Visual Studio 中转到项目的属性（右键单击项目并选择属性）。然后单击 Build Events 选项卡 - 在该选项卡上，您可以输入命令行语句以在项目构建之前和之后运行。单击“Edit Post-build...”以打开一个带有宏的窗口，您可以将其插入到脚本中，包括“OutDir”之类的内容，这是项目输出写入的目录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T17:42:38.880

您可以尝试两件事。首先是尝试使用复制命令上的开关，就像对 rmdir 命令所做的那样。尝试添加**/Y**和**/Z**开关。

*   /Y = 禁止提示您确认是否要覆盖现有目标文件。
*   /Z = Copies networked files in restartable mode.

May just want to try this first. I know the **/Y** is redundant since you are removing the destination directory before copying.

```
copy "C:\Documents and Settings\user123\Desktop\eFormsSystem\eFormsApp\bin\Debug\*.*" s:\debug\ /Z /Y 
```

Secondly, you asked if you could do this from Visual Studio. You could use the post-build event on the project to copy files to another location on the network after a successful build. However, you first need to get the command working.

# javascript - 计算在键盘上按下一个键的时间

> ID：10354902
> 
> 赞同：1
> 
> 时间：2012-04-27T17:04:26.190
> 
> 标签：javascript, keyboard

是否有可能必须使用两个键，例如，它会累积每个键的按下时间，例如键 LEFT 和 RIGHT，所以每次点击其中一个键时，它都会累积按下的时间，在如果您再次按下同一个键，它将添加时间，因此最后您会获得每个键的总按下时间。

如何才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T17:17:26.727

很大程度上取决于平台。但是，如果事件驱动平台将 key-down 和 key-up 视为事件（大多数都这样做，包括 .net、java 和 Windows），则它有点容易。

只需监听按键事件，并记录它发生的时间。当您获得同一个键的按键事件时，只需从您录制的时间中减去它发生的时间。两者之间的差异将是该按键的持续时间。

问题是，根据您的平台处理按键重复的方式，您可能会在获得按键之前获得同一个按键的多个按键。只跟踪每个键的第一个（当然，自上次按键或应用程序启动以来）。而且由于您一次可以按下多个键，如果您想正确执行此操作，您将能够记住多个键的按键时间。

如果您想跟踪总时间，请获取您在按键时发现的时间差，并将其添加到该按键的运行总计中。

在 JS 中：

```
(function() {
    var output = document.getElementById('output'),
        totalTime = {},
        pressed = {};

    window.onkeydown = function(e) {
        if (e.which in pressed) return;
        pressed[e.which] = e.timeStamp;
    };

    window.onkeyup = function(e) {
        if (!(e.which in pressed)) return;
        var duration = ( e.timeStamp - pressed[e.which] ) / 1000;
        if (!(e.which in totalTime)) totalTime[e.which] = 0;
        totalTime[e.which] += duration;
        output.innerHTML +=
            '<p>Key ' + e.which + ' was pressed for ' +
            duration + ' seconds this time' +
            '(' + totalTime[e.which] + ' total)</p>';
        delete pressed[e.which];
    };
})(); 
```

# c# - 此代码产生错误..“System.InvalidCastException：指定的转换无效。”

> ID：10354904
> 
> 赞同：-1
> 
> 时间：2012-04-27T17:04:51.667
> 
> 标签：c#, asp.net

```
cmd1.CommandText = "SELECT distinct MbrBtch from Member where MbrStrm='"+DrpDwnStrm .SelectedItem .Text +"'";
            cmd1.Connection = con;
            DataTable Table1;
            Table1 = new DataTable("mbr");
            DataRow Row1;
            DataColumn MbrBatch = new DataColumn("MbrBatch");
            MbrBatch.DataType = System.Type.GetType("System.Int32");
            Table1.Columns.Add(MbrBatch);
            try
            {
                con.Open();
                SqlDataReader RdrMbr = cmd1.ExecuteReader();
                while (RdrMbr.Read())
                {

                    Row1 = Table1.NewRow();
                    Row1["MbrBatch"] = Convert.ToInt32(RdrMbr.GetInt32(0));
                    Table1.Rows.Add(Row1);
                }
                RdrMbr.Close();
            }

            finally
            {
                con.Close();
            }
            DrpDwnBtch.DataSource = Table1;
            this.DrpDwnBtch.DataTextField = "MbrBatch";
            DrpDwnBtch.DataBind();

//here MbrBtch is numeric type attribute of sql server. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T17:15:54.277

My guess would be the below line gives you an error.

Change the line

```
 Row1["MbrBatch"] = Convert.ToInt32(RdrMbr.GetInt32(0)); 
```

with

```
int mbr = 0;
if (Int32.TryParse(RdrMbr[0], out mbr))
   Row1["MbrBatch"] = mbr; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T17:44:07.810

MbrBtch 列中是否可能存在空值？如果是这样，您需要像这样检查 null：

```
if (!RdrMbr.IsDBNull(0))
    Row1["MbrBatch"] = Convert.ToInt32(RdrMbr.GetInt32(0));
else
    // Set value to what it should be if null, perhaps a -1 or 0 
```

# android - 如何将数据发送到已经开始的特定活动？

> ID：10354905
> 
> 赞同：1
> 
> 时间：2012-04-27T17:04:55.413
> 
> 标签：android, android-activity

假设我们有两个简单的应用程序，所以我们有两个不同的包。这些包中的每一个都有一个`Activity`可以通过单击应用程序图标来启动的包。假设这两个活动如下：

*   `MyFirstActivity`，这是在包中`org.firstexample.firstactivity`
*   `MySecondActivity`，这是在包中`org.secondexample.secondactivity`

假设我们已经启动了`MyFirstActivity`活动，所以它正在运行。活动是否可以`MySecondActivity`直接向活动发送数据`MyFirstActivity`？

我希望这两个活动（它们在不同的包中）可以通过交换数据相互通信。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T17:14:49.163

如果您从 MyFirstActivity 启动 MySecondActivity 然后使用这种方式：

在活动 MyFirstActivity 中：

```
Intent intent25 = new Intent(Intent.ACTION_MAIN).addCategory(
Intent.CATEGORY_LAUNCHER).setClassName("org.secondexample",
"org.secondexample.MySecondActivity").addFlags(Intent.FLAG_ACTIVITY_NEW_TASK)
.addFlags(Intent.FLAG_FROM_BACKGROUND).setComponent(new ComponentName("rg.secondexample",
"org.secondexample.MySecondActivity"));
Bundle bundle = new Bundle();
bundle.putString("Name", "test");
intent25.putExtras(bundle);
getApplicationContext().startActivity(intent25); 
```

并在 MySecondActivity oncreate()

```
Bundle bundle = this.getIntent().getExtras();
String name = bundle.getString("Name"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T17:44:31.760

如果您想在不恢复破坏活动的情况下传递数据，那么您必须为此设置监听器..

```
public class MyFirstActivity extends Activity implements OnDataChanged {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

}

@Override
public void onChange(int a) {
    Log.e("", "a : " + a);

}

} 
```

MySecondActivity.java

```
public class MySecondActivity extends Activity {

private OnDataChanged mOnDataChanged;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    sendData(10);
}

public interface OnDataChanged {
    public void onChange(int a);
}

private void sendData(int a) {
    mOnDataChanged.onChange(a);
}

} 
```

MySecondActivity 通过实现 MySecondActivity 的侦听器向 MyFirstActivity 发送 10...

# jquery-ui - struts2-jquery-tree.plugin.jar 是否兼容struts1.3

> ID：10354913
> 
> 赞同：0
> 
> 时间：2012-04-27T17:05:23.413
> 
> 标签：jquery-ui, jquery

struts2-jquery-tree.plugin.jar 与 struts1.3 兼容吗？插件会默认启用吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T21:01:07.357

不，它不兼容。您需要 Struts2 2.1.x 或更高版本才能使用 Struts2 jQuery 插件。

# maven - Maven：无法在集成测试前和集成测试后阶段在 JAR 项目上启动插件

> ID：10354916
> 
> 赞同：0
> 
> 时间：2012-04-27T17:05:52.210
> 
> 标签：maven, maven-3, cargo

我正在编写一个充当 Jenkins CI webapp 客户端的 JAR 文件。所以我的项目有jar包，没有war包。但是，对于集成测试，我需要部署 Jenkins WAR 来测试我的 JAR 类。

我正在使用 cargo-maven2-plugin，并对其进行设置，以便我可以使用“mvn cargo:run”从命令行启动 Jenkins 但是，运行“mvn install”进入集成测试阶段而不尝试启动詹金斯与货物。事实上，“mvn install -X”的输出甚至没有提到“cargo”这个词。

看起来我已经正确地将货物绑定到预集成测试和集成后测试，但它不会触发。

下面的POM：

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
<modelVersion>4.0.0</modelVersion>
<groupId>com.phoenix.build</groupId>
<artifactId>HostOp</artifactId>
<packaging>jar</packaging>
<version>0.0.1-SNAPSHOT</version>
<properties>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
    <jetty.port>53657</jetty.port><!-- mnemonic: 'JENKS' on a telephone -->
</properties>
<name>Host Operations</name>
<build>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-surefire-plugin</artifactId>
                <version>2.7.2</version>
                <configuration>
                    <systemProperties>
                        <property>
                            <name>maven.output.dir</name>
                            <value>${project.build.directory}</value>
                        </property>
                    </systemProperties>
                    <excludes>
                        <exclude>**/*IntegrationTest.java</exclude>
                    </excludes>
                </configuration>
                <executions>
                    <execution>
                        <id>integration-tests</id>
                        <phase>integration-test</phase>
                        <goals>
                            <goal>test</goal>
                        </goals>
                        <configuration>
                            <skip>false</skip>
                            <excludes>
                                <exclude>none</exclude>
                            </excludes>
                            <includes>
                                <include>**/*IntegrationTest.java</include>
                            </includes>
                        </configuration>
                    </execution>
                </executions>
            </plugin>
            <plugin>
                <groupId>org.codehaus.cargo</groupId>
                <artifactId>cargo-maven2-plugin</artifactId>
                <executions>
                    <execution>
                        <id>start-container</id>
                        <phase>integration-test</phase>
                        <goals>
                            <goal>start</goal>
                        </goals>
                    </execution>
                    <execution>
                        <id>stop-container</id>
                        <phase>post-integration-test</phase>
                        <goals>
                            <goal>stop</goal>
                        </goals>
                    </execution>
                </executions>
                <configuration>
                    <container>
                        <containerId>jetty6x</containerId>
                        <type>embedded</type>
                        <systemProperties>
                            <JENKINS_HOME>target/test-classes/jenkins_home</JENKINS_HOME>
                        </systemProperties>
                    </container>
                    <configuration>
                        <properties>
                            <cargo.servlet.port>53657</cargo.servlet.port>
                            <cargo.jvmargs>-DJENKINS_HOME=target/test-classes/jenkins_home</cargo.jvmargs>
                        </properties>
                        <deployables>
                            <deployable>
                                <type>war</type>
                                <location>target/test-classes/jenkins.war</location>
                                <pingURL>http://localhost:53657/jenkins/view/All/newJob</pingURL>
                            </deployable>
                        </deployables>
                    </configuration>
                </configuration>
            </plugin>
        </plugins>
</build>
<dependencies>
    <dependency>
        <groupId>junit</groupId>
        <artifactId>junit</artifactId>
        <version>4.8.2</version>
    </dependency>
</dependencies>
</project> 
```

我怎样才能让它根据需要开火？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T20:04:33.437

您发布的 pom 对我来说按预期工作。我只是把它放到一个空项目中，然后：

```
$ mvn install
[...]
[INFO] --- maven-jar-plugin:2.3.1:jar (default-jar) @ cargo-plugin-test ---
[...]
[INFO] --- maven-surefire-plugin:2.7.2:test (integration-tests) @ cargo-plugin-test ---
[...]
[INFO] --- cargo-maven2-plugin:1.2.1:start (start-container) @ cargo-plugin-test ---
[INFO] [2.ContainerStartMojo] Resolved container artifact org.codehaus.cargo:cargo-core-container-jetty:jar:1.2.1 for container jetty6x
[INFO] [beddedLocalContainer] Jetty 6.x Embedded starting...
[...]
2012-04-27 15:01:02.457:WARN::Web application not found target/test-classes/jenkins.war
2012-04-27 15:01:02.457:WARN::Failed startup of context 
[...]
2012-04-27 15:01:02.741:INFO::Started SelectChannelConnector@0.0.0.0:53657
[INFO] [beddedLocalContainer] Jetty 6.x Embedded started on port [53657]
[...] 
```

Maven 3.0.3 就是这样：

```
$ mvn --version
Apache Maven 3.0.3 (r1075438; 2011-02-28 11:31:09-0600)
Maven home: /home/ryan/dev/tools/maven
Java version: 1.7.0_03, vendor: Oracle Corporation
Java home: /home/ryan/dev/tools/jdk1.7.0_03/jre
Default locale: en_US, platform encoding: UTF-8
OS name: "linux", version: "3.0.0-17-generic", arch: "amd64", family: "unix" 
```

我不确定还有什么可能。

# sql - SQL查询聚合日期的格式日期

> ID：10354917
> 
> 赞同：0
> 
> 时间：2012-04-27T17:05:52.913
> 
> 标签：sql, tsql, date

我有这个查询可以正确提取数据，但我希望时间戳字段 (TIM) 采用不同于 Day(TIM) 的另一种格式。但是我收到错误，因为查询是以这种方式聚合的。

```
SELECT
DAY(TIM) As 'Day',
[G.TRU] = SUM(case when SEC = 'TRU' and TYP = 'GEO' then 1 else 0 end),
[G.LOA] = SUM(case when SEC = 'LOA' and TYP = 'GEO' then 1 else 0 end),
[G.SEA] = SUM(case when SEC = 'SEA' and TYP = 'GEO' then 1 else 0 end),
[R.SEA] = SUM(case when SEC = 'SEA' and TYP = 'RTE' then 1 else 0 end),
TOTAL  = COUNT(TIM)
FROM AGEO
WHERE SRC = 'EW'
GROUP BY DAY(TIM) 
```

结果：

```
 Day   G.TRU    G.LOA   G.SEA   R.SEA   TOTAL
-----------------------------------------------
 25      2        4       14      1      21
 26      3        0        2      9      14
----------------------------------------------- 
```

我希望 25 和 26 采用 YYYY-MM-DD 格式。有办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T17:09:45.873

不 - 您按 DAY(TIM)*分组*，因此可能会有不同的月份和年份给出同一天。例如，假设您有两行，一个在 1 月 1 日，一个在 2 月 1 日 - 它们将被聚合在一起，那么您希望为该结果行检索哪一个？

编辑：好的，我不是 SQL 人，但我*认为*你想要类似的东西：

```
SELECT
    CONVERT(Date, TIM) As TIMDATE,
    [G.TRU] = SUM(case when SEC = 'TRU' and TYP = 'GEO' then 1 else 0 end),
    [G.LOA] = SUM(case when SEC = 'LOA' and TYP = 'GEO' then 1 else 0 end),
    [G.SEA] = SUM(case when SEC = 'SEA' and TYP = 'GEO' then 1 else 0 end),
    [R.SEA] = SUM(case when SEC = 'SEA' and TYP = 'RTE' then 1 else 0 end),
    TOTAL  = COUNT(TIM)
FROM AGEO
WHERE SRC = 'EW'
GROUP BY TIMDATE 
```

# java - 玩！框架运行抛出 UnsupportedClassVersionError

> ID：10354919
> 
> 赞同：2
> 
> 时间：2012-04-27T17:06:01.080
> 
> 标签：java, macos, playframework

背景，此应用程序正在 Play 上运行！Mac OS X 10.5.8 上的框架 1.2.4

我正在运行的命令：`sudo play run`

抛出的异常：

```
Exception in thread "main" java.lang.UnsupportedClassVersionError: Bad version number in .class file
    at java.lang.ClassLoader.defineClass1(Native Method)
    at java.lang.ClassLoader.defineClass(ClassLoader.java:676)
    at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:124)
    at java.net.URLClassLoader.defineClass(URLClassLoader.java:260)
    at java.net.URLClassLoader.access$100(URLClassLoader.java:56)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:195)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:188)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:317)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:280)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:252)
    at java.lang.ClassLoader.loadClassInternal(ClassLoader.java:375)
    at java.lang.Class.getDeclaredConstructors0(Native Method)
    at java.lang.Class.privateGetDeclaredConstructors(Class.java:2357)
    at java.lang.Class.getConstructor0(Class.java:2671)
    at java.lang.Class.newInstance0(Class.java:321)
    at java.lang.Class.newInstance(Class.java:303)
    at play.plugins.PluginCollection.loadPlugins(PluginCollection.java:158)
    at play.Play.init(Play.java:294)
    at play.server.Server.main(Server.java:158) 
```

应用程序和所有依赖模块的 application.conf 设置为`java.source=1.6`

`sudo $JAVA_HOME/bin/java -version`产量`java version "1.6.0_26"`

我什至将 /System/Java/Home 指向 1.6 安装。

还有什么可能导致这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T14:54:16.283

您的 PATH 中有哪些 Java 版本？我们遇到了一个类似的问题（尽管 Play 没有），其中应用程序的所有设置似乎都指向 1.6，但 PATH 有一个对 1​​.5 的引用，由于它在 PATH 字符串中的位置，它首先被加载。

检查你的路径。而且，我不是 Mac 用户，但有必要使用`sudo`? 在 Ubuntu 中，我运行 Play without。如果可能，这可能有助于减少由于`root`用户路径和配置导致的意外冲突。

# ruby-on-rails - 启用 Rack::Deflater 时 ETag 发生变化

> ID：10354921
> 
> 赞同：6
> 
> 时间：2012-04-27T17:06:15.643
> 
> 标签：ruby-on-rails, ruby, http, http-headers, rack

在启用 Rack::Deflater 压缩我的响应正文时，偶然发现了一些奇怪的东西。也许我遗漏了一些东西，但是启用此功能后，响应会被压缩，但是资源的 ETag 在每个请求上都会发生变化。这迫使应用程序每次都响应，而不是发送 304。这在没有启用 Rack::Deflater 的情况下工作，并且我已经验证页面源没有改变。我正在运行一个带有 Thin 作为 Web 服务器的 Rails 应用程序。

Gemfile.lock [https://gist.github.com/2510816](https://gist.github.com/2510816)

有什么办法可以从机架中间件获得更多输出，这样我就可以看到发生了什么？

提前致谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-28T12:05:07.973

所以我已经解决了我原来的问题，但仍然没有得到想要的结果。原来 Rack::Deflater 需要在中间件堆栈中的 Rack::ETag 之前。仍然不确定为什么这会导致 ETag 更改每个请求，但如果我更改`config.middleware.use "Rack::Deflater"`为 `config.middleware.insert_before "Rack::ETag", "Rack::Deflater"`那么 ETag 在请求之间变得一致就足够了。我仍然没有得到 304，但我认为那是因为不正确的缓存控制标头并且与原始问题无关。希望这对将来的某人有所帮助。

# android - Android应用程序在没有充分理由的情况下在启动时不断崩溃

> ID：10354922
> 
> 赞同：1
> 
> 时间：2012-04-27T17:06:26.620
> 
> 标签：android, android-emulator, titanium-mobile

这几天我一直在想办法，但无济于事。我正在使用 Titanium 开发一个简单的 android 应用程序，它在 iOS 上运行良好。然而，当我在 android 上启动它时，它永远不会启动。这是我的 manifest.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.tiki.signals" android:versionCode="1"
    android:versionName="1">
    <uses-sdk android:minSdkVersion="8" />

    <!-- TI_MANIFEST -->

    <application android:icon="@drawable/appicon"
        android:label="Signals" android:name="SignalsApplication"
        android:debuggable="false">

        <!-- TI_APPLICATION -->

        <activity android:name=".SignalsActivity"
            android:label="Signals" android:theme="@style/Theme.Titanium"
            android:configChanges="keyboardHidden|orientation">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <activity 
        android:name="ti.modules.titanium.facebook.FBActivity"
        android:theme="@android:style/Theme.Translucent.NoTitleBar"
    />

        <activity android:name="org.appcelerator.titanium.TiActivity"
            android:configChanges="keyboardHidden|orientation" />
        <activity android:name="org.appcelerator.titanium.TiTranslucentActivity"
            android:configChanges="keyboardHidden|orientation"
            android:theme="@android:style/Theme.Translucent" />
        <activity android:name="org.appcelerator.titanium.TiModalActivity"
            android:configChanges="keyboardHidden|orientation"
            android:theme="@android:style/Theme.Translucent" />
        <activity android:name="ti.modules.titanium.ui.TiTabActivity"
            android:configChanges="keyboardHidden|orientation" />
        <activity android:name="ti.modules.titanium.ui.android.TiPreferencesActivity" />

        <service android:name="org.appcelerator.titanium.analytics.TiAnalyticsService"
            android:exported="false" />
    </application>
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
    <uses-permission android:name="android.permission.ACCESS_MOCK_LOCATION"/>
    <uses-permission android:name="android.permission.ACCESS_WIFI_STATE"/>
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>
    <uses-permission android:name="android.permission.INTERNET"/>
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>
</manifest> 
```

这是日志猫：

```
I/ActivityManager(   81): START {act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10200000 cmp=com.tiki.signals/.SignalsActivity} from pid 176
D/PermissionCache(   35): checking android.permission.READ_FRAME_BUFFER for uid=1000 => granted (1163 us)
D/dalvikvm(   81): GC_FOR_ALLOC freed 842K, 14% free 11108K/12807K, paused 106ms
I/dalvikvm-heap(   81): Grow heap (frag case) to 12.385MB for 1536016-byte allocation
D/dalvikvm(   81): GC_FOR_ALLOC freed 1K, 13% free 12606K/14343K, paused 105ms
W/WindowManager(   81): Failure taking screenshot for (180x300) to layer 21005
I/ActivityManager(   81): Start proc com.tiki.signals for activity com.tiki.signals/.SignalsActivity: pid=457 uid=10040 gids={1015, 3003}
I/dalvikvm(  457): Turning on JNI app bug workarounds for target SDK version 8...
W/NetworkManagementSocketTagger(   81): setKernelCountSet(10040, 1) failed with errno -2
D/dalvikvm(   81): GC_CONCURRENT freed 13K, 13% free 12619K/14343K, paused 8ms+32ms
I/Process (   81): Sending signal. PID: 457 SIG: 3
I/dalvikvm(  457): threadid=3: reacting to signal 3
I/dalvikvm(  457): Wrote stack traces to '/data/anr/traces.txt'
I/TiApplication(  457): (main) [0,0] checkpoint, app created.
I/Process (   81): Sending signal. PID: 457 SIG: 3
I/dalvikvm(  457): threadid=3: reacting to signal 3
I/dalvikvm(  457): Wrote stack traces to '/data/anr/traces.txt'
D/dalvikvm(  457): GC_CONCURRENT freed 243K, 4% free 9294K/9607K, paused 7ms+6ms
I/Process (   81): Sending signal. PID: 457 SIG: 3
I/dalvikvm(  457): threadid=3: reacting to signal 3
I/dalvikvm(  457): Wrote stack traces to '/data/anr/traces.txt'
I/TiApplication(  457): (main) [682,682] Titanium 1.8.2 (2012/02/23 17:46 59b3a90)
D/dalvikvm(  457): GC_CONCURRENT freed 422K, 5% free 9434K/9927K, paused 6ms+4ms
I/TiApplication(  457): (main) [254,936] Titanium Javascript runtime: v8
D/dalvikvm(  457): Trying to load lib /data/data/com.tiki.signals/lib/libstlport_shared.so 0x412a1e60
D/dalvikvm(  457): Added shared lib /data/data/com.tiki.signals/lib/libstlport_shared.so 0x412a1e60
D/dalvikvm(  457): No JNI_OnLoad found in /data/data/com.tiki.signals/lib/libstlport_shared.so 0x412a1e60, skipping init
D/dalvikvm(  457): Trying to load lib /data/data/com.tiki.signals/lib/libkroll-v8.so 0x412a1e60
I/TiRootActivity(  457): (main) [0,0] checkpoint, on root activity create, savedInstanceState: null
D/dalvikvm(  457): Added shared lib /data/data/com.tiki.signals/lib/libkroll-v8.so 0x412a1e60
I/Process (   81): Sending signal. PID: 457 SIG: 3
I/dalvikvm(  457): threadid=3: reacting to signal 3
I/dalvikvm(  457): Wrote stack traces to '/data/anr/traces.txt'
I/Process (   81): Sending signal. PID: 457 SIG: 3
I/dalvikvm(  457): threadid=3: reacting to signal 3
I/dalvikvm(  457): Wrote stack traces to '/data/anr/traces.txt'
I/Process (   81): Sending signal. PID: 457 SIG: 3
I/dalvikvm(  457): threadid=3: reacting to signal 3
I/dalvikvm(  457): Wrote stack traces to '/data/anr/traces.txt'
I/Process (   81): Sending signal. PID: 457 SIG: 3
I/dalvikvm(  457): threadid=3: reacting to signal 3
I/dalvikvm(  457): Wrote stack traces to '/data/anr/traces.txt'
I/Process (   81): Sending signal. PID: 457 SIG: 3
I/dalvikvm(  457): threadid=3: reacting to signal 3
I/dalvikvm(  457): Wrote stack traces to '/data/anr/traces.txt'
I/Process (   81): Sending signal. PID: 457 SIG: 3
I/dalvikvm(  457): threadid=3: reacting to signal 3
I/dalvikvm(  457): Wrote stack traces to '/data/anr/traces.txt'
I/Process (   81): Sending signal. PID: 457 SIG: 3
I/dalvikvm(  457): threadid=3: reacting to signal 3
I/dalvikvm(  457): Wrote stack traces to '/data/anr/traces.txt'
E/TiApplication(  457): (KrollRuntimeThread) [3551,3551] APP PROXY: ti.modules.titanium.app.AppModule@41334e08
I/Process (   81): Sending signal. PID: 457 SIG: 3
I/dalvikvm(  457): threadid=3: reacting to signal 3
I/dalvikvm(  457): Wrote stack traces to '/data/anr/traces.txt'
I/Process (   81): Sending signal. PID: 457 SIG: 3
I/dalvikvm(  457): threadid=3: reacting to signal 3
I/dalvikvm(  457): Wrote stack traces to '/data/anr/traces.txt'
I/Process (   81): Sending signal. PID: 457 SIG: 3
I/dalvikvm(  457): threadid=3: reacting to signal 3
I/dalvikvm(  457): Wrote stack traces to '/data/anr/traces.txt'
D/dalvikvm(  457): GC_CONCURRENT freed 349K, 5% free 9566K/10055K, paused 7ms+6ms
I/Process (   81): Sending signal. PID: 457 SIG: 3
I/dalvikvm(  457): threadid=3: reacting to signal 3
I/dalvikvm(  457): Wrote stack traces to '/data/anr/traces.txt'
I/Process (   81): Sending signal. PID: 457 SIG: 3
I/dalvikvm(  457): threadid=3: reacting to signal 3
D/dalvikvm(  457): GC_FOR_ALLOC freed 452K, 7% free 9534K/10183K, paused 84ms
I/dalvikvm(  457): Wrote stack traces to '/data/anr/traces.txt'
D/TiLocation(  457): (main) [2290,5841] preferredProvider property found [null]
D/TiLocation(  457): (main) [1,5842] accuracy property found [0]
E/TiLocationHelper(  457): (main) [31,5873] unable to register, provider is null
D/dalvikvm(  457): GC_FOR_ALLOC freed 105K, 7% free 9571K/10183K, paused 61ms
I/Process (   81): Sending signal. PID: 457 SIG: 3
I/dalvikvm(  457): threadid=3: reacting to signal 3
I/dalvikvm-heap(  457): Grow heap (frag case) to 10.878MB for 1536016-byte allocation
I/dalvikvm(  457): Wrote stack traces to '/data/anr/traces.txt'
D/dalvikvm(  457): GC_CONCURRENT freed 1K, 6% free 11070K/11719K, paused 8ms+5ms
I/TiRootActivity(  457): (main) [0,0] checkpoint, on root activity resume. activity = com.tiki.signals.SignalsActivity@412aba88
V/PhoneStatusBar(  134): setLightsOn(true)
I/Process (   81): Sending signal. PID: 457 SIG: 3
I/dalvikvm(  457): threadid=3: reacting to signal 3
W/InputManagerService(   81): Starting input on non-focused client com.android.internal.view.IInputMethodClient$Stub$Proxy@41434cb8 (uid=10013 pid=176)
I/dalvikvm(  457): Wrote stack traces to '/data/anr/traces.txt'
D/gralloc_goldfish(  457): Emulator without GPU emulation detected.
I/ActivityManager(   81): Displayed com.tiki.signals/.SignalsActivity: +9s553ms
W/NetworkManagementSocketTagger(   81): setKernelCountSet(10013, 0) failed with errno -2
D/ExchangeService(  355): Received deviceId from Email app: androidc259148960
D/ExchangeService(  355): Reconciling accounts...
D/dalvikvm(   81): GC_EXPLICIT freed 1712K, 23% free 11125K/14343K, paused 7ms+11ms
W/ThrottleService(   81): unable to find stats for iface rmnet0
W/TiAnalyticsSvc(  457): (Thread-65) [23787,23787] Analytics Service Started
I/TiAnalyticsSvc(  457): (Thread-65) [152,23939] Sending 2 analytics events.
W/TiAnalyticsSvc(  457): (Thread-65) [1072,25011] Stopping Analytics Service 
```

这是我的 tiapp.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<ti:app xmlns:ti="http://ti.appcelerator.org">
    <property name="ti.android.runtime">v8</property>
    <property name="ti.android.threadstacksize" type="int">132768</property>
    <property name="ti.android.fastdev" type="bool">false</property>
    <sdk-version>1.8.2</sdk-version>
    <deployment-targets>
        <target device="mobileweb">false</target>
        <target device="iphone">true</target>
        <target device="ipad">true</target>
        <target device="android">true</target>
        <target device="blackberry">false</target>
    </deployment-targets>
    <id>com.tiki.signals</id>
    <name>Signals</name>
    <version>1.0</version>
    <publisher>Michael</publisher>
    <url>http://</url>
    <description>not specified</description>
    <copyright>2012 by meilers</copyright>
    <icon>appicon.png</icon>
    <persistent-wifi>false</persistent-wifi>
    <prerendered-icon>false</prerendered-icon>
    <statusbar-style>default</statusbar-style>
    <statusbar-hidden>false</statusbar-hidden>
    <fullscreen>false</fullscreen>
    <navbar-hidden>false</navbar-hidden>
    <analytics>true</analytics>
    <guid>49aefe11-b922-4f04-bffd-887ed59cb5d3</guid>
    <iphone>
        <orientations device="iphone">
            <orientation>Ti.UI.PORTRAIT</orientation>
        </orientations>
        <orientations device="ipad">
            <orientation>Ti.UI.PORTRAIT</orientation>
            <orientation>Ti.UI.UPSIDE_PORTRAIT</orientation>
            <orientation>Ti.UI.LANDSCAPE_LEFT</orientation>
            <orientation>Ti.UI.LANDSCAPE_RIGHT</orientation>
        </orientations>
    </iphone>
    <android xmlns:android="http://schemas.android.com/apk/res/android"/>
    <modules/>
</ti:app> 
```

这里发生了什么？我在 logcat 中没有看到任何错误。虚拟机只是无缘无故地关闭。请帮忙！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T03:16:18.427

仅查看 logcat 就会想到一个项目...内存不足。你会看到免费内存下降到 3% YIKES!。通常尽量保持 10% 的空闲，否则操作系统可能会进入分页状态，并且可能会使某些功能超时。

禁用应用程序中的某些功能并观察模拟器下的内存。最好的建议是将应用程序安装到实际手机上，尽管模拟器应该提供接近真实世界的结果。我不指望很好地模拟任何硬件设备。

这是一些转储内存使用情况的代码。你需要找出你的目标类是什么。在操作系统开始选择您的应用程序之前，较旧的手机只有 16MB，较新的手机只有 48MB。将代码放入 Oncreate。

```
 Runtime rt = Runtime.getRuntime();
 long maxMemory = rt.maxMemory();
 Log.v("onCreate", "maxMemory:>>>>>" + Long.toString(maxMemory));   //max available memory to use

 ActivityManager am = (ActivityManager) getSystemService(ACTIVITY_SERVICE);
 int memoryClass = am.getMemoryClass();
 Log.v("onCreate", "memoryClass:>>>>" + Integer.toString(memoryClass));  //max available you should use to keep from getting bumped off

 printl("PGM MEM FREE MB", GetInternalMemAvail());
 printl("INTERNAL STORAGE FREE MEMORY BYTES",getmem());
 printl("INTERNAL TOTAL MEMORY BYTES",TotalMemory());
 printl("SD MEM FREE MB",GetSDMemAvail());
 printl("SD MEM GB",getAvailableSpaceInGB());

 private static void printl(String printstring,long x)
 {
  String temp;
  temp=String.format(" %d",x);
  Log.e(printstring,temp);  
 } 
```

# ios - MapKit 中的 MapTypeStyle

> ID：10354925
> 
> 赞同：5
> 
> 时间：2012-04-27T17:06:42.200
> 
> 标签：ios, google-maps, ios5, map, mapkit

我想知道是否有任何方法可以配置我们的 MapKit 地图，就像我们在 Google Maps API 中使用 MapTypeStyle 对象一样。

如果我参考 Apple 文档，MKMapView 有一个 mapType 选项，它采用[MKMapType 常量](http://developer.apple.com/library/ios/#documentation/MapKit/Reference/MKMapView_Class/MKMapView/MKMapView.html#//apple_ref/doc/uid/TP40008205)，但没有样式参数，例如带有[MapTypeStyle](https://developers.google.com/maps/documentation/javascript/reference#MapTypeStyle)和[MapTypeStyler](https://developers.google.com/maps/documentation/javascript/reference#MapTypeStyler)的 MapOptions ，这对于快速地图定制非常强大。

所以我的问题是：有没有办法用 MapKit 框架实现类似的东西，如果没有，最好的框架/库是什么？我正在考虑[MapBox](http://mapbox.com/)和类似产品。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T00:51:32.233

我的朋友，你有几个选择。您可以使用这些框架之一

[http://cloudmade.com/products/iphone-sdk](http://cloudmade.com/products/iphone-sdk)

[https://github.com/route-me/route-me](https://github.com/route-me/route-me)

或者你可以只使用 mapbox。他们的 api 看起来很不错。或者，您提供自己的地图图块和覆盖地图套件。MKOverlayView 中的类似内容

```
- (void)drawMapRect:(MKMapRect)mapRect zoomScale:(MKZoomScale)zoomScale inContext:(CGContextRef)context {

NSURL* fileURL = [(HeatMap*)self.overlay localUrlForStyle:@"alien" withMapRect:mapRect andZoomScale:zoomScale];
NSData *imageData = [NSData dataWithContentsOfURL:fileURL ];
if (imageData != nil) {
    UIImage* img = [UIImage imageNamed:@"aTileX.png"];
    // Perform the image render on the current UI context
    UIGraphicsPushContext(context);
    [img drawInRect:[self rectForMapRect:mapRect] blendMode:kCGBlendModeNormal alpha:1.0];
    UIGraphicsPopContext();
    }
} 
```

如果您想要不受支持的“地形”模式，也请检查一下 [http://openradar.appspot.com/9621632](http://openradar.appspot.com/9621632)

我实际上是在一个程序的中间，需要在地图上覆盖图块。[这个例子](http://developer.apple.com/library/ios/#samplecode/HazardMap/Introduction/Intro.html)很有帮助。您需要查看 MKOverlay 和 MKOverlayView。我正在做的项目涉及使用[gheat](http://code.google.com/p/gheat/)。我正在通过 NSURLConnection 访问磁贴并将它们存储在本地。我的实施[要点](https://gist.github.com/2641246)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-05T14:35:32.537

无法使用 mapkit 本地自定义地图样式。您唯一的选择是选择混合应用程序方法，然后在页面本身中使用 html/javascript 自定义样式。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-07T07:46:32.310

由于绘制瓷砖发生在一个名为的私有类中，`MKMapTileView`您不能简单地编写一个类别。您必须为自定义绘图实现另一个类。此类的方法将用于`MKMapTileView`在运行时重载实现：

头文件：

```
@interface MyColorMap : NSObject
+ (void)overLoadMethods:(Class)destinationClass;
@end 
```

实施：

```
#import "MyColorMap.h"
#import <objc/runtime.h>

@implementation MyColorMap

+ (void)overLoadMethods:(Class)destinationClass {
    // get the original method for drawing a tile
    Method originalDrawLayer = class_getInstanceMethod(destinationClass, @selector(drawLayer:inContext:));

    // get the method we will replace with the original implementation of 'drawLayer:inContext:' later
    Method backupDrawLayer = class_getInstanceMethod([self class], @selector(backupDrawLayer:inContext:));

    // get the method we will use to draw our own colors
    Method myDrawLayer = class_getInstanceMethod([self class], @selector(myDrawLayer:inContext:));

    // dito with the implementations
    IMP impOld = method_getImplementation(originalDrawLayer);
    IMP impNew = method_getImplementation(myDrawLayer);

    // replace the original 'drawLayer:inContext:' with our own implementation
    method_setImplementation(originalDrawLayer, impNew);

    // set the original 'drawLayer:inContext:' implementation to our stub-method, so wie can call it later on
    SEL selector = method_getName(backupDrawLayer);
    const char *types = method_getTypeEncoding(backupDrawLayer);
    class_addMethod(destinationClass, selector, impOld, types);
}

- (void)backupDrawLayer:(CALayer*)l inContext:(CGContextRef)c {
    // stub method, implementation will never be called. The only reason we implement this is so we can call the original method durring runtime
}

- (void)myDrawLayer:(CALayer*)l inContext:(CGContextRef)c {
    // set background to white so wie can use it for blendmode
    CGContextSetFillColorWithColor(c, [[UIColor whiteColor] CGColor]); 
    CGContextFillRect(c, CGContextGetClipBoundingBox(c));

    // set blendmode so the map will show as grayscale
    CGContextSetBlendMode(c, kCGBlendModeLuminosity);
    // kCGBlendModeExclusion for inverted colors etc.

    // calling the stub-method which will become the original method durring runtime
    [self backupDrawLayer:l inContext:c];

    // if you want more advanced manipulations you can alter the context after drawing:

//    int w = CGBitmapContextGetWidth(c);
//    int h = CGBitmapContextGetHeight(c);
//    
//    unsigned char* data = CGBitmapContextGetData(c);
//    if (data != NULL) {
//        int maxY = h;
//        for(int y = 0; y<maxY; y++) {
//            for(int x = 0; x<w; x++) {
//                
//                int offset = 4*((w*y)+x);
//                char r = data[offset];
//                char g = data[offset+1];
//                char b = data[offset+2]; 
//                char a = data[offset+3]; 
//                
//                // do what ever you want with the pixels
//                
//                data[offset] = r;
//                data[offset+1] = g; 
//                data[offset+2] = b;
//                data[offset+3] = a;
//            }
//        }
//    }
} 
```

现在您必须`[MyColorMap overLoadMethods:NSClassFromString(@"MKMapTileView")]`在使用之前的某个时间点调用`MKMapView`

# javascript - Javascript 正则表达式使用 $ 替换 WebKit

> ID：10354926
> 
> 赞同：3
> 
> 时间：2012-04-27T17:06:44.770
> 
> 标签：javascript, regex, webkit, replace

使用 $ 匹配输入结束在其他任何地方都会给出零长度匹配，但没有与 WebKit 匹配的证据：

```
function showBug() {
  Result = "the end.".replace( /(end\.)([\s]|$)?/img, makeChange );
  return;
  }
function makeChange() {
  for ( var i = 0; i < arguments.length; i += 1 ) {
    document.write( "arg" + i + " -->" + arguments[ i ] + "<--"  + "<BR>" );
    }
  } 
```

给

```
arg0 -->end.<--
arg1 -->end.<--
arg2 -->undefined<--
arg3 -->4<--
arg4 -->the end.<-- 
```

为`AppleWebKit/534.55.3 (KHTML, like Gecko) Version/5.1.5 Safari/534.55.3`，也为`AppleWebKit/535.19 (KHTML, like Gecko) Chrome/18.0.1025.162 Safari/535.19`。

Opera ( `Presto/2.10.229 Version/11.62`)、FF ( `Gecko/20100101 Firefox/10.0.2`) 和 IE ( `MSIE 8.0; Trident/4.0`) 都给出

```
arg0 -->end.<--
arg1 -->end.<--
arg2 --><--
arg3 -->4<--
arg4 -->the end.<-- 
```

这意味着我可以检测到 $2 中的匹配项（实际上是将 url 上的尾随点解释为不是 url 的一部分）。我目前正在为 WebKit 添加一个尾随空格，然后将其删除，但我想知道是否有人有更好的解决方案并且可以确认我应该将此作为错误提出。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T11:55:22.130

如果要匹配空字符串，则应在捕获组中包含问号，例如

```
/(end\.)((?:\s|$)?)/ 
```

原因是不捕获任何内容的组与捕获空字符串的组不同。例如，考虑以下示例中第二个括号应包含的内容：

```
/a(b(x))?c/.exec('ac'); 
```

# java - 从正在运行的实例中获取弹性 IP

> ID：10354931
> 
> 赞同：4
> 
> 时间：2012-04-27T17:07:29.107
> 
> 标签：java, amazon-ec2, amazon-web-services

从在 EC2 实例上运行的 java 应用程序中，我想知道我自己的弹性 IP 地址是从管理控制台手动分配的。有没有办法为此查询 EC2 API？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-27T17:49:11.857

如果您使用 linux ec2 实例，这应该可以工作：

命令：

```
curl http://169.254.169.254/latest/meta-data/public-ipv4 
```

Java 代码：

```
public static String getIP() throws IOException, InterruptedException {
    Process p = Runtime.getRuntime().exec("curl http://169.254.169.254/latest/meta-data/public-ipv4");
    int returnCode = p.waitFor();
    if ( returnCode == 0 ) {
        BufferedReader r = new BufferedReader(new InputStreamReader(p.getInputStream()));
        String ip = r.readLine();
        r.close();
        return ip;
    }
    else {
        //handle error
        return null;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T17:48:37.683

替代方案（不是最清晰的解决方案），可能是请求这样的外部服务来了解您的公共 IP。 [http://whatismyip.org/](http://whatismyip.org/)

编辑：我找到了一个返回 json 或文本格式的好服务。[https://www.ipify.org/](https://www.ipify.org/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T17:24:08.920

您可以调用[DescribeInstances](http://docs.amazonwebservices.com/AWSEC2/latest/CommandLineReference/ApiReference-cmd-DescribeInstances.html) - 它返回一堆信息，包括公共 IP 地址（`ip-address`过滤器）。

```
...
DescribeInstancesRequest dis = new DescribeInstancesRequest();   
DescribeInstancesResult disresult = ec2.describeInstances(dis);
... 
```

# asp.net-mvc-3 - 如何实现“级联”ViewEngineResults？

> ID：10354935
> 
> 赞同：0
> 
> 时间：2012-04-27T17:07:42.060
> 
> 标签：asp.net-mvc-3, viewengine

当检测到视图名称时，我正在向视图名称添加移动扩展。

这是当前代码：

```
public override ViewEngineResult FindView(ControllerContext controllerContext, string viewName, string masterName, bool useCache)
{
        string GroupName = System.Configuration.ConfigurationManager.AppSettings["GROUP"];

        return base.FindView(controllerContext, viewName + "_" + GroupName, masterName, useCache);
} 
```

因此，如果路由转到`SomeController`并且应用程序设置显示该组是“TeamA”（例如），则将呈现的视图将是`Index_TeamA.cshtml`.

但是，如果没有，`Index_TeamA.cshtml`那么它默认为 Index.cshtml，正如人们所期望的那样。

（这是因为某些团队要求的某些视图存在非常细微的差异。）

但是现在我想为移动版本添加另一个级别：

```
public override ViewEngineResult FindView(ControllerContext controllerContext, string viewName, string masterName, bool useCache)
{
        string GroupName = System.Configuration.ConfigurationManager.AppSettings["GROUP"];

        if (HttpContext.Current.Request.Browser.IsMobileDevice)
             GroupName += "_MOB";

        return base.FindView(controllerContext, viewName + "_" + GroupName, masterName, useCache);
} 
```

但是，问题是如果`Index_TeamA_MOB.cshtml`找不到，它默认为`Index.cshtml`，而我实际上希望它默认为`Index_TeamA.cshtml`.

很清楚为什么会发生这种情况，问题是我如何级联这个实现？所以它首先检查组版本的移动版本（如果检测到移动浏览器），然后如果不存在回退到组版本，那么如果不存在则获取默认视图？

**更新，这是第 1 版**

**编辑：好的，这显然会导致无限循环。**

```
public override ViewEngineResult FindView(ControllerContext controllerContext, string viewName, string masterName, bool useCache)
        {
            string GroupName = System.Configuration.ConfigurationManager.AppSettings["GROUP"];

            if (HttpContext.Current.Request.Browser.IsMobileDevice)
            {
                var result = ViewEngines.Engines.FindView(controllerContext, viewName + "_" + GroupName + "_MOB", masterName);

                if (result != null)
                    return base.FindView(controllerContext, viewName + "_" + GroupName + "_MOB", masterName, useCache);
            }

            return base.FindView(controllerContext, viewName + "_" + GroupName, masterName, useCache);
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T17:55:50.390

啊哈！似乎最好的答案是实现为 MVC 3 提供的新 MVC 4 方法。查看我发现的这篇博文：http: [//dotnet.learningtree.com/2011/10/31/preparing-for-asp-net- mvc-4-移动开发/](http://dotnet.learningtree.com/2011/10/31/preparing-for-asp-net-mvc-4-mobile-development/)

这是一个很好的解决方案，因为它不仅可以工作，而且可以让我轻松升级！

# objective-c - 比较日期

> ID：10354940
> 
> 赞同：0
> 
> 时间：2012-04-27T17:07:57.193
> 
> 标签：objective-c, cocoa-touch, if-statement, nsdate

在我的应用程序中，我需要在一个 if-else 循环中比较三个日期。我有开始日期、结束日期和测试日期。我要检查的是测试日期是否在开始日期和结束日期之间。

```
if (testDate >= startDate && testDate <= endDate) { 
```

如果我将 startDate 设置为 25/04/2012 并将 endDate 设置为 24/04/2019 并将 testDate 设置为 25/12/2013，则代码有效。但是，如果我将 startDate 设置为 26/04/2000 并将 endDate 设置为 24/04/2019 并将 testDate 设置为 25/12/2013，则代码不起作用。怎么了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T17:10:39.680

您无法将 Objective-C 对象与 C 中的任何布尔运算符进行比较。您将比较它们的地址，*而不是*它们的值。

查看`NSDate`该类的文档，特别是`-compare:`方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T17:15:24.857

日期可以这样比较。但是，您必须首先调用`timeIntervalSince1970`将日期转换为整数类型值。在这种情况下，它会为您提供 type 的数值`NSTimeInterval`。

另一种选择是使用在对象`compare:`上调用的方法。`NSDate`

在这种情况下，将一个日期与另一个日期进行比较将在类参考中给出详细的结果，如下所示：

*   接收者和anotherDate完全相等，NSOrderedSame

*   接收者在时间上晚于另一个日期，NSOrderedDescending

*   接收者在时间上早于另一个日期，NSOrderedAscending。

# sql - 从两个表中选择数据 SQL

> ID：10354945
> 
> 赞同：1
> 
> 时间：2012-04-27T17:08:36.560
> 
> 标签：sql, sql-server, sql-server-2008

我有一张表（SeekerInfo），喜欢：

```
--------------------------------------------------
SeekerID -  SeekerName - SeekerSex - SeekerMobile
12121    -  mmmm       - Male      - 067676767
13223    -  ssss       - Female    - 078876767
-------------------------------------------------- 
```

和另一个喜欢的表（SeekerCources）（每个搜索者最多有3个课程）：

```
--------------------------------------------------
SeekerID - CourceName - Duration
12121    - MCSA       - 1 year
12121    - MCPD       - 6 months
13223    - CCNA       - 1 year
13223    - CCNP       - 1 year
13223    - MCTS       - 4 months 
```

我想做一个选择语句，从两个表中预览数据如下所示：

```
SeekerID -  SeekerName - SeekerSex - SeekerMobile - Cource1 - Cource2 - Cource3
12121    -  mmmm       - Male      - 067676767    - MCSA    - MCPD    - *NULL*
13223    -  ssss       - Female    - 078876767    - CCNA    - CCNP    - MCTS 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T17:17:26.807

Here's an approach where you assign the number 1-3 to each of the courses and then do three joins

```
WITH cte 
     AS (SELECT Row_number() OVER (partition BY SeekerID ORDER BY CourceName) rn 
                , 
                SeekerID, 
                CourceName, 
                Duration 
         FROM   SeekerCources) 
SELECT si.SeekerID, 
       si.SeekerName, 
       si.SeekerSex, 
       si.SeekerMobile, 
       c1.CourceName AS Cource1, 
       c2.CourceName AS Cource2, 
       c3.CourceName AS Cource3 
FROM   SeekerInfo si 
       LEFT JOIN cte c1 
         ON si.SeekerID = c1.SeekerID 
            AND c1.rn = 1 
       LEFT JOIN cte c2 
         ON si.SeekerID = c2.SeekerID 
            AND c2.rn = 2 
       LEFT JOIN cte c3 
         ON si.SeekerID = c3.SeekerID 
            AND c3.rn = 3 
```

[DEMO](http://sqlfiddle.com/#!3/0b2fb/8)

One unresolved problem is that we don't have a good way to decide which course goes in 1,2,or 3 perhaps if you had a field like date taken you could replace CourceName with that

e.g.
`Row_number() OVER (partition BY SeekerID ORDER BY DateTaken)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T17:18:16.573

It looks like you are going to have a lot of NULL values in the long term which means that you will certainly run into problems sooner or later. Also, you are trying to introduce n number of attributes, n being the largest number of course results, in your result which doesn't make things easier on the client side.

May I suggest a different approach where you will get all results as rows, which means that you will have duplicate data in your result (This doesn't really matter though as you're not storing that).

```
SELECT i.*, c.CourseName 
FROM SeekerInfo i JOIN SeekerCourses c 
ON i.SeekerID = c.SeekerID; 
```

This will return all courses with the additional seeker information ;)

EDIT: Sorry, I didn't properly read your post - you will always have a maximum of 3 courses. Still, maybe this helps anyway.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-04-16T20:23:01.997

在这里，我试图分三步展示你的答案。

```
CREATE TABLE [SeekerCources](
    [SeekerID] [nvarchar](50) NULL,
    [CourceName] [nvarchar](50) NULL,
    [Duration] [nvarchar](50) NULL
) 

CREATE TABLE [SeekerInfo](
    [SeekerID] [nvarchar](50) NULL,
    [SeekerName] [nvarchar](50) NULL,
    [SeekerSex] [nvarchar](50) NULL,
    [SeekerMobile] [nvarchar](50) NULL
)

INSERT [SeekerCources] ([SeekerID], [CourceName], [Duration]) VALUES (N'12121', N'MCSA', N'1 year')
INSERT [SeekerCources] ([SeekerID], [CourceName], [Duration]) VALUES (N'12121', N'MCPD', N'6 months')
INSERT [SeekerCources] ([SeekerID], [CourceName], [Duration]) VALUES (N'13223', N'CCNA', N'1 year')
INSERT [SeekerCources] ([SeekerID], [CourceName], [Duration]) VALUES (N'13223', N'CCNP', N'1 year')
INSERT [SeekerCources] ([SeekerID], [CourceName], [Duration]) VALUES (N'13223', N'MCTS', N'4 months')
INSERT [SeekerInfo] ([SeekerID], [SeekerName], [SeekerSex], [SeekerMobile]) VALUES (N'12121', N'mmmm', N'Male', N'067676767')
INSERT [SeekerInfo] ([SeekerID], [SeekerName], [SeekerSex], [SeekerMobile]) VALUES (N'13223', N'ssss', N'Female', N'078876767') 
```

**步骤1**

```
Select SeekerID, CourceName, 
'Course' + CAST(ROW_NUMBER() over (partition by SeekerID order by CourceName) as varchar(10)) as CourseSquence
from SeekerCources 
```

第 1 步的结果应如下所示。

[![步骤 1 结果](../Images/6d430ab3a09632cf7173d06dd55c30d4.png)](https://i.stack.imgur.com/CscFK.png)

演示：[链接](http://www.sqlfiddle.com/#!18/3f7ba/1/0)

**第2步**

```
Select SeekerID, Course1, Course2, Course3
from    
(
    select SeekerID, CourceName, 
    'Course' + CAST(ROW_NUMBER() over (partition by SeekerID order by CourceName) as varchar(10)) as CourseSquence
    from SeekerCources  
) Temp
Pivot
(
    Max(CourceName)
    For CourseSquence in (Course1, Course2, Course3)
) PIV 
```

第 2 步的结果应如下所示。

[![步骤 2 结果](../Images/8e1fb6bc6c7338a1e841e3fa2fd8fc5b.png)](https://i.stack.imgur.com/8qlzb.png)

演示：[链接](http://www.sqlfiddle.com/#!18/3f7ba/4/0)

**第 3 步**

```
Select SeekerInfo.*, PIV.SeekerID, Course1, Course2, Course3
from    
(
    select SeekerID, CourceName, 
    'Course' + CAST(ROW_NUMBER() over (partition by SeekerID order by CourceName) as varchar(10)) as CourseSquence
    from SeekerCources  
) Temp
Pivot
(
    Max(CourceName)
    For CourseSquence in (Course1, Course2, Course3)
) PIV
inner join SeekerInfo on SeekerInfo.SeekerID = PIV.SeekerID 
```

第 3 步的结果应如下所示。

[![步骤 3 结果](../Images/58c0f6341387146f993b7189884db9ba.png)](https://i.stack.imgur.com/U36Yv.png)

演示：[链接](http://www.sqlfiddle.com/#!18/3f7ba/5/0)

**解说**
视频 1：SQL Server 中的 Pivot - [https://youtu.be/h3BtudZehuo](https://youtu.be/h3BtudZehuo)
视频 2：将行转换为列 - [https://youtu.be/C0mQqDnF7wQ](https://youtu.be/C0mQqDnF7wQ)

# c# - 可组合的应用程序是否一定意味着基于插件的架构

> ID：10354950
> 
> 赞同：0
> 
> 时间：2012-04-27T17:09:01.690
> 
> 标签：c#, .net, architecture, extensibility

我目前正在开发一个应用程序，并希望为其添加新功能。

一种是直接更新应用程序的代码。

另一个是提供一个可扩展层，其中将添加新功能。

阅读了关于插件架构的多篇文章并使用 MEF 创建可组合应用程序后，我有点困惑这两个术语是否实际上意味着相同的东西，如果不是，它们有什么不同？

另外，我很想知道任何有助于“打开”我的应用程序以允许将来更容易扩展的良好设计解决方案（新的期货可以“作为扩展”添加）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T18:09:50.283

你肯定需要一个基于插件的架构来拥有一个通用的可扩展性框架。

但是，您不一定需要依赖容器或 MEF。

它可能就像定义一个`IPlugIn`接口和扫描实现该接口的类型的程序集一样简单。然后实例化该类型的实例以开始。

# python - python错误：验证字符串的明显条件不起作用

> ID：10354953
> 
> 赞同：0
> 
> 时间：2012-04-27T17:09:12.287
> 
> 标签：python, conditional-statements

我在 python 中有一个很小的（愚蠢的）问题，我正在开发一个客户端-服务器程序以传输文本文件，目前我在尝试接收文件时遇到了一些困难。我的问题是当我问用户是否要保存文件时，即使他输入 Y 或 y 也不起作用，这是代码段：

```
print "Listening on input"
    a = 1
    while a == 1:
        pipe = open(fifoclient,'r')
        dr, dw, de = select.select([pipe], [], [], 0)
        if dr:
            content = pipe.read()
            liste = content.split("delimiter")
            expediteur = liste[1]
            filecont = liste[2]

            print "You received a file from : " + expediteur + ". Wanna save it?"
            answer = raw_input("O/N: ")
            while answer != "O" or answer != "N" or answer != "o" or answer != "n":
                print "Please enter a correct answer:\n"
                answer = raw_input("O/N: ")
            if answer == "O" or answer == "o":
                fileoutpath = str(raw_input("please enter the complete path for where you want to save the file to: "))
                while os.path.exists(fileoutpath):
                    print "THe file already exists, chose another path:\n"
                    fileoutpath = str(raw_input("please enter the complete path for where you want to save the file to: "))
                fileout = open(fileoutpath,'w')
                fileout.write(filecont)
                fileout.close()
            else:
                a = 0 
```

问题是当它要求 O/N 时（Oui/Non 它是法语 :) ）。即使我输入“o”或“O”，它仍然会告诉我输入正确的答案。任何帮助，将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T17:14:41.123

这是一个布尔逻辑错误，你应该写：

```
while answer != "O" and answer != "N" and answer != "o" and answer != "n": 
```

或者简单地说：

```
while answer not in "oOnN": 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T17:12:49.970

这是因为你的条件不对。

```
answer != "O" or answer != "N" or answer != "o" or answer != "n" 
```

总是正确的。

它被评估为：

```
(answer != "O") or (answer != "N") or (answer != "o") or (answer != "n") 
```

如您所见，其中一个语句始终为真，并且因为它们由 链接，所以无论您输入什么`or`，整个表达式的计算结果都是 。`True`

更改`or`为`and`，它将按您的预期工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T17:28:13.260

另一种考虑的方法

```
# ask question, suggest answer, convert response to lower case
answer = raw_input("Are you happy? (enter Y or N)").lower()

# allow several possible responses
if answer in ("y", "yes"):
    # do whatever for 'yes' response 
```

您还可以反转测试：

```
if answer not in ("y", "yes"):
    # did not answer 'yes' (or equiv) 
```

# android - 如何实现秘密菜单

> ID：10354955
> 
> 赞同：6
> 
> 时间：2012-04-27T17:09:16.233
> 
> 标签：android, android-menu

**为了测试我还**不想向公众发布的功能，我想实现一个“秘密”菜单或菜单项。

我所说的“秘密”并不是指真正的秘密，而是更多的隐藏或不可见的菜单，只有开发人员（我）可以通过输入代码或其他机制访问。

如果最终用户发现它并尝试使用它，这并不是世界末日（“他们让它证明是白痴，但我找到了解决方法。”）。我只是不想通过提供尚未完全测试的功能来让毫无戒心的无辜非专业最终用户失败。

关于如何解决这个问题的任何建议？（仅限 Android 2.2 及更高版本）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-27T17:27:31.850

*   比较例如设备的 Android Id，如果它与您的开发手机匹配，请解锁菜单

*   让您的应用程序检查是否安装了另一个应用程序（一些空的虚拟）并根据该信息解锁菜单。

*   您可以将 Activity 添加到您的代码/清单中，该活动不是由任何代码触发的。您仍然可以通过以下方式启动它`adb shell am start -n com.your.package/.SecretThing`（该活动可以简单地设置解锁菜单的共享首选项）

*   如果你收听一些你发送的秘密广播，你可以触发一个菜单`adb shell am broadcast -a your.secret.broacast.ACTION_SECRET`

*   如果您有一个带有键盘的设备，则实现一个按键侦听器，仅在您输入一些秘密单词时触发菜单（仍将按键事件转发给系统）

*   如果您的应用程序可以访问位置，那么如果您不在家，则隐藏菜单。

*   添加一些始终可见的菜单项，以触发受密码保护的屏幕（不是一个好主意，但它有效）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-27T17:18:10.747

我使用过几次的一种方法是在用户三次点击屏幕的特定部分时弹出一个 PIN 输入表单。您输入 PIN 码，即可进入开发人员屏幕。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-27T17:26:59.933

您想只在开发手机上使用菜单，还是想在任何手机上访问菜单？

这是我能想到的3个选项。

1）您可以有一个文件，其中包含一些任意字符串密钥代码，并且文件和密钥的存在打开了该功能。

2）您可以在按钮上记录屏幕按下，并结合使用这些操作启动密码屏幕。

3）如果你有一个选项菜单，有更多的部分，你可以把通行证屏幕埋在那里。或者，如果您有关于屏幕，长按徽标可以启动通过屏幕。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-04T09:26:33.317

我也需要一个秘密菜单，好吧，我将在 上实现它，在 EditText 字段`login screen`中输入，然后。`device time``press cancel`

# asp.net - T-SQL 搜索结果 OR/AND 条件

> ID：10354959
> 
> 赞同：0
> 
> 时间：2012-04-27T17:09:38.933
> 
> 标签：asp.net, tsql

我正在构建一个系统，用户可以在论坛中按性别、年龄语言、用户兴趣搜索用户。

我有这个存储过程：

```
ALTER PROCEDURE dbo.FindFriends
    (
    @language int,
    @country nvarchar(50),
    @sex int,
    @ageFrom int,
    @ageTo int,
    @category nvarchar(50)
    )
AS
    SELECT u.*, cat.*
    FROM  [User] AS u
    INNER JOIN categories AS cat ON u.user_id=cat.user_id 
    WHERE (age_presenentation BETWEEN @ageFrom AND @ageTo) AND lingo=@language AND sex=@sex AND cat.category_name=@category 
```

这个声明是我想要的。但有时，用户可能不会输入某些字段。例如，用户可能仅按类别搜索用户。这将导致没有用户出现，因为我使用的是“与”运算符。有没有办法组合逻辑，这样如果任何 sql 变量（例如@category、@angeTo）为空，语句将不包含它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T17:12:17.240

这取决于您所说的“空”是什么意思。如果你的意思是 NULL，那么试试这个：

```
WHERE age_presenentation BETWEEN @ageFrom AND @ageTo
AND (lingo=@language OR @language IS NULL)
AND (sex=@sex OR @sex IS NULL) 
AND (cat.category_name=@category OR @category IS NULL) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T17:16:12.373

我遇到过很多次。

尝试：

```
WHERE (age_presenentation BETWEEN @ageFrom AND @ageTo)
AND ((@language IS NULL) OR (lingo=@language))
AND ((@sex IS NULL) OR (sex=@sex))
AND ((@category IS NULL) OR (cat.category_name=@category))

You can apply the same logic to the @ageFrom as well:
((@ageFrom IS NULL) OR (age_presenentation BETWEEN @ageFrom AND @ageTo)) 
```

但这可能是太多的记录。

# objective-c - 尝试播放音频时找不到文件错误（Obj-C）

> ID：10354962
> 
> 赞同：0
> 
> 时间：2012-04-27T17:09:44.060
> 
> 标签：objective-c, xcode, audio, avaudioplayer

我是新手，所以为了让事情变得简单，我试图在我的 main.m 中添加声音

据我所知，以下代码应该可以工作，但是当我运行它时，我得到一个“错误域=NSOSStatusErrorDomain Code=-43”操作无法完成。（OSStatus 错误 -43。）“（找不到文件）”

我已经尝试过使用各种音频文件和格式 - 在 Xcode 中添加到项目中，但无法弄清楚为什么它找不到我的 G1.wav

```
AVAudioPlayer *audioPlayer;

        NSURL *url = [NSURL fileURLWithPath:[NSString stringWithFormat:@"/G1.wav"]];

        NSError *error;
        audioPlayer = [[AVAudioPlayer alloc] initWithContentsOfURL:url error:&error];
        audioPlayer.numberOfLoops = -1;

        if (audioPlayer == nil)
            NSLog([error description]);
        else
            [audioPlayer play]; 
```

编辑删除了 NSBundle 和 mainBundle 引用 - 我的误解

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T17:18:23.560

你可能会更好：

```
NSString *path = [[NSBundle mainBundle] pathForResource:@"G1" ofType:@"wav"];
NSURL *url = [NSURL fileURLWithPath:path];
... 
```

使用`pathForResource:ofType:`您不必担心文件在捆绑包的层次结构中的位置。API 调用解决了这个问题。在您的代码中，`resourcePath`返回的任何内容显然都不是正确的路径。

您也可以`NSLog()`在这里和那里添加一些调用以查看实际发生的情况。

# asp.net - vbscript 未检索所有服务器变量

> ID：10354966
> 
> 赞同：1
> 
> 时间：2012-04-27T17:09:59.807
> 
> 标签：asp.net, vb.net, asp-classic, vbscript, server-variables

我有一个用 VBSCRIPT 编写的网站，我正在迁移到 VB.NET。在我有时间重写一些页面/应用程序之前，我想更新一些代码，以便它们更好地工作。我试图在 VBSCRIPT 页面上获取一个服务器变量，其中包含来自企业登录的用户名。

我这里有 2 个测试页面，一个顶部是 language="VB"，另一个是 language="VBSCRIPT"。

```
 <html xmlns="http://www.w3.org/1999/xhtml">
       <head runat="server">
           <title>Server Variables</title>
       </head>
       <body>
           <form id="form1" runat="server">
               <div>
                   <%
                       For Each var In Request.ServerVariables
                           Response.Write("<b>" + var + "</b>= " + Request.ServerVariables(var) + "<br />")
                       Next
                   %>
               </div>
           </form>
       </body>
   </html> 
```

当 VB 页面和 ALL_HTTP 中有数据时，VBSCRIPT 页面将列出没有数据的变量。有什么方法可以让 VBSCRIPT 收集所有服务器变量的正确信息？

谢谢你

编辑：这些是在 VB 和 VBS AUTH_USER、REMOTE_USER之间变化的变量- VBS 上的登录用户、VB
REMOTE_PORT 上的 iis_anon - 未在 VBS 中列出

The following are listed in VBS, but have no data
HTTP_SERVER_PROTOCOL
HTTP_SM_TRANSACTIONID
HTTP_SM_CLIENT_IP
HTTP_REQUEST_METHOD
HTTP_SM_SDOMAIN
HTTP_SM_REALM
HTTP_SM_REALMOID
HTTP_SM_AUTHTYPE
HTTP_SM_AUTHREASON
HTTP_SM_UNIVERSALID
HTTP_SM_AUTHDIROID
HTTP_SM_AUTHDIRNAME
HTTP_SM_AUTHDIRSERVER
HTTP_SM_AUTHDIRNAMESPACE
HTTP_SM_USER
HTTP_SM_USERDN
HTTP_SM_SERVERSESSIONID
HTTP_SM_SERVERSESSIONSPEC
HTTP_SM_TIMETOEXPIRE
HTTP_SM_SERVERIDENTITYSPEC
HTTP_REMOTE_USER
Also there is a custom on I wish to get that is used for our enterprise authentication.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T05:22:42.647

我之前遇到过这个问题，自定义 HTTP 标头在原始标头名称中有下划线（可以在`ALL_RAW`服务器变量中看到）。将`HTTP_`下划线转换为破折号（例如，`HTTP_USER_AGENT`对应于名为 的实际标题`User-Agent`）。为了检索名称中包含下划线的任何标头的值，您必须使用[`HEADER_`](http://msdn.microsoft.com/en-us/library/ms524602%28VS.90%29.aspx)前缀，它将搜索确切的标头名称（例如，`HEADER_USER_AGENT`将搜索名为 的标头`User_Agent`）。

顺便说一句，[这篇博](http://blogs.msdn.com/b/david.wang/archive/2006/04/20/howto-retrieve-request-headers-using-isapi-asp-and-asp-net.aspx)文提供了更多关于为什么有两个前缀的背景信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T12:40:40.723

这是我在各种 IIS 版本上运行的经典 ASP 页面。对于用户，我在我的大多数项目中都有这个，这使得用户信息在服务器和客户端可用。如果您在域中，请将 DMAIN 替换为您的，否则您可以放弃替换。必须在您的 IIS 站点上启用 NTLM 安全性（Windows 身份验证），禁止匿名访问。此代码返回的 servarvariables 列表因操作系统和 IIS 版本、启用的功能、设置等而异。某些键将具有空值，因此例如 REMOTE_PORT 在我的上不可用（我使用标准 80 端口）但 SERVER_PORT 是。

```
<%
  Dim user
  user = Replace(uCase(Request.ServerVariables("AUTH_USER")), "DOMAIN\", "")
%>
  <script type="text/javascript">var user = <%=user%></script> 
```

这里是servervariables.asp的内容

```
<html>
<%@language=VBScript%>
<%
  With Response
    .Expires=-1
    .Clear
  End With
  dim teller
  response.write "<h1>Servervariables</h1>"
  response.write "<table>"
  teller = 1
  for each subkey in Request.Servervariables
    response.write "<tr><td>"
    response.write teller
    response.write "</td><td>"
    response.write (Request.Servervariables.Key(teller))
    response.write "</td><td>"
    response.write (Request.Servervariables.Item(teller))
    response.write "</td></tr>"
    teller = teller + 1 
  next
  response.write "</table>"
  response.write request.servervariables("path_translated") & "<br>"
  response.write "USER cookie:" & Request.Cookies("USER") & "<br>"
  response.write "USER Sessionvariable:" & Session("USER") & "<br>"
%>
</html> 
```

# objective-c - 将东西放入我的视图控制器的 viewDidUnload 没有任何效果

> ID：10354967
> 
> 赞同：0
> 
> 时间：2012-04-27T17:10:02.157
> 
> 标签：objective-c, cocoa-touch, uiviewcontroller, viewdidunload

有一个`UIViewController`方法`-(void)viewDidUnload`。我尝试`NSLog("unloaded");`在那里查看视图何时被卸载，但控制台上没有打印任何内容。

我应该把我的代码放在哪里，以便在视图卸载之前我可以执行一个操作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-27T17:16:07.040

如果您阅读 viewDidUnload 文档，您会发现它与内存不足的情况有关，**可能会**被调用来帮助解决这个问题。还有一个 viewWillUnload 在视图被释放之前调用。这也与内存不足有关。

如果您只对不再看到视图感兴趣，则有将/确实消失的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T17:19:09.317

您是否使用故事板？

你试过这些方法中的任何一种吗

```
 -(void) viewWillUnload{} 
```

或者

```
-(void)viewWillDisappear:(BOOL)animated{} 
```

如果您使用情节提要，通常执行的意志是 viewWillDisappear。

# mysql - 从 phpmyadmin 导出时 MySql GROUP_CONCAT 失败

> ID：10354969
> 
> 赞同：6
> 
> 时间：2012-04-27T17:10:09.987
> 
> 标签：mysql, sql, phpmyadmin, group-concat

当我使用它测试查询时，`group_concat`它工作正常并在行中输出正确的逗号分隔列表。但是，当我然后单击结果集底部的“导出”时，我收到一条错误消息`#1630 - FUNCTION <databasename>.group_concat does not exist.`

它似乎将引用`GROUP_CONCAT`视为用户定义的函数。有没有办法正确限定函数名称，以便在导出时可以找到它？在不尝试使用`group_concat`.

这是查询：

```
SELECT *, group_concat(distinct g.name) FROM `users` u
left join usergroupassoc a on u.userid = a.userid
left join usergroups g on a.usergroupid = g.usergroupid
where u.enddate is null and g.enddate is null group by u.userid 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T12:54:54.063

group_concat 使用逗号作为默认分隔符，这可能会阻止 phpmyadmin 正确生成导出文件。

尝试将分号指定为 group_concat 分隔符：

```
SELECT *, group_concat(distinct g.name SEPARATOR ';') FROM `users` u
left join usergroupassoc a on u.userid = a.userid
left join usergroups g on a.usergroupid = g.usergroupid
where u.enddate is null and g.enddate is null group by u.userid; 
```

# javascript - 带有不展开 ContentPane 选项的自定义 Dojo Accordion Container 小部件

> ID：10354972
> 
> 赞同：0
> 
> 时间：2012-04-27T17:10:17.557
> 
> 标签：javascript, html, dojo

我正在尝试创建一个自定义 dojo 小部件，以防止“过渡”到内容窗格。我试图让窗格链接到另一个页面而不是滑动。

我将使用属性 doExpand="false" 示例指定此选项：

```
<div id="menu">

<div dojoType="AccordionMenu" doLayout="true" class="tundra" style="height: 300px">

<div dojoType="AccordionPane" doExpand="false" title="<p>Home</p>"></div>

<div dojoType="AccordionPane" selected="true" title="<p>Tasks 1</p>">
<ul class="nav">
     <li><a href="#">Task 1</a></li>
     <li><a href="#">Task 2</a></li>
     <li><a href="#">Task 3</a></li>
</ul>                    
</div>

<div dojoType="AccordionPane"  title="<p>Tasks 2</p>">
<ul class="nav">
     <li><a href="#">Task 1</a></li>
     <li><a href="#">Task 2</a></li>
     <li><a href="#">Task 3</a></li>
</ul>                    
</div>    

</div>

</div> 
```

我已经像这样设置了我的自定义小部件：

```
<script>

dojo.require("dojo.parser");
dojo.require("dijit.Menu");
dojo.require("dijit.MenuSeparator");
dojo.require("dijit.MenuItem");
dojo.require("dijit.PopupMenuItem");
dojo.require("dijit.layout.AccordionContainer");    

dojo.ready(function(){

console.log('AccordionMenu loading');

dojo.declare("AccordionMenu",
    [dijit.layout.AccordionContainer],
    {
        postMixInProperties: function(){
        console.log('AccordionMenu postMixInProperties');
        },

        _transition: function(/*dijit._Widget?*/ newWidget, /*dijit._Widget?*/ oldWidget, /*Boolean*/ animate){
        if (newWidget.doExpand == true){
            this.inherited(arguments);
        };

        }

    });

console.log('AccordionPane loading done');

dojo.declare("AccordionPane",
    [dijit.layout.ContentPane],
    {
        doExpand: true,

        postMixInProperties: function(){
        console.log('AccordionPane postMixInProperties');
        }

    });

console.log('AccordionPane loading done');    

});    

dojo.addOnLoad( function(){
console.log('parse menu');
dojo.parser.parse("menu");
});

</script> 
```

这有点工作，但是当我点击不同的 ContentPane 时，它​​不会折叠前一个。可能有更好的方法来做到这一点。

这是一个活生生的例子 - [http://jsfiddle.net/qPqhK/15/](http://jsfiddle.net/qPqhK/15/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T14:06:31.417

好的，我找到了答案 - 我需要在 dijit.layout.StackContainer 中重写 selectChild 方法。oldWidget/newWidget 变量在 _transition 方法中出现故障。

```
selectChild: function(page){
            console.log(page);

            if (page.doExpand == true){
                console.log('true')
                this.inherited(arguments)
            };

        } 
```

[http://jsfiddle.net/KvXmR/1/](http://jsfiddle.net/KvXmR/1/)

# android - 在后台工作时更新 UI

> ID：10354975
> 
> 赞同：6
> 
> 时间：2012-04-27T17:10:21.287
> 
> 标签：android, multithreading, android-ui

我有一个更新数据库操作，它有一个活动，它不断更新百分比，它在 AsyncTask 中运行。

在 doInBackground() 内部，我调用更新数据库的控制器并不断更新活动的百分比，但是，如果我按下主页按钮或后退按钮，操作将被取消。你建议我做什么？

我试图在 doInBackground() 中启动一个服务，这样它就可以在后台运行，但看起来它不起作用。

我的代码如下所示：

```
public class UpdateDatabaseAsyncTask extends AsyncTask<Void, Integer, Integer>
{   
    @Override
    public void onPreExecute()
    {
        mCustomProgressBar.startAnimation();
    }

    @Override
    public Integer doInBackground(Void... params)
    {
        return mController.updateDatabase();
    }

    @Override
    public void onPostExecute(Integer result)
    {
        mCustomProgressBar.stopAnimation();
        // finish the activity
    }

    @Override
    public void onProgressUpdate(Integer... value)
    {
        updatePercentageValue(value[0]);
    }

    public void callPublishProgress(Integer value)
    {
        publishProgress(value);
    }
} 
```

在控制器内部，我调用`callPublishProgress(value)`传递当前百分比值的方法，所以它会`publishProgress(value)`在 UI 中。

我正在调试，我按下了主页/返回按钮，它刚刚停止运行工作线程。

* * *

我尝试过的另一个解决方案是，无论用户是否按下主页/返回按钮，都启动一个在后台运行的服务，所以我想，服务会调用执行工作的控制器方法，它会调用`callPublishProgress(value)`无论如何都要更新 UI 上的百分比值。

然而，发生的事情是，代码到达`doInBackground()` 并启动服务，但它立即进入`onPostExecute()`，它只是没有等待服务完成（**当然！**）。所以它给出了一个`NullPointerException`. 我想`doInBackground()`在服务中设置一个标志来创建一个循环，所以它会在服务尚未完成时离开这个循环（我使用的是 IntentService），但它无论如何都不起作用。

我也想过使用计时器。但我不知道。

我正在阅读有关线程等的文档中的文章。它建议使用`AsyncTask`，就像我尝试做的那样。它还谈到`runOnUiThread(Runnable)`.

**无论如何，我需要的是在后台进行操作（可能使用 IntentService），所以无论用户是否按下主页按钮，它都会继续运行，但它必须更新 UI 上的百分比，并且当用户离开时屏幕并返回它，它显示屏幕中更新的当前百分比值。**

我的情况的最佳解决方案是什么？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-27T17:32:45.017

```
public class MyServce extends Service{
public static final String BROADCAST_ACTION = "com.myapp";
Intent intent;
private final Handler handler = new Handler();

@Override
public void onCreate()
{
    super.onCreate();
    intent = new Intent(BROADCAST_ACTION);
}

 @Override
    public void onStart(Intent intent, int startId) {
        handler.removeCallbacks(sendUpdatesToUI);
        handler.postDelayed(sendUpdatesToUI, 1000); // 1 second

    }
   private Runnable sendUpdatesToUI = new Runnable() {
        public void run() {
            DoYourWorking();        
            handler.postDelayed(this, 1000); // 1 seconds
        }

        private void DoYourWorking() {
        ........
                    ........
                     intent.putExtra("key", progress);
             sendBroadcast(intent);

        }
    };   

@Override
public IBinder onBind(Intent intent) {
    // TODO Auto-generated method stub
    return null;
}
@Override
public void onDestroy() {   
    super.onDestroy();
    handler.removeCallbacks(sendUpdatesToUI);       

} 
```

现在在您的活动注册广播服务

```
private BroadcastReceiver brodcast = new BroadcastReceiver() {

    @Override
    public void onReceive(Context context, Intent intent) {
                 //intent.getWhatever
        // update your progress
        //progressbar.setProgress 
    } 
```

注册广播

```
 registerReceiver(brodcast, new IntentFilter(MyService.BROADCAST_ACTION)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T17:24:59.710

这对我有用。我在一个线程上启动了一个后台服务，它只获取值并更新单例中的对象。

在视图控制器中，我启动了一个计时器，它通过从单例对象中获取数据来不断更新视图。

我在理解你的整个问题文本时遇到了一点问题，所以我不确定你是否尝试过这个。但这是有效的。此外，该服务开始于`START_STICKY`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T17:30:53.947

使用[IntentService](http://developer.android.com/reference/android/app/IntentService.html)（它自己的线程上的 Service）和[Handler](http://developer.android.com/reference/android/os/Handler.html)将数据传回 Activity。

# android - 更改时来自progressBar的WebView NullPointerException

> ID：10354977
> 
> 赞同：1
> 
> 时间：2012-04-27T17:10:22.577
> 
> 标签：android, webview, crash, nullpointerexception, progressdialog

尽管它似乎在我的设备和其他设备上运行良好，但在发布时，我似乎为大量用户收到了这个 NullPointerException，我用一个 try catch 包围它以防止崩溃，但我仍然被报告所困扰。

```
0java.lang.NullPointerException
1at broakenmedia.wiredmagazine.MainActivity$loadWebsite$1.onProgressChanged(MainActivity.java:331)
2at android.webkit.CallbackProxy.handleMessage(CallbackProxy.java:359)
3at android.os.Handler.dispatchMessage(Handler.java:99)
4at android.os.Looper.loop(Looper.java:132)
5at android.app.ActivityThread.main(ActivityThread.java:4126)
6at java.lang.reflect.Method.invokeNative(Native Method)
7at java.lang.reflect.Method.invoke(Method.java:491)
8at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:844)
9at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:602)
10at dalvik.system.NativeStart.main(Native Method) 
```

代码：

```
 @SuppressWarnings("rawtypes")
        private class loadWebsite extends AsyncTask{
            private WebView webview;

       @Override
    protected Object doInBackground(Object... arg0) {
        webview = (WebView)findViewById(R.id.webView);

        webview.setWebChromeClient(new WebChromeClient() {
            public void onProgressChanged(final WebView view, final int progress) {

                if(progress==100){
                    try {
                     pageLoading = (ProgressBar) findViewById(R.id.pageLoading);
                        pageLoading.setVisibility(View.GONE);
                 } catch (Exception e) {
                     // TODO Auto-generated catch block
                     BugSenseHandler.log("ProgressBarAt100", e);
                 }
                }
                else
                {
                    try {
                     pageLoading = (ProgressBar) findViewById(R.id.pageLoading);
                        pageLoading.setVisibility(View.VISIBLE);
                 } catch (Exception e) {
                     // TODO Auto-generated catch block
                     BugSenseHandler.log("ProgressBarAt0", e);
                 }
                }

                        //progressDialog.incrementProgressBy(progress);

                        //if(progress == 100 && progressDialog.isShowing())
                         //   progressDialog.dismiss();
                    }

                            }); 
        webview = (WebView)findViewById(R.id.webView);
        webview.setWebViewClient(new WebViewClient(){

            @Override
            public void onLoadResource(WebView  view, String  url){

            }
            public void onReceivedError(final WebView view, final int errorCode, 
                    final String description, final String failingUrl) {
                  if (errorCode == ERROR_TIMEOUT) {
                       view.stopLoading();  // may not be needed
        Toast.makeText(MainActivity.this,                         getString(R.string.an_error_occured_couldnt_load_page), 
                          Toast.LENGTH_SHORT).show(); 

        //view.loadData(timeoutMessageHtml, "text/html", "utf-8");
                   } 
            }

            @Override
            public void onPageFinished(WebView view, String url) {
                try {
                    pageLoading = (ProgressBar) findViewById(R.id.pageLoading);
                    pageLoading.setVisibility(View.GONE);
                } catch (Exception e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }

            }
        });

        webview.getSettings().setSupportZoom(true);
        //webview.getSettings().setBuiltInZoomControls(true);
        webview.loadUrl("http://m.wired.com");
        return webview;
    }
    } 
```

# c#-4.0 - 从 IEnumerable 中删除对象

> ID：10354978
> 
> 赞同：1
> 
> 时间：2012-04-27T17:10:22.863
> 
> 标签：c#-4.0, ienumerable

我有这个 IEnumerable：

```
var collection = from obj in list
                        select new
                        {
                            Title = (string)obj.Element("title"),
                            otherAtt = (string)obj.Element("otherAtt"),
                            ..
                            ..
                            ..
                            ..
                        }; 
```

我想删除“集合”中具有重复标题的所有对象。并留下最后一个重复的。

例如：

```
collection = {
    {Title="aaa" ,otherAtt="1" ,....},
    {Title="bbb" ,otherAtt="2" ,....},
    {Title="aaa" ,otherAtt="3" ,....},
    {Title="aaa" ,otherAtt="4" ,....},
    {Title="ccc" ,otherAtt="5" ,....},
    {Title="bbb" ,otherAtt="6" ,....}
} 
```

我需要过滤器使集合看起来像这样：

```
collection = {
    {Title="aaa" ,otherAtt="4" ,....},
    {Title="ccc" ,otherAtt="5" ,....},
    {Title="bbb" ,otherAtt="6" ,....}
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T17:19:22.497

您可以使用`Distinct()`扩展方法，但您必须编写一个 IEqualityComparer 以便使用 Title 进行比较。

我认为这非常接近您的需要：[http ://forums.asp.net/post/2276937.aspx](http://forums.asp.net/post/2276937.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T19:19:40.967

以下将起作用：

```
var noDuplicateTitles = collection
   .GroupBy(obj => obj.Title)
   .Select(group => group.Last()) 
```

所有具有相同标题的对象都被分组，我们从每个组中取出最后一个项目。

# c# - c#重载解析规则

> ID：10354982
> 
> 赞同：0
> 
> 时间：2012-04-27T17:10:46.467
> 
> 标签：c#, generics, overload-resolution

假设以下扩展方法：

```
public static string ToFooBarString(this object obj)
{
...
}

public static string ToFooBarString< T >(this IEnumerable< T > obj)
{
...
} 
```

现在我通过 IEnumerable<T> 接口的实现来调用它，比如说

```
Dictionary< int , string > f; // implements IEnumerable< KeyValuePair< int , string > >
f.ToFooBarString(); // <--- which one is called? 
```

在这种情况下调用哪一个，为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T17:14:30.283

编译器选择与所讨论类型“最接近”的重载。因此，它将选择第二个重载。（当编译器无法弄清楚时，它会抱怨它是模棱两可的。）

由于“对象”位于层次结构的顶部，因此将首先使用任何其他适用的重载。

更重要的是，这可以通过测试和阅读大量书籍、在线文章、文档、博客等来发现。稍微搜索一下应该比在此处发布更快。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-27T17:19:18.460

将调用第二种方法。它基于以下类型的转换规则：

阅读C# 语言规范中的[重载解决方案。](http://msdn.microsoft.com/en-us/library/aa691336%28v=vs.71%29.aspx)具体来说，您可以查看[7.4.2.3](http://msdn.microsoft.com/en-us/library/aa691339%28v=vs.71%29.aspx)，其中讨论了如何解决转换冲突。

# html - 在导航栏中保持突出显示的选项卡

> ID：10354983
> 
> 赞同：1
> 
> 时间：2012-04-27T17:10:49.207
> 
> 标签：html, css, navigationbar

谢谢你的时间。我在尝试突出显示我正在使用的导航栏上的“活动”选项卡时遇到了很多麻烦。我正在尝试通过 CSS 执行此操作，但是当我更改页面时会出现问题。我将添加以下代码：
`function updateMenu(num)
{`

 `> var menuCode =
> 
> > '`<ul id="menu">`' +
> > '`<li><a href="software/menu.php" onclick="updateMenu(1);"';`
> > `if(num == 1){menuCode +=' class="current"';}`
> > `menuCode += '>Software</a></li>'`+
> > '`<li><a href="users/menu.php" onclick="updateMenu(2);"';`
> > `if(num == 2){menuCode +=' class="current"';}`
> > `menuCode += '>Software</a></li>';`` 

`document.getElementById("cssMenu").innerHTML = menuCode;
}`

我的清单如下：

 `> ``<ul id="menu">`` 
> 
> > ``<li><a href="software/menu.php" onclick="updateMenu(1);">Software</a></li>` `<li><a href="user/menu.php" onclick="updateMenu(2);">Users</a></li>` `</ul>``

我觉得这是一个不优雅的解决方案，因为所有代码都写在 updateMenu 函数中，我想知道是否有更优雅的解决方案来解决我的问题。（您可以看到它正在移动“class=current”，以便 CSS 正常工作）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T17:17:15.960

I'm not sure what your exact requirement is. Assuming that on clicking the tab, it does NOT go to another page, the following code will help [please use [Jquery]](http://code.jquery.com/jquery-1.7.1.min.js):

HTML :

```
<ul id="menu">
  <li>item 1</li>
  <li>item 2</li>
  <li>item 3</li>
</ul> 
```

Javascript :

```
<script>
 $(document).ready(function(){
  $("#menu li").click(function(){
    $("#menu li").removeClass("highlight");
    $(this).addClass("highlight");
 });
});
</script> 
```

CSS :

```
.highlight {
 background: #f00;
} 
````

# c# - C# Vlc.DotNet 库 - 空引用异常

> ID：10354985
> 
> 赞同：4
> 
> 时间：2012-04-27T17:11:00.663
> 
> 标签：c#, vlc

最近在尝试决定让 VLC 播放器进入 C# 的最佳方法时偶然发现了这篇文章。

[VLC 媒体播放器有 C# 接口吗？](https://stackoverflow.com/questions/7382793/does-vlc-media-player-have-a-c-sharp-interface)

我下载了 dll 文件并将它们导入到我的项目中，但后来意识到我并不真正知道如何使用它们。有没有人有这个有效的代码的 Windows 窗体示例？尝试过的代码如下所示 -

```
Vlc.DotNet.Core.Medias.MediaBase media = new
    Vlc.DotNet.Core.Medias.PathMedia(@"C:\Users\...\SampleVideos\Wildlife.wmv");

Vlc.DotNet.Forms.VlcControl vlcControl1 = new Vlc.DotNet.Forms.VlcControl();
vlcControl1.Play(media); 
```

我还在项目的主 program.cs 中使用此链接中的代码。

[http://vlcdotnet.codeplex.com/wikipage?title=Forms](http://vlcdotnet.codeplex.com/wikipage?title=Forms)

我遇到的当前问题是，在启动项目时，它会在到达 -> 时抛出 NullReferenceException

```
vlcControl1.Play(media) 
```

问题似乎出在 vlcControl 上，但我不确定为什么。文档似乎很薄，我在 codeplex 站点上找不到任何工作示例。如果有人有工作表格示例或知道我可能错过了什么，请告诉我！

这是发生错误时出现的调用堆栈->

```
RTSPViewer_Test.exe!RTSPViewer_Test.Form1.Form1_Load(object sender, 
    System.EventArgs e) Line 31 + 0xd bytes C#
RTSPViewer_Test.exe!RTSPViewer_Test.Program.Main() Line 30 + 0x1d bytes C# 
```

调试时，VLC 控件的 Media 和 Medias 属性似乎都是空的。当试图将控件的媒体设置为上面创建的媒体对象时

```
NullReferenceException 
```

检查 VLC 控制对象 Media 确实等于 null，但我不确定为什么它没有正确初始化。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T15:07:29.803

我无法使用最新版本的 Vlc.dotnet 库使程序运行，而是使用了 Raj 发布的 alpha 2 版本。我使用 VLC 版本 1.1.5 和这个库来让基本示例正常运行。我的最终目标是从 rtsp 设备流式传输，但是这个库似乎还不支持这个功能。

对于任何希望使用良好的 C# 包装器来使用 VLC 的人来说，这是一个很好的例子 -

[http://www.codeproject.com/Articles/109639/nVLC](http://www.codeproject.com/Articles/109639/nVLC)

在这个项目中使用了 VLC 1.1.1 中的库文件并且工作正常。几乎支持您通常在 VLC 中使用的所有功能，但让您可以更好地控制使用它们的目的。

使用这些 DLL 包装器时出现的许多问题都是由源 DLL 文件的不正确版本引起的。VLC 库目前只有 32 位，因此您需要确保使用 x86 模式进行编译，否则 libvlc.dll 将无法正确加载并导致应用程序崩溃。使用上面的示例，您还必须确保 libvlc.dll、libvlccore.dll 和 plugins 文件夹包含在 build 文件夹中。

# regex - 用于匹配非虚拟 C++ 方法声明的正则表达式模式

> ID：10354986
> 
> 赞同：1
> 
> 时间：2012-04-27T17:11:10.303
> 
> 标签：regex

我试图找到一个正则表达式来匹配 C++ 头文件中非虚拟的方法声明。我在大多数情况下都可以使用它，但是如果在 virtual 之后有换行并且方法声明在下一行，我的正则表达式将匹配它，这不是我想要的。因此，我需要正则表达式引擎回溯到上一行并检查 virtual 关键字。这是一个基本示例：

源文件片段：

```
void Process(char* name, int val); // Should match, this one works
virtual char* GetName(); // Should not match since it is virtual, this one works
virtual
        flag_type SetValue(uint8 resourceIndex, char* name); // Should not match, but this line matches since virtual is on previous line! 
```

这是我的正则表达式： `(^\s*\w+\**(?<!virtual)\s+\w+\s*\()(\s*\w+\**\s+\**\w+,?)*\s*\)\s*;`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T21:46:50.790

我发现了一些对我有用的东西，包括 Emanuele 指出的缺陷（尽管它也会在注释行中匹配）：`\b(?<!virtual\s+)\w+\**\s+\w+\s*\((\s*\w+\**\s+\**\w+,?)*\s*\)\s*;`

# php - 如何从本地主机发送电子邮件到（gmail、yahoo 等）

> ID：10354989
> 
> 赞同：0
> 
> 时间：2012-04-27T17:11:31.297
> 
> 标签：php

我在 Windows 环境（WAMP）上想要检查我的一个内置 php 的应用程序，它在 localhost 上发送邮件。请帮助我如何从 localhost 发送电子邮件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T17:21:09.263

我已经在我的本地机器上运行了这样的系统。如果我的服务器曾经在线，你可以在[这里查看](http://enkrypt.dyndns-web.com/SMTP%20sendmail/)

我按照[本指南](http://www.projectpier.org/node/817)帮助我完成。确保你在那里做所有事情，除了使用 projectpier ，你不需要它。您将使用 PHP 发送邮件。

示例 PHP 代码：

```
$header = "From: ".$from_name." <".$from_mail.">\r\n";
$header .= "Reply-To: ".$replyto."\r\n";
    if (mail($mailto, $subject, $message, $header)) {
        echo "Mail successfully sent with given data"; // or use booleans here
    } else {
        echo "Mail sending failed! Please make sure all data is correct and you are connected to the internet";
    } 
```

确保正确设置所有变量

# sql - 搜索数据库中的所有表并返回一个值？

> ID：10354990
> 
> 赞同：1
> 
> 时间：2012-04-27T17:11:38.753
> 
> 标签：sql

我正在使用 SQL Server 2008 并使用以下示例[HERE](http://blogs.lessthandot.com/index.php/DataMgmt/DataDesign/the-ten-most-asked-sql-server-questions--1#2)。

以下是我到目前为止的代码。（唯一的区别是将其转换为来自存储过程的查询并删除了不必要的模式名称。）

我想做的是在结果中添加另一列并给出第一列的数据值。换句话说，如果每个表都以主键开始，我的结果将包括找到数据的行的主键。这甚至可能吗？谢谢。

```
DECLARE @DataToFind nvarchar(MAX) = ''
DECLARE @ExactMatch BIT = 0

DECLARE @Temp TABLE(RowId INT IDENTITY(1,1), SchemaName sysname, TableName sysname, ColumnName SysName, DataType VARCHAR(100), DataFound BIT)

    INSERT  INTO @Temp(TableName,SchemaName, ColumnName, DataType)
    SELECT  C.Table_Name,C.TABLE_SCHEMA, C.Column_Name, C.Data_Type
    FROM    Information_Schema.Columns AS C
            INNER Join Information_Schema.Tables AS T
                ON C.Table_Name = T.Table_Name
        AND C.TABLE_SCHEMA = T.TABLE_SCHEMA
    WHERE   Table_Type = 'Base Table'
            And Data_Type In ('ntext','text','nvarchar','nchar','varchar','char')

DECLARE @i INT
DECLARE @MAX INT
DECLARE @TableName sysname
DECLARE @ColumnName sysname
DECLARE @SchemaName sysname
DECLARE @SQL NVARCHAR(4000)
DECLARE @PARAMETERS NVARCHAR(4000)
DECLARE @DataExists BIT
DECLARE @SQLTemplate NVARCHAR(4000)

SELECT  @SQLTemplate = CASE WHEN @ExactMatch = 1
                            THEN 'If Exists(Select *
                                          From   ReplaceTableName
                                          Where  Convert(nVarChar(4000), [ReplaceColumnName])
                                                       = ''' + @DataToFind + '''
                                          )
                                     Set @DataExists = 1
                                 Else
                                     Set @DataExists = 0'
                            ELSE 'If Exists(Select *
                                          From   ReplaceTableName
                                          Where  Convert(nVarChar(4000), [ReplaceColumnName])
                                                       Like ''%' + @DataToFind + '%''
                                          )
                                     Set @DataExists = 1
                                 Else
                                     Set @DataExists = 0'
                            END,
        @PARAMETERS = '@DataExists Bit OUTPUT',
        @i = 1

SELECT @i = 1, @MAX = MAX(RowId)
FROM   @Temp

WHILE @i <= @MAX
    BEGIN
        SELECT  @SQL = REPLACE(REPLACE(@SQLTemplate, 'ReplaceTableName', QUOTENAME(SchemaName) + '.' + QUOTENAME(TableName)), 'ReplaceColumnName', ColumnName)
        FROM    @Temp
        WHERE   RowId = @i

        PRINT @SQL
        EXEC SP_EXECUTESQL @SQL, @PARAMETERS, @DataExists = @DataExists OUTPUT

        IF @DataExists =1
            UPDATE @Temp SET DataFound = 1 WHERE RowId = @i

        SET @i = @i + 1
    END

SELECT  TableName, ColumnName
FROM    @Temp
WHERE   DataFound = 1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T17:25:13.403

返回主键是绝对可能的。您将需要：

*   确定每个表中主键列或列的名称。如果你能坚持一个专栏，它会让你的生活更轻松。
*   为主键值的内容添加一个变量，比如`@PrimaryKeyValue`
*   修改`@SQLTemplate`以将此列的值返回到 中`@PrimaryKeyValue`，如下所示：

    ```
    SELECT @SQLTemplate = CASE WHEN @ExactMatch = 1
                               THEN 'select @PrimaryKeyValue = min(' + @PrimaryKeyColumnName + ')
                                        from ReplaceTableName
                                       where Convert(nVarChar(4000), [ReplaceColumnName]) = ''' + @DataToFind + ''')'
                               ELSE 'select @PrimaryKeyValue = min(' + @PrimaryKeyColumnName + ')
                                        from ReplaceTableName
                                       where  Convert(nVarChar(4000), [ReplaceColumnName]) Like ''%' + @DataToFind + '%'')'
                          END,
           @PARAMETERS = '@PrimaryKeyValue nvarchar(4000) OUTPUT',
           @i = 1 
    ```

# tastypie - 我可以将一个美味的模型资源字段设为只读吗？

> ID：10354991
> 
> 赞同：10
> 
> 时间：2012-04-27T17:11:39.307
> 
> 标签：tastypie

我有一个 Tastypie ModelResource，它从常规 Django 模型中获取其字段。我想让 Tastypie 资源上的某些字段只读，即使它们在底层模型中是可写的。这有可能以简单的方式完成吗？

我尝试了以下方法无济于事：

```
def __init__(self, **kwargs):
    super(ModelResource, self).__init__(**kwargs)
    for f in getattr(self.Meta, 'read_onlys', []):
        self.fields[f].read_only = True 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T03:53:23.500

通常我会在水合物/脱水过程中做那种事情。

应该还有其他方法

```
def hydrate(self, bundle):
    if bundle.obj.pk:
        bundle.data['somefield'] = bundle.obj.somefield
    else:
        bundle.data.pop('somefield', None)  # no KeyError if 'somefield' missing

    return super(MyResource, self).hydrate(bundle) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-20T15:41:17.127

问题是[BaseModelForm 在进行验证时会覆盖 self.instance](https://github.com/django/django/blob/1.6.1/django/forms/models.py#L396)。

无论是否设置了 Tastypie 字段，都会发生这种情况`readonly`（仅影响 Tastypie 自己的`hydrate`，仅此而已）。

所以我最终写了这个：[https ://gist.github.com/thnee/8522224](https://gist.github.com/thnee/8522224)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-17T10:41:38.953

不确定您是否需要这个，但这里是与[只读](http://django-tastypie.readthedocs.org/en/latest/fields.html#readonly)字段相关的官方文档的链接。

**例子：**

```
class ResourceA(ModelResource):
    read_only_field = fields.DateTimeField('attribute', readonly=True) 
```

希望这可以帮助某人。

谢谢

# python - 克隆和深拷贝的区别？

> ID：10354992
> 
> 赞同：1
> 
> 时间：2012-04-27T17:11:41.623
> 
> 标签：python, cloning, deep-copy

我刚刚开始编程，并且正在研究 Python 的“如何像计算机科学家一样思考”。在第 9 章进行练习之前，我没有遇到任何问题：

```
def add_column(matrix):

    """
    >>> m = [[0, 0], [0, 0]]
    >>> add_column(m)
    [[0, 0, 0], [0, 0, 0]]
    >>> n = [[3, 2], [5, 1], [4, 7]]
    >>> add_column(n)
    [[3, 2, 0], [5, 1, 0], [4, 7, 0]]
    >>> n
    [[3, 2], [5, 1], [4, 7]]
    """ 
```

代码应该使上述 doctest 通过。我被困在最后一个测试中：让原始列表不受影响。我查找了解决方案，如下所示：

```
x = len(matrix)

matrix2 = [d[:] for d in matrix]
for z in range(x):
    matrix2[z] += [0]
return matrix2 
```

我的问题是：为什么第二行不能是：

```
matrix2 = matrix[:] 
```

当此行到位时，原始列表将被编辑以包含添加元素。“如何成为..”指南听起来像是克隆创建了一个可以在不影响原始列表的情况下进行编辑的新列表。如果这是真的，这里发生了什么？如果我使用：

```
matrix2 = copy.deepcopy(matrix) 
```

一切正常，但我并不认为克隆会失败......任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T17:19:10.403

In your case, `matrix` contains other lists, so when you do `matrix[:]`, you are cloning `matrix`, which contains references to other lists. Those are not cloned too. So, when you edit these, they are still the same in the original `matrix` list. However, if you append an item to the copy (`matrix[:]`), it will not be appended to the original list.

To visualize this, you can use the `id` function which returns a unique number for each object: see [the docs](http://docs.python.org/library/functions.html#id).

```
a = [[1,2], [3,4], 5]
print 'id(a)', id(a)
print '>>', [id(i) for i in a]

not_deep = a[:]
# Notice that the ids of a and not_deep are different, so it's not the same list
print 'id(not_deep)', id(not_deep)
# but the lists inside of it have the same id, because they were not cloned!
print '>>', [id(i) for i in not_deep]

# Just to prove that a and not_deep are two different lists
not_deep.append([6, 7])
print 'a items:', len(a), 'not_deep items:', len(not_deep)

import copy
deep = copy.deepcopy(a)
# Again, a different list
print 'id(deep)', id(deep)
# And this time also all the nested list (and all mutable objects too, not shown here)
# Notice the different ids
print '>>', [id(i) for i in deep] 
```

And the output:

```
id(a) 36169160
>> [36168904L, 35564872L, 31578344L]
id(not_deep) 35651784
>> [36168904L, 35564872L, 31578344L]
a items: 3 not_deep items: 4
id(deep) 36169864
>> [36168776L, 36209544L, 31578344L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T17:17:29.983

Say you have nested lists, copying will only copy the references to those nested lists.

```
>>> a = [1]
>>> b = [2]
>>> c = [a, b]
>>> c
[[1], [2]]
>>> d = c[:]
>>> d
[[1], [2]]
>>> d[1].append(2)
>>> d
[[1], [2, 2]]
>>> c
[[1], [2, 2]] 
```

As where, with `copy.deepcopy()`:

```
>>> d = copy.deepcopy(c)
>>> d[1].append(2)
>>> c
[[1], [2]]
>>> d
[[1], [2, 2]] 
```

This is true of any mutable items. `copy.deepcopy()` will attempt to make sure that they are copied too.

It's also worth noting that using `d = c[:]` to copy a list isn't a very clear syntax anyway. A much better solution is `d = list(c)` (`list()` returns a new list from any iterable, including another list). Even more clear, obviously, is [`copy.copy()`](http://docs.python.org/library/copy.html#copy.copy).

# java - 找不到适合 jdbc:mysql://localhost:3306/test 的驱动程序

> ID：10354997
> 
> 赞同：0
> 
> 时间：2012-04-27T17:11:52.920
> 
> 标签：java, hibernate, tomcat, jpa

当我尝试在 Tomcat 7 上运行我的 JSF 应用程序时，它会引发此异常。

```
Caused by: java.sql.SQLException: No suitable driver found for jdbc:mysql://localhost:3306/test
at java.sql.DriverManager.getConnection(Unknown Source)
at java.sql.DriverManager.getConnection(Unknown Source)
at org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl.getConnection(DriverManagerConnectionProviderImpl.java:192)
at org.hibernate.internal.AbstractSessionImpl$NonContextualJdbcConnectionAccess.obtainConnection(AbstractSessionImpl.java:278)
at org.hibernate.engine.jdbc.internal.LogicalConnectionImpl.obtainConnection(LogicalConnectionImpl.java:297)
... 51 more 
```

如果我在创建 EntityManagerFactory 之前添加此行，它工作正常。

```
Class.forName("com.mysql.jdbc.Driver");
emf = Persistence.createEntityManagerFactory("manager1"); 
```

我的依赖是

```
<dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-entitymanager</artifactId>
        <version>4.1.2.Final</version>
    </dependency>

    <dependency>
        <groupId>mysql</groupId>
        <artifactId>mysql-connector-java</artifactId>
        <version>5.1.19</version>
    </dependency> 
```

我的应用程序也可以正常运行 tomcat 6，无需添加`Class.forName("com.mysql.jdbc.Driver");`

有什么想法可以解决这个问题吗？谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-29T08:56:37.640

第一个也是真正的解决方案：尝试使用 Hibernate 4.1.0 和 4.1.3.Final。

在最终偶然发现[https://forum.hibernate.org/viewtopic.php?p=2454336](https://forum.hibernate.org/viewtopic.php?p=2454336)之前，我在 Hibernate 4.1.2 上遇到了这个问题。据我所知，Tomcat 的更高版本（针对 DeviceManager 的泄漏性质的修复）和 Hibernate 4.1.2 之间有点不兼容。

其他解决方法是显式调用驱动程序的注册，如 Brad Whitaker 的回答，或者通过添加到 $CATALINA_HOME/conf/server.xml 中的侦听器定义来确保 JreMemoryLeakPreventionListener 没有保护 DriverManager `driverManagerProtection="false"`- 即：

```
<Listener className="org.apache.catalina.core.JreMemoryLeakPreventionListener" driverManagerProtection="false"> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-03T23:27:46.750

当我将工作的 .war 从 Tomcat 5.5 和 Java 6 迁移到 Tomcat 7 和 Java 7 时，我遇到了同样的问题。我以前工作的 .war 开始抛出“java.sql.SQLException：找不到适合 jdbc:sqlserver 的驱动程序... ”。我只需添加即可解决

```
Class.forName("com.microsoft.sqlserver.jdbc.SQLServerDriver"); 
```

在调用之前

```
java.sql.DriverManager.getConnection("myUrl"); 
```

我知道文档说 jdbc4 驱动程序不需要这个额外的调用，但这解决了我的问题。驱动程序 jar (sqljdbc4.jar) 位于我的 .war 的 WEB-INF/lib 中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T17:17:28.693

问题是您的应用程序在运行时没有可用的驱动程序类，请将驱动程序 jar 放入`/WEB-INF/lib`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-27T17:18:46.870

在某些服务器（jboss、glassfish）上，我还必须将驱动程序 jar 放入服务器默认库文件夹中。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-28T01:09:18.500

我有类似的问题。通过将hibernate升级到4.1.4final来解决。