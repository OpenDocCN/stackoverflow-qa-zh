# StackOverflow 问答 11994000-11994999

# php - PHP：如果其他条件分配给变量并调用字符串

> ID：11994000
> 
> 赞同：3
> 
> 时间：2012-08-16T19:18:18.140
> 
> 标签：php, variables, conditional

这可能是一个简单而愚蠢的问题，但首先我正在学习 php，因此我们将不胜感激。

我正在尝试使用分配的条件语句来获取变量。

```
$gender = $curauth->gender; // getting from wordpress user profile.

if($gender === 'Male') {
    echo 'his';
} else {
    echo 'her';
} 
```

所以我想做的是它会检查用户是否是男性，而不是在某些描述中它将使用他的，如果是女性，它将使用她。像下面的东西

```
echo 'jatin soni doesn't have set this option yet. His option will be deactivated soon.'; 
```

所以在这里**他**将被设置为上面的条件代码。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T19:26:17.933

你可以`echo`直接说出来：

```
echo 'jatin soni doesn\'t have set this option yet. ', 
     ($gender === 'Male' ? 'His' : 'Her'), 
     ' option will be deactivated soon.'; 
```

如果您需要不止一次或出于可读性原因，您应该将其分配给一个变量：

```
# Default Female:
$gender = empty($curauth->gender) ? 'Female' : $curauth->gender;

$hisHer = $gender === 'Male' ? 'His' : 'Her';
echo 'jatin soni doesn\'t have set this option yet. ', 
     $hisHer, 
     ' option will be deactivated soon.'; 
```

下一步可能是[双引号字符串^(*Docs*)](http://ca.php.net/manual/en/language.types.string.php#language.types.string.syntax.double)中的变量替换或使用[`printf`^(*Docs*)](http://de.php.net/printf)函数进行格式化输出。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-16T19:27:37.690

这个怎么样？

```
<?php
$pronoun = $curauth->gender == 'Male' ? 'his' : 'her';
echo "Jatin Soni doesn't have set this option yet. " .
     ucfirst($pronoun) . " option will be deactivated.\n"
?> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-16T19:25:55.887

执行此类操作的最常见方法是将动态部分分配给变量，然后在输出中使用该变量：

```
$gender = $curauth->gender; // getting from wordpress user profile.

if ($gender === 'Male') {
    $hisHer = 'His';
} else {
    $hisHer = 'Her';
}

echo "jatin soni doesn't have set this option yet. $hisHer option will be deactivated soon."; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-16T19:30:26.297

如果你想要一个*变量*，你可以在一行中完成：

```
$gender = $curauth->gender; // getting from wordpress user profile.
$their = $gender == 'Male' ? $gender = 'His' : $gender = 'Her';
echo "$username doesn't have set this option yet. $their option will be deactivated soon."; 
```

# android - Parcelable 是否值得实施以在活动之间传递数据？

> ID：11994001
> 
> 赞同：5
> 
> 时间：2012-08-16T19:18:22.807
> 
> 标签：android, performance, serialization, parcelable

我想提高我的应用程序的性能。我想到的一件事是用 parcelable 替换所有可序列化的意图包参数。

我找到了这个线程：[Benefit of using Parcelable instead of serializing object](https://stackoverflow.com/questions/5550670/benefit-of-using-parcelable-instead-of-serializing-object)

有人从书中说，parcelable 仅用于进程间通信？那可能已经不是最新的了，对吧？因为它至少在技术上是可能的。

还有一种说法是 parcelable 不可靠，因为实现在不同设备上有所不同，这当然是一个致命的特性，因为我希望它始终工作，所有设备和 api，从 API 7 开始。

而且我还阅读了一些关于使用 Externalizable 或实现自定义协议的建议......但我不明白，为什么 Parcelable 不可靠，为什么 Android 开发人员会围绕一些不适用于所有设备的东西做这样的嗡嗡声？还是评论不正确？

是否值得实施 Parcelable？我坚持使用可序列化吗？还是自定义序列化/可外部化是正确的方法？

请不要告诉我“只是尝试”，我没有时间，专门检查 Parcelable 是否可靠（也没有足够的设备）...询问经验...

谢谢。

PS 也不要说我“Serializable 在大多数情况下都是可以接受的”我知道，这确实是可以接受的，但我有时间并且想将它与 Parcelable（或其他东西）一起使用，如果这可以改善用户体验。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-16T19:41:57.277

`Parcelable`始终在所有设备上始终有效。如果没有，**什么**都行不通。Android 内部非常依赖`Parcelable`.

`Parcelable`将比它更有效，`Serializable`但我严重怀疑它会对您的“用户体验”产生很大影响（当然，除非您在整个地方使用它并序列化非常大和复杂的对象）。

如果您认为自己遇到了性能问题，那么我会花费我的空闲时间来分析应用程序并收集有关它花费时间的经验数据。恕我直言，替换`Serializable`为`Parcelable`是一种相对较低级别的实现优化，可能会给您带来接近于零的可感知性能改进。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-16T19:48:29.377

> 有人从书中说，parcelable 仅用于进程间通信？那可能已经不是最新的了，对吧？因为它至少在技术上是可能的。

如果 Parcelable 不打算在活动之间传递，为什么[putExtra (String name, Parcelable value)](http://developer.android.com/reference/android/content/Intent.html#putExtra%28java.lang.String,%20android.os.Parcelable%29) Intent 方法从 API 级别 1 开始存在？

> 还有一种说法是 parcelable 不可靠，因为实现在不同设备上有所不同，这当然是一个致命的特性，因为我希望它始终工作，所有设备和 api，从 API 7 开始。

让我引用[包裹](http://developer.android.com/reference/android/os/Parcel.html)文档：

> Parcel 不是通用的序列化机制。此类（以及用于将任意对象放入 Parcel 的相应 Parcelable API）被设计为*高性能 IPC 传输*。**因此，将任何 Parcel 数据放入持久存储**是不合适的：Parcel 中任何数据的底层实现的更改都可能导致旧数据不可读。

在这里，我只能阅读关于不将 Parcel 数据存储到持久存储中的建议。根据我的个人经验，Parcelable 从来都不是在活动之间传递数据的问题。我大量使用它并支持 API 8 到当前的 API。

关于性能和速度，已经确定使用 Parcelable 更好，因为它是 Android 特定*的高性能 IPC 传输*序列化机制。不过，为了真正看到改进，它应该取决于你使用它的程度。

# ruby-on-rails - 试用 Railscasts 源代码时使用哪个版本

> ID：11994002
> 
> 赞同：1
> 
> 时间：2012-08-16T19:18:35.147
> 
> 标签：ruby-on-rails, railscasts

我正在尝试让 railscasts 工作，但显然去年情况发生了很大变化......那么你现在怎么能反对 railscast 是用哪个版本的 ruby​​ 完成的呢？gemfile 包含所有版本的 gems，但不包含要使用的 ruby​​ 版本。不，它并不是那么向后兼容......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T17:50:50.157

Ruby v1.9.2 用于 ASCIIcast。Ryan Bates 很可能也在他的 Railscast 中使用了 Ruby v1.9.x。

```
/Users/eifion/.rvm/rubies/ruby-1.9.2-p0/bin/ruby 
```

可以在任何终端输出中的[http://railscasts.com/episodes/257-request-specs-and-capybara?view=asciicast的 ASCIIcast 中看到。](http://railscasts.com/episodes/257-request-specs-and-capybara?view=asciicast)

Rails 演员表中没有任何内容表明它对我来说不适用于 1.8.7。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T22:11:44.073

通过查看轨道铸件中使用的编码更容易分辨。如果它告诉您资产管道，那么它的 Rails 3.1+。如果它不使用管道但调用 rails s 那么它的 3.0\. 如果它使用脚本/服务器，那么它的 2\. *.* 版本

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T21:07:34.320

Rails 3.0+ 最适合 ruby​​ 1.9。因此，最好使用 1.9.3。

# django - Heroku 上带有 gunicorn 服务器的 Django 项目不提供静态文件

> ID：11994004
> 
> 赞同：10
> 
> 时间：2012-08-16T19:18:50.700
> 
> 标签：django, heroku, gunicorn, static-files

我的 Django 1.3 项目在开发服务器上提供静态文件，但不提供 gunicorn 服务器静态文件。我按照[这个 Heroku 指南](https://devcenter.heroku.com/articles/django#using-a-different-wsgi-server)的步骤进行操作。

当我像在指南（）中那样使用我的 procfile 的内容时 `web: gunicorn myproject_django.wsgi -b 0.0.0.0:$PORT`，Heroku 无法识别我的项目。

然后我将该 Procfile 更改为：

```
web: python myproject_django/manage.py run_gunicorn -b 0.0.0.0:$PORT -w 3 
```

现在我的应用程序运行除了静态文件（css 不活动也不图像）。

**我的项目树：**

```
.
├── Procfile
├── myproject_django
│   ├── core
│   │   ├── admin.py
│   │   ├── __init__.py
│   │   ├── models.py
│   │   ├── static
│   │   │   ├── css
│   │   │   │   ├── base.css
│   │   │   │   ├── layout.css
│   │   │   │   
│   │   │   └── media
│   │   │       ├── pek.ico
│   │   │       ├── pek.png
│   │   │       ├── pek_symbol.png
│   │   ├── tests.py
│   │   └── views.py
│   ├── __init__.py
│   ├── manage.py
│   ├── settings.py
│   ├── templates
│   │   └── core
│   │       ├── home.html
│   │       └── install.html
│   └── urls.py
└── requirements.txt 
```

**settings.py 的潜在相关部分**

```
MEDIA_ROOT = ''

MEDIA_URL = '/static/media'

STATIC_ROOT = ''

STATIC_URL = '/static/'

ADMIN_MEDIA_PREFIX = '/static/admin/'

STATICFILES_DIRS = (
    os.path.abspath(__file__)+'/..'+'/myproject_django/core/static', 
)

STATICFILES_FINDERS = (
    'django.contrib.staticfiles.finders.FileSystemFinder',
    'django.contrib.staticfiles.finders.AppDirectoriesFinder',
#    'django.contrib.staticfiles.finders.DefaultStorageFinder',
)

INSTALLED_APPS = (
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.sites',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    'core',
    'gunicorn',
    'django.contrib.admin',
) 
```

## 编辑

在 Francis Yaconiello 进入后，我调整了以下内容：

**在 settings.py**

```
STATIC_ROOT = os.path.join(os.getcwd(),'core/static')
STATICFILES_DIRS = ( os.path.abspath(__file__)+'/..'+'/core/static', ) 
```

**在 gitignore 中：**

```
staticfiles/* 
```

然后就答应了。最后跑了`heroku run python myproject_django/manage.py collectstatic`。

但是当我检查网页时仍然没有提供静态文件。鉴于我的目录树，为什么这些更改不起作用？

## 编辑2

我仍然看不到我的静态文件。当我点击图像时，`DEBUG=True`我得到这个：

```
Request URL: http://myproject.herokuapp.com/static/media/pek.png 
```

**树**（注意`staticfiles`目录是空的）

```
.
├── Procfile
├── myproject_django
│   ├── admin
│   ├── core
│   │   ├── admin.py
│   │   ├── __init__.py
│   │   ├── models.py
│   │   ├── static
│   │   │   ├── css
│   │   │   │   ├── base.css
│   │   │   │   ├── layout.css
│   │   │   └── media
|   |   |       ├── pek.ico
|   │   │       ├── pek.png
|   │   │       ├── pek_symbol.png
│   │   ├── tests.py
│   │   ├── views.py
│   ├── __init__.py
│   ├── manage.py
│   ├── settings.py
│   ├── staticfiles
│   ├── templates
│   │   └── core
│   │       ├── 404.html
│   │       ├── 500.html
│   │       ├── home.html
│   │       └── install.html
│   ├── urls.py
└── requirements.txt 
```

**在 settings.py**

```
PROJECT_PATH = os.path.dirname(os.path.abspath(__file__))
MEDIA_ROOT = os.path.join(PROJECT_PATH, 'static/media')
STATIC_ROOT = os.path.join(PROJECT_PATH,'staticfiles')
STATICFILES_DIRS = (
    os.path.join(PROJECT_PATH, 'core/static'),
) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T19:34:08.390

指定您的`STATIC_ROOT`

我通常将其设置为：

```
import os
STATIC_ROOT = os.path.join(os.getcwd(), "staticfiles") 
```

在您的项目中创建该目录

```
mkdir staticfiles 
```

确保静态文件的内容没有被 git 跟踪

```
nano .gitignore 
```

添加

```
staticfiles/* 
```

然后提交并推送到heroku。

最后，

```
heroku run python manage.py collectstatic 
```

# 编辑

```
STATIC_ROOT = os.path.join(os.getcwd(),'core/static')
STATICFILES_DIRS = ( os.path.abspath(__file__)+'/..'+'/core/static', ) 
```

这两个设置不能是一回事。

`STATICFILES_DIR`没关系，如果多余的话，你`STATICFILES_FINDERS`已经告诉它在`static`每个应用程序的目录中查找静态文件：`'django.contrib.staticfiles.finders.AppDirectoriesFinder',`

关键`STATIC_ROOT`是提供一个与您的项目完全分离的新目录，您可以使用第三方服务器（如 nginx）提供服务。这就是您创建该目录的原因`staticfiles`：

```
STATIC_ROOT = os.path.join(os.getcwd(),'staticfiles') 
```

# 另一个编辑

临时文件系统的解决方法

> 每个 dyno 都有自己的临时文件系统，以及最近部署的代码的新副本。在 dyno 的生命周期中，它的运行进程可以将文件系统用作临时暂存器，但是任何其他 dyno 中的进程都看不到写入的文件，并且在停止或重新启动 dyno 时，写入的任何文件都将被丢弃。

这意味着只要您在 Web 启动期间在每个 dyno 实例上收集静态数据，就不会出现任何问题。

```
web: python myproject_django/manage.py collectstatic --noinput; python myproject_django/manage.py run_gunicorn -b 0.0.0.0:$PORT -w 3 
```

也就是说，我目前使用 S3 和 django 存储[http://django-storages.readthedocs.org/en/latest/index.html](http://django-storages.readthedocs.org/en/latest/index.html)。实现这一点相当容易（而且便宜）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-21T15:05:05.253

有一种解决方案。

在 urls.py 中添加：

```
from django.conf import settings

urlpatterns += patterns('',
    (r'^static/(?P<path>.*)$', 'django.views.static.serve', {'document_root': settings.STATIC_ROOT}),
) 
```

ps对于`STATIC_URL = '/static/'`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-07T21:44:39.527

我遇到了同样的问题；看来您特别需要这三个设置：

1.  `STATIC_ROOT`必须在您的 中定义`settings.py`，例如：

    ```
    STATIC_ROOT = os.path.join(PROJECT_PATH, 'served/static/') 
    ```

    您的项目根目录在哪里`PROJECT_PATH`（在您的情况下，是`myproject_django`目录的绝对路径。

2.  同样，`STATIC_URL`也必须设置（如果你不这样做，Django 无论如何都会抛出一个 ImproperlyConfigured 错误）。您当前的设置`'/static/'`很好。

3.  在您的 root`urls.py`中，配置静态 url：

    ```
    from django.conf import settings
    from django.conf.urls.static import static  

    ...

    urlpatterns += static(settings.STATIC_URL, document_root=settings.STATIC_ROOT) 
    ```

最后，运行`python manage.py collectstatic`；这会将所有文件从 复制`/path/to/site-packages/django/contrib/admin/static/admin/`到`/served/static/`. [（您可以在此处](https://docs.djangoproject.com/en/dev/howto/static-files/)阅读有关 Django 如何提供静态文件的更多信息）。

现在，当您运行时`foreman start`，您应该会看到带有样式的管理员。

不要忘记添加`served/static/`到您的`.gitignore`!

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-18T12:31:06.430

使用作为[heroku-django-cookbook](https://github.com/nigma/heroku-django-cookbook)提供的`run_collectstatic`一部分运行的脚本。它利用Heroku python buildpack 提供的钩子`post_compile``post_compile`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-01-23T06:48:54.043

我在[这里](http://www.realpython.com/blog/python/migrating-your-django-project-to-heroku/)找到了解决 Heroku 上 Django 的所有问题的好方法

# iphone - ios应用密码登录

> ID：11994005
> 
> 赞同：1
> 
> 时间：2012-08-16T19:18:55.630
> 
> 标签：iphone, ios, ipad, password-protection

我目前正在为一家竞争非常激烈的公司开发应用程序。我已经完成了他们要求的应用程序的所有功能，除了一个，以某种方式保护它不被他们的竞争公司下载和使用。我以为我可以设置一个带有密码字段的 UIViewController 来检查某种数据库，但我不确定如何检查数据库部分或它的实用性，希望我能得到一些关于如何做到这一点的想法，以便其他公司无法在没有密码或每 30 天更改一次或类似激活码的情况下窃取和使用此应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T19:23:56.433

查看 WWDC 2012 视频“为 iOS 构建和分发自定义 B2B 应用程序”。我不确定您的应用是否属于此 B2B 分类，似乎它可能来自您的描述。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-30T20:36:22.613

我最终做的（如果每个人都需要参考的话）是设置一个带有 SQL 表的服务器，其中包含密码。由于苹果不允许任何类型的系统要求您“从应用商店外部购买应用程序”，我制作了一个愚蠢的用户名字段（我感到羞耻），它采用您喜欢的任何值，然后需要有一个密码适合。一旦密码在 json sql 请求中通过 Web 服务器进行了身份验证（有很多 api 可以做到这一点），它就会返回并将用户发送到第一个屏幕并在 plist 中设置一个使用天数的值用户离开了。每当用户打开应用程序时，它会检查日期是否与上次登录的日期不同（保存在同一个 plist 文件中），如果不同，则计算差异并扣除那么多。当计数达到 0 时，它会再次将用户发送到密码验证屏幕。有点复杂，但一种有效的方法可以绕过 Apple 对没有这样的密码系统的限制。感谢您的回答，不幸的是，企业没有为这家公司工作，因为他们需要能够将应用程序分发给他们想要的任意数量的第三方成员，而不必担心他们离开公司去其他供应商和远程管理应用程序（即远程卸载的能力）也不是一种选择。希望有一天这对某人有所帮助！不幸的是，企业没有为这家公司工作，因为他们需要能够将应用程序分发给他们想要的任意数量的第三方成员，而不必担心他们离开公司去其他供应商和应用程序的远程管理（即能够远程卸载）也不是一种选择。希望有一天这对某人有所帮助！不幸的是，企业没有为这家公司工作，因为他们需要能够将应用程序分发给他们想要的任意数量的第三方成员，而不必担心他们离开公司去其他供应商和应用程序的远程管理（即能够远程卸载）也不是一种选择。希望有一天这对某人有所帮助！

# parsing - 读取半格式化数据

> ID：11994008
> 
> 赞同：2
> 
> 时间：2012-08-16T19:19:03.210
> 
> 标签：parsing, awk

我对 AWK 完全陌生，但我认为这是解决我的问题的最佳方式，也是学习 AWK 的好时机。我正在尝试读取由模拟程序创建的大型数据文件。输出是人类可读的，所以它的格式不是很一致。输出示例在此图像中 [http://i.imgur.com/0kf8l.png](http://i.imgur.com/0kf8l.png)

我需要一种方法来找到像“He 2 4686A -2.088 0.0071”这样的行，通过指定“He 2 4686A”部分并获得以下两个数字。问题是“He 2 4686A -2.088 0.0071”这一行可以出现在表格中的任何位置。我知道如何找到条目“He 2 4686A”，但我不知道它在 4 列中的哪一列。所以我不知道如何处理它后面的值。一个命令让我只阅读接下来的两个单词，或者在找到匹配项后告诉我模式的位置都会有所帮助。

/He 2 4686A/ 找到线路

Ca A 3970A -0.900 0.1100 He 2 4686A -2.088 0.0071 S 3 18.67m -0.371 0.3721 Ar 4 444.7A -2.124 0.0066

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T19:51:58.843

第一步应该是将看似 4 列的记录转换为 1 列格式......然后它很容易，`awk`因为您可以过滤前 5 个字段 - 例如：

```
echo "He 2 4686A -2.088 0.0071" | \
awk '$1 == "He" && $2 == 2 && $3 == "4686A" {print $4, $5}' 
```

这使

```
-2.088 0.0071 
```

所以，对我来说，唯一的挑战是将您的数据转换为单列格式……从看起来很简单的图片来看，这些列似乎有一个固定的长度，您可以数数。

假设您的列宽为 30 个字符（很难从图片中分辨出来，请注意选项卡）并且您的数据位于 中`input_file`，那么您可以首先将数据“剪切”为 4 列，然后将输出通过管道传输到另一个`awk`进程

```
awk '{
  print substr($0,1,30)
  print substr($0,31,30)
  print substr($0,61,30)
  print substr($0,91,30)
}' input_file | \
awk '$1 == "He" && $2 == 2 && $3 == "4686A" {print $4, $5}' 
```

如果您真的只需要锚后面的两个数字，那么我会说`grep`Costa 的解决方案最适合您，但是这使您有可能实现进一步的逻辑......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T19:55:03.723

如果你不是死心塌地使用`awk`,`grep`将是最简单的方法......

`egrep -o "He 2 4686A \-?[0-9.]+ \-?[0-9.]+" output.txt`

编辑：上面的方法只有在间距是用空格完成时才有效，这似乎不是你的情况。为了处理制表符和/或重复空格...

`egrep -o "He[ \t]+2[ \t]+4686A[ \t]+\-?[0-9.]+[ \t]+\-?[0-9.]+" output.txt`

# cuda - 在 CUDA 中，我们如何在另一个翻译单元中调用设备函数？

> ID：11994010
> 
> 赞同：4
> 
> 时间：2012-08-16T19:19:08.967
> 
> 标签：cuda

我对CUDA很陌生。我使用 Microsoft Visual Studio 2010，无需担心编写 makefile。当我试图在 .cu 文件中调用一个在 .h 文件中声明并在另一个 .cu 文件中定义的设备函数时，出现了一个问题。在构建结束时，我收到一条错误消息：

```
1>ptxas : fatal error : Unresolved extern function '_Z22atomicAddEmulateDoublePdd' 
```

这出现在 CUDA 4.2 和 5.0 中。我想知道我应该如何配置我的 MVS 以避免这个错误。抱歉提出问题，感谢您的任何建议！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T19:53:30.750

CUDA 4.2 并且不支持静态链接，因此设备功能必须在同一个编译单元中定义。一种常见的技术是将设备函数写入 .cuh 文件并将其包含在 .cu 文件中。

CUDA 5.0 支持称为分离编译的新功能。CUDA 5.0 VS msbuild 规则应该在 CUDA 5.0 RC 下载中可用。

# iphone - 通过在 iPhone 应用程序上输入邮政编码来查找位置

> ID：11994019
> 
> 赞同：1
> 
> 时间：2012-08-16T19:19:37.737
> 
> 标签：iphone, slider, zipcode

我希望有人可以帮助或至少为我指明正确的方向。我目前正在构建一个需要输入邮政编码来查找位置的 iPhone 应用程序。例如 - 如果用户打开应用程序，他们首先看到的是一个文本框，要求他们输入一个 5 位数字（邮政编码）以查找该位置附近的各种企业。还有一个半径为 5 英里到 100 英里的滑块。因此，一旦输入邮政编码并且用户选择了多少里程并按下提交按钮，它应该显示该地区本地的企业列表。那有意义吗？

非常感谢大家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T19:48:34.757

首先，邮政编码没有专门映射到一个位置。它也可能指不相交的位置集（这种情况发生在印度） 像 400093 这样的邮政编码指的是印度的不同地点，也可能指的是韩国的一些不同地点。没有中央服务器可以为您提供这些规范。检查 google API [（在此处查看 google API）](https://developers.google.com/maps/documentation/webservices/)以寻找替代方案。

对于您的用例，我建议您查看 Four square API。获取用户坐标，使用地理位置检测他们的位置或直接调用四方api获取有用信息。 [FourSquare API](https://developer.foursquare.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T20:14:29.867

您可以在您的应用程序中执行此操作，或者创建一个 Web 服务来获取输入的邮政编码并返回该区域。

这是一项巨大的工作。简而言之：

制作一个 plist 文件，其中包含您可以加载到其中的所有邮政编码作为键。[看看这里，他们不在少数。](http://en.wikipedia.org/wiki/List_of_ZIP_code_prefixes)并将值设置为区域名称。

有了邮政编码后，您就可以找到该地区。然后，根据用户选择的范围，您可以呈现最近的区域。

另请参阅[此处](http://en.wikipedia.org/wiki/ZIP_code)，了解邮政编码格式的详细说明。您必须学习一些知识才能检测到选定邮政编码的最近区域。

作为一种快速但不安全的方式 - 您可以找到一个免费的网络服务来完成这项工作（需要 zip，提供区域），而无需构建自己的服务器端（或应用程序中的方法），但正如我所说，它不是安全的。

工作。

# javascript - 向ckeditor添加onchange事件的简单方法？

> ID：11994021
> 
> 赞同：1
> 
> 时间：2012-08-16T19:19:43.133
> 
> 标签：javascript, jquery, ckeditor

是否有一种简单快捷的方法可以将 onchange 事件添加到 CKeditor。

当文本发生变化时，我想做点什么？谢谢

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1/jquery.js"></script>
    <script src="js/ckeditor/ckeditor.js" type="text/javascript"></script>
    <script src="js/ckeditor/adapters/jquery.js" type="text/javascript"></script>
    <script type="text/javascript">
    //<![CDATA[
   $(function () {
        var config = {
            toolbar:
                    [
                        ['Bold', 'Italic', '-', 'NumberedList', 'BulletedList']
                    ],
            width: 600,
            height: 400,
            resize: false
        };

        $('.jquery_ckeditor').ckeditor(config);

        CKEDITOR.instances[0].on('change', function () {
            alert("test");
        });

    });

    //]]>
    </script>
</head>
<body>
    <textarea class="jquery_ckeditor" cols="80" id="editor1" name="editor1" rows="10">&lt;p&gt;This is some &lt;strong&gt;sample text&lt;/strong&gt;. You are using &lt;a href="http://ckeditor.com/"&gt;CKEditor&lt;/a&gt;.&lt;/p&gt;</textarea>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T19:33:23.643

**编辑**. 对不起，我以前的答案版本不正确。

我发现这不是 CKEDITOR 的标准 onchange 事件。取而代之的是，您可以借助 textarea 的另一个事件来模拟它。例如，您可以使用事件“keydown”。

通过将 CKEDITOR 的代码更改为下一个代码来尝试它：

```
CKEDITOR.instances[idOfTextarea].document.on('keydown', function() {alert('text')}); 
```

[更多信息](http://alfonsoml.blogspot.com/2011/03/onchange-event-for-ckeditor.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-02T09:12:10.453

您的代码中有一个错误：

```
CKEDITOR.instances[0] 
```

实例是一个对象，你可以通过键获取值（编辑器）。

将其替换为

```
CKEDITOR.instances[yourInstanceName] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-12-13T05:40:22.270

```
CKEDITOR.instances.editor1.on('change', function() { 
    console.log("TEST");
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-02-11T07:36:14.523

`CKEditor` 提供`events`了他们[文档](https://ckeditor.com/docs/ckeditor4/latest/api/CKEDITOR_editor.html#event-change)中提到的各种内容。

`Change Event`: 当编辑器的内容改变时触发。

由于性能原因，无法验证内容是否真的发生了变化。相反，编辑器会观察几个通常会导致更改的编辑操作。因此，在某些情况下，此事件可能会在没有发生更改时被触发，甚至可能会被触发两次。

如果不要太频繁地触发更改事件很重要，您应该在事件侦听器中比较以前和当前的编辑器内容。不建议在每个更改事件上都这样做。

请注意，更改事件仅在所见即所得模式下触发。为了在源代码模式下实现类似的功能，您可以监听例如键事件或本机输入事件（Internet Explorer 8 不支持）。

```
CKEDITOR.instances.editor1.on('change', function () {
    // operations
}); 
```

这`editor1`是元素`id`的`textarea`或`instance`元素的。

# ruby-on-rails - 非 Active Record 模型在 heroku 中工作，但在本地不工作

> ID：11994026
> 
> 赞同：2
> 
> 时间：2012-08-16T19:20:00.073
> 
> 标签：ruby-on-rails, ruby-on-rails-3, heroku

我在模型文件夹中声明了一个不使用 ActiveRecord 的附加类。

我尝试在另一个模型中使用该类：

```
::ClassName.new 
```

但不知何故，这只适用于heroku：

```
 NameError (uninitialized constant ClassName): 
```

在本地，我需要一个 require 'classname' 才能使其工作，另一方面，这在 heroku 上不起作用。

有什么办法可以解决这个问题？为什么这在本地和heroku上表现不同？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T20:44:47.213

我无法**解释为什么**会发生这种情况，但我想我会分享我在我的应用程序中所做的一件事*（这也可能有助于解决您的问题）*。

在我的`config/application.rb`我放

```
config.autoload_paths += Dir["#{Rails.root}/app/models/**/"] 
```

我有一个类似的目录`app/models`结构

```
- app
  |
   - models
     |
      - database
      - observer
      - tableless 
```

我会`class_name.rb`放入`app/models/tableless`. 这有助于将模型类分组到它们所服务的目的“类型”中。在 Heroku 上使用具有此设置的类时，我从来没有遇到过问题。

# makefile - Makefile ifeq：何时评估它们？

> ID：11994029
> 
> 赞同：19
> 
> 时间：2012-08-16T19:20:17.100
> 
> 标签：makefile, gnu-make

以下是一个非常简单的 makefile，似乎无法正常工作。

```
TEST=ON

buildbegin:
ifeq ($(TEST),ON)        
    @echo TEST PASSED
else
    @echo TEST FAILED
endif 
```

无论我将 TEST 变量设置为什么，我的 ifeq 语句都会通过。我总是看到测试通过。有人看到我在这里做错了吗？

编辑：

行。我的例子并不完全准确。我实际上拥有的是这样的：

```
SHELL = /bin/sh

DEFAULT_TARGS:= all  all_debug  
DEBUG_TARGS:= all_debug
ALL_TARGS:= $(DEFAULT_TARGS) $(DEBUG_TARGS)

.PHONY: $(ALL_TARGS)
.PHONY: buildbegin

$(ALL_TARGS): buildbegin

TEST=ON

$(DEBUG_TARGS): TEST=OFF

buildbegin:
    @echo $(TEST)
ifeq ($(TEST),ON)
    @echo PASSED
else
    @echo FAILED
endif 
```

运行 make all 或 make all_debug 将导致打印“PASSED”。如果我在条件之前回显 $(TEST)，看起来好像我的规则正在更改变量，但 ifeq 只看到默认值是什么。

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-08-16T19:58:02.900

**make**在读取 makefile 时评估条件（您知道它使用 2 遍），请参阅：[Makefile 的条件部分](https://www.chemie.fu-berlin.de/chemnet/use/info/make/make_7.html)。您可以通过使用**警告**来简单地检查这一点（这对调试 makefile 来说是件好事）：

```
buildbegin:
    @echo $(TEST)
$(warning now we reached ifeq TEST=$(TEST))
ifeq ($(TEST),ON)
    @echo PASSED
else
    @echo FAILED
endif 
```

您应该改用 shell 命令并将它们包含在规则中：

```
buildbegin:
      @if [ "$(TEST)" = "ON" ]; then echo "PASSED"; else echo "FAILED"; fi 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-16T21:03:46.750

这是一种更清洁的（无论如何我认为）方法来做你想做的事：

```
all:
    $(MAKE) TEST=ON buildbegin

all_debug:
    $(MAKE) TEST=OFF buildbegin

buildbegin:
    @echo $(TEST)
ifeq ($(TEST),ON)
    @echo PASSED
else
    @echo FAILED
endif 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-24T13:30:02.187

*使用make*变量参数化 shell 命令。这避免了递归 make 甚至是 shell（如果命令不包含 shell 元字符（<>"&; 等），make 将直接派生命令而不通过 shell）。

就像是：

```
result<ON> := PASSED
result<OFF> := FAILED

buildbegin:
    @echo ${result-<${TEST}>} 
```

这`<...>`只是表示某种间接的约定。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-05-02T10:22:09.913

虽然问题很老，但我想分享一个更简单的方法。

它是使用[`MAKECMDGOALS`](https://www.gnu.org/software/make/manual/html_node/Goals.html)表示目标列表的变量。

在您的情况下，解决方案可能是：

```
buildbegin:
    @echo $(MAKECMDGOALS)
ifeq ($(MAKECMDGOALS),all)
    @echo PASSED
else ifeq ($(MAKECMDGOALS),debug_all)
    @echo FAILED
endif

debug_all: buildbegin

all: buildbegin 
```

用法：`make debug_all`或`make all`

# windows-phone-7 - WP7 中的 Rea XML 文件

> ID：11994032
> 
> 赞同：2
> 
> 时间：2012-08-16T19:20:35.550
> 
> 标签：windows-phone-7, xml-parsing

我有一个包含以下数据的 xml 文件

```
 <?xml version="1.0" encoding="UTF-8"?>
    <dataroot xmlns:od="urn:schemas-microsoft-com:officedata"    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"  xsi:noNamespaceSchemaLocation="NAMEDAYS.xsd" generated="2012-08-16T21:47:41">
    <NAMEDAYS>
    <DAY>1</DAY>
    <MONTH>1</MONTH>
    <NAMEDAY>New Years Day</NAMEDAY>
    </NAMEDAYS>
    <NAMEDAYS>
    <DAY>6</DAY>
    <MONTH>1</MONTH>
    <NAMEDAY>Holly Spirit</NAMEDAY>
    </NAMEDAYS> 
```

第一个元素是日期，然后是月份，最后是假期。我想搜索特定日期和月份的 xml 文件并返回该日期的假期。你能帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T20:55:44.743

首先，您必须创建一个示例类（例如：MySampleClass），它将用于存储 XML 元素值，然后您需要以类似的方式过滤数据：

```
XDocument loadedCustomData = XDocument.Load("CustomData.xml");
var filteredData = from c in loadedCustomData.Descendants("NAMEDAYS")
            where c.Attribute("DAY").Value == "1" && c.Attribute("MONTH").Value == "1"
            select new MySampleClass()
            {
               //set your properties here

            };

listBox1.ItemsSource = filteredData; 
```

# iphone - 有没有办法在 cocos2d 中为 UIKit 复制 moveTo 方法？

> ID：11994033
> 
> 赞同：0
> 
> 时间：2012-08-16T19:20:40.387
> 
> 标签：iphone, ios, cocos2d-iphone, uikit

我宁愿不将我的整个项目从 UIKit 更改为 cocos2d，因为我需要的 cocos 只是 moveTo 的东西，那么我如何在 UIKit 中执行此方法有人有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T19:27:24.207

看看[http://www.raywenderlich.com/5478/uiview-animation-tutorial-practical-recipes](http://www.raywenderlich.com/5478/uiview-animation-tutorial-practical-recipes)我通过简单的谷歌搜索找到了这个。

具体来说，你会想要

```
[UIView animateWithDuration: animations:^{}]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T19:28:40.663

UIKit 有一整套动画。这是 Apple 动画文档的链接：

[http://developer.apple.com/library/ios/#documentation/windowsviews/conceptual/viewpg_iphoneos/animatingviews/animatingviews.html](http://developer.apple.com/library/ios/#documentation/windowsviews/conceptual/viewpg_iphoneos/animatingviews/animatingviews.html)

# c++ - Qt：如何在设计器中设置 QLineEdit 的验证器？

> ID：11994041
> 
> 赞同：7
> 
> 时间：2012-08-16T19:21:09.453
> 
> 标签：c++, qt

我目前正在设计一个 UI，并且我有一个 QLineEdit，我只需要接受整数。

我知道如何设置验证器以在代码中使用 QIntValidator。但我想在设计师中做到这一点。

使用设计器时如何设置 QLineEdit 的验证器？

注意：我不想使用输入掩码。输入掩码和验证器功能不同。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-16T19:28:47.607

您是在问如何通过设计师 100% 做到这一点，还是在设计师中设计的小部件？

无论如何，您都需要在代码级别执行此操作，无法直接在设计器中执行此操作 - 并非所有功能都暴露给它。

出于好奇，如果你得到纯粹的整数，为什么不使用 QSpinBox 呢？您可以使用 QSpinBox 并将 buttonSymbols 设置为 NoButtons，如果您愿意，甚至可以指定文本的后缀和前缀。最终结果看起来和行为几乎与 QLineEdit 完全一样，但是专门针对整数值。

# c++ - 我可以使用 Qt LGPL 许可证并在没有任何限制的情况下出售我的应用程序吗？

> ID：11994053
> 
> 赞同：87
> 
> 时间：2012-08-16T19:22:00.757
> 
> 标签：c++, qt, licensing

我想开始一个跨平台项目。我进行了研究，现在我几乎可以肯定 Qt 是正确的选择。但是这里有一个很大的障碍：*许可*。

我想出售我的项目，我也不想提供与我的工作相关的任何资源或支付许可证费用。我检查并注意到 Qt 提供了商业和开源解决方案。我听过太多关于 Qt 许可的相互矛盾的说法，这让我很困惑。有人说即使我使用 LGPL 版本的 Qt，我仍然需要提交我的代码。这是真的？

有人可以给我一个关于 Qt 许可证的简单解释，并告诉我是否可以在没有任何限制的情况下出售我的应用程序？有人能告诉我任何其他与 Qt 等效的跨平台开发，没有任何限制吗？

* * *

## 回答 #1

> 赞同：101
> 
> 时间：2012-08-16T19:25:28.560

只需动态链接到 Qt。如果您动态链接到 LGPL 库，则无需担心。

如果你静态链接到它们，你可以只分发你的目标文件（而不是你的源代码），你会没事的。

LGPL 的想法是最终用户必须能够用他们想要的版本替换 LGPL 库。动态链接到 LGPL 库可以让您做到这一点，静态链接和分发您的目标文件也是如此。只要您这样做，您就可以随心所欲地出售您的封闭源程序。

当然，LGPL 不仅限于此，但这是相关的部分。

# c# - 通过将类名作为字符串提供来获取引用程序集中的类型？

> ID：11994057
> 
> 赞同：10
> 
> 时间：2012-08-16T19:22:31.077
> 
> 标签：c#, .net, reflection, .net-assembly, gettype

这些是类似的问题：[操作方法：在运行时使用 Silverlight 中的字符串从引用的程序集中加载类型，在引用的程序](https://stackoverflow.com/questions/3068131/how-to-load-a-type-from-a-referenced-assembly-at-runtime-using-a-string-in-silv)集中[的类上的 GetType 失败](https://stackoverflow.com/questions/2233516/gettype-on-a-class-in-a-referenced-assembly-fails)，但两个答案都不起作用。

我有一个 MVC 项目，它从包含普通类型作为字符串的数据库中提取数据。这些类型在引用的程序集中，而不是在 MVC 项目中。

因此，例如，假设我的 Referenced Assembly Name 是`MyFramework`普通类型名称`Car`，完整的类型名称可以是`MyFramework.Cars.Car`or`MyFramework.Vehicles.Cars.Car`或其他一些变体。我所拥有的只是引用的程序集名称和纯类名作为字符串。无论完整类型名称如何，如何获取类型？

最后，我是否可以在引用的程序集中编写一个调用 GetType() 的函数并在 MvC 项目中使用它，以便我可以放弃包含程序集名称？我想删除知道程序集名称，所以我想我可以在引用的程序集中编写一个 Util，如：

```
namespace MyFramework //the referenced assembly
{
  public static class TypeUtil
  {
    public static Type GetFrameworkType(string typeName)
    {
        return Type.GetType(typeName);
    }
  }
} 
```

然后在我的 MVC 项目中，我可以调用它而不需要将程序集作为字符串名称。这是可能的还是我总是需要程序集名称？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-08-16T19:32:04.063

也许当时没有加载引用的程序集。另外，我从您的问题中了解到，您没有完整的类型名称，只有类名称。
你应该尝试沿着这条线做一些事情：

```
Type type = Assembly.Load("YourAssemblyName").GetTypes().First(t => t.Name == "ShortTypeName"); 
```

希望我理解正确。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-08-16T19:35:02.460

对于第一个问题，您可以执行类似的操作

```
Type t = AppDomain.CurrentDomain.GetAssemblies()
                                .Where(a => a.FullName == "MyFramework")
                                .SelectMany(a => a.GetTypes())
                                .FirstOrDefault(t => t.Name == "Car"); 
```

我不确定你说的第二个问题是什么意思。

# xmpp - 使用 XMPP 或 WebSocket，为什么用户之间需要一个服务器进行实时通信？

> ID：11994061
> 
> 赞同：4
> 
> 时间：2012-08-16T19:22:50.840
> 
> 标签：xmpp, websocket, chat, real-time

在底部，这都是关于套接字通信的。如果有某种方法可以获取两个用户的 ip，为什么不能直接在用户之间建立连接，而不必通过中间的服务器？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-08-16T20:54:49.380

我的 2 美分：

没有人强迫我们拥有基于服务器的实时通信模型。Infact XMPP 有一个名为[“Serverless Messaging”](http://xmpp.org/extensions/xep-0174.html)的扩展，它定义了如何使用零配置网络原理进行端点发现以及 XML 流的语法和 XMPP 消息传递进行实时通信，从而通过局域网或广域网进行通信。此方法使用基于 DNS 的服务发现和多播 DNS 来发现支持该协议的实体，包括其 IP 地址和首选端口。

P2P 聊天应用程序已经存在十多年了。在中间放置服务器纯粹是取决于您的应用程序需求的决定。如果您的应用程序可以忍受在用户在线/离线状态之间转换时聊天丢失的情况，那么您可以很好地使用直接 P2P 模型。同样，在选择基于服务器的消息传递模型时，也有很多优势（联系人列表管理、头像、实体发现、存在授权、离线消息......）。如果您尝试在基于 P2P 的客户端中正确处理所有这些内容，它们可能会因为需要自己执行的所有工作而死亡或表现不佳。

“WebSockets”不是为 P2P/Serverless 通信而设计的，而是旨在通过无状态 HTTP 协议提供标准化的 PUSH 语义。简而言之，“WebSockets”是一种标准化的方式，它取代了 hacky comet、长轮询、分块编码、jsonp、基于 iframe 以及开发人员用来模拟服务器通过 HTTP 推送的各种其他技术。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-08-27T08:18:39.323

命名的 WebSockets（如果有一天它得到完全和广泛的支持）可能是解决方案。

[http://namedwebsockets.github.io/spec/](http://namedwebsockets.github.io/spec/)

> 命名的 WebSocket 在各种协作的本地设备和本地网络场景中很有用：*在本地设备和/或本地网络上发现匹配的对等服务*。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T19:39:29.553

在对等 (P2P) 网络中，用户之间的直接通信是可能的。在 P2P 中，每个参与者都可以充当客户端和服务器。但是对于 P2P 网络，您需要编写一个单独的程序来使通信成为可能。

Web Sockets 让您可以利用现有的常见浏览器作为客户端。一切都取决于您的应用程序的目的是什么以及您希望如何部署它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T19:52:59.367

WebSockets 不允许套接字侦听连接，只能作为客户端连接到服务器（而不是反向）。从技术上讲，他们可以让它允许这样做，但据我了解，该规范目前（也不预期）允许 WebSockets 的监听功能。

新的 WebRTC ( [http://www.webrtc.org/](http://www.webrtc.org/) ) 规范看起来可能支持对等连接。我根本没有玩过 WebRTC，所以我无法对此发表评论。我认为它会比 WebSocket 的东西更复杂一些。也许更了解 WebRTC 的人可以加入。（除了最新版本的 Chrome 之外，我不确定其他浏览器是否真的支持 WebRTC）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-08-25T09:50:24.177

> 如果有某种方法可以获取两个用户的 ip

你在你的问题中确定了答案。

我使用的大多数机器的 IP 地址为`192.168.0.10`（或来自专用网络的类似地址`192.168.`），并且很深，很深，位于几层[NAT](https://en.wikipedia.org/wiki/Network_address_translation)后面。随着免费 IPv4 地址池的终结和 IPv6 的遥遥无期，这是大多数用户生活的现实。拥有一个已知的、*可路由*的地址的稳定中介有助于解决这个问题。

# ruby - 使用 Savon 进行 HTTPS 调用

> ID：11994063
> 
> 赞同：3
> 
> 时间：2012-08-16T19:22:58.980
> 
> 标签：ruby, soap, savon

我正在尝试使用坚持使用 HTTPS 的 SOAP 服务将凭据传递给他们的 :login。

使用 Savon，我没有看到如何设置 HTTPS，因此它失败了。有人可以指出如何使用 Savon 通过 HTTPS 进行调用。

```
/Users/fizz/.rvm/gems/ruby-1.9.3-p194/gems/savon-1.1.0/lib/savon/soap/response.rb:107:in           `raise_errors': (soap:Server) Server was unable to process request. ---> Credentials can only be passed over secure connections (HTTPS) (Savon::SOAP::Fault)
from /Users/fizz/.rvm/gems/ruby-1.9.3-p194/gems/savon-1.1.0/lib/savon/soap/response.rb:18:in `initialize'
from /Users/fizz/.rvm/gems/ruby-1.9.3-p194/gems/savon-1.1.0/lib/savon/soap/request.rb:35:in `new'
from /Users/fizz/.rvm/gems/ruby-1.9.3-p194/gems/savon-1.1.0/lib/savon/soap/request.rb:35:in `response'
from /Users/fizz/.rvm/gems/ruby-1.9.3-p194/gems/savon-1.1.0/lib/savon/client.rb:84:in `request'
from ./soap.rb:14:in `<main>' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T20:21:36.287

[Savon](http://savonrb.com)使用[HTTPI](http://rubygems.org/gems/httpi)处理 HTTP 请求。您应该能够像这样提供 HTTP 凭据：

```
client = Savon.client("http://v1.example.com?wsdl")

# HTTP basic auth
client.http.auth.basic("username", "password")

# HTTP digest auth
client.http.auth.digest("username", "password") 
```

# javascript - Google-Analytics JS（或其他第三方 JS）可以重命名并且仍然有效吗？

> ID：11994064
> 
> 赞同：1
> 
> 时间：2012-08-16T19:22:58.813
> 
> 标签：javascript, google-analytics, noscript

并不是真的想这样做，而且我最终还是想了解第三方 JS 脚本的结构。我可以重命名 GA JS，以便如果有人使用 NoScript 或类似扩展名，可以将名称更改为类似域的名称，而不是由 Google 脚本管理？

如果是这样，为什么人们不这样做并按他们的域重命名它？

如果没有，他们是否可以制作一个将必要信息传递给第三方 JS 的脚本，以便您可以在页面上实现自己的 JS 脚本，并最终控制体验（用户分配所有脚本与页面相关联，或者没有），最终提供另一层抽象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T21:18:44.323

对于某些脚本，是的，如果您愿意有效地维护其他人内部代码的分支。

但是如果脚本

1.  创建一个`<iframe>`并将内容从域 D 加载到其中，
2.  `<iframe>`通过 XHR 与域 D 中的 Web 服务通信，
3.  该 Web 服务需要在域 D 上设置的 cookie

那么不，您不能在自己的域上运行它，因为它`<iframe>`需要与 Web 服务位于同一来源，并且您托管它的任何域都不在该来源中。

# javascript - 具有三列的简单表排序 - 跟踪列和顺序

> ID：11994071
> 
> 赞同：0
> 
> 时间：2012-08-16T19:23:20.740
> 
> 标签：javascript, jquery

我有三个表头，每个表头都有 ID：**deadline_column**、**duration_column**和**description_column**

每个`<th>`都有一个“headerSort”类。我现在要做的是，一旦单击标题之一：确定单击的列，然后在升序和降序之间交替。当单击新列时，我遇到的主要问题是返回默认排序（升序）。现在我有：

```
$(document).ready(function(){

            var order;
            var column; 

            $('.headerSort').on('click', function(){
                var column = $(this).attr('id');
                if (order=='ascending'){
                    order = 'descending';
                } else {
                    order = 'ascending'; 
                }

                alert (order);
                // deadline_column
                // duration_column
                // description_column

                // switch(column){
                //  case 'deadline_column':
                //  break;

                //  case 'duration_column':
                //  break;

                //  case 'description_column':
                //  break;
                // }

            }); 
```

我想不出一种不会过于冗长的方法来做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T21:52:29.063

这样的事情呢？

```
$(document).ready(function(){

        var order;
        var column; 

        $('.headerSort').on('click', function(){
            var newColumn = $(this).attr('id');
            if(column !== newColumn){
                column = newColumn;
                order = 'ascending';
            }
            else{
                if (order=='ascending'){
                    order = 'descending';
                } else {
                    order = 'ascending'; 
                }
            }

            alert (order);
        });
}); 
```

# c - c程序中链接的隐藏例程

> ID：11994075
> 
> 赞同：0
> 
> 时间：2012-08-16T19:23:39.063
> 
> 标签：c, winapi, compiler-construction, linker

你好，当一个人反汇编一些由 c 编译器编译的 win32 exe prog 时，它表明一些编译器在其中链接了一些“隐藏”的例程——我认为即使 c 程序是一个空的并且有 5 个字节左右。

我知道这样的 5 个字节包含在 PE .exe 格式中，但为什么要放置一些例程 - 这对我来说似乎没有必要，甚至有点让我烦恼。那是什么？可以省略吗？据我了解，c 程序（现在不是在谈论我知道有一些初始例程的 c++）不应该需要这种互补的隐藏函数。

很多 tnx 的答案，甚至可能是一些扩展的信息链接，因为这个话题让我很感兴趣

//编辑

好的，这是我当时做过的一些反汇编（数字火星和旧的 bo​​rland 命令行（我也已经测试过）都制作了更多的代码，（而且我对 bcc32 特别感兴趣）但它们在这种反汇编中不包含可读的名称/符号所以我不会在这里发布它们

这些是有点可读的——但我没有理解它是什么的经验；-)

[https://dl.dropbox.com/u/42887985/prog_devcpp.htm](https://dl.dropbox.com/u/42887985/prog_devcpp.htm)

[https://dl.dropbox.com/u/42887985/prog_lcc.htm](https://dl.dropbox.com/u/42887985/prog_lcc.htm)

[https://dl.dropbox.com/u/42887985/prog_mingw.htm](https://dl.dropbox.com/u/42887985/prog_mingw.htm)

[https://dl.dropbox.com/u/42887985/prog_pelles.htm](https://dl.dropbox.com/u/42887985/prog_pelles.htm)

一些解释性评论这是什么？（恐怕这里可能有一些 c++ sh*t，虽然我对纯 c 插件而不是 c++ 感兴趣，但现在太累了，无法确保它是在 c 模式下编译的，编译后的 empty-main prog 的扩展是 c 所以我以为它将以c而不是c ++输出）

tnx 以获得更长的解释它是什么

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T19:45:58.637

由于您的 win32 exe 文件是动态链接的目标文件，因此它将包含动态链接器完成其工作所需的必要数据，例如要链接到的库的名称和需要解析的符号。

即使是一个空的程序`main()`也会链接到 c-runtime 和 kernel32.dll 库（可能还有其他库？ - 自从我上次做 Win32 开发以来已经有一段时间了）。

您还应该知道，这`main()`只是*您*程序的入口点 - 在此之前已经进行了很多操作，例如检索和标记命令行、设置语言环境、创建`stderr`,`stdin`以及`stdout`设置其他机制c-runtime 库需要这样一个`at_exit()`. 同样，当您`main()`返回时，运行时会进行一些清理——至少需要调用内核来告诉它您已经完成了。

至于有没有必要？是的，除非您喜欢每次都编写自己的程序序言和尾声。如果你足够受虐，可能有一些方法可以编写最小的、静态链接的应用程序。

至于存储开销，你为什么这么着急？担心是不够的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T19:38:36.960

每当您在 Windows 上运行程序时，都会加载几个初始化函数。除其他外，这些函数调用您编写的 main() 函数 - 这就是为什么您需要 main() 或 WinMain() 函数来运行程序的原因。我不知道其他包含的功能。你有一些拆解展示吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T19:39:14.557

您没有太多细节要继续，但我认为您所看到的大部分内容可能是您的编译器使用的特定 C 运行时库的例程。

例如，将有代码使其能够从入口点“main”运行，可移植可执行格式理解调用您在 C 程序中编写的 main(char ** args)。

# android - ImageButton - 按下时切换颜色

> ID：11994081
> 
> 赞同：1
> 
> 时间：2012-08-16T19:24:13.950
> 
> 标签：android, android-button, android-custom-view

`ImageButton`当用户按下时如何切换颜色`ImageButton`？

我希望`ImageButton`按下时在红色（电源关闭）和绿色（电源）之间切换。

代码：

```
 ImageButton star, power;
Intent i;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    star = (ImageButton)findViewById(R.id.ibStar);
    star.setOnClickListener(this);

    power = (ImageButton)findViewById(R.id.ibPower);
    power.setOnTouchListener(this);

}

public boolean onTouch(View v, MotionEvent event) {
    if (event.getAction() == MotionEvent.ACTION_DOWN ) {
        power.setImageResource(R.drawable.power);

    }
     else if (event.getAction() == MotionEvent.ACTION_UP ) {
        power.setImageResource(R.drawable.power_off);

    }

    return true;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T19:36:36.927

我认为这就是你所需要的。

```
ImageButton star, power;
Intent i;
boolean isOn=false;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    star = (ImageButton)findViewById(R.id.ibStar);
    star.setOnClickListener(this);

    power = (ImageButton)findViewById(R.id.ibPower);
    power.setOnTouchListener(this);

}

public boolean onTouch(View v, MotionEvent event) {
    if (event.getAction() == MotionEvent.ACTION_DOWN ) {
        isOn=!isOn; // change its state to the oposite one

        if(isOn)
            power.setImageResource(R.drawable.power);
        else
            power.setImageResource(R.drawable.power_off);
    }

    return true;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T19:36:41.027

尝试使用`OnClickListener`代替`OnTouch`。有几种方法可以处理这种情况。

一种方法是在电源打开或关闭`boolean`之间切换`true`并`false`表示。然后在按下 时检查该值`ImageButton`并相应地更改颜色`ImageButton`。

```
/* The boolean below is
 * declared in the 
 * class and not in a method. 
 * Whatever default value you need, i assumed false. */
private boolean isPowerOn = false;

power = (ImageButton)findViewById(R.id.ibPower);
power.setOnClickListener(new OnClickListener() {
    @Override
        public void onClick(View v) {
            if (isPowerOn) {
                /* set color to red */
                isPowerOn = false;
            } else {
                /* set power to green */
                isPowerOn = true;
            }
        }
    }); 
```

**或者**

您可以检查`ImageButton`按下时的颜色，然后相应地更改颜色。这种方式似乎有点时髦。使用`boolean`方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T19:32:36.883

如果您想让按钮按下事件显示不同的颜色（即在按下事件期间），请使用选择器，如[Button Background Selector](https://stackoverflow.com/questions/7335345/button-background-selector)所示。

如果您想让按钮颜色在 onClick 事件后在红色和绿色之间切换，请使用 onClickListener()（伪代码）：

```
onClick(ImageButton ib)
{
 if (button is green)
  ib.setImageResource(red)
 else
  ib.setImageResource(green)
} 
```

# java - 通过 UDP 接收实时 GPS 数据

> ID：11994086
> 
> 赞同：0
> 
> 时间：2012-08-16T19:24:43.920
> 
> 标签：java, gps, udp, real-time

我正在构建一个实时 GPS 跟踪系统，它将接收从几个使用 UDP 的 Arduino 设备发送的 GPS 数据。到目前为止我有这个代码：

```
PreparedStatement stmt ...

DatagramSocket serverSocket = new DatagramSocket(9876);
byte[] receiveData = new byte[1024];

while(true){
    DatagramPacket receivePacket = new DatagramPacket(receiveData, receiveData.length);
    serverSocket.receive(receivePacket);
    String received = new String( receivePacket.getData());
    System.out.println("RECEIVED: " + received);

    stmt.set...
    stmt.execute();
} 
```

1 - 任何有更多知识的人都可以告诉我是否有更好的方法来做到这一点？我真的不知道 JVM 是如何处理这个问题的，但我不喜欢那个无限循环。

2 - 假设我有 50 个 Arduinos 发送数据。我需要使用线程或类似的东西吗？

3 - 最好为每个“连接”使用一个线程（UDP 是无连接的），就像下面的答案一样，或者使用像 Apache Mina 或 Netty 这样的框架/库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T13:39:16.473

There is no problem using an infinite loop in this case. Calling [receive](http://docs.oracle.com/javase/1.5.0/docs/api/java/net/DatagramSocket.html#receive%28java.net.DatagramPacket%29) waits until a new datagram is delivered:

> This method blocks until a datagram is received. T...

So no CPU power is wasted here, it simply waits until new data is available.

If you have many clients or if processing the packet isn't completely trivial, you should start a new thread for processing each one, so that the main thread that receives the datagrams doesn't get blocked. Probably the best approach is to use [thread pools](http://docs.oracle.com/javase/tutorial/essential/concurrency/pools.html) that will create threads for you, and at the same time prevent creating too many threads if your application is overloaded by requests.

I'd proceed as follows:

1.  Create a dedicated thread for receiving the datagrams. It could also create a thread pool for dispatching processing the requests. Something like:

    ```
    int maxNumberOfThreads = ...; // your choice
    int bufSize = ...; // your choice

    ExecutorService exec = Executors.newFixedThreadPool(maxNumberOfThreads);
    DatagramSocket serverSocket = new DatagramSocket(9876);

    while (true) {
        // we need to create a new buffer every time because
        // multiple threads will be working with the data
        DatagramPacket receivePacket = 
            new DatagramPacket(new byte[bufSize], bufSize);
        serverSocket.receive(receivePacket);
        exec.submit(new YourTask(receivePacket));
    } 
    ```

2.  Create class `YourTask` that processes the datagrams:

    ```
    // We don't use return values for anything here, so
    // we just use Object.
    public class YourTask extends Callable<Object> {
        private DatagramPacket received;

        public YourTask(DatagramPacket received) {
            this.received = received;
        }

        public Object call() {
            // do your processing here
            System.out.println("RECEIVED from " +
                received.getAddress() +
                ": " + new String(received.getData(),
                                  0, received.getLength()));
            return null;
        }
    } 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T12:26:22.533

我建议您查看 Apache MINA (http://mina.apache.org/)，这是一个用于网络应用程序的出色框架。使用 MINA，您无需实现循环或担心线程。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T12:27:48.687

我在您的问题中看到的实际问题是“实时”术语。你那是什么意思？您是否需要一个高度可预测（在时间方面）的应用程序，它是安全/关键任务吗？如果是这样，使用 Java 可能会出现问题，因为它有很多原因（即垃圾收集器等）不是实时的。但是，有一些实时 JVM，例如[http://www.atego.com/products/aonix-perc/](http://www.atego.com/products/aonix-perc/)。我确实喜欢 Java，但我想在这种情况下，如果你真的需要 RT 系统，C++ 会是更好的选择。

# ruby-on-rails - 错误 H10 使 Heroku 应用程序崩溃

> ID：11994089
> 
> 赞同：0
> 
> 时间：2012-08-16T19:25:08.200
> 
> 标签：ruby-on-rails, ruby-on-rails-3, heroku, ruby-on-rails-3.2

恐怕我完全不知道为什么我的 Rails 应用程序在 Heroku 上崩溃了。它在我的开发环境中运行良好，我在日志中看不到任何明显的东西。我错过了什么？

这是 Heroku 日志：

```
2012-08-16T19:19:08+00:00 app[web.1]: => Booting WEBrick
2012-08-16T19:19:08+00:00 app[web.1]: => Call with -d to detach
2012-08-16T19:19:08+00:00 app[web.1]: Exiting
2012-08-16T19:19:08+00:00 app[web.1]: => Rails 3.2.8 application starting in production on http://0.0.0.0:33240
2012-08-16T19:19:08+00:00 app[web.1]: => Ctrl-C to shutdown server
2012-08-16T19:19:08+00:00 app[web.1]: /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:317:in `rescue in depend_on': No such file to load -- CSV (LoadError)
2012-08-16T19:19:08+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:312:in `depend_on'
2012-08-16T19:19:08+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:225:in `require_dependency'
2012-08-16T19:19:08+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/engine.rb:439:in `block (2 levels) in eager_load!'
2012-08-16T19:19:08+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/engine.rb:438:in `block in eager_load!'
2012-08-16T19:19:08+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/engine.rb:436:in `each'
2012-08-16T19:19:08+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/engine.rb:438:in `each'
2012-08-16T19:19:08+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/engine.rb:436:in `eager_load!'
2012-08-16T19:19:08+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/application/finisher.rb:53:in `block in <module:Finisher>'
2012-08-16T19:19:08+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/initializable.rb:55:in `block in run_initializers'
2012-08-16T19:19:08+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/initializable.rb:30:in `run'
2012-08-16T19:19:08+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/initializable.rb:54:in `run_initializers'
2012-08-16T19:19:08+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/initializable.rb:30:in `instance_exec'
2012-08-16T19:19:08+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/application.rb:136:in `initialize!'
2012-08-16T19:19:08+00:00 app[web.1]:   from /app/config/environment.rb:5:in `<top (required)>'
2012-08-16T19:19:08+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/initializable.rb:54:in `each'
2012-08-16T19:19:08+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/railtie/configurable.rb:30:in `method_missing'
2012-08-16T19:19:08+00:00 app[web.1]:   from /app/config.ru:4:in `block in <main>'
2012-08-16T19:19:08+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/builder.rb:51:in `initialize'
2012-08-16T19:19:08+00:00 app[web.1]:   from /app/config.ru:4:in `require'
2012-08-16T19:19:08+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/builder.rb:51:in `instance_eval'
2012-08-16T19:19:08+00:00 app[web.1]:   from /app/config.ru:1:in `new'
2012-08-16T19:19:08+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/builder.rb:40:in `eval'
2012-08-16T19:19:08+00:00 app[web.1]:   from /app/config.ru:1:in `<main>'
2012-08-16T19:19:08+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/builder.rb:40:in `parse_file'
2012-08-16T19:19:08+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/server.rb:301:in `wrapped_app'
2012-08-16T19:19:08+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/server.rb:252:in `start'
2012-08-16T19:19:08+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/server.rb:200:in `app'
2012-08-16T19:19:08+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/commands/server.rb:46:in `app'
2012-08-16T19:19:08+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/commands/server.rb:70:in `start'
2012-08-16T19:19:08+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/commands.rb:50:in `tap'
2012-08-16T19:19:08+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/commands.rb:55:in `block in <top (required)>'
2012-08-16T19:19:08+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/commands.rb:50:in `<top (required)>'
2012-08-16T19:19:08+00:00 app[web.1]:   from script/rails:6:in `<main>'
2012-08-16T19:19:08+00:00 app[web.1]:   from script/rails:6:in `require'
2012-08-16T19:19:09+00:00 heroku[web.1]: Process exited with status 1
2012-08-16T19:19:09+00:00 heroku[web.1]: State changed from starting to crashed
2012-08-16T19:19:16+00:00 heroku[run.1]: Process exited with status 0
2012-08-16T19:19:16+00:00 heroku[run.1]: State changed from up to complete
2012-08-16T19:19:37+00:00 heroku[router]: Error H10 (App crashed) -> GET fierce-tor-1874.herokuapp.com/ dyno= queue= wait= service= status=503 bytes=
2012-08-16T19:19:38+00:00 heroku[router]: Error H10 (App crashed) -> GET fierce-tor-1874.herokuapp.com/favicon.ico dyno= queue= wait= service= status=503 bytes=
2012-08-16T19:19:38+00:00 heroku[router]: Error H10 (App crashed) -> GET fierce-tor-1874.herokuapp.com/ dyno= queue= wait= service= status=503 bytes=
2012-08-16T19:19:38+00:00 heroku[router]: Error H10 (App crashed) -> GET fierce-tor-1874.herokuapp.com/favicon.ico dyno= queue= wait= service= status=503 bytes=
Ashers-MacBook-Pro% 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T19:30:02.523

也许你写

```
gem 'CSV' 
```

在 Gemfile 中？它应该是小写的：`gem 'csv'`. 看[这里](https://stackoverflow.com/questions/6132180/csv-not-working-for-rails-3-in-production-using-passenger)

# javascript - 复选框切换按钮在 iPhone 上不起作用

> ID：11994091
> 
> 赞同：3
> 
> 时间：2012-08-16T19:25:20.097
> 
> 标签：javascript, css, html

我正在尝试使用复选框输入类型制作开/关切换按钮，并使用 CSS 更改样式以使其看起来像 iPhone 用于我的 web 应用程序的样式。目前我的按钮在所有浏览器中都很好用，但是当我在 iPhone 上加载它时它不起作用，当你点击按钮时没有任何反应。起初我认为这可能是我的 jQTouch 或 javascript 的问题，但我删除了所有的 CSS，所以我可以测试功能并且它工作正常。所以我知道问题出在我的 CSS 中。知道为什么这个 CSS 代码不允许我点击按钮。（图形和一切都工作得很好，当我点击按钮时什么也没有发生）。有任何想法吗？谢谢。

代码在这个小提琴中：http: [//jsfiddle.net/4gjZX/4/](http://jsfiddle.net/4gjZX/4/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T19:48:08.503

1.  更改为 onclick
2.  在标签上添加一个空的 onclick - [iDevices 上的已知问题](https://stackoverflow.com/questions/4142520/label-not-clickable-in-jqtouch)

[演示](http://jsfiddle.net/mplungjan/jMTRa/)

但是，当您使用 jQuery 时为什么还要有内联事件处理程序？？？

也是为什么ID中的data-，它通常用于属性名称

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-04T12:45:47.163

您可以通过进行一些 css 更改来使其工作：-

```
label { cursor: pointer; } 
```

# python - 如何在 SQLAlchemy 中执行此递归公用表表达式？

> ID：11994092
> 
> 赞同：4
> 
> 时间：2012-08-16T19:25:24.337
> 
> 标签：python, sql, sqlalchemy

在此表架构中：

```
class Location(db.Model):
    id = db.Column(db.String(255), primary_key=True)
    parent_id = db.Column(db.String(255), db.ForeignKey('location.id'), nullable=True) 
    type = db.Column(db.String(255))
    name = db.Column(db.String(255))
    options = db.Column(db.Text, nullable=True) 
```

我有一个父母，假设这张桌子：

```
> select * from location;
+--------------------------------------+--------------------------------------+---------+-----------+---------+
| id                                   | parent_id                            | type    | name      | options |
+--------------------------------------+--------------------------------------+---------+-----------+---------+
| 8821da60-e7d2-11e1-951e-ae16bc2b7368 | 88227a60-e7d2-11e1-951e-ae16bc2b7368 | city    | sengkang  | NULL    |
| 88227a60-e7d2-11e1-951e-ae16bc2b7368 | NULL                                 | country | singapore | NULL    |
+--------------------------------------+--------------------------------------+---------+-----------+---------+ 
```

父对象是名为**singapore的****国家**对象。可以有更多的嵌套对象，即**sengkang**的孩子，就像**sengkang**是**新加坡**的孩子一样。

 ******因此，单个层次结构链可能看起来像 a -> b -> sengkang -> singapore

其中 -> 手段*是*

如何获取所有父对象为新加坡的 Location 对象，包括父对象（新加坡）？（请在 SQLAlchemy 中）。谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-17T00:16:37.843

SA 文档：[Query.cte](http://docs.sqlalchemy.org/en/latest/orm/query.html#sqlalchemy.orm.query.Query.cte)

我不得不说新的 CTE 东西（从 0.76 开始）非常好，比我不得不重做[这个](https://bitbucket.org/zzzeek/sqlalchemy/issues/attachments/1859/zzzeek/sqlalchemy/1394229566.78/1859/cte_demo.py)的旧方法更好。

无论如何，认为你正在寻找这样的东西......

```
included_parts = session.query(Location).\
  filter(Location.name=='singapore').\
  cte(name='included_parts', recursive=True)

incl_alias = aliased(included_parts, name="pr")
parts_alias = aliased(Location, name='p')
included_parts = included_parts.union_all(
  session.query(parts_alias).filter(parts_alias.parent_id==incl_alias.c.id)
)

q = session.query(included_parts).all() 
```******

# c# - C# 桌面应用程序。如何将文件上传到 Google Drive 的简单示例

> ID：11994101
> 
> 赞同：11
> 
> 时间：2012-08-16T19:26:09.980
> 
> 标签：c#, google-drive-api

是否有桌面应用程序如何授权 Google Drive 服务和上传文件的代码示例？

目前我有：

```
var parameters = new OAuth2Parameters
                                 {
                                     ClientId = ClientCredentials.ClientId,
                                     ClientSecret = ClientCredentials.ClientSecret,
                                     RedirectUri = ClientCredentials.RedirectUris[0],
                                     Scope = ClientCredentials.GetScopes()
                                 };    
string url = OAuthUtil.CreateOAuth2AuthorizationUrl(parameters);
    // Open url, click to allow and copy secret code
    parameters.AccessCode = secretCodeFromBrowser;
    OAuthUtil.GetAccessToken(parameters);
    string accessToken = parameters.AccessToken;
    // So, there is the access token 
```

但是接下来的步骤是什么？正如我从示例中看到的那样，我应该获取 IAuthenticator 实例并将其传递给 DriveService 类的构造函数......如何获取 IAuthenticator 的实例？如果我上面的代码是正确的......在此先感谢。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-16T20:03:59.420

这是一个完整的 C# 命令行示例，用于将文件上传到 Google Drive：

```
using System;
using System.Diagnostics;
using DotNetOpenAuth.OAuth2;
using Google.Apis.Authentication.OAuth2;
using Google.Apis.Authentication.OAuth2.DotNetOpenAuth;
using Google.Apis.Drive.v2;
using Google.Apis.Drive.v2.Data;
using Google.Apis.Util;

namespace GoogleDriveSamples
{
    class DriveCommandLineSample
    {
        static void Main(string[] args)
        {
            String CLIENT_ID = "YOUR_CLIENT_ID";
            String CLIENT_SECRET = "YOUR_CLIENT_SECRET";

            // Register the authenticator and create the service
            var provider = new NativeApplicationClient(GoogleAuthenticationServer.Description, CLIENT_ID, CLIENT_SECRET);
            var auth = new OAuth2Authenticator<NativeApplicationClient>(provider, GetAuthorization);
            {
                Authenticator = auth
            });

            File body = new File();
            body.Title = "My document";
            body.Description = "A test document";
            body.MimeType = "text/plain";

            byte[] byteArray = System.IO.File.ReadAllBytes("document.txt");
            System.IO.MemoryStream stream = new System.IO.MemoryStream(byteArray);

            FilesResource.InsertMediaUpload request = service.Files.Insert(body, stream, "text/plain");
            request.Upload();

            File file = request.ResponseBody;
            Console.WriteLine("File id: " + file.Id);
            Console.ReadLine();
        }

        private static IAuthorizationState GetAuthorization(NativeApplicationClient arg)
        {
            // Get the auth URL:
            IAuthorizationState state = new AuthorizationState(new[] { DriveService.Scopes.Drive.GetStringValue() });
            state.Callback = new Uri(NativeApplicationClient.OutOfBandCallbackUrl);
            Uri authUri = arg.RequestUserAuthorization(state);

            // Request authorization from the user (by opening a browser window):
            Process.Start(authUri.ToString());
            Console.Write("  Authorization Code: ");
            string authCode = Console.ReadLine();
            Console.WriteLine();

            // Retrieve the access token by using the authorization code:
            return arg.ProcessUserAuthorization(authCode, state);
        }
    }
} 
```

更新：此快速入门示例现已在[https://developers.google.com/drive/quickstart上提供](https://developers.google.com/drive/quickstart)

# javascript - 如何在 AngularJS 中从外部配置工厂

> ID：11994107
> 
> 赞同：2
> 
> 时间：2012-08-16T19:26:24.757
> 
> 标签：javascript, angularjs

假设我正在使用 AngularJS 构建一个 C# 应用程序。

我想设置来自服务器端的配置对象，并基本上将该配置注入工厂。工厂驻留在另一个 .JS 文件中的位置。

怎么做呢？

我在这里设置了一个 JS 小提琴示例：

[http://jsfiddle.net/f89tS/7/](http://jsfiddle.net/f89tS/7/)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-16T20:05:14.250

您可以将模块的常量用于来自服务器的配置对象。使用常量非常简单，您可以在服务器端生成它：

```
app.constant('CONSTANTS', {zoomLevel: 8}); 
```

然后，在您的工厂中，您可以注入常量：

```
app.factory('map', function(CONSTANTS){
    return {
        zoomLevel: CONSTANTS.zoomLevel  
    };
}); 
```

常量对于服务器生成的设置非常有用，因为一旦生成并发送到客户端，这些设置就无法更改。

最后，这里是工作 jsFiddle：http: [//jsfiddle.net/pkozlowski_opensource/JZcys/1/](http://jsfiddle.net/pkozlowski_opensource/JZcys/1/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T00:28:59.597

这是一个示例，说明我如何通过将引导调用包装在我自己的 run 方法周围来完成类似的事情。

然后它使用命名约定从您的 aspx 页面内联注入配置选项，这可以通过 c# 属性进行设置。

我不知道这是否是“角度”方式，但到目前为止效果很好。

[http://jsfiddle.net/xpressivecode/dVM9b/](http://jsfiddle.net/xpressivecode/dVM9b/)

# maven - Maven原型：字符串替换不起作用

> ID：11994110
> 
> 赞同：3
> 
> 时间：2012-08-16T19:26:45.913
> 
> 标签：maven, maven-archetype

我正在构建一个 Maven 原型。文件名替换工作正常。例如，我有一个名为`__`artifactd `__`-log4j.xml 的文件，它在生成时会被很好地替换。但是，其中一个 xml 文件，一个引用它的 spring 上下文文件，它没有被替换：

```
<?xml version="1.0" encoding="UTF-8"?> 
```

```
xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd
http://www.springframework.org/schema/jee http://www.springframework.org/schema/jee/spring-jee-3.0.xsd
http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.0.xsd
http://www.springframework.org/schema/data/jpa http://www.springframework.org/schema/data/jpa/spring-jpa.xsd">

<context:annotation-config />

<bean id="log4jConfigurer" class="org.springframework.beans.factory.config.MethodInvokingFactoryBean">
    <property name="targetClass" value="org.springframework.util.Log4jConfigurer"></property>
    <property name="targetMethod" value="initLogging"></property>
     <property name="arguments">
     <list>
        <value>classpath:${artifactId}-log4j.xml</value>
        <value>5000</value>
     </list>
  </property>
</bean> 
```

由于某种原因，xml 文件中的令牌 ${artifactId} 永远不会被替换。我的*原型-metadata.xml*

```
 <modules>
<module id="${rootArtifactId}-services" dir="__rootArtifactId__-services" name="${rootArtifactId}-services">
  <fileSets>
    <fileSet filtered="true" packaged="true" encoding="UTF-8">
      <directory>src/main/java</directory>
      <includes>
        <include>**/*.java</include>
      </includes>
    </fileSet>
    <fileSet filtered="true" encoding="UTF-8">
      <directory>src/main/webapp</directory>
      <includes>
        <include>**/*.jsp</include>
        <include>**/*.xml</include>
      </includes>
    </fileSet>
    <fileSet filtered="true" encoding="UTF-8">
      <directory>src/main/resources</directory>
      <includes>
        <include>**/*.xml</include>
      </includes>
    </fileSet>
  </fileSets>
</module> 
```

spring 文件位于 src/main/resources 下，并且由于 fileSet 设置为过滤，它应该被速度替换，对吗？

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T20:34:41.013

Have you tried using `${project.artifactId}`? According to the [Maven Reference Book](http://www.sonatype.com/books/mvnref-book/reference/resource-filtering-sect-properties.html), all project properties have the `project` prefix.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T21:28:38.450

Well, I was changing the template project I've used from mvn archetype:create-from-project instead of the generated-resources that's the reason.

So I ended having VLT doubled escaped.

Fixed :D

# forms - 在 Symfony2 上具有复合主键的实体上的多对多

> ID：11994114
> 
> 赞同：0
> 
> 时间：2012-08-16T19:27:19.483
> 
> 标签：forms, symfony, many-to-many

我正在尝试创建一个表单来管理以多对多方式相关的 2 个实体的关系。

这些实体是 PHONE 和 GROUP。

两个实体都有一个复合主键，**ID**和**USER**用于 GROUP 实体，**PHONE**和**USER**用于 PHONE 实体，即：

*   **ID**：数字自动增量唯一
*   **电话**：数字
*   **USER**：用户 ID，链接到另一个未显示的实体。

我正在使用复合键将我的索引聚集在数据库服务器上。

我的 2 个实体的定义如图所示：电话实体

```
class Phone
{ 
/**
 * @var integer $phoneNo
 * 
 * @ORM\Column(name="phone_no", type="bigint", nullable=false)
 * @ORM\Id
 * 
 */
private $phoneNo;

/**
 * @var Group
 *
 * @ORM\ManyToMany(targetEntity="Group", inversedBy="phone")
 * @ORM\JoinTable(name="phone_has_group",
 *   joinColumns={
 *      @ORM\JoinColumn(name="user", referencedColumnName="user"),
 *      @ORM\JoinColumn(name="phone_no", referencedColumnName="phone_no")
 *   },
 *   inverseJoinColumns={
 *     @ORM\JoinColumn(name="group_contact", referencedColumnName="id")
 *   }
 * )
 */
private $group; 

/**
 * @var User
 *
 * @ORM\ManyToOne(targetEntity="User")
 * @ORM\JoinColumns({
 *   @ORM\JoinColumn(name="user", referencedColumnName="id")
 * })
 * @ORM\Id
 */
private $user;

// more properties, getters and setters...
} 
```

集团实体

```
class Group
{
/**
 * @var integer $id
 *
 * @ORM\Column(name="id", type="integer", nullable=false)
 * @ORM\Id
 * @ORM\GeneratedValue(strategy="IDENTITY")
 */
private $id;

/**
 * @var string $name
 *
 * @ORM\Column(name="name", type="string", length=45, nullable=false)
 */
private $name;

/**
 * @var Phone
 *
 * @ORM\ManyToMany(targetEntity="Phone", mappedBy="group")
 */
private $phone;

/**
 * @var User
 *
 * @ORM\ManyToOne(targetEntity="User")
 * @ORM\JoinColumns({
 *   @ORM\JoinColumn(name="user", referencedColumnName="id")
 * }) 
 * @ORM\Id
 */
private $user;

// more properties, getters and setters...
} 
```

**这个实体上的关系工作得很好。当我尝试创建一个表单来管理这两个实体之间的关系时，就会出现问题。**

我的代码：

```
class GroupType extends AbstractType
{
public function buildForm(FormBuilder $builder, array $options)
{
    $builder
        ->add('name', 'text', 
                array('label' => 'Nombre')) 
        ->add('phone', 'entity', 
                array(
                    'label' => 'Contactos en este grupo',
                    'class' => 'SMSBundle:Phone',
                    'expanded' => false,
                    'required' => false,
                    'multiple' => true,
                ))  
    ;
} 
```

生成这个：

```
<select id="e_keyword_phone" name="e_keyword[phone][]" multiple="multiple">
  <option value="0">4490000000</option>
  <option value="1">4490000001</option>
  <option value="2">4490000002</option>
  <option value="3">4490000003</option>
  <option value="4">4490000004</option>
  <option value="5">4490000005</option>
</select> 
```

通常，每个**选项标签上的****value**属性代表被选择的实体的 ID ...但我不是使用单列 ID，而是使用 2 列复合键！！！

 **在这里，正在生成一个任意递增的数字，导致选定的值没有链接到正确的实体，也没有被持久化到数据库中。

我怎样才能在不摆脱我的复合键的情况下完成这项工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-25T12:59:56.793

这个问题很久以前就被问过了，我是这个主题的新手，但我很确定你必须**创建一个额外的实体类**并遵循[Doctrine 2 和多对多链接表中已经描述的案例场地](https://stackoverflow.com/questions/15616157/doctrine-2-and-many-to-many-link-table-with-an-extra-field)**

# outlook - 在 Outlook 2007/2010 中自定义标志图标

> ID：11994115
> 
> 赞同：2
> 
> 时间：2012-08-16T19:27:19.953
> 
> 标签：outlook, vsto

有没有办法在 Outlook 2007/2010 中使用您自己的自定义标志图标？

# marionette - 嵌套视图应该是布局视图吗？

> ID：11994116
> 
> 赞同：4
> 
> 时间：2012-08-16T19:27:21.293
> 
> 标签：marionette

一个简单而简短的问题：如果一个视图包含两个或多个子视图。视图容器应该是布局视图吗？

如果没有，有什么好的选择？

更新：

我的代码：

```
var LikeButtonModal = Backbone.Model.extend({
    url: 'api/profile/like/'
});

var LikeButton = Backbone.Marionette.ItemView.extend({
    tagName: 'button',
    className: 'like',
    template: '<div>like</div>',
    events: {
        'click' : 'like'
    },
    initialize: function(userId){
        this.model = new LikeButtonModal();
    },
    like: function(){
        this.model.save();
    }
})

var LeftProfileView = Backbone.Marionette.Layout.extend({
    template: '#profile-left',
    regions:{
        extra : '.extra'
    },
    initialize: function(){
        this.on("item:rendered", this.editable, this);
    },
    onRender: function(){
        if(this.model.get('userid') != ActiveUser.get('userid')){
            this.extra.show(new LikeButton(this.model.get('userid')));
        }
    }
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T20:19:08.317

如果您将在不同时间替换子视图，或者子视图的类型非常不同，则布局对此很有用……例如，布局可能包含您的标题、导航和主要内容区域。

其他选项是 CollectionViews 和 CompositeViews。

集合视图将呈现项目集合，对集合中的每个项目使用相同类型的视图。这适用于事物列表。

CompositeViews 是可以在集合周围呈现包装器模板的 CollectionViews。例如，一个 HTML 表格结构。、和标签可以在 CompositeView 的包装模板中呈现，然后可以将一组项目呈现到`table`标签中。`thead``tbody``tfooter``tbody`

这也可能对这个主题有更多的了解：[https ://github.com/derickbailey/backbone.marionette/wiki/Use-cases-for-the-different-views](https://github.com/derickbailey/backbone.marionette/wiki/Use-cases-for-the-different-views)

# java - 执行 Seam EJBQL 时出错 - “java.lang.IllegalStateException：查询的无效选择子句”

> ID：11994118
> 
> 赞同：1
> 
> 时间：2012-08-16T19:27:23.447
> 
> 标签：java, hibernate, seam, ejbql

我正在尝试在我的应用程序中运行 ejbql，但它失败并出现以下错误：java.lang.IllegalStateException：查询的无效选择子句。

这是查询：

```
public void pesquisar()
{
    StringBuilder query = new StringBuilder();

    query.append("SELECT OBJECT(licenca) FROM TblLicencas licenca");
    query.append(" WHERE upper(licenca.tblLivros.titulo) like '%" + termoPesquisa.toUpperCase() + "%'");
    tblLicencasList.setEjbql(query.toString());

    tblLicencasList.refresh();
} 
```

在控制台中，hibernate 生成的输出查询是这样的：

```
select
    top 26 tbllicenca0_.id_licenca as id1_8_,
    tbllicenca0_.data_geracao as data2_8_,
    tbllicenca0_.id_livraria as id3_8_,
    tbllicenca0_.id_livro as id4_8_,
    tbllicenca0_.id_status_licenca as id5_8_,
    tbllicenca0_.id_tipo_licenca as id6_8_ 
from
    DigitalDocumentsServerTeste.dbo.tbl_licencas tbllicenca0_,
    DigitalDocumentsServerTeste.dbo.tbl_livros tbllivros1_ 
where
    tbllicenca0_.id_livro=tbllivros1_.id_livro 
    and (
        upper(tbllivros1_.titulo) like '%ADV%'
    ) 
```

在我的应用程序中，我还有其他几个与此类似的查询可以完美运行。当我在数据库中手动执行此查询时，它运行良好。我正在使用 SQL Server 2005。

谢谢

# middleman - 本地主机服务器没有响应中间人开发环境

> ID：11994123
> 
> 赞同：1
> 
> 时间：2012-08-16T19:27:38.860
> 
> 标签：middleman

我正在运行 Mountain Lion，没有 RVM 管理。

我尝试过：

```
middleman server -p 4567 -e development

middleman server 
```

和

```
bundle exec middleman server 
```

我已经尝试了各种与模板的组合，删除了安装并重新开始了几次。

一切似乎都在运行，只是找到并且中间人正在看守等。然后我导航到`http://localhost:4567/`（如果适用）并且浏览器总是说它无法连接到服务器“localhost”

该问题在两个环境中仍然存在，Dropbox 在两者之间下沉源文件。也许我做错了什么，但我无法从文档中找出任何其他步骤，并且我尝试连接到官方用户论坛，但确认电子邮件的重复“重新发送”不适用于两个不同的帐户。是的，这是那些发展的日子之一......

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T11:56:24.110

好的，由于某种原因 localhost 正在我的计算机上被占用。切换到 0.0.0.0:4500 解决了它。

# iphone - Cocos2d v2 CCSprite 背景图片尺寸

> ID：11994126
> 
> 赞同：0
> 
> 时间：2012-08-16T19:27:52.867
> 
> 标签：iphone, ios, cocos2d-iphone

我创建了一个新的 Cocos2d 项目并删除了“Hello World”标签。我添加了这张图片（320x480 像素）并在 iPhone 4 上进行了测试，结果如下。图像的尺寸已减小到原始尺寸的 1/4，不知道发生了什么。以前的版本我从来没有遇到过这个问题。

源图像

![在此处输入图像描述](../Images/184bb6679f7bb6f4e3709dffa007c5b8.png)

iPhone 4 的屏幕截图 ![在此处输入图像描述](../Images/241e8952655abca1abfc2535bdf840cf.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T19:33:50.550

原因是 iPhone 4 和 4S 有视网膜显示屏——分辨率是之前型号的 4 倍。Cocos2D 与 iOS 不同，它不使用逻辑屏幕尺寸而是物理屏幕尺寸——您需要在 iPhone 4 和 4S 上加载另一个分辨率高 4 倍的图像。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T19:43:35.160

如果尚未启用，您应该启用视网膜显示：

```
[director enableRetinaDisplay:YES]; 
```

并使用“-hd”后缀提供背景图像的视网膜版本。

背景图像.png (320 x 480 像素)

背景图像-hd.png (640 x 960 像素)

顺便说一句，您可以设置自己的后缀：

```
#define CC_RETINA_DISPLAY_FILENAME_SUFFIX @"-hd" 
```

# android - 尽管在任何地方都使用 RGBA_8888，但带有渐变的色带和伪影

> ID：11994129
> 
> 赞同：27
> 
> 时间：2012-08-16T19:28:06.393
> 
> 标签：android, colors, surfaceview, bit-depth

我知道色带是一个老问题，之前已经讨论过很多次，提供了各种解决方案（基本上归结为始终使用 32 位，或使用抖动）。事实上，不久前我[问过并随后回答了我自己](https://stackoverflow.com/questions/7774867/gradient-appears-banded-in-a-surfaceview-but-looks-very-smooth-in-a-normal-view)关于这个的 SO 问题。那时，我认为我在该问题的答案中提出的解决方案（适用`setFormat(PixelFormat.RGBA_8888)`于a 的情况下`Window`也适用于`Holder`a `SurfaceView`）已经解决了我的应用程序中的问题。至少该解决方案使渐变在我当时开发的设备（很可能是 Android 2.2）上看起来非常漂亮。

我现在正在使用 HTC One X (Android 4.0) 和 Asus Nexus 7 (Android 4.1) 进行开发。我试图做的是对 a 的整个区域应用灰色渐变`SurfaceView`。即使我应该确保包含`Window`和`Holder`配置为 32 位颜色，但我得到了可怕的条带伪影。事实上，在 Nexus 7 上，**我什至可以看到工件在移动**。这不仅发生在`SurfaceView`当然连续绘制的情况下，而且发生在`View`我为测试目的而添加的法线中，以绘制完全相同的渐变，这本来会绘制一次。这些伪影存在并且似乎四处移动的方式当然看起来非常糟糕，*实际上就像观看信号不佳的模拟电视一样*。这俩`View`并`SurfaceView`展示完全相同的文物，它们一起移动。

我的意图是始终使用 32 位，而不是使用抖动。我的印象是`Window`早在 Android 4.0 之前默认是 32 位的。通过应用`RGBA_8888`，`SurfaceView`我本来希望一切都是 32 位的，因此避免了任何伪影。

我确实注意到关于 SO 的其他一些问题，人们观察到`RGBA_8888`在 4.0 / 4.1 平台上似乎不再有效。

这是我的 Nexus 7 的屏幕截图，`View`顶部为法线，`SurfaceView`下方为法线，两者都将相同的渐变应用于`Canvas`. 当然，它不会像查看显示器时那样显示伪影，因此显示此屏幕抓取可能毫无意义。我想强调的是，在 Nexus 的屏幕上，条带确实看起来很糟糕。**编辑：**事实上，屏幕截图根本没有显示*工件*。我在 Nexus 7 上看到的伪影不是统一的条带；它本质上看起来是随机的。

![在此处输入图像描述](../Images/ca83c0e51c059d9bd219b9e99289a9c0.png)

`Activity`用于创建上述测试的测试：

```
import android.app.Activity;
import android.content.Context;
import android.graphics.Canvas;
import android.graphics.LinearGradient;
import android.graphics.Paint;
import android.graphics.PixelFormat;
import android.graphics.Shader;
import android.os.Bundle;
import android.os.Handler;
import android.view.SurfaceHolder;
import android.view.SurfaceView;
import android.view.View;
import android.view.WindowManager;
import android.view.SurfaceHolder.Callback;
import android.widget.LinearLayout;

public class GradientTest extends Activity {

    @Override
    public void onAttachedToWindow() {
        super.onAttachedToWindow();
        getWindow().setFormat(PixelFormat.RGBA_8888);
    }

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);      
        WindowManager.LayoutParams lp = new WindowManager.LayoutParams();
        lp.copyFrom(getWindow().getAttributes());
        lp.format = PixelFormat.RGBA_8888;
        getWindow().setAttributes(lp);     
        LinearLayout ll = new LinearLayout(this);
        LinearLayout.LayoutParams params = new LinearLayout.LayoutParams(500,500);
        params.setMargins(20, 0, 0, 0);
        ll.addView(new GradientView(this), params);    
        ll.addView(new GradientSurfaceView(this), params);
        ll.setOrientation(LinearLayout.VERTICAL);
        setContentView(ll);
    }

    public class GradientView extends View {

        public GradientView(Context context) {
            super(context);     
        }

        @Override
        protected void onDraw(Canvas canvas) {

            Paint paint = new Paint();
            paint.setStyle(Paint.Style.FILL);
            paint.setAntiAlias(false);
            paint.setFilterBitmap(false);
            paint.setDither(false); 
            Shader shader = new LinearGradient(
                    0,
                    0,
                    0,
                    500,
                    //new int[]{0xffafafaf, 0xff414141},
                    new int[]{0xff333333, 0xff555555},
                    null,

                    Shader.TileMode.CLAMP
                    );

            paint.setShader(shader);    
            canvas.drawRect(0,0,500,500, paint);
        }       
    }

    public class GradientSurfaceView extends SurfaceView implements Callback {

        public GradientSurfaceView(Context context) {
            super(context);

            getHolder().setFormat(PixelFormat.RGBA_8888); // Ensure no banding on gradients 
            SurfaceHolder holder = getHolder();
            holder.addCallback(this);    
        }

        Paint paint;
        private GraphThread thread;

        @Override
        public void surfaceCreated(SurfaceHolder holder) {
            holder.setFormat(PixelFormat.RGBA_8888); // Ensure no banding on gradients    

            paint = new Paint();
            paint.setStyle(Paint.Style.FILL);
            paint.setAntiAlias(false);
            paint.setFilterBitmap(false);
            paint.setDither(false); 

            Shader shader = new LinearGradient(
                    0,
                    0,
                    0,
                    500,
                    //new int[]{0xffafafaf, 0xff414141},
                    new int[]{0xff333333, 0xff555555},
                    null,
                    Shader.TileMode.CLAMP
                    );

            paint.setShader(shader);  

            thread = new GraphThread(holder, new Handler() );
            thread.setName("GradientSurfaceView_thread");
            thread.start();
        }

        class GraphThread extends Thread {

            /** Handle to the surface manager object we interact with */
            private SurfaceHolder mSurfaceHolder;   

            public GraphThread(SurfaceHolder holder, Handler handler) {
                mSurfaceHolder = holder;
                holder.setFormat(PixelFormat.RGBA_8888); // Ensure no banding on gradients  
            }

            @Override
            public void run() {

                Canvas c = null;

                while (true) {

                    try {
                        c = mSurfaceHolder.lockCanvas();

                        synchronized (mSurfaceHolder) {

                            if (c != null){

                                c.drawRect(0,0,500,500, paint);

                            }
                        }                                 
                    } 

                    finally {
                        if (c != null) {
                            mSurfaceHolder.unlockCanvasAndPost(c);
                        }
                    }
                }
            }    

        }

        @Override
        public void surfaceChanged(SurfaceHolder holder, int format, int width,
                int height) {

        }

        @Override
        public void surfaceDestroyed(SurfaceHolder holder) {

        }
    }

} 
```

我从 Google Play 安装了一个名为 Display Tester 的应用程序。此应用程序可用于在屏幕上创建测试梯度。虽然它的渐变看起来并不完美，但它们似乎比我能够实现的要好一些，这让我想知道是否可以采取进一步措施来防止条带化。

我注意到的另一件事是 Display Tester 应用程序报告我的 Nexus 屏幕是 32 位的。

有关信息，我明确启用硬件加速。我的 SDK 级别是：

```
 <uses-sdk android:minSdkVersion="8" android:targetSdkVersion="15"></uses-sdk> 
```

我注意到的另一件事是，`Activity`我理解为 Holo 的一个功能的默认渐变背景也是非常带状的。这也根本没有显示在屏幕截图中。而且，我还注意到我的 Nexus 7 上的背景条带短暂移动，这与我的两个`Views`. 如果我使用默认的 'empty' 创建一个全新的 Android 项目，`Activity`我`Activity`的 Nexus 和 HTC One X 上都会显示令人讨厌的带状渐变背景。这正常吗？`Activity`我知道如果启用硬件加速，这个黑色/紫色渐变默认背景是应该有的。好吧，不管是否启用了硬件加速，我都看到了同样令人讨厌的带状`Activity`背景渐变。这甚至发生在我的空测试项目中，其目标 SDK 为 15。为了澄清，我启用或禁用硬件加速的方式是显式使用`android:hardwareAccelerated="true"`and `android:hardwareAccelerated="false"`。

我不确定我对 Holo 黑色/紫色`Activity`渐变背景的观察是否与我的主要问题有关，但它似乎确实相关。奇怪的是它看起来质量如此差（即带状）并且无论是否打开硬件加速看起来都一样。所以，第二个问题是：当你有一个`Activity`默认的 Holo 渐变背景，并且对于硬件加速被明确启用然后禁用的每种情况，这个渐变背景 (a) 是否存在并且 (b) 看起来非常平滑？我会在一个单独的问题中问这个问题，但同样，它似乎是相关的。

**所以，总而言之：**`SurfaceView`我遇到的基本问题是，在我的 Nexus 7 上似乎根本无法将渐变背景应用于 a 。这不仅仅是条带问题（如果它只是那）; 实际上，每次抽签时，条带本质上都是随机的。这意味着`SurfaceView`不断重绘的 a 最终会有一个移动的、模糊的背景。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-10T14:53:46.730

只是用一个答案来结束这个问题，我得出的结论是 Nexus 7 只是有一些硬件/固件问题，这意味着它在渲染渐变方面完全不适应。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-05-12T09:47:29.440

您是否尝试过为表面视图本身设置像素格式？

```
 final SurfaceHolder holder = getHolder();
    holder.setFormat(PixelFormat.RGBA_8888); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T07:07:45.083

如果您发现在 ICS 及更高版本中设置像素格式没有任何效果，则很可能是由于硬件加速将始终呈现为原生像素格式。大多数时候应该只是 ARGB_8888。确保您还设置了活动的窗口像素格式，而不仅仅是 SurfaceView 上的像素格式。

您可以通过关闭加速来轻松验证是否是这种情况。您提到您对此进行了测试，但没有提及您是如何做到的。设置目标 sdk 级别并不是最明确的方法。

在我的脑海中，软件渲染在 HoneyComb (3.0) 中默认切换为 ARGB_8888，但您需要再次明确设置它以正确支持旧设备，而这不是默认设置。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-22T17:49:14.830

你为什么要设置假油漆上的抖动。我建议激活抖动

```
paint.setDither(true); 
```

Android doc 明确表示它将降低您的渲染：

> 设置或清除 DITHER_FLAG 位抖动会影响比设备精度更高的颜色如何被下采样。没有抖动通常更快，但精度更高的颜色会被截断（例如 8888 -> 565）。抖动尝试分配此过程中固有的错误，以减少视觉伪影。

您也可以尝试将 FLAG_DITHER 添加到窗口中：

```
window.setFormat(PixelFormat.RGBA_8888);
window.setFlags(WindowManager.LayoutParams.FLAG_DITHER, WindowManager.LayoutParams.FLAG_DITHER); 
```

# html - 正确使用条件注释

> ID：11994132
> 
> 赞同：2
> 
> 时间：2012-08-16T19:28:32.757
> 
> 标签：html, css, conditional-comments

我想知道，在使用条件注释时，正确的方法是什么（注意结束 div 标签）

这样，两个条件 div 都有一个关闭 div

```
<!--[if IE]>
<div id="IEdiv">
<![endif]-->

<!--[if !IE]><!-->
<div id="AllOtherDiv">
<!--<![endif]-->

  <div>The Content</div>
</div> 
```

或者

这样，每个条件 div 都有一个关闭 div，并重复相同的 html

```
<!--[if IE]>
<div id="IEdiv">
<div>The Content</div>
</div> 
<![endif]-->

<!--[if !IE]><!-->
<div id="AllOtherDiv">
<!--<![endif]-->
<div>The Content</div>        
</div> 
```

注意：您可能想知道如果内部 HTML 相同，为什么我不只使用条件样式表，但我在条件 div 上使用内联样式（我必须）并且 IE 的内联样式不同（这是必要的，因为 IE 很烂所以对它的 css 支持不好......）

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T19:32:14.310

从技术上讲，这两者都没有对错，但是如果在浏览器之间重复内容，那么重复内容似乎是一种浪费。只需像在第一个示例中那样对开始标记进行条件化。HTML 注释旨在允许这种技术。

[顺便说一句， HTML5 Boilerplate](http://html5boilerplate.com)恰好使用`<html>`开始标记来执行此操作，除了类和稍微不同的条件注释，但只要您正确定位浏览器，您就可以使用任何您想要的属性：

```
<!--[if lt IE 7]> <html lang="en-us" class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>    <html lang="en-us" class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>    <html lang="en-us" class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html lang="en-us" class="no-js"> <!--<![endif]--> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T19:34:05.810

```
<!--[if IE]>
<div id="IEdiv">
<![endif]-->

<!--[if !IE]><!-->
<div id="AllOtherDiv">
<!--<![endif]-->

  <div>The Content</div>
</div> 
```

是正确的方法，因为您在许多网站上都看到了这一点：

```
<!--[if IE9]>
<html class="ie9">
<![endif]-->

<!--[if IE8]>
<html class="ie8">
<![endif]-->

<!--[if lte IE7]>
<html class="ie7">
<![endif]-->

<!--[if !IE]><!-->
<html>
<!--<![endif]-->

content....

</html> 
```

# php - 为查询准备用户定义的搜索词

> ID：11994134
> 
> 赞同：7
> 
> 时间：2012-08-16T19:28:40.273
> 
> 标签：php, mysql, escaping, sql-injection, user-input

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T15:08:29.627

Appart 从你提到的[mysql_real_escape_string()](http://php.net/manual/en/function.mysql-real-escape-string.php)函数应该可以很好地清除 SQL 注入。

您只需要使用适当的转义函数正确转义任何用户输入，如果您将其描绘为处理此用户输入的链式处理块，您将知道按哪个顺序（从最后到第一个）以及要转义/取消转义的内容以及何时，并且就确保输入干净而言，您应该没问题（验证是一个不同的问题）。

而且，您似乎已经知道， PDO 上的[quote()](http://www.php.net/manual/en/pdo.quote.php)或[Mysqli](http://www.php.net/manual/en/book.mysqli.php) [prepare()](http://www.php.net/manual/en/mysqli.prepare.php)是一种更好的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T15:03:56.357

```
function clean($str) {
    $str = @trim($str);
    if(get_magic_quotes_gpc()) {
        $str = stripslashes($str);
    }
    return mysql_real_escape_string($str);
} 
```

然后：

```
$word = clean($_POST['whatever post']); 
```

然后修剪词和你的好去。这个 php 函数的作用是获取所有文字并将它们转换为字符串，因此没有人可以说删除您的数据库等

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T11:30:14.027

试试这个使用[mysql_real_escape_string()](http://php.net/manual/en/function.mysql-real-escape-string.php)

```
$word = '2*3%5_1^0';

$query = 'SELECT * FROM TABLE_NAME WHERE field REGEXP "(.*)[[:<:]]'.mysql_real_escape_string($word).'[[:>:]](.*)" '; 
```

# asp.net - LinqPad Query to Visual Studio - 如何使用嵌套查询填充视图模型

> ID：11994137
> 
> 赞同：0
> 
> 时间：2012-08-16T19:28:53.620
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, linq, entity-framework

这是对先前问题的跟进。

我想填充一个 ViewModel，它有 3 个属性和一个 Occ 类列表（它也有 3 个属性。

```
public class RatesViewModel
{
    public string TypeName { get; set; }
    public long TypeID { get; set; }
    public int TypeCount { get; set; }
    public virtual IQueryable<Occ> Occs { get; set; }
}

public class Occ
{
    public string occ { get; set; }
    public decimal ratetocharge { get; set; }
    public int numOfOcc { get; set; }
    public virtual RatesViewModel RatesViewModel { get; set; }
} 
```

当我在 LinqPad 中运行以下 Linq 查询时：

```
var rooms = tblRoom
    .GroupBy(p => p.tblType)
    .Select(g => new
        {
        TypeName = g.Key.type_name,
        TypeID = g.Key.type_id,
        TypeCount = g.Count(),
          Occs = rates.Where(rt => rt.type_id == g.Key.type_id && 
          (
            (rt.type_id == g.Key.type_id)
          ))
          .GroupBy(rt => rt.occ)
          .Select(proj => new 
                       {
                          occ = proj.Key,
                          ratetocharge = proj.Sum(s => s.rate),
                           numOfOcc = proj.Count()
                       })
        });

        rooms.Dump(); 
```

...和以前一样，它正确返回了我正在寻找的数据模型：

![第一张桌子](../Images/f621b87204c596e2309cec14324eb95b.png)

...当我点击 Occs 时，它会深入到 Occs 类： ![第二张桌子](../Images/de4ed52f36cca867e81ed2ff60edb4ba.png)

LinqPad 中的完整视图是： ![完整结果](../Images/59911c638e186daec08f3ca061a87af1.png)

我在 Visual Studio 中的查询是：

```
 var rooms = dbr.Rooms
                .GroupBy(p => p.RoomTypes).Select(g => new RatesViewModel
                {
                    TypeName = g.Key.type_name,
                    TypeID = g.Key.type_id,
                    TypeCount = g.Count()
                    ,
                  Occs = db.Rates.Where(rt => rt.type_id == g.Key.type_id && 
                       (
                        (rt.type_id == g.Key.type_id)
                       ))
                      .GroupBy(rt => rt.occ)
                      .Select(proj => new Occ
                       {
                          occ = proj.Key,
                          ratetocharge = proj.Sum(s => s.rate),
                           numOfOcc = proj.Count()
                       })
                })
                .ToList(); 
```

但是，在运行此程序时，出现错误：

**指定的 LINQ 表达式包含对与不同上下文关联的查询的引用。**

我想我理解错误 - 但我不确定如何将查询分成 2 个单独的查询，然后再次将这些查询结果连接在一起以获得我的原始结果集。

我的模型类是：

```
public class Rates
{
    public int id { get; set; }
    public long type_id { get; set; }
    public DateTime ratedate { get; set; }
    public decimal rate { get; set; }
    public string occ { get; set; }
    public List<RoomType> Type { get; set; }
}

public class Rental
    {
        [Key]
        public long rental_id { get; set; }
        public long room_id { get; set; }
        public DateTime check_in { get; set; }
        public DateTime check_out { get; set; }
        public virtual Room Room { get; set; }
}

public class Room
{
    [Key]
    public long room_id { get; set; }
    public long type_id { get; set; }
    public virtual RoomType RoomTypes { get; set; }
    public virtual ICollection<Rental> Rentals { get; set; }
}

public class RoomType
{
    [Key]
    public long type_id { get; set; }
    public string type_name { get; set; }
    public IQueryable<Rates> Rates { get; set; }
    public virtual ICollection<Room> Room { get; set; }
} 
```

任何人都可以帮助查看我的查询或模型，因此它适用于一个查询，或者告诉我如何将查询分成两个，然后组合结果集？

谢谢，

标记

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T14:30:30.317

> apitest.Models.RoomContext' 不包含“Rates”的定义......

（您对 hydr 回答的评论）

好了，你去吧：不仅有两个不同的上下文*实例*，还有两个不同的上下文*类*。我怀疑您的 linqpad 查询直接针对数据库连接，这意味着它使用了一个 linq-to-sql `DataContext`（动态创建）。

您需要在查询中使用一个上下文类（及其一个实例）。并在 Linqpad 中连接到它，以确保您测试与 Visual Studio 相同的查询提供程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T20:48:48.930

dbr 和 db 似乎是同一上下文的两个不同实例。但在一个查询中，您应该只使用一个上下文。所以我建议如下：

```
Occs = dbr.Rates.Where(rt => rt.type_id == g.Key.type_id && .... 
```

如果这没有帮助，您可以引用初始化上下文的行吗？

# python - 从字符串中获取后如何在 paramiko 中包含私钥？

> ID：11994139
> 
> 赞同：7
> 
> 时间：2012-08-16T19:28:57.880
> 
> 标签：python, django, ssh, paramiko, ssh-keys

我正在使用 paramiko，我已经生成了我的私钥并尝试了它，这很好。现在我正在使用基于 Django 的应用程序，我已经在数据库中复制了私钥。

我将我的私钥保存`charField`在 Django 模型中。我在以下代码中遇到问题：

```
host = "192.154.34.54"
username = "lovestone"
port = 25
pkey = "------" # I saved my key in this string
ssh = paramiko.SSHClient()
ssh.set_missing_host_key_policy(paramiko.AutoAddPolicy())
ssh.connect(server, username=username, port=port, pkey=?) 
```

在这种情况下我该怎么办？`SSH.connect`当我将它存储在数据库中时，我应该如何传递私钥`string`？

## 更新

即使我不能使用 IO，即从数据库中获取密钥并将其写入文件，然后使用保存的文件对象并传入，`from_private_key(cls, file_obj, password=None)` `enter code here`因为这是基于 Web 的应用程序，它不是通用密钥。每个用户都有自己的私钥。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2015-01-01T12:44:11.307

如果您无法将私钥保存到文件中，这将是使用[StringIO](http://docs.python.org/library/stringio.html)的主要原因： StringIO 接受一个字符串并将其转换为类似文件的对象，但没有任何内容写入文件系统。当您只有一个字符串时，它允许您传递类似文件的对象：即完全像这样的情况。

```
import paramiko, StringIO

key_string = "------" # I saved my key in this string
not_really_a_file = StringIO.StringIO(key_string)
private_key = paramiko.RSAKey.from_private_key(not_really_a_file)

not_really_a_file.close() 
```

这对我有用，你应该能够连接到该对象：

```
client = paramiko.SSHClient()
client.set_missing_key_policy(paramiko.AutoAddPolicy())
client.connect(host="example.com", username="root", pkey=private_key) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-16T21:12:18.327

您可以使用[StringIO](http://docs.python.org/library/stringio.html)使用存储的私钥和[PKey](http://www.lag.net/paramiko/docs/paramiko.PKey-class.html)的类方法[from_private_key](http://www.lag.net/paramiko/docs/paramiko.PKey-class.html#from_private_key)创建类似文件的对象，因此您将创建[PKey](http://www.lag.net/paramiko/docs/paramiko.PKey-class.html)实例并将其传递给[connect](http://www.lag.net/paramiko/docs/paramiko.SSHClient-class.html#connect)方法。

# javascript - 如何使用 Javascript 在 xml 文件中以纯文本形式获取属性值？

> ID：11994140
> 
> 赞同：2
> 
> 时间：2012-08-16T19:28:59.360
> 
> 标签：javascript, ajax, xml-parsing

我在外部托管了以下 xml 文件

```
<rsp stat="ok">
<feed id="" uri="">
<entry date="2012-08-15" circulation="154" hits="538" downloads="0" reach="30"/>
</feed>
</rsp> 
```

如何使用JavaScript导入xml文档并获取“entry”标签中“circulation”属性的值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T19:37:50.617

您可以通过 Jquery ajax GET 请求获取 xml 文件并像这样解析它：

```
$.ajax({
    type: "GET",
    url: "your_xml_file.xml",
    dataType: "xml",
    success: function(xml) {
        $(xml).find('entry').each(function(){
            var circulation = $(this).attr("circulation");
            // Do whatever you want to do with circulation
        });
    }
}); 
```

不要忘记，如果 xml 中有多个条目标签，这将读取这些条目的所有流通属性，因此您应该知道要处理多少流通。

如果你只想取第一个条目，你可以使用这个：

```
$.ajax({
    type: "GET",
    url: "your_xml_file.xml",
    dataType: "xml",
    success: function(xml) {
        var circulation = $(xml).find('entry').first().attr("circulation");
    }
}); 
```

这是我写这篇文章的资源：

[http://api.jquery.com/first/](http://api.jquery.com/first/)

[http://think2loud.com/224-reading-xml-with-jquery/](http://think2loud.com/224-reading-xml-with-jquery/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T19:36:36.993

这是一个例子：

```
 if (window.XMLHttpRequest) {
      xhttp=new XMLHttpRequest();
    } else {
      xhttp=new ActiveXObject("Microsoft.XMLHTTP");
    }
    xhttp.open("GET","the name of your xml document.xml",false);
    xhttp.send();
    xmlDoc=xhttp.responseXML;
    var circulation = xmlDoc.getElementsByTagName("entry")[0].getAttribute('circulation'); 
```

# iphone - 打开 GL ES Retina 显示设置

> ID：11994142
> 
> 赞同：1
> 
> 时间：2012-08-16T19:29:08.950
> 
> 标签：iphone, opengl-es, retina-display

我正在尝试将 OpenGL 项目正确渲染到 iphone 视网膜显示器，但我似乎遇到了一些困难。我已经为设备设置了内容比例因子，但现在无法创建帧缓冲区。

这一切都在 EAGLView int createFramebuffer 方法的子类中完成。

这是我的设置：

glGenFramebuffersOES(1, &viewFramebuffer); glGenRenderbuffersOES(1, &viewRenderbuffer);

```
glBindFramebufferOES(GL_FRAMEBUFFER_OES, viewFramebuffer);
glBindRenderbufferOES(GL_RENDERBUFFER_OES, viewRenderbuffer);

self.contentScaleFactor = [[UIScreen mainScreen] scale];
[context renderbufferStorage:GL_RENDERBUFFER_OES fromDrawable:(CAEAGLLayer*)self.layer];
glFramebufferRenderbufferOES(GL_FRAMEBUFFER_OES, GL_COLOR_ATTACHMENT0_OES, GL_RENDERBUFFER_OES, viewRenderbuffer);

glGetRenderbufferParameterivOES(GL_RENDERBUFFER_OES, GL_RENDERBUFFER_WIDTH_OES, &backingWidth);
glGetRenderbufferParameterivOES(GL_RENDERBUFFER_OES, GL_RENDERBUFFER_HEIGHT_OES, &backingHeight);//Depth
glGenRenderbuffersOES(1, &depthRenderbuffer);
glBindRenderbufferOES(GL_RENDERBUFFER_OES, depthRenderbuffer);
glRenderbufferStorageOES(GL_RENDERBUFFER_OES, GL_DEPTH_COMPONENT16_OES, backingWidth, backingHeight);
glFramebufferRenderbufferOES(GL_FRAMEBUFFER_OES, GL_DEPTH_ATTACHMENT_OES, GL_RENDERBUFFER_OES, depthRenderbuffer);

glEnable(GL_DEPTH_TEST);
glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);
glEnable(GL_BLEND);

NSLog(@"scale Factor: %f",self.contentScaleFactor); 
```

比例因子报告正确，但显示不会渲染，缓冲区创建失败。我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-04T14:05:52.847

我遇到了同样的问题。[正如我在此](https://stackoverflow.com/a/19183188/1130270)答案中所述，您只需将帧大小乘以屏幕比例即可。

# iphone - 发布本地通知

> ID：11994143
> 
> 赞同：2
> 
> 时间：2012-08-16T19:29:24.103
> 
> 标签：iphone, ios, cocoa-touch, uilocalnotification, nsnotificationcenter

我们一次可以发布的通知数量是否有任何限制。当应用程序进入前台时，我们会发布 2 种不同类型的通知。这些通知的处理发生在主线程以外的线程中。当我们让设备休眠一段时间然后唤醒并启动应用程序时，我们看到很少有崩溃。它在通知观察者处理程序之一上崩溃。

任何线索可能是什么原因？

# python - 基于类的视图的实例变量是否持久？

> ID：11994145
> 
> 赞同：6
> 
> 时间：2012-08-16T19:29:31.600
> 
> 标签：python, django, django-class-based-views, django-1.4

我刚刚开始在 django 中使用基于类的视图。但是有一个问题让我很困惑。我使用带有多线程开发服务器的 django 1.4.1 运行了以下代码片段。

```
class TestView(TemplateView):
    template_name = 'test.html'
    count = 0
    mylist = [1, ]

    def get(self, request, *args, **kwargs):
        self.count += 1
        self.mylist.append(self.mylist[-1] +1)
        context = self.get_context_data(**kwargs)
        return self.render_to_response(context)

    def get_context_data(self, **kwargs):
        context = super(TestView, self).get_context_data(**kwargs)
        context['count'] = self.count
        context['mylist'] = self.mylist
        return context 
```

模板只输出上下文变量 count 和 mylist。当这个视图被调用最多 5 次时，输出将如下所示：

```
count: 1
mylist: [1, 2, 3, 4, 5, ] 
```

现在我很困惑。django 文档说，每个请求都有自己的单独的类实例。

那么如何将 mylist 扩展到多个请求呢？为什么计数变量没有增加？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T20:01:26.057

如果您需要在多个请求中可用的内容，则需要将其添加到会话中。ivar 不适合那样做。为了线程安全，该`as_view`方法每次都返回一个全新的类实例，它不受同一类的任何其他实例上发生的任何其他事情的影响。这是*设计*使然，如果不是这样，您将遇到很多问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T19:35:38.537

列表是可变的。整数是不可变的

您可以附加到列表中，它仍然是您班级的相同参考。但是当你这样做时`self.count += 1`，你每次都在创建一个新的 int 对象，它成为该实例的范围。该值从不影响类。

例如，如果您像这样设置它：

```
count = [0]

def get(self):
    self.count[0] += 1 
```

您会发现实例之间的计数会增加，因为您正在修改列表的成员，而不是每次都替换该对象。并不是说我推荐那个容器。只是一个例子。

您可以通过执行以下操作直接专门修改该类：

```
count = 0

def get(self):
    self.__class__.count += 1 
```

这将每次替换类级别的 int 对象。

但是我会非常小心地尝试在这样的线程之间保留类上的数据。它不是线程安全的。只读数据并没有真正的问题，但是从一堆不同的线程中更改它可能会出现问题。如果您将数据存储在数据库中会更好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T19:53:07.067

在每个请求上，都会创建一个视图并重新调用，而无需了解先前的视图。要在多个视图中保留一些信息，您需要将其放入持久存储中，在 Django 中，如果您需要长期存储，这通常意味着数据库，或者用于短期持久性的会话。

此外，几乎不需要覆盖`get`(and `post`)；您在那里所做的一切都可以在该`get_context_data`方法中完成。

# javascript - 如何避免在jquery中创建重复的对话框

> ID：11994146
> 
> 赞同：0
> 
> 时间：2012-08-16T19:29:31.413
> 
> 标签：javascript, jquery

在我的页脚页面中

```
 Link 1 , Link 2  , Link 3 
```

单击这些链接中的任何一个都将打开一个包含数据内容和页脚文件的对话框。因此，对话框将如下所示：

```
 Data 
       Link 1 , Link 2 , Link 3 
```

当我点击对话框中的一个链接时，它会打开另一个对话框，所以这个逻辑进入了一个无限循环。

有没有办法避免这个对话框的重复？

开启功能：

```
$(function() {

    $('#dialog').dialog('close');   
    // Trying it here but not sure if this is the right place  to do 
   // I want to close all dialog boxes before opening one 

    $( "#dialog" ).dialog({
        modal:true,
        height:600,
        width:600,
        my: "center",
        at: "center",
        of:window,
        resizable:false,
        closeOnEscape:false,
        open:function (event, ui) {
                 $('#dialog').load('/contact.jsp');
        }
    });

    $( "#dialog" ).dialog("option", "title", url);
}); 
```

还在考虑我是否将 .close 放在正确的位置开始？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T19:31:33.740

假设您有一个动态创建这些东西的函数，因此是循环。如果是这样，避免重复的解决方案是为对话框提供一个对其自身唯一的类名，并且在任何创建之前，使用 jquery 调用删除具有该类名的任何元素。

[这是有关.remove()](http://api.jquery.com/remove/)的更多信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T19:39:55.723

向通过您的链接调用的页面添加 GET 参数，例如`mypage.php?dialog=true`

在您的页脚中，在显示链接之前检查此参数是否存在：

```
<?php if(!isset($_REQUEST['dialog'])) : ?>
HTML code to display your link <a href="mypage.php?dialog=true">link</a>
<?php endif; ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T19:31:28.500

加载对话框时不要包含页脚文件。

# c# - 为什么空委托事件处理程序会导致 CA1061 警告？

> ID：11994147
> 
> 赞同：17
> 
> 时间：2012-08-16T19:29:33.507
> 
> 标签：c#, code-analysis, visual-studio-2012, .net-4.5

**更新：**当代码分析选项“抑制生成代码的结果（仅限托管）”被关闭，并且规则集设置为“Microsoft 基本设计指南规则”时，会发生这种情况。

在 2013 年 4 月 26 日，Microsoft 确认这是一个错误，但不会在此版本或下一版本的 Visual Studio 中修复它。

[链接到 MS Connect 项目](http://connect.microsoft.com/VisualStudio/feedback/details/758403/certain-event-handlers-initialized-with-empty-delegates-triggering-ca1061-warning-in-code-analysis)

我们经常使用空委托初始化事件处理程序，以避免检查空值。例如：

```
public EventHandler SomeEvent = delegate {}; 
```

但是，自从开始在 Visual Studio 2012 (RTM) 中编译我们的一些代码后，我注意到派生类中的许多事件现在正在触发[CA1601：不要](http://msdn.microsoft.com/en-us/library/ms182143.aspx)在 Visual Studio 2012 的代码分析中隐藏基类方法警告。

这是一个将触发警告的示例：

```
using System;
using System.ComponentModel;

[assembly: CLSCompliant( true )]

namespace TestLibrary1
{
    public abstract class Class1
    {
        public event PropertyChangedEventHandler PropertyChanged = delegate {};
    }

    public class Class2 : Class1
    {
        // this will cause a CA1061 warning
        public event EventHandler SelectionCancelled = delegate { };
    }

    public class Class3 : Class1
    {
        // this will not cause a CA1061 warning
        public event EventHandler SelectionCancelled;
    }
} 
```

注意：在 VS2012 中，在 .NET 4.5 或 .NET 4.0 中编译时会触发警告。相同的示例不会触发 VS2010 中的警告。

抛开性能原因不谈，**有什么正当理由我们不应该用空委托初始化事件吗？**默认假设是它可能只是 Visual Studio 2012 分析中的一个怪癖。

以下是尚未访问 VS2012 的用户的代码分析结果：

> CA1061 不要隐藏基类方法 更改或删除“Class2.Class2()”，因为它隐藏了更具体的基类方法：“Class1.Class1()”。TestLibrary1 Class1.cs 14

**附录：**我发现代码分析中“Suppress results from generated code”选项被关闭了。

此外，我发现这似乎发生在基类型中的事件处理程序是两者时：

*   EventHandler 或 EventHandler 以外的委托 - 并且 -
*   基类和派生类中的事件都使用匿名方法或空委托（内联或构造函数）初始化。

可能的相关性：我们正在运行 Visual Studio 2012 RTM，它安装在候选版本之上。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T23:10:20.880

问题是 C# 编译器生成一个静态委托，用于初始化您的实例委托，该委托对 Class1 和 Class2 的命名相同。

`Class1.CS$<>9__CachedAnonymousMethodDelegate1`存在供 Class1 的构造函数用于初始化`PropertyCancelled`，而`Class2.CS$<>9__CachedAnonymousMethodDelegate1_`存在供 Class2 的构造函数用于初始化`SelectionCancelled`。

不幸的是，在决定如何为子类命名自动生成的“东西”时，C# 编译器不包含某种类型的父类自动生成的“东西”的记录。在 ILDasm 中破解此打开，问题立即变得明显。很高兴知道您找到了解决方法。考虑到由于不符合 C# 的命名，您无法从 C# 触摸静态委托，因此忽略该警告是完全合理的。

# ajax - 使用服务器端脚本 (coldfusion) 从 jquery 移动应用程序插入到 SQL Server 数据库

> ID：11994153
> 
> 赞同：0
> 
> 时间：2012-08-16T19:29:59.080
> 
> 标签：ajax, jquery, jquery-mobile

我已经构建了一个 jQuery 移动应用程序，它通过 JSON 和一个与数据库接口的服务器端脚本 (ColdFusion CFC) 从外部 SQL 服务器数据库获取其内容。此应用程序已使用 PhoneGap 打包为本机应用程序。我需要使 jQuery 移动应用程序能够写回外部 SQL 服务器数据库。

我是移动开发新手，但使用 ColdFusion 进行了几年的服务器端开发。我猜测最好的方法是让移动应用程序将提交的表单元素的结果发送到服务器端脚本进行处理。我不希望本机应用程序将此“作为网页”发送，而是留在应用程序中执行此操作（我假设通过 AJax）。

我的服务器端脚本将用 ColdFusion 编写并处理输入卫生和数据库交互......我只需要弄清楚从我的 jQuery 应用程序提交到服务器端脚本的最佳方式是什么，但要在我的内部进行本机应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T20:20:37.243

我几乎在做同样的事情。服务器端`Coldfuison8/MySQL`，前端`Jquery Mobile`(, `requireJS`) 与所有表单提交通过 AJAX 路由以避免重新加载页面。

我在我的 中使用了一个通用的表单提交器`controller.js`，它看起来像这样：

```
var ajaxFormSubmit = 
     function ( form, service, formdata, targetUrl, successHandler, dataHandler, errorHandler ){
     $.ajax({
        async: false,
        type: "post",
        url: service,
        data: formdata,
        dataType: "json",
        success: function( objResponse ){
            if (objResponse.SUCCESS == true ){
                // alert("success!");
                // this passes the response object to the success handler 
                // in case data needs to be ... handled.
                dataHandler == "yes" ? successHandler( objResponse ) : successHandler();
            } else {
                // alert("AJAX failed!");
                if ( errorHandler != "" ){
                    errorHandler();
                    }
                }
            },
        error: function (XMLHttpRequest, textStatus, errorThrown) { 
            //alert("something else failed");
            showErrors( [["server-request-error", "server_error"]], XMLHttpRequest, textStatus, errorThrown );
            }
        });
    } 
```

我将结果作为响应对象返回，其中将包含`Success = True/false`, `data`（如果有的话）和`Error = error message`.

函数调用将如下所示：

```
// the form 
var form = $(this).closest('form'),
    // trigger for cfcase inside my cfc
    switcher = form.find('input[name="form_submitted"]').val(),
    // which cfc to call
    service = "../cfcs/form_handler_abc.cfc",
    // the method in your cfc you are calling (validation/commit to database)
    method = "process",
    returnformat = "JSON",
    // not using 
    targetUrl = "",
    // serialized form plus any value you need to pass along
    formdata = form.serialize()+"&method="+method+"&returnformat="+returnformat,
    // specific error routine to run
    errorHandler = function(){
        // in my case, reset the whole form
        cleanUp( $('form:jqmData(search="regular")'), "results" )   
        },
    // inside my success handler I'm switching depending on submitted form
    // `response` will be the AJAX object.response = whatever you send back from the server
    successHandler = function( response )  {
        switch (switcher) {

            // form A - this is for a search form handling the results
            case "getProducts":
                // clean up
                $('.ajaxContainer, .pagination').addClass('fade out').remove();
                // AJAX data received
                var makeUp = response.DATA;
                // don't forget to trigger create to enhance all JQM elements you are sending
                $('.results').append( makeUp ).trigger('create');
                // redraw - will fire JQM updatelayout
                $(window).trigger('dimensionchange');
                // will set bindings on new elements
                bindResults( $('.results').closest('div:jqmData(role="page")') );
                break;

            case "A": 
                // do sth else
                break;

            case "B": 
                // do sth else
                break;          
                }
            };
        // now pass all of the above to the ajaxFormsubmit
        ajaxFormSubmit( form, service, formdata, targetUrl, successHandler, handleData, errorHandler); 
```

我有许多 CFC，每个 CFC 都有一个主表单`cfswitch`和`cfcase`每个提交的表单。我已经使用[这个](http://www.bennadel.com/blog/1557-Object-Oriented-Form-Helpers-And-Reusing-Form-Validation-On-The-Client.htm)示例构建了我的后端。花了一段时间才开始，但现在它或多或少地运行得很顺利。

如果您对上述内容有任何疑问，请告诉我。

# actionscript-3 - flash as3 netStream 视频。播放视频时如何向前/向后跳过 3 秒？

> ID：11994155
> 
> 赞同：0
> 
> 时间：2012-08-16T19:30:11.260
> 
> 标签：actionscript-3, flash, video, time, skip

我已将 NetStream 附加到 Flash 电影中的视频控件。我无法理解如何向前或向后跳跃。

```
var ns:NetStream = new NetStream(nc); 
ns.addEventListener(AsyncErrorEvent.ASYNC_ERROR, asyncErrorHandler); 
ns.play("Video.flv"); 
vid.attachNetStream(ns); 
```

我需要类似的东西

```
btnSkip.addEventListener(MouseEvent.CLICK, playClicked);
function playClicked(e:MouseEvent):void {
ns.pause();
//ns.step(1000)
//ns.seek(1);
ns.resume();
} 
```

ns.step() - 不起作用，我不知道为什么。ns.seek - 工作正常，但我不知道位置在哪里，没有 ns.position 和 ns.fps 属性可以添加 ns.seek(ns.position+(ns.fps*3)) 跳过 3 秒向前。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T19:43:49.463

其实很简单。在您的 netStream 上使用 seek 方法。要获取位置，请使用 time 方法，然后添加您需要的偏移量

前进 3 秒：

```
ns.seek(ns.time + 3); 
```

向后 3 秒：

```
ns.seek(ns.time - 3); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T19:39:48.817

这篇文章可能会对您有所帮助：[Netstream and step() or seek()?](https://stackoverflow.com/questions/9365479/netstream-and-step-or-seek) .

你想玩什么？如果它只是一个静态视频，您可能能够使用常规视频对象，那么您将能够使用 playheadTime 属性（顺便说一下，这可能不是很准确 - 取决于关键帧的数量）。

祝你好运！

# jquery - 将段落中的数据（n no's）发送到div下的服务器

> ID：11994158
> 
> 赞同：0
> 
> 时间：2012-08-16T19:30:21.327
> 
> 标签：jquery

我在 ite 内的段落中的 div 中有多个值 如何将其发送到服务器？

```
<tr>
  <td><font face="Arial">Answers</font></td>
  <td>
     <input type="text" name="T2" size="20" id="answer">
     <input type="button" value="+" name="B3" id="btnAnswer" onclick="addAnswers()">
     (click on this button will create another field so you can type content
     for the other answer, this can be done using jquery)<br>
     <div id="answers"></div>
     <input type="checkbox" name="c" value="1">Allow this answer to be free text
  </td>
</tr> 
```

在 js 文件中：

```
 function addAnswersnew(answer){
    $('#answers').append('<p>' + $('#answer').val() + '</p>'); 
} 
```

现在，当我向这个 div 添加 4 个答案时，说 ans1、ans2、ans3 和 ans4。如何将其发送到服务器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T21:28:16.063

Maybe you can do this:

```
function getAnswersnew(){
   var answer = new Array();
   $(selector).each(function(){
     answer($(this).val());
   });
} 
```

'selector' can be a css class for all answer, you can now get all the answer stored in the array and send to the server.

# php - 提交后刷新表单

> ID：11994159
> 
> 赞同：0
> 
> 时间：2012-08-16T19:30:22.443
> 
> 标签：php, mysql, html

下面的表格可以包含文本字段、下拉列表和选择框的不同元素，允许用户更新他的个人资料。更新 MySQL 字段的过程是在表单提交后完成的。

```
<form method="post">
My Name: <input name="myname" type="text" value="<?php echo $_SESSION['SESS_MY_NAME']; ?>" /><br />
My Email: <input name="email" type="text" value="<?php echo $_SESSION['SESS_EMAIL']; ?>" /><br />
    <input type="submit" name="Submit" value="Update" />

<?php
if (isset($_POST['Submit'])) {
    // MySQL update
    ;
    ;
    ;
    $result=mysql_query($sql);
  }

// if successfully updated, make form refresh. 
  if($result){
    ;
    ;
    ;
  }
?> 
</form> 
```

我只想刷新表单，这样用户将留在同一页面并看到他所做的更改（即我需要在代码中的注释下放置什么“如果成功更新，请刷新表单”？ ）。

我不能使用`header("location: samepage.php");`，因为我在中间和之前有太多的 HTML 代码。

感谢任何帮助，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T19:33:01.440

将`isset($_POST['submit'])`支票移到顶部。

您当前（预期）的流程如下：

1.  从 DB/Session/etc 中检索表单数据。
2.  显示为 HTML
3.  用户提交表单
4.  重复步骤 1/2
5.  将数据写入数据库
6.  强制刷新
7.  再次重复 1/2

如果将此检查移到顶部，则该过程将更改为：

1.  从数据库中检索表单数据
2.  显示为 HTML
3.  用户提交表单
4.  将数据写入数据库
5.  重复 1/2（它现在将检索更新的信息并正确显示）。

这是您可以做到的最简单的方法。它没有考虑发布/重定向/获取或更新会话，因此不需要多次读取数据库等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T19:34:50.997

为什么不使用 jQuery AJAX 提交并验证表单，然后在选择的 div 元素中输出结果。更多关于[nettuts+的信息](http://net.tutsplus.com/tutorials/javascript-ajax/submit-a-form-without-page-refresh-using-jquery/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-19T09:13:09.220

很有帮助。多哇。

值得庆幸的是，经过一番激烈的谷歌搜索后，我能够自己解决这个问题，因为似乎没有其他人有答案。对于任何想要完成同样事情的人，您所要做的就是将以下代码添加到 CF7 表单配置的“附加设置”部分：

**on_sent_ok: "位置 = ' [http://domain.com/contact](http://domain.com/contact) ';** "

只需将 URL 替换为您的表单页面的 URL，然后提交表单时它会自动刷新回该页面！

# r - 将自定义文本插入到 ggplot2

> ID：11994160
> 
> 赞同：7
> 
> 时间：2012-08-16T19:30:24.167
> 
> 标签：r, ggplot2

我有一个 ggplot 图，我想将自定义字符串插入 0 以下作为“内部”，将 0 以上作为“违反”。

我正在这样做：

```
ggplot(z, aes(Date, Breach1/60, group=Jobs, label=c("Within SLA", "Breached SLA"))) + 
 geom_line(size=1) + 
 theme_bw() + ylab("Hours") + xlab("Date") + opts(title="Jobs") + 
 geom_hline(yintercept=0, color="red", size=2) + geom_text(hjust=0, vjust=3) 
```

这似乎把文字放在了所有地方。我喜欢在零上方放置一个文本，在零值下方放置一个文本。有任何想法吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-08-16T19:39:29.740

你在注释之后：

```
ggplot(z, aes(Date, Breach1/60, group=Jobs)) + 
 geom_line(size=1) + 
 theme_bw() + ylab("Hours") + xlab("Date") + opts(title="Jobs") + 
 geom_hline(yintercept=0, color="red", size=2) + 
 annotate("text", label = "Within SLA", x = 1, y = 2) +
 annotate("text", label = "Breached", x = 1, y = -2) 
```

# c++ - .net 中的静态链接是不可能的吗？你能用 C++/CLI 写一个包装器吗？

> ID：11994168
> 
> 赞同：5
> 
> 时间：2012-08-16T19:31:05.173
> 
> 标签：c++, .net, dll, reference, nvidia

我正在开发一个需要加载 Nvidia 的 API NvApi.lib 的 VB.Net 项目。但是在 Nvidia 网站上它说：

> “NvAPI 不能动态链接到应用程序。您必须创建到库的静态链接，然后调用 NvAPI_Initialize()，它会动态加载 nvapi.dll。”

我的理解是.Net 不支持静态链接有没有办法包装 NvApi.lib 文件，以便我可以从 Visual Basic 调用它？PS 我在[这里](http://nvapidotnet.codeplex.com/releases/view/24314)看到了一个名为 NvApi.net 的项目，这让我相信这是可能的，但该项目似乎不完整，并于 2009 年被放弃，我需要的功能于 2010 年添加到 API 中。

编辑：

我能够让它工作。我在我的解决方案中添加了一个新的 Visual c++ CLR 类项目。在将 nvapi.lib 文件链接为依赖项并将 nvapi.h 文件添加到项目后，我能够为我需要的方法编写一个小包装器。下面是我使用的代码。它只允许我打开和关闭 3D 立体声。

```
#include "nvapi.h"

public ref class NvApiWrapper
{   
public: 
static bool NvApiWrapper_Initialize(){
    if (NvAPI_Initialize() == 0){
        return true;
    } else {
        return false;
    }
}

static bool NvApiWrapper_Stereo_Enable(){
    if (NvAPI_Stereo_Enable() == 0){
        return true;
    } else {
        return false;
    }
}

static bool NvApiWrapper_Stereo_Disable(){
    if (NvAPI_Stereo_Disable() == 0){
        return true;
    } else {
        return false;
    }
}
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T19:34:14.047

您可以创建一个 C++/CLI dll，它静态链接到 lib，并将其包装起来。如果您随后从您的 dll 中公开了一些适当的 CLI 接口，那么您应该能够从 VB.net 调用这些接口。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T19:35:39.447

您需要创建一个静态链接到 .lib 的 c++/cli 包装器，然后公开 .net 类等。这正是 c++/cli 最方便的地方。

[本教程](http://www.codeguru.com/cpp/cpp/cpp_managed/interop/article.php/c6867/Consuming-Unmanaged-C-Class-Libraries-from-NET-Clients.htm)有一个很好的演练（基于旧的托管 c++ 语法，但概念是相同的）

# javascript - 如何在 Silverstripe CMS 中使用 javascript？

> ID：11994174
> 
> 赞同：3
> 
> 时间：2012-08-16T19:31:43.923
> 
> 标签：javascript, silverstripe

我正在使用 SilverStripe 3.0 CMS，我需要在 CMS 中包含 Google Map。

我正在按照[这个步骤](http://www.silverstripe.org/general-questions/show/14596#post294608)，除了有点旧，[官方文档](http://doc.silverstripe.org/framework/en/topics/javascript)在当前版本的 SilverStripe 中使用相同的方法（至少它似乎是当前版本的文档）。

问题出在这部分代码中：

```
Behaviour.register({ 
    "#Form_EditForm" : { 
        initialize : function() { 
            this.observeMethod("PageLoaded", this.adminPageHandler); 
            this.adminPageHandler(); 
        }, 
        adminPageHandler : function() { 
            initialize(); 
        } 
    } 
}); 
```

首先，行为没有定义。我需要手动包含框架中的 behavior.js 文件。但是现在，我得到一个类型错误：

```
this.observeMethod is not a function 
```

当在 SilverStripe CMS 中打开页面编辑器时，有人可以给我一个提示，以便调用 javascript 函数吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-17T10:49:29.160

您提到的 'Behaviour.register' 调用已被明确弃用，并且在核心代码中不再可用，因此文档需要在此处进行更新。

不幸的是，我找不到记录的方法来替换这种行为，但现在以下应该对你有用，基于你第一手提到的论坛帖子中的方法：

找到此处添加的“initGoogleMaps.js”脚本：

```
function getCMSFields() { 
Requirements::javascript('mysite/javascript/initGoogleMaps.js');  
... 
```

在此脚本中，删除`Behaviour.register...`块，并将`initialize`函数移到 document.ready*之外*（或简单地删除 document.ready 部分），因此`initialize`全局可用（您可以考虑重命名它）。

然后，在里面添加以下内容`getCMSFields`：

```
$fields->addFieldToTab('Root.Content', new LiteralField('js', '<script>initialize();</script>')); 
```

这将确保`initialize`每次在 cms 中呈现页面的“编辑视图”时调用该函数。

hth

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-08-28T01:19:37.137

正如本所说，

```
LeftAndMain::require_javascript('mysite/javascript/initGoogleMaps.js') 
```

比“在需要时包含它”更可靠。为什么？因为 Silverstripe 使用 Ajax，所以最好在第一次加载时加载任何 javascript 或 css，这样当您在 ajax 驱动的环境中转到 CMS 内的不同模型管理区域时，它们就可以准备好。在开始时不加载会导致不一致，并且当您不硬加载该管理区域时，您的 js、css 文件将不会被加载。

来自文档：[http](http://doc.silverstripe.org/framework/en/reference/requirements) ://doc.silverstripe.org/framework/en/reference/requirements和[http://api.silverstripe.org/3.0/class-LeftAndMain.html](http://api.silverstripe.org/3.0/class-LeftAndMain.html)

> 整个“在需要时包含它”这件事显示了 CMS 等领域的一些弱点，其中 Ajax 用于加载应用程序的大块，这可能需要包含更多的 CSS 和 JavaScript。**在这个阶段，唯一的解决方法是确保您可能需要的所有内容都包含在第一个页面加载中。**
> 
> 一种想法是提及应该包含在 Ajax 响应的标头中的 CSS 和 JavaScript，以便客户端可以在完成 Ajax 请求时加载这些脚本和样式表。这可以非常干净地编码，但为了获得最佳结果，我们希望通过我们自己的更改来扩展prototype.js 到他们的Ajax 系统，以便每个脚本都对此提供一致的支持。

顺便说一句，此行的理想位置是自定义模块或 mysite 中的 _config.php，具体取决于您的需要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T00:14:55.163

```
LeftAndMain::require_javascript('mysite/javascript/initGoogleMaps.js') 
```

would work much better

# c# - 使用动态属性搜索 LINQ 中的 Where 子句

> ID：11994176
> 
> 赞同：6
> 
> 时间：2012-08-16T19:31:49.153
> 
> 标签：c#, asp.net, linq, entity-framework, linq-to-entities

我基本上是在尝试构建一个查询，我不知道为什么微软在 Entity Framework 和 LINQ 中让这变得如此困难。我有各种参数字符串。因此，如果您看到一个变量，假设它是从某个地方传入的字符串。

```
 users = this.entities.tableUsers
                .Where(searchfield+" LIKE %@0%", search)
                .OrderBy(x => x.GetType().GetProperty(order_by).GetValue(x, null).ToString())
                .Skip(Convert.ToInt32(limit_begin))
                .Take(Convert.ToInt32(limit_end))
                .ToList(); 
```

我的问题是在 LINQ 的“Where()”函数中放什么。

我想用字符串“searchfield”搜索一个字段，其值为 .contains()“search”。

不知道为什么 Visual Studio 不会让我轻松做到这一点。

我也试过这个，没有运气：

```
.Where(x => x.GetType().GetProperty(searchfield).GetValue(x, null).ToList().Contains(search)) 
```

注意：我不想安装任何新的库，这对于现代语言来说应该非常容易和简单。我不介意查询是否返回所有行并在之后使用 .Contains() 进行搜索。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-16T20:01:13.487

这不是微不足道的，但我相信这是可以做到的。以下内容未经测试。[代码是从这里](https://stackoverflow.com/questions/278684/how-do-i-create-an-expression-tree-to-represent-string-containsterm-in-c)借来的。

在某处创建一个辅助方法

```
public static Expression<Func<T, bool>> GetContainsExpression<T>(string propertyName, string containsValue)
{
    var parameterExp = Expression.Parameter(typeof(T), "type");
    var propertyExp = Expression.Property(parameterExp, propertyName);
    MethodInfo method = typeof(string).GetMethod("Contains", new[] { typeof(string) });
    var someValue = Expression.Constant(propertyValue, typeof(string));
    var containsMethodExp = Expression.Call(propertyExp, method, someValue);

    return Expression.Lambda<Func<T, bool>>(containsMethodExp, parameterExp);
}

public static Expression<Func<T, TKey>> GetPropertyExpression<T, TKey>(string propertyName)
{
    var parameterExp = Expression.Parameter(typeof(T), "type");
    var exp = Expression.Property(parameterExp, propertyName);
    return Expression.Lambda<Func<T, TKey>>(exp, parameterExp);
} 
```

像这样使用它

```
users = this.entities.tableUsers
                     .Where(GetContainsExpression<User>(searchfield, search))
                     .OrderBy(GetPropertyExpression<User, string>(searchfield))
                     ... 
```

**更新**

作为替代方案，您可以创建扩展方法以提供更简洁的语法。在某处的静态类中创建以下方法：

```
 public static IQueryable<T> WhereStringContains<T>(this IQueryable<T> query, string propertyName, string contains)
    {
        var parameter = Expression.Parameter(typeof(T), "type");
        var propertyExpression = Expression.Property(parameter, propertyName);
        MethodInfo method = typeof(string).GetMethod("Contains", new[] { typeof(string) });
        var someValue = Expression.Constant(contains, typeof(string));
        var containsExpression = Expression.Call(propertyExpression, method, someValue);

        return query.Where(Expression.Lambda<Func<T, bool>>(containsExpression, parameter));
    }

    public static IOrderedQueryable<T> OrderBy<T>(this IQueryable<T> query, string propertyName)
    {
        var propertyType = typeof(T).GetProperty(propertyName).PropertyType;
        var parameter = Expression.Parameter(typeof(T), "type");
        var propertyExpression = Expression.Property(parameter, propertyName);
        var lambda = Expression.Lambda(propertyExpression, new[] { parameter });

        return typeof(Queryable).GetMethods()
                                .Where(m => m.Name == "OrderBy" && m.GetParameters().Length == 2)
                                .Single()
                                .MakeGenericMethod(new[] { typeof(T), propertyType })
                                .Invoke(null, new object[] { query, lambda }) as IOrderedQueryable<T>;
    }

    public static IOrderedQueryable<T> OrderByDescending<T>(this IQueryable<T> query, string propertyName)
    {
        var propertyType = typeof(T).GetProperty(propertyName).PropertyType;
        var parameter = Expression.Parameter(typeof(T), "type");
        var propertyExpression = Expression.Property(parameter, propertyName);
        var lambda = Expression.Lambda(propertyExpression, new[] { parameter });

        return typeof(Queryable).GetMethods()
                                .Where(m => m.Name == "OrderByDescending" && m.GetParameters().Length == 2)
                                .Single()
                                .MakeGenericMethod(new[] { typeof(T), propertyType })
                                .Invoke(null, new object[] { query, lambda }) as IOrderedQueryable<T>;
    } 
```

然后你可以这样称呼他们：

```
var users = this.entities.tableUsers.WhereStringContains(searchField, search)
                                    .OrderBy(searchField); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-16T19:43:54.330

> 对于现代语言来说，这应该非常容易和简单

不，如果它违背了这种语言范式，它不应该。LINQ 和实体框架（以及任何其他体面的 ORM）正是为了避免您想要完成的事情而制作的：非类型化和非编译器可验证的查询。所以基本上你是在迫使方钉进入圆孔。

您仍然可以查看[Dynamic LINQ](http://weblogs.asp.net/scottgu/archive/2008/01/07/dynamic-linq-part-1-using-the-linq-dynamic-query-library.aspx)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-16T19:51:37.527

您必须构建一个表达式树才能传递给该`Where`方法。这是我撒谎的一些代码的松散改编：

```
string searchfield, value; // Your inputs
var param = Expression.Parameter(typeof(User), "user");

return Expression.Lambda<Func<T, bool>>(
    Expression.Call(
        Expression.Property(
            param,
            typeof(User).GetProperty(searchfield)),
        typeof(string).GetMethod("Contains"),
        Expression.Constant(value)),
    param); 
```

这将生成一个适当的表达式以用作`Where`.

编辑：仅供参考，结果表达式将类似于`user => user.Foo.Contains(bar)`.

编辑：要排序，像这样（从我的 DynamicOrderList 类中提取）：

```
private IQueryable<T> OrderQuery<T>(IQueryable<T> query, OrderParameter orderBy)
{
    string orderMethodName = orderBy.Direction == SortDirection.Ascending ? "OrderBy" : "OrderByDescending";
    Type t = typeof(T);

    var param = Expression.Parameter(t, "user");
    var property = t.GetProperty(orderBy.Attribute);

    return query.Provider.CreateQuery<T>(
        Expression.Call(
            typeof(Queryable),
            orderMethodName,
            new Type[] { t, typeof(string) },
            query.Expression,
            Expression.Quote(
                Expression.Lambda(
                    Expression.Property(param, property),
                    param))
        ));
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T19:46:46.187

我对您关于此的其他问题的回答：

[在实体框架中创建动态 linq 排序和搜索顺序语句时](https://stackoverflow.com/questions/11992717/when-creating-dynamic-linq-sorting-and-searching-order-statements-in-entity-fram/11993005#11993005)

# c++ - Qt/C++ 不将 QGraphicview 显示为 QWidget

> ID：11994180
> 
> 赞同：0
> 
> 时间：2012-08-16T19:32:07.007
> 
> 标签：c++, qt, draw, qgraphicsview, qwidget

我的项目包括笛卡尔平面上几何图形之间的操作。我将包括一个必须在每次操作后更新的图形。

这就是来源：

[http://pastebin.com/s5Fu9dHJ](http://pastebin.com/s5Fu9dHJ)

我创建了包装器“disegna”（：public QWidget），因为我正在发送以将所有内容显示为单独的小部件（我有一个用于虚拟键盘的小部件，另一个用于 Qlineedits 等）并且我需要一个 QWidget 对象可以是与 view-> addWidget (QWidget,int,int) 一起使用，因为我不能直接传递 QMainWindow 对象。

程序运行没有错误，但没有绘制“hello world”（并且没有为 istance QGraphicView 创建空白）。

我在哪里做错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T19:39:52.010

改变

```
QGraphicsView view(&scene);
view.show(); 
```

至

```
QGraphicsView * view = new QGraphicsView(&scene);
view->show(); 
```

你现在拥有它的方式，实例`QGraphicView`在堆栈上分配并在`disegna`构造函数执行后立即被销毁，这就是你看不到它的原因。

不要忘记释放内存。

# jquery - jqgrid自动竞争更改另一列

> ID：11994181
> 
> 赞同：0
> 
> 时间：2012-08-16T19:32:12.600
> 
> 标签：jquery, jqgrid

我有一列带有自动完成功能的列，用于内联编辑。那里没问题。问题是自动完成有一个需要设置的底层 ID。我的想法是在网格中有一个隐藏的列，并使用自动完成的选择回调来设置 ID。回调中的一切看起来都很好。但是，当需要保存行时，该列是空的。任何想法是什么取消了行数据？

以下是相关代码：

```
{ name: 'fieldName', label: 'fieldLabel', index: 'fielindex', width: 300,
  sortable: true, editable: true, edittype : 'custom',                          
  editoptions: {
     custom_element : someAutoComplete_element,
     custom_value   : someAutoComplete_value
  }
},
{ name:'someID', index:'someID', width: 70, hidden: true, editable: true,
  editrules: {edithidden:false} 
},

function someAutoComplete_value(elem, op, value) {  
    if (op == "set") {
        $(elem).val(value);
      }
      return $(elem).val();
}

function someAutoComplete_element,(value, options) {
    var $ac = $('<input type="text"/>');
    $ac.autocomplete( {
        source: function(request, response) {
            $.ajax({
                  // Code to deal with fetching the autocomplete
                  });
               },
        select: function(event, ui) {
               var newId = ui.item.obj.id;

               var rowId = jQuery('#myTable').jqGrid('getGridParam','selrow');
               if (rowId) {
                  var rowData = jQuery('#myTable').getRowData(rowId);
                  rowData['someID'] = newId;
               }
             }
           }
         )
return $ac;
} 
```

谢谢，斯科特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T15:38:38.667

jqGrid setCell 从字面上将单元格设置为给定的值。如果给定的值不是 HTML，那么，当我们去保存该行时，数据不会被正确检索。我本来期望像 setCellData 这样的方法来做到这一点。相反，这是我为解决我的问题所做的。归根结底，我要做的就是记住所选字符串的 ID，以便我可以在保存时正确地将其保存在服务器端。

```
var newId = ui.item.obj.id;                  
var rowId = jQuery('#myTable').jqGrid('getGridParam','selrow');

if (rowId) {                      
   var rowData = jQuery('#myTable').getRowData(rowId);                      
   var newCellHTML = $(rowData['utteranceID']).attr("value", newId).get(0).outerHTML;                      
   $("#myTable").setCell(rowId, 'myColumnName',  newCellHTML);
} 
```

这真的感觉像一个黑客我错过了什么吗？

斯科特

# c# - 如何根据基于变量数组运行的 foreach 循环更新进度条？

> ID：11994183
> 
> 赞同：3
> 
> 时间：2012-08-16T19:32:17.553
> 
> 标签：c#, foreach, progress-bar

例子：

此时在我的代码中，进度条为 70：

```
pbUpload.Value = 70;

foreach (string file in finalFiles)
{
    //processes
    //processes
} 
```

finalFiles 具有可变长度。这意味着它没有固定的数字。所以基本上我需要先弄清楚数字，这很容易，但是我如何构建一个循环，它将进度条从 70 更新到 100（100 是最后一个“每个”元素）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T19:43:45.953

这更简单：

```
int count = finalFiles.Length;
int current = 0;
foreach (string file in finalFiles)
{
    current++;
    pbUpload.Value = current / count * 30 + 70;
} 
```

祝你好运！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T19:33:26.947

用于`BackgroundWorker`此。

```
public partial class Form1 : Form
{
   public Form1()
   {
       InitializeComponent();
       Shown += new EventHandler(Form1_Shown); 
       backgroundWorker1.WorkerReportsProgress = true;
       backgroundWorker1.DoWork += new DoWorkEventHandler(backgroundWorker1_DoWork);
       backgroundWorker1.ProgressChanged += 
       new ProgressChangedEventHandler(backgroundWorker1_ProgressChanged);
       pbUpload.Value = 70;
   }

   void Form1_Shown(object sender, EventArgs e)
   {
       backgroundWorker1.RunWorkerAsync();
   }

   int val = 0;

   void backgroundWorker1_DoWork(object sender, DoWorkEventArgs e)
   {
       val = (100 - pbUpload.Value) / finalFiles.Length;

       foreach (string file in finalFiles)
       {
           //Your processes
           backgroundWorker1.ReportProgress(pbUpload.Value + val);
       }
   }  

   void backgroundWorker1_ProgressChanged(object sender, ProgressChangedEventArgs e)
   {
        pbUpload.Value = e.ProgressPercentage;
   }
} 
```

# vba - 使用 Excel VBA 删除 SpecialType 空白单元格

> ID：11994187
> 
> 赞同：2
> 
> 时间：2012-08-16T19:32:37.433
> 
> 标签：vba, excel

这个脚本“有效”，但前提是我运行它两次。任何人都知道为什么会这样？处理特殊类型有点像噩梦，我不确定这只是我的问题还是已知的问题。在 Windows 7 上使用 Excel 2010。我尝试重复代码两次也无济于事。我试着把它放在一个直到我第一次执行时总是卡在一个永远循环中。我不确定为什么第二次执行它似乎有效

```
'Remove all Blank Cells

    On Error Resume Next
    For i = Cells.SpecialCells(xlCellTypeBlanks).Count To 1 Step -1
    Cells.SpecialCells(xlCellTypeBlanks).EntireRow.Delete
    Next i

  If Cells.SpecialCells(xlCellTypeBlanks).Count = 0 Then 
     ActiveWorkbook.Close (True) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T19:50:30.680

**编辑**：更新答案以显示删除“特殊单元格”范围如何不会重置工作表的`UsedRange`属性，以及如何导致问题。

尝试在工作表上多次运行此子程序，无论是否调用`Activesheet.UsedRange`注释掉...

```
Sub Tester()
    Dim rng As Range

    On Error Resume Next
    Set rng = ActiveSheet.Cells.SpecialCells(xlCellTypeBlanks)
    On Error GoTo 0

    If Not rng Is Nothing Then
        Debug.Print "have empty cells"
        rng.EntireRow.Delete
        ActiveSheet.UsedRange
    Else
        Debug.Print "no empty cells"
    End If

End Sub 
```

保存并重新打开似乎也重置了 UsedRange ......

**EDIT2**你应该非常小心地使用它！**即使该行中有非空白单元格，**它也会删除整行。对于某些类型的数据布局可以，但对于其他类型的数据布局则不行。在某些情况下，调用“删除”时，您可能还会看到错误“无法在重叠选择中使用该命令”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T19:50:53.183

我会说@TimWilliams 的答案更优雅，但你可以试试这个：

```
Sub Deletes()

Dim rng As Range
Set rng = ActiveSheet.UsedRange

' Check each cell in the range and if its value is empty, delete the row
For Each Cell In rng
  If Cell.Value = "" Then
    Cell.EntireRow.Delete
  End If
Next Cell

' Close
ActiveWorkbook.Close

End Sub 
```

# php - 如果该字段为空白，我如何不让它在我的 PHP 代码中循环？

> ID：11994188
> 
> 赞同：0
> 
> 时间：2012-08-16T19:32:41.037
> 
> 标签：php, wordpress, function

这是我得到的代码。

```
<?php
function category_image () {
    if (function_exists('z_taxonomy_image_url')) {
        foreach (get_the_category() as $cat) :
        ?>
            <a href="<?php echo get_category_link($cat->term_id); ?>" alt="<?php echo $cat->cat_name; ?>"><img src="<?php echo z_taxonomy_image_url($cat->term_id); ?>" /></a>
        <?
        endforeach;
    }
}
?> 
```

所以我想让**IF** `z_taxonomy_image_url`为空，不要运行代码。现在它正在显示图像是否有图像，因为该功能始终存在。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T20:01:42.153

只需`if(!z_taxonomy_image_url($cat->term_id)) continue;`在 echo 之前在代码中添加一个。像这样的东西：

```
<?php
function category_image () {
    if (function_exists('z_taxonomy_image_url')) {
        foreach (get_the_category() as $cat) :
        if(!z_taxonomy_image_url($cat->term_id)) continue;
        ?>
            <a href="<?php echo get_category_link($cat->term_id); ?>" alt="<?php echo $cat->cat_name; ?>"><img src="<?php echo z_taxonomy_image_url($cat->term_id); ?>" /></a>
        <?
        endforeach;
    }
}
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T19:49:55.580

这是我第一次尝试在这里帮助某人。:-) 如果你想检查函数“z_taxonomy_image_url()”是否返回一个空字符串，你可以按照我在这里的说明进行操作。您还可以使用 strlen() 函数来计算字符数。

我希望它有所帮助。:-)

```
<?
function category_image () {
    if (z_taxonomy_image_url() = "") {
        $output '';
        foreach (get_the_category() as $cat){
            $ouput += '<a href="'.get_category_link($cat->term_id).'" alt="'.$cat->cat_name.'"><img src="'.z_taxonomy_image_url($cat->term_id).'" /></a>';
        }
        echo $output;
    }
}
?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T19:40:50.197

您需要检查函数是否存在，并且如果应用它不会给出空白字符串 - 就像这样

```
<?php
function category_image () {
    if (function_exists('z_taxonomy_image_url') && trim(z_taxonomy_image_url($cat->term_id)) !="") {
        foreach (get_the_category() as $cat) :
        ?>
            <a href="<?php echo get_category_link($cat->term_id); ?>" alt="<?php echo $cat->cat_name; ?>"><img src="<?php echo z_taxonomy_image_url($cat->term_id); ?>" /></a>
        <?
        endforeach;
    }
}
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T19:39:06.337

据我所知，您只是在检查函数是否存在，您是要验证函数是否存在然后运行循环，还是您实际上想要运行“z_taxonomy_image_url”函数并根据结果函数提供启动循环？

# google-maps - API v3 标记未在 Chrome 中显示

> ID：11994192
> 
> 赞同：0
> 
> 时间：2012-08-16T19:33:07.120
> 
> 标签：google-maps, google-maps-api-3

我们有一个显示一系列或标记的 v3 地图，但是今天 (16/08/12) Chrome 和 Safari 已停止渲染除一个之外的所有内容，并且缩放功能现已失效。在 IE 和 FF 中一切都很好。

```
 function placeMarker(location)
    {
        // first remove all markers if there are any
        deleteOverlays();

        var marker_icon = new google.maps.MarkerImage("http://chart.apis.google.com/chart?chst=d_map_pin_icon&chld=info%7CFFFF00",
        new google.maps.Size(21, 34),
        new google.maps.Point(0,0),
        new google.maps.Point(6, 20));

        var marker = new google.maps.Marker({
            position: location,
            icon: marker_icon,
            map: map,
            draggable: true
        });

        // add marker in markers array
        markersArray.push(marker);

        $('#lat').val(location.lat().toFixed(6));
        $('#lon').val(location.lng().toFixed(6));
    }

    // Deletes all markers in the array by removing references to them
    function deleteOverlays()
    {
        if (markersArray) {
            for (i in markersArray) {
                markersArray[i].setMap(null);
            }
        markersArray.length = 0;
        }
    } 
```

你可以在这里看到输出：http: [//bit.ly/NqdSfq](http://bit.ly/NqdSfq)

查看源代码以查看完整的 API 文件内容。

这是定义标记后立即包含的 js 的最后一部分：

```
function getMarkerImage(iconColor)
    {
       return icons[iconColor];
    }

    var iconShadow = new google.maps.MarkerImage('',
      // The shadow image is larger in the horizontal dimension
      // while the position and offset are the same as for the main image.
      new google.maps.Size(20, 34),
      new google.maps.Point(0,0),
      new google.maps.Point(6, 20));
      // Shapes define the clickable region of the icon.
      // The type defines an HTML &lt;area&gt; element 'poly' which
      // traces out a polygon as a series of X,Y points. The final
      // coordinate closes the poly by connecting to the first
      // coordinate.
    var iconShape = {
      coord: [4,0,0,4,0,7,3,11,4,19,7,19,8,11,11,7,11,4,7,0],
      type: 'poly'
    };

    var infowindow = new google.maps.InfoWindow(
    {
        size: new google.maps.Size(250,50)
    });

    function createMarker(map, latlng, label, html, color, zindex) {
        var contentString = '<b>'+label+'</b><br>'+html;
        var marker = new google.maps.Marker({
            position: latlng,
            map: map,
            shadow: iconShadow,
            icon: getMarkerImage(color),
            optimized: false,
            //shape: iconShape,
            title: label,
            zIndex: zindex
            });

        google.maps.event.addListener(marker, 'click', function(e) {
            infowindow.setContent(contentString);
            infowindow.open(map,marker);

            window.location.hash = map.getZoom() + '_' + e.latLng.lat() + '_' + e.latLng.lng();
        });
    }

    function setMarkers(map, incidentsdata) {
      // Add markers to the map
      for (var i = 0; i < incidentsdata.length; i++) {
        var incident = incidentsdata[i];
        var myLatLng = new google.maps.LatLng(incident[2], incident[3]);
        var marker = createMarker(map,myLatLng,incident[0],incident[1],incident[4],incident[5]);
      }
    }

    /**
     * Data for the markers consisting of a name, a LatLng and a zIndex for
     * the order in which these markers should display on top of each
     * other.
     */

       <?php
      $used_coordinates = array(); // do not add the same coordinates more than once
      $incidents_js = array();

      foreach ($incidents as $i):
        $more_link = '<a href="'.site_url('client/home/view/'.$i->id).'">More about this incident</a>';

        // add source text
        $source_text = "{$i->source}";
        switch($i->source):
            case 'A';
                $source_text .= ': Verified';
            break;
            case 'B';
                $source_text .= ': Unverified';
            break;
        endswitch;

        // add location text
        $location_text = '';
        if($i->province_id > 0 AND !empty($i->province_name)):
            $location_text = "<tr><th><strong>Location:</strong></th><td>{$i->province_name}<td></tr>";
        endif;

        $incident_time = ($i->time) ? $i->time : ucwords($i->time_of_day);

        $window_text = '<div id="view-incident">
<table>
<tr><th><strong>Accuracy Descriptor:</strong></th><td>'.(($i->accuracy) ? $i->accuracy : 'Unknown').'<td></tr>
<tr><th><strong>Date:</strong></th><td>'.date("d/m/Y", strtotime($i->date)).'<td></tr>
<tr style="color:red;"><th><strong>Time:</strong></th><td>'.$incident_time.'<td></tr>'.$location_text.'
<tr><th><strong>Source:</strong></th><td>'.$source_text.'<td></tr>
<tr><th><strong>Military Grid Reference:<strong></th><td>'.lat_lon_to_mgrs($i->latitude, $i->longitude).'<td></tr>
<tr><th><strong>Latitude:</strong></th><td>'.$i->latitude.'<td></tr>
<tr><th><strong>Longitude:</strong></th><td>'.$i->longitude.'<td></tr>
<tr><th><strong>Country:</strong></th><td>'.$i->country_name.'<td></tr>
<tr><th><strong>Type: </strong></th><td>'.$i->type_name.'</td></tr>
<tr><th><strong>Impact</strong></th><td>'.$i->impact_name.'</td></tr>
<tr><th><strong>People Involved:</strong></th><td>'.$i->peopleqty_name.'<td></tr>
</table>
</div>'.$more_link;

        $window_text = str_replace("\n", '', $window_text);

        $incident_mgrs = lat_lon_to_mgrs($i->latitude, $i->longitude);

        // set the marker image to a colour with the letter or custom icon
        switch($i->type_balloon_colour):
            case 'police';
            case 'threat';
                $incident_image = "{$i->type_balloon_colour}";
            break;
            default:
                $incident_image = "{$i->type_balloon_colour}{$i->source}";
            break;
        endswitch;

        // if less than 24 hours old and is tier A or B use blinking icon
        if(($i->source == 'A' OR $i->source == 'B') AND strtotime($i->date) >= strtotime('-24 hours')):
            $incident_image .= 'blink';
        elseif(($i->source == 'A' OR $i->source == 'B') AND $i->type_id == 6 AND strtotime($i->date) >= strtotime('-48 hours')):
            $incident_image .= 'blink';
        endif;

        switch($i->source):
            case 'A';
                $zindex = 1004;
            break;
            case 'B';
                $zindex = 1003;
            break;
            case 'C';
                $zindex = 1002;
            break;
            case 'D';
                $zindex = 1001;
            break;
        endswitch;

        if(!empty($incident_mgrs) AND !empty($i->latitude) AND !empty($i->longitude) AND $i->latitude != '.' AND $i->longitude != '.'):
            if(!in_array($i->latitude . "," . $i->longitude, $used_coordinates)):
                $used_coordinates[] = $i->latitude . "," . $i->longitude;
                $incidents_js[] = "['', '".$window_text."', ".$i->latitude.", ".$i->longitude.", '$incident_image', $zindex]";
            endif;
        endif;
      endforeach;
      ?>

      var incidentslist = [<?=implode(",", $incidents_js)?>];
<?php endif;?>
</script> 
```

提前谢谢了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T19:45:27.437

您在页面 (3.3) 上指定了一个非常旧的 API 版本：

```
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false&v=3.3">
</script> 
```

v3.3 已经退役很久了。我相信新版本正在发布过程中，使您获得的版本从 3.7 移动到 3.8。

听起来您可能对 CANVAS 标记有疑问，解决方法是在标记属性中将[优化](https://developers.google.com/maps/documentation/javascript/reference#MarkerOptions)设置为 false。

# wcf - WCF 中的全局错误处理 - 但返回自定义消息

> ID：11994197
> 
> 赞同：1
> 
> 时间：2012-08-16T19:33:37.983
> 
> 标签：wcf, error-handling

我想在我的 WCF 应用程序中提供全局错误处理，并且我知道我可以实现我的 IErrorHandler，例如：

```
http://www.remondo.net/wcf-global-exception-handling-attribute-and-ierrorhandler/
http://www.codeproject.com/Articles/26320/WCF-Error-Handling-and-Fault-Conversion
http://www.haveyougotwoods.ca/2009/06/24/creating-a-global-error-handler-in-wcf 
```

但是，我真正想做的是“处理”异常，不仅仅是通过记录或抛出错误异常，而是通过将自定义消息传回给调用者。我们已经使用自定义消息来返回与业务相关的消息（如验证错误或警告）。

在非常粗略的伪代码中，我会在这样的 try-catch 块中执行此操作

```
public MyResponseDto CallMyService(MyRequestDto request)
{
        ... 
        try
            responseDto = blah blah blah
        catch (Exception ex)
            responseDto.ClientMessage.Description = ex.Messaeg
        finally    
           return responseDto;
} 
```

我的问题是 - 我怎样才能在我的全局处理程序中做到这一点？它将如何访问“ClientMessage”？

我的直觉是我需要使用属性然后反射来访问我的服务内部成员？？？但是如何将它分配回我的响应消息对象？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-24T08:37:30.180

仅仅晚了一年左右，但对于那些可能会发现你的问题的人......

IErrorHandler 接口中的 ProvideFault 方法的签名如下所示：

```
public void ProvideFault(Exception error, MessageVersion version, ref Message fault) 
```

最后一个参数是您要查找的参数。Message 类有一个带有很多重载的静态方法 CreateMessage()。我们这样使用它：

```
fault = Message.CreateMessage(version, "", new CustomErrorMessageDto("some error message"), new DataContractJsonSerializer(typeof(CustomErrorMessageDto))); 
```

这允许我们为客户端提供一个序列化为 Json 的自定义 DTO。（请注意，我们正在从我们的服务返回一个 Stream 对象，以便能够返回像 Json 这样的自定义格式。）

# python - 如何从 XML xpath 搜索生成的列表中的子字符串中去除字符？

> ID：11994198
> 
> 赞同：3
> 
> 时间：2012-08-16T19:33:40.720
> 
> 标签：python, xpath

这个问题是对前面一个问题的补充。如果您需要更多背景知识，可以在此处查看原始问题：

[使用从 lxml xpath 命令获得的数据填充 Python 列表](https://stackoverflow.com/questions/11962576/populating-python-list-using-data-obtained-from-lxml-xpath-command)。

我已将@ihor-kaharlichenko 的出色建议*（来自我的原始问题）*合并到修改后的代码中，在这里：

```
from lxml import etree as ET
from datetime import datetime

xmlDoc = ET.parse('http://192.168.1.198/Bench_read_scalar.xml')

response = xmlDoc.getroot()
tags = (
'address',
'status',
'flow',
'dp',
'inPressure',
'actVal',
'temp',
'valveOnPercent',
)

dmtVal = []

for dmt in response.iter('dmt'):
    val = [str(dmt.xpath('./%s/text()' % tag)) for tag in tags]
    val.insert(0, str(datetime.now())) #Add timestamp at beginning of each record
    dmtVal.append(val)

for item in dmtVal:
    str(item).strip('[')
    str(item).strip(']')
    str(item).strip('"') 
```

最后一个街区是我遇到问题的地方。我得到的数据`dmtVal`看起来像：

```
[['2012-08-16 12:38:45.152222', "['0x46']", "['0x32']", "['1.234']", "['5.678']", "['9.123']", "['4.567']", "['0x98']", "['0x97']"], ['2012-08-16 12:38:45.152519', "['0x47']", "['0x33']", "['8.901']", "['2.345']", "['6.789']", "['0.123']", "['0x96']", "['0x95']"]] 
```

但是，我真的希望数据看起来像这样：

```
[['2012-08-16 12:38:45.152222', '0x46', '0x32', '1.234', '5.678', '9.123', '4.567', '0x98', '0x97'], ['2012-08-16 12:38:45.152519', '0x47', '0x33', '8.901', '2.345', '6.789', '0.123', '0x96', '0x95']] 
```

我认为这是一个相当简单的字符串剥离工作，我在原始迭代中尝试了代码*（`dmtVal`最初填充的地方）*，但这不起作用，所以我在循环之外进行了剥离操作，如上所示，它是还是行不通。我在想我正在犯某种菜鸟错误，但找不到。欢迎大家提出意见！

* * *

感谢大家的及时和有用的回复。这是更正后的代码：

```
from lxml import etree as ET
from datetime import datetime

xmlDoc = ET.parse('http://192.168.1.198/Bench_read_scalar.xml')

print '...Starting to parse XML nodes'

response = xmlDoc.getroot()

tags = (
'address',
'status',
'flow',
'dp',
'inPressure',
'actVal',
'temp',
'valveOnPercent',
)

dmtVal = []

for dmt in response.iter('dmt'):
    val = [' '.join(dmt.xpath('./%s/text()' % tag)) for tag in tags]
    val.insert(0, str(datetime.now())) #Add timestamp at beginning of each record
    dmtVal.append(val) 
```

产生：

```
...Starting to parse XML nodes
[['2012-08-16 14:41:10.442776', '0x46', '0x32', '1.234', '5.678', '9.123', '4.567', '0x98', '0x97'], ['2012-08-16 14:41:10.443052', '0x47', '0x33', '8.901', '2.345', '6.789', '0.123', '0x96', '0x95']]
...Done 
```

谢谢大家！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T19:41:33.610

鉴于您当前的数据为`grps`

**解决方案 1 - ast.literal_eval**

```
import ast
grps = [['2012-08-16 12:38:45.152222', "['0x46']", "['0x32']", "['1.234']", "['5.678']", "['9.123']", "['4.567']", "['0x98']", "['0x97']"], ['2012-08-16 12:38:45.152519', "['0x47']", "['0x33']", "['8.901']", "['2.345']", "['6.789']", "['0.123']", "['0x96']", "['0x95']"]]
desired_output = [[grp[0]] + [ast.literal_eval(item)[0] for item in grp[1:]] for grp in grps]

print desired_output 
```

**输出**

```
[['2012-08-16 12:38:45.152222', '0x46', '0x32', '1.234', '5.678', '9.123', '4.567', '0x98', '0x97'], ['2012-08-16 12:38:45.152519', '0x47', '0x33', '8.901', '2.345', '6.789', '0.123', '0x96', '0x95']] 
```

**解释**

[ast.literal_eval](http://docs.python.org/library/ast.html#ast.literal_eval)是一种安全的方法`eval`。它仅适用于评估数据类型（字符串、数字、元组、列表、字典、布尔值和无）。在您的情况下，它会将 "['1.0']" 评估为长度为 1 的列表，例如`['1.0']`. 您可能想看一下，并确保您了解[列表推导](http://docs.python.org/tutorial/datastructures.html#list-comprehensions)。

另一种写法是：

```
desired_output = []
for grp in grps:  # loop through each group
    new_grp = grp[0]  # assign the first element (an array) to be our new_grp
    for item in grp[1:]  # loop over every item from index 1 to the end
        evaluated_item = ast.literal_eval(item)  # get the evaluated data
        new_grp.append(evaluated_item[0])  # append the item in the 1 item list to the new_grp
    desired_output.append(new_grp)  # append the new_grp to the desired_output list 
```

**解决方案 2 - 正则表达式**

```
import re
stripper = re.compile("[\[\]']")
grps = [['2012-08-16 12:38:45.152222', "['0x46']", "['0x32']", "['1.234']", "['5.678']", "['9.123']", "['4.567']", "['0x98']", "['0x97']"], ['2012-08-16 12:38:45.152519', "['0x47']", "['0x33']", "['8.901']", "['2.345']", "['6.789']", "['0.123']", "['0x96']", "['0x95']"]]
desired_output = [[grp[0]] + [ stripper.sub('', item) for item in grp[1:]] for grp in grps] 
```

您的解决方案的问题在于，在 for 循环中迭代的项目不是通过引用传递的，因此更改它们不会影响原始数据。

**解决方案 3 - 修复您的原始代码**

要修复您的解决方案，您将执行以下操作：

```
for i, grp in enumerate(dmtVal):  # loop over the inner lists
    for j, item in enumerate(grp):
        dmtVal[i][j] = item.strip('\]')
        dmtVal[i][j] = dmtVal[i][j].lstrip('\[')
        dmtVal[i][j] = dmtVal[i][j].strip("'") 
```

与其在每次剥离时分配 balue balue ，不如`dmtVal[i][j]`使用取消引用的 value `item`，对其进行操作，然后在最后分配回`dmtVal[i][j]`。

```
for i, grp in enumerate(dmtVal):  # loop over the inner lists
    for j, item in enumerate(grp):
        # Could intead be
        item = item.strip('\]')
        item = dmtVal[i][j].lstrip('\[')
        item = dmtVal[i][j].strip("'")
        dmtVal[i][j] = item 
```

或者更好的解决方案（恕我直言）：

```
for i, grp in enumerate(dmtVal):  # loop over the inner lists
    for j, item in enumerate(grp):
        dmtVal[i][j] = item.replace('[', '').replace(']', '').replace("'", '') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T19:59:41.607

这会做你需要它做的事情，但也许不是最好的方法：

```
new_dmt_val = []
for sublist in dmtVal:
    new_dmt_val.append([elem.strip('[\'').strip('\']') for elem in sublist]) 
```

试图使其可读，它可能在更少但更令人困惑的行中是可行的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T20:33:16.890

答案是：首先不要创建字符串。

您的问题出在这部分代码中：

```
for dmt in response.iter('dmt'):
    val = [str(dmt.xpath('./%s/text()' % tag)) for tag in tags] 
```

我猜你`str()`在这里尝试从`xpath()`返回的列表中提取字符串。
然而，这不是你得到的。`str()`只是给你一个列表的字符串表示。

你有几个选择去做你想做的事。
但是鉴于您正在解析 html，因此无法确定列表将包含多少个元素，您最好的选择可能是使用`''.join()`：

```
for dmt in response.iter('dmt'):
    val = [''.join(dmt.xpath('./%s/text()' % tag)) for tag in tags] 
```

编辑：如果您使用此代码，您将不需要最后一个循环。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-16T20:59:30.120

`string.strip`只去除前导和尾随字符。您可能想`string.replace`改用。另外，请注意，`string.strip`(and `string.replace`) 返回字符串的*副本*。

或者干脆使用`''.join()`代替`str`并完全放弃整个剥离业务：

```
val = [''.join(dmt.xpath('./%s/text()' % tag)) for tag in tags] 
```

作为旁注，您可能也想使用`datetime.isoformat`而不是`str`：

```
val.insert(0, datetime.now().isoformat()) #Add timestamp at beginning of each record 
```

查看`help(datetime)`更多选项

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-16T21:02:12.840

您原始帖子的字符串在哪里`xml`...（我认为这在某种程度上涵盖了两者...）

```
from lxml import etree
from datetime import datetime
from ast import literal_eval

tree = etree.fromstring(xml).getroottree()
dmts = []
for dmt in tree.iterfind('dmt'):
    to_add = {'datetime': datetime.now()}
    to_add.update( {n.tag:literal_eval(n.text) for n in dmt} )
    dmts.append(to_add) 
```

您仍然可以稍后显式订购节点 - 尽管我发现这种方法更清晰，因为您可以使用名称而不是索引（这完全取决于引入或删除节点是否应该是错误）

# internet-explorer - div 的内容在 Internet Explorer 中显示错误

> ID：11994201
> 
> 赞同：0
> 
> 时间：2012-08-16T19:33:53.440
> 
> 标签：internet-explorer, html, cross-browser

我正在为网站设计一个 v3 平台。我们几乎完成了，现在只是对跨浏览器发短信做最后的润色。一切正常，除了 IE。

我在 IE 9 中进行测试，当页面加载时，页面顶部应该有一个滑块。滑块设置为一个长的图像/描述文本块，jQuery 在页面上和页面外滑动。

滑块 div 工作正常，但 div 的**内容**奇怪地块显示在侧面。所以基本上我的 div 的内容没有出现在我的 div 中。

那么，IE 是否存在任何导致此问题的错误/怪癖。

示例代码：

```
<div id="cont">
  <div
    <img src="bar" />
    <a href="foo"></a>
  </div>
  <div>
    <img src="bar" />
    <a href="foo"></a>
  </div>
</div> 
```

CSS：

```
.cont {
position: relative;
display: block;
overflow: hidden;
}

.cont div{
display: block;
position: absolute;
left: 0px;
top: 0px;
width: 980px;
opacity: 1;
z-index: 5;
margin: 0;
padding: 0;
border: 0;
font-size: 100%;
font: inherit;
vertical-align: baseline;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T18:30:55.300

所以事实证明，在我最近询问的许多问题中，这仅仅是由于 Internet Explorer 无法计算超过 31 个样式表造成的。

因此，如果您有超过 31 个样式表，请小心。

# html - 将图像与文本对齐

> ID：11994206
> 
> 赞同：1
> 
> 时间：2012-08-16T19:34:15.737
> 
> 标签：html, css

我已将左侧金发男子的图片与右侧的文字对齐。

但我无法让拿着 X 光片的女孩与右侧的文字对齐（目前在她的下方）。

你怎么做到这一点？

[http://www.joaoalexandre.com/wordpressteste/clinica/corpo-clinico/](http://www.joaoalexandre.com/wordpressteste/clinica/corpo-clinico/)

```
<p style="float: left;">IMAGE OF BLOND GUY</p>

<p style="float: right;">HIS QUALIFICATIONS</p>

<p style="float: left;">IMAGE OF X-RAY GIRL</p>

<p style="float: right;">HER QUALIFICATIONS</p> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T19:55:45.480

这是一个工作示例：http: [//jsfiddle.net/5LqUB/](http://jsfiddle.net/5LqUB/)

这是您的代码，已修改：

```
<p style="float: left;">THE IMAGE</p>

<p style="float: right;">HIS QUALIFICATIONS</p>

<p style="clear:both ; float: left;">THE IMAGE</p>

<p style="float: right;">HER QUALIFICATIONS</p>​ 
```

看看我是如何添加`clear:both`到第三个的`<p></p>`？这迫使它下降到下一行，然后将第四行浮动到`<p></p>`它旁边。

`margin-bottom:20px`我还在第一段中添加到我的图像中，只是为了在第一行和第二行之间放置一些空间。

不过，在外部样式表中创建 CSS 类会更清晰，如下所示：

```
.clear { clear:both }
.left { float:left }
.right { float:right } 
```

然后让你的 HTML 看起来像这样：

```
<p class="left">THE IMAGE</p>

<p class="right">HIS QUALIFICATIONS</p>

<p class="clear left">THE IMAGE</p>

<p class="right">HER QUALIFICATIONS</p>​ 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T19:41:20.527

如果你愿意的话，你必须稍微改变一下结构

```
<style>
  .container{
    display:block;
    height:400px;
    min-height:400px;
  }

  .photo{
    float:left;
  }
</style>

<div class="container"> 
  <div class="photo">guy</div>
  <div class="text">guy_text</div>
</div>

<div class="container">
  <div class="photo">gal</div>
  <div class="text">gal_text</div>
</div> 
```

* * *

这也可以：

```
<style>
  .container{
    display:block;
    height:400px;
    min-height:400px;
  }

  .photo{
    float:left;
  }

  .text {
    margin-left:10px;
  }
</style>

<img class="photo" src="guy"/>
<div class="text"><p>guy_text</p></div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T19:44:43.520

感谢编辑...

我同意尼娜的观点。我肯定会修改您的标记以合并和控制 CSS，而不是内联样式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T20:04:30.747

通过为包含的 div 提供固定宽度，`298px`您将强制`<p>`之后的元素`img`放在它下面，因为块元素（如 p 和 div）以这种方式运行。`width`首先，从此 div中删除属性和值：

```
<div style="width: 289px" class="wp-caption aligncenter" id="attachment_498"><a href="http://pt.drpedrocoelho.com/wp-content/uploads/2012/08/dalilacosta.jpg"><img width="279" height="400" class="size-full wp-image-498" title="dalilacosta" alt="Dr.ª Dalila Costa" src="http://pt.drpedrocoelho.com/wp-content/uploads/2012/08/dalilacosta.jpg"></a><p class="wp-caption-text">Dr.ª Dalila Costa &ndash; Dental House Oeiras</p></div> 
```

`img`接下来，将您的第一个和旁边的'包装`p`在一个单独的 div 中。在此之后，您应该以类似的方式添加下一个 img，因此您将拥有如下内容：

```
<div class="container">
   <img class="floatLeft" src="p1.jpg" />
   <p>some text here</p>
   <p>some text here</p>
</div>
<div class="container">
   <img class="floatLeft" src="p2.jpg" />
   <p>some text here</p>
   <p>some text here</p>
</div>

<style>
/* ClearFix */
.container:after { content:"."; line-height:0; visibility:hidden; clear:both; height:0; display:block; }

.container p { float:left; } 
.floatLeft { float:left; }
</style> 
```

这只是一个例子，但想法应该很清楚。

# android - android-maven-plugin 和库项目

> ID：11994210
> 
> 赞同：3
> 
> 时间：2012-08-16T19:34:48.590
> 
> 标签：android, maven

这是我的图书馆项目中的 pom.xml。我做了“mvn clean install”，一切正常。在我的本地 m2 存储库中，我有 apklib 工件。

```
 <?xml version="1.0" encoding="UTF-8"?>
<project
    xmlns="http://maven.apache.org/POM/4.0.0"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <artifactId>actionbar</artifactId>
    <groupId>com.markupartist.android</groupId>
    <name>android-actionbar</name>
    <packaging>apklib</packaging>
    <version>1.0</version>

    <properties>
        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
            <platform.version>2.2.1</platform.version>
    </properties>

    <dependencies>
        <dependency>
            <groupId>com.google.android</groupId>
            <artifactId>android</artifactId>
            <version>${platform.version}</version>
            <scope>provided</scope>
        </dependency>
    </dependencies>

    <build>
        <sourceDirectory>src</sourceDirectory>
        <plugins>
            <plugin>
                <artifactId>android-maven-plugin</artifactId>
                <groupId>com.jayway.maven.plugins.android.generation2</groupId>
                <version>3.3.0</version>
                <configuration>
                    <sdk>
                        <path>
                            e:\Program Files\Android\android-sdk\
                        </path>
                    </sdk>
                </configuration>
                <extensions>true</extensions>
            </plugin>
            <plugin>
                <artifactId>maven-compiler-plugin</artifactId>
                <groupId>org.apache.maven.plugins</groupId>
                <version>2.3.2</version>
                <configuration>
                    <source>1.6</source>
                    <target>1.6</target>
                </configuration>
            </plugin>
        </plugins>
    </build>
</project> 
```

这个 pom.xml 来自我的主要项目，它依赖于上述项目。

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>com.main.app</groupId>
    <artifactId>VirtualRecruiter</artifactId>
    <version>1.0</version>
    <packaging>apk</packaging>
    <name>MainApp</name>

    <properties>
        <platform.version>2.2.1</platform.version>
    </properties>

    <dependencies>
        <dependency>
            <groupId>com.google.android</groupId>
            <artifactId>android</artifactId>
            <version>${platform.version}</version>
            <scope>provided</scope>
        </dependency>
        <dependency>
            <groupId>org.roboguice</groupId>
            <artifactId>roboguice</artifactId>
            <version>2.0</version>
        </dependency>
        <dependency>
            <groupId>actionbar</groupId>
            <artifactId>com.markupartist.android</artifactId>
            <version>1.0</version>
            <type>apklib</type>
        </dependency>
    </dependencies>

    <build>
        <plugins>
            <plugin>
                <groupId>com.jayway.maven.plugins.android.generation2</groupId>
                <artifactId>android-maven-plugin</artifactId>
                <version>3.3.0</version>
                <configuration>
                    <androidManifestFile>${project.basedir}/AndroidManifest.xml</androidManifestFile>
                    <assetsDirectory>${project.basedir}/assets</assetsDirectory>
                    <resourceDirectory>${project.basedir}/res</resourceDirectory>
                    <nativeLibrariesDirectory>${project.basedir}/src/main/native</nativeLibrariesDirectory>
                    <sdk>
                        <path>
                            e:\Program Files\Android\android-sdk\
                        </path>
                    </sdk>
                    <undeployBeforeDeploy>true</undeployBeforeDeploy>
                </configuration>
                <extensions>true</extensions>
            </plugin>

            <plugin>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>2.3.2</version>
                <configuration>
                    <source>1.6</source>
                    <target>1.6</target>
                </configuration>
            </plugin>
        </plugins>
    </build>
</project> 
```

IntelliJ 可以很好地看到我的依赖，但是当我在主项目上运行“mvn clean compile”时，我得到了：F

> 无法在项目 MainApp 上执行目标：无法解析项目 com.main.app:MainApp:apk:1.0 的依赖项：找不到工件 actionbar:artist.android:apklib:1.0

当我使用'systemPath'并使用我的工件的硬编码路径时，maven可以找到依赖项，但是我有编译错误并且javac没有看到库项目中的任何类。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T20:50:34.310

在您发布的代码上，您犯了一个小错误，也许它会解决您的问题。

你已经反转了你`groupId`的`artifactId`依赖关系，所以 Maven 找不到它。

```
<dependency>
  <groupId>actionbar</groupId>
  <artifactId>com.markupartist.android</artifactId>
  <version>1.0</version>
  <type>apklib</type>
</dependency> 
```

# cocoa - 如何在整个应用程序中禁用文本字段自动更正？

> ID：11994215
> 
> 赞同：0
> 
> 时间：2012-08-16T19:35:33.600
> 
> 标签：cocoa, uitextfield

我的应用程序中有大约 200 个文本字段，通过界面构建​​器并更改此功能将花费我永远！有没有更快的方法，也许是在 appdelegate 中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T22:41:22.857

这是另一个丑陋的解决方案：

XIB 文件为 XML 格式。如果所有文本字段都在一个 XIB 文件中，只需右键单击它，选择**Open As > Source Code**即可查看 XML 数据。使用查找/替换来添加正确的键值对。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T22:17:59.083

**不要在没有版本控制的情况下尝试这个**

> @贾斯汀还有其他方法吗？

200 个笔尖 - 嗯……您可以尝试以下方法：

创建 的子类`UITextField`。在源代码的某个时刻，在其实现的某个时刻禁用自动更正。

然后`UITextField`使用您的子类替换您的笔尖中的实例`ibtool`

例子：

```
ibtool --convert oldName-newName file.nib

              ibtool will change all classes with the exact
              name "oldName" to be named "newName" instead. 
```

它当然不漂亮，但它是我能想到的最不乏味（阅读：最不容易出错）的方法——对于一个相当快速的解决方案。

# c# - OpenXml：在 Excel 中确定单元格中的图像

> ID：11994216
> 
> 赞同：2
> 
> 时间：2012-08-16T19:35:35.667
> 
> 标签：c#, openxml, excel

> **可能重复：**
> [如何检查单元格是否有图片？](https://stackoverflow.com/questions/2320826/how-to-check-if-a-cell-has-a-picture)
> [OpenXML：Excel，提取单元格文本和图像/图片数据](https://stackoverflow.com/questions/11993979/openxml-excel-extracting-cell-text-and-image-picture-data)

我有一个包含 4 个图像的 Excel 文档，每个图像位于单元格 A1、A2、A3、A4 中

我可以遍历工作表中的所有图像，但我需要能够编辑此函数以提供“A1”和“A2”中的图像

```
 [Test]
    public void IterateThruImages()
    {
        WorkbookPart wbPart = document.WorkbookPart;
        var workSheet = wbPart.WorksheetParts.FirstOrDefault();

        foreach(ImagePart i in workSheet.DrawingsPart.GetPartsOfType<ImagePart>())
        {
            Stream stream = i.GetStream();
            long length = stream.Length;
            byte[] byteStream = new byte[length];
            stream.Read(byteStream, 0, (int)length);

            var imageAsString = Convert.ToBase64String(byteStream);
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T21:33:59.700

诀窍是获取图像的关系 ID“rId”。您可以通过获取相关行/列的 TwoCellAnchor 来获得它。然后获取嵌入。使用它来获取图像。

```
 [Test]
    public void GetImageRelationshipIdAndImageOfThatId()
    {
        string row = "1";
        string col = "0";

        WorkbookPart wbPart = document.WorkbookPart;
        var workSheet = wbPart.WorksheetParts.FirstOrDefault();

        TwoCellAnchor cellHoldingPicture = workSheet.DrawingsPart.WorksheetDrawing.OfType<TwoCellAnchor>()
             .Where(c => c.FromMarker.RowId.Text == row && 
                    c.FromMarker.ColumnId.Text == col).FirstOrDefault();

        var picture = cellHoldingPicture.OfType<DocumentFormat.OpenXml.Drawing.Spreadsheet.Picture>().FirstOrDefault();
        string rIdofPicture = picture.BlipFill.Blip.Embed;

        Console.WriteLine("The rID of this Anchor's [{0},{1}] Picture is '{2}'" ,row,col, rIdofPicture);

        ImagePart imageInThisCell = (ImagePart)workSheet.DrawingsPart.GetPartById(rIdofPicture);

    } 
```

# javascript - 在 IE8 中调用全局对象方法导致 null 或不是对象

> ID：11994219
> 
> 赞同：1
> 
> 时间：2012-08-16T19:35:51.737
> 
> 标签：javascript, cross-browser

我有以下 JS，当它在 IE8 中运行时，我收到错误：`ILL.TEST is null or not an object`，它可以在其他浏览器上运行。知道为什么会这样吗？提前感谢您的帮助。

```
 //global name space
 var ILL={};

 ILL.TEST=(function(){
     function init(){
      }
     return { 
        init:init 
     };
 })();

 (function(){
      //error ILL.TEST is null or not an object
      ILL.TEST.init();
 })() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T19:59:18.047

问题是我`ILL.TEST`在它被调用之后定义了。所以这将是一个问题：

```
 //global name space
 var ILL={};

 (function(){
    //error ILL.TEST is null or not an object
     ILL.TEST.init();
 })()

 //defining after this fn is called will result in null or not an object in IE8
 ILL.TEST=(function(){
     function init(){
      }
     return { 
       init:init 
     };
 })(); 
```

# java - 创建多维数组时的维度顺序

> ID：11994221
> 
> 赞同：6
> 
> 时间：2012-08-16T19:35:54.607
> 
> 标签：java, arrays, syntax, multidimensional-array

`new T[7]``T`创建一个 7 s的数组。如果我们用 替换`T`，`int[5]`我们得到`new int[5][7]`应该创建一个由 7 个 5 个整数组成的数组。但是，它创建了一个由 7 个整数组成的 5 个数组的数组。这有什么好的理由吗？如果反过来不是更有意义吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T19:43:57.097

我认为它是维度：

```
 height width depth
int[5]    [7]   [8] 
```

或者

```
 rows  cols
int[5]   [7] 
```

这就是为什么对我来说它是 5 个 7 个整数的数组是有意义的。有一种自然秩序。

我认为您的示例也很有意义，并且非常合乎逻辑。所以我想这只是一个意见问题：P

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-16T19:45:19.930

`int ints [][] = new int [5][7];`可以这样写，`int [] ints [] = new int [5][7];`也许这会告诉你这些是 7 个整数的 5 个数组确实有意义。;)

# php - 递归函数获取子目录的多维数组

> ID：11994222
> 
> 赞同：3
> 
> 时间：2012-08-16T19:36:03.087
> 
> 标签：php, recursion, multidimensional-array

所以，我真的花了两天时间试图把这个放到我的脑海里。我想要一个从脏树创建多维数组的函数。我之前手动完成并得到了这个结果：

```
Array ()

    [cats] = Array()
        [domestic] = Array ()
        [wild] = Array ()

    [dogs] = Array ()
        [big] = Array ()
        [small] = Array ()

    [emptyfolder] 
```

通过手动，我的意思是在我的函数中做这样的事情：`$result['level1']['level2'] = array();`这效果不好，因为我事先不知道污垢的深度。

该函数还使用另一个函数`GetSubdirectories($directory)`返回和数组，如下所示：

```
[0] = 'cats',
[1] = 'dogs'
[2] = 'emptyfolder' 
```

所以，这里是有问题的功能：

```
<?php
public function GetStructure($directory, $node = 'content') //the root folder is content
    {
        if (!isset($structure))
            {
            $structure = array();
            }

        $subdirectories = $this->GetSubdirectories($directory);
        if (is_array($subdirectories))
            {
            foreach ($subdirectories as $subdirectory)
                {
                    //add new subarray
                    $structure[$node] = array();
                    //set the current path
                    $currentDirectory = $directory . "/" . $subdirectory;
                    //repeat
                    $this->GetStructure(); // <-- how to I call the function?
                }
            }
        return $structure;
        }
?> 
```

据我了解，问题是“告诉函数将下一个数组放在哪里”。我只是不明白，任何帮助将不胜感激！

**解决方案**

```
<?php
public function PopulateArrayWithDirtree($dir, &$array = false)
    {
    $subDirs = $this->GetSubdirectories($dir);
    if (is_array($subDirs))
        {
        for ($i = 0; $i < sizeof($subDirs); $i++)
            {
            $array[$subDirs[$i]] = array();
            $this->PopulateArrayWithDirtree(($dir . "/" . $subDirs[$i]), $array[$subDirs[$i]]); //repeat
            }
        }
    return true;
    }

public function Test()
    {
    $path = $this->contentpath;
    $structure = array();
    $this->PopulateArrayWithDirtree($path, $structure);
    print_r($structure);
    }
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T19:39:57.887

听起来您想访问下一个元素？

不要使用`foreach`，而是使用`for`循环：

```
$keys = arraykeys($subdirectories);
$length = sizeof($keys);
for ($i = 0; $i < $length; $i++)
{
    $structure[$node] = array();
    $currentDirectory = $directory . "/" . $subdirectory;
    $this->GetStructure($subdirectories[$i]);

} 
```

但是，如果您的意思是设置结果，那么可能就是这样。我仍然很困惑：

```
$keys = arraykeys($subdirectories);
$length = sizeof($keys);
for ($i = 0; $i < $length; $i++)
{
    $currentDirectory = $directory . "/" . $subdirectory;
    $structure[$node] = $this->GetStructure($subdirectories[$i]);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T21:21:18.123

只是改变：

```
$this->GetStructure(); // <-- how to I call the function? 
```

至：

```
GetStructure($currentDirectory); 
```

# c++ - 查找圆外的点

> ID：11994223
> 
> 赞同：0
> 
> 时间：2012-08-16T19:36:12.547
> 
> 标签：c++, vector, geometry, points

我正在尝试创建一个函数，该函数允许我在圆的圆周上找到特定点周围的点。我搜索了该网站，发现了一个针对圆圈内部点的问题。

我已经创建了一个圆，该圆的点存储在一个向量中，即单元格。我还创建了一个包含 20 个点的病毒向量。我还创建了一个函数来检查其中一种病毒是否击中了细胞的外部。我正在尝试在 C++ 中创建一个函数，该函数将检查攻击细胞的病毒，以查看病毒各个方向的两点范围内是否还有其他病毒。我想计算该范围内的所有病毒，然后将它们移动到同一位置的圆圈中。

我被困在如何找到范围上。任何帮助都会很棒。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T19:51:03.263

一些用于在 R 范围内查找循环病毒的伪代码：

```
Let r=distance between two circular viruses
Let R=range to be checked

if r is less than R, increment virus counter.

Finding r is easy:
r =   square root of( square of( x(virus 1)-x(virus 2) ) + square of( y(virus 1)-y(virus 2) ) ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T19:53:04.310

将数据存储在矩阵中可能更简单。

例如：

```
0 0 0 0 0
0 1 0 1 0
0 0 0 0 0
0 1 0 0 0
0 0 0 0 1 
```

1 表示“病毒”在该位置。

然后，您可以创建一个递归函数来查找病毒-细胞碰撞的 2 个单位内的位置（该函数将矩阵作为其参数）。

# sql - SQL将具有多个小数的字符串转换为整数

> ID：11994228
> 
> 赞同：2
> 
> 时间：2012-08-16T19:36:48.677
> 
> 标签：sql, casting, sqlite, sql-order-by

使用 SQLite3，我试图通过将 TEXT 字符串转换为 INTEGER 来对结果进行排序。这是我的查询：

```
SELECT id,section FROM contract_sections ORDER BY CAST (section AS int) 
```

'section' 列是 TEXT，由分层/规范标识符组成，即 1.2.1，其中每个小数反映层次结构中的另一个深度级别。我希望我的结果按顺序返回（即 1.2.8、1.2.9、1.2.10 等）。如果我只是按“部分”列而不进行强制转换，我会得到如下所示的结果：

1.1, 1.10, 1.2, ...

但是通过前面提到的带有 cast 的查询，它现在似乎可以正确排序，如下所示：

1.1, 1.2, ... 1.9, 1.10

我的问题是，如果我将此字符串转换为 int，SQLite 会将其转换为什么值，结果将如何排序？目前它似乎正在按我的意愿订购东西，但想避免任何不可预见的错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T19:59:25.610

不同的数据库以不同的方式处理转换为整数和浮点数。

在 SQL Lite 的转换中，它将看起来像整数的字符串的初始段转换为整数。因此， cast('1.2.1' as int) 产生整数*1*。

它对数字的行为类似，因此 cast('1.2.1' as real) 产生值*1.2*。

此行为记录在此处 (http://www.sqlite.org/lang_expr.html)。

在这种情况下，其他数据库可能会返回错误。

# php - PHP 邮件功能不发送。需要另一双眼睛

> ID：11994230
> 
> 赞同：0
> 
> 时间：2012-08-16T19:37:01.310
> 
> 标签：php, email, if-statement

```
<?php
    session_start();

    $returnURL = $_POST["pageURL"].'#confirmation';

    if (empty($_POST["phone"]) || empty($_POST["email"]) || empty($_POST["name"])  || empty($_POST["address"]) ) {

    $_SESSION["confirmation"] = "empty";
    header('Location: '.$returnURL);
    exit;

    } else {

    $to = 'email@email.com';
    $headers = 'From: ' . $_POST["name"] . '<' . $_POST["email"] . '>';
    $subject = 'Email from your landing page';          
    $message = (
    "You have received a inquiry from your landing page! \n\n Name: " . $_POST["name"] . " 
    \n Email: " . $_POST["email"] . "
    \n Phone Number: " . $_POST["phone"] .  "
    \n Mailing Address: " . $_POST["address"] .  "
    \n Message: " . $_POST["message"]
    );

    mail($to, $subject, $message, $headers);

    $_SESSION["confirmation"] = 'yes';
    header('Location: '.$returnURL);
    exit;
    }
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T19:42:48.323

请参阅[`mail`](http://de.php.net/mail)函数的文档，它返回一个值。检查并报告回来。调试时还要禁用重定向：

```
$result = mail($to, $subject, $message, $headers);
var_dump($result);
exit; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T20:10:14.240

标题可能非常挑剔。尝试在 From 末尾添加新行。

```
$headers = 'From: ' . $_POST["name"] . '<' . $_POST["email"] . ">\r\n"; 
```

# facebook - 试图学习 facebook API 但 window.fbAsyncInit 没有被调用

> ID：11994232
> 
> 赞同：1
> 
> 时间：2012-08-16T19:37:04.190
> 
> 标签：facebook, api

我看了看，但似乎没有给出答案……看来我的 js 文件中的 window.fbAsyncInit 没有被调用。这是一个测试应用程序，让我自己熟悉非常基础的 API，这也是 PHP 代码片段出现在 HTML 部分的原因；）。我的一个想法是 JS 看不到 fb-root DIV，所以我尝试在之后加载 JS，甚至去掉除了 Facebook 的东西之外的所有东西，仍然什么都没有...... info DIV 的 innerHTML 和控制台都没有显示任何东西. 我确实在 DIV 和控制台中收到“SDK 已加载”消息，所以我知道 API 正在加载。我也没有收到任何错误。有没有人知道为什么这不起作用？还尝试了 FF、Chrome、Safari 和 IE（mac 和 pc），结果相同。

代码最初来自一个教程网站（稍作调整：）但我仔细检查了 facebook 文档，它与他所拥有的相同。

HTML

```
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Guess Test</title>
    <link href="guess.css" rel="stylesheet" type="text/css">
    <script src="jquery-1.7.2.min.js" type="text/javascript"></script>
    <script src="guess.js" type="text/javascript"></script>
</head>
<body>
<div id="fb-root"></div>
<?php echo "Welcome to the guess test program :D<br>"; ?>

<div id="alertbox"></div>

<br>
<div>Enter your guess between 1 and 10: <input type=text id='myGuess' name='myGuess'>
<input type='button' onClick='Guess()' value='Guess'>
<br>
<br>
<input type='button' onClick='document.getElementById("alertbox").innerHTML = "reset"; Restart()' value='Start Again'>
<br>
<div id="info"><div>

<script type=text/javascript>Restart();</script>

</body>
</html> 
```

Javascript（js 文件）...ID 和 URL 已删除 :)

```
var iRandom;
var cheat=false;
var fb_login = "foo";
fb_login = "Start";

function Restart() {
    document.getElementById("info").innerHTML = fb_login;
    iRandom = Math.floor(Math.random()*10)+1;
    if(cheat)
        document.getElementById("info").innerHTML = iRandom;
    var tempstring = document.getElementById("alertbox").innerHTML;
    if((tempstring == "") || (tempstring == "reset")) {
        document.getElementById("alertbox").innerHTML = "OK, I am thinking of a number between 1 and 10";
        }
    }

function Guess() {
    var yourGuess = document.getElementById('myGuess').value;
    if (yourGuess>iRandom) {
        document.getElementById("alertbox").innerHTML = "Too High.";
        }
    if (yourGuess<iRandom) {
        document.getElementById("alertbox").innerHTML = "Too Low.";
        }
    if (yourGuess==iRandom) {
        document.getElementById("alertbox").innerHTML = "Well done! You guessed it.";
        Restart();
        }
    }

window.fbAsyncInit = function() {
    console.log("START FB init");
    fb_login = "START FB init";
    FB.init({
        appId      : 'USED-MY-APP-ID', // App ID
        channelUrl : '//MYURL.com/facebook/channel.php', // Channel File
        status     : true, // check login status
        cookie     : true, // enable cookies to allow the server to access the session
        xfbml      : true,  // parse XFBML
        frictionlessRequests : true // enable frictionless requests
        });

        // Additional initialization code here
    FB.getLoginStatus(function(response) {
        if (response.status === 'connected') {
            var uid = response.authResponse.userID;
            accessToken = response.authResponse.accessToken;
            fb_login = "Welcome back";
            alert("Welcome back");
            }
        else if (response.status === 'not_authorized') {
            //User is logged into Facebook, but not your App
            //LOG IN function
            fb_login = "App not authorized";
            alert("App not authorized");
            }
        else {
            // User is not logged into Facebook at all
            window.top.location ='https://www.facebook.com/index.php';
            fb_login = "no facebook";
            alert("no facebook");
            }
        });
    };

// Load the SDK Asynchronously
(function(d){
    var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
    if (d.getElementById(id)) {return;}
    js = d.createElement('script'); js.id = id; js.async = true;
    js.src = "//connect.facebook.net/en_US/all.js";
    ref.parentNode.insertBefore(js, ref);
    fb_login = "SDK loaded";
    console.log("SDK loaded");
    }(document)); 
```

# android - 在现有 ListVIew 中添加更多项目时 ImageView 重叠

> ID：11994233
> 
> 赞同：3
> 
> 时间：2012-08-16T19:37:05.053
> 
> 标签：android, android-listview, android-imageview

我正在创建一个`ListView`which 作为 a`TextView`和`ImageView`一个列表项行。

最初我在列表视图视图中从本地数据库加载默认项目，我在列表视图`update button`顶部有一个从服务器加载更多项目

当用户按下时，`update button`我正在触发从服务器`AsyncTask`中提取***图标 url 和文本的 a。***

要在 ImageView 中加载图标，我正在使用[ImageDownloader](https://i.stack.imgur.com/SHJfu.png)示例，但问题是我的 ImageView 与 ViewHolder 模式的旧 ImageViews bcoz 重叠。那么有人可以指出我在做什么错吗？

这是我的 ListView 适配器代码

```
@Override
public View getView(int position, View convertView, ViewGroup parent) {

                ViewHolder holder;
                TemplateData data = (TemplateData) this.getItem( position );

                if(convertView == null){
                    LayoutInflater inflater=(LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
                    convertView=inflater.inflate(R.layout.text_template_default_row, parent, false);

                    holder = new ViewHolder();
                    holder.templateText = (TextView) convertView.findViewById(R.id.defText);
                    holder.templateIcon = (ImageView)convertView.findViewById(R.id.defIcon);
                    holder.templateTitle = (TextView) convertView.findViewById(R.id.defTitle);

                    convertView.setTag(holder);

                }else{

                    holder = (ViewHolder)convertView.getTag();

                }

                holder.templateText.setText(data.getText() );
                holder.templateTitle.setText(data.getTemplateTitle());

                //isImageLoading initially sets to false so that default items will use the 
               // resource ids , it gets falsed when AsyncTask finished load Images and update the 
               //adapter and at that time this adapter has to pic the image from ImageDowloader
                if(!isImageLoading)
                    data.setTemplateIconId(iconList[position]);

                //Has resource id but not icon url
                if(data.getTemplateIconId()!=0 && data.getTemplateIconUrl()==null ){

                    Log.d("Load icon ","Default Load");

                    holder.templateIcon.setBackgroundResource(data.getTemplateIconId());

                // does not has recource id so load url from server
                }else if(data.getTemplateIconUrl()!=null && data.getTemplateIconId()==0){

                    Log.d("Load icon ","From Server Load");

                    imageDownloader.download(data.getTemplateIconUrl(), (ImageView) holder.templateIcon);

                }

                    return convertView;

         } 
```

iconList 包含应用程序中现有图标的资源 ID。请随时询问是否有人想要更多信息。

**编辑**

这是屏幕截图

最初将有 8 个模板及其图标，它们仅从存储在 android 手机中的数据库中加载。它的名字从模板 1 到模板 6

![默认视图](../Images/0047884f830712cf5ef6d1d896ca5318.png)

现在，当用户按下**更新**按钮时，新模板将在这里加载。它的名称从模板新 1 到模板新 9 开始，但是当我向上滚动 n 向下时，imageViews 会重叠

这是屏幕截图

![在此处输入图像描述](../Images/9b4f4b2cc60b794c1df27f5837d65e20.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T20:53:42.043

我怀疑您在`imageDownloader`调用. 这将解释重叠。`setImageResource``src``ImageView``setBackgroundResource`

您需要做的是更改`setBackgroundResource`为`setImageResource`以下代码：

```
 if(data.getTemplateIconId()!=0 && data.getTemplateIconUrl()==null ){

                Log.d("Load icon ","Default Load");

                // This line should say setImageResource:
                holder.templateIcon.setBackgroundResource(data.getTemplateIconId());
 } else ... 
```

如果下载需要很长时间并且视图已被重用，@Akos 提到的问题（他似乎已删除）对您来说将是一个问题。重申一下他所说的，一旦你通过上面的解决方案得到这个工作，你会发现如果图像下载需要很长时间（长到该行已经被重用，并且新的图像集）你的图像可能是被旧图像覆盖。

所以，里面的`imageDownloader`各位也会想说，在下载之前：

```
imageView.setTag(url); 
```

然后在下载完成后，在设置图像之前`ImageView`：

```
if(!(String)imageView.getTag().equals(url)
{ 
     return; 
} 
```

这样，如果`ImageView`同时被另一行重用，下载将简单地中止。

# objective-c - 呈现模态视图控制器

> ID：11994235
> 
> 赞同：1
> 
> 时间：2012-08-16T19:37:14.323
> 
> 标签：objective-c, modalviewcontroller

我有这个：

```
SomeViewController* vc = [[SomeViewController alloc] init];
self.view.backgroundColor = [UIColor clearColor];
self.modalPresentationStyle = UIModalPresentationCurrentContext;
[self presentModalViewController:vc animated:YES]; 
```

出现空白黑屏 - 如何解决？有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T15:30:24.797

在这里聚会有点晚了，但是如果您要从带有 a 的 vc 初始化此模态视图控制器`UINavigationController`，请尝试在 UINavigationController 上设置 modalPresentationStyle：

```
self.navigationController.modalPresentationStyle = UIModalPresentationCurrentContext; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T20:00:38.097

这似乎不是视图控制器的有效初始化程序。使用 – initWithNibName:bundle: 如果你的子类是 UIViewController 的直接子类

# javascript - 谷歌地图信息框自动平移问题

> ID：11994237
> 
> 赞同：3
> 
> 时间：2012-08-16T19:37:21.080
> 
> 标签：javascript, google-maps, google-maps-api-3, infowindow

我在使用信息框时遇到了一些问题 - [http://google-maps-utility-library-v3.googlecode.com/svn/trunk/infobox/docs/reference.html](http://google-maps-utility-library-v3.googlecode.com/svn/trunk/infobox/docs/reference.html) - 它没有考虑到我的布局中的页眉和侧边栏。当有人单击标记并显示信息框时，它不会从标题和侧边栏（绝对位于 100% 宽度/高度的 Google 地图上方）下方自动平移，以便您可以看到它。

当我使用普通的 Infowindows（以及可以隐藏的侧边栏）时，我可以完美地工作，但我想使用 Infobox 以便更好地控制样式/外观。为了做到这一点，我从这个问题中找到了第二个答案 -[确保在 Google Maps for web 上的标记周围填充](https://stackoverflow.com/questions/6839145/google-maps-bounding-padding-map)- 并使用 div 并将其作为控件应用于地图。

这是问题的 JSFiddle - [http://jsfiddle.net/nrjBB/](http://jsfiddle.net/nrjBB/)

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T18:53:46.740

从您的 html 中删除标题 div，它将正确平移。听起来你的 CSS 是错误的。

尝试这个：

html:

```
<div id="header"></div>
<div id="map_canvas"></div>
<div id="sidebar"></div> 
```

CSS：

```
html { height: 100% }
body { height: 100%; margin: 0; padding: 0 }
#map_canvas { height: 100%; }
#header { width: 100%; height: 50px; background: #000; }
#sidebar { width: 100px; height: 100%; background: #999; position: absolute; top: 0; right: 0; }

.info-box { background: #ffffff; } 
```

PS：感谢您将代码放在这里！我找了很久的信息框信息！！！

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-06-05T12:48:40.467

要么你必须把 map_canvas 的高度（heightOfWindow -50），因为信息窗口将根据地图 div 平移，在你的情况下，地图 div 被标题隐藏

# playframework-2.0 - SecureSocial 2 与 play 2 框架

> ID：11994238
> 
> 赞同：1
> 
> 时间：2012-08-16T19:37:24.637
> 
> 标签：playframework-2.0, google-oauth, securesocial

我正在尝试使用 SecureSocial 2。当我尝试使用现有帐户（例如 Google）时，它给了我错误：

```
Error: invalid_client

scope=https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/userinfo.email
response_type=code redirect_uri=http://localhost:9000/authenticate/google
state=736c4f77-14e8-4cde-ac61-7df8796067ba
client_id=your_client_id 
```

请告诉我我该怎么做才能解决它。非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T20:37:58.563

您必须在 Google 上注册您的应用程序，这将提供客户端 ID 和客户端密码。

看看谷歌的这个文档：[https ://developers.google.com/accounts/docs/OAuth2](https://developers.google.com/accounts/docs/OAuth2)

# jquery - Shopify 在购物车页面上发布 Ajax 添加到购物车成功消息

> ID：11994239
> 
> 赞同：2
> 
> 时间：2012-08-16T19:37:30.197
> 
> 标签：jquery, ajax, shopify

我正在使用 Shopify 构建在线商店，并且在默认模板中遇到了一些 jQuery/Ajax 代码，我想根据自己的需要进行修改。

```
function addToCartSuccess (jqXHR, textStatus, errorThrown){

  $.ajax({
    type: 'GET',
    url: '/cart.js',
    async: false,
    cache: false,
    dataType: 'json',
    success: updateCartDesc
  });
  window.location = "/cart";
  $('.add-cart-msg').hide().addClass('success').html('Item added to cart! <a href="/cart" title="view cart">View cart and check out &raquo;</a>').fadeIn('300');
} 
```

我自己添加了 window.location 行，以为它会在购物车页面上发布消息，但无济于事。如果我删除该代码，成功消息会在按下“添加到购物车”按钮时发布在产品页面上，因此它无需修改即可实际工作。

我还尝试使用 POST 命令创建自己的函数，但实际上我最好猜测，因为我以前没有任何使用此级别 jQuery/Ajax 的经验

```
function updateCartDesc (jqXHR, textStatus, errorThrown){

  $.ajax({
    type: 'POST',
    url: '/cart',
    async: false,
    cache: false,
    dataType: 'html',
    success: function (){('.add-cart-msg').hide().addClass('success').html('Item added to cart! <a href="/cart" title="view cart">View cart and check out &raquo;</a>').fadeIn('300');
    }
}); 
```

关于我哪里出错的任何指示？教程、指南等会很棒。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T22:43:56.190

您将不得不使用 URL 中的参数将用户重定向到购物车页面，该参数告诉购物车页面显示一条消息。如下所示：

**您的 Ajax 添加到购物车调用和回调**

```
$.ajax({
    type: 'GET',
    url: '/cart.js',
    async: false,
    cache: false,
    dataType: 'json',
    success: updateCartDesc
});

var updateCartDesc = function() {
    //redirect the user to the cart and pass showSuccess=true in the URL
    window.location = "/cart?showSuccess=true";
}; 
```

**购物车页面上的脚本**

```
$(function() {
    //if the current URL contains showSuccess,
    //display the success message to the user
    if(window.location.href.indexOf('showSuccess') != -1) {
        $('.add-cart-msg').hide()
                          .addClass('success')
                          .html('Item added to cart!')
                          .fadeIn('300');

    }
}); 
```

请注意，此代码假定您在 /cart 页面上有一个带有 class 的元素`add-cart-msg`。

# c++ - POD 变量的直接初始化不起作用，但在将变量推送到向量时复制初始化会起作用

> ID：11994243
> 
> 赞同：0
> 
> 时间：2012-08-16T19:37:41.337
> 
> 标签：c++, initialization, copy-initialization

为什么下面的代码编译失败，而后面的两个例子编译成功？我在 Windows 7 上使用 VS 2008。

* * *

直接初始化 POD（失败）：

```
int pod();
std::vector<int> pods;
//pods.push_back(pod); // This will generate a compiler error
// Compile error: 1>c:\test.hpp(43) : error C2664: 'std::vector<_Ty>::push_back' : cannot convert parameter 1 from 'int (__cdecl *)(void)' to 'const int &' 
```

* * *

POD的拷贝初始化（成功：

```
int pod = int();
std::vector<int> pods;
pods.push_back(pod); // No error! 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-16T19:38:31.047

查找“[最令人烦恼的解析](http://en.wikipedia.org/wiki/Most_vexing_parse)”（这里也已反复讨论过）。

```
int pod(); // this does not declare (nor define) an integer 
```

顺便说一句，你为什么把它`1`放在 MyClass 例子中？

# javascript - IE7 使用 Javascript 选项卡导航误读页面上的 CSS

> ID：11994247
> 
> 赞同：0
> 
> 时间：2012-08-16T19:37:51.157
> 
> 标签：javascript, css, drupal, internet-explorer-7

我正在构建一个 Drupal 电子商务网站，在该网站上，产品页面将在产品图像下的不同选项卡下提供不同的信息。我遇到了 IE7 如何处理这个问题。呈现页面时，页脚位于一个位置，但当单击不同的选项卡时，页脚的一部分仍保留在原来的位置，即使页面的其余部分长度发生变化。当内容比初始选项卡长时，这会给选项卡带来问题。一天半以来我一直在反对这个，所以我想我会对它有一些新的看法。这是我重新创建问题的页面的链接。

[http://dev.jsfix.gotpantheon.com/node/1/](http://dev.jsfix.gotpantheon.com/node/1/)

单击 IE7 或任何兼容性测试器中的规格选项卡应该会给您我提到的问题。此外，对不起，该网站是愚蠢的丑陋。只是尽快重新创建一些东西以重现问题。尽管您可以查看源代码中的所有代码，但我很高兴发布任何请求的代码。感谢您的输入。

**更新**

该网站很大程度上缺乏设置的高度和宽度，因为这是我第一次尝试响应式设计。这里有一些要求的代码。

**CSS**

```
/*#menu-bar
{
     background-color: #61471f;
   background-image: url(images/fallback-gradient.png);
    background-image:-moz-linear-gradient(top, #d7bf90, #61471f);
    background-image:-webkit-gradient(linear,0 0,0 100%, from(#d7bf90), to(#61471f));
    background-image:-webkit-linear-gradient(top, #d7bf90, #61471f);
    background-image:     -ms-linear-gradient(top, #d7bf90, #61471f);
    background-image:      -o-linear-gradient(top, #d7bf90, #61471f);
    color: #fff;
}*/

html {
      font-size: .80em;
    font-family: MyriadPro-Regular, 'Myriad Pro Regular', MyriadPro, 'Myriad Pro', Helvetica, Arial, sans-serif;
    margin: 0px;
    padding: 0px;
    color: #000;
    height: 100%;
}
body {
background: url('/sites/default/files/images/wood-background.png') repeat center top;
height: 100%;
  color: #000;
}

header p
{
margin: 0;
}

div#page-wrapper
{
height: 100%; 
}

div#page
{
max-width:960px;
background-color:#000;
margin: 0 auto;
height: 100%; 
}

div#columns
{
padding-right: 20px;
}
div.flex-container
{
    border-bottom: 4px solid #ffc82f;
}

div.field.field-name-body.field-type-text-with-summary.field-label-hidden.view-mode-teaser
{
    display: none;
}
div.messages
{
    margin-top: 0;
}

div.addedtocart{
  border: 1px solid #A31514;
  color: #ffffff;
  background-color: #A31514;
  padding: 2px 10px;
  max-width: 170px;
  -moz-border-radius: 6px;
  -webkit-border-radius: 6px;
  -khtml-border-radius: 6px;
  border-radius: 6px;
}

article#article-45
{
display:none;
}

article#article-10
{
margin-bottom:0;
}

div#content
{
margin:0 0 10px 10px;
}

div#footer-content
{
margin-right:7px;
}

div#block-nodesinblock-0
{
margin-bottom:0;
}

#block-system-main.content-display-grid article.article
{
min-height: 250px;
}

.hl-l .region-header 
{
margin: 0;
margin-bottom: -5px;
}

#branding
{
margin: 0;
display: none;
}

#header-wrapper 
{
    border-bottom:none;
    /*background-image:url('/sites/default/files/images/Daisy_web_page_header.gif');
    background: url('/sites/default/files/images/Daisy_web_page_header.gif');
    background-repeat: no-repeat;
    background-position: center top;*/
    filter: none;
  -ms-filter: none;
  /*margin-bottom: -3px; Maybe fix black line above menu*/
  /*height: 223px; Commented out for responsive */
    background-color:#FFC82F;
}

#header-wrapper .container
{
z-index: 900;
}

#header-wrapper header
{
/*height: 185px;*/
position: relative;
margin: 0;
}

#nav-wrapper
{   /*position: absolute;*/
    top: 0;
    /*width: 100%;*/
    box-shadow: none;
    display: block;
}

select#mobilemenu
{
display: none;
}

#menu-bar
{
    background: url('/sites/default/files/images/Yellow_bar.gif') repeat-x center top;
}

.sf-menu li ul li, .sf-menu li ul a
{
background-color:#FFC82F;
margin-top:-5px;
}

a.sf-depth-2
{
margin-right:0 !important; 
}

a.sf-depth-3
{
margin-right:0 !important; 
}

.sf-menu li:hover ul, .sf-menu.sfHover ul
{
margin:0;
}

.sf-menu ul
{
width: 14em !important;
}

.nav{
font-size:1.25em;
}

.nav li a{
color: #000;
}

.nav ul li
{
line-height:2.4em
}
.nav ul li a
{
line-height: 2.4em;
text-transform: none;
margin-right: 15px;
 }

.nav ul li a:hover
{
 background: #DDE;
 }

 .menuparent
 {
line-height: 2.4em;
text-transform: none;
margin-right: 15px;
font-weight: 700;
padding: 0 10px;
 }

 .menuparent:hover
 {
  background: #DDE;
 }

#content-wrapper
{
    border-top: none;
    border-bottom: none;
    padding: 0;
}
#secondary-content-wrapper .texture-overlay
{
    padding-top: 4em; /* Was Zero and Static, but changed back for responsive*/
    border-bottom: none;
}

#secondary-content-wrapper .region-secondary-content, #tertiary-content-wrapper .region-tertiary-content
{
    margin:0;
}

#content-wrapper.no-secondary
{
    /*padding: 0;*/
    background: #fff;
}

article header 
{
    margin: 0;
}
.content-display-grid article.article h1 
{
min-height: 38px;
}

#footer-wrapper
{
border: none;
}

#page-footer
{
    color: #fff;
    text-align: right;
    font-size: 8.5pt;
    background-color:#000;
}
#page-footer a, #page-footer a:visited, #page-footer a:link, #page-footer a:hover, #page-footer a:active
{
    text-decoration: none;
    color: #fff;
}
#page-footer a:hover
{
    text-decoration: underline;
}

footer.clearfix
{
background-color: #000;
}

input[type="submit"]
{
    background-color: #a31514;
    background-image: none;
    color: #fff;
    border: none;
    margin-right:3px;
    filter: none;
    -ms-filter: none;
}

input#edit-checkout, input#edit-continue 
{
    margin-right:3px;
}

input[type="radio"][name^="commerce"]
{
    display:none;
}

input#edit-quantity
{
    border: 1px solid #d5d5d5;
    background-color: #fff;
        filter: none;
    -ms-filter: none;
}

input#edit-account-login-mail
{
width:227px;
}

form.commerce-add-to-cart input, .add-to-cart #edit-actions input
{
    filter: none;
    -ms-filter: none;
}

div.block-inner.clearfix
{
    margin: 0;
}

/*Nationals Menu*/

ul li.expanded
{
list-style-image: none;
list-style-type: none;
}

ul li.leaf
{
list-style-image: none;
list-style-type: none;
}

/**
*Tabber CSS
*/

/* $Id: example.css,v 1.5 2006/03/27 02:44:36 pat Exp $ */

/*--------------------------------------------------
  REQUIRED to hide the non-active tab content.
  But do not hide them in the print stylesheet!
  --------------------------------------------------*/
.tabberlive .tabbertabhide {
 display:none;
}

/*--------------------------------------------------
  .tabber = before the tabber interface is set up
  .tabberlive = after the tabber interface is set up
  --------------------------------------------------*/
.tabber {
}
.tabberlive {
 margin-top:1em;
}

/*--------------------------------------------------
  ul.tabbernav = the tab navigation list
  li.tabberactive = the active tab
  --------------------------------------------------*/
ul.tabbernav
{
 margin:0;
 padding: 3px 0;
 border-bottom: 1px solid #778;
 font: bold 12px MyriadPro-Regular, 'Myriad Pro Regular', MyriadPro, 'Myriad Pro', Helvetica, Arial, sans-serif;;
}

ul.tabbernav li
{
 list-style: none;
 margin: 0;
 display: inline;
}

ul.tabbernav li a
{
 padding: 3px 0.5em;
 margin-left: 3px;
 border: 1px solid #778;
 border-bottom: none;
 background: #DDE;
 text-decoration: none;
}

ul.tabbernav li a:link { color: #000; }
ul.tabbernav li a:visited { color: #000; }

ul.tabbernav li a:hover
{
 color: #000;
 background: #FFC82F;
 border-color: #227;
}

ul.tabbernav li.tabberactive a
{
 background-color: #fff;
 border-bottom: 1px solid #fff;
}

ul.tabbernav li.tabberactive a:hover
{
 color: #000;
 background: white;
 border-bottom: 1px solid white;
}

/*--------------------------------------------------
  .tabbertab = the tab content
  Add style only after the tabber interface is set up (.tabberlive)
  --------------------------------------------------*/
.tabberlive .tabbertab {
 padding:5px;
 border:none;
 border-top:0;

 /* If you don't want the tab size changing whenever a tab is changed
    you can set a fixed height */

 /* height:200px; */

 /* If you set a fix height set overflow to auto and you will get a
    scrollbar when necessary */

 /* overflow:auto; */
}

/* If desired, hide the heading since a heading is provided by the tab */
.tabberlive .tabbertab h2 {
 display:none;
}
.tabberlive .tabbertab h3 {
 display:none;
}

/* Example of using an ID to set different styles for the tabs on the page */
.tabberlive#tab1 {
}
.tabberlive#tab2 {
}
.tabberlive#tab2 .tabbertab {
 height:200px;
 overflow:auto;
}

/*Migrated from Old Daisy Site*/

.retailer
{
    display: block;
    padding: 10px 10px 20px 10px;
    border-top: 1px solid #000;
    /*height: 75px;*/
}
.retailer img
{
    clear: both;
}
.retailer p
{
    font-size: 10px;
    margin-left: 125px;
}
.retailer a
{
    font-size: 13px;
}
.retailer b
{
    font-size: 12px;
}

h4
{
font-size: 18px;
}

tbody
{
border: none;
} 
```

**HTML**

```
<!DOCTYPE html>
<!--[if IEMobile 7]><html class="iem7" lang="en" dir="ltr"><![endif]-->
<!--[if (lte IE 6)&(!IEMobile)]><html class="ie6 ie6-7 ie6-8" lang="en" dir="ltr"><![endif]-->
<!--[if (IE 7)&(!IEMobile)]><html class="ie7 ie6-7 ie6-8" lang="en" dir="ltr"><![endif]-->
<!--[if (IE 8)&(!IEMobile)]><html class="ie8 ie6-8" lang="en" dir="ltr"><![endif]-->
<!--[if (gte IE 9)|(gt IEMobile 7)]><!--><html lang="en" dir="ltr"
  xmlns:content="http://purl.org/rss/1.0/modules/content/"
  xmlns:dc="http://purl.org/dc/terms/"
  xmlns:foaf="http://xmlns.com/foaf/0.1/"
  xmlns:og="http://ogp.me/ns#"
  xmlns:rdfs="http://www.w3.org/2000/01/rdf-schema#"
  xmlns:sioc="http://rdfs.org/sioc/ns#"
  xmlns:sioct="http://rdfs.org/sioc/types#"
  xmlns:skos="http://www.w3.org/2004/02/skos/core#"
  xmlns:xsd="http://www.w3.org/2001/XMLSchema#"><!--<![endif]-->
<head>
<meta charset="utf-8" />
<meta about="/node/1" property="sioc:num_replies" content="0" datatype="xsd:integer" />
<meta content="Test Page" about="/node/1" property="dc:title" />
<link rel="canonical" href="/node/1" />
<meta name="Generator" content="Drupal 7 (http://drupal.org)" />
<link rel="shortlink" href="/node/1" />
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="MobileOptimized" content="width">
<meta name="HandheldFriendly" content="true">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta http-equiv="cleartype" content="on">
<meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
<title>Test Page | JSFix</title>
<link type="text/css" rel="stylesheet" href="http://dev.jsfix.gotpantheon.com/sites/default/files/css/css__9zsakYbWSOTLroLLtWO9P7zLJXhXtSJo2OgXN4wIrU.css" media="all" />
<link type="text/css" rel="stylesheet" href="http://dev.jsfix.gotpantheon.com/sites/default/files/css/css_Vn_p7xhZmS8yWWx26P0Cc7Tm0GG2K1gLWEoVrhw5xxg.css" media="all" />
<style>body.snf-gwf-open-sans #site-name{font-family :'Open Sans'}
body.ssf-gwf-open-sans #site-slogan{font-family:'Open Sans'}
body.ptf-gwf-open-sans #page-title{font-family:'Open Sans'}
body.ntf-gwf-open-sans .article-title{font-family:'Open Sans'}
body.ctf-gwf-open-sans .comment-title{font-family:'Open Sans'}
body.btf-gwf-open-sans .block-title{font-family:'Open Sans'}
.flexible-slideshow,.flexible-slideshow .article-inner,.flexible-slideshow .article-content,.flexslider{max-width:940px;}
</style>
<link type="text/css" rel="stylesheet" href="http://dev.jsfix.gotpantheon.com/sites/default/files/css/css_-ahHBm_xiz8FfJcOkgLwWABHL05_CSqrP_Fvca-NQYI.css" media="all" />
<link type="text/css" rel="stylesheet" href="http://dev.jsfix.gotpantheon.com/sites/default/files/css/css_kOgNrNOOFZK7-60fYtH9T0gsBZmmSm633A_N1s0urS8.css" media="screen" />
<link type="text/css" rel="stylesheet" href="http://fonts.googleapis.com/css?family=Open+Sans" media="all" />

<!--[if IE 6]>
<link type="text/css" rel="stylesheet" href="http://dev.jsfix.gotpantheon.com/sites/all/themes/at-commerce/css/ie-6.css?m8v34m" media="all" />
<![endif]-->

<!--[if IE 8]>
<link type="text/css" rel="stylesheet" href="http://dev.jsfix.gotpantheon.com/sites/all/themes/daisy/css/ie-8.css?m8v34m" media="all" />
<![endif]-->

<!--[if lte IE 7]>
<link type="text/css" rel="stylesheet" href="http://dev.jsfix.gotpantheon.com/sites/all/themes/daisy/css/ie-lte-7.css?m8v34m" media="all" />
<![endif]-->

<!--[if lte IE 9]>
<link type="text/css" rel="stylesheet" href="http://dev.jsfix.gotpantheon.com/sites/all/themes/daisy/css/ie-lte-9.css?m8v34m" media="all" />
<![endif]-->
<script src="http://dev.jsfix.gotpantheon.com/sites/default/files/js/js_3jHghlMLrjr9xXAC0JufqSSch3oAbkZstSqYdc4uuck.js"></script>
<script src="http://dev.jsfix.gotpantheon.com/sites/default/files/js/js_0h7CTuYRo_Ghzoteora_GwNIEjQUJsrG35yK6tpOL4k.js"></script>
<script src="http://dev.jsfix.gotpantheon.com/sites/default/files/js/js_bw8RYuKrTKJAeDPfrHmpjEzmr12cPs86OqIm37U0muU.js"></script>
<script>jQuery.extend(Drupal.settings, {"basePath":"\/","pathPrefix":"","ajaxPageState":{"theme":"daisy","theme_token":"_CBTf2UvK6px6JFgsj3Z4JxmSWKH4SfOsxj1kmfDdAQ","js":{"misc\/jquery.js":1,"misc\/jquery.once.js":1,"misc\/drupal.js":1,"misc\/vertical-tabs.js":1,"sites\/all\/themes\/at-commerce\/js\/jquery.flexslider-min.js":1,"sites\/all\/themes\/at-commerce\/js\/slider.options.js":1,"sites\/all\/themes\/at-commerce\/js\/draw.js":1,"sites\/all\/themes\/adaptivetheme-7.x-2.1\/adaptivetheme\/adaptivetheme\/js\/respond.js":1,"sites\/all\/themes\/daisy\/js\/jquery.mobilemenu.min.js":1,"sites\/all\/themes\/daisy\/js\/AC_RunActiveContent.js":1,"sites\/all\/themes\/daisy\/js\/flowplayer-3.2.11.min.js":1},"css":{"modules\/system\/system.base.css":1,"modules\/system\/system.menus.css":1,"modules\/system\/system.messages.css":1,"modules\/system\/system.theme.css":1,"modules\/comment\/comment.css":1,"modules\/field\/theme\/field.css":1,"modules\/node\/node.css":1,"modules\/search\/search.css":1,"modules\/user\/user.css":1,"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"sites\/all\/themes\/adaptivetheme-7.x-2.1\/adaptivetheme\/adaptivetheme\/css\/at.base.css":1,"sites\/all\/themes\/adaptivetheme-7.x-2.1\/adaptivetheme\/adaptivetheme\/css\/at.layout.css":1,"sites\/all\/themes\/adaptivetheme-7.x-2.1\/adaptivetheme\/adaptivetheme\/css\/at.messages.css":1,"sites\/all\/themes\/at-commerce\/css\/styles.base.css":1,"sites\/all\/themes\/at-commerce\/css\/styles.modules.css":1,"sites\/all\/themes\/at-commerce\/css\/styles.settings.css":1,"sites\/all\/themes\/daisy\/color\/colors.css":1,"sites\/all\/themes\/daisy\/css\/daisy.css":1,"sites\/all\/themes\/daisy\/css\/lightwindow.css":1,"public:\/\/at_css\/daisy.responsive.layout.css":1,"sites\/all\/themes\/at-commerce\/css\/styles.slideshow.css":1,"http:\/\/fonts.googleapis.com\/css?family=Open+Sans":1,"sites\/all\/themes\/at-commerce\/css\/ie-6.css":1,"sites\/all\/themes\/at-commerce\/css\/ie-lte-7.css":1,"sites\/all\/themes\/at-commerce\/css\/ie-8.css":1,"sites\/all\/themes\/at-commerce\/css\/ie-lte-9.css":1,"sites\/all\/themes\/daisy\/css\/ie-8.css":1,"sites\/all\/themes\/daisy\/css\/ie-lte-7.css":1,"sites\/all\/themes\/daisy\/css\/ie-lte-9.css":1}}});</script>
<!--[if lt IE 9]><script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

<script type="text/javascript" src="/sites/all/libraries/tabber/tabber-minimized.js">
</script>
<script type="text/javascript">
document.write('<style type="text/css">.tabber{display:none;}<\/style>');
</script>
</head>

<body class="html not-front not-logged-in one-sidebar sidebar-first page-node page-node- page-node-1 page-type-page section-node site-name-hidden color-scheme-default daisy gecko win fs-medium bb-n hl-l mb-dd mma-l ia-c snc-n snw-n  sns-n ssc-n ssw-n  sss-n ptc-n ptw-n pta-l pts-n ntc-n ntw-n nta-l nts-n ctc-n ctw-n cta-l cts-n btc-uc btw-n bta-l bts-n itrc-0 isrc-6 bf-l snf-gwf-open-sans ssf-gwf-open-sans mmf-sss ptf-gwf-open-sans ntf-gwf-open-sans ctf-gwf-open-sans btf-gwf-open-sans hide-ss-nav">
  <div id="skip-link">
    <a href="#main-content" class="element-invisible element-focusable">Skip to main content</a>
  </div>
    <div id="page-wrapper"><div id="page">

  <div id="header-wrapper">

    <div class="container clearfix">
      <header class="clearfix">

        <div id="branding" class="clearfix no-logo site-name-hidden no-slogan">

                      <hgroup class="element-invisible">
                              <h1 id="site-name" class="element-invisible"><a href="/" title="Home page">JSFix</a></h1>
                                        </hgroup>
                  </div>

      </header>
    </div>
  </div>

  <div id="content-wrapper" class="no-secondary"><div class="container">

    <div id="columns"><div class="columns-inner clearfix">
      <div id="content-column"><div class="content-inner">

                <section id="main-content">

          <div id="content">  <div class="region region-content">
    <div id="block-system-main" class="block block-system block-odd block-count-1 block-region-content">
  <div class="block-inner clearfix">
                <div class="block-content content no-title">
      <article id="article-1" class="article article-type-page odd article-full clearfix" about="/node/1" typeof="foaf:Document" role="article">
  <div class="article-inner clearfix">

              <header class="clearfix">

                  <h1 property="dc:title" datatype="" class="article-title">
                          Test Page                      </h1>

      </header>

    <div class="article-content clearfix">
    <div class="field field-name-body field-type-text-with-summary field-label-hidden view-mode-full"><div class="field-items"><div class="field-item even" property="content:encoded"><div class="tabber">
<div class="tabbertab">
<h3>Overview</h3>
<p><br /></p>
<p>Bacon ipsum dolor sit amet sausage t-bone spare ribs ham hock drumstick sirloin bresaola fatback. Fatback tongue pork belly shoulder. Beef ribs fatback salami ball tip spare ribs pork belly chuck ham hock shank sausage pork loin shankle kielbasa. Meatball jowl jerky prosciutto, turducken brisket tenderloin rump capicola. Ham hock pork loin beef capicola andouille corned beef salami short ribs pork sirloin turkey fatback bresaola tenderloin.</p>
</div>
<div class="tabbertab">
<h3>Specifications</h3>
<p>
Bacon ipsum dolor sit amet sausage t-bone spare ribs ham hock drumstick sirloin bresaola fatback. Fatback tongue pork belly shoulder. Beef ribs fatback salami ball tip spare ribs pork belly chuck ham hock shank sausage pork loin shankle kielbasa. Meatball jowl jerky prosciutto, turducken brisket tenderloin rump capicola. Ham hock pork loin beef capicola andouille corned beef salami short ribs pork sirloin turkey fatback bresaola tenderloin.</p>
<p>Biltong kielbasa spare ribs pork fatback. Short loin shankle bresaola short ribs chuck. Spare ribs pig prosciutto tongue capicola, ribeye shoulder turducken sausage hamburger t-bone bresaola meatloaf brisket. Filet mignon shank rump tri-tip swine, shankle bresaola. Beef chuck swine ham hock flank corned beef pork chop spare ribs capicola turducken shankle bresaola t-bone tenderloin pig. Ground round strip steak flank, chuck shoulder rump beef drumstick tri-tip venison pork belly meatball beef ribs pork loin.</p>
<p>Ham hock sausage short loin ball tip beef ribs ham spare ribs, andouille hamburger beef shoulder. Flank jowl bacon boudin kielbasa, chicken rump pork ribeye turkey andouille pork belly. Prosciutto biltong beef ribs, t-bone short ribs pancetta salami rump spare ribs ham hock kielbasa meatloaf. Shoulder tongue tri-tip capicola shank, chicken cow ham hock hamburger ribeye meatloaf. Beef ribs hamburger turkey t-bone leberkas pork loin. Shoulder capicola brisket, ground round andouille pastrami kielbasa ham hock t-bone hamburger boudin pork loin pork belly.</p>
<p>Meatloaf salami fatback pork chop shankle. Sausage meatball ground round rump prosciutto. Jerky pork belly bresaola tenderloin tail spare ribs pig, chicken ribeye pork chop pork turducken pastrami pancetta. Pancetta chuck prosciutto venison bacon fatback. Jowl turducken leberkas ham turkey. Pork belly fatback ball tip tenderloin andouille ham hock swine jowl rump pork chop tongue pancetta frankfurter ground round.</p>
<p>Hamburger pork belly sirloin fatback beef shank chicken leberkas pig sausage. Jowl ground round bacon tail sausage sirloin. Brisket ham hock drumstick ground round tenderloin chuck pork chop, pancetta swine shankle ball tip. Turkey swine pig beef ribs. Pork belly jerky pork flank, frankfurter ground round pork loin chicken.
</p></div>
<div class="tabbertab">
<h3>Downloads</h3>
<p>Bacon ipsum dolor sit amet sausage t-bone spare ribs ham hock drumstick sirloin bresaola fatback. Fatback tongue pork belly shoulder. Beef ribs fatback salami ball tip spare ribs pork belly chuck ham hock shank sausage pork loin shankle kielbasa. Meatball jowl jerky prosciutto, turducken brisket tenderloin rump capicola. Ham hock pork loin beef capicola andouille corned beef salami short ribs pork sirloin turkey fatback bresaola tenderloin.</p>
<p>Biltong kielbasa spare ribs pork fatback. Short loin shankle bresaola short ribs chuck. Spare ribs pig prosciutto tongue capicola, ribeye shoulder turducken sausage hamburger t-bone bresaola meatloaf brisket. Filet mignon shank rump tri-tip swine, shankle bresaola. Beef chuck swine ham hock flank corned beef pork chop spare ribs capicola turducken shankle bresaola t-bone tenderloin pig. Ground round strip steak flank, chuck shoulder rump beef drumstick tri-tip venison pork belly meatball beef ribs pork loin.</p>
<p>Ham hock sausage short loin ball tip beef ribs ham spare ribs, andouille hamburger beef shoulder. Flank jowl bacon boudin kielbasa, chicken rump pork ribeye turkey andouille pork belly. Prosciutto biltong beef ribs, t-bone short ribs pancetta salami rump spare ribs ham hock kielbasa meatloaf. Shoulder tongue tri-tip capicola shank, chicken cow ham hock hamburger ribeye meatloaf. Beef ribs hamburger turkey t-bone leberkas pork loin. Shoulder capicola brisket, ground round andouille pastrami kielbasa ham hock t-bone hamburger boudin pork loin pork belly.</p>
</div>
</div>
</div></div></div>    </div>

  </div>
</article>
    </div>
  </div>
</div>
  </div>
</div>

        </section>

      </div></div>

        <div class="region region-sidebar-first sidebar">
    <section id="block-user-login" class="block block-user block-odd block-count-2 block-region-sidebar-first">
  <div class="block-inner clearfix">
              <h2 class="block-title">User login</h2>
            <div class="block-content content">
      <form action="/node/1?destination=node/1" method="post" id="user-login-form" accept-charset="UTF-8"><div><div class="form-item form-type-textfield form-item-name">
  <label for="edit-name">Username <span class="form-required" title="This field is required.">*</span></label>
 <input type="text" id="edit-name" name="name" value="" size="15" maxlength="60" class="form-text required" />
</div>
<div class="form-item form-type-password form-item-pass">
  <label for="edit-pass">Password <span class="form-required" title="This field is required.">*</span></label>
 <input type="password" id="edit-pass" name="pass" size="15" maxlength="60" class="form-text required" />
</div>
<div class="item-list"><ul><li class="even first"><a href="/user/register" title="Create a new user account.">Create new account</a></li><li class="odd last"><a href="/user/password" title="Request new password via e-mail.">Request new password</a></li></ul></div><input type="hidden" name="form_build_id" value="form-2JWfMgxjlSDsKHLtwuQhcdA4TzwjjNyIydl0i8x1oTM" />
<input type="hidden" name="form_id" value="user_login_block" />
<div class="form-actions form-wrapper" id="edit-actions"><input type="submit" id="edit-submit" name="op" value="Log in" class="form-submit" /></div></div></form>    </div>
  </div>
</section>
  </div>

    </div></div>

  </div></div>

  <div id="page-footer">

          <div id="footer-wrapper"><div class="container clearfix">
        <footer class="clearfix">
            <div class="region region-footer">
    <div id="block-system-powered-by" class="block block-system block-odd block-count-3 block-region-footer">
  <div class="block-inner clearfix">
                <div class="block-content content no-title">
      <span>Powered by <a href="http://drupal.org">Drupal</a></span>    </div>
  </div>
</div>
  </div>
        </footer>
     </div></div>
      </div>

</div></div>
  </body>
</html> 
```

**更新 2**

忘了提到任何调整窗口大小（无论是高度还是宽度）都会暂时自动解决问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T19:41:24.143

看起来这里发生了一些事情。首先在css中的某个地方你有一个'scroll'或'auto'属性集，它允许页面高度改变。其次，带有页脚的 vid 没有从它的外观设置宽度和高度。相反，它只是填充了中心 div 没有填充文本的任何空间。所以很可能没有定义的高度。我还建议确保底部页脚设置为“底部：0px”-为我们提供一些 css 和 html 代码以提供更多帮助？

将此代码添加到 footer.clearfix：

```
 margin-bottom: 0px;
    height: 30px; 
```

在内容包装棒内部：

```
 height: 100%;
    overflow: auto; 
```

它会添加一个滚动条，但如果你这样做，它会让你的问题变得非常明显。问题是你在重复代码。铁杆。每次您单击某个选项卡时，该页脚都会重新创建自己，而不是一次硬编码坐在底部，或者您在“页脚”和“页面”内部都有一个页脚。认为这是第二个......而“页面”中的那个正在引起问题。如果您打算复制它并且只想要页面大小标准，那么只需添加内容包装器更改。如果假定页脚是标准尺寸，请添加 footer.clearfix 更改以了解您的问题。

如果您还没有为您的浏览器安装 Firebug，建议您安装它。它将允许您“检查”元素并更改 css 以更快地弄清楚发生了什么。

# c++ - vc++ 2010“数组不是std的成员”错误

> ID：11994248
> 
> 赞同：3
> 
> 时间：2012-08-16T19:37:57.957
> 
> 标签：c++, arrays, visual-studio-2010, stl, c++11

以下 C++11 代码位：

```
std::array<float, 3> A; 
```

获取错误消息：

```
array is not a member of std. 
```

在 Visual Studio 中，单词“array”是蓝色的，表示它是一个关键字。这是 CLI 的扩展。我以为我之前通过转到*Properties/C C++/Language*并将“禁用语言扩展”设置为*Yes 来修复它。*我还将*Properties/General*设置为*No Common Language Support*。仍然没有喜悦。

如何使程序工作而不考虑`array`在编辑器中作为关键字的可见性？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-16T19:39:18.277

您需要包含`<array>`标题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-08T23:28:32.467

**即使使用带有 g++ 的 Ubuntu 上的“array”指令，也可以重现此错误：**

例如，这个 C++ 代码：

```
#include <iostream>
#include <array>

using namespace std;
int main(){
    std::array<int, 5> myints;
    cout << myints.size();
} 
```

编译并运行如下：

```
g++ -o s s.cpp
./s 
```

打印错误：

```
/usr/include/c++/4.6/bits/c++0x_warning.h:32:2: error: #error This 
file requires compiler and library support for the upcoming ISO 
C++ standard, C++0x. This support is currently experimental, and 
must be enabled with the -std=c++0x or -std=gnu++0x compiler options.
s.cpp: In function ‘int main()’:
s.cpp:6:5: error: ‘array’ is not a member of ‘std’ 
```

解决方案：使用编译器选项编译它`-std=c++0x`：

```
g++ -o s s.cpp -std=c++0x
./s 
```

然后程序正确打印：

```
5 
```

# iphone - 如何为 App Store 和主屏幕设置不同的图标？

> ID：11994256
> 
> 赞同：2
> 
> 时间：2012-08-16T19:38:27.367
> 
> 标签：iphone, ios, xcode, icons, app-store

我知道应用程序的所有图标都应该相同，但我正在开发一个应用程序，它**需要**为 App Store 使用不同的图标。

如何在 Xcode 中设置它？我在文档中找不到这个。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T19:44:24.050

iOS 设备主屏幕上的应用程序图标是您包含在项目中的图标，而在 iOS 设备和桌面 iTunes 上的 AppStore 中显示的图标是您在提交应用程序以供审核之前通过 iTunes Connect 上传的图标（1024x1024 像素） .

[您可以在docs](http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/mobilehig/IconsImages/IconsImages.html)中找到有关所有这些图标的更多信息。

# javascript - 将谷歌地理编码（来自url）数据加载到javascript变量中

> ID：11994259
> 
> 赞同：0
> 
> 时间：2012-08-16T19:38:34.353
> 
> 标签：javascript, jquery, html, geocoding

谷歌提供了一项服务，您可以在其中输入地址，它会返回纬度和经度（以及其他信息）。使用这个 google 服务的方法是调用一个返回 JSON 的 url。要调用的谷歌 URL 是这样的：`http://maps.googleapis.com/maps/api/geocode/output?parameters`我正在尝试将其输出转换为我可以浏览并选择所需变量的 JSON。

这是我的代码：

```
address_name = "1600 Amphitheatre Parkway, Mountain View, CA";
address_name = address_name.replace(/ /gi,'+');

var geocode = "http://maps.googleapis.com/maps/api/geocode/json?address="+address_name+"&sensor=true";
//alert(geocode)
var json = get_content_from(geocode) 
```

我曾尝试使用 .load() 但要么我做错了事，要么就是无法正常工作。有没有办法将它加载到一个名为 json 的变量中？

抱歉，如果这是微不足道的，我已经尝试过搜索，但我不确定在这种情况下关键字是什么，所以我什么也没想到。

谢谢，山姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T19:55:48.927

试试这个（并确保包含 jQuery）。

```
address_name = "1600 Amphitheatre Parkway, Mountain View, CA";
address_name = address_name.replace(/ /gi,'+');

var geocode = "http://maps.googleapis.com/maps/api/geocode/json?address="+address_name+"&sensor=true";

$.ajax({
    url:geocode,
    success: function(json){
        console.log(json);
        var data = eval('(' + json + ')');
        console.log(data);
    }
}); 
```

# javascript - jQuery 'click' 自动触发 'live'

> ID：11994260
> 
> 赞同：5
> 
> 时间：2012-08-16T19:38:34.920
> 
> 标签：javascript, jquery

这是一段简单的代码：

HTML：

```
<div id="close">Click me</div> 
```

JS代码：

```
$("#close").click(function(){
    alert("1");
    $(this).attr('id','expand');
});

$("#expand").live('click', function(){
    alert("2");
    $(this).attr('id','close');            
}); 
```

问题：当我点击“关闭”时，它也会自动调用 live()。在 jsfiddle 中看到这个：http: [//jsfiddle.net/uFJkg/](http://jsfiddle.net/uFJkg/)

是因为我将同一个元素的 id 从“关闭”更改为“扩展”吗？我该如何解决这个问题？

我试过了：

```
 $("#expand").die().live('click', function() 
```

但它没有用。我尝试了 event.stopPropagation() 但这也没有帮助。我尝试使用 id 为“expand”的单独 div 并将其隐藏在 document.ready 上，但由于某种原因它也无法正常工作。

然后我已经尝试过，因为我读到 live() 在 jQuery 1.7+ 中已被弃用：

```
$("#expand").on('click', function(){ 
```

这也行不通。

有什么想法吗？我认为一双新的眼睛将能够发现我所缺少的。

谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-16T19:41:30.410

在这种情况下，您需要两个委托事件*（又名实时）处理程序。*因为，您在两个`id`s 之间切换，并且这种切换使两个`id`s 对于 DOM 都是动态的。

```
$("body").on("click", "#close", function(){
    alert("1");
    $(this).attr('id','expand');
});

$("body").on("click", "#expand", function(){
    alert("2");
    $(this).attr('id','close');            
}); 
```

***[演示](http://jsfiddle.net/uFJkg/1/)***

## 笔记

由于`live()`已***[弃用](http://api.jquery.com/category/deprecated/)***，因此不`live()`用于***[`.on()`](http://api.jquery.com/on)***委托事件处理。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-16T19:44:48.950

这与`live`附加事件的方式以及事件冒泡的工作方式有关。

`.live`将事件处理程序附加到`document`. 当文档注册一个事件时，它会查看`target`该事件的内容。如果它匹配传递给的选择器`.live`，它会触发处理程序。

因此，当您单击 时`#close`，会发生以下情况：

1.  注册的点击事件`#close`，处理程序触发。
2.  `#close`改为`#expand`
3.  click 事件使 DOM 冒泡，直到它到达`document`
4.  点击事件注册`document`，文档看到目标元素的ID是`#expand`，并触发事件处理程序

解决此问题的方法是添加`stopPropagation()`到您的处理程序：

```
$("#close").click(function(e){
  if(!e) { e = window.event; }
  e.stopPropagation();

  alert("1");
  $(this).attr('id','expand');
}); 
```

但是，我建议不要使用`live`并查看`delegate`或`on`处理委托事件。

我还建议不要更改 ID。如果你想保持关闭/展开的想法，我会尝试这样的事情：

```
<div id="toggler" class="close">Close</div>

$('#toggler').on('click',function() {
    $(this).toggleClass('close').toggleClass('expand');
}); 
```

一个事件处理程序，没有委托，因为它与永久 ID 挂钩

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T19:42:58.027

首先，更改 id 的运行时不是很干净。你正面临其中的一个结果。

您可以考虑使用数据属性。jQuery 可以通过访问 data 属性来读取它们。

例如。

```
$("#myObject").data("expanded", true); 
```

这样就没有必要改变你的身份证了。

# php - 关于如何根据条件交替行来显示 MYSQL 数据的 PHP 或 MYSQL 解决方案

> ID：11994263
> 
> 赞同：0
> 
> 时间：2012-08-16T19:38:44.410
> 
> 标签：php, mysql

我一直在寻找这个问题的解决方案，问了一个相关的问题，但没有运气。我会尽量直截了当地问，也许有人可以解释一下。

*如果这个问题得到一个有效的答案，我会删除类似的。我相信这个问题更清楚。*

在数据库表中，我存储有关“二手车”的数据。

假设我有**5 辆宝马**二手车（我希望：）、**4 辆梅赛德斯**和**20 辆沃克斯豪尔**。

它们在表内按 rand 排序。

我查询数据并对其应用分页，**每页显示 6 辆汽车**（共 5 页）。

我怎样才能显示这样的数据：

第 1 页：

*   第一辆宝马，第一辆奔驰，第一辆沃克斯豪尔，
*   第二辆宝马，第二辆奔驰，第二辆沃克斯豪尔

第2页：

*   第三辆宝马，第三辆奔驰，第三辆沃克斯豪尔，
*   第四辆宝马，第四辆奔驰，第四辆沃克斯豪尔

第 3 页：

*   第五辆宝马，第五辆沃克斯豪尔，第六辆沃克斯豪尔，
*   第七沃克斯豪尔，八沃克斯豪尔，夜沃克斯豪尔

第 4 页和第 5 页：

*   将显示所有剩余的 Vauxhalls。

    1.  有些人说这可以通过使用一个非常复杂的 mysql 查询来完成，该查询需要永远执行。[在这里](https://stackoverflow.com/questions/1959414/mysql-how-do-i-order-results-by-alternating-1-2-3-1-2-3-1-2-3-rows-i)查看这个堆栈问题。

    2.  用户 newfurniturey 为类似问题提供了[解决方案](https://stackoverflow.com/questions/11971118/php-solution-to-alternate-results-from-a-query-by-a-variable-1-2-3-4-1-2-3-4)，但没有奏效。我想我的问题并不清楚。我非常感谢他。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T21:12:34.227

因此，您有一个类别（品牌）和一个车辆（车辆 ID），并且您希望每个页面都显示每个品牌的一个车辆，除非该品牌上没有更多车辆？

假设您有一个`Vehicles`包含字段`make`和的表`vin`：

首先找到品牌：

```
$q = "SELECT make FROM Vehicles"
$r=mysqli_query($dbconnect, $q);
$make= mysqli_fetch_array($r, MYSQLI_ASSOC);
array_unshift($make, "nomake"); //add so the first make is not a position zero 
```

然后，构建一个将 vin 与 make 匹配的数组：

```
$q = "SELECT make, vin FROM Vehicles ORDER BY make"
$r=mysqli_query($dbconnect, $q);
while($record = mysqli_fetch_array($r, MYSQLI_ASSOC)){
  $vehicle[$record['vin']]=$record['make'];
} 
```

然后，按照页面的顺序构建数组：

```
$onpage=0;
$numperpage = 5; //number of vehicles per page
foreach($vehicle as $vkey => $vvalue){
  if (array_search($vvalue,$lastvalue)){
    $finalorder[$vkey] = $vvalue;
    $lastvalue[$onpage]= $vvalue;
    $onpage=$onpage<$numperpage?$onpage++:0;
  }
  if($onpage==0){
    unset($lastvalue);
  }
}
var_dump($finalorder); 
```

这可能需要稍微清理一下，但它应该可以工作。

# iphone - Xcode Instruments 在设备上运行时无法拍摄泄漏快照

> ID：11994264
> 
> 赞同：12
> 
> 时间：2012-08-16T19:38:52.847
> 
> 标签：iphone, ios, xcode, xcode-instruments

最近，在设备上运行应用程序时，我无法使用 Instruments 测试泄漏。Instruments 将尝试拍摄快照，但状态将冻结在“Analyzing Process”。起初我以为这只是花时间，但我已经等了 20 多分钟，但没有运气。不过，它在模拟器上仍然可以正常工作。

到目前为止，我已经尝试过： - 使用具有不同 ios 版本的其他设备 - 重新启动所有设备 - 将 Xcode 更新到最新版本 - 运行许多不同的应用程序 - 关闭自动快照并手动尝试

不幸的是，以上都没有任何区别，如果可能的话，除了重新安装 Instruments 之外，我已经没有什么想法了。

有谁知道可能导致这种情况的原因？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T07:46:21.687

我也有同样的问题，我已经通过添加我的项目的开发人员资料来解决它。

您必须在 Organizer 中添加项目的 Developer Profile，并将 Build Setting -> Code Signing 设置为 Developer Profile。之后，您可以看到仪器中的泄漏。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T15:08:40.467

在最近的 XCode 更新后也遇到了这个问题，我的 Profiling 方案设置为在需要“Debug”时使用“Release”的构建配置 - 这允许分析完成。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T20:53:00.057

您介意提及您的 XCode 版本吗？我有同样的问题，但升级到 XCode 4.5.1 后它工作正常。您也可以尝试一种旧技巧 - 在 Instruments 和 Xcode 之间切换（有时也可以）。

# javascript - Safari 扩展 - 消息

> ID：11994266
> 
> 赞同：2
> 
> 时间：2012-08-16T19:39:09.260
> 
> 标签：javascript, safari, safari-extension

这是我的第一个 Safari 扩展程序，到目前为止我喜欢它安静一点。我正在尝试添加一个扩展栏，它与注入的.js 页面交互并通过 jquery .toggle(); 切换页面上的项目；

我已经能够将 jQuery 加载到页面中没有问题，但是当谈到从扩展栏发送消息到注入的.js 时，我做不到。我今天花了 8 个多小时查看 Apple 上的开发者页面。我唯一能做的就是

扩展栏：

```
<!DOCTYPE html>
<html>
<head>
    <title>Board Tools</title> <!-- Extension Bar -->
    <script type="text/javascript" src="jQuery.min.js"></script>
    <script type="text/javascript">
        const myGlobal = safari.extension.globalPage.contentWindow;

    function ToggleBoard(){ 
        myGlobal.test();    
    }
</script>

</head>
<body>

    <input type="button" id="board" value="Board Toggle" onClick="ToggleBoard();">

</body>
</html> 
```

全局 HTML：

```
<!DOCTYPE HTML>
<html>
<head>
    <title>global page</title>
    <script type="text/javascript">

        function test() {
            alert("1");
            event.target.page.dispatchMessage("test", "test");
            alert("2");
    }

   </script>
</head>
<body> </body>
</html> 
```

注入的.js：

```
function test(msgEvent) {
    alert(msgEvent.name);
}
// register for message events
safari.self.addEventListener("message", test, false); 
```

我可以从扩展栏中调用 ToggleBoard() 函数。ToggleBoard() 函数可以从全局 HTML 调用 test() 函数。当在全局 HTML 页面上调用 test() 函数时，第一个警报会触发，而第二个则不会。我至少已经把它缩小到那么远了。我得到我试图发送消息的方式可能是错误的，但这就是这里所说的：[https ://developer.apple.com/library/archive/documentation/Tools/Conceptual/SafariExtensionGuide/MessagesandProxies/MessagesandProxies.html #//apple_ref/doc/uid/TP40009977-CH14-SW1](https://developer.apple.com/library/archive/documentation/Tools/Conceptual/SafariExtensionGuide/MessagesandProxies/MessagesandProxies.html#//apple_ref/doc/uid/TP40009977-CH14-SW1)

只是为了看看这是我的错误还是开发页面上的一些愚蠢的东西，我复制了他们页面上的确切代码并仅使用了 Global HTML 和 Injected.js，但我仍然没有得到我想要的结果。

已解决：我选择的答案确实适用于我遇到的问题。这不是每个人的确切答案，但确实如此，以及评论帮助我理顺了我的代码。为了让各种扩展组件正确发送消息，我需要将扩展​​远程访问设置为全部，然后将 URL 模式添加到白名单。我的扩展只在我想要的页面上触发，我可以使用消息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T17:29:21.617

在您`test`的全局页面中的函数中，`event`不引用任何内容，因为该函数不是事件处理程序。如果要定位活动选项卡，请改用：

```
safari.application.activeBrowserWindow.activeTab.page.dispatchMessage('test, 'test'); 
```

如果稍后您发现您希望扩展栏或全局页面响应来自注入脚本的消息，您可以在任一位置添加类似这样的内容：

```
safari.application.addEventListener('message', function (e) {
    if (e.name === 'whatever') {
        e.target.page.dispatchMessage('foo', 'bar');
    }
}, false); 
```

如果您想从注入的脚本向全局页面或扩展栏发送消息，请在全局页面或扩展栏中使用`safari.self.tab.dispatchMessage`并拥有一个“消息”事件处理程序。

# objective-c - MasterDetail OSX 应用程序在基于视图的模式下具有 SourceView

> ID：11994269
> 
> 赞同：0
> 
> 时间：2012-08-16T19:39:21.737
> 
> 标签：objective-c, cocoa, cocoa-bindings

我正在努力设置正确的绑定以使 SourceView (OutlineView) 在基于视图的模式下与 TreeController 一起使用。它在基于单元的模式下可以正常工作。

不幸的是我找不到如何设置标题和标题文本，我得到的只是空的东西：≤≤

我得到什么：

![在此处输入图像描述](../Images/a1e60a4afa0baa630e8d447d6fa59ade.png)

如果您想深入了解 XCode 项目：

[https://www.dropbox.com/s/qz3m9p5vd2qvngb/MasterDetail.zip](https://www.dropbox.com/s/qz3m9p5vd2qvngb/MasterDetail.zip)

从另一个帖子中获取数据：

```
[
    {
        "itemName": "Item 1",
        "children": []
    },
    {
        "itemName": "Item 2",
        "children": [
            {
                "itemName": "Item 2.1",
                "children": []
            },
            {
                "itemName": "Item 2.2",
                "children": [
                    {
                        "itemName": "Item 2.2.1",
                        "children": []
                    },
                    {
                        "itemName": "Item 2.2.2",
                        "children": []
                    }
                ]
            }
        ]
    },
    {
        "itemName": "Item 3",
        "children": []
    }
] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T07:23:15.943

您必须至少实现，`-outlineView:viewForTableColumn:item:`以便大纲视图知道如何显示数据。在大纲视图数据源中，实现如下方法：

```
- (NSView *)outlineView:(NSOutlineView *)outlineView viewForTableColumn:(NSTableColumn *)tableColumn item:(id)item {

    NSView *cellView = [outlineView makeViewWithIdentifier:@"DataCell" owner:self];
    return cellView;
} 
```

如果经过测试，这是您的项目，现在将显示单元格。查看`NSOutlineViewData`/`NSOutlineViewDelegate`协议以获取更多信息。

# java - 在java中解析XML文件的元数据属性

> ID：11994277
> 
> 赞同：1
> 
> 时间：2012-08-16T19:39:52.933
> 
> 标签：java, xml, dom

我正在尝试解析格式为的 XML 文件。

```
<parent tag>
    <child tag>  
        <element key="property1">value</element> 
        <element key="property2">value</element>
    </child tag>
</parent tag> 
```

如何获得`element`标签的价值`property1`？我的代码如下。

```
public static ArrayList<String> parseXML(URL url_str,URLConnection conn_str,String root_tag,String child_tag) throws ParserConfigurationException, SAXException, IOException 
{ 
    String s = null;
    ArrayList <String> List_value=new ArrayList<String>();       
    DocumentBuilderFactory dbF = DocumentBuilderFactory.newInstance();
    DocumentBuilder dBuilder = dbF.newDocumentBuilder();
    Document doc = dBuilder.parse(conn_str.getInputStream());
    doc.getDocumentElement().normalize();
    System.out.println("Root : "+doc.getDocumentElement());
    System.out.println("****************");
    NodeList nList= doc.getElementsByTagName(root_tag);
    System.out.println("****************");

    for (int i = 0; i < nList.getLength(); i++) {
         Node node = nList.item(i);
         if (node.getNodeType() == Node.ELEMENT_NODE) {
             Element element = (Element) node;
             NodeList nodelist1 = element.getElementsByTagName(child_tag);
             for (int i1 = 0; i1 < nodelist1.getLength(); i1++) 
             {
                 Element element1 = (Element) nodelist1.item(i1);
                 NodeList fstNm = element1.getChildNodes();
                 s=fstNm.item(0).getNodeValue();

                List_value.add(s);
            }
            for(int c=0;c<List_value.size();c++)
            {
                    System.out.println(List_value.get(c));
            }

        }

    }
    return List_value;
} 
```

我正在使用 DOM 解析器。请帮忙。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T19:56:01.957

这在这里完成了工作（DOM + XPath），更多文档在这里：[http ://www.ibm.com/developerworks/library/x-javaxpathapi/index.html](http://www.ibm.com/developerworks/library/x-javaxpathapi/index.html)

这是关于 xpath 及其工作原理的一个很好的解释：[http ://www.xmlplease.com/axis](http://www.xmlplease.com/axis)

```
import javax.xml.parsers.DocumentBuilder;
import javax.xml.parsers.DocumentBuilderFactory;
import javax.xml.xpath.XPath;
import javax.xml.xpath.XPathConstants;
import javax.xml.xpath.XPathExpression;
import javax.xml.xpath.XPathFactory;

import org.w3c.dom.Document;
import org.w3c.dom.NodeList;

public class XmlParseTest {
    public static void main(String[] args) throws Exception {
        DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
        factory.setNamespaceAware(true);
        DocumentBuilder builder = factory.newDocumentBuilder();
        Document doc = builder.parse("test.xml");

        XPathFactory xpathFactory = XPathFactory.newInstance();
        XPath xpath = xpathFactory.newXPath();
        XPathExpression expr = xpath.compile("//element[@key='property1']/text()");
        Object result = expr.evaluate(doc, XPathConstants.NODESET);

        NodeList nodes = (NodeList) result;
        for (int i = 0; i < nodes.getLength(); i++) {
            System.out.println(nodes.item(i).getNodeValue()); 
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T19:44:33.863

[“An Introduction to APIs for XML Processing”](http://java.sun.com/developer/technicalArticles/xml/JavaTechandXML/#code14)是开始学习 Java 中 XML 解析的好起点

# sql-server - 在 CONTAINSTABLE 中找不到近似匹配项

> ID：11994281
> 
> 赞同：3
> 
> 时间：2012-08-16T19:40:03.067
> 
> 标签：sql-server, sql-server-2008, sql-server-2005, full-text-search, containstable

我在用**`SQL Server 2008`**

## DDL

```
CREATE TABLE [dbo].[t](
    [words] [varchar](1000) NULL,
    [id] [int] IDENTITY(1,1) NOT NULL
) ON [PRIMARY] 
```

## DML

```
insert into t(words)values('this is my laptop')
insert into t(words)values('this does not contains headphone') 
```

## SQL 查询

```
SELECT *
FROM 
t as t
JOIN CONTAINSTABLE(t, words,'"headphone*"', 10) fulltextSearch
ON
t.Id = fulltextSearch.[KEY] 
```

## 结果

没有找到记录

我期待一个记录。任何的想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T19:44:16.047

“this”很可能是一个干扰词（如“the”、“and”等），因此它不会包含在索引中。尝试在文本中搜索一个真实的单词。

- 编辑 -

好吧，不是这样...

我尝试了您的代码，它按预期工作-查询返回了一条记录。唯一的区别是我将 [id] 定义为主键（您也必须这样做，否则您无法创建索引）。我打赌您的索引没有填充 - 在 SSMS 中，右键单击表格，选择“全文索引”->“开始完整填充”。

# shell - 限制Linux命令单位时间执行次数的方法

> ID：11994282
> 
> 赞同：1
> 
> 时间：2012-08-16T19:40:10.580
> 
> 标签：shell, time, limit, rate

我想限制给定时间段内命令的执行次数。我知道一种方法可以做到这一点，但我的方法并不整洁，我希望能提出更好的方法来实现这一点。具体来说，我正在处理的场景如下：

我正在使用程序 Motion 来监控和记录来自网络摄像头的图像。该程序会保存图像并在检测到运动时执行命令。我希望它执行的命令之一是在检测到运动时向我发送电子邮件的简单命令。出现了一个困难，因为该命令最终可能每秒执行多次。这会很快导致在很短的时间内发送数千封电子邮件。我想我想要的是如下程序：

```
on motion detected
 Has it been more than 1 minute since motion was last detected?
  If it has, send a notification e-mail.
  If it has not, don't send a notification e-mail. 
```

我想用一个简洁的命令来结束这个过程。我目前的方法涉及保存一个临时文件，我怀疑这不是最简洁的做事方式。

感谢您对此的任何想法！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T19:26:24.247

好吧，这是我每次检测到运动时运行的脚本类型：

```
#!/bin/bash
    #user variables #userSet
        timeIntervalInSecondsBetweenCommandExecutions=120
        lastExecutionTimeFileName="last_command_execution_time.txt"
        command=$(cat << 2012-08-20T1654
twidge update "@<Twitter account> motion detected $(date "+%Y-%m-%dT%H%M")";
echo "motion detected" | festival --tts
2012-08-20T1654
)
    # Get the current time.
        currentTimeEpoch="$(date +%s)"
    # Check if the last execution time file exists. If it does not exist, run the command. If it does exist, check the time stored in it against the current time.
        if [ -e ${lastExecutionTimeFileName} ]; then
            lastCommandExecutionTimeEpoch="$(cat "${lastExecutionTimeFileName}")"
            timeInSecondsSinceLastCommandExecution="$(echo "${currentTimeEpoch}-${lastCommandExecutionTimeEpoch}" | bc)"
            # If the time since the last execution is greater than the time interval between command executions, execute the command and save the current time to the last execution time file.
                if [ ${timeInSecondsSinceLastCommandExecution} -ge ${timeIntervalInSecondsBetweenCommandExecutions} ]; then
                    eval ${command}
                    echo "${currentTimeEpoch}" > "${lastExecutionTimeFileName}"
                fi
        else
            eval ${command}
        fi 
```

简而言之，它使用文件来记住上次运行的时间。所以，这是一个答案，但我仍然认为它不优雅。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T21:48:19.270

传统的方法是创建一个文件，使用它在其内容中或通过其元数据（`mtime`等）存储时间戳。没有其他标准方法可以在进程之外拥有持久信息 - 我假设您会认为数据库等是矫枉过正的。

`motion`但是，如果调用者（例如）*阻塞*等待您的进程完成，则可能有另一种选择。在这种情况下，您的脚本可能如下所示：

```
#!/bin/sh

echo "The Martians are coming!" | mail -s "Invasion" user@example.com

sleep 60 
```

最后一行确保任何等待此脚本终止的调用者都必须等待至少 60 秒，这施加了最大速率限制。

# url - 网站文件名中应避免哪些字符

> ID：11994283
> 
> 赞同：0
> 
> 时间：2012-08-16T19:40:11.017
> 
> 标签：url, special-characters, filenames

我将许多 PDF 文件上传到网络服务器并将它们链接到网站。有时文件名包含非英文字符会导致 404 错误，并且浏览器会在地址栏中显示奇怪的字符，而重音字符应该是。应该避免哪些其他类型的字符？例如，链接到名称中带有“&”或空格的文件是不是一个坏主意？我们使用 repliweb，有人告诉我它在某些非典型字符上崩溃，任何人都可以验证或反驳这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T19:46:06.173

通常，您应该始终（不仅仅是在服务器上 - 为了不同操作系统和语言之间的可移植性，这通常是一个好习惯）避免包含任何不包含以下字符的文件名：

*   字母数字英文字符（a...z、A...Z、0...9）
*   下划线 (_)
*   也许是一个连字符 (-)

# java - 让用户输入新活动的名称

> ID：11994285
> 
> 赞同：1
> 
> 时间：2012-08-16T19:40:16.213
> 
> 标签：java, android, android-activity, input

我想知道如何让用户在 Activity1 中输入的内容成为 Activity 2 启动时的标题。

这是 Activity1 的 createEvent 按钮。请注意，它是从 eventNamebox 中提取的。用户将在此处输入要调用的事件。我希望将该名称发送到新活动（Activity2），并且该名称是该用户输入。

```
public void createEvent(View view)
{
    Intent intent = new Intent(this, Launch.class);
    EditText editText = (EditText) findViewById(R.id.eventNameBox);
    String message = editText.getText().toString();
    intent.putExtra(EXTRA_MESSAGE, message);
    startActivity(intent);

} 
```

至于Activity2，这就是我所拥有的

```
Intent intent = getIntent();
String name = intent.getStringExtra(NewInputActivity.EXTRA_MESSAGE); 
```

如果activity1上有多个条目将它们存储在一个数组中然后将整个数组发送到activity 2或者我可以单独发送它们（通过添加多个putExtra？），也会更容易。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T19:46:06.037

您可以使用

[`setTitle(name)`](http://developer.android.com/reference/android/app/Activity.html#setTitle%28java.lang.CharSequence%29)

更改活动的标题。
至于第二个问题，如果额外内容相关，您可以使用. 如果这些值不相关，您可以使用不同的附加值发送它们 [`putExtra (String name, String[] value)`](http://developer.android.com/reference/android/content/Intent.html#putExtra%28java.lang.String,%20java.lang.String%5B%5D%29)

# animation - 使用 jQuery 为图像制作动画

> ID：11994286
> 
> 赞同：0
> 
> 时间：2012-08-16T19:40:31.503
> 
> 标签：animation, jquery-animate, graphic

所以这里有一个奇怪的。我正在为我即将开始的网站制作一个 cunstruction 页面。这是一个儿童教育网站，我认为如果卡通猴子（公司品牌）沿着页面滚动，从左到右并在猴子滚动的上方或下方留言“即将推出……”，那会很酷.

我有一个 png 格式的猴子，我想知道是否有一个 jQuery 方法可以让它首先旋转，并在页面加载的同时从左向右移动？

想法和方法将不胜感激:)

谢谢彼得

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T19:45:06.487

这可能有帮助吗？

[http://code.google.com/p/jqueryrotate/wiki/Examples](http://code.google.com/p/jqueryrotate/wiki/Examples)

使用上面的帮助旋转，左右滑动只是改变水平位置的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T19:45:08.747

尝试：

[http://www.w3schools.com/jquery/eff_animate.asp](http://www.w3schools.com/jquery/eff_animate.asp)

对于旋转使用 jQuery+css：

[http://www.w3schools.com/cssref/css3_pr_transform.asp](http://www.w3schools.com/cssref/css3_pr_transform.asp)

# ruby-on-rails - 为什么没有应用模型？

> ID：11994288
> 
> 赞同：0
> 
> 时间：2012-08-16T19:40:38.630
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1

我知道这听起来很奇怪，但我看到有一个应用程序控制器、助手和视图，但为什么没有全局/通用模型？我需要一个地方来放置跨越多个模型的范围和方法，如果它在一个或另一个中就没有意义。我现在可以这样做吗？有人有办法处理这个吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T19:42:53.173

要么创建一个基本模型类，要么创建一个模块。（或者两者兼而有之，我想。）

该模块可以混合到 ActiveRecord::Base 或单个模型中。

您还可以创建仅包含特定范围/方法的类方法，例如：

```
included_scopes :foo, :bar 
```

这对于文档和可读性很有帮助，因此功能是明确和明显的。

哪种（或哪种组合）有意义取决于具体情况，但有一些想法可以解决。

# php - CodeIgniter+Bootstrap - 将 HTML 转换为 PDF

> ID：11994297
> 
> 赞同：7
> 
> 时间：2012-08-16T19:41:18.497
> 
> 标签：php, html, codeigniter, pdf, twitter-bootstrap

在你说它是另一个问题的重复之前，请继续阅读。

*我的开发环境是：*

*   代码点火器
*   推特引导

*我需要的 ：*

*   为了能够转换一段 HTML 代码（或完整的网页），**就像**它显示为 PDF 一样。

*提示：*

*   我知道 domPDF（一个常见的解决方案，[已经](https://github.com/EllisLab/CodeIgniter/wiki/PDF-generation-using-dompdf)为 CodeIgniter 用户提供了一个帮助程序），并且我过去使用过它；问题是它不支持真正的转换（如果我必须将所有引导 css 转换为表，那么它几乎没用）。
*   我正在考虑使用一些终端实用程序（通过 ajax 触发？），比如[wkHtmlToPdf](http://code.google.com/p/wkhtmltopdf/)

* * *

**你**有什么建议？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T19:53:32.153

我过去曾成功使用 wkHtmltoPdf 将 HTML 页面转换为 PDF。然而，需要注意的一件事是检查并在必要时删除 HTML 页面中的 javascript，因为有时我发现它们有时会搞砸呈现的 PDF。不用担心预先编写的 CI 助手，您可以轻松地将 wkHtmltoPDF 集成为 CI 中的库

# php - 如何将 jQuery 值传递给 PHP 代码？

> ID：11994298
> 
> 赞同：-1
> 
> 时间：2012-08-16T19:41:19.023
> 
> 标签：php, jquery, yii

我正在尝试制作一个输入表表单以在我的 MVC 页面中输入产品的新记录，这是视图的代码（我正在使用 MongoDB）

```
<?php
  for ($i = 0; $i <= 1; $i++) {
  <tr>
    <td><?php echo CHtml::activeTextField($modelItem, "[$i]name"); ?></td>
    <td><?php echo CHtml::activeTextArea($modelItem, "[$i]description"); ?></td>
    <td><?php echo CHtml::activeTextField($modelItem, "[$i]price"); ?></td>
  </tr>
<?php } ?> 
```

因此，为了使其成为可扩展的输入表单，我使用：

```
<script type="text/javascript"> 
$(document).ready(function(){
  addNewRow();
  function addNewRow() {
    var i = $("#listItem tbody tr").size();
    var arr = {};
    $("#listItem tbody tr:last").click(function(){
      if($(this).hasClass('addedRow') == false){
        arr.i = i;
        $("#ADD_PRICE_LIST_ROW").tmpl(arr).appendTo("#listItem tbody");
        addNewRow();
      }
      $(this).addClass('addedRow')
    });
  }
});
</script> 
```

（listItem tbody 是表的id） 那么我要怎么做才能完成下面的功能呢？

```
<script id="ADD_PRICE_LIST_ROW" type="text/x-jquery-tmpl">
  <tr>
    ????
  </tr>
</script> 
```

抱歉英语不好=.=

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T19:49:52.357

为此，您需要使用 AJAX：

```
$.ajax({
    type: 'POST',
    url: '/your/php.php',
    data: {
        post1: $('#element').val(),
        post2: $('#element2').text()
    },
    success: function(result) {
        alert(result);
    },
    error: function() {
        $('#errors').text('Failed to get response from PHP');
    }
}); 
```

`$.post()`如果您不需要太多选项，您也可以使用执行类似的操作：

```
$.post('/your/php.php', {
    post1: $('#element').val(),
    post2: $('#element2').text()
},
function(result) {
    alert(result);
}); 
```

`$('#button').on('click', function() { /* $.ajax() or $.post() */ });`您可以将它们放在类似或之类的东西`$('#textbox1').on('keyup', function() { /* $.ajax() or $.post() */ });`中。

在您的 PHP 中，您可以执行以下操作来将其作为任何其他 POST 进行处理：

```
if(isset($_POST['post1'])) {
    // $result = do stuff with $_POST['post1'];
    echo $result; // The jQuery will grab this as "result" and alert it...
} 
```

# css - 跨版本包括 Magento 的“prototype/windows/themes/magento.css”

> ID：11994300
> 
> 赞同：3
> 
> 时间：2012-08-16T19:41:21.097
> 
> 标签：css, magento, magento-layout-xml

我有一个 Magento 管理控制台扩展，可以在整个 Magento 管理控制台中启用模型窗口。在 Magento 1.7 中，我可以在出厂默认 CSS 文件中包含以下内容

```
$layout->getBlock('head')->addCss('lib/prototype/windows/themes/magento.css'); 
```

但是，在 Magento 1.6 中，这个文件不在 skin 文件夹中，它在 'js_css' 文件夹中，我需要使用它

```
$layout->getBlock('head')->addItem('js_css', 'prototype/windows/themes/magento.css') 
```

是否有一种优雅、直接的方式来确保此文件正确包含在 Magento 的所有版本中，**而无需**使用版本嗅探，也**无需**制作我自己的文件副本。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T22:41:57.680

我暂时就这样做了——让问题保持开放，希望能有更好的结果出现。

```
 //would fail if Magento lives in a sub-folder named base
        $skin_url = $design->getSkinUrl('lib/prototype/windows/themes/magento.css');
        $parts = explode('/',$skin_url);
        if(in_array('base', $parts))
        {
            $head->addItem('js_css', 'prototype/windows/themes/magento.css');
        }
        else
        {
            $head->addCss('lib/prototype/windows/themes/magento.css');    
        } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T20:19:42.613

可能最安全的方法是将您自己的文件版本与您的包一起分发。

*   安装包后，您将绝对确定文件所在的位置
*   没有不必要的 FS 命中
*   不依赖于 Magento 提供的版本（当然这会适得其反，一如既往）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-16T20:00:10.360

我不知道这个建议是否更好，但您可以检查文件*存在*的位置并让它确定调用哪个方法。

# post - 发布到托管服务时安全支付中的潜在漏洞

> ID：11994312
> 
> 赞同：1
> 
> 时间：2012-08-16T19:42:30.370
> 
> 标签：post, security, payment-gateway, payment-processing

我正在实施一个简单的商店来接受付款。我正在使用托管商店解决方案。它的工作方式是：

*   我的页面处理构建购物车。到了收钱的时候，我的页面将重定向到托管商店。
*   托管商店将处理交易。
*   托管商店会将结果重定向回我。

我想确保交易尽可能顺利和安全地进行。商店的文档使该过程看起来非常简单。下面是真正需要发送给商店提供商的所有内容，从他们的文档中获取。

```
<FORM METHOD="POST" ACTION="https://www.fakehostedstore.com/xxx/index.php">
    <INPUT TYPE="HIDDEN" NAME="store_id" VALUE="abcdefg">
    <INPUT TYPE="HIDDEN" NAME="store_key" VALUE="hijklmnop">
    <INPUT TYPE="HIDDEN" NAME="charge_total" VALUE="100.00">

    <!--MORE OPTIONAL VARIABLES CAN BE DEFINED HERE -->

    <INPUT TYPE="SUBMIT" NAME="SUBMIT" VALUE="Click to proceed to Secure Page">
</FORM> 
```

这让我有些担心。例如，如果我打开类似[Firebug](https://getfirebug.com/)的东西，我可以在提交表单之前将“charge_total”更改为我喜欢的任何内容。很快，我可以将要发送到商店的费用金额从“100.00”减少到“10.00”。将进行收费的商店不会更聪明，并继续进行不正确的收费。

如果交易在商店完成，商店会发回成功收取的金额。然后我可以验证我的预期费用。例如，我预计收取 100 美元的费用，但只收取了 10 美元，WTF！

有没有办法保护这种形式，使其不易被篡改？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T21:01:24.227

我认为除非他们更改处理付款的方法，否则您无能为力（例如，您在他们的服务中以固定价格注册产品，然后他们给您返回产品 ID，用户输入数字她想购买的物品，然后他们计算他们一方的总价格）。

他们是否会从服务中向您发回一些数据（例如已提取的金额）？除了等待钱出现在银行账户之外，您是否有可能看到用户支付的金额（响应值、一些 API 调用等）？如果不是，他们的设计就有严重缺陷。

关于篡改，您实际上无法阻止高级用户更改值。它甚至不必在浏览器级别完成——她可以使用像 Fiddler 这样的代理来篡改 HTTP 请求。

但是，您是否应该担心它，取决于您销售什么以及如何销售。如果它是一些即时销售平台（例如您可以访问某些互联网资源等），那就不好了。如果商店是一家通过邮寄方式发送东西的五金店，您每次都可以验证收到的金额，并将其与预期的金额进行比较（我想，会有一些自动工具来查找银行账户上的收款，因为通常，在您看到钱在您的帐户上之前，您不会向用户发送东西）。

我立刻想起了我有一天在某处读过的类似的东西（很可能是在 SO 上）：在早期的互联网商店中，您有时可以在“数量”字段中输入 0.01 之类的内容，而在服务器上，价格是通过乘法计算的（所以你支付了 0.01 的实际价格！），而数量被四舍五入为整数！

* * *

编辑：他们是否有关于他们给出的回复的文档？您是否尝试过进行虚假交易？

* * *

编辑 2：由于商店会退还您收取的金额，这很好。然而，这仍然会给商店带来问题（非技术性的），因为这笔钱仍然*会被收取*。您可以在下一个屏幕上显示信息，说您收到的金额比您想要的少 10 倍，但*您仍然必须将这笔钱退还给作弊者*（否则将是非法的）。

遗憾的是该商店没有提供某种消息验证码的处理。事实上，**有一种很好的方法可以防止这种作弊行为。**但是，这两个服务器必须合作。

看看[HMAC](http://en.wikipedia.org/wiki/Hash-based_message_authentication_code)。它看起来很复杂，但想法很简单。我将在简化算法上进行解释。

你有一个输入，比如说`price=100`。你把它交给第三方。这个时候，很容易被篡改。但是假设我们发送了额外的字段，`price_verification`. 我们可以使用预先约定的哈希函数和预先约定的盐来计算这一点（您和支付服务器都必须知道它）。然后你计算，说`price_verification=SHA1(price + someLengthySalt)`并将其发送到支付服务器。他们知道算法和盐，所以他们计算`SHA1(received_price + someLengthySalt)`. 如果两者不同，则用户是骗子，您中止交易。当然，只要用户不知道算法和/或盐，这是安全的，所以他不能轻易计算`price_verification`.

然而，盐应该非常强，并且算法可能更复杂，`SHA1(SHA1(price)+salt)`等等）。需要考虑的是价格的输入空间非常小（只有小数点后 2 位的数字 - 如果没有盐，很容易被暴力破解）。

这可以很容易地扩展以验证任意数量的参数（您只需要就如何序列化数据达成协议）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T17:39:46.880

我想我会提到商店建议如何处理这个潜在的安全问题。也许这适用于正在实施安全托管商店页面的其他人。

该商店提供两种付款方式。第一个，“购买”，立即从信用卡中取款。这是我使用的方法。这很容易实施，但不能保证从卡中收取适当的金额。

第二个，“preauth”，保留卡上的钱，但在执行额外的“捕获”交易之前不取钱。加入这一步，可以在正式充卡前确认预授权充值。如果收费无效，那么也可以解除卡上的保留。

就我而言，我正在立即进行“捕获”交易，但会计师可以批量“捕获”当天所有的“preauth”。

# python - 如何将flask app分成多个py文件？

> ID：11994325
> 
> 赞同：209
> 
> 时间：2012-08-16T19:43:25.563
> 
> 标签：python, flask

我的烧瓶应用程序当前由一个`test.py`包含多个路由和`main()`定义的路由的文件组成。有什么方法可以创建一个`test2.py`包含未处理的路由的文件`test.py`？

```
@app.route('/somepath')
def somehandler():
    # Handler code here 
```

我担心其中的路线太多，`test.py`并希望使它可以运行`python test.py`，这也将拾取路线，`test.py`就好像它是同一文件的一部分一样。我必须进行哪些更改`test.py`和/或包含哪些更改才能使其`test2.py`正常工作？

* * *

## 回答 #1

> 赞同：199
> 
> 时间：2012-08-16T20:09:37.557

您可以使用通常的 Python 包结构将您的应用程序划分为多个模块，[请参阅 Flask 文档。](http://flask.pocoo.org/docs/patterns/packages/)

然而，

> Flask 使用蓝图的概念来制作应用程序组件并支持应用程序内或跨应用程序的常见模式。

您可以在单独的文件中创建应用程序的子组件作为蓝图：

```
simple_page = Blueprint('simple_page', __name__, template_folder='templates')
@simple_page.route('/<page>')
def show(page):
    # stuff 
```

然后在主要部分使用它：

```
from yourapplication.simple_page import simple_page

app = Flask(__name__)
app.register_blueprint(simple_page) 
```

蓝图还可以捆绑特定资源：模板或静态文件。有关所有详细信息，请参阅[Flask 文档](http://flask.pocoo.org/docs/blueprints/#blueprints)。

* * *

## 回答 #2

> 赞同：80
> 
> 时间：2019-12-03T10:36:29.110

您可以使用简单的技巧，即从另一个文件中的 main 导入 flask app 变量，例如：

**test_routes.py**

```
from __main__ import app

@app.route('/test', methods=['GET'])
def test():
    return 'it works!' 
```

并在您声明烧瓶应用程序的主文件中，导入测试路线，例如：

**应用程序.py**

```
from flask import Flask, request, abort

app = Flask(__name__)

# import declared routes
import test_routes 
```

它从我这边工作。

* * *

## 回答 #3

> 赞同：33
> 
> 时间：2020-02-27T21:20:47.067

[无需蓝图和使用集中式 URL 映射](https://flask.palletsprojects.com/en/1.1.x/patterns/lazyloading/#converting-to-centralized-url-map)的复杂导入即可完成此任务

**应用程序.py**

```
import views
from flask import Flask

app = Flask(__name__)

app.add_url_rule('/', view_func=views.index)
app.add_url_rule('/other', view_func=views.other)

if __name__ == '__main__':
    app.run(debug=True, use_reloader=True) 
```

**视图.py**

```
from flask import render_template

def index():
    return render_template('index.html')

def other():
    return render_template('other.html') 
```

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2012-08-16T20:52:33.263

我想在 GitHub 上推荐[flask-empty 。](https://github.com/italomaia/flask-empty/)

它提供了一种简单的方式来理解[蓝图](http://flask.pocoo.org/docs/blueprints/)、多个视图和[扩展](http://flask.pocoo.org/docs/extensiondev/)。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2021-07-16T09:03:54.563

如果您需要拆分蓝图来分隔文件，您可以使用代码片段：

```
# app.py

from blueprint_module import blueprint

app = Flask(__name__)
app.register_blueprint(blueprint) 
```

```
# blueprint_module\__init__.py

from flask import Blueprint

blueprint = Blueprint('my_blueprint', __name__)

from . import page 
```

```
# blueprint_module\page.py

from . import blueprint

@blueprint.route("/url", methods=['GET'])
def hello():
  return 'hello world' 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2015-02-06T04:08:02.433

将应用程序划分为蓝图是一个好主意。但是，如果这还不够，并且您想将蓝图本身划分为多个 py 文件，也可以使用常规 Python 模块导入系统，然后循环遍历从其他文件导入的所有路由.

我用代码创建了一个要点：

[https://gist.github.com/Jaza/61f879f577bc9d06029e](https://gist.github.com/Jaza/61f879f577bc9d06029e)

据我所知，这是目前分割蓝图的唯一可行方法。在 Flask 中创建“子蓝图”是不可能的，尽管有很多关于这个的讨论存在一个问题：

[https://github.com/mitsuhiko/flask/issues/593](https://github.com/mitsuhiko/flask/issues/593)

此外，即使有可能（并且使用该问题线程中的一些片段可能是可行的），无论如何，子蓝图对于您的用例可能过于限制 - 例如，如果您不希望所有路线都在一个子模块具有相同的 URL 子前缀。

# linux - Linux 脚本 - 即使在注销时如何保持运行？

> ID：11994328
> 
> 赞同：2
> 
> 时间：2012-08-16T19:43:41.337
> 
> 标签：linux, background, nohup

我刚刚启动了一个 CS GO 服务器，我会使用 TCAdmin 一个 GUI 来制作游戏服务器，但由于 Counter Strike GO 处于测试阶段，所以不能很好地使用它。我的问题是我有一个名为 ./srcds_run 的脚本，然后我运行它。完美运行。但是我如何让它作为后台进程运行，这样我就可以注销并将服务器留在那里？

谢谢，死灵。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-16T19:44:18.183

这应该有效：

```
nohup  ./srcds_run & 
```

这会将您的命令置于后台，并在您注销后继续运行 [ [nohup 手册页](http://linux.die.net/man/1/nohup)]

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T19:56:10.287

该`screen`实用程序将使您能够以“分离”模式运行进程：

```
screen -d -m ./srcds_run 
```

[屏幕手册页](http://linux.die.net/man/1/screen)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T04:21:51.427

如果您希望它从启动时运行，您可以从 rc.local 文件启动您的脚本。

如果您希望它仅手动运行，我喜欢 nohup 的想法。

# c# - 放大屏幕的特定区域

> ID：11994331
> 
> 赞同：1
> 
> 时间：2012-08-16T19:43:46.953
> 
> 标签：c#, .net, zooming, loupe, magnify

我正在使用 C# 制作放大镜工具。很像这个：[http](http://colorsnapper.com) ://colorsnapper.com 我已经在谷歌上搜索了一种方法来放大屏幕的预定义区域，足以查看每个单独的像素。

更具体地说，我希望我的鼠标成为屏幕上的放大镜，以增强鼠标悬停的每个像素。我需要弄清楚如何放大该预定义区域。

有谁知道我可以做到这一点的方法，或者任何可用的 API。

***更新*** 我找到了微软提供的放大 API：http: [//msdn.microsoft.com/en-us/library/windows/desktop/ms692402](http://msdn.microsoft.com/en-us/library/windows/desktop/ms692402(v=vs.85).aspx) (v=vs.85).aspx 但是，这个 API 是 C++ 的。正如我所收集的，C++ 是编写 Windows 操作系统的内容，要使用这个 API，我需要使用某种 C# 包装器。这不是一个问题，我只是想我会为其他用户添加到这篇文章中。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T19:49:55.273

您可以将屏幕捕获到内存中的位图：

```
/// <summary>
/// Saves a picture of the screen to a bitmap image.
/// </summary>
/// <returns>The saved bitmap.</returns>
private Bitmap CaptureScreenShot()
{
    // get the bounding area of the screen containing (0,0)
    // remember in a multidisplay environment you don't know which display holds this point
    Rectangle bounds = Screen.GetBounds(Point.Empty);

    // create the bitmap to copy the screen shot to
    Bitmap bitmap = new Bitmap(bounds.Width, bounds.Height);

    // now copy the screen image to the graphics device from the bitmap
    using (Graphics gr = Graphics.FromImage(bitmap))
    {
           gr.CopyFromScreen(Point.Empty, Point.Empty, bounds.Size);
    }

    return bitmap;
} 
```

然后取一部分图像，也许是一个以鼠标位置为中心的 50 像素 x 50 像素的矩形：

```
portionOf = bitmap.Clone(new Rectangle(pointer.X - 25, pointer.Y - 25, 50, 50), PixelFormat.Format32bppRgb); 
```

并将其显示在以鼠标位置为中心的 100 像素 x 100 像素的矩形中。这将为您提供 2X 缩放级别。（显示大小）/（捕获大小）的比率越大，缩放越多。类似于以下内容：

```
[DllImport("User32.dll")]
public static extern IntPtr GetDC(IntPtr hwnd);

[DllImport("User32.dll")]
public static extern void ReleaseDC(IntPtr hwnd, IntPtr dc);

void OnPaint()
{
    IntPtr desktopDC = GetDC(IntPtr.Zero); // Get the full screen DC

    Graphics g = Graphics.FromHdc(desktopDC); // Get the full screen GFX device

    g.DrawImage(portionOf, pointer.X - 50, pointer.Y - 50, 100, 100); // Render the image

    // Clean up
    g.Dispose();
    ReleaseDC(IntPtr.Zero, desktopDC);
} 
```

# .net - 从 .Net 2.0 更改为 .Net 4.0 后出现无效操作异常

> ID：11994333
> 
> 赞同：1
> 
> 时间：2012-08-16T19:43:51.527
> 
> 标签：.net, vb.net, invalidoperationexception

我正在处理一个使用 .Net 2.0 在 VB 中开发的项目。这个项目从未完成，但我需要利用它来测试新代码。加载时，有几个错误已通过将 .Net 版本提升到 4.0 得到纠正。（不要问我为什么……它可能是在更高的 .Net 版本上开发的，然后降到 2.0 以使其与共享类兼容；该项目因 .Net 不兼容而被放弃）。

我现在遇到的问题是在编译和运行时，在 UI 出现之前出现异常。关于无效操作异常（下面列出的全文）。

这段代码不会发布，所以我不关心稳定性。我真正需要做的是遵循调试模式下接收文件时发生的情况，因此我可以确定为什么我发送的文件被拒绝。

感谢您的任何帮助。

--- 完整的错误文本 ---

> System.InvalidOperationException 未处理 Message=创建表单时出错。有关详细信息，请参阅 Exception.InnerException。错误是：无法加载文件或程序集“Framework.Utility，Version=1.0.0.0，Culture=neutral，PublicKeyToken=null”或其依赖项之一。试图加载格式不正确的程序。Source=HL7.Receiver StackTrace：在*My.MyProject.MyForms.Create_Instance*RunUsersAssembly() 在 System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean ignoreSyncCtx) 在 System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state) 在 System.Threading.ThreadHelper.ThreadStart () InnerException: System.BadImageFormatException Message=Could not load file or assembly 'Framework.Utility, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null' 或其依赖项之一。试图加载格式不正确的程序。Source=Framework.Windows.UI FileName=Framework.Utility, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null FusionLog==== 预绑定状态信息=== LOG: User = User LOG: DisplayName = Framework。Utility, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null (Full-specified) LOG: Appbase = file:///C:/Code/Common Production Components/HL7 Receiver+Sender/HL7 Receiver/HL7 TCPIP V2/ bin/Debug/LOG：Initial PrivatePath = NULL 调用程序集：Framework.Windows.UI，Version=1.0.0.0，Culture=neutral，PublicKeyToken=null。LOG：此绑定在默认加载上下文中开始。LOG：使用应用程序配置文件：C:\Code\Common Production Components\HL7 Receiver+Sender\HL7 Receiver\HL7 TCPIP V2\bin\Debug\HL7.Receiver.vshost.exe.Config LOG：使用主机配置文件：LOG：使用 C:\Windows\Microsoft.NET\Framework64\v4.0.30319\config\machine.config 中的机器配置文件。LOG：此时未将策略应用于引用（私有、自定义、部分或基于位置的程序集绑定）。日志：正在尝试下载新的 URL 文件：///C:/Code/Common Production Components/HL7 Receiver+Sender/HL7 Receiver/HL7 TCPIP V2/bin/Debug/Framework.Utility.DLL。ERR：无法完成程序集的设置（hr = 0x8007000b）。探测终止。

```
 StackTrace:
        at Framework.Windows.UI.Form..ctor()
        at ReceiverForm..ctor() in C:\Code\Common Production Components\HL7 Receiver+Sender\HL7 Receiver\HL7 TCPIP V2\Forms\ReceiverForm.vb:line 22
   InnerException: 
```

如果它有帮助，这里是有问题的自动生成的代码：

```
Namespace My

'NOTE: This file is auto-generated; do not modify it directly.  To make changes,
' or if you encounter build errors in this file, go to the Project Designer
' (go to Project Properties or double-click the My Project node in
' Solution Explorer), and make changes on the Application tab.
'
Partial Friend Class MyApplication

    <Global.System.Diagnostics.DebuggerStepThroughAttribute()>  _
    Public Sub New()
        MyBase.New(Global.Microsoft.VisualBasic.ApplicationServices.AuthenticationMode.Windows)
        Me.IsSingleInstance = false
        Me.EnableVisualStyles = true
        Me.SaveMySettingsOnExit = true
        Me.ShutDownStyle = Global.Microsoft.VisualBasic.ApplicationServices.ShutdownMode.AfterMainFormCloses
    End Sub

    <Global.System.Diagnostics.DebuggerStepThroughAttribute()>  _
    Protected Overrides Sub OnCreateMainForm()
        Me.MainForm = Global.ReceiverForm
    End Sub
End Class 
```

结束命名空间

错误所在的第 34 行显示`Protected Overrides Sub OnCreateMainForm()`. 再次感谢您的任何建议。

# python-3.x - 需要帮助安装 python 3 的请求

> ID：11994337
> 
> 赞同：4
> 
> 时间：2012-08-16T19:43:55.130
> 
> 标签：python-3.x, python-requests

我正在尝试在 FreeBSD 上为 python 3 安装“请求”模块。我使用的是 python 3.2，但我的机器上也安装了 python 2.6。

我安装了点子。

```
pip --version 
pip 1.1 from /usr/local/lib/python3.2/site-packages (python 3.2) 
```

我运行了 pip install requests

我遇到了一堆语法错误，首先是：

```
 File "/usr/local/lib/python3.2/site-packages/requests/packages/chardet/chardistribution.py", line 48
    self._mDone = constants.False # If this flag is set to constants.True, detection is done and conclusion has been made
                                ^
SyntaxError: invalid syntax

  File "/usr/local/lib/python3.2/site-packages/requests/packages/chardet/charsetgroupprober.py", line 44
    prober.active = constants.True
                                 ^
SyntaxError: invalid syntax

  File "/usr/local/lib/python3.2/site-packages/requests/packages/chardet/constants.py", line 46
    False = __builtin__.False 
```

1.  我是否以某种方式获得了 python 2 版本的“请求”？
2.  当我运行“python”时，我得到了 2.6.6 版本。我必须明确运行“python3.2”。我需要做些什么来让 3.2 成为我的默认 python 安装吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-16T21:11:42.120

出于某种原因，请求包括许多其他软件包，例如 oauthlib 和 chardet。但不是仅仅依赖于它们，所以它们在您安装请求时由 pip 安装，请求的 setup.py 正在尝试安装包含的包。由于某种原因，这在 Python 3 下失败了。

但是，无论如何，请求模块本身似乎都已正确安装。因此，您需要做的就是也做

```
pip install chardet2 urllib3 
```

安装缺少的库。还将第三方库的包含作为请求中的错误报告。这不是怎么做的。

# jsf-2 - 我可以在复合组件中调用 bean 上的方法吗？

> ID：11994339
> 
> 赞同：3
> 
> 时间：2012-08-16T19:44:01.260
> 
> 标签：jsf-2, composite-component

我想编写一个或多或少的 gemeric 组件，我在其中提交一个控制器 bean，并且组件应该显示一些 CRUD 按钮。

以下复合组件：

```
<composite:interface>
  <composite:attribute name="controller" />
  <composite:attribute name="object" />
</composite:interface>

<composite:implementation>

  <h:panelGrid columns="3" columnClasses="celltop">
    <h:commandButton id="save" value="#{msg.saveButtonLabel}"
      action="#{cc.attrs.controller.save}" />
    <h:commandButton id="delete" value="#{msg.deleteButtonLabel}"
      action="#{cc.attrs.controller.delete(cc.attrs.object)}" />
    <h:commandButton id="cancel" value="#{msg.backButtonLabel}"
      action="#{cc.attrs.controller.cancel}" immediate="true" />
  </h:panelGrid>

</composite:implementation>

<viewController:buttons controller="customerController" object="#{customerController.customer}"/> 
```

```
@Named
@ConversationScoped
public class CustomerController implements Serializable {

    public String cancel() {
    customer = null;
    if (!conversation.isTransient()) {
        conversation.end();
    }
    return "cancelled";
} 
```

当我单击取消按钮时导致以下异常：

```
javax.faces.el.MethodNotFoundException: javax.el.MethodNotFoundException: /resources/components/viewController/buttons.xhtml @25,65 action="#{cc.attrs.controller.cancel}": Method not found: customerController.cancel()
    at javax.faces.component.MethodBindingMethodExpressionAdapter.invoke(MethodBindingMethodExpressionAdapter.java:92) 
```

不能在给 CC 的 bean 上调用方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T20:13:34.050

是的你可以。您的错误只是您仅传递了一个普通的香草`String`，表示托管 bean 名称作为属性值

```
controller="customerController" 
```

而您实际上应该已经从 EL 范围传递了具体的托管 bean 实例

```
controller="#{customerController}" 
```

诚然，异常消息有些误导，但它基本上只是显示`Object#toString()`属性值。如果它是一个具体的托管 bean 实例，你宁愿看到类似的东西

> 找不到方法：com.example.CustomerController@12345678.cancel()

或由其`toString()`实现返回的任何内容（如果被覆盖）。

# apache - 接受 web.py 应用程序中的大文件

> ID：11994341
> 
> 赞同：1
> 
> 时间：2012-08-16T19:44:16.577
> 
> 标签：apache, file-upload, large-files, web.py

我正在构建一个内部 webapp 来处理 DNA 序列数据。我需要能够接受一个包含多个序列的压缩文件，该文件通常大于 30MB，并且可以大到 80MB。

我遵循了过去用于文件上传的模式：

```
class ABIUploadHanlder(Handler):
    def POST(self):
        x = web.input(abifile = {})
        filedir = '/usr/local/www/wsgi-scripts'
        if 'seqfile' in x:
            time_key = str(time.time()).replace('.','')

            filepath=x.seqfile.filename.replace('\\','/')
            filename = time_key + 'abizipped.zip'

            filetype = filename.split('.')[-1]
            if filetype == 'zip':
                pass
            else:
                raise web.seeother('/export?err=type')
            fout = open(filedir +'/uploads/'+ filename,'w')
            fout.write(x.seqfile.file.read())
            fout.close()

        raise web.seeother('/abiprocess') 
```

当我将 30MB 的文件发布到 Web 表单时，我会出现奇怪的行为。有时上传会达到 30% 左右，然后重新启动。有时上传会在一次尝试后失败。在所有尝试中，上传从未完成，我最终收到“网页不可用”错误。

我的直觉是，我需要在某个地方告诉网站在上传期间保持连接，即使这需要很长时间。到目前为止，我还没有找到如何控制它。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T15:45:23.170

在传输一定数量的块后运行的代码中出现错误。如果在客户端完成文件上传之前在应用程序中发生错误，则在我的应用程序上配置 web.py 和 apache 的方式（并且我认为我没有使用奇怪的配置）会导致奇怪的行为。特别是，如果发生错误，浏览器不会显示典型的“内部服务器错误”页面，而是尝试再次上传文件，循环直到放弃。

由于我当前正在记录许多步骤和状态，错误消息被隐藏在日志中。经过非常仔细的处理后，我终于遇到了这个问题。

# actionscript-3 - flash as3 - startDrag、stopDrag 的事件监听器？

> ID：11994352
> 
> 赞同：2
> 
> 时间：2012-08-16T19:44:55.080
> 
> 标签：actionscript-3, flash, events, drag

我希望能够区分影片剪辑是被拖动还是单击，并相应地执行不同的功能。问题是startDrag由MOUSE_DOWN发起，stopDrag由MOUSE_UP发起，每次都会触发CLICK事件。我想要做的是，在点击事件的条件下，说类似“如果拖动==真{做某事}”

我想我可以在 mouse_up 或 mouse_down 函数中设置一个标志，但问题是 mouse_down 与鼠标单击同时发生。我需要能够在实际的 stopDrag() 函数或其他东西中设置标志。我已经看到了一个涉及设置超时的解决方案——我想避免这种情况。有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T19:53:17.070

我不得不处理很多次的事情。

我所做的是在捕获阶段创建一个额外的 CLICK 侦听器（优先级高于您正在使用的任何其他内容），然后在该处理程序上，如果您知道这是一个拖动，则停止事件的传播 - 然后它不会'没有到达您的任何其他点击处理程序。

所以在你的情况下，如果你使用 startDrag （我使用我自己的自定义拖动例程），你可以这样做：

```
function myFuntionThatStartsTheDrag() {
    myDragObject.startDrag();
    myDragObject.addEventListener(MouseEvent.CLICK,suppressClick,true,9999,true);
}

function suppressClick(e:MouseEvent):void {
    e.stopPropagation();
}

function myFunctionThatStopsTheDrag() {
    myDragObject.stopDrag();
    myDragObject.removeEventListener(MouseEvent.CLICK,suppressClick,true);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T19:53:53.247

比较拖动开始时的 x 和 y 位置与拖动结束时的 x 和 y 位置。如果 mouseUp 的 x 和 y 位置等于 mouseDown 的 x 和 y 位置，那么您就知道这是一次点击 - 否则就是拖动。一个非常简短的例子：

```
var mouseDownX:int;
var mouseDownY:int;

var dragging:boolean;

//...

private function onMouseDown(event:MouseEvent):void {
    mouseDownX = stage.mouseX;
    mouseDownY = stage.mouseY;
    //...
}

private function onMouseUp(event:MouseEvent):void {
    if(mouseDownX == stage.mouseX && mouseDownY == stage.mouseY) {
        dragging = false;
    } else {
        dragging = true;
    }

    if(dragging) {
        //...
    }
} 
```

如果您这样做，您可以删除点击侦听器，只需处理 mouseUp 中的所有内容。

您可能需要添加一些容差以将 mouseUp 视为点击，即使 x 和 y 不完全相等但相差几个像素（因为点击并不总是完美的上下像素），但上面的代码应该为大部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T19:51:12.800

您可以使用`dispatchEvent`创建自己的自定义侦听器。

像这样使用它：

```
dispatchEvent(new Event("customEvent")); 
```

您可以将其称为正常事件：

```
addEventListener("customEvent", eventFunction); 
```

# java - setText 没有出现/更新

> ID：11994353
> 
> 赞同：2
> 
> 时间：2012-08-16T19:44:56.677
> 
> 标签：java, android, android-ui, settext

我的程序给用户一个指令，然后他们必须`n seconds`做出回应。但是，当它要求您进入`Do Nothing`文本视图时，它根本不会更新，其他指令会很好地弹出，并且它们的编码都相同。

```
 public class SimpleActivity extends Activity implements SimpleGestureListener {

    String str = "";
    String strDirection = "";
    Random ranDirection = new Random();
    int intDirection;

    int scoreCounter;
    long timeStart;
    long timeEnd;

    TextView score;
    TextView allerts;
    TextView correct;

    private SimpleGestureFilter detector;

    /** Called when the activity is first created. */

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.gesture);
        detector = new SimpleGestureFilter(this, this);

        scoreCounter = 0;
        catchValues();

    }

    public boolean dispatchTouchEvent(MotionEvent me) {
        this.detector.onTouchEvent(me);
        return super.dispatchTouchEvent(me);
    }

    public void catchValues() {

        /** Linked to gesture.xml */

        score = (TextView) findViewById(R.id.tvScore);
        allerts = (TextView) findViewById(R.id.tvAllerts);
        correct = (TextView) findViewById(R.id.tvCorrect);

        initiateRandom();

    }

    public void initiateRandom() {

        /** Generate random move */

        /** Log start time of move */

        long start = System.currentTimeMillis();
        timeStart = start;

        intDirection = ranDirection.nextInt(5);

        if (intDirection == 0) {
            allerts.setText("Please Swipe Up!");
            randomColour();
        } else if (intDirection == 1) {
            allerts.setText("Please Swipe Down!");
            randomColour();
        } else if (intDirection == 2) {
            allerts.setText("Please Swipe Left!");
            randomColour();
        } else if (intDirection == 3) {
            allerts.setText("Please Swipe Right!");
            randomColour();
        } else if (intDirection == 4) {
            allerts.setText("Do Nothing!");
            randomColour();

            doNothing();

        }

    }

    public void onSwipe(int direction) {

        /** Detect swipe and store result */

        switch (direction) {

        case SimpleGestureFilter.SWIPE_RIGHT:
            strDirection = "right";

            break;
        case SimpleGestureFilter.SWIPE_LEFT:
            strDirection = "left";

            break;
        case SimpleGestureFilter.SWIPE_DOWN:
            strDirection = "down";

            break;
        case SimpleGestureFilter.SWIPE_UP:
            strDirection = "up";

            break;
        }

        checkSwipe();

    }

    public void checkSwipe() {

        /** Compare time from instruction to action */

        long end = System.currentTimeMillis();
        timeEnd = end;

        /** Verify the action was correct */

        if (timeEnd < timeStart + 2000) {

            if (intDirection == 0) {
                if (strDirection.contentEquals("up")) {
                    correctSwipe();
                } else {
                    wrongSwipe();
                }

            } else if (intDirection == 1) {
                if (strDirection.contentEquals("down")) {
                    correctSwipe();
                } else {
                    wrongSwipe();
                }
            } else if (intDirection == 2) {
                if (strDirection.contentEquals("left")) {
                    correctSwipe();
                } else {
                    wrongSwipe();
                }
            } else if (intDirection == 3) {
                if (strDirection.contentEquals("right")) {
                    correctSwipe();
                } else {
                    wrongSwipe();
                }

            }

        } else {

            /** Incorrect action, reset score and start over */

            scoreCounter = 0;
            score.setText("Score:" + scoreCounter);
            strDirection = "";
            correct.setText("Too Slow!");
            initiateRandom();

        }

    }

    @Override
    public void onDoubleTap() {
        // TODO Auto-generated method stub

    }

    public void correctSwipe() {
        scoreCounter = scoreCounter + 100;
        score.setText("Score:" + scoreCounter);
        correct.setText("Correct!");
        strDirection = "";
        initiateRandom();

    }

    public void wrongSwipe() {
        correct.setText("Wrong!");
        scoreCounter = 0;
        strDirection = "";
        score.setText("Score:" + scoreCounter);

    }

    public void randomColour() {

        Random txtColor = new Random();

        allerts.setTextColor(Color.rgb(txtColor.nextInt(255),
                txtColor.nextInt(255), txtColor.nextInt(255)));
    }

    public void doNothing() {

        /** Does nothing for n seconds */

        long end = System.currentTimeMillis();
        timeEnd = end;

        while (timeEnd < timeStart + 2000) {

            timeEnd = System.currentTimeMillis();
        }

        if (strDirection.contentEquals("up")
                || strDirection.contentEquals("down")
                || strDirection.contentEquals("left")
                || strDirection.contentEquals("right")) {
            wrongSwipe();
        } else {
            correctSwipe();
        }

    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T19:52:10.653

`runOnUiThread(Runnable r)` 当您想从非 UI 线程更新 UI 时尝试使用：

> 在 UI 线程上运行指定的操作。如果当前线程是 UI 线程，则立即执行该操作。如果当前线程不是 UI 线程，则将动作发布到 UI 线程的事件队列中。

就像是：

```
 Activity_Name.this.runOnUiThread(new Runnable() {

        @Override
        public void run() {
            // here you put updates to the UI

        }
    }); 
```

或者使用[`onProgressUpdate()`](http://developer.android.com/reference/android/os/AsyncTask.html#onProgressUpdate%28Progress...%29) 的方法`AsyncTask`。

**参考：**

*   [http://developer.android.com/reference/android/app/Activity.html](http://developer.android.com/reference/android/app/Activity.html)

# javascript - TinyMce 没有插入

> ID：11994354
> 
> 赞同：5
> 
> 时间：2012-08-16T19:45:01.170
> 
> 标签：javascript, tinymce

我正在使用 TinyMce 从数据库中插入/编辑文本，但我不知道为什么`<br />`缺少 's。没有新行，即使我按 ENTER 或 SHIFT + ENTER。

TinyMce 初始化：

```
tinyMCE.init({
    mode : "textareas",
    theme : "simple",
    force_p_newlines : false,
    force_br_newlines : true,
    convert_newlines_to_brs : false
}); 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-16T19:57:13.237

根据[TinyMCE 文档`force_br_newlines`](http://archive.tinymce.com/wiki.php/Configuration3x:force_br_newlines)：

> 从 3.5 开始不推荐使用此选项，而是使用forced_root_blocks: false 来控制p vs br 行为。

从 3.0a1 版开始，`forced_root_block`默认启用。[文档还说](http://archive.tinymce.com/wiki.php/Configuration3x:forced_root_block)，如果禁用此选项， Enter 将产生一个`<br />`，而 Shift+Enter 将产生一个`<p>`.

尝试这个：

```
tinyMCE.init({
    mode : "textareas",
    theme : "simple",
    forced_root_block : false,
}); 
```

# javascript - 为什么这个函数没有被调用？

> ID：11994355
> 
> 赞同：1
> 
> 时间：2012-08-16T19:45:03.550
> 
> 标签：javascript, jquery

为什么下面的功能`update()`没有更新？[这个小提琴](http://jsfiddle.net/m7q3H/63/)的结构是否正确？

小提琴代码：

HTML：

```
<body>
    <div id="toupdate">
    <script type="text/javascript" charset="utf-8" src="http://static.polldaddy.com/p/6343621.js"></script>
    </div>
</body>​ 
```

JavaScript：

```
$(document).ready(function() {
    update();
});

function update(){
    $('#toupdate').remove();
    alert('removed');
    $('body').append('<div id="toupdate">
        <script type="text/javascript" charset="utf-8" src="http://static.polldaddy.com/p/6343621.js"></script>
    </div>');
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-16T19:47:52.167

像这样的 JavaScript 字符串中不能有新行。也`</script>`可能导致JS停止。

```
$('body').append('<div id="toupdate"><script type="text/javascript" charset="utf-8" src="http://static.polldaddy.com/p/6343621.js"></scr'+'ipt></div>'); 
```

# xmpp - 如果要将 XMPP 服务器用于在 iPhone 和 Android 上运行的实时聊天应用程序，我是否需要设置它？

> ID：11994356
> 
> 赞同：0
> 
> 时间：2012-08-16T19:45:04.070
> 
> 标签：xmpp, chat, real-time

是否有免费或商业质量好的公共 XMPP 服务器？还是我们需要自己设置？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T20:21:34.540

您可以在测试/开发阶段免费使用公开可用的 XMPP 服务器。[http://xmpp.net](http://xmpp.net)将为您提供免费可用的 Jabber 服务器列表。但是，一旦您的应用程序投入生产，特别是在一定规模上，不建议为您的应用程序使用免费的第 3 方服务器。

或者，如果您只关心在应用程序中添加实时聊天，而不是 XMPP 或任何其他底层协议，我建议您[在此处查看此答案](https://stackoverflow.com/questions/11893001/client-server-constant-communication-php/11912911#11912911)。

# magento - Magento 在购物车中配置产品非常慢，EAV：Mage_Eav_Model_Config::getAttribute

> ID：11994361
> 
> 赞同：0
> 
> 时间：2012-08-16T19:45:10.030
> 
> 标签：magento, entity-attribute-value

当我的购物车中有大约 10 个配置产品然后想要打开购物车时，magento 非常慢。当我运行分析器时，这是瓶颈

EAV：Mage_Eav_Model_Config::getAttribute 23.4532 429804 455,861,784 18,087,936

这可以以某种方式改进吗？我在使用 memcache 为 magento 优化的共享托管服务器上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T20:24:58.633

是的，您可以为您的产品数据使用平面表格（这会增加获取某些产品数据所需的时间）。

为此，请转到后端**系统->配置->目录** 并在“前端”部分中将“使用平面目录产品”设置为“是”。

希望这会有所帮助。

逾越节

# windows-runtime - WinRT 的 ReviewTask

> ID：11994365
> 
> 赞同：0
> 
> 时间：2012-08-16T19:45:24.693
> 
> 标签：windows-runtime

他们是在 WinRT (C#) 中启动商店以进行评论的一种方式 - 类似于 wp7 中的 reviewtask 的工作方式吗？

我正在使用 XAML/C#（不是 HTML/JS）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-15T18:44:51.550

这可以在 WinRT 中使用以下方法实现：

```
await Windows.System.Launcher.LaunchUriAsync(
    newUri("ms-windows-store:REVIEW?PFN=xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx")); 
```

您的应用程序包名称在哪里`xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx`，您可以在`packaging`选项卡的应用程序清单文件中找到它。请注意，这仅适用于您的应用已在商店中发布的情况。

您可以在此处找到更深入的教程：http: [//blogs.msdn.com/b/egtechtalk/archive/2013/09/03/how-to-include-quot-rate-amp-review-quot-api- in-your-windows-8-apps-by-walaa-atef.aspx](http://blogs.msdn.com/b/egtechtalk/archive/2013/09/03/how-to-include-quot-rate-amp-review-quot-api-in-your-windows-8-apps-by-walaa-atef.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T17:31:06.933

从我所见 - 设置魅力中有一个自动评分和评论命令，当您的应用程序在商店中发布时会显示。我认为可能有一种方法可以从您的 UI 中的其他地方执行此操作，但我也敢打赌，Microsoft 不建议这样做，就像通过魅力可用的任何东西一样。

# java - 如何引用primaryStage

> ID：11994366
> 
> 赞同：18
> 
> 时间：2012-08-16T19:45:26.077
> 
> 标签：java, javafx, javafx-2, fxml

我将 .fxml-Files 用于我的应用程序的视图层。每个 fxml 都附有一个控制器

```
<AnchorPane fx:controller="movielistjavafx.view.MainWindowController"> 
```

假设我有一个 mainFrame 并且它是控制器。mainFrame.fxml 在 - 方法中加载`start(Stage)`。

现在您想显示一个附加到 Stage/Window/Whatever 的 fileChooser。

为此，最好让 fxml-controller 了解*example* `primaryStage`。

有没有办法将它注入控制器，或者 FXML 在运行时知道它属于哪个场景和阶段？

我唯一的想法是将primaryStage存储在一些静态上下文中，但这对我来说似乎不是一种方法。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-08-17T09:44:33.727

不是 FXML，而是 FXML（或其控制器）中的节点（控件）在运行时（添加到场景后）知道它们属于哪个场景和阶段。
在控制器类中，

```
...
@FXML private Label label;
...
// in some method block
Stage stageTheLabelBelongs = (Stage) label.getScene().getWindow(); 
```

或者，您可以使用 CDI 事件来获取主要阶段。[查看由 CDI 和 JBoss Weld 提供支持](http://blog.matthieu.brouillard.fr/2012/08/06/fxml-javafx-powered-by-cdi-jboss-weld_6/)的博客条目FXML 和 JavaFX 。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-06-30T11:04:37.120

强大的解决方案（可以用作片段）：获取一个事件，然后获得触发该事件的控制权。使用该控件获取舞台：

```
@FXML
private void browseDirectory(ActionEvent event) {
    Stage stage = Stage.class.cast(Control.class.cast(event.getSource()).getScene().getWindow());
    DirectoryChooser directoryChooser = new DirectoryChooser();
    File selectedDirectory = directoryChooser.showDialog(stage);
    System.out.println(selectedDirectory.getAbsolutePath());
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-08T11:23:12.397

[http://code.makery.ch/java/javafx-2-tutorial-part5](http://code.makery.ch/java/javafx-2-tutorial-part5)

这是一个很好的教程，其中包含示例代码示例

```
 Controller...

      //Application class type variable
      public MainApp mainApp;
      public Stage stage;
       .........
       .........

     /**
      * Is called by the main application to give a reference back to itself.
      * 
      * @param mainApp
      */
       public void setMainApp(MainApp mainApp) {
       this.mainApp = mainApp;

       }
       }

       .....

       .........
       @FXML
       public void initialize(){

       stage=mainApp.getStage();

      }

      Application class....

      class MainApp extends Application{

      Stage stage;
       ...
          ...

      @Override
      public void start(Stage stage) {
      this.stage=stage;
      FXMLLoader loader = new  
      FXMLLoader(MainApp.class.getResource("view/PersonOverview.fxml"));
      PersonOverviewController controller = loader.getController();

      controller.setMainApp(this);
     }

        ...
            ,,

      public getStage()
     {

      return this.stage;
      }

     } 
```

# algorithm - 对于二进制堆优先级队列，deleteMin 访问多少块外部内存？

> ID：11994368
> 
> 赞同：0
> 
> 时间：2012-08-16T19:45:31.583
> 
> 标签：algorithm, heap, priority-queue, computation-theory

我正在研究优先级队列，它使用二进制堆作为其内部数据结构。考虑到块大小为 M 的外部存储器模型，幻灯片声称 deleteMin 需要大约`2log(n/M)`块访问。

为什么是这样？我在描述自下而上启发式（Wegener 93）的原始论文中找不到解释，在幻灯片中也找不到。

第一个块包含堆的根和第一个 log(M) 级别。之后，对于每个节点，它必须在每个级别读取一个块，其中将包含两个连续的子节点。只有在极少数情况下（因此是“近似值”）它才必须读取两个块来获取节点的两个子节点。由于将使用单个块访问读取第一个 log(M) 级别，因此它只需加载最低`(log n - log M) = log n/M`级别的块。

从哪里来`2`？它必须在缓存驱逐时将块写回磁盘，但这通常不是与负载有关吗？

我希望我已经很好地解释了这个问题。非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T03:31:20.303

你的分析对我来说似乎是正确的。没有必要`2`。

顺便说一句，通常外部存储器算法`M`用作存储器大小和`B`块大小。所以它将是`log(n/B)`块访问（只要`M>2B`左右）。

# c# - C# XML 数据转换成字典

> ID：11994369
> 
> 赞同：2
> 
> 时间：2012-08-16T19:45:37.700
> 
> 标签：c#, xml

再会，

我一直在玩 ToDicationary() 扩展方法

```
var document = XDocument.Load(@"..\..\Info.xml");
XNamespace ns = "http://www.someurl.org/schemas";

var myData = document.Descendants(ns + "AlbumDetails").ToDictionary
    (
        e => e.Name.LocalName.ToString(),
        e => e.Value
    );

Console.WriteLine("Writing music...");
foreach (KeyValuePair<string, string> kvp in myData)
{
    Console.WriteLine("{0} = {1}", kvp.Key, kvp.Value);
} 
```

使用以下 XML 数据：

```
<?xml version="1.0" encoding="UTF-8"?>
<Database xmlns="http://www.someurl.org/schemas">
    <Info>
        <AlbumDetails>
            <Artist>Ottmar Liebert</Artist>
            <Song>Barcelona Nights</Song>
            <Origin>Spain</Origin>
        </AlbumDetails>
    </Info>
</Database> 
```

而且我没有得到我想要的输出。相反，我得到了这个：

```
Writing music...
AlbumDetails = Ottmar LiebertBarcelona NightsSpain 
```

相反，我想要 myData("Artist") = "Ottmar Liebert" 等...

有没有可能与后代有关？

TIA,

科森

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T19:48:21.200

以下将简单地获取`AlbumDetails`节点：

```
document.Descendants(ns + "AlbumDetails") 
```

您想要*它的*直接后代（子节点） - 因为这些也是元素：

```
document.Descendants(ns + "AlbumDetails").Elements() 
```

整行将是：

```
var myData = document.Descendants(ns + "AlbumDetails")
             .Elements().ToDictionary(
                                      e => e.Name.LocalName.ToString(),
                                      e => e.Value
                                     ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T19:50:29.673

试试这个。

```
string s = "<data><resource key=\"123\">foo</resource><resource key=\"456\">bar</resource><resource key=\"789\">bar</resource></data>"; 
XmlDocument xml = new XmlDocument(); 
xml.LoadXml(s); 
XmlNodeList resources = xml.SelectNodes("data/resource"); 
SortedDictionary<string,string> dictionary = new SortedDictionary<string,string>(); 
foreach (XmlNode node in resources){ 
    dictionary.Add(node.Attributes["key"].Value, node.InnerText); 
} 
```

# php - 比较数组 [php] prev() 中的前一个值

> ID：11994370
> 
> 赞同：0
> 
> 时间：2012-08-16T19:45:41.053
> 
> 标签：php, compare

我在将数组中的值与数组中的前一个值进行比较然后执行适当的操作时遇到问题。有些值是相同的，所以我想把它们去掉。

我试图让它做的是根据先前的值询问变量，如果它们相等，则显示除所述值之外的所有其他内容。

这是我的代码。如果它难以阅读，我深表歉意。我是自学的，我尽我所能...

```
<?php
// Get Variables from dept.php
$location = $_GET['location'];
$dept = $_GET['dept'];
// Connect to Database
$connect = mysql_connect('localhost', 'UserName', 'Pass');
mysql_select_db('database', $connect);
// Create Recordset       
$iso_sql = " SELECT * FROM `a_qa-iso_data`, `a_qa-iso_category` WHERE `a_qa-iso_data`.Article_Numbers = `a_qa-iso_category`.Article_No AND `a_qa-iso_data`.$location = 1 AND `a_qa-iso_data`.$dept = 1 ORDER BY `a_qa-iso_data`.Article_Numbers, `a_qa-iso_data`.Filename ASC;";
$iso_results = mysql_query($iso_sql, $connect) or die(mysql_error());
$rows_iso_results = mysql_num_rows($iso_results);
// Loop Results
while ($iso_array = mysql_fetch_array($iso_results)) {
    $article = $iso_array['Article_Numbers'];
    $title = $iso_array['Title'];
    $link = $iso_array['Link'];
    $class = $iso_array['Class'];
    $target = $iso_array['Target'];
    $filename = $iso_array['Filename'];
    $header = "<h4>$article - $title</h4>";
    $iso = "<a href=\"$link\" class=\"$class\" target=\"$target\">$filename</a>";
 // Display   
    $next = prev($iso_array);
    if ($next['Article_Numbers'] === $article) {
        echo "$iso";
    }
    else {
        echo "$header $iso";
    }
}
?> 
```

简而言之，我正在寻找类似的东西：

$article - $title
-$iso

$article - $title
-$iso
-$iso

$article - $title
-$iso
-$iso
-$iso

$article - $title
-$iso

无论如何，任何帮助将不胜感激。如果之前有人问过这个问题，我也很抱歉，但是我花了很多时间寻找，我发现的内容似乎没有我希望的那么丰富。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T19:48:06.223

为什么不为“previous”的值设置一个临时变量？

```
$previous = null;
while($iso_array = mysql_fetch_array($iso_results)) {
    // code 
    .
    .
    .

    if (!is_null($previous) && $previous['Article_numbers'] == $article) {
        // something
    } else {
        // something else
    }
    $previous = $iso_array;
} 
```

**注意：**您应该停止使用`mysql_*`函数。它们正在被弃用。而是使用[PDO](http://php.net/manual/en/book.pdo.php)（从 PHP 5.1 开始支持）或[mysqli](http://php.net/manual/en/book.mysqli.php)（从 PHP 4.1 开始支持）。如果您不确定要使用哪一个，[请阅读这篇文章](http://net.tutsplus.com/tutorials/php/pdo-vs-mysqli-which-should-you-use/)。

# macos - 创建 OSX 安装程序

> ID：11994376
> 
> 赞同：3
> 
> 时间：2012-08-16T19:45:59.540
> 
> 标签：macos, installation

我想创建一个安装程序，它将安装一些软件包，设置一些目录并将命令作为 OS X 上的守护进程运行。

你对如何去做有什么建议吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T19:48:48.947

PackageMaker.app——它是从 Xcode 单独下载的，但在 DevCenter 中可用。

# oracle - Weblogic服务器安装

> ID：11994380
> 
> 赞同：0
> 
> 时间：2012-08-16T19:46:08.120
> 
> 标签：oracle, weblogic-10.x

请帮助我安装 weblogic 服务器。我想安装oracle表单和报告，在安装过程中我被告知安装weblogic服务器以创建一个中间件主目录。我去oracle网站下载。我下载了 oracle weblogic server 11gr1(10.3.6) + coherence package installer for 64bit JVM generic，因为 oracle weblogic server 12c 不支持 oracle 表单和报告。下载 weblogic 服务器后，我提取了压缩文件，但令我惊讶的是，它是文件夹和文件上的所有文件夹，没有安装程序可以以图形模式安装 weblogic 服务器，或者有什么我做错了或我不知道。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T00:07:59.120

以下是有关使用通用`.jar`安装程序进行安装的说明和其他详细信息

[说明和帮助](http://docs.oracle.com/cd/E24329_01/doc.1211/e24492/prepare.htm#BABFIDAB)

通用安装程序基本上是一个`jar`文件，用于安装到任何受支持的系统（IBM AIX、Oracle Exadata Servers、SUN Solaris 等）。有特定的安装说明。

如果您尝试在`Windows`服务器上安装它，那么您应该下载 Windows x86`.exe`版本或 Linux`.bin`版本。

# c# - 是否有任何 html5 .Net 绑定框架

> ID：11994384
> 
> 赞同：2
> 
> 时间：2012-08-16T19:46:43.103
> 
> 标签：c#, html, xaml, frameworks

因为我们现在有 wpf 和 xaml 来将 ui 从视图/模型中分离出来。而且因为我们现在有了像 knockoutjs 这样的东西来为 javascript 做 viewmodel 绑定。

有没有什么东西可以让像三叉戟引擎这样的东西与c#接口来做视图模型绑定到html5页面......

我想这个问题是两个部分。有没有办法以相同的方式将 c# 绑定到 dom

```
<script type="text/javascript"> 
```

是，也许我们可以有一个

```
 <script type="text/csharp" src="app.dll">
    <script type="text/csharp">
      using Browser;
      ... 
```

也许为 Trident/Webkit/etc 创建一个插件。它可以编译它并即时执行它。

第二部分与 xulrunner 的运行方式相同，它可以将 html5 页面变成一个独立的应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T10:29:22.600

试试[剑道用户界面](http://www.kendoui.com/)！来自[泰勒里克](http://www.telerik.com)！用于 HTML5 + .Net 框架。

# c# - 在 C# 中的函数调用之前设置标签的文本

> ID：11994389
> 
> 赞同：1
> 
> 时间：2012-08-16T19:47:00.967
> 
> 标签：c#, winforms, multithreading

我正在调用一个 login() 方法来处理与 mysql 服务器的连接，然后对用户进行身份验证。连接到 mysql 服务器需要一些时间，所以我想放置一个显示“正在加载”状态的标签。我正在做这样的事情：

```
private void button_login_Click(object sender, EventArgs e)
{
    label_status.Text = "Loading ...";
    login();
} 
```

但我没有看到 label_status 文本更改为“正在加载...”。相反，它会在登录功能恢复后在 label_status 中显示此状态。

我不知道这是为什么？这是一些线程问题吗？任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T19:50:23.363

UI 线程将在您的事件处理程序期间被阻塞。如果您希望能够更新 UI，您需要在非 UI 线程中执行长时间运行的任务。`BackgroundWorker`专为此而设计 。[这](http://msdn.microsoft.com/en-us/library/cc221403%28v=vs.95%29.aspx)是一个关于如何使用的教程。

您应该在开始之前设置文本`BackgroundWorker`，设置`DoWork`要执行的方法`login`，如果在您登录后需要进行任何 UI 更新，您可以在`Completed`事件中调用它们。

对于不需要完整 BGW 解决方案的较小案例，您可以使用任务并行库，因为它允许更简单的案例保持简单。以下是使用 TPL 的标准模型：

```
private void button1_Click(object sender, EventArgs e)
{
    //UpdateUI with stuff to do before long running task

    Task.Factory.StartNew(() => someLongRunningNonUITask())
        .ContinueWith(task => updateUIWithResults(task)
           , TaskScheduler.FromCurrentSynchronizationContext());

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T20:19:54.760

快速而肮脏的方法是在更改文本之后调用 login() 方法之前调用 Application.DoEvents()。这将导致标签在调用 login() 方法之前重新绘制。

```
private void button_login_Click(object sender, EventArgs e) 
{ 
    label_status.Text = "Loading ..."; 
    Application.DoEvents();
    login(); 
} 
```

# android - 内部类中的Android内存泄漏

> ID：11994391
> 
> 赞同：0
> 
> 时间：2012-08-16T19:47:18.717
> 
> 标签：android, memory, memory-leaks

在我的 Android 应用程序中，我有一个启动屏幕，然后是一个登录屏幕。用户登录后，他们会进入欢迎屏幕。我的应用程序在三星 Galaxy S3 上经常崩溃，所以我决定在 MAT 中查找。

我在欢迎屏幕上进行了堆转储，它显示了内存中的启动对象。我已经发布了下面的代码。什么可能导致此内存泄漏？

```
import java.util.ArrayList;
import java.util.List;
import java.util.Timer;
import java.util.TimerTask;

import android.app.AlertDialog;
import android.content.DialogInterface;
import android.content.Intent;
import android.hardware.Camera;
import android.os.Bundle;
import android.os.Handler;
import android.os.Message;
import android.util.Log;
import android.view.KeyEvent;
import android.view.View;
import android.widget.TextView;

public class SplashActivity extends CoreActivity implements ConnectionCallBack{

    private static final String TAG = SplashActivity.class.getSimpleName();
    private static final int LOGIN_SCREEN = 0;
    protected static final String SPL = SplashActivity.class.getSimpleName();
    private int SHOW_MESSAGE = 1;
    private Timer timer;
    private TextView connectionNotificationTV;
    private int notificationCount = 0;
    private Handler handler;
    TimerTask timerTask;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.splashscreen);
        Globals.appContext = getApplicationContext();

        connectionNotificationTV = (TextView) findViewById(R.id.splash_screen_connection_notification_TV);

        handler = new Handler(){
            public void handleMessage(Message msg) {
                if(msg.what == SHOW_MESSAGE){
                    if(notificationCount == 0){
                        connectionNotificationTV.setVisibility(View.VISIBLE);
                    }else if(notificationCount == 1){
                        confirmationDialog();
                    }
                    notificationCount++;
                }else if(msg.what == LOGIN_SCREEN){
                    loadNext(LOGIN_SCREEN);
                }
            };
        };
        LocationDisplay location = new LocationDisplay(getApplicationContext());   

        ConnectionCheckThread newConnectionThread = new ConnectionCheckThread(this);
        newConnectionThread.start();

        timer = new Timer();
        timer.schedule(new TimerTask() {

            @Override
            public void run() {
                if(notificationCount == 0){
                    handler.sendEmptyMessage(SHOW_MESSAGE);
                }
            }
        }, 30000);

    }

    @Override
    protected void onDestroy() {
        // TODO Auto-generated method stub
        super.onDestroy();
        Utils.unbindDrawables(findViewById(R.id.root));
    }

    private void setScreenDimension(){
      int  screenHeight = getWindowManager().getDefaultDisplay().getHeight();
       int screenWidth = getWindowManager().getDefaultDisplay().getWidth();
       GeneralSettings.getInstance().setScreenHeight(screenHeight);
       GeneralSettings.getInstance().setScreenWidth(screenWidth);
    }

    @Override
    public boolean onKeyDown(int keyCode, KeyEvent event) {
        if(keyCode == KeyEvent.KEYCODE_BACK){
            System.exit(0);
            return true;
        }
        return super.onKeyDown(keyCode, event);
    }

    public void confirmationDialog() {

        AlertDialog.Builder builder = new AlertDialog.Builder(this);
        builder.setTitle(R.string.connection_error_title);
        builder.setMessage(R.string.connection_error_message);

        builder.setPositiveButton(R.string.connection_error_close_btn, new DialogInterface.OnClickListener() {

            public void onClick(DialogInterface dialog, int which) {
                System.exit(0);
            }
        });

        builder.setCancelable(false);
        builder.show();
    }

    @Override
    public void loadNext(int code) {
        if(code == LOGIN_SCREEN){
            Intent intent = new Intent(SplashActivity.this,LoginActivity.class);
            startActivity(intent);
            finish();
        }
    }

    @Override
    public void loadPrev() {
    }

    @Override
    public void onReceivedConnection(int returnCode) {
        if(returnCode == ConnectionCheckThread.CONNECTION_TIMEOUT ||
           returnCode == ConnectionCheckThread.UNKNOWN_HOST ||
           returnCode == ConnectionCheckThread.UNKNOWN_ERROR){
            handler.sendEmptyMessage(SHOW_MESSAGE);
        }else if(returnCode == ConnectionCheckThread.CONNECTION_SUCCESS){
            handler.sendEmptyMessage(LOGIN_SCREEN);
        }
    }

} 
```

这是线程类的代码：

```
import java.io.InputStream;
import java.net.HttpURLConnection;
import java.net.URL;

import android.app.AlertDialog;
import android.content.Context;
import android.os.Handler;

public class ConnectionCheckThread extends Thread{

    private static final String TAG = ConnectionCheckThread.class.getSimpleName();
    private ConnectionCallBack callback;
    //private HttpURLConnection http = null;
    //private InputStream is;
    //private boolean isFirstTime = true;
    public static int CONNECTION_TIMEOUT = 200;
    public static int UNKNOWN_HOST = 201;
    public static int UNKNOWN_ERROR = 202;
    public static int CONNECTION_SUCCESS = 203;
    public static int CONNECTION_FAILURE = 204;
//  private int returnCode;
//  private int retryCount = 0;
    Context context;

    public ConnectionCheckThread(Context con){
        this.context = con;
        this.callback = (ConnectionCallBack)con;
    }

    public void run(){
        HttpURLConnection http = null;
        boolean isFirstTime = true;
        String urlString = "http://www.google.com/";
        int returnCode = 0;
        int retryCount = 0;

        do{

            try {
                URL urls = new URL(urlString);

                http = (HttpURLConnection)urls.openConnection();

                int responsecode = http.getResponseCode();
                System.out.println("responsecode = "+responsecode);

                if(isFirstTime){
                    http.setConnectTimeout(30000);
                }else{
                    http.setConnectTimeout(15000);
                }

                http.connect();
                InputStream is = http.getInputStream();

                returnCode = CONNECTION_SUCCESS;
            } catch (java.net.SocketException ex) {
                ex.printStackTrace();
                Utils.log(TAG, "caught SocketException[" + ex.getMessage() + "]");
                returnCode = CONNECTION_TIMEOUT;
            } catch (java.net.SocketTimeoutException ex) { 
                ex.printStackTrace();
                Utils.log(TAG, "caught SocketTimeoutException[" + ex.getMessage() + "]");
                returnCode = CONNECTION_TIMEOUT;
            } catch (java.net.UnknownHostException ex) {
                ex.printStackTrace();
                Utils.log(TAG, "caught UnknownHostException[" + ex.getMessage() + "]");
                returnCode = UNKNOWN_HOST;
            } catch (Exception e) {
                e.printStackTrace();
                Utils.log(TAG, "Exception in WebRequest Thread :" + e.getMessage());
                returnCode = UNKNOWN_ERROR;
            } finally {
                try {
                    if (http != null) {
                        http.disconnect();
                        http = null;
                    }
                } catch (Exception e) {
                    e.printStackTrace();
                }

                callback.onReceivedConnection(returnCode);
                if(retryCount == 0){
                    isFirstTime = false;
                }
                retryCount++;
            }
        }while(retryCount <= 1 && returnCode != CONNECTION_SUCCESS);
    }

    Handler handler2 = new Handler(){
        public void handleMessage(android.os.Message msg) {
            if(msg.what == CONNECTION_FAILURE){
                AlertDialog.Builder alert = new AlertDialog.Builder(context);
                alert.setTitle(context.getResources().getString(R.string.login_no_network_title));
                alert.setMessage(context.getResources().getString(R.string.login_no_network_content));
                alert.show();
            }

        };
    };
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-21T04:21:42.367

请使 Handler 成为静态类而不是匿名类。我认为 SplashActivity 必须由 android.os.Message 和 Handler 保存。处理程序保留对封闭 SplashActivity 的引用。如果不是问题，请在查询“select * from instanceof android.app.Activity”和“GC 路径”后粘贴快照。

# unit-testing - 使用 Visual Studio 2012 在当前上下文中运行/调试测试

> ID：11994396
> 
> 赞同：34
> 
> 时间：2012-08-16T19:47:44.783
> 
> 标签：unit-testing, visual-studio-2012

*在 VS2010 中，可以在当前上下文*中运行或调试测试。

这使得单击我刚刚添加或修改的测试并运行它（`Ctrl`- `R` `T`）或调试它（`Ctrl`- `R` `Ctrl`- `T`）变得很容易。（或使用我的游戏键盘... `G1`;-)

我能找到运行特定测试的唯一方法是在测试资源管理器中找到它并从那里运行它。这需要将我的注意力从我正在处理的代码上转移开。

是否有与Visual Studio 2012中的*当前上下文等效的内容？*

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-11-20T23:12:44.440

事实证明，可以右键单击任何一个的源代码：

*   特定测试 ( `public void MyTest()`)
*   包含测试的类 ( `public class MyTestClass`)
*   包含测试 ( `namespace My.Project.Test`)的命名空间

并获得一个上下文菜单以在每个给定范围内运行或调试测试。（注意：上下文菜单中的文本不会改变）

这已经证明了对我来说选择性地运行测试的最有用的方法。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-28T04:17:55.943

我自己就是在找这个，碰巧遇到了这个花絮。

如果您在要在当前上下文中调试的测试内单击鼠标右键并选择运行测试或调试测试，它将只运行该测试。

如果根据测试资源管理器可能会出现该文件中的所有其他测试失败，但它应该可以工作。

[https://connect.microsoft.com/VisualStudio/feedback/details/745762/cant-run-or-debug-tests-in-current-context](https://connect.microsoft.com/VisualStudio/feedback/details/745762/cant-run-or-debug-tests-in-current-context)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-21T12:10:05.033

我发现这样做的方法是搜索

```
FullName:"<your namespace>" 
```

在测试资源管理器中，然后全选并运行选定的测试。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-17T15:10:20.473

如果所选测试是私有方法，则测试套件将忽略它并运行该类中的所有测试。为了在上下文中运行测试，它必须被声明为公共的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-12-15T09:42:48.877

Vs2012 具有可用于分组测试的特征。可能会带你去那里

[http://blogs.msdn.com/b/visualstudioalm/archive/2012/11/09/how-to-manage-unit-tests-in-visual-studio-2012-update-1-part-1-using-特征单元测试explorer.aspx](http://blogs.msdn.com/b/visualstudioalm/archive/2012/11/09/how-to-manage-unit-tests-in-visual-studio-2012-update-1-part-1-using-traits-in-the-unit-test-explorer.aspx)

# c# - 在资源文件中使用布尔值

> ID：11994399
> 
> 赞同：0
> 
> 时间：2012-08-16T19:47:51.700
> 
> 标签：c#, wpf, resources, boolean

在我正在处理的应用程序中，有一个首选项可以启用或禁用以将所有值从英制转换为公制。即使在应用程序关闭并重新打开后，我也需要能够保存首选项。我正在考虑的方法是在资源（.resx）文件中使用布尔值，我可以设置复选框被选中或未选中时的值。然后，当程序启动时，它可以简单地检查资源布尔值是什么（真/假）并相应地设置复选框。

我的问题是，当我尝试使用 bool 或 Boolean 类型的资源时，当我选中该框时，应用程序崩溃并且我收到有关内存的错误，我认为这是堆栈溢出异常。

我的问题是，是否无法在资源 [.resx] 文件中使用和/或修改布尔值，还是我做错了？如果不可能，有什么替代方法可以做我想做的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T19:49:57.910

如果那是您的问题，请不要使用布尔值。

如果您选择 int 然后 0 或 1 或

```
bool res = Convert.ToBoolean(1); 
```

或者

```
bool res = Convert.ToBoolean(0); 
```

如果您选择字符串，则为“true”或“false”。

```
bool res = Convert.ToBoolean("true"); 
```

或者

```
bool res = Convert.ToBoolean("false"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T22:00:27.040

创建[用户设置](http://msdn.microsoft.com/en-us/library/bb397750%28v=vs.100%29.aspx)。它们易于使用并为您处理类型。

# html - 在 Icefaces 中，在 IE 中按 Enter 提交表单

> ID：11994401
> 
> 赞同：1
> 
> 时间：2012-08-16T19:47:55.613
> 
> 标签：html, jsf, icefaces, icefaces-3

在 IE9 中，当我使用 Enter 提交表单（登录表单）时，表单已提交并导航到目标页面，但在 IE 控制台中出现此错误：

```
SCRIPT5007: Unable to get value of the property 'nodeName': object is null or undefined 
```

并且下一页不会响应任何 commandLink 或按钮点击。如果我通过单击提交按钮提交表单，一切都很好。

我在使用其他浏览器（chrome、FF、safari）时也遇到了同样的问题，但它在最近的 Icefaces 更新（3.1）中得到了修复

我在密码字段中使用 action="#{Login.loginButton_action}" 提交

# ruby - 将任意选项传递给 rabl 部分/扩展

> ID：11994406
> 
> 赞同：4
> 
> 时间：2012-08-16T19:48:13.027
> 
> 标签：ruby, rabl

是否可以将对象以外的选项传递给 rabl 部分？

例如，父模板将一个名为“show_field1”的选项传递给基本模板：

```
extends "base", :show_field1 => true 
```

然后在 base.rabl 中，可以像这样使用该选项：

```
attribute :field1 if @show_field1 
```

我能够选择的唯一方法是通过这种可怕的方法来查看幕后：

```
attribute :field1 if @_options[:show_field1] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-21T18:23:05.880

RABL 通过使用特殊的`locals`哈希来支持这一点：

```
# some_view.rabl
extends "base", locals: { show_field1: true }

# base.rabl
attribute :field1 if locals[:show_field1] 
```

[关于该主题的 RABL 文档](https://github.com/nesquena/rabl#passing-locals-in-partials)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T15:55:32.957

另一种方法是将这些值存储在顶级对象上，并让扩展在模板中提取它。

感谢@achiu的recco

# java - 使用Java开发跨平台，字体在不同平台缩放不同

> ID：11994407
> 
> 赞同：2
> 
> 时间：2012-08-16T19:48:19.557
> 
> 标签：java, swing, cross-platform, look-and-feel, font-size

我正在为我的大学制作一些软件。需要 GUI。在它的第一个版本中，我让它使用了系统外观（所以它看起来像 Linux/Mac/Windows 中的本机应用程序）。我发现这很麻烦，因为我必须根据操作系统（无论分辨率/像素密度/等）使我的所有 JLabels 大小不同。

完成此操作后，我就像“好吧，我不会再经历这个了”所以我决定不使用系统外观并尝试 Nimbus。它在我测试过的平台上看起来不错，但 JLabel/JTextField 字体大小在多个平台上仍然无法正确显示，无论它们是否被指定（如 Sans Serif 12）。有没有一种方法可以使字体在所有平台上真正通用，并避免进行所有这些跨平台测试？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T20:39:14.627

您面临的问题是每个平台彼此独立。从内存中（现在又回到过去了），Java 以 72 dpi 呈现它的 UI（这可能最近发生了变化）。

您永远不会从一个平台到另一个平台获得相同的结果。这归结为各个平台 DPI 设置的差异。

这也是不同平台的网页看起来不同以及许多应用程序看起来略有不同的原因。

最好的办法是仔细规划你的 UI 并巧妙地利用 Swings 内部指标，而不是直接设置大小。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T00:27:19.260

您可以做的主要事情是使用**特定**的TrueType 字体并将**其作为资源捆绑到您的应用程序**中。通过这种方式，您可以获得字体在所有平台上显示相同的最佳机会。不能保证“无衬线”在所有平台上都是相同的——Java 只会使用最接近的可用匹配。

然后，您可以在运行时从 .jar 加载字体，例如：

```
InputStream is = Thread.currentThread().getContextClassLoader().getResourceAsStream(filename)
Font font = Font.createFont(Font.TRUETYPE_FONT, is); 
```

作为第二点，设计你的应用程序布局总是值得的，以便在字体大小上有合理的灵活性。也许您只需要为您的 JLabels 腾出更多空间，或者在某些地方进行文本换行等。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-17T00:57:06.533

[如此处](https://stackoverflow.com/a/5630271/230513)所示，使用适当的[布局管理器](http://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html)将`pack()`允许组件利用其首选大小，而不管平台和字体如何。

![图片](../Images/9311338d93aec944e03780b8f6c23705.png)

# objective-c - 如何在调试器控制台中获取 NSDictionary 对象的值/键？

> ID：11994409
> 
> 赞同：14
> 
> 时间：2012-08-16T19:48:20.437
> 
> 标签：objective-c, ios, lldb

我设置了一个断点...

如果我做：

```
(lldb) print [self dictionary]
(NSDictionary *) $5 = 0x0945c760 1 key/value pair 
```

但如果我这样做：

```
(lldb) print [[self dictionary] allKeys]
error: no known method '-allKeys'; cast the message send to the method's return type
error: 1 errors parsing expression 
```

即使我尝试访问我知道在那里的密钥..

```
(lldb) print [[self dictionary] objectForKey:@"foobar"]
error: no known method '-objectForKey:'; cast the message send to the method's return     type
error: 1 errors parsing expression 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-16T19:57:07.797

```
error: no known method '-objectForKey:'; cast the message send to the method's return type 
```

因此，它告诉您它不能仅从发送的消息的名称中推断出返回类型信息——这很好。它甚至会告诉您如何准确地解决该问题 - 您必须*将*消息发送到*方法的返回类型*。

启动 Apple 的文档，我们发现`- [NSDictionary objectForKey:]`返回`id`- 通用的 Objective-C 对象类型。转换为 id （或者更好的是，如果您知道字典包含哪些类型的对象，则转换为该确切的对象类型）可以解决问题：

```
(lldb) print (MyObject *)[(NSDictionary *)[self dictionary] objectForKey:@"foobar"] 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-08-16T19:57:01.007

lldb 命令 print 期望您要打印的值是非对象。您应该用来打印对象的命令是 po。

当您告诉 lldb 打印该值时，它会查找一个名为 allKeys 的方法，该方法返回一个非对象并失败。请尝试以下命令...

```
po [[self dictionary] allKeys] 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-16T20:00:05.117

要`description`在 GDB 或 LLDB 中打印对象的 ，您需要使用[`print-object`](http://www.gnustep.org/resources/documentation/Developer/Base/General/Debugging.html)或`po`。

```
(lldb) po [self dictionary]
(lldb) po [[self dictionary] objectForKey:@"foobar"] 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-16T19:56:00.933

为什么不只是做

```
NSLog(@"dict: %@", dictionary); 
```

或者

```
NSLog(@"dict objectForKey:foobar = %@", [dictionary objectForKey:@"foobar"]); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-06-20T19:08:33.373

目前 lldb 中似乎存在一个错误，导致`po dictionary[@"key"]`打印空行而不是键的值。用于`[dictionary[@"key"] description]`获取值。

# actionscript-3 - 想要间隔来测试精确的时间匹配

> ID：11994411
> 
> 赞同：0
> 
> 时间：2012-08-16T19:48:29.357
> 
> 标签：actionscript-3, apache-flex

我有一个每 3 秒运行一次的间隔来检查新数据。如果它找到新数据，它会广播一个 dataChange 事件并且我的项目渲染器会更新。

我需要测试两次完全匹配时的比较......仅一次。意思是，数据回来是一个会议。会议于下午 3 点开始。比赛进行时，会议变为蓝色，用户可以进入。

我在比较时间匹配时广播了一个 dataChange 事件，但我不想一遍又一遍地广播它，即

```
private static const NOW_OFFSET_TIME:Number = 1000 * 60 * 15;

    private function shouldShowNow(start:Date, end:Date):Boolean
    {
        var now:Date = new Date;

        var stime:Number = start.time - NOW_OFFSET_TIME;
        var etime:Number = end.time;

        return ((now.time >= stime) && (now.time <= etime));
    } 
```

在上面的代码中，条件总是会返回一次 true

```
now.time >= stime 
```

...并且 dataChange 事件一遍又一遍地运行。

但我的间隔只运行 3 秒，所以它不会捕获完全匹配。哎呀，我什至将我的间隔切换到每 500 毫秒，它不会捕获它。

我还有哪些其他选择？

感谢您提供任何有用的意见。

更新：我可以这样做（但我必须每秒运行一次间隔）：

```
private static const NOW_OFFSET_TIME:Number = 1000 * 60 * 15;

    private function shouldShowNow(start:Date, end:Date):Boolean
    {
        var now:Date = new Date;
        var match:Boolean;

        if( now.hours == start.hours && now.minutes == ( start.minutes - 15 ) && now.seconds == start.seconds ){
            match = true;
        }else{
            match = false;
        }

        return match;
    } 
```

这是完整间隔的处理程序：

```
/*
                            We want to compare the current upcomingCalendarList collection 
                            against the collection returned; if they are different, update the UI.
                        */
                        var meetingsData:ArrayCollection = new ArrayCollection();
                        meetingsData = getArrayCollectionFromXML( event.result.response.participantMeetingList.meeting );

                        var cachedColl:ArrayCollection = com.fmr.transporter.model.GeneralInfoModel.getInstance().upcomingMeetingList;
                        var returnedColl:ArrayCollection = meetingsData;
                        var updates:Boolean = false; // our flag to let us know if there are changes in the meeting list

                        if( returnedColl != null )
                        {
                            // Meetings have been added/removed
                            if( cachedColl.length != returnedColl.length ){
                                updates = true;
                            }
                            // Look for meeting  updates
                            else
                            {
                                for( var i:int=0;i<cachedColl.length;i++ ){
                                    var currMeeting:MeetingVO = cachedColl[i] as MeetingVO;

                                    for( var j:int=0;j<returnedColl.length;j++ ){
                                        var returnedMtg:ObjectProxy = returnedColl[j];
                                        /*
                                            We want to ensure we're comparing the same meeting (meetingID) for
                                            any changes.
                                        */
                                        if( currMeeting.meetingID == returnedMtg.meetingId )
                                        {
                                            var startTime_GMT:Date = converServerUTCTimeStampToLocalDate( returnedMtg.startTime );
                                            var endTime_GMT:Date = converServerUTCTimeStampToLocalDate( returnedMtg.endTime );

                                            if( ObjectUtil.dateCompare( currMeeting.startTime, startTime_GMT ) != 0 )
                                                updates = true;
                                            else if( ObjectUtil.dateCompare( currMeeting.endTime, endTime_GMT ) != 0 )
                                                updates = true;
                                            else if( currMeeting.meetingName != returnedMtg.meetingName )
                                                updates = true;
                                            else if( this.shouldShowNow( startTime_GMT, endTime_GMT ) )
                                                updates = true;
                                        }
                                    }
                                }
                            }
                            // If there are no updates, leave the cached collections alone. 
                            if( !updates ){
                                return;
                            }
                        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T20:08:40.457

看起来最好将一个属性添加到您的 MeetingVO 类以跟踪您是否已经显示它。就像是`public var hasBeenShown:Boolean = false`

然后，在你调用 shouldShowNow 的其他地方，将其更新为：

```
else if (!currMeeting.hasBeenShown && this.shouldShowNow(startTime_GMT, endTime_GMT, currMeeting)) 
```

然后在你的 shouldshowNow 函数中，将其更新为：

```
private function shouldShowNow(start:Date, end:Date, meeting:MeetingVO):Boolean
{
    var now:Date = new Date;

    var stime:Number = start.time - NOW_OFFSET_TIME;
    var etime:Number = end.time;

    if((now.time >= stime) && (now.time <= etime)){
        meeting.hasBeenShown = true;
        return true;
    }

    return false;
} 
```

# android - Android Sherlock ActionBar OnCreateOption

> ID：11994415
> 
> 赞同：0
> 
> 时间：2012-08-16T19:48:42.350
> 
> 标签：android, android-actionbar, actionbarsherlock

我正在尝试在我的应用操作栏 (Sherlock) 中添加下一个按钮，我是新手，在任何地方都找不到 tut，所以我尝试使用 Android.com 的指南，我想在我的第一个活动中添加一个下一个按钮操作栏

这是我在 StartActivity.java 的代码

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    android.view.MenuInflater inflater = getMenuInflater();
    inflater.inflate(R.menu.StartActivity, menu);
    return true;
} 
```

这是 main.xml 的 xml

```
 <menu xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:id="@+id/bNext"
          android:title="Next"
          android:showAsAction="ifRoom|withText" />
    </menu> 
```

我从 R."menu".StartActivity 得到一个错误

```
menu cannot be resolved or is not a field 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T19:56:17.547

首先进入您的菜单文件夹并添加一个如下所示的 .xml 文件：

```
 <?xml version="1.0" encoding="utf-8"?>
  <menu xmlns:android="http://schemas.android.com/apk/res/android" >

     <item 
          android:id="@+id/share"
          android:title="Share"
          android:showAsAction="always"
          android:icon="@drawable/actionbar_share" />

   </menu> 
```

然后进入调用操作栏的活动并执行以下操作：

```
 @Override
  public boolean onCreateOptionsMenu(Menu menu) 
     {
          MenuInflater inflater = getSupportMenuInflater();
          inflater.inflate(R.menu.action_bar_menu, menu);
          return super.onCreateOptionsMenu(menu);
     } 
```

其中 action_bar 是您在第一步中创建的 xml 文件 然后在操作栏中获得按钮后，您需要添加

```
 public boolean onOptionsItemSelected(MenuItem item) 
```

方法并添加您想要的任何代码

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T20:19:55.697

您收到错误“菜单无法解析或不是字段”，因为您尝试加载名为“R.menu.StartActivity”的资源，但您的菜单保存在文件“main.xml”中。您需要将文件重命名为“StartActivity.xml”，或将资源 ID 更改为“R.menu.main”。

# netty - netty-4.x 使用附件

> ID：11994419
> 
> 赞同：1
> 
> 时间：2012-08-16T19:48:50.157
> 
> 标签：netty

[ChannelHandler](http://static.netty.io/4.0/api/io/netty/channel/ChannelHandler.html)的 4.0 文档提供了 get/set Attachment 作为状态管理选项。它们似乎没有被实施。它们是否会被实施，或者建议的替代方案是什么。**注意：**成员变量不是一个选项。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-17T06:10:55.043

您应该使用 Channel.attr(..) 方法。

见： http: [//netty.io/4.0/api/io/netty/util/AttributeMap.html](http://netty.io/4.0/api/io/netty/util/AttributeMap.html)

# javascript - 如果选择了另一个选择项，则隐藏选择项

> ID：11994420
> 
> 赞同：0
> 
> 时间：2012-08-16T19:48:56.983
> 
> 标签：javascript, jquery, select, options

我正在尝试制作一个选择器，它将根据您在另一个选择字段中选择的内容显示选项。它看起来像这样：

```
 <select name="field2" id="field2" required="required">
                <option id="field2-1" value="os1">
                     os1
                </option>
                <option id="field2-2" value="os2">
                     os2
                </option>
                <option id="field2-3" value="os3">
                     os3
                </option>
           </select> 
```

然后我有第二个选择器，带有这些选项：

```
 <select name="field3" id="field3" required="required">
                <option id="field3-1" value="dl1">
                     dl1
                </option>
                <option id="field3-2" value="dl2">
                     dl2
                </option>
           </select> 
```

基本上我需要发生的是：如果在第一个选择器中选择了 os1，那么 dl1 和 dl2 都将在第二个选择器中可用。

如果在第一个选择器中选择了 os2 或 os3，则 dl1 将被隐藏，而在第二个选择器中只显示 dl2。

我似乎找不到一个可靠的解决方案，但我不是最擅长 js，所以希望你们中的一个人能指出我正确的方向。

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T19:57:42.933

Vanilla JS 解决方案（无需 jQuery） - [**DEMO**](http://jsfiddle.net/m7q3H/75/)

```
var selectOne = document.getElementById("field2");

selectOne.addEventListener("change", function() {
    if (this.options[this.selectedIndex].value == 'os2' || this.options[this.selectedIndex].value == 'os3') {
        document.getElementById('field3-2').style.display = "none";
    } else {
        document.getElementById('field3-2').style.display = "block";
    }
}, false); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T19:51:49.770

有几种方法可以尝试，但最简单的一种可能是隐藏两个“模板”SELECT 元素，然后将这些隐藏的 SELECT 元素中的 html 复制到 #field3 SELECT 元素。在这个例子中，我假设你没有使用 jQuery。

例如：

```
<SELECT id="template_1">
            <option id="field3-1" value="dl1">
                 dl1
            </option>
            <option id="field3-2" value="dl2">
                 dl2
            </option>
</SELECT>
<SELECT id="template_2">
            <option id="field3-1" value="dl1">
                 dl1
            </option>
            <option id="field3-2" value="dl2">
                 dl2
            </option>
</SELECT> 
```

那么你的javascript将是：

```
var field2 = document.getElementById('field2');
var field3 = document.getElementById('field3');
var template1 = document.getElementById('template_1');
var template2 = document.getElementById('template_2');
var os = field2.options[field2.selectedIndex];
if (os == 'os1') {
    field3.innerHTML = template1.innerHTML;
}
else {
    field3.innerHTML = template2.innerHTML;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T19:51:51.290

编辑：对不起，没有意识到缺少`jquery`标签。好吧，如果您想使用 jQuery，下面的代码将起作用：

```
$('#field2').change(function(){
    if($(this).val() === 'os2' || $(this).val() === 'os3'){
        $('#field3-1').hide();
    }
    else{
        $('#field3-1').show();
    }
}); 
```

# java - 媒体播放器对象音量线性增加和减少的Android逻辑错误

> ID：11994425
> 
> 赞同：1
> 
> 时间：2012-08-16T19:49:47.513
> 
> 标签：java, android, volume, android-mediaplayer

我写了一个程序来增加和减少音量，它是随机工作的。请让我知道问题所在。i=50 默认 u.setOnClickListener(new View.OnClickListener() {

```
 @Override
        public void onClick(View v) {
            if(i<=100&&j<=100)
            mp.setVolume(i+=10,j+=10);
            else
                Toast.makeText(getApplicationContext(),"Max Obtained", 3);

        }
    });
    d.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            if(i>=0&&j>=0)
            mp.setVolume(i-=10,j-=10);
            Toast.makeText(getApplicationContext(),"Min Obtained", 3);

        }
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T20:01:16.983

我认为 Mediaplayer.setVolume 取值从 0 到 1.0f 。您的范围似乎是 0 到 100。

# sql - 什么条件导致 CHECKSUM_AGG 返回 0？

> ID：11994430
> 
> 赞同：1
> 
> 时间：2012-08-16T19:50:05.537
> 
> 标签：sql, sql-server, tsql, sql-server-2008-r2, checksum

似乎有许多条件会导致`CHECKSUM_AGG`返回 0，这是我没有预料到的。我只能找到一个讨论过的问题，即重复值会导致它。这可以通过 a`DISTINCT`或来解决`GROUP BY`。

我还发现了一些对我来说意义不大的场景。一个是我老板提供的，一个是我找到的[MSDN](http://social.msdn.microsoft.com/Forums/en/transactsql/thread/3e0c17ac-fc6b-469d-9542-940b0752fdf4)。这些我不知道怎么解释。下面是一些演示场景的 SQL：

```
SELECT
    CHECKSUM_AGG(T.Number) AS ChecksumAgggregate
FROM
(
    VALUES
        (2)
        , (3)
        , (4)
        , (5)
)AS T(Number)

DECLARE @t TABLE 
(
    Category VARCHAR(15),
    Value VARCHAR(10)
)

INSERT @t 
(
    Category
    , Value
)
VALUES 
    ('OneCharacter','a')
    ,('OneCharacter','b')
    ,('OneCharacter','c')
    ,('OneCharacter','d')

    ,('TwoCharacters','aa')
    ,('TwoCharacters','bb')
    ,('TwoCharacters','cc')
    ,('TwoCharacters','dd')

    ,('ThreeCharacters','aaa')
    ,('ThreeCharacters','bbb')
    ,('ThreeCharacters','ccc')
    ,('ThreeCharacters','ddd')

    ,('SixCharacters','aaaaaa')
    ,('SixCharacters','bbbbbb')
    ,('SixCharacters','cccccc')
    ,('SixCharacters','dddddd')

    ,('AllValues','a')
    ,('AllValues','b')
    ,('AllValues','c')
    ,('AllValues','d')
    ,('AllValues','aa')
    ,('AllValues','bb')
    ,('AllValues','cc')
    ,('AllValues','dd')
    ,('AllValues','aaa')
    ,('AllValues','bbb')
    ,('AllValues','ccc')
    ,('AllValues','ddd')
    ,('AllValues','aaaaaa')
    ,('AllValues','bbbbbb')
    ,('AllValues','cccccc')
    ,('AllValues','dddddd')

select 
    Category, CHECKSUM_AGG(CHECKSUM(Value)) 
from @t 
group by Category

select Category, Value, CHECKSUM(Value) ValueChecksum
from @t 
```

`CHECKSUM_AGG`在来自这些查询的这些示例中，它只不过是 0 。最后一个查询显示没有任何`CHECKSUM`输入到`CHECKSUM_AGG`调用中的值是重复的。

我希望任何描述`CHECKSUM_AGG`返回 0 的原因的答案也能解释这些情况。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T20:15:20.163

例如，如果存在偶数行，或者如果这些值总和为某个值（例如 14），则可能会发生这种情况。这些都产生0：

```
SELECT CHECKSUM_AGG(N)
FROM (VALUES (1),(2),(3),(4),(4)) AS T(N);

SELECT CHECKSUM_AGG(N)
FROM (VALUES (2),(3),(4),(5)) AS T(N); 
```

但这些不会：

```
SELECT CHECKSUM_AGG(N)
FROM (VALUES (1),(2),(3),(4),(5)) AS T(N);

SELECT CHECKSUM_AGG(N)
FROM (VALUES (2),(3),(4),(6)) AS T(N); 
```

14 可能只是一个巧合（对于 6 行中的该值不会发生），我之所以提到它只是因为它是我在这里注意到的唯一模式。我不知道这些案例中的任何一个都有记录。

您也知道[`CHECKSUM_AGG`官方记录为不可靠](http://msdn.microsoft.com/en-us/library/ms188920%28v=sql.105%29.aspx)，即它可能无法准确反映数据更改，对吗？该文档没有对此进行详细说明，它只是指出有时即使有变化，它也不会告诉您发生了变化。（实际措辞是“但是，校验和不会改变的可能性很小。”）

无论如何[，迈克尔斯沃特似乎已经发现这`CHECKSUM_AGG`只是`XOR`](http://michaeljswart.com/2009/02/checksum_agg-a-very-nifty-function/)（这是他的证明）：

```
CREATE TABLE #f(a FLOAT);
GO

INSERT #f VALUES (RAND());
GO 20

DECLARE @i INT = 0;
SELECT @i = @i ^ CHECKSUM(a) FROM #f;
SELECT @i, CHECKSUM_AGG(CHECKSUM(a)) FROM #f;
GO

DROP TABLE #f;
GO 
```

正如他继续解释的那样，当值的范围非常小时，这可能会导致误导性结果，因为生成可靠校验和的几率会迅速降低。

# ruby-on-rails - 如何使登录/注册按钮在引导程序上浮动

> ID：11994431
> 
> 赞同：1
> 
> 时间：2012-08-16T19:50:08.223
> 
> 标签：ruby-on-rails, twitter-bootstrap, css-float

我的来源看起来像这样

```
<div class="navbar">
  <div class="navbar-inner">
    <div class="container">
      <ul class="nav">
        <a class="brand" href="#">Project name</a>

        <li><%= link_to 'Home', pages_home_path %></li>

        <li><%= link_to 'About', pages_about_path %></li>

        <li><%= link_to 'Contact Us', pages_contact_path %></li>

        <li class="nav pull-right">   
          <div id="user_nav">
            <% if user_signed_in? %>
            Signed in as <%= current_user.email %>. Not you?
            <%= link_to "Sign out", destroy_user_session_path, :method => :delete, :class => 'btn btn-danger btn-mini' %>
            <% else %>
            <%= link_to new_user_registration_path do %>
            <button class="btn-mini btn btn-info">Sign Up</button>
            <% end %>
            or <%= link_to new_user_session_path do %>
            <button class="btn btn-info btn-mini">Sign In</button>
            <% end %>
            <% end %>
          </div>
        </li>

      </ul>
    </div>
  </div>
</div> 
```

我`.pull-right`在我的用户登录/注销部分使用，但它只是向右移动了一点点，而不是向右移动，正如您在 twitter-bootstrap 原始页面中看到的那样。请让我知道我做错了什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T20:01:36.103

试试这个方法：

```
<div class="navbar">
  <div class="navbar-inner">
    <div class="container">
      <ul class="nav">
        <a class="brand" href="#">Project name</a>

        <li><%= link_to 'Home', pages_home_path %></li>

        <li><%= link_to 'About', pages_about_path %></li>

        <li><%= link_to 'Contact Us', pages_contact_path %></li>
      </ul>

      <ul class="nav pull-right">   
        <li>
          <div id="user_nav">
            <% if user_signed_in? %>
            Signed in as <%= current_user.email %>. Not you?
            <%= link_to "Sign out", destroy_user_session_path, :method => :delete, :class => 'btn btn-danger btn-mini' %>
            <% else %>
            <%= link_to new_user_registration_path do %>
            <button class="btn-mini btn btn-info">Sign Up</button>
            <% end %>
            or <%= link_to new_user_session_path do %>
            <button class="btn btn-info btn-mini">Sign In</button>
            <% end %>
            <% end %>
          </div>
        </li> 
      </ul>

    </div>
  </div>
</div> 
```

# c# - 移动屏幕键盘

> ID：11994435
> 
> 赞同：1
> 
> 时间：2012-08-16T19:50:23.823
> 
> 标签：c#, wpf, windows

我有一个用 WPF 编写的触摸屏应用程序。我需要使用屏幕键盘来填充文本框。当文本框获得焦点并且工作正常时，我启动 osk.exe 进程。我想知道是否可以移动键盘，使其默认位置不覆盖文本框。

如果我不能用 osk.exe（包含在 Windows 7 中）来做，我可以在屏幕键盘上使用第三方吗？

# c++ - 尝试使用函数填充线程向量 - 错误

> ID：11994439
> 
> 赞同：0
> 
> 时间：2012-08-16T19:50:34.080
> 
> 标签：c++, multithreading

我正在尝试填充向量线程；具有遍历目录的功能，但我遇到了问题

这就是我所拥有的：

```
//create vector of threads
vector<thread> threads;

for(unsigned i=0; i < threadNum; ++i)
{
    threads.push_back(thread(grep(arguments, r))); //best c++ 11
} 
```

这是我得到的错误：

```
error c2440: '<function-style-cast>': cannot conver from 'void' to std::thread 
```

谁能解释为什么并暗示答案？谢谢你

编辑

grep 是函数名

```
void grep(Arguments arguments, regex r){} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T20:03:42.547

大概你的意思是说类似

```
threads.push_back(thread(grep, arguments, r)); 
```

甚至更好：

```
threads.emplace_back(grep, arguments, r); 
```

# sql - SELECT DISTINCT 与 JOIN 和非规范化表

> ID：11994440
> 
> 赞同：0
> 
> 时间：2012-08-16T19:50:46.447
> 
> 标签：sql, distinct

我有两张桌子

```
id    |    name
1     |    foo
2     |    foo
2     |    foo       <- duplicated id
3     |    bar 
```

和

```
id    |    value
1     |    100
1     |    200
2     |    300      <- same value and id
2     |    300      <- 
3     |    500 
```

我需要从第二个表中获取名称为 foo 的每个 id 的行：

```
1     100
1     200
2     300
2     300 
```

id/name 表没有标准化，我对此无能为力。所以我需要从表 1 中选择不同的 id，从表 2 中选择非不同的 id/值。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T19:53:34.743

您没有指定您使用的是哪个版本的 SQL。以下内容适用于任何版本：

```
select tabl2.*
from (select distinct id, name
      from table1
     ) join
     table2
     on table1.id = table2.id
where table1.name = 'foo' 
```

# c# - WPF Prism MVVM - 从视图模型规则中突出显示视图上的网格单元？

> ID：11994446
> 
> 赞同：0
> 
> 时间：2012-08-16T19:50:53.900
> 
> 标签：c#, wpf, mvvm, prism

假设我有一个网格控件，无论是普通的 WPF 网格还是 DevExpress 网格或其他，它数据绑定到财务头寸的集合，每个设置的时间间隔（比如 2-3 秒）刷新一次。总的来说，我对 Prism 和 WPF 还是比较陌生

因为视图模型不应该对它所绑定的视图做出任何假设，因此甚至假设有一个网格，我将如何实现多个规则，比如说，我希望一个单元格根据基于其他的某些标准在网格中突出显示同一行的值？（例如，如果 x > a + b 表示一行）

或者可能是更复杂的事情，比如在 View-Model 上调用某种计算方法来获得所需的标准？（否则我可以在第一个示例中使用数据触发器）

我将如何设计它并从视图模型中公开这种行为，以及我将如何在视图上设置绑定表达式，以便它们自动重新评估并在每个滴答声中更新自己？（不减速）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T20:58:01.237

您可以对这两个示例使用数据触发器...您可以公开您的行可以绑定到的属性，该属性可以调用方法或运行其他属性的计算。然后，您可以在此属性上调用 PropertyChanged，您的行将根据您的视图逻辑更新......至于“不减速”，这样做将取决于正在运行的计算

# iphone - 如何初始化自定义类？

> ID：11994448
> 
> 赞同：-3
> 
> 时间：2012-08-16T19:51:00.830
> 
> 标签：iphone, objective-c, ios, initialization

我对我的目标 C 非常生疏，真的不记得如何在创建时在自定义类中启动变量。

错误全部上`(id)init`线：

> *缺少类型说明符，默认为“int”（警告）
> 
> *类型名称需要说明符或限定符
> 
> *预期的 ';' 在声明列表的末尾

```
#import "Seat.h"

@implementation Seat
{
    (id)init
    {
        self = [super init];
        player = NULL;
        position = -1;
        state = "empty";
    }
}

@end 
```

抱歉，如果这看起来很简单，它看起来很简单，我找不到太多关于它的内容。谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T19:52:44.273

你错过了一些东西：

```
-(id)init // A minus says it's an instance method
{
    if (self = [super init]) { // You should check the return value of [super init]
        player = NULL; // Should this be nil?
        position = -1;
        state = "empty"; // Should this be @"empty"?
    }
    return self; // You need to return self
} 
```

If`player`是一个 Objective C 对象，与 C 指针相反，它更传统地分配`nil`而不是`NULL`. 字符串文字也是如此：如果`state`是`NSString *`，您应该分配`@"empty"`给它。

哦，`@implementation`不应该用花括号括起来：`@end`令牌足以找到实现块的结束位置。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-16T19:55:26.663

在您右侧的实用程序部分，检查下半部分代码片段库。搜索“init”关键字。拖放代码

.![在此处输入图像描述](../Images/a09265ab00756c6b6f5ddb005128e1cd.png)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-16T19:54:01.000

你有一组花括号太多了。您还需要从 init 返回 self （并且大多数人会检查来自 的非 nil 结果`[super init]`）。

```
@implementation Seat

(id)init
{
    self = [super init];
    if (self) {
      player = NULL;
      position = -1;
      state = "empty";
    }
    return self;
}

@end 
```

# hibernate - java.lang.IllegalStateException：EntityManager 已关闭

> ID：11994453
> 
> 赞同：2
> 
> 时间：2012-08-16T19:51:21.603
> 
> 标签：hibernate, jboss, entitymanager, hibernate-entitymanager

我正在构建一个 JAR 文件，使用 Hibernate 4.1.5.SP1 和验证器 4.3.0.Final 部署到 JBoss 4.2.3.GA（忍不住）。数据库是 MySQL 5.5。我在使用 RESOURCE_LOCAL EntityManager 执行基本选择时遇到问题。我有

```
 for (final Order order : results) { 
        ...                 
                    try { 
                        session = (Session)em.getDelegate();
                        state = findStateByAbbrev(stateAbbrev, session);
                    } catch (HibernateException e) {
                        e.printStackTrace(System.err);
                        LOG.error(e.getMessage(), e);
                    } finally {
                        em.close();
                    }   // try 

        }   // for

private State findStateByAbbrev(final String abbrev, final Session session) {
    State ret = null;
    final Criteria crit = session.createCriteria(State.class).add(Restrictions.eq("abbrev", abbrev));
    final List<State> results = crit.list();
    if (results != null && results.size() > 0) {
        ret = results.get(0);
    }   // if
    return ret;
} 
```

这是我的 META-INF/persistence.xml 文件……</p>

```
<persistence>
    <persistence-unit name="didoclientunit" transaction-type="RESOURCE_LOCAL">
        <provider>org.hibernate.ejb.HibernatePersistence</provider>
        <non-jta-data-source>java:/MySqlDS</non-jta-data-source>
        <properties>
            <property name="hibernate.ejb.cfgfile" value="hibernate.cfg.xml" />
            <property name="hibernate.validator.apply_to_ddl">false</property>
            <property name="hibernate.validator.autoregister_listeners">false</property>
            <property name="hibernate.transaction.manager_lookup_class" value=" org/hibernate/transaction/TransactionManagerLookup"/> -->
        </properties>
    </persistence-unit>
</persistence> 
```

这是休眠配置文件……</p>

```
<?xml version='1.0' encoding='utf-8'?>
<!DOCTYPE hibernate-configuration PUBLIC
"-//Hibernate/Hibernate Configuration DTD//EN"
"http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd">

<hibernate-configuration>
    <session-factory>
        <property name="hibernate.connection.driver_class">com.mysql.jdbc.Driver</property>
        <property name="show_sql">true</property>
        <property name="dialect">org.hibernate.dialect.MySQLDialect</property>

        <!-- Enable Hibernate's automatic session context management -->
        <property name="current_session_context_class">thread</property>

        <mapping class="com.parentco.fdr.myproject.model.UserRole" />
        <mapping class="com.parentco.fdr.myproject.model.Organization" />
        <mapping class="com.parentco.fdr.myproject.model.Product" />
        <mapping class="com.parentco.fdr.myproject.model.State" />
        <mapping class="com.parentco.fdr.myproject.model.Country" />
        <mapping class="com.parentco.fdr.myproject.model.AccessCode" />
        <mapping class="com.parentco.fdr.myproject.model.Contract" />
        <mapping class="com.parentco.fdr.myproject.model.TrainingLink" />

    </session-factory>
</hibernate-configuration> 
```

在第一个循环中，一切都很好，但是第二次，我得到了这个异常。如果我不关闭 EntityManager，我会在 5 分钟后得到事务超时（我的 JBoss 事务超时的长度），所以我对应该如何编码感到困惑。我想继续使用 Hibernate 的 Criteria API。

```
java.lang.IllegalStateException: EntityManager is closed
    at org.hibernate.ejb.EntityManagerImpl.close(EntityManagerImpl.java:58)
    at org.mainco.subco.dido.service.OrderServiceImpl.getPDOrders(OrderServiceImpl.java:153)
    at org.mainco.subco.dido.quartz.ProcessPDWorker.work(ProcessPDWorker.java:24)
    at org.mainco.subco.dido.quartz.ProcessPDJob.execute(ProcessPDJob.java:42)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:112)
    at org.jboss.ejb3.interceptor.InvocationContextImpl.proceed(InvocationContextImpl.java:166)
    at org.jboss.ejb3.interceptor.EJB3InterceptorsInterceptor.invoke(EJB3InterceptorsInterceptor.java:63)
    at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:101)
    at org.jboss.ejb3.entity.TransactionScopedEntityManagerInterceptor.invoke(TransactionScopedEntityManagerInterceptor.java:54)
    at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:101)
    at org.jboss.ejb3.AllowedOperationsInterceptor.invoke(AllowedOperationsInterceptor.java:47)
    at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:101)
    at org.jboss.aspects.tx.TxPolicy.invokeInCallerTx(TxPolicy.java:126)
    at org.jboss.aspects.tx.TxInterceptor$Required.invoke(TxInterceptor.java:195)
    at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:101)
    at org.jboss.ejb3.stateless.StatelessInstanceInterceptor.invoke(StatelessInstanceInterceptor.java:62)
    at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:101)
    at org.jboss.ejb3.mdb.MessagingContainer.localInvoke(MessagingContainer.java:249)
    at org.jboss.ejb3.mdb.inflow.MessageInflowLocalProxy.delivery(MessageInflowLocalProxy.java:268)
    at org.jboss.ejb3.mdb.inflow.MessageInflowLocalProxy.invoke(MessageInflowLocalProxy.java:138)
    at $Proxy83.execute(Unknown Source)
    at org.jboss.resource.adapter.quartz.inflow.QuartzJob.execute(QuartzJob.java:57)
    at org.quartz.core.JobRunShell.run(JobRunShell.java:203)
    at org.quartz.simpl.SimpleThreadPool$WorkerThread.run(SimpleThreadPool.java:520) 
```

谢谢， - 戴夫

**编辑：**尝试 Tiago 的响应一直有效，直到我的代码运行时间超过 $JBOSS_HOME/server/default//conf/jboss-service.xml 中的设置

400

开始后正好 400 秒，我得到以下异常

```
21:41:40,025 WARN  [arjLoggerI18N] [com.arjuna.ats.arjuna.coordinator.BasicAction_58] - Abort of action id -3f57ff9c:ca5e:502dadac:34 invoked while multiple threads active within it.
21:41:40,026 WARN  [arjLoggerI18N] [com.arjuna.ats.arjuna.coordinator.CheckedAction_2] - CheckedAction::check - atomic action -3f57ff9c:ca5e:502dadac:34 aborting with 1 threads active!
21:41:40,410 WARN  [JDBCExceptionReporter] SQL Error: 0, SQLState: null
21:41:40,410 ERROR [JDBCExceptionReporter] Transaction is not active: tx=TransactionImple < ac, BasicAction: -3f57ff9c:ca5e:502dadac:34 status: ActionStatus.ABORTED >; - nested throwable: (javax.resource.ResourceException: Transaction is not active: tx=TransactionImple < ac, BasicAction: -3f57ff9c:ca5e:502dadac:34 status: ActionStatus.ABORTED >)
21:41:40,412 ERROR [STDERR] org.hibernate.exception.GenericJDBCException: Cannot open connection
    at org.hibernate.exception.SQLStateConverter.handledNonSpecificException(SQLStateConverter.java:103)
    at org.hibernate.exception.SQLStateConverter.convert(SQLStateConverter.java:91)
    at org.hibernate.exception.JDBCExceptionHelper.convert(JDBCExceptionHelper.java:43)
    at org.hibernate.exception.JDBCExceptionHelper.convert(JDBCExceptionHelper.java:29)
    at org.hibernate.jdbc.ConnectionManager.openConnection(ConnectionManager.java:426)
    at org.hibernate.jdbc.ConnectionManager.getConnection(ConnectionManager.java:144)
    at org.hibernate.jdbc.AbstractBatcher.prepareQueryStatement(AbstractBatcher.java:139)
    at org.hibernate.loader.Loader.prepareQueryStatement(Loader.java:1547)
    at org.hibernate.loader.Loader.doQuery(Loader.java:673)
    at org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:236)
    at org.hibernate.loader.Loader.doList(Loader.java:2220)
    at org.hibernate.loader.Loader.listIgnoreQueryCache(Loader.java:2104)
    at org.hibernate.loader.Loader.list(Loader.java:2099)
    at org.hibernate.loader.criteria.CriteriaLoader.list(CriteriaLoader.java:94)
    at org.hibernate.impl.SessionImpl.list(SessionImpl.java:1569)
    at org.hibernate.impl.CriteriaImpl.list(CriteriaImpl.java:283)
    at org.mainco.subco.dido.service.OrderServiceImpl.findStateByAbbrev(OrderServiceImpl.java:450)
    at org.mainco.subco.dido.service.OrderServiceImpl.getPDOrders(OrderServiceImpl.java:144)
    at org.mainco.subco.dido.quartz.ProcessPDWorker.work(ProcessPDWorker.java:24)
    at org.mainco.subco.dido.quartz.ProcessPDJob.execute(ProcessPDJob.java:42)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:112)
    at org.jboss.ejb3.interceptor.InvocationContextImpl.proceed(InvocationContextImpl.java:166)
    at org.jboss.ejb3.interceptor.EJB3InterceptorsInterceptor.invoke(EJB3InterceptorsInterceptor.java:63)
    at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:101)
    at org.jboss.ejb3.entity.TransactionScopedEntityManagerInterceptor.invoke(TransactionScopedEntityManagerInterceptor.java:54)
    at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:101)
    at org.jboss.ejb3.AllowedOperationsInterceptor.invoke(AllowedOperationsInterceptor.java:47)
    at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:101)
    at org.jboss.aspects.tx.TxPolicy.invokeInCallerTx(TxPolicy.java:126)
    at org.jboss.aspects.tx.TxInterceptor$Required.invoke(TxInterceptor.java:195)
    at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:101)
    at org.jboss.ejb3.stateless.StatelessInstanceInterceptor.invoke(StatelessInstanceInterceptor.java:62)
    at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:101)
    at org.jboss.ejb3.mdb.MessagingContainer.localInvoke(MessagingContainer.java:249)
    at org.jboss.ejb3.mdb.inflow.MessageInflowLocalProxy.delivery(MessageInflowLocalProxy.java:268)
    at org.jboss.ejb3.mdb.inflow.MessageInflowLocalProxy.invoke(MessageInflowLocalProxy.java:138)
    at $Proxy83.execute(Unknown Source)
    at org.jboss.resource.adapter.quartz.inflow.QuartzJob.execute(QuartzJob.java:57)
    at org.quartz.core.JobRunShell.run(JobRunShell.java:203)
    at org.quartz.simpl.SimpleThreadPool$WorkerThread.run(SimpleThreadPool.java:520) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T22:05:02.860

您收到的错误仅仅是因为您在**for**循环内的**finally**构造中关闭了 EntityManager。所以你第二次尝试调用时，你的 EM 已经关闭。不，您不想手动关闭它。你会有类似的东西：**`em.getDelegate()`**

 **```
session = (Session)em.getDelegate();
for (final Order order : results) { 
        ...                 
                    try { 

                        state = findStateByAbbrev(stateAbbrev, session);
                    } catch (HibernateException e) {
                        e.printStackTrace(System.err);
                        LOG.error(e.getMessage(), e);
                    } 

        }   // for 
```

至于超时的问题，也许你正面临 JPA 和 Hibernate 之间的一个共同问题。看看[这个帖子](http://weblogs.java.net/blog/ss141213/archive/2009/05/be_careful_whil.html)，可能对你有帮助。也许问题在于您从 EM 获取休眠会话的方式。另外，[这个问题](https://stackoverflow.com/questions/4148231/how-can-i-get-the-session-object-if-i-have-the-entitymanager)涉及到同样的问题。

如果这些都没有帮助，只需在下面写评论或编辑您的问题，指定超时时间。**

# android - “可能的透支：根元素绘制背景”

> ID：11994454
> 
> 赞同：38
> 
> 时间：2012-08-16T19:51:25.900
> 
> 标签：android, android-manifest, android-theme

在我的项目上运行 Android Lint 时，我遇到了这个警告

> 可能的过度绘制：根元素使用同时绘制背景的主题绘制背景 @drawable/main

推断的主题在哪里`@android:style/Theme.NoTitleBar.Fullscreen`

有人可以向我解释为什么会这样以及如何删除它吗？

我的xml：

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:background="@drawable/main" //***LINT warning***
        android:orientation="vertical"
        android:weightSum="3" > 
```

定义主题的清单部分

```
 <application
        android:icon="@drawable/ic_logo"
        android:label="@string/app_name"
        android:theme="@android:style/Theme.NoTitleBar.Fullscreen" > 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-08-24T16:05:02.277

要优化您的应用程序性能（避免过度绘制），您可以执行以下操作：

*   声明一个主题`res/values/styles.xml`

    ```
    <style name="MyTheme" parent="android:Theme">
        <item name="android:background">@drawable/main</item>
        <item name="android:windowNoTitle">true</item>
        <item name="android:windowFullscreen">true</item>
    </style> 
    ```

*   更改清单：

    ```
    <application
        android:icon="@drawable/ic_logo"
        android:label="@string/app_name"
        android:theme="@style/MyTheme" > 
    ```

*   删除“我的 xml”中的背景声明

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2015-06-11T12:52:08.403

**更新**

查看评论或查看[此链接](https://medium.com/google-developers/developing-for-android-viii-e91ced595fac#.oyoscjww9)。正如 Marcin 所提到的，我在这里的解决方案不是一个好方法，因为它会导致伪影。我一直在使用它来避免透支很长一段时间没有任何问题，但根据 Chet Haase 对此技术的评论，总的来说可能不是规则的拇指。

**原始答案**

我发现的最佳方法是将默认背景设置为 null 并在每个布局中应用您需要的背景。

原因是当您在主题中设置默认背景时，甚至如上所述设置具有不同背景的不同主题时，这意味着整个布局将被该背景填充。在大多数情况下，您不需要背景填充 100% 的屏幕，因为您在该背景之上有工具栏、页眉、页脚和其他元素，这些元素会导致过度绘制。

在主题上应用空背景：

```
<style
    name="ThemeName" parent="ParentTheme">
    <item name="android:windowBackground">@null</item>
</style> 
```

要检查透支，只需在您的模拟器/设备的开发选项中激活 Show Overdraw 选项。不要相信 100% 的 lint 警告，因为跟踪器中存在一些我不确定是否完全修复的错误。

更多信息： [什么是透支以及为什么会出现问题？](https://www.youtube.com/watch?v=T52v50r-JfE)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-12-17T20:24:07.243

您收到此 lint 警告的原因是您的活动和线性布局都尝试绘制背景。因此可见区域被绘制了两次。

**如何调试这个？**运行 sdk/tools/hierarchyviewer 并检查视图层次结构以查看哪个视图具有未显示的背景。（您需要有一个运行 dev build rom 的 android 设备）

**什么在引擎盖下运行？**请注意，几乎所有 android 主题都指定了背景，这意味着如果您想创建一个覆盖整个屏幕并带有背景的“LinearLayout”，您最好设置活动的 windowBackground="@null" 或删除背景设置线性布局。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-10-02T10:40:20.097

如果您有`replace`彼此的片段`FragmentManager`，您可以删除背景的其他图纸。

所以，如果你有

```
val fragment = YourFragment.newInstance()
parentFragmentManager.beginTransaction().run {
    replace(R.id.container, fragment, YourFragment.TAG)
    addToBackStack(YourFragment.TAG)
}.commitAllowingStateLoss() 
```

然后片段将*替换*当前片段并具有活动的背景。在这种情况下，您可以省略`android:background="@color/..."`片段。

但是，如果您使用 删除`android:background`并*添加*当前片段上方的片段`add`，它将具有透明背景，因此视图将相互重叠。您将看到 2 个片段，一个在另一个之上。

要检查此行为，您可以临时添加`<item name="android:windowBackground">@color/...</item>`in `AppTheme`，`styles.xml`如上所述。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-02-15T09:58:39.707

更暴力的方法。在您的自定义 theme.xml

```
<style name="MyTheme" parent="Theme.MaterialComponents.Light.Bridge">
     ...
    <item name="android:windowBackground">@color/white</item>
     ...
</style> 
```

# android - android-maven-plugin：如何更新依赖项？

> ID：11994459
> 
> 赞同：0
> 
> 时间：2012-08-16T19:51:49.483
> 
> 标签：android, eclipse, maven, m2e

假设我的 pom.xml 中有一个平台版本 4，但我想将其更改为版本 7 或类似的更改。如何更新项目的依赖项？如果它是一个普通的 Eclipse Java 项目，我可以执行 eclipse:clean eclipse:eclipse 来“刷新”整个项目，但是 android 插件没有这样的目标。如果我执行 eclipse:clean eclipse:eclipse，该项目似乎被翻译成一个真正的 Java 项目（不是 Android）。Maven->Update Project 也无济于事。在工作中，我的 Eclipse Indigo 具有“更新项目配置”和“更新依赖项”选项。在这里，我没有这个。也许这些设置在最新版本的 m2e 或其他东西中结合到“更新项目”中。

那么更新依赖项的正确方法是什么？

我正在使用 Eclipse Juno、m2e 1.1.0、android m2e 0.4.2。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T08:56:16.527

解决方案是右键单击项目 -> 属性 -> Android -> 选择项目构建目标。

并且已经存在一个问题，因此 m2e-android 可以在将来处理这个问题：[https ://github.com/rgladwell/m2e-android/issues/109](https://github.com/rgladwell/m2e-android/issues/109)

# ios - ios如何确定uibarbuttonitem是否已被推送/选择？

> ID：11994463
> 
> 赞同：1
> 
> 时间：2012-08-16T19:51:59.690
> 
> 标签：ios, uipickerview, uibarbuttonitem

我需要加载一个基于`[PickerView didSelectRow:(NSInteger)row inComponent(NSInteger)component`]的视图

我已经弄清楚了突出显示和选择逻辑，我现在需要的只是一种简单的方法来确定是否已按下选择按钮来加载视图。

这可能吗？

例如，

```
if ( /* select button is pressed */ )
{
    //push selected view onto stack.
} 
```

**更新**

在这里，我将发布代码，以便您可以看到我在做什么。我通过 nib 文件进行了大部分设置。

```
-(void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component {

    /* 
    //do simple error checking to ensure nothing badly crazy happens

    if(row > [mPickerMenuItems count])
    {
        NSLog(@"Row index is out of bounds of mPickerMenuItems length in [Overview pickerView:(UIPickerView*) didSelectRow:(NSInteger) inComponent:(NSInteger)]...bailing out");

        return;
    }
    else if(row < 0)
    {
        NSLog(@"Row index is negative in [Overview pickerView:(UIPickerView*) didSelectRow:(NSInteger) inComponent:(NSInteger)]...bailing out.");

        return;
    }
    */

    NSString* selected = [_pickerMenuItems objectAtIndex:row];

    //NSLog(@"(in [Overview pickerView: didSelectRow]) resultLabel.text => %@", mResultLabel.description);

    if([selected isEqualToString:@"My Profile"])
    {

        if ( /* select button is pressed */ )
        {
            //push view onto stack.
        }

        NSLog(@"My Profile has been selected");
    }
    else if([selected isEqualToString:@"Services"])
    {

        NSLog(@"Services has been selected");
    }
    else if([selected isEqualToString:@"Tools"])
    {

        NSLog(@"Tools has been selected");
    }
    else if([selected isEqualToString:@"Media"])
    {

        NSLog(@"Media has been selected");
    }
    else
    {
        NSLog(@"Nothing has been selected in [Overview pickerView: didSelectRow]");
    }
} 
```

**更新 2**

对困惑感到抱歉。我想我应该说的是，我想在`UIBarButtonItem`选择 后立即触发视图开关，基于`UIPickerView`. 我很确定如果我只是使用我拥有的方法并`if-else`全部完成的自然选择，它会切换和加载，但不是在按下选择按钮时。

这是怎么做到的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T19:54:05.537

你只需要给它添加一个目标？还是我错过了什么？

```
UIBarButtonItem *item = [[UIBarButtonItem alloc] initWithTitle:@"My Bar Button" style:UIBarButtonItemStyleBordered target:self action:@selector(MYMETHOD)]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T20:13:08.870

```
- (void)pickerView:(UIPickerView *)thePickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component 
```

在选取器视图中选择特定对象时调用。

假设 _pickerview 是您选择器视图的数据源，您可以简单地根据所选索引加载您想要的视图。

```
if(indexPath.row == x){
//Code to bring up the view controller
} 
```

您的问题令人困惑，不清楚您想做什么。如果这可以很好地回答您的问题或澄清您想要实现的目标

# text - 文本控件失去焦点时如何获取事件？

> ID：11994467
> 
> 赞同：6
> 
> 时间：2012-08-16T19:52:13.143
> 
> 标签：text, focus, javafx-2

我有 JavaFX 2 应用程序，当 TextField 失去焦点时我需要执行一些操作。但是当它失去焦点时，我没有看到节点上发生任何事件。

是否有可能以某种方式监听 TextField 上的焦点丢失事件？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-16T22:33:06.667

[将 ChangeListener 添加](http://docs.oracle.com/javafx/2/api/javafx/beans/value/ObservableValue.html#addListener%28javafx.beans.value.ChangeListener%29)到 TextField 的[focusProperty](http://docs.oracle.com/javafx/2/api/javafx/scene/Node.html#focusedProperty%28%29)。

# javascript - 如何使用 Ruby 在 Javascript (js.erb) 中设置 url？

> ID：11994469
> 
> 赞同：0
> 
> 时间：2012-08-16T19:52:15.037
> 
> 标签：javascript, ruby-on-rails, ruby

我有这个

**路线**：

```
put :sort, :path => 'activities/sort', :controller => 'activities' 
```

**JS**：

```
url: '/activities/sort', 
```

**我想转换成这个（不使用控制器名称或 :as 属性）**：

```
url: <%= :action => 'sort' %>, 
```

或类似这样的相同href：

```
<%= link_to "Order by name",
         :sort,
         :method => :put %> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T19:57:31.153

您应该在路由中写入此 url。喜欢：

**配置/路由.rb**

```
match 'activities/sort_by_attr' => 'activities#sort', :as => :sort_by_attr 
```

然后写

```
url: <%= sort_by_attr_path %>, 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T20:11:21.363

您将定义这样`resources :activities`的路由，`routes.rb`其中​​将免费为您提供 7 条 RESTful 路由。但是，您不仅限于 RESTful 路由默认创建的七个路由。如果您愿意，您可以添加适用于集合或集合的各个成员的其他路由。

```
resources :activities do
  collection do
    get 'sort_by_attr'
  end
end 
```

或者

```
resources :activities do
  get 'sort_by_attr', :on => :collection
end 
```

**您可以使用:as**选项为任何路由指定名称，如下所示：

```
resources :activities do
  get 'sort_by_attr', :on => :collection, :as => :sort
end 
```

这会给你`sort_activities_path`和`sort_activities_url`。阅读更多关于[从外到内的 Rails 路由](http://guides.rubyonrails.org/routing.html)。

**编辑：**

如果您只是将`:action`参数传递给 link_to，它将尝试在当前控制器中找到该路由并呈现该操作。虽然不推荐，但您可以尝试定义一个通用路由来匹配任何 url，如下所示：

```
match ':controller/:action' 
```

# android - 从 Android Media Recorder 流式传输后修复 3GP 文件

> ID：11994470
> 
> 赞同：13
> 
> 时间：2012-08-16T19:52:22.887
> 
> 标签：android, video, video-streaming, 3gp, android-mediarecorder

我正在尝试通过本地 unix 套接字从 android 相机流式传输视频并将文件从流写入 sdcard。一切正常，除了文件不能用任何播放器播放。这是因为 Android 没有填补文件中的一些空白，因为套接字是不可搜索的。据我了解，我需要在视频流结束后进行一些修改。[我在这里](https://groups.google.com/forum/#!topic/android-developers/FiZZSXEFhd0%5B1-25%5D)、[这里](http://www.mattakis.com/blog/kisg/20090708/broadcasting-video-with-android-without-writing-to-the-file-system)和[这里](https://stackoverflow.com/questions/11502609/fix-3gp-header-for-a-streamed-video-through-socket)阅读了几篇文章，但没有一篇对我有帮助。我正在使用十六进制编辑器来学习如何手动进行操作，因此之后在 Android 代码中执行相同操作将是微不足道的。

这是从流中保存的示例文件：[https ://dl.dropbox.com/u/17510473/sample_not_playable.3gp](https://dl.dropbox.com/u/17510473/sample_not_playable.3gp)

任何人都可以修复以使其可玩并告诉他是如何做到的吗？

**编辑：**我删除 3gp 文件的标题并编写新的如下：

```
00 00 00 18 66 74 79 70 33 67 70 34 00 00 03 00 33 67 70 34 33 67 70 36 00 00 00 00 
```

然后我使用以下命令找到 mdat 和 moov 原子的起始位置：

```
grep -aobE "ftyp|mdat|moov" sample_not_playable.3gp 
```

它给了我以下输出：

```
4:ftyp
28:mdat
1414676:moov 
```

然后制作`1414676 - 28 = 1,414,648 = 0x1595F8`

然后我将 0x1595F8 写为 25-28 个字节，就在 mdat 原子之前。所以我的标题现在看起来像这样：

```
00 00 00 18 66 74 79 70 33 67 70 34 00 00 03 00 33 67 70 34 33 67 70 36 00 15 95 F8 
```

当我尝试用 mplayer 播放它时，我得到一些损坏的视频和音频输出。以下是 mplayer 输出的部分内容：

```
[amrwb @ 0x7f72ad652380]Frame too small (33 bytes). Truncated file?
[amrwb @ 0x7f72ad652380]Encountered a bad or corrupted frame
[amrwb @ 0x7f72ad652380]Encountered a bad or corrupted frame
[amrwb @ 0x7f72ad652380]Frame too small (33 bytes). Truncated file?
[amrwb @ 0x7f72ad652380]Encountered a bad or corrupted frame
[amrwb @ 0x7f72ad652380]Encountered a bad or corrupted frame
[amrwb @ 0x7f72ad652380]Encountered a bad or corrupted frame
A:  11.0 V:   1.4 A-V:  9.650 ct:  0.023   0/  0 10%  1%  1.6% 0 0                                                        
[mov,mp4,m4a,3gp,3g2,mj2 @ 0x7f72adeafc40]stream 1, offset 0x15e62b: partial file
[h263 @ 0x7f72ad652380]Bad picture start code
[h263 @ 0x7f72ad652380]header damaged
Error while decoding frame!
[h263 @ 0x7f72ad652380]Bad picture start code
[h263 @ 0x7f72ad652380]header damaged
Error while decoding frame!
[h263 @ 0x7f72ad652380]Bad picture start code
[h263 @ 0x7f72ad652380]header damaged
Error while decoding frame!
A:  11.1 V:   1.5 A-V:  9.558 ct:  0.027   0/  0  9%  1%  1.4% 0 0                                                        
[h263 @ 0x7f72ad652380]Bad picture start code
[h263 @ 0x7f72ad652380]header damaged
Error while decoding frame! 
```

我做错了什么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-28T20:31:23.560

您需要了解的是 mp4 不是**实时**流媒体格式。因此，无论如何您都无法破解以使其实时流式传输。标题 [moov atom] 写在最后。Android 创建一个帧大小和其他参数的内存表，然后在记录结束时将其写入文件开头，因此它需要文件句柄的可查找性。[插座不是]

如果您正在将加密的内容写入磁盘并且您希望这样做以便没有人可以播放该文件，您不必加密整个文件。您只需要加密标题，整个文件就无法播放。

如果您因为不相信我之前的段落而迫切需要完整的文件编码，那么请使用 ffmpeg 之类的东西来进行编码。修改它给你加密输出本身并再次将其保存到硬盘 - 再次删除套接字部分。

您无法在 android 中**实时**流式传输 mp4 文件。我见过很多人徒劳地尝试它，如果您了解视频/格式，就没有办法做到这一点。mp4 不是为直播而设计的。除非您事先知道帧大小 [您不知道] 和编码的确切长度 [您很可能不知道；t]，否则您无法预先创建标头。

附言。mp4 和 3gp 是堂兄弟，所以同样适用。

许多人将实时流媒体与 http pd 和伪流媒体混淆。实时流媒体意味着我没有整个文件，它正在创建并且还在动态流中。http pd 和伪流使用完全可用的文件进行。

编辑：

如果您的目标是在存储到 sdcard 之前加密记录的文件，则需要编码器支持。这意味着在其中安装您自己的编码器。拿ffmpeg，交叉编译到android。为您的应用程序编写一个小的 JNI 接口。先把它弄好，不用加密。完成后，在 ffmpeg fwrite 流的位置，添加您的加密模块。解码时同样的事情。Y3ng 创作。这是最干净的方法。

编辑 2：请参阅 spydroid 为您获取一些功能。那里有类似的。

编辑 3：为了提高答案的质量，我正在解释其他答案也给出的不完美的解决方法：

人们仍然可以通过解析生成的 mp4 并通过套接字单独发送基本流来流式传输 AV。您将面临的唯一问题是您将无法获得完美的 AV 同步，因为您不知道确切的 AV 样本时间戳。只有 android 知道这一点，并将其写入最后的 mp4 标头中。所以对你没有好处。您必须对视频帧的完美采样率做出假设，并且您的音频必须是 amr 才能假设 20ms 数据包。在其他音频案例中，您将开始看到长时间运行的漂移[尤其是在您开始出现高运动场景的情况下]。这是因为生成的每个音频包都没有对应固定的时长[amr等语音编解码器除外]

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-23T18:55:07.350

首先，你要做什么不是很清楚。

您是否只想以编程方式将视频保存到可播放文件中？如果是这样，您只需要使用文件描述符而不是 unix 套接字。MediaRecord 的这个 API 设计用于处理文件（不是 unix 套接字），正是出于随机访问的原因。因此，我的第一个建议是使用文件描述符，您将在录制结束时获得正确的文件。

您可以在此处获取示例：[如何在 Android 上捕获视频录制？](https://stackoverflow.com/questions/1817742/android-video-recording-sample)

在这种情况下，如果您尝试编写从设备流式传输视频的应用程序，则需要实时解析流，将其按帧划分并分别发送帧。最复杂的部分是解析流（一些视频编解码器，例如 H263 可以解析，而其他则不能，特别是如果数据与音频交错）。

我相信这两个项目之一实现了这样的功能： [http ://sipdroid.org/](http://sipdroid.org/) [http://code.google.com/p/imsdroid/](http://code.google.com/p/imsdroid/)

# ios - 是否有任何用于 iOS 开发的开源计算器键盘？

> ID：11994471
> 
> 赞同：0
> 
> 时间：2012-08-16T19:52:25.587
> 
> 标签：ios, user-interface, custom-controls

有谁知道是否有可用的 Objective-c 计算器键盘？我正在寻找与本机文本字段结合使用的东西。它不是原生键盘，而是显示计算器键盘，让您可以直接在原生字段中执行计算。这类似于某些转换器应用程序上的键盘。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T20:12:22.820

您可以使用标准键盘并添加工具栏作为文本字段的附件视图，并添加一些您选择的计算器功能。

# c# - C# Ole.DB 错误

> ID：11994477
> 
> 赞同：1
> 
> 时间：2012-08-16T19:53:01.687
> 
> 标签：c#

我正在用 C# 创建一个程序来帮助跟踪我的所有信息，而不是为我的 DND 类型游戏写下来。我能够毫无问题地插入和删除新播放器，但是在更新播放器时，这是我得到的错误

“查询表达式'@newPlayerName playerLevel = @newPlayerLevel heroID = @newHeroId playerInventoryID = @newPlayerInventoryIDcampaignID = @newCampaignID'中的语法错误（缺少运算符）。”

这是我的更新方法代码

```
 public static Boolean UpdatePlayer(Player oldPlayer,
        Player newPlayer)
    {
        OleDbConnection connection = DBConnection.GetConnection();
        OleDbCommand command;
        string statement =
            "UPDATE Player SET " +
            "playerName = @newPlayerName " +
            "playerLevel = @newPlayerLevel " +
            "heroID = @newHeroId " +
            "playerInventoryID = @newPlayerInventoryID " +
            "campaignID = @newCampaignID " +
            "WHERE ID = @oldID " +
            "AND playerName = @oldPlayerName " +
            "AND playerLevel = @oldPlayerLevel " +
            "AND heroID = @oldHeroID " +
            "AND playerInventoryID = @oldPlayerInventoryID " +
            "AND campaignID = @oldCampaignID ";

        command = new OleDbCommand(statement, connection);
        command.Parameters.AddWithValue("@newPlayerName", newPlayer.PlayerName);
        command.Parameters.AddWithValue("@newPlayerLevel", newPlayer.Level);
        command.Parameters.AddWithValue("@newHeroID", newPlayer.HeroID);
        command.Parameters.AddWithValue("@newPlayerInventoryID", newPlayer.PlayerInventoryID);
        command.Parameters.AddWithValue("@newCampaignID", newPlayer.CampaignID);
        command.Parameters.AddWithValue("@oldID", oldPlayer.ID);
        command.Parameters.AddWithValue("@oldPlayerName", oldPlayer.PlayerName);
        command.Parameters.AddWithValue("@oldPlayerLevel", oldPlayer.Level);
        command.Parameters.AddWithValue("@oldHeroID", oldPlayer.HeroID);
        command.Parameters.AddWithValue("@oldPlayerInventoryID", oldPlayer.PlayerInventoryID);
        command.Parameters.AddWithValue("@oldCampaignID", oldPlayer.CampaignID);

        try
        {
            connection.Open();
            int count = command.ExecuteNonQuery();
            if (count > 0)
                return true;
            else
                return false;
        }
        catch (OleDbException e)
        {
            throw e;
        }
        finally
        {
            connection.Close();
        }
    } 
```

这是调用该函数的代码

```
private void SavePlayers()
    {
        if (lstPlayers.SelectedIndex > -1)
        {
            int parsedInt;
            Player edititedPlayer = new Player();
            edititedPlayer.PlayerName = txtPlayerName.Text;
            edititedPlayer.HeroID =
                heroes[cboHero.SelectedIndex].ID;
            edititedPlayer.CampaignID =
                campaigns[lstCampaigns.SelectedIndex].ID;
            edititedPlayer.ID = players[lstPlayers.SelectedIndex].ID;
            edititedPlayer.PlayerInventoryID = 
                players[lstPlayers.SelectedIndex].PlayerInventoryID;
            if (Int32.TryParse(txtPlayerLevel.Text, out parsedInt))
            {
                edititedPlayer.Level = parsedInt;
                PlayerDB.UpdatePlayer((Player)lstPlayers.SelectedItem,
                    edititedPlayer);                                       
            }
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T20:01:17.663

添加逗号

```
string statement =
    "UPDATE Player SET " +
    "playerName = @newPlayerName, " +
    "playerLevel = @newPlayerLevel, " +
    "heroID = @newHeroId, " +
    "playerInventoryID = @newPlayerInventoryID, " +
    "campaignID = @newCampaignID " +
    "WHERE ID = @oldID " +
    "AND playerName = @oldPlayerName " +
    "AND playerLevel = @oldPlayerLevel " +
    "AND heroID = @oldHeroID " +
    "AND playerInventoryID = @oldPlayerInventoryID " +
    "AND campaignID = @oldCampaignID "; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T20:01:55.480

您缺少更新的字段之间的所有逗号

```
 string statement = 
        "UPDATE Player SET " + 
        "playerName = @newPlayerName, " + 
        "playerLevel = @newPlayerLevel, " + 
        "heroID = @newHeroId, " + 
        "playerInventoryID = @newPlayerInventoryID, " + 
        "campaignID = @newCampaignID " + 
        "WHERE ID = @oldID " + 
        "AND playerName = @oldPlayerName " + 
        "AND playerLevel = @oldPlayerLevel " + 
        "AND heroID = @oldHeroID " + 
        "AND playerInventoryID = @oldPlayerInventoryID " + 
        "AND campaignID = @oldCampaignID "; 
```

# html - 仅使用没有 Javascript 的 CSS 模拟滚动容器内的 Excel 列锁定

> ID：11994480
> 
> 赞同：1
> 
> 时间：2012-08-16T19:53:10.563
> 
> 标签：html, css, html-table, position, css-float

很多关于此的帖子，但我相信我所要求的只是略有不同。

布局是表结构中的列表（如果需要，我可以使用 DIV 来满足此需求）。表结构将具有多列和多行。

目标是从字面上创建一个与 Excel 列锁定完全相同的表结构。我知道这对许多线程来说听起来很熟悉，但这里有一个问题：这意味着当我水平滚动（左右）时，表格中的那些列将保持原位......但是当我垂直滚动时（向上和下）我需要列与页面一起滚动，以便它们始终与它们所属的行对齐。

当我在任何方向和所有方向滚动时，绝对定位的 DIV 会冻结，而不仅仅是水平滚动，并且如果没有 JavaScript，我无法动态调整顶部位置。我知道如何使用 JavaScript 来完成此操作，但该解决方案取决于容器的滚动事件，并且可能会在用户滚动时动态调整*数百*行，这会耗尽 CPU。

如果没有 JavaScript，我怎么能做到这一点？不，我不想在 CSS 中使用 Internet Explorer“表达式（）”，因为那基本上是 JavaScript；）

我更喜欢在这里兼容跨浏览器，但只有在必要时我才会满足于 IE。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T20:27:07.483

我的建议是对表格数据使用嵌套的 iframe，标题保留在 iframe 的第一级，允许您水平滚动，而内部 iframe 允许您垂直滚动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T21:43:01.750

没有脚本似乎是不可能的。最终不得不编写自定义 javascript 来适应。不使用内联框架，使用带有溢出的 DIV：滚动并链接到 onscroll 事件。希望有更简单的方法！

# eclipse-cdt - 如何在 Eclipse 中为 c/c++ 代码创建调用图？

> ID：11994482
> 
> 赞同：3
> 
> 时间：2012-08-16T19:53:17.317
> 
> 标签：eclipse-cdt, call-graph, call-flow

我在互联网上读到 cdt 基本上用于为 Eclipse 中的 c/c++ 代码生成调用图。我已经安装了 eclipse juna 的最新版本以及 MinGW 和 cygwin 来编译和运行 c/c++ 代码。我的问题是我是否必须与 eclipse 版本一起再次安装 cdt 。我已经可以选择在我的 Eclipse 新选项卡下创建 cdt 项目。以及如何在eclipse中生成调用图。基本上都需要相同的步骤。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-04T02:22:05.210

您可以使用 CDT 查看函数之间的依赖关系，但如果您真的想要全面的调用图，您最好安装[doxygen](http://www.doxygen.nl/)，CDT 和 Eclipse 通常都很好地支持它。

# entity-framework - 实体框架 - 更新后插入新行

> ID：11994485
> 
> 赞同：0
> 
> 时间：2012-08-16T19:53:25.013
> 
> 标签：entity-framework

假设我的表中有一行：

```
| ID | Name       |
|  1 | file1.doc  | 
```

我想更新该行中的 Name 列，所以我使用该代码：

```
public partial class Adapter
{
    private my_Entities _db = null;

    public my_Entities db
    {
        get
        {
            if (_db == null) _db = new my_Entities();
            return _db;
        }
    }

    public Orders GetOrderByID(int id)
    {
        return (from x in db.Orders
                where x.ID == id
                select x).FirstOrDefault();
    }
 }

 Adapter adapter = new Adapter();

 var order = adapter.GetPublishOrderByID(123);

 for(int i = 0; i < 2; i++) //< 2 is just for test, the purpose of the whole code is to append the FileName if any file exist for the order
 {
    var existingFile = order.Files.FirstOrDefault();

   //here I get the information about entries
   var objectStateEntries = adapter.db.ObjectStateManager.
                         GetObjectStateEntries(EntityState.Added | 
                                               EntityState.Modified | 
                                               EntityState.Unchanged);

   if (existingFile  != null)
   {
     //now, in the objectStateEntries I can see that ont item with the Added state,
     //and the another entity with the Modified state.
     //They're poining at the same entity (the same ID)

      existingFile.FileName = "lorem.doc";   //FileName is 'file1.doc'    
   }
   else
   {
      order.P_CoverOptionalTempFiles.Add(new P_Files{ FileName = "file1.doc" });
      //the row's State is Added
   }

   adapter.db.SaveChanges();
} 
```

现在在我的数据库中我看到两行

```
| ID | Name       |
|  1 | file1.doc  |
|  2 | lorem.doc  | 
```

为什么 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T22:33:46.213

解决方案是，我必须动态创建上下文。以后知道就好了。但我仍然想知道为什么前面的代码会导致这个问题......

```
var order = adapter.GetPublishOrderByID(123);

for(int i = 0; i < 2; i++)
{
   using(my_Entities ctx = new my_Entities)
   {
        //now, instead of the adapter.db I use ctx
   }
} 
```

# c# - C# Webclient Stream 将文件从 FTP 下载到本地存储

> ID：11994486
> 
> 赞同：6
> 
> 时间：2012-08-16T19:53:24.890
> 
> 标签：c#, ftp, stream, webclient

我一直在通过命名空间提供的`WebClient`对象从 FTP 服务器下载文件`.NET`，然后通过`BinaryWriter`. 一切都很好。但是，现在，文件的大小急剧增加，我担心内存限制，所以我想创建一个下载流，创建一个文件流，并从下载中逐行读取并写入文件。

我很紧张，因为我找不到一个很好的例子。这是我的最终结果：

```
var request = new WebClient();

// Omitted code to add credentials, etc..

var downloadStream = new StreamReader(request.OpenRead(ftpFilePathUri.ToString()));
using (var writeStream = File.Open(toLocation, FileMode.CreateNew))
{
    using (var writer = new StreamWriter(writeStream))
    {
        while (!downloadStream.EndOfStream)
        {
            writer.Write(downloadStream.ReadLine());                  
        }
    }
} 
```

我是否要采用这种不正确/更好的方式/等？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-16T19:57:04.047

您是否尝试过以下`WebClient`类的用法？

```
using (WebClient webClient = new WebClient())
{
    webClient.DownloadFile("url", "filePath");
} 
```

**更新**

```
using (var client = new WebClient())
using (var stream = client.OpenRead("..."))
using (var file = File.Create("..."))
{
    stream.CopyTo(file);
} 
```

如果要使用自定义缓冲区大小显式下载文件：

```
public static void DownloadFile(Uri address, string filePath)
{
    using (var client = new WebClient())
    using (var stream = client.OpenRead(address))
    using (var file = File.Create(filePath))
    {
        var buffer = new byte[4096];
        int bytesReceived;
        while ((bytesReceived = stream.Read(buffer, 0, buffer.Length)) != 0)
        {
            file.Write(buffer, 0, bytesReceived);
        }
    }
} 
```

# apache - apache .htaccess mod_rewrite - 阻止对目录的访问，除非请求是使用特定主机完成的

> ID：11994497
> 
> 赞同：2
> 
> 时间：2012-08-16T19:53:55.483
> 
> 标签：apache, .htaccess

我搜索了谷歌，但无法弄清楚如何做这件事：

如果请求是在特定主机上完成的，我如何阻止对特定目录的访问。

让我举个例子吧。我有**a.com**和**b.com**等地址指向同一个文档根目录（**/**​​ ）。

我需要阻止对*/sites/private/*目录的访问，**除非**请求是使用*a.com*来的。*/sites/private/*目录只有在使用 a.com 完成请求时才能**访问**。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T20:11:46.720

[我现在无法对此进行测试，但是从这里](http://www.askapache.com/htaccess/setenvif.html#HOST_Header_present_request)窃取和修改的这段代码可能`SetEnvIf`会有所帮助：

```
SetEnvIfNoCase Host "a.com" HTTP_MY_HAS_HOST
Order Deny,Allow
Deny from All
Allow from env=HTTP_MY_HAS_HOST 
```

您可以对主机名使用正则表达式。

# eclipse - 无法在 Eclipse 中启动 GlassFish：GlassFish 错误：无法找到或加载主类文件

> ID：11994498
> 
> 赞同：2
> 
> 时间：2012-08-16T19:54:00.063
> 
> 标签：eclipse, glassfish

我正在尝试从 eclipse (juno) 中启动 glassfish。我收到以下错误：

INFO：在 10 毫秒内成功启动。错误：无法找到或加载主类文件命令启动域失败。DAS 已停止。

```
 Here is the complete output in Eclipse:

  Aug 16, 2012 11:51:23 AM com.sun.enterprise.admin.launcher.GFLauncherLogger info
    INFO: JVM invocation command line:

    C:\Program Files\Java\jdk1.7.0\bin\java.exe
    -cp
    C:/glassfish3-2/glassfish3/glassfish/modules/glassfish.jar
   -XX:+UnlockDiagnosticVMOptions
   -XX:MaxPermSize=192m
    -XX:NewRatio=2
    -Xmx512m
    -javaagent:C:/glassfish3-2/glassfish3/glassfish/lib/monitor/btrace-   agent.jar=unsafe=true,noServer=true
    -client
    -Dosgi.shell.telnet.maxconn=1
    -Dfelix.fileinstall.disableConfigSave=false
    -Djdbc.drivers=org.apache.derby.jdbc.ClientDriver
    -Dfelix.fileinstall.dir=C:\glassfish3-2\glassfish3\glassfish/modules/autostart/
    -Djavax.net.ssl.keyStore=C:\glassfish3-2\glassfish3\glassfish\domains\domain1/config/keystore.jks 
    -Dosgi.shell.telnet.port=6666
    -Djava.security.policy=C:\glassfish3-2\glassfish3\glassfish\domains\domain1/config/server.policy
    -Dfelix.fileinstall.log.level=2
    -Dfelix.fileinstall.poll=5000
    -Dcom.sun.aas.instanceRoot=C:\glassfish3-2\glassfish3\glassfish\domains\domain1
    -Dosgi.shell.telnet.ip=127.0.0.1
         -Dcom.sun.enterprise.config.config_environment_factory_class=com.sun.enterprise.config.serv    erbeans.AppserverConfigEnvironmentFactory
   -Djava.endorsed.dirs=C:\glassfish3-2\glassfish3\glassfish/modules/endorsed;      C:\glassfish3-2\glassfish3\glassfish/lib/endorsed
    -Dcom.sun.aas.installRoot=C:\glassfish3-2\glassfish3\glassfish
    -Dfelix.fileinstall.bundles.startTransient=true
    -Djava.ext.dirs=C:\Program Files\Java\jdk1.7.0/lib/ext;C:\Program Files\Java\jdk1.7.0/jre/lib/ext;C:\glassfish3-2\glassfish3\glassfish\domains\domain1/lib/ext
    -Dfelix.fileinstall.bundles.new.start=true
    -Djavax.net.ssl.trustStore=C:\glassfish3-2\glassfish3\glassfish\domains\domain1/config/cacerts.jks
       Dorg.glassfish.additionalOSGiBundlesToStart=org.apache.felix.shell,org.apache.felix.gogo.runtime,org.apache.felix.gogo.shell,org.apache.felix.gogo.command
    -Dcom.sun.enterprise.security.httpsOutboundKeyAlias=s1as
    -Djava.security.auth.login.config=C:\glassfish3-2\glassfish3\glassfish\domains\domain1/config/login.conf
    -DANTLR_USE_DIRECT_CLASS_LOADING=true
    -Dgosh.args=--nointeractive
    -Djava.library.path=C:/glassfish3-2/glassfish3/glassfish/lib;C:/Program Files/Java/jdk1.7.0/bin;C:/Windows/Sun/Java/bin;C:/Windows/System32;C:/Windows;C:/Program Files (x86)/HP SimplePass 2011/x64;C:/Program Files (x86)/HP SimplePass 2011;C:/Program Files/Common Files/Microsoft Shared/Windows Live;C:/Program Files (x86)/Common Files/microsoft shared/Windows Live;C:/Windows/System32/wbem;C:/Windows/System32/WindowsPowerShell/v1.0;C:/Program Files (x86)/Windows Live/Shared;C:/Program Files/Intel/WiFi/bin;C:/Program Files/Common Files/Intel/WirelessCommon;C:/Program Files (x86)/Intel/Services/IPT;C:/Program Files (x86)/Microsoft SQL Server/100/Tools/Binn;C:/Program Files/Microsoft SQL Server/100/Tools/Binn;C:/Program Files/Microsoft SQL Server/100/DTS/Binn;C:/Program Files (x86)/Microsoft ASP.NET/ASP.NET Web Pages/v1.0;C:/Program Files (x86)/Java/jdk1.7.0_01/bin;C:/glassfish3-2/glassfish3/glassfish/"C:/eclipse/eclipse.exe;C:/glassfish3-2/glassfish3/glassfish/" -vm "C:/Program Files (x86)/Java/jdk1.7.0_01/jre/bin/javaw.exe;C:/glassfish3-2/glassfish3/glassfish/.;C:/Program Files/Microsoft SQL Server/110/Tools/Binn;C:/Program Files (x86)/Microsoft SQL Server/110/Tools/Binn;C:/Program Files/Microsoft SQL Server/110/DTS/Binn;C:/Program Files (x86)/Microsoft SQL Server/110/Tools/Binn/ManagementStudio;C:/Program Files (x86)/Microsoft SQL Server/110/DTS/Binn;C:/Program Files/jEdit;C:/Program Files (x86)/Java/jre7/bin;C:/Program Files (x86)/QuickTime/QTSystem;C:/Program Files/Java/jdk1.7.0/db/bin;C:/glassfish3-2/glassfish3/glassfish
com.sun.enterprise.glassfish.bootstrap.ASMain
    -domainname
    domain1
    -asadmin-args
           host,,,localhost,,,--port,,,4848,,,--secure=false,,,--terse=false,,,--echo=false,,,--interactive=false,,,start-domain,,,--verbose=true,,,--debug=false,,,--domaindir,,,C:\glassfish3-2\glassfish3\glassfish\domains,,,domain1
    -instancename
server
    -verbose
true
    -debug
false
    -asadmin-classpath
C:/glassfish3-2/glassfish3/glassfish/modules/admin-cli.jar
    -asadmin-classname
com.sun.enterprise.admin.cli.AsadminMain
    -upgrade
false
    -type
DAS
    -domaindir
C:/glassfish3-2/glassfish3/glassfish/domains/domain1
    -read-stdin
true
    Aug 16, 2012 11:51:23 AM com.sun.enterprise.admin.launcher.GFLauncherLogger info
    INFO: Successfully launched in 10 msec.
    Error: Could not find or load main class Files 
    Command start-domain failed.
    The DAS was stopped. 
```

一如既往地提前感谢。

问候， umbregachoong

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-27T12:21:05.233

这发生在我在命令提示符下启动 glassfish 时。

```
c:\glassfish4\glassfish\bin>asadmin start-domain
Waiting for domain1 to start .
Error starting domain domain1.
The server exited prematurely with exit code 1.
Before it died, it produced the following output:

Error: Could not find or load main class Files

Command start-domain failed. 
```

它是由 PATH 上的以下内容引起的：

```
Path=...;C:\Program Files (x86)\NVIDIA Corporation\PhysX\Common;... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-01T12:46:58.530

我遇到了与 jan.supol 相同的问题，将 NVIDIA 二进制文件的路径设置为像这样的双引号也为我解决了这个问题：

```
Path=...;"C:\Program Files (x86)\NVIDIA Corporation\PhysX\Common";... 
```

这很可能是由 PATH 变量中未包含在双引号中的任何空格引起的。

# c# - Jquery Ajax 多用户请求

> ID：11994507
> 
> 赞同：0
> 
> 时间：2012-08-16T19:54:19.460
> 
> 标签：c#, jquery, asp.net, ajax

我对 ajax 很陌生，但遇到了一个奇怪的问题，我创建了一个 asp.net 网站，该网站在项目中有一个 Web 服务，我通过以下 ajax 代码调用此 Web 服务：

```
 $.ajax({
    type: "POST",
    url: pageUrl + "/PassData",
    data: JSON.stringify({ aos_code: code }),
    contentType: "application/json; charset=utf-8",
    dataType: "json",
    success: OnSuccessCall
}); 
```

c#代码不是很复杂，基本上它会获取代码并调用存储过程并返回一些值：

```
[WebMethod(EnableSession = true)]
public string[] PassData(string aos_code)
{
    // calling the database and returning some data
    return data;
} 
```

它工作正常；问题是，如果两个不同的用户在两台不同的计算机上访问应用程序，假设他们同时单击一个按钮通过 Ajax 调用服务器端函数，它将返回“500 内部服务器错误”。

我不确定 Ajax 究竟是如何工作的，请求是属于同一个会话还是所有用户都请求一个函数？希望这是有道理的，我真的很感谢您的澄清和帮助。

问候，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T19:57:48.120

错误 500 表示服务器端出现问题。检查你的控制台（萤火虫或类似的），看看到底发生了什么，并尝试修复它。Ajax 与它无关，它就像两个用户同时访问同一个页面一样。

# c# - Azure 中的 WCF 声称我的证书不匹配，但我认为我没有

> ID：11994509
> 
> 赞同：0
> 
> 时间：2012-08-16T19:54:22.777
> 
> 标签：c#, wcf, .net-4.0, azure

为什么我会收到此错误，这到底是什么意思？除了不匹配的证书设置之外，还有其他可能吗？

我有一个本地运行的单元测试，它在我们的数据中心命中 ADFS 代理以进行 Active Federation，然后命中在 Azure 中运行的 WCF Web 服务（Web 角色）。客户端出错并出现 MessageSecurityException。所以查看服务器的服务日志，它记录了异常：

```
Cannot resolve KeyInfo for decryption: KeyInfo 'SecurityKeyIdentifier
    (
    IsReadOnly = False,
    Count = 1,
    Clause[0] = EncryptedKeyIdentifierClause(EncryptedKey = abcdefg123456==, Method 'http://www.w3.org/2001/04/xmlenc#rsa-oaep-mgf1p')
    )
', available tokens 'System.ServiceModel.Security.AggregateTokenResolver'. 
```

我在网上找到的一切都表明我在客户端和服务器之间存在证书不匹配。但是我已经对这些证书引用进行了双重、三重和四重检查，它们是相同的。客户端（本地单元测试）端点：

```
 <endpoint address="https://mydomain.com/TestService.svc"
            binding="customBinding"
            bindingConfiguration="WS2007FederationHttpBinding_ISayHelloService"
            contract="ActiveFederationHelpers.Tests.ISayHelloService"
            name="WS2007FederationHttpBinding_ISayHelloService">
    <identity>
      <certificateReference findValue="D4ECD7FF6A551FAA040BA0B62B77B8EA0F11CD16"
                            storeLocation="LocalMachine"
                            storeName="My"
                            x509FindType="FindByThumbprint" />
    </identity>
  </endpoint> 
```

我的服务器的服务配置（我 RDP'd 到一个 Azure 实例从那里拉来确认它真的是我认为的那样）：

```
<serviceCertificate>
    <certificateReference findValue="D4ECD7FF6A551FAA040BA0B62B77B8EA0F11CD16" storeLocation="LocalMachine" storeName="My" x509FindType="FindByThumbprint" />
</serviceCertificate> 
```

我已确认这些证书已安装在我的本地计算机（单元测试）和 Azure 服务器（Web 服务服务器）上。而且我什至已经确认指纹是我的配置中的内容。我让这一切都在本地环境中成功运行。唯一的区别是证书、URI 和 Azure 的引入。

我仔细检查了其他一些事情：

1.  不，我没有复制/粘贴带有 unicode 字符的指纹。我正在为我的服务重复使用我的 SSL 证书，并且 SSL 工作得很好，所以它不是指纹中的错字。
2.  该证书没有旧版本或替代版本可能会让我感到困惑。就像我说的那样，每次确保安装它时，我一直在检查证书的指纹（在 MMC -> Certs 中）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T15:33:55.480

最终，ADFS 配置错误，不知何故这是由此产生的错误。错误配置是由于我的联合服务名称不是解析到 ADFS 代理的主机名（只是 ADFS 服务器本身）。围绕我们的公共代理的主机名重新构建我们的 ADFS 设置为我们解决了这些问题。

我怀疑这在 Azure 之外不是问题的原因是联合服务名称解析到内部服务器而不是外部代理，并且 Azure 只能访问外部代理。

Either way, moral of the story (that nearly nobody seems to talk about) is that your Federation Service Name must be a *public URI* if you expect to ever use a Proxy with it, and that Proxy must resolve to that public URI!

# html - ☺ 不在移动版本中渲染

> ID：11994510
> 
> 赞同：2
> 
> 时间：2012-08-16T19:54:29.380
> 
> 标签：html, unicode

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T20:05:30.493

What you are seeing is a lack of that character in a font, not a character encoding problem.

There is nothing you can do about this, short of trying to use your own custom font (you may have mobile browser support problems). I would suggest using an image instead, if possible.

# wordpress - 网站崩溃 IE8 - 强制它进入兼容模式

> ID：11994512
> 
> 赞同：0
> 
> 时间：2012-08-16T19:54:31.850
> 
> 标签：wordpress, internet-explorer, internet-explorer-8, responsive-design, ie8-compatibility-mode

网站：[http ://www.mccaonline.com](http://www.mccaonline.com)

我最近一直在网站 MCCAOnline.com 上工作，并且在 Internet Explorer 8 中遇到了一些问题。当我尝试在 IE8 中加载该网站时，它崩溃并恢复到兼容模式。我在网上广泛浏览了一下，似乎有些人遇到了respond-ie.js 文件的问题。我将其移至页面底部无济于事。

在兼容模式下，会出现以下问题：

1) 页脚元素堆叠在一起 2) 导航下拉菜单不起作用

此外，页面右侧还有一个白边。我不确定是什么原因造成的，或者它是否与 IE8 错误有关，因为它出现在所有浏览器中。任何帮助是极大的赞赏。谢谢！

最好的，克林特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T20:36:57.023

我在 XP SP3 上使用 IE8 并进行了完整更新，并且没有崩溃。你更新最新版本的IE8吗？

# c - 在 int 数组上使用 memcmp 是否严格符合？

> ID：11994513
> 
> 赞同：26
> 
> 时间：2012-08-16T19:54:34.760
> 
> 标签：c, language-lawyer

以下程序是 C 语言中严格符合的程序吗？我对 c90 和 c99 感兴趣，但 c11 的答案也可以接受。

```
#include <stdio.h>
#include <string.h>

struct S { int array[2]; };

int main () {
    struct S a = { { 1, 2 } };
    struct S b;
    b = a;
    if (memcmp(b.array, a.array, sizeof(b.array)) == 0) {
        puts("ok");
    }
    return 0;
} 
```

在[对我在另一个问题中的回答的评论中](https://stackoverflow.com/a/11993431/315052)，Eric Postpischil 坚持认为程序输出将根据平台而变化，主要是由于未初始化的填充位的可能性。我认为结构分配会覆盖所有位，`b`使其与`a`. 但是，C99 似乎没有提供这样的保证。从第 6.5.16.1 p2 节：

> 在*简单赋值*( `=`) 中，右操作数的值被转换为赋值表达式的类型，并替换存储在左操作数指定的对象中的值。

在复合类型的上下文中，“转换”和“替换”是什么意思？

最后，考虑同一个程序，除了 和 的定义`a`是`b`全局的。*该*程序会是一个严格遵守的程序吗？

**编辑：**只是想在这里总结一些讨论材料，而不是添加我自己的答案，因为我真的没有自己的创作。

*   该程序不严格符合。由于赋值是按值而不是按表示，因此`b.array`可能包含也可能不包含与`a.array`.
*   `a`不需要转换，因为它与 的类型相同`b`，但替换是按值，并且逐个成员完成。
*   即使`a`和中的定义`b`是全局的，后赋值`b.array`也可能包含也可能不包含与 不同的位设置`a.array`。（关于填充字节的讨论很少`b`，但发布的问题不是关于结构比较。c99 没有提到如何在静态存储中初始化填充，但 c11 明确声明它是零初始化的。）
*   附带说明一下，如果使用from初始化，`memcmp`则已明确定义。`b``memcpy``a`

我感谢所有参与讨论的人。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T21:13:21.480

在 C99 §6.2.6 中

> §6.2.6.1 概述
> 
> 1 除本小节中所述外，所有类型的表示均未指定。
> 
> [...]
> 
> 4 [..] 具有相同对象表示的两个值（NaN 除外）比较相等，但比较相等的值可能具有不同的对象表示。
> 
> 6 当值存储在结构或联合类型的对象中时，包括在成员对象中，对应于任何填充字节的对象表示的字节采用未指定的值。^(42))
> 
> 42) 因此，例如，结构分配不需要复制任何填充位。
> 
> 43) 具有相同有效类型 T 的对象 x 和 y 在作为类型 T 的对象访问时可能具有相同的值，但在其他上下文中具有不同的值。特别是，如果 == 为类型 T 定义，则 x == y 并不意味着 memcmp(&x, &y, sizeof (T)) == 0。此外，x == y 不一定意味着 x 和 y具有相同的价值；对 T 类型值的其他操作可以区分它们。
> 
> §6.2.6.2 整数类型
> 
> [...]
> 
> 2 对于有符号整数类型，对象表示的位应分为三组：值位、填充位和符号位。不需要任何填充位；[...]
> 
> [...]
> 
> 5 任何填充位的值都未指定。[...]

在 J.1 中未指定的行为

> *   在结构或联合中存储值时填充字节的值 (6.2.6.1)。
> 
> [...]
> 
> *   整数表示中的任何填充位的值 (6.2.6.2)。

因此，在 和 的表示中可能存在`a`不同`b`但不影响值的位。这与其他答案的结论相同，但我认为标准中的这些引用将是很好的附加背景。

* * *

如果您执行 a`memcpy`那么 the`memcmp`将始终返回 0 并且程序将严格符合。`memcpy`复制`a`into的对象表示`b`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T21:23:06.567

我的观点是它是严格符合的。根据 Eric Postpischil 提到的 4.5：

> 严格遵守的程序应仅使用本国际标准中指定的语言和库的那些特性。它不应产生依赖于任何未指定、未定义或实现定义的行为的输出，并且不应超过任何最小实现限制。

有问题的行为是 的行为`memcmp`，这是定义明确的，没有任何未指定、未定义或实现定义的方面。它适用于表示的原始位，而不知道有关值、填充位或陷阱表示的任何信息。因此，在这种特定情况下的**结果**（但不是**功能**）`memcmp`取决于存储在这些字节中的值的实现。

6.2.6.2 中的脚注 43)：

> 具有相同有效类型 T 的对象 x 和 y 在作为类型 T 的对象访问时可能具有相同的值，但在其他上下文中具有不同的值。特别是，如果 == 为类型 T 定义，则 x == y 并不意味着 memcmp(&x, &y, sizeof (T)) == 0。此外，x == y 不一定意味着 x 和 y具有相同的价值；对 T 类型值的其他操作可以区分它们。

编辑：

再想一想，我对严格遵守不再那么确定了，因为：

> 它不应产生依赖于**任何**未指定 [...]

显然，结果`memcmp`取决于表示的未指定行为，从而满足本条款，即使其`memcmp`自身的行为已明确定义。在输出发生之前，该子句没有说明功能的深度。

所以它**不是**严格符合的。

编辑2：

我不太确定它在`memcpy`用于复制结构时会变得严格一致。根据附件 J，未指定的行为发生在`a`初始化时：

```
struct S a = { { 1, 2 } }; 
```

即使我们假设填充位不会改变并且`memcpy`总是返回 0，它仍然使用填充位来获取结果。它依赖于它们不会改变的假设，但标准中对此没有任何保证。

我们应该区分结构中用于对齐的填充字节和特定本机类型（如`int`. 虽然我们可以安全地假设填充字节不会改变，但这只是因为没有真正的原因，同样的情况不适用于填充位。该标准提到奇偶校验标志作为填充位的示例。这可能是实现的软件功能，但也可能是硬件功能。因此，可能存在用于填充位的其他硬件标志，包括因任何原因在读取访问时发生变化的硬件标志。

我们很难找到这样一个奇特的机器和实现，但我没有看到任何禁止这样做的东西。如我错了请纠正我。

# python - 在 python C 扩展中记录未知数量的浮点数

> ID：11994515
> 
> 赞同：2
> 
> 时间：2012-08-16T19:54:55.030
> 
> 标签：python, numpy, scipy

我正在使用 python 来设置计算密集型模拟，然后在自定义构建的 C 扩展中运行它，最后在 python 中处理结果。在模拟过程中，我想在每个时间步存储一个固定长度的浮点数（C 双精度转换为 PyFloatObjects）代表我的变量，但我不知道提前多少时间步。模拟完成后，我需要以一种形式将结果传递回 python，其中为每个单独变量记录的数据可作为类似列表的对象（例如，（围绕 a）连续数组的（包装器）连续数组，分段连续具有固定步幅的矩阵中的数组或列）。

目前，我正在创建一个字典，将每个变量的名称映射到包含 PyFloatObject 对象的列表。这种格式非常适合在后期处理阶段使用，但我觉得创作阶段可能会快很多。

时间非常关键，因为模拟已经是一项计算量很大的任务。我希望 A. 购买大量内存和 B. 明智地设置您的实验的组合将使整个日志适合 RAM。但是，使用我当前的 dict-of-lists 解决方案将每个变量的日志保存在内存的连续部分中将需要大量的复制和开销。

我的问题是：*什么是一种聪明的、低级的方法，可以以最小的空间/时间开销在内存中快速记录千兆字节的双精度，并且仍然可以转换为简洁的 python 数据结构？*

* * *

**澄清：**当我说“记录”时，我的意思是存储到模拟之后。一旦完成，后处理阶段就开始了，在大多数情况下，我只会存储结果图。所以我实际上不需要将数字存储在磁盘上。

* * *

**更新：**最后，我稍微改变了我的方法，并将日志（作为将变量名映射到序列类型的字典）添加到函数参数中。这允许您传入对象，例如列表或 array.arrays 或任何具有 append 方法的对象。这会增加一点时间开销，因为我使用 PyObject_CallMethodObjArgs 函数来调用 Append 方法而不是 PyList_Append 或类似方法。使用数组可以减少内存负载，这似乎是我能做的最好的事情，而不是编写自己的扩展存储类型。谢谢大家！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T20:42:31.907

您可能需要考虑在 Cython 中执行此操作，而不是作为 C 扩展模块。Cython 很聪明，可以让你以非常 Python 的方式做事，即使它同时允许你使用 C 数据类型和 python 数据类型。

你检查过阵列模块吗？它允许您在单个集合中存储大量标量、同类类型。

如果您真正“记录”这些内容，而不仅仅是将它们返回给 CPython，您可能会尝试打开一个文件并 fprintf'ing 它们。

顺便说一句，realloc 可能是您的朋友，无论您使用 C 扩展模块还是 Cython。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T21:42:11.807

这将更多是大量的想法，而不是一致的答案，因为听起来这就是您要寻找的。如果没有，我道歉。

您在这里要避免的主要事情是将数十亿的 PyFloatObjects 存储在内存中。有几种方法可以解决这个问题，但它们都围绕着存储数十亿个普通的 C 双精度对象，并找到某种方法将它们暴露给 Python，就好像它们是 PyFloatObjects 的序列一样。

要让 Python（或其他人的模块）完成这项工作，您可以使用 numpy 数组、标准库数组、结构模块顶部的简单手工包装器或 ctypes。（使用 ctypes 来处理扩展模块有点奇怪，但没有什么能阻止你这样做。）如果你使用的是 struct 或 ctypes，你甚至可以通过创建一个巨大的文件来超越你的内存限制和根据需要将窗口映射到其中。

为了让你的 C 模块完成这项工作，而不是实际返回一个列表，而是返回一个满足序列协议的自定义对象，所以当有人调用时，比如 foo. **getitem** (i) 您将 _array[i] 动态转换为 PyFloatObject。

mmap 的另一个优点是，如果您正在迭代地创建数组，您可以通过流式传输到文件来创建它们，然后通过将结果文件作为内存块映射回来使用它们。

否则，您需要处理分配。如果您使用的是标准数组，它会根据需要进行自动扩展，否则，您将自己进行。如果需要，进行重新分配和复制的代码并不难，网上有很多示例代码，但你必须编写它。或者您可能想要考虑构建一个跨步容器，您可以将其暴露给 Python，就好像它是连续的一样，即使它不是。（你可以通过复杂的缓冲区协议直接做到这一点，但我个人一直觉得这比编写自己的序列实现更难。）如果你可以使用 C++，vector 是一个自动扩展数组，而 deque 是一个跨步容器（如果你有 SGI STL 绳索，对于你正在做的事情，它可能是一个更好的跨步容器）。

正如另一个答案指出的那样，Cython 可以帮助解决其中的一些问题。对于“将大量浮点数暴露给 Python”部分来说，并没有那么多；您可以将 Python 部分的部分移动到 Cython 中，在那里它们将被编译成 C。如果幸运的话，所有需要处理大量浮点数的代码都将在 Cython 实现的 Python 子集中工作，并且您需要向实际解释代码公开的唯一内容是更高级别的驱动程序（即使是这样）。

# java - 如何使用 Java 读取文件中的行而不丢失开头的制表符、空格（缩进）？

> ID：11994519
> 
> 赞同：1
> 
> 时间：2012-08-16T19:55:08.580
> 
> 标签：java

如何使用 Java 读取文件中的行而不丢失开头的制表符、空格（缩进）？我需要这个来阅读源代码而不是打印出来。

我这样做是这样的：

```
 br = new BufferedReader(new FileReader(filePath));
        String line = null;
        while ((line = br.readLine()) != null) {
            aList.add(line);
        } 
```

（当然有 try catch 块）

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T20:23:11.613

看起来你的`aList`，大概是一个[JList](http://docs.oracle.com/javase/7/docs/api/javax/swing/JList.html)，在渲染过程中删除了制表符。

一种解决方案是将制表符替换为空格：

```
aList.add(line.replaceAll("\t", "    ")); 
```

另一个解决方案是使用 JTextPane 编写您自己的 ListCellRenderer，尽管这并非没有[缺陷](http://www.coderanch.com/t/488404/GUI/java/tab-not-recognised-JList)。

# android - 以离线模式加载网站

> ID：11994521
> 
> 赞同：1
> 
> 时间：2012-08-16T19:55:28.710
> 
> 标签：android, android-webview, android-internet

我想在未连接互联网时从缓存中加载网站。这是我在 onCreate 中设置 webview 的方法：

```
 browse.getSettings().setJavaScriptEnabled(true);
    browse.getSettings().setPluginsEnabled(true);
    browse.getSettings().setLoadWithOverviewMode(true);
    browse.getSettings().setUseWideViewPort(true);
    browse.getSettings().setBuiltInZoomControls(true);
    browse.getSettings().setSupportZoom(true);
    browse.setScrollBarStyle(WebView.SCROLLBARS_OUTSIDE_OVERLAY);
    browse.setScrollbarFadingEnabled(true);
    browse.getSettings().setLoadsImagesAutomatically(true);
    browse.getSettings().setAppCacheMaxSize(1024 * 1024 * 100);
    browse.getSettings().setAppCacheEnabled(true);

    if (cm.getActiveNetworkInfo().isConnected())
        browse.getSettings().setCacheMode(WebSettings.LOAD_DEFAULT);
    else
        browse.getSettings().setCacheMode(
                WebSettings.LOAD_CACHE_ELSE_NETWORK);

    browse.setWebViewClient(new WebViewClient() {

        @Override
        public void onPageStarted(WebView view, String url, Bitmap favicon) {
            // TODO Auto-generated method stub
            super.onPageStarted(view, url, favicon);
            t.setVisibility(TextView.VISIBLE);
        }

        @Override
        public void onPageFinished(WebView view, String url) {
            super.onPageFinished(view, url);
            t.setVisibility(TextView.GONE);
        }
    });

    try {
        browse.loadUrl(address);
    } catch (Exception e) {
        e.printStackTrace();
    } 
```

这是我正在关注的[教程](http://www.devahead.com/blog/2012/01/saving-the-android-webview-cache-on-the-sd-card/)，即使重新启动浏览器，我也会尝试加载以前访问过的网页。不工作！请帮我。

PS：我已经搜索了SO上的所有相关代码，它们都不起作用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T20:08:19.747

在清单文件中声明以下权限：

```
android.permission.ACCESS_NETWORK_STATE 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T06:55:07.420

您是否尝试过 nanoHttpd 网络服务器，这是在 sdcard 或本地内存中访问网页的简单解决方案。您要做的就是将页面路径指定为 http://localhost:8081/[您的离线网页的缓存目录路径]在网页视图中

[https://gist.github.com/1893396](https://gist.github.com/1893396)

我在 sdcard 和手机内存的页面上试过这个，希望这对你有用

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T02:03:22.943

我认为您错过了以下电话[`WebSettings.setAppCacheEnabled(true)`](http://developer.android.com/reference/android/webkit/WebSettings.html#setAppCacheEnabled%28boolean%29)：)

另外，我认为在调用`setCacheMode()`之前检查连接和调用可能会更好，`loadUrl()`而不是在你的`onPageStarted()`方法中（似乎为时已晚）。

最后，我不确定您是否`getCacheDir()`需要覆盖，因为我相信您只是在覆盖中调用默认实现。

**更新：**

查看问题中的更新代码后，我可以确认我有类似的代码可以正常工作。唯一显着的区别是我在检查连接时有以下代码：

```
 final NetworkInfo activeNetworkInfo = cm.getActiveNetworkInfo();
    if (activeNetworkInfo != null && activeNetworkInfo.isConnected()) {
        settings.setCacheMode(WebSettings.LOAD_DEFAULT);
    } else {
        settings.setCacheMode(WebSettings.LOAD_CACHE_ELSE_NETWORK);
    } 
```

与您的版本相比：

```
 if (cm.getActiveNetworkInfo().isConnected())
        browse.getSettings().setCacheMode(WebSettings.LOAD_DEFAULT);
    else
        browse.getSettings().setCacheMode(WebSettings.LOAD_CACHE_ELSE_NETWORK); 
```

我通过在模拟器中运行并打开和关闭飞行模式进行了测试。

但是，我确实阅读了您更紧密地链接的教程（我现在明白了为什么您`getCacheDir()`在原始代码中覆盖）并且想知道您是否仍在调用您`WebView.clearCache(true)`的`onDestroy()`Activity。如果您仍然没有修改教程中的那部分，那肯定会导致缓存似乎无法正常工作:)

# objective-c - 关于ivars范围的快速查询

> ID：11994522
> 
> 赞同：0
> 
> 时间：2012-08-16T19:55:32.550
> 
> 标签：objective-c, scope, instance-variables, declared-property

> **可能重复：**
> [@synthesized 实例变量的可见性是什么？](https://stackoverflow.com/questions/8510464/what-is-the-visibility-of-synthesized-instance-variables)

这些 ivars的作用域（`@private`、`@protected`等）是什么？

-`@property/@synthesize`

- 声明于`.h`

- 声明于`.m`

# load-balancing - 所有 jmeter 请求仅通过 haproxy 发送到一台服务器

> ID：11994527
> 
> 赞同：1
> 
> 时间：2012-08-16T19:55:56.797
> 
> 标签：load-balancing, jmeter, haproxy

我正在使用 Jmeter 对我的 Web 应用程序进行负载测试。我有两个 Web 服务器，我们使用 HAProxy 进行负载平衡。我所有的测试都运行良好并且配置正确。我有三个 jmeter 远程客户端，所以我可以运行我的分布式测试。我面临的问题是我所有的 jmeter 请求都只由其中一个 Web 服务器处理。由于某种原因，它不平衡，我有很多超时和巨大的响应时间。我已经四处寻找一种使这些请求保持平衡的方法，但到目前为止我还没有运气。有谁知道这种行为的原因是什么？如果您需要先了解我的环境，请告诉我，我会提供答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T20:12:16.547

检查您的 haproxy 配置：

*   它的负载平衡策略是什么，如果不是循环，它是基于 ip 源或您的 3 个远程服务器可能共有的其他一些信息吗？

*   你确定负载平衡工作正常吗？如果您可以添加一些有关 Web 服务器的信息以响应调试，请先尝试使用浏览器进行测试。

检查您的测试计划：

*   您确定您的请求中没有硬编码的 sessionid 吗？

*   你配置了多少线程？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-05T05:38:07.767

默认情况下，在您的 Jmeter 脚本中，选中 HTTP 请求“使用 KeepAlive”标头选项。

> Keep-Alive 是一个标头，用于维护客户端和服务器之间的持久连接，防止连接间歇性中断。也称为 HTTP keep-alive，它可以定义为一种允许相同 TCP 连接进行 HTTP 通信的方法，而不是为每个新请求打开一个新连接。

这可能会导致所有请求都转到同一台服务器。只需取消选中该选项并保存，停止脚本并重新运行。

# c# - 在另一个控件的可见区域内移动控件

> ID：11994530
> 
> 赞同：1
> 
> 时间：2012-08-16T19:56:04.793
> 
> 标签：c#, winforms, user-controls, controls, mouseevent

我有 a`PictureBox`在 a 内`TabPage`，当然这`TabPage`是 a 的一部分，`TabView`这`TabView`是在 a 内`Form`。我希望用户能够在标签页中移动这个图片框。为此，我使用图片框的`MouseDown`,`MouseMove`和`MouseUp`事件：

```
private void pictureBoxPackageView_MouseDown(object sender, MouseEventArgs e)
{
    if (!_mapPackageIsMoving)
    {
        _mapPackageIsMoving = true;
    }
} 

private void pictureBoxPackageView_MouseMove(object sender, MouseEventArgs e)
{
    if(_mapPackageIsMoving)
    {
        pictureBoxPackageView.Location = MousePosition; //This is not exact at all!
        return;
    }

    //Some other code for some other stuff when picturebox is not moving...
}

private void pictureBoxPackageView_MouseUp(object sender, MouseEventArgs e)
{
    if (_mapPackageIsMoving)
    {
        _mapPackageIsMoving = false; //Mouse button is up, end moving!
        return;
    }
} 
```

但我的问题在于`MouseMove`事件。按下按钮后，只要我移动鼠标，图片框就会跳出标签页的可见区域。

我需要知道如何仅在选项卡页的矩形内处理移动，如果图片框被拖出选项卡视图的可见区域，除非用户将鼠标移到选项卡视图的可见矩形内，否则它不应再移动。

任何帮助/提示将被应用！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T20:02:02.577

您需要一个变量来保存 PictureBox 的原始位置：

根据[HansPassant 的回答](https://stackoverflow.com/a/9805776/719186)修改：

```
private Point start = Point.Empty;

void pictureBoxPackageView_MouseUp(object sender, MouseEventArgs e) {
  _mapPackageIsMoving = false;
}

void pictureBoxPackageView_MouseMove(object sender, MouseEventArgs e) {
  if (_mapPackageIsMoving) {
    pictureBoxPackageView.Location = new Point(
                             pictureBoxPackageView.Left + (e.X - start.X), 
                             pictureBoxPackageView.Top + (e.Y - start.Y));
  }
}

void pictureBoxPackageView_MouseDown(object sender, MouseEventArgs e) {
  start = e.Location;
  _mapPackageIsMoving = true;
} 
```

# jquery - Jquery Fancybox 回调问题

> ID：11994533
> 
> 赞同：0
> 
> 时间：2012-08-16T19:56:13.587
> 
> 标签：jquery, callback, fancybox-2

我似乎对回调和fancybox有一个有趣的问题。这是问题所在：我有一个可以从多个按钮调用的花式框。fancybox 是一个模态的 yes no 盒子。当用户选择是时，将发出回调。这很好用。当用户选择另一个项目时出现问题，fancybox 显示并且用户再次选择是。回调被触发两次，一次用于前一个项目，一次用于新项目。这是我的代码：

显示fancybox的按钮调用（页面上的多个）：

```
<button id="ctl00_ContentPlaceHolderColMain_ucSKUList_rptSkuList_ctl00_btnAdd" class="btn btnCart btnColor5" ss="oos" skuid="12345" onclick="initAddToCart(this);">Back Order</button> 
```

花式框html：

```
<div id="backorderVerify" style="display:none;">
        <div class="inner">
            <h2>Item is not in stock!</h2>
            <div class="base">
                <div align='center'>
                    Would you like to backorder?
                </div>
                <div align="center" style="margin:20px 0 0 0;">
                    <input type="button" id="btnBOYes" value="Yes" />
                    <input type="button" id="btnBONo" value="No" />
                </div>              
            </div>
        </div>
    </div> 
```

Javascript：

```
function backorderVerify(objAddBtn) {

    $.fancybox({
        'closeBtn': false,
        'href' : '#backorderVerify',
        'beforeShow' : function () {

            $("#btnBOYes").click(function () {
                $.fancybox.close(true);                    
                    addToCart($(objAddBtn).attr("skuid"), objAddBtn);
            });

            $("#btnBONo").click(function () {
                $.fancybox.close(true);
            });
        }

    });

} 
```

先谢谢了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T15:56:55.750

好的，fliim 实际上有正确的想法。每次调用fancybox 时都会绑定之前的节目。因此，每个绑定项目都调用它。我最终将 Yes/No click 事件从 fancybox 调用中拉出来，并为每个按钮设置了它们自己的方法。感谢大家对此的帮助。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-16T20:06:45.063

我认为你不应该在 beforeShow 事件中定义你的点击句柄。也许每次事件发生时，他都会再定义一次。

# asp.net - ASP.NET 中的报告

> ID：11994536
> 
> 赞同：0
> 
> 时间：2012-08-16T19:56:24.353
> 
> 标签：asp.net, crystal-reports, reportviewer

我有一个 SQL 数据库和一个用于将数据放入数据库的 ASP.NET 网站。

项目要求之一是构建一个系统，允许用户将 Crystal Report 上传到服务器并根据需要运行它。这样，用户可以创建一个定制的报告（然后变成管理，客户），而不会强迫他们通过开发人员。

我正在寻找有关如何实现这一目标的建议。

目前，我正在寻找一种方法，将 Crystal Report 中的数据库连接从开发它的数据库重定向到最终将运行的数据库。但是，似乎没有一种简单的方法可以做到这一点。

我也在调查 ReportViewer 对象。但是，我看到的所有代码都涉及在代码中指定报表的查询，这是不可接受的。

一种选择（我根本不喜欢）是让他们编写自己的查询，以便他们可以将结果复制到 Excel 中。这将意味着一个空白文本框和有关数据库结构的信息。由于多种原因，这不是一个好主意。

另一种选择是为每个表创建一个报告（可能还有一些额外的），让用户将他们想要的数据复制到 Excel 中，然后继续他们的快乐方式。

tl;dr 如何构建灵活的报告系统？

==========================================
**续：** 2012 年 8 月 20 日
我有决定走 b.pell 扩展方法的路线。到目前为止，它让我比其他任何事情都更接近。我绑定到 CrystalReportViewer 的代码如下：

```
CrystalReportSource rs = new CrystalReportSource();
rs.Report.FileName = Server.MapPath("ReportFiles/") + Request["reportname"];
string connstring = System.Web.Configuration.WebConfigurationManager.ConnectionStrings["myConnectionString"].ConnectionString;
rs.ReportDocument.ApplyCredentialsFromConnectionString(connstring);
rs.ReportDocument.ApplyNewDatabaseName("myDBName", "mySchemaName");
rs.ReportDocument.Refresh();

CrystalReportViewer1.ReportSource = rs; 
```

这非常接近工作。它在我的开发机器上运行良好，但是当我在服务器上运行代码时，它给出了以下错误：

> 登录失败。文件 CrystalReport2 {5D2E82E5-783E-4DFD-A770-C8AE72A51E4E}.rpt 中的错误：无法连接：登录参数不正确。**说明：**执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。**异常详细信息：** System.Runtime.InteropServices.COMException：登录失败。文件 CrystalReport2 {5D2E82E5-783E-4DFD-A770-C8AE72A51E4E}.rpt 中的错误：无法连接：登录参数不正确。**源错误：**在执行当前 Web 请求期间生成了未处理的异常。可以使用下面的异常堆栈跟踪来识别有关异常起源和位置的信息。

错误在代码的这一行中：

> crTable.Location = String.Format("{0}{1}", 前缀, crTable.Location.Substring(crTable.Location.LastIndexOf(".") + 1))

当我删除对 ApplyNewDatabaseName 的调用时，系统会要求我输入服务器名称、数据库名称、用户名和密码，或者选择集成安全性。我无法输入数据库名称或服务器名称（这些字段被禁用）。

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T20:58:50.563

我认为您正在寻找的是报告服务，它是[商业智能](http://www.microsoft.com/sqlserver/en/us/solutions-technologies/SQL-Server-2012-business-intelligence.aspx)的一部分， 或者您可以设置一个 UI，让用户选择报告所需的表和列（这样您可以限制他们可以访问的信息）编写一个动态查询生成器函数或类似的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T17:20:43.900

我经常回答不断变化的 Crystal Reports 连接问题（我认为 Crystal 会变得更容易，但我想知道他们是否不这样做，因为他们的服务器产品就是这样做的）。:D 无论如何，您可以在运行时设置数据库凭据。Crystal 在完成的顺序上非常特别，但我有一些代码可以转化为扩展方法来解决问题。此代码将遍历主报告和所有子报告并更改连接信息。这假设所有子报表都连接到与主报表相同的数据库（如果没有，您需要对其进行修改以处理多个连接，但这至少在我所做的情况下很少出现）。

更改连接信息的扩展方法：http: [//www.blakepell.com/2012-05-22-crystal-reports-extension-methods](http://www.blakepell.com/2012-05-22-crystal-reports-extension-methods)

它将像这样使用（尽管您可能绑定到查看器而不是导出，因此您可以忽略它，这只是示例）。

```
Using rd As New ReportDocument 
    rd.Load("C:\Temp\CrystalReports\InternalAccountReport.rpt") 
    rd.ApplyNewServer("serverName or DSN", "databaseUsername", "databasePassword") 
    rd.ApplyParameters("AccountNumber=038PQRX922;", True) 
    rd.ExportToDisk(ExportFormatType.PortableDocFormat, "c:\temp\test.pdf") 
    rd.Close() 
End Using 

System.Diagnostics.Process.Start("c:\temp\test.pdf") 
```

此时您可以使用 Crystal Viewer 来交付报告并将报告存储在数据库或文件系统中（使用 db 元数据表），并具有一些用户可以从中选择的预定义连接，当它被应用时跑。

您还可以选择编写自己的前端。在这种情况下，用户将从您的元数据中选择一个报告（您可以在其上设置任何您想要的安全性，我使用 AD）。然后，您可以读取报表参数并将它们布置在 Web 表单上。当用户填写它们时，您然后对它们进行清理并通过这些扩展将它们传递给报告，您可以输出 Excel、PDF、Word Doc、RTF 等。更多的开销而不是漂亮的预览视图，但可以很好地工作（我过去做过类似的事情）。希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T07:42:47.150

关于“......让他们编写自己的查询”是您问题的一部分。

解决方案可以是使用一些具有友好用户界面的查询构建器组件，它向用户隐藏数据库的复杂性并避免任何可能的 SQL 注入。

市场上此类产品很少。其中一个叫做 EasyQuery，如果我没记错的话，另一个是由 Aspose 构建的。尝试在 Google 中搜索“query bulider for asp.net”或“.net query builder component”。

# html - 我应该将图像放入段落还是 html 列表中？- HTML

> ID：11994538
> 
> 赞同：-1
> 
> 时间：2012-08-16T19:56:39.653
> 
> 标签：html, image

我应该将图像放入段落还是 html 列表中？- HTML

例如，我应该这样做吗？

```
<p><img><img><img></p> 
```

还是像这样？

```
<ul><li><img><li></li><img><li></li><img></li></ul> 
```

或者以其他方式？

编辑：对不起，我忘了告诉你我使用这些图像的原因。这是一个画廊。我只是想知道哪一个是正确的方法，还是这两个都是正确的方法？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T19:58:55.927

我相信您应该使用列表或表格来组织您的图像，具体取决于您想要的外观。不过，您可能希望对其进行设置，以便您的图库中没有项目符号或边框。

# php - php中的连接池调用webservice

> ID：11994546
> 
> 赞同：0
> 
> 时间：2012-08-16T19:57:08.430
> 
> 标签：php, multithreading, web-services, mutex, connection-pooling

> **可能重复：**
> [PHP 中的连接池](https://stackoverflow.com/questions/39753/connection-pooling-in-php)

我想建立一个到 web 服务的连接，它只允许 10 个到 web 服务 url 的并发连接。我需要在 php 中管理一个包含 10 个对象的池，这些对象将请求这个 web 服务。我怎样才能在 PHP 中实现这一点？

# vba - 在工作表（不是表单）中初始化组合框——错误：需要对象

> ID：11994547
> 
> 赞同：0
> 
> 时间：2012-08-16T19:57:12.463
> 
> 标签：vba, excel

我在 Sheet2（不是用户窗体）中有两个组合框，分别名为 Xchoose 和 Ychoose。当工作簿打开时，我想用 Sheet1 中单元格的值填充它们。

此时，我什至无法向组合框添加静态字符串。到目前为止，这是我的设置...

在 ThisWorkbook 中，我有：

```
Sub Workbook_Open()
    Call Sheet2.Init_Lists
End Sub 
```

在 Sheet2（比较）中，我有：

```
Sub Init_Lists()
    MsgBox "Initializing..."
    Xchoose.AddItem "item 1"
    ' This subroutine will eventually add values from Sheet1.
End Sub

Sub Xchoose_Change()
    ' To do.
End Sub

Sub Ychoose_Change()
    ' To do.
End Sub 
```

打开工作簿时出现“正在初始化...”消息框，表示`Init_Lists`工作正常，但随后程序中断行

```
Xchoose.AddItem "item 1" 
```

出现错误“需要对象”。我尝试将子例程放在一个单独的模块中，但我收到了同样的错误。

有人可以解释我如何将项目添加到这些组合框中吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T20:18:28.427

试试这个（**为 ACTIVEX 组合尝试和测试**）

```
Private Sub Workbook_Open()
    Sheet2.Xchoose.AddItem "item 1"
End Sub 
```

或者

```
Sub Init_Lists()
    MsgBox "Initializing..."
    Sheet2.Xchoose.AddItem "item 1"
    ' This subroutine will eventually add values from Sheet1.
End Sub 
```

# windows - 遍历 Windows 7 cscript.exe 上的用户配置文件

> ID：11994549
> 
> 赞同：0
> 
> 时间：2012-08-16T19:57:17.700
> 
> 标签：windows, windows-7-x64, wsh

我正在尝试遍历用户配置文件并将每个配置文件记录在系统上。

`for /d %%X in (C:\Users\*) do (` ``echo %username% >> C:\%computername%.log``

 ``)`

我遇到的问题是我必须以提升的权限运行这个 cmd。因此，由于它以管理员身份运行，因此输出只是管理员

我已经尝试过回`%username%,%cd%,%userprofile%`显，但无法获得当前路径的输出...我希望 %cd% 有效，因为我认为在循环期间它会进入路径...但您仍然是管理员帐户。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T20:44:20.453

我想你可能想要：

```
for /d %%X in  (C:\Users\*) do (
    echo %%X >> C:\%computername%.log
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-05T15:01:50.073

我宁愿使用以下 powershell 脚本：

```
Get-WmiObject -Class Win32_UserAccount -ComputerName . -ErrorAction Stop  | where-object { $_.localAccount -eq "true" -and $_.Disabled -eq "false" -and $_.Name -cnotcontains "ASPNET"} 
```

或使用 cscript：

```
Set objWMIService = GetObject("winmgmts:\\" & strComputer & "\root\CIMV2")
If Not IsObject(objWMIService) Or IsNull(objWMIService) Then
    wscript.echo "Not an Object"
    wscript.quit
End If

Set usersItems = objWMIService.ExecQuery( "SELECT * FROM Win32_UserAccount " _
    & "WHERE localAccount=true and disabled=false",,48)
If Not IsObject(colItems) Or IsNull(colItems) Then
    wscript.echo "Not an Object"
    wscript.quit
End If 
````

# ios - ios 5用正确的TabBar和NavController包装打开一个特定的视图控制器

> ID：11994550
> 
> 赞同：0
> 
> 时间：2012-08-16T19:57:23.477
> 
> 标签：ios, uiviewcontroller, uinavigationcontroller, uitabbarcontroller

我会尽力解释这一点。

我的应用程序有一个 TabBarController 作为主导航

我有一个模态视图，我想添加一个列表。可以从 2 个不同的视图控制器访问该屏幕。

从主要路线我简单地关闭模式，一切都很好。但是，从第二条路线开始，我需要能够打开一个全新的 ViewController。

我遇到的问题是我似乎无法打开包含 TabBar 和 NavBar 的 ViewController。

这是我目前正在尝试让它工作的代码。

```
 UITabBarController *tabController = [self.storyboard instantiateViewControllerWithIdentifier:@"MainInterface"];
    tabController.selectedIndex = 1;
    //_window.rootViewController = tabController;
    UINavigationController *groceryNavController = [self.storyboard instantiateViewControllerWithIdentifier:@"MainNavController"];
    UIViewController *groceryViewController = [self.storyboard instantiateViewControllerWithIdentifier:@"GroceryViewController"];

    UIViewController *currentVC = self;
    [currentVC.navigationController pushViewController:groceryViewController animated:YES]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T20:43:41.800

一种方法是通过委托。如果在委托中，则调用相关的导航控制器：

```
self.navigationController 
```

然后你必须这样做：

```
YourAppDelegate *delegate = (YourAppDelegate *)[[UIApplication sharedApplication] delegate];
[delegate.navigationController pushViewController:groceryViewController animated:YES]; 
```

（将“YourAppDelegate”替换为您的应用代理的实际名称）

# javascript - 这是 Opera 中的加载错误吗？

> ID：11994551
> 
> 赞同：1
> 
> 时间：2012-08-16T19:57:27.083
> 
> 标签：javascript, opera, onload

我相信我在 Opera（Windows 7 上运行的 12.01 版）中发现了一个错误，但我正在寻求可能的解决方法的帮助（假设其他人可以确认这是一个错误）。

如果我有一个包含以下内容的 HTML 页面：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <title>Test</title>
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" />
  </head>
  <body onload="window.alert(0);">
  </body>
</html> 
```

“onload”事件永远不会被触发。奇怪的是，如果我关闭脚本标签而不是自行关闭它，然后更改：

```
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" /> 
```

到：

```
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script> 
```

（不幸的是我做不到），该事件**将**触发并显示我的警报。

有没有其他人遇到过这个问题？如果是这样，除了将脚本标签从更改为 之外，他们是否找到了解决`<script />`方法`<script></script>`？

注意：是的，我已经打开了 Opera 的错误报告。他们还没有回复。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T21:30:23.113

这个“错误”存在于所有浏览器中，不仅在 Opera 中（我测试过 Chrome、FF 和 IE）。

自动关闭脚本标签不起作用。在 SO 上看到这个问题：[为什么自闭合脚本标签不起作用？](https://stackoverflow.com/questions/69913/why-dont-self-closing-script-tags-work/69984)

**编辑：**

我不知道为什么你不能用 关闭脚本标签`</script>`，但一种可能的解决方法是用 JavaScript 加载脚本：

```
var newScript = document.createElement("script");
newScript.type = "text/javascript";
newScript.src = "https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js";
newScript.onload = function(){
    // jQuery code...
};
document.getElementsByTagName("head")[0].appendChild(newScript); 
```

（好吧，诚然，这实际上迫使你在`</script>`某处使用，但至少`<script>`和`</script>`now 之间的部分不是空的......：P）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T11:48:19.203

Opera 所做的对 HTML5 来说是正确的。要了解为什么 onload 不运行，您需要记住带有 SRC 集的 SCRIPT 标记的内容应该被忽略。由于 /> 不是关闭第一个 SCRIPT 标记的正确方法，因此后续的头尾和正文开始标签最终位于 SCRIPT 标记内。这有点像这样写：

```
<script src="foo.js">
</head><body><p>This doesn't appear anywhere, does it?</p></body>
</script> 
```

因此，onload 永远不会首先设置，因为 SCRIPT 标签内的 BODY 将被忽略。

# mysql - 多线程程序中的 MySQL C API 初始化

> ID：11994553
> 
> 赞同：1
> 
> 时间：2012-08-16T19:57:28.463
> 
> 标签：mysql, c, linux, multithreading

我在 Linux 上使用 MySQL 5.5 C API。

我的程序从一个主线程开始，然后产生许多工作线程。工作线程需要进行数据库事务。

所以我的程序中有两个函数：

```
foo_init_main_thread() // called once before any worker threads are started

foo_init_worker_thread() // called from a worker thread
                         // immediately after it has started 
```

目前尚不清楚如何在此环境中初始化 MySQL。文档真的不清楚。

在里面`foo_init_main_thread`，我需要按什么顺序调用 , , 中的哪一个`foo_init_worker_thread`？`mysql_thread_init``mysql_library_init``mysql_init``mysql_connect`

我需要每个线程有一个数据库句柄还是工作线程都可以共享一个数据库句柄？

文档在这里：[http ://dev.mysql.com/doc/refman/5.5/en/c.html](http://dev.mysql.com/doc/refman/5.5/en/c.html)

# php - PHP邮件html格式不起作用

> ID：11994556
> 
> 赞同：9
> 
> 时间：2012-08-16T19:57:31.277
> 
> 标签：php, email

使用 php，并且使用此代码，我以纯文本形式收到电子邮件，我错过了什么吗？因为我需要发送格式化的电子邮件，其中可能包含例如链接。

```
$to = "receiver@test.com";
$subject = "Password Recovery";

$body = '
<html>
    <head>
        <meta http-equiv="content-type" content="text/html; charset=utf-8" />
        <title>Birthday Reminders for August</title>
    </head>
    <body>
        <p>Here are the birthdays upcoming in August!</p>
        <table>
            <tr>
                <th>Person</th><th>Day</th><th>Month</th><th>Year</th>
            </tr>
            <tr>
                <td>Joe</td><td>3rd</td><td>August</td><td>1970</td>
            </tr>
            <tr>
                <td>Sally</td><td>17th</td><td>August</td><td>1973</td>
            </tr>
        </table>
    </body>
</html>
';

$headers  = 'MIME-Version: 1.0' . "\r\n";
$headers .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n";
$headers = "From: info@test.net\r\n"."X-Mailer: php";
if (mail($to, $subject, $body, $headers)) 
echo "Password recovery instructions been sent to your email<br>"; 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-08-16T19:59:58.880

您已重新设置标题：

```
$headers  = 'MIME-Version: 1.0' . "\r\n";
$headers .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n";
$headers = "From: info@test.net\r\n"."X-Mailer: php"; 
```

您在最后一行中缺少一个点，它覆盖了前两个：

```
$headers  = 'MIME-Version: 1.0' . "\r\n";
$headers .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n";
$headers .= "From: info@test.net\r\n"."X-Mailer: php"; 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-08-16T20:00:09.690

看这个例子，用php发送邮件就够了：

```
<?php 
    //change this to your email. 
    $to = "abc@gmail.com";
    $from = "Example@example.com";
    $subject = "Hello! This is HTML email";

    //begin of HTML message 
    $message ="
<html> 
  <body> 
    <p style=\"text-align:center;height:100px;background-color:#abc;border:1px solid #456;border-radius:3px;padding:10px;\">
        <b>I am receiving HTML email</b>
        <br/><br/><br/><a style=\"text-decoration:none;color:#246;\" href=\"www.example.com\">example</a>
    </p>
    <br/><br/>Now you Can send HTML Email
  </body>
</html>";
   //end of message 
    $headers  = "From: $from\r\n"; 
    $headers .= "Content-type: text/html\r\n";

    //options to send to cc+bcc 
    //$headers .= "Cc: [email]maa@p-i-s.cXom[/email]"; 
    //$headers .= "Bcc: [email]email@maaking.cXom[/email]"; 

    // now lets send the email. 
    mail($to, $subject, $message, $headers); 

    echo "Message has been sent....!"; 
?> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-06-11T05:45:15.977

我在特定的邮件服务器上发现了同样的问题，在我的情况下，解决方案是将“\n”而不是“\r\n”设置为标题的行尾。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-04-18T19:31:07.677

尽管您的问题似乎是由重新分配给 $headers 引起的，但我遇到了类似的问题并发现原因是双行结尾的“/r/n”。一些邮件应用程序（例如 Bluemail）在读取双行结尾后开始邮件正文（有效地结束标题）。

在我的情况下，它是通过改变这个来解决的：

```
$headers  = 'MIME-Version: 1.0' . "\r\n";
$headers .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n";
$headers .= "From: info@test.net\r\n"."X-Mailer: php"; 
```

对此：

```
$headers  = 'MIME-Version: 1.0' . "\n";
$headers .= 'Content-type: text/html; charset=iso-8859-1' . "\n";
$headers = "From: info@test.net\n"."X-Mailer: php"; 
```

# google-maps - 如何将标记移动到地址前面的街道

> ID：11994557
> 
> 赞同：2
> 
> 时间：2012-08-16T19:57:31.333
> 
> 标签：google-maps, google-maps-api-3

我正在使用谷歌地理编码，对于许多农村地址，标记被放置在地段中间。我需要的是放置在已地理编码地址前面街道上的标记。

这是我目前用于测试的链接。 [http://www.commsoft.net/maps/index.html](http://www.commsoft.net/maps/index.html)

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T00:08:36.230

您可以使用 Google Maps API StreetViewService 来获取您需要的街道位置。

[Google Maps API - 直接访问街景数据](https://developers.google.com/maps/documentation/javascript/streetview#StreetViewService)

1.  使用地理编码器获取 latLng 位置
2.  将该位置、搜索半径和回调函数发送到街景服务：

    `var streetViewService = new google.maps.StreetViewService(); streetViewService.getPanoramaByLocation(location, searchRadius, callbackFunction);`

3.  streetViewService 将使用距您所在位置最近的街景照片进行响应。在您的回调函数中，`callbackFunction(data, status)`,`data.location.latLng`将包含拍摄街景照片的街道位置。

4.  使用该位置作为标记。

这不是一个完美的解决方案，但它可能是您能做的最好的，除了将您自己的街道位置存储在数据库中。主要缺点是，为了使其工作，地址必须具有街景图像。因此，如果您最关心农村地址，它可能不适合您。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T22:10:11.827

1.  在 Google Maps API 地图上显示多个地址的最佳方法是离线对其进行地理编码并将坐标存储在您的数据库中（或者您从哪里获取地址）。如果您要使用地理编码器或路线服务显示超过 10-15 个标记，您将遇到配额/速率限制。
2.  如果您离线对地址进行地理编码，如果您不喜欢地理编码器返回的值，则可以修复它们。
3.  以编程方式获取离地址最近的街道上的坐标的一个选项是使用方向服务（从感兴趣的地址获取到其自身的方向，应该导致零长度路线，在最近的点在道路上具有相同的起点和终点到地址）。

[使用您的地址的示例](http://www.geocodezip.com/commsoft_net_maps_directionsA.html)

# excel - 按单元格输入更新数据透视表筛选器

> ID：11994563
> 
> 赞同：0
> 
> 时间：2012-08-16T19:58:07.580
> 
> 标签：excel, excel-2007, vba

我正在尝试从 2 个单元格输入（开始日期、结束日期）更新我的数据透视表（日期）中的过滤器，以便我设置一个开始日期（例如 01/01/12）和一个结束日期（28/03/12）表将自动应用过滤器，仅显示范围内的日期。为此，我在网上找到了一些 VBA 代码片段：

```
Option Explicit

Sub FilterPivotDates()
'
Dim dStart As Date
Dim dEnd As Date
Dim pt As PivotTable
Dim pf As PivotField
Dim pi As PivotItem

Application.ScreenUpdating = False
On Error Resume Next

dStart = Sheets("Pivot").Range("StartDate").Value
dEnd = Sheets("Pivot").Range("EndDate").Value

Set pt = ActiveSheet.PivotTable2
Set pf = pt.PivotFields("Week")

pt.ManualUpdate = True

pf.EnableMultiplePageItems = True

For Each pi In pf.PivotItems
  pi.Visible = True
Next pi

For Each pi In pf.PivotItems
  If pi.Value < dStart Or pi.Value > dEnd Then
    pi.Visible = False
  End If
Next pi

Application.ScreenUpdating = False
pt.ManualUpdate = False

Set pf = Nothing
Set pt = Nothing

End Sub 
```

我在我的工作表的 Modules 文件夹和工作表“Pivot”中放置了“Option Explicit”。我将范围名称“StartDate”和“EndDate”分配给具有日期输入的两个单元格，并为宏分配了一个按钮。数据透视表名为“数据透视表”，应过滤的相应字段名为“周”。但是当我按下按钮时，什么也没有发生......有人在代码中看到错误还是我应该以不同的方式实现它？

预先感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T20:19:34.343

尝试更改决赛

```
Application.ScreenUpdating = False 
```

至

```
Application.ScreenUpdating = True 
```

可能是您正确地完成了所有操作，但只是看不到它:) 如果不是这种情况（听起来不是这样），则可能是您没有比较相似的类型。这不是一个答案，但它可能有助于找出问题所在：尝试为循环放置一些调试语句以确定输入单元格中的值/类型：

```
Debug.Print "dStart Value: " & dStart.Value
Debug.Print "dEnd Value: " & dEnd.Value
Debug.Print "dStart Type: " & VarType(dStart)
Debug.Print "dEnd Type: " & VarType(dEnd) 
```

然后在循环中添加另一个检查：

```
For Each Pi In pf.PivotItems
  Debug.Print "Pi Value: " & Pi.Value
  Debug.Print "Pi Type: " & VarType(Pi.Value)
  If Pi.Value < dStart Or Pi.Value > dEnd Then
    Pi.Visible = False
  End If
Next Pi 
```

同样，不确定这是否会揭示任何内容，但可能是代码正在运行但没有比较任何内容。关于这一点，您是否尝试过修改循环以通过硬编码要选择的值来验证它是否正在工作？如果可行，我们可以进一步缩小范围。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T20:42:58.430

我的猜测是您的问题出在您的 dstart 和 dend 中。通过获取该值，我相信它会将日期更改为 excel 数值。

尝试更改此行：

```
 If pi.Value < dStart Or pi.Value > dEnd Then 
```

类似于：

```
 If cdate(pi.value)< cdate(dStart) Or cdate(pi.value) > cdate(dend) then 
```

如果这不起作用，请尝试仅将 cdate 放在您创建的两个变量上

# visual-studio-2010 - 防止 Visual Studio 两次从 TFS 获取源

> ID：11994564
> 
> 赞同：0
> 
> 时间：2012-08-16T19:58:13.087
> 
> 标签：visual-studio-2010, tfs

映射新分支后，将首次从 TFS 检索源。但是，当第一次打开刚刚检索到的源中的解决方案文件时，它会再次获取所有源。对于一个相当大的解决方案，每次尝试可能需要大约一个小时，这很烦人。 **注意：**该行为不仅为我重现，而且为团队的所有成员重现，并且为 VS 2010、以前版本 VS 2008 重现了很长时间，如果我没记错的话，同样的问题与 VS 2005 相同。不确定是不是 Visual Studio 或 TFS 是罪魁祸首。

在这些漫长的不愉快的岁月之后，我最终厌倦了这个问题，并希望得到任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T07:07:32.817

我有同样的问题。对我来说，下一个很有帮助：转到工具 -> 选项 -> 源代码管理 -> 环境 -> 取消选中复选框“打开解决方案或项目时获取所有内容”

# php - 从行 MySql 数据库中删除空格

> ID：11994565
> 
> 赞同：0
> 
> 时间：2012-08-16T19:58:18.357
> 
> 标签：php, mysql

我有一个小问题，我使用 PHP 将 3 个表合并为 1 个，它工作得很好，但是在其中的 1 行上，我在请求数据时以某种方式合并了一个空格，这现在给我带来了一些重大问题。

有没有其他方法可以在不进出 php 和 MySql 的情况下删除空白？

有 48,000,000 条记录需要更改并使用 php 来修剪每条记录的字符串将需要数周时间并且会大大降低我的服务器速度，所以我正在寻找一个更好的解决方案。

谢谢您的帮助

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T20:00:20.700

如果您知道额外的空白仅在数据的开头，那么您可以这样做：

```
UPDATE tbl
SET    column = LTRIM(column)
WHERE  column LIKE ' %' 
```

`column`如果您这样做了，它仍然可以使用设置的索引。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-16T20:00:41.780

```
update your_table
set some_column = substring(some_column, 1)
where substring(some_column, 1, 1) =  ' ' 
```

# asp.net - 从数据库中提取 ASPX.NET 代码

> ID：11994577
> 
> 赞同：1
> 
> 时间：2012-08-16T19:59:16.273
> 
> 标签：asp.net, c#-4.0

我试图弄清楚是否有一种方法可以从数据库字段中提取代码并将其呈现在网站上。例如，我从数据库中的一个字段中提取以下内容：

```
 <asp:Chart ID="Chart1" runat="server" DataSourceID="SqlDataSource1" 
Height="324px" Width="849px" Palette="EarthTones">
<Series>
       <asp:Series Name="Series1" XValueMember="UserID" YValueMembers="AvgAvail" XAxisType="Primary" IsValueShownAsLabel="true">
        </asp:Series>
</Series>
       <ChartAreas>
       <asp:ChartArea Name="ChartArea1" >
       <AxisX Interval="1"><MajorGrid Enabled="false" /></AxisX>
       </asp:ChartArea>
       </ChartAreas>
</asp:Chart>
<asp:SqlDataSource ID="SqlDataSource1" runat="server" 
ConnectionString="DELETED" SelectCommand="REALLYLONG"></asp:SqlDataSource> 
```

我希望 .NET 呈现图表。

这是前端：

```
<asp:UpdatePanel ID="UpdatePanel1" runat="server">
<Triggers><asp:AsyncPostBackTrigger ControlID="Timer1" EventName="Tick" /></Triggers>
<ContentTemplate><%=MainTile %>

</ContentTemplate>
</asp:UpdatePanel> 
```

所以基本上在 PageLoad() 事件中，我从 DB 字段中提取代码，然后将其设置为 =MainTile 并呈现图表。目前它只是将 ASP 代码放入页面源代码中。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T21:28:51.470

您需要 ParseControl 功能...

这是我一直使用的一些代码，用于从存储在数据库中的代码呈现页面模板。它构建了整个控制树。这很棒！

```
Template t = new Template(templateId);
Control c = ParseControl(t.TemplateContent);
Page.Controls.Add(c); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T21:36:10.283

如果您只需要加载图表外观 - 您可以在 ASPX 标记中使用静态图表控件，并通过“Chart.Serializer.Load()”方法简单地加载外观数据。

# c++ - 在 C 中求解多项式系统（4，二阶）

> ID：11994585
> 
> 赞同：2
> 
> 时间：2012-08-16T19:59:41.747
> 
> 标签：c++, math, polynomial-math, equation-solving

我正在尝试使用 C++ 求解一个由 4 个二阶多项式方程组成的系统。**解决系统最快**的方法是什么，如果可能的话，你能链接或写一点伪代码来解释它吗？我知道涉及 Groebners 基础或 QR 分解的解决方案，但我找不到关于它们如何工作以及如何实现它们的清晰描述。也许有关多项式的有用信息：

*   解决方案可能存在也可能不存在，但我只对特定范围内的解决方案感兴趣（例如 [0,1] 中的 x,y,z,t）
*   多项式的形式为：a + bx + cy + d*x*y = e + fz + gt + h*z*t（求解 x,y,z,t）。所有系数都是唯一的。
*   多项式方程来自双线性插值。
*   我已经尝试找到一个精确的解析解决方案，但正如其他人所发布的那样，在 Mathematica 中解决大型多项式系统非常耗时

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T21:29:48.377

I would simply use the general-purpose solver [IPOPT](https://projects.coin-or.org/Ipopt/), written in C++. You can feed it with the [0, 1] bound constraints, it actually helps IPOPT and makes the solution procedure faster.

Does the sparsity pattern of the system change? If not, then you can probably save an initialization step. I am not 100% sure though. Either way, IPOPT is blazing fast compared to the analytic solution in Mathematica.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T20:18:37.120

您可以查看描述非线性方程组解的 Numerical Recipes 书（c 版本中的第 9 章）。从他们的网站[http://www.nr.com/](http://www.nr.com/)可以查看在线版本。

由于他们的许可非常严格，您可能可以查看该方法，然后使用诸如 gsl 之类的库对其进行调整。我没有尝试，但是这个页面[http://na-inet.jp/na/gslsample/nonlinear_system.html](http://na-inet.jp/na/gslsample/nonlinear_system.html)给出了一个关于如何用 gsl 做到这一点的例子。

# javascript - 如何从使用 jquery 动态创建的视频标签中获取视频持续时间？

> ID：11994590
> 
> 赞同：3
> 
> 时间：2012-08-16T19:59:51.657
> 
> 标签：javascript, jquery

有一种方法可以获取视频持续时间，而无需在 html 中包含视频标签？

例如：

```
var Video = $('<video></video>')
                            .append("<source src=video.mp4 type=video/mp4; codecs="+'"avc1.42E01E, mp4a.40.2"'+ "/>")
                            .append("<source src=video.webm type=video/webm; codecs="+'"vp8, vorbis"'+ "/>"); 
```

我想从“视频”中获取持续时间，可以吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T20:10:30.717

这是指向视频标签上一个好页面的[链接。](http://dev.opera.com/articles/view/everything-you-need-to-know-about-html5-video-and-audio/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T20:05:45.743

尝试这个

```
var vidElement = document.createElement('video');
$(vidElement).append("<source src=video.mp4 type=video/mp4; codecs="+'"avc1.42E01E, mp4a.40.2"'+ "/>").append("<source src=video.webm type=video/webm; codecs="+'"vp8, vorbis"'+ "/>");

console.log(vidElement.duration); 
```

因此，如果这是您想要的，那么您的页面中的 html 就不会在内存中

# perl - 使用 nginx lua / perl 或任何其他模块来跟踪失败的身份验证尝试

> ID：11994596
> 
> 赞同：0
> 
> 时间：2012-08-16T20:00:08.347
> 
> 标签：perl, nginx, lua, http-authentication

我正在尝试构建一些我不知道可能的东西，所以我需要一些指导。基本上我的要求如下

1-每当用户尝试在 nginx 上使用 HTTP auth 进行身份验证时，我想跟踪身份验证是否失败（因此它可以是在身份验证失败后运行的一些代码），以跟踪（让我们在哈希图中说）用户名

2-当用户尝试在 x 期间内登录 x 次时，我希望能够“禁用”。为了禁用它们，我想说在数据库中将它们标记为禁用，这样它们就不能再登录了。

所以代码将

1-在身份验证尝试之前检查数据库表是否禁用帐户并且是否拒绝它

2- 在 Authentication 尝试后，如果 auth 不成功，它将把它们放在一个哈希表中以跟踪失败的次数，如果满足某个 thrash hold，将调用一个函数来禁用 DB 表中的帐户。

是否可以使用 lua 或 perl 等 nginx 模块进行上述所有操作，如果可以，有人可以向我解释我该怎么做吗？任何指针都会有所帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T17:32:30.867

简单的解决方案是使用 nginx 的[auth request 模块](http://mdounin.ru/hg/ngx_http_auth_request_module/)，这将允许您将身份验证检查卸载到后端并以您喜欢的语言进行自己的身份验证检查。有关详细信息，请参阅[自述文件](http://mdounin.ru/hg/ngx_http_auth_request_module/file/tip/README)。

# c++ - 基类构造函数和数据成员初始化的奇怪行为

> ID：11994599
> 
> 赞同：-1
> 
> 时间：2012-08-16T20:00:10.790
> 
> 标签：c++, inheritance, multiple-inheritance

我的一个 C++ 程序遇到了一个非常大而奇怪的问题（这里是源代码：[https](https://github.com/dermesser/libsocket) ://github.com/dermesser/libsocket ）。

首先，关于它的一些细节：有一个基类（socket，在 C++/socket.cpp 中），一个（虚拟）派生类（unix_socket，在 C++/unixbase.cpp 中）和一个“叶”类（unix_stream_server）。数据成员“sfd”在“socket”（socket.cpp）中声明和初始化。但是在 unix_stream_server::setup (C++/unixserverstream.cpp) 中，“sfd”得到了完全不同的值。一点点调试输出：

```
socket constr -1 # <--- "socket" constructor
unix_socket constr - sfd: 1447345536 # <---- unix_socket constructor
setup final: 1447345536 # <--- unix_stream_server::setup
unixserverstream.cpp:76: unix_stream_server::setup: Socket already set up! 
```

最后一行是异常传递的错误信息。调试程序给出了相同的结果。

奇怪的是变量的值变化很大，我不知道为什么。而在继承路径相似的兄弟类中，则不存在这个问题。

编辑1：如果我重新分配“sfd”，问题甚至不会消失。它只是保持在相同的奇怪值。

我消除的一些问题和我尝试过的事情：

*   定义/声明不匹配（我知道，这在这个软件中很奇怪）
*   将“sfd”放到公共区域

还有什么重要的：如果我静态或动态地链接程序（它是examples++/unix_server_stream.cpp）（针对Makefile生成的SO），问题就存在了。

我很绝望:(有没有人对这些问题有想法或经验？或者我太累了找不到解决方案？

编辑2：发布代码很困难。我认为最好按照我对 github 存储库中文件的提示进行操作，因为我不知道要发布哪个部分。:| 对不起...（请不​​要认为我希望你为我工作 - 只是很难选择正确的代码）

unix_stream_server::setup():

```
if ( sfd != -1 )
        throw socket_exception(__FILE__,__LINE__,"unix_stream_server::setup: Socket already set up!\n");
if ( path == NULL )
        throw socket_exception(__FILE__,__LINE__,"unix_stream_server::setup: Path is NULL!\n");

    sfd = create_unix_server_socket(path,STREAM,flags);

    _path.assign(path);

if ( sfd < 0 )
        throw socket_exception(__FILE__,__LINE__,"unix_stream_server::setup: Error at creating UNIX   stream server socket!\n"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T22:02:06.567

您的标头`bool listening`在定义中`class unix_stream_server`，但您的`.cpp`文件有另一个定义，`class unix_stream_server`其中省略了`bool listening`成员。不要那样做。说真的，不要那样做。从你的实现文件中包含你的头文件！请！

# ios - Phonegap/Cordova 2.0 - 不在应用程序中填充

> ID：11994601
> 
> 赞同：0
> 
> 时间：2012-08-16T20:00:15.710
> 
> 标签：ios, cordova

我已经在 iOS 上使用 Cordova2.0 成功创建了一个项目。那是我在 cordova2.0 中创建的第一个项目，一切顺利。

当我尝试在 IOS 中使用 cordova2.0 创建另一个新项目时出现问题，并且该项目几乎已完全创建，除了 cordovaLib.xcodeporj 包为空并且应用程序甚至不会运行其初始构建。

其他人遇到过这个问题吗？如果是这样，您的解决方案是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T15:57:51.053

确保您没有打开第一个项目。您不能同时在两个项目中打开 cordova 子项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T15:18:56.093

您是否已将 bin 目录复制到您的家中并从那里运行命令？当我从已安装的安装程序中使用 bin 目录运行时，这个问题发生在我身上。

# php - 将 HTML 数据或查询结果插入到新表中

> ID：11994605
> 
> 赞同：0
> 
> 时间：2012-08-16T20:00:31.263
> 
> 标签：php, mysql

我可能有两个问题。第一个问题我想我知道答案，但无论如何我都会问它，以防万一我错过了一些明显的东西。

1.  您可以将 HTML 行中的数据插入到 db 表中吗？见下文：

    ```
    <tr><td>Colby (Big Cheese)</td>
              <td>1A</td>
              <td>
              <select width=200>
              <option>Key Movement</option>
              <option>Movement -1</option>
              <option>Movement -2</option>
              <option>Movement -3</option>
              <option>Movement -4</option>
        </select></td>
        <td>Sets/Reps/Seconds</td>
        <td>Rest</td>
        <td>00</td>
        </tr><tr><td>Mike (Big Mac)</td>
              <td>1A</td>
              <td>
              <select width=200>
              <option>Key Movement</option>
              <option>Movement -1</option>
              <option>Movement -2</option>
              <option>Movement -3</option>
              <option>Movement -4</option>
        </select></td>
        <td>Sets/Reps/Seconds</td>
        <td>Rest</td>
        <td>00</td>
        </tr> 
    ```

我希望将每个表行中的数据写入数据库中的一行。如果答案是否定的，我将转到我的第二个问题。

这是输出此 HTML 的我的 EDITED 数组。

```
 $count;
if(empty($workout_class) === false)
{   
foreach($workout_class as $wc){
if ($wc['pagenum'] !== $pagenum) continue 1;

    echo '<tr>
        <td name="first_name'.$count.'">'. ($wc['first_name']).' 
        <span name="nickname'.$count.'">('. ($wc['nickname']).')</span>
        </td>
              <td name="order'.$count.'">'. ($wc['order']). '</td>
              <td>
              <select name="movement'.$count.'" width=200>
              <option>'. ($wc['mv_00']). '</option>
              <option>'. ($wc['mv_01']). '</option>
              <option>'. ($wc['mv_02']). '</option>
              <option>'. ($wc['mv_03']). '</option>
              <option>'. ($wc['mv_04']). '</option>
        </select></td>
        <td name="rep_set_sec'.$count.'">'. ($wc['rep_set_sec']). '</td>
        <td name="rest'.$count.'">'. ($wc['rest']). '</td>
        <td>00</td>
        </tr>';
        $count++;

   } // foreach($data_array 
```

我有几个问题。`$_POST`没有从“名称”值中获取任何数据。它也只循环通过第一行并停止。有任何想法吗。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T20:09:13.980

您将需要使用服务器端（PHP、ASP、JSP）语言通过表单（GET、POST）或 JQuery/Ajax 来执行此操作。您已经有了选择输入，因此一旦设置了数据库和服务器端语言，实现起来将相当容易。

```
<?php
$km1 = $_POST['key_move1'];
$km2 = $_POST['key_move2'];
/*
Your mysql code to enter $km1 and $km2 into the database
*/
echo $km1 . " -- " . $km2 . " <-  ...  Thos are your values that would pass to database";
?>

<form action="#" method="post">
<table>
<tr><td>Colby (Big Cheese)</td>
      <td>1A</td>
      <td>
      <select name="key_move1" width=200>
      <option>Key Movement</option>
      <option>Movement -1</option>
      <option>Movement -2</option>
      <option>Movement -3</option>
      <option>Movement -4</option>
</select></td>
<td>Sets/Reps/Seconds</td>
<td>Rest</td>
<td>00</td>
</tr><tr><td>Mike (Big Mac)</td>
      <td>1A</td>
      <td>
      <select name="key_move2" width=200>
      <option>Key Movement</option>
      <option>Movement -1</option>
      <option>Movement -2</option>
      <option>Movement -3</option>
      <option>Movement -4</option>
</select></td>
<td>Sets/Reps/Seconds</td>
<td>Rest</td>
<td>00</td>
</tr>
</table>
<input type="submit" value="Go!"> 
```

php循环：

```
$count = 0;
foreach($workout_class as $wc){
if ($wc['pagenum'] !== $pagenum) continue 1;

echo '<tr><td>'. ($wc['first_name']).' ('. ($wc['nickname']).')</td>
          <td>'. ($wc['order']). '</td>
          <td>
          <select name="key_move' . $count . '" width=200>
          <option>'. ($wc['mv_00']). '</option>
          <option>'. ($wc['mv_01']). '</option>
          <option>'. ($wc['mv_02']). '</option>
          <option>'. ($wc['mv_03']). '</option>
          <option>'. ($wc['mv_04']). '</option>
    </select></td>
    <td>'. ($wc['rep_set_sec']). '</td>
    <td>'. ($wc['rest']). '</td>
    <td>00</td>
    </tr>';
$count++
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T20:17:24.073

就像 Zak 提到的那样，您需要将此表放在表单中并提交，然后处理服务器端（PHP）......或者让 JavaScript 获取值并通过 AJAX 提交到服务器端脚本。无论哪种方式，您都必须有一个脚本服务器端来获取这些值、构建一个查询并创建一个 DB 条目。

作为旁注，您可能希望为每个 HTML 组件创建 id 元素，以便您可以轻松地从 POST 中检索这些值，就像这样......

```
<select id="colby" name="colby" width=200> 
```

# php - 将参数（即另一个模型函数的结果）传递给模型函数

> ID：11994606
> 
> 赞同：1
> 
> 时间：2012-08-16T20:00:35.640
> 
> 标签：php, oop, codeigniter

如何将参数（即另一个模型函数的返回值）传递给模型类的函数。

这是我的模型类函数

```
public function get_products_categories()
{
$query = $this->db->query('SELECT DISTINCT category 
                           FROM products');
return $query->result_array();
}   

public function get_products_names($category)
{
$query = $this->db->query('SELECT name 
                           FROM products
                           WHERE category=$category');
return $query->result_array();
} 
```

这就是我在控制器类中的表现

```
$this->load->model('products_model');
    $data['products_categories'] = $this->products_model->get_products_categories();
    $data['products_names'] = $this->products_model->get_products_names(); 
```

现在我想要传递`$products_categories`给函数`$this->products_model->get_products_names();`，但这不可能`$products_categories`在控制器类中不是变量，而是在视图文件中，它可以用作变量

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T20:32:25.737

你想让我做什么？例如，如果您想在类别中列出所有产品，您可以这样做：

```
$data['products_categories'] = $this->products_model->get_products_categories();
$data['products_names'] = array();

foreach($data['products_categories'] as $product){
  $data['products_names'][$product['category']] = $this->products_model->get_products_names($product['category']);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T09:07:33.950

试试看：

```
$this->load->model('main_model');
$data1 = $this->main_model->function1(); 
```

//如果你不想将 data1 传递给 fun2() 那么

```
$data2 = $this->main_model->function2($data1); 
```

如果第二个乐趣在另一个模型中，请尝试加载它，然后给出：

```
$data2 = $this->another_model->function2($data1); 
```

该死的肯定它wotrks.....

# c# - C#在运行时获取进程输出

> ID：11994610
> 
> 赞同：12
> 
> 时间：2012-08-16T20:00:53.293
> 
> 标签：c#, process, redirectstandardoutput

无论如何都可以重定向衍生进程的标准输出并将其捕获为它的发生。我所看到的一切都只是在该过程完成后执行 ReadToEnd 。我希望能够在打印时获得输出。

编辑：

```
 private void ConvertToMPEG()
    {
        // Start the child process.
        Process p = new Process();
        // Redirect the output stream of the child process.
        p.StartInfo.UseShellExecute = false;
        p.StartInfo.RedirectStandardOutput = true;
        //Setup filename and arguments
        p.StartInfo.Arguments = String.Format("-y -i \"{0}\" -target ntsc-dvd -sameq -s 720x480 \"{1}\"", tempDir + "out.avi", tempDir + "out.mpg");
        p.StartInfo.FileName = "ffmpeg.exe";
        //Handle data received
        p.OutputDataReceived += new DataReceivedEventHandler(p_OutputDataReceived);
        p.Start();
    }

    void p_OutputDataReceived(object sender, DataReceivedEventArgs e)
    {
        Debug.WriteLine(e.Data);
    } 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-16T20:04:08.697

使用流程中的[Process.OutputDataReceived](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.outputdatareceived.aspx)事件来接收您需要的数据。

例子：

```
var myProc= new Process();

...            
myProc.StartInfo.RedirectStandardOutput = true;
myProc.OutputDataReceived += new DataReceivedEventHandler(MyProcOutputHandler);

...

private static void MyProcOutputHandler(object sendingProcess, 
            DataReceivedEventArgs outLine)
{
            // Collect the sort command output. 
    if (!String.IsNullOrEmpty(outLine.Data))
    {
      ....    
    }
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-16T21:00:57.223

因此，经过一番挖掘，我发现 ffmpeg 使用 stderr 进行输出。这是我修改后的代码以获取输出。

```
 Process p = new Process();

        p.StartInfo.UseShellExecute = false;

        p.StartInfo.RedirectStandardOutput = true;
        p.StartInfo.RedirectStandardError = true;

        p.StartInfo.Arguments = String.Format("-y -i \"{0}\" -target ntsc-dvd -sameq -s 720x480 \"{1}\"", tempDir + "out.avi", tempDir + "out.mpg");
        p.StartInfo.FileName = "ffmpeg.exe";

        p.ErrorDataReceived += new DataReceivedEventHandler(p_ErrorDataReceived);
        p.OutputDataReceived += new DataReceivedEventHandler(p_OutputDataReceived);

        p.Start();

        p.BeginErrorReadLine();
        p.WaitForExit(); 
```

# iphone - 显示仅包含电子邮件的联系人的 ABAddressBook

> ID：11994626
> 
> 赞同：6
> 
> 时间：2012-08-16T20:01:53.123
> 
> 标签：iphone, objective-c, ios

我想显示一个仅显示带有电子邮件的联系人的 ABAddressBook，所以我尝试了这样的操作：

```
 ABAddressBookRef addressBook = ABAddressBookCreate();
    CFArrayRef allPeople = ABAddressBookCopyArrayOfAllPeople( addressBook );
    CFIndex nPeople = ABAddressBookGetPersonCount( addressBook );

    for( CFIndex emailIndex = 0; emailIndex < nPeople; emailIndex++ ) {
        ABRecordRef person = CFArrayGetValueAtIndex( allPeople, emailIndex );
        ABMutableMultiValueRef emailRef=ABRecordCopyValue(person, kABPersonEmailProperty);
        int emailCount = ABMultiValueGetCount(emailRef);
        if(emailCount == 0) {
            ABAddressBookRemoveRecord(addressBook, person, NULL);
        }   
    }
    ABPeoplePickerNavigationController *picker = [[ABPeoplePickerNavigationController alloc] init];
    picker.addressBook = addressBook;
    picker.peoplePickerDelegate = self;
    [self presentModalViewController:picker animated:YES]; 
```

控制器显示，但显示所有联系人，如果我选择没有电子邮件的联系人，我会崩溃。如果我调用了 ABAddressBookSave()，那么它会通过电子邮件删除所有联系人，但这是一个永久性更改，甚至会从系统联系人中删除它们。这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-16T07:27:25.443

您可能需要构建一个包含电子邮件的联系人数组，然后将其显示在 UITableViewController 上。这是构建此类数组的一种方法：[https](https://stackoverflow.com/a/13980023/745862) ://stackoverflow.com/a/13980023/745862 。您可以使用 ABPersonViewController 或 ABUnknownPersonViewController 来显示联系人详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-02T11:30:29.817

您是否尝试仅像这样显示电子邮件值：

```
ABPeoplePickerNavigationController *picker = [[ABPeoplePickerNavigationController alloc] init];
picker.displayedProperties = @[@(kABPersonEmailProperty)]; 
```

也许已经做到了，你想要什么？虽然没有测试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-02T11:23:32.973

您从地址簿中删除了所有没有电子邮件地址的联系人，但最后没有保存地址簿。当从 ABPeoplePickerNavigationController 加载 AddressBook 时，之前的所有更改都将丢失！尝试这个：

```
if (ABAddressBookHasUnsavedChanges(addressBook))
    ABAddressBookSave(addressBook, NULL) 
```

顺便说一句，不要忘记 CFRelease() addressBook、allPeople 和 emailRef。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-18T19:28:43.437

您是否考虑过创建一个临时地址簿并在其中填写那些具有电子邮件地址的联系人？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-10-21T12:44:49.050

从 iOS 8 开始，ABPeoplePickerNavigationController 有一个属性可以解决您的问题：

```
@property (nonatomic,copy) predicateForEnablingPerson 
```

Apple 文档中的代码示例：[https](https://developer.apple.com/library/prerelease/ios/samplecode/PeoplePicker/Listings/PeoplePicker_AAPL_8or7_EmailPickerViewController_m.html) ://developer.apple.com/library/prerelease/ios/samplecode/PeoplePicker/Listings/PeoplePicker_AAPL_8or7_EmailPickerViewController_m.html ）

```
ABPeoplePickerNavigationController* abPicker = [ABPeoplePickerNavigationController new];
abPicker.peoplePickerDelegate = self;
//...
if ([abPicker respondsToSelector:@selector(setPredicateForEnablingPerson:)]){
    // The people picker will enable selection of persons that have at least one email address.
    abPicker.predicateForEnablingPerson = [NSPredicate predicateWithFormat:@"emailAddresses.@count > 0"];
} 
```

请注意，从 iOS9 开始，ABPeoplePickerNavigationController 已被弃用，您可以以与属性相同的方式使用新的*CNContactPickerViewController ：*

```
@property(nonatomic, copy) NSPredicate *predicateForEnablingContact 
```

从文档：

*您可以为此属性设置一个值，以确定应选择哪个联系人，例如 emailAddresses.@count > 0 以使所有具有电子邮件地址的联系人成为可选择的。如果没有为此属性设置谓词，则所有联系人都变为可选择的。*

# c# - 可选的泛型类型

> ID：11994632
> 
> 赞同：15
> 
> 时间：2012-08-16T20:02:11.770
> 
> 标签：c#, generics

有没有更好的方法来写这个？也许作为一个班级，而不是两个。

```
using System;

namespace SnippetTool.Repositories
{
    public abstract class ARepository<TProvider> where TProvider : class
    {
        protected TProvider Provider { get; set; }

        protected ARepository(TProvider provider)
        {
            if (provider == null)
                throw new ArgumentNullException("provider");

            Provider = provider;
        }
    }

    public abstract class ARepository<TProvider, TValidator> : ARepository<TProvider> where TProvider : class where TValidator : class
    {
        protected TValidator Validator { get; set; }

        protected ARepository(TProvider provider, TValidator validator) : base(provider)
        {
            Validator = validator;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-16T20:14:19.167

我不认为你可以将它作为一个类来做，目前，通常我在这种情况下尝试做的是创建最通用的类​​（采用最通用 args 的类）来拥有所有逻辑，然后制作更多特定的是默认这些类型的子类。

例如，假设我们正在编写一个翻译器，它将一种类型的值翻译成另一种类型，就像 a`Dictionary`但也有默认值等。

我们可以将其定义为：

```
public class Translator<TKey, TValue, TDictionary> where TDictionary : IDictionary<TKey, TValue>, new();
{
    private IDictionary<TKey, TValue> _map = new TDictionary();
    ...
} 
```

这是我的通用案例，它可以有任何实现`IDictionary`，但是如果我们想要一个更简单的版本，`Dictionary`如果没有指定，我们可以这样做：

```
public class Translator<TKey, TValue> : Translator<TKey, TValue, Dictionary<TKey, TValue>>
{
    // all this does is pass on the "default" for TDictionary...
} 
```

这样，我可以使：

```
// uses Dictionary<int, string>
var generic = new Translator<int, string>(); 

// uses SortedDictionary instead
var specific = new Translator<int, string, SortedDictioanry<int, string>>(); 
```

所以在你的情况下，也许你的泛型总是有一个 TValidator 属性，但它是默认的（也许总是`true`以你最通用的形式返回？

例如，也许您有一个*默认*验证器的定义（例如称为`DefaultValidator`），您可以反转您的定义，以便更通用（采用更多通用类型参数的那个）具有所有逻辑，并且任何专业化（更少的类型参数）只是默认这些额外类型的子类：

```
using System;

namespace SnippetTool.Repositories
{
    public class DefaultValidator
    {
       // whatever your "default" validation is, may just return true...
    }

    public abstract class ARepository<TProvider> : ARepository<TProvider, DefaultValidator>
        where TProvider : class
    {
        protected ARepository(TProvider provider) : base(provider, new DefaultValidator());
        {
        }

        // needs no new logic, just any specialized constructors...
    }

    public abstract class ARepository<TProvider, TValidator> 
         where TProvider : class 
         where TValidator : class
    {
        public TValidator Validator { get; set; }

        protected ARepository(TProvider provider, TValidator validator) 
        {
            Provider = provider;
            Validator = validator;
        }

        // all the logic goes here...
    }
} 
```

**更新**：是的，根据您的评论，如果它`TValidator`是一个附加组件（而不是*默认*的东西），那么像您所做的那样分层是合适的。

# database - Freebase：我公司的整个数据库都建立在它上面值得吗？

> ID：11994634
> 
> 赞同：3
> 
> 时间：2012-08-16T20:02:20.557
> 
> 标签：database, startup, freebase

我在一家正在为现场音乐建立场地/艺术家数据库的公司工作，最近遇到了 Freebase。它看起来非常引人注目，即使没有新的、崭露头角的乐队的数据。对于那些使用过 Freebase 的人，我有几个问题：

1.  将所有数据输入与 Freebase 集成有缺点吗？我们不打算出售或私有化这些信息。

2.  Freebase 在可用性方面的弱点是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T01:23:34.073

*披露：我在 Google 的 Freebase 工作。*

Freebase 中的音乐数据是我们最强大的领域之一，随着我们继续加载更多数据集，它将继续变得更广泛和更丰富。例如，我们从 MusicBrainz 导入数据，对其进行清理并将主题与 Freebase 中的现有主题进行匹配以避免重复。

1.  就缺点而言，您应该准备好处理大量数据。例如，Freebase 目前有[4 位名为“John Smith”的音乐艺术家](http://www.freebase.com/queryeditor?q=%5B%7B%22id%22:null,%22name%22:%22John%20Smith%22,%22type%22:%22/music/group_member%22%7D%5D&autorun=true)，它们可能对您的应用程序有用，也可能没有用，但您仍然需要弄清楚哪些人映射到您的用户感兴趣的 John Smith。我们称之为“和解”，它是必要的，这样您的应用程序才能准确地知道要查询 API 的主题。

    既然你提到了音乐场所，我还应该指出，虽然 Freebase 有很多关于地点的数据，但我们还没有地理搜索 API，所以如果你需要的话，你需要自己推出。

    由于任何人都可以编辑 Freebase，因此您还应该考虑使用[as_of_time](http://wiki.freebase.com/wiki/Data_linkage_guidelines#How_do_I_protect_my_site.2Fapplication_from_malicious_edits_in_Freebase.3F)来保护您的网站免受破坏。

2.  Freebase 非常适合开发人员，因为您可以轻松地介入并清理不良数据或添加缺失的主题。然而，一个一直是挑战的领域是从谷歌外部加载大量数据。我们已经构建了允许人们上传数据集的[OpenRefine](http://openrefine.org/)，但这些数据集必须通过需要一些时间才能完成的 QA 流程。拥有这些 QA 流程以保持 Freebase 的质量水平是必要的，但它确实减慢了加载大型数据集的过程。

我真的希望您选择使用 Freebase 音乐数据来建立您的公司。我知道已经有很多音乐初创公司乐于使用我们的数据。

# actionscript-3 - 使用 ant 脚本编译 AIR 应用程序后出现运行时错误

> ID：11994635
> 
> 赞同：1
> 
> 时间：2012-08-16T20:02:22.297
> 
> 标签：actionscript-3, flash, ant, air, flex4

我收到了一个 VerifyError: Error #1014: Class spark.components::WindowedApplication 找不到。从我的 Ant 脚本运行我的 AIR 应用程序时出错。我的应用程序使用扩展桌面配置文件（用于 NativeProcess）。我正在使用 Flash SDK 4.6，我可以在 Flash Builder 4.6 中编译、运行和打包项目。我希望能够使用 Ant 脚本来完成所有这些事情。

我和这个问题有同样的问题： [Compiling AIR application with Ant Task (WindowedApplication could not be found)](https://stackoverflow.com/questions/3241762/compiling-air-application-with-ant-task-windowedapplication-could-not-be-found)

我的应用程序使用 ant 脚本编译，但是当我尝试运行它时。我收到此错误，然后是一堆未找到的错误。

> VerifyError：错误 #1014：找不到类 spark.components::WindowedApplication。
> 
> 在 flash.display::MovieClip/nextFrame() 在 mx.managers::SystemManager/deferredNextFrame()[E:\dev\4.y\frameworks\projects\framework\src\mx\managers\SystemManager.as:278]在 mx.managers::SystemManager/preloader_preloaderDocFrameReadyHandler()[E:\dev\4.y\frameworks\projects\framework\src\mx\managers\SystemManager.as:2627] 在 flash.events::EventDispatcher/dispatchEventFunction()在 flash.events::EventDispatcher/dispatchEvent() 在 mx.preloaders::Preloader/timerHandler()[E:\dev\4.y\frameworks\projects\framework\src\mx\preloaders\Preloader.as:515]在 flash.utils::Timer/_timerDispatch() 在 flash.utils::Timer/tick()

其他一些错误：

> VerifyError：错误 #1014：找不到类 IFlexAsset。VerifyError：错误 #1014：找不到类 mx.core::FontAsset。VerifyError：错误 #1014：找不到类 mx.core::SpriteAsset。VerifyError：错误 #1014：找不到类 mx.core::BitmapAsset。

这是我的ant脚本的编译目标

```
<target name="compile" depends="init">
  <mxmlc file="${MAIN_SOURCE_FILE}" 
        output="${DEBUG_DIR}/${APP_NAME}.swf"
        services="${APP_ROOT}/services/flex/services-config.xml" 
        configname="air"
        actionscript-file-encoding="UTF-8" fork="true">
    <locale>en_US</locale>
    <static-link-runtime-shared-libraries>true</static-link-runtime-shared-libraries>

    <load-config filename="${FLEX_HOME}/frameworks/air-config.xml"/>
    <source-path path-element="${APP_ROOT}/src"/>
    <source-path path-element="${FLEX_HOME}/frameworks"/>
    <source-path path-element="${APP_ROOT}/../MyLib/src"/>

    <compiler.external-library-path dir="${FLEX_HOME}/frameworks" append="true">
        <include name="libs/air" />
        </compiler.external-library-path>

    <compiler.library-path dir="${FLEX_HOME}/frameworks" append="true">
                    <include name="libs" />
            <include name="libs/mx" />
            <include name="libs/air" />
                    <include name="locale/{locale}" />
                </compiler.library-path>
    <compiler.library-path dir="${APP_ROOT}" append="true">
                    <include name="libs" />
                    <include name="libs/player" />
                </compiler.library-path> 
    <define name="CONFIG::debugging" value="false"/>

     <compiler.debug>true</compiler.debug>             
  </mxmlc>
  <copy filtering="true" file="${APP_DESCRIPTOR}" tofile="${APP_DEBUG_DESCRIPTOR}" />
        <replace file="${APP_DEBUG_DESCRIPTOR}">
            <replacefilter token="[This value will be overwritten by Flash Builder in the output app.xml]" value="${APP_NAME}.swf"/>
        </replace>
</target> 
```

这是我的 ant 脚本的运行目标

```
<target name="test" depends="compile">
    <exec executable="${ADL}">
        <arg value="${APP_DEBUG_DESCRIPTOR}"/>
    </exec> 
</target> 
```

我还尝试使用 ADT 将项目打包为 .dmg 并安装它。它会安装，但在我运行已安装的版本时会立即退出。这是我的 ant 脚本中的包目标。

```
<target name="package" >
    <java jar="${ADT.JAR}" fork="true" failonerror="true">
        <arg value="-package"/>
        <arg value="-storetype"/>
        <arg value="${STORETYPE}"/>
        <arg value="-keystore"/>
        <arg value="${KEYSTORE}"/>
        <arg value="-storepass"/>
        <arg value="${KEYSTORE_PASS}"/>
        <!-- Target -->
        <arg value="-target"/>
        <arg value="native"/>
        <!-- Output -->
        <arg value="${PACKAGE_NAME}"/>
        <!-- App XML -->
        <arg value="${APP_DEBUG_DESCRIPTOR}"/>
        <!-- Include all files from the bin directory -->
        <arg value="-C"/>
        <arg value="${DEBUG_DIR}"/>
        <arg value="${APP_NAME}.swf"/>
        <arg value="-C"/>
        <arg value="src"/>
        <arg value="images"/>
        <arg value="-C"/>
        <arg value="src"/>
        <arg value="process"/>
        <arg value="-C"/>
        <arg value="src"/>
        <arg value="assets"/>
        <arg value="-C"/>
        <arg value="src"/>
        <arg value="styles"/>
    </java>
    <echo message="Finished packaging ${PACKAGE_NAME}"/>
</target> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T21:14:52.213

我将 external-library-path 更改为仅包含 airglobal.swc，这让我克服了这个错误。

```
<compiler.external-library-path dir="${FLEX_HOME}/frameworks/libs/air" append="true">
   <include name="airglobal.swc" />
</compiler.external-library-path> 
```

我认为将整个 air 文件夹包含为外部库会导致链接中省略一堆 .swc。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-12T17:43:45.700

我在 FlashDevelop 中遇到了类似的问题，其中应用程序构建正常，但在运行时出现“错误 1014：找不到火花组件应用程序”。

您关于更改外部库路径的回答帮助我查明了问题。基本上，我从 Project options -> tab Compiler Options 中删除了路径，只剩下：

```
Intrinsic Libraries: Library\AS3\frameworks\Flex4 
```

在 SWC 库中，我留下了正在使用的任何其他第三方库。还有一个 FLVPlayback.swc（在 Flash CS 中编译），用于在 AS3 代码中使用 FLVPlayback。通过这种方式，我可以在正常的 AS3 应用程序中使用这个 Flex/Spark 组件。

# sql - 如何在配置单元中将 json 对象数组的字符串表示形式转换回数组形式

> ID：11994637
> 
> 赞同：0
> 
> 时间：2012-08-16T20:02:36.270
> 
> 标签：sql, string, hive

我在蜂巢/ SQL 中工作。我的表中有一个列，其中包含代表 json 对象数组的字符串。我需要将字符串转换为 JSON 字符串数组。

例如，我有这个，

```
"[{a:1, b:1},{a:2, b:2}]" 
```

我想得到这个：

```
["{a:1, b:1}","{a:2, b:2}"] 
```

尝试将字符串转换为数组，但这不起作用。关于如何以聪明的方式做到这一点的任何想法，而不是用“}，{”分割？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T20:20:09.837

没关系，我最终只是将字符串拆分为“}”，然后将“}”添加回每个部分，效果很好！

# cross-browser - 使用 RTL 的左侧文本溢出省略号的几个浏览器兼容性问题

> ID：11994646
> 
> 赞同：9
> 
> 时间：2012-08-16T20:03:43.553
> 
> 标签：cross-browser, right-to-left, ellipsis, css

我的目标是创建一个带有隐藏溢出和省略号的元素，除了我希望隐藏左侧的字符并且省略号也位于左侧。这适用于大多数浏览器：

CSS：

```
#mydiv {
    overflow:hidden;
    white-space:nowrap;
    text-overflow:ellipsis;
    direction:rtl;
} 
```

HTML：

```
<div id="mydiv">foobar foobar foobar</div> 
```

其中，当 #mydiv 比它的内容窄时，应该像这样出现：

> ...obar foobar

但是，据我所知（并且对尝试此操作的其他任何人发出公平警告，因为我已经`direction:rtl`在其他几个地方看到了解决方案），唯一正确执行此操作的主要浏览器似乎是 Firefox。Safari 和 Google Chrome 都会将省略号放在文本的左侧，但无论如何都会在右侧截断，如下所示：

> ...foobar 傻瓜

IE9 和 Opera 完全混淆了。IE 在右侧截断并使文本与省略号重叠。到目前为止，最有创意的 Opera 会在一段时间内使单个单词上的溢出可见（随着元素变窄，也就是说），然后开始截断最左边的单词，但从右边开始。它也无法渲染省略号，在我做的一个实验中，甚至将一个 ™ 字符一直移动到左侧。真的。所以“foobar foobar foobar™”变成了这样：

> ™foob foobar

作为附加说明，webkit 浏览器的一个（非常烦人的）潜在选项可能是设置`-webkit-rtl-ordering:visual`左侧的截断，但实际上也以相反的顺序呈现字符：

> ...嘘声

因此，通过浏览器或某种晦涩的功能嗅探，理论上可以设置该属性并动态反转元素的文本。

是否有一个简单的跨浏览器解决方法，甚至是一个复杂的、基于 JS 的解决方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T16:39:46.203

There are JS/Jquery based solutions to your problem. The one caveat is they are more expensive. If you are not making a bunch of changes on your page then the following solutions should work just fine.

Dotdotdot: [http://dotdotdot.frebsite.nl/](http://dotdotdot.frebsite.nl/)

三点 [http://tpgblog.com/2009/12/21/threedots-the-jquery-ellipsis-plugin/](http://tpgblog.com/2009/12/21/threedots-the-jquery-ellipsis-plugin/)

编辑：为了清楚起见，我看到了你提到的同样的问题。

# glassfish - Glassfish 3.1 application.wadl 重新排序元素

> ID：11994647
> 
> 赞同：1
> 
> 时间：2012-08-16T20:03:44.327
> 
> 标签：glassfish, glassfish-3, soapui, wadl

我目前正在使用 Glassfish 来托管一堆 RESTful Web 服务。Glassfish 非常有帮助，可以为我生成一个 wadl。我遇到的问题是它生成的 wadl 将所有资源按随机顺序排列。

我们出色的 QA 人员（以及我们的开发人员）使用 SoapUI 来使用 wadl 并手动调用 Web 服务以进行测试。这个过程变得令人沮丧，因为很难找到我们想要调用的 Web 服务，因为它没有按字母顺序排列。更糟糕的是，每次我们添加或更改 Web 服务时，我们必须将 wadl 重新导入到 SoapUI 中，这会更改 Web 服务的顺序。

我做了很多挖掘工作，但没有找到一个配置文件或属性来告诉 glassfish 在发布之前订购 wadl。我也找不到让 SoapUI 将 Web 服务重新排序为按字母顺序排列的方法。我想出的解决方案是使用 JAXB 将 wadl 转换为 Java 对象，重新排序 Java 对象，然后将其转换回 Java。

所有这一切归结为，有没有办法让 Glassfish 3.1 将 wadl 重新排序为按字母顺序排列，或者让 SoapUI 按字母顺序显示 Web 服务？

# oauth - 使 Oauth 令牌无效

> ID：11994657
> 
> 赞同：0
> 
> 时间：2012-08-16T20:04:42.713
> 
> 标签：oauth

我正在尝试使令牌无效，但出现以下异常：

```
+       Headers {X-AspNetMvc-Version: 3.0
xoauth_problem: parameter_absent
xoauth_parameters_absent: oauth_session_handle&oauth_token
Connection: keep-alive
Content-Length: 165
Cache-Control: private
Content-Type: text/html; charset=utf-8
Date: Thu, 16 Aug 2012 20:03:38 GMT
Server: Microsoft-IIS/7.5
X-AspNet-Version: 4.0.30319
X-Powered-By: ASP.NET

}   System.Net.WebHeaderCollection 
```

这是代码：

```
Uri url = new Uri("https://XXXYYY/OAuth/InvalidateToken");
string oauthHeader = "OAuth oauth_session_handle="AAA3D&",oauth_token="SDSFSDSDF%3D",oauth_consumer_key="5512CONSUMER",oauth_nonce="0000012145o",oauth_signature="QEESIGN99$",oauth_signature_method="HMAC-SHA1",oauth_timestamp="1345141023",oauth_version="1.0"";
        HttpWebRequest webReq = (HttpWebRequest)WebRequest.Create(url);                
                webReq.Method = WebRequestMethods.Http.Get;
                webReq.Headers.Add(HttpRequestHeader.Authorization, oauthHeader);
                WebResponse response = webReq.GetResponse(); 
```

*   请注意我确实有参数

# php - 用于 Web 服务访问的 PEM 文件源

> ID：11994658
> 
> 赞同：0
> 
> 时间：2012-08-16T20:05:01.817
> 
> 标签：php, curl, public-key-encryption, pem

我应该更多地关注我的安全课程。我对某事感到很困惑。首先，这是我要完成的工作的背景。

我有一个需要访问的 Web 服务。Web 服务设置为 HTTPS。客户端和服务器之间的流量是加密的（这与身份验证无关）。

我正在通过 cURL 和 PHP 与 Web 服务进行交互。我已经获得了一个通过 HTTP 在本地工作的示例，并且我相当有信心在 cURL/PHP 方面我走在正确的轨道上。

当使用 HTTP 版本的代码通过 HTTPS 访问 Web 服务时，我得到一个`error code 60 "SSL certificate problem, verify that the CA cert is OK" (error:14090086:SSL routines:SSL3_GET_SERVER_CERTIFICATE:certificate verify failed)`

从我的阅读来看，我似乎需要一个 PEM 文件，并且我需要设置额外的 cURL 选项，如下所示：

*   CURLOPT_CAINFO
*   CURLOPT_SSLCERT
*   CURLOPT_SSLKEYPASSWD

我的问题是**我怎么知道从哪里获取 PEM 文件或者我是否可以简单地制作它？**这可能是一个显而易见的答案，因为我确定我遗漏了一些东西，但我想我只需要询问并了解我遗漏的背景。

*修正*：Web 服务使用由 VeriSign 签署的证书。所以它不是自签名证书。此外，Web 服务由外部组织拥有和运营。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T20:56:57.087

尽管在问这个问题之前四处搜索，但似乎我在与“thatidiotguy”（他的用户名，而不是我给他的名字。;-)）进行了一些倒退之后偶然发现了答案。

开箱即用的 cURL 不信任任何 CA（VeriSign 或其他）。这需要在您的服务器上进行设置。要“解决”问题，您有两种选择。您可以使用以下命令绕过验证：

```
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false); 
```

请注意，这在安全性方面并不是最佳的。任何证书，无论是否由 CA 签名，都将被接受为受信任的。

正确的解决方法包括获取原始证书（在我的情况下，这意味着 Web 服务）并将证书“导出”为 X.509 证书 (PEM)。然后证书需要适当地移动到服务器并设置以下配置：

```
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, true);
curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 2); //Check that the common name exists and that it matches the host name of the server
curl_setopt($ch, CURLOPT_CAINFO, getcwd() . "/path/to/cert/my-exported.crt"); //PEM file 
```

*来源*：[http ://unitstep.net/blog/2009/05/05/using-curl-in-php-to-access-https-ssltls-protected-sites/](http://unitstep.net/blog/2009/05/05/using-curl-in-php-to-access-https-ssltls-protected-sites/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T00:03:22.970

答案很简单。您需要下载一个证书包，它也随常规浏览器一起提供。

幸运的是，这里已经为您完成了这项工作：

[http://curl.haxx.se/docs/caextract.html](http://curl.haxx.se/docs/caextract.html)

下载后，您可以使用 CURLOPT_CAINFO 指定此文件的路径。

# powershell - 对专有名称 (Dn) 的身份引用？

> ID：11994659
> 
> 赞同：0
> 
> 时间：2012-08-16T20:05:04.333
> 
> 标签：powershell

如果我有类似 DOMAIN\Domain Admins (IdentityReference from Get-ACL) 的东西，我怎样才能获得它的专有名称 (DN)？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T10:19:48.990

搜索广告：

```
$searcher = [ADSISEARCHER]'(cn=domain admins)'
$searcher.FindOne().Properties.distinguishedname 
```

# printing - Lightswitch 打印 html 文件 - System.UnauthorizedAccessException：无效的跨线程访问

> ID：11994671
> 
> 赞同：2
> 
> 时间：2012-08-16T20:05:48.387
> 
> 标签：printing, visual-studio-lightswitch

我在 Lightswitch 中创建了一个新按钮，并将此代码放入其中以仅打印一个文件：

```
partial void StampaDeposito_Execute()
{
    PrintDocument printInvoice = new PrintDocument();

    printInvoice.PrintPage +=
        new EventHandler<PrintPageEventArgs>(printInvoice_PrintPage);
    printInvoice.Print("TemplateEmail.htm");
} 

void printInvoice_PrintPage(object sender, PrintPageEventArgs ev)
{
    ev.HasMorePages = false;
} 
```

但是当我单击按钮时出现以下错误：`System.UnauthorizedAccessException: Invalid cross-thread access`.

有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T12:16:39.633

尝试这个：

```
using Microsoft.LightSwitch.Threading

partial void StampaDeposito_Execute()
{
    Dispatchers.Main.BeginInvoke(() => {
        PrintDocument printInvoice = new PrintDocument();

        printInvoice.PrintPage +=
            new EventHandler<PrintPageEventArgs>(printInvoice_PrintPage);
        printInvoice.Print("TemplateEmail.htm");
    });

} 

void printInvoice_PrintPage(object sender, PrintPageEventArgs ev)
{
    ev.HasMorePages = false;
} 
```

当您收到有关线程访问的错误时，您通常可以通过调用[主调度](http://msdn.microsoft.com/en-us/library/ms591206.aspx)程序上的代码来修复它。

# ruby-on-rails - Ruby on Rails Monkey 修补 Gem 的模型

> ID：11994672
> 
> 赞同：5
> 
> 时间：2012-08-16T20:05:56.607
> 
> 标签：ruby-on-rails

这可能很愚蠢，但我包含了一个 gem，它代表了我的项目所需的所有模型。我想向`to_custom_string`其中一个模型添加一个方法，`Person`.

我试图通过（按照[这个](https://stackoverflow.com/questions/3420680/monkey-patching-in-rails-3)例子）做到这一点： `config/initializers/extensions/person.rb`

其中包含以下内容：

```
class Person < ActiveRecord::Base
  def to_custom_string
    address.street.to_s
  end
end 
```

gem 中的`Person`类有一个`has_one :address`关联。

我遇到的问题是这个补丁似乎覆盖`Person`了 gem 中的类，而不是修补它。疯狂的是，这种覆盖行为只能通过 rake 经历（`Person`在 gem 的类中声明的所有关联都丢失了）。

我的 rake 任务是这样的：

```
namespace :convert
  task :all_persons => :environment do
    Person.where(:param => value).includes(:address).find_in_batches(:batch_size => 2000) do |persons|
      persons.each do |person|
        puts person.to_custom_string
      end
    end
  end
end 
```

电话`bundle exec rake convert:all_persons`给了我：

```
Association named 'address' was not found; perhaps you misspelled it? 
```

但是将 rake 任务中的代码复制并粘贴到 rails 控制台工作正常。

`Person`我目前的解决方案是将gem中的代码复制到我的`app/models`目录中，并在`to_custom_string`那里使用我的方法，我知道这是错误的。

有人可以解释为什么a）irb保留了我的`Person`关联，但rake没有，b）我如何让rake合作？

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-17T01:48:21.670

首先，我不会重新打开课程，而是创建一个模块并将其包含到 Person 中。所以它看起来像这样

```
 module CustomString
    def to_custom_string
      address.street.to_s
    end
  end

  Person.send(:include, CustomString) 
```

此外，在运行初始化程序时，Person 模型似乎还不可用。如果仍然不起作用，您可能希望将其放入您的 application.rb 中。

```
 config.railties_order = [ModelEngine::Engine, :main_app, :all] 
```

我猜它在 irb 而不是 rake 中起作用的原因是因为它们以不同的方式查找类。Irb（我相信您通过运行 rails 控制台运行）一次加载所有类，因此它从引擎加载类，然后运行初始化程序，您已经定义了来自引擎的类。我猜（虽然我不确定）开发模式下的 Rake 使用常量的延迟加载。所以它不会在一开始就加载所有类，只有当它找到一个未定义的常量时。然后它开始寻找可以定义该常量的文件。由于您将一些 Person 放入初始化程序中，因此它根本不会查找引擎的模型，因为在它看到 Person 时它已经具有 Person 定义。这就是为什么包含模块而不是重新打开课程可能会有所帮助->

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-16T20:42:32.210

我认为只要您重新打开该类，它就可以工作，而无需再次从 ActiveRecord::Base 继承。所以，像这样：

```
class Person
  def custom_string
    address.to_street.to_s
  end
end 
```

编辑：

在重新打开课程之前，您可能还需要添加这样的一行：

```
require_dependency ModelEngine::Engine.root.join('app', 'models', 'person').to_s 
```

其中 ModelEngine::Engine 只是包含所有模型的引擎的类。

# hover - 为什么我的图像在悬停时摆动？

> ID：11994674
> 
> 赞同：2
> 
> 时间：2012-08-16T20:05:58.053
> 
> 标签：hover, css-transitions, shake

谁能帮我理解为什么[http://www.alternativeradio.org/pages/free-downloads](http://www.alternativeradio.org/pages/free-downloads)上的视频图像（但不是播放图标）在我鼠标悬停时向上摆动一个像素然后向下摆动一个像素，然后当我鼠标悬停时再次摆动？在 Firefox 上效果较慢，因此可能与 CSS 过渡有关。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-12-04T08:22:44.757

使用 CSS 过滤器和过渡的图片库也有同样的问题。[通过这个答案](https://stackoverflow.com/a/16209237)的帮助摆脱了不必要的摆动。

# c# - 在 Visual Studio 中呈现自定义控件时出错

> ID：11994675
> 
> 赞同：0
> 
> 时间：2012-08-16T20:06:03.170
> 
> 标签：c#, asp.net, visual-studio-2010

我制作了一些自定义控件，并在 GridView 中使用它们。它们继承了 BoundField 类。这是代码：

```
<asp:GridView ID="grid" runat="server" CssClass="tb" DataSourceID="ds">
    <Columns>
        <asp:StatusBoundField DataField="bstatus"  ActiveTitle="Activated"
         InactiveTitle="Inactivated" />
    </Columns>
</asp:GridView> 
```

当我在浏览器中运行该页面时，它可以完美运行，但是当我尝试在设计视图中查看它时，我收到此错误：

GridView - 网格

呈现控件时出错。DataBinding：“System.Data.DataRowView”不包含名为“bstatus”的属性。

为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T21:08:22.763

你错过了一个“

```
 <asp:GridView ID="grid" runat="server" CssClass="tb" DataSourceID="ds> 
```

应该`<asp:GridView ID="grid" runat="server" CssClass="tb" DataSourceID="ds">`

# cuda - 用 CUDA 求解二维扩散（热）方程

> ID：11994679
> 
> 赞同：3
> 
> 时间：2012-08-16T20:06:39.280
> 
> 标签：cuda, nvidia, differential-equations

我正在尝试解决一些标准问题来学习 CUDA。例如，我正在使用以下代码求解二维扩散方程。但是我的结果与标准结果不同，我无法弄清楚。

```
//kernel definition
__global__ void diffusionSolver(double* A, double * old,int n_x,int n_y)
{

    int i = blockIdx.x * blockDim.x + threadIdx.x;
    int j = blockIdx.y * blockDim.y + threadIdx.y;

    if(i*(n_x-i-1)*j*(n_y-j-1)!=0)
        A[i+n_y*j] = A[i+n_y*j] + (old[i-1+n_y*j]+old[i+1+n_y*j]+
                       old[i+(j-1)*n_y]+old[i+(j+1)*n_y] -4*old[i+n_y*j])/40;

}

int main()
{

    int i,j ,M;
    M = n_y ;
    phi = (double *) malloc( n_x*n_y* sizeof(double));
    phi_old = (double *) malloc( n_x*n_y* sizeof(double));
    dummy = (double *) malloc( n_x*n_y* sizeof(double));
    int iterationMax =10;
    //phase initialization
    for(j=0;j<n_y ;j++)
    {
        for(i=0;i<n_x;i++)
        {
            if((.4*n_x-i)*(.6*n_x-i)<0)
                phi[i+M*j] = -1;
            else 
                phi[i+M*j] = 1;

            phi_old[i+M*j] = phi[i+M*j];
        }
    }

    double *dev_phi;
    cudaMalloc((void **) &dev_phi, n_x*n_y*sizeof(double));

    dim3 threadsPerBlock(100,10);
    dim3 numBlocks(n_x*n_y / threadsPerBlock.x, n_x*n_y / threadsPerBlock.y);

    //start iterating 
    for(int z=0; z<iterationMax; z++)
    {
        //copy array on host to device
        cudaMemcpy(dev_phi, phi, n_x*n_y*sizeof(double),
                cudaMemcpyHostToDevice);

        //call kernel
        diffusionSolver<<<numBlocks, threadsPerBlock>>>(dev_phi, phi_old,n_x,n_y);

        //get updated array back on host
        cudaMemcpy(phi, dev_phi,n_x*n_y*sizeof(double), cudaMemcpyDeviceToHost);

        //old values will be assigned new values
        for(j=0;j<n_y ;j++)
        {
            for(i=0;i<n_x;i++)
            {
                phi_old[i+n_y*j] = phi[i+n_y*j];
            }
        }
    }

    return 0;
} 
```

有人可以告诉我这个过程是否有任何问题吗？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-03-12T06:32:24.490

talonmies、brano 和 huseyin 已经指出了你的代码的一些错误。

扩散（热）方程是 CUDA 可解的偏微分方程的经典例子之一。在 CUDA by Example 一书的第 7 章中也有一个完整的示例。

作为对未来用户的参考，我在下面提供了一个完整的工作示例，包括 CPU 和 GPU 代码。正如 talonmies 所建议的那样，我没有交换指针，而是将两个 Jacobi 迭代浓缩在一个循环中。

```
#include <iostream>

#include "cuda_runtime.h"
#include "device_launch_parameters.h"

#include "Utilities.cuh"

#define BLOCK_SIZE_X 16
#define BLOCK_SIZE_Y 16

/***********************************/
/* JACOBI ITERATION FUNCTION - GPU */
/***********************************/
__global__ void Jacobi_Iterator_GPU(const float * __restrict__ T_old, float * __restrict__ T_new, const int NX, const int NY)
{
    const int i = blockIdx.x * blockDim.x + threadIdx.x ;
    const int j = blockIdx.y * blockDim.y + threadIdx.y ;

                                //                         N 
    int P = i + j*NX;           // node (i,j)              |
    int N = i + (j+1)*NX;       // node (i,j+1)            |
    int S = i + (j-1)*NX;       // node (i,j-1)     W ---- P ---- E
    int E = (i+1) + j*NX;       // node (i+1,j)            |
    int W = (i-1) + j*NX;       // node (i-1,j)            |
                                //                         S 

    // --- Only update "interior" (not boundary) node points
    if (i>0 && i<NX-1 && j>0 && j<NY-1) T_new[P] = 0.25 * (T_old[E] + T_old[W] + T_old[N] + T_old[S]);
}

/***********************************/
/* JACOBI ITERATION FUNCTION - CPU */
/***********************************/
void Jacobi_Iterator_CPU(float * __restrict T, float * __restrict T_new, const int NX, const int NY, const int MAX_ITER)
{
    for(int iter=0; iter<MAX_ITER; iter=iter+2)
    {
        // --- Only update "interior" (not boundary) node points
        for(int j=1; j<NY-1; j++) 
            for(int i=1; i<NX-1; i++) {
                float T_E = T[(i+1) + NX*j];
                float T_W = T[(i-1) + NX*j];
                float T_N = T[i + NX*(j+1)];
                float T_S = T[i + NX*(j-1)];
                T_new[i+NX*j] = 0.25*(T_E + T_W + T_N + T_S);
            }

        for(int j=1; j<NY-1; j++) 
            for(int i=1; i<NX-1; i++) {
                float T_E = T_new[(i+1) + NX*j];
                float T_W = T_new[(i-1) + NX*j];
                float T_N = T_new[i + NX*(j+1)];
                float T_S = T_new[i + NX*(j-1)];
                T[i+NX*j] = 0.25*(T_E + T_W + T_N + T_S);
            }
    }
}

/******************************/
/* TEMPERATURE INITIALIZATION */
/******************************/
void Initialize(float * __restrict h_T, const int NX, const int NY)
{
    // --- Set left wall to 1
    for(int j=0; j<NY; j++) h_T[j * NX] = 1.0;
}

/********/
/* MAIN */
/********/
int main()
{
    const int NX = 256;         // --- Number of discretization points along the x axis
    const int NY = 256;         // --- Number of discretization points along the y axis

    const int MAX_ITER = 1;     // --- Number of Jacobi iterations

    // --- CPU temperature distributions
    float *h_T              = (float *)calloc(NX * NY, sizeof(float));
    float *h_T_old          = (float *)calloc(NX * NY, sizeof(float));
    Initialize(h_T,     NX, NY);
    Initialize(h_T_old, NX, NY);
    float *h_T_GPU_result   = (float *)malloc(NX * NY * sizeof(float));

    // --- GPU temperature distribution
    float *d_T;     gpuErrchk(cudaMalloc((void**)&d_T,      NX * NY * sizeof(float)));
    float *d_T_old; gpuErrchk(cudaMalloc((void**)&d_T_old,  NX * NY * sizeof(float)));

    gpuErrchk(cudaMemcpy(d_T,     h_T, NX * NY * sizeof(float), cudaMemcpyHostToDevice));
    gpuErrchk(cudaMemcpy(d_T_old, d_T, NX * NY * sizeof(float), cudaMemcpyDeviceToDevice));

    // --- Grid size
    dim3 dimBlock(BLOCK_SIZE_X, BLOCK_SIZE_Y);
    dim3 dimGrid (iDivUp(NX, BLOCK_SIZE_X), iDivUp(NY, BLOCK_SIZE_Y));

    // --- Jacobi iterations on the host
    Jacobi_Iterator_CPU(h_T, h_T_old, NX, NY, MAX_ITER);

    // --- Jacobi iterations on the device
    for (int k=0; k<MAX_ITER; k=k+2) {
        Jacobi_Iterator_GPU<<<dimGrid, dimBlock>>>(d_T,     d_T_old, NX, NY);   // --- Update d_T_old     starting from data stored in d_T
        Jacobi_Iterator_GPU<<<dimGrid, dimBlock>>>(d_T_old, d_T    , NX, NY);   // --- Update d_T         starting from data stored in d_T_old
    }

    // --- Copy result from device to host
    gpuErrchk(cudaMemcpy(h_T_GPU_result, d_T, NX * NY * sizeof(float), cudaMemcpyDeviceToHost));

    // --- Calculate percentage root mean square error between host and device results
    float sum = 0., sum_ref = 0.;
    for (int j=0; j<NY; j++)
        for (int i=0; i<NX; i++) {
            sum     = sum     + (h_T_GPU_result[j * NX + i] - h_T[j * NX + i]) * (h_T_GPU_result[j * NX + i] - h_T[j * NX + i]);
            sum_ref = sum_ref + h_T[j * NX + i]                                * h_T[j * NX + i];
        }
    printf("Percentage root mean square error = %f\n", 100.*sqrt(sum / sum_ref));

    // --- Release host memory 
    free(h_T);
    free(h_T_GPU_result);

    // --- Release device memory
    gpuErrchk(cudaFree(d_T));
    gpuErrchk(cudaFree(d_T_old));

    return 0;
} 
```

运行此类示例所需的**Utilities.cu**和**Utilities.cuh文件保存在此**[github 页面上](https://github.com/OrangeOwlSolutions/CUDA-Utilities)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-17T07:11:56.510

您犯的一个大错误是 phi_old 被传递给内核并由内核使用，但这是一个主机指针。
使用 cudaMalloc 分配一个 dev_phi_old。将其设置为默认值并在进入 z 循环之前首次将其复制到 GPU。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-16T20:10:52.207

这里：

```
A[i+n_y*j] = A[i+n_y*j] + (old[i-1+n_y*j]+old[i+1+n_y*j]+old[i+(j-1)*n_y]+old[i+(j+1)*n_y] -4*old[i+n_y*j])/40; 
```

您正在除以 40（整数），这可能导致错误的扩散率。实际上可以导致不扩散。

但是 A 是一个双精度数组。

将漫反射率除以 40.0，看看它是否有效。

如果这是来自 Jos-Stam 的求解器，它应该是 4.0 而不是 40

还有一件事：

```
-4*old[i+n_y*j])/40; 
```

在这里，您将乘以 4（整数）。这也可能导致整体铸造！

这个：

```
-4.0*old[i+n_y*j])/40.0; 
```

减少一些错误。

祝你今天过得愉快。

# javascript - 如何在 Add-on Builder 中添加现有库的副本

> ID：11994682
> 
> 赞同：0
> 
> 时间：2012-08-16T20:06:45.137
> 
> 标签：javascript, firefox-addon, firefox-addon-sdk

我在将库集成到 Mozilla 的附加组件生成器中的库文件夹时遇到了一些问题：

几周前，我编写了一个库，并且只有在该库公开时才能将其添加到我的一个附加组件中。现在我突然可以添加它，即使它已被设为私有（！？）我想修改现有库（Erik Vold 的工具栏按钮）。所以我做了一个副本，修改了它，现在我想使用它。但是，无论它是私有的还是公共的，我都无法通过单击“库”旁边的 + 并输入确切名称来找到它。我自己创建的另一个库也是如此……
所以我想在这里扭转命运之轮。有时它有效 - 大多数时候它不...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T21:42:57.793

这是构建器的一个已知问题，我们希望尽快解决：

[https://bugzilla.mozilla.org/show_bug.cgi?id=777352](https://bugzilla.mozilla.org/show_bug.cgi?id=777352)

抱歉，我目前没有更好的答案！

# html - 导航菜单样式问题

> ID：11994685
> 
> 赞同：0
> 
> 时间：2012-08-16T20:06:59.743
> 
> 标签：html, css, nav

我得到了一个导航菜单的 psd，我正在尝试使用 css 和 html 重新创建它。

我已经设置了一个 jsfiddle，而不是在这里发布我的代码，这样人们就可以搞砸它了。 [http://jsfiddle.net/XdefV/](http://jsfiddle.net/XdefV/) js fiddle 中的代码是我的尝试，但你会看到它有点偏离。

我试图重新创建的是：

![在此处输入图像描述](../Images/aedbfe9b665d75bd10546591ef8d7124.png)

谁能帮我更好地重新创建图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T20:20:32.607

这个**[小提琴](http://jsfiddle.net/XdefV/5/)**应该让你走上正轨。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T20:22:01.997

干得好。更接近：

[http://jsfiddle.net/XdefV/4/](http://jsfiddle.net/XdefV/4/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T20:31:18.673

你可以试试这个。
（我基于你的 968px 图像宽度）

[http://jsfiddle.net/XdefV/6/](http://jsfiddle.net/XdefV/6/)

# java - Java 中的异常

> ID：11994691
> 
> 赞同：1
> 
> 时间：2012-08-16T20:07:17.303
> 
> 标签：java, exception, web-applications

目前我正在使用 Playframework2 开发一个网站。我只是编程的初学者。我读了一些关于异常的书，但现在在现实世界中，异常处理真的很奇怪。

老实说，我并不关心抛出了哪些异常，我以相同的方式处理所有异常。 `return badrequest();`. 我只使用异常进行日志记录。

```
try{
...
}
catch(Exeption e){
//log
return badrequest();
} 
```

但这是太多样板文件，写起来真的很烦人，因为每个方法都会抛出相同的异常。

您可以给我任何提示、提示或资源吗？

编辑：

一个例子是我的“全局”配置文件。因为每次我认为我可以为这个问题写一个单例时，我都需要连接到数据库。

```
private Datastore connect() throws UnknownHostException, MongoException,
            DbAuthException {

        Mongo m = new Mongo(dbUrl, dbPort);
        Datastore ds = new Morphia().createDatastore(m, dbName);
        boolean con = ds.getDB().authenticate(username, password.toCharArray());
        if (!con)
            throw new DbAuthException();
        return ds;
    } 
```

这也导致每次我想连接到数据库时都会尝试并捕获。我的问题是我认为我无法处理它们。

代码示例：

```
public static Result addComment(String title) {
        try {

            Datastore ds = DatabaseConnect.getInstance().getDatastore();
            Form<Comment> filledForm = commentForm.bindFromRequest();
            Comment userComment = filledForm.get();
            userComment.setUsername(Util.getUsernameFromSession(ctx()));
            User.increasePointsBy(ctx(), 1);
            UserGuides.addComment(title, userComment);
        } catch (Exception e) {
            return badRequest();
        }
        return redirect(routes.Guides.blank());
    } 
```

在这种情况下，我懒得一遍又一遍地编写相同的 try 和 catch，这是重复的代码。

也许有一本书解释了如何设计一个带有异常处理的大型应用程序？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T20:21:46.717

当你调用一个方法时，你不一定要在那里捕获异常。你可以让你的调用者处理它们（如果它是一个检查异常，则声明一个 throws 子句）。事实上，无需任何额外工作即可将它们传递给调用者的能力是异常的显着特征。

My team has adopted the following coding standard: We throw checked exceptions for those rare cases when we want to recover from a failure, and unchecked exceptions for anything else. There is only a single catch block for the unchecked exceptions in a method so high in the call stack that all requests pass through it (for instance in a `ServletFilter`). This catch block logs the exception, and forwards the user to the "Sorry, this shouldn't have happened" page.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-16T20:09:28.333

您是否查看过代码以检查为什么抛出所有这些异常？例外是有原因的——告诉你出了点问题。如果您正在编写太多“样板”`try-catch`代码并且您不在千行应用程序中，那么您必须重构。

`try-catch`当你有一个复杂的块并且可能变得非常单调和样板时可能会很烦人（[Marc Gravell 甚至说他经常使用`try-finally`](https://stackoverflow.com/a/11596066/451590)）但作为一个新程序员，检查你编写的代码并弄清楚如何处理或避免这些异常。

正如 akf 所提到的，忽略异常也可能对调试有害。如果您遗漏了导致灾难性的异常，则将更难追踪灾难性错误的地方。

# android - IntentService OnHandleIntent 未被调用

> ID：11994693
> 
> 赞同：0
> 
> 时间：2012-08-16T20:07:31.573
> 
> 标签：android, intentservice

我正在尝试使用 Intent 服务运行背景音乐。OnhandleIntent 不会被调用。我尝试添加断点甚至代码 android.os.Debug.waitForDebugger(); 但我无法进入 OnHandleIntent。我已将服务添加到清单中（android:name=".BackgroundMusic"/>），但我不确定我在这里缺少什么。任何帮助，将不胜感激。

```
public class BackgroundMusic extends IntentService
 {
   MediaPlayer mp;
   Uri uri;

public BackgroundMusic()
{
    super("BackgroundMusic");
     setIntentRedelivery(true);
}

@Override
protected void onHandleIntent(Intent intent)
{   
    try     
    {   
         android.os.Debug.waitForDebugger();
        int id=intent.getExtras().getInt("musicid");            
        mp=MediaPlayer.create(this,id);
        mp.prepare();
        mp.start();     
    }   
    catch (Exception e)
    {
        Log.e("Error",e.getMessage());
    }       
}

@Override
public void onCreate()
{
    super.onCreate();
}

@Override
public void onDestroy() 
{
    super.onDestroy();
    if (mp != null) 
        mp.release();
        mp=null;
} 
```

}

## 活动代码

```
 @Override
public void onCreate(Bundle savedInstanceState)
{
    try
    {
            super.onCreate(savedInstanceState);
             LMain=new LinearLayout(this);  
                     LMain.setOrientation(LinearLayout.HORIZONTAL);
           LayoutParams pFill=new LayoutParams(LayoutParams.FILL_PARENT,LayoutParams.FILL_PARENT);
              LMain.setLayoutParams(pFill);
            imageview=new ImageView(this);          
                            imageview.setLayoutParams(pFill);
            setContentView(LMain);

            Intent IntImage=getIntent();
            int id=IntImage.getExtras().getInt("id");
                mresourceid=new ImageAdapter(this).music[id];       
            imageview.setImageResource(new ImageAdapter(this).images[id]);
            Intent IntMusic=new Intent(ImageDetail.this,BackgroundMusic.class);
            IntMusic.putExtra("musicid", mresourceid);
            startService(IntMusic);     
    }
    catch(Exception e)
    {
        Log.e("error",e.getMessage());
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T17:16:53.307

有用。我之前在 OS 版本 2.3.4 的设备上运行代码。API 级别 3 支持 Intent 服务。想要更新以防万一有人在做和我一样的事情

# notifications - 带有 BroadcastReceiver 的 ProximityAlert 不起作用

> ID：11994694
> 
> 赞同：0
> 
> 时间：2012-08-16T20:07:32.343
> 
> 标签：notifications, broadcastreceiver, alert, proximity

我是 Android 新手，在使用 BroadcastReceiver 添加 ProximityAlert 时遇到问题。我知道这个话题也早先被讨论过了，但我正在尝试向不同的位置添加接近警报，我不确定我想要做的事情是否可以通过这种方式实现，或者我只是做错了。

问题：我尝试使用 BroadcastReceiver 实现添加 ProximityAlert 的代码，但它无法正常工作。下面是我的代码片段（发布在下面），请大家看看并帮助我解决它。

我有这个 userLocations 列表。我通过为列表运行 for 循环将接近警报添加到所有用户提到的位置。如果用户之前没有访问过该特定位置，我只想向用户位置添加邻近警报。然后我在 addLocationProximity() 方法中注册接收器，该方法是从 onResume() 方法调用的。我在 onPause() 方法中取消注册接收器。

我还使用了 onLocationChanged() 方法根据用于添加接近警报的相同逻辑来填充列表（稍后我将需要它）。

如果这些步骤中的任何一个没有正确执行，请告诉我。

提前致谢。

```
 package com.android.locationmang;

public class ViewAActivity extends ListActivity implements LocationListener{

private static final String PROX_ALERT_INTENT = "com.android.locationmang.PROX_ALERT_INTENT";
private static final long LOCAL_FILTER_DISTANCE = 1200;
public static List<UserLocation> notifiedLocationsList;

public static Location latestLocation;
PendingIntent pendingIntent;
Intent notificationIntent;
private LocationManager locationManager;
List<UserLocations> userLocations;
private IntentFilter filter;

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        notifiedLocationsList = new ArrayList<UserLocation>();
        userLocations = getUserLocations(); //Returns a list of user Locations stored by the user on the DB

    filter = new IntentFilter(PROX_ALERT_INTENT);
    }

    private void setUpLocation() {
        locationNotificationReceiver = new LocationNotificationReceiver();

    locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
        locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 60, 5, this);

        for (int i = 0; i < userLocation.size(); i++){
            UserLocation userLocation = userLocation.get(i); 
            if(!(userLocation.isComplete())){
                setProximityAlert(userLocation.getLatitude(), 
                        userLocation.getLongitude(), 
                        i+1, 
                        i);
            }
        }
        registerReceiver(locationNotificationReceiver, filter);
    }

    private void setProximityAlert(double lat, double lon, final long eventID, int requestCode){
            // Expiration is 10 Minutes (10mins * 60secs * 1000milliSecs)
            long expiration = 600000;

            Intent intent = new Intent(this, LocationNotificationReceiver.class);
            intent.putExtra(LocationNotificationReceiver.EVENT_ID_INTENT_EXTRA, eventID);
            PendingIntent pendingIntent = PendingIntent.getBroadcast(getApplicationContext(), requestCode, intent, PendingIntent.FLAG_CANCEL_CURRENT);

            locationManager.addProximityAlert(lat, lon, LOCAL_FILTER_DISTANCE, expiration, pendingIntent);
        }

    @Override
    protected void onResume() {
        super.onResume();

    setUpLocation();
        locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 60, 5, this);
    }

    @Override
    protected void onPause() {
        super.onPause();
        locationManager.removeUpdates(this);
        unregisterReceiver(locationNotificationReceiver);
    }

    public void onProviderDisabled(String provider) {}
    public void onProviderEnabled(String provider) {}
    public void onStatusChanged(String provider, int status, Bundle extras) {}

    public boolean userLocationIsWithinGeofence(UserLocation userLocation, Location latestLocation, long localFilterDistance) {
        float[] distanceArray = new float[1];
        Location.distanceBetween(userLocation.getLatitude(), userLocation.getLongitude(), latestLocation.getLatitude(), latestLocation.getLongitude(), userLocation.getAssignedDate(),distanceArray);

        return (distanceArray[0]<localFilterDistance);
    }

    public void onLocationChanged(Location location) {
        if (location != null) {
            latestLocation = location;

            for (UserLocation userLocation : userLocations) {
                if (!(userLocations.isVisited()) && userLocationIsWithinGeofence(userLocation, latestLocation, LOCAL_FILTER_DISTANCE)) {
                    notifiedLocationsList.add(userLocation);
                }
            }
        }
    }
} 
```

广播接收器的代码

```
 package com.android.locationmang;

public class LocationNotificationReceiver extends BroadcastReceiver {
    private static final int NOTIFICATION_ID = 1000;
    public static final String EVENT_ID_INTENT_EXTRA = "EventIDIntentExtraKey";

    @SuppressWarnings("deprecation")
    @Override
    public void onReceive(Context context, Intent intent) {
        String key = LocationManager.KEY_PROXIMITY_ENTERING;

        long eventID = intent.getLongExtra(EVENT_ID_INTENT_EXTRA, -1);

        Boolean entering = intent.getBooleanExtra(key, false);
        if (entering) {
            Log.d(getClass().getSimpleName(), "entering");
        }
        else{
            Log.d(getClass().getSimpleName(), "exiting");
        }

        String ns = Context.NOTIFICATION_SERVICE;

        NotificationManager mNotificationManager = (NotificationManager) context.getSystemService(ns);
        Intent notificationIntent = new Intent(context, MarkAsCompleteActivity.class);

        PendingIntent pendingIntent = PendingIntent.getActivity(context, 0, notificationIntent, 0);
        Notification notification = createNotification();
        notification.setLatestEventInfo(context, "Proximity Alert!", "You are near your point of interest.", pendingIntent);

        mNotificationManager.notify(NOTIFICATION_ID, notification);
    }

    private Notification createNotification() {
        Notification notification = new Notification();
        notification.icon =  R.drawable.ic_launcher;
        notification.when = System.currentTimeMillis();
        notification.flags |= Notification.FLAG_AUTO_CANCEL;
        notification.flags |= Notification.FLAG_SHOW_LIGHTS;
        notification.defaults |= Notification.DEFAULT_VIBRATE;
        notification.defaults |= Notification.DEFAULT_SOUND;
        notification.defaults |= Notification.DEFAULT_LIGHTS;
        notification.ledARGB = Color.WHITE;
        notification.ledOnMS = 1500;
        notification.ledOffMS = 1500;
        return notification;
    }
} 
```

谢谢并恭祝安康

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T11:22:26.793

`Intent`您正在使用操作字符串创建广播，并且您的`<receiver>`元素没有相应的`<intent-filter>`. 改变：

```
Intent intent = new Intent(PROX_ALERT_INTENT); 
```

至：

```
Intent intent = new Intent(this, LocationNotificationReceiver.class); 
```

# php - PHP文件既没有移动也没有移动

> ID：11994695
> 
> 赞同：2
> 
> 时间：2012-08-16T20:07:39.167
> 
> 标签：php, file, upload, move

我似乎无法弄清楚为什么会这样。当我运行以下代码时：

```
$uref = APACHE_ROOT .  UPLOAD_PATH . $applicant . "_ref_{$email}_{$year}"; 

if ( !move_uploaded_file( $_FILES['file']['tmp_name'], $uref ) ) {
   echo "Move failed";
} elseif ( move_uploaded_file( $_FILES['ref']['tmp_name'], $uref) )     {
    echo "Move succeeded";
} 
```

两个语句都没有返回。两条路径都存在；一个文件已成功上传，并且仅在第二次上传尝试后才开始发生。

任何想法为什么？感谢您的任何建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T20:09:20.877

```
if ( !move_uploaded_file( $_FILES['file']['tmp_name'], $uref ) ) {
   echo "Move failed";
} elseif ( move_uploaded_file( $_FILES['ref']['tmp_name'], $uref) )     {
    echo "Move succeeded";
} 
```

如果您的第一个调用返回 true，因为文件已移动，那么第二个调用将返回 false，因为文件不再存在。

你最好只做一个简单`if / else`的 - 第一次调用可以是真或假，所以你不需要重新检查。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T20:15:28.977

首先，是`$uref = APACHE_ROOT . UPLOAD_PATH . $applicant . "_ref_{$email}_{$year}";`目录吗？

如果是，那么您正在尝试写入一个目录，如果该目录已经存在，这可能会失败。

另外，只检查一次运行。

第一次，`move_file_uploaded`将被执行以检查是否为负。这显然是真的，所以它去第二个检查它是否是真的，它返回的是假的。

改为这样做：

```
$uref = APACHE_ROOT .  UPLOAD_PATH . $applicant . "_ref_{$email}_{$year}"; 

if(move_uploaded_file( $_FILES['file']['tmp_name'], $uref )){
   echo "Move succeeded";
} else {
   echo "Move failed";
} 
```

# javascript - 鼠标悬停时突出显示文本行

> ID：11994696
> 
> 赞同：4
> 
> 时间：2012-08-16T20:07:52.420
> 
> 标签：javascript, jquery, html, css, highlight

我目前正在一个网站上工作，该网站将以一堆故事供人们阅读（基本上是一个博客）。我想让它们尽可能易于阅读，并且我认为用光标“突出显示”文本行会很有用。有点像看书时用手指跟随文本行。

我偶然发现了[这个答案](https://stackoverflow.com/questions/2456442/how-can-i-highlight-the-line-of-text-that-is-closest-to-the-mouse)，但是我似乎无法让它为我的页面工作。这也是一个很老的答案，所以也许有一个改进的版本？

如果有人可以帮助我，我将永远感激不尽！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T20:39:12.257

编写了一些 jQuery 代码，至少对我而言，它们看起来和工作起来都比您所指的帖子中的代码更好。希望它符合您的需求:)

[在http://jsfiddle.net/gFTrS/2/](http://jsfiddle.net/gFTrS/2/)上还有一个现场演示

**HTML**

```
<div class="textWrapper">
    <div class="highlight"></div>
    <p>Your text goes here</p>
</div> 
```

**CSS**

```
.textWrapper
{
    position: relative;
    width: 600px;
    padding: 0px 10px;
    margin: 0 auto;
    cursor: default;
}

.textWrapper p
{
    font: normal 12px Arial;
    color: #000000;
    line-height: 18px;
    padding: 0;
    margin: 0;
}

.highlight
{
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 18px;
    background: yellow;
    z-index: -1;
    display: none;
} 
```

**jQuery**

```
$(document).ready(function()
{
    var lineHeight = 18;

    $('.textWrapper').hover(function()
    {
        $('.highlight', this).show();

        $(this).mousemove(function(e)
        {
            var relativePos = e.pageY - this.offsetTop;
            var textRow = (Math.ceil(relativePos / lineHeight) * lineHeight) - lineHeight;
            if (textRow => 0)
            {
                $('.highlight', this).css('top', textRow + 'px');
            }
        });
    }, function()
    {
        $('.highlight', this).hide();
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T20:35:48.530

Most of the answers and suggestions in the older post on SO you reffered to try to manipulate the DOM by adding spans or divs for each line. But that's actually not a waterproof approach since it is not cross- browser compatble, especially not with mobile browsers. You should use a dynamically jquery controlled div that jumps behind the lines. The div should be dynamically be positioned with a jquery function triggered on mousemove calculating the div jumping on line-height depending on mouse cursor position

# c# - 在 iis 托管的 wcf 服务中传递文化值

> ID：11994697
> 
> 赞同：3
> 
> 时间：2012-08-16T20:07:52.453
> 
> 标签：c#, wcf

这是我的代码..

```
 private IHelloWorld ChannelFactoryWebService()
        {
            ServiceEndpoint tcpEndPoint = new ServiceEndpoint(
                                                ContractDescription.GetContract(typeof(IHelloWorld)),
                                                new NetTcpBinding(),
                                                new EndpointAddress("net.tcp://myserver/CultureTest/Service.svc"));

        ChannelFactory<IHelloWorld> factory = new ChannelFactory<IHelloWorld>(tcpEndPoint);
        factory.Endpoint.Behaviors.Add(new CultureBehaviour());

        return factory.CreateChannel();
    }

    [TestMethod]  <-------------- FAILING TEST ----
    public void ChangingCultureWASViaEndPointTest()
    {
        IHelloWorld client = ChannelFactoryWebService();

        CultureInfo cultureInfo = new CultureInfo("ar-SA");
        Thread.CurrentThread.CurrentCulture = cultureInfo;

        client.Hello();
        string culture = client.HelloCulture();

        Assert.AreEqual("ar-SA", culture);  <--- fails here.. I get en-US for culture

    }

[ServiceBehavior(InstanceContextMode = InstanceContextMode.Single, IncludeExceptionDetailInFaults = true)]
public class Server : IHelloWorld
{
    #region IHelloWorld Members

    public void Hello()
    {
        Console.WriteLine(string.Format("Hello world from the server in culture {0}", Thread.CurrentThread.CurrentCulture.Name));
    }

    public string HelloCulture()
    {

        string cultureName = Thread.CurrentThread.CurrentCulture.Name;
        return cultureName;
    }

    #endregion
}

[ServiceContract]
public interface IHelloWorld
{
    [OperationContract]
    void Hello();

    [OperationContract]
    string HelloCulture();
}

    public class CultureMessageInspector : IClientMessageInspector, IDispatchMessageInspector
    {
        private const string HeaderKey = "culture";
        #region IDispatchMessageInspector Members

        public object AfterReceiveRequest(ref System.ServiceModel.Channels.Message request, System.ServiceModel.IClientChannel channel, System.ServiceModel.InstanceContext instanceContext)
        {
            int headerIndex = request.Headers.FindHeader(HeaderKey, string.Empty);
            if (headerIndex != -1)
            {
                Thread.CurrentThread.CurrentCulture = new CultureInfo(request.Headers.GetHeader<String>(headerIndex));
            }
            return null;
        }

        public void BeforeSendReply(ref System.ServiceModel.Channels.Message reply, object correlationState)
        {
        }

        #endregion

        #region IClientMessageInspector Members

        public void AfterReceiveReply(ref System.ServiceModel.Channels.Message reply, object correlationState)
        {
        }

        public object BeforeSendRequest(ref System.ServiceModel.Channels.Message request, System.ServiceModel.IClientChannel channel)
        {
            request.Headers.Add(MessageHeader.CreateHeader(HeaderKey, string.Empty, Thread.CurrentThread.CurrentCulture.Name));
            return null;
        }

        #endregion
    }

    public class CultureBehaviour : IEndpointBehavior
    {
        #region IEndpointBehavior Members

        public void AddBindingParameters(ServiceEndpoint endpoint, System.ServiceModel.Channels.BindingParameterCollection bindingParameters)
        {
        }

        public void ApplyClientBehavior(ServiceEndpoint endpoint, System.ServiceModel.Dispatcher.ClientRuntime clientRuntime)
        {
            CultureMessageInspector inspector = new CultureMessageInspector();
            clientRuntime.MessageInspectors.Add(inspector);
        }

        public void ApplyDispatchBehavior(ServiceEndpoint endpoint, System.ServiceModel.Dispatcher.EndpointDispatcher endpointDispatcher)
        {
            CultureMessageInspector inspector = new CultureMessageInspector();
            endpointDispatcher.DispatchRuntime.MessageInspectors.Add(inspector);
        }

        public void Validate(ServiceEndpoint endpoint)
        {
        }

        #endregion
    }

public class CultureBehaviorExtension : BehaviorExtensionElement
{
    // BehaviorExtensionElement members
    public override Type BehaviorType
    {
        get { return typeof(CultureBehaviour); }
    }

    protected override object CreateBehavior()
    {
        return new CultureBehaviour();
    }
} 
```

服务托管站点的 Web 配置如下所示：

```
 <endpointBehaviors>
    <behavior name="Default">
      <CultureExtension/>
    </behavior>
  </endpointBehaviors>

  <serviceBehaviors>
    <behavior>
      <!-- To avoid disclosing metadata information, set the value below to false and remove the metadata endpoint above before deployment -->
      <serviceMetadata httpGetEnabled="true"/>
      <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
      <serviceDebug includeExceptionDetailInFaults="false"/>
    </behavior>
  </serviceBehaviors>
</behaviors>

<extensions>
  <behaviorExtensions>
    <add name="CultureExtension" type="Extension.CultureBehaviorExtension, Extension, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null"/>
  </behaviorExtensions>
</extensions>

<serviceHostingEnvironment multipleSiteBindingsEnabled="true" /> 
```

我的问题是，当我通过网站托管的服务时，在下面的代码中，我无法在服务的 Hello 方法中获取 ar-SA 的文化值。我尽力在这里澄清这个问题。请让我知道还有什么需要澄清的。

```
[ServiceBehavior(InstanceContextMode = InstanceContextMode.Single, IncludeExceptionDetailInFaults = true)]
public class Server : IHelloWorld
{
    #region IHelloWorld Members

    public void Hello()
    {
    <--- problem here unable to get culture value of ar-SA here --->
        Console.WriteLine(string.Format("Hello world from the server in culture {0}", Thread.CurrentThread.CurrentCulture.Name));
    }

    public string HelloCulture()
    {

        string cultureName = Thread.CurrentThread.CurrentCulture.Name;
        Console.WriteLine("**************************hello**********************************");
        Console.WriteLine(cultureName);
        return cultureName;
    }

    #endregion
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T21:04:57.513

它不是一个真正的答案，为什么该特定代码不起作用，但为什么不直接发送文化字符串并将其设置在 WCF 服务上的方法中？

这就是我们通常这样做的方式，或者如果它是经过身份验证的用户，只需将其保存在用户身上，这样他们就可以切换到任何语言，而不管计算机配置如何。

# astyanax - astyanax 列切片查询如何做包含和排他的列切片

> ID：11994699
> 
> 赞同：1
> 
> 时间：2012-08-16T20:08:00.033
> 
> 标签：astyanax

我有一个复合列，我可以像这样在范围的两端进行包含和排除

```
 AnnotatedCompositeSerializer serializer = info1.getCompositeSerializer();
    CompositeRangeBuilder range = serializer.buildRange();
    if(fromInclusive)
        range = range.greaterThanEquals(from);
    else
        range = range.greaterThan(from);
    if(toInclusive)
        range = range.lessThanEquals(to);
    else
        range = range.lessThan(to);
    return range; 
```

到目前为止很好，但是当我有一个没有复合名称的普通列族，其中名称是整数、十进制或字符串时，我该如何做同样的事情。现在我只有

```
 ByteBufferRange range = new RangeBuilder().setStart(from).setEnd(to).setLimit(batchSize).build(); 
```

但没有包容/独占的方法。

这个怎么做？

**注意：整数和小数可以是二进制补码，因此它们可以以 fffff 开头，谁知道这些值有多长，因为它们可以像某人想要的那样大。**

谢谢，院长

# javascript - JQuery - 获取（0）未定义

> ID：11994701
> 
> 赞同：1
> 
> 时间：2012-08-16T20:08:08.070
> 
> 标签：javascript, jquery, get

我有这个 HTML 结构：

```
<div id="navigation">
    <div id="accordion">
        <!-- 1st header and pane -->
        <img src="horisontalTabsAccordion/images/button1.jpg" />
        <div style="width:200px; display:block"><h3>Apolonija, zubarska ordinacija</h3><p>Nesto pise malo vise malo manje :)</p></div>

        <!-- 2nd header and pane -->
        <img src="horisontalTabsAccordion/images/button2.jpg" />
        <div><h3>Apolonija, zubarska ordinacija</h3><p>Nesto pise malo vise malo manje :)</p></div>

        <!-- 3rd header and pane -->
        <img src="horisontalTabsAccordion/images/button3.jpg" />
        <div><h3>Apolonija, zubarska ordinacija</h3><p>Nesto pise malo vise malo manje :)</p></div>

        <!-- 4th header and pane -->
        <img src="horisontalTabsAccordion/images/button4.jpg" />
        <div><h3>Apolonija, zubarska ordinacija</h3><p>Nesto pise malo vise malo manje :)</p></div>
    </div>
    <div id="buttons">
        <a href="#" class="btn-prev"><div class="previous-icon"></div></a>
        <a href="#" class="btn-next"><div class="next-icon"></div></a>
    </div>
</div> 
```

我正在尝试添加按钮以激活当前选项卡的下一个和上一个选项卡。当前的图像元素具有“当前”类。

我写的 JS 有这种形式：

```
$(document).ready(function(e) {
var currentTab = $('#accordion').find('img.current');

$('.btn-prev').bind('click', function(){
    currentTab.prev('img').get(0).click();
    console.log("Previous");

    return false;
});

 $('.btn-next').bind('click', function(){
    currentTab.next('img').get(0).click();
    console.log("Next");

    return false;
}); 
```

});

我有错误说 get(0) 未定义。- 类型错误：currentTab.prev("img").get(0) 未定义

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T20:11:00.697

`.prev`**如果**它与选择器匹配，则获取前一个元素，而不是与选择**器**匹配的前一个元素。

试试这个：

```
currentTab.prevUntil('img').prev().get(0) 
```

`.next()`将需要与`.nextUntil`

您还应该进行一些检查，以防止在第一次出现错误时按上一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T20:11:48.293

你不需要调用 get(0) 因为 prev 得到一个或没有。

# ruby-on-rails - 带有authlogic的Rails 3.2.8返回“未定义的方法‘每个’

> ID：11994702
> 
> 赞同：1
> 
> 时间：2012-08-16T20:08:10.940
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, each, authlogic

我一直在尝试用我的 Rails 3.2.8 服务器设置 authlogic。我可以让一切正常工作，但每当我尝试查看我的用户名时，我都会收到此错误。

```
undefined method `each' for nil:NilClass 
```

我还没有看到为什么 Rails 应用程序会发生这种情况。如果我抓住一个旧的例子，它会起作用，但当我用最新版本设置它时就不行。有谁知道为什么会这样？这是导致问题的rails生成的特定代码，据我所知它应该可以工作。

```
<% @user_sessions.each do |user_session| %>
  <tr>
    <td><%= user_session.email %></td>
    <td><%= user_session.password %></td>
    <td><%= link_to 'Show', user_session %></td>
    <td><%= link_to 'Edit', edit_user_session_path(user_session) %></td>
    <td><%= link_to 'Destroy', user_session, method: :delete, data: { confirm: 'Are you sure?' } %></td>
  </tr>
<% end %> 
```

提前感谢您的帮助！

编辑：

这是设置@user_sessions 的地方，在我的 config/routes.rb 我有这个

```
resources :users, :user_sessions
match 'login' => 'user_sessions#new', :as => :login
match 'logout' => 'user_sessions#destroy', :as => :logout 
```

我的 models/user.rb 看起来像这样

```
class User < ActiveRecord::Base
  attr_accessible :email, :password, :password_confirmation
  acts_as_authentic
end 
```

这就是我的 UsersController 索引的样子。再次编辑：

```
def index
  @users = User.all 

  respond_to do |format|
    format.html # index.html.erb
    format.json { render json: @users }
  end
end 
```

这就是我的 UserSessionController 的样子：

```
 def index
   @user_sessions = UserSession.all

   respond_to do |format|
     format.html # index.html.erb
     format.json { render json: @user_sessions }
   end
 end 
```

注意：我已将其注释掉，认为这是一个问题。如果没有注释掉它会返回

```
undefined method `all' for UserSession:Class 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T20:34:30.473

[Read this](http://blog.eizesus.com/2010/01/find-all-online-users-with-authlogic-29-1-2010/)

Try

```
@user_sessions = User.logged_in 
```

# ios - 将 Cleaver（PhoneGap / Cordova 作为组件）视图添加到现有 ViewController 的视图层次结构中

> ID：11994711
> 
> 赞同：1
> 
> 时间：2012-08-16T20:08:45.393
> 
> 标签：ios, cordova

使用 PhoneGap / Cordova WebView 作为嵌入式组件的[文档建议这样做：](http://docs.phonegap.com/en/2.0.0/guide_cordova-webview_ios.md.html#Embedding%20Cordova%20WebView%20on%20iOS)

```
[myView addSubview:viewController.view]; 
```

嵌入视图。

视图属于多个控制器不是不好的做法吗？我认为这会导致诸如`-viewWillAppear:`或`-didReceiveMemoryWarning`..之类的消息出现问题。

任何人都可以为我确认进入实例化`CDVViewController`，获取其视图然后将其添加到我自己的控制器视图层次结构中是正确的方法吗？

# c++ - C++ getpeername 返回 0.0.0.0:0

> ID：11994712
> 
> 赞同：0
> 
> 时间：2012-08-16T20:08:53.430
> 
> 标签：c++, sockets, unix, ip, port

我正在尝试获取连接到服务器套接字的客户端 IP 和端口。我传递了以下函数客户端套接字文件描述符，但它返回 0.0.0.0:0 这让我发疯，但**有时**它返回类似 248.127.0.0:24870 的东西......我做错了什么？

PS返回地址长度为16，函数返回结果为0，无错误。

```
void    SocketServer::Log ( int socketFD , string message )
{
    struct sockaddr                     address;
    socklen_t                           addressLength;
    struct sockaddr_in*                 addressInternet;
    string                              ip;
    int                                 port;

    int result = getpeername ( socketFD , &address , &addressLength );
    cout << "Address length is " << addressLength << "     Return is " <<  result << "\n";
    addressInternet = (struct sockaddr_in*)&address;

    ip = inet_ntoa ( addressInternet->sin_addr );
    port = ntohs ( addressInternet->sin_port );

    cout << "Socket FD is " << socketFD << " " << ip << ":" << port << " " <<  message << "\n";
}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T20:27:07.263

`addressLength`打电话之前忘记设置了`getpeername`。你需要：

```
addressLength = sizeof(address); 
```

正如文档所说：

> 如果提供的缓冲区太小，返回的地址将被截断

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T20:33:37.517

您需要将完整`sockaddr_in`实例传递给`getpeername()`而不是`sockaddr`实例，并且需要`addressLength`在调用之前设置`getpeername()`：

```
void SocketServer::Log ( int socketFD , string message )       
{       
    struct sockaddr_in                  address = {0};       
    socklen_t                           addressLength = sizeof(address);       
    string                              ip;       
    int                                 port;       

    int result = getpeername ( socketFD , (struct sockaddr*) &address , &addressLength );       
    cout << "Address length is " << addressLength << "     Return is " <<  result << endl;       

    ip = inet_ntoa ( address.sin_addr );       
    port = ntohs ( address.sin_port );       

    cout << "Socket FD is " << socketFD << " " << ip << ":" << port << " " <<  message << endl;       
}; 
```

# c# - 修改 .NET 项目文件和引用属性

> ID：11994717
> 
> 赞同：3
> 
> 时间：2012-08-16T20:09:14.283
> 
> 标签：c#, .net, visual-studio, msbuild

我正在开发一个应用程序（C#），它将从多个`csproj`文件中读取项目属性/引用（和引用的属性），并修改它们的值。

`csproj`但是，在这些文件中找不到像“copy-local”这样的引用属性（单击引用时在属性资源管理器中看到的属性） 。有没有办法可以访问它们并以编程方式修改它们的值？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-16T21:58:00.833

一切都在 XML 项目文件中 - 没有其他任何地方可以提供这些信息，而且它必须在某个地方，对吗？

这是我为您快速完成的示例。`Copy Local`默认情况`true`下用于框架程序集。当您设置`Copy Local`为 时`false`，您将获得一个名为 include 的 XML 元素，该元素`private`本身被设置为 false。

在此示例`System.Core`中设置`Copy Local`= `false`。

```
<Reference Include="System.Core">
  <RequiredTargetFramework>3.5</RequiredTargetFramework>
  <Private>True</Private>
</Reference>
<Reference Include="System.Web" /> 
```

# php - 如何从数据库中检索 id 以进行信息删除

> ID：11994723
> 
> 赞同：1
> 
> 时间：2012-08-16T20:09:26.780
> 
> 标签：php, mysql

我正在尝试使用 post 方法从数据库中删除一些数据，但我无法下定决心如何检索元素的 id 以完成标记操作。这是php脚本=>

```
<?php
echo "<form action='index.php' name='del_file_f' id='del_file_f' method='post'>";
                            echo "<table>";
                                for ($i=0;$i<$get_r->num_rows;$i++){
                                    $get_row = $get_r->fetch_assoc();

                                    echo "<tr>";
                                        echo "<td><p>" . $get_row['f_title'] . "." . $get_row['file_ext'] . "</p></td>";
                                        echo "<td><a href='" . $config->host . "/" . constant("FILE_PLACE") . "/" . $get_row['doc_folder'] . "/" . $get_row['doc_name'] . "." . $get_row['file_ext'] . "'><div class='img_down'></div></a><input type='hidden' name='del_file_" . $i . "' value='" . $get_row['id'] . "'><a href='javascript: void(0)' class='alink' id='" . $i . "'><div class='img_del'></div></a></td>";
                                        echo "<td><p>" . $get_row['f_size'] . "</p></td>";
                                    echo "</tr>";
                                }
                            echo "</table>";
                        echo "</form>";
?> 
```

我正在尝试在隐藏元素中执行操作，由于行数未知，我只需要知道此名称即可完成此任务，任何想法如何获取此名称的信息？或者如何获取`$get_row['id']`每行已知的（它是mysql数据库中的行ID）？谢谢

**更新**

为了更简单，当从数据库中检索数据时，它看起来像这样 =>

文件名 | 下载 | 文件大小 | 删除图片 |

一个 | 一些链接 | 2mb | 锚|

ETC

我只是希望能够从此选择中删除所需的数据，为此我需要知道隐藏元素的 id ，其名称也是未知的。如果我将隐藏元素名称设置为固定名称，它将覆盖其他人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T20:46:09.167

改变

```
echo "<td><a href='" . $config->host . "/" . constant("FILE_PLACE") . "/" . $get_row['doc_folder'] . "/" . $get_row['doc_name'] . "." . $get_row['file_ext'] . "'><div class='img_down'></div></a><input type='hidden' name='del_file_" . $i . "' value='" . $get_row['id'] . "'><a href='javascript: void(0)' class='alink' id='" . $i . "'><div class='img_del'></div></a></td>"; 
```

到

```
echo "<td><a href='" . $config->host . "/" . constant("FILE_PLACE") . "/" . $get_row['doc_folder'] . "/" . $get_row['doc_name'] . "." . $get_row['file_ext'] . "'><div class='img_down'></div></a><input type='hidden' name='del_file[]' value='" . $get_row['id'] . "'><a href='javascript: void(0)' class='alink' id='" . $i . "'><div class='img_del'></div></a></td>"; 
```

那么你将有一个带有每个键的后数组 $_POST['del_file'] ，然后你可以像这样使用 foreach 循环：

```
foreach($_POST['del_file'] as $i){

//delete mysql using $i as the row id
} 
```

# visual-studio-2012 - 如何创建 InstallShield LE 项目来安装 Windows 服务？

> ID：11994725
> 
> 赞同：103
> 
> 时间：2012-08-16T20:09:28.730
> 
> 标签：visual-studio-2012, windows-services, installshield-le

我昨天在 MSDN 上发布 Visual Studio 2012 时下载了它。我注意到我们在 2010 年拥有的一些项目类型已经消失或不同。现在对我来说最大的不同是删除了 Windows Installer 项目。现在我们被迫使用 InstallShield LE（限量版）。这里的问题是我编写了大量的 Windows 服务，但看不到如何设置 InstallShield LE。看来我们（我的公司）将不得不投资购买专业版的许可证。

有没有人找到在 InstallShield LE 中安装服务的方法？使用 Windows Installer 项目时，您只需设置自定义操作。

* * *

## 回答 #1

> 赞同：161
> 
> 时间：2012-10-31T16:33:09.343

对于 Visual Studio 2012 和 InstallShield LE，请执行以下操作：

*   运行 InstallShield 项目助手并将服务的主要输出添加到应用程序文件部分。
*   完成项目助手后，双击设置项目第二步下的“文件”项。

![文件部分](../Images/6da9a39f2437383a7b2125250101836f.png)

*   右键单击服务的主要输出，然后转到属性。
*   单击“COM 和 .NET 设置”选项卡，并选中“安装程序类”复选框。 ![在此处输入图像描述](../Images/bdedc8323e24293e102c4523e63e7efc.png)
*   点击确定

现在，一旦您构建并运行安装，您的服务将显示在 Windows 服务管理单元中。

请注意，这假设您向服务项目添加了“项目安装程序”（右键单击服务设计表并单击“添加安装程序”）。我可以使用 Visual Studio 2012 / InstallShield LE 在 Windows 8 上确认这项工作。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-12-20T10:05:35.130

我最近用 Install Shield LE 安装了 VS 2012。起初，我在构建后不断收到 ISEXP -5036 内部服务器错误（这是在设置 ISLE 项目并通过 Install Shield Project Assistant 运行之后）。最终我发现它试图在 DVD-5 媒体类型中创建 MSI，这是它失败的地方。出于某种原因，从头开始重新创建解决方案以某种方式识别仅构建到有效的 CD_ROM 和 SingleImage 媒体类型。

无论如何要纠正 5036 错误，单击 VS 2012 中的构建选项卡（顶部菜单），选择配置管理器，您应该会看到在 DVD-5 配置上选择了您的 IS 设置文件。将其更改为 CD_ROM 并单击关闭。构建/重建后，它将完成，不会出现 IS 5036 错误。

![在此处输入图像描述](../Images/a6958e82d855ac811ea57d6b119a0a8a.png)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-12-18T23:06:39.113

虽然使用安装程序类复选框可能适用于某些情况，但您可能会遇到以下错误：

> 错误 1001。指定的服务已存在

[以下是此链接](http://kb.flexerasoftware.com/selfservice/viewContent.do?externalID=Q112469)中有关如何解决此问题的摘录：

> 对于错误：错误 1001。指定的服务已存在
> 
> 如果安装 .NET 服务的组件被错误地配置为“.NET 安装程序类”设置为是，则会发生此错误。安装 .NET 服务的方法是使用 Component\Advanced Settings\Services 视图，而不是“.NET Installer Class”设置。在 Component\Advanced Settings\Services 视图中进行定义会在 Windows Installer ServiceControl 和 ServiceInstall 表中创建条目。Windows Installer“InstallServices”操作使用这些条目来安装服务。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-10-28T22:03:29.260

如果您的项目是 .NET，那么请尝试将 ServiceProcessInstaller 类与 InstallShield LE 一起使用。

要让它与 InstallShield 一起工作，您必须进入 InstallShield“文件”树并右键单击您的文件。然后选中“COM 和 .NET 设置”选项卡上的“安装程序类”复选框。

我已经让它工作了，但是我在一些操作系统上遇到了问题，比如 Windows 2008R2。你的旅费可能会改变。

这是一个例子： http: [//www.codeproject.com/Articles/14353/Creating-a-Basic-Windows-Service-in-C](http://www.codeproject.com/Articles/14353/Creating-a-Basic-Windows-Service-in-C)

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-06-19T11:57:29.317

我遇到了各种各样的问题。

如下。

1.  InstallShield 需要很长时间才能下载
2.  注册过程很痛苦。
3.  配置选项令人困惑且过于复杂。
4.  该线程上接受的解决方案是一种 hack，它并不总是有效 - 请参阅文档中的 1001 - 基本上您需要通过付费专区才能获得正确的配置选项来安装 Windows 服务。

如其他地方所述，我的解决方案是放弃 InstallShield

![在此处输入图像描述](../Images/1e22c002f3c6797235489e797b83a978.png)

从那时起非常容易。

编辑：更新 - 从这里安装最新版本[https://wix.codeplex.com/releases/view/115492](https://wix.codeplex.com/releases/view/115492) for vs 2013 / 2015

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2014-12-10T20:08:56.337

Visual Studio 设置项目作为 Visual Studio 扩展回到 VS 2013。

[https://visualstudiogallery.msdn.microsoft.com/9abe329c-9bba-44a1-be59-0fbf6151054d](https://visualstudiogallery.msdn.microsoft.com/9abe329c-9bba-44a1-be59-0fbf6151054d)

请将您的解决方案和项目更新到 VS 2013。如果您仍在 VS 2010 中，最好直接升级到 VS 2013。

我对 Installsheild LE 的体验是它非常古怪，但一旦你弄清楚了技巧，它就会更容易使用。但是，我认为限量版是微软和 Flexera 销售全功能版的一种方式。换句话说，首先我们为 Visual Studio 支付了微软很多钱，然后他们的合作伙伴（犯罪）为 Installsheild 支付了更多的钱。糟糕的策略没有奏效，因为他们不得不在 VS 2013 中恢复设置项目。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-08-17T01:18:29.647

我写过关于这个主题的文章：

[使用 Windows Installer XML 增强 InstallShield - Windows 服务](http://blog.deploymentengineering.com/2011/01/augmenting-installshield-using-windows_19.html)

基本上，您使用 WiX 创建一个合并模块来封装服务，然后将其添加到您的 installshield 项目中。（请务必关联到 INSTALLDIR 目录以确保您的文件位于您期望的位置）。在 VM 上构建和测试。小菜一碟。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2013-04-29T08:56:18.717

我正在使用 VS2012 和 Installshield LE 春季版。我不必使用 Wix。

如果您遇到错误“无法创建用于 InstallUtilLib.dll 的 _isconfig.xml”，请在安装项目文件夹中创建一个与安装项目同名的文件夹。

归功于[http://community.flexerasoftware.com/showthread.php?165929-Could-not-create-_isconfig-xml-for-use-with-InstallUtilLib-dll](http://community.flexerasoftware.com/showthread.php?165929-Could-not-create-_isconfig-xml-for-use-with-InstallUtilLib-dll)

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2013-06-06T16:25:34.197

我只是在找到答案中提到的添加安装程序的位置时遇到了一些问题。所以这就是方法。

在您的 Windows 服务项目中双击您的服务类 一个空白屏幕，显示文本“要将组件添加到您的类，从工具箱中拖动它们并使用属性窗口设置它们的属性...” 右键单击​​链接以外的任何位置并选择“添加安装程序”

拜拜

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-09-19T21:17:17.167

请记住，如果您打算稍后创建该设置的升级，则上述所有说明都对您没有帮助。InstallShiled LE 在升级时无法停止正在运行的服务。您不能从 Window Service Installer -> BeforeInstall 事件中执行此操作。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-09-25T19:20:53.593

想把这个放在这里；

在 VS 2015 上，执行此操作时，我反复安装时遇到 1001 错误。

此页面上的答案解释说，在**较新的版本（2012 年以后的任何版本）**上，显然您需要明确保留**安装程序类**选项**未选中**，然后在安装程序项目的第 3 步下的“服务”部分下添加您的 Windows 服务：

[安装自定义 Windows 服务时出现错误 1001](https://stackoverflow.com/questions/32949860/error-1001-when-installing-custom-windows-service)

# javascript - 获取当前元素的索引并更改他的样式

> ID：11994729
> 
> 赞同：2
> 
> 时间：2012-08-16T20:09:39.120
> 
> 标签：javascript

我有一个函数，其目标是处理 onClick 事件。

因此，我们有例如 4 个 Span 元素和 4 个 Div 元素。Spans 是选项卡按钮，我想“打开”那些 Div。

第一个 Span onClick 将（打开）更改“block”中第一个 Div 的 style.display，从“none”更改为下一个 Span。

这段代码效果很好，但它只改变了元素的设计。

```
function activateSup(s) {
  var workTable = s.parentNode.parentNode.parentNode.parentNode.parentNode;
  var spans = workTable.getElementsByTagName("span");
  var supDivs = workTable.getElementsByClassName("supDiv");

  for (var i = 0; i < spans.length; i++) {
    spans[i].style.backgroundColor = "";
    spans[i].style.border = "";
  }

  s.style.backgroundColor = "#5eac58";
  s.style.border = "2px solid #336633";
} 
```

我试图将下面的代码添加到我的函数中以实现我想要的，但它不起作用。

```
 var getIndex = function(s) {
    for (var index = 0; s != s.parentNode.childNodes[index]; index++);
    return index;
  }
  for (var d = 0; d < supDivs.length; d++) {
    if (getIndex == d) {
        supDivs[d].style.display = "block";
    }
    else {
        supDivs[d].style.display = "none";
    }
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T20:17:03.473

我不确定您要做什么，但我注意到的一件事是：

```
var getIndex = function(s) { /* .... */ }

for (var d = 0; d < supDivs.length; d++) {
    if (getIndex == d) {
        supDivs[d].style.display = "block";
    }
    else { /* ... */ }
} 
```

此代码与 进行比较`getIndex`，`d`这意味着它将整数 ( `d`) 与 function进行比较`getIndex`，而不是函数调用的**结果**`getIndex(spans[d])`（它是一个整数，如`d`)。

但我认为你真正想做的是获取点击的索引，`<span>`这样你就可以显示`<div>`匹配索引（并隐藏其余部分）。为此，可以像这样更改代码：

```
function activateSup(s) {
    var workTable = s.parentNode.parentNode.parentNode.parentNode.parentNode;
    var spans = workTable.getElementsByTagName("span");
    var supDivs = workTable.getElementsByClassName("supDiv");
    var index;    

    for (var i = 0; i < spans.length; i++) {
        spans[i].style.backgroundColor = "";
        spans[i].style.border = "";

        if (s == spans[i])
            index = i;                    
    }

    s.style.backgroundColor = "#5eac58";
    s.style.border = "2px solid #336633";

    for (var d = 0; d < supDivs.length; d++) {
        if (index == d) {
            supDivs[d].style.display = "block";
        } else {
            supDivs[d].style.display = "none";
        }
    }
} 
```

而不是 function `getIndex`，这只是`index`在第一个`for`循环中保存正确的。

可以对这段代码进行更多改进，比如重写它，这样你就不需要那么丑陋的东西了`s.parentNode.parentNode.parentNode.parentNode.parentNode`，并且使用 CSS 类而不是手动设置样式。但我会把它留给读者。

# apache - 使用 htaccess RewriteRule 复制站点

> ID：11994730
> 
> 赞同：2
> 
> 时间：2012-08-16T20:09:42.410
> 
> 标签：apache, .htaccess, mod-rewrite

我是 RewriteRule 的新手，所以我在这里寻求帮助。我有一个想要复制的网站。

当有人注册该站点时，他们会创建自己的复制站点，例如：mydomain.com/TheirWebsiteName

因此，当有人访问他们的网址时：mydomain.com/TheirWebsiteName 我希望我的服务器将其处理为 mydomain.com/index.php?aid=TheirWebsiteName

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T23:18:40.003

将其放入文档根目录的 htaccess 文件中：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^([^/]+)/?$ /index.php?aid=$1 [L,QSA] 
```

# actionscript-3 - 您如何在不是 UIComponent 的类中引用父应用程序？

> ID：11994737
> 
> 赞同：2
> 
> 时间：2012-08-16T20:10:16.810
> 
> 标签：actionscript-3, flex4, flash-builder

当我的 Flex 应用程序中的控制器收到 http 错误时，我需要显示一个错误，然后将用户返回到登录页面。如果我在 UIComponent 中发现该错误，我可以使用：

```
 this.parentApplication.currentState = "login"; 
```

但是我如何从一个不是 UIComponent 的类中做到这一点？

谢谢。

编辑：我知道我可以发送一个自定义事件并在应用程序的其他地方监听它；我只是想知道是否有更直接的方法可以做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T21:21:46.217

您可以从应用程序的任何位置引用应用程序对象`mx.core.FlexGlobals.topLevelApplication`。

[请参阅有关应用程序对象](http://help.adobe.com/en_US/flex/using/WS2db454920e96a9e51e63e3d11c0bf69084-7e3a.html)的文档

# javascript - 利用 HTML5 中的前景和背景画布

> ID：11994740
> 
> 赞同：1
> 
> 时间：2012-08-16T20:10:21.603
> 
> 标签：javascript, html, canvas

现在我有一个大画布，所有的东西都被画出来了。画布直接在JS文件中创建：

```
 var canvas = document.createElement ("canvas");
 var ctx = canvas.getContext("2d");
 canvas.width = document.width;
 canvas.height = document.height;
 document.body.appendChild(canvas); 
```

它根据浏览器窗口调整自身大小。

我将渐变背景与所有其他元素一起绘制到一个画布上。背景的颜色是在每次游戏模式更改时随机生成的（例如，当主菜单切换到游戏时，然后是关卡结束屏幕等）。目前我正在将这些绘制到画布上，如下所示：

```
var grad1 = ctx.createRadialGradient(canvas.width / 2, canvas.height / 2, 0, canvas.width / 2, canvas.height / 2, 500);
grad1.addColorStop(0, bgGradStop1);
grad1.addColorStop(1, bgGradStop2);

ctx.fillStyle = grad1;
ctx.fillRect(0, 0, canvas.width, canvas.height); 
```

我读了很多次，有一个单独的背景画布对性能更好。我需要做些什么才能使其有效吗？或者我可以简单地创建另一个画布并使用相同的确切代码绘制背景，仅修改为使用另一个画布，如下所示：

```
var grad1 = ctxBg.createRadialGradient(canvasBg.width / 2, canvasBg.height / 2, 0, canvasBg.width / 2, canvasBg.height / 2, 500);
grad1.addColorStop(0, bgGradStop1);
grad1.addColorStop(1, bgGradStop2);

ctxBg.fillStyle = grad1;
ctxBg.fillRect(0, 0, canvasBg.width, canvasBg.height); 
```

或者获得任何性能优势是否涉及使用第二个画布的一些完全不同的方法？

此外，如果真的只是在不同的画布上做完全相同的事情，那么例如在其他实体移动时将 HUD 文本移动到自己的画布是否有任何好处？甚至将各种类型的实体分离到自己的画布上？多幅画布的好处实际上能延伸多远？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T20:55:08.457

> 或者获得任何性能优势是否涉及使用第二个画布的一些完全不同的方法？

您对如何做到这一点有正确的想法，尽管我认为您的情况不需要第二张画布。

从性能的角度来看，重要的是您不希望继续构建和填充渐变。如果您在绘制循环中所做的一切是：

```
ctx.fillStyle = grad1;
ctx.fillRect(0, 0, canvas.width, canvas.height); 
```

那么你在这里应该很膨胀。我不认为在背景中有第二个画布会在那之后对你有很大帮助。可能会有*轻微*的性能提升，但如果您不需要，谁愿意跟踪额外的 DOM 元素？

测试在主画布后面有第二个画布的性能有点困难，但不是在 DOM 中有两个大画布，一种类似的替代方法是在内存画布上绘制渐变并始终调用`ctx.drawImage(inMemCan, 0, 0);`而不是设置渐变和画它。众所周知，绘制图像的速度很快，并且以这种方式使用两个画布*可能*接近您对两个页面上画布所期望的速度（希望它会更快）。

因此，我们可以测试从内存画布绘制渐变到主画布与绘制普通的旧渐变。这是一个使用大画布的简单测试：

[http://jsperf.com/gradient-vs-immemcan](http://jsperf.com/gradient-vs-immemcan)

他们看起来相当平等。如果这件事是您背景中唯一的事情，我不会担心。可能有更大的性能鱼供您先炒。

当相对复杂的背景很少更新但独立于前景时，我会保留多个画布的好处。如果你的背景是用 30 个渐变和一些路径制作的，那么使用第二个画布（或内存中的画布来缓存图像）会给你带来相当大的提升。

* * *

> 它根据浏览器窗口调整自身大小。

只是提醒一下，如果您将来想研究它，[全屏 API](https://developer.mozilla.org/en-US/docs/DOM/Using_full-screen_mode)在 webkit 和 firefox 中运行良好。

# openni - _xnForceShutdown openni 符号未找到

> ID：11994741
> 
> 赞同：0
> 
> 时间：2012-08-16T20:10:22.123
> 
> 标签：openni

我一直试图让 OpenNI 在我的 Mac OS X 10.7 上工作。我从 openni.org 安装了 OpenNI、NITE 和 Sensor 的最新不稳定二进制文件。OpenNI 中的（预编译）示例运行良好，但是一旦我自己编写了一些东西，它就会开始失败。例如，见下文：

架构 x86_64 的未定义符号：“_xnForceShutdown”，引用自：sample.o 中的 xn::Context::SetHandle(XnContext*) “_xnContextUnregisterFromShutdown”，引用自：sample.o 中的 xn::Context::SetHandle(XnContext*) "_xnContextRelease"，引用自：xn::Context::SetHandle(XnContext*) in sample.o "_xnContextAddRef"，引用自：xn::Context::SetHandle(XnContext*) in sample.o "_xnContextRegisterForShutdown"，引用自: xn::Context::SetHandle(XnContext*) in sample.ol ld: 未找到架构 x86_64 collect2 的符号: ld 返回 1 退出状态 make: *** [AsusCamera] 错误 1

我的代码如下：

```
 #include "XnOpenNI.h" 
    #include "XnCppWrapper.h" 

    using namespace xn; 
    extern "C" int printf(const char *, ...); 

    int main() {
            Context context; 
            printf("hello world\n"); 
            context.Release(); 
            return 1; 
    }; 
```

请帮我。我已经尝试过多次重新安装库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T08:40:09.357

我刚刚使用 Qt Creator 和 Xcode 在 OSX（尽管是 10.6.8）上编译了你的代码，它可以工作。这`undefined symbols`通常意味着您没有链接到头文件引用的库（dylib），因此将 libOpenNI.dylib 链接到您的项目。

在 Qt Creator 我有这个设置：

```
QT       += core
QT       -= gui

TARGET = niTest
CONFIG   += console
CONFIG   -= app_bundle

TEMPLATE = app

SOURCES += main.cpp
INCLUDEPATH += /usr/include/ni/
LIBS += /usr/lib/libOpenNI.dylib 
```

在 XCode 中，我将 libOpenNI.dylib 拖到项目中并勾选“将项目复制到目标组的文件夹（如果需要）”，将`/usr/include/ni/`路径添加到标题搜索路径中。请注意，根据您最终在 OpenNI/NITE 中使用的功能，您还需要链接到其他库（例如 libnimCodecs、libXnCore 等）。

# maven - 找不到 Eclipse comands.jar 3.3.0 依赖项

> ID：11994744
> 
> 赞同：0
> 
> 时间：2012-08-16T20:10:45.933
> 
> 标签：maven, build, wso2

我正在尝试从源代码构建 WSO2 Carbon，并且 org.apache.axis2:axis2.eclipse.codegen.plugin:bundle:1.6.1-wso2v5 的工件无法构建，因为找不到 eclipse 依赖项：org.eclipse。核心：命令：jar：3.3.0

我正在尝试解决与此处相关的 OpenID 中的“错误文件描述符”问题[Unable to configure WSO2 identity server for openID](https://stackoverflow.com/questions/9600392/unable-to-configure-wso2-identity-server-for-openid)相关的问题。该解决方案建议进行代码修复，但我无法从源代码构建。

有人可以用干净版本的 commands.jar 3.3.0 指向我的 Maven 存储库吗？

谢谢！

# c# - 每秒更新 DataGridView

> ID：11994745
> 
> 赞同：0
> 
> 时间：2012-08-16T20:10:47.687
> 
> 标签：c#, datagridview

使用 datagridview 在我的应用程序中有一些巨大的滞后。我需要每秒用状态消息更新它，datagridview 中有大约 3000 行。

我目前用来更新的代码是：

```
 private void UpdateProxies()
    {
        Invoke(new MethodInvoker(
                       delegate
                       {
                           this.dgvProxies.DoubleBuffered(true);
                           this.dgvProxies.SuspendLayout();
                           this.dgvProxies.DataSource = null;
                           this.dgvProxies.DataSource = this.Proxies;
                           this.dgvProxies.ResumeLayout();
                           this.dgvProxies.Refresh();
                       }
                       ));
    } 
```

我试图删除 autoresize 属性并启用双缓冲.. 仍然非常*滞后*

有什么想法可以加快速度吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T20:16:47.433

我认为这样做是不可能的。3k 行是大量的工作。我建议你尝试改变方法。

*   仅显示用户当前正在查看的行以及一些用于滚动的缓冲区。用户滚动时进行动态加载。
*   进行增量更新。检测数据更改并添加新行或插入它，或删除或根据数据更改执行您需要执行的任何操作。避免将所有数据绑定到 datagridview。

# asp.net - 根据没有直接 FK 的不同表中的数据视图的值填充网格视图时出错

> ID：11994746
> 
> 赞同：0
> 
> 时间：2012-08-16T20:10:47.727
> 
> 标签：asp.net, sql, gridview, dataview

我有这些表：

```
TABLE_DIRECTOR
-directorID
-name
-adres
-birthDate
-yearsExperience

TABLE_FILM
-filmID
-directorID
-filmstudioID
-title
-budget
-filmstudioName
-directorName

TABLE_FILMSTUDIO
-filmstudioID
-name
-website
-foundingDate
-numberOfBuildings 
```

我要做的是`detailsview`用所有`filmdirectors`. 我也有一个`gridview`里面装满了所有工作过`filmstudio`的`directors`东西。

为了填补这一点`gridview`，我将以下代码放入我的`TABLE_FLMSTUDIO_TABLEADAPTER`：

```
SELECT TABLE_FILMSTUDIO.filmstudioID, TABLE_FILMSTUDIO.name,
  TABLE_FILMSTUDIO.website, TABLE_FILMSTUDIO.foundingDate,
  TABLE_FILMSTUDIO.numberOfBuildings
FROM TABLE_FILMSTUDIO INNER JOIN
  TABLE_FILM ON TABLE_FILMSTUDIO.filmstudioID = TABLE_FILM.filmstudioID
WHERE (TABLE_FILM.directorID = @directorID) 
```

但是，当我运行页面时，这给了我以下错误

```
Failed to enable constraints. One or more rows contain values
violating non-null, unique, or foreign-key constraints. 
```

有人有想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T20:23:06.370

第一件事：TABLE_FILM -filmID -directorID -title -budget -filmstudioName -directorName 不包含filmstudioID，但您在INNER JOIN 中使用它作为TABLE_FILM.filmstudioID。

其次，错误表明您的一个表包含重复数据。（违反外键）

# magento - 洋红产品

> ID：11994748
> 
> 赞同：0
> 
> 时间：2012-08-16T20:10:54.317
> 
> 标签：magento

我已经在磁力论坛上发布了这个问题，但两周内没有发布任何内容，所以我将在这里发布，希望能得到更多的见解

“我一直在浏览论坛并研究如何更改一个产品的视图，我在论坛上找到了一个很好的帖子，让我可以随意更改视图，但我的页面似乎是由两个单独的文件创建的。一个在 app/design/frontend/base/default/template/catalog/product 中调用 view.phtml，另一个在同一路径中调用 default.phtml，就在另外两个目录 view/type/ 下。我需要修改的代码是默认的.phtml 但是当我这样做并将其设置为显示时，它会停止显示页面的另一半或 view.phtml 部分。

我在用 ....

```
<reference name="product.info">
<action method="setTemplate">              
<template>catalog/product/view/type/default1.phtml</template></action>
</reference> 
```

...在后端产品的自定义布局部分。但这仅显示页面的大小部分，而不是 view.phtml 输出的名称/描述/图片女巫

那么如何让 view.phtml 显示新的 default1.phtml

如果我尝试......

```
<reference name="product.info">
<action method="setTemplate"> 
<template>catalog/product/view.phtml</template>
</action>
</reference> 
```

它可以工作，但不会在 size 部分显示 default1.phtml。这一切都是因为我需要展示 2 张不同尺寸的图表，一张用于男性，一张用于女性。您可以通过访问神秘屋服装网并导航到女士产品然后是男士产品来查看我的问题，您会看到男士产品仍然链接到女士尺码表。

如何修复 view.phtml 以使其链接到 default1 而不是 default？我意识到我需要制作一个重复的 view.phtml 但我找不到这两个文件之间的连接是我的 view.phtml...

```
<?php $_helper = $this->helper('catalog/output'); ?>
<?php $_product = $this->getProduct(); ?>
<script type="text/javascript">
var optionsPrice = new Product.OptionsPrice(<?php echo $this->getJsonConfig() ?>);
</script>
<div id="messages_product_view"><?php echo $this->getMessagesBlock()->getGroupedHtml() ?>    </div>
<div class="product-view">
<div class="product-essential">
<form action="<?php echo $this->getSubmitUrl($_product) ?>" method="post" id="product_addtocart_form"<?php if($_product->getOptions()): ?> enctype="multipart/form-data"<?php endif; ?>>
    <div class="no-display">
        <input type="hidden" name="product" value="<?php echo $_product->getId() ?>" />
        <input type="hidden" name="related_product" id="related-products-field" value="" />
    </div>

    <div class="product-shop">
        <div class="product-name">
            <h1><?php echo $_helper->productAttribute($_product, $_product->getName(), 'name') ?></h1>
        </div>

        <?php if ($this->canEmailToFriend()): ?>
            <p class="email-friend"><a href="<?php echo $this->helper('catalog/product')->getEmailToFriendUrl($_product) ?>"><?php echo $this->__('Email to a Friend') ?></a></p>
        <?php endif; ?>

        <?php echo $this->getReviewsSummaryHtml($_product, false, true)?>
        <?php echo $this->getChildHtml('alert_urls') ?>
        <?php echo $this->getChildHtml('product_type_data') ?>
        <?php echo $this->getTierPriceHtml() ?>
        <?php echo $this->getChildHtml('extrahint') ?>

        <?php if (!$this->hasOptions()):?>
            <div class="add-to-box">
                <?php if($_product->isSaleable()): ?>
                    <?php echo $this->getChildHtml('addtocart') ?>
                    <?php if( $this->helper('wishlist')->isAllow() || $_compareUrl=$this->helper('catalog/product_compare')->getAddUrl($_product)): ?>
                        <span class="or"><?php echo $this->__('OR') ?></span>
                    <?php endif; ?>
                <?php endif; ?>
                <?php echo $this->getChildHtml('addto') ?>
            </div>
            <?php echo $this->getChildHtml('extra_buttons') ?>
        <?php endif; ?>

        <?php if ($_product->getShortDescription()):?>
            <div class="short-description">
                <h2><?php echo $this->__('Quick Overview') ?></h2>
                <div class="std"><?php echo $_helper->productAttribute($_product, nl2br($_product->getShortDescription()), 'short_description') ?></div>
            </div>
        <?php endif;?>

        <?php echo $this->getChildHtml('other');?>

        <?php if ($_product->isSaleable() && $this->hasOptions()):?>
            <?php echo $this->getChildChildHtml('container1', '', true, true) ?>
        <?php endif;?>

    </div>

    <div class="product-img-box">
        <?php echo $this->getChildHtml('media') ?>
    </div>

    <div class="clearer"></div>
    <?php if ($_product->isSaleable() && $this->hasOptions()):?>
        <?php echo $this->getChildChildHtml('container2', '', true, true) ?>
    <?php endif;?>
</form>
<script type="text/javascript">
//<![CDATA[
    var productAddToCartForm = new VarienForm('product_addtocart_form');
    productAddToCartForm.submit = function(button, url) {
        if (this.validator.validate()) {
            var form = this.form;
            var oldUrl = form.action;

            if (url) {
               form.action = url;
            }
            var e = null;
            try {
                this.form.submit();
            } catch (e) {
            }
            this.form.action = oldUrl;
            if (e) {
                throw e;
            }

            if (button && button != 'undefined') {
                button.disabled = true;
            }
        }
    }.bind(productAddToCartForm);

    productAddToCartForm.submitLight = function(button, url){
        if(this.validator) {
            var nv = Validation.methods;
            delete Validation.methods['required-entry'];
            delete Validation.methods['validate-one-required'];
            delete Validation.methods['validate-one-required-by-name'];
            if (this.validator.validate()) {
                if (url) {
                    this.form.action = url;
                }
                this.form.submit();
            }
            Object.extend(Validation.methods, nv);
        }
    }.bind(productAddToCartForm);
//]]>
</script>
</div>

<div class="product-collateral">
<?php foreach ($this->getChildGroup('detailed_info', 'getChildHtml') as $alias => $html):?>
    <div class="box-collateral <?php echo "box-{$alias}"?>">
        <?php if ($title = $this->getChildData($alias, 'title')):?>
        <h2><?php echo $this->escapeHtml($title); ?></h2>
        <?php endif;?>
        <?php echo $html; ?>
    </div>
<?php endforeach;?>
    <?php echo $this->getChildHtml('upsell_products') ?>
    <?php echo $this->getChildHtml('product_additional_data') ?>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T23:11:02.687

通过启用“调试模式”可以帮助您找到在哪个页面上使用了哪些块。您可以通过转到管理面板并转到系统->配置来启用它，然后在左侧导航中将“当前配置范围”从“默认配置”切换到“您的商店名称 Web Store”。

页面将自动刷新，然后在高级部分的左侧导航底部单击开发人员，然后在手风琴的调试部分中，您将看到“模板路径提示”和“将块名称添加到提示”将每个选择字段切换到“是”，然后单击页面右上角的保存配置按钮。

一旦调试模式处于活动状态，您的所有块都将以红色标出，并标有模板位置和块名称引用。希望这对将来有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T17:48:03.530

好的，所以我找到了包含我的尺码表块的代码

```
 <?php echo $this->getChildHtml('product_type_data') ?> 
```

当我将其注释掉时，我得到了我期望的结果并且我的尺寸图表消失了在 Catalog.xml 中我找到了我认为的代码（有一些 catalog.xml 文件有没有办法确保我有正确的？ )

无论如何，我在那里找到的代码是......

```
<PRODUCT_TYPE_simple translate="label" module="catalog">
        <label>Catalog Product View (Simple)</label>
        <reference name="product.info">
            <block type="catalog/product_view_type_simple" name="product.info.simple"as="product_type_data" template="catalog/product/view/type/default.phtml">
            <block type="core/text_list" name="product.info.simple.extra" as="product_type_data_extra" translate="label">
                <label>Product Extra Info</label>
            </block>
        </block>
    </reference>
</PRODUCT_TYPE_simple>
<PRODUCT_TYPE_configurable translate="label" module="catalog">
    <label>Catalog Product View (Configurable)</label>
    <reference name="product.info">
        <block type="catalog/product_view_type_configurable" name="product.info.configurable" as="product_type_data" template="catalog/product/view/type/default.phtml">
            <block type="core/text_list" name="product.info.configurable.extra" as="product_type_data_extra" translate="label">
                <label>Product Extra Info</label>
            </block>
        </block>
    </reference>
    <reference name="product.info.options.wrapper">
        <block type="catalog/product_view_type_configurable" name="product.info.options.configurable" as="options_configurable" before="-" template="catalog/product/view/type/options/configurable.phtml"/>
    </reference>
</PRODUCT_TYPE_configurable> 
```

我添加的

```
<PRODUCT_TYPE_simple translate="label" module="catalog">
    <label>Catalog Product View (Simple)</label>
    <reference name="product.info">
        <block type="catalog/product_view_type_simple" name="product.info.simple" as="product_type_data1" template="catalog/product/view/type/default1.phtml">
            <block type="core/text_list" name="product.info.simple.extra" as="product_type_data_extra" translate="label">
                <label>Product Extra Info</label>
            </block>
        </block>
    </reference>
</PRODUCT_TYPE_simple> 
```

和

```
<PRODUCT_TYPE_configurable translate="label" module="catalog">
    <label>Catalog Product View (Configurable)</label>
    <reference name="product.info">
        <block type="catalog/product_view_type_configurable" name="product.info.configurable" as="product_type_data1" template="catalog/product/view/type/default1.phtml">
            <block type="core/text_list" name="product.info.configurable.extra" as="product_type_data_extra" translate="label">
                <label>Product Extra Info</label>
            </block>
        </block>
    </reference>
    <reference name="product.info.options.wrapper">
        <block type="catalog/product_view_type_configurable" name="product.info.options.configurable" as="options_configurable" before="-" template="catalog/product/view/type/options/configurable.phtml"/>
    </reference>
</PRODUCT_TYPE_configurable> 
```

然后我将调用 php 更改为...

```
<?php echo $this->getChildHtml('product_type_data1') ?> 
```

但是我在翻译中遗漏了一些东西

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T20:39:09.400

它不起作用的原因是因为 view.phtml 有点像产品视图页面的父块，因此当您禁用它时，它只显示尺寸部分，而当您启用它时，您会得到错误的尺寸部分。

您需要做的是在 view.phtml 中告诉它新的尺寸模板。

这是通过首先创建一个块，然后为其分配一个模板，然后在您的 view.phtml 文件中调用它来完成的

最简单的方法是找出第一个尺寸块的名称，然后在 xml 中查找并复制它并将其名称更改为唯一的名称，并将模板更改为新文件。

然后进入 view.phtml 文件并按名称调用要显示的块。

在您的情况下，我认为需要更改以下几行：

```
<?php if ($_product->isSaleable() && $this->hasOptions()):?>
    <?php echo $this->getChildChildHtml('container2', '', true, true) ?>
<?php endif;?> 
```

它应该是：

```
<?php if ($_product->isSaleable() && $this->hasOptions()):?>
    <?php echo $this->getChildHtml('your_new_block_name') ?>
<?php endif;?> 
```

# ruby-on-rails - Haml：自动换行时避免多余的空格

> ID：11994751
> 
> 赞同：1
> 
> 时间：2012-08-16T20:11:10.047
> 
> 标签：ruby-on-rails, haml

当我在 Rails 视图中使用 Haml 时，自动换行（尤其是添加斜体或强效果）显示会呈现为空格。例如：

```
%p
    Click on "
    %em New Product
    " to add a product in your catalog. 
```

显示`Click on " New Product " to add a product in your catalog.`在引号内包含额外空格的内容。

任何想法？提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T20:15:59.603

这样写。

```
%p
  Click on "
  %em> New Product
  " to add a product in your catalog. 
```

[更多](http://haml.info/docs/yardoc/file.HAML_REFERENCE.html#whitespace_removal__and_)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-18T17:41:18.257

另一个更具可读性的解决方案：

```
%p
  Click on "<em>New Product</em>" to add a product in your catalog. 
```

# symfony - 如何在表单中添加非持久字段？

> ID：11994753
> 
> 赞同：3
> 
> 时间：2012-08-16T20:11:13.583
> 
> 标签：symfony, doctrine-orm, symfony-sonata, sonata-admin

有 SonataAdminBundle 和`User`实体。它的管理服务：

```
protected function configureFormFields(FormMapper $formMapper)
{
    $formMapper
        ->add('name')
        // ...
        ->add('send_greeting', 'checkbox')
    ;
} 
```

字段`send_greeting`与`User`实体无关。它仅用于管理服务（取决于我们在保存用户后是否发送电子邮件的值）。那么如何在不绑定实体的情况下将此字段添加到表单中呢？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-07-23T14:50:58.897

对于 symfony 2.1 及更高版本，请`mapped`使用`property_path`. [（Symfony2 表格参考）](http://symfony.com/doc/current/reference/forms/types/form.html#mapped)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-16T21:11:45.087

您可以将`property_path`选项设置为`false`. 例如

```
->add('send_greeting', 'checkbox',array(
   'property_path' => false
))
... 
```

# java - 尽管授予了 su 权限，但访问数据/应用程序失败

> ID：11994757
> 
> 赞同：0
> 
> 时间：2012-08-16T20:11:23.407
> 
> 标签：java, android, permissions, root

目前，我正在尝试通过创建一个基于字符串数组的 ListView 来快速了解手机上所有已安装的应用程序，该字符串数组包含 data/app 和 system/app 目录中包含的所有文件：

我的代码如下：

```
public void onCreate(Bundle icicle) {
super.onCreate(icicle);

Process p;
try {
   // Preform su to get root privledges
   p = Runtime.getRuntime().exec("su"); 

   // Attempt to write a file to a root-only
   DataOutputStream os = new DataOutputStream(p.getOutputStream());
   os.writeBytes("echo \"Do I have root?\" >/system/sd/temporary.txt\n");

   // Close the terminal
   os.writeBytes("exit\n");
   os.flush();
   try {
      p.waitFor();
           if (p.exitValue() != 255) {
                File dir = new File("./system/app");
                File dir2 = new File("./data/app");
                String[] values = this.both(dir.list(), dir2.list());
                ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
                    android.R.layout.simple_list_item_1, values);
                setListAdapter(adapter);
           }
           else {
               Toast.makeText(this, "not root", Toast.LENGTH_LONG).show();
           }
   } catch (InterruptedException e) {
       Toast.makeText(this, "not root", Toast.LENGTH_LONG).show();
   }
} catch (IOException e) {
    Toast.makeText(this, "not root", Toast.LENGTH_LONG).show();
} 
```

}

（取自[http://www.stealthcopter.com/blog/2010/01/android-requesting-root-access-in-your-app/](http://www.stealthcopter.com/blog/2010/01/android-requesting-root-access-in-your-app/)）

这两种方法如下所示：

```
 private String[] both(String[] first, String[] second) {
    List<String> both = new ArrayList<String>(first.length + second.length);
    Collections.addAll(both, first);
    Collections.addAll(both, second);
    return both.toArray(new String[both.size()]);
  } 
```

但是，我的应用程序不断崩溃。通过删除代码的相应部分，我能够找出原因确实是“new File(”./data/app");” 部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T22:35:36.583

通过运行

> p = Runtime.getRuntime().exec("su");

您正在创建一个具有 root 访问权限的新进程。但是您的应用程序在不同的进程中运行。因此，您的应用程序将没有 root 访问权限。

一种方法是在 /data/app 上使用 chmod 来授予您的应用程序权限，然后在 dir.list() 结束后将其恢复为原始状态。

```
os.writeBytes("chmod 744 \data\app \n");
os.flush(); 
```

# java - 尝试启动本地服务器时无法初始化 org.eclipse.wst.server.ui.internal.provisional.UIDecoratorManager 错误

> ID：11994758
> 
> 赞同：1
> 
> 时间：2012-08-16T20:11:28.820
> 
> 标签：java, eclipse, jboss, webserver

日食 3.5.0

我正在添加一个 JBoss 4.3.0 服务器，我已经正确配置了它，但是当我点击它查看它的配置时，我收到下一个错误：

从插件调用代码时出现问题：“org.eclipse.jface”。

```
java.lang.NoClassDefFoundError: Could not initialize class org.eclipse.wst.server.ui.internal.provisional.UIDecoratorManager
at org.eclipse.wst.server.ui.internal.cnf.ServerDecorator.getStateImage(ServerDecorator.java:142)
at org.eclipse.wst.server.ui.internal.cnf.ServerDecorator.getServerStateImage(ServerDecorator.java:137)
at org.eclipse.wst.server.ui.internal.cnf.ServerLabelProvider.getImage(ServerLabelProvider.java:76)
at org.eclipse.ui.internal.navigator.extensions.SafeDelegateCommonLabelProvider.getImage(SafeDelegateCommonLabelProvider.java:106)
at org.eclipse.ui.internal.navigator.NavigatorContentServiceLabelProvider.findImage(NavigatorContentServiceLabelProvider.java:213)
at org.eclipse.ui.internal.navigator.NavigatorContentServiceLabelProvider.getColumnImage(NavigatorContentServiceLabelProvider.java:110)
at org.eclipse.ui.internal.navigator.NavigatorContentServiceLabelProvider.getImage(NavigatorContentServiceLabelProvider.java:103)
at org.eclipse.ui.internal.navigator.NavigatorDecoratingLabelProvider$StyledLabelProviderAdapter.getImage(NavigatorDecoratingLabelProvider.java:60)
at org.eclipse.jface.viewers.DelegatingStyledCellLabelProvider.getImage(DelegatingStyledCellLabelProvider.java:184)
at org.eclipse.jface.viewers.DecoratingStyledCellLabelProvider.getImage(DecoratingStyledCellLabelProvider.java:167)
at org.eclipse.ui.navigator.CommonNavigatorManager.updateStatusBar(CommonNavigatorManager.java:325)
at org.eclipse.ui.navigator.CommonNavigatorManager$1.selectionChanged(CommonNavigatorManager.java:77)
at org.eclipse.jface.viewers.StructuredViewer$3.run(StructuredViewer.java:864)
at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
at org.eclipse.core.runtime.Platform.run(Platform.java:888)
at org.eclipse.ui.internal.JFaceUtil$1.run(JFaceUtil.java:48)
at org.eclipse.jface.util.SafeRunnable.run(SafeRunnable.java:175)
at org.eclipse.jface.viewers.StructuredViewer.firePostSelectionChanged(StructuredViewer.java:862)
at org.eclipse.jface.viewers.StructuredViewer.handlePostSelect(StructuredViewer.java:1175)
at org.eclipse.ui.navigator.CommonViewer.handlePostSelect(CommonViewer.java:475)
at org.eclipse.jface.viewers.StructuredViewer$5.widgetSelected(StructuredViewer.java:1200)
at org.eclipse.jface.util.OpenStrategy.firePostSelectionEvent(OpenStrategy.java:251)
at org.eclipse.jface.util.OpenStrategy.access$5(OpenStrategy.java:245)
at org.eclipse.jface.util.OpenStrategy$3.run(OpenStrategy.java:419)
at org.eclipse.swt.widgets.RunnableLock.run(RunnableLock.java:35)
at org.eclipse.swt.widgets.Synchronizer.runAsyncMessages(Synchronizer.java:134)
at org.eclipse.swt.widgets.Display.runAsyncMessages(Display.java:3855)
at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3476)
at org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:2405)
at org.eclipse.ui.internal.Workbench.runUI(Workbench.java:2369)
at org.eclipse.ui.internal.Workbench.access$4(Workbench.java:2221)
at org.eclipse.ui.internal.Workbench$5.run(Workbench.java:500)
at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:493)
at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)
at org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:113)
at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:194)
at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110)
at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79)
at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:368)
at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:179)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:559)
at org.eclipse.equinox.launcher.Main.basicRun(Main.java:514)
at org.eclipse.equinox.launcher.Main.run(Main.java:1311)
at org.eclipse.equinox.launcher.Main.main(Main.java:1287) 
```

关于如何解决这个问题的任何想法？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T20:29:35.473

看起来这是一个已知的[Eclipse 错误](https://bugs.eclipse.org/bugs/show_bug.cgi?id=299485)。

您可以尝试使用最新版本的[Eclipse Juno](http://www.eclipse.org/juno/)

# ruby-on-rails - 用 out db 填充 date_select 字段

> ID：11994759
> 
> 赞同：0
> 
> 时间：2012-08-16T20:11:29.140
> 
> 标签：ruby-on-rails, forms

我有不依赖于数据库的模型。它使用 SOAP API 获取数据。编辑和反对时，我的日期选择器会自动重置为当天，而不是使用通过 API 返回的值。如何让我的 date_select 表单助手使用通过所述 API 提供的日期？

形式：

```
 <%= date_select :start_time, :created, {:add_month_numbers => true } %> 
```

编辑动作：

```
.....
@keyword = Keyword.new

@keyword.id = @result[0][:value]

@keyword.name = @result[1][:value]

@keyword.keyword = @result[2][:value]

@keyword.message1 = @result[3][:value]

@keyword.message2 = @result[4][:value]

@keyword.start_time = @result[5][:value] 
```

@result[5][:value] 的值看起来像“yyyy-mm-dd”，并以字符串形式返回。
如何让我的 date_select 正确反映这个值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T20:22:53.313

使用 :default 选项设置默认日期：

```
<%= date_select :start_time, :created, :add_month_numbers => true, :default => Time.parse(@keyword.start_time) %> 
```

[API](http://api.rubyonrails.org/classes/ActionView/Helpers/DateHelper.html#method-i-date_select)

# hadoop - 如何练习 Hadoop 编程？

> ID：11994760
> 
> 赞同：11
> 
> 时间：2012-08-16T20:11:36.640
> 
> 标签：hadoop

刚开始浏览 Hadoop 介绍视频。如何自己练习？有没有推荐的安装在本地练习的方法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-16T21:15:02.380

我发现下载和安装 Hadoop，通过工作示例来使用它，犯了很多错误并且对实践很好。

如果您说“如何在不使用 HDFS 的情况下将其安装在本地计算机上？”，则通过“在本地安装”，这里有一个[很好的指南。](https://hadoop.apache.org/docs/current/hadoop-project-dist/hadoop-common/SingleCluster.html)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-17T15:23:47.587

如果您想了解 Hadoop 和 Bigdata，请[访问 bigdatauniversity.com](http://bigdatauniversity.com/)。它是免费的，他们提供了有关如何在虚拟机和/或 Amazon 的 Web 服务中本地安装 Hadoop 的说明。BigDataUniversity 提供实验室和说明来帮助指导您的实践。到目前为止，我发现它很有帮助。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-06-03T08:19:01.360

最近 Cloudera 推出了一个新的在线平台，您可以在其中尽可能多地使用 Hadoop 及其生态系统。给您 - [cloudera.com/live](http://cloudera.com/live)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-04-09T17:47:08.380

我已经在 Hadoop 上培训人员 2 年了。这是我的两分钱。

对于学习部分，我会推荐以下资源（正如上面其他人所提到的）：

1.  [雅虎博客](https://developer.yahoo.com/hadoop/tutorial/)
2.  [Hadoop权威指南](http://shop.oreilly.com/product/0636920033448.do)
3.  [HortonWorks 练习教程](http://hortonworks.com/tutorials/)

对于练习，传统上人们一直在使用 Hadoop 虚拟机，但这种方法有其缺点：

1.  VM 的大小非常大，例如 HortonWorks 的 VM 为 9.9 GB。
2.  您可能需要将 RAM 升级到 8GB。
3.  一些 BIOS 不允许虚拟化。您可能已经更改了 BIOS 设置。
4.  某些机器（例如 Office 台式机/笔记本电脑）可能不允许安装。

我和我的学生也面临着这些问题。因此，我们为学生搭建了一个集群来练习 Hadoop、Spark 和相关技术。我们将其命名为[CloudxLab.com](https://cloudxlab.com/)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-12-07T00:33:21.017

...我喜欢 bigdatauniversity.com，还注意到 MapR、Hortonworks 和 Cloudera 都提供了一个可下载的环境，您可以使用它来熟悉 Hadoop 操作范例。

事实上，如果您正在研究这一点，着眼于在企业范围内使用 Hadoop，那么探索在该级别部署的产品是一个好主意。

我现在有一点机会亲身体验 MapR 的 Hadoop 环境，并且可以称赞它是研究此事的好方法。

---v

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-06-03T12:16:03.067

我建议[https://developer.yahoo.com/hadoop/tutorial/](https://developer.yahoo.com/hadoop/tutorial/)进行 hadoop 自定进度学习。它是一个非常全面的指南，一步一步，从初级到高级。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-08-21T12:28:08.240

您可以安装一个包含 Hadoop 的虚拟机，但您可能会遇到一些问题。当我开始学习 Hadoop 时，我首先这样做了，在遇到几个问题（IP、互联网、不同的配置）之后，我决定使用 Linux 安装来学习。

你可以在这里找到一个教程：http: [//www.michael-noll.com/tutorials/running-hadoop-on-ubuntu-linux-single-node-cluster/](http://www.michael-noll.com/tutorials/running-hadoop-on-ubuntu-linux-single-node-cluster/)

# java - Netbeans GUI 编辑器不支持 ASCII - Java

> ID：11994761
> 
> 赞同：5
> 
> 时间：2012-08-16T20:11:37.543
> 
> 标签：java, netbeans, ascii

因此，我正在使用 NetBeans IDE（Java 中）制作一个基本的 GUI，并且我想制作一个带有 √ 符号的按钮。它没有让我复制粘贴它，所以我尝试使用它的 ASCII 码 - `char sqrt = (char) 251`。然而，它给了我“û”而不是平方根符号，我不知道为什么。有人可以解释为什么会发生这种情况，并就我应该如何解决这个问题提供一个想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T20:29:17.673

Java 字符是 Unicode，而不是 ASCII。Unicode 代码点 251 ( [U+00FB](http://www.fileformat.info/info/unicode/char/00fb/index.htm) ) 是“带有 Circumflex 的拉丁小写字母 U”。为了使用仅包含基本 ASCII 符号的字符集来输入各种 Unicode 字符，Java 提供了一种使用文字格式输入 Unicode 字符的方法。所以，你可以这样做：

```
char sqrt = '\u221a'; 
```

因为[U+221A](http://www.fileformat.info/info/unicode/char/221a/index.htm)是平方根符号的 Unicode 代码点。

此 \uXXXX 格式也可用于字符串文字：

```
String s = "The square root of 2 (\u221a2) is approximately 1.4142"; 
```

如果您打印该字符串，您将看到

```
The square root of 2 (√2) is 1.4142 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-16T20:28:37.980

Java 使用 Unicode，'√' 的 Unicode 值是 8730。所以，应该这样做：

```
char sqrt = 8730; 
```

# javascript - HTML/CSS/JS 构建工具

> ID：11994764
> 
> 赞同：3
> 
> 时间：2012-08-16T20:11:50.653
> 
> 标签：javascript, css, ant, build, minify

我有一个包含大量静态 HTML 和 js 文件的项目。我需要一个可以连接和缩小它们的构建工具。

我看到了[这个](http://vimeo.com/21278421)很棒的截屏视频，它解释了如何使用 ant 和 YUI 来实现。我唯一缺少的是在创建缩小版本之后，我如何替换 HTML 中对 JS/CSS 文件的引用，所以它将引用新的缩小版本？

有没有更好/更简单的工具（**不是 GPL/LGPL 许可证**）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T20:15:36.887

[Grunt](https://github.com/cowboy/grunt)非常好，并且支持其中的大部分内容。[这个插件](https://github.com/izb/grunt-consolidate-css)会重新编写你的 CSS 链接标签，尽管通常（对于 JS）你只需要编写链接/脚本标签以直接指向缩小版本，并不断地让它构建你的文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-19T06:40:09.150

您可以尝试[缩小 JS 和 CSS](http://jscompress.com/)。Minify JS 可以使 1 个 JS 文件合并多个 JS 文件，对于 CSS 也是如此。

# python - pandas DataFrame.to_string() 从列中截断字符串

> ID：11994765
> 
> 赞同：12
> 
> 时间：2012-08-16T20:11:51.307
> 
> 标签：python, pandas

当我尝试使用 to_string 从 a 输出一列时`dataframe`，它会截断该列的输出。

```
print gtf_df.ix[:1][['transcript_id','attributes']].to_string(header=False,index=False)

Out: ' CUFF.1.1  gene_id "CUFF.1"; transcript_id "CUFF.1.1"; FPKM '

print gtf_df.ix[:1]['attributes'][0]

Out: 'gene_id "CUFF.1"; transcript_id "CUFF.1.1"; FPKM "1670303.8168650887"; frac "1.000000"; conf_lo "0.000000"; conf_hi "5010911.450595"; cov "9658.694354";' 
```

关于如何解决这个问题的任何想法？谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-17T06:54:29.743

默认情况下，使用`__repr__`或`to_string`列被截断为 50 个字符。在 0.13.1 之前的 Pandas 版本中，可以使用以下命令进行控制`pandas.set_printoptions()`：

```
In [64]: df
Out[64]:
                                                   A    B
a  this is a very long string, longer than the defau  bar
b                                                foo  baz

In [65]: pandas.set_printoptions(max_colwidth=100)

In [66]: df
Out[66]:
                                                                      A    B
a  this is a very long string, longer than the default max_column width  bar
b                                                                   foo  baz 
```

在更新版本的 Pandas 中，改用这个：

```
pd.options.display.max_colwidth = 100 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-09-22T03:48:03.493

Pandas 更改了如何设置此选项。这是[当前文档](https://pandas.pydata.org/pandas-docs/version/0.23.4/options.html)

```
pd.set_option('display.max_colwidth', 100) 
```

有关其他不错的文档，请参阅文档，例如：

```
pd.set_option('display.max_rows', 999) 
```

# ruby - 将一个类方法传递给另一个方法来调用

> ID：11994767
> 
> 赞同：0
> 
> 时间：2012-08-16T20:11:53.243
> 
> 标签：ruby

我正在写如下内容

```
module Test
   def self.print(*args)
      p 'something'
      p args
   end
end

def print(*args)
  p "print something"
  p args
end

def method_caller(method_name, *args)
  send(method_name, *args)
end

method_caller(:print, 2) # this works fine
method_caller("print", 2, 3) # this one also
method_caller("Test.print", 2) # this doesn't work 
```

基本上，我传递`method_caller`了一个方法的名称和一些参数，然后我使用该`send`方法来实际调用该方法。

我通常将方法的名称作为符号传递，但我将如何处理`Test.print`？我想在某些时候我可能会传入对象并让它们调用自己的方法。

我想调用的方法实际上可以在任何地方。

更新：

尝试每个建议，显式接收器看起来是一个很好的方法，因为很明显正在发生什么，但是 christianblais 的想法呢。我改变了它以避免`eval`这样的电话

```
def method_caller(method_name, *args)
  if method_name.is_a?(String)
    chain = method_name.split('.')
    obj, method_name = Object.const_get(chain[0...-1].join('.')), chain[-1]
    obj.send(method_name, *args)
  else
    send(method_name, args)
  end
end 
```

这意味着我只能说`method_caller("Test.print", 2)`，但也许有一些陷阱......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T20:26:29.847

这里有两件事。

1）您的示例不起作用，因为您尝试使用参数调用 Test.print 而您的方法定义不接受参数。 *编辑：刚刚看到你的更新。现在好了。对不起！*

2）这是邪恶的，但你总是可以像这样使用 eval ：

```
module Test
   def self.print(*args)
     p 'something'
     p args
   end
end

def method_caller(method_name, *args)
  if method_name.is_a?(String)
    chain = method_name.split('.')
    eval(chain[0...-1].join('.')).send(chain.last, args)
  else
    send(method_name, args)
  end
end

method_caller(:print, 2) # this works fine
method_caller("print", 2, 3) # this one also
method_caller("Test.print", 2) # this doesn't work 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T20:27:37.430

那么，你为什么不给你的 method_caller 一个接收器参数呢？

```
def method_caller(receiver, method_name, *args)
  receiver.send(method_name, *args)
end

method_caller(Test, :print, 2) 
```

其他调用需要`self`用作接收器，这在您当前的实现中是隐含的。但最后这一切给你的是一个不完整的临时重新实现`send`，所以人们真的想知道你想用它来实现什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T14:23:42.430

传递作为字符串调用的方法是一个要求还是只是你的一个想法？一个更红宝石的解决方案是简单地传递一个块......

```
method_caller(2) { |*args| Object.print(*args) } 
```

或将方法对象作为参数

```
method_caller(Object.method(:print), 2) 
```

顺便说一句，它适用于任何响应 #call (labmdas, ...) 的对象

# jquery - jQuery 可在拖动 el 外部使用处理程序拖动（移动）

> ID：11994771
> 
> 赞同：1
> 
> 时间：2012-08-16T20:12:14.393
> 
> 标签：jquery, nested, draggable, touchscreen, touchpad

我正在使用可拖动的 UI jquery 插件来模拟地图或“触摸屏”或其他任何东西中的移动。事实上，我在这个链接中有我想要的 mootools：http: [//bloodblog.net/test/cabocity/main.html](http://bloodblog.net/test/cabocity/main.html)（Chrome、chrommium 和 ¿old？仅限 firefox）。

它包含以下内容：

html:

```
<div id="touchpad" ></div>
<div id="cont"><!-- here a lot of things --></div> 
```

这里的处理程序是**touchpap**。它在顶部，它**永远**不会移动。它在拖动时移动 cont 元素。

我试图在 jquery 中做同样的事情，但是当我使用可拖动的 ui-jquery 插件的“处理程序”选项时，什么也没有发生：它没有嵌套在拖动元素中。

这是 jquery 插件的文档：http: [//jqueryui.com/demos/draggable/#handle](http://jqueryui.com/demos/draggable/#handle)

* * *

这是 mootools 中的结构：comment#4 但我想在 jquery 中制作它：（comment #2）/ 但它不起作用，因为触摸板也没有嵌套容器 div。这是容器结束的时候：（评论＃3）（这项工作，但不是解决方案，因为您只能在红色背景上拖动）。

PS：抱歉链接，我不能发布所有链接。

# c++ - 初始化 char 数组 - C 和 C++

> ID：11994779
> 
> 赞同：-2
> 
> 时间：2012-08-16T20:12:47.297
> 
> 标签：c++, c

有人问我这个语法是什么意思：

```
char data[32] = {1}; 
```

但是我不记得它做了什么，。但我记得它是有效的。
谁能解释它的目的？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-16T20:14:48.780

这将创建一个包含 32 个字符的数组。第一个元素将为 1，其余元素将设置为零。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-16T20:16:55.137

如果您根本不初始化自动数组（本地而非静态），则数组的元素可能包含垃圾值。

```
#include <stdio.h>

int main(int argc, char **argv)
{
    int i;
    char data[5];
    for (i = 0; i < 5; i++) {
        printf("data[%d] = %d\n", i, data[i]);
    }
    return 0;
} 
```

输出：

```
data[0] = 72
data[1] = 12
data[2] = -118
data[3] = 51
data[4] = -119 
```

但是，如果您初始化它，它将使用您指定的初始化程序进行初始化。如果初始化器的数量小于数组中元素的总数，则剩余的元素将被初始化为 0。

```
#include <stdio.h>

int main(int argc, char **argv)
{
    int i;
    char data[5] = {1};
    for (i = 0; i < 5; i++) {
        printf("data[%d] = %d\n", i, data[i]);
    }
    return 0;
} 
```

输出：

```
data[0] = 1
data[1] = 0
data[2] = 0
data[3] = 0
data[4] = 0 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-16T20:14:50.053

是初始化。它将数组的第一个元素设置为`1`（`^A`在我检查的 ASCII 表中），其余元素设置为`0`（默认值）。

声明省略初始化器的 C99 标准：

> 如果大括号括起来的列表中的初始值设定项少于聚合的元素或成员，或者用于初始化已知大小数组的字符串文字中的字符少于数组中的元素，则聚合的其余部分应隐式初始化与具有静态存储持续时间的对象相同。

和：

> 如果具有自动存储持续时间的对象未显式初始化，则其值是不确定的。如果具有静态存储持续时间的对象未显式初始化，则：
> 
> *   如果是指针类型，则初始化为空指针；
> *   如果它具有算术类型，则将其初始化为（正或无符号）零；
> *   如果是聚合，则每个成员都根据这些规则（递归地）初始化；
> *   如果是联合，则根据这些规则（递归地）初始化第一个命名成员。

And`char`是算术类型，因此数组的其余元素将被初始化为零。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-16T20:15:03.407

是的，你没记错。只是谷歌“C数组初始化”：

*   [http://www.eskimo.com/~scs/cclass/notes/sx4aa.html](http://www.eskimo.com/~scs/cclass/notes/sx4aa.html)

几点注意事项：

> *   在旧的 ANSI C 之前的编译器中，您不能总是为函数内部的“本地”数组提供初始化程序；您只能初始化“全局”数组，即任何函数之外的数组。这些编译器现在很少见，因此您不必再担心这种区别。
>     
>     
> *   当数组定义包含初始化器时，数组维度可以省略，编译器会根据初始化器的数量推断维度
>     
>     
> *   如果初始化器的数量少于数组中的元素，则剩余的元素会自动初始化为 0。

# javascript - 用于基于 PSD 的文件的基于 Web 的绘图编辑器

> ID：11994780
> 
> 赞同：-3
> 
> 时间：2012-08-16T20:12:47.740
> 
> 标签：javascript, flash, html, photoshop

这是场景。我正在做一个项目，我的任务是在 HTML 上设计一个类似 Paint 的界面，这个 Paint 界面将允许用户绘制预定义的“帽子”……是的，人们戴的帽子。现在有一些转折。要求是：-

1）帽子必须是预定义的图像。即用户不能绘制帽子。他必须从菜单中选择帽子。

2）必须有用户从菜单中选择的预定义“条纹”。选择条纹后，该条纹将应用于现有的帽子。现在这些条纹在风格上是独一无二的，会给帽子一个独特的外观。

3）允许用户从菜单中选择一种颜色并将其应用到条纹或帽子上。看，帽子和条纹将像在 Photoshop PSD 文件中一样分层。所以没有分层图像（条纹，帽子）可以叠加在另一个上。

4）允许用户删除条纹或编辑条纹的颜色或编辑帽子的颜色。

就是这样。这些是限制。现在，我知道编辑器将在 FLASH 上制作。但我对如何创建这个东西一无所知。是否有可用的开源网络图像编辑器允许使用 PSD 文件？有任何想法吗？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T20:17:27.850

您的所有 PSD 工作都必须在服务器端处理。如果您正在导入 PSD 文件，您很可能需要实例化 Photoshop 的副本（我相信您可以使用 COM 访问它）或 GIMP 以导出每个图层的 PNG。

客户端，我不会打扰 Flash。您应该能够在常规 DOM 中处理图像层，并使用 jQuery 等进行操作。如果您需要进行更高级的操作，请深入了解 canvas 元素。

# javascript - 一项更改：在加载图像之前加载元素

> ID：11994783
> 
> 赞同：0
> 
> 时间：2012-08-16T20:13:07.323
> 
> 标签：javascript, image, onload

我有一个脚本可以在加载其中的图像后加载元素。我想先加载元素然后再加载图像。有人能帮我吗？

脚本：

```
jQuery.ias({
    container : '#con',
    item: '.bo',
    pagination: '.pages',
    next: '.next',
    loader: '<img src="loader.gif">',
    onLoadItems: function(items) {
        // hide new items while they are loading
        var $newElems = $(items).show().css({ opacity: 0 });
        // ensure that images load before adding to masonry layout
        $newElems.imagesLoaded(function(){
            // show elems now they're ready
            $newElems.animate({ opacity: 1 });
            $('#con').masonry( 'appended', $newElems, true );
        });
        return true;
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T20:31:52.870

add class to image you want to hide while it is loading:

**load the element on the body the load your images:**

<img src="image.jpg" class="preload" />

```
jQuery(document).ready(function(){
  jQuery(".preload").hide();
  // use :   jQuery(".preload").css("opacity","0");  to preserve the image place!
  jQuery(".preload").load(function(){ 
      jQuery(this).show();
      // Or jQuery(this).css("opacity","1");
  })
}); 
```

# asp.net - 对透视列求和

> ID：11994785
> 
> 赞同：0
> 
> 时间：2012-08-16T20:13:20.077
> 
> 标签：asp.net, sql, pivot

我有这个带有透视数据的gridview：

```
 Store        MEX       USA
    Supermarket  10,000    5,000
    Club         10,000        0
    Direct        4,000    1,000 
```

用这个查询完成：

```
 SELECT * 
    FROM [Sales] 
    PIVOT ( 
            SUM(Sales) 
            FOR Region IN ( [MEX], [USA] ) 
    ) AS SalesPerRegion 
```

现在我想在页脚添加 MEX 和美国的总销售额，但我不知道该怎么做。

任何帮助表示赞赏，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T20:17:27.387

您可以添加一个以获得每个区域`UNION ALL`的总计`SUM()`

```
SELECT Store, MEX, USA 
FROM [Sales] 
PIVOT ( 
        SUM(Sales) 
        FOR Region IN ( [MEX], [USA] ) 
) AS SalesPerRegion

UNION ALL

SELECT 'Total', Sum(MEX), Sum(USA)
FROM
(
    SELECT Store, MEX, USA 
    FROM [Sales] 
    PIVOT ( 
           SUM(Sales) 
           FOR Region IN ( [MEX], [USA] ) 
    ) AS SalesPerRegion
) x 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/bea32/1)

# java - 格式 hh:mm:ss 的解析时间

> ID：11994790
> 
> 赞同：51
> 
> 时间：2012-08-16T20:13:36.807
> 
> 标签：java, date, string-parsing

如何解析格式的时间`hh:mm:ss`，作为字符串输入以在java中仅获取整数值（忽略冒号）？

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2012-08-16T20:23:39.063

根据 Basil Bourque 的评论，考虑到 Java 8 的新 API，这是此问题的更新答案：

```
 String myDateString = "13:24:40";
    LocalTime localTime = LocalTime.parse(myDateString, DateTimeFormatter.ofPattern("HH:mm:ss"));
    int hour = localTime.get(ChronoField.CLOCK_HOUR_OF_DAY);
    int minute = localTime.get(ChronoField.MINUTE_OF_HOUR);
    int second = localTime.get(ChronoField.SECOND_OF_MINUTE);

    //prints "hour: 13, minute: 24, second: 40":
    System.out.println(String.format("hour: %d, minute: %d, second: %d", hour, minute, second)); 
```

评论：

*   由于 OP 的问题包含仅包含小时、分钟和秒（没有日期、月份等）的时间瞬间的具体示例，因此上面的答案仅使用[LocalTime](https://docs.oracle.com/javase/8/docs/api/java/time/LocalTime.html)。如果要解析还包含天、月等的字符串，则需要[LocalDateTime](https://docs.oracle.com/javase/8/docs/api/java/time/LocalDateTime.html)。它的用法与 LocalTime 的用法非常相似。
*   由于时间即时 int OP 的问题不包含有关时区的任何信息，因此答案使用日期/时间类的 LocalXXX 版本（LocalTime、LocalDateTime）。如果需要解析的时间字符串也包含时区信息，则需要使用[ZonedDateTime 。](https://docs.oracle.com/javase/8/docs/api/java/time/ZonedDateTime.html)

====== 下面是这个问题的旧（原始）答案，使用 Java8 之前的 API：=====

我很抱歉，如果我要让任何人不高兴，但我实际上会回答这个问题。Java API 非常庞大，我认为有时有人可能会错过它是正常的。

SimpleDateFormat 可能会在这里解决问题：

[http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html](http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html)

它应该是这样的：

```
String myDateString = "13:24:40";
//SimpleDateFormat sdf = new SimpleDateFormat("hh:mm:ss");
//the above commented line was changed to the one below, as per Grodriguez's pertinent comment:
SimpleDateFormat sdf = new SimpleDateFormat("HH:mm:ss");
Date date = sdf.parse(myDateString);

Calendar calendar = GregorianCalendar.getInstance(); // creates a new calendar instance
calendar.setTime(date);   // assigns calendar to given date 
int hour = calendar.get(Calendar.HOUR);
int minute; /... similar methods for minutes and seconds 
```

您应该注意的问题：

*   您传递给 SimpleDateFormat 的模式可能与我的示例中的模式不同，具体取决于您拥有的值（是 12 小时格式或 24 小时格式等的小时数）。查看链接中的文档以获取有关此内容的详细信息

*   一旦你从你的字符串中创建了一个日期对象（通过 SimpleDateFormat），不要试图使用 Date.getHour()、Date.getMinute() 等。它们有时可能会起作用，但总的来说它们会产生不好的结果，因此现在已弃用。如上例所示，请改用日历。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-08-16T20:23:08.753

有点冗长，但它是Java 中解析和格式化日期的[*标准方法：*](http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html)

```
DateFormat formatter = new SimpleDateFormat("HH:mm:ss");
try {
  Date dt = formatter.parse("08:19:12");
  Calendar cal = Calendar.getInstance();
  cal.setTime(dt);
  int hour = cal.get(Calendar.HOUR);
  int minute = cal.get(Calendar.MINUTE);
  int second = cal.get(Calendar.SECOND);
} catch (ParseException e) {
  // This can happen if you are trying to parse an invalid date, e.g., 25:19:12.
  // Here, you should log the error and decide what to do next
  e.printStackTrace();
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-16T20:22:21.407

```
String time = "12:32:22";
String[] values = time.split(":"); 
```

这将花费您的时间并将其拆分到看到冒号的位置并将值放入数组中，因此在此之后您应该有 3 个值。

然后循环遍历字符串数组并转换每一个。（与`Integer.parseInt`）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-16T20:22:45.827

如果你想提取小时、分钟和秒，试试这个：

```
String inputDate = "12:00:00";
String[] split = inputDate.split(":");
int hours = Integer.valueOf(split[0]);
int minutes = Integer.valueOf(split[1]);
int seconds = Integer.valueOf(split[2]); 
```

# linux - 如何将带有多个引号/特殊字符的行回显到文件中？

> ID：11994796
> 
> 赞同：9
> 
> 时间：2012-08-16T20:14:26.597
> 
> 标签：linux, bash, shell, echo

我试图将以下行回显到 .profile 中，但它总是被许多引号或特殊字符弄糊涂。

`bind '"e[A": history-search-backward'`

我已经尝试了各种各样的事情，但无法将其钉牢。

这是我目前拥有的：

`sudo su -c 'echo "bind \'\"\\e[A\": history-search-backward\'" >> /etc/profile' -`

这是它返回的内容：

`su: user '"\e[A": does not exist`

然而，如果我只是使用：

`echo bind \'\"\\e[A\": history-search-backward\'" >> /home/user/testfile`

它工作得很好。

在我的脚本的其余部分，我有各种各样的“sudo su -c”echo blah ...”，它们工作得很好。

有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-16T20:19:56.123

尝试这个

```
sudo su -c $'echo \"bind \'\"\\e[A\": history-search-backward\'\" >> /etc/profile\' -' 
```

从 bash 手册页：

> 单引号之间不能出现单引号，即使前面有反斜杠。

引用的文本`$'...'`可能包含反斜杠转义的引号，包括单引号和双引号。

另一种选择是将更简单的表达式添加到`~/.inputrc`：

```
echo '"\e[A": history-search-backward' >> ~/.inputrc 
```

似乎没有一个系统范围内的等价物可供`.inputrc`所有用户阅读。此外，这使得键绑定可用于任何使用 readline 的程序。如果您确实想将其限制为 bash，请添加条件表达式：

```
cat >> ~/.inputrc <<'EOF'
$if Bash
"\e[A": history-search-backward
$endif
EOF 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T21:17:06.303

# ios - 在 iOS 中使用核心数据

> ID：11994798
> 
> 赞同：1
> 
> 时间：2012-08-16T20:14:42.510
> 
> 标签：ios, json, cocoa-touch, sqlite, core-data

我在这里经历了几个这样的答案，但我认为我没有做对..

我有几个由 JSON 请求组成的 NSArray。我想将所有内容存储在应用程序中，而不是一直请求数据，我知道我应该为此使用 Core Data。

问题是，我不知道如何初始化它。我试图阅读，但我意识到仅通过阅读类参考等需要很长时间才能理解这一点。

我添加了一个 .xcdatamodel 并创建了一个实体，其属性与其中一个 json 对象中的数据相同。如何访问文件以提取和插入信息？我打算将我的整个 json 对象解析到这个文件中，但是我怎样才能实例化实体呢？哪些代表在哪里？

我所观看的所有教程在创建项目时都有一个选项，例如“使用核心数据”或其他内容，当检查时，它们会自动创建很多代码。我没有那个。。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T20:45:45.403

您可能想浏览一些 SO 链接：[这里](https://stackoverflow.com/questions/2032818/adding-core-data-to-existing-iphone-project)。另外，我曾经记得通过[本指南](http://wiresareobsolete.com/wordpress/2009/12/adding-core-data-existing-iphone-projects/)将核心数据添加到我的项目中。它可能会帮助您通过[此链接](http://www.cimgf.com/2011/06/02/saving-json-to-core-data/)将 JSON 直接保存到 Core Data。我在这里推荐了几次这个链接。相信我，当你看到一切开始工作时，你在设置 Core Data 时所承受的所有痛苦都是值得的！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T20:37:20.653

您需要添加核心数据堆栈。您可以创建一个新的核心数据项目，并将核心数据元素添加到专门用于核心数据的应用委托中。您将拥有 3 个属性和一种方法。只需将这些元素的声明和实现复制/粘贴到您的应用程序委托。确保 managedObjectModel 方法和 persistentStoreCoordinator 方法使用您的实际模型名称。

要使用核心数据，您需要阅读核心数据文档：

[http://developer.apple.com/library/mac/#documentation/cocoa/Conceptual/CoreData/cdProgrammingGuide.html](http://developer.apple.com/library/mac/#documentation/cocoa/Conceptual/CoreData/cdProgrammingGuide.html)

您将必须创建实体来表示您的数据、实体的属性等等。开始您的项目，阅读文档，然后开始。您将有更多问题可以在这里提出或找到，但至少您有足够的开始。

# c++ - 在 Qt 中使用 Botan 时遇到问题

> ID：11994803
> 
> 赞同：0
> 
> 时间：2012-08-16T20:14:54.633
> 
> 标签：c++, qt, botan

我正在使用 Qt，我正在尝试使用 Botan。一切似乎都很顺利，但是当我去的时候：

`Botan::BigInt myInt;`

在我的构造函数中它工作正常，但另一方面，如果我去：

`Botan::AutoSeeded_RNG rng;`

它抛出未定义的错误：

```
C:\Users\Stevie\Desktop\asfsdf-build-desktop-Qt_4_8_1_for_Desktop_-_MinGW__Qt_SDK__Debug\debug\mainwindow.o:-1: In function `AutoSeeded_RNG':
C:\Users\Stevie\Desktop\asfsdf-build-desktop-Qt_4_8_1_for_Desktop_-_MinGW__Qt_SDK__Debug\..\..\..\..\botan\include\botan\auto_rng.h:40: error: undefined reference to `_imp___ZN5Botan23Global_State_Management12global_stateEv'
C:\Users\Stevie\Desktop\asfsdf-build-desktop-Qt_4_8_1_for_Desktop_-_MinGW__Qt_SDK__Debug\..\..\..\..\botan\include\botan\auto_rng.h:40: error: undefined reference to `_imp___ZN5Botan13Library_State10global_rngEv'
:-1: error: collect2: ld returned 1 exit status 
```

我不知道为什么它可以使用 BigInt 而不是 AutoSeded_RNG，但这是我的确切步骤：

1.  在“src/libs/3rdparty/botan/”处编译了 Qt Creator 源中包含的 Botan 源

2.  [我使用他们网站上](http://botan.randombit.net/download.html#current-stable-series-1-10)的 Windows Installer (1.10) 安装了 Botan 。

3.  我将 libBotan.a、libBotand.a、botan.dll 和 Botand.dll 放在我安装 Botan 的位置 (C:\botan)。我覆盖了任何已经存在的文件。

4.  然后我创建了一个新的 Qt 项目，并在 .pro 文件中添加了以下几行：

    > INCLUDEPATH += "C:/botan/include"
    > LIBS += "C:/botan/libBotan.a"

5.  接下来，我进入我的“mainwindow.cpp”，并添加：

    `#include <botan/botan.h>`

    **一切都成功编译到这里。**

6.  我现在将它添加到我的构造函数中：

    `Botan::AutoSeeded_RNG rng;`

现在抛出上述错误，无法运行。如果我用“BigInt”替换“AutoSeeded_RNG”，那么它可以完美编译。

感谢您的帮助，Hetelek。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-17T08:37:46.427

链接到 Botan 图书馆的声明对我来说看起来很奇怪。通常，您使用开关指定库目录并使用`-L`开关添加库`-l`，即您应该使用

```
LIBS += -L"C:\botan" -lBotan 
```

请注意，库的前缀和后缀未在`lbotan`. 链接器将根据您的环境自动查找`libbotan.a`or 。`botan.dll`

Botan 也是 QtCreator 的一部分。也许您应该看看[他们的存储库](http://qt.gitorious.org/qt-creator/qt-creator/trees/master/src/libs/3rdparty/botan)。您可以在那里找到文件，`.pri`并且`.pro`可能只需要复制它们。他们还`.qbs`为新的 Qt 构建系统编写了驱动程序。

**编辑：**我刚刚从 QtCreator 源代码中编译了 Botan，正如您在帖子中提到的那样。然后我将所有生成的库复制到我自己的目录中，并且我还使用了`botan.h`QtCreator 附带的库。在 Linux 上我必须添加

```
LIBS += -L"/dir/into/which/i/copied/botan/dlls" -LBotan -ldl 
```

到 qmake`.pro`文件。注意额外的，`-ldl`否则我得到未定义的引用`dlym`等。我可以毫无问题`dlerror`地编译一个简单的例子。`Botan::AutoSeeded_RNG`

# multithreading - 用互斥锁保护临界区

> ID：11994807
> 
> 赞同：0
> 
> 时间：2012-08-16T20:15:15.387
> 
> 标签：multithreading, critical-section

假设我有一个共享对象，它的一段代码受临界区保护，并且有多个线程正在访问该对象以进行读/写。当一个线程在临界区内时，其他线程正在等待。一旦线程离开 CS，操作系统就会允许访问任何等待的线程。

如果我仅限于一个进程，那么单独使用 CS 是否可以很好地保护共享对象？

我问是因为我在网上看到正确的方法是使用内核对象（例如：互斥锁、信号机）来保护 CS。希望使用共享资源的线程需要首先使用 WaitForSingleObject 类型的函数获取互斥体/信号量。如果使用互斥体，则只有其中一个可以访问资源。一旦获得互斥锁，线程就会进入 CS，做应该做的事情，然后离开 CS 并释放互斥锁。然后操作系统允许任何其他等待线程获取互斥锁等等。

但是不就和只使用 CS 一样吗？

此外，使用互斥锁应该比单独使用 CS 慢得多。我看到的仅使用 CS 的唯一问题是，如果线程在 CS 内崩溃，那么其他线程可能永远不会访问共享资源。

还有什么其他原因可以说明这种方法更好吗？提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T21:02:59.887

听起来您在讨论某些特定于 Windows 的术语时，会将其与某些通用计算机科学术语混为一谈。

在计算机科学中，术语“关键部分”用于必须专门运行的代码区域（通常是由于数据共享）。在 Windows 中，有一个称为同步对象`CRITICAL_SECTION`，可用于提供对执行区域的独占访问。Windows 上对象的另一个属性`CRITICAL_SECTION`是它仅限于在单个进程中使用。

在计算机科学中，术语“互斥锁”通常用于描述可用于在并行或当前执行线程之间提供同步的对象。在 Windows 中，还有一个可以使用`CreateMutex()`函数创建的互斥对象（它返回一个`HANDLE`表示互斥的）。该对象可用于在相同或不同进程中的线程之间同步访问，因此可以`CRITICAL_SECTION`在许多方面类似于 a（但具有不同的 API）来使用它。如果要同步不同进程中的执行线程，可以使用互斥对象，而`CRITICAL_SECTION`对象不能。

因此，要回答您的问题（我认为），如果您只关心保护属于同一进程的线程之间的关键部分，那么`CRITICAL_SECTION`对象应该就足够了。可以改用互斥对象，但它的性能可能会稍差一些。不需要同时使用这两种类型的对象

# haskell - 如何使用 Vundle 安装 VIM 插件 vim2hs

> ID：11994812
> 
> 赞同：2
> 
> 时间：2012-08-16T20:15:34.437
> 
> 标签：haskell, vim

下面是我的 .vimrc 文件。我添加了 vim2hs 插件并在 VIM 普通模式下运行 BundleInstall

.vimrc

```
 " My Bundles here:
     Bundle 'dag/vim2hs' 
```

我的 haskell 文件中仍然没有突出显示语法。为什么是这样？

```
set nocompatible               " be iMproved
 filetype off                   " required!

 set rtp+=~/.vim/bundle/vundle/
 call vundle#rc()

 " let Vundle manage Vundle
 " required!
 Bundle 'gmarik/vundle'

 " My Bundles here:
 Bundle 'dag/vim2hs' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T02:48:44.417

确保你`syntax on`的 ~/.vimrc 中有。这会打开 vim 的语法高亮。您可能还想检查是否为您的 haskell 文件设置了正确的文件类型。`:echo &filetype`应该报告`haskell`。大多数用户下载并设置一个`colorscheme`（请参阅 参考资料`:help colorscheme`）以使语法突出显示更愉快。

# windows - 用户/桌面的服务器路径？

> ID：11994816
> 
> 赞同：0
> 
> 时间：2012-08-16T20:15:38.980
> 
> 标签：windows, filepath

任何人都知道是否可以从 C:\inetpub\vhosts\mysite.com\httpdocs 中的脚本读取 C:\Administrator\Desktop\SomeFiles 中的文件名 (php)？

我相信你会说，我对 Windows 服务器一无所知。

我有一个脚本，可以将数据库中的文件名与服务器根目录（在 Linux 服务器上）内的目录中的文件名进行比较。只是不确定您是否可以或如何在 Windows 服务器上读取站点根目录之外的内容。

任何帮助将不胜感激。

谢谢马克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T20:26:04.433

文件安全由 Windows 机器上的访问控制列表 (ACL) 控制。因此，您的问题的答案取决于分配给您尝试读取的文件夹（也可能是其父文件夹）的 ACL 以及运行 php 脚本的用户的身份。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T23:50:28.700

此问题已由托管公司解决。我会尽量了解他们做了什么。只是不想浪费任何人的时间试图弄清楚。

# c++ - 如何在 3D 空间中正确移动相机？

> ID：11994819
> 
> 赞同：6
> 
> 时间：2012-08-16T20:15:53.190
> 
> 标签：c++, math, opengl, 3d, sdl

### 我想做的事：

我试图弄清楚如何使相机像这样工作：

*   鼠标移动：相机旋转
*   上/下键：相机前进/后退；forward 表示相机朝向的方向
*   左/右键：相机侧向移动
*   Q/E键：相机上下移动

由于我有很多代码，我会尽力解释我是如何做到的，没有太多代码。我正在处理的项目非常大，并且有一个相当大的库，其中包含许多难以理解的类和类型。

### 问题

我几乎已经成功地完成了这项工作，但是在以某些角度移动了一点之后，事情开始失败：当按下向上时，相机会向侧面移动等等。

下面详细解释我想到的算法。

问题是，我做错了吗？什么可能让它失败？我一整天都在调试这台相机，但还没弄清楚是什么让它失败了。

### 澄清

*   这就是我对*旋转*的理解：一个 3D 向量（可能不恰当地称为向量），其中每个分量都表示对象围绕其旋转的轴。例如，X 值将是对象绕 X 轴旋转的程度。因为我在 OpenGL 中工作，所以旋转值将以*度*为单位（不是弧度）。

*   渲染相机时，我只是平移相机位置，但符号相反。

同样适用于旋转：

```
glRotatef(-currentCamera->Rotation().X, 1.0f, 0, 0);
glRotatef(-currentCamera->Rotation().Y, 0, 1.0f, 0);
glRotatef(-currentCamera->Rotation().Z, 0, 0, 1.0f);
glTranslatef(-currentCamera->Position().X, -currentCamera->Position().Y, -currentCamera->Position().Z); 
```

### 我尝试过的（但没有奏效）：

我尝试使用简单的几何和数学，使用毕达哥拉斯定理和简单的三角学，但它失败了，所以我停止尝试让它工作。（例如，如果任何旋转坐标为 0，则结​​果为 NaN）。

### 我尝试过的（并且确实奏效了......几乎）：

使用变换矩阵。

当用户按下这些键中的任何一个时，会生成一个 3d 矢量：

```
+X = right; -X = left
+Y = top; -Y = bottom
+Z = backward (towards camera); -Z = forward (away from camera) 
```

接下来，我生成一个变换矩阵：单位（4x4 矩阵）乘以旋转矩阵 3 次，对于 3 个坐标中的每一个（X 然后 Y 然后 Z）。接下来，我将矩阵应用于我创建的向量，并将结果添加到相机的旧位置。

但是，这种方法似乎存在问题。起初它工作得很好，但过了一会儿，当我按下向上时，它会向侧面移动，而不是它应该的方式。

### 实际代码

如上所述，我尝试使用尽可能少的代码。但是，如果这还不够有用，这里有一些实际代码。我尽力只选择最相关的代码。

```
// ... Many headers

// 'Camera' is a class, which, among other things, it has (things relevant here):
// * Position() getter, SetPosition() setter
// * Rotation() getter, SetRotation() setter

// The position and rotation are stored in another class (template), 'Vector3D <typename T>',
// which has X, Y and Z values. It also implements a '+' operator.

float angle; // this is for animating our little cubes
Camera* currentCamera;

// 'Matrix' is a template, which contains a 4x4 array of a generic type, which is public and
// called M. It also implements addition/subtraction operators, and multiplication. The 
// constructor memset's the array to 0.

// Generates a matrix with 1.0 on the main diagonal
Matrix<float> IdentityMatrix()
{
    Matrix<float> res;

    for (int i = 0; i < 4; i++)
        res.M[i][i] = 1.0f;

    return res;
}

// I used the OpenGL documentation about glRotate() to write this
Matrix<float> RotationMatrix (float angle, float x, float y, float z)
{
    Matrix<float> res;

    // Normalize; x, y and z must be smaller than 1
    if (abs(x) > 1 || abs(y) > 1 || abs(z) > 1)
    {
        // My own implementation of max which allows 3 parameters
        float M = Math::Max(abs(x), abs(y), abs(z)); 
        x /= M; y /= M; z /= M;
    }

    // Vars
    float s = Math::SinD(angle); // SinD and CosD convert the angle to degrees
    float c = Math::CosD(angle); // before calling the standard library sin and cos

    // Vector
    res.M[0][0] = x * x * (1 - c) + c;
    res.M[0][1] = x * y * (1 - c) - z * s;
    res.M[0][2] = x * z * (1 - c) + y * s;
    res.M[1][0] = y * x * (1 - c) + z * s;
    res.M[1][1] = y * y * (1 - c) + c;
    res.M[1][2] = y * z * (1 - c) - x * s;
    res.M[2][0] = x * z * (1 - c) - y * s;
    res.M[2][1] = y * z * (1 - c) + x * s;
    res.M[2][2] = z * z * (1 - c) + c;
    res.M[3][3] = 1.0f;

    return res;
}

// Used wikipedia for this one :)
Matrix<float> TranslationMatrix (float x, float y, float z)
{
    Matrix<float> res = IdentityMatrix();

    res.M[0][3] = x;
    res.M[1][3] = y;
    res.M[2][3] = z;

    return res;
}

Vector3D<float> ApplyMatrix (Vector3D<float> v, const Matrix<float>& m)
{
    Vector3D<float> res;

    res.X = m.M[0][0] * v.X + m.M[0][1] * v.Y + m.M[0][2] * v.Z + m.M[0][3];
    res.Y = m.M[1][0] * v.X + m.M[1][1] * v.Y + m.M[1][2] * v.Z + m.M[1][3];
    res.Z = m.M[2][0] * v.X + m.M[2][1] * v.Y + m.M[2][2] * v.Z + m.M[2][3];

    return res;
}

// Vector3D instead of x, y and z 
inline Matrix<float> RotationMatrix (float angle, Vector3D<float> v)
{
    return RotationMatrix (angle, v.X, v.Y, v.Z);
}

inline Matrix<float> TranslationMatrix (Vector3D<float> v)
{
    return TranslationMatrix (v.X, v.Y, v.Z);
}

inline Matrix<float> ScaleMatrix (Vector3D<float> v)
{
    return ScaleMatrix (v.X, v.Y, v.Z);
}

// This gets called after everything is initialized (SDL, OpenGL etc)
void OnStart()
{
    currentCamera = new Camera("camera0");
    angle = 0;
    SDL_ShowCursor(0); // Hide cursor
}

// This gets called periodically
void OnLogicUpdate()
{
    float delta = .02; // How much we move
    Vector3D<float> rot = currentCamera->Rotation();
    Vector3D<float> tr (0, 0, 0);

    Uint8* keys = SDL_GetKeyState(0);

    // Cube animation
    angle += 0.05;

    // Handle keyboard stuff
    if (keys[SDLK_LSHIFT] || keys[SDLK_RSHIFT]) delta = 0.1;
    if (keys[SDLK_LCTRL] || keys[SDLK_RCTRL]) delta = 0.008;

    if (keys[SDLK_UP] || keys[SDLK_w]) tr.Z += -delta;
    if (keys[SDLK_DOWN] || keys[SDLK_s]) tr.Z += delta;
    if (keys[SDLK_LEFT] || keys[SDLK_a]) tr.X += -delta;
    if (keys[SDLK_RIGHT] || keys[SDLK_d]) tr.X += delta;

    if (keys[SDLK_e]) tr.Y += -delta;
    if (keys[SDLK_q]) tr.Y += delta;

    if (tr != Vector3D<float>(0.0f, 0.0f, 0.0f))
    {
        Math::Matrix<float> r = Math::IdentityMatrix();
        r *= Math::RotationMatrix(rot.X, 1.0f, 0, 0);
        r *= Math::RotationMatrix(rot.Y, 0, 1.0f, 0);
        r *= Math::RotationMatrix(rot.Z, 0, 0, 1.0f);

        Vector3D<float> new_pos = Math::ApplyMatrix(tr, r);
        currentCamera->SetPosition(currentCamera->Position() + new_pos);
    }
}

// Event handler, handles mouse movement and ESCAPE exit
void OnEvent(SDL_Event* e)
{
    const float factor = -.1f;

    if (e->type == SDL_MOUSEMOTION)
    {
        // Is mouse in the center? If it is, we just moved it there, ignore
        if (e->motion.x == surface->w / 2 && e->motion.y == surface->h / 2)
            return;

        // Get delta
        float dx = e->motion.xrel;
        float dy = e->motion.yrel;

        // Make change
        currentCamera->SetRotation(currentCamera->Rotation() + World::Vector3D<float>(dy * factor, dx * factor, 0));

        // Move back to center
        SDL_WarpMouse(surface->w / 2, surface->h / 2);

    }

    else if (e->type == SDL_KEYUP)
    switch (e->key.keysym.sym)
    {
        case SDLK_ESCAPE:
            Debug::Log("Escape key pressed, will exit.");
            StopMainLoop(); // This tells the main loop to stop
            break;

        default: break;
    }
}

// Draws a cube in 'origin', and rotated at angle 'angl'
void DrawCube (World::Vector3D<float> origin, float angl)
{
    glPushMatrix();
    glTranslatef(origin.X, origin.Y, origin.Z);
    glRotatef(angl, 0.5f, 0.2f, 0.1f);

    glBegin(GL_QUADS);
        glColor3f(0.0f,1.0f,0.0f);          // green
        glVertex3f( 1.0f, 1.0f,-1.0f);          // Top Right Of The Quad (Top)
        glVertex3f(-1.0f, 1.0f,-1.0f);          // Top Left Of The Quad (Top)
        glVertex3f(-1.0f, 1.0f, 1.0f);          // Bottom Left Of The Quad (Top)
        glVertex3f( 1.0f, 1.0f, 1.0f);          // Bottom Right Of The Quad (Top)

        glColor3f(1.0f,0.5f,0.0f);          // orange
        glVertex3f( 1.0f,-1.0f, 1.0f);          // Top Right Of The Quad (Bottom)
        glVertex3f(-1.0f,-1.0f, 1.0f);          // Top Left Of The Quad (Bottom)
        glVertex3f(-1.0f,-1.0f,-1.0f);          // Bottom Left Of The Quad (Bottom)
        glVertex3f( 1.0f,-1.0f,-1.0f);          // Bottom Right Of The Quad (Bottom)

        glColor3f(1.0f,0.0f,0.0f);          // red
        glVertex3f( 1.0f, 1.0f, 1.0f);          // Top Right Of The Quad (Front)
        glVertex3f(-1.0f, 1.0f, 1.0f);          // Top Left Of The Quad (Front)
        glVertex3f(-1.0f,-1.0f, 1.0f);          // Bottom Left Of The Quad (Front)
        glVertex3f( 1.0f,-1.0f, 1.0f);          // Bottom Right Of The Quad (Front)

        glColor3f(1.0f,1.0f,0.0f);          // yellow
        glVertex3f( 1.0f,-1.0f,-1.0f);          // Bottom Left Of The Quad (Back)
        glVertex3f(-1.0f,-1.0f,-1.0f);          // Bottom Right Of The Quad (Back)
        glVertex3f(-1.0f, 1.0f,-1.0f);          // Top Right Of The Quad (Back)
        glVertex3f( 1.0f, 1.0f,-1.0f);          // Top Left Of The Quad (Back)

        glColor3f(0.0f,0.0f,1.0f);          // blue
        glVertex3f(-1.0f, 1.0f, 1.0f);          // Top Right Of The Quad (Left)
        glVertex3f(-1.0f, 1.0f,-1.0f);          // Top Left Of The Quad (Left)
        glVertex3f(-1.0f,-1.0f,-1.0f);          // Bottom Left Of The Quad (Left)
        glVertex3f(-1.0f,-1.0f, 1.0f);          // Bottom Right Of The Quad (Left)

            glColor3f(1.0f,0.0f,1.0f);          // violet
            glVertex3f( 1.0f, 1.0f,-1.0f);          // Top Right Of The Quad (Right)
            glVertex3f( 1.0f, 1.0f, 1.0f);          // Top Left Of The Quad (Right)
            glVertex3f( 1.0f,-1.0f, 1.0f);          // Bottom Left Of The Quad (Right)
            glVertex3f( 1.0f,-1.0f,-1.0f);          // Bottom Right Of The Quad (Right)

    glEnd();

    glPopMatrix();
}

// Gets called periodically
void OnRender()
{
    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);
    glLoadIdentity();

    // Camera movement
    glRotatef(-currentCamera->Rotation().X, 1.0f, 0, 0);
    glRotatef(-currentCamera->Rotation().Y, 0, 1.0f, 0);
    glRotatef(-currentCamera->Rotation().Z, 0, 0, 1.0f);
    glTranslatef(-currentCamera->Position().X, -currentCamera->Position().Y, -currentCamera->Position().Z);

    // Draw some cubes
    for (float i = -5; i <= 5; i++)
        for (float j = -5; j <= 5; j++)
        {
            DrawCube(World::Vector3D<float>(i*3, j * 3, -5), angle + 5 * i + 5 * j);
        }

    SDL_GL_SwapBuffers();
} 
```

正如您可能看到的，我很难创建一个简单的示例，因为背后发生了很多事情，还有很多类和数据类型。

### 其他奖励的东西

我还上传了一个可执行文件（希望它可以工作），这样你就可以看到我在说什么问题：

[https://dl.dropbox.com/u/24832466/Downloads/debug.zip](https://dl.dropbox.com/u/24832466/Downloads/debug.zip)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-16T20:43:39.383

我相信这与“相机矩阵”（相机的世界空间位置）之间的一些混淆有关，它是“视图矩阵”（从世界空间转换为视图空间的矩阵）的逆矩阵。

首先，一点背景。

您从相机的世界空间位置开始，它是 X、Y 和 Z 旋转。如果这个相机只是我们放置在场景中的一个典型对象，我们会这样设置它：

```
glTranslate(camX, camY, camZ);
glRotate(x);
glRotate(y);
glRotate(z); 
```

所有这些操作共同创建了我将定义为“CameraToWorldMatrix”的矩阵，或“从相机空间转换到世界空间的矩阵”。

然而，当我们处理视图矩阵时，我们不想从相机空间转换到世界空间。对于视图矩阵，我们希望将坐标从世界空间转换到相机空间（逆运算）。所以我们的视图矩阵实际上是一个“WorldToCameraMatrix”。

您采用“CameraToWorldMatrix”的“逆”的方式是以相反的顺序执行所有操作（您几乎可以这样做，但顺序略有混淆）。

上述矩阵的逆矩阵为：

```
glRotate(-z);
glRotate(-y);
glRotate(-x);
glTranslate(-camX, -camY, -camZ); 
```

这几乎是你所拥有的，但你把顺序搞混了。

在您的代码中：

```
Math::Matrix<float> r = Math::IdentityMatrix();
r *= Math::RotationMatrix(rot.X, 1.0f, 0, 0);
r *= Math::RotationMatrix(rot.Y, 0, 1.0f, 0);
r *= Math::RotationMatrix(rot.Z, 0, 0, 1.0f);

Vector3D<float> new_pos = Math::ApplyMatrix(tr, r);
currentCamera->SetPosition(currentCamera->Position() + new_pos); 
```

您将“CameraToWorldMatrix”定义为“首先围绕 X 旋转，然后是 Y，然后是 Z，然后平移”。

但是，当您将其反转时，您会得到与“WorldToCameraMatrix”不同的东西，后者是（平移，然后围绕 z 旋转，然后围绕 y 旋转，然后围绕 x 旋转）。

因为您的视图矩阵和相机矩阵实际上并没有定义相同的东西，所以它们会不同步并且您会出现奇怪的行为。

# javascript - 返回多个变量的 JavaScript 函数：数组与对象。最佳做法是什么？

> ID：11994823
> 
> 赞同：0
> 
> 时间：2012-08-16T20:16:18.023
> 
> 标签：javascript, function

我们应该使用数组还是对象从 JavaScript 函数中获取多个变量？这还重要吗？什么被认为是这样做的最佳实践？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T20:20:04.767

这完全取决于您返回的数据类型。如果您要返回一个变量列表，其中包含所有相同类型的事物，因此不需要单独标识，或者如果订单很重要，那么您应该将它们放在一个数组中并返回该数组。

如果您要返回 N 个不同的东西，那么您应该将它们放在具有属性名称的对象中并返回该对象。虽然您也可以在数组中返回这些，并且只有一个隐含规则，即数组中的第一项是“x”坐标，数组中的第二项是“y”坐标，然后第三项是“宽度”依此类推，如果您使用具有命名属性的对象，代码实际标识哪个是哪个，则您的代码会更加自我记录。从长远来看，我认为这更易于维护（尤其是那些没有编写原始代码的人）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T20:18:17.177

使用一个对象，以便您可以命名您的返回值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T20:20:21.297

如果订单计数使用数组，则对象不知道其属性的顺序。请看一下这个问题，它可能会回答您的一些问题：[Objects vs arrays in Javascript for key/value pair](https://stackoverflow.com/questions/688097/objects-vs-arrays-in-javascript-for-key-value-pairs)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T20:20:59.377

如果你愿意使用 Coffescript，你可以只返回一个元组。

```
weatherReport = (location) ->
  # Make an Ajax request to fetch the weather...
  [location, 72, "Mostly Sunny"]

[city, temp, forecast] = weatherReport "Berkeley, CA" 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-16T20:23:07.560

这是经验法则：

如果您需要字符串索引或非数字索引，请`0...N`使用对象。

如果您不这样做，或者如果顺序很重要，请使用数组。

# php - PHP 从数据库中下拉数据

> ID：11994824
> 
> 赞同：0
> 
> 时间：2012-08-16T20:16:19.063
> 
> 标签：php, select, drop-down-menu

我正在尝试`select field`根据我的数据库制作数据。所以，基本上，我希望它为我的数据库中的所有用户提供一个下拉菜单。所以喜欢而不是这样做：

```
<select>
  <option>1st User in Db</option>
  <option>2nd User in Db</option>
</select> 
```

它只是自动显示所有。

我尝试获取 $row['uname']，并将其设置为 $user，但随后它仅在下拉列表中显示我的用户。

示例： http: [//prntscr.com/dwksy](http://prntscr.com/dwksy)

它只显示我的帐户管理员，而不是所有其他帐户。有人知道怎么做吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T20:21:50.693

```
<?php

session_start();
include 'config.php';
$user = $_SESSION['username'];
$qry=("SELECT `rank`, `uname` FROM users WHERE uname='$user'");
$result=mysql_query($qry);
$row = mysql_fetch_assoc($result);
$rank = $row["rank"]

if ($_SESSION['loggedin'] == true) {
    if ($rank >= 3) {
        $qry=("SELECT `rank`, `uname` FROM users");
        $result=mysql_query($qry);

        echo "
        <form action='' method='POST'>
        <select>";

        while ($row = mysql_fetch_assoc($result)) {
            $rank = $row['rank'];
            $users = $row['uname'];
            $lol = ucwords($users);

            echo "<option>$lol</option>";
        }

        echo "</select>
        </form>
        ";
      } else {
          echo "Your level is not 3, but you are logged in.";
      }
  } else {
     echo "Please login.";
  } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T20:25:32.923

您的查询仅获取记录在`$_SESSION`. 删除 WHERE 子句以获取结果中的所有用户，然后使用 @andrewsi 的循环读取它们并`<option>`为每个返回的用户吐出一个：

```
$qry=("SELECT `rank`, `uname` FROM users"); 
```

# user-controls - 带有应用程序栏 windows phone 的用户控制页面

> ID：11994825
> 
> 赞同：0
> 
> 时间：2012-08-16T20:16:19.650
> 
> 标签：user-controls, popup, windows-phone, application-bar

我正在创建一个具有多个页面的应用程序，其中一个是用户控制页面，它的工作方式就像一个妄想页面的弹出窗口。如何在该用户控制页面上添加应用程序栏？？？我一直在尝试使用以下代码，但它不起作用。

```
>     <phone:ApplicationBar>
>             <shell:ApplicationBar IsVisible="True" IsMenuEnabled="True">
>                 <shell:ApplicationBarIconButton IconUri="/Images/appbar_button1.png" Text="Button 1"/>
>                 <shell:ApplicationBarIconButton IconUri="/Images/appbar_button2.png" Text="Button 2"/>
>                 <shell:ApplicationBar.MenuItems>
>                     <shell:ApplicationBarMenuItem Text="MenuItem 1"/>
>                     <shell:ApplicationBarMenuItem Text="MenuItem 2"/>
>                 </shell:ApplicationBar.MenuItems>
>         </shell:ApplicationBar>
>         </phone:ApplicationBar> 
```

我收到一条错误消息，提示“XML 命名空间‘clr-namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone’中不存在标签‘ApplicationBar’。”。

我欢迎任何想法。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-23T09:03:17.040

这是解决方案：您在应用程序资源区域中定义它：

```
<Application.Resources>

    <shell:ApplicationBar x:Key="GlobalAppBar" IsVisible="True" IsMenuEnabled="True">
        <shell:ApplicationBarIconButton IconUri="/Images/appbar_button1.png" Text="Button 1" Click="Button1_Click" />
        <shell:ApplicationBarIconButton IconUri="/Images/appbar_button2.png" Text="Button 2" Click="Button2_Click" />
        <shell:ApplicationBar.MenuItems>
            <shell:ApplicationBarMenuItem Text="MenuItem 1" Click="MenuItem1_Click" />
            <shell:ApplicationBarMenuItem Text="MenuItem 2" Click="MenuItem2_Click" />
        </shell:ApplicationBar.MenuItems>
    </shell:ApplicationBar>

</Application.Resources> 
```

在此处查看更多信息：http: [//msdn.microsoft.com/en-us/library/windowsphone/develop/hh394043 (v=vs.105).aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh394043%28v=vs.105%29.aspx)

# json - node.js 解析请求的 JSON

> ID：11994829
> 
> 赞同：9
> 
> 时间：2012-08-16T20:17:01.833
> 
> 标签：json, node.js, request

我正在向 node.js 发送带有以下请求的凭据 JSON 对象：

```
credentials = new Object();
credentials.username = username;
credentials.password = password;

$.ajax({
    type: 'POST',
    url: 'door.validate',
    data: credentials,
    dataType: 'json',
    complete: function(validationResponse) {
        ...
    }
}); 
```

在服务器端，我想将提交的凭据加载到 JSON 对象中以进一步使用它。

但是，我不知道如何从 req 对象中获取 JSON ......

```
http.createServer(
    function (req, res) {
         // How do i acess the JSON
         // credentials object here?
    }
).listen(80); 
```

（我的函数中有一个调度程序（req, res）将 req 进一步传递给控制器​​，所以我不想使用 .on('data', ...) 函数）

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-16T21:03:55.803

在服务器端，您将收到 jQuery 数据作为请求参数，而不是 JSON。如果您以 JSON 格式发送数据，您将收到 JSON 并需要对其进行解析。就像是：

```
$.ajax({
    type: 'GET',
    url: 'door.validate',
    data: {
        jsonData: "{ \"foo\": \"bar\", \"foo2\": 3 }"
        // or jsonData: JSON.stringify(credentials)   (newest browsers only)
    },
    dataType: 'json',
    complete: function(validationResponse) {
        ...
    }
}); 
```

在服务器端，您将执行以下操作：

```
var url = require( "url" );
var queryString = require( "querystring" );

http.createServer(
    function (req, res) {

        // parses the request url
        var theUrl = url.parse( req.url );

        // gets the query part of the URL and parses it creating an object
        var queryObj = queryString.parse( theUrl.query );

        // queryObj will contain the data of the query as an object
        // and jsonData will be a property of it
        // so, using JSON.parse will parse the jsonData to create an object
        var obj = JSON.parse( queryObj.jsonData );

        // as the object is created, the live below will print "bar"
        console.log( obj.foo );

    }
).listen(80); 
```

请注意，这将适用于 GET。要获取 POST 数据，请查看此处：[如何在 Node.js 中提取 POST 数据？](https://stackoverflow.com/questions/4295782/node-js-extracting-post-data)

要将您的对象序列化为 JSON 并在 jsonData 中设置值，您可以使用`JSON.stringify(credentials)`（在最新的浏览器中）或[JSON-js](https://github.com/douglascrockford/JSON-js)。此处的示例：[在 jQuery 中序列化为 JSON](https://stackoverflow.com/questions/191881/serializing-to-json-in-jquery)

* * *

## 回答 #2

> 赞同：-5
> 
> 时间：2012-08-16T20:24:27.037

Console.log 请求

```
http.createServer(
    function (req, res) {

    console.log(req); // will output the contents of the req

    }
).listen(80); 
```

如果成功发送，帖子数据将在某处。

# php - PHP重复函数调用，最佳实践？

> ID：11994832
> 
> 赞同：1
> 
> 时间：2012-08-16T20:17:12.177
> 
> 标签：php, javascript, cron

我正在寻找创建一个 php 脚本来检查网站以查看其上是否有某些内容，然后如果内容存在则给我发短信。经过一番重新搜索，我找到了[PHP DOM](http://php.net/manual/en/book.dom.php)，我将使用它来加载 html、解析它，然后检查给定的内容是否存在。但是，这只会在我每次加载页面时发生。我希望这个脚本每 30 分钟左右运行一次。这样做的最佳方法是什么？

我遇到的解决方案：

我读到我可以使用 cron 作业，尽管我也读到在这样的服务器上运行重复的函数调用是不好的做法。我还认为我可以使用 javascript 的 setTimeout 以一定的时间间隔刷新页面。但是，使用这种方法，我的电脑必须打开浏览器窗口。如果不是这种情况，我更愿意。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T20:30:04.260

如果您希望每 30 分钟执行一次，那么 cron 作业就是要走的路。（信任去@Matt，@Sven，@wanovak，@Dagon）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T20:37:22.177

哈 ！cron 工作，除非您使用非常差的服务器，否则它将很好地处理负载，但不知道确切的脚本，我可能错了！

如果它是共享主机，请检查他们使用 cron 的规则

# javascript - event.preventDefault() 不取消 jQuery Mobile 中的链接方向

> ID：11994833
> 
> 赞同：2
> 
> 时间：2012-08-16T20:17:22.787
> 
> 标签：javascript, jquery, jquery-mobile, event-handling

**背景**
我一直在努力解决这个愚蠢的小问题，即当在 jQuery Mobile 应用程序中的锚元素上触发单击事件时尝试取消链接方向。

假设我有一个简单的多页文档，如下所示：

```
<div data-role="page" id="page-1">          
    <div data-role="content">
        <a href="#page-2" id="mLink">page 2</a>
    </div><!-- /content -->
</div><!-- /page -->

<div data-role="page" id="page-2">
    <div data-role="content">
    </div><!-- /content -->
</div><!-- /page --> 
```

...和这样的JavaScript：

```
(function (MyApp, $, undefined) {
    'use strict';

    // Initializes app
    function init() {       
        $('#mLink').on('click', function (event) {
            event.preventDefault();
            //event.stopPropagation();
            //event.stopImmediatePropagation();

        });
    }

    // jQuery Mobile is ready now -> override defaults
    $(document).on("mobileinit", function () {
        // Set the default page transition
        $.mobile.defaultPageTransition  = 'slide';
    });

    // jQuery Mobile is ready now 
    $(document).ready(init);

}(window.MyApp = window.MyApp || {}, jQuery)); 
```

**问题**
我只是想不通为什么`event.preventDefault()`不取消页面转换。但是，如果我添加`event.stopPropagation()`它将取消它。此外，如果我从应用程序中删除 jQuery Mobile 库，它可以在没有`event.stopPropagation()`.

**问题**
这是正常行为吗？是否可以在处理程序中始终调用它们来取消链接方向？

**备注**
我使用 jQuery Mobile 只是因为它的多页模板、导航和转换功能。

**附加问题**
潜伏在我最初的问题后面的问题是*“jQuery Mobile 对拦截 event.preventDefault() 方法的链接做了什么，以**不**阻止链接的默认操作，即转到目标页面。？”*

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-16T20:23:23.317

普通的？是的。两个都可以打电话吗？是的。
`event.preventDefault()`是防止浏览器默认行为`event.stopPropagation()`的唯一工具，也是防止竞争事件处理程序触发的唯一工具。

如果你想要一个单线，你可以使用`return false`来达到同样的效果。来自[http://api.jquery.com/on/](http://api.jquery.com/on/)：

> 从事件处理程序返回 false 将自动调用 event.stopPropagation() 和 event.preventDefault()。也可以为处理程序传递一个 false 值作为 function(){ return false; 的简写。}。所以， $("a.disabled").on("click", false); 将事件处理程序附加到所有具有“已禁用”类的链接，以防止在单击它们时跟踪它们并阻止事件冒泡。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-16T20:58:59.270

我必须承认我对 jQuery mobile 不太熟悉，但我对此一点也不感到惊讶。我最近为移动设备（纯 JS）编写了一些脚本，您注意到的第一件事是它们中的大多数完全没有点击事件。现在一切都*触手可及*。

问题是，触摸事件严重*超载*：当用户触摸屏幕并按住 X 时间时，他可能正在尝试选择一些文本，或者拿放大镜，或者最初的触摸可能是滑动的开始。没有真正要采取的默认操作`touchstart`。大多数为您提供`tab`事件的脚本，只需为将侦听器`touchstart`绑定`touchend`到 Xms 的触摸元素的事件添加侦听器，并将其映射到`click`.

阻止默认允许不会像这样停止事件，它的默认操作（如果有）不会失败，但事件仍然通过 dom 传播，设置了 touchend 侦听器并且该处理程序将是启动的处理程序一切都结束了。如果您不阻止默认操作，而只是阻止事件进一步向下传播到 DOM，朝向其目标，我的猜测是`touchout`处理程序永远不会被绑定，或者至少永远不会被触发。简而言之：就元素而言，事件从未到达它，因此如果在没有 a 的情况下触发 a ，`touchstart`它就永远不会发生，这一定意味着触摸在 DOM 的其他地方开始。`touchend``touchstart`

我认为，这解释了为什么你会得到这种稍微出乎意料的行为。现在你的问题：

如果没有 jQuery mobile，则会调用单击处理程序。我知道我刚刚说过触摸设备上没有真正的点击事件，但链接确实会触发直接绑定到元素的点击处理程序。然而，点击事件并不能真正委托给移动设备，只有直接绑定似乎可以解决问题。也许你可以在它们冒泡的阶段抓住它们，但对于锚来说，这确实限制了你的选择太多。在您的代码段中，您将单击处理程序直接绑定到您的元素，因此这可能只是解释了为什么它适用于常规 jQ，而不是 jQm。

正常行为？是的，我确实相信。根据我的经验，它是。可以调用这两种方法来停止事件吗？当然，只要您知道两者之间的区别是什么，并且您知道何时以及为什么只调用 1。但是如果您想*终止*该事件，我认为调用两者并没有什么坏处。

注意：已经给出的两个答案都说这`return false;`相当于同时调用`stopPropagation`和`preventDefault`。虽然这在 jQuery 中是正确的，但当您发现自己在编写纯 JS 时情况*并非如此。*在纯 JavaScript 中，从处理程序返回 false 与仅调用相同`preventDefault`，所以要小心。
曾经，MS 的 JScript 实现就是一个很好的例子：

```
//w3c:
e.preventDefault();
e.stopPropagation();
//IE:
e.returnValue = false;
e.cancelBubble = true; 
```

处理程序返回 false === 事件对象的返回值为`false`，但它的冒泡能力保持不变。

# html - 子页面上的锚 #top 发送到索引页面

> ID：11994834
> 
> 赞同：1
> 
> 时间：2012-08-16T20:17:23.310
> 
> 标签：html, anchor

我在子页面上有锚点：

```
<a name="#top">&nbsp;</a>

<a href="#top">Back to top</a> 
```

它适用于索引页面，但不适用于子页面。

始终链接 -`site.com/#top`

也许是 JavaScript 的问题（例如，Fancybox 等）

**更新：**固定 -`<base href="site.com/" />`在`<head>`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T20:50:38.410

不应该是这样吗？（名字上没有#）

```
<a name="top">&nbsp;</a>

<a href="#top">Back to top</a> 
```

或者，您可以这样做：

```
<div id="top">Some content</div>

<a href="#top">Back to top</a> 
```

# android - android中BroadcastReceiver中的getApplication

> ID：11994838
> 
> 赞同：9
> 
> 时间：2012-08-16T20:17:29.787
> 
> 标签：android

我想用`app = (MyApplication)getApplication();`在`BroadcastReceiver`

我正在使用这个链接： http: [//www.devahead.com/blog/tag/application/](http://www.devahead.com/blog/tag/application/)

但`getApplication`在 BroadcastReceiver 中没有退出，我该如何使用它？

我需要它，因为我想在两个 BroadcastReceiver 之间共享数据

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T20:26:37.600

你`BroadcastReceiver`有一个`onReceive(Context ctx, Intent intent)`被调用来接收消息的方法......你正在被手动传递一个上下文。

# objective-c - 首次启动应用程序时 iCloud 不工作

> ID：11994840
> 
> 赞同：5
> 
> 时间：2012-08-16T20:17:43.110
> 
> 标签：objective-c, ios, cocoa-touch, icloud

对于我的应用程序，我使用 iCloud 键值存储来存储一些用户设置。当我的 iPad 和 iPhone 都安装了应用程序时，它可以在我的 iPad 和 iPhone 之间完美同步。我的问题是，当我删除应用程序并重新运行它时，它在我第一次运行它时没有任何来自 iCloud 的设置。再次运行后，即使第一次没有设置，它也有。

我使用了一些 NSLogs 来查看它在键值容器中看到的内容，当应用程序第一次运行时它会显示“（null）”，但任何后续运行都会打印出之前保存的 NSArray。

我很乐意提供代码，但我不完全确定这里有什么相关的。

我会很感激任何帮助，这个问题让我发疯......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-16T20:52:51.087

`NSUbiquitousKeyValueStoreDidChangeExternallyNotification`为和同步添加一个观察者 `NSUbiquitousKeyValueStore`。等待回调很快被调用。

```
if([[NSFileManager defaultManager] URLForUbiquityContainerIdentifier:nil])
{
    [[NSNotificationCenter defaultCenter] addObserver:self
                                             selector:@selector(keyValueStoreChanged:)
                                                 name:NSUbiquitousKeyValueStoreDidChangeExternallyNotification
                                               object:[NSUbiquitousKeyValueStore defaultStore]];

    [[NSUbiquitousKeyValueStore defaultStore] synchronize];
}
else
{
        NSLog(@"iCloud is not enabled");
} 
```

然后`NSUbiquitousKeyValueStoreChangeReasonKey`用来区分第一次同步和服务器更改同步。

```
-(void)keyValueStoreChanged:(NSNotification*)notification 
{
    NSLog(@"keyValueStoreChanged");

    NSNumber *reason = [[notification userInfo] objectForKey:NSUbiquitousKeyValueStoreChangeReasonKey];

    if (reason) 
    {
        NSInteger reasonValue = [reason integerValue];
        NSLog(@"keyValueStoreChanged with reason %d", reasonValue);

        if (reasonValue == NSUbiquitousKeyValueStoreInitialSyncChange)
        {
            NSLog(@"Initial sync");
        }
        else if (reasonValue == NSUbiquitousKeyValueStoreServerChange)
        {
            NSLog(@"Server change sync");
        }
        else
        {
            NSLog(@"Another reason");
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T20:57:38.013

在安装（和启动）您的应用程序和 KVS 下载初始值之间可能存在延迟。如果您正确注册到更改通知，您应该会看到输入的值。

您的代码应始终如下所示，通常在您的`-applicationDidFinishLaunching:`委托方法中：

```
_store = [[NSUbiquitousKeyValueStore defaultStore] retain]; // this is the store we will be using
// watch for any change of the store
[[NSNotificationCenter defaultCenter] addObserver:self
      selector:@selector(updateKVStoreItems:)
      name:NSUbiquitousKeyValueStoreDidChangeExternallyNotification
      object:_store];
// make sure to deliver any change that might have happened while the app was not launched now
[_store synchronize]; 
```

# extjs4 - ExtJS4 树存储加载两次

> ID：11994844
> 
> 赞同：3
> 
> 时间：2012-08-16T20:18:06.123
> 
> 标签：extjs4

我遇到了 ExtJS4 的问题`TreeStore`。即使`autoLoad`设置为 false，商店也会被加载两次。

在我的情况下，我使用`JSON`阅读器来解析`JSON`响应并`rootVisible`在视图类中设置为 false。

我的 TreeStore 代码是：

```
Ext.define('xxx.HostHierarchy', {
    extend: 'Ext.data.TreeStore',
    autoLoad: false,

    proxy: {
        type: 'ajax',
        api: {
            read: '/xxx/hostsview.json'
        },
        reader: {
            type: 'json',
            totalProperty: 'total',
            successProperty: 'success',
            root: 'data'
        }
    }
}); 
```

经过一番搜索和调试，我发现如果`rootVisible`属性设置为`false`，那么 root 的扩展属性将设置为 true ，这会触发多个请求。

为了避免这种情况，我添加了

```
setRootNode: function(node) {
    var me = this;
    if (node != undefined) {
        node.expanded = false;
    }
}, 
```

但它不起作用。

有人可以建议我如何避免这种情况。由于这种多重加载，在我的 UI 屏幕上，所有树节点都出现了两次。

ExtJS 版本是 4.0.5。

谢谢并恭祝安康，

纳里

# wcf - 单元测试 WCF 服务/服务主机如何正确初始化 DI、AutoMapper、引导、全局错误处理？

> ID：11994846
> 
> 赞同：2
> 
> 时间：2012-08-16T20:18:19.917
> 
> 标签：wcf, unit-testing, integration-testing, servicehost

我有几件事我还没有弄清楚如何测试，因为它们紧密集成到 WCF 管道中。也许我应该问如何集成测试？这是我的情况，分为两部分：

1）为了引导我的 DI（我正在使用 Unity Container），我实现了一个自定义 ServiceHostFactory。在这个服务主机工厂中，我传入了我的引导程序代码（例如，用于 AutoMapper 和其他东西）。

如何测试所有这些项目都被*调用*并且我的配置是否正确？当然，当我输入这个时，也许这应该被视为集成测试？如何托管我的服务并使用我的测试对其进行测试？

2) 我的服务也有一个全局错误处理程序。我想编写一个模拟测试来引发异常并验证全局错误处理程序是否确实在捕获它们。

谢谢！

更新：也许我的问题不是很清楚，但经过更多的谷歌搜索，我认为[这](http://www.typemock.com/blog/2009/06/11/wcf-tip-how-to-unit-test-an-errorprovider)就是我所追求的

其他想法或指针表示赞赏。还没有尝试过，因为我不确定我应该去哪个方向。

# java - Spring Webflow - 决策状态与动作状态

> ID：11994847
> 
> 赞同：17
> 
> 时间：2012-08-16T20:18:24.297
> 
> 标签：java, spring, spring-webflow

我正在使用 Spring WebFlow 2，我想知道决策状态与动作状态的区别。

我正在阅读并且不了解决策状态与动作状态的差异。我知道视图状态将显示一个用于输入的 jsp，但决策状态与动作状态的区别是什么？

为什么我应该使用决策状态而不是动作状态？为什么我应该使用动作状态而不是决策状态？

有人可以对此有所了解吗

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-08-16T20:43:13.177

通常，`decision-state`专门用于布尔条件。它发生的事情更加清晰和简洁。

例如，

```
<decision-state id="myDecisionState">
    <if test="myBooleanFunction()" then="resultIsTrueState" else="resultIsFalseState" />
</decision-state> 
```

这可以使用`action-state`这样的复制：

```
<action-state id="myActionState">
    <evaluate expression="myBooleanFunction()" />
    <transition on="yes" to="resultIsTrueState" />
    <transition on="no" to="resultIsFalseState" />
</action-state> 
```

但是，不同之处在于`action-state`它不仅仅对布尔值进行操作 - 它可以在 , 上触发转换，`String (string value)`任何其他结果都被视为 a 。`Boolean (yes/no)``Enum (enum name)``success`

因此，与`decision-state`实际*必须决定某事*的 a 相比，an`action-state`可以简单地用于执行某些代码。

```
<action-state id="myActionState">
    <evaluate expression="myFunction()" />
    <transition on="success" to="myNextState" />
</action-state> 
```

我希望这能解决问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-01-05T14:47:05.917

**1\. 令人困惑的案例**

在 Webflow 中，在某些情况下**<decision-state>**可以以与**<action-state>**类似的方式使用。[文档](http://docs.spring.io/autorepo/docs/webflow/2.4.0.RELEASE/reference/html/actions.html)显示以下两个表达式是可以互换的。

> <action-state id="moreAnswersNeeded">
>   <evaluate expression="interview.moreAnswersNeeded()" />
>   <transition on="yes" to="answerQuestions" />
>   <transition on="no" to="finish" / >
> </动作状态>

和：

> <decision-state id="moreAnswersNeeded">
>   <if test="interview.moreAnswersNeeded()" then="answerQuestions" else="finish" />
> </decision-state>

**2.什么时候用什么？**

鉴于**<decision-state>**只能处理**<action-state>**处理的子集 - 在考虑两个候选人时，我们应该从前者开始。

1.  < **decision-state>**用于 if-else 路由，作为 <action-state> 的替代方案。它作为**对 rounting 的二元决策**。如果它可以应用 - 它应该被使用。
2.  < **action-state>**允许处理更复杂的逻辑。您可以处理异常，您可以执行表达式而不使它们成为条件，并且您可以处理比前者更多的情况。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T22:11:35.293

它们非常相似。您可以将任何决策状态写为动作状态。决策状态只是为条件转换（使用`if`元素）提供了一种方便、简洁的语法。如果我只需要根据结果评估一个表达式和转换，我使用决策状态。否则（例如，如果我有多个表达式要评估），我使用动作状态。

高温高压

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-03-04T16:34:31.067

你可以使用 lambda 条件

例如：x = y ? “真结果”：“假结果”

```
 <view-state id="viewname">
		<on-entry>
			<evaluate expression="flowScope.varx == x ? Bean.somethingX : Bean.somethingY " result="flowScope.varResult" />
		</on-entry>
	</view-state>
```

记住条件

# asp.net - ASP.NET FormView 中的绑定控件

> ID：11994849
> 
> 赞同：0
> 
> 时间：2012-08-16T20:18:35.103
> 
> 标签：asp.net, vb.net, ms-access, data-binding

我有一个我认为是一个非常基本的问题，唯一的问题是尽我所能找出答案并在网上搜索嗨和低我仍然缺少我需要的答案，希望这里的一些绝地可以帮助我出去。

基本上我有一个访问 07 数据库，我将从表单视图中选择和插入。我希望在加载时填充一个下拉列表，其中包含来自我的数据库（ClientNames）中的一个表的唯一 ID 号、名字和姓氏以及要根据 selectedItem 填充的生活区域（文本框），并且用户填写其余信息。

然后，我希望将整个表单插入到一个单独的表（Section1）中，包括从 ClientNames 表中查询的数据。

我所做的是填充下拉列表并将所有字段插入到我想要的表中。我想不通的是在诸如 selectedIndexChanged 事件或通过表单视图中的另一个数据源填充名字、姓氏和居住区字段。我认为此时我已经将自己与研究混淆了，只需要一个明确的方向即可，但我对在 ASP.NET 中绑定数据及其强加的规则不熟悉。所以我们拭目以待。

如果你们都想看的话，我很乐意为我的数据源或表单视图控件提供任何代码片段。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T21:00:07.613

尝试使用下拉菜单上的 OnSelectedIndexChanged 事件来调用一个函数，该函数会提取您需要的所有数据。获得数据后，将其绑定到包含所有字段等的中继器控件 ( [http://www.w3schools.com/aspnet/aspnet_repeater.asp )。](http://www.w3schools.com/aspnet/aspnet_repeater.asp)

希望这可以帮助！

# javascript - javascript字符串隔离问题

> ID：11994856
> 
> 赞同：0
> 
> 时间：2012-08-16T20:19:12.577
> 
> 标签：javascript

我想抓取“/”之前的第一组字符，但之前和之后的值都继续显示。我该怎么做？

```
var str="http://www.youtube.com/fdgfdgfdghgfh";
var fileName_image = str;
var n = fileName_image.substring(fileName_image.lastIndexOf('http://') + 7);
var f = n.substring(n.charAt('/')); 
```

我得到的是：www.youtube.com/fdgfdgfdghgfh

我想得到的是 www.youtube.com

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T20:26:06.053

虽然您可以在没有正则表达式的情况下执行此操作，但这将是很多缓慢且令人困惑的代码。这种字符串处理*正是*正则表达式存在的原因。所以使用它们。

```
// input string
var str = "http://www.youtube.com/fdgfdgfdghgfh";

// matching regex
//   note that forward slashes must be escaped
//   capture text between "http://" (http:\/\/) and the next "/" (\/)
//   use [1] index to retrieve the first captured string (.+?)
var result = str.match(/^http:\/\/(.+?)\//)[1];

// log result
console.log(result); // "www.youtube.com" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T20:24:55.203

所以你想返回 www.youtube.com？像这样-> [http://jsfiddle.net/HqSev](http://jsfiddle.net/HqSev) ???

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T20:25:11.170

```
var str = "http://www.youtube.com/fdgfdgfdghgfh"; 
var start = "http://".length;
// Grabs everything after http:// up until the next slash
str.substring(start, str.indexOf("/", start)); 
```

我喜欢@AlexWayne 的方法，可能会使用它。但是，这个答案会告诉你你哪里出错了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T20:25:47.910

如果您正在寻找字符串“fdgfdgfdghgfh”，您可以将最后一行替换为：

var f = n.substring(n.lastIndexOf('/') + 1);

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-16T20:27:28.510

改变

```
var f = n.substring(n.charAt('/')); 
```

到

```
var f = n.split('/')[1]; 
```

将 [1] 更改为 [0] 以获取斜线之前的内容

在 / 之前获取东西的替代方法是

```
var f = n.substring(0,n.indexOf('/')); 
```

# c# - MVVM 服务方法设计

> ID：11994861
> 
> 赞同：1
> 
> 时间：2012-08-16T20:19:50.010
> 
> 标签：c#, wpf, mvvm

基本上我的服务设置中有我的方法，例如`void GetWebsites(Action<IEnumerable<Site>, Exception> callback);`：

现在我的服务在本地运行，只是接口的实现。但是，我们计划在以后迁移到 WCF。我的问题是这是可以接受的还是我应该以不同的方式这样做。

我希望能够支持在任务上运行我的方法并将进度更新发送回调用该服务的视图模型，以便它可以显示进度条或其他内容。

我在想我应该用 IObservable 替换 Action 并在我的 ViewModel 中订阅它，这样我就可以异步通信了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T15:54:18.870

双工[服务](http://msdn.microsoft.com/en-us/library/ms731064.aspx)将使您的服务异步报告给您的客户端。在您的服务上单向调用“GetWebSites”。然后，您的服务可以开始将站点推送回您认为合适的视图模型。

# linux - CURL：如何输入 type="submit"

> ID：11994867
> 
> 赞同：0
> 
> 时间：2012-08-16T20:20:04.613
> 
> 标签：linux, curl

我很难理解如何使用 curl 提交内容。我已经使用此代码成功登录：

```
curl $HOST -s -L -b $COOKIE -c $COOKIE -d "login=submit&login_name=$USER&login_password=$PASS" > /dev/null
<input name="login" type="hidden" id="login" value="submit" /> 
```

但是当我在另一个页面上尝试类似的东西时它不起作用，它让我发疯：

```
curl $RSS -s -L -b $COOKIE -c $COOKIE -F "submitrssauto=doit"  -o rss

<form  name="submitrss" action="" method="post">
    <input type="submit" name="submitrssauto" id="submitrssauto" value="doit" class="buttons">
    <input type=hidden name="allow_main" value="1">
    <input type=hidden name="allow_rating" value="1">
    <input type=hidden name="allow_comm" value="1">
    <input type=hidden name="lastdate" value="1345109704">
    <input type=hidden name="id" value="4">
    <input type="hidden" name="user_hash" value="e6bf03ffeb6865eadb62eb9d7d99c88e" />
    <input type=hidden name="text_type" value="1">
</forum> 
```

php代码：

```
 echo <<<HTML

    <br />&nbsp;&nbsp;
<form  name="submitrss" action="" method="post">
        <input type="submit" name="submitrssauto" id="submitrssauto" value="doit" class="buttons">
        <input type=hidden name="allow_main" value="{$rss['allow_main']}">
        <input type=hidden name="allow_rating" value="{$rss['allow_rating']}">
        <input type=hidden name="allow_comm" value="{$rss['allow_comm']}">
        <input type=hidden name="lastdate" value="{$xml->lastdate}">
        <input type=hidden name="id" value="{$id}">
        <input type="hidden" name="user_hash" value="$dle_login_hash" />
        <input type=hidden name="text_type" value="{$rss['text_type']}">
</forum>
HTML; 
```

这是我迄今为止尝试过的：

```
 curl $RSS -s -L -b $COOKIE -c $COOKIE -F "submitrssauto=doit"  -o rss
    curl $RSS -s -L -b $COOKIE -c $COOKIE -d "submitrssauto=doit"  -o rss
    curl $RSS -s -L -b $COOKIE -c $COOKIE -o rss -d "submitrssauto=doit&allow_main=1&allow_rating=1&allow_comm=1&lastdate=1345109704‌​&amp;id=4&user_hash=e6bf03ffeb6865eadb62eb9d7d99c88e&text_type=1" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T06:34:15.440

使用 Chrome 的 Developer Tools 或 Firefox 的 Firebug 来跟踪 HTTP 通信过程。这可能对您有所帮助。

发布的数据可能会被类似js脚本处理，所以如果你只使用网页的来源，你可能会忽略某事。

# database - 使用 jQuery 移动创建数据库

> ID：11994869
> 
> 赞同：0
> 
> 时间：2012-08-16T20:20:10.250
> 
> 标签：database, jquery-mobile

我想知道使用 jQuery mobile 为跨平台移动设备创建数据库的最佳方法是什么。我正在制作一个应用程序，您可以在其中创建一周的时间表并保存它。我在想我必须在另一个数据库中创建子数据库，但现在我不确定如何创建数据库。听说用php很好...

任何帮助都会很棒。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T20:31:52.727

What you want will probably best achieved by using a webservice. That way your jquery Mobile will communicate to your remote database that will store the data.

Check out [Adding a database to jquery mobile site](https://stackoverflow.com/questions/8246380/adding-a-database-to-jquery-mobile-site)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T01:08:50.790

在现代浏览器中使用 SQLite 怎么样？

# c# - Linq 优化的相交查询

> ID：11994872
> 
> 赞同：2
> 
> 时间：2012-08-16T20:20:21.787
> 
> 标签：c#, linq, entity-framework

我有这样的结构：

```
public class Tag
{
        public int TagId { get; set; }
        public virtual ICollection<Vacancy> Vacancies { get; set; }
        // ...
}

public class Vacancy
{
        public int VacancyId { get; set; }
        public virtual ICollection<Tag> Tags { get; set; }
        // ...
} 
```

这些实体通过 EF / Code First 方法映射到 MS SQL。

之后，我以某种方式从上下文（基于用户查询）中获取标签列表：

```
List<Tag> userSelectedTags = ...; 
```

我想选择包含所有（！）这些标签的所有空缺，例如：

```
List<Vacancy> vacancies = context.Where(v => v.Tags.Intersect(userSelectedTags)).ToList(); 
```

但！问题是我可能有大量数据。AFAIK Intersect 并不是最好的方法，因为它会为每个空缺选择所有标签，然后对它们执行 Intersect。我不想过多地加载 SQL Server，我绝对可以为此编写纯 sql 查询。但我想知道 LINQ 是否可以为我做这件事？有没有更温和的方法呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-17T20:58:35.610

Arkiliknam 的解决方案非常有效，也许是最有效的解决方案，但它存在一些问题。我开始在评论中指出它们，以改进答案，但这效果不佳。所以这里是 Arkilknam v. 2.0：

```
var result = context.Vacancies; // IQueryable!
var tags = userSelectedTags.Select(t => t.TagId);

foreach(int i in tags)
{
    int j = i; // prevent modified closure.
    result = result.Where(v => v.Tags.Select(t => t.TagId).Contains(j));
}
result.Select(r => .... 
```

它被转换为带有`WHERE EXISTS`谓词链的查询（与选定的标签一样多）。

如果这效果不佳，您可以尝试另一种方法：

```
var r = context.Vacancies
.Where(v => tags.All(i => v.Tags.Select(t => t.TagId).Contains(i)))
.Select (v => ....); 
```

这表示对于所有选定`TagId`的 s，每个 Id 都应该在 a`Vacancy`的 s 集合中`TagId`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T15:48:52.013

不确定这是否会更有效，但我想如果你把它保留为 IQueryable 应该没问题？

```
IEnumerable<Vacancy> result = vacancies;

foreach(var t in tags){
    result = result.Where(v => v.TagIds.Contains(t));
} 
```

# vb.net - 与 VB 中的低级设备交互

> ID：11994876
> 
> 赞同：0
> 
> 时间：2012-08-16T20:21:03.063
> 
> 标签：vb.net, assembly, embedded

我的一个朋友想编写一个与嵌入式设备交互的 VB 应用程序。这是系统的基本概述 -

用户将硬币放入槽中（与任何街机或自动售货机一样）。

然后这会触发 VB 应用程序运行。

这就是我对这个应用程序的了解，它与我无关，我只是被问到它是如何工作的。我告诉他你投币机会在插入硬币时发出信号，他会使用套接字或打开嵌入式设备的管道来监听这些信号......我想这就是它的工作原理是吗？

我还告诉他，投币机并不像他想象的那么简单，因为你需要考虑所有用例......你不仅仅是“听硬币插入”，你必须处理硬币价值等情况，另一枚硬币在系统已经运行时输入等...

*   那么投币机和 VB 应用程序将如何交互...管道/套接字？
*   是否可以在某处购买像这种投币机这样的设备？
*   让这样的设备与 VB 交互是否简单？IE。是否有此类库，或者您是否需要自定义编写设备本身的代码和用于侦听来自它的信号的 VB 代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T20:24:19.647

这完全取决于设备的连接方式，但是您需要在应用程序和设备的低级 IO 之间安装一个驱动程序。

按下一两个按钮的最简单方法是使用标准的 USB 到串行转换器。你可以在网上以大约 1 美元的价格买到这些。RS232 端口具有用于“环形指示器”之类的状态线。当开关短接正确的引脚时，您可以检测应用程序中的串行端口状态。这是一种廉价的方式来做你想做的事。

![RS232 引脚排列](../Images/e67d7038a930489e65fb823237b3ba2f.png)

如果您需要更高级的东西，请深入研究 USB HID。您可以轻松地[使用 .NET 中的 HID 设备进行编程](http://www.codeproject.com/Articles/18099/A-USB-HID-Component-for-C)。

# php - 设置推进工作区

> ID：11994885
> 
> 赞同：1
> 
> 时间：2012-08-16T20:21:53.450
> 
> 标签：php, database, orm, propel

我第一次尝试设置推进，但我似乎无法正确配置它。

我的工作空间是这样的：

> /var/www/prod/[项目名称]/www
> 
> /var/www/dev/propel
> 
> /var/www/dev/projects/[项目名称]/www

所以我想设置它，这样我就可以有推进生成器`./dev/propel/`，只有需要的文件（运行时/构建）才会在其中`./[project_name]/www`，将所有项目配置留在自己的项目文件夹中`./[project_name]`，这样我就可以从中构建它们`./projects/[project_name]`.

如果有更好的方法，请告诉我......有没有简单的方法可以转移`./dev/`到`./prod/`？或者只是做一个 CP 然后运行迁移脚本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T07:38:52.167

使用最新的 Propel 版本（1.6.x），您可以使用[Composer](http://getcomposer.org)管理项目中的依赖项。这不是您的问题的答案，**但**根本不建议安装全局 Propel，这与分离运行时和生成器相同。

如果两者都`dev`拥有`prod`相同的配置，则可以执行`cp`. 但大多数情况下，建议在 in`dev` **和**in 中生成文件，`prod`因为您可以有不同的配置。这就是为什么在其项目中拥有完整的 Propel 库是一个好主意。

# apache - 使用 mod_rewrite 对不同目录中的不同设计进行拆分测试

> ID：11994889
> 
> 赞同：0
> 
> 时间：2012-08-16T20:22:05.163
> 
> 标签：apache, mod-rewrite

为了测试新设计是否有用，我们正在对其进行 A/B 测试。但是，该设计集成了大量文件，因此我们不想一直移动它们。

是否可以使用 mod_rewrite 来掩盖我们已经将两者都移动到它们自己的子目录中的事实？

换句话说，有人访问[http://www.ourdomain.com/](http://www.ourdomain.com/)，他们看到的设计位于“public_html/old/”或“public_html/new/”，这取决于我们在 .htaccess 中设置的显示。但是，他们永远不知道设计在子目录中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T20:30:02.073

尝试将其放入文档根目录的 htaccess 文件中：

```
RewriteEngine On
RewriteCond %{REQUEST_URI} !^/old/
RewriteRule ^(.*)$ /old/$1 [L] 
```

根据需要`old`替换的实例。`new`

# zend-framework - 如何使用正确的路由创建 Zend 子模块

> ID：11994890
> 
> 赞同：2
> 
> 时间：2012-08-16T20:22:05.623
> 
> 标签：zend-framework, routes

我正在创建一个可供数百个应用程序使用的系统。该系统内置于不同的模块中，这些模块处理不同类型的数据，每个模块都有自己的管理、Web 和 api 控制器。

系统变得相当大，我希望将这些模块中的每一个组织成子模块，特别是 api，出于 uri 的目的，所有操作都在单个 api 资源中。

这显然很糟糕，因为随着操作列表的增加，操作名称变得模糊不清。

我找不到任何关于如何在 Zend 中创建子模块的参考资料。我在下面列出了我希望的结构

目前：

```
- /application
  - /moduleA
    - /controllers
      - controller1
      - controller2
      - controller3 (restful API resource)
  - /moduleB
    - /controllers
      - controller1
      - controller2
      - controller3 (restful API resource)
  - /moduleC
    - /controllers
      - controller1
      - controller2
      - controller3 (restful API resource) 
```

我想...

```
- /application
  - /moduleA
    - /controllers
      - controller1
      - controller2
      - /submoduleAPI
        - controller3 (restful API resource)
  - /moduleB
    - /controllers
      - controller1
      - controller2
      - /submoduleAPI
        - controller3 (restful API resource)
  - /moduleC
    - /controllers
      - controller1
      - controller2
      /submoduleAPI
        - controller3 (restful API resource) 
```

路线最终应该用于其他资源

```
/:module/:resource/<:id> 
```

对于 API

```
/:module/api/:resource/<:id> 
```

# php - 将 JSON 从 PHP 返回到数组

> ID：11994896
> 
> 赞同：5
> 
> 时间：2012-08-16T20:22:42.543
> 
> 标签：php, javascript, json, jquery

我想获取返回的 JSON 对象并显示 PHP 查询返回的内容，但是当我使用方括号访问索引值时，它一次只显示一个字符。基本上我希望每个索引都包含查询中的每一行。这个特定的查询有两个结果（id 和文件名）。我想将 id 和 name 都放入 JSON 数组的一个索引中。输出显示如下：

```
7 5.jpg
8 7-mini.jpg 
```

这是我的代码...

```
<script type="text/javascript">

  $(function(){
    $.ajax({                                      
      url: '<?php echo base_url().'jqueryDB/jquery';?>',   
      type:'POST',      
      dataType: 'json',    
      success: function(output_string){
                document.write(output_string[0]);
      }
    });

  }); 
```

现在这个显示'7'，而不是'7 5.jpg'。我怎样才能让它将每一行存储到一个索引中？

这是我的 PHP 文件：

```
 $userID = $this->session->userdata('id');   
    $query = $this->db->query('SELECT * FROM upload WHERE userID = '.$userID);
    $num_rows = $query->num_rows();
    $val = $query->row_array();    

    $output_string = "";  

    foreach ($query->result() as $row){
        $output_string .= $row->id;
        $output_string .= " ".$row->name."<br />";
    }

    echo json_encode($output_string); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-16T20:27:22.090

```
...
$output = array();
foreach ($query->result() as $row) {
  $output[] = $row->id . ' ' . $row->name;
}
echo json_encode($output); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-16T20:28:37.517

首先，您希望将查询结果存储到数组中，*而不是*字符串中。调用的结果`json_encode`将采用该数组并将其转换为 JSON 编码的字符串。

```
$output_array = array();

foreach($query->result() as $row) {
    $output_array[] = array( 'id' => $row->id, 'name' => $row->name );
}

echo json_encode( $output_array ); 
```

请注意，您传递给它的数组可以任意深。 `json_encode`将根据数组的结构来构造对象。我还建议在浏览器中查看生成的字符串，以了解在对这样的多维数组进行编码时 JSON 的样子。

在您的 javascript 中，您必须*解析*字符串以使其成为有用的 JavaScript 对象...

```
success: function(output_string){
    var obj = JSON.parse( output_string );
    // This will iterate over all of the values in the return object
    for(var i in obj) {
        document.write(obj[i].name + '<br>' + obj[i].id);
    }
} 
```

随意以不同的方式构造您的返回对象，我只是脱离了您在问题中提出的内容。

jQuery 还有一些功能，如果您正确指定 MIME 类型，`success`回调的参数将自动为您解析为 JSON 对象。有关更多信息，请参阅[jQuery 文档](http://api.jquery.com/jQuery.ajax/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T20:47:41.397

我在@watcher 的答案出现之前写了大部分内容，这可能是你想要的，但已经写好了，所以我想我把它贴出来。我会像这样修改@David Fells 解决方案：

```
$output = array();
foreach ($query->result() AS $row) {
  $output[$row->id] = array();

  foreach ($row AS $prop=>$value) {
    $output[$row->id][$prop] = $value;
  }
}

$output_json = json_encode($output); 
```

我通常使用 PDO 对象来访问我的数据库并返回一个数组而不是对象。这应该适用于数组，但我相信它也适用于 PHP 中的对象。

这应该适用于返回名为 id 的列的任何查询，并且显然 id 部分可以替换为 $id ，其中 $id 等于您想要使用的任何 id 字符串/整数。

...

现在，当您希望在 PHP 中返回数组（我对 javascript 不是特别熟悉）时，您需要使用：

```
// The TRUE returns it as an array rather than object.
$output = json_decode($output_json, TRUE); 
```

其中大部分是非常基本的，我想你已经知道了。但是标题让我认为最后一部分 - json_decode 部分 - 是您所需要的，也许它会帮助发现这个问题的其他人。

# vba - String.Insert 导致无效的限定符错误？

> ID：11994898
> 
> 赞同：2
> 
> 时间：2012-08-16T20:22:46.107
> 
> 标签：vba

我正在尝试获取用户表单上文本框的值并将其分配给字符串变量，然后使用 String 类的 Insert 方法将连字符插入该字符串变量。每次运行此代码时，我都会收到错误“无效的限定符”，并突出显示 AcctUnitString。

```
Dim AcctUnitString As String

AcctUnitString = AcctUnit.Text
AcctUnitString = AcctUnitString.Insert(2, "-")

Debug.Print (AcctUnitString) 
```

AcctUnit 是用户表单上的文本字段的名称。有什么想法可能导致此错误，或者是做我想做的更好的方法吗？

用户将在文本框中输入一个 13 位代码（例如 9200030015001），我想将其格式化为：92-0003-001-5001。任何帮助是极大的赞赏。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T20:33:30.900

From [here](http://social.msdn.microsoft.com/Forums/pl/exceldev/thread/604c8a6b-dc05-4db8-935d-09dd77221a5b)

> Strings are not objects in VBA, hence they have no methods such as Substring or Remove, as in VB.Net.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T20:30:50.143

我不知道有一个内置的 Excel 函数可以满足您的需求。

```
Sub test()

    Dim AcctUnitString As String

    AcctUnitString = "9200030015001"
    AcctUnitString = InsertString(AcctUnitString, "-", 2)
    MsgBox AcctUnitString
End Sub

Private Function InsertString(OriginalString As String, StringToInsert As String, WhereToInsertIt As Integer) As String
    Dim String1 As String, String2 As String
    String1 = Mid(OriginalString, 1, WhereToInsertIt)
    String2 = Mid(OriginalString, WhereToInsertIt + 1, Len(OriginalString))
    InsertString = String1 & StringToInsert & String2
End Function 
```

[http://www.vbforums.com/showthread.php?141943-Insert-string-within-another-string-at-specific-position](http://www.vbforums.com/showthread.php?141943-Insert-string-within-another-string-at-specific-position)

# javascript - Javascript 对象 - 使用 jQuery 和 this

> ID：11994900
> 
> 赞同：4
> 
> 时间：2012-08-16T20:22:47.380
> 
> 标签：javascript, jquery, object, this, javascript-objects

在对象函数中使用 jQuery 方法（即 - .each()）时，“this”变量将引用被迭代的对象。没有“this”如何访问对象的功能？我意识到这有点令人困惑，所以：

```
test.prototype.init = function(node) {
    node.children().each(function() {
        //call test.anotherFunction() here
        //Would normally call this.anotherFunction(), 
        //  but "this" refers to the current child.
    });
}
test.prototype.anotherFunction = function() {
    //whatever
} 
```

帮助？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-16T20:24:40.067

将 的副本保存`this`到局部变量中（`self`在此示例中命名，但您可以将其命名为任何您想要的名称）并在嵌入函数中使用保存的副本：

```
test.prototype.init = function(node) {
    var self = this;
    node.children().each(function() {
        // use self here to reference the host object
    });
}
test.prototype.anotherFunction = function() {
    //whatever
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-16T20:31:59.357

您还可以使用该`.bind`函数来更改函数的上下文。您提供的任何参数都`.bind`将在函数执行时成为函数的所有者，因此`this`.

```
test.prototype.init = function(node) {
    node.children().each(function(i,el) {
        // this = test.prototype
        // i = index of the current child of `node`
        // el = HTML node of current child
        // $(el) = jQuery object representing current child
    }.bind(this));
}; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T20:26:37.860

您可以在迭代之前定义要引用的对象。您将能够接近它，因为它仍在范围内。

```
var currentObject = this;

test.prototype.init = function(node) {
    node.children().each(function() {
        currentObject.anotherFunction();
    });
}
test.prototype.anotherFunction = function() {
    //whatever
} 
```

# windows-phone-7 - 检查应用程序是否已通过 Toast 通知面板单击启动

> ID：11994909
> 
> 赞同：1
> 
> 时间：2012-08-16T20:23:26.910
> 
> 标签：windows-phone-7, push-notification, mpns

当用户收到 Toast 通知并单击它时，是否可以检查应用程序是否已启动？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T00:43:43.473

在页面 URL（点击 Toast 时打开）中，添加查询字符串。例如：

```
"<wp:Param>/ToastPage.xaml?NavigatedFrom=FromToast</wp:Param>" 
```

然后，在您`ToastPage.xaml`的`OnNavigatedTo`方法中，您可以检查查询字符串

```
string navFrom= "";

NavigationContext.QueryString.TryGetValue("NavigatedFrom", out navFrom); 
```

在这里，如果它来自 toast，`navFrom`将存储该值`FromToast`，否则如果您有其他查询字符串值，它将存储其他内容或保持为`""`.

# php - cakephp中的下拉字段名称

> ID：11994913
> 
> 赞同：0
> 
> 时间：2012-08-16T20:23:50.477
> 
> 标签：php, cakephp, cakephp-1.3

对于 cakephp 1.3，我为生日创建了一个下拉菜单，如下所示

```
 echo $form->input('User.birthday', 
            array(

                'label' => __("form_birthday", "true") , 
                'class' => 'date',
                'selected' => 'empty',
                'dateFormat' => 'DMY',
                'minYear' => date('Y') - 90,
                'maxYear' => date('Y') - 18,
                'separator'=> " ",
                'empty' => __("form_select", true),

            )
        ); 
```

产生

```
 <div class="input date"><label for="UserBirthdayMonth">Month &amp; Year of      Birth</label><select id="UserBirthdayDay" class="date" name="birthday">
 <option value="">- Select  -</option>
 .....
 </select> <select id="UserBirthdayMonth" class="date" name="birthday">
   <option value="">- Select  -</option>
   <option value="01">January</option>
   <option value="02">February</option>
   <option value="03">March</option>
   <option value="04">April</option>
   <option value="05">May</option>
   <option value="06">June</option>
   <option value="07">July</option>
   <option value="08">August</option>
   <option value="09">September</option>
   <option value="10">October</option>
   <option value="11">November</option>
   <option value="12">December</option>
   </select> <select id="UserBirthdayYear" class="date" name="birthday">
   <option value="">- Select  -</option>
   .....
   </select></div> 
```

请注意下拉列表的名称属性都是“生日”。如何在 cake 中更改它，以使上面三个下拉列表的名称属性不完全相同？我希望它们类似于“birthday_month”、“birthday_year”和“birthday_day”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T04:40:34.797

你可以使用这个：

```
echo $this->Form->day('User.birthday', array('empty'=>'Day'));
echo $this->Form->month('User.birthday', array('empty'=>'Month'));
echo $this->Form->year('User.birthday', date('Y')-90 , date('Y') - 18,array('empty'=>'Year')); 
```

它将在帖子中生成相同的输出，请询问是否不适合您..

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-06-28T17:42:17.203

```
echo $this->Form->day('User.birthday', array('empty'=>'Day'));
echo $this->Form->month('User.birthday', array('empty'=>'Month'));
echo $this->Form->year('User.birthday', date('Y')-90 , date('Y') - 18,array('empty'=>'Year')); 
```

# php - Zend 自定义路由，只有参数名，没有值

> ID：11994917
> 
> 赞同：0
> 
> 时间：2012-08-16T20:24:19.307
> 
> 标签：php, zend-framework, routes

我有一个基于模块的 zend 应用程序。我正在尝试根据定义的版本号（参数）适当地路由模块，即。domain.com/api/v1。

我的应用看起来像这样

```
-application
...
--modules 
----default
----api
----api2
... 
```

我的引导程序路由中有一个路由器正确，但默认模块'api'。

```
 $frontController = Zend_Controller_Front::getInstance();

    $router = $frontController->getRouter();

    $route = new Zend_Controller_Router_Route(
                    'api/:apiversion/:controller/:action/*',

                    array('module' => 'api',
                        'apiversion' => ':apiversion',
                        'controller' => ':controller',
                        'action' => ':action')
    );

    $router->addRoute('api', $route); 
```

**如何根据 apiversion 参数“v1”、“v2”进行路由？**

```
domain.com/api/v2/users/id/5 =>  /api2/users/id/5 
```

-是的，我知道我可以让用户输入 domain.com/api2/ ... -不是我想要的。

-是的，我知道我可以让用户输入 domain.com/api/version/2 ... -不是我想要的。

如果我想要的东西不能实现，我只会做那些。谢谢 ：）

**我想我可以做一个 ->getParam("v1") 来看看它是否存在，然后设置适当的模块，除非有一个漂亮的、动态的方式**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T20:42:53.390

做这样的事情怎么样：

```
$frontController = Zend_Controller_Front::getInstance();

$router = $frontController->getRouter();

$route = new Zend_Controller_Router_Route(
            'api/v1/:controller/:action/*',

            array('module' => 'api',
                'apiversion' => 'v1',
                'controller' => ':controller',
                'action' => ':action')
);

$router->addRoute('api', $route);
$route2 = new Zend_Controller_Router_Route(
            'api/v2/:controller/:action/*',

            array('module' => 'api2',
                'apiversion' => 'v2',
                'controller' => ':controller',
                'action' => ':action')
);

$router->addRoute('api2', $route2); 
```

问候

咪咪

# hadoop - 将 CSV 转换为序列文件

> ID：11994930
> 
> 赞同：5
> 
> 时间：2012-08-16T20:25:20.600
> 
> 标签：hadoop, mahout, sequencefile

我有一个 CSV 文件，我想将它转换为一个 SequenceFile，我最终将使用它来创建 NamedVectors 以在集群作业中使用。我一直在使用 seqdirectory 命令尝试创建一个 SequenceFile，然后使用 -nv 选项将该输出输入到 seq2sparse 中以创建 NamedVectors。看起来这是给一个大向量作为输出，但我最终希望我的 CSV 的每一行都成为一个 NamedVector。我哪里错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T07:08:30.583

`seqdirectory`命令将每个文件作为一个文档，因此实际上，您只有一个文档，因此您只能得到一个向量。为了使其正常工作，您可以将 CSV 文件的每一行都设为文件本身，其中文档的**键**是文件的名称，**值**是文件的内容。尽管如此，如果您的语料库很大，这是非常不切实际的，因为磁盘读取和写入可能会变得非常缓慢。

在实践中，您最好关注我在此[***评论中分享的链接***](https://stackoverflow.com/a/11948318/863772)

# asp.net - Asp.Net HTTPWebRequest 返回 JSESSIONID Cookie

> ID：11994931
> 
> 赞同：0
> 
> 时间：2012-08-16T20:25:25.517
> 
> 标签：asp.net, httpwebrequest

构建与使用 JSESSIONID cookie 的站点交互的 ASP.Net 应用程序。我得到的规范说要在每个请求中返回 Cookie。我从登录响应的标头中提取 cookie OK，但是当我尝试在以下请求中使用它时，我得到一个“PlatformNotSupported 错误”显然这是由于安全性中的“改进”。我看到博客谈论编写代理服务器以及创建从 IHttpModule 派生的类。我很困惑。是否有一种直接推荐的编码 HttpWebRequest 的方法，以便我可以传输 Cookie？

StackOverflow 的不常用用户，试图发表评论，失败，所以编辑帖子。代码为：string cookie = "JSESSIONID=" + Session["SessionId"].ToString();

```
 if(Request.Cookies["JSESSIONID"]==null)
        {

            //Request.Headers.Add("Cookie",cookie);//PlatformNotSupportedError
            HttpCookie cook = new HttpCookie("JSESSIONID", Session["SessionId"].ToString());
            Request.Cookies.Add(cook);

        } //The prev login response had the cookie in the header not in the cookies collection so I was trying to send back the same way. ASP.net app at this stage. Will be service after get it going. Thx Bob 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T21:31:25.773

找到了。事实证明，我应该制作一个 cookie 集合并将其分配给我原来的登录请求。
当`SessionId`cookie 返回时，它就会出现在集合中。

```
byte[] bytes = Encoding.UTF8.GetBytes(xml);
  CookieContainer cookies = new CookieContainer();
  HttpWebRequest request = (HttpWebRequest)WebRequest.Create(url);
  request.CookieContainer = cookies;
  request.Credentials = new NetworkCredential(user, password);
  request.Method = "POST";
  request.ContentLength = bytes.Length;
  request.ContentType = "text/xml";
  using (Stream requestStream = request.GetRequestStream())
  {
    requestStream.Write(bytes, 0, bytes.Length);
  } 
```

# android - Android：DialogFragment在隐藏默认边框时包装内容宽度

> ID：11994935
> 
> 赞同：1
> 
> 时间：2012-08-16T20:25:39.137
> 
> 标签：android, dialog, fragment

我有一个带有圆角的自定义对话框视图。因此，我需要隐藏我成功使用的默认对话框边框，getDialog().getWindow().setBackgroundDrawable(new ColorDrawable(0));。

我的问题是对话框现在扩展了整个父宽度，我只希望它像普通对话框窗口一样显示大约 90% 的宽度。我尝试设置 getWindow().setLayout(...) 并设置布局参数属性但无济于事。任何帮助深表感谢。

*更新。删除 getDialog().getWindow().setBackgroundDrawable(new ColorDrawable(0)); 从我的代码中修复了宽度问题，但让我回到了默认对话框边框显示的问题。虽然因为我的自定义对话框没有边框和圆角，但我需要该边框消失而不会像大多数对话框一样丢失 90% 或任何对话框宽度。

```
public final class ResetPasswordDialogFragment extends DialogFragment {

  public static ResetPasswordDialogFragment newInstance() {
    ResetPasswordDialogFragment f = new ResetPasswordDialogFragment();

    Bundle args = new Bundle();
    f.setArguments(args);

    return f;
   }

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    View v = inflater.inflate(R.layout.dialog_fragment_password_reminder, container, false);

    //Removes the default dialog background border
    getDialog().getWindow().setBackgroundDrawable(new ColorDrawable(0));

    Button resetBtn = (Button)v.findViewById(R.id.resetPasswordBtn);
    Button closeBtn = (Button)v.findViewById(R.id.closeBtn);

    //Click Listeners
    resetBtn.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            //TODO web call here
        }
    });
    closeBtn.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
           dismiss();
        }
    });

    return v;
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T20:56:30.330

这可能不是您的最佳解决方案或在您的示例代码中为您提供帮助，但我要做的是在您的活动或任何触发这样的对话框的事件中创建自定义对话框：

```
 dialog = new Dialog(getActivity(),R.style.Theme_CustomDialog);
          dialog.setContentView(R.layout.custom_dialog);
          dialog.show(); 
```

如果您想删除边框，请在您的 Theme_Custom 对话框中给出

```
 <item name="android:windowNoTitle">true</item> 
```

然后在您的 custom_dialog xml 文件中给出一个线性/相对布局，其中包含您要传递的参数和您希望自定义对话框具有的视图

或者，您可以在这里查看：[http](http://android-developers.blogspot.com/2012/05/using-dialogfragments.html) ://android-developers.blogspot.com/2012/05/using-dialogfragments.html和[http://android-er.blogspot.com/2012/01/dialogfragment.html](http://android-er.blogspot.com/2012/01/dialogfragment.html)

# asp.net-mvc - 将 LINQ 投影到 EF 到视图模型的异常。获取“仅无参数构造函数和初始化程序”异常

> ID：11994937
> 
> 赞同：2
> 
> 时间：2012-08-16T20:25:53.723
> 
> 标签：asp.net-mvc, linq, entity-framework, linq-to-entities

我知道这个问题的变体已经在 SO 上令人作呕，但似乎我的代码已经与被反复标记为答案的内容相匹配。我正在处理一些报告，并已将这种模式用于许多其他类似的报告而没有问题。我有一个这样的控制器动作：

```
public ActionResult Filter(ChecksClearingFilterVM Filter)
        {
            var Result = DataQuery(Filter).Select(a => new ChecksClearingResultVM
            {
                CheckAmount = a.Amount,
                CheckNumber = a.CheckNumber,
                Payee = a.NpoName,
                CheckClearDate = a.CheckClearDate,
                CheckDate = a.CheckDate,
            }).ToList(); 
            Filter.Result = Result;
            return View("ChecksClearingResult", Filter);
        } 
```

这是有问题的视图模型：

```
public class ChecksClearingResultVM
    {
        public int? CheckNumber { get; set; }
        public string Payee { get; set; }
        public DateTime CheckDate { get; set; }
        public DateTime? CheckClearDate { get; set; }       
        public decimal CheckAmount { get; set; }       
    } 
```

而另一个视图模型：

```
public class ChecksClearingFilterVM
    {
        public int BankAccountId { get; set; }
        public SelectList SelectBankAccount { get; set; }
        public DateTime? StartDate { get; set; }
        public DateTime? EndDate { get; set; }
        public IEnumerable<ChecksClearingResultVM> Result { get; set; }
    } 
```

我似乎没有调用任何构造函数，更不用说带参数的构造函数了。它轰炸投影。我特别困惑，因为我有一些报告在相同的设计下工作得很好。

也许我的问题是 DataQuery 函数的问题？这是它的外观：

```
 public IQueryable<DistroPayment> DataQuery(ChecksClearingFilterVM Filter)
        {
            var wootz = Tds.DistroPayments
                .Where(b =>
                   b.BankAccountId == Filter.BankAccountId
                   && b.CheckClearDate.HasValue
                   || !b.CheckNumber.HasValue);

            if (Filter.StartDate.HasValue || Filter.StartDate.HasValue)
            {
                if (Filter.StartDate.HasValue)
                {
                    wootz = wootz.Where(x => x.CheckClearDate >= Filter.StartDate);
                }

                if (Filter.EndDate.HasValue)
                {
                    wootz = wootz.Where(x => x.CheckClearDate <= Filter.EndDate);
                }
            }
            else
            {
                wootz = wootz.Where(x => x.CheckClearDate >= new DateTime(DateTime.Now.Year, 1, 1));
            }

            return wootz;
        } 
```

根据要求，这是我的堆栈跟踪。准备 Wall-O-Text：

```
<!--

Message: Only parameterless constructors and initializers are supported in LINQ to Entities.
Source: System.Data.Entity
StackTrace:
   at System.Data.Objects.ELinq.ExpressionConverter.NewTranslator.TypedTranslate(ExpressionConverter parent, NewExpression linq)
   at System.Data.Objects.ELinq.ExpressionConverter.TypedTranslator`1.Translate(ExpressionConverter parent, Expression linq)
   at System.Data.Objects.ELinq.ExpressionConverter.TranslateExpression(Expression linq)
   at System.Data.Objects.ELinq.ExpressionConverter.UnaryTranslator.TypedTranslate(ExpressionConverter parent, UnaryExpression linq)
   at System.Data.Objects.ELinq.ExpressionConverter.TypedTranslator`1.Translate(ExpressionConverter parent, Expression linq)
   at System.Data.Objects.ELinq.ExpressionConverter.TranslateExpression(Expression linq)
   at System.Data.Objects.ELinq.ExpressionConverter.BinaryTranslator.TypedTranslate(ExpressionConverter parent, BinaryExpression linq)
   at System.Data.Objects.ELinq.ExpressionConverter.TypedTranslator`1.Translate(ExpressionConverter parent, Expression linq)
   at System.Data.Objects.ELinq.ExpressionConverter.TranslateExpression(Expression linq)
   at System.Data.Objects.ELinq.ExpressionConverter.TranslateLambda(LambdaExpression lambda, DbExpression input)
   at System.Data.Objects.ELinq.ExpressionConverter.TranslateLambda(LambdaExpression lambda, DbExpression input, DbExpressionBinding& binding)
   at System.Data.Objects.ELinq.ExpressionConverter.MethodCallTranslator.OneLambdaTranslator.Translate(ExpressionConverter parent, MethodCallExpression call, DbExpression& source, DbExpressionBinding& sourceBinding, DbExpression& lambda)
   at System.Data.Objects.ELinq.ExpressionConverter.MethodCallTranslator.OneLambdaTranslator.Translate(ExpressionConverter parent, MethodCallExpression call)
   at System.Data.Objects.ELinq.ExpressionConverter.MethodCallTranslator.SequenceMethodTranslator.Translate(ExpressionConverter parent, MethodCallExpression call, SequenceMethod sequenceMethod)
   at System.Data.Objects.ELinq.ExpressionConverter.MethodCallTranslator.TypedTranslate(ExpressionConverter parent, MethodCallExpression linq)
   at System.Data.Objects.ELinq.ExpressionConverter.TypedTranslator`1.Translate(ExpressionConverter parent, Expression linq)
   at System.Data.Objects.ELinq.ExpressionConverter.TranslateExpression(Expression linq)
   at System.Data.Objects.ELinq.ExpressionConverter.MethodCallTranslator.OneLambdaTranslator.Translate(ExpressionConverter parent, MethodCallExpression call, DbExpression& source, DbExpressionBinding& sourceBinding, DbExpression& lambda)
   at System.Data.Objects.ELinq.ExpressionConverter.MethodCallTranslator.SelectTranslator.Translate(ExpressionConverter parent, MethodCallExpression call)
   at System.Data.Objects.ELinq.ExpressionConverter.MethodCallTranslator.SequenceMethodTranslator.Translate(ExpressionConverter parent, MethodCallExpression call, SequenceMethod sequenceMethod)
   at System.Data.Objects.ELinq.ExpressionConverter.MethodCallTranslator.TypedTranslate(ExpressionConverter parent, MethodCallExpression linq)
   at System.Data.Objects.ELinq.ExpressionConverter.TypedTranslator`1.Translate(ExpressionConverter parent, Expression linq)
   at System.Data.Objects.ELinq.ExpressionConverter.TranslateExpression(Expression linq)
   at System.Data.Objects.ELinq.ExpressionConverter.Convert()
   at System.Data.Objects.ELinq.ELinqQueryState.GetExecutionPlan(Nullable`1 forMergeOption)
   at System.Data.Objects.ObjectQuery`1.GetResults(Nullable`1 forMergeOption)
   at System.Data.Objects.ObjectQuery`1.System.Collections.Generic.IEnumerable<T>.GetEnumerator()
   at System.Data.Entity.Internal.Linq.InternalQuery`1.GetEnumerator()
   at System.Data.Entity.Infrastructure.DbQuery`1.System.Collections.Generic.IEnumerable<TResult>.GetEnumerator()
   at System.Collections.Generic.List`1..ctor(IEnumerable`1 collection)
   at System.Linq.Enumerable.ToList[TSource](IEnumerable`1 source)
   at TDS.UI.Controllers.ChecksClearingController.Filter(ChecksClearingFilterVM Filter) in C:\Users\gbisaccia.CREATEHOPE\Documents\Visual Studio 2010\Projects\TruistConnect\DEVELOPMENT\TruistConnect\TDS.UI\Controllers\ChecksClearingController.cs:line 59
   at lambda_method(Closure , ControllerBase , Object[] )
   at System.Web.Mvc.ActionMethodDispatcher.Execute(ControllerBase controller, Object[] parameters)
   at System.Web.Mvc.ReflectedActionDescriptor.Execute(ControllerContext controllerContext, IDictionary`2 parameters)
   at System.Web.Mvc.ControllerActionInvoker.InvokeActionMethod(ControllerContext controllerContext, ActionDescriptor actionDescriptor, IDictionary`2 parameters)
   at System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass15.<InvokeActionMethodWithFilters>b__12()
   at System.Web.Mvc.ControllerActionInvoker.InvokeActionMethodFilter(IActionFilter filter, ActionExecutingContext preContext, Func`1 continuation)
   at System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass15.<>c__DisplayClass17.<InvokeActionMethodWithFilters>b__14()
   at System.Web.Mvc.ControllerActionInvoker.InvokeActionMethodFilter(IActionFilter filter, ActionExecutingContext preContext, Func`1 continuation)
   at System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass15.<>c__DisplayClass17.<InvokeActionMethodWithFilters>b__14()
   at System.Web.Mvc.ControllerActionInvoker.InvokeActionMethodFilter(IActionFilter filter, ActionExecutingContext preContext, Func`1 continuation)
   at System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass15.<>c__DisplayClass17.<InvokeActionMethodWithFilters>b__14()
   at System.Web.Mvc.ControllerActionInvoker.InvokeActionMethodFilter(IActionFilter filter, ActionExecutingContext preContext, Func`1 continuation)
   at System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass15.<>c__DisplayClass17.<InvokeActionMethodWithFilters>b__14()
   at System.Web.Mvc.ControllerActionInvoker.InvokeActionMethodFilter(IActionFilter filter, ActionExecutingContext preContext, Func`1 continuation)
   at System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass15.<>c__DisplayClass17.<InvokeActionMethodWithFilters>b__14()
   at System.Web.Mvc.ControllerActionInvoker.InvokeActionMethodWithFilters(ControllerContext controllerContext, IList`1 filters, ActionDescriptor actionDescriptor, IDictionary`2 parameters)
   at System.Web.Mvc.ControllerActionInvoker.InvokeAction(ControllerContext controllerContext, String actionName)

--> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T20:36:29.307

```
wootz = wootz.Where(x => x.CheckClearDate >= new DateTime(DateTime.Now.Year, 1, 1)); 
```

那看起来不对。实体框架不理解这个构造函数。您应该能够通过将其设为参数来修复此部分：

```
var startOfYear = new DateTime(DateTime.Now.Year, 1, 1);
wootz = wootz.Where(x => x.CheckClearDate >= startOfYear); 
```

搜索也可以[`EntityFunctions.CreateDateTime`](http://msdn.microsoft.com/en-us/library/system.data.objects.entityfunctions.createdatetime.aspx)作为替代方案。

（注意：我没有检查这是否是唯一的问题。）

# expressionengine - 表达式引擎 - 分层照片库 - 不知道如何构建它

> ID：11994941
> 
> 赞同：1
> 
> 时间：2012-08-16T20:26:07.120
> 
> 标签：expressionengine

说到EE，我有点菜鸟。本质上，我面前的是一个具有以下结构的照片库：

画廊
-A
部分 --Sub Section 1
--Sub Section 2
--Sub Section 3

-B
节 --Sub Section 4
--Sub Section 5
--etc

我在用户导航到图库页面的方式中看到了此功能，在左侧显示了两个部分（A，B），以及来自每个子部分（1、2、3 等）的示例图像。

如果他们导航到“部分”页面，他们应该会看到相同的内容，除了那个特定部分。

从该点导航到子部分将显示相同的内容，但不是仅显示示例图像，而是显示整个图像库（然后触发灯箱幻灯片）。

我对如何设置它感到非常困惑。我尝试了一堆方法，一些元素作为类别，一些作为频道，相关字段等，但我不断遇到障碍，因为 EE 无法嵌套频道条目标签，我无法获得所需的数据，理想情况下，整个功能将包含在单个模板文件中。

该站点当前安装了结构、矩阵字段和通道图像模块。

任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T20:32:00.307

I am not sure if this helps in Expression Engine, but conceptually, this is called Faceted Search. Good examples of this type of search are Amazon, EBay etc. It is achieved by setting up metadata for each of your pictures and then organizing them as "taxonomies"

[http://goo.gl/ROuCn](http://goo.gl/ROuCn)

[http://searchhub.org/dev/2009/09/02/faceted-search-with-solr/](http://searchhub.org/dev/2009/09/02/faceted-search-with-solr/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T12:45:53.810

我会这样处理：

*   图库是一个频道
*   Section A 和 Section B 是该频道中的类别
*   每个小节都是一个条目
*   每个条目中的照片由单个 Channel Images 字段控制（或者，一个带有图像、标题等列的矩阵字段）

    ```
    {exp:channel:categories channel="gallery" style="linear" disable="category_fields"}
        <h1><a href="{path="gallery/section"}">{category_name}</a></h1>
        {exp:channel:entries channel="gallery" category="{cat_id}" disable="member_data|pagination|categories" dynamic="no"}
        {if count == "1"}<ul>{/if}
        {exp:channel:images entry_id="{entry_id}" limit="1"}
            <li><a href="{title_permalink="gallery/detail"}"><img src="{image:url:thumbnail}" alt="{image:title}" /></a></li>
        {if count == total_results}</ul>{/if}
        {/exp:channel:entries}
    {/exp:channel:categories} 
    ```

然后，您的**画廊/版块**模板将在 URL 中包含类别信息，因此那里的频道条目标签将自动仅显示来自该版块/类别的条目。（不确定结构是否会干扰这一点......我建议让这些页面*不由*结构管理。）

**Gallery/detail**只是一个标准的单条目样式模板，您可以从您的频道图像字段中列出所有缩略图。

# javascript - 带有超级下拉菜单的两条水平线

> ID：11994947
> 
> 赞同：1
> 
> 时间：2012-08-16T20:26:53.270
> 
> 标签：javascript, jquery, drop-down-menu

[我在这里](http://www.designchemical.com/lab/jquery-mega-drop-down-menu-plugin/examples/)使用众所周知的 Mega Drop Down Menu 插件。它工作正常，但如果你想制作两行菜单就不行了。我在这里创建了一个示例：[jsFiddle](http://jsfiddle.net/HJGFW/5) There is a problem on second line menu is too height when you hover on it. 谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T22:09:42.737

如果此菜单旨在以这种方式使用，我不肯定，但您可以执行以下操作：

```
$('#mega-menu-1').dcMegaMenu({
    rowItems: '3',
    speed: 0,
    effect: 'slide',
    event: 'hover',
    fullWidth: true,
    beforeOpen: function() {
        $(this).find(".mega").css("top", 40 + $(this).offset().top-$(this).parent().offset().top);
    }
}); 
```

`beforeOpen`基本上根据所选菜单项的偏移量更改菜单顶部。

[http://jsfiddle.net/r0m4n/HJGFW/10/](http://jsfiddle.net/r0m4n/HJGFW/10/)

# python - 在 SSL 中包装现有套接字 - Python

> ID：11994949
> 
> 赞同：2
> 
> 时间：2012-08-16T20:26:53.390
> 
> 标签：python, ssl, starttls

我在 Python 程序中将现有的套接字连接包装在 ssl 中时遇到了一些问题。本质上，它是 STARTTLS 的实现，即当前连接的客户端可以发出 STARTTLS 命令，服务器将保护连接。

这是我正在努力解决的代码部分：

```
self.client_s = ssl.wrap_socket(
    self.client_s,
    certfile='/path/to/cert.crt',
    keyfile='/path/to/key.key',
    do_handshake_on_connect=False
    )
while True:
    try:
        self.client_s.do_handshake()
        break
    except ssl.SSLError, e:
        if e.args[0] == ssl.SSL_ERROR_WANT_READ:
            select([self.client_s], [], [])
        elif e.args[0] == ssl.SSL_ERROR_WANT_WRITE:
            select([], [self.client_s], [])
        else: raise 
```

当我使用 openssl 连接时，我得到以下信息：

```
_ssl.c:491: error:140770FC:SSL routines:SSL23_GET_SERVER_HELLO:unknown protocol 
```

我通过运行这个来连接：

```
openssl s_client -connect localhost:50000 -crlf -starttls smtp -debug -ssl3

```

将 openssl 命令更改为使用`-ssl2`、`-no_ssl2`或`-tls1`没有帮助。我也尝试过添加`server_side=True to wrap_socket()`，但只会导致 ssl 握手超时。

我应该注意，`wrap_socket()`当连接从头到尾加密时工作正常，而不是当我尝试在 STARTTLS 上下文中使用它时。

Python 版本是 2.4.3

在此先感谢，我感谢任何指示或帮助。

# .net - 如何使 DSL 与 VS2010 和 2012 兼容？

> ID：11994950
> 
> 赞同：2
> 
> 时间：2012-08-16T20:26:54.830
> 
> 标签：.net, visual-studio-2010, visual-studio, vsix, dsl-tools

我负责工作中的 DSL/VSVM VSIX 扩展，由于 VS2012 刚刚发布，我想让它与两者兼容。

VSIX 已经可以在两种环境中安装，但我收到加载错误。我还没有完全检查，但我认为这是由于不同的 SDK 版本。

是否可以使我的代码库与两个 Visual Studio 兼容，而无需分叉？

# c# - 带有其他参数的 Unity 构造函数注入

> ID：11994952
> 
> 赞同：11
> 
> 时间：2012-08-16T20:27:05.517
> 
> 标签：c#, oop, unity-container

我有一个带有如下构造函数的类：

```
public BatchService(IRepository repository, ILogger logger, string user) 
```

在我的 DI 引导程序类中，我有以下`RegisterType`命令：

```
.RegisterType<BatchService>(
    new InjectionConstructor(
        new ResolvedParameter<IRepository>("SomeRepository"), 
        new ResolvedParameter<ILogger>("DatabaseLogger"))) 
```

在我的客户端代码中，我想实例化`BatchService`如下：

```
BatchService batchService = DIContainer.Resolve<BatchService>() 
```

如您所见，我有一个`user`作为构造函数的一部分调用的字符串参数`BatchService`，它不是 DI 逻辑的一部分。`user`如果我需要在课堂上使用，我应该如何最好地处理这种情况`BatchService`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-16T20:54:57.913

您可以使用`ParameterOverride`：

```
BatchService batchService = 
DIContainer.Resolve<BatchService>(new ParameterOverride("user", valueForUser)); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-16T20:59:45.150

请不要[滥用 Unity 作为 ServiceLocator](http://blog.ploeh.dk/2010/02/03/ServiceLocatorIsAnAntiPattern.aspx)。

如果要创建需要运行时参数的对象，请使用工厂。您甚至可以通过使用 Unity 版本的[Typed Factories](http://outlawtrail.wordpress.com/2012/07/27/auto-generated-factories-with-unity/)或让 Unity为您[生成工厂委托来放弃实现该工厂的行为。](http://outlawtrail.wordpress.com/2012/07/27/generate-strongly-typed-factory-delegates/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-16T21:22:34.220

首先，`ILogger`与业务逻辑混合并不是一个好主意。您可以直接在中创建 ILogger或通过属性`BatchService`解析。`[Dependency]`DI 它不是灵丹妙药，业务对象的创建不应该依赖于`ILogger`

使用`new InjectionParameter<string>("user")`看一下[注册注入的参数和属性值](http://msdn.microsoft.com/en-us/library/ff660882%28v=pandp.20%29.aspx)以获取更多详细信息

# magento - Magento：类别显示顺序错误

> ID：11994956
> 
> 赞同：0
> 
> 时间：2012-08-16T20:27:23.037
> 
> 标签：magento, navigation, categories

我用的是magento 1.6.2，我发现在导航中显示类别有一些问题。1.我交换了两个类别的职位。类别A和B是类别，C是B的孩子。我在管理页面交换了A和C的位置。所以A现在是B的孩子，而且我还检查了catalog_category_entity的表，它显示A'parent是B。但我仍然发现它们在首页的位置没有改变。我已经删除了缓存和 ssl。另一个问题是导航上不显示新类别，我检查过：isActive 是，Include in Navigation Menu 是。但这没用。

谁知道这件事？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T07:36:54.910

在管理面板的类别页面中检查您的网站/商店范围

还可以尝试清除浏览器缓存。

# javascript - RequireJs shim：如何防止在define（）{...}中出现重复的模块名称？

> ID：11994957
> 
> 赞同：1
> 
> 时间：2012-08-16T20:27:22.593
> 
> 标签：javascript, requirejs

我有以下代码：

```
requirejs.config({
    shim: {
        'underscore': {
            exports: '_'
        },
        'backbone': {
            deps: ['underscore', 'jquery'],
            exports: 'Backbone'
        }
    }
});

define(
    ['underscore', 'backbone'],
    function (underscoreLocal, backboneLocal) {

    console.log(underscoreLocal);
    console.log(backboneLocal);
    console.log(_);
    console.log(Backbone);
    }
); 
```

所有这些控制台日志都会打印一些东西。但是，我想知道是否可以从加载的模块中删除默认导出的模块名称，即。让'Backbone'和'_'在模块内返回未定义？甚至可以使用垫片，还是我只是想错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T14:49:24.130

我认为回调中的“_”和“Backbone”符号是由backbone.js 在全局命名空间中定义的符号。（它们应该是 window._ 或 window.Backbone）。

据我了解，synbols 的“本地”版本是由 requirejs 定义的，因为您明确指定了“导出”变量名。

所以我认为你不能阻止定义全局版本。

# winforms - 从业务层 Windows 应用程序更新进度条

> ID：11994958
> 
> 赞同：0
> 
> 时间：2012-08-16T20:27:22.883
> 
> 标签：winforms, delegates

我有一个 3 层的 vb windows 应用程序，在 ui 中有一个进度条。是否有一个示例说明如何在业务层中调用方法并更新 ui 中的进度条。我如何引用它？

例如，如果我做 businesslayer.domethod()

然后在 businesslayer 中我不能做 ui.progressbar.update 因为它不知道它存在于不同的程序集中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T11:47:33.300

“三层Windows应用程序”是什么意思？这些层在物理上是独立的吗？你是如何实现层间通信的？通过您的示例“busineslayer.dosomething()”，您的所有层似乎都在同一台机器上，并且您没有使用任何远程处理技术。如果您的层只是同一台机器和进程中的逻辑层，那么您可以采用两种方法：

1）您可以将回调委托传递给您的 busineslayer.domethod() 方法，以便它可以回调 UI 以通知进度，或者

2）您的 busineslayer 类可以实现一些事件。让您的 UI 订阅您的事件以获取更新。

我将实施第二种方法。

# javafx-2 - 是否可以在 TextField 中禁止选择？

> ID：11994967
> 
> 赞同：2
> 
> 时间：2012-08-16T20:28:32.180
> 
> 标签：javafx-2

我有一个小问题：我的文本字段一直在选择自己，例如，如果我在应用程序之间使用 alt-tab。

对于我的应用程序，不需要也不会使用文本选择 - 所以我想禁止这种烦人的行为。实际上，只需将选择颜色设置为透明或白色即可。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T23:11:57.483

以下css为我解决了这个问题：

```
-fx-highlight-fill: null;
-fx-highlight-text-fill: null; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-24T14:04:45.610

您可以禁用关键事件的文本选择：

```
myTextField.addEventFilter(KeyEvent.KEY_TYPED, new EventHandler<KeyEvent>() {
    @Override
    public void handle(KeyEvent inputevent) {
        if (!myTextField.getSelectedText().isEmpty()) {
            myTextField.deselect();
        }
    }
}); 
```

对于鼠标事件，您还可以使用：

```
myTextField.addEventFilter(MouseEvent.MOUSE_DRAGGED, new EventHandler<MouseEvent>() {
    @Override
    public void handle(MouseEvent event) {
        if (!myTextField.getSelectedText().isEmpty()) {
            myTextField.deselect();
        }
    }
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2021-11-21T16:45:31.033

超级迟到的答案，但我有一个更好的解决方案。
与其禁用选定文本的样式或管理鼠标事件，不如直接管理 selectedTextProperty()。
该解决方案的优点是：

*   选择属性将始终为空选择
*   双击也涵盖了，不仅是鼠标拖动事件

编码...

```
 textField.selectedTextProperty().addListener((observable, oldValue, newValue) -> {
        if (!newValue.isEmpty()) textField.deselect();
    }); 
```

# jquery - 试图让我的“加载更多”按钮一次加载 5 个滑块

> ID：11994968
> 
> 赞同：1
> 
> 时间：2012-08-16T20:28:33.320
> 
> 标签：jquery

我试图一次显示 5 个滑块，这样当您单击“加载更多”按钮时，将显示 5 个以上。我也不想要警报，我只想让负载消失。不幸的是，我所有的滑块都保持隐藏状态，并且按钮不起作用。这就是我所拥有的...

在我的 CSS 中：

```
.container {
display: none;
} 
```

我的 HTML 是 15 个带有滑块的 div，底部是加载更多按钮：

```
<div class="container"></div>
<a href="#" id="load">Load More</a>​ 
```

我的jQuery是：

```
$(window).load(function() {
$(".container").slice(0, 5).show(); // select the first five
$("#load").click(function(e){ // click event for load more
    e.preventDefault();
    $("container:hidden").slice(0, 5).show(); // select next 5 hidden divs and show them
    if($(".container:hidden").length == 0){ // check if any hidden divs still exist
        alert("No more divs"); // alert if there are none left
    }
}); 
```

});​</p>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T20:32:20.230

If container is holding all of the information you want, then nowhere are you changing it's css to be anything but display:none. This means that no matter what content is in there, nothing is going to be shown. And if you do not want the alert, just delete it? I don't quite understand that part.

# javascript - Rails 将数据从控制器传递到 javascript

> ID：11994985
> 
> 赞同：1
> 
> 时间：2012-08-16T20:30:05.087
> 
> 标签：javascript, ruby-on-rails, model-view-controller, charts

我有一个 Rails 应用程序，其模型名称`Product`具有属性`price`

```
def index
  @products = Product.all 
```

我想绘制一个图表，其中`x-axis`是产品 ID，`y-axis`是产品价格。我将一个数组从控制器传递到`app/assets/javascripts/products.js.coffee`. 数组是 `[[product1.id, product1.price], [product2.id, product2.price], [product3.id, product3.price]]`

我`gon gem`用来帮助我传递数据。这是我更改控制器的方法：

```
def index
 @products = Product.all
 gon.prices = []
 @products.each do |x|
   gon.prices.append([x.id, x.price])
 end
end 
```

这`gon.prices`将在 中可用`app/assets/javascripts/products.js.coffee`，感谢`gon gem`.

我的问题是在控制器内创建数组数组似乎不是一个好习惯。我的问题是：无论如何我可以将整个传递`@products`给 javascript 并在 javascript 内部而不是在控制器内部提取数组？所以我可以`gon.products = @products`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T22:31:41.540

是的，您可以在 JavaScript 中执行此操作，但您需要自定义编码。

就生成数组而言，您为什么不执行以下操作：

```
@products = Products.all
@array = @products.map { |p| [p.id, p.price] } 
```

我个人手动将数据传递给 JavaScript，而不是依赖像 gon 这样的 gem。这样更干净。

在 JavaScript 中，假设您已经为 JSON 中的资源设置好了（因此，您可以访问`/products.json`并获取 JSON）并假设您使用的是 jQuery，那么您的 JavaScript 可以执行以下操作：

```
// fetch the json file and parse
jQuery.getJSON('/products.json', function(data) {
  // convert the results into chart data
  var data_for_chart = jQuery.map(data.products, function(product) {
    return [product.id, product.price];
  });
  // do something with the data
}); 
```

# gcc - 如何在cygwin下将i686-w64-mingw32-gcc-4.5.3.exe别名为gcc？

> ID：11994989
> 
> 赞同：0
> 
> 时间：2012-08-16T20:30:46.030
> 
> 标签：gcc, cygwin, mingw

我现在在 cygwin 中安装了两个 gcc：i686-w64-mingw32-gcc-4.5.3.exe 和 cygwin gcc。为了清楚起见，我会告诉你我做了什么：

```
$ ls -al /usr/bin/gcc*
lrwxrwxrwx 1 用户无 21 Aug 16 13:15 /usr/bin/gcc.exe -> /etc/alternatives/gcc
-rwxr-xr-x 2 用户无 94741 2009 年 2 月 25 日 /usr/bin/gcc-3.exe

$ ls -al /etc/alternatives/gcc*
lrwxrwxrwx 1 用户无 16 年 8 月 18 日 13:15 /etc/alternatives/gcc -> /usr/bin/gcc-3.exe

$ rm /etc/alternatives/gcc

$ ln -S /usr/bin/i686-w64-mingw32-gcc-4.5.3.exe /etc/alternatives/gcc

$ gcc -v
使用内置规范。
COLLECT_GCC=gcc
目标：i686-w64-mingw32
配置为：/cygdrive/i/szsz/tmpp/32gcc/mingw64-i686-gcc-4.5.3-6/src/gcc-4.5.3/configure --srcdir=/cygdrive/i/szsz/tmpp/32gcc/ mingw64-i686-gcc-4.5.3-6/src/gcc-4.5.3 --prefix=/usr --exec-prefix=/usr --bindir=/usr/bin --sbindir=/usr/sbin - -libexecdir=/usr/lib --datadir=/usr/share --localstatedir=/var --sysconfdir=/etc --datarootdir=/usr/share --docdir=/usr/share/doc/mingw64-i686- gcc -C --build=i686-pc-cygwin --host=i686-pc-cygwin --target=i686-w64-mingw32 --with-sysroot=/usr/i686-w64-mingw32/sys-root -- with-build-sysroot=/usr/i686-w64-mingw32/sys-root --disable-multilib --disable-win32-registry --enable-languages=c,ada,c++,fortran,objc,obj-c++ - -enable-fully-dynamic-string --enable-libgomp --enable-sjlj-exceptions --enable-version-specific-runtime-libs --with-dwarf2 --enable-decimal-float=bid --enable-lto
线程型号：win32
gcc 版本 4.5.3 (GCC)

$ gcc -o 测试 test.c
gcc：尝试执行“cc1”时出错：execvp：没有这样的文件或目录

$ /usr/bin/i686-w64-mingw32-gcc.exe -o test test.c

$

```

我如何让 gcc 工作？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-16T20:43:05.457

我认为您需要更改 gcc 符号链接`/usr/bin`以指向正确版本的 GCC。或者，您可以编辑您的`PATH`to have `/etc/alternatives`come before `/usr/bin`，但这可能会产生意想不到的副作用，具体取决于您的设置。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-08-17T09:38:20.483

如果您需要本机 MinGW-w64 GCC，请使用本机 Windows 版本的编译器并从 cmd 调用它，或者如果您必须使用 MSYS。如果没有，请使用 Cygwin 到 Windows 交叉编译器并将前缀编码到 Makefile/CMakeLists.txt/configure 脚本中。

记住 Cygwin != Windows，你正在做的是交叉编译，在 GCC 领域是通过调用前缀二进制文件来完成的。

# objective-c - 托管对象上下文加载时间过长

> ID：11994993
> 
> 赞同：0
> 
> 时间：2012-08-16T20:30:50.720
> 
> 标签：objective-c, core-data

我正在测试我的应用程序的性能，看看它在处理大量数据时的表现。我的应用程序是基于核心数据的，并在实体模式下使用数组控制器来获取数据。

我发现我的应用程序获取了核心数据中存在的所有托管对象，因此我在启动时设置了数组控制器的获取谓词。这大大减少了获取的对象数量。但问题是我的应用程序在充满数据时仍然需要很长时间才能启动。

我在仪器中运行应用程序，核心数据获取仪器确认这不是问题（我的应用程序在启动时仅获取 20-30 个对象）。但是在 Shark 下运行它，我可以看到启动后 4-5 秒，堆栈上的唯一调用是对应用程序托管对象上下文的调用。所以我认为它与托管对象上下文和存储的数据之间的交互有关，即使我没有获取所有数据。如果我清空应用程序或在其中留下少量数据，它会很快启动。

有人知道为什么会这样吗？我错过了一些明显的东西吗？如果我只获取少量对象，为什么要加载托管对象上下文需要这么多？我总是读到核心数据可以很好地扩展，并且编程指南指出 10.000 个对象对于核心数据来说并不多，但在我的应用程序中它有很大的不同，所以我想知道我错在哪里。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T20:45:18.463

惊人的！

在问这个问题几秒钟后，我找到了问题的根源并解决了它！

仅适用于可能面临此问题的人：

您需要为您在应用程序中使用的每个**NSArray 控制器**启用在**对象控制器上****使用延迟获取，以使用****核心数据托管对象上下文解决性能问题**

 ******给你！
应用程序启动速度与您单击它一样快！******

# union - fql 获取我或我的朋友标记的位置信息

> ID：11994995
> 
> 赞同：1
> 
> 时间：2012-08-16T20:30:51.547
> 
> 标签：union, facebook-fql, facebook-rest-api

这是我要找的东西：

*选择 author_uid, tagged_uids, page_id from location_post where author_uid = me() 或 ( author_uid in (select uid2 from friend where uid1=me()) and me() in tagged_uids)*

当我拆分查询时，它们会返回预期的结果。

即，两者

1.  *从 location_post 中选择 author_uid、tagged_uids、page_id where author_uid = me()*
2.  *select author_uid, tagged_uids, page_id from location_post where author_uid in (select uid2 from friend where uid1=me()) and me() in tagged_uids*

按预期工作。我需要的是 2 的联合。我很想说这是 API 中的错误（或限制）

笔记：

1.  如果硬编码我朋友的 id 和我的 id 之一，OR 子句本身就有效。即**author_uid=<my-id> 或 (author_uid=<frnd-id> and <my-id> in tagged_uids)**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T08:47:34.587

问题是查询中的 me() 。我有用户的 ID 并用实际 ID 替换 me() 完成了这项工作

```
SELECT id, author_uid, page_id, tagged_uids, timestamp, coords FROM location_post WHERE (&lt;id> IN tagged_uids or author_uid = &lt;id>) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T21:42:55.773

你试图做的事情不会奏效。您可以尝试运行多查询并立即取回结果并最终比较它们。

# asynchronous - 从通用处理程序中的异步方法注入 JavaScript

> ID：11994996
> 
> 赞同：0
> 
> 时间：2012-08-16T20:30:51.573
> 
> 标签：asynchronous, httphandler, restsharp

在我的通用处理程序中，我使用 RestSharp 执行异步 HTTP POST，然后在等待 POST 请求返回之前向用户显示一些 html。然后，一旦 Http 响应返回，我想通过注入一些 Javascript 来显示一条消息。

```
var asyncHandle = client.ExecuteAsync(request, response =>
    {
       if (response.StatusCode == HttpStatusCode.OK)
       {
           //here I would like to display a notification to the user but the handler already returned processedHtml at this point
           context.Response.Write(@"<script type='text/javascript'>
                                                window.parent.$.gritter.add({
                                                    text: 'some message',
                                                    time: 20000,
                                                    sticky: false
                                                });</script>");
       }
    });

//this line executes before waiting for response from async call
context.Response.Write(processedHtml); 
```

问题是，此时生命周期已经结束，因此 context.Response.Write(@"<s​​cript ... ") 生成“对象引用未设置为对象实例”。当异步响应返回时，还有其他方法可以注入 javascript 吗？