# StackOverflow 问答 11738000-11738999

# iphone - UIViewController 作为弹出窗口

> ID：11738000
> 
> 赞同：1
> 
> 时间：2012-07-31T10:22:30.383
> 
> 标签：iphone, ios, uiviewcontroller

我在静态库中有 ViewController。也有公共接口

*   现在弹出：
*   presentInNavigationVC:(UINavigation...)

是否可以在其他 viewController 中将我的 ViewController 显示为弹出窗口，最好的方法是什么？我想我必须将我的 viewController 视图作为 subView 添加到其他 ViewController 视图。但是在弹出模式和将我的viewController推送到navigationController之间切换应该是完整的逻辑。

弹出窗口应该看起来像 FBDialog：

![脸书弹出窗口](../Images/ba597775247857173c7f020d31100c5f.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T10:35:01.830

设置该视图控制器的视图大小，并使用 addsubview 方法将其添加到 parentviewcontroller 中`[[self view] addSubview:bar];`。当您的过程结束时，然后使用 remove from superview 方法删除该视图，例如 this `[presentingController.view removeFromSuperview];`。

# php - 用php代码或函数替换短代码字符串？

> ID：11738001
> 
> 赞同：1
> 
> 时间：2012-07-31T10:22:30.553
> 
> 标签：php, bbcode

我正在尝试开发一个短代码替换器，但无法真正掌握它。我想要做的是用户可以编写类似 [slideshow]10[/slideshow] 的内容，然后制作 ID 为 10 的幻灯片。就我而言，这是：

```
$slideArray = array(preg_match_all('/\[slideshow\](.*?)\[\/slideshow\]/is', $post, $matches)); 
```

有了这个我：

```
for ($o = 0; $o <= $count; $o++) 
   { 
   $query = mysql_query("SELECT * FROM slideshow WHERE id = ''. $matches[1][$o]. '' LIMIT 1");
   while ($row = mysql_fetch_assoc($query))
   {
    // Slideshow code appears here
   } 
} 
```

这可行，但现在我必须决定幻灯片是出现在帖子的顶部还是底部。但是，如果我想这样做，则此幻灯片会出现在用户编写的位置。因此，它可能会出现在文本中间作为示例。那么是否可以创建 this 的函数，然后使用 preg_replace 将 [slideshow]10[/slideshow] 替换为上面的查询代码。我为我糟糕的英语感到抱歉。

此致

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T12:45:36.350

在“//幻灯片代码出现在此处”区域中添加类似这样的内容

```
$post = str_replace($matches[0][$o], $row['slideshowfield'], $post); 
```

所有代码应如下所示：

```
preg_match_all('/\[slideshow\](.*?)\[\/slideshow\]/Usi', $post, $matches);

if(!empty($matches[1])){
    foreach($matches[1] as $o => $slideshow_id){
        $query = mysql_query("SELECT * FROM slideshow WHERE id = '". (int)$slideshow_id. "' LIMIT 1");
        if($row = mysql_fetch_array($query)){
            $post = str_replace($matches[0][$o], $row['slideshow_html_fieldname'], $post);
        }
    }
} 
```

# wcf-ria-services - 带有 RIA 服务的 Crystal Reports

> ID：11738003
> 
> 赞同：0
> 
> 时间：2012-07-31T10:22:33.130
> 
> 标签：wcf-ria-services, silverlight-5.0, crystal-reports-2010

我是 Silverlight 的新手，我可以使用 Silverlight 应用程序中的域服务将数据从我的数据库中获取到网格中。

但我想将域服务“填充”的数据作为弹出窗口放入 ASP.NET 网页中的 Crystal Report Viewer 中。

[在关注了一篇文章](http://www.codeproject.com/Articles/97452/Integrate-Reporting-Services-with-Silverlight-and?msg=4321239#xx4321239xx)之后，我对 MS Reporting Services 也做了同样的事情。

但是我怎样才能为 SAP 的 Crystal Reports 完成同样的任务呢？急需的建议请

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T07:39:30.520

这并不像人们想象的那么简单，但是我没有准备好东西：

1.  覆盖查询方法
2.  检查将阻止执行查询的自定义 cookie 将在 ASP 会话中保存查询属性的表达式。
3.  编写一个包含 Crystal Report Viewer 的网页：当被调用时，该页面将查找表达式保存的 int 点 2，并使用您的 IQueryable 执行它，以便将结果提供给 Crystal Report。（您可能希望将此 IEnumerable 转换为数据集中的数据表）
4.  客户端，只需调用您的类型的 Context.Load 并设置与第 2 点相同的 cookie，不要期待任何返回，然后使用查看器打开 aspx 页面。

如您所见，这并不容易，但是……可行。

# c# - 从导航堆栈和 WebBrowserTask 中删除当前页面

> ID：11738005
> 
> 赞同：1
> 
> 时间：2012-07-31T10:22:44.210
> 
> 标签：c#, silverlight, windows-phone

我有一个调用 WebBrowserTask 的页面。当用户从浏览器返回时，我不想显示启动任务的页面，而是上一个。

问题是 Navigation 堆栈不包含当前页面，我无法将其从页面中的条目中删除，并且 WebBrowserTask 不允许我们做任何事情。

在 Android 上，我可以指定不将给定的 Activity 添加到后台堆栈中。有这样的吗？

目前，我发现几乎可以做我想做的唯一方法是在调用任务时设置一个标志，并在页面的 OnNavigatedTo 处理程序中检查它。但是在返回前几秒钟该页面仍然可见。这样不好。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T18:55:42.617

我没有对此进行测试，但您也许可以执行以下操作

```
bool navigatedFromBrowser;
public MainPage()
{
    navigatedFromBrowser = false;
}
public void someMethod()
{
    WebBrowserTask webBrowserTask = new WebBrowserTask();
    webBrowserTask.Uri = new Uri("http://msdn.microsoft.com", UriKind.Absolute);
    webBrowserTask.Show();
    navigatedFromBrowser = true;
}
protected override void OnNavigatedFrom(System.Windows.Navigation.NavigationEventArgs e)
{
    if(navigatedFromBrowser && NavigationService.CanGoBack)
    {
        navigatedFromBrowser = false;
        NavigationService.GoBack();
    }

} 
```

这可能是一种丑陋的做法，但它可能会奏效。navigatedFromBrowser 应该保留它的值，因为当从浏览器导航回来时，它将是页面的同一个实例。

# sql - XQuery：查找包含指定 xml 数据的行

> ID：11738010
> 
> 赞同：3
> 
> 时间：2012-07-31T10:23:34.250
> 
> 标签：sql, tsql, xquery, xquery-sql

我有一个包含许多行的表，每行都有一个名为“RecordData”的列，其中包含我希望搜索的 XML 数据。

下面给出了来自该列的三行示例 xml 数据：

1：

```
<Record>
  <RecordField ID="31" Name="Barcode1" DataTypeId="5" TypeName="String" Decimals="0" Format="" Mandatory="False">ABC123</RecordField>
</Record> 
```

2：

```
<Record>
  <RecordField ID="15" Name="Field 1" DataTypeId="7" TypeName="Boolean" Decimals="0" Format="" Mandatory="False">true</RecordField>
  <RecordField ID="16" Name="Field 2" DataTypeId="5" TypeName="String" Decimals="0" Format="" Mandatory="False">purpke</RecordField>
</Record> 
```

3：

```
<Record>
  <RecordField ID="15" Name="Field 1" DataTypeId="7" TypeName="Boolean" Decimals="0" Format="" Mandatory="False">true</RecordField>
  <RecordField ID="16" Name="Field 2" DataTypeId="5" TypeName="String" Decimals="0" Format="" Mandatory="False">12</RecordField>
</Record> 
```

我正在使用以下 SQL 来尝试查找任何具有包含特定搜索词（本示例中为“1”）的 XML 数据的表行。

```
DECLARE @SearchTerm varchar(max)
    SET @SearchTerm = '1'
    SELECT * 
    FROM MyTableOfData
    WHERE RecordFields.value('contains( (/Record/RecordField/text())[1],sql:variable("@SearchTerm"))','bit') = 1 
```

正如您将看到的，这依赖于出现在第一个“RecordField”元素文本中的搜索词，而不是搜索所有“RecordField”节点。意思是，我得到的唯一结果是第 1 行，而不是第 1 行和第 3 行。

我已经阅读了一些相关的 MSDN 文章，并且正在经历谷歌失败的一天，因为我没有更接近于找出如何消除限制并最终破解它。

任何帮助将不胜感激 ：）

编辑：

```
DECLARE @SearchTerm varchar(max)
SET @SearchTerm = '1'
select *
from MyTableOfData
    cross apply MyTableOfData.RecordFields.nodes('/Record/RecordField') as tx(r)
where  tx.r.value('.','varchar(10)') like '%'+@searchterm+'%' 
```

抛出：

```
Msg 493, Level 16, State 1, Line 3
The column 'r' that was returned from the nodes() method cannot be used directly. It can only be used with one of the four XML data type methods, exist(), nodes(), query(), and value(), or in IS NULL and IS NOT NULL checks. 
```

编辑2：

当你准确地复制你被告知的内容时，而不是丢失东西，这有效！：

```
DECLARE @SearchTerm varchar(max)
SET @SearchTerm = '1'
select MyTableOfData.*
from MyTableOfData
    cross apply MyTableOfData.RecordFields.nodes('/Record/RecordField') as tx(r)
where  tx.r.value('.','varchar(10)') like '%'+@searchterm+'%' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T10:34:02.410

`CROSS APPLY`是你没找到的...

```
select yourtable.*
from yourtable
    cross apply yourtable.RecordFields.nodes('/Record/RecordField') as tx(r)
where  tx.r.value('.','varchar(10)') like '%'+@searchterm+'%' 
```

或者

```
where tx.r.value('contains((.),sql:variable("@searchterm"))','bit')=1 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-31T19:18:41.517

您可以使用[存在](http://msdn.microsoft.com/en-us/library/ms189869)。

```
select *
from MyTableOfData
where RecordFields.exist('/Record/RecordField[contains(., sql:variable("@SearchTerm"))]') = 1 
```

# javascript - 具有固定标题和滚动问题的 Datagrid 滚动条

> ID：11738011
> 
> 赞同：0
> 
> 时间：2012-07-31T10:23:37.253
> 
> 标签：javascript, jquery, asp.net, css, datagrid

我有一个数据网格，我将标题设置为不可见，而是将一个固定大小的表作为标题。然后数据网格被包裹在一个具有属性“overflow-y:scroll”的 div 中，所以我可以滚动和查看所有数据网格内容以及列标题：

![在此处输入图像描述](../Images/edc74342dcc46eae93a10ea9def2aa76.png)

这工作正常，但它很丑陋。看下图：

![在此处输入图像描述](../Images/f5c0b73d55ca2919c8e482919423dd3d.png)

好的，我想要的是将滚动条“向上箭头”放在固定标题（一个 html 表）旁边，但这样我仍然能够在滚动时看到标题。

我怎样才能做到这一点？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T10:49:34.607

我建议你看看我为固定表头写的一个开源小函数：[https ://github.com/sagivo/fixed-table-header](https://github.com/sagivo/fixed-table-header)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T14:27:08.990

答案是听到。效果很好！！ [http://www.codeproject.com/Articles/10068/Fixed-header-in-ASP-NET-DataGrid#_rating](http://www.codeproject.com/Articles/10068/Fixed-header-in-ASP-NET-DataGrid#_rating)

# java - 如何在 Java 中使用/调用/调用具有 HttpBasicAuthentication 的 SOAP Web 服务

> ID：11738022
> 
> 赞同：2
> 
> 时间：2012-07-31T10:24:34.250
> 
> 标签：java, eclipse, web-services, soap

我需要你的帮助。我们正在开发一个基于 Web 的应用程序。要在网页上显示的数据（基于 HTML5 JSP 构建）来自 SOAP Web 服务。我们拥有所有具有 HttpBasicAuthentication 的 SOAP Web 服务，这意味着当我们访问 Web 服务时，我们需要传递用户名和密码（即访问 Web 服务所需的身份验证）。您能否建议如何从我的 Web 应用程序调用 Web 服务？我们是否需要使用任何第三方框架，如 Axis2... 等？请注意，我们使用 HTML5、JSP、Java6、Tomcat 6 和 Eclipse 作为开发环境。

感谢您的快速帮助。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T12:11:25.760

I. 在您的 Web 应用程序中使用 WebServices 的第三方工具是

1.  轴
2.  Apache-cxf
3.  Apache-Rampart（用于 Axis 安全性）

您需要做的就是将 WSDL URL 传递给任何实用程序，它会提供客户端存根，您可以在 Web 应用程序中使用它。

II.由于您使用的是 java6，它具有用于 WebServices 的 wsgen 和 wsimport 实用程序，您可以使用任何脚本（例如 ANT 脚本）来调用适当的 java6 实用程序。

三、更简单地说，您可以从 Eclipse 本身生成 WebSerivce 客户端存根。稍后您可以在 WebApplication 的类路径中复制客户端包和所需的 JAR

对于 Eclipse WS 客户端：http: [//www.eclipse.org/webtools/jst/components/ws/1.5/tutorials/WebServiceClient/WebServiceClient.html](http://www.eclipse.org/webtools/jst/components/ws/1.5/tutorials/WebServiceClient/WebServiceClient.html)

# http - 如何在 net/http 中注销 Handler？

> ID：11738029
> 
> 赞同：16
> 
> 时间：2012-07-31T10:25:01.147
> 
> 标签：http, go

我正在编写一个 Web 服务器，其中我需要在运行时注册处理程序。例如，“/create”将为所有 URL 创建一个新的处理程序，如“/123/*”等。我需要一个相应的“/destroy/123”，它将取消注册“/123/*”的处理程序。

这是处理“/create”的代码

```
package main
import (
    "fmt"
    "net/http"
)

type MyHandler struct {
    id int
}
func (hf *MyHandler) ServeHTTP(w http.ResponseWriter, r *http.Request) {
    fmt.Fprintln(w, r.URL.Path)
}

// Creates MyHandler instances and registers them as handlers at runtime
type HandlerFactory struct {
    handler_id int
}
func (hf *HandlerFactory) ServeHTTP(w http.ResponseWriter, r *http.Request) {
    hf.handler_id++
    handler := MyHandler{hf.handler_id}
    handle := fmt.Sprintf("/%d/", hf.handler_id)
    http.Handle(handle, &handler)
}

func main() {
    factory := HandlerFactory{0}
    http.Handle("/create", &factory)
    http.ListenAndServe("localhost:8080", nil)
} 
```

我尝试通过嵌入来实现我自己的多路复用器，`http.ServeMux`但它将其模式到处理程序的映射保存在一个私有变量（`ServeMux.m`）中

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-31T15:35:52.710

我要做的是创建一个自定义`ServerMux`. 从 复制代码`GOROOT/src/pkg/net/http/server.go`。它从第 837 行开始，到 939 结束。

自定义 ServerMux 需要一种注销方法。这应该很容易实现。只需抓住锁和`del()`地图条目。例如（所有代码未经测试）：

```
// TODO: check if registered and return error if not.
// TODO: possibly remove the automatic permanent link between /dir and /dir/.
func (mux *MyMux) Deregister(pattern string) error {
    mux.mu.Lock()
    defer mux.mu.Unlock()
    del(mux.m, pattern)
    return nil
} 
```

为了使用这个新的多路复用器，你可以这样做：

```
mux := newMux()
mux.Handle("/create", &factory)

srv := &http.Server {
    Addr: localhost:8080
    Handler: mux,
}
srv.ListenAndServe() 
```

通过从另一个 goroutine调用来修改 mux`deregister()`是完全安全的，并且会修改`ListenAndServe()`路由消息的方式。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-07T18:33:44.223

看来您已经接受了答案，但我想提出一个替代解决方案。

我质疑添加自定义复用器的必要性。在这个例子中，我使用了 gorilla muxer，但这只是因为我熟悉它的模式匹配。理论上，您可以匹配传入 URL 中的模式，而无需替换默认的 muxer。

我的代码在映射中维护处理程序函数（字符串：处理程序名称 => 函数字面量）...这适合使用默认的 muxers HandleFunc 方法。

样本输入/输出：

获取/注册/123

获取 /123
`hello from123.`

获取/销毁/123

获取 /123
`[nothing]`

```
package main

import (
    "code.google.com/p/gorilla/mux"
    "flag"
    "log"
    "net/http"
)

// Wraps server muxer, dynamic map of handlers, and listen port.
type Server struct {
    Dispatcher *mux.Router
    Urls       map[string]func(w http.ResponseWriter, r *http.Request)
    Port       string
}

// May the signal never stop.
func main() {
    //Initialize Server
    server := &Server{Port: "3000", Dispatcher: mux.NewRouter(), Urls: make(map[string]func(w http.ResponseWriter, r *http.Request))}

    var port = flag.String("port", "3000", "Default: 3000; Set the port for the web-server to accept incoming requests")
    flag.Parse()

    server.Port = *port
    log.Printf("Starting server on port: %s \n", server.Port)

    server.InitDispatch()
    log.Printf("Initializing request routes...\n")

    server.Start() //Launch server; blocks goroutine.
}

func (s *Server) Start() {

    http.ListenAndServe(":"+s.Port, s.Dispatcher)
}

// Initialize Dispatcher's routes.
func (s *Server) InitDispatch() {
    d := s.Dispatcher

    // Add handler to server's map.
    d.HandleFunc("/register/{name}", func(w http.ResponseWriter, r *http.Request) {
        //somewhere somehow you create the handler to be used; i'll just make an echohandler
        vars := mux.Vars(r)
        name := vars["name"]

        s.AddFunction(w, r, name)
    }).Methods("GET")

    d.HandleFunc("/destroy/{name}", func(w http.ResponseWriter, r *http.Request) {
        vars := mux.Vars(r)
        name := vars["name"]
        s.Destroy(name)
    }).Methods("GET")

    d.HandleFunc("/{name}", func(w http.ResponseWriter, r *http.Request) {
        //Lookup handler in map and call it, proxying this writer and request
        vars := mux.Vars(r)
        name := vars["name"]

        s.ProxyCall(w, r, name)
    }).Methods("GET")
}

func (s *Server) Destroy(fName string) {
    s.Urls[fName] = nil //remove handler
}

func (s *Server) ProxyCall(w http.ResponseWriter, r *http.Request, fName string) {
    if s.Urls[fName] != nil {
        s.Urls[fName](w, r) //proxy the call
    }
}

func (s *Server) AddFunction(w http.ResponseWriter, r *http.Request, fName string) {
    f := func(w http.ResponseWriter, r *http.Request) {
        w.Write([]byte("hello from" + fName))
    }

    s.Urls[fName] = f // Add the handler to our map
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T10:57:50.500

也许可以通过注册一个不返回任何内容的处理程序（不向 ResponseWriter 写入任何内容）或生成“未找到”类型的响应来“完成”取消注册。取决于您的要求和/或取消注册先前注册的处理程序的目的/效果。

# c# - 错误：必须在控制离开当前方法之前分配 Out 参数

> ID：11738042
> 
> 赞同：30
> 
> 时间：2012-07-31T10:26:04.217
> 
> 标签：c#, compiler-errors, .net-2.0

发回参数时收到此错误

> 错误：必须在控制离开当前方法之前分配 Out 参数

代码是

```
 public void GetPapers(string web, out int Id1, out int Id2)
    {
        SqlConnection conn = new SqlConnection(ConnectionString());
        conn.Open();
        SqlCommand cmd = new SqlCommand("GetPapers", conn);
        cmd.CommandType = CommandType.StoredProcedure;

        cmd.Parameters.Add(new SqlParameter("@URL", String(web)));

        SqlDataReader rdr = cmd.ExecuteReader();

        if (rdr.Read())
        {
            Id1 = (int)rdr["ID1"];
            Id2 = (int)rdr["ID2"];
        }

        rdr.Close();
    } 
```

称它为

```
GetPapers(web, out Id1, out Id2); 
```

与这个问题有关

[相关问题](https://stackoverflow.com/questions/11737497/sending-2-parameters-back-to-main-function/11737538#comment15577485_11737538)

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-07-31T10:27:16.670

您正在分配`Id1`并且`Id2`在 if 语句中，编译器无法确定它是否会在运行时被分配一个值，因此会出现错误。

您可以在 if 语句之前为它们分配一些默认值。就像是。

```
Id1 = 0;
Id2 = 0;

if (rdr.Read())
{
    Id1 = (int)rdr["ID1"];
    Id2 = (int)rdr["ID2"];
} 
```

或在您的部分条件中指定一些默认值`else`。

在`out`控件离开功能之前，必须为类型参数分配一些值。在您的情况下，编译器无法确定您的变量是否将被分配，因为它是在`if`语句中分配的。

参见：[5.3 明确赋值](https://msdn.microsoft.com/en-us/library/aa691172(v=vs.71).aspx)

> 在函数成员的可执行代码中的给定位置，**如果编译器可以通过静态流分析**证明该变量已自动初始化或已成为至少一次赋值的目标，则称该变量已被确定赋值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-31T11:26:48.850

您需要初始化这些变量；

在从 Getpapers() 方法返回之前，它必须保持一些值

# wpf - 将组合框 selectedvalue 绑定到数据类

> ID：11738043
> 
> 赞同：0
> 
> 时间：2012-07-31T10:26:06.920
> 
> 标签：wpf, binding, combobox

我有一个页面，上面有许多字段，用于创建一个名为 Account 的新课程记录。其中一个字段是通过组合框设置的货币代码。组合框绑定到具有 id 和描述的数据表。我正在尝试使用绑定，以便组合框的 selectedvalue 自动更新 Account 类的货币 id。到现在还没有喜...

类定义：

```
class Account : IDataErrorInfo
{
    public String Name { get; set; }
    public int CurrencyID { get; set; }
    public int BankID { get; set; }
    public String AccountNumber { get; set; }
    public decimal OpeningBalance { get; set; }

 ... other definitions for validation handling ...

} 
```

组合框定义：

```
<ComboBox x:Name="cboCurrency" Grid.Column="1" Grid.Row="1" Width="250" HorizontalAlignment="Left" 
     SelectedValue="{Binding Path=Account.CurrencyID, UpdateSourceTrigger=LostFocus, ValidatesOnDataErrors=True, NotifyOnValidationError=true}"
     ToolTip="{Binding ElementName=cboCurrency, Path=(Validation.Errors)[0].ErrorContent}"/> 
```

页面构造器：

```
public AccountAdd()
{
    InitializeComponent();

    base.DataContext = new Account();

    // Load the Currency combo with the list of currencies
    //
    cboCurrency.DisplayMemberPath = "Name";
    cboCurrency.SelectedValuePath = "_id";
    cboCurrency.ItemsSource = _DBUtils.getCurrencyList().DefaultView;

} 
```

保存代码：

```
private void btnAccountOK_Click(object sender, RoutedEventArgs e)
{
    Account newAccountRec = (Account)base.DataContext;

    int newid = _DBUtils.AddAccount(newAccountRec);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T10:42:15.220

由于 ComboBox 的 DataContext 设置为 Account 实例，因此其 SelectedValue 应绑定到`CurrencyID`，而不是`Account.CurrencyID`：

```
<ComboBox SelectedValue="{Binding Path=CurrencyID, ...}" ... /> 
```

此外（如果您的数据表是[DataTable](http://msdn.microsoft.com/en-us/library/9186hy08)）从每个表行中为 ComboBox 的项目创建一个具有适当属性的对象集合，如blindmeis 所建议的那样：

```
cboCurrency.DisplayMemberPath = "Name";  
cboCurrency.SelectedValuePath = "Id";  
cboCurrency.ItemsSource =
    _DBUtils.getCurrencyList().Rows.Cast<DataRow>().Select(
        row => new { Name = row["Name"], Id = row["_id"] }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T11:51:27.980

您可以使用匿名类型来更轻松地绑定（缺点是每次更改 getcurrecylist 时都必须设置 itemssource）

代码未经测试：

```
//i assume that your columns names are "Name" and "_id"
cboCurrency.DisplayMemberPath = "Name";
cboCurrency.SelectedValuePath = "Id";
cboCurrency.ItemsSource = _DBUtils.getCurrencyList().AsEnumerable().Select(x => new {Name = x["Name"], Id = x["_id"]}).ToList;

//lostfocus makes no sense or?
SelectedValue="{Binding Path=CurrencyID, UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True, NotifyOnValidationError=true}" 
```

# java - 从数组列表中获取所有以指定字符串开头的元素

> ID：11738044
> 
> 赞同：0
> 
> 时间：2012-07-31T10:26:10.710
> 
> 标签：java, android

我正在创建一个应用程序，该应用程序根据用户输入显示搜索结果，该搜索结果是一个数组列表。我需要按结果与起始字母索引分隔的顺序显示此结果，就像所有以字母“A”开头的元素都将位于标题 A 下，以“B”开头的元素将位于图块 B 下，依此类推。 ..

我成功地检索了每个元素的第一个字符并将其与字母表进行比较，但我感觉像是一种日志方式。任何人都可以建议我任何直接的方式，以便我可以直接获取元素吗？

在此先感谢，蒂姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T10:36:33.093

如果它是仅显示要求有一个`ArrayList<Set<Title>>`where`ArrayList.get(0)`将给出 A 并且 Set 将有所有 Titles

如果您想要 O(1) 访问（但不想显示列表结构）使用 MultiMap（地图内的地图） get('A').get('MY TITLE') 将立即返回您的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T10:33:30.640

你可以使用正则表达式

`^A*\W$`用于获取以 A 开头的字符串列表

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T10:29:26.027

不要全部比较。只需使用您的搜索项作为索引。不断的寻找时间。您将需要一个索引功能，将您的搜索项转换为唯一的数字。例如：

```
lets find "data" word in your list.

d=4, a=1, t=20:

data----->4 + 1*4 + 20*(1+4) + 1*(20+1+4)  just made up this. 
```

# javascript - 访问点的地标信息以修改高度

> ID：11738053
> 
> 赞同：0
> 
> 时间：2012-07-31T10:27:02.540
> 
> 标签：javascript, kml, google-earth, accessor, google-earth-plugin

我有一个使用 google-earth API 的网络，我在其中使用多个 KML 层来显示数据。

随着用户的交互，有必要修改地标的一些属性，如样式和名称，以更改地标显示信息。

在某些情况下，我想在`Altitude`地标处修改包含在`Point`KML 中指定的几何信息中的信息。实际上它是`clampedToGround`，我想将它修改为任何数字，以便在其他元素之上。

这是我如何修改地标信息的示例：

```
var pm = ge.getElementByUrl(UrlOfLayer#IdOfPlacemark);
pm.setStyleUrl(UrlOfLayer#IdOfStyleMap);
pm.setName(NewName); 
```

这工作得很好，所有更改都可以毫无问题地应用。KML 地标的结构如下：

```
<Placemark id="1">
   <name>Name</name>
   <visibility>1</visibility>
   <open>0</open>
   <Point>
      <extrude>1</extrude>
      <tessellate>1</tessellate>
      <altitude>clampedToGround</altitude>
      <coordinates>1,1,1</coordinates>
   </Point>
   <styleUrl>#style</styleUrl>
</Placemark> 
```

有了这个结构和 Javascript 中的 Placemark，`getElementByUrl`我可以通过 , 等访问字段名称、可见性等`getName()`。`getVisibility()`但是，这不适用于 Point 信息，因为它包含在`Geometry`地标的对象中。

我可以使用 访问几何信息`pm.getGeometry()`，但在那之后，无法访问“点”，因为正如 Google 地球文档所说：

> KmlGeometry 对象是一个抽象对象，不能直接使用。它为所有派生的 Geometry 对象提供了一个占位符对象。

查看使用点信息的一些示例，它仅用于创建点，然后将其包含在几何中，但在我的情况下，我无法在 Javascript 中创建点，因为我无法获取坐标信息和新点将覆盖它。

那么，有没有我找不到的访问器来实现这个目的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T21:59:45.507

在这一点上，文档有点不清楚；也许应该说`KmlGeometry`对象不能直接*实例化*。事实上，一个`KmlGeometry`对象有多种方法，如果您单击“所有成员列表”链接（最相关的方法继承自）[，您可以在文档中看到这些方法。](https://developers.google.com/earth/documentation/reference/interface_kml_geometry-members)`KmlObject`

所有不同的几何类型都继承自`KmlGeometry`，但是由于您知道此几何是 a `KmlPoint`，因此您可以将其视为 a `KmlPoint`（在其他语言中，您可能必须显式转换变量，但是，无论好坏，Javascript 更宽容） . 在你的情况下，你可以做

```
var point = pm.getGeometry();
point.setAltitude(newAltitudeValue);
point.setLatLng(...); 
```

等您可以使用所有[正常的 KmlPoint 方法](https://developers.google.com/earth/documentation/reference/interface_kml_point)。

顺便说一句，如果您*不*知道几何的特定类型（例如，如果几何在单击事件上作为目标返回并且可以是任何东西），您总是可以通过`getType`继承自来询问它`KmlObject`（在这种情况下，`pm.getGeometry().getType()`将返回`'KmlPoint'`)，然后您可以对其采取行动。不是一个完美的反射系统，但它可以工作。

**附录：**您的示例 KML 包含该行

```
<altitude>clampedToGround</altitude> 
```

这不是有效的 KML。你可能的意思是

```
<altitudeMode>clampToGround</altitudeMode> 
```

Earth 丢弃它不理解的元素（尽管验证器会显示此错误），但在这种情况下并不特别重要，因为`clampToGround`无论如何都是默认的高度模式。这是任何高度变化被丢弃的原因，因为`clampToGround`“表示忽略高度规范”（[根据文档](https://developers.google.com/kml/documentation/kmlreference#point)），因此无论其高度值如何，该点都将放置在地面。

为了能够改变高度，要么改变你提供给它的KML，使用`relativeToGround`或`absolute`作为altitudeMode，或者使用API​​来改变它，例如

```
pm.getGeometry().setAltitudeMode(ge.ALTITUDE_RELATIVE_TO_GROUND); 
```

然后你设置的任何高度都`pm.getGeometry().setAltitude(...)`应该工作。

# visual-c++ - CDialog 的背景颜色和该对话框中的所有控件都是白色而不是灰色

> ID：11738055
> 
> 赞同：0
> 
> 时间：2012-07-31T10:27:05.887
> 
> 标签：visual-c++, mfc, colors, background

我正在将代码从 VS 2005 迁移到 VS 2010。我遇到了一个奇怪的问题。在调用时，很少有对话框（从 CDialog 派生）以白色背景显示，并且所有控件也具有白色背景。我已经尝试了很多寻找原因，但无法找到。请有人建议一种方法来摆脱这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T13:15:41.407

我正在将我的应用程序从 VS 2003 迁移到 VS 2010。在 VS 2003 中有一个名为 CDilaogEx 的用户定义类，在 VS 2010 中有一个名为 CDialogEx 的新**MFC**。因为同名而混淆。更改用户定义的类名及其对新名称的所有引用后，我能够解决此问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T12:49:00.200

您正在运行什么操作系统？这种效果在 Windows 7 和 XP 上是否相同？您是否可以附加有问题的项目供我们调试？

# java - Java中的基本数组问题

> ID：11738060
> 
> 赞同：0
> 
> 时间：2012-07-31T10:27:19.840
> 
> 标签：java, arrays

寻求基本数组问题的帮助。程序必须读取一个句子并将单词长度的频率存储在一个数组中，然后打印出有多少单词是 1 个字母的单词，2 个字母的单词等。

我是一个非常原始的 Java 程序员，但在下面做了一个尝试，非常感谢一些指导。我所拥有的似乎可以编译，但是当我运行程序并输入一个句子时会吐出一些乱码。

当我在程序中输入一个句子时，我会得到如下**输出**：

```
[I@eb42cbf
[I@eb42cbf
[I@eb42cbf
[I@eb42cbf
[I@eb42cbf
[I@eb42cbf 
```

**我的代码：**

```
class WordCount
{
    public static void main(String[] args)
    {
        int wordList[] = new int[20];
        System.out.println("Please enter a sentence.");

        for (int i = 0; i <= wordList.length; i++)
        {
            String s = Console.readToken();
            int x = s.length();
            wordList[x]++;
        }

        int x = 1;

        while (x < wordList.length)
        {
            if (wordList[x] > 0)
                System.out.println(x + "-letter words: " + wordList[x]);
            x++;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T10:54:03.033

以下是我的建议：

*   使用[Scanner](http://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html)而不是 Console.readToken，它不是标准 JDK 的一部分
*   使用标准变量名（i 表示计数器优于 x）
*   您的其余代码工作正常
*   但我会使用 for 循环而不是 while 因为你知道你需要循环多少次

这是我的版本 - 更改是：使用扫描仪，将 x 重命名为 i 并将 while 循环更改为 for 循环：

```
public static void main(String[] args) {
    int wordList[] = new int[20];
    System.out.println("Please enter a sentence.");
    Scanner scanner = new Scanner(System.in); //Use a scanner, part of the standard JDK

    for (int i = 0; i <= wordList.length; i++) {
        String s = scanner.next(); //reads the next string
        int length = s.length();
        wordList[length]++;
    }

    for (int i = 0; i < wordList.length; i++) { //use a for loop
        if (wordList[i] > 0) {
            System.out.println(i + "-letter words: " + wordList[i]);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T10:36:22.390

应该不是while循环

```
while(i < wordlist.Length){
  if (wordlist[i] > 0){
      System.out.println(i + "-letter words: " + wordlist[i]);
  }
  i++;      
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T11:18:42.223

另一种方法：

```
int wordList[] = new int[20];
    System.out.println("Please enter a sentence.");
    String s = "";
    try{
        BufferedReader bufferRead = new BufferedReader(new InputStreamReader(System.in));
        s  = bufferRead.readLine();        
    }
    catch(IOException e){
        e.printStackTrace();
    }

    String[] s1 = s.split(" ");
    for(int i = 0 ; i < s1.length ; i++){
        int len = s1[i].length(); 
        wordList[len]++; 
    }
    for (int i = 0; i < wordList.length; i++) { //use a for loop
    if (wordList[i] > 0) {
        System.out.println(i + "-letter words: " + wordList[i]);
       }
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T10:35:05.827

```
private static long wordcount(String line){
    long numWords = 0;
    int index = 0;
    boolean prevWhiteSpace = true;
    while(index < line.length()){
        char c = line.charAt(index++);
        boolean currWhiteSpace = Character.isWhitespace(c);
        if(prevWhiteSpace && !currWhiteSpace){
            numWords++;
        }
        prevWhiteSpace = currWhiteSpace;
    }
    return numWords;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-31T11:05:42.900

如果你的意思是当输入一个句子时：“This is a sentence that”，输出应该是：

4 个字母的单词：2

2 个字母的单词：1

1 个字母的单词：1

8个字母的单词：1

我的代码：

```
 import java.util.HashMap;
  import java.util.Scanner;

        class WordCount {
            public static void main(String[] args) {
                HashMap<Integer, Integer> statistic = new HashMap<Integer, Integer>();

                System.out.println("Please enter a sentence.");
                Scanner in = new Scanner(System.in);
                String s = in.nextLine();

                String[] words = s.split(" ");

                for (int i = 0; i < words.length; i++) {
                    if (statistic.containsKey(words[i].length())) {
                        Integer value = statistic.get(words[i].length());
                        statistic.put(words[i].length(), value + 1);
                    } else
                        statistic.put(words[i].length(), 1);
                }

                for (Integer num : statistic.keySet()) {

                    Integer key = num;
                    Integer value = statistic.get(num);
                    System.out.println(key + "-letter words: " + value);

                }

            }
        } 
```

# android - 当软键盘弹出时将 Edittext 向上移动一点

> ID：11738063
> 
> 赞同：1
> 
> 时间：2012-07-31T10:27:29.707
> 
> 标签：android, android-layout, android-edittext, android-softkeyboard

我现在的看法是这样的。我想将我的 Edittext 字段向上移动一点，因为它的一半被软键盘隐藏了。我怎样才能在 android 中做到这一点？

提前致谢。

![在此处输入图像描述](../Images/75947e0dbc8e5d46b1a4c5c11481630b.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T10:36:14.567

```
<?xml version="1.0" encoding="utf-8"?>

<TableLayout xmlns:android="http://schemas.android.com/apk/res/android"    
  android:layout_width="fill_parent"
   android:layout_height="fill_parent"       
   android:gravity="center_vertical">

<TableRow
    android:id="@+id/row1"
    android:layout_marginTop="25dp"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content">

    <TextView
        android:id="@+id/txtUserName"
        android:layout_marginLeft="50dp"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:padding="2dp"                
        android:text="Username"
        android:textSize="16sp" />
</TableRow>

<TableRow
    android:id="@+id/row2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content">
    <EditText
        android:inputType="text"
        android:id="@+id/editUsername"
        android:layout_width="fill_parent"
        android:layout_height="40dp"
        android:layout_weight="2"
        android:singleLine="true"
        android:layout_marginLeft="50dp"
        android:layout_marginTop="2dip"
        android:layout_marginRight="50dp"   
        android:padding="10dp"/>
</TableRow>
<TableRow
    android:id="@+id/row3"
    android:layout_marginTop="5dp"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" >

    <TextView
        android:id="@+id/txtPassword"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:padding="2dp"
        android:layout_marginLeft="50dp"
        android:text="password"               
        android:textSize="16sp" />
</TableRow> 
<TableRow
    android:id="@+id/row4"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content">   
    <EditText
        android:inputType="textPassword"
        android:id="@+id/editPassword"
        android:layout_width="fill_parent"
        android:layout_height="40dp"
        android:layout_weight="2"      
        android:layout_marginTop="2dip"
        android:layout_marginRight="50dp"   
        android:layout_marginLeft="50dp"        
        android:padding="10dp"
        android:password="true"                
        android:singleLine="true"/>
</TableRow>
<TableRow
    android:id="@+id/row6"            
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" >

    <Button
        android:id="@+id/login"
        android:layout_width="100dp"
        android:layout_height="35dp"
        android:text="login"
        android:textStyle="bold"
        android:layout_marginLeft="102dp"/>
</TableRow> 
  </TableLayout> 
```

# graph - 使用支持向量机 (SVM) 匹配时间序列

> ID：11738064
> 
> 赞同：0
> 
> 时间：2012-07-31T10:27:32.897
> 
> 标签：graph, machine-learning, pattern-matching, svm

给定两个不同的图，我可以使用 SVM 来检测它们是否与定义的误差范围或阈值密切（不完全）匹配？如果是，步骤是什么？我该怎么做？抱歉，我对机器学习领域非常陌生，并感谢专业知识的帮助。

我问的原因是我在 (t) 时间内有一组 (x) 输入，我想验证并匹配 (t) 上的预定义 (x) 值集。这可用于使用移动设备上的加速度计进行运动类型检测。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T12:53:46.467

取两段的第一句话：您只想检测一个新实例何时“接近”您预定义的时间序列集中的任何一个实例。做到这一点的直接方法就是去做；不需要花哨的机器学习算法。

如果您不想将每个实例与预定义集中的所有内容进行比较，那么您可以（可能）尝试使用聚类或其他无监督学习算法将其提取为更少数量的原型。

SVM 通常用于解决数据驱动的*分类*问题：两个（或更多）标记数据集，每个都有许多实例；每个实例都有一组特征值，你想构建一个分类模型来标记后续数据。

# php - Parse 的 REST API 和 PHP Curl 请求 - 如何

> ID：11738065
> 
> 赞同：9
> 
> 时间：2012-07-31T10:27:32.553
> 
> 标签：php, parsing, rest, curl

我正在使用出色的[Parse](https://parse.com/)作为数据存储，但需要通过 PHP 访问它（作为一个可能无关紧要的细节 - 我必须通过 PHP 访问它，以便 Facebook 抓取工具识别我页面上动态生成的标签）。

Parse 有一个 Rest API，以及如何使用它们的基本说明。例如，要检索一个对象：

> curl -X GET \
> -H "X-Parse-Application-Id: [My application ID]" \
> -H "X-Parse-REST-API-Key: [My Parse Rest API key]" \
> [https://api .parse.com/1/classes/moods/](https://api.parse.com/1/classes/moods/)

不幸的是，我不知道如何将它与我在网上看到的 PHP Curl 示例集成。我收集：

> curl_setopt($ch, CURLOPT_USERPWD,

..可能涉及。可能：

> curl_setopt($ch, CURLOPT_URL, $Url);

但我可能会走得很远。我真的很抱歉自己无法弄清楚这一点——但我认为这仍然是一个有效的问题，因为它让那些以前没有使用过 Curl/PHP 的人感到非常困惑。基本上 - 我正在寻找基本的信息，就像在哪里放置 Parse 文档中引用的示例......

提前致谢

编辑：

大家好，这是我配置的解决方案。感谢 debianek 让我朝着正确的方向前进。

```
if ($_GET['id']) {
$imageId = $_GET['id']; 
MyApplicationId = '[ID]';
$MyParseRestAPIKey = '[API Key]';
$url = 'https://api.parse.com/1/classes/images/'.$imageId;

$headers = array(
    "Content-Type: application/json",
    "X-Parse-Application-Id: " . $MyApplicationId,
    "X-Parse-REST-API-Key: " . $MyParseRestAPIKey
);

    $handle = curl_init(); 
curl_setopt($handle, CURLOPT_URL, $url);
curl_setopt($handle, CURLOPT_HTTPHEADER, $headers);
curl_setopt($handle, CURLOPT_SSL_VERIFYPEER, false);
curl_setopt($handle, CURLOPT_RETURNTRANSFER, true);

    $data = curl_exec($handle);
curl_close($handle);

$array = json_decode($data);

$title =  $array->title; 
```

..等等。希望有帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-31T10:32:50.130

将其放入标题中

```
$headers = array(
    "X-Parse-Application-Id: $MyApplicationId",
    "X-Parse-REST-API-Key: $MyParseRestAPIkey"
);

$handle = curl_init(); 
curl_setopt($handle, CURLOPT_HTTPHEADER, $headers); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-05-02T04:57:49.757

```
 <?php  
 $url = 'https://api.parse.com/1/classes/GameScore';  
 $appId = 'YOUR_APP_ID';  
 $restKey = 'YOUR_REST_KEY';  
 $headers = array(  
   "Content-Type: application/json",  
   "X-Parse-Application-Id: " . $appId,  
   "X-Parse-REST-API-Key: " . $restKey  
 );  
 $objectData = '{"name":"Adarsh", "age":"26"}';  
 $rest = curl_init();  
 curl_setopt($rest,CURLOPT_URL,$url);  
 curl_setopt($rest,CURLOPT_POST,1);  
 curl_setopt($rest,CURLOPT_POSTFIELDS,$objectData);  
 curl_setopt($rest,CURLOPT_HTTPHEADER,$headers);  
 curl_setopt($rest,CURLOPT_SSL_VERIFYPEER, false);  
 curl_setopt($rest,CURLOPT_RETURNTRANSFER, true);  
 $response = curl_exec($rest);  
 echo $response;  
 print_r($response);  
 curl_close($rest);  
 ?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-19T09:54:22.210

将此函数用于所有对象插入，该对象应创建为具有正确索引的关联数组

```
 function insertObject($classname,$object){
 $ appId="xxxxx";
   $restKey="xxxx" 
    $url = 'https://api.parse.com/1/classes/'.$classname;
    $rest = curl_init();
        curl_setopt($rest, CURLOPT_RETURNTRANSFER, 1);
        curl_setopt($rest, CURLOPT_FRESH_CONNECT, FALSE);//use cache if available
        curl_setopt($rest, CURLOPT_TIMEOUT, 10); //10 sec timeout
        curl_setopt($rest,CURLOPT_URL,$url);
        curl_setopt($rest,CURLOPT_PORT,443);
        curl_setopt($rest,CURLOPT_POST,1);
        curl_setopt($rest,CURLOPT_POSTFIELDS,  json_encode($object));
        curl_setopt($rest,CURLOPT_HTTPHEADER,
            array("X-Parse-Application-Id: " . $appId,
                "X-Parse-REST-API-Key: " . $restKey,
                "Content-Type: application/json"));

        curl_setopt($rest, CURLOPT_SSL_VERIFYPEER, false);//to avoid certificate error
        $response = curl_exec($rest);
        echo $response ;

} 
```

# java - Hadoop：无法使用 Jps 命令

> ID：11738070
> 
> 赞同：16
> 
> 时间：2012-07-31T10:27:47.487
> 
> 标签：java, hadoop

问题是

```
 hduser@saket-K53SM:/usr/local/hadoop$ jps
  The program 'jps' can be found in the following packages:
  * openjdk-6-jdk
  * openjdk-7-jdk
 Try: sudo apt-get install <selected package> 
```

我的配置是

```
hduser@saket-K53SM:/usr/local/hadoop$ java -version
java version "1.6.0_33"
Java(TM) SE Runtime Environment (build 1.6.0_33-b04)
Java HotSpot(TM) 64-Bit Server VM (build 20.8-b03, mixed mode) 
```

设置 conf/hadoop-env.sh

```
hduser@saket-K53SM:/usr/local/hadoop$ cat conf/hadoop-env.sh | grep JAVA_HOME
# The only required environment variable is JAVA_HOME.  All others are
# set JAVA_HOME in this file, so that it is correctly defined on
export JAVA_HOME=/usr/lib/jvm/jdk1.6.0_33/ 
```

我知道有一个与此类似的问题（http://stackoverflow.com/questions/7843422/hadoop-jps-can-not-find-java-installed）。但是我在这里安装了 Sun jdk。所以任何帮助将不胜感激..

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-07-31T13:04:36.127

这实际上不是 Hadoop 问题。Hadoop 不使用 JPS。

如果找不到 JPS，则必须将其放入路径或创建别名。JPS 可执行文件位于`$JAVA_HOME/bin/jps`.

例如，别名可以是：

```
alias jps='/usr/lib/jvm/jdk1.6.0_33/bin/jps' 
```

或者，如果您不关心使用 JPS，则可以改为执行

```
ps aux | grep java 
```

这将大约。给你同样的结果；）

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-07-29T08:25:53.183

您是否安装了提供 jps 工具的包**java-1.6.0-openjdk-devel ？**

```
$ sudo yum provides /usr/lib/jvm/java-1.6.0-openjdk.x86_64/bin/jps
Loaded plugins: product-id, subscription-manager
Updating certificate-based repositories.
Unable to read consumer identity
1:java-1.6.0-openjdk-devel-1.6.0.0-1.45.1.11.1.el6.x86_64 : OpenJDK Development Environment
Repo        : installed
Matched from:
Other       : Provides-match: /usr/lib/jvm/java-1.6.0-openjdk.x86_64/bin/jps 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2016-10-10T03:21:45.523

如果您不能使用**jps ，请使用此命令**

> ps-辅助 | grep java | awk '{打印 $12}'

它将文件显示为：

![在图片中显示这样的文件](../Images/c201d34287066f3de3d3d74daa5bb768.png)

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-01-22T04:52:33.240

这个问题是由于您从 Oracle 安装了 JDK（可能是）引起的。您可以通过使用`update-alternatives`程序链接`jps`到标准路径目录来解决此问题。使用此命令在终端中修复此问题

```
 sudo update-alternatives --install /usr/bin/jps jps /usr/lib/jvm/jdk1.6/bin/jps 1 
```

`jps`使用适当的 jdk（您的 jdk 版本）中的实际程序路径，而不是`jdk1.6`特定于我的路径。希望这会有所帮助。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2017-05-14T23:18:14.627

JPS 似乎（至少在 amx linux 64 / centos 上）可以通过 ant 获得。

```
sudo yum install ant 
```

你可以运行 jps

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2019-05-22T05:48:10.977

在 CentOS7 上，我在安装 java-devel 时解决了这个问题

```
# yum install java-1.8.0-openjdk-devel.x86_64 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-12-24T17:04:31.863

如果您使用的是 openjdk，那么您已经安装了额外的无头 jre 尝试：

sudo apt-get install java-1.8.0-openjdk-headless

它对我有用，你必须提供正确的 openjdk 版本，我的是 1.8

# json - 访问 Json 对象：Twig

> ID：11738072
> 
> 赞同：2
> 
> 时间：2012-07-31T10:27:51.643
> 
> 标签：json, twitter, symfony

我已将一个 JSON 对象传递给 symfony2 中的 twig 模板，然后我已将该对象分配给 JavaScript 变量。

我的对象就像

`[{&quot;data&quot;:&quot;{&quot;params&quot;:{&quot;id&quot;:&quot;1&quot;,&quot;width&quot;:&quot;98&quot;,&quot;height&quot;:&quot;101&quot;,&quot;x&quot;:&quot;151&quot;,&quot;y&quot; ....`

现在，当我警告对象时，它显示上面的对象`array()`没问题，但是当我警告 object.data 时，它什么也没显示。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-03T14:50:25.610

I don't know if you solved your problem.
I have the same trouble, but this worked for me

```
# your_template.html.twig
<script type="text/javascript">
{% autoescape false %}
    var your_variable = {{ var_from_controller }};
{% endautoescape %}
</script> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-11-08T18:26:16.497

twig 在打印之前自动转义字符串。你必须使用树枝原始过滤器。

{{ yourVarWithJson | 生的 }}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T12:48:18.650

一旦你有了一个 JSON 表示，如果你想把它用作一个 Javascript 对象，你首先需要通过“eval”函数或者使用某种 JSON 解析器来传递它。有关详细信息，请参阅此链接： http: [//www.json.org/js.html](http://www.json.org/js.html)

# javascript - Jquery Bounce Effect 不适用于应用于锚标记的类

> ID：11738076
> 
> 赞同：1
> 
> 时间：2012-07-31T10:28:08.433
> 
> 标签：javascript, jquery, html, class

我需要一些认真的帮助。我试图创建反弹效果，但它不适用于锚文本类/div。

这是我使用的代码：http: [//viralpatel.net/blogs/jquery-bounce-effect-bounce-html-js/](http://viralpatel.net/blogs/jquery-bounce-effect-bounce-html-js/)

它基于一个非常简单和简短的教程。现在的问题是我无法使 javascript 代码针对位于锚点/链接内的类或 div。

我该如何解决这个问题？代码在上面的网站中，我试图反弹的代码部分以粗体突出显示：

```
 <div id="jplayer">
    </div>
    <div class="jp-audio">
      <div class="jp-type-single">
        <div id="jp_interface_1" class="jp-interface">
        <ul class="jp-controls">
            <li><a href="#" **class="jp-play"**></a></li>
            <li><a href="#" class="jp-pause"></a></li>
            <li><a href="#" class="jp-prev"></a></li>
            <li><a href="#" class="jp-next"></a></li>
            <li><a href="audio_samples.php" class="jp-more-songs">Listen to more Audio Samples</a></li>
        </ul>
          <div class="jp-progress">
            <div class="jp-seek-bar">
            <div class="jp-play-bar"></div>
            </div>
        </div>
        <div class="jp-title"></div>
        </div> 
```

编辑：我认为这个问题是不可能解决的。我想知道这现在是否可以解决。每次课程反弹时都会删除背景。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T10:35:18.153

您没有阻止链接的默认行为，例如它在您看到反弹效果之前刷新页面。

我会尝试以下方法：

```
$('#jp_interface_1 a').click(function(e) {
    e.preventDefault(), e.stopPropagation();
    $(this).effect("bounce", { times:5 }, 300);
}); 
```

**请注意**，如果您有其他事件绑定到相关锚标记，请删除 e.stopPropagation(); 称呼。

**编辑** 我刚刚注意到你提到了同样的 div 问题。您是否将代码包装在 jQuery 的 document.ready 处理程序中？

```
$(function() {
    $('#jp_interface_1 a').click(function(e) {
        e.preventDefault(), e.stopPropagation();
        $(this).effect("bounce", { times:5 }, 300);
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T10:37:56.890

*现在的问题是我无法使 javascript 代码针对位于锚点/链接内的类或 div。*

```
 <div class="div1">  div text
  <a class="ancClass" href="#">Back</a>  
  </div> 
```

...这将帮助您找到

```
 $('.div1 a.ancClass'); 
```

反之亦然

**编辑：** 我不明白您要达到的目标是您要达到的目标吗？

```
$(document).ready(function(){  
 $('.jp-interface a.jp-next').click(function(e) {         
    $('.jp-more-songs').effect("bounce", { times:5 }, 300);

    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T11:25:06.417

这个怎么样

```
$(document).ready(function(){  
    $('#jp_interface_1 .jp-more-songs').click(function(e) {
        e.preventDefault();
        e.stopPropagation();
        $(this).effect("bounce", { times:5 }, 300);
    });
}) 
```

[http://jsfiddle.net/96kXt/23/](http://jsfiddle.net/96kXt/23/)

# php - 如何确保使用 PHP 在 Postgres 中的 DELETE SQL 语句成功？

> ID：11738079
> 
> 赞同：2
> 
> 时间：2012-07-31T10:28:18.450
> 
> 标签：php, postgresql

是否有一个**函数**会根据 DELETE SQL 语句是否成功返回 true 或 false？例如这样的：

```
<?php
    $sql = "DELETE FROM table WHERE id=123";
    $result = pg_query($sql);

    if **function**($result)
        return true;
    else
        return false;
?> 
```

此外，是否有一个函数可以返回成功删除的行数？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T10:32:15.040

使用[mysql_affected_rows()](http://php.net/manual/en/function.mysql-affected-rows.php)获取 mysql 中受影响的行数。

对于 postgres 类似，它将是[pg_affected_rows](http://php.net/manual/en/function.pg-affected-rows.php)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T10:30:09.563

`if()`是函数；）

```
if($result)
return true;
else
return false; 
```

如果您想知道成功删除的行数，请循环 if 条件

```
$flag=0;
if($result)
{
   $flag++;
}
if($flag==0;)
echo "Nothing is deleted";
else
echo $flag." rows are deleted"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T10:30:36.197

```
if($result)
{
  // Delete was successful
}
else
{
  // was not successful
} 
```

# extjs - 面板上的 ExtJs 布局

> ID：11738081
> 
> 赞同：0
> 
> 时间：2012-07-31T10:28:21.967
> 
> 标签：extjs, layout, grid, panel

我在面板内有一个网格。最初，我将在加载应用程序并在特定用户操作（例如单击网格：2）时将网格呈现到面板上，我将使用 hide() 将网格隐藏在面板内。当网格被隐藏时，我将使用 panel.update(html) 在面板中显示一条消息。现在再次进行特定用户操作（比如单击网格：3），我需要在面板内显示网格。我尝试使用 grid.show()、grid.setvisible() 和 panel.doLayout()，但都没有成功。下面是示例代码，

```
 if (condition1){
      panelGrid.setVisible(false);
      panel.update("htmltext");
    } else {
      panel.doLayout();
      panelGrid.setVisible(true);
    } 
```

这在 Firefox 中运行良好。但在 IE8 中它不起作用并显示错误消息“ext-base.js 中的未指定错误”

有人对此有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T15:52:40.687

感谢您的回答。我自己想通了这个逻辑。

我使用了 add() 而不是 panel.update()。

```
if (condition1){
  panelGrid.setVisible(false);
  panel.remove('sample', true);
  panel.add(
   {
     id: 'sample'
     html:'htmltext'
   });
} else {
  panel.remove('sample', true);
  panelGrid.setVisible(true);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T13:27:52.910

执行时覆盖面板的 HTML `panel.update`，因此网格不再存在。

# sql - SQL - 如果一个值等于某个数字，那么行数应该等于那个数字

> ID：11738083
> 
> 赞同：2
> 
> 时间：2012-07-31T10:28:29.663
> 
> 标签：sql, sql-server-2008, tsql

场景：我的选择语句中有 1 列；我想根据名为 Number 的计算字段的值重复的名称，使用类似这样的 case 语句计算

Case when number<0.95 then 0
when number>=1 then 10.... END AS Number。

示例 Jim W 的 Number 值为 6，因此我希望 SQL 语句返回 6 行名称为 Jim W。

名称
JIM W
JIM W
JIM W
JIM W
JIM W
JIM W

其他需要注意的是，它应该按名为 region 的列及其 SQL Server 2008 进行分组。

这可能吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T10:35:17.393

尝试这个：

在 sql server 中执行此操作的最简单方法是加入系统表 master..spt_values，前提是每个名称的重复次数应小于 2048

```
select T.Name from test12 T join master..spt_values M
on T.number>M.number
where type='p' 
```

[SQL 小提琴演示](http://www.sqlfiddle.com/#!3/023be/1)

# android - 在线性布局中使用充气机添加表格

> ID：11738085
> 
> 赞同：1
> 
> 时间：2012-07-31T10:28:35.340
> 
> 标签：android, android-layout, android-linearlayout, layout-inflater

我正在尝试使用布局充气器将表格行添加到表格中。

这是我的 XML 文件，名为 customlistviewitem.xml

```
 <?xml version="1.0" encoding="utf-8"?>
   <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
   android:orientation="vertical"
   android:id="@+id/LinearLayout01"
   android:layout_width="fill_parent"
   android:layout_height="fill_parent">

   <ScrollView
   android:id="@+id/ScrollView1"
   android:layout_width="fill_parent"
   android:layout_height="wrap_content"
   android:layout_marginTop="75dp">
  <TableLayout 
android:layout_width="fill_parent"
android:layout_height="fill_parent" 
android:orientation="vertical" 
android:id="@+id/myTableLayout1">

<TableRow android:layout_marginTop="1dp" android:layout_marginLeft="10dp">

    </TableRow>
    </TableLayout>

    </ScrollView>
    </LinearLayout> 
```

这是我用来向表中添加行的代码

```
 LinearLayout l = (LinearLayout) findViewById(R.id.mylayout1);
            LayoutInflater linflater = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            JSONArray jArray;
            try {
                jArray = new JSONArray(result);

            JSONObject json_data=null;
            for(int i=0;i<jArray.length();i++){
                //Log.e("Carlist","Result" +result);
                json_data = jArray.getJSONObject(i);
                   int ct_id = json_data.getInt("id");
                   String make = json_data.getString("make");
                   String model = json_data.getString("model");
                   String price = json_data.getString("price");

                   TableRow tr = new TableRow(this);
                         tr.setId(ct_id);
                         tr.setClickable(true);

                         tr.setOnClickListener(new  OnClickListener() {

                                @Override
                                public void onClick(final View v) {

                                    String sdet_id;
                                    int det_id;
                        //          v.setBackgroundColor(Color.GRAY);
                                    det_id = v.getId();
                                    sdet_id = String.valueOf(det_id);
                                    final Intent i = new Intent();
                                    i.setClassName("demo.example.com", "demo.example.com.cardetails");
                                    i.putExtra("Det_id", sdet_id);
                                    startActivity(i);

                          //        v.setBackgroundColor(Color.TRANSPARENT);
                                    // TODO Auto-generated method stub
                                }
                            });
                         TableLayout.LayoutParams tableRowParams=
                              new TableLayout.LayoutParams
                              (TableLayout.LayoutParams.FILL_PARENT,TableLayout.LayoutParams.WRAP_CONTENT);

                            int leftMargin=20;
                            int topMargin=10;
                            int rightMargin=15;
                            int bottomMargin=20;

                            tableRowParams.setMargins(leftMargin, topMargin, rightMargin, bottomMargin);

                            tr.setLayoutParams(tableRowParams);

                              /* Create a Button to be the row-content. */
                         ImageView myimage = new ImageView(this);

                         BitmapFactory.Options bmOptions;
                        bmOptions = new BitmapFactory.Options();
                        bmOptions.inSampleSize = 1;
                        Bitmap bm = LoadImage(image_URL, bmOptions);
                        myimage.setImageBitmap(bm);
                         tr.addView(myimage);
                         TextView tmake=new TextView(this);
                        // tmake.setText(make);
                         tmake.setText(Html.fromHtml("<H1>" + make));
                         tr.addView(tmake); 

                         TextView tmodel=new TextView(this);
                         tmodel.setText(Html.fromHtml("<b><H1>" + "&nbsp;&nbsp;" + "€" + price + "</b></H1></br></br>" ));
                         tr.addView(tmodel);

                    /* Add row to TableLayout. */
                     //  tr.setPadding(50, 0, 0, 0);
                         tl.addView(tr);
                         View v = new View(this);
                         v.setLayoutParams(new TableRow.LayoutParams(TableRow.LayoutParams.FILL_PARENT, 1));
                         v.setBackgroundColor(Color.rgb(51, 51, 51));
                         tl.addView(v);

            }
            } catch (JSONException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } 
```

这不是添加表格行。我需要做什么来添加行和文本项？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T10:31:42.050

问题似乎是 LayoutParams 设置为 TableRow，并且视图被添加到 TableRow，尝试评论设置布局参数代码，然后检查结果。

```
LinearLayout l = (LinearLayout) findViewById(R.id.mylayout1);
            LayoutInflater linflater = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            JSONArray jArray;
            try {
                jArray = new JSONArray(result);

            JSONObject json_data=null;
            for(int i=0;i<jArray.length();i++){
                //Log.e("Carlist","Result" +result);
                json_data = jArray.getJSONObject(i);
                   int ct_id = json_data.getInt("id");
                   String make = json_data.getString("make");
                   String model = json_data.getString("model");
                   String price = json_data.getString("price");

                   TableRow tr = new TableRow(this);
                         tr.setId(ct_id);
                         tr.setClickable(true);

                         tr.setOnClickListener(new  OnClickListener() {

                                @Override
                                public void onClick(final View v) {

                                    String sdet_id;
                                    int det_id;
                        //          v.setBackgroundColor(Color.GRAY);
                                    det_id = v.getId();
                                    sdet_id = String.valueOf(det_id);
                                    final Intent i = new Intent();
                                    i.setClassName("demo.example.com", "demo.example.com.cardetails");
                                    i.putExtra("Det_id", sdet_id);
                                    startActivity(i);

                          //        v.setBackgroundColor(Color.TRANSPARENT);
                                    // TODO Auto-generated method stub
                                }
                            });

                              /* Create a Button to be the row-content. */
                         ImageView myimage = new ImageView(this);

                         BitmapFactory.Options bmOptions;
                        bmOptions = new BitmapFactory.Options();
                        bmOptions.inSampleSize = 1;
                        Bitmap bm = LoadImage(image_URL, bmOptions);
                        myimage.setImageBitmap(bm);
                         tr.addView(myimage);
                         TextView tmake=new TextView(this);
                        // tmake.setText(make);
                         tmake.setText(Html.fromHtml("<H1>" + make));
                         tr.addView(tmake); 

                         TextView tmodel=new TextView(this);
                         tmodel.setText(Html.fromHtml("<b><H1>" + "&nbsp;&nbsp;" + "€" + price + "</b></H1></br></br>" ));
                         tr.addView(tmodel);

                    /* Add row to TableLayout. */
                     //  tr.setPadding(50, 0, 0, 0);
                         tl.addView(tr);
                         View v = new View(this);

                         v.setBackgroundColor(Color.rgb(51, 51, 51));
                         tl.addView(v);

            }
            } catch (JSONException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } 
```

# asp.net-mvc - 创建 asp.net MVC 自定义控件

> ID：11738086
> 
> 赞同：0
> 
> 时间：2012-07-31T10:28:44.337
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor

我目前正在将我们的一个 WPF 应用程序迁移到 MVC 作为概念证明 - 我们拥有很多的一件事是自定义控件..

我希望你们能帮助我的是一些关于如何开始以及如何为高级事物构建它们的资源。

到目前为止，我已经环顾四周，似乎您创建了使用扩展方法来呈现您的 HTML - 这一切都很好。

这是我的第一个场景——任何建议、提示、资源和帮助都会很棒！

搜索提供程序：这不仅仅是一个自动完成框，它具有触发模态视图等的高级选项..我需要的是能够将它绑定到视图模型上的对象..像这样

```
 @Html.SearchProviderFor(model => model.NameObject, "NameSearch"); 
```

希望 - 这将使用搜索提供者将返回的复杂对象更新模式。

“For”扩展的最佳方式到底是什么？以及创建不是“像那样显示”的自定义控件的最佳方法是什么:)？

如果问题有点模糊，我很抱歉，但我希望你们能弄清楚！

干杯。圣。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T12:24:03.570

扩展方法很好，但是如果我们谈论很多 html/css/js 工作，您可能应该查看自定义类型编辑器，这里我说的是：

```
@Html.EditorFor(m => m.NameObject) 
```

然后创建一个 EditorTemplates 文件夹，并创建一个与 NameObject 类型同名的视图。

看看这里：[https ://stackoverflow.com/a/5497234](https://stackoverflow.com/a/5497234)

“For”表示扩展正在处理一个属性，而不仅仅是一个值。下面是一个使用 for 的扩展方法示例：

```
public static String IdFor<TModel, TValue>(this HtmlHelper<TModel> html, Expression<Func<TModel, TValue>> expression) { ... } 
```

# html - IE&Firefox 中的 Wordpress 网站 CSS 不同

> ID：11738092
> 
> 赞同：0
> 
> 时间：2012-07-31T10:29:03.097
> 
> 标签：html, css, cross-browser

我有一个使用我购买的模板设计的 Wordpress 网站。对模板的支持有点难以获得，所以我决定在这里问一下，也许有人知道这个问题的答案。

网站布局在 Chrome 中看起来不错，但在 IE 和 Firefox 最新版本中很奇怪。

这是 Chrome 的正常布局：

[![](../Images/9ced2d8ce4df9ab4ea17d68ef0b642b7.png)](https://i.stack.imgur.com/8yACT.jpg)

这是在 Firefox/IE 中：

[![](../Images/49b9d0249c0827030644c88854ded167.png)](https://i.stack.imgur.com/gEXYw.jpg)

该网站的代码分布在 php 文件中。但这是 Header.php 的开始

```
 <?php
/**
 * @package WordPress
 * @subpackage ***  */ 
?>
<!DOCTYPE html>
<!--[if lt IE 7]> <html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if IE 7]>    <html class="no-js lt-ie9 lt-ie8" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js lt-ie9" lang="en"> <![endif]-->
<!--[if gt IE 8]><!--> <html <?php language_attributes(); ?>> <!--<![endif]-->
<head>

<meta charset="<?php bloginfo( 'charset' ); ?>" />

<meta name="viewport" content="width=device-width" />

<?php if(get_option('header_favicon')) { ?>
<link rel="shortcut icon" href="<?php echo get_option('header_favicon'); ?>" />
<?php } ?>
<title><?php if(is_front_page()) { bloginfo('name'); } else { wp_title( '', true, 'right' ); }?></title>
<?php if(get_option('rss_feed')) { ?>
<link rel="alternate" type="application/rss+xml" title="<?php echo get_option('rss_title'); ?>" href="<?php echo get_option('rss_feed'); ?>" />
<?php } 
```

知道什么可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T10:39:23.657

在 CSS 中找到这条规则（第 115 行）

```
.skinset-header, .skinset-footer, .skinset-main.nv-skin {
background: none repeat scroll 0 0 transparent !important;
border: 0.7px solid #E9E9E9 !important;
} 
```

删除边框属性。

```
.skinset-header, .skinset-footer, .skinset-main.nv-skin {
background: none repeat scroll 0 0 transparent !important;
} 
```

然后你会在 FF 上看到一条蓝线，这里是：

```
.skinset-background .accordionhead.ui-accordion-content-active, .skinset-background .ui-state-active, .skinset-background #primary-wrapper.nv-dark .ui-state-active, .skinset-background #nv-tabs ul li ul, #primary-wrapper .skinset-background.sub-menu, .skinset-background span.menu-highlight, .skinset-background #primary-wrapper .skinset-header.nv-skin, .skinset-background div.item-list-tabs ul li.selected, .skinset-background div.item-list-tabs ul li.current, .skinset-background div.item-list-tabs ul li.new, .skinset-background #topic-post-list, .skinset-background table.forum, .skinset-background table.bbp-topics, .skinset-background table.bbp-replies, .skinset-background table.bbp-forums, .skinset-background ul#activity-stream {
border-top: 2px solid #61C4FD;
} 
```

将来在 FireFox 中使用 Firebug - [http://getfirebug.com/downloads/](http://getfirebug.com/downloads/)，非常有用

# c# - c# xml - 如果项目名称相同，则仅显示一个项目/节点

> ID：11738093
> 
> 赞同：1
> 
> 时间：2012-07-31T10:29:12.720
> 
> 标签：c#, xml, for-loop, foreach

这是 .NET 2.0 项目。首先xml我要解析什么：

```
<?xml version="1.0" standalone="yes"?>
<DocumentElement>
  <diagramer>
    <PKTABLE_NAME>TECH_Y_Category</PKTABLE_NAME>
    <FKTABLE_NAME>TECH_File</FKTABLE_NAME>
  </diagramer>
  <diagramer>
    <PKTABLE_NAME>TECH_File</PKTABLE_NAME>
    <FKTABLE_NAME>TECH_Version</FKTABLE_NAME>
  </diagramer>
  <diagramer>
    <PKTABLE_NAME>TECH_Group</PKTABLE_NAME>
    <FKTABLE_NAME>TECH_D_Group_File_Version</FKTABLE_NAME>
  </diagramer>
  <diagramer>
    <PKTABLE_NAME>TECH_Layout</PKTABLE_NAME>
    <FKTABLE_NAME>TECH_File</FKTABLE_NAME>
  </diagramer>
  <diagramer>
    <PKTABLE_NAME>CK_List</PKTABLE_NAME>
    <FKTABLE_NAME>CK_Vote</FKTABLE_NAME>
  </diagramer>
  <diagramer>
    <PKTABLE_NAME>CK_List</PKTABLE_NAME>
    <FKTABLE_NAME>CK_Score</FKTABLE_NAME>
  </diagramer>
  <diagramer>
    <PKTABLE_NAME>TECH_Page</PKTABLE_NAME>
    <FKTABLE_NAME>TECH_Page</FKTABLE_NAME>
  </diagramer>
  <diagramer>
    <PKTABLE_NAME>CK_List</PKTABLE_NAME>
    <FKTABLE_NAME>Comments</FKTABLE_NAME>
  </diagramer>
</DocumentElement> 
```

如您所见，一些 PKTABLE_NAME 值是相同的。我使用下面的代码遍历该 xml：

```
StringBuilder sb = new StringBuilder();
foreach (XmlNode items in diagramTables)
{
  string pkTable = items["PKTABLE_NAME"].InnerText.Replace("_",@"\_");
  string fkTable = items["FKTABLE_NAME"].InnerText.Replace("_",@"\_");

  sb.Append(pkTable);
  sb.Append(" got ");
  sb.Append( fkTable + Environment.NewLine);

} 
```

它不是我想要达到的目标。我想拥有所有值，但只有一次（我不想重复它们）。毕竟我想从上面的xml中写出这样的东西：

*   TECH_Y_Category*获得* TECH_File
*   TECH_File*获得*TECH_Version
*   TECH_Group*获得*TECH_D_Group_File_Version
*   TECH_Layout*得到*TECH_File
*   **CK_List*获得*CK_Vote | CK_Score | 注释**
*   TECH_Page*获得*TECH_Page

我希望你明白我想要达到的目标。

编辑。

来自 Morawski 的代码对我来说非常有效，所以问题得到了解决；）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T10:37:46.450

就像是：

```
Dictionary<string, List<string>> dict = new Dictionary<string, List<string>>();
foreach (XmlNode items in diagramTables)
{
  string pkTable = items["PKTABLE_NAME"].InnerText.Replace("_",@"\_");
  string fkTable = items["FKTABLE_NAME"].InnerText.Replace("_",@"\_");
  if (!dict.ContainsKey(pkTable))
  {
    dict.Add(pkTable, new List<string>());
  }
  if (!dict[pkTable].Contains(fkTable))
  {
      dict[pkTable].Add(fkTable);
  }
}
sb.Append("========================================================="); // making it easier for you
foreach(KeyValuePair<string, List<string>> kvp in dict)
{
  sb.Append(kvp.Key);
  sb.Append(" got ");
  sb.AppendLine(String.Join("|", kvp.Value.ToArray()));
}
sb.Append("========================================================="); // making it easier for you 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T10:38:27.983

将结果存储在 a[`Dictionary`](http://msdn.microsoft.com/en-us/library/xfhwa508.aspx)中[`List`](http://msdn.microsoft.com/en-us/library/6sh2ey19)：

```
var nodes = new Dictionary<string, List<string>>();

XmlDocument document = new XmlDocument();

foreach (XmlNode childNode in document.ChildNodes)
{
    if(nodes.ContainsKey(childNode.Name))
        nodes[childNode.Name].Add(childNode.InnerText);
    else
        nodes.Add(childNode.Name, new List<string> {childNode.InnerText});
}

// and printing

foreach (var node in nodes)
{
    string values = node.Value.Aggregate("", (current, s) => current + ("|" + s));
    Console.WriteLine(node.Key + " gots " + values);
} 
```

# android - 安卓加载器管理器

> ID：11738099
> 
> 赞同：1
> 
> 时间：2012-07-31T10:29:49.207
> 
> 标签：android, multithreading

我有这个代码：

```
abstract class BaseLoader<T> implements LoaderManager.LoaderCallbacks<Cursor> {
....
    @Override
    public void load() {
        loader = loaderManager.initLoader(super.hashCode() | (int) System.currentTimeMillis(), null, this);
    }
} 
```

我想跑

```
for(BaseLoader<?> loader: loaders){
   loader.load();
} 
```

装载机大小 - 超过 100 个。

我需要同时运行的加载程序的数量不应超过 5。我该如何实现呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T01:29:11.690

其实我认为你不需要运行 loader continue 100 次，但如果你需要，你可以尝试使用[CyclicBarrier](http://developer.android.com/reference/java/util/concurrent/CyclicBarrier.html)

这是一种重用锁定方法，希望对您有所帮助

# c# - 如何模拟非虚拟方法？

> ID：11738102
> 
> 赞同：38
> 
> 时间：2012-07-31T10:29:54.967
> 
> 标签：c#, .net, moq

```
[TestMethod]
public void TestMethod1()
{
    var mock = new Mock<EmailService>();
    mock.Setup(x => x.SendEmail()).Returns(true);
    var cus = new Customer();
    var result = cus.AddCustomer(mock.Object);
    Assert.IsTrue(result);
}

public class Customer
{
    public bool AddCustomer(EmailService emailService)
    {
        emailService.SendEmail();
        Debug.WriteLine("new customer added");
        return true;
    }
}

public class EmailService
{            
    public virtual bool SendEmail()
    {
        throw  new Exception("send email failed cuz bla bla bla");
    }
} 
```

该`EmailService.SendEmail`方法必须是虚拟的才能模拟它。有没有办法模拟非虚拟方法？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-07-31T10:33:47.010

Moq 不能模拟类上的非虚拟方法。要么使用其他模拟框架，例如[Type mock Isolator](https://www.typemock.com/isolator-product-page/)，它实际上将 IL 编织到你的程序集中，要么在上面放置一个接口`EmailService`并模拟它。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-31T10:37:41.120

模拟非虚拟方法涉及使用低级分析器 API。目前我认为唯一可用的选择是：

*   [类型模拟](http://www.typemock.com/)
*   [JustMock](http://www.telerik.com/products/mocking.aspx/)

两者都是商业的，即使 JustMock 有一个精简版，模拟非虚拟方法也只能在商业版本中使用。正如评论中所指出的，微软的研究中有一些东西，在[Pex 和 Moles项目中](http://research.microsoft.com/en-us/projects/pex/)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2018-07-08T03:35:27.507

2020 年 7 月更新： `pose`已弃用，目前推荐为： [https](https://github.com/riezebosch/Unmockable) ://github.com/riezebosch/Unmockable 感谢@Customizer 指出。

我还查看了[https://github.com/Serg046/AutoFake](https://github.com/Serg046/AutoFake)，这在 @Serg046 看来是可行的——使用`pose`。允许您替换任何方法，包括静态或非虚拟方法。相当新的项目，但完全开源 MIT 许可证。 [https://github.com/tonerdo/pose](https://github.com/tonerdo/pose)

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-07-31T10:35:50.110

必须使用虚拟方法进行模拟的替代方法是使用接口。这样你就可以模拟出整个依赖。

```
public interface IEmailService
{
    bool SendEmail();
    // etc...
}

public class EmailService : IEmailService
{
    //...
} 
```

现在您可以创建接口`IEmailService`的模拟来模拟它的任何方法。当然，您必须将包含`EmailService`对象的变量类型更改为`IEmailService`适当的位置。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-05-30T00:52:01.873

我很久以前就看到了这个问题，并意识到我想创建一些开源的东西来解决这个问题。所以它准备好了 - [AutoFake](https://github.com/Serg046/AutoFake)。最令人兴奋的是它不需要任何疯狂的 CLR Profiler API。它只是一个普通的 .NET 包，仅此而已。Bellow 是您可以使用该库执行的操作的示例：

```
public class Calendar
{
    public static DateTime Yesterday => DateTime.Now.AddDays(-1);
    internal Task<DateTime> AddSomeMinutesAsync(DateTime date) => Task.Run(() => AddSomeMinutes(date));
    public static DateTime AddSomeMinutes(DateTime date) => date.AddMinutes(new Random().Next(1, 10));
}

[Fact]
public void Yesterday_SomeDay_ThePrevDay()
{
    var fake = new Fake<Calendar>();

    var sut = fake.Rewrite(() => Calendar.Yesterday);
    sut.Replace(() => DateTime.Now).Return(new DateTime(2016, 8, day: 8));

    Assert.Equal(new DateTime(2016, 8, 7), sut.Execute());
}

[Fact]
public async Task AddSomeMinutesAsync_SomeDay_MinutesAdded()
{
    var randomValue = 7;
    var date = new DateTime(2016, 8, 8, hour: 0, minute: 0, second: 0);
    var fake = new Fake<Calendar>();

    var sut = fake.Rewrite(f => f.AddSomeMinutesAsync(date));
    sut.Replace((Random r) => r.Next(1, 10)) // Arg.Is<int>(i => i == 10) is also possible
                           // r.Next(1, 11) fails with "Expected - 11, actual - 10"
        .ExpectedCalls(1) // c => c > 1 fails with "Actual value - 1"
        .Return(randomValue);

    Assert.Equal(date.AddMinutes(randomValue), await sut.Execute());
}

[Fact]
public void AddSomeMinutes_SomeDay_EventsRecorded()
{
    var events = new List<string>();
    var fake = new Fake<Calendar>();

    var sut = fake.Rewrite(() => Calendar.AddSomeMinutes(new DateTime(2016, 8, 8)));

    sut.Prepend(() => events.Add("The first line"));
    sut.Prepend(() => events.Add("The line before AddMinutes(...) call"))
        .Before((DateTime date) => date.AddMinutes(Arg.IsAny<int>()));

    sut.Append(() => events.Add("The line after new Random() call"))
        .After(() => new Random());
    sut.Append(() => events.Add("The last line"));

    sut.Execute();
    Assert.Equal(new[]
        {
            "The first line",
            "The line after new Random() call", // indeed, this call is earlier
            "The line before AddMinutes(...) call",
            "The last line"
        },
        events);
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-11-03T16:29:37.333

正如@aqwert 和@Felice 在使用[Typemock Isolator](https://www.typemock.com/)时所写的那样，可以（并且非常容易）模拟非虚拟方法而无需添加或更改任何代码，例如：

```
[TestMethod,Isolated]
    public void TestMethod1()
    {
        var mock = Isolate.Fake.Instance<EmailService>();
        Isolate.WhenCalled(() => mock.SendEmail()).WillReturn(true);
        var cust = new Customer();
        var result = cust.AddCustomer(mock);
        Assert.IsTrue(result);
    } 
```

如您所见，我创建的测试与您尝试创建的测试相似。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-03-23T15:25:43.353

模拟非虚拟方法的唯一方法是模拟用于使用非虚拟方法实现该类的接口。下面是示例。

```
public interface IEmployee
{
    DateTime GetDateofJoining(int id);
}

public class Employee
{
    public DateTime GetDateofJoining(int id)
    {
        return DateTime.Now;
    }
}

    public class Program
{
    static void Main(string[] args)
    {
        var employee = new Mock<IEmployee>();
        employee.Setup(x => x.GetDateofJoining(It.IsAny<int>())).Returns((int x) => DateTime.Now);

        Console.WriteLine(employee.Object.GetDateofJoining(1));
        Console.ReadLine();
    }
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-02-09T11:19:38.053

作为一种解决方法，您可以不使用方法本身，而是创建虚拟包装方法

```
public class EmailService
{     
    protected virtual void SendEmailReal(){
        throw  new Exception("send email failed cuz bla bla bla");
    }

    public void bool SendEmail()
    {
        return SendEmailReal();
    }
} 
```

然后在测试类中覆盖它：

```
abstract class TestEmailService: EmailService{

     public abstract override  bool SendEmailReal();
} 
```

测试方法本身：

```
[TestMethod]
public void TestMethod1()
{
    var mock = new Mock<TestEmailService>();
    mock.Setup(x => x.SendEmailReal()).Returns(true);
    var cus = new Customer();
    var result = cus.AddCustomer(mock.Object);
    Assert.IsTrue(result);
} 
```

# html - 使用 HTML5 使应用程序脱机时的跨域问题

> ID：11738114
> 
> 赞同：0
> 
> 时间：2012-07-31T10:30:39.397
> 
> 标签：html, offline-caching

我有 2 台服务器。一个提供静态内容（abc 服务器），另一个是应用程序服务器（def）。

静态内容（图像、css、js）由资产（apache 服务器）提供，而应用程序（index.html）由不同的服务器提供。

在这种情况下，如何使用清单文件使应用程序脱机。

现在我的清单文件如下所示：

```
CACHE MANIFEST
CACHE:
http://abc.com/user.js
http://abc.com/jquery-1.6.1.min.js 
```

并且在位于 def 服务器上的 index.html 文件中

```
<html manifest="test.appcache"> 
```

控制台输出

> [使用清单http://def.com/test.appcache](http://def.com/test.appcache)应用程序缓存检查事件从应用程序缓存加载文档

从控制台看到的静态内容不会被缓存。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T10:40:48.563

## 更新

抱歉，实际上根据[http://en.wikipedia.org/wiki/Same_origin_policy](http://en.wikipedia.org/wiki/Same_origin_policy)目前唯一允许跨域缓存的浏览器是 Chrome，这只是因为它们故意不遵守相同的来源政策。如果你想让你的离线站点专门为 chrome 用户提供，你可以做双服务器，否则你必须坚持使用一个，直到不同的浏览器提出新的策略。

# ios - 在 SQLite iPhone 中加入查询

> ID：11738125
> 
> 赞同：0
> 
> 时间：2012-07-31T10:31:29.833
> 
> 标签：ios, sqlite

我有两个表`Visits`，`Labs`
访问有这些字段：`id`，`patientID`
实验室有这些字段：`id`，`VisitID`
`And Visit.id = Labs.VisitID`

我想获取患者的所有旧实验室报告。但是在实验室表中我没有`patientID`字段，因此我需要使用`visitID`字段，我可以使用它连接到访问表并且我有`patientID`

所以现在使用`visitID`（一个公共领域）我想找出患者的所有旧实验室报告

现在我想得到一个病人的所有实验室（我知道`patientID`）

谁能建议我加入这个查询？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T10:41:31.803

这很简单`INNER JOIN`，对吧？

```
SELECT labs.* FROM labs INNER JOIN visit ON visit.id = labs.visitID AND patientID = ? 
```

或者你可以做一个子选择：

```
SELECT labs.* FROM labs WHERE visitID IN (SELECT visit.id FROM visit WHERE patientID = ?) 
```

# iphone - 如何在表格视图中存储结构信息 - IOS

> ID：11738126
> 
> 赞同：0
> 
> 时间：2012-07-31T10:31:30.400
> 
> 标签：iphone, objective-c, ios, xcode

我有与`UITableview`IOS 相关的一般性问题。我有一个`UITableview`用来存储联系信息的。到目前为止，我已经插入了一个`NSArray`对象`UITableview`来显示联系人姓名。是否可以将完整的联系人相关结构添加到 UITableview 中，以便我可以根据所选联系人执行操作。我想区分表格视图中添加的不同类型的联系人。使用`NSArray`我只有不足以区分的字符串。有什么办法吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T10:51:09.520

将多个`NSDictionary`放在 a`NSArray`通常是一个很好的解决方案。然后，您将拥有与`NSArray`索引相对应的表格位置以及您需要的键/值组合。

# java - chmod 在 java 中的 exec 中不起作用

> ID：11738127
> 
> 赞同：1
> 
> 时间：2012-07-31T10:31:33.837
> 
> 标签：java, linux, exec, file-permissions, chmod

我正在使用以下代码更改文件权限：

```
Runtime.getRuntime().exec("chmod 600 '/home/user/Desktop/file'"); 
```

但是没有效果！代码执行前后`ls -l /home/user/Desktop/file`报告：

```
-rw-rw-r-- 1 evir evir 7928 Jul 31 14:54 file 
```

问题是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-31T10:43:49.807

您提出的问题非常具体到您的系统和环境。

因此，我将通过指出您应该查看输出以确定发生了什么（或没有发生）来回答更广泛的问题 - 并教一个人钓鱼。

首先，您应该将`Process`返回的实例分配`exec`给一个变量。当它起作用时，即发即弃是很好的，但如果它不起作用，你将完全无法确定发生了什么。

第一站是调用`process.waitFor()`- 等待进程完成，然后返回它的退出代码。如果这是非零，则它没有正确运行；并且根据过程，这甚至可以告诉您遇到了哪类错误。

如果这不足以解决您的问题，您需要查看输出到`stdout`and的内容`stderr`。`process.getInputStream()`您可以通过分别调用和来获取读取这些流的句柄`process.getErrorStream()`。一旦你有了这些流，只需像往常一样从它们中读取字节。

（请注意，您确实应该从这些流中读取，无论您是否打算处理数据。写入足够输出以填充缓冲区的进程可能会阻塞，直到“另一端”（您！）把它读下来。用你的`chmod`例子虽然这不太可能是问题。）

* * *

现在您可以访问退出状态、stdout 和 stderr 流——事实上，如果您在控制台中运行该过程，您将获得的一切。现在剩下的就是使用该信息来解决您的特定问题......

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-31T21:04:08.503

这样做不是更简单吗：

```
 File file = new File("/home/user/Desktop/file");
    file.setReadable(true, true);
    file.setWritable(true, true);
    file.setExecutable(false, false); 
```

这样你就可以避免进入系统特定的命令行调用......

# java - 如果 CPU 是超线程，是否可以检查 Java？

> ID：11738133
> 
> 赞同：23
> 
> 时间：2012-07-31T10:31:43.113
> 
> 标签：java, multithreading, hyperthreading

我想知道我可以运行的最佳线程数。通常，这等于`Runtime.getRuntime().availableProcessors()`。

但是，在支持超线程的 CPU 上，返回的数字是其两倍。现在，对于某些任务，超线程是好的，但对于其他任务，它什么也没做。就我而言，我怀疑它什么也没做，所以我想知道我是否必须将返回的数字一分为`Runtime.getRuntime().availableProcessors()`二。

为此，我必须推断 CPU 是否是超线程。因此我的问题是——我怎样才能在 Java 中做到这一点？

谢谢。

**编辑**

好的，我已经对我的代码进行了基准测试。这是我的环境：

*   Lenovo ThinkPad W510（即具有 4 核和超线程的 i7 CPU），16G RAM
*   Windows 7的
*   84 个压缩的 CSV 文件，压缩大小从 105M 到 16M
*   所有文件都在主线程中一一读取 - 没有对 HD 的多线程访问。
*   每个 CSV 文件行都包含一些数据，这些数据会被解析并通过快速的无上下文测试确定该行是否相关。
*   每个相关行都包含两个双精度（表示经度和纬度，出于好奇），它们被强制转换为一个`Long`，然后存储在一个共享的哈希集中。

因此，工作线程不会从 HD 中读取任何内容，但它们会忙于解压缩和解析内容（使用[opencsv](http://opencsv.sourceforge.net/)库）。

下面是代码，没有无聊的细节：

```
public void work(File dir) throws IOException, InterruptedException {
  Set<Long> allCoordinates = Collections.newSetFromMap(new ConcurrentHashMap<Long, Boolean>());
  int n = 6;
  // NO WAITING QUEUE !
  ThreadPoolExecutor exec = new ThreadPoolExecutor(n, n, 0L, TimeUnit.MILLISECONDS, new SynchronousQueue<Runnable>());
  StopWatch sw1 = new StopWatch();
  StopWatch sw2 = new StopWatch();
  sw1.start();
  sw2.start();
  sw2.suspend();
  for (WorkItem wi : m_workItems) {
    for (File file : dir.listFiles(wi.fileNameFilter)) {
      MyTask task;
      try {
        sw2.resume();
        // The only reading from the HD occurs here:
        task = new MyTask(file, m_coordinateCollector, allCoordinates, wi.headerClass, wi.rowClass);
        sw2.suspend();
      } catch (IOException exc) {
        System.err.println(String.format("Failed to read %s - %s", file.getName(), exc.getMessage()));
        continue;
      }
      boolean retry = true;
      while (retry) {
        int count = exec.getActiveCount();
        try {
          // Fails if the maximum of the worker threads was created and all are busy.
          // This prevents us from loading all the files in memory and getting the OOM exception.
          exec.submit(task);
          retry = false;
        } catch (RejectedExecutionException exc) {
          // Wait for any worker thread to finish
          while (exec.getActiveCount() == count) {
            Thread.sleep(100);
          }
        }
      }
    }
  }
  exec.shutdown();
  exec.awaitTermination(1, TimeUnit.HOURS);
  sw1.stop();
  sw2.stop();
  System.out.println(String.format("Max concurrent threads = %d", n));
  System.out.println(String.format("Total file count = %d", m_stats.getFileCount()));
  System.out.println(String.format("Total lines = %d", m_stats.getTotalLineCount()));
  System.out.println(String.format("Total good lines = %d", m_stats.getGoodLineCount()));
  System.out.println(String.format("Total coordinates = %d", allCoordinates.size()));
  System.out.println(String.format("Overall elapsed time = %d sec, excluding I/O = %d sec", sw1.getTime() / 1000, (sw1.getTime() - sw2.getTime()) / 1000));
}

public class MyTask<H extends CsvFileHeader, R extends CsvFileRow<H>> implements Runnable {
  private final byte[] m_buffer;
  private final String m_name;
  private final CoordinateCollector m_coordinateCollector;
  private final Set<Long> m_allCoordinates;
  private final Class<H> m_headerClass;
  private final Class<R> m_rowClass;

  public MyTask(File file, CoordinateCollector coordinateCollector, Set<Long> allCoordinates,
                Class<H> headerClass, Class<R> rowClass) throws IOException {
    m_coordinateCollector = coordinateCollector;
    m_allCoordinates = allCoordinates;
    m_headerClass = headerClass;
    m_rowClass = rowClass;
    m_name = file.getName();
    m_buffer = Files.toByteArray(file);
  }

  @Override
  public void run() {
    try {
      m_coordinateCollector.collect(m_name, m_buffer, m_allCoordinates, m_headerClass, m_rowClass);
    } catch (IOException e) {
      e.printStackTrace();  //To change body of catch statement use File | Settings | File Templates.
    }
  }
} 
```

请在结果下方找到（我稍微更改了输出以省略重复部分）：

```
Max concurrent threads = 4
Total file count = 84
Total lines = 56395333
Total good lines = 35119231
Total coordinates = 987045
Overall elapsed time = 274 sec, excluding I/O = 266 sec

Max concurrent threads = 6
Overall elapsed time = 218 sec, excluding I/O = 209 sec

Max concurrent threads = 7
Overall elapsed time = 209 sec, excluding I/O = 199 sec

Max concurrent threads = 8
Overall elapsed time = 201 sec, excluding I/O = 192 sec

Max concurrent threads = 9
Overall elapsed time = 198 sec, excluding I/O = 186 sec 
```

您可以自由得出自己的结论，但我的观点是，在我的具体案例中，超线程确实提高了性能。此外，拥有 6 个工作线程似乎是这项任务和我的机器的正确选择。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-31T10:38:37.583

不幸的是，这在 java 中是不可能的。如果您知道该应用程序将在现代 linux 变体上运行，您可以读取文件 /proc/cpuinfo 并推断是否启用了 HT。

读取此命令的输出可以解决问题：

```
grep -i "physical id" /proc/cpuinfo | sort -u | wc -l 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-31T11:15:33.130

没有可靠的方法来确定您是否启用了超线程、关闭了超线程或没有超线程。

相反，更好的方法是在您第一次运行（或每次）时进行第一次校准，运行第一次测试以确定使用哪种方法。

另一种方法是使用所有处理器，即使超线程没有帮助（前提是它不会使代码显着变慢）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-01T10:05:24.270

还有一些沉思：

*   超线程每个代码可能有超过 2 个线程（Sparc 可以有 8 个）
*   垃圾收集器也需要 CPU 时间才能工作。
*   超线程可能有助于并发 GC - 也可能不会；或者 JVM 可能会请求成为内核的独占（非超线程）所有者。因此，从长远来看，阻碍 GC 在测试期间获得更好的结果可能会造成伤害。
*   如果存在缓存未命中，超线程通常很有用，因此 CPU 不会停止而是切换到另一个任务。因此，“是否超线程”将取决于工作负载和 CPU L1/L2 缓存大小/内存速度等。
*   操作系统可能对/反对某些线程有偏见，并且 Thread.setPriority 可能不被尊重（在 Linux 上通常不被尊重）。
*   可以设置进程的亲和性，禁止某些内核。因此，在这种情况下，知道有超线程不会有任何显着的优点。

话虽这么说：您应该设置工作线程的大小，并根据架构的具体情况建议如何设置。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-31T11:48:41.917

无法从纯 Java 中确定这一点（毕竟逻辑核心是核心，无论是否使用 HT 实现）。请注意，到目前为止提出的解决方案可以解决您的要求（如您所问），但不仅英特尔 CPU 提供了一种超线程形式（Sparc 浮现在脑海中，我相信还有其他的）。

您也没有考虑到，即使*您*确定系统使用 HT，您也无法控制与 Java 内核的线程亲和性。所以你仍然受制于操作系统的线程调度程序。虽然存在一些看似合理的场景，即更少的线程可以更好地执行（因为减少了缓存垃圾），但无法静态确定应该使用多少线程（毕竟所有 CPU 的缓存大小都*非常*不同（低端的范围从 256KB现在可以合理地预期服务器中> 16MB。而且随着每一代的更新，这必然会改变）。

只需将其设置为可配置设置，任何在不完全了解目标系统的情况下确定这一点的尝试都是徒劳的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-07-24T13:52:59.013

对于`Windows`，如果逻辑核心数高于核心数，则您已[`hyper-threading`](https://en.wikipedia.org/wiki/Hyper-threading)启用。[在此处](https://stromasys.atlassian.net/wiki/spaces/KBP/pages/47350211/How+to+check+if+hyper-threading+is+enabled+in+Windows)阅读更多相关信息。

您可以使用`wmic`以下信息查找此信息：

```
C:\WINDOWS\system32>wmic CPU Get NumberOfCores,NumberOfLogicalProcessors /Format:List

NumberOfCores=4
NumberOfLogicalProcessors=8 
```

因此，我的系统具有`hyper-threading`. 逻辑处理器的数量是内核的两倍。

但你可能甚至不需要知道。`Runtime.getRuntime().availableProcessors()`已经返回逻辑处理器的数量。

获取物理核心数的完整示例（`Windows`仅）：

```
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;

public class PhysicalCores
{
    public static void main(String[] arguments) throws IOException, InterruptedException
    {
        int physicalNumberOfCores = getPhysicalNumberOfCores();
        System.out.println(physicalNumberOfCores);
    }

    private static int getPhysicalNumberOfCores() throws IOException, InterruptedException
    {
        ProcessBuilder processBuilder = new ProcessBuilder("wmic", "CPU", "Get", "NumberOfCores");
        processBuilder.redirectErrorStream(true);
        Process process = processBuilder.start();
        String processOutput = getProcessOutput(process);
        String[] lines = processOutput.split(System.lineSeparator());
        return Integer.parseInt(lines[2]);
    }

    private static String getProcessOutput(Process process) throws IOException, InterruptedException
    {
        StringBuilder processOutput = new StringBuilder();

        try (BufferedReader processOutputReader = new BufferedReader(
                new InputStreamReader(process.getInputStream())))
        {
            String readLine;

            while ((readLine = processOutputReader.readLine()) != null)
            {
                processOutput.append(readLine);
                processOutput.append(System.lineSeparator());
            }

            process.waitFor();
        }

        return processOutput.toString().trim();
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-31T11:03:21.947

没有办法做到这一点，你可以做的一件事是`Runtime.getRuntime().availableProcessors()`在你的应用程序中创建一个线程池，并在请求进来时使用。

这样你就可以拥有 0 -`Runtime.getRuntime().availableProcessors()`线程数。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-05-02T05:08:22.997

您可能无法可靠地查询操作系统或运行时，但您可以运行快速基准测试。

逐步增加自旋锁线程，测试每个新线程是否像以前一样迭代。一旦其中一个线程的性能低于之前每个测试的一半左右（至少对于英特尔，我不了解 SPARC），您就知道您已经开始与超线程共享一个内核。

# html - iframe 内的 sencha touch 应用程序的问题

> ID：11738134
> 
> 赞同：3
> 
> 时间：2012-07-31T10:31:44.170
> 
> 标签：html, iframe, sencha-touch, mobile-safari

在我的网页中，我必须显示另一个使用 sencha touch 完成的网页的内容。我为此目的使用 iframe。但问题是 sencha touch 网页中的选择菜单（通过 iframe 加载）在查看时没有出现在iphone浏览器中。有一个覆盖，但不是选择菜单。当直接通过浏览器查看sencha触摸应用程序时，它会很好。所以我认为问题出在iframe上。任何解决方案都可以使用iframe ?.修改煎茶触摸是不可能的，因为这是由不同的团队维护的，我无法控制该代码。

为了说明问题，我在 iframe 中加载了 sencha touch kitchen sink 应用程序。这里是 url。 [http://pastehtml.com/view/c6mqj67b0.html](http://pastehtml.com/view/c6mqj67b0.html)

请从 iphone 浏览器/模拟器打开选择菜单“Rank”，您可以看到问题。

任何可以在我结束时完成的解决方案来完成这项工作？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-05T16:14:08.557

抱歉@user700284，但覆盖`iframe`还不能在 iOS 和 android 浏览器上运行；目前仅适用于浏览器桌面。但是你可以把`iframe`不叠加到你这样的`Ext.Panel`东西中，

```
Ext.Panel({
   items: [
    {
       xtype: 'panel',
       html: '<iframe width="560" height="315" src="http://www.sencha.com/products/touch/" frameborder="0" allowfullscreen></iframe>',
       id: 'Idpanel',
       hideOnMaskTap: true
    },
   ]
}) 
```

**希望这些有所帮助。:)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T20:19:16.567

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T11:25:36.410

加载选择字段的 iFrame 在 iPad（本机和移动 safari）上完美运行。但在 iPhone 上，它给出了同样的错误。还有其他解决方案吗？

# android - android - 导航到 tabhost 活动组中的子活动

> ID：11738135
> 
> 赞同：0
> 
> 时间：2012-07-31T10:31:45.220
> 
> 标签：android, android-tabhost, activitygroup

我有一个带有标签主机的应用程序，其中一个标签是 ActivityGroup。我想从 ActivityGroup GroupA 中的 Activity A1 导航到 ActivityGroup GroupB 中的 Activity B2。GroupB的主要活动是B1，但我想直接去B2。

我不知道我如何才能真正从我的 TabHost 接收 ActivityGroup B 对象。

我可以通过在 TabHost 上使用 setCurrentTab(int index) 转到 GroupB。但是我怎样才能进入活动 B2？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T10:45:21.167

可能这不是您问题的直接答案，但我宁愿建议您开始使用片段而不是 ActivityGroups 和很多活动。在这种情况下使用片段有很多好处：

1.  您可以实现一个 TabHost，其中包含 Fragments 而不是活动。Android SDK 和 ActionbarSherlock 库中有关于如何实现的示例。您还可以将带有片段的选项卡添加到操作栏。
2.  使用 FragmentTransaction 类可以轻松替换选项卡中的片段。您不需要存储对 ActivityGroups 的引用并编写意大利面条代码来控制选项卡中的活动。
3.  选项卡和 ActivityGroups 中的许多活动都可能导致 OutOfMemoryExceptions。
4.  您可以轻松地将选项卡中的活动切换到片段。
5.  ActivityGroup 已弃用。

# php - Magento 安装脚本不会运行

> ID：11738137
> 
> 赞同：0
> 
> 时间：2012-07-31T10:31:49.697
> 
> 标签：php, magento, installation

我正在尝试为 magento 创建一个安装脚本，但它不会运行。这是我的设置

应用程序/代码/本地/

*   公司
*   *   发票
*   *   *   模型
*   *   *   *   资源
*   *   *   *   *   安装程序.php
*   *   *   ETC
*   *   *   *   配置文件
*   *   *   sql
*   *   *   *   invoices_setup
*   *   *   *   *   mysql4-install-0.1.0.php

**配置文件**

```
<?xml version="1.0"?>
<config>
    <modules>
        <Company_Invoices>
            <version>0.1.0</version>
        </Company_Invoices>
    </modules>  
    <global>
    <resources>
        <weblog_setup>
            <setup>
                <module>Company_Invoices</module>
                <class>Company_Invoices_Model_Resource_Setup</class>
            </setup>
        </weblog_setup>
    </resources>    
    </global>
</config> 
```

**mysql4-install-0.1.0.php**

```
<?php
    die("Exit for now");
?> 
```

如果我在 Setup.php 文件中重命名该类，则会出现错误，因此文件夹设置正确。它只是不会执行安装文件。

注意：我检查了数据库，core_resource 表中没有显示任何内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T12:05:43.497

您的资源节点（在 下`global/resources`）是`weblog_setup`，但您的设置资源文件夹是`invoices_setup`. 使这两个匹配并获利。

类参考[这里](https://github.com/LokeyCoding/magento-mirror/blob/magento-1.7/app/code/core/Mage/Core/Model/Resource/Setup.php#L540)。

# c# - 异步解析非长度分隔的数据

> ID：11738138
> 
> 赞同：0
> 
> 时间：2012-07-31T10:31:53.623
> 
> 标签：c#, .net, asynchronous, beginread

我有一个联网服务器，我切换到使用同步 Begin.. 来处理短暂的请求，这是一个巨大的改进。对于长期存在的线程，创建了两个线程，并且随着客户端数量的增加，它开始成为一个问题。

通过这些连接传输的数据是 4 到 40 字节的消息。但是，它们不是长度分隔的，它们的长度可能取决于消息中的部分。可悲的是我不能改变协议。您可以将该协议视为一种快节奏的 telnet 终端协议。

我正在研究使用 Stream.BeginRead 读取和解析传入的消息/“行”，并遇到了两个担忧：

1.  对于 10 字节的消息，调用 BeginRead 大约 3 次是否有效？
2.  我如何有效地编写代码来做到这一点

这是一个例子。虽然消息本身没有长度前缀，但它的某些内容可能是。

**同步方式（当前）**

```
int length = reader.ReadInt32();
byte[] buffer = reader.ReadBytes(length); 
```

**异步方法**

```
 ...
    //Here we have received a byte array
    int length = ParseIntegerFromBuffer(buffer);
    stream.BeginRead(buffer, 0, length, Part1Read, null);
}
private void Part1Read(IAsyncResult result)
{
    ... 
```

异步示例不是我正在使用的，我已经编写了一些包装器来检查是否成功读取请求的字节数。这在编写和理解我可以获得的书面代码方面是否同样有效？

我的代码必须在 .NET 3.5 上运行，但未来 5 是和选项，所以我应该等待它然后进行异步编程吗？

这段代码将面向互联网，如果我使用同步读取，任何挂起的传入连接都会锁定线程池线程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T17:00:50.433

我完成了异步实现，结果是 CPU 负载比每个连接一个线程的设计高 4 倍。

被解析的协议本身设计得很糟糕，尝试异步解析它无助于管理更多的连接。

# xcode - Xcode 4.4 中的 OpenCV

> ID：11738139
> 
> 赞同：2
> 
> 时间：2012-07-31T10:32:00.763
> 
> 标签：xcode, opencv

以下是我的程序：

```
#include <cv.h>
#include <highgui.h>
#include <iostream>

using namespace std;
using namespace cv;

int main(int argc, char** argv)
{
    Mat image = imread("/Users/hanxu/Pictures/me.jpg", CV_LOAD_IMAGE_GRAYSCALE);
    if (!image.data) {
        cout << "Image load failed" << endl;
        return -1;
    }

    namedWindow("Image_Colored");
    imshow("Image_Colored", image);

    waitKey(0);
    return 0;
} 
```

发生错误：

```
/usr/local/include/opencv2/flann/lsh_table.h:196:14: Use of undeclared identifier 'use_speed_' 
```

那里的代码：

```
#if USE_UNORDERED_MAP
    if (!use_speed_) buckets_space_.rehash((buckets_space_.size() + dataset.rows) * 1.2);
#endif 
```

最初，Xcode 不支持 unordered_map，我将构建设置中的“C++ 标准库”更改为“支持 C++11”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T10:02:53.023

我通过更改 lsh_table.h 中的这一行来解决这个问题

```
if (!use_speed_) buckets_space_.rehash((buckets_space_.size() + dataset.rows) * 1.2); 
```

至

```
buckets_space_.rehash((buckets_space_.size() + dataset.rows) * 1.2); 
```

[您可以在https://github.com/mariusmuja/flann/pull/51/files](https://github.com/mariusmuja/flann/pull/51/files)上找到更多信息

# android - Android系统对话框导致应用程序崩溃

> ID：11738141
> 
> 赞同：0
> 
> 时间：2012-07-31T10:32:06.153
> 
> 标签：android

我的应用程序有这行代码

```
requestWindowFeature(Window.FEATURE_NO_TITLE); 
```

在它调用这条线之前

```
setContentView(R.layout.home_layout); 
```

我的问题是，当应用程序崩溃（无论出于何种原因）时，Android 会在下次启动时显示一个崩溃数据对话框，导致它崩溃并出现错误“在添加内容之前必须调用 requestFeature()”。有解决方法吗？

编辑：问题是在我调用 requestfeature() 之前系统正在向屏幕添加内容，导致我的应用程序崩溃。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T10:33:40.337

```
requestFeature() must be called before adding content 
```

`setContentView`之前不要打电话`requestWindowFeature`

**使用喜欢**

```
requestWindowFeature(Window.FEATURE_NO_TITLE);
setContentView(R.layout.home_layout); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T11:20:24.077

在为视图本身膨胀之前，您需要请求此功能。使用这种方式时：

```
requestWindowFeature(Window.FEATURE_NO_TITLE);
setContentView(R.layout.home_layout); 
```

您在说类似-“请为名为 R.layout.home.layout 的布局充气，并在没有标题栏的情况下对其进行充气”

# javascript - JavaScript 对象作为数组

> ID：11738144
> 
> 赞同：3
> 
> 时间：2012-07-31T10:32:19.817
> 
> 标签：javascript, associative-array, javascript-objects

访问 Js 对象属性：

和有什么区别：

```
1) Obj.src
     vs
2) Obj["src"] 
```

我只知道 #1 不能与数字一起使用（例如，如果属性名称是“1”）

还有其他主要区别吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T10:35:01.660

真的没有区别。Old'ish 浏览器使用一种或另一种表示法显示出一些性能差异，但那些时代已经结束。

唯一重要的区别是括号表示法是您*动态*访问对象属性的唯一机会。

例如：

```
var access = 'src';

Obj[ access ]; 
```

你不能使用点符号来做到这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T10:34:58.463

在 javascript 中，**每个对象都是一个[关联数组](http://www.quirksmode.org/js/associative.html)**。

~~除了 JavaScript更好~~的神奇功能之一之外，我想不出更多要添加的内容。:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T10:36:15.250

`Obj.src`和之间没有区别`Obj["src"]`。

但是当属性名称是一个变量时，你只能使用第二种方式来访问它。

```
var name = "src"; 
```

然后你需要使用`Obj[name]`，`Obj.name`会尝试访问名称为 的属性`name`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-31T11:13:46.480

可以用括号表示法访问的属性集是可以用点表示法访问的属性的超集。使用点访问的任何内容都必须是[有效的 JavaScript 标识符](https://developer.mozilla.org/en/JavaScript/Reference/Operators/Member_Operators)：

> 不能以数字开头的字母数字字符序列，还包括下划线 ("_") 和美元符号 ("$")。

属性仍然可以是不是标识符的字符串，但需要括号表示法才能访问：

```
object["I have whitespace"];
object["1startswithanumber"];
object["Punctuation!!??"];
object[""] = "empty string";
// not an exhaustive list 
```

ES5 允许您使用[保留字作为属性](http://mathiasbynens.be/notes/javascript-properties), `x.class = "some string"`，*但是*ES3 不允许这样做，因此您可能应该使用方括号`x["class"]`来向后兼容。

* * *

括号表示法仍可用于访问有效的标识符属性，但点表示法被认为更简洁。当你有一个变量时，通常使用括号：

```
object[input.value];  //Retrieves the property named by the value of the input field 
```

函数也可以用括号访问：

```
var fn = operation == "tag" ? "getElementsByTagName":"getElementsByClassName";
document[fn](str); 
```

# r - ggplot2：为 alpha 设置（非线性）值

> ID：11738145
> 
> 赞同：5
> 
> 时间：2012-07-31T10:32:21.363
> 
> 标签：r, ggplot2, alpha

我想绘制一条镜像的 95% 密度曲线并将 alpha 映射到密度：

```
foo <- function(mw, sd, lower, upper) {
x <- seq(lower, upper, length=500)
dens <- dnorm(x, mean=mw, sd=sd, log=TRUE)
dens0 <- dens -min(dens)
return(data.frame(dens0, x))
}

df.rain <- foo(0,1,-1,1)

library(ggplot2)

drf <- ggplot(df.rain, aes(x=x, y=dens0))+
geom_line(aes(alpha=..y..))+
geom_line(aes(x=x, y=-dens0, alpha=-..y..))+
stat_identity(geom="segment", aes(xend=x, yend=0, alpha=..y..))+
stat_identity(geom="segment", aes(x=x, y=-dens0, xend=x, yend=0, alpha=-..y..))
drf 
```

这很好用，但我想让边缘和中间的对比更加突出，即我希望边缘接近白色，只有中间部分是黑色的。我一直在篡改，`scale_alpha()`但没有运气。有任何想法吗？

编辑：最终，我想绘制几个雨滴，即单个雨滴会很小，但阴影仍应清晰可见。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T11:00:43.413

而不是映射`dens0`到`alpha`，我将其映射到`color`：

```
drf <- ggplot(df.rain, aes(x=x, y=dens0))+
   geom_line(aes(color=..y..))+
   geom_line(aes(x=x, y=-dens0, color=-..y..))+
   stat_identity(geom="segment", aes(xend=x, yend=0, color=..y..))+
   stat_identity(geom="segment", aes(x=x, y=-dens0, xend=x, yend=0, color=-..y..)) 
```

![在此处输入图像描述](../Images/24d16d35dc46a3b5bf4b45d6f218d8fc.png)

现在我们仍然有颜色的对比主要存在于尾巴上。使用两种颜色会有所帮助（注意颜色切换为 0.25）：

```
drf + scale_color_gradient2(midpoint = 0.25) 
```

![在此处输入图像描述](../Images/cd6d83589a3938cee890acb78b5b9709.png)

最后，为了包括`dens0`值的分布，我将色标的中点基于数据中的中值：

```
drf + scale_color_gradient2(midpoint = median(df.rain$dens0)) 
```

![在此处输入图像描述](../Images/f4a149f974ecf0bfbd42aba42b1005f4.png)

**笔记！**：但是，无论您调整数据的方式如何，数据中的最大对比是数据集中更极端的值。试图通过弄乱非线性比例或像我一样调整颜色比例来掩盖这一点，可能会呈现真实数据的虚假画面。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-31T11:20:07.967

这是使用 geom_ribbon() 而不是 geom_line() 的解决方案

```
df.rain$group <- seq_along(df.rain$x)
tmp <- tail(df.rain, -1)
tmp$group <- tmp$group - 1
tmp$dens0 <- head(df.rain$dens0, -1)
dataset <- rbind(head(df.rain, -1), tmp)
ggplot(dataset, aes(x = x, ymin = -dens0, ymax = dens0, group = group, 
  alpha = dens0)) + geom_ribbon() + scale_alpha(range = c(0, 1)) 
```

![在此处输入图像描述](../Images/a48eb425a8a0ba28db80f4e5567895d0.png)

```
ggplot(dataset, aes(x = x, ymin = -dens0, ymax = dens0, group = group, 
  fill = dens0)) + geom_ribbon() + 
  scale_fill_gradient(low = "white", high = "black") 
```

![在此处输入图像描述](../Images/8385da5a8c7f6a3c5ee8a48581136af8.png)

请参阅保罗更改颜色的答案。

```
dataset9 <- merge(dataset, data.frame(study = 1:9))
ggplot(dataset9, aes(x = x, ymin = -dens0, ymax = dens0, group = group, 
    alpha = dens0)) + geom_ribbon() + scale_alpha(range = c(0, 0.5)) + 
    facet_wrap(~study) 
```

![在此处输入图像描述](../Images/54cdd49791fc2f82cdd9ba5ab32a6116.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T11:10:39.837

在思考你的两个答案时，我实际上找到了我正在寻找的东西。最简单的方法是简单地使用`scale_colour_gradientn`灰色向量。

```
library(RColorBrewer)
grey <- brewer.pal(9,"Greys")

drf <- ggplot(df.rain, aes(x=x, y=dens0, col=dens0))+
 stat_identity(geom="segment", aes(xend=x, yend=0))+
 stat_identity(geom="segment", aes(x=x, y=-dens0, xend=x, yend=0))+
 scale_colour_gradientn(colours=grey)
drf 
```

# c# - 透明的应用程序栏和虚拟化列表框 - WP7

> ID：11738146
> 
> 赞同：0
> 
> 时间：2012-07-31T10:32:33.093
> 
> 标签：c#, windows-phone-7, xaml, listbox, virtualization

我有一个应用程序，其中包含很多视图，每个视图都包含一个列表框。所有视图也有一个应用程序栏。我想要做的是让 appbar 透明，只要它没有被激活，它的不透明度为 0.5，然后只要它被激活（上拉）就将不透明度设置为 0.99。只要我的列表框被封装在滚动查看器中，我就能够做到这一点。问题是我的应用程序使用了大量内存，所以我不得不让列表框虚拟化。为此，我必须删除滚动查看器。这导致我的列表不再通过应用程序栏可见，即使它仍然是透明的（我可以看到）。所以你可以看到我的问题：现在的情况是我必须在虚拟化列表框或透明应用程序栏之间进行选择。有谁知道解决方案，或者至少知道为什么这不起作用的解释？非常感谢！

# android - Android - 解析网络转储（pcap）

> ID：11738161
> 
> 赞同：0
> 
> 时间：2012-07-31T10:33:32.077
> 
> 标签：android, parsing, networking, pcap

我目前正在拼命寻找在我的 android 应用程序中解析 tcpdump 网络转储文件（tcpdump -w）的可能性。我真的只需要解析的东西 - 没有嗅探。

有谁知道一个合适的库或其他东西来解析这样的转储。我什至可以调整 tcpdump 的输出——只需要解析那个输出。

非常感谢 ！

问候

顺便说一句：我真正想做的是识别流量中的特殊字符串。因此，仅了解来源、目的地、港口……是不够的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T08:09:57.413

你可能想看看

[http://www.programming-pcap.aldabaknocking.com/code/simplesniffer.c](http://www.programming-pcap.aldabaknocking.com/code/simplesniffer.c)

如果 pcap.h 或 pcap 库不适用于 android，您必须编写自己的函数和结构

[http://gotbrew.org/git/coolstuff/pcap2bin.c](http://gotbrew.org/git/coolstuff/pcap2bin.c)

# c++ - 我可以告诉 VC2010 自动增加预编译头分配（与 /Zm 相同）而不是获取 c3859 吗？

> ID：11738163
> 
> 赞同：1
> 
> 时间：2012-07-31T10:33:38.900
> 
> 标签：c++, visual-studio-2010, visual-c++, compiler-errors

今天我再次收到错误c3859，编译器建议我使用/Zm140。

我的问题是：如何告诉 Visual Studio 在需要时自动增加此内存？甚至可能吗？

如果不是 - 为什么不呢？既然编译器可以准确地告诉我它需要多少内存——为什么不简单地自己分配呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T10:36:54.683

该标志的存在是有原因的：编译器只能事后确定如果需要预先需要多少内存。

# asp.net - WCF 数据服务 ODATA

> ID：11738168
> 
> 赞同：0
> 
> 时间：2012-07-31T10:33:56.163
> 
> 标签：asp.net, asp.net-mvc-3, wcf-data-services, odata

我正在研究 WCF 数据服务。我的服务中有一个函数，它将记录添加到 SQL DB 中的表中并返回插入记录的 ID。

我曾经以参数的形式将要插入的值传递给函数。

例如

```
 public int Add(string Name, string Password)
 {
      // Here I will Add the record and return the ID of the record added in DB
 } 
```

但是我不想这样做以参数的形式传递。

我想直接传递对象。

像

```
public int Add(User user)
{
    // Here I will Add the record and return the ID of the record added in DB
} 
```

我在我的服务中编写了上面的功能，我的服务项目成功了。当我更新我的 ServiceRefrences 时，我得到了**Error**。

> 它说只支持原始类型。有没有解决这个问题的方法。

感谢您花时间回答我的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T17:55:22.360

WCF 数据服务（以及与此相关的 OData 协议）仅支持将原始值作为参数传递给服务操作。

将新实体添加到实体集中的 OData 方法是将带有有效负载中的实体的 POST 发送到实体集 URL。在 WCF DS 服务中，这将转换为对您的上下文中的 IUpdatable 接口的多次调用。

# batch-file - 如何使用 sftp 批处理文件发送密码

> ID：11738169
> 
> 赞同：39
> 
> 时间：2012-07-31T10:33:57.700
> 
> 标签：batch-file, passwords, sftp

我正在尝试使用批处理脚本从 sftp 站点下载文件。我收到以下错误：

```
Permission denied (publickey,password,keyboard-interactive).
Couldn't read packet: Connection reset by peer 
```

运行命令时：

```
sftp -b /home/batchfile.sftp <user>@<server ip>:<folder> 
```

包括`batchfile.sftp`这些数据：

```
password
lcd [local folder]
cd [sftp server folder]
get *
bye 
```

注意：在提示符下运行时它正在工作

```
sftp <user>@<server ip>:<folder> 
```

但我需要能够自动输入密码。

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2014-02-01T04:56:12.420

您需要安装 sshpass 程序。然后：

`sshpass -p YOUR_PASSWORD sftp -oBatchMode=no -b YOUR_COMMAND_FILE_PATH USER@HOST`

显然，最好设置公钥认证。无论出于何种原因，只有在不可能的情况下才使用它。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2014-02-06T00:47:53.123

如果您正在生成要运行的命令堆，然后从终端调用该脚本，您可以尝试以下操作。

```
sftp login@host < /path/to/command/list 
```

然后将要求您输入密码（按照正常情况），但是脚本中的所有命令在此之后运行。

这显然不是一个可以在`cron`作业中使用的完全自动化的选项，但可以从终端使用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-21T00:58:33.403

我建议您使用 -v 选项运行 sftp。了解正在发生的事情变得容易得多。

手册明确指出：

> 最终使用格式允许使用 -b 选项进行自动会话。在这种情况下，有必要配置非交互式身份验证以避免在连接时输入密码（有关详细信息，请参阅 sshd(8) 和 ssh-keygen(1)）。

换句话说，你必须建立一个公钥认证。然后，您将能够运行批处理脚本。

PS 将密码放入批处理文件是错误的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-10-25T14:39:35.653

```
PSFTP -b path/file_name.sftp user@IP_server -hostkey 1e:52:b1... -pw password 
```

文件内容是：

```
lcd "path_file for send"

cd path_destination

mput file_name_to_send

quit 
```

让主机密钥运行：

```
psftp  user@IP_SERVER 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-07-31T08:46:02.167

您需要使用命令 pscp 并强制它通过 sftp 协议。pscp 会在您安装 PuttY 时自动安装，PuttY 是一个通过 ssh 连接到 linux 服务器的软件。

当你有你的 pscp 命令时，这里是命令行：

```
pscp -sftp -pw <yourPassword> "<pathToYourFile(s)>" <username>@<serverIP>:<PathInTheServerFromTheHomeDirectory> 
```

这些参数（-sftp 和 -pw）仅适用于 pscp 而不是 scp。如果您想以递归方式上传文件夹中的所有内容，还可以添加 -r。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-10-12T16:12:22.680

您提到批处理文件，然后假设您在谈论Windows系统，我是否正确？如果是这样，您将无法使用 sshpass，您将不得不切换到其他选项。

遵循截然相反的哲学的两个这样的选择是：

*   psftp：可以从批处理脚本中调用的命令行工具；psftp 是 PuTTY 包的一部分，你可以在这里找到它 http://www.chiark.greenend.org.uk/~sgtatham/putty/download.html
*   Syncplify.me FTP Script：用于 Windows 的可编写脚本的 FTP/S 和 SFTP 客户端，允许您将密码存储在加密的“配置文件”中；在这里查看 http://www.syncplify.me/products/ftp-script/

无论哪种方式，强烈建议从密码切换到 PKI 身份验证。

# java - Java中oracle表的并发更新

> ID：11738174
> 
> 赞同：1
> 
> 时间：2012-07-31T10:34:19.923
> 
> 标签：java, multithreading, oracle, concurrency, deadlock

我正在开发一个具有某种“facebook like”功能的应用程序。每次用户发布的内容被“喜欢”时，他的标点符号就会增加。该应用程序将被公司内的大量用户使用，因此我们预计同一行会有很多并发更新。

*简化代码*

## 用户标点表

```
Punctuation(
    userId NVARCHAR2(32),
    value NUMBER(10,0)
)/ 
```

## Java 代码

```
public class Punctuation(){
    private String userId;
    private int value;

    public Punctuation(final String userId, final int value){
            this.userId = userId;
            this.value = value;
    }

    public String getUserId();
    public int getValue();

}

//simplified code
public final class PunctuationController{

    private PunctuationController(){}

    public static void addPunctuation(final Punctuation punctuation){

        final Transaction transaction = TransactionFactory.createTransaction();
        Connection conn = null;
        PreparedStatment statment = null;
        try{
                synchronized(punctuation){
                    transaction.begin();
                    conn = transaction.getConnection();
                    statment = conn.preparedStatment("UPDATE Punctuation SET value = value + ? where userId = ?");
                    statment.setString('1', punctuation.getUserId());
                    statment.setInt('2', punctuation.getValue());
                    transaction.commit();
                }
        }catch (Exception e){
                transaction.rollback();
        }finally{
                transaction.dispose();
                if(statment !=null){
                        statment.close();
                }
        }
} 
```

我们害怕更新期间出现死锁。Oracle 允许对单个查询求和，我不必检索该值并进行第二次查询以使用新值进行更新，这很好。还在这里阅读了其他一些帖子，他们说创建一个同步块来锁定一个对象，并让Java处理不同线程之间的同步。我选择方法接收的标点符号实例，这样我想用户和值的不同组合将允许并发访问此方法，但会阻止具有相同值的实例（我必须在标点符号上实现 equals() 吗？

）数据库是 Oracle 10g、Server Weblogic 11g、Java 6 和 Linux（我不知道是哪种风格）。

先感谢您！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T10:44:53.817

你的同步策略错了。`synchronized`在括号之间使用对象的内在锁定。如果您有两个`Punctuation`实例，您可能认为它们相等，因为它们引用相同`user_id`，Java 不在乎：2 个对象，所以 2 个锁，所以没有互斥。

我真的不明白为什么上面没有`synchronized`, 会产生死锁：你正在更新表中的一行。如果您有两个并发事务，其中一个更新 user1，然后是 user2，另一个更新 user2，然后是 user1，您可能会遇到死锁。但即便如此，数据库也会检测到死锁并为其中一个事务抛出异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T10:45:14.923

你需要使用乐观锁模式。在这里查看更多详细信息[http://docs.jboss.org/jbossas/docs/Server_Configuration_Guide/4/html/The_CMP_Engine-Optimistic_Locking.html](http://docs.jboss.org/jbossas/docs/Server_Configuration_Guide/4/html/The_CMP_Engine-Optimistic_Locking.html)

可能这个[http://docs.jboss.org/jbossas/docs/Server_Configuration_Guide/4/html/The_CMP_Engine-Optimistic_Locking.html](http://docs.jboss.org/jbossas/docs/Server_Configuration_Guide/4/html/The_CMP_Engine-Optimistic_Locking.html)这是更底层的细节

在使用乐观锁识别并发问题后，您可能希望重试 - 您可以完全控制要做什么

# windows - VBA - 当不唯一时从数组中删除这两个项目

> ID：11738175
> 
> 赞同：1
> 
> 时间：2012-07-31T10:34:23.670
> 
> 标签：windows, arrays, excel, vba, unique

我一直在努力解决的快速问题。我有 2 个包含字符串的不同长度的数组。我想输出一个新数组，如果检测到重复，则删除两个元素。目前它只删除了重复项，但留下了原始文件，这对于我想要完成的工作是不正确的。

例如

```
input = array ("cat","dog","mouse","cat")  
expected output =  array ("dog","mouse")  
actual output = array ("cat","dog","mouse") 
```

代码如下：

```
Sub removeDuplicates(CombinedArray)
Dim myCol As Collection
Dim idx As Long
Set myCol = New Collection

On Error Resume Next

For idx = LBound(CombinedArray) To UBound(CombinedArray)
    myCol.Add 0, CStr(CombinedArray(idx))
    If Err Then
        CombinedArray(idx) = Empty
        dups = dups + 1
        Err.Clear
    ElseIf dups Then
        CombinedArray(idx - dups) = CombinedArray(idx)
        CombinedArray(idx) = Empty
    End If
Next

For idx = LBound(CombinedArray) To UBound(CombinedArray)
    Debug.Print CombinedArray(idx)
Next
removeBlanks (CombinedArray)
End Sub 
```

感谢您提前提供的所有帮助和支持。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T12:23:37.657

怎么用`Scripting.Dictionary`？像这样：

```
Function RemoveDuplicates(ia() As Variant)

Dim c As Object
Set c = CreateObject("Scripting.Dictionary")
Dim v As Variant
For Each v In ia
    If c.Exists(v) Then
        c(v) = c(v) + 1
    Else
        c.Add v, 1
    End If
Next

Dim out() As Variant
Dim nOut As Integer
nOut = 0

For Each v In ia
    If c(v) = 1 Then
        ReDim Preserve out(nOut) 'you will have to increment nOut first, if you have 1-based arrays
        out(nOut) = v
        nOut = nOut + 1
    End If
Next

RemoveDuplicates = out

End Function 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T11:30:24.120

这是一个简单的例子。如果您有任何错误，请告诉我。

```
Sub Sample()
    Dim inputAr(5) As String, outputAr() As String, temp As String
    Dim n As Long, i As Long

    inputAr(0) = "cat": inputAr(1) = "Hen": inputAr(2) = "mouse"
    inputAr(3) = "cat": inputAr(4) = "dog": inputAr(5) = "Hen"

    BubbleSort inputAr

    For i = 1 To UBound(inputAr)
        If inputAr(i) = inputAr(i - 1) Or inputAr(i) = temp Then
            inputAr(i - 1) = "": temp = inputAr(i): inputAr(i) = ""
        End If
    Next i

    n = 0
    For i = 1 To UBound(inputAr)
        If inputAr(i) <> "" Then
            n = n + 1
            ReDim Preserve outputAr(n)
            outputAr(n) = inputAr(i)
        End If
    Next i

    For i = 1 To UBound(outputAr)
        Debug.Print outputAr(i)
    Next i
End Sub

Sub BubbleSort(arr)
    Dim value As Variant
    Dim i As Long, a As Long, b As Long, c As Long

    a = LBound(arr): b = UBound(arr)

    Do
        c = b - 1
        b = 0
        For i = a To c
            value = arr(i)
            If (value > arr(i + 1)) Xor False Then
                arr(i) = arr(i + 1)
                arr(i + 1) = value
                b = i
            End If
        Next
    Loop While b
End Sub 
```

**编辑**

另一种不排序的方法

```
Sub Sample()
    Dim inputAr(5) As String, outputAr() As String
    Dim n As Long, i As Long, j As Long
    Dim RemOrg As Boolean

    inputAr(0) = "cat": inputAr(1) = "Hen": inputAr(2) = "mouse"
    inputAr(3) = "cat": inputAr(4) = "dog": inputAr(5) = "Hen"

    For i = 0 To UBound(inputAr)
        For j = 1 To UBound(inputAr)
            If inputAr(i) = inputAr(j) Then
                If i <> j Then
                    inputAr(j) = "": RemOrg = True
                End If
            End If
        Next
        If RemOrg = True Then
            inputAr(i) = ""
            RemOrg = False
        End If
    Next i

    n = 0
    For i = 0 To UBound(inputAr)
        If inputAr(i) <> "" Then
            n = n + 1
            ReDim Preserve outputAr(n)
            outputAr(n) = inputAr(i)
        End If
    Next i

    For i = 1 To UBound(outputAr)
        Debug.Print outputAr(i)
    Next i
End Sub 
```

# multithreading - Perl：信号和线程。如何使用 qx() 杀死线程

> ID：11738179
> 
> 赞同：2
> 
> 时间：2012-07-31T10:34:42.863
> 
> 标签：multithreading, perl, signals

我有一个脚本，可以解析日志并查找错误和警告。
我想对这个日志使用用户友好的解释。
出于这个原因，我使用`notepad`.
这是代码：

```
use v5.16;
use strict;
use warnings;

use Win32::Clipboard;
use threads;
use utf8;

my $kp = Win32::Clipboard->new();

my $output = shift || "out_log.txt";

#my ($input, $output)=@ARGV;
#open my $ih, "<", $input or die "can't open input file with log\n";

open my $oh, ">", $output or die "can't open output file with log\n";
my @alls=split /\n/,$kp->Get();

for my $k(0..$#alls){
    $_ = $alls[$k];
    if(/^ERR.+|^WARN.+/){
        print {$oh} qq(at position $k --> ).$_."\n";
        }
    }
my $thread = 
threads->create(sub{
                $SIG{INT}=sub{die"All good\n";};
                qx(notepad $output);
            }
        );

print qq(type 'y' for quit);
do{
    print "want to quit?\n>" ;
    chomp;
    do{
        say "I will kill this thread";
        $thread->kill('INT') if defined($thread);       
        say "and delete output";
        unlink $output;
        exit(0);
        }if (m/y/);
    }while(<>); 
```

当我试图杀死运行记事本的线程时，它掉下来了。
如何做到这一点，使用信号和线程？可能吗？
以及您对解决方案的想法，请。
谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-02-07T23:36:52.467

This isn't working because your `SIGINT` never gets passed to `notepad`. So it never gets closed. (And that handler - probably never gets processed).

You need to approach this differently. Look at `Win32::Process` for some examples of how to spawn/kill a notepad process.

```
my $ProcessObj;
    Win32::Process::Create( $ProcessObj,
        "C:\\Windows\\system32\\notepad.exe",
        "notepad", 0, NORMAL_PRIORITY_CLASS, "." )
        or die $!; 
```

And then you can use

```
$ProcessObj -> Kill(1); 
```

I'd suggest using `Thread::Semaphore` or some sort of shared variable to decide if you want to kill your notepad.

# python - 尝试操作数据，将列表分配给更高列表中的第一项，第二项将是有关该列表的信息

> ID：11738181
> 
> 赞同：3
> 
> 时间：2012-07-31T10:34:56.107
> 
> 标签：python, list, nested, dictionary

好的，我正在尝试传输值列表以及有关该值列表的信息。我正在尝试在处理数据时做到这一点。让我告诉你发生了什么：

```
worddictlist2 = []
for innertweet in namelist:
        worddictlist = []
        for tweet in innertweet[0]:
                worddict = {word: tweet.count(word) for word in wordlist}
                worddictlist.append(worddict)
                worddictlist2.append(worddictlist) 
```

namelist 是一个包含以下信息的变量：

```
[[['blah blah blah string blah blah blah blah blah blah', 'another string, blah blah blah, string string', 'string string string'], category], ['string string another string, blah', 'more words, more words, etc', 'yet again, here we go'], category2] 
```

我正在计算每个短语中特定单词出现的次数。但是我仍然想以某种方式保留类别分配。

我一直在尝试在各个循环中附加不同的列表，我尝试了不同的列表推导，但我只是没有看到我想要的结果，如下所示：

```
[[{word1: 0, word2: 7, word3: 12, word4: 6}, category], {word1: 3, word2: 9, word3: 1, word4: 2}, category2]] 
```

我怎样才能得到这个输出？我这样做效率低吗？我折磨这些数据的方式让我觉得我做这个过程效率低下。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T10:49:08.867

首先，在当前代码中`worddict`，每条推文都会重新创建，这可能不是您想要的。此外，使用该方法`str.count()`您冒着将推文中出现的单词计数为另一个单词的一部分的风险，例如，`'as is the case'.count('as')`将是 2，而不是 1，因为作为子字符串`as`出现在单词`case`中。我建议用空格分割推文，而不是迭代该分割中的唯一单词，比如`words = tweet.split()`和`{word: words.count(word) for word in list(set(words))`或简单地迭代单词并为每次出现的单词增加字典中的计数，我不确定哪个更多高效的。

所以，我的建议是

```
worddictlist2 = []
for innertweet in namelist:
    worddict = {}
    for tweet in innertweet[0]:
        words = tweet.split()
        for word in words:
            if not worddict.has_key(word):
                worddict[word] = 1
            else:
                worddict[word] += 1
    worddictlist2.append([worddict, innertweet[1]]) 
```

给定输入

```
namelist = [[['blah blah blah string blah blah blah blah blah blah', 'another string, blah blah blah, string string', 'string string string'], 'category'], [['string string another string, blah', 'more words, more words, etc', 'yet again, here we go'], 'category2']] 
```

此代码生成

```
[[{'blah,': 1, 'blah': 11, 'string,': 1, 'string': 6, 'another': 1}, 'category'], [{'string,': 1, 'string': 2, 'again,': 1, 'etc': 1, 'we': 1, 'here': 1, 'blah': 1, 'words,': 2, 'another': 1, 'go': 1, 'yet': 1, 'more': 2}, 'category2']] 
```

为了摆脱带有逗号的单词，您可能希望在计算单词之前消除标点符号，例如通过添加`tweet = re.sub(r'[^a-zA-Z0-9]', ' ', tweet)`到上面的代码：

```
import re

worddictlist2 = []
for innertweet in namelist:
    worddict = {}
    for tweet in innertweet[0]:
        tweet = re.sub(r'[^a-zA-Z0-9]', ' ', tweet)
        words = tweet.split()
        for word in words:
            if not worddict.has_key(word):
                worddict[word] = 1
            else:
                worddict[word] += 1
    worddictlist2.append([worddict, innertweet[1]])

print worddictlist2 
```

产生

```
[[{'blah': 12, 'string': 7, 'another': 1}, 'category'], [{'again': 1, 'we': 1, 'string': 3, 'etc': 1, 'here': 1, 'blah': 1, 'another': 1, 'words': 2, 'go': 1, 'yet': 1, 'more': 2}, 'category2']] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T10:58:49.830

给定数据：

```
category = "C"
category2 = "C2"

namelist = [
  [['blah blah blah string blah blah blah blah blah blah', 'another string, blah blah blah, string string', 'string string string'],
   category
  ],
  [['string string another string, blah', 'more words, more words, etc', 'yet again, here we go'],
   category2
  ]
]

wordlist = "blah string words".split() 
```

那么这应该像描述的那样工作：

```
from collections import defaultdict

worddictlist2 = []
for innertweet in namelist:
    worddict = defaultdict(lambda: 0)
    category = innertweet[1]
    for tweet in innertweet[0]:
        for word in wordlist:
            worddict[word] += tweet.count(word)

    # optional - transform defaultdict into standard dict to make it printable
    worddictClean = {}
    worddictClean.update(worddict)

    worddictlist2.append([worddictClean, category])

print worddictlist2 
```

它输出：

```
[[{'blah': 12, 'string': 7, 'words': 0}, 'C'], [{'blah': 1, 'string': 3, 'words': 2}, 'C2']] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T11:22:57.077

或许是这样的：

```
worddictlist2 = []
wdlist = {}
for innertweet,cat in namelist:
   for i in innertweet:
      for j in i.split():
         j = j.strip(',') # strip comma
         wdlist.setdefault(j,0) # if 'j' unknown key
         wdlist[j] += 1
   worddictlist2.append(wdlist, cat)
   wdlist = {}

print(worddictlist2) 
```

给出：

```
[
 [{'another': 1, 'blah': 12, 'string': 7}, 'category'],
 [{'again': 1, 'another': 1, 'blah': 1, 'etc': 1, 'go': 1, 'here': 1, 'more': 2, 'string': 3, 'we': 1, 'words': 2, 'yet': 1}, 'category2']
] 
```

# magento - Magento 1.4.2.0 - 创建新订单 - 无法选择客户组

> ID：11738183
> 
> 赞同：0
> 
> 时间：2012-07-31T10:34:58.403
> 
> 标签：magento, magento-1.4

我和这个用户有完全相同的问题：

[http://www.magentocommerce.com/boards/viewthread/284012/](http://www.magentocommerce.com/boards/viewthread/284012/)

虽然没有发布解决方案。

当我尝试创建新订单时，一切正常，除了我无法选择自定义组。检查下拉列表中的任何其他内容会导致加载对话框，然后将其重置为默认值。

日志中不会引发任何错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T14:27:12.037

这似乎与支付网关有关。特别是在这种情况下，SagePay。删除 SagePay 插件解决了这个问题。

在 1.3 中，我们使用的插件与 1.4 中的插件不同。

# javascript - 使用 jquery/javascript 将 amchart（多个 SVG）保存为图像（jpg）

> ID：11738190
> 
> 赞同：0
> 
> 时间：2012-07-31T10:35:15.593
> 
> 标签：javascript, jquery, html, amcharts

我分别在 4 个 div 中使用 amchart 在 html 页面上生成了四个图表。在每个 div 上都有一个用于导出图表的链接。图表是使用多个 SVG 生成的。我想通过单击导出链接将图表单独保存为客户端的图像。

最后，我得到了我的解决方案。我将所有 svg 一张一张地转换为图像，并使用[http://www.battlehorse.net/page/topics/charts/save_google_charts_as_image.html将其写入 div](http://www.battlehorse.net/page/topics/charts/save_google_charts_as_image.html)

最后，我使用[http://html2canvas.hertzen.com/index.html](http://html2canvas.hertzen.com/index.html)将 div 内容转换为图像。如果有人想转换文本和 svg，那么您需要将 div 内容克隆到新 div，然后将转换后的图像写入新 div，最后将其转换为图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T10:46:52.003

如果您可以在画布上绘制图表，则可以保存它。只是保存一个 div 并将其内容保存到图像中很难（我认为这甚至不可能）......

您的问题与[此](https://stackoverflow.com/questions/9075792/save-export-image-file-from-html-content)有关。它可能会有所帮助。

**编辑**

如果您使用的是 amchart，它会创建一个 svg。您可以创建一个隐藏的画布，将 svg 绘制到画布上，将其保存为数据 url，将其作为 jpg/png/.. 呈现给用户。（[更多信息](https://stackoverflow.com/questions/5433806/convert-embedded-svg-to-png-in-place)）

# javascript - 当元素 ID 包含美元符号时，Javascript 中的 getElementByid

> ID：11738195
> 
> 赞同：0
> 
> 时间：2012-07-31T10:35:28.133
> 
> 标签：javascript

当 ID 包含美元符号时，getElementById() 似乎找不到元素。纯Javascript有没有办法解决这个问题？我无法控制元素 ID，因为它们是由“页面构建器”生成的，并且我无法在此应用程序中使用 jQuery。

例子：

```
<div id="win0divFRED$0"> 
```

```
var orig = document.getElementById("win0divFRED$0"); 
```

非常感谢，
约翰

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T10:45:51.307

由于 HTML4.01 规范非常严格

> ID 和 NAME 标记必须以字母 ([A-Za-z]) 开头，后跟任意数量的字母、数字 ([0-9])、连字符 ("-")、下划线 ("_") , 冒号 (":") 和句点 (".")。

根据 4.01 规范，您的 id 将无效。
与 HTML5 相比：

> 该值在元素的主子树中的所有 ID 中必须是唯一的，并且必须包含至少一个字符。该值不得包含任何空格字符。

我认为这可能是文档类型的问题。尝试：

```
<!doctype html> 
```

# android - 在android中录制声音

> ID：11738196
> 
> 赞同：1
> 
> 时间：2012-07-31T10:35:29.193
> 
> 标签：android

```
Intent intent=new Intent(MediaStore.Audio.Media.RECORD_SOUND_ACTION);
startActivityForResult(intent, VoiceHandler.VOICE_FLAG); 
```

此代码在我的 ICS 设备上执行良好，但不适用于我的 android 2.3 设备，此代码抛出

```
android.content.ActivityNotFoundException: No Activity found to handle Intent { act=android.provider.MediaStore.RECORD_SOUND } 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-31T11:01:45.693

尝试这个：

**为您的清单**

```
<intent-filter>
<action android:name="android.provider.MediaStore.RECORD_SOUND" />
<category android:name="android.intent.category.DEFAULT" />
</intent-filter> 
```

**生成意图：**

```
i = new Intent("android.provider.MediaStore.RECORD_SOUND"); 
```

# qt - QML 无法加载

> ID：11738198
> 
> 赞同：2
> 
> 时间：2012-07-31T10:35:35.157
> 
> 标签：qt, qml

我是 QML 的初学者，只是想用它测试 Hello WOrld 程序。它失败：

```
/home/saman# /home/saman/QtSDK/Simulator/Qt/gcc/bin/qmlviewer
Qml debugging is enabled. Only use this in a safe environment!
Cannot find any Simulator supporting Qt version 4.7.4.0.
Aborted 
```

我需要知道如何解决它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T11:09:56.137

看起来您没有正确安装 Qt-SDK。尝试遵循 SDK 附带的安装说明，或通过您的分发包管理器安装它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-04T14:33:45.660

**[尝试从https://download.qt.io/archive/qt/5.0/5.0.0/](https://download.qt.io/archive/qt/5.0/5.0.0/)**安装 SDK（Qtcreator & Qt Kit）（*根据您使用的平台下载所需的版本*）。这将反过来包含可以完美运行的示例和演示。

一切顺利！

# git-merge - Git合并覆盖本地更改

> ID：11738200
> 
> 赞同：0
> 
> 时间：2012-07-31T10:35:39.837
> 
> 标签：git-merge

> **可能重复：**
> [Git 合并，同时丢弃任何以前的更改（在本地存储库或上次提交中）](https://stackoverflow.com/questions/11737759/git-merge-while-discarding-any-previous-changesin-local-repository-or-from-the)

在 git 合并中，有没有办法告诉覆盖本地存储库内容并将其替换为远程内容。

我的意思是这样，我们可以避免在已知情况下发生冲突。

# wcf - 带有 IP 地址的 WCF 托管

> ID：11738201
> 
> 赞同：0
> 
> 时间：2012-07-31T10:35:46.830
> 
> 标签：wcf, localhost, ip-address

我创建了一个返回 JSON 数据的 WCF 服务。这是我的代码：

```
namespace AppServices
{
[ServiceContract]
public interface Service1
{
[OperationContract]
[WebInvoke(Method = "GET", UriTemplate = "/GetCities", BodyStyle = WebMessageBodyStyle.WrappedRequest,
RequestFormat = WebMessageFormat.Json, ResponseFormat = WebMessageFormat.Json)]
List<City> GetCityCode();
}
[DataContract]
public class City
{
[DataMember]
public string CityId { get; set; }
[DataMember]
public string CityName { get; set; }
[DataMember]
public string StateId { get; set; }
[DataMember]
public string Priority { get; set; }
}
}

public class ServiceAPI : Service1
    {
 public List<City> GetCityCode()
        {
            adp = new SqlDataAdapter("Select * from tblCity", offcon);
            adp.Fill(ds, "City");
            var city = (from DataRow dr in ds.Tables["City"].Rows
                        select new
                        {
                            Id = dr["intCityId"].ToString(),
                            Name = dr["strTitle"].ToString(),
                            sid = dr["intStateId"].ToString(),
                            priority = dr["intPriority"].ToString()
                        }).Select(x => new City() { CityId = x.Id, CityName = x.Name, StateId = x.sid, Priority = x.priority }).ToList();

            return city;
        }
} 
```

我的 web.config 如下：

```
 <?xml version="1.0"?>
<configuration>
  <system.web>
    <compilation debug="true" targetFramework="4.0" />
  </system.web>
  <system.serviceModel>
    <services>
      <service behaviorConfiguration="ServiceBehaviour" name="PatrikaAPIService.PatrikaService">
        <endpoint address="" behaviorConfiguration="web" binding="webHttpBinding"
                  contract="PatrikaAPIService.IPatrikaService"/>
        <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange"/>
      </service>
    </services>
    <behaviors>
      <serviceBehaviors>
        <behavior name="ServiceBehaviour">
          <serviceMetadata httpGetEnabled="true"/>
        </behavior>
      </serviceBehaviors>
      <endpointBehaviors>
        <behavior name="web">
          <webHttp/>
        </behavior>
      </endpointBehaviors>
    </behaviors>
    <serviceHostingEnvironment/>
  </system.serviceModel>
</configuration> 
```

当我在本地主机上运行此 wcf 时，一切正常：localhost:13186/ServiceApp.svc/GetCities

**问题：**当我将我的**IP 地址**传递为 192.168.1.16:13186/ServiceApp.svc/GetCities

它给出了一个错误，即网站太忙了……我想在其他计算机上的 URL 中访问这个 wcf 服务，我的意思是我网络上的其他 PC。如果有人知道接下来要做什么来使用 IP 地址托管此服务，我现在已根据我的要求更改了我的 web.config。或将其托管到 Microsoft 2003 Server SP2 中。请帮忙..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T10:48:46.547

我假设这是卡西尼？如果是这样 - 我认为 Cassini 仅在主机标头为“localhost”时才会响应。当然，您不会让它通过您的 IP 响应。

将其托管在 IIS 或 IIS Express 中。

另一方面——如果这是一个 .Net 4 项目，您可能有兴趣注意到通过 WCF 以这种方式实现的 Rest 服务很快就会成为遗留服务——一旦它进入 RTM，就会被[Asp.Net Web API](http://www.asp.net/web-api)取代（它是目前处于 RC 阶段） - 如果可以的话，我敦促您考虑这种新技术（尽管它不会解决这个问题）。

# java - 尝试迁移到 JBoss 7.1.1 时 EntityManager null

> ID：11738204
> 
> 赞同：0
> 
> 时间：2012-07-31T10:35:53.950
> 
> 标签：java, migration, jboss7.x, entitymanager

我目前正在尝试将我的 Web 应用程序从 JBoss 5.1 迁移到 JBoss 7.1.1。我将实体管理器注入到我的 jsp 文件中，但实体管理器始终为空。

持久性.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence version="1.0" xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_1_0.xsd">
    <!-- SSIS2 Productive Database --> 
    <persistence-unit name="SSIS2" transaction-type="JTA">
        <provider>org.hibernate.ejb.HibernatePersistence</provider>
        <jta-data-source>java:/SSIS2DSprod</jta-data-source>
        <properties>
            <property name="hibernate.hbm2ddl.auto" value="update" />
            <property name="hibernate.show_sql" value="false"/>
            <property name="hibernate.dialect" value="org.hibernate.dialect.Oracle10gDialect"/> 
        </properties>
    </persistence-unit>
</persistence> 
```

JSP 文件中的实体管理器注入示例：

```
<%! @PersistenceContext(unitName = "SSIS2")
    public EntityManager em;

    @Resource
    UserTransaction utx;
%> 
```

部署本身没有错误，那么这里的实体管理器有什么问题呢？它在 JBoss 5.1 上运行没有问题。

编辑：standalone.xml 中的数据源：（删除了 IP 地址和 SSID）

```
<datasource jta="true" jndi-name="java:/SSIS2DSprod" pool-name="SSIS2DSprod" enabled="true" use-java-context="true" use-ccm="true">
                    <connection-url>jdbc:oracle:thin:@ip-address:1531:SSID</connection-url>
                    <driver>oracle</driver>
                    <transaction-isolation>TRANSACTION_READ_COMMITTED</transaction-isolation>
                    <pool>
                        <prefill>true</prefill>
                        <use-strict-min>false</use-strict-min>
                        <flush-strategy>FailingConnectionOnly</flush-strategy>
                    </pool>
                    <security>
                        <user-name>ssis2</user-name>
                        <password>ssis2</password>
                    </security>
                </datasource> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T11:30:07.397

确保您的 persistence.xml 在 META-INF 文件夹下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T09:05:16.687

我发现不再允许向 JSP 注入资源。

# java - 如何将字符串从毫秒转换为日期？

> ID：11738205
> 
> 赞同：0
> 
> 时间：2012-07-31T10:35:53.487
> 
> 标签：java, android, datetime, time, string-conversion

我有这个代码：

```
String id = c.getString("data"); 
String name = ((TextView) view.findViewById(R.id.TextView05)).getText().toString();

public static String getDate(long seconds, String dateFormat)
{
    DateFormat formatter = new SimpleDateFormat("yyyy MMMM dd HH:mm");
    long now = System.currentTimeMillis();
    Calendar calendar = Calendar.getInstance();
    calendar.setTimeInMillis(now);
    return formatter.format(calendar.getTime());
} 
```

`"data"`是`1341435600000`。_ 我想要从毫秒到日期的这个字符串。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T11:02:34.937

如果您不介意`Date`格式，请按以下方式使用

```
String id = c.getString("data"); //"1341435600000"; 
Date date123 = new Date(Long.parseLong(id));
System.out.println(date123); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T10:52:29.590

同样的方法对我来说效果很好。为什么不是你的？

```
/** Called when the activity is first created. */
@Override
protected void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    long cTime = System.currentTimeMillis();

    String date = getDate(cTime, "dd/MM/yyyy hh:mm:ss.SSS");

    Toast.makeText(getApplicationContext(), date, Toast.LENGTH_SHORT).show();
}

public static String getDate(long milliSeconds, String dateFormat)
{
    // Create a DateFormatter object for displaying date in specified format.
    DateFormat formatter = new SimpleDateFormat(dateFormat);

    // Create a calendar object that will convert the date and time value in milliseconds to date. 
     Calendar calendar = Calendar.getInstance();
     calendar.setTimeInMillis(milliSeconds);
     return formatter.format(calendar.getTime());
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-10T20:02:29.787

帮助的代码片段：

```
String timestamp="20140809";
DateFormat dateFormat = new SimpleDateFormat("yyyyMMdd");
System.out.println("date :"+dateFormat.parse(timestamp).getTime()); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T10:47:20.227

```
try {  
      String str_date="11-June-07";
      DateFormat formatter ; 
      Date date ; 
      formatter = new SimpleDateFormat("dd-MMM-yy");
      date = (Date)formatter.parse(str_date);  
      System.out.println("Today is " +date );
    } 
catch (ParseException e)
{
System.out.println("Exception :"+e);
} 
```

用于将毫秒转换为日期

```
long yourmilliseconds = 1119193190;
SimpleDateFormat sdf = new SimpleDateFormat("MMM dd,yyyy HH:mm");
Date resultdate = new Date(yourmilliseconds); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-31T10:48:25.780

像这样的东西：

```
 SimpleDateFormat ss = (SimpleDateFormat) SimpleDateFormat.getInstance();
    ss.applyPattern("yyyy MM dd HH:mm");

    // Date to String: 
    String dateToString = ss.format(new Date());

    //String to Date
    Date stringToDate = ss.parse("2012 02 16 14:10")); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-31T10:49:14.593

```
 String dtStart = "2010-10-15T09:27:37Z";  
SimpleDateFormat  format = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss'Z'");  
try {  
    Date date = format.parse(dtStart);  
    System.out.println(date);  
} catch (ParseException e) {  
    // TODO Auto-generated catch block  
    e.printStackTrace();  
} 
```

# facebook - FQL 计数 (*) Javascript SDK 不起作用

> ID：11738206
> 
> 赞同：0
> 
> 时间：2012-07-31T10:35:56.143
> 
> 标签：facebook, facebook-fql

我使用 fql 请求找到所有使用我的应用程序并想看我的电影的朋友。我使用这个请求：

```
FB.api({
    method: "fql.query",
    query: "SELECT actor_id FROM stream WHERE app_id = MYAPPID and source_id = "+friend.id+" and attachment.name = 'MYFILMNAME'"},
    function (responseFQL) { 
```

这将返回所有朋友的 ID。但是我想计算结果的数量，我该怎么做？我不能在 FQL 中使用 count(*) 吗？

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T21:17:56.230

您不能在 FQL 中使用 COUNT，它不受支持。为什么不获取数据并最终执行计数操作？

# asp.net - 从服务器中的客户端检测到潜在危险的 request.form 值

> ID：11738208
> 
> 赞同：0
> 
> 时间：2012-07-31T10:36:02.310
> 
> 标签：asp.net, c#-4.0

我的 Web 应用程序出现错误，该错误来自我的实时站点“从服务器中的客户端检测到潜在危险的 request.form 值”。我启用了`ValidateRequest="false"`相应页面并`requestValidationMode="2.0"`在 webconfig 文件中添加了，我正在使用 Html。编码和解码概念，但在我的实时站点中仍然出现此错误，但此应用程序在我的本地主机中运行良好。让我知道我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T10:42:33.083

在框架 4.0 中，您必须在 web 配置中将 requestValidationMode 值设置为 2.0 才能使这项工作

```
<system.web>
     <compilation debug="false" targetFramework="4.0" />
     <httpRuntime requestValidationMode="2.0"/>
</system.web> 
```

# javascript - 和使用 Handlebar 的语句

> ID：11738213
> 
> 赞同：1
> 
> 时间：2012-07-31T10:36:21.193
> 
> 标签：javascript, handlebars.js

我想知道是否可以在车把中使用可能的 AND 语句来制作类似的东西：如果不是，那么最好的方法是什么？

* * *

这是javascript上下文：

```
{
  title: "My first post!",
  author: {
    firstName: "Charles",
    lastName: "Jolley"
  }
} 
```

* * *

这是 HTML 上下文：

```
<div class="entry">
  {{#if firstName && lastName}}
  <h1>{{firstName}} {{lastName}}</h1>
  {{/if}}
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T16:55:16.373

不，本机`{{#if}}`不理解这种语法。但是，您可以轻松地为类似的事情[添加自己的助手](http://handlebarsjs.com/block_helpers.html#conditionals)，如果您不介意弄乱[`arguments`](https://developer.mozilla.org/en/JavaScript/Reference/Functions_and_function_scope/arguments).

唯一棘手的部分是要注意 helper 的 block 参数总是排在最后。

像这样简单的事情就可以解决问题：

```
Handlebars.registerHelper('if_all_true', function() {
    var args  = Array.prototype.slice.call(arguments);
    var block = args.pop();
    for(var i = 0; i < args.length; ++i)
        if(!args[i])
            return block.inverse(this);
    return block(this);
}); 
```

演示：http: [//jsfiddle.net/ambiguous/jMLcZ/](http://jsfiddle.net/ambiguous/jMLcZ/)

# html - (HTML5) 使用UTF-8时无法显示汉字

> ID：11738217
> 
> 赞同：1
> 
> 时间：2012-07-31T10:36:33.897
> 
> 标签：html, text, utf-8, character-encoding

我正在尝试使用 HTML5 在我的网页上显示一些中文字符。

```
var canvas = document.getElementById('canvas');
var context = canvas.getContext('2d');

// ...

context.fillText('中文', 0, 0);

context.fill(); 
```

我在这里检查了几个问题，并在标题中添加了以下内容。

```
<meta charset="UTF-8" /> 
```

我在 Firefox 14 中尝试过，它显示`????`在屏幕上。当我意识到这一点时，我的浏览器字符编码设置是`UTF-8`. 当我将其更改为“Big5”时，它显示得很好。

我的问题是，脚本能否允许浏览器在不更改特定字符编码的情况下正确显示中文（可能还有所有其他非英文）字符？即保持设置不变`UTF-8`，然后再不处理用户的浏览器，因为我希望我的页面显示不止一种语言。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T11:30:23.047

您似乎已将源代码保存在 Big5 中。你应该要么

*   将源代码保存为 UTF-8，或者
*   对非 ASCII 字符使用 unicode 转义码。

如果您更喜欢使用转义码，您的示例可以写成：

```
context.fillText('\u4e2d\u6587', 0, 0); 
```

# c++ - 使用 MSVS c++ 创建 OLE 组件库

> ID：11738225
> 
> 赞同：-1
> 
> 时间：2012-07-31T10:37:30.053
> 
> 标签：c++, visual-studio-2010, com

我需要创建包含 OLE COM 对象的 dll。MS C++ vizard 只提供了使用 MFC 的 ActiveX 库，但它创建了 OCX，我需要 dll。

你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T10:44:29.790

你应该看看[ATL](http://msdn.microsoft.com/en-us/library/sd845614%28v=vs.80%29.aspx)

如果您需要 GUI，请使用[WT](http://sourceforge.net/projects/wtl/) L

# jquery - JQuery 对话框仅在 JS 处理后显示

> ID：11738226
> 
> 赞同：0
> 
> 时间：2012-07-31T10:37:34.253
> 
> 标签：jquery, user-interface, dialog

我有以下代码：

[文件准备好]

```
$("#hincl_working").dialog({autoOpen: false, modal: true}); 
```

[一些 JS 功能]

```
$("#hincl_working").dialog("open"); 
```

处理（有时需要几秒钟）

我希望在处理开始之前打开对话框（然后在处理后立即关闭），但对话框只在处理之后显示，这不是我想要的。有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T10:42:41.227

使用 javascript 的 setTimeout 将您的处理延迟 100 毫秒左右

[https://developer.mozilla.org/en/DOM/window.setTimeout](https://developer.mozilla.org/en/DOM/window.setTimeout)

像这样调用你的 PROCESSING 函数，也许也改变大小写。

```
window.setTimeout(function(){PROCESSING(tile, id)}, 100); 
```

# powershell - 带有脚本名称变量的 Powershell 调用命令

> ID：11738227
> 
> 赞同：1
> 
> 时间：2012-07-31T10:37:40.237
> 
> 标签：powershell

我需要从本地脚本在远程机器上执行 Powershell 脚本。问题是，直到运行时我才知道远程脚本的路径或文件名。

我在本地脚本中尝试了以下行：

```
Invoke-Command -ComputerName $TargetServer -ScriptBlock { & ($TargetMSI) '$MSI' 'C:\Program Files (x86)\Vasanta.Int.MIS' 'Dev' } 
```

问题是这会返回错误：*管道元素中“&”之后的表达式产生了一个无效对象。*

如果将 $TargetMSI 替换为硬编码的字符串文字，那么它可以正常工作。

谁能告诉我我需要改变什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T10:49:05.377

当您在 v2 中调用命令时，没有直接的方法将变量传递给脚本块。您需要在脚本块组合中使用 -ArgumentList + param () ：

```
Invoke-Command -ScriptBlock { param ($TargetMSI, $MSI) & $TargetMSI '$MSI' } -ArgumentList $TargetMSI, $MSI 
```

这是在 v3 中使用 $using:localvariable 语法修复/改进的。

# vba - 单击“否”替换文件时如何返回保存消息框

> ID：11738229
> 
> 赞同：2
> 
> 时间：2012-07-31T10:37:40.167
> 
> 标签：vba, excel, messagebox, savefiledialog

在 Excel-VBA 中，我使用以下代码保存文件：

```
fullFileName = Application.GetSaveAsFilename(...)
ActiveWorkbook.SaveAs fullFileName 
```

这工作正常，直到选择的名称已经存在。然后消息框提示：“是否应该替换文件？”。我要回答`No`，然后返回上一个消息框并选择另一个名称。

相反，单击`No`会中断宏并产生错误。

我怎么能解决这个问题？

（网络上充满了展示如何使用`Application.DisplayAlerts=False`并保存绕过此消息框的示例。这不是我想要的！）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T10:41:50.040

我一般用这个...

```
Sub Sample()
    Dim fullFileName

    fullFileName = Application.GetSaveAsFilename( _
                   fileFilter:="Text Files (*.txt), *.txt")
    If fullFileName <> False Then
        If fileExists(fullFileName) = False Then
            ActiveWorkbook.SaveAs fullFileName
        Else
            MsgBox "File Exists. File Save Aborted"
        End If
    End If
End Sub

Public Function fileExists(strFullPath As Variant) As Boolean
    On Error GoTo Whoa
    If Not Dir(strFullPath, vbDirectory) = vbNullString Then fileExists = True
Whoa:
    On Error GoTo 0
End Function 
```

**跟进**

你的意思是这样吗？

```
Sub Sample()
    Dim fullFileName
    Dim conti As Boolean

    conti = True

    Do While conti = True
        fullFileName = Application.GetSaveAsFilename( _
                       fileFilter:="Text Files (*.txt), *.txt")
        If fullFileName <> False Then
            If fileExists(fullFileName) = False Then
                ActiveWorkbook.SaveAs fullFileName
                conti = False
            Else
                MsgBox "File Exists. Returning you back to the dialog box"
            End If
        Else
            conti = False
        End If
    Loop
End Sub

Public Function fileExists(strFullPath As Variant) As Boolean
    On Error GoTo Whoa
    If Not Dir(strFullPath, vbDirectory) = vbNullString Then fileExists = True
Whoa:
    On Error GoTo 0
End Function 
```

# php - 购物车 - 在会话中存储？

> ID：11738230
> 
> 赞同：2
> 
> 时间：2012-07-31T10:37:42.403
> 
> 标签：php, shopping-cart

我正在为一个网站开发一个购物车，并且想知道在用户单击“添加到购物车”后我应该以什么方式存储产品 ID。

我应该将它们存储在会话中 - 例如

```
$_SESSION['cart'][$productid]++; 
```

这会给负载下的服务器带来压力吗？或者这是最好的方法吗？

或者我应该创建一个临时数据库表，将信息存储在其中，并在处理完订单后删除？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T10:40:09.023

我肯定会将它们存储在数据库中，但不会每次都创建一个临时表。我建议您保留一个包含所有未完成订单以及用户标识符的表格。

这将比会话持续更长的时间，在用户注销后将保留所有会话，并在该用户再次登录后可用。当用户登录时，将其标识符保留在会话中。

编辑：虽然连接到数据库*确实*会消耗资源，但这就是数据库服务器的用途。与小桌子的连接几乎没有使用 - 我的意思是，您可能正在执行大量查询，只是显示您的购物车。如果您的网站由于在小表中保存奇数行而无法处理额外的压力，您将从销售中获得足够的钱来购买更大的服务器:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T10:53:36.373

您绝对应该使用数据库表来存储项目。登录的用户会感谢他们不必再次抓取所有物品，如果他们在一段时间后回来！

您可以将购物车的信息保存在会话中，以获取您需要的信息，但您应该在会话和数据库中设置新信息！然后在结帐之前，您应该交叉检查您的信息。

另一个优点是您可以跟踪商店中发生的事情！如果没有人购买您的商品并且您将购物车存储在会话中，您将不会获得任何信息。

# android - Facebook 返回错误的帖子评论计数

> ID：11738231
> 
> 赞同：3
> 
> 时间：2012-07-31T10:37:44.527
> 
> 标签：android, facebook, post, count, comments

我在我的 Java Android 应用程序中遇到以下问题：

当我为帖子创建评论（向 FB 发送请求）时，我得到了成功的响应（我获得了为帖子新创建的评论的 ID）。目前很好。

但如果那时我立即呼吁评论计数：

```
"SELECT comments.count FROM stream WHERE post_id = '" + postId + "'" 
```

然后我得到的不是预期的 1（假设它是第一个评论），而是 0（FB 告诉根本没有评论）。我的问题是为什么会发生这种情况？如果我等待一段时间，问题就会消失。例如，如果我等待大约一分钟，那么 FB 就会开始返回预期的评论数。

看起来（只是我的猜测）FB 没有足够的时间来更新它的索引（我真的相信他们使用索引）。所以我得到一个过时/缓存的结果。我想知道是否有任何方法可以强制获取最新数据（绕过 FB 端的任何缓存）？

**澄清：**我知道如何获取评论列表。我可以通过从返回的集合中获取大小来使用它来获取计数。但这不是我的目标。因为上面发布的 FQL 请求应该更便宜/更快。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T13:32:34.770

您是否尝试过为此使用 FB API。评论可以如下获取。

```
FB.api("/" + PostId + "/comments", function(){//do your processing}) 
```

希望这可以帮助。

谢谢

考希克

# c# - 将整数的视觉表示视为十六进制以放置在 guid 中

> ID：11738233
> 
> 赞同：5
> 
> 时间：2012-07-31T10:37:46.320
> 
> 标签：c#, .net

我们有一个遗留要求，将现在新迁移`int`的 ID 值存储到一个`guid`类型中，以用于与 ID 无关的数据类型（基本上是利用“全局唯一”部分的旧代码，`guid`以便在一个列中包含所有可能的 ID /场地）。

`guid`由于这个要求，有一个后续要求以***人类可读的方式***嵌入实体的整数 ID 。这很重要，也是目前阻止我直接处理字节值的原因。

目前，我有以下内容：

```
 public static byte[] IntAsHexBytes(int value)
    {
        return BitConverter.GetBytes(Convert.ToInt64(value.ToString(), 16));
    }

    public static Guid EmbedInteger(int id)
    {
        var ib = IntAsHexBytes(id);

        return new Guid(new byte[]
            {
                0,0,0,0,0,0,1,64,ib[7],ib[6],ib[5],ib[4],ib[3],ib[2],ib[1],ib[0]
            });
    } 
```

它将 的可视化表示`int`视为十六进制值 ( `value.ToString()`)，将*其*转换为`long`( `Convert.ToInt64(value.ToString(), 16)`) 并将字节从 抓取`long`到扁平化以在特定结构`byte[]`中创建 a 。`guid`

因此，给定`int`42，当您将 42 视为十六进制并将其转换为66 时*，*`long`将得到 66 的字节，然后放入 66 的字节中`guid`：

```
"00000000-0000-4001-0000-000000000042" 
```

和一个`int`给出`379932126`：

```
"00000000-0000-4001-0000-000379932126" 
```

所以最终结果是将整数放入`guid`最后 12 位数字中，使其在视觉上看起来像整数 42（即使基础整数值是 66）。

这比使用连接构造字符串以输入构造函数快大约 30%-40% `new Guid(string)`，但我觉得我错过了避免首先对字符串做任何事情的解决方案。

所涉及的实际时间非常小，因此作为性能改进，它可能无法证明努力是合理的。

这*纯粹*是为了我自己的好奇心，看看是否有更快的方法来解决这个问题。我在这里发帖是因为我是一个长期的 SO 用户，但我很担心这是否是一个代码审查问题，尽管我没有直接要求任何反对我的代码的东西，它只是展示了我想要作为输出。

提供的整数范围是 0 到`int.MaxValue`。

**更新：**为了完整起见，这是我们目前拥有的以及我正在测试的内容：

```
string s = string.Format("00000000-0000-4001-0000-{0:D12}", id);
return new Guid(s); 
```

我上面的其他代码比这快了大约 30%。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T11:13:09.480

我*认为*这会做你想要的。不确定它是否比您的代码更有效，但至少要短一些。:)

```
public static Guid EmbedInteger(int id)
{
    string guid = string.Format("00000000-0000-4001-0000-{0,12:D12}", id);
    return new Guid(guid);
} 
```

它通过使用数字格式 12:D12 来工作，这会导致输入数字被格式化为字段宽度为 12 且带有前导零的小数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T11:29:34.557

好的，这是另一个完全避免字符串的版本。希望这可能会更好。:)

```
public static Guid EmbedInteger(int id)
{
    byte[] bytes = new byte[8];
    int i = 0;

    while (id > 0)
    {
        int remainder = id%100;
        bytes[i++] = (byte)(16*(remainder/10) + remainder%10);
        id /= 100;
    }

    return new Guid(0, 0, 0x4001, bytes[7], bytes[6], bytes[5], bytes[4], bytes[3], bytes[2], bytes[1], bytes[0]);
} 
```

**Adam Houldsworth：更新：**此代码也可以展开：

```
int remainder = id % 100;
bytes[0] = (byte)(16 * (remainder / 10) + remainder % 10);
id /= 100;
if (id == 0) return;
remainder = id % 100;
bytes[1] = (byte)(16 * (remainder / 10) + remainder % 10);
id /= 100;
if (id == 0) return;
remainder = id % 100;
bytes[2] = (byte)(16 * (remainder / 10) + remainder % 10);
id /= 100;
if (id == 0) return;
remainder = id % 100;
bytes[3] = (byte)(16 * (remainder / 10) + remainder % 10);
id /= 100;
if (id == 0) return;
remainder = id % 100;
bytes[4] = (byte)(16 * (remainder / 10) + remainder % 10); 
```

# python - 未找到uwsgi错误python应用程序

> ID：11738239
> 
> 赞同：2
> 
> 时间：2012-07-31T10:38:00.767
> 
> 标签：python, nginx, uwsgi

我已经用 uwsgi 和 python 配置了我的 nginx 服务器，当我尝试通过在浏览器中点击 url 来运行我的 python 应用程序时，浏览器返回消息，uwsgi error python application not found。

这是我的 uwsgi 日志的样子：

```
*** Starting uWSGI 1.0.4 (32bit) on [Tue Jul 31 15:25:04 2012] ***
compiled with version: 4.6.3 on 27 July 2012 17:02:36
current working directory: /home/paul/Desktop/x/studio
detected binary path: /home/paul/Desktop/x/studio/bin/uwsgi
uWSGI running as root, you can use --uid/--gid/--chroot options
*** WARNING: you are running uWSGI as root !!! (use the --uid flag) *** 
*** WARNING: you are running uWSGI without its master process manager ***
your memory page size is 4096 bytes
probably another instance of uWSGI is running on the same address.
bind(): Address already in use [socket.c line 598]
[pid: 3868|app: -1|req: -1/11] 127.0.0.1 () {38 vars in 911 bytes} [Tue Jul 31 15:25:22      2012] GET /ai?api=%3CIron%3E%3CAction%3E%3CService%3EUserAuth%3C/Service%3E%3CUsername%3Eadmin%3C/Username%3E%3CPassword%3Eadmin%3C/Password%3E%3C/Action%3E%3C/Iron%3E => generated 48 bytes in 0 msecs (HTTP/1.1 500) 2 headers in 63 bytes (0 switches on core 0)
[pid: 3864|app: -1|req: -1/12] 127.0.0.1 () {38 vars in 655 bytes} [Tue Jul 31 15:25:34 2012] GET /ai?api=%3CIron%3E%3C/Iron%3E => generated 48 bytes in 0 msecs (HTTP/1.1 500) 2 headers in 63 bytes (0 switches on core 0)
[pid: 3864|app: -1|req: -1/13] 127.0.0.1 () {38 vars in 655 bytes} [Tue Jul 31 15:25:38  2012] GET /ai?api=%3CIron%3E%3C/Iron%3E => generated 48 bytes in 0 msecs (HTTP/1.1 500) 2 headers in 63 bytes (0 switches on core 0)
[pid: 3864|app: -1|req: -1/14] 127.0.0.1 () {38 vars in 655 bytes} [Tue Jul 31 15:25:48 2012] GET /ai?api=%3CIron%3E%3C/Iron%3E => generated 48 bytes in 0 msecs (HTTP/1.1 500) 2 headers in 63 bytes (0 switches on core 0)
[pid: 3868|app: -1|req: -1/15] 127.0.0.1 () {38 vars in 655 bytes} [Tue Jul 31 15:26:11 2012] GET /ai?api=%3CIron%3E%3C/Iron%3E => generated 48 bytes in 0 msecs (HTTP/1.1 500) 2 headers in 63 bytes (0 switches on core 0) 
```

uwsgi 和 nginx 是从我的 virtualenv root 调用的

```
bin/uwsgi -p 2 --socket  127.0.0.1:8807 --module index --pythonpath ironjob/ai -d log/uwsgi_ai.log
bin/nginx -p ./ -c ironjob/etcs/production/nginx.conf 
```

~

这是我的 nginx.conf 文件

```
server {
    listen      8090;
    server_name example.com;
    charset     utf-8;

    # Django admin media.
    location /media/admin/ {
      alias lib/python2.6/site-packages/django/contrib/admin/media/;
    }
    # Your project's static media.
    location /media/ {
      alias PROJECT_ROOT/media/;
    }

    # Finally, send all non-media requests to the Django server.
   location /ai {
      uwsgi_pass  127.0.0.1:8807;
      include     uwsgi_params;
    }
  } 
```

以及包含可调用应用程序的 $VIRTUVAL_ENV/ironjob/ai/index.py 文件：

```
import os
import sys
from webob import Response
from cgi import parse_qs, escape
import urllib

from ironMainManager import MainManager

os.environ['PYTHONJ_EGG_CACHE'] = '$VIRTUAL_ENV/bin/.python-egg'

def application(environ , start_response):
    mManager = MainManager()
    parameters = parse_qs(environ.get('QUERY_STRING', ''))
    returnval ="<Root></Root>"

    if 'api' in parameters:
        api = parameters['api'][0]
        if 'platform' in parameters:
                platform = parameters['platform'][0]
                if platform == 'browser':
                       api = urllib.unquote(str(parameters['api'][0]))
        print api
        returnval = mManager.process(api)
        output = 'success'
    else:
        output = 'error'

    res = Response()
    res.content_type = 'text/plain'
    res.body=str(returnval)
    return res(environ, start_response) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T10:44:20.007

看起来您已经运行了一个旧的 uWSGi 实例。确保杀死所有剩余的实例并重新启动 uWSGI。除此之外，尝试始终使用最新的稳定版（1.0 现在已经很老了）

# java - 从有序 SQL 将元素插入到 ArrayList

> ID：11738245
> 
> 赞同：0
> 
> 时间：2012-07-31T10:38:32.037
> 
> 标签：java

我从带有**ORDER BY**子句的 SQL 查询中加载 Java ArrayList 中的对象。

(1) 我可以使用*foreach*循环访问该 ArrayList 并按加载顺序将它们取回吗？

*(2) 同样，我可以通过使用get(n)*以相同的 SQL 顺序始终如一地获取元素吗？即，如果 SQL 行集中的第 3 个元素是“x”，get(2) 是否总是检索它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T10:43:06.123

当然可以，这就是**List**的工作方式。你仍然可以使用[http://docs.oracle.com/javase/1.4.2/docs/api/java/util/LinkedHashSet.html](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/LinkedHashSet.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T10:43:48.183

`Can I access that ArrayList with a foreach loop and get them back in the order in which they were loaded?`

**是**的，列表是有序集合。

`Similarly, can I consistently get the elements in the same SQL order by using get(n)? I.e. if the 3rd element in the SQL rowset was "x", will get(2) always retrieve that?`

**是**的，正如我所说，它们是有序的，按照它们插入的顺序，它们可以按相同的顺序检索。

```
List<String> ls=new ArrayList<String>();
        ls.add("A");
        ls.add("B");
        ls.add("C");

        for(String s:ls)
            System.out.println(s);

        System.out.println(ls.get(1)); 
```

**结果：**

```
A
B
C
B 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T10:45:34.487

是的，Java 中的 ArrayList 是有序集合。API 说
`List is an ordered collection (also known as a sequence). The user of this interface has precise control over where in the list each element is inserted. The user can access elements by their integer index (position in the list), and search for elements in the list.`

当您从 SQL 加载到 ArrayList 时，您应该完全按照与 SQL 相同的顺序插入。代码片段应该是这样的

```
for (Each row starting from 0 in SQL) {
  // add to arraylist using add method
  list.add(sqlvalue);
} 
```

对于每个迭代器也保持相同的顺序。

# objective-c - 按块包装 c 回调（__bridge_transfer 和块）

> ID：11738248
> 
> 赞同：3
> 
> 时间：2012-07-31T10:38:38.923
> 
> 标签：objective-c, ios5, automatic-ref-counting, objective-c-blocks

我正在为标准 C API 编写一个 Obj-C 包装器。我想用块替换 C 回调。

让我们想象一个 C API：

```
void my_async_function(void (* callback)(void *), void *udata); 
```

Obj-C 包装器如下所示：

```
- (void)myAsyncFunction:(dispatch_block_t)block
{
    void *udata = (__bridge_retained void *)block;
    my_async_function(my_callback, udata);
}

void my_callback(void *udata)
{
    dispatch_block_t block = (__bridge_transfer dispatch_block_t)udata;
    block();
} 
```

`__bridge_retained`并且`__bridge_transfer`在许多情况下运行良好，但在块上，它们会导致非常奇怪的行为。

myAsyncFunction 的汇编代码：根本没有保留（Xcode 4.4、ARC、O3）。

非常奇怪的是，以下核心生成了`objc_retainBlock`我对 myAsyncFunction 的预期：

```
void *a_global_var;

- (void)myAsyncFunction2:(dispatch_block_t)block
{
    void *udata = (__bridge_retained void *)block;
    a_global_var = udata;
    my_async_function(my_callback, udata);
} 
```

我们可以称其为编译器的错误吗？如果不是，编译器遵循什么规则？

类似主题：

*   [iOS：Block属性直接设置访问时崩溃](https://stackoverflow.com/questions/8824996/ios-block-property-directly-set-crashes-when-accessed)
*   [如何在 void 之间投射块 *](https://stackoverflow.com/questions/11106224/how-to-cast-blocks-to-and-from-void)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T12:40:36.567

尝试：

```
- (void)myAsyncFunction:(dispatch_block_t)block
{
    void *udata = (__bridge_transfer void *) [block copy];
    my_async_function(my_callback, udata);
}

void my_callback(void *udata)
{
    // however, see the comment in the last paragraph
    dispatch_block_t block = (__bridge_transfer dispatch_block_t)udata;
    block();
} 
```

`Block_copy`通常，当您将块指针分配给[它可以比它引用的块结构寿命更长的](http://www.mikeash.com/pyblog/friday-qa-2010-01-15-stack-and-heap-objects-in-objective-c.html)位置时，编译器会在调用中进行综合。

但是，编译器无法知道在将 void* 传递给 C api 之后会发生什么，并且无论如何您都在覆盖编译器可能认为它应该与`__bridge_retained`调用相关的任何内容。在存储引用时保留一个块是不够的。

此外，即使进行了此更改，您的回调也必须只调用一次，因为它负责释放块。如果它永远不会被调用，您将泄漏该块。如果它被多次调用，你就会崩溃。所以你可能想让你的包装类的实例负责管理块的内存，除非 C api 允许你提供一个清理函数，你可以用它来释放块。

# php - PHP crypt函数密码编码

> ID：11738250
> 
> 赞同：2
> 
> 时间：2012-07-31T10:39:01.467
> 
> 标签：php, salt, crypt

无论哪种方式，以下代码都会返回相同的加密密码。我们为什么以及如何阻止这种情况。

```
$pwd = 'shits8888';
$salt = '50153fc193af9';

echo crypt($pwd,$salt) 
```

显然缺少一些东西，因为这是返回相同的东西

```
$pwd = 'shits8888hjhfgnsdkjf8744884';
$salt = '50153fc193af9';

echo crypt($pwd,$salt) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-31T10:41:57.170

> 基于标准 DES 的 crypt() 将 salt 作为输出的前两个字符返回。它也只使用 str 的前八个字符，因此以相同八个字符开头的较长字符串将生成相同的结果（当使用相同的盐时）。

[http://php.net/manual/en/function.crypt.php](http://php.net/manual/en/function.crypt.php)

如果您想更好地控制用于哈希的算法，我建议您看一下[mcrypt](http://php.net/manual/en/book.mcrypt.php)。

还要注意`crypt()`（尽管有名称）实际上并没有*加密*字符串，它只是生成一个哈希。如果你指定盐，你可能也存储在某个地方，你可能会用这样的东西做得更好：

```
function my_crypt ($string, $salt) {
  return sha1($string.$salt); // ...or your hashing function of choice
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T10:46:24.107

从手册中引用：基于标准 DES 的 crypt() 将 salt 作为输出的前两个字符返回。它也只使用 str 的前八个字符，因此以相同八个字符开头的较长字符串将生成相同的结果（当使用相同的盐时）。

两个条目都有相同的前 8 个字符和相同的盐。所以它必须返回相同的结果。

例如：

```
echo crypt('12345678xxxxx','50153fc193af9');
echo crypt('12345678yyyyyy','50153fc193af9'); 
```

都会返回`50gyRGMzn6mi6` ，因为它们共享相同的盐和相同的前 8 个字符

每个加密算法都有一个限制，即使 md5 在某些时候重复。

# iphone - 如何在我的 iPhone 应用程序中添加两个启动画面？

> ID：11738252
> 
> 赞同：0
> 
> 时间：2012-07-31T10:39:18.823
> 
> 标签：iphone, objective-c, ios, xcode

我正在制作一个应用程序，其中我在提供的区域中放置了一个 default.png 并添加`sleep(5);`到我的应用程序委托中，目前它运行良好。

我需要做的是在应用程序启动时添加多个图像，以便我获得一个启动屏幕 2.5 秒和另一个 2.5 秒。

如何在启动时显示 2 个启动画面？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T10:42:19.593

两个闪屏是不可能的。创建一个用 UIImageView 填充第二张图像的 viewcontroller 并显示 2.5 秒。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T10:56:13.330

只需简单地将您的图像添加到您的视图控制器，然后在 2.5 秒后，将其从您的视图中删除。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-23T12:44:57.090

您可以轻松地在主视图之上实现您的视图，但在您的 appDelegate 中。例如，如果您想要一个淡出到主视图的启动图像：（或似乎淡出的默认图像：只需将相同的图像放在启动屏幕和默认屏幕上）。只要它是主视图，这也可以为您提供正确的方向。

只需将其添加到您的

**应用程序：（UIApplication *）应用程序didFinishLaunchingWithOptions：**

方法：

```
UIImageView*imageView=[[UIImageView alloc]initWithImage:[UIImage imageNamed:@"your_default_image_or_First.png"]];
[[firstViewController view] addSubview:imageView];
[[firstViewController view] bringSubviewToFront:imageView];
[NSThread SleepForTimeInterval:(2.5)];
[imageView setImage:[UIImage imageNamed:@"your_default_image_or_Second.png"]]
// as usual
[self.window makeKeyAndVisible];

//now fade out splash image
[UIView transitionWithView:self.window duration:1.0f options:UIViewAnimationOptionTransitionNone animations:^(void){imageView.alpha=0.0f;} completion:^(BOOL finished){[imageView removeFromSuperview];}]; 
```

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-07-31T11:01:15.943

嗨，请尝试使用以下代码，亲爱的，我建议使用这个代码……

-（BOOL）应用程序：（UIApplication *）应用程序didFinishLaunchingWithOptions：（NSDictionary*）launchOptions

{

```
self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]] autorelease];

// Override point for customization after application launch.

MasterViewController *masterViewController = [[[MasterViewController alloc] initWithNibName:@"MasterViewController" bundle:nil] autorelease];

self.navigationController = [[[UINavigationController alloc] initWithRootViewController:masterViewController] autorelease];

UIImageView *imageView = [[[UIImageView alloc] initWithFrame:self.window.bounds] autorelease];

UIImage *image = [UIImage imageNamed:@"Welcome.png"];
if (!image)
{
    NSLog(@"Something went wrong trying to get the UIImage. Check filenames");
}

imageView.image = image;

[self.window addSubview:imageView];
[self.window makeKeyAndVisible];

[self performSelector:@selector(removeFirstSplash:) withObject:imageView afterDelay:3];

return YES; 
```

}

-(void)removeFirstSplash:(UIImageView *)oldImageView

{

```
UIImageView *imageView = [[[UIImageView alloc] initWithFrame:self.window.bounds] autorelease];

UIImage *image = [UIImage imageNamed:@"Splash.png"];

imageView.image = image;

[self.window addSubview:imageView];

[self performSelector:@selector(removeSecondSplash:) withObject:imageView afterDelay:3];

[oldImageView removeFromSuperview]; 
```

}

-(void)removeSecondSplash:(UIImageView *)oldImageView

{

```
[self.window addSubview:self.navigationController.view];

[oldImageView removeFromSuperview]; 
```

}

# php - 无法读取 smarty php 类

> ID：11738254
> 
> 赞同：1
> 
> 时间：2012-07-31T10:39:40.883
> 
> 标签：php, class, smarty

我对 smarty php 类有问题。Apache 无法读取 smarty 模板。我用 smarty confis 和包含在我的文件底部放了一些东西，它只显示该文本。

我该如何解决？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T10:59:02.237

你的 apache 没有解析 php 文件 :-(

查看您的 httpd.conf 以了解：

```
// if you run as modul
LoadModule php5_module        modules/libphp5.so

AddType application/x-httpd-php .php 
```

[关于 php 和 apache 的更多信息](http://www.php.net/manual/en/install.unix.apache2.php)

# asp.net-mvc-3 - 如何在 WebGrid 的行尾包含链接？

> ID：11738263
> 
> 赞同：1
> 
> 时间：2012-07-31T10:40:17.903
> 
> 标签：asp.net-mvc-3, razor, webgrid

我正在尝试在显示来自数据库的数据的 MVC3 应用程序中显示数据。最初，我使用可以在此处看到的表格一起破解了一个解决方案：![第一张照片](../Images/b2845a07c853f1f5d7a8aa5fefbde4bd.png).

后来我更新了我的视图，以便改用 Webgrid：![网络网格](../Images/08e5b359db0e351c28ae6aedb6ad2239.png)
我想将我第一次尝试的编辑和删除链接包含到 Webgrid 解决方案中。有谁知道我该怎么做（我可以将 webgrid 中的一些条目变成链接——这适用于编辑选项，但不适用于删除）

当前查看代码：

```

    @model IEnumerable

    @{
    ViewBag.Title = "DisplayMembers";
    }

   显示成员  

    @{ var grid = new WebGrid(Model, canSort: false, canPage: true, defaultSort: "UserRoleId"); }

     @grid.GetHtml(
                    表格样式：“数据网格”，
                    headerStyle: "标题",
                    交替行样式：“偶数行”，
                    列：grid.Columns
          (
              grid.Column(header: "用户角色 ID", columnName: "UserRoleId"),
              grid.Column（标题：“用户名”，列名：“用户名”），
              grid.Column(header: "Role", columnName: "Role"),
              grid.Column(header: "Active", columnName: "ActiveInd")
      ))

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T11:01:23.983

我使用 HTML.Actionlink 解决了它，如下所示：

```
grid.Column(columnName: "Select", header: "", 
format:@<text>@Html.ActionLink("Select", "Create", new {item.Name},null) </text>) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T11:02:29.890

这应该有帮助

```
grid.Column(header: "Edit", format: @<text>@Html.ActionLink("Edit", "EditAction", "ControllerName", new{@userRoleId=@item.UserRoleId})</text>),
grid.Column(header: "Delete", format: @<text>@Html.ActionLink("Delete", "DeleteAction", "ControllerName", new { @userRoleId= @item.UserRoleId})</text>) 
```

# ruby-on-rails - 将我的 Heroku Rails 应用程序指向 www 而没有 www 只能工作一个小时？

> ID：11738265
> 
> 赞同：7
> 
> 时间：2012-07-31T10:40:23.270
> 
> 标签：ruby-on-rails, heroku, dns, cname

我的 Rails 应用程序与 Heroku 一起使用，如果我在我的域注册 Afrihost 中将我的 CNAME 设置为 www.domain 并且没有 www，它可以正常工作一个小时。然后它会杀死前面没有 www 域的应用程序，我必须再次登录并更改 dns。

Afrihosts 声明，由于某些法律，它不能将 cname 指向前面带有 www 和没有 www 的 cname。所有域名注册都是这样吗？

我想指出有没有前面的 www 有什么替代方案。

提前致谢。

艾琳

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-11T20:17:03.717

我喜欢我使用的修复程序。我刚刚添加了一个从 mywebsite.com 到 www.mywebsite.com 的 url 重定向。因此，在类型上，您只需选择“重定向”并将主机部分留空。然后在“数据”部分输入您网站的网址“ [http://www.mywebsite.com/ ”。](http://www.mywebsite.com/)为我工作。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-31T10:48:51.050

CNAMES 不能用于裸域（例如 yourapp.com），只能用于子域（例如 www.yourapp.com）。

对于裸域，您需要一个 A 记录，或者类似于 DNSimple 的 ALIAS。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T12:17:48.967

我找到了答案[https://devcenter.heroku.com/articles/avoiding-naked-domains-dns-arecords](https://devcenter.heroku.com/articles/avoiding-naked-domains-dns-arecords)

我必须使用 A-Record。

谢谢

# javascript - 可以监控何时从 div 添加/删除图像？

> ID：11738268
> 
> 赞同：2
> 
> 时间：2012-07-31T10:40:45.953
> 
> 标签：javascript, jquery, css-selectors

如果有可能以某种方式监视 div 的 DOM 中的更改，那么这将是我的解决方案 - 这足以触发我的事件处理程序，但万一这不可能 - 这是我的问题：

我有一个 div，一些 javascript 函数（我无法控制）将向该 div 添加或删除图像（可能嵌套在多个 div/spans 中）。

我需要附加一个事件（如果可能，使用 jQuery），该事件将在添加或不添加此特定图像时触发。

编辑：澄清-当我说添加时-我并不是说它的显示属性的某种切换，我的意思是完全添加或完全删除。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T10:44:00.977

您可以为此目的使用*突变事件。*请注意，其中一些事件现在已被弃用。

```
$('div').on( 'DOMSubtreeModified', function( event ) {
   // something was changed
}); 
```

如果您只需要知道是否添加了某个节点，请使用

```
$('div').on( 'DOMNodeInserted', function( event ) {
   // something was changed
}); 
```

这`event object`将为您提供有关到底发生了什么的更多信息。

* * *

由于您要求替代方案，因此有 jQuery`livequery`插件。AFAIK，如果可用，我也会使用*Mutation Events*，但它声称与 jQuery 支持的所有浏览器兼容。这意味着，他们将使用备用解决方案（最有可能`intervall timers`）来检查不兼容浏览器中的更改。

进一步阅读：[突变事件](https://developer.mozilla.org/en/DOM/Mutation_events)

# c# - 如何在部分回发时使用 ScriptManger 注册脚本？

> ID：11738272
> 
> 赞同：1
> 
> 时间：2012-07-31T10:40:55.017
> 
> 标签：c#, asp.net, asp.net-ajax, telerik

我有一个`RadGrid`inside `RadAjaxPanel`，它有一个 View 按钮，该按钮在 jQuery 弹出窗口中显示用户控件，也在 a 内`RadAjaxPanel`，它使用删除按钮显示网格记录的详细信息。单击删除按钮会导致部分回发，这会导致记录被删除并重新绑定网格，从而从中删除已删除的记录。

然后我需要做的是运行一些客户端脚本来关闭弹出窗口。我努力了：

```
private void RiskEditor_DeleteClick( object sender, EventArgs e )
{
    this.grdRiskAnalysis.Rebind();
    ScriptManager.RegisterStartupScript(this.RadAjaxPanelRiskEditor,
                                        this.RadAjaxPanelRiskEditor.GetType(),
                                        "closepopup",
                                        "delayClosePopup($j(this).closest('.ui-dialog'), 1000);",
                                        true);
} 
```

在此示例中，`RadAjaxPanelRiskEditor`是`AjaxPanel`用户控件所在的位置，但我也尝试使用网格所在的面板注册脚本。两者都不起作用。

有人可以解释我哪里出错了以及如何实现这一点吗？

谢谢

斯图尔特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T20:20:33.647

我会做几件事：

*   我会使用 ScriptManager.RegisterClientScriptBlock，因为 RegisterStartupScript，根据 msdn：“为**每个**异步回发注册一个启动脚本块”。

如果这不起作用，则有一些来自 ms 的客户端 js：http: [//msdn.microsoft.com/en-us/library/bb397536](http://msdn.microsoft.com/en-us/library/bb397536)，您可以使用：http: [//msdn.microsoft.com/en-us/ library/bb383810.aspx](http://msdn.microsoft.com/en-us/library/bb383810.aspx) - **Sys.WebForms.PageRequestManager endRequest**，它将执行特定的 js 代码，因此也许您可以将关闭对话框代码放在那里，并带有一些条件逻辑。

# javascript - 如何验证用户在离开时是否在文本框中输入了某些内容？

> ID：11738275
> 
> 赞同：0
> 
> 时间：2012-07-31T10:41:13.770
> 
> 标签：javascript, asp.net

我所拥有的是一个简单的表格。我的问题是我已经通过 Javascript 单击提交按钮对其进行了验证。如果我想在用户按下 TAB 键并进入下一个字段而不填写第一个字段时立即进行验证怎么办？我已在文本框的 OnFocusOut 事件上调用了 Javascript 函数，但它禁用了页面上的所有其他链接（如果我不想留在该页面上并导航到其他页面）。请帮助....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-26T05:27:29.953

```
$(document).ready(function(){
$("#txtName").focusout(function(){
if($("#txtName").val()=="")
{
alert("enter text");
}
});
}); 
```

# vb.net - 使用VB连接数组中的两个项目

> ID：11738278
> 
> 赞同：0
> 
> 时间：2012-07-31T10:41:25.843
> 
> 标签：vb.net, arrays, join

我正在创建一个数组，如下所示

```
 Dim strFriends(0 to 6) As String

    strFriends(0) = "Bianca"
    strFriends(1) = "Jeana"
    strFriends(2) = "Sam"
    strFriends(3) = "Jenna"
    strFriends(4) = "Erin"
    strFriends(5) = "Carolyn"
    strFriends(6) = "Kate" 

    Dim myFriends As String

    myFriends = Join(strFriends, ", ")

    MsgBox myFriends 
```

这将产生以下字符串：“Bianca, Jeana, Sam, Jenna, Erin, Carolyn, Kate”

但我需要检索数组中的特定项目并将它们显示为列表，如下所示：

例如：如果我想从`strFriends`, **Kate** , **Sam**和**Bianca中选择**

它应该像这样列出

```
Kate
Sam
Bianca 
```

如何执行任务。我对VB真的很陌生，所以我对这个简单的任务感到困惑。任何人都可以帮忙。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T10:46:31.883

```
 Dim strFriends(0 To 6) As String

    strFriends(0) = "Bianca"
    strFriends(1) = "Jeana"
    strFriends(2) = "Sam"
    strFriends(3) = "Jenna"
    strFriends(4) = "Erin"
    strFriends(5) = "Carolyn"
    strFriends(6) = "Kate"

    Dim objOutput As Text.StringBuilder = New Text.StringBuilder()

    For Each strFriend As String In strFriends
        Select Case strFriend
            Case "Kate", "Sam", "Bianca"
                objOutput.AppendLine(strFriend)
        End Select
    Next

    MessageBox.Show(objOutput.ToString()) 
```

或者

```
 For Each strFriend As String In strFriends
        If MyLogicToDetermineSelected(strFriend) Then
            objOutput.AppendLine(strFriend)
        End If
    Next 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T13:19:12.913

当您已经知道想要哪些项目时，尚不清楚为什么需要从原始数组中选择项目，所以我不会回答这部分问题。至于在自己的行上显示每个项目，您可以这样做`String.Join`：

```
Dim chosenFriends As String() = {"Kate", "Sam", "Bianca"}
Dim output As String = String.Join(Environment.NewLine, chosenFriends) 
```

# c# - Facebook C# SDK 多次发布图片

> ID：11738280
> 
> 赞同：0
> 
> 时间：2012-07-31T10:41:32.160
> 
> 标签：c#, facebook, facebook-c#-sdk

我正在使用 Facebook C# SDK 将图像上传或发布到 Facebook，但我调用了这个函数一次，但它上传了相同的图像三次或更多次。它应该只上传一次图片，但至少上传三次，我使用的是 5.4.1 SDK。代码是：

```
public void AddCover(string accessToken, string imageName, string folder, string loggedinuserId)
{    
    FacebookClient facebookClient = new FacebookClient(accessToken);
    var fbUpl = new Facebook.FacebookMediaObject
    {
        FileName = imageName,
        ContentType = "image/jpg"
    };

    var bytes = System.IO.File.ReadAllBytes(@"F:\Websites\Covers\" + folder + "\\" + imageName); 
    fbUpl.SetValue(bytes);

    var photoDetails = new Dictionary<string, object>();
    photoDetails.Add("message", "Facebook Covers");
    photoDetails.Add("image", fbUpl);
    var response = facebookClient.Post(@"/" + loggedinuserId + "/photos", photoDetails);
    var result = (IDictionary<string, object>)response;
    var postedcoverId = result["id"];

} 
```

我在这里错过了什么吗？请查看代码并告诉我我做错了什么。谢谢

# cakephp-2.1 - Cakephp 2.1 加密和解密字符串

> ID：11738282
> 
> 赞同：-1
> 
> 时间：2012-07-31T10:41:40.443
> 
> 标签：cakephp-2.1, encryption

我正在使用 Cakephp 2.1。

如何加密和解密字符串。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T13:40:41.637

根据 CakePHP[文档](http://book.cakephp.org/2.0/en/core-utility-libraries/security.html)：

使用 my_key 加密您的秘密密码

`$secret = Security::cipher('my secret password', 'my_key');`

稍后解密您的秘密密码

`$nosecret = Security::cipher($secret, 'my_key');`

# javascript - jquery中的目标列表项

> ID：11738285
> 
> 赞同：1
> 
> 时间：2012-07-31T10:41:53.913
> 
> 标签：javascript, jquery, list

我有一个列表，我正在检查列表项是否有两个特定的类。如果是这样，我想将该列表项的背景更改为蓝色。但是我的代码似乎不起作用。如何定位该特定列表项？警报工作正常，只是颜色不起作用。

```
if (($("#all-colls-list li:contains(" + itemName + ")").hasClass("groupAdded")) && ($("#all-colls-list li:contains(" + itemName + ")").hasClass("selAdded")) ) {
                $(this).css("background-color", "blue");
                alert("has both classes");
            } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T10:46:19.307

使用[类选择器](http://api.jquery.com/class-selector/)而不是[hasClass()](http://api.jquery.com/hasClass/)将允许您使用单个选择器实现您正在寻找的内容，并获得对您要修改的元素的引用：

```
$("#all-colls-list li:contains(" + itemName + ").groupAdded.selAdded")
    .css("background-color", "blue"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T10:45:37.530

```
$("#all-colls-list li:contains(" + itemName + ")").each(function(){
    if ($(this).hasClass("groupAdded") && $(this).hasClass("selAdded")) {
        $(this).css("background-color", "blue");
    }
}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T10:47:28.437

这`$(this)`可能是未定义的，因为您直接在上面的 if 中访问该元素。再次调用所有的选择器。`css`功能应该可以解决您的问题

```
if (($("#all-colls-list li:contains(" + itemName + ")").hasClass("groupAdded")) && ($("#all-colls-list li:contains(" + itemName + ")").hasClass("selAdded")) ) {
                    $("#all-colls-list li:contains(" + itemName + ")").css("background-color", "blue");
                    alert("has both classes");
                } 
```

# domain-driven-design - 行为驱动开发 (BDD) 如何与领域驱动设计 (DDD) 协同工作

> ID：11738287
> 
> 赞同：11
> 
> 时间：2012-07-31T10:42:03.690
> 
> 标签：domain-driven-design, bdd

我对 BDD 的理解是，在用户故事中描述一个系统，然后开发人员将这些用户故事转化为应用程序，目的是在每个“冲刺”（软件开发阶段）中增加真正的商业价值。结果（据我所知）是域模型在整个开发过程中**从用户故事中出现。**也就是说，在第一次“冲刺”之后，大部分领域模型都不会被设计出来。

我对 DDD 的理解是，软件开发继续参考完整的领域模型，尽管它是一个不断发展的模型。在 DDD 中，模型预计会发生变化，但它始终是“完整的”。

这似乎是两种方法之间的根本区别。人们是如何处理这个问题的？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-31T16:03:18.050

做得好的 BDD*不会*产生“完整”的模​​型。提出 BDD 的人 Dan North 称他的博客为[“拥抱不确定性”](http://dannorth.net/)是有原因的。

我发现这些天来思考我们可以分析的三种事物很有用：已知的、可知的和不可知的。

已知的东西很简单——例如，登录。这很好理解。我们不需要讨论这些场景。

已知的东西通常与领域有关，或者与以前做过的事情有关。这是进行 BDD 的好地方，因为它有助于将知识（包括领域模型）从业务转移到开发人员。通过场景交谈是更好地理解故事的好方法。它还可以帮助我们找到我们错过的场景。克里斯·马茨（Chris Matts）是帮助将“Given”放入“Given, When, Then”的分析师，他称之为“打破模式”。他实际上为任何能够提出他的模型中未涵盖的场景的人提供奖品，他使用场景来定义和改进。

还有不为人知的东西。每当我们在做一些新的事情，或者我们以前从未做过的事情，或者没有人有专业知识的事情时，就会发生这种情况。你可以判断你是否在这个地方，因为当你想出他们没有想到的场景时，商务人士会开始惊讶地做出反应。BDD 是*找到*这些地方的一种非常好的方法，但此时您可能不想再试图确定场景，而只是尝试一些东西并获得反馈。你的领域模型，你的用户故事，你的场景，都将逐渐浮现（[参见 Cynefin 模型中的复杂领域](http://lizkeogh.com/2012/03/11/cynefin-for-devs/)）。

我知道很多团队使用 BDD 作为一种明显消除这种不确定性的方法。你不能消除它。您只能将其隐藏到稍后，当交付的反馈回来咬您时。

关于 DDD，当我们使用 BDD 时，我们倾向于关注与我们正在处理的场景相关的领域模型的那些*部分，尽管我们可能对整体上更大的领域模型有所了解。*如果您将[功能注入](http://lizkeogh.com/2012/06/01/bdd-in-the-large/)与 BDD 一起使用，您将已经了解了系统的大部分功能，尤其是新功能，因此您将对域中的内容有所了解。进化和所有其他规则仍然适用。BDD 和 DDD 非常非常好地结合在一起，围绕场景的对话有助于带出领域语言。它们没有根本不同，但完全支持和兼容。

另请阅读[我对这个类似问题的回答](https://stackoverflow.com/questions/7147987/is-it-possible-to-use-ddd-and-bdd-together)，其中包含 Dan North 和我自己谈论这个话题的视频。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-22T06:36:14.743

我将包括用户故事、DDD 和 BDD，因为它们非常相互依赖。我试图在这里总结链接：http: [//christophelecoent.wordpress.com/2013/06/17/how-to-link-user-stories-ddd-and-bdd/](http://christophelecoent.wordpress.com/2013/06/17/how-to-link-user-stories-ddd-and-bdd/)

我希望这张图既简单又丰富，足以解释这些“概念”之间的联系

# twitter-bootstrap - Twitter 引导手风琴标题

> ID：11738290
> 
> 赞同：6
> 
> 时间：2012-07-31T10:42:30.373
> 
> 标签：twitter-bootstrap

我想使用 twitter bootstrap 获得以下效果。一个用于折叠操作的链接，另一个用于不同操作的链接：

![例子](../Images/afcacd2f52614d1808915c60fb322d2f.png)

现在，我通过将另一个链接设置为右拉类并填充项目来实现这一点。有没有更好的办法？

这是重要的代码（对不起，它是玉石，无论哪种方式，我认为它很容易理解）

```
div.accordion-heading
    div.row-fluid
        div.span6
            a.accordion-toggle(href="#", data-parent="main-accordion", data-toggle="collapse")= "Collapse Link"
        div.span6
            a.pull-right(style="padding:8px 15px")= "Another Link" 
```

最好的祝福

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-31T21:02:49.297

你可能会更干净一点：

```
div.accordion-heading
    div.accordion-toggle.group-accordion-toggle
        a(href="#", data-parent="main-accordion", data-toggle="collapse")= "Collapse Link"
        a.pull-right= "Another Link" 
```

那（为了避免到处都是指针）：

```
.accordion-toggle.group-accordion-toggle { cursor: inherit; } 
```

[演示（jsfiddle）](http://jsfiddle.net/Sherbrow/mMwEV/)

# php - 通过 curl 检查远程 url 是否是图像

> ID：11738292
> 
> 赞同：-3
> 
> 时间：2012-07-31T10:42:38.293
> 
> 标签：php, curl

通过来自 url 的 curl 我得到一些信息，我需要检查它是否是图像。

```
$result = curl_exec($ch); 
```

更新：内容类型检查不是一个好主意，因为它可以被伪造。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T10:50:27.560

我会亲自在 PHP 中使用 gd 工具来检查它是否是图像。您不能相信源在标头中提供了正确的 MIME。我不止一次信任这些标头，并对内容是图像但通过另一种格式传输（由于 url/服务器的工作方式）这一事实感到失望。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T10:49:04.197

```
function getContentType($url)
{
    $curl = curl_init();
    curl_setopt_array( $curl, array(
    CURLOPT_HEADER => true,
    CURLOPT_NOBODY => true,
    CURLOPT_RETURNTRANSFER => true,
    CURLOPT_FOLLOWLOCATION => true,
    CURLOPT_URL => $url ) );

    curl_exec( $curl ); //execute
    $contentType = curl_getinfo($curl, CURLINFO_CONTENT_TYPE);  //get content type
    curl_close( $curl );

    return $contentType;
} 
```

上面的函数将返回类型，然后你可以检查`image`返回值中的子字符串

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T10:47:07.497

我想一种方法是读取 HTTP 标头，尤其是`Content-type`标头，并评估它是否是图像。

[这个 SO question](https://stackoverflow.com/questions/1378915/header-only-retrieval-in-php-via-curl)讨论了如何使用 curl 检查 http 标头。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T10:48:13.177

使用它来获取 MIME 类型。

```
echo curl_getinfo($ch, CURLINFO_CONTENT_TYPE); 
```

并将其用于常见的图像 mime 类型，即。图片/gif、图片/png等

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-31T10:48:56.310

1.  `CURLOPT_HEADER`通过[curl_setopt](http://www.php.net/manual/en/function.curl-setopt.php)设置在输出中包含 HTTP 标头。
2.  解析标头，例如使用[http_parse_headers](http://de.php.net/manual/en/function.http-parse-headers.php)。
3.  检查content-type头域是否表示图片类型。

`CURLOPT_NOBODY`如果您只对内容类型感兴趣，您可能还想通过设置将请求方法设置为 HEAD 。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-31T10:55:45.230

```
 $c = curl_init();

    curl_setopt( $c, CURLOPT_RETURNTRANSFER, true );
    curl_setopt( $c, CURLOPT_CUSTOMREQUEST, 'HEAD' );
    curl_setopt( $c, CURLOPT_HEADER, 1 );
    curl_setopt( $c, CURLOPT_NOBODY, true );
    curl_setopt( $c, CURLOPT_URL, 'your.url' );

    curl_exec($c);

    $content_type = curl_getinfo($c, CURLINFO_CONTENT_TYPE); 
```

并检查允许的内容类型。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-07-31T10:56:57.500

您可以使用[getimagesize](http://de.php.net/getimagesize)

```
<?php
    $i = getimagesize('http://static.adzerk.net/Advertisers/bd294ce7ff4c43b6aad4aa4169fb819b.jpg');
    print_r($i); 
```

输出

```
Array
(
    [0] => 220
    [1] => 250
    [2] => 2
    [3] => width="220" height="250"
    [bits] => 8
    [channels] => 3
    [mime] => image/jpeg
) 
```

如果它不是图像，你会得到`false`

```
$i = getimagesize('http://stackoverflow.com');
var_dump($i); 
```

输出：

```
bool(false) 
```

# javascript - Base64 解码不适用于二进制数据

> ID：11738297
> 
> 赞同：0
> 
> 时间：2012-07-31T10:42:40.577
> 
> 标签：javascript, html, file-upload, base64, binaryfiles

好吧**，我需要一个 Base64 解码功能**。但是当我使用二进制数据时，它没有返回所需的输出。我知道 atob 和 atob 功能，但**我的问题是我在 worker 和用户代理 chrome 中实现它**。chrome 没有在 worker 中实现 atob、btoa 函数，所以建议我使用一个处理二进制数据的 base64 函数。现在我正在使用以下函数，它不适用于二进制数据。

```
var Base64 = {

// private property
_keyStr : "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",

// public method for encoding
encode : function (input) {
    var output = "";
    var chr1, chr2, chr3, enc1, enc2, enc3, enc4;
    var i = 0;

    input = Base64._utf8_encode(input);

    while (i < input.length) {

        chr1 = input.charCodeAt(i++);
        chr2 = input.charCodeAt(i++);
        chr3 = input.charCodeAt(i++);

        enc1 = chr1 >> 2;
        enc2 = ((chr1 & 3) << 4) | (chr2 >> 4);
        enc3 = ((chr2 & 15) << 2) | (chr3 >> 6);
        enc4 = chr3 & 63;

        if (isNaN(chr2)) {
            enc3 = enc4 = 64;
        } else if (isNaN(chr3)) {
            enc4 = 64;
        }

        output = output +
        this._keyStr.charAt(enc1) + this._keyStr.charAt(enc2) +
        this._keyStr.charAt(enc3) + this._keyStr.charAt(enc4);

    }

    return output;
},

// public method for decoding
decode : function (input) {
    var output = "";
    var chr1, chr2, chr3;
    var enc1, enc2, enc3, enc4;
    var i = 0;

    input = input.replace(/[^A-Za-z0-9\+\/\=]/g, "");

    while (i < input.length) {

        enc1 = this._keyStr.indexOf(input.charAt(i++));
        enc2 = this._keyStr.indexOf(input.charAt(i++));
        enc3 = this._keyStr.indexOf(input.charAt(i++));
        enc4 = this._keyStr.indexOf(input.charAt(i++));

        chr1 = (enc1 << 2) | (enc2 >> 4);
        chr2 = ((enc2 & 15) << 4) | (enc3 >> 2);
        chr3 = ((enc3 & 3) << 6) | enc4;

        output = output + String.fromCharCode(chr1);

        if (enc3 != 64) {
            output = output + String.fromCharCode(chr2);
        }
        if (enc4 != 64) {
            output = output + String.fromCharCode(chr3);
        }

    }

    output = Base64._utf8_decode(output);

    return output;

},

// private method for UTF-8 encoding
_utf8_encode : function (string) {
    string = string.replace(/\r\n/g,"\n");
    var utftext = "";

    for (var n = 0; n < string.length; n++) {

        var c = string.charCodeAt(n);

        if (c < 128) {
            utftext += String.fromCharCode(c);
        }
        else if((c > 127) && (c < 2048)) {
            utftext += String.fromCharCode((c >> 6) | 192);
            utftext += String.fromCharCode((c & 63) | 128);
        }
        else {
            utftext += String.fromCharCode((c >> 12) | 224);
            utftext += String.fromCharCode(((c >> 6) & 63) | 128);
            utftext += String.fromCharCode((c & 63) | 128);
        }

    }

    return utftext;
},

// private method for UTF-8 decoding
_utf8_decode : function (utftext) {
    var string = "";
    var i = 0;
    var c = c1 = c2 = 0;

    while ( i < utftext.length ) {

        c = utftext.charCodeAt(i);

        if (c < 128) {
            string += String.fromCharCode(c);
            i++;
        }
        else if((c > 191) && (c < 224)) {
            c2 = utftext.charCodeAt(i+1);
            string += String.fromCharCode(((c & 31) << 6) | (c2 & 63));
            i += 2;
        }
        else {
            c2 = utftext.charCodeAt(i+1);
            c3 = utftext.charCodeAt(i+2);
            string += String.fromCharCode(((c & 15) << 12) | ((c2 & 63) << 6) | (c3 & 63));
            i += 3;
        }

    }

    return string;
}

} 
```

提前致谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T11:27:03.330

我进行了快速搜索，发现了一个声称可以解码二进制数据的解码器，尽管我还没有尝试过：

[https://github.com/danguer/blog-examples/blob/master/js/base64-binary.js](https://github.com/danguer/blog-examples/blob/master/js/base64-binary.js)

# android - 任何提供独特的 AR 应用演示或可以在 android 中制作的好网站

> ID：11738299
> 
> 赞同：-3
> 
> 时间：2012-07-31T10:42:41.960
> 
> 标签：android, augmented-reality

我正在考虑在android中制作一个AR应用程序。在此之前只是想知道 AR havr 在 android 中达到了多远..任何人都可以帮助我..通过提供一些为 AR 提供非常酷的想法的好网站。

提前谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T10:46:02.957

看看[这个库](http://code.google.com/p/mixare/)。这是一个开源项目，使用起来相当容易。

# objective-c - Objective-C 实例变量访问器方法

> ID：11738301
> 
> 赞同：3
> 
> 时间：2012-07-31T10:43:06.013
> 
> 标签：objective-c

我正在尝试更详细地了解 Objective-C 编程语言。

现在我有一个关于`[self]`设置值时调用的问题。

Apple 文档说“如果您不使用 self.，则直接访问实例变量。(...)”

所以假设我有一个带有实例变量的狗对象`NSString *name`。

我为这样的实例变量创建了一个设置器，而不使用`[self]`关键字：

```
(void)setName:(NSString *)_name
{
  name = _name;
} 
```

当我使用 [self] 关键字创建一个设置器时，它看起来像这样：

```
(void)setName:(NSString *)_name
{
  self->name = _name;
} 
```

在主方法中，我创建了一个新的狗对象并设置并返回其名称值：

```
Dog *myDog = [[Dog alloc] init];

myDog.name = @"Yoda";

NSLog(@"name of the dog: %@", myDog.name); 
```

在这两种情况下，我都会得到 Yoda 的返回值。但是从技术上讲，使用和不使用 [self] 的实例变量调用之间的区别在哪里？是不是我不使用setter方法就调用了同一个变量（内存）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T10:50:14.613

您的 2 个示例之间没有区别，在这两种情况下，您都直接修改实例变量

`self.name`通过 self 是使用 setter 方法的含义`[self setName:someValue];`

`self->name`只是意味着它正在访问一个实例变量，所以

```
self->ivar = someVal;
//is the same as
ivar = someVal; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T11:00:06.043

`self`是对对象本身的隐式引用，通常您只需要在参数和实例变量具有相同名称时才真正需要指定它，例如，如果您有：

```
(void)setName:(NSString *)name
{
  self->name = name;    // self used here to differentiate between param and ivar
} 
```

但是，您需要注意命名约定和方法的实现：

1.  通常，使用前导下划线作为命名实例变量的约定，而不是传递给方法的参数。
2.  为了设置`NSString *`对象，通常您将需要`retain`它以获取对象的所有权并避免它被释放（这将在您稍后访问它时导致异常）。

因此，您的`setName`方法应该看起来更像这样：

```
// _name is the instance variable
- (void)setName:(NSString *)name
{
    [name retain];
    [_name release];
    _name = name;
} 
```

仅当您使用 MRR 而不是 ARC 时，这才是正确的，但您没有指定，所以我假设您使用的是 MRR。

# firefox - 输入似乎由于某种原因被禁用，只有 Firefox

> ID：11738303
> 
> 赞同：1
> 
> 时间：2012-07-31T10:43:10.087
> 
> 标签：firefox, input

我在 Firefox 和输入元素上遇到了这个问题。

[提琴手](http://jsfiddle.net/nanny07/dmW9p/)

在此菜单中，如果您导航到“Strumenti”->“Colonne”->“Prova6”，您将看到一个带有两个输入和一个组合框的`table`内部 a 。`li`输入似乎被禁用，但仅限于 Firefox：使用 Chrome 或 IE，它都按预期工作。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T06:44:13.623

经过一番深入搜索，终于找到了问题所在：

```
$( ".sortable" ).disableSelection(); 
```

此行包含在[此 jqueryUI 演示](http://jqueryui.com/demos/sortable/)中，禁用 FF 中的输入。

[JsFiddle的解决方案](http://jsfiddle.net/nanny07/dmW9p/39/)

还有`-moz-user-select: none;`我个人编写的这个 css，用于禁用对我的菜单文本的选择，这会导致有线行为，在 FF 中总是这样：我将删除它作为我的解决方案。

# ruby-on-rails - 为什么我的 bootstrap-sass 规则被用户代理规则覆盖？

> ID：11738305
> 
> 赞同：2
> 
> 时间：2012-07-31T10:43:16.093
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1, twitter-bootstrap, sass

我正在尝试将 Twitter Bootstrap 与“bootstrap-sass”gem 一起使用，但由于某种原因，这种行为绝对不正确。

`class="btn"`通过类似这样的提交按钮来判断

```
<div class="actions btn">
  <%= f.submit %>
</div> 
```

结果是有引导程序样式，但它们被用户代理规则覆盖，因此结果是出现在引导程序顶部的标准 Chrome 按钮......这是我得到的链接：

*http://hpics.li/9ddcb61

此外，在不改变任何东西的情况下（我所做的只是尝试评论中的建议并将其放回原样），现在事情不会四处飘荡，而是都是垂直的：

*http://hpics.li/f7605d0

这是我在开发工具中得到的：

*http://hpics.li/db602b0

这是宝石文件

```
group :assets do
 gem 'sass-rails',   '~> 3.2.3'
 gem 'coffee-rails', '~> 3.2.1'
 gem 'bootstrap-sass'

 # See https://github.com/sstephenson/execjs#readme for more supported runtimes
 # gem 'therubyracer', :platforms => :ruby

 gem 'uglifier', '>= 1.0.3'
end 
```

我有一个 custom.css.scss 文件，里面有这个：

```
@import "bootstrap";
@import "_bootstrap-responsive.scss"; 
```

我也尝试在 require_self 和 require_tree 之前将其添加到 application.css.scss 中，但没有成功

```
*= require _bootstrap
*= require _bootstrap-responsive 
```

这是 js 文件，以防万一有用

```
//= require jquery
//= require jquery_ujs
//= require bootstrap
//= require_tree . 
```

我真的不知道发生了什么，而且我做了 railstutorial 书，当我使用它时一切正常，但在我自己的应用程序上，没有任何效果...... :(

我不确定我是否提供了所有信息，但请随时提出要求！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T12:05:25.557

它完全按照您所说的去做，即创建一个“Bootstrap 样式”按钮并在其中放置一个非 Bootstrap 样式的提交按钮。

尝试简单地将`btn`类添加到您的提交按钮：

```
<%= f.submit , :class => "btn" %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T11:09:50.943

在引导按钮和按钮样式中，还需要加载引导的 javascript 部分。您可以通过添加以下行来做到这一点：

```
//= require bootstrap 
```

到您的 app/assets/javascripts/application.js 文件行上方

```
//= require_tree 
```

# asp.net - ASP 网站到 Web 应用程序的问题

> ID：11738306
> 
> 赞同：1
> 
> 时间：2012-07-31T10:43:16.997
> 
> 标签：asp.net, web-site-project, web-application-project

我正在尝试将一个非常大的 asp.net 网站项目转换为一个 Web 应用程序项目。主要原因是我们想重构代码以启用单元测试。该网站是用 .net 4.0 编写的。

我第一次尝试使用[这个演练](http://msdn.microsoft.com/en-us/library/aa983476.aspx)。

在此转换后，尝试构建时出现 1500 个错误！不好！但是，我确实注意到，在转换过程中，当我复制网站文件和文件夹并执行转换为 Web 应用程序时，我的 App_Code 文件夹没有像指南所说的那样重命名，它仍然是 App_Code。

我去寻找其他方法并尝试[了本指南来转换](http://blogs.msdn.com/b/webdev/archive/2009/10/29/converting-a-web-site-project-to-a-web-application-project.aspx)：

这非常相似，但略有不同的是，首先复制 App_Code 文件夹并对其进行转换，然后对其余文件执行相同操作。遗憾的是，这仍然具有相同的效果，App_Code 文件夹没有被重命名。

从数百个错误来看，大多数似乎是任何代码（代码隐藏文件）引用了存储在网站 App_code 文件夹中的代码。即使 App_Code 中具有名称空间的代码也会出错。

示例：找不到类型或命名空间名称“SampleNamespace”（您是否缺少 using 指令或程序集引用？）

我可能遗漏了一些简单的东西，但是在执行这种类型的转换时是否有人遇到过类似的问题？或者知道我哪里出错了？

任何帮助深表感谢。谢谢瑞恩

# tinymce - 我如何知道何时使用 tinymce 编辑器单击了图标？

> ID：11738307
> 
> 赞同：0
> 
> 时间：2012-07-31T10:43:16.467
> 
> 标签：tinymce

我如何知道何时使用 tinymce 编辑器单击了图标？实际上，我正在尝试解决当我们多次单击`jbimage`插件图标时打开多个窗口的问题。我想确保当已经有一个上传的图像窗口时，第二个弹出窗口不应该出现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T11:31:00.583

看起来您将不得不调整插件代码并使用在弹出窗口打开时设置为 true 的变量来决定这种情况，并在弹出窗口关闭时将其重置。

# iphone - 在 Core Data 中删除实体中所有实例的最有效方法是什么？

> ID：11738312
> 
> 赞同：0
> 
> 时间：2012-07-31T10:43:37.173
> 
> 标签：iphone, ios, core-data

我从这篇[文章](https://stackoverflow.com/questions/1383598/core-data-quickest-way-to-delete-all-instances-of-an-entity)中发现，我可以通过获取所有实例并将它们全部删除来删除实体的所有实例。没有更有效的方法来进行删除吗？我的考虑是我将在该实体中拥有数千条记录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T11:31:55.467

没有更有效的方法，因为 CoreData 是 ORM 层，而不是数据库。因此，您处理对象，如果您希望它们消失，则必须删除它们。

您可能想要研究的一个技巧是创建一个与要删除的对象具有一对多关系的父对象。你基本上可以只有一个指向你的大表中的每个条目。在模型中的关系上设置级联删除选项。然后，当需要清除时，您只需删除父对象。由于延迟加载，它不会尝试加载您的其他对象。

话虽如此，我自己还没有尝试过，但这似乎是一个可行的选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T11:32:29.943

在此实体的所有实例都是自包含的特殊情况下，删除备份文件并重新初始化管理对象会更快。这仅在您的数据可以被安排以便临时数据位于其自己的存储中时才有效。

否则，您可能会通过使用直接数据库访问而不是核心数据来获得更好的结果。

# javascript - jQuery-form 和 Json 问题

> ID：11738319
> 
> 赞同：1
> 
> 时间：2012-07-31T10:44:10.073
> 
> 标签：javascript, jquery, jquery-forms-plugin

大家好，我正在使用 jQuery-form 提交多部分表单。

这是我的 PHP 代码：

```
foreach($addedData as $key => $value)
    $result[$key] = $value;

echo json_encode($result); 
```

Javascript：

```
function showResponse(responseText){
   alert(responseText);
}
$('button').click(function(){
    $("form").ajaxForm({
        success: showResponse,
        clearForm: true,
    dataType: "json",
    contentType: "application/json; charset=utf-8"
    });
}); 
```

有了这个，响应是[object Object]。但是当我删除这两行时：

```
dataType: "json",
contentType: "application/json; charset=utf-8" 
```

回应变成了：

```
{"key1":"val1","key2":"va2","key3":"val3"} 
```

我的问题是：我真的必须删除这两行吗？以及如何获得`responseText`使用 Json 的值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T10:54:30.440

通过让`dataType:"json", ..`您告诉请求您希望返回的项目是一个对象（如`$.parseJSON(responseText);`）。没有它，您将获得纯文本。

要打印对象，您将需要以下内容：

```
function showResponse(responseObj){
   $.each(responseObj,function(i,v) {
         alert(i+' = '+v);
   });
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T10:47:35.297

如果您指定`dataType: 'json'`，那么您的`success`回调函数将传递 JSON 表示的对象，而不是 JSON 字符串。jQuery 为您隐式处理将 responseText 转换为对象，因此您不必`JSON.parse(responseText)`自己做。如果响应不是有效的 JSON，`success`则不会执行回调；即使 AJAX 请求成功返回。

要获取这些值，只需`responseText`像使用任何其他 Javascript 对象一样使用；尽管您可能想给它一个不同的名称，以使其更清楚它实际上是什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T10:55:26.247

不要从您的脚本中删除以下代码并添加以下代码，您将正确收到警报

```
dataType: "json",
contentType: "application/json; charset=utf-8"

var htmlstr;
for(var i in responsetext)
{
htmlstr += i +"="+responsetext[i]+"\n";
}
alert(htmlstr); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T10:47:01.707

如果你删除这些行，那么你会在 JavaScript 中得到`string`( `'{"key1":"val1","key2":"va2","key3":"val3"}'`)（因为它使用响应作为具有`text/text`mime 提示的文件），如果你不这样做，那么你会得到`Object`( `{"key1":"val1","key2":"va2","key3":"val3"}`)，所以我认为你不应该删除它们，如果你想通过这个循环例如。顺便说一句，当您警告对象时，JavaScript 将对象转换为字符串（始终`'[Object object]'`）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-31T10:47:13.957

不，您没有，但警报框无法显示 JSON 对象。尝试改用 Console.log(responseText)，并在浏览器的 developertools 中检查结果。[object Object] 是一个对象字面量

# java - SEAM Faces 消息未显示

> ID：11738325
> 
> 赞同：2
> 
> 时间：2012-07-31T10:44:28.357
> 
> 标签：java, seam

我正在尝试在现有的大型 SEAM 项目中向用户添加信息消息。我已将 .xhtml 页面添加`<h:messages/>`到 .xhtml 页面中，这些是我在调用类的代码中的尝试，`AbstractChartController`但是当页面在操作后刷新时，不显示 FacesMessages，有人知道我接下来可以尝试什么吗？

```
if (axis.getAxisType() == AxisType.LOGARITHMIC  && axis.getLowestValue() <= 0d){
    //Non of this code works:
    //Attempt 1
    FacesMessages facesMessages = FacesMessages.instance();
    facesMessages.add(FacesMessage.SEVERITY_INFO, "Note: Data contains values below or equal to zero so cannot be plotted on a logarithmic axis.");
    //Attempt 2
    FacesContext context = FacesContext.getCurrentInstance();
    FacesMessage message = new FacesMessage("Test2");
    context.addMessage(null, message);
    //Attempt 3
    org.jboss.seam.faces.FacesContext myContext = (org.jboss.seam.faces.FacesContext) Component.getInstance("FacesContext");
    if (myContext != null) { //Why is this null in debug?
        myContext.getContext().addMessage("Test3", message);
    }
    //Attempt 4:
    //StatusMessages.instance()
    //.add(StatusMessage.Severity.INFO, "Test4");
    // (Compile time error above that it can't find StatusMessages class to import)
    System.out.println("FacesMessage added");
    ... 
```

编辑：“添加的面孔消息”显示在我的 Eclipse 控制台中，因此正在运行代码

我在想这个类由于某种原因不能访问 FacesContext？我在正确的轨道上吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T22:20:00.253

```
StatusMessages statusMessages =  Component.getInstance("statusMessages");
statusMessages.add(Severity.ERROR,"Note: Data contains values below or equal to zero so cannot be plotted on a logarithmic axis."); 
```

# objective-c - self.layer 后面的 CAGradientLayer 出现在上面

> ID：11738335
> 
> 赞同：1
> 
> 时间：2012-07-31T10:45:15.380
> 
> 标签：objective-c, cocoa-touch, calayer, quartz-core

我正在尝试制作一个自定义 UIButton 类，但在绘制按钮的背景并使用 insertSubLayer behind: 方法将其添加为子层时，它仍然出现在 UIButton Textlabel 的前面。

我的代码发布在下面，任何帮助将不胜感激。

```
CALayer *layer = self.layer;

layer.cornerRadius = 3.0f;
layer.masksToBounds = YES;
layer.borderWidth = 1.0f;
layer.borderColor = [UIColor colorWithWhite:0.5f alpha:0.5f].CGColor;
self.titleLabel.textColor = [UIColor greenColor];
//layer.backgroundColor = [UIColor greenColor].CGColor;

bgColor = [CAGradientLayer layer];
bgColor.frame = self.layer.bounds;
self.backgroundColor = [UIColor colorWithWhite:1 alpha:1];
bgColor.colors = [NSArray arrayWithObjects:
                     (id)[UIColor colorWithWhite:0.97f alpha:1].CGColor,
                     (id)[UIColor colorWithWhite:0.87f alpha:1].CGColor,
                     nil];
bgColor.locations = [NSArray arrayWithObjects:
                        [NSNumber numberWithFloat:0.0f],
                        [NSNumber numberWithFloat:1],
                        nil];
[self.layer addSublayer:bgColor];
[self.layer insertSublayer:bgColor below:layer]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T10:52:14.607

`self.layer`并`layer`在您的代码中指向同一个对象。您要求图层在其自身后面插入一个子图层 - 这是不可能的。子层包含在父层中。尝试

```
[self.layer insertSublayer:bgColor atIndex:0]; 
```

代替

```
[self.layer addSublayer:bgColor]; 
[self.layer insertSublayer:bgColor below:layer]; 
```

这将在按钮图层层次结构中的最低点添加渐变。

# php - php tidy none 打破空间

> ID：11738336
> 
> 赞同：1
> 
> 时间：2012-07-31T10:45:18.450
> 
> 标签：php, tidy

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T11:33:18.673

How about this? [http://codepad.viper-7.com/B5PDFc](http://codepad.viper-7.com/B5PDFc)

> bare Top Type: Boolean Default: no Example: y/n, yes/no, t/f, true/false, 1/0
> This option specifies if Tidy should strip Microsoft specific HTML from Word 2000 documents, and **output spaces rather than non-breaking spaces where they exist in the input**.

```
$string = 'word word &nbsp; word';

// tidy config
$tidyConfig = array(
    'indent' => true,
    'output-xhtml' => false,
    'input-encoding' => 'utf8',
    'output-encoding' => 'utf8',
    'show-body-only' =>true,
    'fix-backslash' => true,
    'quote-marks' => true,
    'wrap' => 1024,
    'bare' => true,
);

// tidy up
var_dump((string)tidy_parse_string($string, $tidyConfig)); 
```

*The output-xhtml (false) is something I experimented with, but it makes no difference regarding the output (in this case)

# wcf - wcf 数据合同中的条件必填字段

> ID：11738337
> 
> 赞同：0
> 
> 时间：2012-07-31T10:45:19.120
> 
> 标签：wcf, datacontracts

他们是否可以通过任何方式在 dataContract 中设置有条件的强制数据字段，例如 - 我们将 IsRequired 属性作为 DataMember 属性的一部分以确保始终传递特定的数据字段，是否可以通过任何方式将数据字段设置为有条件的在 WCF 中是强制性的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T06:20:02.110

我不认为通过某些属性属性有任何这样的直接支持。但是，您可以[创建服务或端点行为](http://msdn.microsoft.com/en-us/magazine/cc163302.aspx)（取决于您的要求）并根据您的验证规则验证数据成员/字段。

# sql - 如何在表数据库Oracle中插入100万行随机行

> ID：11738342
> 
> 赞同：12
> 
> 时间：2012-07-31T10:45:29.543
> 
> 标签：sql, oracle

我不知道如何将大量数据放入表中。数据不得重复

求教，可能有其他方法吗？

```
create table COUNTRIES (
  COUNTRY_ID   VARCHAR2(7),
  COUNTRY_NAME VARCHAR2(40),
  constraint COUNTRY_C_ID_PK primary key (COUNTRY_ID)
);

Begin
For IDS in 1..1000000
Loop
INSERT INTO "SYSTEM"."COUNTRIES" (COUNTRY_ID, COUNTRY_NAME) VALUES (dbms_random.string('L', 7), dbms_random.string('L', 15));
Commit;
End loop;
End; 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-07-31T10:53:26.960

如果你只想要数据量而不关心内容的随机性，

```
 insert into countries select rownum, 'Name'||rownum from dual
   connect by rownum<=1000000; 
```

应该做的伎俩。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-01T06:20:41.847

如果您对随机有非常具体的定义，并且不允许重复，那么异常处理可以帮助避免重复。

这种方法会很慢。如果您需要多次执行此操作，或处理大量数据，您可能希望放宽对“随机”的定义，并使用 Erich 之类的解决方案。

```
--Create temporary unique constraint.  (Assuming you want each column to be unique?)
alter table countries add constraint countries_name_uq unique (country_name);

--Insert random data until it worked 1 million times.
Declare
    rows_inserted number := 0;
Begin
    Loop
        Begin
            INSERT INTO COUNTRIES(COUNTRY_ID, COUNTRY_NAME)
            VALUES(dbms_random.string('L', 7), dbms_random.string('L', 15));
            --Only increment counter when no duplicate exception
            rows_inserted := rows_inserted + 1;
        Exception When DUP_VAL_ON_INDEX Then Null;
        End;
        exit when rows_inserted = 1000000;
    End loop;
    commit;
End;
/

--Drop the temporary constraint
alter table countries drop constraint countries_name_uq;

--Double-check the count of distinct rows
select count(*) from
(
    select distinct country_id, country_name from countries
);

Result
------
1000000 
```

# android - 使用“搜索过滤栏”的 Android 操作栏

> ID：11738343
> 
> 赞同：1
> 
> 时间：2012-07-31T10:45:30.620
> 
> 标签：android, action, android-actionbar, actionbarsherlock

对于我的项目，我想在操作栏的底部添加搜索过滤器。

这个例子是[youtube 应用程序](https://www.dropbox.com/s/ae4ddomz86a4lqv/2012-07-31%2012.39.55.png)

我不知道如何在我的应用程序中使用搜索过滤器获取操作栏下方的栏。据我所知，这是操作栏 API 的一个功能。

我`ActionbarSherlock`用来支持 4.0 以下的版本

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T15:59:49.537

不幸的是，当前版本的 ActionBarSherlock 4.1**不支持它**

[https://github.com/JakeWharton/ActionBarSherlock/issues/70](https://github.com/JakeWharton/ActionBarSherlock/issues/70)

# linux - 如何使用 bash 从文件中删除文本块

> ID：11738346
> 
> 赞同：2
> 
> 时间：2012-07-31T10:45:45.327
> 
> 标签：linux, bash, sed, awk

我有以下配置的绑定配置文件：

```
zone "domain1.com" {
        type master;
        file "masters/domain1.com";
        allow-transfer {
                dnscontroller_acl;
        };
};

zone "domain2.com" {
        type master;
        file "masters/domain2.com";
        allow-transfer {
                dnscontroller_acl;
        };
};

zone "domain3.com" {
        type master;
        file "masters/domain3.com";
        allow-transfer {
                dnscontroller_acl;
        };
};

zone "domain4.com" {
        type master;
        file "masters/domain4.com";
        allow-transfer {
                dnscontroller_acl;
        };
}; 
```

如何在 bash 的帮助下从文件中删除区域配置（从`zone`文件名开始和结尾）？`};`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-31T10:52:39.563

您可以使用`sed`删除给定区域的配置：

```
sed '/^zone "domain4.com" {$/,/^};/d' file 
```

如果您想要一个可以将区域作为参数的脚本，只需添加 she-bang 和参数：

```
#!/bin/bash
sed '/^zone "'"$1"'" {$/,/^};/d' file 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T12:00:49.603

如果文件有序，您可以使用`awk`自动记录和字段分离：

```
awk '
  BEGIN { RS = ORS = "\n\n"; FS="\n" } 
  $1 !~ /domain3/
' file 
```

删除第一行包含“domain3”的区域。

# android - 为什么我无法创建 android xml 文件？

> ID：11738352
> 
> 赞同：0
> 
> 时间：2012-07-31T10:46:03.240
> 
> 标签：android, xml, android-4.0-ice-cream-sandwich, galaxy-tab

我正在创建一个新项目，该项目的目标是“GALAXY tab addon”。我在布局文件夹中创建了一个新的 xml 文件，我得到了以下屏幕，这在我为 2.2 左右开发时不是这种情况。我下一步该去哪里，它说选项是“可选的”，所以我跳过它们并单击完成 - 无响应，我还尝试选择一些选项，但文件仍然没有创建。我在这里想念什么？

![在此处输入图像描述](../Images/c23f099ee1d0e91c7fd113a3023d212f.png)

使用的IDE是Eclipse。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T11:01:27.883

你不需要去这个窗口。你可以在这个窗口之前完成创建 xml 文件，如下图所示。

![在此处输入图像描述](../Images/f2dc983e2711f220a4989a1cd01167e9.png)

只需单击此处的完成按钮，您的 xml 文件将被创建。

# applescript - 使用 AppleScript 获取命令的返回值（获取 IP 地址并用作字符串）

> ID：11738353
> 
> 赞同：0
> 
> 时间：2012-07-31T10:46:06.933
> 
> 标签：applescript

我正在尝试使用 AppleScript 获取当前的本地 IP 地址，以便可以使用它来形成 URL 字符串，如下所示：

```
"http://" & ip & ":8080" 
```

研究使我找到了这个命令，它将返回正确的 IP：

```
ifconfig en0|grep "inet "|cut -d ' ' -f 2 
```

我需要保存该命令的值，以便可以在我的 AppleScript 中使用它。我怎样才能做到这一点？或者有没有更好的获取IP的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T17:40:49.130

在本机苹果脚本中...

```
set ipAddr to IPv4 address of (get system info)
set urlAddr to "http://" & ipAddr & ":8080" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T12:49:22.663

像这样

```
set tIP to do shell script "ifconfig en0|grep 'inet '|cut -d ' ' -f 2"
set tURL to "http://" & tIP & ":8080" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-02T23:46:39.707

我发现“获取系统信息”只会返回它找到的第一个 IP 地址。例如，我的机器有两个网络接口，“en0”上的以太网和“en1”上的 WiFi，调用只返回“en0”上的地址。因此，如果您有多个接口，这可能不是您想要的调用。

```
system info
    --> {..., IPv4 address:"10.10.15.89", ...} 
```

# jsf - PrimeFaces :: display p:Dialog 填写表单域，无需重新发布

> ID：11738355
> 
> 赞同：0
> 
> 时间：2012-07-31T10:46:12.583
> 
> 标签：jsf, primefaces

我有一个数据输入表单，它显示了许多字段（主要是**p:inputText**）供用户提供。其中一些是 LOV，因此我显示一个**p:dialog**以允许用户选择正确的值。**p:dialog**通过**p:inputText**旁边的**p:commandLink**显示。代码的主要部分如下所示：

 **```
<h:form id="parentForm">
    (...)
    <p:inputText value="#{CustomerCEVController.customer.municipality}" id="customerMncName"/>
    <p:commandLink type="button" onclick="MunicipalityDlg.show()" styleClass="ui-icon ui-icon-search"/>
    (...)
    <p:commandButton value="Submit"  id="save" actionListener="#{CustomerCEVController.saveButtonListener}" /> (...)
</h:form> 
```

问题是，每当用户单击**p:commandLink**以显示**p:dialog**（以允许他选择其中一个值）时，外部表单都会经历其生命周期阶段（恢复视图、应用请求值、流程验证等） .) 因为**p:commandLink**被放置在**h:form**中。如何实现此对话框显示功能，同时避免在用户打开的每个对话框中发布**h:form ？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T10:55:45.700

只需将“return false”作为最后一条语句添加到 onclick 事件处理程序。它阻止了 commandLink 的默认功能（发布表单）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T14:36:44.887

只需添加将`appendToBody`属性设置为 true on`<p:dialog>`

```
<p:dialog header="Header Text" widgetVar="dlg" appendToBody="true">
   //Content
</p:dialog> 
```

这会将对话框作为文档正文的子项附加到父表单之外。**

# java - 递归参数问题

> ID：11738356
> 
> 赞同：-3
> 
> 时间：2012-07-31T10:46:18.230
> 
> 标签：java, integer-division

```
public void mystery1(int n) {
if (n <= 1) {
    System.out.print(n);
} else {
    mystery1(n / 2);
    System.out.print(", " + n);
}
} 
```

是什么给出了这个奇数代码。因为当我们除以它时，它不会是一个整数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T10:55:14.347

在 Java 或大多数其他编程语言中，当您将整数除以整数时，结果将是整数。如果出现十进制数，例如：

```
5/2=2.5 
```

然后，小数点前的数字将被视为整数并选择 2。

如果您想将整数显式转换为浮点数或双精度数，可以使用以下任何一种转换：

```
(float) 3/2;

(double) n/2; 
```

以上明确将其转换为小数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T10:47:57.010

这并不神秘，因为Java中整数除法的结果是整数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T10:53:35.677

参数将四舍五入为 int，例如如果参数为 5，则下一次调用该函数将使用参数 2

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T10:48:29.497

`n / 2`，这是一个整数除法，其中小数部分将被忽略。

```
System.out.println(3/2); // prints 1
System.out.println(3.0/2); // prints 1.5
System.out.println(3/2.0); // prints 1.5
System.out.println(3.0/2.0); // prints 1.5 
```

# c++ - BigInteger java方法到gmp c++

> ID：11738358
> 
> 赞同：1
> 
> 时间：2012-07-31T10:46:19.383
> 
> 标签：c++

我想在 C++ 中转换 Java 代码

代码是

```
BigInteger value = new BigInteger(125, RandomNumber); 
BigInteger clone = new   BigInteger(value.toByteArray()); 
```

如何使用 gmp 库在 cpp 中编写此代码？

请任何人帮助我。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T11:18:14.420

使用 C++，您可以做到这一点

```
#include <gmpxx.h>
#include <gmp.h>
#include <iostream>
using namespace std;

int main(){
  mpz_class value;
  mpz_class clone;
  gmp_randclass r(gmp_randinit_default);
  value = r.get_z_bits(125);
  clone = value;
  cout << value << endl;
  cout << clone << endl;                                                                                                                                                                     
  return 0;
} 
```

并使用 g++ file.cpp -lgmpxx -lgmp 编译

安装 libgmpxx.a 将 --enable-cxx 放到 ./configure 的构建选项中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T10:51:49.997

这是来自维基百科的抄本

下面是一个 C 代码示例，展示了使用 GMP 库来乘法和打印大数：

```
#include <stdio.h>
#include <stdlib.h>
#include <gmp.h>

int main(void)
{
 mpz_t x;
 mpz_t y;
 mpz_t result;

 mpz_init(x);
 mpz_init(y);
 mpz_init(result);

 mpz_set_str(x, "7612058254738945", 10);
 mpz_set_str(y, "9263591128439081", 10);

 mpz_mul(result, x, y);
 gmp_printf("\n    %Zd\n*\n    %Zd\n--------------------\n%Zd\n\n", x, y, result);

 /* free used memory */
 mpz_clear(x);
 mpz_clear(y);
 mpz_clear(result);
 return EXIT_SUCCESS;
} 
```

此代码计算 7612058254738945 × 9263591128439081 的值。

编译和运行这个程序会得到这个结果。（如果在 Unix 类型的系统上编译，则使用 -lgmp 标志。）

```
 7612058254738945
*
    9263591128439081
--------------------
70514995317761165008628990709545 
```

# jquery-mobile - 从事件中清除 jQueryMobile DateBox 值

> ID：11738364
> 
> 赞同：0
> 
> 时间：2012-07-31T10:46:50.450
> 
> 标签：jquery-mobile, datebox

我有 2 个`DateBox`（从 & 到）。我想要做的是，每当我点击“from”`DateBox`时，它总是会清除“to” `DateBox`。

我正在查看该`doclear`方法，但我不确定它是否正确，甚至不知道如何使用它。

只是为了清楚我正在使用[这个](http://dev.jtsage.com/jQM-DateBox/)。

任何帮助，将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T02:36:34.473

在我的测试中，将框的值设置为空字符串 ('') 有效。假设 id`fromDate`和`toDate`在两个盒子上，下面的代码应该可以解决问题：

```
$('#fromDate').click(function(){
    $('#toDate').val('');
} 
```

# hibernate - hibernate3-maven-plugin hbm2ddl 目标忽略序列定义并生成默认 hibernate_sequence

> ID：11738367
> 
> 赞同：0
> 
> 时间：2012-07-31T10:46:53.580
> 
> 标签：hibernate, jpa, jpa-2.0, ddl, hibernate3-maven-plugin

我有 JPA 注释实体，其 ID 定义为使用序列自动生成的属性。但是当我尝试使用 hibernate3-maven-plugin 生成 DDL 时，不会生成我定义的序列，而是 hibernate_sequence 存在。

```
@Entity
@Table(name = "DUMMY")
@SequenceGenerator(name = "DUMMY_SEQ")
public class Dummy {
    private Long pk;

    @Id
    @Column(name = "PK", nullable = false )
    @GeneratedValue(strategy = GenerationType.SEQUENCE, generator="DUMMY_SEQ")
    public Long getPk() {
        return pk;
    }

    public void setPk(Long pk) {
        this.pk = pk;
    }
} 
```

我期待类似的东西：

```
create sequence DUMMY_SEQ; 
```

在生成的 DDL 中。我做错了什么？hibernate3-maven-plugin 版本是 2.2 hibernate-entitymanager 版本 3.4.0.GA

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T11:27:00.440

您尚未定义数据库序列的名称。SequenceGenerator 中的属性*名称*只是SequenceGenerator 本身的名称，而不是数据库中序列的名称。结果是提供者默认值，在这种情况下使用 *hibernate_sequence*。要影响序列的名称，请使用[sequenceName](http://docs.oracle.com/javaee/5/api/javax/persistence/SequenceGenerator.html#sequenceName%28%29)属性：

```
@SequenceGenerator(name = "DUMMY_SEQ", sequenceName="DUMMY_SEQ") 
```

# php - 使用 PHP 自定义 CMS 创建动态子域？

> ID：11738378
> 
> 赞同：0
> 
> 时间：2012-07-31T10:47:35.797
> 
> 标签：php, mysql, content-management-system, subdomain

我对分析一个项目感到困惑。客户说“我需要一个使用 PHP 在向导上创建子域的管理面板”，即他想要 www.domain.com/sub1、www.domain.com/sub2、www.domain.com/sub3 等。每个子域可能包含不同的页眉、菜单、内容、页脚等。我真的很困惑“如何制作为每个子域创建目录和文件的 PHP 管理面板？”。我希望你明白了，否则我准备好讨论更多。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T10:55:35.123

希望你对此有所了解：

[http://php.net/manual/en/function.mkdir.php](http://php.net/manual/en/function.mkdir.php)

[http://php.net/manual/en/function.fwrite.php](http://php.net/manual/en/function.fwrite.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T10:52:58.583

为什么要为每个“域”创建一个目录？您可以使用 .htaccess 和数据库。

# javascript - 为什么只打印一次？请给我解决方案

> ID：11738380
> 
> 赞同：1
> 
> 时间：2012-07-31T10:47:53.193
> 
> 标签：javascript, html

```
<html>
<head>
<script type="text/javascript">
    function printpage()
        {document. getElementById ('print').style.display='none';
        window.print()
    }
</script>
</head>
<body>
  <td align="center">
    <input  name="print" type="submit" id="print" value="PRINT" onclick="printpage()" />
  </td>
</body>
</html> 
```

当我单击时，它将打开一个打印窗口。一旦我关闭打印窗口并再次打开它，然后单击打印，而不重新加载，它将无法工作。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-31T10:59:12.243

`document.getElementById('print').style.display='none';`从您的`printpage()`功能中删除。

在上述情况下，该按钮将对另一个单击事件可见，但是当您打印文档时，该按钮将显示在打印的文档上。我对吗？

为了防止打印`print`按钮，您需要使用[css 媒体查询](http://www.w3.org/TR/css3-mediaqueries/) `@media print`

**在您的外部样式表或HTML 页面`<style>`标签内的标签中添加以下内容：`<head>`**

```
 @media print {    
     .noprint { display: none; }
 }​ 
```

并添加`.noprint`类

```
<input  name="print" class="noprint" type="submit" id="print" value="PRINT" onclick="printpage()" /> 
```

[**看演示**](http://jsfiddle.net/akhurshid/wR76u/)

它将打印文档而不打印按钮，并且您的按钮也将在第二次单击时可见:-)

**编辑：**

**使用下面给出的 HTML：**

```
<!DOCTYPE html>
<html>
    <head>

      <meta charset=utf-8 />  
      <title>JS Bin</title>  

      <!-- Your Stylesheet (CSS) -->  
      <style type="text/css">
         @media print {    
           .noprint { display: none; }
         }​
      </style>

      <!-- Your Javascript Function -->  
      <script>
          function printpage() {       
              window.print();
          }
      </script>

    </head>
<body>

<!-- Your Body -->
<p>Only This text will print</p>

<!-- Your Button -->
<input class="noprint" type="button" value="PRINT" onclick="printpage()" />

</body>
</html> 
```

[**见上面的代码在行动**](http://jsbin.com/otihov/1/edit)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T11:20:44.043

将 type=submit 更改为 type=button

您在提交时正在卸载页面

[并用AK](https://stackoverflow.com/a/11738592/295783)发布的 CSS 隐藏按钮

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T10:53:42.930

只需删除

```
document.getElementById('print').style.display='none'; 
```

从你的`printpage()`功能。它会正常工作

如果您不想打印页面上的打印按钮，

```
document.getElementById('print').style.visibility='hidden'
window.print();
document.getElementById('print').style.visibility='visible' 
```

# php - 活动日志仅显示 [Name] 'read an article' 没有链接

> ID：11738381
> 
> 赞同：0
> 
> 时间：2012-07-31T10:47:53.987
> 
> 标签：php, facebook, facebook-opengraph

我们正在构建一个将读取操作发布到用户时间轴的站点。在测试中，如果用户访问他们的活动日志 ( [https://www.facebook.com/[username]/allactivity](https://www.facebook.com/[username]/allactivity) )，它有时会显示为

*   [用户] 看了一篇文章

没有任何关联的链接。见下图：

![在此处输入图像描述](../Images/a1372295652c221961a68531cf181110.png)

有谁知道可能是什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T15:08:10.937

测试表明，当页面中没有 og:image 元数据时会发生这种情况。

# java - 类构造函数在类加 载时抛出异常失败

> ID：11738383
> 
> 赞同：0
> 
> 时间：2012-07-31T10:47:57.273
> 
> 标签：java

我有一个构造函数在第一次调用时失败，因为在一个类的方法中捕获了一个`new`类的异常。`javax.persistence.NoResultException`

**编辑：它不是 NoResultException，NoResultException 是异常的消息。堆栈跟踪如下**

如果我删除 import to`javax.persistence.NoResultException`并只捕获一个 generic `Exception e`，代码就可以工作。

我的问题是：

1.  为什么尚未调用的方法中的代码会影响构造函数？（也没有在构造函数中调用）
2.  为什么 ClassLoader 会抛出一个不应该抛出的异常？[ClassLoader.loadClass()](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/ClassLoader.html#loadClass%28java.lang.String%29)`ClassNotFoundException`根据 JavaDoc抛出。

javax.persistence.NoResultException 的捕获以及导入是在版本之间设法生存的旧代码，我将其删除并且已修复，但是我现在想知道这背后的原因。

**堆栈跟踪：**

```
java.lang.NoClassDefFoundError: javax/persistence/NoResultException
    at xxx.xxxxxx.xxxxxxx.xxxx.xxxx.xxxxxxxxxxxx.xxxxxxxxxxxxxxx(ClassB.java)
    ...
    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:441)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:619)
Caused by: java.lang.ClassNotFoundException: javax.persistence.NoResultException
    at java.net.URLClassLoader$1.run(URLClassLoader.java:200)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:188)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:307)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:252)
    at java.lang.ClassLoader.loadClassInternal(ClassLoader.java:320)
    ... 10 more 
```

**到最后看调试器的分步图片和失败的那一刻**

**失败代码：**

```
// ClassB.java

import javax.persistence.NoResultException; // NOTICE THE IMPORT

public ClassB{
    private UserInfo user;
    private WebServiceBDelegate port;
    private Connection conn;

    public ClassB (UserInfo user, Connection conn) throws Exception {
        System.out.println("CLASS B CONSTRUCTOR");
        this.user = user;
        this.conn = conn;
        this.port = new WebServiceBService().getForwardingPort();
    }

    public boolean methodB(List<String> list){
        try{
            // Check some stuff on database using this.conn
        } catch(NoResultException nre){         // NOTICE THE CATCH
            String something = getSomething();
        }
        // Get the values to invoke SOAP service using this.conn
        status = port.operationB(values);
        if(status > 0)
            return true;
        return false;
    }
} 
```

**工作代码：**

```
// ClassB.java

public ClassB{
    private UserInfo user;
    private WebServiceBDelegate port;
    private Connection conn;

    public ClassB (UserInfo user, Connection conn) throws Exception {
        System.out.println("CLASS B CONSTRUCTOR");
        this.user = user;
        this.conn = conn;
        this.port = new WebServiceBService().getForwardingPort();
    }

    public boolean methodB(List<String> list){
        try{
            // Check some stuff on database using this.conn
        } catch(Exception e){         // THIS IS THE CHANGED CATCH
            String something = getSomething();
        }
        // Get the values to invoke SOAP service using this.conn
        status = port.operationB(values);
        if(status > 0)
            return true;
        return false;
    }
} 
```

以下是进入 INTO 类构造函数时从调试器到 JVM 默认 ClassLoader 以及失败时的分步图像：

[STEP INTO 调用 new ClassB 时让我加载ClassInternal(String)](https://i.stack.imgur.com/a1z4N.png) ![STEP INTO 调用 new ClassB 时让我加载ClassInternal(String)](../Images/fe621ff473d54a0e06bdfc9175cd3a05.png)

[STEP INTO loadClassInternal(String)，让我去 loadClass(String,boolean)](https://i.stack.imgur.com/e2CEu.png) ![STEP INTO loadClassInternal(String)，让我去 loadClass(String,boolean)](../Images/4bac770e21578e38f459642eaf5258be.png)

[STEP INTO loadClass(String,boolean)，据我所知，现在 STEP RETURN](https://i.stack.imgur.com/E0IUQ.png) ![STEP INTO loadClass(String,boolean)，据我所知，现在 STEP RETURN](../Images/9ca6ee97a7e67034b81585ca9902ecd6.png)

[STEP RETURN 让我加载类（字符串](https://i.stack.imgur.com/d39PK.png)） ![STEP RETURN 让我加载类（字符串）](../Images/1ef2ae8fb14000421dbf803ae348ce8f.png)

[STEP OVER 让我加载ClassInternal(String)](https://i.stack.imgur.com/NjiwW.png) ![STEP OVER 让我加载ClassInternal(String)](../Images/4d3944854d41e31f2e9e6f3b58845ee1.png)

[STEP OVER 给我 javax.persistence.NoResultException](https://i.stack.imgur.com/C9N4C.png) ![STEP OVER 给我 javax.persistence.NoResultException](../Images/07c5f3df9a020e5e6574e43cd3ead007.png)

STEP OVER 让我回到我的代码的最后并结束执行

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T10:59:45.070

1.  该类在首次访问时被加载到 ClassLoader 中。代码中的第一个“new”语句将类加载到 ClassLoader 中，后者随后检查它是否实际上可以访问类的所有依赖项（即 NoResultException）。
2.  你没有说清楚 ClassLoader 抛出了什么，但我猜它确实抛出了一个 ClassNotFoundException ，详细说明 NoResultException 不在你的类路径上，所以它不能被加载。这也是当您删除有问题的导入和捕获时它起作用的原因。

# iphone - 在 iOS 中使用 objectForKey 解析带有 NSJSONSerialization 类的 json

> ID：11738384
> 
> 赞同：5
> 
> 时间：2012-07-31T10:48:11.773
> 
> 标签：iphone, objective-c, ios, ios5, nsjsonserialization

我是 iOS 开发的新手。我使用此代码连接到我的 REST Web 服务并以 Json 格式获取数据。

```
 NSString *url=@"URL_Address";

    NSURLRequest *theRequest = [NSURLRequest requestWithURL:[NSURL URLWithString:url]];

    NSURLResponse *resp = nil;
    NSError *err = nil;

    NSData *response = [NSURLConnection sendSynchronousRequest: theRequest returningResponse: &resp error: &err];

//    NSString * theString = [[NSString alloc] initWithData:response encoding:NSUTF8StringEncoding]; 
//    NSLog(@"response: %@", theString);

    NSArray *jsonArray = [NSJSONSerialization JSONObjectWithData: response options: NSJSONReadingMutableContainers error: &err];

    if (!jsonArray) {
        NSLog(@"Error parsing JSON: %@", err);
    } else {
        for(NSDictionary *item in jsonArray) {
            NSLog(@" %@", item);
            NSLog(@"---------------------------------");
        }
    } 
```

现在我想通过`objectForKey`. 我在循环中使用了这段代码：

```
NSString *name = [item objectForKey:@"name"]; 
```

这没用。我收到了这个错误：

```
2012-07-31 12:48:38.426 LearningAFNetworking[390:f803] -[__NSArrayM objectForKey:]: unrecognized selector sent to instance 0x6844460
2012-07-31 12:48:38.428 LearningAFNetworking[390:f803] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[__NSArrayM objectForKey:]: unrecognized selector sent to instance 0x6844460'
*** First throw call stack:
(0x13c8022 0x1559cd6 0x13c9cbd 0x132eed0 0x132ecb2 0x2f40 0x2bf8 0xd9a1e 0x38401 0x38670 0x38836 0x3f72a 0x290b 0x10386 0x11274 0x20183 0x20c38 0x14634 0x12b2ef5 0x139c195 0x1300ff2 0x12ff8da 0x12fed84 0x12fec9b 0x10c65 0x12626 0x254d 0x24b5 0x1)
terminate called throwing an exception(lldb) 
```

你能帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T11:38:17.307

正如 Alberto 所说，您假设 item 是一个`NSDictionary`while 实际上是`NSArray`包含多个字典。现在对于向下钻取部分，您可以使用`valueForKeyPath`如下所示。所以你的`for`循环应该是这样的：

```
NSArray *items = [jsonArray objectAtIndex:0];

for (NSDictionary *item in items){
    NSString *name = [item valueForKey:@"name"];
    // You can also get nested properties like this
    NSString *projectName = [item valueForKeyPath:@"project.name"]; 
} 
```

另一件有用的事情是，如果您想获取所有“名称”值，例如，您可以`valueForKey`在 items 数组上使用，它会自动`valueForKey`为您调用每个字典。例子：

```
NSArray *items = [jsonArray objectAtIndex:0];
NSArray *names = [items valueForkey:@"name"]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T11:06:05.573

您必须访问数组的`0`项目：`item`

```
NSArray *mainArray = [item objectAtIndex:0];
(NSDictionary *obj in mainArray) {
     NSString *name = [obj objectForKey:@"name"];
} 
```

当您收到此错误时：`-[__NSArrayM objectForKey:]`，您需要意识到您尝试访问的对象不是字典。它是一个数组 ( `__NSArrayM`)，因此您必须首先访问 0 索引，然后开始探索字典。

看看[这个](http://www.raywenderlich.com/10209/my-app-crashed-now-what-part-1)来自 Ray Wenderlich 的精彩教程，它解释了有关崩溃的所有内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T14:41:34.520

愿这段代码帮助您从`NSArray`

```
[[jsonArray objectAtIndex:0]objectForKey:@"object-key"]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T11:06:52.570

从错误和代码的日志输出来看，您似乎正在尝试`objectForKey`在`NSArray`. 尝试更改`NSString *name = [item objectForKey:@"name"];`为`NSString *name = [[item objectAtIndex: 0]objectForKey:@"name"];`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-02-21T02:21:37.530

```
-(void)clientServerCommunication
{
    NSURL *url = [NSURL URLWithString:@"http://182.72.122.106/iphonetest/getTheData.php"];
    NSURLRequest *req = [NSURLRequest requestWithURL:url];
    NSURLConnection *connection = [[NSURLConnection alloc]initWithRequest:req delegate:self];
    if (connection)
    {
        webData = [[NSMutableData alloc]init];
    }
}
- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response
{
    [webData setLength:0];
}

- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data
{
    [webData appendData:data];
}

- (void)connectionDidFinishLoading:(NSURLConnection *)connection
{
    NSDictionary *responseDict = [NSJSONSerialization JSONObjectWithData:webData options:0 error:nil];

    /*Third party API
     NSString *respStr = [[NSString alloc]initWithData:webData encoding:NSUTF8StringEncoding];
     SBJsonParser *objSBJson = [[SBJsonParser alloc]init];
     NSDictionary *responseDict = [objSBJson objectWithString:respStr]; */
    resultArray = [[NSArray alloc]initWithArray:[responseDict valueForKey:@"result"]];
    NSLog(@"resultArray: %@",resultArray);
    [self.tableView reloadData];
}
-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    custcell=[tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if(custcell==nil)
    {

        custcell=[[[NSBundle mainBundle]loadNibNamed:@"custumCell" owner:self options:nil]objectAtIndex:0];

    }

    custcell.persnName.text=[[arr objectAtIndex:indexPath.row]valueForKey:@"Name"];
    //else if (objsegment.selectedSegmentIndex==1)
    //{
    custcell.persnAge.text=[[arr objectAtIndex:indexPath.row]valueForKey:@"Age"];

    [sortcontrol addTarget:self action:@selector(SegmentbtnCLK:) forControlEvents:UIControlEventValueChanged];

    //objsegment.selectedSegmentIndex=0;
    // }

    return custcell;
}
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    // Navigation logic may go here, for example:
     //Create the next view controller.
    detailViewController *detailViewController1 = [[detailViewController alloc]initWithNibName:@"detailViewController" bundle:nil];

 //detailViewController *detailViewController = [[detailViewController alloc] initWithNibName:@"detailViewController" bundle:nil];

 // Pass the selected object to the new view controller.

 // Push the view controller.
 detailViewController1.nextDict = [[NSDictionary alloc]initWithDictionary:[resultArray objectAtIndex:indexPath.row]];
 [self.navigationController pushViewController:detailViewController1 animated:YES];

    // Pass the selected object to the new view controller.

    // Push the view controller.
  //  [self.navigationController pushViewController:detailViewController animated:YES];
}
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view from its nib.
    empName.text=[nextDict valueForKey:@"name"];
    deptlbl.text=[nextDict valueForKey:@"department"];
    designationLbl.text=[nextDict valueForKey:@"designation"];
    idLbl.text=[nextDict valueForKey:@"id"];
    salaryLbl.text=[nextDict valueForKey:@"salary"];
    NSString *ImageURL = [nextDict valueForKey:@"image"];
    NSData *imageData = [NSData dataWithContentsOfURL:[NSURL URLWithString:ImageURL]];
    image.image = [UIImage imageWithData:imageData];
} 
```

# c# - 创建 Enumerable 的扩展方法 TryGetValue(TKey, out TValue) > 就像字典一样

> ID：11738387
> 
> 赞同：1
> 
> 时间：2012-07-31T10:48:19.790
> 
> 标签：c#, .net, extension-methods

我有一个`Enumerable<KeyValuePair<TKey, TValue>>`. 我想创建它的`bool TryGetValue(TKey, out TValue)`扩展方法，就像它在`Dictionary<TKey, TValue>`.

我试过了

```
public static bool TryGetValue<TKey, TValue>
(this Enumerable<KeyValuePair<TKey, TValue>> mapping, TKey key, out TValue value)
{
    bool retVal = false;

    KeyValuePair<TKey, TValue> kvp;

    kvp = mapping.First(x => x.Key.Equals(key));

    if(kvp.Key == null && kvp.Value == null)
    {
        retVal = false;
        value = default(TValue);
    }
    else
    {
        retVal = true;
        value = kvp.Value;
    }

    return retval;
} 
```

这是正确的方法吗？如果没有，请推荐一个。

**笔记：**

我不能使用字典，因为键是重复的。而且它只会返回第一个匹配值？

`What happens to the rest?`

我们可以离开他们。我正在发送从 DataTable 创建的 KeyValuePair。我`order by columnname`在其查询中使用创建该 DataTable。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-31T10:58:09.073

为什么不只使用一个简单的`foreach`循环？

* * *

**例子：**

```
public static bool TryGetValue<TKey, TValue>
(this KeyValuePair<TKey, TValue>[] mapping, TKey key, out TValue value)
{
    foreach(var kvp in mapping)
        if (kvp.Key.Equals(key))
        {
            value = kvp.Value;
            return true;
        }

    value = default(TValue);
    return false;
} 
```

* * *

如果密钥由于. `.First()`_`FirstOrDefault()``KeyValuePair``null`

* * *

**边注：**

`KeyValuePair<TKey, TValue>[]`您可能希望使用`IEnumerable<KeyValuePair<TKey, TValue>>`更灵活的而不是扩展。

# email - 查看端口 587、25、110、465、995、143、993 上的 SSL 证书

> ID：11738389
> 
> 赞同：26
> 
> 时间：2012-07-31T10:48:27.000
> 
> 标签：email, ssl, certificate, telnet, ports

如何查看端口 587、25、110、465、995、143 和 993 上使用的 SSL 证书详细信息

我需要检查使用哪个域名来保护这些端口。

我在这里和谷歌上搜索过，但找不到任何东西！

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-07-31T10:57:52.503

使用 OpenSSL（默认安装在几乎所有 Linux 发行版上，您还可以从[Shining Light Productions](http://slproweb.com/products/Win32OpenSSL.html)获得适用于 Windows 的二进制构建）：

```
openssl s_client -connect host:port -servername host [-starttls protocol] 
```

`host`您要连接的主机在哪里，`port`是端口号。

`-servername host`将在 TLS 握手中包含主机名（通过[服务器名称指示扩展](https://en.wikipedia.org/wiki/Server_Name_Indication)），以允许在同一 IP 上托管多个受保护资源的服务器选择正确的证书。

仅当您正在检查的服务器默认启动纯文本会话并稍后切换到 SSL/TLS 时，才需要该`-starttls protocol`部分，当客户端请求它时（在这种情况下，协议必须是`smtp`, `pop3`, `imap`, `ftp`,之一`xmpp`）；您应该检查您的服务器配置是否需要开关并相应地包含命令行选项。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-07-31T10:57:23.813

您可以使用[OpenSSL](http://www.openssl.org/docs/apps/s_client.html)：

```
openssl s_client -connect x.x.x.x:port 
```

（您也可以使用`-showcerts`完整链的选项。）

假设通常的服务在这些端口上运行，这应该会显示端口 465、995 和 993 的证书，因为它们是首先启动 SSL/TLS 连接的协议。

端口 587、25 (SMTP)、110 (POP3) 和 143 (IMAP) 通过“START TLS”升级使用 SSL/TLS。您需要根据需要添加`-starttls prot`where `prot`is`smtp`或。`imap``pop3`

请注意，如果这些服务中的任何一个支持服务器名称指示，如果您一开始没有请求正确的主机名，您可能无法获得所有证书。（不过，对于 HTTPS，SNI 可能比这些协议更常见。）

获得证书后，您可以将 PEM 块（在`BEGIN`/`END`分隔符之间）复制/粘贴（或管道）到`openssl x509 -text -noout`. 主机名应在主题备用名称（DNS 条目）中，如果不存在，则应在主题 DN 的 CN 中。

# imagemagick - 无法在 Mountain Lion 上安装 Imagemagick

> ID：11738393
> 
> 赞同：8
> 
> 时间：2012-07-31T10:48:29.120
> 
> 标签：imagemagick, homebrew, osx-mountain-lion, librsvg

昨天我更新到 Mountain Lion，我想启动我的 Rails 应用程序，但在使用 Rmagick gem 时遇到了一些问题。在网上阅读后，我做了以下事情：

*   安装 Xcode 4.4
*   安装的开发者工具
*   安装 Xquartz
*   使用 brew 卸载 imagemagick
*   用 brew 安装 imagemagick

在此安装过程中，我收到一个错误：

> coders/svg.c:93:10：致命错误：找不到“librsvg/rsvg.h”文件

***完整日志***

```
 ==> Downloading http://downloads.sf.net/project/machomebrew/mirror/ImageMagick-6.7.7-   6.tar.bz2
    Already downloaded: /Library/Caches/Homebrew/imagemagick-6.7.7-6.tar.bz2
==> Patching
patching file configure
Hunk #1 succeeded at 32371 (offset 447 lines).
==> ./configure --disable-osx-universal-binary --without-perl --prefix=/usr/local/Cellar/imagemagick/6.7.7-6 --enable-shared --disable-st
==> make install
/bin/sh ./config/mkinstalldirs . ltdl/
cp ./ltdl/argz_.h ltdl/argz.h-t
mv ltdl/argz.h-t ltdl/argz.h
make  install-am
  CC     ltdl/argz.lo
  CC     coders/coders_tga_la-tga.lo
  CC     coders/coders_thumbnail_la-thumbnail.lo
  CC     coders/coders_tile_la-tile.lo
  CC     coders/coders_tim_la-tim.lo
  CC     coders/coders_ttf_la-ttf.lo
  CC     coders/coders_txt_la-txt.lo
  CC     coders/coders_uil_la-uil.lo
  CC     coders/coders_url_la-url.lo
  CC     coders/coders_uyvy_la-uyvy.lo
  CC     coders/coders_vicar_la-vicar.lo
  CC     coders/coders_vid_la-vid.lo
  CC     coders/coders_viff_la-viff.lo
  CC     coders/coders_wbmp_la-wbmp.lo
  CC     coders/coders_wpg_la-wpg.lo
  CC     coders/coders_xbm_la-xbm.lo
  CC     coders/coders_xc_la-xc.lo
  CC     coders/coders_xcf_la-xcf.lo
  CC     coders/coders_xpm_la-xpm.lo
  CC     coders/coders_xps_la-xps.lo
  CC     coders/coders_ycbcr_la-ycbcr.lo
  CC     coders/coders_yuv_la-yuv.lo
  CC     coders/coders_jpeg_la-jpeg.lo
  CC     coders/coders_jp2_la-jp2.lo
  CC     coders/coders_png_la-png.lo
  CC     coders/coders_ept_la-ept.lo
  CC     coders/coders_tiff_la-tiff.lo
  CC     coders/coders_x_la-x.lo
  CC     coders/coders_xwd_la-xwd.lo
  CC     coders/coders_aai_la-aai.lo
  CC     magick/magick_libMagickCore_la-accelerate.lo
  CC     magick/magick_libMagickCore_la-animate.lo
  CC     magick/magick_libMagickCore_la-annotate.lo
  CC     magick/magick_libMagickCore_la-artifact.lo
  CC     magick/magick_libMagickCore_la-attribute.lo
  CC     magick/magick_libMagickCore_la-blob.lo
  CC     magick/magick_libMagickCore_la-cache.lo
  CC     magick/magick_libMagickCore_la-cache-view.lo
  CC     magick/magick_libMagickCore_la-cipher.lo
  CC     magick/magick_libMagickCore_la-client.lo
  CC     magick/magick_libMagickCore_la-coder.lo
  CC     magick/magick_libMagickCore_la-color.lo
  CC     magick/magick_libMagickCore_la-colormap.lo
  CC     magick/magick_libMagickCore_la-colorspace.lo
  CC     magick/magick_libMagickCore_la-compare.lo
  CC     magick/magick_libMagickCore_la-composite.lo
  CC     magick/magick_libMagickCore_la-compress.lo
  CC     magick/magick_libMagickCore_la-configure.lo
  CC     magick/magick_libMagickCore_la-constitute.lo
  CC     magick/magick_libMagickCore_la-decorate.lo
  CC     magick/magick_libMagickCore_la-delegate.lo
  CC     magick/magick_libMagickCore_la-deprecate.lo
  CC     magick/magick_libMagickCore_la-display.lo
  CC     magick/magick_libMagickCore_la-distort.lo
  CC     magick/magick_libMagickCore_la-draw.lo
  CC     magick/magick_libMagickCore_la-effect.lo
  CC     magick/magick_libMagickCore_la-enhance.lo
  CC     magick/magick_libMagickCore_la-exception.lo
  CC     magick/magick_libMagickCore_la-feature.lo
  CC     magick/magick_libMagickCore_la-fourier.lo
  CC     magick/magick_libMagickCore_la-fx.lo
  CC     magick/magick_libMagickCore_la-gem.lo
  CC     magick/magick_libMagickCore_la-geometry.lo
  CC     magick/magick_libMagickCore_la-hashmap.lo
  CC     magick/magick_libMagickCore_la-histogram.lo
  CC     magick/magick_libMagickCore_la-identify.lo
  CC     magick/magick_libMagickCore_la-image.lo
  CC     magick/magick_libMagickCore_la-image-view.lo
  CC     magick/magick_libMagickCore_la-layer.lo
  CC     magick/magick_libMagickCore_la-list.lo
  CC     magick/magick_libMagickCore_la-locale.lo
  CC     magick/magick_libMagickCore_la-log.lo
  CC     magick/magick_libMagickCore_la-magic.lo
  CC     magick/magick_libMagickCore_la-magick.lo
  CC     magick/magick_libMagickCore_la-matrix.lo
  CC     magick/magick_libMagickCore_la-memory.lo
  CC     magick/magick_libMagickCore_la-mime.lo
  CC     magick/magick_libMagickCore_la-module.lo
  CC     magick/magick_libMagickCore_la-monitor.lo
  CC     magick/magick_libMagickCore_la-montage.lo
  CC     magick/magick_libMagickCore_la-morphology.lo
  CC     magick/magick_libMagickCore_la-option.lo
  CC     magick/magick_libMagickCore_la-paint.lo
  CC     magick/magick_libMagickCore_la-pixel.lo
  CC     magick/magick_libMagickCore_la-policy.lo
  CC     magick/magick_libMagickCore_la-PreRvIcccm.lo
  CC     magick/magick_libMagickCore_la-prepress.lo
  CC     magick/magick_libMagickCore_la-property.lo
  CC     magick/magick_libMagickCore_la-profile.lo
  CC     magick/magick_libMagickCore_la-quantize.lo
  CC     magick/magick_libMagickCore_la-quantum.lo
  CC     magick/magick_libMagickCore_la-quantum-export.lo
  CC     magick/magick_libMagickCore_la-quantum-import.lo
  CC     magick/magick_libMagickCore_la-random.lo
  CC     magick/magick_libMagickCore_la-registry.lo
  CC     magick/magick_libMagickCore_la-resize.lo
  CC     magick/magick_libMagickCore_la-resample.lo
  CC     magick/magick_libMagickCore_la-resource.lo
  CC     magick/magick_libMagickCore_la-segment.lo
  CC     magick/magick_libMagickCore_la-semaphore.lo
  CC     magick/magick_libMagickCore_la-shear.lo
  CC     magick/magick_libMagickCore_la-signature.lo
  CC     magick/magick_libMagickCore_la-splay-tree.lo
  CC     magick/magick_libMagickCore_la-static.lo
  CC     magick/magick_libMagickCore_la-statistic.lo
  CC     magick/magick_libMagickCore_la-stream.lo
  CC     magick/magick_libMagickCore_la-string.lo
  CC     magick/magick_libMagickCore_la-thread.lo
  CC     magick/magick_libMagickCore_la-timer.lo
  CC     magick/magick_libMagickCore_la-token.lo
  CC     magick/magick_libMagickCore_la-transform.lo
  CC     magick/magick_libMagickCore_la-threshold.lo
  CC     magick/magick_libMagickCore_la-type.lo
  CC     magick/magick_libMagickCore_la-utility.lo
  CC     magick/magick_libMagickCore_la-version.lo
  CC     magick/magick_libMagickCore_la-widget.lo
  CC     magick/magick_libMagickCore_la-xml-tree.lo
  CC     magick/magick_libMagickCore_la-xwindow.lo
  CC     ltdl/loaders/ltdl_libltdlc_la-preopen.lo
  CC     ltdl/ltdl_libltdlc_la-lt__alloc.lo
  CC     ltdl/ltdl_libltdlc_la-lt_dlloader.lo
  CC     ltdl/ltdl_libltdlc_la-lt_error.lo
  CC     ltdl/ltdl_libltdlc_la-ltdl.lo
  CC     ltdl/ltdl_libltdlc_la-slist.lo
  CC     ltdl/loaders/dlopen.lo
  CC     coders/coders_art_la-art.lo
  CC     coders/coders_avs_la-avs.lo
  CC     coders/coders_bgr_la-bgr.lo
  CC     coders/coders_bmp_la-bmp.lo
  CC     coders/coders_braille_la-braille.lo
  CC     coders/coders_cals_la-cals.lo
  CC     coders/coders_caption_la-caption.lo
  CC     coders/coders_cin_la-cin.lo
  CC     coders/coders_cip_la-cip.lo
  CC     coders/coders_clip_la-clip.lo
  CC     coders/coders_cmyk_la-cmyk.lo
  CC     coders/coders_cut_la-cut.lo
  CC     coders/coders_dcm_la-dcm.lo
  CC     coders/coders_dds_la-dds.lo
  CC     coders/coders_debug_la-debug.lo
  CC     coders/coders_dib_la-dib.lo
  CC     coders/coders_dng_la-dng.lo
  CC     coders/coders_dot_la-dot.lo
  CC     coders/coders_dpx_la-dpx.lo
  CC     coders/coders_fax_la-fax.lo
  CC     coders/coders_fd_la-fd.lo
  CC     coders/coders_fits_la-fits.lo
  CC     coders/coders_gif_la-gif.lo
  CC     coders/coders_gradient_la-gradient.lo
  CC     coders/coders_gray_la-gray.lo
  CC     coders/coders_hald_la-hald.lo
  CC     coders/coders_hdr_la-hdr.lo
  CC     coders/coders_histogram_la-histogram.lo
  CC     coders/coders_hrz_la-hrz.lo
  CC     coders/coders_html_la-html.lo
  CC     coders/coders_icon_la-icon.lo
  CC     coders/coders_inline_la-inline.lo
  CC     coders/coders_info_la-info.lo
  CC     coders/coders_ipl_la-ipl.lo
  CC     coders/coders_label_la-label.lo
  CC     coders/coders_mac_la-mac.lo
  CC     coders/coders_magick_la-magick.lo
  CC     coders/coders_map_la-map.lo
  CC     coders/coders_mat_la-mat.lo
  CC     coders/coders_matte_la-matte.lo
  CC     coders/coders_meta_la-meta.lo
  CC     coders/coders_miff_la-miff.lo
  CC     coders/coders_mono_la-mono.lo
  CC     coders/coders_mpc_la-mpc.lo
  CC     coders/coders_mpeg_la-mpeg.lo
  CC     coders/coders_mpr_la-mpr.lo
  CC     coders/coders_msl_la-msl.lo
  CC     coders/coders_mtv_la-mtv.lo
  CC     coders/coders_mvg_la-mvg.lo
  CC     coders/coders_null_la-null.lo
  CC     coders/coders_otb_la-otb.lo
  CC     coders/coders_palm_la-palm.lo
  CC     coders/coders_pango_la-pango.lo
  CC     coders/coders_pattern_la-pattern.lo
  CC     coders/coders_pcd_la-pcd.lo
  CC     coders/coders_pcl_la-pcl.lo
  CC     coders/coders_pcx_la-pcx.lo
  CC     coders/coders_pdb_la-pdb.lo
  CC     coders/coders_pdf_la-pdf.lo
  CC     coders/coders_pes_la-pes.lo
  CC     coders/coders_pict_la-pict.lo
  CC     coders/coders_pix_la-pix.lo
  CC     coders/coders_plasma_la-plasma.lo
  CC     coders/coders_pnm_la-pnm.lo
  CC     coders/coders_preview_la-preview.lo
  CC     coders/coders_ps_la-ps.lo
  CC     coders/coders_ps2_la-ps2.lo
  CC     coders/coders_ps3_la-ps3.lo
  CC     coders/coders_psd_la-psd.lo
  CC     coders/coders_pwp_la-pwp.lo
  CC     coders/coders_raw_la-raw.lo
  CC     coders/coders_rgb_la-rgb.lo
  CC     coders/coders_rla_la-rla.lo
  CC     coders/coders_rle_la-rle.lo
  CC     coders/coders_scr_la-scr.lo
  CC     coders/coders_sct_la-sct.lo
  CC     coders/coders_sfw_la-sfw.lo
  CC     coders/coders_sgi_la-sgi.lo
  CC     coders/coders_stegano_la-stegano.lo
  CC     coders/coders_sun_la-sun.lo
  CC     coders/coders_svg_la-svg.lo
  CC     wand/wand_libMagickWand_la-animate.lo
coders/svg.c:93:10: fatal error: 'librsvg/rsvg.h' file not found
#include "librsvg/rsvg.h"
         ^
  CC     wand/wand_libMagickWand_la-compare.lo
1 error generated.
make[1]: *** [coders/coders_svg_la-svg.lo] Error 1
make[1]: *** Waiting for unfinished jobs....
make: *** [install] Error 2
config.log was copied to /Users/dries/Library/Logs/Homebrew
==> Build Environment
HOMEBREW_VERSION: 0.9.2
HEAD: 20ad5702c5bdb89e7a52c0b7407d58dbbf6a9afd
CPU: quad-core 64-bit arrandale
OS X: 10.8-x86_64
Xcode: 4.4
CLT: 4.4.0.0.1.1249367152
X11: 2.7.2 @ /opt/X11
CC: /usr/bin/clang
CXX: /usr/bin/clang++ => /usr/bin/clang
LD: /usr/bin/clang
CFLAGS: -Os -w -pipe -march=native -Qunused-arguments -mmacosx-version-min=10.8
CXXFLAGS: -Os -w -pipe -march=native -Qunused-arguments -mmacosx-version-min=10.8
CPPFLAGS: -I/usr/local/Cellar/gettext/0.18.1.1/include -isystem /usr/local/include -I/opt/X11/include
CMAKE_PREFIX_PATH: /opt/X11:/opt/X11
LDFLAGS: -L/usr/local/Cellar/gettext/0.18.1.1/lib -L/usr/local/lib -L/opt/X11/lib
MACOSX_DEPLOYMENT_TARGET: 10.8
MAKEFLAGS: -j4
PKG_CONFIG_PATH: /opt/X11/share/pkgconfig:/opt/X11/lib/pkgconfig:/usr/local/Library/Homebrew/pkgconfig
Error: Failed executing: make install (imagemagick.rb:137)
These existing issues may help you:
    https://github.com/mxcl/homebrew/issues/13618
    https://github.com/mxcl/homebrew/issues/13638
Otherwise, this may help you fix or report the issue:
    https://github.com/mxcl/homebrew/wiki/bug-fixing-checklist 
```

目前，我已经没有可以采取的措施了。有人知道这个安装有什么问题吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-01T17:22:03.353

我为此浪费了很多时间。最后我按照这个网站上的说明做了：

[http://robots.thoughtbot.com/post/27985816073/the-hitchhikers-guide-to-riding-a-mountain-lion](http://robots.thoughtbot.com/post/27985816073/the-hitchhikers-guide-to-riding-a-mountain-lion)

而且（似乎为我解决了这个问题的东西）正在运行`brew doctor`并修复每一个问题，直到它不再抱怨为止。现在我已经安装了 imagemagick。希望能帮助到你。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T12:09:31.977

是的我也遇到了这个问题，我认为`make`是冲突的原因。

在安装之前，我使用`brew doctor`检查环境，它显示我以下错误：

```
Your compilers are different from the standard versions for your Xcode.
If you have Xcode 4.3 or newer, you should install the Command Line Tools for
Xcode from within Xcode's Download preferences.
Otherwise, you should reinstall Xcode. 
```

如果先安装Xcode-4.4，再安装osx-GCC-4.2，就会出现这个错误。

我尝试重新安装 Xcode-4.4，但它不起作用。所以我只是直接从源代码安装编译器。

*   curl -O [ftp://ftp.imagemagick.org/pub/ImageMagick/ImageMagick.tar.gz](ftp://ftp.imagemagick.org/pub/ImageMagick/ImageMagick.tar.gz)
*   tar -zxvf ImageMagick.tar.gz
*   cd ImageMagick-6.7.8-8
*   ./configure --prefix=/usr/local
*   制作 && 制作安装

然后 ImageMagick 工作。但这可能会导致文件存储位置有问题，使用`brew doctor`检查时会产生一些警告。

* * *

最近我尝试重置 xcode-path 以解决版本冲突

```
sudo xcode-select -switch /Applications/Xcode.app/Contents/Developer 
```

我认为这可能是解决`make`冲突的一种方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T22:04:41.867

如果有人在使用 macports 而不是 homebrew，则可以使用以下命令安装 ImageMagick（在安装 Xcode 和命令行工具之后）：

```
sudo port install ImageMagick 
```

# sql - 保存数据库的历史数据

> ID：11738401
> 
> 赞同：1
> 
> 时间：2012-07-31T10:48:59.133
> 
> 标签：sql, asp.net, database

我正在创建连接到数据库并显示一些信息的 asp.net 页面。

在我的数据库中，我有`Component`表，每个`Component`都有 integer `Value`。我想存储历史记录，`Component.Value`然后建立一些图表。

什么是最好的方法：
- 在数据库中创建一些档案表
- 在文件中保存数据，`ComponentName.xml`例如：

```
<date>
    <value></value>
</date> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T10:59:27.183

xml 文件肯定会在很短的时间内大幅增长。除非我们每天谈论很少的表格更新或类似情况。

RDBSM 旨在存储和查询数据，因此使用它们应该是正确的方法。如果您使用的是 MS SQL Serve，则可以依靠[更改数据捕获](http://msdn.microsoft.com/en-us/library/bb522489%28SQL.105%29.aspx)机制来完成任务。

或者只是创建您自己的表来存储所有更改，使用触发器来捕获所有 CRUD 操作，然后将这些数据用于您需要的任何内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T10:57:05.193

在数据库中创建一个名为 ArchivedComponents 或 ComponentHistory 的新表。

表结构可能类似于：

*   新存档 ID（整数主键），
*   旧的组件 ID（引用组件的整数外键），
*   值（旧组件的值）

然后，您可以根据此表获取图形信息。

# html - 如何通过 CSS 将图像设置在同一标签中的另一个图像上？

> ID：11738406
> 
> 赞同：0
> 
> 时间：2012-07-31T10:49:09.270
> 
> 标签：html, css, background-image, image

我非常需要以这种方式在一个小按钮图标下设置一个大背景：

```
<img 
src="little-icon.png"
style="background: url('main-image.jpg') no-repeat center; 
margin: auto; padding: 0; 
height: 240px; width: 180px;" 
/> 
```

其中高度和宽度是（大）主背景图像的参数。简而言之：我需要将 img.src 设置为可点击图标，并将其背景图像设置为大图像。这对于包装 img 的 div 标签来说非常简单。但由于其他情况，我必须在同一个 img 标签中完成所有操作。

上面的代码完成了它的工作，但是图标被变形为背景的大小。有机会做我需要做的事吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T11:01:27.830

不，您无法在一个 img 标签内执行此操作，因为背景和图像本身被分配了相同的高度和宽度，因此它们将始终相互重叠并被拉伸或收缩到您指定的尺寸。您可以做的是将图像合并为一个，这可能是您唯一的机会，以防您真的被单标签政策所困扰。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T11:05:54.040

当然，当您将高度和宽度样式应用于 img 标签时，它将应用于主图像，即 src 中的图像。您只能控制该区域内的背景位置。

根据问题，如果您想要下面的大背景，小图标，您需要创建具有透明背景的图标的大图像。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T11:13:06.070

我认为有更好的方法可以做到这一点，但如果你绝对必须按照自己的方式去做，请使用填充 - 使用 CSS 设置图像的宽度和高度，肯定会使它变形......

[此处的示例](http://jsfiddle.net/Jayx/yp3Wx/)（使用 :hover 作为解释方式）

# c# - 错误 MSB4018：“ResolveSdks”单体开发

> ID：11738408
> 
> 赞同：3
> 
> 时间：2012-07-31T10:49:20.167
> 
> 标签：c#, android, .net, xamarin.android, monodevelop

我在monodevelop中有以下错误：

```
C:\Program Files (x86)\MSBuild\Novell\Novell.MonoDroid.Common.targets(2,2): Error MSB4018: The "ResolveSdks" task failed unexpectedly.
System.ArgumentNullException: Value cannot be null.
Parameter name: path1
   at System.IO.Path.Combine(String path1, String path2, String path3)
   at Novell.MonoDroid.Build.Tasks.ResolveSdks.Execute()
   at Microsoft.Build.BackEnd.TaskExecutionHost.Microsoft.Build.BackEnd.ITaskExecutionHost.Execute()
   at Microsoft.Build.BackEnd.TaskBuilder.ExecuteInstantiatedTask(ITaskExecutionHost taskExecutionHost, TaskLoggingContext taskLoggingContext, TaskHost taskHost, ItemBucket bucket, TaskExecutionMode howToExecuteTask, Boolean& taskResult) (MSB4018) (test) 
```

我该如何解决？更改版本不起作用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-15T16:11:42.813

你卸载 jdk7 和 jdk8 并安装 jdk 6

# r - 在 Windows 7 x64 上构建 RInside 示例的多定义错误

> ID：11738409
> 
> 赞同：1
> 
> 时间：2012-07-31T10:49:24.987
> 
> 标签：r, rcpp, rinside

我正在尝试使用 RTools 中的 g++ 从 Windows 7 x64 上的 RInside\examples\standard 目录构建 rinside_sample1.cpp，方法如下：

```
set RCPP=%R_HOME%\library\Rcpp
set RINSIDE=%R_HOME%\library\RInside
g++ -c -m64 rinside_sample1.cpp -I %RINSIDE%\include -I %RCPP%\include -I %R_HOME%\include
g++ -m64 rinside_sample1.o -o rinside_sample1.exe -L %RINSIDE%\libs\x64 -l RInside -L %RCPP%\libs\x64 -l Rcpp -L %R_HOME%\bin\x64 -l R 
```

链接导致多重定义错误：

```
d000026.o:(.idata$5+0x0): multiple definition of `__imp__ZTVN4Rcpp7RObjectE'
d000019.o:(.idata$5+0x0): first defined here
d000026.o:(.idata$6+0x0): multiple definition of `__nm__ZTVN4Rcpp7RObjectE'
d000019.o:(.idata$6+0x0): first defined here
collect2: ld returned 1 exit status 
```

**然而 rinside_sample0.cpp 的类似构建过程成功。有人知道解决方案吗？**

rinside_sample1.cpp 的问题似乎是由于 Rcpp::NumericMatrix 和 Rcpp::NumericVector 的使用而出现的。

rinside_sample0.cpp 代码：

```
// -*- mode: C++; c-indent-level: 4; c-basic-offset: 4;  tab-width: 8; -*-
//
// Simple example showing how to do the standard 'hello, world' using embedded R
//
// Copyright (C) 2009 Dirk Eddelbuettel 
// Copyright (C) 2010 Dirk Eddelbuettel and Romain Francois
//
// GPL'ed 

#include <RInside.h>                    // for the embedded R via RInside

int main(int argc, char *argv[]) {

    RInside R(argc, argv);              // create an embedded R instance 

    R["txt"] = "Hello, world!\n";   // assign a char* (string) to 'txt'

    R.parseEvalQ("cat(txt)");           // eval the init string, ignoring any returns

    exit(0);
} 
```

rinside_sample1.cpp 代码：

```
// -*- mode: C++; c-indent-level: 4; c-basic-offset: 4; tab-width: 8; -*-
//
// Simple example with data in C++ that is passed to R, processed and a result is extracted
//
// Copyright (C) 2009         Dirk Eddelbuettel 
// Copyright (C) 2010 - 2011  Dirk Eddelbuettel and Romain Francois
//
// GPL'ed 

#include <RInside.h>                            // for the embedded R via RInside

Rcpp::NumericMatrix createMatrix(const int n) {
    Rcpp::NumericMatrix M(n,n);
    for (int i=0; i<n; i++) {
        for (int j=0; j<n; j++) {
            M(i,j) = i*10 + j; 
        }
    }
    return(M);
}

int main(int argc, char *argv[]) {

    RInside R(argc, argv);                      // create an embedded R instance 

    const int mdim = 4;                         // let the matrices be 4 by 4; create, fill 
    R["M"] = createMatrix(mdim);                // then assign data Matrix to R's 'M' var

    std::string str = 
        "cat('Running ls()\n'); print(ls()); "
        "cat('Showing M\n'); print(M); "
        "cat('Showing colSums()\n'); Z <- colSums(M); print(Z); "
        "Z";                     // returns Z

    Rcpp::NumericVector v = R.parseEval(str);   // eval string, Z then assigned to num. vec              

    for (int i=0; i< v.size(); i++) {           // show the result
        std::cout << "In C++ element " << i << " is " << v[i] << std::endl;
    }
    exit(0);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T11:34:39.240

您是否有理由不使用我提供的 Makefile 并且哪个有效？说啊

```
 make rinside_sample1 
```

在我的机器上，这导致

```
edd@max:~/svn/rinside/pkg/inst/examples/standard$ make rinside_sample1
g++ -I/usr/share/R/include -I/usr/local/lib/R/site-library/Rcpp/include \
   -I/usr/local/lib/R/site-library/RInside/include -O3 -pipe -g -Wall  \
   rinside_sample1.cpp  -L/usr/lib/R/lib -lR  -lblas -llapack \
   -L/usr/local/lib/R/site-library/Rcpp/lib \
   -lRcpp -Wl,-rpath,/usr/local/lib/R/site-library/Rcpp/lib \
   -L/usr/local/lib/R/site-library/RInside/lib \
   -lRInside -Wl,-rpath,/usr/local/lib/R/site-library/RInside/lib \
   -o rinside_sample1
edd@max:~/svn/rinside/pkg/inst/examples/standard$ 
```

之后我们可以做

```
edd@max:~/svn/rinside/pkg/inst/examples/standard$ ./rinside_sample1
Running ls()
[1] "argv" "M"   
Showing M
     [,1] [,2] [,3] [,4]
[1,]    0    1    2    3
[2,]   10   11   12   13
[3,]   20   21   22   23
[4,]   30   31   32   33
Showing colSums()
[1] 60 64 68 72
In C++ element 0 is 60
In C++ element 1 is 64
In C++ element 2 is 68
In C++ element 3 is 72
edd@max:~/svn/rinside/pkg/inst/examples/standard$ 
```

它在 Windows 上的工作原理相同，但你需要这样做

```
make -f Makefile.win rinside_sample1 
```

# python - 在python中单击单元测试保存按钮

> ID：11738416
> 
> 赞同：1
> 
> 时间：2012-07-31T10:49:40.333
> 
> 标签：python

我正在尝试学习 python 单元测试。我正在寻找一种对保存按钮单击进行单元测试的最佳方法。保存按钮单击函数有两个参数，一个是实例，另一个是实例列表。我想通过比较作为参数传递的数据和单击保存按钮后从数据库中检索到的数据来对保存按钮单击进行单元测试。谁能帮我找出最好的单元测试方法来测试我的保存按钮点击

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T10:59:32.363

python 有一个内置的 unittest 模块。

[http://docs.python.org/library/unittest.html](http://docs.python.org/library/unittest.html)

# c# - 方法重载解析如何工作（LINQ Where 扩展方法）？

> ID：11738417
> 
> 赞同：7
> 
> 时间：2012-07-31T10:49:39.793
> 
> 标签：c#, .net, linq, overloading, overload-resolution

如果我有一个类型的变量，我有四个可用的命名空间`IQueryable<T>`扩展方法：`Where``Systm.Linq`

```
public static IQueryable<T> Where<T>(this IQueryable<T> source,
    Expression<Func<T, bool>> predicate);
public static IQueryable<T> Where<T>(this IQueryable<T> source,
    Expression<Func<T, int, bool>> predicate);
public static IEnumerable<T> Where<T>(this IEnumerable<T> source,
    Func<T, bool> predicate);
public static IEnumerable<T> Where<T>(this IEnumerable<T> source,
    Func<T, int, bool> predicate); 
```

（最后两个因为`IQueryable<T>`继承自`IEnumerable<T>`。）

如果我使用类型的变量`ObjectQuery<T>`（在 namespace 中`System.Data.Objects`），我有五个`Where`可用的重载，即上面的四个（因为`ObjectQuery<T>`实现`IQueryable<T>`和`IEnumerable<T>`其他接口）以及这个类的实例方法：

```
public ObjectQuery<T> Where(string predicate,
    params ObjectParameter[] parameters); 
```

如果我在使用其中一个时犯了同样的编程错误，`IQueryable<T>`或者`ObjectQuery<T>`我得到了非常不同的编译器错误。这是一个示例程序（VS2010 SP1中的标准C#控制台应用程序模板+`System.Data.Entity.dll`程序集添加到项目引用中，编译器错误在四个示例下面的注释中）：

```
using System.Data.Objects;
using System.Linq;

namespace OverloadTest
{
    public class Test
    {
        public int Id { get; set; }
    }

    class Program
    {
        static void Main(string[] args)
        {
            IQueryable<Test> queryable = null;
            ObjectQuery<Test> objectQuery = null;

            var query1 = queryable.Where(t => t.Name == "XYZ");
            // no definition for "Name" in class OverloadTest.Test

            var query2 = queryable.Where(t => bla == blabla);
            // "bla", "blabla" do not exist in current context

            var query3 = objectQuery.Where(t => t.Name == "XYZ");
            // Delegate System.Func<Overload.Test,int,bool>
            // does not take 1 argument

            var query4 = objectQuery.Where(t => bla == blabla);
            // Delegate System.Func<Overload.Test,int,bool> 
            // does not take 1 argument
        }
    }
} 
```

“Squiggles”在编译器中看起来也不同：

![在此处输入图像描述](../Images/133a3d76c0035524e3a7842fc10d2055.png)

我理解前两个错误。但是为什么编译器显然想`Func<T, int, bool> predicate`在最后两个示例中使用重载号 4（带有 ）并且没有告诉我“名称”没有在类中定义`Test`并且“bla”和“blabla”不存在在当前情况下？

我曾期望编译器可以安全地排除重载号 5（我不传入 a `string`as 参数）和重载号 2 和 4（我不传入带有*两个*参数的 lambda 表达式`(t,i) => ...`），但我的期望没有似乎是正确的。

作为旁注：我在查看这个问题时遇到了[这个问题](https://stackoverflow.com/questions/11729384/returning-a-collection-of-objects-where-an-objects-property-matches-any-property)。提问者在那里说问题中的第四个查询无法编译（它在上面的示例 3 和 4 中完全有编译器错误），但是这个查询正是他的问题的解决方案，对我来说似乎有些东西（一个变量或属性名称？）在查询中写错了（虽然他没有确认这一点）但是这个编译器错误并没有给出有用的指示什么是错误的。

**编辑**

参考下面马丁哈里斯的非常有用的评论：

例如，当我将鼠标悬停在曲线上时`query4`，错误“ *Delegate System.Func does not take 1 argument ”是工具提示窗口中显示的错误。*在编译器输出窗口中实际上按此顺序有四个错误：

*   *委托 System.Func 不接受 1 个参数*
*   *“lambda 表达式”无法转换为“字符串”，因为“字符串”不是委托类型*
*   *当前上下文中不存在名称“bla”*
*   *当前上下文中不存在名称“blabla”*

但是为什么编译器不抱怨前两个使用的示例的第一个错误`IQueryable<T>`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T15:09:13.210

请读到最后。

实际上这是因为您的代码存在编译器时间错误。

编译器通过查看您的代码来检测正确的扩展方法。在这种情况下，它应该接受一个`Test`参数并返回`bool`参数。由于无法编译您的 linq 表达式，因此无法检测到正确的扩展方法，并且编译器假定它找到的第一个扩展方法是您想要的。

顺便说一句，如果您修复错误，例如

```
var query3 = objectQuery.Where(t => t.Id == 1) 
```

编译器将使用

```
public static IQueryable<T> Where<T>(
       this IQueryable<T> source,
       Expression<Func<T, bool>> predicate
); 
```

现在你应该想知道为什么它会跳过 Enumerable 上的方法。这是因为`ObjectQuery<T>`类直接实现了'IQueryable'，但是`IEnumerable<T>`因为`IQueryable<T>`.

您可以在下面看到对象层次结构
![对象层次结构](../Images/998f1610db3ab4310ec8f4e9f0f42c59.png)

# python - 使用低级 python 邮件 api (Google App Engine) 发送邮件

> ID：11738419
> 
> 赞同：1
> 
> 时间：2012-07-31T10:49:48.567
> 
> 标签：python, google-app-engine

我需要在电子邮件中嵌入图像，但 GAE 电子邮件 api 不允许我这样做。所以我需要使用低级python api，但我不知道如何使用它进行身份验证。是否可以？如果它可能的简单示例（例如发送文本/纯电子邮件）就足够了。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T11:31:30.257

在 GAE 中，使用 Mail API，您可以使用`message.html`而不是嵌入图像`message.body`。这是相关的文档[电子邮件字段](https://developers.google.com/appengine/docs/python/mail/emailmessagefields)

# c# - ModelBinder 验证在 getter 上使用反射中断

> ID：11738421
> 
> 赞同：1
> 
> 时间：2012-07-31T10:50:01.057
> 
> 标签：c#, reflection, asp.net-mvc-4, asp.net-web-api, model-binding

我遇到了一个似乎与反射和模型绑定器验证有关的问题，`FormatterParameterBinding.ExecuteBindingAsync(..)`特别是，虽然我可以使用方法来做我想做的事情，但如果我可以使用属性，我会更喜欢它。

在这里，我正在寻找对模型绑定器验证过程的一些见解，为什么我无法做我想做的事情以及如何解决问题或解决问题。

**设置**

```
public class ModelBindingValidationBreaker
{
    public ModelBindingValidationBreaker()
    {
        Properties = new List<string>();
    }

    public int A { get; set; }
    public int B { get; set; }
    public IList<string> Properties { get; set; }

    /*// Uncomment to break the model binder validation!
    public IList<PropertyInfo> PropertyInfos
    {
        get
        {
            return GetType()
                .GetProperties()
                .Where(pi => Properties.Contains(pi.Name))
                .ToList();
        }
    }//*/

    public IList<PropertyInfo> GetPropertyInfos()
    {
        return GetType()
            .GetProperties()
            .Where(pi => Properties.Contains(pi.Name))
            .ToList();
    }

    public IList<int> LetterCounts
    {
        get
        {
            return Properties.Select(p => p.Length).ToList();
        }
    }
} 
```

和一个具有这样定义的发布操作的控制器

```
public void Post(ModelBindingValidationBreaker breaker){...} 
```

用这种 json 调用它：

```
{
    "Properties": [
        "A"
    ],
    "A": 1,
    "B": 2
} 
```

如果您进入该操作，您可以看到断路器已正确实例化，您可以`GetPropertyInfos()`毫无问题地调用。

**它是如何破裂的**

但是，如果取消注释 PropertyInfos 属性，模型绑定器验证会中断。我添加了一个简单的跟踪器来解决这个问题。它显示以下相关输出：

```
System.Web.Http.Action: ApiControllerActionSelector;SelectAction;Selected action 'Post(ModelBindingValidationBreaker breaker)'
System.Web.Http.ModelBinding: HttpActionBinding;ExecuteBindingAsync;
System.Web.Http.ModelBinding: FormatterParameterBinding;ExecuteBindingAsync;Binding parameter 'breaker'
System.Net.Http.Formatting: JsonMediaTypeFormatter;ReadFromStreamAsync;Type='ModelBindingValidationBreaker', content-type='application/json'
System.Net.Http.Formatting: JsonMediaTypeFormatter;ReadFromStreamAsync;Value read='OverPostCount.Models.ModelBindingValidationBreaker'
System.Web.Http.ModelBinding: FormatterParameterBinding;ExecuteBindingAsync;
System.Web.Http.ModelBinding: HttpActionBinding;ExecuteBindingAsync;
System.Web.Http.Controllers: CustomController;ExecuteAsync;
System.Net.Http.Formatting: DefaultContentNegotiator;Negotiate;Type='HttpError', formatters=[JsonMediaTypeFormatterTracer, FormUrlEncodedMediaTypeFormatterTracer, FormUrlEncodedMediaTypeFormatterTracer] 
```

当您排除有问题的 get_PropertyInfos 时，其中包含此行：

```
System.Web.Http.ModelBinding: FormatterParameterBinding;ExecuteBindingAsync;Parameter 'breaker' bound to the value 'OverPostCount.Models.ModelBindingValidationBreaker' 
```

在 Properties 上添加`DataContract`, 和相关属性`[IgnoreDataMember]`并不能解决问题。`[Bind(Exclude="Properties")]`从 mvc 命名空间也没有。Linq 似乎不是问题，因为`LetterCount`它不会破坏模型绑定器验证。

**我的问题**

1.  为什么 PropertyInfos getter 会破坏模型绑定器验证器？
2.  这是 Asp.NET web-api 中的错误吗？
3.  有没有办法通过属性、自定义模型绑定器验证器、服务或类似来防止这种破坏？

基本上我不想为整个类或控制器关闭模型绑定验证，但如果我可以为 Properties 属性关闭它，那就太好了！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T08:39:28.073

作为一般规则，您应该避免使用像 PropertyInfos 这样具有其他复杂类型的属性的复杂类......在用于模型绑定的类中，但是您应该只使用包含模型绑定过程所需的属性的简单类，此外整个对象图不应包含循环。模型绑定过程分析用于不同目的的属性类型（验证属性等），我可以重新分析包含在 eac 属性类型中的子属性......所以复杂的 .net 类包含循环和许多其他.net 类型可能会破坏它。尝试将属性 PropertyInfos 设为内部或将其转换为方法，以便任何模型绑定器组件都不会对其进行处理。

# javascript - D3 - 初始化后第一次转换的问题

> ID：11738424
> 
> 赞同：0
> 
> 时间：2012-07-31T10:50:13.063
> 
> 标签：javascript, d3.js

我创建了这个 jsbin [http://jsbin.com/ibewux/3/edit](http://jsbin.com/ibewux/3/edit)来显示转换的奇怪行为。

当图表初始化时，它会正确显示数据（见下表）。

如果我尝试通过下拉菜单更改图表类型，则会交换一些系列；发生这种情况后，该系列不再交换。

如果您单击 updateChartData 按钮，也会发生同样的事情；第一次它将与表中显示的数据相比交换系列。

因此，似乎只有初始化后的第一次转换才会受到这种不需要的交换的影响。

这是一小段代码，想知道您是否能找出发生这种情况的原因。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T15:44:46.390

当`isVerticalChart`为真时，您正在使用带域的序数比例`svg.pointsNames`（这似乎是形式为 的字符串数组`"Col " + i`）：

```
x = d3.scale.ordinal().domain(svg.pointsNames); 
```

但是，然后您继续使用具有此比例的基准索引，而不是这些字符串：

```
.attr("x", function(d, i) { return isVerticalChart ? x(i) : x(d.y0 - d.size); }) 
```

我认为您应该将一个字符串从域传递到此处的比例，以避免您看到的奇怪行为。

它仅在目前*有效*，因为如果您将密钥传递给以前从未见过的序数比例，它会将其添加到域中。

可能还有其他问题，但希望这能让你更接近。

# crystal-reports - 为什么我的 Crystal Report 在使用报表查看器时打印为纵向？

> ID：11738428
> 
> 赞同：2
> 
> 时间：2012-07-31T10:50:23.573
> 
> 标签：crystal-reports

我有一个在 Crystal Reports for Visual Studio 2010 中创建的报告。

报告设置为横向。如果我创建报告的一个实例，用数据加载它并使用以下代码打印它，它会按预期以横向打印。

```
 var rpt = new MyReport();
        rpt.SetDataSource(dataSource);
        rpt.PrintToPrinter(1, false, 1, int.MaxValue); 
```

如果我使用以下代码在 WPF 的 Crystal Report 查看器控件中查看报表，则报表将在横向模式下正确显示。

```
 var rpt = new MyReport();
        rpt.SetDataSource(dataSource);
        ReportViewer.ViewerCore.ReportSource = rpt; 
```

但是，如果我单击 Crrystal Report Viewer 控件中的“打印”按钮，打印出来的是纵向的，截断了报告的右侧，而不是从上到下填充页面。

有解决办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T16:18:48.737

我不确定是否有解决此问题的方法，但似乎有些人遇到了同样的问题。我发现了一些可能有帮助的链接。

在[这个链接](http://social.msdn.microsoft.com/Forums/en/vscrystalreports/thread/16ecedb6-8888-4385-8b78-bfe235afd33a)上（大约一半），一个人建议设置您的默认打印机 Microsoft XPS Document Writer。不知道为什么会这样，但值得一试。

这第二个[链接](http://www.xtremevbtalk.com/archive/index.php/t-168179.html)似乎更有希望。他们提到报表查看器有很多错误，通过使用 ReportDocument 可以覆盖报表的 PaperOrientation 属性并将其手动设置为横向。

让我知道这些链接是否有帮助。

# powershell - 在从本地用户组中删除之前如何确保用户的存在？

> ID：11738433
> 
> 赞同：1
> 
> 时间：2012-07-31T10:50:35.730
> 
> 标签：powershell, powershell-2.0

我正在尝试使用 powershell 脚本替换本地组中的用户。

```
Function ReplaceUserInGroup {

    Param (
        [string]$Group,
        [string]$OldUserName,
        [string]$NewUserName        
    )

    [string]$computer=$env:ComputerName

    If($Group -And $OldUserName -And $NewUserName ) {
        $LocalGroup = [ADSI]"WinNT://$computer/$Group,group"

        $LocalGroup.Add("WinNT://$computer/$NewUserName")

        $LocalGroup.Remove("WinNT://$OldUserName")
    }
    Else {
            Write-Warning " ReplaceUserInGroup : Some or all the parameters are empty"
    }

} 
```

此脚本的问题是，如果本地组中不存在 OldUserName，它将失败。

我想在从本地组中删除用户之前检查用户是否存在于组中。

换句话说，我想在一些 if 条件下包装 Remove 函数行，如下所示。

```
If (UserName exists in Localgroup) {
    $LocalGroup.Remove("WinNT://$OldUserName")
} 
```

如何检查用户是否存在？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T12:08:47.580

```
 $members = $LocalGroup.psbase.Invoke("Members") | Foreach-Object  {$_.GetType().InvokeMember("Name", 'GetProperty', $null, $_, $null) }

    if($members -contains $OldUserName)
    {
        "$OldUserName is member"
    }
    else
    {
        "$OldUserName is NOT a member"
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-02-13T11:40:33.057

```
 $objOu = [ADSI]"WinNT://${env:Computername}"
    $localUsers = $objOu.Children | where {$_.SchemaClassName -eq 'user'}  | % {$_.name[0].ToString()}

    # Ensure we have local user BOB
    if($localusers -contains "BOB" ){
       Write-Host "local user ${env:Computername}/BOB already exists"
    }
    else{
       Write-Host "Creating local user: /BOB"
       NET USER BOB "qwefgnbm" /ADD
    } 
```

这将检查用户是否存在，如果不存在则添加一个。它可能有用。

# android - 如何将图像设置为相对布局背景

> ID：11738434
> 
> 赞同：2
> 
> 时间：2012-07-31T10:50:36.353
> 
> 标签：android, android-relativelayout

我有一个`RelativeLayout`2 `Button`s 里面。

一个`Button`有`layout_alignParentLeft="true"`属性，另一个按钮有`layout_alignParentRight="true"`

我想在我的 RelativeLayout 上设置一个背景，在中间显示一个图像。`play.9.png`我的drawable中有一个并使用以下代码：

```
<RelativeLayout
    android:id="@+id/relativeLayout12"
    android:layout_width="fill_parent"
    android:layout_height="70dp" 
    android:background="@drawable/play" // background line
 >

    <Button
        android:id="@+id/bAbout"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:text="but1" />

    <Button
        android:id="@+id/bSync"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:text="but2" />
</RelativeLayout> 
```

但是当我使用背景线时，我会`Button`错过他们的位置

见下图 ![在此处输入图像描述](../Images/cd872af8274f1be349026d45b325bdc8.png)

但我希望我`RelativeLayout`是这样的：

![在此处输入图像描述](../Images/67edde4d2b93bbd39ecbd5592f182922.png)

怎么了？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-31T11:22:21.830

最后我做到了，伙计们，我使用了这段代码：

```
<RelativeLayout
    android:id="@+id/relativeLayout12"
    android:layout_width="fill_parent"
    android:layout_height="70dp" 
    android:background="@drawable/play" // background line
 >

    <Button
        android:id="@+id/bAbout"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:text="but1" />

    <ImageView
         android:layout_width="fill_parent"
         android:layout_height="match_parent"
         android:scaleType="fitXY"
         android:src="@drawable/play" />

    <Button
        android:id="@+id/bSync"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:text="but2" />
</RelativeLayout> 
```

我的结果是：

![在此处输入图像描述](../Images/2ebcecca3379007c9c5c853e2cdf69a6.png)

这有效。谢谢大家

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T10:53:12.907

```
<RelativeLayout
android:id="@+id/relativeLayout12"
android:layout_width="fill_parent"
android:layout_height="70dp" 
android:background="@drawable/play" // background line
>

<Button
    android:id="@+id/bAbout"
    android:layout_width="wrap_content"
    android:layout_height="fill_parent"
    android:layout_alignParentBottom="true"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:text="but1" />

<Button
    android:id="@+id/bSync"
    android:layout_width="wrap_content"
    android:layout_height="fill_parent"
    android:layout_alignParentBottom="true"
    android:layout_alignParentRight="true"
    android:layout_alignParentTop="true"
    android:text="but2" />
</RelativeLayout> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T10:54:42.103

我认为你应该删除

```
 android:layout_alignParentBottom="true"
 android:layout_alignParentTop="true" 
```

从两个按钮开始，并将按钮高度设置为“fill_parent”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-07T11:17:59.520

试试这个。

```
RelativeLayout rLayout = (RelativeLayout) findViewById (R.id.rLayout);
   Resources res = getResources();
   Drawable drawable = res.getDrawable(R.drawable.newImage);added to the res folder

    rLayout.setBackground(drawable); 
```

# windows-8 - VS2012/ Blend 5：调试设计视图中发生的异常（仅）

> ID：11738436
> 
> 赞同：7
> 
> 时间：2012-07-31T10:50:44.010
> 
> 标签：windows-8, microsoft-metro, visual-studio-2012, blend, design-time

我正在使用 C# 和 XAML 开发 Metro 风格的应用程序（适用于 Windows 8）。我已将我的视图模型设置为用作设计时数据上下文，如下所示：

```
xmlns:vm="using:hub.ViewModels"
d:DataContext="{d:DesignInstance IsDesignTimeCreatable=True, Type=vm:ViewModels 
```

我的应用程序在运行时似乎运行良好，但在 VS 2012 和 Blend 的设计视图中，我偶尔会收到以下（无用）错误消息：

```
An Exception was thrown. TargetException: Error in the application.
Stacktrace
at System.ComponentModel.PropertyChangedEventHandler.Invoke(Object sender, PropertyChangedEventArgs e)
InnerException: None 
```

这只*发生*在设计视图中——这意味着我不能围绕我的所有 INotifyPropertyChanged() 事件设置断点。

调试设计时错误的最佳方法是什么？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-08-03T23:18:51.900

如果这种情况始终或半一致地发生，您可以将调试器附加到 XAML 设计器：

1.  启动 Visual Studio；打开您的项目并打开一个 XAML 文件，导致 XAML 设计器加载

2.  启动 Visual Studio 的第二个实例。打开您的项目，但确保没有打开任何 XAML 文档。

3.  确保禁用“仅我的代码”：从“**工具**”菜单中，选择“**选项**” 。选择**调试**类别。在“**常规”页面中，确保未选中****“仅启用我的代码**”旁边的复选框。

4.  从**Debug**菜单中，选择**Exceptions...**并选中**Common Language Runtime Exceptions旁边的****Thrown**复选框。这将启用对所有 CLR 异常的第一次机会处理。如果您知道异常的特定类型，则可以仅针对该类型启用首次机会处理。

***   从**Debug**菜单中，选择**Attach to Process**。在**Attach to:**字段中，单击**Select...**并检查列表中的**Managed (v4.5, v4.0)**条目，然后单击**OK**。

    这是必要的，因为如果调试器在进程执行本机代码时附加，则调试器可能会将进程误检测为本机进程。如果您的项目包含本机代码，您还需要选中列表中的本**机**复选框（您可以同时调试托管代码和本机代码）。

    *   在**可用进程**列表框中，找到与您的项目对应的**xdesproc.exe ，然后单击****附加**。

    如果有多个进程（通常是因为您打开了多个项目或者因为设计器正在重新加载或最近重新加载），则可能很难确定哪个设计器进程属于哪个 Visual Studio 实例。连接到所有这些通常是最简单的。[Process Explorer](http://technet.microsoft.com/en-us/sysinternals/bb896653.aspx)之类的工具可以帮助您确定哪个设计器进程属于哪个 Visual Studio 实例。

    注意：不要将调试器附加到属于您用于调试的同一 Visual Studio 实例的设计器进程 (xdesproc)：这样做可能会导致 Visual Studio 挂起。您必须始终使用两个不同的 Visual Studio 实例。

    *   做任何你需要做的事情来重现这个错误。当它发生时，调试器将在抛出异常的地方中断。调试器应该为您的程序集加载符号。** 

 *** * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-06-22T20:18:12.763

我在寻找有关如何调试设计器时间实例问题的信息时来到这里，尽管我没有遇到与 rikkit 相同的问题。但是......我正在分享相关问题的解决方案，以防其他人也遇到同样的问题：

确保将“启用/禁用项目代码”切换设置为“启用”...在 VS/Blend 2015 中，它是 XAML 编辑器下方的一个小图标，如下 [所示](http://i.stack.imgur.com/BxQTs.png)。

如果它被禁用，这可能是您的设计时实例似乎无法正常工作的原因。

此外，如果它被禁用并且您尝试使用第二个 VS 实例进行调试，那么当您附加到 XDesProc 时，您在代码隐藏中设置的任何断点都会报告它们“当前不会被命中。[因为]没有符号被为此文档加载”。您可能认为您需要以某种方式加载符号，但如果您打开“模块”窗口尝试这样做，您甚至不会在列表中看到您的模块。

由于此设置被禁用，我在这个问题上浪费了几个小时。希望这可以帮助其他人不这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T23:09:32.703

我不确定，但我相信您可以检查[IsInDesignModeProperty](http://msdn.microsoft.com/en-us/library/system.componentmodel.designerproperties.isindesignmodeproperty.aspx)字段。我记得有时必须在 WinForms 上这样做。

另请查看此链接[Troubleshooting WPF Designer Load Failures](http://msdn.microsoft.com/en-us/library/bb546934%28v=vs.90%29.aspx)**

# jquery - jquery 选择具有某些属性值的元素

> ID：11738437
> 
> 赞同：-1
> 
> 时间：2012-07-31T10:50:55.300
> 
> 标签：jquery, jquery-selectors

我想选择使用属性值的元素，但是，具有此值的属性可以是任何东西，例如。href，动作，ID。那么，我该如何选择这些元素呢？

**更新：** 事实上，我在这个问题中找不到任何示例，但似乎需要发布一些代码来清除问题。所以我试试。有一个包含引用属性的 JSON 格式数据。我需要找到包含此参考的元素。但是，被引用的元素不包含引用属性，引用可以是a标签元素的href，也可以是表单的动作，大多数情况下，引用的值会出现在一个以上的元素中页。

以下代码试图找到这些元素

```
if(typeof reference != 'undefined'){
   $('[href="+reference+"]')
   $('[action="+reference+"]')
} 
```

我可以用一条线来做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T11:37:44.193

我认为您追求的是一种选择具有特定值的*任何属性的元素的方法。*

没有通配符方法来指定属性的名称（据我所知），但是如果您可以处理列出可能的属性名称（正如您用代码暗示的那样），那么这样做的方法就是这样：

```
var selecteds = $(
    '[href="' + reference + '"]' + 
    ', [action="' + reference + '"]' + 
    ', [class="' + reference + '"]' +

); 
```

...等等

# vba - 在 vba access 2007 中使用 .edit 更新多行

> ID：11738441
> 
> 赞同：0
> 
> 时间：2012-07-31T10:51:20.730
> 
> 标签：vba, ms-access

我希望我能正确地问这个问题。我在表单上有一个列表框（访问 2007）并将其设置为“简单”，以便我可以多选。我正在尝试根据列表框中的选择更新表中的多个列。我有几个文本框，我想将它们用作更新表格的信息。我有一个循环，无论选择了多少项目，它都只更新表中的第一条记录。我想我明白为什么它只更新我循环中的第一条记录，但不确定

```
Dim db  As DAO.Database
Dim rs  As DAO.Recordset

Set db = CurrentDb()
Set rs = db.OpenRecordset("Table1", dbOpenDynaset)

Dim i As Variant

    For Each i In Listbox.ItemsSelected

    With rs
    .Edit

     !Col1 = Me.Textbox1
     !Col2 = Me.Textbox2
     !Col3 = Me.Textbox3

    .Update

    End With
    Next 
```

我认为这是因为我没有在循环中指定要更新表的“位置”，但我不知道如何在这个循环中执行此操作。我将在列表框中（位于位置 1、3 和 4）中有 3 列，所有这些列都需要包含在内，以指定表中需要更新的记录。我也尝试过使用带有 DoCmd.RunSql 的 sql 查询，但似乎无法更改 ListIndex 中间查询的焦点。为我缺乏知识而道歉，我对视觉基础很陌生。**请帮忙**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T13:05:44.673

如果我理解正确，我将如何尝试的简化示例：

```
Sub MultiSelect_Listbox()

Dim lCnt as Long
dim lID as long     
dim sSQL_Update as string    

dim sText_1 as String
dim sText_2 as String
dim sText_3 as String

dim bSuccess as Boolean

sText_1 = me.txt_Textbox_1
sText_2 = me.txt_Textbox_2
sText_3 = me.txt_Textbox_3    

With Me.lst_Listbox
    For lCnt = 1 To .ListCount
        If .Selected(lCnt) Then
            lID = .Column(0, lCnt - 1)
            'Example update for 1 column
            sSQL_Update = "UPDATE T_TABLE SET COL_TEXT_1 = '" & sText_1 & "' WHERE ID = " & lID & ";"
            bSuccess = Update_Statement(sSQL_Update)
        End If
    Next
End With
End Sub

Public Function Update_Statement(sUpdate_Stmt) As Boolean

Dim db                          As Database

Set db = CurrentDb
db.Execute (sUpdate_Stmt)
Update_Statement = True

End Function 
```

# javascript - 我该如何组织这个逻辑

> ID：11738442
> 
> 赞同：-2
> 
> 时间：2012-07-31T10:51:25.980
> 
> 标签：javascript, ruby-on-rails, ajax

请帮帮我！！

我想创建可编辑的数据表。表格顶部将是一个“添加”按钮，它使用 javascript 将行添加到表格中。在每一行中应该是按钮（链接）“保存”和“删除”。

如何向服务器发送 post 请求？

对不起我的迟钝..

在 application.js 我有这样的功能

```
function AddElementsToPage(elements) {
/*elements - is array with name elements whose will be add to page*/    
this.add_row_to_data_table = function(obj,attributes,selector_table){
    last_row_of_table = selector_table.find('tbody tr').last();
    var new_row = "<tr><th scope='row'></th>";

    if ($.isEmptyObject(last_row_of_table.html()))
    {
        $.each(attributes, function(index, item){
            input_tag = "<input id=\""+obj+"_"+item+"\" name=\""+obj+"["+item+"]\" size=\"10\"  type=\"text\" />";
            new_row = new_row + "<td>"+input_tag+"</td>";
        })
        alert(new_row);
        selector_table.append(new_row+"</tr>");
    }else
    {
        alert("not empty");
    }

} 
```

我的控制器动作新

```
def new
 @table_row = SchOfWorkInformation.new
respond_to do |format|
  format.js do
    render :action => 'new'
  end
end
end 
```

我的 new.js 文件

```
var obj = new AddElementsToPage();

obj.add_row_to_data_table("sch_of_working",["date","hour"], $('.data_table')) 
```

我的 index.haml

```
 = link_to content_tag('span', "Add" , :class=>"add"),   new_sch_of_work_information_path, :remote => true
 %table{:border=>"1", :class=>"data_table", :style=>"width:450px"}
    %thead
      %th{:style=>"width:5%;"} №
      %th{:style=>"width:10%;"} Date
      %th{:style=>"width:10%;text-align:center;"} schedule_code
      %th{:style=>"width:2%;",:class=>"transperent_right_border"} 
      %th{:style=>"width:2%;"} 
    %tbody
      %tr
        %th{:scope=>"row"}
        %td=@sch.date
        %td=@sch.schedule_code
        %td{:style=>"text-align:center"}= link_tag "save", sch_of_work_informations, #how can send post request in here 
        %td{:style=>"text-align:center"} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T13:38:58.857

我想这就是你会看到的那种答案。遵循 railscasts [http://railscasts.com/episodes/196-nested-model-form-part-1](http://railscasts.com/episodes/196-nested-model-form-part-1)嵌套表单中的教程，它应该对您有所帮助。基本上你会有一个添加行按钮，它会在 javascript 中添加 html 行，你甚至可以有一个删除行按钮。完成后，只需按表单的保存按钮即可完成所有更改。

# wpf - 在 TreeView 中突出显示父项

> ID：11738445
> 
> 赞同：0
> 
> 时间：2012-07-31T10:51:43.423
> 
> 标签：wpf

有没有办法让 Treeview 中的父节点也有一些区别，以便用户知道他们所在的父节点？可能是突出显示单元格或更改文本，但我希望能够单击文件夹内的项目，但父节点不同，因此用户知道他们在其中单击了什么。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T12:15:50.667

模型级别 - 在您的模型类中具有“父”属性。

例如，如果你有一个递归绑定到`TreeView`say的类`MyItemClass`

```
public class MyItemClass
{
    public string MyHeader { get; set; } //Header text of each tree view item.
    public MyItemClass Parent { get; set; } //Parent MyItemClass object.
    public List<MyItemClass> Children { get; set; } //Children MyItemClass
    public bool IsSelected { get; set; } //When tree view item is clicked & selected.
    public bool IsHighlighted { get; set; } //When parent is highlighted.
} 
```

所以当孩子被选中时......

```
private bool _isSelected;
public bool IsSelected 
{
  get { retrn _isSelected; }
  set
  {
     _isSelected = value;

     //The line below highlights the parent when either of the child is selected.
     this.Parent.IsHighlighted 
         = this.Parent.Children.Where(item => item.IsSelected).Any();

     //Notify Property Changed here...
   } 
} 
```

因此，正如父母强调...

```
private bool _isHighlighted;
public bool IsHighlighted
{
  get { retrn _isHighlighted; }
  set
  {
     _isHighlighted = value;

     //When a node is highlighted all its Parent nodes should be too.
     this.Parent.IsHighlighted 
         = this.Parent.Children.Where(item => item.IsHighlighted).Any();

     //Notify Property Changed here...
  } 
} 
```

然后，您可以`IsHighlighted`从树视图项的 undelrying 数据上下文中使用此标志，然后对其应用适当的样式`TreeViewItem`。

```
 <TreeView ItemsSource="{Binding MyItems}">
        <TreeView.ItemTemplate>
            <HierarchicalDataTemplate ItemsSource="{Binding Children}">
                <TextBlock Text="{Binding MyHeader}">
                    <TextBlock.Style>
                        <Style TargetType="{x:Type TextBlock}">
                             <Style.Triggers>
                                <DataTrigger Binding="{Binding IsHighlighted}"
                                             Value="True">
                                    <Setter Property="FontWeight" Value="Bold"/>
                                </DataTrigger>
                            </Style.Triggers>
                        </Style>
                    </TextBlock.Style>
                </TextBlock>
            </HierarchicalDataTemplate>
        </TreeView.ItemTemplate>
    </TreeView> 
```

**确保`INotifyPropertyChanged`在项目类中的所有属性上实现，否则这些效果将不起作用。**

# scala - Scala：执行外部进程、字符串转义和错误

> ID：11738446
> 
> 赞同：1
> 
> 时间：2012-07-31T10:51:47.057
> 
> 标签：scala, lynx

我想执行以下命令：

```
lynx -useragent='Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:14.0) Gecko/20100101 Firefox/14.0.1' -source 'http://localhost' 
```

作为`Process`Scala 中的一个。我两个都用过：

```
val cmd = ... // command to execute
cmd #> new java.io.File( filename ) ! 
```

和：

```
val proc = Process( cmd )                                                  
proc !! 
```

在这两种情况下，我都会收到以下错误`lynx`：

```
Can't Access `file://localhost/home/me/Work/23.lynx/2.multidownload/(X11;'
Alert!: Unable to access document. 
```

单独运行的命令运行良好，当我在 Scala 中运行它时——我得到了错误。这意味着 Scala 和 之间发生了一些奇怪的事情`lynx`，并且字符串没有被正确解释......知道吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-31T10:58:08.790

我猜你设置`cmd`为一个字符串。`!!`然后在每个空格字符处拆分字符串以获取要传递给 lynx 的参数，而不关心您的`'`字符。

```
import scala.sys.process._

val cmd = Seq("lynx",
              "-useragent='Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:14.0) Gecko/20100101 Firefox/14.0.1'",
              "-source" "http://localhost")
val out = cmd.!! 
```

# php - 在没有用户会话的情况下作为页面本身发布到 Facebook 页面墙

> ID：11738448
> 
> 赞同：0
> 
> 时间：2012-07-31T10:51:52.047
> 
> 标签：php, facebook, api, curl

这是我在这里的第一个问题，如果问一些琐碎的问题，请道歉 - 尽管经过一个小时的挖掘后我没有找到答案。

我有一个 PHP 网站，它需要通过以下方法与 Facebook 页面连接：在某些触发器上，该网站需要*作为页面本身*发布到页面的墙上。这必须自动完成，即使没有可用的用户会话（例如，如果有人在没有实际拥有 Facebook 帐户的情况下使用该站点）。

我找到了使用延长令牌到期时间（离线访问）的解决方案，但在这些情况下，帖子将始终显示为站点管理员（在这种情况下是我）。但是，我需要由页面编写帖子。当使用 Facebook 作为页面时，我无权请求离线访问令牌。

目前这甚至可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T11:02:47.923

您需要在服务器上缓存页面访问令牌并使用它进行更新 - 页面登录在此处有很好的记录：[https](https://developers.facebook.com/docs/authentication/pages/) ://developers.facebook.com/docs/authentication/pages/ -

将 存储`access_token`在您的服务器端代码中并使用该令牌作为页面发布 - 如果您有页面管理员的长期访问令牌，则页面访问令牌不会过期，除非用户不再是页面的管理员，删除应用程序等。

# hadoop - Hadoop 作业在 FBUtilities.java 中抛出 NullPointerException

> ID：11738450
> 
> 赞同：0
> 
> 时间：2012-07-31T10:51:57.763
> 
> 标签：hadoop, nullpointerexception, cassandra

尝试通过访问 Cassandra 开始我的 hadoop 工作时，我收到 NullPointerException。这是堆栈跟踪：

```
 Exception in thread "main" java.lang.NullPointerException
        at org.apache.cassandra.utils.FBUtilities.newPartitioner(FBUtilities.java:415)
        at org.apache.cassandra.hadoop.ConfigHelper.getOutputPartitioner(ConfigHelper.java:416)
        at org.apache.cassandra.hadoop.ColumnFamilyOutputFormat.checkOutputSpecs(ColumnFamilyOutputFormat.java:90)
        at org.apache.cassandra.hadoop.ColumnFamilyOutputFormat.checkOutputSpecs(ColumnFamilyOutputFormat.java:81)
        at org.apache.hadoop.mapred.JobClient$2.run(JobClient.java:887)
        at org.apache.hadoop.mapred.JobClient$2.run(JobClient.java:850)
        at java.security.AccessController.doPrivileged(Native Method)
        at javax.security.auth.Subject.doAs(Subject.java:416)
        at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1121)
        at org.apache.hadoop.mapred.JobClient.submitJobInternal(JobClient.java:850)
        at org.apache.hadoop.mapreduce.Job.submit(Job.java:500)
        at org.apache.hadoop.mapreduce.Job.waitForCompletion(Job.java:530)
        at RowKeyIndexer.run(RowKeyIndexer.java:393)
        at Indexer.run(Indexer.java:56)
        at org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:65)
        at Indexer.main(Indexer.java:30)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:616)
        at org.apache.hadoop.util.RunJar.main(RunJar.java:156) 
```

我正在运行 hadoop 1.0.3 版和 cassandra 1.1.2 版。

非常感谢任何帮助，因为我不知道从哪里开始。

非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T15:49:32.333

看起来您还没有设置输出分区器，如下所示：

```
ConfigHelper.setOutputPartitioner(conf, "org.apache.cassandra.dht.RandomPartitioner"); 
```

# php - 在查询中使用 PDO 准备好的语句和 LIMIT 时出错

> ID：11738451
> 
> 赞同：15
> 
> 时间：2012-07-31T10:52:05.253
> 
> 标签：php, mysql, pdo, prepared-statement, limit

我在我的应用程序中使用 PDO。但是当我在包含`LIMIT`. 有什么问题？
**代码：**

```
$start = 0;
$rows = 20;
$sql = "SELECT * FROM tbl_news ORDER BY date DESC LIMIT ?, ?";
$q = $db->prepare($sql);
$q->execute(array($start , $rows)); 
```

**错误：**

> 检查与您的 MySQL 服务器版本相对应的手册，以获取在 ''0'、'20'' 附近使用的正确语法

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-31T11:04:10.653

[关于使用准备好的语句在 MySQL 上](https://stackoverflow.com/questions/10014147/limit-keyword-on-mysql-with-prepared-statement-maybe-still-a-bug)发布LIMIT 关键字，下面的代码可以解决我的问题。

```
$db->setAttribute(PDO::ATTR_EMULATE_PREPARES, FALSE); 
```

感谢**Álvaro G. Vicario**和**Maerlyn**

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-07-31T11:00:57.450

你可以这样做：

```
$sql = SELECT * FROM tbl_news ORDER BY date DESC LIMIT :start, :rows";
$q = $db->prepare($sql);
$q->bindParam(':start', $start, PDO::PARAM_INT);
$q->bindParam(':rows',$rows, PDO::PARAM_INT); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-31T10:55:20.840

这是一个[已知的错误](http://bugs.mysql.com/bug.php?id=11918)，已在 5.5.6 中从内存中修复。

来自文章： LIMIT 不允许在任何上下文中使用变量。它的参数必须是整数常量。

进一步编辑：（关于此事存在争议）用户变量是准备好的语句中 LIMIT 子句的可接受参数，准备好的语句的 SQL 语法可以在存储过程中使用。

第三次编辑：此[链接](http://forums.mysql.com/read.php?98,126379,133966#msg-133966)说明这些应与准备好的语句一起使用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-03T19:18:12.583

我只是偶然发现了同样的问题。对我来说，使用我自己的语句类（扩展`PDOStatement`）和我自己的`execute()`方法来修复它。

这是课程：

```
class MyPDOStatement extends PDOStatement {

  public function execute($input_parameters = null) {
    if (is_array($input_parameters)) {
      $i = 1;
      foreach ($input_parameters as $p) {
        // default to string datatype
        $parameterType = PDO::PARAM_STR;
        // now let's see if there is something more appropriate
        if (is_bool($p)) {
          $parameterType = PDO::PARAM_BOOL;
        } elseif (is_null($p)) {
          $parameterType = PDO::PARAM_NULL;
        } elseif (is_int($p)) {
          $parameterType = PDO::PARAM_INT;
        }
        // parameters passed to execute() are input-only parameters, so use
        // bindValue()
        $this->bindValue($i, $p, $parameterType);
        $i++;
      }
    }
    return parent::execute();
  }

} 
```

要告诉 PDO 使用此语句类而不是默认的，请执行以下操作：

```
$db = new PDO(...);
$db->setAttribute(PDO::ATTR_STATEMENT_CLASS, array('MyPDOStatement')); 
```

现在问题中的代码将起作用：

```
$start = 0;
$rows = 20;
$sql = "SELECT * FROM tbl_news ORDER BY date DESC LIMIT ?, ?";
$q = $db->prepare($sql);
$q->execute(array($start , $rows)); 
```

您唯一需要做的事情是绑定到语句的变量具有正确的类型，整数。如果你有一个数字字符串，例如来自`$_GET`数组，你可以这样做：

```
if (isset($_GET['start']) && is_numeric($_GET['start'])
    && is_int($_GET['start'] + 0) {
  $start = (int) $_GET['start'];
} 
```

如果最后一件事有更简单的方法，我不确定，但至少它对我来说很好。

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2012-07-31T10:54:22.910

`date`是一个保留字，你必须用它来包装它 `back-ticks`

# c# - aspx 是否为 c# 静态变量提供特殊处理

> ID：11738455
> 
> 赞同：3
> 
> 时间：2012-07-31T10:52:21.703
> 
> 标签：c#, asp.net, static

在 .net Web 应用程序中，.aspx 页面和页面背后的 c# 代码有什么特别之处，它们会改变静态变量的行为。

我有大量在其他地方开发的应用程序页面，并且通过它们运行一个通用模式，我认为应该将实例变量声明为静态变量。

这个问题的更详细的陈述是：如果我有两个 Web 会话 a 和 b 在同一个应用程序池中的同一个 iis 服务器上运行，如果 a 访问有问题的页面并将静态变量 x 设置为 value1，然后 b 访问同一页面并将静态变量 x 设置为值 2，我的理解是 value1 已被值 2 替换。我的困境是这种模式在代码中重复使用，在较高级别上代码似乎可以工作。结论是，要么是运气（在会话 a 中的时间在会话 b 命中之前放弃了对变量的需求），要么是其他原因。

无论这是 ac# 细微差别还是开发人员错误，我都愿意接受建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T11:01:57.317

静态属性/字段在 Web 应用程序中很好，只要它们用于共享数据，这些数据可以在任何时候可接受地消失，例如当应用程序池回收时。

也就是说，它们的值确实在 ASP.Net 应用程序内部共享，除非它们具有隔离的支持机制，例如`Session`.

## 例子

```
public static int UserId = 10; // BAD! everyone gets/sets this field's value

// BAD! everyone gets/sets this property's implicit backing value
public static int UserId {
     get;
     set;
}

// This case is fine; just a shortcut to avoid instantiating an object.
// The backing value is segregated by other means, in this case, Session.
public static int UserId{
    get{
        return (int)HttpContext.Current.Session["UserId"];
    }
}

// While I would question doing work inside a property getter, the fact that 
// it is  static won't cause an issue; every call retrieves data from a 
// database, not from a single memory location.
public static int UserId{
    get{
        // return some value from database
    }
} 
```

在流量很大之前，您可能看不到问题。假设页面检索到一个值，将其放入静态变量中，使用一次，然后完成执行。如果页面执行速度很快，则只有非常小的（但很危险！）重叠窗口，除非时机正确和/或流量足够高，否则您可能看不到。

这可能会导致难以诊断的错误，因为它们取决于时间，并且您在本地机器上自行测试时可能不会看到它们。

# actionscript-3 - AS3 mouseClick 忽略一个movieclip

> ID：11738457
> 
> 赞同：0
> 
> 时间：2012-07-31T10:52:27.737
> 
> 标签：actionscript-3, flash, actionscript, movieclip

AS3 中有没有办法让鼠标忽略某个影片剪辑？我需要它位于其他影片剪辑的顶部（由于透明效果），但以允许单击其下方的影片剪辑的方式拥有它。我知道“.mouseChildren = false”，但这只会使该影片剪辑中的所有内容都无法点击，但它仍然充当所有其他按钮之上的“屏障”。

有没有办法做到这一点，还是我需要完全删除它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T11:02:46.823

在单击 MovieClip 后面的对象之前，您需要将`.mouseChildren`和都设置为 false。`.mouseEnabled`这会使鼠标忽略 MovieClip 中的对象和 MovieClip 本身。

来源： http: [//pixelfumes.blogspot.com/2008/01/clicking-through-movieclips-to.html](http://pixelfumes.blogspot.com/2008/01/clicking-through-movieclips-to.html)

编辑：哎呀，没有看到亚历克斯的评论，对不起。

# mysql - 通过外键**从**给定表引用的表

> ID：11738461
> 
> 赞同：0
> 
> 时间：2012-07-31T10:52:37.383
> 
> 标签：mysql, foreign-keys

请列出从给定表中引用的所有/一个表的可能查询是什么？

实际上，我可以使用我在搜索中找到的以下查询列出给定表**引用的表。**

```
use INFORMATION_SCHEMA;

select TABLE_NAME,COLUMN_NAME,CONSTRAINT_NAME,
REFERENCED_TABLE_NAME,REFERENCED_COLUMN_NAME from KEY_COLUMN_USAGE where
REFERENCED_TABLE_NAME = '<table>'; 
```

但我需要的是相反的一面。**这是从**给定表中引用的表的列表。

有一个解决方案会很棒..在此先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T10:59:12.643

您可以使用：

```
SELECT TABLE_NAME 
    FROM information_schema.KEY_COLUMN_USAGE 
WHERE REFERENCED_TABLE_NAME = 'yourtable'; 
```

检查哪些表链接到“yourtable”。

您可以使用：

```
SELECT REFERENCED_TABLE_NAME 
    FROM information_schema.KEY_COLUMN_USAGE 
WHERE TABLE_NAME = 'yourtable'; 
```

反过来搜索。确保*在创建表语句中使用正确的外键声明*，以便正确填写此表！

```
mysql> describe KEY_COLUMN_USAGE;
+-------------------------------+--------------+------+-----+---------+-------+
| Field                         | Type         | Null | Key | Default | Extra |
+-------------------------------+--------------+------+-----+---------+-------+
| CONSTRAINT_CATALOG            | varchar(512) | NO   |     |         |       |
| CONSTRAINT_SCHEMA             | varchar(64)  | NO   |     |         |       |
| CONSTRAINT_NAME               | varchar(64)  | NO   |     |         |       |
| TABLE_CATALOG                 | varchar(512) | NO   |     |         |       |
| TABLE_SCHEMA                  | varchar(64)  | NO   |     |         |       |
| TABLE_NAME                    | varchar(64)  | NO   |     |         |       |
| COLUMN_NAME                   | varchar(64)  | NO   |     |         |       |
| ORDINAL_POSITION              | bigint(10)   | NO   |     | 0       |       |
| POSITION_IN_UNIQUE_CONSTRAINT | bigint(10)   | YES  |     | NULL    |       |
| REFERENCED_TABLE_SCHEMA       | varchar(64)  | YES  |     | NULL    |       |
| REFERENCED_TABLE_NAME         | varchar(64)  | YES  |     | NULL    |       |
| REFERENCED_COLUMN_NAME        | varchar(64)  | YES  |     | NULL    |       |
+-------------------------------+--------------+------+-----+---------+-------+ 
```

# python - 将列表中的数字与每 3 个数字相加

> ID：11738464
> 
> 赞同：3
> 
> 时间：2012-07-31T10:52:48.133
> 
> 标签：python, python-2.7

我有一个像这样排成一行的数字列表：

```
0
1
0
2
0
4 
```

它有大约数千行

我想每 3 行将它们加起来，所以结果将是这样的：

```
1
6 
```

我已经用这一行将列表变成了单独的整数：

```
k = map(lambda s: s.strip(), k)
integer = map(int, k) 
```

我怎么能做加法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T10:56:33.720

使用 grouper，例如从[Alternative way 将列表拆分为 n 组](https://stackoverflow.com/questions/1624883/alternative-way-to-split-a-list-into-groups-of-n)：

```
import itertools

def grouper(n, iterable, fillvalue=None):
    "grouper(3, 'ABCDEFG', 'x') --> ABC DEF Gxx"
    args = [iter(iterable)] * n
    return itertools.izip_longest(*args, fillvalue=fillvalue)

map(sum, grouper(3, interger, 0)) 
```

注意上面的代码假设python 2.x；对于 3.x，您需要`itertools.zip_longest`改用。

演示：

```
>>> example = [0, 1, 0, 2, 0, 4]
>>> map(sum, grouper(3, example, 0))
[1, 6] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T11:38:16.763

这可能是最 Pythonic 的：

```
>>> my_list = iter(my_list)
>>> map(sum, zip(my_list, my_list, my_list))
[1, 6] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T11:01:31.630

既然你说你已经有一个数字列表，那么

```
result = [sum(data[i:i+3])for i in range(0, len(data),3)] 
```

例如，

```
 data = range(1, 16) # [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16] 
```

产量

```
 [6, 15, 24, 33, 42] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T10:56:50.240

使用[`itertools grouper`](http://docs.python.org/library/itertools.html#recipes)配方

```
>>> from itertools import izip_longest
>>> def grouper(n, iterable, fillvalue=None):
        "Collect data into fixed-length chunks or blocks"
        # grouper(3, 'ABCDEFG', 'x') --> ABC DEF Gxx
        args = [iter(iterable)] * n
        return izip_longest(fillvalue=fillvalue, *args)

>>> with open('data.txt') as fin:
        for g in grouper(3, fin):
            print sum(map(int, g))

1
6 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-31T11:32:13.267

这将跳过不适合三个一组的剩余数字：

```
>>> def sum_three(iterable_):
...     iterable_ = iter(iterable_)
...     while True:
...         yield next(iterable_) + next(iterable_) + next(iterable_)
...
>>> my_list = [0, 1, 0, 2, 0, 4, 99, 1]
>>> list(sum_three(my_list))
>>> [1, 6] 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-31T11:01:24.193

石斑鱼和所有花哨的东西都可以工作……但在这种情况下，简单的列表理解就可以了。它应该又好又快！:)

```
>>> q = range(9)
>>> q
[0, 1, 2, 3, 4, 5, 6, 7, 8]
>>> [sum(q[3*n:3*n+3]) for n in range(len(q)/3)]
[3, 12, 21] 
```

# javascript - 使用 XML 将标题文本、段落文本和按钮与每个图像绑定

> ID：11738465
> 
> 赞同：0
> 
> 时间：2012-07-31T10:52:52.853
> 
> 标签：javascript, jquery, xml, xml-parsing

我正在尝试使用 XML 将标题文本、段落文本和按钮与每个图像绑定。因此，每个图像都应该包含一个标题文本、一个段落文本和一个应该从 XML 绑定数据的按钮。

因此，对于每个图像，标题文本、段落文本和按钮也应该淡入淡出。并且该按钮应该具有它所属的特定图像的回调。

**HTML**

```
<div id="panel">
    <img id="imageSlide" alt="" src="" width="250px" />
    <h2> </h2>
    <p></p>
<button>Learn More</button>
    </div> 
```

**jQuery**

```
 $(function() {
    //Local XML Data
    var slideXML = "<rss version='2.0'><channel>";
    slideXML += "<title>IMAGES</title>";
    slideXML += "<images>";
    slideXML += "<image>http://www.academy-florists.com/images/shop/thumbnails%5CValentines_Day_flowers.jpg</image>";
    slideXML += "<image>http://www.everythingbuttheprincess.com/assets/images/babies-in-bloom-fuchsia-flower_thumbnail.jpg</image>";
    slideXML += "<image>http://www.behok.ru/i/a/cat/gerbera.jpg</image>";
    slideXML += "<image>http://www.thebutterflygrove.com/images/thumbnails/0/200/200/thumbnail_flower-decor-makpk.jpg</image>";
    slideXML += "<image>http://gameinfestedent.com/gallery_photo/medium_image/image1322820610_MainPurpleOrchids3_1a.jpg</image>";
    slideXML += "</images>";
    slideXML += "</channel></rss>";

    //Parse XML content
    var xmlDoc = $.parseXML(slideXML);
    var $xmldata = $(xmlDoc);

    //Find Total No of Image
    var maximages = ($xmldata.find("images").find("image").length);

    $(function() {
        //FadeIn/FadeOut Image on Set Time Interval on Slide
        setInterval(Slider, 2500);
    });

    var prevIndex = 0;

    function Slider() {
        $('#imageSlide').fadeOut("slow", function() {
            var shuffleIndex = Math.round((Math.random() * (maximages - 1)));
            if (prevIndex == shuffleIndex) {
                if (prevIndex >= (maximages - 1)) {
                    shuffleIndex--;
                } else {
                    shuffleIndex++;
                }
            }
            prevIndex = shuffleIndex;
            $("#panel").fadeIn("slow").css('background', '#000');

            var imgurl = $xmldata.find("images").find("image:eq(" + shuffleIndex + ")").text();
            $(this).attr('src', imgurl).fadeIn("slow");
        });
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T12:25:50.580

将您的 XML 更改为这样的内容

```
<rss version='2.0'>
    <channel>
        <title>IMAGES</title>
        <images>
            <image id="1">
                <src>http://www.academy-florists.com/images/shop/thumbnails%5CValentines_Day_flowers.jpg</src>
                <text>
                    <![CDATA[
                        <h2>Foo</h2>
                        <p>Stuff</p>
                    ]]>
                </text>
                <callback>Button Callback stuff</callback>
            </image>
            <image id="2">
                <src>http://www.everythingbuttheprincess.com/assets/images/babies-in-bloom-fuchsia-flower_thumbnail.jpg</src>
                <text>
                    <![CDATA[
                        <h2>Foo</h2>
                        <p>Stuff</p>
                    ]]>
                </text>
                <callback>Button Callback stuff</callback>
            </image>
            <image id="3">
                <src>http://www.behok.ru/i/a/cat/gerbera.jpg</src>
                <text>
                    <![CDATA[
                        <h2>Foo</h2>
                        <p>Stuff</p>
                    ]]>
                </text>
                <callback>Button Callback stuff</callback>
            </image>
            <image id="4">
                <src>http://www.thebutterflygrove.com/images/thumbnails/0/200/200/thumbnail_flower-decor-makpk.jpg</src>
                <text>
                    <![CDATA[
                        <h2>Foo</h2>
                        <p>Stuff</p>
                    ]]>
                </text>
                <callback>Button Callback stuff</callback>
            </image>
            <image id="5">
                <src>http://gameinfestedent.com/gallery_photo/medium_image/image1322820610_MainPurpleOrchids3_1a.jpg</src>
                <text>
                    <![CDATA[
                        <h2>Foo</h2>
                        <p>Stuff</p>
                    ]]>
                </text>
                <callback>Button Callback stuff</callback>  
            </image>
        </images>
    </channel>
</rss> 
```

然后在那之后，你的 JavaScript 会像这样保存所有的变量

```
 var currentImage = $xmldata.find("images").find("image:eq(" + shuffleIndex + ")");
        var imgurl = currentImage.find("src").text();
        var imgText = currentImage.find("text").text();
        var imgButton = currentImage.find("callback").text(); 
```

和 HTML

```
<div id="panel">
<img id="imageSlide" alt="" src="" width="250px" />
<div id="text">
    <!-- changed to all encompassing div -->
</div>
<button>Learn More</button>
</div>​ 
```

总而言之，结合所有这些，您的整个脚本将如下所示

```
$(function() {
slideXML = "<rss version='2.0'>";
slideXML += "<channel>";
slideXML += "       <title>IMAGES</title>";
slideXML += "       <images>";
slideXML += "           <image id='1'>";
slideXML += "               <src>http://www.academy-florists.com/images/shop/thumbnails%5CValentines_Day_flowers.jpg</src>";
slideXML += "               <text>";
slideXML += "                   <![CDATA[";
slideXML += "                       <h2>Foo</h2>";
slideXML += "                       <p>Stuff</p>";
slideXML += "                   ]]>";
slideXML += "               </text>";
slideXML += "               <callback>Button Callback stuff</callback>";
slideXML += "           </image>";
slideXML += "           <image id='2'>";
slideXML += "               <src>http://www.everythingbuttheprincess.com/assets/images/babies-in-bloom-fuchsia-flower_thumbnail.jpg</src>";
slideXML += "               <text>";
slideXML += "                   <![CDATA[";
slideXML += "                       <h2>Foo</h2>";
slideXML += "                       <p>Stuff</p>";
slideXML += "                   ]]>";
slideXML += "               </text>";
slideXML += "               <callback>Button Callback stuff</callback>";
slideXML += "           </image>";
slideXML += "           <image id='3'>";
slideXML += "               <src>http://www.behok.ru/i/a/cat/gerbera.jpg</src>";
slideXML += "               <text>";
slideXML += "                   <![CDATA[";
slideXML += "                       <h2>Foo</h2>";
slideXML += "                       <p>Stuff</p>";
slideXML += "                   ]]>";
slideXML += "               </text>";
slideXML += "               <callback>Button Callback stuff</callback>";
slideXML += "           </image>";
slideXML += "           <image id='4'>";
slideXML += "               <src>http://www.thebutterflygrove.com/images/thumbnails/0/200/200/thumbnail_flower-decor-makpk.jpg</src>";
slideXML += "               <text>";
slideXML += "                   <![CDATA[";
slideXML += "                       <h2>Foo</h2>";
slideXML += "                       <p>Stuff</p>";
slideXML += "                   ]]>";
slideXML += "               </text>";
slideXML += "               <callback>Button Callback stuff</callback>";
slideXML += "           </image>";
slideXML += "           <image id='5'>";
slideXML += "               <src>http://gameinfestedent.com/gallery_photo/medium_image/image1322820610_MainPurpleOrchids3_1a.jpg</src>";
slideXML += "               <text>";
slideXML += "                   <![CDATA[";
slideXML += "                       <h2>Foo</h2>";
slideXML += "                       <p>Stuff</p>";
slideXML += "                   ]]>";
slideXML += "               </text>";
slideXML += "               <callback>Button Callback stuff</callback>  ";
slideXML += "           </image>";
slideXML += "       </images>";
slideXML += "   </channel>";
slideXML += "</rss>";

    //Parse XML content
    var xmlDoc = $.parseXML(slideXML);
    var $xmldata = $(xmlDoc);

    //Find Total No of Image
    var maximages = ($xmldata.find("images").find("image").length);     

    $(function() {
        //FadeIn/FadeOut Image on Set Time Interval on Slide
        setInterval(Slider, 2500);
    });

    var prevIndex = 0;

    function Slider() {
        $('#imageSlide').fadeOut("slow", function() {
            var shuffleIndex = Math.round((Math.random() * (maximages - 1)));
            if (prevIndex == shuffleIndex) {
                if (prevIndex >= (maximages - 1)) {
                    shuffleIndex--;
                } else {
                    shuffleIndex++;
                }
            }
            prevIndex = shuffleIndex;
            $("#panel").fadeIn("slow").css('background', '#000');
            var currentImage = $xmldata.find("images").find("image:eq(" + shuffleIndex + ")");
            var imgurl = currentImage.find("src").text();
            var imgHeader = currentImage.find("text").text();
            var imgButton = currentImage.find("callback").text();
            $(this).attr('src', imgurl).fadeIn("slow");
            $("#text").html(imgHeader);
            $("#panel button").text(imgButton);
        });
    }
}) 
```

# alfresco - 在不使用表单生成器/运行器的情况下使用工作流发送按钮

> ID：11738467
> 
> 赞同：0
> 
> 时间：2012-07-31T10:52:54.683
> 
> 标签：alfresco, orbeon

我有一个没有使用 Orbeon Form Builder 手动编写的自定义表单。我想在提交表单时将 XML 文件保存到 Alfresco。这可以通过使用工作流发送按钮使用表单生成器创建的表单来实现。我的问题是如何将此按钮与手动编写的表单一起使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T18:04:25.413

该按钮和 Alfresco 功能是 Form Runner 的一部分，它们并不意味着独立工作。这并不是说不可能，但是您必须查看源代码并至少对它有一点了解。

Alfresco 支持的起点是[`alfresco-model.xml`](https://github.com/orbeon/orbeon-forms/blob/master/src/resources/apps/fr/alfresco/alfresco-model.xml). 您可以先将此模型与 XInclude 一起包含在您自己的表单中。然后，该模型至少依赖于一个名为的实例，该实例`fr-parameters-instance`提供表单和应用程序名称。这用于读取配置属性。

第二个要看[`persistence-model.xml`](https://github.com/orbeon/orbeon-forms/blob/master/src/resources/apps/fr/includes/persistence/persistence-model.xml)的地方，就是实际使用的地方`alfresco-model.xml`。

# wcf-data-services - 如何生成将在 .net 2.0 中工作的 wcf 服务的客户端代理类

> ID：11738468
> 
> 赞同：2
> 
> 时间：2012-07-31T10:52:56.247
> 
> 标签：wcf-data-services, svcutil.exe, ssis-2005

我必须在 BIDS 2005 中开发的 ssis 脚本组件中使用 wcf 服务。为此，我使用`svcutil.exe`. 在脚本组件中附加代理类后，它会出现某些类的错误，例如`System.Runtime.Serialization.DataContractAttribute`未定义。任何建议我如何解决这个问题。或者可以使用 wsdl 来生成 wcf 服务的代理类。以便它可以在.net 2.0中使用。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T17:24:39.873

最后经过一番挣扎，我已经解决了这个问题。现在我已经成功地创建了 wcf 服务的代理类，并且它现在在 .net 2.0 中工作。

我已经完成了以下步骤：-

注意：这只有在 wcf 服务（.svc）将使用类似于 web 服务（.asmx）的 BasicHttpBinding 时才有效

**步骤 1：-** 在 Visual Studio 命令提示符下运行以下命令。

```
svcutil.exe /target:metadata http://Your service address 
```

它将在路径中创建带有其他一些文件的 wsdl 文件`C:\Program Files\Microsoft Visual Studio 10.0\VC`

**Step2:-** 现在运行 wsdl 命令

`wsdl.exe tempuri.org.wsdl tempuri.org.xsd schemas.microsoft.com.2003.10.Serialization.xsd`

这将生成可用于访问服务的 v2.0 客户端代理类。

注意：如果 wsdl 命令出现错误，请使用所有文件名，而不是使用这三个以空格分隔的文件名。

# android - 具有离线访问和本地安全性和跨平台的 Google Drive/Dropbox 类解决方案

> ID：11738473
> 
> 赞同：3
> 
> 时间：2012-07-31T10:53:08.193
> 
> 标签：android, ios, security, encryption, offline-browsing

是否有任何软件解决方案或 SDK 部分可以处理以下内容：

*   建议像 google docs 或 dropbox 之类的东西，为企业提供安全存储
*   存储文档以供离线访问
*   文件被加密
*   解决方案适用于 iOS、Android 和 Windows / Mac OS（如果可能）

我知道谷歌文档会建议离线访问并在 iPad 上分发应用程序，但我想知道是否有替代方案？

谢谢

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T15:16:27.137

查看[Nomadesk](https://www.nomadesk.com/)产品 - 它们完全满足您的需求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T06:37:44.023

您可以尝试以下云服务之一：

1.  [库比](https://www.cubby.com/video)
2.  [微软跳伞](https://skydrive.live.com/)
3.  [乌阿拉](http://www.wuala.com/)
4.  [糖同步](https://www.sugarsync.com/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T10:16:50.313

亚马逊有这个[http://aws.amazon.com/s3/](http://aws.amazon.com/s3/)它有一个很棒的 AP​​I。

# .net - 将还原对象保存在内存中以供以后调试 - Visual Studio

> ID：11738479
> 
> 赞同：1
> 
> 时间：2012-07-31T10:53:14.193
> 
> 标签：.net, debugging

这是一个一般的调试问题。通常，您会发现自己在调试输入类型可能是强类型的特定方法。

我正在寻找一个通用的视觉工作室插件，它可以保存强类型对象，然后在另一个调试会话中恢复它们。

我使用的是相当旧的 Visual Studio 2008 版本，没有这个插件，我正在考虑将序列化对象写入 xml -> 从 xml 例程反序列化。

这样的事情存在吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T18:13:54.557

看看这个扩展：[http ://www.bugaidsoftware.com/](http://www.bugaidsoftware.com/)

我还没有尝试过，但从他们的宣传视频来看，它应该能够满足您的要求。

# javascript - 在 Worklight 中检索 Http 适配器中的纬度和经度

> ID：11738480
> 
> 赞同：0
> 
> 时间：2012-07-31T10:53:21.507
> 
> 标签：javascript, jquery, ibm-mobilefirst

我试图使用 http 适配器检索经纬度。当我尝试调用该过程时，我将能够检索结果。但我只想检索 lat 和 long 而不是其他附加信息。我附上了我的代码。

```
function getGmapLatLng(pAddress) {
var input = {
method : 'get',
returnedContentType : 'json',
path : 'maps/api/geocode/json',
parameters : {
'address' : pAddress,
'sensor' : 'false' // hard-coded
}
}; 
return WL.Server.invokeHttp(input);
var type = typeof input; 
if ("object" == type) {
if (true == response) {

// Drill down into the response object.
var results = response;
var result = results[0];
var geometry = result;
var location = geometry;
} 
else {

return null;
}
} 
else {
return null;
}

} 
```

谁能纠正我做错的地方

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T16:22:00.380

这应该是您的适配器：googleMap.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<wl:adapter name="googleMap"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
    xmlns:wl="http://www.worklight.com/integration"
    xmlns:http="http://www.worklight.com/integration/http">
    <displayName>googleMap</displayName>
    <description>googleMap</description>
    <connectivity>
        <connectionPolicy xsi:type="http:HTTPConnectionPolicyType">
            <protocol>http</protocol>
            <domain>maps.googleapis.com</domain>
            <port>80</port>
        </connectionPolicy>
        <loadConstraints maxConcurrentConnectionsPerNode="2" />
    </connectivity>
    <procedure name="getLangLat"/>
</wl:adapter> 
```

googleMap-impl.js（为简单起见，我对地址进行了硬编码）：

```
function getLangLat() {
    var input = {
        method : 'get',
        returnedContentType : 'json',
        path : 'maps/api/geocode/json?address=1600+Amphitheatre+Parkway,+Mountain+View,+CA&sensor=false'
    };
    return WL.Server.invokeHttp(input);
} 
```

您的应用程序 JavaScript：

```
// Worklight comes with the jQuery framework bundled inside. If you do not want to use it, please comment out the line below.
window.$ = WLJQ;

function wlCommonInit(){
    // Common initialization code goes here
    getLangLat();
}

function getLangLat() {
// Invocation data details
    var invocationData = {
        // Adapter to invoke
        adapter: 'googleMap',
        // Procedure to invoke
        procedure: 'getLangLat',
        parameters: []
    };

    // Invoke procedure
    WL.Client.invokeProcedure(invocationData, {
        // On success callback
        onSuccess : onSuccess,
        // On failure callback
        onFailure : onFail,
        // timeout
        timeout : 30000
    });

}

function onSuccess (results) {
    alert('Latitude: ' + results.invocationResult.results[0].geometry.location.lat);
    alert('Longitude: ' + results.invocationResult.results[0].geometry.location.lng);
}

function onFail (error) {
    WL.Logger.debug(error);
} 
```

# file - 移动名称中带有空格的文件

> ID：11738484
> 
> 赞同：2
> 
> 时间：2012-07-31T10:53:33.460
> 
> 标签：file, unix

我在 unix 中有一个文件，名称为“这是我的 file.xls”

我想将它从一个文件夹移动到另一个文件夹。我写了以下几行：

```
fileName="this is my file"
myDate=20121125

mv $FIRST_DIR/"${fileName}.xls" $SECOND_DIR/"${fileName}_${myDate}.xls" 
```

但是，这是行不通的。我收到错误，因为“file.xls 不是目录”

这样做的正确方法是什么？

谢谢阅读！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-31T10:57:06.657

对空格使用转义字符。所以将变量更改`fileName`为“this\ is\ my\ file”。这确保了 shell 将忽略空格并且不会将其视为分隔符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-09T18:29:59.587

使用 \ \ 输入空格。所以

```
mv this\ \is\ \my\ \file this-is-my-file 
```

应该管用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-29T16:41:39.753

这应该可以工作 mv this.is.my.file.xls 确保你在点前面放了一个反冲

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-08-10T11:02:01.337

在 mac 中，您不需要使用 symbol `\`。只需将带有空格的完整文件名放在双引号内即可打开。

喜欢`vim "file to open"`。

# c++-cli - Nunit 找不到 C++ 程序集

> ID：11738485
> 
> 赞同：2
> 
> 时间：2012-07-31T10:53:34.640
> 
> 标签：c++-cli, nunit

我正在开发使用 VS2005 C++/CLI 库的 .NET 4 应用程序。围绕 C++/CLI 库的测试是基于自定义控制台的测试运行器，有点笨拙。我一直在尝试使用 nunit 编写一些新的测试。

问题是基于控制台的应用程序可以加载所有依赖程序集，但 Nunit 抱怨它找不到程序集（例如 System.Runtime.Serialization.SerializationException : Unable to find assembly 'msvcm80, Version=8.0.50727.6195, Culture=neutral, PublicKeyToken= b03f5f7f11d50a3a'）。

我已经确定基于控制台的应用程序正在 C:\Windows\winsxs\x86_microsoft.vc80.crt_1fc8b3b9a1e18e3b_8.0.50727.6195_none_d09154e044272b9a\mscvm80.dll 中加载程序集，并将此文件手动复制到构建目录和测试运行程序目录。这无济于事。

Depends.exe 告诉我 GPSCV.DLL 和 IESHIMS.DLL 找不到，但这并不能阻止控制台应用程序加载依赖项，因此不确定这是否重要。

有没有人对具有旧 C++/CLI 库依赖项的 Nunit 测试进行故障排除的任何提示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T14:48:58.080

当我将 nunit 可执行文件运行到构建输出路径时，我的新测试在 nunit 中成功运行。

看起来这个问题只是需要在与 nunit 运行器相同的路径中（或至少 nunit 可访问）所需的 C++ DLL 的情况。令人困惑的是，从在另一个位置运行的 nunit 运行测试时引发的模块加载异常命名了 nunit 路径中不需要的程序集 (msvcm80.dll)。无论如何，依赖树对我来说有点不透明，这让我很困惑。

令人讨厌的是，我必须通过 Team City 中的批处理脚本调用 nunit 控制台来运行此程序集的 CI 测试，而不是在 Team City nunit 测试运行程序中（就像我们对所有其他测试所做的那样）。

# ajax - 创建像stackoverflow这样的ajax自动完成字段

> ID：11738495
> 
> 赞同：1
> 
> 时间：2012-07-31T10:54:16.890
> 
> 标签：ajax, autocomplete, mootools, jquery-autocomplete

如何创建 ajax 自动完成字段，如 Stackoverflow 中的标签字段，用户可以在字段上插入标签后使用删除图标删除标签。（使用 Mootools 或 jQuery）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-13T17:44:33.100

您可以使用 Meio.Autocomplete 类来实现此行为。我正在使用它来完成您要求的任务。有关如何使用它的详细信息，请查看[此页面。](https://github.com/fabiomcosta/mootools-meio-autocomplete)

# android - 活动和 Web 视图

> ID：11738499
> 
> 赞同：0
> 
> 时间：2012-07-31T10:54:26.517
> 
> 标签：android, android-webview

我正在创建一个带有多个`WebView`'. 我这样做是因为当用户按下菜单按钮然后再次按下旧菜单按钮时，网页的状态将被保存而不是重新加载，这将通过将 URL 加载到仅一个`WebView`.

我只是想要一些建议，应该所有的都`WebView`在同一个活动中吗？我已经阅读了有关活动的 API 文档，但我不完全确定它们的用途，简单的说明会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T11:18:04.497

不要害怕为每个屏幕创建新的活动。Activity 针对在 Android 上的使用进行了优化。Java开发人员使用和避免使用活动是一种误解。不要害怕他们。也就是说，如果你确定你只显示了 webview，那么你最好只使用一个活动。

# sql - 列的动态映射

> ID：11738502
> 
> 赞同：0
> 
> 时间：2012-07-31T10:54:35.500
> 
> 标签：sql, ssis

我有两个表源，目的地。目标表具有固定列 ID、Product_name、Product_description。

在源表中有三列 ID、Product_name、Product_description。

我想使用 SSIS 将源表中的列映射到目标表中的类似列。

问题是源表中的列名 ID 将来可能会更改为 ProductID,uniqueID。

源表中的列名 Product_name 将来可能会更改为 Name,name_of_product。

源表中的列名 Product_description 将来可能会更改为 describe,desc。

即使列名发生更改，我也想将源表的列映射到目标表，而不是每次都手动映射列。

从某种意义上说，无需接触包装。

请帮我解决一下这个。

问候， Preethi

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T15:29:23.647

只有一种方法可以动态地将源列与距离列映射。我们需要使用 Script Task 来处理这类场景。如果您知道 Vb.Net 或 C#.net，那么我们可以编写脚本来读取源列并将其动态映射到目标列。

# bash - 如何在远程服务器上执行本地 shell 脚本？

> ID：11738503
> 
> 赞同：0
> 
> 时间：2012-07-31T10:54:37.907
> 
> 标签：bash, shell

我的本地机器上有一个 shell 脚本，我必须在远程服务器上执行那个 shell 脚本。我做了一些步骤如下：

1.  来自本地机器和远程服务器的配对 SSH 密钥；
2.  `ssh user@hostname 'bash - s' < user_add.sh`;

我收到一个错误：

```
standard in must be a tty
: command not found
bash: line 4: useradd: command not found
Usage: /etc/init.d/vsftpd {start|stop|restart|condrestart|status}
Only root can do that.
chmod: cannot access `/102/prsuser\r': Permission denied
mkdir: cannot create directory `/102/prov/\r': Permission denied
bash: line 8: useradd: command not found
Only root can do that.
chmod: cannot access `/102/prov/PROV_LIS_RESP_DIR\r': Permission denied
chown: cannot access `/102/prov/\r': Permission denied
bash: line 12: /etc/vsftpd/chroot_list: Permission denied 
```

root 登录是不能正常进行的，我们可以通过从普通用户帐户切换为 root 登录`su - command`。

所以这是我的疑问，如何在远程服务器上以root身份运行脚本以及在我的脚本（user_add.sh）的起点切换root帐户的脚本是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T11:10:17.727

您可以进行修改`user_add.sh`，使其可以使用具有 root 权限的用户执行命令：

```
su $ROOT_USER -c "command arg1 arg2" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T19:55:27.290

好吧，这有点奇怪，您尝试实现的目标，但您可以做到：

```
ssh user@hostname sudo -S < user_add.sh 
```

中的命令`user_add.sh`将在 中解释并在 中`hostname`运行`sudo`。用户`user`必须在`/etc/sudoers`at `hostname`（with`NOPASSWD`语句）中有相应的条目。

如果无法添加，则`NOPASSWD`需要以这种方式运行命令：

```
(echo PASSWORD; cat user_add.sh) | ssh user@hostname 
```

而不是 PASSWORD 你必须写密码`user`at `hostname`。

如果您`sudo`没有自动添加`/sbin`，`PATH`则需要手动添加：

```
(echo PASSWORD; echo 'PATH=/sbin:/usr/sbin:$PATH'; cat user_add.sh) \
| ssh user@hostname 
```

最后一件事。我注意到`\r`您的脚本中有符号（在 Windows 上编辑？）。最好删除它们：

```
(echo PASSWORD; echo 'PATH=/sbin:/usr/sbin:$PATH'; cat user_add.sh) \
| tr -d '\r' \
| ssh user@hostname 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T11:27:29.893

您可以使用 sudo 代替 su （并在 sudoers 文件中定义您需要作为用户使用的所有命令）

您还可以启用 root 帐户。作为旁注，该帐户不一定需要命名为“root”，您实际上可以创建一个新用户（命名为任何名称），然后编辑 passwd 文件并将 uid 值 0 分配给该帐户。

# json - 如何使用 Jackson 找到 json 节点的当前完整路径？

> ID：11738504
> 
> 赞同：2
> 
> 时间：2012-07-31T10:54:39.433
> 
> 标签：json, jackson

我在类中定义了一个 JsonParser。我将穿越它。但是当我这样做时，我需要获取我所在的当前节点的完整路径。在不影响性能的情况下提取完整路径的最佳方法是什么。Jackson 中是否有一个 API 已经可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T17:09:49.330

您可以使用 获取上下文信息`JsonParser.getParsingContext()`。或者，如果您想要相对于输入源（行、列）的位置，您可以使用`JsonParser.getLocation()`.

# drop-down-menu - 将下拉列表值重新选择为默认选项（“选择”）时如何更改行颜色？

> ID：11738506
> 
> 赞同：0
> 
> 时间：2012-07-31T10:54:42.360
> 
> 标签：drop-down-menu, colors, indexing, default

我在每一行都有带有下拉列表模板字段的gridview..所有下拉列表都设置为默认值“选择”。当我从下拉列表中选择任何值时，它会改变下面第三行的颜色但是当我重新选择“选择”选项颜色仍然存在于第 3 行。我不需要它。应该将其更改为 gridview 的默认颜色，即白色。这是我的代码。

```
protected void GridView1_SelectedIndexChanged(object sender,EventArgs e)
    {

       DropDownList ddl = (DropDownList)sender;
        GridViewRow row = (GridViewRow)ddl.NamingContainer;

        int g = row.RowIndex + 3;
        int current_row_index = row.RowIndex;
        foreach (GridViewRow gvRow in GridView1.Rows)
        {

            gvRow.BackColor = Color.White;

           if (gvRow.FindControl("dropdownid") != null && gvRow.RowIndex != current_row_index)
            {
                ((DropDownList)gvRow.FindControl("dropdownid")).SelectedIndex = 0;
            }
             }

             GridView1.Rows[g].BackColor = Color.Red;

         } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T11:35:09.073

已解决。我对代码进行了以下更改，并且工作正常。

```
 protected void GridView1_SelectedIndexChanged(object sender,EventArgs e)
    {

       DropDownList ddl = (DropDownList)sender;
        GridViewRow row = (GridViewRow)ddl.NamingContainer;
        int count=0;
        int g = row.RowIndex + 3;
        int current_row_index = row.RowIndex;
        foreach (GridViewRow gvRow in GridView1.Rows)
        {

            gvRow.BackColor = Color.White;
            if (((DropDownList)gvRow.FindControl("dropdownid")).SelectedIndex != 0)
            {
               // GridView1.BackColor = Color.Yellow;
                count++;

                Response.Write("null");

            }

           if (gvRow.FindControl("dropdownid") != null && gvRow.RowIndex != current_row_index)
            {
                ((DropDownList)gvRow.FindControl("dropdownid")).SelectedIndex = 0;
            }
             }

             GridView1.Rows[g].BackColor = Color.Red;
              Response.Write("count="+count);

              if (count == 0)
              {
                  foreach (GridViewRow gvRow in GridView1.Rows)
                  {
                      gvRow.BackColor = Color.White;

                  }

              }

         } 
```

# c# - iframe 内容大小

> ID：11738508
> 
> 赞同：0
> 
> 时间：2012-07-31T10:54:48.323
> 
> 标签：c#, asp.net, iframe

我正在使用`iframe`inside a`div`并且我注意到一件奇怪的事情，视图在 iframe 中看起来缩小了，因为在文本中看起来比在单独的页面上要小。

为什么会这样，我怎样才能使它和正常大小一样？

iframe 的代码：

```
function SetContent(link) {
            document.getElementById('lowerContent').innerHTML =
         "<iframe frameborder='0' src='" + link + "' width='100%'" + " height='" + (screen.height - 100) + "px'";
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T21:23:17.283

假设“lowerContent”是 div，一个问题是您似乎没有关闭 iframe。不要忘记添加....

```
"></iframe>" 
```

# sql-server-2008 - 使用全文搜索进行名称搜索

> ID：11738511
> 
> 赞同：0
> 
> 时间：2012-07-31T10:55:06.877
> 
> 标签：sql-server-2008, tsql, full-text-search

表：用户

```
...|Name                  |...|..
__________________________________
...|george walker          |...|..
...|...                   |...|.. 
```

现在我想编写一个查询来获取以下输入的上述记录： `george` `george walker` `george walker bush`等。

即，搜索字符串中至少一半的单词应该匹配，但不是任何单词匹配

我该如何为此编写查询？

注意：我想使用`Full Text Search`功能，因为该表有几百万条记录。
我怀疑我是否可以使用`SOUNDEX`with`Full Text`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T19:49:07.637

假设您有全文索引您的名称列...

```
declare @search varchar(1000), @searchquery varchar(1000)

select @search = 'george walker bush' -- your search terms here.

select @search = ltrim(rtrim(@search))  
select @searchquery  = 'ISABOUT (' 
    + replace(@search, ' ', ' WEIGHT (0.4), ') 
    + ' WEIGHT (0.4))'

select * from [User]
inner join 
    Containstable(
        [User], 
        Name, 
        @searchquery
        ) as keys
        on keys.[key]    = [user].id
where rank>50 
```

# jquery - 动画滚动在 iframe 中不起作用

> ID：11738512
> 
> 赞同：0
> 
> 时间：2012-07-31T10:55:09.660
> 
> 标签：jquery, asp.net, iframe

我有一个包含 iframe 页面 (iframe.aspx) 的父页面 (default.aspx)……jQuery 动画滚动在 iframe.aspx 中完美运行，但在父页面 (default.aspx) 中无法正常运行。

iframe.aspx 页面：

```
 <input type="button" onclick="scollWin();" value="Scroll up" />

 <div id="scrollToHere">
  Scroll to here
  </div>

  <script type="javascript">
     function scrollWin(){
     $('html,body').animate({
     scrollTop: $("#scrollToHere").offset().top
     }, 2000);
 }
 </script> 
```

工作：当我点击按钮时，滚动窗口顺利工作，它转到`div`.

父页面（default.aspx）：

```
<iframe id="iframebody" runat="server" src="iframe.aspx" style="width:900px;height:600px"></iframe> 
```

当我运行 default.aspx 页面并单击按钮时，滚动不起作用。

你能告诉我如何访问父滚动窗口吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T11:10:07.713

当我做对了，脚本在 Iframe.aspx 里面？然后你应该在 default.aspx 中定义另一个 jscript 函数，然后调用它：

```
 <input type="button" onclick="parent.scollWin();" value="Scroll up" /> 
```

另一种选择：您是否尝试过使用 jQUery Plugin ScrollTo？

[滚动到](http://archive.plugins.jquery.com/project/ScrollTo)

# mysql - 插入时选择？

> ID：11738517
> 
> 赞同：1
> 
> 时间：2012-07-31T10:55:21.537
> 
> 标签：mysql, select, insert

我不确定这是否可能，但我正在尝试插入，同时选择一个值来做 +1。我这样做的原因是因为我的列是自动递增的，但是值到处都是。

这是我到目前为止所拥有的，它不会让我插入：

```
insert into channels set chanid=(select chanid from channels where parent=2
order by chanid desc limit 1)+1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T10:57:55.837

```
insert into channels(chanid)
select chanid+1 from channels where parent=2 
order by chanid desc limit 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T19:43:44.597

尝试在子查询中使用别名。它对我有用。

```
insert into channels
set chanid=(
    select c.chanid
    from channels as c
    where c.parent=2
    order by c.chanid desc
    limit 1
)+1 
```

参考：[http ://bugs.mysql.com/bug.php?id=6980](http://bugs.mysql.com/bug.php?id=6980)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T10:58:14.297

如果我理解正确你的问题试试这个！

```
insert into channels set chanid=(select chanid+1 from channels where parent=2 order by chanid desc limit 1) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T10:59:31.547

要重置`auto-increment`值，您可以尝试

```
SET @var_count = 0;

UPDATE channels 
SET chanid = (@var_count := @var_count + 1); 
```

或者

删除`auto-increment`列并在其`PRIMARY KEY`上重新创建它。

# delphi - 必应搜索 API Azure 市场身份验证（Delphi + Indy）

> ID：11738518
> 
> 赞同：1
> 
> 时间：2012-07-31T10:55:21.743
> 
> 标签：delphi, azure, delphi-xe, bing, indy10

谁能指出正确的方向？我正在尝试使用新的 Bing API 执行网络搜索，但使用下面的代码，我不断收到“HTTP/1.1 400 Bad Request”。相同的请求在浏览器下运行良好（将用户名留空并在提示框中提供密码下的密钥）。

```
var
  IdHTTP1 : TIdHTTP;
  uri : string;
  myIOhandler : TIdSSLIOHandlerSocketOpenSSL;
begin
  myIOhandler := TIdSSLIOHandlerSocketOpenSSL.Create(nil);
  with myIOhandler do
  begin
      SSLOptions.Method := sslvTLSv1;
      SSLOptions.Mode := sslmUnassigned;
      SSLOptions.VerifyMode := [];
      SSLOptions.VerifyDepth := 0;
      host := '';
  end;

  IdHTTP1:= TIdHTTP.Create(nil);
  IdHTTP1.Request.UserAgent:= 'Mozilla/3.0 (compatible; IndyLibrary)';
  IdHTTP1.Request.Accept := 'text/javascript';
  IdHTTP1.Request.ContentType := 'application/json';
  IdHTTP1.Request.ContentEncoding := 'utf-8';

  IdHTTP1.HandleRedirects:= True;
  IdHTTP1.ConnectTimeout:= 10000;
  IdHTTP1.ReadTimeout:= 10000;
  IdHTTP1.Request.CacheControl := 'no-cache';
  IdHTTP1.Request.BasicAuthentication:= True;
  IdHTTP1.Request.Authentication:= TIdBasicAuthentication.Create;
  IdHTTP1.Request.Authentication.Username:= '';
  IdHTTP1.Request.Authentication.Password:= APIKey;//Encode64(APIKey);//Encode64(APIKey+':'+APIKey)
  IdHTTP1.IOHandler:= myIOHandler;

  uri:= 'https://api.datamarket.azure.com/Bing/SearchWeb/Web?'+
          'Query=%27'+ query_text +'%27&$format=JSON&$top=50&$skip=0';
  s:= IdHTTP1.Get(uri); 
```

MS文档很差。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T17:20:29.027

`TIdHTTP``Basic`自动为您处理身份验证。只需设置`IdHTTP1.Request.BasicAuthentication := True`然后填写`IdHTTP1.Request.Username`和`IdHTTP1.Request.Password`属性。你不需要`TIdBasicAuthentication`直接处理。

如果您想支持其他身份验证，例如 NTLM，只需将相关`IdAuthentication...`单元或`IdAllAuthentication`单元添加到您的`uses`子句中。

You can also implement your own custom `TIdAuthentication`-derived class if you want to support custom authentications that Indy does not natively support. You can either call `RegisterAuthenticationMethod()` so `TIdHTTP` can use your custom class automatically, or you can use the `TIdHTTP.OnSelectAuthorization` event to assign the class manually on a per-request basis.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T14:33:28.017

我认为问题在于用户名。使用基本身份验证，您需要发送如下所示的标头：

```
Authorization: Basic BASE64ENC(username:password) 
```

由于在您的情况下用户名是空的，因此您实际上是在发送：

```
Authorization: Basic BASE64ENC(:password) 
```

尽管文档说将用户名留空，但这仅适用于您通过浏览器访问页面时。查看文档末尾的代码示例，您会发现在许多示例中，用户名和密码都是帐户密钥：

```
bingContainer.Credentials = new NetworkCredential(accountKey, accountKey); 
```

我建议你在你的代码中做同样的事情：

```
IdHTTP1.Request.Authentication:= TIdBasicAuthentication.Create;
IdHTTP1.Request.Authentication.Username:= APIKey;
IdHTTP1.Request.Authentication.Password:= APIKey; 
```

# c# - 字符串转换不起作用

> ID：11738519
> 
> 赞同：5
> 
> 时间：2012-07-31T10:55:23.127
> 
> 标签：c#, casting, operator-overloading, type-conversion

考虑这样一个类：

```
public class MyString
{
 private string _string;

 public string String
 {
  get { return _string; }
  set { _string = value; }
 }

 public MyString(string s)
 {
  _string = s;
 }

 public static implicit operator string(MyString str)
 {
  return str.String;
 }

 public static implicit operator MyString(string str)
 {
  return new MyString(str);
 }
} 
```

如何使以下代码工作？

```
MyString a = "test";
object b = a;
var c = (string)b; 
```

现在我得到了这个例外：

> **InvalidCastException：无法将“MyString”类型的对象转换为“System.String”类型。**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T10:58:10.570

自定义隐式/显式运算符仅在**类型**值之间起作用 - 而不是`object`. 这样的转换总是要么是基本的类型检查，要么是取消装箱。隐式转换是：

```
string s = a; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T11:06:33.650

您可以尝试将最后一行更改为：

```
string c = (string)((MyString)b); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-31T11:14:03.530

自定义演员表是变相的功能。是执行实际转换还是调用自定义转换运算符取决于被转换表达式的编译时类型。

在您的示例中，正在转换的表达式的编译时类型即。表达式`b`的`object`类型`object`是没有自定义转换为字符串的类型。然而，强制转换**可能**是有效的，因此编译器允许。

```
MyString a = "test";
object b = a;
var c = (string)b;
string d = a;
var e = (string)a; 
```

第四行将被视为 //calls 定义为自定义转换字符串的函数 d = MyString.op_implicit(a);

第五行也是如此。第五行即使它使用强制转换的语法*也不***是**强制转换而是转换。

然而，第三行看起来像演员表并且是演员表。强制转换是你告诉编译器你有更多关于对象**运行时**类型的信息，而不是编译。`(string)a`告诉编译器它可以放心由 a 表示的对象将具有字符串的运行时类型。在您的情况下，这不是真的，它具有`MyString`不是从字符串派生的类型（并且不能因为字符串是密封的）。

关键是，尽管自定义转换（使用隐式或显式定义）具有与强制转换相同的语法，但它们与强制转换完全不同。强制转换永远不会离开继承链（包括继承接口），您可以通过强制转换在链上上下移动，但**永远不会**离开它

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-31T11:02:04.840

你应该试试 ：

```
public MyString:String
{
//code
} 
```

# android - Android：从 URL 下载返回的 Zip 文件

> ID：11738526
> 
> 赞同：1
> 
> 时间：2012-07-31T10:55:32.687
> 
> 标签：android, url, zip, webserver, download

如果我有一个 URL，当在 Web 浏览器中提交时，会弹出一个对话框来保存一个 zip 文件……我将如何在 android 中捕获和下载这个 zip 文件？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-31T10:58:42.683

```
public void downloadFromUrl(String url, String outputFileName) {

    File dir = new File(Environment.getExternalStorageDirectory() + "/");
    if (dir.exists() == false) {
        dir.mkdirs();
    }
    try {
        URL downloadUrl = new URL(url); // you can write any link here

        File file = new File(dir, outputFileName);          
        /* Open a connection to that URL. */
        URLConnection ucon = downloadUrl.openConnection();

        /*
         * Define InputStreams to read from the URLConnection.
         */
        InputStream is = ucon.getInputStream();
        BufferedInputStream bis = new BufferedInputStream(is);

        /*
         * Read bytes to the Buffer until there is nothing more to read(-1).
         */
        ByteArrayBuffer baf = new ByteArrayBuffer(5000);
        int current = 0;
        while ((current = bis.read()) != -1) {
            baf.append((byte) current);
        }

        /* Convert the Bytes read to a String. */
        FileOutputStream fos = new FileOutputStream(file);          
        fos.write(baf.toByteArray());
        fos.flush();
        fos.close();

    } catch (IOException e) {
        e.printStackTrace();

    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T10:58:27.930

使用[DownloadManager](http://developer.android.com/reference/android/app/DownloadManager.html)下载 Url，虽然我不确定是否有任何重定向，但 DownloadManager 会处理它。

# java - 评估条件的方法的命名

> ID：11738531
> 
> 赞同：0
> 
> 时间：2012-07-31T10:55:45.010
> 
> 标签：java, naming-conventions

以下方法在抽象基类中实现，该基类由许多子类扩展：

```
public final void doSomething() {
    if( hasBehavior1() ) {
        // special behavior 
    }

    if( hasBehavior2() ) {
        // special behavior 
    }

    // do other things
}

protected abstract boolean hasBehavior1();
protected abstract boolean hasBehavior2(); 
```

`hasBehaviorX()`对于特殊行为的情况，我应该如何命名这些方法

*   加密一些数据？
*   忽略错误？
*   检查正确性？

特殊行为太容易使用不同的实现模式，比如[策略模式](http://en.wikipedia.org/wiki/Strategy_pattern)，所以我真的在这里寻找一些有用的命名约定。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T11:06:15.723

用于检查正确性

```
isCorrect() 
```

忽略错误

```
isErrorIgnored() 
```

用于加密数据

```
isEncrypted() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T11:10:46.273

考虑改为编写无操作方法：

```
protected boolean doBehavior1() {}
protected boolean doBehavior2() {} 
```

根据需要在子类中实现。这样，您可以将处理推迟到子类，而无需询问这些子类是否需要这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T15:32:49.423

我找到了一种表达特殊行为的方法，方法是使用布尔成员的 Java 约定，动词采用目前的渐进形式：

```
isEncrypting()
isIgnoringError()
isCheckingForCorrectness() 
```

# visual-studio-2010 - 程序集内部版本号不正确，并且 Visual Studio 2010 中的修订版没有更改

> ID：11738535
> 
> 赞同：1
> 
> 时间：2012-07-31T10:55:50.430
> 
> 标签：visual-studio-2010, assemblyversionattribute

有一个项目，我们将Assembly版本号指定为1.1.*，据我理解，这意味着第三个数字（build number）和第四个数字（revision number）会自动生成，规则是build number 将是自 1.1.2000 以来的天数，修订号将是自午夜以来的秒数除以 2。然而，在我今天 31.7.2012 构建这个项目之后，内部版本号是 4590，对应于日期 26.7.2012（即使在 Windows 资源管理器中它说这个文件在 31.7.2012 被修改！），以及修订号始终是 27021，无论我今天什么时候构建它。

我想知道，是否还有其他一些参数可以控制可能产生这种结果的自动版本控制？谢谢！

# sharepoint - 带有 ADFS 和自定义 STS 的 SharePoint 2010 SSO

> ID：11738537
> 
> 赞同：1
> 
> 时间：2012-07-31T10:56:11.797
> 
> 标签：sharepoint, single-sign-on, adfs

我有以下场景：

三个不同的 Sharepoint Server：sp1.company.com；sp2.company.com... 使用 Windows 身份验证的内部用户和使用基于表单的身份验证 (FBA) 的外部用户。

当外部用户从一台服务器更改为另一台服务器时，他们必须再次登录。我的目标是为所有 SharePoint Server 提供单点登录 (SSO)。

我想也许我可以通过为内部用户使用 ADFS 和为外部用户使用 customSts（ThinkTecture IdentityServer）来做到这一点。

这可能吗？如何设置 Sts 服务器 ADFS 和 IdentityServer？我是否必须通过 WS-Federation 将 ADFS 连接到 IdentityServer？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T14:26:52.003

是的，您提出的架构很好。您将不得不停止在 SharePoint 上使用表单身份验证和 Windows 身份验证，并开始使用基于声明的（SAML 和 WS-Fed）作为单一登录机制。架构模式是：您的应用程序信任“联合中心”（可以是 ADFS 或 Windows Azure Active Directory）。该服务器将与您的身份提供者和应用程序建立所有信任关系。就您而言，您今天拥有的是几个 SharePoint 应用程序和两个身份提供程序（一个通过 ADFS 的 AD，另一个通过 Identity Server 之类的自定义数据库）。

![](../Images/3a144048852015c6a8904c1ae1199513.png)

一切都通过标准协议和令牌格式连接起来。从 SharePoint 到“联合中心”，您将使用 WS-Federation 和 SAML 1.1 令牌。从“联合中心”到 ADFS，您将使用 WS-Federation 和 SAML 1.1 或 2.0 令牌。从“联合集线器”到 Identity Server，它与 ADFS 相同。将来，如果您想插入 Facebook 之类的东西，“联合中心”需要使用 OAuth，但 SharePoint 仍将使用 WS-Federation，因此您不必接触那部分。

ADFS 作为联合中心将为您提供对 WS-Federation 和 SAML 协议（但不包括 OAuth）的支持。今天对你来说可能已经足够好了。您可能需要考虑[Windows Azure Active Directory](http://acs.codeplex.com/)（以前称为 Windows Azure 访问控制服务），它是 Microsoft 作为服务提供的“联合中心”（每 100K 登录的价格标签为 2 美元）。微软目前更专注于 WAAD 而不是 ADFS。WAAD 将为您提供对 OAuth、移动方案、Office 365 等的支持。并不是说 ADFS 正在退役或类似的东西，只是我对投资地点的看法。

将事情放在一起需要一些学习和时间，因此请准备好遇到一些问题，例如证书问题、错误配置、家庭领域发现、声明转换、SharePoint 人员选择器、cookie、注销等。

这里有一些提示：

*   将 IdentityServer 作为声明提供程序添加到 ADFS 很简单，您必须使用 IdentityServer 提供的 FederationMetadata 端点并将其添加为 ADFS（向导或 PowerShell）中的声明提供程序。
*   [使用 ADFS 配置 SharePoint 2010](http://blogs.technet.com/b/speschka/archive/2010/07/30/configuring-sharepoint-2010-and-adfs-v2-end-to-end.aspx)
*   [设置 ADFS](http://blogs.msdn.com/b/moss_attacks/archive/2012/03/20/zen-and-the-art-of-adfs-implementation-part-1-of-5-introduction.aspx)
*   [在 5 分钟内将 SharePoint 2010 与 Windows Azure AD 配置为使用 Auth10 使用 Google 和 ADFS 身份](http://blog.auth10.com/2012/07/04/configuring-sharepoint-2010-to-accept-google-and-adfs-identities/)。最后一个属于我们正在构建的产品，旨在简化所有这些:)

马蒂亚斯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T15:00:14.133

谢谢你的回复，对我帮助很大。

我设法构建了一个使用 ADFS 和 CustomSTS 进行身份验证的简单 ASP 应用程序。我可以在 ADFS 中选择主域，并可以在 IdentityServer 中登录，但没有重定向回我的应用程序。此外，我没有管理它来使用 SharePoint。使用 PowerShell 脚本应该很容易，但它还没有工作。

关于人员选取器：我知道我必须覆盖 SharePoint 中的 ClaimsProvider。我是否必须查询 AD 和我的自定义成员资格提供商？

我调查了你的产品。也许这对我们也有用。我会进一步测试它。

问候，帕特里克

# php - PHP 在 JSON 中查找所有项目

> ID：11738540
> 
> 赞同：0
> 
> 时间：2012-07-31T10:56:18.893
> 
> 标签：php, json

这是我想要搜索以获取特定键的特定值的所有出现的原始 json

```
{services:
[
{
servicetypeid: "26",
serviceid: "50",
servicename: "Tax Evasion",
description: "Tax Evasion",
optioncode: { },
inputid: { },
price: { },
categoryidentifier: { }
},
{
servicetypeid: "27",
serviceid: "51",
servicename: "Parking",
description: "Parking Related Payments",
optioncode: { },
inputid: { },
price: { },
categoryidentifier: { }
},
{
servicetypeid: "27",
serviceid: "52",
servicename: "Markets",
description: "Markets Related Payments",
optioncode: { },
inputid: { },
price: { },
categoryidentifier: { }
},
{
servicetypeid: "27",
serviceid: "53",
servicename: "PSV",
description: "Public Service Vehicles",
optioncode: { },
inputid: { },
price: { },
categoryidentifier: { }
},
{
servicetypeid: "5",
serviceid: "54",
servicename: "Vehicle Bill",
description: "Check any Bill Attached to Your Vehicle",
optioncode: "212",
inputid: "216",
price: { },
categoryidentifier: { }
}
]
} 
```

我一直在尝试编写一个函数，例如\ findInjson($jsonObj,$field,value)

这将返回 findInjson($jsonObj,'servicetypeid','27');

```
{services:[
{
servicetypeid: "27",
serviceid: "51",
servicename: "Parking",
description: "Parking Related Payments",
optioncode: { },
inputid: { },
price: { },
categoryidentifier: { }
},
{
servicetypeid: "27",
serviceid: "52",
servicename: "Markets",
description: "Markets Related Payments",
optioncode: { },
inputid: { },
price: { },
categoryidentifier: { }
},
{
servicetypeid: "27",
serviceid: "53",
servicename: "PSV",
description: "Public Service Vehicles",
optioncode: { },
inputid: { },
price: { },
categoryidentifier: { }
}
]
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T11:12:14.053

要通过该数组中的这些键进行搜索，您可以执行以下操作：

**PHP 5.3**的解决方案

 **```
function findinjson($jsonContent, $field, $value)
{
    $jsonObject = json_decode($jsonContent, true);
    // This is to search inside the first array, which only has one element
    $searchArray = $jsonObject['services'];

    // Array filter applies the function given as a parameter to each element of $searchArray
    $filteredArray = array_filter($searchArray, function($element) use ($field, $value) {
        return array_key_exists($field, $element) && $element[$field] == $value;
    });

    // Output the data the same way it was given, but filtered.
    return json_encode(array('services' => $filteredArray));
} 
```

希望这已经足够了。如果您需要**PHP 5.2**`$filteredArray`解决方案，您可以通过迭代构建`$searchArray`并仅添加到`$filteredArray`通过条件的元素，而不是使用数组过滤器。因此，调用`array_filter`将替换为以下代码：

```
$filteredArray = array();

foreach ($searchArray as $element) {
    if (array_key_exists($field, $element) && $element[$field] == $value) {
        $filteredArray[] = $element;
    }
} 
```**

# android - 在基于计时器的事件（线程）和android中的onLocationChange之间共享数据

> ID：11738541
> 
> 赞同：1
> 
> 时间：2012-07-31T10:56:20.160
> 
> 标签：android, multithreading, interface, locationlistener

场景 - 我有一个基于计时器的事件线程，我通过发布请求发送数据（纬度和经度）。我有一个 onLocationChange 方法（我的类在 LocationListener 上实现），它在位置更改时被调用。它设置新的纬度和经度值，稍后应由计时器事件调用。

计时器事件不会在位置更改事件中获取最新的纬度和经度值。当计时器事件开始时，即使位置发生变化，它也不会调用 onlocationchange 方法。

这是计时器事件：

/** 此方法每 10 秒调用一次服务。*/

```
protected void timerMethod(CookieStore cookieStore, String url) {
    int delay = 1000; // delay for 1 sec.
    int period = 10000; // repeat every 10 sec.
    timer = new Timer();
    if (timer != null) {
        timer.scheduleAtFixedRate(new TimerTask() {
            public void run() {
                timerThread = new Thread() {
                    @Override
                    public void run() {

                        sendpostRequest();  // calling the post method
                    }
                };
                timerThread.start();

            }
        }, delay, period);
    }
} 
```

这是位置更改事件：

/** 当位置改变时调用此方法。*/

```
public void onLocationChanged(Location location) {

    isLocationChanged = true;  // setting a boolean value which is checked while posting the request
    System.out.println();
    System.out.println("Location change:::longitude::::" + location.getLongitude() + "latiude::::"
            + location.getLatitude());

    latClient = location.getLatitude();
    longClient = location.getLongitude();

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T11:04:17.117

[处理程序](http://developer.android.com/reference/android/os/Handler.html)是线程之间通信的一种方式，认为您可以使用它:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T18:30:49.253

我不确定我是否完全理解这个问题，但是这个解决方案效率低下，它创建了一堆线程，这些线程非常耗费资源。试试这样的东西。我在这个窗口中写了这一切并且没有测试，所以请确保你这样做，但鉴于你的问题描述，我认为这是正确的方向。确保在某个时候调用 TimerLooper.terminate() 否则你只会让这个线程流失。

```
private void startTimerThread() {
    mTimerLooper = new TimerLooper(new Handler() {
            @Override
            public void handleMessage() {
                onLocationChanged();
            }
        }, "timer-thread");
    mTimerLooper.start();
}

private class TimerLooper extends HandlerThread() {
    private static final int MSG_TERMINATE = 1;
    private static final int MSG_TIMER_EXPIRATION = 2;
    private Handler mCallback;
    private Handler mHandler;

    public TimerLooper(Handler callback, String name) {
        mCallback = callback;
    }

    @Override
    public void onLooperPrepared() {
        mHandler = new Handler() {
            @Override
            public void handleMessage(Message msg) {
                switch (msg.what) {
                    case MSG_TERMINATE:
                        mHandler.removeMessages(MSG_TIMER_EXPIRATION);
                        getLooper().quit();
                        break;
                    case MSG_TIMER_EXPIRATION:
                        mCallback.sendEmptyMessage(0);
                        mHandler.sendEmptyMessageDelayed(
                                10000, MSG_TIMER_EXPIRATION);
                        break;
                }
        mHandler.sendEmptyMessageDelayed(10000, MSG_TIMER_EXPIRATION);
        super.onLooperPrepared();
    }

    public void terminate() {
        mHandler.sendEmptyMessage(MSG_TERMINATE);
    }
} 
```

# .net - 如何在 Nhibernate 中指定 Bag 的索引？

> ID：11738543
> 
> 赞同：0
> 
> 时间：2012-07-31T10:56:21.547
> 
> 标签：.net, nhibernate, indexing

我用 Postgre 数据库设置了 NHibernate。我将代码映射与 ConventionModelMapper 结合使用。

NHibernate 默认不为外键创建索引。对于一个简单的列，我可以使用映射中`Index`的方法设置外键。`Property`然而，没有这样的`Bag`映射方法。

我必须定义反向关系来定义索引吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T11:52:30.723

你必须定义你想要索引的包映射的哪一列。很可能是 KeyColumn

```
Bag(x => x.Collection, m => 
{
    m.Key(key => key.Column(c =>
    {
        c.Index("fooindex");
        c.Name("parent_id");
    }))
}); 
```

# sharepoint - Sharepoint：如何在没有确认的情况下删除中央管理 Web 应用程序？

> ID：11738544
> 
> 赞同：2
> 
> 时间：2012-07-31T10:56:23.523
> 
> 标签：sharepoint, powershell, sharepoint-2010

我想知道如何在没有在 powershell 中确认的情况下删除中央管理 Web 应用程序？我正在使用的脚本（现在所有 Web 应用程序都在未经确认的情况下被删除，只有中央管理 Web 应用程序会请求它）。提前致谢。

```
function RemoveWebApplications()
{
    WriteFuncInfo "Removing all web applications..."

    $applications = Get-SPWebApplication -IncludeCentralAdministration
    if($applications -eq $null)
    {
        WriteFuncInfo "No web applications found."
        return
    }
    WriteFuncInfo "Removing web applications $($applications.Count):"

    foreach($application in $applications)
    {
        WriteFuncInfo "$($application.Name) with database and iis site"
        Remove-SPWebApplication $application -DeleteIISSite -RemoveContentDatabases -Confirm:$false  
    }   
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T05:41:05.357

我找到了解决方案，下面是我现在使用的方法：

```
function RemoveCentralAdministration()
{
    WriteFuncInfo "Removing central administrations:"
    $applications = Get-SPWebApplication -IncludeCentralAdministration | where-object {$_.IsAdministrationWebApplication -eq $true }
    if($applications -eq $null)
    {
        WriteFuncInfo "No central administrations found."
        return
    }
    foreach($application in $applications)
    {
        WriteFuncInfo "$($application.Url)"

        # for central administration web application Remove-SPWebApplication cmdlet requests confiramtion
        # even if parameter '-Confirm:$false' is used

        # Remove-SPWebApplication $application -DeleteIISSite -RemoveContentDatabases -Confirm:$false 
        WriteFuncInfo "`t removing iis site"
        $application.UnprovisionGlobally($true);

        WriteFuncInfo "`t removing databases"
        foreach ($contentDb in $application.ContentDatabases)
        {
            $contentDb.Unprovision();
        }

        $application.Delete();
     }    
} 
```

此解决方案基于“Remove-SPWebApplication”cmdlet 的原始代码。它可以在*Microsoft.SharePoint.PowerShell.dll* *SPCmdletRemoveSPWebApplication*中创建。

# javascript - 如何使用 jsoup 检测内联 js 函数？我基本上想检查内联函数是否存在。

> ID：11738547
> 
> 赞同：0
> 
> 时间：2012-07-31T10:56:35.317
> 
> 标签：javascript, inline, jsoup

如何使用 jsoup 检测内联 js 函数？我基本上想检查内联函数是否存在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T11:30:05.667

实际上，用 jsoup 执行 javascript 代码是不可能的。这就是为什么您无法检查特定功能是否存在的原因。您可以使用此工具解析 DOM。

您应该使用 HTMLUnit( [http://htmlunit.sourceforge.net/](http://htmlunit.sourceforge.net/) ) 之类的东西来调用 JS 函数或语句。

# javascript - 查询大量 Json 数据

> ID：11738549
> 
> 赞同：1
> 
> 时间：2012-07-31T10:56:46.933
> 
> 标签：javascript, jquery, json

我正在处理非常大维度的 Json 中的开放数据。阅读所有内容需要很长时间。是否有一些方法可以进行预查询，以便我可以获取所需的数据？

```
$.getJSON('https://dati.lombardia.it/api/views/kf9b-rj2t/rows.json', function(data) {
      alert("HELLO");
} 
```

我需要等待很多分钟。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T11:07:34.817

在没有看到数据样本或任何格式信息的情况下，一些选项：

1.  将大文件分成更小的块/文件（前提是您对文件中的所有数据有足够的了解）；这些块应该基于您的标准查询所涉及的内容 - 例如，如果您的文件包含员工资料，您可以根据员工职位和性别来破坏文件。
2.  如果可行，将 JSON 文件导出为另一种格式（可能是 SQL？- 让数据库引擎负责其余的工作）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T11:06:01.590

1.  您可以在脚本标签中的 html 中插入 json
2.  您可以在“window.ready”事件上发出 ajax 请求，然后下次浏览器将从缓存中获取它
3.  您可以在服务器端开发一些 api，它只允许获取您需要的内容，而不是所有信息

# extjs - ExtJS 图表系列的渲染器功能

> ID：11738563
> 
> 赞同：2
> 
> 时间：2012-07-31T10:57:24.647
> 
> 标签：extjs

我正在使用 ExtJS 系列渲染器函数来设置`fill`散点图的属性，而不是使用`markerConfig`属性。因为我想为每个点填充不同的颜色。它工作正常。

```
renderer : function(sprite, record, attr, index, store) {
   Ext.apply(attr, {
       fill : '#F00'
   }
} 
```

但我想设置`type`属性，使每个点都显示为不同的类型，如圆形、十字形、加号、菱形等。它不工作。和散点的半径，我无法在渲染器函数中设置属性。

如何在渲染器功能中做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T02:04:40.730

为此，您可以使用这些类型（根据文档）：

*   circle - 绘制圆圈。您可以使用精灵配置中的半径参数来设置半径。
*   rect - 渲染矩形。您可以使用精灵配置中的宽度和高度参数来设置矩形的宽度和高度。
*   text - 将文本渲染为精灵。您可以使用字体参数设置字体/字体大小。
*   path - 最强大的精灵类型。有了它，您可以使用 SVG 路径语法创建任意形状。您可以在此处找到有关如何开始使用路径语法的快速教程。

因此，例如，如果您需要 plus，您可以执行以下操作：

```
renderer : function(sprite, record, attr, index, store) {
    var plus="M-1.1538461538461537,-1.1538461538461537l0,-2.3076923076923075,2.3076923076923075,0,0,2.3076923076923075,2.3076923076923075,0,0,2.3076923076923075,-2.3076923076923075,0,0,2.3076923076923075,-2.3076923076923075,0,0,-2.3076923076923075,-2.3076923076923075,0,0,-2.3076923076923075,z";
    return Ext.apply(attr, { fill: '#F00', type: 'path', path: plus });
} 
```

文档链接：[http ://www.sencha.com/learn/drawing-and-charting/](http://www.sencha.com/learn/drawing-and-charting/)

# reporting-services - 带有报告服务的甘特图

> ID：11738564
> 
> 赞同：2
> 
> 时间：2012-07-31T10:57:31.850
> 
> 标签：reporting-services, gantt-chart

我正在开发一个 MVC .net Web 应用程序，我想使用报告服务设计一个[甘特图。](http://en.wikipedia.org/wiki/Gantt_chart)我应该选择什么样的图表来设计报告？谁能帮我做到这一点？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T21:53:41.750

Reporting Services 不包含甘特图作为一项功能，但是可以使用带有水平条的*范围图来模拟它们。*项目或任务的开始日期和结束日期用于控制图表上水平条的位置，使表示看起来类似于甘特图。

这是一个详细的示例：[https ://www.mssqltips.com/sqlservertip/3521/sql-server-reporting-services-range-charts/](https://www.mssqltips.com/sqlservertip/3521/sql-server-reporting-services-range-charts/)

# c# - Sql 阅读器正在读取空行？

> ID：11738570
> 
> 赞同：2
> 
> 时间：2012-07-31T10:57:55.353
> 
> 标签：c#, sql-server-2008, .net-2.0

我在 SQL 中有一个表，它实际上没有行，但是现在如果我阅读它，它会显示为 null（我猜是默认情况下），它至少会通过阅读器一次，这就是我想要做的。

```
 int Count = 0;

            SqlCommand cmd1 = new SqlCommand("Exists", conn);
            cmd1.CommandType = CommandType.StoredProcedure;
            cmd1.Parameters.Add(new SqlParameter("@Url", URL));
            SqlDataReader rdr1 = cmd1.ExecuteReader();

            if (rdr1.Read())
            {
                Count++;
            } 
```

如何检查 Rdr 行是否为空并且不执行 Counter

**编辑**

存储过程（我不允许对其进行更改）

```
CREATE PROCEDURE [dbo].[Exists]
(
    @Url varchar(255)
)
AS
    SET NOCOUNT ON;
SELECT COUNT(*) AS Rows FROM Instances 
WHERE Url = @Url 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T11:16:20.120

如果读者`true`从报告`Read()`，那么您的存储过程肯定会返回一行（或多行）。

如果您直接调用 SP（SSMS 等），它将很快告诉您是否返回了一行。每一列**都为空的行仍然是一行**。两种选择：

*   修复 SP，使其不会错误地返回行（我猜它正在选择变量。然后选择变量：这将始终产生一行）
*   更改阅读器代码以忽略不可能的数据

例如。如果“真实”行的第一列必须为非空，则只需：

```
if(!reader.IsDBNull(0)) Count++; 
```

如果第一个单元格为空，则忽略该行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T11:18:48.983

而是使用阅读器，为什么不直接使用`ExecuteScaler()`？这是从数据库中检索单个值的更好选择。

如果有使用阅读器的特定要求，那么您需要检查

```
if( reader.Read() ==true && reader[0] !=DBNull.Value)
{
count++;
} 
```

下面是如何使用 ExecuteScalar：如果在数据库中没有找到任何东西，那么它将返回 0。

```
 int Count = 0;
            using (SqlConnection conn = new SqlConnection ( " Your ConnectionString" ))
            {

                using (SqlCommand cmd1 = new SqlCommand ( "Exists", conn ))
                {

                    cmd1.CommandType = CommandType.StoredProcedure;
                    cmd1.Parameters.Add ( new SqlParameter ( "@Url", URL ) );

                    conn.Open ();

                    if( Convert.ToInt32 ( cmd1.ExecuteScalar () ) > 0 )
                    {
                        Count +=1;
                    }
                    conn.Dispose ();

                }
            } 
```

如果没有特定的使用要求，`Count+=1;`那么以下几行将提供面糊

```
Count = Convert.ToInt32 ( cmd1.ExecuteScalar () ); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T11:01:42.737

您可以使用`DBNull.Value`或[IsDBNull(column_ordinal)](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldatareader.isdbnull.aspx)方法来测试特定列的值是否为空。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-31T13:04:29.200

**首先**-您缺少`Memory Management`. 代码应如下所示...

```
int Count = 0;
using (SqlCommand cmd1 = new SqlCommand("Exists", conn))
{
    cmd1.CommandType = CommandType.StoredProcedure;
    cmd1.Parameters.Add(new SqlParameter("@Url", URL));
    using (SqlDataReader rdr1 = cmd1.ExecuteReader())
    {
        if (rdr1.Read())
        {
            Count++;
        }
    }
} 
```

* * *

`Count`将始终返回一些内容，0 条记录或多于 0 条记录。因此，您将始终收到一行，其中包含特定 URL 的行数。

# windows-phone-7 - 如何在 WP7 上获取移动 Facebook 登录对话框？

> ID：11738572
> 
> 赞同：0
> 
> 时间：2012-07-31T10:58:02.850
> 
> 标签：windows-phone-7, facebook-c#-sdk

使用 Facebook C# SDK，我使用带有以下参数的 GetLoginUrl：

```
var parameters = new Dictionary<string, object>();
parameters["client_id"] = FacebookSettings.AppID;
parameters["redirect_uri"] = "https://www.facebook.com/connect/login_success.html";
parameters["response_type"] = "token";
parameters["display"] = "page";
parameters["scope"] = ExtendedPermissions; 
```

并在 WebBrowser 控件中呈现响应。但是，响应是标准桌面网页，不适合在手机中使用。我将如何获得移动登录对话框？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T11:06:09.927

[这里](http://blog.prabir.me/post/Facebook-CSharp-SDK-Writing-your-First-Facebook-Application-v6.aspx)解释得很好

如果您不喜欢使用页面，请按照该博客文章中的说明进行操作，它会为您完成。

> 默认情况下，显示由 Facebook 设置为页面，我们将其覆盖为弹出窗口，以减少占用空间。有关显示模式的更多信息，请访问[http://developers.facebook.com/docs/reference/dialogs/#display](http://developers.facebook.com/docs/reference/dialogs/#display)

# sql - 从多个表中获取数据

> ID：11738574
> 
> 赞同：3
> 
> 时间：2012-07-31T10:58:05.733
> 
> 标签：sql, sql-server

**医学_硕士**

```
 MedicalID MedicalName
       1(pk)     abc
       2         xyx
       3         pqr 
```

**Child_Medical_Master**

```
 ChildMID MedicalID Station Name
       1(pk)    1(fk)     bnb     mfk
       2        1         def     rwr
       3        2         re      wrw 
```

**医疗_访问**

```
 VTID  PMID  RFMID age
       1(pk) 2(fk) 1      34
       2     2     3      45
       3     3     1      45
       4     1     2      44
       5     2     2      76 
```

**医学_研究**

```
 UID   VTID  ChildMID SMID   Date  time 
       1(pk) 1(fk) 1        1      kk    jdj
       2     2     3        2      kdf   lfl
       6     3     2        3      rgr   rtr 
```

**博士_硕士**

```
 RFMID  Doctorname
       1(pk)  mr.john
       2      mr.jack
       3      mr.jim 
```

**PAtient_Master**

```
 PMID   Firstname LastNAme
       1(pk)  df         ere
       2      rwe        rwer
       3      rwr        fwr 
```

**学习_硕士**

```
 SMID   MedicalID Description Duration
       1(pk)  1(fk)     fdf         efe
       2      1         ddf         dfdf
       3      2         df          ef 
```

我想要表中的这些列应该如何成为我的正确查询？

```
UID,PMID,FIRSTNAME,LASTNAME,AGE,MEDICALNAME,DESCRIPTION,STATION,DATE,DoctorName 
```

我在 7 个表上使用了内部联接，但没有得到正确的数据。（医生姓名重复）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T12:58:06.397

虽然我不知道您对最终结果的确切要求，但下面的查询和解释可能有助于解决您的问题。拥有额外的样本数据和您想要的结果样本会有所帮助，但这是我的尝试。

我从一个较小的查询开始，并设法添加表。第一个查询，这不会为您提供大量数据，但会为您提供`ChildMID`,`MedicalId`和`Station`最终产品。你需要`ChildMID`and`MedicalId`来加入更多的表。（[SQL 小提琴](http://sqlfiddle.com/#!3/a2a56/2)）：

```
SELECT *
FROM Medical_Master mm
INNER JOIN Child_medical_Master cmm
  ON mm.MedicalID = cmm.MedicalId 
```

下一张表我添加了您刚刚从上一次加入中获得的`Medical_Study`表加入。`ChildMID`这将使您获得`UID`最终产品（[SQL Fiddle](http://sqlfiddle.com/#!3/a2a56/7)）。

```
SELECT *
FROM Medical_Master mm
INNER JOIN Child_medical_Master cmm
  ON mm.MedicalID = cmm.MedicalId
INNER JOIN Medical_Study ms
  ON cmm.ChildMID = ms.ChildMID 
```

在下一个连接中，我添加了`Study_Master`表格。在这里，我做了一些稍微不同的事情，因为我在两个单独的字段上加入了表格。对于这个查询，我加入了两个`SMID`字段以验证研究是否正确，但我也加入了`MedicalID`字段以确保它使用了正确的医疗记录。（请参阅[SQL Fiddle](http://sqlfiddle.com/#!3/a2a56/5)）如果您不在两个字段上加入，那么您将获得每个项目的一条记录，`Medical_Study`但似乎您想要与 Study 和 Medical 匹配的项目。

```
SELECT *
FROM Medical_Master mm
INNER JOIN Child_medical_Master cmm
  ON mm.MedicalID = cmm.MedicalId
INNER JOIN Medical_Study ms
  ON cmm.ChildMID = ms.ChildMID
INNER JOIN Study_Master sm
  ON ms.SMID = sm.SMID
  AND mm.MedicalID = sm.MedicalID  -- results change if you remove this line 
```

下一个查询要容易一些，因为您要添加`Medical_Visit`和`Patient_Master`。（[SQL 小提琴](http://sqlfiddle.com/#!3/a2a56/14)）

```
SELECT *
FROM Medical_Master mm
INNER JOIN Child_medical_Master cmm
  ON mm.MedicalID = cmm.MedicalId
INNER JOIN Medical_Study ms
  ON cmm.ChildMID = ms.ChildMID
INNER JOIN Study_Master sm
  ON ms.SMID = sm.SMID
  AND mm.MedicalID = sm.MedicalID
INNER JOIN Medical_Visit mv
  ON ms.VTID = mv.VTID
INNER JOIN Patient_Master pm
  ON mv.PMID = pm.PMID 
```

要添加的最终表格是`Doctor_Master`可以让您获得医生姓名的表格。( [SQL Fiddle](http://sqlfiddle.com/#!3/a2a56/17) ) 使用添加`Doctor_Master`表之前提供的示例数据，您有一条记录，但最后有 3 条记录。这是因为`PMID`在某个时候已经看过所有 3 位医生。

```
SELECT *
FROM Medical_Master mm
INNER JOIN Child_medical_Master cmm
  ON mm.MedicalID = cmm.MedicalId
INNER JOIN Medical_Study ms
  ON cmm.ChildMID = ms.ChildMID
INNER JOIN Study_Master sm
  ON ms.SMID = sm.SMID
  AND mm.MedicalID = sm.MedicalID
INNER JOIN Medical_Visit mv
  ON ms.VTID = mv.VTID
INNER JOIN Patient_Master pm
  ON mv.PMID = pm.PMID
INNER JOIN Doctor_Master dm
  ON mv.RFMID = dm.RFMID 
```

删除您不希望最终查询的所有字段是：

```
SELECT ms.UID,
    pm.PMID,
    pm.firstname,
    pm.lastname,
    mv.age,
    mm.medicalname,
    sm.description,
    cmm.station,
    ms.[date],
    dm.doctorname
FROM Medical_Master mm
INNER JOIN Child_medical_Master cmm
    ON mm.MedicalID = cmm.MedicalId
INNER JOIN Medical_Study ms
    ON cmm.ChildMID = ms.ChildMID
INNER JOIN Study_Master sm
    ON ms.SMID = sm.SMID
    AND mm.MedicalID = sm.MedicalID
INNER JOIN Medical_Visit mv
    ON ms.VTID = mv.VTID
INNER JOIN Patient_Master pm
    ON mv.PMID = pm.PMID
INNER JOIN Doctor_Master dm
    ON mv.RFMID = dm.RFMID 
```

我认为这会产生您正在寻找的结果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T14:20:35.497

Njg，只是为了说明这一点，医生的名字会重复的原因是他们将访问不止一位患者，并且每位患者都会被一位医生多次看诊。例如，对于一位医生看过 3 次的患者，他们将有 3 条“重复”行，因为 medical_visit 表记录了 3 次单独的就诊。

如果您只想显示每个患者的详细信息（名字、姓氏、年龄、医院位置和医生），那么我最初会删除以下行：

```
INNER JOIN Medical_Visit ON Medical_Visit.VTID=Medical_Study.VTID 
```

然后解决依赖于该连接的其他表。看看它是做什么的，您可能需要删除其他连接，直到找出重复信息的内容。您可能需要在连接中使用子查询来减少来自表的重复，但首先确定导致重复的表（我不能在您的示例表中使用 SQLFiddle。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T13:37:12.533

构建复杂的查询可能并不总是最好的解决方案。使用连接要求您很好地控制需要左/右/完全内/外连接的位置以获得所需的结果。

复杂查询的一个缺点，除了创建需要时间之外，您以后永远无法理解，维护将是一场噩梦。

另外，你想要的结果是什么？我经常意识到我期望一个特定值只出现一次，但在实际场景中，在某些情况下，拥有多个相同的值可能是有效的。请参阅 Tim Hodges 的评论。

恕我直言，创建一些视图可能是一个更好的选择，其中数据在更简单的级别上连接在一起，然后最终您可以从这些视图中加入。在这种情况下，您不太可能最终感到困惑，并且可以更好地控制数据的外观。

如果您仍想继续当前的路径，请将预期结果（数据，而不是列名）与您正在使用的当前查询（及其不正确的结果，描述为什么/如何不正确）一起发布，以便我们进一步帮助您。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-04T05:20:19.930

运行此查询。

```
SELECT    MS.UID, PM.PMID, PM.Firstname, PM.LastNAme, MV.age, 
          MM.MedicalName, SM.Description, 
          CMM.Station, MS.Date, DM.Doctorname
FROM      Child_Medical_Master CMM LEFT OUTER JOIN
          Medical_Master MM ON CMM.MedicalID = MM.MedicalID RIGHT OUTER JOIN
          Study_Master SM RIGHT OUTER JOIN
          Doctor_Master DM INNER JOIN
          PAtient_Master PM INNER JOIN
          Medical_Visit MV ON PM.PMID = MV.PMID INNER JOIN
          Medical_Study MS ON MV.VTID = MS.VTID ON DM.RFMID = MV.RFMID ON 
          SM.SMID = MS.SMID ON CMM.ChildMID = MS.ChildMID 
```

看到[这个小提琴](http://sqlfiddle.com/#!3/86eb3/10)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-04T04:52:34.030

试试下面的一个：

```
 Select MS.UID,
      PM.PMID,
      PM.FIRSTNAME,
      PM.LASTNAME,
      MV.PMID,
      MV.AGE,
      MM.MedicalName,
      SM.Description
      CMM.Station,
      MS.Date,
      DM.Doxtorname                                     
    From Patient_Master PM 
      inner join Medical_Visit MV On PM.PMID = MV.PMID
      inner join Medical_Study MS On MV.UID = MS.UID
      inner join Study_Master SM On SM.SMID = MS.SMID
      inner join Medical_Master MM On MM.MedicalID = SM.MedicalID
      inner join Child_Medical_Master CMM On CMM.MedicalID = MM.MedicalID
      inner join Doctor_Master DM On Dm.RFMID = MV.RFMID 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-03T15:10:56.740

对于我能做的，我有以下查询

```
select  u.UID
      , p.PMID
      , p.FIRSTNAME
      , p.LASTNAME
      , v.AGE
      , m.MEDICALNAME
      , u.DESCRIPTION
      , c.STATION
      , s.DATE
      , a.DoctorName
from    medical_master m
        inner join Child_Medical_Master c
          on  m.MedicalID = c.MedicalID
        inner join Medical_Study s
          on  s.ChildMID = c.ChildMID
        inner join Medical_Visit v
          on  v.VTID = s.VTID
        inner join Doctor_Master a
          on  a.RFMID = v.RFMID
        inner join Patient_Master p
          on  p.PMID = v.PMID
        inner join Study_Master u
          on  u.SMID = s.SMID 
```

我得到这个结果

结果

u.UID |##| p.PMID |##| p.FIRSTNAME |##| p.姓氏|##| v.AGE |##| m.MEDICALNAME |##| u.DESCRIPTION |##| c.站 |##| s.DATE |##| a.医生姓名

1 |##| 2 |##| rwe |##| rwer |##| 34 |##| ABC |##| fdf |##| bnb |##| kk |##| 约翰先生

6 |##| 3 |##| rwr |##| 固件 |##| 45 |##| ABC |##| df |##| 定义 |##| rgr |##| 约翰先生

2 |##| 2 |##| rwe |##| rwer |##| 45 |##| xyx |##| ddf |##| 回复 |##| kdf |##| 吉姆先生

所以，是的，根据你的数据，你得到了 mr.john 2 次。我还看到，对于不同的人，你会得到 2 个不同年龄的……这有点典型。您是否对数据进行了完整性检查？我认为那里的某个地方出了问题...

# solr - SOLR 中大数据的数据导入失败

> ID：11738579
> 
> 赞同：0
> 
> 时间：2012-07-31T10:58:13.590
> 
> 标签：solr, dataimporthandler

我已经设置了 SOLR。我曾经将数据（10 万）导入正常工作的 solr 索引。

现在我正在尝试将大数据（10 多万条记录）导入 solr 索引。我已经设置了 data-config.xml 然后我开始完全导入但它失败并给出下面提到的错误

**索引失败。回滚所有更改。**

我将 solr 启动日志存储在 solr.err 文件中，该文件给出错误：

```
Jul 31, 2012 10:19:33 AM org.apache.solr.update.DirectUpdateHandler2 rollback
SEVERE: Ignoring Error when closing connection
    at com.mysql.jdbc.MysqlIO.readPacket(MysqlIO.java:637)
    at com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2677)
    at com.mysql.jdbc.ConnectionImpl.rollback(ConnectionImpl.java:4749)
    at com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2677)
    at com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2627)
    at com.mysql.jdbc.StatementImpl.execute(StatementImpl.java:841)
    at com.mysql.jdbc.StatementImpl.execute(StatementImpl.java:681)
    ... 6 more
Jul 31, 2012 10:19:44 AM org.apache.solr.update.DirectUpdateHandler2 rollback
SEVERE: Ignoring Error when closing connection
    at com.mysql.jdbc.MysqlIO.readPacket(MysqlIO.java:637)
    at com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2677)
    at com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:2709)
    at com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2677)
    at com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:2709)
    at com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2677)
    at com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2627)
    at com.mysql.jdbc.StatementImpl.execute(StatementImpl.java:841)
    at com.mysql.jdbc.StatementImpl.execute(StatementImpl.java:681)
    ... 6 more
Jul 31, 2012 10:19:44 AM org.apache.solr.update.DirectUpdateHandler2 rollback 
```

`SEVERE: Ignoring Error when closing connection at com.mysql.jdbc.MysqlIO.readPacket(MysqlIO.java:637) at com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2677)`

```
Jul 31, 2012 10:19:44 AM org.apache.solr.update.DirectUpdateHandler2 rollback
INFO: end_rollback
Jul 31, 2012 10:19:44 AM org.apache.solr.handler.dataimport.JdbcDataSource closeConnection
SEVERE: Ignoring Error when closing connection

com.mysql.jdbc.PacketTooBigException: Packet for query is too large (7959657 > 1048576). You can change this value on the server by setting the max_allowed_packet' variable.
at com.mysql.jdbc.MysqlIO.readPacket(MysqlIO.java:637)
    at com.mysql.jdbc.MysqlIO.getResultSet(MysqlIO.java:420)
    at com.mysql.jdbc.MysqlIO.readResultsForQueryOrUpdate(MysqlIO.java:3118)
    at com.mysql.jdbc.MysqlIO.readAllResults(MysqlIO.java:2288)
    at com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:2709)
    at com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2677)
    at com.mysql.jdbc.ConnectionImpl.rollbackNoChecks(ConnectionImpl.java:4863)
    at com.mysql.jdbc.ConnectionImpl.rollback(ConnectionImpl.java:4749)
    at com.mysql.jdbc.ConnectionImpl.realClose(ConnectionImpl.java:4358)
    at com.mysql.jdbc.ConnectionImpl.close(ConnectionImpl.java:1607) 
```

@ ataConfig.java:342) 在 org.apache.solr.handler.dataimport.DataImporter.doFullImport(DataImporter.java:383) 在 org.apache.solr.handler.dataimport.DataImporter.runCmd(DataImporter.java:445) 在org.apache.solr.handler.dataimport.DataImporter$1.run(DataImporter.java:426)

我使用带有 4GB RAM 的 4 核处理器。

**解决此问题需要哪些 mysql/java 配置更改？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T11:08:35.303

我想这与 Mysql 的关系比与 Solr 的关系更大，因为 mysql jdbc 驱动程序存在问题。在此处尝试[此解决方法](http://help.hannonhill.com/kb/common-error-messages/mysql-packet-for-query-is-too-large)，这只是超出了 mysql 可以处理的数据限制。

# c# - Run code if no catch in Try/Catch

> ID：11738582
> 
> 赞同：14
> 
> 时间：2012-07-31T10:58:26.683
> 
> 标签：c#

When I use Try/Catch, is there a way just like If/Else to run code if there is no error is detected and no Catch?

```
try
{
    //Code to check
}
catch(Exception ex)
{
    //Code here if an error
}

//Code that I want to run if it's all OK ?? 

finally
{
    //Code that runs always
} 
```

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-07-31T11:00:13.780

Add the code at the end of your `try` block. Obviously you will only ever get there if there wasn't an exception before:

```
try {
  // code to check

  // code that you want to run if it's all ok
} catch {
  // error
} finally {
  // cleanup
} 
```

You probably should change your catch in a way that you only catch exceptions you expect and not flat-out everything, which may include exceptions thrown in »code that you want to run if it's all ok«.

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-07-31T11:01:36.667

If you need it to always execute if your `try` code succeeds, put it at the end of your try block. It will run as long as the previous code in your `try` block runs without an exception.

```
try
{
    // normal code

    // code to run if try stuff succeeds
}
catch (...)
{
    // handler code
}
finally
{
    // finally code
} 
```

If you need alternative exception handling for you "succeded" code, you can always nest your try/catches:

```
try
{
    // normal code

    try
    {
        // code to run if try stuff succeeds
    }
    catch (...)
    {
        // catch for the "succeded" code.
    }
}
catch (...)
{
    // handler code
    // exceptions from inner handler don't trigger this
}
finally
{
    // finally code
} 
```

If your "succeeded" code has to execute after your finally, use a variable:

```
bool caught = false;
try
{
    // ...
}
catch (...)
{
    caught = true;
}
finally
{
    // ...
}

if(!caught)
{
    // code to run if not caught
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-07-31T11:00:43.933

Just place it after the code that may throw an exception.

If an exception is thrown it will not run, if one is not thrown, it will run.

```
try
{
    // Code to check
    // Code that I want to run if it's all OK ??  <-- here
}
catch(Exception ex)
{
    // Code here if an error
}
finally
{
    // Code that runs always
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-31T11:01:49.630

```
try {
    // Code that might fail
    // Code that gets execute if nothing failed
}
catch {
    // Code getting execute on failure
}
finally {
    // Always executed
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-31T11:02:08.163

I would write it like this: If the call to a method ran fine then the success is merely the last thing within the `try`

```
try 
{
    DoSomethingImportant();
    Logger.Log("Success happened!");
}
catch (Exception ex)
{
    Logger.LogBadTimes("DoSomethingImportant() failed", ex);
}
finally 
{
    Logger.Log("this always happens");
} 
```

# java - 从 Java 中的文本文件获取设置

> ID：11738584
> 
> 赞同：1
> 
> 时间：2012-07-31T10:58:33.110
> 
> 标签：java, properties, resources, settings

我正在使用 Eclipse，并且在 mi src 文件夹之外创建了一个 res 文件夹。在其中，我创建了一个名为“config.cfg”的文本文件。看起来像这样：

```
# System configuration
# Comments will automatically be excluded by the program

radiomodemPort=20001

sisnetPort=5562

sisnetHost=213.229.135.3

sisnetUser=jogg

sisnetPass=jogg 
```

为读取它而编写的代码不起作用：它不会加载任何存储的变量。我的代码是：

```
private String sisnetHost;
private int sisnetPort;
private int radiomodemPort;
private String sisnetUser;
private String sisnetPass;

private boolean sisnetHostLoaded;
private boolean sisnetPortLoaded;
private boolean radiomodemPortLoaded;
private boolean sisnetUserLoaded;
private boolean sisnetPassLoaded;

public boolean getSettingsFromFile(){
        Properties config = new Properties();
        try {
            config.load(new FileInputStream("res/config.cfg"));
            Enumeration<Object> en = config.keys();
            while (en.hasMoreElements()) {
                String key = (String) en.nextElement();
                if(key.equals(sisnetHost)){
                    sisnetHost = (String)config.get(key);
                    sisnetHostLoaded = true;
                }
                if(key.equals(sisnetPort)){
                    sisnetPort = (Integer)config.get(key);
                    sisnetPortLoaded = true;
                }
                if(key.equals(sisnetUser)){
                    sisnetUser = (String)config.get(key);
                    sisnetUserLoaded = true;
                }
                if(key.equals(sisnetPass)){
                    sisnetPass = (String)config.get(key);
                    sisnetPassLoaded = true;
                }
                if(key.equals(radiomodemPort)){
                    radiomodemPort = (Integer)config.get(key);
                    radiomodemPortLoaded = true;
                }
            }

        } catch (FileNotFoundException ex) {
            ex.printStackTrace();
            return false;
        } catch (IOException ex) {
            ex.printStackTrace();
            return false;
        }

        if(!(sisnetHostLoaded && sisnetPortLoaded && sisnetUserLoaded && sisnetPassLoaded && radiomodemPortLoaded))
            fillUnloadedSettings();
        return true;
    } 
```

怎么了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T11:03:07.587

在您的`equals`测试中，您将每个键与您的实例变量（似乎具有默认值：`null`对象、`0`数字等）进行比较。使用实际的字符串来测试键：

```
if(key.equals("sisnetHost")) // NOT if(key.equals(sisnetHost)) 
```

通常建议调用`equals`文字/常量以消除 NPE 的风险：

```
if ("sisnetHost".equals(key)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-03-03T10:56:06.483

这里准备好了静态类

```
import java.io.*;
import java.util.Properties;
public class Settings {
    public static String Get(String name,String defVal){
        File configFile = new File(Variables.SETTINGS_FILE);
        try {
            FileReader reader = new FileReader(configFile);
            Properties props = new Properties();
            props.load(reader);
            reader.close();
            return props.getProperty(name);
        } catch (FileNotFoundException ex) {
            // file does not exist
            logger.error(ex);
            return defVal;
        } catch (IOException ex) {
            // I/O error
            logger.error(ex);
            return defVal;
        } catch (Exception ex){
            logger.error(ex);
            return defVal;
        }
    }
    public static Integer Get(String name,Integer defVal){
        File configFile = new File(Variables.SETTINGS_FILE);
        try {
            FileReader reader = new FileReader(configFile);
            Properties props = new Properties();
            props.load(reader);
            reader.close();
            return Integer.valueOf(props.getProperty(name));
        } catch (FileNotFoundException ex) {
            // file does not exist
            logger.error(ex);
            return defVal;
        } catch (IOException ex) {
            // I/O error
            logger.error(ex);
            return defVal;
        } catch (Exception ex){
            logger.error(ex);
            return defVal;
        }
    }
    public static Boolean Get(String name,Boolean defVal){
        File configFile = new File(Variables.SETTINGS_FILE);
        try {
            FileReader reader = new FileReader(configFile);
            Properties props = new Properties();
            props.load(reader);
            reader.close();
            return Boolean.valueOf(props.getProperty(name));
        } catch (FileNotFoundException ex) {
            // file does not exist
            logger.error(ex);
            return defVal;
        } catch (IOException ex) {
            // I/O error
            logger.error(ex);
            return defVal;
        } catch (Exception ex){
            logger.error(ex);
            return defVal;
        }
    }
    public static void Set(String name, String value){
        File configFile = new File(Variables.SETTINGS_FILE);
        try {
            Properties props = new Properties();
            FileReader reader = new FileReader(configFile);
            props.load(reader);
            props.setProperty(name, value.toString());
            FileWriter writer = new FileWriter(configFile);
            props.store(writer, Variables.SETTINGS_COMMENT);
            writer.close();
        } catch (FileNotFoundException ex) {
            // file does not exist
            logger.error(ex);
        } catch (IOException ex) {
            // I/O error
            logger.error(ex);
        } catch (Exception ex){
            logger.error(ex);
        }
    }
    public static void Set(String name, Integer value){
        File configFile = new File(Variables.SETTINGS_FILE);
        try {
            Properties props = new Properties();
            FileReader reader = new FileReader(configFile);
            props.load(reader);
            props.setProperty(name, value.toString());
            FileWriter writer = new FileWriter(configFile);
            props.store(writer,Variables.SETTINGS_COMMENT);
            writer.close();
        } catch (FileNotFoundException ex) {
            // file does not exist
            logger.error(ex);
        } catch (IOException ex) {
            // I/O error
            logger.error(ex);
        } catch (Exception ex){
            logger.error(ex);
        }
    }
    public static void Set(String name, Boolean value){
        File configFile = new File(Variables.SETTINGS_FILE);
        try {
            Properties props = new Properties();
            FileReader reader = new FileReader(configFile);
            props.load(reader);
            props.setProperty(name, value.toString());
            FileWriter writer = new FileWriter(configFile);
            props.store(writer,Variables.SETTINGS_COMMENT);
            writer.close();
        } catch (FileNotFoundException ex) {
            // file does not exist
            logger.error(ex);
        } catch (IOException ex) {
            // I/O error
            logger.error(ex);
        } catch (Exception ex){
            logger.error(ex);
        }
    }
} 
```

这里示例：

```
 Settings.Set("valueName1","value");
    String val1=Settings.Get("valueName1","value");
    Settings.Set("valueName2",true);
    Boolean val2=Settings.Get("valueName2",true);
    Settings.Set("valueName3",100);
    Integer val3=Settings.Get("valueName3",100); 
```

# apache - Apache ODE 2.0 是否支持 REST Web 服务而不是 SOAP

> ID：11738587
> 
> 赞同：1
> 
> 时间：2012-07-31T10:58:48.883
> 
> 标签：apache, rest, soap, apache-ode

在此链接[http://ode.apache.org/](http://ode.apache.org/)中有关 Apache ODE 2.0 的文档中，他们提到“支持 HTTP WSDL 绑定，允许调用 REST 样式的 Web 服务。”。

那么这是否意味着我可以运行 Web 服务并使用 REST API 调用它，而不是使用 Apache ODE 2.0 调用 SOAP？

此致

# iphone - 如何在 iPhone 中创建网格日历？

> ID：11738589
> 
> 赞同：7
> 
> 时间：2012-07-31T10:58:52.643
> 
> 标签：iphone, ios, ipad, calendar, grid

> **可能重复：**
> [是否有任何现成的 iPhone 应用程序日历控件？](https://stackoverflow.com/questions/997779/is-there-any-ready-made-calendar-control-for-iphone-apps)

我正在尝试创建一个网格日历，但没有成功。所以现在我正在寻找在 Github 上编写的任何框架。请帮忙....

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-31T11:08:58.223

你可以在这里找到很多实现： [Cocoacontrols results for Calendar: 8 controls found](http://www.cocoacontrols.com/search?utf8=%E2%9C%93&q=Calendar)

# xml - JAXB 编组期间的附加命名空间前缀

> ID：11738591
> 
> 赞同：0
> 
> 时间：2012-07-31T10:59:10.600
> 
> 标签：xml, namespaces, jaxb, marshalling

我在 Java 1.6_u33 中遇到 JAXB 编组问题

我有 5 个模式 .xsd 用于生成 Java 类，然后编组 XML 文件。

问题只有一种情况——为此文件 JAXB 生成额外的命名空间前缀 ns2。这很奇怪，因为所有模式都是相同的，并且编组机制对所有模式都是通用的。

生成机制：

```
 JAXBContext context = JAXBContext.newInstance(type);
    Marshaller marshaller = context.createMarshaller();
    marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT,
            Boolean.TRUE);
    marshaller.marshal(file, doc); 
```

坏 xml 的第一行：

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<ns2:Document xmlns:ns2="urn:iso:std:iso:20022:tech:xsd:camt.056.001.01">
  <ns2:camt.056.001.01>
    <ns2:Assgnmt>
      <ns2:Id>NOTPROVIDED</ns2:Id>
      <ns2:CreDtTm>2008-06-24T00:00:00</ns2:CreDtTm>
    </ns2:Assgnmt> 
```

使用从另一个 xsd 生成的相同设置 xml 是：

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<Document xmlns="urn:iso:std:iso:20022:tech:xsd:camt.029.001.03">
  <camt.029.001.03>
    <Assgnmt>
      <Id>NOTPROVIDED</Id>
      <CreDtTm>2008-03-26T00:00:00</CreDtTm>
    </Assgnmt> 
```

我将非常感谢任何帮助...谢谢。

* * *

我无法为我的问题添加答案，所以我在这里添加我的解释。

对于不正常工作的包：

包装信息：

```
@javax.xml.bind.annotation.XmlSchema(namespace = "urn:iso:std:iso:20022:tech:xsd:camt.056.001.01", elementFormDefault = javax.xml.bind.annotation.XmlNsForm.QUALIFIED)
package eu.axabank.axaconverter.datamodel.camt056; 
```

对象工厂

```
package eu.axabank.axaconverter.datamodel.camt056;

import javax.xml.bind.annotation.XmlRegistry;

/**
 * This object contains factory methods for each 
 * Java content interface and Java element interface 
 * generated in the eu.axabank.axaconverter.datamodel.camt056 package. 
 * <p>An ObjectFactory allows you to programatically 
 * construct new instances of the Java representation 
 * for XML content. The Java representation of XML 
 * content can consist of schema derived interfaces 
 * and classes representing the binding of schema 
 * type definitions, element declarations and model 
 * groups.  Factory methods for each of these are 
 * provided in this class.
 * 
 */
@XmlRegistry
public class ObjectFactory {

    /**
     * Create a new ObjectFactory that can be used to create new instances of schema derived classes for package: eu.axabank.axaconverter.datamodel.camt056
     * 
     */
    public ObjectFactory() {
    }

    /**
     * Create an instance of {@link CaseAssignmentBIC }
     * 
     */
    public CaseAssignmentBIC createCaseAssignmentBIC() {
        return new CaseAssignmentBIC();
    }

    /**
     * Create an instance of {@link UnderlyingTransaction }
     * 
     */
    public UnderlyingTransaction createUnderlyingTransaction() {
        return new UnderlyingTransaction();
    }

    /**
     * Create an instance of {@link PaymentTransactionInformation }
     * 
     */
    public PaymentTransactionInformation createPaymentTransactionInformation() {
        return new PaymentTransactionInformation();
    }

    /**
     * Create an instance of {@link RemittanceInformation }
     * 
     */
    public RemittanceInformation createRemittanceInformation() {
        return new RemittanceInformation();
    }

    /**
     * Create an instance of {@link OriginalTransactionReference }
     * 
     */
    public OriginalTransactionReference createOriginalTransactionReference() {
        return new OriginalTransactionReference();
    }

    /**
     * Create an instance of {@link ControlData }
     * 
     */
    public ControlData createControlData() {
        return new ControlData();
    }

    /**
     * Create an instance of {@link Document }
     * 
     */
    public Document createDocument() {
        return new Document();
    }

    /**
     * Create an instance of {@link CancellationReasonInformationBICorName }
     * 
     */
    public CancellationReasonInformationBICorName createCancellationReasonInformationBICorName() {
        return new CancellationReasonInformationBICorName();
    }

    /**
     * Create an instance of {@link ActiveOrHistoricCurrencyAndAmountEUR }
     * 
     */
    public ActiveOrHistoricCurrencyAndAmountEUR createActiveOrHistoricCurrencyAndAmountEUR() {
        return new ActiveOrHistoricCurrencyAndAmountEUR();
    }

    /**
     * Create an instance of {@link Camt056 }
     * 
     */
    public Camt056 createCamt056() {
        return new Camt056();
    }

} 
```

对于良好的工作包：

包装信息：

```
@javax.xml.bind.annotation.XmlSchema(namespace = "urn:iso:std:iso:20022:tech:xsd:camt.029.001.03", elementFormDefault = javax.xml.bind.annotation.XmlNsForm.QUALIFIED)
package eu.axabank.axaconverter.datamodel.camt029; 
```

对象工厂看起来完全一样（当然命名除外）。

我已经尝试过 QName 元素 - 由于 mechanizm 的通用性质，它很不方便 - 但没有任何好的结果。

我正在使用 NamespacePrefixMapper：

```
 NamespacePrefixMapper mapper = new NamespacePrefixMapper() {
            public String getPreferredPrefix(String namespaceUri,
                    String suggestion, boolean requirePrefix) {
                return "";
            }
        };
        marshaller.setProperty("com.sun.xml.bind.namespacePrefixMapper",
                mapper); 
```

但是这个映射器没有用！他正在设置 - 但在合并期间从未调用方法 getPreferredPrefix。

我不了解我的 4 种模式的不同之处，而这不起作用...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T09:03:02.807

检测到问题！

我很困惑，但这是我的错误。

要认真对待：

我从 5 个不同的模式生成了 5 个 Java 类包。然而，他们正在导入一种具有简单类型的模式（模式的通用对象）。我这个常见的 XSD 我主要放置对象....是的，主要是。有两个元素......不幸的是。此 complexTypes 仅由在此情况下生成的对象使用 - 不工作 - 情况。

关键是 2 个对象是从另一个 Objectfactory 生成的 - 放在另一个包中！

我推断在一个编组对象中混合来自多个对象工厂的对象会导致我的第一篇文章中描述的问题。

线索是：**如果你不想在 XML 中有很多命名空间，你不应该使用两个对象工厂或导入具有复杂类型的模式。**

# internet-explorer - 网站无法在 Internet Explorer 中运行，但在 Chrome 和 Mozilla 中运行良好

> ID：11738596
> 
> 赞同：0
> 
> 时间：2012-07-31T10:59:19.447
> 
> 标签：internet-explorer, joomla, prompt

我已经在根目录中安装了我的 joomla 网站。它在 Google chrome 和 Mozilla 中运行良好，但是当我在 Internet Explorer 中打开时，它会显示一个对话框来打开或保存文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T11:07:07.740

尝试在您的网站中安装 IE 兼容性插件。你可以在网上找到它们

# mocking - 单元测试 - 调用验证方法

> ID：11738597
> 
> 赞同：0
> 
> 时间：2012-07-31T10:59:23.500
> 
> 标签：mocking, junit4, verify

我正在对一种方法进行单元测试，该方法将对象作为参数 A，创建另一个对象 B 的实例，并用 A 填充 B 的属性。然后代码调用一个名为 messageSender.send(B) 的单独类上的方法；

我需要验证 send() 是否被调用。我尝试了以下方法，但没有说 sendBMessage 是用不同类型的 B 对象调用的。

有人知道如何验证 messageSender.send(B) 吗？

```
 class MyMailSender{
    MessageSender messageSender;

    void sendBMessage(Object A){
       B b = new B();
       b.setId(A.getId()):

       messageSender.send(B);

    }

class test{
 @Mock
 private MessageSender messageSender;
 @InjectMocks
 MyMailSender myMailSender;

 void testSendB(){
   A a = new A();
   a.setId(100);

   B b = new B();
   b.setId(a.getId());

   myMailSender.sendBMessage(a);

   verify(messageSender).send(b);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T11:08:57.210

找到了一个可行的解决方案：

```
 verify(messageSender).send(any(B.class)); 
```

# c++ - 在 NITE 和 OpenNI 上使用 makefile 编译 PointViewer

> ID：11738604
> 
> 赞同：1
> 
> 时间：2012-07-31T10:59:43.070
> 
> 标签：c++, compilation, linker-errors, glut, openni

我目前正按时使用 kinect openNi 和 NITE。事实上，我检测到手的位置，例如手是否在你的头上？为此，我需要更改 NITE 的 PointViewer。

但是，当我修改代码时无法编译。

事实上，当我在文件 PointViewer 中进行制作时，如果有错误，编译器会将它们全部报告给我，但是当我接近更正时，我发现书店的未定义参考错误实际上 Glut 就像他没有被包括在内，而对我来说，这是因为在 PointViewer 修改代码之前有效。

我已经安装了 freeglut3-dev 并包含了库和 . 如您所说，在建立链接时会出现问题。是否有任何编译器选项可以使链接成功？如何在 makefile 中添加编译器选项以便它可以找到 GLU 库在哪里？

你知道这可能是什么吗？

在这里我要注意：

```
g++ -o ../Bin/x64-Release/Sample-PointViewer ./x64-Release/main.o ./x64-Release/PointDrawer.o ./x64-Release/signal_catch.o  -L../Bin/x64-Release -lglut -lOpenNI -lXnVNite_1_5_2
./x64-Release/main.o:main.cpp:function glutDisplay(): error: undefined reference to 'glClear'
./x64-Release/main.o:main.cpp:function glutDisplay(): error: undefined reference to 'glMatrixMode'
./x64-Release/main.o:main.cpp:function glutDisplay(): error: undefined reference to 'glPushMatrix'
./x64-Release/main.o:main.cpp:function glutDisplay(): error: undefined reference to 'glLoadIdentity'
./x64-Release/main.o:main.cpp:function glutDisplay(): error: undefined reference to 'glOrtho'
./x64-Release/main.o:main.cpp:function glutDisplay(): error: undefined reference to 'glDisable'
./x64-Release/main.o:main.cpp:function glInit(int*, char**): error: undefined reference to 'glDisable'
./x64-Release/main.o:main.cpp:function glInit(int*, char**): error: undefined reference to 'glEnable'
./x64-Release/main.o:main.cpp:function glInit(int*, char**): error: undefined reference to 'glEnableClientState'
./x64-Release/main.o:main.cpp:function glInit(int*, char**): error: undefined reference to 'glDisableClientState'
./x64-Release/PointDrawer.o:PointDrawer.cpp:function initTexture(void**, int&, int&): error: undefined reference to 'glGenTextures'
./x64-Release/PointDrawer.o:PointDrawer.cpp:function initTexture(void**, int&, int&): error: undefined reference to 'glBindTexture'
./x64-Release/PointDrawer.o:PointDrawer.cpp:function initTexture(void**, int&, int&): error: undefined reference to 'glTexParameteri'
./x64-Release/PointDrawer.o:PointDrawer.cpp:function initTexture(void**, int&, int&): error: undefined reference to 'glTexParameteri'
./x64-Release/PointDrawer.o:PointDrawer.cpp:function DrawRectangle(float, float, float, float): error: undefined reference to 'glVertexPointer'
./x64-Release/PointDrawer.o:PointDrawer.cpp:function DrawRectangle(float, float, float, float): error: undefined reference to 'glDrawArrays'
./x64-Release/PointDrawer.o:PointDrawer.cpp:function DrawRectangle(float, float, float, float): error: undefined reference to 'glFlush'
./x64-Release/PointDrawer.o:PointDrawer.cpp:function DrawTexture(float, float, float, float): error: undefined reference to 'glEnableClientState'
./x64-Release/PointDrawer.o:PointDrawer.cpp:function DrawTexture(float, float, float, float): error: undefined reference to 'glTexCoordPointer'
./x64-Release/PointDrawer.o:PointDrawer.cpp:function DrawDepthMap(xn::DepthMetaData const&): error: undefined reference to 'glBindTexture'
./x64-Release/PointDrawer.o:PointDrawer.cpp:function DrawDepthMap(xn::DepthMetaData const&): error: undefined reference to 'glTexImage2D'
./x64-Release/PointDrawer.o:PointDrawer.cpp:function DrawDepthMap(xn::DepthMetaData const&): error: undefined reference to 'glColor4f'
./x64-Release/PointDrawer.o:PointDrawer.cpp:function DrawDepthMap(xn::DepthMetaData const&): error: undefined reference to 'glEnable'
./x64-Release/PointDrawer.o:PointDrawer.cpp:function DrawFrameID(unsigned int): error: undefined reference to 'glColor4f'
./x64-Release/PointDrawer.o:PointDrawer.cpp:function DrawFrameID(unsigned int): error: undefined reference to 'glRasterPos2i'
./x64-Release/PointDrawer.o:PointDrawer.cpp:function XnVPointDrawer::Draw() const: error: undefined reference to 'glColor4f'
./x64-Release/PointDrawer.o:PointDrawer.cpp:function XnVPointDrawer::Draw() const: error: undefined reference to 'glPointSize'
./x64-Release/PointDrawer.o:PointDrawer.cpp:function XnVPointDrawer::Draw() const: error: undefined reference to 'glVertexPointer'
./x64-Release/PointDrawer.o:PointDrawer.cpp:function XnVPointDrawer::Draw() const: error: undefined reference to 'glDrawArrays'
./x64-Release/PointDrawer.o:PointDrawer.cpp:function XnVPointDrawer::Draw() const: error: undefined reference to 'glColor4f'
./x64-Release/PointDrawer.o:PointDrawer.cpp:function XnVPointDrawer::Draw() const: error: undefined reference to 'glPointSize'
./x64-Release/PointDrawer.o:PointDrawer.cpp:function XnVPointDrawer::Draw() const: error: undefined reference to 'glDrawArrays'
./x64-Release/PointDrawer.o:PointDrawer.cpp:function XnVPointDrawer::Draw() const: error: undefined reference to 'glFlush'
./x64-Release/PointDrawer.o:PointDrawer.cpp:function PrintSessionState(SessionState): error: undefined reference to 'glRasterPos2i'
./x64-Release/PointDrawer.o:PointDrawer.cpp:function PrintSessionState(SessionState): error: undefined reference to 'pthread_create'
./x64-Release/PointDrawer.o:PointDrawer.cpp:function PrintSessionState(SessionState): error: undefined reference to 'pthread_join'
./x64-Release/PointDrawer.o:PointDrawer.cpp:function DrawTexture(float, float, float, float): error: undefined reference to 'glDisableClientState'
./x64-Release/PointDrawer.o:PointDrawer.cpp:function DrawDepthMap(xn::DepthMetaData const&): error: undefined reference to 'glDisable'
collect2: ld returned 1 exit status
make: *** [../Bin/x64-Release/Sample-PointViewer] Error 1 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T01:01:03.427

第一个错误看起来与 GL/GLUT 相关。确保您已正确设置包含和库路径。

我刚刚使用 Qt Creator 在 osx 上编译了示例，但从项目中删除了 opengles.cpp，因为它正在寻找我在系统上找不到的库。如果有帮助，这是我的 Qt 控制台应用程序项目文件：

```
#-------------------------------------------------
#
# Project created by QtCreator 2012-08-01T01:22:11
#
#-------------------------------------------------

QT       += core

QT       -= gui

TARGET = NitePointViewer
CONFIG   += console
CONFIG   -= app_bundle

TEMPLATE = app

INCLUDEPATH += /usr/include/ni
INCLUDEPATH += /usr/include/nite
LIBS += /usr/lib/libXnCore.dylib
LIBS += /usr/lib/libXnDDK.dylib
LIBS += /usr/lib/libXnDeviceFile.dylib
LIBS += /usr/lib/libXnDeviceSensorV2.dylib
LIBS += /usr/lib/libXnFormats.dylib
LIBS += /usr/lib/libXnVCNITE_1_5_2.dylib
LIBS += /usr/lib/libXnVFeatures_1_5_2.dylib
LIBS += /usr/lib/libXnVNite_1_5_2.dylib
LIBS += /usr/lib/libnimCodecs.dylib
LIBS += /usr/lib/libnimMockNodes.dylib
LIBS += /usr/lib/libnimRecorder.dylib
LIBS += /usr/lib/libOpenNI.dylib
LIBS += -framework OpenGL
LIBS += -framework GLUT
LIBS += Libs/glut64.lib

SOURCES += main.cpp \
    signal_catch.cpp \
    PointDrawer.cpp \
    kbhit.cpp

HEADERS += \
    GL/wglext.h \
    GL/glut.h \
    GL/glext.h \
    GL/gl.h \
    GLES/gl.h \
    GLES/gl_1_0.h \
    GLES/egltypes.h \
    GLES/egl.h \
    GLES/egl_1_0.h \
    glh/glh_text.h \
    glh/glh_obs.h \
    glh/glh_mipmaps.h \
    glh/glh_linear.h \
    glh/glh_interactors.h \
    glh/glh_glut2.h \
    glh/glh_glut.h \
    glh/glh_glut_text.h \
    glh/glh_glut_replay.h \
    glh/glh_glut_callfunc.h \
    glh/glh_genext.h \
    glh/glh_extensions.h \
    glh/glh_cube_map.h \
    glh/glh_convenience.h \
    glh/glh_array.h \
    signal_catch.h \
    PointDrawer.h \
    opengles.h \
    kbhit.h 
```

和生成的 Makefile：

```
#############################################################################
# Makefile for building: NitePointViewer
# Generated by qmake (2.01a) (Qt 4.7.4) on: Wed Aug 1 01:50:26 2012
# Project:  NitePointViewer.pro
# Template: app
# Command: /Users/george/QtSDK/Desktop/Qt/474/gcc/bin/qmake -spec ../../../QtSDK/Desktop/Qt/474/gcc/mkspecs/macx-g++ -o Makefile NitePointViewer.pro
#############################################################################

####### Compiler, tools and options

CC            = gcc
CXX           = g++
DEFINES       = -DQT_CORE_LIB
CFLAGS        = -pipe -g -gdwarf-2 -arch x86_64 -Xarch_x86_64 -mmacosx-version-min=10.5 -Wall -W $(DEFINES)
CXXFLAGS      = -pipe -g -gdwarf-2 -arch x86_64 -Xarch_x86_64 -mmacosx-version-min=10.5 -Wall -W $(DEFINES)
INCPATH       = -I../../../QtSDK/Desktop/Qt/474/gcc/mkspecs/macx-g++ -I. -I../../../QtSDK/Desktop/Qt/474/gcc/lib/QtCore.framework/Versions/4/Headers -I../../../QtSDK/Desktop/Qt/474/gcc/include/QtCore -I../../../QtSDK/Desktop/Qt/474/gcc/include -I/usr/include/ni -I/usr/include/nite -I. -F/Users/george/QtSDK/Desktop/Qt/474/gcc/lib
LINK          = g++
LFLAGS        = -headerpad_max_install_names -arch x86_64 -Xarch_x86_64 -mmacosx-version-min=10.5
LIBS          = $(SUBLIBS) -F/Users/george/QtSDK/Desktop/Qt/474/gcc/lib -L/Users/george/QtSDK/Desktop/Qt/474/gcc/lib /usr/lib/libXnCore.dylib /usr/lib/libXnDDK.dylib /usr/lib/libXnDeviceFile.dylib /usr/lib/libXnDeviceSensorV2.dylib /usr/lib/libXnFormats.dylib /usr/lib/libXnVCNITE_1_5_2.dylib /usr/lib/libXnVFeatures_1_5_2.dylib /usr/lib/libXnVNite_1_5_2.dylib /usr/lib/libnimCodecs.dylib /usr/lib/libnimMockNodes.dylib /usr/lib/libnimRecorder.dylib /usr/lib/libOpenNI.dylib -framework OpenGL -framework GLUT Libs/glut64.lib -framework QtCore 
AR            = ar cq
RANLIB        = ranlib -s
QMAKE         = /Users/george/QtSDK/Desktop/Qt/474/gcc/bin/qmake
TAR           = tar -cf
COMPRESS      = gzip -9f
COPY          = cp -f
SED           = sed
COPY_FILE     = cp -f
COPY_DIR      = cp -f -R
STRIP         = 
INSTALL_FILE  = $(COPY_FILE)
INSTALL_DIR   = $(COPY_DIR)
INSTALL_PROGRAM = $(COPY_FILE)
DEL_FILE      = rm -f
SYMLINK       = ln -f -s
DEL_DIR       = rmdir
MOVE          = mv -f
CHK_DIR_EXISTS= test -d
MKDIR         = mkdir -p
export MACOSX_DEPLOYMENT_TARGET = 10.4

####### Output directory

OBJECTS_DIR   = ./

####### Files

SOURCES       = main.cpp \
        signal_catch.cpp \
        PointDrawer.cpp \
        kbhit.cpp 
OBJECTS       = main.o \
        signal_catch.o \
        PointDrawer.o \
        kbhit.o
DIST          = ../../../QtSDK/Desktop/Qt/474/gcc/mkspecs/common/unix.conf \
        ../../../QtSDK/Desktop/Qt/474/gcc/mkspecs/common/mac.conf \
        ../../../QtSDK/Desktop/Qt/474/gcc/mkspecs/common/mac-g++.conf \
        ../../../QtSDK/Desktop/Qt/474/gcc/mkspecs/qconfig.pri \
        ../../../QtSDK/Desktop/Qt/474/gcc/mkspecs/modules/qt_webkit_version.pri \
        ../../../QtSDK/Desktop/Qt/474/gcc/mkspecs/features/qt_functions.prf \
        ../../../QtSDK/Desktop/Qt/474/gcc/mkspecs/features/qt_config.prf \
        ../../../QtSDK/Desktop/Qt/474/gcc/mkspecs/features/exclusive_builds.prf \
        ../../../QtSDK/Desktop/Qt/474/gcc/mkspecs/features/default_pre.prf \
        ../../../QtSDK/Desktop/Qt/474/gcc/mkspecs/features/mac/default_pre.prf \
        ../../../QtSDK/Desktop/Qt/474/gcc/mkspecs/features/mac/dwarf2.prf \
        ../../../QtSDK/Desktop/Qt/474/gcc/mkspecs/features/debug.prf \
        ../../../QtSDK/Desktop/Qt/474/gcc/mkspecs/features/default_post.prf \
        ../../../QtSDK/Desktop/Qt/474/gcc/mkspecs/features/mac/default_post.prf \
        ../../../QtSDK/Desktop/Qt/474/gcc/mkspecs/features/mac/x86_64.prf \
        ../../../QtSDK/Desktop/Qt/474/gcc/mkspecs/features/mac/objective_c.prf \
        ../../../QtSDK/Desktop/Qt/474/gcc/mkspecs/features/warn_on.prf \
        ../../../QtSDK/Desktop/Qt/474/gcc/mkspecs/features/qt.prf \
        ../../../QtSDK/Desktop/Qt/474/gcc/mkspecs/features/unix/thread.prf \
        ../../../QtSDK/Desktop/Qt/474/gcc/mkspecs/features/moc.prf \
        ../../../QtSDK/Desktop/Qt/474/gcc/mkspecs/features/mac/rez.prf \
        ../../../QtSDK/Desktop/Qt/474/gcc/mkspecs/features/mac/sdk.prf \
        ../../../QtSDK/Desktop/Qt/474/gcc/mkspecs/features/resources.prf \
        ../../../QtSDK/Desktop/Qt/474/gcc/mkspecs/features/uic.prf \
        ../../../QtSDK/Desktop/Qt/474/gcc/mkspecs/features/yacc.prf \
        ../../../QtSDK/Desktop/Qt/474/gcc/mkspecs/features/lex.prf \
        ../../../QtSDK/Desktop/Qt/474/gcc/mkspecs/features/include_source_dir.prf \
        NitePointViewer.pro
QMAKE_TARGET  = NitePointViewer
DESTDIR       = 
TARGET        = NitePointViewer

####### Custom Compiler Variables
QMAKE_COMP_QMAKE_OBJECTIVE_CFLAGS = -pipe \
        -g \
        -gdwarf-2 \
        -arch \
        x86_64 \
        -Xarch_x86_64 \
        -mmacosx-version-min=10.5 \
        -Wall \
        -W

first: all
####### Implicit rules

.SUFFIXES: .o .c .cpp .cc .cxx .C

.cpp.o:
    $(CXX) -c $(CXXFLAGS) $(INCPATH) -o "$@" "$<"

.cc.o:
    $(CXX) -c $(CXXFLAGS) $(INCPATH) -o "$@" "$<"

.cxx.o:
    $(CXX) -c $(CXXFLAGS) $(INCPATH) -o "$@" "$<"

.C.o:
    $(CXX) -c $(CXXFLAGS) $(INCPATH) -o "$@" "$<"

.c.o:
    $(CC) -c $(CFLAGS) $(INCPATH) -o "$@" "$<"

####### Build rules

all: Makefile $(TARGET)

$(TARGET):  $(OBJECTS)  
    $(LINK) $(LFLAGS) -o $(TARGET) $(OBJECTS) $(OBJCOMP) $(LIBS)

Makefile: NitePointViewer.pro  ../../../QtSDK/Desktop/Qt/474/gcc/mkspecs/macx-g++/qmake.conf ../../../QtSDK/Desktop/Qt/474/gcc/mkspecs/common/unix.conf \
        ../../../QtSDK/Desktop/Qt/474/gcc/mkspecs/common/mac.conf \
        ../../../QtSDK/Desktop/Qt/474/gcc/mkspecs/common/mac-g++.conf \
        ../../../QtSDK/Desktop/Qt/474/gcc/mkspecs/qconfig.pri \
        ../../../QtSDK/Desktop/Qt/474/gcc/mkspecs/modules/qt_webkit_version.pri \
        ../../../QtSDK/Desktop/Qt/474/gcc/mkspecs/features/qt_functions.prf \
        ../../../QtSDK/Desktop/Qt/474/gcc/mkspecs/features/qt_config.prf \
        ../../../QtSDK/Desktop/Qt/474/gcc/mkspecs/features/exclusive_builds.prf \
        ../../../QtSDK/Desktop/Qt/474/gcc/mkspecs/features/default_pre.prf \
        ../../../QtSDK/Desktop/Qt/474/gcc/mkspecs/features/mac/default_pre.prf \
        ../../../QtSDK/Desktop/Qt/474/gcc/mkspecs/features/mac/dwarf2.prf \
        ../../../QtSDK/Desktop/Qt/474/gcc/mkspecs/features/debug.prf \
        ../../../QtSDK/Desktop/Qt/474/gcc/mkspecs/features/default_post.prf \
        ../../../QtSDK/Desktop/Qt/474/gcc/mkspecs/features/mac/default_post.prf \
        ../../../QtSDK/Desktop/Qt/474/gcc/mkspecs/features/mac/x86_64.prf \
        ../../../QtSDK/Desktop/Qt/474/gcc/mkspecs/features/mac/objective_c.prf \
        ../../../QtSDK/Desktop/Qt/474/gcc/mkspecs/features/warn_on.prf \
        ../../../QtSDK/Desktop/Qt/474/gcc/mkspecs/features/qt.prf \
        ../../../QtSDK/Desktop/Qt/474/gcc/mkspecs/features/unix/thread.prf \
        ../../../QtSDK/Desktop/Qt/474/gcc/mkspecs/features/moc.prf \
        ../../../QtSDK/Desktop/Qt/474/gcc/mkspecs/features/mac/rez.prf \
        ../../../QtSDK/Desktop/Qt/474/gcc/mkspecs/features/mac/sdk.prf \
        ../../../QtSDK/Desktop/Qt/474/gcc/mkspecs/features/resources.prf \
        ../../../QtSDK/Desktop/Qt/474/gcc/mkspecs/features/uic.prf \
        ../../../QtSDK/Desktop/Qt/474/gcc/mkspecs/features/yacc.prf \
        ../../../QtSDK/Desktop/Qt/474/gcc/mkspecs/features/lex.prf \
        ../../../QtSDK/Desktop/Qt/474/gcc/mkspecs/features/include_source_dir.prf
    $(QMAKE) -spec ../../../QtSDK/Desktop/Qt/474/gcc/mkspecs/macx-g++ -o Makefile NitePointViewer.pro
../../../QtSDK/Desktop/Qt/474/gcc/mkspecs/common/unix.conf:
../../../QtSDK/Desktop/Qt/474/gcc/mkspecs/common/mac.conf:
../../../QtSDK/Desktop/Qt/474/gcc/mkspecs/common/mac-g++.conf:
../../../QtSDK/Desktop/Qt/474/gcc/mkspecs/qconfig.pri:
../../../QtSDK/Desktop/Qt/474/gcc/mkspecs/modules/qt_webkit_version.pri:
../../../QtSDK/Desktop/Qt/474/gcc/mkspecs/features/qt_functions.prf:
../../../QtSDK/Desktop/Qt/474/gcc/mkspecs/features/qt_config.prf:
../../../QtSDK/Desktop/Qt/474/gcc/mkspecs/features/exclusive_builds.prf:
../../../QtSDK/Desktop/Qt/474/gcc/mkspecs/features/default_pre.prf:
../../../QtSDK/Desktop/Qt/474/gcc/mkspecs/features/mac/default_pre.prf:
../../../QtSDK/Desktop/Qt/474/gcc/mkspecs/features/mac/dwarf2.prf:
../../../QtSDK/Desktop/Qt/474/gcc/mkspecs/features/debug.prf:
../../../QtSDK/Desktop/Qt/474/gcc/mkspecs/features/default_post.prf:
../../../QtSDK/Desktop/Qt/474/gcc/mkspecs/features/mac/default_post.prf:
../../../QtSDK/Desktop/Qt/474/gcc/mkspecs/features/mac/x86_64.prf:
../../../QtSDK/Desktop/Qt/474/gcc/mkspecs/features/mac/objective_c.prf:
../../../QtSDK/Desktop/Qt/474/gcc/mkspecs/features/warn_on.prf:
../../../QtSDK/Desktop/Qt/474/gcc/mkspecs/features/qt.prf:
../../../QtSDK/Desktop/Qt/474/gcc/mkspecs/features/unix/thread.prf:
../../../QtSDK/Desktop/Qt/474/gcc/mkspecs/features/moc.prf:
../../../QtSDK/Desktop/Qt/474/gcc/mkspecs/features/mac/rez.prf:
../../../QtSDK/Desktop/Qt/474/gcc/mkspecs/features/mac/sdk.prf:
../../../QtSDK/Desktop/Qt/474/gcc/mkspecs/features/resources.prf:
../../../QtSDK/Desktop/Qt/474/gcc/mkspecs/features/uic.prf:
../../../QtSDK/Desktop/Qt/474/gcc/mkspecs/features/yacc.prf:
../../../QtSDK/Desktop/Qt/474/gcc/mkspecs/features/lex.prf:
../../../QtSDK/Desktop/Qt/474/gcc/mkspecs/features/include_source_dir.prf:
qmake:  FORCE
    @$(QMAKE) -spec ../../../QtSDK/Desktop/Qt/474/gcc/mkspecs/macx-g++ -o Makefile NitePointViewer.pro

dist: 
    @$(CHK_DIR_EXISTS) .tmp/NitePointViewer1.0.0 || $(MKDIR) .tmp/NitePointViewer1.0.0 
    $(COPY_FILE) --parents $(SOURCES) $(DIST) .tmp/NitePointViewer1.0.0/ && $(COPY_FILE) --parents GL/wglext.h GL/glut.h GL/glext.h GL/gl.h GLES/gl.h GLES/gl_1_0.h GLES/egltypes.h GLES/egl.h GLES/egl_1_0.h glh/glh_text.h glh/glh_obs.h glh/glh_mipmaps.h glh/glh_linear.h glh/glh_interactors.h glh/glh_glut2.h glh/glh_glut.h glh/glh_glut_text.h glh/glh_glut_replay.h glh/glh_glut_callfunc.h glh/glh_genext.h glh/glh_extensions.h glh/glh_cube_map.h glh/glh_convenience.h glh/glh_array.h signal_catch.h PointDrawer.h opengles.h kbhit.h .tmp/NitePointViewer1.0.0/ && $(COPY_FILE) --parents main.cpp signal_catch.cpp PointDrawer.cpp kbhit.cpp .tmp/NitePointViewer1.0.0/ && (cd `dirname .tmp/NitePointViewer1.0.0` && $(TAR) NitePointViewer1.0.0.tar NitePointViewer1.0.0 && $(COMPRESS) NitePointViewer1.0.0.tar) && $(MOVE) `dirname .tmp/NitePointViewer1.0.0`/NitePointViewer1.0.0.tar.gz . && $(DEL_FILE) -r .tmp/NitePointViewer1.0.0

clean:compiler_clean 
    -$(DEL_FILE) $(OBJECTS)
    -$(DEL_FILE) *~ core *.core

####### Sub-libraries

distclean: clean
    -$(DEL_FILE) $(TARGET) 
    -$(DEL_FILE) Makefile

check: first

mocclean: compiler_moc_header_clean compiler_moc_source_clean

mocables: compiler_moc_header_make_all compiler_moc_source_make_all

compiler_objective_c_make_all:
compiler_objective_c_clean:
compiler_moc_header_make_all:
compiler_moc_header_clean:
compiler_rcc_make_all:
compiler_rcc_clean:
compiler_image_collection_make_all: qmake_image_collection.cpp
compiler_image_collection_clean:
    -$(DEL_FILE) qmake_image_collection.cpp
compiler_moc_source_make_all:
compiler_moc_source_clean:
compiler_rez_source_make_all:
compiler_rez_source_clean:
compiler_uic_make_all:
compiler_uic_clean:
compiler_yacc_decl_make_all:
compiler_yacc_decl_clean:
compiler_yacc_impl_make_all:
compiler_yacc_impl_clean:
compiler_lex_make_all:
compiler_lex_clean:
compiler_clean: 

####### Compile

main.o: main.cpp PointDrawer.h \
        GL/glut.h \
        GL/gl.h \
        GL/glext.h \
        opengles.h \
        GLES/gl.h \
        GLES/egl.h \
        GLES/egltypes.h \
        kbhit.h \
        signal_catch.h
    $(CXX) -c $(CXXFLAGS) $(INCPATH) -o main.o main.cpp

signal_catch.o: signal_catch.cpp signal_catch.h
    $(CXX) -c $(CXXFLAGS) $(INCPATH) -o signal_catch.o signal_catch.cpp

PointDrawer.o: PointDrawer.cpp PointDrawer.h \
        GL/glut.h \
        GL/gl.h \
        GL/glext.h \
        opengles.h \
        GLES/gl.h \
        GLES/egl.h \
        GLES/egltypes.h
    $(CXX) -c $(CXXFLAGS) $(INCPATH) -o PointDrawer.o PointDrawer.cpp

kbhit.o: kbhit.cpp kbhit.h
    $(CXX) -c $(CXXFLAGS) $(INCPATH) -o kbhit.o kbhit.cpp

####### Install

install:   FORCE

uninstall:   FORCE

FORCE: 
```

我还在 main.cpp 和 PointDrawer.cpp 中添加了：

```
#define USE_GLUT 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T00:35:00.817

您需要在链接过程中添加一些库。从添加 -lGL -lpthread 开始。（glClear 在 libGL.so 中定义，pthread 在 libpthread.so 中。这是在 Linux 上 - 您可能需要在 Ubuntu 上安装 freeglut3-dev 软件包才能获得 libGL。）

# opengl - 快速绘制带纹理的全屏四边形

> ID：11738605
> 
> 赞同：2
> 
> 时间：2012-07-31T10:59:44.373
> 
> 标签：opengl, opengl-3

回到古老的 OpenGL 时代，如果你想在整个窗口上绘制一个带纹理的四边形，你所要做的就是绑定纹理，并多次调用 glVertex 和 glTexCoords 就完成了。

现在看来，为了做到这一点，您需要创建仅从纹理内存复制的着色器，然后加载和编译它们。您还需要创建 VBO 来保存坐标、纹理坐标和四边形索引，然后告诉 OpenGL 每个坐标的位置。

没有更简单的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T13:45:16.333

好吧，新的 OpenGL 更加灵活，但也更加复杂。首先，您不必使用索引 - 如果您不提供索引 VBO，则绘图调用将仅迭代缓冲区中的顶点和 texcoords。`glVertex**v`它与 using和其他基于向量的函数（即使在旧 GL 中也应该使用）并没有太大区别。

此外，着色器可以硬编码为字符串；那时您不必提供文件操作工具。

当你把它全部加起来时，它不会使你的代码比旧的 OpenGL 长得多。事实上，它甚至可以缩短一点，前提是您之前没有使用矢量函数。

# php - 通过 url 中的多个变量显示页面

> ID：11738609
> 
> 赞同：0
> 
> 时间：2012-07-31T10:59:46.817
> 
> 标签：php, url, get

我的链接示例如下所示“/jet/index.php?year=2011&quarter=Q1”现在我需要显示包含 2011 年第一季度第一个月的页面。/jet/index.php?year =2011&quarter=Q1 将显示 4 月 5 月 6 月。等等。

我的代码看起来像这样

```
 <a href="index.php?year=2011&quarter=Q1">
    <a href="index.php?year=2011&quarter=Q2">
    <a href="index.php?year=2011&quarter=Q1">
    <a href="index.php?year=2011&quarter=Q4"> 
```

我的主页，即 2012 年工作得很好，这里是代码

```
 <?php 
$quarters = array('Q1' => 'firstq2012.php', 'Q2' => 'secondq2012.php', 'Q3' => 'thirdq2012.php', 'Q4' => 'fourthq2012.php');
if(isset($_GET['quarter'])) {
    if(in_array($_GET['quarter'], array_keys($quarters))) {
        include_once $quarters[$_GET['quarter']];
    } else {
        header('Location: 404.php');
    }
} else {
    include_once $quarters['Q3'];
}
?> 
```

我需要您的帮助，了解从 2012 年到 2011 年的过渡会是什么样子（我通过链接完成）

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T11:14:23.887

我会完全改变你的代码......

检查并包含宿舍的代码

```
<?php
if(isset($_GET['year']) && isset($_GET['quarter'])) {
 // get params
 $year = (strlen($_GET['year']) == 4 && is_numeric($_GET['year']) ? (int)$_GET['year'] : date('Y'));
 $quarter = (substr($_GET['quarter'], 0, 1) == 'Q' && is_numeric(substr($_GET['quarter'], 1, 1)) ? (int)substr($_GET['quarter'], 1, 1) : ceil(date('n') / 4));

 $quartalsNumberToName = array(
  1 => 'first',
  2 => 'second',
  3 => 'third',
  4 => 'fourth'
 );
 $filename = $quartalsNumberToName[$quarter] .'q'. $year .'.php';

 if(file_exists($filename)) {
   include_once($filename);
 } else {
   header('Location: 404.php');
   exit;
 }
} else {
 include_once($quartalsNumberToNume[3] .'q2012.php';
}
?> 
```

生成链接的代码：

```
<ul>
<?php
// the start year
$yearStart = 2011;

for($i = $yearStart; $i <= date('Y'); $i++) {
  for($j = 1; $j <= 4; $j++) {
?>
  <li><a href="index.php?year=<?php echo($i); ?>&amp;quarter=Q<?php echo($j); ?>">Year <?php echo($i); ?>, Quarter <?php echo($j); ?></a></li>
<?php
  }
}
?>
</ul> 
```

未经测试...但应该工作。

# javascript - 通过表单传递 javascript 变量（获取）

> ID：11738610
> 
> 赞同：0
> 
> 时间：2012-07-31T10:59:46.653
> 
> 标签：javascript, html, forms, variables

好的，所以我的想法是我发生了一些 javascript 事情（自动完成），最终创建了一个变量。让我们将变量声明为 test 并具有 testValue 的值。

然后，我在页面下方有一个表单，我想将此值 test 附加到表单的提交中。

例如。我有一个表格：

```
<form name="form" method="get" action="search.php">
    <input id="search" name="search" type="text" value="Search" size="40" />
</form> 
```

我想要做的是将操作从 search.php 更改为：

```
search.php?test= our javascript variable's value 
```

看起来很基本，并且在 php 中非常容易实现。例如。在 PHP 中：

```
<?php
  $test = "somevalue;
  $url = "search.php?test=$test"
?> 
```

等等。

我怎样才能在javascript中实现这一点

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T11:03:45.117

不理会这个动作。您正在尝试修改查询字符串中的数据。

生成隐藏输入并将其添加到表单中。

```
var i = document.createElement('input');
i.type = 'hidden';
i.name = 'test';
i.value = foo;
document.forms.id_of_form.appendChild(i); 
```

# ios - IPA 文件混乱。如何确定我的 .ipa 文件是否可以在另一部 iPhone 上运行？

> ID：11738611
> 
> 赞同：0
> 
> 时间：2012-07-31T10:59:49.510
> 
> 标签：ios, ios4

iOS 新手。总能感觉到，iOS 中的事情并不是一帆风顺的。我正在使用 Xcode 4.3.3 开发应用程序，我提供了一个 iPhone 设备用于测试目的，我已经获得了开发配置文件，以便我可以在设备上运行应用程序。完美，到目前为止没有任何问题。现在我的客户购买了一台新设备，他想运行该应用程序。我做了以下事情：

在 Xcode 中：

```
product -> Archieve 
```

它打开`Organizer`，在`Organiser`，

1.  选择存档，然后按“分发”；
2.  选择*“保存为企业或临时部署”*；
3.  对于代码签名身份-> 我选择了其中列出的注册名称；

现在它要求将 .ipa 文件保存在磁盘中。我保存了。

问题：

1.  现在，是否将这个 .ipa 文件本身提供给客户端进行测试？
2.  我需要提供任何附加文件吗？即，`<something>.mobileprovision`如果是，为什么需要提供？
3.  我们是否需要在某处包含新的 iPhone UID，以便应用程序可以在新手机中运行？

请给我一个方向，太多的链接真的很混乱。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T11:04:03.017

1）是的，但是我建议您在选择“保存为企业”时创建一个 .plist 文件，然后将其上传到您的网络服务器并像这样打开它：`itms-services://?action=download-manifest&url=http://www.myserver.com/ota/myapp/appname.plist`

2&3) 如果您有 iOS 开发人员程序：是的，应创建配置文件，并将设备的 UDID 附加到配置文件（应用程序）。这应该在 iTunes 连接中完成。如果您有企业开发者计划：您不需要设备的 UDID

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T11:05:33.207

1.  是的。

2.  不，它是在构建阶段根据应用程序的代码签名构建设置选择的。只需确保选择与存档时使用的证书相同的证书。

3.  您需要将其添加到[http://developer.apple.com/](http://developer.apple.com/)上的 Provisioning Portal ，然后下载新的配置文件。将此添加到 Xcode 并随后构建以包含新设备。

# php - PHPMailer Gmail SMTP 联系我们 表单 AddReplyTo

> ID：11738612
> 
> 赞同：0
> 
> 时间：2012-07-31T10:59:53.757
> 
> 标签：php, smtp, gmail, phpmailer

我有以下代码。如您所见，我将 replyTo 字段设置为在联系我们表单中输入的电子邮件。但是，这不起作用。每次我收到来自我的联系表格的电子邮件时，我都需要复制电子邮件（在我的邮件正文中）并将其粘贴到“收件人”字段中。由于 to 字段将忽略我放置不同回复电子邮件的事实，而只需使用我的网站电子邮件。知道有什么问题吗？

```
require_once('mailer/class.phpmailer.php');

$mail             = new PHPMailer();

$mail->IsSMTP(); // telling the class to use SMTP
$mail->Host       = "smtp.gmail.com"; // SMTP server
$mail->SMTPDebug  = 1;                     // enables SMTP debug information (for testing)
                                           // 1 = errors and messages
                                           // 2 = messages only
$mail->SMTPAuth   = true;                  // enable SMTP authentication
$mail->SMTPSecure = "ssl";                 // sets the prefix to the servier
$mail->Host       = "smtp.gmail.com";      // sets GMAIL as the SMTP server
$mail->Port       = 465;                   // set the SMTP port for the GMAIL server
$mail->Username   = "email";  // GMAIL username
$mail->Password   = "password";            // GMAIL password

$mail->SetFrom("mywebsitesemail", "my name");
$mail->AddAddress("mywebsitesemail", "my name");
$mail->AddReplyTo("$email","$name");

$mail->Subject    = "Subject";

$mail->AltBody    = "To view the message, please use an HTML compatible email viewer!"; // optional, comment out and test

$mail->MsgHTML("$message");

$mail->Send(); 
```

# jquery - 使用 jquery 查询 xml 日期节点

> ID：11738614
> 
> 赞同：0
> 
> 时间：2012-07-31T10:59:58.347
> 
> 标签：jquery, xml, date

我有以下 xml，它只是按 x 周、天、轮班开始日期和结束日期构建的轮班模式。如果我的 xml 节点“启用为真”，我需要查询 xml 以在该周的轮班时间内更改 div 的内容。

例如'week1' 'Monday' 'Date' '班次开始' '班次结束' 'enabled = true' 然后将div的内容（html）更改为该班次期间。

XML 示例时间表如下：

```
<Schedule>
  <Week2>
    <StartDate>2012-07-30T00:00:00</StartDate> <!-- Week Beginning -->
        <Shift>
            <Date>2012-07-30T00:00:00</Date> <!-- Monday -->
            <StartTime>2012-07-30T09:45</StartTime> <!-- Shift Starts -->
            <EndTime>2012-07-30T17:45</EndTime> <!-- Shift Ends -->
            <Enabled>true</Enabled>
        </Shift>
        <Shift>
            <Date>2012-07-31T00:00:00</Date> <!-- Tuesday -->
            <StartTime>2012-07-31T09:45</StartTime> <!-- Shift Starts -->
            <EndTime>2012-07-31T17:45</EndTime> <!-- Shift Ends -->
            <Enabled>true</Enabled>
        </Shift>
        <Shift>
            <Date>2012-08-01T00:00:00</Date> <!-- Wednesday -->
            <StartTime></StartTime> <!-- Shift Starts -->
            <EndTime></EndTime> <!-- Shift Ends -->
            <Enabled>false</Enabled>
        </Shift>
        <Shift>
            <Date>2012-08-02T00:00:00</Date> <!-- Thursday -->
            <StartTime>2012-08-02T09:45</StartTime> <!-- Shift Starts -->
            <EndTime>2012-08-02T17:45</EndTime> <!-- Shift Ends -->
            <Enabled>true</Enabled>
        </Shift>
        <Shift>
            <Date>2012-08-03T00:00:00</Date> <!-- Friday -->
            <StartTime>2012-08-03T09:45</StartTime> <!-- Shift Starts -->
            <EndTime>2012-08-03T17:45</EndTime> <!-- Shift Ends -->
            <Enabled>true</Enabled>
        </Shift>
        <Shift>
            <Date>2012-08-04T00:00:00</Date> <!-- Saturday -->
            <StartTime>2012-08-04T08:15</StartTime> <!-- Shift Starts -->
            <EndTime>2012-08-04T16:45</EndTime> <!-- Shift Ends -->
            <Enabled>true</Enabled>
        </Shift>
        <Shift>
            <Date>2012-08-05T00:00:00</Date> <!-- Sunday -->
            <StartTime></StartTime> <!-- Shift Starts -->
            <EndTime></EndTime> <!-- Shift Ends -->
            <Enabled>false</Enabled>
        </Shift>
  </Week2>
</Schedule> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T12:22:04.990

```
 var xml = "our xml...";

    var resultArray = 
    $(xml).find('Enabled:contains(true)')
        .parent()
        .map(function(item){
            return {
              date: $(this).children('Date').text(),
              startTime: $(this).children('StartTime').text()
              // and so on ....
            }
        })).get(); 
```

父级将返回班次对象的集合。如果您需要一周，则使用“父母”并指定第 2 周，然后像示例中那样查看后代。

# c++ - 更好地理解堆栈和列表

> ID：11738616
> 
> 赞同：3
> 
> 时间：2012-07-31T11:00:06.963
> 
> 标签：c++, heap-memory

有这个代码：

```
void set(list<Person*>* listP){
    Person timmy = Person(10);
    listP->push_back(&timmy);
}
int main()
{
    list<Person*> listP;
    set(&listP);
    Person* timmy  = listP.back();
} 
```

如果我理解正确（请纠正我） timmy 是在堆栈上分配的，所以当我在 main 中使用它们时，我不能指望 timmy 的值。我对么？我需要像这样创建 timmy：

```
Person* timmy = new Person(10); 
```

为了在堆上而不是在堆栈上创建它，所以它不会在方法返回后被销毁？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T11:02:05.970

```
void set(list<Person*>* listP){
    Person timmy = Person(10); // create timmy on automatic storage (stack)
    listP->push_back(&timmy); //push timmy's address
} //timmy is destroyed. pushed address points to deallocated memory 
```

是的，您需要使用`Person* timmy = new Person(10);`在堆上分配。

```
void set(list<Person*>* listP){
    Person *timmy = new Person(10); // timmy is a pointer now
    listP->push_back(timmy); //push timmy's copy (copy of pointer)
} //timmy (pointer) is destroyed, but not the memory it points to 
```

也更喜欢使用`smart_pointers`诸如`std::shared_ptr`、`std::unique_ptr`或`boost`智能指针。它将简化内存管理和编写`exception-safe`代码

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T11:22:25.560

您的假设是正确的，但是如果您使用 a of s 代替，则**不必**`timmy`在“堆”上创建：`list``Person`

```
void set(list<Person>& listP){
    listP.push_back(Person(10));
} 
```

~~极有可能不会在`push_back`（[复制省略](http://en.wikipedia.org/wiki/Copy_elision)）~~中制作额外的人副本。在 C++11 中，即使没有省略复制，移动语义也可能会发挥作用，并且复制成本很高。

# jquery - 我们如何在 cookie 中选择 div

> ID：11738618
> 
> 赞同：0
> 
> 时间：2012-07-31T11:00:14.070
> 
> 标签：jquery, html

我有一个滑动菜单，可以在其中滑动一些 div。

在页面刷新或更改之后，我想要该菜单的状态，因为我使用了 cookie。

在那个cookie中，我得到的任何值都会影响整个班级，所以我所有的孩子都会出现在屏幕上，而不是那个选定的div。

我也制作了一个 jsfiddle 以供审查。[在这里](http://jsfiddle.net/wasimkazi/fauNg/25/)检查

```
function getCookie(c_name) {
var i, x, y, ARRcookies = document.cookie.split(";");
for (i = 0; i < ARRcookies.length; i++) {
    x = ARRcookies[i].substr(0, ARRcookies[i].indexOf("="));
    y = ARRcookies[i].substr(ARRcookies[i].indexOf("=") + 1);
    x = x.replace(/^\s+|\s+$/g, "");
    if (x == c_name) {
        return unescape(y);
    }
   }
  }

function setCookie(c_name, value, exdays) {
var exdate = new Date();
exdate.setDate(exdate.getDate() + exdays);
var c_value = escape(value) + ((exdays === null) ? "" : "; expires=" +  exdate.toUTCString());
document.cookie = c_name + "=" + c_value;
}

var widget2 = $(".widget2"),
box2 = $(".box2");
var inner = $(".inner"),
box = $(".box");

widget2.hide();
inner.hide();

if(getCookie('box2') == 'on'){
widget2.show();
//alert('hi');
}else{
widget2.hide();
//alert('hiiiiii');
} 

if(getCookie('box') == 'on'){
//widget2.show();
inner.show();
alert('hi');
}else{
inner.hide();
//alert('hiiiiii');
}

box2.click(function() {
$(this).next(widget2).slideToggle("fast", function() {
var flag = ($(this).css("display") == 'none')?'off':'on';
  setCookie('box2', flag);
 });
});

var inner = $(".inner"),
box = $(".box");

box.click(function() {
$(this).next(inner).slideToggle("fast", function() {
var flag = ($(this).css("display") == 'none')?'off':'on';
setCookie('box', flag);
 });
});​ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T12:37:33.990

这个现在工作完美。[演示](http://jsfiddle.net/wasimkazi/BjfsJ/1/)

```
$(document).ready(function() {

$(".widget2").hide();
$(".inner").hide();

function getCookie(c_name) {
    var i, x, y, ARRcookies = document.cookie.split(";");
    for (i = 0; i < ARRcookies.length; i++) {
        x = ARRcookies[i].substr(0, ARRcookies[i].indexOf("="));
        y = ARRcookies[i].substr(ARRcookies[i].indexOf("=") + 1);
        x = x.replace(/^\s+|\s+$/g, "");
        if (x == c_name) {
            return unescape(y);
        }
    }
}

function setCookie(c_name, value, exdays) {
    var exdate = new Date();
    exdate.setDate(exdate.getDate() + exdays);
    var c_value = escape(value) + ((exdays === null) ? "" : "; expires=" + exdate.toUTCString());
    document.cookie = c_name + "=" + c_value;
}

var widget2 = $(".widget2");
var box2 = $(".box2");
if (getCookie('box2cooki')) {
    var id = getCookie('box2cooki');
    //alert('#'+id);
  $('#' + id).next(widget2).slideDown(100);
  $('#' + id).closest('div').next().find('.inner').slideDown(100);
} else {
    $(".widget2").hide();
    $(".inner").hide();
}

box2.click(function() {
    $(this).next(widget2).slideToggle(200);
    var box2ID = $(this).attr('id');
    setCookie('box2cooki', box2ID);
    //alert(box2ID);
});
//$(".inner").hide();
$(".box").click(function() {
    $(this).next(".inner").slideToggle(200);
});

//alert(box2ID);
});​ 
```

# javascript - 用于 JSON 的 FullCalendar ServerCode

> ID：11738622
> 
> 赞同：0
> 
> 时间：2012-07-31T11:00:30.427
> 
> 标签：javascript, jquery, asp.net, vb.net, fullcalendar

我正在为我的 ASPX 编程使用 VisualBasic，并希望为全日历做一个 JSON 提要。我有这个：

```
$('#calendar').fullCalendar('addEventSource','ajax.vb/Test'); 
```

```
Imports System.Web
Imports System.Web.UI
Imports System.Web.Services
Imports System.Web.UI.WebControls
Imports System.Web.Script.Services
Imports System.Web.Services.Protocols
Imports System.Data.OleDb

<ScriptService()> _
Partial Public Class ajax

    <WebMethod()> _
   Public Shared Function Test(ByVal start As String, ByVal ende As String) As String
        Dim EventSource As String = ""
        Return EventSource
    End Function
End Class 
```

我回来了：

> “NetworkError: 403 Forbidden - =1343731700843">http://localhost:58749/ajax.vb/Test?start=1341093600&ende=1344722400&=1343731700843”
> Pagetype 不会被处理。
> 说明：请求的页面类型没有被处理，因为它被明确禁止。

我必须使用PHP（我真的不想）还是我做了某事。服务器端错了？我用上面的 vb-Class、.aspx 页面和 WebService (.asmx) 尝试了代码。
我该怎么做才能成功调用服务器端代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T02:10:10.750

我认为您将需要使用 Web 服务并使用 http://yourwebsite/ yourService.asmx 调用它

在我们发言时，我正在尝试利用这一点，但找不到任何关于将日历连接到从 SQL 收集数据的 .net 服务的特定文档。

如果有人对此有任何信息，我将不胜感激。

干杯 Gwasshoppa

# javascript - 将从服务器获取的数据加载到输入文本表单中

> ID：11738624
> 
> 赞同：0
> 
> 时间：2012-07-31T11:00:34.493
> 
> 标签：javascript, jquery, html, ajax, asp-classic

我使用此代码将数据加载到我的 textarea 中：

```
$('.content_container').load("minimum_price.asp"); 
```

但是当我尝试使用以下代码将数据加载到我的输入文本表单中时：

```
$(".items").find("input[name^=Price]").load("minimum_price.asp"); 
```

ASP 文件使用以下代码返回结果值：

```
if(minPrice <> "") then
    minPrice = CLng(minPrice)
    Response.Write(minPrice)
end if 
```

没发生什么事。谁能帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T11:09:49.933

那是因为 jquery 加载加载在您的 html 元素中。你需要做这样的事情：

```
$.get("minimum_price.asp", function(res){
 $(".items").find("input[name^=Price]").val(res);
}); 
```

# javascript - KnockoutValidation 和条件要求规则

> ID：11738634
> 
> 赞同：19
> 
> 时间：2012-07-31T11:01:01.247
> 
> 标签：javascript, knockout.js, knockout-validation

我正在尝试将[KnockoutValidation](https://github.com/ericmbarnard/Knockout-Validation)与条件语句一起使用。请参见下面的代码：

```
self.transactionType = ko.observable('Option1');

self.ConditionalField = ko.observable().extend({
  required: true, 
  onlyIf: self.transactionType = ="Option2"
}); 
```

不幸的是，这不起作用。我只想在有值的`ConditionalField`情况下才需要。`transactionType``'Option2'`

将条件验证与 knockout.validation.js 一起使用的最佳方法是什么？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-07-31T11:18:16.010

我已经解决了。

首先，我犯了一个错误，`transactiontype`在定义`conditionalfield`. 有效的最终代码如下所示：

```
self.transactionType = ko.observable("Option1");

self.conditionalField = ko.observable().extend({
  required: {
    onlyIf: function () { 
      return self.transactionType () == "Option2";
    }
  }
}); 
```

# php - 什么改变了循环中的条件：while (mysql_fetch_array($var))？

> ID：11738636
> 
> 赞同：1
> 
> 时间：2012-07-31T11:01:20.700
> 
> 标签：php, mysql, arrays, fetch

我是初学者 C 程序员。我最近开始学习 PHP 和 MySQL，并在 while 循环中遇到了这种有趣的行为：

```
while ($pages = mysql_fetch_array($pages_set))
    {statement} 
```

我之前了解到，必须在循环中的某处（或表达式本身）更改条件，以使循环是有限的，但在这种情况下，我只是看不到它。

我对 mysql_fetch_array() 函数进行了一些研究，发现[了这个](http://php.net/manual/en/function.mysql-fetch-array.php)：

> 返回对应于获取的行的数组**并将内部数据指针向前移动**。

是否说指针在行中移动并且当它到达末尾时将返回 0 或 NULL？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T11:13:27.070

每次迭代时，指针都会移动到记录集中的下一行，因此当没有剩余数据时，$pages 将为 NULL 并且循环将结束。

# php - 如何控制 tcpdf 中的分页符

> ID：11738638
> 
> 赞同：0
> 
> 时间：2012-07-31T11:01:23.300
> 
> 标签：php, yii, tcpdf

我正在使用 yii php 中的 TCPDF 库为发票生成 pdf 文档。在地址数据之后有一部分是购买的物品列表。该列表的长度可变，因此很难预测下一部分将呈现在哪里。最后还有一部分包括付款、税金、运费等。

我想知道如何使最后一部分牢不可破。所以它要么完全在第一页上，要么完全在第二页上。

这甚至可行吗？

如果它有帮助，这里是相关部分的代码：

```
$pdf->SetFont("helvetica", "", 9);
$pdf->Cell(4,0,'Versandart','TLR',0,'L',0,'',0, 0,'','T');
$pdf->Cell(8,0,"$model->versandart",'TBLR',0,'R',0,'',0, 0,'','B');
$pdf->SetFont("helvetica", "", 6);
$pdf->Cell(5,0.4,'Hiermit bestätige ich den Auftrag','TLR',1,'R',0,'',0, 0,'','T');
$pdf->SetFont("helvetica", "", 9);
$pdf->Cell(4,0,'Frachtpreis','TLR',0,'L',0,'',0, 0,'','T');
$pdf->Cell(8,0,"$model->versandpreis €",'BLR',0,'R',0,'',0, 0,'','B');
$pdf->Cell(5,0,'','LR',1,'R',0,'',0, 0,'','T');
$pdf->Cell(4,0,'Nachnahmegeb.','TLR',0,'L',0,'',0, 0,'','T');
$pdf->Cell(8,0,"$model->nachnahme €",'BLR',0,'R',0,'',0, 0,'','B');
$pdf->Cell(5,0,'','LR',1,'R',0,'',0, 0,'','T');
$pdf->Cell(4,0,'SPV-Versicherung','TLR',0,'L',0,'',0, 0,'','T');
$pdf->Cell(8,0,"$model->versicherung €",'BLR',0,'R',0,'',0, 0,'','B');
$pdf->SetFont("helvetica", "B", 6);
$pdf->Cell(5,0.4,'Ort, Datum, Unterschrift','BLR',1,'R',0,'',0, 0,'','B');
$pdf->SetFont("helvetica", "", 9);
$pdf->Cell(4,0,'Nettobetrag','TLR',0,'L',0,'',0, 0,'','T');
$pdf->Cell(8,0,$totalSum-($model->vat/100)*$totalSum." €",'BLR',0,'R',0,'',0, 0,'','B');
$pdf->SetFont("helvetica", "", 6);
$pdf->Cell(5,0.4,'Ich erkenne die AGB in der Homepage','TLR',1,'R',0,'',0, 0,'','T');
$pdf->SetFont("helvetica", "", 9);
$pdf->Cell(4,0,"incl. $model->vat% MwSt.",'TLR',0,'L',0,'',0, 0,'','T');
$pdf->Cell(8,0,($model->vat/100)*$totalSum." €",'BLR',0,'R',0,'',0, 0,'','B');
$pdf->SetFont("helvetica", "", 6);
$pdf->Cell(5,0.4,'unter Kontakt nachzulesen hiermit an.','LR',1,'R',0,'',0, 0,'','T');
$pdf->SetFont("helvetica", "", 9);
$pdf->Cell(4,0,'Summe','TLR',0,'L',0,'',0, 0,'','T');
$pdf->Cell(8,0,$totalSum." €",'BLR',0,'R',0,'',0, 0,'','B');
$pdf->SetFont("helvetica", "B", 6);
$pdf->Cell(5,0.4,'','LR',1,'R',0,'',0, 0,'','B');
$pdf->SetFont("helvetica", "", 9);
$pdf->Cell(4,0,'zu bezahlen','TBLR',0,'L',0,'',0, 0,'','T');
$pdf->Cell(8,0,$totalSum-$model->paymentSum." €",'BLR',0,'R',0,'',0, 0,'','B');
$pdf->SetFont("helvetica", "B", 6);
$pdf->Cell(5,0.4,'Ort, Datum, Unterschrift','BLR',1,'R',0,'',0, 0,'','B');
$pdf->Ln();
$pdf->MultiCell(4, 1, 'Hiermit bestätige ich den Auftrag', 'TLR', 'R', 0, 1, '', '', true, 0, false, true, 0, 'T');
$pdf->MultiCell(4, 1, 'Ort, Datum, Unterschrift', 'BLR', 'R', 0, 1, '', '', true, 0, false, true, 0, 'B'); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-31T11:25:58.450

我知道的方法是首先生成 HTML 代码，然后让 tcpdf 将其转换为 pdf，这通常我认为更容易编码。然后，您可以使用以下样式属性来实现您正在寻找的内容：

```
<div style="page-break-inside:avoid;">
some non breakable text
</div> 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2015-12-28T07:34:16.613

有一个简单的解决方案，您可以包含 html 为您提供的`<tr>`中断，只需使用`nobr="true"`
例如：

```
<table><tr nobr="tr">
<td>
<td/>
</tr>
</table> 
```

# c# - 在用户设置中存储 array[,]

> ID：11738642
> 
> 赞同：1
> 
> 时间：2012-07-31T11:01:30.880
> 
> 标签：c#, arrays, multidimensional-array, settings

如何在程序的设置中存储一个双精度数组，然后再检索它？

* * *

#### 代码

```
string[,] user_credits = new string[user_credits_array, 10];
                    user_credits[new_user_id, 0] = user_name;
                    user_credits[new_user_id, 1] = user_email;
                    user_credits[new_user_id, 2] = user_acc_name;
                    user_credits[new_user_id, 3] = user_acc_pass;
                    user_credits[new_user_id, 4] = sSelectedClient;
                    user_credits[new_user_id, 5] = server_inkomend;
                    user_credits[new_user_id, 6] = server_uitgaand;
                    user_credits[new_user_id, 7] = server_port + "";
                    user_credits[new_user_id, 8] = ssl_state; 
```

如您所见，我是否使用用户的 id 将信息存储在一起。我以这种方式存储它：

```
Properties.Settings.Default.user_credits = user_credits;
Properties.Settings.Default.Save(); 
```

我做对了吗？现在数组还在用户设置中吗？

我怎样才能摆脱它（具有正确用户 ID 的设置）？

我知道这听起来可能很疯狂，但我认为这是最好的方法。但如果你们知道更好的方法，请告诉我。我

**编辑1：**

我有这段代码：

```
string[,] user_credits = new string[user_credits_array, 10];
user_credits[new_user_id, 0] = user_name;
user_credits[new_user_id, 1] = user_email;
user_credits[new_user_id, 2] = user_acc_name;
user_credits[new_user_id, 3] = user_acc_pass;
user_credits[new_user_id, 4] = sSelectedClient;
user_credits[new_user_id, 5] = server_inkomend;
user_credits[new_user_id, 6] = server_uitgaand;
user_credits[new_user_id, 7] = server_port + "";
user_credits[new_user_id, 8] = ssl_state;

MySettings settingsTest = new MySettings();
settingsTest.Save(MySettings.GetDefaultPath());
MySettings anotherTest = MySettings.Load(MySettings.GetDefaultPath()); 
```

运行代码后，XML 文件如下所示：

```
<Complex name="Root" type="WeProgram_Mail.MySettings, WeProgram_Mail, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null">
  <Properties>
    <Null name="user_credits" />
  </Properties> 
```

现在我不明白为什么没有保存数组。因为我有这条线

```
public string[,] user_credits { get; set; } 
```

而且我认为这会从数组中获取用户设置，但不知何故他们没有。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T11:13:22.570

用于[`System.Collections.Specialized.StringCollection`](http://msdn.microsoft.com/en-us/library/d1w61sc5)为每个字符串设置和添加一个 XML 字符串（包含您的附加属性，如 'user_name' 或 'user_email'）：

```
var collection = new StringCollection {"<user_name>aaaa<user_name><user_email>asdfasd@asdfasd</user_email>"};
Properties.Settings.Default.MySetting = collection;
Properties.Settings.Default.Save(); 
```

并在需要属性时解析 XML。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T11:12:41.953

好吧，通常我只使用[http://www.sharpserializer.com/en/index.html](http://www.sharpserializer.com/en/index.html)

它使用起来非常简单，速度很快，并且可以或多或少地序列化任何东西，包括字典等。很好的是，您可以序列化为多种目标格式，如二进制。

编辑：使用 SharpSerializer 进行序列化的示例。没有编译代码，但应该没问题。缺点：要存储的属性必须是公共的...

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using Polenter.Serialization;

namespace Test
{
    public class MySettings
    {
        // this is a property we want to serialize along with the settings class.
        // the serializer will automatically recognize it and serialize/deserialize it.
        public string[,] user_credits { get; set; }

        //
        public static MySettings Load(string path)
        {
            if (!System.IO.File.Exists(path)) throw new System.ArgumentException("File \"" + path + "\" does not exist.");
            try
            {
                MySettings result = null;
                // the serialization settings are just a needed standard object as long as you don't want to do something special.
                SharpSerializerXmlSettings settings = new SharpSerializerXmlSettings();
                // create the serializer.
                SharpSerializer serializer = new SharpSerializer(settings);
                // deserialize from File and receive an object containing our deserialized settings, that means: a MySettings Object with every public property in the state that they were saved in.
                result = (MySettings)serializer.Deserialize(path);
                // return deserialized settings.
                return result;
            }
            catch (Exception err)
            {
                throw new InvalidOperationException(string.Format("Error in MySettings.LoadConfiguration():\r\nMessage:\r\n{0}\r\nStackTrace:\r\n{1}", err.Message, err.StackTrace), err);
            }
        }

        public void Save(string targetPath)
        {
            try
            {
                // if the file isn't there, we can't deserialize.
                if (String.IsNullOrEmpty(targetPath))
                    targetPath = GetDefaultPath();

                SharpSerializerXmlSettings settings = new SharpSerializerXmlSettings();
                SharpSerializer serializer = new SharpSerializer(settings);
                // create a serialized representation of our MySettings instance, and write it to a file.
                serializer.Serialize(this, targetPath);
            }
            catch (Exception err)
            {
                throw new InvalidOperationException(string.Format("Error in MySettings.Save(string targetPath):\r\nMessage:\r\n{0}\r\nStackTrace:\r\n{1}", err.Message, err.StackTrace), err);
            }
        }

        public static string GetDefaultPath()
        {
            string result = string.Empty;
            try
            {
                // Use Reflection to get the path of the Assembly MySettings is defined in.
                string path = System.Reflection.Assembly.GetExecutingAssembly().CodeBase;
                // remove the file:// prefix for local files, or file:/// for network/unc paths
                if (path.StartsWith("file:///"))
                    path = path.Remove(0, "file:///".Length);
                else if (path.StartsWith("file://"))
                    path = path.Remove(0, "file://".Length);
                // get the path without filename of the assembly
                path = System.IO.Path.GetDirectoryName(path);
                // append default filename "MySettings.xml" as default filename for the settings.
                return System.IO.Path.Combine(path, "MySettings.xml");
            }
            catch (Exception err)
            {
                 throw new InvalidOperationException(string.Format("Error in MySettings.GetDefaultPath():\r\nMessage:\r\n{0}\r\nStackTrace:\r\n{1}", err.Message, err.StackTrace), err);
            }
        }
    }

    public class Test
    {
       public void Test()
       {
          // create settings for testing
          MySettings settingsTest = new MySettings();
          // save settings to file. You could also pass a path created from a SaveFileDialog, or sth. similar.
          settingsTest.Save(MySettings.GetDefaultPath());
          // Load settings. You could also pass a path created from an OpenFileDialog.
          MySettings anotherTest = MySettings.Load(MySettings.GetDefaultPath());
          // do stuff with the settings.
       }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T15:25:58.360

啊，我看到了问题。正如您在 XML 文件中看到的，MySettings 实例（settingsTest）中的数组为空。那是因为您在 settingsTest 对象之外填充了数组，并且从不接触或初始化 settingsTest.user_credits...

尝试以下操作：

```
MySettings settingsTest = new MySettings();
settingsTest.user_credits = new string[user_credits_array, 10];
settingsTest.user_credits[new_user_id, 0] = user_name;
settingsTest.user_credits[new_user_id, 1] = user_email;
settingsTest.user_credits[new_user_id, 2] = user_acc_name;
settingsTest.user_credits[new_user_id, 3] = user_acc_pass;
settingsTest.user_credits[new_user_id, 4] = sSelectedClient;
settingsTest.user_credits[new_user_id, 5] = server_inkomend;
settingsTest.user_credits[new_user_id, 6] = server_uitgaand;
settingsTest.user_credits[new_user_id, 7] = server_port + "";
settingsTest.user_credits[new_user_id, 8] = ssl_state;

settingsTest.Save(MySettings.GetDefaultPath());
MySettings anotherTest = MySettings.Load(MySettings.GetDefaultPath()); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-11-08T06:43:58.880

啊，我们在 2012 年还很年轻……而不是使用 JSON 序列化程序来保存您的项目列表（或数组）。我的示例使用了一个名为`MRU`而不是 doubles 的类，但想法是一样的：

### 进入设置

```
 // Extract from ObservableCollection<MRU>.
 List<MRU> asList = MRUS.ToList<MRU>();
 Properties.Settings.Default.MRUS = JsonSerializer.Serialize(asList);
 Properties.Settings.Default.Save(); 
```

### 超出设置

```
var mruText = Properties.Settings.Default.MRUS;
return string.IsNullOrWhiteSpace(mruText) ? new List<MRU>()
    : JsonSerializer.Deserialize<List<MRU>>(mruText); 
```

# automake - 禁止 automake 对变量名的规范化警告

> ID：11738650
> 
> 赞同：2
> 
> 时间：2012-07-31T11:01:47.097
> 
> 标签：automake

在我的 automake 项目中，我有一个导出的变量调用`SIMULATION_LDFLAGS`，用于构建我的项目以在系统模拟器中使用。

不幸的是，在创建 Makefile.in 文件时，将 等附加到规范化程序名称的 automake 约定`_LDFLAGS, _SOURCES`会导致警告，因为`SIMULATION_LDFLAGS`变量“引用”了当然不存在的程序 SIMULATION。

automake 的实际输出是

> src/Makefile.am:15: 变量`SIMULATION_LDFLAGS' is defined but no program or src/Makefile.am:15: library has`SIMULATION' 作为规范名称（可能错字）

有没有办法告诉 automake 这个变量不是它通常的变量名匹配魔法的一部分？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T22:00:02.370

> 有没有办法告诉 automake 这个变量不是它通常的变量名匹配魔法的一部分？

我不认为有办法给 automake 这样的异常列表。

# asp.net - 如何在 Asp.net 中恢复已删除的页面

> ID：11738652
> 
> 赞同：0
> 
> 时间：2012-07-31T11:01:54.057
> 
> 标签：asp.net

我在删除图像时错误地删除了我的 Default.aspx 页面。有人能帮助我吗？

我没有做任何备份，也不知道版本控制。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T11:07:56.333

我敢打赌，他不使用 SVM。取消删除工具或再次输入所有代码是您的选择。我建议后者。这就是我所做的，自从我记得总是使用版本管理器以来。:)

为了将来参考，您可能需要安装：

a) Mercurial，可[在此处下载](https://www.mercurial-scm.org/)

b) VisualHG，可[在此处下载](http://visualhg.codeplex.com/)

由于 (b) 可能是一个扩展，我认为它不适用于 Visual Studio 的免费版本（包括但不限于 Express 版本）。但是，如果您准备自己做一些工作并且没有自动为您完成版本管理，那么也有免费选项。

您可以选择的另一个选择是：

c) 乌龟，可[在此处下载](http://tortoisehg.bitbucket.io/)

它**不会**与 VS 集成，但它会给你源代码版本控制，你不必安装不同的工具，Mercurial 的所有后端优势加上你可以看到**有史以来最可爱的海龟**。它是免费的。

让我也引用@freefaller，他实际上暗示了这些东西。我只是在帮助他展示它，所以请随意（有义务？）给他竖起大拇指（或者更确切地说是橙色箭头），这样他的声誉就会提高。毕竟，这就是我们在这里的原因，不是为了互相帮助，而是为了赢得一些声誉（我听说，首先有一百万免费上天堂）。

> Mercurial 可以自行安装（但需要命令行界面才能工作）。可以安装 TortoiseHG，其中包括 Mercurial 和漂亮的 Windows GUI 界面（尽管命令行界面仍然可以工作，因为已经安装了 Mercurial）。如果安装了之前的选项之一，则可以安装 VisualHG。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T11:18:20.293

除非您有一个备份系统（无论是使用[Windows 备份](http://windows.microsoft.com/en-CA/windows7/products/features/backup-and-restore)还是版本控制系统，如 Mercurial/ [TortoiseHG](http://tortoisehg.bitbucket.io/)、SVN、Git、Visual SourceSafe 等），否则您将不走运。

“取消删除”工具可能会找到该文件-但这实际上取决于自删除以来您在计算机上做了多少。网络上有很多实用程序，包括免费的和付费的。

与从 Windows 资源管理器中删除文件（默认情况下将文件移动到回收站）不同，应用程序删除的任何文件通常都会永久删除该文件。

只有当计算机需要“撤消”某些东西时，计算机才能“撤消”某些东西……不幸的是，您似乎处于计算机无能为力的情况。

如果您已经将文件的副本发布到服务器，那么您可以获得该文件的副本 - 尽管它不会在发布后进行任何更改。

出于这个原因，我**强烈**建议您考虑使用版本控制系统（例如我在前面的回答中提到的），并定期备份您的代码。

我只使用过 Visual SourceSafe 和 TortoiseHG，我可以彻底推荐[TortoiseHG](http://tortoisehg.bitbucket.io/)（以及Visual Studio 的[VisualHG 插件](http://visualhg.codeplex.com/)）。

# php - json_decode() 返回空白，但它是有效的 json

> ID：11738655
> 
> 赞同：9
> 
> 时间：2012-07-31T11:01:58.790
> 
> 标签：php, json

```
$a = '[{"function":"error_handler","class":"LP","type":"::","args":[256,"Call to undefined method LP_pdo::get_rorzxx() on D:\\MARK\\htdocs\\lessphptest\\application\\controllers\\users.php (23)","D:\\MARK\\htdocs\\lessphp\\LP.php",210,{"e":{"type":1,"message":"Call to undefined method LP_pdo::get_rorzxx()","file":"D:\\MARK\\htdocs\\lessphptest\\application\\controllers\\users.php","line":23}}]},{"file":"D:\\MARK\\htdocs\\lessphp\\LP.php","line":210,"function":"trigger_error","args":["Call to undefined method LP_pdo::get_rorzxx() on D:\\MARK\\htdocs\\lessphptest\\application\\controllers\\users.php (23)",256]},{"function":"shutdown","class":"LP","type":"::","args":[]}]';
$a = json_decode($a);
print_r($a);

echo json_last_error(); 
```

`print_r()`返回空白。

`json_last_error()`返回 4 即`JSON_ERROR_SYNTAX`

[但是，当我在http://jsonlint.com/](http://jsonlint.com/)中运行 json 字符串时，它会返回`Valid JSON`

任何想法为什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-31T11:05:08.693

您需要`\`为 PHP 转义一次，为 JSON转义一次

`D:\\\\....`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T11:11:12.980

尝试将编码设置为 utf-8 ...为我完成了这项工作

# ruby-on-rails - 在 Windows 7 上安装 capybara 0.8.0 时出错

> ID：11738656
> 
> 赞同：0
> 
> 时间：2012-07-31T11:02:01.450
> 
> 标签：ruby-on-rails, windows-7, capybara-webkit

我是使用 Ruby 的新手，我需要在 Windows 7 上安装 Rails 服务器以便在 IE 中测试一些应用程序。

我做的一切都很好（我希望）但是现在当我尝试`bundle install`在 cmd 上运行时，我收到了这个错误：

```
An error occured while installing capybara-webkit (0.8.0), and Bundler cannot co
ntinue.
Make sure that `gem install capybara-webkit -v '0.8.0'` succeeds before bundling
. 
```

如何在 Windows 7 上安装 capybara-webkit？

我还尝试按照 Stackoverflow 上的其他说明在未测试的情况下运行 Bundle，但它不起作用。

我希望你能帮忙。

我无法在 Ubuntu 上构建 VM，所以不建议我这样做，而且我没有 Mac。

* * *

安装 capybara-webkit -v '0.8.0' 时出错：

暂时增强 PATH 以包含 DevKit... 构建原生扩展。这可能需要一段时间... 错误：安装 capybara-webkit 时出错：错误：无法构建 gem 原生扩展。

```
 C:/Ruby/bin/ruby.exe extconf.rb 
```

其中： (.;C:\Ruby\DevKit\bin;C:\Ruby\DevKit\mingw\bin;C:\Program Files\Common Files\Microsoft Shared\Windows Live;C:\Program Files ( x86)\Common File s\Microsoft Shared\Windows Live;C:\Windows\system32;C:\Windows;C:\Windows\System 32\Wbem;C:\Windows\System32\WindowsPowerShell\v1.0\;C :\Program Files\WIDCOMM\Blu etooth Software\;C:\Program Files\WIDCOMM\Bluetooth Software\syswow64;C:\Program Files (x86)\ATI Technologies\ATI.ACE\Core-Static;C:\Program Files \Broadcom\Broadcom 802.11 网络适配器;C:\Program Files (x86)\Windows Live\Shared;C:\Program Files\TortoiseSVN\bin;c:\Program Files (x86)\Microsoft SQL Server\100\Tools \Bi nn\;c:\Program Files\Microsoft SQL Server\100\Tools\Binn\;c:\Program Files\Micro soft SQL Server\100\DTS\Binn\;c:\Program Files (x86)\Microsoft SQL Server\100\To ols\Binn\VSShell\Common7\IDE\;c:\Program Files (x86)\Microsoft SQL Server\100\DT S\Binn\;C:\Program Files (x86)\QuickTime\QTSystem\;c:\Program Files (x86)\Micros oft ASP.NET\ASP. NET 网页\v1.0\;C:\Program Files (x86)\VisualSVN\bin:C:\Wind ows\Microsoft.NET\Framework\v3.5;C:\Program Files\TortoiseGit\bin;C: \Ruby\bin;C:\Ruby193\bin) 其中：(.;C:\Ruby\DevKit\bin;C:\Ruby\DevKit\mingw\bin;C:\Program Files\Common Files 中没有 qmake-qt4 \Microsoft Shared\Windows Live;C:\Program Files (x86)\Common Files\Microsoft Shared\Windows Live;C:\Windows\system32;C:\Windows;C:\Windows\Sy stem32\Wbem;C:\ Windows\System32\WindowsPowerShell\v1.0\;C:\Program Files\WIDCOMM\Bluetooth Software\;C:\Program Files\WIDCOMM\Bluetooth Software\syswow64;C:\Program Files (x86)\ATI Technologies\ATI .ACE\Core-Static;C:\Program Files\Broadcom\ Broadcom 802.11 网络适配器;C:\Program Files (x86)\Windows Live\Shared;C:\Program Files\TortoiseSVN\bin;c:\Program Files (x86)\Microsoft SQL Server\100\Tool s\Binn\;c:\Program Files\ Microsoft SQL Server\100\Tools\Binn\;c:\Program Files\Microsoft SQL Server\100\DTS\Binn\;c:\Program Files (x86)\Microsoft SQL Server\10 0\Tools\Binn\VSShell \Common7\IDE\;c:\Program Files (x86)\Microsoft SQL Server\10 0\DTS\Binn\;C:\Program Files (x86)\QuickTime\QTSystem\;c:\Program Files (x86)\ Mi crosoft ASP.NET\ASP.NET Web Pages\v1.0\;C:\Program Files (x86)\VisualSVN\bin:C:\Windows\Microsoft.NET\Framework\v3.5;C:\Program Files \TortoiseGit\bin;C:\Ruby\bin;C:\Ruby193\bin)\Program Files (x86)\Microsoft SQL Server\10 0\Tools\Binn\VSShell\Common7\IDE\;c:\Program Files (x86)\Microsoft SQL Server\10 0\DTS\Binn\;C:\Program文件 (x86)\QuickTime\QTSystem\;c:\Program Files (x86)\Mi crosoft ASP.NET\ASP.NET Web Pages\v1.0\;C:\Program Files (x86)\VisualSVN\bin:C :\Windows\Microsoft.NET\Framework\v3.5;C:\Program Files\TortoiseGit\bin;C:\Ruby\bin;C:\Ruby193\bin)\Program Files (x86)\Microsoft SQL Server\10 0\Tools\Binn\VSShell\Common7\IDE\;c:\Program Files (x86)\Microsoft SQL Server\10 0\DTS\Binn\;C:\Program文件 (x86)\QuickTime\QTSystem\;c:\Program Files (x86)\Mi crosoft ASP.NET\ASP.NET Web Pages\v1.0\;C:\Program Files (x86)\VisualSVN\bin:C :\Windows\Microsoft.NET\Framework\v3.5;C:\Program Files\TortoiseGit\bin;C:\Ruby\bin;C:\Ruby193\bin)

Gem 文件将继续安装在 C:/Ruby/lib/ruby/gems/1.9.1/gems/capybara-web kit-0.8.0 以供检查。结果记录到 C:/Ruby/lib/ruby/gems/1.9.1/gems/capybara-webkit-0.8.0/./gem_m ake.out

# android - 如何从 SD 卡自动运行和安装 android .apk？

> ID：11738660
> 
> 赞同：-2
> 
> 时间：2012-07-31T11:02:11.457
> 
> 标签：android, installation, apk, sd-card, autorun

任何人都可以告诉我在打开 Android 设备时，只要您放入 SD 卡（带有 .apk 文件）就自动运行并安装 .apk 的代码吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T11:53:23.283

Android 中没有这样的功能，抱歉。某些第三方应用程序可能会提供此功能，以监视外部存储中的新文件并安装在那里找到的任何 APK。

# iphone - 核心地块配置错误

> ID：11738663
> 
> 赞同：0
> 
> 时间：2012-07-31T11:02:24.863
> 
> 标签：iphone, ios, core-plot, xcode4.1

我正在尝试将 CorePlot 用于 iOS 应用程序，我按照[此处的说明进行操作。](http://www.raywenderlich.com/13269/how-to-draw-graphs-with-core-plot-part-1) 但即使`CorePlot-CocoaTouch.h`文件存在（CorePlot/CorePlotHeaders），构建失败说：

> /Users/zakariagaizi/Desktop/core_plot/core_plot/core_plot-Prefix.pch:14:36：错误：CorePlot-CocoaTouch.h：没有这样的文件或目录

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T11:28:39.757

所以你必须将你的项目文件的相对路径添加到“Header Search Paths”中的CorePlot目录中，以便预处理器可以找到它们。

# php - 分页完成后，我想在特定对象页面上执行下一个和上一个链接

> ID：11738665
> 
> 赞同：0
> 
> 时间：2012-07-31T11:02:33.907
> 
> 标签：php, codeigniter, pagination, smarty

我正在使用 PHP 在 codeigniter 中处理一些列表和画廊。我已经用分页完成了所有的搜索和良好的搜索结果页面。

现在，当我单击搜索结果列表中的位置时，它会让我进入包含单个结果、描述等的页面。

我的问题是：如何在单个结果页面上巧妙地制作“下一个”和“上一个”链接？单击下一步后，将转到下一个结果等页面。

除了在浏览时将完整的搜索结果存储在某个数组中之外，还有其他方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T11:15:21.677

您可以改为存储搜索条件（小得多 -> 可以存储很长时间，因此您不需要通过有时显示 prev/next 有时不显示来混淆 UX）并添加一些通用的用户独立缓存层到搜索结果。（这假设搜索结果不是个性化的，并且不会及时发生太大变化。）

# windows - 检测用户何时在 Windows 上激活文本字段

> ID：11738666
> 
> 赞同：0
> 
> 时间：2012-07-31T11:02:34.133
> 
> 标签：windows, winapi, visual-c++

我正在尝试制作一个在您需要时会弹出的键盘，就像 iPhone 网络浏览器所做的那样。在 Windows 上，当用户在任何窗口上激活文本字段时应该会发生这种情况。

搜索后我打算尝试 EnumWindows 和 EnumChildWindows 枚举所有控件。如果可行（我怀疑），那么我如何判断哪个是活动的以及该控件是否接受文本输入？还是有更好的方法来实现我想要做的事情？

项目使用 C++ 和 Win32 API。

编辑：根据 rene 的评论，我现在可以使用 SetWinEventHook 函数和 EVENT_OBJECT_FOCUS 获取活动（子）窗口句柄。但我仍然无法确定它是否是用户可以输入文本的窗口。

调用 GetGUIThreadInfo 并将返回的 hwndCaret 句柄与 SetWinEventHook 回调返回的窗口进行比较可以部分工作。它适用于记事本和 Chrome 地址栏，但不适用于 MS Visual Studio 子窗口。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T14:33:38.877

看起来您描述的功能是 Windows 辅助功能的一部分：

[WIN32 API](http://msdn.microsoft.com/en-us/library/ee663255%28v=vs.85%29)

[最终用户视角](http://windows.microsoft.com/en-US/windows/help/accessibility/keyboard-and-mouse)

[概述](http://msdn.microsoft.com/en-us/library/windows/desktop/bb735024.aspx)

# c# - 如何投射到 MyInterface

> ID：11738673
> 
> 赞同：1
> 
> 时间：2012-07-31T11:02:48.710
> 
> 标签：c#, generics, casting

我已经实现了一个通用存储库，但需要在运行时动态创建适当的存储库，将实体类型作为字符串。

我设法使用以下方法创建了存储库：

```
 Assembly common = Assembly.LoadFrom(@"CommonLibrary.dll");
        Type entityType = common.GetType("Models.OneOfManyEntities");
        Type repoType = typeof(TradeSiftRepository<>).MakeGenericType(entityType);

        var repo = Activator.CreateInstance(repoType, new UnitOfWork()); 
```

然而`repo`是一个对象，我真的希望它投射到`IRepository<TEntity>`我已经尝试过`IRepository<entityType>`但这是不正确的

这是回购的界面：

```
public interface IRepository<TEntity> : IDisposable where TEntity : class
{
    IQueryable<TEntity> FindAll();
    IQueryable<TEntity> Find(Expression<Func<TEntity, bool>> filter = null, Func<IQueryable<TEntity>, IOrderedQueryable<TEntity>> orderBy = null, string includeProperties = "");
    TEntity FindById(object Id);
    void Insert(TEntity entity);
    void Update(TEntity entity);
    void Delete(object id);
    void Delete(TEntity entity);
} 
```

repo 的激活实例是正确的类型，但 Activator 返回一个对象类型，因此我需要对其进行强制转换以使用这些方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T11:17:11.053

您说您要将对象转换为`IRepository<TEntity>`，但`TEntity`仅在运行时可用（您在变量中有对`Type`对象的引用）。`entityType`

如果`IRepository<entityType>`可能的话，您希望从诸如 的方法中得到`FindById`什么？我想可能是一个`entityType`例子？现在，由于`entityType`可以是任何类型并且仅在运行时确定，编译器不可能知道如何编译任何涉及`entityType`变量的代码。因此，`IRepository<entityType>`是不可能的。

有两种可能的解决方案，具体取决于您要实现的目标：

1.  如果您不想运行任何需要了解您的实体对象的代码，请实现一个额外`IRepository`的类似接口来处理类型的实体（如果添加的任何内容与当前的 s 不匹配，则`object`可能会抛出s ）。将调用结果转换为该新接口类型。`ArgumentException``entityType``Activator.CreateInstance`
2.  创建一个将实体类型作为泛型参数的新泛型类。将处理您的实体和存储库的所有代码移动到该新类中，它始终使用作为通用参数提供的实体类型。`Activator.CreateInstance`通过类似于您现在直接对类执行的操作来实例化该泛型`TradeSiftRepository<T>`类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T11:48:18.577

我不认为你在问什么是可能的。如果您的代码正在接收表示泛型类型参数的字符串，则它所表示的类型只能在运行时确定。但是，泛型类型参数应在编译时指定。

我认为如果要将实体类型用作返回类型的类型参数，则必须将实体类型作为泛型类型参数接收：

```
public IRepository<TEntity> MakeRepository<TEntity>() where TEntity : class
{
    var repo = new TradeSiftRepository<TEntity>(new UnitOfWork());
    return repo;
}

IRepository<User> userRepository = MakeRepository<User>(); 
```

如果您确实希望以字符串形式接收实体类型名称，那么在编译时将结果转换为真实类型的责任应该通过调用代码来完成，因为调用代码是指定类型的内容：

```
public object MakeRepository(string entityTypeName)
{
    Assembly common = Assembly.LoadFrom(@"CommonLibrary.dll");
    Type entityType = common.GetType(entityTypeName);
    Type repoType = typeof(TradeSiftRepository<>).MakeGenericType(entityType);

    var repo = Activator.CreateInstance(repoType, new UnitOfWork());
    return repo;
}

IRepository<User> userRepository = (IRepository<User>)MakeRepository("User"); 
```

但是，上面的代码可以通过使用该方法的泛型版本来简化；有更少的重复。如果调用代码也不知道它要求什么类型，我认为你别无选择。

一种可能的解决方法是返回动态类型，这将使​​调用代码假设它具有作者想要的类型的对象：

```
public dynamic MakeRepository(string entityTypeName)
{
    Assembly common = Assembly.LoadFrom(@"CommonLibrary.dll");
    Type entityType = common.GetType(entityTypeName);
    Type repoType = typeof(TradeSiftRepository<>).MakeGenericType(entityType);

    var repo = Activator.CreateInstance(repoType, new UnitOfWork());
    return repo;
}

dynamic userRepository = MakeRepository("ConsoleApplication1.User");
User user = userRepository.FindById(1); 
```

# mysql - 更新 MySQL DB 中的 500 个随机行

> ID：11738674
> 
> 赞同：0
> 
> 时间：2012-07-31T11:02:51.800
> 
> 标签：mysql

如何更新 MySQL 数据库中的 500 个随机行？我尝试了以下但没有奏效：

```
UPDATE `usr_usuarios` SET `feedback_solicitado` = 1 ODER BY RAND() LIMIT 500 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T11:09:49.117

要修复您遇到的语法错误，只需在查询中替换`ODER`为。`ORDER`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T11:05:06.487

为了使受影响的行数为 500，您可以添加额外的`WHERE`条件：

```
UPDATE usr_usuarios 
SET feedback_solicitado = 1 
WHERE feedback_solicitado <> 1 
ORDER BY RAND() 
LIMIT 500; 
```

编辑：正如@Jocelyn 所说：你犯了错字`ODER`而不是`ORDER`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T11:07:42.857

由于您使用的是 ODER 而不是 ORDER，因此查询应该是这样的：

```
 UPDATE usr_usuarios 
       SET feedback_solicitado = 1
    ORDER
        BY RAND() LIMIT 500 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T11:06:01.823

试试这个 UUID() 函数

```
"UPDATE usr_usuarios SET feedback_solicitado = 1 ORDER BY UUID() LIMIT 500" 
```

# c# - 使用 StructureMap 注入自定义成员资格提供程序

> ID：11738684
> 
> 赞同：5
> 
> 时间：2012-07-31T11:03:41.627
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-2, structuremap, membership-provider

我在 StructureMap 上做了一些工作，并设法在我的控制器中（通过构造函数注入）注入了一个用于接口的具体类型存储库。

现在，我需要将存储库类型注入到我的自定义成员资格提供程序中。但是怎么做？我的自定义会员提供程序是通过`Membership.Provider.ValidateUser`（例如）创建的。

对于控制器，我创建了一个这样的类：

```
public class IocControllerFactory : DefaultControllerFactory
{
    protected override IController GetControllerInstance(
        System.Web.Routing.RequestContext requestContext, 
        Type controllerType)
    {
        return (Controller)
            ObjectFactory.GetInstance(controllerType);
    }
} 
```

并且在`Global.asax`, 在`Application_Start()`:

```
//...
ObjectFactory.Initialize(x =>
{
    x.AddRegistry(new ArticleRegistry());
}
                                    );

ControllerBuilder.Current.SetControllerFactory(
    new IocControllerFactory());
//... 
```

但是如何使用 StructureMap 在我的自定义成员资格提供程序中注入具体类型？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T11:13:58.237

我认为在这种情况下没有办法注入。

注入仅在创建所需实例的“工厂”、了解注入并且成员资格提供程序区域不幸显示它的年龄时才有效。当事情以不同的方式完成时，它被编码回来:)。

如果您将自定义成员资格提供程序与 ASP.NET MVC（版本 2+）一起使用，则可以通过从 DependencyResolver 请求它来获得所需的内容，如下所示：

```
DependencyResolver.Current.GetService<IRepository<User>>(); 
```

或者您可以直接使用 ObjectFactory。

# html - 如何使用 CSS 为 JQUERY 内容滑块内联浮动箭头和项目符号？

> ID：11738688
> 
> 赞同：0
> 
> 时间：2012-07-31T11:04:02.683
> 
> 标签：html, css

需要帮助对齐 CSS 中的某些元素。目前有一个小的内容滑块，将显示简单的列表，如新闻帖子等。一切运行良好，我只需要帮助对齐箭头和分页点。我想要每个箭头中间的项目符号。

[这是它目前的样子](http://www.garyrevell.co.uk/screenshot_01.jpg)

实时 WIP 链接 -> [http://www.garyrevell.co.uk/mrtest/index.html](http://www.garyrevell.co.uk/mrtest/index.html)

* * *

这是我的 HTML + CSS

```
 <!--START DEALS-->

 <div class="box-deals">

 <h1> Latest Deals </h1>
<hr>

    <article>

    <div id="slider1">
                                            <div class="viewport">
                        <ul class="overview">

                            <li>

                            <div class="dealimg"><img src="images/blank-logo.jpg" width="70" height="70" alt="feature-img"></div>

                            <div class="dealtitle">Deal Title Here</div>

                            <div class="deal-des">Mon - Thur, Sat only specific text here</div>

                            <p> <a href="#">Login</a> or <a href="#">signup</a> to get this deal </p>

</li>

<li>

                            <div class="dealimg"><img src="images/blank-logo.jpg" width="70" height="70" alt="feature-img"></div>

                            <div class="dealtitle">Deal Title Here</div>

                            <div class="deal-des">Mon - Thur, Sat only specific text here</div>

                            <p> <a href="#">Login</a> or <a href="#">signup</a> to get this deal </p>

</li>

                        </ul>
                    </div>

                    <a class="buttons prev" href="#">left</a>

                    <a class="buttons next" href="#">right</a>

                    <ul class="pager">
                        <li><a rel="0" href="#" class="pagenum active">1</a></li>
                        <li><a rel="1" href="#" class="pagenum">2</a></li>

                    </ul>

                </div>  

    </article>

</div><!--END DEALS--> 
```

这是我的 CSS

```
/* Slider-Bullets*/

#slider1 .pager { overflow:hidden; list-style: none; clear: both; margin: 0 0 0 45px; }

/*Normal Style*/

#slider1 .pager li { float: left;  display: block; 

}

#slider1 .pager a { width: 15px;
height: 15px;
background:url(../images/bullet-norm.png); background-position: left top; background-repeat:no-repeat;
float: left;
text-indent: -4000px;
position: relative;
margin-left: 3px;
color: transparent;
display:inline;
clear: left;

}

#slider1 .pager a:hover{
    background-position: 0 50%;
    width:15px;
    height:15px;
    float: left; 
    text-indent: -4000px; 
    position:relative;
    margin-left:3px;

    color:transparent;
}

/*Active Style*/

#slider1 .pager .active { color: #fff; background-image:url(../images/bullet-selected.png); } /*CURRENT IMAGE HERE*/
#slider1 .overview { list-style: none; position: absolute; width: 240px; left: 0 top: 0; }
#slider1 .overview li{ float: left; margin: 0 20px 0 0;  width: 236px;

}

/* Tiny Carousel */
#slider1 { height: 1%; overflow:hidden; padding: 0 0 10px;   }

#slider1 .viewport { float: left; width: 240px; min-height: 190px; overflow: hidden; position: relative; }

#slider1 .buttons { background:url("../images/buttons.png") no-repeat scroll 0 0 transparent; display: block; margin: 30px 10px 0 0; background-position: 0 -38px; text-indent: -999em; float: left; width: 39px; height: 37px; overflow: hidden; position: relative; }

#slider1 .previous { background-position: 0 0; margin-left:5px;  }
#slider1 .next { background-position: 0 0; left: 130px }
#slider1 .disable { visibility: hidden; }

#slider1 .overview { list-style: none; position: absolute; padding: 0; margin: 0; width: 240px; left: 0 top: 0; }
#slider1 .overview li{ float: left; margin: 0 20px 0 0; padding: 1px; height: 121px;  width: 230px;} 
```

先感谢您。

加里

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T11:47:13.537

在您`style.css`需要更改以下内容：

*   在第**562**行，即`#slider1 .buttons`给出负数`top-margin`，如下所示：

    `margin: -10px 10px 0 0`

*   在第**616**行，即`#slider1 .pager`删除`clear:both`

然后您的滑块将正常运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T11:57:03.753

```
<div id="test">
    <a class="buttons prev" href="#">left</a> 
    <ul class="pager">
        <li><a rel="0" href="#" class="pagenum active">1</a></li> 
        <li><a rel="1" href="#" class="pagenum">2</a></li> 
    </ul>
    <a class="buttons next" href="#">right</a> 
</div> 
```

# c - 将 C 结构复制到字符数组

> ID：11738689
> 
> 赞同：0
> 
> 时间：2012-07-31T11:04:06.927
> 
> 标签：c

我在尝试将数据从结构复制到字符数组时遇到一个奇怪的问题，然后通过套接字发送到服务器。以下是我的代码供您参考

```
#include <stdio.h>
#define MAX_MSG_SIZE 1024
#pragma pack(1)
struct msgheader{
unsigned int messageLength;
unsigned int messageType;
};
struct floating_field{
unsigned char tag;
unsigned char length;
};
struct open_req{
    struct msgheader mhdr;
unsigned int invokeid;
unsigned int version;
unsigned int timeout;
unsigned int peripheralid;
unsigned int servicesrequested;
unsigned int callmsgmask;
unsigned int agentstatemask;
unsigned int configmsgmask;
unsigned int reserved_1;
unsigned int reserved_2;
unsigned int reserved_3;
};
char uccebuf[MAX_MSG_SIZE];
unsigned int invokeid = 1;
char clientid[256];
char clientpassword[256];
int main(int argc, char *argv[]);
void func1();
int main(int argc, char *argv[]){
func1();
exit(0);
}
void func1(){
int retval, error, bytes;
struct open_req *request;
struct floating_field *ff;
char *p = uccebuf;
unsigned int total_bytes, result;
int templen,cnt;
cnt = 0;
//socklen_t len;
error = 0;
//request = (struct open_req *)malloc(sizeof(struct open_req));
//ff = (struct ffloating_field *)malloc(sizeof(struct floating_field));
strcpy(clientid,"admin");
strcpy(clientpassword,"12345");
request = (struct open_req *)uccebuf;
total_bytes = 0;
request->mhdr.messageType = 3;
//memcpy(&uccebuf[cnt], &request->mhdr.messageType, sizeof(request->mhdr.messageType));
request->invokeid = invokeid++;
request->version = 13;
request->timeout = 0xFFFFFFFF;
request->peripheralid = 0xFFFFFFFF;
request->servicesrequested = 0x00000010;
request->callmsgmask = 0x00000001 | 0x00000002 | 0x00000004 | 0x00000020 | 0x00000200 | 0x00000100 | 0x00040000 | 0x00000400 | 0x00010000;
request->agentstatemask = 0x00000000;
request->configmsgmask = 0x00000000;
request->reserved_1 = 0x00000000;
request->reserved_2 = 0x00000000;
request->reserved_3 = 0x00000000;
//memcpy(uccebuf,&request,sizeof(struct open_req));
printf("request->peripheralid: %u\n", request->peripheralid);
printf("request->callmsgmask: %u\n", request->callmsgmask);
p = p + sizeof(struct open_req);
total_bytes += sizeof(struct open_req);
ff=(struct floating_field *)p;
ff->tag = 1;
templen = strlen(clientid);
ff->length = templen;
//memset(uccebuf,&ff,sizeof(struct floating_field));
total_bytes +=sizeof(struct floating_field);
p = p + sizeof(struct floating_field);
strcpy(p, clientid);
total_bytes += ff->length;
p = p + ff->length;
ff=(struct floating_field *)p;
ff->tag = 2;
templen = strlen(clientpassword);
ff->length = templen;
total_bytes +=sizeof(struct floating_field);
p = p + sizeof(struct floating_field);
strcpy(p, clientpassword);
total_bytes += strlen(clientpassword);
//memset(uccebuf,&ff,sizeof(struct floating_field));
request->mhdr.messageLength = (total_bytes - sizeof(struct msgheader));
printf("\nMessage to be send is: %s", uccebuf); 
```

}

当我尝试打印字符数组的内容时，它没有显示任何内容。你能告诉我哪里出错了吗？非常感谢任何帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T11:10:21.253

如果要转储数组的内容，则需要告诉`printf`要写入多少个字符，否则它将在第一个零字节处停止：

```
printf("\nMessage to be send is: %.*s", (int) sizeof(open_req), uccebuf); 
```

这将包含不可打印的字符，所以我建议使用十六进制转储：[how to get hexdump of a structure data](https://stackoverflow.com/questions/7775991/how-to-get-hexdump-of-a-structure-data?rq=1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T11:06:41.380

`printf()`（以及所有其他对字符串进行操作的函数`char`，假设字符串在遇到零字节时终止。实际上，结构的第一个字节是 0，因此打印缓冲区不会打印任何内容。此外，除了零，大多数其他字符也是不可打印的控制字符，不会出现在屏幕上。

如果您想在屏幕上渲染缓冲区以便检查它，您可能应该遍历字符并将每个字符打印为十六进制字节。

小心这种方法；确保您用来操作`char`数组的其他函数都不会被零意外终止。

# wix - 如果按下按钮，如何设置将安装的功能列表？

> ID：11738695
> 
> 赞同：3
> 
> 时间：2012-07-31T11:04:27.387
> 
> 标签：wix

我正在使用`WixUI_Mondo`集合。我修改了“CompleteButton”按钮`SetupTypeDlg`：

```
<Control Id="ServerButton" Type="PushButton" X="40" Y="120" Width="80" Height="17" ToolTip="!(loc.SetupTypeDlgServerButtonTooltip)" Text="!(loc.SetupTypeDlgServerButton)">
   <Publish Property="WixUI_InstallMode" Value="InstallServer">1</Publish>                  
   <Publish Property="SERVICE" Value="[SERVSTR]">1</Publish>
   <Publish Property="ADDLOCAL" Value="Feature1,Feature2,Feature3">1</Publish>
</Control>

<Property Id="ADDLOCAL" Secure="yes"></Property> 
```

当我推送`ServerButton`日志时说：

```
(CLIENT)     MSI (c) (1C:88) [15:28:49:154]: PROPERTY CHANGE: Adding ADDLOCAL property. Its value is 'Feature1,Feature2,Feature3'. 
(UNKNOWN)     Действие 15:28:49: ServStrDlg. Dialog created 
(UNKNOWN)     Действие 15:28:53: ShortsDlg. Dialog created 
(UNKNOWN)     Действие 15:28:55: VerifyReadyDlg. Dialog created 
(CLIENT)     MSI (c) (1C:88) [15:28:55:966]: Note: 1: 2727 2: 
(UNKNOWN)     Действие закончено 15:28:56: WelcomeDlg. Код возврата 1\. 
(CLIENT)     MSI (c) (1C:DC) [15:28:56:076]: Doing action: ProgressDlg 
(UNKNOWN)     Действие 15:28:56: ProgressDlg. 
(UNKNOWN)     Начало действия 15:28:56: ProgressDlg. 
(UNKNOWN)     Действие 15:28:56: ProgressDlg. Dialog created 
(UNKNOWN)     Действие закончено 15:28:56: ProgressDlg. Код возврата 1\. 
(CLIENT)     MSI (c) (1C:DC) [15:28:56:091]: Doing action: ExecuteAction 
(UNKNOWN)     Действие 15:28:56: ExecuteAction. 
(UNKNOWN)     Начало действия 15:28:56: ExecuteAction. 
(CLIENT)     MSI (c) (1C:DC) [15:28:56:091]: PROPERTY CHANGE: Adding SECONDSEQUENCE property. Its value is '1'. 
(CLIENT)     MSI (c) (1C:DC) [15:28:56:091]: Grabbed execution mutex. 
(CLIENT)     MSI (c) (1C:DC) [15:28:56:091]: Incrementing counter to disable shutdown. Counter after increment: 0 
(CLIENT)     MSI (c) (1C:DC) [15:28:56:091]: Switching to server: NETFRAMEWORK40CLIENT="#1"INSTALLLOCATION="some dir" TARGETDIR="C:\"
 MANUFACTURERDIR="C:\Program Files\..\" CURRENTDIRECTORY="C:\.." CLIENTUILEVEL="0" CLIENTPROCESSID="6684" USERNAME="User" COMPANYNAME=".."
 SOURCEDIR=".." ACTION="INSTALL" EXECUTEACTION="INSTALL" SECONDSEQUENCE="1" ROOTDRIVE="C:\" INSTALLLEVEL="1" ADDLOCAL=Feature4,Feature5,Feature6 
```

Feature1，Feature2，Feature3的级别超过3。无法弄清楚它为什么会通过`INSTALLLEVEL="1"`。

**升级版：**

我做了下一个更改，结果是一样的。安装程序正在客户端修改 INSTALLLEVEL、ADDLOCAL 属性的值。在服务器端：INSTALLLEVEL=11,ADDLOCAL 由“级别”属性<=11 的特征组成。

```
<Control Id="ServerButton" Type="PushButton" X="40" Y="120" Width="80" Height="17" ToolTip="!(loc.SetupTypeDlgServerButtonTooltip)" Text="!(loc.SetupTypeDlgServerButton)">
   <Publish Property="WixUI_InstallMode" Value="InstallServer">1</Publish> 
   <Publish Event="SetInstallLevel" Value="11">1</Publish>                 
   <Publish Property="SERVICE" Value="[SERVSTR]">1</Publish>
   <Publish Property="ADDLOCAL" Value="Feature1,Feature2,Feature3">1</Publish>
</Control> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-02T05:23:31.093

[这篇文章](http://www.joyofsetup.com/2007/05/30/feature-conditions-and-ui/)我看了很多遍，终于发现：我要发布`Event='AddLocal'`的不是`Property`. **非常感谢 Yan，您抽出宝贵的时间。**这是工作代码：

```
<Control Id="ServerButton" Type="PushButton" X="40" Y="120" Width="80" Height="17" ToolTip="!(loc.SetupTypeDlgServerButtonTooltip)" Text="!(loc.SetupTypeDlgServerButton)">
   <Publish Property="WixUI_InstallMode" Value="InstallServer">1</Publish>                  
   <Publish Property="SERVICE" Value="[SERVSTR]">1</Publish>
   <Publish Event="AddLocal" Value="ALL">1</Publish>
   <Publish Event="Remove" Value="Feature4">1</Publish>
   <Publish Event="Remove" Value="Feature5">1</Publish> 
   <Publish Event="Remove" Value="Feature6">1</Publish>
</Control> 
```

我在下一个对话框的“返回”按钮中添加了一个事件：

```
<Control Id="Back" Type="PushButton" X="192" Y="243" Width="56" Height="17" Text="!(loc.WixUIBack)">
   <Publish Event="SetInstallLevel" Value="3">WixUI_InstallMode="InstallServer"</Publish>
</Control> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-01T06:04:59.607

根据[MSDN 文档](http://msdn.microsoft.com/en-us/library/windows/desktop/aa369536.aspx)，该`INSTALLLEVEL`属性指定的安装级别可以被许多属性覆盖，包括`ADDLOCAL`. 因此，据我了解，即使`INSTALLLEVEL`设置为`1`，它也会被属性覆盖，`ADDLOCAL`Windows Installer 不会考虑它。

如果您遇到与此相关的任何错误或错误行为，请在您的问题中添加更多详细信息。

# ruby - 从 Hashie::Mash Loop Ruby on Rails 获取随机结果和限制输出

> ID：11738697
> 
> 赞同：0
> 
> 时间：2012-07-31T11:04:49.087
> 
> 标签：ruby, json, api, instagram

我正在使用 Instagram API 来获取用户的照片提要。输出看起来像这样：

```
 [#<Hashie::Mash attribution=nil caption=nil comments=#<Hashie::Mash count=0 data=[]> created_time="1330231732" filter="Sutro" id="1403234234201396589_3002382" images=#<Hashie::Mash low_resolution=#<Hashie::Mash height=306 url="http://distilleryimage5.s3.amazonaws.com/8fd08dfsdfsdf111e180d51231380fcd7e_6.jpg" width=306> 
```

我可以愉快地循环并显示所有图像或使用此特定图像：

```
 Instagram.user_recent_media(@client.user.id).each do |test|
    %img{:src=>"#{test.images.low_resolution.url}"} 
```

怎么可能得到一个随机结果并限制只显示一张图像？我试过使用 limit(x) 但这会引发错误。我只想随机显示一张图像，而不是整个流。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T14:54:53.080

```
media = Instagram.user_recent_media(@client.user.id)
puts media.class 
```

给出：

```
Array 
```

知道它是一个数组，然后您可以使用以下`sample`方法轻松获取随机元素：

```
random = media.sample
puts "#{random.images.low_resolution.url}" 
```

请注意，该`sample`方法`choice`在 Ruby 1.8.7 中命名。

# java - 如何在我的空游戏中计算 FPS？

> ID：11738701
> 
> 赞同：2
> 
> 时间：2012-07-31T11:05:06.213
> 
> 标签：java, android, game-engine, frame-rate, game-loop

为了创建游戏循环，我遵循[了这个优秀的教程](http://obviam.net/index.php/the-android-game-loop/)。但我认为下一个关于显示 FPS 的教程有点不确定，所以我尝试单独进行。我对自己的`trackFps()`方法相当有信心；它在计算帧之间的时间差后调用，每次运行时测量预测的 FPS，将这些预测的 FPS 值存储在 中`ArrayList`，然后每经过一秒钟，将这些预测的 FPS 相加并除以添加的值的数量以获得平均 FPS。

当我使用调试器运行它时，它运行良好，但是当我正常运行它时，我得到以下异常：

```
FATAL EXCEPTION: Thread-11
java.lang.IndexOutOfBoundsException: Invalid index 26, size is 6
at java.util.ArrayList.throwIndexOutOfBoundsException(ArrayList.java:257)
at java.util.ArrayList.get(ArrayList.java:311)
at biz.hireholly.engine.GameLoop.trackFps(GameLoop.java:120)
at biz.hireholly.engine.GameLoop.run(GameLoop.java:73) 
```

这很容易解释，并且发生在这条线上`fps += fpsStore.get(fpsTrackCount-1);`。但我看不出`fpsTrackCount`变量怎么会高达 26，它应该只与存储在`ArrayList` `fpsStore`.

有人会浏览我的`GameLoop`课程，特别是`trackFps()`底部的方法吗？我会提供整个事情。它被大量评论，但内容不多，对你们中的一些人来说应该非常熟悉。

`GameLoop`（`trackFps()`底部包含计算FPS的方法）：

```
package biz.hireholly.engine;

import android.graphics.Canvas;
import android.view.SurfaceHolder;
import java.util.ArrayList;

/**
 * The GameLoop is a thread that will ensure updating and drawing is done at set intervals.
 * The thread will sleep when it has updated/rendered quicker than needed to reach the desired fps.
 * The loop is designed to skip drawing if the update/draw cycle is taking to long, up to a MAX_FRAME_SKIPS.
 * The Canvas object is created and managed to some extent in the game loop,
 * this is so that we can prevent multiple objects trying to draw to it simultaneously.
 * Note that the gameloop has a reference to the gameview and vice versa.
 */

public class GameLoop extends Thread {

    private static final String TAG = GameLoop.class.getSimpleName();
    //desired frames per second
    private final static int MAX_FPS = 30;
    //maximum number of drawn frames to be skipped if drawing took too long last cycle
    private final static int MAX_FRAME_SKIPS = 5;
    //ideal time taken to update & draw
    private final static int CYCLE_PERIOD = 1000 / MAX_FPS;

    private SurfaceHolder surfaceHolder;
    //the gameview actually handles inputs and draws to the surface
    private GameView gameview;

    private boolean running;
    private long beginTime = 0; // time when cycle began
    private long timeDifference = 0; // time it took for the cycle to execute
    private int sleepTime = 0; // milliseconds to sleep (<0 if drawing behind schedule) 
    private int framesSkipped = 0; // number of render frames skipped

    private double lastFps = 0; //The last FPS tracked, the number displayed onscreen
    private int fpsTrackCount = 1; // number we'll divide the fpsSTore by to get average
    private ArrayList<Double> fpsStore = new ArrayList<Double>(); //For the previous fps values
    private long lastTimeFpsCalculated = System.currentTimeMillis(); //used in trackFps

    public GameLoop(SurfaceHolder holder, GameView gameview) {
        super();
        this.surfaceHolder = holder;
        this.gameview = gameview;
    }

    public void setRunning(boolean running) {
        this.running = running;     
    }
    @Override
    public void run(){

        Canvas c;

        while (running) {
            c = null;
            //try locking canvas, so only we can edit pixels on surface
            try{
                c = this.surfaceHolder.lockCanvas();
                //sync so nothing else can modify while were using it
                synchronized (surfaceHolder){ 

                    beginTime = System.currentTimeMillis();
                    framesSkipped = 0; //reset frame skips

                    this.gameview.update();
                    this.gameview.draw(c);

                    //calculate how long cycle took
                    timeDifference = System.currentTimeMillis() - beginTime;
                    //good time to trackFps?
                    trackFps();

                    //calculate potential sleep time
                    sleepTime = (int)(CYCLE_PERIOD - timeDifference);

                    //sleep for remaining cycle
                    if (sleepTime >0){
                        try{
                            Thread.sleep(sleepTime); //saves battery! :)
                        } catch (InterruptedException e){}
                    }
                    //if sleepTime negative then we're running behind
                    while (sleepTime < 0 && framesSkipped < MAX_FRAME_SKIPS){
                        //update without rendering to catch up
                        this.gameview.update();
                        //skip as many frame renders as needed to get back into
                        //positive sleepTime and continue as normal
                        sleepTime += CYCLE_PERIOD;
                        framesSkipped++;
                    }

                }

            } finally{
                //finally executes regardless of exception, 
                //so surface is not left in an inconsistent state
                if (c != null){
                    surfaceHolder.unlockCanvasAndPost(c);
                }
            }
        }

    }

    /* Calculates the average fps every second */
    private void trackFps(){
        long currentTime = System.currentTimeMillis();

        if(timeDifference != 0){
            fpsStore.add((double)(1000 / timeDifference));
        }
        //If a second has past since last time average was calculated,
        // it's time to calculate a new average fps to display
        if ((currentTime - 1000) > lastTimeFpsCalculated){
            int fps = 0;
            int toDivideBy = fpsTrackCount;
            while ((fpsStore !=  null) && (fpsTrackCount > 0 )){
                fps += fpsStore.get(fpsTrackCount-1);
                fpsTrackCount--;
            }
            lastFps = fps / toDivideBy;
            lastTimeFpsCalculated = System.currentTimeMillis();
            fpsTrackCount = 1;
            fpsStore.clear();
        }
        else{   
        fpsTrackCount++;
        }
    }
    /* So That it can be drawn in the gameview */
    public String getFps() {
        return String.valueOf(lastFps);
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T11:27:24.170

好的，让我们先来看看...

```
java.lang.IndexOutOfBoundsException: Invalid index 26, size is 6
at java.util.ArrayList.throwIndexOutOfBoundsException(ArrayList.java:257)
at java.util.ArrayList.get(ArrayList.java:311)
at biz.hireholly.engine.GameLoop.trackFps(GameLoop.java:120) 
```

所以在 trackFPS 的某个地方 get() 荒谬地越界了......

```
private void trackFps()
{
    long currentTime = System.currentTimeMillis();

    if(timeDifference != 0)
    {
        fpsStore.add((double)(1000 / timeDifference));
    }
    //If a second has past since last time average was calculated,
    // it's time to calculate a new average fps to display
    if ((currentTime - 1000) > lastTimeFpsCalculated)
    {
        int fps = 0;
        int toDivideBy = fpsTrackCount;
        while ((fpsStore !=  null || !fpsStore.isEmpty()) && (fpsTrackCount > 0 ) && (fpsTrackCount < fpsStore.getCount()))
        {
            //synchronized(this) {
            fps += fpsStore.get(fpsTrackCount-1);
            fpsStore.remove(fpsTrackCount-1);  //otherwise we'll get stuck because of getCount condition
            fpsTrackCount--;
            //}
        }
        lastFps = fps / toDivideBy;
        lastTimeFpsCalculated = System.currentTimeMillis();
        //fpsTrackCount = 1;
        //fpsStore.clear();
        Log.d("trackFPS()", "fpsTrackCount = "+fpsTrackCount+"\tfpsStore.size() = "+fpsStore.size()+"\t"+fpsStore.toString());
    }
    else   
        fpsTrackCount++;
} 
```

试一试。如果它的性能不太好，请尝试取消同步块的注释。

至于您的其他问题，关于 TextDrawable，我查看了您的 GameView ...

这是我在 SurfaceChanged() 中发现的

```
 fps = new TextDrawable();
  fps.setText("HELLO"); 
```

现在，你为什么不把它移到 SurfaceCreated()？也许您收到了很多 surfaceChanged() 回调，但由于您没有 Logcat 调用而没有意识到这一点？:) 这是从我可以看到的唯一实例化 TextDrawable 的地方。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-17T09:39:00.623

您还可以使用 android play 商店中的应用程序来测量 FPS。最近发布的一个非常好的应用程序是 GameBench。它不仅可以捕获 FPS，还可以截取屏幕截图，以便您了解 FPS 下降时发生的情况。它还提供 CPU 使用率，在某些设备中也提供 GPU 使用率。我相信你会发现它很有用。

链接是[这个](https://play.google.com/store/apps/details?id=com.gamebench.metricscollector)

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2012-07-31T11:18:08.453

我认为这段代码应该为你工作

```
cputhrottle=(int) System.currentTimeMillis();
cputhrottle = (int)System.currentTimeMillis() - cputhrottle;cputhrottle=33-cputhrottle; 
```

它每秒 30 帧，对您很有用

# c - mmap 是否与所有进程共享内存？

> ID：11738703
> 
> 赞同：3
> 
> 时间：2012-07-31T11:05:15.400
> 
> 标签：c, linux, operating-system, shared-memory, mmap

当我这样做时：

```
myProgram.h
myProgram.c

    struct PipeShm
    {
    // all my fields
    // more 
    // ...

    };

    struct PipeShm myPipe = { /* initialization for all fields */ };
    struct PipeShm * sharedPipe = &myPipe;

void func()
{
 sharedPipe = mmap (NULL, sizeof * sharedPipe, PROT_READ | PROT_WRITE,MAP_SHARED | MAP_ANONYMOUS, -1, 0);

} 
```

当我`mmap`使用指针`sharedPipe`时，如果我`main()`从代码中的任何方法调用，所有进程是否会共享我与struct`myProgram`共享的确切共享内存？`myPipe`

或者每个被创造出来的新孩子，都会有`myPipe`他自己的新孩子？

问候

**编辑：**

这是在我阅读评论和答案之后：现在进行了更改，并且仅在分配段后才初始化段的值：

```
#include "my_pipe.h"

struct PipeShm * sharedPipe = NULL;

int shm_pipe_init()
{
    if (!sharedPipe)
    {
        int myFd = shm_open ("/myregion", O_CREAT | O_TRUNC | O_RDWR, 0600);

        if (myFd == -1)
            error_out ("shm_open");

        // Allocate some memory in the region - We use ftruncate, write(2) would work just as well
        int retAlloc = ftruncate (myFd, sizeof * sharedPipe);
        if (retAlloc < 0)
            error_out("ftruncate");

        sharedPipe = mmap (NULL, sizeof * sharedPipe,
                PROT_READ | PROT_WRITE,MAP_SHARED | MAP_ANONYMOUS, myFd, 0);

        if (!sem_init (&sharedPipe->semaphore, 1, 0))
        {
            sharedPipe->init = TRUE;
            sharedPipe->flag = FALSE;
            sharedPipe->ptr1 = NULL;
            sharedPipe->ptr2 = NULL;
            sharedPipe->status1 = -10;
            sharedPipe->status2 = -10;
            sharedPipe->semaphoreFlag = FALSE;
            sharedPipe->currentPipeIndex = 0;

        }
        else
            perror ("shm_pipe_init");
    }
    return 1;   // always successful
} 
```

然而，问题仍然存在，共享内存似乎在进程之间没有如此共享，因为在运行和分叉该 main 时：

```
int main()
{
    int spd, pid, rb;
    char buff[4096];

    fork();
    shm_pipe_init();

        // more
        return 0;
} 
```

我仍然得到输出，模拟只有一个进程正在运行的行为（而不是多个输出，我只得到**一个**或**几个**，取决于进程之间的竞争条件）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-31T11:59:23.123

如果你打算多次调用这个程序，答案是“不”。如果您打算在创建映射后分叉，答案是“是”。

匿名映射没有基础文件。因此，创建匿名映射的进程无法指定它想要的现有映射（这也不是预期的用途，您应该获得一个新的、独立的映射）。因此对第一种情况说“不”。

共享映射允许拥有相同映射的所有进程访问相同的物理内存。这意味着，如果您`fork`在创建映射后，`fork`将主要以通常的方式工作，将进程拥有的所有页面标记为写时复制，**除了**映射中的页面。父母和孩子都将保留映射的页面，并且能够通过指针访问相同的物理内存（顺便说一下，这意味着页面甚至也将具有相同的*虚拟*地址 - 这通常不是您可以依赖的映射文件时打开，但在这种情况下，操作系统别无选择，只能确保是这种情况）。

联机帮助页对匿名和共享映射的组合或究竟应该发生什么仍然含糊不清，但 TLPI 第 49.7 章明确提到`MAP_SHARED|MAP_ANONYMOUS`：

> [...] 然后调用 fork()，然后，由于 fork() 生成的子进程继承了映射，两个进程共享内存区域。

因此，对于第二种情况“是”。

**回复：编辑后的**
错误顺序：

```
fork();
shm_pipe_init(); 
```

**这首先**分叉，然后初始化共享内存。这只会*为每个进程*分别创建一个共享的（读作*可*共享的，如果进程再次分叉，它可能在未来被共享，但它不会神奇地与父进程共享！）映射。

 *然后，您有**两个**映射，每个进程中都有一个，它们将由各自的子进程和孙子进程（如果有）共享，但这无助于实现您想要的。它们是“共享”的事实并不重要，它们是不同的映射，并且对于各自的其他进程来说是未知的。

**首先**创建映射，**然后**分叉。这将创建*一个*共享映射，两个进程确实拥有/共享并可以用于预期目的。

（此外，您的使用`fork`并没有完全错误，但有点奇怪......您通常应该检查返回值，所以您知道哪个是父级，哪个是子级。这不像`fork`can'不会失败。当然，如果这根本不重要，因为父母和孩子总是 100% 相同，而且你不关心失败，那很好。通常，人们通常想知道。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T11:08:41.297

每个都有自己的，因为对指针**的** `sharedPipe`更改不会*影响*`myPipe`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-31T11:47:48.263

让我们逐步了解您在这里所做的事情

```
struct PipeShm myPipe = { /* initialization for all fields */ }; 
```

这将`PipeShm`结构分配为全局变量

```
struct PipeShm * sharedPipe = &myPipe; 
```

这将创建一个指向先前创建的结构的指针。

现在您正在修改指向返回`sharedPipe`内容的指针`mmap`（可能是共享内存区域的地址），而不是您之前分配的结构（注意：`myPipe`仍然存在 - 只是没有指向）。

```
sharedPipe = mmap (NULL, sizeof * sharedPipe, PROT_READ | PROT_WRITE,MAP_SHARED | MAP_ANONYMOUS, -1, 0); 
```

据我所知，您也没有尝试访问`sharedPipe`. 所以现在，你基本上有一个全局变量*和*一段共享内存（两者都似乎未使用）。

这就是我不太确定您要做什么的地方。

如果要访问共享内存，则需要在返回`sharedPipe`后取消引用指针`mmap`（如果是，全局变量的意义何在？）。

如果你想访问全局变量，只需访问它`myPipe`（如果是这样，是`mmap`为了什么？）。

如果您想同时访问两者，请结合使用上述方法（如果是，这样做的意义`struct PipeShm * sharedPipe = &myPipe;`何在？）*

# c# - T4 模板另存为 Unicode

> ID：11738709
> 
> 赞同：2
> 
> 时间：2012-07-31T11:05:32.753
> 
> 标签：c#, visual-studio-2010, templates, unicode, t4

我使用 Oleg Sych 所说的 Template - Generator 架构师通过 T4 生成一些代码，但是使用 Unicode 存在一些问题，在生成所有显示为问号的波斯字符后，我有一些波斯字符。

这是我的文件：模板：

```
<#@ assembly name="Microsoft.SqlServer.ConnectionInfo" #>
<#@ assembly name="Microsoft.SqlServer.Smo" #>
<#@ assembly name="Microsoft.SqlServer.Management.Sdk.Sfc" #>
<#@ import namespace="Microsoft.SqlServer.Management.Smo" #>
<#@ import namespace="System.Collections.Generic" #>
<#+
public class DALTable : Template
{

    public override string TransformText()
    {

        //My Template

    } 
```

发电机：

```
<#@ assembly name="Microsoft.SqlServer.ConnectionInfo" #>
<#@ assembly name="Microsoft.SqlServer.Smo" #>
<#@ assembly name="Microsoft.SqlServer.Management.Sdk.Sfc" #>
<#@ include file="DALTable.tt" #>
<#+
public class TableDALGenerator : Generator
{
    public DALTable DALTableTemplate = new DALTable();

    protected override void RunCore()
{
        this.DALTableTemplate.Table = table;
        this.DALTableTemplate.RenderToFile("DAL.cs");
    }
 } 
```

和脚本：

```
<#@ template language="C#v4" hostspecific="True" debug="True" #>
<#@ assembly name="System.Core" #>
<#@ output extension=".cs" encoding="UTF8" #>
<#@ include file="T4Toolbox.tt" #>
<#@ include file="TableDALGenerator.tt" #>
<#
    TableDALGenerator TableDALGen = new TableDALGenerator();
    //Pass Parameters
    TableORMGen.Run();
#> 
```

正如 Oleg Sych 所说，我在输出中设置了 Unicode，正如您在这一行中看到的那样：`<#@ output extension=".cs" encoding="UTF8" #>`我也将这 3 个文件都保存为 Unicode `utf8` ，但问题仍然存在，问题出在哪里？还有什么事情是我必须做的？

**更新**

我发现我的新生成文件（DAL.cs）都没有保存为`UTF8`所有通过`ANSI`编码保存的文件。`UTF8`通过编码保存我的文件需要做什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T13:36:18.600

该`<#@output`指令适用于 T4 文件的直接输出。您需要更改模板，使其输出为 UTF8

```
public class DALTable : Template 
{ 
    public DALTable()
    {
        Output.Encoding = System.Text.Encoding.UTF8;
    } 

    public override string TransformText() 
    ... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-07-12T14:01:20.467

根据 MSDN ( [https://msdn.microsoft.com/en-us/library/gg586943.aspx](https://msdn.microsoft.com/en-us/library/gg586943.aspx) )，要在`output`元素中执行此操作，您需要说`encoding="utf-8"`，因此使用连字符（字母大小写似乎不会使有区别）。

# android - 位图的ArrayList

> ID：11738717
> 
> 赞同：1
> 
> 时间：2012-07-31T11:05:55.543
> 
> 标签：android, android-layout

嗨，我想将`Bitmap`位图列表中的最后一个显示为`ImageView`. 这是我的代码：

```
SubImageView = (ImageView) findViewById(R.id.SubImageView);
ArrayList<Bitmap> bitmapArray = new ArrayList<Bitmap>();
bitmapArray.add(myBitMap); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T11:07:39.373

```
if(bitmapArray.size() > 0)
{
  int index = bitmapArray.size() -1;
  Bitmap lastbitmap = bitmapArray.get(index);

  SubImageView.setImageBitmap(lastbitmap);
} 
```

# android - 使用 FLAG_ACTIVITY_SINGLE_TOP 启动时未设置活动视图

> ID：11738723
> 
> 赞同：0
> 
> 时间：2012-07-31T11:06:14.433
> 
> 标签：android, android-intent, notifications, android-activity

我有一个“主要”活动。在`onCreate()`我调用的方法`setContentView()`中。现在，虽然这个主要活动在顶部，但我收到了一条通知。在通知中，我将“main”设置为单击时调用的意图。在这里，我正在设置`FLAG_ACTIVITY_SINGLE_TOP`标志。

在通知的点击事件中，我可以看到`onNewIntent()`main 被调用，因为`onNewIntent()`我正在启动另一个活动`showData`。我可以看到，在通知的单击事件中，屏幕的方向发生了变化，但我仍在通知下拉菜单中。（主屏幕或屏幕均不`showData`可见）。方向改变是因为`showData`方向景观是固定的。现在，如果我按回，我可以看到`showData`屏幕。

当单击通知时主要活动位于顶部时，会发生此问题。如果在任何其他活动中，`showData`正在正确显示。

非常感谢您的回答和时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T06:42:22.057

我正在`showData`使用这个：`new Intent(main.this, showData.class)`.

我改为`main.this`现在`getApplicationContext()`它工作正常。

# cocoa - NSTextView 逐行滚动

> ID：11738725
> 
> 赞同：7
> 
> 时间：2012-07-31T11:06:21.267
> 
> 标签：cocoa, scroll, nstextview

当使用“向上”和“向下”键在文本视图中逐行移动时，它会表现出这种滚动行为 - 当光标位于最顶部并且我点击“向上”（反之亦然）时，它会将文档滚动一半向上翻页，即当前行现在位于 textview 的中间。

是否可以禁用此行为？是否可以让它滚动一行？以便当前行始终保持在顶部（或底部）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T15:16:39.753

我知道我来晚了一点，但由于这个问题没有得到正确的回答，我会试一试。我对 NSTextViews 有同样的问题。当使用 -scrollRangeToVisible 将插入位置带到视图的可见矩形时，它具有滚动习惯，将插入符号放在屏幕的（垂直）中间。我所做的是使用 [NSView scrollRectToVisible] 代替，因为它滚动将矩形带到视图的可见矩形所需的**最小距离：**

```
NSRange caretRng = NSMakeRange(caretLocation, 0);
NSLayoutManager* lm = [view layoutManager];
NSRange glyphRange = [lm glyphRangeForCharacterRange:caretRng actualCharacterRange:nil];
NSRect glyphRect = [lm boundingRectForGlyphRange:glyphRange inTextContainer:[view textContainer]];
[view scrollRectToVisible:glyphRect]; 
```

希望能帮助到你！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T14:26:30.613

NSTextView（通过 NSText）有一个名为[-scrollRangeToVisible:](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSText_Class/Reference/Reference.html#//apple_ref/occ/instm/NSText/scrollRangeToVisible%3a)的方法。考虑继承 NSTextView 并覆盖 -scrollRangeToVisible 以直接指定您自己的滚动行为。

如果您需要更具体的帮助来获得正确的行为，请发布一个单独的问题，具体说明您想要的行为以及您尝试获得它的代码。

# javascript - HTML5 输入类型=数字更改步骤行为

> ID：11738726
> 
> 赞同：38
> 
> 时间：2012-07-31T11:06:23.647
> 
> 标签：javascript, jquery, html, input-field

如果我使用类型=“数字”的输入字段，步数=“100”。我不希望奇数无效。我只想增加或减少值为 1000。

```
<input type="number" min="100" max="999999" step="100" /> 
```

如果用户输入值“199”并提交，他/她会收到错误，因为该值不能被 100 整除。但我想要的 step-value 只是控制微调器的行为，例如，如果用户单击向上我希望值 199 变为 200，如果他/她单击向下，我希望它变为 100。或者理想情况下，我希望值以 100 增加或减少。

我该怎么做呢？我尝试使用无效事件（使用 jQuery 1.7.2），如下所示：

```
$( "[type='number']" ).bind( 'invalid', function( e ) {
    var el = $( this ),
      val = el.val( ),
      min = el.attr( 'min' ),
      max = el.attr( 'max' );

    if ( val >= min && val <= max ) {
        return false;
    }
} ); 
```

但这会导致表单未提交。

PS.：这是在 Fedora 16 上的 Google Chrome 20.0.1132.57 中。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2018-07-29T13:13:32.813

好吧，首先感谢您提出这个非常有趣的问题。通过搜索您的问题的解决方案，我学到了很多关于 HTML5 验证的知识。

我的研究使我发现 HTML5 表单验证 API 有一[组有趣的属性](https://developer.mozilla.org/en-US/docs/Learn/HTML/Forms/Form_validation)，这些属性是只读的，但对于做你想做的事情非常有用。

我解决您的问题的方法是首先将`novalidate`属性添加到表单元素，以便我可以控制何时触发验证，然后读取`validity`附加到输入的对象，这样我就可以确切地知道存在哪些验证错误，如果唯一的错误是`stepMismatch`（这是触发数字无效的原因，例如 199），我可以绕过所有验证过程。[否则，我可以使用reportValidity()](https://developer.mozilla.org/en-US/docs/Web/API/HTMLFormElement/reportValidity)方法显示正常的 HTML 验证行为。

这是我想出的代码，希望能满足您的要求：

```
var form = document.querySelector("form")       // Get the form
var input = document.querySelector("#myInput")  // Get the input to validate

form.addEventListener("submit", function(e) {
	e.preventDefault()  // Catch the submit
  // Do the magic
  if(onlyStepMatters(input.validity)){
  	form.submit()
  }else {
  	form.reportValidity()
  }
})

function onlyStepMatters(validityState) {
  return !(
    validityState.badInput || validityState.customError || validityState. patternMismatch || validityState.rangeOverflow || validityState.rangeUnderflow || validityState.tooLong || validityState.tooShort || validityState.typeMismatch || validityState.valueMissing
    )

  /* This is what the object looks like, notice I just skipped the stepMismatch */
  /*
  {
    badInput,
    customError,
    patternMismatch,
    rangeOverflow,
    rangeUnderflow,
    stepMismatch,
    tooLong,
    tooShort,
    typeMismatch,
    valid,
    valueMissing,
  }
  */
}
```

```
<form novalidate>
<input type="number" id="myInput" min="0" max="1000" step = "100" placeholder="Enter a number" required/>
<button type="submit">Send</button> 
</form>
```

我很确定这段代码可以基于相同的逻辑进行重构并变得更简洁，但我没有足够的时间去思考更多。

任何建设性的意见将不胜感激。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-31T13:45:56.407

我不认为你可以，`step`并且验证是[紧密联系在一起](http://www.whatwg.org/specs/web-apps/current-work/multipage/association-of-controls-and-forms.html#suffering-from-a-step-mismatch)的。将来您可能能够覆盖[`stepUp()`and`stepDown()`函数](http://www.whatwg.org/specs/web-apps/current-work/multipage/common-input-element-attributes.html#dom-input-stepdown)来获得您描述的行为，但我还没有研究这是否是这些东西的预期用例。我建议在[WHATWG 邮件列表](http://lists.whatwg.org/listinfo.cgi/whatwg-whatwg.org)上发帖，专门询问这些功能并描述您的用例。

对于当前的实际目的，您是否尝试过设置`step=1`并绑定到`click`要捕获的事件？我可以看到区分“向上”和“向下”点击可能会有问题，但这可能是可以克服的。但是，使用`text`输入、`pattern`适当地设置属性并实现自己的微调器可能会更容易。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-31T15:01:40.943

仅使用步骤，但您可以使用范围并向滑块添加标记，然后使用 javascript 检查附近的值并设置它

喜欢

```
function updateTextInput(val) {
  if      (val > 36)  val = 50;
  else if (val > 26)  val = 36;
  else if (val > 20)  val = 26;
  else if (val > 15)  val = 20;
  else if (val >  1)  val = 15;
  document.getElementById('textInput').value = val;
}
```

```
<input type='range' min='0' max='50' step='1' name='slide' list="settings" onchange="updateTextInput(this.value);">
<datalist id="settings">
    <option>15</option>
    <option>20</option>
    <option>26</option>
    <option>36</option>
    <option>50</option>
</datalist>
<input type="text" id="textInput" />
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-07-25T14:27:54.517

我一直在玩你的代码，试图实现这一点：

> 理想情况下，我希望值增加或减少 100

……最后得到了一些脚本：

*   通过键盘或鼠标检测步进增加或减少，
*   使用`remainder`变量来存储计算结果：`value % 100`,
*   修改`step`参数和`value`,`input`
*   `remainder`当键盘或鼠标事件结束时重新添加变量，并将`step`参数重置回`1`（需要能够提交）。

在这个工作片段中，尝试使用箭头（在键盘或鼠标上）修改输入值，从一个不能被 100 整除的数字开始：

```
var remainder = false;
var stepbefore;

$("[type='number']").bind('keydown mousedown', function() {
  // If keyboard Up or Down arrow keys or mouse left button on the arrows
  if (event.keyCode == 38 || event.keyCode == 40 || event.button === 0) {
    // If there is already a change running, exit the function
    if (remainder !== false) return;

    var myStep = this.getAttribute("stepcustom"); // Get my "stepcustom" attribute
    remainder = this.value % myStep;
    this.value = Math.floor(this.value / myStep) * myStep;
    stepbefore = this.step;
    this.step = myStep;
  }
});

$("[type='number']").bind('keyup mouseup', function() {
  if (remainder !== false) {
    this.value = +(this.value) + remainder;
    this.step = stepbefore;
    remainder = false;
  }
});
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<form>
  <input type="number" min="100" max="999999" step="1" stepcustom="100" />
  <input type="submit" />
</form>
```

希望能帮助到你。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-07-31T05:49:28.883

尝试使用 change() 函数...

```
<form>
    <input type="number" id="number" min="100" max="999999" step="100" />
</form>

$(document).ready(function(){
    $("#number").change(function(a){
        if ($(this).val() % 100 === 0) {
            /* Do something when the number is even */ 
            console.log("EVEN");
        } else {
            /* Or when it's odd (isn't dividable by 100), do ... whatever */ 
            console.log("ODD");
        }
    })
}); 
```

我正在使用引导程序对其进行测试，就像您想要的示例一样，当用户单击时，值将变为 200（从 199），当用户单击时，值将变为 100

改变可分：

```
if ($(this).val() % 100 === 0) { //Change 100 with what ever you want 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-07-30T12:36:03.607

在“更改”事件中**舍入到最接近的有效值**。

```
$( "[type='number']" ).change(function () {
   var value = $(this).val());
   var newValue = Math.round(value/100)*100
   if (newValue < 100) {
      newValue = 100;
   }
   if (newValue > 999999) {
      newValue = 999999;
   }
   if (newValue === value ) {
      return;
   }
   $(this).val(newValue)
}) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-07-29T22:45:37.997

这是实现您所要求的所需的代码，我试图避免重新计算和更改标准行为，因此这对于设置的任何其他约束（必需、模式、范围......）应该是透明的。

我只在 Firefox 和 Chrome 上进行了测试，但我相信它应该可以在任何最近的浏览器上运行。

```
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Disable validity constrains</title>
<!-- avoid highlight due to constrains -->
<style>#qty { box-shadow: unset; }</style>
</head>
<body>
<form>
        <input id="qty" name="num" type="number" min="100" max="1000" step="100">
        <input type="submit">
</form>
<script>
(function() {
        var el = document.getElementById('qty');
        el && el.addEventListener('invalid', function(event) {
                if ('validity' in el) {
                        for (var state in el.validity) {
                                if (state == 'stepMismatch') { continue; }
                                if (el.validity[state]) { return true; }
                        }
                        event.preventDefault();
                        el.form.submit();
                }
        }, true);
})();
</script>
</body>
</html> 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-07-31T08:01:58.807

This is a simple javascript function that could help you out
where prev_num is global variable
this will work for **increment** and **decrement** both

```
var perv_num=0;
function ax(z)
{

     let def;
     let mul=10;
     let valu;
     let valucopy=parseInt(z.value);
     let  frst;
     valucopy=((valucopy+100)%100);

         if (parseInt( z.value)<100) 
         {
                  document.getElementById("myNumber").value="";
                  document.getElementById("myNumber").value=100;
         }
         else if(parseInt( z.value)<perv_num)
        {
                  def=parseInt( z.value.length);
                  mul=Math.pow(mul,def-1);
                  frst=(parseInt(z.value[0])*mul);
                  document.getElementById("myNumber").value="";
                  document.getElementById("myNumber").value=frst;
         }
         else if(valucopy  ==0)
         {
                  document.getElementById("myNumber").value="";
                 document.getElementById("myNumber").value=parseInt(z.value)+100;
          }
          else{
                  def=parseInt( z.value.length);
                  mul=Math.pow(mul,def-1);
                  frst=(parseInt(z.value[0])*mul);
                  valu=Math.abs( parseInt(z.value)-frst);
                  valu=100-valu;
                  var number=(parseInt(z.value)+valu);
                  document.getElementById("myNumber").value="";
                  document.getElementById("myNumber").value= number;
              }
              perv_num=parseInt( z.value);
} 
```

and html is like

```
 <input type="number" id="myNumber" onchange="ax(this)"> 
```

fiddle is [https://jsfiddle.net/ecpy5gr0/1](https://jsfiddle.net/ecpy5gr0/1)

# entity-framework - 实体框架将实体映射到自身

> ID：11738728
> 
> 赞同：0
> 
> 时间：2012-07-31T11:06:29.567
> 
> 标签：entity-framework

我有一个需要包含自身相关实体的实体：

```
public class Period
{
public int ID {get; set;}
public DateTime StartDate {get; set;}
public DateTime EndDate {get; set;}  
public Period PriorPeriod {get; set;}  

} 
```

如何仅使用 POCO 来实现这一点，或者这是否需要 Fluent API 映射？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T21:04:12.207

```
public class Period
{
    public int ID { get; set; }
    public int? PriorPeriodID { get; set; }
    public DateTime StartDate { get; set; }
    public DateTime EndDate { get; set; }

    [ForeignKey("PriorPeriodID")]
    public Period PriorPeriod { get; set; }
} 
```

# magento - 使用 PHP 将产品与 magento 中的可配置产品连接起来

> ID：11738729
> 
> 赞同：0
> 
> 时间：2012-07-31T11:06:30.843
> 
> 标签：magento, import

我目前正在为 magento 产品编写导入。数据是在一个巨大的 XML 文件中传递的——所以我不能使用 CSV 导入，这似乎是直接用 magento 传递的。

可以导入简单的产品 - 但有两种产品我有一些问题：

1.  产品的不同语言（语言绑定到商店视图）
2.  已连接产品的可配置产品

我完全不知道如何解决这些问题。我希望你能给我一个线索！我已经用产品创建了模型并保存了它们——这很有效。但我不知道如何添加语言版本和可配置产品。

目前我有这个：

```
$newProduct = Mage::getModel('catalog/product');
$newProduct->setData('attribute_set_id', self::APP_ATTRUBITE_SET_ID);
$newProduct->setData('tax_class_id', self::APP_TAX_CLASS_ID);
$newProduct->setData('website_ids', array_keys(Mage::app()->getWebsites()));
$newProduct->setData('status', Mage_Catalog_Model_Product_Status::STATUS_ENABLED);
$newProduct->setData('type_id', Mage_Catalog_Model_Product_Type::TYPE_CONFIGURABLE);
$newProduct->save();

$relatedProduct = clone $newProduct;
$relatedProduct->setData('type_id', Mage_Catalog_Model_Product_Type::TYPE_SIMPLE);
$relatedProduct->setData('sku', $relatedProduct->getData('sku') . '-ABC');
$relatedProduct->save(); 
```

但这并没有将产品相互联系起来。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T09:57:57.670

我在网上找到了一个教程，有点混乱，但包含导入可配置产品的解决方案。

[http://www.danneh.org/2012/05/creating-products-programmatically-magento/](http://www.danneh.org/2012/05/creating-products-programmatically-magento/)

# eclipse - 在 Eclipse Juno 中运行 Groovy 时出现异常 java.lang.IncompatibleClassChangeError

> ID：11738732
> 
> 赞同：16
> 
> 时间：2012-07-31T11:06:46.327
> 
> 标签：eclipse, groovy, eclipse-juno

我最近下载了 Eclipse Juno 并安装了最新的 Groovy 插件。

现在这是我的 Groovy 文件的样子。

```
package groovy_support

class TimePass {
static void main(def args){
    println "Hello World"
}
} 
```

当我从我以前的 Eclipse 版本（靛蓝）或命令行运行它时，它运行。但是，在 Eclipse Juno 上，它在 Eclipse 控制台上抱怨以下异常。

```
Caught: java.lang.IncompatibleClassChangeError: Found class org.objectweb.asm.ClassVisitor, but interface was expected
java.lang.IncompatibleClassChangeError: Found class org.objectweb.asm.ClassVisitor, but interface was expected 
```

请注意，“Groovy 库”已经在类路径中。

现在我在这里做错了什么？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-31T12:33:09.030

你在最新的 groovy/dependent jars 上吗？.

发生这种`java.lang.IncompatibleClassChangeError`情况是由于向后兼容问题。客户端代码需要重新编译才能解决。

您看到的具体错误是因为`org.objectweb.asm.ClassVisitor`是asm 3.2中的[接口](http://asm.ow2.org/asm32/javadoc/user/org/objectweb/asm/ClassVisitor.html)和asm 4.0 及更高版本中的[类。](http://asm.ow2.org/asm40/javadoc/user/org/objectweb/asm/ClassVisitor.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T09:24:37.537

我在一个模块中使用 Spring 和 Groovy 时遇到了同样的问题。Spring 在 3.1.2 中仍然使用旧的 ASM，Groovy 使用带有类的那个。虽然可以调整一些排除项，但我敢打赌这并不总是一种选择。

在阅读[了这个帖子](http://groovy.329449.n5.nabble.com/Groovy-Spring-and-ASM-td5447603.html)之后，我决定使用 groovy-all.jar 而不是所有 Groovy 所需库的列表。如果这对您来说是一个选择，那么如何避免任何进一步的问题可能是一种简单的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-09-27T09:44:18.570

对于以下错误，我尝试了许多解决方案。java.lang.IncompatibleClassChangeError：找到接口 org.objectweb.asm.MethodVisitor，但需要类。只有一个有效的方法是从放心的依赖中排除 groovy 工件。有关完整的解决方法，请参阅以下链接。

[https://blog.jayway.com/2013/04/12/solving-asm-conflicts-after-upgrading-to-groovy-2-1/](https://blog.jayway.com/2013/04/12/solving-asm-conflicts-after-upgrading-to-groovy-2-1/)

# ruby-on-rails - 从系统命令进行 Ruby on rails 字符串搜索

> ID：11738740
> 
> 赞同：0
> 
> 时间：2012-07-31T11:07:11.463
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

您好，我正在尝试使用 system( `kill -9 @pid`)通过 pid 杀死进程，在 ruby`@pid`​​ 中`@pid = %x[pidof program firefox]`有什么方法可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T11:14:20.437

还没有真正尝试过，但如果有帮助，您可以看看它：

[RAA - 系统可处理](http://raa.ruby-lang.org/project/sys-proctable/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T11:42:54.370

它应该工作。尝试

```
command = "kill -9 #{@pid}"
system(command) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T11:50:52.747

反引号：

```
`kill -9 #{@pid}` 
```

纯红宝石：

[http://www.ruby-doc.org/core-1.9.3/Process.html#method-c-kill](http://www.ruby-doc.org/core-1.9.3/Process.html#method-c-kill)

# dynamics-crm-2011 - CRM 2011 插件 - 在未更新时获取字段值

> ID：11738747
> 
> 赞同：3
> 
> 时间：2012-07-31T11:07:34.297
> 
> 标签：dynamics-crm-2011

在我的插件中，我希望能够获得一个字段值，但现在我只能在表单上更新它的情况下才能获得它。目前我正在使用一个`entity.contains()`函数，然后是一个检索，但是如果字段没有更改，这不适用于仅在表单中获取值。

有谁知道我该怎么做？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-31T12:12:26.117

你需要原图。原像包含更新前的实体。[您可以使用插件注册工具注册](http://technet.microsoft.com/en-us/library/hh237515)新图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-18T13:49:31.823

虽然消息是更新。crm 记录中的所有字段值都应该为假，接受您正在更新的内容。为此，您必须使用 Pre 或 Post Images，它将直接从 sql 数据库事务中获取数据。

# android - 线程未在android中创建

> ID：11738749
> 
> 赞同：0
> 
> 时间：2012-07-31T11:07:39.040
> 
> 标签：android, android-intent

我在我的 onCreate 方法中创建线程。我通过线程上的 udp 接收数据。由于某种原因，它不起作用。

```
private void UdpThread() {
//   server will listen to one client
    try
    {
        Thread udpServerThread = new Thread()
        {
            @Override
            public void run()
            {       
                Log.i("rrr","receivePacket3");
                try
                {
                    while(true)
                    {
                        sleep(1000);
                    Log.i("rrr","receivePacket2");
                    String[] recieved = null;

                    DatagramSocket clientSocket = null;
                    InetAddress IPAddress = null;
                    try {

                        IPAddress = InetAddress.getByName("localhost");
                    } catch (UnknownHostException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }
                    byte[] receiveData = new byte[1500];
                    DatagramPacket receivePacket = new DatagramPacket(receiveData, receiveData.length);
                    try {
                        clientSocket = new DatagramSocket(8086);
                        Log.i("rrr","receivePacket");
                        clientSocket.receive(receivePacket);

                        Log.i("rrr","receivePacket1");
                    } catch (IOException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }
                    modifiedSentence = new String(receivePacket.getData());
                    System.out.println("in client receive:" + modifiedSentence);

                    Log.i("Received data",modifiedSentence);
                    clientSocket.close();

                    modifiedSentence =  modifiedSentence.trim();
                    Log.i("Received data",modifiedSentence);
                    }
                } catch (Exception e){
                    Log.e("UDP", "S: Error", e);
                }
            }
        };
        udpServerThread.start();
        //udpServerThread.setPriority(Thread.MAX_PRIORITY);

        Toast.makeText(this,modifiedSentence,Toast.LENGTH_LONG).show();

    }catch (Exception e) {
        // TODO: handle exception
        Log.e("eeeee",""+e);
        e.printStackTrace();
    }
} 
```

当控制没有立即从线程返回时我应该怎么做。等到没有收到数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T11:18:14.163

要从第二个线程处理主线程，我们必须在 android 中使用处理程序...例如。

```
@Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        new Thread(new Runnable() {
           public void run() {
            try{
                Message myMessage = new Message();
                myMessage.obj = "SEND ANY DATA";
            }
            catch (JSONException e) {
            e.printStackTrace();
            }

            }).start(); 
```

在处理程序中......

```
 private Handler finishHandler1 = new Handler() {
        @Override 
        public void handleMessage(Message msg) {
            // do the UI things..

        }
    }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T12:35:54.673

您必须创建并初始化一个 Handler 对象并在 MAIN 或 UI 线程中执行此操作。之后，您将能够从工作线程向处理程序发布消息和 Runnables。

或者，您可以使用

```
Activity.runOnUiThread(Runnable)
View.post(Runnable)
View.postDelayed(Runnable, long) 
```

您可能对 Android[多线程指南](http://developer.android.com/guide/components/processes-and-threads.html)也很有用。

# mysql - 在 MacOs Lion 上安装 Perl DBD-mysql-4.021 是否需要 MySQL 标头？

> ID：11738757
> 
> 赞同：1
> 
> 时间：2012-07-31T11:08:01.310
> 
> 标签：mysql, macos, perl, dbd

我尝试在 MacOS Lion 上安装 DBD-mysql-4.021，但是当我这样做时，它似乎遗漏了一些头文件。

```
MacBook-Pro-de-benoit:DBD-mysql-4.021-XXi0wV vanalder$ sudo make 
llvm-gcc-4.2 -c -I/Library/Perl/5.12/darwin-thread-multi-2level/auto/DBI -I/Applications/MAMP/Library/include -fno-omit-frame-pointer  -g -DDBD_MYSQL_INSERT_ID_IS_GOOD -g  -arch x86_64 -arch i386 -g -pipe -fno-common -DPERL_DARWIN -fno-strict-aliasing -fstack-protector -I/usr/local/include -Os   -DVERSION=\"4.021\" -DXS_VERSION=\"4.021\"  "-I/System/Library/Perl/5.12/darwin-thread-multi-2level/CORE"   dbdimp.c In file included from dbdimp.c:20: 
dbdimp.h:24:49: error: mysql.h: No such file or directory 
dbdimp.h:25:45: error: mysqld_error.h: No such file or directory 
dbdimp.h:27:49: error: errmsg.h: No such file or directory In file included from dbdimp.c:20: dbdimp.h:159: error: expected specifier-qualifier-list before ‘MYSQL’ dbdimp.h:257: error: expected specifier-qualifier-list before ‘MYSQL_RES’ In file included from dbdimp.c:20:
.... 
```

[我尝试从这里](http://www.opensource.apple.com/)安装 MySQL 的二进制文件。我可以安装，但它不起作用。或者用 macports 安装（mysql5-devel -> 无法安装），要如何使用 MySQL 和 Perl？

* * *

我从这个链接 [http://www.mysql.com/downloads/mysql/][1]http://www.mysql.com/downloads/mysql/ 再次从 DMG 安装了 mysql，但我仍然有同样的错误当我做

```
sudo make

dbdimp.h:24:49: error: mysql.h: No such file or directory
dbdimp.h:25:45: error: mysqld_error.h: No such file or directory
dbdimp.h:27:49: error: errmsg.h: No such file or directory
In file included from dbdimp.c:20:
dbdimp.h:159: error: expected specifier-qualifier-list before ‘MYSQL’
dbdimp.h:257: error: expected specifier-qualifier-list before ‘MYSQL_RES’
In file included from dbdimp.c:20:
.... 
```

这是我第一次在安装 CPAN 模块时遇到问题（Xcode 安装和 GCC 编译器 k）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T13:40:06.123

是的，您必须安装 MySQL 才能使客户端工作，因为它取决于 MySQL 客户端代码。我通常使用 MySQL 提供的 DMG 下载，其中包括 MySQL 安装程序、启动脚本安装程序和首选项窗格：

*   [http://www.mysql.com/downloads/mysql/](http://www.mysql.com/downloads/mysql/)

确保为您的系统获得正确的平台。**编辑：**正如 Quentin 指出的，问题是关于 Lion 的，它始终是 64 位的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T01:37:27.027

我自己找到了解决方案，我使用的是 mysql 的 MAMP 安装目录，但显然它不完整，所以在重新安装 mysql 后，我只是将此选项用于：

```
sudo perle Makefile.pl --mysqlconfig=/usr/local/mysql/bin/mysqlconfig 
```

# ios - 无法在设备上构建应用程序

> ID：11738758
> 
> 赞同：-1
> 
> 时间：2012-07-31T11:08:05.497
> 
> 标签：ios, xcode, testing, device

我有 iOS 应用程序。它在模拟器上运行得很好，但是当我尝试在设备上运行这个应用程序时，调试器告诉我这个：

```
Couldn't register com.enaza.turbomusic with the bootstrap server. Error: unknown error code.
This generally means that another instance of this process was already running or is hung in the debugger.(lldb) 
```

发生了什么事？我应该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T11:14:17.033

重启你的ios设备。这应该可以解决您的问题。

# css - 如何修复 IE 中的平滑文本？

> ID：11738760
> 
> 赞同：1
> 
> 时间：2012-07-31T11:08:18.130
> 
> 标签：css, internet-explorer

我的应用程序中有一个`WebBrowser`控件。我使用以下代码向我的 CSS 添加字体：

```
@font-face {
font-family: 'pNumber';
    src: 
    url('Address\pNumber.eot');
    url('Address\pNumber.eot?#iefix') format('embedded-opentype'),
    url('Address\pNumber.woff')       format('woff'),
    url('Address\pNumber.ttf')        format('truetype'),
    url('Address\pNumber.svg#pNumber')    format('svg');
}
.pNumber 
{
    font-family: pNumber;
} 
```

一切都很好，但文字并不流畅。我在互联网上找到了很多主题，但没有人能解决这个问题。例如：

[使用 Internet Explorer 7 时，Web 字体可能会显得模糊](http://support.microsoft.com/kb/555778)

[如何使 ClearType、@font-face 字体和 CSS 视觉过滤器完美地结合在一起](http://www.useragentman.com/blog/2010/09/02/how-to-make-cleartype-font-face-fonts-and-css-visual-filters-play-nicely-together/)

[IE 中的@Font-Face 平滑](http://www.koodoz.com.au/klog/font-face-smoothing-in-internet-explorer/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T09:39:21.393

似乎 IE 需要字体中的提示才能正确显示它们。我通过使用[fontsquirrel 的生成器](http://www.fontsquirrel.com/fontface/generator)来创建新的字体文件解决了这个问题。您可以通过查看开发人员工具中的网络活动来检查 IE 正在使用哪个文件。

# linq - LINQ中的条件组合总和

> ID：11738771
> 
> 赞同：2
> 
> 时间：2012-07-31T11:09:01.000
> 
> 标签：linq, linq-to-sql, linq-to-entities

我有这张表，我可以通过 linq-to-entities 访问：

*   天
*   数量
*   类型1或2）

我在同一天有很多行并且类型相同，我需要按月汇总它们的数量。这很容易：

```
from r in rows
group r by new { r.Date.Year, r.Date.Month }
into g
select
    new
        {
            Date = new DateTime(g.Key.Year, g.Key.Month, 1),
            Hours = g.Sum(a => a.Amount)
        }; 
```

但是，我有一个特殊规则需要在同一个 LINQ 中实现，我需要一些帮助：

如果在某一天有任何类型 2，那么那一天应该只是类型 2 的总和。否则它应该总结类型 1。

请注意，类型 1 和类型 2 之间的区别是每天，总和是每月。

**更新** 当我处理大量数据时，我需要在一次数据库调用中获取所有数据，我无法将其加载到内存中并在那里进行管理。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T11:16:23.933

你会怎么看？

```
var query =
    from r in rows.ToArray()
    group r by new { r.Date.Year, r.Date.Month } into g
    let lookup = g.ToLookup(x => x.Type, x => x.Amount)
    let Hours = lookup[2].Any() ? lookup[2].Sum() : lookup[1].Sum()
    select new
    {
        Date = new DateTime(g.Key.Year, g.Key.Month, 1),
        Hours,
    }; 
```

请注意，`.ToArray()`因为您需要将数据放入内存才能完成这项工作。

我假设这`Type`是一个整数，其值为`1`或`2`。

* * *

进一步考虑，我认为不可能在一个查询中进行这种分组而不将其放入内存中。

所以最好的选择是最小化内存。如果这不起作用，那么您需要将其分解为几个查询。

```
var query1 =
    from r in rows
    group r.Amount by new
    {
        r.Date.Year,
        r.Date.Month,
        r.Type,
    } into g
    select new
    {
        g.Key.Year,
        g.Key.Month,
        g.Key.Type,
        Amount = g.Sum(),
    };

var query2 =
    from r in query1.ToArray()
    group r by new
    {
        r.Year,
        r.Month,
    } into g
    let lookup = g.ToLookup(x => x.Type, x => x.Amount)
    let Hours = lookup[2].Any() ? lookup[2].Sum() : lookup[1].Sum()
    select new
    {
        Date = new DateTime(g.Key.Year, g.Key.Month, 1),
        Hours,
    }; 
```

这是一种可能性吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T12:59:11.743

好吧，我想我已经弄清楚了。我已经用一些数据对其进行了测试，并且有效。

测试数据和 SQL 测试查询：

```
DECLARE @table TABLE (
    Datum DATETIME,
    Amount INT,
    [Type] INT
)

INSERT INTO @table (Datum, Amount, [Type]) values
('2012-01-01',200,1),
('2012-01-01',100,2),
('2012-01-02',500,1),
('2012-03-01',200,1),
('2012-03-01',100,1),
('2012-03-02',500,2)

SELECT MONTH(Datum), YEAR(Datum), COUNT(*), SUM(Amount)
FROM @table t
INNER JOIN (
    SELECT DAY (Datum) AS _day, MONTH(Datum) AS _month, YEAR(Datum) _year,
    MAX([Type]) as _type
    FROM @table
    GROUP BY DAY (Datum), MONTH(Datum), YEAR(Datum)
) X
ON _month = MONTH (T.Datum)
AND _year = YEAR(T.Datum)
AND _day = DAY(T.Datum)
AND _type = T.[Type]
GROUP BY MONTH(Datum), YEAR(Datum) 
```

结果：

```
(No column name)    (No column name)    (No column name)    (No column name)
1   2012    2   600
3   2012    3   800 
```

翻译后的 LINQ 查询，使用 L2S 和带有测试数据的“真实”测试表进行测试。

```
using (DataClasses1DataContext ctx = new DataClasses1DataContext()) {
    var rows = ctx.Tests;

    var query = rows
        .Join(
            rows.GroupBy(rr =>
                new { rr.Datum.Day, rr.Datum.Month, rr.Datum.Year },
                (key, data) => new { Year = key.Year, Month = key.Month, Day = key.Day, MaxType = data.Select(xxx => xxx.Type).Max() }
            ),
            rr => new { Day = rr.Datum.Day, Month = rr.Datum.Month, Year = rr.Datum.Year, Type = rr.Type },
            rr => new { Day = rr.Day, Month = rr.Month, Year = rr.Year, Type = rr.MaxType },
            (r, r1) => r

        )
        .GroupBy(r =>
            new { Year = r.Datum.Year, Month = r.Datum.Month },
            (key, data) => new { Year = key.Year, Month = key.Month, Amount = data.Select(xx => xx.Amount).Sum() }
        )
        .ToList();
} 
```

这将返回相同的结果。

而且，为了好玩，L2S 从 Linq 查询生成的 SQL 查询。

```
SELECT [t7].[value] AS [Year], [t7].[value2] AS [Month], (
    SELECT SUM([t8].[Amount])
    FROM [dbo].[Test] AS [t8]
    INNER JOIN (
        SELECT [t11].[value3], [t11].[value2], [t11].[value], (
            SELECT MAX([t12].[Type])
            FROM [dbo].[Test] AS [t12]
            WHERE ((([t11].[value] IS NULL) AND (DATEPART(Day, [t12].[Datum]) IS NULL)) OR (([t11].[value] IS NOT NULL) AND (DATEPART(Day, [t12].[Datum]) IS NOT NULL) AND ((([t11].[value] IS NULL) AND (DATEPART(Day, [t12].[Datum]) IS NULL)) OR (([t11].[value] IS NOT NULL) AND (DATEPART(Day, [t12].[Datum]) IS NOT NULL) AND ([t11].[value] = DATEPART(Day, [t12].[Datum])))))) AND ((([t11].[value2] IS NULL) AND (DATEPART(Month, [t12].[Datum]) IS NULL)) OR (([t11].[value2] IS NOT NULL) AND (DATEPART(Month, [t12].[Datum]) IS NOT NULL) AND ((([t11].[value2] IS NULL) AND (DATEPART(Month, [t12].[Datum]) IS NULL)) OR (([t11].[value2] IS NOT NULL) AND (DATEPART(Month, [t12].[Datum]) IS NOT NULL) AND ([t11].[value2] = DATEPART(Month, [t12].[Datum])))))) AND ((([t11].[value3] IS NULL) AND (DATEPART(Year, [t12].[Datum]) IS NULL)) OR (([t11].[value3] IS NOT NULL) AND (DATEPART(Year, [t12].[Datum]) IS NOT NULL) AND ((([t11].[value3] IS NULL) AND (DATEPART(Year, [t12].[Datum]) IS NULL)) OR (([t11].[value3] IS NOT NULL) AND (DATEPART(Year, [t12].[Datum]) IS NOT NULL) AND ([t11].[value3] = DATEPART(Year, [t12].[Datum]))))))
            ) AS [value4]
        FROM (
            SELECT [t10].[value], [t10].[value2], [t10].[value3]
            FROM (
                SELECT DATEPART(Day, [t9].[Datum]) AS [value], DATEPART(Month, [t9].[Datum]) AS [value2], DATEPART(Year, [t9].[Datum]) AS [value3]
                FROM [dbo].[Test] AS [t9]
                ) AS [t10]
            GROUP BY [t10].[value], [t10].[value2], [t10].[value3]
            ) AS [t11]
        ) AS [t13] ON (DATEPART(Day, [t8].[Datum]) = [t13].[value]) AND (DATEPART(Month, [t8].[Datum]) = [t13].[value2]) AND (DATEPART(Year, [t8].[Datum]) = [t13].[value3]) AND ([t8].[Type] = [t13].[value4])
    WHERE ((([t7].[value] IS NULL) AND (DATEPART(Year, [t8].[Datum]) IS NULL)) OR (([t7].[value] IS NOT NULL) AND (DATEPART(Year, [t8].[Datum]) IS NOT NULL) AND ((([t7].[value] IS NULL) AND (DATEPART(Year, [t8].[Datum]) IS NULL)) OR (([t7].[value] IS NOT NULL) AND (DATEPART(Year, [t8].[Datum]) IS NOT NULL) AND ([t7].[value] = DATEPART(Year, [t8].[Datum])))))) AND ((([t7].[value2] IS NULL) AND (DATEPART(Month, [t8].[Datum]) IS NULL)) OR (([t7].[value2] IS NOT NULL) AND (DATEPART(Month, [t8].[Datum]) IS NOT NULL) AND ((([t7].[value2] IS NULL) AND (DATEPART(Month, [t8].[Datum]) IS NULL)) OR (([t7].[value2] IS NOT NULL) AND (DATEPART(Month, [t8].[Datum]) IS NOT NULL) AND ([t7].[value2] = DATEPART(Month, [t8].[Datum]))))))
    ) AS [Amount]
FROM (
    SELECT [t6].[value], [t6].[value2]
    FROM (
        SELECT DATEPART(Year, [t0].[Datum]) AS [value], DATEPART(Month, [t0].[Datum]) AS [value2]
        FROM [dbo].[Test] AS [t0]
        INNER JOIN (
            SELECT [t3].[value3], [t3].[value2], [t3].[value], (
                SELECT MAX([t4].[Type])
                FROM [dbo].[Test] AS [t4]
                WHERE ((([t3].[value] IS NULL) AND (DATEPART(Day, [t4].[Datum]) IS NULL)) OR (([t3].[value] IS NOT NULL) AND (DATEPART(Day, [t4].[Datum]) IS NOT NULL) AND ((([t3].[value] IS NULL) AND (DATEPART(Day, [t4].[Datum]) IS NULL)) OR (([t3].[value] IS NOT NULL) AND (DATEPART(Day, [t4].[Datum]) IS NOT NULL) AND ([t3].[value] = DATEPART(Day, [t4].[Datum])))))) AND ((([t3].[value2] IS NULL) AND (DATEPART(Month, [t4].[Datum]) IS NULL)) OR (([t3].[value2] IS NOT NULL) AND (DATEPART(Month, [t4].[Datum]) IS NOT NULL) AND ((([t3].[value2] IS NULL) AND (DATEPART(Month, [t4].[Datum]) IS NULL)) OR (([t3].[value2] IS NOT NULL) AND (DATEPART(Month, [t4].[Datum]) IS NOT NULL) AND ([t3].[value2] = DATEPART(Month, [t4].[Datum])))))) AND ((([t3].[value3] IS NULL) AND (DATEPART(Year, [t4].[Datum]) IS NULL)) OR (([t3].[value3] IS NOT NULL) AND (DATEPART(Year, [t4].[Datum]) IS NOT NULL) AND ((([t3].[value3] IS NULL) AND (DATEPART(Year, [t4].[Datum]) IS NULL)) OR (([t3].[value3] IS NOT NULL) AND (DATEPART(Year, [t4].[Datum]) IS NOT NULL) AND ([t3].[value3] = DATEPART(Year, [t4].[Datum]))))))
                ) AS [value4]
            FROM (
                SELECT [t2].[value], [t2].[value2], [t2].[value3]
                FROM (
                    SELECT DATEPART(Day, [t1].[Datum]) AS [value], DATEPART(Month, [t1].[Datum]) AS [value2], DATEPART(Year, [t1].[Datum]) AS [value3]
                    FROM [dbo].[Test] AS [t1]
                    ) AS [t2]
                GROUP BY [t2].[value], [t2].[value2], [t2].[value3]
                ) AS [t3]
            ) AS [t5] ON (DATEPART(Day, [t0].[Datum]) = [t5].[value]) AND (DATEPART(Month, [t0].[Datum]) = [t5].[value2]) AND (DATEPART(Year, [t0].[Datum]) = [t5].[value3]) AND ([t0].[Type] = [t5].[value4])
        ) AS [t6]
    GROUP BY [t6].[value], [t6].[value2]
    ) AS [t7] 
```

我不知道这个 SQL 的效率有多高，你将不得不尝试它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T13:11:14.373

```
rows
    .GroupBy(
        r => new { r.Date.Year, r.Date.Month, r.Date.Day, r.Type },
        (r, rr) => new { r.Year, r.Month, r.Day, r.Type, Amount = rr.Sum(rrr => rrr.Amount) })
    .GroupBy(
        r => new { r.Year, r.Month, r.Day },
        (r, rr) => new { r.Year, r.Month, r.Day, Amount = rr.OrderByDescending(rrr => rrr.Type).Select(rrr => rrr.Amount).First() })
    .GroupBy(
        r => new { r.Year, r.Month },
        (r, rr) => new { r.Year, r.Month, Amount = rr.Sum(rrr => rrr.Amount) }) 
```

**这背后的比率**非常简单：“如果至少有一个类型 2 记录，则只计算类型 2 记录”的要求可以通过简单地按类型对记录进行分组来实现（当然是在几天内）。为什么它有效？因为我们将所有记录分成两组，类型 2（如果至少有一个类型 2 记录，则应该使用）和类型 1（实际上表示“没有类型 2 时的所有记录”）。第二部分（选择总和）更简单：我们只需按类型降序（即类型 2 的总和，类型 1 的总和）对组进行排序（即，类型 2 的总和）并取第一个，如果存在则为我们的类型 2，否则为类型 1。

坦率地说，这是一种所有人都讨厌的“智能代码”，因为没有人一眼就能理解它是如何工作的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T23:00:51.127

这个怎么样？

```
from r in rows
group r by new { r.Date.Year, r.Date.Month }
into g
let type2Days = g.Where( a => a.Type == 2 ).Select( a => a.Date.Day ).Distinct()
let filtered = g.Where( a => a.Type == 2 || type2Days.Contains(a.Date.Day) == false )
select
    new
        {
            Date = new DateTime(g.Key.Year, g.Key.Month, 1),
            Hours = filtered.Sum(a => a.Amount)
        }; 
```

# git - 从 git merge 清理文件

> ID：11738772
> 
> 赞同：-1
> 
> 时间：2012-07-31T11:09:13.103
> 
> 标签：git, unix, git-merge

由于愚蠢，大文件的唯一版本是尝试合并，即它包含很多行，例如

```
<<<<<<< HEAD        double[] p1 = ...
                    double[] p2 = ...
=======         double[] p1 = ...
                double[] p2 = ...
>>>>>>> origin/foo 
```

我如何摆脱这些，而不必编辑每一个，总是选择`HEAD`？

合并和一些愚蠢的命令让我失去了原来 HEAD 的踪迹，但幸运的是 git reflog 帮助我找到了合并之前的位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T11:53:00.043

如果您想始终选择 HEAD，那么您正在寻找一个`merge strategy`被调用的`ours`.

做`git merge -s ours <branch-to-merge>`

在合并时引用 git help：

> 合并策略 合并机制（git-merge 和 git-pull 命令）允许使用 -s 选项选择后端合并策略。一些策略也可以采用自己的选项，可以通过将 -X 参数传递给 git-merge 和/或 git-pull 来传递。

```
 recursive
       This can only resolve two heads using a 3-way merge algorithm. When there is more than one common ancestor that can be used
       for 3-way merge, it creates a merged tree of the common ancestors and uses that as the reference tree for the 3-way merge.
       This has been reported to result in fewer merge conflicts without causing mis-merges by tests done on actual merge commits
       taken from Linux 2.6 kernel development history. Additionally this can detect and handle merges involving renames. This is
       the default merge strategy when pulling or merging one branch.

       The recursive strategy can take the following options:

       ours
           This option forces conflicting hunks to be auto-resolved cleanly by favoring our version. Changes from the other tree
           that do not conflict with our side are reflected to the merge result.

           This should not be confused with the ours merge strategy, which does not even look at what the other tree contains at
           all. It discards everything the other tree did, declaring our history contains all that happened in it.

       theirs
           This is opposite of ours.

   ours
       This resolves any number of heads, but the resulting tree of the merge is always that of the current branch head,
       effectively ignoring all changes from all other branches. It is meant to be used to supersede old development history of
       side branches. Note that this is different from the -Xours option to the recursive merge strategy. 
```

这些是列出的一些策略。用于`git help merge`寻找更多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T11:17:51.580

您可以在合并时通过传递`-X ignore-space-change`到命令行来忽略空间更改，这也适用于`git rebase`.

# java - 如何使用注释在 Spring 3 中进行国际化？

> ID：11738774
> 
> 赞同：0
> 
> 时间：2012-07-31T11:09:16.193
> 
> 标签：java, internationalization, annotations, spring-3

有人可以给我 Spring 3.0 国际化的参考/示例代码（基于注释，没有 XML）吗？

# android - 如何使用 HTTPPost 传递值？

> ID：11738777
> 
> 赞同：0
> 
> 时间：2012-07-31T11:09:39.087
> 
> 标签：android, xml-parsing, connection, http-post

我正在处理此代码以将`name`一个人的价值发布到网页中，但由于某种原因它无法正常工作......在某种程度上它正在工作。我在代码中给出了一些打印序列，这些打印序列显示在 logcat 中......

这是我的`MainActivity`

```
public class MainActivity extends Activity {
String link="http://myweb.com/index.php";
String name1 = "akhil";
String value="name"+name1;
Button bttn1;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    bttn1 = (Button)findViewById(R.id.bttn1);
    bttn1.setOnClickListener(new View.OnClickListener() {

        public void onClick(View arg0) {
            // TODO Auto-generated method stub
            try{
            post_connection obj = new post_connection();
            obj.connect(link,value);                
            }
            catch (Exception e) {
                // TODO: handle exception
                Toast.makeText(getApplicationContext(), e.getMessage(), Toast.LENGTH_LONG).show();
            }
        }
    });        

} 
```

}

我的`post_connection`课程如下

```
public class post_connection {

public void connect(String link , String value)
{

    try
    {
        URLConnection url = new URL(link).openConnection();
        if(url instanceof HttpURLConnection) {

              // do stuff

            System.out.println("@@@3");
            System.out.println("@@@3");

            System.out.println("@@@32");
            ((HttpURLConnection) url).setRequestMethod("POST");
            ((HttpURLConnection) url).setAllowUserInteraction(true);
            ((HttpURLConnection) url).setDoInput(true);
            ((HttpURLConnection) url).setDoOutput(true);
            ((HttpURLConnection) url).setUseCaches(true);
            System.out.println("@@@4");
            System.out.println("Making the request");
            ((HttpURLConnection)url).connect();
            System.out.println("connecting.....");

            DataOutputStream data = new DataOutputStream(((HttpURLConnection) url).getOutputStream());
            data.writeBytes(value);
            BufferedReader bufferedReader = new BufferedReader(new InputStreamReader(((HttpURLConnection) url).getInputStream()));
            System.out.println("@@@5");
            String decodedString;
            while((decodedString=bufferedReader.readLine())!=null)
            {
                System.out.println("decoded::"+decodedString);
            }
            bufferedReader.close();
            }
            else {
              // error?
                System.out.println("@@@23");
            }

    }
    catch (Exception e) {
        // TODO: handle exception
        e.printStackTrace();
    }

} 
```

}

![这显示了这样的 logcat 输出](../Images/3cd3610547d338b79a58d8724c0b7233.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T11:23:09.163

你可以试试：

```
 public static String makePostRequest(String url, Bundle params) throws IOException {
         HttpClient httpclient = new DefaultHttpClient();      
         HttpPost httppost = new HttpPost(url);
         List<NameValuePair> postParameters = new ArrayList<NameValuePair>();
         for (String key : params.keySet()) {
             postParameters.add(new BasicNameValuePair(URLEncoder.encode(key), URLEncoder.encode(params.getString(key))));
         }
         UrlEncodedFormEntity formEntity = new UrlEncodedFormEntity(postParameters);
         httppost.setEntity(formEntity);
         ResponseHandler<String> responseHandler = new BasicResponseHandler();
         return httpclient.execute(httppost, responseHandler);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T11:14:16.187

尝试 URL 重写如下：

```
url = url+"?Param1=Value1&Param2=value2";
           ^ Rewriter    ^ Parameter Delimeter 
```

然后发布上面编辑的网址。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T11:44:09.757

您可以重写 post_connection 类，如下所示：

```
public class post_connection {

public void connect(String link , String value){

try
{
    HttpClient httpclient = new DefaultHttpClient();
    HttpResponse response;
    HttpPost httpost;
    String responseString = null;

        // do stuff

        httpost = new HttpPost(link);

    /*StringEntity se = new StringEntity(value);

        httpost.setEntity(se);*/

       List<NameValuePair> params = new ArrayList<NameValuePair>();

       params.add(new BasicNameValuePair("name", value));

       UrlEncodedFormEntity formEntity = null;
       try {
            formEntity = new UrlEncodedFormEntity(params);

        } catch (UnsupportedEncodingException e1) {

        }

         httppost.setEntity(formEntity);

        System.out.println("Making the request");

        response = httpclient.execute(httpost);

        //getting the response

        StatusLine statusLine = response.getStatusLine();

        if(statusLine.getStatusCode() == HttpStatus.SC_OK){

            ByteArrayOutputStream out = new ByteArrayOutputStream();
            response.getEntity().writeTo(out);
            out.close();
            responseString = out.toString();

        } else{

            //Closes the connection.
            response.getEntity().getContent().close();
            throw new IOException(statusLine.getReasonPhrase());
        }

} 
catch (Exception e) {
    // TODO: handle exception
    e.printStackTrace();
} 
```

}

# httpwebrequest - 使用 Picasa API 显示 Picasa 照片时如何避免延迟？

> ID：11738778
> 
> 赞同：0
> 
> 时间：2012-07-31T11:09:39.690
> 
> 标签：httpwebrequest, browser-cache, picasa

我目前正在使用 Google Picasa API (C#) 在我的网站上显示来自公共 Picasa 网络相册的照片。

问题是从在网络相册中完成更改到通过 API 反映的那一刻之间存在延迟（几秒到几分钟）。我需要它立即反映：当新照片上传到相册时，我需要它在同一时间准确地显示在网站上。

当我发现在输入 IE9 或 Chrome 的 URL (http://picasaweb.google.com/data/feed/api/user//albumid/) 时会立即显示更改时，它变得更加有趣。

我也尝试通过 HttpWebRequest 调用上述 URL 并设置所有无缓存标头，但它没有解决问题。

那么，在这种情况下，浏览器请求与 HttpWebRequest/API 完成的请求有什么区别？谁能把我引向正确的方向？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T20:07:09.237

以防万一您还没有发现并且可能仍然感兴趣，我遇到了完全相同的问题（尽管在 PHP 中），结果证明匿名请求被延迟，而授权请求是即时的。由于您的浏览器在您的 Google 帐户中包含一个 cookie，因此它被视为授权请求，因此会立即更新。但是，代码的请求仍然是匿名的。

解决方案是进行 HTTP POST 以检索提要，并按照[此处](https://developers.google.com/picasa-web/docs/2.0/developers_guide_protocol#Auth)所述授权请求。

# google-apps-script - 如何将 Google Drive Scripts 项目添加到 Google 协作平台中？

> ID：11738782
> 
> 赞同：1
> 
> 时间：2012-07-31T11:09:52.747
> 
> 标签：google-apps-script, google-sites

我想从 Google 协作平台嵌入 Google Drive Scripts/项目，但我不能。

Google 协作平台通过消息提醒我

```
This url is not recognised as a valid Apps Script 
```

在我之后

*   从 Google Drive 创建项目脚本，
*   增加了一个功能`function doget(e) { code; code; code; ... }`，
*   发布脚本（*“部署为 Web 应用程序”*），
*   检索到链接链接（例如：*https://script.google.com…1DkWAQ/exec*），并且
*   在 Google 协作平台页面中，
    *   我编辑了页面并从菜单中插入了一个脚本：*Insert > Apps Script Gadget*。

在下一页中，我输入了脚本的链接，但出现了一个消息框：*“此 url 未被识别为有效的 Apps 脚本”*

我哪里错了？

我的问题是：我可以在不在网站页面中添加代码的情况下执行 Google Drive Script 吗？是否可以从多个 Google 站点的页面执行具有不同参数的 Google Drive Script？

谢谢，

米歇尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T11:23:21.423

嵌入 Google 网站时的 url 是不同的，下面是一个可以插入的示例：

```
`https://sites.google.com/macros/exec?service=keyxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx` 
```

您可以在独立 url 中选择密钥。我必须承认界面并不清楚，文档也不是

**编辑：** *因为有些人似乎持怀疑态度；-) 这是一个将共享脚本编写为脚本文件的示例：*

为[独立应用程序](https://script.google.com/macros/s/AKfycbxlPTVLSLfO3d1w2vSrMzzh57p9DJM6ivCIHiIfTB2AKqubSs1L/exec)提供的网址是：

```
https://script.google.com/macros/s/AKfycbxlPTVLSLfO3d1w2vSrMzzh57p9DJM6ivCIHiIfTB2AKqubSs1L/exec 
```

[站点页面中](https://sites.google.com/site/appsscriptexperiments/home/multipanel-ui)的相同脚本是：

```
https://sites.google.com/macros/exec?service=AKfycbxlPTVLSLfO3d1w2vSrMzzh57p9DJM6ivCIHiIfTB2AKqubSs1L 
```

随时检查;-)

在小工具属性中，它显示如下：

![在此处输入图像描述](../Images/6c8423ce6f2528be34c0634370be6c0b.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T23:20:43.380

我相信这总结了保存在云端硬盘上的脚本 URL 的正确格式，以便在 Google 网站上使用脚本小工具插入：

*   普通谷歌用户： [https ://sites.google.com/macros/exec?service=KEY](https://sites.google.com/macros/exec?service=KEY)

*   Google Apps 域： [https ://sites.google.com/a/macros/MYDOMAIN/exec?service=KEY](https://sites.google.com/a/macros/MYDOMAIN/exec?service=KEY)

请注意域部分是“sites.google.com”而不是“script.google.com”

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-31T12:18:03.167

根据我的经验，您不能在 Google Drive 中创建应用程序脚本，然后将其嵌入到站点中。

为此，请登录您网站的仪表板。您可以通过从您的站点（使用*登录*帐户）选择菜单项`More`>*管理站点来执行此操作。*然后选择标签*Apps Scripts*，点击按钮。从那里你可以编写你的脚本。完成后，返回您的站点，编辑页面并将该脚本插入到您的页面中。**`Add new script`**

# objective-c - 在导航控制器中推送 UIViewController 显示空视图

> ID：11738788
> 
> 赞同：2
> 
> 时间：2012-07-31T11:10:11.453
> 
> 标签：objective-c, ios, uiviewcontroller, uinavigationcontroller

我面临的问题是，当我将视图控制器推入导航控制器时，它所做的只是更改导航栏并显示标准背景，但看不到任何视图。我将视图控制器推入导航控制器的代码如下所示：

```
Viewcontroller1 *viewController = [[Viewcontroller1 alloc] autorelease];
[[self navigationController] pushViewController:viewController animated:YES]; 
```

但是，如果我通过为它创建 IBOutlets 来初始化视图控制器，它就可以正常工作。但是我不这样做的原因是因为我稍后需要在初始化时将一些参数传递给类。

谢谢你的时间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T11:16:18.110

你必须初始化你的视图

如果你有 xib 然后

```
Viewcontroller1 *viewController = [[[Viewcontroller1 alloc] initWithNibName:@"Viewcontroller1" bundle:nil]autorelease];
[[self navigationController] pushViewController:viewController animated:YES]; 
```

如果你没有xib

```
Viewcontroller1 *viewController = [[[Viewcontroller1 alloc] init]autorelease];
[[self navigationController] pushViewController:viewController animated:YES]; 
```

# php - ZendFramewok 在一个文件夹中

> ID：11738791
> 
> 赞同：0
> 
> 时间：2012-07-31T11:10:21.347
> 
> 标签：php, zend-framework, hosting

关于 ZendFramework 的几个问题：

1.  创建新项目时，是否可以将所有内容都放在一个文件夹中，例如 CodeIgniter。那么应用程序和系统文件夹，或类似的东西？

2.  当我使用 ZendFramework 完成一个项目时，将它放在服务器上有多难/容易（不使用控制台 - 共享主机）？

3.  开发时可以不用终端使用 ZendFramework 吗？假设我正在使用 FTP 客户端创建新课程？

提前致谢！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T11:48:17.043

Zend Framework 与任何其他框架（CakePHP、CodeIgniter、Symfony...）一样，您可以通过 CLI 命令（项目生成器）或手动设置项目文件夹和包含路径来设置新项目。

最佳做法是使用类似于以下形式的手动方法：

```
/project/
/project/vendors/...  - all vendor libraries you may use in your project
/project/lib/... - your common libraries (if you have some)
/project/application/... - application files like controllers, views, temp folders etc... 
```

例子：

```
/project/vendors/Zend/... (zend framework)
/project/vendors/Symfony/... (symfony framework)
/project/lib/MyLib/... (your lib)
/project/application/Bootstrap.php
/project/public_html/index.php 
```

index.php 片段：

```
<?php
define('VENDORS_PATH', '/project/vendors');
define('LIB_PATH', '/project/lib');
set_include_path(
    LIB_PATH . PATH_SEPARATOR . 
    VENDORS_PATH . PATH_SEPARATOR . 
    get_include_path()
);

// setup class autoloading
require_once VENDORS_PATH . '/Zend/Loader/Autoloader';
$autoloader = Zend_Loader_Autoloader::getInstance();
$autoloader->setDefaultAutoloader(create_function('$class', "include str_replace('_', '/', \$class) . '.php';"));
$autoloader->setFallbackAutoloader(true);

// run application, include Symfony or MyLib files... 
```

至于在生产服务器上迁移项目，您应该首先使用环境设置设置项目配置。

示例 setup.ini：

```
[production]
database.hostname = localhost
database.username = username
database.password = password1
database.dbname = live_db

[staging:production]
database.hostname = localhost
database.username = root
database.password = password2
database.dbname = local_db 
```

使用 apache .htaccess 文件可以轻松设置环境以加载配置：

本地环境中的 .htaccess 文件：

```
SetEnv APPLICATION_ENV staging 
```

生产环境中的 .htaccess 文件：

```
SetEnv APPLICATION_ENV production 
```

使用环境变量的 index.php 片段：

```
<?php
...
define('APPLICATION_ENV', getenv('APPLICATION_ENV'));
$config = new Zend_Config_Ini(APPLICATION_LIB . '/setup.ini', APPLICATION_ENV);
... 
```

# asp.net - ASP .net 健康监测事件代码

> ID：11738792
> 
> 赞同：1
> 
> 时间：2012-07-31T11:10:25.710
> 
> 标签：asp.net, health-monitoring

是否有所有事件代码的列表以及它们对应的内容？

我似乎在文档中找不到任何东西。我在[这里](http://dotnetdarren.wordpress.com/2010/07/29/logging-in-mvc-part-5-the-model-and-data-layer/)找到了一个列表，但只是想验证他们没有遗漏任何一个。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T11:21:14.217

这看起来就是你所追求的：

[http://msdn.microsoft.com/en-us/library/system.web.management.webeventcodes.aspx](http://msdn.microsoft.com/en-us/library/system.web.management.webeventcodes.aspx)

# sql-server - 从大 (44GB) 文本文件执行插入脚本

> ID：11738793
> 
> 赞同：1
> 
> 时间：2012-07-31T11:10:29.530
> 
> 标签：sql-server, insert, text-files

我们有以下要求，给出了一个大小为 44GB 的大文本文件，其中包含表的插入脚本。我们需要针对目标 SQL Server 2008 R2 数据库执行这些脚本。我们按照两步流程执行脚本。1\. 将所有插入语句一个一个地批量插入到中间表中（大约2200万条记录）。2\. 然后使用游标执行中间表中的语句。

第一步是成功的，但是第二步不是那么有效，因为它很慢，并且一些插入语句在执行过程中失败。我们无法找到确切的故障点。您能否告诉我们完成任务的有效方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T11:13:34.397

通常不建议使用游标，因为它速度慢且占用内存。尝试改用 WHILE 循环？

参考示例：

[SQL Server 存储过程避免游标](https://stackoverflow.com/questions/11077162/sql-server-stored-procedure-avoid-cursor/11077218#11077218)

# objective-c - 将 XIB 视图添加到情节提要中的选项卡视图

> ID：11738796
> 
> 赞同：4
> 
> 时间：2012-07-31T11:10:57.077
> 
> 标签：objective-c, ios, storyboard, xib

我正在开发一个 Iphone 应用程序。我正在使用故事板。

我有一个带有 3 个选项卡的选项卡视图。“主页”、“用户”和“设置”。

我在故事板上创建了“主页”和“用户”视图，但设置视图是一个 XIB 文件 (SettingsView.xib)

如何使第三个选项卡（“设置”）打开 SettingsView.xib？我可以同时使用故事板和 xib 文件吗？

我试图在 AppDelegate`UINavigationController`的`startApp`方法中初始化 a 但我不知道如何将它添加到故事板。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T11:20:07.047

TabViewController 通常每个选项卡都有一个导航控制器。在故事板中创建导航控制器并将它们连接到选项卡视图控制器的导航控制器关系。

导航控制器的初始视图连接到导航控制器的 rootViewController 关系。

至于你的第二个问题，我不确定，但我认为以下方法会起作用：-

在情节提要中创建一个 UIViewController 并将其类更改为您从 XIB 加载的类。当故事板实例化类时，它将使用 XIB，前提是类的类名与 XIB 的名称完全匹配。我不认为你可以在这里做任何 iPad/iPod 检查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T12:29:05.970

您可以将基于 xib 的视图添加到基于情节提要的选项卡栏控制器，如下所示。我假设以下内容：

*   标签栏控制器是故事板的初始视图控制器。
*   您的设置控制器是一个名为的类`SettingsController`
*   您的捆绑包中有一个标签栏图像，名为`SettingsTabImage`

在情节提要中定义选项卡栏控制器，其中仅包含基于情节提要的选项卡栏项目-在您的情况下为主页和用户

在您的应用程序委托中，使用以下代码`application:didFinishLaunchingWithOptions:`：

```
// Create your settings view controller
SettingsController *settingsVC = [[SettingsController alloc] initWithNibName:nil bundle:nil];

// Create a tab bar item
UITabBarItem *settingsItem = [[UITabBarItem alloc] initWithTitle:@"Settings" image:[UIImage imageNamed:@"SettingsTabImage" tag:0];
settingsVC.tabBarItem = settingsItem;

// Get a reference to the tab bar controller
UITabBarController *tbC = (UITabBarController*)self.window.rootViewController;

// Get the current view controllers in your tab bar
NSMutableArray *currentItems = [NSMutableArray arrayWithArray:tbC.viewControllers];

// Add your settings controller
[currentItems addObject:settingsVC];
tbC.viewControllers = [NSArray arrayWithArray:currentItems]; 
```

# python - Routes Dispatcher 示例在 Cherrypy 中不起作用

> ID：11738797
> 
> 赞同：1
> 
> 时间：2012-07-31T11:10:58.007
> 
> 标签：python, routes, dispatcher, cherrypy

我在cherrypy Essentials中尝试了Routes Dispatcher示例，但它不起作用。它给我`Page not found`错误。我错过了什么？

```
import cherrypy
class Root:
    def index(self):
        return "Not much to say"
    def hello(self, name):
        return "Hello %s" % name
if __name__ == '__main__':
    root = Root()
    # Create an instance of the dispatcher
    d = cherrypy.dispatch.RoutesDispatcher()
    # connect a route that will be handled by the 'index' handler
    d.connect('default_route', '', controller=root)
    # connect a route to the 'hello' handler
    # this will match URIs such as '/say/hello/there'
    # but not '/hello/there'
    d.connect('some_other', 'say/:action/:name',
    controller=root, action='hello')
    # set the dispatcher
    conf = {'/': {'request.dispatch': d}}
    cherrypy.quickstart(root, '/', config=conf) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-11-06T20:15:47.930

我知道这个问题早就解决了，但我认为值得注意的是，我能够通过在连接的路径中添加一个起始斜杠来修复无法工作的路由：

```
d.connect('some_other', 'say/:action/:name', 
```

至

```
d.connect('some_other', '/say/:action/:name', 
```

希望这可以帮助某人。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-31T13:03:23.363

尝试暴露你的处理程序......

```
 @cherrypy.expose
 def index(self):
    return "Not much to say"
 @cherrypy.expose
 def hello(self, name):
    return "Hello %s" % name 
```

安德鲁

# .net - 将表存储在客户端计算机中并稍后同步

> ID：11738801
> 
> 赞同：0
> 
> 时间：2012-07-31T11:11:05.367
> 
> 标签：.net, sql, synchronization

我正在使用 VS 2010 和 SQL Server 2005 在 Window 平台上开发“销售点”应用程序。

我想在客户端机器上存储几张表。`SynchronizeStatus`我的客户端机器上有一个以 XML 文件命名的标签。

安装设置后，当用户登录时，它将检查`SynchronizeStatus`XML 文件。如果`SynchronizeStatus`设置为`true`，我想将一些表导入客户端计算机，并且用户必须能够仅从本地访问数据。如果`SynchronizeStatus`设置为`false`，那么我不需要将任何表导入客户端计算机。

`ModifiedDate`我在所有同步表中都有一个名为的列。

下次用户登录时，我必须`ModifiedDate`从客户端表和服务器端表进行比较。如果服务器端`ModifiedDate`大于客户端`ModifiedDate`，那么我的本地表必须与服务器端表同步，或者它们必须从客户端机器本身获取。

有时，我想手动将客户端数据同步到服务器端数据。

在客户端计算机中存储表并同步它们的最佳方法是什么？我该怎么做呢？

我尝试使用`LocalDataCache`，但徒劳无功。

# perl - 使用数组处理散列的散列

> ID：11738812
> 
> 赞同：2
> 
> 时间：2012-07-31T11:11:55.227
> 
> 标签：perl, perl-data-structures

这是我的问题：

我有一个类似数据结构的文件系统：

```
%fs = (
    "home" => {
        "test.file"  => { 
            type => "file",
            owner => 1000, 
            content => "Hello World!",
        },
    },
    "etc"  => { 
        "passwd"  => { 
            type => "file",
            owner => 0, 
            content => "testuser:testusershash",
            },
        "conf"  => { 
            "test.file"  => { 
                type => "file",
                owner => 1000, 
                content => "Hello World!",
            },
        },
    },
); 
```

现在，要获取`/etc/conf/test.file`我需要的内容`$fs{"etc"}{"conf"}{"test.file"}{"content"}`，但我的输入是一个数组，看起来像这样：`("etc","conf","test.file")`。

所以，因为输入的长度不同，我不知道如何访问散列的值。有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-31T11:17:35.093

您可以使用循环。在每一步中，您都会更深入地了解结构。

```
my @path = qw/etc conf test.file/;
my %result = %fs;
while (@path) {
    %result = %{ $result{shift @path} };
}
print $result{content}; 
```

您还可以使用[Data::Diver](http://p3rl.org/Data%3a%3aDiver)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T11:21:03.093

```
my @a = ("etc","conf","test.file");

my $h = \%fs;
while (my $v = shift @a) {
  $h = $h->{$v};
}
print $h->{type}; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T12:36:42.867

与其他人给出的逻辑相同，但使用`foreach`

```
@keys = qw(etc conf test.file content);
$r = \%fs ;
$r = $r->{$_} foreach (@keys);
print $r; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T12:46:36.363

```
$pname = '/etc/conf/test.file';
@names = split '/', $pname;
$fh = \%fs;
for (@names) {
    $fh = $fh->{"$_"} if $_;
}
print $fh->{'content'}; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-31T15:05:24.297

Path::Class 接受一个数组。它还为您提供了一个带有辅助方法的对象并处理跨平台斜线问题。

[https://metacpan.org/module/Path::Class](https://metacpan.org/module/Path::Class)

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-07-31T11:38:44.670

您可以只构建哈希元素表达式并调用`eval`. 如果将其包装在子例程中，则更整洁

```
my @path = qw/ etc conf test.file /;

print hash_at(\%fs, \@path)->{content}, "\n";

sub hash_at {
  my ($hash, $path) = @_;
  $path = sprintf q($hash->{'%s'}), join q('}{'), @$path;
  return eval $path;
} 
```

# android - 如何在应用程序内的短信收件箱中搜索单词？

> ID：11738818
> 
> 赞同：0
> 
> 时间：2012-07-31T11:12:24.640
> 
> 标签：android, sms

我是安卓新手。我想知道如何在应用程序的 SMS 收件箱中按单词搜索。谁能帮我。如果可以的话，请给我源代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T11:24:47.917

** 使用内容解析器（“content://sms/inbox”）读取收件箱中的短信。**

```
 Cursor cursor = getContentResolver().query(Uri.parse("content://sms/inbox"), null,     null, null, null);    
   cursor.moveToFirst();

   do{
   String msgData = "";
   for(int idx=0;idx<cursor.getColumnCount();idx++)
   {
       msgData += " " + cursor.getColumnName(idx) + ":" + cursor.getString(idx);
   }
   if(msgData.contains(yourWord))
       ;// do something

   }while(cursor.moveToNext()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T11:19:37.460

例如，这似乎已经[在这里](https://stackoverflow.com/questions/11392584/search-the-inbox-content-by-given-string)和[那里](https://stackoverflow.com/questions/11301046/search-sms-inbox)多次回答了指针。请在创建新问题之前搜索现有问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T11:20:49.123

首先，您必须在收件箱内容提供商中查询短信

```
 Uri uriSMSURI = Uri.parse("content://sms/inbox");
  Cursor cur = getContentResolver().query(uriSMSURI,new String[] { "_id", "thread_id",      "address", "person", "date", "body" }, null, null,null); 
```

然后搜索迭代并获取短信正文

```
 if(cur.getCount()>0) {
        while(cur.moveToNext()) {
            String smsBody = cur.getString(5);
            Log.v("body",smsBody);

            if(smsBody.contains("matching string")) {

            } 
```

也参考这个链接

[如何在安卓手机中阅读收件箱？](https://stackoverflow.com/questions/5547352/how-can-i-read-inbox-in-android-mobile)

# .net - .NET 监控并发连接数

> ID：11738819
> 
> 赞同：1
> 
> 时间：2012-07-31T11:12:36.943
> 
> 标签：.net, web-services

我在网络上看到了各种资源，建议如果我有一个应用程序进行大量网络服务调用，则使用如下部分修改 web.config：

```
<system.net>
    <connectionManagement>
      <add address="*" maxconnection="40" />
    </connectionManagement>
  </system.net> 
```

有没有办法使用 Windows 或 SysInternals 工具来监控/记录当前使用的连接，看看这是否真的是一个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T11:52:55.513

这取决于您连接/来自什么；看看您在负载/负载测试下是否遇到任何错误。您还可以运行快速`netstat`命令以查看在任何给定时刻您有多少连接。

但是，除非您有特定的理由，否则我*不*建议您摆弄此类设置。例如，如果对您正在使用的 Web 服务的并发连接有限制。（例如，许多公共服务会有这样的限制）

# machine-learning - weka中类属性标称值的排序

> ID：11738822
> 
> 赞同：4
> 
> 时间：2012-07-31T11:12:48.843
> 
> 标签：machine-learning, data-mining, weka, svm

在创建训练集期间，我输入“true”和“false”的顺序与在 WEKA 中创建测试集时输入的顺序相同。这些标称值用于类属性。

当我运行一个分类器时，我不知何故觉得结果在测试集中看起来好像是颠倒的。

我的问题是，如果训练集中的第一行显示类值为“False”，并且如果训练的模型用于测试集的 SVM 分类器中，是否意味着返回的分类类为 0，我应该认为它是假的？

谢谢阿布舍克 S

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T13:47:36.143

如果名义属性在两个数据集（训练和测试）中以相同的顺序定义。输出将按照相同的顺序。

标称值编码为“双”。所以如果你写：{false, true} => "false" = 0.0 and "true" = 1.0。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-18T00:42:35.427

[这](https://waikato.github.io/weka-wiki/use_weka_in_your_java_code/#classifying-instances)是 weka 文档的摘录。

> 从分类实例返回的双精度值（或 distributionForInstance 返回的数组中的索引）只是属性中字符串值的索引。也就是说，如果你想要在 clsLabel 上面返回的类标签的字符串表示，那么你可以像这样打印它：

```
System.out.println(clsLabel + " -> " + unlabeled.classAttribute().value((int) clsLabel)); 
```

# r - 是否在函数中显式调用 return

> ID：11738823
> 
> 赞同：217
> 
> 时间：2012-07-31T11:12:55.697
> 
> 标签：r

不久前，[我受到](https://stackoverflow.com/questions/10412720/rserve-return-type-in-case-of-multiple-statements/10413020#10413020)来自 R 核心团队的 Simon Urbanek 的指责（我相信），因为我建议用户`return`在函数结束时显式调用（尽管他的评论已被删除）：

```
foo = function() {
  return(value)
} 
```

相反，他建议：

```
foo = function() {
  value
} 
```

可能在这种情况下，它是必需的：

```
foo = function() {
 if(a) {
   return(a)
 } else {
   return(b)
 }
} 
```

他的评论阐明了为什么`return`除非非常需要才打电话是一件好事，但这已被删除。

我的问题是：为什么不调用`return`更快或更好，因此更可取？

* * *

## 回答 #1

> 赞同：147
> 
> 时间：2012-08-06T19:19:23.583

**问题是：为什么不（明确地）调用 return 更快或更好，因此更可取？**

R 文档中没有声明做出这样的假设。
主页“功能”说：

```
function( arglist ) expr
return(value) 
```

**不调用return会更快吗？**

`function()`和都是`return()`原始函数，`function()`即使不包含函数，它本身也会返回最后的评估值`return()`。

`return()`将最后一个值作为参数调用`.Primitive('return')`将完成相同的工作，但需要再调用一次。这样这个（通常）不必要的`.Primitive('return')`调用会消耗额外的资源。然而，简单的测量表明产生的差异非常小，因此不能成为不使用显式返回的原因。下图是根据以这种方式选择的数据创建的：

```
bench_nor2 <- function(x,repeats) { system.time(rep(
# without explicit return
(function(x) vector(length=x,mode="numeric"))(x)
,repeats)) }

bench_ret2 <- function(x,repeats) { system.time(rep(
# with explicit return
(function(x) return(vector(length=x,mode="numeric")))(x)
,repeats)) }

maxlen <- 1000
reps <- 10000
along <- seq(from=1,to=maxlen,by=5)
ret <- sapply(along,FUN=bench_ret2,repeats=reps)
nor <- sapply(along,FUN=bench_nor2,repeats=reps)
res <- data.frame(N=along,ELAPSED_RET=ret["elapsed",],ELAPSED_NOR=nor["elapsed",])

# res object is then visualized
# R version 2.15 
```

![功能经过时间比较](../Images/51098e831dd10787ba535f61eb7c5a71.png)

上图在您的平台上可能略有不同。根据测量数据，返回对象的大小不会造成任何差异，重复次数（即使按比例放大）只会产生很小的差异，这在实际数据和实际算法中无法计算或使您的脚本运行得更快。

**不调用return会更好吗？**

`Return`是一个很好的工具，可以清楚地设计例程应该结束的代码“叶子”，跳出函数并返回值。

```
# here without calling .Primitive('return')
> (function() {10;20;30;40})()
[1] 40
# here with .Primitive('return')
> (function() {10;20;30;40;return(40)})()
[1] 40
# here return terminates flow
> (function() {10;20;return();30;40})()
NULL
> (function() {10;20;return(25);30;40})()
[1] 25
> 
```

这取决于程序员的策略和编程风格，他使用什么风格，他可以使用 no return() 因为它不是必需的。

R核心程序员使用这两种方法，即。有和没有明确的 return() 因为可以在“基本”函数的来源中找到。

很多时候，在有条件地停止函数的情况下，只使用 return()（无参数）返回 NULL。

目前尚不清楚它是否更好，因为使用 R 的标准用户或分析师看不到真正的区别。

我认为问题应该是：*使用来自 R 实现的显式返回是否有任何危险？*

或者，也许更好的是，编写函数代码的用户应该总是问：在函数代码*中**不**使用显式返回（或将要返回的对象作为代码分支的最后一叶）有什么影响？*

* * *

## 回答 #2

> 赞同：111
> 
> 时间：2012-08-10T04:21:14.800

如果每个人都同意

1.  `return`在函数体的末尾不需要
2.  不使用`return`稍微快一点（根据@Alan 的测试，4.3 微秒对 5.1 微秒）

我们都应该`return`在函数结束时停止使用吗？我当然不会，我想解释一下原因。我希望听到其他人是否同意我的意见。如果这不是对 OP 的直接回答，我很抱歉，而更像是一个长长的主观评论。

正如保罗指出的那样，我不使用`return`的主要问题是，函数体中的其他地方可能需要它。如果你被迫`return`在函数中间的某个地方使用，为什么不让所有`return`语句都明确呢？我讨厌前后矛盾。我也认为代码读起来更好；可以扫描函数并轻松查看所有退出点和值。

保罗用了这个例子：

```
foo = function() {
 if(a) {
   return(a)
 } else {
   return(b)
 }
} 
```

不幸的是，有人可以指出它可以很容易地重写为：

```
foo = function() {
 if(a) {
   output <- a
 } else {
   output <- b
 }
output
} 
```

后一个版本甚至符合一些提倡每个函数一个返回语句的编程编码标准。我认为一个更好的例子可能是：

```
bar <- function() {
   while (a) {
      do_stuff
      for (b) {
         do_stuff
         if (c) return(1)
         for (d) {
            do_stuff
            if (e) return(2)
         }
      }
   }
   return(3)
} 
```

使用单个 return 语句重写这将更加困难：它需要多个`break`s 和一个复杂的布尔变量系统来传播它们。所有这一切都说明单一返回规则在 R 中不能很好地发挥作用。因此，如果您需要`return`在函数体的某些地方使用，为什么不保持一致并在任何地方都使用它呢？

我不认为速度论点是一个有效的论点。当您开始查看实际执行某些操作的函数时，0.8 微秒的差异不算什么。我能看到的最后一件事是打字少了，但是嘿，我并不懒惰。

* * *

## 回答 #3

> 赞同：28
> 
> 时间：2012-08-11T11:43:04.143

这是一个有趣的讨论。我认为@flodel 的例子非常好。但是，我认为它说明了我的观点（@koshke 在评论中提到了这一点），当您使用***命令式*****而不是*****函数*****式编码风格时，这****`return`是有道理的****。**

 **不是要强调这一点，但我会这样重写`foo`：

```
foo = function() ifelse(a,a,b) 
```

函数式风格避免了状态变化，比如存储`output`. 在这种风格`return`下，显得格格不入；`foo`看起来更像一个数学函数。

我同意@flodel：使用复杂的布尔变量系统`bar`会不太清楚，当你有`return`. 使陈述`bar`如此顺从的`return`原因是它是以命令式的风格编写的。事实上，布尔变量代表了功能风格中避免的“状态”变化。

用函数式重写真的很难`bar`，因为它只是伪代码，但想法是这样的：

```
e_func <- function() do_stuff
d_func <- function() ifelse(any(sapply(seq(d),e_func)),2,3)
b_func <- function() {
  do_stuff
  ifelse(c,1,sapply(seq(b),d_func))
}

bar <- function () {
   do_stuff
   sapply(seq(a),b_func) # Not exactly correct, but illustrates the idea.
} 
```

循环将`while`是最难重写的，因为它是由状态更改控制的`a`。

调用造成的速度损失`return`可以忽略不计，但通过避免`return`和重写函数式风格所获得的效率往往是巨大的。告诉新用户停止使用`return`可能无济于事，但引导他们使用实用风格会有所收获。

* * *

@Paul`return`在命令式风格中是必需的，因为您经常希望在循环中的不同点退出函数。函数式风格不使用循环，因此不需要`return`. 在纯函数式风格中，最终调用几乎总是所需的返回值。

在 Python 中，函数需要一个`return`语句。但是，如果您以函数式风格编写函数，则可能只有一个`return`语句：在函数的末尾。

使用另一个 StackOverflow 帖子中的示例，假设我们想要一个函数，`TRUE`如果给定中的所有值`x`都具有奇数长度，则该函数会返回。我们可以使用两种样式：

```
# Procedural / Imperative
allOdd = function(x) {
  for (i in x) if (length(i) %% 2 == 0) return (FALSE)
  return (TRUE)
}

# Functional
allOdd = function(x) 
  all(length(x) %% 2 == 1) 
```

在函数式风格中，要返回的值自然落在函数的末尾。同样，它看起来更像是一个数学函数。

@GSee 中概述的警告`?ifelse`绝对很有趣，但我不认为他们试图阻止使用该功能。实际上，`ifelse`具有自动矢量化功能的优势。例如，考虑一个稍微修改过的版本`foo`：

```
foo = function(a) { # Note that it now has an argument
 if(a) {
   return(a)
 } else {
   return(b)
 }
} 
```

这个函数在`length(a)`为 1 时工作正常。但如果你`foo`用`ifelse`

```
foo = function (a) ifelse(a,a,b) 
```

现在`foo`适用于任何长度的`a`. 事实上，它甚至可以在`a`是一个矩阵时起作用。`test`返回一个与矢量化具有相同形状的值，这不是问题。

* * *

## 回答 #4

> 赞同：22
> 
> 时间：2012-07-31T13:48:17.230

似乎没有`return()`它会更快...

```
library(rbenchmark)
x <- 1
foo <- function(value) {
  return(value)
}
fuu <- function(value) {
  value
}
benchmark(foo(x),fuu(x),replications=1e7)
    test replications elapsed relative user.self sys.self user.child sys.child
1 foo(x)     10000000   51.36 1.185322     51.11     0.11          0         0
2 fuu(x)     10000000   43.33 1.000000     42.97     0.05          0         0 
```

****____***编辑*****__ *_* __ *_* __ *_* __ *_* __ *_* ___******

 ****我继续进行其他基准测试（`benchmark(fuu(x),foo(x),replications=1e7)`），结果相反......我将在服务器上尝试。

* * *

## 回答 #5

> 赞同：15
> 
> 时间：2019-11-28T14:10:07.850

> 我的问题是：为什么不打电话`return`更快

它更快，因为它`return`是 R 中的（原始）函数，这意味着在代码中使用它会产生函数调用的成本。将此与大多数其他编程语言进行比较，其中`return`是关键字，但不是函数调用：它不会转换为任何运行时代码执行。

也就是说，以这种方式调用原始函数在 R 中非常快，并且调用`return`会产生很小的开销。这不是省略的论据`return`。

> 还是更好，因此更可取？

**因为没有理由*使用*它。**

因为它是冗余的，并且不会增加*有用*的冗余。

需要明确的是：[冗余*有时*是有用](https://en.wikipedia.org/wiki/Double-entry_bookkeeping_system)的。但大多数冗余不是这种类型的。相反，它是一种在不添加信息的情况下增加[视觉混乱](https://blog.codinghorror.com/the-best-code-is-no-code-at-all/)的类型：它相当于一个[填充词](https://www.grammarly.com/blog/how-we-use-filler-words/)或[chartjunk](https://en.wikipedia.org/wiki/Chartjunk)的编程）。

考虑下面的解释性注释示例，它被普遍认为是不好的冗余，因为注释只是解释了代码已经表达的内容：

```
# Add one to the result
result = x + 1 
```

在 R 中使用`return`属于同一类别，因为 R 是一种[函数式编程语言](https://en.wikipedia.org/wiki/Functional_programming)，并且在 R 中**每个函数调用都有一个值**。这是 R 的一个*基本*属性。一旦你从每个表达式（包括每个函数调用）都有一个值的角度来看 R 代码，问题就会变成：“我为什么*要*使用`return`？” 需要有一个积极的理由，因为默认情况下不使用它。

一个这样的积极原因是发出提前退出函数的信号，例如在[保护子句](https://en.wikipedia.org/wiki/Guard_%28computer_science%29)中：

```
f = function (a, b) {
    if (! precondition(a)) return() # same as `return(NULL)`!
    calculation(b)
} 
```

这是对`return`. 然而，与其他语言相比，这样的保护子句在 R 中很少见，并且由于*每个*表达式都有一个值，因此正`if`则不需要`return`：

```
sign = function (num) {
    if (num > 0) {
        1
    } else if (num < 0) {
        -1
    } else {
        0
    }
} 
```

我们甚至可以这样重写`f`：

```
f = function (a, b) {
    if (precondition(a)) calculation(b)
} 
```

…`if (cond) expr`与 相同的地方`if (cond) expr else NULL`。

最后，我想先排除三个常见的反对意见：

1.  一些人认为 using`return`增加了清晰度，因为它表示“这个函数返回一个值”。但正如上面所解释的，*每个*函数都返回 R 中的某些内容。将`return`其视为返回值的标记不仅是多余的，而且还*具有误导性*。

2.  与此相关的是，Python之[*禅*](https://www.python.org/dev/peps/pep-0020/)有一个奇妙的指导方针，应该始终遵循：

    > 显式优于隐式。

    删除冗余如何不`return`违反这一点？因为函数式语言中函数的返回值总是明确的：它是它的最后一个表达式。这又是关于明确性*与*冗余性的相同论点。

    实际上，如果您想要明确性，请使用它来突出规则的例外情况：标记*不*返回有意义值的函数，这些函数仅因其副作用（例如`cat`）而被调用。除了 R 有比`return`这种情况更好的标记：[`invisible`](https://stat.ethz.ch/R-manual/R-devel/library/base/html/invisible.html). 例如，我会写

    ```
    save_results = function (results, file) {
        # … code that writes the results to a file …
        invisible()
    } 
    ```

3.  但是长函数呢？忘记退回的东西不是很容易吗？

    两个答案：首先，不是。规则很明确：函数的*最后一个表达式*就是它的值。没有什么可追踪的。

    但更重要的是，长函数的问题不在于缺少显式`return`标记。这是*函数的长度*。长函数几乎（？）总是违反[单一职责原则](https://en.wikipedia.org/wiki/Single_responsibility_principle)，即使它们不这样做，它们也会从为了可读性而被分解中受益。

* * *

## 回答 #6

> 赞同：14
> 
> 时间：2012-12-05T03:36:24.873

没有明确地将“return”放在末尾的一个问题是，如果在方法的末尾添加额外的语句，突然返回值是错误的：

```
foo <- function() {
    dosomething()
} 
```

这将返回 的值`dosomething()`。

现在我们第二天来并添加一个新行：

```
foo <- function() {
    dosomething()
    dosomething2()
} 
```

我们希望我们的代码返回 的值`dosomething()`，但它不再这样做了。

通过显式返回，这变得非常明显：

```
foo <- function() {
    return( dosomething() )
    dosomething2()
} 
```

我们可以看到这段代码有一些奇怪的地方，并修复它：

```
foo <- function() {
    dosomething2()
    return( dosomething() )
} 
```

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2013-10-28T21:48:54.590

我认为`return`这是一个诡计。作为一般规则，函数中计算的最后一个表达式的值成为函数的值——这种一般模式在许多地方都可以找到。以下所有评估为 3：

```
local({
1
2
3
})

eval(expression({
1
2
3
}))

(function() {
1
2
3
})() 
```

`return`所做的并不是真正*返回*一个值（无论有没有它都可以完成），而是以不规则的方式“突破”函数。从这个意义上说，它是 R 中最接近 GOTO 语句的等价物（还有 break 和 next）。我`return`很少使用，也从不在函数末尾使用。

```
 if(a) {
   return(a)
 } else {
   return(b)
 } 
```

...这可以重写为`if(a) a else b`可读性更好且花括号更少。`return`这里根本不需要。我使用“return”的典型案例类似于......

```
ugly <- function(species, x, y){
   if(length(species)>1) stop("First argument is too long.")
   if(species=="Mickey Mouse") return("You're kidding!")
   ### do some calculations 
   if(grepl("mouse", species)) {
      ## do some more calculations
      if(species=="Dormouse") return(paste0("You're sleeping until", x+y))
      ## do some more calculations
      return(paste0("You're a mouse and will be eating for ", x^y, " more minutes."))
      }
   ## some more ugly conditions
   # ...
   ### finally
   return("The end")
   } 
```

一般来说，多次退货的需求表明问题要么丑陋，要么结构不良。

[编辑]

`return`实际上并不需要一个函数来工作：您可以使用它来打破一组要评估的表达式。

```
getout <- TRUE 
# if getout==TRUE then the value of EXP, LOC, and FUN will be "OUTTA HERE"
# .... if getout==FALSE then it will be `3` for all these variables    

EXP <- eval(expression({
   1
   2
   if(getout) return("OUTTA HERE")
   3
   }))

LOC <- local({
   1
   2
   if(getout) return("OUTTA HERE")
   3
   })

FUN <- (function(){
   1
   2
   if(getout) return("OUTTA HERE")
   3
   })()

identical(EXP,LOC)
identical(EXP,FUN) 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2016-05-04T23:09:06.350

`return`可以增加代码的可读性：

```
foo <- function() {
    if (a) return(a)       
    b     
} 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2019-11-29T10:49:36.990

冗余的论点在这里出现了很多。在我看来，这还不足以省略`return()`. 冗余并不是一件坏事。当战略性地使用时，冗余使代码更清晰，更易于维护。

考虑这个例子：函数参数通常有默认值。所以指定一个与默认值相同的值是多余的。除了它使我期望的行为很明显。无需打开功能手册页来提醒自己默认值是什么。并且不用担心函数的未来版本会改变其默认值。

调用的性能损失可以忽略不计`return()`（根据其他人在此处发布的基准），它归结为风格而不是对与错。对于“错误”的事情，需要有一个明显的劣势，这里没有人令人满意地证明包含或省略`return()`具有一致的劣势。它似乎非常特定于案例和特定于用户。

所以这就是我的立场。

```
function(){
  #do stuff
  ...
  abcd
} 
```

我对上面示例中的“孤立”变量感到不舒服。`abcd`会成为我没有写完的声明的一部分吗？它是我的代码中拼接/编辑的残余物并且需要删除吗？我是否不小心从其他地方粘贴/移动了某些东西？

```
function(){
  #do stuff
  ...
  return(abdc)
} 
```

相比之下，第二个示例让我清楚地看到它是一个预期的返回值，而不是一些意外或不完整的代码。对我来说，这种冗余绝对不是无用的。

当然，一旦函数完成并工作，我可以删除返回。但是删除它本身就是一个多余的额外步骤，在我看来，这比`return()`首先包含它更没用。

综上所述，我不使用`return()`简而言之未命名的单行函数。在那里，它构成了函数代码的很大一部分，因此主要导致视觉混乱，使代码不那么清晰。但是对于更大的正式定义和命名的函数，我使用它并且可能会继续使用它。******

# ruby-on-rails - ROR 版本增强指南

> ID：11738824
> 
> 赞同：-1
> 
> 时间：2012-07-31T11:12:59.760
> 
> 标签：ruby-on-rails, rubygems

下面的环境是：

```
 RubyGems Environment:
      - RUBYGEMS VERSION: 1.3.7
      - RUBY VERSION: 1.8.7 (2009-06-08 patchlevel 173) [x86_64-linux]
      - INSTALLATION DIRECTORY: /home/something/ruby/gems
      - RUBY EXECUTABLE: /usr/bin/ruby
      - EXECUTABLE DIRECTORY: /home/something/ruby/gems/bin
      - RUBYGEMS PLATFORMS:
        - ruby
        - x86_64-linux
      - GEM PATHS:
         - /home/soemthing/ruby/gems
      - GEM CONFIGURATION:
         - :update_sources => true
         - :verbose => true
         - :benchmark => false
         - :backtrace => false
         - :bulk_threshold => 1000
         - "gempath" => ["/home/something/ruby/gems"]
         - "gem" => "--remote --gen-rdoc --run-tests"
         - :sources => ["http://rubygems.org/", "http://gems.github.com"]
         - "gemhome" => "/home/something/ruby/gems"
         - "rdoc" => "--inline-source --line-numbers"
      - REMOTE SOURCES:
         - http://rubygems.org/
         - http://gems.github.com 
```

**和 SUBSTRUCT 版本：1.3.1**

我需要将此版本增强到：
RUBY：1.9.3
RAILS：3.2.7
请指导一下我对现有系统的影响 谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T12:40:13.150

我相信你的问题太模糊了。

Ruby 1.9 发生了很多变化，我们对您的应用程序一无所知。另外，如果您从 Rails 2 升级，您将添加更多潜在错误。

您必须首先在开发机器上针对这些版本测试您的应用程序。使用 rbenv 或 rvm！

首先，看看这个幻灯片：[http ://slideshow.rubyforge.org/ruby19.html#1](http://slideshow.rubyforge.org/ruby19.html#1)

# symfony-2.1 - 在表单中调用 EntityManager

> ID：11738833
> 
> 赞同：0
> 
> 时间：2012-07-31T11:13:35.013
> 
> 标签：symfony-2.1

[我们可以使用实体字段类型](http://symfony.com/doc/current/reference/forms/types/entity.html)轻松自定义强大的 Symfony2 表单组件

```
use Doctrine\ORM\EntityRepository;
// ...

$builder->add('users', 'entity', array(
    'class' => 'AcmeHelloBundle:User',
    'query_builder' => function(EntityRepository $er) {
        return $er->createQueryBuilder('u')
            ->orderBy('u.username', 'ASC');
    },
)); 
```

有没有办法使用自定义 Entitymanager（在这种情况下为 UserManager）来注入方法？我在想，在长查询的情况下，选择使用 EntityManager 中的自定义方法可能会很有趣？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T07:08:07.613

每个表单都可以描述为服务容器中的服务，因此您可以指定来自任何其他服务的任何依赖项。我想说将查询封装在存储库/用户管理器中而不是内联使用它们是一个好主意。在这种情况下，Ihmo symfony 版本无关紧要。

# c# - 是否可以触发类似于“已过时”但含义不同的条件编译器警告？

> ID：11738834
> 
> 赞同：3
> 
> 时间：2012-07-31T11:13:35.597
> 
> 标签：c#, visual-studio-2010

我有一个只能由开发人员在特殊情况下使用的功能。

不幸的是，设置 public / private 并没有真正帮助，因为它需要在许多情况下可见才能使用。

我已经使用 xmldocs 记录了该函数，以向开发人员发出警告，但是是否可以输出编译器警告？也许使用属性，类似于将功能标记为过时？

或者，如果有人对引导人们远离危险方法有任何有用的架构建议（我猜这可能是单独的命名空间、继承等？）

* * *

附加细节

谢谢大家的回答，我有很多1+的:-)

它也帮助我澄清了我的问题：

[Obsolete("my message")] 在某些方面比#warning 更好，因为它只会在实际使用该方法时显示警告。然而，正如 ChrisF 指出的那样，它实际上并不是一种过时的方法，因此并不准确。

[Obsolete("my message")] 的功能之间是否存在中间立场但没有意义？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T11:16:17.013

您可以使用`#warning ...`

更多信息请访问[http://msdn.microsoft.com/en-us/library/963th5x3(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/963th5x3(v=vs.100).aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-31T11:16:31.480

在 Visual Studio 中，您可以像这样抛出错误和警告。

```
#warning This line is a compiled warning 
```

我不确定您是否可以有条件地执行此操作，但这会在编译时引发警告。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T11:16:53.873

使用[过时](http://msdn.microsoft.com/en-us/library/system.obsoleteattribute.aspx)属性：

```
[Obsolete("Please don't use this")]
public void DodgyMethod()
{
} 
```

> 任何尝试调用该方法的代码都会导致编译器发出警告。

虽然它在技术上不是一种过时的方法，但效果是一样的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-31T11:16:59.100

您应该添加`[Obsolete("Don't use this outside of whatever")]`到方法中。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-03-08T17:08:51.537

我认为解决此问题的最佳方法是编写一个小型 Roslyn Analyzer 并将其与您的库一起提供。这样，您可以生成自定义代码检查，并且还允许开发人员使用 Suppress 属性以适当的原因抑制您的警告。

可以在此处找到示例：[https](https://msdn.microsoft.com/magazine/dn879356.aspx) ://msdn.microsoft.com/magazine/dn879356.aspx 。

# apache-flex - 当 Flex 移动设备在纵向和横向之间切换时控制过渡

> ID：11738835
> 
> 赞同：2
> 
> 时间：2012-07-31T11:13:37.470
> 
> 标签：apache-flex, mobile

我正在使用 Flex 4.6 开发一个移动应用程序，并且我将 autoOrient 属性设置为 true，以便 Flex 在手机旋转时负责在纵向和横向模式之间进行切换。这行得通，但是...

纵向和横向之间的过渡包括应用程序从一个位置旋转到另一个位置，它看起来一点也不好看。我想让 Flex 只是在两个屏幕方向之间剪切或淡出*而不*旋转，但我找不到可以控制它的位置。

我的应用程序基于 ViewNavigatorApplication 如果这有助于回答。

我想我正在寻找的东西类似于在视图之间切换时可以拥有的那种控制，例如：

navigator.defaultPushTransition = new FlipViewTransition();

但与纵向/横向过渡有关。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T12:44:04.630

您可以侦听方向更改事件 ( `StageOrientationEvent.ORIENTATION_CHANGE`) 并设置到所需容器的转换。

# c# - 显示 SQL Select 语句的结果

> ID：11738836
> 
> 赞同：0
> 
> 时间：2012-07-31T11:13:39.563
> 
> 标签：c#, .net, sql, entity-framework-4

正确的问题我已经尝试排序好多年了！

我正在尝试显示 SQL 选择命令的结果并将此信息显示到我的视图中。我不能简单地使用 EntityFramework 来执行命令，因为我从 2 个不同的表中引入数据并显示为一个，这是为了报告。

这是我需要运行的 sql 命令。

```
select FirstName, LastName,
(select count(*) from Orders o where U.userID = o.CreatedByUserID and ProductID = 1) as ProductCount
from Users U
order by UserID 
```

我可以做些什么来运行这个命令吗？如果我不能直接运行 SQL，我愿意尝试 EntityFramwork 方法。

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T11:41:30.703

您*可以*使用 EF（或其他 ORM 解决方案）。订单和用户之间有明显的关系：`U.userID = o.CreatedByUserID`. 您可以只检索用户，然后访问`user.Orders.Count`以获取“缺失”值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T12:50:58.547

假设 ctx 是您的上下文尝试

```
var q=from u in ctx.users
      join x in ctx.orders.Where(y=>y.ProductID==1).GroupBy(y => y.CreatedByUserID) 
      on u.UserID equals x.Key into joined_orders
from o in joined_orders.DefaultIfEmpty()
select new {
        FirstName=u.FirstName, 
        LastName=u.LastName, 
        Count=o.Count()
      }; 
```

这假设您没有在模型中定义任何关系，否则您可以使用

```
var q=from u in ctx.users
      select new { 
        FirstName=u.FirstName,
        LastName=u.LastName,
        Count=o.Count(x=>x.ProductID==1)
       }; 
```

# php - 将图表生成到图像服务器端（嵌入到 PDF 中）的最简单方法？

> ID：11738840
> 
> 赞同：0
> 
> 时间：2012-07-31T11:13:50.580
> 
> 标签：php, charts, server-side

我正在使用`Highcharts.js`生成漂亮的图表，我正在尝试将这些图表嵌入到 PDF 中，因此需要将图表生成到图像完成服务器端的过程。

任何人都可以在不需要命令行的情况下建议最简单的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T12:34:02.477

您可以使用 JpGraph 通过 PHP 生成图形并保存为图像：http: [//jpgraph.net/](http://jpgraph.net/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-04T07:25:22.953

您可以使用 Docxpresso API 生成 PDF 或任何其他办公格式（PDF、ODT...），包括任何国王的图表。该 API 允许您一次性生成文档和图表。您不需要生成图表然后将其集成到文档中。该 API 可免费用于非商业用途，您可以使用 PHP 将其安装在任何服务器上。 [http://docxpresso.com/files/html52pdf.zip](http://docxpresso.com/files/html52pdf.zip)

# r - qpdf.exe 用于 compactPDF？

> ID：11738844
> 
> 赞同：22
> 
> 时间：2012-07-31T11:14:10.027
> 
> 标签：r

我正在尝试`R CMD check --as-cran [my package]`在我的 Windows 命令提示符中检查我已经构建（带有小插图）的包。一切顺利，直到我收到消息，

```
WARNING 'qpdf' is needed for checks on size reduction of PDFs 
```

我已经下载了qpdf，将解压后的文件夹放在我的程序文件目录中，并将bin文件夹添加到PATH中。

不太确定我还需要做什么？我感觉我没有正确安装 qpdf 或者我需要自己构建这个程序？我已经阅读了 qpdf 的自述文件和手册，这些文件似乎更针对 unix 用户（我对此没有经验……我是您的标准/常规 Windows 用户，除了统计语言之外几乎没有编程经验）。我曾尝试使用 cgywin 构建 qpdf，但最终未能安装 zlib 和 prec。有小费吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-31T20:10:02.187

我会尝试

```
Sys.which(Sys.getenv("R_QPDF", "qpdf"))
Sys.getenv("PATH") 
```

确定 R 确实没有找到`qpdf`可执行文件，并查看它在哪里寻找。您可能不需要重建所有内容，只需弄清楚为什么 R 找不到`qpdf`可执行文件...`qpdf`从终端窗口运行是否有效...？你是如何启动 R 的，它是否有机会获得新的 PATH 定义（即你是否需要打开一个新的终端窗口，或者？？重新启动？？）

上面的咒语是从Linux 机器上`tools::compactPDF`的参数的默认值中提取的。`qpdf`您应该自己检查，以防（例如）Windows 版本正在寻找`qpdf.exe`而不是`qpdf`...

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-11-11T11:56:59.560

在 Windows 机器上还有一些其他的事情需要考虑：

如果您运行的是 32 位版本的 R，请务必[下载](https://sourceforge.net/projects/qpdf/files/)32 位版本的 qpdf，这是从 SourceForge 主页链接的版本。如果您正在运行 R 的 64 位安装，则需要进行一些挖掘以找到 qpdf 的 64 位版本，该版本被埋得更深一些（[此处](https://sourceforge.net/projects/qpdf/files/qpdf/7.0.0/)列出了 7.0 版本）。

一旦您将压缩的 qpdf 目录解压缩到硬盘（可能位于 ）下`C:\Program Files\`，将其添加`C:\Program Files\qpdf-version_number\bin`到系统`PATH`的环境变量下，然后重新启动 R，Windows 需要确定 pqdf 可以安全运行。

导航`C:\Program Files\qpdf-version_numer\bin`并执行`qpdf.exe`（通过双击）。Windows 10 引发安全警告，因为它是一个无法识别的可执行文件。您需要使用*更多选项*链接来找到运行程序的按钮。完成此操作后，Windows 会将该文件识别为可以安全运行，并允许包括 R 在内的其他软件使用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-02-27T15:01:32.513

安装最新版本的 RTools 后，仍然弹出警告。但是，我注意到 Windows 的“where”命令提供了 qpdf 的两条路径（不同版本）。删除 R_QPDF 环境变量并从 Windows 路径中删除新安装的 qpdf 后，只找到 RTools 中的 qpdf，警告消失。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-03-01T15:21:19.687

最新动态：如果您安装`Rtools`3.5 qpdf，则该警告消失了。`Rtools`是用于在 Windows 上构建包的工具集，最近由 Jeroen Ooms 重新设计。

更多信息：[https ://cran.r-project.org/bin/windows/Rtools/](https://cran.r-project.org/bin/windows/Rtools/)

请注意，更改日志不完整，因为在撰写本文时 (2019-03-01) Rtools 3.5 尚未冻结。即使它在页面上尚不可见，但在安装后`qpdf.exe`包含在目​​录中。`bin`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-01-05T17:15:12.510

我在 Ubuntu 上得到了同样的警告，所以这里有一个 Ubuntu 解决方案来保证完整性：

第一个更新包

```
sudo apt update 
```

然后`qpdf`安装

```
sudo apt install qpdf 
```

在 Ubuntu 20.04 上测试。

# ios - 仪器无法在 Xcode 4.4 的真实 iOS 设备中运行 GUI 测试脚本

> ID：11738848
> 
> 赞同：3
> 
> 时间：2012-07-31T11:14:18.050
> 
> 标签：ios, xcode, instruments

在我将 Xcode 更新到 4.4 之前，我有一个运行良好的 UI 自动化脚本。但是在我将 Xcode 更新到 4.4 后，仪器在实际 iOS 设备上第二次运行后挂起（在模拟器上运行正常）。

有人有同样的问题并找到任何解决方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T21:24:57.563

我见过同样的行为。你甚至不需要脚本。您需要做的就是使用 Instruments 启动您的应用程序，停止录制并尝试再次开始录制。在 5.0.1 和 5.1.1 的 iPad 上运行应用程序时，我在 XCode 4.4 和 4.4.1 中看到了这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T16:51:52.147

我解决了这个问题。

这是解决方案：

我将 xcode 4.3.2 移到了垃圾箱，并且我的机器上只安装了 xcode 4.4.1。

这就像一颗宝石。

# c++ - 在主窗口中显示 QImage

> ID：11738850
> 
> 赞同：2
> 
> 时间：2012-07-31T11:14:20.650
> 
> 标签：c++, qt, user-interface, qpixmap, qlabel

我正在尝试使用 Qt 显示图像，我可以让它出现在单独的窗口中，但我不能让它出现在主窗口中

```
Qt_first w;
w.show(); 
```

这显示了我在 Qt 设计器中设计的窗口，如何访问我放在该窗口的 QWidget（centralWidget）中的 Qlabel（Image_Lbel）？

我生成了一个正确显示的条纹图像，只是不在正确的窗口内

```
QSize size = QSize(640,480);
QImage::Format format = QImage::Format_ARGB32;
QImage image = QImage::QImage(size, format);
//generate
QLabel myLabel;
myLabel.setPixmap(QPixmap::fromImage(image));
myLabel.show(); 
```

我觉得可能是我没有包含来自创建者或名称空间的文件，任何建议都非常感谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T11:30:45.403

我猜你`Label`正在独立显示。将标签的父级设置为主窗口。然后您的`Label`遗嘱将显示在您的主窗口中。

所以使用，

```
QLabel *myLabel = new QLabel(this); // sets parent of label to main window 
myLabel->setPixmap(QPixmap::fromImage(image));
myLabel->show(); 
```

您还可以使用[移动](http://qt-project.org/doc/qt-4.8/qwidget.html#pos-prop)功能在主窗口中移动标签。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T11:31:24.993

如果要从`Qt_first`类外部设置标签，则需要添加一个方法来执行此操作。例如（在 qt_first.cpp 中，相应地更改 qt_first.h）：

```
void Qt_first::setImageLabel(const QImage& image)
{
    ui->Image_Lble.setPixmap(QPixmap::fromImage(image));
} 
```

`ui`在此示例中是代表您使用 Qt Designer 创建的 UI 的对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T13:29:10.990

我使用了两个答案的组合，感谢两者

```
Qt_first w;  // the UI I made with Qt creator
QLabel *myLabel = w.getImageLabel();
myLabel->setPixmap(QPixmap::fromImage(image));
w.show(); 
```

在 Qt_first 类中包含以下内容

```
QLabel* Qt_first::getImageLabel(){  
    QLabel *myLabel = ui.Image_Label;
    return myLabel;
} 
```

# css - 未应用 css 边框半径

> ID：11738852
> 
> 赞同：0
> 
> 时间：2012-07-31T11:14:26.040
> 
> 标签：css

CSS 边框半径不适用于导航包装器。任何想法为什么？

[小提琴](http://jsfiddle.net/nDEmS/)

代码：

**HTML：**

```
<div class="navigation">
    <div><a href="">Home</a></div>
    <div><a href="">Products</a></div>
    <div><a href="">Services</a></div>
    <div><a href="">Support</a></div>
    <div><a href="">Contact</a></div>
</div>
<div style="clear:both;"></div> 
```

**CSS：**

```
.navigation {   
    position:relative;
    float:left;

    overflow:auto;

    -webkit-border-radius: 5px;
    -moz-border-radius: 5px;
    border-radius: 5px;
}

.navigation div {
    position:relative;
    float:left;

    background: #484745;

    height:53px;
    line-height: 53px;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T11:18:03.243

给. `background-color`_ `.navigation`像这样写：

```
.navigation {    
    background: #484745;
} 
```

检查这个：[**jsFiddle**](http://jsfiddle.net/nDEmS/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T11:27:18.267

问题在于你的背景。您的 div 的背景隐藏边框半径为`.navigation`. 只需添加背景`.navigation`（见[http://jsfiddle.net/nDEmS/18/](http://jsfiddle.net/nDEmS/18/)）

# sql - Microsoft Access 查询生成表 SQL

> ID：11738854
> 
> 赞同：1
> 
> 时间：2012-07-31T11:14:39.503
> 
> 标签：sql, ms-access

有人可以告诉我 Access SQL 中此语句中的 where 子句有什么问题吗

```
 SELECT * INTO [Enrolled Students]
    FROM [Candidate Details];
    Where Student ID  != 'rejected' OR 'pending' OR 'taster'; 
```

或者如果可能，是否可以将其更正为 IsNumeric(Student ID) 的位置？

我似乎无法弄清楚

多谢你们！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T11:15:51.163

```
SELECT * INTO [Enrolled Students]
    FROM [Candidate Details]
    Where [Student ID] not in( 'rejected', 'pending' ,'taster'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T11:15:41.343

在 MS Access 中

```
SELECT * INTO [Enrolled Students]
    FROM [Candidate Details]
    Where [Student ID]  Not IN ("rejected","pending","taster"); 
```

如果Student ID可以包含“rejected”，它似乎是一个文本字段。在这种情况下，Not In 更方便，否则您将不得不说：

```
Where [Student ID]  <> "rejected" And [Student ID] <> "pending" <...> 
```

# c++ - C++ 定义文件 (CPP) 中的函数扩展

> ID：11738857
> 
> 赞同：0
> 
> 时间：2012-07-31T11:14:55.237
> 
> 标签：c++

在 C++ 定义文件 (.cpp) 中，有时我可以定义要调用的小函数，例如：

```
// Class declaration 
// Myclass.h
Class Myclass
{
...
  void Classfunction();
...
}
// Class defination 
// Myclass.cpp
#include "Myclass.h"
...
void helper_fun()
{
 ...
}
...
void Myclass::Classfunction()
{
...
  helper_fun();
...
} 
```

在上面的示例中，我们可以看到 void helper_fun() 在 .cpp 文件中声明和定义。此函数的目的是由已在类中定义的函数调用。当然，helper_fun 可以先在头文件中声明，再在实现文件中定义。我的问题是这是否是 C++ 代码编写的好习惯。而且，这种做法会不会有一些不好的影响？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T11:19:06.357

`helper_fun`在源文件中的匿名命名空间中定义是一个好习惯。

像这样：

```
namespace {
    void helper_fun()
    {
        //...
    }
} 
```

原因是，如果`helper_fun`在另一个具有相同签名的源文件中定义了另一个，则链接错误不会有任何风险。这并不是说会有，而是可能会有一个。

此外，如果函数不会在相应的源文件之外使用，则不应将函数放在头文件中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T11:21:35.597

在源文件中有本地帮助函数是很常见的。通常它们被声明为`static`（例如`static void helper_fun() { }`）或在匿名名称空间中（例如`namespace { void helper_fun() { } }`）。

将函数设为静态或将它们放在匿名命名空间中是为了使它们无法从外部调用，这样您就可以拥有更多同名的本地函数。

但是，如果您想从其他源文件调用该函数，则正常定义该函数，并在头文件中添加声明。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T11:17:54.623

如果您需要将其公开，并通过头文件包含在其他文件中。然后放在那里。

否则没有理由让它出现在标题中。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-31T11:19:15.917

如果您`helper_fun`在标头中声明，它将对`Myclass.h`. 你想`helper_fun`在其他地方使用吗？

通过将其单独保存在`Myclass.cpp`您确保它只能由`Myclass.cpp`.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-31T11:20:07.197

当然在 .cpp 文件中声明函数是可以的。它是辅助函数，所以你不应该把它的声明给用户。您可以使用匿名命名空间进行内部链接（默认情况下，函数具有外部链接）。

> 未命名的命名空间或在未命名的命名空间中直接或间接声明的命名空间具有内部链接。

像这样

```
namespace
{
// helper_fun has internal linkage.
void helper_fun()
{
}

} 
```

# ajax - 如何只调用一次ajax

> ID：11738859
> 
> 赞同：11
> 
> 时间：2012-07-31T11:15:07.190
> 
> 标签：ajax, jquery

我从此代码调用函数：

```
 <div id="header-button-news" class="header-button-info">
        <a href="javascript:;" title="Новости" onclick="showNews()"></a>
        <div class="new">2</div>
    </div> 
```

我的功能是

```
function showNews()
{          
        //other js which show block 

        jQuery("#loader").show();

        //ajax which load content to block
        jQuery.ajax({
            type: "GET",
            url: link,
            dataType: "html",
            success: function(data) {
                jQuery('#top-info-news').html(data);   
            },
            complete: function(){
                jQuery('#loader').hide();
            },
        });
} 
```

我怎样才能只进行一次ajax调用？那么当内容被加载并且页面没有被重新加载时不加载ajax？我试图做布尔变量但什么也没做，我想这是因为我调用了每次函数。请给我一个想法如何做。

谢谢你

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-07-31T11:21:27.250

当您想对该事件做某事时。

确定您何时已加载数据。

```
var loaded = false;

function showNews() {
    //other js which show block 

    jQuery("#loader").show();

    if(loaded) return;

    //ajax which load content to block
    jQuery.ajax({
        type: "GET",
        url: link,
        dataType: "html",
        success: function(data) {
            jQuery('#top-info-news').html(data);   
        },
        complete: function(){
            jQuery('#loader').hide();
        },
    });

    loaded = true;
} 
```

或`one.`在您想调用一次时使用。

```
<a href="javascript:;" title="Новости" onclick="showNews()" class="showNews"></a>

jQuery('.showNews').one('click', function() {
    // your code
}); 
```

`"Attach a handler to an event for the elements. The handler is executed at most once per element."`

[参考](http://api.jquery.com/one/)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-07-31T11:21:33.843

使用[`.one()`](http://api.jquery.com/one/)功能：

> 将处理程序附加到元素的事件。每个元素最多执行一次处理程序。

```
<a href="#" title="Новости" id="shownews"></a> 
```

我已向`id`锚点添加了一个属性以允许更轻松地绑定，但您可以使用`$("#header-button-news a").one`

```
$(document).ready(function () {
  $('#shownews').one('click', function (evt) {

    evt.preventDefault(); // prevent default click action

    jQuery("#loader").show();
    //ajax which load content to block
    jQuery.ajax({
      type: "GET",
      url: link,
      dataType: "html",
      success: function (data) {
        jQuery('#top-info-news').html(data);
      },
      complete: function () {
        jQuery('#loader').hide();
      },
    });
  });
}); 
```

也用于[`event.preventDefault()`](http://api.jquery.com/event.preventDefault/)防止锚点上的默认动作被遵循

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T11:21:42.000

```
<div id="header-button-news" class="header-button-info">
    <a id="a_news" title="Новости"></a>
    <div class="new">2</div>
</div> 
```

在 JS 中：

```
$(function(){
    $('a#a_news').one('click',showNews);
}) 
```

# sql - 带有 IN 子句的 SQL Server 语句：如何使它们更快？

> ID：11738860
> 
> 赞同：1
> 
> 时间：2012-07-31T11:15:12.637
> 
> 标签：sql, sql-server, performance, query-optimization

我需要优化以下查询（表`group_attributes`）得到列`group_id`，`attribute_id`和`int_value`。

```
select  group_id 
from    group_attributes 
where   attribute_id= 1049 
        and int_value in (1247, 1248, 1249, 1250, 1251, 1252, 1253, 1254, 1255,
              1256, 1257, 1258, 1259, 1260, 1261, 1262, 1263, 1264, 
              1265, 1266, 1267, 1268, 1269, 1270, 1271) 
```

那`group_attributes`是一个巨大的表，查询需要永远。

我不是 SQL 方面的专家，所以我想知道哪个查询会更快？总的来说，这些`IN`查询似乎非常慢。

最好的，阿斯卡

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T11:40:53.983

解决方案 - 我

我认为您可以通过创建以下索引来提高性能。

1.  在 group_id 上创建聚集索引
2.  (attribute_id,int_value) 上的非聚集索引

解决方案 - II

您还可以将所有 int_values 插入临时表，然后在临时表上创建非聚集索引。还要在主表的 int_value 上创建非聚集索引。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T13:30:06.687

首先，将所需`int_values`的所有内容存储到 Temp 表并创建聚集索引。其次，将这个临时表与`group_attributes`表进行内部连接。

希望这将提供更好的性能。也请更新性能结果。

# c# - Silverlight TextBlock 没有绑定到 MVVM，我错过了什么？

> ID：11738862
> 
> 赞同：0
> 
> 时间：2012-07-31T11:15:18.117
> 
> 标签：c#, mvvm-light, silverlight-5.0

主页.xaml
`<TextBlock Text="{Binding Pathname, Source={StaticResource ViewModel}, Mode=OneWay}" />`

应用程序.xaml

```
<ResourceDictionary>
     <vm:InspectViewModel x:Key="ViewModel" />
</ResourceDictionary> 
```

视图模型

```
private string _pathname = null;
public string Pathname
{
    get { return _pathname; }
    set
    {
        if (_pathname != value)
        {
            _pathname = value;
            RaisePropertyChanged("Pathname");
        }
    }
}

public void UpdatePathname(string path)
{
    Pathname = path;
} 
```

主页代码隐藏

```
private void lazyNavTree_SelectedItemChanged(object sender, RoutedPropertyChangedEventArgs<object> e)  
{          
    InspectViewModel vm = new InspectViewModel();        
    var path = view.GetPath().ToArray();
    string pathname = null;
    // to figure out what the pathname is
    for (int i = 0; i < path.Count(); i++)
    {
        TreeList treeItem = (TreeList)path[i].Key;
        if (i == path.Count()-1)
            pathname = pathname + treeItem.Name;
        else
            pathname = pathname + treeItem.Name + " : ";
    }
    vm.UpdatePathname(pathname);
} 
```

绑定的 TextBlock 什么都不显示，nada，zip。路径名 shource 正在正确更改，但是当我在更改时触发 INotifyPropertyChanged 事件时似乎没有发生任何事情。

我确定我错过了一些非常明显的东西，但我不知道是什么！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T11:29:37.180

您正在创建 ViewModel 的 2 个实例：

*   在 App.xaml 中（在应用程序资源中，这是绑定到的实例）
*   在 MainPage 代码隐藏（`InspectViewModel vm = new InspectViewModel()`这是修改后的实例）

您应该使用 ViewModel 的单个实例，例如，

```
var vm = (InspectViewModel)Application.Current.Resources["ViewModel"]; 
```

而不是在 MainPage 代码隐藏中创建它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T11:31:41.770

这是因为您每次都在lazyNavTree_SelectedItemChanged 中从您的视图模型创建一个实例。你应该只使用一个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T11:27:57.477

看起来您只是错过了绑定中的[路径](http://msdn.microsoft.com/en-us/library/system.windows.data.binding.path.aspx)，请尝试；

```
Text="{Binding Path=Pathname, Source={StaticResource ViewModel}, Mode=OneWay}" 
```

编辑：显然这不是问题，但保留这个答案，因为 xhedgepigx 提供了一个有用的链接作为下面的评论。

# cakephp - CakePHP - 从同一视图写入 2 个数据库表

> ID：11738868
> 
> 赞同：0
> 
> 时间：2012-07-31T11:15:40.247
> 
> 标签：cakephp

我正在尝试编写一个小费用蛋糕应用程序。基本上我有一个有很多费用的费用索赔（费用属于费用索赔）。当您添加/编辑费用索赔时，我希望能够从该视图中为该费用索赔添加多项费用。有人能指出我正确的方向吗？

任何教程/示例代码将不胜感激。提前致谢

*使用蛋糕 2.1*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T11:22:12.953

投入费用索赔/添加：

```
$this->expenseClaim->Expense->create(); 
```

如果关系在模型中设置得很好，它应该可以工作。

如果不，

```
$this->loadModel('Expense');
 $this->Expense->create(); 
```

应该总是工作。

编辑：

```
$data=array
    (
        [Expense] => Array
        (
            [fieldname1] => 'value'
            [fieldname2] => 'value'
        )
    )

 $this->loadModel('Expense');
 $this->Expense->create();
            if ($this->Expense->save($data)) {
                $this->Session->setFlash(__('Done.'));

            } else {
                $this->Session->setFlash(__('Failure.'));
            } 
```

Edit2：如果你想从视图传递数据：

```
if ($this->request->is('post')) {
                    $this->loadModel('Expense');

        $this->Expense->create();
        if ($this->Expense->save($this->request->data)) {
            $this->Session->setFlash(__('Done.'));

        } else {
            $this->Session->setFlash(__('Failure'));
        }
    } 
```

如果您在视图中使用表单助手，则会自动创建请求。

# twitter-bootstrap - 在 Twitter 引导程序中为行添加背景颜色和填充

> ID：11738870
> 
> 赞同：10
> 
> 时间：2012-07-31T11:15:45.147
> 
> 标签：twitter-bootstrap, row, padding

我意识到 Twitter Bootstrap 中的填充已经完成得有些死了，我之前已经设法在一定程度上实现了它，但目前我坚持试图让我的三`span4`列很好地坐在填充的白色背景行上。

我尝试了各种方法来添加额外的、无语义的`div`但无济于事。

我努力了：

```
<div id="mydiv">

            <div class="wrap">

                <div class="row">

                    <div class="span4">
                        <ul>
                            <li>Random link</li>
                            <li>Random link</li>
                            <li>Random link</li>
                            <li>Random link</li>
                            <li>Random link</li>
                        </ul>
                    </div> <!-- .span4 -->

                    <div class="span4">
                        <ul>
                            <li>Random link</li>
                            <li>Random link</li>
                            <li>Random link</li>
                            <li>Random link</li>
                            <li>Random link</li>
                        </ul>
                    </div> <!-- .span4 -->

                    <div class="span4">
                        <ul>
                            <li>Random link</li>
                            <li>Random link</li>
                            <li>Random link</li>
                            <li>Random link</li>
                            <li>Random link</li>
                        </ul>
                    </div> <!-- .span4 -->

                </div> <!-- .row -->

            </div> <!-- wrap -->

        </div> <!-- mydiv --> 
```

并且：

```
<div id="mydiv" class="row">

            <div class="wrap">

                    <div class="span4">
                        <ul>
                            <li>Random link</li>
                            <li>Random link</li>
                            <li>Random link</li>
                            <li>Random link</li>
                            <li>Random link</li>
                        </ul>
                    </div> <!-- .span4 -->

                    <div class="span4">
                        <ul>
                            <li>Random link</li>
                            <li>Random link</li>
                            <li>Random link</li>
                            <li>Random link</li>
                            <li>Random link</li>
                        </ul>
                    </div> <!-- .span4 -->

                    <div class="span4">
                        <ul>
                            <li>Random link</li>
                            <li>Random link</li>
                            <li>Random link</li>
                            <li>Random link</li>
                            <li>Random link</li>
                        </ul>
                    </div> <!-- .span4 -->

            </div> <!-- wrap -->

        </div> <!-- mydiv --> 
```

“wrap” div 具有以下 CSS：

```
.wrap {
padding: 35px;
background-color: #F7F7F7;
border: 1px solid #DDD; 
```

}

但是每次，该行要么被推到下一行，要么根本不环绕内容。

我之前曾设法通过在行`div`后使用非语义来添加填充，但这一次，它似乎不起作用。

谁能指出我正确的方向？

谢谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-31T12:24:47.060

`div`与其为样式添加额外的样式，不如向该行添加另一种样式，例如`row-padded`，并相应地将新样式传递给它的子代。例如：

### CSS

```
.row-padded {
  padding: 35px;
  background-color: #F7F7F7;
  border: 1px solid #DDD;
}

.row-padded .span4 {
  background-color: #bbb;
  width: 30%;
} 
```

​</p>

### HTML

```
<div id="mydiv" class="container">

  <div class="row row-padded">

    <div class="span4">
      <ul>
        <li>Random link</li>
        <li>Random link</li>
        <li>Random link</li>
        <li>Random link</li>
        <li>Random link</li>
      </ul>
    </div> <!-- .span4 -->

    <div class="span4">
      <ul>
        <li>Random link</li>
        <li>Random link</li>
        <li>Random link</li>
        <li>Random link</li>
        <li>Random link</li>
      </ul>
    </div> <!-- .span4 -->

    <div class="span4">
      <ul>
        <li>Random link</li>
        <li>Random link</li>
        <li>Random link</li>
        <li>Random link</li>
        <li>Random link</li>
      </ul>
    </div> <!-- .span4 -->

  </div> <!-- .row -->

</div> <!-- container -->​ 
```

### [JSFiddle](http://jsfiddle.net/dXxLm/)

**注意：**您可能希望为宽度定义一个响应显式值（以 px 为单位），`.span4 .row-padded` **而**不仅仅是百分比宽度。为了简洁起见，我只使用了百分比。

# css - 在 Container 中定位子元素

> ID：11738877
> 
> 赞同：0
> 
> 时间：2012-07-31T11:16:21.367
> 
> 标签：css, html, positioning

我正在尝试这个：有一个图片元素被包裹在一个容器 div 中

```
<div id="container">
    <div id="a">
        <img src="b.jpg" alt="b" />
    </div>
</div> 
```

现在我想放置子元素，使图片的顶部和左侧始终是容器 div 的高度和宽度的 25%。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T11:21:25.253

如果这是唯一的要求，您可以通过在内部 div 上添加填充来实现。

根据 W3C，这些百分比应该是指外部 div 的尺寸。

> 与边距属性一样，填充属性的百分比值是指生成框的包含块的宽度

[http://www.w3.org/TR/CSS2/box.html](http://www.w3.org/TR/CSS2/box.html)

对于高度，只有当您的内部 div 是外部 div 内的唯一元素时它才会起作用（因为内部 div 将确定另一个的高度）。因此，以您为例，它会起作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T11:20:59.647

尝试这个：

```
#container {position: relative;}
#container #a {position: absolute; left: 25%; top: 25%;} 
```

这是一个工作小提琴：[**jsFiddle**](http://jsfiddle.net/xzw7C/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T11:23:05.230

尝试：

```
#container { position:relative; }
#container img { position:absolute; top:25%; left:25%; } 
```

**现场演示：[jsFiddle](http://jsfiddle.net/QCpXJ/)**

# join - 可选反向连接的级联删除

> ID：11738881
> 
> 赞同：0
> 
> 时间：2012-07-31T11:16:35.670
> 
> 标签：join, nhibernate, cascading-deletes, inverse, nhibernate-cascade

我们的实体类之一有以下简化映射：

```
 <class name="Parent" table="tParent">
    <id name="Id">
      <column name="ParentId" sql-type="bigint"/>
      <generator class="native"/>
    </id>
    <join table="tOneToOneComponent" optional="true" inverse="true">
      <key column="ParentId" on-delete="cascade"/>
      <property name="Someprop"/>
    </join>
  </class> 
```

基本上，它与关系另一端的外键是一对一的（这就是我们设置“逆”的原因）。此外，Parent 在 tOneToOneComponent 中可能没有任何记录（因此出现 optional="true"）。

我知道，不推荐这样的连接，但我们的系统有点老旧，我们没有时间重新设计它。

我们希望 NHibernate 在 Parent 被删除时删除相关的 tOneToOneComponent。

当然，我们可以在 SQL 服务器上级联删除操作，但是我们需要清除 NHibernate 缓存以确保 tOneToOneComponent 不会停留在缓存中的某个位置。

因此，我们将 on-delete="cascade" 添加到但现在当我们删除 Parent 时，SQL 说：

```
The DELETE statement conflicted with the REFERENCE constraint 
```

看来，NHibernate 正试图以错误的顺序删除记录。

**如何告诉 NHibernate 先删除 tOneToOneComponent （如果它存在），然后才删除父级？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T11:46:30.883

你想要的是被 Inverse() 覆盖的默认行为，它告诉它不能删除另一部分，因为它拥有自己。要么摆脱 Inverse() 要么以另一种方式处理删除。

# c# - 如何在 C# 中使用 windbase.h

> ID：11738882
> 
> 赞同：-3
> 
> 时间：2012-07-31T11:16:40.243
> 
> 标签：c#, pinvoke, edb

在谷歌上阅读了很长时间后，我仍然不知道如何在 C# 上使用这个 EDB [http://msdn.microsoft.com/en-us/library/aa912256 。](http://msdn.microsoft.com/en-us/library/aa912256)我阅读了很多关于包装器和 SWIG 解决方案的信息。但是如何包装windbase.h 中的函数。

我想在我的 c# 程序中制作 EDB。我可以从 <.h> 制作某种方式的 dll 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T13:14:55.587

经过一番努力，我认为现在尝试在 C# 中使用 windbase.h 并不是一个好主意。关于 P/invok 有很多有用的文章。只需将“从 C# 调用非托管 DLL”写到 google。对我来说最好的之一是：

[http://msdn.microsoft.com/en-us/magazine/cc301501.aspx](http://msdn.microsoft.com/en-us/magazine/cc301501.aspx)

但是因为我们的非托管函数需要一个结构体作为参数，所以该结构体需要在托管代码和非托管代码中定义。换句话说，需要将所有结构、常量和内容重写为 c#。而且windbase_edb.h、winnt.h、windef.h、winbase.h还有其他的依赖...

从我的角度来看，这太难了。或者它可以以不同的方式完成？

# c# - c#字符串条件在这里不起作用

> ID：11738887
> 
> 赞同：-1
> 
> 时间：2012-07-31T11:17:06.440
> 
> 标签：c#

我有一些电子邮件帐户处于 if 条件并做出一些简单的决定，但这不适用于我请帮我找出问题。这是我的代码

```
 if (!this.IsPostBack)
            {
                if ((lblemail.Text.Equals("ali.saleem@shakarganj.com.pk")) || (lblemail.Text.Equals("altaf.saleem@shakarganj.com.pk")) || (lblemail.Text.Equals("anjum.saleem@shakarganj.com.pk")) || (lblemail.Text.Equals("ibrahim.cheema@shakarganj.com.pk")) || (lblemail.Text.Equals("malik.adeel@shakarganj.com.pk")))
                {
                    GridView2.Visible = true;
                    GridView1.Visible = false;
                }
                else
                {
                    GridView1.Visible = true;
                    GridView2.Visible = false;
                }
            } 
```

在这里，我想以一种简单而适当的方式来处理我的要求，请帮助我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T11:20:11.127

不应该是“tbEmail”（或类似的东西）而不是“lblemail”？lblemail.Text 的值是多少？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T11:20:32.307

制作`List<string>`所有电子邮件地址并执行如下检查：

```
List<string> emailAddresses = CreateList();
if(emailAddresses.Contains(lblemail.Text))
{
      // Whatever you need to do
}
else
{
      // do the other thing
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T11:21:30.987

一切看起来都不错。也许问题是由于大写或修剪造成的？试试这个：

```
if ((lblemail.Text.ToLower().Trim().Equals("ali.saleem@shakarganj.com.pk")) || 
    (lblemail.Text.ToLower().Trim().Equals("altaf.saleem@shakarganj.com.pk")) ||    
    (lblemail.Text.ToLower().Trim().Equals("anjum.saleem@shakarganj.com.pk")) || 
    (lblemail.Text.ToLower().Trim().Equals("ibrahim.cheema@shakarganj.com.pk")) || 
    (lblemail.Text.ToLower().Trim().Equals("malik.adeel@shakarganj.com.pk")))
{
    GridView2.Visible = true;
    GridView1.Visible = false;
} 
```

# asp.net - 将操作链接更改为图像

> ID：11738893
> 
> 赞同：0
> 
> 时间：2012-07-31T11:17:40.647
> 
> 标签：asp.net, asp.net-mvc, razor

我如何将操作链接更改`@Html.ActionLink("Edit", "Edit", new { id=item.id_tache })`为图像。我刚开始使用asp .net mvc。（我想显示图像而不是文本）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T11:19:24.733

您需要建立一个常规链接：

```
<a href="@Url.Action(...)"><img src="Url.Content("~/...")" alt="..." /></a> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T11:23:35.560

这是一个小技巧

```
@Html.ActionLink("Button Name", "Index", null, new { @class="classname" }) 
```

然后在您的样式表中创建一个类

```
a.classname
{
 background: url(../Images/image.gif) no-repeat top left;
 display: block;
 text-indent: -9999px; /* hides the link text */
 } 
```

# c++ - 这些是堆栈分配还是堆分配？

> ID：11738895
> 
> 赞同：1
> 
> 时间：2012-07-31T11:17:41.463
> 
> 标签：c++, memory-management, heap-memory, stack-memory

> **可能重复：**
> [这种类型的内存是在堆还是栈上分配的？](https://stackoverflow.com/questions/426737/does-this-type-of-memory-get-allocated-on-the-heap-or-the-stack)

```
class foo{
private:
int bar;
constructors and other members here...
} 
```

如果我创建一个`foo`使用 new 运算符的实例，它将在哪里创建？

我猜是堆，但我在哪里`int bar;`创建，堆栈或堆？

如果 my`bar`不是原始数据类型，而是创建的另一个对象，例如`this->bar=bar();`，它将在哪里创建？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T11:18:29.010

由于您已经`foo`在堆中创建了所有成员变量原始/非原始变量也将在堆中。

情况1：

```
Foo *obj = new Foo(); 
```

条在堆上：

案例二：

```
Foo obj ; 
```

条在堆栈上：

根据标准

> 3.7.4 子对象的持续时间 [basic.stc.inherit]
> 
> 成员子对象、基类子对象和数组元素的存储时间是它们完整对象的存储时间（1.8）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T11:23:26.307

阅读有关如何在内存中构造类实例的信息。**[这里简单解释](http://tnvbalaji.com/2011/09/19/memory-layout-of-a-class-c-object/)**。

成员是内存中类实例块的一部分。因此，无论何时分配该类实例，都会分配整个块，包括成员。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T11:23:53.967

任何自动（不是用创建的`new`）对象/值都是在其容器对象内创建的。如果它们是独立的，则在堆栈中创建它们。

在这种情况下，`bar`将在其容器对象内创建，这是`foo`在堆中创建的实例。所以`bar`将进入`foo`实例内部的堆。

# php - Paypal Adaptive Payments 在沙盒模式下工作，但不适用于生产

> ID：11738896
> 
> 赞同：8
> 
> 时间：2012-07-31T11:17:42.797
> 
> 标签：php, paypal, paypal-adaptive-payments

我正在尝试使用 Paypal 的自适应支付 API，并且很难将其切换到生产环境。在沙盒模式下一切正常，我得到了正确的响应，但是当我切换到我的实时 APP ID 时，它不起作用。

这些是我用于沙盒的配置值

```
PayPal URL : https://www.sandbox.paypal.com/webapps/adaptivepayment/flow/pay?paykey=[TOKEN_HERE]
Application ID : APP-80W284485P519543T 
```

这些值在沙盒模式下对我有用。但是当我切换到以下生产值时，它会停止工作

```
PayPal URL : https://www.paypal.com/webapps/adaptivepayment/flow/pay?paykey=[TOKEN_HERE]
Application ID : [ACTUAL APP ID]

This is what I mean by stops working. 
```

*   在生产模式下，应用程序获取支付密钥
*   将其附加到 Paypal URL，然后将其重定向到他们的站点
*   在站点加载时，我收到以下消息

```
This transaction has already been approved. Please visit your PayPal Account Overview to see the details 
```

它最终到达的最终 URL -`https://ic.paypal.com/webapps/adaptivepayment/flow/payinit?execution=e6s1`

截图 - [http://screencast.com/t/28qJZ9CIk](http://screencast.com/t/28qJZ9CIk)

那里还有一个“返回”按钮，当我点击它时，我每次都会被带到不同的站点（看起来我被发送到随机的 failUrls）

我在下面包含了我使用的代码

```
$payRequest = new PayRequest();
$payRequest->actionType     = "PAY";
$payRequest->cancelUrl      = $cancelURL; //my success and fail urls
$payRequest->returnUrl      = $returnURL;

$payRequest->clientDetails  = new ClientDetailsType();
$payRequest->clientDetails->applicationId   = $this->config['application_id'];
$payRequest->clientDetails->deviceId        = $this->config['device_id'];
$payRequest->clientDetails->ipAddress       = $this->CI->input->ip_address();

$payRequest->currencyCode = $currencyCode;

$payRequest->requestEnvelope = new RequestEnvelope();
$payRequest->requestEnvelope->errorLanguage = "en_US";

//I set the receiver and the amounts. I also define that these are digital goods payments       
$receiver1 = new receiver();
$receiver1->email   = $opts['receiver_email'];
$receiver1->amount  = $opts['amount'];
$receiver1->paymentType = 'DIGITALGOODS';
$payRequest->receiverList = new ReceiverList();
$payRequest->receiverList = array($receiver1);

//Then I make the call
$ap          = new AdaptivePayments();
$response    = $ap->Pay($payRequest);

if(strtoupper($ap->isSuccess) == 'FAILURE') {
    log_message('error', "PAYMENT_FAIL : " . print_r($ap->getLastError(), true));
    return false;
} else {
    if($response->paymentExecStatus == "COMPLETED")  {
        header("Location: " . $this->config['success_url']);
        exit;
    } else {
        $token      = $response->payKey;
        $payPalURL  = $this->config['paypal_redirect_url'] . 'paykey='.$token;
        header("Location: ".$payPalURL);
        exit;
    }
} 
```

这是从他们的示例实现中获取的代码，所以不太确定这里出了什么问题。其他可能相关的信息

*   我正在使用自适应支付来确保发送者和接收者确实进行了交易

*   我已将付款类型设置为“数字商品”

**编辑**

我提供了一个附有支付密钥的示例 URL

```
https://www.paypal.com/webapps/adaptivepayment/flow/pay?paykey=AP-0H388650F08226841 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T18:37:23.060

我发现了让我感到悲伤的问题。

Paypal SDK 使用了几个定义在`/sdk/lib/Config/paypal_sdk_clientproperties`

常量包含用户名、密码、application_id、API url 和其他一些。这些直接在文件中使用`/sdk/lib/CallerServices,php`。因此，与您在 API 中所期望的相反，这些值不会在设置阶段注入，因此如果您没有注意到该文件并更改值，上述代码将不起作用。

要解决此问题，只需更新文件中定义的值即可。

# visual-studio-2010 - 如何以编程方式获得测试结果？

> ID：11738902
> 
> 赞同：0
> 
> 时间：2012-07-31T11:18:01.437
> 
> 标签：visual-studio-2010, mstest

我正在使用 Visual Studio 代理在我自己的开发人员机器（测试控制器）上的远程测试服务器（测试代理）上运行 VS 编码的 UI 测试。

在本地运行测试时，我能够访问和读取测试完成后创建的 TRX 结果文件，但我无法在远程测试服务器上访问该文件，因为 TRX 结果文件保留在 Visual Studio 文件夹中测试控制器。

我想以编程方式访问结果文件的原因是我有代码来读取文件，然后将结果作为自动电子邮件发送出去。

那么，有没有办法以编程方式获得测试结果，以便我可以自动发送结果电子邮件？

理想情况下，我可以从测试服务器访问 TRX 结果文件，但我不确定这是否可行或可能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-25T16:46:12.123

如果您在负载测试中运行编码的 ui，则可以将其设置为写入 LoadTest2010 数据库。从那里您可以设置获取结果和触发事件的方法，就像使用任何数据库一样。

# android - 如何减小android中的复选框大小？

> ID：11738905
> 
> 赞同：1
> 
> 时间：2012-07-31T11:18:06.643
> 
> 标签：android

我以编程方式创建了一个复选框，它显示得很好。有没有减少复选框宽度和高度的选项？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-31T11:32:45.157

尝试关注::

```
CheckBox chkBox = new CheckBox(this);
chkBox.setId(++myid);

//  AS  FOLLOWING, YOU SET SIZE
RelativeLayout.LayoutParams chkBoxParams = new RelativeLayout.LayoutParams(
    LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
    //      OR    int  width,  int hieght);

chkBox.setLayoutParams(chkBoxParams);
chkBox.setGravity(Gravity.CENTER);
chkBox.setTextColor(Color.BLACK);
//chkBox.setTextSize(TypedValue.COMPLEX_UNIT_DIP, 15);
chkBox.setText("Scroll Test");
Your_Main_View_Holder_Layout.addView(chkBox); 
```

# java - 使用 gridbaglayout 迭代地添加组件？

> ID：11738912
> 
> 赞同：1
> 
> 时间：2012-07-31T11:18:23.050
> 
> 标签：java, swing, gridbaglayout

我想在 for 循环中使用 gridbaglayout 来布置固定大小的静态不可编辑网格。但是，当我这样做时，我什么也得不到。这是我作为 SSCEE 的第一次尝试：

```
import java.awt.Color;
import java.awt.GridBagConstraints;
import java.awt.GridBagLayout;

import javax.swing.BorderFactory;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.SwingUtilities;

class ViewManager extends JFrame{

private static final long serialVersionUID = 1L;
private NewCharacterVitalsPane myNewCharacterVitalsPane = null;

public ViewManager(){
    super("Tony Larp DB Manager");
    this.setVisible(true);
    this.setDefaultCloseOperation(3);
    myNewCharacterVitalsPane = new NewCharacterVitalsPane();
    this.getContentPane().add(myNewCharacterVitalsPane);
    this.pack();        
}
static class Util {
    static private ViewManager viewManager = null;
    static public synchronized ViewManager getInstance() {
        if (viewManager == null) {
            viewManager = new ViewManager();
        }
        return viewManager;
    }
}
}

public class Launcher {

public static void main(String[] args) 
{
    SwingUtilities.invokeLater(new Runnable(){
        public void run(){
            ViewManager.Util.getInstance();
        }
    });
}
}

class NewCharacterVitalsPane extends JPanel{

private static final long serialVersionUID = 1962802485168533544L;
String locations[] = {"H","Ch","Ra","La","Rl","Ll"};
int armour[] = {0,0,0,0,10,0};
int life = 30;

/*subPanes*/
JPanel battleBoardPane = new JPanel();

public NewCharacterVitalsPane (){
    addSubPanes();
    drawBattleBoard();
}
private void addSubPanes() {
    this.setLayout(new GridBagLayout());
    GridBagConstraints SPgbc = new GridBagConstraints();
    SPgbc.fill = GridBagConstraints.BOTH;

    SPgbc.gridx = 0;
    SPgbc.gridy = 1;
    SPgbc.gridheight = 2;
    SPgbc.ipadx = 100;
    SPgbc.ipady = 180;
    battleBoardPane.setBorder(BorderFactory.createLineBorder(Color.black));
    add(battleBoardPane,SPgbc);
}

private void drawBattleBoard(){
    this.setLayout(new GridBagLayout());
    GridBagConstraints BBgbc = new GridBagConstraints();
    BBgbc.gridx=0;BBgbc.gridy=0;
    for (String location:locations){
        JLabel locLabel = new JLabel(location+": ");
        BBgbc.gridy++; battleBoardPane.add(locLabel,BBgbc);
    }
}
} 
```

目前它只是连续显示所有标签，而不是一个接一个。为什么会这样，我怎样才能得到我想要的行为？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T11:30:59.723

将 Layoutmanager 设置`battleBoardPane`为`GridbagLayout`。
（据我所知，默认情况下`FlowLayout`它不会从包含窗格中“继承”它。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T09:41:46.520

第一个答案是正确的，但是您进行了错误的代码更新。

代替`this.setLayout(new GridBagLayout());`

在`drawBattleBoard()`方法的第一行

你必须写

`battleBoardPane.setLayout(new GridBagLayout());`

# java - java.lang.ClassNotFoundException引起的钝化错误：org.jboss.wsf.spi.serviceref.ServiceRefMetaData

> ID：11738916
> 
> 赞同：0
> 
> 时间：2012-07-31T11:18:29.763
> 
> 标签：java, jboss

我们有一个运行良好的有状态会话 bean。有状态会话 bean 具有以下注释：

```
@Stateful
@SerializedConcurrentAccess
@Scope(ScopeType.SESSION)
@Name("XXXSession")
@Interceptors(SeamInterceptor.class) 
```

当超时（在 ejb3-interceptors-aop.xml 中定义）时，会话 bean 会被钝化。但是钝化过程失败了，我们收到了以下堆栈跟踪。我想深入调试它，但我不知道从哪里开始。我想我们看不到实际的异常，但我怎么能看到出了什么问题？

所以我不是在寻找关于 ClassNotFoundException 的答案。作为开发人员，我们做错了什么，但我正在寻找一种方法来找出我到底做错了什么。因为异常确实让人很难找出问题所在...... :-(

我正在使用 JBoss 6.1.0.Final（在 Mac OS X 10.7 和 Java 1.6 上运行）

```
org.jboss.serial.objectmetamodel.ObjectDescriptorFactory.describeObject(ObjectDescriptorFactory.java:276)
2012-07-18 17:06:19,080 错误 [STDERR]（SFSB 钝化线程 - jboss.j2ee:ear=XXX.ear,jar=XXX-YYY.jar,name=XXXSessionBean,service=EJB3）在 org.jboss。 serial.objectmetamodel.DataContainer$DataContainerDirectOutput.writeObject(DataContainer.java:206)
2012-07-18 17:06:19,080 错误 [STDERR]（SFSB 钝化线程 - jboss.j2ee:ear=XXX.ear,jar=XXX-YYY.jar,name=XXXSessionBean,service=EJB3）在 org.jboss。 serial.persister.RegularObjectPersister.writeSlotWithFields（RegularObjectPersister.java:182）
2012-07-18 17:06:19,080 错误 [STDERR]（SFSB 钝化线程 - jboss.j2ee:ear=XXX.ear,jar=XXX-YYY.jar,name=XXXSessionBean,service=EJB3）在 org.jboss。 serial.persister.RegularObjectPersister.defaultWrite（RegularObjectPersister.java:90）
2012-07-18 17:06:19,081 错误 [STDERR]（SFSB 钝化线程 - jboss.j2ee:ear=XXX.ear,jar=XXX-YYY.jar,name=XXXSessionBean,service=EJB3）在 org.jboss。 serial.persister.RegularObjectPersister.writeData（RegularObjectPersister.java:62）
2012-07-18 17:06:19,081 错误 [STDERR]（SFSB 钝化线程 - jboss.j2ee:ear=XXX.ear,jar=XXX-YYY.jar,name=XXXSessionBean,service=EJB3）在 org.jboss。 serial.objectmetamodel.ObjectDescriptorFactory.describeObject(ObjectDescriptorFactory.java:276)
2012-07-18 17:06:19,081 错误 [STDERR]（SFSB 钝化线程 - jboss.j2ee:ear=XXX.ear,jar=XXX-YYY.jar,name=XXXSessionBean,service=EJB3）在 org.jboss。 serial.objectmetamodel.DataContainer$DataContainerDirectOutput.writeObject(DataContainer.java:206)
2012-07-18 17:06:19,081 错误 [STDERR]（SFSB 钝化线程 - jboss.j2ee:ear=XXX.ear,jar=XXX-YYY.jar,name=XXXSessionBean,service=EJB3）在 org.jboss。 serial.persister.RegularObjectPersister.writeSlotWithFields（RegularObjectPersister.java:182）
2012-07-18 17:06:19,081 错误 [STDERR]（SFSB 钝化线程 - jboss.j2ee:ear=XXX.ear,jar=XXX-YYY.jar,name=XXXSessionBean,service=EJB3）在 org.jboss。 serial.persister.RegularObjectPersister.defaultWrite（RegularObjectPersister.java:90）
2012-07-18 17:06:19,081 错误 [STDERR]（SFSB 钝化线程 - jboss.j2ee:ear=XXX.ear,jar=XXX-YYY.jar,name=XXXSessionBean,service=EJB3）在 org.jboss。 serial.persister.RegularObjectPersister.writeData（RegularObjectPersister.java:62）
2012-07-18 17:06:19,081 错误 [STDERR]（SFSB 钝化线程 - jboss.j2ee:ear=XXX.ear,jar=XXX-YYY.jar,name=XXXSessionBean,service=EJB3）在 org.jboss。 serial.objectmetamodel.ObjectDescriptorFactory.describeObject(ObjectDescriptorFactory.java:276)
2012-07-18 17:06:19,081 错误 [STDERR]（SFSB 钝化线程 - jboss.j2ee:ear=XXX.ear,jar=XXX-YYY.jar,name=XXXSessionBean,service=EJB3）在 org.jboss。 serial.objectmetamodel.DataContainer$DataContainerDirectOutput.writeObject(DataContainer.java:206)
2012-07-18 17:06:19,081 错误 [STDERR]（SFSB 钝化线程 - jboss.j2ee:ear=XXX.ear,jar=XXX-YYY.jar,name=XXXSessionBean,service=EJB3）在 org.jboss。 serial.persister.RegularObjectPersister.writeSlotWithFields（RegularObjectPersister.java:182）
2012-07-18 17:06:19,081 错误 [STDERR]（SFSB 钝化线程 - jboss.j2ee:ear=XXX.ear,jar=XXX-YYY.jar,name=XXXSessionBean,service=EJB3）在 org.jboss。 serial.persister.RegularObjectPersister.defaultWrite（RegularObjectPersister.java:90）
2012-07-18 17:06:19,081 错误 [STDERR]（SFSB 钝化线程 - jboss.j2ee:ear=XXX.ear,jar=XXX-YYY.jar,name=XXXSessionBean,service=EJB3）在 org.jboss。 serial.persister.RegularObjectPersister.writeData（RegularObjectPersister.java:62）
2012-07-18 17:06:19,081 错误 [STDERR]（SFSB 钝化线程 - jboss.j2ee:ear=XXX.ear,jar=XXX-YYY.jar,name=XXXSessionBean,service=EJB3）在 org.jboss。 serial.objectmetamodel.ObjectDescriptorFactory.describeObject(ObjectDescriptorFactory.java:276)
2012-07-18 17:06:19,081 错误 [STDERR]（SFSB 钝化线程 - jboss.j2ee:ear=XXX.ear,jar=XXX-YYY.jar,name=XXXSessionBean,service=EJB3）在 org.jboss。 serial.objectmetamodel.DataContainer$DataContainerDirectOutput.writeObject(DataContainer.java:206)
2012-07-18 17:06:19,081 错误 [STDERR]（SFSB 钝化线程 - jboss.j2ee:ear=XXX.ear,jar=XXX-YYY.jar,name=XXXSessionBean,service=EJB3）在 org.jboss。 serial.persister.RegularObjectPersister.writeSlotWithFields（RegularObjectPersister.java:182）
2012-07-18 17:06:19,081 错误 [STDERR]（SFSB 钝化线程 - jboss.j2ee:ear=XXX.ear,jar=XXX-YYY.jar,name=XXXSessionBean,service=EJB3）在 org.jboss。 serial.persister.RegularObjectPersister.defaultWrite（RegularObjectPersister.java:90）
2012-07-18 17:06:19,081 错误 [STDERR]（SFSB 钝化线程 - jboss.j2ee:ear=XXX.ear,jar=XXX-YYY.jar,name=XXXSessionBean,service=EJB3）在 org.jboss。 serial.persister.RegularObjectPersister.writeData（RegularObjectPersister.java:62）
2012-07-18 17:06:19,082 错误 [STDERR]（SFSB 钝化线程 - jboss.j2ee:ear=XXX.ear,jar=XXX-YYY.jar,name=XXXSessionBean,service=EJB3）在 org.jboss。 serial.objectmetamodel.ObjectDescriptorFactory.describeObject(ObjectDescriptorFactory.java:276)
2012-07-18 17:06:19,082 错误 [STDERR]（SFSB 钝化线程 - jboss.j2ee:ear=XXX.ear,jar=XXX-YYY.jar,name=XXXSessionBean,service=EJB3）在 org.jboss。 serial.objectmetamodel.DataContainer$DataContainerDirectOutput.writeObject(DataContainer.java:206)
2012-07-18 17:06:19,082 错误 [STDERR]（SFSB 钝化线程 - jboss.j2ee:ear=XXX.ear,jar=XXX-YYY.jar,name=XXXSessionBean,service=EJB3）在 org.jboss。 serial.persister.RegularObjectPersister.writeSlotWithFields（RegularObjectPersister.java:182）
2012-07-18 17:06:19,082 错误 [STDERR]（SFSB 钝化线程 - jboss.j2ee:ear=XXX.ear,jar=XXX-YYY.jar,name=XXXSessionBean,service=EJB3）在 org.jboss。 serial.persister.RegularObjectPersister.defaultWrite（RegularObjectPersister.java:90）
2012-07-18 17:06:19,082 错误 [STDERR]（SFSB 钝化线程 - jboss.j2ee:ear=XXX.ear,jar=XXX-YYY.jar,name=XXXSessionBean,service=EJB3）在 org.jboss。 serial.persister.RegularObjectPersister.writeData（RegularObjectPersister.java:62）
2012-07-18 17:06:19,082 错误 [STDERR]（SFSB 钝化线程 - jboss.j2ee:ear=XXX.ear,jar=XXX-YYY.jar,name=XXXSessionBean,service=EJB3）在 org.jboss。 serial.objectmetamodel.ObjectDescriptorFactory.describeObject(ObjectDescriptorFactory.java:276)
2012-07-18 17:06:19,082 错误 [STDERR]（SFSB 钝化线程 - jboss.j2ee:ear=XXX.ear,jar=XXX-YYY.jar,name=XXXSessionBean,service=EJB3）在 org.jboss。 serial.objectmetamodel.DataContainer$DataContainerDirectOutput.writeObject(DataContainer.java:206)
2012-07-18 17:06:19,082 错误 [STDERR]（SFSB 钝化线程 - jboss.j2ee:ear=XXX.ear,jar=XXX-YYY.jar,name=XXXSessionBean,service=EJB3）在 org.jboss。 serial.persister.RegularObjectPersister.writeSlotWithFields（RegularObjectPersister.java:182）
2012-07-18 17:06:19,082 错误 [STDERR]（SFSB 钝化线程 - jboss.j2ee:ear=XXX.ear,jar=XXX-YYY.jar,name=XXXSessionBean,service=EJB3）在 org.jboss。 serial.persister.RegularObjectPersister.defaultWrite（RegularObjectPersister.java:90）
2012-07-18 17:06:19,082 错误 [STDERR]（SFSB 钝化线程 - jboss.j2ee:ear=XXX.ear,jar=XXX-YYY.jar,name=XXXSessionBean,service=EJB3）在 org.jboss。 serial.persister.RegularObjectPersister.writeData（RegularObjectPersister.java:62）
2012-07-18 17:06:19,082 错误 [STDERR]（SFSB 钝化线程 - jboss.j2ee:ear=XXX.ear,jar=XXX-YYY.jar,name=XXXSessionBean,service=EJB3）在 org.jboss。 serial.objectmetamodel.ObjectDescriptorFactory.describeObject(ObjectDescriptorFactory.java:276)
2012-07-18 17:06:19,082 错误 [STDERR]（SFSB 钝化线程 - jboss.j2ee:ear=XXX.ear,jar=XXX-YYY.jar,name=XXXSessionBean,service=EJB3）在 org.jboss。 serial.objectmetamodel.DataContainer$DataContainerDirectOutput.writeObject(DataContainer.java:206)
2012-07-18 17:06:19,082 错误 [STDERR]（SFSB 钝化线程 - jboss.j2ee:ear=XXX.ear,jar=XXX-YYY.jar,name=XXXSessionBean,service=EJB3）在 org.jboss。 serial.persister.RegularObjectPersister.writeSlotWithFields（RegularObjectPersister.java:182）
2012-07-18 17:06:19,082 错误 [STDERR]（SFSB 钝化线程 - jboss.j2ee:ear=XXX.ear,jar=XXX-YYY.jar,name=XXXSessionBean,service=EJB3）在 org.jboss。 serial.persister.RegularObjectPersister.defaultWrite（RegularObjectPersister.java:90）
2012-07-18 17:06:19,082 错误 [STDERR]（SFSB 钝化线程 - jboss.j2ee:ear=XXX.ear,jar=XXX-YYY.jar,name=XXXSessionBean,service=EJB3）在 org.jboss。 serial.persister.RegularObjectPersister.writeData（RegularObjectPersister.java:62）
2012-07-18 17:06:19,082 错误 [STDERR]（SFSB 钝化线程 - jboss.j2ee:ear=XXX.ear,jar=XXX-YYY.jar,name=XXXSessionBean,service=EJB3）在 org.jboss。 serial.objectmetamodel.ObjectDescriptorFactory.describeObject(ObjectDescriptorFactory.java:276)
2012-07-18 17:06:19,082 错误 [STDERR]（SFSB 钝化线程 - jboss.j2ee:ear=XXX.ear,jar=XXX-YYY.jar,name=XXXSessionBean,service=EJB3）在 org.jboss。 serial.objectmetamodel.DataContainer$DataContainerDirectOutput.writeObject(DataContainer.java:206)
2012-07-18 17:06:19,082 错误 [STDERR]（SFSB 钝化线程 - jboss.j2ee:ear=XXX.ear,jar=XXX-YYY.jar,name=XXXSessionBean,service=EJB3）在 org.jboss。 serial.persister.RegularObjectPersister.writeSlotWithFields（RegularObjectPersister.java:182）
2012-07-18 17:06:19,082 错误 [STDERR]（SFSB 钝化线程 - jboss.j2ee:ear=XXX.ear,jar=XXX-YYY.jar,name=XXXSessionBean,service=EJB3）在 org.jboss。 serial.persister.RegularObjectPersister.defaultWrite（RegularObjectPersister.java:90）
2012-07-18 17:06:19,082 错误 [STDERR]（SFSB 钝化线程 - jboss.j2ee:ear=XXX.ear,jar=XXX-YYY.jar,name=XXXSessionBean,service=EJB3）在 org.jboss。 serial.persister.RegularObjectPersister.writeData（RegularObjectPersister.java:62）
2012-07-18 17:06:19,083 错误 [STDERR]（SFSB 钝化线程 - jboss.j2ee:ear=XXX.ear,jar=XXX-YYY.jar,name=XXXSessionBean,service=EJB3）在 org.jboss。 serial.objectmetamodel.ObjectDescriptorFactory.describeObject(ObjectDescriptorFactory.java:276)
2012-07-18 17:06:19,083 错误 [STDERR]（SFSB 钝化线程 - jboss.j2ee:ear=XXX.ear,jar=XXX-YYY.jar,name=XXXSessionBean,service=EJB3）在 org.jboss。 serial.objectmetamodel.DataContainer$DataContainerDirectOutput.writeObject(DataContainer.java:206)
2012-07-18 17:06:19,083 错误 [STDERR]（SFSB 钝化线程 - jboss.j2ee:ear=XXX.ear,jar=XXX-YYY.jar,name=XXXSessionBean,service=EJB3）在 org.jboss。 serial.persister.RegularObjectPersister.writeSlotWithFields（RegularObjectPersister.java:182）
2012-07-18 17:06:19,083 错误 [STDERR]（SFSB 钝化线程 - jboss.j2ee:ear=XXX.ear,jar=XXX-YYY.jar,name=XXXSessionBean,service=EJB3）在 org.jboss。 serial.persister.RegularObjectPersister.defaultWrite（RegularObjectPersister.java:90）
2012-07-18 17:06:19,083 错误 [STDERR]（SFSB 钝化线程 - jboss.j2ee:ear=XXX.ear,jar=XXX-YYY.jar,name=XXXSessionBean,service=EJB3）在 org.jboss。 serial.persister.RegularObjectPersister.writeData（RegularObjectPersister.java:62）
2012-07-18 17:06:19,083 错误 [STDERR]（SFSB 钝化线程 - jboss.j2ee:ear=XXX.ear,jar=XXX-YYY.jar,name=XXXSessionBean,service=EJB3）在 org.jboss。 serial.objectmetamodel.ObjectDescriptorFactory.describeObject(ObjectDescriptorFactory.java:276)
2012-07-18 17:06:19,083 错误 [STDERR]（SFSB 钝化线程 - jboss.j2ee:ear=XXX.ear,jar=XXX-YYY.jar,name=XXXSessionBean,service=EJB3）在 org.jboss。 serial.objectmetamodel.DataContainer$DataContainerDirectOutput.writeObject(DataContainer.java:206)
2012-07-18 17:06:19,083 错误 [STDERR]（SFSB 钝化线程 - jboss.j2ee:ear=XXX.ear,jar=XXX-YYY.jar,name=XXXSessionBean,service=EJB3）在 org.jboss。 serial.persister.RegularObjectPersister.writeSlotWithFields（RegularObjectPersister.java:182）
2012-07-18 17:06:19,083 错误 [STDERR]（SFSB 钝化线程 - jboss.j2ee:ear=XXX.ear,jar=XXX-YYY.jar,name=XXXSessionBean,service=EJB3）在 org.jboss。 serial.persister.RegularObjectPersister.defaultWrite（RegularObjectPersister.java:90）
2012-07-18 17:06:19,083 错误 [STDERR]（SFSB 钝化线程 - jboss.j2ee:ear=XXX.ear,jar=XXX-YYY.jar,name=XXXSessionBean,service=EJB3）在 org.jboss。 serial.persister.RegularObjectPersister.writeData（RegularObjectPersister.java:62）
2012-07-18 17:06:19,083 错误 [STDERR]（SFSB 钝化线程 - jboss.j2ee:ear=XXX.ear,jar=XXX-YYY.jar,name=XXXSessionBean,service=EJB3）在 org.jboss。 serial.objectmetamodel.ObjectDescriptorFactory.describeObject(ObjectDescriptorFactory.java:276)
2012-07-18 17:06:19,083 错误 [STDERR]（SFSB 钝化线程 - jboss.j2ee:ear=XXX.ear,jar=XXX-YYY.jar,name=XXXSessionBean,service=EJB3）在 org.jboss。 serial.objectmetamodel.DataContainer$DataContainerDirectOutput.writeObject(DataContainer.java:206)
2012-07-18 17:06:19,083 错误 [STDERR]（SFSB 钝化线程 - jboss.j2ee:ear=XXX.ear,jar=XXX-YYY.jar,name=XXXSessionBean,service=EJB3）在 org.jboss。 serial.persister.ArrayPersister.saveObjectArray(ArrayPersister.java:110)
2012-07-18 17:06:19,083 错误 [STDERR]（SFSB 钝化线程 - jboss.j2ee:ear=XXX.ear,jar=XXX-YYY.jar,name=XXXSessionBean,service=EJB3）在 org.jboss。 serial.persister.ArrayPersister.writeData(ArrayPersister.java:101)
2012-07-18 17:06:19,083 错误 [STDERR]（SFSB 钝化线程 - jboss.j2ee:ear=XXX.ear,jar=XXX-YYY.jar,name=XXXSessionBean,service=EJB3）在 org.jboss。 serial.objectmetamodel.ObjectDescriptorFactory.describeObject(ObjectDescriptorFactory.java:276)
2012-07-18 17:06:19,083 错误 [STDERR]（SFSB 钝化线程 - jboss.j2ee:ear=XXX.ear,jar=XXX-YYY.jar,name=XXXSessionBean,service=EJB3）在 org.jboss。 serial.objectmetamodel.DataContainer$DataContainerDirectOutput.writeObject(DataContainer.java:206)
2012-07-18 17:06:19,083 错误 [STDERR]（SFSB 钝化线程 - jboss.j2ee:ear=XXX.ear,jar=XXX-YYY.jar,name=XXXSessionBean,service=EJB3）在 org.jboss。 serial.io.JBossObjectOutputStream.writeObjectOverride(JBossObjectOutputStream.java:181)
2012-07-18 17:06:19,083 错误 [STDERR]（SFSB 钝化线程 - jboss.j2ee:ear=XXX.ear,jar=XXX-YYY.jar,name=XXXSessionBean,service=EJB3）在 org.jboss。 serial.objectmetamodel.DataContainer$DataContainerDirectOutput.writeObject(DataContainer.java:206)
2012-07-18 17:06:19,083 错误 [STDERR]（SFSB 钝化线程 - jboss.j2ee:ear=XXX.ear,jar=XXX-YYY.jar,name=XXXSessionBean,service=EJB3）在 org.jboss。 serial.io.JBossObjectOutputStream.writeObjectOverride(JBossObjectOutputStream.java:181)
2012-07-18 17:06:19,083 错误 [STDERR] (SFSB 钝化线程 - jboss.j2ee:ear=XXX.ear,jar=XXX-YYY.jar,name=XXXSessionBean,service=EJB3) 在 java.io。 ObjectOutputStream.writeObject(ObjectOutputStream.java:326)
2012-07-18 17:06:19,083 错误 [STDERR]（SFSB 钝化线程 - jboss.j2ee:ear=XXX.ear,jar=XXX-YYY.jar,name=XXXSessionBean,service=EJB3）在 org.jboss。 serial.io.MarshalledObject.(MarshalledObject.java:51)
2012-07-18 17:06:19,083 错误 [STDERR]（SFSB 钝化线程 - jboss.j2ee:ear=XXX.ear,jar=XXX-YYY.jar,name=XXXSessionBean,service=EJB3）在 org.jboss。 ejb3.stateful.StatefulBeanContext.writeExternal(StatefulBeanContext.java:1048)
2012-07-18 17:06:19,084 错误 [STDERR]（SFSB 钝化线程 - jboss.j2ee:ear=XXX.ear,jar=XXX-YYY.jar,name=XXXSessionBean,service=EJB3）在 org.jboss。 serial.persister.ExternalizePersister.writeData（ExternalizePersister.java:58）
2012-07-18 17:06:19,084 错误 [STDERR]（SFSB 钝化线程 - jboss.j2ee:ear=XXX.ear,jar=XXX-YYY.jar,name=XXXSessionBean,service=EJB3）在 org.jboss。 serial.objectmetamodel.ObjectDescriptorFactory.describeObject(ObjectDescriptorFactory.java:276)
2012-07-18 17:06:19,084 错误 [STDERR]（SFSB 钝化线程 - jboss.j2ee:ear=XXX.ear,jar=XXX-YYY.jar,name=XXXSessionBean,service=EJB3）在 org.jboss。 serial.objectmetamodel.DataContainer$DataContainerDirectOutput.writeObject(DataContainer.java:206)
2012-07-18 17:06:19,084 错误 [STDERR]（SFSB 钝化线程 - jboss.j2ee:ear=XXX.ear,jar=XXX-YYY.jar,name=XXXSessionBean,service=EJB3）在 org.jboss。 serial.io.JBossObjectOutputStream.writeObjectOverride(JBossObjectOutputStream.java:181)
2012-07-18 17:06:19,084 错误 [STDERR] (SFSB 钝化线程 - jboss.j2ee:ear=XXX.ear,jar=XXX-YYY.jar,name=XXXSessionBean,service=EJB3) 在 java.io。 ObjectOutputStream.writeObject(ObjectOutputStream.java:326)
2012-07-18 17:06:19,084 错误 [STDERR]（SFSB 钝化线程 - jboss.j2ee:ear=XXX.ear,jar=XXX-YYY.jar,name=XXXSessionBean,service=EJB3）在 org.jboss。 ejb3.cache.simple.StatefulSessionFilePersistenceManager.passivateSession（StatefulSessionFilePersistenceMan$
2012-07-18 17:06:19,084 错误 [STDERR]（SFSB 钝化线程 - jboss.j2ee:ear=XXX.ear,jar=XXX-YYY.jar,name=XXXSessionBean,service=EJB3）在 org.jboss。 ejb3.cache.simple.SimpleStatefulCache.passivate(SimpleStatefulCache.java:397)
2012-07-18 17:06:19,084 错误 [STDERR]（SFSB 钝化线程 - jboss.j2ee:ear=XXX.ear,jar=XXX-YYY.jar,name=XXXSessionBean,service=EJB3）在 org.jboss。 ejb3.cache.simple.SimpleStatefulCache$SessionTimeoutTask.run(SimpleStatefulCache.java:301)
2012-07-18 17:06:19,084 错误 [STDERR] (SFSB 钝化线程 - jboss.j2ee:ear=XXX.ear,jar=XXX-YYY.jar,name=XXXSessionBean,service=EJB3) 原因：java。 lang.NoClassDefFoundError: org/jboss/wsf/spi/serviceref/ServiceRefMetaData
2012-07-18 17:06:19,084 错误 [STDERR] (SFSB 钝化线程 - jboss.j2ee:ear=XXX.ear,jar=XXX-YYY.jar,name=XXXSessionBean,service=EJB3) 在 java.lang。 Class.getDeclaredMethods0（本机方法）
2012-07-18 17:06:19,084 错误 [STDERR] (SFSB 钝化线程 - jboss.j2ee:ear=XXX.ear,jar=XXX-YYY.jar,name=XXXSessionBean,service=EJB3) 在 java.lang。 Class.privateGetDeclaredMethods(Class.java:2427)
2012-07-18 17:06:19,084 错误 [STDERR] (SFSB 钝化线程 - jboss.j2ee:ear=XXX.ear,jar=XXX-YYY.jar,name=XXXSessionBean,service=EJB3) 在 java.lang。 Class.getDeclaredMethod(Class.java:1935)
2012-07-18 17:06:19,084 错误 [STDERR]（SFSB 钝化线程 - jboss.j2ee:ear=XXX.ear,jar=XXX-YYY.jar,name=XXXSessionBean,service=EJB3）在 org.jboss。 serial.classmetamodel.ClassMetaData.lookupMethodOnHierarchy(ClassMetaData.java:102)
2012-07-18 17:06:19,084 错误 [STDERR]（SFSB 钝化线程 - jboss.j2ee:ear=XXX.ear,jar=XXX-YYY.jar,name=XXXSessionBean,service=EJB3）在 org.jboss。 serial.classmetamodel.ClassMetaData.lookupInternalMethods(ClassMetaData.java:432)
2012-07-18 17:06:19,084 错误 [STDERR]（SFSB 钝化线程 - jboss.j2ee:ear=XXX.ear,jar=XXX-YYY.jar,name=XXXSessionBean,service=EJB3）在 org.jboss。 serial.classmetamodel.ClassMetaData.(ClassMetaData.java:122)
2012-07-18 17:06:19,084 错误 [STDERR]（SFSB 钝化线程 - jboss.j2ee:ear=XXX.ear,jar=XXX-YYY.jar,name=XXXSessionBean,service=EJB3）在 org.jboss。 serial.classmetamodel.ClassMetamodelFactory.getClassMetaData(ClassMetamodelFactory.java:350)
2012-07-18 17:06:19,084 错误 [STDERR]（SFSB 钝化线程 - jboss.j2ee:ear=XXX.ear,jar=XXX-YYY.jar,name=XXXSessionBean,service=EJB3）在 org.jboss。 serial.objectmetamodel.ObjectDescriptorFactory.describeObject(ObjectDescriptorFactory.java:168)
2012-07-18 17:06:19,084 错误 [STDERR]（SFSB 钝化线程 - jboss.j2ee:ear=XXX.ear,jar=XXX-YYY.jar,name=XXXSessionBean,service=EJB3）在 org.jboss。 serial.objectmetamodel.DataContainer$DataContainerDirectOutput.writeObject(DataContainer.java:206)
2012-07-18 17:06:19,084 错误 [STDERR]（SFSB 钝化线程 - jboss.j2ee:ear=XXX.ear,jar=XXX-YYY.jar,name=XXXSessionBean,service=EJB3）在 org.jboss。 serial.persister.ArrayPersister.saveObjectArray(ArrayPersister.java:110)
2012-07-18 17:06:19,085 错误 [STDERR]（SFSB 钝化线程 - jboss.j2ee:ear=XXX.ear,jar=XXX-YYY.jar,name=XXXSessionBean,service=EJB3）在 org.jboss。 serial.persister.ArrayPersister.writeData(ArrayPersister.java:101)
2012-07-18 17:06:19,085 错误 [STDERR]（SFSB 钝化线程 - jboss.j2ee:ear=XXX.ear,jar=XXX-YYY.jar,name=XXXSessionBean,service=EJB3）在 org.jboss。 serial.objectmetamodel.ObjectDescriptorFactory.describeObject(ObjectDescriptorFactory.java:276)
2012-07-18 17:06:19,085 错误 [STDERR]（SFSB 钝化线程 - jboss.j2ee:ear=XXX.ear,jar=XXX-YYY.jar,name=XXXSessionBean,service=EJB3）在 org.jboss。 serial.objectmetamodel.DataContainer$DataContainerDirectOutput.writeObject(DataContainer.java:206)
2012-07-18 17:06:19,085 错误 [STDERR]（SFSB 钝化线程 - jboss.j2ee:ear=XXX.ear,jar=XXX-YYY.jar,name=XXXSessionBean,service=EJB3）在 org.jboss。 serial.persister.RegularObjectPersister.writeSlotWithFields（RegularObjectPersister.java:182）
2012-07-18 17:06:19,085 错误 [STDERR]（SFSB 钝化线程 - jboss.j2ee:ear=XXX.ear,jar=XXX-YYY.jar,name=XXXSessionBean,service=EJB3）在 org.jboss。 serial.persister.ObjectOutputStreamProxy.writeFields(ObjectOutputStreamProxy.java:79)
2012-07-18 17:06:19,085 错误 [STDERR]（SFSB 钝化线程 - jboss.j2ee:ear=XXX.ear,jar=XXX-YYY.jar,name=XXXSessionBean,service=EJB3）在 org.jboss。 serial.persister.ObjectOutputStreamProxy.defaultWriteObject(ObjectOutputStreamProxy.java:68)
2012-07-18 17:06:19,085 错误 [STDERR] (SFSB 钝化线程 - jboss.j2ee:ear=XXX.ear,jar=XXX-YYY.jar,name=XXXSessionBean,service=EJB3) 在 java.util。 Vector.writeObject(Vector.java:1012)
2012-07-18 17:06:19,085 错误 [STDERR] (SFSB 钝化线程 - jboss.j2ee:ear=XXX.ear,jar=XXX-YYY.jar,name=XXXSessionBean,service=EJB3) ... 256 更多
2012-07-18 17:06:19,085 错误 [STDERR] (SFSB 钝化线程 - jboss.j2ee:ear=XXX.ear,jar=XXX-YYY.jar,name=XXXSessionBean,service=EJB3) 原因：java。 lang.ClassNotFoundException：来自 BaseClassLoader@12f483b4{vf$ 的 org.jboss.wsf.spi.serviceref.ServiceRefMetaData
2012-07-18 17:06:19,085 错误 [STDERR]（SFSB 钝化线程 - jboss.j2ee:ear=XXX.ear,jar=XXX-YYY.jar,name=XXXSessionBean,service=EJB3）在 org.jboss。 classloader.spi.base.BaseClassLoader.loadClass(BaseClassLoader.java:480)
2012-07-18 17:06:19,085 错误 [STDERR]（SFSB 钝化线程 - jboss.j2ee:ear=XXX.ear,jar=XXX-YYY.jar,name=XXXSessionBean,service=EJB3）在 java.lang。 ClassLoader.loadClass(ClassLoader.java:247)
2012-07-18 17:06:19,085 错误 [STDERR] (SFSB 钝化线程 - jboss.j2ee:ear=XXX.ear,jar=XXX-YYY.jar,name=XXXSessionBean,service=EJB3) ... 273 更多

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T13:16:38.823

我检查了 JBoss 序列化的源代码，并将代码附加到我的 JBoss 安装中。问题似乎与我的 XXXSessionBean 中的属性 ResourceBundle 有关。此属性的钝化失败，因为无法序列化此对象 (http://docs.oracle.com/javase/6/docs/api/java/util/ResourceBundle.html)。当我将其标记为“瞬态”时，问题似乎已解决！

如果你想知道我是如何得到这个解决方案的，请阅读以下博文：http: [//www.jochus.be/site/2012-08-06/java/debugging-passivation-errors-in-jboss](http://www.jochus.be/site/2012-08-06/java/debugging-passivation-errors-in-jboss)

# c# - 从对象数据源获取值

> ID：11738917
> 
> 赞同：1
> 
> 时间：2012-07-31T11:18:36.513
> 
> 标签：c#, asp.net, stored-procedures, dataset

这是我的存储过程的一部分：

```
Create procedure sp_Units_GetUnitState  
@PadidehOrAtkinsCode int  
as
    Select State from Units where ID = @PadidehOrAtkinsCode  
go 
```

我有一个 DataSet (.XSD) 文件，其中包含我的 StoredProcedure （此处命名为 GetDataBy1）
![在此处输入图像描述](../Images/53df115ec88ebbea84cd4c3db1e19792.png)
我像这样传递参数：

```
odsUnit.SelectParameters["PadidehOrAtkinsCode"].DefaultValue =  
txtPadidehOrAtkinsCode.Text; 
```

现在我想用`State`我在存储过程中的字段填充我的文本框 Text 属性，我应该怎么做才能从 osdUnit 获取值？
![在此处输入图像描述](../Images/9c16c219c850c4145041a284fa193d83.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T12:26:29.907

创建存储过程的对象并调用 GetData 函数。无需将选择参数分配给您的对象数据源。按照以下示例：我假设您的数据集名称是 dataset1。

```
DataTable dt1 = new DataTable();  // for temporary storage
DataSet1TableAdapters.sp_Units_GetUnitState  objAda = new DataSet1TableAdapters.sp_Units_GetUnitState();
dt1 = objAda.GetData(txtPadidehOrAtkinsCode.Text);

// Now get the state from the datatable
string state = dt1.Rows[0][0].ToString(); 
```

# node.js - Node.js 介绍

> ID：11738921
> 
> 赞同：0
> 
> 时间：2012-07-31T11:18:49.163
> 
> 标签：node.js

请原谅我对 node.js 的无知。我已经开始阅读 node.js 并且有一些可能是错误的看法。所以需要它来澄清

1.  当我们使用 createServer() 方法时，它是否会创建一个虚拟服务器。不确定“虚拟”一词是否合适，但这是我能描述的最好的：)
2.  我很困惑，我应该如何部署我的应用程序，其中包含 node.js + 其他自定义 js 文件。如果我在主服务器中部署我的应用程序，这是否意味着我有两台服务器？

谢谢你陪我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T11:37:36.940

我将尝试回答：

**Q1：**

createServer 基本上创建了一个在指定端口上侦听请求的进程。所以是的，您可以将其称为虚拟服务器，不断在端口上侦听请求。

**Q2：**

是的，你可以说它现在有 2 台服务器

例如：您的服务器最初有 apache，它侦听端口 80（您可以通过[http://example.com/](http://example.com/)访问它，默认情况下它会查找端口 80）

然后您还启动节点服务侦听其他端口，例如：端口 8456（您可以通过[http://example.com:8456/](http://example.com:8456/)访问它，它将查找端口 8456）

所以是的，你可以有两台服务器。

**编辑**

**Q** : 那么如果页面是由物理服务器和由node.js创建的虚拟服务器提供的，会有什么区别呢？

物理服务器和节点服务器是两个不同的东西，单个请求不可能同时发送到这两个服务器。

例如：我使用 apache 服务器来托管我在 PHP 上运行的网站。它提供我网站的所有 html 内容（包括连接到 mysql 以获取数据）。一些请求可能是：

1.  [http://example.com/reports.php](http://example.com/reports.php)
2.  [http://example.com/search.php](http://example.com/search.php)

在另一端，我可能将 nodejs 服务器用于完全另一个目的。例如：我可能将它用于 API，它返回 JSON/XML 作为回报。我可以通过使用 javascript 或来自 PHP 的简单 CURL 命令进行 AJAX 调用，自己使用这个 API 来处理一些动态内容。或者我也可以将此 API 公开。一些请求可能是：

1.  [http://example.com:8456/getList?apikey=](http://example.com:8456/getList?apikey=) ¶m1=¶m2=

我选择用作 API 的 NodeJs 服务器是因为它能够处理并发请求，并且由于它对文件操作是异步的，因此它比 PHP 快得多。

在这种情况下，我有一个网站，它不仅使用 PHP，而且结合了 2 种不同的技术（Apache 和 Nodejs 上的 PHP），因此 2 台服务器在同一台服务器上运行完全不同，但有自己的执行空间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T05:39:34.893

第三个问题： **那么如果页面是由物理服务器和由node.js创建的虚拟服务器提供的，会有什么区别？**

如果我可以补充的话，它是一个虚拟服务器，因为 apache 是一个在任何端口上侦听的虚拟 http 服务器。当然 apache 有更多的模块、插件和配置，因为 Node 更轻（有点像 WEBrick 用于 rails）、非阻塞和敏捷的构建。然后apache更稳定..换句话说，它是软件的决定，两者都坐在服务器上监听你设置的特定端口。

也就是说，有一些部署方法允许您将节点应用程序放置在诸如 nginx（另一个服务器端软件）或 HAproxy（具有强大功能的负载处理）之类的软件前面，所以这完全取决于您选择配置的方式它。

也许我离你的问题很远，但我希望这会有所帮助！

**另外，你应该给另一个人答案，他先来；）**

# android - 通过 GPS 获取纬度和经度

> ID：11738923
> 
> 赞同：2
> 
> 时间：2012-07-31T11:18:52.243
> 
> 标签：android

我正在尝试在移动设备上获取 GPS 纬度和经度。My code below works -- ie it provides all the information in the desired manner -- when the device's "use wireless networks" setting is selected, but not when "use GPS satellites" is selected, in which case I don't get any信息。

这是代码：

```
void getLatitudeAndLongitude() {
    boolean gpsEnabled = false;
    LocationManager mLocMan = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
    Log.e("mLocation#####", "" + mLocMan);

    try {
        gpsEnabled = mLocMan
                .isProviderEnabled(LocationManager.GPS_PROVIDER);
    } catch (Exception ex) {
    }
    boolean networkEnabled = false;
    try {
        networkEnabled = mLocMan
                .isProviderEnabled(LocationManager.NETWORK_PROVIDER);
    } catch (Exception ex) {
    }
    Location mCurrentLocation = null;

    // network*****************

    if (networkEnabled)
        mCurrentLocation = mLocMan
                .getLastKnownLocation(LocationManager.NETWORK_PROVIDER);

    // gps********************
    if (gpsEnabled)
        mCurrentLocation = mLocMan
                .getLastKnownLocation(LocationManager.GPS_PROVIDER);

    Log.d("current location", "" + mCurrentLocation);
    LocationProvider mGpsProv = null;

    if (mGpsProv == null && mLocMan != null) {
        mGpsProv = mLocMan.getProvider(LocationManager.GPS_PROVIDER);
    }

    if (mLocMan != null) {

        mylocationlistener mGpsLocListener = new mylocationlistener();
        mLocMan.requestLocationUpdates(LocationManager.NETWORK_PROVIDER,
                0 /* minTime ms */, 0 /* minDistance in meters */,
                mGpsLocListener);
        Log.d("Provoider1", "NETWORK_PROVIDER");
    }
    if (mLocMan != null && mGpsProv != null) {

        mylocationlistener mGpsLocListener = new mylocationlistener();
        mLocMan.requestLocationUpdates(LocationManager.GPS_PROVIDER,
                0 /* minTime ms /, 0 / minDistance in meters */, 0,
                mGpsLocListener);
        Log.d("Provoider2", "GPS_PROVIDER");
    }

}

class mylocationlistener implements LocationListener {

    @Override
    public void onLocationChanged(Location location) {
        if (location != null) {

            latitude = String.valueOf(location.getLatitude());
            longitude = String.valueOf(location.getLongitude());

            Log.e("location==", "" + location);
            Log.e("getLatitude", location.getLatitude() + "");
            Log.e("getLongitude", location.getLongitude() + "");

            if (GlobalConfig.DEBUG)
                Log.d("setUpIndividualWork", "location==" + location);

            new Handler().postDelayed(new Runnable() {
                @Override
                public void run() {

                }
            }, 1000);

            onGPSUpdate(location);

            Geocoder gcd = new Geocoder(setUpIndividualWorkOut.this,
                    Locale.getDefault());
            List<Address> addresses = null;
            try {
                addresses = gcd.getFromLocation(location.getLatitude(),
                        location.getLongitude(), 1);
            } catch (IOException e) {
                e.printStackTrace();
            }
            if (addresses != null && addresses.size() > 0) {
                userCurrentLocation = addresses.get(0).getLocality();
                Log.e("current location by GPS ", ""
                        + addresses.get(0).getLocality());
            }
        }
    }

    @Override
    public void onProviderDisabled(String provider) {
    }

    @Override
    public void onProviderEnabled(String provider) {
    }

    @Override
    public void onStatusChanged(String provider, int status, Bundle extras) {
    }
} 
```

我将非常感谢您的回复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T11:24:30.490

我这样使用它： LocationHelper 类：

```
public class LocationManagerHelper {
private static final String TAG = LocationManagerHelper.class.getSimpleName();
private Context mContext;

private LocationManager mLocationManager;
private GeoUpdateHandler mLocationListener = new GeoUpdateHandler();

public LocationManagerHelper(Context context) {
    this.mContext = context;
}

public GeoUpdateHandler GetLocationListener() {
    return mLocationListener;
}

public void SetLocationManager(LocationManager locationManager) {
    mLocationManager = locationManager;
}

public LocationManager GetLocationManager() {
    return mLocationManager;
}

public void Stop() {
    if (mLocationManager != null) {
        mLocationManager.removeUpdates(mLocationListener);
    }
}

private class GeoUpdateHandler implements LocationListener {
    @Override
    public void onLocationChanged(Location loc) {
        String longitude = "Longitude: " + loc.getLongitude();
        Log.v(TAG, longitude);
        String latitude = "Latitude: " + loc.getLatitude();
        Log.v(TAG, latitude);
    }

    @Override
    public void onStatusChanged(String s, int i, Bundle bundle) {

    }

    @Override
    public void onProviderEnabled(String s) {
    }

    @Override
    public void onProviderDisabled(String s) {
    }
} 
```

}

```
//The using:

private LocationManagerHelper mLocationManagerHelper;

 @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            InitializeComponent(getArguments());
            mLocationManagerHelper = new LocationManagerHelper(getActivity());

            try {
                Criteria criteria = new Criteria();
                mLocationManagerHelper.SetLocationManager((LocationManager) getActivity().getSystemService(Context.LOCATION_SERVICE));
                mLocationManagerHelper.GetLocationManager().requestLocationUpdates(LocationManager.GPS_PROVIDER, 1000L, 500.0f, mLocationManagerHelper.GetLocationListener());

                String provider = mLocationManagerHelper.GetLocationManager().getBestProvider(criteria, false);
                Location location = mLocationManagerHelper.GetLocationManager().getLastKnownLocation(provider);

                if (location != null) {
                    mLongitude = location.getLongitude();
                    mLatitude = location.getLatitude();
                }
            } catch (Exception ex) {
                Log.e(TAG, "GPS", ex);
            }
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T11:39:21.460

尝试这个...

```
@Override

public void onCreate(Bundle savedInstanceState)

{

super.onCreate(savedInstanceState);

setContentView(R.layout.main);

LocationManager locationManager =
(LocationManager) getSystemService(Context.LOCATION_SERVICE);
MyLocationListener lmh = new MyLocationListener();

String mlocProvider;
Criteria hdCrit = new Criteria();

hdCrit.setAccuracy(Criteria.ACCURACY_COARSE);

mlocProvider = locationManager.getBestProvider(hdCrit, true);

locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 3000, 1000, lmh);
Location currentLocation = locationManager.getLastKnownLocation(mlocProvider);

double currentLatitude = currentLocation.getLatitude();
double currentLongitude = currentLocation.getLongitude();
Log.e("lat",""+currentLatitude);
Log.e("lng",""+currentLongitude);
}

public class MyLocationListener implements LocationListener

{

public void onLocationChanged(Location loc)

{

loc.getLatitude();

loc.getLongitude();

String Text = "My current location is:" +

"Latitud = "+ loc.getLatitude() +

"Longitud = " + loc.getLongitude();

Toast.makeText( getApplicationContext(),

Text,

Toast.LENGTH_SHORT).show();

}

public void onProviderDisabled(String provider)

{

Toast.makeText( getApplicationContext(),

"Gps Disabled",

Toast.LENGTH_SHORT ).show();

}

public void onProviderEnabled(String provider)

{

Toast.makeText( getApplicationContext(),

"Gps Enabled",

Toast.LENGTH_SHORT).show();

}

public void onStatusChanged(String provider, int status, Bundle extras)

{

}

}/* End of Class MyLocati 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T08:49:00.313

尝试这个：

```
package loca.loca;

import java.util.Timer;
import java.util.TimerTask;
import android.app.Activity;
import android.content.Context;
import android.location.Location;
import android.location.LocationListener;
import android.location.LocationManager;
import android.os.Bundle;
import android.widget.Toast;

public class LocationActivity extends Activity {

    double x,y;

    Timer timer;
    LocationManager lm;
    boolean gps_enabled = false;
    boolean network_enabled = false;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

            lm = (LocationManager) this.getSystemService(Context.LOCATION_SERVICE);

            gps_enabled = lm.isProviderEnabled(LocationManager.GPS_PROVIDER);
            network_enabled = lm.isProviderEnabled(LocationManager.NETWORK_PROVIDER);

        if (!gps_enabled && !network_enabled) {  Context context = getApplicationContext();
            int duration = Toast.LENGTH_SHORT;
            Toast toast = Toast.makeText(context, "nothing is enabled", duration);
            toast.show();

        }

        if (gps_enabled)
            lm.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0,
                    locationListenerGps);
        if (network_enabled)
            lm.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 0, 0,
                    locationListenerNetwork);
         timer=new Timer();
         timer.schedule(new GetLastLocation(), 20000);

    }

    LocationListener locationListenerGps = new LocationListener() {
        public void onLocationChanged(Location location) {
            timer.cancel();
            x =location.getLatitude();
            y = location.getLongitude();
            lm.removeUpdates(this);
            lm.removeUpdates(locationListenerNetwork);

            Context context = getApplicationContext();
            int duration = Toast.LENGTH_SHORT;
            Toast toast = Toast.makeText(context, "gps enabled "+x + "\n" + y, duration);
            toast.show();
        }

        public void onProviderDisabled(String provider) {
        }

        public void onProviderEnabled(String provider) {
        }

        public void onStatusChanged(String provider, int status, Bundle extras) {
        }
    };

    LocationListener locationListenerNetwork = new LocationListener() {
        public void onLocationChanged(Location location) {
            timer.cancel();
            x = location.getLatitude();
            y = location.getLongitude();
            lm.removeUpdates(this);
            lm.removeUpdates(locationListenerGps);

            Context context = getApplicationContext();
            int duration = Toast.LENGTH_SHORT;
            Toast toast = Toast.makeText(context, "network enabled"+x + "\n" + y, duration);
            toast.show();
        }

        public void onProviderDisabled(String provider) {
        }

        public void onProviderEnabled(String provider) {
        }

        public void onStatusChanged(String provider, int status, Bundle extras) {
        }
    };

    class GetLastLocation extends TimerTask {
        @Override
        public void run() {
             lm.removeUpdates(locationListenerGps);
             lm.removeUpdates(locationListenerNetwork);

             Location net_loc=null, gps_loc=null;
             if(gps_enabled)
                 gps_loc=lm.getLastKnownLocation(LocationManager.GPS_PROVIDER);
             if(network_enabled)
                 net_loc=lm.getLastKnownLocation(LocationManager.NETWORK_PROVIDER);

             //if there are both values use the latest one
             if(gps_loc!=null && net_loc!=null){
                 if(gps_loc.getTime()>net_loc.getTime())
                {x = gps_loc.getLatitude();
                y = gps_loc.getLongitude();
                  Context context = getApplicationContext();
                    int duration = Toast.LENGTH_SHORT;
                    Toast toast = Toast.makeText(context, "gps lastknown "+x + "\n" + y, duration);
                    toast.show();
                }
                 else
                {x = net_loc.getLatitude();
                y = net_loc.getLongitude();
                Context context = getApplicationContext();
                int duration = Toast.LENGTH_SHORT;
                Toast toast = Toast.makeText(context, "network lastknown "+x + "\n" + y, duration);
                toast.show();

                }

             }

             if(gps_loc!=null){
                  {x = gps_loc.getLatitude();
                y = gps_loc.getLongitude();
                  Context context = getApplicationContext();
                    int duration = Toast.LENGTH_SHORT;
                    Toast toast = Toast.makeText(context, "gps lastknown "+x + "\n" + y, duration);
                    toast.show();
                  }

             }
             if(net_loc!=null){
                {x = net_loc.getLatitude();
                y = net_loc.getLongitude();
              Context context = getApplicationContext();
              int duration = Toast.LENGTH_SHORT;
              Toast toast = Toast.makeText(context, "network lastknown "+x + "\n" + y, duration);
                toast.show();

                }
             }
            Context context = getApplicationContext();
            int duration = Toast.LENGTH_SHORT;
            Toast toast = Toast.makeText(context, "no last know avilable", duration);
            toast.show();

}
}} 
```

# ruby-on-rails - 从带有 RABL 的 Rails 3 应用程序返回不完整的响应正文

> ID：11738924
> 
> 赞同：5
> 
> 时间：2012-07-31T11:18:52.577
> 
> 标签：ruby-on-rails, json, api, ruby-on-rails-3.2, rabl

我使用 Rails 3 和 RABL 构建了一个 JSON API

API 运行良好，但在特定请求上仅返回部分数据 - 其余 JSON 被截断。由于 JSON 因此无效，因此依赖 API 的移动应用程序正在崩溃。

任何人都可以想到为什么身体被切割成一定尺寸并指出我解决问题的正确方向吗？谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-02T09:44:57.453

所以我能够将这个问题追溯到乘客

长话短说，我通过设置`passenger_buffer_response off;`我的乘客配置来修复它。

# iphone - 如何检查网络可达性

> ID：11738925
> 
> 赞同：-2
> 
> 时间：2012-07-31T11:18:54.350
> 
> 标签：iphone, reachability

我想从我的 iPhone 应用程序检查我的 LAN 上的 IP 地址的可达性。有谁知道如何检查这个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T11:21:33.520

尝试使用您打算使用的任何服务/协议/端口连接到它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T12:36:13.980

这`Reachability`绝对是解决这个问题的方法，而且使用起来也非常简单。这是我使用的代码：

```
- (BOOL)_connectedToInternet
{
    Reachability*_currentReachability = [Reachability reachabilityForInternetConnection];

    if (_currentReachability.currentReachabilityStatus == NotReachable)
    {
        return NO;
    }

    return YES;
} 
```

不过，一个简单的谷歌搜索也会发现这一点。Apple 编写开发人员文档是有充分理由的……

# android - Android - 使用自定义相机应用拍照时应用崩溃

> ID：11738930
> 
> 赞同：-1
> 
> 时间：2012-07-31T11:19:02.970
> 
> 标签：android, android-layout, android-intent, android-emulator, android-widget

我正在尝试使用自定义相机应用程序拍照，但不幸的是我正在调用`NullPointerException`when`takePhoto()`方法。

`onPictureTaken()`在这一行的回调中抛出异常：

```
Uri imageUri=getContentResolver().insert(Media.EXTERNAL_CONTENT_URI, new ContentValues()); 
```

但是，现在我得到了另一个 NPE：

```
07-31 14:59:38.117: W/System.err(22224): java.lang.NullPointerException
07-31 14:59:38.156: W/System.err(22224):    at android.content.ContentResolver.openAssetFileDescriptor(ContentResolver.java:467)
07-31 14:59:38.156: W/System.err(22224):    at android.content.ContentResolver.openOutputStream(ContentResolver.java:363)
07-31 14:59:38.156: W/System.err(22224):    at android.content.ContentResolver.openOutputStream(ContentResolver.java:339)
07-31 14:59:38.156: W/System.err(22224):    at com.testcamera.TestCameraActivity.onPictureTaken(TestCameraActivity.java:154) 
```

* * *

这是我设置侦听器的方式：

```
@Override
public void onClick(View v) {
     camera.takePicture(null, null, this);
} 
```

这是`onPictureTaken`回调：

```
@Override
public void onPictureTaken(byte[] data, Camera camera) {
    Uri imageUri=getContentResolver().insert(Media.EXTERNAL_CONTENT_URI, new ContentValues());
    try{
        OutputStream imageOS=getContentResolver().openOutputStream(imageUri);
        imageOS.write(data);
        imageOS.flush();
        imageOS.close();
    }catch (Exception e) {
        e.printStackTrace();
    }

    camera.startPreview();
} 
```

LogCat 详细信息：

```
07-31 14:05:46.409: E/AndroidRuntime(2242): java.lang.NullPointerException
07-31 14:05:46.409: E/AndroidRuntime(2242):     at android.os.Parcel.readException(Parcel.java:1328)
07-31 14:05:46.409: E/AndroidRuntime(2242):     at android.database.DatabaseUtils.readExceptionFromParcel(DatabaseUtils.java:160)
07-31 14:05:46.409: E/AndroidRuntime(2242):     at android.database.DatabaseUtils.readExceptionFromParcel(DatabaseUtils.java:114)
07-31 14:05:46.409: E/AndroidRuntime(2242):     at android.content.ContentProviderProxy.insert(ContentProviderNative.java:408)
07-31 14:05:46.409: E/AndroidRuntime(2242):     at android.content.ContentResolver.insert(ContentResolver.java:604)
07-31 14:05:46.409: E/AndroidRuntime(2242):     at com.testcamera.TestCameraActivity.onPictureTaken(TestCameraActivity.java:131)
07-31 14:05:46.409: E/AndroidRuntime(2242):     at android.hardware.Camera$EventHandler.handleMessage(Camera.java:571)
07-31 14:05:46.409: E/AndroidRuntime(2242):     at android.os.Handler.dispatchMessage(Handler.java:99)
07-31 14:05:46.409: E/AndroidRuntime(2242):     at android.os.Looper.loop(Looper.java:130)
07-31 14:05:46.409: E/AndroidRuntime(2242):     at android.app.ActivityThread.main(ActivityThread.java:3687)
07-31 14:05:46.409: E/AndroidRuntime(2242):     at java.lang.reflect.Method.invokeNative(Native Method)
07-31 14:05:46.409: E/AndroidRuntime(2242):     at java.lang.reflect.Method.invoke(Method.java:507)
07-31 14:05:46.409: E/AndroidRuntime(2242):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)
07-31 14:05:46.409: E/AndroidRuntime(2242):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625)
07-31 14:05:46.409: E/AndroidRuntime(2242):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T15:56:26.753

好的，原来`new ContentValues()`是空的，所以我尝试用一​​些数据来初始化它：

```
ContentValues values=new ContentValues();
values.put(MediaStore.MediaColumns.DATA, data);
values.put(MediaStore.MediaColumns.TITLE, "abc");
values.put(MediaStore.MediaColumns.SIZE, data.length);
values.put(MediaStore.MediaColumns.MIME_TYPE, "image/jpeg"); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-31T11:45:55.050

尝试这个..

```
 button.setOnClickListener(new OnClickListener()
        {

            public void onClick(View v)
            {

                 takePhoto();
            }   

        });

 private void takePhoto(){
        Intent cameraIntent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE); 
        startActivityForResult(cameraIntent, CAMERA_REQUEST); 

    }

protected void onActivityResult(int requestCode, int resultcode, Intent intent)
  {
      super.onActivityResult(requestCode, resultcode, intent);

  if (requestCode == CAMERA_REQUEST) {  
      Bitmap photo = (Bitmap) intent.getExtras().get("data"); 
      }  

      else
      {
          Log.d("Status:", "Photopicker canceled");           
      }
  } 
```

# c# - 来自 Web 服务的空响应 (WSDL SOAP)

> ID：11738936
> 
> 赞同：4
> 
> 时间：2012-07-31T11:19:29.160
> 
> 标签：c#, web-services, soap, xsd, wsdl

我正在使用 Visual Studio 2008 C# Windows 应用程序连接到由外部公司创建的 Web 服务。该服务是一个 WSDL url，它是一个基本的 soap 请求和响应。我已将该服务作为服务参考导入。我可以调用该服务，并且没有收到任何错误，但没有任何响应。在 Fiddler 中监视肥皂请求和响应时，我看到一个响应返回，但就好像 VS 无法解释响应一样。我已经研究过创建 xsd，但得到一个错误，指出已经有一个模式。所以我完全不知所措。我希望有人能帮帮忙。如果之前已经解决了这个确切的问题，我深表歉意，但我找不到任何可以解决我的问题的东西。

提前致谢！

我用来连接服务的代码如下：

```
 ServiceReference1.bpm bbb = new TestingWSDL.ServiceReference1.bpm();

        ServiceReference1.BPMExternalAppServicesV001Client soapClient = new TestingWSDL.ServiceReference1.BPMExternalAppServicesV001Client();

        ServiceReference1.DownloadShipmentDataV001 req = new TestingWSDL.ServiceReference1.DownloadShipmentDataV001();
        ServiceReference1.DownloadShipmentDataV001Response resp = new TestingWSDL.ServiceReference1.DownloadShipmentDataV001Response();

        try
        {

            soapClient.DownloadShipmentDataV001(req,out resp);

        }
        catch(Exception err)
        {
            MessageBox.Show(err.Message);
        } 
```

响应对象中没有任何数据。我不能发布图像，因为我不允许。

WSDL 很长，如下所示：

```
 <?xml version="1.0" encoding="utf-8"?>
<wsdl:definitions xmlns:tns="http://schemas.ccc.com/AROPInventory/bpm/external" xmlns:inst="http://schemas.aaa.com/bpm/instance/1.0" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" name="BPMExternalAppServicesV001" targetNamespace="http://schemas.ccc.com/AROPInventory/bpm/external" xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/">
  <wsdl:types>
    <xsd:schema xmlns:tns1="http://schemas.ccc.com/AROPInventory/bpm/external" xmlns="http://www.w3.org/2001/XMLSchema" attributeFormDefault="unqualified" elementFormDefault="qualified" targetNamespace="http://schemas.argility.com/AROPInventory/bpm/external" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
      <xsd:import namespace="http://schemas.aaa.com/bpm/instance/1.0" />
      <xsd:element name="UploadShipmentDataV001">
        <xsd:complexType>
          <xsd:sequence>
            <xsd:element ref="tns1:Shipments" />
          </xsd:sequence>
        </xsd:complexType>
      </xsd:element>
      <xsd:element xmlns:SOAP="http://schemas.xmlsoap.org/soap/envelope/" name="Shipments">
        <xsd:complexType>
          <xsd:sequence>
            <xsd:element minOccurs="0" maxOccurs="unbounded" name="Shipment">
              <xsd:complexType>
                <xsd:sequence>
                  <xs:element name="ShipmentNumber" type="xs:string" xmlns:xs="http://www.w3.org/2001/XMLSchema" />
                  <xsd:element name="Cartons">
                    <xsd:complexType>
                      <xsd:sequence>
                        <xsd:element minOccurs="0" maxOccurs="unbounded" name="Carton">
                          <xsd:annotation>
                            <xsd:documentation>0:not damaged 1:damaged 2: Rejected0:not damaged 1:damaged 2: Rejected0:not damaged 1:damaged 2: Rejected</xsd:documentation>
                          </xsd:annotation>
                          <xsd:complexType>
                            <xsd:sequence>
                              <xs:element name="CartionID" type="xs:byte" xmlns:xs="http://www.w3.org/2001/XMLSchema" />
                              <xs:element name="Status" type="xs:byte" xmlns:xs="http://www.w3.org/2001/XMLSchema" />
                            </xsd:sequence>
                          </xsd:complexType>
                        </xsd:element>
                      </xsd:sequence>
                    </xsd:complexType>
                  </xsd:element>
                </xsd:sequence>
              </xsd:complexType>
            </xsd:element>
          </xsd:sequence>
        </xsd:complexType>
      </xsd:element>
      <xsd:element name="TestUploadShipMentV001">
        <xsd:complexType>
          <xsd:sequence>
            <xsd:element ref="tns1:Shipments" />
          </xsd:sequence>
        </xsd:complexType>
      </xsd:element>
      <xsd:element name="TestUploadShipMentV001Response" />
      <xsd:element name="UploadShipmentDataV001Response" />
      <xsd:element name="DownloadShipmentDataV001">
        <xsd:complexType>
          <xsd:sequence />
        </xsd:complexType>
      </xsd:element>
      <xsd:element name="DownloadShipmentDataV001Response">
        <xsd:complexType>
          <xsd:sequence>
            <xsd:element ref="tns1:Shipments" />
          </xsd:sequence>
        </xsd:complexType>
      </xsd:element>
    </xsd:schema>
    <xsd:schema xmlns="http://www.w3.org/2001/XMLSchema" attributeFormDefault="unqualified" elementFormDefault="qualified" targetNamespace="http://schemas.aaa.com/bpm/instance/1.0" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
      <xsd:element name="bpm">
        <xsd:complexType>
          <xsd:sequence>
            <xsd:element name="instance_id" type="xsd:string" />
          </xsd:sequence>
        </xsd:complexType>
      </xsd:element>
    </xsd:schema>
  </wsdl:types>
  <wsdl:message name="DownloadShipmentDataV001Input">
    <wsdl:part name="body" element="tns:DownloadShipmentDataV001" />
  </wsdl:message>
  <wsdl:message name="DownloadShipmentDataV001Output">
    <wsdl:part name="body" element="tns:DownloadShipmentDataV001Response" />
  </wsdl:message>
  <wsdl:message name="HeaderOutput">
    <wsdl:part name="BPMHeader" element="inst:bpm" />
  </wsdl:message>
  <wsdl:portType name="BPMExternalAppServicesV001">
    <wsdl:operation name="DownloadShipmentDataV001">
      <wsdl:input message="tns:DownloadShipmentDataV001Input" />
      <wsdl:output message="tns:DownloadShipmentDataV001Output" />
    </wsdl:operation>
  </wsdl:portType>
  <wsdl:binding name="BPMExternalAppServicesV001" type="tns:BPMExternalAppServicesV001">
    <soap:binding transport="http://schemas.xmlsoap.org/soap/http" />
    <wsdl:operation name="DownloadShipmentDataV001">
      <soap:operation soapAction="" style="document" />
      <wsdl:input>
        <soap:body use="literal" />
      </wsdl:input>
      <wsdl:output>
        <soap:body use="literal" />
        <soap:header message="tns:HeaderOutput" part="BPMHeader" use="literal" />
      </wsdl:output>
    </wsdl:operation>
  </wsdl:binding>
  <wsdl:service name="BPMExternalAppServicesV001Service">
    <wsdl:port name="BPMExternalAppServicesV001Port" binding="tns:BPMExternalAppServicesV001">
      <soap:address location="http://aaa/aaa/com.eibus.web.soap.Gateway.wcp?organization=o=system,cn=aaa,cn=aaa,o=ho.bbb.co.za" />
    </wsdl:port>
  </wsdl:service>
</wsdl:definitions> 
```

提琴手响应如下：

```
<s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/">
<s:Header xmlns:s="http://schemas.xmlsoap.org/soap/envelope/">
    <header xmlns:s="http://schemas.xmlsoap.org/soap/envelope/" 
        xmlns="http://schemas.aaa.com/General/1.0/">
        <sender>
            <reply-to>
                cn=Business Process Management,cn=Business Process Management,cn=soap nodes,o=system,cn=aaa,cn=aaa20,o=ho.bbb.co.za
            </reply-to>
            <organizationalContext>o=system,cn=aaa,cn=aaa20,o=ho.bbb.co.za</organizationalContext>
            <component>cn=Business Process Management,cn=soap nodes,o=system,cn=aaa,cn=aaa20,o=ho.bbb.co.za</component>
        </sender>
        <receiver>
            <component>cn=webgateway@poc-aaa,cn=aaa,cn=aaa20,o=ho.bbb.co.za</component>
            <sent-to xmlns="http://schemas.aaa.com/General/1.0/">socket://poc-aaa:20379/</sent-to>
        </receiver>
        <msg-id>00505680-004E-11E1-FBF1-7CB604BB1FC0</msg-id>
    </header>
    <bpm xmlns="http://schemas.aaa.com/bpm/instance/1.0">
        <instance_id>26c34038-bea4-459c-a0ad-86b462ae90cb</instance_id>
    </bpm>
</s:Header>
<s:Body>
    <DownloadShipmentDataV001Response xmlns:s="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" 
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://schemas.argility.com/AROPInventory/bpm/external">
        <Shipments xmlns:s="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" 
            xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://schemas.argility.com/AROPInventory/bpm/external">
            <ShipmentHeader>
                <ShipmentNumber>S001</ShipmentNumber>
                <ReceivingBranch>B000028</ReceivingBranch>
                <SendingBranch>B000001</SendingBranch>
                <ExpectedDate>2012/07/30</ExpectedDate>
                <TotalNrOfCartons>2</TotalNrOfCartons>
                <ShipmentStatus>E</ShipmentStatus>
                <Cartons>
                    <Carton>
                        <CartonHeader>
                            <NrOfItems>2</NrOfItems>
                            <CartionID>99</CartionID>
                        </CartonHeader>
                        <CartonDetail>
                            <SKU>12345</SKU>
                            <Description>abc</Description>
                            <SerialNumber>6789</SerialNumber>
                            <QtySent>20</QtySent>
                            <QtyReceived/>
                        </CartonDetail>
                        <CartonDetail>
                            <SKU>12390</SKU>
                            <Description>abc</Description>
                            <SerialNumber>67232</SerialNumber>
                            <QtySent>2</QtySent>
                            <QtyReceived/>
                        </CartonDetail>
                    </Carton>
                    <Carton>
                        <CartonHeader>
                            <NrOfItems>2</NrOfItems>
                            <CartionID>100</CartionID>
                        </CartonHeader>
                        <CartonDetail>
                            <SKU>12345</SKU>
                            <Description>abc</Description>
                            <SerialNumber>6789</SerialNumber>
                            <QtySent>20</QtySent>
                            <QtyReceived/>
                        </CartonDetail>
                        <CartonDetail>
                            <SKU>12390</SKU>
                            <Description>abc</Description>
                            <SerialNumber>67232</SerialNumber>
                            <QtySent>2</QtySent>
                            <QtyReceived/>
                        </CartonDetail>
                    </Carton>
                </Cartons>
            </ShipmentHeader>
            <ShipmentHeader>
                <ShipmentNumber>S002</ShipmentNumber>
                <ReceivingBranch>B000029</ReceivingBranch>
                <SendingBranch>B000002</SendingBranch>
                <ExpectedDate>2012/06/3</ExpectedDate>
                <TotalNrOfCartons>21</TotalNrOfCartons>
                <ShipmentStatus>E</ShipmentStatus>
                <Cartons>
                    <Carton>
                        <CartonHeader>
                            <NrOfItems>3</NrOfItems>
                            <CartionID>91</CartionID>
                        </CartonHeader>
                        <CartonDetail>
                            <SKU>12345</SKU>
                            <Description>abc</Description>
                            <SerialNumber>6789</SerialNumber>
                            <QtySent>20</QtySent>
                            <QtyReceived/>
                        </CartonDetail>
                        <CartonDetail>
                            <SKU>12390</SKU>
                            <Description>abc</Description>
                            <SerialNumber>67232</SerialNumber>
                            <QtySent>2</QtySent>
                            <QtyReceived/>
                        </CartonDetail>
                    </Carton>
                    <Carton>
                        <CartonHeader>
                            <NrOfItems>1</NrOfItems>
                            <CartionID>97</CartionID>
                        </CartonHeader>
                        <CartonDetail>
                            <SKU>12390</SKU>
                            <Description>abc</Description>
                            <SerialNumber>67232</SerialNumber>
                            <QtySent>2</QtySent>
                            <QtyReceived/>
                        </CartonDetail>
                    </Carton>
                </Cartons>
            </ShipmentHeader>
        </Shipments>
    </DownloadShipmentDataV001Response>
</s:Body>
</s:Envelope> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T06:11:57.420

感谢您发布 Fiddler 收集的回复。实际上，我在 WSDL 和对 WSDL 数据类型的响应一致性方面看到了不止一个问题。

**第一个问题：WSDL 一致性/完整性**

请注意，输入和输出消息分别指的是`tns:DownloadShipmentDataV001`和`tns:DownloadShipmentDataV001Response`。`xmlns:tns="http://schemas.ccc.com/AROPInventory/bpm/external"`是消息定义上下文中的相关*前缀：命名空间*绑定，因此请求和响应消息元素的完全限定名称分别是`{http://schemas.ccc.com/AROPInventory/bpm/external}DownloadShipmentDataV001`和`{http://schemas.ccc.com/AROPInventory/bpm/external}DownloadShipmentDataV001Response`。

根据`targetNamespace="http://schemas.argility.com/AROPInventory/bpm/external"`声明，在 WSDL 文档的 types 部分中定义的元素的完全限定名称是 `{http://schemas.argility.com/AROPInventory/bpm/external}DownloadShipmentDataV001`和`{http://schemas.argility.com/AROPInventory/bpm/external}DownloadShipmentDataV001Response`。这是一个问题，因为消息定义中引用的实际类型在 WSDL 和任何导入/包含的文档中都缺失。

存根生成器在尝试使用 WSDL 时应该抱怨这一点。

外部公司应该真正纠正这个问题，但您可以复制 WSDL 并通过从类型部分声明实际元素的命名空间并绑定到前缀，然后在消息定义中使用该前缀（弱点是你有一个额外的步骤来跟上他们的服务定义的任何变化）：

```
xmlns:fromtype="http://schemas.argility.com/AROPInventory/bpm/external"
 ...
  <wsdl:message name="DownloadShipmentDataV001Input">
    <wsdl:part name="body" element="fromtype:DownloadShipmentDataV001" />
  </wsdl:message>
  <wsdl:message name="DownloadShipmentDataV001Output">
    <wsdl:part name="body" element="fromtype:DownloadShipmentDataV001Response" />
  </wsdl:message> 
```

**第二个问题：响应消息不匹配架构**

假设 WSDL 是一致的，并从类型部分调用了完全限定的数据类型。响应消息的完全限定元素结构将类似于：

```
{http://schemas.argility.com/AROPInventory/bpm/external}DownloadShipmentDataV001Response
  {http://schemas.argility.com/AROPInventory/bpm/external}Shipments
    {http://schemas.argility.com/AROPInventory/bpm/external}Shipment
      {http://schemas.argility.com/AROPInventory/bpm/external}ShipmentNumber
      {http://schemas.argility.com/AROPInventory/bpm/external}Cartons
        {http://schemas.argility.com/AROPInventory/bpm/external}Carton
 ... 
```

但是，响应消息中的实际结构是：

```
{http://schemas.argility.com/AROPInventory/bpm/external}DownloadShipmentDataV001Response
  {http://schemas.argility.com/AROPInventory/bpm/external}Shipments
    {http://schemas.argility.com/AROPInventory/bpm/external}ShipmentHeader
      {http://schemas.argility.com/AROPInventory/bpm/external}ShipmentNumber
 ... 
```

请注意，`ShipmentHeader`它永远不会在 WSDL 类型部分中声明为元素，也不会从另一个文档中导入。如果 unmarshaller 使用 WSDL 中提供的数据类型定义，它不理解`ShipmentHeader`或它的子元素，因此可能会忽略这些（如您所见）。

此问题的更正方法是将数据类型架构定义与服务的实际响应相匹配。同样，托管服务的外部组织应该更正此问题（他们的服务不符合给定的 WSDL），但是您可以再次在本地进行调整，但需要注意额外的步骤，以使“您的”wsdl 与他们的服务保持同步。

我希望这会有所帮助并回答进一步的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-21T18:16:16.880

您仍然需要自己解析这个 XML 文件。

IBM 的 Remedy 软件也有类似的问题。基本上它是一个糟糕的软件，这种行为应该是可以预料的。即使他们更新了代码以匹配，他们也不会从他们正在生成的实际 XML 文档中生成 WSDL……这个问题将继续存在，直到他们改变他们的方法并且您无法控制它。

# c++ - Valgrind 合法的“可能丢失”字节示例

> ID：11738938
> 
> 赞同：10
> 
> 时间：2012-07-31T11:19:34.013
> 
> 标签：c++, c, valgrind

我看到 valgrind 将内存泄漏分类为：

*   肯定输了
*   间接失去
*   **可能丢失**
*   仍然可以到达
*   压制

我刚刚修复了“可能丢失”是主要问题的泄漏。

[文档说](http://valgrind.org/docs/manual/faq.html#faq.deflost)：“可能***丢失****意味着您的程序正在泄漏内存，除非您使用可能导致它们指向已分配块中间的指针做不寻常的事情；有关一些可能的原因，请参阅用户手册*”

我可以知道一个“*用指针做不寻常的事情，可能导致它们指向分配块的中间*”的例子吗？

我的意思是一个可以忽略“可能丢失”的示例，尽管它是由 valgrind 报告的。使用指针使 valgrind 抱怨但同时以这种方式使用指针在某种程度上是合法的示例

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-31T12:18:17.240

文档的一些示例是具有自己的分配器的不同库，并且返回的内存不是直接由底层操作系统分配器（malloc/sbrk）返回的指针，而是偏移后的指针。例如，考虑一个分配器，它获得了一些额外的内存并存储了元信息（可能是垃圾收集器的类型信息......）。分配和解除分配的过程类似于：

```
void* allocate( size_t size ) {
   metainfo_t *m = (metainfo_t*) malloc( size + sizeof(metainfo) );
   m->data = some_value;
   return (void*)(m+1);          // [1]
}
void deallocate( void* p ) {
   metainfo_t *m = ((metainfo_t*)p) - 1;
   // use data
}
void * memory = allocate(10); 
```

当 valgrind 跟踪内存时，它会记住由 返回的原始指针`malloc`，并且该指针不会存储在程序的任何位置。但这并不意味着内存已经泄漏，它只意味着指针在程序中不能直接使用。特别是`memory`仍然持有返回的指针，并且`deallocate`可以调用来释放它，但在程序的任何`valgrind`位置都看不到原始返回的指针`(char*)memory - sizeof(metadata_t)`并发出警告。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-31T11:23:00.597

```
char *p = malloc(100);
if (p != 0)
{
    p += 50;
    /* at this point, no pointer points to the start of the allocated memory */
    /* however, it is still accessible */
    for (int i = -50; i != 50; i++)
        p[i] = 1;
    free (p - 50);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-31T13:20:43.630

```
char *p = malloc(100);
if (p != 0)
{
    p += 50;
    /* at this point, no pointer points to the start of the allocated memory */
    /* however, it is still accessible */
    for (int i = -50; i != 50; i++)
        p[i] = 1;
    free (p - 50);
} 
```

因为它看起来很有趣，所以我确实运行了代码并对其进行了 valgrind。结果如下。

```
yjaeyong@carbon:~$ valgrind test
==14735== Memcheck, a memory error detector
==14735== Copyright (C) 2002-2010, and GNU GPL'd, by Julian Seward et al.
==14735== Using Valgrind-3.6.1-Debian and LibVEX; rerun with -h for copyright info
==14735== Command: test
==14735== 
==14735== 
==14735== HEAP SUMMARY:
==14735==     in use at exit: 0 bytes in 0 blocks
==14735==   total heap usage: 32 allocs, 32 frees, 2,017 bytes allocated
==14735== 
==14735== All heap blocks were freed -- no leaks are possible
==14735== 
==14735== For counts of detected and suppressed errors, rerun with: -v
==14735== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 11 from 6) 
```

它说不可能有泄漏。我错过了什么吗？

# c# - 从未见过 C++ for 循环

> ID：11738939
> 
> 赞同：164
> 
> 时间：2012-07-31T11:19:35.823
> 
> 标签：c#, c++, for-loop

我正在将 C++ 算法转换为 C#。我遇到了这个for循环：

```
for (u = b.size(), v = b.back(); u--; v = p[v]) 
b[u] = v; 
```

它在 C++ 中没有错误，但在 C# 中会出现错误（不能将 int 转换为 bool）。我真的想不通这个for循环，条件在哪里？

有人可以解释一下吗？

*PS。只是为了检查，为了使 VECTOR 适应 LIST， b.back() 是否对应于 b[b.Count-1] ？*

* * *

## 回答 #1

> 赞同：321
> 
> 时间：2012-07-31T11:22:39.317

循环的条件`for`在两个分号之间`;`。

在 C++ 中，几乎可以将任何表达式作为条件：任何计算结果为零的东西都意味着`false`; 非零意味着`true`。

在您的情况下，条件是`u--`：当您转换为 C# 时，只需添加`!= 0`：

```
for (u = b.size(), v = b.back(); u-- != 0; v = p[v]) 
    b[u] = v; //                     ^^^^ HERE 
```

* * *

## 回答 #2

> 赞同：165
> 
> 时间：2012-07-31T16:20:44.387

很多准确的答案，但我认为写出等效的 while 循环是值得的。

```
for (u = b.size(), v = b.back(); u--; v = p[v]) 
   b[u] = v; 
```

相当于：

```
u = b.size();
v = b.back();
while(u--) {
   b[u] = v;
   v = p[v];
} 
```

在转换为 C# 时，您可能会考虑重构为 while() 格式。在我看来，它更清晰，对新程序员来说不是一个陷阱，而且同样有效。

正如其他人所指出的那样——但要使我的答案完整——要使其在 C# 中工作，您需要更改`while(u--)`为`while(u-- != 0)`.

...或者`while(u-- >0)`以防万一你开始消极。（好的，`b.size()`永远不会是负面的——但考虑一个一般情况，也许其他东西初始化了 u）。

或者，为了更清楚：

```
u = b.size();
v = b.back();
while(u>0) {
   u--;
   b[u] = v;
   v = p[v];
} 
```

清晰比简洁好。

* * *

## 回答 #3

> 赞同：66
> 
> 时间：2012-07-31T11:22:15.907

条件是`u--;`, 因为它在**for**指令的第二个位置。

如果 的值`u--;`不为 0，它将被解释为`true`（即，隐式转换为布尔值`true`）。相反，如果它的值为 0，它将被强制转换为`false`.

这是[非常糟糕的代码](https://stackoverflow.com/questions/11738939/never-seen-before-c-for-loop/11738987#comment15587737_11738987)。

**更新：我在这篇**[博](http://thedeepbluecpp.blogspot.com.es/2014/02/guideline-5-for-loops-should-be-simple.html)文中讨论了“for”循环的编写。其建议可概括为以下段落：

> for 循环是一个实用的、可读的（一旦你习惯了它）和简洁的结构，但你需要很好地使用它。由于其不常见的语法，以过于富于想象力的方式使用它并不是一个好主意。
> 
> for 循环的所有部分都应该简短易读。应选择变量名以使其易于理解。

这个例子显然违反了这些建议。

* * *

## 回答 #4

> 赞同：23
> 
> 时间：2012-07-31T11:28:37.767

这将是循环的 C# 形式。

```
// back fetches the last element of vector in c++.
for (u = b.size(), v = b.back(); (u--) != 0; v = p[v]) 
{      
  b[u] = v;      
} 
```

只需替换 size() 和 back() 的等效项。

它所做的是将列表反转并存储在一个数组中。但是在 C# 中，我们直接为此使用了系统定义的函数。所以你也不需要写这个循环。

```
b = b.Reverse().ToArray(); 
```

* * *

## 回答 #5

> 赞同：15
> 
> 时间：2012-07-31T11:23:19.460

```
u = b.size(), v = b.back() 
```

是初始化。

```
u-- 
```

是条件。

```
v = p[v] 
```

是迭代

* * *

## 回答 #6

> 赞同：14
> 
> 时间：2012-07-31T11:23:13.063

条件是 的结果，它是递减之前`u--`的值。`u`

在 C 和 C++ 中，an`int` *可以*通过隐式进行比较转换为 bool `!= 0`（0 是`false`，其他都是`true`）。

`b.back()`是容器中的最后一个元素，即`b[b.size() - 1]`， when `size() != 0`。

* * *

## 回答 #7

> 赞同：11
> 
> 时间：2012-07-31T11:20:49.683

在 C 语言中，所有非零都`true`位于“布尔”上下文中，例如循环结束条件或条件语句。在 C# 中，您必须明确地进行检查：`u-- != 0`.

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2012-08-01T03:04:54.080

正如其他人所说，C++ 隐式转换为布尔值的事实意味着条件 is `u--`，如果值非零，则为真。

值得补充的是，您在询问“条件在哪里”时有一个错误的假设。在 C++ 和 C#（以及其他类似语法的语言）中，您可以有一个空的条件。在这种情况下，它总是评估为真，因此循环将永远继续，或者直到某些其他条件退出它（通过`return`、`break`或`throw`）。

```
for(int i = 0; ; ++i)
  doThisForever(i); 
```

事实上，for 语句的任何部分都可以省略，在这种情况下，它只是不被执行。

一般来说，`for(A; B; C){D}`或`for(A; B; C)D;`变成：

```
{A}
loopBack:
if(!(B))
  goto escapeLoop;
{D}
{C}
goto loopBack;
escapeLoop: 
```

A、B、C或D中的任何一个或多个都可以省略。

因此，一些人赞成`for(;;)` 无限循环。我这样做是因为虽然它更受欢迎，但我将其读作“直到真相结束为真”，与我的读 作“永远”`while(true)`相比，这听起来有点世界末日。`for(;;)`

这是一个品味问题，但因为我不是世界上唯一喜欢`for(;;)`它的人，所以值得知道它的含义。

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2012-08-23T09:25:10.010

所有答案都是正确的：-

for 循环可以以多种方式使用，如下所示：

```
Single Statement inside For Loop
Multiple Statements inside For Loop
No Statement inside For Loop
Semicolon at the end of For Loop
Multiple Initialization Statement inside For
Missing Initialization in For Loop
Missing Increment/Decrement Statement
Infinite For Loop
Condition with no Conditional Operator. 
```

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2016-08-03T09:33:52.403

```
for (u = b.size(), v = b.back(); u--; v = p[v]) 
   b[u] = v; 
```

在上面的代码中，`u`and`v`用`b.size()`and初始化`b.back()`。

每次检查条件时，它也会执行减量语句，即`u--`。

当变成时，`for`循环将退出。`u``0`

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2012-08-23T07:22:21.883

C#中遇到的错误本身就解决了这个疑问。for 循环搜索一个

> 错误的

终止的条件。正如我们所知，

> (BOOL) FALSE = (int) 0

但与 C++ 不同，C# 无法自行处理。所以你正在寻找的条件是

> 你——

但您必须在 C# 中明确给出条件

> u-- != 0

或者

> u--> 0

但还是尽量避免这种编码做法。这

> while 循环

上面的回答是您最简化的版本之一

> for循环。

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2012-08-27T17:39:00.667

如果您习惯于 C/C++，那么这段代码并不难阅读，尽管它非常简洁，而且代码也不是那么好。所以让我解释一下比其他任何东西都更像 Cism 的部分。首先，C for 循环的一般语法如下所示：

```
for (<initialization> ; <condition>; <increment>)
{
    <code...>
} 
```

初始化代码运行一次。然后在每个循环之前测试条件，最后在每个循环之后调用增量。所以在你的例子中你会发现条件是`u--`

为什么`u--`在 C 而不是 C# 中作为条件工作？因为 C 隐式地将很多东西转换为 bools 并且可能会导致麻烦。对于一个数字，任何非零都是真，零是假。所以它会从 b.size()-1 倒数到 0。在条件中有副作用有点烦人，最好把它放在 for 循环的增量部分，尽管有很多 C代码做到这一点。如果我写它，我会这样做：

```
for (u = b.size() - 1, v = b.back(); u>=0; --u) 
{
    b[u] = v;
    v = p[v]
} 
```

原因是，至少对我来说，它更清楚。for 循环的每个部分都完成了它的工作，仅此而已。在原始代码中，条件是修改变量。增量部分正在做一些应该在代码块等中的事情。

逗号运算符也可能会让您陷入循环。`x=1,y=2`在 C中，就编译器而言，类似的东西看起来像是一条语句，并且适合初始化代码。它只是评估每个部分并返回最后一个部分的值。例如：

```
std::cout << "(1,2)=" << (1,2) << std::endl; 
```

会打印出 2。

# facebook - 是否可以通过开放图邀请用户朋友参加由 Facebook 上的应用程序创建的活动？

> ID：11738942
> 
> 赞同：1
> 
> 时间：2012-07-31T11:19:58.740
> 
> 标签：facebook, facebook-graph-api

是否可以通过开放图邀请用户朋友参加 Facebook 上应用程序创建的活动？还是用户必须创建/拥有该事件？

同样，是否可以通过开放图邀请用户朋友参加 Facebook 页面创建的活动？还是用户必须创建/拥有该事件？

最后 - create_event 是否需要用户批准，即使他们只是邀请他们的朋友参加活动，而不是创建该活动（因为它是由应用程序/页面创建的）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T13:33:51.737

是的，您可以邀请用户参加用户有权访问的任何活动（公共活动或受邀参加具有邀请权限的活动）。但是，邀请始终需要 create_event 权限。请记住，应用邀请的用户**不会**收到通知，但该活动将出现在他们即将举行的活动列表中。

更多信息： [https ://developers.facebook.com/docs/reference/api/event/](https://developers.facebook.com/docs/reference/api/event/)

# python - 在 python 解释器 -c 命令中使用条件

> ID：11738946
> 
> 赞同：6
> 
> 时间：2012-07-31T11:20:07.547
> 
> 标签：python, command-line, conditional

我试图弄清楚如何将以下条件语句传递给 python 解释器的命令选项（-c）。

```
if sys.maxsize > 2**32:
    print '64'
else:
    print '32'

64 
```

但是，我不断收到语法错误，例如：

```
>python -c "import sys; if sys.maxsize > 2**32: print '64' else: print '32';"
  File "<string>", line 1
    import sys; if sys.maxsize > 2**32: print '64' else: print '32';
                 ^
SyntaxError: invalid syntax 
```

我发现很难找到这种用法的好例子。我一定在这里错过了一些大事......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-31T11:26:26.937

经过（非常）简短的搜索，我在任何地方都找不到此文档，但似乎`-c`严格采用*表达式*（即，可以出现在赋值的 RHS 上的东西），而不是语句。要在您的情况下解决此问题，您需要做两件事：

1.  使用[print 函数](http://docs.python.org/library/functions.html#print)（函数调用是一个表达式）而不是 print 语句
2.  使用 Python 的`a if b else c` [条件表达式](http://docs.python.org/whatsnew/2.5.html#pep-308-conditional-expressions)

这给了你：

```
lvc@tiamat:~$ python -c "from __future__ import print_function; import sys; print('64' if sys.maxsize > 2**32 else '32')"
64 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-31T11:41:01.867

现有的两个答案更好，但这里有一个替代方案（用 Python 2.7 测试）：

```
> python -c 'import sys; print 64 if sys.maxsize > 2**32 else 32'
64 
```

另请参阅：[Python 是否有三元条件运算符？](https://stackoverflow.com/q/394809/78845)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T11:36:47.620

您可以使用多行（至少在 bash 中）：

```
$ python -c "import sys
> if sys.maxsize > 2**32:
>  print '64'
> else:
>  print '32'"
64 
```

要获取所有平台信息，您可以：

```
$ python -mplatform 
```

或者只是一个架构：

```
$ python -c "import platform; print platform.architecture()"
('64bit', 'ELF') 
```

# php - PHP 警告：n 字节的 POST 内容长度超过第 0 行未知中 3145728 字节的限制

> ID：11738949
> 
> 赞同：9
> 
> 时间：2012-07-31T11:20:19.420
> 
> 标签：php

在我的错误日志中发现上述错误我感到非常惊讶，因为我认为我已经完成了必要的工作来捕获我的 PHP 脚本中的错误：

```
if ($_FILES['image']['error'] == 0)
{
 // go ahead to process the image file
}
else
{
 // determine the error
 switch($_FILES['image']['error'])
 {
  case "1":
  $msg = "Uploaded file exceeds the upload_max_filesize directive in php.ini.";
  break;
  ....
 }
} 
```

在我的 PHP.ini 脚本中，相关设置是：

```
memory_limit = 128M
post_max_size = 3M
upload_max_filesize = 500K 
```

我知道 3M 相当于 3145728 字节，这就是触发错误的原因。如果文件大小大于 500k 但小于 3M，则 PHP 脚本将能够正常运行，并在`$msg`as per中发出错误消息`case 1`。

`post_max_size`当帖子大小超过但仍在内存限制内时，如何捕获此错误，而不是让脚本突然终止并发出 PHP 警告？我在[这里](https://stackoverflow.com/questions/11719495/php-warning-post-content-length-of-8978294-bytes-exceeds-the-limit-of-8388608-b)、[这里](https://stackoverflow.com/questions/6315358/php-warning-post-content-length-of-113-bytes-exceeds-the-limit-of-1988100096-b)和[这里](https://stackoverflow.com/questions/6279897/php-post-content-length-of-11933650-bytes-exceeds-the-limit-of-8388608-bytes)查看了类似的问题，但找不到答案。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-31T17:05:27.107

找到了不直接处理错误的替代解决方案。以下代码由软件工程师 Andrew Curioso 在他的[博客](http://andrewcurioso.com/2010/06/detecting-file-size-overflow-in-php/)中编写：

```
if($_SERVER['REQUEST_METHOD'] == 'POST' && empty($_POST) &&
     empty($_FILES) && $_SERVER['CONTENT_LENGTH'] > 0)
{
  $displayMaxSize = ini_get('post_max_size');

  switch(substr($displayMaxSize,-1))
  {
    case 'G':
      $displayMaxSize = $displayMaxSize * 1024;
    case 'M':
      $displayMaxSize = $displayMaxSize * 1024;
    case 'K':
       $displayMaxSize = $displayMaxSize * 1024;
  }

  $error = 'Posted data is too large. '.
           $_SERVER[CONTENT_LENGTH].
           ' bytes exceeds the maximum size of '.
           $displayMaxSize.' bytes.';
} 
```

正如他的文章中所解释的，当帖子大小超过 时，和`post_max_size`的超全局数组将变为空。因此，通过测试这些并确认有一些内容正在使用 POST 方法发送，可以推断出发生了这样的错误。`$_POST``$_FILES`

[这里](https://stackoverflow.com/questions/2133652/how-to-gracefully-handle-files-that-exceed-phps-post-max-size)实际上有一个类似的问题，我之前没能找到。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T11:24:43.453

您可以在上传之前先用javascript检查它吗？

```
// Assumed input for file in your HTML
<input type="file" id="myFile" />

//binds to onchange event of your input field
$('#myFile').bind('change', function() {
    alert(this.files[0].size);
}); 
```

你也可以在它周围弹出一个 try catch：

```
try 
{
    if (!move_uploaded_file( 'blah blah' )) 
    {
        throw new Exception('Too damn big.');
    }
    // Can do your other error checking here...
    echo "Upload Complete!";
} 
catch (Exception $e) 
{
    die ('File did not upload: ' . $e->getMessage());
} 
```

# android - 如何增加 Table Raw 中特定 EditText 的宽度（表格布局）

> ID：11738950
> 
> 赞同：1
> 
> 时间：2012-07-31T11:20:21.113
> 
> 标签：android, android-layout, android-tablelayout

我正在使用表格布局。

这里我有三个`EditText's`相同`width ="200dp"`的。

但我想增加 3rd 的大小`EditText`。

我做了它`width="wrap_content"`，但所有其他 EditText 也得到了“ `wrap_content`”

我怎样才能在不影响其他的情况下增加`width`3rd 。`EditText``EditText's`

第三个 EditText 的代码：-

```
 <TableRow 
            android:gravity="center_horizontal" 
            android:layout_marginBottom="10dp">
            <TextView 
                android:layout_width="match_parent" 
                android:layout_height="wrap_content" 
                android:gravity="left" 
                android:id="@+id/addl" 
                android:text="Address" 
                />
            <TextView 
                android:layout_width="wrap_content" 
                android:layout_height="wrap_content" 
                android:gravity="right" 
                android:id="@+id/colon"
                            android:text=":" />

            <EditText 
                android:layout_width="250dp" 
                android:layout_marginLeft="20dp" 
                android:id="@+id/et"
                android:singleLine="true"/>            
        </TableRow> 
```

![在此处输入图像描述](../Images/3998c01db4bad6dfd4c13cecaa95e8d6.png) 现在我只想增加 `width`地址`EditText`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T11:28:04.587

`layout_weight`我认为您可以通过 s 的参数来实现这一点，`EditText`如下所示

```
<?xml version="1.0" encoding="utf-8"?>
<TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/relativeLayout12"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="#909090"
    android:padding="10dp" >

    <TableRow
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_marginBottom="10dp"
        android:layout_marginTop="10dp" >

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Student ID"
            android:textColor="#000000" />

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:gravity="left"
            android:paddingLeft="5dp"
            android:paddingRight="5dp"
            android:text=":"
            android:textColor="#000000" />

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="6" />
    </TableRow>

    <TableRow
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_marginBottom="10dp" >

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Name"
            android:textColor="#000000" />

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:gravity="left"
            android:paddingLeft="5dp"
            android:paddingRight="5dp"
            android:text=":"
            android:textColor="#000000" />

        <EditText
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1" />
    </TableRow>

    <TableRow
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_marginBottom="10dp" >

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Class"
            android:textColor="#000000" />

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:gravity="left"
            android:paddingLeft="5dp"
            android:paddingRight="5dp"
            android:text=":"
            android:textColor="#000000" />

        <EditText
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1" />
    </TableRow>

    <TableRow
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_marginBottom="10dp" >

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Address"
            android:textColor="#000000" />

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:gravity="left"
            android:paddingLeft="5dp"
            android:paddingRight="5dp"
            android:text=":"
            android:textColor="#000000" />

        <EditText
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1" />
    </TableRow>

</TableLayout> 
```

**编辑**

这是结果

![在此处输入图像描述](../Images/19267f32f0240cb11034c71e658b0b6e.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T04:15:05.827

put the property `android:stretchColumns="2"` in `TableLayout`

```
<TableLayout android:stretchColumns="2" ... > .... </TableLayout> 
```

# ios - 使用 iOS 在 phonegap 中打开文件（docx、pptx、pdf）

> ID：11738952
> 
> 赞同：0
> 
> 时间：2012-07-31T11:20:25.277
> 
> 标签：ios, cordova

我正在尝试创建一个从 Internet 下载各种文件（docx、pptx 等）的应用程序。

下载部分工作正常。文件正在下载到应用程序的 Documents 文件夹中。

现在我需要在它们的默认应用程序中打开这些文件（`DOcumentTogo, Office SUits`等等）。

任何人都可以建议一个`phonegap/cordova`插件`iOS`甚至代码片段来打开文件也可以。

我会设法将它添加到插件中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T11:48:32.613

在 html 5 中使用 object 元素，它可以帮助你，例如：

```
>  <object width="400" height="400" data="p.pdf"></object> 
```

它将在我们的应用程序中显示 pdf 文件（在 ios 中测试）

# java - 使用 Jackson 反序列化 Jersey 输入

> ID：11738955
> 
> 赞同：0
> 
> 时间：2012-07-31T11:20:34.277
> 
> 标签：java, json, jersey, jackson

我有这样签名的服务方法

```
Foo transform(Foo origin, String key){} 
```

我想使用泽西岛使其远程。Foo 应该由 Jackson 序列化/反序列化为 JSON。我也想使用 GET 来处理这类请求。我添加了 initParam FEATURE_POJO_MAPPING ，它将 Foo 作为字符串然后反序列化它可以很好地工作。喜欢

```
@GET
@Path("transform")
@Produces({MediaType.APPLICATION_JSON})   
Foo transform(@QueryParam("origin") String origin, @QueryParam("key") String key){
     return transform(deserialize(foo), key);
}

Foo transform(Foo origin, String key){} 
```

如您所见，Jersey 使用 Jackson 可以完美地序列化输出 Foo。但输入不是。

> 严重：在资源和/或提供程序类中检测到以下错误和警告：严重：在索引 0 的参数处缺少方法 public Foo Transformer.transform(Foo,java.lang.String) 的依赖
> 项严重：方法，公共 Foo Transformer .transform(Foo,java.lang.String)，用资源的 GET 注释，Transformer 类，不被识别为有效的资源方法。

我能做些什么来防止杰克逊用手打电话？

# probability - 宾果概率

> ID：11738956
> 
> 赞同：2
> 
> 时间：2012-07-31T11:20:42.727
> 
> 标签：probability

我正在尝试编程挑战[Bingo Probability](http://programmingpraxis.com/2009/02/19/bingo/)，解决方案似乎都涉及生成宾果卡，然后通过迭代来确定概率。有没有涉及概率论的更简单的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-08-16T04:07:44.920

传统的宾果游戏通常在所有回合中都有获胜者。概率与该轮注册的卡片总数有关，与某些用户拥有的卡片数量有关。

如果您有 1 张牌，并且该轮有 100 张牌，则您有 1/100 的获胜概率。

如果您更改宾果卡的生成，您可以延长或缩短回合，但这不会改变玩家获胜的概率。

为了获得更好的精度，您还可以通过游戏中的球总数来计算概率。

# r - 一个基本的 R 函数

> ID：11738958
> 
> 赞同：6
> 
> 时间：2012-07-31T11:20:44.890
> 
> 标签：r

在为程序员阅读 R 时，我看到了这个函数

```
oddcount <- function(x) {
  k <- 0
  for (n in x) {
    if (n %% 2 == 1) k <- k+1
  }
  return(k)
} 
```

我宁愿用更简单的风格写它（即用lisp）

```
(defn odd-count [xs]
  (count (filter odd? xs))) 
```

我看到函数长度等于计数，我可以写奇数吗？那么有内置的地图/过滤器/删除类型功能吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-31T12:21:57.183

在 R 中，当您使用向量时，人们通常更喜欢一次处理整个向量，而不是循环遍历它（例如，参见[这个](https://stackoverflow.com/questions/7142767/why-are-loops-slow-in-r)讨论）。

从某种意义上说，R 确实具有“内置”过滤器和归约函数：您可以选择向量子集的方式。它们在 R 中非常方便，并且有几种方法可以解决 - 我将向您展示几个，但是如果您阅读 R 并在这样的网站上查看其他人的代码，您会学到更多。我还会考虑查看`?which`and `?'['`，其中的示例比我在这里做的要多。

第一种方法是简单地选择您想要的元素。如果您知道所需元素的索引，则可以使用它：

```
x <- letters[1:10]
> x
 [1] "a" "b" "c" "d" "e" "f" "g" "h" "i" "j" 
```

如果我们只想要前五个字母，我们可以这样写：

```
x[1:5]
x[c(1,2,3,4,5)] # a more explicit version of the above 
```

您还可以使用减号选择*不需要的元素，例如：*

```
 x[-(6:10)] 
```

选择元素的另一种方法是使用布尔向量：

```
x <- 1:5
selection <- c(FALSE, TRUE, FALSE, TRUE, FALSE)
x[selection]   # only the second and fourth elements will remain 
```

这很重要，因为我们可以通过将向量放入比较函数中来创建这样的向量：

```
selection <- (x > 3)
> selection
 [1] FALSE FALSE FALSE  TRUE  TRUE

x[selection]   # select all elements of x greater than 3
x[x > 3]       # a shorthand version of the above 
```

再一次，我们可以选择与我们使用的比较相反的（注意，因为它是布尔值，所以我们使用`!`而不是`-`）：

```
x[!(x > 3)]    # select all elements less than or equal to 3 
```

如果要进行向量比较，则应考虑该`%in%`函数。例如：

```
x <- letters[1:10]
> x %in% c("d", "p", "e", "f", "y")
 [1] FALSE FALSE FALSE  TRUE  TRUE  TRUE FALSE FALSE FALSE FALSE

# Select all elements of x that are also "d", "p", "e", "f", or "y"
x[x %in% c("d", "p", "e", "f", "y")]  
# And to select everything not in that vector:
x[!(x %in% c("d", "p", "e", "f", "y"))] 
```

以上只是几个例子；我肯定会推荐文档。我知道在您已经接受答案之后这是一篇很长的帖子，但是这种事情非常重要，如果您是 R 新手，理解它将为您节省很多时间和将来的痛苦，所以我想我将与您分享几种方法。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-07-31T11:37:31.697

一种更 R 的方法是避免`for`循环，并使用矢量化：

```
oddcount <- function(x) {
  sum(x %% 2)
} 
```

和 2之间的比较`x`输出一个向量，因为`x`它本身就是一个向量。Sum than 计算向量的和，其中`TRUE`等于 1 且`FALSE`等于 0。通过这种方式，函数计算向量中奇数的个数。

这已经导致更简单的语法，尽管对于非向量化的人来说，`for`循环往往更容易阅读。我非常喜欢矢量化语法，因为它要短得多。不过，我更愿意使用更具描述性的名称`x`，例如`number_vector`.

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-31T11:23:04.577

您应该查看[funprog](http://stat.ethz.ch/R-manual/R-devel/library/base/html/funprog.html)库，其中包括`map`、`filter`等`reduce`。

# javascript - Gmail Divs - 它们变化的速度有多快？

> ID：11738961
> 
> 赞同：3
> 
> 时间：2012-07-31T11:20:49.943
> 
> 标签：javascript, jquery, gmail

目前正在开发一个使用 jquery 插入几个按钮的 Gmail 扩展。

我依赖于`canvas_frame`iframe 和一些`div`用他们的`class`名字而不是他们的 ID 来引用的人。

这有多可靠？Gmail 多久更改一次班级名称？

附带说明一下，我想到了一个从服务器中不断提取的小型 javascript 文件，它会`class`在 Gmail 更改名称时刷新名称。我不喜欢这种方法（更改代码），因为这是一个安全扩展，这可能会向用户请求更多权限。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T13:35:10.663

由于这几乎是一种 hack，因此无法保证 Google 何时会更改底层 HTML 结构。

这让我想起了[将 Gmail 的牛奶作为浏览器附加组件](http://www.rememberthemilk.com/services/gmail/addon/)。他们不是通过 Gmail API 而是通过几乎破解 Gmail HTML 来完成插件的。由于谷歌“升级”Gmail，它经常*中断*。

为了让您了解 Gmail 的升级频率，请查看RTM 团队正在跟踪的[Gmail 版本列表。](http://www.rememberthemilk.com/services/gmail/addon/status/)Gmail基本上每隔几天更新一次！

不过，对 RTM 工程师表示敬意，他们通常会修复他们的插件，以便在最新的 Gmail 出现故障时相对较快地支持它。

话虽如此，简而言之，不知道`<div id="canvas_frame">`变化的速度有多快，但至少现在您知道 Gmail 的变化速度有多快。

# eventbrite - 通过 Eventbrite event_search API 丢失事件

> ID：11738965
> 
> 赞同：0
> 
> 时间：2012-07-31T11:21:02.500
> 
> 标签：eventbrite

我正在使用 event_search API 方法让我的用户找到他们的 Eventbrite 事件。我收到了很多来自用户的投诉，称他们的活动没有出现。事实上，event_search 似乎根本没有返回大量事件。

一个例子：[http](http://blogher12.eventbrite.com/) ://blogher12.eventbrite.com/ 。这是一个大事件，它在几天后开始，它有一个非常独特的名字。它通常是一个应该很容易通过 event_search 找到的事件。

然而，无论我尝试什么搜索词，在 event_search 的结果中都看不到它。您可以在[http://developer.eventbrite.com/doc/events/event_search/](http://developer.eventbrite.com/doc/events/event_search/)尝试自己- 在“关键字”字段中输入“BlogHer”，您会得到一小部分在其中提及“BlogHer”的边缘事件描述但不是主要事件。

这只是我在过去几周看到的许多失踪事件之一。我最初认为 EventBrite API 可能没有返回门票销售已关闭的事件，这可以解释一些缺失的事件。但我真的看不出有任何理由让 BlogHer 在行动中失踪。

是否有让 event_search 返回所有事件的技巧？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T23:51:47.183

事件所有者已将该事件配置为“私有”，这会阻止它通过 Eventbrite 的公共搜索索引共享。

如果您认为该活动应该是公开的（并且可以通过 API 访问），请随时使用活动页面上的“联系主持人”链接将您的建议传递给活动组织者。

# matlab - gui 数据存储失败

> ID：11738977
> 
> 赞同：0
> 
> 时间：2012-07-31T11:21:41.067
> 
> 标签：matlab, user-interface

我使用手册中的描述保存和加载 gui 数据

```
function readImage(filename, hObject, handles)
  handles.image.data = imageRGBNoEdge;
  guidata(hObject,handles); 
```

和

```
function createHistogram(handles)
  imageRGB = handles.image.data; 
```

它们都直接在另一个之后调用

```
readImage(imageFile,hObject,handles);
createHistogram(handles); 
```

然而，在他的第二个函数中，handles.image 是未知的。

```
??? Reference to non-existent field 'image'.
Error in ==> ui_histogram>createHistogram at 252
imageRGB = handles.image.data; 
```

但是，如果我第二次调用该函数，它是否已知？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T12:25:02.050

尽管有它的名字，但是句柄是一个结构而不是句柄类，因此在 readImage 中更改它不会将更改传播到调用函数。

您可以将 readImage 更改为

```
function handles = readImage(filename, hObject, handles) 
```

并调用它

```
handles = readImage(imageFile,hObject,handles); 
```

或添加对 guidata 的调用

```
handles = guidata(hObject); 
```

就在您调用 createHistogram 之前。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T12:01:32.200

我正在解决此时`imageRGBNoEdge`已经定义的假设。

通过简要查看[guidata](http://www.mathworks.com/help/techdoc/ref/guidata.html)函数文档，看起来这可能是问题的一部分。当您尝试在其中加载数据时，`createHistogram`您需要使用以下内容：`imageRGB = guidata(hObject)`因为这就是告诉`guidata`您要获取哪些数据并且您已经将数据保存到该对象句柄（`hObject`）

此外，我真的不能发表更多评论，因为看起来每个函数都缺少相当多的代码。希望这将帮助您朝着正确的方向前进！

# wpf - 两个文本框同步更新

> ID：11738981
> 
> 赞同：0
> 
> 时间：2012-07-31T11:21:56.993
> 
> 标签：wpf, events, mvvm, binding

我在 wpf 中有两个文本框，第一个用于克，第二个用于毫升。如果用户向另一个输入某些内容并失去焦点，我需要更新第二个。它应该工作克->毫升和毫升->克，但我有属性更改的问题，因为更新其中一个会导致第二个触发属性发生更改，因此它会再次重新计算并覆盖以前的值。我希望你明白我需要什么。谢谢你的帮助 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T11:30:45.730

在您的绑定集中

> UpdateSourceTrigger=LostFocus

.我认为它的发生是因为在你的绑定中

> UpdateSourceTrigger=PropertyChanged

。我希望这个能帮上忙。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T12:15:16.193

在属性的设置器中，您可以为要更新的其他属性抛出 PropertyChanged。您还可以调用 setter 中的方法来进行一些计算并抛出 PropertyChanged。

# c++ - recv() 延迟问题

> ID：11738983
> 
> 赞同：1
> 
> 时间：2012-07-31T11:22:06.390
> 
> 标签：c++, sockets, recv

我注意到这个问题已经被问过很多次了，但似乎没有一个解决方案适用于我。在继续之前，我将为您发布一些代码：

```
 // Await the response and stream it to the buffer, with a physical limit of 1024 ASCII     characters
    stringstream input;
    char buffer[4096*2];
    while (recv(sock, buffer, sizeof(buffer) - 1, MSG_WAITALL) > 0)
        input << buffer;
    input << '\0';

    // Close the TCP connection
    close(sock);
    freehostent(hostInfo); 
```

这是我的要求：

```
 string data;
    {
        stringstream bodyStream;

        bodyStream
            << "POST /api/translation/translate HTTP/1.1\n"
            << "Host: elfdict.com\n"
            << "Content-Type: application/x-www-form-urlencoded\n"
            << "Content-Length: " << (5 + m_word.length())
            << "\n\nterm=" << m_word;

        data = bodyStream.str();
    }

    cout << "Sending HTTP request: " << endl << data << endl; 
```

我对这种编程非常陌生（并且堆栈溢出 - 宁愿将它拖出并将我的头撞到墙上，直到我自己解决问题但我在这里迷路了！）并且非常感谢帮助找出为什么需要这样长！我已经研究过将其设置为非阻塞，但在使其按预期工作时遇到了问题。虽然也许这里的人可以为我指出正确的方向，但如果非阻塞路线是我需要走的路。

我看到很多人喜欢使用库，但我想学习这样做！

我也是在 mac 上编程和使用套接字的新手。可能不是最好的第一次项目，但我现在开始了！所以我希望继续:) 任何帮助都会很好！

先感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T11:30:41.907

之所以需要很长时间才能接收，是因为你告诉系统等到它收到你要求的*所有*数据，即8k字节，或者连接出现错误或关闭。这就是旗帜的`MSG_WAITALL`作用。

对此的一种解决方案是使套接字成为非阻塞的，并在循环中进行连续读取，直到出现错误或连接关闭。

如何使套接字非阻塞取决于平台，在 Windows 上使用该[`ioctlsocket`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms738573%28v=vs.85%29.aspx)功能完成，在 Linux 或类似系统上使用该[`fcntl`](http://linux.die.net/man/2/fcntl)功能完成：

```
int flags = fcntl(sock, F_GETFL, 0);
flags |= O_NONBLOCK;
fcntl(sock, F_SETFL, flags); 
```

然后你像这样从套接字读取：

```
std::istringstream input;

for (;;)
{
    char buffer[256];
    ssize_t recvsize;

    recvsize = recv(sock, buffer, sizeof(buffer) - 1, 0);
    if (recvsize == -1)
    {
        if (errno != EAGAIN && errno != EWOULDBLOCK)
            break;  // An error
        else
            continue; // No more data at the moment
    }
    else if (recvsize == 0)
        break;  // Connection closed

    // Terminate buffer
    buffer[recvsize] = '\0';

    // Append to input
    input << buffer;
} 
```

上述循环的问题是，如果没有收到任何数据，它将永远循环。

* * *

但是，您的代码中有一个更严重的问题：您接收到缓冲区，然后将其附加到`stringstream`，但您没有*终止*缓冲区。您不需要终止流中的字符串，它会自动完成，但您*确实*需要终止缓冲区。

这可以这样解决：

```
int rc;
while ((rc = recv(sock, buffer, sizeof(buffer) - 1, MSG_WAITALL)) > 0)
{
    buffer[rc] = '\0';
    input << buffer;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T11:38:39.957

发生这里的问题是因为您指定了`MSG_WAITALL`标志。它强制`recv`保持阻塞，直到收到所有指定的字节（`sizeof(buffer) - 1`在您的情况下，而对方发送的消息显然更小）或发生错误并返回 -1 并`errno`适当设置变量。

我认为，一个更可取的选择是`recv`在循环中没有任何标志，直到另一端的套接字关闭（recv 返回 0）或收到一些分隔符。

但是，您应该小心使用`input << buffer`，因为`recv`每次迭代可能只返回一小部分数据（例如，20 个字节），因此您应该将这些数据量准确地放入字符串流。接收到的字节数由`recv`.

# c++ - 创建用于写入 TCP 套接字的消息

> ID：11738984
> 
> 赞同：0
> 
> 时间：2012-07-31T11:22:10.527
> 
> 标签：c++, sockets, tcp, boost-asio

我真的不知道如何提出这个问题，但我们开始吧。

所以让我们假设我正在使用 Boost 库中的 ASIO 来使用 TCP 套接字连接到服务器并向其写入特定消息。

该消息包含一些用户数据，如下所示：1 个字节（数据包 ID）、4 个字节（整数）、用户以 null 结尾的字符串和 6 个零字节（由服务器保留但未使用）。

组装这样的消息以与 ASIO 的 boost::asio::buffer 函数一起使用的最方便的方法是什么？

在这一点上我真的很困惑。非常感谢帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T11:44:30.630

`asio::buffer()`您可以将结构调整为[缓冲区序列](http://www.boost.org/doc/libs/1_50_0/doc/html/boost_asio/reference/ConstBufferSequence.html)，而不是使用函数制作单个缓冲区- asio 函数接受这样的概念。以这种方式发送固定--null-terminated--null-terminated-fixed-fixed-etc 之类的模式会很方便...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T11:35:28.557

A. 定义可以序列化的数据包结构。

```
class ISerializable
{
public:
    virtual ~ISerializable(){}

    virtual void serialize(std::ostream& stream) = 0;
};

class LoginPacket : public ISerializable
{
public:
    // Constructor and access functions

    virtual void serialize(std::ostream& stream)
    {
        stream.write((const char*)&packetId, 1);
        stream.write((const char*)&accountId, 4);
        stream.write(username.c_str(), username.size() + 1);
        // Write the unused 6-bytes of zero
        int zero(0);
        stream.write((const char*)&zero, 4);
        stream.write((const char*)&zero, 2);
    }

private:
    unsigned char packetId;
    unsigned int32_t accountId;
    std::string username;
}; 
```

B. 现在，要使用这个数据包类，请执行以下操作：

```
LoginPacket packet;
// Fill details for the packet
std::stringstream data;
packet.serialize(data);
// Send the data to the network
yourSocket.send(data.str().c_str(), data.str().size()); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T11:56:56.297

boost::asio::buffer() 函数将其他类型的缓冲区调整或转换为 asio 使用的缓冲区。

您应该使用某种应用程序缓冲区，填充该缓冲区，然后将缓冲区传递给 asio 以写入线路。例如：

```
std::vector< char > data;

data.push_back( id );
data.push_back( i & 0xff );
data.push_back( ( i >> 8 ) & 0xff );
data.push_back( ( i >> 16 ) & 0xff );
data.push_back( ( i >> 24 ) & 0xff );

const char* const str = s.c_str();
data.insert( data.end(), str, str + std::strlen( str ) );

for ( int pad = 0; pad != 4; ++pad )
    data.push_back( 0 );

boost::asio::write( socket, boost::asio::buffer( data ) ); 
```

# configuration - RabbitMQ Shovel 配置与 Alternate-Exchange

> ID：11738985
> 
> 赞同：1
> 
> 时间：2012-07-31T11:22:11.347
> 
> 标签：configuration, rabbitmq

我正在尝试使用声明列表为 RabbitMQ 配置 Shovel 插件。创建远程交换时，我已将远程交换配置为具有备用交换。

我的问题是我无法让 shovel 的配置文件包含此参数，因此 RabbitMQ 在启动时崩溃。

这是我的配置的样子：

```
[
    {mnesia, [{dump_log_write_threshold, 100}]},
    {rabbit, [{vm_memory_high_watermark, 0.4}]},
    {rabbitmq_shovel,
        [{shovels,
            [{call_stats_shovel,
                [{sources, [{broker, "amqp://guest:guest@localhost:5672/test"},
                    {declarations,
                        [{'queue.declare', [{queue, <<"incoming">>}, durable]},
                        {'exchange.declare',[{exchange, <<"my-exchange-topic">>},{type, <<"topic">>},durable]},
                        {'queue.bind',[{exchange, <<"my-exchange-topic">>},{queue, <<"incoming">>}]}
                ]}]},
                {destinations, [{broker, "amqp://guest:guest@172.16.3.162:5672/blah"},
                    {declarations,
                    [
                        {'queue.declare',[{queue, <<"billing">>},durable]},
                        {'exchange.declare',[{exchange, <<"my-exchange-topic">>},{type, <<"topic">>},{alternate_exchange, <<"alt">>}, durable]},
                        {'queue.bind',[{exchange, <<"my-exchange-topic">>},{queue, <<"billing">>},{routing_key, <<"physical">>}]}
                    ]}
                ]},
                {queue, <<"incoming">>},
                {ack_mode, no_ack},
                {publish_properties, [{delivery_mode, 2}]},
                {reconnect_delay, 5}
                ]}
            ]
        }]
    }
]. 
```

问题出在名为 my-exchange-topic 的目标交换上。如果我取出声明部分，那么配置文件将起作用。

这是错误：

=INFO REPORT==== 2012 年 7 月 31 日::12:15:25 === 应用程序：rabbitmq_shovel 退出：{{invalid_shovel_configuration,call_stats_shovel, {invalid_parameter_value,destinations, {unknown_fields,'exchange.declare', [alternate_exchange] }}}, {rabbit_shovel,start,[normal,[]]}} 类型：永久

如果我将alternate_exchange 部分排除在声明之外，我会在RabbitMQ Web 管理中收到此错误：

> {{shutdown, {server_initiated_close,406, <<"PRECONDITION_FAILED - 不等价的 arg 'alternate-exchange' 用于 vhost 'blah' 中的交换 'my-exchange-topic'：没有收到，但当前是 'longstr' 类型的值 'alt' '">>}}, {gen_server,call, [<0.473.0>, {call, {'exchange.declare',0,<<"my-exchange-topic">>,<<"topic">> ,假,真,假,假,假,[]},无,<0.444.0>},无穷大]}}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T15:55:56.550

对于任何想了解如何配置需要额外参数的交换和队列的人，您可以这样做：

```
{'exchange.declare',[{exchange, <<"my-exchange-topic">>},{type, <<"topic">>}, durable, {arguments, [{<<"alternate-exchange">>, longstr, <<"alternate-exchange">>}]}  ]}, 
```

你可以对队列做类似的事情：

```
{'queue.declare',[{queue, <<"my-queue">>},durable, {arguments, [{<<"x-dead-letter-exchange">>, longstr, <<"dead-letter-queue">>}]}]} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-25T12:14:09.280

为了澄清上面的评论，如果是 exchange2exchange 铲子，配置将是：

```
{'exchange.declare',[{exchange, <<"my-exchange-topic">>},{type, <<"topic">>}, durable, {arguments, [{<<"alternate-exchange">>, longstr, <<"name-of-your-alternate-exchange">>}]}  ]}, 
```

# iphone - 如何在tableview中创建多个uipickerview？

> ID：11738991
> 
> 赞同：0
> 
> 时间：2012-07-31T11:22:27.120
> 
> 标签：iphone, objective-c, ios4

PickerView 委托方法...

```
- (NSInteger)numberOfComponentsInPickerView:(UIPickerView *)pickerView
{
    return 1;
}

- (void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component
{
        if (didSelectedRow ==1) 
        {
            strChkDistanceValue = [arrDistance objectAtIndex:row];
        }
        else 
        {
            strChkDateRangeValue = [arrDateRange objectAtIndex:row];
        }
}

- (NSInteger)pickerView:(UIPickerView *)pickerView numberOfRowsInComponent:(NSInteger)component;
{
    if(didSelectedRow ==1)
    {
        return [arrDistance count];
    }
    else
    {
        return [arrDateRange count];
    }
}

- (NSString *)pickerView:(UIPickerView *)pickerView titleForRow:(NSInteger)row forComponent:(NSInteger)component;
{
    if(didSelectedRow ==1)
    {
        strChkarray =@"arrDistance";
        return [arrDistance objectAtIndex:row];
    }
    else
    {
        strChkarray =@"arrDateRange";
        return [arrDateRange objectAtIndex:row];
    }
} 
```

我正在使用上面的代码...我正在使用`pickerview`in `tableview`...有两个选择器视图...当我使用第一个选择器视图时，当我在选择器视图中选择第三行时，第一个选择器视图数组显示在选择器中我选择第二个选择器视图然后显示第二个数组列表，但第二个数组列表显示从第 3 行开始...与第一个选择器相同...但我想显示在 pickerviw 中数组的第一行..请帮帮我.. .

感谢和问候
Rahul Virja

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T11:25:20.727

您应该使用 UIPickerView 的以下方法来选择特定的行。

```
- (void)selectRow:(NSInteger)row inComponent:(NSInteger)component animated:(BOOL)animated; 
```

# java - Java 在运行时设置时区

> ID：11738992
> 
> 赞同：2
> 
> 时间：2012-07-31T11:22:29.490
> 
> 标签：java, netbeans-7

我正在开发一个桌面应用程序。它将从具有以下内容的用户那里以文本文件的形式获取输入：

```
..................................   
..................................

Mon Jul  9 14:41:07 MDT 2012
..................................
..................................
.................................. 
```

我正在使用这些信息并使用 jfreechart 库创建时间序列图。时区可以是世界上任何可用的东西。但是当我使用这个文件时，它的默认时区是系统的时区（IST），所以不显示 MDT 时间。当我尝试从日期捕获时区然后使用

```
TimeZone.setDefault(TimeZone.getTimeZone("MDT")); 
```

它没有用。当我有 MDT、CDT 等时区的缩写时，如何更改 Java 中的默认时区？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T11:37:14.443

没有时区`MDT`，它是 MST7MDT。采用：

```
TimeZone.setDefault(TimeZone.getTimeZone("MST7MDT")); 
```

另请参阅[Java 的 java.util.TimeZone](http://tutorials.jenkov.com/java-date-time/java-util-timezone.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-31T11:40:10.407

MDT 不是时区键，它是时区的短显示名称，因此 TimeZone.getTimeZone("MDT") 将返回默认时区，即 GMT。Mountain Time 的键是 MST、MST7MDT 等。因此，您需要识别时区的键。请注意，对于相同的短显示名称，有许多不同的键，例如，对于 MDT 短名称，有带有 US/Mountain、US/Arizona、SystemV/MST7MDT、Navajo、Mexico/BajaSur、MST7MDT 和 MST 的键。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T11:26:27.560

使用 Calendar 类中的[setTimeZone(...)](http://docs.oracle.com/javase/6/docs/api/java/util/Calendar.html#setTimeZone%28java.util.TimeZone%29)方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T11:58:06.397

多谢你们。感谢您的快速回复。@vikas 你的回答被证明更有用。我正在使用以下代码，它运行良好。

```
String timezoneLongName = "";

String fileTimeZone     = "MDT"; //timezone could be anything, getting from file.

Date date            = new Date();
String TimeZoneIds[] = TimeZone.getAvailableIDs();

for (int i = 0; i < TimeZoneIds.length; i++) {

    TimeZone tz   = TimeZone.getTimeZone(TimeZoneIds[i]);
    String tzName = tz.getDisplayName(tz.inDaylightTime(date),TimeZone.SHORT);

    if(fileTimeZone.equals(tzName)){
        timezoneLongName = TimeZoneIds[i];
        break;
    }
}

if(timezoneLongName != null && !timezoneLongName.isEmpty() && !timezoneLongName.trim().isEmpty() && timezoneLongName.length() != 0){
    TimeZone.setDefault(TimeZone.getTimeZone(timezoneLongName));
} 
```

尽管“MDT”时区有多个条目，但它在第一次匹配时解决了我的问题，没有任何问题。我已经在 CDT、MDT 和 CDT 时区测试过代码，它运行得非常好。谢谢各位！！！

# objective-c - 如何去除 UIBarButtonItem 光泽效果？

> ID：11738995
> 
> 赞同：1
> 
> 时间：2012-07-31T11:22:32.007
> 
> 标签：objective-c, ios, xcode, cocoa, uibarbuttonitem

我正在尝试在我的工具栏/导航项上删除 UIBarButtonItem 的光泽效果。

我阅读了一些关于对其进行子类化并实现**initWithCustomView**但我不知道如何使用它来呈现没有光泽（玻璃）效果的按钮。

我能做些什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T11:33:10.990

所以你在 IB 或代码中创建一个按钮，然后它就变成了自定义视图。如果您查看 UIBarButtonItem 和 initWithCustomView 的类参考，您会看到 Apple 列出了 5 个使用该技术的示例项目 - 因此您可以看到它们做了什么以及它的外观。