# StackOverflow 问答 12166000-12166999

# google-chrome - 制作可点击链接以在 chrome 中安装扩展程序的规则？

> ID：12166000
> 
> 赞同：2
> 
> 时间：2012-08-28T19:16:37.833
> 
> 标签：google-chrome, google-chrome-extension

我已经为我的公司完成了一个扩展，我想把它放在公司的 wiki 上，这样为了在每个人的机器上得到它，我所要做的就是四处走动并单击链接。

首先，我已经阅读了[http://developer.chrome.com/extensions/hosting.html](http://developer.chrome.com/extensions/hosting.html)中关于托管和自动更新的所有文档。其中一部分让我感到困惑，我找不到更多关于此的信息：

```
Google Chrome considers a file to be installable if either of the following is true:
The file has the content type application/x-chrome-extension
The file suffix is .crx and both of the following are true:
The file is not served with the HTTP header X-Content-Type-Options: nosniff
The file is served with one of the following content types:
empty string
"text/plain"
"application/octet-stream"
"unknown/unknown"
"application/unknown"
"*/*" 
```

这看起来像它想要一个 MIME 样式设置？但我从来没有对此做过任何事情。我有能力将我想要的内容更改为本地托管的 Wiki，我所需要的只是了解需要更改哪些内容才能使链接可安装。我会继续寻找例子。

注意：它没有在应用商店上架的原因是真的没有理由。它是我们公司的品牌，与我们特定服务器的通信是硬编码的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T19:56:47.710

在 21 版（左右）中，Chrome 禁用了对店外扩展进行简单的链接点击安装的功能。[此错误报告](https://code.google.com/p/chromium/issues/detail?id=128748)中讨论了更改：

> 您不再应该能够在 Chrome 中在店外安装扩展程序...为了安装店外扩展程序，用户必须将它们下载到一个目录并将它们拖到`chrome://extensions/`.

因此，不再有任何方法可以简单地通过单击链接来安装扩展程序，除非将其托管在 Web Store 中。您需要下载该文件，然后将其放入`chrome://extensions`.

您引用的文档看起来已经过时（这是 Google 的错，不是您的错）。它绝对没有提到新的拖放要求。它还讨论了文件的“内容类型”和`X-Content-Type-Options`使 CRX 可安装所需的 HTTP 标头；但是，当您将扩展程序放入`chrome://extensions`.

**编辑：**您还可以使用`--enable-easy-off-store-extension-install`命令行标志来恢复旧的安装行为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T00:20:46.537

您可以对托管在网上商店的应用程序进行“[内联安装”。](https://developers.google.com/chrome/web-store/docs/inline_installation)新的变化迫使人们将我们的扩展移动到网上商​​店，但内联安装应该允许您的用户无需离开您的页面即可安装。

# android - How to receive notification from a GridView when it refreshes?

> ID：12166003
> 
> 赞同：1
> 
> 时间：2012-08-28T19:16:54.063
> 
> 标签：android, gridview

A `GridView` has `BaseAdapter` derived class responsible for populating its children. It works fine.

I want to do something when the `GridView` is refreshed. In other words, I wish there was a method "addOnRefreshListner()".

It needs to accommodate API Level as low as 8 (Froyo).

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T19:21:54.243

如果您在自定义适配器中覆盖 BaseAdapter.notifyDataSetChanged() 会怎样？

```
@Override
public void notifyDataSetChanged() {
    super.notifyDataSetChanged();
    // A change has happened and caused the GridView to refresh
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T19:28:11.130

`notifyDataSetChanged()` 是没有 addOnRefreshListener() 的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T19:29:24.953

尝试`View.OnLayoutChangeListener()`为 API 11 或更高版本实现一个。

```
View myView = findViewById(R.id.my_view);
myView.addOnLayoutChangedListener(new OnLayoutChangeListener() {

@Override
public void onLayoutChange(View v, int left, int top, int right, int bottom, int oldLeft, int oldTop, int oldRight, int oldBottom) {

      // Do what you need to do with the height/width since they are now set
    }
}); 
```

# servicestack - How can I unit test a request filter using the ReturnAuthRequired extension method?

> ID：12166005
> 
> 赞同：1
> 
> 时间：2012-08-28T19:16:58.893
> 
> 标签：servicestack

In a previous version of serviceStack I was able to write a request filter for authorization this filter used res.ReturnAuthRequired() when I could not authorize the user. In the current version of servicestack my unit tests now return a null reference exception because ReturnAuthRequired now calls httpRes.EndServiceStackRequest(false); which then calls EndpointHost.CompleteRequest(); How can I unit test this now that there is a reference to the EndpointHost global variable? Should I not use the extension method?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T23:58:14.907

是的，回调需要支持正确完成请求中使用的资源 - 例如，它是[Funq 的新请求范围](https://github.com/ServiceStack/ServiceStack/wiki/The-IoC-container)支持所必需的。

无论如何，我[在这个提交](https://github.com/ServiceStack/ServiceStack/commit/24d5a370a98d50cee87b84462edf3c408d94c76c)中添加了一些空检查，以便在单元测试时更友好，这将从下一个 v3.96 版本开始提供。

# visual-studio-2012 - Visual Studio 2012 说网站项目的项目文件是在环境之外编辑的

> ID：12166007
> 
> 赞同：8
> 
> 时间：2012-08-28T19:17:11.673
> 
> 标签：visual-studio-2012, projects-and-solutions

安装 Visual Studio 2012 并从包含两个“网站”类型项目的 Team Foundation Server 打开/升级 Visual Studio 2010 解决方案后，我不断收到“项目“网站”已在环境外修改”的消息，并带有选项每次向“网站”项目添加或删除文件时重新加载。

这很奇怪，因为据我所知，这种类型的项目没有项目文件，因此无法对其进行编辑，此外，没有人在环境之外编辑任何内容。

有谁知道这是什么原因以及如何解决它？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-28T19:17:11.673

至少部分回答我自己的问题。您可以通过关闭 Visual Studio 2012 然后删除解决方案的 .suo 文件来解决此问题。它应该就在解决方案文件旁边并且具有相同的名称。

删除此文件后，我重新打开了解决方案，VS2012 再次从 TFS 获取整个解决方案。完成后，问题就解决了！

# jquery - Did jQuery 1.8 break backgroundPosition animation?

> ID：12166008
> 
> 赞同：0
> 
> 时间：2012-08-28T19:17:13.283
> 
> 标签：jquery

I need to upgrade from jQuery 1.7 to jQuery 1.8, but the backgroundPosition animation is failing after the upgrade. There are no error messages in the Firebug console at all. Has anyone else had experience with the backgroundPosition animation failing from 1.7 to 1.8?

```
jQuery(navSelector).hover(function(){                   
      jQuery(this).find('a').stop().animate({"backgroundPosition":"(0 -40px)"},{duration:150});         
    },
    function(){             
      jQuery(this).find('a').stop().animate({backgroundPosition:"(0 0)"}, {duration:75});   
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T10:54:57.270

animate backgroundPosition 自 1.5 以来已被破坏 - 显然它不应该出现在任何版本中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T21:00:30.813

1.8 版本有很多错误，尤其是在 IE9 和 IE10 中。下载 1.8.1，你应该很好。这是更改：[http ://blog.jquery.com/2012/08/30/jquery-1-8-1-released/](http://blog.jquery.com/2012/08/30/jquery-1-8-1-released/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-27T22:01:26.107

它没有坏..它现在的工作方式不同了

```
$arrow.animate({'background-position-x': '0px', 'background-position-y': '0px' }, 300); 
```

# stored-procedures - DB2 Stored Procedure using a Cursor

> ID：12166010
> 
> 赞同：0
> 
> 时间：2012-08-28T19:17:18.557
> 
> 标签：stored-procedures, cursor, db2, updating

DB2 V9 Z/Os

```
CREATE PROCEDURE SERDB.I21MMSNOUPD () 
RESULT SETS 1
LANGUAGE SQL
FENCED
COLLID SER
WLM ENVIRONMENT DDSNSPENV
RUN OPTIONS 'NOTEST(NONE,*,*,*)'

P1: BEGIN

--Declare variables
DECLARE CONSUMER        INTEGER;
DECLARE NEW_MMS_NO      INTEGER;
DECLARE END_TABLE       INT DEFAULT 0;

DECLARE C1 CURSOR FOR 
SELECT I20_CONSUMER_ID,
       NEW_MMS_NO
  FROM SERDB.I20_TEMP
-- WHERE I20_CONSUMER_ID = 164921;
ORDER BY I20_CONSUMER_ID;

DECLARE CONTINUE HANDLER FOR NOT FOUND
 SET END_TABLE = 1;  

OPEN C1;
FETCH C1 INTO CONSUMER,
          NEW_MMS_NO;

WHILE END_TABLE = 0 DO              

UPDATE SERDB.I20_CONSUMER_T
   SET I20_MMS_NO = NEW_MMS_NO
 WHERE I20_CONSUMER_ID = CONSUMER;

END WHILE;

CLOSE C1;              
END P1 
```

The above stored procedure builds with a cond code 0, but fails to execute even when a specific consumer_id. Does anyone see something wrong?

Individual sql statements run exactly as they're supposed to.

I've followed the examples for Cursors in SQL Procedures from IBM.

Thank you

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T16:10:00.290

我 100% 同意@X-Zero，当您可以执行简单的基于集合的操作（可能具有更好的性能）时，这似乎是定义游标和其他东西的大量工作。以下是两个示例，说明如何通过单个操作完成此操作：

正常[`UPDATE`](http://publib.boulder.ibm.com/infocenter/db2luw/v9r7/topic/com.ibm.db2.luw.sql.ref.doc/doc/r0001022.html)：

```
UPDATE SESSION.I20_CONSUMER_T A
SET I20_MMS_NO = (
    SELECT NEW_MMS_NO
    FROM SESSION.I20_TEMP B
    WHERE A.I20_CONSUMER_ID = B.CONSUMER
)
WHERE EXISTS (
    SELECT 1
    FROM SESSION.I20_TEMP C
    WHERE A.I20_CONSUMER_ID = C.CONSUMER
) 
```

新[`MERGE`](http://publib.boulder.ibm.com/infocenter/db2luw/v9r7/topic/com.ibm.db2.luw.sql.ref.doc/doc/r0010873.html)热点：

```
MERGE INTO SESSION.I20_CONSUMER_T AS T
USING SESSION.I20_TEMP AS M
   ON T.I20_CONSUMER_ID = M.CONSUMER
WHEN MATCHED THEN
    UPDATE SET T.I20_MMS_NO = M.NEW_MMS_NO
ELSE IGNORE 
```

这些在 DB2 for Linux/Unix/Windows v9.7 上进行了测试，但应该可以在比 9.1 更新的任何 DB2 版本上工作（DB2 for iSeries 是一个通配符，我不记得那个平台支持或不支持什么`:)`）

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-03-30T16:47:52.317

FETCH 命令必须在 WHILE 内，以便每次调用它时，它都会获取一行。

# c# - 下拉选择索引代码缩短

> ID：12166012
> 
> 赞同：0
> 
> 时间：2012-08-28T19:17:35.617
> 
> 标签：c#, asp.net

所以我有 10 个下拉列表和标签，它们具有并且将获得相同的值。除了复制和粘贴相同的代码 10 次之外，还有其他方法吗？

```
protected void drpPOMedList1_SelectedIndexChanged(object sender, EventArgs e)
{
    if (drpPOMedList1.SelectedIndex == 0)
    {
        lblPOLimit1.Text = "PO Med not Selected";
    }
    else if (drpPOMedList1.SelectedIndex == 1)
    {
        lblPOLimit1.Text = "0 / 0";
    }
    else if (drpPOMedList1.SelectedIndex == 2)
    {
        lblPOLimit1.Text = "8 / 20";
    }
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T19:21:16.833

我试图找到文本之间的关系，但失败了。如果您没有文本关系，则使用数组或列表。

```
private readonly string[] arr = new string[] { "item 0", "item 1", ... }
protected void drpPOMedList1_SelectedIndexChanged(object sender, EventArgs e)
{
   lblPOLimit1.Text = arr[drpPOMedList1.SelectedIndex];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T19:22:45.147

所有下拉列表的相同代表

```
protected void drpPOMedList1_SelectedIndexChanged(object sender, EventArgs e)
{ 
   ...
} 
```

将此委托与所有下拉列表相关联

```
<asp:DropDownlist id="ddl1" runat="server" AutoPostBack="true" OnSelectedIndexChanged="drpPOMedList1_SelectedIndexChanged" />

<asp:DropDownlist id="ddl2" runat="server" AutoPostBack="true" OnSelectedIndexChanged="drpPOMedList1_SelectedIndexChanged" />

....... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T19:22:26.363

您可以将项目存储在数据结构（列表/数组/等）中并根据需要进行编辑。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-28T19:22:52.810

我通常将这类翻译表放在 Dictionary 对象中，并将这些 Dictionary 对象移出方法。这允许您在以后轻松地重用这些表或用另一个结构（例如数据库存储）替换它们。

```
class SomeClass
{
    static readonly Dictionary<int, string> INDEX_TEXT_TABLE = new Dictionary<int, string>
    {
        { 0, "PO Med not Selected" },
        { 1, "0 / 0" },
        { 2, "8 / 20" }
    };

    protected void drpPOMedList1_SelectedIndexChanged(object sender, EventArgs e)
    {
        lblPOLimit1.Text = INDEX_TEXT_TABLE[drpPOMedList1.SelectedIndex];
    }
} 
```

顺便说一句，您可能想研究使用语义上更有意义的`SelectedValue`属性。下拉列表通常是键值对，键和值都是字符串类型。所以使用这个属性是数据和表示之间更合适的映射。这也提高了代码的清晰度。

```
class SomeClass
{
    static readonly Dictionary<string, string> VALUE_TEXT_TABLE = new Dictionary<string, string>
    {
        { "None", "PO Med not Selected" },
        { "Zero", "0 / 0" },
        { "EightTwenty", "8 / 20" }
    };

    protected void drpPOMedList1_SelectedIndexChanged(object sender, EventArgs e)
    {
        lblPOLimit1.Text = VALUE_TEXT_TABLE[drpPOMedList1.SelectedValue];
    }
} 
```

# javascript - jQuery / Javascript > onClick 将文本放在最后已知的光标位置

> ID：12166014
> 
> 赞同：1
> 
> 时间：2012-08-28T19:17:44.060
> 
> 标签：javascript, jquery, forms

我有一个我正在使用的表单，它允许用户根据需要不断添加新行（用于制作具有多个“howto”步骤的文章，他们可以一遍又一遍地单击以添加新步骤）。我想要做的是让用户能够随时单击任何这些行，然后单击位于一侧的单词或按钮，然后将该按钮的值插入最后已知的光标位置。

因此，例如，我可能有一个当前有 3 行的表单。如果用户返回并想要插入一些数据，他们可以在框中单击返回并点击与他们想要插入的数据相对应的按钮。

示例输入 1：“删除客户当前的 IP 地址并替换为他们的静态 IP，[用户可以单击此处，然后单击静态 IP 按钮，%STATIC_IP% 将插入到最后一个已知的光标位置（也称为此处）]

示例输入2：“在客户[点击插入%WIFI_SSID%]到路由器设置中输入”

我发现了其他几篇能够插入文本的 stackoverflow 文章，但他们都希望它进入定义的文本区域或输入。在这种情况下，我需要它插入到最后一个已知的光标位置。我希望这一切都清楚了。我期待任何帮助或问题。

入门代码：http: [//jsfiddle.net/4mJwU/](http://jsfiddle.net/4mJwU/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T19:32:00.020

如果您已经知道如何在最后一个已知的插入符号位置插入一些任意内容，那么您唯一的问题是知道上次单击按钮之前哪个字段是焦点。

这可以通过多种方式完成，其中之一是利用焦点和模糊事件（附加到字段 - 在您的情况下为行）来跟踪（例如在某些变量中）对上次聚焦的字段的引用。从那里应该是小菜一碟。

可以帮助您入门的快速简单脚本[http://jsfiddle.net/sjqWu/1/](http://jsfiddle.net/sjqWu/1/)

将您从其他 stackoverflow anwsers 中学到的内容与上面的示例相结合，您应该没问题。快乐学习！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T19:38:03.920

我会质疑你的设计。要使用户必须单击一个字段，然后单击一些文本以插入该字段，这似乎步骤太多。您可能会使用某种拖放例程。或者不是第一次点击是一个文本框，而是让它成为一个下拉列表？

我同意WTK。您可以使用某种事件存储记录 ID 或文本框 ID，然后从那里继续。

# php - creation of thumbnail in php using ffmpeg is not working

> ID：12166017
> 
> 赞同：1
> 
> 时间：2012-08-28T19:18:02.203
> 
> 标签：php, ffmpeg-php

This is my php code to generate thumbnail of a video frame.

```
 extension_loaded('ffmpeg') or die('Error in loading ffmpeg');
    $vid = realpath('./Wildlife.wmv');
    header("Content-type: image/jpeg");
    $moviefile  = $vid;
    $mov  = new ffmpeg_movie($moviefile,false);
    $img  = $mov->getFrame(10);
    $showImg  = $img->toGDImage();
    $mkNewImg  = new ffmpeg_frame($showImg);
    $maxWid  = 150;
    $oldWid  = $mkNewImg->getWidth();
    if($oldWid > $maxWid) {
    $newWid = $maxWid;
    }
    $newHgt  = $newWid / $movRatio;
    $mkNewImg->resize($newWid,$newHgt);
    $newImg  = $mkNewImg->toGDImage();
    imagejpeg($newImg,$mkThumbFile,40);
    imagedestroy($newImg); 
```

When i execute this script i got error like

> Fatal error: Unable to locate ffmpeg_frame resource in this object. in C:\xampp\htdocs\ffmpeg\ffmpeg.php on line 14

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T21:46:57.637

之后`$showImg = $img->toGDImage();`需要使用GD库函数来显示图像。GD 也支持调整大小 :)

# javascript - Looking for ideas to quickly flow content

> ID：12166018
> 
> 赞同：3
> 
> 时间：2012-08-28T19:18:06.040
> 
> 标签：javascript

I'm writing some code that wraps various content into columns of text (and images, videos, etc). The code works fine, but due to the algorithm I'm using it's rather slow, specifically this general logic:

*   add something (text for this example) to a column
*   check to see if column.scrollHeight > column.offsetHeight (this requires a DOM reflow)
    *   if yes, start to binary split the text until it's shorter

Basically my issue is that I'm adding an unknown amount of text to a column, so after each chunk of text I check the column's scroll height which requires the browser to actively reflow the DOM in order to give me the correct scrollHeight. So I have 50-100 or more reflows in order to properly lay everything out.

Any general ideas on how to avoid most of these?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T19:39:46.727

您可以多次渲染内容。由于第一次会缓存它，这应该是相当快的。多次渲染的原因如下。

1.  在隐藏区域渲染原始内容

2.  检查列宽与内容的比较

3.  将内容覆盖在列之上，但在页面之下。这将切断部分溢出的内容。您可以使用 z-indexing 或使用`overflow: hidden;`

4.  根据步骤 2 中的检查内容，以相同方式在下一列中覆盖具有计算出的偏移量的内容副本，隐藏额外内容。

5.  跟踪呈现的内容与总内容，这样如果有多个列，您就可以知道需要对多少列执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T19:49:58.467

也许这与 Travis J 的建议相同，但我不确定，我不太了解他的解决方案。

`offsetTop`您可以先在单个列上渲染所有内容，然后根据您所需的列高与每个元素的plus值，自上而下循环遍历元素以了解何时拆分`height`。当您找到要中断的元素时，缓存其位置并继续。最后，您应该有一个包含要中断的元素列表的数组，因此您实际上可以将内容拆分为列。

这对你有意义吗？

# python - How can I fix my virtualenv?

> ID：12166023
> 
> 赞同：2
> 
> 时间：2012-08-28T19:18:16.197
> 
> 标签：python, virtualenv, osx-mountain-lion

I just upgraded to OS X Mountain Lion and it killed most of my Python environment. I've reinstalled distribute 0.6.28 (`python distribute_setup.py install --prefix ~/Library/Python/2.7/site-packages`) & pip 1.1 (`python setup.py install --prefix ~/Library/Python/2.7/site-packages`) from scratch. Then I installed `virtualenv` and `virtualenvwerapper` via `pip` without error, but the command `virtualenv ENVTEST` is failing as follows:

```
$ virtualenv ENVTEST
New python executable in TESTENV/bin/python
Please make sure you remove any previous custom paths from your /Users/x/.pydistutils.cfg file.
Installing setuptools.................done.
Installing pip....
Complete output from command /Users/csh401/TESTENV/bin/python /Users/x/TESTENV/bin/easy_install /Users/x/Librar...ort/pip-1.0.2.tar.gz:
/Users/x/TESTENV/bin/python: can't open file '/Users/x/TESTENV/bin/easy_install': [Errno 2] No such file or directory
----------------------------------------
...Installing pip...done.
Traceback (most recent call last):
  File "/Users/x/bin/virtualenv", line 9, in <module>
    load_entry_point('virtualenv==1.7.2', 'console_scripts', 'virtualenv')()
  File "/Users/x/Library/Python/2.7/site-packages/virtualenv.py", line 942, in main
    never_download=options.never_download)
  File "/Users/x/Library/Python/2.7/site-packages/virtualenv.py", line 1054, in create_environment
    install_pip(py_executable, search_dirs=search_dirs, never_download=never_download)
  File "/Users/x/Library/Python/2.7/site-packages/virtualenv.py", line 654, in install_pip
    filter_stdout=_filter_setup)
  File "/Users/x/Library/Python/2.7/site-packages/virtualenv.py", line 1020, in call_subprocess
    % (cmd_desc, proc.returncode))
OSError: Command /Users/x/.virtualenvs/env1/bin/python -x /Users/x/.virtu...nv1/bin/easy_install /Users/x/Librar...pport/pip-1.1.tar.gz failed with error code 2 
```

My best guess is that it has to do with the fact that I was having trouble installing `distribute` and `pip` until I added the `--prefix` argument. But now while pip is working, it's not installing to the right location.

**UPDATE**

pip installed an older version of virtualenv. I ran `pip install -U virtualenv` and this ran without a hitch. Still getting an error, but a different error, now.

```
$ virtualenv -vvv TESTENV
Creating TESTENV/lib/python2.7
Symlinking Python bootstrap modules
  Symlinking TESTENV/lib/python2.7/config
  Symlinking TESTENV/lib/python2.7/lib-dynload
  Symlinking TESTENV/lib/python2.7/os.py
  Ignoring built-in bootstrap module: posix
  Symlinking TESTENV/lib/python2.7/posixpath.py
  Cannot import bootstrap module: nt
  Symlinking TESTENV/lib/python2.7/ntpath.py
  Symlinking TESTENV/lib/python2.7/genericpath.py
  Symlinking TESTENV/lib/python2.7/fnmatch.py
  Symlinking TESTENV/lib/python2.7/locale.py
  Symlinking TESTENV/lib/python2.7/encodings
  Symlinking TESTENV/lib/python2.7/codecs.py
  Symlinking TESTENV/lib/python2.7/stat.py
  Symlinking TESTENV/lib/python2.7/UserDict.py
  File TESTENV/lib/python2.7/lib-dynload/readline.so already exists
  Symlinking TESTENV/lib/python2.7/copy_reg.py
  Symlinking TESTENV/lib/python2.7/types.py
  Symlinking TESTENV/lib/python2.7/re.py
  Symlinking TESTENV/lib/python2.7/sre.py
  Symlinking TESTENV/lib/python2.7/sre_parse.py
  Symlinking TESTENV/lib/python2.7/sre_constants.py
  Symlinking TESTENV/lib/python2.7/sre_compile.py
  File TESTENV/lib/python2.7/lib-dynload/zlib.so already exists
  Symlinking TESTENV/lib/python2.7/warnings.py
  Symlinking TESTENV/lib/python2.7/linecache.py
  Symlinking TESTENV/lib/python2.7/_abcoll.py
  Symlinking TESTENV/lib/python2.7/abc.py
  Symlinking TESTENV/lib/python2.7/_weakrefset.py
Creating TESTENV/lib/python2.7/site-packages
Writing TESTENV/lib/python2.7/site.py
Writing TESTENV/lib/python2.7/orig-prefix.txt
Writing TESTENV/lib/python2.7/no-global-site-packages.txt
Creating parent directories for TESTENV/include
Symlinking TESTENV/include/python2.7
Creating TESTENV/bin
New python executable in TESTENV/bin/python
Changed mode of TESTENV/bin/python to 0755
MacOSX Python framework detected
Symlinking TESTENV/.Python
Testing executable with TESTENV/bin/python -c "import sys;out=sys.stdout;getattr(out, "buffer", out).write(sys.prefix.encode("utf-8"))"
Got sys.prefix result: u'/Users/x/TESTENV'
Please make sure you remove any previous custom paths from your /Users/x/.pydistutils.cfg file.
Creating TESTENV/lib/python2.7/distutils
Writing TESTENV/lib/python2.7/distutils/__init__.py
Writing TESTENV/lib/python2.7/distutils/distutils.cfg
Using existing distribute egg: /Users/x/Library/Python/2.7/site-packages/virtualenv_support/distribute-0.6.27.tar.gz
Installing distribute...
  Running command /Users/x/TESTENV/bin/python -c "#!python
\"\"\"Bootstra... main(sys.argv[1:])
" -v --always-copy -U distribute
  Extracting in /var/folders/97/bds2slvx25s53xx1b_strvfs4xdq4b/T/tmpbqvjfq
  Now working in /var/folders/97/bds2slvx25s53xx1b_strvfs4xdq4b/T/tmpbqvjfq/distribute-0.6.27
  Installing Distribute
  running install
  Checking .pth file support in /Users/x/Library/Python/2.7/site-packages/
  /Users/x/TESTENV/bin/python -E -c pass
  TEST FAILED: /Users/x/Library/Python/2.7/site-packages/ does NOT support .pth files
  error: bad install directory or PYTHONPATH

  You are attempting to install a package to a directory that is not
  on PYTHONPATH and which Python does not read ".pth" files from.  The
  installation directory you specified (via --install-dir, --prefix, or
  the distutils default setting) was:

      /Users/x/Library/Python/2.7/site-packages/

  and your PYTHONPATH environment variable currently contains:

      ''

  Here are some of your options for correcting the problem:

  * You can choose a different installation directory, i.e., one that is
    on PYTHONPATH or supports .pth files

  * You can add the installation directory to the PYTHONPATH environment
    variable.  (It must then also be on PYTHONPATH whenever you run
    Python and want to use the package(s) you are installing.)

  * You can set up the installation directory to support ".pth" files by
    using one of the approaches described here:

    http://packages.python.org/distribute/easy_install.html#custom-installation-locations

  Please make the appropriate changes for your system and try again.
  Something went wrong during the installation.
  See the error message above.
...Installing distribute...done.
Installing existing pip-1.1.tar.gz distribution: /Users/x/Library/Python/2.7/site-packages/virtualenv_support/pip-1.1.tar.gz
Installing pip...
  Running command /Users/x/TESTENV/bin/python -x /Users/x/TESTENV/bin/easy_install /Users/x/Librar...pport/pip-1.1.tar.gz
  /Users/x/TESTENV/bin/python: can't open file '/Users/x/TESTENV/bin/easy_install': [Errno 2] No such file or directory
  Complete output from command /Users/x/TESTENV/bin/python -x /Users/x/TESTENV/bin/easy_install /Users/x/Librar...pport/pip-1.1.tar.gz:
  /Users/x/TESTENV/bin/python: can't open file '/Users/x/TESTENV/bin/easy_install': [Errno 2] No such file or directory
----------------------------------------
...Installing pip...done.
Traceback (most recent call last):
  File "/Users/x/bin/virtualenv", line 9, in <module>
    load_entry_point('virtualenv==1.7.2', 'console_scripts', 'virtualenv')()
  File "/Users/x/Library/Python/2.7/site-packages/virtualenv.py", line 942, in main
    never_download=options.never_download)
  File "/Users/x/Library/Python/2.7/site-packages/virtualenv.py", line 1054, in create_environment
    install_pip(py_executable, search_dirs=search_dirs, never_download=never_download)
  File "/Users/x/Library/Python/2.7/site-packages/virtualenv.py", line 654, in install_pip
    filter_stdout=_filter_setup)
  File "/Users/x/Library/Python/2.7/site-packages/virtualenv.py", line 1020, in call_subprocess
    % (cmd_desc, proc.returncode))
OSError: Command /Users/x/TESTENV/bin/python -x /Users/x/TESTENV/bin/easy_install /Users/x/Librar...pport/pip-1.1.tar.gz failed with error code 2 
```

So it looks like my PYTHONPATH is somehow blanked out in the environment virtualenv is trying to build. That should be easy to fix, right?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T21:42:45.443

这是 distutils 的问题。我删除了 $HOME/.pydistutils.cfg 并运行`sudo setup.py install`以在正确的位置进行分发，然后`sudo setup virtualenv`将其放置到 Python 2.7 的 MacPorts 版本的相应站点包目录中。现在我可以`virtualenv TestEnv`毫无问题地运行了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-10T04:54:34.620

在 VPS 和我的 mac 上设置 centos 时，我遇到了同样的问题。

我找到了解决方案，如果你在 pip install 之后没有导出一些代码，就会出现这种情况。解决步骤是：

编写命令行： which pip show : '/usr/bin/pip' 像这样然后在命令行上运行此代码：export PATH="/usr/bin:$PATH"

我希望这也对你有用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T19:55:52.403

我不确定，因为我没有测试过我的想法。

以下代码用于包，安装`library at /x/lib/python2.x/site-packages`和`scripts at /x/bin`

> python setup.py install --prefix /x

所以你不应该这样做`python setup.py install --prefix /x/lib/python2.x/site-packages`

还尝试查看脚本`pip`，`virtualenv`它们是否使用正确的 python 二进制文件。脚本中的 shebang 会告诉你这一点。如果不是，他们可能正在使用不同的发行版。

```
#!/usr/local/bin/python
# EASY-INSTALL-ENTRY-SCRIPT: 'pip==1.1','console_scripts','pip'
__requires__ = 'pip==1.1'
import sys
from pkg_resources import load_entry_point

sys.exit(
   load_entry_point('pip==1.1', 'console_scripts', 'pip')()
) 
```

上面的脚本是指二进制文件位于的发行版`/usr/local/bin/python`。

在一个系统上，您可以同时存在多个 python 发行版。

# javascript - Chrome 和 Firefox 之间的 Wordpress 显示差异

> ID：12166024
> 
> 赞同：0
> 
> 时间：2012-08-28T19:18:21.440
> 
> 标签：javascript, css, wordpress, widget, prettyphoto

我希望有人可以帮助我。我在 Wordpress 中使用“拉出”小部件来显示内联“链接”，以在需要包含滚动条的漂亮照片框中打开某些文本。

这在 Google Chrome 中运行良好，但是当我在 Firefox 中显示该页面时，它包含了 pullour 选项卡内文本框的所有文本，并且在单击链接之前不会隐藏它？

在我使用过的 css 中：

```
.hide
{
display:none;
} 
```

这是我的小部件的代码：

```
<a href="#inline-1" rel="prettyPhoto" >Link</a>
    <div id="inline-1" class="hide">
        <p>Text to appear in prettyPhoto textbox when the Link is clicked

</p></div>
    </div> 
```

任何帮助将不胜感激

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T19:25:15.117

请检查元素的 CSS 规则`#inline-1`（如果有）。如果`display:block;`设置为 on `#inline-1`，它将覆盖`display:none;`类的`.hide`，因为按 ID 的 CSS 规则比按类的规则更具体。

为此，您可以使用 Firebug for Firefox 等工具。

此外，prettyPhoto 插件可能正在修改#inline-1 div 的显示，导致它显示。

# sql-server - 在哪里可以找到 SQL Server 数据类型的大小

> ID：12166025
> 
> 赞同：10
> 
> 时间：2012-08-28T19:18:29.940
> 
> 标签：sql-server

我正在尝试计算我的数据库的大小。我将有一个包含 3 列（id、int、money）的表，我将有 2600 万行，所有列都被占用。我的数据库有多大？另外，在哪里可以找到所有 SQL Server 数据类型的大小？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-29T04:08:45.810

您可以使用以下查询：

```
SELECT * FROM sys.types 
```

上述查询的结果如下：

```
name                 system_type_id user_type_id schema_id principal_id max_length precision scale collation_name    is_nullable is_user_defined is_assembly_type default_object_id rule_object_id is_table_type
-------------------- -------------- ------------ --------- ------------ ---------- --------- ----- ----------------- ----------- --------------- ---------------- ----------------- -------------- -------------
image                34             34           4         NULL         16         0         0     NULL              1           0               0                0                 0              0
text                 35             35           4         NULL         16         0         0     Persian_100_CI_AI 1           0               0                0                 0              0
uniqueidentifier     36             36           4         NULL         16         0         0     NULL              1           0               0                0                 0              0
date                 40             40           4         NULL         3          10        0     NULL              1           0               0                0                 0              0
time                 41             41           4         NULL         5          16        7     NULL              1           0               0                0                 0              0
datetime2            42             42           4         NULL         8          27        7     NULL              1           0               0                0                 0              0
datetimeoffset       43             43           4         NULL         10         34        7     NULL              1           0               0                0                 0              0
tinyint              48             48           4         NULL         1          3         0     NULL              1           0               0                0                 0              0
smallint             52             52           4         NULL         2          5         0     NULL              1           0               0                0                 0              0
int                  56             56           4         NULL         4          10        0     NULL              1           0               0                0                 0              0
smalldatetime        58             58           4         NULL         4          16        0     NULL              1           0               0                0                 0              0
real                 59             59           4         NULL         4          24        0     NULL              1           0               0                0                 0              0
money                60             60           4         NULL         8          19        4     NULL              1           0               0                0                 0              0
datetime             61             61           4         NULL         8          23        3     NULL              1           0               0                0                 0              0
float                62             62           4         NULL         8          53        0     NULL              1           0               0                0                 0              0
sql_variant          98             98           4         NULL         8016       0         0     NULL              1           0               0                0                 0              0
ntext                99             99           4         NULL         16         0         0     Persian_100_CI_AI 1           0               0                0                 0              0
bit                  104            104          4         NULL         1          1         0     NULL              1           0               0                0                 0              0
decimal              106            106          4         NULL         17         38        38    NULL              1           0               0                0                 0              0
numeric              108            108          4         NULL         17         38        38    NULL              1           0               0                0                 0              0
smallmoney           122            122          4         NULL         4          10        4     NULL              1           0               0                0                 0              0
bigint               127            127          4         NULL         8          19        0     NULL              1           0               0                0                 0              0
hierarchyid          240            128          4         NULL         892        0         0     NULL              1           0               1                0                 0              0
geometry             240            129          4         NULL         -1         0         0     NULL              1           0               1                0                 0              0
geography            240            130          4         NULL         -1         0         0     NULL              1           0               1                0                 0              0
varbinary            165            165          4         NULL         8000       0         0     NULL              1           0               0                0                 0              0
varchar              167            167          4         NULL         8000       0         0     Persian_100_CI_AI 1           0               0                0                 0              0
binary               173            173          4         NULL         8000       0         0     NULL              1           0               0                0                 0              0
char                 175            175          4         NULL         8000       0         0     Persian_100_CI_AI 1           0               0                0                 0              0
timestamp            189            189          4         NULL         8          0         0     NULL              0           0               0                0                 0              0
nvarchar             231            231          4         NULL         8000       0         0     Persian_100_CI_AI 1           0               0                0                 0              0
nchar                239            239          4         NULL         8000       0         0     Persian_100_CI_AI 1           0               0                0                 0              0
xml                  241            241          4         NULL         -1         0         0     NULL              1           0               0                0                 0              0
sysname              231            256          4         NULL         256        0         0     Persian_100_CI_AI 0           0               0                0                 0              0
CalculatedCreditInfo 243            257          9         NULL         -1         0         0     NULL              0           1               0                0                 0              1
udt_QoutaDetail      243            258          21        NULL         -1         0         0     NULL              0           1               0                0                 0              1
BeforeUpdate         243            259          22        NULL         -1         0         0     NULL              0           1               0                0                 0              1
udt_StoreInventory   243            260          26        NULL         -1         0         0     NULL              0           1               0                0                 0              1
udt_WKFHistory       243            261          32        NULL         -1         0         0     NULL              0           1               0                0                 0              1
IDTable              243            262          1         NULL         -1         0         0     NULL 
```

您可以将 max_length 用于每种数据类型的大小。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-01-12T00:11:50.393

T-SQL 有一个功能：`DATALENGTH`适用于所有 SQL Server 版本。

例子：

```
DECLARE @lat DECIMAL(10, 7) = 3.14151415141514151415;

SELECT @lat, DATALENGTH(@lat); 
```

结果： `3.1415142`和`5`（因为 DECIMAL(10,7) 使用 5 个字节来存储）。

文档：[https ://docs.microsoft.com/en-us/sql/t-sql/functions/datalength-transact-sql?view=sql-server-ver15](https://docs.microsoft.com/en-us/sql/t-sql/functions/datalength-transact-sql?view=sql-server-ver15)

例如，我有一个`Applications`用这些列调用的表：( `id VARCHAR(32), debug BIT, connectionString VARCHAR(2048), firebaseKey VARCHAR(4096)`)。正如我们所知，VARCHAR 不会分配所有空间（正是您需要的，`'A'`VARCHAR 中的 1 个字节也是如此）。

这些查询：

```
SELECT 
  SUM(DATALENGTH(id)) AS idSize,
  SUM(DATALENGTH(debug)) AS debugSize,
  SUM(DATALENGTH(connectionString)) AS connectionStringSize,
  SUM(DATALENGTH(firebaseKey)) AS firebaseKeySize
FROM Applications;

SELECT 
  SUM(
    DATALENGTH(id) +
    DATALENGTH(debug) + 
    DATALENGTH(connectionString) +
    DATALENGTH(firebaseKey)
  ) AS totalSize
FROM Applications; 
```

将返回我的数据大小（在我的情况下，我的行是 8、2、366、4698（总计：5074）。该表中有 2 行。

**请注意，这并不代表我的数据库的总大小（涉及页面、描述符、索引等。）** *

MSSQL 具有内部存储过程，可以告诉您磁盘中数据库的确切大小：

*   `EXEC sp_spaceused;`对于所有数据库；
*   `EXEC sp_spaceused N'schema.TableName';`对于特定的表；
*   `EXEC sp_helpdb N'DatabaseName';`如果您想要每个文件的详细信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T19:21:06.697

[http://msdn.microsoft.com/en-us/library/ms187752.aspx](http://msdn.microsoft.com/en-us/library/ms187752.aspx)

```
Money : 8 bytes
int : 4 bytes
id  - depends on what you mean. 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-10-11T19:42:31.507

如果 where 子句中指定的表包含 nvarchar，则此查询将正确地为您提供该列的字符数！

这会检测列是否为“宽”并且基本上除以 2。比 nvarchar 更广泛。

```
SELECT c.name, (CASE WHEN LEFT(ts.name, 1) = 'n' AND ts.[precision] = 0 AND ts.[scale] = 0 THEN c.max_length / ts.[bytes] ELSE c.max_length END) AS [length]
FROM sys.columns AS c
    INNER JOIN sys.tables AS t
        ON t.object_id = c.object_ID
    INNER JOIN
    (
        SELECT *, (CASE WHEN [bits] = -1 THEN -1 ELSE ([bits] + 7) / 8 END) AS [bytes]
        FROM (
            SELECT *, (CASE WHEN max_length >= 256 THEN (CASE WHEN LEFT(name, 1) = 'n' AND [precision] = 0 AND [scale] = 0 THEN 16 ELSE 8 END) ELSE max_length END) AS [bits]
            FROM sys.types AS iits
        ) AS its
    ) AS ts
        ON ts.user_type_id = c.user_type_id
WHERE t.name LIKE 'tb_tablename' -- LIKE is case insensitive 
```

当然，如果您知道列是 nvarchar，您可以将 sys.columns 上的 max_length 除以 2。如果将来引入新的 sql 数据类型，这更适合以一种似乎更好的方式发现表模式。而你选择升级到它。非常小的边缘案例。

> 如果您发现字节和位不正确的边缘情况，请编辑并更正此答案。

细节：

```
-- ([bits] + 7) / 8 means round up
--
-- Proof:
--   o  (1 bit + 7 = 8) / 8 = 1 byte used
--   o  ((8 + 8 + 1 = 17 bytes) + 7 = 24) / 8 = 3 byes used
--   o  ((8 + 8 + 7 = 23 bytes) + 7 = 30) / 8 = 3.75 = integer division removes decimal = 3
SELECT *, (CASE WHEN [bits] = -1 THEN -1 ELSE ([bits] + 7) / 8 END) AS [bytes]
FROM (
    SELECT *, (CASE WHEN max_length >= 256 THEN (CASE WHEN LEFT(name, 1) = 'n' AND [precision] = 0 AND [scale] = 0 THEN 16 ELSE 8 END) ELSE max_length END) AS [bits]
    FROM sys.types AS its
) AS ts 
```

如果有人知道 SQL Server 存储每种数据类型的位和字节大小。或者获取 sys.columns 大小的更好方法，请发表评论！

# mysql - 从一个表中查找单个匹配记录，其中包含连接表中的确切匹配列表

> ID：12166026
> 
> 赞同：0
> 
> 时间：2012-08-28T19:18:33.000
> 
> 标签：mysql, sql

我有 2 张桌子，我将展示简化版本。我希望从第一个表中找到完全匹配，其中我在第二个表中有确切的条目列表（因为连接表中的多个单独的记录将匹配第一个表的主键）。

```
Table Metrics:

MetricsId:  (primary key)
A: (some parameter)
B: (some parameter)
C: (some parameter) 
```

像这样：

```
MetricsId    A    B    C
-------------------------- 
    1       0.5  0.2  3.5 
    2       0.1  0.1  4.5 
    3       1.1  1.0  3.0

TABLE Metrics_Grid:
MetricsId (foreign key to Metrics
GridId (foreign key to another table)

MetricsId   GridId
---------------------
   1           12
   1           13
   1           14
   1           15
   2           12
   3           13 
```

指标表中的记录表示为特定参数和一组特定网格生成的指标。第二个表是包含网格列表的表，但每个网格都有一条记录，该记录包含在该度量记录中。单个网格可以在多个列表中（例如，假设您有单个网格的指标，它会有一个条目，并且该指标条目在链接表中只有一个，那么您可能有一组网格的指标，包括单个网格（实际上每个人都有指标记录，然后是一组，每次运行指标时）

我需要做的是找到完全匹配的参数和网格列表何时已经在数据库中，并返回一个匹配项或什么都不返回。所以我需要找到这样的匹配：

首先，我有需要匹配的确切 gridID 的列表（这是用 java 编码的，使用 Spring JdbcTemplate，所以我可以以我需要的任何形式传入列表）

```
Select M.* from Metrics M
Where
A=? AND B=? AND C=?
AND 
EXISTS (SELECT MG.GridId From MetricsGrid MG where MG.MetricsId=M.MetricsId) 
** This is where I get lost **
AND <THE LIST OF THE THE GridsIds matches exactly the list I have> 
```

我尝试了一些错误的事情，我知道它们为什么是错误的，比如这个：它只是传回了任何具有 grid_id 的指标记录，所以我得到了多个而不是一个。

因此，例如，我希望能够要求匹配 A=0.5, B=0.2, c=3.5 AND GridIds = (12, 13, 14, 15) 或类似的 Metrics 记录，他 Metrics 记录匹配相同的参数，但只有 GridId 12

我的尝试总是返回所有记录。我尝试使用 Group By.. 有 Count()，但无法做到这一点。我认为这并不难，我的大脑只是卡住了。

我还没有找到类似的东西，但它似乎很常见？

感谢您的任何见解。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T19:24:56.037

尝试这个：

```
SELECT m.metricsid, m.a, m.b, m.c
FROM metrics as m
INNER JOIN metrics_grid as mg on m.metricsid = mg.metricsid
WHERE m.a = ?
AND m.b = ?
AND m.c = ?
AND mg.gridid IN (?, ?, ?)
AND NOT EXISTS (SELECT MG2.GridId FROM Metrics_grid MG2 WHERE M.MetricId=MG2.MetricsId AND MG2.SensorID NOT IN (?,?,?)) 
```

确保你有关于 ma、mb、mc 和 mg.gridid 的索引

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T21:30:01.520

您应该能够使用以下查询获得所需的结果。步骤是：

1.  搜索与您想要`MetricsIds`的完全一样的。`GridIds`您可以使用`DISTINCT`、`GROUP BY`和`WHERE`来完成此操作`HAVING`。

    首先`MetricsIds`从您拥有的列表中选择所有具有 gridId 的。

    使用 distinct 命令删除重复项。

    然后做一个 group by 并计算每个 gridIds 的数量`MetricsId`。

    假设您正在寻找 4 个特定的 gridId，因此您可以使用该`HAVING`命令过滤掉其他结果。

2.  搜索所有`MetricsIds`具有正确条件的`A,B,C`from `Metrics`table。

3.  `inner join`在先前步骤的结果之间执行

    ```
    SELECT m.MetricsId from Metrics AS m join
        (SELECT DISTINCT mg.MetricsId, COUNT(mg.GridId) AS cnt FROM Metrics_Grid AS mg
    WHERE GridId in (12,13,14,15)
    GROUP BY mg.MetricsId) AS k ON m.MetricsId = k.MetricsId
    WHERE m.A =0.5 AND m.B = 0.2 AND m.C=3.5; 
    ```

# oracle - 如何在 Oracle WebCenter Content Server 上启用或禁用调试工具栏

> ID：12166032
> 
> 赞同：2
> 
> 时间：2012-08-28T19:18:43.873
> 
> 标签：oracle, content-management-system, oracle-ucm, webcenter, stellent

以管理员权限登录 Oracle WebCenter Content Server（以前的 Oracle UCM，也是 Stellent Content Server）时，右下角会显示一个调试工具栏。如何启用或禁用调试工具栏？有没有可以控制的配置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T23:04:02.130

根据此[链接](https://blogs.oracle.com/kyle/entry/page_debugging_easier_in_ucm_11g)，您的 URL 中可能有 IsPageDebug=1 参数。

如果不是这种情况，该选项可能是在您服务器的 config.cfg 文件中设置的，[这里](http://docs.oracle.com/cd/E23943_01/doc.1111/e10807/a01_troubleshooting.htm)是有关它的 Oracle 文档。

希望这有帮助！

# perl - 如何在 Perl 代码中简明扼要地记录方法？

> ID：12166034
> 
> 赞同：7
> 
> 时间：2012-08-28T19:18:50.957
> 
> 标签：perl, perldoc, dist-zilla, perl-pod

我喜欢一种文字编程风格，在他们记录的代码旁边有 POD 注释。不幸的是，这会使代码膨胀，这不是很 Perlish ;-) 我现在能找到的最好的方法是像这样使用[Dist::Zilla](http://search.cpan.org/perldoc?Dist%3a%3aZilla)和[Pod::Weaver](http://search.cpan.org/perldoc?Pod%3a%3aWeaver)：

```
package Foo;
#ABSTRACT: Foobar helper module for Foos

=method foo ( $bar, $doz )

Lorem ipsum hopladi and hoplada.

=cut

sub foo {
   ...
} 
```

有人可能会争论删除空行，但这也会降低可读性。没有像这样重复和不必要的语法，有没有办法写得更简洁：

```
package Foo;
#ABSTRACT: Foobar helper module for Foos

#METHOD: Lorem ipsum hopladi and hoplada.
sub foo { # $bar, $doz
   ...
} 
```

并将其扩展到完整的 POD：

```
=head1 NAME 

Foo - Foobar helper module for Foos

=head1 METHODS

=head2 foo ( $bar, $doz )

Lorem ipsum hopladi and hoplada. 
```

我认为它应该可能与 Pod::Weaver 插件一起使用，但试图理解 Pod::Weaver 与 Dist::Zilla 和 PPI 相结合的架构让我的大脑受伤:-(

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T21:29:42.200

我使用了两种不同的实现（对于 Perl 项目）[Natural Docs](http://www.naturaldocs.org/)和[OODoc](http://search.cpan.org/dist/OODoc/)，它们接近您的要求。我不推荐其中任何一个，只是因为我不喜欢自动生成的文档，无论语言如何。好的文档需要时间和精力，否则你最终会得到一个无用的文档骨架。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T12:13:38.180

我将首先问您为什么需要如此简洁的文档声明？

我用过 Natural Docs，我真的很喜欢它。我的文档风格并不简洁，但我觉得它可读。例子：

```
=begin nd

Check if a document name is available.

A name is available iff the name is not used by any other document related to the same study
excepted if it is another version of the same document.

Params:
    name        - Proposed document name to be checked : Str.
    study       - the study related to the document
    parent      -  parent document or undef if none : <Document>
    current_instance - the curretn document instance in case of an update

Returns:
    true iff the proposed name is valid

Exception:
    Dies on bad args or errors.

=cut 
```

Natural Docs 能够自动选择函数或方法名称。此外，我用它来记录我的 javascript 源代码和全局文档，并且可以在它们之间插入交叉链接。

# html - 谷歌地图导航栏的位置

> ID：12166035
> 
> 赞同：0
> 
> 时间：2012-08-28T19:18:54.030
> 
> 标签：html, css, xml, google-maps, kml

默认情况下，谷歌地图会在屏幕左侧放置一个导航栏，其中包含您的所有地点：

![在此处输入图像描述](../Images/1dc433d16f34a48a4266f4e769587eb6.png)

我想知道是否有任何方法可以在 KML 中嵌入一些东西，这样我就可以拥有一个定义所有地标颜色的键，而不是导航栏，如下所示：

![在此处输入图像描述](../Images/6e114a1585da51111036a62f308b2504.png)

如您所见，上面的也是一张地图，但在底部它有一个包含所有颜色的键。

**有没有办法调整 KML，以便我可以在页面底部放置某种 KEY 而不是导航栏？**任何指导/建议将不胜感激！

# ios - Closing UIActionSheet

> ID：12166036
> 
> 赞同：0
> 
> 时间：2012-08-28T19:18:55.200
> 
> 标签：ios

I have a UIActionSheet and I have added the following - UIPickerView and 2 BarButtonItems. I am trying to close the action sheet when someone clicks the Cancel Button (it is one of the bar button items).

```
UIActionSheet *actionSheet = [[UIActionSheet alloc] initWithTitle:nil delegate:nil cancelButtonTitle:nil destructiveButtonTitle:nil otherButtonTitles: nil];
[actionSheet setActionSheetStyle:UIActionSheetStyleBlackTranslucent];

CGRect pickerFrame = CGRectMake(0,40,0,0);
UIPickerView *pickerView = [[UIPickerView alloc] initWithFrame:pickerFrame];
pickerView.showsSelectionIndicator = YES;
pickerView.dataSource = self;
pickerView.delegate = self;

[actionSheet addSubview:pickerView];
UIToolbar *tools = [[UIToolbar alloc]initWithFrame:CGRectMake(0, 0, 320, 40)];
tools.barStyle = UIBarStyleBlackOpaque;
[actionSheet addSubview:tools];

UIBarButtonItem *doneButton=[[UIBarButtonItem alloc]initWithTitle:@"Done" style:UIBarButtonItemStyleBordered target:self action:@selector(btnActinDoneClicked)];
doneButton.imageInsets=UIEdgeInsetsMake(200, 6, 50, 25);
UIBarButtonItem *CancelButton=[[UIBarButtonItem alloc]initWithTitle:@"Cancel" style:UIBarButtonItemStyleBordered target:self action:@selector(btnActinCancelClicked)]; //this is where the problem is

NSArray *array = [[NSArray alloc]initWithObjects:CancelButton, doneButton, nil];
[tools setItems:array];

[actionSheet showFromTabBar:self.tabBarController.tabBar];
[actionSheet setBounds:CGRectMake(0, 0, 320, 485)]; 
```

I have added another method to dismiss the action sheet -

```
-(IBAction)btnActinCancelClicked:(id)sender{
    [sender dismissWithClickedButtonIndex:0 animated:YES];
} 
```

The problem is that the app crashes when the BarButton is clicked. I think the problem is caused where the CancelButton is declared and it is unable to send a message to the btnActinCancelClicked method, but I can't figure out how to fix it.

Thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T19:21:24.290

It's not the sender you want to dismiss. It's the ActionSheet. You'll need a reference for that and change your code for something like:

```
- (IBAction)btnActinCancelClicked:(id)sender{
    [self.actionSheet dismissWithClickedButtonIndex:0 animated:YES];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T19:23:06.527

Your method is this;

```
-(IBAction)btnActinCancelClicked:(id)sender 
```

So you need to add it like this (because it receives a parameter);

```
@selector(btnActinCancelClicked:) 
```

So for example, if a method had three parameters you'd call it `@selector(myMethod:andX:andY:)`

Also, to access your UIActionSheet (not entirely sure this will work);

```
UIActionSheet *acSheet = sender.superView;

//Check if it is the ActionSheet here then dismiss it

[acSheet dismissWithClickedButtonIndex:0 animated:YES]; 
```

# javascript - iframe contentDocument 和 contentWindow 为空

> ID：12166043
> 
> 赞同：6
> 
> 时间：2012-08-28T19:19:16.167
> 
> 标签：javascript, iframe

我正在尝试在以下代码中访问 iframe 的 contentDocument 和 contentWindow。但它们都是空的。

```
 var iframe = document.createElement('iframe');
    this.get__domElement$i().appendChild(iframe);
    if (iframe.contentDocument) {
         iframe.contentDocument.write("Hello");
     }
    else if (iframe.contentWindow) {
         iframe.contentWindow.document.body.innerHTML = "Hello";
     } 
```

有人可以告诉我这有什么问题吗？谢谢

当我执行 Document.Body.AppendChild(iframe) 时，contentDocument 和 contentWindow 不为空。

当我将 iframe 附加到 div 时，有人可以告诉我有什么问题吗？

非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-21T23:17:56.273

我知道这有点晚了，但我正在研究这个并偶然发现了你的问题：

我得到了和你一样的错误，因为当我试图附加 iframe 时，我试图附加 iframe 的 div 尚未加载。如果加载了 div，则您的代码有效：

```
<!DOCTYPE html>
<html>
    <head>
    </head>
    <body>
        <div id='test' >

        </div>
        <script>
            var iframe = document.createElement('iframe');
            var myDiv = document.getElementById('test');
            myDiv.appendChild(iframe);
            if (iframe.contentDocument) {
                iframe.contentDocument.write("Hello");
            }
            else if (iframe.contentWindow) {
                iframe.contentWindow.document.body.innerHTML = "Hello";
            }
        </script>
    </body>
</html> 
```

这是一个带有此工作代码的[jsFiddle和](http://jsfiddle.net/R5Zfe/1/)[另一个](http://jsfiddle.net/szHRc/)带有错误标记的 jsFiddle `TypeError: Cannot call method 'appendChild' of null`。

# oracle - 在 Oracle Express 中创建触发器

> ID：12166046
> 
> 赞同：44
> 
> 时间：2012-08-28T19:19:24.120
> 
> 标签：oracle, oracle11g, oracle-sqldeveloper

我试图在 Oracle 11g Express 和 SQL Developer 中做一些类似自动增量的事情。我对 Oracle 知之甚少，而且我对触发器也很陌生。

我尝试运行它，但我不知道如何正确执行它。

```
CREATE TABLE theschema.thetable
(id NUMBER PRIMARY KEY,
name VARCHAR2(30));

CREATE SEQUENCE theschema.test1_sequence
START WITH 1
INCREMENT BY 1;

create or replace trigger insert_nums
before insert on theschema.thetable
for each row
begin
select test1_sequence.nextval into :new.id from dual;
end;
/ 
```

当我尝试创建触发器时，我得到一个屏幕，要求我提供一些“绑定”。该对话框只有一个复选框“null”。这是什么意思，我如何制作一个正常工作的脚本？

进行这种“自动增量”时要采取什么预防措施？

![输入绑定](../Images/a14eb48e43f01b290d37440ba761f6e2.png)

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-08-28T21:10:38.150

SQL Developer 似乎认为您正在运行普通的 DML（数据操作）脚本，而不是 DDL（数据定义）。它还认为这`:new.id`是一个可绑定的变量。

为什么会发生这种情况，我不知道；我无法在 Oracle SQL Developer 2.1 中重现它。

尝试在`theschema`架构中打开一个新的 SQL 工作表窗口，并通过按`F5`(not ) 执行“整个”脚本（不是语句`F9`）。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-09-11T14:13:05.787

这就是我解决这个问题的方法，把“set define off;” 命令前：

```
set define off;
create or replace trigger [...]
[...]
end;
/ 
```

然后突出显示这两个命令并按 F9 运行。或者您可以使用 F5 运行所有命令。

看来，如果命令是用 F9 单独执行的，那么 set define off 不会生效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-02T15:13:14.870

就我而言，解决方案是为“新”输入“newrow”，为“旧”输入“oldrow”作为绑定的值......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-14T19:46:34.057

我是这方面的新手，所以在我给出答案时请记住这一点。我认为问题在于代码

```
create or replace trigger insert_nums
before insert on theschema.thetable
for each row
begin
select test1_sequence.nextval into :new.id from dual;
end; 
```

实际上是一个脚本而不是直接的 SQL 语句。因此，您必须运行“运行脚本”。我发现当我在 SQL Developer 中打开一个工作表时，如果我在工作表中的任何地方都有任何触发器代码，就像上面那样，那么即使我只是尝试运行 SQL Developer 将在工作表中回顾并尝试运行的语句脚本。为了阻止这种情况发生，我不得不注释掉代码。如果我确实想运行触发器的代码而不是打开一个新的工作表，请将代码放在那里并执行 RUN SCRIPT。

# php - 如何使用 PDO 获取 mysql_num_rows？

> ID：12166049
> 
> 赞同：0
> 
> 时间：2012-08-28T19:20:00.907
> 
> 标签：php, pdo, mysql-num-rows

如何轻松获取“ `SELECT *`” SQL 查询返回的行数？

```
function valid_credentials($db,$name,$pw) {
    try {

    $sth = $db->prepare("SELECT * FROM ib_members WHERE name=:val AND pw=:val2");
    $sth->bindValue(":val",$name);
    $sth->bindValue(":val2",$pw);   
    $sth->execute();

    $numrows = $sth->fetchColumn();

    return $numrows;

    } catch (PDOException $e) {

        return $e->getMessage();

    }
} 
```

返回 14，这肯定不是返回的行数，而是第一行的 ID。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T19:27:02.087

对于`DELETE`、`INSERT`或`UPDATE`语句，使用[PDOStatement::rowCount()](http://php.net/manual/en/pdostatement.rowcount.php)。

对于`SELECT`语句，在`while( $sth->fetch() )`循环中手动计算行数（例如，如果计数超过某个阈值，您可以`break`退出循环），或者执行单独的查询以让数据库返回行数（例如，`SELECT COUNT(*) FROM table WHERE column = ?`）。

# gpl - 由受 LGPL 覆盖的词法分析器 (Quex) 生成的程序是否需要采用 LGPL？

> ID：12166050
> 
> 赞同：0
> 
> 时间：2012-08-28T19:20:02.270
> 
> 标签：gpl, lgpl, quex

我想使用[Quex](http://quex.sourceforge.net)作为扫描仪生成器，但我注意到 Quex 包含在 LGPL 中。这是否意味着我生成的二进制文件也将被 LGPL 覆盖？

（我希望这算作一个“编码”问题——我不知道要问哪个其他堆栈交换站点。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T19:32:23.153

考虑到 LGPL 和 GPL 之间的主要区别在于 LGPL 允许您将库链接到您的程序中，而不会使整个程序遵守 LGPL，您应该是安全的。

至于生成的代码，GPL 规定，如果程序本身将自身的一部分复制到生成的代码中，则生成的代码只是 GPL 的一部分。无论哪种方式，这都无关紧要，因为 LGPL 不像 GPL 那样具有将其许可强加给您的传播性质。

比较：[gnu程序生成的代码是否也在gnu gpl下？](https://stackoverflow.com/questions/1743443/is-the-code-generated-by-a-gnu-program-is-under-gnu-gpl-too)

# iphone - 我的自定义单元格在被点击后搞砸了？

> ID：12166051
> 
> 赞同：0
> 
> 时间：2012-08-28T19:20:04.337
> 
> 标签：iphone, uiview, label, tableview, cell

之前：[http](http://tinypic.com/view.php?pic=2j6a4h4&s=6) ://tinypic.com/view.php?pic=2j6a4h4&s=6 之后： [http ://tinypic.com/view.php?pic=demxi&s=6](http://tinypic.com/view.php?pic=demxi&s=6)

单击后，我的单元格在 listView 中的布局有问题。正如您在之前和之后的图片中看到的，我的单元格中的 3 个标签（名称、书籍、章节）都搞砸了？我的代码中遗漏了什么？/问候

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
static NSString *CellIdentifier = @"BookmarkCell";
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

if (cell == nil)
{
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
}
Bookmark *item = [self.items objectAtIndex:indexPath.row];

NSArray *chunks = [item.name componentsSeparatedByString: @","];

NSString *name;
NSString *book;
NSString *chapter;

if ([chunks count] > 0)
{
    name = [chunks objectAtIndex:0];
    if ([chunks count] > 1)
    {
        book = [chunks objectAtIndex:1];
        if ([chunks count] > 2)
        {
            chapter = [chunks objectAtIndex:2];
        }
    }
}

UIView * pNewContentView= [[UIView alloc] initWithFrame:cell.contentView.bounds];
CGRect labelFrame= pNewContentView.bounds;
labelFrame.size.height= labelFrame.size.height * 0.5;

UILabel* pLabel1=[[UILabel alloc] initWithFrame:labelFrame];
[pNewContentView addSubview:pLabel1];

labelFrame.origin.y= labelFrame.size.height;
UILabel* pLabel2=[[UILabel alloc] initWithFrame:labelFrame];
[pNewContentView addSubview:pLabel2];

labelFrame.origin.y= labelFrame.origin.y + labelFrame.size.height;
UILabel* pLabel3=[[UILabel alloc] initWithFrame:labelFrame];
[pNewContentView addSubview:pLabel3];

[cell.contentView addSubview:pNewContentView];

[pLabel1 setText:(name)];    
[pLabel2 setText:(book)];  
[pLabel3 setText:(chapter)];       

return cell;
}

- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath{
return 70; // height of tableView Cell
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T21:05:13.240

只是扩展@onnoweb 所说的内容并将其移至回答部分，因为他是对的：

正在发生的事情是每次单元格刷新，您都在为每个单元格添加额外的 3 个标签，从而导致真正的内存占用。油漆问题是由新标签遮挡旧标签引起的，因为默认情况下所有标签都有白色背景。

您想将标签创建代码移动到初始化新创建的单元格的位置，但存在一个问题，即没有优雅的方法可以访问已存在的单元格中添加的标签。我的建议是对于自定义单元格，例如这个单元格，始终创建 UITableViewCell 的自定义子类。（我个人认为这是最优雅的方法）：

例如：UIMyCustomTableViewCell.h

```
@interface UIMyCustomTableViewCell : UITableViewCell {

}
@property (nonatomic, retain) UILabel *label1;
@property (nonatomic, retain) UILabel *label2;
@property (nonatomic, retain) UILabel *label3;

@end 
```

UIMyCustomTableViewCell.m

```
@implementation UIMyCustomTableViewCell
@synthesize label1 = _label1;
@synthesize label1 = _label2;
@synthesize label1 = _label3;

... init, memory cleanup, etc.

@end 
```

此时，您可以在`cellForRowAtIndexPath`代码中使用该单元格：

```
if (cell == nil)
{
    cell = [[UIMyCustomTableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];

    CGRect labelFrame = cell.bounds;
    labelFrame.size.height= labelFrame.size.height * 0.5;

    cell.label1 = [[UILabel alloc] initWithFrame:labelFrame];
    etc...
}

cell.label1.text = ...
cell.label2.text = ...
cell.label3.text = ... 
```

我也非常喜欢在 xib 文件中设置所有自定义单元格的外观和感觉，而不是像上面那样在代码中初始化标签，在大型应用程序中更清晰。

希望这可以帮助。

# sql-server - SQL Server Express 安装程序

> ID：12166053
> 
> 赞同：0
> 
> 时间：2012-08-28T19:20:14.743
> 
> 标签：sql-server, ssms

刚刚使用包括 LocalDB 在内的工具安装了 SQL Server Management Studio。完成了整个设置，却没有看到设置 sa 密码的选项，也没有设置任何其他具有系统管理员权限的用户/登录名。所以现在我实际上不能在 SSMS 中做任何事情。创建新数据库、更改 sa 密码等的权限被拒绝。在我可以以 sa 身份登录或使用 sysadmin 权限设置我的用户之前，这几乎没用。我在这里想念什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T19:29:57.113

在设置过程中，您应该看到一个屏幕，让您可以为数据库引擎选择混合身份验证，并将 Windows 用户添加到 sysadmin 服务器角色。这是它的样子：

![在此处输入图像描述](../Images/8ceef3aa2b17796ab72e37408484eb13.png)

单击下一步 > 下一步 > 下一步，您可能会错过它。没关系，我们都做到了。

我认为最简单的解决方法是通过[PSExec.exe](http://technet.microsoft.com/en-us/sysinternals/bb897553.aspx)使用 SSMS 进行连接。这将允许您以`NT AUTHORITY\SYSTEM`具有 SQL Server 固有系统管理员权限的身份连接。您可以使用以下选项启动它：

```
PsExec -s -i "C:\...path to ssms...\Ssms.exe" 
```

这将使用 Windows Auth 作为 NT AUTHORITY\SYSTEM 运行 SSMS。系统会提示你连接服务器，直接输入`.\SQLEXPRESS`（确保服务正在运行）：

![在此处输入图像描述](../Images/7222a206abbdd85fdc7de1aab4cdeaf4.png)

然后您可以右键单击您的实例并将身份验证模式更改为混合（属性 > 安全），在安全 > 登录下重置 sa 密码，并将您的 Windows 登录添加为系统管理员。

如果这不能让您获得所有信息，您也可以看到这个答案：

[https://stackoverflow.com/a/12164306/61305](https://stackoverflow.com/a/12164306/61305)

# sql - 基于另一个表更新行

> ID：12166056
> 
> 赞同：2
> 
> 时间：2012-08-28T19:20:29.000
> 
> 标签：sql, oracle11g, sql-update

我有一张表格，可以记录我库存中链轮的物理质量。

```
create table sprockets(
    id NUMBER,
    mass NUMBER
);

INSERT into sprockets VALUES (1, 4);
INSERT into sprockets VALUES (2, 8);
INSERT into sprockets VALUES (3, 15);
INSERT into sprockets VALUES (4, 16);
INSERT into sprockets VALUES (5, 23);
INSERT into sprockets VALUES (6, 42); 
```

我聘请链轮机械师对我的链轮进行日常维护。如果他们的修改使链轮的质量发生了变化，他们会在维护报告中记录下来。

```
create table maintenance_events(
    sprocket_id NUMBER,
    new_mass NUMBER
);

--chipped a widget off of sprocket #1; mass reduced to 3 kg
INSERT into maintenance_events VALUES (1, 3);       
--new lead bearings makes sprocket #2 weigh 413 kg
INSERT into maintenance_events VALUES (2, 413); 
```

我想`sprockets`用每个链轮的当前质量来更新表格。我想`new_mass`接受并`maintenance_events`覆盖`mass`. `sprockets`我提到了[这个问题](https://stackoverflow.com/questions/224732/sql-update-from-one-table-to-another-based-on-a-id-match)的前两个答案，但都给出了错误。

```
UPDATE sprockets
set mass = maintenance_events.new_mass
from sprockets, maintenance_events
where sprockets.id = maintenance_events.sprocket_id

Error at Command Line:2 Column:38
Error report:
SQL Error: ORA-00933: SQL command not properly ended

UPDATE sprockets
set sprockets.mass = maintenance_events.new_mass
from sprockets
INNER JOIN maintenance_events
on sprockets.id = maintenance_events.sprocket_id

Error at Command Line:2 Column:48
Error report:
SQL Error: ORA-00933: SQL command not properly ended 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T19:51:47.713

这就是[`merge`](http://psoug.org/reference/merge.html)upsert 的用途：

```
merge into sprockets s
using ( select * from maintenance_events ) m
on (s.id = m.sprocket_id)
when matched then
 update 
    set s.mass = m.new_mass
        ; 
```

`where not exists`它比使用etc进行多次表扫描要高效得多。

这是一个[SQL Fiddle](http://www.sqlfiddle.com/#!4/c6b74/2)来证明它是有效的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T19:23:38.313

那这个呢？

```
UPDATE sprockets
SET sprockets.mass = (select new_mass 
                           from maintenance_events 
                      where sprockets.id = maintenance_events.sprocket_id)
WHERE EXISTS (select new_mass 
                           from maintenance_events 
                      where sprockets.id = maintenance_events.sprocket_id); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T19:28:27.067

尝试这个：

```
UPDATE sprockets
set mass = (select maintenance_events.new_mass
from maintenance_events
where sprockets.id = maintenance_events.sprocket_id) where exists 
(select maintenance_events.sprocket_id from maintenance_events 
 where sprockets.id = maintenance_events.sprocket_id); 
```

你可以在这里查看：[http ://sqlfiddle.com/#!5/f4262/11/0](http://sqlfiddle.com/#!5/f4262/11/0)

# c# - 如何在 Visual Studio 2010 中创建序列图

> ID：12166063
> 
> 赞同：0
> 
> 时间：2012-08-28T19:21:10.390
> 
> 标签：c#, visual-studio-2010, uml, sequence-diagram

我想从 Visual Studio 2010 c# 解决方案创建一个序列图。只需运行代码。有没有办法在没有 Visual Studio Ultimate 2010 的情况下创建它？

[http://msdn.microsoft.com/en-us/library/dd409389.aspx](http://msdn.microsoft.com/en-us/library/dd409389.aspx)

编辑：还是有其他工具？1 个项目，包含 3 个文件 .cs 和一些类。

编辑：**没有人从代码中创建序列图吗？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T20:40:03.413

*使用*Visual Studio？没有。[http://www.microsoft.com/visualstudio/en-us/products/2010-editions/product-comparison](http://www.microsoft.com/visualstudio/en-us/products/2010-editions/product-comparison)

# c++ - Boost ICL 未按预期工作，std::set operator+= 预期

> ID：12166064
> 
> 赞同：1
> 
> 时间：2012-08-28T19:21:12.620
> 
> 标签：c++, dictionary, boost, set, boost-icl

我正在尝试使用 Boost (1.51) ICL 来简化一些区间搜索。

类型：

*   SequenceI::shp_set 是一个 std::set 共享指针
*   types::mz_t 是 Boost::Units 数量

`interval_map<types::mz_t, SequenceI::shp_set>`是区间图的 typedef

我有一个创建适当段的函数，然后我尝试做

```
msMap.add(segment); 
```

然后我在编译期间收到以下错误：

```
In file included from /home/adamb/Development/apollo/libapollo/include/theory.hpp:16:
In file included from /home/adamb/local/include/boost/icl/interval_map.hpp:13:
In file included from /home/adamb/local/include/boost/icl/interval_set.hpp:14:
In file included from /home/adamb/local/include/boost/icl/interval_base_set.hpp:24:
In file included from /home/adamb/local/include/boost/icl/associative_interval_container.hpp:16:
In file included from /home/adamb/local/include/boost/icl/concept/interval_set.hpp:13:
In file included from /home/adamb/local/include/boost/icl/detail/set_algo.hpp:16:
/home/adamb/local/include/boost/icl/functors.hpp:73:18: error: no viable overloaded '+='
        { object += operand; }
          ~~~~~~ ^  ~~~~~~~
/home/adamb/local/include/boost/icl/interval_base_map.hpp:855:5: note: in instantiation of member function 'boost::icl::inplace_plus<std::set<boost::shared_ptr<apollo::SequenceI>, std::less<boost::shared_ptr<apollo::SequenceI> >,
      std::allocator<boost::shared_ptr<apollo::SequenceI> > > >::operator()' requested here
    Combiner()((*it_).second, co_val);
    ^
/home/adamb/local/include/boost/icl/interval_base_map.hpp:870:9: note: in instantiation of function template specialization
      'boost::icl::interval_base_map<boost::icl::interval_map<boost::units::quantity<boost::units::unit<boost::units::list<boost::units::dim<boost::units::mass_base_dimension, boost::units::static_rational<1, 1> >,
      boost::units::list<boost::units::dim<boost::units::time_base_dimension, boost::units::static_rational<-1, 1> >, boost::units::list<boost::units::dim<boost::units::current_base_dimension, boost::units::static_rational<-1, 1> >,
      boost::units::dimensionless_type> > >, boost::units::heterogeneous_system<boost::units::heterogeneous_system_impl<boost::units::list<boost::units::heterogeneous_system_dim<apollo::units::dalton_mass_base_unit,
      boost::units::static_rational<1, 1> >, boost::units::list<boost::units::heterogeneous_system_dim<apollo::units::charge_state_base_unit, boost::units::static_rational<-1, 1> >, boost::units::dimensionless_type> >,
      boost::units::list<boost::units::dim<boost::units::mass_base_dimension, boost::units::static_rational<1, 1> >, boost::units::list<boost::units::dim<boost::units::time_base_dimension, boost::units::static_rational<-1, 1> >,
      boost::units::list<boost::units::dim<boost::units::current_base_dimension, boost::units::static_rational<-1, 1> >, boost::units::dimensionless_type> > >, boost::units::dimensionless_type> >, void>, float>,
      std::set<boost::shared_ptr<apollo::SequenceI>, std::less<boost::shared_ptr<apollo::SequenceI> >, std::allocator<boost::shared_ptr<apollo::SequenceI> > >, boost::icl::partial_absorber, std::less, icl::inplace_plus,
      icl::inter_section, boost::icl::continuous_interval<boost::units::quantity<boost::units::unit<boost::units::list<boost::units::dim<boost::units::mass_base_dimension, boost::units::static_rational<1, 1> >,
      boost::units::list<boost::units::dim<boost::units::time_base_dimension, boost::units::static_rational<-1, 1> >, boost::units::list<boost::units::dim<boost::units::current_base_dimension, boost::units::static_rational<-1, 1> >,
      boost::units::dimensionless_type> > >, boost::units::heterogeneous_system<boost::units::heterogeneous_system_impl<boost::units::list<boost::units::heterogeneous_system_dim<apollo::units::dalton_mass_base_unit,
      boost::units::static_rational<1, 1> >, boost::units::list<boost::units::heterogeneous_system_dim<apollo::units::charge_state_base_unit, boost::units::static_rational<-1, 1> >, boost::units::dimensionless_type> >,
      boost::units::list<boost::units::dim<boost::units::mass_base_dimension, boost::units::static_rational<1, 1> >, boost::units::list<boost::units::dim<boost::units::time_base_dimension, boost::units::static_rational<-1, 1> >,
      boost::units::list<boost::units::dim<boost::units::current_base_dimension, boost::units::static_rational<-1, 1> >, boost::units::dimensionless_type> > >, boost::units::dimensionless_type> >, void>, float>, less>, std::allocator>,
      boost::units::quantity<boost::units::unit<boost::units::list<boost::units::dim<boost::units::mass_base_dimension, boost::units::static_rational<1, 1> >, boost::units::list<boost::units::dim<boost::units::time_base_dimension,
      boost::units::static_rational<-1, 1> >, boost::units::list<boost::units::dim<boost::units::current_base_dimension, boost::units::static_rational<-1, 1> >, boost::units::dimensionless_type> > >,
      boost::units::heterogeneous_system<boost::units::heterogeneous_system_impl<boost::units::list<boost::units::heterogeneous_system_dim<apollo::units::dalton_mass_base_unit, boost::units::static_rational<1, 1> >,
      boost::units::list<boost::units::heterogeneous_system_dim<apollo::units::charge_state_base_unit, boost::units::static_rational<-1, 1> >, boost::units::dimensionless_type> >,
      boost::units::list<boost::units::dim<boost::units::mass_base_dimension, boost::units::static_rational<1, 1> >, boost::units::list<boost::units::dim<boost::units::time_base_dimension, boost::units::static_rational<-1, 1> >,
      boost::units::list<boost::units::dim<boost::units::current_base_dimension, boost::units::static_rational<-1, 1> >, boost::units::dimensionless_type> > >, boost::units::dimensionless_type> >, void>, float>,
      std::set<boost::shared_ptr<apollo::SequenceI>, std::less<boost::shared_ptr<apollo::SequenceI> >, std::allocator<boost::shared_ptr<apollo::SequenceI> > >, boost::icl::partial_absorber, less, inplace_plus, inter_section,
      boost::icl::continuous_interval<boost::units::quantity<boost::units::unit<boost::units::list<boost::units::dim<boost::units::mass_base_dimension, boost::units::static_rational<1, 1> >,
      boost::units::list<boost::units::dim<boost::units::time_base_dimension, boost::units::static_rational<-1, 1> >, boost::units::list<boost::units::dim<boost::units::current_base_dimension, boost::units::static_rational<-1, 1> >,
      boost::units::dimensionless_type> > >, boost::units::heterogeneous_system<boost::units::heterogeneous_system_impl<boost::units::list<boost::units::heterogeneous_system_dim<apollo::units::dalton_mass_base_unit,
      boost::units::static_rational<1, 1> >, boost::units::list<boost::units::heterogeneous_system_dim<apollo::units::charge_state_base_unit, boost::units::static_rational<-1, 1> >, boost::units::dimensionless_type> >,
      boost::units::list<boost::units::dim<boost::units::mass_base_dimension, boost::units::static_rational<1, 1> >, boost::units::list<boost::units::dim<boost::units::time_base_dimension, boost::units::static_rational<-1, 1> >,
      boost::units::list<boost::units::dim<boost::units::current_base_dimension, boost::units::static_rational<-1, 1> >, boost::units::dimensionless_type> > >, boost::units::dimensionless_type> >, void>, float>, less>,
      allocator>::add_segment<boost::icl::inplace_plus<std::set<boost::shared_ptr<apollo::SequenceI>, std::less<boost::shared_ptr<apollo::SequenceI> >, std::allocator<boost::shared_ptr<apollo::SequenceI> > > > >' requested here
        add_segment<Combiner>(inter_val, co_val, it_);
        ^
/home/adamb/local/include/boost/icl/interval_base_map.hpp:966:9: note: in instantiation of function template specialization
      'boost::icl::interval_base_map<boost::icl::interval_map<boost::units::quantity<boost::units::unit<boost::units::list<boost::units::dim<boost::units::mass_base_dimension, boost::units::static_rational<1, 1> >,
      boost::units::list<boost::units::dim<boost::units::time_base_dimension, boost::units::static_rational<-1, 1> >, boost::units::list<boost::units::dim<boost::units::current_base_dimension, boost::units::static_rational<-1, 1> >,
      boost::units::dimensionless_type> > >, boost::units::heterogeneous_system<boost::units::heterogeneous_system_impl<boost::units::list<boost::units::heterogeneous_system_dim<apollo::units::dalton_mass_base_unit,
      boost::units::static_rational<1, 1> >, boost::units::list<boost::units::heterogeneous_system_dim<apollo::units::charge_state_base_unit, boost::units::static_rational<-1, 1> >, boost::units::dimensionless_type> >,
      boost::units::list<boost::units::dim<boost::units::mass_base_dimension, boost::units::static_rational<1, 1> >, boost::units::list<boost::units::dim<boost::units::time_base_dimension, boost::units::static_rational<-1, 1> >,
      boost::units::list<boost::units::dim<boost::units::current_base_dimension, boost::units::static_rational<-1, 1> >, boost::units::dimensionless_type> > >, boost::units::dimensionless_type> >, void>, float>,
      std::set<boost::shared_ptr<apollo::SequenceI>, std::less<boost::shared_ptr<apollo::SequenceI> >, std::allocator<boost::shared_ptr<apollo::SequenceI> > >, boost::icl::partial_absorber, std::less, icl::inplace_plus,
      icl::inter_section, boost::icl::continuous_interval<boost::units::quantity<boost::units::unit<boost::units::list<boost::units::dim<boost::units::mass_base_dimension, boost::units::static_rational<1, 1> >,
      boost::units::list<boost::units::dim<boost::units::time_base_dimension, boost::units::static_rational<-1, 1> >, boost::units::list<boost::units::dim<boost::units::current_base_dimension, boost::units::static_rational<-1, 1> >,
      boost::units::dimensionless_type> > >, boost::units::heterogeneous_system<boost::units::heterogeneous_system_impl<boost::units::list<boost::units::heterogeneous_system_dim<apollo::units::dalton_mass_base_unit,
      boost::units::static_rational<1, 1> >, boost::units::list<boost::units::heterogeneous_system_dim<apollo::units::charge_state_base_unit, boost::units::static_rational<-1, 1> >, boost::units::dimensionless_type> >,
      boost::units::list<boost::units::dim<boost::units::mass_base_dimension, boost::units::static_rational<1, 1> >, boost::units::list<boost::units::dim<boost::units::time_base_dimension, boost::units::static_rational<-1, 1> >,
      boost::units::list<boost::units::dim<boost::units::current_base_dimension, boost::units::static_rational<-1, 1> >, boost::units::dimensionless_type> > >, boost::units::dimensionless_type> >, void>, float>, less>, std::allocator>,
      boost::units::quantity<boost::units::unit<boost::units::list<boost::units::dim<boost::units::mass_base_dimension, boost::units::static_rational<1, 1> >, boost::units::list<boost::units::dim<boost::units::time_base_dimension,
      boost::units::static_rational<-1, 1> >, boost::units::list<boost::units::dim<boost::units::current_base_dimension, boost::units::static_rational<-1, 1> >, boost::units::dimensionless_type> > >,
      boost::units::heterogeneous_system<boost::units::heterogeneous_system_impl<boost::units::list<boost::units::heterogeneous_system_dim<apollo::units::dalton_mass_base_unit, boost::units::static_rational<1, 1> >,
      boost::units::list<boost::units::heterogeneous_system_dim<apollo::units::charge_state_base_unit, boost::units::static_rational<-1, 1> >, boost::units::dimensionless_type> >,
      boost::units::list<boost::units::dim<boost::units::mass_base_dimension, boost::units::static_rational<1, 1> >, boost::units::list<boost::units::dim<boost::units::time_base_dimension, boost::units::static_rational<-1, 1> >,
      boost::units::list<boost::units::dim<boost::units::current_base_dimension, boost::units::static_rational<-1, 1> >, boost::units::dimensionless_type> > >, boost::units::dimensionless_type> >, void>, float>,
      std::set<boost::shared_ptr<apollo::SequenceI>, std::less<boost::shared_ptr<apollo::SequenceI> >, std::allocator<boost::shared_ptr<apollo::SequenceI> > >, boost::icl::partial_absorber, less, inplace_plus, inter_section,
      boost::icl::continuous_interval<boost::units::quantity<boost::units::unit<boost::units::list<boost::units::dim<boost::units::mass_base_dimension, boost::units::static_rational<1, 1> >,
      boost::units::list<boost::units::dim<boost::units::time_base_dimension, boost::units::static_rational<-1, 1> >, boost::units::list<boost::units::dim<boost::units::current_base_dimension, boost::units::static_rational<-1, 1> >,
      boost::units::dimensionless_type> > >, boost::units::heterogeneous_system<boost::units::heterogeneous_system_impl<boost::units::list<boost::units::heterogeneous_system_dim<apollo::units::dalton_mass_base_unit,
      boost::units::static_rational<1, 1> >, boost::units::list<boost::units::heterogeneous_system_dim<apollo::units::charge_state_base_unit, boost::units::static_rational<-1, 1> >, boost::units::dimensionless_type> >,
      boost::units::list<boost::units::dim<boost::units::mass_base_dimension, boost::units::static_rational<1, 1> >, boost::units::list<boost::units::dim<boost::units::time_base_dimension, boost::units::static_rational<-1, 1> >,
      boost::units::list<boost::units::dim<boost::units::current_base_dimension, boost::units::static_rational<-1, 1> >, boost::units::dimensionless_type> > >, boost::units::dimensionless_type> >, void>, float>, less>,
      allocator>::add_main<boost::icl::inplace_plus<std::set<boost::shared_ptr<apollo::SequenceI>, std::less<boost::shared_ptr<apollo::SequenceI> >, std::allocator<boost::shared_ptr<apollo::SequenceI> > > > >' requested here
        add_main<Combiner>(rest_interval, co_val, it_, last_);
        ^
/home/adamb/local/include/boost/icl/interval_base_map.hpp:314:24: note: in instantiation of function template specialization
      'boost::icl::interval_base_map<boost::icl::interval_map<boost::units::quantity<boost::units::unit<boost::units::list<boost::units::dim<boost::units::mass_base_dimension, boost::units::static_rational<1, 1> >,
      boost::units::list<boost::units::dim<boost::units::time_base_dimension, boost::units::static_rational<-1, 1> >, boost::units::list<boost::units::dim<boost::units::current_base_dimension, boost::units::static_rational<-1, 1> >,
      boost::units::dimensionless_type> > >, boost::units::heterogeneous_system<boost::units::heterogeneous_system_impl<boost::units::list<boost::units::heterogeneous_system_dim<apollo::units::dalton_mass_base_unit,
      boost::units::static_rational<1, 1> >, boost::units::list<boost::units::heterogeneous_system_dim<apollo::units::charge_state_base_unit, boost::units::static_rational<-1, 1> >, boost::units::dimensionless_type> >,
      boost::units::list<boost::units::dim<boost::units::mass_base_dimension, boost::units::static_rational<1, 1> >, boost::units::list<boost::units::dim<boost::units::time_base_dimension, boost::units::static_rational<-1, 1> >,
      boost::units::list<boost::units::dim<boost::units::current_base_dimension, boost::units::static_rational<-1, 1> >, boost::units::dimensionless_type> > >, boost::units::dimensionless_type> >, void>, float>,
      std::set<boost::shared_ptr<apollo::SequenceI>, std::less<boost::shared_ptr<apollo::SequenceI> >, std::allocator<boost::shared_ptr<apollo::SequenceI> > >, boost::icl::partial_absorber, std::less, icl::inplace_plus,
      icl::inter_section, boost::icl::continuous_interval<boost::units::quantity<boost::units::unit<boost::units::list<boost::units::dim<boost::units::mass_base_dimension, boost::units::static_rational<1, 1> >,
      boost::units::list<boost::units::dim<boost::units::time_base_dimension, boost::units::static_rational<-1, 1> >, boost::units::list<boost::units::dim<boost::units::current_base_dimension, boost::units::static_rational<-1, 1> >,
      boost::units::dimensionless_type> > >, boost::units::heterogeneous_system<boost::units::heterogeneous_system_impl<boost::units::list<boost::units::heterogeneous_system_dim<apollo::units::dalton_mass_base_unit,
      boost::units::static_rational<1, 1> >, boost::units::list<boost::units::heterogeneous_system_dim<apollo::units::charge_state_base_unit, boost::units::static_rational<-1, 1> >, boost::units::dimensionless_type> >,
      boost::units::list<boost::units::dim<boost::units::mass_base_dimension, boost::units::static_rational<1, 1> >, boost::units::list<boost::units::dim<boost::units::time_base_dimension, boost::units::static_rational<-1, 1> >,
      boost::units::list<boost::units::dim<boost::units::current_base_dimension, boost::units::static_rational<-1, 1> >, boost::units::dimensionless_type> > >, boost::units::dimensionless_type> >, void>, float>, less>, std::allocator>,
      boost::units::quantity<boost::units::unit<boost::units::list<boost::units::dim<boost::units::mass_base_dimension, boost::units::static_rational<1, 1> >, boost::units::list<boost::units::dim<boost::units::time_base_dimension,
      boost::units::static_rational<-1, 1> >, boost::units::list<boost::units::dim<boost::units::current_base_dimension, boost::units::static_rational<-1, 1> >, boost::units::dimensionless_type> > >,
      boost::units::heterogeneous_system<boost::units::heterogeneous_system_impl<boost::units::list<boost::units::heterogeneous_system_dim<apollo::units::dalton_mass_base_unit, boost::units::static_rational<1, 1> >,
      boost::units::list<boost::units::heterogeneous_system_dim<apollo::units::charge_state_base_unit, boost::units::static_rational<-1, 1> >, boost::units::dimensionless_type> >,
      boost::units::list<boost::units::dim<boost::units::mass_base_dimension, boost::units::static_rational<1, 1> >, boost::units::list<boost::units::dim<boost::units::time_base_dimension, boost::units::static_rational<-1, 1> >,
      boost::units::list<boost::units::dim<boost::units::current_base_dimension, boost::units::static_rational<-1, 1> >, boost::units::dimensionless_type> > >, boost::units::dimensionless_type> >, void>, float>,
      std::set<boost::shared_ptr<apollo::SequenceI>, std::less<boost::shared_ptr<apollo::SequenceI> >, std::allocator<boost::shared_ptr<apollo::SequenceI> > >, boost::icl::partial_absorber, less, inplace_plus, inter_section,
      boost::icl::continuous_interval<boost::units::quantity<boost::units::unit<boost::units::list<boost::units::dim<boost::units::mass_base_dimension, boost::units::static_rational<1, 1> >,
      boost::units::list<boost::units::dim<boost::units::time_base_dimension, boost::units::static_rational<-1, 1> >, boost::units::list<boost::units::dim<boost::units::current_base_dimension, boost::units::static_rational<-1, 1> >,
      boost::units::dimensionless_type> > >, boost::units::heterogeneous_system<boost::units::heterogeneous_system_impl<boost::units::list<boost::units::heterogeneous_system_dim<apollo::units::dalton_mass_base_unit,
      boost::units::static_rational<1, 1> >, boost::units::list<boost::units::heterogeneous_system_dim<apollo::units::charge_state_base_unit, boost::units::static_rational<-1, 1> >, boost::units::dimensionless_type> >,
      boost::units::list<boost::units::dim<boost::units::mass_base_dimension, boost::units::static_rational<1, 1> >, boost::units::list<boost::units::dim<boost::units::time_base_dimension, boost::units::static_rational<-1, 1> >,
      boost::units::list<boost::units::dim<boost::units::current_base_dimension, boost::units::static_rational<-1, 1> >, boost::units::dimensionless_type> > >, boost::units::dimensionless_type> >, void>, float>, less>,
      allocator>::_add<boost::icl::inplace_plus<std::set<boost::shared_ptr<apollo::SequenceI>, std::less<boost::shared_ptr<apollo::SequenceI> >, std::allocator<boost::shared_ptr<apollo::SequenceI> > > > >' requested here
        this->template _add<codomain_combine>(interval_value_pair);
                       ^
/home/adamb/Development/apollo/libapollo/src/theory.cpp:205:15: note: in instantiation of member function
      'boost::icl::interval_base_map<boost::icl::interval_map<boost::units::quantity<boost::units::unit<boost::units::list<boost::units::dim<boost::units::mass_base_dimension, boost::units::static_rational<1, 1> >,
      boost::units::list<boost::units::dim<boost::units::time_base_dimension, boost::units::static_rational<-1, 1> >, boost::units::list<boost::units::dim<boost::units::current_base_dimension, boost::units::static_rational<-1, 1> >,
      boost::units::dimensionless_type> > >, boost::units::heterogeneous_system<boost::units::heterogeneous_system_impl<boost::units::list<boost::units::heterogeneous_system_dim<apollo::units::dalton_mass_base_unit,
      boost::units::static_rational<1, 1> >, boost::units::list<boost::units::heterogeneous_system_dim<apollo::units::charge_state_base_unit, boost::units::static_rational<-1, 1> >, boost::units::dimensionless_type> >,
      boost::units::list<boost::units::dim<boost::units::mass_base_dimension, boost::units::static_rational<1, 1> >, boost::units::list<boost::units::dim<boost::units::time_base_dimension, boost::units::static_rational<-1, 1> >,
      boost::units::list<boost::units::dim<boost::units::current_base_dimension, boost::units::static_rational<-1, 1> >, boost::units::dimensionless_type> > >, boost::units::dimensionless_type> >, void>, float>,
      std::set<boost::shared_ptr<apollo::SequenceI>, std::less<boost::shared_ptr<apollo::SequenceI> >, std::allocator<boost::shared_ptr<apollo::SequenceI> > >, boost::icl::partial_absorber, std::less, icl::inplace_plus,
      icl::inter_section, boost::icl::continuous_interval<boost::units::quantity<boost::units::unit<boost::units::list<boost::units::dim<boost::units::mass_base_dimension, boost::units::static_rational<1, 1> >,
      boost::units::list<boost::units::dim<boost::units::time_base_dimension, boost::units::static_rational<-1, 1> >, boost::units::list<boost::units::dim<boost::units::current_base_dimension, boost::units::static_rational<-1, 1> >,
      boost::units::dimensionless_type> > >, boost::units::heterogeneous_system<boost::units::heterogeneous_system_impl<boost::units::list<boost::units::heterogeneous_system_dim<apollo::units::dalton_mass_base_unit,
      boost::units::static_rational<1, 1> >, boost::units::list<boost::units::heterogeneous_system_dim<apollo::units::charge_state_base_unit, boost::units::static_rational<-1, 1> >, boost::units::dimensionless_type> >,
      boost::units::list<boost::units::dim<boost::units::mass_base_dimension, boost::units::static_rational<1, 1> >, boost::units::list<boost::units::dim<boost::units::time_base_dimension, boost::units::static_rational<-1, 1> >,
      boost::units::list<boost::units::dim<boost::units::current_base_dimension, boost::units::static_rational<-1, 1> >, boost::units::dimensionless_type> > >, boost::units::dimensionless_type> >, void>, float>, less>, std::allocator>,
      boost::units::quantity<boost::units::unit<boost::units::list<boost::units::dim<boost::units::mass_base_dimension, boost::units::static_rational<1, 1> >, boost::units::list<boost::units::dim<boost::units::time_base_dimension,
      boost::units::static_rational<-1, 1> >, boost::units::list<boost::units::dim<boost::units::current_base_dimension, boost::units::static_rational<-1, 1> >, boost::units::dimensionless_type> > >,
      boost::units::heterogeneous_system<boost::units::heterogeneous_system_impl<boost::units::list<boost::units::heterogeneous_system_dim<apollo::units::dalton_mass_base_unit, boost::units::static_rational<1, 1> >,
      boost::units::list<boost::units::heterogeneous_system_dim<apollo::units::charge_state_base_unit, boost::units::static_rational<-1, 1> >, boost::units::dimensionless_type> >,
      boost::units::list<boost::units::dim<boost::units::mass_base_dimension, boost::units::static_rational<1, 1> >, boost::units::list<boost::units::dim<boost::units::time_base_dimension, boost::units::static_rational<-1, 1> >,
      boost::units::list<boost::units::dim<boost::units::current_base_dimension, boost::units::static_rational<-1, 1> >, boost::units::dimensionless_type> > >, boost::units::dimensionless_type> >, void>, float>,
      std::set<boost::shared_ptr<apollo::SequenceI>, std::less<boost::shared_ptr<apollo::SequenceI> >, std::allocator<boost::shared_ptr<apollo::SequenceI> > >, boost::icl::partial_absorber, less, inplace_plus, inter_section,
      boost::icl::continuous_interval<boost::units::quantity<boost::units::unit<boost::units::list<boost::units::dim<boost::units::mass_base_dimension, boost::units::static_rational<1, 1> >,
      boost::units::list<boost::units::dim<boost::units::time_base_dimension, boost::units::static_rational<-1, 1> >, boost::units::list<boost::units::dim<boost::units::current_base_dimension, boost::units::static_rational<-1, 1> >,
      boost::units::dimensionless_type> > >, boost::units::heterogeneous_system<boost::units::heterogeneous_system_impl<boost::units::list<boost::units::heterogeneous_system_dim<apollo::units::dalton_mass_base_unit,
      boost::units::static_rational<1, 1> >, boost::units::list<boost::units::heterogeneous_system_dim<apollo::units::charge_state_base_unit, boost::units::static_rational<-1, 1> >, boost::units::dimensionless_type> >,
      boost::units::list<boost::units::dim<boost::units::mass_base_dimension, boost::units::static_rational<1, 1> >, boost::units::list<boost::units::dim<boost::units::time_base_dimension, boost::units::static_rational<-1, 1> >,
      boost::units::list<boost::units::dim<boost::units::current_base_dimension, boost::units::static_rational<-1, 1> >, boost::units::dimensionless_type> > >, boost::units::dimensionless_type> >, void>, float>, less>, allocator>::add'
      requested here
        msMap.add(segment); 
```

如果您查看[“Party”代码](http://www.boost.org/doc/libs/1_51_0/libs/icl/doc/html/boost_icl/examples/party.html)，没有什么特别的设置可以使事情正常进行。

我的愿望是有一个区间映射，我给它赋值，它给我一个共享指针列表（或迭代器，我不在乎），其中包含包含提供值的区间。而已。

如果ICL不能做到这一点，那我需要再找一个区间映射库，pronto。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T04:25:38.343

看起来问题不在 std::set 中。可能，您使用的 boost::units 类型无法比较（无运算符 <、>）或添加（无运算符 +=）减去运算符 - =。

在我的示例中，我在 Visual Studio 2010 下编译

```
std::set<string*> tst;
boost::units::angle::radian_base_unit a,b;
bicl::interval_map<boost::units::angle::radian_base_unit,std::set<string*> > tst1;
tst1.add(make_pair(bicl::interval_map<boost::units::angle::radian_base_unit,std::set<string*> >::interval_type::closed(a,b),tst)); 
```

问题是a和b不能比较<没有运算符<。

# javascript - Javascript 加载时间过长

> ID：12166067
> 
> 赞同：2
> 
> 时间：2012-08-28T19:21:20.600
> 
> 标签：javascript, html, css

div "intro" 的 javascript 终于加载了。由于网页先加载bg图像然后加载java脚本，因此加载时间太长。有没有办法我可以在“介绍”div中显示“正在加载请稍候”消息，直到它完全加载。我只想先加载介绍。

Javascript代码：

```
var tl = new Array(
    "=======================",
    " Welcome user, ",
    " ###########################################"
);
var speed = 50;
var index = 0;
text_pos = 0;
var str_length = tl[0].length;
var contents, row;

function type_text() {
    contents = '';
    row = Math.max(0, index - 20);
    while (row < index)
    contents += tl[row++] + '\r\n';
    document.forms[0].elements[0].value = contents + tl[index].substring(0, text_pos) + "_";
    if (text_pos++ == str_length) {
        text_pos = 0;
        index++;
        if (index != tl.length) {
            str_length = tl[index].length;
            setTimeout("type_text()", 500);
        }
    }
    else setTimeout("type_text()", speed);
} 
```

这是脚本，它基本上是在 div“intro”的文本区域中逐个字母输入。问题是它最终在整个页面加载时加载。它在大约 15 秒后开始打印文本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T19:23:40.140

`domready`您可以在 上收听“ ”事件，`document`但似乎[不是跨浏览器](http://www.javascriptkit.com/dhtmltutors/domready.shtml)。

例如：Mozilla

```
 document.addEventListener("DOMContentLoaded", methodName, false) 
```

* * *

更好的选择是使用 jQuery 的`.ready()`事件。他们处理所有跨浏览器的实现。

例如：

```
$(document).ready(function(){
   //execute code here
});

//Shorthand
$(function(){
 //...
}); 
```

有关更多信息，请参阅此[相关问题](https://stackoverflow.com/questions/1206937/javascript-domready)`domready`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T19:24:18.190

您可以为此使用 jquery，方法是将内容包装在一个 div 标签中，然后是另一个包含加载图像的 div，效果如下：

```
$(document).ready(function () {
    $('#loading').show();

    $('#divShowMeLater').load(function () {
        $('#loading').hide();
        $('#divShowMeLater').show();
    });
}) 
```

假设`divShowMeLater`是包含所有正在加载的内容的 div。标记看起来与此类似：

```
<div id="divShowMeLater" style="margin-left:auto;margin-right:auto;text-align:center;" >
    <div id="loading">Page loading...
        <img src="images/ajax-loader.gif" alt="loading page..." />
    </div>
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T19:24:49.787

使用空的介绍 div 加载页面，使用“正在加载请稍候”运行脚本，然后触发 ajax 请求以加载页面的其余部分并从 ajax 请求更新 onComplete 事件的页面

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-28T19:25:19.097

使用 jQuery

```
 $(document).ready(function() {
      // update div here 
    }); 
```

[http://api.jquery.com/ready/](http://api.jquery.com/ready/)

或者你可以这样做

```
window.onload= (function() {
  // update div here        
}; 
```

# .net - 同步锁的排序

> ID：12166072
> 
> 赞同：1
> 
> 时间：2012-08-28T19:21:31.597
> 
> 标签：.net, vb.net, multithreading

我正在检查这段代码，它正在**执行类似于 SyncLock**的操作，但它们不是等待其他线程，而是跳过代码。

代码是用变量来做的；我想知道是否有一个内置的.net 函数可以做到这一点？

```
Private _previousValueCount As Integer = 0

Private Sub F()
   If _previousValueCount = 0 Then
       _previousValueCount = 1
       ' ...
       _previousValueCount = 0
   End If
End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T19:24:35.580

有很多方法可以做到；一种方法是执行以下操作：

```
int lockTaken = 0;

...

bool haveLock = false;
try {
    haveLock = Interlocked.CompareExchange(ref lockTaken, 1, 0) == 0;
    if(haveLock) {
       // it was zero, it is now one; you won the lock: do something
    }
} finally {
    if(haveLock) Interlocked.Exchange(ref lockTaken, 0);
} 
```

另一种方法是使用`Monitor.TryEnter`零超时：

```
readonly object syncLock = new object();
...
bool haveLock = false;
try {
    Monitor.TryEnter(syncLock, 0, ref haveLock);
    if(haveLock) {
      // you won it; do something
    }
} finally {
    if(haveLock) Monitor.Exit(syncLock);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T19:27:34.080

您可以使用**[Monitor](http://msdn.microsoft.com/en-us/library/dd270976.aspx)**类来尝试获取**任何类型的全局对象**的锁定。如果您在某个*时间跨度/毫秒*内没有获得*锁*，您可以随心所欲。

 *```
bool acquiredLock = false;
try
{
  Monitor.TryEnter(lockObject, 1000, ref acquiredLock);
  if (acquiredLock)
  {
    // got lock, do something
  }
  else
  {
    // no lock - warning/error/...
  }
}
finally
{
  if (acquiredLock)
     Monitor.Exit(lockObject);  // release lock!
} 
```*

# c# - 我的进度条不会更新

> ID：12166079
> 
> 赞同：0
> 
> 时间：2012-08-28T19:22:02.780
> 
> 标签：c#, wpf, xaml, data-binding

无论我做什么，我的进度条都不会更新。

我的 XAML：

```
<Grid Height="25">
    <Grid.Style>
        <Style TargetType="{x:Type Grid}">
            <Setter Property="Visibility" Value="Collapsed" />
            <!--EDITING HERE-->
            <Style.Triggers>
                <DataTrigger Binding="{Binding Path=PleaseWaitDialog, Mode=OneWay}"
                             Value="true">
                    <Setter Property="Visibility" Value="Visible" />
                </DataTrigger>
            </Style.Triggers>
        </Style>
    </Grid.Style>
    <ProgressBar Value="{Binding Path=Percent}" />
</Grid> 
```

然后在 ViewModel 中：

```
private double _percent;
public double Percent
{
    get { return _percent; }
    set
    {
        SetProperty("Percent", () => false, () => _percent = value);
    }
} 
```

然后我设置值：

```
_profileService.ApplyProfile(_data, (s, d) => UpdateApplyProgress(s, d, pleaseWaitVm)); 
```

更新是：

```
private void UpdateApplyProgress(string message, double percent, CUDialogVM dialogVm)
    {
        //Dispatcher.CurrentDispatcher.Invoke(DispatcherPriority.Normal, new Action(() => dialogVm.Progress = percent));

        dialogVm.Percent = percent;
    } 
```

我用调度员试了一下，还是不行。我也尝试过明确设置值，但什么也没有。我还检查了调试器，并且正在设置 viewModel 的 Percent 属性，并且正在触发 PropertyChangedEvent。

设置属性方法：

```
protected bool SetProperty<T>(string propertyName, Func<bool> areEqual, Func<T> setValue)
    {
        VerifyPropertyName(propertyName);

        if (!areEqual.Invoke())
        {
            setValue.Invoke();
            RaisePropertyChanged(propertyName);
            IsChanged = true;
        }

        return true;
    } 
```

根据下面的 HB，我现在的绑定是：

```
<ProgressBar Minimum="0" Maximum="100" Value="{Binding Percent}" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T19:26:08.433

[`ProgressBar.Minimum`](http://msdn.microsoft.com/en-us/library/system.windows.controls.primitives.rangebase.minimum.aspx)和[`Maximum`](http://msdn.microsoft.com/en-us/library/system.windows.controls.primitives.rangebase.maximum.aspx)默认值是`0`and `1`，您的值是否在该范围内？如果不相应地更改这些属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T19:26:51.707

在您的 XAML 中尝试：

```
 <ProgressBar Value="{Binding Path=Percent, UpdateSourceTrigger=PropertyChanged}" /> 
```

此外，`ProgressBar`值必须在 0 到 100 之间！

# matrix - 在 XNA 中更改旋转矩阵的原点

> ID：12166082
> 
> 赞同：1
> 
> 时间：2012-08-28T19:22:05.333
> 
> 标签：matrix, xna, rotation

我试图让代表精灵的 4 个角的 4 个 Vector2 对象围绕精灵旋转，精灵本身围绕其中心旋转。然而，使用我的以下代码，Vector2 对象在客户端空间中围绕 0,0 旋转，而不是围绕对象的中心旋转。使用矩阵变换，有什么方法可以围绕对象的中心而不是全局坐标（0,0）旋转 Vector2 对象？

到目前为止，这是旋转的功能：

```
public Vector2[] CheckCollision()
    {
        //Get the 4 corners of the sprite locally
        //We can get all 4 corners from only 2 vectors
        Vector2 topLeft = new Vector2(position.X - spriteSize.X, position.Y - spriteSize.Y);

        //Not sure why position is representing the
        //bottom right instead of the center here....
        Vector2 bottomRight = position;

        Vector2 bottomLeft = new Vector2(topLeft.X, bottomRight.Y);

        Vector2 topRight = new Vector2(bottomRight.X, topLeft.Y);

        //Create transformation matrix
        Matrix transform = Matrix.CreateRotationZ(MathHelper.ToRadians(this.direction)) *
            Matrix.CreateScale(this.scale);

        //Transform the vectors
        topLeft = Vector2.Transform(topLeft, transform);
        bottomRight = Vector2.Transform(bottomRight, transform);
        bottomLeft = Vector2.Transform(bottomLeft, transform);
        topRight = Vector2.Transform(topRight, transform);

        Vector2[] vectorArray = new Vector2[4];

        vectorArray[0] = topLeft;
        vectorArray[1] = bottomRight;
        vectorArray[2] = bottomLeft;
        vectorArray[3] = topRight;

        return vectorArray;

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T19:39:20.213

在添加 spriteposition之前先旋转四个角可能会容易`spritePosition`得多，然后在执行旋转和缩放之后添加 spriteposition。

Just make your four corners into the corresponding combinations of `spriteSize` and do the `Vector2.Transform` once that is done add the `spritePosition` to the four vectors in `vectorArray`

# ssrs-2008 - SSRS 2008 R2 更改生产与测试的共享数据源

> ID：12166083
> 
> 赞同：2
> 
> 时间：2012-08-28T19:22:18.783
> 
> 标签：ssrs-2008, reporting-services

我试图找出缓解这种情况的最佳方法。我的项目团队由 3 名开发人员组成，每个开发人员都安装了自己的 SSRS 实例。我们有 2 台外部 SSRS 服务器，我们必须将更新推送到这些服务器，以便客户查看和测试，并且有第 3 台外部服务器上线，不会由我们管理。

我一直在尝试找到一种将共享数据源设置为当前环境的方法，而不管它在哪个系统上。我原以为 ReportServer 地址只需一个通用的命名约定就可以了，但我们已经发现它们在生产服务器和测试服务器上不一致。我的下一个尝试是指定一个 ODBC 连接并让每个人创建一个带有连接信息的系统 DSN，但是在搞砸了一整天并不断出错之后，我不相信这是要走的路。（最近的错误是“指定的 DSN 包含驱动程序和应用程序之间的体系结构不匹配”）。我尝试通过 Windows ODBC DSN msc 创建 DSN，我尝试使用 Report Builder 3.0 创建一个，但似乎都不起作用。

所以我想在这一点上我只需要问，是否有最佳实践来解决这个问题？我想通过报表生成器中的“运行”按钮进行本地开发和测试，然后我只想将文件上传到报表管理器并让它工作，而不管报表服务器的 URL 是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T11:55:43.577

如果共享数据源的属性（连接字符串等）在您的服务器上没有太大变化，则以下内容可能对您有用：在为您的项目设置`OverwriteDataSources = False`适当配置的属性中。如果需要，仅将其临时设置为 true 以更改数据源。

这样，任何开发人员都可以安全地部署到服务器，而不会影响数据源，即使他在本地更改了某些内容（例如连接字符串）以匹配个人环境。

不是最佳解决方案，但相对容易设置。

# jquery - Droppable 在 Sortable 中不起作用

> ID：12166084
> 
> 赞同：0
> 
> 时间：2012-08-28T19:22:21.637
> 
> 标签：jquery, dynamic, draggable, jquery-ui-sortable

我正在尝试让 jquery droppable 在 jquery sortable 中工作。我能够让它工作的唯一方法是在可排序接收中添加可放置对象后销毁可排序对象。

例子

[http://jsfiddle.net/dan2012/vMnQM/](http://jsfiddle.net/dan2012/vMnQM/)

有什么可以改变的，让 droppable 在 sortable 中工作吗？我尝试改变容忍度，但没有任何运气。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T14:17:39.637

[http://jsfiddle.net/dan2012/DzPX2/](http://jsfiddle.net/dan2012/DzPX2/)我认为这必须工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T22:27:31.853

这个简单的版本不是你想要的吗？

```
$(".droppable").sortable({
    revert: true,
    receive: function (event, ui) {
        var e = $(this).data().sortable.currentItem;
        $(this).append(e);
    }
});

$(".draggable").draggable({
    connectToSortable: ".droppable",
    helper: "clone",
    revert: "invalid"
});​ 
```

在这里试试：

[http://jsfiddle.net/vMnQM/2/](http://jsfiddle.net/vMnQM/2/)

# regex - 如何在第 5 个斜杠后全部删除？

> ID：12166086
> 
> 赞同：-2
> 
> 时间：2012-08-28T19:22:26.590
> 
> 标签：regex, perl, notepad++

需要你的帮助。我有包含内容的txt文件：

```
http://www.odnoklassniki.ru/group/50577704157376
http://www.odnoklassniki.ru/group/50735464710341
http://www.odnoklassniki.ru/group/51604546650191
http://www.odnoklassniki.ru/group/51760907550833/album/51760907747441
http://www.odnoklassniki.ru/group/51104812826795
http://www.odnoklassniki.ru/group/51512464113845
http://www.odnoklassniki.ru/group/52331994480761
http://www.odnoklassniki.ru/group/56283345518632
http://www.odnoklassniki.ru/group/50763665834200
http://www.odnoklassniki.ru/group/49222266847410
http://www.odnoklassniki.ru/group/44709448384597/album/44709465620565
http://www.odnoklassniki.ru/group/42776675221604
http://www.odnoklassniki.ru/group/50906863239329 
```

我需要在第 5 个 slesh 之后删除所有内容。解决方案需要 perl 或正则表达式到记事本++

* * *

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T19:39:11.653

```
while (<>) {
    chomp;
    s{^http://www\.odnoklassniki\.ru/group/[^/]+\K.*}{}s;
    print;
} 
```

或者，如果您想更通用：

```
use URI qw( );

while (<>) {
   chomp;
   my $url = URI->new($_);

   my $path = $url->path;
   $path =~ s{^/[^/]*/[^/]*\K.*}{}s;
   $url->path($path);

   print "$url\n";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T19:26:32.260

使用记事本++：

```
Find what: ([^/]+//[^/]+/[^/]+/[^/]+/).*
Replace with: \1 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T19:26:41.697

你可以使用这个 Perl 正则表达式：`s{^ ( (?:[^\/]* \/){5} ) .+ }{$1}x`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T14:19:09.007

```
while(<FILE>){
s/([^/]*\/[^/]*\/[^/]*\/[^/]*\/[^/]*\/).*/\1/;
print $_;
} 
```

# php - 在 Windows 上安装 phpsh

> ID：12166099
> 
> 赞同：3
> 
> 时间：2012-08-28T19:23:24.910
> 
> 标签：php, phpsh

有没有人在 Windows 上成功安装 phpsh？

我的 Windows 7 机器上有 Php 5.2 和 Python 2.7。当我尝试运行 setup.py 时，我得到一个`NameError: name '__init__' is not defined`. 我发现有人在[这里](https://github.com/jefflafay/phpsh)分叉了这个项目，但我遇到了同样的错误。

知道我能做什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-19T15:47:55.397

Windows 上 phpsh 的唯一解决方案是运行[CoLinux](http://www.colinux.org/)。然后，您无需运行虚拟机即可同时运行完整的 Linux 和 Windows。唯一的其他选择是使用 Linux 运行虚拟机，但如果您的系统速度很慢，这将不好玩。

# c# - 线程被中止

> ID：12166101
> 
> 赞同：0
> 
> 时间：2012-08-28T19:23:26.160
> 
> 标签：c#, asp.net, .net, sql-server, sql-server-2005

这一切到底意味着什么。我正在运行一个异步 Web 请求，该请求调用一个将代码发送到我的数据库的页面。然后我的数据库启动一个存储过程，该过程运行到我的一个 SQL 程序集中。大多数时候它有效，但有时我得到这个：

威胁已经被清除了。

说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。

异常详细信息：System.Threading.ThreadAbortException：线程被中止。

源错误：

```
An unhandled exception was generated during the execution of the current web request. Information regarding the origin and location of the exception can be identified using the exception stack trace below. 
```

堆栈跟踪：

```
[ThreadAbortException: Thread was being aborted.]
    System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +486
    System.Web.ApplicationStepManager.ResumeSteps(Exception error) +501
    System.Web.HttpApplication.System.Web.IHttpAsyncHandler.BeginProcessRequest(HttpContext context, AsyncCallback cb, Object extraData) +123
    System.Web.HttpRuntime.ProcessRequestInternal(HttpWorkerRequest wr) +379 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-28T17:20:51.007

您收到此错误的原因很可能是您超时了。增加 ExecutionTimeout，因为默认为 110 秒。

```
<compilation debug="false"></compilation>
<httpRuntime executionTimeout="1800"/> //1800 seconds / 30 minutes. 
```

这里有[一篇文章](http://weblogs.asp.net/aghausman/prevent-request-timeout-in-asp-net)更详细地介绍了如何增加 ExecutionTimeout。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-10T22:32:05.057

应用程序域可能会因多种原因而被回收。这可能会导致线程中止异常。

[这是一篇文章，解释了回收的一些原因](http://www.treeloop.com/blog/iis-application-domain-and-pool-recycling)

如果一个进程长时间运行，IIS/ASP.Net 通常不是运行它的好地方。

# c# - 使用 Castle DynamicProxy 回滚属性更改

> ID：12166103
> 
> 赞同：2
> 
> 时间：2012-08-28T19:23:28.007
> 
> 标签：c#, .net, interceptor, castle, castle-dynamicproxy

我发现了很多 DynamicProxy 示例，用于在对象中的属性更改时执行额外的工作，但是我如何不仅在拦截器中*设置*属性值（通过调用`Proceed()`），而且如果在拦截过程中出现问题，还可以*将其回滚*本身？

这里的用例是这样的：我使用设置对象为系统的某些部分提供设置值，因此它们不必与配置后端一起使用。

这些对象也是`INotifyPropertyChanged`，因此如果有人在运行时更改设置，拥有该对象的组件会收到有关更改的通知，并且可以即时执行重新配置。

`PropertyChanged`因此，如果事件处理程序抛出异常（更改导致配置错误或无效），我需要做的是回滚属性的更改。

我想知道它是怎么做到的。

**我最终都**使用了`INotifyPropertyChanging`（并稍微扩展了这个界面）和`INotifyPropertyChanged`. 仅仅因为验证应该在实际设置*之前进行，因为*

*   事件的顺序是不确定的，因此设置的实际使用者可以在它被验证*之前得到通知，当你只使用*`INPChanged`
*   总的来说，验证和消费是不同的，应该有不同的事件：一个在设置发生之前（以防止它发生），一个在之后 - 当属性的实际值已经更新时（代码按预期工作） .

当我现在看这个时，原始设计（问题所在）对我来说似乎很糟糕。

# windows - 如何在 Windows 下安装带有额外库的 cabal 包？

> ID：12166112
> 
> 赞同：1
> 
> 时间：2012-08-28T19:23:51.233
> 
> 标签：windows, haskell, linker, cabal

我正在尝试使用“RuntimeGecode”标志安装[monadiccp](http://hackage.haskell.org/package/monadiccp)，以便它包含 Gecode 库：

```
cabal install monadiccp --flags="RuntimeGecode Debug" --extra-lib-dirs="D:\Programme\Gecode\lib;d:\programme\Gecode\bin" --extra-include-dirs=D:\Programme\Gecode\include\ 
```

但这不起作用，它失败了：

```
ld.exe: cannot find -lgecodesupport
ld.exe: cannot find -lgecodeset 
```

等等...查看[-v3 日志输出](http://hpaste.org/73854)。

我究竟做错了什么？这些库似乎没有什么特别之处，所以我需要在 Windows 中执行一些额外的步骤吗？

更新：可从 gecode.org 下载的二进制文件是使用 Visual Studio 编译的，并且与 gcc 不兼容（有关根本问题，请参阅[此答案](https://stackoverflow.com/a/8683381/60982)）。正如斯蒂芬所建议的那样，我现在将尝试使用 MinGW/MSYS 从源代码构建 Gecode。

# google-apps-script - 如何在处理函数中修改全局变量（类型：数组）

> ID：12166116
> 
> 赞同：2
> 
> 时间：2012-08-28T19:24:13.807
> 
> 标签：google-apps-script

我有一个格式如下的数组：

议程项目= [{“主题”：“blah”，“描述：”blah”}，{“主题”：“blah2”，“描述”：“blah2”}]。

我需要在处理程序中更新此数组中的值，并且处理程序不允许修改全局变量。我知道我必须使用 CacheService 或 ScriptProperties。但是，我似乎无法使其工作：

如果我使用 CacheService，我会得到如下信息：“[object oject][object object]”

```
CacheService.getPublicCache.put('agenda', agendaItems); 
```

如果我使用 ScriptProperties，我会得到如下信息：“”[Ljava.lang.Object;@429bd3a7”

```
ScriptProperties.setProperty('agenda', agendaItems'); 
```

我做错了还是有更好的方法？任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T19:40:58.447

[Cache](https://developers.google.com/apps-script/class_cache)类适用于字符串。您必须使用[Utilities.jsonStringify](https://developers.google.com/apps-script/class_utilities#jsonStringify)和[Utilities.jsonParse](https://developers.google.com/apps-script/class_utilities#jsonParse)方法将数组转换为字符串，反之亦然。这是我使用的稍微修改过的代码

```
this.getData = function(id, cacheKey) {
  var cache = CacheService.getPrivateCache();
  var cachedString = cache.get(cacheKey);
  var lstData;
  if (cachedString == null) {
    lstData = getNotCachedData_(id);
    cache.put(cacheKey, Utilities.jsonStringify(lstData));
  }
  else {
    lstData = Utilities.jsonParse(cachedString);
  }
  return lstData;
} 
```

[ScriptProperties](https://developers.google.com/apps-script/class_scriptproperties)服务也适用于字符串。由于[文档不完整](https://developers.google.com/apps-script/class_scriptproperties#setProperty)，`value`参数有 type`var`和 not 并不明显`String`，但确实如此。

# image-processing - Photoshop 曝光调整背后的数学原理是什么？

> ID：12166117
> 
> 赞同：9
> 
> 时间：2012-08-28T19:24:15.087
> 
> 标签：image-processing, photoshop

我在谷歌上花了很多时间，但找不到有用的东西。我想像 Photoshop 一样设置图像的曝光值。所以我想知道如何像 Photoshop 曝光调整那样改变位图的曝光？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-28T19:37:28.470

理论上，对于曝光修改 x（x 是有符号浮点值，0.0 表示非补偿），您必须将每个像素亮度值（或 RVB 中的每个子像素）乘以 2 ^ x。

```
newValue = oldValue * (2 ^ exposureCompensation); 
```

考虑一下您的值范围，以限制可能高于您的最大允许值（8 位为 255，16 位为 65535）的值。当您提高曝光时，这就是造成照片“烧焦”的部分，这是在新的 Photoshop 流程（称为 '2012）中发生变化的部分

# php - 需要使用 wordpress 将子域 codeIgniter 信息传递给域

> ID：12166133
> 
> 赞同：1
> 
> 时间：2012-08-28T19:25:15.643
> 
> 标签：php, wordpress, codeigniter, cookies, subdomain

我有一个域。对于这个问题，我们称它为*www.example.com 。*感谢我如何设置和/或 Wordpress 的奇迹，如果我输入*example.com*，它会将我重定向到*www.example.com*，而 Wordpress 会做它的事情。我还有一个名为*members.example.com*的子域，我在其中使用 CodeIgniter 构建了一个相当复杂的系统，并将其放入public_html的**/members文件夹中。**

在一个完美的世界中，我想做的是能够将一些 php 代码放入 Wordpress 中，这将允许阅读“www”方面的人能够确定他们当前是否也在“会员”上登录事情的一面。我知道 CodeIgniter 会话仍然存在，因此每当我跳到成员方面时，我仍然处于登录状态。我的第一个想法是在 CI 中建立一个快速页面来执行此操作：

```
public function isLogged()
{
    $x = "off";
    if ($this->session->userdata('memberKey') != 0) {
        $x = "on";
    }
    echo $x;
} 
```

然后，每当我运行链接**members.example.com/login/isLogged**时，我总是会“关闭”或“打开”来确定我是否在。 *memberKey 可能是 0 表示未登录，或者是基于某人在数据库中的对应键的数字*。我希望我能够从 www 端（在 Wordpress 中）运行类似 THIS 的东西

```
$homepage = file_get_contents('http://members.example.com/login/isLogged'); 
```

...并且我将能够对该人是否登录采取行动。好吧，显然这里的缺陷是，当我调用上述函数时，我总是会因为我的结果而“关闭”，因为我是从服务器进行调用，而不是从需要此信息的客户端进行调用.

能够阅读这些信息的最优雅的解决方案是什么？有没有办法跨平台读取cookies？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T20:28:11.423

好吧，我意识到我已经完成了这个过程，我不想让任何人挂起，所以我的解决方案是：

首先，我知道对于我的 cookie，我进入了 codeIgniter 的**/application/config/config.php**并将以下内容作为我的 cookie 域（第 269 行 - 我在这里更改了域名以保护我的客户，显然）

```
$config['cookie_domain']    = ".example.com"; 
```

我在这里很小心，并使用“。” 在域之前覆盖所有子域。

我也知道我正在将会话数据写入数据库。因此，在 Wordpress 方面，我将这段代码放在某个位置：

```
$memCCinfo = unserialize(stripslashes($_COOKIE['ci_session'])); // Changed for OBVIOUS reasons
$mysqli = mysql_connect('localhost', 'NAME', 'PASSWORD'); // Changed for OBVIOUS reasons
$mysqlDatabase = mysql_select_db('DATABASE',$mysqli); // Changed for OBVIOUS reasons
$isLoggedCC = "off";
$sessInfoQry = mysql_query('SELECT user_data FROM ci_sessions WHERE session_id = "' . $memCCinfo['session_id'] .'"',$mysqli);
while ($sessInfo = mysql_fetch_assoc($sessInfoQry)) { 
    $breakOutInfo = unserialize(stripslashes($sessInfo['user_data']));      
    if (is_array($breakOutInfo)) { $isLoggedCC = "on"; }
} 
```

然后，我现在有一种方法可以确定成员是否登录到“成员”端。问题是......*我正在做的事情是否有任何我应该担心的漏洞？*

# c - uint32 和 uint64 的 OSX、C 等价物是什么？

> ID：12166135
> 
> 赞同：7
> 
> 时间：2012-08-28T19:25:24.327
> 
> 标签：c, xcode, macos

我想这是一个已经被问了一千次但我找不到直接答案的问题。

我正在尝试使用 XCode 将一个非常短的 C 函数（最初为 Windows 编写）移植到 OSX。

我创建了一个 XCode、终端应用程序项目，并将代码复制并粘贴到项目中。XCode 给了我一堆错误，告诉我类型`uint32`和`uint64`是未知类型。

OSX 中的等效值类型是什么？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-28T19:27:56.573

您可以通过导入来使用`uint32_t`和。`uint64_t``stdint.h`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-28T19:32:14.720

您想要的是 POSIX 和 C 标准整数类型。这些是在 Mac OSX、Linux、Solaris 等上使用的。它们一直`uint8_t`是`uint64_t`. 也有`int8_t`通过`uint8_t`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-28T19:28:37.677

`uint32_t`和`uint64_t`— 都按照[`stdint.h`](http://www.nongnu.org/avr-libc/user-manual/group__avr__stdint.html)C99 定义定义。

其他的是微软的专有解决方案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-28T19:28:23.783

~~试试这些;-)`UInt32 lala; UInt64 lolo;`~~

误读了问题。如果您创建一个仅终端项目，您将不会链接 Cocoa/Foundation 和*Carbon*。在后者的 UInt16/32/64 中是 typedef 的。

# asp.net - ASP.NET 中的嵌套中继器数据绑定

> ID：12166136
> 
> 赞同：0
> 
> 时间：2012-08-28T19:25:25.367
> 
> 标签：asp.net

我有两个嵌套转发器，我想在转发器 1 中调用转发器 2 数据绑定。为什么？好吧，我需要重复几行repeater2。但我试试这个，repeater2 只工作 1 次，应该工作 4 次。请帮忙！

Protected Sub Repeater1_ItemDataBound(ByVal sender As Object, ByVal e As System.Web.UI.WebControls.RepeaterItemEventArgs) 处理 Repeater1.ItemDataBound

```
 For i = 0 To 4
        con.Open()
        Dim consulta As String = "SELECT DISTINCT Ordenes.Orden, Ordenes.Id, Ordenes.Codigo, Ordenes.Descripcion, Ordenes.Cantidad, Ordenes.PrecioVenta, " & _
        "Ordenes.FechaCreacion, Inventario.CostoUnitario, Inventario.Marca, Inventario.Garantia, Inventario.Modelo, Inventario.Color, Inventario.Serial, " & _
        "Inventario.CodigoFabricante, Clientes.Nombres, Clientes.Apellidos, Inv_Imagenes.Enlace FROM Ordenes INNER JOIN Inventario ON Ordenes.Codigo = " & _
        "Inventario.Codigo INNER JOIN Clientes ON Ordenes.IdCliente = Clientes.IdCliente INNER JOIN Inv_Imagenes ON Ordenes.Codigo = Inv_Imagenes.Item WHERE " & _
        "(Ordenes.id = @idt) AND (Inv_Imagenes.Tipo = 'img') AND (Inv_Imagenes.Orden = 1)"

        cmd = New SqlCommand(consulta, con)
        cmd.Parameters.AddWithValue("@idt", e.Item.DataItem("id").ToString)
        dr = cmd.ExecuteReader
        Dim Repeater2 As Repeater = e.Item.FindControl("Repeater2")
        Repeater2.DataSource = dr
        Repeater2.DataBind()
        dr.Close()
        con.Close()
    Next

End Sub 
```

例如，有人订购了一部 4 部手机，我需要渲染 4 行来逐一输入每个手机的 Imei 以插入到其他表格中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T19:40:29.320

您可以使用 e.Item.ItemIndex 进行测试

```
If (e.Item.ItemType = ListItemType.Item) Or _
            (e.Item.ItemType = ListItemType.AlternatingItem) Then

            //Treat with e.Item.ItemIndex

 End If 
```

# mysql - 使用连接排除 SQL

> ID：12166140
> 
> 赞同：-2
> 
> 时间：2012-08-28T19:25:48.560
> 
> 标签：mysql, sql, inner-join

我试图从我的结果中排除一些东西。

我要加入 3 个表，1 个带电影，1 个带流派，1 个将这 2 个表结合起来。

因此，结果为每种类型的每部电影提供了一行。

因此，如果我有 2 部电影，每 3 种类型，我会得到 6 个结果。

现在我想说我不想要这种特定类型的电影。如果我这样说`AND tblmoviegenre.ID <> genre.ID`我只少了 1 行，但电影仍在结果中，只是没有特定类型的那一行。

有谁知道如何解决这一问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T19:31:12.920

我不确定你想要什么。如果我明白了，这应该可以正常工作

```
select distinct M.IdMovie, M.MovieName --And Other Fields
from Movies M
inner join MoviesPerGenre MPG on M.IdMovie = MPG.IdMovie
inner join Genre G on MPG.IdGenre = G.IdGenre
where M.IdMovie not in (Select IdMovie from MoviesPerGenre  where IdGenre = 58) 
```

将 58 替换为您要过滤的类型的 Id

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T19:30:18.223

你想排除一部电影，如果它有那种类型，即使它也属于其他不被排除的类型？

```
select <whatever>
from movie, genre, moviegenre
where <join conditions>
and not exists (select 'x' from moviegenre where movie.id = moviegenre.id and moviegenre = "some genere you want to exclude) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T19:33:04.523

假设您的第三张桌子是

```
 | movie | genre
---------- -------------
       1    |   2
       2    |   2
       3    |   3
       3    |   2
       4    |   1 
```

现在你想排除所有类型 2 然后你可以写

```
SELECT movie.name,genre.name 
FROM   movie inner join combine_info on movie.id = combine_info.movie, 
       genre inner join combine_info on genre.id = combine_info.movie
WHERE  movie.id NOT IN(SELECT movie 
                           FROM   combine_info 
                           WHERE  genre = 2); 
```

# ios - 使用 nstimer 的奇怪的分段错误错误

> ID：12166141
> 
> 赞同：1
> 
> 时间：2012-08-28T19:25:57.007
> 
> 标签：ios, nstimer

当我的应用程序进入背景时，我会停用我的应用程序中的所有计时器。实际上它只是一个计时器。我这样做是通过以下方式：

```
- (void) invalidate_timer {
    if( self.timer != nil ) {
        [self.timer invalidate];
        self.timer = nil; <-- App crashes on this line
    } 
} 
```

但应用程序有时（并非总是）在下一行崩溃。我完全糊涂了……这怎么可能？

错误是：线程1：EXC_BAD_ACCESS（代码=1，0xeblablabla；））

编辑：

```
- (void) invalidate_timer {
    if( self.timer != nil ) {
        [self.timer invalidate];
        //self.timer = nil; <-- doing this, and the app no longer crashes
    } 
} 
```

这有多疯狂？？？

编辑 2：这是堆栈跟踪的顶部：

```
Thread 0 name:  Dispatch queue: com.apple.main-thread
Thread 0:
0   libsystem_kernel.dylib          0x31985848 __kill + 8
1   BlackLane2                      0x0015f85e fatal_signal_handler (PLCrashSignalHandler.m:103)
2   libsystem_c.dylib               0x3408d7e6 _sigtramp + 42
3   BlackLane2                      0x0013b586 -[FutureTourDetailsVC invalidate_timer] (FutureTourDetailsVC.m:159) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T18:34:24.170

请阅读`NSTimer class reference`有关该`invalidate`方法的信息。将计时器设置为 nil 是错误的，运行循环会负责释放。

# php - 如何从 CodeIgniter 库中抛出异常

> ID：12166146
> 
> 赞同：3
> 
> 时间：2012-08-28T19:26:34.033
> 
> 标签：php, codeigniter, exception

我制作了一个依赖于现有特定方法的 CodeIgniter 库。这种方法曾经是“隐藏的”（没有记录，但似乎有效）。最终 CodeIgniter 成功了`protected`，所以我不能从库中调用它。在 GitHub 上的 CodeIgniter 开发版中，有一个我可以使用的新公共方法。

在我的库中，我`is_callable`用来检测使用哪种方法，旧方法还是新方法。问题是，在当前稳定版本的 CodeIgniter 中，两者都不存在。因此，库将失败。有没有办法可以优雅地出错，或者从我的构造函数中抛出异常？目前，如果这两种方法都不可用，则脚本在尝试调用该方法时将崩溃。

我不知道 CodeIgniter 库由于缺少方法而无法正确加载的约定是什么。

**编辑**：这是我要问的那一行：

```
$this->func = is_callable(array($this->db, '_compile_select')) ? '_compile_select' : 'get_compiled_select'; 
```

如果这些都不存在（`_compile_select`或`get_compiled_select`），那么当库尝试调用`$this->func`. 我不知道惯例，我可以`show_error`从图书馆打电话吗？从库的构造函数中抛出错误的正确方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T20:21:20.490

如果目标只是一个漂亮的错误消息而不是致命错误，那真的很简单：

```
$this->func = is_callable(array($this->db, '_compile_select')) ? '_compile_select' : 'get_compiled_select';

if ( ! is_callable(array($this, $this->func)))
{
    show_error("You can't use this library, you're missing a function");
} 
```

基本上，只是不要假设`get_compiled_select`在您的条件中是可调用的 - 首先检查。

> 我可以从图书馆调用 show_error 吗？

是的，这是 中定义的功能之一`core/Common.php`，您可以在 CI 应用程序的任何地方使用它。

当然，从技术上讲，这并不是`throw`一个例外，但它是 Codeigniter 的惯例。如果您想`catch`出错并尝试其他方法，这可能会出现问题：

```
try {
    $this->load->library('might_not_exist', 'alias');
} catch (Exception $e) {
    $this->load->library('definitely_exists', 'alias');
} 
```

以上将不起作用，因为`show_error()`将在执行 catch 块之前被加载程序调用并退出程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T20:10:41.000

我不确定，但看到这个 URL 我认为它对你很有帮助。

[http://codeigniter.com/forums/viewthread/67096/](http://codeigniter.com/forums/viewthread/67096/)

也可以看看

[http://phpcodeignitor.blogspot.in/2011/07/php-exception.html](http://phpcodeignitor.blogspot.in/2011/07/php-exception.html)

或试试这个

MY_Exceptions.php 并将其放入 /applications/libraries/

```
 <?php  if (!defined('BASEPATH')) exit('No direct script access allowed');

class MY_Exceptions extends CI_Exceptions{

    function MY_Exceptions(){
        parent::CI_Exceptions();

    }

    function show_404($page = '')
    {
    echo 'test';
    }

    function show_error($heading, $message, $template = 'error_general')
    {
echo 'test';    
}

    function show_php_error($severity, $message, $filepath, $line)
    {
         echo 'test';
         }
}
?> 
```

MY_Exceptions 中的函数似乎根本没有被覆盖。异常中的函数是运行的函数

# mysql - 从新列中的两个表中减去两列

> ID：12166151
> 
> 赞同：0
> 
> 时间：2012-08-28T19:26:47.287
> 
> 标签：mysql, sql

我有两个类似的表是这样的：

```
+-----+------+------+---------------------+
| ID  |  A   |   B  |      Timestamp      | 
| 308 | 1.82 | 1.38 | 2012-08-28 21:17:59 |
| 309 | 1.81 | 1.81 | 2012-08-28 21:18:25 |
| 310 | 1.38 | 1.34 | 2012-08-28 21:18:43 |
+-----+------+------+---------------------+ 
```

需要像这样创建新表：

```
+-----+------+------+---------------------+
| ID  |A1-A2 | B1-B2|      Timestamp      | 
| 308 |  x   |   x  | 2012-08-28 21:17:59 |
| 309 |  x   |   x  | 2012-08-28 21:18:25 |
| 310 |  x   |   x  | 2012-08-28 21:18:43 |
+-----+------+------+---------------------+ 
```

有人对此查询或 sql cmd 有任何建议吗？

### 编辑

对不起，我的错，我没有指定它。

我需要通过时间戳减去和同步表，ID 不是必需的或重要的。两张表每秒都填充 2 个数字（a，b），自动生成时间戳

它有什么方法可以在循环中按时计算这两张表的减法吗？输出应该是这样的，每秒计算一次，有可能吗？

```
+---------+--------+------+
| 时间戳 |A1-A2 | B1-B2|  
| 2012-08-28 21:17:59 | x | x |
| 2012-08-28 21:18:25 | x | x |
| 2012-08-28 21:18:43 | x | x |
+---------+--------+------+
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T19:33:32.137

新表是使用`insert into <your new table name> into`后跟一个 select 语句创建的。我假设第一个表被称为`t1`第二个表`t2`

```
insert into new_table from
select t1.id, (t1.a - t2.a) as a1_a2, (t1.b - t2.b) as b1_b2, t1.timestamp
from t1
join t2 on (t1.id=t2.id) 
```

列标题用作新表中的列名，但其中不能有破折号。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T19:33:44.360

如果ID相同。您将创建新表并像这样填充它

```
INSERT INTO new_table
SELECT t1.id, (t1.a - t2.a), (t1.b - t2.b), t1.timestamp, ....
FROM table1 as t1 INNER JOIN table2 as t2 on t1.id = t2.id 
```

请注意，您没有指定要对其他字段执行的操作，您现在可以随意使用这两个表中的数据。

# bash - 为什么此变量中不存在空 (^$) 行？

> ID：12166153
> 
> 赞同：2
> 
> 时间：2012-08-28T19:26:59.223
> 
> 标签：bash, sed

```
$ cat temp.txt
hello, world!

$ cat temp.txt | sed -n '1,4p'
hello, world!

$ ret=$(cat temp.txt | sed -n '1,4p')
$ echo "$ret"
hello, world!
$ 
```

我想知道为什么 $ret 变量没有空行。

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T19:33:34.017

从 bash 手册页（强调我的）：

> Bash 通过执行命令并将命令替换替换为 > 命令的标准输出来执行扩展，并**删除任何尾随的换行符**。嵌入的换行符不会被删除，但它们可能会在分词过程中被删除。命令替换 $(cat file) 可以替换为等效但更快的 $(< file)。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-28T19:35:59.873

`echo "$ret"`在确定实际参数`echo`将是什么时跳过空格的解析。玩弄这样的事情以更好地理解：

```
x=$(echo '   foo    ')
echo "x${x}x"
echo ${x}
echo "${x}" 
```

# java - Java JSP 和 tomcat

> ID：12166156
> 
> 赞同：1
> 
> 时间：2012-08-28T19:27:03.213
> 
> 标签：java, maven-3, tomcat7

我正在尝试使用 tomcat 7 开发 JSP，但我发现每次对其进行更改时，我都必须通过 tomcat 管理器取消部署该应用程序，然后再次部署它。是否需要在 Tomcat 内部进行某种配置，以防止我在每次更改后都需要重新部署？

编辑当前设置：

我使用 eclipse 作为我的 IDE，然后使用命令行 maven 来清理和打包我的应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T19:29:09.633

您可以触摸 web.xml 文件并执行 Web 应用程序的“重新部署”。

在linux中你可以这样做：

```
$ touch web.xml 
```

您还可以在 Eclipse 中设置一个动态 Web 项目并自动重新部署它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T19:39:47.623

使用 Maven，您可以将部署包含在构建过​​程中：

```
mvn tomcat:deploy 
```

但是，如果您不想每次进行小的更改时都运行 maven，您仍然可以自动部署这些更改。您需要将 Tomcat 与 Eclipse 连接`right click on the Servers view => Add server`，并配置应用程序以进行自动部署：

```
right click the server you just added => add and remove => check "If server is started, publish changes immediately" checkbox 
```

此外，如果您使用的是 Eclipse，则不需要从命令行运行 maven。安装**M2Eclipse 插件**，您可以从 Eclipse 运行它。安装插件后，您可以通过执行将 Maven 自然添加到项目中`Right click project => Maven => Enable Dependency Management`。

然后你可以`Right click on project => Run as => Maven install`触发整个生命周期。

还有一个提示，如果您双击添加到 Servers 视图中的服务器，您将进入**服务器 Overview**。**在这里，您可以在“Server Locations”**下选择是否让 Eclipse 控制服务器。*注意*：如果没有应用程序发布到服务器，您只能更改您的选择。

如果您让 Eclipse 控制 Tomcat，那么所有应用程序的文件都将部署到实际的服务器上。否则，有些文件将在服务器上，而有些则在 Eclipse 的受控目录中（在工作区或 eclipse 安装目录中 - 不记得了）。

# google-apps-script - 无法授权用户编辑应用程序脚本

> ID：12166157
> 
> 赞同：0
> 
> 时间：2012-08-28T19:27:04.397
> 
> 标签：google-apps-script

我编写了一个附加到 Google 电子表格的应用程序脚本，然后将电子表格的所有权转移给了另一个用户。但是，新用户无法编辑应用程序脚本，也无权运行它。我读到谷歌已经升级了权限，让应用程序脚本继承其父电子表格的权限，但情况似乎并非如此。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T17:11:53.983

权限已升级，但以选择加入的方式。如果您打开脚本并单击“共享”按钮，它将要求您升级到新的权限模型。

# python - 使用 Python 上传文件

> ID：12166158
> 
> 赞同：8
> 
> 时间：2012-08-28T19:27:05.470
> 
> 标签：python, image, upload, cgi

我有一个 HTML 表单，我正在使用 Python 根据输入生成一个日志文件。如果用户愿意，我还希望能够允许用户上传图片。一旦它在那里，我可以弄清楚如何用 Python 操作它，但我不确定如何上传图像。这肯定是以前做过的，但我很难找到任何例子。你们中的任何人都可以指出我正确的方向吗？

基本上，我正在使用`cgi.FieldStorage`and`csv.writer`来制作日志。我想从用户的计算机上获取图像，然后将其保存到我服务器上的目录中。然后我将重命名它并将标题附加到 CSV 文件中。

我知道有很多选择。我只是不知道它们是什么。如果有人可以指导我获取一些资源，我将不胜感激。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-28T19:47:11.443

既然您说您的特定应用程序是与 python cgi 模块一起使用的，那么快速谷歌就会找到大量示例。这是第一个：

[最小 http 上传 cgi (Python recipe)](http://code.activestate.com/recipes/273844-minimal-http-upload-cgi/) ( *snip* )

```
def save_uploaded_file (form_field, upload_dir):
    """This saves a file uploaded by an HTML form.
       The form_field is the name of the file input field from the form.
       For example, the following form_field would be "file_1":
           <input name="file_1" type="file">
       The upload_dir is the directory where the file will be written.
       If no file was uploaded or if the field does not exist then
       this does nothing.
    """
    form = cgi.FieldStorage()
    if not form.has_key(form_field): return
    fileitem = form[form_field]
    if not fileitem.file: return
    fout = file (os.path.join(upload_dir, fileitem.filename), 'wb')
    while 1:
        chunk = fileitem.file.read(100000)
        if not chunk: break
        fout.write (chunk)
    fout.close() 
```

此代码将获取文件输入字段，这将是一个类似文件的对象。然后它将逐块读取到输出文件中。

*2015 年 4 月 12 日更新*：根据评论，我添加了对这个旧的 activestate 片段的更新：

```
import shutil

def save_uploaded_file (form_field, upload_dir):
    form = cgi.FieldStorage()
    if not form.has_key(form_field): return
    fileitem = form[form_field]
    if not fileitem.file: return

    outpath = os.path.join(upload_dir, fileitem.filename)

    with open(outpath, 'wb') as fout:
        shutil.copyfileobj(fileitem.file, fout, 100000) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-28T19:33:18.440

网络框架工作 Pyramid 就是一个很好的例子。 [http://docs.pylonsproject.org/projects/pyramid_cookbook/en/latest/forms/file_uploads.html](http://docs.pylonsproject.org/projects/pyramid_cookbook/en/latest/forms/file_uploads.html)

这是我在工作项目中使用的示例代码。

```
 extension = os.path.splitext(request.POST[form_id_name].filename)[1]
    short_id = str(random.randint(1, 999999999))
    new_file_name =  short_id + extension
    input_file = request.POST[form_id_name].file
    file_path = os.path.join(os.environ['PROJECT_PATH'] + '/static/memberphotos/', new_file_name)

    output_file = open(file_path, 'wb')
    input_file.seek(0)
    while 1:
        data = input_file.read(2<<16)
        if not data:
            break
        output_file.write(data)
    output_file.close() 
```

# django - 带有 ForeignKey 字段的“列 'contact_id' 不能为空”

> ID：12166161
> 
> 赞同：1
> 
> 时间：2012-08-28T19:27:12.000
> 
> 标签：django, foreign-keys

我正在寻找一种将contact.id 传递给我的ForeignKey 字段的方法。现在它返回一个错误，说明contact_id 不能为空。

这是我的模型：

```
class Contact(models.Model):
    first_name = models.CharField(max_length=100, help_text="First Name")
    last_name = models.CharField(max_length=100, help_text="Last Name")
    email_address = models.EmailField(max_length=275)
    address = models.CharField(max_length=10, choices=ADDRESS_CHOICES)

    def __unicode__(self):
        return "%s %s" % (self.first_name, self.last_name)

class LetterHead(models.Model):
    contact = models.ForeignKey(Contact, related_name='letterhead')
    address = models.CharField(max_length=10, choices=ADDRESS_CHOICES)
    quantity = models.CharField(max_length=4, choices=QUANTITY_CHOICES) 
```

以下是我的看法：

```
class ContactForm(forms.ModelForm):
     address = forms.ChoiceField(required=True, widget=RadioSelect(), choices=ADDRESS_CHOICES,)

    class Meta:
         model = Contact

class LetterHeadForm(forms.ModelForm):
    address = forms.ChoiceField(required=False, widget=RadioSelect(), choices=ADDRESS_CHOICES)

    class Meta:
        model = LetterHead
        exclude = ('contact',)
        widgets = {
            'quantity': forms.Select(choices=QUANTITY_CHOICES),
        }

LetterHeadFormSet = modelformset_factory(LetterHead,
    form=LetterHeadForm, extra=2, max_num=2) 
```

以下是我的看法：

```
class OrderFormProcessor(object):
    def __init__(self, contact=None, contact_form_class=ContactForm,
            letterhead_form_class=LetterHeadFormSet,
            send_notification=False):
        self.contact_form_class = contact_form_class
        self.letterhead_form_class = letterhead_form_class
        self.send_notification = send_notification
        self.contact = contact

    def process(self, request, context=None):
        if not context:
            context = {}

        data = request.POST or None
        contact = self.contact

        contact_form = self.contact_form_class(data,
                instance=contact)

        forms = dict(
            contact_form=contact_form,
        )

        formsets = dict(
            letterhead_formset=self.letterhead_form_class(data, prefix='letterhead_'),
        )

        if request.method == 'POST':
            for f in forms.values() + formsets.values():
                print f.__class__, f.is_valid()

            form_is_valid = all([f.is_valid() for f in forms.values() + formsets.values()])
            if form_is_valid:
                contact = forms['contact_form'].save()

                letterhead_form = formsets['letterhead_formset']

                for lf in letterhead_form:
                    lf.contact_id = contact.id
                    lf.save()

                if self.send_notification:
                    email = OrderFormNotification(to=[settings.NO_REPLY_EMAIL_ADDRESS],
                    extra_context=data)
                    email.send()
            else:
                pass

        all_forms = chain(forms.values(), chain.from_iterable(formsets.values()))
        context = context.copy()
        context.update(forms.items() + formsets.items())
        context.update(
            error_list=list(chain.from_iterable([form.errors.values() for form in all_forms])),
        )

        return (forms, formsets), context 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T19:36:58.190

当您保存 letterhead_form

```
letterhead_form = formsets['letterhead_formset']

for lf in letterhead_form:
   lf.contact_id = contact.id
   lf.save() 
```

改变

```
lf.contact_id = contact.id 
```

到

```
lf.contact = contact 
```

或者

```
lf.contact__id = contact.id 
```

您没有正确保存联系人对象。

# matlab - 在没有 eval 的情况下将通配符变量名称分配给 MATLAB 中确定的变量名称

> ID：12166168
> 
> 赞同：2
> 
> 时间：2012-08-28T19:27:27.100
> 
> 标签：matlab, signal-processing, variable-assignment

设想：

对于信号处理分析，我正在从其他人那里接收数据。如果我有多个数据文件，每个数据文件代表一段时间，我的标准做法是命名数据向量`'data'`和时间向量`'time'`，而不是单独命名每个变量名称，因为它们是由文件隔离的。如果我需要对它们进行个体化，我会在调用它们的程序中进行。

但是，我从某个人那里收到了数据，这些数据使他们个性化，所以每个变量都有唯一的名称，`'data10'`, `'data11'`。

我所有的例程和程序都调用`'data'`. 有没有办法在不使用的情况下将这些变量名更改`'dataxx'`为？我的第一个想法是尝试 assignin 函数，但它不接受输入的通配符参数。每次我以自己的结构单独加载文件时，因此使用通配符永远不会有问题，总是只有一个文件以`'data'``eval``'value'``'data...'`

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T20:23:46.313

如果您从`.mat`-file 加载这些变量，则可以使用`load`带有输出的命令：

```
collectedData = load('dataVariables.mat'); 
```

`collectedData`文件中包含的每个变量都有一个字段`.mat`。如果您现在要访问变量`data10`，可以使用动态字段名称来访问它：

```
collectedData.(sprintf('data%i',10)) 
```

值得注意的是，`structfun`如果您想将函数应用于结构的每个字段而不循环跨字段名称，这将非常有用。

# c# - 如何在 C# 中通过套接字传输 100 GB 的 xml 文件？

> ID：12166172
> 
> 赞同：0
> 
> 时间：2012-08-28T19:27:35.967
> 
> 标签：c#, sockets, tcp

我们有一台打开了 tcp 套接字的机器来监听文件。

我可以使用 System.Net.Sockets 连接到我的 C# 控制台应用程序中的套接字

我想读取 xml 文件（100 Gb）中的数据并通过套接字发送。

最好的方法是什么？是否有一个 microsoft.net 库可以将其分解为数据包或流式传输并发送出去？

我必须自己逐块阅读吗？

请建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T19:34:26.897

This task although may seem quite easy/solvable it has a lot of caveats. The best thing you can do here is use some kind of middleware to do it. A good example of middleware is ICE.

[http://www.zeroc.com/doc/Ice-3.3.1/manual/Hello.4.5.html](http://www.zeroc.com/doc/Ice-3.3.1/manual/Hello.4.5.html)

I'm not sure if it's a good candidate for this particular job, but you'll find something yourself..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T19:35:50.060

If you have an HTTP server on the other end (or can put one there) then you might want to look at [Windows Background Intelligent Transfer Services](http://msdn.microsoft.com/en-us/library/windows/desktop/bb968799%28v=vs.85%29.aspx)

This will hide a lot of complexity around retries, requesting ranges, etc.

There is an article on interacting with the COM API from C# on [MSDN Magazine](http://msdn.microsoft.com/en-us/magazine/cc188766.aspx).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T19:31:50.657

你应该做的没什么特别的，一旦你打开一个套接字连接，你可以保持它打开只要你想。最好将 xml 文件 gzip，传输，然后在服务器上使用它。我希望 xml 文件的压缩率至少为 50:1。

编辑：当您读取文件进行发送时，您必须注意，使用缓冲区读取一些行，发送，清空缓冲区，冲洗并重复，不要在客户端加载文件，然后开始通过套接字连接发送数据。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-28T19:41:45.580

如果 100Gb 让您感到困扰，您可能需要阅读以下内容以获取想法：

[压缩的 XML](https://stackoverflow.com/questions/1082285/best-compression-algorithm-for-xml)

# c# - 如何准备深度嵌套的节点

> ID：12166177
> 
> 赞同：-1
> 
> 时间：2012-08-28T19:27:48.743
> 
> 标签：c#, xml, xpath, .net-2.0

我得到了这种 xml 文档：

```
<root>
    <class_table>
      <class_title>
        <class_name>SomeClassBla</class_name>
      </class_title>
      <fields>
        <field_name>DateTime _date</field_name>
        <field_name>string _posterName</field_name>
        <field_name>string _commentText</field_name>
        <field_name>bool _visible</field_name>
      </fields>
      <properties>
        <property_name>DateTime Date</property_name>
        <property_name>string PosterName</property_name>
        <property_name>string CommentText</property_name>
        <property_name>bool Visible</property_name>
      </properties>
      <methods />
      <inheritance />
    </class_table>
    <class_table>
      <class_title>
        <class_name>someAnotnerClass</class_name>
      </class_title>
      <fields>
        <field_name>int result</field_name>
        <field_name>string test</field_name>
      </fields>
      <properties>
        <property_name>string BlogPage</property_name>
        <property_name>string BlogPostPage</property_name>
        <property_name>string ErrorPage</property_name>
        <property_name>string ComingSoonPage</property_name>
      </properties>
      <methods>
        <method_name>string DateFormatter()</method_name>
        <method_name>string EncodeBase64()</method_name>
        <method_name>string DecodeBase64()</method_name>
        <method_name>string CategoriesFormatterTyped()</method_name>
        <method_name>string AddShareThisLink()</method_name>
        <method_name>string ShortenText()</method_name>
        <method_name>string CommentCountFormatter()</method_name>
        <method_name>string MtaShorten()</method_name>
      </methods>
      <inheritance />
    </class_table>
</root> 
```

那么我如何读取例如这 2 个 class_table 节点的所有字段名称？它的嵌套深层 im tring 使用此代码：

```
XmlDocument readDiagramXml = new XmlDocument();
readDiagramXml.Load(classDiagramFile);

XmlNodeList classTables = readDiagramXml.GetElementsByTagName("class_table");
foreach (XmlNode items in classTables)
{
    string className = items["fields/fields_name"].InnerText;
    File.AppendAllText("A_class_diagram_test.txt", className + Environment.NewLine);
} 
```

我得到对象引用错误。我想要的只是将每个节点的值写入具有该格式的 txt 文件：类名 = SomeClassBla 字段：DateTime _date 字段：字符串 _posterName 等等

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T19:36:13.710

After adding a root element to your xml, you can easily parse it with Linq2Xml

```
XDocument xDoc = XDocument.Parse(xml); //or .Load(filename)
var classes = xDoc
    .Descendants("class_table")
    .Select(clazz => new
    {
        Name = clazz.Descendants("class_name").First().Value,
        Fields = clazz.Descendants("field_name").Select(x=>x.Value).ToList(),
        Properties = clazz.Descendants("property_name").Select(x=>x.Value).ToList(),
        Methods = clazz.Descendants("method_name").Select(x=>x.Value).ToList(),
    })
    .ToList(); 
```

**EDIT**

And another example using `XmlSerializer`

```
//Assuming your(missing) root element is "root"
XmlSerializer ser = new XmlSerializer(typeof(class_table[]),new XmlRootAttribute("root"));
class_table[] obj = (class_table[])ser.Deserialize(stream);

public class class_table
{
    [XmlArrayItem("field_name")]
    public List<string> fields;

    [XmlArrayItem("property_name")]
    public List<string> properties;

    [XmlArrayItem("method_name")]
    public List<string> methods;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T19:34:29.140

you must just add root element to your document, re test your code with this format

```
 <root>

 <class_table>
  <class_title>
    <class_name>SomeClassBla</class_name>
  </class_title>
  <fields>
    <field_name>DateTime _date</field_name>
    <field_name>string _posterName</field_name>
    <field_name>string _commentText</field_name>
    <field_name>bool _visible</field_name>
  </fields>
  <properties>
    <property_name>DateTime Date</property_name>
    <property_name>string PosterName</property_name>
    <property_name>string CommentText</property_name>
    <property_name>bool Visible</property_name>
  </properties>
  <methods />
  <inheritance />
</class_table>
<class_table>
  <class_title>
    <class_name>someAnotnerClass</class_name>
  </class_title>
  <fields>
    <field_name>int result</field_name>
    <field_name>string test</field_name>
  </fields>
  <properties>
    <property_name>string BlogPage</property_name>
    <property_name>string BlogPostPage</property_name>
    <property_name>string ErrorPage</property_name>
    <property_name>string ComingSoonPage</property_name>
  </properties>
  <methods>
    <method_name>string DateFormatter()</method_name>
    <method_name>string EncodeBase64()</method_name>
    <method_name>string DecodeBase64()</method_name>
    <method_name>string CategoriesFormatterTyped()</method_name>
    <method_name>string AddShareThisLink()</method_name>
    <method_name>string ShortenText()</method_name>
    <method_name>string CommentCountFormatter()</method_name>
    <method_name>string MtaShorten()</method_name>
  </methods>
  <inheritance />
</class_table>

    </root> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T19:44:50.347

有多个项目返回`items["field/field_name"]`，我看不到任何与“field/fields_name”相对应的元素尝试从代码中删除“s”`items["fields/fields_name"]`

尝试这样的事情：

（我还没有尝试过，所以可能需要进行一些调试，但我认为这是你的问题）

```
XmlNodeList classTables = xml.SelectNodes("//class_table/fields/fields_name");
//XmlNodeList classTables = readDiagramXml.GetElementsByTagName("class_table");
foreach (XmlNode items in classTables)
{
    string className = items.InnerText;
    foreach (
    File.AppendAllText("A_class_diagram_test.txt", className + Environment.NewLine);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-28T19:49:47.853

您提供的 XML 似乎没有根元素。所以当你试图解析它时它会抛出一个错误。我会添加一个根元素

```
<root>
   <class_table>
    //some content
   </class_table>
   <class_table>
    //some content
   </class_table>
</root> 
```

现在我们可以使用 LINQtoXML 来解析它。

```
var path = Server.MapPath("~/Content/pathToYourFile.xml");           
XElement elm = XElement.Load(path);
if (elm != null)
{
    foreach (var item in elm.Elements("class_table"))
    {
        string className = item.Element("class_title").
                                              Element("class_name").Value;       

        foreach (var field in item.Element("fields").
                                               Elements("field_name"))
        {
            string fieldName = field.Value;
        }
        foreach (var prop in item.Element("properties").
                                                    Elements("property_name"))
        {
            string propName = prop.Value;
        }

    }
} 
```

# android - AdMob 的问题

> ID：12166180
> 
> 赞同：2
> 
> 时间：2012-08-28T19:27:57.773
> 
> 标签：android, admob, ads

我有个问题。我有几个安卓应用程序并从广告中获得收入。头几个月我有大约 60.000 次展示和良好的每千次展示费用。现在我的展示次数超过了 150.000 次，点击次数也比以前多，但我的 eCPM 非常低（0.04）。我已经尝试添加过滤器、更改刷新率以及从文章和论坛中获取的许多其他建议。

有人对他的广告平台满意吗？你能给我推荐一些东西来增加我的 eCPM 或其他广告网络吗？

# javascript - 在 socket.io 中管理多个选项卡（但同一用户）

> ID：12166187
> 
> 赞同：24
> 
> 时间：2012-08-28T19:28:23.840
> 
> 标签：javascript, node.js, session, socket.io

我在使用 socket.io 时遇到了一些问题，我不知道如何解决它。我有一个带有 socket.io 登录系统的应用程序来管理用户交互。我还有一个数组来管理所有活动的 websocket 会话。该数组存储一对 session.id => 用户名。

当用户打开具有相同页面（或使用 websocket 的不同页面）的新选项卡时，问题就开始了。这会导致数组中出现重复的用户名条目。

```
{id1, username}
{id2, username} 
```

当 socket 向用户发送消息时，它只发送到数组的第一个会话 id，因此只有一个选项卡接收消息。

我试图更改新连接的套接字 id 以匹配另一个，但它不起作用。

```
socket.id = sessionId of the other websocket; 
```

我认为另一种解决方案是将消息发送到所有打开的会话，但我认为这不是最好的方法。

谢谢。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-08-28T19:32:08.423

听起来您可能指的是问题中的套接字 ID，而不是会话 ID。如果您有一个快速会话，您可以使用会话 ID，只要它们使用相同的浏览器并且它不是处于“私人”模式，无论打开多少个选项卡，它都是相同的。查看这个问题，了解如何在 socket.io 中启用会话。

[socket.io 和会话？](https://stackoverflow.com/questions/4641053/socket-io-and-session/6171798)

**更新：** 当您保存会话 ID 时，您会将其与用户的昵称和连接的套接字相关联。然后您可以遍历每个套接字并发送消息。类似于以下内容：

```
[
    {sessionId: '12345', nickname: 'timmay!', socketIds: [1, 2, 3]},
    {sessionId: '23456', nickname: 'pete', socketIds: [4, 5, 6]}
] 
```

当建立另一个连接时，您将新的套接字 ID 推送到 socketIds 数组中，当用户断开连接时，您删除该 ID。

另一种选择可能是每个会话只允许每个用户一个选项卡。您可以存储单个 socketId，并且当为同一用户连接新的套接字时，您可以断开原始套接字并使用新的套接字。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-06-20T19:34:01.563

我知道你问这个问题已经很久了，但就在 4 年前，我发布了一个用于 node js、express 和 socket.io 的模块，它可以管理你想要的东西。检查用法和示例，希望对您有所帮助！

你可以通过 NPM 安装 [socket.io.users](https://www.npmjs.com/package/socket.io.users)这是一个用于 socket.io 应用程序的节点 js 模块。每个客户一个用户。

部分使用代码

```
var express = require('express');
var app = express();
var server = require('http').createServer(app);
var socketUsers = require('socket.io.users');
//....
socketUsers.Session(app);//IMPORTANT 
//...
var rootIo = require('socket.io')(server); //default '/' as namespace. 
var chatIo = rootIo.of('/chat');

var rootUsers = socketUsers.Users; /* default '/' as namespace.
Each namespace       has IT's OWN users object list,
but the Id of a user of any other namespace may 
has the same value if       request comes from the same client-machine-user.
This makes   easy to keep a kind of 
synchronization between all users of all   different namespaces. */

var chatUsers = socketUsers.Users.of('/chat'); //  

rootIo.use(socketUsers.Middleware());/*IMPORTANT but no errors if you want
to  skip it for a io.of(namespace) 
that you don't want the socket.io.users' support.  */

chatUsers.use(socketUsers.Middleware());

chatUsers.on('connected',function(user){
console.log(user.id + ' has connected to the CHAT');
user.store.username = 'username setted by server side'; /*at the store
property you can store any type of properties
and objects you want to share between your user's sockets.  */
user.socket.on('any event', function(data){ 
/*user.socket is the current socket, to get all connected sockets from this  
user, use: user.sockets */

});
chatIo.emit('set username',user.store.username);
});

rootUsers.on('connected',function(user){
   console.log('User has connected with ID: '+ user.id);
});

rootUsers.on('connection',function(user){
   console.log('Socket ID: '+user.socket.id+' is user with ID: '+user.id);
});

rootUsers.on('disconnected',function(user){
    console.log('User with ID: '+user.id+'is gone away :(');
});

//...server.listen blabla.. 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-07-16T12:55:45.977

您可以像这样使用哈希：

```
var sessionHash = {};
sessionHash['userName'] = socket; 
```

并检查`io.sockets.on('connection',..)`该键下是否存在套接字。

如果是这样，您可以对其执行`sessionHash['userName'].disconnect();`并保存全新的套接字。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-12-15T07:20:09.390

[对讲库](https://github.com/diy/intercom.js/#using-with-socketio)可用于共享和管理 socket.io 连接。

```
// Initialize socket.io on one tab
var socket = io.connect('//yourwebsite.com/socketio');

// Initialize intercom on all tab
var intercom = Intercom.getInstance();
intercom.bind(socket);

// Listen to an event
intercom.on('msgBroadcast', function(data){
    console.log(data);
});

// Emit an event
intercom.emit('msgBroadcast', {
    socket: true,
    message: 'Hello all!'
}); 
```

您还可以使用[socketio 共享网络工作者](https://github.com/IguMail/socketio-shared-webworker)

# actionscript-3 - 识别应用到按钮的皮肤

> ID：12166192
> 
> 赞同：0
> 
> 时间：2012-08-28T19:28:38.573
> 
> 标签：actionscript-3, apache-flex, flex4, flash-builder, flex3

你好我有一个小问题。有没有办法确定哪个皮肤应用于按钮？我想使用 if-else 语句...

```
//if Skins.skin1 is used
    //statements...
//else if Skins.skin2 is used
   //statements... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T21:27:09.520

扩展的 Spark 组件`SkinnalbleComponent`，例如`Button`具有[皮肤](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/spark/components/supportClasses/SkinnableComponent.html#skin)属性。它是在 Flex 将皮肤附加到组件之后设置的。例如，如果您在 Actionscript 中创建 Button 并立即检查`skin`.

您可以像这样查询皮肤的类型：

```
if (button.skin is SkinClass1)
{
    // do something
}
else if (button.skin is SkinClass2)
{
    // etc.
} 
```

甚至：

```
switch (true)
{
    case button.skin is SkinClass1:
        // do something
        break;
    case button.skin is SkinClass2:
        //
        break;
} 
```

# asp.net - AJAX 控制工具包 透明控制 UI 渲染

> ID：12166193
> 
> 赞同：0
> 
> 时间：2012-08-28T19:28:39.503
> 
> 标签：asp.net, ajax, asp.net-ajax, ajaxcontroltoolkit, calendarextender

嗨，我对 Ajax 控件有一个奇怪的问题。所有 Ajax 控件的透明背景，例如 Validator Callout Extender、Calendar Extender、Baloon Popup Extender。

Ajax 的版本是 4.1.51116.0 运行时版本是 v4.0.30319

我没有应用任何针对这些扩展器的样式。

Calendar Extender 的示例语法如下：

```
<asp:TextBox ID="txtFrom" runat="server" CssClass="textbox txtsingleline"
    ReadOnly="true"></asp:TextBox>
<asp:ImageButton ID="imgBtnFrom" runat="server" ImageUrl="~/images/Cal20x20.png" Width="20" Height="20" ImageAlign="TextTop" />
<asp:CalendarExtender ID="txtFrom_CalendarExtender" PopupButtonID="imgBtnFrom"
    runat="server" Enabled="True" 
    TargetControlID="txtFrom" Format="MMM d, yyyy">
</asp:CalendarExtender> 
```

看起来像

![日历扩展器](../Images/b24268c1415d3e2d34976f5415e48dfa.png)

对于验证器标注扩展器：

```
<asp:TextBox ID="txtDescription" runat="server" CssClass="textbox txtmultiline" MaxLength="400"
    TextMode="MultiLine"></asp:TextBox>
<asp:RequiredFieldValidator ID="rfvDescription" runat="server" Display="None" ControlToValidate="txtDescription" ValidationGroup="ldForm"
    ErrorMessage="Please write Description." Font-Size="Small" ForeColor="Red"
    SetFocusOnError="True"></asp:RequiredFieldValidator>
<asp:ValidatorCalloutExtender ID="rfvDescriptionE" runat="server" TargetControlID="rfvDescription">
</asp:ValidatorCalloutExtender> 
```

浅色背景如下所示

![页面上带有浅色背景的验证器标注扩展器](../Images/062cff969a0840ae309bc38a0870bfb3.png)

对于深色背景，它显示如下：

![在此处输入图像描述](../Images/1e39fc820990f607e12b0048c9fe20df.png)

如果我在其他简单的应用程序中使用相同的 dll，效果很好。我使用[GZip](http://www.mindfiresolutions.com/Compress-components-in-ASPNET-with-Gzip-1208.php)来获得快速响应时间（你认为这会破坏 Ajax 控件的 UI 吗？）。在使用 GZip 之前，它也曾在原始应用程序中运行良好。我什至尝试删除 GZip 代码并运行应用程序，但徒劳无功。

任何想法是否是 GZip 是触发此错误的原因或任何其他原因？但我尝试删除 GZipStreaming

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T19:40:58.450

终于明白了…………

在[GZip](http://www.mindfiresolutions.com/Compress-components-in-ASPNET-with-Gzip-1208.php)代码中，下面的代码行正在做恶作剧:)

```
// Compress only html and stylesheet documents.
        if (contentType == "text/html" || contentType == "text/css") 
```

我将其更改如下以使其正常工作。

```
// Compress only html and stylesheet documents.
        if (contentType == "text/html") 
```

# php - 正则表达式在更广泛的上下文中存在多个内部巧合

> ID：12166201
> 
> 赞同：0
> 
> 时间：2012-08-28T19:29:35.290
> 
> 标签：php, regex, preg-match-all, multiple-instances

我想用正则表达式在一个短语中找到多个巧合

在这个短语中匹配多个维度，结果很简单： [工作示例在这里](http://lumadis.be/regex/test_regex.php?id=1270)

```
<?php
    preg_match_all("/(\d+\.\d)(x|cm)/", "120.0x140.0x215.0cm", $out);
    print_r($out);
?>

[0]=> array
    [0]=>120.0x
    [1]=>140.0x
    [2]=>215.0cm
[1]=> array
    [0]=>120.0
    [1]=>140.0
    [2]=>215.0
[2]=> array
    [0]=>x
    [1]=>x
    [2]=>cm 
```

我将使用的是`$out[1]`数组

当我尝试将此模式与上下文隔离时，问题就出现了，它只匹配最后一个值：[Working example here](http://lumadis.be/regex/test_regex.php?id=1271)

```
<?php
    preg_match_all("/<div>Dimensions: ((\d+\.\d)(x|cm))+<\/div>/", "<div>Dimensions: 120.0x140.0x215.0cm</div>", $out);
    print_r($out);
?>

[0]=> array
    [0]=><div>Dimensions: 120.0x140.0x215.0cm</div>
[1]=> array
    [0]=>215.0cm
[2]=> array
    [0]=>215.0
[3]=> array
    [0]=>cm 
```

我`$out[2]`希望包含多个值，与`$out[1]`第一个示例相同

我在这里缺少什么？是否可以使用正则表达式来做到这一点，我敢打赌这可能是可能的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T19:32:22.233

这是因为当只找到一个匹配项，**但多次找到一个捕获组**时，您只会得到最后一个。

一种可能的解决方案是从`<div>`元素中提取，然后使用您拥有的第一个正则表达式。

# sql-server - 报告服务 (ssrs) 提示用户名/密码

> ID：12166202
> 
> 赞同：10
> 
> 时间：2012-08-28T19:29:46.777
> 
> 标签：sql-server, reporting-services

我正在使用报告服务 2010 并在尝试访问报告时收到以下提示：

![在此处输入图像描述](../Images/241bfb89fc259ab707706984def10a5b.png)

在报告定义中，我指定了数据库用户名/密码。

有没有办法绕过这个？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-28T19:31:41.920

在报告服务方面，您实际上需要处理两个登录。

1.  登录数据库是为了获取数据，与实际的报表本身无关。您使用的登录名将作为用于提取报告数据的用户/凭据发送到数据库。

2.  这个提示你有一个屏幕截图，是报表服务器的身份验证，默认情况下 rs 使用 windows 身份验证，所以输入你的域\用户名和密码。

如果您不喜欢这种默认行为，您可以更改它，本指南应该可以帮助您入门：http: [//msdn.microsoft.com/en-us/library/cc281253.aspx](http://msdn.microsoft.com/en-us/library/cc281253.aspx)

另请参阅：http: [//msdn.microsoft.com/en-us/library/bb283249.aspx](http://msdn.microsoft.com/en-us/library/bb283249.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-01-04T06:31:12.293

在 SSRS 工具中打开您的项目/解决方案。选择报告属性（右键单击报告项目并选择属性）。将“覆盖数据集”和“覆盖数据源”更新为 True。然后转到您的共享数据源属性并选择“凭据”部分。您可以在此处选择“使用此用户名和密码”选项并设置适当的 SQL Server 凭据。单击确定，不再提示来自前端的凭据:)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-05-12T01:52:56.860

如果您只想绕过登录提示，您可以修改“TargetServerURL”，因为它包含“reportserver”。（这就像在 MVC 中为控制器添加控制器名称后缀）

环境：Visual Studio 2008、Sql Server 2008

对我来说，当我将“TargetServerURL”设置为 localhost/finreport 时它会提示。如下文所述，将“TargetServerURL”更改为 localhost/reportserver 绕过了登录提示。

欲了解更多信息：[https ://docs.microsoft.com/en-us/sql/reporting-services/tools/reporting-services-login-dialog-box-ssrs](https://docs.microsoft.com/en-us/sql/reporting-services/tools/reporting-services-login-dialog-box-ssrs)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-02-16T03:46:06.613

我的情况是因为我使用 ReportViewer 版本 10 来访问 Report Server 2014。将 ReportViewer 升级到版本 11 可以消除此问题。

检查您的 Web.config 中的 \configuration\system.webServer\handlers\add[type]。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-10-21T10:28:12.297

以前的选择解决方案不适用于某人（它不适用于我），所以我将向您展示如何绕过它。SSRS 使用 Internet Explorer 在后台运行这些请求（即使您使用其他浏览器），因此解决方案将向 IE 添加不同类型的身份验证。去：

打开 Internet Explorer -> Internet 选项 -> 自定义 -> 用户验证选择“使用当前用户名和密码自动登录”

[![在此处输入图像描述](../Images/67e8bb641545d642f7e6c8572fd627d9.png)](https://i.stack.imgur.com/pXAb1.png)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-06-21T10:28:21.633

转到您的门户网站 url-> 站点设置-> 安全性-> 添加用户或组，对您要上传的所有项目也执行此操作。

# javascript - 数组删除重复结果 Javascript

> ID：12166205
> 
> 赞同：0
> 
> 时间：2012-08-28T19:29:51.450
> 
> 标签：javascript, arrays, duplicates

我需要在洗牌后删除重复的内容。目前结果出现重复。

示例：结果 2,2,1,4,4,3,5,5，我需要 2,1,4,3,5

这是一个大数组

```
<script>
Array.prototype.shuffle = function() {
var input = this;

for (var i = input.length-1; i >=0; i--) {

    var randomIndex = Math.floor(Math.random()*(i+1)); 
    var itemAtIndex = input[randomIndex]; 

    input[randomIndex] = input[i]; 
    input[i] = itemAtIndex;

}
return input;
}

var tempArray = [ 

1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,

2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,

3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,

4,4,4,4,4,4,4,4,4,4,4,4,4,

5,5,5,5,5,
]

tempArray.shuffle();

document.write(tempArray);

</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T19:32:02.880

而不是使用那个大数组，只需使用`[1,2,3,4,5].shuffle()`. 这样，您将不会得到重复。但这里有一个函数，它会给你一个唯一的数组，即一个没有重复的数组：

```
function unique(arr) {
  var result = [],
      map = {};
  for (var i = 0; i < arr.length; i++) {
    var duplicate = map[arr[i]];
    if (!duplicate) {
        result.push(arr[i]);
        map[arr[i]] = true;
    }
  }
  return result;
} 
```

然后，只需使用`unique(tempArray.shuffle())`.

这是一个**[演示](http://jsfiddle.net/UyJbr/)**。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T19:48:44.693

```
function unique(b) {
    for (var c = [], d = {}, a = 0; a < b.length; a++) {
        d[b[a]] || (c.push(b[a]), d[b[a]] = !0);
    }
    return c;
}

unique( [1, 1, 1, 2, 2, 3] ); // [1, 2, 3] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-11-09T08:22:10.433

您可以使用以下方法，使用 ES6 语法：`const unique = [...new Set(array)]`

有关 Set 对象的更多信息： [Mozilla - Set 对象](https://developer.mozilla.org/he/docs/Web/JavaScript/Reference/Global_Objects/Set)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-28T19:52:08.313

如果您可以访问 jQuery，则可以将进程拆分为两个数组，获取该结果，循环遍历它，如果它还没有，则仅将其添加到 newArray 中。这样，它们以相同的顺序出现。

```
var someArray = [3,3,3,3,3,3,4,4,4,4,1,1,1,1,1,2,2];

function cleanArray(oldArray) {
    var newArray = [];
    for(i=0;i<oldArray.length;i++) {
        if( $.inArray(oldArray[i], newArray) == -1 ) {
            newArray.push(oldArray[i]);         
        }
    }
    return newArray;
}

document.write(cleanArray(someArray));
//result would be 3,4,1,2 
```

**编辑**：我已经更新了函数，所以它按照我相信你想象的方式工作。这是一个工作示例：http: [//jsfiddle.net/xe2F8/](http://jsfiddle.net/xe2F8/)

另外，不要忘记链接到 jquery：

```
 <script src="http://code.jquery.com/jquery-latest.js"></script> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-11-09T06:44:32.273

从任何 JavaScript 数组中删除重复项的一种非常快速的方法如下：

```
var listWithDuplicates = [1, 2, 2, 4, 3, 4, 5, 3, 1, 5];
console.log(listWithDuplicates.filter(function(element, index, array) {
  // using lastIndexOf(...) retains the last
  // repetition preserving the order of the array
  return index === array.indexOf(element);
}));
//prints out: [1, 2, 4, 3, 5] - with indexOf variant
//prints out: [2, 4, 3, 1, 5] - with lastIndexOf variant 
```

希望这对于与从 JavaScript 数组中删除重复项相关的某些目的会派上用场。

请分享有关此解决方案未解决的任何极端情况的反馈或改进此答案的任何建议。

# r - R - 列出所有全局变量

> ID：12166208
> 
> 赞同：4
> 
> 时间：2012-08-28T19:29:58.767
> 
> 标签：r

我想列出脚本中的所有全局变量。这是我到目前为止所拥有的

```
MyVariables<-objects()
for (i in MyVariables) {
  print(i)
} 
```

上面的代码工作并打印出我所有的全局变量的名称。但是，我似乎无法找到一种方法来打印出循环内变量的值。任何帮助表示赞赏。

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-29T15:52:38.483

如果要打印全局环境中变量的所有名称和值，您可以这样做：

```
print(as.list(.GlobalEnv)) 
```

这可能会打印大量信息，最好这样做：

```
str(as.list(.GlobalEnv)) 
```

或者

```
library(TeachingDemos)
TkListView(as.list(.GlobalEnv)) 
```

还要看`ls.str()`功能。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-28T19:37:10.323

我想你正在寻找`get`

```
a <- 5
b <- 10
for (obj in c("a", "b")) print(get(obj))
#[1] 5
#[1] 10 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T19:42:43.507

如果您有相同的变量名称，您可以尝试

```
get('your_variable_name', envir=i) 
```

# jquery - 隐藏/显示导航

> ID：12166211
> 
> 赞同：-2
> 
> 时间：2012-08-28T19:30:01.720
> 
> 标签：jquery, navigation, show-hide

我有一个项目，我从一年前在课堂上做的实验室借了一些 JavaScript，我有点生疏，所以我不知道为什么它不能正常工作。我制作了一个示例网站，以便您了解它是如何工作的。它位于[amykate.com/test](http://amykate.com/test)，示例文件可以在[amykate.com/test.zip](http://amykate.com/test.zip)下载。

我需要设置它，以便当您第一次导航到该站点时，“主”div 中不会显示任何内容。这使得我将在后台播放的幻灯片成为主要焦点。但是，一旦您单击一个链接，它应该会从幻灯片的相关 div 上方显示适当的内容。（我把所有幻灯片的东西都留给了这个例子，因为它不是必需的。）我遇到的问题是，一旦你点击一个链接，你必须刷新页面才能真正看到内容。这是为什么？我希望能够完全不必刷新页面，以便幻灯片可以一直在后台继续播放。有什么建议么？

这是HTML结构的设置方式...

```
<nav id="hide-show-nav">
    <a href="#about">About</a> |
    <a href="#gallery">Gallery</a> |
    <a href="#contact">Contact</a>
</nav>

<div id="main">

    <div id="about">
        <p>This is the about section.</p>
    </div> <!-- #about -->

    <div id="gallery">
        <p>This is the gallery section.</p>
    </div> <!-- #gallery -->

    <div id="contact">
        <p>This is the contact section.</p>
    </div> <!-- #contact -->

</div> <!-- #main --> 
```

JavaScript 是这样的……

```
function addLoadEvent(func) {
  var oldonload = window.onload;
  if (typeof window.onload != 'function') {
    window.onload = func;
  } else {
    window.onload = function() {
      oldonload();
      func();
    }
  }
}

function addEvent(element, type, handler)
{
    if (element.addEventListener)
        element.addEventListener(type, handler, false);
    else
    {
        if (!handler.$$guid) handler.$$guid = addEvent.guid++;
        if (!element.events) element.events = {};
        var handlers = element.events[type];
        if (!handlers)
        {
            handlers = element.events[type] = {};
            if (element['on' + type]) handlers[0] = element['on' + type];
            element['on' + type] = handleEvent;
        }

        handlers[handler.$$guid] = handler;
    }
}
addEvent.guid = 1;

addLoadEvent(init);

function init()
{
    findDest();

    //get reference to container element
    var holder = document.getElementById('main');

    //create ref to all divs inside of main
    var divs = holder.getElementsByTagName('DIV');
    var l = divs.length;

    //get reference to nav
    var nav = document.getElementById('hide-show-nav');

    //create ref to all links in nav
    var links = nav.getElementsByTagName('A');
    var numLinks = links.length;

    //loop over links add event listeners
    for(var j=0; j < numLinks; j++)
    {
        addEvent(links[j], 'click', showDiv);   
        addEvent(links[j], 'click', setStatus); 
    }
}

function showDiv(evt)
{
    //get reference to container element
    var holder = document.getElementById('main');

    //create ref to all divs inside of main
    var divs = holder.getElementsByTagName('DIV');
    var l = divs.length;

    //loop over divs and hide them all
    for(var i = 0; i < l; i++)
    {
        divs[i].className = 'hide'; 
    }

    //get reference to link click on
    var target = evt.target || window.event.srcElement;
    var destination = target.href;
    var divName = destination.split('#')[1];
    document.getElementById(divName).className = 'show';
}

function findDest()
{
    //get reference to container element
    var holder = document.getElementById('main');

    //create ref to all divs inside of main
    var divs = holder.getElementsByTagName('DIV');
    var l = divs.length;

    //loop over divs and hide them all
    for(var i = 0; i < l; i++)
    {
        divs[i].className = 'hide'; 
    }

    //get reference to link click on
    var destName = window.location.toString();
    var loc = destName.split('#')[1];   
    document.getElementById(loc).className = 'show';
}

function setStatus(evt)
{
    //get reference to link click on
    var target = evt.target || window.event.srcElement;

    //get reference to nav
    var nav = document.getElementById('hide-show-nav');

    //create ref to all links in nav
    var links = nav.getElementsByTagName('A');
    var numLinks = links.length;

    //loop over links add event listeners
    for(var j=0; j < numLinks; j++)
    {
        changeClassName('remove', links[j], 'statusOn');
    }

    //add status indication to link
    changeClassName('add', target, 'statusOn');

} 
```

而这一点点CSS...

```
.hide {
    display:none;
}

.show {
    display:block;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T19:35:44.470

你的 128 行 javascript 在 jQuery 中会这样：

```
$(function() {
    $("#hide-show-nav​​​ a​").on('click', function(e) {
        e.preventDefault();
        $($(this).attr('href'), '#main').show().siblings().hide();
    })​​;​
})​​;​ 
```

[**小提琴**](http://jsfiddle.net/z27Qx/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T21:23:23.760

不久前我终于弄清楚了这一点，并认为我会发布我所做的事情，以防其他人遇到这个问题。

```
$(function() {
    $('#main').addClass('hide');
});

$('body').on('click','nav a', function(e) {
    $('#main').removeClass('hide');
    $('#main').children().addClass('hide');
    $($(this).attr('href')).removeClass('hide');
    e.preventDefault();
}); 
```

希望有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T19:52:29.420

```
//get reference to nav
    var nav = document.getElementById('nav'); 
```

没有 id 为 'nav' 的元素。我认为它应该是“隐藏显示导航”。检查一次。像这样的东西。。

```
//get reference to nav
    var nav = document.getElementById('hide-show-nav'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-28T19:54:01.457

您是否尝试过对这种情况非常有用的 jQuery？对于我在您的 JS 代码中看到的内容，您的生活变得非常复杂，这可以用 5 行代码编写：

```
$('body').on('click','#hide-show-nav a', function(e) {
    //hide all children div inside your main container
    $('#main').children().addClass('hide');
    //show only the one clicked
    $($(this).attr('href')).removeClass('hide');
    //prevent the default behaviour of the anchor
    e.preventDefault();
}); 
```

如果您希望在默认情况下显示主目录中的特殊 div，则将“隐藏”类放在其他类上。

# c# - Windows 8 Metro ListView - 无法禁用 ScrollViewer (C#/XAML)

> ID：12166212
> 
> 赞同：2
> 
> 时间：2012-08-28T19:30:02.740
> 
> 标签：c#, xaml, listview, windows-8, scrollviewer

我有一个 ScrollViewer，它包含一个包含 2 个 ListViews 的 Horizo​​ntal StackPanel。

我的目标是让 2 个 ListView 一起滚动。我遇到的问题是我无法禁用 ListViews 中的内置 ScrollViewers ......无论我做什么，它们都会继续独立滚动。我真的必须错过一些东西......任何帮助将不胜感激。

这是我的 XAML：

```
<ScrollViewer VerticalScrollBarVisibility="Visible" 
          HorizontalScrollBarVisibility="Disabled" 
          ZoomMode="Disabled" 
          HorizontalAlignment="Left" 
          VerticalAlignment="Top" 
          Width="830" 
          Height="500">

  <StackPanel x:Name="teesSP" 
              HorizontalAlignment="Left" 
              Height="500" 
              Width="830" 
              Orientation="Horizontal" 
              VerticalAlignment="Top">

      <ListView x:Name="timesLV1" 
                HorizontalAlignment="Left" 
                Width="130" 
                Height="500" 
                ScrollViewer.HorizontalScrollBarVisibility="Disabled"
                ScrollViewer.HorizontalScrollMode="Disabled"
                ScrollViewer.IsHorizontalRailEnabled="False"
                ScrollViewer.IsHorizontalScrollChainingEnabled="False"
                ScrollViewer.IsScrollInertiaEnabled="False"
                ScrollViewer.IsVerticalRailEnabled="False"
                ScrollViewer.IsVerticalScrollChainingEnabled="False"
                ScrollViewer.IsZoomChainingEnabled="False"
                ScrollViewer.IsZoomInertiaEnabled="False"
                ScrollViewer.VerticalScrollBarVisibility="Disabled"
                ScrollViewer.VerticalScrollMode="Disabled"
                BorderThickness="2" 
                BorderBrush="Black" 
                VerticalAlignment="Top" 
                ItemTemplate="{StaticResource TimeTileTemplate}"
                SelectionMode="Single" 
                SelectionChanged="timesLV_Click" />

      <ListView x:Name="timesLV2" 
                HorizontalAlignment="Left" 
                Width="700" 
                Height="500" 
                ScrollViewer.HorizontalScrollBarVisibility="Disabled"
                ScrollViewer.HorizontalScrollMode="Disabled"
                ScrollViewer.IsHorizontalRailEnabled="False"
                ScrollViewer.IsHorizontalScrollChainingEnabled="False"
                ScrollViewer.IsScrollInertiaEnabled="False"
                ScrollViewer.IsVerticalRailEnabled="False"
                ScrollViewer.IsVerticalScrollChainingEnabled="False"
                ScrollViewer.IsZoomChainingEnabled="False"
                ScrollViewer.IsZoomInertiaEnabled="False"
                ScrollViewer.VerticalScrollBarVisibility="Disabled"
                ScrollViewer.VerticalScrollMode="Disabled"
                BorderThickness="2" 
                BorderBrush="Black" 
                VerticalAlignment="Top" 
                ItemTemplate="{StaticResource TimeTileTemplate}"
                SelectionMode="Single" 
                SelectionChanged="timesLV_Click" />

  </StackPanel>

</ScrollViewer> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T19:38:59.733

这是因为您为每个 ListView 指定了一定的宽度和高度。从 ListView 和 StackPanel 中删除宽度和高度，仅用于滚动查看器。

然后，您只需使 ScrollViewer 具有固定的高度或包含它的网格的大小。

# jquery - 设置和样式 qTips jquery

> ID：12166214
> 
> 赞同：0
> 
> 时间：2012-08-28T19:30:11.830
> 
> 标签：jquery, tooltip, qtip

无论我做什么，我似乎都无法获得我的工具提示来查看它们在网站上的状态：

[http://craigsworks.com/projects/qtip/features/#tips](http://craigsworks.com/projects/qtip/features/#tips)

我希望我的工具提示看起来像上面，当： -

*   需要单击或悬停在 16 像素乘 16 像素的信息图标上，然后显示工具提示。
*   需要有一个很好的淡入淡出效果。
*   需要用一个类来定位标题属性。因此，如果链接具有 myToolTip 类，则会显示工具提示。

谁能帮帮我，把我逼疯了！

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T19:43:30.530

```
$(document).ready(function() {
    $('#toolTipElementId').qtip({
        content: 'Tooltip Text to be displayed ',
        style: { 
            tip: 'topLeft',
            border: {
                width: 2,
                radius: 5,
                color: '#6699CC'
            },
            width: 200
        }  
    });
}); 
```

# android - Android 下拉菜单（无微调器！）

> ID：12166215
> 
> 赞同：5
> 
> 时间：2012-08-28T19:30:12.903
> 
> 标签：android, drop-down-menu, android-listview, android-spinner

我想创建一个下拉导航。我画了这个草图：

![在此处输入图像描述](../Images/29fc09d4db9252d75c83932f84edd5f5.png)

我已经尝试了一个微调器，但我不想要那个组合框，只想要那个列表，它显示在按钮点击上。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T19:40:19.003

有没有看 ApiDemos->Views->popup menu 的例子。这可能是合适的。如果没有，恐怕您可能需要为此定制 UI。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-28T20:23:01.117

我假设您正在使用低于 11 的 API。下拉微调器可从 API 级别 11 与操作栏一起使用。**但是**你可以使用 Actionbar sherlock。下载演示（作为来自 Github 的源代码或作为来自 Play 商店的应用程序）。actionbarsherlock 实现了 dropdownspinners。它应该如下所示：

![](../Images/bef3114826e74bddf6af1b4c182aa134.png)

您可以从以下网址获取图书馆： [https ://github.com/JakeWharton/ActionBarSherlock](https://github.com/JakeWharton/ActionBarSherlock)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T20:15:43.010

`Dialog`您还可以从 xml 布局创建并扩展其视图。

```
Dialog dialog = new Dialog(this);
dialog.setContentView(R.layout.popup);
dialog.show(); 
```

# ruby-on-rails - PGError：SSL 连接失败，H10 错误

> ID：12166217
> 
> 赞同：3
> 
> 时间：2012-08-28T19:30:19.470
> 
> 标签：ruby-on-rails, ruby, postgresql, heroku

我使用 heroku 和 postgresql 的应用程序已 100% 宕机，并且应用程序因`H10 error`. 我相信下面的日志是问题的根源：

```
2012-08-28T19:17:44+00:00 app[web.1]: /app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.3/lib/active_record/connection_adapters/postgresql_adapter.rb:1194:in `initialize': FATAL:  role "arseiiyfkbqalv" is not permitted to log in (PGError) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-29T15:39:30.970

（我只是你的情况，因为我在 heroku 数据团队工作）

您取消了您的开发数据库的配置，但尚未更新您的测功机配置以使其连接到新数据库。你可以通过运行来做到这一点`heroku pg:promote HEROKU_POSTGRESQL_<NEW COLOR> --app your-app`

您可以通过运行查看当前在您的应用程序上的数据库列表`heroku pg:info --app your-app`。被提升为主数据库的数据库也将显示它是`DATABASE_URL`.

# sql - SQL Server Express 数据库是文件或类似于 mysql 服务器后面的普通 mysql 数据库

> ID：12166222
> 
> 赞同：1
> 
> 时间：2012-08-28T19:30:33.073
> 
> 标签：sql, sql-server, app-data

我想知道我是否在 asp.net mvc4`app_data`文件夹中创建了一个数据库，它会像 MS Access 数据库一样，还是会像 MySQL 数据库那样可以用来调用 MySQL 服务器？

SQL Server Express 和普通 SQL Server 有什么不同？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T19:43:14.793

关于应用程序的 app_data 文件夹中的[数据库，请查看 App_data 文件夹中的数据库，](https://stackoverflow.com/questions/5728467/difference-between-keeping-database-in-app-data-and-connecting-to-an-external-da)这可能会对您有所帮助。

关于 SQL Server 与 SQL Server Express，与 SQL Express 相比，MS SQL Server 能够处理更多数量的并发用户/事务几乎没有区别。

SQL Express 的数据库大小限制最高为 4 GB

SQL express 无法调度作业，1 个 CPU 并且没有 SSIS 等高级功能

# java - 用于选择线条样式的 JavaFX 组合框

> ID：12166227
> 
> 赞同：0
> 
> 时间：2012-08-28T19:30:43.393
> 
> 标签：java, javafx-2

我在选择列表中自定义了一个组合框来显示线型，但按钮只显示一个文本。如何在按钮中绘制选定的线型。

```
ComboBox<String> cmb = new ComboBox<String>();
cmb.getItems().addAll("-fx-stroke-dash-array: 12 2 4 2;", "-fx-stroke-dash-array: 2 2;");
cmb.setCellFactory(new Callback<ListView<String>, ListCell<String>>()
    {
        @Override public ListCell<String> call(ListView<String> p)
        {
            return new ListCell<String>()
                {
                    private final Group group;
                    private final Line line;
                    { 
                        setContentDisplay(ContentDisplay.GRAPHIC_ONLY); 
                        group = new Group();
                        group.getChildren().add(new Rectangle(100, 30, Color.WHITE));
                        line = new Line(0, 15, 100, 15);
                        group.getChildren().add(line);
                    }

                    @Override protected void updateItem(String style, boolean empty)
                    {
                        super.updateItem(style, empty);
                        if(style != null && !empty)
                        {
                            line.setStyle(style);
                            setGraphic(group);
                        }
                    }
                };
        }
    }); 
```

这是它的渲染方式： ![JavaFX 自定义组合框](../Images/bde8a6fb6f1a1884eb15dccaebc01aad.png)

我想显示选定的线条样本，而不是样式文本“-fx-stroke...”，我该如何解决？

在选择列表中，行的左侧总是有一个额外的空格，可以去掉这个空格吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T20:24:32.507

JavaFX 与 Swing 的工作方式不同，它缓存由 CellFactory 创建的节点并仅相应地更新它们，而不是使用它们进行渲染并丢弃它们（这就是您必须实现 updateItem 的原因）。JFX 类将使用一个节点（或“单元”）作为所谓的按钮单元，它只是为您显示文本的单元。基本上，您必须调用`cmd.setButtonCell(myCellFactory.call(null));`. 这会将您的自定义单元之一安装为按钮单元，并且组合框将使用适当的值自动更新它。

# eclipse - Eclipse 中超出了内部错误内存限制

> ID：12166228
> 
> 赞同：1
> 
> 时间：2012-08-28T19:30:47.010
> 
> 标签：eclipse, git, eclipse-plugin

我使用 svn 作为存储库。最近我被要求迁移到 Git。我正在为 Eclipse 使用 EGit 插件。但是每当我尝试做 Team -> Synchronize Workspace 时，我都会遇到以下错误

发生内部错误：正在同步 Git。超出 GC 限制。

我用谷歌搜索

[https://www.simplified.guide/eclipse/fix-gc-overhead-limit-exceeded](https://www.simplified.guide/eclipse/fix-gc-overhead-limit-exceeded)

并尝试增加 eclipse.ini 文件（-Xms512m -Xmx1024m）中的堆大小，但每当我进行 git 同步时，我仍然面临同样的问题。有时我也得到

发生内部错误：正在同步 Git。Java 堆大小。

我尝试将大小都增加到 2048 年，但仍未解决。有没有人遇到过这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-24T13:32:16.917

这里有类似的问题。有一个相当大的项目（7GB，我已经剥离了一些 4GB）。出堆，Eclipse 建议关闭。

使用命令行手动执行“git push”效果更好。至少我看到了一些进度信息和上传速度。

我现在看到这个

```
Counting objects: 810, done.
Delta compression using up to 8 threads.
Compressing objects: 100% (688/688), done.
error: RPC failed; result=55, HTTP code = 200.19 MiB/s      
fatal: The remote end hung up unexpectedly
Writing objects: 100% (809/809), 5.87 GiB | 25.57 MiB/s, done.
Total 809 (delta 186), reused 0 (delta 0)
fatal: The remote end hung up unexpectedly
Everything up-to-date 
```

不确定，我还没有在 github 上看到我的文件...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T22:13:53.327

您不必再使用 Team -> Synchronize Workspace。在 EGit 视图中，选择您的分支，EGit 将自动更新您的包/项目视图。要使用 Git“同步”，您需要将更改推送和拉取到远程仓​​库。

您还应该考虑不使用 EGit，而是使用单独的 Git 客户端，它比 EGit 功能更丰富且功能更丰富（基于个人经验）。我对 SourceTree (Mac OSX) 和 TortoiseGit (Windows) 非常幸运。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-14T04:46:26.810

此错误已于 2 月 2 日解决，您必须从每晚发布站点安装 EGit：http: [//download.eclipse.org/egit/updates-nightly](http://download.eclipse.org/egit/updates-nightly)

希望这能解决您的问题。

# node.js - 使用 node.js 自动部署和配置

> ID：12166236
> 
> 赞同：0
> 
> 时间：2012-08-28T19:31:14.310
> 
> 标签：node.js, automated-deployment

我们正在开发一些基于 Java EE 的分布式应用程序。它涉及多个消息代理（RabbitMQ、HornetQ）、多个数据库（HBase、MongoDB、Rracle）和 JBoss 应用程序服务器。

我们想使用 node.js 管理（部署和配置）这些节点。

那可能吗？有没有现成的可用框架？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T20:31:36.750

看一下[NPM 注册表](https://npmjs.org/browse/keyword/build)，在`build`.

最常用的似乎是[`jake`](https://npmjs.org/package/jake)(and `utils`), [`grunt`](https://npmjs.org/package/grunt)and [`gears`](https://npmjs.org/package/gears)。他们有很多定期下载，所以你可能想从那里开始。也就是说，我不确定用于管理所有相关数据库的工具。您需要检查这些驱动程序的状态。我知道 MongoDB 有一流的 Node.JS 支持，但其他的可能就没那么幸运了。

# c# - 用户可选择的 SQL Server Compact 数据库

> ID：12166238
> 
> 赞同：3
> 
> 时间：2012-08-28T19:31:21.380
> 
> 标签：c#, sql-server-ce, openfiledialog

我们正在创建一个使用 SQL Server Compact`.sdf`文件将数据存储在多个表中的应用程序。

当程序启动时，我们希望向用户展示从已经包含数据的现有数据库文件中工作的选项，或者创建一个新的空数据库文件。我们已经`.sdf`使用 Visual Studio 中的数据库资源管理器创建了该文件，因此我认为它默认与 bin 文件一起存储。

两个问题：

*   我们如何使用`OpenFileDialog`允许用户选择数据库并相应地修改数据连接？

*   当用户决定从一个新的数据库开始时，程序会记住我们用数据库浏览器创建的数据库结构，还是我们必须在程序中从头开始重新创建表、字段和连接？

比X！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T19:36:28.603

Unless you intentionally want users to be able to access DB files from any arbitrary location on their computer, you'd be better off storing the DB files in an application directory and letting users pick the DB from a simple ListView (which you would populate by iterating through all the DB files in your application's data directory or sub-directory).

For your second question, you should create a template database file with the correct tables, fields etc. but no data, and embed this as a resource in your application. To create a new database for the user, you would copy this resource to an actual file location (with the new DB's file name).

# protocol-buffers - Anymote 库中过时的 protobuf 版本

> ID：12166239
> 
> 赞同：2
> 
> 时间：2012-08-28T19:31:35.447
> 
> 标签：protocol-buffers, google-tv

在我们的应用程序中，我们使用的是协议缓冲区版本 2.4.1。现在我想集成一些 2\. 屏幕功能并在添加 Anymote 库时因为重复库而出现构建错误。Anymote-Lib 在 2.2.0 版本中使用协议缓冲区。用 Anymote-lib 中的较新版本替换它会导致错误：

> 08-28 19:47:40.967: E/AndroidRuntime(32461): java.lang.NoClassDefFoundError: com.google.polo.wire.protobuf.PoloProto$PairingRequest 08-28 19:47:40.967: E/AndroidRuntime(32461) : 在 com.google.polo.wire.protobuf.ProtobufWireAdapter.toProto(ProtobufWireAdapter.java:299) 08-28 19:47:40.967: E/AndroidRuntime(32461): 在 com.google.polo.wire.protobuf.ProtobufWireAdapter .poloMessageToProto(ProtobufWireAdapter.java:277) 08-28 19:47:40.967: E/AndroidRuntime(32461): at com.google.polo.wire.protobuf.ProtobufWireAdapter.sendMessage(ProtobufWireAdapter.java:245) 08-28 19 :47:40.967: E/AndroidRuntime(32461): at com.google.polo.pairing.PairingSession.sendMessage(PairingSession.java:675) 08-28 19:47:40.967: E/AndroidRuntime(32461): at com. google.polo.pairing.ClientPairingSession.doInitializationPhase(ClientPairingSession.java:63) 08-28 19:47:40.967: E/AndroidRuntime(32461): 在 com.google.polo.pairing.PairingSession.doPair(PairingSession.java:390) 08-28 19:47:40.967: E/AndroidRuntime(32461): 在 com.example .google.tv.anymotelibrary.connection.ConnectingTask.attemptToPair(ConnectingTask.java:262) 08-28 19:47:40.967: E/AndroidRuntime(32461): at com.example.google.tv.anymotelibrary.connection.ConnectingTask。连接（ConnectingTask.java:196）08-28 19:47:40.967：E/AndroidRuntime（32461）：在 com.example.google.tv.anymotelibrary.connection.ConnectingTask.run（ConnectingTask.java:172）E/AndroidRuntime(32461): at com.example.google.tv.anymotelibrary.connection.ConnectingTask.connect(ConnectingTask.java:196) 08-28 19:47:40.967: E/AndroidRuntime(32461): at com.example .google.tv.anymotelibrary.connection.ConnectingTask.run(ConnectingTask.java:172)E/AndroidRuntime(32461): at com.example.google.tv.anymotelibrary.connection.ConnectingTask.connect(ConnectingTask.java:196) 08-28 19:47:40.967: E/AndroidRuntime(32461): at com.example .google.tv.anymotelibrary.connection.ConnectingTask.run(ConnectingTask.java:172)

@Megha Joshi：您能否更新 Anymote 库以使用实际的 protobuf 版本，或者有没有其他方法可以解决这个问题？现在图书馆对我们来说是不可用的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T21:03:37.650

请在以下位置提交错误： [http ://code.google.com/p/googletv-issues/](http://code.google.com/p/googletv-issues/)

这周我会调查的。

# sql-server - 通过匹配 SQL Server 2005 中的标记属性内容导入 XML

> ID：12166242
> 
> 赞同：1
> 
> 时间：2012-08-28T19:31:44.197
> 
> 标签：sql-server, xml, sql-server-2005, xquery

我有一个如下所示的 XML 数据文件：

```
<Sales>
    <Store Number="8" Date="2012-08-20T03:00:00">
        <Value Field="CanceledOrders" Value="65.00"/>
        <Value Field="TotalDollars" Value="13.57"/>
    </Store>
    <Store Number="10" Date="2012-08-20T03:00:00">
        <Value Field="CanceledOrders" Value="38.00"/>
        <Value Field="TotalDollars" Value="29.22"/>
    </Store>
</Sales> 
```

我正在摸索如何将其提取到一个普通的 SQL 表中，如下所示：

```
+--------+---------------------+----------------+--------------+
| Number |        Date         | CanceledOrders | TotalDollars |
+--------+---------------------+----------------+--------------+
|      8 | 2012-08-20T03:00:00 | 65.00          | 13.57        |
|     10 | 2012-08-20T03:00:00 | 38.00          | 29.22        |
+--------+---------------------+----------------+--------------+ 
```

这是我到目前为止所拥有的。我不知道如何匹配 XML 属性内容值。我想匹配 /Sales/Store/Value/@Field 内容并从 /Sales/Store/Value/@Value 返回值。

```
DECLARE @X AS xml

SET @X = '<Sales>
  <Store Number="8" Date="2012-08-20T03:00:00">
    <Value Field="CanceledOrders" Value="65.00" />
    <Value Field="TotalDollars" Value="13.57" />
  </Store>
  <Store Number="10" Date="2012-08-20T03:00:00">
    <Value Field="CanceledOrders" Value="38.00" />
    <Value Field="TotalDollars" Value="29.22" />
  </Store>
</Sales>'

-- This is my start but it obviously doesn't return what I need.
SELECT Y.ID.value('(@Number)[1]', 'int') AS Number,
       Y.ID.value('(@Date)[1]', 'datetime') AS [Date],
       Y.ID.value('(Value/@Field)[1]', 'varchar(max)') AS "Field",
       Y.ID.value('(Value/@Value)[1]', 'varchar(max)') AS "Value"
FROM   @X.nodes('/Sales/Store') AS Y(ID) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T19:49:39.727

试试这个：

```
SELECT 
   Y.ID.value('(@Number)[1]', 'int') AS Number,
   Y.ID.value('(@Date)[1]', 'datetime') AS [Date],
   CancelledOrders = Y.ID.value('(Value[@Field="CanceledOrders"]/@Value)[1]', 'decimal(18,4)'),
   TotalDollars = Y.ID.value('(Value[@Field="TotalDollars"]/@Value)[1]', 'decimal(18,4)')
FROM   
   @input.nodes('/Sales/Store') AS Y(ID) 
```

# php - 使用弹出窗口发送阻止消息发送的电子邮件

> ID：12166249
> 
> 赞同：0
> 
> 时间：2012-08-28T19:32:03.987
> 
> 标签：php, forms, alert

我有一个发送电子邮件的简单弹出表单。

我想要我的表格做的是

1.  显示警报
2.  关闭弹出窗口 - 按下`submit`按钮后。

这是代表我的提交按钮的代码

```
 <input type='image' id="submit" src="images/submit.png" onclick="show_alert(); closeWin()" /> 
```

它显示错误并关闭窗口，但不知何故它停止发送消息。如果我删除“closeWin()”部分，那么窗口将不会关闭。

有没有人有任何建议我可以做些什么来解决它？

**已编辑**

```
//alert on form submit

function show_alert()
{

alert("Thank you. We'll be in touch soon to process your claim.");

}

//close window

function closeWin()
{

 window.close();

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T19:51:02.317

如果要提交表单，则必须将窗口关闭延迟到表单提交之后。简单的方法是将`window.close()`代码放在表单的服务器响应中。

请注意，使用警报不是很好，您应该考虑其他方式来通知用户。标准方法是将此消息放置在表单响应页面中，以及将关闭弹出窗口的“确定”按钮。

# string - 将文本解析为有效句子

> ID：12166250
> 
> 赞同：0
> 
> 时间：2012-08-28T19:32:05.950
> 
> 标签：string, algorithm, dynamic-programming

我对如何将任何文本解析为有效句子有疑问。

假设给出一个文本`iamjhamb`并解析为`i am jhamb`

```
My approach: I solved this using Dynamic programmnig, 
             Make an array T[], where T[i] shows string from 0 to i made any valid setence or not
             formula is T[i] = 1 iff T[j] = 1 and substring(j+1, i) is a word in dictionary for all
             j < i. 
```

但是这种方法并不完全正确，它给出了文本中所有可能的单词形式，因为这不是这个问题的要求。所以，请帮助我纠正这种方法，或提出任何其他好的方法。

我还有一个疑问，我在网上搜索了很多关于 Suffix 数组的信息，但没有得到任何好的教程。所以让我理解这个概念，或者提出任何好的链接。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T19:54:43.853

这个问题在自然语言处理中被称为分[词问题。](http://en.wikipedia.org/wiki/Text_segmentation#Word_segmentation)虽然这个问题很少出现在英语中，但在阿拉伯语或汉语中却很常见。您可以查看有关该主题的文献，并考虑根据您的案例调整其中一种方法。

至于您的算法，最简单的做法是枚举它产生的可能分段并使用[语言模型](http://en.wikipedia.org/wiki/Language_model)选择一个。我认为对于简单的句子来说，二元模型可能就足够了。

后缀树可以让您更有效地找到可能的分割，但无助于识别最可能的分割，除非您使用[基于后缀树的语言模型](http://www.lrec-conf.org/proceedings/lrec2012/pdf/649_Paper.pdf)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T19:46:47.543

您是否尝试过为 构建一个 trie `String`？[在这里](http://en.wikipedia.org/wiki/Trie)阅读它们。除了有多种选择可供选择的情况外，它将起作用。示例：`aneat`可以是`a neat`或`an eat`。

# mysql - MySQL：使用 RANGE 查询的 ORDER BY，性能不佳

> ID：12166252
> 
> 赞同：0
> 
> 时间：2012-08-28T19:32:11.517
> 
> 标签：mysql, performance, sql-order-by, where-in

我正在处理一个查询，该查询应从包含超过*400,000 条记录的**MyIsam*表中选择定义的用户列表发送的最后 20 个帖子。唯一的问题是查询运行大约**0.6**秒，有时超过 2 秒。

 ***```
SELECT post_id
FROM posts
WHERE post_author IN (32, 85, 222, 81, 250,  [..cut..] , 5908, 4930, 6658, 6757, 6398, 6324, 6629)
ORDER BY post_id DESC
LIMIT 20 
```

如果我删除*ORDER BY*查询要快得多，并且它在“post_author”列上使用正确的索引，而是执行全表扫描......进行这样的查询的最佳方法是什么？

* * *

## 使用 author_index 测试 #1

*   **主要**（post_id）
*   **author_index** (post_author)

时间：**0.7s** ![与许多作者解释](../Images/966d75d9c6cd55970abbf21aefc2ef13.png)

```
SELECT post_id
FROM posts
WHERE post_author IN (32, 85, 222, 81, 250,  [..cut..] , 5908, 4930, 6658, 6757, 6398, 6324, 6629)
ORDER BY post_id DESC
LIMIT 20 
```

时间：**0.004s** ![与少数作者解释](../Images/26b17cc5cdea667f9d36c53e34d53ee0.png)

```
SELECT post_id
FROM posts
WHERE post_author IN (58,68)
ORDER BY post_id DESC
LIMIT 20 
```

* * *

## 使用复合索引测试 #2

*   **主要**（post_id）
*   **view_posts_index** (post_id, post_author)

时间：**0.05s** ![与许多作者解释](../Images/04e1077579aca69336f25c4fe325eabe.png)

```
SELECT post_id
FROM posts
WHERE post_author IN (32, 85, 222, 81, 250,  [..cut..] , 5908, 4930, 6658, 6757, 6398, 6324, 6629)
ORDER BY post_id DESC
LIMIT 20 
```

时间：**1.5s** ![与少数作者解释](../Images/9482243b11d6069e6a57b0a441490e78.png)

```
SELECT post_id
FROM posts
WHERE post_author IN (58,68)
ORDER BY post_id DESC
LIMIT 20 
```

* * *

## 使用复合索引和 author_index 测试 #3

*   **主要**（post_id）
*   **view_posts_index** (post_id, post_author)
*   **author_index** (post_author)

时间：**0.7s** ![与许多作者解释](../Images/f9f15d8e2d4c1406701cfc61445e653a.png)

```
SELECT post_id
FROM posts
WHERE post_author IN (32, 85, 222, 81, 250,  [..cut..] , 5908, 4930, 6658, 6757, 6398, 6324, 6629)
ORDER BY post_id DESC
LIMIT 20 
```

时间：**0.0037s** ![与少数作者解释](../Images/7c0f4b4d73b891480529a97d9f915a27.png)

```
SELECT post_id
FROM posts
WHERE post_author IN (58,68)
ORDER BY post_id DESC
LIMIT 20 
```

* * *

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T20:13:04.477

在 post_author 和 post_id 列上创建索引：

```
CREATE INDEX ix_post_search ON posts(post_author, post_id); 
```

这将允许 MySQL 通过仅​​查看此索引来满足整个查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T19:36:51.560

Make sure your query uses an index on the `post_id` (and probably on `post_author`, but that's not part of your question), otherwise in your case a whole range scan will be started and stopped as soon as the required amount of rows are generated.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T19:45:20.260

我想我会尝试这样做，确保在列作者上有一个索引，并且在唯一 ID 上自然也有一个索引:)

```
SELECT p2.post_id FROM posts p2
WHERE p2.post_id IN (
  SELECT p1.post_id
  FROM posts p1
  WHERE p1.post_author IN (32, 85, 222, 81, 250,  [..cut..] , 5908, 4930, 6658, 6757, 6398, 6324, 6629)
 )
ORDER BY p2.post_id
LIMIT 20 
```

让我知道它是否能解决您的问题***

# java - For 循环未激活

> ID：12166257
> 
> 赞同：-1
> 
> 时间：2012-08-28T19:32:31.630
> 
> 标签：java, for-loop, indexing

所以我试图得到一个读取文件的程序，文件的长度作为第一行。然后在文件中找到最小值和最大值的索引。烦人的是，由于某种原因，我的 findMin 和 findMax 方法不起作用。似乎他们绕过了 for 循环。我确定我只是犯了一个愚蠢的错误，但我似乎无法确定它。

```
import java.io.File;
import java.util.Scanner;

public class Driver00 {
    public static int minpos;
    public static int maxpos;
    public static double min;
    public static double max;
    public static int numitems;

    public static void main(String[] args) throws Exception {
        Scanner infile = new Scanner(new File("data.txt"));
        int numitems = infile.nextInt();
        double[] array = new double[numitems];
        for (int k = 0; k < numitems; k++) {
            array[k] = infile.nextDouble();
        }
        infile.close();
        int minPos, maxPos;
        minPos = findMin(array);
        maxPos = findMax(array);
        System.out.println("Minimum value: " + minPos);
        System.out.println("Maximum value: " + maxPos);
    }

    private static int findMin(double[] apple) {
        for (int x = 0; x < numitems; x++)
            // not activating
            if (x == 1) {
                if (apple[x] < apple[x - 1]) {
                    min = apple[x];
                    minpos = x;
                } else {
                    min = apple[x - 1];
                    minpos = x - 1;
                }
            } else {
                if (apple[x] < min) {
                    min = apple[x];
                    minpos = x;
                }
            }
        return minpos;
    }

    private static int findMax(double[] banana) {
        for (int x = 0; x < numitems; x++)
            // not activating
            if (x == 1) {
                if (banana[x] > banana[x - 1]) {
                    max = banana[x];
                    maxpos = x;
                } else {
                    max = banana[x - 1];
                    maxpos = x - 1;
                }
            } else {
                if (banana[x] > max) {
                    max = banana[x];
                    maxpos = x;
                }
            }
        return maxpos;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T19:33:24.493

`public static int numitems;`这就是`ZERO`为什么你的 for 循环没有被执行

**为什么 numitems 零？**

因为您在`int numitems = infile.nextInt();`语句中获得的整数将被分配给方法局部`numitems`变量而不是实例变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T19:34:48.017

这一行：

```
 int numitems = infile.nextInt(); 
```

声明一个新的*局部*变量，它隐藏静态字段并改为更改。因此，字段 numitems 从未分配任何内容并保持为 0。
将其更改为

```
 numitems = infile.nextInt(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T19:55:58.987

当您声明 int numitems = infile.nextInt(); 你正在写你的全局静态变量。

此外，由于其他原因，此代码可能无法正常工作。1：

```
for(int x = 0; x < numitems; x++)  //not activating
      if (x==1){
            if (apple[x] < apple[x-1]){
                min = apple[x];
                minpos = x;
                }
            else{
                min = apple[x-1];
                minpos = x-1;
                }
            }
         else{
            if (apple[x] < min){
                min = apple[x];
                minpos = x;
                }
            } 
```

这是一团糟，很可能会中断，因为 for 循环从 0 开始，而不是从 1 开始，并且 min 尚未实例化；更容易的是：

```
if(numitems<=0)
    return 0; //In case there isn't actually a value in your list.
minpos=0;
min=apple[0]
for(int x=1;x<numitems;x++)
{
    if (apple[x] < min)
    {
        min = apple[x];
        minpos = x;
    }

} 
```

对 maxpos 进行了相应的更改。

# c++ - 以 0 开头的 int 发生了什么？前 00101

> ID：12166261
> 
> 赞同：0
> 
> 时间：2012-08-28T19:32:55.340
> 
> 标签：c++

我想知道，当 int 以零开头时会发生什么？

```
int main() {
    int myint = 01001;
    cout << myint;
    return 0;
} 
```

为什么输出：

```
513 
```

我尝试了几种编译器。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-28T19:33:30.673

然后整数被视为八进制数。所以，

```
01001 
```

等于

```
1 * 8 ^ 0 + 0 * 8 ^ 1 + 0 * 8 ^ 2 + 1 * 8 ^ 3 = 1 + 0 + 0 + 512 = 513 
```

里面没有魔法。

# c# - Graphics.MeasureString 是否依赖于控件？

> ID：12166262
> 
> 赞同：1
> 
> 时间：2012-08-28T19:32:58.870
> 
> 标签：c#, winforms

在像下面这样的图片中，我得到了这段代码的“相同”数字，其中一个用于文本编辑器，另一个用于按钮。在图片中，我看到了我在表格单元格中的类型大于按钮的字体大小，但是为什么这两个代码返回相同的数字？

```
 Graphics graphics =  ctlTEEditor.CreateGraphics();
    int width = (int)graphics.MeasureString("FitsToooo", ctlTEEditor.Font).Width;
    MessageBox.Show(width.ToString());

    Graphics graphics2 = button1.CreateGraphics();
    int width2 = (int)graphics2.MeasureString("FitsToooo", button1.Font).Width;
    MessageBox.Show(width2.ToString()); 
```

![在此处输入图像描述](../Images/6e0eb339a6ccf15413419907a172c4fa.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T19:36:38.843

MeasureString is not aware of any word wrapping that the control may choose to implement.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T19:54:03.437

好的，问题是在我说“ctlTEEditor.Font”的代码中，这是**控件**本身的字体，而不是**表格单元格**内使用的字体。

# python - 如何使用 urllib3 Python 库使用 cookie 发出 http 请求？

> ID：12166266
> 
> 赞同：0
> 
> 时间：2012-08-28T19:33:11.110
> 
> 标签：python, http, cookies, httprequest, urllib3

> **可能重复：**
> [Python urllib3 以及如何处理 cookie 支持？](https://stackoverflow.com/questions/2422922/python-urllib3-and-how-to-handle-cookie-support)

我正在尝试从具有已发布 cookie 的网页中检索源代码并将源代码写入 txt 文件。如果我删除该`cookies=cookie`部分，我可以检索源代码，但我需要以某种方式将 cookie 与 http 请求一起发送。

```
output = open('Filler.txt', 'w+')
http = urllib3.PoolManager()
cookie =('users' , '1597413515')
r = http.request('http://google.com' , 'GET' , cookies=cookie)
output.write(r.data)
output.close() 
```

我得到一个 KeyError：无

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T12:01:34.393

在发送请求之前，您必须将 cookie 添加到标头中。你见过[Python urllib3 以及如何处理 cookie 支持吗？](https://stackoverflow.com/questions/2422922/python-urllib3-and-how-to-handle-cookie-support)

# pypy - PyPy 中的 GIL 在哪里？

> ID：12166268
> 
> 赞同：13
> 
> 时间：2012-08-28T19:33:16.653
> 
> 标签：pypy, gil, rpython

PyPy GIL 是 RPython 中 PyPy 解释器实现的一部分，还是 translate.py 自动添加的东西？即，如果我要在 RPython 中编写自己的新语言解释器并通过 translate.py 运行它，它会先验地受制于 GIL，还是取决于我的解释器代码？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-31T07:33:00.210

GIL 处理由模块/线程/gil.py 在您的 PyPy 结帐中插入。这是一个可选的翻译功能，仅在启用线程模块时添加。也就是说，RPython 本身不是线程安全的语言（例如 C），因此您需要注意正确锁定对象，以免它们出现不一致。主要问题是提供一个线程感知垃圾收集器，因为我们现在使用的垃圾收集器不是线程安全的，仅仅添加一个锁就会从自由线程模型中消除很多好处。

干杯，菲亚尔

# c++ - Doxygen 使用默认参数重复 c++ 函数

> ID：12166270
> 
> 赞同：5
> 
> 时间：2012-08-28T19:33:22.720
> 
> 标签：c++, doxygen

我正在使用 Doxygen 来记录我的一些代码。我有一个使用默认参数的函数，该参数在标题中指定，即：

```
unsigned int CountColumns(const std::string&,const std::string& delim=""); 
```

以及源文件中的相应实现为：

```
unsigned int CountColumns(const string& input,const string& delim)
{
   ...
} 
```

当我使用 Doxygen 生成文档时，CountColumns 有两个条目 - 一个包含默认值，一个不包含：

```
unsigned int    CountColumns (const string &input, const string &delim)
unsigned int    CountColumns (const std::string &, const std::string &delim="") 
```

如何避免这种情况？我不希望多个函数定义弄乱我的文档。

编辑：正如我在下面的回答中也提到的那样，问题似乎是由于头文件在参数中使用“std::string”，而源文件包含“使用 std::string”声明，然后在参数中使用“字符串”。如果我在源文件中更改函数定义以使用“std::string”，Doxygen 会识别它与标题中声明的函数相同。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-29T19:42:49.627

我建议在您的配置文件中设置`BUILTIN_STL_SUPPORT`为`YES`，以便 doxygen 知道 string 是在 std 命名空间中定义的类。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T20:25:00.557

问题似乎是由于头文件在参数中使用“std::string”，而源文件包含“using std::string”语句，然后在参数中使用“string”。如果我在源文件中更改函数定义以使用“std::string”，Doxygen 会识别它与标题中声明的函数相同。

虽然不理想，但它是一种可行且不太笨拙的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T19:43:10.480

那么如何从文档中排除额外的功能呢？

这是来自 doxygen[常见问题解答](http://www.doxygen.nl/manual/faq.html)，

“我怎样才能让 doxygen 忽略一些代码片段？

新的和最简单的方法是在应该被忽略的代码`\cond`段的开头添加一个带有命令的注释块和一个带有命令的注释块。`\endcond`这当然应该在同一个文件中。

但是你也可以为此使用 doxygen 的预处理器：如果你把

> ```
>  #ifndef DOXYGEN_SHOULD_SKIP_THIS
> 
>   /* code that must be skipped by Doxygen */
> 
>  #endif /* DOXYGEN_SHOULD_SKIP_THIS */
>  around the blocks that should be hidden and put:
> 
>    PREDEFINED = DOXYGEN_SHOULD_SKIP_THIS
>  in the config file then all blocks should be skipped by Doxygen as long as 
> ```
> 
> 预处理 = 是。"

# android - 不断向 TextView 添加数据会冻结我的应用

> ID：12166274
> 
> 赞同：0
> 
> 时间：2012-08-28T19:33:32.340
> 
> 标签：android, mobile, textview, buffer

我正在开发一个 android 应用程序，其中我有一个线程不断生成要附加到 a 中的数据`Textview`，我为此使用 an`Handler`但 1 或 2 秒后我的应用程序只是冻结。

代码类似于：

```
private class UpdateTextRunnable implements Runnable
{
    private String mBuffer = "";

    public void addLine( String line ) {
        mBuffer += line + "\n";
    }

    @Override
    public void run(){
        mTextView.setText( mBuffer );
    }
} 
```

并且在线程中，每 0.5/1 秒调用一次来自自定义接口的方法：

```
 public void onMyCustomEvent( String data )
    {
      // mUpdater is an instance of UpdateTextRunnable
      mUpdater.addLine( data );
      // mHandler is an instance of Handler inside the main activity
      mHandler.post( mUpdater );
    } 
```

我究竟做错了什么 ？：） 谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T19:45:28.583

尝试使用[StringBuilder](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/StringBuilder.html)而不是 String。

例子：

```
private class UpdateTextRunnable implements Runnable
{
    private StringBuilder mSB = "";

    public void addLine(String line) {
        mSB.append(line + "\n");
    }

    @Override
    public void run() {
        mTextView.setText(mSB.toString());
    }
} 
```

# asp.net - .net gridview 列显示实时计算

> ID：12166278
> 
> 赞同：0
> 
> 时间：2012-08-28T19:33:46.553
> 
> 标签：asp.net, .net, gridview

我有一个 gridview 从数据库中提取一些数据。其中一列显示汇率，例如 1.54。在 gridview 上方我有一个文本框，允许输入金额，例如 500。

我希望能够在网格视图中有一个列显示“500 是”，其中 500 从文本框中获取，然后网格中的行显示 500 * 1.54。

我的文本框是：

```
<asp:TextBox id="CustomerAmount" runat="server" value="500" Width="73px"></asp:TextBox> 
```

我希望将其乘以的 gridview 值是：

```
<asp:BoundField DataField="Rate" HeaderText="Rate" SortExpression="Rate" dataformatstring="{0:F4}">
<HeaderStyle BackColor="#1686D6" Font-Bold="True" ForeColor="White" HorizontalAlign="Left" />                  
<ItemStyle HorizontalAlign="Left" />                  
</asp:BoundField> 
```

任何想法，我都坚持这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T19:53:29.727

设置标题（假设 1 是列索引）：

```
protected void GridView1_DataBound(object sender, EventArgs e)
{
    GridView1.Columns[1].HeaderText = CustomerAmount.Text + " is";
} 
```

要设置单元格数据，请添加一个模板列：

```
<asp:TemplateField HeaderText="is">
    <ItemTemplate>
        <asp:Label Text="<%# int.Parse(CustomerAmount.Text) * (decimal)Eval("Rate") %>" runat="server" />
    </ItemTemplate>
</asp:TemplateField> 
```

确保文本框不为空（具有初始 int 值）。

# python - 处理多层应用程序中的通信

> ID：12166279
> 
> 赞同：4
> 
> 时间：2012-08-28T19:33:47.940
> 
> 标签：python, communication, observer-pattern

我正在使用 Python 创建一个应用程序。

我首先设计了一个 API，它运行良好。我现在正在设计我的 GUI。GUI 启动一个线程，用于针对 API 执行任务。

到目前为止，我使用观察者模式来处理通过不同层的通信。基本上，通信可以有两种类型（主要）： - GUI 要求线程（以及随后的 API）开始/停止 - API 将信息返回给线程，传播到 GUI。

这是我正在谈论的当前架构的简单架构。一个箭头基本上意味着“通知”。

![当前的 Observer/Observable 通信](../Images/6c07c710bcffe832b0891addb17e044c.png)

我担心的是，当应用程序线程通信时，Gui 和 API 都会收到消息，因为他们订阅了。问题是，每条消息只能由两者之一阅读。

我为解决这个问题所做的就是将消息与 ID 一起发送。这三个元素中的每一个都有一个 id，它们知道消息是给他们的还是现在的。但我不确定这是否是“正确的”（理解最好的）方法。如果我将来有更多的聚会怎么办？

我开始考虑某种管理器来处理通信，但它必须位于架构的顶部，我不知道如何进一步组织它：s。

我不是要求一个完整的解决方案，而是主要由更有经验的人提出想法或最佳实践；）

在这个简单的案例中，我可以继续处理多个观察者模式。但我正在考虑将我的代码移植到服务器上。在这种情况下，我可能有不止一个线程用于应用程序，处理 API 调用将变得非常不可能。

链接到我正在谈论的代码： [GUI](https://github.com/jlengrand/FaceMovie/blob/gui_v2/ivolution/gui_wx/IvolutionWindow.py)、[ApplicationThread](https://github.com/jlengrand/FaceMovie/blob/gui_v2/ivolution/FacemovieThread.py)和[Application API](https://github.com/jlengrand/FaceMovie/blob/gui_v2/ivolution/Facemovie_lib.py)。

您想查看通知和更新方法。

感谢您的任何建议！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T09:50:42.543

我遇到的观察者模式的一个很好的实现是 Qt 中的信号/槽系统。对象有信号，槽（实际上是方法）可以连接到信号。发出信号时调用连接的插槽。

在我看来，您的一些问题可能源于您在每个对象中都有单个通信通道这一事实。这迫使您在每个`update`方法中都有一些调度机制，并使代码相当复杂。

从 Qt 中汲取灵感，您可以为每种消息和收件人提供不同的信号。信号的代码如下所示：

```
class Signal:
    def __init__(self):
        self.subs = []

    def subscribe(self, s):
        self.subs.append(s)

    def signal(self, *args, **kwargs):
        for s in self.subs:
            s(*args, **kwargs) 
```

* * *

例如，gui 会有一个信号`stop_signal`，线程有一个方法来处理它：

```
def handle_gui_stop(self):
    self.console_logger.debug("Facemovie is going to stop")
    self.my_logger.debug("Facemovie is going to stop")
    self.stop_process = True
    # ... 
```

在初始化代码的某个地方，我们会将所有内容联系在一起：

```
gui.stop_signal.subscribe(thread.handle_gui_stop) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-04T19:49:59.170

我最近创建了一个具有类似架构的 GUI 应用程序（GUI 线程 + 一个单独的工作线程），我最终以两个队列的形式（来自 Queue Python 模块）在线程之间创建了一个显式协议。一个队列用于 GUI 发出的请求并由工作线程使用。另一个队列用于由工作线程产生并由 GUI 使用的答案。

当线程之间的通信是明确的时，我发现它更加清晰，您可以完全控制何时何地完成更新（只能从 GUI 线程调用 GUI 方法）。

该模型在服务器环境中的自然扩展是消息队列协议，如 AMQP。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-06T23:10:49.657

应用程序线程必须对通信更加明确，因为它是 GUI 和应用程序 API 之间的通信器。这可以通过分离来自 GUI 和来自应用程序 API 的工作集（队列）来实现。此外，应用程序线程必须能够处理交付类型的模式，其中包括命令发送者和接收者。这包括管理不同队列之间的通信（例如，GUI 队列有待处理的命令，该命令正在等待应用程序 API 队列中的命令。一旦完成，应用程序线程将结果在队列之间传回）。每个队列都是观察者本身。

在扩展应用程序方面，在我看来，您希望将来添加更多的 GUI，这将由上述请求/响应（或发送者/接收者）模式实现处理（这就足够了）。

如果您打算*垂直*而不是*水平*添加更多层，那么您不应该使用相同的应用程序线程在新层之间进行通信。嗯，物理上它可以是相同的，但实际上它至少必须不同。这可以通过再次完全实现我上面描述的内容（单独的队列）来实现。通过引入动态添加队列，您将打开添加新层的可能性（新层仅对应于新队列）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-06T12:34:38.597

Specially with GUIs, I recomend another pattern: [MVC](http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller). It includes the Observer patterns in it and is more robust than the Observer alone.

It solves your concern because it separates concerns: each layer has a very specific role and you can change any of them, as long as you don't change the interface between them.

# java - 使用蜡染的文本元素边界框的错误值

> ID：12166280
> 
> 赞同：5
> 
> 时间：2012-08-28T19:33:55.233
> 
> 标签：java, svg, batik

我正在尝试使用 getBBox() 在文本元素周围绘制一个矩形，代码非常简单，创建文档，添加文本元素，启动文档并添加矩形。问题是 getBBox 返回一些奇怪的值，我错过了什么吗？

```
DOMImplementation impl;
String svgNS;
SVGDocument doc;
Element svgRoot;

UserAgent userAgent;
DocumentLoader loader;
BridgeContext ctx;
GVTBuilder builder;
GraphicsNode rootGN;

...

// get a DOM and create a document
impl = SVGDOMImplementation.getDOMImplementation();
svgNS = SVGDOMImplementation.SVG_NAMESPACE_URI;
doc = (SVGDocument)impl.createDocument(svgNS, "svg", null);

// Get (the 'svg' element).
svgRoot = doc.getDocumentElement();

// Set the width and height attributes on the root 'svg' element.
svgRoot.setAttributeNS(svgNS, "width", "400");
svgRoot.setAttributeNS(svgNS, "height", "450");

// Add a text element
Element txtElem = doc.createElementNS(svgNS, "text");
txtElem.setAttributeNS(svgNS, "x", "30");
txtElem.setAttributeNS(svgNS, "y", "50");
txtElem.setAttributeNS(svgNS, "style", "font-family:Arial;font-size:20;stroke:#000000;#fill:#00ff00;");
txtElem.setTextContent("sometext");

svgRoot.appendChild(txtElem);

// boot the document
userAgent = new UserAgentAdapter();
loader = new DocumentLoader(userAgent);
ctx = new BridgeContext(userAgent, loader);
ctx.setDynamicState(BridgeContext.DYNAMIC);
builder = new GVTBuilder();
rootGN = builder.build(ctx, doc);

// add a bounding box to text elements
NodeList nodelist = doc.getElementsByTagName("text");
for (int i=0; i < nodelist.getLength(); i++) {
    SVGOMTextElement textElem = (SVGOMTextElement)nodelist.item(i);
    SVGRect bbox = textElem.getBBox();

    Element rectangle = doc.createElementNS(svgNS, "rect");
    rectangle.setAttributeNS(svgNS, "x", new Float(bbox.getX()).toString());
    rectangle.setAttributeNS(svgNS, "y", new Float(bbox.getY()).toString());
    rectangle.setAttributeNS(svgNS, "width", new Float(bbox.getWidth()).toString());
    rectangle.setAttributeNS(svgNS, "height", new Float(bbox.getHeight()).toString());
    rectangle.setAttributeNS(svgNS, "fill", "rgba(0,0,0,0)");
    rectangle.setAttributeNS(svgNS, "stroke", "#ff0000");
    rectangle.setAttributeNS(svgNS, "stroke-width", "1");

    svgRoot.appendChild(rectangle);
} 
```

这是我得到的 SVG 文档，你可以看到矩形有不同的 X 和 Y 值（宽度和高度也是错误的）。

```
<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" contentScriptType="text/ecmascript" zoomAndPan="magnify" width="400" contentStyleType="text/css" preserveAspectRatio="xMidYMid meet" height="450" version="1.0">
    <text x="30" style="font-family:Georgia;font-size:20;stroke:#000000;#fill:#00ff00;" y="50">sometext</text>
    <rect x="0.65234375" fill="rgba(0,0,0,0)" width="55.621094" stroke-width="1" stroke="#ff0000" height="8.597656" y="8.425781"/>
</svg> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T04:59:25.580

问题来自您必须使用`setAttribute`而不是`setAttributeNS`. 指定的`x`和`y`坐标被忽略，因为它们不是 Batik 在默认命名空间中期望的`x`和`y`属性，它们似乎被识别为其他未知属性。只需使用这个：

```
txtElem.setAttribute("x", "30");
txtElem.setAttribute("y", "50");
txtElem.setAttribute("style", "font-family:Arial;font-size:20;stroke:#000000;fill:#00ff00;"); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-05-06T15:19:31.740

尝试这个：

```
rectangle.setAttributeNS(null, 
```

`svgNS`并且只留下`createElementNS`.

# neo4j - Performance issues while creating Index on multiple fields in Spring data neo4j

> ID：12166283
> 
> 赞同：0
> 
> 时间：2012-08-28T19:34:03.470
> 
> 标签：neo4j, lucene, spring-data-neo4j

I have created index with multiple fields in below way,

```
Class node {

@Indexed(indexName="index")
String name;

@Indexed(indexName="index")
String location;

} 
```

I have a requirement where user can search based on name or location or both of them. What would be the performance issues in this case if i use only name or location in cypher query? As i might use only name or location while searching or both of them in cypher query.

Or Shall i create different indexes on these fields and use WHERE clause? Kindly let me know your opinion on this.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T19:50:09.213

发布回复，我从其他论坛的 Michael Hunger 那里得到。

认为可以将它们都放入一个索引中。你说的数据量是多少？Lucene 通常应该足够快地处理查找。

你可以搜索

template.query("name: foo AND location: bar") template.query("name: foo OR location: bar") 或其中任何一个

# shopify - Is there a way to load Shopify product images and other resources from an external server?

> ID：12166288
> 
> 赞同：2
> 
> 时间：2012-08-28T19:34:36.893
> 
> 标签：shopify

Shopify servers, especially cdn.shopify.com, are horribly slow at times. Is there a way to optimize a store for a more consistent performance, or to link *PRODUCT images* from an external server so we don't have to use Shopify's slow CDN?

Edited for clarification: I want to know is if it's possible to have product images on an external server to bypass the high latency, slow Shopify CDN servers.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T21:36:56.807

简短的回答是“不”。当您上传产品图片时，Shopify 会将其复制到他们的服务器和 CDN。没有选项可以让它引用您的位置。您始终可以通过提交支持票来请求功能请求。

您可以通过编辑主题的流动模板并链接到您的图像来绕过缓慢的 CDN，但是知道 Shopify 我希望他们能够解决当前的 CDN 性能问题。几周前的表现还不错。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T19:54:58.953

您当然可以自由地将您想要的任何资源链接到您想要的任何服务器。您可以像从您自己的 Linode 或 Rackspace 服务器一样轻松地从 S3 渲染所有商店图像。没有什么能阻止你。由于您引入从服务器请求结果的所有延迟，您只是冒着性能不佳的风险，并且在处理图像等资产时，您会失去主题的所有不错的 Liquid 技巧。

# android - How can I make a pop-up menu appear after a pin is added to google maps android?

> ID：12166291
> 
> 赞同：0
> 
> 时间：2012-08-28T19:34:45.947
> 
> 标签：android, google-maps, google-maps-markers

Here is my main activity class:

```
public class MyActivity extends MapActivity implements LocationListener, OnClickListener{

private MapView mapView;
private MyItemizedOverlay itemizedOverlay;
Button route;
Drawable drawableDot;
static GeoPoint src;
static GeoPoint des;

Canvas canvas;
Paint paint;
boolean shadow;

private LocationManager locManager;

@Override
public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    route = (Button) findViewById(R.id.cmd_submit);
    route.setOnClickListener(this);

    //fetch the map view from the layout
    mapView = (MapView) findViewById(R.id.myMapView);

    //make available zoom controls
    mapView.setBuiltInZoomControls(true);

    //latitude and longitude of Rome
    double lat = 41.889882;
    double lon = 12.479267;

    //create geo point
    GeoPoint point = new GeoPoint((int)(lat * 1E6), (int)(lon *1E6));

    //get the MapController object
    MapController controller = mapView.getController();

    //animate to the desired point
    controller.animateTo(point);

    //set the map zoom to 13
    // zoom 1 is top world view
    controller.setZoom(13);

    //invalidate the map in order to show changes
    mapView.invalidate();

    // Use the location manager through GPS
    locManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
    locManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0,
            0, this);

    //get the current location (last known location) from the location manager
    Location location = locManager
            .getLastKnownLocation(LocationManager.GPS_PROVIDER);

        //if location found display as a toast the current latitude and longitude
    if (location != null) {

        Toast.makeText(
                this,
                "Current location:\nLatitude: " + location.getLatitude()
                        + "\n" + "Longitude: " + location.getLongitude(),
                Toast.LENGTH_LONG).show();

        point = new GeoPoint((int)(location.getLatitude()*1E6),(int)(location.getLongitude() *1E6));

        controller.animateTo(point);

    } else {

        Toast.makeText(this, "Cannot fetch current location!",
                Toast.LENGTH_LONG).show();
    }

    //when the current location is found – stop listening for updates (preserves battery)
    locManager.removeUpdates(this);

    // fetch the drawable - the pin that will be displayed on the map
    Drawable drawable = this.getResources().getDrawable(R.drawable.marker);

    // create and add an OverlayItem to the MyItemizedOverlay list
    OverlayItem overlayItem = new OverlayItem(point, "", "");

    itemizedOverlay = new MyItemizedOverlay(drawable,this);

    itemizedOverlay.setGestureDetector(new GestureDetector(new MyGestureDetector()));

    itemizedOverlay.addOverlay(overlayItem);

    // add the overlays to the map
    mapView.getOverlays().add(itemizedOverlay);
    mapView.invalidate();

    //when the current location is found – stop listening for updates (preserves battery)
    locManager.removeUpdates(this);
}

@Override
protected boolean isRouteDisplayed() {
    return false;

}

class MyGestureDetector extends SimpleOnGestureListener implements OnClickListener{

ArrayList<GeoPoint> points =new ArrayList<GeoPoint>(); 

@Override
public boolean onSingleTapConfirmed(MotionEvent event) {

    // fetch the correspondent point from the map

    Log.d("A condition", "d5al l methodaaya");
    GeoPoint p = mapView.getProjection().fromPixels((int) event.getX(),(int) event.getY());
    points.add(p);

    // create an overlay item and clear all others
    OverlayItem o = new OverlayItem(p, null, null);
  //  itemizedOverlay.clear();
    itemizedOverlay.addOverlay(o);

    // add the overlay item
    //mapView.getOverlays().clear();
    mapView.getOverlays().add(itemizedOverlay);
    mapView.invalidate();

    Geocoder geoCoder = new Geocoder(getBaseContext(),
            Locale.getDefault());

    // get the address based on the coordinates
    try {
        List<Address> addresses = geoCoder.getFromLocation(p.getLatitudeE6() / 1E6, p.getLongitudeE6() / 1E6, 1);

        String addressString = "";
        if (addresses.size() > 0) {
            for (int i = 0; i < addresses.get(0)
                    .getMaxAddressLineIndex(); i++)
                addressString += addresses.get(0).getAddressLine(i)
                        + " - ";
        }

        Toast.makeText(getBaseContext(), addressString,
                Toast.LENGTH_SHORT).show();

      //Add action item
        ActionItem addAction = new ActionItem();     
        addAction.setTitle("Add");
        addAction.setIcon(getResources().getDrawable(R.drawable.marker));

        //Accept action item
        ActionItem accAction = new ActionItem(); 
        accAction.setTitle("Accept");
        accAction.setIcon(getResources().getDrawable(R.drawable.marker));

        //Upload action item
        ActionItem upAction = new ActionItem();        
        upAction.setTitle("Upload");
        upAction.setIcon(getResources().getDrawable(R.drawable.marker ));

        final QuickAction mQuickAction  = new QuickAction(getBaseContext());

        mQuickAction.addActionItem(addAction);
        mQuickAction.addActionItem(accAction);
        mQuickAction.addActionItem(upAction); 
```

Now here's the problem, if I try the below `OnClickListener` with route (which is a button) it works fine, but if I try it for the whole map it does absolutely nothing. (if there's another totally different way which implements a `setOnClickListener` for the pins that'd be great!)

```
//            mapView.setOnClickListener(new View.OnClickListener() {
//              @Override
//              public void onClick(View v) {
//                  mQuickAction.show(v);
//              }
//              });

        route.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                mQuickAction.show(v);
            }
            });

        //setup the action item click listener
        mQuickAction.setOnActionItemClickListener(new QuickAction.OnActionItemClickListener() {

                public void onItemClick(int pos) {
                if (pos == 0) { //Add item selected
                   Toast.makeText(MyActivity.this, "Add item selected", Toast.LENGTH_SHORT).show();
                } else if (pos == 1) { //Accept item selected
                   Toast.makeText(MyActivity.this, "Accept item selected", Toast.LENGTH_SHORT).show();
                } else if (pos == 2) { //Upload item selected
                   Toast.makeText(MyActivity.this, "Upload items selected", Toast.LENGTH_SHORT).show();
                }
            }

                @Override
                public void onItemClick(QuickAction source, int pos,
                        int actionId) {
                     if (pos == 0) { //Add item selected
                           Toast.makeText(MyActivity.this, "Add item selected",      Toast.LENGTH_SHORT).show();
                        } else if (pos == 1) { //Accept item selected
                           Toast.makeText(MyActivity.this, "Accept item selected", Toast.LENGTH_SHORT).show();
                        } else if (pos == 2) { //Upload item selected
                           Toast.makeText(MyActivity.this, "Upload items selected", Toast.LENGTH_SHORT).show();
                        }

                }
        });

    } catch (IOException e) {
        e.printStackTrace();
    }

    return true;
}

@Override
public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX,
        float velocityY) {
    return super.onFling(e1, e2, velocityX, velocityY);
}

@Override
public boolean onDown(MotionEvent e) {
    return false;
}

@Override
public void onClick(View arg0) {
    // TODO Auto-generated method stub

}
}

} 
```

Also, I tried what's suggested here but it didn't work. [Android set Listener for marker on google map](https://stackoverflow.com/questions/6870526/android-set-listener-for-marker-on-google-map) Any help would be greatly appreciated, thanks in advance!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T21:44:12.283

如果您希望在用户单击标记时打开弹出菜单，则首先删除以下代码：

```
itemizedOverlay.setGestureDetector(new GestureDetector(new MyGestureDetector())); 
```

我认为您不知道 ItemizedOverlay 中的 onTap() 方法，因此请使用它而不是使用 GestureDetector 因为我认为您不能将 GestureDetector 用于不是视图的 Android 类（我提供了下面的代码) 您将不得不在**MyItemizedOverlay 类中使**​​用以下代码：

```
@Override
public boolean onTap(int index)
{
 //Put the code for the creation of a pop-up menu, I'd suggest using a custom Dialog
 //box and putting options in it. However, you seem to be using ActionItems, I'm
 //not sure what they are.

} 
```

# git - 禁用 git 中的所有分页

> ID：12166295
> 
> 赞同：26
> 
> 时间：2012-08-28T19:35:14.120
> 
> 标签：git, emacs, terminal

我在 emacs 中完成所有终端工作，并且更喜欢使用更丰富的工具来移动输出而不是“less”。更糟糕的是，任何时候应用程序在 emacs 中页面时，都会非常烦人，因为它是一个哑终端。

虽然我可以将“git help rm”之类的东西换成“Mx man git-rm”，但我更愿意禁用 git 中所有内容的所有分页。这样我就不必寻找正确的咒语了。

```
 git config --global core.pager cat 
```

似乎没有奏效。

```
 git config --global man.viewer "man -P cat" 
```

导致问题，因为“man -P cat”不是有效的可执行文件。

我怎样才能让 git 转储它的输出？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-28T20:19:21.643

> 要禁用所有命令的分页，请将`core.pager`或 设置`GIT_PAGER`为`cat`。

(c) [http://www.kernel.org/pub/software/scm/git/docs/git-config.html](http://www.kernel.org/pub/software/scm/git/docs/git-config.html)

添加。你也问过`git help`。它实际上不是 git 的寻呼机，它是`$MANPAGER`. 所以也许对你来说，只需 make 就足够了`PAGER=cat`。

`PAGER=cat git help log`无需寻呼机即可工作。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-28T20:17:58.743

从阅读`git help`手册页看起来你应该能够

```
git config --global man.viewer catman
git config --global man.catman.cmd "man -P cat" 
```

`man.viewer`配置值是工具名称，而不是（部分）命令行。然后`man.catman.cmd`给出用于该`catman`工具的命令。

似乎设置`core.pager`应该`cat`照顾其他一切。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-28T19:53:31.550

你可以试试`alias git='git --no-pager'`。或者，如果由于某种原因在 emacs 内部无法正常工作，您可以`git`在之前的某个位置创建一个 shell 脚本，该脚本`PATH`调用真正的`git --no-pager`.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-05-12T15:55:15.373

添加到上面的 Geoff Reedy 的答案中。这也摆脱了手册页中的 _ 和 ^H ：

```
git config --global core.pager cat
git config --global man.viewer catman
git config --global man.catman.cmd 'man -P "col -b"' 
```

# scala - 移动包私有类——我应该认为二进制不兼容吗？

> ID：12166303
> 
> 赞同：8
> 
> 时间：2012-08-28T19:35:44.157
> 
> 标签：scala, binary-compatibility, package-private, migration-manager

由于`aux`Windows 下的包名称存在问题，我正在从库的包层次结构中移动一个帮助类

```
de.sciss.scalainterpreter.aux 
```

到

```
de.sciss.scalainterpreter 
```

该类是库私有的，即`private[scalainterpreter] object Helper`.

现在使用[Typesafe Migration-Manager](http://typesafe.com/technology/migration-manager)，显然它报告更改不兼容：

```
Found 2 binary incompatibiities
===============================
 * class de.sciss.scalainterpreter.aux.Helper does not have a correspondent
   in new version
 * object de.sciss.scalainterpreter.aux.Helper does not have a correspondent
   in new version 
```

但我怀疑如果客户端代码没有调用任何一个对象，接口仍然兼容，因此我可以使用小版本增加来表示更改，并允许这两个版本互换使用。

正确的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T15:30:40.423

您没有指定`Helper`在移动之前是否已经包私有。所以我会处理这两种情况：

*   如果它已经是私有包：

    我怀疑迁移管理器报告不兼容只是因为它必须保持保守：包是在 scala 中打开的（就像在 java 中一样），这意味着客户端代码很可能会定义一个类 package `scalainterpreter`。因此，通过移动`Helper`，您确实会打破该课程。

    但是，让我们务实一点：`de.sciss.scalainterpreter.aux`是*您的*包（它们的子包也应该是），没有人应该在那里定义自己的类。有了这个额外的先决条件，移动`Helper`确实是对客户端**scala**代码的二进制兼容更改。

    至于客户端**java**代码，它有点不同，因为即使`Helper`是包私有的，它的可见性仍然`public`对JVM而言，因此java编译器会很乐意让客户端代码访问`Helper`（因此客户端java代码很可能已经访问`Helper`，尽管它被声明为包私有）。

*   如果在移动之前它不是私有包：

    好吧，运气不好。客户端代码很可能已经访问`Helper`了，而此举肯定会破坏这一点。作为旁注，您可以使用一个小技巧来使更改源兼容，但可惜**不是**二进制兼容的。只需添加以下文件：

    ```
    package de.sciss

    package object scalainterpreter {
      object aux {
        val Helper = _root_.de.sciss.scalainterpreter.Helper
      }
    } 
    ```

有了上面，你仍然可以访问`Helper`as `de.sciss.scalainterpreter.aux.Helper`，并且它仍然在 windows 下编译（不像定义一个 package `aux`，它因为作为文件名的保留含义而无法编译）。但同样，这不是二进制兼容的，只有源兼容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T16:52:33.317

很容易看出内联如何破坏客户端代码，因为内联代码本质上会渗入客户端界面。这个例子确实要求链接错误；我们可以试验并做类似 javap | 的事情。grep Helper，但在某种程度上你必须让 scalac 完成它的工作。

```
package lib {

  object Lib {
    //import util.Helper
    @inline def result = Helper.help
  }

  //package util {

  private [lib] object Helper {
    @inline def help = "Does this help?"
  }
//}
} 
```

样品无辜旁观的客户：

```
package client

object Test {
  import lib.Lib
  def main(args: Array[String]) {
    println(Lib.result)
  }
} 
```

更改包私有类的包：

```
$ scala -cp "classes;target" client.Test
Does this help?

apm@halyard ~/tmp/taking-it-private
$ vi lib.scala

apm@halyard ~/tmp/taking-it-private
$ rm -rf classes/*

apm@halyard ~/tmp/taking-it-private
$ smalac -d classes -optimise lib.scala 

apm@halyard ~/tmp/taking-it-private
$ smala -cp "classes;target" client.Test
java.lang.ClassNotFoundException: lib.util.Helper$ 
```

Javap 说明了原因。[即，调用是内联的，但它仍想初始化模块。]

我没有关注这些讨论，但例如有链接： [https](https://github.com/scala/scala/pull/1133) ://github.com/scala/scala/pull/1133 和其他关于 ML 的讨论，关于对二进制兼容性的期望是有效的。 [https://groups.google.com/forum/?fromgroups=#!topic/scala-internals/sJ-xnWL_8PE](https://groups.google.com/forum/?fromgroups=#!topic/scala-internals/sJ-xnWL_8PE)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T15:06:09.357

简而言之，没有理由不这样做。链接发生在签名周围；由于所讨论的对象仅限于编译单元，客户端不能（或者更确切地说，不应该）使用它，因此二进制兼容性不是问题。

# shell - How to strace adb shell am start myandroidapp

> ID：12166308
> 
> 赞同：3
> 
> 时间：2012-08-28T19:36:13.600
> 
> 标签：shell, adb, strace

I need to lean on you for some help on stracing android apps in the sdk emulator

here is my setup

android sdk emulator running android api 4.03 adb shell connected to emulator.

I am able to install an apk usng adb install filename.apk

I am able to run the app using adb shell am start -a android.intent.action.Main -n com.akproduction.notepad/com.akproduction.notepad.NoteList

I try to strace using (adb shell) strace am start -a android.intent.action.Main -n com.akproduction.notepad/com.akproduction.notepad.NoteList but I get nothing!

how do you trace the runtime behavior of android apps and their installation ?

thanks,

Jose.

p.s. the test app is located here: [http://www.appbrain.com/app/ak-notepad/com.akproduction.notepad](http://www.appbrain.com/app/ak-notepad/com.akproduction.notepad)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T10:47:59.277

`am`是一个批处理文件，不能用于`strace`.

你需要像这样运行它：

```
strace -v -fF -tt -s 65535 -o /data/local/tmp/opengl.strace /system/bin/app_process /system/bin com.android.commands.am.Am start -a android.intent.action.MAIN -n demo.opengl.android/.OpenGLDemo 
```

顺便说一句，不要使用`strace`可从以下位置下载的静态编译二进制文件：

[http://benno.id.au/blog/2007/11/18/android-runtime-strace](http://benno.id.au/blog/2007/11/18/android-runtime-strace)

它不会输出任何东西。

而是使用 ROM 附带的那个。

# jquery-ui - 带有自定义列的 jqgrid

> ID：12166311
> 
> 赞同：0
> 
> 时间：2012-08-28T19:36:24.907
> 
> 标签：jquery-ui, jqgrid, jqgrid-formatter

我在我的应用程序中使用 Jqgrid。我想创建一个带有 2 个按钮的列。我想在列中，因为按钮可能会根据行的数据而有所不同。我用谷歌搜索它，我只能找到使用自定义格式化程序选项创建一个按钮，但它只出现在双击一行或编辑一行时，但我希望它显示在列本身上。任何包含信息的帮助或链接将不胜感激。下面是我的网格代码。需要创建另一个带有按钮的列。

**编辑：**

```
var grid = $(gridId);
grid.jqGrid({
    data: gridData,
    datatype: "local",
    gridview: true,
    colModel: [
        {
            label: 'Employee Name', name: 'employeeName', width: 195, editable:true,
            sortable:true, editrules:{required:true}
        },
        {
            label: 'Address', name: 'address', width: 170, editable:true,
            sortable:true,
            editrules:{required:true}
        },
        {
            label: 'Department', name: 'department', width: 120, editable:true,
            sortable:true,
            edittype:'custom',
            editoptions: {
                'custom_element' : populateReturnTypeAutocomplete,
                'custom_value' : autocomplete_value
                },
            editrules:{required:true}
        },
  }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T05:39:27.470

好的，将此添加到您的 colModal

```
{label: 'My Custom Column', name: 'custom', index:'custom' width: 120} 
```

现在在 gridComplete 或 loadComplete 添加此代码

```
var grid =  $("#grid"),
         iCol = getColumnIndexByName(grid,'custom'); // 'custom' - name of the actions column
         grid.children("tbody")
                .children("tr.jqgrow")
                .children("td:nth-child("+(iCol+1)+")")
                .each(function() {
                 $("<div>",
                        {
                            title: "button1",
                            mouseover: function() {
                                $(this).addClass('ui-state-hover');
                            },
                            mouseout: function() {
                                $(this).removeClass('ui-state-hover');
                            },
                            click: 
                            handle your click function here
                            }
                      ).css({"margin-left": "5px", float:"left"})
                       .addClass("ui-pg-div ui-inline-save")
                       .attr('id',"customId")
                       .append('<span class="ui-button-icon-primary ui-icon ui-icon-disk"></span>')
                       .appendTo($(this).children("div"));

$("<div>",
                            {
                                title: "custombutton 2",
                                mouseover: function() {
                                    $(this).addClass('ui-state-hover');
                                },
                                mouseout: function() {
                                    $(this).removeClass('ui-state-hover');
                                },
                                click: 
                                handle click here
                                }
                          ).css({"margin-left": "5px", float:"left"})
                           .addClass("ui-pg-div ui-inline-custom")
                           .attr('id',"customButton2")
                           .append('<span class="ui-button-icon-primary ui-icon ui-icon-circle-check"></span>')
                           .appendTo($(this).children("div")); 
```

现在，我在此处添加的这些图标将在 jquery ui.css 中可用，并且您必须在脚本中再添加一个函数，该函数将在上述代码的第一行中为 u 获取“自定义”列索引。

```
var getColumnIndexByName = function(grid,columnName) {
                var cm = grid.jqGrid('getGridParam','colModel'), i=0,l=cm.length;
                for (; i<l; i+=1) {
                    if (cm[i].name===columnName) {
                        return i; // return the index
                    }
                }
                return -1;
            }; 
```

我希望这有帮助。

# gruntjs - override grunt jshint config at the file level

> ID：12166315
> 
> 赞同：3
> 
> 时间：2012-08-28T19:36:41.700
> 
> 标签：gruntjs

Can the jshint grunt config be overridden at the file level? For instance, there is a file in which I would like bitwise operators to be allowed. I thought adding the comment below to the top of the file would cause it to pass, but it still failed.

/* jshint bitwise:false */

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T21:57:58.657

jshint 之前不应该有空格。

```
/*jshint bitwise:false */ 
```

# scala - 在 Scala 中计算 List[List[T]] 中每个元素的出现次数

> ID：12166317
> 
> 赞同：9
> 
> 时间：2012-08-28T19:36:50.790
> 
> 标签：scala, scala-collections

假设你有

```
val docs = List(List("one", "two"), List("two", "three")) 
```

其中，例如 List("one", "two") 表示包含术语“one”和“two”的文档，并且您希望构建一个包含每个术语的文档频率的地图，即在这种情况下

```
Map("one" -> 1, "two" -> 2, "three" -> 1) 
```

你会如何在 Scala 中做到这一点？（并且以一种有效的方式，假设一个更大的数据集。）

我的第一个类似 Java 的想法是使用可变映射：

```
val freqs = mutable.Map.empty[String,Int]
for (doc <- docs)
  for (term <- doc)
    freqs(term) = freqs.getOrElse(term, 0) + 1 
```

这工作得很好，但我想知道你如何以更“实用”的方式做到这一点，而不诉诸可变地图？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-28T19:37:59.603

试试这个：

```
scala> docs.flatten.groupBy(identity).mapValues(_.size)
res0: Map[String,Int] = Map(one -> 1, two -> 2, three -> 1) 
```

如果您要多次访问计数，那么您应该避免，`mapValues`因为它是“懒惰的”，因此会在每次访问时重新计算大小。此版本为您提供相同的结果，但不需要重新计算：

```
docs.flatten.groupBy(identity).map(x => (x._1, x._2.size)) 
```

该`identity`功能仅表示`x => x`.

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-08-28T21:19:24.737

```
docs.flatten.foldLeft(new Map.WithDefault(Map[String,Int](),Function.const(0))){
  (m,x) => m + (x -> (1 + m(x)))} 
```

什么火车残骸！

[编辑]

啊，这样更好！

```
docs.flatten.foldLeft(Map[String,Int]() withDefaultValue 0){
  (m,x) => m + (x -> (1 + m(x)))} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-03-10T21:25:23.920

开始`Scala 2.13`，在`flatten`ing 列表列表之后，我们可以使用which 是/[`groupMapReduce`](https://www.scala-lang.org/api/2.13.x/scala/collection/immutable/List.html#groupMapReduce[K,B](key:A=%3EK)(f:A=%3EB)(reduce:(B,B)=%3EB):scala.collection.immutable.Map[K,B])的一次性替代方案：`groupBy``mapValues`

```
// val docs = List(List("one", "two"), List("two", "three"))
docs.flatten.groupMapReduce(identity)(_ => 1)(_ + _)
// Map[String,Int] = Map("one" -> 1, "three" -> 1, "two" -> 2) 
```

这：

*   `flatten`s 的`List`s`List`作为`List`

*   `group`s 列表元素 ( )（**组**MapReduce`identity`的组部分）

***   `map`s 每个分组值出现为 1 ( `_ => 1`)（映射组**Map** Reduce 的一部分）

    *   `reduce`s 值在一组值 ( `_ + _`) 中，通过对它们求和（减少 groupMap **Reduce**的一部分）。**

# c# - 进度条不报告进度

> ID：12166322
> 
> 赞同：1
> 
> 时间：2012-08-28T19:37:18.940
> 
> 标签：c#, winforms, multithreading, progress-bar

我可能盯着同一个代码太久了，但我似乎无法让进度条在下面的代码中工作。有人有任何提示吗？

```
private void doBackgroundTIFConverter(object sender, DoWorkEventArgs e)
{
    string tifFileName = (string)e.Argument;
    bm = new Bitmap(tifFileName);
    int total = bm.GetFrameCount(FrameDimension.Page);
    document.Open();
    cb = writer.DirectContent;
    for (int k = 0; k < total; ++k)
    {
        backgroundTIFConverter.ReportProgress(k / total * 100);
        bm.SelectActiveFrame(FrameDimension.Page, k);
        iTextSharp.text.Image img = iTextSharp.text.Image.GetInstance(bm, ImageFormat.Bmp);
        // scale the image to fit in the page
        img.ScalePercent(72f / img.DpiX * 100);
        img.SetAbsolutePosition(0, 0);
        cb.AddImage(img);
        document.NewPage();
    }
    bm.Dispose();
    document.Close();
}

private void progressBackgroundTIFConverter(object sender, ProgressChangedEventArgs e)
{
    splitProgressBar.Value = e.ProgressPercentage;
}

private void completedBackgroundTIFConverter(object sender, RunWorkerCompletedEventArgs e)
{
    splitButton.Enabled = true;
}

private void completedBackgroundTIFConverter(object sender, RunWorkerCompletedEventArgs e)
{
    splitButton.Enabled = true;
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-28T19:42:15.183

```
backgroundTIFConverter.ReportProgress(k / total * 100); 
```

这是一个非常常见的 C# 陷阱，你会在这里得到整数除法。k / total 将始终为零。将表达式重新排序为：

```
backgroundTIFConverter.ReportProgress(k * 100 / total); 
```

如果要达到 100%，则从总数中减去 1：k * 100 / (total-1)

# objective-c - ios ARC strong and alloc

> ID：12166323
> 
> 赞同：-2
> 
> 时间：2012-08-28T19:37:21.470
> 
> 标签：objective-c, ios, automatic-ref-counting

I have a question related to ARC. In my interface I have declared a `uiwebview` as a `strong` property. Inside my code I have lazy loading like so:

```
- (UIWebView *)aWebView{
    if(aWebView == nil){
        aWebView = [[UIWebView alloc] initWithFrame:self.bounds];
    }
    return aWebView;
} 
```

Is that code ok under ARC?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T19:42:05.670

是的，没关系。ARC 将为您提供发布电话。

# jquery - Images fades into each other in slider

> ID：12166327
> 
> 赞同：0
> 
> 时间：2012-08-28T19:37:37.657
> 
> 标签：jquery

I'm working on a jQuery slider. Currently, the images are fading out, and then the next image in the slider fades in. But what I would need, is the images the be fading into each other. So I won't see the page background during the transition.

Here's my jQuery code :

```
$('.slider .slide:first').addClass('active').fadeIn(900);

function rotate(index) {
     $('.slider .slide.active').removeClass('active').fadeOut(900, function() {
         $('.slider .slide:eq(' + index + ')').addClass('active').fadeIn(900);
     });   
}

$('.slider-nav li').click(function() {
    clearInterval(timer);
    $(this).siblings('.active').removeClass('active');
    $(this).addClass('active');
    var index = $(this).index('li');
    rotate(index);
    timer=setInterval(go, 5000);
    return false;
});
$('.slider-nav li:first').click();
var timer=setInterval(go, 5000);
function go() {
    var $next = $('.slider-nav li.active').next();
    if ($next.length == 0){
        $next = $('.slider-nav li:first');
    }
    $next.click();
} 
```

Any idea? Thank you!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T19:39:54.313

您将需要自己的淡入淡出-据我所知，您需要同时淡入淡出两者，这可能与 jQuery 一起工作有点笨拙，但是，如果您只编写一个简单的函数会更容易同时淡入它们（即在数百次迭代中一个接一个地降低不透明度）。

# c++ - 如果前一个字符相同，则跳过数组中的一个字符

> ID：12166328
> 
> 赞同：1
> 
> 时间：2012-08-28T19:37:45.007
> 
> 标签：c++, switch-statement, cstring

我正在遍历一个数组`chars`来做一些操作。如果有两个相同的相邻字符，我想“跳过”一次迭代。

例如 x112abbca
跳过----------^

我有一些代码，但它并不优雅，想知道是否有人能想到更好的方法？我在声明中有几个`case`'，`switch`如果我不必`if`在`switch`.

```
switch(ent->d_name[i])
{
            if(i > 0 && ent->d_name[i] == ent->d_name[i-1])
                continue;
            case ' ' :
            ...//code omited
            case '-' :
            ...
} 
```

顺便说一句，一位讲师曾经告诉我“避免使用`continue`s，除非需要大量代码来替换它们”。有人支持吗？（其实他对`break`s也是这么说的）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T19:38:53.863

把`if`外面的`switch`。

虽然我没有反对使用`continue`and `break`，但这次你当然可以绕过它们而无需*太多*代码：只需恢复条件并将整个 switch 语句放在 if 块中。

回答已纠正的问题：什么是干净的取决于许多因素。这个字符列表需要考虑多长时间：您应该自己迭代它们，还是使用来自 的实用函数`<algorithm>`？无论如何，如果你多次引用同一个字符，也许你应该给它一个别名：

```
std::string interesting_chars("-_;,.abc");

// ...
for (i...) {
  char cur = abc->def[i];
  if (cur != prev || interesting_chars.find(cur) == std::string::npos)
      switch (current) // ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T19:59:54.433

```
char chr = '\0';
char *cur = &ent->d_name[0];
while (*cur != '\0') {
    if (chr != *cur) {
        switch(...) {
        }
    }
    chr = *cur++;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T20:03:25.750

如果您可以破坏您正在分析的数组的内容，您可以使用以下方法对其进行预处理`std::unique()`：

```
ent->erase(std::unique(ent->d_name.begin(), ent->d_name.end()), ent.end()); 
```

这应该用一个副本替换所有相同字符的序列，并适当地缩短字符串。如果你不能破坏字符串本身，你可以创建一个只有一个字符串的字符序列的副本：

```
std::string tmp;
std::unique_copy(ent->d_name.begin(), ent->d_name.end(), std::back_inserter(tmp)); 
```

如果您使用的是 C 字符串：请`std::string`改用。如果您坚持使用 C 字符串并且不想使用`std::unique()`比您更好的方法，请使用`previous`初始化为的字符`0`（毕竟这不能是 C 字符串的一部分）：

```
char previous(0);
for (size_t i(0); ent->d_name[i]; ++i) {
    if (ent->d_name[i] != previous) {
        switch (previous = ent->d_name[i]) {
             ...
        }
     }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-28T23:58:25.163

我希望我理解你想要做什么，无论如何这会找到匹配的对并跳过匹配。

```
char c_anotherValue[] = "Hello World!";

int i_len = strlen(c_anotherValue);
for(int i = 0; i < i_len-1;i++)
{
    if(c_anotherValue[i] == c_anotherValue[i+1])
    {
        printf("%c%c",c_anotherValue[i],c_anotherValue[i+1]);
        i++;//this will force the loop to skip
    }
} 
```

# objective-c - 在另一个方法中使用在 viewDidLoad 中创建的 NSString 变量

> ID：12166335
> 
> 赞同：0
> 
> 时间：2012-08-28T19:38:31.480
> 
> 标签：objective-c, ios, variables, nsstring, instance-variables

在我的`viewDidLoad`方法中，我设置了以下变量：

```
// Get requested URL and set to variable currentURL
NSString *currentURL = self.URL.absoluteString;
//NSString *currentURL = mainWebView.request.URL.absoluteString;
NSLog(@"Current url:%@", currentURL);

//Get PDF file name
NSArray *urlArray = [currentURL componentsSeparatedByString:@"/"];
NSString *fullDocumentName = [urlArray lastObject];
NSLog(@"Full doc name:%@", fullDocumentName);

//Get PDF file name without ".pdf"
NSArray *docName = [fullDocumentName componentsSeparatedByString:@"."];
NSString *pdfName = [docName objectAtIndex:0]; 
```

我希望能够在另一种方法中使用这些变量（即`- (void)actionSheet:(UIActionSheet *)actionSheet clickedButtonAtIndex:(NSInteger)buttonIndex {`）

如何在 viewDidLoad 方法之外重用这些变量？我是新手...非常感谢您的帮助

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-28T19:40:45.763

使它们成为*实例变量*，而不是您正在使用的方法的局部变量。之后，您可以从同一类的所有方法访问它们。

例子：

```
@interface MyClass: NSObject {
    NSString *currentURL;
    // etc.
}

- (void)viewDidLoad
{
    currentURL = self.URL.absoluteString;
    // etc. same from other methods
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T19:41:12.753

就定义 viewDidLoad 的类中的“全局变量”（如您标记的那样）而言，将它们创建为实例变量。

在你班级的 .h 中

```
@interface MyViewController : UIViewController 
{
    NSArray *docName;
    NSString *pdfName;
    ...
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T19:44:23.483

在您的`@interface`（在`.h`文件中）包括以下内容：

```
@property (nonatomic, strong) NSString *currentURL;
// the same for the rest of your variables. 
```

现在您可以通过调用来访问这些属性`self.currentURL`。如果这是一个较新的项目并且 ARC 已打开，则您不必费心自己管理内存。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-28T19:44:55.407

正如 H2CO3 所建议的那样，使它们成为实例变量。您也可以在 actionSheet:clickedButtonAtIndex 函数本身中派生所有变量。

我注意到所有必需的变量都是从 self.URL.absoluteString 派生的。因此，移动您的所有代码应该没有问题，因为 self.URL 是您的实例变量，它包含您想要的内容。

```
- (void)actionSheet:(UIActionSheet *)actionSheet clickedButtonAtIndex:(NSInteger)buttonIndex {
// Get requested URL and set to variable currentURL
NSString *currentURL = self.URL.absoluteString;
//NSString *currentURL = mainWebView.request.URL.absoluteString;
NSLog(@"Current url:%@", currentURL);

//Get PDF file name
NSArray *urlArray = [currentURL componentsSeparatedByString:@"/"];
NSString *fullDocumentName = [urlArray lastObject];
NSLog(@"Full doc name:%@", fullDocumentName);

//Get PDF file name without ".pdf"
NSArray *docName = [fullDocumentName componentsSeparatedByString:@"."];
NSString *pdfName = [docName objectAtIndex:0];

// Do what you need now...
} 
```

# string - 字符串'eq'Perl中的未初始化值

> ID：12166336
> 
> 赞同：8
> 
> 时间：2012-08-28T19:38:32.837
> 
> 标签：string, perl, warnings, initialization

我收到一条运行我的 Perl 脚本之一的警告。错误是在一个简单的`if`语句中引发的，我正在测试数组中的字符串是否等于另一个字符串。

我和我的同事尝试了几种情况，但仍然无法解决警告。到目前为止，我已经尝试将我所有的研究都放在这个线程中，所以它有点长，但请坚持下去。我完全被困住了，希望 Stack Overflow 的一位伟人能帮助我！

产生问题的代码是：

```
if ($pieces[0] eq "PromotionNumber") 
```

该部分周围的代码块是：

```
my @pieces = split(/=/, $var);
if($pieces[0] eq "PromotionNumber") {
     $promoNumber = $pieces[1];
} elsif ($pieces[0] eq "Type") {
# More similar code follows 
```

我在上面代码中的目标是将我在文本文件中找到的所有变量分配给相应的 Perl 变量。然后我将这些找到的变量插入到 SQL 数据库中。

文本文件有几个可以按不同顺序排列的字段，这就是为什么我使用 switch 样式 if-elsif... 来完成赋值。还有一些我不关心的字段，比如Level，我直接忽略了这些字段。然而，这些字段是导致警告的字段。

`$var`设置为以下，因为它循环...

```
PromotionNumber=000
RecordOffset=0
Code=0
SubCode=1
Level=0 
```

当我点击“Level=0”时，我可以在 PerlIDE.exe 调试器中暂停并看到字符串被拆分为 Level 和 0 并插入到数组中。但是，只要代码前进到`if`语句和测试，`$pieces[0] eq "PromotionNumber"`我就会收到警告。

我什至可以在声明之前打印出 $pieces[0] `if`，它会打印“Level”。

如果我将代码更改为以下内容，警告就会消失......

```
my @pieces = split(/=/, $var);
if($pieces[0] eq "Level") {
    #My problematic variable test
}elsif($pieces[0] eq "PromotionNumber") {
     $promoNumber = $pieces[1];
} elsif ($pieces[0] eq "Type") {
#More similar code follows 
```

但是，如果我第二次测试“Level”字符串，警告就会回来。下面的代码确实有警告。

```
my @pieces = split(/=/, $var);
if($pieces[0] eq "PromotionNumber") {
    #My problematic variable test
}elsif($pieces[0] eq "Level") {
     $promoNumber = $pieces[1];
} elsif ($pieces[0] eq "Type") {
#More similar code follows 
```

为什么 Perl 关心我测试的顺序？请注意，我正在测试我的 if-elsif 语句中没有给出此警告的多个 elsif 的其他几个字符串。

有任何想法吗？我真的需要清除此警告，以免它在运行时淹没控制台。该脚本正在处理警告。

确切的错误是：

> 在 japdpmrijob.pl 第 250 行的字符串 eq 中使用未初始化的值。

确切的错误行（使用 PerlIDE.exe 中的 Perl 调试实用程序确定）是：

```
if ($pieces[0] eq "PromotionNumber") { 
```

我可以打印出 $pieces[0] 并查看价值。所以我知道它是用我的价值定义的。我还可以打印出 $pieces[1] 并查看我的预期值。如果我首先测试 $pieces[0] eq "Level"，警告就会消失，我可以访问这两个变量。

我还是一头雾水……

看起来错误实际上是被标记为变量的“eq”。有什么想法吗？

您会在下面找到大量代码。我包括了整个`for`循环和我正在使用的几个变量。请注意`else`if-elsif-else 序列末尾的语句，我添加了此语句以尝试停止警告，如第三个答案所述。`else`每次调用警告时，此语句都会打印我的预期值，因此我知道这些值存在。

```
for my $cond (@conditions) {
    if($debug==1){print $cond."\n";}

    # Required database variables
    my $isRecord = 0;
    my $promoNumber;
    my $type;
    my $process;
    my $testValue;
    my $recordOffset;
    my $code;
    my $subcode;
    my $itemType;
    my $itemValue;

    # Function test variables
    my $itemTypeVar;
    my $newQualifier = 1;

    # Database Configuration
    my $dbApps = new Win32::ODBC("myDatabase") || die "Error: " . Win32::ODBC::Error();
    my @condVars = split(/\|/, $cond);
    for my $var (@condVars) {
        if($debug==1){print $var."\n";}
        my @pieces = split(/=/, $var);
        if( defined($pieces[0]) ){
            print "piece 0 defined!\n";
        } else {
            print "pieces 0 not defined!\n";
        }
        if( defined($pieces[1]) ){
            print "piece 1 defined!\n";
        } else {
            print "piece 1 not defined!\n";
        }
        if($pieces[0] eq "PromotionNumber"){
            $promoNumber = $pieces[1];
        } elsif ($pieces[0] eq "Type"){
            $type = $pieces[1];
        } elsif ($pieces[0] eq "Process"){
            $process = $pieces[1];
        } elsif ($pieces[0] eq "TestValue"){
            $testValue = $pieces[1];
        } elsif ($pieces[0] eq "RecordOffset"){
            $recordOffset = $pieces[1];
            if ($recordOffset == 0) {
                $newQualifier = 1; }
        } elsif ($pieces[0] eq "Code"){
            $code = $pieces[1];
        } elsif ($pieces[0] eq "SubCode"){
            $subcode = $pieces[1];
        } elsif ($pieces[0] eq "ItemType"){
            $itemType = $pieces[1];
            if($itemType eq "0") {
                $itemTypeVar = "ItemCode";
            } elsif($itemType eq "1") {
                $itemTypeVar = "ItemCode";
            } elsif($itemType eq "2") {
                $itemTypeVar = "Department";
            } elsif($itemType eq "5") {
                $itemTypeVar = "MixMatchCode";
            } elsif($itemType eq "12") {
                $itemTypeVar = "GroupCode";
            }
        } elsif ($pieces[0] eq $itemTypeVar){
            $itemValue = $pieces[1];
        } else {
            print "$pieces[0] and $pieces[1] not used.\n";
        }
        print "$var\n";
    }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-28T20:24:54.843

我认为您正在错误的地方寻找错误。对于在语句或其他复杂代码块内触发的警告`if-elsif-else`，旧版本的 Perl 可能会将警告识别为发生在语句的第一行。

```
------ warn.pl ------
my $x = 0;
my $y;
if ($x == 1) {         # line 3
} elsif ($x == 2) {
} elsif ($x == 3) {
} elsif ($y == 4) {    # line 7
}

$ perl5.14.2 -w warn.pl
Use of uninitialized value $y in numeric eq (==) at warn.pl line 7.

$ perl5.8.6 -w warn.pl
Use of uninitialized value in numeric eq (==) at line 3. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T19:45:25.677

您可以在进行比较之前检查是否`$pieces[0]`已定义。大多数情况下，这将阻止警告：

```
my @pieces = split(/=/, $var);
my $label = defined($pieces[0]) ? $pieces[0] : ""; #if not defined init to ""
my $value = defined($pieces[1]) ? $pieces[1] : "";
if($label eq "PromotionNumber") {
     $promoNumber = $value;
} elsif ($label eq "Type") {
#More similar code follows 
```

# javascript - 基于多个分隔符计数项目？

> ID：12166337
> 
> 赞同：1
> 
> 时间：2012-08-28T19:38:40.297
> 
> 标签：javascript, jquery, regex, split

我需要计算用户输入的电子邮件地址的数量。这些地址可以由以下任何一种分隔：

*   逗号后面没有空格 -`a@example.com,c@example.com.com`
*   逗号后跟任意数量的空格（即有人可能有一个逗号后跟 3 个空格或只有 1 个）-`a@example.com, c@example.com.com`
*   只有空白 -`a@example.com c@example.com.com`
*   新队

什么是清理它并可靠地计算地址的好方法？

我假设常规的 'ole javascript 可以处理这个问题，但我使用 jQuery 是值得的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T19:40:36.047

最简单的方法是将所有逗号替换为空格，然后根据空格拆分字符串。不需要条件。

[这是](http://jsfiddle.net/EA2xu/2/)一个关于这个例子的小提琴。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T19:43:34.910

```
var emails = input.split(/[\s,]+/); 
```

[**小提琴**](http://jsfiddle.net/Ej2Ka/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T19:43:33.163

```
var str="YOUR_STR",
    arr = [];
if( str.indexOf(',') >= 0 ) {
   // if comma found then replace all extra space and split with comma
   arr =  str.replace(/\s/g,'').split(',');
} else {
   // if comma not found
   arr = str.split(' ');
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-28T19:44:58.780

```
var l = "a@example.com,c@example.com.com a@example.com, c@example.com.com a@example.com c@example.com.com";

var r = l.split(/ |, |,/); 
```

正则表达式使这相当容易。

如果有不止一个空格的变化，正则表达式可以稍微改变一下。

```
var r = l.split(/ +|, +|,/); 
```

# ruby-on-rails - Rails：生产环境在乘客中有效，但在控制台上无效

> ID：12166338
> 
> 赞同：0
> 
> 时间：2012-08-28T19:38:42.887
> 
> 标签：ruby-on-rails, deployment, capistrano, bundler, production

我们有一个使用 Rails 3.0.14 运行的应用程序，该应用程序在托管暂存环境和生产环境（使用 Debian Linux 和 Apache 2）的服务器上运行。使用带有多级扩展的 Bundler 和 Capistrano 完成部署。两种环境都可以在 Apache Passenger 中正常工作，并且生产环境也被积极使用。

但是，由于某种原因，自上次部署以来，我们的 cron 脚本停止工作，因为控制台出于某种原因不再喜欢我们的生产环境。无论我们使用什么`rake`或`rails`命令，我们总是得到

```
$ rails c
script/rails:6:in `require': no such file to load -- rails/commands (LoadError)
    script/rails:6 
```

`bundle install`只是遍历所有宝石并说“一切都很好”。但是与登台环境相比，我*知道*共享捆绑目录中缺少一些宝石（与有效的登台环境相比）。

我如何强制 Bundler*重新安装*所有必需的 gem，即使它假设一切都很好？它似乎没有“--force”开关。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T19:37:19.220

我发现了错误，但我仍然不知道这是怎么发生的。

似乎生产树中的“railties”gem 被标记为已安装，但安装它的目录是半空的（与暂存树相比）。Bundler 一直坚持说它安装得很好，但是一半的库文件丢失了，而且由于 'railties' 提供了命令行和脚本支持，这正是不存在的。

我仍然不明白 Bundler 如何以这种方式半安装 gem，但至少我能够通过从暂存系统复制丢失的文件来解决这种情况。

感谢您的所有评论，他们帮助我找到了正确的方向。

# r - 调整ggplot中的比例

> ID：12166340
> 
> 赞同：3
> 
> 时间：2012-08-28T19:38:44.317
> 
> 标签：r, ggplot2

> **可能重复：**
> [ggplot2 中的自动非等距中断](https://stackoverflow.com/questions/12132124/automatic-non-equidistant-breaks-in-ggplot2)

我正在创建一个 ggplot2 热图图表。我的数据如下：

```
df    

 Date    Value     Desc
1/1/2012 40       Brasil
1/1/2012  90      Argentina
1/1/2012  10      England
1/1/2012   5      China
2/1/2012 40       Brasil
2/1/2012  90      Argentina
2/1/2012  10      England
2/1/2012   24      China
3/1/2012 40       Brasil
3/1/2012  90      Argentina
3/1/2012  10      England
1/1/2012   0      China

ggplot(df, aes(Date, Desc, fill=Value)) + geom_tile(colour="white") + scale_fill_gradient(low="white", high="red"") 
```

ggplot 的默认比例从 10 到 50 等在右侧作为图例。我怎样才能手动改变这个？而不是 10、15、20、60 等。我喜欢从最低到最高的断点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-28T19:46:59.540

你想要`breaks`我认为的论点。请参阅`?scale_fill_gradient`说明：

```
ggplot(df, aes(Date, Desc, fill=Value)) + 
  geom_tile(colour="white") + 
  scale_fill_gradient(low="white", 
                      high="red", 
                      breaks=seq(min(df$Value), max(df$Value), by=30)) 
```

# php - 回显mysql查询结果时如何忽略重复行

> ID：12166342
> 
> 赞同：0
> 
> 时间：2012-08-28T19:38:47.237
> 
> 标签：php, mysql, tags

我试图制作标签云系统，并在一张带有“名称”和“product_id”的表中输入标签。我做的可能有多个相同的标签，每个人都针对不同的产品。我的问题是，当从表中回显标签时，它会显示所有标签，这很好，但是重复的标签在那个计数中。我只需要回显重复的标签一次，但我不知道如何做到这一点。这是显示和重复标签的我的代码。

```
$id     = $_GET['catid'];
$sql    = "SELECT * FROM tags_group";
$result = mysql_query($sql) or die(mysql_error());
while ($row    = mysql_fetch_array($result)) {
    //echo $row['name'];
    $id      = $row['id'];
    $sql1    = "SELECT * FROM tags WHERE tag_group='$id'";
    $result1 = mysql_query($sql1);
    while ($row1    = mysql_fetch_array($result1)) {
        $name   = $row1['tag_name'];
        $sql2   = "SELECT * FROM tags WHERE tag_name='$name'";
        $resut2 = mysql_query($sql2);
        $rows   = mysql_num_rows($resut2);

        echo $row1['tag_name'] . '(' . $rows . ')' . '<br>';

        // echo $row1['tag_name'].$rows.'<br>';
    }
    echo '<br>';
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T19:41:02.863

您必须使用`DISTINCT`关键字 do 避免重复：

```
SELECT DISTINCT * FROM tags_group 
```

正如我在上面的评论中提到的，你应该停止使用`mysql_*`函数。它们正在被弃用。而是使用[PDO](http://php.net/manual/en/book.pdo.php)（从 PHP 5.1 开始支持）或[mysqli](http://php.net/manual/en/book.mysqli.php)（从 PHP 4.1 开始支持）。如果您不确定要使用哪一个，[请阅读这篇文章](http://www.deprecatedphp.com/mysql_/)。

**更新**

看起来您正在使用嵌套查询，而不是加入您的表并检索结果。试试这个：

```
$id     = $_GET['catid'];
$sql    = "SELECT tags.tag_name, count(*) AS name_count FROM tags
               INNER JOIN tags_group
               ON tags.tag_group = tags_group.id
               GROUP BY tag_name";
$result = mysql_query($sql) or die(mysql_error());
while ($row    = mysql_fetch_array($result)) {        
    $name   = $row['tag_name'];
    $rows   = $row['name_count'];

    echo $name . '(' . $rows . ')' . '<br>';

    // echo $row['tag_name'].$rows.'<br>';
}
echo '<br>'; 
```

在这里，我不使用`DISTINCT`但`GROUP BY`允许您聚合每个不同行的计数（基于`GROUP BY`列）。

[看一下这张图](http://www.codeproject.com/KB/database/Visual_SQL_Joins/Visual_SQL_JOINS_orig.jpg)，以更好地理解`join`s 是如何工作的。

# linux - Apache重定向傻瓜.aspx

> ID：12166344
> 
> 赞同：1
> 
> 时间：2012-08-28T19:38:51.193
> 
> 标签：linux, apache

我有一个在 Linux 中运行的 apache 服务器，我想知道如何重定向 url？我想通过 apache 来做到这一点，而不是通过添加标题或重定向到单个文件中。目标是避免处理 .aspx

示例 1：

```
VISITING: wwww.myserver.com/file1.aspx
Will take you to: www/myserver.com/file2.php 
```

示例 2：

```
VISITING: www.myserver.com/file1.aspx?command1=set&command2=set
Will take you to: www.myserver.com/file2.php?command1=set&command2=set 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T20:42:35.973

在不使用 mod_rewrite 的情况下，您可以在 vhost/server 配置或 htaccess 文件中简单地使用 mod_alias：

```
Redirect 301 /file1.aspx /file2.php 
```

# sql - 单个表的内部查询

> ID：12166346
> 
> 赞同：1
> 
> 时间：2012-08-28T19:38:57.550
> 
> 标签：sql, oracle

我的 Oracle DB 中有一个表，其中存储有数据，例如

```
ROLE_ID | USER_ID
------------------
 14     | USER A
 15     | USER A
 11     | USER B
 13     | USER A
 15     | USER B
 12     | USER C
 15     | USER C 
```

我想得到同时`USER_ID`具有 13 和 15 的所有 s `ROLE_ID`。基于上面的示例，我应该只返回`USER_A`。

如果我写下面的查询

`select * from table where ROLE_ID in (13,15);`然后我也得到了其他用户。

如何修改查询以便我只返回`USER A`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-28T19:42:09.157

你正在寻找拥有...

```
select user_id
  from my_table
 where role_id in (13,15)
 group by user_id.
having count(distinct role_id) = 2 
```

通过使用 distinct，您可以确保如果有两个 USER A，您仍然会得到一个同时具有两个`role_id`s

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-28T19:43:53.077

试试这个

```
SELECT USER_ID FROM table WHERE ROLE_ID=13
        INTERSECT
SELECT USER_ID FROM table WHERE ROLE_ID=15 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T20:07:29.350

您可以使用内部连接来执行此操作：

```
SELECT DISTINCT t1.USER_ID
FROM table t1
JOIN table t2 
 ON t2.USER_ID = t1.USER_ID 
 AND t2.ROLE_ID=15
WHERE t1.ROLE_ID=13 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-28T20:16:22.710

我只会在 HAVNIG 子句中这样做：

```
select user_id
from t
group by user_id
having max(case when role_id = 13 then 1 else 0 end) = 1 and
       max(case when role_id = 15 then 1 else 0 end) = 1 
```

我发现在 HAVING 子句中表述这些条件提供了最大的灵活性。您可以使用“和”条件、“或”条件，将结果限制为*仅*具有 13 和 15 的用户，或使用相同基本构造的任何用户。

# java - 通过 Internet 使用 Java 聊天应用程序 | ConnectException（连接超时）

> ID：12166350
> 
> 赞同：2
> 
> 时间：2012-08-28T19:39:03.207
> 
> 标签：java, timeout, port, forwarding, connectexception

我正在尝试开发一个基本的聊天应用程序。我已经为服务器和客户端编写了所需的代码，并且该应用程序在 LAN 上运行良好。然而，当我试图让它在互联网上运行时，我被卡住了。我了解到我需要在服务器机器中进行端口转发，并且我做到了。我转发了 6000 端口，canyouseeme.org 给出了成功的消息。因此，端口肯定是打开的，并且没有防火墙阻止它。但是，客户端代码无法连接到它。

服务器代码按如下方式打开一个 ServerSocket（它们的定义在前面已经做了）：

```
InetAddress IP = InetAddress.getLocalHost();
welcomeSocket = new ServerSocket(6000, 10, IP);
connectionSocket = welcomeSocket.accept(); 
```

客户端代码主要使用以下代码尝试连接到它：

```
clientSocket = new Socket("xx.xxx.xxx.xx", 6000); 
```

其中 xx.xxx.xxx.xx 是服务器机器的 IP 地址（不是本地的 192.168.xx）。

这是Java问题吗？我问是因为端口 6000 显然是打开的，并且 canyouseeme.org 可以成功连接到它，但我的客户端无法连接。为什么会发生这样的事情？任何帮助将不胜感激（有关更多信息，请阅读下面的评论）。

错误信息如下：

```
java.net.ConnectException: Connection timed out: connect
    at java.net.PlainSocketImpl.socketConnect(Native Method)
    at java.net.PlainSocketImpl.doConnect(PlainSocketImpl.java:333)
    at java.net.PlainSocketImpl.connectToAddress(PlainSocketImpl.java:195)
    at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:182)
    at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:366)
    at java.net.Socket.connect(Socket.java:519)
    at java.net.Socket.connect(Socket.java:469)
    at java.net.Socket.<init>(Socket.java:366)
    at java.net.Socket.<init>(Socket.java:180)
    at ChatPanel$ConnectButtonListener.actionPerformed(ChatPanel.java:206)
    at javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:1995)
    at javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2318)
    at javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:387)
    at javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:242)
    at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(BasicButtonListener.java:236)
    at java.awt.Component.processMouseEvent(Component.java:6038)
    at javax.swing.JComponent.processMouseEvent(JComponent.java:3265)
    at java.awt.Component.processEvent(Component.java:5803)
    at java.awt.Container.processEvent(Container.java:2058)
    at java.awt.Component.dispatchEventImpl(Component.java:4410)
    at java.awt.Container.dispatchEventImpl(Container.java:2116)
    at java.awt.Component.dispatchEvent(Component.java:4240)
    at java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4322)
    at java.awt.LightweightDispatcher.processMouseEvent(Container.java:3986)
    at java.awt.LightweightDispatcher.dispatchEvent(Container.java:3916)
    at java.awt.Container.dispatchEventImpl(Container.java:2102)
    at java.awt.Window.dispatchEventImpl(Window.java:2429)
    at java.awt.Component.dispatchEvent(Component.java:4240)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:599)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:273)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:183)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:173)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:168)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:160)
    at java.awt.EventDispatchThread.run(EventDispatchThread.java:121) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T11:04:58.440

在客户端上，您应该使用

```
clientSocket = new Socket(InetAddress.getByAddress(addr), port); 
```

where`addr`是服务器的公共地址，并且`port`是绑定到的服务器。

# c# - 用mysql数据库中另一列的相对路径值超链接一列

> ID：12166354
> 
> 赞同：0
> 
> 时间：2012-08-28T19:39:13.083
> 
> 标签：c#, asp.net, mysql, gridview, hyperlink

我是一个极端的初学者，并且在这方面做了很多搜索，但没有多大成功——我不确定这是否可能/是否有意义：我正在尝试创建一个工作委员会数据库和网页，其中包含指向相应页面的链接的职位。我在 mySQL 和 ASP.net 中有一个 gridview，其中包含职位、日期和页面的相对链接/路径，以及对职位的进一步描述。我想使用链接列中的相对路径将职位名称超链接（希望只是编写脚本以生成完整链接——而不是为每一行硬编码）。当此页面运行时，链接列很可能会被隐藏。这样用户就可以在有任何变化时编辑链接列，而不必过多地编辑代码（如果有的话）。

```
[Job Title]    [Date Posted]      [Link]
Job 1           June, 2012         /california/job1.asp
Job 2           August, 2012       /newyork/job2.asp
etc.. 
```

我想在浏览器中显示：

```
Job Title       Date Posted
[Job 1][1]      June, 2012
[Job 2][2]      August, 2012 
```

这是表格的 asp 代码，我知道我需要一个带有导航 URL 的职位名称的超链接字段或列。但不知道如何连接我上面的两个表列。我会很感激我能得到的任何帮助:)

```
<asp:Content ID="BodyContent" runat="server" ContentPlaceHolderID="MainContent">
        <h2>
            Job Postings 
        </h2>
        <p>
            The following are the current open positions:
        </p>
        <p>
            <asp:GridView ID="GridView1" runat="server" AllowPaging="True" 
                AllowSorting="True" AutoGenerateColumns="False" DataSourceID="SqlDataSource1" 
                EmptyDataText="There are no data records to display." BackColor="White" 
                BorderColor="#CCCCCC" BorderStyle="None" BorderWidth="1px" CellPadding="4" 
                ForeColor="Black" GridLines="Horizontal">
                <Columns>
                    <asp:BoundField DataField="JobTitle" HeaderText="JobTitle" 
                        SortExpression="JobTitle" />
                    <asp:BoundField DataField="JobDatePosted" HeaderText="JobDatePosted" 
                        SortExpression="JobDatePosted" DataFormatString="{0:d}" />
                    <asp:BoundField DataField="JobLink" HeaderText="JobLink" 
                        SortExpression="JobLink" />
                </Columns>
                <FooterStyle BackColor="#CCCC99" ForeColor="Black" />
                <HeaderStyle BackColor="#333333" Font-Bold="True" ForeColor="White" />
                <PagerStyle BackColor="White" ForeColor="Black" HorizontalAlign="Right" />
                <SelectedRowStyle BackColor="#CC3333" Font-Bold="True" ForeColor="White" />
                <SortedAscendingCellStyle BackColor="#F7F7F7" />
                <SortedAscendingHeaderStyle BackColor="#4B4B4B" />
                <SortedDescendingCellStyle BackColor="#E5E5E5" />
                <SortedDescendingHeaderStyle BackColor="#242121" />
            </asp:GridView>
            <asp:SqlDataSource ID="SqlDataSource1" runat="server" 
                ConnectionString="<%$ ConnectionStrings:ConnectionString %>" 
                ProviderName="<%$ ConnectionStrings:ConnectionString.ProviderName %>" 
                SelectCommand="SELECT [JobTitle], [JobDatePosted], [JobLink] FROM [jobpostings]">
            </asp:SqlDataSource>
        </p>
    </asp:Content> 
```

如果这是一个愚蠢的想法，请让我知道更好的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T19:46:23.900

您可以尝试使用此代码

```
<asp:HyperLinkField 
DataNavigateUrlFields=""
DataNavigateUrlFormatString="....aspx?id={0}"
DataTextField=" 
NavigateUrl="" /> 
```

链接：http: [//msdn.microsoft.com/fr-fr/library/zt9c22bx%28v=vs.80%29](http://msdn.microsoft.com/fr-fr/library/zt9c22bx%28v=vs.80%29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T19:56:19.630

最佳做法是使用 ItemTemplate 之类的东西，以`set/edit/update`编程方式添加超链接控件和值。添加 editTemplate 用于编辑目的。

**Design.aspx：（** *测试代码）*

```
<asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False"
            onrowdatabound="GridView1_RowDataBound" 
            onrowcancelingedit="GridView1_RowCancelingEdit" 
            onrowediting="GridView1_RowEditing" onrowupdating="GridView1_RowUpdating">
         <Columns>
             <asp:TemplateField HeaderText="Id">
                 <ItemTemplate>
                     <asp:Label ID="lblid" runat="server" Text='<%# Bind("id") %>'></asp:Label>
                 </ItemTemplate>
             </asp:TemplateField>
             <asp:TemplateField HeaderText="JobTitle">
                 <ItemTemplate>
                     <asp:HyperLink ID="jobTitle" Text='<%# Bind("JobTitle") %>'  NavigateUrl='<%# Bind("JobLink") %>'  runat="server"></asp:HyperLink>
                 </ItemTemplate>
             </asp:TemplateField>
             <asp:TemplateField HeaderText="Post Date">
                 <ItemTemplate>
                     <asp:Label ID="lbldatepost" runat="server" Text='<%# Bind("JobDatePosted","{0:dd MMM yyyy}") %>'></asp:Label>
                 </ItemTemplate>
             </asp:TemplateField>
             <asp:TemplateField >
                 <ItemTemplate>
                     <asp:Label ID="lblLink" runat="server" Text='<%# Bind("JobLink") %>'></asp:Label>
                 </ItemTemplate>
                 <EditItemTemplate>
                     <asp:TextBox ID="txtesetLink" runat="server" Text='<%# Bind("JobLink") %>'></asp:TextBox>
                 </EditItemTemplate>
             </asp:TemplateField>
             <asp:TemplateField ShowHeader="False">
                 <EditItemTemplate>
                     <asp:LinkButton ID="LinkButton1" runat="server" CausesValidation="True" 
                         CommandName="Update" Text="Update"></asp:LinkButton>
                     &nbsp;<asp:LinkButton ID="LinkButton2" runat="server" CausesValidation="False" 
                         CommandName="Cancel" Text="Cancel"></asp:LinkButton>
                 </EditItemTemplate>
                 <ItemTemplate>
                     <asp:LinkButton ID="LinkButton1" runat="server" CausesValidation="False" 
                         CommandName="Edit" Text="Edit"></asp:LinkButton>
                 </ItemTemplate>
             </asp:TemplateField>
         </Columns>

    </asp:GridView> 
```

**代码背后：**

```
 protected void Page_Load(object sender, EventArgs e)
    {
        if(!Page.IsPostBack)
        {
           gvBind();
        }
    }
    public void gvBind()
    {
        SqlDataAdapter dap = new SqlDataAdapter("SELECT id, [JobTitle], [JobDatePosted], [JobLink] FROM [jobpostings]", con);
        DataSet ds = new System.Data.DataSet();
        dap.Fill(ds);
        GridView1.DataSource = ds.Tables[0];
        GridView1.DataBind();
    }

    protected void GridView1_RowEditing(object sender, GridViewEditEventArgs e)
    {
        GridView1.EditIndex = e.NewEditIndex;
        gvBind();
    }
    protected void GridView1_RowCancelingEdit(object sender, GridViewCancelEditEventArgs e)
    {
        GridView1.EditIndex = -1;
        gvBind();
    }
    protected void GridView1_RowUpdating(object sender, GridViewUpdateEventArgs e)
    {
        TextBox txtlink = (TextBox)GridView1.Rows[e.RowIndex].FindControl("txtesetLink");
        Label lblid = (Label)GridView1.Rows[e.RowIndex].FindControl("lblid");

        int result = UpdateQuery(txtlink.Text, lblid.Text);

        if (result > 0)
        {
            //lblmsg.text = "Record updated";
            Response.Write("Record updated");
        }
        GridView1.EditIndex = -1;
        gvBind();

    }
    public int UpdateQuery(string setlink,string id)
    {
        SqlCommand cmd=new SqlCommand("update jobpostings set JobLink='"+setlink+"' where id='"+id+"'",con);
        con.Open();
        int temp = cmd.ExecuteNonQuery();
        con.Close();
        return temp;
    } 
```

**注意：**希望它几乎解决了您的问题，如果有任何问题，请立即告诉我。

# jboss - 仅使用 log4j 记录 JBoss 请求/响应

> ID：12166356
> 
> 赞同：0
> 
> 时间：2012-08-28T19:39:19.167
> 
> 标签：jboss, log4j, jboss7.x

如何仅使用*log4j记录**JBoss* **请求/响应**？

 *对于我的 3 层应用程序（客户端、Web 服务和数据库），我正在尝试收集请求/响应时间。

例如，之前/之后的**时间戳：**

1.  客户端发送请求
2.  WS接收请求
3.  WS 向数据库发送查询

目前，我的日志显示了**几千行**文本（`DEBUG`模式）。但是，我只寻找请求/响应信息。

我想我可以选择不同的**日志** [**级别**](http://docs.jboss.org/process-guide/en/html/logging.html)，但我无法找到`log4j.xml`大多数[解决方案](http://java.dzone.com/articles/configuring-logging-jboss)所指的 ( `server/xxx/conf/jboss-log4j.xml`)。`log4j.properties`由于某种原因，我的*Eclipse*中的文件不允许编辑。

我是*JBoss*的新手；实际上从其他人那里继承了当前的设置，所以我对整个`JBoss`事情有点一无所知。

## 编辑 1

的例子`log4j.properties`可以在[这里](http://www.mkyong.com/logging/log4j-log4j-properties-examples/)找到。

## 编辑 2

我的`log4j.properties`：

```
log4j.rootLogger=TRACE, file
log4j.appender.file=org.apache.log4j.RollingFileAppender
log4j.appender.file.File=C\:log4j.log
log4j.appender.file.MaxFileSize=1MB
log4j.appender.file.MaxBackupIndex=1
log4j.appender.file.layout=org.apache.log4j.PatternLayout
log4j.appender.file.layout.ConversionPattern=%d{ABSOLUTE} %5p %c{1}:%L - %m%n
log4j.category.org.springframework.beans.factory=DEBUG 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T21:46:46.740

最好通过[logging 子系统](https://docs.jboss.org/author/display/AS71/How+To)配置日志记录。如果您希望使用 log4j 配置文件，请参阅[此处](https://docs.jboss.org/author/display/AS71/How+To#HowTo-HowdoIuselog4j.propertiesorlog4j.xmlinsteadofusingtheloggingsubsystemconfiguration%3F)的说明。*

# c# - 测试 SQL Server 程序集的工具

> ID：12166358
> 
> 赞同：0
> 
> 时间：2012-08-28T19:39:20.887
> 
> 标签：c#, .net, sql-server, visual-studio, assemblies

有什么好的工具可以测试我的 SQL Server 程序集吗？我有两个程序集部署到 SQL Server 2005。这些程序集是使用 VS 2008 和 C#.Net 创建的。我的 Web 应用程序向触发程序集的存储过程发出请求，但有时它永远不会返回。我该如何测试这个？

# html - @font-face：Chrome 完美检测字体，但出现边距

> ID：12166361
> 
> 赞同：0
> 
> 时间：2012-08-28T19:39:49.947
> 
> 标签：html, css, font-face, margin, padding

```
<style>
    @font-face
    {
        font-family : 'Avenir';
        src         : url("/fonts/Avenir999.otf");
    }

    p.price a span
    {
    /*font-family   : 'Avenir';*/
      font-size     : 45px;
      color: #889900;
    }

</style>
<p class="price" style="border:1px solid red;">
        <a href="#"><span>this text is above the middle of red rectangle if uncomment //font-family</span></a>
</p> 
```

再次，正确检测到字体。一切正常。如果我使用

```
p.price a span
{
  font-size     : 45px;
  color: #889900;
} 
```

那么它是完美的。但是，一旦我添加了一个字符串 font-face 这样

```
p.price a span
{
  font-family   : 'Avenir';
  font-size     : 45px;
  color: #889900;
} 
```

字体样式发生了变化（太棒了！），但它几乎跳出了红色的 1px 实心矩形。为什么？怎么修？为什么会发生？那只是字体。没有填充，没有使用边距。

Firefox 还可以，但 Chrome 是个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T19:44:16.610

你的字体文件一定有问题。我会使用[Font Squirrel 的](http://www.fontsquirrel.com/fontface/generator)字体生成器来构建您的字体文件以与 @font-face 一起使用。它将生成跨浏览器的 CSS 供您使用，它应该在不同的浏览器中更好地工作。

# jquery - IE 中的 Forms WebBrowser 控件和 css 渐变

> ID：12166362
> 
> 赞同：3
> 
> 时间：2012-08-28T19:39:52.607
> 
> 标签：jquery, wpf, browser, jscrollpane, gradient

我有一个 WPF 应用程序，在 WindowsFormsHost 中使用 Windows 窗体 WebBrowser 控件。此控件中的页面使用 jquery 和 jscrollpane 创建自定义滚动条。使用 CSS，我将 jspArrowDown 背景设置为渐变。在 XP（而且似乎只有 XP）中，显示渐变存在问题。在 jspArrowUp 元素中使用了相同的渐变背景，没有任何问题。更奇怪的是，同一框上的 IE 本身可以完美地显示渐变背景。有没有人遇到过这种独特的情况或与 Windows 窗体 WebBrowser 控件类似的情况？如果是这样，它是如何解决的？

**相同的 CSS**

```
filter: progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr='#FFFFFF', endColorstr='#CCCCCC'); 
```

**相同的用户代理**

```
Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 5.1; Trident/4.0; .NET CLR 1.1.4322; .NET CLR 2.0.50727; .NET CLR 3.0.4506.2152; .NET CLR 3.5.30729; .NET4.0C; .NET4.0E) 
```

**不同的视觉结果**

IE 正确

![](../Images/8e591ad69ed92713a6ad06dae7212e63.png)

Windows 窗体 Web 控件

![](../Images/31ee93b613cfd437cb19553043a6346f.png)

**更新**

在 Windows 7 环境中出现此错误后，我进行了更多挖掘并意识到这确实不是环境是 XP 的事实，而是环境没有安装 IE 9.0 的事实。无论我在什么机器上运行，WebBrowser 控件都运行 IE 7.0，但是如果机器安装了 IE 9，它将使用 Trident 5.0 引擎而不是 IE 7 和 IE 8 附带的 Trident 4.0 引擎进行渲染。所以问题Trident 4.0 实际上正在发生。有什么方法可以将 Trident 5.0 安装到 XP 机器上？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T19:53:51.200

Webbrowser 是 IE API 的包装器。它被困在 IE7 渲染引擎上。

您可以尝试使用更好的版本。Rick 将帮助您做到这一点：[http ://www.west-wind.com/weblog/posts/2011/May/21/Web-Browser-Control-Specifying-the-IE-Version](http://www.west-wind.com/weblog/posts/2011/May/21/Web-Browser-Control-Specifying-the-IE-Version)

# .net - 如何在 Windows 7 上创建此设计？

> ID：12166364
> 
> 赞同：0
> 
> 时间：2012-08-28T19:39:54.553
> 
> 标签：.net, microsoft-metro

我已经在 Windows 7 上安装了 MS Office 2012。我可以像这样使用 Visual Studio 2012 和标准方法（可能是 wpf 吗？）以 office 2013 风格设计我的应用程序

![图像](../Images/267109aeb90e30c3291e7fff36570d18.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T00:28:51.230

这确实看起来像一个带有无边框窗口样式集、红色/橙色边框、一两个图像、一些文本块和一些重新模板化/重新设置样式的按钮的窗口 - 如果在 WPF 中完成。您也可以在 Windows 窗体、普通的旧 GDI/GDI+ 或 Direct3D/Direct2D 中执行类似的操作。即使是 HTML，如果那是您选择的语言。对于 Windows 7 应用程序，尽管 WPF 是最好的，并且也是学习在 Windows 8 开发中有用的实践的最佳途径。如果升级到 Windows 8 是可能的（从任何其他 Windows 升级到 Windows 8 有一些非常好的交易） - 我会考虑直接升级到 Windows 8。

# python - django request.session.get("name", False) - 这段代码是什么意思？

> ID：12166368
> 
> 赞同：8
> 
> 时间：2012-08-28T19:40:20.100
> 
> 标签：python, django

我正在使用以下代码：

```
if request.session.get("name",False): 
```

谁能告诉我上面的代码是做什么的？我假设的是，如果会话中有“名称”，则返回 True，否则返回 False。我对我的代码感到困惑，所以我在这里发布了这个问题。

谢谢。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-28T19:41:33.103

如果`session`其中有一个带有值的键，`"name"`则返回*与该键关联的值*（很可能是`False`），否则（如果没有名为“name”的键）它返回`False`。

这`session`是一个类似字典的类型，因此获取该[`get`方法](http://docs.python.org/library/stdtypes.html#dict.get)的文档的最佳位置是标准库的 Python 文档。简而言之，它`get`是以下内容的简写：

```
if "name" in request.session:
    result = request.session["name"]
else:
    result = False

if result:
    # Do something 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-09-04T06:45:44.623

根据[Django 文档](https://docs.djangoproject.com/en/3.1/topics/http/sessions/#django.contrib.sessions.backends.base.SessionBase.get)，get 方法的第二个参数是默认值。因此，“request.session.get("name",False):" 语句返回 'name' 项的值，如果它存在于会话中，则返回默认值 False。

# xml - 使用 IXMLDocument 在 XML 中搜索数据

> ID：12166372
> 
> 赞同：4
> 
> 时间：2012-08-28T19:40:44.277
> 
> 标签：xml, delphi, delphi-2010, ixmldomdocument

给定下面的 XML 示例；

1.  如何轻松检查给定对象是否存在？
2.  如何轻松添加组或用户类型的项目？（加一整块）

```
<role>
    <access>
        <control>
            <type>group</type>
            <object>COMPUTER\Administrators</object>
        </control>
        <control>
            <type>user</type>
            <object>COMPUTER\Admin</object>
        </control>
    </access>
</role> 
```

代码：

```
var
  Doc: IXMLDOMDocument2;
  Node: IXMLDOMNode;
procedure Test;
begin
  Doc := CreateOleObject('Microsoft.XMLDOM') as IXMLDomDocument2;
  Doc.load('test.xml');

  // This Works
  Node := Doc.selectSingleNode('//role/access/control');

  // But this does not work:
  Node := Doc.selectSingleNode('//role/access/control[type = ''group'']');

  // EDIT: This does work, but how to combine with object=COMPUTER\Admin?
  Node := Doc.selectSingleNode('//role/access/control[type="group"]');

  // EDIT: This does not work either
  Node := Doc.selectSingleNode('//role/access/control[type="group" and object="COMPUTER\Administrators"]');
end; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T21:58:03.263

## 1\. 如何修复 XPath 表达式？

这些中的任何一个都将修复查询：

1）创建dom后添加以下行：

```
 Doc.setProperty('SelectionLanguage', 'XPath'); 
```

2）更好的是，您可以更明确地说明您正在创建哪个版本的解析器，并将您的构造行替换为：

```
Doc := CoDOMDocument60.Create; 
```

如果查询没有找到任何东西，Node 将为空。

```
if not Assigned(Node) then... 
```

MSXML3 解析器的默认查询语言是 XSLPatterns。您需要将其显式设置为 XPath。自从我不得不处理它已经有一段时间了，但我认为 CreateOleObject 行必须创建我的默认值的 MSXML 解析器。

更新：您问题后半部分的解决方案从亲切的 TLama 无耻地（经许可）窃取。:)

## 2.如何添加“控制”节点？

忽略目标文档格式和错误处理，例如：

```
procedure TForm1.Button2Click(Sender: TObject);
var
  XMLRoot: IXMLDOMNode;
  XMLChild: IXMLDOMNode;
  XMLDocument: IXMLDOMDocument2;
begin
  XMLDocument := CreateOleObject('Microsoft.XMLDOM') as IXMLDomDocument2;
  XMLDocument.load('XMLFile.xml');
  XMLRoot := XMLDocument.selectSingleNode('//role/access');
  if Assigned(XMLRoot) then
  begin
    XMLRoot := XMLRoot.appendChild(XMLDocument.createElement('control'));
    XMLChild := XMLRoot.appendChild(XMLDocument.createElement('type'));
    XMLChild.text := 'user';
    XMLChild := XMLRoot.appendChild(XMLDocument.createElement('object'));
    XMLChild.text := 'COMPUTER\TLama';
    XMLDocument.save('XMLFile.xml');
  end;
end; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T03:45:29.547

这个答案总结了我在澳大利亚德尔福用户组博客[“Dances with XML”](http://members.adug.org.au/2012/08/17)上的条目。如果您需要更多详细信息，请参阅它。

## 通过 XML 访问节点

通过尝试利用 XPATH 作为访问和浏览 XML 文档的简单机制，您正朝着正确的方向前进。只是您的实现需要一些改进。演示代码如下所示。

## Q1 如何轻松检查给定对象是否存在？

使用带有 XPATH 表达式的 'in' 运算符和引用的“Dances with XML”实用程序单元。例如，使用您提供的输入文档，此代码片段测试控制节点是否存在

```
if 'role/access/control[type="group"]' in XFocus(Root) then
    ShowMessage(' Hello! I''m here.') 
```

...其中 Root 是文档根节点。

## Q2 如何轻松添加组或用户类型的项目？

对于添加内容，最好使用具有流畅 API 的 XML 库，但您可以通过以下方法实现半流畅：

### 添加子元素

要添加子元素，请使用这样的代码...

```
ParentNode.AddChild('child-name') 
```

这是半流利的，因为上面的表达式是一个返回 IXMLNode 的函数。

### 添加属性

要添加新属性，或更改现有的一个使用代码，如下所示...

```
ElementNode.Attributes['myattrib'] := 'attrib-value' 
```

此功能没有本机幂等版本，但推出自己的版本将是微不足道的。

## 示例 1

此示例大致复制了问题中给出的 OP 的 Test() 过程的功能。

```
// uses uXMLUtils from referenced demo.
procedure Test;
begin
  Doc := LoadDocument_MSXML_FromStream( TestXMLStream);
  Root := Doc.Node;

  // To test if control node exists:
  if 'role/access/control' in XFocus(Root) then
    ShowMessage('The control node exists!');

  // To access each control node:
  for ControlNode in 'role/access/control' then
    DoSomethingForEachControlNode( ControlNode);

  // To access on the first control node:
  for ControlNode in '(role/access/control)[1]' then
    DoSomethingForFirstControlNode( ControlNode);

  // To access on the first control node which has BOTH group type and Admin object:
  for ControlNode in '(role/access/control[type="group"][object="COMPUTER\Administrators"])[1]' do
    DoSomething( ControlNode);

  // To do something for EACH control node which is EITHER group type or Admin object:
  for ControlNode in 'role/access/control[type="group" or object="COMPUTER\Administrators"]' do
    DoSomething( ControlNode); 
```

结尾;

## 示例 2

假设我们要添加一个计算机管理员组，但前提是该组尚不存在。如果添加，则新节点位于新的访问节点下。如果我们利用 XPATH，我们可以用少量的代码来实现这一点。这显示在下面的代码片段中。

```
if not 'role/access/control[type[.="group"][object[.="COMPUTER\Administrators"]]' in XFocus(Root) then
  begin
  ControlNode := Root.ChildNodes.FindNode('role')
                      .AddChild(['access')
                       .AddChild('control');
  ControlNode.AddChild('type'  ).Text := 'group';
  ControlNode.AddChild('object').Text := 'COMPUTER\Administrators'
  end; 
```

# javascript - 您可以从另一个页面中选择标签吗？

> ID：12166374
> 
> 赞同：0
> 
> 时间：2012-08-28T19:40:47.817
> 
> 标签：javascript, jquery, html

如果我有这个包含所有 jquery 代码的页面 a.html。还有另一个页面 b.html 只有 html 标签。是否可以执行以下操作：

```
alert( $('a').fromhref('b.html').html() ); 
```

基本上我想从另一个页面中选择一个标签。我想基本上避免使用 iframe 和 httprequests。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T19:51:17.937

您可以使用 jQuery 访问另一个页面的部分内容，前提是两个页面都在同一个域中，使用`load()`，但这只能通过 http 请求完成（尽管如果页面被缓存，则可能没有必要），作为一个简短的示例：

```
$('#idOfElementOnPageA').load('http://example.com/pageB.html #idOFElementOnPageB'); 
```

这会将带有 of 的元素的 html 加载到带有`id`of`idOfElementOnPageB`的元素`id`中`idOfElementOnPageA`。

但请注意，这绝不会避免调用服务器，尽管它允许您在不使用页面中`iframe`的元素的情况下从另一个页面检索元素。

参考：

*   [`load()`](http://api.jquery.com/load/).

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-28T19:41:50.443

文件名应该是 script.js 而不是 a.html，然后使用[script 标签](http://css-tricks.com/the-script-tag/)。

基本上，是这样的（在 b.html 中）：

```
<script src="script.js"></script> 
```

只要 script.js 与 b.html 位于同一文件夹中。

# algorithm - 使用 perl 按依赖项排序数组

> ID：12166376
> 
> 赞同：11
> 
> 时间：2012-08-28T19:40:53.490
> 
> 标签：algorithm, perl, graph, sorting, cpan

有一个哈希数组，

```
my @arr = get_from_somewhere(); 
```

@arr 内容（例如）是：

```
@arr = (
  { id => "id2",    requires => 'someid', text => "another text2" },
  { id => "xid4",   requires => 'id2',    text => "text44" },
  { id => "someid", requires => undef,    text => "some text" },
  { id => "id2",    requires => 'someid', text => "another text2" },
  { id => "aid",    requires => undef,    text => "alone text" },
  { id => "id2",    requires => 'someid', text => "another text2" },
  { id => "xid3",   requires => 'id2',    text => "text33" },
); 
```

需要类似的东西：

```
my $texts = join("\n",  get_ordered_texts(@arr) ); 
```

soo 需要编写一个 sub`text`从哈希中返回 s 的数组， - 按照依赖顺序，所以从上面的例子需要得到：

```
"some text",     #someid the id2 depends on it - so need be before id2
"another text2", #id2    the xid3 and xid4 depends on it - and it is depends on someid
"text44",        #xid4   the xid4 and xid3 can be in any order, because nothing depend on them
"text33",        #xid3   but need be bellow id2
"alone text",    #aid    nothing depends on aid and hasn't any dependencies, so this line can be anywhere 
```

如您所见，@arr 中可以有一些重复的“行”，（上例中的“id2”），任何 id 只需要输出一次。

尚未提供任何代码示例，因为不知道如何开始。;( 存在一些 CPAN 模块可以用来解决什么问题？

谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-28T19:58:27.877

使用[图表](http://search.cpan.org/perldoc?Graph)：

```
use Graph qw( );

my @recs = (
   { id => "id2",    requires => 'someid', text => "another text2" },
   { id => "xid4",   requires => 'id2',    text => "text44" },
   { id => "someid", requires => undef,    text => "some text" },
   { id => "id2",    requires => 'someid', text => "another text2" },
   { id => "aid",    requires => undef,    text => "alone text" },
   { id => "id2",    requires => 'someid', text => "another text2" },
   { id => "xid3",   requires => 'id2',    text => "text33" },
);

sub get_ordered_recs {
   my %recs;
   my $graph = Graph->new();
   for my $rec (@_) {
      my ($id, $requires) = @{$rec}{qw( id requires )};

      $graph->add_vertex($id);
      $graph->add_edge($requires, $id) if $requires;

      $recs{$id} = $rec;
   }

   return map $recs{$_}, $graph->topological_sort();
}

my @texts = map $_->{text}, get_ordered_recs(@recs); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-28T19:59:27.003

一个有趣的问题。

这是我的第一轮解决方案：

```
sub get_ordered_texts {
    my %dep_found;  # track the set of known dependencies
    my @sorted_arr; # output

    my $last_count = scalar @_; # infinite loop protection
    while (@_ > 0) {
        for my $value (@_) {

            # next unless we are ready for this text
            next if defined $value->{requires}
                and not $dep_found{ $value->{requires} };

            # Add to the sorted list
            push @sorted_arr, $value->{text};

            # Remember that we found it
            $dep_found{ $value->{id} }++;
        }

        if (scalar @_ == $last_count) die "some requirements don't exist or there is a dependency loop";
        $last_count = scalar @_;
    }

    return \@sorted_arr;
} 
```

这不是非常有效，并且可能会`O(n log n)`及时运行或其他什么，但是如果您没有庞大的数据集，那可能还可以。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-28T19:57:59.890

我会使用有向图来表示依赖树，然后遍历该图。我使用[Graph.pm做了一些非常相似的事情](http://search.cpan.org/~jhi/Graph-0.94/lib/Graph.pod)

您的每个散列都将是一个图顶点，而边缘将代表依赖关系。这具有支持未来更复杂依赖关系以及提供用于处理图的快捷功能的额外好处。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-28T19:58:12.137

1.  你没有说要做什么依赖是“独立的”彼此。

    例如 id1 需要 id2；id3 需要 id4；id3 需要 id5。顺序应该是什么？（除了 2 之前的 1 和 4/5 之前的 3）

2.  您想要的基本上是依赖关系的树（有向图）的 BFS（广度优先搜索）（或取决于对 #1 的答案的森林 - 森林是一组未连接的树）。

    要做到这一点：

    *   查找所有根节点（本身没有要求的 id）

        `grep`您可以通过对数据结构使用的所有 ID 进行哈希处理来轻松做到这一点

    *   将所有这些根模式放入一个起始数组中。

    *   然后实施 BFS。如果您在 Perl 中使用数组和循环实现基本 BFS 时需要帮助，请提出单独的问题。可能有一个 CPAN 模块，但算法/代码相当简单（至少你写过一次 :)

# mysql - 执行触发 SqlFiddle 上的存储过程。mysql

> ID：12166380
> 
> 赞同：17
> 
> 时间：2012-08-28T19:41:01.397
> 
> 标签：mysql, sqlfiddle

SQL-fiddle 是否有助于触发器/存储过程的执行？

我什至无法在 sqlfiddle 上执行最简单形式的存储过程

```
DELIMITER $$
DROP PROCEDURE IF EXISTS myProc $$

CREATE PROCEDURE myProc()
BEGIN

END$$
DELIMITER ; 
```

Sqlfiddle 不允许在构建模式中执行此（以上）sql，但允许创建表等

**注意：**使用 wamp 和 mysql 5.5.24 在我的本地主机上使用相同的语法对我有用

有人可以指导吗？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-08-28T20:15:17.470

不要使用分隔符选项（这不是真正的 SQL 语句，而只是 mysql 命令提示符的命令），而是使用 SQL Fiddle 上的“查询终止符”选项来建立分隔符。

例如：

[http://sqlfiddle.com/#!2/88fcf](http://sqlfiddle.com/#!2/88fcf)

注意`//`架构框下方的下拉菜单？这是相当于 mysql DELIMITER 命令的 SQL Fiddle。

存储过程中查询的更长示例（请注意，在存储过程中，`;`仍用作分隔符）：

[http://sqlfiddle.com/#!9/4db78](http://sqlfiddle.com/#!9/4db78)

完全披露：我是 SQL Fiddle 的作者。

# google-app-engine - java.lang.IncompatibleClassChangeError：实现类部署到应用引擎

> ID：12166382
> 
> 赞同：18
> 
> 时间：2012-08-28T19:41:09.310
> 
> 标签：google-app-engine, jersey

我在 JRE 1.6 上使用 Jersey 1.13 编写了几个 REST 服务。一切都在本地运行良好，但在我部署到 GAE 后出现此错误：

```
****Uncaught exception from servlet
java.lang.IncompatibleClassChangeError: Implementing class
    at com.google.appengine.runtime.Request.process-139e1bda14d5aebc(Request.java)
    at java.lang.ClassLoader.defineClass1(Native Method)
    at java.lang.ClassLoader.defineClass(ClassLoader.java:634)
    at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142)
    at java.net.URLClassLoader.defineClass(URLClassLoader.java:277)
    at sun.reflect.GeneratedMethodAccessor5.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:616)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:266)
    at com.sun.jersey.api.core.ScanningResourceConfig.init(ScanningResourceConfig.java:79)
    at com.sun.jersey.api.core.PackagesResourceConfig.init(PackagesResourceConfig.java:104)
    at com.sun.jersey.api.core.PackagesResourceConfig.<init>(PackagesResourceConfig.java:78)
    at com.sun.jersey.api.core.PackagesResourceConfig.<init>(PackagesResourceConfig.java:89)
    at com.sun.jersey.spi.container.servlet.WebComponent.createResourceConfig(WebComponent.java:700)
    at com.sun.jersey.spi.container.servlet.WebComponent.createResourceConfig(WebComponent.java:678)
    at com.sun.jersey.spi.container.servlet.WebComponent.init(WebComponent.java:203)
    at com.sun.jersey.spi.container.servlet.ServletContainer.init(ServletContainer.java:374)
    at com.sun.jersey.spi.container.servlet.ServletContainer.init(ServletContainer.java:557)
    at javax.servlet.GenericServlet.init(GenericServlet.java:212)
    at org.mortbay.jetty.servlet.ServletHolder.initServlet(ServletHolder.java:440)
    at org.mortbay.jetty.servlet.ServletHolder.doStart(ServletHolder.java:263)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
    at org.mortbay.jetty.servlet.ServletHandler.initialize(ServletHandler.java:685)
    at org.mortbay.jetty.servlet.Context.startContext(Context.java:140)
    at org.mortbay.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1250)
    at org.mortbay.jetty.handler.ContextHandler.doStart(ContextHandler.java:517)
    at org.mortbay.jetty.webapp.WebAppContext.doStart(WebAppContext.java:467)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
    at com.google.tracing.TraceContext$TraceContextRunnable.runInContext(TraceContext.java:452)
    at com.google.tracing.TraceContext$TraceContextRunnable$1.run(TraceContext.java:458)
    at com.google.tracing.TraceContext.runInContext(TraceContext.java:698)
    at com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContextNoUnref(TraceContext.java:336)
    at com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContext(TraceContext.java:328)
    at com.google.tracing.TraceContext$TraceContextRunnable.run(TraceContext.java:456)
    at java.lang.Thread.run(Thread.java:679)**** 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-11-25T15:50:37.307

此异常是由 asm-4.0.jar 和 asm-3.1.jar 之间的兼容性问题引起的。使用新版本的 AppEngine，使用 asm-4.0.jar，它与依赖 asm-3.1.jar 的 Jersey 不兼容。要使 Jersey 仍可在 GAE 1.7 上运行，您必须删除对 asm-4.0.jar 的依赖。

看到这篇文章：[http ://cloudvane.com/2012/09/23/problem-with-google-appengine-and-jersey-with-java/](http://cloudvane.com/2012/09/23/problem-with-google-appengine-and-jersey-with-java/)

它经过测试和验证，如下所示：

1.  将 asm-3.3.1.jar 添加到您的 war->lib
2.  将其添加到您重新构建路径
3.  物理删除 asm-4.0.jar
4.  项目 -> 属性 -> Google -> AppEngine：将 Datanuclueus 切换到 v1

而已！

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-03T02:16:53.903

[这篇文章](http://web.archive.org/web/20121214014810/http://blog.harrywye.com/post/30160964741/running-java-jersey-with-jdo-3-0-on-google-app-engine)的说明解决了我的问题。

显然 jersey-server 1.13 jar 与 asm3.1 兼容，而 GAE 1.7.1 需要 ASM 4。使用 Jar 重新打包工具 jarjar，您可以部署一个与 asm 4 一起使用的 asm 3.1 jar。

如果 1.4 给出错误消息，您可能需要使用 JarJar 版本 1.3。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-05-08T13:37:33.680

新 Jersey 版本 1.18.1 不依赖于 Asm 3，因此它与 GAE 兼容！

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-29T13:08:36.777

也许这会有所帮助：[java.lang.IncompatibleClassChangeError：实现类 Mongo](https://stackoverflow.com/a/10475430/471481)

它不是完全相同的类，但是当您有一个包含 2 个不同版本 jar 的库时会出现问题。确保您没有包含任何额外的库或（我将解释发生在我身上的事情）：

你有 A-1.0.jar 和 A-1.0.jar 在另一个 jar 中，比如说 B-1.0.jar，但是你已经单独包含了一个 B-2.0.jar，这样两个不同版本的 B jar 就是问题所在.

确保你没有这样做。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-29T15:08:42.040

这里有同样的问题，但我相信我已经解决了！

诀窍是在 eclipse 内部运行干净，它通知我以下错误：

```
java.lang.RuntimeException: Unexpected exception
    at com.google.appengine.tools.enhancer.Enhancer.execute(Enhancer.java:76)
    at com.google.appengine.tools.enhancer.Enhance.<init>(Enhance.java:71)
    at com.google.appengine.tools.enhancer.Enhance.main(Enhance.java:51)
Caused by: java.lang.reflect.InvocationTargetException
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at com.google.appengine.tools.enhancer.Enhancer.execute(Enhancer.java:74)
    ... 2 more
Caused by: org.datanucleus.exceptions.NucleusUserException: You seem to have ASM v3 in the CLASSPATH and you need ASM v4
    at org.datanucleus.enhancer.DataNucleusEnhancer.<init>(DataNucleusEnhancer.java:173)
    at org.datanucleus.enhancer.DataNucleusEnhancer.main(DataNucleusEnhancer.java:1133)
    ... 7 more 
```

重要的一点。. .

**原因：org.datanucleus.exceptions.NucleusUserException：您似乎在 CLASSPATH 中有 ASM v3，您需要 ASM v4**

显然，GAE 不喜欢加载两个版本的 ASM。一时兴起，我进入了 eclipse 项目属性并将 datanucleus 版本从 v2 更改为 v1。我重新部署了，现在我的应用程序可以工作了。在本地开发环境中捕获这些类型的问题非常重要。. .

我想我花在配置 GAE 上运行 jersey 的时间比我实际编写应用程序的时间还要多。这可能是我的第一个也是最后一个 GAE 托管应用程序。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-10-31T16:24:44.300

我在使用 Jersey-1.11 开发 REST 服务的 maven 项目中遇到此错误：cglib-3.0 依赖于 asm-4.0，因此我将其排除在外，留下 asm-3.0。这是因为我使用的 Jersey 版本使用的是 asm-3.0。

```
<dependency>
    <groupId>cglib</groupId>
    <artifactId>cglib</artifactId>
    <version>3.0</version>
    <exclusions>
        <exclusion>
            <artifactId>asm</artifactId>
            <groupId>org.ow2.asm</groupId>
        </exclusion>
    </exclusions>
</dependency> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-29T12:25:10.433

您是否更新了应用引擎的 SDK？（最近 App 引擎 SDK 从 1.7.0 更新到 1.7.1。）

尝试将您的应用引擎的 SDK 恢复为 1.7.0。我尝试了许多在 Internet 上找到的解决方案，但没有一个对我有用，但这个有效。

我现在不知道如何安全地更改我的应用程序引擎项目的 sdk 版本。如果有人知道如何更改应用程序的 SDK 版本，请告诉我。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-02-04T05:59:28.007

我将持久性从 JAP2 更改为 JPA1，它对我有用。

# c++ - 没有调用`list ::end()` 效率低下？

> ID：12166385
> 
> 赞同：6
> 
> 时间：2012-08-28T19:41:14.863
> 
> 标签：c++, iterator

在一本 C++ 编程书中，我看到了以下`std::list`迭代器：

```
for (iterator = list.start(); iterator != list.end(); iterator++) 
```

一直打电话不是效率低`list.end()`吗？将结尾保存到另一个变量会更好，还是 C++ 编译器（即 g++）会自动处理这个问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-28T19:43:43.473

`list::end()`应该具有恒定的时间复杂度，特别是对于链表，这意味着它可能非常有效。

如果您的算法允许，存储该值可能会稍微更有效（同样，对于特别是链表，差异不太可能很大）。

哦，请阅读史蒂夫·杰索普关于自己测试效率的回答！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-28T19:44:48.827

不太可能有任何区别。

标准容器函数是内联的，所以应该没有明显的函数调用开销。剩下的就是优化器是否足够聪明，可以避免不必要的开销，而这些开销对于执行比较并不是绝对必要的。例如：它实际上是创建一个临时`list::iterator`对象，填充其当前位置字段，然后读回该字段，还是比较最终只是一个值`iterator`与列表头部的值之间的指针比较？

即使有一些不必要的开销，与递增迭代器相比，它可能可以忽略不计，与循环体相比甚至可以忽略不计。

你可以测试它，这比猜测更可靠。记住启用优化——在没有优化的情况下测试性能有点像说如果布莱克从热身赛道走到公共汽车的速度更快，布莱克必须比博尔特快。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-28T19:45:18.433

一般来说，不，它不是低效的。`end()`通常是一个内联函数，编译器会生成好的代码来做任何事情。更重要的是，与什么相比效率低下？是的，您可以添加代码来创建一个变量来保存结果，这可能会或可能不会比简单地调用`end()`. 这样的改变似乎不太可能产生足够大的速度差异，从而将一个太慢的程序变成满足要求的程序。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-08-28T19:54:17.117

调用`std::list<T>::end()`不太可能是一个大的效率问题，可能只是读取一个值。但是，您会给编译器一个提示，它并不意味着通过将其存储为变量来进行更改。对于其他容器，除了读取涉及更多的基地址之外，还可能涉及计算。仍然没有什么戏剧性的，但可能值得避免。

但是请注意，它也可能会改变循环的语义：如果循环的主体可以附加元素，则前一个末端可能会移动。有趣的是，我在标准中没有找到任何具体要求，说明`std::list<T>::end()`在将元素插入容器时是否会发生变化（我可以想象它确实发生变化的实现以及一些没有发生变化的实现；很可能它不会改变，尽管）。如果您还想在修改列表时获得有保证的行为，您可能会`list.end()`在每次迭代中调用。

顺便说一句，我对使用`iterator++`而不是有更大的性能问题`++iterator`，尤其是作者在书中使用的内容。尽管如此，这是一个微优化，就像存储`list.end()`一个便宜的结果一样。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-28T19:44:39.623

在实践中，对于 STL 容器来说，`container::end()`是极其便宜的。事实上，C++ 标准**规定**了几个类（如果不是全部）的几种方法的算法复杂性，并且`container::end()`始终是常数时间。

此外，编译器可以自由地内联这些方法，基本上消除了它可能产生的任何开销。除了存储它之外，我想不出其他方法可以在恒定时间内获取列表的末尾，因此您的`list.end()`调用可能最终成为字段访问，这在 x86 平台上并不比将其存储在堆栈中更昂贵。

您的里程可能会因其他收藏而异，但可以肯定的是，这`list.end()`不会成为您的瓶颈。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-28T19:45:21.553

如果您需要进行微优化，可以。

一般来说，调用`list.end()`不会有显着的性能损失，也可能不会成为问题。它可能每次调用都返回相同的值，也可能是内联的，等等。虽然不*慢*，但确实需要一些时间。

如果你绝对需要速度，你想使用`for (iterator = list.start(), end = list.end; iteration != end; ++iterator)`. 这会缓存结束迭代器（并执行 pre-inc），并且不应重复调用。

第二种类型通常是不必要的，但如果`.end()`价格昂贵或循环非常大，可能会有用。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-08-28T19:54:18.267

虽然过早的优化是邪恶的，但良好的习惯却不是。如果您不希望循环终止条件发生变化，即您没有更改容器，则可以使用此模式：

```
for (mylist::iterator it = alist.begin(), finish = alist.end();  it != finish;  ++it) 
```

如果编译器无法确定容器没有发生变化，则编译器不太可能为您进行此优化。

请注意，这不太可能产生可测量的时间差异，但不会造成伤害。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-07-24T18:22:55.333

`end()`不缓存的一个很好的理由`std::list`是它可以防止您犯以下错误：

```
for (iterator = list.rstart(), end = list.rend(); iterator != end; iterator++) {
    // modify list 
```

当您在 中进行修改时，任何迭代器都不会失效`std::list`，但`rend`它不是哨兵（它指向底层列表的第一个元素），这意味着如果您附加到反向列表的末尾，它将不再是列表的末尾列表（又名添加到未反转列表的开头。）

# jsf-2 - 如何动态生成richfaces标签

> ID：12166386
> 
> 赞同：1
> 
> 时间：2012-08-28T19:41:14.850
> 
> 标签：jsf-2, primefaces, richfaces

我想知道是否可以动态生成richfaces选项卡*而不*将组件绑定到支持bean并循环通过数组来填充它？我问这个是因为这个`@ViewsScoped` [错误](http://java.net/jira/browse/JAVASERVERFACES-1492)会使这样的解决方案在许多情况下无用。Primefaces 为其许多容器组件提供了动态生成的选项卡，但出于多种原因，我真的更喜欢在这里使用richfaces。感谢您的输入。

# ruby - 加快 csv 导入

> ID：12166389
> 
> 赞同：5
> 
> 时间：2012-08-28T19:41:27.457
> 
> 标签：ruby, optimization, csv, fastercsv

我想导入大量的 cvs 数据（不是直接到 AR，而是在一些获取之后），而且我的代码很慢。

```
def csv_import 
    require 'csv'
    file = File.open("/#{Rails.public_path}/uploads/shate.csv")
    csv = CSV.open(file, "r:ISO-8859-15:UTF-8", {:col_sep => ";", :row_sep => :auto, :headers => :first_row})

    csv.each do |row|
      #ename,esupp= row[1].split(/_/) 
      #(ename,esupp,foo) = row[1]..split('_')
      abrakadabra = row[0].to_s()
      (ename,esupp) = abrakadabra.split(/_/)
      eprice = row[6]
      eqnt = row[1]
      # logger.info("1) ")
      # logger.info(ename)
      # logger.info("---")
      # logger.info(esupp)
      #----
      #ename = row[4]
      #eprice = row[7]
      #eqnt = row[10]
      #esupp = row[12]

        if ename.present? && ename.size>3
        search_condition = "*" + ename.upcase + "*"     

        if esupp.present?
          #supplier = @suppliers.find{|item| item['SUP_BRAND'] =~ Regexp.new(".*#{esupp}.*") }
          supplier = Supplier.where("SUP_BRAND like ?", "%#{esupp}%").first
          logger.warn("!!! *** supp !!!")
          #logger.warn(supplier)
        end

        if supplier.present?

          @search = ArtLookup.find(:all, :conditions => ['MATCH (ARL_SEARCH_NUMBER) AGAINST(? IN BOOLEAN MODE)', search_condition.gsub(/[^0-9A-Za-z]/, '')])
          @articles = Article.find(:all, :conditions => { :ART_ID => @search.map(&:ARL_ART_ID)})
          @art_concret = @articles.find_all{|item| item.ART_ARTICLE_NR.gsub(/[^0-9A-Za-z]/, '').include?(ename.gsub(/[^0-9A-Za-z]/, '')) }

          @aa = @art_concret.find{|item| item['ART_SUP_ID']==supplier.SUP_ID} #| @articles
          if @aa.present?
            @art = Article.find_by_ART_ID(@aa)
          end

          if @art.present?
            @art.PRICEM = eprice
            @art.QUANTITYM = eqnt
            @art.datetime_of_update = DateTime.now
            @art.save
          end

        end
        logger.warn("------------------------------")       
      end

      #logger.warn(esupp)
    end
 end 
```

即使我删除并只得到这个，它也很慢。

```
def csv_import 
    require 'csv'
    file = File.open("/#{Rails.public_path}/uploads/shate.csv")
    csv = CSV.open(file, "r:ISO-8859-15:UTF-8", {:col_sep => ";", :row_sep => :auto, :headers => :first_row})

    csv.each do |row|
    end
end 
```

有人可以帮助我使用fastcsv提高速度吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T20:17:31.567

正如它的名字所暗示的那样，更快的 CSV 会更快：）

[http://fastercsv.rubyforge.org](http://fastercsv.rubyforge.org)

也见。了解更多信息

[Ruby on Rails 从 CSV 迁移到 FasterCSV](https://stackoverflow.com/questions/2264294/ruby-on-rails-moving-from-csv-to-fastercsv?rq=1)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T13:00:09.553

我不认为它会变得更快。

也就是说，一些测试表明大部分时间都花在了转码上（我的测试用例大约占 15%）。因此，如果您可以跳过它（例如，已经在 UTF-8 中创建 CSV），您会看到一些改进。

此外，根据[ruby​​-doc.org](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/csv/rdoc/CSV.html#method-c-foreach)，读取 CSV 的“主要”接口是 `foreach`，所以应该首选：

```
def csv_import
  import 'csv'
  CSV.foreach("/#{Rails.public_path}/uploads/shate.csv", {:encoding => 'ISO-8859-15:UTF-8', :col_sep => ';', :row_sep => :auto, :headers => :first_row}) do | row |
    # use row here...
  end
end 
```

**更新**

您也可以尝试将解析拆分为多个线程。我在尝试使用此代码时达到了一些性能提升（标题遗漏的处理）：

```
N = 10000
def csv_import
  all_lines = File.read("/#{Rails.public_path}/uploads/shate.csv").lines
  # parts will contain the parsed CSV data of the different chunks/slices
  # threads will contain the threads
  parts, threads = [], []
  # iterate over chunks/slices of N lines of the CSV file
  all_lines.each_slice(N) do | plines |
    # add an array object for the current chunk to parts
    parts << result = []
    # create a thread for parsing the current chunk, hand it over the chunk 
    # and the current parts sub-array
    threads << Thread.new(plines.join, result) do  | tsrc, tresult |
      # parse the chunk
      parsed = CSV.parse(tsrc, {:encoding => 'ISO-8859-15:UTF-8', :col_sep => ";", :row_sep => :auto})
      # add the parsed data to the parts sub-array
      tresult.replace(parsed.to_a)
    end
  end
  # wait for all threads to finish
  threads.each(&:join)
  # merge all the parts sub-arrays into one big array and iterate over it
  parts.flatten(1).each do | row |
    # use row (Array)
  end
end 
```

这会将输入分成 10000 行的块，并为每个块创建一个解析线程。每个线程都被移交给数组中的一个子数组`parts`以存储其结果。当所有线程都完成后（之后`threads.each(&:join)`），所有块的结果`parts`都是联合的，就是这样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T17:08:25.037

我很好奇文件有多大，有多少列。

使用 CSV.foreach 是首选方式。在您的应用程序运行时查看内存配置文件会很有趣。（有时速度慢是由于打印造成的，因此请确保不要做超出需要的操作）

您可能能够对其进行预处理，并排除任何没有 esupp 的行，因为看起来您的代码只关心这些行。此外，您可以截断您不关心的任何右侧列。

另一种技术是收集独特的组件并将它们放入哈希中。似乎您多次触发相同的查询。

您只需要分析它并查看它在哪里花费时间。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-13T18:33:06.643

查看 Gem smarter_csv！它可以分块读取 CSV 文件，然后您可以创建 Resque 作业以进一步处理这些块并将其插入数据库。

[https://github.com/tilo/smarter_csv](https://github.com/tilo/smarter_csv)

# java - 如何在 Swing 上将标签控件绑定到入口控件

> ID：12166391
> 
> 赞同：1
> 
> 时间：2012-08-28T19:41:33.307
> 
> 标签：java, swing, jlabel, clarion

在 Swing 中，我们使用标签控件来指示用户在通常情况下在以下“入口”控件中请求什么信息。此条目控件可以是条目、列表框、密码等。

我们可以通知显示的助记符来指示用户按住 Alt 键和加速键将选择关联的条目控件。

这就是我设计表单的方式，但是当我按下 Alt+A 时，例如，“关联”控件没有被选中，当然，因为我不知道如何使用 IDE（Netbeans在这种情况下）。

我知道我可以捕获标签控件生成的事件并以编程方式选择我需要的任何下一个控件，但我真的可以吗？是不是有一种“隐式”的方式来进行两个控件之间的绑定/耦合？

例如，我使用另一种编程语言 Clarion for Windows。在 Clarion 中，我们可以定义 Window 类型的复杂数据结构，如下所示：

```
MyWindow     WINDOW( 'Test' ), GRAY, DOUBLE, CENTER
               PROMPT( '&File Name:' ), AT( 10, 10 )
               ENTRY( @S127 ), USE( szFileName ), AT( 10, 20 )
               PROMPT( '&Status:' ), AT( 50, 10 )
               LIST, FROM( 'Open|#0|Closed|#1' ), USE( ?lstStatus ), AT( 50, 20, 100, 20 )
             END 
```

在上面的示例中，PROMPT 控件隐式绑定到 ENTRY 控件，因为它出现在后者之前，“Status”和“?lstStatus”控件之间也是如此。

RTL 负责处理 Alt+F 以选择 szFileName 控件、生成事件等。不必说这是程序员节省时间的主要功能，因为他/她不需要编写每个选择出现在窗口上的每个提示。

这就是我在 Swing 中寻找的东西。有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T19:56:32.187

你会想要使用[JLabel.setLabelFor](http://docs.oracle.com/javase/7/docs/api/javax/swing/JLabel.html#setLabelFor%28java.awt.Component%29)

这会将标签与指定的控件相关联并允许您使用标签快捷方式选择控件

# php - 发布通知起点

> ID：12166395
> 
> 赞同：-1
> 
> 时间：2012-08-28T19:41:56.283
> 
> 标签：php, jquery, mysql, notifications

我真的需要你们的建议。我已经和 Php、MySql、jQuery 进行了聊天（用户可以发布一些消息）。我进行了很多搜索，但没有发现任何有趣的东西，这将是通知的良好起点。例如，如果 user2 未登录，我想当 user1 写入 msg 我可以在最后一次登录时通知 user2。知道怎么可能做到这一点吗？

PS。我正在考虑按日期时间完成这项任务，我在发布 msg 时有日期时间，但不知道如何与用户联系，可能是注销时间，但我想不可能得到准确的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T19:44:44.590

你需要一个观察者系统。看看[这篇](http://en.wikipedia.org/wiki/Push_technology)维基百科文章。

另外，请查看[Pusher](http://pusher.com/)。

# xcode - Xcode 1）使用滑动手势启动并保持横向模式 2）点击图像时播放音频

> ID：12166399
> 
> 赞同：0
> 
> 时间：2012-08-28T19:42:21.323
> 
> 标签：xcode, landscape, gesture, swipe

我在编程和使用 Xcode 进行 iPhone 应用程序设计方面相当陌生。我希望执行以下操作：

1.  为儿童应用程序启动并保持横向模式。
2.  使用滑动手势在图像之间移动。每次滑动一张图像。

我的问题是这样的：

即使以横向模式启动，并且在轻扫之后，iphone 模拟器也会旋转到纵向模式。

非常感谢任何建议或评论。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T20:05:18.277

您必须在 shouldAutorotateToInterfaceOrientation: 中定义您支持的模式。

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {
    return (interfaceOrientation == UIInterfaceOrientationLandscapeLeft) || (interfaceOrientation == UIInterfaceOrientationLandscapeRight);
} 
```

将处理两种横向模式。

# c# - 如何在 C# 中获取文件夹大小？

> ID：12166404
> 
> 赞同：8
> 
> 时间：2012-08-28T19:42:24.883
> 
> 标签：c#, asp.net, size, directory

> **可能重复：**
> [如何在 C# 中获取目录大小（目录中的文件）？](https://stackoverflow.com/questions/1118568/how-do-i-get-a-directory-size-files-in-the-directory-in-c)

在 vbscript 中，以 GB 或 MB 为单位获取文件夹大小非常简单：

```
Set oFSO = CreateObject("Scripting.FileSystemObject")
Dim fSize = CInt((oFSO.GetFolder(path).Size / 1024) / 1024)
WScript.Echo fSize 
```

在 C# 中，通过我的所有搜索，我所能想到的只是对所有子文件夹中的每个文件大小进行长而复杂的递归搜索，然后在最后将它们全部加起来。

难道没有别的办法了吗？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-08-28T19:44:42.147

这个怎么样：

```
private static long GetDirectorySize(string folderPath)
{
    DirectoryInfo di = new DirectoryInfo(folderPath);
    return di.EnumerateFiles("*", SearchOption.AllDirectories).Sum(fi => fi.Length);
} 
```

从[这里](https://stackoverflow.com/a/5942656/74757)。

这将为您提供以字节为单位的大小；您将不得不将其“美化”为 GB 或 MB。

**注意：**这仅适用于 .NET 4+。

**编辑：**根据我链接到的线程中的评论将通配符搜索从更改`"*.*"`为。`"*"`这应该将其可用性扩展到其他操作系统（例如，如果使用 Mono）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-28T20:14:56.267

您还可以使用递归来获取所有子目录并对大小求和：

```
public static long GetDirectorySize(string path){
    string[] files = Directory.GetFiles(path);
    string[] subdirectories = Directory.GetDirectories(path);

    long size = files.Sum(x => new FileInfo(x).Length);
    foreach(string s in subdirectories)  
        size += GetDirectorySize(s);

    return size;
} 
```

# java - 如何断言 Iterable 包含具有特定属性的元素？

> ID：12166415
> 
> 赞同：134
> 
> 时间：2012-08-28T19:43:20.433
> 
> 标签：java, unit-testing, junit4, hamcrest

假设我想用这个签名对一个方法进行单元测试：

```
List<MyItem> getMyItems(); 
```

假设`MyItem`是一个具有许多属性的 Pojo，其中之一是`"name"`通过`getName()`.

我关心的只是验证`List<MyItem>`或 any`Iterable`包含两个`MyItem`实例，其`"name"`属性具有值`"foo"`和`"bar"`。如果任何其他属性不匹配，我真的不关心这个测试的目的。如果名称匹配，则测试成功。

如果可能的话，我希望它是单行的。这是我想做的那种事情的一些“伪语法”。

```
assert(listEntriesMatchInAnyOrder(myClass.getMyItems(), property("name"), new String[]{"foo", "bar"}); 
```

Hamcrest 对这类事情有好处吗？如果是这样，我上面的伪语法的 hamcrest 版本到底是什么？

* * *

## 回答 #1

> 赞同：149
> 
> 时间：2012-08-28T21:28:18.883

谢谢@Razvan，他为我指明了正确的方向。我能够在一行中获得它，并且我成功地为 Hamcrest 1.3 找到了进口。

进口：

```
import static org.hamcrest.CoreMatchers.is;
import static org.hamcrest.Matchers.contains;
import static org.hamcrest.MatcherAssert.assertThat;
import static org.hamcrest.beans.HasPropertyWithValue.hasProperty; 
```

编码：

```
assertThat( myClass.getMyItems(), contains(
    hasProperty("name", is("foo")), 
    hasProperty("name", is("bar"))
)); 
```

* * *

## 回答 #2

> 赞同：55
> 
> 时间：2012-08-28T19:45:33.317

尝试：

```
assertThat(myClass.getMyItems(),
                          hasItem(hasProperty("YourProperty", is("YourValue")))); 
```

* * *

## 回答 #3

> 赞同：54
> 
> 时间：2015-10-19T09:50:43.110

它不是特别是 Hamcrest，但我认为这里值得一提。我在 Java8 中经常使用的是：

```
assertTrue(myClass.getMyItems().stream().anyMatch(item -> "foo".equals(item.getName()))); 
```

*（编辑为 Rodrigo Manyari 的轻微改进。它不那么冗长。见评论。）*

它可能有点难以阅读，但我喜欢这种类型和重构安全性。组合测试多个 bean 属性也很酷。例如，在过滤器 lambda 中使用类似 java 的 && 表达式。

* * *

## 回答 #4

> 赞同：47
> 
> 时间：2018-08-12T19:33:55.300

AssertJ 提供了一个出色的功能`extracting()`：您可以传递`Function`s 来提取字段。它在编译时提供检查。
您也可以轻松地先断言大小。

它会给：

```
import static org.assertj.core.api.Assertions;

Assertions.assertThat(myClass.getMyItems())
          .hasSize(2)
          .extracting(MyItem::getName)
          .containsExactlyInAnyOrder("foo", "bar"); 
```

`containsExactlyInAnyOrder()`断言列表仅包含这些值，无论顺序如何。

要断言列表包含这些值，无论顺序如何，但也可能包含其他值，请使用`contains()`：

```
.contains("foo", "bar"); 
```

* * *

附带说明：要从 a 的元素断言多个字段`List`，使用 AssertJ 我们通过将每个元素的预期值包装到一个`tuple()`函数中来做到这一点：

```
import static org.assertj.core.api.Assertions;
import static org.assertj.core.groups.Tuple;

Assertions.assertThat(myClass.getMyItems())
          .hasSize(2)
          .extracting(MyItem::getName, MyItem::getOtherValue)
          .containsExactlyInAnyOrder(
               tuple("foo", "OtherValueFoo"),
               tuple("bar", "OtherValueBar")
           ); 
```

* * *

## 回答 #5

> 赞同：30
> 
> 时间：2015-12-22T13:39:37.507

[Assertj](https://assertj.github.io/doc/)擅长这一点。

```
import static org.assertj.core.api.Assertions.assertThat;

    assertThat(myClass.getMyItems()).extracting("name").contains("foo", "bar"); 
```

与 hamcrest 相比，assertj 的一大优点是易于使用代码完成。

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2012-08-28T19:51:33.950

只要您的 List 是一个具体的类，只要您在 MyItem 上实现了 equals() 方法，就可以简单地调用 contains() 方法。

```
// given 
// some input ... you to complete

// when
List<MyItems> results = service.getMyItems();

// then
assertTrue(results.contains(new MyItem("foo")));
assertTrue(results.contains(new MyItem("bar"))); 
```

假设您已经实现了一个构造函数，该构造函数接受您要断言的值。我意识到这不是在单行上，但是知道缺少哪个值而不是同时检查两个值很有用。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2019-11-08T12:29:35.360

AssertJ 3.9.1 支持在`anyMatch`方法中直接使用谓词。

```
assertThat(collection).anyMatch(element -> element.someProperty.satisfiesSomeCondition()) 
```

这通常适用于任意复杂条件的用例。

对于简单的条件，我更喜欢使用`extracting`方法（见上文），因为生成的被测迭代可能支持具有更好可读性的值验证。示例：它可以提供专门的 API，例如`contains`Frank Neblung 回答中的方法。或者您可以`anyMatch`稍后调用它并使用方法引用，例如`"searchedvalue"::equals`. 也可以将多个提取器放入`extracting`方法中，随后使用`tuple()`.

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-10-09T08:59:28.373

或者，`hasProperty`您可以尝试具有提取功能[的 hamcrest-more-matchers 匹配器。](https://github.com/seregamorph/hamcrest-more-matchers) `where`在你的情况下，它看起来像：

```
import static com.github.seregamorph.hamcrest.MoreMatchers.where;

assertThat(myClass.getMyItems(), contains(
    where(MyItem::getName, is("foo")), 
    where(MyItem::getName, is("bar"))
)); 
```

这种方法的优点是：

*   如果值是在 get 方法中计算的，并不总是可以按字段验证
*   如果不匹配，应该有一个带有诊断的失败消息（注意已解决的方法参考**MyItem.getName**：

```
Expected: iterable containing [Object that matches is "foo" after call
MyItem.getName, Object that matches is "bar" after call MyItem.getName]
     but: item 0: was "wrong-name" 
```

*   它适用于 Java 8、Java 11 和 Java 14

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-09-15T13:06:07.020

使用 Stream，您还可以：

```
List<String> actual = myList.stream().map(MyClass::getName).collect(toList());
assertThat(actual, hasItem("expectedString1")); 
```

因为使用`anyMatch()`or `allMatch()`，您知道列表中的**某些**值在列表中，但是您的实际列表可能仅包含 5 个值，而`anyMatch()`您有 6 个；您不知道是否**所有**值都存在。使用`hasItem()`，您确实检查了您想要的每个值。

# javascript - 从 jquery 数据属性值进行查询

> ID：12166422
> 
> 赞同：1
> 
> 时间：2012-08-28T19:43:35.927
> 
> 标签：javascript, jquery

我可以得到很好的结果，但是每个数据值结果都用逗号分隔，因为它是一个数组。我想在没有任何逗号的情况下进行查询，并可能删除最后一个 AND。

那可能吗 ？

jQuery

```
//Submit Adv Search
    $('#submitAdvSearch').click(function(){
        var query = "SELECT * FROM table WHERE ";
        var yo = $('.subCat span[data-value].checked').map(function(){
            return $(this).attr('data-value')+'=1 AND ';
        }).get();

        console.log(query+' '+yo);
    }); 
```

HTML

```
<div class="cat">
    <div class="catTitle">
        <h2>Performance</h2>
        <span class="arrow"></span>
        <br class="clear"/>
    </div>
    <div class="subCat" data-cat="performance">
        <div>

                <span data-all="all">&#9675;&nbsp;Tous</span><br>
            <div class="after">
                <span data-value="30000_doublefrotements" class="checked">&#9675;&nbsp;+30,000 double frottement</span><br>
                <span data-value="atcc96_lavablecommercial">&#9675;&nbsp;ATTCC 96</span><br>
                <span data-value="nfpa701_inifuge">&#9675;&nbsp;NFPA 701</span><br>
                <span data-value="resistanrayonsuv">&#9675;&nbsp;Uv résistant</span>
            </div>
        </div>
    </div>
</div>

<div class="cat">
    <div class="catTitle">
        <h2>Style</h2>
        <span class="arrow"></span>
        <br class="clear"/>
    </div>
    <div class="subCat" data-cat="style">
        <div>

                <span data-all="all">&#9675;&nbsp;Tous</span><br>
            <div class="after">
                <span data-value="contemporain" class="checked">&#9675;&nbsp;Contemporain</span><br>
                <span data-value="traditionnel">&#9675;&nbsp;Traditionel</span><br>
                <span data-value="transitionnel" class="checked">&#9675;&nbsp;Transitionel</span>
            </div>
        </div>
    </div>
</div>
<div id="submitAdvSearch">Submit</div> 
```

结果

```
SELECT * FROM table WHERE  30000_doublefrotements=1 AND ,contemporain=1 AND ,transitionnel=1 AND 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T19:49:00.603

用于在每个条件之间`join(" AND ")`连接s：`AND`

```
var yo = $('.subCat span[data-value].checked').map(function() {
  return $(this).attr('data-value')+'=1';
}).get();
console.log(query + yo.join(" AND ")); 
```

[这](http://jsfiddle.net/Z2sfQ/)会给你：

`SELECT * FROM table WHERE 30000_doublefrotements=1 AND contemporain=1 AND transitionnel=1`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T19:49:15.890

试试这个：

```
//Submit Adv Search
$('#submitAdvSearch').click(function(){
    var query = "SELECT * FROM table WHERE ";
    var yo = $('.subCat span[data-value].checked').map(function(){
        return $(this).attr('data-value')+'=1 AND ';
    }).get();
    yo = yo.join(' ').replace(/\s*AND\s*$/, '');

    console.log(query+' '+yo);
});​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T19:56:55.120

这对我有用：

```
//Submit Adv Search
$('#submitAdvSearch').click(function(){
    var query = "SELECT * FROM table WHERE ";
    var where_clause = [];
    var yo = $('.subCat span[data-value].checked').map(function(){
        var item = $(this).attr('data-value')+'=1';
        where_clause.push(item);           
    }).get();

    console.log(query+' '+ where_clause.join(" AND "));
}); 
```

# vim - 在 Vim 中以匹配的大括号/括号为目标的运动？

> ID：12166437
> 
> 赞同：11
> 
> 时间：2012-08-28T19:44:44.213
> 
> 标签：vim, macvim

因此，Vim 与大多数具有编程意识的文本编辑器一样，会突出显示匹配的“范围”字符（例如`(`and `)`、`<`and`>`和`{`and `}`）。

我想知道，有没有动议从另一个人那里接触到那个角色？就像，用 a 上的插入符号`<`移动到（突出显示的）匹配`>`？

我知道 [action]`t>`或 [action]`f>`会完成类似的事情。这不是我要问的。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-08-28T19:48:35.360

议案是：`%`。

单独使用时，它会根据`matchpairs`期权的价值在开/关对之间跳转。

但尖括号 - `<>`-默认情况下*不*包括在内。它们可以基于`filetype`. HTML 文件类型插件设置它，因此如果您打开 HTML 文件，您将能够`%`在匹配的尖括号之间跳转。但不适用于例如 C++/Java。

要在使用 时添加尖括号，如果它们没有被跳转`%`，请使用：

```
:set matchpairs+=<:> 
```

现在使用`%`尖括号应该跳转到匹配的括号。

请参阅`:help 'matchpairs'`和`:help various-motions`-`%`是第一个提到的 - 了解更多详细信息。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-08-28T19:47:29.897

是的，`%`按键可以做到这一点。有关更多信息，请参阅[移至匹配大括号](http://vim.wikia.com/wiki/Moving_to_matching_braces)。

# html - 社交媒体按钮未正确排列

> ID：12166442
> 
> 赞同：0
> 
> 时间：2012-08-28T19:44:52.087
> 
> 标签：html, css, facebook-social-plugins

我已将我的社交媒体 Div 放置在 Review Div 的右侧：http: [//jsfiddle.net/eYQWE/](http://jsfiddle.net/eYQWE/)

**问题：**我的社交媒体 div 中的社交媒体按钮不会保持在一条直线上。他们一直低于我的评论部门。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T19:58:41.967

问题是来自 facebook 的 iframe 的宽度为 450 像素，这会拉伸其父级并使按钮出现在文本下方。尝试为包装器设置固定宽度，如下所示：

```
#social li {
display: inline-block;
text-decoration: none;
padding: 0 0 0 33px;
float: left;
max-width: 80px;
overflow: hidden;
}​ 
```

我添加了最后两行，现在它似乎工作得很好。
更好的解决方案是完全删除 iframe，并使用 Facebook（或 Twitter 和 G+）提供的 API 编写自己的按钮。这将允许您完全按照您的意愿设置它们的样式，并且可能会改善您的页面加载时间。但也许这让事情有点过分了......

更新的小提琴可以在这里找到：http: [//jsfiddle.net/eYQWE/2/](http://jsfiddle.net/eYQWE/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T19:53:51.880

它是 facebook iframe，宽度设置为 450px，如果您可以更改生成的代码，您可以在那里修复它，否则您必须使用 css/js 重置。在这种情况下，Firebug 将是您最好的朋友（如果还没有的话）。

# android - 简单跳转到另一个页面

> ID：12166443
> 
> 赞同：2
> 
> 时间：2012-08-28T19:44:53.520
> 
> 标签：android, android-intent

我想在点击我的按钮后转到另一个页面。但我只是得到错误。这是我的代码：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_anime_paradise_t1);

    Button list = (Button) findViewById(R.id.list);
    list.setText("List");
    list.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
            Intent intent = new Intent(AnimeParadiseT1.this, View.class);
            startActivity(intent);
        }
    }); 
```

在`View`课堂上：

```
public class View extends Activity{
     @Override
     protected void onCreate(Bundle savedInstanceState) {
         // TODO Auto-generated method stub
         super.onCreate(savedInstanceState);
         setContentView(R.layout.list);
     }
} 
```

太奇怪了。也看看我的 logCat：

```
08-29 00:12:32.910: D/AndroidRuntime(1582): Shutting down VM
08-29 00:12:32.910: W/dalvikvm(1582): threadid=1: thread exiting with uncaught exception (group=0x40203560)
08-29 00:12:32.920: E/AndroidRuntime(1582): FATAL EXCEPTION: main
08-29 00:12:32.920: E/AndroidRuntime(1582): android.content.ActivityNotFoundException: Unable to find explicit activity class {com.animeparadise/android.view.View}; have you declared this activity in your AndroidManifest.xml?
08-29 00:12:32.920: E/AndroidRuntime(1582):     at android.app.Instrumentation.checkStartActivityResult(Instrumentation.java:1405)
08-29 00:12:32.920: E/AndroidRuntime(1582):     at android.app.Instrumentation.execStartActivity(Instrumentation.java:1379)
08-29 00:12:32.920: E/AndroidRuntime(1582):     at android.app.Activity.startActivityForResult(Activity.java:2827)
08-29 00:12:32.920: E/AndroidRuntime(1582):     at android.app.Activity.startActivity(Activity.java:2933)
08-29 00:12:32.920: E/AndroidRuntime(1582):     at com.animeparadise.AnimeParadiseT1$1.onClick(AnimeParadiseT1.java:29)
08-29 00:12:32.920: E/AndroidRuntime(1582):     at android.view.View.performClick(View.java:2506)
08-29 00:12:32.920: E/AndroidRuntime(1582):     at android.view.View$PerformClick.run(View.java:9112)
08-29 00:12:32.920: E/AndroidRuntime(1582):     at android.os.Handler.handleCallback(Handler.java:587)
08-29 00:12:32.920: E/AndroidRuntime(1582):     at android.os.Handler.dispatchMessage(Handler.java:92)
08-29 00:12:32.920: E/AndroidRuntime(1582):     at android.os.Looper.loop(Looper.java:130)
08-29 00:12:32.920: E/AndroidRuntime(1582):     at android.app.ActivityThread.main(ActivityThread.java:3835)
08-29 00:12:32.920: E/AndroidRuntime(1582):     at java.lang.reflect.Method.invokeNative(Native Method)
08-29 00:12:32.920: E/AndroidRuntime(1582):     at java.lang.reflect.Method.invoke(Method.java:507)
08-29 00:12:32.920: E/AndroidRuntime(1582):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:858)
08-29 00:12:32.920: E/AndroidRuntime(1582):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)
08-29 00:12:32.920: E/AndroidRuntime(1582):     at dalvik.system.NativeStart.main(Native Method)
08-29 00:12:34.061: I/Process(1582): Sending signal. PID: 1582 SIG: 9 
```

还有一件事。我只是将`View`类定义为`Activity`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T19:47:59.073

> 08-29 00:12:32.920: E/AndroidRuntime(1582): android.content.ActivityNotFoundException: 找不到明确的活动类 {com.animeparadise/ **android.view.View** };

检查你的`import`陈述。`View`是 Android ( `android.view.View`) 中的现有类。当你创建你`View`的.`com.animeparadise.View.class``Intent`

此外，正如其他人所建议的那样，您应该重命名您的活动以避免这种混淆，并遵守以单词`Activity`（例如，`ViewActivity`）结束类名的常见做法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T19:47:10.820

[编辑]

`android.view.View`已经存在。这就是问题所在（因此错误中的“android.view.View”部分）：创建意图的类包含错误的`View`类。

只需将您的`View`课程重命名为任何名称。并按 CTRL-SHIFT-O 修复您的导入；）

（并确保您的 AndroidManifest.xml 包含`<activity android:name=".WhateverClassNameYouChose"/>`在该`<application>`部分中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T19:52:59.960

将您的课程添加到您的 AndroidManifest.xml 文件中，例如

```
 <activity
            android:name=".View"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity> 
```

**或者**

检查此[链接](http://developer.android.com/guide/topics/manifest/manifest-intro.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-28T19:57:35.850

你应该在你的 AndroidManifest 文件中添加这样的东西：

```
<activity
    android:name = ".View"
    android:label="my new Activity" >
</activity> 
```

另外我建议您更改活动的名称，因为 View 是 Android 上的一个非常重要的类（[View](http://developer.android.com/reference/android/view/View.html)）。

希望能帮助到你！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-29T11:11:25.453

养成仔细阅读Logcat的习惯，报错是，

```
ActivityNotFoundException: Unable to find explicit activity class {com.animeparadise/android.view.View}; have you declared this activity in your AndroidManifest.xml? 
```

这是因为您没有在 android 清单文件中声明您的活动，

将此代码写入您的 android 清单文件中，

```
<activity
            android:name=".View"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.VIEW" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity> 
```

如果不起作用，请尝试更改活动的名称，因为 View 是预定义的类，两个类的名称可能会导致冲突..

# javascript - jquery自动选择“更改”而不是“选择”的操作

> ID：12166449
> 
> 赞同：1
> 
> 时间：2012-08-28T19:45:03.413
> 
> 标签：javascript, jquery, html, jquery-ui, jquery-ui-autocomplete

希望这是有道理的。我有一个使用 jQuery UI 自动选择功能的文本输入。当用户选择时，输入会自动填充，这是应该的。我的问题是，如果用户输入了某些内容，但没有从下拉列表中选择。这会导致文本输入值在表单提交时列表中不存在。我想知道是否有办法对“更改”事件执行操作（明文输入值），但将其保留为“选择”事件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T02:17:19.437

如果我对您的理解正确，您应该能够利用`ui`传递给`change`事件处理程序的参数：

```
$("#auto").autocomplete({
    /* options */
    change: function (event, ui) {
        if (!ui.item) {
            this.value = '';
        }
    }
}); 
```

`ui.item``undefined`如果未从自动完成候选列表中选择任何内容，将是。

**示例：http:** [//jsfiddle.net/ZBzpF/](http://jsfiddle.net/ZBzpF/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T22:29:27.863

在更改事件处理程序中，检查当前值是否在源中，如果没有，则重置它。就像是：

```
var sourceArray = ["a", "b", "c"],
$autocomplete = $('#autocomplete');
$autocomplete.autocomplete({
    source: ,
    change: function(e, ui) {
        if ($.inArray($autocomplete.val(), sourceArray) === -1) {
            //change the value
        }
    })
} 
```

# ruby-on-rails - 在 Rails API 应用程序中使用版本控制 - 无法为特定控制器操作呈现 JSON

> ID：12166455
> 
> 赞同：0
> 
> 时间：2012-08-28T19:45:20.713
> 
> 标签：ruby-on-rails, api, versioning, rabl

我创建了一个练习 rails 应用程序，我在其中创建了一个命名空间，并在此[railscast](http://railscasts.com/episodes/350-rest-api-versioning?autoplay=true)中演示了版本。一切正常，我可以在浏览器中看到 json 输出

然后我添加了 Rabl gem 并试图渲染 rabl 视图，但我在浏览器中得到了一个空的 JSON 数组

这是我系统地为使版本控制工作所做的工作

```
1) changed the routes file to look like this

App0828::Application.routes.draw do

 namespace :api, defaults: { format: 'json'} do
   namespace :v1 do
    resources :vendors
   end
 end

  #resources :vendors
  #root to: 'vendors#index'
end

2) The created thise files
    app/copntrollers/api/v1/vendors_controller.rb

  Inside the vendors_controller.rb I added the following code

 module Api
  module V1
  class VendorsController < ApplicationController

  class Vendor < ::Vendor
    #subclass vendor class so thatyou can extend its behaviour just for this version
    #add any functions specific to this version here
    end

  respond_to :json

  def index
    respond_with Vendor.all       
  end

  def show
    respond_with Vendor.find(params[:id])
  end
  ..........

3) Then I pointed my browser to this url "http://localhost:3000/api/v1/vendors"
   And I can see the json output in my browser

4) Then I added the rabl gem
5) restarted the server
6) Changed the above file at    app/copntrollers/api/v1/vendors_controller.rb
   from the version above to the version below

  module Api
   module V1
   class VendorsController < ApplicationController

    class Vendor < ::Vendor
      #subclass vendor class so thatyou can extend its behaviour just for this version
      #add any functions specific to this version here
    end

    respond_to :json

  def index
    render 'api/v1/index.json.rabl'
   end

  def show
    render 'api/v1/show.json.rabl'
  end

  .......
 7) I created the following files with this code:
     file: app/views/api/v1/show.json.rabl
     code:    object @vendor
              attributes :id, :name

     file: app/views/api/v1/index.json.rabl
     code:   object @vendors
             attributes :id, :name
 8) Routes file looks like this

 api_v1_vendors GET    /api/v1/vendors(.:format)   api/v1/vendors#index {:format=>"json"}

 POST   /api/v1/vendors(.:format)          api/v1/vendors#create {:format=>"json"}

 new_api_v1_vendor GET    /api/v1/vendors/new(.:format)      api/v1/vendors#new {:format=>"json"}

 edit_api_v1_vendor GET    /api/v1/vendors/:id/edit(.:format) api/v1/vendors#edit {:format=>"json"}

 api_v1_vendor GET    /api/v1/vendors/:id(.:format)      api/v1/vendors#show {:format=>"json"}
 PUT    /api/v1/vendors/:id(.:format)      api/v1/vendors#update {:format=>"json"}

 DELETE /api/v1/vendors/:id(.:format)      api/v1/vendors#destroy {:format=>"json"}

 9) Finally I went to url: "http://localhost:3000/api/v1/vendors.json"

  And all I see in the browser is an empty JSON hash: "{}" 
```

很明显它不能访问实例变量。似乎是超出范围的一些问题。我不确定下一步如何进行。我在网上找不到任何使用 rabl 进行版本控制的示例。有什么建议么？我真的很感激

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T20:02:57.070

你在哪里设置实例变量？

首先，您可能应该有这一行：`respond_to :json`在您的 Api::ApplicationController 中（或类似的东西，基本上是 Api 模块中所有其他控制器继承的控制器）。

你不需要这些：`render 'api/v1/index.json.rabl'`。

只需设置您的实例变量：

```
def index
    @vendors = Vendor.all
    respond_with @vendors
end

def show
    @vendor = Vendor.find(params[:id])
    respond_with @vendor
end 
```

# c# - 为什么 MSBuild 不匹配路径属性？

> ID：12166457
> 
> 赞同：0
> 
> 时间：2012-08-28T19:45:26.123
> 
> 标签：c#, .net, visual-studio-2010, msbuild, finalbuilder

我有一个自定义程序集的参考。查看我看到的程序集属性

`Path = C:\Windows\Microsoft.Net\assembly\GAC_32\Assembly.Namespace\v4.0_3.0.0.0__c199d42a01e99449\Assembly.Namespace.dll`

当我查看 .cs 项目 MSBuild 时，我看到

```
<Reference Include="Assembly.Namespace, Version=2.0.0.0, Culture=neutral, PublicKeyToken=c199d42a01f89449, processorArchitecture=x86">
  <SpecificVersion>False</SpecificVersion>
  <HintPath>..\..\Project DLLs\Folder Name\Assembly.Namespace.dll</HintPath>
</Reference> 
```

路径不匹配。.NET 运行时版本似乎也不匹配。[当我在使用Csc.exe](http://msdn.microsoft.com/en-us/library/78f4aasd.aspx)的 Visual Studio 中构建我的项目时，它可以工作。当我使用使用[MSBuild](http://msdn.microsoft.com/en-us/library/ms164311.aspx)的 FinalBuilder 时，构建会中断。

# php - 在使用 SMTP 身份验证时通过 PEAR 发送 HTML 消息会返回错误

> ID：12166468
> 
> 赞同：5
> 
> 时间：2012-08-28T19:46:08.230
> 
> 标签：php, smtp, gmail, pear

我正在尝试在 PHP 中使用 SMTP 身份验证向 Gmail 发送 HTML 消息。这是我正在使用的脚本：

```
require_once "Mail.php";
require_once 'Mail/mime.php';

$from = "Some Name <myemail@gmail.com>";
$to = "Other Name <otheremail@gmail.com>";
$subject = "This is a test";
$crlf = "\n";

$host = "ssl://smtp.gmail.com";
$port = "465";
$username = "myemail@gmail.com";
$password = "mypass";

$headers = array ('From' => $from,
                  'Return-Path' => $from,
                  'Subject' => $subject);

$smtp = Mail::factory('smtp',
  array ('host' => $host,
    'port' => $port,
    'auth' => true,
    'username' => $username,
    'password' => $password));

$mime = new Mail_mime($crlf);
$mime->setTXTBody("This is a test email message");
$mime->setHTMLBody($body);
$body = $mime->get();
$headers = $mime->headers($headers);

$mail = $smtp->send($to, $headers, $body);

if (PEAR::isError($mail)) {
  echo("<p>" . $mail->getMessage() . "</p>");
} else {
  echo("<p>Message successfully sent!</p>");
} 
```

**注意：**这`$body`是一个包含图像和其他信息的 HTML 表格。

当我执行脚本时，它失败并出现以下错误：

> 无法设置发件人：某个名称 [SMTP：从服务器收到的响应代码无效（代码：555，响应：5.5.2 语法错误。c6sm20541406obd.22）]

以下是我尝试查看的问题所在： 1\. 使用相同的脚本，使用“Mail”而不是“smtp”，即

```
$smtp = Mail::factory('Mail'); 
```

这工作得很好。2\. 使用没有**mime.php**的相同脚本，这也可以，但不允许发送 HTML 电子邮件。

有人知道如何将两者结合起来，以便我仍然使用 SMTP 身份验证**并**发送 HTML 消息吗？

**编辑：** 这是转储`$mime->headers()`：

```
[MIME-Version] => 1.0
[From] => Some Name
[Return-Path] => Some Name
[Subject] => This is a test
[Content-Type] => multipart/alternative;
boundary="=_8662996a1f586248545d9f01f48e916d" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T18:59:04.563

请参阅下面的 URL，我认为这对您很有帮助。

[如何在 PHP 中使用 SMTP 发送 HTML 电子邮件](https://stackoverflow.com/questions/7814910/how-to-send-an-html-email-using-smtp-in-php)

Gmail 的 SMTP 服务器地址是**SMTP.GOOGLEMAIL.COM**而不是**SMTP.GMAIL.COM**。

因此您的设置应该是：

```
// ...
$smtp=array();
$smtp['host']='ssl://smtp.googlemail.com'; 
```

**看另一个例子：-**

**使用带有 PHP 和 PEAR 的 SMTP 服务器发送 HTML 和纯文本电子邮件**

[http://tonyvirelli.com/slider/php-html-email-using-smtp/](http://tonyvirelli.com/slider/php-html-email-using-smtp/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T23:21:32.850

尝试将名称用双引号括起来，如下所示：

```
$from = '"Some Name" <myemail@gmail.com>';
$to = '"Other Name" <otheremail@gmail.com>'; 
```

试试看并告诉我们。

**更新**：
好的，上面没有用，所以我只想告诉你它在我的 php 页面中对我有用，以通过 smtp gmail 发送电子邮件。

*   我使用[http://phpmailer.sourceforge.net/](http://phpmailer.sourceforge.net/)
*   smtp 服务器设置为**smtp.gmail.com**
*   它在端口**587**中使用**TLS协议**

 **因此，基于此，您可以尝试将配置更改为：

```
$host = "tls://smtp.gmail.com";
$port = "587"; 
```

您可以[**在此处查看**](http://phpmailer.worxware.com/index.php?pg=examplebgmail)如何使用 phpmailer 通过 gmail 发送邮件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-18T15:48:17.500

自己终于想通了。

感谢[Abid Hussain](https://stackoverflow.com/users/1547438/abid-hussain)在此处提供示例的链接：http: [//tonyvirelli.com/slider/php-html-email-using-smtp/](http://tonyvirelli.com/slider/php-html-email-using-smtp/)

**解决方案：**

1.  `'Return-Path' => $from`从 headers 数组中删除。
2.  添加`To => $to`到 headers 数组（没有这个，接收到的电子邮件的**to标头是未公开的***收件人*）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-11-04T21:41:16.763

我遇到了这个问题，通过调试设法得到各种不同的错误（如下）。最奇怪的是，它在 2017 年 11 月 2 日左右完全停止工作。我没有做任何更新。以前它会随机工作，所以我重试了一次，它总是成功 < 5 次尝试，直到第 2 次。奇怪的。

```
Failed to connect to ssl://smtp.gmail.com:465 [SMTP: Invalid response code received from server (code: -1, response: )]
fsockopen(): Failed to enable crypto
fsockopen(): unable to connect to ssl://smtp.gmail.com:465 (Unknown error)
SSL operation failed with code 1\. OpenSSL Error messages: error:14090086:SSL routines:ssl3_get_server_certificate:certificate verify failed 
```

（等等）

另一个用户发布了这个故障排除步骤，帮助我得到更多错误，所以我可以谷歌更多可能是什么原因：

```
$result = fsockopen('ssl://smtp.gmail.com', 465, $error_no,
$error_message, 5);     
if($result === false) {         
    echo "error no:
$error_no error message: $error_message";       echo print_r($result,true);     
}else{      
    echo 'success\n\n';
} 
```

**我的解决**方法是添加一个 CA 捆绑文件，因为显然 PHP 无法验证 Google 的证书：

*   下载 CA 包[https://curl.haxx.se/docs/caextract.html](https://curl.haxx.se/docs/caextract.html)并提取到 C:\Program Files\PHP\ssl\cacert.pem
*   在 php.ini 中指定位置：openssl.cafile = C:\Program Files\PHP\ssl\cacert.pem**

# java - android canvas drawText从宽度设置字体大小？

> ID：12166476
> 
> 赞同：60
> 
> 时间：2012-08-28T19:46:49.640
> 
> 标签：java, android, android-canvas

我想`canvas`使用一定宽度绘制文本`.drawtext`

例如，`400px`无论输入文本是什么，文本的宽度都应始终不变。

如果输入文本较长，则会减小字体大小，如果输入文本较短，则会相应增加字体大小。

* * *

## 回答 #1

> 赞同：119
> 
> 时间：2014-02-20T00:27:35.840

这是一个更有效的方法：

```
/**
 * Sets the text size for a Paint object so a given string of text will be a
 * given width.
 * 
 * @param paint
 *            the Paint to set the text size for
 * @param desiredWidth
 *            the desired width
 * @param text
 *            the text that should be that width
 */
private static void setTextSizeForWidth(Paint paint, float desiredWidth,
        String text) {

    // Pick a reasonably large value for the test. Larger values produce
    // more accurate results, but may cause problems with hardware
    // acceleration. But there are workarounds for that, too; refer to
    // http://stackoverflow.com/questions/6253528/font-size-too-large-to-fit-in-cache
    final float testTextSize = 48f;

    // Get the bounds of the text, using our testTextSize.
    paint.setTextSize(testTextSize);
    Rect bounds = new Rect();
    paint.getTextBounds(text, 0, text.length(), bounds);

    // Calculate the desired size as a proportion of our testTextSize.
    float desiredTextSize = testTextSize * desiredWidth / bounds.width();

    // Set the paint for that size.
    paint.setTextSize(desiredTextSize);
} 
```

然后，您需要做的就是`setTextSizeForWidth(paint, 400, str);`（400 是问题中的示例宽度）。

为了获得更高的效率，您可以将`Rect`其设为静态类成员，从而避免每次都对其进行实例化。但是，这可能会引入并发问题，并且可能会妨碍代码的清晰度。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2012-08-28T19:51:08.193

试试这个：

```
/**
 * Retrieve the maximum text size to fit in a given width.
 * @param str (String): Text to check for size.
 * @param maxWidth (float): Maximum allowed width.
 * @return (int): The desired text size.
 */
private int determineMaxTextSize(String str, float maxWidth)
{
    int size = 0;       
    Paint paint = new Paint();

    do {
        paint.setTextSize(++ size);
    } while(paint.measureText(str) < maxWidth);

    return size;
} //End getMaxTextSize() 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-05-01T01:41:08.870

[Michael Scheper 的解决方案](https://stackoverflow.com/questions/12166476/android-canvas-drawtext-set-font-size-from-width?answertab=votes#tab-top) 看起来不错，但对我不起作用，我需要获得可以在我的视图中绘制的最大文本大小，但这种方法取决于您设置的第一个文本大小，每次设置不同的大小时'会得到不同的结果，不能说它在每种情况下都是正确的答案。

所以我尝试了另一种方法：

```
private float calculateMaxTextSize(String text, Paint paint, int maxWidth, int maxHeight) {
    if (text == null || paint == null) return 0;
    Rect bound = new Rect();
    float size = 1.0f;
    float step= 1.0f;    
    while (true) {
        paint.getTextBounds(text, 0, text.length(), bound);
        if (bound.width() < maxWidth && bound.height() < maxHeight) {
            size += step;
            paint.setTextSize(size);
        } else {
            return size - step;
        }
    }
} 
```

这很简单，我增加文本大小，直到文本矩形绑定尺寸足够接近`maxWidth`并且`maxHeight`，减少循环重复只需更改`step`为更大的值（*准确性与速度*），也许这不是实现这一目标的最佳方法，但它有效。

# .net - .NET 数据库迁移工具

> ID：12166484
> 
> 赞同：1
> 
> 时间：2012-08-28T19:47:25.803
> 
> 标签：.net, database

我需要一些 .NET 工具来提供处理数据库模式和数据迁移的能力。

例如：两个开发人员在一个项目中工作。

1.  第一个开发人员创建表***用户***
2.  第二个开发者想要使用第一个开发者的数据库模式并添加其他表***Goods***到它。
3.  第一个开发者添加到最新的数据库版本表***Currency*** ...

他们每个人都需要使用最新的数据库版本。他们可以每次都进行数据库备份，但这是一个不好的解决方案。也许存在一些可以提供帮助的工具。

请帮我解决问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T20:07:30.800

Red-Gate 使[SQL 源代码控制](http://www.red-gate.com/products/sql-development/sql-source-control/)可以提供您需要的功能。

否则，如果您有 Premium 或 Ultimate，您可以在 Visual Studio 中使用[架构比较，并以某种方式自动执行差异。](http://msdn.microsoft.com/en-us/library/aa833435%28v=vs.100%29.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-14T16:30:33.577

我认为现在的答案比两年前要简单得多：

使用实体框架迁移并快乐

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-12-08T23:24:02.657

这是一个非常好的解决方案，就像实体框架迁移一样工作。[https://github.com/schambers/fluentmigrator/wiki/Migration](https://github.com/schambers/fluentmigrator/wiki/Migration)

# c# - C# 集合是否关心缓存友好性？

> ID：12166485
> 
> 赞同：2
> 
> 时间：2012-08-28T19:47:26.983
> 
> 标签：c#, caching, struct, localityofreference

我一直在运行很多测试，将结构数组与类数组和类列表进行比较。这是我一直在运行的测试：

```
struct AStruct {
    public int val;
}
class AClass {
    public int val;
}

static void TestCacheCoherence() 
{
    int num = 10000;
    int iterations = 1000;
    int padding = 64;

    List<Object> paddingL = new List<Object>();

    AStruct[] structArray = new AStruct[num];
    AClass[] classArray = new AClass[num];
    List<AClass> classList = new List<AClass>();

    for(int i=0;i<num;i++){
        classArray[i] = new AClass();
        if(padding >0) paddingL.Add(new byte[padding]);
    }
    for (int i = 0; i < num; i++)
    {
        classList.Add(new AClass());
        if (padding > 0) paddingL.Add(new byte[padding]);
    }

    Console.WriteLine("\n");
    stopwatch("StructArray", iterations, () =>
    {
        for (int i = 0; i < num; i++)
        {
            structArray[i].val *= 3;
        }
    });
    stopwatch("ClassArray ", iterations, () =>
    {
        for (int i = 0; i < num; i++)
        {
            classArray[i].val *= 3;
        }
    });
    stopwatch("ClassList  ", iterations, () =>
    {
        for (int i = 0; i < num; i++)
        {
            classList[i].val *= 3;
        }
    });

}

static Stopwatch watch = new Stopwatch();

public static long stopwatch(string msg, int iterations, Action c)
{
    watch.Restart();
    for (int i = 0; i < iterations; i++)
    {
        c();
    }
    watch.Stop();

    Console.WriteLine(msg +":  " + watch.ElapsedTicks);
    return watch.ElapsedTicks;
} 
```

我在发布模式下使用以下命令运行它：

```
 Process.GetCurrentProcess().ProcessorAffinity = new IntPtr(2); // Use only the second core 
 Process.GetCurrentProcess().PriorityClass = ProcessPriorityClass.High;
 Thread.CurrentThread.Priority = ThreadPriority.Highest; 
```

结果：

使用 padding=0 我得到：

```
StructArray: 21517
ClassArray:  42637
ClassList:   80679 
```

使用 padding=64 我得到：

```
 StructArray: 21871
 ClassArray:  82139
 ClassList:   105309 
```

使用 padding=128 我得到：

```
 StructArray: 21694
 ClassArray:  76455
 ClassList:   107330 
```

我对这些结果有点困惑，因为我预计差异会更大。毕竟所有的结构都很小并且一个接一个地放在内存中，而类被最多 128 字节的垃圾分开。

这是否意味着我什至不应该担心缓存友好性？还是我的测试有缺陷？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T19:53:47.057

这里发生了很多事情。首先是您的测试没有考虑 GC - 在列表循环期间数组很可能被 GC 处理（因为在您迭代列表时不再使用数组，它们是合格的供收藏）。

第二个是你需要记住`List<T>`无论如何都是由数组支持的。唯一的读取开销是要通过的附加函数调用`List`。

# jquery - jQuery幻灯片在第一个循环中跳过第一张幻灯片

> ID：12166486
> 
> 赞同：1
> 
> 时间：2012-08-28T19:47:28.557
> 
> 标签：jquery, slideshow, fadein, slide, fadeout

我有一个工作的 jQuery 脚本，它将循环浏览一些图像。但是，当它在第一个循环上循环回第一张幻灯片时，第一张幻灯片不会显示。但随着它继续运行并循环回到第一个循环，它工作得很好，它只是在第一个循环上。

问题链接：http: [//jsfiddle.net/YLJNw/8/](http://jsfiddle.net/YLJNw/8/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T19:57:21.840

一个简单的解决方法是简单地删除您的`<div class="slide">`. 当您进行追加调用时，图像最终会出现在该 div 之外，而它们会从该 div 内部开始。

**[jsFiddle 示例](http://jsfiddle.net/j08691/YLJNw/14/)**

另一种选择是修改您的 jQuery 以使用类幻灯片而不是内容 div 处理 div。

**[jsFiddle 示例](http://jsfiddle.net/j08691/YLJNw/18/)**

```
$(function() {
    $('.slide img:gt(0)').hide();
    setInterval(function() {
        $('.slide img:first').fadeOut(1000)
        .next('img').fadeIn(1000)
        .end().appendTo('.slide');
    }, 3000);
}); 
```

# sql - 单击按钮执行 sql 查询

> ID：12166494
> 
> 赞同：1
> 
> 时间：2012-08-28T19:48:09.343
> 
> 标签：sql, button, click, exec

nw_check.php

```
<?php
  $con = mysql_connect("localhost","root","12345");
  if (!$con)
  {
    die('Could not connect: ' . mysql_error());
  }
?>

 <html>
 <body>
    <form method="POST" action="nw_check_exec.php">
        <input type="button" name="nw_update" value="NW_Update"/>
    </form>
</body>
</html> 
```

nw_check_exec.php

```
<?php
    if(isset($_POST['nw_update'])){
        echo("You clicked button one!");
        //and then execute a sql query here
    }
    else {
    echo" dhur";
    }
?> 
```

但由于某种原因，nw_check_exec.php 中的回显没有被执行。请你帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T19:52:37.730

我认为这是因为输入类型是“按钮”，应该是提交：

```
<input type="submit" name="nw_update" value="NW_Update"/> 
```

# facebook - 动画图片作为页面选项卡图标也是应用程序“日志网址”和“图标网址”？

> ID：12166497
> 
> 赞同：-3
> 
> 时间：2012-08-28T19:48:13.460
> 
> 标签：facebook, facebook-graph-api

最近我看到一个人在 facebook 上上传 gif。我知道 facebook 阻止上传 gif 那么怎么可能上传 gif 呢？？？？这是页面的链接检查一下

[https://www.facebook.com/INeedAllMuslimUsers](https://www.facebook.com/INeedAllMuslimUsers)

大家看到了吗？？？怎么可能……

另外我还有另一个应用程序，它新更新了他的图标和徽标，两者都 Gif 看看这个 [http://graph.facebook.com/325926390835098](http://graph.facebook.com/325926390835098)

```
"icon_url": "http://photos-h.ak.fbcdn.net/photos-ak-snc7/v85005/18/325926390835098/app_2_325926390835098_821224797.gif",
   "logo_url": "http://photos-b.ak.fbcdn.net/photos-ak-snc7/v85005/18/325926390835098/app_1_325926390835098_214444552.gif" 
```

,

这是在 facebook 上新更新的，我很想知道这怎么可能。如果有人知道，请分享诀窍谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T20:20:33.800

不支持此功能-如果存在允许此操作的漏洞，它可能很快就会被关闭，并且图片将被 Facebook 删除-如果我是你，我不会依赖这个

# eclipse - 滚动时Eclipse（Juno）丢失和混合源

> ID：12166502
> 
> 赞同：0
> 
> 时间：2012-08-28T19:48:45.660
> 
> 标签：eclipse

> **可能重复：**
> [移动和消失的代码行；Eclipse 的 XML 编辑器的问题](https://stackoverflow.com/questions/10030727/moving-and-vanishing-lines-of-code-trouble-with-eclipses-xml-editor)

我有用于 Android 开发的开发环境设置。

滚动时出现问题。源代码开始出现缺少部分（如滚动事件未正确刷新视图）。当我选择文本时，它会恢复它，取消选择后它会再次丢失。

我在win7上有双显示器，但无论双显示器还是单显示器都会发生这种情况。

有任何想法吗？

提前Tnx。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T20:02:15.443

这个问题可以通过遵循这个答案中的步骤来解决：[移动和消失代码行；Eclipse 的 XML 编辑器的问题](https://stackoverflow.com/questions/10030727/moving-and-vanishing-lines-of-code-trouble-with-eclipses-xml-editor)

简而言之，“自动格式化由可视布局编辑器编辑的 XML”可能是问题的根源。

# jquery - 使用 CrossSlide 进行幻灯片放映

> ID：12166504
> 
> 赞同：0
> 
> 时间：2012-08-28T19:48:58.313
> 
> 标签：jquery, slideshow

很抱歉这样一个基本问题，但我似乎无法让 CrossSlide jquery 插件工作。

我想用不同的图像制作简单的幻灯片，这些图像在网络浏览器中居中，并且尺寸不同。

谢谢！

```
<head>

<meta http-equiv="content-type" content="text/html; charset=UTF-8">

<style type="text/css">

body {

    background-color: black;
    margin: 20px;
    font-family: sans-serif;
    font-size: xx-small;
    color: white;
}

a {
    text-align: right;
    color: white;
}

#slideshow {
  width: 100%;
  height: 100%;
}

</style>

<title>CrossSlide</title>

</head>

<body>

<div><span class="contact-info"><a href="mailto:none@none.com">none@none.com</a></div>

<div id="slideshow"></div>

<script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.2.6/jquery.min.js"></script>
<script type="text/javascript" src="/js/jquery.cross-slide.min.js"></script>
<script>
  $(function() {
    $('#slideshow').crossSlide({
      sleep: 2,
      fade: 1
    }, [
      { src: 'data/tea.jpg' },
      { src: 'data/tea2.jpg' },
    ])
  });
</script>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T20:14:52.590

最大的问题是您引用了一个旧的 jQuery 库。

```
<script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<script type="text/javascript" src="/js/jquery.cross-slide.min.js"></script>
<script type="text/javascript">
    $(function () {
        $('#slideshow').crossSlide({
            sleep: 2,
            fade: 1
        }, [
                { src: 'content/tea.png' },
                { src: 'content/tea2.jpg' }
            ]);
    });
</script> 
```

如果您使用的是 Chrome，您可以单击扳手图标（右上角），然后单击“工具”，然后单击“JavaScript 控制台”，或者使用快捷键 Ctrl+Shift+J，然后您会看到 javascript 错误消息。

# google-app-engine - 在 2 个 Google AppEngine 应用程序之间执行请求时的行为

> ID：12166507
> 
> 赞同：0
> 
> 时间：2012-08-28T19:49:02.837
> 
> 标签：google-app-engine

我们在 Google AppEngine 上运行 2 个应用程序，一个在 Python 中，一个在 Java 中。

Python 应用程序面向互联网，为浏览器用户或我们智能手机应用程序的 API 调用提供服务。

Python 应用程序通常与提供工作流引擎服务的 Java 应用程序通信。Java 应用程序永远不会直接从 Internet 访问。这类似于面向服务的架构。

我们的 Java 应用程序配置有 1 个常驻实例。但是，我们经常看到，当 Python 应用程序向 Java 应用程序发送请求（此时它什么都不做）时，会生成一个新的 Java 实例，而不是让常驻实例为请求提供服务。通过这种方式，发现了长达 10 秒的延迟，而请求处理本身只需不到 1 秒。

Google 是否有可能将一个 appengine 应用程序对另一个应用程序的请求视为一种后端工作负载，对于这种工作负载而言，吞吐量比延迟更重要？来自互联网的请求与来自 Google 内部的请求是否有不同的策略（延迟方法、cron ......也许应用引擎间的请求也属于这一类，这可能并不总是正确的）。

Google 建议我将 Java 应用程序作为 Python 应用程序的后端运行，实际上只有一个 Appengine 应用程序，而不是 2 个。

此线程中的一些信息： [https ://groups.google.com/forum/?fromgroups=#!topic/google-appengine/8O7K3cFzBbY](https://groups.google.com/forum/?fromgroups=#!topic/google-appengine/8O7K3cFzBbY)

关于如何强制 appengine 常驻实例处理传入请求而不是生成和预热新实例的任何建议，这可能对吞吐量有利，但对延迟不利？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T08:55:03.293

是否尝试在您的 Java 应用程序上添加`<threadsafe>true</threadsafe>`元素？`appengine-web.xml`

# ruby - 从命令行用于编译 LESS 文件时，recess 的错误输出在哪里？

> ID：12166509
> 
> 赞同：2
> 
> 时间：2012-08-28T19:49:17.050
> 
> 标签：ruby, gem, less, npm, recess

我已将凹槽安装为 Ruby gem（尽管如果我将其作为 npm 包执行，则此问题也适用），并且在带有 watchr 的 Bash 脚本中使用它来在更改 LESS 文件时对其进行处理。每当 LESS 文件语法错误时，生成的 CSS 输出文件都是空的，没有错误跟踪（与 SASS 不同，它将错误输出放在文件中）。我知道在Ruby中使用recess gem时，如果出现问题，它会产生一个错误对象......如果我从命令行使用它，该错误输出会去哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-08T19:03:17.910

据了解，recess 不会对无效的 Less 代码抛出任何错误。只有当您尝试编译不存在的文件时，才会写入错误`stdout`。尝试以下操作：

```
>> npm install recess
>>  ./node_modules/recess/bin/recess --compile test.less 
```

当 test.less 不存在时，前面的命令将导致：

```
Error reading file: test.less 
```

现在创建一个有效的less文件：

```
echo "p{ &.class{color:red}}" > valid.less 
```

以下命令的编译输出也写入`stdout`：

```
>> ./node_modules/recess/bin/recess --compile valid.less 
p.class {
  color: #ff0000;
} 
```

对一些无效输出执行相同操作不会产生任何输出：

```
 >> echo "p{ &.class{color" > invalid.less
 >> ./node_modules/recess/bin/recess --compile invalid.less 
```

因为这个答案来晚了一点，你还必须意识到当前版本的凹槽使用 less v1.3 而最新版本的 Less 现在是 1.7.3。

我可以使用 npm 安装凹槽，您还应该能够安装 Less 命令行编译器，它会按预期生成错误。

```
 >> npm install less
 >> echo "p{ &.class{color" > invalid.less
 >> ./node_modules/less/bin/lessc invalid.less 
```

前面的命令将以下消息写入`stderr`：

```
ParseError: missing closing `}` in invalid.less on line 1, column 11:
1 p{ &.class{color
2 
```

您可以通过将代码`stderr`附加到命令来重定向到文件。`2>errors.log`现在您可以例如运行以下命令：

```
>> ./node_modules/less/bin/lessc invalid.less > style.css 2>errors.log 
```

前面的命令将有效的 CSS 写入`invalid.less`并错误写入`errors.log`

# hadoop - Hadoop最后减少作业卡在连接超时

> ID：12166510
> 
> 赞同：3
> 
> 时间：2012-08-28T19:49:26.353
> 
> 标签：hadoop

我的 hadoop 工作卡在最后一个 reduce 任务上。我已经看到很多从 3 个不同主机到单个主机的连接超时。但是，我可以从任何其他机器上 ping 这台麻烦的机器。

这是一个 5 节点集群。它是最近建成的。它们具有相同的 hadoop 和 pig 二进制文件。它有3台新机器和2台旧机器。如果我删除了 2 台旧机器，它工作正常。

有问题的旧机器版本：

```
java version "1.6.0_20"
OpenJDK Runtime Environment (IcedTea6 1.9.13) (6b20-1.9.13-0ubuntu1~10.10.1)
OpenJDK 64-Bit Server VM (build 19.0-b09, mixed mode) 
```

新工作机版本：

```
java version "1.6.0_24"
OpenJDK Runtime Environment (IcedTea6 1.11.3) (6b24-1.11.3-1ubuntu0.12.04.1)
OpenJDK 64-Bit Server VM (build 20.0-b12, mixed mode) 
```

我还从日志中看到了大量的 dup 主机（180 个）。

```
2012-08-28 12:34:53,307 INFO org.apache.hadoop.mapred.ReduceTask: attempt_201208231557_0021_r_000008_0 Need another 4 map output(s) where 1 is already in progress
2012-08-28 12:34:53,307 INFO org.apache.hadoop.mapred.ReduceTask: attempt_201208231557_0021_r_000008_0 Scheduled 0 outputs (0 slow hosts and3 dup hosts)
2012-08-28 12:35:53,308 INFO org.apache.hadoop.mapred.ReduceTask: attempt_201208231557_0021_r_000008_0 Need another 4 map output(s) where 1 is already in progress
2012-08-28 12:35:53,308 INFO org.apache.hadoop.mapred.ReduceTask: attempt_201208231557_0021_r_000008_0 Scheduled 0 outputs (0 slow hosts and3 dup hosts)
2012-08-28 12:36:53,309 INFO org.apache.hadoop.mapred.ReduceTask: attempt_201208231557_0021_r_000008_0 Need another 4 map output(s) where 1 is already in progress
2012-08-28 12:36:53,309 INFO org.apache.hadoop.mapred.ReduceTask: attempt_201208231557_0021_r_000008_0 Scheduled 0 outputs (0 slow hosts and3 dup hosts)
2012-08-28 12:37:18,416 WARN org.apache.hadoop.mapred.ReduceTask: attempt_201208231557_0021_r_000008_0 copy failed: attempt_201208231557_0021_m_000002_0 from Han
2012-08-28 12:37:18,417 WARN org.apache.hadoop.mapred.ReduceTask: java.net.SocketTimeoutException: connect timed out
    at java.net.PlainSocketImpl.socketConnect(Native Method)
    at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:327)
    at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:193)
    at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:180)
    at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:384)
    at java.net.Socket.connect(Socket.java:546)
    at sun.net.NetworkClient.doConnect(NetworkClient.java:173)
    at sun.net.www.http.HttpClient.openServer(HttpClient.java:409)
    at sun.net.www.http.HttpClient.openServer(HttpClient.java:530)
    at sun.net.www.http.HttpClient.<init>(HttpClient.java:240)
    at sun.net.www.http.HttpClient.New(HttpClient.java:321)
    at sun.net.www.http.HttpClient.New(HttpClient.java:338)
    at sun.net.www.protocol.http.HttpURLConnection.getNewHttpClient(HttpURLConnection.java:935)
    at sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:876)
    at sun.net.www.protocol.http.HttpURLConnection.connect(HttpURLConnection.java:801)
    at org.apache.hadoop.mapred.ReduceTask$ReduceCopier$MapOutputCopier.getInputStream(ReduceTask.java:1618)
    at org.apache.hadoop.mapred.ReduceTask$ReduceCopier$MapOutputCopier.setupSecureConnection(ReduceTask.java:1575)
    at org.apache.hadoop.mapred.ReduceTask$ReduceCopier$MapOutputCopier.getMapOutput(ReduceTask.java:1483)
    at org.apache.hadoop.mapred.ReduceTask$ReduceCopier$MapOutputCopier.copyOutput(ReduceTask.java:1394)
    at org.apache.hadoop.mapred.ReduceTask$ReduceCopier$MapOutputCopier.run(ReduceTask.java:1326)

2012-08-28 12:37:18,417 INFO org.apache.hadoop.mapred.ReduceTask: Task attempt_201208231557_0021_r_000008_0: Failed fetch #6 from attempt_201208231557_0021_m_000002_0
2012-08-28 12:37:18,417 WARN org.apache.hadoop.mapred.ReduceTask: attempt_201208231557_0021_r_000008_0 adding host Han to penalty box, next contact in 48 seconds
2012-08-28 12:37:18,417 INFO org.apache.hadoop.mapred.ReduceTask: attempt_201208231557_0021_r_000008_0: Got 1 map-outputs from previous failures
2012-08-28 12:37:53,418 INFO org.apache.hadoop.mapred.ReduceTask: attempt_201208231557_0021_r_000008_0 Need another 4 map output(s) where 0 is already in progress
2012-08-28 12:37:53,418 INFO org.apache.hadoop.mapred.ReduceTask: attempt_201208231557_0021_r_000008_0 Scheduled 0 outputs (1 slow hosts and0 dup hosts)
2012-08-28 12:37:53,418 INFO org.apache.hadoop.mapred.ReduceTask: Penalized(slow) Hosts: 
2012-08-28 12:37:53,418 INFO org.apache.hadoop.mapred.ReduceTask: Han Will be considered after: 13 seconds.
2012-08-28 12:38:08,418 INFO org.apache.hadoop.mapred.ReduceTask: attempt_201208231557_0021_r_000008_0 Scheduled 1 outputs (0 slow hosts and0 dup hosts)
2012-08-28 12:38:53,419 INFO org.apache.hadoop.mapred.ReduceTask: attempt_201208231557_0021_r_000008_0 Need another 4 map output(s) where 1 is already in progress
2012-08-28 12:38:53,419 INFO org.apache.hadoop.mapred.ReduceTask: attempt_201208231557_0021_r_000008_0 Scheduled 0 outputs (0 slow hosts and3 dup hosts)
2012-08-28 12:39:53,420 INFO org.apache.hadoop.mapred.ReduceTask: attempt_201208231557_0021_r_000008_0 Need another 4 map output(s) where 1 is already in progress
2012-08-28 12:39:53,420 INFO org.apache.hadoop.mapred.ReduceTask: attempt_201208231557_0021_r_000008_0 Scheduled 0 outputs (0 slow hosts and3 dup hosts)
2012-08-28 12:40:53,421 INFO org.apache.hadoop.mapred.ReduceTask: attempt_201208231557_0021_r_000008_0 Need another 4 map output(s) where 1 is already in progress
2012-08-28 12:40:53,421 INFO org.apache.hadoop.mapred.ReduceTask: attempt_201208231557_0021_r_000008_0 Scheduled 0 outputs (0 slow hosts and3 dup hosts)
2012-08-28 12:41:08,537 WARN org.apache.hadoop.mapred.ReduceTask: attempt_201208231557_0021_r_000008_0 copy failed: attempt_201208231557_0021_m_000002_0 from Han
2012-08-28 12:41:08,538 WARN org.apache.hadoop.mapred.ReduceTask: java.net.SocketTimeoutException: connect timed out
    at java.net.PlainSocketImpl.socketConnect(Native Method)
    at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:327)
    at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:193)
    at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:180)
    at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:384)
    at java.net.Socket.connect(Socket.java:546)
    at sun.net.NetworkClient.doConnect(NetworkClient.java:173)
    at sun.net.www.http.HttpClient.openServer(HttpClient.java:409)
    at sun.net.www.http.HttpClient.openServer(HttpClient.java:530)
    at sun.net.www.http.HttpClient.<init>(HttpClient.java:240)
    at sun.net.www.http.HttpClient.New(HttpClient.java:321)
    at sun.net.www.http.HttpClient.New(HttpClient.java:338)
    at sun.net.www.protocol.http.HttpURLConnection.getNewHttpClient(HttpURLConnection.java:935)
    at sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:876)
    at sun.net.www.protocol.http.HttpURLConnection.connect(HttpURLConnection.java:801)
    at org.apache.hadoop.mapred.ReduceTask$ReduceCopier$MapOutputCopier.getInputStream(ReduceTask.java:1618)
    at org.apache.hadoop.mapred.ReduceTask$ReduceCopier$MapOutputCopier.setupSecureConnection(ReduceTask.java:1575)
    at org.apache.hadoop.mapred.ReduceTask$ReduceCopier$MapOutputCopier.getMapOutput(ReduceTask.java:1483)
    at org.apache.hadoop.mapred.ReduceTask$ReduceCopier$MapOutputCopier.copyOutput(ReduceTask.java:1394)
    at org.apache.hadoop.mapred.ReduceTask$ReduceCopier$MapOutputCopier.run(ReduceTask.java:1326)

2012-08-28 12:41:08,538 INFO org.apache.hadoop.mapred.ReduceTask: Task attempt_201208231557_0021_r_000008_0: Failed fetch #7 from attempt_201208231557_0021_m_000002_0
2012-08-28 12:41:08,538 WARN org.apache.hadoop.mapred.ReduceTask: attempt_201208231557_0021_r_000008_0 adding host Han to penalty box, next contact in 62 seconds
2012-08-28 12:41:08,538 INFO org.apache.hadoop.mapred.ReduceTask: attempt_201208231557_0021_r_000008_0: Got 1 map-outputs from previous failures
2012-08-28 12:41:53,539 INFO org.apache.hadoop.mapred.ReduceTask: attempt_201208231557_0021_r_000008_0 Need another 4 map output(s) where 0 is already in progress
2012-08-28 12:41:53,539 INFO org.apache.hadoop.mapred.ReduceTask: attempt_201208231557_0021_r_000008_0 Scheduled 0 outputs (1 slow hosts and0 dup hosts)
2012-08-28 12:41:53,539 INFO org.apache.hadoop.mapred.ReduceTask: Penalized(slow) Hosts: 
2012-08-28 12:41:53,539 INFO org.apache.hadoop.mapred.ReduceTask: Han Will be considered after: 17 seconds.
2012-08-28 12:42:13,540 INFO org.apache.hadoop.mapred.ReduceTask: attempt_201208231557_0021_r_000008_0 Scheduled 1 outputs (0 slow hosts and0 dup hosts)
2012-08-28 12:42:53,540 INFO org.apache.hadoop.mapred.ReduceTask: attempt_201208231557_0021_r_000008_0 Need another 4 map output(s) where 1 is already in progress
2012-08-28 12:42:53,540 INFO org.apache.hadoop.mapred.ReduceTask: attempt_201208231557_0021_r_000008_0 Scheduled 0 outputs (0 slow hosts and3 dup hosts) 
```

更多日志：

```
2012-09-06 11:01:47,719 INFO org.apache.hadoop.mapred.TaskTracker: attempt_201209041720_0010_r_000014_0 1.0% reduce > reduce
2012-09-06 11:01:47,720 INFO org.apache.hadoop.mapred.TaskTracker: Task attempt_201209041720_0010_r_000014_0 is done.
2012-09-06 11:01:47,720 INFO org.apache.hadoop.mapred.TaskTracker: reported output size for attempt_201209041720_0010_r_000014_0  was -1
2012-09-06 11:01:47,720 INFO org.apache.hadoop.mapred.TaskTracker: addFreeSlot : current free slots : 6
2012-09-06 11:01:47,769 INFO org.apache.hadoop.mapred.JvmManager: JVM : jvm_201209041720_0010_r_1617080101 exited with exit code 0\. Number of tasks it ran: 1
2012-09-06 11:01:47,913 INFO org.apache.hadoop.mapred.JvmManager: JVM : jvm_201209041720_0010_r_-434797671 exited with exit code 0\. Number of tasks it ran: 1
2012-09-06 11:01:50,428 INFO org.apache.hadoop.mapred.TaskTracker: Received KillTaskAction for task: attempt_201209041720_0010_r_000014_0
2012-09-06 11:01:50,428 INFO org.apache.hadoop.mapred.TaskTracker: About to purge task: attempt_201209041720_0010_r_000014_0
2012-09-06 11:01:50,429 INFO org.apache.hadoop.mapred.TaskTracker: Received KillTaskAction for task: attempt_201209041720_0010_r_000020_0
2012-09-06 11:01:50,429 INFO org.apache.hadoop.mapred.TaskTracker: About to purge task: attempt_201209041720_0010_r_000020_0 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T19:46:17.323

您是否使用默认的推测执行设置？（4 次尝试）- 这是[一篇](http://blog.softartisans.com/2011/12/28/speculative-execution-proceed-with-caution/)可能有帮助的文章。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T00:16:18.653

这可能是由于硬盘驱动器速度慢。在新机器（三星 830 SSD）上，我看到 3MB/s 的传输速率和慢速机器（旋转硬盘）0.12 MB/s。它可能只是做了一个大型减速器工作而且太慢了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-23T05:33:25.383

当 HADOOP 作业处于 reduce 阶段时，任务跟踪器需要在数据节点之间洗牌。如果您在从属配置文件中设置数据节点主机名，则会发生连接超时错误，而无法解析主机名。将主机名和 IP 地址添加到 /etc/hosts 是一种快速的解决方案。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-09-04T20:22:07.010

不知道为什么会发生这种情况，但我遇到了同样的问题......我的**数据节点试图访问 localhost 上的名称节点**，而不是我实际的“主”名称节点......

我通过访问我的**主机文件**解决了这个问题：

`etc/hosts`

并从那里**删除 localhost 行。**我很确定应该有一种更清洁的方法来解决这个问题，但这个解决方案对我有用。

如果有人有更简洁的方法来阻止数据节点尝试访问本地主机上的名称节点，**请告诉我！！！**

# jquery - 当前时间 youtube 嵌入视频

> ID：12166511
> 
> 赞同：0
> 
> 时间：2012-08-28T19:49:28.293
> 
> 标签：jquery, youtube

我想知道是否有办法使用 Jquery 或任何其他语言来了解 youtube 嵌入式视频上的当前时间，如果是，如何？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T19:56:11.217

是的。

这取决于您嵌入 YouTube 视频的方式。但是，无论如何，JavaScript API 都有这个功能：

```
player.getCurrentTime() 
```

读：

*   [https://developers.google.com/youtube/iframe_api_reference](https://developers.google.com/youtube/iframe_api_reference)
*   [https://developers.google.com/youtube/js_api_reference](https://developers.google.com/youtube/js_api_reference)
*   [https://developers.google.com/youtube/flash_api_reference](https://developers.google.com/youtube/flash_api_reference)

# xslt - SpecFlow 的自定义报告

> ID：12166512
> 
> 赞同：2
> 
> 时间：2012-08-28T19:49:29.213
> 
> 标签：xslt, specflow

我们将 Specflow 与 NUnit 一起用于我们的可执行规范。Specflow 和良好的 VS 集成给我们留下了深刻的印象。我们还设置了构建服务器（TeamCity）来运行规范并生成“测试执行报告”。

但是，specflow 生成的报告并没有给我们留下那么深刻的印象。[有一个选项可以为报告生成器](https://github.com/techtalk/SpecFlow/wiki/Reporting)指定一个自定义 xslt ，但我们对 xslt 不是很熟练...

所以我的问题是；有没有人为他们想要在这里分享的 specflow 报告生成器制作了任何自定义报告？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T20:38:22.747

我建议您查看[Pickles 项目](https://github.com/picklesdoc/pickles)，该项目以您选择的格式（支持 HTML、PDF、Word 和其他格式）创建了一个非常好的文档。

它可以通过 MsBuild、Powershell 和命令行使用。您可以从[NuGet轻松获得它](http://nuget.org/packages/pickles)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-28T04:28:08.023

我的这篇文章可以帮助您创建自己的自定义报告，因为我在这里创建了一个示例 [http://softwarecookie.wordpress.com/2014/06/26/specflow-test-execution-report-enhancement/](http://softwarecookie.wordpress.com/2014/06/26/specflow-test-execution-report-enhancement/)

希望有帮助

# c++ - boost::asio，线程池和线程监控

> ID：12166513
> 
> 赞同：7
> 
> 时间：2012-08-28T19:49:32.643
> 
> 标签：c++, boost, boost-asio

我已经使用 实现了一个线程池`boost::asio`，并且一些数字`boost::thread`对象调用`boost::asio::io_service::run()`. 但是，我得到的一个要求是有一种方法可以监视所有线程的“健康”。我的意图是制作一个可以通过线程池的简单哨兵对象——如果它通过了，那么我们可以假设线程仍在处理工作。

但是，鉴于我的实现，我不确定如何（如果）可靠地监视池中的所有线程。我只是将线程函数委托给`boost::asio::io_service::run()`，因此将哨兵对象发布到`io_service`实例中并不能保证哪个线程实际上会获得该哨兵并完成工作。

一种选择可能是定期插入哨兵，并希望它在合理的时间内至少被每个线程拾取一次，但这显然并不理想。

举个例子。由于处理程序的编码方式，在这种情况下，我们可以看到每个线程将执行相同数量的工作，但实际上我无法控制处理程序的实现，有些可能会长时间运行，而另一些则几乎即时。

```
#include <iostream>
#include <boost/asio.hpp>
#include <vector>
#include <boost/thread.hpp>
#include <boost/bind.hpp>

void handler()
{
   std::cout << boost::this_thread::get_id() << "\n";
   boost::this_thread::sleep(boost::posix_time::milliseconds(100));
}

int main(int argc, char **argv)
{
   boost::asio::io_service svc(3);

   std::unique_ptr<boost::asio::io_service::work> work(new boost::asio::io_service::work(svc));

   boost::thread one(boost::bind(&boost::asio::io_service::run, &svc));
   boost::thread two(boost::bind(&boost::asio::io_service::run, &svc));
   boost::thread three(boost::bind(&boost::asio::io_service::run, &svc));

   svc.post(handler);
   svc.post(handler);
   svc.post(handler);
   svc.post(handler);
   svc.post(handler);
   svc.post(handler);
   svc.post(handler);
   svc.post(handler);
   svc.post(handler);
   svc.post(handler);

   work.reset();

   three.join();
   two.join();
   one.join();

   return 0;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-28T20:19:55.917

您可以在所有线程之间使用一个公共 io_service 实例，并为每个线程使用一个私有 io_service 实例。每个线程都会执行这样的方法：

```
void Mythread::threadLoop()
{
    while(/* termination condition */)
    {
        commonIoService.run_one();
        privateIoService.run_one();

        commonConditionVariable.timed_wait(time);
    }
} 
```

通过这种方式，如果你想确保某个任务在一个线程中执行，你只需要将这个任务发布到它拥有的 io_service 中。

要在线程池中发布任务，您可以执行以下操作：

```
void MyThreadPool::post(Hander handler)
{
    commonIoService.post(handler);
    commonConditionVariable.notify_all();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T20:05:33.540

我使用的解决方案依赖于我拥有线程池对象的实现这一事实。我创建了一个包装器类型，它将更新统计信息，并复制发布到线程池的用户定义的处理程序。只有这种包装器类型会发布到底层`io_service`. 这种方法允许我跟踪发布/执行的处理程序，而不必侵入用户代码。

这是一个精简和简化的示例：

```
#include <iostream>
#include <memory>
#include <vector>
#include <boost/thread.hpp>
#include <boost/asio.hpp>

// Supports scheduling anonymous jobs that are
// executable as returning nothing and taking
// no arguments
typedef std::function<void(void)> functor_type;

// some way to store per-thread statistics
typedef std::map<boost::thread::id, int> thread_jobcount_map;

// only this type is actually posted to
// the asio proactor, this delegates to
// the user functor in operator()
struct handler_wrapper
{
   handler_wrapper(const functor_type& user_functor, thread_jobcount_map& statistics)
      : user_functor_(user_functor)
      , statistics_(statistics)
   {
   }

   void operator()()
   {
      user_functor_();

      // just for illustration purposes, assume a long running job
      boost::this_thread::sleep(boost::posix_time::milliseconds(100));

      // increment executed jobs
      ++statistics_[boost::this_thread::get_id()];
   }

   functor_type         user_functor_;
   thread_jobcount_map& statistics_;
};

// anonymous thread function, just runs the proactor
void thread_func(boost::asio::io_service& proactor)
{
   proactor.run();
}

class ThreadPool
{
public:
   ThreadPool(size_t thread_count)
   {
      threads_.reserve(thread_count);

      work_.reset(new boost::asio::io_service::work(proactor_));

      for(size_t curr = 0; curr < thread_count; ++curr)
      {
         boost::thread th(thread_func, boost::ref(proactor_));

         // inserting into this map before any work can be scheduled
         // on it, means that we don't have to look it for lookups
         // since we don't dynamically add threads
         thread_jobcount_.insert(std::make_pair(th.get_id(), 0));

         threads_.emplace_back(std::move(th));
      }
   }

   // the only way for a user to get work into 
   // the pool is to use this function, which ensures
   // that the handler_wrapper type is used
   void schedule(const functor_type& user_functor)
   {
      handler_wrapper to_execute(user_functor, thread_jobcount_);
      proactor_.post(to_execute);
   }

   void join()
   {
      // join all threads in pool:
      work_.reset();
      proactor_.stop();

      std::for_each(
         threads_.begin(),
         threads_.end(),
         [] (boost::thread& t)
      {
         t.join();
      });
   }

   // just an example showing statistics
   void log()
   {
      std::for_each(
         thread_jobcount_.begin(),
         thread_jobcount_.end(),
         [] (const thread_jobcount_map::value_type& it)
      {
         std::cout << "Thread: " << it.first << " executed " << it.second << " jobs\n";
      });
   }

private:
   std::vector<boost::thread> threads_;
   std::unique_ptr<boost::asio::io_service::work> work_;
   boost::asio::io_service    proactor_;
   thread_jobcount_map        thread_jobcount_;
};

struct add
{
   add(int lhs, int rhs, int* result)
      : lhs_(lhs)
      , rhs_(rhs)
      , result_(result)
   {
   }

   void operator()()
   {
      *result_ = lhs_ + rhs_;
   }

   int lhs_,rhs_;
   int* result_;
};

int main(int argc, char **argv)
{
   // some "state objects" that are 
   // manipulated by the user functors
   int x = 0, y = 0, z = 0;

   // pool of three threads
   ThreadPool pool(3);

   // schedule some handlers to do some work
   pool.schedule(add(5, 4, &x));
   pool.schedule(add(2, 2, &y));
   pool.schedule(add(7, 8, &z));

   // give all the handlers time to execute
   boost::this_thread::sleep(boost::posix_time::milliseconds(1000));

   std::cout
      << "x = " << x << "\n"
      << "y = " << y << "\n"
      << "z = " << z << "\n";

   pool.join();

   pool.log();
} 
```

输出：

```
x = 9
y = 4
z = 15
Thread: 0000000000B25430 executed 1 jobs
Thread: 0000000000B274F0 executed 1 jobs
Thread: 0000000000B27990 executed 1 jobs 
```

# actionscript-3 - Flash AIR 应用程序（桌面）的性能比作为 Flash Projector 编译的相同代码差很多

> ID：12166514
> 
> 赞同：1
> 
> 时间：2012-08-28T19:49:39.010
> 
> 标签：actionscript-3, flash, air, projector

我在 CS6 (Mac) 中创建了一个 Flash 应用程序 (AS3)，它在作为 Flash 投影仪发布时按预期运行。但是当我作为 AIR 应用程序 (v3.4.0.2540) 发布时，该应用程序的性能比投影仪差大约 50%。我将其设置为使用 GPU 硬件加速，渲染模式为自动。我应该使用其他设置吗？性能达到预期的时间（使用 MOUSE_MOVE 和 ENTER_FRAME 侦听器时），但它在独立播放器中运行良好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T20:04:59.550

将渲染模式设置为自动将导致 AIR[回退到 CPU](http://help.adobe.com/en_US/air/build/WSfffb011ac560372f-5d0f4f25128cc9cd0cb-7ffd.html#WS901d38e593cd1bac1e63e3d1298b2f93a0-7ffc)（请参阅“renderMode”）。如果您依赖 GPU（您没有说明您是否是，但这是暗示的），这可能会导致性能显着下降。

您需要将渲染模式设置为`direct`或`gpu`利用 AIR 中的 GPU。我不完全确定有什么区别，但我在`direct`与 Starling 合作时一直使用它。

AIR 需要考虑的另一件事：您发布的是发布版本还是调试版本？调试版本的性能比发布版本差得多。

# c# - 事务死锁，如何正确设计？

> ID：12166516
> 
> 赞同：11
> 
> 时间：2012-08-28T19:49:45.537
> 
> 标签：c#, .net, multithreading, entity-framework-4.1, deadlock

所以我正在研究这个实体框架项目，它将被用作一种 DAL，并且在运行压力测试时（通过 Thread() 开始对实体进行一些更新），我得到了这些：

> _innerException = {“事务（进程 ID 94）与另一个进程在锁资源上死锁，并已被选为死锁牺牲品。重新运行事务。”}

这是我如何实现类的方法的一些示例：

```
public class OrderController
{

    public Order Select(long orderID)
    {
        using (var ctx = new BackEndEntities())
        {

            try
            {
                var res = from n in ctx.Orders
                                       .Include("OrderedServices.Professional")
                                       .Include("Agency")
                                       .Include("Agent")
                          where n.OrderID == orderID
                          select n;
                return res.FirstOrDefault();
            }
            catch (Exception ex)
            {
                throw ex;
            }
         }
    }

    public bool Update(Order order)
    {
        using (var ctx = new BackEndEntities())
        {
            try
            {
                order.ModificationDate = DateTime.Now;
                ctx.Orders.Attach(order);
                ctx.SaveChanges();
                return true;
            }
            catch (Exception ex)
            {
                throw ex;
            }
        }
    }
} 
```

和：

```
public class AgentController
{

    public Agent Select(long agentID)
    {
        using (var ctx = new BackEndEntities())
        {
            try
            {
                var res = from n in ctx.Agents.Include("Orders")
                          where n.AgentID == agentID
                          select n;
                return res.FirstOrDefault();
            }
            catch (Exception ex)
            {
                throw ex;
            }
        }

    }

    public bool Update(Agent agent)
    {
        using (var ctx = new BackEndEntities())
        {
            try
            {
                agent.ModificationDate = DateTime.Now;
                ctx.Agents.Attach(agent);
                ctx.ObjectStateManager.ChangeObjectState(agent, System.Data.EntityState.Modified);
                ctx.SaveChanges();
                return true;
            }
            catch (Exception ex)
            {
                throw ex;
            }
        }
    }
} 
```

显然，这里的代码可能会更好，但我是一个 EF 新手。但我认为我的问题是上下文的设计问题。

我记得这里有人提到，如果我的上下文不共享，我就不会遇到这些死锁问题。

这对我来说似乎不是“共享的”，因为我在每种方法中都*使用了 new BackEndEntities()*，那么我必须进行哪些更改才能使其更健壮？

此 DAL 将用于在 Internet 上公开的 Web 服务（经过代码审查之后），因此我无法控制它的压力程度，并且许多不同的实例可能想要更新同一个实体。

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-03T08:30:25.737

thouse 死锁的原因不是您的代码，而是由于 EF 使用 SERIALIZABLE 作为默认 TransactionScope 隔离级别。

SERIALIZABLE 是可能的最受限制的锁定，这意味着您默认选择最严格的隔离级别，并且您可以期待很多锁定！

解决方案是根据您要执行的操作指定另一个 TransactionScope。您可以使用以下内容围绕您的 EF 操作：

```
using (var scope = new TransactionScope(TransactionScopeOption.Required, new 
        TransactionOptions { IsolationLevel= IsolationLevel.Snapshot }))
{
    // do something with EF here
    scope.Complete();
} 
```

阅读有关此问题的更多信息：

[http://blogs.msdn.com/b/diego/archive/2012/04/01/tips-to-avoid-deadlocks-in-entity-framework-applications.aspx](http://blogs.msdn.com/b/diego/archive/2012/04/01/tips-to-avoid-deadlocks-in-entity-framework-applications.aspx)

[http://blogs.u2u.be/diederik/post/2010/06/29/Transactions-and-Connections-in-Entity-Framework-40.aspx](http://blogs.u2u.be/diederik/post/2010/06/29/Transactions-and-Connections-in-Entity-Framework-40.aspx)

[http://blog.aggregatedintelligence.com/2012/04/sql-server-transaction-isolation-and.html](http://blog.aggregatedintelligence.com/2012/04/sql-server-transaction-isolation-and.html)

[https://serverfault.com/questions/319373/sql-deadlocking-and-timing-out-almost-constantly](https://serverfault.com/questions/319373/sql-deadlocking-and-timing-out-almost-constantly)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-28T20:36:57.847

在大型系统中，死锁自由是一个相当困难的问题。它本身与EF无关。

缩短事务的生命周期可以减少死锁，但会引入数据不一致。在您之前陷入僵局的那些地方，您现在正在破坏数据（没有任何通知）。

所以根据逻辑事务选择你的上下文生命周期和你的事务生命周期，而不是根据物理考虑。

打开快照隔离。这完全排除了阅读交易的问题。

要编写事务，您需要找到锁排序。通常它是悲观地锁定在更高级别的最简单方法。示例：您是否总是在客户的上下文中修改数据？将该客户的更新锁定作为交易的第一条语句。这通过序列化对该客户的访问来提供完全的死锁自由度。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-28T20:30:28.777

上下文赋予实体与数据库对话的能力，没有上下文就没有什么去哪里的概念。因此，启动上下文是一件大事，它占用了大量资源，包括数据库等外部资源。我相信您的问题是“新”命令，因为您将有多个线程试图启动并获取相同的数据库资源，这肯定会死锁。

您发布的代码似乎是反模式。从外观上看，您的实体上下文会相对快速地旋转并超出范围，而您的存储库 CRUD 对象似乎会持续更长的时间。

我为其实现实体的公司的方式传统上完全相反 - 只要程序集需要数据库，就会创建并保留上下文，并且在微秒内创建存储库 CRUD 对象并消亡。

我不能说你从哪里得到你的上下文没有被共享的断言，所以我不知道是在什么情况下说的，但你不应该*在程序集之间共享上下文是绝对正确的。* 在同一个程序集中，我看不出有什么理由不知道启动上下文需要多少资源，以及启动上下文需要多长时间。实体上下文非常繁重，如果您要通过单线程使当前代码工作，我怀疑您会看到一些绝对糟糕的性能。

因此，我建议改为重构它，以便您拥有`Create(BackEndEntites context)`and `Update(BackEndEntities context)`，然后让您的主线程（创建所有这些子线程的那个）创建并维护一个 BackEndEntities 上下文以传递给它的子线程。`AgentController`还要确保在使用完s 和s 后立即摆脱`OrderController`它们，并且永远不要在方法之外重用它们。实现一个好的控制反转框架，如 Ninject 或 StructureMap 可以使这变得容易得多。

# sql - 不可变的 SQL 列

> ID：12166523
> 
> 赞同：12
> 
> 时间：2012-08-28T19:50:01.817
> 
> 标签：sql, sql-server, sql-server-2008, ddl

`immutable`是否可以在 MSSQL中标记列？

似乎这将是一个有用的 DDL 功能；一旦在一行中设置了一个值（“行”被定义为值与主键的特定关系），如果不删除该行就无法更改它。

显然（像大多数事情一样）这在应用程序层是可行的，但 SQL DDL 的一半乐趣在于对应用程序代码进行错误检查。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-28T20:27:19.403

如果执行 DML 的用户不是对象的所有者，也不是数据库本身中的“db_owner”，您可以只授予“插入”权限，但不授予该表的更新权限：

假设一张桌子`id, col1, col2`

```
grant insert, select, delete on the_table to the_user;
grant update (id, col2) on the_table to the_user; 
```

有了这些授权， *the_user*可以插入行并为所有三列提供值。他还可以更新`id`和`col2`列，但不能更新`col1`列。

db_owner（也可能是表的创建者/所有者）始终可以更新所有列。我不知道是否有办法从这些角色中撤销该特权。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-03-25T12:40:54.890

这是可能的，使用这样的 UPDATE TRIGGER：

```
CREATE TRIGGER trgAfterUpdateAsset ON dbo.Asset
FOR UPDATE AS
IF UPDATE(AssetTypeID) AND EXISTS (SELECT * FROM inserted i JOIN deleted d ON i.ID = d.ID WHERE i.AssetTypeID <> d.AssetTypeID)
BEGIN 
    RAISERROR ('AssetTypeID cannot change.', 16, 1);
    ROLLBACK TRAN
END 
```

（注意：该表有一个主键列，称为 ID）。

如果 AssetTypeID 的值发生变化，我只会拒绝更新。因此，该列可能存在于更新中，并且如果它指定了旧值，那么它将通过。（我需要这种方式）

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-08-28T19:54:59.037

不，SQL Server 中没有这样的功能。

我能想到的最接近的是表上的更新触发器，它检查特定列中的值是否`INSERTED`与`DELETED`逻辑表相同，并拒绝更改行的更新。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-28T19:54:21.613

据我所知，这对于 DDL 是不可能的。但是，您可以实现 BEFORE UPDATE 触发器以满足您的要求。在 BEFORE UPDATE 触发器中，您可以引发异常或做任何您想做的事情，而不是更新行。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-28T22:29:22.523

另一种方法是拒绝对表的更新权限并创建一个不更新不可变字段的存储过程（用户确实有权执行）。

# java - Mozilla Rhino - 带有自定义对象的 ScriptableObject？

> ID：12166525
> 
> 赞同：0
> 
> 时间：2012-08-28T19:50:10.387
> 
> 标签：java, javascript, rhino

我正在为我的 Java 应用程序使用 Mozilla Rhino（JavaScript 引擎）。我像这样定义了一个 ScriptableObject：

```
public class TheObj extends ScriptableObject {
public TheObj(){
    //nothing
}
public TheObj(Scriptable scope, Scriptable prototype) {
    super(scope, prototype);
}

@Override
public String getClassName() {
    return "Foo";
}
@JSStaticFunction
public static Foo foo(Foo foo){
    return foo;
}

} 
```

Foo 类是：

```
public class Foo {
  public void bar(){
    System.out.println("it works");
  }
} 
```

但是当我尝试Scriptable 从`ScriptableObject.defineClass(scope, TheObj.class);`哪里开始时，它会抛出`scope``Context.enter().initStandardObjects();`

```
org.mozilla.javascript.EvaluatorException: Unsupported parameter type "Foo" in method "bar". 
```

我能做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T19:59:19.797

我想到了。我刚用`Context.jsToJava(Object, Class<?>);`

（其实函数 foo() 需要像 Java 一样使用 Foo 参数，而不仅仅是返回）

# c# - 可评论评论的正确数据结构

> ID：12166529
> 
> 赞同：1
> 
> 时间：2012-08-28T19:50:20.943
> 
> 标签：c#, sql, database-design

在架构层面上一直在努力解决这个问题。

我有一个可以评论的对象，我们称它为`Post`. 每个帖子都有一个唯一的 ID。

现在我想对该帖子发表评论，我可以使用 ID 作为外键，并且每个 PostComment 都有一个与帖子相关的 ItemID 字段。由于每个帖子都有一个唯一的 ID，因此很容易分配“顶级”评论。

然而，当我对评论发表评论时，我觉得我现在需要一个 PostCommentComment，它附加到 PostComment 的 ID。由于 ID 是按顺序分配的，因此我不能再简单地使用 ItemID 来区分评论在树中的分配位置。IE Post 和 Post Comment 的 ID 可能为“5”，因此我的外键关系无效。

这似乎可以无限持续下去，PostCommentCommentComment 等......

解决这个问题的最佳方法是什么？我是否应该在评论中有一个名为“IsPostComment”的字段或类似的东西来知道要将 ID 附加到哪个集合？这让我觉得这是迄今为止我见过的最好的解决方案，但现在我觉得我需要进行递归数据库调用，这开始变得昂贵。

意思是，我得到一个`Post`并得到所有的 PostComments`where ItemID == Post.ID && where IsPostComment == true`

然后我将其作为一个集合，收集 的所有 ID ，然后再`PostComments`进行一次搜索`where ItemID == PostComment[all].ID && where IsPostComment == false`，然后无限重复。

这意味着我对每一层都进行调用，如果我调用 100 个帖子，我可能会进行 1000 次 DB 调用以获得 10 层评论。

这样做的*正确*方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T19:58:59.687

我只会有一张名为`Post`.

```
CREATE TABLE Post
(
    PostID int PK,
    PostContent nvarchar,
    ParentPostID int FK null,
    ...
) 
```

帖子将具有 ID、帖子内容以及您需要的任何其他字段。它还将有一个 ParentPostID，它是`nullable`和外键的 to `PostID`。如果`ParentPostID`是`null`，您就知道它是原始帖子。如果有家长，您就知道该帖子是评论。这使您可以根据需要将注释嵌套得尽可能深。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T19:56:41.703

我会说你只会有 PostComment，而不是 PostCommentComment 或其他任何东西。

所有 PostComments 都有一个 PostId，因此当您加载该帖子的评论时，您只需通过 PostId 进行查询。

所有评论也有 ParentId，它指向另一个评论（顶级评论不会有 ParentId）。这样，每条评论都可以有任何深度的评论，但数据在数据库中保持不变。

使用给定的 PostId 加载所有评论后，您可以使用 ParentId 属性在内存中组装树/层次结构。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T20:03:24.613

将所有注释保持在同一个表结构中，并使用相同的 ID 序列。然后：

1.  使用`COMMENT_DEPTH`字段来指示递归级别。例如，postComment 有`COMMENT_DEPTH=0`where 作为对 postComment 的评论有`COMMENT_DEPTH=1`。

2.  也使用一个`PARENT_COMMENT`字段。对于具有的评论，它应该为 null`COMMENT_DEPTH=0`并且它应该包含父评论 ID if `COMMENT_DEPTH>0`。

这甚至可以让您拥有多个级别的评论。此外，您可以通过以下方式获得评论：

```
WHERE COMMENT_DEPTH=0 
```

您可以通过以下方式对评论 A 发表评论：

```
WHERE PARENT_COMMENT=A.ID AND COMMENT_DEPTH=A.COMMENT_DEPTH+1 
```

# android - SQLite 打开帮助器来初始化一些条目

> ID：12166531
> 
> 赞同：0
> 
> 时间：2012-08-28T19:50:35.263
> 
> 标签：android, sqlite

我是编程新手。我正在制作一个 Android 应用程序，我正处于一个新的阶段。我正在使用`SQLiteOpenHelper`该类来管理我的数据库。它很棒，我能够创建表格、添加条目和所有这些好东西。

我遇到的问题是，对于我的一张表，我希望有一个初始的 7 个条目，它们保持相同的 ID，并且可以由用户替换。我的计划是使用一种`SQLiteDatabase.replace()`方法来替换这些条目。由于我希望由我设置条目然后由用户编辑，这意味着我想使用`SQLiteOpenHelper`该类添加条目，以便仅在用户安装应用程序并创建数据库时设置这些条目。*我不想制作必须包含在安装包中的预填充数据库。*

我的 Java 技能太糟糕了，所以我的主要问题是**如何从我的`SQLiteOpenHelper`班级中添加条目？**我已经知道如何使用我制作的以下方法在我的其他类中添加条目：

```
public long createCategoriesSQLEntry(String name) {
    ContentValues cv = new ContentValues();
    cv.put(COLUMN_CATEGORIES, name);
    return myDatabase.insert(StringCategory_Table, null, cv);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T19:57:05.747

覆盖`onCreate()`数据库助手中的 。像这样。

```
@Override
    public void onCreate(SQLiteDatabase db) {
        // TODO Auto-generated method stub
        try{
            if(db.isOpen()){
                //create tables here
                db.execSQL("create table");
                db.execSQL("insert row");
                db.execSQL("insert row");
            }
        } 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-28T20:05:24.813

第一次安装应用程序时将安装您的数据库。因此，您可以将数据写入文件并将其加载到 SQLiteHandling 类的 onCreate 方法中，或者将数据写入您的 java 并像 Cyber​​Tengu 所说的那样在 onCreated 方法中调用它。

# objective-c - 在 Objective-C 中获取另一个应用程序的图标

> ID：12166532
> 
> 赞同：9
> 
> 时间：2012-08-28T19:50:35.620
> 
> 标签：objective-c, macos

如何使用 Objective-C 从另一个应用程序获取图标？

到目前为止我已经尝试过了，但是它只是返回`null`：

```
NSURL *path = [NSURL URLWithString:@"/Applications/Calculator.app"];

NSLog(@"%@", path);

NSImage *image = (__bridge NSImage *)(QLThumbnailImageCreate(kCFAllocatorDefault, (__bridge CFURLRef)(path), CGSizeMake(100, 100), (__bridge CFDictionaryRef)(@{(NSString *)kQLThumbnailOptionIconModeKey: @NO})));

NSLog(@"%@", image); 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-08-28T19:54:14.343

您可以使用 NSWorkspace，例如

```
NSImage *image = [[NSWorkspace sharedWorkspace] iconForFile:path]; 
```

如果你想使用应用程序`bundleId`而不是知道它的路径，你可以先这样做

```
path = [[NSWorkspace sharedWorkspace] absolutePathForAppBundleWithIdentifier:bundleIdentifier]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-28T19:56:39.530

我认为您正在寻找 [[NSWorkspace sharedWorkspace] iconForFile:pathToFile]

[https://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSWorkspace_Class/Reference/Reference.html#//apple_ref/doc/uid/20000391-iconForFile_](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSWorkspace_Class/Reference/Reference.html#//apple_ref/doc/uid/20000391-iconForFile_)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-28T20:09:46.340

应用程序的图标文件通常在 CFBundleIconFile 键下的 Info.plist 中定义。通过获取图标文件名，您可以从包的资源目录（路径到应用程序/内容/资源/）中获取此图标。

要获取 Info.plist 内容，您可以直接在 NSDictionary 中加载它（使用 dictionaryWithContentsOfFile:) 或从应用程序的 bundle 对象中获取它（例如 : `[[NSBundle bundleWithPath:path-to-anApp] infoDictionary])`.

图标文件将是 CFBundleIconFile 键的值（即：`iconFile = [infoDictionary valueForKey:@"CFBundleIconFile"]`。其路径将是：path-to-anApplication/Contents/Resources/iconFile）。

# winforms - WinForms：如何将图形和文本连续滚动到调试控制台？

> ID：12166533
> 
> 赞同：0
> 
> 时间：2012-08-28T19:50:37.960
> 
> 标签：winforms

我想将混合的文本和图片滚动到用 WinForms 编写的调试控制台。

例如，我可能会打印几行文本，然后是一个图表，然后是更多行文本，等等。

WinForms 中是否有某种形式的文本框，我不仅可以连续添加文本，还可以添加图片或图表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T06:53:44.813

您可以考虑一个富文本编辑控件。这是一个问题，其答案链接到一些选项。这个问题很老，所以你可能想重新谷歌。

[开源 .NET 富文本编辑器 UserControl 与 GUI 全部实现](https://stackoverflow.com/questions/4978531/open-source-net-rich-text-editor-usercontrol-with-gui-all-implemented)

# python - 模板中的 Django settings.py 变量

> ID：12166537
> 
> 赞同：7
> 
> 时间：2012-08-28T19:50:55.473
> 
> 标签：python, django, django-templates, django-settings

我遇到了一个非常奇怪的错误。我在我的`settings.py`文件中定义了一个应用 ID，如下所示：

```
CARDSPRING_APP_ID = '################' 
```

这几乎适用于我网站中的每个页面，除了一个。奇怪的是，其他变量也起作用。在页面上的脚本部分，我有以下内容：

```
alert("cs appid=" + {{ CARDSPRING_APP_ID }} + 
" sectoken=" + {{ securityToken }} + 
" timestamp= " +{{ timestamp }} + 
" hash = " + {{ digestedHash }} + 
" ccnum " + $('.card-number').val() + 
" exp" + $('.expiration-month').val() + $('.expiration-year').val() + 
" user = " + {{ csid }}); 
```

呈现页面时，它会评估为

```
alert("cs appid=" +  + 
" sectoken=" + DDFJRMZXD12WVWHFFC###### + 
" timestamp= " +1346183125 + 
" hash = " + a929b3aec9179c700c09d###### + 
" ccnum " + $('.card-number').val() + 
" exp" + $('.expiration-month').val() + $('.expiration-year').val() + 
" user = " + SG1###); 
```

重要的是，`{{ CARDSPRING_APP_ID }}`评价为无。有谁知道为什么会这样？谢谢！

**更新**

我尝试按照以下答案中的说明创建`context_processors.py`文件，并确保将其添加到`settings.py`. 我仍然没有运气-它在一页上进行评估，但在另一页上却没有

**更新 2**

使用以下命令调用模板：

```
return render_to_response('howto'+str(number)+'.html',locals(),context_instance= RequestContext(request)) 
```

**更新 3** 让它工作 - 需要将它添加到我的 settings.py

```
TEMPLATE_CONTEXT_PROCESSORS = global_settings.TEMPLATE_CONTEXT_PROCESSORS + (
    "myapp.context_processors.cardspring",
) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-28T19:56:06.663

创建一个名为`context_processors.py`并编写以下上下文处理器的文件：

```
from django.conf import settings

def cardspring(request):
    return { 'CARDSPRING_APP_ID': settings.CARDSPRING_APP_ID } 
```

然后添加`your.location.context_processors.cardspring`到`TEMPLATE_CONTEXT_PROCESSORS`您的 Django 设置文件中，`your.location`您的文件的位置在哪里`context_processors.py`。

# arrays - 访问数组属性

> ID：12166551
> 
> 赞同：2
> 
> 时间：2012-08-28T19:51:34.453
> 
> 标签：arrays, actionscript-3

```
var questions:Array = new Array;
questions[0] = "qname:mc_01, qvalue:1";
questions[1] = "qname:mc_02, qvalue:1";
questions[2] = "qname:mc_03, qvalue:1";
questions[3] = "qname:mc_04, qvalue:1";
questions[4] = "qname:mc_05, qvalue:1";
questions[5] = "qname:mc_06, qvalue:1";
questions[6] = "qname:mc_07, qvalue:1";
questions[7] = "qname:mc_08, qvalue:1";
questions[8] = "qname:mc_09, qvalue:1";
questions[9] = "qname:mc_10, qvalue:1";
questions[10] = "qname:mc_11, qvalue:2";
questions[11] = "qname:mc_12, qvalue:2";
questions[12] = "qname:mc_13, qvalue:2";
questions[13] = "qname:mc_14, qvalue:2";
questions[14] = "qname:mc_15, qvalue:2";
questions[15] = "qname:mc_16, qvalue:2";
questions[16] = "qname:mc_17, qvalue:2";
questions[17] = "qname:mc_18, qvalue:2";
questions[18] = "qname:mc_19, qvalue:2";
questions[19] = "qname:mc_20, qvalue:2";
questions[20] = "qname:mc_21, qvalue:3";
questions[21] = "qname:mc_22, qvalue:3";
questions[22] = "qname:mc_23, qvalue:3";
questions[23] = "qname:mc_24, qvalue:3";
questions[24] = "qname:mc_25, qvalue:3";
questions[25] = "qname:mc_26, qvalue:3";
questions[26] = "qname:mc_27, qvalue:3";
questions[27] = "qname:mc_28, qvalue:3";
questions[28] = "qname:mc_29, qvalue:3";
questions[29] = "qname:mc_30, qvalue:3"; 
```

我有这个数组，想访问该`qname`属性，但不记得该怎么做。`questions[0].qname`是类似的东西`questions[0](qname)`吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-28T19:53:45.670

您已将数组元素定义为字符串而不是对象。试试这个：

```
var questions:Array = new Array;
questions[0] = {qname:mc_01, qvalue:1};
... 
```

花括号代替双引号。使用引号创建字符串。使用花括号，您可以创建动态对象并设置它们的属性。因此，如果要为 创建字符串值`qname`，请确保将其定义为`qname:"mc_01"`而不是`qname:mc_01`。

因此，您可以使用`questions[0].qname`或`questions[0]["qname"]`访问属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T08:46:17.390

但是，如果您不能按照先前答案中的说明进行操作（例如，您从服务器获取这些字符串），则可以使用常规表达式很好地获取这些值：

```
var searchPattern : RegExp = /(?P<qname>(?<=qname\:)[a-zA-Z0-9_]+(?=[\s,]*))/g;
trace( searchPattern.exec(questions[1]).qname ); // traces out: mc_02 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T09:17:06.993

当您标记 ActionScript 3.0 时，它是一种强类型语言，我建议使用类型化类来保存您的数据结构。

```
package your.package.name
{
    public class Question
    {
        protected var _name:String;
        protected var _value:String;

        public function Question(name:String = null, value:String = null)
        {
            this.name = name;
            this.value = value;
        }

        public function get name():String 
        {
            return _name;
        }

        public function set name(value:String):void 
        {
            _name = value;
        }

        public function get value():String 
        {
            return _value;
        }

        public function set value(value:String):void 
        {
            _value = value;
        }
    }
} 
```

通过拥有 getter 和 setter 并在构造函数中公开这些道具，您可以通过两种方式创建它们：

```
var question:Question = new Question("Question1", "Question value"); 
```

或者：

```
var question:Question = new Question();
question.name = "Question1";
question.value = "Question value"; 
```

这在智能感知方面提供了好处，可以在您的 ide 中获取属性，并且还可以键入安全性以阻止您为名称和值输入不正确的类型。

然后抓住一个问题：

```
questions[0].name; // in this example Question1
questions[0].value; // in this example Question value 
```

通常，您的问题将来自某些数据源，例如 xml 或 Web 服务，无论我将在此示例中使用什么文字 xml，在这种情况下，您可能希望在某个循环中构建您的对象，例如：

```
var questionsXML:XML = 
<questions>
    <question name="Question1">Question1 value</question>
    <question name="Question2">Question2 value</question>
    <question name="Question3">Question3 value</question>
</questions> 
```

然后：

```
var questions:Array = [];

for each (var questionXML:XML in questionsXML.question) 
{
    var question:Question = new Question();
    question.name = questionXML.@name;
    question.value = questionXML.text();
    questions.push(question);
} 
```

# php - .htaccess 文件可能冲突？

> ID：12166558
> 
> 赞同：4
> 
> 时间：2012-08-28T19:52:24.803
> 
> 标签：php, .htaccess, mod-rewrite

我在服务器的 public_html 文件夹中有一个 .htaccess 文件，可以让我将主域保存在子文件夹中：

```
RewriteEngine on
RewriteCond %{HTTP_HOST} ^(www.)?mrmikeanderson.com$
RewriteCond %{REQUEST_URI} !^/mrmikeanderson/
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /mrmikeanderson/$1
RewriteCond %{HTTP_HOST} ^(www.)?mrmikeanderson.com$
RewriteRule ^(/)?$ mrmikeanderson/index.php [L] 
```

在该子文件夹中是另一个 .htaccess，它进行了更多的重写，以将以 /index.php?page=about 之类的内容结尾的 url 转换为 /about：

```
RewriteEngine On
RewriteRule ^$ index.php?page=home
RewriteRule portfolio index.php?page=portfolio
RewriteRule resume index.php?page=resume
RewriteRule about index.php?page=about
RewriteRule contact index.php?page=contact 
```

最后四页有效，但我对域名 (\^$) 的重写被破坏了。一切都在我的本地 MAMP 服务器上运行，但第一个 .htaccess 文件不存在，所以我认为这两者是冲突的。任何网络开发冠军都能够看到出了什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T20:22:23.173

尝试注释掉：

`RewriteRule ^(.*)$ /mrmikeanderson/$1`

看起来正则表达式`^(.*)$`将匹配包括空白字符串在内的任何内容，这将与`RewriteRule ^$ index.php?page=home`

编辑：尝试使用`([A-Za-z0-9]+)`代替`^(.*)$`which 应该给你：

`RewriteRule ^([A-Za-z0-9]+)$ /mrmikeanderson/$1`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T20:24:43.783

您始终可以设置重写日志以查看发生了什么[http://httpd.apache.org/docs/2.2/mod/mod_rewrite.html#rewritelog](http://httpd.apache.org/docs/2.2/mod/mod_rewrite.html#rewritelog)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T20:24:46.013

我假设您有`/mrmikeanderson/`第二个 htaccess 文件所在的文件夹。未应用的原因 `RewriteRule ^$ index.php?page=home`是因为您将`/`请求重定向到`mrmikeanderson/index.php`. 所以要么改变这个规则：

```
RewriteRule ^(/)?$ mrmikeanderson/index.php [L] 
```

到

```
RewriteRule ^(/)?$ mrmikeanderson/index.php?page=home [L] 
```

或在其他 htaccess 文件中更改此规则：

```
RewriteRule ^$ index.php?page=home 
```

到

```
RewriteRule ^(index.php)$ index.php?page=home 
```

或者您可以更改您的`index.php`文件以假定该变量`page`是`home`默认值。

# android - 如何通过xml为android中的按钮添加渐变？

> ID：12166559
> 
> 赞同：21
> 
> 时间：2012-08-28T19:52:25.100
> 
> 标签：android, xml, user-interface, button, colors

我无法弄清楚为什么这段代码不起作用。任何人都可以帮忙吗？我试图让按钮使用名为“greenstart”和“greenend”的自定义颜色。颜色已在 res/value/string.xml 文件中创建。我看过类似的问题，但要么没有答案，要么不清楚，要么解决方案不起作用。提前致谢。

XML 文件样本：

```
<Button
   android:id="@+id/mycollection"
   android:layout_width="match_parent"
   android:layout_height="fill_parent"
   android:layout_weight="1" >

   <Gradient
      android:angle="270"
      android:endColor="@color/greenstart"
      android:startColor="@color/greenend" >
   </Gradient>
</Button> 
```

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2012-08-28T19:56:36.727

创建一个新的xml文件并将其放入drawable中，然后将其添加到按钮作为背景

**渐变.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android"
android:shape="rectangle">
    <!--  Gradient Bg for listrow -->
   <gradient
      android:startColor="#f1f1f2"
      android:centerColor="#e7e7e8"
      android:endColor="#cfcfcf"
      android:angle="270" />
</shape> 
```

**布局.xml**

```
 <Button
    android:id="@+id/Button01"
    android:layout_width="wrap_content"
    android:layout_height="fill_parent"
    android:layout_weight="1"
    android:background="@drawable/gradient"
    android:text="Übernehmen" > 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-08-28T19:55:24.417

试试这个 ：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_pressed="true" >
        <shape>
            <solid
                android:color="#70c656" />
            <stroke
                android:width="1dp"
                android:color="#53933f" />
            <corners
                android:radius="3dp" />
            <padding
                android:left="10dp"
                android:top="10dp"
                android:right="10dp"
                android:bottom="10dp" />
        </shape>
    </item>
    <item>
        <shape>
            <gradient
                android:startColor="#70c656"
                android:endColor="#53933f"
                android:angle="270" />
            <stroke
                android:width="1dp"
                android:color="#53933f" />
            <corners
                android:radius="4dp" />
            <padding
                android:left="10dp"
                android:top="10dp"
                android:right="10dp"
                android:bottom="10dp" />
        </shape>
    </item>
</selector> 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2017-10-22T08:50:43.773

所以在这里我们使用渐变。如上所述@Dusean Singh 说。如果您将使用角度 270，那么您的渐变将从上到下开始：顶部 -> 中心 -> 底部

```
<shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="rectangle">
    <gradient
        android:startColor="#FF0000"
        android:centerColor="#00FF00"
        android:endColor="#0000FF"
        android:angle="270" />
</shape> 
```

[![在此处输入图像描述](../Images/e5be743bdec6c44de76cadba1e770325.png)](https://i.stack.imgur.com/Bj7xn.png)

如果您将使用 360 度角，那么您的渐变将从左到右开始：左 -> 中心 -> 右

```
<shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="rectangle">
    <!--  Gradient Bg for listrow -->
    <gradient
        android:startColor="#FF0000"
        android:centerColor="#00FF00"
        android:endColor="#0000FF"
        android:angle="360" />
</shape> 
```

[![在此处输入图像描述](../Images/17ce9a1aec39b0a059dc26a59af27bfd.png)](https://i.stack.imgur.com/Kxiyw.png)

下面我们来看看效果。以及如何在按钮上应用相同的

```
<LinearLayout
    android:id="@+id/design_bottom_sheet"
    android:layout_alignParentBottom="true"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal"
    android:weightSum="2">
    <Button
        android:drawableLeft="@drawable/ic_grid"
        android:layout_width="match_parent"
        android:text="Find"
        android:background="@drawable/gradient_button"
        android:textColor="@color/white"
        android:textAllCaps="false"
        android:layout_height="wrap_content"
        android:layout_weight="1" />
    <Button
        android:drawableLeft="@drawable/ic_card"
        android:layout_width="match_parent"
        android:textColor="@color/white"
        android:text="Match"
        android:background="@drawable/gradient_button"
        android:textAllCaps="false"
        android:layout_height="wrap_content"
        android:layout_weight="1" />
</LinearLayout> 
```

[![在此处输入图像描述](../Images/161a0b166eb109ab4f83efe7f6abc4c9.png)](https://i.stack.imgur.com/kAUFW.png)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-08-28T19:55:59.470

创造`gradient.xml`

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="rectangle" >

    <gradient
      android:angle="270"
      android:endColor="@color/greenstart"
      android:startColor="@color/greenend" />

</shape> 
```

# matlab - 氡变换矩阵表示

> ID：12166562
> 
> 赞同：7
> 
> 时间：2012-08-28T19:52:38.223
> 
> 标签：matlab, image-processing

我正在寻找一种[MATLAB](http://en.wikipedia.org/wiki/MATLAB)解决方案来生成离散[氡变换](http://en.wikipedia.org/wiki/Radon_transform)(DRT) 的矩阵表示。也就是说，给定一个 MxN 图像的矢量化版本`X`，我想生成一个矩阵`R`，它`R*X(:)`是图像的 DRT。在 MATLAB 中，我希望它看起来像下面这样：

```
>> X = 2D_Image_Of_Size_MxN;
>> R = DRT_Matrix_Of_Size_LPxMN;
>> DRT = reshape( R * X(:), L, P ); 
```

我知道有几种定义 DRT 的方法，所以我只想说我正在寻找一个*正常*的或*标准*的或*不太不寻常的实现*。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T02:53:56.773

```
function [ R rho theta ] = radonmatrix( drho, dtheta, M, N )
% radonmatrix - Discrete Radon Trasnform matrix
%
% SYNOPSIS
%   [ R rho theta ] = radonmatrix( drho, dtheta, M, N )
%
% DESCRIPTION
%   Returns a matrix representation of a Discrete Radon
%   Transform (DRT).
%
% INPUT
%   drho     Radial spacing the the DRT.
%   dtheta   Angular spacing of the DRT (rad).
%   M        Number of rows in the image.
%   N        Number of columns in the image.
%
% OUTPUT
%   R        LP x MN DRT matrix. The values of the L and
%            P will depend on the radial and angular spacings.
%   rho      Vector of radial sample locations.
%   theta    Vector of angular sample locations (rad).
%

% For each angle, we define a set of rays parameterized
% by rho. We then find the pixels on the MxN grid that
% are closest to each line. The elements in R corresponding
% to those pixels are given the value of 1.

% The maximum extent of the region of support. It's for
% rho = 0 and theta = pi/4, the line that runs caddy-corner.
W = sqrt( M^2 + N^2 );

rho = -W/2 : drho : W/2;
theta = 0 : dtheta : 180 - dtheta;

L = length( rho );
P = length( theta );

R = false( L*P, M*N );

% Define a meshgrid w/ (0,0) in the middle that
% we can use a standard coordinate system.
[ mimg nimg ] = imggrid( 1, 1, [ M N ] );

% We loop over each angle and define all of the lines.
% We then just figure out which indices each line goes
% through and put a 1 there.
for ii = 1 : P

  phi = theta(ii) * pi/180;

  % The equaiton is rho = m * sin(phi) + n * cos(phi).
  % We either define a vector for m and solve for n
  % or vice versa. We chose which one based on angle
  % so that we never g4et close to dividing by zero.
  if( phi >= pi/4 && phi <= 3*pi/4 )

    t =  -W : min( 1/sqrt(2), 1/abs(cot(phi)) ) : +W;
    T = length( t );

    rhom = repmat( rho(:), 1, T );
    tn = repmat( t(:)', L, 1 );
    mline = ( rhom - tn * cos(phi) ) ./ sin(phi);

    for jj = 1 : L
      p = round( tn(jj,:) - min( nimg ) ) + 1;
      q = round( mline(jj,:) - min( mimg ) ) + 1;  
      inds = p >= 1 & p <= N & q >= 1 & q <= M;
      R( (ii-1)*L + jj, unique( sub2ind( [ M N ], q(inds), p(inds) ) ) ) = 1;
    end

  else

    t =  -W : min( 1/sqrt(2), 1/abs(tan(phi)) ) : +W;
    T = length( t );

    rhon = repmat( rho(:)', T, 1 );    
    tm = repmat( t(:), 1, L );
    nline = ( rhon - tm * sin(phi) ) ./ cos(phi);

    for jj = 1 : L
      p = round( nline(:,jj) - min( nimg ) ) + 1;
      q = round( tm(:,jj) - min( mimg ) ) + 1;  
      inds = p >= 1 & p <= N & q >= 1 & q <= M;
      R( (ii-1)*L + jj, unique( sub2ind( [ M N ], q(inds), p(inds) ) ) ) = 1;
    end

  end

end

R = double( sparse( R ) );

return; 
```

这是`imggrid`上面使用的函数。

```
function [ m n ] = imggrid( dm, dn, sz )
% imggrid -- Returns rectilinear coordinate vectors
%
% SYNOPSIS
%   [ m n ] = imggrid( dm, dn, sz )
%
% DESCRIPTION
%   Given the sample spacings and the image size, this
%   function returns the row and column coordinate vectors
%   for the image. Both vectors are centered about zero.
%
% INPUT
%   dm     Spacing between rows.
%   dn     Spacing between columns.
%   sz     2x1 vector of the image size: [ Nrows Ncols ].
%
% OUTPUT
%   m      sz(1) x 1 row coordinate vector.
%   n      1 x sz(2) column coordinate vector.

M = sz(1);
N = sz(2);

if( mod( M, 2 ) == 0 )
  m = dm * ( ceil( -M/2 ) : floor( M/2 ) - 1 )';
else
  m = dm * ( ceil( -M/2 ) : floor( M/2 ) )';
end

if( mod( N, 2 ) == 0 )
  n = dn * ( ceil( -N/2 ) : floor( N/2 ) - 1 );
else
  n = dn * ( ceil( -N/2 ) : floor( N/2 ) );
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-01T19:58:38.983

```
image = phantom();
projection = radon(image);
R = linsolve(reshape(image,1,[]), reshape(projection,1,[])); 
```

# asp.net-mvc - 在 ASP MVC 中找不到自定义路由

> ID：12166566
> 
> 赞同：0
> 
> 时间：2012-08-28T19:52:48.027
> 
> 标签：asp.net-mvc, vb.net, asp.net-mvc-3

我创建了这条路线：

```
 routes.MapRoute( _
        "Pages", _
        "Pages/{id}/{title}", _
        New With {.controller = "Home", .action = "Pages", .id = UrlParameter.Optional, .title = UrlParameter.Optional} _
    ) 
```

然后，我在“主页”控制器中创建了以下“页面”操作：

```
Function Pages(Optional ByVal id = 0, Optional ByVal title = "") As ActionResult

    Dim db As NavDbContext = New NavDbContext
    Dim page = db.Tbl_Navigations.Where(Function(p) p.NAV_ID = id)

    If (page.Any) Then

        Dim _title = page.Single.NAV_Element.ToString
        Dim content = page.Single.NAV_Content.ToString
        ViewBag.Title = _title
        ViewBag.Content = content

    End If

    Return View()

End Function 
```

当我导航到 ~/Pages/8/MyPage（这是我数据库中的有效 ID）时，它显示“找不到资源”。我怎样才能正确路由呢？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T20:34:44.900

路由中不能有多个`UrlParameter.Optional`，可选参数必须是路由中的最后一个参数。`UrlParameter.Optional`从路线的 id 部分中 删除。

```
routes.MapRoute( _
        "Pages", _
        "Pages/{id}/{title}", _
        New With {.controller = "Home", .action = "Pages", .title = UrlParameter.Optional}) 
```

和控制器动作方法

```
Function Pages(ByVal id As Integer, Optional ByVal title = "") As ActionResult 
```

如果此路由需要这两个参数，则无需将任何参数指定为可选参数，以确保该特定路由**仅**处理它应该处理的请求。

```
routes.MapRoute( _
        "Pages", _
        "Pages/{id}/{title}", _
        New With {.controller = "Home", .action = "Pages"}) 
```

和控制器动作方法

```
Function Pages(ByVal id As Integer, ByVal title As String) As ActionResult 
```

# python - Django - 测试 - @login_required 装饰器的问题

> ID：12166568
> 
> 赞同：8
> 
> 时间：2012-08-28T19:52:57.543
> 
> 标签：python, django, unit-testing, testing, django-authentication

## 问题

**更新**`@login_required`：事实证明，这个问题与装饰器无关！

当我尝试测试用`@login_required`.

我有一个测试实际上能够进入装饰有`@login_required`（密码更改视图）的视图。然而，一个不同的测试总是被重定向到登录。无论我尝试以哪种方式重写它，它都不会让我的测试用户通过，即使我正在登录用户并`user.is_authenticated()`事先声明它。

这是有问题的测试的相关片段：

```
# Log user in
self.client.login(username=user.username, password=user.password)
self.assertTrue(user.is_authenticated())

# Go to account_edit view
url = reverse('account_edit')
response = self.client.get(url)
self.assertEqual(response.status_code, 200)
self.assertTemplateUsed(response, 'users/account_edit_form.html') 
```

这不可避免地会重定向到登录视图，就好像用户没有登录一样。

我可以确认此行为未反映在应用程序的“正常”功能中；当我实际运行服务器然后导航到该视图时，装饰器的工作方式与预期完全一样（即它允许登录时访问，并重定向到登录视图）。

使用 Django 1.3.1。我正在使用 django-nose 的 testrunner，但我可以确认无论我使用哪个 testrunner，都会发生此问题。

另外，我发现了几个以前的问题，但建议的解决方案要么是特定于旧版本的 Django，要么在这种情况下没有帮助（例如，请参见[此处）。](https://stackoverflow.com/questions/2705235/django-test-failing-on-a-view-with-login-required)

## 解决方案（结合两个好的答案）

对于这个问题，我收到了两个非常好的答案，这两个都突出了我发布的片段中的重要疏忽。该问题与`@login_required`' 的行为无关，与 (a) 错误地签署用户和 (b) 检查用户身份验证错误有关。

我很难选择接受哪个答案，但经过一番思考，我决定接受 Konrad Hałas 的答案，因为它指出了我的关键疏忽，这是意外行为的根源。

尽管如此，如果我没有使用有故障的测试线，我会更快地发现这一点`self.assertTrue(user.is_authenticated())`。因此，为了强调解决方案实际上是两部分，以下是修复有问题的代码的两个步骤：

```
# Log user in *NOTE: Password needs to be raw (from Konrad's answer)
self.client.login(username=user.username, password="pass")
self.assertTrue(user.is_authenticated()) # <-- still not correct 
```

断言行仍然有问题，因为有效用户总是满足`user.is_authenticated()`. 有关此问题的说明，请参阅 Alasdair 的信息。所以修复此代码的第二步是：

```
# Log user in *NOTE: Password needs to be raw (from Konrad's answer)
login_successful = self.client.login(username=user.username, password="pass")
self.assertTrue(login_successful) # Much better! (see Alasdair's answer) 
```

最后，如果您需要测试您的用户是否在*没有*使用的情况下登录`client.login`（即测试登录表单），这应该可以工作：

```
self.assertTrue(response.context['user'].is_authenticated()) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-28T19:57:51.370

`user.password`是密码哈希。你不能用它登录。您需要使用原始密码：

```
self.client.login(username=user.username, password='<user password>') 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-28T20:36:36.647

这里的问题是该[`is_authenticated`](https://docs.djangoproject.com/en/dev/topics/auth/#django.contrib.auth.models.User.is_authenticated)方法*总是*返回`True`一个`User`实例。

在模板或视图中它可能很有用 - 如果`request.user.is_authenticated()`是`True`，那么您有一个真正的用户，而不是`AnonymousUser`，并且可以相应地继续。但是，如果您从一个`User`对象开始，就像您所做的那样，那么`is_authenticated()`可能会令人困惑！

可以查看测试客户端[`login()`](https://docs.djangoproject.com/en/dev/topics/auth/#django.contrib.auth.models.User.is_authenticated)方法的返回值来测试是否成功。

```
login_successful = c.login(username='fred', password='secret')
self.assertTrue(login_successful) 
```

# java - Java MongoDB 获取子文档的价值

> ID：12166573
> 
> 赞同：6
> 
> 时间：2012-08-28T19:53:29.700
> 
> 标签：java, mongodb, mongodb-java

我试图从子文档中获取键的值，但我似乎无法弄清楚如何使用 BasicDBObject.get() 函数，因为键嵌入了两层深。这是文档的结构

```
File { 
  name: file_1
    report: {
      name: report_1,
      group: RnD
    }
} 
```

基本上一个文件有多个报告，我需要检索给定文件中所有报告的名称。我能够做到`BasicDBObject.get("name")`并且可以获得值“file_1”，但是我该怎么做`BasicDBObject.get("report.name")`呢？我试过了，但没有用。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-29T06:37:39.303

您应该首先获取“报告”对象，然后访问其内容。您可以在下面看到示例代码。

```
DBCursor cur = coll.find();

for (DBObject doc : cur) {
    String fileName = (String) doc.get("name");
    System.out.println(fileName);

    DBObject report = (BasicDBObject) doc.get("report");
    String reportName = (String) report.get("name");
    System.out.println(reportName);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T19:30:00.257

我在另一篇文章中找到了第二种方法（没有保存链接，否则我会包括在内）。

```
(BasicDBObject)(query.get("report")).getString("name") 
```

where query = (BasicDBObject) cursor.next()

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-05-16T07:47:30.093

您还可以使用查询，例如 MongoTemplate 等...

```
Query query = new Query(Criteria.where("report.name").is("some value")); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-13T21:30:40.260

你可以试试这个，这对我有用

`BasicDBObject query = new BasicDBObject("report.name", "some value");`

# nhibernate - Fluent NHibernate - 为相同类型的相关实体映射多对多关系

> ID：12166580
> 
> 赞同：0
> 
> 时间：2012-08-28T19:53:57.190
> 
> 标签：nhibernate, fluent-nhibernate

我试图弄清楚如何构建我的实体映射以实现以下目标：

```
public class Document
{
    public virtual string Name { get; set; }
    // Other properties
    public IList<Document> RelatedDocuments { get; set; }
} 
```

我想要一个包含相关`Document`s 的 ID 对的关系表。

现在我正在使用这个 SO 问题中描述的解决方案来解决这个问题：[Fluent Nhibernate 映射相关项目](https://stackoverflow.com/questions/3024561/fluent-nhibernate-mapping-related-items)（疯狂的巧合，OP 的名称与我的相同）。

我宁愿有一个相关项目的列表，而不必有一个 for`RelatedTo`和一个 for `RelatedFrom`。那可能吗？

* * *

澄清一下，我要解决的问题是，如果我将文档 A 与文档 B 相关联，我需要文档 A 的`RelatedDocuments`列表中包含文档 B，并且文档 B 的`RelatedDocuments`列表中包含文档 A，*而无需创建两个关系*。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T23:51:57.573

尝试这样的事情：

```
class Document
{
    public int Id { get; set; }
    public string Name { get; set; }
    public IList<Document> Related { get; set; }

    public void RelateTo(Document other) 
    {
      this.Related.Add(other);
      other.Related.Add(this);
    }
}

class DocumentMap : FluentNHibernate.Mapping.ClassMap<Document>
{
    public DocumentMap()
    {
        Table("Documents");
        Id(x => x.Id);
        Map(x => x.Name);
        HasManyToMany(x => x.Related)
            .Table("DocumentRelations")
            .ParentKeyColumn("DocumentId")
            .ChildKeyColumn("RelatedDocumentId");
    }
} 
```

该`DocumentRelations`表是指定`RelatedDocumentId`与 相关的关联表`DocumentId`。这些表看起来像：

```
create table Documents
(
  Id int identity primary key clustered,
  Name varchar(100)
)

create table DocumentRelations
(
 DocumentId int,
 RelatedDocumentId int,
 primary key clustered (DocumentId,RelatedDocumentId)
) 
```

您应该考虑是否需要与关系本身关联的任何数据。在这种情况下，相关集合将是相关文档实例的集合，这些实例将相关文档作为属性，并且映射将是 HasMany。

# asp.net - 用于流量加密的公共反向代理后面的 WCF

> ID：12166587
> 
> 赞同：6
> 
> 时间：2012-08-28T19:54:22.780
> 
> 标签：asp.net, wcf, silverlight, wcf-binding, wcf-security

我有一个连接到 WCF 服务的 Silverlight 应用程序。在我习惯的基本配置下，将此应用程序连接到其对应的 WCF 服务是没有问题的。

然而，最近，我的一个客户开始使用 Apache 反向代理。此代理是公共服务器，它仅用于通过客户端和它之间的 SSL (HTTPS) 加密 HTTP 流量。此代理将所有流量从它传递到托管我的应用程序的实际 Web 服务器。公共代理和 IIS 服务器之间的流量只是普通的 HTTP。

**所以流量像这样流动：** 最终用户浏览器---HTTPS---->公共反向代理----HTTP---->承载WCF服务的IIS服务器。

反向代理和 IIS 位于两个单独的服务器上。

我无法让 Silverlight 应用程序正常运行。我不确定如何配置端点？每当我使用公共代理的地址作为我的端点地址时，我都会遇到问题。

Silverlight 应用程序通常具有以下配置：

```
<configuration>
    <system.serviceModel>
        <bindings>
            <basicHttpBinding>
                <binding name="BasicHttpBinding_IPOTemplateEditorSrv" maxBufferSize="2147483647"
                    maxReceivedMessageSize="2147483647">
                    <security mode="TransportWithMessageCredential" />
                </binding>
            </basicHttpBinding>
        </bindings>
        <client>
            <endpoint address="https://public-reverse-proxy-url/POTemplateEditorSrv.svc"
                binding="basicHttpBinding" bindingConfiguration="BasicHttpBinding_IPOTemplateEditorSrv"
                contract="POEditorSrvRef.IPOTemplateEditorSrv" name="BasicHttpBinding_IPOTemplateEditorSrv" />
        </client>
    </system.serviceModel>
</configuration> 
```

请注意，我正在使用并且我的端点地址指向反向代理的公共 HTTPS 地址。

我错过了什么吗？是否有任何其他信息可以配置代理？任何可以让我的 Silverlight 客户端连接到服务的解决方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-04T23:03:48.213

也许这个答案有点太明显了，但它听起来就像 WSDL 正在将一个内部主机名作为 WCF 地址进行广告 - 当该地址不是实际的公共地址时。因为 IIS 正在生成 WSDL，它只会在端点地址中使用它的主机名——这不是你想要的，你想要的是代理的地址。

尝试创建 WSDL 文件的静态副本，并将其发布到 Web 服务器上。确保将 ALL REFERENCES 替换为内部主机名，并使用公共代理主机名。然后修改您的 WCF 客户端配置以指向静态 WSDL。您可以在此处找到简短说明：[在 WCF Web 服务的 WSDL 中提供不同的端点地址](https://stackoverflow.com/questions/5073936/supply-a-different-endpoint-address-in-the-wsdl-of-a-wcf-web-service)

如果这不起作用 - 尝试使用嗅探器（wireshark）来捕获来回发送的内容 - 禁用 HTTPS 可能是您需要从等式中删除的部分。您的 Web 服务请求似乎已发送到代理，但代理无法正确处理请求 - 尝试我们的嗅探工具的完美场景。

当您使用 Web 浏览器向 SVC 发出直接请求时，请求将如下所示

```
GET /POTemplateEditorSrv.svc HTTP/1.1
Host: public-reverse-proxy-url 
```

但是当通过 Silverlight 发送时，它可能看起来像这样

```
GET /POTemplateEditorSrv.svc HTTP/1.1
Host: private-server-address 
```

这可能是一个足以扰乱代理的微妙差异。

# c# - 如何获取用户名@域格式的当前 Windows 用户名？

> ID：12166589
> 
> 赞同：11
> 
> 时间：2012-08-28T19:54:24.107
> 
> 标签：c#, windows, security, active-directory, windows-identity

我知道以下函数以域\用户名格式返回当前 Windows 用户名。

```
Convert.ToString( WindowsIdentity.GetCurrent().Name ); 
```

但是如何获取`username@domain`格式中的用户名呢？

编辑：

我在此编辑中做出回应，因为所有回复的人都有相同的基本想法。

根据我的理解，从`domain\username`格式解析名称并将其构造为`username@domain`不安全或不建议的。我相信是这样，因为不能保证两个域名在不同格式下是相同的。例如，在我工作的公司中，格式的`domain`一部分`domain\username`是基于部门的，但在 中`username@domain`，它是公司名称。这是需要DNS查找的那种东西。

我希望有一个 API 可以进行 DNS 查找。我想我应该把这些信息放到我原来的问题中。对不起。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-28T20:13:45.003

像这样的东西应该工作......

```
string[] temp = Convert.ToString(WindowsIdentity.GetCurrent().Name).Split('\\');
string userName = temp[1] + "@" + temp[0]; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-28T20:11:59.283

```
var input =  WindowsIdentity.GetCurrent().Name ;
string[] tab = input.Split('\\');
var result = tab[1] + "@" +  tab[0]; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-11T13:58:21.947

以`Domain\user name`格式获取名称并对其进行解析的所有代码并非在所有情况下都有效。答案是您必须调用 Active Directory 以获取用户主体名称。事实证明，我不能依赖安装在桌面上的 Active Directory，因为许多警察部门不会在他们的笔记本电脑上安装目录，以防警察不在车内时它被盗。（谈论勇敢，从警车里偷电脑！）

我们已经针对我们的情况提出了自己的解决方案。我们将用户名以`Domain\user name`格式存储在我们的数据库中。当程序启动时，它会检查当前的 windows 用户名（格式相同）是否在数据库中。如果是，程序将该用户用作当前用户并运行。如果当前 Windows 用户不在我们的数据库中，程序将回退到我们之前的代码。

这样，用户可以使用任何格式的用户名登录机器，并通过 Windows 进行身份验证。我们的程序总是获取相同格式的用户名，并且总是检查该格式的用户名。Windows 验证用户而不是我们。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-09-23T16:28:10.680

采用

```
System.DirectoryServices.AccountManagement.UserPrincipal.Current.UserPrincipalName 
```

这将返回当前用户的 UPN。需要对 System.DirectoryServices.AccountManagement 的引用。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-08-28T20:11:18.687

您可以使用`\`分隔符拆分名称，然后像这样颠倒顺序：

```
string[] splitName = WindowsIdentity.GetCurrent().Name.Split('\\');
//check that splitName contains at least 2 values before using
string name = (splitName.Length > 1) ? splitName[1] + "@" + splitName[0] : null; 
```

重要的是要注意双反斜杠`\\`是必需的，因为反斜杠是一个特殊字符。我们在上面的示例中添加了第二个反斜杠来转义特殊字符并将其用作常规字符。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-28T20:16:58.437

沿着这些思路。

```
var nameParts = WindowsIdentity.GetCurrent().Name.Split(@"\");
string name = nameParts.Length == 1 
    ? nameParts  
    : string.format("{0}@{1}",nameParts[1],nameParts[0]); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2022-01-31T08:34:59.793

我已经看到了很多相同的变体，为什么不把它放到一个函数中，比如：

```
string GetUserName()
{
    var currentName =  WindowsIdentity.GetCurrent()?.Name;
    if (string.IsNullOrEmpty(currentName)) return null;
    var nameSplit = currentName.Split(@"\");
    string name = (nameSplit.Length > 1)
                    ? $"{nameSplit[1]}@{nameSplit[0]}" : currentName;
    return name;
} 
```

# android - 无法在 JNI 中更新作业

> ID：12166590
> 
> 赞同：0
> 
> 时间：2012-08-28T19:54:31.877
> 
> 标签：android, c, java-native-interface

我的应用程序是一个带有一些本机代码的 Android 应用程序。

Java 代码通过 new Thread(new Runnable) 启动一个线程，在本机代码中，我通过 AttachCurrentThread 将该线程附加到 JVM。

在该线程中调用的本机函数是一个无限循环，它将侦听简单事件（布尔变量）并调用另一个本机函数，该函数通过使用正确的 JNIEnv 指针和 jobject 将填充 Java 端的 2 个 Java 变量并调用 void方法来显示数据。该循环的原因是正常调用函数的开销（有很多分配和销毁要做）很可能是巨大的。

唯一的问题是，虽然我可以更新 JNIEnv 指针，但我不知道如何为作业对象执行此操作。

通过jobject，我的意思是通过函数调用传递给本机代码的jobject，如下所示

```
jint Java_com_example_example_MainActivity_NativeFunc( JNIEnv* env,
                                              jobject obj)
{
    return;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T18:20:00.713

> Java 代码通过 new Thread(new Runnable) 启动一个线程，在本机代码中，我通过 AttachCurrentThread 将该线程附加到 JVM。

您不必将 JVM 附加到使用 Java 代码创建的线程，它已经附加。

如果我正确理解了您的问题，您将获得`jobject`一次并希望稍后在其他本机方法中访问该对象。为此，您可以使用[NewGlobalRef](http://docs.oracle.com/javase/1.5.0/docs/guide/jni/spec/functions.html#NewGlobalRef)：

```
jobject myGlobalReference = env->NewGlobalRef(obj); 
```

您可以将其存储`jobject`在全局 C/C++ 变量中并稍后使用。它将一直有效，直到 JVM 死亡或您使用[DeleteGlobalRef](http://docs.oracle.com/javase/1.5.0/docs/guide/jni/spec/functions.html#DeleteGlobalRef)删除引用。请记住，只要您不删除全局引用，如果对它的所有 Java 引用都消失了，**垃圾收集将不会收集引用的对象！**

# xml - 为要在移动设备上查看的 KML 文件创建自定义图层

> ID：12166591
> 
> 赞同：0
> 
> 时间：2012-08-28T19:54:35.477
> 
> 标签：xml, google-maps, mobile, maps, kml

我需要向 200 人推送大约 200 个 KML 谷歌地图。

这些地图每个都有大约 200-300 个地标。

每个地标都是帐户、潜在帐户或过去的帐户。

我用不同颜色的别针对每种类型的地标进行分类。

我想知道用户如何一次只能看到一种类型的图钉。我知道我们可以通过使用来做到这一点`FOLDERS`，但我认为更好的方法是使用`LAYERS`.

我认为图层更好的原因是因为在移动设备上它们更容易使用。

**您能否指出一个简单的示例，说明如何在可以在谷歌地图中查看的同一个 KML 文件上使用多个图层？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T20:02:52.930

可能最简单的方法是使用 FusionTablesLayers。您可以导入 KML 文件，然后动态查询要显示的数据并动态设置信息样式。

*   [FusionTableLayers](https://developers.google.com/maps/documentation/javascript/layers#FusionTables)
*   [FusionTableLayers的动态样式](https://developers.google.com/maps/documentation/javascript/layers#fusion_table_styles)

您可以[将 KML 导入 Fusion Tables](http://support.google.com/fusiontables/bin/answer.py?hl=en&answer=181717)，然后查看[FusionTablesLayer 向导](http://fusion-tables-api-samples.googlecode.com/svn/trunk/FusionTablesLayerWizard/src/index.html)和/或[FusionTablesLayer Builder](http://gmaps-samples.googlecode.com/svn/trunk/fusiontables/fusiontableslayer_builder_new.html)

# c# - 相对 url 正则表达式不允许空格

> ID：12166599
> 
> 赞同：0
> 
> 时间：2012-08-28T19:55:10.013
> 
> 标签：c#, asp.net, regex

我有以下正则表达式来检查相对 url 有一个函数可以检查 url 并在其正常时返回 true，以下工作：

```
MyCustomPage.aspx?name=John&last=smith&type=Person 
```

但是，当我的姓氏中有两个以上的单词并用空格分隔时，以下情况会返回 false

```
MyCustomPage.aspx?name=John&last=smith+connors&type=Person 
```

看到+connors，这不会评估...但是如果我删除检查..它会很好..

这是正则表达式

```
Regex IsRelative = new Regex(@"^([a-zA-Z0-9]+)+\.[a-zA-Z/]*(((\?)([a-zA-Z]*=\w*)){1}((&)([a-zA-Z]*=\w*))*)?$"); 
```

在我的函数中，我根据该正则表达式检查 url 是否有效

```
IsRelative(MyUrl) 
```

如果那里有空间，我需要它让它通过，但我不确定如何......任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T19:58:40.627

您应该允许加号 (+) 作为参数值：

```
Regex IsRelative = new Regex(@"^([a-zA-Z0-9]+)+\.[a-zA-Z/]*(((\?)([a-zA-Z]*=[\w\+]*)){1}((&)([a-zA-Z]*=[\w\+]*))*)?$"); 
```

在这里，我更改`\w`为`[\w\+]`，其中正则表达式检查参数值。通过此更改，您将允许在每个参数的等号 (=) 右侧具有加号 (+) 的 url。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T19:58:50.237

在您的正则表达式中，您使用 \w 来匹配名称/值对中 = 之后的任何内容。但是，由于您正在处理一个 URL，您要么需要对其进行解码，要么考虑 + 不是 \w 字符类的一部分这一事实。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T20:01:59.697

试试[http://www.regexplanet.com/advanced/java/index.html](http://www.regexplanet.com/advanced/java/index.html) 这是一个正则表达式测试页面。

您的问题的问题是“加号”是一个正则表达式保留符号。您必须放置一个“反斜杠”来处理它。

^name=([A-Za-z]+)&last=([A-Za-z+]+)&type=([A-Za-z]+)$

# xpages - Dojo xhrGet with sync:false 问题与 xe:viewJsonLegacyService 和 Domino 8.5.3 SP1

> ID：12166601
> 
> 赞同：0
> 
> 时间：2012-08-28T19:55:19.240
> 
> 标签：xpages, xpages-extlib

由于我们将开发服务器从 Domino 8.5.3 升级到 8.5.3 FP1，我们遇到了一个非常奇怪的问题。我们使用 xe:viewJsonLegacyService 以 json 格式输出视图内容，并使用参数 sync:false 执行 xhrGet。通过这种方式，我们能够一次向 xe:viewJsonLegacyService xagent 页面发出多个请求，并在请求完成时处理它们。

在 Lotus Domino FP1 之后，sync:false 不再可用，如果我们同时触发三个请求，它将为两个请求返回错误 500，并在一个请求（每次）时返回成功。我创建了一个示例数据库，向您展示出了什么问题。但我不确定这是因为扩展库或 Xpages 中的问题。

也许有人有这方面的经验，也许是一种解决方法？

[我在此处](http://www.openntf.org/Projects/pmt.nsf/C3765C6C79C09D5A86257A68003D3149/%24file/xhrprobl.zip)创建了一个示例应用程序以供下载，我在其中演示了该问题。它将在 Domino 8.5.3 SP1/SP2 安装上失败，但在 Domino 8.5.3 安装上不会。它需要扩展库。

编辑：这是从服务器 java.lang.NullPointerException com.ibm.xsp.webapp.FacesServlet.acquireSyncToken(FacesServlet.java:285) com.ibm.xsp.webapp.FacesServletEx.serviceView(FacesServletEx.java: 161）com.ibm.xsp.webapp.FacesServlet.service（FacesServlet.java:160）com.ibm.xsp.webapp.FacesServletEx.service（FacesServletEx.java:138）com.ibm.xsp.webapp.DesignerFacesServlet.service（ DesignerFacesServlet.java:103) com.ibm.designer.runtime.domino.adapter.ComponentModule.invokeServlet(ComponentModule.java:576) com.ibm.domino.xsp.module.nsf.NSFComponentModule.invokeServlet(NSFComponentModule.java:1281) com.ibm.designer.runtime.domino.adapter.ComponentModule$AdapterInvoker.invokeServlet(ComponentModule.java:847) com.ibm.designer.runtime.domino.adapter.ComponentModule$ServletInvoker。doService(ComponentModule.java:796) com.ibm.designer.runtime.domino.adapter.ComponentModule.doService(ComponentModule.java:565) com.ibm.domino.xsp.module.nsf.NSFComponentModule.doService(NSFComponentModule.java:第1265章 com.ibm.domino.xsp.module.nsf.NSFService.doServiceInternal(NSFService.java:653) Designer.runtime.domino.adapter.LCDEnvironment.doService(LCDEnvironment.java:341) com.ibm.designer.runtime.domino.adapter.LCDEnvironment.service(LCDEnvironment.java:297) com.ibm.domino.xsp.bridge。 http.engine.XspCmdManager.service(XspCmdManager.java:272)doService(NSFComponentModule.java:1265) com.ibm.domino.xsp.module.nsf.NSFService.doServiceInternal(NSFService.java:653) com.ibm.domino.xsp.module.nsf.NSFService.doService(NSFService.java:第476章 com.ibm.designer.runtime.domino.adapter.LCDEnvironment.doService（LCDEnvironment.java:341） domino.xsp.bridge.http.engine.XspCmdManager.service(XspCmdManager.java:272)doService(NSFComponentModule.java:1265) com.ibm.domino.xsp.module.nsf.NSFService.doServiceInternal(NSFService.java:653) com.ibm.domino.xsp.module.nsf.NSFService.doService(NSFService.java:第476章 com.ibm.designer.runtime.domino.adapter.LCDEnvironment.doService（LCDEnvironment.java:341） domino.xsp.bridge.http.engine.XspCmdManager.service(XspCmdManager.java:272)服务（LCDEnvironment.java:297）com.ibm.domino.xsp.bridge.http.engine.XspCmdManager.service（XspCmdManager.java:272）服务（LCDEnvironment.java:297）com.ibm.domino.xsp.bridge.http.engine.XspCmdManager.service（XspCmdManager.java:272）

我在 IBM 开设了 PMR。当您从 Domino 8.5.3 UP1 升级到 FP1+ 时，也会发生这种情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T12:36:06.110

只是想确认这适用于 IBM Domino 9.0 和 IBM XWork Server 9.0。

因此，如果您遇到此问题，请考虑升级到 9.0。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T17:29:14.353

我已经完成了 PMR 流程，IBM 已将此确定为可重现的问题。他们无法告诉我是否以及何时修复此问题，但可能会在下一个维护版本或修复包中。

当前的解决方法是使用 FP 安装应用程序卸载 FP1 或 FP2。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T09:40:11.463

同样的问题，我的解决方法是尽可能多地放入 applicationScope 以便快速返回一个请求。这样，如果我在短时间内发出两个请求，就会降低出现此错误的机会......但它仍然可能发生，所以我对此不满意:(

# c++ - 错误（mingw32/bin/ld.exe 最终链接失败：设备上没有剩余空间）构建 C++ 项目

> ID：12166606
> 
> 赞同：1
> 
> 时间：2012-08-28T19:55:45.243
> 
> 标签：c++, windows, mingw

基本上，昨天我可以用 C++ 编程，而今天我不能。

我正在尝试使用 MinGW C/C++ 编译器在 Eclipse Helios 中编写一个简单的 hello world 程序，但遇到了几个问题，我相信这是它的根源。

起初程序编译和构建，但是当我尝试运行它时，一个错误对话框说找不到 FirstProject.exe 文件/在启动配置中不存在。但是，我没有构建任何错误，并且可以在我的项目资源管理器中清楚地看到 Debug/FirstProject.exe 中的二进制文件。我尝试刷新我的项目浏览器，唉，文件在我眼前消失了。

我尝试再次构建程序，这就是我收到此错误的时候：

c:/mingw/bin/../lib/gcc/mingw32/4.6.1/../../../../mingw32/bin/ld.exe：最终链接失败：设备上没有剩余空间

我不知道它在说什么设备。我在这个硬盘上剩下超过 1TB 的空间，所以不可能这样。我尝试清空我的 %Temp% 文件夹和回收站（我发现尝试寻找解决此问题的解决方案的建议）但无济于事。

值得注意的是，我过去编写的 C++ 程序仍在运行。我对编程很陌生，所以我不知道您需要多少信息，但是如果您认为可以帮助我，我很乐意添加您需要的任何信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-21T16:27:14.523

我刚刚在通过 Codelite 编译时遇到同样问题的一台工作计算机上解决了这个问题。移动工作区、重新启动和重新安装 Codelite 并不能解决问题。我还检查了 /temp 文件夹的权限，这很好。

事实证明磁盘存在权限问题/其他问题。运行磁盘检查修复了磁盘上的一些问题，并允许程序编译。如果这不能解决您的问题，您可能还想尝试禁用任何防病毒/间谍软件程序，然后重试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-04-18T06:25:29.613

我刚刚在我的电脑上解决了这个问题。实际上，我的问题是我的 Windows Defender（或某人的任何防病毒软件）阻止**ld.exe**访问作为源代码文件夹的受保护文件夹。您可以通过进入 PC 的病毒和威胁防护设置来纠正此问题，然后在此处找到被阻止的历史记录。你肯定会在那里找到那个阻塞的历史记录。然后就去允许它在这个设备上。和繁荣

# javascript - for循环在Firefox中工作错误？

> ID：12166607
> 
> 赞同：0
> 
> 时间：2012-08-28T19:55:50.793
> 
> 标签：javascript, jquery, for-loop

我在 jQuery 中有一个简单的 for 循环，但它在 Firefox 中**无法**正常工作。

问题：它可以很好地写入我的变量，但是如果您查看 Firefox 选项卡，它会显示

> 正在连接...

每时每刻。

另外，如果我用 Firebug 检查我的脚本，它会说：

> 此页面上没有 Javascript

虽然它写了我的变量。

我在这里做错了什么？[**在这里提琴**](http://jsfiddle.net/f2jFc/)

```
$(document).ready(function(){
      var i=0;
      for(i=0;i<=3;i++) {
          document.write(i);
      }
      //alert("working");
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T19:58:36.397

文档加载完成后不要使用 write()，它会覆盖**整个**文档（包括脚本）

但是，当问题是（新）文档在您的示例中没有完成加载过程时，请[`document.close()`](https://developer.mozilla.org/en-US/docs/DOM/document.close)在`document.write()`

[http://jsfiddle.net/f2jFc/3/](http://jsfiddle.net/f2jFc/3/)

# c++ - 在应用程序运行时编译 .dll

> ID：12166610
> 
> 赞同：2
> 
> 时间：2012-08-28T19:55:55.887
> 
> 标签：c++, dll

假设这种情况：一个应用程序 ( **app.exe** ) 正在使用多个 .dll。我正在从应用程序使用的一个 .dll 调试一个函数**bugged_function()**：**util.dll**。当我从中调试**bugged_function()**时，我意识到代码中的某些内容是错误的，必须进行更改。

正常执行的步骤：

**1.**关闭**app.exe**

**2.**修改函数中的代码

**3.**重新编译util.dll

**4.**重新运行**app.exe**

我想要的是：

**绕过步骤 1 和 4**。为此，如果可能，我需要以某种方式**卸载****util.dll**库，以便在编译时可以覆盖它。应用程序必须以某种方式再次**重新加载**库。

*编辑1：*

我不知道如何**调用 bugged_function()**。假设我只能访问 app.exe 使用的库**util.dll**的**源**代码。

 ***编辑2：*

我正在使用 Visual Studio 2010，当我调试时，我附加到**app.exe**进程。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T20:14:27.393

如果应用程序通过[运行时动态链接](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686944%28v=vs.85%29.aspx)使用 dll ，则可以将其卸载（`FreeLibrary`或类似），然后重新加载（`LoadLibrary`或类似）。

如果应用程序通过[加载时动态链接](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684184%28v=vs.85%29.aspx)使用 dll ，我认为你不走运。

编辑：我稍微误读了这个问题。由于您无法修改`app.exe`，因此您必须依赖该应用程序的内置功能来进行运行时加载和卸载（如果有的话）。这完全取决于应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T20:08:38.530

Visual Studio 可以编辑并继续。因此，如果您处于断点处，您可以进行所需的更改，然后继续调试。Visual Studio 将在保持状态的同时编译和应用更改。

编辑：固定编辑并继续命名。**

# c# - 通过传入字符串来引用 Web 控件的 ID

> ID：12166611
> 
> 赞同：0
> 
> 时间：2012-08-28T19:55:56.410
> 
> 标签：c#, c#-4.0

如果我有：

```
<asp:TextBox ID="txtField1" runat="server"></asp:TextBox> 
```

然后在我的代码隐藏中，我可以通过其“ClientID”访问该 Web 控件：

```
txtField1.Text = "value"; 
```

这行得通，但我想要另一种方法来通过引用访问相同的 Web 控件，所以我尝试这样做：

```
TextBox myTxtField = (TextBox)Page.FindControl("txtField" + 1);
myTxtField.Text = "value"; 
```

我收到错误消息：*“对象引用未设置为对象的实例。”* 知道我是否正确执行此操作，或者是否有另一种方法可以通过传入字符串来引用 Web 控件的 ID？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T19:59:45.847

```
TextBox myTxtField = (TextBox)Page.FindControl("txtField" + 1); 
```

如果控件位于 a 的 ContentPage 上，则返回 null `MasterPage`。然后你应该直接引用它（如下所示）。

我在这里写了一些关于这个问题的东西：[https ://stackoverflow.com/a/8781131/284240](https://stackoverflow.com/a/8781131/284240)

当然，如果控件有另一个 ID 或者它`NamingContainer`不在页面中（GridView 中的 fe），它也会返回 null。

边注：

> 然后在我的代码隐藏中，我可以通过其“ClientID”访问该 Web 控件：

```
txtField1.Text = "value"; 
```

`txtField1`不是`ID`，`ClientID`实际上您是直接引用控件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T20:02:47.063

这是一个有效的代码，必须工作

```
TextBox myTxtField = (TextBox)Page.FindControl("txtField" + 1);
myTxtField.Text = "value"; 
```

错误的原因可能是您没有`asp:TextBox`Id`"txtField1"`或文本框控件不在您的页面中

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T20:06:28.760

出于某种原因，它不喜欢 int: 调用 ToString() ，如下所示：

```
TextBox myTxtField = (TextBox)Page.FindControl("txtField" + (1).ToString()); 
```

# visual-studio - 如何使用 XML-Document-Transform 从 web.config 中删除 Elmah 模块？

> ID：12166618
> 
> 赞同：1
> 
> 时间：2012-08-28T19:56:12.343
> 
> 标签：visual-studio, xpath, xslt, xdt-transform, xml-document-transform

换句话说，在下面的 web.config xml 中，我想删除所有类型属性以“Elmah”开头的元素。

```
<httpModules>
  <add name="ErrorLog" type="Elmah.ErrorLogModule, Elmah" />
  <add name="ErrorMail" type="Elmah.ErrorMailModule, Elmah" />
  <add name="ErrorFilter" type="Elmah.ErrorFilterModule, Elmah" />
</httpModules> 
```

我尝试了几种基本变换的组合和结构，但有各种错误，

```
<add xdt:Locator="XPath([starts-with(@type,'Elmah.')" xdt:Transform="Remove"/> 
```

在放弃并删除整个 httpModules 元素之前，因为不需要 XPath。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T22:09:22.627

XPath 定位器需要一个完全限定的 XPath 位置，因此您的转换当前不匹配任何元素。如果您改用 Condition Locator（它需要一个相对 XPath），它应该匹配：

```
<add xdt:Locator="Condition(starts-with(@type,'Elmah.')" xdt:Transform="RemoveAll"/> 
```

另请注意， xdt:Transform Remove 只会对第一个匹配的元素进行操作，因此您需要使用 RemoveAll 来实现您想要的。

msdn 上的[摘要](http://msdn.microsoft.com/en-us/library/dd465326.aspx)很好地涵盖了这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T19:59:16.930

您是否尝试过单独删除每个模块？

```
<add name="ErrorLog" xdt:Locator="Match(name)" xdt:Transform="Remove"/>
<add name="ErrorMail" xdt:Locator="Match(name)" xdt:Transform="Remove"/>
<add name="ErrorFilter" xdt:Locator="Match(name)" xdt:Transform="Remove"/> 
```

# sql - 我可以在什么基础上决定使用 clob 还是 blob？

> ID：12166621
> 
> 赞同：2
> 
> 时间：2012-08-28T19:56:29.237
> 
> 标签：sql, blob, clob

我有想要存储在数据库中的 Java 类的对象。整个对象可以表示为字符串，因此它可以在数据库中作为 clob 进行维护。但我不确定是否必须将其维护为 clob 或 blob。在这种情况下，我必须在 clob 和 blob 之间做出决定的依据是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T20:15:41.260

看看已经问过的类似问题

*   [帮我理解Oracle中CLOB和BLOB的区别](https://stackoverflow.com/questions/1018073/help-me-understand-the-difference-between-clobs-and-blobs-in-oracle)

*   [我正在寻找 BLOB 和 CLOB 的一个很好的解释](https://stackoverflow.com/questions/7563235/im-looking-for-a-good-explanation-of-a-blob-and-a-clob)

# jquery - IE8内存不足使用jQuery Validate submitHandler回调

> ID：12166635
> 
> 赞同：0
> 
> 时间：2012-08-28T19:57:05.910
> 
> 标签：jquery, internet-explorer-8, jquery-validate

这是代码：

```
jQuery(document).ready(function() {
    $('#MessageAddForm').validate({
        rules: {
            'data[Message][message]': {
               ...
            }
        },
        messages: {
            'data[Message][message]': {
                 ...
            }
        },
        submitHandler: function(form) {
            $('input.submit').attr('disabled', 'disabled');
            $(form).submit();
        }
    }); 
```

在 Firefox 和 Chrome 中有效，在 Internet Explorer 8 中也有效，但会出现“Out of memory at line: 3”错误。这个最小的代码同样的错误：

```
 submitHandler: function(form) {
            $(form).submit();
        } 
```

避免此错误的唯一方法是删除提交处理程序，只留下消息和规则。jQuery 版本是 1.7.1，jQuery 验证插件是 1.9.0 我已经使用不同版本的 jQuery 进行了测试：1.5.2 和 1.6.1 作者说已经测试过的那些：

[http://bassistance.de/jquery-plugins/jquery-plugin-validation/](http://bassistance.de/jquery-plugins/jquery-plugin-validation/)

我还尝试了旧版本的验证插件，但内存不足错误仍然存​​在。

受影响的版本是 32 位和 64 位。我不知道旧版本，因为我只支持版本 8 及更高版本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T20:48:00.387

您需要使用默认的表单提交。像这样

```
submitHandler: function(form) {
    form.submit();
} 
```

使用 $(form).submit(); 重新触发验证功能。上面的代码用于您提供的文档链接中。

# java - CDI：@alternative 与 @Qualifiers

> ID：12166639
> 
> 赞同：10
> 
> 时间：2012-08-28T19:57:23.133
> 
> 标签：java, dependency-injection, cdi

作为 CDI 的新手，我想知道替代品和限定符之间的实际区别。

在[Weld reference](http://docs.jboss.org/weld/reference/latest/en-US/html/injection.html)中，它指出：

> 4.3\. 限定符注释
> 
> 如果我们有多个 bean 实现了特定的 bean 类型，则注入点可以使用限定符注解准确指定应该注入的 bean。

但是在解释替代方案时，据说：

> 4.7\. 备择方案
> 
> 替代方案是其实现特定于特定客户端模块或部署场景的 bean。

如果我理解正确，@Qualifier 定义了目标 bean 的哪些实现被注入到注入点。

另一方面，@Alternative 描述了部署期间的愿望，取决于客户端是否有标准的替代（我的意思是“@default”）bean 被注入到注入点。

这是正确的 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T05:07:16.053

是的，这是正确的。**您可以将限定符**想象为您在开发时设置的基本编织，在源代码中使用注释。

**替代方案**允许您在执行时使用`beans.xml`文件覆盖它 - 一个简单的部署工件。

一个典型的场景是`beans.xml`对不同的环境使用不同的，从而为您不想在本地/集成环境中执行的组件启用模拟替代方案。

# javascript - $.ajax() 发布 json 数据类型

> ID：12166641
> 
> 赞同：0
> 
> 时间：2012-08-28T19:57:24.463
> 
> 标签：javascript, jquery

这是我的功能，用于 exp.：

```
adId = 1, adTitle = test

function deleteAd(adId, adTitle) {
    $.ajax({
        dataType: 'json',
        url: 'ajax.php',
        type: 'POST',
        data: {
            adId : adId,
            adTitle: adTitle
        },
        success: function(data) {
            alert(data);
        }
    }); 
```

那就是ajax.php：

```
echo $_POST['adId']; echo $_POST['adTitle']; 
```

但是只回显adId，没有adTitle。

我试试这个：

```
 data: {
            adId : adId,
            adTitle: "test"
        }, 
```

而且也没有结果。使用 HttpFox 我发现这篇文章和 postdata 是： adId=1&&adTitle=test

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T19:59:09.177

如果您的变量`test === undefined`，那么它**不会**被发布到您的 PHP 脚本，因此您**不会**在服务器端看到它。

* * *

If`test`是一个空字符串，由于它没有任何可见长度，您可能在客户端上看不到它。

尝试做：`var_dump($_POST['adTitle']);`

# javascript - 是否可以使用字符串从对象调用方法？

> ID：12166642
> 
> 赞同：5
> 
> 时间：2012-08-28T19:57:24.663
> 
> 标签：javascript, jquery, string, methods, eval

是否可以使用字符串从对象调用方法？

```
var elem = $('#test');             //<div id="test"></div>
var str = "attr('id')";  

//This is what I'm trying to achieve
  elem.attr('id');                 //test

//What I've tried so far  
  elem.str;                        //undefined
  elem.str();                      //Object [object Object] has no method 'str'
  var fn = eval(str);              //attr is not defined
  eval(elem.toString()+'.'+str);   //Unexpected identifier

//Only solution I've found so far, 
//but is not an option for me 
//because this code is in a function 
//so the element and method call
//get passed in and I wouldn't know
//what they are
  eval($('#test').attr('id'));     //test 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T20:05:45.320

**更新**

这是我最后的工作答案：
在控制台中运行此代码后

```
theMethod = 'attr("id","foo")'.match(/^([^(]+)\(([^)]*)\)/);
jQuery('#post-form')[theMethod[1]].apply(jQuery('#post-form'),JSON.parse('['+theMethod[2]+']')); 
```

post-form 元素现在有了一个新的 ID，完全没有问题。这适用于采用多个参数、单个参数或根本没有参数的方法。回顾：

```
theMethod = theInString.match(/^\.?([^(]+)\(([^)]*)\)/);
//added \.? to trim leading dot
//made match in between brackets non-greedy
//dropped the $ flag at the end, to avoid issues with trailing white-space after )
elem[theMethod[1]].apply(elem,JSON.parse('['+theMethod+']')); 
```

这是我能想到的最安全、最可靠的方法，真的

* * *

你做什么都***不要使用 EVAL***：

```
var theMethod = 'attr(\'id\')';
//break it down:
theMethod = theMethod.match(/^([^(]+)\(.*?([^)'"]+).*\)$/);
//returns ["attr('id')", "attr", "id"]
elem[theMethod[1]](theMethod[2]);//calls the method 
```

这与您对*任何*对象使用的基本原则相同（请记住，函数在 JS 中都是独立的对象 - 而 jQuery 对象也是对象）。这意味着可以以与属性完全相同的方式访问方法：

```
$('#foo').attr('id') === $('#foo')['attr']('id'); 
```

因此，只需将字符串分开，并像使用对象属性一样使用方法名称，就可以开始使用了。

请记住：***当您只有评估锤时，一切看起来都像您的拇指。***
*布伦丹·艾希*

* * *

如果有可能将多个参数传递给任何方法，您也可以按照自己的方式解决这个问题（我认为 - 好吧：逻辑决定了，但现在已经很晚了，逻辑现在被 Gin 打败了） ：

```
theMethod = theMethod.match(/^([^(]+)\(([^)]+)\)$/);
//["attr('id','foo')", "attr", "'id','foo'"] --> regex must now match quotes, too
elem.theMethod[1].apply(elem,JSON.parse('['+theMethod[2]+']')); 
```

这会将您正在处理的任何元素/对象的方法应用于自身，因此不会更改调用者上下文（`this`仍将指向方法中的对象），并且它会传递将传递给被调用方法的参数数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T20:40:06.280

您应该使用以下方法之一：

*   申请

    `var result = function.apply(thisArg[, argsArray]);`

*   称呼

    `var result = fun.call(thisArg[, arg1[, arg2[, ...]]]);`

这是示例：

```
var Sample = function() {
var that = this;

this.sampleMethod = function() {
    return alert("Hello!");
};

this.sampleMethod2 = function(){

    that["sampleMethod"].apply(that);
};  
};

var objImpl = new Sample();

objImpl.sampleMethod2(); //you will get a message from 'sampleMethod()' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T20:00:30.017

eval 做你想做的事。然而，Eval 是邪恶的，因为你不应该做你想做的事。

[为什么使用 JavaScript eval 函数是个坏主意？](https://stackoverflow.com/questions/86513/why-is-using-the-javascript-eval-function-a-bad-idea)

# r - `getClasses()` 中默认环境的模糊变化（标准函数与正式 S4 方法）

> ID：12166645
> 
> 赞同：3
> 
> 时间：2012-08-28T19:57:44.583
> 
> 标签：r, class, default-value, s4, lexical-scope

关于“环境嵌套”/词法范围，我很难弄清楚这里到底发生了什么：

## 问题

`where`函数中参数的默认值`getClasses()`似乎会有所不同，具体取决于`getClasses()`是在**标准 R 函数**中调用还是在**正式 S4 方法**中调用。它被`.externalCallerEnv()`哪个似乎是*惰性评估*的“对象”控制，从而导致变化（见下面的**编辑**）

## 问题

从正式的 S4 方法内部调用时，如何设置与在标准函数内部调用`where`时的默认值相同的值？`getClasses()`

* * *

## 插图

您将在下面找到上述“问题行为”的简短说明

## 1) 自定义类

我有许多当前来自`.GlobalEnv`.

让我们以这一个作为他们所有人的代表

```
setRefClass("A", fields=list(x="numeric")) 
```

## 2）列出可用的类

通过 argument `where`， function`getClasses`让我选择寻找类的环境。

以下似乎无处不在`.GlobalEnv`，因此找不到我的班级；没关系：

```
classes <- getClasses()
> head(classes)
[1] "("            ".environment" ".externalptr" ".name"        ".NULL"       
[6] ".Other"   
> "A" %in% classes
[1] FALSE 
```

现在我只`.GlobalEnv`查找类`A`；这也很好：

```
classes <- getClasses(where=.GlobalEnv)
> classes
[1] "A"
> "A" %in% classes
[1] TRUE 
```

## 3) 创建自定义标准查找函数

当我将查找通过`getClasses`放入**标准函数**中时（这只是所需功能的第一部分，我想`getClasses()`在该方法内部进行计算，而不是将其返回值作为形式参数传递），一切仍然正常

```
foo1 <- function(where=.GlobalEnv) {
    if (is.null(where)) {
        x <- getClasses()
    } else {
        x <- getClasses(where=where)    
    }
    return(x)
}
> foo1()
[1] "A"
> classes <- foo1(where=NULL)
> head(classes)
[1] "("            ".environment" ".externalptr" ".name"        ".NULL"       
[6] ".Other"    
> "A" %in% classes
[1] FALSE 
```

## 4) 创建正式的 S4 方法

但是，一旦我将所有内容都放入**正式的 S4 方法**`getClasses()`中，用于查找类的标准环境似乎发生了一些变化

```
setGeneric(
    name="foo2",
    signature="x",
    def=function(x, ...) standardGeneric("foo2")       
)
setMethod(
    f="foo2", 
    signature=signature(x="missing"), 
    definition=function(
        x,
        where=.GlobalEnv
    ) {       
    if (is.null(where)) {
        x <- getClasses()
    } else {
        x <- getClasses(where=where)    
    }
    return(x)        
    }
)
[1] "foo2"
> foo2()
[1] "A"
> classes <- foo2(where=NULL)
> head(classes)
[1] "A"            "("            ".environment" ".externalptr" ".name"       
[6] ".NULL"  
> "A" %in% classes
[1] TRUE 
```

以前，`"A" %in% foo1(where=NULL)`是`FALSE`（**需要**），而现在是（`"A" %in% foo2(where=NULL)`不需要**）**。`TRUE`

 **任何想法如何`foo2()`以完全相同的方式表现`foo1()`？

* * *

## 编辑 2012-08-29

正如 Josh O'Brien 在下面的评论中指出的那样，这种变化可能是由*惰性评估*引起的。

## 调试`foo1()`

```
debug(getClasses)
foo1(where=NULL) 
```

你进入调试跟踪器；点击`<RETURN>` **4 次，**然后输入`get("where")`：

```
Browse[2]> get("where")
<environment: namespace:base> 
```

在控制台中，点击`<RETURN>` **1 次**，然后键入`evList`：

```
Browse[2]> evList
[[1]]
<environment: namespace:base> 
```

键入`Q`以退出当前调试运行

**现在再次运行所有内容，但调试调用略有不同**

```
foo1(where=NULL) 
```

在控制台中，点击`<RETURN>` **5 次，**然后键入`evList`：

```
Browse[2]> evList
[[1]]
<environment: namespace:methods> 
```

现在输入`get("where")`：

```
Browse[2]> get("where")
<environment: namespace:methods> 
```

现在`where`指向`namespace:methods`

## 调试`foo2()'

```
foo2(where=NULL) 
```

你进入调试跟踪器；点击`<RETURN>` **4 次，**然后输入`get("where")`：

```
Browse[2]> get("where")
<environment: namespace:base> 
```

然后点击`<RETURN>` **1 次**，然后键入`evList`：

```
Browse[2]> evList
[[1]]
<environment: namespace:base> 
```

键入`Q`以退出当前调试运行

**现在再次运行所有内容，但调试调用略有不同**

```
foo2(where=NULL) 
```

点击`<RETURN>` **5 次，**然后输入`evList`：

```
Browse[2]> evList
[[1]]
<environment: 0x02a68db8>

[[2]]
<environment: R_GlobalEnv>

# [OMITTED]

[[8]]
<environment: package:methods>
attr(,"name")
[1] "package:methods"
attr(,"path")
[1] "R:/Apps/LSQMApps/apps/R/R-2.14.1/library/methods"

[[9]]
<environment: 0x01e8501c>
attr(,"name")
[1] "Autoloads"

[[10]]
<environment: namespace:base> 
```

现在输入`get("where")`：

```
Browse[2]> get("where")
<environment: 0x02a68db8> 
```

`evList`并注意与`where`之前的调试运行相比的不同值。键入`Q`以退出当前调试运行。

**这对我来说似乎有些奇怪，但从语言设计者的角度来看可能是有道理的。一旦我知道如何显式设置`where`为指向与`namespace:methods`.**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T09:08:03.327

**又一次学到了一个众所周知的教训：明确一点总是好的；-)**

多亏了[Josh O'Brien](https://stackoverflow.com/users/980833/josh-obrien)和[Etiennebr的这篇](https://stackoverflow.com/users/171659/etiennebr)[文章](https://stackoverflow.com/questions/3094232/add-objects-to-package-namespace)，我想我能够将这些部分拼凑起来。

由于*惰性求值*和*词法作用域*，我认为真正**确保** 行为与从常规函数中的任何一个或从常规函数内部`getClasses()`调用相同的唯一方法是在正式 S4 内部调用时显式设置相关环境的值方法。`.GlobalEnv``where``namespace:methods``getClasses()`

要获得与命名空间关联的环境，这似乎可行：

```
env <- loadNamespace("methods")
> is.environment(env)
[1] TRUE 
```

或者甚至更好：

```
env <- asNamespace("methods")
> is.environment(env)
[1] TRUE 
```

这个环境正是我们需要指出`where`的

```
setGeneric(
    name="foo2",
    signature="x",
    def=function(x, ...) standardGeneric("foo2")       
)
setMethod(
    f="foo2", 
    signature=signature(x="missing"), 
    definition=function(
        x,
        where=.GlobalEnv
    ) {       
    if (is.null(where)) {
        x <- getClasses(where=asNamespace("methods"))
    } else {
        x <- getClasses(where=where)
    }
    return(x)       
    }
)

> foo2()
[1] "A"
> classes <- foo2(where=NULL)
> head(classes)
[1] "("            ".environment" ".externalptr" ".name"        ".NULL"       
[6] ".Other"      
> "A" %in% classes
[1] FALSE 
```**

# sql - 用户和消息：如何按发件人、收件人或两者订购？

> ID：12166649
> 
> 赞同：0
> 
> 时间：2012-08-28T19:58:06.647
> 
> 标签：sql

我有两个这样的表：

```
USER
id
name

MESSAGE
id
sender_id
receiver_id 
```

如您所想，这些表之间有两个一对多的关系。

在我的后端，我有过滤器来搜索与用户关联的消息。按下“过滤器”后，我应该显示与他/她关联的消息列表，在名为“发送者/接收者”的列中显示一个指定该人是消息的发送者还是接收者（或什至两者）的列.

**我的疑问：**我还必须提供在“发件人/收件人”列的基础上订购列表的可能性。你知道，按下“Sender/Receiver”列标题将首先显示用户是“Sender”的消息，然后是“Both”的位置，最后是“Receiver”的位置。再次按下将显示用户是“Receiver”的消息，然后是“Both”的位置，然后是“Sender”的位置。

什么样的 SQL 可以进行这种排序？

注意：我提出的模式不是强制性的。如有必要，请提出另一个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T20:02:59.853

```
ORDER
   BY CASE WHEN sender_id = [user-ID of interest]
            AND receiver_id = [user-ID of interest]
           THEN 2      -- is both sender & receiver
           WHEN sender_id = [user-ID of interest]
           THEN 1      -- is only sender
           ELSE 3      -- is only receiver
       END,
       [other conditions to sort by] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T20:04:46.187

你只需要一个花哨的订单声明：

```
select m.*
from message m join
     user s
     on u.sender_id = s.id join
     user r
     on u.receive_id = r.id
where s.id = <user> or r.id = <user>
order by (case when s.id = <user> and r.id <> <user> then 0
               when s.id = <user> and r.id = <user> then 1
               when r.id = <user> then 2
               else 3 -- shouldn't happen
         ) 
```

order by 查看您对发送者和接收者感兴趣的用户，然后根据您的约束执行一些逻辑来确定顺序（首先发送，然后同时发送，然后是接收者）。

# box2d - 有人可以给我一个mousejoint在libgdx中如何工作的例子吗？

> ID：12166657
> 
> 赞同：2
> 
> 时间：2012-08-28T19:58:35.677
> 
> 标签：box2d, libgdx, jbox2d

在过去的几个小时里，我一直在用头撞砖墙。
我一辈子都无法在 libgdx 框架或 java 中使用 mousejoint。
有人可以为我提供一个关于如何在 libgdx 中使用 mousejoint 的源代码的快速示例吗？如果没有，只有Java？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T15:59:19.533

您可以下载整个 libgdx 主干并查看测试。例如，看看这个：

[https://github.com/libgdx/../tests/Box2DTest.java](https://github.com/libgdx/libgdx/blob/master/tests/gdx-tests/src/com/badlogic/gdx/tests/Box2DTest.java)

它使用鼠标关节来拾取和拖动身体。

# python - 字符串格式不适用于 python 中的 OS 模块

> ID：12166673
> 
> 赞同：0
> 
> 时间：2012-08-28T19:59:30.907
> 
> 标签：python, module, operating-system, string-formatting

我目前正在编写一个对 Windows 目录执行某些操作的脚本，但我似乎无法弄清楚我做错了什么。这是代码的相关摘录。

```
 import os
    user = os.environ['USERNAME']
    os.chdir("/users/%s/dekstop") % user 
```

但是当我这样做时，它会给出以下错误，

```
WindowsError: [Error 3] The system cannot find the path specified: '/users/%s/desktop' 
```

字符串格式不起作用有什么原因吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T20:01:47.303

`% users`应该在括号内：

`os.chdir("/users/%s/dekstop" % user)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T20:04:46.733

`os.chdir("/users/%s/dekstop")` 是对 os.chdir 的调用，没有任何格式，然后 % 用户将处理结果，这不是您想要发生的。

您需要先构造字符串，然后再将其传递给 chdir 函数

例如

```
s = "/users/%s/desktop" % user
os.chdir( s ) 
```

但在这种情况下更重要的是处理目录，我会使用[os.path](http://docs.python.org/library/os.path.html#module-os.path)函数来操作路径，例如，`os.path.expanduser('~/Desktop')`尽管您应该查看正确的 windows 变量，因为并非所有设置都会在 /users 下有用户目录

# javascript - 点击时 DatePicker 什么都不做

> ID：12166677
> 
> 赞同：2
> 
> 时间：2012-08-28T19:59:52.773
> 
> 标签：javascript, jquery, jquery-ui, datepicker

我正在尝试让 datepicker 工作的最简单示例，但我似乎无法得到它。我的[小提琴](http://jsfiddle.net/rSuNg/)几乎什么都没有。

我的网页顶部有这个：

```
<script src="~/Scripts/jquery-1.6.2.js" type="text/javascript" />
<script src="~/Scripts/jquery-ui-1.8.11.js" type="text/javascript" />
<script>
    $(function(){
        $("#datepicker").datepicker();
    });​​​
</script> 
```

注意：我尝试将前两个脚本行放在 _Layout.cshtml 中，但出现错误（暂时不记得错误）。这就是为什么我把它全部放在一页上。

再往下一点，在同一页上，是这样的：

```
<td><input type="text" id="datepicker"></td> 
```

当我单击输入控件时，什么也没有发生。但是，当我单击小提琴中的控件时，它可以工作。我错过了什么？

此外，您会注意到我使用的是 jquery 1.6.2 和 jquery-ui 1.8.11。这与 fiddle 示例不同，因为 fiddle 没有提供这些版本作为选项。如果版本不同，我会感到惊讶。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T20:02:41.547

脚本标签必须同时具有开始项和结束项。您不能速记关闭它们。

而不是这个

```
<script src="~/Scripts/jquery-1.6.2.js" type="text/javascript" /> 
```

做这个

```
<script src="~/Scripts/jquery-1.6.2.js" type="text/javascript"></script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T01:08:11.213

我希望这不会是最终答案，但我终于让日期选择器显示出来。经过反复试验和研究，我似乎遇到了 jquery 冲突，但我不知道为什么。有人提出了一种叫做非冲突模式的东西。所以我将我的日期选择器代码更改为：

```
<script type="text/javascript">
    (function ($) {
        $(document).ready(function () {
            $("#endTime").datepicker();            
        });
    })(jQuery);
</script> 
```

它奏效了。我不知道为什么，但它终于至少工作了。如果有人可以提供更多见解或更好的答案，我很乐意选择它。

这个[答案](https://stackoverflow.com/a/1611304/279516)解释了上面的例子：`Basically, what I did was define a function that takes a parameter (the $) and then execute that function with jQuery as the parameter.`

我仍然不明白，为什么这段代码不起作用：

```
<script type="text/javascript">
    jQuery(document).ready(function () {
        jQuery("#endTime").datepicker();
    });
</script> 
```

如果因为 , 发生冲突`$`，而我替换`$`为`jQuery`，它不应该工作吗？

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-28T20:12:26.800

日期选择器非常简单，为什么您不在 mozilla 中使用类似 firebug 的东西来查看它是否抛出一些错误，日期选择器内部也使用 Jquery 主题滚轮，所以请下载并添加 jquery "css/custom-Theme/jquery-custom .css”的CSS。

# cakephp - 我可以在 CakePHP 中以更简单的方式处理记录吗？

> ID：12166686
> 
> 赞同：0
> 
> 时间：2012-08-28T20:00:30.550
> 
> 标签：cakephp, cakephp-2.1

我开始处理 CakePHP 并通读文档，但有两件事对我来说仍然显得有点笨拙。

1.  我知道我有**一些**我想存储的记录的其他框架，但 CakePHP 建议我匿名进行：

    ```
    $this->Foo->create(array(...));
    $this->Foo->save(); 
    ```

    为什么我不能告诉 CakePHP 要保存哪个 Record，就像在其他所有框架中一样：

    ```
    $foo = $this->Foo->create(array(...));
    $foo->save(); 
    ```

2.  我想遍历控制器内的整个 RecordSet。为什么我需要迭代使用

    ```
    $foos = $this->Foos->find('all');
    foreach($foos as $foo){
       $foo['Foo'] // ... here we have $foo. 
    ```

    我不明白为什么`find()`返回一个二维数组并且内部数组中只有记录。为什么这不直接是一个记录数组？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T22:58:06.367

1.  $this->Foo 是 Foo 模型的一个实例。当您在其上调用方法时，您正在调用 Foo 模型的该实例的活动记录（如果有的话）上的方法。因此，在告诉 Cake 要保存哪条记录方面，您不需要 - Cake 知道要保存当前的活动记录。

这是您粘贴注释的代码，这可能会有所帮助。

```
// Prepare this instance of the Foo model to save a new record
$this->Foo->create(array(...));

// Save the new record that we have just prepared
$this->Foo->save(); 
```

而另一方面...

```
// Call the create method on this instance of the Foo model, and return what?
// Return another instance of the Foo model?
// Why not just continue using the instance we already have, ie, $this->Foo
$foo = $this->Foo->create(array(...));

// Call the save method on the duplicate instance of the Foo model that was
// returned from the create method?
$foo->save(); 

// Why did 'create' need to return a duplicate instance of the model to do a save???
// Why not call the save on the same instance of the Foo model that we used to call the create? 
```

第2点。这基本上是为了一致性。通常，您将从多个表中返回数据，这些表相互链接。假设表 Foo 和 Bar 具有 1 对 1 的关系，并且您将获得 Foo 记录以及它们关联的 Bar 记录。返回的数组将需要 Foo 和 Bar 键，例如：在您的 foreach 循环中，$foo 可能包含：

$foo['Foo']['column1'], $foo['Foo']['column2'], $foo['Bar']['column1'], $foo['Bar']['column2' ]

为了保持一致，当你只从一个表中获取时，它仍然以 $foo['Foo']['column1'] 的形式返回，就像你从多个表中获取连接数据一样。

编辑：回应您的评论，说您有代码：

```
$foos = $this->Foos->find('all'); 
```

假设您想在返回数组的每一行上调用一些模型方法，有几种方法可以做到。一种方法是：

```
// This is code for the controller
$this->Car->find('all');
foreach($cars as $car){
    $this->Car->driveTwoMiles($car); // the driveTwoMiles would be in your model class

} 
```

所以在你的模型中，你会有一个方法：

```
// This would be a method in your model class
function driveTwoMiles($car){
    $this->id = $car['Car']['id']; // set the active record
    // we are now inside the model, so $this->id is the same as calling $this->Car->id from the controller

    // Do whatever you want here. You have an active record, and your $car variable, holding data
    $this->Post->saveField('distance_driven', $car['Car']['distance_driven']+2);
} 
```

此外，对于您只想更新一条记录而不是很多记录的情况，您可以只执行“读取”而不是“查找（'all'）” - 更多信息请参见下面的链接。

我强烈建议您通读蛋糕烹饪书中的这些页面：

[http://book.cakephp.org/2.0/en/models/retrieving-your-data.html](http://book.cakephp.org/2.0/en/models/retrieving-your-data.html) - 检索数据

[http://book.cakephp.org/2.0/en/models/saving-your-data.html](http://book.cakephp.org/2.0/en/models/saving-your-data.html) - 保存数据

[http://book.cakephp.org/2.0/en/models/deleting-data.html](http://book.cakephp.org/2.0/en/models/deleting-data.html) - 删除数据

所有内容都包含有关如何使用 Cake Models 的非常重要的基础信息。现在花时间去真正理解它，将来你会省去无数麻烦和代码重构！

# c# - 在 OleDBCommand 中从 excel 中选择 2 个命名范围

> ID：12166687
> 
> 赞同：0
> 
> 时间：2012-08-28T20:00:41.220
> 
> 标签：c#, excel, oledb

这是我现在的代码：

```
OleDbCommand cmd1 = new OleDbCommand("SELECT * FROM Id, Number", cn);
OleDbDataReader reader = cmd1.ExecuteReader();
while( reader.Read() )
{
    results.Add((int)reader["Id"], (int)reader["Number"]);
} 
```

Id 和 Number 在我的 excel 文件中是命名范围。我试图`dictionary<int, int>`用这个查询的结果返回一个。

问题是该行`reader["Id"]`正在引发异常。当我调试结果集时，我可以看到它具有正确的 Id 值。我是否错误地检索数据？

**奖励：**我还需要只返回 Number 不为空的行。我希望我可以添加`where Number is not null`到 OldDbCommand，但这也引发了异常。

你们能看到我在这里做错了吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T14:49:35.777

大卫 W 的评论是正确的。我无法在同一行中进行投射。另外，打电话`reader["Id"]`也打不通。替换为`Reader[0]`一切正常。

```
OleDbCommand cmd1 = new OleDbCommand("SELECT * from Number, Id", cn);
OleDbDataReader reader = cmd1.ExecuteReader();

while( reader.Read() )
{
   var Number= reader[0];
   var Id = reader[1];

   if(Id == DBNull.Value || WoNumber == DBNull.Value)
   {
       break;
   }

   results.Add(Convert.ToInt32(Id), Convert.ToInt32(Number));
} 
```

# android - 视频流问题

> ID：12166688
> 
> 赞同：1
> 
> 时间：2012-08-28T20:00:46.023
> 
> 标签：android, android-video-player

我想在存储在服务器上的应用程序中播放视频。

我检查了很多帖子，但我无法在我的应用程序中玩同样的游戏。请帮我做同样的事情。

这是我的代码。

```
package com.example.videoStreaming;

import android.app.Activity;
import android.net.Uri;
import android.os.Bundle;
import android.widget.MediaController;
import android.widget.Toast;
import android.widget.VideoView;

public class MainActivity extends Activity {

    /**
     * TODO: Set the path variable to a streaming video URL or a local media
     * file path.
     */
    private String path = "http://www.pocketjourney.com/downloads/pj/video/famous.3gp";
    private VideoView mVideoView;

    @Override
    public void onCreate(Bundle icicle) {
        super.onCreate(icicle);
        setContentView(R.layout.activity_main);
        mVideoView = (VideoView) findViewById(R.id.surface_view);

        if (path == "") {
            // Tell the user to provide a media file URL/path.
            Toast.makeText(
                    MainActivity.this,
                    "Please edit VideoViewDemo Activity, and set path"
                            + " variable to your media file URL/path",
                    Toast.LENGTH_LONG).show();

        } else {

            /*
             * Alternatively,for streaming media you can use
             * mVideoView.setVideoURI(Uri.parse(URLstring));
             */
            mVideoView.setVideoURI(Uri.parse("http://www.pocketjourney.com/downloads/pj/video/famous.3gp"));
            mVideoView.setMediaController(new MediaController(this));
            mVideoView.requestFocus();

        }
    }
} 
```

这是xml文件

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    >

    <VideoView 
        android:id="@+id/surface_view" 
        android:layout_width="320dp"
        android:layout_height="240dp"
    />

</LinearLayout> 
```

请不要拒绝我的投票。如果有人理解或可以帮助请帮助我。

谢谢

# sql - 多列输出中的不同列值（然后转换为 CSV）

> ID：12166690
> 
> 赞同：0
> 
> 时间：2012-08-28T20:00:54.193
> 
> 标签：sql

我有以下查询：

```
SELECT first, last, title, email, org 
FROM people WHERE email <> "" 
INTO OUTFILE 'C:/testfile.csv' FIELDS TERMINATED BY ',' ENCLOSED BY '"' LINES TERMINATED BY '\n' 
```

哪个有效。我需要选择不同的电子邮件（我不希望同一电子邮件中有多个条目）。

它会像这样工作吗？：

```
SELECT first, last, title, distinct(email), org 
FROM people WHERE email <> "" 
INTO OUTFILE 'C:/testfile.csv' FIELDS TERMINATED BY ',' ENCLOSED BY '"' LINES TERMINATED BY '\n' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T20:03:50.920

您使用的是哪个平台/版本的 SQL？通常，这将通过 group by 语句来完成。就像是：

```
SELECT first, last, title, email, org 
FROM people 
GROUP BY Email
WHERE email <> ""
INTO OUTFILE 'C:/testfile.csv' FIELDS TERMINATED BY ',' ENCLOSED BY '"' LINES TERMINATED BY '\n' 
```

以上内容实际上适用于某些平台/版本的 SQL，但“正确”（标准 sql）方法如下（当然，如果同一电子邮件的其他字段不同，您会得到未定义的结果）：

```
SELECT max(first), max(last), max(title), email, max(org) 
FROM people 
GROUP BY Email
WHERE email <> ""
INTO OUTFILE 'C:/testfile.csv' FIELDS TERMINATED BY ',' ENCLOSED BY '"' LINES TERMINATED BY '\n' 
```

# wpf - 使 XamDataGrid 的新行中的特定列不可编辑

> ID：12166692
> 
> 赞同：1
> 
> 时间：2012-08-28T20:01:03.040
> 
> 标签：wpf, mvvm, infragistics, xamdatagrid

我正在尝试实现问题，将 XamDataGrid 中的新行的一列设置为不可编辑，

```
<igDP:XamDataGrid.FieldLayouts>
    <igDP:FieldLayout>
        <igDP:Field Name="LOAD_ID" Visibility="Visible">
            <igDP:Field.Settings>
                <igDP:FieldSettings AllowGroupBy="True"
                                    AllowEdit="False"
                                    AllowRecordFiltering="True"
                                    FilterOperatorDefaultValue="Contains" />
            </igDP:Field.Settings>
        </igDP:Field>
        <igDP:Field Name="DESCRIPTION" Visibility="Visible">
            <igDP:Field.Settings>
                <igDP:FieldSettings AllowGroupBy="True"
                                    AllowEdit="True"
                                    AllowRecordFiltering="True"
                                    FilterOperatorDefaultValue="Contains" />
            </igDP:Field.Settings>
        </igDP:Field>
    </igDP:FieldLayout>
</igDP:XamDataGrid.FieldLayouts> 
```

在 Load_id 的情况下，我已经将允许编辑设置为 false，但不知何故，这只会影响网格中已经加载的记录，而不是要添加的记录。

```
<igDP:FieldLayoutSettings
                AllowAddNew="True"
                AddNewRecordLocation="OnBottomFixed" 
                AutoFitMode="Always"
                AutoGenerateFields="False" HighlightAlternateRecords="True" HeaderPrefixAreaDisplayMode="FieldChooserButton" 
                /> 
```

它可能是 XamDataGrid 控件中的一个简单属性，但不知何故被我错过了。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T09:49:49.847

这对我有用

```
 <ig:UnboundField Label="Filter"  BindingPath="AggregateFilter" BindingMode="TwoWay" >
                            <ig:UnboundField.Settings>
                                <ig:FieldSettings EditorType="{x:Type Editors:XamTextEditor}">
                                <ig:FieldSettings.EditorStyle>
                                    <Style TargetType="{x:Type Editors:XamTextEditor}">
                                            <Setter Property="IsReadOnly" Value="{Binding Path=DataContext.isCusipMode, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type ig:XamDataGrid}}}"/>
                                    </Style>
                                </ig:FieldSettings.EditorStyle>
                            </ig:FieldSettings>
                            </ig:UnboundField.Settings>
                        </ig:UnboundField> 
```

# tomcat - 在 Grails 中制作 WAR 文件

> ID：12166694
> 
> 赞同：11
> 
> 时间：2012-08-28T20:01:07.860
> 
> 标签：tomcat, grails, quartz-scheduler

我使用 Grails 中的 war 命令制作 war 文件，但出现错误：

```
Error Exception occurred trigger event [CreateWarStart]: C:\Users\MultiSite\grails-app\migrations does not exist. 
```

该应用程序在 run-app 命令下运行良好。

谁能帮我解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-28T20:05:21.790

如果您使用的是数据库迁移插件，那么默认情况下您应该有一个`migrations`目录。Grails 2.x 开箱即用地安装数据库迁移插件。您可以从 BuildConfig.groovy 中删除它，也可以创建`migrations`目录。

# macos - OS X 上的 CCRenderTexture 和线程警告

> ID：12166696
> 
> 赞同：2
> 
> 时间：2012-08-28T20:01:17.423
> 
> 标签：macos, cocos2d-iphone, osx-mountain-lion

我在 OS X 上使用 Cocos2D 2.0 收到此警告：

-[CCRenderTexture initWithWidth:height:pixelFormat:depthStencilFormat:] : cocos2d: 警告。CCRenderTexture 在它自己的线程上运行。确保在这个线程上使用了 OpenGL 上下文！

这是我认为导致警告的代码：

```
- (id) initWithObject: (CCNode *) object mask: (CCSprite *) mask {
    NSAssert(object != nil, @"Invalid sprite for object");
    NSAssert(mask != nil, @"Invalid sprite for mask");

    if((self = [super init])) {

        _objectSprite = object;

        _maskSprite = mask;

        // Set up the burn sprite that will "knock out" parts of the darkness layer depending on the alpha value of the pixels in the image.
        [_maskSprite setBlendFunc: (ccBlendFunc) { GL_ZERO, GL_ONE_MINUS_SRC_ALPHA }];

        // Get window size, we want masking over entire screen don't we?
        CGSize size = [[CCDirector sharedDirector] winSize];

        // Create point with middle of screen
        CGPoint screenMid = ccp(size.width * 0.5f, size.height * 0.5f);

        // Create the rendureTextures for the mask
        _masked = [CCRenderTexture renderTextureWithWidth: size.width height: size.height];

        [[_masked sprite] setBlendFunc: (ccBlendFunc) { GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA }];

        // Set render textures at middle of screen
        _masked.position = screenMid;

        // Add the masked object to the screen
        [self addChild: _masked];

        [[CCDirector sharedDirector] setAlphaBlending:YES];
    }

    return self;
} 
```

请帮忙，我就是想不通。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-01T07:31:59.010

在`ccConfig.h`中，找到一行写着

`#define CC_DIRECTOR_MAC_THREAD CC_MAC_USE_DISPLAY_LINK_THREAD`

这是定义线程使用的地方。您可以尝试使用主线程选项 ( `CC_MAC_USE_MAIN_THREAD`)，或使用 GCD 确保所有代码实际上都在`-[CCDirector runningThread]`. 这几乎可以解决它。

# node.js - 收到 Redis ZRANGE 的回复

> ID：12166698
> 
> 赞同：1
> 
> 时间：2012-08-28T20:01:40.917
> 
> 标签：node.js, redis

我目前有两个排序集，我正在尝试从一组中获取所有分数和成员，并使用它从另一组中删除成员。我使用的模块是 node_redis。

现在我正在尝试通过调用`client.zrange()`并将回复存储在数组中来获取成员和分数。

我是否正确假设回复将采用数组形式？我意识到redis api说它返回一个“多批量回复”，但这究竟意味着什么？如果它不是一个数组，我将如何使用它？

我还有另一个问题，那就是我可以在使用时使用数组`zadd()`吗？一个例子是这样的。

```
client.zadd(historyKey, scores, members, function(err, reply){}); 
```

其中分数和成员是数组。

编辑：

我正在处理接收和解析 SNMP 陷阱。基本上我收到一个陷阱并检查它的警报类型。这些陷阱中的有用信息是警报类型和完整的陷阱名称。我检查警报是 0、1 还是 2。

如果它是 1，那么我在收到它时将它存储在我的当前排序集中。如果它是 0 或 2，我知道这种类型的警报已经完成，我需要从当前集中删除所有类似的陷阱，并将它们与我刚刚收到的那个一起放入历史集中。

为了从 Current 中移除陷阱并将它们放入历史记录中，我必须为每个单独的陷阱创建一个单独的集合，以便跟踪它们在 Current 集合中的位置。

也就是说，如果我在时间 1346276537 收到陷阱“RGB Gamut Error(----Bb)”并将其存储在 Current 中，我还将准确的分数和成员存储在一个单独的集合中，其中键为“IPAddress:RGB Gamut Error”。

这样，当我收到名称为“RGB Gamut Error”的警报类型 0 或 2 时，我可以将 IP 地址附加到它的前面，继续执行`zrange`该设置，然后添加到历史记录并从当前删除。最后删除“IPAddress:RGB Gamut Error”设置，这样我就可以重新开始了。

旁注：我的成员实际上在末尾添加了两个数字，以使每个成员都独一无二并且不会相互覆盖。这真的是唯一的目的。

例如：IPAdress::RGB 色域错误（Rr--Bb）：5:46

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T09:39:31.430

> 我是否正确假设回复将采用数组形式？

是的，将以数组的形式`node_redis`给您答复。`zrange`

> 我还有另一个问题，那就是我可以在使用 zadd() 时使用数组吗？一个例子是这样的。

不可以。在 redis 2.4 之前，您一次只能发送一个参数（so `zadd key score member`）。由于 redis 2.4 `zadd`（和许多其他命令）是*variadic*，即它们接受任意数量的参数 - 但不是作为数组。你仍然必须这样称呼它：

```
client.zadd(key, score1, member1, score2, member2, ..., function(err, reply){}); 
```

你可以做一些`.apply`诡计，但你必须先将`scores`and`members`数组压缩到一个数组中。

**更新：**

如果您已经拥有`scores`和`members`数组，则可以将它们合并为一个数组，如下所示：

```
var scores = [1, 2, 3],
    members = ['a', 'b', 'c'];

function merge (other) {
  return function (result, current, index) {
    result.push(current, other[index]);
    return result;
  }
}

var merged = scores.reduce(merge(members), []);

// Now merged = [1, 'a', 2, 'b', 3, 'c'];

var args = [key].concat(merged).concat(function(err, reply){});

client.zadd.apply(client, args); 
```

# indexeddb - 最新浏览器的最新 IndexedDB CRUD 场景？

> ID：12166704
> 
> 赞同：2
> 
> 时间：2012-08-28T20:02:13.620
> 
> 标签：indexeddb

据我了解，IndexedDB 是大多数跨浏览器在线数据库解决方案的方式。甚至可能在 FF 等浏览器中使用这个 polyfill。

我试图找到一个非常简单的页面，它使用 IndexedDB 最初填充数据库，从中读取，然后更新/插入记录。

我遇到的一切似乎都过时了。

[示例： http](http://www.html5rocks.com/en/tutorials/indexeddb/todo/) ://www.html5rocks.com/en/tutorials/indexeddb/todo/

这在我的 Chrome (21) 版本中似乎不起作用

这方面最新最好的样本是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T21:07:59.253

[这](https://developer.mozilla.org/en-US/docs/IndexedDB/Using_IndexedDB)包含最新的代码。一个问题是 Chrome 21 不是最新的，它不支持`onupgradeneeded`. 您可以执行类似[的](https://hacks.mozilla.org/2012/07/using-indexeddb-api-today-the-indexeddb-polyfills/)操作以使其与 Chrome 21 兼容，或者如果您想以最现代的方式做事（最新的开发人员版本似乎运行良好），请等待 Chrome 23。

[这是另一个适用于 Chrome 23 的最新教程](http://www.html5rocks.com/en/tutorials/indexeddb/uidatabinding/)，但不适用于当前版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T16:37:47.640

我尝试通过 javascript 包装器[http://dev.yathit.com/ydn-db/starting/setup.html](http://dev.yathit.com/ydn-db/starting/setup.html)演示 IndexdbDB 的最佳用法 尝试将代码片段复制并粘贴到开发控制台并尝试一下。您对 IndexedDB 有很好的感觉和信心。通过动手教程很容易理解如何使用 IndexedDB。

# c# - 'is' 运算符不能应用于静态类型的操作数

> ID：12166707
> 
> 赞同：3
> 
> 时间：2012-08-28T20:02:22.680
> 
> 标签：c#, nullable

在这种情况下，这个错误意味着什么？

```
if (value == null)
    return "";

if (value is Nullable && ((INullable)value).IsNull) //error on this line
    return "";

if (value is DateTime)
{
    if (((DateTime)value).TimeOfDay.TotalSeconds == 0)
        return ((DateTime)value).ToString ("yyyy-MM-dd");
    return ((DateTime)value).ToString ("yyyy-MM-dd HH:mm:ss");
} 
```

我搜索但没有得到有关此错误的任何信息。我正在 Mono (2.10.8.1) 上尝试这个。这是一个实际上是为 Windows 设计的项目，但是当我尝试在 Monodevelop 中编译它时，我得到了这个错误。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-28T20:03:47.817

问题在这里：

```
if (value is Nullable 
```

它认为您在谈论[静态类`System.Nullable`](http://msdn.microsoft.com/en-us/library/fs5xdbk8)而不是[`System.Nullable<T>`](http://msdn.microsoft.com/en-us/library/b3h38hb0.aspx)结构。

也许你的意思是：

```
if (value is INullable ...) 
```

?

请注意，如果`value`是编译时类型`object`，那么它*永远不会*是 a `Nullable<T>`，因为装箱一个空值会给出一个空引用，而装箱一个非空值会给出一个底层类型的装箱值。

如果您认为还有其他需要实现的目标，请说明您正在尝试做的事情。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-28T20:03:46.797

该类型`System.Nullable`是静态类型——这意味着无法创建实例。因此`value`永远不可能是`Nullable`.

Microsoft C# 编译器没有这个错误——所以，任何使用 Visual Studio 的人都不会得到这个错误。因此，创建 RedditSaveTransfer 的人似乎使用过 Visual Studio。在 MonoDevelop 中编译同样的代码显然有这个额外的错误。

我对这段代码一无所知，所以我不知道他们在这里试图做什么的意图。显然`value`不可能是 type `Nullable`，所以整个`if`陈述总是错误的。所以，我认为，简单地从代码中删除块是安全的。

但是，根据代码，它看起来像是在尝试检查值是否是某种`SqlTypes.INullable`. 在这种情况下，我可能会做类似的事情：

```
INullable nullable = value as INullable;
if(nullable != null && nullable.IsNull)
   return ""; 
```

但是，这将产生与原始代码不同的结果；我不知道这是好事还是坏事。

我同意乔恩的观点，这可能是一个错字`value is INullable`；但是，我不确定。

# reporting-services - 在报告中显示 Window 帐户用户的全名

> ID：12166709
> 
> 赞同：7
> 
> 时间：2012-08-28T20:02:27.967
> 
> 标签：reporting-services, ssrs-2008-r2

我想在我的 SSRS 报告中显示完整的用户名。我使用`=User!UserID`了提供域\登录名。

我可以得到像 Tom,Cruise 这样的用户的全名，而不是 abc\tcruise。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T06:12:55.293

您提到的全局变量 ( `User!UserID`) 是唯一相关的内置变量，如果您查看[MSDN 上的内置全局变量](http://msdn.microsoft.com/en-us/library/dd255216%28v=sql.105%29.aspx)，那么我想您可能已经回答了您自己的问题。

我脑海中的一些替代方案：

*   *如果您使用ReportViewer*在自己的应用程序中运行报告，则可以使用隐藏参数并让应用程序传递完整的用户名。
*   您可以尝试的更重的替代方法是使用[自定义（嵌入式）代码或程序集引用](http://msdn.microsoft.com/en-us/library/ms159238%28v=sql.105%29)，这可能使您可以访问此信息（虽然不是 100% 肯定）。

# ruby-on-rails - 使用 RVM 安装 Rails，同时检查 rail -v: bundler-1.1.5 与 bundler 冲突 (~> 1.0.0)

> ID：12166710
> 
> 赞同：1
> 
> 时间：2012-08-28T20:02:34.520
> 
> 标签：ruby-on-rails, rvm, bundler

我很难让我的 Rails 环境启动。这是问题所在。

```
$ gem install rails --version 3.0.1

Successfully installed rails-3.0.1
1 gem installed
Installing ri documentation for rails-3.0.1...
Installing RDoc documentation for rails-3.0.1...

$ rails -v

/.rvm/rubies/ruby-1.9.2-p320/lib/ruby/site_ruby/1.9.1/rubygems/specification.rb:1637:in `raise_if_conflicts': **Unable to activate rails-3.0.1, because bundler-1.1.5 conflicts with bundler (~> 1.0.0) (Gem::LoadError)**
    from /.rvm/rubies/ruby-1.9.2-    p320/lib/ruby/site_ruby/1.9.1/rubygems/specification.rb:746:in `activate'
    from /.rvm/rubies/ruby-1.9.2-p320/lib/ruby/site_ruby/1.9.1/rubygems.rb:1232:in `gem'
    from /.rvm/gems/ruby-1.9.2-p320@rails3tutorial/bin/rails:18:in `<main>'
    from /.rvm/gems/ruby-1.9.2-p320@rails3tutorial/bin/ruby_noexec_wrapper:14:in `eval'
    from /.rvm/gems/ruby-1.9.2-p320@rails3tutorial/bin/ruby_noexec_wrapper:14:in `<main>' 
```

问题就在这里。我已经重新安装了红宝石。我已经安装了 1.8.7、1.9.2、1.9.3，但仍然没有运气。

我已经运行了 $ gem update bundler

但是捆绑是“最新的”，所以仍然没有运气

我现在真的整天都在戳这个，没有运气，我向你们所有人张开手掌。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T22:50:24.713

问题是在`@global`gemset 中，您拥有更高版本的捆绑程序，然后是所需的版本。

您可以在命令行上指定版本：

```
bundle _1.0.27_ exec rails -v 
```

或使用`Gemfile`：

```
printf 'source :rubygems\ngem "rails", "3.0.1"\n'
rails -v 
```

这假设您拥有 gem **ruby​​gems-bundler** - 但它默认带有 RVM，因此您应该拥有它。

最后 - 从以下位置删除捆绑器`@global`：

```
rvm @global do gem uninstall bundler 
```

但有一个警告 - 重新安装 ruby​​ gem bundler 时将再次安装。

# android - 录制的视频方向错误

> ID：12166731
> 
> 赞同：6
> 
> 时间：2012-08-28T20:04:28.533
> 
> 标签：android, camera

我`mCamera.setDisplayOrientation(90);`用来旋转相机。

这成功地改变了相机预览，但不是实际的“相机”，所以录制的视频仍然是横向的。他们有办法做到这一点吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-05-22T12:05:06.390

这可能会帮助你

`mMediaRecorder.setOrientationHint()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T20:19:00.177

视频流永远不会旋转 - 它会被记录下来。请参阅[文档](http://developer.android.com/reference/android/hardware/Camera.html#setDisplayOrientation%28int%29)：“*设置预览显示的顺时针旋转度数。这会影响预览帧和快照后显示的图片。* ”

# mapreduce - 适合海量数据的存储方式

> ID：12166733
> 
> 赞同：0
> 
> 时间：2012-08-28T20:04:39.470
> 
> 标签：mapreduce, rdbms, bigdata

对于非常大量的数据，您推荐哪种存储方式？（≈ 每天 5000 万条记录）。对于像 Hadoop 或 RDBMS 这样的系统，这种适当的情况是否仍然足以达到此目的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T13:18:04.457

根据您所描述的数据量，您可能确实正在进入大数据领域。根据您提供的详细信息的数量，我建议将原始数据加载到 Hadoop 集群中，运行 map/reduce 作业来解析它并加载到基于日期的目录中。然后，您可以定义一个按日期（每天？每周？）分区的外部 Hive 表，映射到您的 map/reduce 作业的结果。

下一步将取决于您的报告的复杂性和所需的响应时间。如果您可以轻松地在 SQL 中表达它们，您可以在您的 Hive 表上运行查询。如果它们更详细，您可能必须编写自定义 map/reduce 作业。许多人建议使用 Pig，但我个人更喜欢直接的 Java。

如果您不关心报告的响应时间，您可以按需运行它们。如果您关心，但打开等待结果等待数十秒或几分钟，您也可以将报告结果存储在 Hive 中。如果您希望报表快速显示，例如在基于 Web 或移动 UI 中，您可能希望将报表数据存储在关系数据库中。

# ios - 将 UIDatePicker 添加到 UIAlertView

> ID：12166734
> 
> 赞同：6
> 
> 时间：2012-08-28T20:04:42.497
> 
> 标签：ios, uialertview, uidatepicker

我正在尝试将日期选择器添加到警报视图。我可以通过单击按钮将动画添加到屏幕上，我看到一个黑框，但没有日期选择器。

这是我到目前为止所拥有的......

```
- (IBAction)showDatePicker {
    CGRect frame = CGRectMake(200, self.view.frame.size.height, self.view.frame.size.width, 0);  //CGRectMake(225, 145, 260, 125);
    UIPickerView *datePicker = [[UIPickerView alloc] initWithFrame:frame];
    UIAlertView *showDateAlert = [[UIAlertView alloc]
                                  initWithTitle:@"Enter the Code Date"
                                  message:@"Sample message"
                                  delegate:self
                                  cancelButtonTitle:@"Cancel"
                                  otherButtonTitles:@"Update", nil];

    [self.view addSubview:datePicker];
    [UIView beginAnimations:@"slideIn" context:nil];
    [datePicker setCenter:CGPointMake(datePicker.frame.origin.x, self.view.frame.size.height - datePicker.frame.size.height/2)];
    [UIView commitAnimations];
} 
```

我找到了一个似乎正在工作的示例，但我在警报框中没有看到任何对话框或按钮，只有日期选择器本身。我在这里错过了什么吗？

```
- (IBAction)showDatePicker {
    CGRect frame = CGRectMake(225, self.view.frame.size.height, self.view.frame.size.width, 125);
    UIDatePicker *datePicker = [[UIDatePicker alloc] initWithFrame:frame];
    datePicker = [[UIDatePicker alloc] init];
    datePicker.datePickerMode = UIDatePickerModeDate;

    [datePicker setDate:[NSDate date]];

    UIAlertView *alert;
    alert = [[UIAlertView alloc]
             initWithTitle:@"Enter the Code Date"
             message:@"Sample message"
             delegate:self
             cancelButtonTitle:@"Cancel"
             otherButtonTitles:@"Update", nil];
    alert.delegate = self;
    [alert addSubview:datePicker];
    [alert show];
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2016-09-13T18:40:35.437

**在斯威夫特：**

```
 let myDatePicker: UIDatePicker = UIDatePicker()
        // setting properties of the datePicker
        myDatePicker.timeZone = NSTimeZone.localTimeZone()
        myDatePicker.frame = CGRectMake(0, 15, 270, 200)

        let alertController = UIAlertController(title: "\n\n\n\n\n\n\n\n", message: nil, preferredStyle: UIAlertControllerStyle.Alert)
        alertController.view.addSubview(myDatePicker)
        let somethingAction = UIAlertAction(title: "Ok", style: UIAlertActionStyle.Default, handler: nil)
        let cancelAction = UIAlertAction(title: "Cancel", style: UIAlertActionStyle.Cancel, handler: nil)
        alertController.addAction(somethingAction)
        alertController.addAction(cancelAction)
        self.presentViewController(alertController, animated: true, completion:{}) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-28T20:29:19.897

你不会喜欢这个答案，但我的建议是：不要那样做！UIAlertView 不适合您添加自己的子视图；你发现人们这样做的例子是错误行为的例子。创建您自己的视图，其中包含您想要的选择器、文本、按钮等，并以某种方式呈现。例如，您可以通过其自己的视图控制器以模态方式呈现它，例如使用`presentModalViewController:animated:`or `presentViewController:animated:completion:`。如果您使用的是 iPad，则可以使用弹出框（如果这很重要，它可以是模态的）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-28T22:11:09.677

我同意评论者的观点，他们一直说这不是实现这一目标的方法，原因有几个。首先，没有人喜欢不断弹出警报视图。其次，不适用于您的情况，它最终可能会导致应用程序被拒绝。Apple 更改了`UIAlertView`类引用中将其视图层次结构称为私有的措辞；我们都知道苹果对你在他们认为私人的事情上胡闹的感觉。

> 从 UIAlertView 类参考：
> 
> UIAlertView 类旨在按原样使用，不支持子类化。此类的视图层次结构是私有的，不得修改。

但既然你说这是一个私人应用程序，那就去吧。A`UIAlertView`只是一个`UIView`子类。所以框架和边界的所有规则仍然适用。这是一个基本示例，说明如何调整选择器的框架和警报的边界以挤入日期选择器。

```
// Create alert
UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Hello" message:@"message" delegate:self cancelButtonTitle:@"Cancel" otherButtonTitles:@"OK", nil];
// Show alert (required for sizes to be available)
[alert show];
// Create date picker (could / should be an ivar)
UIDatePicker *picker = [[UIDatePicker alloc] initWithFrame:CGRectMake(10, alert.bounds.size.height, 320, 216)];
// Add picker to alert
[alert addSubview:picker];
// Adjust the alerts bounds
alert.bounds = CGRectMake(0, 0, 320 + 20, alert.bounds.size.height + 216 + 20); 
```

**编辑**

正如评论和对许多“如何向 a 添加一些视图`UIAlertView`”问题的新答案所指出的那样，此方法在 iOS7 及更高版本中不再适用。这确实应该被视为这是一个根本上的坏主意的证据。

还要注意`setValue:forKey:`在普遍流传的“解决方案”中对无法修改 Apple 的私有视图层次结构的“问题”的使用。`setValue:forKey:`是引起私有 API 扫描器兴趣的方法之一。`accessoryView`在`UIAlertView`文档和标题中搜索。它不在文档中。标题中唯一相关的项目是一个名为的 ivar `_accessoryView`，它被标记为`@private`.

再次对于内部或私人应用程序，我想没关系，不过没关系。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-05-18T18:31:33.907

这对我有用（使用iOS7）。在此之前调用它`[alertView show]`：

```
[alertView setValue:customContentView forKey:@"accessoryView"]; 
```

* * *

**例子：**

```
UIAlertView *av = [[UIAlertView alloc] initWithTitle:@"TEST" message:@"subview" delegate:nil cancelButtonTitle:@"NO" otherButtonTitles:@"YES", nil];
UIView *v = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 100, 50)];
v.backgroundColor = [UIColor yellowColor];
[av setValue:v forKey:@"accessoryView"];
[av show]; 
```

来源：[iOS 7 UIDatePicker 中的 UIAlertView 自定义](https://stackoverflow.com/a/21067631/1533054)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-01-21T11:22:56.023

这在 ios7 及更高版本中对我有用。

```
UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Select Date" message:@"" delegate:self cancelButtonTitle:@"Cancel" otherButtonTitles:@"OK", nil];
UIDatePicker *picker = [[UIDatePicker alloc] initWithFrame:CGRectMake(10, alert.bounds.size.height, 320, 216)];
[alert addSubview:picker];
alert.bounds = CGRectMake(0, 0, 320 + 20, alert.bounds.size.height + 216 + 20);
[alert setValue:picker forKey:@"accessoryView"];
[alert show]; 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-06-09T05:15:33.577

**Swift 5**版本的@Matheus Domingos 答案

```
let myDatePicker: UIDatePicker = UIDatePicker()
myDatePicker.timeZone = NSTimeZone.local
myDatePicker.frame = CGRect(x: 0, y: 15, width: 270, height: 200)
let alertController = UIAlertController(title: "\n\n\n\n\n\n\n\n", message: nil, preferredStyle: UIAlertController.Style.alert)
alertController.view.addSubview(myDatePicker)
let somethingAction = UIAlertAction(title: "Ok", style: UIAlertAction.Style.default, handler: nil)
let cancelAction = UIAlertAction(title: "Cancel", style: UIAlertAction.Style.cancel, handler: nil)
alertController.addAction(somethingAction)
alertController.addAction(cancelAction)
present(alertController, animated: true, completion:{}) 
```

**斯威夫特 5.2**

```
let myDatePicker: UIDatePicker = UIDatePicker()
myDatePicker.timeZone = NSTimeZone.local
myDatePicker.frame = CGRect(x: 0, y: 15, width: 270, height: 200)
let alertController = UIAlertController(title: "\n\n\n\n\n\n\n\n", message: nil, preferredStyle: UIAlertController.Style.alert)
alertController.view.addSubview(myDatePicker)
let somethingAction = UIAlertAction(title: "Ok", style: UIAlertAction.Style.default, handler: nil)
let cancelAction = UIAlertAction(title: "Cancel", style: UIAlertAction.Style.cancel, handler: nil)
alertController.addAction(somethingAction)
alertController.addAction(cancelAction)
self.present(alertController, animated: true, completion: {}) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-05-02T08:00:53.490

这是我的 UIViewController 扩展解决方案。

```
typealias DatePickerHandler = (_ success: Bool, _ date:Date) -> Void
typealias TimePickerHandler = (_ success: Bool, _ date:Date) -> Void
extension UIViewController{

func showDatePicker(completionHandler: @escaping DatePickerHandler){
    let vc = UIViewController()
    vc.preferredContentSize = CGSize(width: 250,height: 300)
    let pickerView = UIDatePicker(frame: CGRect(x: 0, y: 0, width: vc.view.bounds.width, height: 300))
    pickerView.datePickerMode = UIDatePicker.Mode.date
    if #available(iOS 13.4, *) {
        pickerView.preferredDatePickerStyle = .wheels
    } else {
        // Fallback on earlier versions
    }
     vc.view.addSubview(pickerView)
    NSLayoutConstraint.activate([
        pickerView.leadingAnchor.constraint(equalTo: vc.view.leadingAnchor,constant: 8),
        pickerView.trailingAnchor.constraint(equalTo: vc.view.trailingAnchor,constant: 8),
        pickerView.topAnchor.constraint(equalTo: vc.view.topAnchor,constant: 8),
        pickerView.bottomAnchor.constraint(equalTo: vc.view.bottomAnchor,constant: 8),
    ])

       let editRadiusAlert = UIAlertController(title: "Select Date", message: "", preferredStyle: UIAlertController.Style.actionSheet)
       editRadiusAlert.setValue(vc, forKey: "contentViewController")
       editRadiusAlert.addAction(UIAlertAction(title: "Select", style: .default, handler: {action in
        completionHandler(true,pickerView.date)
       }))
       editRadiusAlert.addAction(UIAlertAction(title: "Cancel", style: .cancel, handler: {action in
            completionHandler(false,Date())
       }))
       self.present(editRadiusAlert, animated: true)
}
func showTimePicker(completionHandler: @escaping TimePickerHandler){
    let vc = UIViewController()
    vc.preferredContentSize = CGSize(width: 250,height: 300)
    let pickerView = UIDatePicker(frame: CGRect(x: 0, y: 0, width: vc.view.bounds.width, height: 300))

    pickerView.datePickerMode = UIDatePicker.Mode.time
    if #available(iOS 13.4, *) {
        pickerView.preferredDatePickerStyle = .wheels
    } else {
        // Fallback on earlier versions
    }
    vc.view.addSubview(pickerView)
    NSLayoutConstraint.activate([
        pickerView.leadingAnchor.constraint(equalTo: vc.view.leadingAnchor,constant: 8),
        pickerView.trailingAnchor.constraint(equalTo: vc.view.trailingAnchor,constant: 8),
        pickerView.topAnchor.constraint(equalTo: vc.view.topAnchor,constant: 8),
        pickerView.bottomAnchor.constraint(equalTo: vc.view.bottomAnchor,constant: 8),
    ])

    let editRadiusAlert = UIAlertController(title: "Select Time", message: "", preferredStyle: UIAlertController.Style.actionSheet)
       editRadiusAlert.setValue(vc, forKey: "contentViewController")
       editRadiusAlert.addAction(UIAlertAction(title: "Select", style: .default, handler: {action in
            completionHandler(true,pickerView.date)
        }))
        editRadiusAlert.addAction(UIAlertAction(title: "Cancel", style: .cancel, handler: {action in
             completionHandler(false,Date())
        }))

    self.present(editRadiusAlert, animated: true)
}
} 
```

这里如何在 UIViewController 中使用它

```
 showDatePicker { (isSuccess, date) in
        if(isSuccess){
        }
    } 
```

快乐编码！

# ios - 从一个视图移动到另一个视图时的过渡效果

> ID：12166740
> 
> 赞同：0
> 
> 时间：2012-08-28T20:05:09.720
> 
> 标签：ios, uiview, transition

从一个视图移动到另一个视图时如何添加过渡效果？

例如，当单击按钮调用 addSubView 时，会加载一个新视图。这样做时我想要像“滑入”这样的过渡效果/动画？另外，返回原始视图时如何添加“滑出”过渡？

请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T20:21:15.217

这可以通过简单的`UIView`动画来完成。这里有几个例子。

这将使 alpha 从 0.0 到 1.0 产生淡入效果：

```
UIView *secondView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 320, 480)];
[secondView setAlpha:0.0];
[self.view addSubview:secondView];

[UIView animateWithDuration:1.0 delay:0.0 options:UIViewAnimationOptionCurveEaseInOut animations:^{
    [secondView setAlpha:1.0];
}completion:^(BOOL done){
    //Some completion handler!
}]; 
```

然后您可以深入`CGAffineTransforms`研究以处理移动视图。此示例将从屏幕的左下角移入新视图。

```
UIView *secondView = [[UIView alloc] initWithFrame:CGRectMake(320, 480, 320, 480)];
[self.view addSubview:secondView];

[UIView animateWithDuration:1.0 delay:0.0 options:UIViewAnimationOptionCurveEaseInOut animations:^{
    [secondView setTransform:CGAffineTransformMakeTranslation(-320, -480)];
}completion:^(BOOL done){
    //Some completion handler!
}]; 
```

使用这样的块，您几乎可以制作任何您想要的简单到中间动画。

# macports - mac os x 山狮上的 macports

> ID：12166746
> 
> 赞同：4
> 
> 时间：2012-08-28T20:05:30.247
> 
> 标签：macports

我试图在新安装的山狮上安装 macports，我先安装了 xCode，然后安装了 xCode 命令行工具。之后，我运行 xCode 并同意条款和条件，然后安装 macports dmg 包。

一旦我这样做了，我运行了自我更新命令并且它工作了，但是任何自我安装或自我升级都将不起作用。

```
Mo-Mughrabis-MacBook-Pro:~ mo$ sudo port -v selfupdate
--->  Updating MacPorts base sources using rsync
receiving file list ... done

sent 36 bytes  received 69 bytes  30.00 bytes/sec
total size is 3543040  speedup is 33743.24
receiving file list ... done

sent 36 bytes  received 76 bytes  32.00 bytes/sec
total size is 512  speedup is 4.57
MacPorts base version 2.1.2 installed,
MacPorts base version 2.1.2 downloaded.
--->  Updating the ports tree
Synchronizing local ports tree from rsync://rsync.macports.org/release/tarballs/ports.tar
receiving file list ... done

sent 36 bytes  received 70 bytes  30.29 bytes/sec
total size is 53821440  speedup is 507749.43
receiving file list ... done

sent 36 bytes  received 77 bytes  32.29 bytes/sec
total size is 512  speedup is 4.53
Creating port index in /opt/local/var/macports/sources/rsync.macports.org/release/tarballs/ports

Total number of ports parsed:   0 
Ports successfully parsed:  0 
Ports failed:           0 
Up-to-date ports skipped:   15604

--->  MacPorts base is already the latest version

The ports tree has been updated. To upgrade your installed ports, you should run
  port upgrade outdated
Mo-Mughrabis-MacBook-Pro:~ mo$ sudo port upgrade outdated
Error: No ports matched the given expression 
```

当我尝试运行 sudo port install 我得到以下

```
Mo-Mughrabis-MacBook-Pro:~ mo$ sudo port install 
Can't map the URL 'file://.' to a port description file ("Could not find Portfile in /Users/mo").
Please verify that the directory and portfile syntax are correct.
To use the current port, you must be in a port's directory. 
```

任何人都可以帮助我解决我在这里可能做错了什么？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T20:11:46.010

由于您几乎没有安装 MacPorts，因此还没有安装任何实际端口（您很可能在另一台计算机上拥有）。

如果你运行`port installed`，你会注意到它返回空。

恭喜你；0 个端口中有 0 个已过时 ;-)

如果您想要其他 Mac 上的所有相同端口，请启动终端并`port installed`在这些机器上运行。这应该会为您提供所有内容的列表，您可以导出该列表，或者在新的 Mountain Lion 安装中选择您想要的列表。

然后它会很简单

```
port install [which program]
```

对于您想要的每个端口。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T11:29:25.733

在这个命令之后我得到了同样的信息`port clean --all`，因为`MacPorts`根本没有什么可做的（清理）。

# android - 为什么 PhoneGap 比浏览器慢？

> ID：12166749
> 
> 赞同：20
> 
> 时间：2012-08-28T20:05:40.387
> 
> 标签：android, cordova, cordova-2.0.0

我在 Android 上的 PhoneGap 和内置浏览器下运行相同的网络应用程序。该应用程序在内置浏览器上运行良好，但在 PhoneGap 下速度慢得令人难以置信。在 PhoneGap 下，即使是页面上的基本滚动也会卡顿。

一般来说，有什么我可能做错了吗？我的印象是 PhoneGap 只使用与普通浏览器应用程序相同的 WebKit 渲染器，那么为什么相同的 HTML 和 JavaScript 在 PhoneGap 中运行速度要慢得多？

PS这已经被[问过](https://stackoverflow.com/questions/8213594/is-phonegap-slow-or-it-is-a-bug)，但由于措辞我认为原来的问题被误解了。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-13T00:17:28.710

我可能无意中偶然发现了这个问题的答案。事实证明，我正在开发的应用程序`android:targetSdkVersion`的`AndroidManifest.xml`值非常低（即我的目标 Android 版本类似于 2.2）。将其增加到`14`（Android 4.0）似乎极大地提高了 PhoneGap 的性能，至少在运行 ICS 或 Jelly Bean 的较新的 Android 设备上。

设置低`targetSdkVersion`似乎至少会禁用新版本 Android 中引入的一些性能改进。

因此，如果您想看到 PhoneGap 的性能大幅提升，请确保您`targetSdkVersion`与您正在测试的手机支持的最大 SDK 版本相匹配。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-28T20:42:25.457

我不知道phoneGap，但你可以试试这些：

*   `android:hardwareAccelerated="true"`在清单中添加
*   如果您使用 webview`webview.getSettings().setRenderPriority(RenderPriority.HIGH);`和`webview.getSettings().setCacheMode(WebSettings.LOAD_NO_CACHE);`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-12-06T03:30:05.670

这是违反直觉的，但您实际上可能需要为您的 webview 关闭硬件加速。从 Android 4.0.4 开始，硬件加速对画布和其他重绘事件没有任何作用，但实际上会为这些事件移除 CPU 资源。

尝试在您的应用程序 java 文件中添加这行代码：

super.setLayerType(View.LAYER_TYPE_SOFTWARE, null);

还要在清单中设置 android:hardwareAccelerated="false"。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-19T19:57:31.713

我经历过的一模一样！以前我使用 Android 3.x 进行测试。一旦我升级到 4.4.2，我的 Canvas 就非常缓慢！查看渲染时间线，我可以看到许多光栅化调用超过 100 毫秒，并将我的 FPS 降低到大约 8！android:hardwareAccelerated="false" 解决了我的问题。有没有办法根据android版本设置hardwareAccelerated="true"？

# objective-c - 我的守护进程在注销/登录时从 launchd 注销

> ID：12166752
> 
> 赞同：1
> 
> 时间：2012-08-28T20:05:50.143
> 
> 标签：objective-c, macos, launchd

我创建了一个如下所示的 plist：

```
<?xml version=\"1.0\" encoding=\"UTF-8\"?>
<!DOCTYPE plist PUBLIC \"-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd\">
<!-- My version "1.2.3" -->
<plist version=\"1.0\">
<dict>
<key>Disabled</key>
<false/>
<key>Label</key>
<string>MyPlistName</string>
<key>ProgramArguments</key>
<array>
<string>MyDaemonBinPath</string>
<string>-log</string>
<string>MyLogLevel</string>
<string>-launchd</string>
</array>
<key>Sockets</key>
<dict>
<key>Listeners</key>
<dict>
<key>SockFamily</key>
<string>Unix</string>
<key>SockPathMode</key>
<integer>438</integer>
<key>SockPathName</key>
<string>MySocketName</string>
</dict>
</dict>
<key>StandardErrorPath</key>
<string>MySTDERRLogPath</string>
<key>WaitForDebugger</key>
<false/>
<key>inetdCompatibility</key>
<dict>
<key>Wait</key>
<false/>
</dict>
</dict>
</plist> 
```

我把它放在 /Library/LaunchDaemons

然后我运行命令：

```
/bin/launchctl unload /Library/LaunchDaemons/MyPlistName.plist
/bin/launchctl load /Library/LaunchDaemons/MyPlistName.plist 
```

当我连接到 plist 中指定的套接字并键入以下内容时，我的守护程序会启动：

```
launchctl list 
```

守护程序已注册，但是当我注销并重新登录并再次询问列表时，它不再注册，我无法通过连接到套接字来启动我的守护程序

是否需要在 plist 或守护程序上设置一些特殊权限才能使其在会话之间持续存在？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T22:40:54.337

你检查过你`/var/log/system.log`的错误吗？常规 plist 在`/Library/LaunchDaemons/`启动时以 root 身份运行。您可能想检查`sudo launchctl list`它们是否运行。如果没有，您可能需要更改 plist 的所有权/读写属性以匹配根目录。最后，您可以包括以下内容来改进日志记录：

```
<key>StandardErrorPath</key>
  <string>/logs/launchd_myprogram_stderr.log</string>
<key>StandardOutPath</key>        
  <string>/logs/launchd_myprogram_stdout.log</string> 
```

# javascript - 如何通过类名获取子元素？

> ID：12166753
> 
> 赞同：209
> 
> 时间：2012-08-28T20:05:50.803
> 
> 标签：javascript, yui

我正在尝试获取具有类 = 4 的子跨度。这是一个示例元素：

```
<div id="test">
 <span class="one"></span>
 <span class="two"></span>
 <span class="three"></span>
 <span class="four"></span>
</div> 
```

我可用的工具是 JS 和 YUI2。我可以做这样的事情：

```
doc = document.getElementById('test');
notes = doc.getElementsByClassName('four');

//or

doc = YAHOO.util.Dom.get('#test');
notes = doc.getElementsByClassName('four'); 
```

这些在 IE 中不起作用。我收到一个错误，指出对象 (doc) 不支持此方法或属性 (getElementsByClassName)。我已经尝试了一些跨浏览器实现 getElementsByClassName 的示例，但我无法让它们工作并且仍然出现该错误。

我认为我需要的是一个跨浏览器 getElementsByClassName 或者我需要使用 doc.getElementsByTagName('span') 并循环直到找到第 4 类。不过我不知道该怎么做。

* * *

## 回答 #1

> 赞同：267
> 
> 时间：2018-03-15T11:05:16.250

使用 querySelector 和 querySelectorAll

```
var testContainer = document.querySelector('#test');
var fourChildNode = testContainer.querySelector('.four'); 
```

IE9及以上

* * *

## 回答 #2

> 赞同：117
> 
> 时间：2012-08-28T20:10:26.357

用于`doc.childNodes`遍历每个`span`，然后过滤`className`等于的那个`4`：

```
var doc = document.getElementById("test");
var notes = null;
for (var i = 0; i < doc.childNodes.length; i++) {
    if (doc.childNodes[i].className == "4") {
      notes = doc.childNodes[i];
      break;
    }        
} 
```

​</p>

* * *

## 回答 #3

> 赞同：50
> 
> 时间：2014-08-20T21:31:11.547

接受的答案只检查直系子女。很多时候，我们正在寻找具有该类名的任何后代。

此外，有时我们想要任何*包含*类名的孩子。

例如：`<div class="img square"></div>`应该匹配对 className“img”的搜索，即使它的*确切*className 不是“img”。

以下是这两个问题的解决方案：

**查找具有该类的后代元素的第一个实例`className`**

```
 function findFirstChildByClass(element, className) {
        var foundElement = null, found;
        function recurse(element, className, found) {
            for (var i = 0; i < element.childNodes.length && !found; i++) {
                var el = element.childNodes[i];
                var classes = el.className != undefined? el.className.split(" ") : [];
                for (var j = 0, jl = classes.length; j < jl; j++) {
                    if (classes[j] == className) {
                        found = true;
                        foundElement = element.childNodes[i];
                        break;
                    }
                }
                if(found)
                    break;
                recurse(element.childNodes[i], className, found);
            }
        }
        recurse(element, className, false);
        return foundElement;
    } 
```

* * *

## 回答 #4

> 赞同：29
> 
> 时间：2019-08-29T09:39:49.910

使用 element.querySelector()。让我们假设：“myElement”是您已经拥有的父元素。'sonClassName' 是您要查找的孩子的班级。

```
let child = myElement.querySelector('.sonClassName'); 
```

欲了解更多信息，请访问：[https ://developer.mozilla.org/en-US/docs/Web/API/Element/querySelector](https://developer.mozilla.org/en-US/docs/Web/API/Element/querySelector)

* * *

## 回答 #5

> 赞同：14
> 
> 时间：2020-06-20T17:56:48.720

现代解决方案

```
const context = document.getElementById('context');
const selected = context.querySelectorAll(':scope > div'); 
```

[文件](https://developer.mozilla.org/en-US/docs/Web/CSS/:scope#Browser_compatibility)

* * *

## 回答 #6

> 赞同：12
> 
> 时间：2012-08-28T20:22:44.173

你可以试试：

```
notes = doc.querySelectorAll('.4'); 
```

或者

```
notes = doc.getElementsByTagName('*');
for (var i = 0; i < notes.length; i++) { 
    if (notes[i].getAttribute('class') == '4') {
    }
} 
```

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2012-08-28T20:26:43.297

对我来说，您似乎想要第四个跨度。如果是这样，您可以这样做：

```
document.getElementById("test").childNodes[3] 
```

或者

```
document.getElementById("test").getElementsByTagName("span")[3] 
```

最后一个确保没有任何隐藏节点可能会搞砸它。

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2012-08-28T20:13:11.890

使用 id 的名称，前面`getElementById`没有`#`符号。然后，您可以`span`使用 获取子节点`getElementsByTagName`，并遍历它们以找到具有正确类的子节点：

```
var doc = document.getElementById('test');

var c = doc.getElementsByTagName('span');

var e = null;
for (var i = 0; i < c.length; i++) {
    if (c[i].className == '4') {
        e = c[i];
        break;
    }
}

if (e != null) {
    alert(e.innerHTML);
} 
```

演示：http: [//jsfiddle.net/Guffa/xB62U/](http://jsfiddle.net/Guffa/xB62U/)

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2012-08-28T20:24:02.667

但请注意，旧浏览器不支持`getElementsByClassName`.

然后，你可以做

```
function getElementsByClassName(c,el){
    if(typeof el=='string'){el=document.getElementById(el);}
    if(!el){el=document;}
    if(el.getElementsByClassName){return el.getElementsByClassName(c);}
    var arr=[],
        allEls=el.getElementsByTagName('*');
    for(var i=0;i<allEls.length;i++){
        if(allEls[i].className.split(' ').indexOf(c)>-1){arr.push(allEls[i])}
    }
    return arr;
}
getElementsByClassName('4','test')[0]; 
```

它似乎有效，但请注意 HTML 类

*   必须以字母开头：AZ 或 az
*   后面可以跟字母 (A-Za-z)、数字 (0-9)、连字符 ("-") 和下划线 ("_")

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2018-08-27T15:26:00.310

在我看来，每次可以时，都应该使用 Array 及其方法。它们比遍历整个 DOM / 包装器或将东西推入空数组要快得多。此处介绍的大多数解决方案都可以称为 Naive，如此处所述（btw 很棒的文章）：

[https://medium.com/@chuckdries/traversing-the-dom-with-filter-map-and-arrow-functions-1417d326d2bc](https://medium.com/@chuckdries/traversing-the-dom-with-filter-map-and-arrow-functions-1417d326d2bc)

**我的解决方案**：（Codepen 上的实时预览：[https](https://codepen.io/Nikolaus91/pen/wEGEYe) ://codepen.io/Nikolaus91/pen/wEGEYe ）

```
const wrapper = document.getElementById('test') // take a wrapper by ID -> fastest
const itemsArray = Array.from(wrapper.children) // make Array from his children

const pickOne = itemsArray.map(item => { // loop over his children using .map() --> see MDN for more
   if(item.classList.contains('four')) // we place a test where we determine our choice
     item.classList.add('the-chosen-one') // your code here
}) 
```

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2021-02-02T10:44:07.917

使用查询选择器

```
var doc=document.getElementById("test");
console.log(doc.querySelector('.two').innerHTML)
```

```
<div id="test">
 <span class="one"></span>
 <span class="two">two</span>
 <span class="three"></span>
 <span class="four"></span>
</div>
```

使用 querySelectorAll

```
var doc=document.getElementById("test");
console.log(doc.querySelectorAll('*')[1].innerHTML)
```

```
<div id="test">
 <span class="one"></span>
 <span class="two">two</span>
 <span class="three"></span>
 <span class="four"></span>
</div>
```

使用 getElementsByTagNames

```
var doc=document.getElementById("test");
console.log(doc.getElementsByTagName("SPAN")[1].innerHTML);
```

```
<div id="test">
 <span class="one"></span>
 <span class="two">two</span>
 <span class="three"></span>
 <span class="four"></span>
</div>
<span>ss</span>
```

使用 getElementsByClassName

```
var doc=document.getElementById("test");
console.log(doc.getElementsByClassName('two')[0].innerHTML)
```

```
<div id="test">
 <span class="one"></span>
 <span class="two">two</span>
 <span class="three"></span>
 <span class="four"></span>
</div>
```

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2013-07-17T06:22:48.377

我将使用 jquery 执行此操作的方式是这样的..

> var targetchild = $("#test").children().find("span.four");

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2020-02-20T07:26:57.770

您可以通过添加下面的行来获取父类。如果你有一个 id，使用`getElementById`. 尽管如此，

```
var parentNode = document.getElementsByClassName("progress__container")[0]; 
```

然后你可以`querySelectorAll`在父级上使用`<div>`来获取所有匹配`div`的类`.progress__marker`

```
var progressNodes = progressContainer.querySelectorAll('.progress__marker'); 
```

`querySelectorAll`将获取每个`div`类`progress__marker`

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2021-10-15T02:29:27.060

其他方式

```
const result = [...(parentElement.children)].find(child => {
  return child.classList.contains('some-class-name');
}); 
```

首先，我们将 的元素展开`NodeList`以将其转换为一个，`Array`以便我们可以使用该`find()`方法。最后，`find()`将返回其`classList`属性包含给定类名的第一个元素。

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2014-10-09T14:11:31.913

这是一个相对简单的递归解决方案。我认为广度优先搜索在这里是合适的。这将返回与找到的类匹配的第一个元素。

```
function getDescendantWithClass(element, clName) {
    var children = element.childNodes;
    for (var i = 0; i < children.length; i++) {
        if (children[i].className &&
            children[i].className.split(' ').indexOf(clName) >= 0) {
            return children[i];
         }
     }
     for (var i = 0; i < children.length; i++) {
         var match = getDescendantWithClass(children[i], clName);
         if (match !== null) {
             return match;
         }
     }
     return null;
} 
```

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2020-09-30T07:28:18.610

我知道这个问题已经有几年的历史了，对此已有一些答案，但我想我会添加我的解决方案，以防万一它对任何人有帮助。**它与user2795540**给出的答案相同，涉及一个数组迭代器。

如果您只是想获得第一个拥有`four`该类的孩子，那么您可以使用`find`数组迭代器。你的浏览器需要能够支持 ES6，或者你可以使用 Babel 将你的 JS 编译成所有浏览器都支持的东西。**如果没有 polyfill，IE 将不支持此功能**。

使用您在问题中提供的相同详细信息，它可能看起来像这样：

```
const parentNode = document.getElementById('test');
const childNode = Array.from(parentNode.childNodes).find(({ className }) => className === 'four'); 
```

上述解决方案将返回您要定位的节点并将其存储在`childNode`变量中。

[您可以在https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/find](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/find)找到有关`find`数组迭代器的更多信息

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2021-04-02T17:59:40.020

我相信这会最好地回答你的问题

```
document.querySelector('* > span.four') 
```

这将匹配它找到的第一个子元素（任何父元素），它是一个跨度并且还设置了一个类“四”

但是，由于在您的示例中，您还有一个可以通过 id 检索的父元素，因此您也可以使用它来代替

```
document.querySelector('#test > span.four') 
```

如果您将父元素保存在示例中的变量中，并且您希望搜索该元素的子树，那么`:scope`正如 Billizzard 已经提到的，使用 可能是您的最佳选择

```
doc.querySelector(':scope > span.four'); 
```

额外的一点：如果您要查找的子元素不是直接子后代，而是在子树更下方的某个位置，您实际上可以省略`>`类似这样

```
document.querySelector('#test span.four') 
```

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2018-06-15T00:10:05.990

2018 年 6 月对 ES6 的更新

```
 const doc = document.getElementById('test');
    let notes = null;
    for (const value of doc) {
        if (value.className === '4') {
            notes = value;
            break;
        }    
    } 
```

* * *

## 回答 #19

> 赞同：-2
> 
> 时间：2012-08-28T20:33:56.197

YUI2 有一个[跨浏览器的实现`getElementsByClassName`](http://developer.yahoo.com/yui/examples/dom/getelementsbyclassname.html)。

* * *

## 回答 #20

> 赞同：-3
> 
> 时间：2012-08-28T21:08:09.487

这是我使用 YUI 选择器的方法。感谢 Hank Gay 的建议。

```
notes = YAHOO.util.Dom.getElementsByClassName('four','span','test'); 
```

其中四 = 类名，跨度 = 元素类型/标签名称，测试 = 父 ID。

* * *

## 回答 #21

> 赞同：-4
> 
> 时间：2012-08-28T21:26:10.040

`YAHOO.util.Dom.getElementsByClassName()`从[这里](http://developer.yahoo.com/yui/docs/YAHOO.util.Dom.html#method_getElementsByClassName)使用。

# ssh - 如何更改 EC2 公钥？

> ID：12166756
> 
> 赞同：4
> 
> 时间：2012-08-28T20:05:54.893
> 
> 标签：ssh, amazon-ec2, amazon-web-services, pem, public-key

我正在尝试为我自己、使用 AWS 的其他团队以及正在运行的实例更改我的 EC2 公钥。

所以旧密钥是（例如）'my_key'，我制作了一个名为'my_key2'的新密钥。

我制作了新密钥，将 .pem 文件与旧密钥一起保存，因此“my_key.pem”和“my_key2.pem”都位于我的 ~/.ssh 文件夹中。

现在，我正在尝试 ssh 到其他实例以更改它们的 authorization_keys 以共享我的公钥，但是当我尝试 ssh 时，我得到了

```
amy$ ssh ***-**-**-***-***.foo.com

Permission denied (publickey). 
```

我尝试将新的 'my_key2' 文件从 .ssh 文件夹中取出，并且出现了同样的问题。在我开始捣乱之前，我没有这个问题。关于让 ssh 识别我的旧证书以便我可以让每个人都使用新密钥的任何提示？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T20:17:45.740

您需要停止实例（如果是 EBS 支持的实例）以更改要用于实例的密钥对。如果不是 EBS 支持的卷，您只需要使用新的密钥对从您的 AMI 启动另一个实例。

如果您无法轻松地重新启动实例或创建新实例，则有这种方法声称能够更改正在运行的实例上的公钥，但我还没有尝试过。真正正确的方法是停止/启动或创建新实例。

[http://seabourneinc.com/2011/01/19/change-key-pairs-on-aws-ec2-instance/](http://seabourneinc.com/2011/01/19/change-key-pairs-on-aws-ec2-instance/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-28T06:52:13.620

[http://seabourneinc.com/2011/01/19/change-key-pairs-on-aws-ec2-instance/](http://seabourneinc.com/2011/01/19/change-key-pairs-on-aws-ec2-instance/) 此解决方案有效。我检查了它。在简单的步骤中。登录 AWS 控制台，创建一个新的 pem 密钥，它会要求您将其保存到本地，保存它。运行以下命令。

ssh-keygen -y | tee my_key.pub 键入保存新 pem 密钥文件的路径以及文件名。

上述命令将在屏幕上显示内容，将其复制并粘贴到 EC2 实例的 authorized_keys 文件中，保存并关闭。现在您可以使用保存/下载的新 pem 密钥文件来访问 EC2 实例。

# c - 在一个简单的 getword 中理解 ungetc 的使用

> ID：12166757
> 
> 赞同：0
> 
> 时间：2012-08-28T20:05:58.837
> 
> 标签：c, ungetc

我遇到过这样一个getword的例子。我了解所有检查等，但我对 ungetc 有疑问。

当`c`满足`if ((!isalpha(c)) || c == EOF)`且不满足`while (isalnum(c))` 时 -> 它不是字母，也不是数字 -`ungetc`拒绝那个`char`。

让我们假设它是`'\n'`。

然后它到达`return word`但是它不能被返回，因为它没有保存在任何数组中。那会发生什么？

```
 while (isalnum(c)) {
        if (cur >= size) {
            size += buf;
            word = realloc(word, sizeof(char) * size);

        }
        word[cur] = c;
        cur++;
        c = fgetc(fp);
    }
    if ((!isalpha(c)) || c == EOF) {
        ungetc(c, fp);          
    }
    return word; 
```

**编辑** @Mark Byers - 谢谢，但是 c 被拒绝是有目的的，并且不会在无限循环中一次又一次地满足条件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T20:09:49.130

`ungetc`将字符推送到流中，以便下一次读取将再次返回该字符。

```
ungetc(c, fp);  /* Push the character c onto the stream. */
/* ...etc... */
c = fgetc(fp);  /* Reads the same value again. */ 
```

如果您正在读取字符以了解当前令牌何时完成，但尚未准备好读取下一个令牌，这有时会很方便。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T20:11:33.350

终端条件，就在你不懂的那一行之前，不好。应该是：

```
int c;

...

if (!isalpha(c) && c != EOF)
    ungetc(c, fp); 
```

这意味着如果读取的最后一个字符是真实字符（不是 EOF）并且不是字母字符，则将其推回以供接下来使用输入流的任何内容进行重新处理`fp`。也就是说，假设您阅读了一个空白；空白将终止循环，空白将被推回，以便下一个`getc(fp)`将再次读取空白（就像文件流`fscanf()`上`fread()`的任何其他读取操作一样`fp`）。如果你得到的是 EOF 而不是空白，那么在我的修改后的代码中不会尝试推回 EOF；在原始代码中，EOF 将被推回。

请注意，`c`必须是 a`int`而不是 a `char`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T20:47:08.630

好的。现在我明白为什么这种情况与例如。`'\n'`困扰着我。我只是愚蠢，忘记了`main()`提到getword的部分。当然，在调用 getword 之前，有几个测试（另一个`ungetc`在那里）并且`fputs`字符不令人满意`isalnum` 从这个`while`循环中出现的循环`getword`总是以至少一个`isalnum`正数开始，然后结束时的检查仅针对后续字符。

# html - 无法摆脱顶部和底部的阴影

> ID：12166758
> 
> 赞同：0
> 
> 时间：2012-08-28T20:06:04.767
> 
> 标签：html, css, dropshadow, drop-shadow

为什么使用下面的代码，我仍然无法摆脱顶部和底部的阴影。虽然阴影“小”，但它们仍然存在。

```
div#inner_container {
 width: 960px;
 margin: 0 auto;
 background-color: rgb(255, 255, 255);
 box-shadow:0 9px 0 0 transparent,
            0 -9px 0 0 transparent,
            12px 0 15px -4px rgba(255, 255, 255, 0.5),
           -12px 0 15px -4px rgba(255, 255, 255, 0.5);
 position: relative;
 z-index: 5000;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T21:37:14.293

您可以添加顶部和底部阴影，这是将放置在出血阴影顶部的背景颜色：

```
box-shadow:
0 -5px 0px 0 black,
0 5px 0px 0 black,            
12px 0 15px -4px rgba(255, 255, 255, 0.5),
-12px 0 15px -4px rgba(255, 255, 255, 0.5); 
```

或者你可以使用`:before`，`:after`（[CSS 投影](http://nicolasgallagher.com/css-drop-shadows-without-images/demo/)）

两个例子：[http ://codepen.io/anon/pen/jEkwJ](http://codepen.io/anon/pen/jEkwJ)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T21:15:37.330

尝试这个：

```
box-shadow: 10px 0px 12px -5px #ffffff, -10px 0px 12px -5px #ffffff; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T21:27:24.590

不是顶部有阴影，而是您将点差设置得如此之高，以至于您可以看到它：

```
box-shadow: 0 0px 0px 0px transparent,
            0 0px 0px 0px transparent,
            12px 0 9px -10px rgba(255, 255, 255, 0.5),
            -12px 0 9px -10px rgba(255, 255, 255, 0.5) 
```

尝试这个。不过，我确信这可以进一步简化。它看起来不必要的复杂。

# php - 如何加快 php 备份脚本的速度？

> ID：12166759
> 
> 赞同：0
> 
> 时间：2012-08-28T20:06:05.717
> 
> 标签：php, mysql, optimization, backup, database-backups

我一直在 php 中使用 mysql db 备份脚本，备份需要 21 小时我的 dbs。我想通过 cli 和 cron 将它用作日常备份脚本，想知道你们是否可以看看它，看看是否有任何我可以优化它的方法。

```
<?

//Timer start
$time = microtime();
$time = explode(' ', $time);
$time = $time[1] + $time[0];
$start = $time;

ini_set('memory_limit','4000M');
//ini_set('max_execution_time', 300);

$host = "host";
$user = "user";
$pass = "pass";

$db = "tagdb";

$link = mysql_connect($host,$user,$pass);
$result = mysql_query("show databases like 'tag%'");  // we only want tagdb

while($row = mysql_fetch_row($result))
{
    $dbs[] = $row[0];
}

foreach($dbs as $db)
{
        if(strlen($db) == 10 || $db == "tagdb" || $db == "tagui")
        {
        echo $db."\n";
                backup_tables($host,$user,$pass,$db);
    }
}

//backup_tables($host,$username,$password,$db);

/* backup the db OR just a table */
function backup_tables($host,$user,$pass,$name,$tables = '*')
{

      $fname = 'db-backup-'.$name.'_'.time().'.sql'; 
      echo $fname."\n";
      $handle = fopen($fname,'w+');
      $return = '';
      fwrite($handle,$return);
      fclose($handle);

      $link = mysql_connect($host,$user,$pass);
      mysql_select_db($name,$link);

      //get all of the tables
      if($tables == '*')
{
    $tables = array();
    $result = mysql_query('SHOW TABLES');
    while($row = @mysql_fetch_row($result))
    {
        $tables[] = $row[0];
    }
}
else
{
    $tables = is_array($tables) ? $tables : explode(',',$tables);
}

foreach($tables as $table)
{
  $handle = fopen($fname,'a');
  fwrite( $handle, 'DROP TABLE IF EXISTS '.$table.';' );

  $row2 = mysql_fetch_row(mysql_query('SHOW CREATE TABLE '.$table));
  fwrite( $handle, "\n\n".$row2[1].";\n\n" );

  $offset = 10000;

  $start = 0;
  do {
      $result = mysql_query( "SELECT * FROM ".$table." LIMIT ".$start.", ".$offset."" );
      $start += $offset;

      $num_rows = mysql_num_rows( $result );
      if (false === $result) {
        //close original file
        fclose($handle);
        //open error file
        $errfn = $fname.'.ERROR';
        $errf = fopen($errfn,'a');
        $err = mysql_error();
        fwrite( $errf, $err );
        fclose($errf);
        //reopen original file
        $handle = fopen($fname,'a');
        //break loop
        $num_rows = 0;
      }

      while( $row = mysql_fetch_row( $result ) ) {
          $line = 'INSERT INTO '.$table.' VALUES(';
          foreach( $row as $value ) {
              $value = addslashes( $value );
              @$value = ereg_replace( "\n","\\n", $value );
              $line .= '"'.$value.'",';
          }
          $line = substr( $line, 0, -1 ); // cut the final ','
          $line .= ");\n";
          fwrite( $handle, $line );
      }
  } while( $num_rows !== 0 );
  }

  $return="\n\n\n";
  fwrite($handle,$return);
  fclose($handle);
}

//End timer and output time
$time = microtime();
$time = explode(' ', $time);
$time = $time[1] + $time[0];
$finish = $time;
$total_time = round(($finish - $start), 4);
echo "\n Page generated in ".$total_time." seconds. \n";
?> 
```

我正在考虑将备份拆分为并行进程，但我的数据库很大，我不确定 php 是否会因为之前的内存不足而耗尽内存。欢迎提出建议。

谢谢！

附言。我知道有更好的方法来进行备份，但是这个特定的脚本对我来说效果很好，因为我无法使用其他选项，例如 mysqldump。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-28T20:16:51.340

是的，您可以直接在 MySQL 中复制表

```
CREATE TABLE new_table LIKE old_table;
INSERT new_table SELECT * FROM old_table; 
```

它会更快，您还可以将表放在 2 个独立的数据库（NEW_DB 和 OLD_DB）上

```
CREATE TABLE NEW_DB.new_table LIKE OLD_DB.old_table;
INSERT NEW_DB.new_table SELECT * FROM OLD_DB.old_table; 
```

因此，您可以从 PHP 执行此操作，而无需将数据传输到 PHP，从而获得巨大的性能提升。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T20:20:06.637

如果您要备份数据库，请`mysqldump`按照 Dagon 所述使用。按计划从 cron 任务中调用它。然后，如果您需要回滚，您可以简单地找到适当的转储（存储在 .sql 文件中）并执行该文件。

```
mysqldump -u [username] -p[password] db_name > [timestamped_filename].sql 
```

[阅读本文了解更多信息](http://www.electrictoolbox.com/backing-up-mysql-with-mysqldump/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T21:43:07.907

> 正在使用 mysqldump，但意识到由于 myisam dbs 上的锁定而导致生产力下降，如果我只是删除锁定并在使用 dbs 时继续备份它们，则备份将无法使用。这就是为什么我需要类似 myisam dbs 的 hotcopy 备份

如果我错了，请纠正我，但你的脚本根本没有锁定。如果执行需要 21 小时，那么您必须*遇到*同步问题。

如果你不能使用`mysqldump`，我看到的唯一实用的解决方案是使用 MySQL 从站（参见：[http](http://www.redips.net/mysql/add-new-slave/) ://www.redips.net/mysql/add-new-slave/ - 第 1 点和第 2 点是你感兴趣的）和`mysqlhotcopy`：[http](http://dev.mysql.com/doc/refman/5.1/en/mysqlhotcopy.html) ://dev.mysql.com/doc/refman/5.1/en/mysqlhotcopy.html 。

第一个解决方案设置起来更复杂，但运行起来可能更干净、更简单（我认为也更快）。通过更多的设置，它可以兼作 SQL 服务器上的负载平衡。

# c# - 反映一个列表

> ID：12166767
> 
> 赞同：1
> 
> 时间：2012-08-28T20:07:00.793
> 
> 标签：c#, generics, reflection

我正在尝试制作模型反射工具。到目前为止，我已经走了很长一段路，但现在我被困住了。

我有这个

```
public static void RenderModelList(List<T> modelList)
{
   foreach (T model in modelList)
   {
      PropertyInfo[] properties = model.GetType().GetProperties();
      foreach (PropertyInfo property in properties)
      {
         object propValue = property.GetValue(model, null);
         //Check if the property is a collection and do recursion 
         if (propValue != null)
         {
            if (isCollection(propValue))
            {   
               //This only works for Lists of the same <T> 
               List<T> li = Convert.ChangeType(propValue, propValue.GetType()) as List<T>;
               if (li != null)
               {
                  if (li.Count > 0)
                  {
                     RenderModelList(li, loop);
                  }                                            
               }
               else
               {
                  //Its another type what to do?
                  // Create a List<> of unknown type??         
               }
            }
         }
      }
   }
} 
```

我的问题是，如果我通过这个方法 a`List<Persons>`并且 Person 有一个属性是 a `List<Cars>`- 我不能使用 Convert.ChangeType - 因为这不是 T。

那么如何循环通过“列表”并访问该对象的属性？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T20:09:48.443

在我看来，您的方法可以更松散地输入：

```
public static void RenderModelList(IEnumerable list)
{
    foreach (object model in list)
    {
        ...
    }
} 
```

然后你只需要转换为`IEnumerable`，而不是特定的序列或列表类型。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-28T20:10:23.283

好吧，你的方法不应该依赖`T`. 您可以`IEnumerable`改为使用（不是`IEnumerable<T>`，因为它再次取决于`T`）。请注意，每个`List<T>`implements `IEnumerable`，因此您的方法将与它们一起使用；但是，其他集合也经常实现`IEnumerable`。这可能是也可能不是您需要的。

如果您选择建议的方式，您的测试`isCollection`将是这样的：

```
IEnumerable propValueAsEnumerable = propValue as IEnumerable;
if (propValueAsEnumerable != null)
    RenderModelList(propValueAsEnumerable); 
```

我可能会将您的方法重构为类似的东西：

```
IEnumerable<object> GetPropertyValuesFlat(object o)
{
    return o.GetType()
            .GetProperties()
            .Select(pi => pi.GetValue(o, null))
            .Where(pv => pv != null)
            .SelectMany(pv => pv is IEnumerable<object> ?
                          (IEnumerable<object>)pv : new[] {pv});
}

//...
foreach (object p in GetPropertyValuesFlat(o))
    render(p); 
```

（注意：未经测试）

编辑：好吧，因为`SelectMany`不理解 non-generic 所以不能工作`IEnumerable`。将其更改为与`IEnumerable<object>`. 至少，每个`IEnumerable<T>`都是`IEnumerable<object>`T 类。

# java - 实体与模型

> ID：12166771
> 
> 赞同：2
> 
> 时间：2012-08-28T20:07:28.843
> 
> 标签：java, model-view-controller, model, entity

我正在整理我的 com.business.model 包中的一些类，并意识到它们中的每一个都直接注释 @Entity 或附加到一个（我正在使用 Morphia）。我突然想到这些类实际上应该放在一个 com.business.entity 包中......

如果这更准确（是吗？）我是否应该将我的业务逻辑类放入 com.business.model 并从我的 jax-rs 和 jax-ws 类中调用它们？

目前我所有的业务逻辑类都在 com.business 包中，感觉是一个相当匿名的地方。也许他们实际上是模型..？

（请注意，这个项目（还）没有人类可以与之交互的浏览器界面，所以提到 MVC 有点为时过早。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T21:13:33.200

我喜欢以这种形式查看服务器架构：

```
client <-> service layer <-> business rules <-> persistence 
```

因此，所有与服务相关的类（servlet、Web 服务、入口点等）都放在一个包“服务”中。所有的业务规则，服务器背后的智能，都停留在“规则”或“业务”上。所有与数据库相关的类，如实体和 DAO，都进入“持久性”包。

所有这三个不仅可以用于不同的包，还可以用于不同的模块（在 maven 中）甚至不同的项目。这只是你喜欢如何工作的问题。

# scripting - VBS 脚本 - 一直执行到（成功 = 真或失败 = 真）

> ID：12166776
> 
> 赞同：0
> 
> 时间：2012-08-28T20:07:36.370
> 
> 标签：scripting, vbscript, clickonce

我正在尝试使用 VBS 脚本以编程方式卸载 ClickOnce 应用程序。它工作得很好。但如果卸载失败，我希望它发送响应“应用程序已被删除”。

以下是我到目前为止所拥有的，并且在大多数情况下都有效。有时延迟不够长，或者另一个窗口窃取了焦点，并且 sendkeys 的“OK”没有到达窗口。

--- 完整的源代码 ---

```
On Error Resume Next
Set objShell = WScript.CreateObject("WScript.Shell")
objShell.Run "taskkill /f /im TEST.App.UI.exe*"
objShell.Run "rundll32.exe dfshim.dll,ShArpMaintain test.app.ui.application, Culture=neutral, PublicKeyToken=f77d770cef, processorArchitecture=msil"

Do Until Success = True
Success = objShell.AppActivate("Test App")
Wscript.Sleep 500
Loop
objShell.SendKeys "OK"

'Commented out on purpose
'install new
'objShell.Run "" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T22:23:53.867

在处理逻辑控制流问题时，最好从故事/描述开始：

> 我想开始卸载过程并等待它以成功或失败终止（通过打开具有适当标题的窗口来表示）

永远不要在条件下对真/假进行比较；那只是容易出错的脂肪。

不要依赖 VBscript 的智能来转换非布尔值；在条件句中使用适当（子）类型的变量/表达式。

请记住，VBScript 不会简化条件的计算：

```
If This() Or That() Then 
```

将调用这两个函数，即使 This 返回 True（因此整个子句必须为 True）。所以不要试图这样做：

```
... Until (objShell.AppActivate("Uninstall - Success") Or _
           objShell.AppActivate("Uninstall - Failure")) 
```

在设计循环时，考虑何时应该进行离开检查；如果你想从一个可能为空的文件中读取，尽早检查是有意义的：

```
Do Until tsIn.AtEndOfStream
   sLine = tsIn.ReadLine()
   ...
Loop 
```

但是如果你想从用户那里得到有效的输入，你必须先询问才能检查：

```
Do
   sInp = ...
Loop While isBad(sInp) 
```

.AppActivate 和 .SendKeys 是每个程序员的敌人；推迟与他们的斗争，直到你解决了控制流问题。

在代码中：

```
 '          Wait   Wait   Fail    Success
  '  , Array(False, False,  True , True ) _ shouldn't happen, but will terminate too
  Dim aHappenings : aHappenings = Array( _
       Array(False, False,  False, True ) _
     , Array(False, False,  True , False) _
  )
  Dim aTest
  For Each aTest In aHappenings
      WScript.Echo Join(aTest)
      Dim bOk   : bOk   = False
      Dim bFail : bFail = False
      Dim i     : i     = 0
      Do
         bOk   = aTest(i + 0)
         bFail = aTest(i + 1)
         WScript.Echo Join(Array(" ", i, bOk, bFail))
         i     = i + 2
      Loop Until bOk Or bFail
      WScript.Echo "Done."
      WScript.Echo
  Next 
```

输出：

```
False False False True
  0 False False
  2 False True
Done

False False True False
  0 False False
  2 True False
Done. 
```

您可能会利用这样一个事实，即成功或失败（不是两者）都会发生：

```
Dim i : i = 0
Dim bDone
Do
   bDone = aTest(i + 0)
   If Not bDone Then
      bDone = aTest(i + 1)
   End If
   WScript.Echo Join(Array(" ", i, bDone))
   i = i + 2
Loop Until bDone 
```

# php - codigniter 如何从数据库值中创建一个下拉表

> ID：12166777
> 
> 赞同：0
> 
> 时间：2012-08-28T20:07:36.887
> 
> 标签：php, database, drop-down-menu

我需要在 Codigniter 中创建一个下拉菜单，这些值将从数据库表中提取。数据包含一组电影，我需要能够将数据填充到菜单中。

我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T20:17:18.587

根据 Codeigniter 文档

看到这个网址

[Code Igniter - form_dropdown 从数据库中选择正确的值](https://stackoverflow.com/questions/4331078/code-igniter-form-dropdown-selecting-correct-value-from-the-database)

[Codeigniter form_helper 将数据库行作为选择菜单中的值](https://stackoverflow.com/questions/1901703/codeigniter-form-helper-getting-database-rows-to-be-values-in-select-menu)

第一个参数将包含字段的名称，第二个参数将包含一个关联的选项数组，第三个参数将包含您希望选择的值。您还可以通过第三个参数传递多个项目的数组，CodeIgniter 将为您创建一个多选。

您的管理控制器应该有类似的东西

```
$data['selected'] = $this->salary_expectation->get_salary_selected(); 
```

据此，管理视图应该是这样的

```
<?php echo form_dropdown('salaries', $salaries, $selected_value);  ?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T20:12:50.510

只需遍历您的数据并创建一个选择列表

```
<select name="movie_id">
  <?php foreach ($rows as $row): ?>
    <option value="<?= $row['id']; ?>"><?= $row['name']; ?></option>
  <?php endforeach; ?>
</select> 
```

根据您的表架构，这显然会有所不同

# http - JIRA：有没有办法强制使用独立（tomcat）jira 进行 HTTP 基本身份验证？

> ID：12166780
> 
> 赞同：2
> 
> 时间：2012-08-28T20:07:40.257
> 
> 标签：http, authentication, tomcat, jira, basic-authentication

我们在独立变体（嵌入式 tomcat）中运行 Jira 5.x。我们希望阻止任何没有有效 http 基本标头的请求到达 Jira 应用程序。或者，换句话说，强制 JIRA 使用 HTTP Basic 身份验证。是的，我知道在没有 tls 的情况下通过网络传输 http 基本凭据是不安全的，但是我们没有 SSL 证书，所以没关系（它不会比实际情况更糟）。

我读到 Jira 处理 HTTP 基本身份验证标头（如果它获取它们），并且附加`?os_authType=basic`到 URL 使 Jira 行为如我们所愿，但我们希望 Jira 强制执行 HTTP Basic。我们不在乎我们是否在 tomcat 中静态配置了某种“甚至在 jira 之前”登录，只要没有它就无法从外部访问 jira 应用程序。

有没有办法做到这一点？

我尝试添加：

```
<login-config>
  <auth-method>BASIC</auth-method>
</login-config> 
```

到 jira 的 web.xml 但这没有帮助。

# apache - Mapping Thin - 带有 apache httpd 的 Sinatra 应用程序

> ID：12166781
> 
> 赞同：0
> 
> 时间：2012-08-28T20:07:46.927
> 
> 标签：apache, sinatra, thin

最近我开发了一个在 Thin 下运行的 Sinatra 应用程序。在我的本地和测试服务器上它运行正常，但是当我将它添加到我的生产环境时，公共目录中的所有资源都无法访问。

我不是 apache 人，所以我在这里有点迷路。

这是我所做的：

*httpd.conf*

```
...
ProxyPass /myapp/ http://127.0.0.1:9194/myapp
ProxyPassReverse /myapp/ http://127.0.0.1:9194/myapp 
```

通过这样做，我希望对 mydomain.com/myapp/ 的每个请求都转发到 myapp。在我的应用程序目录中有一个公共目录，其中包含我所有的 css、js 和图像文件。

因此，当我指向[http://mydomain.com/myapp/](http://mydomain.com/myapp/)时，会出现 html，但没有 css、图像和 js。另一方面，如果我在端口 9194 指向 127.0.0.1，它会正常工作。

所以我的问题是，我如何配置我的 apache - 或 Thin 或 sinatra - 以便我可以通过 ProxyPass 访问我的公共内容？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T05:42:42.103

`/`在 ProxyPassReverse 的第二个参数末尾添加一个。[Apache 文档](http://httpd.apache.org/docs/2.2/mod/mod_proxy.html#proxypass)说，如果第一个参数有一个斜杠，那么第二个参数也应该有一个。

# ruby-on-rails-3 - 如何使用 Twitter Bootstrap 实现响应式 Youtube 嵌入 iframe？

> ID：12166784
> 
> 赞同：29
> 
> 时间：2012-08-28T20:08:03.560
> 
> 标签：ruby-on-rails-3, twitter-bootstrap, youtube-api, responsive-design

目前，我正在基于 Twitter Bootstrap 的站点中嵌入具有以下 HAML 代码的 Youtube 视频：

```
.row
  .span12
    %iframe.span11{ :height => "720", :frameborder => "0", :allowfullscreen => nil, :src => v.video_url } 
```

不幸的是，由于静态高度，这在调整浏览器大小或在移动设备上时响应不佳。

为 Youtube 实现这个嵌入式 iframe 的更好（更动态和响应更快）的方法是什么？

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2012-09-02T11:35:24.687

试试这个“响应式视频 CSS”，它非常适合我：[https ://gist.github.com/2302238](https://gist.github.com/2302238)

```
<section class="row">
  <div class="span6">
    <div class="flex-video widescreen"><iframe src="https://www.youtube-nocookie.com/embed/..." frameborder="0" allowfullscreen=""></iframe></div>
  </div>
  <div class="span6">
    ...
  </div>
</section> 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-05-25T21:02:41.700

我实现了一个非常好的纯 CSS 解决方案。

这是我认为使用 YouTube 中生成的 iframe 代码的代码示例。

```
<div class="video-container">
  <iframe width="300" height="168" src="http://www.youtube.com/embed/MY__5O1i2a0" frameborder="0" allowfullscreen></iframe>
</div> 
```

这是另一个视图中的代码示例，我没有使用 iframe，而是使用了从 AutoHtml gem 生成的 body 字段，该字段用于将不同类型的视频链接嵌入到网页中。如果您有一个需要将链接动态嵌入到同一网页中的模型，这很好。

```
<div class="video-container">         
  <span style="text-align: center;"><%= @livevideo.body_html %></span>
</div> 
```

这是CSS代码：

```
.video-container { 
   position: relative; /* keeps the aspect ratio */ 
   padding-bottom: 56.25%; /* fine tunes the video positioning */ 
   padding-top: 60px; overflow: hidden;
}

.video-container iframe,
.video-container object,
.video-container embed { position: absolute; top: 0; left: 0; width: 100%; height: 100%; } 
```

这是 YouTube 视频，它非常详细地解释了代码的工作原理，并提供一两篇博客文章供您查看。

[http://www.youtube.com/watch?v=PL_R3zEjqEc](http://www.youtube.com/watch?v=PL_R3zEjqEc)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-09-11T15:18:27.477

Bootstrap 3.2.0 进行了多项改进和大量错误修复。用于构建具有响应式设计的网站的框架，Bootstrap 缺少对响应式和元素的支持，在这个最新版本中添加了功能。

响应式 YouTube 16:9 视频的 HTML 根据显示的页面宽度调整其大小，如下所示：

```
在您的容器（可能是 DIV）上添加 class="embed-responsive embed-responsive-16by9"

```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-28T21:01:48.837

这可能最好使用 jQuery：[http](http://www.seanmccambridge.com/tubular/) ://www.seanmccambridge.com/tubular/或[http://okfoc.us/okvideo/](http://okfoc.us/okvideo/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-12-14T16:03:12.707

只是为了自动化[@Bart 的回答](https://stackoverflow.com/a/12235638/955619)，我创建了一个简单的 Javascript 片段，它自动将`iframe`元素包装在`<div class="flex-video">`

```
$(document).ready(function() {
  $('iframe').each(function() {
    $(this).wrap('<div class="flex-video"></div>');
  });
}); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-08-03T11:54:45.330

如果使用引导程序，下面的方法无疑是实现响应式嵌入的最简单方法：

```
<!-- 16:9 aspect ratio -->
 <div class="embed-responsive embed-responsive-16by9">
   <iframe class="embed-responsive-item" src="..."></iframe>
 </div>

<!-- 4:3 aspect ratio -->
<div class="embed-responsive embed-responsive-4by3">
  <iframe class="embed-responsive-item" src="..."></iframe>
</div> 
```

可以在此处找到文档：http: [//getbootstrap.com/components/#responsive-embed](http://getbootstrap.com/components/#responsive-embed)。

# c# - Lambda 表达式 > 和方法信息

> ID：12166785
> 
> 赞同：8
> 
> 时间：2012-08-28T20:08:06.493
> 
> 标签：c#, reflection, lambda, visual-studio-2012, methodinfo

在将项目从 VS2010 迁移到 VS2012 时，我遇到了以下问题。该项目大量使用反射，为了从接口获取 MethodInfo，放置了以下代码：

```
Expression<Func<ITest, Func<ServiceRequest, ServiceResponse>>> expression = scv => scv.Get;

UnaryExpression unaryExpression = expression.Body as UnaryExpression;

MethodCallExpression methodCallExpression = unaryExpression.Operand as MethodCallExpression;

ConstantExpression constantExpression = methodCallExpression.Arguments[2] as ConstantExpression;

MethodInfo myMethod = constantExpression.Value as MethodInfo; 
```

使用 VS2010 编译时效果很好，但如果代码使用 VS2012 编译，目标是 .Net 4.0，则 methodCallExpression.Arguments.Count() 为 2。

反编译后，我注意到编译器为同一个表达式生成了不同的代码。

这是一个设计问题，因为设计不应该像 methodCallExpression.Arguments[2] 上的数字 2 那样依赖“幻数”。我尝试使用以下方法找到解决方案：

```
MethodCallExpression outermostExpression = expression .Body as MethodCallExpression;
MethodInfo myMethod = outermostExpression.Method; 
```

但 outermostExpression 为空。

最后，我让它改变表达式如下：

```
Expression<Func<ITest, ServiceResponse>> expression = scv => scv.Get(default(ServiceRequest));
MethodCallExpression outermostExpression = expression.Body as MethodCallExpression;
Assert.AreEqual("Get", outermostExpression.Method.Name); 
```

它并不理想，但它适用于 VS2010 和 VS2012。

有没有办法从如下表达式中找到 MethodInfo：

```
Expression<Func<ITest, ServiceResponse>> expression = scv => scv.Get(default(ServiceRequest));
MethodInfo methodInfo = GetInnerMethodInfo( expression );
Assert.AreEqual("Get", methodInfo.Name); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T21:34:04.067

我不确定为什么表达式的编译方式会有所不同。但是，如果您要在常量委托中查找方法的方法信息，您可以使用`ITest`实现编译表达式以获取委托`MethodInfo`。例如：

```
Expression<Func<ITest, Func<ServiceRequest, ServiceResponse>>> expression = scv => new Func<ServiceRequest, ServiceResponse>(scv.Get);
Func<ServiceRequest, ServiceResponse> ret = expression.Compile()(new Test());
MethodInfo methodInfo = ret.Method; 
```

..哪里`Test`是一些类和实现`ITest`。在 2012 年和 2010 年都有效。

我不确定如何在不先编译的情况下从 2012 年的表达式中获取该方法信息...

### 更新：

如果编译表达式不是一个选项，则编译器似乎正在生成一个不同的表达式并将其放入C# 5 编译器`MethodInfo`的属性中。`MethodCallExpression.Object`您可以检查该属性是否不是`null`并将其值用于`MethodInfo`，或继续获取`Arguments`集合中的元素。例如：

```
Expression<Func<ITest, Func<ServiceRequest, ServiceResponse>>> expression = 
    scv => new Func<ServiceRequest, ServiceResponse>(scv.Get);

UnaryExpression unaryExpression = expression.Body as UnaryExpression;

MethodCallExpression methodCallExpression = 
    unaryExpression.Operand as MethodCallExpression;

ConstantExpression constantExpression = 
    methodCallExpression.Object as ConstantExpression;

MethodInfo methodInfo;
if (constantExpression != null)
{
    methodInfo = constantExpression.Value as MethodInfo;
}
else
{
    constantExpression = methodCallExpression.Arguments
                            .Single(a => a.Type == typeof(MethodInfo) 
                                && a.NodeType == ExpressionType.Constant) as
                            ConstantExpression;
    methodInfo = constantExpression.Value as MethodInfo;
} 
```

我正在使用 LINQ 查询来获取`Arguments`集合中的元素，如果您更喜欢硬编码索引，则可以使用它来代替。更完整的错误检查也是必要的。

# controller - 带有控制器的多个 FXML，共享对象

> ID：12166786
> 
> 赞同：29
> 
> 时间：2012-08-28T20:08:17.427
> 
> 标签：controller, javafx-2, fxml, javafx-8

各位晚上好，

我已经找到了很多关于这个主题的帖子，但我仍然无法将对象从 Controller1 传递到 Controller2。是否有完整的教程或一些示例项目可以做到这一点？

我已经走了这么远，直到我卡住了：

**国家级**

```
public class Country {
private SimpleStringProperty country = new SimpleStringProperty("");

//Constructor
public Country() {
}

//GETTERS
public String getCountry() {
    return country.get();
}

//SETTERS
public void setCountry(String value) {
    country.set(value);
}

@Override
public String toString() {
    return getCountry();
}
} 
```

当程序启动时，主 FXML 被加载（Sample.fxml）。这包含一个边框窗格，顶部面板中有一个菜单栏，中间有一个内容窗格。在初始化时，我创建一个新的 Country 对象并将其存储在一个全局变量中。我有一个方法可以在单击菜单项时将另一个 FXML 加载到内容窗格中：

**SampleController.java**

```
public class SampleController implements Initializable {

@FXML
private Pane pContent;

private Country c;

@FXML
private void handleButtonAction(ActionEvent event) throws IOException {
    System.out.println(c); //this prints Belgium, which is correct

    URL url = getClass().getResource("Sub1.fxml");

    FXMLLoader fxmlloader = new FXMLLoader();
    fxmlloader.setLocation(url);
    fxmlloader.setBuilderFactory(new JavaFXBuilderFactory());

    pContent.getChildren().clear();
    pContent.getChildren().add((Node) fxmlloader.load(url.openStream()));
}

@Override
public void initialize(URL url, ResourceBundle rb) {
    c = new Country();
    c.setCountry("Belgium");
}

public Country getCountryFromSampleController(){
    return c;
}
} 
```

现在我希望在加载 Sub1.fxml 时捕获 Country 对象，这意味着我需要在 initialize() 上获取 country 对象：

**Sub1Controller.java**

```
public class Sub1Controller implements Initializable {

/**
 * Initializes the controller class.
 */
@Override
public void initialize(URL url, ResourceBundle rb) {
    SampleController sp = new SampleController(); //I don't know how to fetch the original SampleController object
    System.out.println(sp.getCountryFromSampleController()); 
    //this prints null, which is ofcourse logical because I make a new SampleController object.         
}    
} 
```

我的问题是，如何获取“原始”SampleController 对象，以便可以使用 getCountryFromRoot() 方法获取值为比利时的 Country 对象？我已经在这个问题上搜索了几个小时，并阅读了 StackOverflow 上关于这个的每一篇文章，但似乎我没有找到丢失的链接......任何帮助（最好是使用此代码）表示赞赏！

抱歉，这篇文章很长，我试图尽可能完整，否则我永远不会明白......

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-08-28T21:41:40.877

FXML 是[MVC 模式](http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller)的一种简单形式。FXML 文件是视图，Controller 很明显，漏掉了什么？模型——存储与当前视图相关的所有数据的地方，因此，您可以使用它在控制器之间共享国家/地区数据。

* * *

**1.**引入模型的一种可能方法是“上下文”。让我们考虑一个案例，那么整个项目只有一个模型，因此您可以拥有[Singleton形式的全局上下文](http://en.wikipedia.org/wiki/Singleton_pattern)

```
public class Context {
    private final static Context instance = new Context();

    public static Context getInstance() {
        return instance;
    }

    private Country country = new Country();

    public Country currentCountry() {
        return country;
    }
} 
```

您的 SampleController 将有以下更改：

```
@Override
public void initialize(URL url, ResourceBundle rb) {
    Context.getInstance().currentCountry().setCountry("Belgium");
} 
```

并且`SubController1`可以以相同的方式访问它：

```
@Override
public void initialize(URL url, ResourceBundle rb) {
    System.out.println(Context.getInstance().currentCountry().getCountry());
} 
```

* * *

**2.**另一种方法是将上下文传递给`SubController1`然后加载它的xml。如果您不想拥有应用程序全局模型，它会更好地工作。因此，创建类似的 Context 类但没有实例字段，并且：

```
public class Sub1Controller implements Initializable {
    private Context context;
    public void setContext(Context context) {
        this.context = context;
        // initialize country dependent data here rather then in initialize()
    }
} 
```

在中设置上下文`SampleController`：

```
Context currentContext = new Context();

@Override
public void initialize(URL url, ResourceBundle rb) {
    currentContext.currentCountry().setCountry("Belgium");
}

@FXML
private void handleButtonAction(ActionEvent event) throws IOException {
    URL url = getClass().getResource("Sub1.fxml");

    FXMLLoader fxmlloader = new FXMLLoader();
    fxmlloader.setLocation(url);
    fxmlloader.setBuilderFactory(new JavaFXBuilderFactory());

    pContent.getChildren().clear();
    pContent.getChildren().add((Node) fxmlloader.load(url.openStream()));
            // here we go
    ((Sub1Controller)fxmlloader.getController()).setContext(currentContext);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-03-27T18:29:19.340

通过使用 DataFX 的 Flow API，您可以使用 CDI 在控制器实例中注入数据：

*   [http://www.guigarage.com/2014/03/datafx-8-nighthacking/](http://www.guigarage.com/2014/03/datafx-8-nighthacking/)
*   [http://www.guigarage.com/2013/12/datafx-controller-framework-preview/](http://www.guigarage.com/2013/12/datafx-controller-framework-preview/)
*   [http://www.javafxdata.org](http://www.javafxdata.org)

# objective-c - 使用 NSOpenpanel 和 NSfilemanager 查找目录的内容

> ID：12166788
> 
> 赞同：2
> 
> 时间：2012-08-28T20:08:26.183
> 
> 标签：objective-c

我是objective-c的新手，所以请原谅我缺乏知识。我在这里有一段代码，我似乎无法正常工作。我想做的是在单击按钮时显示一个目录选择面板。一旦用户选择了一个目录，我想在目录中创建一个包含所有内容的数组。最终，我想使用该数组将子目录和文件列表（用户选择的目录中的所有内容）复制到另一个位置。

我有一条警告说找不到实例方法'-contentsofdirectoryaturl:options:error'（返回类型默认为id）。我不确定这意味着什么或如何解决它，我怀疑这是我的问题。提供的任何建议都会很棒。谢谢！

```
- (IBAction)selectfiles:(id)sender {

NSOpenPanel *openPanel = [NSOpenPanel openPanel];

[openPanel setCanChooseDirectories:YES];
[openPanel setCanChooseFiles:NO];
[openPanel setAllowsMultipleSelection:NO];

if ( [openPanel runModal] == NSOKButton ) {

    NSArray *accountPath = [openPanel URLs];
    NSLog (@"%@", accountPath);

    NSFileManager *filemgr;
    filemgr = [NSFileManager defaultManager];

    NSArray *contents;
    contents = [filemgr contentsOfDirectoryAtURL:accountPath options:(NSDirectoryEnumerationSkipsHiddenFiles) error:nil];

    } 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T20:32:44.753

`contentsOfDirectoryAtURL:``includingPropertiesForKeys:`有一个您已省略的附加参数。这就是编译器警告您的原因。该参数是您要预取的属性列表。在最简单的情况下，您可以指定一个空数组。

另一个错误是`[openPanel URLs]`返回一个URL*数组*，即使只选择了一个项目。

所以你的代码应该是这样的：

```
NSURL *accountPath = [[openPanel URLs] objectAtIndex:0];
NSLog (@"%@", accountPath);

NSFileManager *filemgr;
filemgr = [NSFileManager defaultManager];

NSArray *contents;
contents = [filemgr contentsOfDirectoryAtURL:accountPath
    includingPropertiesForKeys:[NSArray array]
    options:(NSDirectoryEnumerationSkipsHiddenFiles)
    error:nil]; 
```

# java - Android停止正在执行单个库函数的线程

> ID：12166790
> 
> 赞同：2
> 
> 时间：2012-08-28T20:08:31.610
> 
> 标签：java, android, multithreading

我有一个应用程序，它使用单独的线程来执行在单独库中的代码中执行的计算。我希望用户能够取消此操作，因为根据参数，它可能需要很长时间。

我不能使用停止变量或检查中断，因为从应用程序的角度来看，计算是单行的

```
public void run() {
    result = library.performCalculation(params);
} 
```

我希望能够使用`thread.stop()`，但据我所知，这在 android 上是不可行的。

无论如何我可以导致线程停止运行吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T20:13:24.380

你是对的，`Thread.stop()`在 Android 上不可用（甚至在仍然支持它的系统上，它的问题超过了它的用处）。

你能做的有两方面。首先，调用`thread.interrupt()`以在运行库的线程上设置中断标志。其次，在适当的时候修改你的库以调用`isInterrupted()`以确定它是否被中断，如果是，它应该自愿清理并离开。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T20:12:19.577

可以取消 AsyncTask。将其放入 AsyncTask 并调用

```
 AsyncTask.cancel(true); 
```

# php - PostGIS - 将结果限制在地图的视口中

> ID：12166791
> 
> 赞同：0
> 
> 时间：2012-08-28T20:08:32.583
> 
> 标签：php, openlayers, kml, postgis

我已将几个 shp 文件导入 PostGIS/PostgreSQL DB。现在我想使用 OpenLayers 在 OSM 地图上显示相同的内容。由于所选县有数百万条记录，我只想获取浏览器中地图视口内的那些几何图形。

另外，我应该如何将这些数据提取到地图中？KML 是一个不错的选择吗？我在后端使用 PHP，想知道是否可以使用它而不是安装地理服务器。

我试图在网上找到一个例子，但找不到任何例子。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T07:22:43.590

查看[BBOX 策略](http://dev.openlayers.org/apidocs/files/OpenLayers/Strategy/BBOX-js.html)以在边界框中获取内容。然后查看[向量层](http://dev.openlayers.org/apidocs/files/OpenLayers/Layer/Vector-js.html)以将它们显示在地图上。我现在没有一个例子，但如果我找到一个，我会完成我的答案。

如果您想保持简单，可以使用 PHP 来处理答案。只需使用 PHP 页面作为图层的数据源，使用 BBOX 策略，您将始终获得有关边界框的信息，并且 PHP 页面可以获得正确的功能。

# wcf - 将标志添加到枚举后：Wcf 错误：错误 5 自定义工具错误：无法为服务引用“MyService”生成代码

> ID：12166794
> 
> 赞同：0
> 
> 时间：2012-08-28T20:08:42.313
> 
> 标签：wcf, enums, datacontract, flags

在我的 WCF 服务上，我只是从以下位置更改了一个枚举：

```
 /// <summary>
/// The DocumentState enum.
/// </summary>
[DataContract]
public enum DocumentState
{
    /// <summary>
    /// Undefined.
    /// </summary>
    [EnumMember]
    Undefined,

    /// <summary>
    /// OK.
    /// </summary>
    [EnumMember]
    Ok
} 
```

至：

```
 /// <summary>
/// The DocumentState enum.
/// </summary>
[DataContract]
[Flags]
public enum DocumentState
{
    /// <summary>
    /// Undefined.
    /// </summary>
    [EnumMember]
    Undefined = 0,

    /// <summary>
    /// OK.
    /// </summary>
    [EnumMember]
    Ok = 1
} 
```

在客户端，我更新 WCF 引用没有任何问题，但重建后我得到：

错误 5 自定义工具错误：无法为服务引用“MyService”生成代码。请查看其他错误和警告消息以获取详细信息

这个标志枚举有什么问题？

**更新：**

好的..在警告中我发现了这个，但这并没有真正帮助我：

警告 1 自定义工具警告：无法导入 wsdl：portType 详细信息：运行 WSDL 导入扩展时引发异常：System.ServiceModel.Description.DataContractSerializerMessageContractImporter 错误：引用类型“TestSolution.Test.Entities.Documents.Document，TestSolution.Test。实体，版本 = 1.1.78.7965，文化 = 中性，PublicKeyToken = 7ad0fddf5c57b9b3'，命名空间“http://schemas.datacontract.org/2004/07/TestSolution.Test.Entities.Documents”中的数据合同名称“文档”不能使用，因为它与导入的 DataContract 不匹配。需要从引用类型中排除此类型。

错误源的 XPath：//wsdl:definitions[@targetNamespace='http://tempuri.org/']/wsdl:portType[@name='IDocumentService'] c:\TFS1\TestSolution - Test\Test\Test。 Core\Service References\DocumentService\Reference.svcmap 1 1 Test.Core 警告 2 自定义工具警告：无法导入 wsdl:binding 详细信息：导入 wsdl:binding 所依赖的 wsdl:portType 时出错。

wsdl:portType 的 XPath：//wsdl:definitions[@targetNamespace='http://tempuri.org/']/wsdl:portType[@name='IDocumentService'] 错误源的 XPath：//wsdl:definitions[@ targetNamespace='http://tempuri.org/']/wsdl:binding[@name='NetTcpEndpoint'] c:\TFS1\TestSolution - Test\Test\Test.Core\Service References\DocumentService\Reference.svcmap 1 1 Test.Core 警告 3 自定义工具警告：无法导入 wsdl:port

详细信息：导入 wsdl:port 所依赖的 wsdl:binding 时出错。wsdl:binding 的 XPath: //wsdl:definitions[@targetNamespace='http://tempuri.org/']/wsdl:binding[@name='NetTcpEndpoint'] 错误源的 XPath: //wsdl:definitions[@ targetNamespace='http://tempuri.org/']/wsdl:service[@name='DocumentService']/wsdl:port[@name='NetTcpEndpoint'] c:\TFS1\TestSolution - Test\Test\Test。 Core\Service References\DocumentService\Reference.svcmap 1 1 Test.Core 错误 4 自定义工具错误：无法为服务引用“DocumentService”生成代码。有关详细信息，请查看其他错误和警告消息。c:\TFS1\TestSolution - Test\Test\Test.Core\Service References\DocumentService\Reference.svcmap 1 1 Test.Core

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T20:32:43.503

添加`Flag`属性时，您更改了 Enum 的存储方式，并使该类型的变量能够保存多个值。此[MSDN 帖子](http://msdn.microsoft.com/en-us/library/aa347875%28v=vs.100%29.aspx)解释了有关 WCF 如何处理此问题的详细信息。除非您实际上打算将该 Enum 用作标志字段，否则我会摆脱它，因为它不必要地使 Enum 含义复杂化。

# php - 博客页面 - 在页面顶部显示最新帖子

> ID：12166800
> 
> 赞同：0
> 
> 时间：2012-08-28T20:09:26.447
> 
> 标签：php, blogs

我需要做什么才能让我的最新帖子自动进入页面顶部？现在最新的帖子排在之前帖子的底部。

php:

```
<div id="container">
    <div id="blog">
        <div class="grid_9 float-left">
            <?php foreach($posts->results as $post): ?>
            <div class="post box_shadow">
                <h2><a href="<?php echo URL::to('uutiset/post/'.$post->id.'/'.\Laravel\URL::slug($post->title)) ?>"><?php echo $post->title ?></a></h2>
                <small><?php echo date('d-m-Y',strtotime($post->date)) ?></small>
                <p><?php echo Str::limit_word($post->content, 40); ?></p>
                <a href="<?php echo URL::to('uutiset/post/'.$post->id.'/'.\Laravel\URL::slug($post->title)) ?>"><?php echo Lang::line('home.blog_read_more', array(), $lang)->get() ?></a>
            </div>
            <?php endforeach ?>
            <?php echo $posts->links()?>
        </div>
    </div>
    <div id="footer" class=" box-shadow">
        <?php echo stripcslashes($setting->footer)?>
    </div>
</div> 
```

我还是新手，所以你能建议我需要修改或添加哪一行以及在哪里吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T20:15:47.367

如果它与您所寻找的完全相反，请尝试在循环之前对其运行[array_reverse 。](http://php.net/manual/en/function.array-reverse.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T20:11:25.183

这就是您的数组的排序方式。选项：[反转数组](http://php.net/manual/en/function.array-reverse.php)或从最后一个索引到 0 开始执行 for 循环。

类似于以下内容：

```
`$posts->results` has all of your posts

Replace the foreach with a for.

$count = count($posts->results);
for($i = $count-1; $i <= 0; $i--) {
    $post = $posts->results[$i];
    //display post
} 
```

最简单但可能效率较低的方法是在 foreach 循环之前反转数组。

# backbone.js - Backbone JS：带有空参数的路由

> ID：12166807
> 
> 赞同：0
> 
> 时间：2012-08-28T20:09:51.947
> 
> 标签：backbone.js, backbone-events, backbone-views, backbone-relational, backbone-routing

我有一条路线。

```
routes: {
      "example/=q:query": "example_main"
} 
```

这个：

```
localhost/site/#example/q=hello 
```

完美运行，但如果 URL 是：

```
localhost/site/#example/q= 
```

我的路由器不理解它并且不执行任何操作。有谁知道如何解决这一问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T20:16:04.833

```
routes: {
      "example/q=*query": "example_main"
} 
```

# mercurial - Mercurial 工作流程：为什么我似乎将所有内容都提交了两次？

> ID：12166812
> 
> 赞同：2
> 
> 时间：2012-08-28T20:10:26.367
> 
> 标签：mercurial, merge, workflow, commit

我正在尝试掌握 Mercurial 的基础知识，所以请多多包涵。:) 我目前的工作流程如下：

*   做一些工作，直到我准备好提交或需要其他人的更改
*   拉
*   在这一点上，我想将我的工作与最新的变更集合并并提交，但是 Mercurial 坚持让我在合并之前提交
*   所以它就像“提交，合并，提交”，我基本上提交**了两次**，在两个变更集中编写相同的注释并一次推送两个变更集

是这样的吗？每次合并是否可能只有一个变更集来自我？真的可取吗？

我已经阅读了很多在线手册，但仍然觉得我对这个过程没有深入的了解。欢迎所有评论。谢谢！

**编辑：**原来我不知道更新可以将传入的更改与未提交的编辑合并。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T20:55:08.887

合并总是在 Mercurial 中创建一个单独的变更集。

另外，只要您在本地存储库中有未提交的内容，就不可能进行合并。
所以解决方案是先commit，然后再pull和merge。
这将始终导致**两个**变更集，而不是一个。
*（...因为合并总是创建一个单独的变更集）*

但是你不会两次提交相同的东西，尤其是你不应该两次写相同的提交信息：

第一次提交是您实际更改的内容（“修复了 foo bar 中的错误”）。
第二次提交只是合并（TortoiseHG 实际上用“Merge”预先填充了提交消息，99% 的时间我只是这样离开它）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T01:20:50.770

此工作流程将阻止历史记录中的合并，但您仍会执行如下所述的合并：

*   做一些工作，直到您准备好提交或需要其他人的更改。
*   `hg pull`
*   `hg update`（注意：`hg pull -u`在一个步骤中执行此操作和上一个操作。

在 期间`hg update`，您未提交的更改将与当前分支的新提示合并。您仍然需要解决任何冲突。

*   `hg commit`准备好时。

我仍然建议您是否在拉/合并之前先提交大量更改，因为如果合并不顺利，通过更新到该更改集来重新开始会更容易。

保持`hg pull`和`hg update`分开允许您查看传入的变更集并预测合并将如何进行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-29T08:32:10.257

感觉奇怪的原因是您延迟提交，直到您想与其他人集成。

分布式版本控制的一大特点是**提交是本地的**。因为它们是本地的，所以你应该**经常**提交——每次你完成一小部分一致的工作时提交。您的提交不会立即施加于其他人，因此您不会通过进行许多小提交来打断他们。

如果您开始进行更多提交，您将看到您的工作流程变为：

```
$ hg commit -m "Refactoring for Issue123"
$ hg commit -m "Basic functionality for Issue123"
$ hg commit -m "Fixed off-by-one error (Issue123)"
$ hg commit -m "Finished implementing Issue123"
$ hg commit -m "Added more tests for Issue123"
$ hg commit -m "Begin use new function from Issue123"
$ hg pull
$ hg merge
$ hg commit -m "Merge" 
```

在这里，合并提交与“真实”提交的比率要合理得多。

许多人（包括我自己）喜欢使用[rebase 扩展](http://mercurial.selenic.com/wiki/RebaseExtension)来完全避免合并。该扩展通过伪造历史来线性化提交，这样看起来就像您*在*使用`hg pull`. 工作流程中唯一的变化是您`hg rebase`而不是`hg merge`上面然后跳过最终提交。

# html - CSS span 没有完全包裹

> ID：12166813
> 
> 赞同：8
> 
> 时间：2012-08-28T20:10:33.997
> 
> 标签：html, css

当它达到最大宽度时，我在将东西包装到新行时遇到了一些问题。我的博客设置在一个 div 中显示所有标签，当第一行达到最大宽度时，下一个标签应该跳到下一行。（附件是 Chrome 和 Firefox 中发生的事情）

[http://jsfiddle.net/QHWNF/7/](http://jsfiddle.net/QHWNF/7/)

这是CSS代码：

```
p.tagHolder{
margin-bottom:5px;
line-height:25px;} 
```

所有的 HTML/PHP 是：

```
<a href="#"><span>TagName</span></a><a href="#"><span>TagName2</span></a>.... 
```

![铬合金](../Images/061ead8fbaf701ec3a9f3adfd2ffb129.png) ![火狐](../Images/3379c689a5296c79758d4a96b9746388.png)

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-28T20:23:51.147

尝试将跨度设置为`display: inline-block`.

[http://jsfiddle.net/QHWNF/10/](http://jsfiddle.net/QHWNF/10/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T20:16:12.770

`word-wrap: normal;`将and添加`word-break: normal;`到您的`span`和`p`容器中。这将确保单词仅在需要换行时在允许的断点处被打破。

我希望这有帮助！

# asp.net - ASP.NET - 访问嵌套在 GridView 列中的中继器？

> ID：12166818
> 
> 赞同：0
> 
> 时间：2012-08-28T20:10:55.977
> 
> 标签：asp.net, vb.net, gridview, repeater

我有一个空白中继器嵌套在 GridView 的列中，并希望使用 GridView 中的按钮通过后面的代码按需填充中继器。我在引用按钮的 onCommand 子中的中继器时遇到了困难。

这是相关的标记：

```
<asp:GridView ID="Submission" runat="server" AllowPaging="true" AllowSorting="true" />
            <Columns>
                ..........
                <asp:TemplateField HeaderText="Action">
                    <ItemTemplate>
                        <asp:ImageButton ID="AdminEditSubmission" runat="server" ImageUrl="edit_15.png"
                            alt="" OnCommand="loadDetails" CommandArgument="X" />
                    </ItemTemplate>
                </asp:TemplateField>
                ..........
                <asp:TemplateField>
                    <ItemTemplate>
                                <asp:Repeater ID="RptSubmissionDetail" runat="server">
                                </asp:Repeater>
                    </ItemTemplate>
                </asp:TemplateField>
            </Columns>
        </asp:GridView> 
```

为了这个小例子，我将尝试用“Hello world”更新转发器的标题。但是，当它到达最后一行时，我得到了可怕的“对象引用未设置为对象的实例”错误。

```
 Sub loadDetails(sender As Object, e As CommandEventArgs)
        Dim rpt As Repeater = CType(Page.FindControl("RptsSubmissionDetail"), Repeater)
        Dim tmpHdr As TemplateBuilder = New TemplateBuilder
        tmpHdr.AppendLiteralString("Hello World")
        rpt.HeaderTemplate = tmpHdr
    End Sub 
```

谁能告诉我如何从我的 ImageButton click sub 中引用这个中继器？我已经尝试了几个，**Page.FindControl("RptsSubmissionDetail")**只是我最近的尝试。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T20:19:33.177

在 GridView 的 RowCommand 中，您需要`FindControl`使用`GridViewRow`：

```
Sub Submission_RowCommand(ByVal sender As Object, ByVal e As GridViewCommandEventArgs)
    If e.CommandName = "loadDetails" Then
      ' Convert the row index stored in the CommandArgument
      ' property to an Integer.
      Dim index = Convert.ToInt32(e.CommandArgument)  
      ' Retrieve the row that contains the button clicked 
      ' by the user from the Rows collection.
      Dim row = Submission.Rows(index)  
      Dim repeater = DirectCast(row.FindControl("RptSubmissionDetail"), Repeater)
    End If
End Sub 
```

从 ImageButton 的点击事件来看，它几乎是一样的。将`sender`参数转换为 ，`ImageButton`并将其`NamingContainer`属性转换为`GridViewRow`。然后`FindControl`如上图使用：

```
Sub ImageButton_Click(ByVal sender As Object, ByVal e As EventArgs)
    Dim img = DirectCast(sender, ImageButton)
    Dim row = DirectCast(img.NamingContainer, GridViewRow)
    Dim repeater = DirectCast(row.FindControl("RptSubmissionDetail"), Repeater)
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T20:21:54.683

在您的 ImageButton Click 事件中编写以下代码

```
For Each row As GridViewRow In Submission.Rows
Dim r As Repeater = DirectCast(row.FindControl("RptsSubmissionDetail"), Repeater)           
If r IsNot Nothing Then
          ' do your work
End If
Next 
```

或者，如果您想在特定行中找到中继器，您可以将其查找为

```
Dim r As Repeater = DirectCast(Submission.Rows[0].FindControl("RptsSubmissionDetail"), Repeater)  ' Give the right index            
If r IsNot Nothing Then
          ' do your work
End If 
```

# python - 使用 NLTK 无需安装

> ID：12166819
> 
> 赞同：5
> 
> 时间：2012-08-28T20:11:06.507
> 
> 标签：python, nlp, nltk

使用 Natural Language Toolkit 学习 Python 非常有趣，它们在我的本地机器上运行良好，尽管我必须安装几个包才能使用它。NLTK 资源现在是如何集成到我的系统上的，对我来说仍然是一个谜，尽管很明显 NLTK 源代码不仅仅是位于 Python 解释器知道找到它的地方。

我想在我的网站上使用工具包，该网站由另一家公司托管。简单地将 NLTK 源代码文件上传到我的服务器并告诉根目录中的脚本“导入 nltk”是行不通的；我有点怀疑它会。

那么，无论 NLTK 安装例程做什么和直接导入之间的区别是什么，为什么直接导入无法访问工具包？有没有一种方法可以使用 NLTK 源文件而无需更改主机的 Python？

非常感谢您的想法和笔记。-G

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T20:25:17.317

您不仅需要 NLTK `PYTHONPATH`（正如[@dhg 指出的那样](https://stackoverflow.com/a/12166860/4203)），还需要它所具有的任何依赖项；一个快速的本地测试表明这真的只是`PyYAML`. 您应该只用于`pip`安装软件包。与尝试手动找出所有依赖项并进行`PYTHONPATH`相应调整相比，它更不容易出错。如果这是一个共享主机，您没有适当的访问权限来运行`pip`安装，您应该要求主机为您执行此操作。

为了解决您问题中更一般的“无论安装脚本在做什么”部分：大多数 Python 包都是使用 管理的`setup.py`，它构建在`distutils`（有时`setuputils`）之上。如果这是您真正感兴趣的东西，请查看[The Hitchhiker's Guide to Packaging](http://guide.python-distribute.org/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T23:08:57.163

您不需要系统安装支持，只需要 python 可以找到它们的正确模块。我已经设置了没有系统安装权限的 NLTK，而且麻烦相对较少——但我确实有命令行访问权限，所以我可以看到我在做什么。

为了让它工作，你应该在你控制的计算机上进行本地安装*——*最好是从未安装过 NLTK 的计算机，因为你可能忘记（或不知道）为你配置了什么。确定所需内容后，将捆绑包复制到托管计算机。但此时，请检查您使用的模块版本是否适合网络服务器的架构。特别是 Numpy 具有不同的 32/64 位版本 IIRC。

弄清楚如何查看来自主机的错误消息也是值得的。如果您在默认情况下看不到它们，您可以捕获`ImportError`并显示它包含的消息，或者您可以重定向 stderr ......这取决于您的配置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T20:14:42.407

假设您的 NLTK 源位于 中`/some/dir/`，因此

```
dhg /some/dir/$ ls nltk
...
app
book.py
ccg
chat
chunk
classify
... 
```

您可以从`nltk`找到源目录的目录中启动 python 解释器：

```
dhg /some/dir/$ python
Python 2.7.1 (r271:86882M, Nov 30 2010, 10:35:34) 
>>> import nltk 
```

或者您可以将其位置添加到`PYTHONPATH`环境变量中，这使得 NLTK 在任何地方都可用：

```
dhg /whatever/$ export PYTHONPATH="$PYTHONPATH:/some/dir/"
dhg /whatever/$ python
Python 2.7.1 (r271:86882M, Nov 30 2010, 10:35:34) 
>>> import nltk 
```

任何其他依赖项，包括 NLTK 所依赖的那些，也可以以`PYTHONPATH`相同的方式添加到 中。

# c++ - 4GB 的字符串流溢出

> ID：12166826
> 
> 赞同：3
> 
> 时间：2012-08-28T20:11:22.040
> 
> 标签：c++, stl, overflow, stringstream

即使它在具有足够内存的 64 位 linux 机器上运行，我也无法超出 stringstream 的 4GB 限制。

下面的测试代码（阅读您的评论后修改）核心转储后 4GB。

从 gdb 跟踪来看，stringstream 使用默认的 std::char_traits，其中 int_type 设置为 32 位 int，而不是 64 位 size_t。有什么建议可以解决吗？

```
#include <stdint.h>
#include <iostream>
#include <sstream>
#include <math.h>
using namespace std;

int main(int narg, char** argv)
{
    string str;
    stringstream ss;
    const size_t GB = (size_t)pow(2, 30);

    str.resize(GB, '1');
    cerr << "1GB=" << str.size()
             << ", string::max_size=" << str.max_size()/GB << "GB"
             << ", sizeof(int)=" << sizeof(int)
             << ", sizeof(int64_t)=" << sizeof(int64_t)
             << ", sizeof(size_t)=" << sizeof(size_t)
             << endl;
    string().swap(str);

    str.resize(6*GB, '6');
    cerr << "str.size()=" << (str.size() / GB) << "GB allocated successfully"
            << ", ended with " << str.substr(str.size()-5, 5) << endl;
    string().swap(str);

    str.resize(GB/4, 'Q');
    cerr << "writing to stringstream..." << std::flush;
    for (int i = 0; i < 30; ++i) {
        ss << str << endl;
        cerr << double(ss.str().size())/GB << "GB " << std::flush;
    }
    cerr << endl;
    exit(0);
} 
```

输出是：

```
1GB=1073741824, string::max_size=4294967295GB, sizeof(int)=4, sizeof(int64_t)=8, sizeof(size_t)=8
str.size()=6GB allocated successfully, ended with 66666
writing to stringstream...0.25GB 0.5GB 0.75GB 1GB 1.25GB 1.5GB 1.75GB 2GB 2.25GB 2.5GB 2.75GB 3GB 3.25GB 3.5GB 3.75GB Segmentation fault (core dumped) 
```

gdb 堆栈跟踪是：

```
(gdb) where
#0  0x00002aaaaad5e0c1 in std::basic_stringbuf<char, std::char_traits<char>, std::allocator<char> >::overflow(int) () from /usr/lib64/libstdc++.so.6
#1  0x00002aaaaad62cbd in std::basic_streambuf<char, std::char_traits<char> >::xsputn(char const*, long) () from /usr/lib64/libstdc++.so.6
#2  0x00002aaaaad5657d in std::basic_ostream<char, std::char_traits<char> >& std::operator<< <char, std::char_traits<char>, std::allocator<char> >(std::basic_ostream<char, std::char_traits<char> >&, std::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) () from /usr/lib64/libstdc++.so.6
#3  0x000000000040112b in main () 
```

二进制文件似乎是 64 位的。

```
$ file a.out
a.out: ELF 64-bit LSB executable, AMD x86-64, version 1 (SYSV), for GNU/Linux 2.6.9, dynamically linked (uses shared libs), for GNU/Linux 2.6.9, not stripped 
```

尼克，检查预处理器输出的好点。不知何故，std::char_straits 覆盖了 __gnu_cxx::char_straits，并将 int_type 重新定义为 int，而不是像 __gnu_cxx::char_straits 中的 unsigned long。这是非常令人惊讶的！

```
namespace __gnu_cxx
{
# 61 "/usr/lib/gcc/x86_64-redhat-linux/4.1.2/../../../../include/c++/4.1.2/bits/char_traits.h" 3
  template <class _CharT>
    struct _Char_types
    {
      typedef unsigned long int_type;
      typedef std::streampos pos_type;
      typedef std::streamoff off_type;
      typedef std::mbstate_t state_type;
    };
# 86 "/usr/lib/gcc/x86_64-redhat-linux/4.1.2/../../../../include/c++/4.1.2/bits/char_traits.h" 3
  template<typename _CharT>
    struct char_traits
    {
      typedef _CharT char_type;
      typedef typename _Char_types<_CharT>::int_type int_type;
      typedef typename _Char_types<_CharT>::pos_type pos_type;
      typedef typename _Char_types<_CharT>::off_type off_type;
      typedef typename _Char_types<_CharT>::state_type state_type;
              ....
               };

namespace std
{
# 224 "/usr/lib/gcc/x86_64-redhat-linux/4.1.2/../../../../include/c++/4.1.2/bits/char_traits.h" 3
  template<class _CharT>
    struct char_traits : public __gnu_cxx::char_traits<_CharT>
    { };

  template<>
    struct char_traits<char>
    {
      typedef char char_type;
      typedef int int_type;
      typedef streampos pos_type;
      typedef streamoff off_type;
      typedef mbstate_t state_type;
              ...
              }; 
```

编辑：下面来自 STL 网站[http://www.cplusplus.com/reference/string/char_traits/](http://www.cplusplus.com/reference/string/char_traits/)其中 char_traits 专业化使用 int。

```
typedef INT_T int_type; 
Where INT_T is a type that can represent all the valid characters representable by a    char_type plus an end-of-file value (eof) which is compatible with iostream class member functions.
For char_traits<char> this is int, and for char_traits<wchar_t> this is wint_t 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T04:07:14.600

你能发布一个预处理的源文件吗？

*引用已`_Char_types`删除，因为它具有误导性。*

我不确定 int_type 是否相关，char 的专业化确实将 int 用于 int_type。

int_type 是用于保存单个字符的 typedef（即 ascii 至少一个字节，wchar_t 更高）。它不用于存储一系列字符（参见下面的 std::streamoff）。

* * *

从您的预处理输出中，我怀疑 std::streamoff 可能是罪魁祸首。从我系统上的标题中：

```
# 90 "/usr/include/c++/4.6/bits/postypes.h" 3
  typedef long streamoff; 
```

std::streamoff 在 std::streampos 中使用，如果定义不正确，我认为会导致字符串流调用溢出函数。

您是否检查过是否包含正确的标题？

```
# 61 "/usr/lib/gcc/x86_64-redhat-linux/4.1.2/../../../../include/c++/4.1.2/bits/char_traits.h" 3 
```

是以下路径：

```
/usr/include/c++/4.1.2/bits/char_traits.h 
```

-缺口

# html - 封装css

> ID：12166827
> 
> 赞同：10
> 
> 时间：2012-08-28T20:11:23.717
> 
> 标签：html, css, parsing, iframe

我正在做一份报告，在报告中我必须呈现来自不同提供商的电子邮件，这些电子邮件带有自己的 css（通常是内联 css，但有时它们应用一般样式）。我通常使用 iframe 来封装 css，所以它不会破坏我的，但我现在不能使用它。

有没有办法在不使用 iframe 的情况下封装 css？

这是我遇到的问题的一个例子：

```
<html>
  <head>
    <style>
      // I enclose it to content so it doesn't override the email css 
      #my_content table, #my_content p {
        color: black;
      }
    </style>
   </head>
   <body>  
     <div id='my_content'>
      ... some stuff ...
     <div id='email'>
        <html>
          <head>
            <style>
              table {
                margin-left: 100cm; // screws up all my tables
              } 
              .... some styles that should only apply inside the email div ...
            </style>
          </head>
          <body>
            .... email content ...
          </body>
        </html>
      </div>
    </div>
  </body>
</html> 
```

我可以提取 html 结构并获取正文中的内容，但并不是我所有的电子邮件都会看起来像它应该的那样。此外，html 必须是有效的，所以任何建议都会很棒！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T20:16:04.463

您可以`#email`添加到您的 css 选择器，使它们仅适用于您的 div。

例如，改变

`.classname { display: block }`

至

`#email .classname { display: block }`

编辑：如果您无法按照 arxanas 的建议控制电子邮件 CSS，请考虑使用[LESS](http://lesscss.org)。Less 是一个 CSS 预处理器，允许嵌套 CSS 选择器。如果你包含 less.js，那么你可以这样做：

```
#email {
    CSS goes here
} 
```

less.js 将解析它并将其转换为 CSS。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T20:15:49.590

您可以尝试检查电子邮件 css 部分是否与您自己的类名发生冲突。我刚刚发现这篇文章可能对您有所帮助： [Listing known CSS classes using Javascript](https://stackoverflow.com/questions/4651834/listing-known-css-classes-using-javascript)

# html - div 类随机定位在中心

> ID：12166832
> 
> 赞同：1
> 
> 时间：2012-08-28T20:11:35.167
> 
> 标签：html, css, position

[现场直播。](http://parlourdc.com/wp/services)

向页面底部`"Parlour Policies"`浮动在页面中间，但应根据以下样式设置样式：

```
.content {
    height: 100%;
    padding-bottom: 40px;
    padding-left: 20px;
    width: 600px;
} 
```

任何想法是什么导致位置转移？我在 Firebug 中没有看到任何内容，并且少数验证错误（我现在正在努力修复）都与 WP 生成的标题有关，并且不会`<div class="content">`对不同页面上的任何其他错误产生负面影响。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T20:14:22.843

只需添加`overflow: hidden`-`.content`它会清除您的浮动

```
.content { 
    height: 100%; 
    padding-bottom: 40px; 
    padding-left: 20px; 
    overflow: hidden; /* this */
    width: 600px; 
} 
```

# html - 画布（Kinetic.JS）：多层与单层方法

> ID：12166848
> 
> 赞同：6
> 
> 时间：2012-08-28T20:13:27.050
> 
> 标签：html, canvas, layer, shape, kineticjs

谁能解释为什么（事实上，*如果*）在使用 Kinetic 之类的东西时最好将画布游戏的主要部分抽象到不同的层？

这当然是你应该做的，到目前为止我一直是：一层用于背景，一层用于玩家角色，以及其他。

然后我遇到了一种情况，我需要一个图层的形状位于另一图层的形状后面 - 但是将整个图层移动到另一图层后面不是一个选项，所以我不情愿地重新编码，以便整个游戏位于一个层。

但令我惊讶的是，我仍然可以做我需要的一切。我仍然可以为单个形状或组设置动画或处理事件。

**简而言之：显式分层带来什么优势？单层方法可能会面临哪些陷阱？**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-29T07:49:19.700

实际上，层通常会带来巨大的优势。但是，有时它们不是必需的。只是给出一个想法 - 比较 PhotoShop（图层）和 MS Paint（无图层）。如果这给了你这个想法，那就是它！

如果不是：层是一个组织概念。它使您可以分段处理数据。他们允许：

1.  将某些变换应用于整个图层。
2.  自动按图层对对象进行分类，以便您可以获取图层的所有对象并轻松使用它们。
3.  将层中发生的任何事情与其他层中发生的事情隔离开来。
4.  禁用/启用整个图层。
5.  更多！

如您所见，层通常允许在内容组织级别上实施*封装*等抽象，并且在某种程度上允许*多态性。*单层方法带来的陷阱就是——*耦合*太紧——一个来自永久混沌世界的野兽，*封装*和*多态性*为永恒而战。努夫说！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-29T07:08:51.013

如果你的游戏包含很多不同的东西，那么绘制所有东西可能需要一些时间。同一层太多会降低性能。尽管太多的层也是如此。

查看：[http ://www.html5canvastutorials.com/labs/html5-canvas-kineticjs-drag-and-drop-stress-test-with-1000-shapes/](http://www.html5canvastutorials.com/labs/html5-canvas-kineticjs-drag-and-drop-stress-test-with-1000-shapes/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-06-10T01:40:29.743

在组织方面，noncom 的回答是正确的。然而，正如他所指出的，他的回答更多地是关于画布动画，并且您指出 KineticJS 提供了自己的工具来提供相同的组织优势是非常正确的。

因此，与组织无关，我们所拥有的只是性能。话虽如此，主要区别在于每个“层”对应一个不同的画布标签。

那么简单的答案是，拥有多个图层允许您一次选择性地仅重绘一个画布标签。想一想，如果您有对象在背景上移动，您是否希望每次这些对象移动时都清除并重新绘制背景？

如果您不使用图层，那就是正在发生的事情。你想要的是一个只有在背景发生变化时才会再次绘制的背景，这意味着背景层。

这是否真的值得在很大程度上取决于您的应用程序，但这就是想法。层（组织之外）的重点是将所需的绘图过程与实际需要绘制的事物隔离开来。对于复杂的动画，这对于保持良好的性能非常重要。

这是一个 jsperf 供参考：http: [//jsperf.com/layered-canvases/3](http://jsperf.com/layered-canvases/3)

# design-patterns - 允许对象在层次结构中找到它们的根的正确设计模式是什么？

> ID：12166850
> 
> 赞同：2
> 
> 时间：2012-08-28T20:13:51.510
> 
> 标签：design-patterns, tree, hierarchy

我有一个对象的层次结构（比如说，3 个级别）。

A类与B类组成，B类与C类组成。

初始化执行如下操作：

```
$a1 = new A()
$a1->add('B1', $b11 = new B())
$a1->add('B2', $b12 = new B())
$b11->add('C1', $c111 = new C())
$b12->add('C1', $c121 = new C())
... 
```

我的问题发生在`$c121`想要检索`$c111`. 我目前知道实现这一目标的两种方法：

1/ 假设 A 是一个单例：它使我能够从树的任何节点冲回根。然后我可以使用完整的“路径名”从根目录寻址任何节点。

2/ 给每个对象它的祖先，所以它们可以通过树来回（通过祖先引用）和来回（通过路径名）。

虽然两者都满足我的需求，但我找不到任何令人满意的解决方案。

我错过了什么吗？这应该是一个常见问题，但我无法弄清楚哪种设计模式可以匹配这个问题。

**编辑**请注意，层次结构不是由相似的项目组成的。所以它是一个固定的层次结构。只有每个级别的项目数量是波动的。（例如，客户、订单和订购的产品）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T20:54:36.910

如果您的课程是不同的，那么我会这样对待它们（即您本身没有树）。
似乎您正在尝试将不同的元素视为相似。

如果您需要访问包含类（您称为父类），*则*需要提供参考。

在上面的示例中，我将为您的关联对象提供对“持有”它的对象的引用，并为 C 类提供获取其兄弟姐妹的方法。

```
$c121=new C(this);   // pass reference to container
$c121->getSiblings();  // method to get sibling through reference to containing object 
```

另一种看待它的方法是：

```
$frank=new Customer()
$frank->add('Order01', $order1 = new Order())
$frank->add('Order02', $order2 = new Order())
$order1->add('LineItem01', $item1 = new LineItem())
$order1->add('LineItem02', $item2 = new LineItem())

$order1->getOrder() //return collection
$order1->getOrder()->getItems() //return collection items/siblings 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T20:22:08.717

两者都做。在 Eclipse 中，工具通常会在已知类上实现响应模型根的方法。出现在树中的对象（视觉上像树项或实现方式像 UI 小部件）都知道它们的父级，并且可以通过继承的 getParent() 调用检索父级。

# box-api - 修改上传文件的时间戳

> ID：12166852
> 
> 赞同：1
> 
> 时间：2012-08-28T20:14:08.950
> 
> 标签：box-api

我希望能够保留我通过 API 上传的文件的修改时间戳。在[API Doc](http://developers.box.com/docs/)部分“更新文件的信息”中，修改时间戳听起来不像是我可以修改的文件的属性。是否有另一种方法可以实现这一目标？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T21:15:37.563

我们正在将其构建为一项新功能，最初只能通过 V2 API 使用。在我们将其作为一项新功能推出之前，您将不得不等待几周。观看我们的开发者博客以了解该公告。

# ruby - `load_missing_constant'：未初始化的常量 Mocha::Standalone (NameError)

> ID：12166853
> 
> 赞同：2
> 
> 时间：2012-08-28T20:14:17.490
> 
> 标签：ruby, rspec-rails, puppet

我分叉了 puppet-dashboard 以向报告选项卡添加一些过滤。我被要求为我的更改编写一些规范，但在尝试运行时出现以下错误`rake spec`

```
/Users/gposton/src/puppet-dashboard/vendor/rails/activesupport/lib/active_support/test_case.rb:12: warning: already initialized constant Mocha
/Users/gposton/src/puppet-dashboard/vendor/rails/activesupport/lib/active_support/dependencies.rb:466:in `load_missing_constant': uninitialized constant Mocha::Standalone (NameError)
  from /Users/gposton/src/puppet-dashboard/vendor/rails/activesupport/lib/active_support/dependencies.rb:106:in `const_missing'
  from /Users/gposton/src/puppet-dashboard/vendor/gems/rspec-1.3.2/lib/spec/adapters/mock_frameworks/mocha.rb:12
  from /Users/gposton/.rvm/rubies/ruby-1.8.7-p358/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:36:in `gem_original_require'
  from /Users/gposton/.rvm/rubies/ruby-1.8.7-p358/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:36:in `require'
  from /Users/gposton/src/puppet-dashboard/vendor/rails/activesupport/lib/active_support/dependencies.rb:184:in `require'
  from /Users/gposton/src/puppet-dashboard/vendor/gems/rspec-1.3.2/lib/spec/runner/options.rb:313:in `plugin_mock_framework'
  from /Users/gposton/src/puppet-dashboard/vendor/gems/rspec-1.3.2/lib/spec/runner/options.rb:139:in `run_examples'
  from /Users/gposton/src/puppet-dashboard/vendor/gems/rspec-1.3.2/lib/spec/runner/command_line.rb:9:in `run'
  from /Users/gposton/src/puppet-dashboard/vendor/gems/rspec-1.3.2/bin/spec:5
rake aborted! 
```

有任何想法吗？

这是我的配置。

```
gposton:puppet-dashboard/ (master✗) $ gem list                                                                                                                                                                                                                       

*** LOCAL GEMS ***

actionpack (3.2.8)
activemodel (3.2.8)
activesupport (3.2.8)
ap (0.1.1)
builder (3.0.0)
bundler (1.1.3)
colorize (0.5.8)
crack (0.3.1)
daemons (1.0.10)
diff-lcs (1.1.3)
domain_name (0.5.3)
erubis (2.7.0)
factory_girl (2.6.4)
ffi (1.0.11, 0.6.3)
haml (3.1.7)
hike (1.2.1)
httparty (0.8.3)
httpclient (2.2.5)
i18n (0.6.0)
journey (1.0.4)
json (1.7.1)
libvirt (0.2.0)
mail (2.4.4)
mechanize (2.4)
metaclass (0.0.1)
mime-types (1.18)
mocha (0.12.3)
mogilefs-client (3.1.1)
multi_json (1.3.4)
multi_xml (0.4.4)
mysql (2.8.1)
net-http-digest_auth (1.2)
net-http-persistent (2.6)
net-scp (1.0.4)
net-ssh (2.3.0)
nokogiri (1.4.7)
ntlm-http (0.1.1)
polyglot (0.3.3)
rack (1.1.2)
rack-cache (1.2)
rack-ssl (1.3.2)
rack-test (0.6.1)
railties (3.2.8)
rake (0.9.2.2)
rdoc (3.12)
rspec (2.11.0)
rspec-core (2.11.1)
rspec-expectations (2.11.2)
rspec-mocks (2.11.2)
rspec-rails (2.11.0)
ruby-libvirt (0.3.0)
rubygems-bundler (0.9.0)
rvm (1.11.3.3)
sass (3.2.1)
soap4r (1.5.8)
sprockets (2.1.3)
sqlite3 (1.3.6)
sys-filesystem (1.0.0, 0.3.4)
terminal-table (1.4.5)
thor (0.16.0)
thoughtbot-shoulda (2.11.1)
tilt (1.3.3)
treetop (1.4.10)
typhoeus (0.3.3)
unf (0.0.5)
unf_ext (0.0.4)
webrobots (0.0.13)
will_paginate (3.0.3)
xml-simple (1.1.1)

gposton:puppet-dashboard/ (master✗) $ ruby -v
ruby 1.8.7 (2012-02-08 patchlevel 358) [i686-darwin11.3.0] 
```

代码可以在[github上找到](https://github.com/gposton/puppet-dashboard)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-05T15:15:41.903

使规范起作用的最简单方法是使用[Bundler](http://bundler.io/)。

```
bundle install
bundle exec rake spec 
```

# css - jsf模板中的背景url路径

> ID：12166854
> 
> 赞同：3
> 
> 时间：2012-08-28T20:14:19.653
> 
> 标签：css, jsf

我在这里遇到了麻烦。我有一个 JSF 应用程序，它有一个名为**baseTemplate.xhtml**的模板文件。该文件位于 /resources/template 文件夹中。遵循文件代码：

```
<?xml version='1.0' encoding='UTF-8' ?> 
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
  xmlns:ui="http://java.sun.com/jsf/facelets"
  xmlns:h="http://java.sun.com/jsf/html"
  xmlns:f="http://java.sun.com/jsf/core">
    <h:head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <h:outputStylesheet library="css" name="default.css"/>
        <h:outputStylesheet library="css" name="cssLayout.css"/>
        <h:outputStylesheet library="css" name="menu.css"/>
        <h:outputStylesheet library="css" name="rodape.css"/>
        <title>JSF Project</title>
    </h:head>
    <h:body>
        <div id="estrutura">
            <div class="top">
                <ui:insert name="top">
                    <ui:include src="somefile"/>
                </ui:insert>
            </div>
            <div id="menu">
                <ui:insert name="menu">
                    <ui:include src="somefile"/>
                </ui:insert>
            </div>
            <div>
                <div id="left">
                    <ui:insert name="left">
                    </ui:insert>
                </div>
                <div id="content" class="left_content">
                    <ui:insert name="content"></ui:insert>
                </div>
            </div>
            <div id="bottom">
                <ui:insert name="bottom">
                    <ui:include src="somefile"/>
                </ui:insert>
            </div>
        </div>    
      </h:body>
</html> 
```

在位于 /resources/css 文件夹内的**cssLayout.css文件中，我有以下规则：**

```
.top {
   position: relative;
   height: 120px;
   padding: 0;
   margin: 0 0 15px 0;
   background-image: url('imgSite/sisLogo.png');
   background-repeat: no-repeat;
} 
```

图像 sisLogo.png 位于 /resources/css/imgSite 下。我的应用程序中的所有页面都在**/pages**内。当我使用模板时，他不会为**top**加载图像背景，但会加载其他 css 属性。似乎是背景图片 url 路径问题。我怎么能解决这个问题？

项目文件夹结构如下：

```
/
 pages/
     home.xhtml (using the template)
 resources/
     css/
         cssLayout.css
         imgSite/
             sisLogo.png
     templates/
         baseTemplate.xhtml 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-29T10:59:03.677

CSS 背景图像是相对于 CSS 文件的**请求 URL**加载的（因此不会直接相对于其在 Web 内容中的物理位置）。如果您浏览 生成的 HTML 输出`<h:outputStylesheet>`，您会看到请求 URL 已变得不同。假设 的上下文路径`/somecontext`和 的`FacesServlet`映射`*.xhtml`，它看起来像这样：

```
<link rel="stylesheet" type="text/css" href="/somecontext/javax.faces.resource/cssLayout.css.xhtml?ln=css" /> 
```

请注意，您（[不正确的顺便说一句](https://stackoverflow.com/questions/11988415/what-is-the-jsf-resource-library-for-and-how-should-it-be-used)）对 的使用`library`已`/css`移至`?ln=css`. 您需要`url()`相应地修复背景图像，以便它与 CSS 的真实请求 URL 正确相关。例如

```
background-image: url("../resources/css/imgSite/sisLogo.png"); 
```

`FacesServlet`将 JSF 资源标识符规则和映射考虑在内的更可靠的方法是`#{resource}`在 EL 中使用：

```
background-image: url("#{resource['css:imgSite/sisLogo.png']}"); 
```

### 也可以看看：

*   [将 JSF 前缀更改为后缀映射迫使我在 CSS 背景图像上重新应用映射](https://stackoverflow.com/questions/6835499/changing-jsf-prefix-to-suffix-mapping-forces-me-to-reapply-the-mapping-on-css-ba/6835701#6835701)
*   [JSF 资源库有什么用途，应该如何使用？](https://stackoverflow.com/questions/11988415/what-is-the-jsf-resource-library-for-and-how-should-it-be-used)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-24T13:51:30.940

你的情况很简单。我复制它：

```
/
 pages/
     home.xhtml (using the template)
 resources/
     css/
         cssLayout.css
         imgSite/
             sisLogo.png
     templates/
         baseTemplate.xhtml 
```

***小贴士***：***当你不知道***如何使用相对路径或***实现起来有问题时***，只需使用***绝对路径***即可。在某些情况下***，绝对路径具有强大的优势，******可以从根开始测量***。所以它们更简单。

在您的情况下，无论结构如何，您都可以这样做：

***/您的项目名称/PathToTheImage***

示例：（假设您的项目名为***“NewYork”***。这只是一个名称！您应该这样做）

***/NewYord/resources/css/imgSite/sisLogo.png***

我想你知道你必须在 jsf 代码中包含 css 路径。

示例：（在您的情况下，您必须将其放入需要此 css 的代码 xhtml 中）

```
<h:outputStylesheet library="css" name="cssLayout.css" /> 
```

希望有所帮助。

谢谢

# ios - phonegap 应用程序上的“橡皮筋”活动

> ID：12166856
> 
> 赞同：0
> 
> 时间：2012-08-28T20:14:24.480
> 
> 标签：ios, cordova, rubber-band

我正在使用 Phonegap/Cordova 和 jQuery Mobile 开发 iOS 应用程序。

我希望能够在用户下拉页面时刷新数据（橡皮筋效果）。我尝试使用 iScroll 4，但它使我的页面滚动速度变慢。

我没有找到一个phonegap插件。我认为这是一个非常标准的 iOS 功能，所以也许我遗漏了什么？有没有什么简单的方法可以使用 phonegap / cordova 收听下拉事件？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T12:05:41.213

将这一行添加到**CDVViewController.m**（*Cordova 2.0*或更高版本）据说可以工作，但实际上我自己从未尝试过，因为我仍在使用 iScroll 4。试一试，让我知道它是如何为你工作的。

```
[webView.scrollView setDecelerationRate:UIScrollViewDecelerationRateNormal]; 
```

同样，尽管与这个问题有些无关，据说下面的代码片段可以将点击延迟从 300 毫秒减少到 300 毫秒，这也是 phonegap 开发人员通常想要的。这条线和上面的线都没有经过适当的测试，但也许是开始的好方法。

```
[webView.scrollView setDelaysContentTouches:NO]; 
```

# c# - 为什么这个替换反斜杠不起作用？

> ID：12166864
> 
> 赞同：2
> 
> 时间：2012-08-28T20:15:07.563
> 
> 标签：c#, regex, replace, filepath, backslash

所以我需要从字符串中删除转义的反斜杠（在我的例子中，路径就像“C:\Program Files (x86)\Microsoft Office\Office14\WINWORD.EXE\”）。

要替换我尝试了以下方法：

```
String openWith = "C:\\Program Files (x86)\\Microsoft Office\\Office14\\WINWORD.EXE";

string newString = openWith.Replace(@"\\", @"\");

openWith = openWith.Replace(@"\\", @"\");

openWith = Regex.Replace(openWith,"\\\\","\\"); 
```

但这些都不起作用！！谁能向我解释为什么会这样？

先感谢您！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T20:16:43.010

您的字符串不包含双反斜杠。

第一个反斜杠`"C:\\"`是由 C# 编译器解释的转义字符。然而，在运行时，该字符串仅包含单个反斜杠。您可以通过显示字符串的值来证明这一点：

```
String openWith = "C:\\Program Files (x86)\\Microsoft Office\\Office14\\WINWORD.EXE";
Console.WriteLine(openWith); 
```

结果：

```
C:\Program Files (x86)\Microsoft Office\Office14\WINWORD.EXE
```

请注意，输出中只有一个反斜杠。

在线查看它：[ideone](http://ideone.com/jjJEV)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T20:17:16.237

您不需要从您输入问题的路径中删除反斜杠。

带有双反斜杠的路径是 Windows 操作系统上**有效**`\\`IO 路径的唯一可能*可视化*。

# java - Jasper 报表图表主题和配置

> ID：12166865
> 
> 赞同：1
> 
> 时间：2012-08-28T20:15:10.200
> 
> 标签：java, jasper-reports, themes

我一直在尝试格式化我的图表，使其标签没有牙签大小的宽度，并且有更好的颜色和边距。

事实证明，这比我想象的要困难得多，也更乏味。

我已经阅读[了有关编写自己的课程的页面](http://mdahlman.wordpress.com/2010/08/18/chart-customizers-1/)- 很好，但我想要拖放以获取视觉内容。

然后我查看了[这个页面](http://www.jaspersoft.com/ireport-and-jasperserver-creating-chart-themes-and-styles-tutorial)，它提供了有关如何使用主题的分步说明。它很整洁，除了我的模板检查器弹出空白并且我找不到我指定包的类路径的位置（我尝试在我的 Netbeans 项目中包含 jar - 不走运）。

无论如何... Jasper 中是否有任何对图表和表格自定义的拖放支持？显然，它是开源的，所以我不能指望质量能接近 MS Office，但到目前为止，使用 Jasper 就像拔牙（更不用说它使用的大量内存，即使是很小的报告）而且我如果存在的话，我很乐意接受任何替代包。

# xcode - 在 Xcode 4 的外部构建中的断点处停止

> ID：12166867
> 
> 赞同：0
> 
> 时间：2012-08-28T20:15:28.617
> 
> 标签：xcode, debugging

我正在尝试使用 Xcode 4 调试一个大型 c++ 项目。我必须使用 makefile 运行可执行文件，因此我将该项目添加为外部构建系统。该程序确实可以正常编译和运行，并具有预期的输出。如果我在编译期间编辑一个文件以产生错误，Xcode 会注意到这一点并转到正确文件中的正确行。问题是系统不会在我设置的断点处停止。

我已经在方案中添加了可执行文件，如此处[所述](https://stackoverflow.com/questions/7129556/adding-an-external-executable-in-xcode-4)。我已将所有源文件添加到项目中。[我已按照此处](https://stackoverflow.com/questions/7568810/xcode-4-external-build-project-and-debugging)的建议将自定义工作目录设置为正确的目录。我已经确保我认为由 Xcode 构建的可执行文件确实是那个，并且我也尝试在将方案设置为等待手动启动后手动运行它，没有任何变化。

当我设置断点时，它们会显示为应有的蓝色。

有人可以给我任何关于我可以尝试什么的提示吗？非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T00:51:23.207

尝试将 -g 选项添加到 g++ 以包含调试信息。对我有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-28T01:14:40.617

我也有同样的问题。我在makefile中包含了这一行，它成功了

```
#also include debug symbols
CFLAGS+=-ggdb 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-14T19:53:42.380

如果您使用 ccache 构建项目，lldb 将无法通过 file:line 设置断点

[http://llvm.org/bugs/show_bug.cgi?id=20297](http://llvm.org/bugs/show_bug.cgi?id=20297)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-08-22T02:08:54.550

我遇到了完全相同的问题（Xcode 8.3.3），但是将 -ggdb 添加到 makefile 并没有解决它。我发现（经过很多痛苦）makefile 正在清理 .o 文件作为构建的一部分（rm -f $(OBJFILES)）。事实证明，符号信息位于 .o 文件中，因此通过删除它们，Xcode 无法再进行调试。我注释掉了 rm 行，现在一切正常。我使用了 -g 标志，它可以工作。与此作斗争的任何人都应确保 .o 文件位于正确的位置。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-05-03T05:43:06.793

在 makefile 中将 -g 添加到 CFLAGS 和 CXXFLAGS 会有所帮助。您可能必须对项目中的所有 Makefile 执行此操作；甚至是您尝试断点的内部目录中的makefile。这完全取决于您的项目结构。我必须在项目中添加所有 3 个 Makefile。

它没有立即对我起作用。我不得不手动删除 .o 文件并使用添加到 Makefile 的标志再次构建。

另外，请确保您已按照此处问题中的建议完成所有操作。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-05-26T07:29:27.170

导入源文件时是否选中了“如有必要复制文件”复选框？这似乎不太好。这就是让断点对我来说失败的原因。我必须删除所有源文件并重新导入它们，确保 Xcode 没有单独制作它们的副本。这使得断点工作。

我猜 XCode 无法将调试信息（-g / -ggdb）与它自己的源副本或类似的东西联系起来。

# c# - WebBrowser 和 DocumentCompleted 事件

> ID：12166870
> 
> 赞同：0
> 
> 时间：2012-08-28T20:15:36.813
> 
> 标签：c#, winforms, browser

我在使用 WebBrowser DocumentCompleted 事件时遇到了一点问题。我有这个代码：

```
int timesToRun = 20;
private void Time_Tick(object sender, EventArgs e)
{
    if (timesToRun >= siteList.SiteLists.Count)
    {
        timesToRun = 0;
        webBrowser1.DocumentCompleted -= this.webBrowser1_DocumentCompleted;
        Console.WriteLine("timer is done");
        timer.Stop();
    }
        timer.Enabled = false;
        Console.WriteLine("timer is now disabled");
        Console.WriteLine(timesToRun);
        string currentSite = siteList.GetSiteFromIndex(timesToRun);
        webBrowser1.Navigate(currentSite);
}

private void webBrowser1_DocumentCompleted(object sender, WebBrowserDocumentCompletedEventArgs e)
{
    WebBrowser wb = (WebBrowser)sender;
    if (e.Url.AbsolutePath != wb.Url.AbsolutePath) //somtimes dosn't return true
    {
        Console.WriteLine(wb.Url);
        forumAction.FillOutFormIn(wb.Document);
        timesToRun++;
        Console.WriteLine("timer is now enabled");
        timer.Enabled = true;
    }  
} 
```

我的问题是**if 语句**仅在某些时候为真。我不确定我还能检查什么以确保浏览器已准备好使用。

我还能检查什么？还是我应该对这个问题采取不同的方法？

我从stackOverFlow中的一个不同问题中得到了这个if语句，因为我发现了一个问题，即事件被触发的次数更多（因为iframe和其他东西）。

（对不起我的英语不好）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T20:24:54.770

我认为问题在于浏览器的 url 可能与嵌套 IFrame 的 url 不同，所以当你调用

```
e.Url.AbsolutePath != wb.Url.AbsolutePath 
```

如果`DocumentCompleted`事件是由 IFrame 触发的，则其中的 url`e.Url`是 IFrame 之一，`wb.Url`而是 webbrowser 中包含页面的 url。

如果您需要检查浏览器是否可以使用，您可能需要等待很长时间。您可以循环通过`Frames`( `WB1.Document.Window.Frames`) 的属性来查看加载是否完成。

您可以使用外部库，例如`watin`，它可以很好地检查文档的完成情况。

# c - 使用固定宽度字体作为工具提示

> ID：12166876
> 
> 赞同：1
> 
> 时间：2012-08-28T20:15:55.713
> 
> 标签：c, winapi, fonts, tooltip

我想在工具提示中显示一些鼠标事件信息。看起来像：

```
Win1 : x =  100; y =   99; dx =  655; dy = 1789;
Win2 : x = 2396; y =  133; dx =   78; dy =  111;
....
.... 
```

即使我使用`%4d`和其他东西来格式化文本，它也不会像上面那样给出完美的结果。有没有办法在工具提示中以上述格式显示数据？我只能想象可以使用固定宽度的字体，但我不知道如何更改工具提示中的字体。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T21:32:09.787

您需要获取[工具提示](http://msdn.microsoft.com/en-us/library/windows/desktop/bb760250%28v=vs.85%29.aspx)窗口的句柄。然后你可以向它发送一个带有句柄的[WM_SETFONT](http://msdn.microsoft.com/en-us/library/windows/desktop/ms632642%28v=vs.85%29.aspx)消息到一个固定宽度的字体。

# java - 使用callable传递两个参数并返回参数数组

> ID：12166879
> 
> 赞同：3
> 
> 时间：2012-08-28T20:16:11.227
> 
> 标签：java, arrays, callable

我必须将两个字符串传递给一个线程，该线程将返回一个包含它们的数组，并且我必须使用可调用的。

这是我到目前为止所拥有的：

```
public class toArray implements Callable<String[]> {

private String string1 string2;

public toArray (String first, String second)
{
    string1= first;
    string2 = second;
}

    @Override
    public String[] call() throws Exception {
        String [] allStrings = null;
            allStrings[0] = string1;
            allStrings[1] = string2;
        return allStrings;
    }
} 
```

下面是主要内容：

```
public class theFuntion{

    public static void main(String[] args) {

        FutureTask<String[]> task = new FutureTask (new MyCallable());
        ExecutorService es = Executors.newSingleThreadExecutor();
        es.submit (task);
        try{
               String[] result = task.get();
               System.out.println(result[1] + result[2]);
           }
        catch(Exception e){
                           System.err.println(e);
    }
         es.shutdown();
} 
```

问题出在`main`：它说结果需要一个 String[] 但它正在获取一个对象。如果我转换结果，它会说必须声明一个异常被抛出。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T20:22:07.360

将类的签名更改为

```
public class toArray implements Callable<String[]> 
```

和`call`方法的签名

```
public String[] call() throws Exception 
```

**更新：** 好的，有不止一个错误...请参阅以下工作示例

```
public class Test{

    public static void main(String[] args) {

        FutureTask<String[]> task = new FutureTask(new MyCallable("a", "b"));
        ExecutorService es = Executors.newSingleThreadExecutor();
        es.submit (task);
        try{
            String[] result = task.get();
            System.out.println(result[0] + result[1]);
        }
        catch(Exception e){
            System.err.println(e);
        }
        es.shutdown();
    }

    public static class MyCallable implements Callable<String[]>
    {

        private String string1, string2;

        public MyCallable (String first, String second)
        {
            string1= first;
            string2 = second;
        }

        @Override
        public String[] call() throws Exception {
            String [] allStrings = new String[2];
            allStrings[0] = string1;
            allStrings[1] = string2;
            return allStrings;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T20:21:18.780

在[`Callable<V>`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Callable.html)中，参数化类型`V`代表 的结果类型[`call()`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Callable.html#call%28%29)。由于您想返回 a `String[]`，而不是`Callable<String>`，请使用`Callable<String[]>`. 然后，将返回类型更改`call`为`String[]`：

```
@Override
public String[] call() throws Exception {
    String [] allStrings = new String[2];
    allStrings[0] = string1;
    allStrings[1] = string2;
    return allStrings;
} 
```

[作为旁注，Java 中的类名[应该](http://www.oracle.com/technetwork/java/javase/documentation/codeconventions-135099.html#367)是名词，并且应该以大写字母开头。]

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T20:52:28.860

您没有在 中引用您的`ToArray`类`TheFunction`，可能是由于编译错误（提示：已经提到了修复）。

您的新 FutureTask 将如下所示：

```
FutureTask<String[]> task = new FutureTask(new ToArray("foo", "bar")); 
```

如果不告诉您简单的答案，您将在`call()`方法中遇到 2 个异常`ToArray`：

*   首先，您的 String 数组从未初始化，但**应该**初始化。
*   所有数组都从零开始

# html - 如何使整个 TD 区域变得可点击？

> ID：12166882
> 
> 赞同：1
> 
> 时间：2012-08-28T20:16:24.537
> 
> 标签：html, css

我是一个新的 css/html 学习者，我目前正在建立一个网站。我有悬停工作，但我不能让它变得可点击。我希望整个 TD 区域变得可点击，而不仅仅是文本链接变得可点击。

任何人都可以帮我解决这个问题吗？

这是我的[代码](http://jsfiddle.net/ateng/Hja5u/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T20:22:10.850

```
a {
    display:block;
    width:100%;
    height:100%;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T20:20:50.963

将此规则添加到您的 CSS

```
td.blue span, td.blue span a {
    display: block;
    height: 100%;
    width: 100%;
} 
```

[**演示**](http://jsfiddle.net/Hja5u/4/)

只是一个旁注-您不需要将链接包装在`<span>`-s

# javascript - 类型错误 $ 不是函数

> ID：12166883
> 
> 赞同：4
> 
> 时间：2012-08-28T20:16:31.747
> 
> 标签：javascript, jquery

我在我的网站上使用基于[jQuery 的记忆游戏。](http://www.slashc.com/codecanyon/jquery_memory_game/index.html)它总体上运行良好，但我希望在最后显示“再次播放”链接和统计信息。我无法让该代码工作。我看到这个错误：

```
TypeError: $ is not a function
  [Break On This Error]     

    var game = $('div.slashc-memory-game'); // get the game 
```

这是JS：

```
 // this script shows how you can get info about the game
    var game = $('div.slashc-memory-game'); // get the game
    var info = $('p#info').find('span'); // get the info box
    var playAgain = $('a#play-again').css('visibility', 'hidden'); // get the play again link
    // format time like hh:mm:ss
    var formatTime = function(s)
    {
        var h = parseInt(s / 3600), m = parseInt((s - h * 3600) / 60); s = s % 60;
        return (h < 10 ? '0' + h : h) + ':' + (m < 10 ? '0' + m : m) + ':' + (s < 10 ? '0' + s : s);
    }
    // listen for game 'done' event 
    game.bind('done', function(e)
    {
        // show basic stats
        var stats = game.slashcMemoryGame('getStats');
        info.html('Success ! Number of clicks : ' + stats.numClicks + ', elapsed time : ' + formatTime(parseInt(stats.time / 1000)) + '.');
        playAgain.css('visibility', 'visible'); // show link
    });
    // play again action
    playAgain.click(function(e)
    {
        playAgain.css('visibility', 'hidden'); // hide link
        info.html('Memory Game, click to reveal images'); // reset text
        game.slashcMemoryGame('restart'); // restart game
        e.preventDefault();
    }); 
```

这是一个[小提琴](http://jsfiddle.net/Lynda333/ZXMUB/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T20:22:50.193

尝试将 $() 替换为 jQuery() 并查看是否继续出现此错误。指示它不是函数的错误意味着尚未加载 jQuery 文件或故意释放 $ 名称。

如果 jQuery() 函数不起作用，请确保在脚本块/文件之前加载 jQuery 文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T20:26:28.433

由于小提琴自动添加了 onload 功能，您的代码实际上工作正常：http: [//jsfiddle.net/ZXMUB/5/](http://jsfiddle.net/ZXMUB/5/)

我所做的只是取消注释分配游戏变量的第一行，并`</script>`从 js 窗口中删除结束标记。

您确定在您的实际站点上代码位于 $(document).ready 函数（或类似函数）中并且 jQuery 库被正确加载吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T20:18:44.317

您的代码缺少文档就绪处理程序。更新：

[http://jsfiddle.net/ZXMUB/1/](http://jsfiddle.net/ZXMUB/1/)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-28T20:18:38.953

将您的代码包装在“就绪”函数中，就像这样

```
$(function(){  

 ...

}); 
```

您的代码在加载 jquery 之前执行。

# php - SQL 表中是否可以有一个 SQL 表？（对于动态生成的表格）

> ID：12166890
> 
> 赞同：1
> 
> 时间：2012-08-28T20:17:10.197
> 
> 标签：php, sql, database, database-design, normalization

我有一个表单可以动态生成组中的元素，所以我无法确定每次有人提交表单时我将提交多少内容到数据库。

```
Form
  -name
  -age
  -incident (0)
  -incident description (0)
  -incident (1)
  -incident description (1)
  -incident (2....)
  -incident descritpion (2....) 
```

并且有大约 10 个可能的动态生成的表单元素组，所以我想我会为整个表单制作一张表格，并为动态生成的元素组按顺序制作一张表格。

```
formdata
name varchar(30)
age int(2)
incident0 sql
incdient1 sql 
```

那可能吗？或者除了在我的表中创建一大堆我很少使用的列之外，还有其他方法吗？如果我创建一大堆列，是否会浪费内存，或者如果这些列中提交的数据不多，是否会有影响？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-28T20:24:12.283

您寻求的答案称为**模式规范化**，它是*关系*数据库管理系统的典型特征。Particular 概念称为“一对多”关系，其中您有一个与许多事件相关的“形式”。这是通过为事件设置一个表来实现的，该表中的一列是对表单表中 id 列的数字引用，因此每个事件“知道”它*属于*哪个表单。

```
FORMS
=======
id
name
age

INCIDENTS
============
id
form_id
descrition 
```

然后 SQL 在选择时可以选择使用*连接*子句：

```
SELECT forms.name, incidents.description
FROM incidents
JOIN FORMS ON (incidents.form_id = forms.id) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T20:24:30.843

如果有一天你不想有 10 个事件而是 20 个，你会改变你所有的代码吗？您应该以规范化的方式创建表。因此，您创建了两个表。

第一个表：表格（Form_id、姓名、年龄）

第二个表：事件（Incident_Id、Form_Id、描述）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-29T17:57:15.610

标准 SQL 具有 ROW 类型和 MULTISET 类型。

MULTISET 在几乎所有方面都与 TABLE 相似/相同，尽管它们并不完全相同。

所以是的，标准 SQL 支持由行组成的表的概念，其中有一列（或更多）的值本身就是 MULTISET。

不要问我哪些可用的 SQL 产品有效地支持它 (*)，或者如何与任何给定的 ORM 引擎样本中的这些列进行交互。

(*) 答案很可能是“根本没有”。一个支持这个特性的系统应该也支持 UNNEST 操作符（以及它的相反方向的对应物，它的名字卡在我的大脑和我的键盘之间的某个地方），但即使是像 DB2 这样的引擎似乎也不支持它。

# function - Backbone.js 和 require.js 教程误区

> ID：12166895
> 
> 赞同：0
> 
> 时间：2012-08-28T20:17:35.630
> 
> 标签：function, backbone.js, requirejs

我正在关注[这个](http://arturadib.com/hello-backbonejs/docs/4.html)主干教程和[这个](http://backbonetutorials.com/organizing-backbone-using-modules/)require.js 教程。我正在尝试将它们结合起来。

创建 ItemListView 时，出现错误

```
TypeError: singleItemView is not a function
   model: item 
```

我的代码：

```
define([
  'jquery',
  'underscore',
  'backbone',
  // Pull in the Collection module from above
  'collections/projects',
  'collections/item',
  'models/projects'

], function($, _, Backbone, projectsCollection, singleItemView, itemViewModel){
  var projectListView = Backbone.View.extend({
    el: $("#page"),

....
....

    appendItem: function(item){
      var itemView = singleItemView({
        model: item
      });
      $('ul', this.el).append(itemView.render().el);
    } 
```

我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T01:33:01.083

你可能想要的只是：

```
var itemView = new singleItemView({
    model: item
}); 
```

我不确定 singleItemView 是什么。`collections/item`暗示它是一个集合，而名称 singleItemView 暗示它是一个视图。不管它是什么，它看起来都是一个带有“类”定义的模块，我敢打赌你需要做的就是实例化它。

# python - 如何给扩展模块起不同的名称？

> ID：12166896
> 
> 赞同：2
> 
> 时间：2012-08-28T20:17:40.187
> 
> 标签：python, module, python-2.7

我有一个名为“pkg”的包，其中包含几个用 C++ 编写的扩展模块，它们驻留在名称为“_module1.so”、“_module2.so”等的共享库中。这些可以使用通常的语法导入：

```
import _module1 
```

但是，我希望用户将模块名称视为“mod1”、“mod2”等，以便他们像这样进行导入：

```
import mod1 
```

有没有办法在不重命名共享库的情况下做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T20:20:46.890

如果您不介意在源代码中使用原始模块名称，而只想使用替代名称，则可以使用以下语法：

```
import _module1 as mod1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T20:24:06.473

除了导入别名建议之外，您还可以`mod1`在代码中创建一个文件夹，其中包含一个`__init__.py`文件，其中包含：

```
from _module1 import * 
```

现在doing`import mod1`将运行该`__init__.py`文件，该文件将从中加载所有内容`module_1`并将其放入`mod1`的命名空间中，有效地使`mod1`行为像`_module1`（假设`import *`按预期工作）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T20:24:58.853

我还看到了一个更复杂的方法[`passlib`](http://code.google.com/p/passlib/)。基本上，用户友好的模块使用代理来处理对项目中使用的多个子模块的调度，而不会牺牲可用性。

主模块可能如下所示：

```
from mymodule.registry import _proxy
import sys
sys.modules[__name__] = _proxy 
```

[`_proxy`](http://code.google.com/p/passlib/source/browse/passlib/registry.py)基本上是[代理模式](http://en.wikipedia.org/wiki/Proxy_pattern)的实现，并处理延迟加载等。

如果您不想打扰代理：

```
"""Main module `mod1`"""

import _module1
import sys
sys.modules[__name__] = _module1 
```

# c# - 我如何知道我需要为哪个版本的 .net 框架构建

> ID：12166899
> 
> 赞同：0
> 
> 时间：2012-08-28T20:17:44.287
> 
> 标签：c#, .net, dll, build

我已经收到了一堆 C# 解决方案。服务器上有生产代码，我在本地开发机器上有一个版本。我进行了代码更改，并构建了 dll。当我尝试将 dll 复制到服务器时，它给了我如下错误：

```
"Could not load file or assembly 'myfile.dll' or one of its dependencies. 
This assembly is built by a runtime newer than the currently loaded runtime 
and cannot be loaded." 
```

问题之一是我用于构建 ORM、数据和业务逻辑的项目不在服务器上，而是在我的本地，我可以使用它们来构建 dll，但是当我可以时它没有帮助也不要告诉服务器正在使用什么。您在哪里可以找到它运行的版本以及如何构建以匹配？我知道这是我自己的无知，不知道 .net 框架是如何工作的、不同的版本、如何为正确的框架构建（32 位与 64 位也是一个问题？）并让事情正常工作。我环顾四周，但似乎没有任何地方可以解释这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T20:23:08.747

32 位或 64 位不应该打扰您。**要查找框架版本，您必须在IIS**中查找网站或虚拟目录。

我这里没有 Windows Server，但它是这样的：

1.  打开 IIS 管理工具
2.  找到您的网站或虚拟目录，右键单击并转到属性
3.  应该有一个名为 .Net 的选项卡（或类似的名称）
4.  在此选项卡中，有一个与 IIS 绑定的可用运行时版本的组合。当前是您正在使用的那个。

这些步骤适用于 IIS 6。对于 IIS 7，它基本相同，但他们不称其为“属性”窗口，而是“高级的东西”。

很抱歉没有正确的详细信息，但您可以找到它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T20:28:29.977

要在 vs2k10 中更改项目的目标框架：打开项目属性 -> 应用程序选项卡 -> 目标框架（其组合框与可用版本）

检查/更改服务器上的框架版本（适用于 IIS 7.0 版本）：

1.  打开 IIS 管理器。
2.  单击“应用程序池”节点。
3.  找到您的网站/虚拟目录使用的相应应用程序池（默认情况下有一个“DefaultAppPool”应用程序池）。
4.  右键单击应用程序池，然后选择“高级设置”</li>
5.  应该有“.NET Framework 版本”</li>

# sql-server - 如何从数据库中选择随机行 - 有一个转折点？

> ID：12166900
> 
> 赞同：4
> 
> 时间：2012-08-28T20:17:44.940
> 
> 标签：sql-server, random

假设（高度匿名）：

```
Create Table myTable
(
ID INT PK,
INDEXNUMBER INT,
VERSION INT,
Data VARCHAR(MAX)
) 
```

该表用于存储互斥数据。例如：

```
100 1 1 BOB
217 1 2 JOHN
319 1 3 GEORGE
420 7 1 MARY
415 7 2 SUSAN 
```

在这种情况下，我需要随机选择 BOB、JOHN 或 GEORGE 中的一个和 MARY 或 SUSAN 中的一个。

我对 ID 或`INDEXNUMBER/VERSION`配对感到满意。

如果它有助于考虑，这就像从包含花名册的表格中选择一个曲棍球队的单班：

从 3 个可用中选择 1 个中锋，从 5 个可用中选择 1 个左翼，等等。

我一直在玩`NEWID()`and `MAX/MIN`(Cast `NEWID`to `varchar`first)，但我一直挂断`GROUP BY`. 如果 I `GROUP BY ID`，则 max 一次在单行上运行，产生整个表。

如果我`GROUP BY INDEXNUMBER, VERSION`得到类似的结果（这对是唯一的）。

我需要做的是`GROUP BY INDEXNUMBER`（完全从查询中排除`ID`）但以某种方式检索`VERSION`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T20:30:12.827

按分区`INDEXNUMBER`（我假设您需要每个分区，尽管没有特别说明）并按顺序排序`NEWID()`

```
SELECT ID
FROM (
    SELECT 
        Row_Number() OVER (PARTITION BY INDEXNUMBER ORDER BY NEWID()) Sort,
        ID, 
        Data
    FROM myTable
) s
WHERE Sort = 1 
```

[Sql 小提琴](http://sqlfiddle.com/#!3/87806/2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T21:29:58.517

解决方案很简单，将数据与临时表连接起来。请看我的示例代码：

```
--drop temp table if exists...
if OBJECT_ID('tempdb..#tempData') is not null
begin
 drop table #tempData
end
go

--select distinct INDEXNUMBER and fill temp table...
select distinct INDEXNUMBER into #tempData
from myTable
go

--join temp table with actual data to get randon rows...
select T.INDEXNUMBER,
(
  select top 1 VERSION 
  from myTable where 
  INDEXNUMBER=T.INDEXNUMBER 
  order by NEWID()
) 'Version'
from #tempData T 
```

此语法适用于 SQL Server。快乐编码！

# postgresql - 引用 NEW 的行的 Postgres 函数 NULL 值

> ID：12166902
> 
> 赞同：0
> 
> 时间：2012-08-28T20:17:52.507
> 
> 标签：postgresql, triggers, null, plpgsql

我有一个触发器设置在为表 A 更新或插入一行后触发。还有一个表 B 引用表 A，但还有另一个我想分析的列，一个布尔值（所以这个函数只能使用上`UPDATE`）。

当我尝试访问该列时：

```
SELECT col1 FROM B WHERE B.aID = NEW.ID; 
```

此列`col1`始终为 NULL。

为什么是这样？如何在更新时获取布尔值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T07:02:58.367

很可能您遇到了命名冲突。参数名称（`IN`和`OUT`参数）在函数体中（几乎）任何地方都可见，并且优先于不合格的列名。您是否在函数中声明`col1`为变量？

为避免冲突，请对列名进行**表限定：**

```
SELECT b.col1 FROM tableb b WHERE b.aID = NEW.ID; 
```

在任何情况下，这都是很好的做法。

给变量名加上前缀也是一种好习惯，这样它们通常不会与表列冲突。喜欢：`_col1`。

# android - 什么是根视图？

> ID：12166905
> 
> 赞同：6
> 
> 时间：2012-08-28T20:18:07.307
> 
> 标签：android, hierarchy

您好，我是 Android 新手，我已经使用默认模板**Master detail flow**打开了一个项目，但我不知道什么是**rootView**。我在 developer.android.com 上搜索过，但我不太明白...

因此，如果有人可以清楚地向我解释这件事在做什么，那将对我有很大帮助。

谢谢 ！

编辑：有代码！

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    if (getArguments().containsKey(ARG_ITEM_ID)) {
        mItem = DummyContent.ITEM_MAP.get(getArguments().getString(ARG_ITEM_ID));
    }
}

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    View rootView = inflater.inflate(R.layout.fragment_item_detail, container, false);
    if (mItem != null) {
        mLinearLayout = (LinearLayout)findViewById(R.id.layout); 
    }
    return rootView;
} 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-08-28T20:52:57.017

RootView 是放置所有其他视图的视图。它就像树结构中的根节点，它是所有子节点的父节点。

例如，您的布局中有多个按钮，它们放置在 LinearLayout 中。然后 LinearLayout 被称为 RootView 因为它在结构中的位置最高，所有东西都必须放在里面。

希望这可以消除您的疑问。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T20:29:08.153

这是一个视图，通常是托管所有其他视图的视图组。

[这](http://developer.android.com/guide/topics/ui/overview.html)是布局如何在 Android 上工作的一个很好的起点，其中有一个[LinearLayout](http://developer.android.com/guide/topics/ui/layout/linear.html)作为根元素的示例。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T20:21:43.343

显示的元素按树形层次结构组织。例如，如果您将 Button 放在 Linear Layout 容器中，则 LinearLayout 是所述 Button 的父级。没有“高于”的最高父级是“根”。同样适用于文件夹和文件——你得到父文件夹，还有根文件夹——在层次结构的最顶端

# android - 映射 TouchOverlay 和 ItemizedOverlay

> ID：12166906
> 
> 赞同：0
> 
> 时间：2012-08-28T20:18:16.917
> 
> 标签：android, google-maps

我有一个 MapView，`ItemizedOverlay`上面有一个显示标记。当点击标记时，此覆盖也会覆盖`onTap`以执行操作。

我的地图还包括一个法线，当触摸地图上的其他任何地方时`Overlay`，它会覆盖以执行操作。`onTouchEvent`

但是，当用户点击标记时，会调用`onTouchEvent`from the normal`Overlay`以及`onTap`from the `ItemizedOverlay`。

`onTouchEvent`所以我的问题是：当标记被点击时，有没有办法让未调用（或忽略）？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T20:22:42.053

是的，有一个非常简单的解决方案。答案源于 Java 继承的工作方式。基本上，ItemizedOverlay 扩展了 Overlay，所以您需要做的就是不要在 onTap() 的 itemizedOverlay 覆盖中调用 super.onTap() 方法。据我所知，应该这样做。如果它不起作用，请告诉我，我将为您提供替代解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T20:32:49.393

进行`ItemizedOverlay`上述操作`Overlay`，让您的`onTap`回报为假。

# javascript - MVC3 Ajax ActionLink 在使用 TempData 完成时调用 javascript 函数

> ID：12166915
> 
> 赞同：2
> 
> 时间：2012-08-28T20:18:50.153
> 
> 标签：javascript, ajax, json, asp.net-mvc-3

我一直在尝试获取通知以显示用户何时在我的控制器中调用操作。这适用于我的大多数操作，但是我使用 an`Ajax.ActionLink`删除我的项目，因此页面没有刷新，javascript 函数没有被调用，因此通知没有显示。

在我的`_Layout`页面中，我有如下所示的通知系统：

```
<script type="text/javascript">
    //Used to display and close the system notifications
    $(document).ready(function notify() {
        $("#NotificationBox").show("slide", { direction: "down" }, 1000);
        if ($("#NotificationAutoHide").val() == "true") {
            $("#NotificationBox").delay(5000).hide("slide", { direction: "down" }, 1000);
        }
    });
</script>

<div id="NotificationDiv">
    @if (TempData["Notification"] != null)
    { 
        @Html.Hidden("NotificationAutoHide", TempData["NotificationAutoHide"])
        <div id="NotificationBox" class="@TempData["NotificationCSS"]" style="display: none">
             @TempData["Notification"]
        </div>
    }
</div> 
```

在我的`Index`视图（使用布局页面）中，我在控制器`Ajax ActionLink`中调用了我的`Delete`操作，它还填充了所需的`TempData`属性。

```
@Ajax.ActionLink("Delete", "Delete", "MyController",
    new { id = item.UserID },
    new AjaxOptions {
        HttpMethod = "Delete",
        OnBegin = "JSONDeleteFile_OnBegin",
        OnComplete = "notify"
    },
    new { @class = "delete-link" }) 
```

我认为通过从选项中添加对`notify`函数的调用然后一切都会起作用，但不幸的是这似乎不起作用。`OnComplete``ActionLink`

我已经看到一些示例建议`TempData`通过我的控制器发送回来`JsonResult`，但是我不确定如何将其绑定到我现有的代码中。（我的控制器已经返回一个 JsonResult 对象用于其他用途）

谁能帮我`TempData`从 Ajax 调用中恢复过来并执行我的通知系统？

非常感谢你花时间陪伴。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T20:57:39.340

由于 TempData 是服务器端代码，我认为这是不可能的。您应该通过 JsonResult 返回此信息。

例子：

```
公共 JsonResult 删除（int id）
{
  //做东西
  return Json(new {param1 = "你需要什么", param2 = "更多信息"}, JsonRequestBehavior.AllowGet);
}

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T07:41:46.047

确保您的`notify`函数是公开可见的，以便您可以从 AJAX 成功回调中调用它：

```
<script type="text/javascript">
    function notify() {
        $("#NotificationBox").show("slide", { direction: "down" }, 1000);
        if ($("#NotificationAutoHide").val() == "true") {
            $("#NotificationBox").delay(5000).hide("slide", { direction: "down" }, 1000);
        }
    }

    $(document).ready(notify);
</script> 
```

您声明`notify`函数的方式使得无法从外部范围调用此函数：

```
$(document).ready(function notify() { ... }); 
```

我什至不知道这是否是有效的 javascript 语法。没见过有人用。

# javascript - CKEditor - 不显示

> ID：12166916
> 
> 赞同：5
> 
> 时间：2012-08-28T20:18:50.883
> 
> 标签：javascript, ckeditor

我正在尝试将 ckeditor 集成到我用 java 编写的带有 play2 的网站中。

现在我下载了 javascript 文件并阅读了示例。

我认为重要的部分是 ckeditor.js

```
<script type="text/javascript" src="/assets/javascripts/ckeditor.js"></script> 
```

我还使用了样本中完全相同的形式

```
<form action="sample_posteddata.php" method="post">
        <label for="editor1">
            CKEditor using the <code>docprops</code> plugin and working in the Full Page mode:</label>
        <textarea cols="80" id="editor1" name="editor1" rows="10">&lt;html&gt;&lt;head&gt;&lt;title&gt;CKEditor Sample&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;p&gt;This is some &lt;strong&gt;sample text&lt;/strong&gt;. You are using &lt;a href="http://ckeditor.com/"&gt;CKEditor&lt;/a&gt;.&lt;/p&gt;&lt;/body&gt;&lt;/html&gt;</textarea>
        <script type="text/javascript">
        //<![CDATA[

            CKEDITOR.replace( 'editor1',
                {
                    fullPage : true,
                    extraPlugins : 'docprops'
                });

        //]]>
        </script>
    <p>
        <input type="submit" value="Submit" />
    </p>
</form> 
```

但它不起作用，它只是呈现一个普通的文本区域。我正在使用 twitter bootstrap + jquery 1.7.1。

也许我忽略了一个重要的部分？

![在此处输入图像描述](../Images/2e6da91de92a47a7e2a01b409ac431eb.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-07-13T05:50:01.697

你只需要使用这个脚本

```
<script type="text/javascript">
    CKEDITOR.replace("editor1");
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-18T14:24:25.497

如果您在设置 ckeditor 时遇到问题，可能是您的页面加载缓慢。显示您需要调用 CKEDITOR.replace("editor1")。当你使用backbone.js 时，你会遇到这个问题。希望以下的旅行对你有所帮助。

代码

```
 jQuery(document).ready(function() {
  CKEDITOR.replace("editor1")
 }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-25T05:13:32.693

如果 ckeditor.js 文件的源路径不正确，那么您可能会收到错误“CKEDITOR not defined”。试试这个.....

```
 <script type="text/javascript" src="../assets/javascripts/ckeditor.js"></script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-07T08:39:09.667

我遇到了类似的问题，`CKEDITOR.basePath`如果您在控制台中查看并看到类似的错误，则它与属性有关`Uncaught TypeError: Cannot set property 'dir' of undefined`，这意味着您必须将 basePath 属性设置为正确的位置...。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-03-08T14:38:46.117

我找到了完全相同的条件，看起来元素需要具有 id 属性才能工作

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-10-04T23:55:32.417

我认为您需要的不仅仅是 ckeditor.js。也添加这些资源，它应该可以工作。

```
<link rel="stylesheet" href="assets/css/ckeditor/contents.css" rel="stylesheet">
<link rel="stylesheet" href="assets/css/ckeditor/skins/boostrap/editor.css" rel="stylesheet">
<link rel="stylesheet" href="assets/css/ckeditor/skins/boostrap/editor_gecko.css" rel="stylesheet">
<script src="assets/js/ckeditor/ckeditor.js" type="text/javascript"></script>
<script src="assets/js/ckeditor/styles.js" type="text/javascript"></script>
<script src="assets/js/ckeditor/config.js" type="text/javascript"></script>
<script src="assets/js/ckeditor/lang/en.js" type="text/javascript"></script> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-07-20T08:14:05.110

我得到了解决方案，它在您的视图的控制器内工作，您应该在控制器代码中发布您的脚本代码

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-03-16T11:49:06.897

当仅包含 ckeditor.js 不起作用时，这几乎是您所需要的：

```
<script>
            var CKEDITOR_BASEPATH = window.location.origin + '/.../CKEditor/';
</script> 
```

它在此处的文档中进行了描述：[http ://docs.ckeditor.com/#!/guide/dev_basepath](http://docs.ckeditor.com/#!/guide/dev_basepath)

当我把它放在我的html的头部时，这解决了我的问题。

# android - Android：如何使用 ADB shell 跟踪应用程序 am start

> ID：12166917
> 
> 赞同：8
> 
> 时间：2012-08-28T20:18:52.767
> 
> 标签：android, shell, runtime, adb, strace

我需要有关在 SDK 模拟器中跟踪 Android 应用程序的帮助。

这是我的设置：

我有一个 Android SDK 模拟器，运行连接到模拟器的 Android API 4.03 ADB shell。

我可以使用 ADB install filename.apk 安装 APK

我能够使用 ADB shell 运行应用程序`am start -a android.intent.action.Main -n com.akproduction.notepad/com.akproduction.notepad.NoteList`

我尝试使用（ADB shell）进行 strace，`strace am start -a android.intent.action.Main -n com.akproduction.notepad/com.akproduction.notepad.NoteList`但我什么也没得到！

您如何跟踪 Android 应用程序的运行时行为及其安装？

（PS 测试应用程序位于[此处](http://www.appbrain.com/app/ak-notepad/com.akproduction.notepad)。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-28T20:27:43.157

“am start”命令不会直接运行您的应用程序；它只是告诉 Android 做任何必要的事情，在你的例子中，启动一个特定的活动。

该`strace`命令通常用作 in`strace commandname command args`并启动`commandname`- 很简单，但在这个 Android 用例中，没有帮助。但是，strace 有一个`-p`对您有帮助的选项：`strace -p <process id>`将让您开始使用指定的 id 跟踪进程。

如果您`ps`在 Android 系统上键入，您可以使用名称找到进程`com.akproduction.notepad`（可能；默认情况下，进程以其 Android 包命名，但可以在清单中更改它）。然后你可以开始追踪它，无论它在哪里。

如果您*需要*在流程的早期捕获事物，您需要修改代码以使其延迟，直到您准备好跟踪它，或者您至少需要在开始之前让流程运行活动。第二个选项通常与启动活动一样简单，然后使用后退按钮，然后准备好跟踪，然后再次启动活动——但这始终是特定于应用程序的代码。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-10-28T14:29:21.877

Android 应用程序实际上是通过 fork zygote 进程启动的，因此您可以通过跟踪 zygote 进程并跟踪子进程（'-f'）来跟踪应用程序初始化：

```
setenforce 0  # In Android 4.3 and later, if SELinux is enabled, strace will fail with "strace: wait: Permission denied"

set `ps | grep zygote` ; strace -p $2 -f -tt -T -s 500 -o /sdcard/strace.txt 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-06-13T14:18:07.543

这是我今天用来解决这个问题的一个丑陋的单线黑客。假设程序有一些已知的名称，只要它一出现就尝试附加到该进程。在此示例中，我对所有打开调用感兴趣。

```
while true; do
  while ! ps  | grep -q -i MyProgram; do :; done;
  ps | grep -i MyProgram | while read a b c; do
   strace -e open -f -p $b;
  done;
done 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-08-19T20:48:08.147

这是一个单行程序，它在启动应用程序后立即[获取进程 ID](https://stackoverflow.com/a/21320328)并将其通过管道传输到 strace 。`am`您不会执行前几条指令，但它足够早地满足我的需要。

`am start -n com.packagename.here\.ActivityName && set `ps | grep com.packagename.here` && strace -p $2`

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-09-23T22:14:11.843

我建议在启动您的应用程序之前在 zygote 进程上启动 strace 并遵循分叉。Zygote 进程是 Android 中每个新进程的主要进程，包括您的应用程序。然后，您可能希望根据您感兴趣的 PID 过滤日志。示例：

> ps合子

得到zygote PID，然后

> strace -f -p < zygote_PID >

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-10-09T03:03:25.597

我找到了一个棘手的方法来做到这一点，并保证所有的系统调用都会被捕获。即使应用程序不可调试，也可以这样做：

*   设置活动管理器`am`（`-w`
*   手动启动应用程序（您只需单击其图标上的屏幕或调用它`am start`
*   在应用程序停止的情况下，获取其 PID
*   得到它的 PID，调用 strace 来跟踪这个进程
*   最后，附加调试器以便开始执行。

以下是步骤：

```
adb shell # shell into the device
am set-debug-app -w com.package.name # put app to debug mode
am start com.package.name/com.path.to.MainActivity # start the app
ps -A | grep com.package.name # this will show you the PID
strace -p <PID> > appoutput.txt 2> appstrace.txt 
# strace the program and record its output and strace in txt files 
```

现在只需附加调试器并享受，例如，您可以在 Android Studio 或 Eclipse 中执行此操作。从这一点开始执行将开始，您将能够从第一行代码开始跟踪它。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-11-20T01:16:00.630

如果您具有 root 访问权限或设备在未启用 SELinux 的情况下运行，那么您可以按照 Android 站点的方式进行操作：

设置设备，以便您可以运行 strace。您需要成为 root，禁用 SELinux，然后重新启动运行时以删除 seccomp 过滤器，否则会阻止 strace 运行： adb root adb shell setenforce 0 adb shell stop adb shell start

为 strace 日志设置一个全局可写目录，因为 strace 将在应用程序的 uid 下运行： adb shell mkdir -m 777 /data/local/tmp/strace

选择要跟踪的进程并启动它： adb shell setprop wrap.com.android.calendar '"logwrapper strace -f -o /data/local/tmp/strace/strace.com.android.calendar.txt"'

正常启动该过程。

[https://source.android.com/devices/tech/debug/strace#app-strace](https://source.android.com/devices/tech/debug/strace#app-strace)

# database-design - 通过添加更多字段或另一个链接表或完全不同的东西来重新设计现有表？

> ID：12166929
> 
> 赞同：1
> 
> 时间：2012-08-28T20:19:50.770
> 
> 标签：database-design

我有一个表结构，其中包含`id`、`user`和十几个其他列。我必须让我的用户选择他们希望在哪一天接收通知，我无法决定如何去做。

我不想在现有表中再添加 7 列，因为这似乎是一种不好的做法。

我想添加另一个表，然后将这两个表链接在一起，但这将包括对现有代码*的大量返工*（并且我必须交付此解决方案的速度是一个重要因素）。

例如，我还想在现有表中添加一列，该表将包含 7 个字符串，例如`1000100`，这基本上意味着在*周一*和*周五*接受通知（你明白了 - 1 或 0 在数组确定那天我是否应该将通知发送到该电子邮件。

你能建议你做什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T10:37:11.627

您应该添加另一个表。如果添加一个简单的表需要做很多工作，那么你做错了什么。

```
create table user_notification_preference (
  user_id bigint not null references user (id),
  day_of_week smallint not null check (day_of_week between 0 and 6),

  primary key (user_id, day_of_week)
); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T20:24:52.647

不要这样做：

> 例如，我还想过在现有表中仅添加一列，该表将包含 7 个字符串，例如 1000100，这基本上意味着在周一和周五接受通知（你明白了 - 1 或 0 在该数组确定那天我是否应该将通知发送到该电子邮件。

如果您发现自己在列中放置逻辑或代码有问题，那么您在关系数据库环境而不是 C# 程序中工作。

您只需引入一个具有用户 ID 的新表，以及他们计划获得通知的日期或日期 - 简单的一对多关系。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T20:24:39.760

**编辑**

以下是我的原始答案，我现在意识到它有多糟糕。不要遵循这种模式。我会删除它，但我已经在很多地方看到它，它一定是一种常见的反模式。我正在保持它，并警告不要使用它，以便未来的访问者可以像我现在所做的那样看到为什么这很糟糕。

自从 Neil McGuinan 对此答案发表评论以来，我读过的所有专家建议都表明***他的***方法更好。这是一篇解释原因的好文章：http: [//geekswithblogs.net/darrengosbell/archive/2006/03/12/KVPsInDatabaseDesign.aspx](http://geekswithblogs.net/darrengosbell/archive/2006/03/12/KVPsInDatabaseDesign.aspx)

我们的解决方案“为我们工作”的原因是我们有一个过程，它可以旋转 KVP 数据以生成具有您期望的结构的表 - 属性的可能列。如果我们在设置时知道这一点，并且只是创建了一个包含属性列的单独表，那么这是可以避免的不必要的开销。你不想走我们走的路。很乱。

**/编辑**

* * *

我会设置一个名为 Attributes 的新表，然后是一个名为 CustomerAttributes 的中间（外键）表。然后，您不必再次添加列来为您的客户添加属性。

**属性：**

```
AttributeId   AttributeName
-----------------------------
1             PreferredNotificationDayOfMonth
2             FavoriteColor
etc... 
```

**客户属性**

```
CustomerId   AttributeId   AttributeValue
1            1             5
1            2             Blue
2            1             1
2            2             Red 
```

推理：（外行的描述）更改列比将记录添加到数据库表中风险更大，因此如果您可以将属性转换为行而不是列，则[可以减少将来的维护麻烦](http://en.wikipedia.org/wiki/Database_normalization#Minimize_redesign_when_extending_the_database_structure)。

# actionscript-3 - 如果我只想在空格处拆分字符串怎么办？

> ID：12166930
> 
> 赞同：0
> 
> 时间：2012-08-28T20:19:51.097
> 
> 标签：actionscript-3, textfield

不像我对这段代码所做的任何部分（包括单词的中间）：

```
 var answer:TextField = new TextField();
    var textFormat:TextFormat = new TextFormat();
    textFormat.size=15;
    textFormat.color=0x7E7E7E;
    textFormat.font="Vrinda";
    answer.defaultTextFormat=textFormat;
    answer.selectable=false;
    answer.text=currentQuestion.answers[k];
    answer.width=600;
    answer.x=54;
    answer.y=110+k*(40)+addPixels;
    answers.push(answer);
    answer.multiline=true;
    answer.wordWrap = true;
    answer.autoSize = TextFieldAutoSize.LEFT;
    answer.addEventListener(MouseEvent.CLICK, selectViaText)
    addChild(answer); 
```

我说的是新线。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T13:48:07.663

你不需要`textfield.multiline=true;`with`wordWrap`和`autoSize`

这对我来说很好，产生 400 宽度的环绕文本：

```
import flash.text.TextField;

var t:TextField = addChild(new TextField()) as TextField;
t.wordWrap = true;
t.width = 400;
t.autoSize = TextFieldAutoSize.LEFT;
t.text = "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Ut varius eros id massa auctor tempus. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Suspendisse fermentum aliquet consequat. Nulla non est massa, ut viverra nisi. Cras ligula risus, dignissim non semper vitae, cursus sit amet sem. Vivamus bibendum porta vestibulum. Etiam porttitor elit eu turpis cursus lobortis. Mauris vestibulum pulvinar varius. Maecenas non sodales erat. Praesent id augue mi, nec laoreet diam. Fusce ultrices quam varius enim ultricies nec sagittis risus laoreet. Vestibulum ullamcorper feugiat varius. "; 
```

呈现为：

![包装示例](../Images/bc65e0b04cf250a9d777aa25cc32ff6b.png)

...这确实只包装在空格上。

# .htaccess - CakePHP 站点使用 .htaccess 限制对某些文件的访问

> ID：12166933
> 
> 赞同：1
> 
> 时间：2012-08-28T20:19:55.857
> 
> 标签：.htaccess, cakephp, cakephp-2.0, restriction

我的 CakePHP 2 网站有以下 .htaccess 文件。
我把它放在 webroot 文件夹下。

每天都有一些机器人尝试以 wordpress 网站的身份登录我的网站。所以我需要限制一些文件名（wp-login.php）或一些目录，如管理员或缓存。

*   但是当我进入**example.com/wp-login.php**时，我得到“错误：发生内部错误”。CakePHP 异常页面。
*   当我取消注释“目录/管理员”或“目录/缓存”时，每个页面都会出现 403 错误。

如何限制该文件和文件夹？

```
<FilesMatch "\.(htaccess|htpasswd|ini|phps|fla|psd|log|sh)$">
 Order allow,Deny
 Deny from all
</FilesMatch>

<Files wp-login.php>
  Order allow,deny
  Deny from all
</Files>

#<Directory /Administrator>
#    Order allow,deny
#    Deny from all
#<Directory>

#<Directory /Cache>
#    Order allow,deny
#    Deny from all
#<Directory>

<IfModule mod_rewrite.c>
    RewriteEngine On

    RewriteCond %{HTTP_HOST} ^www\.(.*)$ [NC]
    RewriteRule ^(.*)$ http://%1/$1 [R=301,L]

    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteRule ^(.*)$ index.php [QSA,L]
</IfModule>

#set file cache maximum age in seconds
<ifmodule mod_headers.c>
    <filesmatch "\.(ico|flv|jpg|jpeg|png|gif|css|swf)$">
        Header set Cache-Control "max-age=518400, public"
    </filesmatch>
    <filesmatch "\.(js|css)$">
        Header set Cache-Control "max-age=604800, public"
    </filesmatch>
</ifmodule>

# gzip files
<ifModule mod_gzip.c>
  mod_gzip_on Yes
  mod_gzip_dechunk Yes
  mod_gzip_item_include file \.(html?|txt|css|js|php|pl)$
  mod_gzip_item_include handler ^cgi-script$
  mod_gzip_item_include mime ^text/.*
  mod_gzip_item_include mime ^application/x-javascript.*
  mod_gzip_item_include mime ^application/javascript.*
  mod_gzip_item_exclude mime ^image/.*
  mod_gzip_item_exclude rspheader ^Content-Encoding:.*gzip.*
</ifModule>

# gzip files
<ifModule mod_deflate.c>
  <filesMatch "\.(css|js|x?html?|php)$">
    SetOutputFilter DEFLATE
  </filesMatch>
</ifModule> 
```

编辑：我将重定向代码更改为此。目录问题已解决，但 CakePHP 风格的间隔服务器错误异常仍然存在。

```
<FilesMatch "\.(htaccess|htpasswd|ini|phps|fla|psd|log|sh)$">
Order allow,Deny
Deny from all
</FilesMatch>

<Files "wp-login.php">
  Order allow,deny
  Deny from all
</Files>

<IfModule mod_rewrite.c>
    RewriteEngine On

    RewriteCond %{HTTP_HOST} ^www\.(.*)$ [NC]
    RewriteRule ^(.*)$ http://%1/$1 [R=301,L]

    RewriteRule ^/?(administrator|cache|undefined) - [L,F,NC]

    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteRule ^(.*)$ index.php [QSA,L]
</IfModule> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T20:31:13.877

您不能使用`<Directory>`htaccess 文件中的块。我不确定为什么 wp-login.php 会出现 500 错误，但您需要在声明中添加一些引号：

```
<Files "wp-login.php">
  Order allow,deny
  Deny from all
</Files> 
```

您可以将单个 htaccess 文件放在以下目录`Administrator`中`Cache`：

```
Order allow,deny
Deny from all 
```

或者你可以使用类似重写规则的东西：

```
RewriteRule ^/?(Administrator|Cache) - [L,F] 
```

# java - J2ME 按钮命令不起作用

> ID：12166934
> 
> 赞同：1
> 
> 时间：2012-08-28T20:20:02.630
> 
> 标签：java, java-me, midp, lcdui

我目前正在开发一个 j2me 应用程序，我很难处理命令按钮。有人可以帮帮我吗。该按钮应该以第二种形式定向，但是当我单击它时，它不起作用。这是我的代码：

```
 import javax.microedition.midlet .*; 
        import javax.microedition.lcdui .*; 
        import javax.microedition.lcdui.StringItem;
        import javax.microedition.lcdui.TextField;
        import javax.microedition.lcdui.DateField;
        import javax.microedition.lcdui.Command;
        import javax.microedition.lcdui.Alert;
        import javax.microedition.pim.PIM;
        import javax.microedition.pim.PIMItem;
        import javax.microedition.pim.PIMException;
        import java.util.Date;
        import java.util.Enumeration;
        import javax.microedition.lcdui.Choice;
        import javax.microedition.lcdui.List;
        import javax.microedition.pim.ToDo;
        import javax.microedition.pim.ToDoList;
        import javax.microedition.lcdui.Displayable;
        import javax.microedition.lcdui.Display;
        import javax.microedition.lcdui.Form;
        import javax.microedition.lcdui.CommandListener;

        public class MainMidlet extends MIDlet implements CommandListener, 
        ItemCommandListener { 

        private Form aform, bform, addToDoForm; 
        private Command okCommand; 
        private Command exitCommand;
        private Command cmdAddTodo;
        private Command cmdretrieveTodo;
        private Command cmdExit;
        private Command backCommand;
        private Command hllinkCommand; 
        private Command b1Command, b2Command; 
        private Display aDisplay; 
        private StringItem hlstringItem,hlstringItem2; 
        private StringItem b1stringItem, b2stringItem, b1stringItem2, b2stringItem2;   
        private Alert hlAlert; 
        private Alert b1Alert, b2Alert;
        private TextField summaryField;
        // Date field for Due data of ToDo.
        private DateField dueDateField;
        // Date field for end data of ToDo.
        private TextField noteField;
        // Text field to set priority of ToDo.
        private TextField priorityField;
        private List listTodos;
        private ToDoList todoList;
        private ToDo todo;

        public MainMidlet () { 
        okCommand = new Command ( "OK", Command.OK, 1); 
        exitCommand = new Command ( "EXIT", Command.EXIT, 1);
        backCommand = new Command ( "BACK", Command.BACK, 1);
        hllinkCommand = new Command ( "LINK", Command.ITEM, 2); 
        b1Command = new Command ( "BUTTON", Command.ITEM, 2);
        b2Command = new Command ( "BUTTON", Command.ITEM, 2);

        aform = new Form ( "CyberMe");

        // if click hyperlink "here", display anAlert 
        hlstringItem = new StringItem (null, "here", Item.HYPERLINK); 
        hlstringItem.setItemCommandListener (this); 
        hlstringItem.setDefaultCommand (hllinkCommand); 

        b1stringItem = new StringItem (null, "Make ToDo", Item.BUTTON); 
        b1stringItem.setItemCommandListener (this); 
        b1stringItem.setDefaultCommand (b1Command);

        b2stringItem = new StringItem (null, "Set Alarm", Item.BUTTON); 
        b2stringItem.setItemCommandListener (this); 
        b2stringItem.setDefaultCommand (b2Command);

        /*hlstringItem2 = new StringItem (null, "here", Item.HYPERLINK); 
        hlstringItem2.setItemCommandListener (this); 
        hlstringItem2.setDefaultCommand (hllinkCommand); 

        b1stringItem2 = new StringItem (null, "Make ToDo", Item.BUTTON); 
        b1stringItem2.setItemCommandListener (this); 
        b1stringItem2.setDefaultCommand (b1Command);

        b2stringItem2 = new StringItem (null, "Set Alarm", Item.BUTTON); 
        b2stringItem2.setItemCommandListener (this); 
        b2stringItem2.setDefaultCommand (b2Command);*/

        hlAlert = new Alert ( "Item.HYPERLINK", "You Can Call Me 800-8101234" 
        , null, AlertType.INFO); 
        b1Alert = new Alert ( "Item.Button", "You click ToDo!" 
        , null, AlertType.INFO);
        //b2Alert = new Alert ( "Item.Button", "You click Alarm!" 
        //, null, AlertType.INFO);

        aform.append ( "What do you want to do?"); 
        aform.append (hlstringItem); 
        aform.append (b1stringItem);
        aform.append (b2stringItem);

        aform.addCommand (okCommand); 
        aform.addCommand (exitCommand); 
        aform.setCommandListener (this); 

        /*bform.append ( "What do you want to do?"); 
        bform.append (hlstringItem2); 
        bform.append (b1stringItem2);
        bform.append (b2stringItem2);

        bform.addCommand (okCommand); 
        bform.addCommand (backCommand); 
        bform.setCommandListener (this); */

        }

        /*public void SecondPage(){
        if(checkPIMSupport() == false) {
        exitMIDlet();
        }

        setComponents();
        }

        /**
        * Initializes components of MIDlet.
        */
        public void setComponents() {

        aDisplay = Display.getDisplay(this);

        // Create form for adding ToDo.
        addToDoForm = new Form("ToDo");

        // Add commands to form and set listener for it.
        cmdAddTodo = new Command("Add Todo", Command.SCREEN, 0);
        cmdretrieveTodo = new Command("Retrieve All Todos", Command.SCREEN, 0);
        addToDoForm.addCommand(cmdAddTodo);
        addToDoForm.addCommand(cmdretrieveTodo);

        cmdExit = new Command("Exit", Command.EXIT, 0);
        addToDoForm.addCommand(cmdExit);

        addToDoForm.setCommandListener(this);
        listTodos = new List("ToDo list", Choice.IMPLICIT);
        backCommand =new Command("Back", Command.BACK, 0);
        listTodos.addCommand(backCommand);
        listTodos.setCommandListener(this);

        try {

        StringBuffer supported = new StringBuffer();

        // Get list of ToDos.
        todoList = (ToDoList)PIM.getInstance().openPIMList(
        PIM.TODO_LIST, PIM.READ_WRITE);

        // Create controls based on supported fields for ToDo.
        if(todoList.isSupportedField(ToDo.SUMMARY) == true) {
        summaryField = new TextField("Summary", null, 20,
                                TextField.ANY);
        addToDoForm.append(summaryField);
        } 

        else {

        supported.append("Summary field\n");
        removeCommand();

        }

        if(todoList.isSupportedField(ToDo.DUE) == true) {
        dueDateField = new DateField("Date",
                                DateField.DATE_TIME);
        dueDateField.setDate(new Date());
        addToDoForm.append(dueDateField);

        }

        else {

        supported.append("Due date field\n");
        removeCommand();

        }

        if(todoList.isSupportedField(ToDo.NOTE) == true) {
        noteField = new TextField("Information", null, 20, TextField.ANY);
        addToDoForm.append(noteField);
        }

        else {

        supported.append("Note field\n");
        }

        if(todoList.isSupportedField(ToDo.PRIORITY) == true) {
        priorityField = new TextField("Priority", null, 20,
                                TextField.NUMERIC);

        addToDoForm.append(priorityField);
        }
        else {

        supported.append("Priority field\n");
        removeCommand();
        }

        if(supported.length()!=0){

            StringItem si = new StringItem("ToDo field not supported", "");     
            si.setText(supported.toString());
            addToDoForm.append(si);
        }

        } catch(PIMException pimExc) {
        // TODO: Handle error on working with PIM.
        }
        catch(SecurityException secExc) {
        // TODO: Handle error on access to PIM.
        }
        catch(Exception exc) {
        // If unknown error was caught, show it to the end user.
        showAlert("Info", exc.toString());  
        }

        }

        // Remove the command for adding ToDos
        public void removeCommand(){
        addToDoForm.removeCommand(cmdAddTodo);
        }

        public void listToDos() {

        Enumeration todos = null;

        try {
        todoList = (ToDoList) PIM.getInstance().openPIMList(PIM.TODO_LIST, PIM.READ_WRITE);

        } catch (PIMException e) {
        // Cannot open ToDo list
        showAlert("Info", "Failed to open a ToDo list: "+e.toString());  
        return;
        } catch (SecurityException e) {
        // User rejects application's request for reading ToDo list
        showAlert("Info", "Reading ToDo List rejected: "+e.toString());  
        return;
        }

        try {
        // Get the enumeration of all ToDo elements
        todos = todoList.items();

        } catch (PIMException e) {
        // Failed to retrieve elements
        showAlert("Info", "This application cannot retrieve ToDos: "+e.toString());  
        }

        if (listTodos.size() > 0) {
        listTodos.deleteAll();
        }

        while (todos.hasMoreElements()) {
        todo =  (ToDo) todos.nextElement();
        String todoInfo = null;
        try {
        todoInfo = todo.getString(ToDo.SUMMARY, PIMItem.ATTR_NONE);

        } catch (Exception ex) {
        showAlert("Info",ex.getMessage());
        continue;
        }
        if (todoInfo != null) {
        listTodos.append(todoInfo, null);
        }          
        }
        }

        /**
        * Checks PIM support.
        * @return - true if PIM is supported, false otherwise.
        */

        private boolean checkPIMSupport() {
        String propValue = System.getProperty("microedition.pim.version");
        if(propValue != null) {
        return true;
        } else {
        return false;
        }
        }

        private void getToDoList() {
        listToDos();
        aDisplay.setCurrent(listTodos);
        }

        /**
        * Adds ToDo to list of ToDos.
        * Gets data for ToDo from addToDoForm controls.
        */
        private void addToDo() {

        try {

        // Get list of ToDos.
        todoList = (ToDoList)PIM.getInstance().openPIMList(
        PIM.TODO_LIST, PIM.READ_WRITE);

        // Create new ToDo.
        todo = todoList.createToDo();

        // Get data from controls
        if(todoList.isSupportedField(ToDo.SUMMARY) == true) {

        if(summaryField.size()==0){

        showAlert("Info", "Summary missing, please enter a summary");
        return;
        }
        String summary =summaryField.getString();
        todo.addString(ToDo.SUMMARY, PIMItem.ATTR_NONE, summary);
        } else {
        // At least summary must be supported.
        closeToDoList();
        showAlert("Info", "Summary field for ToDo is not supported");
        }

        if(todoList.isSupportedField(ToDo.DUE) == true) {
        long startDate = dueDateField.getDate().getTime();
        todo.addDate(ToDo.DUE, PIMItem.ATTR_NONE, startDate);
        }   

        if(todoList.isSupportedField(ToDo.NOTE) == true) {
        String note = noteField.getString();
        todo.addString(ToDo.NOTE, PIMItem.ATTR_NONE, note);
        }

        if(todoList.isSupportedField(ToDo.PRIORITY) == true) {

        if(priorityField.size()==0){

        showAlert("Info", "Priority is missing, please enter a priority");
        return;
        }

        else {

            String  location = priorityField.getString();
            int i=Integer.parseInt(location);              

            if(i > 9){

            showAlert("Info","Priority exceeded, please enter a priority between 0-9");
                    return;
            }                

            todo.addInt(ToDo.PRIORITY, PIMItem.ATTR_NONE, i);           
        }
        }

        // Commit ToDo.
        todo.commit();

        // Notify user that ToDo was added
        showAlert("Info", "ToDo was successfully added");  

        } catch(PIMException pimExc) {
        // TODO: Handle error on working with PIM.
        showAlert("Info", pimExc.getMessage());
        }
        catch(SecurityException secExc) {
        // TODO: Handle error on access to PIM.
        showAlert("Info", secExc.getMessage());
        }

        catch(Exception exc) {

        // TODO: Handle all other errors.
        showAlert("Info", exc.toString());

        }

        }

        /**
        * Shows alert with specified title and text.
        * @param title - Title of alert.
        * @param message - text of alert.
        */
        private void showAlert(String title, String message) {
        Alert alert = new Alert(title);
        alert.setString(message);
        alert.setTimeout(2000);
        aDisplay.setCurrent(alert);
        }

        /**
        * From MIDlet.
        * Signals the MIDlet that it has entered the Active state.
        */

        public void startApp () { 
        aDisplay = Display.getDisplay (this); 
        aDisplay.setCurrent (aform); 

        } 

        public void pauseApp () { 
        } 

        public void destroyApp (boolean unconditional) {

        } 
        private void exitMIDlet() {
        notifyDestroyed();
        }

        private void closeToDoList() {
        if (todoList != null) {
        try {

        todoList.close();
        } catch (PIMException ex) {
        showAlert("Info","Error in closing ToDo list: "+ex.toString());
        }
        }
        todoList = null;
        }
        public void commandAction (Command c, Displayable d) { 

        if (c == exitCommand) { 
        destroyApp (false); 
        notifyDestroyed (); 
        } 
        if(c == backCommand){ 
        aDisplay.setCurrent(aform);
        } 
        }

        public void commandAction (Command c, Item i) { 

        if (c == hllinkCommand) { 
        aDisplay.setCurrent (hlAlert, aform); 
        } 
        if (c == b1Command) { 
        aDisplay.setCurrent (b1Alert, aform); 
        }
        if (c == b2Command){
        aDisplay.setCurrent (addToDoForm);
        }

        } 
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T21:44:07.967

你的直接错误——这是你所有问题中**最轻微**的——是你忘记`okCommand`在`commandAction(Command, Displayable)`.

结果，当用户单击“确定”时，什么也没有发生 - 仅仅是因为没有代码可以处理这个问题。

这个错误很容易修复 - 只需将 commandAction 添加到处理 Displayable 而不是 Item 的错误中 - 如下代码，您就完成了：

```
 if(c == okCommand){ 
            // show whatever screen you need
            aDisplay.setCurrent(new Form("whatever"));
        } 
```

但这不会结束你的麻烦，因为使用这样的代码，你实际上注定要犯一些微妙的错误，并在修复这些问题时打破你的头脑。

现在我们已经完成了一些小事情，首先你**的错误**是在用户操作点和块内缺少日志记录`catch`（我为什么提到 catch 块，请在 Web 上搜索*Java 吞咽异常*之类的东西）。

这使得在调试时很难弄清楚那里发生了什么。`okCommand`只需运行 MIDlet 并查看模拟器控制台（如果那里有日志记录），就可以很容易地发现诸如缺少上述处理之类的错误。

我建议记录的用户操作点`commandAction`在调用`setCurrent`. 开发时，请随意在您认为需要的地方添加更多内容（如果您使用 Canvas，`keyPressed`看起来也是一个不错的选择）。

```
public class Log {
    // utility class to keep logging code in one place
    public static void log (String message) {
        System.out.println(message);
        // when debugging at real device, S.o.p above can be refactored
        //  - based on ideas like one used here (with Form.append):
        //    http://stackoverflow.com/questions/10649974
        //  - Another option would be to write log to RMS
        //    and use dedicated MIDlet to read it from there
        //  - If MIDlet has network connection, an option is
        //    to pass log messages over the network. Etc etc...
    }
}

// ... other classes...
    // ...
    catch (Exception e) {
        Log.log("unexpected exception: [" + e + "]");
    }

    // ...
    public void commandAction(Command c, Displayable s) {
        Log.log("command: [" + c.getCommandLabel()
                + "] at screen: [" + d.getTitle() + "]");
        // ...
    }

    // ...
    public void commandAction(Command c, Item i) {
        Log.log("command: [" + c.getCommandLabel()
                + "] at item: [" + i.getLabel() + "]");
        // ...
    }

    // ...
    Log.log("set current: [" + someDisplayable.getTitle() + "]");
    display.setCurrent(someDisplayable);
    // ...

    protected void keyPressed(int key) { // in Canvas
        Log.log("key pressed: [" + getKeyName(key) + "]");
        // ...
    } 
```

您的代码中另一个**非常糟糕的**错误是它是[God object](http://en.wikipedia.org/wiki/God_object "这是什么？")。这使得修改和调试变得不必要地困难。将您的应用程序拆分为更小的类，没有必要将它们全部保存在一个地方。

首先，考虑将 CommandListener 和 ItemCommandListener 移动到单独的类中，而不是让 MainMidlet 实现它们。请记住，可能有多个 Item/CommandListener，例如每个屏幕一个。

将与内容相关的代码拆分为`aform`单独的类。与 bform、addToDoForm、listTodos 相同。等等等等。

# mysql - 删除所有具有一定数量表的数据库

> ID：12166939
> 
> 赞同：0
> 
> 时间：2012-08-28T20:20:25.377
> 
> 标签：mysql, database, drop-database

我有一个带有许多非活动数据库的 MYSQL 服务器。所有这些“死”的数据库每个都有不到 109 个表，所以我正在寻找一种方法来一次删除所有这些表，但还没有找到一种方法来做到这一点。我想我可以删除所有这些的另一种方法是删除所有没有 X 表的数据库（其中 X 是添加到我们模型中的最新表）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T20:35:15.290

您可以使用以下查询识别数据库：

```
select schema_name
from information_schema.tables
group by schema_name
having count(*) < 109 
```

然后，您可以使用 schema_name 列表在 Excel 等工具中创建“删除数据库”命令。或者，放入光标以循环浏览它们。或者将它们读成您喜欢的脚本语言来进行删除。

# testing - htmlunit 与带有 htmlunit 插件的 jwebunit

> ID：12166943
> 
> 赞同：1
> 
> 时间：2012-08-28T20:20:37.890
> 
> 标签：testing, user-interface, htmlunit, jwebunit

`htmlunit`我对, `httpunit`,`jwebunit`等ui 测试工具进行了一些研究`selenium`。

我对测试工具不是很熟悉。`Htmlunit`在 javascript 支持方面听起来是一个不错的选择。然后，我发现`jwebunit`，它提供了 API，并且可以使用`jwebunit`比较来编写简洁的代码`htmlunit`。

我不太确定的一件事是：当我们`jwebunit`与`htmlunit`插件一起使用时，我们是否具有 的所有功能`htmlunit`，或者是否`jwebunit`限制了 提供的某些功能的使用`htmlunit`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T23:32:44.973

对于 UI 测试，还有另一个有趣的选择：使用 Cannoo Webtest（基于 HtmlUnit）+ Groovy 语言。您可以使用简单的 DSL 编写测试，例如（来自[官方网站](http://webtest.canoo.com/webtest/manual/WebTestHome.html)）：

```
import com.canoo.webtest.WebtestCase

class SimpleTest extends WebtestCase {
  void testWebtestOnGoogle() {
    webtest("check that WebTest is Google's top 'WebTest' result") {
      invoke "http://www.google.com/ncr", description: "Go to Google (in English)"
      verifyTitle "Google"
      setInputField name: "q", value: "WebTest"
      clickButton "I'm Feeling Lucky"
      verifyTitle "Canoo WebTest"
    }
  }
} 
```

# javascript - 如何在推文中使用自定义 bit.ly URL，而不是 t.co？

> ID：12166944
> 
> 赞同：1
> 
> 时间：2012-08-28T20:20:41.913
> 
> 标签：javascript, twitter, bit.ly

我已将 bit.ly 设置为使用自定义 URL。如果我将链接粘贴到 bit.ly 中效果很好，它会输出自定义 URL，所以我知道该部分已设置。

主要问题是：如何在我的网站上设置“推文”按钮，以便当用户单击“推文”时，推文中出现的 URL 会被我们的自定义 URL 而不是 Twitters t.co URL 缩短？

谢谢！

**更多信息：**

举个更好的例子： [http ://bits.blogs.nytimes.com/2009/12/16/the-times-and-bitly-roll-out-nytims-short-links/](http://bits.blogs.nytimes.com/2009/12/16/the-times-and-bitly-roll-out-nytims-short-links/)

向下滚动到帖子末尾并单击“Twitter”按钮，您会看到他们正在使用他们的 http://nyti.ms (http://nyti.ms/NUHtlN)，它使用了 bit.ly...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T20:23:01.110

**“所有 URL，无论其长度如何，现在都会自动用 t.co 包装”**

官方来源：

[https://dev.twitter.com/discussions/2806](https://dev.twitter.com/discussions/2806)

**编辑：**演示如下：

转到[这里](http://www.nytimes.com/2012/08/29/us/tropical-storm-isaac-on-verge-of-becoming-a-category-1-hurricane.html?hp)，然后单击 Twitter 分享按钮会弹出一个分享框，其中填充：

```
Isaac Upgraded to Category 1 Hurricane http://nyti.ms/RUs5HF 
```

当它[发布](https://twitter.com/joshoneal45/status/240551881720623104)到 Twitter 时，Twitter 似乎创建了一个新的包装超链接，其形式为：

```
<a href="http://t.co/wToOFYQc">http://nyti.ms/RUs5HF</a> 
```

然后 Twitter 帖子看起来使用了`nyti.ms`链接，但实际上它只是一个`t.co`链接。

# entity-framework - 实体框架和工作单元

> ID：12166947
> 
> 赞同：6
> 
> 时间：2012-08-28T20:20:46.580
> 
> 标签：entity-framework, unit-of-work

我正在使用 EF/Repository/Unit of Work，但我很难理解一些细节。在 UnitOfWork 内部，我创建了一个新的 EF DbContext (EmmaContext)，但是查看存储库内部，我将它转换为我知道是错误的，如何正确获取存储库中的上下文？也许我完全走错了路？

这是我的工作单元：

```
//Interface
public interface IUnitOfWork : IDisposable
{
    void Commit();
}

//Implementation
public class UnitOfWork : IUnitOfWork
{
    #region Fields/Properties
    private bool isDisposed = false;
    public EmmaContext Context { get; set; }
    #endregion

    #region Constructor(s)
    public UnitOfWork()
    {
        this.Context = new EmmaContext();
    }
    #endregion

    #region Methods
    public void Commit()
    {
        this.Context.SaveChanges();
    }

    public void Dispose()
    {
        if (!isDisposed)
            Dispose(true);
        GC.SuppressFinalize(this);
    }

    private void Dispose(bool disposing)
    {
        isDisposed = true;
        if (disposing)
        {
            if (this.Context != null)
                this.Context.Dispose();
        }
    }
    #endregion
} 
```

这是存储库：

```
//Interface
public interface IRepository<TEntity> where TEntity : class
{
    IQueryable<TEntity> Query();
    void Add(TEntity entity);
    void Attach(TEntity entity);
    void Delete(TEntity entity);
    void Save(TEntity entity);
}

//Implementation
public abstract class RepositoryBase<TEntity> : IRepository<TEntity> where TEntity : class
{
    #region Fields/Properties
    protected EmmaContext context;
    protected DbSet<TEntity> dbSet;
    #endregion

    #region Constructor(s)
    public RepositoryBase(IUnitOfWork unitOfWork)
    {
        this.context = ((UnitOfWork)unitOfWork).Context;
        this.dbSet = context.Set<TEntity>();
    }
    #endregion

    #region Methods
    public void Add(TEntity entity)
    {
        dbSet.Add(entity);
    }

    public void Attach(TEntity entity)
    {
        dbSet.Attach(entity);
    }

    public void Delete(TEntity entity)
    {
        dbSet.Remove(entity);
    }

    public IQueryable<TEntity> Query()
    {
        return dbSet.AsQueryable();
    }

    public void Save(TEntity entity)
    {
        Attach(entity);
        context.MarkModified(entity);
    }
    #endregion
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T00:50:02.507

Sam：我通常对在 ctor 中采用具体的 UnitOfWork 的具体存储库感到满意：

```
 public RepositoryBase(UnitOfWork unitOfWork)
   {
        this.context = unitOfWork.Context;
        this.dbSet = context.Set<TEntity>();
   } 
```

存储库和 UoW 通常协同工作，并且需要彼此了解一点。

当然，使用这些类的代码只知道接口定义而不知道具体类型。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-29T01:00:56.177

这是 [我读过的最好的文章](http://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/implementing-the-repository-and-unit-of-work-patterns-in-an-asp-net-mvc-application)。

在他们的示例中，他们像这样管理存储库：

```
 private SchoolContext context = new SchoolContext();
    private GenericRepository<Department> departmentRepository;
    private GenericRepository<Course> courseRepository;

    public GenericRepository<Department> DepartmentRepository
    {
        get
        {

            if (this.departmentRepository == null)
            {
                this.departmentRepository = new GenericRepository<Department>(context);
            }
            return departmentRepository;
        }
    } 
```

您的工作单元保存上下文，如果它需要引用存储库，如果它尚未创建，它会创建它，并传入它所保存的上下文。

本文还介绍了他们如何将常规 MVC 控制器实现转换为使用工作单元模式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T21:00:55.250

在这篇[文章](http://dotnet.dzone.com/news/using-unit-work-pattern-entity)中说你必须在你的存储库基础中实现 IUnitOfWork 接口。

我希望这有帮助。问候

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-31T16:33:30.123

[工作单元](http://martinfowler.com/eaaCatalog/unitOfWork.html)
[存储库](http://martinfowler.com/eaaCatalog/repository.html)

> UnitOfWork 用于管理原子操作。
> 
> 存储库封装了一组持久保存在数据存储中的对象以及对它们执行的操作。

如果您传递上下文或 UnitOfWork，那么您没有实现 UnitOfWork+Repository 模式，导致您从 UnitOfWork 中退出它的责任。又名你不需要它。

如果您只通过 DbSet，则正确实施。其实你不需要更多。

# linq - 如何对内部列表进行排序

> ID：12166950
> 
> 赞同：0
> 
> 时间：2012-08-28T20:21:09.120
> 
> 标签：linq

我想对下面的“周”进行排序。'InvalidCast Exception' 告诉我我什至没有接近（无论我向它抛出了什么）。

sortedWeeks 在调试器中看起来不错...

我如何让它回到课堂上？

我实际上并不需要原始的 Weeks 类，因为它将通过 JavaScriptSerializer 运行......虽然我想知道如何对这个类进行排序......

```
Weeks theData = new Weeks();
// pretend its now full of data and I need the weeks sorted on number
var sortedWeeks = theData.weeks.OrderBy(x => x.number);

theData.weeks = sortedWeeks;  // <--- How do I cast this??

public class Weeks
{
     private List<Week> _weeks = new List<Week>();
     public List<Week> weeks
     {
         get { return _weeks; }
         set { _weeks = value; }
      }
}
public class Week
{
     public string week { get; set; }
     public string file { get; set; }
     public int number { get; set; }
 } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T20:23:25.330

```
theData.weeks = sortedWeeks.ToList(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T20:52:09.697

theData.weeks.OrderBy(x => x.number); 将返回`IEnumerable<Week>`，或者`IQueryable<Week>`您需要 ToList() 来关闭查询并给您一个列表。另一种方法是将 Weeks 属性设为`IEnumerable<Week>`

# java - 了解 JodaTime DateTime.parse(string, formatter)

> ID：12166956
> 
> 赞同：19
> 
> 时间：2012-08-28T20:21:36.090
> 
> 标签：java, datetime, formatting, jodatime

[DateTime 类的parse](http://www.joda.org/joda-time/apidocs/index.html?org/joda/time/DateTime.html)方法中格式化程序的样式是否必须与字符串的确切样式匹配？例如，我从数据库 (Oracle) 中获取 TimeStamp 对象并将其转换为字符串。在数据库中，时间戳是这样存储的

> 12 年 8 月 8 日 12.00.00.000000000 上午

我将格式化程序设置为这种样式

```
String pattern = "dd-MMM-yy"; 
```

我得到了这个例外

```
java.lang.IllegalArgumentException: Invalid format: "08-AUG-12 12.00.00 AM" is malformed at " 12.00.00 AM"

org.joda.time.format.DateTimeFormatter.parseDateTime(DateTimeFormatter.java:866)

org.joda.time.DateTime.parse(DateTime.java:144) 
```

这到底是什么意思，我将如何解决它？当我将格式化程序设置为时， `"yy-MMM-dd hh.mm.ss aa"`我没有收到异常，但它在浏览器中打印如下： `2008-08-12T00:00:00.000-04:00`，但我需要将其打印为`"dd-MMM-yy hh:mm:ss aa"`

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-08-28T20:55:29.947

改用 LocalDateTime ：

```
String input = "08-AUG-12 12.00.00 AM";
String pattern = "dd-MMM-yy hh.mm.ss aa";

LocalDateTime localDateTime = LocalDateTime.parse(input, DateTimeFormat.forPattern(pattern)); 
```

**编辑**

事实上，您也可以使用 DateTime 来做到这一点：

```
private static String parseDateTime(String input){
     String pattern = "dd-MMM-yy hh.mm.ss aa";
     DateTime dateTime  = DateTime.parse(input, DateTimeFormat.forPattern(pattern));
     return dateTime.toString("dd-MMM-yy hh:mm:ss aa");
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T21:48:25.243

弄清楚了。要获得正确的格式，您必须调用 formatter.print(localDateTime object) 并且它有效。

# mysql - mysql GROUP_CONCAT 标签结果来自一列，其值来自另一列

> ID：12166957
> 
> 赞同：0
> 
> 时间：2012-08-28T20:21:36.637
> 
> 标签：mysql

我有一张表格，列出了产品照片的网址。在表格中，照片被多次列出（一次用于在上传期间完成的各种调整大小）。该表有三列感兴趣：

```
photoFlag photoName objectID 
```

使用 GROUP_CONCAT 我可以获得每个产品的所有照片网址，但随后我丢失了 photoFlag 标签。结果如下

```
other_columns photoName1,photoName2,photoName3,etc 
```

我希望他们像这样：

```
other_columns photoFlag1*photoName1,photoFlag2*photoName2,photoFlag3*photoName3,etc 
```

因此，在处理结果集时，我可以轻松地从列表中选择最佳照片选项。

这甚至可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T20:24:50.037

```
SELECT other_columns, GROUP_CONCAT(CONCAT_WS('*', photoFlag, photoName))
    FROM YourTable
    GROUP BY SomeColumn; 
```

# cloud-foundry - 有关如何将新运行时添加到 CloudFoundry 的文档

> ID：12166959
> 
> 赞同：0
> 
> 时间：2012-08-28T20:21:46.610
> 
> 标签：cloud-foundry

[我已尝试按照此处](http://programminggems.wordpress.com/2012/02/07/adding-a-runtime-and-framework-to-the-new-cloud-foundry/)提到的向 CF 添加新运行时的步骤

正如詹姆斯福斯特本人在他的帖子中提到的那样，CF 正在迅速变化，所提到的步骤可能不适用于未来的版本。是的，这是真的。我只是将它们应用于最新版本之一，但它不起作用。

任何相对较新的文档？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T09:44:10.487

我注意到您在 Google 群组中关于 vcap-dev 的问题。这绝对是提出这类问题的正确地方。这是一个棘手的问题，因为平台发展如此之快。我认为另一个好的起点是查看源代码。

Elang 的原始补丁在这里；

[https://github.com/cloudfoundry/vcap/pull/20/files](https://github.com/cloudfoundry/vcap/pull/20/files)

你在考虑什么运行时？

担

# iphone - ARC 和 OpenGL ES 2.0：旧形状在新场景中呈现

> ID：12166961
> 
> 赞同：1
> 
> 时间：2012-08-28T20:21:53.060
> 
> 标签：iphone, objective-c, opengl-es, automatic-ref-counting

我在使用 OpenGL ES 2.0 和自动参考计算 (arc) 时遇到问题。

当我启动一个场景（一个背景、两个棋子和某些情况）时，它遵循以下过程：

1/ 创建上下文

```
context = [[EAGLContext alloc] initWithAPI:kEAGLRenderingAPIOpenGLES2];
[EAGLContext setCurrentContext:context]; 
```

2/ 编译着色器

3/ 设置帧缓冲

```
GLuint framebuffer;
glGenFramebuffers(1, &framebuffer);
glBindFramebuffer(GL_FRAMEBUFFER, framebuffer);   
glFramebufferRenderbuffer(GL_FRAMEBUFFER, GL_COLOR_ATTACHMENT0, GL_RENDERBUFFER, _colorRenderBuffer); 
```

4/ 每次渲染前清除颜色

```
glClearColor(clearColor.r, clearColor.g, clearColor.b, clearColor.a);
glClear(GL_COLOR_BUFFER_BIT); 
```

5/ 渲染所有形状

第一次启动，一切正常并正确渲染。然后我导航到菜单，启动另一个关卡，所有 1/ 2/ 3/ 4/ 5/ 再次处理以生成新关卡。问题是我的旧棋子和箱子是可见的，闪烁/剪切/透明。

**编辑**：我正在使用弧，如果我将它设置为 nil，控制器不会释放我的旧场景，因此我将我的标签重定向到弧问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T22:15:41.670

听起来不像是ARC问题。听起来您没有正确拆除/删除旧场景。

虽然 ARC 会自动处理内存管理，但它不会仅仅因为您的本地强引用消失（除非该对象图具有弱引用）而自动断开对象图的内容。

因此，可能发生的是您：

*   创建 OpenGL goop

*   将其推入渲染树，使其被保留

*   消除您的本地参考

在那个时候，渲染树仍然有一个强的——一个保留的——引用，除非你明确地删除它，否则它不会消失。

# oracle11g - 确定 Oracle Spatial 查询结果的空间数据范围

> ID：12166969
> 
> 赞同：2
> 
> 时间：2012-08-28T20:22:23.537
> 
> 标签：oracle11g, spatial, envelope

我们使用 Oracle Spatial（注册为 SDE）。

我们想执行一个空间查询，然后确定结果集中所有点的范围，然后执行另一个与该范围相交的空间查询。

是否可以获取空间查询结果集的数据范围？

经过进一步审查，我认为这是答案：

```
SELECT SDO_AGGR_CONVEXHULL(SDOAGGRTYPE(geom, 0.5)) coverage
from
(
SELECT geom
  from risk.risk_location
  where SDO_INSIDE(geom, SDO_GEOMETRY(2003,8307,NULL,
    SDO_ELEM_INFO_ARRAY(1,1003,1),SDO_ORDINATE_ARRAY(
    -89.228,45.915, -89.079,45.932, -89.091,45.791, -89.173,45.799)))= 'TRUE'); 
```

# python - 在使用 Flask 的 python 中，如何写出一个对象以供下载？

> ID：12166970
> 
> 赞同：23
> 
> 时间：2012-08-28T20:22:26.337
> 
> 标签：python, python-2.7, file-io, download, flask

我正在使用 Flask 和运行工头。我在内存中构建的数据，我希望用户能够将这些数据下载到文本文件中。我不想将数据写入本地磁盘上的文件并使其可供下载。

我是 python 新手。我想我会在内存中创建一些文件对象，然后设置响应头，也许？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-08-29T03:27:45.697

将文件流式传输到客户端而不将它们保存到磁盘在 Flask 文档的“模式”部分 - 特别[是在流式传输部分中进行了介绍](http://flask.pocoo.org/docs/patterns/streaming/)。[`Response`](http://flask.pocoo.org/docs/api/#flask.Response)基本上，您所做的是返回一个包装迭代器的成熟对象：

```
from flask import Response

# construct your app

@app.route("/get-file")
def get_file():
    results = generate_file_data()
    generator = (cell for row in results
                    for cell in row)

    return Response(generator,
                       mimetype="text/plain",
                       headers={"Content-Disposition":
                                    "attachment;filename=test.txt"}) 
```

# php - 如何强制手机识别我网站上的国际号码？

> ID：12166971
> 
> 赞同：5
> 
> 时间：2012-08-28T20:22:28.603
> 
> 标签：php, html, drupal, mobile, meta-tags

我在网站上输出了一个国际电话号码。例如：

```
<span class="phone-number">+1 918 555 5555</span> 
```

我的 iphone 足够聪明，可以将其识别为电话号码并拨打它，但它会从号码中删除“+”号。所以如果我的墨西哥朋友点击它，他会得到一个无效的号码。

他们是我可以使用的一些元数据还是我可以强制手机添加加号以保留国际号码的任何方式？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-28T20:55:03.323

将其包装在这样的`<a>`标签中可以让您使用任何您喜欢的格式：

```
<a href="tel:+19185555555">+1 918 555 5555</a> 
```

*有关无需*[在此处](http://hjacob.com/blog/2009/07/making-a-phone-number-clickable-for-iphone-users/)添加任何代码即可利用的各种格式的更多信息。

# intersystems-cache - 如何在插入/更新期间在行上设置时间戳

> ID：12166972
> 
> 赞同：1
> 
> 时间：2012-08-28T20:22:30.423
> 
> 标签：intersystems-cache

每次通过 SQL 更新或插入字段时，我都想设置一个时间戳列。

我尝试使用 SqlComputed 属性，但是如果该字段最初为空，那么当我在 ObjectScript 中使用 %Open 或 %New 和对象时，设置该字段会产生不良影响。我不希望在对象是 %Save'd（或 INSERT'ed/UPDATE'd）之前设置该值。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T21:45:52.357

您是否定义了 SQLCompute On Change。根据您描述的情况，我认为您想将其定义为 %%INSERT,%%UPDATE。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T21:42:14.747

如果属性是瞬态的或计算的，则每次检索该值时都会运行 SQLComputed 计算。如果属性都不是，那么计算将在修改后运行并存储在数据库中，这就是您要查找的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T00:52:23.967

我想你可以从下面的例子中得到一个线索。每当您尝试使用 COS 调用 %Save() 方法时，都会调用 %OnBeforeSave。请注意，当您使用 SQL 使用“插入”或“更新”时，不会调用此方法。

```
Property LastModified As %Date;
Property RegDate As %Date;
/// 
/// This callback method is invoked by the <METHOD>%Save</METHOD> method to 
/// provide notification that the object is being saved. It is called before 
/// any data is written to disk.
/// 
/// <P><VAR>insert</VAR> will be set to 1 if this object is being saved for the first time.
/// 
/// <P>If this method returns an error then the call to <METHOD>%Save</METHOD> will fail.
Method %OnBeforeSave(insert As %Boolean) As %Status [ Private ]
{

    if insert s ..RegDate=$h
    s ..LastModified = $h
    quit $$$OK
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-26T11:57:28.963

如果您可以控制该类，则可以更新该属性以具有如下所示的 InitialExpression：

```
Property CreateTimeStamp As %TimeStamp [ InitialExpression = {$ZDateTime($H,3)} ]; 
```

# javascript - html/javascript“小部件”如何知道用户何时点击了小部件外部的任何位置？

> ID：12166977
> 
> 赞同：0
> 
> 时间：2012-08-28T20:22:48.353
> 
> 标签：javascript, jquery, html

> **可能重复：**
> [如何检测元素外的点击？](https://stackoverflow.com/questions/152975/how-to-detect-a-click-outside-an-element)

假设我创建了一个 HTML/javascript 小部件。假设在渲染时，小部件位于任意数量的其他 html 元素的顶部、旁边或附近。

我希望能够使我的小部件在用户单击小部件本身内部的任何位置时进行自我修改。

这可以做到吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T20:27:09.710

将一个事件绑定到文档，然后测试一个 id 的 click 事件。

[http://jsfiddle.net/AgNmt/](http://jsfiddle.net/AgNmt/)

```
$(document).on('click', function (event) {
    var $element = $(event.target);

    if ($element.attr('id') === 'mywidget') {
        // do nothing
    } else {
        alert('you have clicked outside the widget!');
    }
});​ 
```

# matlab - MATLAB IF 语句

> ID：12166979
> 
> 赞同：0
> 
> 时间：2012-08-28T20:22:51.817
> 
> 标签：matlab

我是一个新的 MATLAB 用户。尝试将 y 初始化为 if 语句中的计算值。但是，当我尝试绘制 y 时，它说 y 未定义

```
function [y,xmax] = Alaw(x,A,ymax)

if nargin<3, ymax=1; end
if nargin<2, A=87.6; end

xmax=max(abs(x)); 

    temp = ymax/A;
if ((x > 0) & ( x < temp ))
    y = (A * abs(x)) ./ (1 + log(A) ).*sign(x);
end    

if (x > temp)
    y = ymax*( 1 + log(A*abs(x/ymax)) )./( 1+log(A) ).*sign(x);
end

 fprintf('Plotting Data ...\n');
 hold on;
 figure;
 plot(y);
 xlabel('x-axis');
 ylabel('y-axis');
 title('  A LAW ');

 pause;
 fprintf('Writing the audio file ...\n');
 wavwrite(y, 22050, 'Alaw.wav');

 end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T20:26:49.027

如果`x`小于或等于零，或者如果`x`等于`temp`，则两个 if 语句都不为真，因此`y`永远不会被定义。您可能需要重写逻辑`if..elseif..else`以确保`y`在每种情况下都被分配：

```
if ((x > 0) & ( x < temp ))
    y = (A * abs(x)) ./ (1 + log(A) ).*sign(x);
elseif (x > temp)
    y = ymax*( 1 + log(A*abs(x/ymax)) )./( 1+log(A) ).*sign(x);
else
    y = NaN(size(x)); % no valid y; this won't plot anything, but won't error
end 
```

请注意，当是数组`x>0`时可能会导致意外结果。如果所有或任何元素分别满足条件，则`x`使用`all`或`any`确保条件得到满足。`x`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T20:28:10.507

为我工作：

```
>> Alaw([1 2 3])
Plotting Data ...

ans =

1.0000    1.1267    1.2007 
```

![在此处输入图像描述](../Images/6ef9acc9ae123d6fb08cd475a8fe1fcf.png)

# knockout.js - 使用 Knockoutjs ObservableArray 确定添加或删除了哪个元素

> ID：12166982
> 
> 赞同：15
> 
> 时间：2012-08-28T20:23:02.130
> 
> 标签：knockout.js, datatables

我需要弄清楚从我的 Knockout observableArray 中删除了哪个元素。请看我的[jsFiddle](http://jsfiddle.net/logankd/Nrry8/)。

我可以订阅更改，但它只返回值，即添加或删除后的当前数组。

```
self.selectedDataPointOptions.subscribe(function(value) {
  // how can I see which one was added or removed?
  alert(value);
}); 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-08-28T20:32:07.243

Knockout 包括`ko.utils.compareArrays`可用于将一个数组与另一个数组进行比较的内容。这是一个辅助函数，它通知数组中每个添加或删除的项目：

```
ko.observableArray.fn.subscribeArrayChanged = function(addCallback, deleteCallback) {
    var previousValue = undefined;
    this.subscribe(function(_previousValue) {
        previousValue = _previousValue.slice(0);
    }, undefined, 'beforeChange');
    this.subscribe(function(latestValue) {
        var editScript = ko.utils.compareArrays(previousValue, latestValue);
        for (var i = 0, j = editScript.length; i < j; i++) {
            switch (editScript[i].status) {
                case "retained":
                    break;
                case "deleted":
                    if (deleteCallback)
                        deleteCallback(editScript[i].value);
                    break;
                case "added":
                    if (addCallback)
                        addCallback(editScript[i].value);
                    break;
            }
        }
        previousValue = undefined;
    });
}; 
```

这是在行动：http: [//jsfiddle.net/mbest/Jq3ru/](http://jsfiddle.net/mbest/Jq3ru/)

从 Knockout 3.0 开始，您可以使用`arrayChange`事件更轻松地完成此操作。更多信息在这里：http: [//blog.stevensanderson.com/2013/10/08/knockout-3-0-release-candidate-available/](http://blog.stevensanderson.com/2013/10/08/knockout-3-0-release-candidate-available/)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-07-04T00:07:25.123

提议的解决方案很酷，并且有效，但它涉及每次发生更改时克隆数组，然后进行比较，这可能是 O(n^2)。

这是另一个解决方案：这意味着包含另一个 js 文件......但如果你想要更好的性能，这将提供它：

[https://github.com/bobwold/betterObservableArray](https://github.com/bobwold/betterObservableArray)

这个 observableArray 的替代品（它基本上只是 observable 数组的一个克隆，带有一些额外的代码）使用了淘汰订阅框架，并添加了“添加”和“删除”订阅。

样品用法：

```
var presidents = ko.betterObservableArray();
presidents.subscribe(presidentAdded, this, "add");
presidents.subscribe(this.presidentRemoved, this, "remove"); 
```

...

```
function presidentAdded(president) {
};

function presidentRemoved (president) {
}; 
```

...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-16T15:46:10.313

Michael Best 的解决方案 (subscribeArrayChanged) 对我也很有效。但是我需要从 typescript 中使用它，因此我在与原始 'knockout.d.ts' 不同的源中编写了一个小定义源 (d.ts)，以便在 typescript 源代码中以舒适的方式使用它。

自定义 knockoutext.d.ts 文件：

```
/// <reference path="knockout.d.ts" />
interface KnockoutObservableArray<T> extends KnockoutObservableArrayFunctions<T> {
    subscribeArrayChanged(addCallback: (T) => void , deleteCallback: (T) => void );
} 
```

小示例代码片段：

```
data[0].Properties.subscribeArrayChanged(
    (value: Meta.Data.Property) => {
        console.log('add callback called');
    },
    (value: Meta.Data.Property) => {
        console.log('delete callback called');
    }
); 
```

# mysql - 有谁知道带有 Mongo 和 MySql 的示例 Rails 项目？

> ID：12166983
> 
> 赞同：1
> 
> 时间：2012-08-28T20:23:02.943
> 
> 标签：mysql, ruby-on-rails, mongodb

在过去的几个小时里，我已经在谷歌上进行了相当广泛的搜索。我们正在尝试配置一个新项目，我们正在考虑使用 Mongo 来支持我们的映射数据和其他只读的、依赖于速度的查询，而我们的应用程序数据的其余部分将在关系中得到更好的服务D b。

（请记住，我是一个 NoSql 菜鸟，我们只是对我们熟悉的内容做出反应）

我很想知道这些在 Rails 中如何协同工作，甚至如何最好地设置它。我发现了这个[Using different connections](https://stackoverflow.com/questions/1404620/using-rails-migration-on-different-database-than-standard-production-or-devel)，但还有一些其他建议的方法。

任何帮助表示赞赏。

# ios - 是否有适用于 iOS 的私人消息传递 UI（收件箱、已发送、撰写）框架？

> ID：12166986
> 
> 赞同：2
> 
> 时间：2012-08-28T20:23:26.013
> 
> 标签：ios, frameworks, ios-frameworks

我正在构建一个需要私人消息功能的应用程序，以便用户互相发送消息（例如收件箱、发送、撰写、通知）。例如，在 Facebook 应用程序或 LinkedIn 应用程序中，有向其他用户发送消息（不是电子邮件或短信）的功能。是否有任何 Apple 或第三方框架可以处理所有这些功能的视图？换句话说，我希望能够使用框架（如果它甚至存在）呈现“InboxViewController”或“NewMessageViewController”。或者这是通常从头开始开发的东西？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T12:24:05.253

[Cocoa Controls](http://www.cocoacontrols.com/)有一些你可以使用的好东西。其中一些很便宜，大部分是免费的。您可以使用类似于 iOS 消息应用程序的外观的一些控件是：

*   [可扩展的输入工具栏](http://www.cocoacontrols.com/platforms/ios/controls/expandable-input-toolbar)
*   [UIBubbleTableView](http://www.cocoacontrols.com/platforms/ios/controls/uibubbletableview)
*   [AcaniChat](http://www.cocoacontrols.com/platforms/ios/controls/acanichat)（输入和气泡一起）
*   [SSMessageViewController](http://www.cocoacontrols.com/platforms/ios/controls/ssmessagesviewcontroller)（输入和冒泡一起）

如果您需要收件箱/已发送/草稿文件夹，您可以使用以下内容：

*   [GH侧边栏Nav](http://www.cocoacontrols.com/platforms/ios/controls/ghsidebarnav)

我不知道您的具体需求是什么，但有些东西可能会有所帮助，例如[TITokenField](http://www.cocoacontrols.com/platforms/ios/controls/titokenfield)、多个[下拉刷新](http://www.cocoacontrols.com/platforms/ios/controls/egotableviewpullrefresh)控件以及许多其他东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T20:50:04.540

UIKit 中没有可用的私人消息 UI，但我会检查一下

### [iMessage 风格后退键盘](https://github.com/orta/iMessage-Style-Receding-Keyboard)

# django - 如何判断 Django 会话是否是新的？

> ID：12166996
> 
> 赞同：6
> 
> 时间：2012-08-28T20:24:11.107
> 
> 标签：django, session

在视图中，是否有一种简单的方法可以判断这是否是会话中的第一个命中？

我寻找了一些明显的东西，比如将 session-create-date 与 session-last-accessed-date 进行比较，但这些字段似乎不存在。

我可以在会话数据中设置一个自定义键，然后如果缺少该键，则假设它是一个新会话，但我想知道是否有一些更清洁的方法。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T01:39:41.357

你如何通过[`settings.SESSION_COOKIE_AGE`](https://docs.djangoproject.com/en/dev/topics/http/sessions/#session-cookie-age)减法计算它[`my_session.get_expiry_age()`](https://docs.djangoproject.com/en/dev/topics/http/sessions/#django.contrib.sessions.backends.base.SessionBase.get_expiry_age)。越接近 0，会话越新。不确定尽管对于首次点击会话而言这始终为零。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-12-15T07:40:49.680

您可以使用 session_key。如果 request.session.session_key 为 None，这意味着 session 对象是新的并且尚未保存到数据库中。