# StackOverflow 问答 11964000-11964999

# algorithm - 将一维高斯模糊应用于数据集

> ID：11964001
> 
> 赞同：2
> 
> 时间：2012-08-15T04:10:42.263
> 
> 标签：algorithm, math, shader, blur, gaussian

我有一些数据集，其中每个对象都有一个`Value`和`Price`。我想将高斯模糊应用到他们`Price`使用的`Value`. 由于我的数据只有 1 个用于模糊的组件，因此我正在尝试应用 1D 高斯模糊。

我的代码是这样做的：

```
totalPrice = 0;
totalValue = 0;
for each object.OtherObjectsWithinPriceRange()
    totalPrice += price;
    totalValue += Math.Exp(-value*value);

price = totalPrice/totalValue; 
```

我看到了很好的结果，但是我在网上看到的 1D 高斯模糊算法似乎使用了偏差、sigma、PI 等。我需要它们，还是它们严格用于 2D 高斯模糊？他们将这些 1D 模糊通道组合为垂直和水平，因此它们仍然占 2D。

我也将结果显示为颜色，但白色区域略大于 1（白色）。我怎样才能正常化呢？我应该将值钳制为 1 吗？这就是为什么我想知道我是否使用了正确的公式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T09:06:24.290

您的代码应用了某种模糊，但绝对不是高斯的。高斯模糊看起来像

```
kindaSigma = 1;
priceBlurred = object.price;
for each object.OtherObjectsWithinPriceRange()
   priceBlurred += price*Math.Exp(-value*value/kindaSigma/kindaSigma); 
```

并且仅假设它与价格范围内的其他对象`value`之间的“距离”成正比，无论您的应用程序中的“距离”意味着什么。`object`

对你的问题。

1.  2D 高斯模糊完全等同于一个接一个的垂直和水平 1D 高斯模糊的组合。这就是 2D 高斯模糊通常在实践中实现的方式。

2.  您不需要任何 PI 或 sigma 作为高斯的乘法因子 - 它们仅具有缩放图像的效果，可以安全地忽略。

3.  指数下的 sigma（标准差）对结果有很大影响，但我无法告诉你是否需要。这取决于您的应用程序。想要更多模糊：`kindaSigma`在上面的片段中使用更大的。想要更少的模糊：使用更小的`kindaSigma`. 当 kindaSigma 太小时，您根本不会注意到任何模糊。当 kindaSigma 太大时，高斯模糊会有效地将自身转换为移动平均滤波器。玩它并选择你需要的东西。

4.  我不确定我是否理解您的规范化问题。在图像处理中，通常将每个颜色分量 (R,G,B) 存储为`unsigned char`. 所以黑色由 (0,0,0) 表示，白色由 (255,255,255) 表示。当然，您可以自由决定选择不同的表示形式并将白色作为 1。但请记住，对于使用标准 8 位表示的可视化包，值 1 表示几乎是黑色。因此，您可能需要在显示之前对图像进行操作和重新规范化。

# delphi - 在 DevExpress 网格中仅展开选定的组

> ID：11964005
> 
> 赞同：0
> 
> 时间：2012-08-15T04:11:00.643
> 
> 标签：delphi, datagrid, devexpress, grouping

我有一个 DevExpress 网格，我想在其中扩展一些包含特定值的组。我对年和周进行了分组，我希望仅将当前年份和当前周扩展为默认值。我一直在寻找一些提示，但还没有找到任何提示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-04-03T07:05:13.967

这个问题“有点”老了，但既然你还很活跃，我会回答的。

为简单起见，我只使用了两列：“年份”和“人口”，因此分组仅按“年份”。

这是示例应用程序的屏幕截图：

![分组示例](../Images/7fc88dddea2780c19cc7265b031bbc59.png)

1.  您会看到一个初始数据。
2.  我正在使用“年”列对行进行分组。
3.  我正在扩展“年份”= 1 的组，我假设当前年份 = 1。

```
 procedure TfrmMain.btnExpandClick(Sender: TObject);
const
  CurrentYear = 1;
var
  i: Integer;
begin
  for i := 0 to tbvMain.ViewData.RowCount - 1 do
  begin
    // Check if a row is a grouping row.
    if not tbvMain.ViewData.Rows[i].IsData then
    begin
      // Check if a grouping value is the one that you want expanded.
      if tbvMain.ViewData.Rows[i].Values[clmYear.Index] = CurrentYear then
        tbvMain.ViewData.Rows[i].Expand(False);
    end;
  end;
end;

procedure TfrmMain.FormCreate(Sender: TObject);
var
  i: Integer;
begin
  // Prepare some random data.
  Randomize;
  tbvMain.DataController.RecordCount := 10;
  for i := 0 to tbvMain.DataController.RecordCount - 1 do
  begin
    tbvMain.DataController.Values[i, clmYear.Index] := Random(3) + 1;
    tbvMain.DataController.Values[i, clmPopulation.Index] := Random(100);
  end;
end; 
```

这里的关键是检查给定的行是否是数据。如果它不是数据，那么它是一个分组行，为此您需要使用`tbvMain.ViewData.Rows[i].IsData`

[你可以在这里](https://gist.github.com/anonymous/204ca4a8332feac6c915)找到完整的源代码。请注意，我使用的是 Delphi 2009 和 Dev Express build 56。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T09:30:38.667

你有没有尝试过这样的事情？

```
TableView1.ViewData.Records[0].Expand(true) 
```

如果当前年份是第一年，否则将 0 替换为正确的记录号

# java - 不受支持的 major.minor 版本 .51 和在 java 1.6 上运行 java 1.7 代码

> ID：11964010
> 
> 赞同：1
> 
> 时间：2012-08-15T04:11:11.167
> 
> 标签：java

在我的工作计算机上，我安装了带有 JDK 1.7 的 Windows 7 x64。我在 Netbeans 中创建了一个项目，一切顺利。然后，我将我的项目复制到运行 Mac OS X 10.6 的家用计算机上，该计算机运行 JDK 1.6。构建失败，并显示有关不受支持的 major.minor 版本 .51 的错误消息。谷歌搜索得出结论，这是因为 JDK 版本不匹配。Oracle 不允许在 Mac OS X 10.6 上安装 JDK 1.7，所以我在我的 Mac 上坚持使用 JDK 1.6。

有没有办法让我的 1.7 代码在运行 JDK 1.6 的 Mac OS X 10.6 上构建和运行？或者有什么办法可以将我的代码带回我的 JDK 1.7 机器并将兼容性降级到 1.6？基本上我需要代码在我的工作计算机和家用计算机上运行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T04:18:03.157

除非您使用新的 1.7 语法/库，否则使用 JDK 1.6 构建类应该没有问题

您还可以使用 1.7 编译器生成 1.6 兼容的 .class，例如运行

```
javac -source 1.6 -target 1.6 MyClass.java 
```

或者如果您使用的是 Eclipse，您可以在设置对话框中进行设置。

所以答案是，这两种方式都可能对你有用。

* * *

编辑：

更正了我的答案。

-source 必须是 1.6

感谢 Stuart Marks 的指出！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-15T04:25:05.500

在 NetBeans 中打开项目属性并将平台和语言级别设置为 6（或 1.6）。然后清理并构建。但是，您不能使用任何 Java 7 功能。您应该能够在 Windows 上安装现有的 Java 7 来执行此操作；您不需要安装 Java 6。

或者，您可以在运行 10.6 的 Mac 上安装非官方的 OpenJDK 7 版本。在这里寻找下载：

[http://code.google.com/p/openjdk-osx-build/](http://code.google.com/p/openjdk-osx-build/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-15T04:20:13.617

这将要求您在 Windows 机器上安装 Java 1.6。1.7 和 1.6 之间存在语法不兼容（以及一些 API 差异）。

在 Netbeans 中，右键单击项目节点并选择“属性”。从属性对话框中，选择源。在对话框底部，您应该看到“Source/Binary Format”，从下拉列表中选择“JDK 6”

选择“库”。在对话框顶部，您应该看到“Java Platform”，从下拉列表中，您需要选择“JDK 1.6”

如果找不到，请单击“管理平台”。单击“添加平台”，浏览到您安装 Java 6 的位置（通常在 C:\Program Files\Java 中）并选择它。单击“完成”。

现在你应该可以找到它了

**更新**

从“su-”的评论中，您可以简单地将“源/二进制格式”选项更改为 1.6

# jquery - jQuery - $.map() 和 .map() 之间的设计不一致？

> ID：11964011
> 
> 赞同：8
> 
> 时间：2012-08-15T04:11:38.457
> 
> 标签：jquery

虽然`.map()`方法的接口是`.map( callback(index, domElement) )`，但它是`$.map( array, callback(elementOfArray, indexInArray) )`用于 $.map()... 关于 $.map() 选择将返回的参数按值索引等顺序放置的原因有什么想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-15T04:19:05.360

因为 API 不完善。它一开始是不一致的，但现在修复它会破坏现有的使用`$.map()`.

*   [http://bugs.jquery.com/ticket/5686](http://bugs.jquery.com/ticket/5686)：*“没有办法解决这个问题并保持向后兼容性。”*
*   [http://bugs.jquery.com/ticket/7008](http://bugs.jquery.com/ticket/7008)：*“args 是颠倒的，但它会破坏很多代码来改变它。”*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-15T04:29:46.990

如果您研究 jQuery API，您会注意到所有在一组选定元素上工作并接受回调的方法，例如`.each`、`.html`、`.text`等，都将元素的索引作为第一个参数传递，即`.map`在这里对齐。通常您使用回调内部访问当前元素`this`，这只是 jQuery 中的一种常见模式，因此开发人员可能已经决定将索引作为第一个参数更重要。

另一方面，本机[`Array.prototype.map`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/map)方法将元素的值作为第一个参数传递给回调，因此以相同的方式工作似乎是有意义`$.map`的，因为它应该处理一组通用的项目。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-15T04:33:43.520

是的，jQuery().map() 和 jQuery.map() 是有区别的。

概述一些差异：

> jQuery.map() = 这倾向于迭代泛型集合
> 
> jQuery().map() = 类数组对象必须转换为数组 (.makeArray())
> 
> jQuery.map() = 主要用于获取或设置元素集合的值并返回该新数组

.map() 也是一个 ECMAScript5 函数，并在 jQuery 之外定义（尽管已实现）。有人想知道 jQuery().map() 是否是一个较旧的实现。.map() 显然更快！

John Resig 指出，“jQuery.map 主要设计用于 DOM 元素数组（如文档中所述）。因此，它会执行诸如去除 null/undefined 之类的操作，并将节点数组扁平化为单个数组。 " 这在 ECMA (Mozilla) 中定义。另一个实现是 Resig 自己的，因此有所不同。这不是糟糕的设计！！！！！！！ [读](http://forum.jquery.com/topic/differen-arguments-order-in-map-and-fn-map)

第二个原因：“它并不像“修复它”那么简单......jQuery.map 的回调具有匹配 Array.prototype.map 的参数顺序，而 jQuery.fn.map 的参数顺序匹配所有其他 jQuery 对象迭代器回调参数顺序。更改为一种或另一种会破坏向后兼容性，jQuery 极力避免这种情况” [阅读](http://forum.jquery.com/topic/differen-arguments-order-in-map-and-fn-map)

# iphone - 在连接到同一网络的 iOS 设备之间进行语音通话

> ID：11964020
> 
> 赞同：1
> 
> 时间：2012-08-15T04:13:56.017
> 
> 标签：iphone, networking, call, local

**是否可以开发一个使用本地网络（没有互联网信号）拨打电话的 iOS 应用程序......**

*我在我的城市有 3 家商店连接到同一个无线网络，所以我想这样做*

请告诉我应该使用什么框架或者*如果可能*的话我应该遵循什么步骤......

提前谢谢4u :)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T06:15:24.907

我想最接近您的问题的是使用 Gamekit。看看这里[http://developer.apple.com/library/ios/ipad/#DOCUMENTATION/NetworkingInternet/Conceptual/GameKit_Guide/AddingVoiceChat/AddingVoiceChat.html](http://developer.apple.com/library/ios/ipad/#DOCUMENTATION/NetworkingInternet/Conceptual/GameKit_Guide/AddingVoiceChat/AddingVoiceChat.html)

# python - Python sax，格式不正确的错误

> ID：11964023
> 
> 赞同：2
> 
> 时间：2012-08-15T04:14:55.380
> 
> 标签：python, xml

我试图解析来自谷歌天气 api 的响应，但我得到这个格式不正确的错误，据我所知，响应格式正确。

以下是相关代码：

```
f = urllib.urlopen(WEATHERPATH + sys.argv[1])
parser = make_parser()
parser.setContentHandler(GoogleWeatherHandler())
parser.parse(f) 
```

XML:

```
<?xml version="1.0"?>
<xml_api_reply version="1">
    <weather module_id="0" tab_id="0" mobile_row="0" mobile_zipped="1" row="0" section="0" >
        <forecast_information>
            <city data="Ciudad Ju�rez, Chihuahua"/><postal_code data="Juarez"/>
            <latitude_e6 data=""/>
            <longitude_e6 data=""/>
            <forecast_date data="2012-08-14"/>
            <current_date_time data="2012-08-15 02:51:00 +0000"/>
            <unit_system data="US"/></forecast_information>
            <current_conditions>
                <condition data="Cloudy"/>
                <temp_f data="91"/>
                <temp_c data="33"/>
                <humidity data="Humidity: 22%"/>
                <icon data="/ig/images/weather/cloudy.gif"/>
                <wind_condition data="Wind: SE at 6 mph"/>
            </current_conditions>
                        // similar markup
</weather>
</xml_api_reply> 
```

和错误：

```
Traceback (most recent call last):
  File "weather.py", line 34, in <module>
    main()
  File "weather.py", line 30, in main
    parser.parse(f)
  File "c:\Python26\lib\xml\sax\expatreader.py", line 107, in parse
    xmlreader.IncrementalParser.parse(self, source)
  File "c:\Python26\lib\xml\sax\xmlreader.py", line 123, in parse
    self.feed(buffer)
  File "c:\Python26\lib\xml\sax\expatreader.py", line 211, in feed
    self._err_handler.fatalError(exc)
  File "c:\Python26\lib\xml\sax\handler.py", line 38, in fatalError
    raise exception
xml.sax._exceptions.SAXParseException: <unknown>:1:179: not well-formed (invalid
 token) 
```

所有导入都已经到位，我相信解释器，但我在 xml 上找不到错误，第二：知道什么`<unknown>:1:179`意思会很有效。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T05:44:44.747

看起来重音`á`字符`Juárez`是问题所在。你还没有告诉解析器编码是什么，所以它显然是默认的，可能是 UTF-8，其中那个字符值是无效的——即它期待 UTF-8 编码，而你的实际编码可能是 ISO-8859- 1.

将解析器配置为期望 ISO-8859-1，您的问题应该会消失。

如果您可以修改 XML，请将标头更改为

```
<?xml version="1.0" encoding="iso-8859-1" ?> 
```

Unicode 是定义字符集的标准，是对所有已知语言中每个可能的字符的唯一编号的抽象分配。

UTF-8 只是将这些字符*编码*为 8 位字节的几种可能方法之一。由于 UTF-8 必须编码超过 256 个字符，因此它使用 2、3 和 4 字节序列。为避免歧义，这些序列必须以其他方式无法使用的字符开头，因此保留一组高阶位模式（以及因此的某些字节值集）来标记这些多字节序列的开始。ISO-8859-1 中使用的编码（一种*不同*的字符编码方式）`á`恰好与 UTF-8 中保留的用于标记多字节序列的字符冲突。

对这些问题的部分混淆源于这样一个事实：对于 0x20 到 0x7f 的字符代码，所有不同的编码方法都是相同的（单个字节）以实现向后兼容性。当您冒险使用不属于标准 ASCII 的字符时，情况会因编码而异。

要更具体：

```
Unicode á   - 0x00E1 
ISO-8859-1  - 0xE1
UTF-8       - 0xc3 0xa1 
```

这里发生的情况是，历史上（在 Unicode 之前）`á`已经在各种计算机标准（例如 Windows-1252）中分配了值 0xE1。当 Unicode 被设计出来时，他们保留了这个代码，但是当需要用 UTF-8*编码*这个值时，规则指定它变成一个 2 字节序列 0xc3 0xa1。UTF-8 中不允许单个字符值 0xE1 单独出现（我相信它标志着 4 字节序列的开始，但我可能弄错了）。

# sorting - 如何使用 jQuery Isotop 进行多重排序？

> ID：11964024
> 
> 赞同：0
> 
> 时间：2012-08-15T04:15:02.090
> 
> 标签：sorting, jquery-isotope

我从那里使用 jQuery 同位素：http: [//isotope.metafizzy.co/](http://isotope.metafizzy.co/)

有一种方法可以对多种类型进行排序吗？

例如：将所有绿色和蓝色框移到容器顶部？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T15:06:02.160

您可以对多种类型进行排序，[请参阅此示例小提琴](http://jsfiddle.net/desandro/3nY9V/)。排序的[文档在这里](http://isotope.metafizzy.co/docs/sorting.html)。您只需要在每个 div 上将绿色或蓝色作为数据类别。或者，您也可以使用一个类。[在这里查看](http://jsfiddle.net/desandro/5UwXn/)如何使用数据类别进行排序。就是这么简单。另一个[在这里得到了很好的解释](http://www.designbysweet.co.uk/blog_resources/isotope/)。现在，您只需要一点编程来适应您的情况。但是，再一次，这一切都在原始的排序文档中。

# c - fork() 的不同输出

> ID：11964027
> 
> 赞同：2
> 
> 时间：2012-08-15T04:15:23.527
> 
> 标签：c, fork, system-calls

谁能解释为什么输出

```
main()   
{   
    printf("hello ");   
    fork();   
    printf("hello ");   
} 
```

是：

> 你好你好你好你好

和输出：

```
main()   
{   
    printf("hello\n");   
    fork();   
    printf("hello ");   
} 
```

是：

> 你好
> 你好你好

\n 对缓冲有什么不同？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-15T04:17:39.093

当您`fork`复制过程的内存时。这包括`stdio`缓冲区，因此如果`hello`停留在缓冲区中，它将由两个进程打印。两个进程都继续他们的业务并最终刷新他们的缓冲区，你会看到两次“你好”。

现在*在大多数实现*中， stdout 是行缓冲的，这意味着 a`\n`会触发刷新。因此，当`fork`发生这种情况时，缓冲区是空的。防止这种情况的可靠方法是在分叉之前冲洗所有内容。

### 编辑

> 那么为什么 hello 在第二个输出的第二行出现两次

现在有两个进程（父进程和子进程）执行相同的代码，因此`printf`执行了两次。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-15T04:41:32.727

虽然 cnicutar 的回答描述了常见实现中发生的事情背后的机制，但核心问题是您的程序正在调用未定义的行为。POSIX 规定了为打开文件切换“活动句柄”的规则：

[http://pubs.opengroup.org/onlinepubs/9699919799/functions/V2_chap02.html#tag_15_05_01](http://pubs.opengroup.org/onlinepubs/9699919799/functions/V2_chap02.html#tag_15_05_01)

`fork`是文件的新句柄出现的一种情况，除非您已准备好在 之前切换活动句柄`fork`，否则在 之后使用它们是未定义的行为`fork`：

> 请注意，在 fork() 之后，存在两个句柄，而之前存在一个句柄。应用程序应确保，如果两个句柄都可以访问，它们都处于另一个可以首先成为活动句柄的状态。应用程序应为 fork() 做好准备，就像它是活动句柄的更改一样。（如果其中一个进程执行的唯一操作是 exec 函数或 _exit()（不是 exit()）之一，则永远不会在该进程中访问句柄。）

# php - 有人能告诉我这个简单的 PHP 有什么问题吗

> ID：11964030
> 
> 赞同：1
> 
> 时间：2012-08-15T04:15:45.983
> 
> 标签：php

```
 <?php
  header("Content-type: text/xml");
  $names = array (
   "John Smith", "John Jones", "Jane Smith", "Jane Tillman",
   "Abraham Lincoln", "Sally Johnson", "Kilgore Trout",
   "Bob Atkinson","Joe Cool", "Dorothy Barnes",
   "Elizabeth Carlson", "Frank Dixon", "Gertrude East",
   "Harvey Frank", "Inigo Montoya", "Jeff Austin",
   "Lynn Arlington", "Michael Washington", "Nancy West" );
if (!$query) {
   $query=$_GET['query'];
}
echo "<?xml version=\"1.0\" ?>\n";
echo "<names>\n";
while (list($k,$v)=each($names)) {
   if (stristr($v,$query)) {
      echo "<name>$v</name>\n";
   }
}
echo "</names>\n";
?> 
```

如您所见，此 PHP 只是在数组中查找名称。
我将此 php 文件放在我的 xampp 根目录中，然后在浏览器中键入 search.php?query=John，然后它告诉我
*此页面包含以下错误：第 2 行第 1 列的错误：文档末尾的额外内容下面是第一个错误之前的页面渲染。*
怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T04:26:54.240

试试这个：

```
 <?php
  header("Content-type: text/xml");
  $names = array (
   "John Smith", "John Jones", "Jane Smith", "Jane Tillman",
   "Abraham Lincoln", "Sally Johnson", "Kilgore Trout",
   "Bob Atkinson","Joe Cool", "Dorothy Barnes",
   "Elizabeth Carlson", "Frank Dixon", "Gertrude East",
   "Harvey Frank", "Inigo Montoya", "Jeff Austin",
   "Lynn Arlington", "Michael Washington", "Nancy West" );
var $query = NULL;

if (isset($_GET['query'])) {
   $query=$_GET['query'];
}
echo "<?xml version=\"1.0\" ?>\n";
echo "<names>\n";
while (list($k,$v)=each($names)) {
   if (stristr($v,$query)) {
      echo "<name>$v</name>\n";
   }
}
echo "</names>\n";
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T04:27:08.570

我认为问题在于 -

```
if (!$query) {
   $query=$_GET['query'];
} 
```

当我运行您的代码时，上面的代码出现错误。代码块不会做任何事情，因为 $query 似乎没有设置。

试试这个并确保设置了 $_GET["query"] 变量：

```
 $query=NULL;
    if (isset($_GET["query"])) {
       $query=$_GET['query'];
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T04:26:10.693

您必须 `$query = null;`在使用它之前初始化变量。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-15T04:39:05.223

改变

```
if (!$query) {
   $query= $_GET['query'];
} 
```

至

```
if (!isset($query)) {
   $query= $_GET['query'];
} 
```

# c++ - 将 c++ 代码从 Linux 移植到 Windows 时要记住哪些要点？

> ID：11964036
> 
> 赞同：4
> 
> 时间：2012-08-15T04:16:32.380
> 
> 标签：c++, compilation, porting

我已经开始移植一个涉及 C++、qt、MySql 代码的项目。这些代码是为 Linux 编写的，我正在将它们移植到 Windows。所以我的问题是，在将这些代码从 Linux 移植到 Windows 时，是否有任何一般性要点需要牢记？请帮帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T21:15:47.813

我正在做一个类似的项目，到目前为止我注意到的是路径名从 Unix 到 Windows 是不同的，两者之间的头文件并不完全相同，而且变量的大小有时也不同。这里还有一些有用的链接：

[http://www.willydev.net/descargas/prev/UNIX.pdf](http://www.willydev.net/descargas/prev/UNIX.pdf)

[http://suacommunity.com/dictionary/index.php](http://suacommunity.com/dictionary/index.php)

# php - WSDL PHP 中的复杂类型未映射

> ID：11964038
> 
> 赞同：2
> 
> 时间：2012-08-15T04:16:41.063
> 
> 标签：php, soap, wsdl, complextype

我是 WSDL 的新手，遇到了复杂类型的问题。基本上它好像输入消息没有使用 complexType 作为输入消息的类型。

我故意在输出消息上拼错了名称空间，以便可以返回传递给服务器的内容。返回的是客户端代码中发送的所有内容。我期望的是，如果让 soap 转换任何类型以匹配 WSDL 并去除任何额外内容，或者至少抛出一个错误。

我的代码是否有问题，或者我对输入应该发生什么的理解有问题？

提前致谢。

客户：

```
ini_set("soap.wsdl_cache_enabled", "0");

$client = new SoapClient('http://example.com/Service_v1.wsdl', array("trace" => 1));

$request['UAT'] = 'fdgdfg';
$request['TemplateID'] = '236';
$request['To'] = 'email@address.com';
$request['From'] = 'mail@address.com';
$request['Org'] = 'PPRG';
$request['Order'] = 'order_number';
$request['Fake'] = 'fakefake';
$request['DeliverTimestamp'] = '2012-09-01 00:00:00';

var_dump($client->newEmail($request));

echo "<br><br><br>" .htmlentities($client->__getLastRequest() ); 
```

服务器：

```
ini_set("soap.wsdl_cache_enabled", "0");

class CreateEmail {

function newEmail($request) {
    return array('Status' => $request, 'ReferenceID' => 123);
    }
}

$server = new SoapServer("Service_v1.wsdl");

$server->setClass("CreateEmail");

$server->handle(); 
```

WSDL：

```
<definitions name="Service_v1"  targetNamespace="http://example.com/Service_v1" xmlns="http://schemas.xmlsoap.org/wsdl/"    xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/"  xmlns:soap12="http://schemas.xmlsoap.org/wsdl/soap12/"  xmlns:soapenc='http://schemas.xmlsoap.org/soap/encoding/'   xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/"   xmlns:xsd="http://www.w3.org/2001/XMLSchema">

<wsdl:types>
    <xsd:element name="TransactionDetail">
        <xsd:complexType>
            <xsd:complexContent mixed="true">
                <xsd:restriction base="xsd:anyType">                    
                    <xsd:element name="UAT" type="xsd:boolean" minOccurs="0" maxOccurs="1"/>
                    <xsd:element name="TemplateID" type="xsd:integer" minOccurs="1" maxOccurs="1"/>
                    <xsd:element name="To" type="xsd:string" minOccurs="1" maxOccurs="1"/>
                    <xsd:element name="From" type="xsd:string" minOccurs="1" maxOccurs="1"/>
                    <xsd:element name="Org" type="xsd:string" minOccurs="1" maxOccurs="1"/>
                    <xsd:element name="Order" type="xsd:string" minOccurs="1" maxOccurs="1"/>
                    <xsd:element name="DeliverTimestamp" type="xsd:dateTime" minOccurs="0" maxOccurs="1"/>
                </xsd:restriction>
            </xsd:complexContent>
        </xsd:complexType>
    </xsd:element>

</wsdl:types>

<message name="CreateEmailRequest">
    <part name="emailInfo" element="tns:TransactionDetail"/>
</message>

<message name="CreateEmailReply">
    <part name="Status" type="xs:boolean"/>
    <part name="ReferenceID" type="xsd:integer"/>
</message>

<portType name='CreateEmailPortType'>
    <operation name='newEmail'>
        <input message='tns:CreateEmailRequest'/>
        <output message='tns:CreateEmailReply'/>
    </operation>
</portType>

<binding name='CreateEmailBinding' type='tns:CreateEmailPortType'>
    <soap:binding style='rpc' transport='http://schemas.xmlsoap.org/soap/http'/>

    <operation name='newEmail'>
        <soap:operation soapAction='urn:xmethods-delayed-quotes#newEmail'/>
        <input>
            <soap:body use='encoded' namespace='urn:xmethods-delayed-quotes' encodingStyle='http://schemas.xmlsoap.org/soap/encoding/'/>
        </input>

        <output>
            <soap:body use='encoded' namespace='urn:xmethods-delayed-quotes' encodingStyle='http://schemas.xmlsoap.org/soap/encoding/'/>
        </output>
    </operation>
</binding>

<service name='CreateEmailService'>
  <port name='CreateEmailPort' binding='CreateEmailBinding'>
    <soap:address location='http://example.com/CreateEmail.php'/>
  </port>
</service>

</definitions> 
```

# python - 动态变量创建

> ID：11964039
> 
> 赞同：0
> 
> 时间：2012-08-15T04:16:47.973
> 
> 标签：python, variables, dynamic

我的问题是如何“动态”创建变量。我正在尝试生成具有随机属性集的对象。

```
from random import randint, choice

class Person(object):
    def __init__(self):
      self.attributes = []    

possible_attributes= ['small', 'black', 'scary', 'smelly', 'happy'] # idk, random
chance = randint(1,5)

chosen_attributes = []
for i in xrange(chance):
    #psuedo code...
    local_var = choice(possible_attributes)
    if local_var not in chosen_attributes:
        VAR = local_var # VAR needs to be dynamic and 'global' for use later on
        chosen_attributes.append(local_var)
        Person.attributes.append(local_var) 
```

我很肯定我想要这样做不是一个好方法，所以如果有人理解我在寻找什么并且可以提供更好的方法（一种适用于初学者的方法），我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T04:18:34.967

要将属性添加到类的实例，您可以使用`.__dict__`：

```
class Person(object):
    def addattr(self,x,val):
        self.__dict__[x]=val 
```

**输出：**

```
>>> a=Person()
>>> a.addattr('foo',10)
>>> a.addattr('bar',20)
>>> a.foo
10
>>> a.bar
20
>>> b=Person()
>>> b.addattr('spam','somevalue')
>>> b.spam
'somevalue' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-15T04:40:31.603

好吧，我不确定您要在这里实现什么目标，但是这里可能有几件事....

```
class Person(object):
    def __init__(self):
        self.attributes = [] 
```

这定义了一个类对象，您可以从中创建对象，这些对象包含`attributes`我们从`__init__`or 构造函数中看到的，正如它在某些其他语言中所调用的那样。

但是你有

```
Person.attributes.append(local_var) 
```

这`Person`是一个类对象，它确实没有 where 定义的属性，因为它仅适用于从此类创建的对象...

您可以创建一个新人并向他们添加适当的属性。

```
>>> me = Person()
>>> me.attributes.append('humble') 
```

其次，我们真的不应该直接访问属性，因为任何东西都可以附加到列表中，包括重复的属性。

那么为什么不简单地添加一个添加属性的函数。

```
class Person(object):
    def __init__(self):
        self._attributes = [] # note any variable starting with _ is meant to be private 
    def add_attribute(attribute):
        if attribute not in self._attributes:
            self._attributes.append(attribute) 
```

如果性能是一个问题，我们可以使用 a`set()`而不是，`[]`因为它不允许重复条目并且非常快速地检查任何查找，缺点是值必须是可散列的，即字符串或整数或其他简单的数据类型......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-15T04:22:22.193

使用`vars`. 例如：

```
>>> import math
>>> class foo: pass
>>> vars(foo)
{'__module__': '__main__', '__doc__': None}
>>> vars(foo)['fn']=math.sin
>>> foo.fn(2)
0.9092974268256817
>>> vars(foo)
{'__module__': '__main__', '__doc__': None, 'fn': <built-in function sin>} 
```

如您所知，方法只是多了一个参数的函数。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-15T04:24:49.223

虽然我不能真正说出你需要这个做什么，但我猜你实际上并不想要全局变量，只是一个具有随机/动态属性集的 Person 对象。为此，您需要`setattr`和`random.sample()`：

```
crazy_person = Person()
selected_attribute_names = random.sample(possible_attributes, 3)
for attribute_name in selected_attribute_names:
    setattr(crazy_person, attribute_name, True)

# optional -- if you want to have a list of attributes, just copy that in:
crazy_person.attributes = selected_attribute_names
# vars(crazy_person).keys() will give you more or less the same thing though, for free

# hasattr(crazy_person, 'small') will tell you if you picked 'small'
# if we chose 'small', then from here on, crazy_person.small will be True as well 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-15T04:20:49.193

鉴于您的定义，这就是我可以构造具有随机属性集的对象的方式：

```
import random

possible_attributes= ['small', 'black', 'scary', 'smelly', 'happy']

class Person(object):
    def __init__(self):
      self.attributes = random.sample(possible_attributes, random.randint(0, len(possible_attributes))) 
```

这会从您的可能属性列表中选择随机数量的属性。

```
>>> print Person().attributes
['small', 'smelly']
>>> print Person().attributes
['scary', 'smelly', 'happy'] 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-15T04:21:29.340

通常，您不想添加全局命名空间，而不是污染全局命名空间。字典提供了一种类似命名空间的方式来访问所有内容，但如果你真的需要，使用 globals()[x] =something 来修改项目，或者使用非常讨厌的

```
exec "var_name=somehting" 
```

# java - Java：类的终结器？

> ID：11964049
> 
> 赞同：1
> 
> 时间：2012-08-15T04:18:42.150
> 
> 标签：java

我有一个对 Spring 的 ApplicationContext 有静态引用的类。当类即将被卸载时，我需要清除该上下文并运行其单例 bean 的 destroy 方法。那么，在卸载类时是否会调用一些类级终结器回调，以便我可以清除该回调中的上下文？

我对使用 Wea​​kReferenceQueue 和计数器来跟踪该类的未引用对象有一个模糊的想法，这样我就可以检测到该类何时没有活动对象，但这仍然不会告诉我何时卸载该类本身。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T04:43:38.080

“卸载一个类”的方法是让所有类都无法访问以及加载它们的 ClassLoader。请参阅[在 java 中卸载类？](https://stackoverflow.com/questions/148681/unloading-classes-in-java)有关此过程的完整说明。

类是与 Java 中的任何其他对象一样的对象。所以对 finalizer() 的经典调用也是为类实现的。此方法由垃圾收集器调用，而不是您明确调用。

没有其他标准方法可以在 Java 中卸载类或对象。如果没有其他对象引用包含 dispose() 的对象（称为“RefCount”），您可以通过实现一个方法（例如“dispose()”）可以自己执行一些操作。

要知道对象的当前引用计数或真正强制垃圾收集，您必须使用[JVM Tool Interface](http://docs.oracle.com/javase/1.5.0/docs/guide/jvmti/jvmti.html)。

您也可以尝试调用[`System.runFinalization()`](http://docs.oracle.com/javase/6/docs/api/java/lang/System.html#runFinalization%28%29)，但 JVM 不保证将调用所有终结器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T06:11:00.070

> 那么，在卸载类时是否会调用一些类级别的终结器回调。

我查看了明显的地方，据我所知，没有这样的回调。除了破解JVM本身之外，我想不出一种方法来实现它。

# clojure - 将两个向量约束在同一个域中但不是彼此的成员

> ID：11964055
> 
> 赞同：5
> 
> 时间：2012-08-15T04:19:07.107
> 
> 标签：clojure, clojure-core.logic

我使用 clojure 有一段时间了，但刚开始使用 core.logic。

给定一个域，`1 2 3 4`我想得到一个由两个向量组成的向量，比如`([[1 2] [3 4]])`.

*注意：这只是我真正想做的简化版本。:) 见：[https ://github.com/adamhoward/lineup](https://github.com/adamhoward/lineup)*

我在网上找到了非会员的定义：

```
(defne not-membero [x l]
  ([_ []])
  ([_ [?y . ?r]]
    (!= x ?y)
    (not-membero x ?r))) 
```

我正在尝试像这样使用它：

```
(run 1 [q]
     (fresh [w x
             y z]
            (== q [[w x]
                   [y z]])
            (infd w x y z (domain 1 2 3 4))
            (everyg distinctfd [[w x] [y z]])
            (everyg #(not-membero % [y z]) [w x]))) 
```

在 Emacs 中运行它会给我一条`Evaluation aborted.`消息。

当我尝试退出时`membero`，`not-membero`我会回来`([[1 2] [1 2]])`，这对我来说很有意义。第一个向量中的每个元素`[w x]`都是第二个向量的成员`[y z]`。

**但是**，当我打电话时，`run 2`我会回来`([[1 2] [1 2]] [[1 2] [1 3]])`。我不明白`[[1 2] [1 3]]`上述规则如何正确。我理解不`everyg`正确吗？任何指导（包括 rtfmanual、rtfbook、rtfdissertation）将不胜感激。

谢谢。

**编辑：**可能已经解决了这个问题。

仍然不确定来自`membero`但不是`not-membero`目标的奇怪结果，我发现我可以这样做：

```
(everyg #(distinctfd (conj [y z] %)) [w x]) 
```

`[w x]`conj'd to的每个元素都`[y z]`包含所有不同的值。这可能比非会员效率低，所以我仍然愿意接受任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T12:41:42.133

您的示例似乎与此相同：

```
(run* [q]
  (fresh [w x y z]
    (fd/in w x y z (fd/domain 1 2 3 4))
    (== q [[w x] [y z]])
    (fd/distinct [w x y z]))) 
```

但是看到足球问题...

```
(ns test
  (:refer-clojure :exclude [==])
  (:use clojure.core.logic)
  (require [clojure.core.logic.fd :as fd]))

(defn game [g] (fresh [a b c d e] (== g [a b c d e])))

(def players (range 1 11))

(defne not-membero [x l]
  ([_ []])
  ([_ [?y . ?r]]
    (!= x ?y)
    (not-membero x ?r)))

(defne plays [player games]
  ([_ []])
  ([_ [?f ?s . ?r]]
   (membero player ?f) ; if you play this game
   (not-membero player ?s) ; do not play next game
   (plays player ?r))
  ([_ [?f ?s . ?r]]
   (membero player ?s)
   (not-membero player ?f)
   (plays player ?r)))

(defne goalies [games]
  ([[[_ _ _ _ ?a]
     [_ _ _ _ ?b]
     [_ _ _ _ ?c]
     [_ _ _ _ ?d]]]
    (fd/in ?a ?b ?c ?d (apply fd/domain players))
    (not-membero 1 [?a ?b ?c ?d]) ; star player != goalie
    (fd/distinct [?a ?b ?c ?d]))) ; not goalie twice

(defn -main [& args]
  (run 1 [q]
    (fresh [a b c d]
      (game a)
      (game b)
      (game c)
      (game d)
      (== q [a b c d])
      (goalies q)
      (everyg #(plays % q) players)))) 
```

# php - php preg_match 任意模式的正则表达式

> ID：11964057
> 
> 赞同：1
> 
> 时间：2012-08-15T04:19:09.883
> 
> 标签：php, regex, preg-match

我想用 php preg ( `preg_match`) 验证一个模式。我的模式如下所示：

```
[ [3 or 4 digits] - ][ 7 digits]{1} 
```

例子：

```
345-4444444
9800-1120222
1111111
1000000
0233-7777777 
```

我试过这个：

```
pattern = "/\A[\d{3,4}[-]{0,1}]{0,1}\d{7}\z/"; 
```

但这是不正确的。请给出正确的模式。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-15T04:23:37.887

试试这个：

```
/^(\d{3,4}-)?\d{7}$/ 
```

演示：[http ://www.rubular.com/r/aOAyuNsVpH](http://www.rubular.com/r/aOAyuNsVpH)

# c# - 如何使用 C# 替换包含反斜杠的字符串中的某些值？

> ID：11964058
> 
> 赞同：2
> 
> 时间：2012-08-15T04:19:15.810
> 
> 标签：c#

我有以下内容：

```
var topic = "<option value=\"123\">X</option>\r\n  <option value=\"456\">XX</option>\r\n"; 
```

还有一个看起来像这样的字符串：

```
var topicValue = "456"; 
```

有没有一种方法可以在 topicValue 匹配时创建一个如下所示的新主题字符串：

```
var topic = "<option value=\"123\">X</option>\r\n  <option value=\"456\" selected=\"selected\" >XX</option>\r\n"; 
```

我不确定的是如何创建一个正则表达式，它可以与我的主题字符串中的反斜杠一起使用。还有比使用正则表达式更简单的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T06:27:16.617

将 XML 作为字符串进行操作从来都不是一个好主意。看起来您在`topic`. 你为什么不把它当作一个 XML 来对待。首先让我们让它成为一个有效的 XML，只是为了使用它。

```
 <options>
              <option value=\"123\" isSelectd=\"false\">X</option>
              <option value=\"456\" isSelectd=\"false\">XX</option>
        </options> 
```

此处添加了根节点`<options>`，并且还添加了一个新属性`isSelectd`，该属性最初对于两个子节点都是错误的。`456`应该搜索和更新具有值的节点。现在使用[XmlDocument](http://msdn.microsoft.com/en-us/library/system.xml.xmldocument.aspx)类，您可以像这样轻松实现您想要的。

```
 var topic = "<options>" + 
               "<option value=\"123\" isSelectd=\"false\">X</option>" +
               "<option value=\"456\" isSelectd=\"false\">XX</option>" + 
               "</options>";

        int selectedValue = 456;

        XmlDocument xmlDoc = new XmlDocument();
        xmlDoc.LoadXml(topic);
        foreach (XmlNode node in xmlDoc.ChildNodes[0].ChildNodes)
        {
            int value = Convert.ToInt32(node.Attributes[0].Value.ToString());
            if (value == selectedValue)
                node.Attributes[1].Value = "ture";
        }

        topic = xmlDoc.InnerXml; 
```

主题现在包含以下 XML，

```
 <options>
              <option value=\"123\" isSelectd=\"false\">X</option>
              <option value=\"456\" isSelectd=\"true\">XX</option>
        </options> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T05:30:28.107

把它写成它是如何写的。例如：

```
 string myString = "My name is \"John\"";
        Console.WriteLine(myString);
        myString = myString.Replace("\"John\"", "\"Jony\"");
        Console.WriteLine(myString);
        Console.ReadLine(); 
```

尝试下面的代码来实现你想要的：

```
 string topic = "<option value=\"123\">X</option>\r\n  <option value=\"456\">XX</option>\r\n";
        Console.WriteLine(topic);
        string topicValue = "456";
        string mustBeReplaced = string.Empty;
        string replaceResult = string.Empty;

        if (topic.Contains(topicValue))
        {
            mustBeReplaced = "value=\"" + topicValue + "\"";
            replaceResult = mustBeReplaced + " selected=\"selected\"";
            topic = topic.Replace(mustBeReplaced, replaceResult);
        }

        Console.WriteLine(topic);
        Console.ReadLine(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-15T05:32:41.193

好的，这里是代码。请注意，这仅在空格和格式一致时才有效：

```
var topic = // topic here

const string optionFormat = @"<option value=\""{0}\""";

var topicValue = // topic value here

var topicToReplace = String.Format(optionFormat, topicValue);
var replaced = topic.Replace(topicToReplace , topicToReplace + @" selected=\""selected\"""); 
```

# javascript - 如何使用 Zombie.js 模拟按 Enter 键

> ID：11964059
> 
> 赞同：3
> 
> 时间：2012-08-15T04:19:22.400
> 
> 标签：javascript, zombie.js

你知道如何`Enter`用 Zombie.js 按键吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T11:18:54.590

仅使用僵尸 API 还没有办法做到这一点。这是因为`.fire()`方法不允许您传递除事件名称之外的任何事件数据（这对于*说明*哪个 keyCode 与该键事件相关联是必要的）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-31T18:25:35.607

WTK 是正确的，并且在zombie.js 中没有原生方式，但我认为您可以添加一个 javascript 函数来模拟 enter 按键并从zombie.js 触发它，如下所示：

如果您可以访问页面源，请在您的页面上添加一个函数来模拟回车键按下：

```
function pressEnterKey(elmSelector){
  elmSelector = elmSelector || 'document'
  var e = jQuery.Event("keypress");
  e.which = 13; 
  e.keyCode = 13;
  $(elmSelector).trigger(e);
} 
```

从zombie.js 触发它：

```
browser.evaluate("pressEnterKey()"); 
```

如果您无权访问源代码，则可以使用类似的方式在页面上注入脚本。记得在确保页面准备好之后使用 browser.wait ：

```
var injectedScript = browser.document.createElement("script");
injectedScript.setAttribute("type","text/javascript");
injectedScript.innerText = '...pressEnterKey function text here...'
browser.body.appendChild(injectedScript); 
```

# c++ - 如何在 Waffles c++ API 中预测实例的类别

> ID：11964060
> 
> 赞同：0
> 
> 时间：2012-08-15T04:19:26.583
> 
> 标签：c++, machine-learning, classification

我的名字是titiri，很高兴我找到了可以分类的华夫饼库。我认为 waffle 是一个很好的机器学习算法库。我有一个关于华夫饼图书馆的问题。

训练模型后，我想打印一个预测，例如：

我的代码是：

```
GMatrix Instance(1,8);//instance have 8 real attribute and 
double out;// value in attribute 'class' is nomial 
Instance[0][0]=6;
Instance[0][1]=148;
Instance[0][2]=72;
Instance[0][3]=35;
Instance[0][4]=0;
Instance[0][5]=33.6;
Instance[0][6]=0.62;
Instance[0][7]=50;
modell->predict(Instance[0],&out);
cout<<&out; 
```

此代码不起作用，并且不打印任何内容。请帮我！我需要什么来预测一个实例的类，然后打印它的类，有一个良好的性能“预测”方法来分类一个实例？还是有更好的方法来完成这项工作？

谢谢，快乐并获胜

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T17:39:37.150

我怀疑您的代码不打印任何内容的原因是因为您忘记了`endl`. （这就是[Joachim Pileborg](https://stackoverflow.com/users/440558/joachim-pileborg)在他的评论中提到的。）

如果您使用的是 Visual Studio，您可能希望在代码末尾添加一个断点（可能在 return 语句上），因为在某些模式下，它可以在您看到输出之前关闭您的应用程序，这可能使它看起来像如果什么都没发生。

# 例子

下面是一个对我来说很好的完整示例。它包括您的实例。它从中加载一个 K-最近邻学习器`2blobs_knn.json`，然后在其上评估您的实例。您可以将该文件名替换为由 waffles 工具生成的任何经过训练的监督模型的名称。

使用我使用的模型，程序打印“1”并退出。

如果你想使用我测试我的代码的确切模型（如果你构建学习器的方法是问题）请参阅示例代码后面的部分。

```
#include <GClasses/GMatrix.h>
#include <GClasses/GHolders.h>
#include <GClasses/GRand.h>
#include <GClasses/GLearner.h>
#include <GClasses/GDom.h>
#include <iostream>
#include <cassert>

using namespace GClasses;
using std::cout; using std::endl;

int main(int argc, char *argv[])
{
  //Load my trained learner from a file named 2blobs_knn.json and put
  //it in hModel which is a shared-pointer class.
  GLearnerLoader ll(GRand::global());
  GDom dom;
  dom.loadJson("2blobs_knn.json");
  Holder<GSupervisedLearner> hModel(ll.loadSupervisedLearner(dom.root()));
  assert(hModel.get() != NULL);

  //Here is your code
  GMatrix Instance(1,8);// Instance has 8 real attributes and one row
  double out;           // The value in attribute 'class' is nominal 
  Instance[0][0]=6;
  Instance[0][1]=148;
  Instance[0][2]=72;
  Instance[0][3]=35;
  Instance[0][4]=0;
  Instance[0][5]=33.6;
  Instance[0][6]=0.62;
  Instance[0][7]=50;

  hModel.get()->predict(Instance[0],&out);
  cout << out << endl;
  return 0;
} 
```

# 我在示例中使用的学习器是如何构建的

为了获得学习者，我使用 Matlab（[Octave](http://en.wikipedia.org/wiki/GNU_Octave)是免费的模仿者）生成一个 CSV 文件，其中 0 类是一个 8 维球面单位高斯，以 (0,0,0,0,0,0,0,0 为中心) 和第 1 类具有相同的分布，但集中在 (2,2,2,2,2,2,2,2)

```
m=[[randn(200,8);randn(200,8)+2], [repmat(0,200,1);repmat(1,200,1)]];
csvwrite('2blobs.csv',m) 
```

然后，我拿了那个 CSV，用它把它转换成 ARFF

```
waffles_transform import 2blobs.csv > 2blobs.arff 
```

接下来，我在文本编辑器中将最后一个属性从 更改为`@ATTRIBUTE attr8 real`， `@ATTRIBUTE class {0,1}`因此它是名义上的。

最后，我用

```
waffles_learn train 2blobs.arff knn -neighbors 10 > 2blobs_knn.json 
```

# iphone - 模态视图在关闭后不会自行释放

> ID：11964061
> 
> 赞同：0
> 
> 时间：2012-08-15T04:19:30.247
> 
> 标签：iphone, objective-c, ios

我一直面临着一个奇怪的问题，即取消模态视图。

我提出一个这样的模态视图：

```
 ResepiDetail *detail =(ResepiDetail*)[[ResepiDetail alloc]init];
 [self presentModalViewController:detail animated:YES]; 
```

并使用后退按钮将其关闭：

```
[self dismissModalViewControllerAnimated:YES]; 
```

在此之后，视图将自行关闭并返回到前一个视图，但它不会从内存中释放自己。我通过发送通知消息发现了它，并且该视图收到了它。此外，我尝试跟踪 VM 内存分配，并且该视图似乎仍在内存中。

我正在使用 ARC，并且将相同的方法用于另一个完美的视图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T15:17:32.817

代码很好，正如发布的那样，所以这里有一些关于如何继续的提示：

*确定*您的视图控制器没有被释放的可靠方法是覆盖 dealloc 并记录可识别的内容。您仍然可以在 ARC 中执行此操作，只是不要显式调用`super`. 如果您没有按预期看到日志，那么您就有问题了。

假设你已经确定你绝对有问题，那么问题就变成了寻找保留周期。如果问题是一个实例`ResepiController`没有被释放，那么你需要寻找......

1.  `ResepiController`类之外的任何`strong`引用它的代码。例如，如果您的班级注册为其他班级的代表，请确保该代表没有使用`strong`引用。
2.  可能已隐式保留的任何内部块`self`。在您认为应该发布的时候，您的程序中是否有任何块可能引用了您的控制器？

# android - 如何在我的 DBAdapter 类中创建外键？

> ID：11964064
> 
> 赞同：0
> 
> 时间：2012-08-15T04:19:50.293
> 
> 标签：android, database, foreign-keys

我已经创建了一个数据库适配器，其中包含我数据库中的所有表，但是你们都可以看到 name_id 存在于 3 个表中。但它是 CREATE_TABLE_LIKES 和 CREATE_TABLE_DISLIKES 中的外键，所以有什么办法可以使它成为 2 个表中的外键？任何帮助将不胜感激。谢谢！

数据库适配器的代码：

```
 package main.page;

import android.content.Context;
import android.database.SQLException;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteDatabase.CursorFactory;
import android.database.sqlite.SQLiteOpenHelper;
import android.util.Log;

public class AnniversaryDBAdapter
{

    private static final String DATABASE_NAME = "AllTables";
    private static final int DATABASE_VERSION = 2;

    private static final String CREATE_TABLE_BUDDIESLIST = " create table buddiesList(name_id integer primary key autoincrement, name text not null);";
    private static final String CREATE_TABLE_LIKES = " create table likes(name_id integer primary key autoincrement,likes text not null);";
    private static final String CREATE_TABLE_DISLIKES = " create table dislikes(name_id integer primary key autoincrement, dislikes text not null);";
    private static final String CREATE_TABLE_EVENTS = "create table events(date_id integer primary key autoincrement, name_id text not null, date text not null, title_id text not null, starttime text not null, endtime text not null);";
    private static final String CREATE_TABLE_TITLE = "create table titles(title_id integer primary key autoincrement, name text not null, image text not null);";

    private final Context context;
    private static final String TAG = "DBAdapter";

    private DatabaseHelper DBHelper;
    private SQLiteDatabase db;

    public AnniversaryDBAdapter(Context ctx)
    {
        this.context = ctx;
        DBHelper = new DatabaseHelper(context);
    }

private static class DatabaseHelper extends SQLiteOpenHelper
{

    DatabaseHelper(Context context)
    {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);
    }

    @Override
    public void onCreate(SQLiteDatabase db)
    {
        db.execSQL(CREATE_TABLE_BUDDIESLIST);
        db.execSQL(CREATE_TABLE_LIKES);
        db.execSQL(CREATE_TABLE_EVENTS);
        db.execSQL(CREATE_TABLE_TITLE);
        db.execSQL(CREATE_TABLE_DISLIKES);
    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion)
    {
        Log.w(TAG, "Upgrading database from version "+oldVersion+" to "+newVersion+", which will destroy all old data");

        onCreate(db);

    }

}

public AnniversaryDBAdapter open() throws SQLException
{
    this.db = this.DBHelper.getWritableDatabase();
    return this;
}

public void close()
{
    this.DBHelper.close();
}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-03T18:17:11.260

不能使用具有自动增量的外键，因为它应该始终是另一个表中存在的值，创建一个新列只是为了建立这种关系可能更简单。

# .net - 数据库中的公司层次结构数据访问级别实现

> ID：11964067
> 
> 赞同：0
> 
> 时间：2012-08-15T04:20:23.210
> 
> 标签：.net, sql-server, database-design, data-structures

![在此处输入图像描述](../Images/c456b0543cc3fc6094ac346b7c2fbe20.png)

我想在数据库中为应用程序创建给定的公司结构，并希望根据该结构遍历员工详细信息。下面给出的问题。

当员工登录系统时，他应该能够看到在他的级别工作的员工的详细信息。比如“主管B”登录系统，应该可以看到员工A、员工B、员工C、员工C的下属人员的详细信息。

同时，C 员工向 C 组长汇报，C 组长只能查看 C 员工的详细信息，不能查看他的下级员工。这意味着，当 C 组长登录时，他可以查看他的子员工和员工 C。

但是部门主管 D 可以查看员工 C 的详细信息和他的子员工的详细信息，因为他具有对分支机构的完全访问权限，从员工 C 开始。这意味着他可以查看他的子员工以及员工 C 和他的子员工。

谁能帮我实现这个结构和数据库中的访问级别以及如何以有效的方式查询它们？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T12:12:36.927

解决这种层次结构遍历问题的常用方法是使用一种称为**访问数**的技术，我在[对这个问题的回答中对此](https://stackoverflow.com/questions/7420885/how-do-i-design-a-database-to-store-properties-selecting-attributes-by-synonyms/7423459#7423459)进行了详细描述。使用访问编号，您可以轻松找到层次结构中任何给定节点下方的所有节点的列表。

请注意，您仍将使用员工表上的内卷外键记录每个员工的直接报告上级。

对于您的情况，您还有常规报告层次结构之外的虚线报告（员工 C 到科长 C）。这意味着您将需要两种方法。第一种是使用访问次数进行定期报告，经理可以看到他们所有的直接和间接报告，然后是其他用于虚线报告的内容。

您似乎有两种用于虚线报告的规则。一些虚线主管可以看到下属，而另一些只能看到他们的虚线直属下属。由于人们可以有多个虚线主管，因此需要添加一个**交集表**来记录这些虚线关系。该交集表还可以包括**标志属性，该标志属性**指示虚线主管是否能够看到唯一的直接虚线下属或那个人和他们的所有下属。

无论哪种方式，虚线关系都直接记录在员工与其主管之间，而常规报告关系（可能是间接的）由访问人数管理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T12:41:04.693

您需要几个关于员工的自联接表。一个代表主管与员工的关系。第二个代表员工之间的同伴关系。

这是 PostgreSQL 的 SQL

如果存在 stackoverflow 级联，则删除模式；

创建架构stackoverflow；

将 search_path 设置为 stackoverflow，public；

创建表员工

(

```
id serial not null unique,

name text not null unique,

title text not null,

primary key ( id ) 
```

);

创建表格报告

(

```
supervisorid integer not null references employee ( id )  on delete cascade ,

subordinateid integer not null references employee ( id )
       check ( supervisorid !=  subordinateid ),

unique ( supervisorid, subordinateid ),

unique( subordinateid ) 
```

);

创建表对等

(

```
supervisorid integer not null references employee ( id )  on delete cascade ,

peerid integer not null references employee ( id )

       check ( supervisorid != peerid ),

unique ( supervisorid, peerid ) 
```

);

创建或替换视图直接报告为

```
 select  supervisor.id  as  "supervisor id", 

        supervisor.name as  "supervisor name",  

  reporting.id as "employee id", reporting.name as  "employee name"

from 

    employee  supervisor, employee reporting , reports

where 

supervisor.id = reports.supervisorid

and reporting.id = reports.subordinateid;

 create or  replace view peerreports as 
```

从 directreports、peer、employee 中选择 *

```
 where   

     employee.id = peer.peerid 

       and peer.supervisorid = directreports."supervisor id"; 
```

插入员工（姓名，职务）

```
values ( 'c head', 'c head'), 
       ( 'd head', 'd head'), 
       ('c emp1', 'c emp1' ) , 
       ('c emp2', 'c emp2' ) ;

insert  into reports 

select employee.id as "supervisorid",
        reportsto.id as "subordinateid" 

   from employee,  employee reportsto  

    where employee.name = 'c head'  

   and reportsto.name in ('c emp1',  'c emp2' )

   and  reportsto.name !=  employee.name ;

 insert into peer    

  select employee.id as "supervisorid",  
          peerto.id as "peer.peerid" 

   from employee, employee peerto

      where employee.name = 'c head' and peerto.name = 'd head' 

       and employee.id != peerto.id; 
```

以下是典型的查询

从员工中选择 *；

从报告中选择 *；

从直接报告中选择 *；

从同行中选择*；

select * from peerreports, employee where employee.name='d head';

# c# - 为什么我在使用 FileStream.Write 时会越界？

> ID：11964069
> 
> 赞同：3
> 
> 时间：2012-08-15T04:20:38.367
> 
> 标签：c#

当我执行此代码时。

```
Random R = new Random();
        byte[] BA = new byte[8192];
        R.NextBytes(BA);
        FileStream FS = new FileStream(@"D:\Test.txt", FileMode.Append);
        long end = FS.Seek(0, SeekOrigin.End);
        if (FS.CanWrite == true)
        {
            FS.Write(BA, (int)end, BA.Length);
            FS.Flush();
        }
        FS.Close(); 
```

它会在我第一次运行时工作。如果我再次尝试运行它，我会收到此错误。

> 数组的偏移量和长度超出范围或计数大于从索引到源集合末尾的元素数。

我不理解这个错误。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-15T04:33:39.383

你传递你的论点是错误的。在：

```
FS.Write(BA, (int)end, BA.Length); 
```

第二个参数指定要复制*的字节数组*中的偏移量，而不是您正在写入的文件中的偏移量。实际上，您在第一遍中复制了 8192 个字节，在第二遍中，您告诉 FileStream 从第 8193 个字节开始从 BA 复制，这当然会崩溃，因为它超出了范围。请参阅[MSDN 文档](http://msdn.microsoft.com/en-us/library/system.io.filestream.write.aspx)。

您可以简单地通过将 0 传递给 FS.Write 来修复它，告诉它从数组的开头开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T04:27:15.337

这只是说您正在尝试访问超出数组“边界”的地址的数据。

简单来说，假设您有一个包含 10 个元素的数组。如果你问“从第 5 个元素开始，给我接下来的 10 个元素”，你会期待什么？它会抛出一个错误并告诉你偏移量（在这种情况下是第 5 个元素）和长度（在这种情况下是 10）超出范围。

# ios - 为什么 ivar 即使在 ivar 被取消后仍保留一个块？

> ID：11964074
> 
> 赞同：0
> 
> 时间：2012-08-15T04:22:19.427
> 
> 标签：ios, automatic-ref-counting, block, retain-cycle

我们有这样的结构（ARC 代码）：

```
// load an object into an ivar using a block
self->objectLoader = [MyObject loadOnSuccess:^(MyObject *object) {

    // reference self from the block, so self is retained
    self->_object = object;

    // try to dereference the loader
    self->objectLoader = nil;        
} 
```

问题是对象永远不会释放，因为 self 永远不会完全释放。如果我将 self 替换为 weakSelf 版本，则该对象将成功解除分配。

有没有办法将 ivar 归零，以便释放它“持有”的块并且可以释放对象？

# html - 淡出框边界附近的文本并缩放图像以适应自动大小的父级

> ID：11964077
> 
> 赞同：1
> 
> 时间：2012-08-15T04:22:28.093
> 
> 标签：html, css

我试图淡出文本，而不是一个苛刻的剪辑溢出，文本在边缘消失（静态；不是动画效果）。我正在使用背景顶部的图像来导致淡入淡出（我可能在这种方法上有些偏离；让我知道......）

一切都很好，1px 高的图像在宽度/高度上完美地缩放......到最外面`<div>`。我希望它只是缩放以适应高度，`TOP-DIV-Text`但我不知道如何。

```
<div style="font-weight:bold; height: 100%; width: 200px; white-space: nowrap; overflow:hidden; background-color: #7E7EFF;" id="yomama">
<div>
  <img height="100%" style="position:relative; float:right;" width="50%" src="http://s12.postimage.org/o4bptewwp/fadeout.png" >
  <span style="color=green; font-size: 60px;">
  <u>
    TOP-DIV-Text
  </u>
  </span>
</div>
<div valign="top">
    <span style="color:red; font-size: 30px; white-space: nowrap;">
    <div>
    Middle-Div is a chatty guy
    <br>
    </div>
    <div style="color:blue">
    Bottom div has some more text
    </div>
    </span>
</div>
</div> 
```

[http://jsfiddle.net/ZEDFV/1/](http://jsfiddle.net/ZEDFV/1/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T04:40:26.603

您获得的结果是浮动图像的预期行为。不幸的是，它会溢出它的容器。

如果您希望图像保持在顶部 div 内，那么您需要绝对定位图像，请查看我更新的示例：http: [//jsfiddle.net/ZEDFV/2/](http://jsfiddle.net/ZEDFV/2/)

我将您的图片的 CSS 更新为如下：

```
.fader {
    position:absolute; 
    top:0;
    right:0;
    height:100%;
    width:50%;

} 
```

我将以下 CSS 添加到`div`包装图像的内容中：

```
.wrapper {
      position:relative; 
} 
```

我添加`position:relative`到包装 div 中，因为我们需要绝对定位图像，但相对于它所包含的 div 的边界。

# extjs - 文本字段为空时不显示错误消息

> ID：11964080
> 
> 赞同：2
> 
> 时间：2012-08-15T04:22:56.197
> 
> 标签：extjs, extjs4, extjs4.1

我有一个和一个按钮，如果留空或为空`textfield`，我想在用户单击按钮时弹出错误消息。我的代码如下；`Send``textfield`

`Send`根据我的代码，即使`textfield`值为空，我也可以单击按钮并提交。但是，当我单击文本字段并将其留空时，文本字段的边框会变为红色，并且当我`hover`超过时`textfield`会弹出一条错误消息。

我想要做的是，当用户单击“发送”按钮时，弹出一条错误消息（如果文本字段为空）。

```
 {
                        xtype: 'button',
                        text: 'Send',
                        action: 'send1'

                    },

                    xtype: 'textfield',                            
                        name: 'name',
                        fieldLabel: 'Name',
                        allowBlank: false,
                        blankText: 'Name left blank'
                    }, 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T13:38:54.213

```
 {
                    xtype: 'button',
                    text: 'Send',
                    action: 'send1'

                },
                {
                    xtype: 'textfield',
                    id:'nameField',
                    name: 'name',
                    fieldLabel: 'Name',
                    allowBlank: false,
                    blankText: 'Name left blank'
                } 
```

通过提供文本字段的 id，您可以在按钮的处理程序中使用以下代码

```
 if(Ext.getCmp('nameField').getValue().length== 0)
                   Ext.Msg.alert('FormSubmissionError','TextField should not be empty');
                else
                   Submit the form. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T11:34:46.207

如果您需要显示弹出消息，则需要在按钮单击处理程序中手动执行此操作。ExtJs 没有为此提供内置功能。但是您可以添加

```
formBind: true 
```

进入您的按钮定义，ExtJs 将禁用按钮，直到所有元素上的所有验证器都通过。

# c# - Switch 语句：并非所有代码路径都返回值

> ID：11964081
> 
> 赞同：0
> 
> 时间：2012-08-15T04:23:03.630
> 
> 标签：c#, switch-statement

我有一个枚举定义如下：

```
public enum CrystalTypeEnum { Red, White, Blue, Green }; 
```

我有一个静态函数，它返回给定枚举值的字符串表示：

```
public static string toString(CrystalTypeEnum type)
{
    switch (type)
    {
        case CrystalTypeEnum.Red:
            return "Red";
        case CrystalTypeEnum.White:
            return "White";
        case CrystalTypeEnum.Blue:
            return "Blue";
        case CrystalTypeEnum.Green:
            return "Green";
    }
} 
```

当我编译我的代码时，我收到以下错误：

> *CrystalType.toString(CrystalType.CrystalTypeEnum)：并非所有代码路径都返回值*

*当我的 switch 语句清楚地涵盖所有四种情况(Red, White, Blue, Green)*时，为什么我会收到此错误。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-15T04:28:29.000

如果没有`default:`控制权转移到 switch 语句之外（对于未由 case 处理的值）。这意味着如果您没有`default:`then 您需要在 switch 之后的 return 语句返回由方法的返回类型定义的类型的值。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-15T04:24:28.523

您需要指定一个默认部分。

```
switch (type) 
{ 
    case CrystalTypeEnum.Red: 
        return "Red"; 
    case CrystalTypeEnum.White: 
        return "White"; 
    case CrystalTypeEnum.Blue: 
        return "Blue"; 
    case CrystalTypeEnum.Green: 
        return "Green"; 
    default:
        //return what you need here
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-15T04:49:09.333

不要忘记在 switch\case 构造中使用此部分：

```
switch (type) 
{
    default:
        throw new ArgumentException("Incorrect CrystalTypeEnum");
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-15T04:39:57.080

> 当我的 switch 语句明确涵盖所有四种情况（红色、白色、蓝色、绿色）时，为什么会出现此错误。

因为总共有五个案例而不是四个。您可以将不是这些已定义枚举值之一的整数强制转换为`CrystalTypeEnum`类型，并且它仍然有效。

```
CrystalType.toString((CrystalTypeEnum)(42)); 
```

> 那么在switch语句中总是需要默认值吗？

不，您可以将 return 语句放在整个`switch`子句之后，或者只要“所有代码路径都返回一个值”即可。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-15T04:37:38.047

我知道 asstander 发布的答案可能是您正在寻找的，但是有一种优雅的方法可以做到这一点，它不需要任何 switch 语句。

您可以使用`Enum.GetName`方法来获取枚举值的字符串表示形式。请阅读[这里](http://msdn.microsoft.com/en-us/library/system.enum.getname.aspx)

# ios - UIScrollView 1D 弹跳但 2D 滚动

> ID：11964087
> 
> 赞同：0
> 
> 时间：2012-08-15T04:24:01.677
> 
> 标签：ios, uiscrollview, bounce

我目前正在工作的项目要求 a`UIScrollView`垂直和水平滚动，但是，它只能垂直反弹。这可能吗？我注意到声明中有一个`verticalBouncing`and`horizontalBouncing`属性，这可能是答案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T07:16:49.420

您不能`@package`直接访问 ivars。但是，您可以将自己注册为代表`UIScrollView`并实施此代码

```
- (void)scrollViewDidScroll:(UIScrollView *)scrollView
{
    float maxX = scrollView.contentSize.width - scrollView.frame.size.width;

    CGPoint offset = scrollView.contentOffset;
    offset.x = MAX(MIN(maxX, offset.x), 0);
    scrollView.contentOffset = offset;
} 
```

# vb.net - 从 VB.Net Winforms 应用程序公开 COM 接口

> ID：11964088
> 
> 赞同：1
> 
> 时间：2012-08-15T04:24:04.827
> 
> 标签：vb.net, com

我想知道是否可以通过 Winforms 可执行文件公开 COM 接口，而不必创建类库 DLL？我有一个小型交互式应用程序，我希望用户能够使用以下代码从 VBScript 和其他语言调用：

设置 USBDAQ = CreateObject("USBDAQ.Control") USBDAQ.TakeSample()

我可以创建一个单独的类库并使用一种 IPC 形式与主应用程序通信，但我不想增加额外的复杂性。我知道这种方法可能具有可靠性优势，但它不必特别强大。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T09:21:15.747

感谢 Hans Passant 的评论，我很快发现 .NET 确实对实现 COM 进程外服务器没有很好的支持。经过研究，他对 WCF 或 Remoting 的建议似乎最适合大多数应用程序。

因为我的要求非常简单，所以我最终使用了 System.IO.Pipes，因为命名管道很容易从 VBS 单向使用，我只需要在单向发送简单请求。

# c++ - 使用表达式参数专门化模板

> ID：11964089
> 
> 赞同：3
> 
> 时间：2012-08-15T04:24:09.317
> 
> 标签：c++, templates

我有这样的课：

```
template <class T>
class Foo; 
```

我想有一个专业

```
template <>
class Foo < size_t N >; 
```

但这不适合我：

我的主要是这样的：

```
Foo<int> p;  // OK
Foo<15> p2;  // fails to compile 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-15T06:15:34.730

你不能——你的模板总是采用一个类型参数。专业化只能比这更特别，但不能*不同*（因此得名）。

也许您可以使用辅助模板来存储值信息：

```
template <typename T, T Val> struct ValueWrapper { };

template <typename T> struct Foo;

templaet <typename T, T Val> struct Foo<ValueWrapper<T, Val>>
{
    typedef T type;
    static type const value = Val;

    // ...
}; 
```

用法：

```
Foo<char> x;
Foo<ValueWrapper<int, 15>> y; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-15T04:27:50.710

模板参数分为三种：表示类型的参数（例如`class T`or `typename T`）、表示非类型的参数（例如`int N`or `size_t N`）和表示模板的参数（例如`template <class T2> class T`）。

为您的模板定义的参数属于第一类（类型参数），但特化假定为第二类（非类型参数）。那是行不通的。特化的参数必须与主模板定义的相应参数类型相同。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-15T06:27:31.727

您可以使用中间类专门化该类：

```
template <class T>
class Foo
{
public:
  static const bool is_number = false;
};
template <size_t number>
struct ic
{};
template <size_t N>
class Foo < class ic<N> >
{
public:
   static const bool is_number = true;
   size_t getN() const
   {
      return N;
   } 
};

int main()
{
   Foo<int> p;  
   Foo<ic<15> > p2;  
   cout << "p.is_number = " << p.is_number << endl;
   cout << "p2.is_number = " << p2.is_number  << endl;
   cout << "p2.getN() = " << p2.getN() << endl;
   return 0;
} 
```

# php - PHP Markdown Extra - 链接不解析

> ID：11964092
> 
> 赞同：1
> 
> 时间：2012-08-15T04:24:38.630
> 
> 标签：php, markdown, html-rendering

所以我有一个使用 PHP Markdown Extra 扩展的网站（增加了对 Github Flavored Markdown 的支持），直到最近一切正常。但是今天我注意到在我的实时服务器和本地环境中，Markdown 没有在 HTML 中呈现链接语法。

所以这或多或少是我从每个文件中得到的。

```
"<p>[link](http://kellybecker.me)</p>" === Markdown("[link](http://kellybecker.me)"); 
```

我不知道为什么会发生这种情况，我在这个库的任何地方都找不到任何其他发生这种情况的实例，我也找不到另一个同样好的库。

如果有人能给我任何关于为什么会发生这种情况的提示，那就太好了。Markdown 解析器的源代码位于[https://github.com/EvolutionSDK/EvolutionSDK/tree/master/bundles/markdown](https://github.com/EvolutionSDK/EvolutionSDK/tree/master/bundles/markdown)并且在实时站点上发生这种情况的示例是[http://youmacon.com](http://youmacon.com)（希望由当您查看实时站点示例时，它将被修复）。

这可能与我从 Phar 中运行框架有关吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T17:20:04.837

原来问题是 PHP Markdown 无法在命名空间中正常运行。当我删除命名空间时，问题就消失了。（奇怪）我稍后会调查，也许会提交一个拉取请求。

# javascript - 我想使用 javascript SDK 将应用程序自动发布到墙上

> ID：11964093
> 
> 赞同：-3
> 
> 时间：2012-08-15T04:24:48.357
> 
> 标签：javascript, facebook-graph-api, facebook-javascript-sdk

我想要一个贴在墙上的代码

1-不需要用户必须点击的按钮

2-当用户第一次进入应用程序时，权限会自动出现

3-我不希望出现弹出窗口

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T20:44:48.330

看看 Open Graph 教程。

[https://developers.facebook.com/docs/opengraph/tutorial/](https://developers.facebook.com/docs/opengraph/tutorial/)

您只请求一次发布内容的许可。

# iphone - obj -c IOS检测大写锁定按键事件

> ID：11964095
> 
> 赞同：0
> 
> 时间：2012-08-15T04:24:48.987
> 
> 标签：iphone, objective-c, ios, keyboard, capslock

我正在为特殊字符编写自己的按钮，这些按钮不包含在本机 iOS 键盘中。这些按钮出现在本机键盘上方。我的一些按钮需要确定是否按下了大写锁定。是否可以检测到 capslock 按键事件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T04:59:21.957

没有任何官方 API 可让您直接访问键盘按下事件或通知。你必须找到另一种方式。要做到这一点，就是在每个键的顶部放置一个透明按钮，并检测到它，然后将触摸传递给底层按钮。

另一种方法是使用 UITextView 委托来处理。

请参考此链接：[如果在 uitextview 中按下 shift 键（修饰键），则检测/获取通知](https://stackoverflow.com/questions/5560630/detect-get-notification-if-shift-key-modifier-key-pressed-in-uitextview)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T05:07:06.510

无法在 iOS 中检测到大写锁定按键事件。

您可以执行此类操作的唯一方法是创建自己的键盘类或在线查找自定义实现。

**注意**：将键盘的 Capslock 按钮设置为 OFF 模式

```
testTxtField.autocapitalizationType = NO; 
```

# c# - Debug.WriteLine 及其字符编码

> ID：11964097
> 
> 赞同：1
> 
> 时间：2012-08-15T04:25:01.047
> 
> 标签：c#

为什么控制台和调试之间的输出不同？

```
byte [] data = new byte [] {0xB1, 0x00,0xA6,0x7C, 0x4e, 0xEC, 0xE7, 0xFF, 0xDD, 0xCE};

Console.WriteLine (new String(Encoding.GetEncoding("ISO-8859-1").GetChars(data)));
Console.WriteLine (Encoding.UTF8.GetString(data));

Debug.WriteLine (new String(Encoding.GetEncoding("ISO-8859-1").GetChars(data)));
Debug.WriteLine (new String(Encoding.UTF8.GetChars(data))); 
```

“Console.WriteLine”（Latin1 编码）输出 -> ±¦|NìçÿÝÎ

“Console.WriteLine”（UTF8）输出 -> ��|N�����</p>

“Debug.WriteLine”没有显示输出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T05:44:06.333

这主要是垃圾进垃圾出。

� 字符是[Unicode 替换字符](http://en.wikipedia.org/wiki/Replacement_character#Replacement_character)，代码 U+FFFD。你会得到很多，因为字节值不包含正确的 utf-8 编码值。

至少在我的机器上，Debug.Print() 语句*确实产生了输出。*查看输出窗口。您只会看到字符串的第一个字符，因为调试输出的默认侦听器是一个调用 Windows OutputDebugString() api 函数的函数。它将输出发送到调试器。这是一个基于 C 语言的 api 函数，0 是一个字符串终止符，所以它只会打印一个字符。

无论您要做什么，很明显字节值*不代表*文本。我没有看到任何模式来猜测二进制数据可能是什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T04:32:14.500

你有一个`0x00`在数组的第二个位置，如你所知，它是一个字符串结尾。`Debug.WriteLine`以 ASCII 编码输出。因此，它只输出输出窗口中的第一个字节。

如果您更改`0x00`为，`0x01`您将看到完整的输出。

**更多**当我`new String(Encoding.GetEncoding("ISO-8859-1").GetChars(data))`在 Watch 窗口中查看时，我看到一个异常被抛出：

`'new String(Encoding.GetEncoding("ISO-8859-1").GetChars(data))' threw an exception of type 'System.ArgumentException' string {System.ArgumentException}`

这通常发生在尝试访问不存在的 Array 元素时。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T04:33:16.480

~~因为它调用[OutputDebugString](http://msdn.microsoft.com/en-us/library/windows/desktop/aa363362%28v=vs.85%29.aspx)，出于兼容性原因，默认情况下它是 ASCII。我不知道有什么解决方法，但我会寻找一个。~~

**编辑**

实际上，我无法重现您的问题。在我的机器上，我得到这个输出：

> ±□¦|NìçÿÝÎ
> 
> �□�|N�����</p>
> 
> ±□¦|NìçÿÝÎ
> 
> �□�|N�����</p>

# visual-c++ - 适用于 VC++ 2010 的 SDK？

> ID：11964105
> 
> 赞同：1
> 
> 时间：2012-08-15T04:25:41.763
> 
> 标签：visual-c++, sdk

我仍在尝试使用网络做一些事情，而不是使用 Beej 的教程，我转向 MSDN.com。它说我需要将“Ws32_32.lib”作为库包含在内。我找不到这个库，我相信它与 VS 2010 SDK 一起使用。我 DLed SDK，它只适用于专业或终极之类的东西。也许我刚刚在这里回答了我自己的问题，但是，有没有办法在 VS express 中实际使用 Windows 套接字？我了解专业或最终成本过高（因为它们是为企业制作的，我只是一个新手/爱好者）。有没有办法将 Windows 套接字与 VS express 一起使用？

也许我应该转向代码块或 QT ......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T05:08:58.277

您看过 MSDN [Winsock 入门](http://msdn.microsoft.com/en-us/library/windows/desktop/ms738545%28v=vs.85%29.aspx)指南吗？提供的示例代码适用于我使用普通的 Visual C++ 2010 Express。该片段编译干净，并`#pragma`告诉链接器需要哪个库。

```
#include <stdio.h>
#include <winsock2.h>
#include <ws2tcpip.h>

// link with Ws2_32.lib
#pragma comment(lib, "Ws2_32.lib")

int main()
{
    WSADATA wsaData;

    // Initialize Winsock
    int result = WSAStartup(MAKEWORD(2, 2), &wsaData);
    if (result != 0) {
        printf("WSAStartup failed: %d\n", result);
        return 1;
    }

    // Your code here

    WSACleanup();
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T05:27:02.770

winsock库是Ws2_32.LIB，是windows socket dll链接库。您将在 Microsoft SDK lib 文件夹中找到它。就我而言，它位于 C:\Program Files\Microsoft SDKs\Windows\v7.0A\Lib。Visual Studio 已经应该知道这条路径。如果您简单地在链接器选项中指定此库（链接器 -> 输入 -> 附加库），那么您实际上是在隐式链接系统 winsock dll Ws2_32.dll。你也可以使用`#pragma comment(lib, "ws2_32.lib")`

SDK 与专业版、终极版等 Visual Studio 版本没有直接关系。即使从命令行或 VS2010 的 Express 版本，您也应该能够使用 SDK。SDk 可以独立于 Visual Studio 安装。如果您的 Visual Studio 无法找到 SDK lib 的路径，那么您需要检查设置。在配置中的项目设置中使用 VS2010 时，有一个用于 VC++ 目录的选项。在右侧，您将看到“库目录”检查是否在此处指定了 SDK 库。检查 $(WindowsSdkDir)lib 的宏。

# php - PHP/MYSQL - 插入忽略，并忽略指定的列

> ID：11964109
> 
> 赞同：3
> 
> 时间：2012-08-15T04:26:10.233
> 
> 标签：php, mysql, insert

如果数据不存在，我只需要能够插入一行，日期列除外，它总是不同的，所以它总是会插入一个新行，即使它不应该。

我的代码：

```
$postID = $_POST['postID']; //example, 817
$userID = logged_in(); //example, 2
$date = time();

mysql_query("INSERT IGNORE INTO likes SET userID='$userID', postID='$postID', date='$date'"); 
```

我希望能够做类似的事情：

```
mysql_query("INSERT IGNORE date INTO likes SET userID='$userID', postID='$postID', date='$date'"); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T04:30:58.713

如果您有一个`UNIQUE`限制`userID`并且`postID`您可以做您现在正在做的任何事情，那么如果已经有记录，则日期列将不会更新。

如果您想在记录确实存在的情况下更新日期列（对于该特定用户和帖子），您可以使用`ON DUPLICATE KEY UPDATE date = '$date'`.

# asp.net-mvc-3 - ASP MVC 3，Razor，在用户创建期间为所有可用角色创建复选框

> ID：11964111
> 
> 赞同：1
> 
> 时间：2012-08-15T04:26:24.860
> 
> 标签：asp.net-mvc-3, checkbox, roles, user-roles

尝试使用标准 ASP.Net 成员资格提供程序为所有可用角色获取一组复选框。我可以成功地将角色放入单个选择下拉列表中，但不能在我的一生中将它们放入一组复选框中。我已经知道如何创建角色、删除角色，但看不到如何在创建新用户帐户期间创建多选下拉列表或一组复选框。请注意：我不是在问如何处理表单提交时检查哪些复选框，我相信一旦我得到它，我就已经涵盖了。

无论如何，这就是我现在所拥有的，从模型和视图模型开始，然后是 CreatUser.cshtml

如您所见，我采用了局部视图的路线，以便它会呈现每个项目的复选框，但我只得到一个空的，如名称，ID，一切都是空的，此时复选框。

角色视图模型.cs

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Security;

namespace JustAdminIt.ViewModels
{
    public class RoleViewModel
    {
        public string RoleName { get; set; }
        public bool Selected { get; set; }
    }
} 
```

AllRolesViewModel.cs

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Security;

namespace JustAdminIt.ViewModels
{
    public class AllRolesViewModel
    {
        public IEnumerable<RoleViewModel> Roles { get; set; }
    }

} 
```

AccountModel.cs - 注册模型

```
public class RegisterModel
{
    [Required]
    [Display(Name = "User name")]
    public string UserName { get; set; }

    [Required]
    [DataType(DataType.EmailAddress)]
    [Display(Name = "Email address")]
    public string Email { get; set; }

    [Required]
    [StringLength(100, ErrorMessage = "The {0} must be at least {2} characters long.", MinimumLength = 6)]
    [DataType(DataType.Password)]
    [Display(Name = "Password")]
    public string Password { get; set; }

    [DataType(DataType.Password)]
    [Display(Name = "Confirm password")]
    [Compare("Password", ErrorMessage = "The password and confirmation password do not match.")]
    public string ConfirmPassword { get; set; }

    [Display(Name = "Available Roles")]
    public AllRolesViewModel listRoles { get; set; }

} 
```

创建用户.cshtml

```
 @model JustAdminIt.Models.RegisterModel

@{
    ViewBag.Title = "Register";
    //var roleDrop = ViewData["roleName"];
}

<h2>Create a New Account</h2>
<p>
    Use the form below to create a new account. 
</p>
<p>
    Passwords are required to be a minimum of @Membership.MinRequiredPasswordLength characters in length.<br /><br />
    Passwords are required to contain at least @Membership.MinRequiredNonAlphanumericCharacters Non-Alpha-Numeric characters.
</p>

<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>

@using (Html.BeginForm())
{
    @Html.ValidationSummary(true, "Account creation was unsuccessful. Please correct the errors and try again.")
    <div>
        <fieldset>
            <legend>Account Information</legend>

            <div class="editor-label">
                @Html.LabelFor(m => m.UserName)
            </div>
            <div class="editor-field">
                @Html.TextBoxFor(m => m.UserName)
                @Html.ValidationMessageFor(m => m.UserName)
            </div>

            <div class="editor-label">
                @Html.LabelFor(m => m.Email)
            </div>
            <div class="editor-field">
                @Html.TextBoxFor(m => m.Email)
                @Html.ValidationMessageFor(m => m.Email)
            </div>

            <div class="editor-label">
                @Html.LabelFor(m => m.Password)
            </div>
            <div class="editor-field">
                @Html.PasswordFor(m => m.Password)
                @Html.ValidationMessageFor(m => m.Password)
            </div>

            <div class="editor-label">
                @Html.LabelFor(m => m.ConfirmPassword)
            </div>
            <div class="editor-field">
                @Html.PasswordFor(m => m.ConfirmPassword)
                @Html.ValidationMessageFor(m => m.ConfirmPassword)
            </div>
            <div class="editor-label">
                Choose User Role(s)
            </div>
            <div class="editor-field">
                @foreach(var role in Model.listRoles.Roles)
                {
                    @Html.Label(role.RoleName)
                    @Html.CheckBox(role.RoleName, role.Selected)
                }
            </div>
            <p>
                <input type="submit" value="Register" />
            </p>
        </fieldset>
    </div>
} 
```

**编辑澄清**

我只需要在新用户帐户创建页面 CreateUser.cshtml 上生成一组复选框，以便管理员可以在帐户创建期间分配一个或多个角色。

这里没有什么特别的，但唯一可以找到的示例是创建角色下拉列表，这不是此应用程序的选项。

我找不到使用 Roles.getAllRoles() 枚举的 Membership 提供程序的方法，因为该函数只返回角色的字符串数组。我尝试了多种方式等，但在列出可用角色时无济于事。

[http://msdn.microsoft.com/en-us/library/system.web.security.roles.getallroles.aspx](http://msdn.microsoft.com/en-us/library/system.web.security.roles.getallroles.aspx) 供参考。我不知道获得所有可用角色的另一种方法。

为了澄清上下文 - RoleViewModel.cs 和 AllRolesViewModel.cs 用于在角色管理页面上列出所有系统角色 - 使用部分，它在那里工作得很好，但是复选框组和 html 帮助器的性质决定了不同的实现，这是我无法弄清楚的。

**编辑更新的代码片段**

现在列出的代码片段是当前使用的。现在的主要错误是 CreateUser.cshtml 上的整个模型为空，不确定原因。取得了进展，但仍然无法为所有可用角色显示一组复选框。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T04:31:35.623

> 我只得到一个空的，如名称，ID，一切都是空的，此时复选框。

您看到一个空白复选框的原因是因为您正在渲染一个带有空`RoleViewModel`实例的局部视图。

```
// This line passes an empty view model...probably not the desired behavior
Html.RenderPartial("_userRoles", new JustAdminIt.ViewModels.RoleViewModel()); 
```

鉴于当前的结构，我会`AllRolesViewModel`向您添加一个属性`RegisterModel`，然后使用`foreach`. 在里面`foreach`你可以做任何你想做的事情，比如创建一个局部视图，直接创建复选框等。

```
foreach( var role in Model.AllRolesViewModel.Roles ){
    @Html.CheckBoxFor( role => role.Selected, role.RoleName )
} 
```

更进一步，`AllRolesViewModel`如果视图模型仅包含角色集合，我不确定为什么需要视图模型。您可能可以将这些角色移动到主视图模型并省略中介。

## 修改 RegisterModel

> RegisterModel 是内置的 ASP.Net Memebership 提供程序，并且没有在任何地方显式声明 - 我如何将 AllRolesViewModel 添加到其中

我相信您正在使用 MVC3 脚手架附带的自动生成的类（参见屏幕截图）。即使您使用的是 ASP.Net 成员资格提供程序，您也可以自由修改此类。

![在此处输入图像描述](../Images/7c76fcc05f184d8dfaa8d4c20a4a69c3.png)

# iphone - 在 iOS 中读取文本文件中的 url 后加载 NSURL？

> ID：11964123
> 
> 赞同：0
> 
> 时间：2012-08-15T04:27:52.497
> 
> 标签：iphone, objective-c, ios, text-files, nsurl

我在 iOS 的“我的文档”文件夹中有一个文本文件，其中包含一个如下所示的链接：@“https://www.mysite.com”

我可以通过以下方式成功读取文件：

```
 //READ TEXT FILE:

    NSArray *paths5 = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory5 = [paths5 objectAtIndex:0];
    NSString *filePath5 = [documentsDirectory5 stringByAppendingPathComponent:@"mytext.txt"];
    NSString *myContent = [NSString stringWithContentsOfFile:filePath5 encoding:NSUTF8StringEncoding error:NULL]; 
```

NSString *myContent 是实际链接：@"https://www.mysite.com

现在我通过 NSURLRequest 加载内容，如下所示：

```
 NSURLRequest *request2 = [NSURLRequest requestWithURL:
                             [NSURL URLWithString:myContent]]; 
           [[NSURLConnection alloc] initWithRequest:request2 delegate:self]; 
```

我得到的问题/错误：

```
 Connection failed: Error Domain=NSURLErrorDomain Code=-1000 "bad URL" UserInfo=0xfe75cc0 {NSUnderlyingError=0xfe86ac0 "bad URL", NSLocalizedDescription=bad URL} 
```

但是，如果 [NSURL URLWithString:myContent]]; 用 [NSURL URLWithString:@"https://www.mysite.com"]] 等 url 字符串逐字替换，然后连接有效。

这里发生了什么事？为什么我不能将文本文件中的 url 加载到我的 URLWithString 参数中？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-15T04:52:28.920

文本文件的大小如果不是很大，可以在下面合理地获得。文本文件必须采用 utf8 编码。如果采用不同的编码，则需要设置相应的编码`line3`。

```
NSString *urlString = @"http://www.blahblah.com/myText.txt";
NSURL *myURL = [NSURL URLWithString:[urlString stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]];
NSString *string = [NSString stringWithContentsOfURL:myURL encoding:NSUTF8StringEncoding error:nil];
//                                                                  ^ 
```

# javascript - Javascript 错误“没有方法推送”

> ID：11964128
> 
> 赞同：0
> 
> 时间：2012-08-15T04:28:35.940
> 
> 标签：javascript, node.js

我收到错误：`object 0 has no method 'push'`，我不知道为什么。

我知道那`sack[i]`是对象，`i`是 0`quantity_to_spawn`等于 1。

我认为该节点在推送方面存在问题，因为 sack 是一个数组，`sack[i]`实际上是一个对象。

```
for (i=0;i<rows[r].quantity_to_spawn;i++){
      more_drops = Math.random()
      sack[i]=new Array();
      for (;more_drops > .05;){
          more_drops = Math.random()
          rarity = Math.random()
          if (rarity <= .75&&typeof rows[r].common=="string"){//common drop 75%
             item=rows[r].common.split(",")
             sack[i].push(parseInt(item[parseInt(Math.random()*item.length)]))
                  ... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T05:19:19.940

我确定您缺少将变量声明`sack`为数组，

```
var sack = new Array(); 
```

或者

```
var sack = []; 
```

否则它应该工作

这是[简单的演示](http://jsfiddle.net/rwRrA/2/)

我对这个问题做了一些实验，发现了一些有趣的事实。那些是，

问题是`sack`已经分配了类似`var sack = 'someValue';`. 在**这种情况下 (assigned value string type)**，这导致`sack`成为一个字符串数组。因此，分配`sack[i]=new Array();`没有意义。`sack[0]`将`s`。并尝试将一些值推到此将引发错误`object 0 has no method 'push'`

**另一种情况（赋值数字类型）**，赋值就像`var sack = 28892;`。在这种情况下，相同的数组赋值毫无意义。但是如果你试图把东西推到它上面，`sack[0]`它就会抛出`Cannot call method 'push' of undefined`，因为`sack[0]`是`undefined`。

在这两种情况下，在声明`sack`了某个值之后，赋值都没有产生任何错误，尽管它是无用的。

关于数组声明的附加信息，

[Javascript 数组声明：new Array(), new Array(3), ['a', 'b', 'c'] 创建行为不同的数组](https://stackoverflow.com/questions/8246406/javascript-array-declaration-new-array-new-array3-a-b-c-create)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T05:40:07.507

不知道你在这里做什么，但试试这个：

```
var sack = [];
for (var i=0;i<rows[r].quantity_to_spawn;i++) {
  var more_drops = Math.random();
  sack[i] = [];
  for (;more_drops > 0.05;) {
      more_drops = Math.random();
      var rarity = Math.random();
      if (rarity <= 0.75&&typeof rows[r].common==="string") {//common drop 75%
         var item = rows[r].common.split(",");
         sack[i].push(parseInt(item[parseInt(Math.random()*item.length,10)],10));
         ... 
```

# python - 列表理解与生成器表达式的奇怪 timeit 结果？

> ID：11964130
> 
> 赞同：37
> 
> 时间：2012-08-15T04:29:00.040
> 
> 标签：python, list, list-comprehension, timeit, generator-expression

我在回答这个[问题](https://stackoverflow.com/questions/11963711/what-is-the-most-efficient-way-to-search-nested-lists-in-python)，我更喜欢这里的生成器表达式并使用了这个，我认为这会更快，因为生成器不需要先创建整个列表：

```
>>> lis=[['a','b','c'],['d','e','f']]
>>> 'd' in (y for x in lis for y in x)
True 
```

Levon 在他的[解决方案](https://stackoverflow.com/a/11963727/846892)中使用了列表理解，

```
>>> lis = [['a','b','c'],['d','e','f']]
>>> 'd' in [j for i in mylist for j in i]
True 
```

但是当我做这些 LC 的 timeit 结果比生成器快时：

```
~$ python -m timeit -s "lis=[['a','b','c'],['d','e','f']]" "'d' in (y for x in lis for y in x)"
    100000 loops, best of 3: 2.36 usec per loop
~$ python -m timeit -s "lis=[['a','b','c'],['d','e','f']]" "'d' in [y for x in lis for y in x]"
    100000 loops, best of 3: 1.51 usec per loop 
```

然后我增加了列表的大小，并再次计时：

```
lis=[['a','b','c'],['d','e','f'],[1,2,3],[4,5,6],[7,8,9],[10,11,12],[13,14,15],[16,17,18]] 
```

这次搜索`'d'`生成器比 LC 快，但是当我搜索中间元素（11）和最后一个元素时，LC 再次击败生成器表达式，我不明白为什么？

```
~$ python -m timeit -s "lis=[['a','b','c'],['d','e','f'],[1,2,3],[4,5,6],[7,8,9],[10,11,12],[13,14,15],[16,17,18]]" "'d' in (y for x in lis for y in x)"
    100000 loops, best of 3: 2.96 usec per loop

~$ python -m timeit -s "lis=[['a','b','c'],['d','e','f'],[1,2,3],[4,5,6],[7,8,9],[10,11,12],[13,14,15],[16,17,18]]" "'d' in [y for x in lis for y in x]"
    100000 loops, best of 3: 7.4 usec per loop

~$ python -m timeit -s "lis=[['a','b','c'],['d','e','f'],[1,2,3],[4,5,6],[7,8,9],[10,11,12],[13,14,15],[16,17,18]]" "11 in [y for x in lis for y in x]"
100000 loops, best of 3: 5.61 usec per loop

~$ python -m timeit -s "lis=[['a','b','c'],['d','e','f'],[1,2,3],[4,5,6],[7,8,9],[10,11,12],[13,14,15],[16,17,18]]" "11 in (y for x in lis for y in x)"
100000 loops, best of 3: 9.76 usec per loop

~$ python -m timeit -s "lis=[['a','b','c'],['d','e','f'],[1,2,3],[4,5,6],[7,8,9],[10,11,12],[13,14,15],[16,17,18]]" "18 in (y for x in lis for y in x)"
100000 loops, best of 3: 8.94 usec per loop

~$ python -m timeit -s "lis=[['a','b','c'],['d','e','f'],[1,2,3],[4,5,6],[7,8,9],[10,11,12],[13,14,15],[16,17,18]]" "18 in [y for x in lis for y in x]"
100000 loops, best of 3: 7.13 usec per loop 
```

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-08-15T05:21:44.110

扩展[Paulo](https://stackoverflow.com/a/11964164/577088)的答案，由于函数调用的开销，生成器表达式通常比列表理解慢。在这种情况下，如果相当早地找到该项目，则偏移的短路行为会降低`in`速度，否则，该模式将成立。

我通过分析器运行了一个简单的脚本以进行更详细的分析。这是脚本：

```
lis=[['a','b','c'],['d','e','f'],[1,2,3],[4,5,6],
     [7,8,9],[10,11,12],[13,14,15],[16,17,18]]

def ge_d():
    return 'd' in (y for x in lis for y in x)
def lc_d():
    return 'd' in [y for x in lis for y in x]

def ge_11():
    return 11 in (y for x in lis for y in x)
def lc_11():
    return 11 in [y for x in lis for y in x]

def ge_18():
    return 18 in (y for x in lis for y in x)
def lc_18():
    return 18 in [y for x in lis for y in x]

for i in xrange(100000):
    ge_d()
    lc_d()
    ge_11()
    lc_11()
    ge_18()
    lc_18() 
```

以下是相关结果，重新排序以使模式更清晰。

```
 5400002 function calls in 2.830 seconds

   Ordered by: standard name

   ncalls  tottime  percall  cumtime  percall filename:lineno(function)
   100000    0.158    0.000    0.251    0.000 fop.py:3(ge_d)
   500000    0.092    0.000    0.092    0.000 fop.py:4(<genexpr>)
   100000    0.285    0.000    0.285    0.000 fop.py:5(lc_d)

   100000    0.356    0.000    0.634    0.000 fop.py:8(ge_11)
  1800000    0.278    0.000    0.278    0.000 fop.py:9(<genexpr>)
   100000    0.333    0.000    0.333    0.000 fop.py:10(lc_11)

   100000    0.435    0.000    0.806    0.000 fop.py:13(ge_18)
  2500000    0.371    0.000    0.371    0.000 fop.py:14(<genexpr>)
   100000    0.344    0.000    0.344    0.000 fop.py:15(lc_18) 
```

创建生成器表达式等同于[创建生成器函数并调用它](http://www.python.org/dev/peps/pep-0289/#the-details)。这占了一次调用`<genexpr>`. 然后，在第一种情况下，`next`调用 4 次，直到`d`达到，总共调用 5 次（100000 次迭代 = ncalls = 500000）。第二种情况，调用了17次，总共调用了18次；第三次，24 次，总共 25 次调用。

在第一种情况下，genex 优于列表推导，但`next`在第二种和第三种情况下，额外的调用解释了列表推导的速度与生成器表达式的速度之间的大部分差异。

```
>>> .634 - .278 - .333
0.023
>>> .806 - .371 - .344
0.091 
```

我不确定剩余时间的原因；即使没有额外的函数调用，生成器表达式似乎也会慢一些。我想这证实了[inspectorG4dget](https://stackoverflow.com/questions/11964130/list-comprehension-vs-generator-expressions-weird-timeit-results/11964478#comment15945560_11964164)的断言，即“创建生成器推导比列表推导具有更多的本机开销。” 但无论如何，这很清楚地表明生成器表达式较慢*主要是*因为调用`next`.

我要补充一点，当短路没有帮助时，列表推导*仍然*更快，即使对于非常大的列表也是如此。例如：

```
>>> counter = itertools.count()
>>> lol = [[counter.next(), counter.next(), counter.next()] 
           for _ in range(1000000)]
>>> 2999999 in (i for sublist in lol for i in sublist)
True
>>> 3000000 in (i for sublist in lol for i in sublist)
False
>>> %timeit 2999999 in [i for sublist in lol for i in sublist]
1 loops, best of 3: 312 ms per loop
>>> %timeit 2999999 in (i for sublist in lol for i in sublist)
1 loops, best of 3: 351 ms per loop
>>> %timeit any([2999999 in sublist for sublist in lol])
10 loops, best of 3: 161 ms per loop
>>> %timeit any(2999999 in sublist for sublist in lol)
10 loops, best of 3: 163 ms per loop
>>> %timeit for i in [2999999 in sublist for sublist in lol]: pass
1 loops, best of 3: 171 ms per loop
>>> %timeit for i in (2999999 in sublist for sublist in lol): pass
1 loops, best of 3: 183 ms per loop 
```

如您所见，当短路无关紧要时，即使对于一百万项长的列表，列表推导也*始终更快。*显然，对于这些规模的实际使用，`in`由于短路，发电机会更快。但是对于其他类型的项目数量真正线性的迭代任务，列表推导几乎*总是*更快。如果您需要对一个列表执行多个测试，则尤其如此；*您可以非常快速地*迭代已经构建的列表理解：

```
>>> incache = [2999999 in sublist for sublist in lol]
>>> get_list = lambda: incache
>>> get_gen = lambda: (2999999 in sublist for sublist in lol)
>>> %timeit for i in get_list(): pass
100 loops, best of 3: 18.6 ms per loop
>>> %timeit for i in get_gen(): pass
1 loops, best of 3: 187 ms per loop 
```

在这种情况下，列表理解要快一个数量级！

当然，只有在内存不足之前，这仍然是正确的。这让我想到了最后一点。使用发电机有两个主要原因：利用短路和节省内存。对于非常大的序列/可迭代对象，生成器是显而易见的方法，因为它们可以节省内存。但是如果短路不是一种选择，你几乎*永远不会*选择生成器而不是列表来获得*速度*。您选择它们​​是为了节省内存，这始终是一种权衡。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-08-15T04:54:37.453

完全取决于数据。

生成器有一个固定的设置时间，必须根据调用的项目数摊销；列表推导最初更快，但随着更大的数据集使用更多的内存，会显着减慢。

[回想一下，随着cPython](http://www.laurentluce.com/posts/python-list-implementation/)列表的扩展，列表的大小会按照 4、8、16、25、35、46、58、72、88、...的增长模式进行调整。对于更大的列表推导，Python 分配的内存可能是数据大小的 4 倍。一旦你点击了虚拟机——真的很sloowww！但是，如前所述，列表推导比小型数据集的生成器更快。

考虑**案例 1**，一个 2x26 的列表列表：

```
LoL=[[c1,c2] for c1,c2 in zip(string.ascii_lowercase,string.ascii_uppercase)]  

def lc_d(item='d'):
    return item in [i for sub in LoL for i in sub]

def ge_d(item='d'):
    return item in (y for x in LoL for y in x)    

def any_lc_d(item='d'):
    return any(item in x for x in LoL)    

def any_gc_d(item='d'):
    return any([item in x for x in LoL])     

def lc_z(item='z'):
    return item in [i for sub in LoL for i in sub]

def ge_z(item='z'):
    return item in (y for x in LoL for y in x)    

def any_lc_z(item='z'):
    return any(item in x for x in LoL)    

def any_gc_z(item='z'):
    return any([item in x for x in LoL])               

cmpthese.cmpthese([lc_d,ge_d,any_gc_d,any_gc_z,any_lc_d,any_lc_z, lc_z, ge_z]) 
```

这些时间的结果：

```
 rate/sec   ge_z   lc_z   lc_d any_lc_z any_gc_z any_gc_d   ge_d any_lc_d
ge_z      124,652     -- -10.1% -16.6%   -44.3%   -46.5%   -48.5% -76.9%   -80.7%
lc_z      138,678  11.3%     --  -7.2%   -38.0%   -40.4%   -42.7% -74.3%   -78.6%
lc_d      149,407  19.9%   7.7%     --   -33.3%   -35.8%   -38.2% -72.3%   -76.9%
any_lc_z  223,845  79.6%  61.4%  49.8%       --    -3.9%    -7.5% -58.5%   -65.4%
any_gc_z  232,847  86.8%  67.9%  55.8%     4.0%       --    -3.7% -56.9%   -64.0%
any_gc_d  241,890  94.1%  74.4%  61.9%     8.1%     3.9%       -- -55.2%   -62.6%
ge_d      539,654 332.9% 289.1% 261.2%   141.1%   131.8%   123.1%     --   -16.6%
any_lc_d  647,089 419.1% 366.6% 333.1%   189.1%   177.9%   167.5%  19.9%       -- 
```

* * *

现在考虑**案例 2**，它显示了 LC 和 gen 之间的巨大差异。在这种情况下，我们在 100 x 97 x 97 的列表类型结构列表中寻找一个元素：

```
LoL=[[str(a),str(b),str(c)] 
       for a in range(100) for b in range(97) for c in range(97)]

def lc_10(item='10'):
    return item in [i for sub in LoL for i in sub]

def ge_10(item='10'):
    return item in (y for x in LoL for y in x)    

def any_lc_10(item='10'):
    return any([item in x for x in LoL])    

def any_gc_10(item='10'):
    return any(item in x for x in LoL)     

def lc_99(item='99'):
    return item in [i for sub in LoL for i in sub]

def ge_99(item='99'):
    return item in (y for x in LoL for y in x)    

def any_lc_99(item='99'):
    return any(item in x for x in LoL)    

def any_gc_99(item='99'):
    return any([item in x for x in LoL])      

cmpthese.cmpthese([lc_10,ge_10,any_lc_10,any_gc_10,lc_99,ge_99,any_lc_99,any_gc_99],c=10,micro=True) 
```

这些时间的结果：

```
 rate/sec  usec/pass       ge_99      lc_99      lc_10  any_lc_99  any_gc_99  any_lc_10   ge_10 any_gc_10
ge_99            3 354545.903          --     -20.6%     -30.6%     -60.8%     -61.7%     -63.5% -100.0%   -100.0%
lc_99            4 281678.295       25.9%         --     -12.6%     -50.6%     -51.8%     -54.1% -100.0%   -100.0%
lc_10            4 246073.484       44.1%      14.5%         --     -43.5%     -44.8%     -47.4% -100.0%   -100.0%
any_lc_99        7 139067.292      154.9%     102.5%      76.9%         --      -2.4%      -7.0% -100.0%   -100.0%
any_gc_99        7 135748.100      161.2%     107.5%      81.3%       2.4%         --      -4.7% -100.0%   -100.0%
any_lc_10        8 129331.803      174.1%     117.8%      90.3%       7.5%       5.0%         -- -100.0%   -100.0%
ge_10      175,494      5.698  6221964.0% 4943182.0% 4318339.3% 2440446.0% 2382196.2% 2269594.1%      --    -38.5%
any_gc_10  285,327      3.505 10116044.9% 8036936.7% 7021036.1% 3967862.6% 3873157.1% 3690083.0%   62.6%        -- 
```

正如你所看到的 - 这取决于它是一个权衡......

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-08-15T04:33:05.367

与普遍的看法相反，列表推导对于中等范围来说非常好。迭代器协议意味着对 的调用`iterator.__next__()`，而 Python 中的函数调用 - 说实话 - 非常昂贵。

当然，在某些时候，生成器的内存/cpu 权衡将开始付出代价，但对于小型集合，列表推导非常有效。

# javascript - 如何在 Extjs 4 中为 jsonp 响应创建自定义阅读器

> ID：11964131
> 
> 赞同：1
> 
> 时间：2012-08-15T04:29:00.283
> 
> 标签：javascript, extjs, extjs4.1, extjs-mvc

我的 json 响应就像

```
Ext.data.JsonP.callback1({"workXml":"{\"Work\":{\"Subjects\":{\"Subject\":[{\"type_lkup\":\"theaters\"},{\"type_lkup\":\"plays\"},{\"type_lkup\":\"actors\"},{\"type_lkup\":\"Te\u0027atron Temuna (Tel-Aviv, Israel)\"},{\"ns0:term\":\"Te\u0027atron Temuna (Tel-Aviv, Israel) \",\"type_lkup\":\"geographicPlace\",\"xmlns:ns0\":\"http://catalog.sharedshelf.artstor.org/ssw\"}],\"Display\":\"Te\u0027atron Temuna (Tel-Aviv, Israel)  ; theaters | plays | actors | Te\u0027atron Temuna (Tel-Aviv, Israel)\",\"xmlns\":\"\"},\"Dates\":{\"Date\":{\"startDate\":2002,\"endDate\":2002},\"Display\":2002,\"xmlns\":\"\"},\"Materials\":{\"Display\":\"Digital Photography  | digital images\",\"Material\":[{\"term_lkup\":\"100 concrete blocks, arranged in a square\"},{\"term_lkup\":\"\\tDigital Photography\"},{\"term_lkup\":\"digital images\"}],\"xmlns\":\"\"},\"ArtstorClassifications\":{\"Classification\":{\"term_lkup\":\"Architecture and City Planning\",\"ssc:id\":\"JPCDPI11C_455778\"},\"xmlns\":\"\"},\"RelatedWorks\":{\"RelatedWork\":{},\"Display\":{},\"xmlns\":\"\"},\"Techniques\":{\"Display\":{},\"Technique\":{\"ssc:id\":\"\"},\"xmlns\":\"\"},\"Descriptions\":{\"Description\":{\"ns0:term\":\"Funded by The Druker Family Judaica Book Fund and The Harvard-Littauer Judaica Endowment in the Harvard College Library. \",\"xmlns:ns0\":\"http://catalog.sharedshelf.artstor.org/ssw\"},\"Display\":\"Funded by The Druker Family Judaica Book Fund and The Harvard-Littauer Judaica Endowment in the Harvard College Library.\",\"xmlns\":\"\"},\"StateEditions\":{\"StateEdition\":{\"ssc:id\":\"\"},\"Display\":{},\"xmlns\":\"\"},\"Agents\":{\"Display\":\"Dagon, Gadi; Veber, Elit; Te\u0027atron Temuna\u0027 (Tel Aviv, Israel)\",\"Agent\":[{\"Source\":{\"term\":127037,\"ssc:id\":\"CREATOR\",\"xmlns\":\"http://catalog.sharedshelf.artstor.org/ssc\",\"SourceDetail\":{\"term\":\"Dagon, Gadi\",\"type_lkup\":\"Personal\"}},\"Date\":{\"earliestDate\":1957,\"xmlns\":\"http://catalog.sharedshelf.artstor.org/ssw\"},\"attribution\":\"\"},{\"Source\":{\"term\":127446,\"ssc:id\":\"ASSOCIATED\",\"xmlns\":\"http://catalog.sharedshelf.artstor.org/ssc\",\"SourceDetail\":{\"term\":\"Veber, Elit\",\"type_lkup\":\"Personal\"}},\"Date\":{\"xmlns\":\"http://catalog.sharedshelf.artstor.org/ssw\"},\"attribution\":\"director\"},{\"Source\":{\"term\":127766,\"ssc:id\":\"ASSOCIATED\",\"xmlns\":\"http://catalog.sharedshelf.artstor.org/ssc\",\"SourceDetail\":{\"term\":\"Te\u0027atron Temuna\u0027 (Tel Aviv, Israel)\",\"type_lkup\":\"Personal\"}},\"Date\":{\"xmlns\":\"http://catalog.sharedshelf.artstor.org/ssw\"},\"attribution\":\"performing artist\"}],\"xmlns\":\"\"},\"Measurements\":{\"Measurement\":{\"ssc:id\":\"\"},\"Display\":{},\"xmlns\":\"\"},\"TextReferences\":{\"Display\":{},\"xmlns\":\"\",\"TextRef\":{\"ssc:id\":\"\"}},\"WorkTypes\":{\"Display\":\"photographs\",\"xmlns\":\"\",\"WorkType\":{\"term_lkup\":\"photographs\"}},\"xmlns:display\":\"http://catalog.sharedshelf.artstor.org/display\",\"xmlns:ssd\":\"http://catalog.sharedshelf.artstor.org/ssd\",\"xmlns:ssc\":\"http://catalog.sharedshelf.artstor.org/ssc\",\"ns0:schemaLocation\":\"http://catalog.sharedshelf.artstor.org/ssw SharedShelfWork.xsd\",\"Inscriptions\":{\"Display\":{},\"xmlns\":\"\",\"Inscription\":{\"position\":\"\",\"ssc:contributor\":\"\",\"Author\":{},\"ssc:id\":\"\"}},\"Rights\":{\"Rights\":{\"ns0:term\":\"Gadi Dagon\",\"xmlns:ns0\":\"http://catalog.sharedshelf.artstor.org/ssw\"},\"Display\":\"Gadi Dagon\",\"xmlns\":\"\"},\"ssc:contributor\":\"HARVARD\",\"Display\":{\"id\":6321442,\"DisplayRecord\":{\"Record\":{\"earliestDate\":{\"content\":2002,\"xmlns\":\"\"},\"latestDate\":{\"content\":2002,\"xmlns\":\"\"},\"location\":{\"xmlns\":\"\"},\"subject\":{\"content\":\"Te\u0027atron Temuna (Tel-Aviv, Israel)  ; theaters | plays | actors | Te\u0027atron Temuna (Tel-Aviv, Israel)\",\"xmlns\":\"\"},\"rights\":{\"content\":\"Gadi Dagon\",\"xmlns\":\"\"},\"workType\":{\"content\":\"photographs\",\"xmlns\":\"\"},\"imageURLOrURN\":{\"content\":\"http://nrs.harvard.edu/urn-3:FHCL:3238354\",\"xmlns\":\"\"},\"date\":{\"content\":2002,\"xmlns\":\"\"},\"sequenceNumber\":{\"content\":1,\"xmlns\":\"\"},\"creator\":{\"content\":\"Dagon, Gadi\",\"xmlns\":\"\"},\"thumbnailURLOrURN\":{\"content\":\"http://nrs.harvard.edu/urn-3:FHCL:3238354\",\"xmlns\":\"\"},\"thumbnailRepositoryID\":{\"content\":\"http://nrs.harvard.edu/urn-3:FHCL:3238354\",\"xmlns\":\"\"},\"title\":{\"content\":\"Eshet | Photographs by Gadi Dagon of show directed by Elit Veber, staged by Te\u0027atron Temuna\u0027 in 2002.\",\"xmlns\":\"\"},\"projectID\":{\"content\":0,\"xmlns\":\"\"},\"description\":{\"content\":\"Funded by The Druker Family Judaica Book Fund and The Harvard-Littauer Judaica Endowment in the Harvard College Library.\",\"xmlns\":\"\"},\"ns0:schemaLocation\":\"http://catalog.sharedshelf.artstor.org/display SSJudaica.xsd\",\"imageRepository\":{\"content\":\"Judaica\",\"xmlns\":\"\"},\"oLIVIAID\":{\"content\":\"W455778_1\",\"xmlns\":\"\"},\"materialsOrTechniques\":{\"content\":\"Digital Photography  | digital images\",\"xmlns\":\"\"},\"captionnote\":{\"xmlns\":\"\"},\"xmlns\":\"http://catalog.sharedshelf.artstor.org/display\",\"associatedname\":{\"content\":\"Veber, Elit | Te\u0027atron Temuna\u0027 (Tel Aviv, Israel)\",\"xmlns\":\"\"},\"classification\":{\"content\":\"JPCDPI11C_455778\",\"xmlns\":\"\"},\"imageRepositoryID\":{\"content\":14062675,\"xmlns\":\"\"},\"culture\":{\"content\":\"Israeli\",\"xmlns\":\"\"}},\"xmlns\":\"\"},\"xmlns\":\"http://catalog.sharedshelf.artstor.org/ssd\"},\"Locations\":{\"Repository\":{\"ns0:term\":\"Judaica\",\"xmlns:ns0\":\"http://catalog.sharedshelf.artstor.org/ssw\"},\"PrivateOwner\":{\"ns0:term\":\"FHCL.JUD\",\"xmlns:ns0\":\"http://catalog.sharedshelf.artstor.org/ssw\"},\"Display\":\"Te\u0027atron Temuna (Tel-Aviv, Israel)\",\"Location\":{\"Source\":{\"term\":\"OLIVIA\",\"xmlns\":\"http://catalog.sharedshelf.artstor.org/ssc\"},\"ssc:vocab\":\"performing arts centers\",\"location\":\"Te\u0027atron Temuna (Tel-Aviv, Israel)\",\"type_lkup\":\"subject\",\"ssc:id\":62220},\"xmlns\":\"\"},\"xmlns\":\"http://catalog.sharedshelf.artstor.org/ssw\",\"Notes\":{\"Display\":{},\"Note\":[{\"ns0:term\":\"Gadi Dagon\",\"type_lkup\":\"Copyright\",\"xmlns:ns0\":\"http://catalog.sharedshelf.artstor.org/ssw\"},{\"ns0:term\":\"Funded by The Druker Family Judaica Book Fund and The Harvard-Littauer Judaica Endowment in the Harvard College Library.\",\"type_lkup\":\"General\",\"xmlns:ns0\":\"http://catalog.sharedshelf.artstor.org/ssw\"},{\"ns0:term\":\"digital images\",\"type_lkup\":\"Materials and Techniques\",\"xmlns:ns0\":\"http://catalog.sharedshelf.artstor.org/ssw\"}],\"xmlns\":\"\"},\"StylePeriods\":{\"StylePeriod\":{\"ssc:id\":\"\"},\"Display\":{},\"xmlns\":\"\"},\"ssc:refid\":455778,\"Cultures\":{\"Culture\":{\"term_lkup\":\"Israeli\"},\"Display\":\"Israeli\",\"xmlns\":\"\"},\"Titles\":{\"Display\":\"Eshet | Photographs by Gadi Dagon of show directed by Elit Veber, staged by Te\u0027atron Temuna\u0027 in 2002.\",\"xmlns\":\"\",\"Title\":[{\"ns1:term\":\"Eshet\",\"ssc:pref\":true,\"xmlns:ns1\":\"http://catalog.sharedshelf.artstor.org/ssw\"},{\"ns0:term\":\"Photographs by Gadi Dagon of show directed by Elit Veber, staged by Te\u0027atron Temuna\u0027 in 2002.\",\"xmlns:ns0\":\"http://catalog.sharedshelf.artstor.org/ssw\"}]},\"xmlns:ns0\":\"http://www.w3.org/2001/XMLSchema-instance\"}}","legacyId":455778,"workIndexId":"f4ff82dc-7622-407b-81b8-072a9698dbb0","contributor":"olivia"}); 
```

我的阅读器功能是

```
Ext.define('MyReader', {  
extend: 'Ext.data.reader.Json',
  alias: 'reader.my-json',
  read: function(object) {
    object.workXml = Ext.decode(object.responseText);
    return this.callParent([object]);
  }
}); 
```

我的商店是

```
Ext.define('WR.store.WorkRecord', {
extend : 'Ext.data.Store',
model : 'WR.model.WorkRecord',
autoLoad: true,

proxy: {
    type: 'jsonp',
    api: {
        read: 'http://192.168.90.188:8282/service/work/json/getWorkXmlByCompositeKey?compositeKey=455778-OLIVIA&authToken=123',
        update: 'data/updateUsers.json'
      },
    reader: {
        type: 'my-json',
        root: 'workXml',
        successProperty: 'success'
    }
}

}); 
```

但是我的阅读器函数返回一个空对象。当我 console.log(object.workXml) 时，它说未定义，当我 console.log(object) 时，它没有任何 resposeText。所以我不知道如何解码响应。是否需要使用回调方法？如果是这样，请帮助如何编写它。实际上我想解码这个 json 字符串并将其映射到我的模型，以便我可以轻松使用它。我的模型是

```
Ext.define('WR.model.WorkRecord', {
extend: 'Ext.data.Model',
fields: ['name',
         {name:'ns1term',mapping:'Work.Titles.Title[0]["ns1:term"]'},
         {name:'ns0term',mapping:'Work.Titles.Title[1]["ns0:term"]'},
         {name:'agent_display',mapping:'Work.Agents.Display'},
         {name:'cultures_display',mapping:'Work.Cultures.Display'},
         {name:'locations_display',mapping:'Work.Locations.Display'},
         {name:'dates_display',mapping:'Work.Dates.Display'},
         {name:'worktypes_display',mapping:'Work.WorkTypes.Display'},
         {name:'materials_display',mapping:'Work.Materials.Display'},
         {name:'techniques_display',mapping:'Work.Techniques.Display'},
         {name:'measurements_display',mapping:'Work.Measurements.Display'},
         {name:'subjects_display',mapping:'Work.Subjects.Display'},
         {name:'descriptions_display',mapping:'Work.Descriptions.Display'},
         {name:'notes_display',mapping:'Work.Notes.Display'}]      

}); 
```

# apache-zookeeper - 可以将 zookeeper ensemble 放在与它们服务的进程相同的机器上吗？

> ID：11964134
> 
> 赞同：0
> 
> 时间：2012-08-15T04:29:37.677
> 
> 标签：apache-zookeeper

可以吗，还是会导致分裂/大脑等问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T13:26:41.027

你不应该担心脑裂。ZK 仅在达到法定多数时才有效。如果节点没有仲裁多数，它们会拒绝写入。这确保了 Zk 不会在脑裂状态下工作。一个很好的解释是[here](https://stackoverflow.com/questions/1106984/avoiding-split-brain-votes-and-quorum)。

你不应该把客户端放在同一台机器上 客户端会影响 ZK 的性能（客户端是内存猪，消耗过多的网络等）。

# ios - 带有操作的文本字段在 iPad 上不起作用

> ID：11964135
> 
> 赞同：0
> 
> 时间：2012-08-15T04:29:43.390
> 
> 标签：ios, uibutton, uitextfield

我在我的文本字段中创建了一个按钮并调用我的`bookMarks`方法。这适用于iphone。如果我在工具栏中创建一个按钮并调用此方法，仍然可以正常工作。它只是在我的文本字段中不起作用。有没有办法解决这个问题？谢谢..

```
 [bookMarkButton addTarget:self action:@selector(bookMarks:) forControlEvents:UIControlEventTouchUpInside];

    locationField.leftView = bookMarkButton; 
```

书签法

```
- (void)bookMarks:(id)button {

    if (self.bookmarkPopoverController.popoverVisible) {
        [self.bookmarkPopoverController dismissPopoverAnimated:YES];
        self.bookmarkPopoverController = nil;
    } else {
        ViewBookmarkViewController * viewBookmarkViewController = [[[ViewBookmarkViewController alloc] initWithStyle:UITableViewStyleGrouped] autorelease];
        viewBookmarkViewController.delegate = self;
        [viewBookmarkViewController setBookmark:[webView stringByEvaluatingJavaScriptFromString:@"document.title"]
                                        url:self.url];
        UINavigationController *navController = [[[UINavigationController alloc] initWithRootViewController:viewBookmarkViewController] autorelease];

        navController.modalTransitionStyle = UIModalTransitionStyleCoverVertical;

        if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad) {
            self.bookmarkPopoverController = [[[UIPopoverController alloc] initWithContentViewController:navController] autorelease];
            [self.bookmarkPopoverController presentPopoverFromBarButtonItem:button
                                                   permittedArrowDirections:UIPopoverArrowDirectionDown|UIPopoverArrowDirectionUp
                                                                   animated:YES];
        } else {
            [self presentModalViewController:navController animated:YES];
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T04:54:40.280

为什么不为 textField 添加 ControlEvent：

```
[yourTextField addTarget:self action:@selector(bookMarks:) forControlEvents:UIControlEventTouchUpInside]; 
```

**编辑：**要区分按钮，分别将标签 0 和 1 添加到两个按钮；

现在你的方法是：

```
- (void)bookMarks:(id)sender 
{ 
  if([sender isKindOfClass:[UIButton class]]) 
  {
   UIButton *curBtn = (UIButton *)sender
   if([curBtn tag] == 0)
   {
     // any action for button 1
   }
   else if([curBtn tag] == 1)
   {
      //refresh uiWebView
   }
  }
 else
 {
   //your code
   //present your popover for ipad
   [[self.bookmarkPopoverController presentPopoverFromRect:yourtextFeild.frame inView:self.view permittedArrowDirections:UIPopoverArrowDirectionDown|UIPopoverArrowDirectionUp animated:YES];
 }
} 
```

# android - 如何在自定义 ListView 中删除一行并保存文本

> ID：11964136
> 
> 赞同：0
> 
> 时间：2012-08-15T04:29:43.377
> 
> 标签：android, sqlite, listview, row

我正在尝试使用自定义创建名称列表`ListView`。每行都有一个编辑和删除按钮。

编辑按钮工作正常，但我不知道在用户按下编辑或删除按钮后如何更新数据库。

这就是我想要做的：

1.  我想从 UI 和数据库中删除该行。

2.  当用户按下选项菜单中的数据库保存按钮时，我想保存可编辑的文本。

这是我的代码：

EditList.java [主要]

```
package edit.list;

import android.app.Activity;
import android.content.Intent;
import android.database.Cursor;
import android.os.Bundle;
import android.view.View;
import android.widget.ListView;
import android.widget.RelativeLayout;
import android.widget.SimpleCursorAdapter;
import android.widget.TextView;

public class EditLIST extends Activity {

    private AndroidSQLite mySQLiteAdapter ;

 final static String EXTRA_MESSAGE = "edit.list.message";

 public void onClick (View view) {

    Intent intent = new Intent(this,display.class);
    RelativeLayout relativeLayout = (RelativeLayout) view.getParent();

    TextView textView = (TextView) relativeLayout.findViewById(R.id.textView1);
//  TextView textView=(TextView) findViewById(R.id.textView1);
    String message = textView.getText().toString();

        intent.putExtra(EXTRA_MESSAGE,message);
    startActivity(intent);

 }

 public void delete (View view){
     //[what i have to write here]
 }

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_edit_list);
        ListView listContent = (ListView)findViewById(R.id.listView1);

        mySQLiteAdapter = new AndroidSQLite(this);
        mySQLiteAdapter.openToWrite();
        mySQLiteAdapter.deleteAll();

       mySQLiteAdapter.insert("umesh");
       mySQLiteAdapter.insert("ramesh");
       mySQLiteAdapter.insert("piyush");

      mySQLiteAdapter.close();

      mySQLiteAdapter = new AndroidSQLite(this);
      mySQLiteAdapter.openToRead();

        Cursor cursor = mySQLiteAdapter.queueAll();
        startManagingCursor(cursor);

        String[] from = new String[]{AndroidSQLite.KEY_FNAME};
        int[] to = new int[]{R.id.textView1};

        SimpleCursorAdapter cursorAdapter =
         new SimpleCursorAdapter(this, R.layout.button, cursor, from, to);
        listContent.setAdapter(cursorAdapter);
    }

    protected void onDestroy() {
        super.onDestroy();
    mySQLiteAdapter.close();
    }
    } 
```

安卓SQLite.java

```
package edit.list;

import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;
import android.database.sqlite.SQLiteDatabase.CursorFactory;

public class AndroidSQLite {

public static final String MYDATABASE_NAME = "abncd";
public static final String MYDATABASE_TABLE = "zxc";
public static final int MYDATABASE_VERSION = 1;
public static final String KEY_ID = "_id";
public static final String KEY_FNAME = "FNAME";
public static final String KEY_CONTENT1 = "Content1";

//create table MY_DATABASE (ID integer primary key, Content text not null);
private static final String SCRIPT_CREATE_DATABASE =
"create table " + MYDATABASE_TABLE + " ("
+ KEY_ID + " integer primary key autoincrement, "
+ KEY_FNAME + " text not null);";

private SQLiteHelper sqLiteHelper;
private SQLiteDatabase sqLiteDatabase;

private Context context;

public AndroidSQLite(Context c){
context = c;
}

public AndroidSQLite openToRead() throws android.database.SQLException {
sqLiteHelper = new SQLiteHelper(context, MYDATABASE_NAME, null, MYDATABASE_VERSION);
sqLiteDatabase = sqLiteHelper.getReadableDatabase();
return this;
}

public AndroidSQLite openToWrite() throws android.database.SQLException {
sqLiteHelper = new SQLiteHelper(context, MYDATABASE_NAME, null, MYDATABASE_VERSION);
sqLiteDatabase = sqLiteHelper.getWritableDatabase();
return this;
}

public void close(){
sqLiteHelper.close();
}

public long insert(String fname){

ContentValues contentValues = new ContentValues();

contentValues.put(KEY_FNAME, fname);

return sqLiteDatabase.insert(MYDATABASE_TABLE, null, contentValues);
}

public int deleteAll(){
return sqLiteDatabase.delete(MYDATABASE_TABLE, null, null);
}

public Cursor queueAll(){
String[] columns = new String[]{KEY_ID, KEY_FNAME};
Cursor cursor = sqLiteDatabase.query(MYDATABASE_TABLE, columns, 
  null, null, null, null, null);

return cursor;
}
public void delete(long id)
{
 sqLiteDatabase.delete(MYDATABASE_TABLE, KEY_ID+"="+id, null);   

}

 public void update_byID(int id, String v1)
 {
      ContentValues values = new ContentValues();
      values.put(KEY_CONTENT1, v1);          
      sqLiteDatabase.update(MYDATABASE_TABLE, values, KEY_ID+"="+id, null);

 }
public class SQLiteHelper extends SQLiteOpenHelper {

public SQLiteHelper(Context context, String name,
  CursorFactory factory, int version) {
 super(context, name, factory, version);
}

@Override
public void onCreate(SQLiteDatabase db) {
 // TODO Auto-generated method stub
 db.execSQL(SCRIPT_CREATE_DATABASE);
}

@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
 // TODO Auto-generated method stub

}

}

} 
```

显示.java

```
package edit.list;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.Menu;
import android.view.MenuInflater;
import android.view.MenuItem;
import android.widget.EditText;
import android.widget.Toast;

public class display extends Activity {
     public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.display);

                // Get the message from the intent
                Intent intent = getIntent();
                String message = intent.getStringExtra(EditLIST.EXTRA_MESSAGE);

                // Create the text view
                EditText editText = new EditText(this);
                editText.setTextSize(40);
                editText.setText(message);

                // Set the text view as the activity layout
                setContentView(editText);
                }
     public boolean onCreateOptionsMenu (Menu menu)
        {
            MenuInflater inflater = getMenuInflater();
            inflater.inflate(R.menu.activity_edit_list,menu);
            return true;
        }
     public boolean onOptionsItemSelected(MenuItem item)
     {  
            //int id=et1.getId();
            // Handle item selection
            switch (item.getItemId())
            {
                case R.id.save:
                    //[WHAT I HAVE 2 WRITE HERE]
                    finish();
                    return true;
                case R.id.cancel:
                    Toast.makeText(this, "Cancle clicked",Toast.LENGTH_SHORT).show();
                    return true;
                default:
                    return super.onOptionsItemSelected(item);
            }
    }
} 
```

xml 文件在这里..activity_edit_list.xml

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/RelativeLayout1"

    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal" >

    <ListView
        android:id="@+id/listView1"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:drawSelectorOnTop="false">

    </ListView>
</RelativeLayout> 
```

按钮.xml

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:onClick="onClick"
        android:text="delete" />

    <Button
        android:id="@+id/button2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_toLeftOf="@+id/button1"
        android:onClick="Click"
        android:text="edit" />

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBottom="@+id/button2"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:layout_toLeftOf="@+id/button2"
        android:text=" " />

</RelativeLayout> 
```

[https://lh6.googleusercontent.com/-NfeEPAeYSDo/UCtlQQepw2I/AAAAAAAAA-I/SnAUytNSO-Q/s640/Capture.JPG](https://lh6.googleusercontent.com/-NfeEPAeYSDo/UCtlQQepw2I/AAAAAAAAA-I/SnAUytNSO-Q/s640/Capture.JPG)

# c# - TcpListener(port) 出错 C# FileSharing

> ID：11964141
> 
> 赞同：0
> 
> 时间：2012-08-15T04:30:39.093
> 
> 标签：c#, tcp, tcplistener

我尝试通过 TCP/IP 进行文件共享，客户端可以将文件发送或上传到服务器

但是当文件发送到服务器时，服务器没有收到任何文件

这是我的代码

文件共享客户端.cs

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Threading.Tasks;
using System.Net;
using System.Net.Sockets;
using System.Net.NetworkInformation;
using System.IO;

namespace FileSharingClient
{
    public partial class Form1 : Form
    {
        private static string shortFileName = "";
        private static string fileName = "";
        public Form1()
        {
            InitializeComponent();
        }

        private void btnBrowse_Click(object sender, EventArgs e)
        {
            OpenFileDialog dlg = new OpenFileDialog();
            dlg.Title = "File Sharing Client";
            dlg.ShowDialog();
            txtFile.Text = dlg.FileName;
            fileName = dlg.FileName;
            shortFileName = dlg.SafeFileName;
        }

        private void btnSend_Click(object sender, EventArgs e)
        {
            string ipAddress = txtIPAddress.Text;
            int port = int.Parse(txtHost.Text);
            string fileName = txtFile.Text;
            Task.Factory.StartNew(() => SendFile(ipAddress,port,fileName,shortFileName));
            MessageBox.Show("File Sent");
        }

        public void SendFile(string remoteHostIP, int remoteHostPort, string longFileName, string shortFileName)
        {
            try
            {
                if (!string.IsNullOrEmpty(remoteHostIP))
                {
                    byte[] fileNameByte = Encoding.ASCII.GetBytes(shortFileName);
                    byte[] fileData = File.ReadAllBytes(longFileName);
                    byte[] clientData = new byte[4 + fileNameByte.Length + fileData.Length];
                    byte[] fileNameLen = BitConverter.GetBytes(fileNameByte.Length);
                    fileNameLen.CopyTo(clientData, 0);
                    fileNameByte.CopyTo(clientData, 4);
                    fileData.CopyTo(clientData, 4 + fileNameByte.Length);
                    TcpClient clientSocket = new TcpClient(remoteHostIP, remoteHostPort);
                    NetworkStream networkStream = clientSocket.GetStream();
                    networkStream.Write(clientData, 0, clientData.GetLength(0));
                    networkStream.Close();
                }
            }
            catch
            {

            }
        }

        private void Form1_Load(object sender, EventArgs e)
        {

        }
    }
} 
```

文件共享服务器.cs

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Net;
using System.Net.Sockets;
using System.Net.NetworkInformation;
using System.IO;
using System.Threading.Tasks;

namespace FileSharingServer
{
    public partial class Form1 : Form
    {

        public delegate void FileRecievedEventHandler(object source, string fileName);
        public event FileRecievedEventHandler NewFileRecieved;  

        public Form1()
        {
            InitializeComponent();
        }

        private void Form1_Load(object sender, EventArgs e)
        {
            this.NewFileRecieved+=new FileRecievedEventHandler(Form1_NewFileRecieved);
        }

        private void Form1_NewFileRecieved(object sender, string fileName)
        {
            this.BeginInvoke(                
            new Action(
            delegate()
            {
                MessageBox.Show("New File Recieved\n"+fileName);
                System.Diagnostics.Process.Start("explorer", @"c:\");
            }));
        }

        private void btnListen_Click(object sender, EventArgs e)
        {
            int port = int.Parse(txtHost.Text);
            Task.Factory.StartNew(() => HandleIncomingFile(port));
            MessageBox.Show("Listening on port"+port);
        }

        public void HandleIncomingFile(int port)
        {
            try
            {
                TcpListener tcpListener = new TcpListener(port);
                tcpListener.Start();
                while (true)
                {
                    Socket handlerSocket = tcpListener.AcceptSocket();
                    if (handlerSocket.Connected)
                    {
                        string fileName = string.Empty;
                        NetworkStream networkStream = new NetworkStream(handlerSocket);
                        int thisRead = 0;
                        int blockSize = 1024;
                        Byte[] dataByte = new Byte[blockSize];
                        lock (this)
                        {
                            string folderPath = @"c:\";
                            handlerSocket.Receive(dataByte);
                            int fileNameLen = BitConverter.ToInt32(dataByte, 0);
                            fileName = Encoding.ASCII.GetString(dataByte, 4, fileNameLen);
                            Stream fileStream = File.OpenWrite(folderPath + fileName);
                            fileStream.Write(dataByte, 4+fileNameLen,(1024-(4+fileNameLen)));
                            while (true)
                            {

                                thisRead = networkStream.Read(dataByte, 0, blockSize);
                                fileStream.Write(dataByte, 0,thisRead);
                                if (thisRead == 0)
                                    break;
                            }
                            fileStream.Close();

                        }
                        if (NewFileRecieved != null)
                        {
                            NewFileRecieved(this, fileName);
                        }
                        handlerSocket = null;
                    }
                }

            }
            catch
            {

            }
        }
    }
} 
```

在这一行 (FileSharingServer)

```
 TcpListener tcpListener = new TcpListener(port); 
```

我在 FileSharingServer 中收到一条错误消息

```
 Warning 1 'System.Net.Sockets.TcpListener.TcpListener(int)' is obsolete: '"This method has been deprecated. Please use TcpListener(IPAddress localaddr, int port) instead. http://go.microsoft.com/fwlink/?linkid=14202"' 
```

任何人都可以修复它？？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T04:47:29.030

You need to specify the IP address and the port to listen on:

```
TcpListener tcpListener = new TcpListener(System.Net.IPAddress.Any, port); 
```

# php - SQL 从一个表中选择品牌，如果另一个表有该品牌的产品

> ID：11964148
> 
> 赞同：0
> 
> 时间：2012-08-15T04:31:06.263
> 
> 标签：php, mysql, sql

使用 MySQL 和 PHP。

我有两张桌子产品和库存。

**产品**有 { productID | 产品 | 品牌|}

**股票**有{ ID | 商店ID | 产品ID | 数量 | 价格 }

我需要在特定商店获得所有可用的品牌。

所以这就是我所拥有的不起作用。

```
SELECT DISTINCT brand 
  FROM products 
 WHERE 'products.productID' = 'stock.productID' 
   AND 'stock.storeID' = 1 
```

如果我删除比较“WHERE”，它会返回所有品牌。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T04:36:04.533

尝试

```
Select p.brand FROM products p, stock s 
WHERE p.productID=s.productID and s.storeID='1' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T04:32:55.470

```
SELECT DISTINCT p.brand 
FROM products p inner join stock s on p.productID=s.productID
WHERE `stock.storeID` = 1 
```

标记 ` 和 ' 之间的差异

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T04:33:43.863

尝试

```
 "SELECT p.* FROM Products p 
 INNER JOIN stock s USING(productID)
 WHERE s.storeID = '".(int)$givenID."' 
 GROUP BY p.brand"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-15T04:36:36.823

我们也可以这样写

```
SELECT DISTINCT p.brand FROM products p , stock s where  p.productID=s.productID(+) and stock.storeID = 1 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-15T04:39:32.197

试试这个：

```
SELECT DISTINCT p.brand 
FROM   products p 
             INNER JOIN stock s 
                  ON p.productID=s.productID
WHERE s.`storeID` = 1 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-15T05:36:04.130

这将有助于

```
select p.brand 
  from product p, stock s 
 where p.productID = s.productID
   and s.storeID = 1 
```

# javascript - Google maps api - 街景、地理编码和 pov 标题

> ID：11964151
> 
> 赞同：0
> 
> 时间：2012-08-15T04:31:16.100
> 
> 标签：javascript, maps, geocoding, google-street-view, heading

我正在尝试显示一个物业的街景，并将街景摄像机朝向该物业。

物业的纬度使用地址和谷歌的地理编码服务进行地理编码。

使用属性的 latlng 和街景的 latlng，使用 computeHeading 计算航向，但相机仍然没有朝向属性倾斜。

问题似乎是 google 的地理编码服务返回的属性的 latlng 位于街道中间，而不是实际属性的顶部。街景位置的纬度也在街道中间。因此，计算的航向不会使相机朝向房产，而是朝向街道上的某个点。

有没有办法解决这个问题？任何地理编码服务可以将地址地理编码到实际建筑物而不是街道上最近的点？还有其他解决方案可以获得更好的结果吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T05:54:35.260

谷歌似乎没有在加拿大提供屋顶地理编码。

# wso2 - WSO2 ESB - 在数据库中存储/记录消息

> ID：11964154
> 
> 赞同：0
> 
> 时间：2012-08-15T04:32:04.050
> 
> 标签：wso2, esb, wso2esb

我们决定尝试 WSO2 ESB，对于我们的项目，我们需要将所有消息保存在数据库中，以便通过基于 Web 的自定义界面查看。

将所有完整请求和响应存储在数据库中的最佳方式是什么？有没有为此目的的调解人？我们查看了 STORE 和 DBREPORT，显然没有一个是为此目的而构建的。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T11:36:56.183

我认为您可以使用 DBReport 来执行此操作 - 一个简单的 SQL 插入并作为参数选择整个 MessageContext。请参阅此链接，然后选择要保存的值：

[DBReport Documentation](http://wso2.org/project/esb/java/3.0.1/docs/mediators/dbreport.html)

其他解决方案是创建您自己的自定义中介（类中介）并直接在普通 Java 代码中进行插入。创建类中介者只需编写一个新的 Java 类并实现 org.apache.synapse.Mediator 类。构建一个 .jar 并将其复制到 WSO2 安装文件夹中的 component/lib 目录。

[类调解员](http://wso2.org/project/esb/java/3.0.1/docs/mediators/class.html)

# c# - 用运算符连接字节值？

> ID：11964162
> 
> 赞同：1
> 
> 时间：2012-08-15T04:32:56.510
> 
> 标签：c#, unicode, byte

在 PHP 中，我可以使用 ' 将每个值相互连接。' 操作员。
现在我想在 c# 中连接一些字节值，如下所示：

```
$byteData = "\x00\x00" . "Soroush" . "\x20"; 
```

在c#中可以吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T04:42:45.253

试试这个：

```
 byte[] byteData = (new byte[]{0,0}).Concat(Encoding.UTF8.GetBytes("asas")).Concat(new byte[]{20}).ToArray(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T04:36:53.473

您可以使用运算符`+`：

```
string string_variable = "great";
string test = "This is a " + string_variable + " test"; 
```

您可以将字节数组转换为字符串：

`string value = ASCIIEncoding.ASCII.GetString(byteArray)`

或者，对于 UTF-8 使用

`string System.Text.Encoding.UTF8.GetString(byte[])`

要将字符串转换回字节数组：

`byte[] byteArray = Hex.decodeHex(str.toCharArray());`

# postgresql - 从生产数据中将模式合并到 heroku pgbackups 克隆的最佳方法

> ID：11964171
> 
> 赞同：0
> 
> 时间：2012-08-15T04:34:10.260
> 
> 标签：postgresql, heroku, backup

有时为了测试我的应用程序，我使用 heroku pgbackups 将我的生产数据复制到我的暂存实例中。但是，如果暂存中存在未在生产中的表，则加载备份会将它们保留在那里。

我想知道是否有一种很好的方法可以将它们淘汰，这样我的迁移将以与我期望它们在生产中工作的方式完全相同的方式应用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T04:37:18.157

在从 Heroku 恢复备份之前，您可以简单地删除并重新创建相关架构：

```
DROP SCHEMA xyz CASCADE; 
```

确保可以删除架构中的所有内容！
不确定 a) 您的暂存实例是否也在 Heroku 上，并且 b) Heroku 是否允许您这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T04:40:26.377

`heroku pg:reset`在调用 restore 命令之前，您可以通过使用该命令删除目标数据库上的所有数据来轻松地从空白开始。

# php - 将照片发布为开放图 Facebook 页面

> ID：11964175
> 
> 赞同：1
> 
> 时间：2012-08-15T04:35:53.270
> 
> 标签：php, facebook, facebook-graph-api

我有一个有许多打开的图形页面的应用程序。除了照片，我可以发布这些页面就好了。我收到“PHP 致命错误：未捕获的 OAuthException：请求此资源需要用户访问令牌。” 这没有任何意义，因为我可以将页面作为页面发布到提要没有问题。

继承人的代码：

```
require_once ('facebook.php');

$fb = new Facebook(array(
'appId'  => 'XXX',
'secret' => 'XXX',
));  

$fb->setFileUploadSupport(true);

$args = array('message' => 'Photo Caption');
$args['image'] = '@' . realpath("testpic.jpg");

$data = $fb->api("/PAGEID/photos", "post", $args);

print_r($data);
?> 
```

这可以在不需要用户登录的情况下完成吗？我读到您可以以用户身份请求页面 access_token ，但是您可以使用一种方法对一个功能进行身份验证，然后再使用另一种方法来验证另一个功能，这似乎有点愚蠢。如果可能，我想避免用户登录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T01:47:41.667

发布照片的应用程序需要在 $args 中包含一个用于管理页面的访问令牌。这也称为“页面访问令牌”或“页面令牌”。

```
$args['access_token'] = $access_token; 
```

我获得这种访问令牌的方式是`manage_pages,publish_stream`从作为页面管理员的用户（我）那里获得权限。然后：

```
$page_info = $facebook->api('/'.$PAGE_ID.'?fields=access_token'); 
```

和：

```
$access_token = $page_info['access_token']; 
```

另请参阅：[开发人员博客文章](https://developers.facebook.com/blog/post/524/)

# php - 使用 PHP 和 Javascript 通过 CORS 实现站点之间的跨域通信

> ID：11964178
> 
> 赞同：0
> 
> 时间：2012-08-15T04:36:29.493
> 
> 标签：php, javascript, ajax, cross-domain, cors

在网上浏览了几天并尝试了所有可能的事情之后，我开始知道我的主机服务器存在问题。它被我的主机服务器禁用。所以，我想在 Stackoverflow 上发布我的代码，这样，SO 上的其他人就不会像我一样浪费时间。

该代码片段在 IE、Safari、Mozilla 和 Chrome 上运行良好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T05:00:31.560

客户端的Javascript代码

```
<script type='text/javascript'>

// function for making an object for making AJAX request

function getXMLHTTPRequest() {
try {
req = new XMLHttpRequest();
} catch(err1) {
try {
req = new ActiveXObject("Msxml2.XMLHTTP");
} catch (err2) {
try {
req = new ActiveXObject("Microsoft.XMLHTTP");
} catch (err3) {
req = false;
}
}
}
return req;
}

var http899 = getXMLHTTPRequest();
function searchFabIndia() {

var myurl = "http://my2nddomain.com/yebhi.php";
myRand = parseInt(Math.random()*999999999999999);
var modurl = myurl+"?rand="+myRand;
http899.open("GET", modurl, true);
http899.onreadystatechange = useHttpResponse899;
http899.send(null);
}

function useHttpResponse899() {
if (http899.readyState == 4) {
if(http899.status == 200) {
 // do all processings with the obtained values / response here
}
}
}

</script>

<body onload='searchFabIndia();'> 
```

服务器端所需的部分代码。您需要设置可以请求页面内容、允许方法和标题的来源（推荐人）。这些设置可以存储在 .htaccess 文件中，用于您发出请求的第二个域上的所有文件，或者，您可以将它们放在您的特定 PHP 文件中，如下所示：-

```
 <?php
        header("Access-Control-Allow-Origin: *");
        header("Access-Control-Allow-Methods: GET, POST, OPTIONS, PUT, DELETE");
        header("Access-Control-Allow-Headers: Content-Type, Depth, User-Agent, X-File-Size, X-Requested-With, If-Modified-Since, X-File-Name, Cache-Control");
        header("Access-Control-Max-Age: 18000");
// Put it in your PHP file
    ?> 
```

或者，您可以通过在 .htaccess 文件中提及相同的内容来为整个域/子域一起指定这些设置，如下所示：-

```
<IfModule mod_headers.c>
   <FilesMatch "\.(php)$">
    Header set Access-Control-Allow-Origin: *
    Header set Access-Control-Allow-Methods : POST,GET,OPTIONS,PUT,DELETE
</FilesMatch>
  </IfModule> 
```

也不是说所有引用者的通配符允许有时是不必要的，因此，在这种情况下，您可以通过命名它们来指定特定的域/子域，它们每个都用逗号（，）分隔，如图所示

```
Header set Access-Control-Allow-Origin: http://abc.com,http://def.com,http://ghi.com 
```

如果您在实施其中任何一项时遇到困难，请发表评论。你可以看到我在[这里提到的现场演示](http://compare.buyhatke.com/products/apple-ipod-touch)

# html - 如何在没有原始 psd 的情况下修改现有网站？

> ID：11964185
> 
> 赞同：-1
> 
> 时间：2012-08-15T04:36:55.500
> 
> 标签：html

我正在尝试改造别人为我构建的网站，并且根据我目前所学到的知识，该设计是在 Photoshop 中制作的，然后“切片？” 在 HTML 和 CSS 中。我的问题是，如果我没有那些 Photoshop 文档，我应该如何添加内容或重新排列东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T04:41:29.920

如果您了解 HTML 和 CSS，则不需要 psd，您可以通过更改 html 和 css 文件直接编辑设计。

# c# - 在转发器链接到其他驱动器上的文件而不是部署 Web 应用程序的位置？

> ID：11964186
> 
> 赞同：0
> 
> 时间：2012-08-15T04:37:02.783
> 
> 标签：c#, asp.net, file-upload

我让用户使用 asp.net 上传控件上传文件。我在列出文件的页面上有一个转发器，用户可以单击以下载它们：

```
 protected void grdFiles_RowDataBound(object sender, GridViewRowEventArgs e)
    {
        if (e.Row.RowType != DataControlRowType.DataRow) return;

        var fileNameFull = Common.FileHelper.UploadPath + e.Row.Cells[0].Text;

        Request.MapPath(fileNameFull);

        var hyp = new HyperLink
                      {
                          NavigateUrl = fileNameFull,
                          Text = e.Row.Cells[0].Text,
                      };
        e.Row.Cells[0].Controls.Add(hyp);
    } 
```

当文件与 Web 应用程序位于同一驱动器上时，这可以正常工作，fileNameFull 看起来像：`~\Uploads\some pdf.pdf`

现在的要求是将文件存储在不同的驱动器上，所以我的问题是如何实现这一点？Request.MapPath 显然需要一个虚拟路径。

这些文件需要通过网络向用户公开，安全性不是主要问题。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T05:10:24.810

您无法创建指向不在网站内托管的文件的超链接。但是您可以创建一个 http 处理程序来提供文件。http 处理程序可以接受查询字符串中文件的标识符并将文件写入响应：

```
public class YourHttpHandler: IHttpHandler
{
    public void ProcessRequest(HttpContext context)
    {
        string filePath = Common.FileHelper.UploadPath + context.Request.QueryString["file"];
        context.Response.ContentType = "your content type";
        context.Response.WriteFile(filePath);
    }

    public bool IsReusable
    {
        get { return false; }
    }
} 
```

然后在页面的绑定事件中，您可以将 设置`NavigateUrl`为处理程序，并在查询字符串中使用文件的标识符。像这样的东西：

```
var hyp = new HyperLink
                      {
                          NavigateUrl = "~/YourHttpHandler.ashx?file=" + e.Row.Cells[0].Text,
                          Text = e.Row.Cells[0].Text,
                      }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T05:03:51.890

您可以创建您的自定义[VirtualPathProvider](http://msdn.microsoft.com/ru-ru/library/system.web.hosting.virtualpathprovider.aspx)，它允许您将不同的文件映射到不同的虚拟路径。

**笔记**

> 当您从 继承时`VirtualPathProvider`，您必须覆盖以下成员：
> 
> ```
> - FileExists
> - GetFile 
> ```
> 
> 如果您的自定义`VirtualPathProvider`类支持虚拟文件系统中的目录，则必须覆盖以下成员。
> 
> ```
> - DirectoryExists
> - GetDirectory 
> ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T05:09:00.663

首先，您完全忽略了调用的结果

`Request.MapPath(fileNameFull);`

这是故意的吗？或者你的意思是写

`fileNameFull = Request.MapPath(fileNameFull);`?

其次，您需要在 IIS 中创建一个虚拟目录，该目录将映射到文件存储位置的 UNC 路径。

例如，您可以将虚拟路径映射`/Uploads/`到 UNC 路径`\\extraserver\fileshare\uploads\`。

需要管理安全问题（您的网站通常在没有域访问权限的帐户中运行，因此它通常无法连接到其他服务器上的共享 - 您可以通过选择域用户来解决这个问题用于连接）。

然后忽略 Request.MapPath 路径，以及你的`Common.FileHelper.UploadPath`部分。

您只需提供与文件名连接的`http://mywebserver/mywebsite/Uploads/`部分（或者您想要制作的部分，`Uploads`虚拟目录路径名在哪里）。

# sql - 带有可选输入参数的 Oracle 动态 SQL，由 # 分隔

> ID：11964187
> 
> 赞同：0
> 
> 时间：2012-08-15T04:37:15.023
> 
> 标签：sql, oracle, dynamic

好的——所以这有点难以解释......

我需要发回一个 refcursor

select 语句需要参数，每个参数可以有多个值，也可以是可选的。

例如，像这样的声明：

select * from Table A where Column1 in ('A', 'B', 'C') and column2 in ('3', '4', '5');

但是 Column1 的过滤器的值作为输入参数传递，例如“A#B#C”，Column2 的过滤器的值作为输入参数传递，例如“3#4#5”

此外，如果输入参数为 NULL，我不想将该过滤器添加到 where 子句。

我的SP是这样写的

```
PROCEDURE GET_RECS (
    p_users IN VARCHAR2,
 p_clients IN VARCHAR2
, p_CURSOR OUT SYS_REFCURSOR)

IS
v_sql varchar2(4000);
    v_crlf char(2) := chr(13) || chr(10);

begin
v_sql := 'select A.col1, A.col2 from table1 A where 1 = 1 ' || v_crlf;
if p_users is not null then
v_sql := v_SQL || ' and a.user in (SELECT * FROM TABLE ( CAST (str2tbl (:p_users ) AS     TableType) )) ' || v_crlf;
end if;
if p_clients is not null then
v_sql := v_SQL || ' and a.client in (SELECT * FROM TABLE ( CAST (str2tbl (:p_clients ) AS TableType) )) ' || v_crlf;
 end if;

if p_users is not null then
OPEN p_cursor FOR v_sql using p_users ;
 end if;
if p_clients is not null then
OPEN p_cursor FOR v_sql using p_clients ;
 end if;

end; 
```

我也知道上面的代码在“Open cursor for”块中是不正确的，因为它没有考虑到两个参数都没有发送，或者两个参数都发送了。

以上是带有 2 个过滤器的示例，但我的实际查询有更多过滤器组合。因此，如果可能，块的打开光标也应该是动态的。

我创建了一个名为 str2tbl 的函数，它可以轻松地将“3#4#5”转换为表格。代码如下：

```
CREATE OR REPLACE function str2tbl
 (p_str   in varchar2,
  p_delim in varchar2 default '#')
 return      TableType
 as
 l_str      long default p_str || p_delim;
 l_n        number;
 l_data     TableType := TableType();
 begin
 loop
     l_n := instr( l_str, p_delim );
     exit when (nvl(l_n,0) = 0);
     l_data.extend;
     l_data( l_data.count ) := ltrim(rtrim(substr(l_str,1,l_n-1)));
     l_str := substr( l_str, l_n+length(p_delim) );
 end loop;
 return l_data;
 end; 
```

# opengl - 检查 GLUT 是否已初始化？

> ID：11964209
> 
> 赞同：2
> 
> 时间：2012-08-15T04:40:12.290
> 
> 标签：opengl, glut

GLUT 是否提供了一些用户可访问的机制来检查是否调用了 glutInit？我正在调试现有应用程序中的一些问题，这将是一个非常有用的调试工具！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2016-09-05T09:56:26.503

您可以`glutGet`与`GLUT_INIT_STATE`参数一起使用：

```
bool glutInitialised = glutGet(GLUT_INIT_STATE) == 1; 
```

# atk4 - 将表达式添加到 CRUD

> ID：11964213
> 
> 赞同：0
> 
> 时间：2012-08-15T04:40:43.710
> 
> 标签：atk4

我找到了[使用 ATK4.2.1 向模型添加和表达](http://agiletoolkit.org/doc/modeltable/expression)的新方法，但是我在将其添加到 CRUD 视图时遇到问题，但没有出现错误**"Method is not defined for this object"**。

这可能吗？可以在 CRUD 对象中查看表达式吗？

型号代码

```
->addExpression('books_written')->set(function($select){
  return $select->dsql()
    ->table('book')
    ->field($select->expr('count(*)'))
    ->where('author_id',$select->getField('id'));
}
}); 
```

通过将“isUser”添加到字段列表而导致错误的页面方法。

```
$crud = $AddressBook->add('CRUD');
$crud->setModel('PersonLockedAccount',array('firstName','lastName','email','mobile','isUser'))->addCondition('account_id',$accountId)->addCondition('id','!=',$personId); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T09:46:05.543

文档页面上有一个错误。Agile Toolkit 中的所有回调方法都接收一个“调用者”作为第一个参数。在这种情况下，它将是模型本身。第二个参数是查询，它正在进行中。表达式使用哪个 dsql 无关紧要：

```
->addExpression('books_written')->set(function($model,$select){
//                                             ^^^^^^
  return $select->dsql() // creates new, empty dsql
    ->table('book')
    ->field($select->expr('count(*)'))
    ->where('author_id',$select->getField('id'));
}
}); 
```

# asp.net - 在 asp.net 按钮 onclick 上调用两个函数

> ID：11964214
> 
> 赞同：5
> 
> 时间：2012-08-15T04:40:44.020
> 
> 标签：asp.net

我想在按钮单击时调用两个函数我试过这样

```
 <asp:Button ID="Button2" runat="server" Font-Bold="False" onclick="tableShow();Unnamed1_Click" Text="Search" 
         Width="63px"> 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-15T04:44:34.660

OnClick 是一个服务器端事件。因此，您可以分配一个方法，然后从该方法调用其他方法，如下所示。

在 asp 标记中

```
<asp:Button ID="Button2" runat="server" Font-Bold="False" onclick="Unnamed1_Click" 
 Text="Search" Width="63px"> 
```

在后面的代码中

```
protected void Unnamed1_Click(object sender, EventArgs e)
{
    this.tableShow();
    //Do your actual code here.
} 
```

**更新**

如果`tableShow`是 javascript 方法，那么您可以使用以下标记

```
<asp:Button ID="Button2" runat="server" Font-Bold="False" 
 OnClientClick="tableShow();" onclick="Unnamed1_Click" Text="Search"
 Width="63px"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T06:44:56.110

您可以使用方法内部的方法来执行此操作。首先这样做

```
<asp:Button ID="Button2" runat="server" Font-Bold="False" onclick="Unnamed1_Click" Text="Search" 
         Width="63px"> 
```

然后在后面的代码中

```
protected void Unnamed1_Click(object sender, EventArgs e)
{
    //call another function here
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-17T14:47:01.610

另一种选择是使用`onclientclick`允许您运行带有服务器交互的 JS 函数的事件。

```
<asp:TemplateField>
    <FooterTemplate>
        <asp:Button ID="btnAdd" runat="server" Text="Add" onclick="btnAdd_Click" OnClientClick="javascript:ResetSaveFlag()"/>
        <asp:Button ID="btnClear" runat="server" Text="Clear" OnClientClick="javascript:ResetSaveFlag(); javascript:clearEntries(this)"/>
    </FooterTemplate>
    <ItemTemplate>
        <asp:Button ID="btnDelete" runat="server" Text="Delete" CommandName="Delete" 
            onclick="btnDelete_Click" 
            CommandArgument='<%# Eval("partNumber") + "," + Eval("warehouseLocation") %>' 
            UseSubmitBehavior="False"/>
    </ItemTemplate>
</asp:TemplateField> 
```

在第一个按钮（向表中添加新行）中，我有一个服务器端`onclick="btnAdd_Click"`和一个客户端`OnClientClick="javascript:ResetSaveFlag()"`。

第二个按钮（清除一行并设置一个“干净”标志[，因此 onbeforeunload 不会运行](http://blog.revathskumar.com/2015/08/javascript-window-onbeforeunload.html)），我没有使用任何服务器端代码，只是客户端`OnClientClick="javascript:ResetSaveFlag(); javascript:clearEntries(this)"`。第一个清除“脏”标志，第二个清除所有条目的行。

如果有人感兴趣，我可以发布干净和肮脏的标志 JS，但它似乎与原始问题并没有密切关系。

# ravendb - Raven DB 多空间索引

> ID：11964216
> 
> 赞同：1
> 
> 时间：2012-08-15T04:41:27.953
> 
> 标签：ravendb

我试图让我的模型使用多个空间索引。基本上，我有一个带有源和目的地的路线。我想搜索我的路线，其中 Source 是 WithinRadiusOf 并且 Destination 是 WithinRadiusOf ....但我不知道该怎么做。

我已经定义了索引......但我只知道如何在单个查询中使用 1。

```
 Map = routes => from r in routes select new { _ = SpatialIndex.Generate(r.Source.Location.Latitude, r.Source.Location.Longitude) };

Map = routes => from r in routes select new { _ = SpatialIndex.Generate(r.Destination.Location.Latitude, r.Destination.Location.Longitude) };

session.Advanced.LuceneQuery<Route>("Routes/BySource")
            .WithinRadiusOf(...); 
```

...但我不确定如何将第二个空间索引加入其中？

之后我可以实现并在内存中加入......但我想知道是否有办法将它纳入查询。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T11:56:39.283

我们不提供对多个点进行空间查询的方法。

# jquery-mobile - jQuery Mobile - 嵌套列表中的字段未提交

> ID：11964221
> 
> 赞同：-1
> 
> 时间：2012-08-15T04:42:02.110
> 
> 标签：jquery-mobile

我有这个必须立即提交的大表格。一个长页面不是一种选择，所以我决定将嵌套列表中的部分分开。这是标记的样子：

```
<form action="/home/index" data-ajax="false" data-transition="pop" id="xmlForm" method="post">

    <ul data-role="listview" data-inset="true">

       <li>
           Section 1
            <ul data-inset="true">
                <li data-role="fieldcontain">
                    <label for="field1">Field1</label>
                    <input type="text" id="field1" />
                </li>
                <li data-role="fieldcontain">
                    <label for="field2">Field2</label>
                    <input type="text" id="field2" />
                </li>
            </ul>
       </li>

       <li>
           Section 2
            <ul data-inset="true">
                <li data-role="fieldcontain">
                    <label for="field4">Field4</label>
                    <input type="text" id="field4" />
                </li>
                <li data-role="fieldcontain">
                    <label for="field5">Field5</label>
                    <input type="text" id="field5" />
                </li>
            </ul>
       </li>

    </ul>

    <div class="ui-body ui-body-b">
        <fieldset>
            <button type="submit" data-theme="a" name="submit" value="submit-value">Process Script</button>
        </fieldset>
    </div>

</form> 
```

但是，一旦我单击“提交”按钮，提交的唯一值是：

```
submit:submit-value 
```

表单忽略所有其他字段。是设计使然还是我遗漏了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T05:04:03.537

您的输入元素应该具有`name`属性（即`<input type="text" id="field1" name="field1" />`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T11:06:48.747

我有同样的问题。如果您查看 DOM，JQuery 会将每个子列表重新排列到自己的页面中。这会导致所有表单字段移出`<form></form>`标签。这就是为什么它们不包含在提交中的原因。

我添加了“表单”属性：`<input type="text" id="field2" form="xmlForm"/>`到所有表单字段。现在，当我提交子列表中的所有字段时，都包括在内。

# ruby-on-rails - 部署时部署失败：update_code

> ID：11964223
> 
> 赞同：1
> 
> 时间：2012-08-15T04:42:24.807
> 
> 标签：ruby-on-rails, capistrano

我有一个 Rails 应用程序，想第一次部署到 linode，当我运行进行第一次部署时，当触发cat 修订错误`cap staging deploy:cold`时我失败了。`deploy:update_code`

这是我的日志：[https](https://gist.github.com/3349971) ://gist.github.com/3349971 这是我的`deploy.rb`文件：[https ://gist.github.com/3349968](https://gist.github.com/3349968)

# php - Does not work zip from exec()

> ID：11964231
> 
> 赞同：0
> 
> 时间：2012-08-15T04:43:15.567
> 
> 标签：php, cron, zip, exec

I have php script that is run from cron. There are such command as

```
zip -j9 {targer_some_directory}/all.zip {some_directory}/pdf/*.pdf 
```

in that script.

This command is running by exec();

{some_directory} and {targer_some_directory} are existing full path. These directories have rights = 0777. When I run this script from shell it works. When it run from cron, script doesn't work.

Can anybody help me?

P.S. Sorry for my bad English.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T05:35:33.370

`shell`当您从和从您运行脚本时，环境变量`cron`的内容会有所不同。`$PATH`所以，我想你的 zip 位于某个地方，它不包含在 cron 的 $PATH 中。

最简单的解决方案是运行 zip 并指定完整路径，例如`/usr/local/bin/zip`

# vb.net - ToBsonDocument 的反面是什么？

> ID：11964233
> 
> 赞同：0
> 
> 时间：2012-08-15T04:43:30.500
> 
> 标签：vb.net, mongodb, bson

说我有生意。如果我想将类为 Business 的对象转换为 BsonDocument，我会这样做

```
aBusiness.ToBsonDocument 
```

伟大的。

如果我想把一个 BsonDocument 变成一个Business 类呢？有没有简单的方法？

**公共共享函数 ToBsonDocument(Of TNominalType)(ByVal obj As TNominalType) As MongoDB.Bson.BsonDocument MongoDB.Bson.BsonExtensionMethods 成员**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T06:36:44.727

您需要做的是将您的 BSonDocument 反序列化到您的类中。

如果没有更完整的课程视图，我无法给出完整的示例，但总的来说，您需要执行以下操作：

```
Dim testBusiness As aBusiness = BsonSerializer.Deserialize(Of aBusiness) 
```

[您可以在此处](http://api.mongodb.org/csharp/1.0/html/61e85ebb-2cd2-33fe-d6d7-f394a35e6bcb.htm)找到 BSonSerializer 的 API 文档

您还可以[在此处看到 C# 的类似问题](https://stackoverflow.com/questions/9478613/)

# php - 滚动时，ajax loader div没有出现在全屏上

> ID：11964241
> 
> 赞同：0
> 
> 时间：2012-08-15T04:45:04.393
> 
> 标签：php, css, jquery

我正在使用 jquery ajax，我想`gif`在 ajax 工作时显示加载器图像。加载器正确显示，但是当用户在加载器显示时滚动或调整窗口大小时，加载器会移出屏幕或改变大小。我希望加载器固定全屏，这样即使用户滚动，它也不会从视图中消失。

这是我的jquery代码

```
 jQuery.ajaxSetup({  
  beforeSend: function() {
     $('#loader').show();
  },
  complete: function(){     
     $('#loader').hide();
  },
  success: function() {}
}); 
```

这是`CSS`加载器及其内部 div

```
<style>
#loader
{
  background-color: #e8e8e8;
    width: 100%;
    height: auto;
    bottom: 0px;
    top: 0px;
    left: 0;
    position: absolute;
    opacity: 0.5;
    filter: progid:DXImageTransform.Microsoft.Alpha(opacity=80);
    display:none;
}
#center {
    position: absolute;
    width: 100px;
    height: 50px;
    top: 50%;
    left: 50%;
    margin-top: -25px; // margin is -0.5 * dimension
    margin-left: -50px;
    z-index:5;
}

</style> 
```

和html如下

```
<div id="loader" >
    <div id="center">
        <img src="images/loading.gif" />
    <div>
</div> 
```

在这里你可以查看[我的测试页](http://sayhotel.com/rahul/ajax.php)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T05:14:31.647

这就是我使用您的标记将加载器图像大致水平和垂直居中的方式。

```
body { 
     height:100%;
     margin:0;
     padding:0;
}

#center {
     width: 300px;
     height: 200px;
     position: absolute;
     top: 40%;
     left: 0px;
     width: 100%;
}

#loader {
     background-color: red;
     position: absolute;
     left: 0px;
     top: 0px;
     width:100%;
     height:100%;
     text-align:center;
     z-index: 1000;
     opacity: 0.5;
     filter: progid:DXImageTransform.Microsoft.Alpha(opacity=80);
}
​ 
```

这是一个jsbin，显示结果。

[http://jsbin.com/owaciy/2/](http://jsbin.com/owaciy/2/)

** 更新 **

By replacing `position:absolute` with `position:fixed`, you should be able to achieve the desired result:

[http://jsbin.com/owaciy/3](http://jsbin.com/owaciy/3)

# perl - Using Perl to wait for a file to enter a folder and move it to a different location

> ID：11964243
> 
> 赞同：0
> 
> 时间：2012-08-15T04:45:23.787
> 
> 标签：perl, file, wait

I am rather new to Perl and would like to seek some advise on how to use Perl to detect if a files have populated a folder and then to move those files to a different location.

I have seen many codes that take about waiting for a specific file but my company uses a number randomizer for the files, so no two files have the same name.

Appreciate any help in this matter.

Thanks again.

Aaron

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T05:10:36.600

**更新**：@daxim 在评论中建议[File::ChangeNotify](http://search.cpan.org/~drolsky/File-ChangeNotify-0.22/lib/File/ChangeNotify.pm)是一个跨平台模块，其工作方式与 Win32::FileSystem::Watcher 非常相似。

快速搜索[CPAN](http://search.cpan.org)表明[Win32::FileSystem::Watcher](http://search.cpan.org/~ank/Win32-FileSystem-Watcher-0.1.0/lib/Win32/FileSystem/Watcher.pm)可以提醒您目录中的更改。您需要安装此模块和任何依赖项。

从文档中：

```
use Win32::FileSystem::Watcher;

my $watcher = Win32::FileSystem::Watcher->new( "c:\\" );

# or

my $watcher = Win32::FileSystem::Watcher->new(
    "c:\\",
    notify_filter  => FILE_NOTIFY_ALL,
    watch_sub_tree => 1,
);

$watcher->start();
print "Monitoring started.";

sleep(5);

# Get a list of changes since start().
my @entries = $watcher->get_results();

# Get a list of changes since the last get_results()
@entries = $watcher->get_results();

# ... repeat as needed ...

$watcher->stop(); # or undef $watcher

foreach my $entry (@entries) {
    print $entry->action_name . " " . $entry->file_name . "\n";
}

# Restart monitoring

# $watcher->start();
# ...
# $watcher->stop(); 
```

# php - 如何在 emacs 中展开我的 php 代码？

> ID：11964245
> 
> 赞同：1
> 
> 时间：2012-08-15T04:45:40.730
> 
> 标签：php, emacs, code-folding

我是emacs 23.2.1的新手。我想编辑我的 php 文件，我从[https://code.google.com/p/mewde/](https://code.google.com/p/mewde/)获得了 emacs 的 php 模式，但是当我打开 php 文件并进入 php-mode 时，这种模式会自动折叠一些部分我的脚本，

```
<?php...
?> 
```

我已经尝试了每一个键（从网络、emacs-wiki 和 Ch？，就像 Cc Cc ， Cc @ Cc .etc 一样）但没有人工作，谁能告诉我展开我的代码的关键？

这真的是一个简单但糟糕但严重的问题，如果你能给我一个方向，我会非常感谢你和上帝。

注意：我使用的是 Ubuntu 11.04

[[已解决]： https](https://code.google.com/p/mewde/) ://code.google.com/p/mewde/上的php-mode依赖c-mode、outline-mode和hs-mode(hide-show-mode)来管理代码，所以我使用在大纲模式中键入以隐藏和显示块。在我的 emacs 中，使用“Cc @ Ca”显示所有代码，并使用“Cc @ Ct”隐藏正文。***感谢周杰伦的提醒！！***

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T04:50:42.183

你有没有尝试过

```
C-c C-o 
C-c C-f 
```

或者直接进入“菜单命令->展开所有输出”

# php - 实例化类导致网站问题

> ID：11964246
> 
> 赞同：0
> 
> 时间：2012-08-15T04:45:52.433
> 
> 标签：php, mysql, pdo

我的服务器上有一个名为 test.php 的文件。以下是内容：

```
<?php
echo "hi\n";
try {
    $dbh = new PDO('mysql:host=localhost;dbname=db', "foo", "bar");
    echo "hi\n";
} catch (PDOException $e) {
    die("Error!");
}
echo "hi\n";
?> 
```

代码相当简单。如果一切正常，它应该打印三遍。

当我从 shell 运行这段代码时，它确实在三个单独的行上打印了“hi”。但是，当我通过网站 (http://localhost/test.php) 访问此文件时，它只打印一个 hi。

删除 $dbh = new PDO('mysql:host=localhost;dbname=db', "foo", "bar"); 使他的所有三个都通过网站成功打印。

MySQL 信息是正确的，并且用户确实可以访问数据库。

什么会导致我直接通过外壳访问文件以打印所有三遍，但通过网站访问时只打印一次？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T04:58:48.997

你确定你启用了 PDO 扩展？如果您只得到一个“hi”，则意味着您在 PDO 对象声明中遇到致命错误。像这样的东西`"Fatal error: Class 'PDO' not found"`请检查。

[http://php.net/manual/en/pdo.installation.php](http://php.net/manual/en/pdo.installation.php)

无论如何，您的代码对我来说都很好。

# java - Hibernate 的 Session 异常

> ID：11964247
> 
> 赞同：0
> 
> 时间：2012-08-15T04:45:55.630
> 
> 标签：java, hibernate

我是新来的。尝试执行示例代码。

```
public class HibernateUtil {

private static final SessionFactory sessionFactory;

static {
    try {
        // Create the SessionFactory
        sessionFactory = new Configuration().configure().buildSessionFactory();
    } catch (HibernateException ex) {
        throw new RuntimeException("Configuration problem: " + ex.getMessage(), ex);
    }
}

public static final ThreadLocal session = new ThreadLocal();

public static Session currentSession() throws HibernateException {
    Session s = (Session) session.get();
    // Open a new Session, if this Thread has none yet
    if (s == null) {
        s = sessionFactory.openSession();
        session.set(s);
    }
    return s;
}

public static void closeSession() throws HibernateException {
    Session s = (Session) session.get();
    session.set(null);
    if (s != null)
        s.close();
}
}

public class javism_jaxb_xml_to_object {
public static void main(String[] args) throws JAXBException
{
    Session session = HibernateUtil.currentSession();
  Transaction tx = null;
    tx = session.beginTransaction();
            javism_jaxb cust = new javism_jaxb();
            cust.setName("Vasay");
            cust.setId(1);
            cust.setAge(34);
            session.save(cust);
            tx.commit();
}
} 
```

但得到例外

```
 Exception in thread "main" java.lang.NoClassDefFoundError: org/apache/commons/logging/LogFactory
at org.hibernate.cfg.Configuration.<clinit>(Configuration.java:111)
at test.HibernateUtil.<clinit>(HibernateUtil.java:16)
at test.javism_jaxb_xml_to_object.main(javism_jaxb_xml_to_object.java:25)
Caused by: java.lang.ClassNotFoundException: org.apache.commons.logging.LogFactory
at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
at java.lang.ClassLoader.loadClass(ClassLoader.java:307)
at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
at java.lang.ClassLoader.loadClass(ClassLoader.java:248)
... 3 more 
```

我做错了什么？

**更新**

在类路径中添加 commons-logging-1.1.1.jar 之后。并将 hibernate3.jar 从 3.0.3 刷新到 3.5 我得到另一个异常

```
Exception in thread "main" java.lang.NoClassDefFoundError: org/dom4j/DocumentException
at test.HibernateUtil.<clinit>(HibernateUtil.java:16)
at test.javism_jaxb_xml_to_object.main(javism_jaxb_xml_to_object.java:25)
Caused by: java.lang.ClassNotFoundException: org.dom4j.DocumentException
at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
at java.lang.ClassLoader.loadClass(ClassLoader.java:307)
at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
at java.lang.ClassLoader.loadClass(ClassLoader.java:248)
... 2 more 
```

但如果我使用 hibernate3.jar 版本 3.0.3 我得到这个

```
15.08.2012 11:01:30 org.hibernate.cfg.Environment <clinit>
INFO: Hibernate 3.0.3
15.08.2012 11:01:30 org.hibernate.cfg.Environment <clinit>
INFO: hibernate.properties not found
15.08.2012 11:01:30 org.hibernate.cfg.Environment <clinit>
INFO: using CGLIB reflection optimizer
15.08.2012 11:01:30 org.hibernate.cfg.Environment <clinit>
INFO: using JDK 1.4 java.sql.Timestamp handling
15.08.2012 11:01:30 org.hibernate.cfg.Configuration configure
INFO: configuring from resource: /hibernate.cfg.xml
15.08.2012 11:01:30 org.hibernate.cfg.Configuration getConfigurationInputStream
INFO: Configuration resource: /hibernate.cfg.xml 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T04:48:46.097

如果你有的话，你需要在你的类路径中添加 apache commons logging jar。否则从[apache](http://commons.apache.org/logging/)下载并将其添加到您的项目中并将其添加到项目的 classpth 中。

**更新**

[在此处](http://dom4j.sourceforge.net/)下载 dom4j 库并将其添加到类路径中。

**更新2**

信息：Hibernate 3.0.3 --> 显示您正在使用的休眠版本的信息日志。

INFO: hibernate.properties not found --> INFO LOG SHOWING `hibernate.properties`not found。这是提供休眠属性的另一种方法，您确实在`hibernate.cfg.xml`.

欲了解更多信息，请查看[此处](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/session-configuration.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T05:21:57.320

如果您只是制作一个示例项目来尝试休眠，那么 Nandkumar 的建议是可以的，只需继续添加`NoClassDefFoundError`.

这个过程非常繁琐，理想情况下你应该使用像 maven 这样的依赖管理工具，它可以解决 Hibernate（或任何其他此类框架）的所有依赖关系。该线程可以帮助您设置 maven 以使用 hibernate。它还可以帮助您在不同版本的休眠中移动

[将 Hibernate 3.5.x 添加到 maven pom.xml 构建](https://stackoverflow.com/questions/3018719/adding-hibernate-3-5-x-to-a-maven-pom-xml-build)

# delphi - 我的“未连接”TCP 客户端已连接？

> ID：11964248
> 
> 赞同：0
> 
> 时间：2012-08-15T04:46:05.467
> 
> 标签：delphi, indy10

给定以下代码，这是`TIdTCPClient`我的程序运行时 与我有任何关系的第一个代码

```
try
  if not TCPclient.Connected then
  begin
     TraceInfo(TCPclient.Host + ' Server not connected - reconnect');
     TCPclient.Connect();

     TCPclient.GetResponse(200);
     ConnectedToServer();
     TraceInfo(TCPclient.Host + ' Connect OK');
  end;

except   // when trying to connect to server
    on EIdAlreadyConnected : Exception do
    begin
       TraceWarning(TCPclient.Host + ' Attempt to Connect when already connected');
    end
    else    // Failed to connect for any other reason
    begin
       TraceError(TCPclient.Host + ' Connect FAILED !!!!');
       Exit; 
    end;
end;

// we either connected or noticed that we were already connected
try
  resultCode := TCPclient.SendCmd(theMessage);
  if resultCode = 200 then
  begin
     TraceInfo(TCPclient.Host + ' Sent OK');
     Result := TCPclient.LastCmdResult.Text.Text;
     DisconnectFromServer(TCPclient);
     Exit;
  end
  else
  begin
     TraceWarning(TCPclient.Host + ' Send rejected by server (result code = ' + IntToStr(resultCode) + ') !!!!');
      DisconnectFromServer(TCPclient);
      Exit;
  end;

except
  on E : Exception do       // EIdNotConnected
  begin
     Result := '';
     TraceError(TCPclient.Host + ' Send FAILED (exception "' + E.ClassName + '")');
  end; 
```

结尾;

我不明白为什么跟踪日志说

```
00:00:00 [10.21.18.211 Server not connected - reconnect]    12:21:38 PM
00:00:01 [10.21.18.211 Attempt to Connect when already connected]   12:21:40 PM
00:00:01 [10.21.18.211 FAILED to connect to server] 12:21:40 PM
00:00:01 [10.21.18.211 Send FAILED (exception "EIdNotConnected")]   12:21:40 PM 
```

任何人都可以看到我的代码明显有问题吗？或者我可以提供更多信息来帮助您帮助我吗？

提前致谢

* * *

更新，澄清：

我们怎么能有

如果不是 TCPclient.Connected 然后开始 TraceInfo(TCPclient.Host + 'Server not connected - reconnect');

进而

```
 TraceError(TCPclient.Host + ' Send FAILED (exception "' + E.ClassName + '")'); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T18:44:44.173

在内部，`Connected()`执行读取操作以确定套接字状态。如果`IOHandler.InputBuffer`不为空，即使套接字物理断开，`Connected()`也会返回 True。 `Connect()`内部调用`Connected()`并在返回 True 时引发`EIdAlreadyConnected`异常`Connected()`，因此您的第一次调用可能`Connected()`正在接收导致第二次调用`Connected()`返回 True 的新数据。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-15T06:58:05.643

您尚未提供 ConnectedToServer() 过程/方法的列表。如果此过程尝试连接 TCPclient 对象，那么这将解释您的结果。

# vb.net - 按揭计算器余额计算错误

> ID：11964250
> 
> 赞同：0
> 
> 时间：2012-08-15T04:46:20.573
> 
> 标签：vb.net, amortization

我正在编写一个抵押计算器，它将填充 DataGridView 所有付款以及每次付款的利息和本金。然后最后一列是付款后的余额。

这是问题所在：

按揭付款、利息和本金计算都很好，但由于某种原因，余额计算似乎错误，因为在付款期结束时仍有大量余额。

我的代码可能很草率，因为我还是 vb 的新手。事实上，这是我的第一堂课。

* * *

```
Private Sub AmortButton_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles AmortButton.Click 'initiate click event'
    Dim Amt As Double = Amount.Text() 'read in amount'
    Dim Intr As Double = Intrest.Text() 'read in intrest'
    Dim Yrs As Double = Term.Text() 'read in years'
    Dim payment As Double = (Yrs * 12) 'convert years to payment periods
    '
    Dim IntrDec As Double = ((Intr / 100) / 12) 'convert APR to monthly rate as a decimal'
    Dim TempAmt As Double = Amt 'setting Temperory balance
    For i As Double = 1 To payment Step i + 1 'setting for-loop paramaters'
        Dim MP = Math.Round((Pmt(IntrDec, payment, Amt) * -1), 2) 'calculate Mortgage payment'
        Dim IP = Math.Round((IPmt(IntrDec, i, payment, Amt) * -1), 2) 'calculate Intrest paid'
        Dim PP = Math.Round((PPmt(IntrDec, i, payment, Amt) * -1), 2) 'calculate priciple paid
        Amt = Amt - PP 'setting new balance'
        Dim RM = Math.Round((Amt), 2) 'rounding balance to two decimals'
        AmortTable.Rows.Add(i, MP, IP, PP, RM) 'adding row entry to table'
    Next 'end for-loop' 
```

## 结束子

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T14:10:10.437

您的循环中有逻辑错误。每次循环运行时，您都在更改贷款金额

```
Amt = Amt - PP 'setting new balance' 
```

我注意到你已经`TempAmt`在循环上方声明了，所以看起来你预计在某个时候需要它:); 递减，而不是`Amt`每次并分配给`RM`

此外，这`STEP i+1`不是必需的，虽然它在这里有效，但它并不完全正确。`i`当循环初始化时，它将循环迭代设置为 PLUS 1 的任何值。在这里你很幸运，因为`i`一开始默认为零。底线，`STEP`应该是一个常数，因为默认值是 1，所以这里根本不需要它。

paulsm4 的建议也是正确的，但在像您这样的样本中，您可能会因此看到小的偏差——例如最后几美分左右。浮点算术无疑是您将在以后的课程中学习的主题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T05:00:30.897

与 VB.Net 本身无关。

问题是浮点数是一种“近似值”——使用它们时有时会遇到“令人惊讶”的结果。同样，当您混合浮点（例如“Intr”）和整数（例如“Intr / 100”）时，您也可以获得“惊喜”。

建议：

尝试将“i”和“payment”更改为“integer”，看看是否有任何不同的结果。

还：

这些链接可能会有所帮助：

*   [http://www.codeproject.com/Articles/10143/Floating-Point-in-NET-part-1-Concepts-and-Formats](http://www.codeproject.com/Articles/10143/Floating-Point-in-NET-part-1-Concepts-and-Formats)

*   [http://www.vb-helper.com/tutorial_floating_point.html#SourcesOfErrors](http://www.vb-helper.com/tutorial_floating_point.html#SourcesOfErrors)

# coordinates - Fractional and Cartesian Coordinates

> ID：11964251
> 
> 赞同：0
> 
> 时间：2012-08-15T04:46:39.517
> 
> 标签：coordinates, coordinate-systems

I have a set of fractional coordinates.

I also have a rotation matrix that operates on cartesian coordinates.

Does anyone know how I could convert my rotation matrix so I can operate on the fractional coordinates?

The fractional coordinates are functions of the basis vectors a,b,c and the corresponding alpha, beta, gamma.

Any ideas?

Thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T05:04:11.777

我假设您问这个问题是因为您不想将坐标转换为笛卡尔坐标，进行旋转，然后再转换回来。所以建议你这样做是个坏主意=）

我会建议一些尝试，但需要注意的是，我从来没有与分数坐标有任何联系......

我认为旋转矩阵只是一个轴系统：单位 X 轴、Y 轴和 Z 轴旋转到新方向。那么，如何将矩阵中的每个轴转换为分数坐标呢？

根据您的矩阵，它可能是我描述的转置：

```
[ x0 x1 x2 ;
  y0 y1 y2 ;
  z0 z1 z2 ] 
```

所以在上面，我会对每一行进行笛卡尔到分数的计算。向量会出现非正交的，但这就是重点，对吧？然后它应该可以在分数向量上使用。

# facebook - FB.Dialog.create is being deprecated. Is there an alternative?

> ID：11964261
> 
> 赞同：1
> 
> 时间：2012-08-15T04:48:22.453
> 
> 标签：facebook, dialog, facebook-javascript-sdk

As part of a facebook app we'll be prompting the user for input via a modal dialog. Looking into this I came accross FB.Dialog.create() but when I used it I get the following message:

```
The method FB.Dialog.create is not officially supported by Facebook and access to it will soon be removed. 
```

Is there another supported way to create custom dialogs, now or in the future?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T20:12:41.357

我认为 FB.ui 取代了 FB.Dialog。

# javascript - 使用 google feed api 显示 PubMed RSS feed

> ID：11964264
> 
> 赞同：1
> 
> 时间：2012-08-15T04:48:41.197
> 
> 标签：javascript, google-feed-api

我正在尝试使用 Google 提要向我的网站添加 RSS 提要。问题是它限制了条目的数量。我只看到 4 个条目，但是当我卷曲 RSS 时，我看到 28 个条目。我怎样才能让它加载其余的条目。

```
<script type="text/javascript" src="https://www.google.com/jsapi"></script>
<script language="JavaScript">

google.load("feeds", "1");

function initialize() {
    var feed = new google.feeds.Feed("http://eutils.ncbi.nlm.nih.gov/entrez/eutils/erss.cgi?rss_guid=1zYrsILa0sOsmYw2yBRKaeHt9hnGCeczWTLrGvu39KX1g_ZMyr");
    feed.load(function(result) {
        alert(result.feed.entries);
        if (!result.error) {
            var container = document.getElementById("feed");
            var text = "";
            for (var i = 0; i < result.feed.entries.length; i++) {
                var entry = result.feed.entries[i];
                text += "<a href='" + entry.link + "'>" + entry.title + "</a><br />" + entry.description + "<br /><br />";
            }
            container.innerHTML = text;
        }
    });
}
google.setOnLoadCallback(initialize);
</script> 
```

和 html

```
<div id="feed">Loading...</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T04:54:07.843

您可以设置要检索的条目数的选项：

```
feed.setNumEntries(50); 
```

[Feed API 文档](https://developers.google.com/feed/v1/devguide)表明默认值为 4。（查看“设置 Feed 条目数”下的内容。）

# javascript - 用jquery改变输入框的值

> ID：11964266
> 
> 赞同：0
> 
> 时间：2012-08-15T04:48:46.453
> 
> 标签：javascript, jquery

我得到了一个由一些类文件创建的表单，它只创建类名。但是正在设置背景图像但正在输入值，我想隐藏背景图像。我正在尝试这段脚本，但它不起作用：

```
 <input type="text" value="" name="b_fname">

 background-image:
 url("/site/vitiscellars/images/basic_theme/your_name_bg.jpg"); 
```

这是我的一段测试代码：

### javascript

```
 var $j = jQuery.noConflict();
 $j(document).ready(function() {

 $j('.b_fname').click(function() {  
     alert('Handler for called'); });     
 }); 
```

知道为什么这段代码不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T04:53:05.720

你有 name="b_fname" 但没有课程。添加 class="b_fname" 或将您的选择器更改为：

```
$j('[name=b_fname]') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T04:57:54.283

在您的 html 中使用 class=b_fname 作为文本框。

否则在您的 jquery 选择器中执行

$j('input[name="bfname"]')

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-15T04:58:03.100

`$j('.b_fname')`选择类，而不是名称。要获取课程，您必须将课程添加到输入中，即`<input type="text" value="" class="b_fname" name="b_fname">`.

随后，您可以使用 . 按名称选择元素`$j('input[name="b_fname"]')`。

# css - How do i make the header/footer extend width-wise to fit the screen, and the main content extend height-wise to fit the screen?

> ID：11964267
> 
> 赞同：0
> 
> 时间：2012-08-15T04:48:55.223
> 
> 标签：css

I have tried everything! I simply cannot get my website to look the way i want it to.

Here is the HTML

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Welcome to SilmanServer!</title>
<link href="./main.css" rel="stylesheet" type="text/css" />

</head>

<body>
<div id="pageHeader"> 
<h1>SilmanServer</h1>
<p>Aaron Silman's Personal Home Server </p>
</div>

<div id="navigation">
    <ol>
        <li><a href="./index.html">Home</a></li>
        <li><a href="./blog.html">Blog</a></li>
        <li><a href="./projects.html">Projects</a></li>
        <li><a href="./about.html">About Me</a></li>
        <li><a href="./contact.html">Contact</a></li>
    </ol>
</div>

<div id="main">

<div>
<h2>What the hell?</h2>
<p>
This the project I embarked on around June of 2012 with an old computer that I had at home. My goal: To transform that old, useless HP Pavilion a6750y into a fully functioning webserver for this website! Along the way I also learned (X)HTML, CSS, Javascript, PHP, MySQL and a bunch of other things needed for designing and developing websites, as well as administrating my own server.
</p>
</div>

<div>
<h2> Why? </h2>
<p>
As mentioned before, I really wanted to learn how to build websites that function both on the client side and server side. I wanted to just play around and learn. So I started learning, beginning with the basics. I will also use this website as documentation, tracking my progress and noting a lot of important steps so if anyone (including myself - in case I forget) wants a guide to setting up a server and learning web design and development they an refer to <a href="./guide_to_the_web.html">this page </a> for a complete, idiot-proof, guide to the web from scratch.
</p>
</div>

</div>

<div id="pageFooter">

<p> This is a footer
</p>
</div>

</div>
</body>
</html> 
```

and here is the CSS:

```
/* CSS Document */

/* CSS Reset*/
/* Eric Meyer's Reset CSS v2.0 - http://cssreset.com */
html,body,div,span,applet,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,a,abbr,acronym,address,big,cite,code,del,dfn,em,img,ins,kbd,q,s,samp,small,strike,strong,sub,sup,tt,var,b,u,i,center,dl,dt,dd,ol,ul,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td,article,aside,canvas,details,embed,figure,figcaption,footer,header,hgroup,menu,nav,output,ruby,section,summary,time,mark,audio,video{border:0;font-size:100%;font:inherit;vertical-align:baseline;margin:0;padding:0}article,aside,details,figcaption,figure,footer,header,hgroup,menu,nav,section{display:block}body{line-height:1}ol,ul{list-style:none}blockquote,q{quotes:none}blockquote:before,blockquote:after,q:before,q:after{content:none}table{border-collapse:collapse;border-spacing:0}

/* Global Styles */
html{
    background: url(./images/sway.jpg);
    background-attachment: fixed;
    background-repeat::no-repeat;

    height: 100%;
}

body{
    margin: 0 auto;
    padding-left: 0px;
    background: #3ee; /*<-------------- problem here bro */
    font-family:"Times New Roman", Times, serif;
    font-size: 1em;
    color: white;
}

#pageheader, #pageFooter {
    float:left;
    min-width:100%;
} 

/*Header Styles*/

#pageHeader{
    padding: 30px;
    font-size: 3em;
    font-family::"Arial Black", Gadget, sans-serif;
    background-color: #0F6; 
}

#pageHeader p{
    padding: 1px;
    font-size: .5em;
    font-family::"Arial Black", Gadget, sans-serif;
}

/*Body Styles*/

/*Navigation styles */

#navigation{
    font-family: Arial, Helvetica, sans-serif;
    font-size: 1.2em;
    float: left;
    background-color: #C09;
    position: inherit;
}

#navigation li{
    float: left;
    padding: 20px;
}

#navigation a:hover{
    color: #91BED4;
}

/* Main Content */

#main{
    min-height: 100%;
    width: 60%;
    margin: 0 auto;
    background:#F00;
    clear: both;
    color: #FFF
}

/* Footer */

#pageFooter{
    height: 150px;
    background: #00F;
    color:#CF0;
    font-size: 2em;
    /*position:fixed;
    bottom:0;*/
} 
```

As you can see i color coded the different sections in order to see what is being affected by what. For some reason the navigations div color isnt showing up and instead it is taking on the color of the body. I want this page to have a header and footer which extends to fill the screens witdh and a main content block that has a minimum height of the screen size but the min-height specification just isnt working.

What can i do to fix this? What are some useful techniques for what i am trying to do? I am new to CSS and any advice is useful!

Here is what the website looks like: [http://imgur.com/OIuad](http://imgur.com/OIuad)

I just cant seem to get the red box to have a minimum height of the screen.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T06:15:20.430

我不完全确定你在这里要求什么，页眉和页脚对我来说在宽度方面工作得很好。

至于高度，您是否试图让页脚保持在底部，尽管内容很少？尝试谷歌搜索“css 粘性页脚”。那里有一些，所以和他们一起玩，了解他们是如何工作的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T05:58:38.323

因为 CSS 中的宽度部分具有#header id，但在代码中您使用 pageHeader。

# c# - reading a empty cell, gives object reference error

> ID：11964271
> 
> 赞同：8
> 
> 时间：2012-08-15T04:50:02.977
> 
> 标签：c#, linq, epplus

When I read a cell by doing Worksheets.Cells[2,5].value.ToString();

I get a error "System.NullReferenceException: Object reference not set to an instance of an object."

What would be a good way to check for null and then assign the value, without having to have a "if" statement.

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-15T07:36:25.647

```
 string strValue = Worksheets.Cells[2,5].value==null ? string.Empty : Worksheets.Cells[2,5].value.ToString(); 
```

或者

```
object objValue = Worksheets.Cells[2,5].value ?? string.Empty 
```

# jquery - 悬停事件，元素下降，但鼠标离开时没有上升

> ID：11964273
> 
> 赞同：0
> 
> 时间：2012-08-15T04:50:39.353
> 
> 标签：jquery

我有以下代码：

```
$(document).on('hover', '.tic_cont:not(.disabled_ticket)',function () {
        $(this).stop().find(".tic_icon").animate({ top: '-=16px' }, 250);
        $(this).stop().find(".ti_shd").animate({ opacity: '0.25' }, 250);
    }, function () {
        $(this).stop().find(".tic_icon").animate({ top: '+=16px' }, 250);
        $(this).stop().find(".ti_shd").animate({ opacity: '1' }, 250);
    }); 
```

当鼠标悬停时`div`它必须下降，当鼠标离开时上升。问题在于`div`总是下降。哪里有问题？
谢谢。
**更新**：

在调试器中，我看到第一个函数没有调用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T04:54:51.523

```
$(document).on('mouseenter', '.tic_cont:not(.disabled_ticket)',function () {
    $(this).stop().find(".tic_icon").animate({ top: '-=16px' }, 250);
    $(this).stop().find(".ti_shd").animate({ opacity: '0.25' }, 250);
}.on('mouseleave', '.tic_cont:not(.disabled_ticket)', function () {
    $(this).stop().find(".tic_icon").animate({ top: '+=16px' }, 250);
    $(this).stop().find(".ti_shd").animate({ opacity: '1' }, 250);
}); 
```

*自 jQuery 1.8 起已弃用：名称“hover”用作字符串“mouseenter mouseleave”的简写。它为这两个事件附加了一个事件处理程序，处理程序必须检查 event.type 以确定事件是 mouseenter 还是 mouseleave。不要将“悬停”伪事件名称与接受一两个函数的 .hover() 方法混淆。* [http://api.jquery.com/on](http://api.jquery.com/on)

# oracle10g - How can we work on Oracle 10g at localhost

> ID：11964275
> 
> 赞同：0
> 
> 时间：2012-08-15T04:50:42.063
> 
> 标签：oracle10g

i am new in Oracle 10g. I want to work on localhost in oracle 10g. I have use scott/tiger and it also demand hostname. I have used their my pc name `localhost` but it didn't work.

when i use scott as user name and tiger as password and dont give any host name then its give me an error "ORA-12154:TNS:could not resolve the connect identifier specified"

I have found this code in that file tnsnames.ora Network Configuration File: C:\DevSuiteHome_2\network\admin\tnsnames.ora

```
# Generated by Oracle configuration tools.
EXTPROC_CONNECTION_DATA =
  (DESCRIPTION =
    (ADDRESS_LIST =
      (ADDRESS =
        (PROTOCOL = TCP)
        (HOST=Zainy-PC)
        (PORT = 1521)
      )
    )
    (CONNECT_DATA =
      (SERVICE_NAME=DIV01)
    )
  ) 
```

and i am using Windows 7 platform.....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T11:01:12.860

尝试使用 DIV01 作为主机名连接

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-08-28T06:12:44.843

[http://127.0.0.1:8080/apex](http://127.0.0.1:8080/apex)

[http://127.0.0.1:8080/apex/f?p=4550:11:480290067487773::NO](http://127.0.0.1:8080/apex/f?p=4550:11:480290067487773::NO) :::

用户名：系统

密码：'您在安装时输入的内容'

# d3.js - 如何使用 D3 更新多列数据？

> ID：11964277
> 
> 赞同：1
> 
> 时间：2012-08-15T04:50:52.780
> 
> 标签：d3.js, enter

我想在 D3 中做一些与这个人正在尝试做的非常相似的事情：

[追加/插入后可以重用 enter() 选择吗？](https://stackoverflow.com/q/10808320/1599699)

我有**多个（行和）数据列**，对于每条数据，我需要将其绑定到多个元素。我上面链接的问题的答案解释了这如何与输入选择一起使用，但是**更新**选择呢？

基本上，我需要知道如何在更新选择中设置属性并知道当前正在设置哪些数据的属性等。我在任何地方都找不到示例或文档。

**编辑**：好的，我*通常*可以正常工作。但是，仍然存在一个基本问题：即使我传递给“数据”函数调用的数据数组是**正确**的，传递给“更新”选择的值也是**不正确**的。

我对其进行了一点调试，我想我知道发生了什么：在退出选择中删除了错误的数据。我该如何解决这个问题 - 换句话说，我如何确保旧数据被删除并且在我的新“数据”函数调用中重复的数据保持不变？

澄清一下，假设这是我传入的数据（到“数据”函数调用）：

1、2、3
4、5、6

那么假设我下次通过这个：

4、5、6

出于某种原因，这是结果数据：

1、2、3

等等。我该如何解决这个问题，或者这不应该发生，只是因为我做错了什么而发生？

此外，如果它有帮助，如果我在调用“数据”函数之前选择所有“g”元素并删除它们：

```
svg.selectAll("g").remove();

svg.selectAll("g").data(data); 
```

那么我没有遇到这个问题。显然，这不是一个优雅的解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T05:12:58.673

继续您链接的问题中的示例代码，您需要重新选择添加的行：

```
var g = svg.selectAll(".foo")
    .data([123, 456]);

var gEnter = g.enter().append("g")
    .attr("class", "foo");

gEnter.append("line"); // line1
gEnter.append("line"); // line2

var line = g.selectAll("line"); // line1 and line2 
```

（如果要单独修改 line1 或 line2，请为它们分配单独的类或标识属性。）

从概念上讲，作为数据连接的结果，父 G 元素具有进入、更新和退出选择。如果将子元素附加到输入 G，则需要重新选择它们以创建子元素的合并 enter+update 选择。

# mysql - 为什么使用内部联接时会得到不同的结果

> ID：11964278
> 
> 赞同：2
> 
> 时间：2012-08-15T04:50:53.637
> 
> 标签：mysql

我有一个包含以下列的表；a、b、e 和另一个包含 c、d 的表 table2。两个表都有一个列`name`。

我做了一个查询：

```
SELECT distinct a, b
from db.table
where e <>'65'; 
```

我说，1885 条记录

然后，我需要另一个表 (c, d) 中的更多信息。我使用内部连接来获取这些附加信息。查询变为：

```
SELECT distinct a, b, c, d 
from db.table
inner join db.table2
on table.name=table2.name2
where e <>'65'; 
```

现在，我期待相同的结果，但有额外的列 (c, d)。但是我得到了不同数量的结果：51144。任何人都可以解释一下为什么数量增加了，而我只是添加了更多的列并且没有改变条件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T04:55:02.050

它被称为[笛卡尔积](http://en.wikipedia.org/wiki/Cartesian_product)，实际上这意味着您可能需要更精确地确定连接`ON`条件。

只有当表包含一个且只有一个与表中每一行的`table2`条件匹配的记录时，才会有相同的结果`table.name=table2.name2``table`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T04:57:35.460

**INNER JOIN**`ON`将仅返回与两个表中给定列（在条件中使用）的相同值匹配的结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T04:57:36.210

有什么令人惊讶的？您在 select 语句和另一个表中添加了另外 2 列。

例如 distinct 将应用于不重复的 4 列 (a,b,c,d)

如果你的桌子是这样的

```
A B C D E
1 2 1 1
1 2 3 4
1 2 4 5
1 2 4 5 
```

您的第一个语句将选择不同的 A,B，它只有 1,2。第二条语句将选择 1,2,1,1 - 1,2,3,4 - 1,2,4,5 只要满足条件 e <> 65

对于其余部分，您需要使用**ON**来更具体地选择您的选择。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-15T04:58:47.523

正如关键字所说，DISTINCT 返回来自选择的不同结果。

您向不同选择添加附加列的事实可能会导致不同结果集成为更多行。让我们看一个例子

区别于

```
A   B
1   2
1   3
1   2 
```

将会

```
A   B
1   2
1   3 
```

但现在添加额外的列，让说

```
A   B   C
1   2   1
1   3   2
1   2   3 
```

将导致

```
A   B   C
1   2   1
1   3   2
1   2   3 
```

此外，您的内连接可以限制结果集，因为内连接只会返回 table1 和 table2 中的值，因此 table1 中存在给定值，但 table2 中没有它不会返回。

或者正如@zerkms 所提到的，如果有 2 个键定义了 2 个表之间的关系，那么您可能会得到比预期更多的结果。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-15T04:59:01.087

这是因为`DISTINCT`关键字**适用于整行**。

假设您有以下结果：

```
a       b        c         d
=====================================
1       1        1         1
1       1        3         2
1       1        4         2
1       2        5         2
1       2        6         6
1       3        1         1 
```

如果你申请`DISTINCT a, b`，它应该导致：

```
a       b     
==============
1       1             
1       2      
1       3 
```

因为其中两条记录与`1, 1`. 如果您说，它将返回所有记录`DISTINCT a, b, c ,d`。

您的查询返回多条记录的另一个原因是，可能是 的记录在 的记录上`tableA`有许多对应的匹配项`tableB`。假设`tableA`您只有 1 条记录，但在`tableB`该记录中有 5 条记录的对应匹配项。如果您尝试加入表，而不是表 A 中的 1 条记录，它现在应该`5 rows`因为匹配而返回。

# python - 为什么我的 python 代码没有打印我的列表？

> ID：11964280
> 
> 赞同：-1
> 
> 时间：2012-08-15T04:51:29.920
> 
> 标签：python, list, printing

我编写了一个函数，它应该返回一个列号列表，这些列号对应于我想稍后从 csv 文件中提取的特定变量。变量名由 指定`state_aggregate_vars`。

```
import csv
import numpy

def compute_countyStats(state_aggregate, year, state_aggregate_vars, listCounties, county_var, int_obese, int_healthy, int_refuse): : 
    f = open(state_aggregate, 'r')
    readit = csv.reader(f)
    headers = readit.next()
    use_cols = []
    for name in state_aggregate_vars:
        use_cols.append(headers.index(name))
    return use_cols
    county_data = numpy.genfromtxt(f, dtype=float, delimiter=',', names = state_aggregate_vars, filling_values= -1, 
                usecols= use_cols, usemask=False)   
    sorted_array = county_data(numpy.argsort(county_data, axis= headers.index(county_var))
    for code in listCounties: 
    temp =  []
    for entry in sorted_array: 
        if entry[0] == code: 
            temp.append(float(entry[1]))
        else:
            continue
    percent_healthy = numpy.true_divide(temp.count(int_healthy),num_obs)
    percent_obese = numpy.true_divide(temp.count(int_obese),num_obs)
    percent_refused = numpy.true_divide(temp.count(int_refuse),num_obs)
    county_stats[code] = year, code, percent_healthy, percent_obese, percent_refused, 
return county_stats 
```

接下来，我使用以下命令调用此函数：

```
state_aggregate = "Aggregate_test90.csv"
year = 1990
state_aggregate_vars = ['_BMI90', 'AGE90', 'CTYCODE90', 'IYEAR90', 'SEX90', '_RFOBESE90']
listCounties = [31, 43, 163, 32, 167, 97]
county_var = 'CTYCODE90'
int_obese = 2
int_healthy = 1
int_refuse = 0  

test = compute_countyStats(state_aggregate, year, state_aggregate_vars, listCounties, county_var, int_obese, int_healthy, int_refuse) 
```

这是我的错误：

```
SyntaxError: invalid syntax in line 6: 
 for name in state_aggregate_vars: 
```

可能出了什么问题？

这是我的`python -V`：

```
Python 2.7.3 -- EPD 7.3-2 (32-bit) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T05:28:29.087

您的代码中有一些错误：

第 4 行：一个冒号

第 14 行：缺少大括号

第 17 行：缺少缩进

第 27 行：缺少缩进

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T05:50:42.573

看起来我安装的 Python 不知何故损坏了。我重新安装了它，这个功能现在运行得很好。

# preg-match - preg_match 获取以某种格式提供的句子

> ID：11964282
> 
> 赞同：-1
> 
> 时间：2012-08-15T04:51:52.103
> 
> 标签：preg-match

我的数据库中有一个文本格式：

```
Name : John Thompson
Address : 123 street abc state xyz country 
```

如何通过 preg_match 获得 Name ie : Johan Thompson 的值？我试图避免长时间的爆炸过程，因为除了姓名和地址之外，我还会得到其他东西。

我需要一个简单的正则表达式，它可以让我得到一个字符串，其中包含 Name :, Address : 等后面的句子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T09:42:53.497

简单的说：

```
$matches = array();
preg_match_all('/^(?P<propname>[^:]+):\s*(?P<propval>.*)$/m', $string, $matches, PREG_SET_ORDER);
print_r($matches); 
```

此正则表达式匹配冒号之前的任何内容并将其捕获，`propname`其余到行尾的将被捕获`propval`。生成的结构将是

```
Array
(
    [0] => Array
        (
            [0] => Name : John Thompson
            [propname] => Name 
            [1] => Name 
            [propval] => John Thompson
            [2] => John Thompson
        )

    [1] => Array
        (
            [0] => Address : 123 street abc state xyz country
            [propname] => Address 
            [1] => Address 
            [propval] => 123 street abc state xyz country
            [2] => 123 street abc state xyz country
        )
) 
```

因为这是一个简单的正则表达式，我假设你不熟悉正则表达式，所以我强烈推荐阅读[JF Friedl - 掌握正则表达式](http://regex.info/)，你很快就会轻松地制作出美妙的表达式:-)

# android - Android获取ISO国家代码

> ID：11964283
> 
> 赞同：1
> 
> 时间：2012-08-15T04:52:19.623
> 
> 标签：android

嗨，我有一个要求，我需要通过传递经度和纬度使用 Android API 来获取 ISO 国家代码。但不使用谷歌 api。有人可以指导我怎么做。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T05:12:34.807

如果你连接到互联网，你可以指向一个安静的服务器：只需指定 long 和 lat 就可以了：

`http://ws.geonames.org/countryCode?lat=50&lng=30`

# networking - 集群计算机

> ID：11964286
> 
> 赞同：0
> 
> 时间：2012-08-15T04:52:38.047
> 
> 标签：networking, parallel-processing, cluster-computing

我正在尝试构建一个并行处理计算机。

我有

*   10 台 Windows7 64 位机器
*   3 台 Ubuntu Linux 机器
*   1 台 Windows 2008 服务器
*   1km左右的网线
*   3-4 开关

我的需要：

通过集群这些计算机使我的动画渲染更快。

我正在为我的项目使用 3Dmax，并且正在制作医学动画/视频。实现这一目标的最佳方法是什么？我在网络方面不是很好，但我知道所有的基础知识。

还有一个问题：

假设我构建了一个 Windows PC 集群，如果我将 Linux 机器连接到它，那会有什么好处吗？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T06:41:48.097

我认为你的问题很有趣，但在这里离题了。但是，答案的一些片段：

这两本书涵盖了从一堆 PC 中构建自制（甚至更复杂）集群所需的大部分主题：[这本适用于 Linux](http://www.amazon.co.uk/Beowulf-Computing-Scientific-Engineering-Computation/dp/0262692929/ref=sr_1_2?s=books&ie=UTF8&qid=1345011603&sr=1-2)，而[这本适用于 Windows](http://www.amazon.co.uk/Beowulf-Computing-Scientific-Engineering-Computation/dp/0262692759/ref=sr_1_1?s=books&ie=UTF8&qid=1345011708&sr=1-1)。它们都有点过时了，这对于 Window 的版本可能更严重，但可以很好地覆盖必要的主题。也做一些你自己的研究，谷歌搜索*Beowulf 聚类*和*Condor*等主题；后者是一个从联网计算机中清除空闲周期的系统。

我认为具有不同操作系统的机器的异构集群比同构集群更难构建和配置，但难度将与您寻求的集成程度成正比。

您的主题，渲染电影帧，属于*令人尴尬的并行程序*类，有两种通用方法：

*   您只需将帧一次传递给彼此独立工作的计算机；困难（如果有的话）在于确保负载平衡，即让每台计算机与其他计算机一样努力工作。这可能看起来像一个 PC 网络，它们独立地从网络存储中读取帧，而根本不像一个集群。
*   您构建了一个渲染管道：计算机 1 在第 1 帧上执行渲染操作 1，然后将帧传递给计算机 2，计算机 2 在第 1 帧上执行操作 2，而计算机 1 在第 2 帧上开始渲染操作 1，依此类推；再次，您必须注意保持管道充满和忙碌。

# c# - HTTP 错误 404.11 未找到：双转义序列

> ID：11964287
> 
> 赞同：1
> 
> 时间：2012-08-15T04:52:38.840
> 
> 标签：c#, asp.net-mvc-3, escaping, urlencode

我有一个`OpenSearch`用于搜索产品的 C# MVC 3 项目。如果搜索词是一个词，则搜索很好，但如果我输入类似的内容`canned food`，我会得到`HTTP Error 404.11`. 我知道解决此问题的一种简单方法是将`allowDoubleEscaping`equals 设置为`true`in `webconfig`。但是我的朋友建议我使用`escaping url`which 来代替`space`with `%20`（如果我错了，请纠正我，因为我是新手）

我已经看到了很多说要使用的示例，`UrlPathEncode`但我不确定在我的项目中的何处添加此代码。

基本上我只是问我该怎么做：

```
localhost:94830/Home/Search/canned food 
```

进入这个

```
localhost:94830/Home/Search/canned%20food 
```

或用另一个字符替换空格

```
localhost:94830/Home/Search/canned-food 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T05:04:56.807

您可以[`System.Uri.EscapeUriString`](http://msdn.microsoft.com/en-us/library/system.uri.escapeuristring.aspx)按如下方式使用：

```
Uri.EscapeUriString("double  space") //double%20%20space 
```

并且因为它也可以在“客户端配置文件”中使用，所以它比使用`System.Web`API 更便携。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T04:58:09.487

您可以在[HttpServerUtility.UrlEncode 方法的帮助下完成](http://msdn.microsoft.com/ru-ru/library/zttxte6w.aspx)

在此示例中，字符串“ *ASP.NET Examples* ”被编码为“ *ASP.NET+Examples* ”。

```
Server.UrlEncode("ASP.NET Examples"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-03-28T18:28:08.590

我发现在我的案例中，我有一个调用我的 ASPX 页面的 JavaScript 函数，当它构建 URL 时，我不小心把 URL 放在了这样的位置：

```
var url = forwardpage + "&t=" + token; 
```

如您所知，页面请求中的第一个参数由 ? 分隔。不是 &，所以一个简单的错字导致 HTTP 404.11。相反，它应该是：

```
var url = forwardpage + "?t=" + token; 
```

# html - 底行的页脚重叠

> ID：11964288
> 
> 赞同：0
> 
> 时间：2012-08-15T04:52:49.137
> 
> 标签：html, css, footer

目前我的页脚有问题。我知道这是一件非常容易的事情，我只是无法注意到。问题出现在[http://www.hirelogo.com](http://www.hirelogo.com)的“更多示例”页面上，您可以看到最后一行被覆盖。这个问题是普遍存在的，但这也是主页上没有真正页脚的原因。任何帮助将非常感激。就像我之前说的那样，我知道这可能是一个简单的解决方法，但我似乎无法弄清楚。我正在使用 joomla，因此内容区域不是页眉和页脚方案的一部分。

谢谢！克里斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T05:09:17.327

以下更改似乎可以解决您的问题。

在 styles.css 中，在第 1376 行附近，删除`position: absolute;`和`width: 800px;`。您还需要添加一个`clear: both;`. 以下是最终声明的最终外观：

```
#footer {
    clear: both;
    bottom: 0; /* this line is no longer necessary either; see below */
    height: 63px;
    margin-top:1px;
    text-align: center;
    line-height: 103px;
    background-color: #fff;
} 
```

* * *

# 解释：

通常，`position: absolute;`仅当您计划在页面上放置与页面流分开的内容时才应使用。由于 元素`position: absolute;`不占用页面上的任何空间，所以当您设置 时`bottom: 0;`，div 到了页面上最后一个元素的底部，这导致它与内容 div 重叠。

`clear: both;`div 必须清除在内容中组成行的浮动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T05:02:09.540

只需从中删除`position:absolute`，`#footer`重叠就会消失。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T05:06:37.757

您可以更改`position`页脚`relative;`并进行调整。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-15T05:09:07.850

看看这个伟大的指南，让页脚下降：D

[http://matthewjamestaylor.com/blog/keeping-footers-at-the-bottom-of-the-page](http://matthewjamestaylor.com/blog/keeping-footers-at-the-bottom-of-the-page)

# asp.net - 如何在asp.net的有界gridview中插入paynow按钮

> ID：11964307
> 
> 赞同：0
> 
> 时间：2012-08-15T04:55:53.170
> 
> 标签：asp.net

我想添加立即付款按钮，如 asp.net 中的有界 Gridview 所示。我用过如下

```
<asp:GridView ID="GridView1" runat="server" AllowPaging="True" 
    AutoGenerateColumns="False" DataKeyNames="ID" DataSourceID="challanstatus" 
    Width="646px">
    <Columns>
        <asp:BoundField DataField="ID" HeaderText="ID" InsertVisible="False" 
            ReadOnly="True" SortExpression="ID" />
        <asp:BoundField DataField="RegisNo" HeaderText="RegisNo" 
            SortExpression="RegisNo" />
        <asp:BoundField DataField="Reason" HeaderText="Reason" 
            SortExpression="Reason" />
        <asp:BoundField DataField="Code" HeaderText="Code" SortExpression="Code" />
        <asp:BoundField DataField="DateofChallan" HeaderText="DateofChallan" 
            SortExpression="DateofChallan" />
        <asp:BoundField DataField="Status" HeaderText="Status" 
            SortExpression="Status" />
        <asp:BoundField DataField="Amount" HeaderText="Amount" 
            SortExpression="Amount" />

<asp:ButtonField  ButtonType="Button" CommandName="Edit" Text="Edit" Visible="True" CommandArgument='<%# Container.DataItemIndex %>' />

    </Columns>
</asp:GridView>
<asp:AccessDataSource ID="challanstatus" runat="server" 
    DataFile="~/App_Data/Database.mdb" 
    SelectCommand="SELECT * FROM [tblchallan] WHERE (([RegisNo] = ?) AND ([RegisNo] = ?))">
    <SelectParameters>
        <asp:ControlParameter ControlID="DropDownList1" Name="RegisNo" 
            PropertyName="SelectedValue" Type="String" />
        <asp:ControlParameter ControlID="DropDownList1" Name="RegisNo2" 
            PropertyName="SelectedValue" Type="String" />
    </SelectParameters>
</asp:AccessDataSource> 
```

我在哪里使用

```
<asp:ButtonField  ButtonType="Button" CommandName="Edit" Text="Edit" Visible="True" CommandArgument='<%# Container.DataItemIndex %>' /> 
```

插入按钮，但它给出以下错误：

说明：解析服务此请求所需的资源时出错。请查看以下特定的解析错误详细信息并适当地修改您的源文件。

解析器错误消息：只有具有 DataBinding 事件的对象才支持数据绑定表达式。System.Web.UI.WebControls.ButtonField 没有 DataBinding 事件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T06:17:14.000

Ans :- 从变量中的行获取值

像这样绑定按钮

```
<asp:TemplateField>
 <ItemTemplate>
  <asp:Button runat="server" CommandName="Edit" Text="Pay Now" CommandArgument='<%# Eval("Amount")%>' />
 </ItemTemplate>
</asp:TemplateField> 
```

在 OnRowCommand 事件中获取该行的值，如下所示：-

```
protected void GridView1_RowCommand(object sender, GridViewCommandEventArgs e)
{
 if (e.CommandName == "Edit")
 {
  decimal amount = Convert.ToDecimal(e.CommandArgument);
 }
} 
```

希望这可以帮助您获得价值..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T05:01:32.077

```
<asp:TemplateField>
  <ItemTemplate>
     <asp:Button runat="server" CommandName="Edit" Text="Pay Now" CommandArgument='<%# Container.DataItemIndex %>' />
  </ItemTemplate>
</asp:TemplateField> 
```

在此之后使用此代码

```
<asp:BoundField DataField="Amount" HeaderText="Amount" SortExpression="Amount" /> 
```

我认为它可以帮助你！如果您遇到任何问题，请回复..

# php - 在给定字符串上设置特定单词样式的函数？

> ID：11964310
> 
> 赞同：-1
> 
> 时间：2012-08-15T04:55:56.170
> 
> 标签：php

如何为给定字符串设置特定单词的样式？

```
$myString = "foo bar"; 
```

如果在字符串中找到给定的单词，如何使函数加粗，而不是再次返回字符串

```
$formattedString = Bold('foo',$myString);
echo $formattedString ; 
```

预期结果：

**foo** bar

我怎样才能做到这一点 ？我需要根据键入的用户查询在搜索结果中加粗一些关键字/短语

任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T05:01:46.070

你的意思是像：

```
function Bold($text, $str) {
    return str_replace($text, "<strong>".$text."</strong>", $str);
}
echo Bold("test", "this is a test"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T05:01:41.967

最简单的方法是使用`str_replace("foo", "<b>foo</b>", $string)`.

也`RegExp`可用于执行相同的操作。

**更新：**要拥有更高级的*样式*功能，您可以使用以下`RegExp`方式：

```
function bold($text, array $words) {
    return preg_replace('/\b('.implode('|', $words).')\b/i', '<b>$1</b>', $text);
} 
```

使用此功能，您可以通过传输应编辑的单词数组来一次设置多个单词的*样式。*`bold`

**更新：**此功能的高级高级变体将如下所示：

```
function bold($text, $tag, array $words) {
    return preg_replace('/\b('.implode('|', $words).')\b/i', '<'.$tag.'>$1</'.$tag.'>', $text);
} 
```

通过这种方式，您可以`bold`通过将标签名称传递给参数（*例如*`italic`，*例如*）来传输`strike`您的文本甚至`underline`任何单词集。`$tag`*`b``<b></b>`*

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-15T05:10:57.767

通过使用发布的 str_replace 解决方案，当您的单词被发现是另一个单词的一部分时，您将遇到问题。例如，在 Sudhir 的示例中，如果 $str 是“这是一个使用睾酮的测试”（抱歉，没有更好的例子），输出将是

这是一个**测试**osteron的**测试**

要解决这个问题，您可以使用正则表达式，因为您有单词边界表达式：

```
function bold($string, $word)
{
    return preg_replace('/\b'.$word.'\b/', '<strong>'.$word.'</strong>', $string);
}

echo bold('this is a test with testosteron', 'test'); 
```

当它被不能被视为单词一部分的元素包围时，该规则将匹配您的单词

# google-apps-script - 用户尝试运行我的脚本时出现可怕的“需要授权”消息

> ID：11964311
> 
> 赞同：0
> 
> 时间：2012-08-15T04:56:06.117
> 
> 标签：google-apps-script

我正在开发一个 Google Apps 脚本，我想将其分享给“知道链接的任何人”。该脚本应该定期处理用户 Google Drive 中的一些文档。为此，我的用户应该创建一个时间驱动的触发器。

但是，当有人试图运行脚本时，他会收到一个带有红色边框的警告：“需要授权......”这个警告看起来很可怕，我担心它是否会赶走我的用户。

想知道是否有任何方法可以避免或软化警告。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T05:50:24.793

您无法避免该消息，因为您的用户必须知道您的脚本将访问什么以及不会访问什么。

相反，您可以做的是让您的应用程序在您的权限下运行，以便它使用您的凭据、文档和配额。这样，您的用户将不会看到警告。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T05:41:59.227

使用共享。让用户与您设置的帐户共享相关文档。这样他们就可以避免警告。也意味着，如果您更改代码，他们不需要切换到新版本。

# ruby-on-rails - rails redirect_to 自定义视图

> ID：11964312
> 
> 赞同：0
> 
> 时间：2012-08-15T04:56:12.583
> 
> 标签：ruby-on-rails, view, controller

我正在尝试从我的 rails 应用程序中的控制器重定向到自定义视图。以下作品：

```
redirect_to :action => 'myaction', :id =>@myobj.id 
```

我有一个名为的控制器动作`myaction`

在我的 routes.rb 文件中，我有

```
match 'myobjs/:id/myaction' => 'myobjs#myaction' 
```

但我想使用更简洁的语法

```
// this is the line I cannot get to work
redirect_to myaction_path 
```

重定向到这样的自定义视图的正确语法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T05:02:20.787

您可以将一个`:as`选项传递给该`match`方法。

```
match 'myobjs/:id/myaction' => 'myobjs#myaction', :as => :myaction 
```

这将创建调用的辅助方法`myaction_path`，`myaction_url`您可以在控制器和视图中使用。

Rails 路由指南在[这里](http://guides.rubyonrails.org/routing.html#naming-routes)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T05:02:25.703

```
match 'myobjs/:id/myaction' => 'myobjs#myaction', :as => :myaction 
```

将创建 myaction_path 和 myaction_url 作为命名助手

# asp.net-mvc - ASP.net MVC 4，连接字符串

> ID：11964319
> 
> 赞同：2
> 
> 时间：2012-08-15T04:57:34.180
> 
> 标签：asp.net-mvc, entity-framework

我正在从 [http://www.asp.net/mvc/tutorials/mvc-4/getting-started-with-aspnet-mvc4/accessing-your-models-data-from-a-controller](http://www.asp.net/mvc/tutorials/mvc-4/getting-started-with-aspnet-mvc4/accessing-your-models-data-from-a-controller)学习 MVC4 （编辑：已修复网址）

一切正常，但我的数据库没有更新，但是当我运行项目时，记录来自某个地方，我在我的 MSSQL 中找不到该数据库。

我在 web.config 中的连接字符串是

```
<connectionStrings>
    <add name="PurchaseInfosDbContext" 
         connectionString="server=lakpa-pc;Integrated Security=SSPI; User ID=sa; Password=xxxxx; database=MessInfo" providerName="System.Data.SqlClient" />
</connectionStrings> 
```

但是在Visual Studio中，当我调试时，我得到的连接字符串为

```
"Data Source=.\\SQLEXPRESS;Initial Catalog=Mvc4Projects.Models.ItemsDetailsDbContext;Integrated Security=True;MultipleActiveResultSets=True" 
```

它不应该从 web.config 中读取连接字符串吗？我没有修改任何页面上的任何连接字符串。

一种。是否有必要包含该教程中所示的 SDF 文件？我不能直接将其更新为 mdf 文件吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T04:59:02.827

我的问题是继承 DbContext 的类的名称不同，因此 MVC 采用默认连接到 SQLExpress，即使我没有指定它。

好吧，我更改了类似于连接字符串名称的类名称，现在它指向更正位置。

可能会对某人有所帮助。面临并解决的问题

一种。继承 DbContext 的 Class 必须用作连接字符串的名称。

湾。Entity 框架添加的 SQL Query 具有复数表名，因此使用属性 [Table("PurchaseInfo")] 使其单数。

C。使用 POCO 方法时，如果您不遵循其命名约定（如在我的示例中其 Key 必须是“PurchaseInfoID”但我使用 ItemId ），则会遇到密钥问题。所以使用属性[Key]来解决这个问题。

```
public  class PurchaseInfoDbContext : DbContext
    {
        public DbSet<PurchaseInfo> ItemsDetails { get; set; }
    }

    [DisplayName("Items Details")]
    [Table("PurchaseInfo")]
    public class PurchaseInfo
    {
        [HiddenInput]
        [Key]
        public int ItemId { get; set; }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T19:40:30.183

我有同样的问题，如果你已经有 App_Data 文件夹删除它，然后从 Project-> Add ASP.Net folder -> App_Data 添加一个新文件夹

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T05:11:09.690

当您使用“Internet 应用程序”启动一个新的 MVC 4 项目时，它会添加一个指向 sql express 数据库的默认连接字符串。你确定你的 web.config 中还没有那个连接字符串吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-12T14:08:03.617

我发现这篇文章 - [http://blogs.msdn.com/b/sqlexpress/archive/2011/12/09/using-localdb-with-full-iis-part-1-user-profile.aspx](http://blogs.msdn.com/b/sqlexpress/archive/2011/12/09/using-localdb-with-full-iis-part-1-user-profile.aspx) 解决了这个问题. 但是，如果用户通过 IIS 运行应用程序，这适用

# plugins - 为什么 Openfire 不断重新加载我的插件

> ID：11964335
> 
> 赞同：0
> 
> 时间：2012-08-15T05:00:08.303
> 
> 标签：plugins, jetty, init, openfire

我为 Openfire 创建了一个插件，方法中有一些初始化步骤`initializePlugin`。

我的插件的初始化步骤应该只运行一次。但我发现 Openfire`initializePlugin`每隔约 20 秒就会重复调用我的插件。这很奇怪！

是 Jetty 还是 Openfire 问题？如何告诉 Openfire 只调用`initializePlugin`1 次？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T12:39:02.583

德勒奥拉吉德：

我发现了问题。我能够在 Linux Centos 机器上复制它。

当插件文件上的时间戳高于插件解压缩时创建的文件夹上的时间戳时，就会发生这种情况。如果您在不同时区的 PC 上进行开发，则可能会发生这种情况。

检查日期/时间戳。如果高于当前日期/时间，则触摸文件以将时间戳重置为当前日期/时间。

答案来自：http: [//community.igniterealtime.org/message/224340](http://community.igniterealtime.org/message/224340)

# android - Android 应用程序的外部数据库问题

> ID：11964336
> 
> 赞同：0
> 
> 时间：2012-08-15T05:00:14.593
> 
> 标签：android, database

关于使用外部数据库（如 mysql）用于 android 应用程序时要遵循的步骤的一个快速问题。我是android dev的新手，因此这个问题：

*   我应该使用 sqlite 存储来自应用程序的值，然后在每个规定的时间将其推送到外部数据库，还是在用户单击保存按钮时直接将值推送到外部数据库？

*   对于一个普通的轻量级数据库，我可以使用安装在 mac 机器上的 mySQL，然后将其移植到 windows 机器上吗？当我更改将托管服务器的操作系统时会有任何问题吗？

重要的是，无论何时必须添加新记录（最终将与其他设备共享），数据都应尽早进入外部数据库，这被认为是有利的或行业标准的或电池效率高的。

请分享您的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T06:56:34.057

您不能将 MySQL 与 android 一起使用，它没有移植到 android 环境，即使它被移植，如果您只在服务器上使用 MySQL，而不是通过 android 和您使用的数据库无关紧要。

MySQL 是跨平台的，它运行在哪个操作系统上并不重要，对于 postgresql 和大多数其他数据库平台也是如此，因此如果您不使用任何特定于平台的功能，您可以切换服务器端 MySQL 并不是真正的轻量级数据库，功能丰富，如果你只是测试，你也可以在本地机器上使用 sqlite。

访问外部数据库将通过网络连接，如果首先获取数据很重要，那么您别无选择，本地存储速度很快，外部存储是网络密集型的，通常取决于许多外部因素（互联网连接，数据速度），电池，这种情况没有行业标准，这取决于您的要求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T08:02:04.860

我建议您根据您的要求使用两个选项。

首先，如果您的应用类似于网络应用。有不同的用户，他们使用彼此的数据，数据不能相互影响。喜欢脸书、推特

然后您可以直接将数据推送到服务器，例如[EXAMPLE](http://dj-android.blogspot.in/2011/09/connecting-mysql-database-in-android.html)。

第二种方式：

如果您的应用喜欢[Example](https://play.google.com/store/apps/details?id=com.EMTPL.BarcodeStore&feature=more_from_developer#?t=W251bGwsMSwxLDEwMiwiY29tLkVNVFBMLkJhcmNvZGVTdG9yZSJd)

在这个应用程序中，我们有相同的条形码，所有数字都被不同的用户使用，比如

有 1,2,3,4,5 条码

用户A使用条码1

用户 B 使用条码 4

用户 C 使用条码 5

然后所有三个用户的数据都保存在同一台服务器上，其他两个用户自动从服务器获取最后更新的号码详细信息。

为此，我使用了自动同步。在这种方法中，所有数据都保存到 sqlite 数据库中，并以 15 分钟的时间间隔在服务器上更新。

所以这取决于你想要做什么。

在排序中，您可以同时使用两种方式。更改托管服务器的操作系统时没有问题。

# c - Windows 文件系统过滤器驱动程序

> ID：11964340
> 
> 赞同：4
> 
> 时间：2012-08-15T05:00:53.907
> 
> 标签：c, windows, driver, wdk, etw

我正在尝试创建一个小型文件系统过滤器驱动程序，用于测试/演示如何在 Windows Server 2008 R2 中使用 ETW 跟踪过滤器驱动程序对 I/O 性能的影响。我已经下载了 DDK 并构建了一些示例，但我在尝试过滤特定磁盘设备或特定文件扩展名时遇到问题，这两种方法都适用于我正在尝试执行的任务。我想要做的是将过滤器驱动程序隔离到特定的磁盘/卷或具有特定扩展名的文件，以显示过滤器驱动程序处理请求如何影响 I/O 性能。我一直在使用直通示例进行测试，并且在我尝试引入延迟的任何地方都会受到负面影响，因为我无法将操作正确地过滤到我正在尝试做的事情。

这绝不是一个功能齐全的驱动程序，理想情况下，我希望能够拦截/影响特定卷或特定文件扩展名上的 IRP_MJ_WRITE 操作，以便我可以显示过滤器驱动程序对这些操作的影响。有什么简单的方法可以做到这一点，而我只是在这里想念吗？我完全理解人们以编写这些类型的驱动程序为生，但如果可能的话，我真的希望能够制作一个简单的过滤器。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T06:50:46.413

您可以尝试通过以下方式附加到特定卷

*   `fltmc attach ...`命令或
*   `FltAttachVolume`在微过滤器驱动程序或
*   `FilterAttach`来自用户空间程序。

注意：过滤适用于附加卷上的所有文件操作。如果您想包含/排除稍微复杂的特定文件名/扩展名。您需要找到文件名（不容易获得）并跳过不需要的文件。此外，这将涉及比您想要处理的更多的处理。

# django - Django 表单会自动填充另一个用户的电子邮件地址

> ID：11964342
> 
> 赞同：0
> 
> 时间：2012-08-15T05:01:26.397
> 
> 标签：django, session, django-users

这让我大吃一惊，把我吓坏了。

我这里有一个注册页面：http: [//eatfeastly.com](http://eatfeastly.com)（我在 8 月 15 日午夜重新启动了服务器，暂时解决了问题，所以您可能需要等待才能看到问题）

您会注意到它已经预先填充了一些用户的电子邮件。请注意，这意味着此数据不仅在我的缓存中。不用说，这对我们的用户来说是*坏事*。

为此，我使用以下 MVT：

## 模型

```
class PotentialUser(CommonInfo):
    is_cook = models.BooleanField()
    email = models.EmailField(unique=True, db_index=True, validators=[validate_no_existing_user_email])
    location = models.CharField(max_length=500, help_text="Please enter city, state.")
    zipcode = models.CharField(max_length=10, blank=True)

    class LOCATION:
        DC = "Washington, DC"
        NY = "New York City, NY"
        SF = "San Francisco, CA"
        OTHER = "Other"

    def __unicode__(self):
        return self.email

    def send_signup_email(self):
        # Can't use django notifications here, since it requires an actual user, and this is only a potential user
        msg = MultipartTemplateEmailMessage('signup_complete',
            from_email=settings.DEFAULT_FROM_EMAIL,
            to=[self.email],
            part_templates=(
                ('full.txt', 'text/plain'),
            ),
            context={
                'recipient': self,
                'support_email': settings.SUPPORT_EMAIL,
                # shortened from:
                # http://eatfeastly.com/?utm_source=cont-e-pot&utm_medium=email-auto&utm_content=feedme&utm_campaign=e-share
                'share_url': "http://goo.gl/X2VtA",
            },
        )
        msg.send() 
```

## 形式

```
class PotentialUserModelForm(forms.ModelForm):
    # Override to make this field required
    is_cook = forms.TypedChoiceField(
        required=True,
        coerce=bool,
        choices=(
            ('cook', True),
            ('feaster', False),
            ('both', True),
        )
    )

    class Meta:
        model = PotentialUser

    def clean(self):
        cleaned_data = super(PotentialUserModelForm, self).clean()
        location = cleaned_data.get('location')
        if location == "Other":
            zipcode = cleaned_data.get('zipcode')
            if zipcode is None or zipcode == '':
                if not 'zipcode' in self._errors:
                    self._errors['zipcode'] = ErrorList()
                self._errors['zipcode'].append("Zipcode is required")
                del cleaned_data['zipcode']
        return cleaned_data 
```

## 看法

```
class PotentialUserCreateView(CreateView):
    form_class = PotentialUserModelForm
    template_name = "intro/home.html"
    form_focused = False

    def get_success_url(self):
        return reverse_lazy('potential_user_thanks', self.object.pk)

    def get_context_data(self, **kwargs):
        kwargs['LOCATION'] = PotentialUser.LOCATION
        if self.form_focused or hasattr(kwargs['form'], 'errors') and kwargs['form'].errors:
            kwargs['form_focused'] = True
        else:
            kwargs['form_focused'] = False
        return super(PotentialUserCreateView, self).get_context_data(**kwargs)

    def form_valid(self, form):
        # Save the user to the database and set self.object
        response = super(PotentialUserCreateView, self).form_valid(form)
        self.object.send_signup_email()
        return response 
```

## 模板

```
<!-- ... -->
<form id="intro_form" action="{% url signup %}" method="post">
    {% csrf_token %}
    {{ form.non_field_errors }}
    <div id="intro_form_box" class="vcenter_outer">
        <div class="field_container">
            {{ form.email.errors }}
            <label for="email">Email</label>
            <input id="email" name="email" type="text" placeholder="yourname@domain.com"
                    value="{{ form.email.value|default_if_none:'' }}"/>
        </div>

        <div class="field_container">
            {{ form.is_cook.errors }}
            <span>I'm a</span>
            <input type="radio" id="cook_button" class="form_button" name="is_cook"
                {% if form.is_cook.value == 'cook' %}checked="checked"{% endif %} value="cook"/>
            <label for="cook_button">Cook</label>
            <input type="radio" id="feaster_button" class="form_button" name="is_cook"
                {% if form.is_cook.value == 'feaster' %}checked="checked"{% endif %} value="feaster"/>
            <label for="feaster_button">Feaster</label>
            <input type="radio" id="both_button" class="form_button" name="is_cook"
                {% if form.is_cook.value == 'both' %}checked="checked"{% endif %} value="both"/>
            <label for="both_button">Both</label>
        </div>

        <div class="field_container">
            {{ form.location.errors }}
            <span>from</span>
            {# These location values should match the Area values in the database #}
            <input type="radio" id="dc_button" class="form_button" name="location"
                {% if form.location.value == LOCATION.DC %}checked="checked"{% endif %} value="{{ LOCATION.DC }}"/>
            <label for="dc_button">{{ LOCATION.DC }}</label>
            <input type="radio" id="ny_button" class="form_button" name="location"
                {% if form.location.value == LOCATION.NY %}checked="checked"{% endif %} value="{{ LOCATION.NY }}"/>
            <label for="ny_button">{{ LOCATION.NY }}</label>
            <input type="radio" id="sf_button" class="form_button" name="location"
               {% if form.location.value == LOCATION.SF %}checked="checked"{% endif %} value="{{ LOCATION.SF }}"/>
            <label for="sf_button">{{ LOCATION.SF }}</label>
            <input type="radio" id="other_button" class="form_button" name="location"
               {% if form.location.value == LOCATION.OTHER %}checked="checked"{% endif %} value="{{ LOCATION.OTHER }}"/>
            <label for="other_button">Other</label>
            <div id="zipcode_container"
                {# only show the container if other is checked or there are validation errors #}
                {% if form.zipcode.errors %}
                    class="field_error"
                {% else %}{% if form.location.value != LOCATION.OTHER %}
                    style="display:none;"
                {% endif %}{% endif %}
                    >
                <div>
                    <span>
                        Sorry Feastly only works in select cities at the moment.<br/>
                        <b>Enter your zip code</b> and we'll let you know when you can join!
                    </span>
                    <label>
                        {{ form.zipcode.errors }}
                        <input type="text" id="other_location" name="zipcode" maxlength="5"
                               value="{{ form.zipcode.value|default_if_none:'' }}"
                               placeholder="zip code"/>
                    </label>
                </div>
            </div>
        </div>
    </div>
    <button id="feed_me" type="submit">Feed me!</button>
</form>
<!-- ... --> 
```

这是谜题的另一个奇怪部分：一些用户的电子邮件在数据库中没有关联的 PotentialUser 模型，而是有一个 Django User 模型。

现在这是关键：它不会发生在我的开发机器上，也不会发生在我们的暂存环境中。这两种环境都有自己的覆盖设置，但似乎没有任何影响。我只是自己测试过这个。

然而，似乎解决它的方法是重新启动服务器。在发生某些事情之前，另一个用户在另一台计算机上登录或其他东西（！？），并且用户的电子邮件开始显示在注册页面上。

这可能是什么原因造成的？这可能是用户的会话泄漏到其他连接吗？如果是这样，那是如何工作/发生的？最重要的是，我应该如何解决这个问题？

谢谢！

# android - 下载 Android MyFirstApp 文件

> ID：11964349
> 
> 赞同：0
> 
> 时间：2012-08-15T05:01:58.457
> 
> 标签：android, eclipse, android-intent, android-2.2-froyo

在此处启动应用程序：

[http://developer.android.com/training/basics/firstapp/index.html](http://developer.android.com/training/basics/firstapp/index.html)

直接从教程中复制，它充满了错误。即使我复制和粘贴。是否有一个存储库，我可以在其中查看工作文件并查看是否有任何问题？

例如，在 MainActivity.java 中：

```
package com.example.my.first.app;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;

public class MainActivity extends Activity {
public final static String EXTRA_MESSAGE = "com.example.myfirstapp.MESSAGE";
/** Called when the user clicks the Send button */
public void sendMessage(View view) {
    Intent intent = new Intent(this, DisplayMessageActivity.class);
    EditText editText = (EditText) findViewById(R.id.edit_message);
    String message = editText.getText().toString();
    intent.putExtra(EXTRA_MESSAGE, message);
    startActivity(intent);
}

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}
} 
```

但它返回：

第 10 行的“视图无法解析为类型” 第 11 行的“此行的多个标记：无法解析为键入的意图” 第 12 行的“此行的多个标记：EditText 无法解析为一种类型”

然后在 DisplayMessageActivity.java 中：

```
package com.example.my.first.app;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.view.MenuItem;
import android.support.v4.app.NavUtils;

public class DisplayMessageActivity extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    // Get the message from the intent
    Intent intent = getIntent();
    String message = intent.getStringExtra(MainActivity.EXTRA_MESSAGE);

    // Create the text view
    TextView textView = new TextView(this);
    textView.setTextSize(40);
    textView.setText(message);

    // Set the text view as the activity layout
    setContentView(textView);
}
} 
```

它返回：

第 12 行的“意图无法解析为类型” 第 16 行的“此行有多个标记：TextView 无法解析为类型”

这是我的第一个应用程序，我认为按照官方教程可以，但它不起作用。我正在使用最新的 Eclipse 和 Andorid SDK（事实上是今晚下载的。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T05:09:40.080

你必须导入它。

在eclipse的左侧有一个带有“X”的incon，单击它并选择“Import 'XXXX'”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T14:20:50.830

有些地方拼写它`DisplayMessageActivity`，有些地方拼写它，`DisplayMesageActivity`消息中只有一个“s”。

重构并重命名`DisplayMesageActivity.java`文件。

# php - 获取PHP数组中的最小值并获取对应的key

> ID：11964357
> 
> 赞同：13
> 
> 时间：2012-08-15T05:02:28.607
> 
> 标签：php, arrays

我有一个数组，数组（ [0] => 3 [1] => 0 ）。我想要返回 1 的 PHP 代码，因为 1 的值是最低的。我该怎么做呢？这是[https://github.com/timothyclemans/RoboQWOP/commit/e205401a56b49e8b31f089aaee0042f8de49a47d的代码](https://github.com/timothyclemans/RoboQWOP/commit/e205401a56b49e8b31f089aaee0042f8de49a47d)

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-08-15T05:05:23.067

这将返回数组中具有最小值的第一个索引。当数组有多个最小值实例时，如果您只需要一个索引，这很有用：

```
$index = array_search(min($my_array), $my_array); 
```

这将返回数组中具有最小值的所有索引的数组。如果您需要最小值的所有实例，这很有用，但效率可能略低于上述解决方案：

```
$index = array_keys($my_array, min($my_array)); 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-08-15T05:07:09.030

```
array_keys($array, min($array)); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-15T05:05:15.283

[http://php.net/manual/en/function.min.php](http://php.net/manual/en/function.min.php)

[http://php.net/manual/en/function.array-search.php](http://php.net/manual/en/function.array-search.php)

```
$array = array( [0] => 3, [1] => 0);
$min = min($array);
$index = array_search($min, $array); 
```

应该返回 1

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-15T05:06:55.450

下面的例子会对你有所帮助。

```
$values=array(3,0,4,2,1);
$min_value_key=array_keys($values, min($values));
echo $min_value_key; 
```

希望这可以帮助。

# c++ - OpenGL Render Sphere without Glut：这个实现有什么问题？

> ID：11964361
> 
> 赞同：4
> 
> 时间：2012-08-15T05:03:17.380
> 
> 标签：c++, qt, opengl

在我的渲染循环中，我有以下逻辑。我有其他东西渲染到屏幕上，它们渲染，（我删除了该代码以直截了当）。这段代码不渲染球体，我不知道为什么不。我在数学中遗漏了什么吗？我已经使用了调试器，并且这些值似乎是正确的。注意 mBubbleDiameter 在此对象的构造函数中设置为 20。

```
static GLfloat staticDegreesToRadians(GLfloat tmpDegrees) {
    return tmpDegrees * ((std::atan(1.0f)*4)/180.0f);
}

void LedPannelWidget::updateGL() {
    glMatrixMode(GL_PROJECTION);
        glLoadIdentity();

        glViewport(0, 0, mWidth, mHeight);
        glOrtho(0, mWidth, 0, mHeight, -mBubbleDiameter, mBubbleDiameter);

    glMatrixMode(GL_MODELVIEW);
        glScissor(0, 0, mWidth, mHeight);
        glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);
        glClearColor(0.92f, 0.92f, 0.92f, 1.0);

        glLoadIdentity();
    const GLfloat tmpRadius = mDiameter/2.0f;
    const GLfloat tmpDelta = 5.00f;
    const GLfloat tmpDeltaRadians = staticDegreesToRadians(tmpDelta);

    for (int32_t tmpTheta = 180; tmpTheta > 0; tmpTheta -= tmpDelta) {
        for (int32_t tmpPhi = 0; tmpPhi < 360; tmpPhi += tmpDelta) {
            GLfloat tmpThetaRadians = staticDegreesToRadians(tmpTheta);
            GLfloat tmpPhiRadians = staticDegreesToRadians(tmpTheta);

            GLfloat tmpX1 = tmpRadius *
                std::sin(tmpThetaRadians) * 
                std::cos(tmpPhiRadians); 
            GLfloat tmpY1 = tmpRadius *
                std::sin(tmpThetaRadians) *
                std::cos(tmpPhiRadians);
            GLfloat tmpZ1 = tmpRadius *
                std::cos(tmpThetaRadians);

            GLfloat tmpX2 = tmpRadius *
                std::sin(tmpThetaRadians - tmpDeltaRadians) * 
                std::cos(tmpPhiRadians);
            GLfloat tmpY2 = tmpRadius *
                std::sin(tmpThetaRadians - tmpDeltaRadians) *
                std::cos(tmpPhiRadians); 
            GLfloat tmpZ2 = tmpRadius *
                std::cos(tmpThetaRadians - tmpDeltaRadians);

            GLfloat tmpX3 = tmpRadius * 
                std::sin(tmpThetaRadians - tmpDeltaRadians) *
                std::cos(tmpPhiRadians + tmpDeltaRadians);
            GLfloat tmpY3 = tmpRadius *
                std::sin(tmpThetaRadians - tmpDeltaRadians) *
                std::cos(tmpPhiRadians + tmpDeltaRadians);
            GLfloat tmpZ3 = tmpRadius *
                std::cos(tmpThetaRadians - tmpDeltaRadians);

            GLfloat tmpX4 = tmpRadius *  
                std::sin(tmpThetaRadians) *
                std::cos(tmpPhiRadians + tmpDeltaRadians);

            GLfloat tmpY4 = tmpRadius *
                std::sin(tmpThetaRadians) *
                std::cos(tmpPhiRadians + tmpDeltaRadians);

            GLfloat tmpZ4 = tmpRadius *
                std::cos(tmpThetaRadians);

            glBegin(GL_QUADS);
                glVertex3f(tmpX1, tmpY1, tmpZ1);
                glVertex3f(tmpX2, tmpY2, tmpZ2);
                glVertex3f(tmpX3, tmpY3, tmpZ3);
                glVertex3f(tmpX4, tmpY4, tmpZ4);
            glEnd();

            if (tmpGLError != GL_NO_ERROR) {
                QApplication::exit(0);
            }
        }
    }
    swapBuffers();
} 
```

* * *

工作 GL 算法：

```
const GLfloat r = mDiameter/2.0f;
const GLfloat phid = 20.00f;
const GLfloat thetad = 20.00f;
const GLfloat x = mCenterXCoord;
const GLfloat y = mCenterYCoord;

using namespace std;
for (int32_t phi = 180; phi > 0; phi -= phid) {
    int32_t theta = 0;
    GLfloat rphi = staticDegreesToRadians(phi);
    GLfloat rtheta = staticDegreesToRadians(theta);
    glBegin(GL_QUAD_STRIP);
    glColor3f(mCurrentColor.red()/255.0, mCurrentColor.green()/255.0,
        mCurrentColor.blue()/255.0);
    glVertex3f(
        (x + (r * sin(rphi) * cos(rtheta))),
        (y + (r * cos(rphi))),
        (0 + (r * sin(rphi) * cos(rtheta))));
    glVertex3f(
        (x + (r * sin(rphi + phid) * cos(rtheta))),
        (y + (r * cos(rphi + phid))),
        (0 + (r * sin(rphi + phid) * cos(rtheta))));

    for (; theta < 360; theta += thetad) {
        rtheta = staticDegreesToRadians(theta);
        glVertex3f(
            (x + (r * sin(rphi + phid) * cos(rtheta + thetad))),
            (y + (r * cos(rphi + phid))),
            (0 + (r * sin(rphi + phid) * cos(rtheta + thetad))));
        glVertex3f(
            (x + (r * sin(rphi) * cos(rtheta + thetad))),
            (y + (r * cos(rphi))),
            (0 + (r * sin(rphi) * cos(rtheta + thetad))));
    }
    glEnd();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T06:28:20.307

在这些行中检查您的代码

```
 GLfloat tmpThetaRadians = staticDegreesToRadians(tmpTheta);
        GLfloat tmpPhiRadians = staticDegreesToRadians(tmpTheta);

        GLfloat tmpX1 = tmpRadius *
            std::sin(tmpThetaRadians) * 
            std::cos(tmpPhiRadians); 
        GLfloat tmpY1 = tmpRadius *
            std::sin(tmpThetaRadians) *
            std::cos(tmpPhiRadians);
        GLfloat tmpZ1 = tmpRadius *
            std::cos(tmpThetaRadians); 
```

您需要更改见下文

```
 GLfloat tmpThetaRadians = staticDegreesToRadians(tmpTheta);
       GLfloat tmpPhiRadians = staticDegreesToRadians(tmpPhi);
       GLfloat tmpX1 = tmpRadius *
            std::sin(tmpThetaRadians) * 
            std::sin(tmpPhiRadians); 
        GLfloat tmpY1 = tmpRadius *
            std::sin(tmpThetaRadians) *
            std::cos(tmpPhiRadians);
        GLfloat tmpZ1 = tmpRadius *
            std::cos(tmpThetaRadians); 
```

# mysql - Mysql不能按某些指定字段排序？

> ID：11964362
> 
> 赞同：1
> 
> 时间：2012-08-15T05:03:43.780
> 
> 标签：mysql

我对以下代码的结果进行排序时遇到问题。我有一个动态排序字段，满足某个值，它将按指定字段排序。但是，由于某些原因，我似乎无法按某些字段排序，结果似乎按一些未知的顺序排序......例如。i.totalExclTax - 如果我按此排序，则结果未排序。因此我想知道为什么它不能按该字段排序

```
SELECT
i.invoicedDateTime AS `(@datetime)Date`,
i.invoiceNum AS `Invoice Num`,
c.displayName AS `Customer Name`,
m.name AS `Membership`,
FORMAT(i.totalExclTax, 2) AS `Total (Excl Tax)`,
FORMAT( SUM(it.amount), 2 ) AS `Tax`,
FORMAT(i.totalInclTax, 2) AS `Total (Incl Tax)`
FROM
(smSales__invoice i
JOIN smCustomer__customer c ON(i.customerId = c.id)
   AND c.ts_Deleted IS NULL
     JOIN smCustomer__membership m ON (c.membershipId = m.id)
     AND m.ts_Deleted IS NULL
)
  JOIN smSales__invoiceTax it ON(it.invoiceId = i.id)
  AND it.ts_Deleted IS NULL
WHERE i.invoicedDateTime BETWEEN '2012-07-01 00:00:00' AND DATE_ADD('2012-08-31 00:00:00', INTERVAL 1 DAY)
AND i.invoicedOutletId IN ('230614c3761512c8db000a38a346e217')
AND i.type = 'sales'
AND i.voidedDateTime IS NULL
AND i.ts_Deleted IS NULL
GROUP BY i.id
ORDER BY
  CASE 'B'
    WHEN 'A' THEN i.invoiceNum
    WHEN 'B' THEN i.totalExclTax
    ELSE `Customer Name`
  END
ASC; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T06:41:06.240

只要 'B'='B' 总是输出第二个值（i.totalExclTax）作为结果。在 MySQL 中，尝试使用与您的语句等效的语句：

```
ORDER BY 
if('B'='A', i.invoiceNum,if('B'='B',i.totalExclTax,'Customer Name')) 
ASC; 
```

# objective-c - CCCallFunc 的随机值：值未更新？

> ID：11964368
> 
> 赞同：1
> 
> 时间：2012-08-15T05:04:33.187
> 
> 标签：objective-c, random, cocos2d-iphone

你知道如何改变 flashPosX 的值吗？changeFlashPosX 中的“日志”可以正常工作，但值不会改变：

```
-(void)changeFlashPosX{
    CCLOG(@"change");
    flashPosX = random() % 300;
    CCLOG(@"rando : %f", flashPosX);
}

-(void)animFlash{
    CCScaleTo *to1 = [CCScaleTo actionWithDuration:.2 scale:1];
    CCScaleTo *to0 = [CCScaleTo actionWithDuration:.6 scale:0];
    CCMoveTo *moveTo = [CCMoveTo actionWithDuration:0.1 position:ccp(flashPosX, flash.position.y)];
    CCCallFunc *callChange = [CCCallFunc actionWithTarget:self selector:@selector(changeFlashPosX)];
    CCSequence *seq = [CCSequence actions:to1, to0, callChange, moveTo, nil];
    //CCAction *repeatSeq = [CCRepeatForever actionWithAction:seq];
    CCRepeatForever *repeatSeq = [CCRepeatForever actionWithAction:seq];
    [flash runAction:repeatSeq];
} 
```

输出 ：

```
rando : 164.000000
change
rando : 217.000000
change
rando : 241.000000
change
rando : 75.000000 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T06:40:03.740

试试这个：

```
CCMoveTo *moveTo = [CCMoveTo actionWithDuration:0.1 position:ccp(random() % 300, flash.position.y)]; 
```

如果它有效，那么问题要么与`flashPosX`变量的范围和/或保留有关，要么与`CCSequence`.

另外，试试这个：

```
CCRepeatForever *repeatSeq = [CCRepeatForever actionWithAction:seq]; 
```

# java - 使用为 Android 开发的烂番茄 API 时将字符串转换为 JSONArray 时出错

> ID：11964369
> 
> 赞同：0
> 
> 时间：2012-08-15T05:04:41.087
> 
> 标签：java, android, rotten-tomatoes

使用烂番茄 API 时出现以下错误：

> org.json.JSONException：java.lang.String 类型的值 596 无法转换为 JSONArray。

我正在尝试从 Rotten Tomatoes API 中解析出 JSON 格式的数据。

这是我的代码的样子。

```
package com.my.apitest;

import java.io.*;
import org.apache.http.*;
import org.apache.http.client.HttpClient;
import org.apache.http.client.methods.HttpPost;
import org.json.*;
import org.apache.http.impl.client.*;
import android.os.Bundle;
import android.app.Activity;
import android.util.Log;
import android.view.Menu;
import android.widget.EditText;

public class MainActivity extends Activity {

    EditText display;
    HttpResponse responseGet;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        try {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.activity_main);

            display = (EditText) findViewById(R.id.textBox);

            String result = "";

            try {
            HttpClient client = new DefaultHttpClient();
            String movieID = "770672123";

            HttpPost getCast = new HttpPost("http://api.rottentomatoes.com/api/public/v1.0/movies/" +
                                            movieID + "/cast.json?apikey=3p9ehnhzbxwpbd6mk8fncf67");

            HttpResponse responseGet = client.execute(getCast);
            HttpEntity resEntityGet = responseGet.getEntity();

            InputStream webs = resEntityGet.getContent();

            // (i was converting to string like this)display.setText(EntityUtils.toString(resEntityGet));

            try{
                BufferedReader reader = new BufferedReader (new InputStreamReader (webs, "iso-8859-1"), 8);
                StringBuilder sb = new StringBuilder();
                String line = null;
                while ((line = reader.readLine()) != null) {
                    sb.append(line + "\n");
                }
                webs.close();
                result=sb.toString();
            }catch(Exception e 
                Log.e("log_tag", "Error converting result: " + e.toString());

            }
        }catch(Exception e 
            Log.e("log_tag", "Error in http connection " + e.toString());
        }

        try{
            JSONArray jArray = new JSONArray(result);

            for (int i=0; i<jArray.length(); i++ 
                JSONObject json_data = jArray.getJSONObject(i);
                display.setText(json_data.getString("name"));
            }
        }
        catch(JSONException e 
            Log.e("log_tag", "Error parsing data " + e.toString());
        }
    }   
    catch (Exception e 
        Log.e("Error", "Error in Code:" + e.toString());
        e.printStackTrace();}
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return false;
    }
} 
```

在进行了一些挖掘之后，我遇到了一些信息建议，我需要使用 PHP 连接到 api。我是 API 和移动开发的新手，所以我不确定如何去做，或者这是否真的是问题所在。我认为可能发生的情况是由于没有 PHP 文件连接到 API 和解码 JSON 而引发错误。听起来对吗？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T06:50:25.857

在实例化 JSONArray 之前，请确保您的字符串格式正确。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T05:28:14.203

如果您的**响应**以**[ 方括号开头**，则表明**JSONArray**比您必须使用

```
JSONArray  jsonarray=new JSONArray(response); 
```

如果它以**{ 大括号**开头，则表示**JSONObject**比你必须使用

```
JSONObject jsonobject=new JSONObject(response); 
```

[在http://www.json.org/](http://www.json.org/)上查看有关 json 的更多详细信息以及在 android 中解析 JSON 的示例

[Android JSONParsing教程1](http://www.androidhive.info/2012/01/android-json-parsing-tutorial/)

[Android JSON解析教程2](http://android-er.blogspot.in/2011/07/another-example-to-parse-json.html)

# vb.net - 保持正确的窗口形式

> ID：11964372
> 
> 赞同：-2
> 
> 时间：2012-08-15T05:04:46.913
> 
> 标签：vb.net, facebook, winforms, screen

防止窗口像 facebook messenger 一样接管屏幕的右侧，我该如何做到这一点，以便我的应用程序停留在屏幕的那一侧，并将所有其他窗口放在屏幕的右侧。

我需要 VB.NET 代码

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T08:19:14.117

像这样的东西应该将表单与屏幕的右侧对齐。它不会阻止用户重新定位表单

```
Private Sub Form1_Load(sender As System.Object, e As System.EventArgs) Handles MyBase.Load
    RightAlignForm(Me)
End Sub    

Private Sub RightAlignForm(ByRef frm As Form)
    Dim currentArea = Screen.FromControl(frm).WorkingArea
    frm.Left = currentArea.Left + currentArea.Width - frm.Width
End Sub 
```

# git - gwt 项目中的 gwt-unitCacheXXXX 文件

> ID：11964382
> 
> 赞同：0
> 
> 时间：2012-08-15T05:06:37.067
> 
> 标签：git, gwt

我们正在尝试对我们的 gwt +gae for java 项目进行源代码控制，我看到以 gwt-unitCache 开头的文件出现在应用程序根文件夹的更改中。我们应该对这些进行源代码控制吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T16:23:34.430

[使用 SVN 和 Eclipse 正确设置 GWT 项目](https://stackoverflow.com/questions/5663465/setup-a-gwt-project-correctly-with-svn-and-eclipse)很好地回答了这个问题。我认为人们应该在发布问题之前进行搜索

# mysql - 三列上的 MySQL 连接表

> ID：11964390
> 
> 赞同：1
> 
> 时间：2012-08-15T05:07:58.143
> 
> 标签：mysql, join

我有两张桌子

第一个有用户交易：

```
Date    Transaction    P1    P2    P3    P4    P5 
```

（P1-P5 是三位数的用户 ID）每笔交易都有 1、2、3、4 甚至 5 个与之关联的用户。

第二个表有用户信息：

```
ID    NAME    ACTIVE 
```

我习惯于使用 JOIN 来显示用户的姓名而不是他们的 ID，但是对于五个用户，我不知道如何在我的 PHP/HTML 表中显示他们的姓名。

有人能对此有所了解吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T05:12:04.960

您可以为每个用户加入同一个表。如果这样做，则必须以不同的方式对多个连接表进行别名。

```
select t1.Date, t1.Transaction, t1.P1, t1.P2, t1.P3, t1.P4, t1.P5
       u1.name, u2.name, u3.name, u4.name, u5.name
from table1 t1
left outer join table2 u1 on t1.p1 = u1.id
left outer join table2 u2 on t1.p2 = u2.id
left outer join table2 u3 on t1.p3 = u3.id
left outer join table2 u4 on t1.p4 = u4.id
left outer join table2 u5 on t1.p5 = u5.id 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-15T05:13:52.307

`null`如果没有，某些字段将具有值`ID`。

```
SELECT  a.`Date, a.`Transaction`,
        b.name as P1Name, 
        c.name as P2Name, 
        d.name as P3Name, 
        e.name as P4Name, 
        f.name as P5Name
FROM    transactions a 
            LEFT JOIN info b
                on a.p1 = b.id
            LEFT JOIN info c
                on a.p1 = c.id
            LEFT JOIN info d
                on a.p1 = d.id
            LEFT JOIN info e
                on a.p1 = e.id
            LEFT JOIN info f
                on a.p1 = f.id 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-15T05:14:34.703

我认为您应该将所有名称放在以换行符分隔的“td”中。

# javascript - 如何使用 express 3.x 在 node.js 中的 EJS 模板中包含 js 文件

> ID：11964391
> 
> 赞同：3
> 
> 时间：2012-08-15T05:08:04.450
> 
> 标签：javascript, node.js, express, ejs

我看到的所有示例都使用`app.dynamicHelpers`提供了一种在我的视图模板中访问我的 javascript 文件的方法。但是在 express 3.x 中没有明确的方法可以做到这一点。[迁移文档](https://github.com/visionmedia/express/wiki/Migrating-from-2.x-to-3.x)说“使用中间件”。我对“中间件”的概念比较陌生，不知道如何实现。

我想知道的是在我的视图模板中包含 javascript 文件的最优雅的方式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T22:17:03.347

中间件是建立Express 的[Connect的基础。](http://www.senchalabs.org/connect/)简而言之，它允许您将传入 HTTP 请求和响应的多个处理程序链接在一起。您在 Express 应用程序中提供给每个参数的参数`app.use()`基本上是一个“中间件”，并且是具有以下签名的回调`function (request, response, next)`，其中`next`是链中要调用的下一个中间件回调。以下都是中间件（最后一个是具有 4 个参数签名的[错误处理程序）：](http://expressjs.com/guide.html#error-handling)

```
app.use(express.bodyParser());
app.use(express.methodOverride());
app.use(app.router);
app.use(function(err, req, res, next){
  // logic
  next();
}); 
```

就从 Express 2 到 3.x 的迁移而言，迁移具体是：

> `app.dynamicHelpers(`) (使用中间件 + [`res.locals`](http://expressjs.com/api.html#res.locals))

因此，通过一个人为的示例，您之前可能在外部`js`文件中有一个辅助函数，并将`require`其用于您的`dynamicHelper`：

```
//helpers.js
exports.dynamicHelpers = {
  currentUser: function(req, res) {
    return req.user;
  }
};

// app.js
var helpers = require('./helpers').dynamicHelpers;

app.dynamicHelpers(helpers); 
```

通过一些重组，您现在可以执行以下操作：

```
//locals.js
exports.setLocals = function(req, res, next){ //<- middleware function
  res.locals.currentUser = req.user;
  res.locals.otherVariable = ...;
  next();
}

//app.js
var locals = require('./locals').setLocals;
...
app.use(locals); 
```

这是一篇很好的[博客](http://j-query.blogspot.ca/2012/02/expressjs-dynamic-helpers-vs-middleware.html)，回顾了中间件与`dynamicHelpers`pre-3.x Express 的对比，但概念是相同的。唯一的区别是文章中使用的`res.local(name, value)`现在[已弃用](https://github.com/visionmedia/express/wiki/Migrating-from-2.x-to-3.x)`res.locals.name = value`或`res.locals({ name: value })`

# python - 请解释一下这个python代码

> ID：11964392
> 
> 赞同：-2
> 
> 时间：2012-08-15T05:08:45.167
> 
> 标签：python, python-2.7

**mipText**是任何二进制字符串

**像这样的键**： (48, 34, 65, 168, 91, nn)

请在下面解释我的代码

```
def test(mipText,keys):
    mipText = list(mipText)
    for i, encryptedChar in enumerate(mipText):
        mipText[i] = encryptedChar ^ keys[i & 0xFF]
    return mipText 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T05:14:09.173

它使用提供的长度为 256 字节的密钥，`mipText`使用[简单的 XOR 密码](https://en.wikipedia.org/wiki/XOR_cipher)加密（或解密，没关系） 。`keys`

`keys[i & 0xFF]`是适当的密钥字节（位于`keys`第`i mod 256`th 位置）。

`encryptedChar ^ keys[i & 0xFF]``i`将原始`mipText`字符串的第 th 字节与适当的密钥字节进行异或。

`mipText[i] = encryptedChar ^ keys[i & 0xFF]`用字节的加密版本替换`i`原始字符串的第 th 个字节。`mipText`

请注意，作为`XOR`产生原始结果的两种应用，该算法是对称的：如果提供原始字符串，它会对其进行加密；如果提供了一个加密的字符串，它会解密它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T05:16:07.220

它根据文件的内容创建一个列表

例如。解压后的“Hello Word”变成[72,101,108,108,111,32,87,111,114,108,100]

然后它将每个索引与键中的值进行异或（例如 0b010101 ^ 0b110011 = '0b100110'）

`i&0xFF`只是确保键的索引永远不会大于 0xff (255) ...基本相同，`i%256`只是更快

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T05:16:17.463

```
 keys[i & 0xFF] 
```

返回 256 字节密钥字符串的第 i 个值。

然后将该值与相关的加密字符进行异或运算 (^ = XOR)

# javascript - 等价于 .show() - 纯 JavaScript 中的 jQuery

> ID：11964400
> 
> 赞同：7
> 
> 时间：2012-08-15T05:09:24.200
> 
> 标签：javascript, jquery, css

任何人都知道javascript中jquery的.show()等价物是什么？

我尝试使用 document.getElementById 并添加/删除我命名为“show”//“hide”的类，但效果不佳我不确定这些类中可能有错误的属性..

表演课是：

```
.show{
    position:relative;
    display:block;
} 
```

隐藏类是：

```
.hide{
    position:absolute;
    top:0px;
    right:0px;
    display:none;
} 
```

我很确定有更好的方法。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-15T05:11:16.693

```
document.getElementById('myElement').style.display = 'block'; // show
document.getElementById('myElement').style.display = 'none'; // hide 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-15T05:16:34.347

jQuery 考虑了`display`隐藏之前的值。当您触发`show()`时，它会将其返回到该值。因此，它不仅仅是简单地将元素的`display`属性设置为`block`and `none`。

所以基本上：

```
function hide(){
    //get previous display value
    //store it in an internal cache. jQuery has an internal data storage
    //hide element
}

function show(){
    //get previous display value for that element
    //apply to element to show it
} 
```

* * *

> [`.show()`](http://api.jquery.com/show/)
> 
> 匹配的元素将立即显示，没有动画。这大致相当于调用`.css('display', 'block')`，除了显示属性恢复到最初的状态。如果一个元素的显示值为`inline`，则隐藏并显示，它将再次内联显示。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T05:11:49.583

采用`document.getElementById("MyId").className='show'` `document.getElementById("MyId").className='hide'`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-15T05:13:27.210

尝试使用 document.getElementsByClassName，因为您使用的是 .show 和 .hide。这些是类，您正试图按 Id 定位。免责声明：您可能需要仔细检查旧浏览器对此的支持。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-15T05:17:39.540

在使用 jQuery 之前，我使用以下方法来显示/隐藏元素：

```
HTMLElement.prototype.toggleDisplay = function(on_or_off, display_type) {
    if (typeof(tddisptype) == "undefined") tddisptype = "block";
    var new_display;
    if (typeof(on_or_off) != "boolean") {
        if (this.style.display == "none") new_display = display_type;
        else new_display = "none";
    } else {
        if (on_or_off) new_display = display_type;
        else new_display = "none";
    }
    this.style.display = new_display;
}​ 
```

这会为所有元素添加一个 toggleDisplay() 函数；例如，您可以通过 document.getElementById() 获得。您可以传递它`true`或`false`作为参数来显示或隐藏元素，或者如果您不传递参数，它会尝试确定是显示还是隐藏元素。第二个参数指定与“开”状态相关的显示类型；上面，它默认为`block`.

# c++ - 在“文本编辑”中访问存储的文本文件，Qt C++

> ID：11964404
> 
> 赞同：1
> 
> 时间：2012-08-15T05:10:13.650
> 
> 标签：c++, qt, text, edit

我创建了一个带有“按钮”和“文本编辑”的 Qt Gui 应用程序。单击“按钮”后，我想将“文本编辑”中的文本分配给 QString 变量。如何将此文本存储在 QString 变量中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T05:19:03.573

为什么你需要一个文件？只是这个：

```
QString foo = ui->textEdit->toPlainText(); 
```

您还需要连接 QPuhsButton 的“点击”信号并创建插槽以获取文本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-20T03:43:59.250

如果您有一个文件并希望在单击按钮时将其存储在 QString 中，您可以使用 QFileDialog 来执行此操作，例如：

```
//includes
#include <QFileDialog>
#include <QFile>
#include <QTextStream>
#include <QMessageBox>

// then in the Button,you can use this
 QString fileName = QFileDialog::getOpenFileName(this,
    tr("Open File"), "/home", tr("code file (*.txt)"));// string has the file link
// if you using Windows OS replace "/home" with "c://"
QFile file(fileName);
if (!file.open(QIODevice::ReadOnly))
    QMessageBox::information(0,"info",file.errorString());
QTextStream in(&file); 
QString ex=in.readAll(); 
```

现在您将文件中的所有内容都存储在 QString 中。请注意，您可以将 .txt 替换为您需要的任何扩展名，也可以添加扩展名

# java - 在android中启动新活动时尝试停止动画

> ID：11964407
> 
> 赞同：0
> 
> 时间：2012-08-15T05:10:45.753
> 
> 标签：java, android, android-activity

SO上有很多问题询问在开始新活动时停止动画，我只是没有运气。我做错了什么是公然明显的吗？提前致谢。

```
public void onClick (View view) {
Intent about = new Intent(this, about.class);
        about.setFlags(Intent.FLAG_ACTIVITY_NO_ANIMATION);

        startActivity(about);
        overridePendingTransition(0, 0);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T07:12:34.053

你似乎错过了`setAction(Intent.ACTION_VIEW);`.

这是您开始一项新活动的时间。

`Intent aboutIntent = new Intent(this, about.class); aboutIntent.setAction(Intent.ACTION_VIEW); aboutIntent.setFlags(Intent.FLAG_ACTIVITY_NO_ANIMATION); startActivity(aboutIntent); overridePendingTransition(0, 0);`

当您按下返回按钮时，您仍然会看到动画。要删除此动画，您必须添加`overridePendingTransition(0, 0);`到您按下后退按钮的活动的 onPause 方法。

# android - 如何在 dialogpreference 类中使用 getSharedPreferences(String, int)？

> ID：11964415
> 
> 赞同：0
> 
> 时间：2012-08-15T05:11:54.543
> 
> 标签：android

当我尝试使用 getSharedPreferences() 时，eclipse 给了我一个 android.Preference.preference.getSharePreferences()，但没有来自 contextWrapper 的那个有 2 个争论。我试图包含整个名称，即 android.content.ContextWrapper.getSharedPreferences(null, 0)，但仍然不起作用，eclipse 说不能对非静态引用进行静态引用。任何想法？我在其他类（例如活动）中调用具有 2 个参数的那个没有任何问题。

```
public class DialogExPreference extends DialogPreference implements DialogInterface.OnClickListener
{
    SharedPreferences settings;
    @Override
    public void onClick(DialogInterface dialog, int which)
    {
        if(which==-1)
        {
            if(!pw1.getText().toString().equals("")&&!pw2.getText().toString().equals(""))
            {

                if(pw1.getText().toString().equals(pw2.getText().toString()))
                {
                     settings =getSharedPreferences();// android.content.ContextWrapper.getSharedPreferences(null, 0);
                     Editor editor = settings.edit();
                     editor.putString("password", pw1.getText().toString());
                     editor.commit();                    

                    Toast.makeText(getContext(), "Password Saved", Toast.LENGTH_SHORT).show();
..... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T06:31:21.273

您可以检查下面的代码可能有助于您可以使用应用程序上下文的一件事

```
SharedPreferences preferences = getPreference("name_of_pref",MODE_PRIVATE);
SharedPreferences.Editor editor = preferences.edit();
editor.putInt("storedInt", storedPreference); // value to store
editor.commit(); 
```

还要检查链接[共享首选项](https://stackoverflow.com/questions/2614719/how-do-i-get-the-sharedpreferences-from-a-preferenceactivity-in-android)

# macos - Mac OS 10.8 支持 GLSL 3.30？

> ID：11964416
> 
> 赞同：15
> 
> 时间：2012-08-15T05:11:59.427
> 
> 标签：macos, opengl, glsl, osx-mountain-lion

我正在使用 10.8 Mountain Lion 遵循有关 OpenGL 3.3 的 arcsynthesis 教程，并且在构建项目时，它使用 GLSL 3.30 版本编译和运行着色器，但是即使在 Mac OS 10.8 的核心配置文件中，我也不应该支持 GLSL 3.30 - 只有1.50（如图所示）

![](../Images/e886b600b9238b353679ff0d852c9069.png)

有人能解释我是如何成功实现这种黑魔法的吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-21T01:52:52.720

OS X 10.8 仍然只支持 OpenGL 3.2，但具有一些 3.3 的特性，例如指定属性 location `(#extension GL_ARB_explicit_attrib_location : enable)`。着色器编译器接受最高 4.10 的版本。他们可能将它留在那里是为了兼容性或（推测）他们最初打算支持 4.1。

这至少是我在使用 10.8 几周后得出的结论。

编辑：看起来 4.10 的猜测是正确的。10.9-10.12 支持最高版本 4.10。我猜他们想在他们的 Metal api 上花费资源，而不是继续前进并获得计算着色器。

# hadoop - 如何在 Hadoop 中为 job.submission.protocol.acl 刷新服务 ACL

> ID：11964418
> 
> 赞同：1
> 
> 时间：2012-08-15T05:12:13.030
> 
> 标签：hadoop, authorization, acl

我正在使用 Cloudera 的 Hadoop 的 CDH 发行版，并且最近从 CDH3 升级到了 CDH4。

在 CDH3 中，我曾经能够将用户名添加到**hadoop-policy.xml**中：

> security.client.protocol.acl
> 
> security.job.submission.protocol.acl

然后运行：

```
hadoop dfsadmin -refreshServiceAcl

hadoop mradmin -refreshServiceAcl 
```

而且，瞧，用户可以访问 HDFS 并运行 MR 作业。

现在添加自升级到 CDH4 以来的第一个用户，看起来有些事情发生了变化。

仍然像上面一样在**hadoop-policy.xml**中添加用户。对于 HDFS 访问，我运行：

```
hdfs dfsadmin -refreshServiceAcl 
```

但是，我无法弄清楚什么是合适的让用户访问“security.job.submission.protocol.acl”。当我运行时：

```
hadoop mradmin -refreshServiceAcl 
```

我得到：

> 不推荐使用：不推荐使用此脚本执行 mapred 命令。而是使用 mapred 命令。refreshServiceAcl：java.io.IOException：未知协议：org.apache.hadoop.security.authorize.RefreshAuthorizationPolicyProtocol

当然，用户会得到：

> org.apache.hadoop.security.authorize.AuthorizationException：用户用户名 (auth:SIMPLE) 未授权协议接口 org.apache.hadoop.mapred.JobSubmissionProtocol，预期客户端 Kerberos 主体为空

我没有安装 YARN/MRv2，“/usr/lib/hadoop-0.20-mapreduce/bin/mapred”只是一个指向“/usr/lib/hadoop-0.20-mapreduce/bin/hadoop”的软链接。

知道如何更新 JobSubmissionProtocol 以接受新用户吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-14T06:57:52.873

`hadoop-policy.xml`目录中的文件`hadoop_home/conf`包含所有与安全相关的设置。我相信您需要在属性设置中添加用户名。见下文：

```
<property>
<name>security.job.submission.protocol.acl</name>
<value>*</value>
<description>
ACL for jobsubmissionProtocol, used by job clients to communicate with the job tracker 
for job submission, kill etc. The ACL is a comma separated list of user and group name. 
The user and grouplist is separated by a blank. For e.g., "majeed, john, developers,testers". 
A special value of "*" means all users are allowed. </description>
</property> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-25T13:19:19.670

我认为 ...

**MapReducePolicyProvider.java**使用
导入 org.apache.hadoop.security.authorize.RefreshAuthorizationPolicyProtocol；

**MRAdmin.java**使用
import org.apache.hadoop.mr1security.authorize.RefreshAuthorizationPolicyProtocol；

这种不匹配的错误原因。

但我不知道为什么为每个文件使用不同的类。

# sql - 从 Postgres 中小于 mm-dd 的所有年份中提取日期

> ID：11964425
> 
> 赞同：2
> 
> 时间：2012-08-15T05:13:41.000
> 
> 标签：sql, postgresql

我正在尝试从 Postgres 数据库中提取一些数据来实现生日提醒系统，但是在使查询正常工作时遇到了一些麻烦。基本上，我想提取所有生日字段在某个一个月范围内的记录。我尝试了以下查询：

```
SELECT *
ALL persons
WHERE EXTRACT(MONTH from birthday) >= 9
AND EXTRACT(DAY from birthday) >= 15
INTERSECT
SELECT *
ALL persons
WHERE EXTRACT(MONTH from birthday) <= 10
AND EXTRACT(DAY from birthday) <= 15 
```

查询的第一部分（在 之前`INTERSECT`）似乎可以按我的意愿工作，但第二部分不包括15 日之前*任何*一个月的日期。例如，如果 9/20 有生日，第一部分将包括它，但第二部分将排除它，因为它是在第 15 天之后（即使它仍然落在 10/15 之前）。任何想法如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T05:32:11.987

这应该有效：

```
SELECT *
FROM persons
WHERE
    EXTRACT(MONTH FROM age(CURRENT_DATE, birthday)) = 11; -- less than one month the next birthday 
```

编辑：错误修复

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-15T06:58:11.720

此查询输出距离生日不到一个月的人：

```
select * from persons where EXTRACT(MONTH FROM age(birthday))=0 
```

如果你想输出前一个月和后一个月的生日：

```
select * from persons where EXTRACT(MONTH FROM age(birthday)) in (0,11) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T17:25:24.867

从 '2012-09-15' 和 '2012-10-15' 之间生日的人中选择 * 怎么样

# persistence - 使用eclipselink在weblogic中部署ear时处理持久单元时出错

> ID：11964434
> 
> 赞同：1
> 
> 时间：2012-08-15T05:14:36.577
> 
> 标签：persistence, weblogic, eclipselink

我正在开发一个多模块 maven 项目，并且为了持久性，我使用 eclipselink。当我在 weblogic 中部署 ear 文件时，我总是收到此错误消息：无法加载 webapp /yyy。处理模块 /yyy 的持久单元 xxx 时出错。实例化 PersistentUnit xxx 的 Persistence Provider 类 org.apache.openjpa.persistence.PersistenceProviderImpl 时出错。java.lang.ClassNotFoundException org.apache.openjpa.persistence.PersistenceProviderImpl。我猜它尝试使用默认的 openjpa 提供程序，但我已将其配置为在 persistence.xml 中使用 eclipselink。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T12:03:03.570

在应用程序描述符中使用[prefer-web-inf-classes](http://docs.oracle.com/cd/E12840_01/wls/docs103/programming/classloading.html#wp1082452)元素。 根据文件，`weblogic.xml`

> 将此元素设置为 True 会破坏类加载器委托模型，以便 Web 应用程序中的类定义优先于更高级别的类加载器中的类定义加载。这允许 Web 应用程序使用它自己的第三方类版本，它也可能是 WebLogic Server 的一部分。

[这](https://stackoverflow.com/questions/3376046/weblogic-10-3-1-0-is-using-com-bea-core-apache-commons-net-1-0-0-0-1-4-1-jar)是一个相关的问题，也可能对您有所帮助。

# java - 在 Hector 中加载对象及其索引

> ID：11964435
> 
> 赞同：1
> 
> 时间：2012-08-15T05:14:38.827
> 
> 标签：java, indexing, cassandra, hector

有什么方法可以在列中加载带有索引的对象而不是 Hector（Cassandra 客户端）中的键？

我曾经通过使用*RangeSliceQuery*找到它的密钥然后加载它 来做到这一点`public <T,I> T load(Class<T> clazz,I id)`

有没有更好的方法？谢谢，

# java - 隐藏基于 if 语句动态添加的按钮

> ID：11964437
> 
> 赞同：0
> 
> 时间：2012-08-15T05:14:42.087
> 
> 标签：java, android, listview, button, views

我似乎无法弄清楚如何做到这一点，基本上我有一个列表视图，其中包含一堆按钮，每个按钮都有自己的单独值，这一切都很好，直到我想隐藏某些按钮它都去锅了。

这个列表视图有它自己的自定义适配器，代码是：

为空间删除了导入，但它们存在。

```
public class FriendsArrayAdapter extends ArrayAdapter<Friend> 
{
    public FriendsArrayAdapter
    (Activity context, int resourceId, ArrayList<Friend> friends) 
{
    super(context, resourceId, friends);
    this.context = context;
    this.friends = friends;
    this.resourceId = resourceId;

}

@Override
public View getView(int position, View convertView, ViewGroup parent) 
{
    View rowView = convertView;
    if (rowView == null) 
    {
        LayoutInflater vi = (LayoutInflater)context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        rowView = vi.inflate(resourceId, null);
    }

    alert = new AlertDialog.Builder(context);
    alert.setTitle("Hanged! Online Play");
    alert.setMessage("Enter a word for your opponent to guess. Alphabetical characters only and maximum of 25 characters long.");
    final EditText input = new EditText(context);
    alert.setView(input);

    alert.setPositiveButton("Ok", new DialogInterface.OnClickListener() 
    {
    public void onClick(DialogInterface dialog, int whichButton) 
    {
       wordToGuess = input.getText().toString();
       SubmitWord submitTask = new SubmitWord();
       submitTask.execute(new String[] { "http://www.hanged.comli.com/main.php" });
       Log.i("postData", wordToGuess);
     }
    });

   alert.setNegativeButton("Cancel", new DialogInterface.OnClickListener() 
    {
      public void onClick(DialogInterface dialog, int whichButton) 
      {
          Intent intent = new Intent(context, NetPlay.class);
          intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);       
          context.startActivity(intent);
      }
    });

    final Friend f = friends.get(position);
    TextView rowTxt = (TextView) rowView.findViewById(R.id.rowtext_top);
    rowTxt.setText(f.name+"       ");

    Button battleBtn = (Button) rowView.findViewById(R.id.battleBtn);
    battleBtn.setText(f.id+" Accept Challenge");
    battleBtn.setOnClickListener(new OnClickListener() 
    {
           @Override
           public void onClick(View v) 
           {
               rivalid = f.id;
               AcceptChallenge task2 = new AcceptChallenge();
               task2.execute(new String[] { "http://www.hanged.comli.com/get-currentgame.php" });
           }
    });

    Button newgameBtn = (Button) rowView.findViewById(R.id.newgameBtn);
    newgameBtn.setText(f.id+" Start new game.");

    newgameBtn.setOnClickListener(new OnClickListener() 
    {
           @Override
           public void onClick(View v) 
           {
               rivalid = f.id;
               alert.show();  
           }   
    });

        for (int i = 0;i<NetPlay.victimArray.length-1;i++)
        {
            Log.i("VICTIM ARRAY DATA ", NetPlay.victimArray[i]);

            if (NetPlay.victimArray[i].equals(NetPlay.myId))
            {
                ingame = false;
            }
            else
            {
                ingame = true;
            }
        }

        for (int i = 0;i<NetPlay.rivalArray.length-1;i++)
        {
            Log.i("RIVAL ARRAY DATA ", NetPlay.rivalArray[i]);

            if (NetPlay.rivalArray[i].equals(NetPlay.myId))
            {
                battle = true;
            }
            else
            {
                battle = false;
            }

        }

        if (battle.equals(false))
        {
            battleBtn.setVisibility(View.INVISIBLE);
        }
        if (ingame.equals(false))
        {
            newgameBtn.setVisibility(View.INVISIBLE);
        }

    return rowView;
} 
```

每当我设法隐藏这些按钮时，它们都会被隐藏，而不仅仅是应该隐藏的按钮，如果这有意义的话？如果该信息有帮助，此视图依赖于来自 asynchtask 的一些数据。

真的很感谢一些帮助，让我完全困惑我怎么可能做到这一点。

这是在我的主要活动中调用列表视图的地方。

```
listView = (ListView) findViewById(R.id.friendsview);
friendsArrayAdapter = new FriendsArrayAdapter(this, R.layout.rowlayout, friends);
listView.setAdapter(friendsArrayAdapter); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T06:02:55.153

问题在于这段代码：

```
if (battle.equals(false)) {
  battleBtn.setVisibility(View.INVISIBLE);
}
if (ingame.equals(false)) {
  newgameBtn.setVisibility(View.INVISIBLE);
} 
```

正如您所知道的那样， ListView 项目被回收（这就是您应该使用[ViewHolder](https://stackoverflow.com/questions/4145602/how-to-implement-a-view-holder)的原因），您还需要将按钮设置为`View.VISIBLE`条件为真时。

您的代码应如下所示：

```
if (battle.equals(false)) {
  battleBtn.setVisibility(View.INVISIBLE);
} else {
  battleBtn.setVisibility(View.VISIBLE);
if (ingame.equals(false)) {
  newgameBtn.setVisibility(View.INVISIBLE);
} else {
  newgameBtn.setVisibility(View.VISIBLE);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T05:52:28.413

我不知道您的应用程序的逻辑，但我看到错误和两种可能的解决方案。

1.  因为你循环`victimArray`并且因为`NetPlay.myId`在数组的中间你总是得到战斗`false`。所以你应该在它是真的时开始`battle`并`false`打破它。

2.  我假设您应该更改检查：

    NetPlay.victimArray[i].equals(NetPlay.myId)

到

```
NetPlay.victimArray[i].equals(friend.id) 
```

与另一种情况类似。

我还建议您使用`HashSet`而不是 original `victimArray`。它将使用`contains`方法而不是循环为您提供更优化的搜索。

# build - 使用两级包路径构建 dojo 1.8

> ID：11964438
> 
> 赞同：1
> 
> 时间：2012-08-15T05:14:42.663
> 
> 标签：build, dojo

我正在尝试使用 dojo 构建工具来创建类似这样的发布结构：

```
relDir
  ->dojo
  ->dijit
  ->dojox
  ->mynamespace
     ->package1
     ->package2 
```

在构建配置文件中，我给出了以下指示：

```
"packages":[
    {
        "name":"dojo",
        "location":"vendor\/dojo\/dojo"
    },
    {
        "name":"dijit",
        "location":"vendor\/dojo\/dijit"
    },
    {
        "name":"dojox",
        "location":"vendor\/dojo\/dojox"
    },
    {
        "name":"mynamespace\/package1",
        "location":"vendor\/mynamespace\/package1"
    },
    {
        "name":"mynamespace\/package2",
        "location":"vendor\/mynamespace\/package2"
    }
] 
```

但是构建工具似乎不喜欢两部分包名称，并吐出这样的目录结构：

```
relDir
   ->dojo
   ->dijit
   ->dojox
   ->mynamespace
       ->package1
           All package1 copyOnly files
       ->package2
           All package2 copyOnly files
   ->package1
       All package1 js and uncompressed.js files, but all files are empty
   ->package2
       All package2 js and uncompressed.js files, but all files are empty 
```

如果我更改`packages::name`为 remove `mynamespace`，则没有空的 js 文件，输出目录结构为：

```
relDir
   ->dojo
   ->dijit
   ->dojox
   ->package1
   ->package2 
```

如何在`mynamespace`不破坏构建工具的情况下将目录放入构建结构中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T23:31:40.877

在挖掘源代码后，我找到了解决方案——而且很简单。需要使用`destLocation`package 指令上的 key。所以：

```
"packages":[
    {
        "name":"dojo",
        "location":"vendor\/dojo\/dojo"
    },
    {
        "name":"dijit",
        "location":"vendor\/dojo\/dijit"
    },
    {
        "name":"dojox",
        "location":"vendor\/dojo\/dojox"
    },
    {
        "name":"mynamespace\/package1",
        "location":"vendor\/mynamespace\/package1",
        "destLocation": "mynamespace\/package1"
    },
    {
        "name":"mynamespace\/package2",
        "location":"vendor\/mynamespace\/package2",
        "destLocation": "mynamespace\/package2"
    }
] 
```

# linux - 使用 iptables 重定向 tcp 服务

> ID：11964439
> 
> 赞同：0
> 
> 时间：2012-08-15T05:14:52.360
> 
> 标签：linux, iptables, nat

我正在尝试设置代理以将 tcp 服务重定向到我不希望某些人直接访问它的目标服务器。代理服务器和目标服务器都在互联网上（不在我的本地网络中）。

一些客户端 -------> 代理 -------> 目标服务器（允许）

我在代理服务器上运行了以下脚本，但它不起作用。我在目标服务器上使用了 tcpdump 来查看它是否可以接收数据包，但它没有显示任何内容。所以我猜数据不是从代理发出的。

有什么建议吗？

```
#!/bin/bash

iptables -F;iptables -t nat -F;

iptables -A FORWARD -m state --state ESTABLISHED,RELATED -j ACCEPT

iptables -t nat -A PREROUTING --dst ...
iptables -t nat -A POSTROUTING --dst ...
iptables -t nat -A OUTPUT --dst ... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T07:57:53.063

我解决了。

只需将输出更改为转发方法。

# c++ - 在 qpid cpp 客户端中接收传入消息的异常

> ID：11964449
> 
> 赞同：0
> 
> 时间：2012-08-15T05:16:58.137
> 
> 标签：c++, amqp, qpid

首先感谢提供平台讨论问题。

我发现 qpid cpp 客户端程序有问题。

```
try{
cout << "Trying to open a connection" << endl;
connection.open("1.1.1.8", 10002);
session = connection.newSession();
SubscriptionManager subscriptions(session);
Listener listener(subscriptions);
subscriptions.subscribe(listener, receiver_queue);
//    subscriptions.run();
   subscriptions.start();
   sleep(10);
  }
 catch(const std::exception& error) {
  DEBUG(DBG_ERR, (char *)"AMQP-[%s]: Connection Error [%s].", __func__,error.what());
    connection.close();
   return RESULT_FAILURE;
 } 
```

在 subscriptions.start 之后，如果我向客户端程序发送任何消息，我可以看到消息已收到，但它失败并出现以下异常。

```
terminate called after throwing an instance of 'qpid::Exception'
  what():  Invalid argument (../include/qpid/sys/posix/Mutex.h:116)
Aborted 
```

堆栈说..

```
(gdb) bt
#0  0x0024b424 in __kernel_vsyscall ()
#1  0x00276af1 in raise () from /lib/libc.so.6
#2  0x002783ca in abort () from /lib/libc.so.6
#3  0x0026fdcb in __assert_fail_base () from /lib/libc.so.6
#4  0x0026fe86 in __assert_fail () from /lib/libc.so.6
#5  0x00b683b6 in unlock (this=0x88501fc, name="A.B.ToApplication")
at ../include/qpid/sys/posix/Mutex.h:120
#6  ~ScopedLock (this=0x88501fc, name="A.B.ToApplication") 
at        .    ./include/qpid/sys/Mutex.h:34
#7  qpid::client::Dispatcher::find (this=0x88501fc,  
  name="A.B.ToApplication")
 at qpid/client/Dispatcher.cpp:137
#8  0x00b68752 in qpid::client::Dispatcher::run (this=0x88501fc) at    
qpid/client/Dispatcher.cpp:83
#9  0x00d5b701 in qpid::sys::(anonymous namespace)::runRunnable (p=0x88501fc) at 
qpid/sys/posix/Thread.cpp:35
#10 0x00564a09 in start_thread () from /lib/libpthread.so.0
#11 0x0032915e in clone () from /lib/libc.so.6
(gdb) 
```

我在这里错过了什么吗？

请帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T15:36:33.143

不要使用 SubscriptionManager::start() - 它已损坏，因为它不允许处理异常 - 使用 SubscriptionManager::run() 代替，如果需要，会产生一个新线程来执行此操作。

我还强烈建议您改用 qpid::messaging API，而不是旧的现在已弃用的 qpid::client API。前者更简单，可以更轻松地过渡到 AMQP 1.0，这就是所有新开发的发生地。

# python - python：对没有内置排序，最小值，最大值函数的数字列表进行排序

> ID：11964450
> 
> 赞同：17
> 
> 时间：2012-08-15T05:17:20.417
> 
> 标签：python, sorting, for-loop

如果我有一个每次长度都不同的列表，并且我想将它从最低到最高排序，我会怎么做？

如果我有：`[-5, -23, 5, 0, 23, -6, 23, 67]`

我想：`[-23, -6, -5, 0, 5, 23, 23, 67]`

我从这个开始：

```
data_list = [-5, -23, 5, 0, 23, -6, 23, 67]

new_list = []

minimum = data_list[0]  # arbitrary number in list 

for x in data_list: 
  if x < minimum:
    minimum = value
    new_list.append(i) 
```

但是这只经历了一次，我得到：

```
new_list = [-23] 
```

这就是我卡住的地方。

如何`len(new_list) = len(data_list)`在不使用内置最大、最小、排序函数的情况下继续循环直到（即所有数字都在新列表中）对所有内容进行排序？我也不确定是否有必要创建一个新列表。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-08-15T05:34:54.560

我猜你正在尝试做这样的事情：

```
data_list = [-5, -23, 5, 0, 23, -6, 23, 67]
new_list = []

while data_list:
    minimum = data_list[0]  # arbitrary number in list 
    for x in data_list: 
        if x < minimum:
            minimum = x
    new_list.append(minimum)
    data_list.remove(minimum)    

print new_list 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2018-03-29T18:15:26.797

```
l = [64, 25, 12, 22, 11, 1,2,44,3,122, 23, 34]

for i in range(len(l)):
    for j in range(i + 1, len(l)):

        if l[i] > l[j]:
           l[i], l[j] = l[j], l[i]

print l 
```

输出：

```
[1, 2, 3, 11, 12, 22, 23, 25, 34, 44, 64, 122] 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-09-13T18:13:50.003

这是我一直在尝试的东西。（插入排序-不是最好的排序方式，但确实有效）

```
def sort(list):
    for index in range(1,len(list)):
        value = list[index]
        i = index-1
        while i>=0:
            if value < list[i]:
                list[i+1] = list[i]
                list[i] = value
                i -= 1
            else:
                break 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-08-15T08:10:24.887

这严格遵循您不使用`sort()`,的要求`min()`，`max()`但也通过不重新发明轮子来使用 Python 最佳实践。

```
data_list = [-5, -23, 5, 0, 23, -6, 23, 67]
import heapq
heapq.heapify(data_list)
new_list = []
while data_list:
    new_list.append(heapq.heappop(data_list))) 
```

我建议查看 Python 库`heapq.py`以了解它是如何工作的。Heapsort 是一种非常有趣的排序算法，因为它可以让您“排序”一个无限的流，即您可以快速获取当前最小的项目，还可以有效地将新项目添加到要排序的数据中。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-10-10T07:42:50.810

这行得通！

```
def sorting(li):
    for i in range(len(li)):
        for j in range(len(li)):
            if li[i] < li[j]:
                li[j],li[i] = li[i],li[j]
    return li

listToSort = [22,11,23,1,100,24,3,101,2,4]
print(sorting(listToSort)) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-15T05:20:41.183

```
def bubble_sort(seq):
    """Inefficiently sort the mutable sequence (list) in place.
       seq MUST BE A MUTABLE SEQUENCE.

       As with list.sort() and random.shuffle this does NOT return 
    """
    changed = True
    while changed:
        changed = False
        for i in xrange(len(seq) - 1):
            if seq[i] > seq[i+1]:
                seq[i], seq[i+1] = seq[i+1], seq[i]
                changed = True
    return None

if __name__ == "__main__":
   """Sample usage and simple test suite"""

   from random import shuffle

   testset = range(100)
   testcase = testset[:] # make a copy
   shuffle(testcase)
   assert testcase != testset  # we've shuffled it
   bubble_sort(testcase)
   assert testcase == testset  # we've unshuffled it back into a copy 
```

来自： [http ://rosettacode.org/wiki/Bubble_Sort#Python](http://rosettacode.org/wiki/Bubble_Sort#Python)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-08-15T05:29:15.360

这是一个[不是很有效](http://en.wiktionary.org/wiki/heinous)的排序算法:)

```
>>> data_list = [-5, -23, 5, 0, 23, -6, 23, 67]
>>> from itertools import permutations
>>> for p in permutations(data_list):
...     if all(i<=j for i,j in zip(p,p[1:])):
...         print p
...         break
... 
(-23, -6, -5, 0, 5, 23, 23, 67) 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-08-08T12:37:26.817

尝试排序列表，char 有 ascii 码，同样可以用于排序 char 列表。

```
aw=[1,2,2,1,1,3,5,342,345,56,2,35,436,6,576,54,76,47,658,8758,87,878]
for i in range(aw.__len__()):
    for j in range(aw.__len__()):
        if aw[i] < aw[j] :aw[i],aw[j]=aw[j],aw[i] 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2019-03-29T05:03:15.283

```
data = [3, 1, 5, 2, 4]
n = len(data)
    for i in range(n):
        for j in range(1,n):
            if data[j-1] > data[j]:
                (data[j-1], data[j]) = (data[j], data[j-1])
    print(data) 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2019-07-10T20:24:09.153

```
# Your current setup
data_list = [-5, -23, 5, 0, 23, -6, 23, 67]
new_list  = []

# Sort function
for i in data_list:
    new_list = [ x for x in new_list if i > x ] + [i] + [ x for x in new_list if i <= x ] 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-09-12T22:25:26.407

我的方法——

```
s = [-5, -23, 5, 0, 23, -6, 23, 67]
nl = []
for i in range(len(s)):
    a = min(s)
    nl.append(a)
    s.remove(a)

print nl 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2015-10-06T02:59:55.207

解决方案

```
mylist = [1, 6, 7, 8, 1, 10, 15, 9]
print(mylist)
n = len(mylist)
for i in range(n):
    for j in range(1, n-i):
        if mylist[j-1] > mylist[j]:
             (mylist[j-1], mylist[j]) = (mylist[j], mylist[j-1])
print(mylist) 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2016-09-08T21:33:40.557

这是一个更易读*的就地* [插入排序](https://en.wikipedia.org/wiki/Insertion_sort)算法示例。

```
a = [3, 1, 5, 2, 4]

for i in a[1:]:
    j = a.index(i)
    while j > 0 and a[j-1] > a[j]:
        a[j], a[j-1] = a[j-1], a[j]
        j = j - 1 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2016-09-18T12:48:54.177

```
def my_sort(lst):
    a = []
    for i in range(len(lst)):
        a.append(min(lst))
        lst.remove(min(lst))
    return a

def my_revers_sort(lst):#in revers!!!!!
    a = []
    for i in range(len(lst)):
        a.append(max(lst))
        lst.remove(max(lst))
    return a 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2018-09-07T18:57:01.803

您可以使用 min() 函数轻松完成

```
`def asc(a):
    b=[]
    l=len(a)
    for i in range(l):
        x=min(a)
        b.append(x)
        a.remove(x)
    return b
 print asc([2,5,8,7,44,54,23])` 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2019-10-16T11:03:30.200

```
n = int(input("Input list lenght: "))
lista = []
for i in range (1,n+1):
    print ("A[",i,"]=")
    ele = int(input())
    lista.append(ele)
print("The list is: ",lista)
invers = True
while invers == True:
    invers = False 
    for i in range (n-1):
        if lista[i]>lista[i+1]:
            c=lista[i+1]
            lista[i+1]=lista[i]
            lista[i]=c
            invers = True
print("The sorted list is: ",lista) 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2019-12-12T17:31:40.210

将值从第一个位置交换到列表的末尾，此代码循环 (n*n-1)/2 次。每次它从零索引开始将较大的值推送到较大的索引。

```
list2 = [40,-5,10,2,0,-4,-10]
for l in range(len(list2)):
    for k in range(l+1,len(list2)):
        if list2[k] < list2[l]:
            list2[k] , list2[l] = list2[l], list2[k]
print(list2) 
```

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2020-10-10T08:08:17.667

由于复杂性无关紧要，我向您介绍... BogoSort：

```
from random import shuffle

def is_sorted(ls):
    for idx in range(len(ls)-1):
        if x[idx] > x[idx + 1]:
          return False
    return True

def sort(ls):
    while not is_sorted(ls):
        shuffle(ls)
    return ls

ls = list(range(5))
shuffle(ls)

print(
    "Original: ",
    ls
)

print(
    "Sorted: ",
    sorted(ls)
) 
```

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2021-01-21T20:06:18.070

这是未排序的列表，我们想要的是 1234567

```
list = [3,1,2,5,4,7,6]

def sort(list):
    for i in range(len(list)-1):
        if list[i] > list[i+1]:
            a = list[i]
            list[i] = list[i+1]
            list[i+1] = a
        print(list)       

sort(list) 
```

以最简单的方法对数组进行排序。我正在使用当前的冒泡排序，即：它检查前 2 个位置并将最小的数字向左移动，依此类推。“-n”in loop是为了避免缩进错误，这样做你就会明白。

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2021-06-20T16:40:16.017

您可以使用迭代方法与递归函数一一进行比较。如果要降序，则按升序排列结果，然后将条件从更改`if l[i]>l[i+1]`为`if l[i]<l[i+1]`：

```
l=[2,1,3,4,3,2,1,2] 
list_len=len(l)

def fun(l):
    for i in range(list_len):
        if i<list_len-1:
            if l[i]>l[i+1]:
                l[i],l[i+1]=l[i+1],l[i]
                fun(l)
    return l

print(fun(l)) 
```

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2021-10-21T12:12:33.260

```
for i in range (0, len(unsorted_list)):
    for j in range (i,  len(unsorted_list)):
        if unsorted_list[i]> unsorted_list[j]:
            unsorted_list[i], unsorted_list[j] = unsorted_list[j], unsorted_list[i]

print("Sorted list: ", unsorted_list) 
```

输出为： 排序列表：[0, 5, 9, 10, 11, 20, 100, 100]

时间复杂度是二次时间 - O (n^2)

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2022-01-03T15:47:27.980

**将此与 for 循环一起使用**

```
 arr = [1, 5, 0, 0, 9, 10, 9, 3, 2, 3, 5,10]
    new_arr = []
    for index in range(len(arr)):
        index = len(new_arr) - index
        max_val = arr[index]
        for val in arr[index+1:]:
            if val >= max_val:
                max_val = val
        new_arr.append(max_val)
        arr.remove(max_val)
    print(new_arr) 
```

**将此与 while 循环一起使用**

```
 arr = [1, 5, 0, 0, 9, 10, 9, 3, 2, 3, 5,10]
    new_arr = []
    while arr:
        max_val = arr[0]
        for x in arr:
            if x >= max_val:
                max_val = x
        new_arr.append(max_val)
        arr.remove(max_val)

    print(new_arr) 
```

**有功能，对于 ASC 使用 reverse = 1 和 -1 用于 DESC**

```
 def custom_sorting(numbers, new_list, reverse=-1):
        for i in range(len(numbers)):
            first_num = numbers[0]
            for num in numbers:
                if num < first_num and reverse < 0:
                    first_num = num
                if num > first_num and reverse > 0:
                    first_num = num

            numbers.remove(first_num)
            new_list.append(first_num)

    if __name__ == "__main__":
        data = [5, 4, 2, 8, 70, 0, 0, 96, 5]
        newlist = []
        custom_sorting(data, newlist, reverse=1)
        print(newlist)``` 
```

* * *

## 回答 #23

> 赞同：-1
> 
> 时间：2012-08-15T05:22:02.037

> 我如何继续循环直到 len(new_list) = len(data_list)

```
while len(new_list) != len(data_list):
    # ... 
```

也许像这样？

不，没有必要创建一个新列表；大多数排序算法通过更改列表来工作。

您可能会尝试使用单独的列表进行[选择排序。](http://en.wikipedia.org/wiki/Selection_sort)有关该排序算法的更多信息，请参阅 Wikipedia 文章，您将了解它如何与单个列表一起工作，以及它的效率如何（剧透：它不是）。

* * *

## 回答 #24

> 赞同：-3
> 
> 时间：2016-11-01T20:55:47.657

```
def getIndexOfMaximum(list1):
    index = 0
    emptyList = []
    value = list1[0]
    c = 0
    while (c == 0):
        for cell in list1:
            index += 1
            if (cell >= value):
                value = cell
                hold = index -1
            if (len(list1) == index):
                emptyList += [value]
                del list1[hold]
                index = 0
                value = 0
                if (len(list1) == 1):
                    newList = emptyList + list1
                    del list1[index]
                    c = 1
    return newList
print(getIndexOfMaximum([2,5,8,7,44,54,23]))

#TRY THIS!!! 
```

# php - 查询中的 if 语句？

> ID：11964454
> 
> 赞同：1
> 
> 时间：2012-08-15T05:17:40.827
> 
> 标签：php, mysql, sql

我的数据库上有 3 个表：

## 用户：

```
id  ------- username
1            user1  
2            user2 
```

## 作家

```
id  ------- name
4           writer4
5           writer5 
8           writer8 
```

## 下列的 ：

```
user_id  -----  follow  
1               5
1               8
2               5 
```

所以，现在 User1 跟随 writer5 和 writer8 ，而 user2 跟随 writer5

我以 user1 身份登录我的应用程序，当我进入作者页面时，我会得到数据库中所有作者的列表.. 我只想在每个作者面前显示我是否正在关注这个作者..

列出作家页面示例：

```
writer4     :follow
writer5     :unfollow (i'm following him now)
writer8     :unfollow (i'm following him now)
writer100     :follow 
```

我的问题是：如果我没有（作为用户 1）关注此作者，是否有查询来获取作者的完整列表并给我一个 value=0

有任何想法吗 ？谢谢 ..

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-15T05:22:07.040

```
SELECT
 writers.username,
 IFNULL(following.user_id,0) AS isFollowing
FROM
 writers
 LEFT JOIN following ON writers.id = following.follow 
```

然后在 php 中，您可以检查`$results['isFollowing']`是 true (>=1) 还是 false (0) 并显示您需要的内容。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-15T05:22:25.060

我建议您在用户 ID 的键上加入以下作者：

```
select w.*, f.user_id from writers w
left outer join following f on f.follow = w.id 
and f.user_id = <INSERT USER ID HERE> 
```

这应该返回所有作者的列表，并会为您关注的作者显示您的用户 ID，对于您不关注的作者显示 null。然后，您将基于您的关注/取消关注逻辑。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-15T05:33:26.393

您需要使用`CROSS JOIN`才能让用户获得所有作家。

```
SELECT b.name,if(c.userid is null, 'follow', 'unfollow') result
FROM users a
        CROSS JOIN writers b
        LEFT JOIN following c
          on a.id = c.userid AND
             b.id = c.follows
WHERE a.id = 1 
```

# [*SQLFiddle 演示*](http://sqlfiddle.com/#!2/8d586/25)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-15T06:23:05.487

PL/SQL 支持条件语句、迭代语句等编程语言特性。

编程结构类似于您在 Java 和 C++ 等编程语言中使用的方式。在本节中，我将向您介绍如何在 PL/SQL 编程中使用条件语句的语法。

```
IF condition 

THEN 

 statement 1; 

ELSE 

 statement 2; 

END IF; 
```

[如需进一步参考，请查看此链接](http://www.plsqltutorial.com/plsql-if-statement/)

# javascript - Javascript 随机数组

> ID：11964458
> 
> 赞同：0
> 
> 时间：2012-08-15T05:18:44.077
> 
> 标签：javascript

我不得不承认我是 JavaScript 的新手。过去几年一直在硬件上工作，但一直跟不上。

无论如何，我正在尝试使用 Tubular ( [http://www.seanmccambridge.com/tubular/](http://www.seanmccambridge.com/tubular/) )，但我试图从一组视频 ID 中进行选择，而不仅仅是一个。例如，刷新页面会加载不同的视频 ID，并按关系加载不同的视频。

这是实际的功能：

```
$().ready(function() {
$('body').tubular('ID-GOES-HERE','wrapper'); 
```

我自己尝试过这样做，但最后我只是设法完全打破了它。欢迎任何建议！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T05:21:56.590

就像是...

```
var myIDs = [1,2,3,4,5,6,7,8,9,0];
var selectedID = myIDs[Math.floor(Math.random() * myIDs.length)]; 
```

这将为您提供从数组中随机选择的项目

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T05:24:32.893

```
var videoIDs = [1,2,3,4,5,6];
var randomID = videoIDs[Math.floor(Math.random() * videoIDs.length)];

$(document).ready(function() {
    $('body').tubular(randomID,'wrapper'); 
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T05:25:16.273

如果你想在 1 到 6 之间得到，你会放

```
Math.floor(Math.random() * 6) + 1 
```

您可以将 1 和 6 替换为该数组中有多少视频，或者如果您希望它是动态的，可以使用 array.length 函数。

试试看它是否适合你。

# java - GWT requestfactory：无法获取 EntityProxy 内的 valueproxy 列表

> ID：11964465
> 
> 赞同：1
> 
> 时间：2012-08-15T05:19:06.933
> 
> 标签：java, gwt, requestfactory, objectify

```
class MyEntityProxy
{
    @Load
    MyEntityProxy2 ep;

}
public class MyEntityProxy2
{
    @Embed
    List<MyValueProxy> values;

}
class MyValueProxy
{
    String name;
    String value;
} 
```

在客户端，我希望发送一个请求以获取 的列表`MyEntityProxy`，`MyEntityProxy2`并返回其值列表。从调试中我可以在服务器端看到所有`MyValueProxy`列表已被检索并返回。但在客户端，那里没有 valueProxy。eg.getMyValueProxies()==null

`MyEntityProxy`我在请求列表时附加路径信息，如下所示：

```
String[] paths=new String[]{"ep","ep.values"}; 
```

`MyEntityProxy2`如果我直接使用路径（“ ”）发送请求以获取列表，`values`并且所有值都可以成功返回。

有什么想法吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T03:44:31.353

Ümit 是对的，上面的代码可以，其他逻辑错误导致了这个问题，感谢 Umit 的大力提醒。

# cross-compiling - 为什么 libtool 会抛出“不支持的硬编码属性”错误，它们是什么意思？

> ID：11964466
> 
> 赞同：4
> 
> 时间：2012-08-15T05:19:18.083
> 
> 标签：cross-compiling, gettext, libtool, hardcode

我正在[`gettext-0.18.2`](http://www.gnu.org/software/gettext/)为 Windows 进行交叉编译，但遇到了一些问题。在其中一个共享库的链接阶段，`libtool`给我以下错误消息：

```
/bin/bash ../libtool --tag=CXX ...
libtool: link: unsupported hardcode properties
libtool: link: See the libtool documentation for more information.
libtool: link: Fatal configuration error. 
```

[您可以在此处查看](https://launchpadlibrarian.net/112732258/buildlog_ubuntu-precise-i386.gettext_0.18.2-0~201208141836~precise1_FAILEDTOBUILD.txt.gz)`libtool`包含命令的完整构建日志（错误位于页面的最底部）。

什么会导致这个错误，这是什么意思？尽管错误消息中有声明，但我似乎无法在文档中找到有关此错误的任何信息。

另外值得注意的是：真正让这件事变得奇怪的是，[在 Ubuntu 12.10 (Quantal) 上构建成功且没有错误](https://code.launchpad.net/~george-edison55/+archive/win-cross/+build/3724191/+files/buildlog_ubuntu-quantal-i386.gettext_0.18.2-0%7E201208141838%7Equantal1_BUILDING.txt.gz)……但在当前 LTS 版本 Ubuntu 12.04 上却失败了。

* * *

**附加：**我对`libtool`成功的构建和失败的构建之间的调用行进行了比较。差异看起来像这样：

![在此处输入图像描述](../Images/9acb82cb389451eea9fb769f2e96a875.png)

因此，显然命令中省略了 C++ 编译器。这会导致上述错误吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T06:04:56.923

## 啊哈！

事实证明，这个问题非常微妙。Ubuntu 12.10 (Quantal) 中的[mingw-w64软件包将![安装 mingw-w64](../Images/2594efb29bd54d4a1773ff6d0e017dda.png)](https://apps.ubuntu.com/cat/applications/mingw-w64)[g++-mingw-w64![安装 g++-mingw-w64](../Images/2594efb29bd54d4a1773ff6d0e017dda.png)](https://apps.ubuntu.com/cat/applications/g++-mingw-w64)列为依赖项 - 但在 Ubuntu 12.04 (Precise) 中并非如此。所以我需要做的就是指定`g++-mingw-w64`一个构建依赖项。

上面实际错误消息的原因是因为配置脚本找不到交叉编译器工具链的 C++ 编译器：

量子：

```
checking for g++... i686-w64-mingw32-g++
checking whether the C++ compiler (...) works... yes 
```

精确的：

```
checking for g++... i686-w64-mingw32-g++
checking whether the C++ compiler (...) works... no 
```

# javascript - 提交时Javascript验证不起作用

> ID：11964468
> 
> 赞同：0
> 
> 时间：2012-08-15T05:19:19.817
> 
> 标签：javascript, html

我一直在开发我的第一个网站，但遇到了 javascript 验证脚本的问题。我的代码：

```
<html>
    <head>
      <title>Territory</title>
    </head>
    <body>

      <script type="text/javascript"> //Main Javascript function giving me issues
    function validate(form)
    {
      fail = validateTerrNum(document.checkOut.numberOut.value);
      fail += validateFirstName(document.checkOut.fName.value);
      fail += validateLastName(document.checkOut.lName.value);
      if (fail == "") 
    return true;
      else 
      {
        alert(fail);
        return false;
      }
    }
        </script>
        <script type="text/javascript>
        function validateTerrNumber(field)
        {
     if (field == "") return "No territory number was entered. \n";
     else if (field.length > 3)
    return "Territory numbers must be less than four characters. \n";
    else if (/[^0-9]/.test(field))
        return "Only 0-9 allowed in territory number. \n";
    return "";
        }

        //Note: Does not sanitize string
        function validateFirstName(field)
        {
     if (field == "") return "No first name was entered. \n";
     return "";
        }

        //Again, note that this function does not sanitize string
        function validateLastName(field)
        {
     if (field == "") return "Not last name was entered. \n";
     return "";
        }
        </script>

        <table border="0" cellpadding="2" cellspacing="5">
     <th colspan="2" align="center">Check Out</th>
      <form name="checkOut" method="post" onSubmit="validate(this)"> 
    <tr><td>Territory Number</td><td><input type="text" name="numberOut"     tabindex="1" maxlength="3" size="3" /></td>
                    </tr><tr><td>First Name of Holder</td><td><input type="text" name="fName" tabindex="2" maxlength="15"/></td>
                    </tr><tr><td>Last Name of Holder</td><td><input type="text" name="lName" tabindex="3" maxlength="15" /></td>
                    </tr><tr><td><input type ="checkbox" name="specialC" tabindex="4" value="Yes"/> Special Campaign</td>
                    </tr><tr><td></td><td><input type="submit" value="Check Out" /></td>
                </form>
            </table>
</body>
</html> 
```

它显然格式不正确 - 复制和粘贴的结果。更具体地说，这个问题与 javascript 验证有关。当我点击“签出”时，当我输入错误值时，验证不会阻止它。该脚本非常简单，但由于某种原因，我无法弄清楚它发生了什么（我对javascript相当陌生）。

我知道问题不在于我的浏览器，因为我在其中运行了许多 javascript。我唯一能想到的是表单没有方法。这将是另一个验证，但用 php 编写 - javascript 实际上只是客户端的预验证。

任何帮助，将不胜感激。

-Mlagma

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T05:30:41.070

要在验证失败后停止提交，您需要：

```
onSubmit="return validate(this)" 
```

而不是您当前的代码：

```
onSubmit="validate(this)" 
```

您的`validate()`函数已经返回`true`or `false`，但这些值并未从事件处理程序本身返回。如果您将引号之间的代码`onSubmit=""`视为函数的主体，这是有道理的。

而且，正如 Teemu 指出的那样，您的`validate()`函数会尝试调用一个调用的函数`validateTerrNum`，而实际上您已经将该函数声明为`validateTerrNumber`.

纠正这些问题后，您可以看到它在这里工作：http: [//jsfiddle.net/nnnnnn/Wvcy3/](http://jsfiddle.net/nnnnnn/Wvcy3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T05:30:16.107

你有这条线`validate()`：

```
fail = validateTerrNum(document.checkOut.numberOut.value); 
```

还有这个功能：

```
function validateTerrNumber(field){... 
```

`document.checkOut`也不是`undefined`元素（依赖于浏​​览`form`器？？？），最好改为使用`document.getElementById('numberOut').value`，（与`fName`and相同`lName`）。当然，您需要`id`在 HTML 中添加这些 s。

# c++ - 如何取回从 Eclipse CDT 中的构建配置中排除的文件？

> ID：11964469
> 
> 赞同：10
> 
> 时间：2012-08-15T05:19:20.737
> 
> 标签：c++, eclipse, configuration, eclipse-cdt

使用 Indigo 和托管构建 C++ 项目，我右键单击源文件并选择`Resource Configurations->Exclude From Build...`，文件立即消失。向下滚动会在源文件列表的底部显示它，并带有一个新的灰色图标。现在我该如何取回它？该`Reset to Default...`选项总是变暗。右键单击排除的文件仍然只显示该`Exclude From Build...`选项。有`Include in Build`什么地方可以选择吗？我意识到我可以转到 .cproject 文件并手动将其重新编辑，但我认为必须有一种方法可以从 IDE 执行此操作。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2015-03-06T14:01:52.907

是的，这是一个老问题。但人们确实会在多年后寻找答案。

有一个简单的方法，但它是反直觉的。右键单击排除的项目，选择“从构建中排除”，然后在出现的对话框中，**取消选中**您希望该项目返回的构建。请注意方便的“取消全选”按钮。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-08-07T15:25:59.373

在 Eclipse 中，没有类似的方法来重新包含资源，例如：

*   资源配置 -> 从构建中重新包含

你需要进入项目属性（Alt+Enter）然后去：

```
C/C++ General -> Paths and Symbols 
```

选择选项卡

```
Source Location 
```

并展开您的项目文件夹：在这里您可以选择要删除的过滤器，然后单击“**编辑过滤器**”，然后单击“**删除**”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T16:27:18.283

虽然我仍然不知道如何取回已被排除的文件。我发现最好只添加一个新文件夹，然后将该文件夹标记为已排除。然后可以通过将文件拖入此文件夹来排除文件，并通过将它们拖回原始文件夹来包含文件。

# android - Facebook api 在我的模拟器中不起作用？

> ID：11964470
> 
> 赞同：0
> 
> 时间：2012-08-15T05:19:55.547
> 
> 标签：android, facebook

我已经在我的项目中实现了使用 facebook 登录。代码如下：

```
public class login extends Activity{
ImageView fbtn;
private SharedPreferences mPrefs;
static Facebook facebook = new Facebook("271089732997803");
String access_token;
long expires;
@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.yf_login1);
    mPrefs = getPreferences(MODE_PRIVATE);
    access_token = mPrefs.getString("access_token", null);
    expires = mPrefs.getLong("access_expires", 0);
    fbtn = (ImageView)findViewById(R.id.fbtn);
    fbtn.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub

            if(access_token != null) {
                facebook.setAccessToken(access_token);
                Log.v("access_token", access_token);
            }
            if(expires != 0) {
                facebook.setAccessExpires(expires);
                Log.i("expires", ""+expires);
            }
            if (!facebook.isSessionValid()) {

                facebook.authorize(login.this,new String[] {}, new DialogListener() {
                    @Override
                    public void onComplete(Bundle values) {
                        SharedPreferences.Editor editor = mPrefs.edit();
                        editor.putString("access_token", facebook.getAccessToken());
                        editor.putLong("access_expires", facebook.getAccessExpires());
                        editor.commit();

                    }

                    @Override
                    public void onFacebookError(FacebookError error) {

                    }

                    @Override
                    public void onError(DialogError e) {

                    }

                    @Override
                    public void onCancel() {

                    }
            });
            }
            else{
                 startActivity(new Intent(login.this,ChooseTeam.class));
            }

        }
    });
}

@Override
public void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);

    facebook.authorizeCallback(requestCode, resultCode, data);
}

@Override
public void onResume() {    
    super.onResume();
    facebook.extendAccessTokenIfNeeded(this, null);
} 
```

现在我的问题是，当我单击 fb 按钮时，它将加载进度条，并在 30-40 秒后返回相同的页面。

最重要的是，当我在另一台电脑上运行相同的项目时，它会完美运行，打开 facebook 的登录对话框并在我的偏好中获得值。但就我而言，我什至无法获得数据中的偏好。

我的模拟器会出现什么问题？我正在使用eclipse galilio和sdk20。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T09:25:09.547

我得到了解决方案，实际上我的防病毒软件被模拟器阻止了互联网。所以我已经卸载了防病毒软件并运行了该应用程序并且它可以工作。

谢谢大家帮助我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T06:04:07.730

试试这个.. 并使用此权限在 Facebook 中共享..

私有字符串[] mPermissions={"publish_stream"};

```
mFb.authorize(SettingActivity.this, mPermissions,new com.fbintegration.Facebook.DialogListener()
                        {

                            public void onFacebookError(FacebookError e)
                            {

                            }

                                public void onError(DialogError e) 
                                {

                                }

                                public void onComplete(Bundle values) 
                                {

                                    SessionStore.save(mFb, getApplicationContext());

                                }

                            public void onCancel() 
                            {
                                // TODO Auto-generated method stub

                            }
                        }); 
```

这是 Facebook 连接器类....

```
public class FacebookConnector
{

    private Facebook facebook = null;
    private Context context;
    private String[] permissions;
    private Handler mHandler;
    private Activity activity;
    //private SessionListener mSessionListener = new SessionListener();;

    public FacebookConnector(String appId,Activity activity,Context context,String[] permissions) 
    {
        this.facebook = new Facebook(appId);

        SessionStore.restore(facebook, context);

        this.context=context;
        this.permissions=permissions;
        this.mHandler = new Handler();
        this.activity=activity;
    }

    public void login() 
    {
        if (!facebook.isSessionValid()) 
        {
            facebook.authorize(this.activity, this.permissions,new LoginDialogListener());
        }
    }

    /*public void logout() 
    {
        SessionEvents.onLogoutBegin();
        AsyncFacebookRunner asyncRunner = new AsyncFacebookRunner(this.facebook);
        asyncRunner.logout(this.context, new LogoutRequestListener());
    }*/

    public void postMessageOnWall(String msg)
    {
        if (facebook.isSessionValid())
        {
            Bundle parameters = new Bundle();
            parameters.putString("message", msg);
            try
            {
                //JSONObject response=Util.parseJson(facebook.request("me/feed", parameters,"POST"));
                String response = facebook.request("me/feed", parameters,"POST");
                System.out.println(response);
            } 
            catch (IOException e) 
            {
                e.printStackTrace();
            }
        }
        else
        {

        }
    }   

    private final class LoginDialogListener implements DialogListener
    {
        public void onComplete(Bundle values) 
        {
            SessionEvents.onLoginSuccess();
        }

        public void onFacebookError(FacebookError error)
        {
            SessionEvents.onLoginError(error.getMessage());
        }

        public void onError(DialogError error)
        {
            SessionEvents.onLoginError(error.getMessage());
        }

        public void onCancel() 
        {
            SessionEvents.onLoginError("Action Canceled");
        }
    }

    private class SessionListener implements AuthListener, LogoutListener
    {

        public void onAuthSucceed()
        {
            SessionStore.save(facebook, context);
        }

        public void onAuthFail(String error) {
        }

        public void onLogoutBegin() {           
        }

        public void onLogoutFinish() {
            SessionStore.clear(context);
        }
    }

    public Facebook getFacebook() 
    {
        return this.facebook;
    }
} 
```

# mysql - 安装 PHP Recess 框架，报错：Can't connect to local MySQL server through socket '/tmp/mysql.sock'

> ID：11964472
> 
> 赞同：2
> 
> 时间：2012-08-15T05:20:31.173
> 
> 标签：mysql, amazon-ec2, amazon-web-services, bitnami, recess

尝试 使用 Bitnami AMI 在 EC2 实例上安装[Recess API 框架。](http://www.recessframework.org/page/installation)我得到错误

```
Error connecting to data source: SQLSTATE[HY000] [2002] Can't connect to local MySQL server through socket '/tmp/mysql.sock' (2) 
```

我尝试了这个[解决方案](http://www.tech-recipes.com/rx/762/solve-cant-connect-to-local-mysql-server-through-socket-tmpmysqlsock/)，但事实证明中的`[client]`部分`my.cnf`已经有指向位置的套接字`mysql.sock`，通过使用验证`sudo find / -name mysql.sock`

MySQL 在我发现的所有方面都适用于我，所以我很好奇它是否需要在 Recess 中配置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T14:31:43.963

在 BitNami AMI 中，MySQL 套接字是 /opt/bitnami/mysql/tmp/mysql.sock。

这是官方的 BitNami 文档：[http](http://wiki.bitnami.org/Components/MySQL#What_is_the_default_configuration.3f) ://wiki.bitnami.org/Components/MySQL#What_is_the_default_configuration.3f 。在 AMI 中，安装目录（文档中的 installdir）是 /opt/bitnami

# c# - 用动态内容替换字符串中的占位符

> ID：11964473
> 
> 赞同：-2
> 
> 时间：2012-08-15T05:20:35.090
> 
> 标签：c#

我想使用 .split 函数或任何允许我读取文本文件并获取在应用程序中创建的值并将它们放入文本文件中拆分符号所在的特定区域的函数。

例如：示例文本文件：template.txt 我的名字是*。我 * 岁。我的出生日期是 *。

`textbox1 = Jim` `textbox2 = 25` `textbox3 = 08/14/2012`

我希望将 textbox1 到 textbox3 中的值添加到一个新的文本文件中，其中带有“*”符号处的 template.txt 行。有什么想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-15T05:26:18.743

您可以以这种格式保存文本文件中的文本

> 我的名字是{0}。我 {1} 岁。我出生于 {2}

然后你将它加载到字符串并格式化它`string.Format("My name is {0}. I am {1} year(s) old. I was born on {2}", textbox1.Text, textbox2.Text, textbox3.Text)`

之后，您更改了字符串，再次将其保存到文本文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T05:24:27.833

不确定问题是否清楚，您实际上想要做什么，拆分字符串或合并来自不同文本框的文本并将这些行放入文本文件中。

# xamarin.android - android 安装的初始单声道在第一个屏幕后退出，没有错误消息

> ID：11964475
> 
> 赞同：3
> 
> 时间：2012-08-15T05:21:08.490
> 
> 标签：xamarin.android, failed-installation, installation-package

我下载了 Mono for android 的试用版并尝试在 Windows 7 上安装。在第一个确认页面后，安装程序退出且没有错误消息。

我在网上搜索过，一无所获。我试图取消阻止该文件并将其移动到桌面，然后单击该框以管理员权限运行。我也尝试下载并运行并下载并保存。

我在中国，不知道防火墙能不能影响这个？？？

没有错误消息，我不知道如何继续。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T07:39:38.400

有时这可能是由网络连接问题或代理引起的。您可以尝试手动安装组件：

1.  JDK 1.6：[http](http://www.oracle.com/technetwork/java/javase/downloads/jdk-6u31-download-1501634.html) ://www.oracle.com/technetwork/java/javase/downloads/jdk-6u31-download-1501634.html 请从上面的列表中选择 jdk-6u31-windows-i586.exe 安装程序。
2.  Android SDK： http: [//dl.google.com/android/installer_r21-windows.exe](http://dl.google.com/android/installer_r21-windows.exe) 主安装完成后，请打开SDK Manager并安装以下平台API：7,8,10,12,14
3.  GTK#：http: [//download.xamarin.com/Installer/gtk-sharp-2.12.10.win32.msi](http://download.xamarin.com/Installer/gtk-sharp-2.12.10.win32.msi)
4.  MonoDevelop：http: [//download.xamarin.com/monodevelop/Windows/MonoDevelop-3.0.5.msi](http://download.xamarin.com/monodevelop/Windows/MonoDevelop-3.0.5.msi)
5.  适用于 Android SDK 的 Mono：http: [//download.xamarin.com/MonoforAndroid/Windows/mono-android-4.2.7.15330979.msi](http://download.xamarin.com/MonoforAndroid/Windows/mono-android-4.2.7.15330979.msi)

如果您不需要/不想使用 MonoDevelop 并改用 VisualStudio（2010 Professional 或更高版本），则可以跳过第 3 步和第 4 步。在这种情况下，您必须先安装 VS，然后才能继续第 5 步。

# c++ - 在两个单独的应用程序之间共享 dll 中的堆内存

> ID：11964483
> 
> 赞同：2
> 
> 时间：2012-08-15T05:22:02.763
> 
> 标签：c++, dll, shared-memory

对不起，如果这个问题之前已经回答过；然而，所有类似的问题似乎都与 DLL 中的全局或静态变量以及这些变量的共享有关。

是否可以在两个单独的应用程序之间共享一个 dll 实例？

我有两个应用程序（appA、appB）和一个 DLL（theDLL）。

我正在查看 appA 是否可以调用 DLL 中的函数，然后在堆上创建一个变量并将其存储在 DLL 中。稍后，我想让 appB 连接到 DLL 并能够访问之前创建的变量。再次抱歉，如果此答案与 dll 中的静态和全局变量相同。

这是一些伪代码：

(DLL)

```
class VariableHolder
{
 public:
     void StoreVariable(int x)
     {
        mInt = new int(x);
     }

     int GetVariable()
     {
        return mInt;
     }
 private:
     int mInt;
} 
```

(appA)

```
int main()
{
    ...
    (assuming we got access to a VariableHolder singleton created in theDLL)
    theVarialbeHolder.StoreVariable(5);
    ... 
} 
```

(应用程序B)

```
int main()
{
    ...
    (assuming we got access to a VariableHolder singleton created in theDLL)
    if (theVarialbeHolder.GetVariable() == 5)
    {
        cout << "Hurray, how did you know?";
    }
    ... 
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T05:28:09.860

这完全是不可能的——因为两个进程的地址空间不同（因为它们是虚拟的，由内核创建），所以一个有效的指针在另一个中不起作用。但是，您可以使用共享内存在进程之间传输原始标量数据（字符串、整数）——[方法如下。](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366551%28v=vs.85%29.aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-15T05:50:58.967

是的，这可以使用共享内存。不过，它不需要使用共享 DLL。

根据操作，方法有些不同：

*   在 Windows 上，共享文件用于映射到内存中（请参阅[创建命名共享内存](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366551%28v=vs.85%29.aspx)）。

*   在 Linux 和 Unix 上，有创建共享内存区域的直接函数，例如 System V IPC。只是谷歌它。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-16T08:29:52.193

几乎所有现代操作系统上的共享库都是由共享只读可执行文件和数据页实现的，同时映射到使用给定库的任何进程的地址空间。但在 Windows 上（与大多数 Unix 系统相比），这种共享也可以扩展到 DLL 中的读写数据段，因此可以在 DLL 中拥有全局变量，在所有加载了 DLL 的图像之间共享。为了实现这一点，涉及一个两步过程。首先，您告诉编译器将共享变量放在一个新的命名数据段中：

```
#pragma data_seg (".myshared")
int iscalar = 0;
int iarray[10] = { 0 };
#pragma data_seg () 
```

将所有这些变量静态初始化很重要，否则它们将最终进入该`.bss`部分。然后您必须告诉链接器您希望使用该选项拥有`.myshared`具有共享读写属性的部分。`/SECTION:.myshared,RWS`

这种机制比创建和绑定到命名的共享内存对象要简单得多，但它只允许共享静态分配的全局变量——你不能使用它来共享堆上的数据，因为堆是进程私有的。对于任何更复杂的事情，您应该使用共享内存映射，即如 MSDN 页面上所示，在 H2CO3 的答案中链接。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-15T05:47:35.473

这是不可能的。DLL 可以在 2 进程中共享，但数据不是。共享的是代码或程序映像（即逻辑或指令），而不是数据。每个 Dll 都映射到加载它的进程的虚拟地址空间，因此数据要么在进程的数据部分上，要么在函数本地的堆栈上。当一个进程正在执行时，其他进程数据的地址是不可见的。

您需要阅读虚拟内存以及内存管理单元 (MMU) 的工作原理。操作系统、CPU、MMU 协同工作使之成​​为可能。可靠的方法是进程间通信。您可以使用共享内存，其中每个进程都有一个虚拟地址形式的数据副本，但它最终映射到实际内存中的相同位置，即实际地址。操作系统使之成为可能。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-15T05:31:31.403

正如@H2CO3 指出的那样，由于地址空间不同，这是不可能的。

但是，从您的问题来看，您似乎需要围绕该 DLL 或服务的代理进程，然后不同的进程可以连接到该代理进程/exe 并使用共享内存。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-15T06:01:18.447

您必须使用共享内存（如上所述）。

我建议使用 boost 进程间库。请参阅有关共享内存的文档 -[进程之间的共享内存](http://www.boost.org/doc/libs/1_50_0/doc/html/interprocess/sharedmemorybetweenprocesses.html)

# php - 带附件的 PHP 电子邮件（存储的用户名）

> ID：11964486
> 
> 赞同：0
> 
> 时间：2012-08-15T05:22:25.120
> 
> 标签：php, email, session-variables, email-attachments

我（最终）完成了一个 php 脚本，用户可以在其中上传文件并发送给我，但我似乎无法将他/她已经存储的电子邮件帐户用于 FROM 字段。邮件从来没有发给我...

这就是我所拥有的。当他们登录/注册时，我将用户的电子邮件存储为会话。

```
session_save_path('/home/users/web/...'); 
session_start();
$_SESSION['users'] = $email; 
```

然后，我有一个用户页面，它调用会话并将信息显示为“以 {$_SESSION['users']} 登录”

然后我为用户创建了一个表单来上传文件并向我发送电子邮件：

```
<form method="POST" action="testmail.php" enctype="multipart/form-data" class="form-vertical">
<input name="email" type="hidden" value="'.$_SESSION['users'].'" />

<span class="label label-info">Document Type</span><br>
<input type="text" name="project" class="input-medium"style="width: 350px; height: 30px;" /><br><br>

<span class="label label-info">Upload the Document</span><br><br>
<input type="file" name="attachment[]"><br><br>

<span class="label label-info">Brief Description of Document and Concern</span><br>
<textarea name="description" style="width: 550px; height: 200px;">...</textarea>

<input type="submit" class="btn btn-large btn-success">
</form> 
```

但是，这种形式仅在我省略 "'.$_SESSION['users'].'" 的值时才有效（例如，value="TEST"）。

这是电子邮件 php 脚本：

```
 <?php
    if( $_POST || $_FILES )
    {
            // email fields: to, from, subject, and so on
            // Here 
            $from = $_POST['email'];
            $to = "support@lawcontractor.com";
            $subject = $_POST['project'];
            $message = "This is the message body and to it I will append the attachments.";
            $headers = "From: $from";

            // boundary
            $semi_rand = md5(time());
            $mime_boundary = "==Multipart_Boundary_x{$semi_rand}x";

            // headers for attachment
            $headers .= "\nMIME-Version: 1.0\n" . "Content-Type: multipart/mixed;\n" . " boundary=\"{$mime_boundary}\"";

            // multipart boundary
            $message = "--{$mime_boundary}\n" . "Content-Type: text/plain; charset=\"iso-8859-1\"\n"."Content-Transfer-Encoding: 7bit\n\n" . $message . "\n\n";
            fixFilesArray($_FILES['attachment']);
            foreach ($_FILES['attachment'] as $position => $file) 
            {
                    // should output array with indices name, type, tmp_name, error, size
                    $message .= "--{$mime_boundary}\n";
                    $fp     = @fopen($file['tmp_name'],"rb");
                    $data   = @fread($fp,filesize($file['tmp_name']));
                    @fclose($fp);
                $data = chunk_split(base64_encode($data));
                $message .= "Content-Type: application/octet-stream; name=\"".$file['name']."\"\n"."Content-Description: ".$file['name']."\n" ."Content-Disposition: attachment;\n" . " filename=\"".$file['name']."\";size=".$file['size'].";\n"."Content-Transfer-Encoding: base64\n\n" . $data . "\n\n";
            }
            $message .= "--{$mime_boundary}--";
            $returnpath = "-f" . $from;
            $ok = @mail($to, $subject, $message, $headers, $returnpath);
            if($ok){ return 1; } else { return 0; }
    }
    //This function will correct file array from $_FILES[[file][position]] to $_FILES[[position][file]] .. Very important

    function fixFilesArray(&$files)
    {
            $names = array( 'name' => 1, 'type' => 1, 'tmp_name' => 1, 'error' => 1, 'size' => 1);

            foreach ($files as $key => $part) {
                    // only deal with valid keys and multiple files
                    $key = (string) $key;
                    if (isset($names[$key]) && is_array($part)) {
                            foreach ($part as $position => $value) {
                                    $files[$position][$key] = $value;
                            }
                            // remove old key reference
                            unset($files[$key]);
                    }
            }
    }
    ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T05:26:44.153

尝试更改以下行。

```
<input name="email" type="hidden" value="<?php echo $_SESSION['users'];?>" /> 
```

您必须设置电子邮件的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T05:27:14.547

试试这个：

```
<input name="email" type="hidden" value="<?php echo $_SESSION['users'] ?>" /> 
```

在您的代码中，您`<?php ?>`在获取`$_SESSION['users']`. HTML 不理解这一点，因此您需要将其放在`<?php ?>`标签和`echo`值中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T05:28:48.190

我认为你应该这样做`<input name="email" type="hidden" value="<?php echo $_SESSION['users']; ?>" />`

# android - 在 android 市场上发布应用程序时出现计费错误

> ID：11964487
> 
> 赞同：0
> 
> 时间：2012-08-15T05:22:27.043
> 
> 标签：android, google-play

我已经制作了一个应用程序并希望使用 google play 在 android 市场上发布它。但是每当我选择计费选项时，它不会在选择您的国家选项中显示选项印度。请告诉我如何解决这个问题。谢谢进步。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T05:31:43.337

很遗憾，您不能在印度的 Google Play 上*销售*应用。查看[商家支持的地点列表](http://support.google.com/googleplay/android-developer/bin/answer.py?hl=en&answer=150324)

# nhibernate - 最新的 nhibernate 查询编辑器

> ID：11964490
> 
> 赞同：1
> 
> 时间：2012-08-15T05:22:44.980
> 
> 标签：nhibernate, hql

我正在寻找与 NHibernate 3.0+ 一起使用的最新 nhibernate 查询编辑器。我看到了帖子[Free HQL Editor](https://stackoverflow.com/questions/2271457/free-hql-editor)。但是那个是用 NH2.1 测试的。在此先感谢您的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T11:09:38.473

试试这些：

*   [NHibernate 工作台](http://www.felicepollano.com/2010/05/19/NHibernateWorkbench.aspx)
*   [Visual Studio 的 HQLAddin](http://hqladdin.codeplex.com/)
*   [NHibernate Designer](http://www.devart.com/entitydeveloper/nhibernate-designer.html) - 不是免费的，但有更多的功能

顺便说一句，HQL 最近没有发生太大变化，所以一些老编辑器可能工作得很好。

# android - Android 查询未在 Jelly Bean 中过滤的书签

> ID：11964491
> 
> 赞同：0
> 
> 时间：2012-08-15T05:22:57.777
> 
> 标签：android, filter, bookmarks, android-contentresolver

寻找有关在不同版本的 Android 中查询的帮助。我有以下代码返回书签光标。我正在尝试过滤浏览器以仅返回实际书签的 url，而不仅仅是浏览器历史记录。它适用于 3.1 版，但在我的新 Nexus 7 上，它不会按书签过滤，而是返回光标中的所有浏览器历史记录。非常感谢任何见解。我想我遇到了过滤和内容解析器查询不注意选择参数但似乎找不到任何信息的问题。谢谢。

```
String[]   mColumnStrings = 
{ 
  Browser.BookmarkColumns.TITLE, 
  Browser.BookmarkColumns.URL, 
  Browser.BookmarkColumns._ID,
  Browser.BookmarkColumns.BOOKMARK

 }; 

 try{
   bookmarksCursor =   getActivity().getContentResolver().query(Browser.BOOKMARKS_URI, mColumnStrings, Browser.BookmarkColumns.BOOKMARK+ " = 1 ", null , Browser.BookmarkColumns.URL + " ASC"); 
   getActivity().startManagingCursor(bookmarksCursor);

    return bookmarksCursor; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T08:07:56.757

它对我来说工作正常...我在 AVD 上对其进行了测试...实际上 Android 4.1 已经有一些默认书签...打印 Browser.BookmarkColumns.BOOKMARK 以及验证天气结果是否被书签...

您可以使用此方法专门为您验证...

```
private void varify(Cursor bookmarksCursor) {
  bookmarksCursor.moveToFirst();
  while(bookmarksCursor.moveToNext()) {
    Log.v("title", bookmarksCursor.getString(0));
    Log.v("url", bookmarksCursor.getString(1));
    Log.v("id", bookmarksCursor.getString(2));
    Log.v("bookmark", bookmarksCursor.getString(3));
  }
} 
```

希望这有效...

如果您决定这回答了您的问题，请将其标记为“已接受”。这将提高您和我的声誉分数。

# java - 列表片段未使用 Actionbarsherlock 设置为 2 个选项卡中的活动片段

> ID：11964492
> 
> 赞同：1
> 
> 时间：2012-08-15T05:22:57.607
> 
> 标签：java, android, android-fragments, fragment, actionbarsherlock

我想知道这里出了什么问题，因为每次我单击第二个选项卡时，活动列表片段仍然是第一个选项卡上的第一个。下面是我的代码

```
public class IndustriesListener<T extends SherlockListFragment> implements TabListener{

    private Fragment mFragment;

    private final Activity mActivity;

    private final String mTag;
    private final Class<T> mClass;  

    public IndustriesListener(Activity activity, String tag,Class<T> clz){
        mActivity = activity;

        mTag = tag;
        mClass = clz;       
    }

    @Override
    public void onTabReselected(Tab tab, FragmentTransaction ft) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onTabSelected(Tab tab, FragmentTransaction ft) {
        // TODO Auto-generated method stub

        if (StaticHelper.HINT_VIEW!=null)
            StaticHelper.HINT_VIEW.setText(R.string.nnitIndustryTabLbl);

        if(mFragment==null){

            mFragment = Fragment.instantiate(mActivity, mClass.getName());      
           // ft.add(android.R.id.content,mFragment, mTag);
           // ft.remove(mFragment);

            ft.replace(R.id.fragmentnnitServiceList,mFragment);
            ft.setTransition(FragmentTransaction.TRANSIT_FRAGMENT_FADE); 
           // ft.addToBackStack(null); 
          //  ft.commit();
            //ft.add(R.id.fragmentnnitServiceListCase,mFragment,mTag);
        }else{
           ft.attach(mFragment);

            //ft.show(mFragment);
        }       

    }

    @Override
    public void onTabUnselected(Tab tab, FragmentTransaction ft) {
        // TODO Auto-generated method stub
        if(mFragment!=null)          
             //ft.hide(mFragment);
            ft.detach(mFragment);

            //ft.remove(mFragment);
    }

} 
```

# git - Cake PHP、MAMP 和 GIT - 助手无法解决

> ID：11964496
> 
> 赞同：0
> 
> 时间：2012-08-15T05:24:06.123
> 
> 标签：git, apache, cakephp, mamp

我遇到的问题是在从工作的远程版本迁移到代码库的本地版本时出现的。如果我通过“/”访问首页，则页面正确呈现并且不报告错误。但是，如果我访问另一个视图，比如“用户/登录”，我会收到以下错误并且页面无法加载（即使页面确实可以远程工作）。

```
PHP Fatal error:  Call to a member function css() on a non-object 
  in /app/View/Elements/doc_header.ctp on line 28 
```

报告的行号对应于此代码。

```
 echo $this->Html->css('global.css'); 
```

在两个控制器中，我都声明了正确的助手。同样，它可以远程使用未修改的控制器和视图代码。看来我的 cake 或 apache 配置有问题。我正在使用 Cake v 2.1.3。有什么想法吗？

此外，我使用 git 克隆远程代码库，并将其传输到本地。也许这就是我出错的地方。知道使用 Git 和 Cake 时的常见陷阱吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T14:25:20.913

将您的代码更改为

```
echo $this->Html->css('global'); 
```

->css 已经将该 .css 添加到文件中。

# android - 如何获取LinearLayout的高度

> ID：11964499
> 
> 赞同：13
> 
> 时间：2012-08-15T05:24:16.730
> 
> 标签：android, android-linearlayout

我将 LinearLayout 设置为 match_parent 的高度，如下所示：

```
<LinearLayout
    android:id="@+id/list_layout"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" > 
```

我想得到这个 LinearLayout 的高度。
我使用了下面的代码：

```
LinearLayout ll_list = (LinearLayout)findViewById(R.id.list_layout);
int h = ll_list.getHeight(); 
```

但它返回null。
我能怎么做？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-08-15T05:46:13.237

首先：你的`LinearLayout`id 是`left_layout`，不是`list_layout`。

此外，如果尚未绘制，`ll_list.getHeight()`将返回 0 （以及）。`ll_list.getWidth()`

解决方案是在布局视图后获取高度：

```
ll_list.post(new Runnable(){
    public void run(){
         int height = ll_list.getHeight();
    }
}); 
```

并确保您的`ll_list`is `final`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T05:40:43.017

```
LinearLayout ll_list = (LinearLayout)findViewById(R.id.list_layout);
                                                       ^^^^^^^^^^ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-07-05T11:45:04.480

您需要等待 View 被初始化首先使用 View Tree Observer 它等到创建视图查看这个

[在运行时获取布局高度和宽度android](https://stackoverflow.com/questions/12068945/get-layout-height-and-width-at-run-time-android)

# orm - CF ORM 是否有 Active Record 类型 Update()？

> ID：11964500
> 
> 赞同：2
> 
> 时间：2012-08-15T05:24:18.223
> 
> 标签：orm, coldfusion

目前，我部分使用 cfwheels 及其 Active Record ORM（很棒），部分使用原始 cfml 及其 Hibernate ORM（也很棒）。

两者都适用于适用的情况，但我在使用 CF ORM 时最想念的是 cfwheels 中可用的 model.update() 方法，您只需将表单结构传递给该方法，它就会映射具有模型属性的结构元素并更新记录..非常适合更新和维护大型表。在 CF ORM 中，似乎更新记录的唯一方法是单独设置每一列，然后进行保存。是这样吗？

cf9 ORM 是否有一个 Active Record 类型 update() （或等效）方法，它可以只接收一个带有值的结构来更新和更新对象，而不必指定每个？

例如，代替当前：

```
member = entityLoadByPK('member',arguments.id);
member.setName(arguments.name);
member.setEmail(arguments.email); 
```

有没有办法在 CF ORM 中做这样的事情？

```
member = entityLoadByPK('member',arguments.id);
member.update(arguments); 
```

提前谢谢了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T14:55:47.930

在我的应用程序中，我通常为处理任务的模型创建两个辅助函数：

```
/*
* Get properties as key-value structure
* @limit Limit output to listed properties
*/
public struct function getMemento(string limit = "") {

    local.props = {};

    for (local.key in variables) {
        if (isSimpleValue(variables[local.key]) AND (arguments.limit EQ "" OR ListFind(arguments.limit, local.key))) {
            local.props[local.key] = variables[local.key];
        }
    }

    return local.props;

}

/*
* Populate the model with given properties collection
* @props Properties collection
*/
public void function setMemento(required struct props) {

    for (local.key in arguments.props) {
        variables[local.key] = arguments.props[local.key];
    }

} 
```

为了更好的安全性，`setMemento`可以检查`local.key`变量范围内的存在，但这将跳过可为空的属性。

所以你可以制作`myObject.setMemento(dataAsStruct);`然后保存它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T10:06:24.377

没有与您想要的完全一样的方法，但[EntityNew()](http://help.adobe.com/en_US/ColdFusion/9.0/CFMLRef/WSfd7453be0f56bba437188258123092b394c-7ffe.html)确实将可选结构作为第二个参数，它将设置对象的属性，尽管取决于您的代码当前的工作方式，使用此方法可能很笨拙并且我不知道刷新 ORM 会话时是否执行创建/更新是否会产生任何影响。

如果您的 ORM 实体从主 CFC 继承，那么您可以在其中添加一个方法。或者，您可以将其编写为函数并将其混合到您的对象中。

我相信您知道，但是如果与未经处理的用户输入（例如原始 FORM 范围）一起使用，该 update() 功能可能会成为[安全问题](http://www.infoq.com/news/2012/03/GitHub-Compromised/)（称为批量分配问题）的根源。

# asp.net - 在 .NET 中触发 TextChange 方法

> ID：11964504
> 
> 赞同：0
> 
> 时间：2012-08-15T05:24:35.123
> 
> 标签：asp.net, datepicker, textchanged

我的应用程序中有两个日期选择器。在页面加载时，今天的日期显示在一个文本字段中（附加到日期选择器），另一个显示两天后的日期。我想要做的是，当在第一个日期选择器中选择日期时，所选日期前两天的日期必须显示在第二个文本框中。选择日期后，如何移动到第一个文本框的“文本更改方法”。我已经尝试过“自动回发”，但它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T07:17:37.703

```
$(function () {
     $(".datePicker").datepicker({
          onSelect: function (dateText, instance) {
               if (this.id == '<%= DateFromTextBox.ClientID  %>') {
                    var date = new Date(Date.parse(dateText));
                    date.setDate(date.getDate() + 2);
                    $("#<%= DateToTextBox.ClientID %>").datepicker("setDate", date);
               }
               __doPostBack(this.name, "");
          }
     });
});

<asp:Label runat="server" AssociatedControlID="DateFromTextBox" Text="From:" />
<asp:TextBox runat="server" ID="DateFromTextBox" CssClass="datePicker" />
&nbsp;
<asp:Label ID="Label1" runat="server" AssociatedControlID="DateToTextBox" Text="To:" />
<asp:TextBox runat="server" ID="DateToTextBox" CssClass="datePicker" /> 
```

# android - 如何仅在通知中关闭振动

> ID：11964506
> 
> 赞同：0
> 
> 时间：2012-08-15T05:25:12.380
> 
> 标签：android

我只想在通知中关闭振动，但振动必须在铃声中打开。

AudioManager 只有带有 RINGER_MODE_NORMAL、RINGER_MODE_SILENT 或 RINGER_MODE_VIBRATE 的 setRingerMode。

我能怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T14:00:42.297

告诉您的电子邮件程序您想要什么。打开电子邮件，菜单，帐户设置，通知设置，取消点击，所以框是灰色的。电子邮件到达时不再有声音！

# asterisk - 加入两个带星号的会议

> ID：11964508
> 
> 赞同：1
> 
> 时间：2012-08-15T05:26:02.233
> 
> 标签：asterisk

我想参加两个会议（confbridge）。假设有一个会议室 c1，然后有另一个会议室 c2，现在我希望 c1 的参与者也可以加入 c2 的参与者，但条件是 c1 参与者不必离开他们的房间。

如何使用 confbridge 和星号来实现这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T17:00:33.913

考虑到您有两个名为 1 和 2 的会议室，然后添加到您的 extensions.conf：

```
[join-conference]
exten => s,1,ConfBridge(2)
exten => s,n,Hangup
exten => h,1,Hangip 
```

并在外壳中执行：

```
asterisk -rx "channel originate local/s@join-conference application ConfBridge 1" 
```

基本上你用两条腿打电话：一条到会议 1，另一条到会议 2。这没什么大不了的，而且效果很好。让我知道如果你不能理解的东西。

您可以在这里了解更多信息： [http ://www.voip-info.org/wiki/view/Asterisk+local+channels](http://www.voip-info.org/wiki/view/Asterisk+local+channels)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T03:03:57.410

你在这里有一个实现： [在初始加入时连接两个会议](http://leifmadsen.wordpress.com/2011/08/11/connecting-two-conferences-on-initial-join-with-cleanup/)

# twitter - 如何从 url 获取 pin？

> ID：11964509
> 
> 赞同：2
> 
> 时间：2012-08-15T05:26:13.410
> 
> 标签：twitter, twitter-oauth, scribe

获取请求令牌后，我需要获取一个 pin。我明白了。但它的内部 html 页面。但我只需要从 url 获取它。

我不想使用我自己的网站作为回调，但我仍然想获得 pin。使用 facebook api，我可以将[https://www.facebook.com/connect/login_success.html](https://www.facebook.com/connect/login_success.html)设置为回调，它会返回给我[https://www.facebook.com/connect/login_success.html?code=MYCODE](https://www.facebook.com/connect/login_success.html?code=MYCODE)，我可以`code`从 url获取参数。

但是 twitter 返回我[https://dev.twitter.com/docs/auth/pin-based-authorization](https://dev.twitter.com/docs/auth/pin-based-authorization)页面，没有任何代码参数。

那么如何从我的应用程序中获取密码（代码）？

![推特销](../Images/2def7642e0efb110a0670acc96807611.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-30T10:10:15.063

在用户获得 oauth_token 用户需要打开链接以获取 pin 后，您可以使用此应用程序尝试[https://github.com/raidenz/twitteroauth 。](https://github.com/raidenz/twitteroauth)并将图钉重新插入表单以使此应用程序正常工作

# c# - 是否有一个 C# 通用容器是列表 还有 HashSet

> ID：11964511
> 
> 赞同：0
> 
> 时间：2012-08-15T05:26:28.247
> 
> 标签：c#, set, generic-list

我正在寻找一个 C# 通用容器，它是一个`List<T>`，但不允许重复元素。

换句话说，它是一个`Set<T>`, 但也可以通过`[index]`运算符访问。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T05:57:44.173

正如评论中所建议的那样，您可以`IList<T>`将该委托实现给内部`List<T>`实例，并使用 a 来保护添加和删除调用`HashSet<T>`：

```
public class UniqueList<T> : IList<T>
{
    private readonly List<T> list=new List<T>();
    private readonly HashSet<T> set=new HashSet<T>();
    public IEnumerator<T> GetEnumerator()
    {
        return list.GetEnumerator();
    }

    IEnumerator IEnumerable.GetEnumerator()
    {
        return GetEnumerator();
    }

    public void Add(T item)
    {
        if(set.Add(item))
        {
            list.Add(item);
        }
    }

    public void Clear()
    {
        set.Clear();
        list.Clear();
    }

    public bool Contains(T item)
    {
        return set.Contains(item);
    }

    public void CopyTo(T[] array, int arrayIndex)
    {
        list.CopyTo(array,arrayIndex);
    }

    public bool Remove(T item)
    {
        if(set.Remove(item))
        {
           list.Remove(item);
            return true;
        }
        return false;
    }

    public int Count { get { return list.Count; } }
    public bool IsReadOnly { get { return false; } }
    public int IndexOf(T item)
    {
        return list.IndexOf(item);
    }

    public void Insert(int index, T item)
    {
        if(set.Add(item))
        {
            list.Insert(index, item);
        }
    }

    public void RemoveAt(int index)
    {
        T item = list[index];
        set.Remove(item);
        list.RemoveAt(index);
    }

    public T this[int index]
    {
        get { return list[index]; }
        set {
            T item = list[index];
            set.Remove(item);
            if(set.Add(value))
            {
                list[index] = value;    
            }
            else
            {
                set.Add(item);
                throw new Exception();
            }

        }
    }
} 
```

我没有编译这段代码，但你明白了......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T05:58:56.247

框架中没有提供这样的东西（并且`HashSet<T>`不保证任何特定的顺序，所以你不能作弊`ElementAt`）。您可以使用的最接近的*内置*`SortedList<T,anything>`内容类似于（“任何东西”都无关紧要，可以是`T`, `int`, 等等），例如：

```
var data = new SortedList<string, int>();
data["abc"] = 1;
data["def"] = 1;
data["abc"] = 1;
var thisIsTrue = data.ContainsKey("def");
var thisIsFalse = data.ContainsKey("ghi");
for (int i = 0; i < data.Count; i++) // 2 iterations
    Console.WriteLine(data.Keys[i]); // abc, def 
```

然而; 重要的是要注意这里保证的顺序是*key order*，而不是插入顺序。键的索引可通过`data.IndexOfKey`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T06:12:22.207

您可以使用[OrderedDictionary](http://msdn.microsoft.com/en-us/library/system.collections.specialized.ordereddictionary.aspx)。如果您将您的类型用于键和值类型，并使用相同的对象作为键和值，您将获得所需的行为（您也可以使用键集合进行基于索引的检索；并将虚拟数据粘贴到值中，但我不确定你会得到什么）。

# javascript - 创建等高线图

> ID：11964515
> 
> 赞同：13
> 
> 时间：2012-08-15T05:26:43.300
> 
> 标签：d3, d3, javascript, css, svg, d3.js, contour

给定一组`(x, y, z)`坐标，我将如何创建等高线图？

很高兴知道如何在[d3](/questions/tagged/d3 "显示标记为“d3”的问题")中实现，但如果我有一些方向，我不介意自己尝试实现它。

* * *

对于[d3](/questions/tagged/d3 "显示标记为“d3”的问题")`d3.geom.contour()`用户，我可以使用jasondavies 的 conrec.js创建等高线图吗：

> [https://github.com/jasondavies/conrec.js](https://github.com/jasondavies/conrec.js)

本质上，我想使用 d3.js 复制这个等高线图：http: [//beaugunderson.com/routes/](http://beaugunderson.com/routes/)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-15T11:00:59.093

看起来这很容易`conrec.js`。如果您以您拥有的形式传递数据，您可以通过调用`.contourList()`结果来获取路径列表。您应该能够在不修改`d3` `.data()`呼叫的情况下通过。您需要做的就是提供一个路径生成器，将数据中的坐标映射到屏幕坐标。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-20T06:23:00.387

*   Plotly.js 基于 d3.js 并提供等高线图。参见例如

[https://plot.ly/javascript/contour-plots/](https://plot.ly/javascript/contour-plots/)

[Plotly.js：如何避免重叠的轮廓线？](https://stackoverflow.com/questions/37481973/plotly-js-how-to-avoid-overlapping-contour-lines)

[如何将 plotly.js 应用于现有的 svg 组 <g> 作为目标，而不是将其应用于目标 <div> 元素？](https://stackoverflow.com/questions/37443010/how-to-apply-plotly-js-to-an-existing-svg-group-g-as-target-instead-of-applyin)

*   还有一个 d3.js 的轮廓插件（我还没有使用）：

[https://github.com/d3/d3-plugins/blob/master/geom/contour/contour.js](https://github.com/d3/d3-plugins/blob/master/geom/contour/contour.js)

还有一个例子： [http ://bl.ocks.org/mbostock/4241134](http://bl.ocks.org/mbostock/4241134)

# mysql - 需要计数返回 0 但没有空结果

> ID：11964521
> 
> 赞同：0
> 
> 时间：2012-08-15T05:27:35.430
> 
> 标签：mysql, count

我正在使用oracle服务器。我试图对表中的某些行进行计数，当结果为 0 时，它总是给我一个空结果。我搜索了一个答案并找到了一些，所以我尝试了这些不同的解决方案，但没有一个有效：

```
SELECT IFNULL(count(*), 0) as nb 
FROM tbl1 
WHERE id_tbl1='1' 
GROUP BY id_tbl2 
ORDER BY id_tbl2

SELECT IFNULL(count(id_tbl2), 0) as nb 
FROM tbl1 
WHERE id_tbl1='1' 
GROUP BY id_tbl2 
ORDER BY id_tbl2

SELECT COALESCE(id_tbl2, 0)  as nb 
FROM tbl1
WHERE id_tbl1='1' 
GROUP BY id_tbl2 
ORDER BY id_tbl2 
```

谢谢你的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T06:03:27.867

删除该`GROUP BY`子句，即使它为空，您也会有结果。

# [*SQLFiddle 演示*](http://sqlfiddle.com/#!4/c0b31/10)

# hosting - 网站的源代码在哪里？

> ID：11964524
> 
> 赞同：0
> 
> 时间：2012-08-15T05:28:07.007
> 
> 标签：hosting, admin

我是网络技术的爱好者。我想知道网站的代码在哪里？它是否在所有可能的情况下都托管？人们通常会从管理面板授予对源代码的访问代码吗？如果我想在我的网站中使用这样的功能怎么办？会足够安全吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T05:31:14.727

该站点的代码位于您的 Web 服务器上。安全性取决于 Web 服务器本身。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T05:42:32.830

这在很大程度上取决于您的托管环境的功能。如果他们提供`ssh`或`ftp`访问，那么是的，您很可能可以访问和修改您网站的源代码。否则，您将受制于主机的控制面板或特定网站的管理区域。

# php - SQL 更改输入请求

> ID：11964530
> 
> 赞同：1
> 
> 时间：2012-08-15T05:28:49.503
> 
> 标签：php, mysql

我正在创建一个表单以在我的个人网站上向我提交消息。无论如何，我创建的脚本有一个变量 ，`$pnumber`它代表某人将提交的电话号码。然而，当它到达 MySQL 数据库时，它总是会出现相同的结果：`2147483647`. 无论我在表格中输入什么数字，它总是以`2147483647`. 其他一切都很好，我很确定我的 PHP 脚本没有改变它。我不确定这是否与我在 PHPMyAdmin 中配置该列的方式有关，但这就是我不明白的：为什么要更改它？

PHP：

```
$pnumber = $_REQUEST['pnumber'];
$largetext = $_REQUEST['comment'];
if ($pnumber == "") {
    $pnumber = 0;   
}
try {
    $sql = "INSERT INTO contact SET
             fname = :fname,
             lname = :lname,
             email = :email,
             pnumber = :pnumber,
             mtext = :largetext,
             date = CURDATE()";
    $s = $pdo->prepare($sql);
    $s->bindValue(':fname',$firstname);
    $s->bindValue(':lname',$lastname);
    $s->bindValue(':email',$email);
    $s->bindValue(':pnumber',$pnumber);
    $s->bindValue(':largetext',$largetext);
    $s->execute(); 
```

在数据库中，PHPMyAdmin 显示`pnumber`为

![PHPMyAdmin 表](../Images/769a74cb3677feadb5182942ba0a9789.png)

为什么要更改号码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T05:38:19.713

这个数字 2147483647 听起来像是[有符号整数的上限](http://dev.mysql.com/doc/refman/5.0/en/numeric-type-attributes.html)，所以可能 int 不是该列的正确数据类型。也许试试 bigint。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T05:34:42.463

没有表单的代码，有点难以知道。你能把表格的代码吗？除非您将该电话号码作为默认值，否则我认为它与 mysql 没有任何关系。您可以通过而不是`$pnumber = $_REQUEST['pnumber'];`编写类似`$pnumber = 201222222;`. 另外，您不应该将电话号码存储为`int`，我推荐更好的 a`char`或`varchar`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T05:50:38.280

**在去 Phpmyadmin 时将pnumber**类型从as更改`int to string`并添加相同的数字，然后您将获得相同的 int 值，因此将其更改为 string，因为它是 int 的上限值

# php - 如何使用 facebook graph api 让朋友参与？

> ID：11964534
> 
> 赞同：3
> 
> 时间：2012-08-15T05:29:20.780
> 
> 标签：php, facebook-graph-api

如今，Facebook 列出了生日等活动的参与度，我想在我的网站上显示参与度。

有没有办法通过图形 API 让朋友参与？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T02:52:55.940

```
https://graph.facebook.com/{user_id}/events 
```

使用它获取数组并检查是否使用条件如果它是订婚日期显示到您的网站或保存到数据库如果您将所有日期第一次保存在数据库中然后检查当前日期是否是订婚日期然后将其显示到数据库

# php - 发送许多电子邮件的脚本

> ID：11964535
> 
> 赞同：0
> 
> 时间：2012-08-15T05:29:33.333
> 
> 标签：php, email

我想将页面内容发送到我的电子邮件...所以我正在尝试此代码

```
<?php

$to  = 'hatim.makki@gmail.com';
$subject = 'JYBExpo Report';

$headers  = "MIME-Version: 1.0\r\n";
$headers .= "Content-type: text/html; charset=utf-8\r\n";

$message = file_get_contents('http://jybexpo.com/cms/?page_id=53&print=1');

mail($to, $subject, $message, $headers);

?> 
```

但是这段代码给我发了 20 多封电子邮件

如何让它只发送一封电子邮件？谁能帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T05:39:28.167

它发送多封电子邮件的原因是因为您的模板被多次调用，每次调用您的模板时，邮件脚本都会启动并向您发送一封新电子邮件。

# android - 如何连接 SQLiteDatabase 中的两个表？

> ID：11964539
> 
> 赞同：0
> 
> 时间：2012-08-15T05:29:40.913
> 
> 标签：android, database, sqlite, join

我需要知道如何将 2 个表连接在一起。我不知道如何加入表格，因为我是新手。

我创建了 AnniversaryDBAdapter.class，在其中我在一个数据库中创建了 5 个表。我只需要加入 2 个表，比如加入 buddiesList 表和喜欢表。

下面是 AnniversaryDBAdapter.class 的代码

```
public class AnniversaryDBAdapter
{

    private static final String DATABASE_NAME = "AllTables";
    private static final int DATABASE_VERSION = 2;

    private static final String CREATE_TABLE_BUDDIESLIST = " create table buddiesList(name_id integer primary key autoincrement, name text not null);";
    private static final String CREATE_TABLE_LIKES = " create table likes(name_id integer primary key autoincrement,likes text not null);";
    private static final String CREATE_TABLE_DISLIKES = " create table dislikes(name_id integer primary key autoincrement, dislikes text not null);";
    private static final String CREATE_TABLE_EVENTS = "create table events(date_id integer primary key autoincrement, name_id text not null, date text not null, title_id text not null, starttime text not null, endtime text not null);";
    private static final String CREATE_TABLE_TITLE = "create table titles(title_id integer primary key autoincrement, name text not null, image text not null);";

    private final Context context;
    private static final String TAG = "DBAdapter";

    private DatabaseHelper DBHelper;
    private SQLiteDatabase db;

    public AnniversaryDBAdapter(Context ctx)
    {
        this.context = ctx;
        DBHelper = new DatabaseHelper(context);
    }

private static class DatabaseHelper extends SQLiteOpenHelper
{

    DatabaseHelper(Context context)
    {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);
    }

    @Override
    public void onCreate(SQLiteDatabase db)
    {
        db.execSQL(CREATE_TABLE_BUDDIESLIST);
        db.execSQL(CREATE_TABLE_LIKES);
        db.execSQL(CREATE_TABLE_EVENTS);
        db.execSQL(CREATE_TABLE_TITLE);
    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion)
    {
        Log.w(TAG, "Upgrading database from version "+oldVersion+" to "+newVersion+", which will destroy all old data");

        onCreate(db);

    }

}

public AnniversaryDBAdapter open() throws SQLException
{
    this.db = this.DBHelper.getWritableDatabase();
    return this;
}

public void close()
{
    this.DBHelper.close();
}

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T06:09:51.340

假设我们将您的表格布局更正为如下所示：

```
CREATE TABLE buddiesList(
    _id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL,
    name TEXT NOT NULL
);

CREATE TABLE likes (
    _id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL,
    buddy_id INTEGER REFERENCES buddiesList(_id) ON DELETE CASCADE NOT NULL,
    likes TEXT NOT NULL
); 
```

`VIEW`现在，在您的设置中，您可以创建一个`JOIN`between`buddiesList`和`likes`，它在选择时将像一个普通表一样 - 您只是不能更新/删除或插入它（当然不会弄乱TRIGGER）。

```
CREATE VIEW buddyLikes AS 
    SELECT buddiesList.*, likes._id AS likes_id, likes.likes as likes 
    FROM buddiesList LEFT JOIN likes ON buddiesList._id=likes.buddy_id; 
```

A`View`是使用`execSQL`- 就像表或触发器一样创建的。

使用视图，您可以从好友和点赞之间的连接中进行选择，返回所有好友和他们的所有点赞，如下所示：

```
SELECT * from buddyLikes; 
```

这将返回如下内容：

```
_id  name   likes_id  likes
1   |Ted   |5        |Facebook
1   |Ted   |4        |Murder
2   |Ed    |1        |Beer
2   |Ed    |2        |Cats 
2   |Ed    |3        |Stock-car racing
3   |Red   |6        |Bananarama 
```

顺便说一句：如果你想在你的数据库中支持外键，你需要调用`execSQL` ：

```
PRAGMA foreign_keys = ON 
```

在你的`SQLiteOpenHelper#onOpen(SQLiteDatabase db)`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-03T18:21:58.790

编写查询并使用 SQLiteDatabase.rawQuery(sql, params) 运行。

# python - 空白的多行的自动递增编号

> ID：11964540
> 
> 赞同：1
> 
> 时间：2012-08-15T05:29:47.113
> 
> 标签：python, regex, sed, awk

我有这样的文件

```
apple

ae-pal

noun.

a fruit

ball

b'al

noun.

playing material
round shaped 
```

等等。所以它以单词开头，然后是一个空行和发音（我知道上面的那些是愚蠢的：P）。然后是词性和意义。每学期后有空行。我最终想要的是进行递归调用，以便它拍摄第一个单词并放置在数据库中的一个表中（mysql，可能是），然后第二个进入同一个表的对应行，依此类推。

首先我想给这个空间编号。比如 1 2 3 4 等等。这样我就可以将所有 1、5、9（即 2*x+1）放在一个地方，将 2*x 放在另一个地方，这样我就可以达到我的目的，我可以将它们推送到数据库中，最终得到我的字典。

我可以找到一种用数字替换空行的方法，但不知道如何使它们增加数字。我想知道如何使用 sed、awk 甚至 python 来实现这一点。毫无疑问，正则表达式将在那里。

伪代码

```
is line empty ? 
   yes ? give a number  x (x =1)
   increase x by 1
   no ? go to next line
   repeat till eof. 
```

我希望我足够清楚！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T06:02:07.823

这可能对您有用：

```
awk '/^$/{print ++c;next};1' file 
```

或 GNU sed：

```
touch /tmp/c
addone () { c=$(</tmp/c); ((c+=1)); echo $c | tee /tmp/c; }
export -f addone
sed '/^$/s//addone/e' file
rm /tmp/c 
```

另一种方法可能是将所有空白行转换为制表符，每四个制表符转换为换行符。

```
sed ':a;$!{N;ba};s/\n\n/\t/g;y/\n/ /;' file | sed 's/\t/\n/4;P;D' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T05:32:37.043

```
(line for line in open(...) if line) 
```

是对文件非空行的迭代。使用[此配方](https://stackoverflow.com/questions/434287/what-is-the-most-pythonic-way-to-iterate-over-a-list-in-chunks)以四人组对其进行迭代：

```
def grouper(iterable, n, fillvalue=None):
    args = [iter(iterable)] * n
    return izip_longest(*args, fillvalue=fillvalue)

nonempty_lines = (line for line in open(...) if line)
grouper(nonempty_lines, 4) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-15T05:44:33.133

你可以使用`iterable`，因为它只在`next()`被调用时产生

```
with open('data.txt') as f:
    lines=[x.strip() for x in f]
    spaces=lines.count('')   #count the number of empty lines
    odd_spaces=spaces//2+1   #odd lines 1,3,5,7...
    even_spaces=spaces-odd_spaces #even lines 2,4,6,...

    it=iter(range(1,spaces+1)) #create an iterable
    try:
        lines=[x if x!='' else next(it) for x in lines]  #if line is empty then call next(it)
    except StopIteration:
        pass
    for x in lines:
        print(x)

    fil=[4*x+1 for x in range(0,spaces+1) if 4*x+1<spaces] #4x+1
    print(fil)
    row=[lines[lines.index(x)-1] for x in fil]
    print(row)

    fil=[2*x+1 for x in range(0,spaces+1) if 2*x+1<spaces] #2x+1
    print(fil)
    row=[lines[lines.index(x)-1] for x in fil]
    print(row) 
```

**输出：**

```
apple
1
ae-pal
2
noun.
3
a fruit
4
ball
5
b'al
6
noun.
7
playing material
round shaped
[1, 5]
['apple', 'ball']
[1, 3, 5]
['apple', 'noun.', 'ball'] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-15T06:00:06.903

你为什么不运行一个循环计算空白行然后插入数据库是正则表达式的重要性？

在这里，一个快速而肮脏的 php 实现

```
<?php

$filename = $argv[1];

if(file_exists($filename) && is_readable($filename)) {

    $fh = fopen ($filename, "r");
    $count = 0;
    $el = 0;
    $items = array();
    while(!feof($fh)) {
        $line = fgets($fh);
        if($line == "\n")
        {
            $count++;
            if($count == 4)
            {
                $el ++;
                $count = 0;
            }
            continue;
        }
        $items[$el][$count] .= $line;
    }
    fclose($fh);
}
var_dump($items);

?> 
```

在命令行中以 php script.php 文件名运行它这就是我得到的

```
array(4) {
  [0] =>
  array(4) {
    [0] =>
    string(6) "apple\n"
    [1] =>
    string(7) "ae-pal\n"
    [2] =>
    string(6) "noun.\n"
    [3] =>
    string(8) "a fruit\n"
  }
  [1] =>
  array(4) {
    [0] =>
    string(5) "ball\n"
    [1] =>
    string(5) "b'al\n"
    [2] =>
    string(6) "noun.\n"
    [3] =>
    string(30) "playing material\nround shaped\n"
  }
  [2] =>
  array(4) {
    [0] =>
    string(5) "pink\n"
    [1] =>
    string(7) "pe-ank\n"
    [2] =>
    string(6) "color\n"
    [3] =>
    string(14) "girlish\ncolor\n"
  }
  [3] =>
  array(1) {
    [0] =>
    string(0) ""
  }
} 
```

# c++ - 寻找四分位数

> ID：11964552
> 
> 赞同：12
> 
> 时间：2012-08-15T05:32:04.800
> 
> 标签：c++, sorting, vector, quantile, nth-element

我编写了一个程序，用户可以在其中输入任意数量的值到向量中，它应该返回四分位数，但我不断收到“向量下标超出范围”错误：

```
#include "stdafx.h"
#include <iostream>
#include <string>
#include <algorithm>
#include <iomanip>
#include <ios>
#include <vector>

int main () {
    using namespace std;

    cout << "Enter a list of numbers: ";

    vector<double> quantile;
    double x;
    //invariant: homework contains all the homework grades so far
    while (cin >> x)
        quantile.push_back(x);

    //check that the student entered some homework grades
    //typedef vector<double>::size_type vec_sz;
    int size = quantile.size();

    if (size == 0) {
        cout << endl << "You must enter your numbers . "
                        "Please try again." << endl;
        return 1;
    }

    sort(quantile.begin(), quantile.end());

    int mid = size/2;
    double median;
    median = size % 2 == 0 ? (quantile[mid] + quantile[mid-1])/2 : quantile[mid];

    vector<double> first;
    vector<double> third;

    for (int i = 0; i!=mid; ++i)
    {
        first[i] = quantile[i];

    }

        for (int i = mid; i!= size; ++i)
    {
        third[i] = quantile[i];
    }
        double fst;
        double trd;

        int side_length = 0;

        if (size % 2 == 0) 
        {
            side_length = size/2;
        }
        else {
            side_length = (size-1)/2;
        }

        fst = (size/2) % 2 == 0 ? (first[side_length/2]/2 + first[(side_length-1)/2])/2 : first[side_length/2];
        trd = (size/2) % 2 == 0 ? (third[side_length/2]/2 + third[(side_length-1)/2])/2 : third[side_length/2];

    streamsize prec = cout.precision();
    cout << "The quartiles are" <<  setprecision(3) << "1st"
        << fst << "2nd" << median << "3rd" << trd << setprecision(prec) << endl;

    return 0;   

} 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-08-15T07:13:45.607

而不是做`std::sort(quantile.begin(), quantile.end())`一个更便宜的方式将是

```
auto const Q1 = quantile.size() / 4;
auto const Q2 = quantile.size() / 2;
auto const Q3 = Q1 + Q2;

std::nth_element(quantile.begin(),          quantile.begin() + Q1, quantile.end());
std::nth_element(quantile.begin() + Q1 + 1, quantile.begin() + Q2, quantile.end());
std::nth_element(quantile.begin() + Q2 + 1, quantile.begin() + Q3, quantile.end()); 
```

这不会对整个数组进行排序，而只会对 4 个四分位数进行“组间”排序。这节省了完整的“组内”排序`std::sort`。

如果您的`quantile`数组不大，这是一个小的优化。但是 的缩放行为`std::nth_element`是`O(N)`，而不是`O(N log N)`a `std::sort`。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2016-06-08T17:13:08.187

这是 Quantile 函数，它与 MATLAB 的线性插值等效：

```
#include <algorithm>
#include <cmath>
#include <vector>

template<typename T>
static inline double Lerp(T v0, T v1, T t)
{
    return (1 - t)*v0 + t*v1;
}

template<typename T>
static inline std::vector<T> Quantile(const std::vector<T>& inData, const std::vector<T>& probs)
{
    if (inData.empty())
    {
        return std::vector<T>();
    }

    if (1 == inData.size())
    {
        return std::vector<T>(1, inData[0]);
    }

    std::vector<T> data = inData;
    std::sort(data.begin(), data.end());
    std::vector<T> quantiles;

    for (size_t i = 0; i < probs.size(); ++i)
    {
        T poi = Lerp<T>(-0.5, data.size() - 0.5, probs[i]);

        size_t left = std::max(int64_t(std::floor(poi)), int64_t(0));
        size_t right = std::min(int64_t(std::ceil(poi)), int64_t(data.size() - 1));

        T datLeft = data.at(left);
        T datRight = data.at(right);

        T quantile = Lerp<T>(datLeft, datRight, poi - left);

        quantiles.push_back(quantile);
    }

    return quantiles;
} 
```

查找四分位数：

```
std::vector<double> in = { 1,2,3,4,5,6,7,8,9,10,11 };
auto quartiles = Quantile<double>(in, { 0.25, 0.5, 0.75 }); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-15T06:17:28.353

在设置内容之前，您需要预先分配`first`和`third`向量。

```
vector<double> first(mid);
vector<double> third(size-mid); 
```

或使用`push_back`而不是分配给`first[i]`和`third[i]`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-01-13T14:35:31.743

这个 C++ 模板函数为您计算四分位数。它假定`x`已排序。

```
#include <assert.h>

template <typename T1, typename T2> typename T1::value_type quant(const T1 &x, T2 q)
{
    assert(q >= 0.0 && q <= 1.0);

    const auto n  = x.size();
    const auto id = (n - 1) * q;
    const auto lo = floor(id);
    const auto hi = ceil(id);
    const auto qs = x[lo];
    const auto h  = (id - lo);

    return (1.0 - h) * qs + h * x[hi];
} 
```

要使用它，请执行以下操作：

```
std::vector<float> x{1,1,2,2,3,4,5,6};
std::cout << quant(x, 0.25) << std::endl;
std::cout << quant(x, 0.50) << std::endl;
std::cout << quant(x, 0.75) << std::endl; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-15T05:38:49.207

如果向量中只有一个元素，则该指令超出范围：

```
quantile[mid-1] 
```

"i" 从中间开始，所以 third[0] 超出范围

```
for (int i = mid; i!= size; ++i)
{
    third[i] = quantile[i];
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-15T05:44:07.333

这是一个错误：

```
vector<double> first;
vector<double> third;

for (int i = 0; i!=mid; ++i)
{
    first[i] = quantile[i];
} 
```

矢量`first`没有任何内容，但您尝试访问内容。`third`和它的循环有同样的问题。你的意思是`push_back`改用吗？

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-07-16T12:59:31.143

**加权分位数的实现**

这实现了分位数函数的权重功能，在网格点之间具有线性插值。

```
#include <vector>
#include <numeric>
#include <algorithm>
#include <iostream>
#include <assert.h>

// https://stackoverflow.com/a/12399290/7128154
template <typename T>
std::vector<size_t> sorted_index(const std::vector<T> &v) {

  std::vector<size_t> idx(v.size());
  iota(idx.begin(), idx.end(), 0);

  stable_sort(idx.begin(), idx.end(),
       [&v](size_t i1, size_t i2) {return v[i1] < v[i2];});

  return idx;
}
// https://stackoverflow.com/a/1267878/7128154
template< typename order_iterator, typename value_iterator >
void reorder( order_iterator order_begin, order_iterator order_end, value_iterator v )  {
    typedef typename std::iterator_traits< value_iterator >::value_type value_t;
    typedef typename std::iterator_traits< order_iterator >::value_type index_t;
    typedef typename std::iterator_traits< order_iterator >::difference_type diff_t;

    diff_t remaining = order_end - 1 - order_begin;
    for ( index_t s = index_t(), d; remaining > 0; ++ s ) {
        for ( d = order_begin[s]; d > s; d = order_begin[d] ) ;
        if ( d == s ) {
            -- remaining;
            value_t temp = v[s];
            while ( d = order_begin[d], d != s ) {
                swap( temp, v[d] );
                -- remaining;
            }
            v[s] = temp;
        }
    }
}

// https://stackoverflow.com/a/1267878/7128154
template< typename order_iterator, typename value_iterator >
void reorder_destructive( order_iterator order_begin, order_iterator order_end, value_iterator v )  {
    typedef typename std::iterator_traits< value_iterator >::value_type value_t;
    typedef typename std::iterator_traits< order_iterator >::value_type index_t;
    typedef typename std::iterator_traits< order_iterator >::difference_type diff_t;

    diff_t remaining = order_end - 1 - order_begin;
    for ( index_t s = index_t(); remaining > 0; ++ s ) {
        index_t d = order_begin[s];
        if ( d == (diff_t) -1 ) continue;
        -- remaining;
        value_t temp = v[s];
        for ( index_t d2; d != s; d = d2 ) {
            std::swap( temp, v[d] );
            std::swap( order_begin[d], d2 = (diff_t) -1 );
            -- remaining;
        }
        v[s] = temp;
    }
}

// https://stackoverflow.com/a/29677616/7128154
// https://stackoverflow.com/a/37708864/7128154
template <typename T>
double quantile(double q, std::vector<T> values, std::vector<double> weights = std::vector<double>())
{
    assert( 0\. <= q && q <= 1\. && "expecting quantile in range [0; 1]");
    if (weights.empty())
    {
        weights = std::vector<double>(values.size(), 1.);
    }
    else
    {
        assert (values.size() == weights.size()  && "values and weights missfit in quantiles");
        std::vector<size_t> inds = sorted_index(values);
        reorder_destructive(inds.begin(), inds.end(), weights.begin());
    }

    stable_sort(values.begin(), values.end());
    // values and weights are sorted now

    std::vector<double> quantiles (weights.size());
    quantiles[0] = weights[0];
    for (int ii = 1; ii < quantiles.size(); ii++)
    {
        quantiles[ii] = quantiles[ii-1] + weights[ii];
    }
    double norm = std::accumulate(weights.begin(), weights.end(), 0.0);
    int ind = 0;
    double qCurrent = 0;
    for (; ind < quantiles.size(); ind++)
    {
        qCurrent = (quantiles[ind] - weights[ind] / 2\. ) / norm;
        quantiles[ind] = qCurrent;
        if (qCurrent > q)
        {
            if (ind == 0) {return values[0];}
            double rat = (q - quantiles[ind-1]) / (quantiles[ind] - quantiles[ind-1]);
            return values[ind-1] + (values[ind] - values[ind-1]) * rat;
        }
    }
    return values[values.size()-1];

}

template <typename T>
double quantile(double q, std::vector<T> values, std::vector<int> weights)
{
    std::vector<double> weights_double (weights.begin(), weights.end());
    return quantile(q, values, weights_double);
}

int main()
{
    std::vector<int> vals {5, 15, 25, 35, 45, 55, 65, 75, 85, 95};
    std::cout << "quantile(0, vals)=" << quantile(0, vals) << std::endl;
    std::cout << "quantile(.73, vals)=" << quantile(.73, vals) << std::endl;

    std::vector<int> vals2 {1, 2, 3};
    std::vector<double> ws2 {1, 2, 3};
    std::cout << "quantile(.13, vals2, ws2)=" << quantile(.13, vals2, ws2) << std::endl;
} 
```

**输出**

```
quantile(0, vals)=5
quantile(.73, vals)=73
quantile(.13, vals2, ws2)=1.18667 
```

**关于加权分位数**

而在 中`unweighted case`，输入值形成等距分布

```
values: [1, 2, 3] -> positions: [1/6, 3/6, 5/6] 
```

在 中`weighted case`，距离被修改。

```
values: [1, 2, 3], weights: [1, 2, 1] -> positions: [1/8, 4/8, 7/8] 
```

这不等同于未加权情况的重复值

```
values: [1, 2, 2, 3] -> positions: [1/8, 3/8, 5/8, 7/8], 
```

因为在重复值之间形成了一个平台。这表示：

```
quantile(q=3/8, values=[1, 2, 2, 3]) = 2 
```

但

```
quantile(q=3/8, values=[1, 2, 3], weights=[1, 2, 1]) = 1.67 
```

# akka - 项目中的理想数量 Actor Systems

> ID：11964554
> 
> 赞同：0
> 
> 时间：2012-08-15T05:32:21.607
> 
> 标签：akka

我们正在创建一个 web 项目，我只想问一个项目中 Actor System 的理想数量是多少？谢谢。我正在使用akka顺便说一句。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T08:36:34.217

每个逻辑应用程序 1 个实例。与“普通”对象和创建线程相比，ActorSystems 是相当重量级的。

# python - 关于以下代码的运行结果（Python，不到10行）

> ID：11964567
> 
> 赞同：0
> 
> 时间：2012-08-15T05:34:34.787
> 
> 标签：python

鉴于这段代码（python）

```
s = [None]*10
def func():
    for i in range(10):
        def update():
            print i,
        s[i] = update

func()
for i in range(10):
    s[i]() 
```

为什么这个结果是十个 9，而不是 0,1,2,3,...9？

顺便说一句，我还打印了 s[0]~s[9]，它们是 10 个函数地址，并且彼此不同。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T05:38:23.637

您已经在 上创建了一堆闭包`i`，但它们都共享相同的（最终）值`i`

你需要像这样进行微小的修改

```
>>> s = [None]*10
>>> def func():
...     for i in range(10):
...         def update(i=i):
...             print i,
...         s[i] = update
... 
>>> func()
>>> for i in range(10):
...     s[i]()
... 
0 1 2 3 4 5 6 7 8 9 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T05:50:30.407

@gnibbler 的代码将解决您的问题（如果有人回答，请接受他的回答）。至于为什么打印全9，看你的`update`功能。您（再次，正如@gnibbler 提到的）不断返回您在中定义的 i `for i in range(10)`。由于在您的原始代码中您没有`update`使用函数参数调用该方法，因此它只是打印在作用域中`i`定义的那个（完全不同，函数完成后将是 9）。`func``i`

也许为了更清楚，尝试将`i`in更改`func`为完全不同的名称 - 结果将是相同的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T05:59:59.377

发生的事情与此相同：

```
>>> a = 5
>>> def foo(): print(a)

>>> foo()
5
>>> a = 10
>>> foo()
10
>>> a = 'fred'
>>> foo()
fred 
```

也和这个一样：

```
>>> def bar(): return b

>>> bar()
Traceback (most recent call last):
  File "<pyshell#30>", line 1, in <module>
    bar()
  File "<pyshell#29>", line 1, in bar
    def bar(): return b
NameError: global name 'b' is not defined
>>> b = 3
>>> bar()
3 
```

您在函数中使用的变量在调用函数之前不会解析，而*不是*在*编写*函数时解析。有一些魔术，称为闭包，这意味着在其他函数*内部*定义的函数（因为您的`update`函数在内部定义）仍然可以访问外部函数中定义的所有变量 - 但在*调用*`func`函数之前它们实际上仍然没有得到解决。所以，当你的每个函数被调用时，是 9。*`update``i`*

 *使用默认参数值，如@gnibbler 的回答，是因为`i`每个`update`查找的参数值都会解析为参数（它会隐藏外部变量）。这些不会改变，因为在定义函数时会评估默认参数值（这也导致了很多人迟早会遇到的[可变默认错误）。](https://stackoverflow.com/questions/1132941/least-astonishment-in-python-the-mutable-default-argument)*

# c# - 在 asp.net 中分离软件模块的 UI 文件、将文件放在不同的文件夹中或将文件放在不同的 Web 解决方案中的好习惯是什么？

> ID：11964568
> 
> 赞同：0
> 
> 时间：2012-08-15T05:34:38.997
> 
> 标签：c#, asp.net, project-management, projects-and-solutions

**# 场景大型企业项目。**

如果将文件放在不同的文件夹中，那么在构建/调试时解决方案会变得非常慢，有时在文件夹目录中搜索文件也会很痛苦。

如果将文件放在不同的 Web 项目中，则可以管理 .config、主题/母版页、App_code、图像文件夹等。

我将非常感谢您的建议和指导。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T05:49:55.763

如果您看不到这样做的理由，请不要试图让您的开发生活变得更加困难。:) 如果您不需要在单独的项目中重用某些组件，则不应在文件夹中分离 UI。因此，如果您看不到原因，绝对不要将您的应用程序按项目分开。奇怪的是，当您在不同的文件夹中添加文件时，解决方案的构建/调试速度会变慢。你使用什么类型的项目？网站或网络应用程序？我总是在文件夹树中通过与站点结构方案非常相似的方式分隔我的 ASP.NET 页面/控件。因此，如果我有用户的树页面，例如 UserView / UserEdit 和 UserList - 我会创建文件夹 Users 并在此处放置这些树视图，也许还有一些与这些视图相关的 UserControl。

# ssis - 使用 SSIS 将树表从源数据库转换为目标数据库

> ID：11964571
> 
> 赞同：0
> 
> 时间：2012-08-15T05:34:48.463
> 
> 标签：ssis

我`SSIS`用于将数据从旧数据库转换为新数据库。我使用以下解决方案将树源表转换为树目标表。

FIRST：将所有数据从源转换为目标

第二：`ParentID`根据源表中的源`ParentID'列设置目标表中的列。

源表结构为：

```
TbSource (ID int, ParentID int, Name NVarchar(50)) 
```

目标表结构为：

```
TbDestination (ID int,  ParentID int, Name NVarChar(50), HID Hierarchy, OldID int) 
```

*   第 1 步：我将所有数据从`TbSource`NULL`TbDestination`值转换为 ParentID。
*   步骤2：根据列和表更新`ParentID`。`TbDestination``OldID``TbSource`

我在 TbDestination 上触发了计算 HID 列。[能看能听](https://stackoverflow.com/q/11381537/1407421)。

我正在寻找更好的方法来转换一步转换的数据。

源数据库和目标数据库是`SQL Server 2008 R2`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-21T06:55:51.947

我使用以下步骤来解决我的问题：

**第 1 步：**我将所有数据从 TbSource 转换为 TbDestination，ParentID 值为 NULL。

**第二步：**根据 OldID 列和 TbSource 表更新 TbDestination 的 ParentID

# javascript - 收到错误时如何防止在 submit() 上重定向？

> ID：11964574
> 
> 赞同：0
> 
> 时间：2012-08-15T05:35:29.220
> 
> 标签：javascript, jquery, form-submit

我正在使用[http://musicbrainz.org/release/72cf3c87-d97d-49cc-8781-661ad3580091/cover-art-uploader?id=17477511090 之](http://musicbrainz.org/release/72cf3c87-d97d-49cc-8781-661ad3580091/cover-art-uploader?id=17477511090)类的页面。这通常是 iframe 的来源，但我在 iframe 之外的用户脚本中使用它。我一直在测试使用 javascript 在该页面上提交表单，但我不希望在提交后重定向。

这是我从控制台运行的 js：

```
jQuery(document.forms[0]).submit(function (e) {
    e.preventDefault();
    alert('foo');
    return false;
})[0].submit(); 
```

据我所知，它应该提交，然后事件处理程序启动以停止重定向。但是，当服务器提供除 200 以外的任何状态时，例如 500 Internal Server Error，我仍然会得到重定向。

所以 1）如何检测错误及其状态代码，以及 2）如何防止重定向，即使结果是错误的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T11:01:30.640

仅使用简单的 submit()，这看起来并不乐观。

但是，你可以做到。只需在从表单创建的 FormData 上使用 XHR 的 .send()，而不是尝试直接提交表单。与 .submit() 不同，.send() 不会导致 document.location 跟随重定向。相反，它只会跟随 GET 中的重定向，将参数传递给 XHR 回调，而不触及 document.location。

有关创建 FormData 的示例代码，请参阅 Rob W 对[Grab file with chrome extension before upload](https://stackoverflow.com/questions/11621592/grab-file-with-chrome-extension-before-upload)的回答。

对于跨域 .send()，请参阅问题的下半部分[是否可以执行异步跨域文件上传？](https://stackoverflow.com/questions/6718664/is-it-possible-to-peform-an-asynchronous-cross-domain-file-upload).

# c# - 存储库/IQueryable/查询对象

> ID：11964578
> 
> 赞同：20
> 
> 时间：2012-08-15T05:36:19.950
> 
> 标签：c#, repository-pattern, iqueryable, objectquery

我正在构建一个存储库，我在很多地方都看到了两个不将 IQueryable 暴露在存储库之外的原因。

1) 首先是因为不同的 LINQ 提供程序可能表现不同，并且这种差异应该包含在存储库中。

2) 二是防止服务级别开发人员修改数据库查询，从而意外导致性能问题。

我想问题 2 只能通过将所有查询逻辑保留在存储库中并且不允许任何形式的外部查询构建来防止？但这对我来说似乎有点不切实际。

问题 1 似乎可以通过使用数据对象模式来解决。

例如`public IEnumerable<T> FindBy(Query query)`

我的问题是，为什么我不只是传递一个 lambda 表达式，因为它独立于提供程序，似乎会为我提供与查询对象相同的功能和相同级别的分离？

例如`public IEnumerable<T> FindBy(Expression<Func<T,bool>> predicate)`

有什么理由不这样做吗？它是否违反了某些规则？最佳实践？我应该知道什么？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-08-16T03:20:54.527

# 只需返回一个`IQueryable<T>`.

在你再写一点“存储库代码”之前，你会从阅读 Ayende 的文章[Architecting in the Pit of Doom - The Evils of the Repository Abstraction Layer 中受益匪浅](http://ayende.com/blog/4784/architecting-in-the-pit-of-doom-the-evils-of-the-repository-abstraction-layer)

## 毫无疑问，您的方法会增加不必要的复杂性。

[Generic List of OrderBy Lambda](https://stackoverflow.com/questions/11979140/generic-list-of-orderby-lambda)中其他问题的所有代码除了用不必要和不熟悉的抽象来掩盖现有的有效 API 之外，没有做任何事情。

**关于你的两个担忧，**

1.  LINQ 提供程序的行为确实不同，但只要您传递的谓词可以由 LINQ 提供程序处理，这无关紧要。否则，您仍然会遇到同样的问题，因为您传递的是 an ，无论如何`Expression`它最终都会传递给。`IQueryable`如果`IQueryProvider`实现不能处理你的谓词，那么它就不能处理你的谓词。`ToList()`（如果您需要在无法翻译的进一步过滤之前进行评估，您可以随时调用）。

2.  修改查询可能会导致性能问题，但更可能会暴露急需的功能。此外，次优 LINQ 查询引起的性能问题可能比拉取比您需要的多得多的记录所引起的性能问题的危害要小得多，以避免暴露`IQueryable`或系统地过滤任何数据访问逻辑通过臃肿实际上不做任何事情的抽象级别（第一个威胁更重要）。通常，这不会成为问题，因为大多数领先的 LINQ 提供程序都会在翻译过程中优化您的查询逻辑。

如果您想从前端隐藏查询逻辑，请不要尝试创建通用存储库。用实际的业务特定方法封装查询。现在，我可能弄错了，但我假设您对存储库模式的使用受到领域驱动设计的启发。如果是这种情况，那么使用存储库的原因是允许您创建一个主要关注域模型的持久性无知域。但是，使用这种通用存储库只会将您的语义从 更改`Create Read Update Delete`为`Find Add Remove Save`. 那里没有嵌入任何真正的商业知识。

考虑一个项目的意义（和可用性）

```
interface IPersonRepository 
{ 
     Person GetById(int id);
     IEnumerable<Person> FindByName(string firstName, string lastName);
} 
```

与

```
interface IRepository<T> { 
     IEnumerable<T> FindBy(Query<T> query);
} 
```

此外，您实际上可以指出使用`IRepository<T>`at 的好处（而不是 a `IQueryable<T>`）吗？

此外，考虑到使用通用方法，您实际上根本没有封装查询逻辑。你最终在外部构建它，这将导致更多额外的不必要的代码。

*关于建议不要使用的资源的另一个注意事项`IQueryable<T>`是，值得查看它们的发布日期。曾经有一段时间，LINQ 提供程序的可用性非常有限（对于早期的 EF 和 LINQ-to-SQL）。那时，暴露一个`IQueryable<T>`将导致与 Microsoft ORM 的一些更流行的替代品不兼容（LINQ-to-NHibernate 早已实现）。目前，LINQ 支持在严肃的 ORM .NET 库中几乎无处不在

# c# - 使用控件映射单词

> ID：11964581
> 
> 赞同：0
> 
> 时间：2012-08-15T05:37:14.343
> 
> 标签：c#, .net, ms-word, vsto

我有一个具有特定结构的文档。例如，包含几个段落的执行摘要，包括查找、评论和响应等的文档正文……我考虑使用 vsto“控件”构建，用户将根据自己的需要将其拖放到文档中。例如：如果他需要写评论，他会将评论类型的控件拖到文档中并写下他的内容。最终我需要检查文档并将他的内容保存到数据库中。

不幸的是，我是 vsto 或 word-vba 的新手，如果我的愿景适用并且您可以提供一些示例或链接，我将不胜感激您的建议。

谢谢克伦

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-07T11:55:58.723

我认为您可能想要使用构建块或内容控件或组合。Building Block 可以包含内容控件。例如，您可以有一个“评论”构建块，用户可以插入“评论”构建块并填写它。如果您使用内容控件，您可以提取它们的内容并将其保存到数据库中。

# java - 如何自己从 XML 文件构建 DOM 树，即不使用 DocumentBuilder.parse(xml)？

> ID：11964582
> 
> 赞同：1
> 
> 时间：2012-08-15T05:37:20.007
> 
> 标签：java, xml, dom, xml-parsing

假设有一个简单的 XML 文件，如下所示：

```
<a>
    <b>hello</b>
    <c>world</c>
</a> 
```

我想创建一个 DOM 树，而不使用 Java 库提供的解析器（我确实想使用其他 API 和数据结构，如 Element）。我对词法分析（标记化）部分有点熟悉，但是如何使用标记来构建树？

树创建算法是我从数据结构类中学到的。问题是如何利用 Java 库中给定的 DOM 框架？比如**Element**、**Node**或**DOM API**，它们可以帮助将新节点插入到 DOM 树中。

有没有我可以学习的现有例子？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T06:46:23.463

从[DocumentBuilderFactory](http://docs.oracle.com/javase/6/docs/api/javax/xml/parsers/DocumentBuilderFactory.html)开始，创建一个`DocumentBuilder`并从这里创建一个新`Document`对象。从那里，`Document`有添加元素、属性等的方法，因此您可以使用这些方法生成文档。

```
DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
//dbf.setNamespaceAware(true); //If you need namespace support turn this on, it is off by default

Document doc = dbf.newDocumentBuilder().newDocument();

//Add a root element
Element rootElement = doc.createElement("root");
doc.appendChild(rootElement);

Attr att = doc.createAttribute("my-attribute");
att.setValue("value");
rootElement.appendChild(att); 
```

# sbt - 如何在 sbt 0.12 中使任务依赖于另一个？

> ID：11964583
> 
> 赞同：9
> 
> 时间：2012-08-15T05:37:23.987
> 
> 标签：sbt

我正在使用 SBT `0.12.0`。

我有两个任务-`project/Build.scala`定义如下：`helloTask``u2`

```
val hello = TaskKey[Unit]("hello", "Prints 'Hello World'")

val helloTask = hello := {
  println("Hello World")
}

val u2Task = TaskKey[Unit]("u2") := { println("u2") } 
```

如何使`u2`任务依赖`hellotask`？我使用了[Tasks](http://www.scala-sbt.org/release/docs/Detailed-Topics/Tasks)`<<=`中描述的示例（在问题的原始版本中它是[https://github.com/harrah/xsbt/wiki/Tasks](https://github.com/harrah/xsbt/wiki/Tasks)，但文档已经移动和更改）。

```
u2Task <<= u2Task dependsOn helloTask 
```

但我得到了`reassignment to val`错误。显然，我无法得到任何`<<=`工作。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-15T08:38:33.637

我没有看到您非常密切地关注示例 - 这对我有用：

```
 val helloTask = TaskKey[String]("hello")
  val u2Task = TaskKey[Unit]("u2") 

  helloTask := {
    println("Hello World")
    "Hello World"
  }

  u2Task := {println("u2")} 

  u2Task <<= u2Task.dependsOn (helloTask) 
```

确切的原因是您对 u2Task 的定义具有不同的类型，您可以在 REPL 中看到：

```
scala> val u2Task = TaskKey[Unit]("u2")
u2Task: sbt.TaskKey[Unit] = sbt.TaskKey$$anon$3@101ecc2

scala> val u2Task = TaskKey[Unit]("u2") := {println("u2")}
u2Task: sbt.Project.Setting[sbt.Task[Unit]] = setting(ScopedKey(Scope(This,This,This,This),u2)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-17T04:32:03.763

我让它工作。`<<=`我将and运算符误解`:=`为赋值运算符。

```
 val hello = TaskKey[Unit]("hello", "Prints 'Hello World'")

  val helloTask = hello := {
     println("Hello World")
  }

  val u2 = TaskKey[Unit]("u2", "print u2")
  val u2Task = u2 <<= hello map {_ => println("u2")} 
```

和结果

```
> u2
Hello World
u2 
```

# c# - 如何让 Nhibernate 断开与数据库的物理连接？

> ID：11964590
> 
> 赞同：1
> 
> 时间：2012-08-15T05:38:53.283
> 
> 标签：c#, nhibernate, database-connection

我正在使用 Nhibernate 连接到数据库

```
_sessionFactory = configuration.BuildSessionFactory();
_sessionFactory = configuration.BuildSessionFactory();
_session = _sessionFactory.OpenSession(new DbInterceptor());
_sessionForSequenceQuery = _sessionFactory.OpenSession();
_sequenceQuery = _sessionForSequenceQuery.CreateSQLQuery("select nextval('sequence')"); 
```

当我需要断开与数据库的连接时，我会

```
_sessionForSequenceQuery.Disconnect();
_session.Disconnect();
_sessionFactory.Dispose(); 
```

但是与数据库的物理连接仍然存在。据我了解，当它认为有必要时，它会中断物理连接是 Nhibernate。我如何让他立即这样做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T05:57:21.593

我想对于 _session 你应该调用 Close，而不是 Disconnect：

[http://nhibernate.info/doc/nh/en/index.html#manipulatingdata-endingsession-close](http://nhibernate.info/doc/nh/en/index.html#manipulatingdata-endingsession-close)

> Close() 的主要含义是会话将放弃 ADO.NET 连接。

[http://nhibernate.info/doc/nh/en/index.html#transactions-disconnection](http://nhibernate.info/doc/nh/en/index.html#transactions-disconnection)

> 方法 ISession.Disconnect() 将断开会话与 ADO.NET 连接并将连接返回到池（除非您提供了连接）。

# c++ - 如何使用带有 alpha 掩码的模板缓冲区

> ID：11964593
> 
> 赞同：4
> 
> 时间：2012-08-15T05:39:22.700
> 
> 标签：c++, opengl, sdl

我正在尝试使用带有 alpha 掩码的模板缓冲区来防止绘制部分纹理。

## 初始化代码

```
if(SDL_Init(SDL_INIT_EVERYTHING) < 0) {
    fprintf(stderr,"%s:%d\n    SDL_Init call failed.\n",__FILE__,__LINE__);
    return false;
}

// Request use of the stencil buffer
SDL_GL_SetAttribute( SDL_GL_STENCIL_SIZE, 1 );

if((Surf_Display = SDL_SetVideoMode(WWIDTH, WHEIGHT, 32,  SDL_GL_DOUBLEBUFFER | SDL_OPENGL | SDL_RESIZABLE)) == NULL) {
    fprintf(stderr,"%s:%d\n    SDL_SetVideoMode call failed.\n",__FILE__,__LINE__);
    return false;
}

// Init GLDebug system
GLDebug::Init();

// Init GL system
glClearColor(0, 0, 0, 1);

glClearDepth(1.0f);

glViewport(0, 0, WWIDTH, WHEIGHT);

glMatrixMode(GL_PROJECTION);

glLoadIdentity();

glOrtho(0, WWIDTH,  WHEIGHT, 0, 1, -1);

glMatrixMode(GL_MODELVIEW);

glHint(GL_POINT_SMOOTH_HINT, GL_NICEST);
glHint(GL_LINE_SMOOTH_HINT, GL_NICEST);
glHint(GL_POLYGON_SMOOTH_HINT, GL_NICEST);

glEnable(GL_POINT_SMOOTH);
glEnable(GL_LINE_SMOOTH);
glEnable(GL_POLYGON_SMOOTH);

glLoadIdentity(); 
```

## 资源

```
glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT | GL_STENCIL_BUFFER_BIT);

// Enable use of textures
glEnable(GL_TEXTURE_2D);

// Disable writing to any of the color fields
glColorMask(GL_FALSE, GL_FALSE, GL_FALSE, GL_FALSE);
glStencilOp(GL_KEEP, GL_KEEP, GL_INCR); 
glStencilFunc(GL_ALWAYS, 0,0);
glEnable(GL_ALPHA_TEST);
glEnable(GL_STENCIL_TEST);

glBindTexture(GL_TEXTURE_2D,(&StencilTex)[0]);

// Draw our stencil buffer texture
glBegin(GL_POLYGON);                                   
    glTexCoord2d( 0, 0 );    glVertex2f( 50,     50 );
    glTexCoord2d( 0, 1 );    glVertex2f( 50,     50+128 );
    glTexCoord2d( 1, 1 );    glVertex2f( 50+128, 50+128 );
    glTexCoord2d( 1, 0 );    glVertex2f( 50+128, 50 );
glEnd();

glDisable(GL_ALPHA_TEST);

// Re enable drawing of colors
glColorMask(GL_TRUE, GL_TRUE, GL_TRUE, GL_TRUE);

glStencilFunc(GL_GREATER, 0, -1);

// Bind desired texture for drawing
glBindTexture(GL_TEXTURE_2D,(&texture)[0]);

// Draw the box with colors (this should be masked off)
glBegin(GL_QUADS);                                   
    glTexCoord2d( 0, 0 );    glVertex2f( 50,     50 );
    glTexCoord2d( 0, 1 );    glVertex2f( 50,     50+128 );
    glTexCoord2d( 1, 1 );    glVertex2f( 50+128, 50+128 );
    glTexCoord2d( 1, 0 );    glVertex2f( 50+128, 50 );
glEnd();
glDisable(GL_STENCIL_TEST);

// Swap buffers and display!
SDL_GL_SwapBuffers(); 
```

我将从蒂姆发布的[这个](https://stackoverflow.com/questions/11896638/mask-part-of-a-texture-on-draw-with-opengl-in-a-fixed-pipeline)问题中删除参考。我的设置适用于像素的原始绘图，但我不能 A）使这个过程应该如何工作或 B）让它从 alpha 纹理工作。我得到的只是黑屏或完整的纹理。

有人愿意将其分解为合理的步骤吗？我对 glStencilOp 和 glStencilFunc 选项的工作原理有一个模糊的理解，但是它们与使用 alpha 测试和模板测试的关系让我感到困惑。我们如何决定只保留纹理中的 alpha 层？

回顾：

*   我有一个我想在场景中绘制的纹理，但我需要将非常特定的区域挡住。
*   无法在运行时修改对象的 alpha 纹理以实现此效果。
*   我正在使用固定管道，我计划稍后学习如何使用 VBO。
*   调用第二个纹理时，给定的代码不会绘制任何内容。

[编辑 0]

公认的解决方案有效！这是我所期望的最终代码。

```
glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT | GL_STENCIL_BUFFER_BIT);

// // Enable use of textures
glEnable(GL_TEXTURE_2D);

// Disable writing to any of the color fields
glColorMask(GL_FALSE, GL_FALSE, GL_FALSE, GL_TRUE);
glStencilOp(GL_KEEP, GL_KEEP, GL_INCR); 

glAlphaFunc(GL_GREATER, 0.05);
glStencilFunc(GL_ALWAYS, 0,0);

glEnable(GL_STENCIL_TEST);
glEnable(GL_ALPHA_TEST);

glBindTexture(GL_TEXTURE_2D,(&StencilTex)[0]);

// Draw our blocking poly
glBegin(GL_POLYGON);                                   
    glTexCoord2d( 0, 0 );    glVertex2f( 50,     50 );
    glTexCoord2d( 0, 1 );    glVertex2f( 50,     50+128 );
    glTexCoord2d( 1, 1 );    glVertex2f( 50+128, 50+128 );
    glTexCoord2d( 1, 0 );    glVertex2f( 50+128, 50 );
glEnd();
glDisable(GL_ALPHA_TEST);

// Re enable drawing of colors
glColorMask(GL_TRUE, GL_TRUE, GL_TRUE, GL_TRUE);

glStencilFunc(GL_LESS, 0, -1);

// Bind desired texture for drawing
glBindTexture(GL_TEXTURE_2D,(&texture)[0]);

// Draw the box with colors
glBegin(GL_QUADS);                                   
    glTexCoord2d( 0, 0 );    glVertex2f( 50,     50 );
    glTexCoord2d( 0, 1 );    glVertex2f( 50,     50+128 );
    glTexCoord2d( 1, 1 );    glVertex2f( 50+128, 50+128 );
    glTexCoord2d( 1, 0 );    glVertex2f( 50+128, 50 );
glEnd();
glDisable(GL_STENCIL_TEST);

// Swap buffers and display!
SDL_GL_SwapBuffers(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T05:57:49.207

我看到您启用了 alpha 测试，但我没有看到任何设置 alpha 函数 ( [`glAlphaFunc`](http://www.opengl.org/sdk/docs/man/xhtml/glAlphaFunc.xml)) 的调用？

如果不设置 alpha 函数，则 alpha 测试始终通过。您必须告诉状态机要丢弃哪些像素。

通常我会将其设置为：

`glAlphaFunc(GL_GREATER, 0.05); //reject any pixels with alpha less than 0.05`

如果您没有从我之前的回答中清楚地理解，我很抱歉，但如果您对模板功能的工作方式感到困惑，您可以随时查阅他们的参考页面。[`glStencilFunc`](http://www.opengl.org/sdk/docs/man/xhtml/glStencilFunc.xml) [`glStencilOp`](http://www.opengl.org/sdk/docs/man/xhtml/glStencilOp.xml)

# javascript - forEach 只执行数组的最后一个元素

> ID：11964595
> 
> 赞同：0
> 
> 时间：2012-08-15T05:39:46.857
> 
> 标签：javascript, arrays, json, foreach, documentfragment

这是我的代码：

```
var Tree = ( function ( _Obj ) {
  var _E,
      _N;
  _Obj.forEach ( function ( e ) {
    _E = document.createDocumentFragment();
    if ( "tagName" in e ) {
      _N = document.createElement( e.tagName ); 
    }
    if ( "childNode" in e ) {
      _N.appendChild( Tree ( e.childNode ) );
    }
  });
  _E.appendChild ( _N );
  return _E;
}); 
```

这里是该函数的参数：

```
Fragment = [{ // firstNode
    "tagName" : "div",
    "childNode" : [{
      "tagName" : "p",
      "childNode" : [{
        "tagName" : "string",
        "childNode" : [{
          "tagName" : "span",
        }]
      }]
    }]
  },
  { //secondNode
    "tagName" : "div",
    "childNode" : [{
      "tagName" : "p",
      "childNode" : [{
        "tagName" : "span",
        "childNode" : [{
          "tagName" : "div"
        }]
      }]
    }]
  }
]; 
```

此代码应返回一个文档片段，其中包含`var Fragment`. 如果你看，JSON 是基于 a`tagName`和`childNode`元素的；因为每个对象都依赖于一个`tagName`，所以函数返回一个同名的新元素。

但是这里出了点问题，该函数只返回第二个节点`Fragment`：

```
#document-fragment
|_<div>
  |_<p>
    |_<span>
        <div></div>
      </span>
    </p>
  </div> 
```

这等于：

```
{
    "tagName" : "div",
    "childNode" : [{
      "tagName" : "p",
      "childNode" : [{
        "tagName" : "span",
        "childNode" : [{
          "tagName" : "div"
        }]
      }]
    }]
  } 
```

但是，第一个节点发生了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T05:45:30.070

看起来你的 forEach 循环通过并分配`_N`给正确的东西，但只有在整个循环通过`_N`后才附加。`_E`将您`_E.appendChild(_N)`的每个移动到您的内部和底部。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T05:45:16.397

```
var Tree = ( function ( _Obj ) {
  var _E,
      _N;
  _E = document.createDocumentFragment(); // put this out of forEach
  _Obj.forEach ( function ( e ) {
    if ( "tagName" in e ) {
      _N = document.createElement( e.tagName ); 
    }
    if ( "childNode" in e ) {
      _N.appendChild( Tree ( e.childNode ) );
    }
    _E.appendChild ( _N ); // put this inside of forEach
  });
  return _E;
}); 
```

# java - 任务 id 作为线程池中的线程名称

> ID：11964599
> 
> 赞同：3
> 
> 时间：2012-08-15T05:40:10.620
> 
> 标签：java, multithreading, threadpool

我需要从线程池中创建一个线程，并且需要传递一个*任务 ID*（保存在我的对象中的唯一 ID `Runnable`）作为线程名称。

我查看了`ThreadFactory`界面，但我无法将任何附加参数作为线程名称传递给创建的线程。另外，我看了`DefaultThreadFactory`课。它使用一个`AtomicInteger`来设置线程名称。

我可以将任意字符串传递给工厂并让它使用该字符串作为创建的线程的名称吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-15T05:54:04.363

您可以将执行任务的线程的名称设置为：

```
class YourTask implements Runnable {
  public void run() {
    Thread.currentThread().setName(getTaskId());
    //.. rest of the code for the task
  }
} 
```

无论如何，这可能是您想要的。由线程池创建的线程可能用于执行许多不同的任务——因此，给线程取一个取决于它最终将运行的任务的名称是不可能的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-15T06:11:35.250

我认为在线程池上调度的每个线程上手动设置 taskId 并不是最优雅的方法。您可以像这样实现 ThreadFactory 接口 -

```
public class NamedThreadFactory implements ThreadFactory{
    @Override
    public Thread newThread(Runnable r) {
        Thread t = new Thread(r);
        if (r instanceof NamedRunnable) {
            NamedRunnable namedRunnable = (NamedRunnable)r;
            t.setName(namedRunnable.getTaskName());
        }
        return t;
    }
} 
```

而你的 NamedRunnable 将是这样的 -

```
public interface NamedRunnable extends Runnable{
    String getTaskName();
} 
```

# android - 如何根据给定的纬度和经度从google place api（android）获取最近的城市

> ID：11964603
> 
> 赞同：1
> 
> 时间：2012-08-15T05:40:58.140
> 
> 标签：android, google-maps, google-maps-api-3

我从 GPS 获取纬度和经度，并想搜索离我当前位置最近的城市。

目前，我正在向 Google 地方信息发送请求，类型为“neighborhood|locality”，但这不会返回任何最近的城市。即使我自己只指定“邻居”或“地点”，我仍然没有得到任何结果。但是，如果我使用像“bar”这样的类型，那么它会返回一个 bar 列表。

我正在使用此处列出的类型：

[https://developers.google.com/places/documentation/supported_types](https://developers.google.com/places/documentation/supported_types)

谁能告诉我我应该使用什么地方类型来获得最近的一个或多个城市，或者我如何才能获得最近的城市？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T14:27:29.387

您是要返回一个没有任何内容的结果数组，还是什么都没有返回？[文档说](https://developers.google.com/places/documentation/#PlaceSearchResults)你会得到一个结果数组“即使服务没有返回结果”。您正在搜索的城市是否可能包含酒吧但不包含任何归类为“社区”或“地方”的内容？

[这个问题](https://stackoverflow.com/a/10699553/28037)说

> 您可以通过将类型设置为“地理编码”来将自动完成中返回的结果限制为地址......您可以通过将类型设置为“城市”来将自动完成中返回的结果限制为城市

如果您只是想获得城市名称，而不是在城市内搜索某些东西，也许您想使用其中一个选项？

# jquery - 未捕获的类型错误：对象 [object Object] 没有“可拖动”方法。（小册子 jquery 插件）

> ID：11964604
> 
> 赞同：5
> 
> 时间：2012-08-15T05:41:04.950
> 
> 标签：jquery, jquery-plugins

我正在尝试为我的项目使用 Booklet jquery 插件，但手动和键盘控件不起作用。似乎是由于这个错误。

[小册子插件主页](http://builtbywill.com/code/booklet/)

[直接链接到插件的js文件。错误发生在第 1194 行。](http://pastebay.net/1071123)

错误发生在此特定行：

```
 // manual page turning, check if jQuery UI is loaded
    target.find('.b-page').draggable('destroy').removeClass('b-grab b-grabbing');
    if(options.manual && $.ui) { 
```

我的html：

```
<!doctype html>

<html>
<head>
    <meta charset="UTF-8"/>
            <title> asfds </title>
<link rel="stylesheet" type="text/css" media="screen" href="fgerg.css" />
<link href="scripts/jquery.booklet.1.4.0.css" type="text/css" rel="stylesheet" media="screen" />

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>

<script src="scripts/jquery.easing.1.3.js" type="text/javascript"></script>
        <script src="scripts/jquery.booklet.1.4.0.js" type="text/javascript"></script>

<script type="text/javascript">
                $(document).ready(function() {

                $(function() {
                    $('#mybook').booklet(); 
                    keyboard: true
                });     
                }); 
            </script>

</head>

<body>

    <div id="mybook">
        <div> 
            <h3>Yay, Page 1!</h3>
        </div>
        <div> 
            <img src="scripts/testmenu1.png" width="100%" height="100%" />
        </div>
        <div> 
            <h3>Yay, Page 3!</h3>
        </div>
        <div> 
            <h3>Yay, Page 4!</h3>
        </div>
        <div> 
            <h3>Yay, Page 5!</h3>
        </div>
        <div> 
            <h3>Yay, Page 6!</h3>
        </div>
</body>     
    </div>

    </html> 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-08-15T07:25:53.363

我认为 draggable 来自[JQuery UI](http://jqueryui.com/demos/draggable/)，因此您可能还需要包含它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T17:14:27.143

```
 $(function() {
                $('#mybook').booklet( {keyboard: true} ); 

            }); 
```

将 "keyboard: true" 放入 booklet() 函数以获取选项

# c++ - 在 boost::signals 中，“slot_type”和“slot_function_type”有什么区别？

> ID：11964613
> 
> 赞同：3
> 
> 时间：2012-08-15T05:42:18.143
> 
> 标签：c++, boost, boost-signals

[在 boost::signals 库本教程](http://www.boost.org/doc/libs/1_50_0/doc/html/signals/tutorial.html#id3161780)的最后，在“传递槽”标题下，使用了一个名为“slot_type”的类型来传递所需的槽函数以连接到信号。但是，[在下一个示例](http://www.boost.org/doc/libs/1_50_0/doc/html/signals/tutorial.html#id3162554)中，他们使用名为“slot_function_type”的类型显然做了同样的事情。

我一直无法弄清楚这两件事之间有什么区别。

什么时候应该使用“slot_type”，什么时候应该使用“slot_function_type”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T09:11:00.313

`slot_type`是`boost::slot<slot_function_type>`。

对于信号`boost::signal<R(T1, T2, ... TN)>`，`slot_function_type`是类型擦除的函数对象类`boost::functionN<R, T1, T2, ... TN>`，等价于`std::function<R(T1, T2, ... TN)>`，因此它可以保存任何支持信号调用签名的对象（例如函数指针、可调用对象`boost::bind`等）。

`slot_type`包含并具有来自 的隐式构造函数`slot_function_type`，但它还包含通过自动连接管理的机制`boost::trackable`（请参阅教程中的[自动连接管理（中级）](http://www.boost.org/doc/libs/1_50_0/doc/html/signals/tutorial.html#id3162121)）。

`slot_type`除非您有特定的使用理由，否则您想使用它`slot_function_type`，因为这将确保如果您需要使用自动连接管理，它就可以正常工作。 `slot_type`有一个模板化的隐式构造函数，所以可以在任何地方使用`slot_function_type`来传递给`boost::signal::connect()`.

# java - 创建一个数字数组而不循环？

> ID：11964622
> 
> 赞同：2
> 
> 时间：2012-08-15T05:44:09.983
> 
> 标签：java, arrays, loops, jakarta-mail

好的，所以我正在使用 JavaMail 库，并且我正在尝试获取某些消息编号。我想有效地做到这一点，而不必循环两次......无论如何我的问题是：如何创建一个从索引开始并在索引`x`结束`x - 11`而不循环的数组？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-15T05:58:20.427

如果要创建和填充数组，基本上有三个选项：

1.  明确写出值：`int[] nums = new int[] { 0, 1, 2, 3, 4, ... }`

2.  使用某种形式的 for 循环：`for (int i = 0; i < 10; i++) { nums[i] = i; }`

3.  递归创建它：

```
int[] nums = 新的 int[12];
数字 = 填充（0，x，数字）；

私有 int[] 填充（int 索引，int x，int[] nums）{
    if (nums.length >= index) {
        返回数字；
    } 别的 {
        nums[索引] = x - 索引；// x-0 到 x-11
        返回填充（索引+1，x，nums）；
    }
}

```

Vanilla Java，没有额外的库和诸如此类的东西，不支持 map 函数，它允许你指定一个函数，该函数会以某种方式自动生成你的值。

不过，我真的不明白你为什么不想使用循环，尤其是对于像这样微不足道的事情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-15T05:48:36.590

```
int[] myArray = new int[] {x, x-1, x-2, x-3, x-4, x-5, x-6, x-7, x-8, x-9, x-10, x-11}; 
```

# android - AudioFlinger 无法创建轨道。状态：-12

> ID：11964623
> 
> 赞同：41
> 
> 时间：2012-08-15T05:44:18.317
> 
> 标签：android, soundpool

我正在为 android 2.2 编程，并尝试使用 [SoundPool](http://developer.android.com/reference/android/media/SoundPool.html)类同时播放多个声音，但在随机时间，声音会停止从扬声器中发出。

对于将要播放的每个声音，这都会打印在 logcat 中：

```
AudioFlinger could not create track. status: -12 
Error creating AudioTrack
Audio track delete 
```

没有抛出异常，程序继续执行，除了体积不足之外没有任何变化。我很难追踪导致错误的条件或在错误发生后重新创建它。我在任何地方都找不到文档中的错误，并且几乎不知所措。

任何帮助将不胜感激！

编辑：我忘了提到我正在加载 mp3 文件，而不是 ogg。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-08-19T06:47:39.037

对于我最近尝试加载和播放的一些声音，我遇到了几乎完全相同的问题。

我什至将其分解为加载导致此错误的单个 mp3。

我注意到的一件事：当我加载循环为 -1 时，它会因“状态 12”错误而失败，但是当我将它加载到循环 0 次时，它会成功。即使尝试加载 1 次也失败了。

最终的解决方案是在音频编辑器中打开 mp3 并以稍低的质量重新编辑它，以便文件现在更小，并且似乎不会占用系统中那么多的资源。

最后，这个讨论鼓励对你正在使用的对象执行释放，因为确实对可以使用的资源有硬性限制，而且它是系统范围的，所以如果你使用多个资源，其他的应用程序将无法使用它们。

[https://groups.google.com/forum/#!topic/android-platform/tyITQ09vV3s/discussion%5B1-25%5D](https://groups.google.com/forum/#!topic/android-platform/tyITQ09vV3s/discussion%5B1-25%5D)

> *对于音频，每个设备*有 32 个活动 AudioTrack 对象的硬性限制 （不是每个应用程序：您需要与系统的其余部分共享这 32 个），并且 AudioTrack 在 SoundPool、ToneGenerator、MediaPlayer、基于 OpenSL ES 的本机音频内部使用等。但实际的 AudioTrack 限制为 < 32；它更多地取决于内存、CPU 负载等软因素。另外请注意，Android 混音器中的限制器当前没有动态范围压缩，因此如果您有大量活动声音并且它们'都是响亮的。
> 
> 对于视频播放器，由于视频对设备的负载很大，限制要低得多。
> 
> 我将借此机会提醒媒体开发人员：请记住在您的应用暂停时为媒体对象调用 release()。这释放了其他应用程序需要的底层资源。不要依赖垃圾收集器在 finalize 中清理的媒体对象，因为这具有不可预测的时间。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-28T00:32:00.083

我遇到了类似的问题，我的 Android 游戏中的音乐跟踪器会丢失音符，并且出现 Audioflinger 错误（尽管我的状态是 -22）。但是我让它工作了，所以这可能会帮助一些人。

当单个样本同时输出多次时会出现问题。所以在我的情况下，它是在两个或多个轨道上播放的单个样本。这似乎偶尔会出现僵局或其他情况，两个音符中的一个会被丢弃。解决方案是拥有样本的两个副本（两个实际的 ogg 文件 - 相同但都在资产中）。然后在每首曲目上，即使我播放的是相同的样本，但它来自不同的文件。这完全解决了我的问题。

不知道为什么它会在我将样本缓存到内存时起作用，但即使将同一个文件加载到两个不同的声音中也无法解决它。只有当样本来自两个不同的文件时，错误才会消失。

我敢肯定这不会帮助每个人，它不是最漂亮的修复，但它可能会帮助某人。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-05-09T03:38:25.970

john.k.doe 是对的。您必须减小 mp3 文件的大小。您应该将每个文件的大小保持在 100kb 以下。我不得不使用 32kbps 的恒定比特率 (CBR) 而不是通常的 128kbps 将我的 200kb 文件减少到 72kb。这对我有用！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-11-06T15:02:01.373

我遇到了这个问题。为了解决它，我在播放完声音后运行 SoundPool 对象的 .release() 方法。

这是我的代码：

```
SoundPool pool = new SoundPool(10, AudioManager.STREAM_MUSIC, 50);
final int teste = pool.load(this.ctx,this.soundS,1);
pool.setOnLoadCompleteListener(new OnLoadCompleteListener(){

@Override 
    public void onLoadComplete(SoundPool sound,int sampleId,int status){
        pool.play(teste, 20,20, 1, 0, 1);
        new Thread(new Runnable(){
@Override                       
     public void run(){
         try {
        Thread.sleep(2000);
                pool.release();
         } catch (InterruptedException e) { e.printStackTrace(); }
         }
        }).start();
    }
}); 
```

请注意，在我的情况下，我的声音最大长度为 1-2 秒，因此我将 2000 毫秒的值放入 Thread.sleep() 中，以便仅在播放器完成后释放资源。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-27T03:53:47.703

尝试

```
 final ToneGenerator tg = new ToneGenerator(AudioManager.STREAM_NOTIFICATION, 50);
 tg.startTone(ToneGenerator.TONE_PROP_BEEP, 200);
 tg.release(); 
```

发布应该保留你的资源。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-07-01T15:50:32.613

如上所述，循环存在问题：当我将重复设置为 -1 时出现此错误，但设置为 0 时一切正常。我注意到当我尝试一一播放时，有些声音会出现此错误。例如：

```
mSoundPool.stop(mStreamID);
mStreamID = mSoundPool.play(mRandID, mVolume, mVolume, 1, -1, 1f); 
```

在这种情况下，第一首曲目播放正常，但是当我切换声音时，下一首曲目会出现此错误。似乎使用循环，缓冲区以某种方式过载，并且 mSoundPool.stop 无法立即释放资源。

**解决方案**：

```
final Handler handler = new Handler();
handler.postDelayed(new Runnable() {
   @Override
   public void run() {
      mStreamID = mSoundPool.play(mRandID, mVolume, mVolume, 1, -1, 1f);
}, 350); 
```

它正在工作，但不同设备的延迟不同。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-10-30T09:50:15.743

我看到太多过于复杂的答案。错误 -12 表示您没有释放变量。播放 OGG 音频文件 8 次后，我遇到了同样的问题。这对我有用：

```
SoundPoolPlayer onBeep; //Global variable 

    if(onBeep!=null){
       onBeep.release();
    }
    onBeep = SoundPoolPlayer.create(getContext(), R.raw.micon);
    onBeep.setOnCompletionListener(
       new MediaPlayer.OnCompletionListener() {
          @Override
          public void onCompletion(MediaPlayer mp) {    //mp will be null here
             loge("ON Beep! END");
             startGoogleASR_API_inner();
             }
                        }
          );
    onBeep.play(); 
```

在 .play() 之后立即释放变量会搞砸，并且不可能在 onCompletion 中释放变量，所以请注意我在使用它之前如何释放变量（并检查 null 以避免 nullpointer 异常）。

它就像魅力一样！

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-09-03T21:06:20.403

在我的情况下，将 MP3 的质量和文件大小降低到 100kb 以下是不够的，因为一些 51kb 文件可以工作，而一些持续时间较长的 41kb 文件仍然没有。

帮助我们的是将采样率从 44100 降低到 22050，或者将持续时间缩短到不到 5 秒。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-10-08T00:21:21.303

单个 soundPool 的内部内存限制为 1（一）Mb。如果您的声音质量非常高，您可能会遇到这个问题。如果你有很多声音并且达到了这个限制，只需创建更多的声音池，并在它们之间分配你的声音。

如果您在到达那里之前内存不足，您甚至可能无法达到硬轨限制。

该错误不仅在达到流或轨道限制时出现，而且在内存限制时出现。Soundpool 将停止播放旧的和/或取消优先级的声音以播放新的声音。

# php - Zend_Validate_inArray - 错误消息：非空值

> ID：11964624
> 
> 赞同：1
> 
> 时间：2012-08-15T05:44:28.890
> 
> 标签：php, zend-framework, zend-validate

我们使用 Zend_Filter_Input 在后端验证 Dojo From。有“选项”输入元素，我们必须验证提交的值是否被允许。

**问题：**如果**没有**选择 Zend_Validate_inArray 验证器返回

> “您必须提供非空值”

没关系，但我们必须改变信息。我找不到正确的方法来做到这一点..

```
 'FIELD' => array(new Zend_Validate_InArray($allowedValues),
            'messages' => 'MESSAGE_WRONG_VALUE',
            'default'  => ''
         ), 
```

有人知道如何更改“isEmpty”消息吗？

它是 Zend 框架 1.11.12

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T05:52:07.157

试试这个：

```
$element->setRequired(true)->addErrorMessage('Your message'); 
```

# ios - MPMoviePlayerController ipad 卡住加载

> ID：11964629
> 
> 赞同：2
> 
> 时间：2012-08-15T05:45:05.967
> 
> 标签：ios, ipad, mpmovieplayercontroller

这是我试图运行以在 ipad 上放映电影的代码。
会发生什么我只是看到加载...在屏幕的底部。

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(moviePlayBackDidFinish) 
         name:MPMoviePlayerPlaybackDidFinishNotification object:nil];
NSString *movpath = [[NSBundle mainBundle] pathForResource:@"movie" ofType:@"mov"];
MPMoviePlayerViewController* mpviewController = [[MPMoviePlayerViewController alloc] 
          initWithContentURL:[NSURL fileURLWithPath:movpath]];
 mpviewController.view.userInteractionEnabled = YES;
 [self.view addSubview:mpviewController.view];
 MPMoviePlayerController *mp = [mpviewController moviePlayer];
 mp.controlStyle = MPMovieControlStyleDefault;
 [mp prepareToPlay];
 [mp play]; 
```

# iphone - 如何检测图像中的任何 4 边多边形并将其调整为矩形？

> ID：11964634
> 
> 赞同：1
> 
> 时间：2012-08-15T05:45:36.423
> 
> 标签：iphone, linux, image-processing, opencv, computer-vision

一个电视屏幕识别项目，我需要从一张图像中剪辑电视屏幕。

电视屏幕实际上是矩形的。但很明显，电视屏幕在手机摄像头的图像中变形了。我的问题是：

1.  如何检测图像中的任何 4 边多边形（它不是矩形）。
2.  在我知道图像上的多边形区域后，如何将该区域检索到 Mat。
3.  解决任务2后，如何将 4 面多边形的 Mat 转换为固定 W/H 无线电的矩形 Mat。

提供一些代码示例以供参考是非常有帮助的。

谢谢你的回答！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T16:28:21.967

如果您想检测电视屏幕的边缘，您可以使用一些边界检测（如 Canny），然后使用霍夫变换来获得线条。

如果然后提取与线的交点对应的点，则可以创建单应矩阵 H (3x3)。最后，使用这个 homography，您可以将原始图像“变形”到参考帧（在我们的例子中是具有给定纵横比的矩形）。单应性是从平面到平面的转换，所以这正是您在这里需要的。

如果您打算使用 OpenCV（这始终是一个不错的选择！），以下是您可以使用的功能：

*   Canny() - 查找图像中的边缘

*   HoughLines() - 检测线

*   findHomography() - 此函数从一组对应关系中找到单应矩阵。在您的情况下，您需要将该方法作为 0 传递。

*   warpPerspective() - 您将用来将图像“变形”到参考框架的函数。

显然，你可以为 MATLAB 和其他人找到类似的函数......

我希望这可以帮助你。

# hibernate - Hibernate 在 Subselect one-2-many 上生成两个多查询

> ID：11964637
> 
> 赞同：1
> 
> 时间：2012-08-15T05:46:08.503
> 
> 标签：hibernate, subquery

我对**SubSelect 渴望获取**非常满意，但最近我遇到了问题。这是我的场景：我有许多子表的父表。我的 hql 是简单的“来自父母”，它应该给 500 位有相关孩子的父母。

*   一个第一个请求：Hibernate 生成 2 个查询。太好了，正如预期的那样！
*   一秒请求：它说 500 个 Parent 中的每一项都不是二级缓存，它为 Parent 生成 1 个查询，并为每个 Parent 生成 500 个查询以获取 Children。为什么 ？？？？
*   好的，我在 getChildren 方法上应用了 EHCache 读写。Hiberate 返回只生成 2 个查询。但是，只有当数据没有变化时，如果数据发生变化，Hibernate 会继续生成 501 查询。

最重要的是，这对我来说没有意义。我总是希望只有 2 个查询 subselect ，不管是什么！！！请帮我！我很沮丧，我的经理正在考虑回到纯 JDBC SQL

# php - PHP 嵌套循环

> ID：11964639
> 
> 赞同：0
> 
> 时间：2012-08-15T05:46:32.200
> 
> 标签：php, nested-loops

PHP新手在这里。我想就我的嵌套循环寻求一些帮助。我想我已经接近了，但我很确定我缺少的是开关或休息或两者兼而有之。我已经搞砸了一段时间，但我就是不能把它弄好。这是代码示例。

```
<?php $items=array(thing01,thing02,thing03,thing04,thing05,thing06,thing07,thing08,thing09,thing10,thing11,thing12,thing13,thing14,thing15,thing16,thing17,thing18,thing19,thing20,thing21,thing22,thing23,thing24,thing25,thing26,thing27,thing28,thing29,thing30,thing31,thing32); ?>
<?php $array_count = count($items); ?>
<?php $item_count = 9; ?>
<?php $blk_Number = ceil( $array_count / $item_count); ?>
<?php echo "<h3>This list should contain " . $array_count . " items</h3>"; ?>
<ul>
<?php
for ($pas_Number = 1; $pas_Number <= $blk_Number; $pas_Number++) {print "<h3>Start of Block " . $pas_Number . " of 9         items</h3>";
for ($key_Number = 0; $key_Number < $item_count; $key_Number++){print "<li>" . $items[$key_Number] . "</li>"; }
{print "<h3>End of Block " . $pas_Number . " of 9 items</h3>"; }
}
; ?>
</ul> 
```

这给了我以下输出：

此列表应包含 32 项

```
Start of Block 1 of 9 items
thing01
thing02
thing03
thing04
thing05
thing06
thing07
thing08
thing09
End of Block 1 of 9 items
Start of Block 2 of 9 items
thing01
thing02
thing03
thing04
thing05
thing06
thing07
thing08
thing09
End of Block 2 of 9 items
Start of Block 3 of 9 items
thing01
thing02
thing03
thing04
thing05
thing06
thing07
thing08
thing09
End of Block 3 of 9 items
Start of Block 4 of 9 items
thing01
thing02
thing03
thing04
thing05
thing06
thing07
thing08
thing09
Start of Block 4 of 9 items
thing01
thing02
thing03
thing04
thing05
thing06
thing07
thing08
thing09
End of Block 4 of 9 items 
```

如您所见，数组元素的计数是错误的。第 2 块应该包含 10-18 东西，第 3 块应该包含 19-27 东西，第 4 块应该包含剩下的 5 个“东西”。我为数组中的所有愚蠢元素道歉，但我希望能够清楚地解释我想要做什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T06:07:47.257

我想你想使用`array_chunk()`：

```
foreach (array_chunk($items, 9) as $nr => $block) {
    echo "Block $nr\n";
    foreach ($block as $item) {
        echo "\t$item\n";
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T05:49:36.873

代替

`for ($key_Number = 0; $key_Number < $item_count; $key_Number++){print "<li>" . $items[$key_Number] . "</li>"; }`

和

`for ($key_Number = 0; $key_Number < $item_count && $key_number + $pas_number * $item_count < $array_count; $key_Number++){print "<li>" . $items[$key_Number + $pas_number * $item_count] . "</li>"; }`

目前，您在每个外循环迭代中都得到相同的结果，因为您的内循环不依赖于外循环的迭代。

# sql - 将 Access 数据库转换为 SQL

> ID：11964641
> 
> 赞同：0
> 
> 时间：2012-08-15T05:46:43.120
> 
> 标签：sql, ms-access, visual-studio-2012

我是一名程序员，我想做一个将 Access 数据库转换为 SQL 数据库的项目。

这很容易做到吗？我可以只使用一个工具来创建所有具有相同名称的表并“复制”数据吗？

我知道 Access 具有内置的报告功能。SQL 是否具有这些报告功能？如果没有，创建它们是否容易？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T05:51:53.227

您只需要导入您对 sql server 数据库的访问权限。

检查本教程：

[将 Microsoft Access 2007 数据库表导入 SQL Server](http://www.fmsinc.com/MicrosoftAccess/SQLServerUpsizing/importing/Import_Access_DB.asp)

问候

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T13:57:51.630

MS Access 根本不是数据库，默认情况下，它使用 Jet 或 ACE 数据库来存储数据，但 Access 也可以很好地处理存储在许多其他数据库中的数据，包括 MS SQL。将表移动到新的后端时，无需从 MS Access 前端进行更改。SQL Server 没有 MS Access 拥有的所有用户界面和报告工具，它*是*一个数据库，而不是“快速应用程序数据库开发和报告工具”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T05:53:18.997

试试[这个](http://www.microsoft.com/en-us/download/details.aspx?id=28763)它从[微软](http://www.microsoft.com/sqlserver/en/us/product-info/migration-tool.aspx#Access)免费。

# c# - 让 ServiceStack RedisStackOverflow 示例正常工作

> ID：11964642
> 
> 赞同：1
> 
> 时间：2012-08-15T05:46:45.340
> 
> 标签：c#, asp.net, redis, servicestack

嗨，我是 ServiceStack+Redis 的新手。现在我正在查看 ServiceStack 附带的 RedisStackOverflow 示例。

当我尝试运行它时出现错误：

> SocketException - 尝试对不是套接字的东西进行操作。

`Call stack location: ServiceStack.Redis.PooledRedisclientManager.Finalize() Line 324`

网页显示但没有数据。我还安装了 Redis 作为 Windows 服务 2.4.6 32 位，并验证它与 Redis 客户端一起使用。

我在 vista 32bit 机器上运行，iis7 vs2010： ![在此处输入图像描述](../Images/2b4f4632b27c2d49b490077dbcac1a29.png)

对不起图片尺寸，请放大查看异常详情。

# html - 如何将两个元素定位在`的中心 ` 元素

> ID：11964645
> 
> 赞同：0
> 
> 时间：2012-08-15T05:47:14.577
> 
> 标签：html, css, layout

我`<p>`在一个元素中有两个元素`<div>`，并希望将它们定位在`<div>`元素的中心。例如

```
<div id="mydiv">
   <p class="above">some text</p>
   <p class="below">other text</p>
</div> 
```

注意：`<div>`元素本身并不定位在浏览器窗口的中心，所以`<p>`元素的定位只是相对的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T05:56:31.110

**编辑：**

添加以下css规则`#mydiv`

```
display:table-cell;
vertical-align:middle; 
```

**像这样**

```
#mydiv{
    position:relative;
    border:1px solid #000;
    width:400px;
    height:300px;

    display:table-cell; /* Added rule - Note: IE8+, Firefox, Chrome, Opera, Safari */
    vertical-align:middle; /* Added rule */
}

#mydiv p{
    text-align:center;
}​ 
```

## [更新的演示](http://jsfiddle.net/kcYsk/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T05:58:15.623

```
text-align: center; 
```

为文本。

```
margin: 0 auto; 
```

对于像 div 这样的块级元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T05:55:42.453

```
text-align: center; 
```

它对我有用。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-15T05:54:25.040

你可以试试；

```
margin-left:auto;
margin-right:auto; 
```

给你的`p`

***[这](http://jsfiddle.net/blasteralfred/F7KFz/)***是一个现场演示

如果你想垂直和水平居中，你可以试试**[Dead Center](http://www.wpdfd.com/editorial/thebox/deadcentre4.html)**

***[这](http://jsfiddle.net/blasteralfred/QPdHG/2/)***是一个演示，显示**垂直和水平**

# android - 方向改变后恢复动作模式

> ID：11964647
> 
> 赞同：15
> 
> 时间：2012-08-15T05:47:57.650
> 
> 标签：android, android-actionbar, actionbarsherlock

我有启动动作模式的列表片段。我正在使用 actionbarsherlock。但是当方向改变时，或者当我开始新的活动时，上下文操作栏就会消失。有没有办法恢复它，而无需重新启动它？在 google gmail 应用程序中，无论我旋转手机还是转到详细信息屏幕，它都会留在屏幕上。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-06-12T14:16:38.723

更好的方法是使用 onSaveInstanceState 在旋转之前保存 ActionMode 状态。

```
public abstract class MyActivity extends SherlockFragmentActivity{

    private boolean isInActionMode = false;

    @Override
    public void onCreate(Bundle state){
         super.onCreate(state);

         if (state != null && state.getBoolean("ActionMode", false)){
                startActionMode(new MyActionMode());
         }else{
             ///whatever you'd normally do
         }
    }

    @Override
    public void onSaveInstanceState(Bundle outState) {
         // Save isInActionMode value
         outState.putBoolean("ActionMode", isInActionMode);

         super.onSaveInstanceState(outState);
    }

    public void onWhateverEventNormallyStartsYourActionMode(){
        startActionMode(new MyActionMode());
    }

    public class MyActionMode implements ActionMode.Callback{

        @Override
        public boolean onCreateActionMode(ActionMode mode, Menu menu) {
            isInActionMode = true;
            ///whatever you'd normally do
        }

        @Override
        public boolean onPrepareActionMode(ActionMode mode, Menu menu) {
            ///whatever you'd normally do
        }

        @Override
        public boolean onActionItemClicked(ActionMode mode, MenuItem item) {
            ///whatever you'd normally do
        }

        @Override
        public void onDestroyActionMode(ActionMode mode) {
            isInActionMode = false;
        }
    }
} 
```

根据萨兰的评论更新。

# java - 用 Future 实现缓存过期

> ID：11964652
> 
> 赞同：4
> 
> 时间：2012-08-15T05:48:43.487
> 
> 标签：java, multithreading, concurrency

我正在尝试扩展《实践中的并发》一书（Brian Goetz 撰写）中给出的缓存实现。

我想扩展缓存，如果在 10 秒内没有访问任何条目，那么它应该过期。即从缓存中删除。

为此，我扩展了 Future 和 FutureTask 如下

```
package examples.cache;

import java.util.concurrent.Future;

public interface FutureWithExpire<V> extends Future<V> {
    public boolean isResultExpired();
} 
```

和

```
package examples.cache;
import java.util.concurrent.Callable;
import java.util.concurrent.ExecutionException;
import java.util.concurrent.FutureTask;

public class FutureTaskWithExpire<V> extends FutureTask<V> implements FutureWithExpire<V>{
    private final static long validPeriod = 10 * 1000;
    private long expirationTime;

    public FutureTaskWithExpire(Callable<V> callable) {
        super(callable);
    }

    @Override
    public V get() throws InterruptedException,ExecutionException{
        V v = super.get();
        expirationTime = System.currentTimeMillis() + validPeriod;
        return v;
    }

    public boolean isResultExpired(){
    if(isDone()){
        if(expirationTime < System.currentTimeMillis()){
        return true;
        }
    }
    return false;
    }
} 
```

如上所示，我重写了 get 方法来计算过期时间。

在主缓存类中，即[Memorizer](http://jcip.net/listings/Memoizer.java)，我将启动一个新线程，该线程将定期扫描条目并删除`isResultExpired`返回 true 的条目。

我只是想知道这个实现是否可行，或者我的代码中有一些错误？

[注意我也应该用 Timeout](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/FutureTask.html#get%28long,%20java.util.concurrent.TimeUnit%29)覆盖get 。但是，为了简洁起见，我省略了这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T20:40:11.197

当然过期时间应该是不稳定的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T07:10:01.973

为什么是这个代码：

```
 expirationTime = System.currentTimeMillis() + validPeriod; 
```

在get方法中？在我看来它应该在构造函数中，否则它可能会失效得太快。假设您创建了 **FutureTaskWithExpire**实例和其他一些线程，假设使条目无效的线程调用 isResultExpired 方法，到期时间实际上为零，因此条目将无效，即使它仍然有时间。

此外，我认为 get 和 isExpired 的调用应该在 ReentrantLock 上同步，因为您不希望某些线程使您的条目无效，而在另一个线程中您正试图提供该条目。

# android - 我可以在 QuickAction 中放置布局吗？

> ID：11964653
> 
> 赞同：1
> 
> 时间：2012-08-15T05:48:56.167
> 
> 标签：android, android-layout, quickaction

布局包含我的谷歌地图，由可变视图表示。我希望 QuickAction 中应该包含一张地图。这样，当我单击地点或国家/地区列表时，它会在 ListItem 顶部弹出一张地图。例如：

当我单击 philippines 时，它会在列表上显示一张地图。

# email - 使用 SMTP 批量发送带有多个附件的电子邮件

> ID：11964654
> 
> 赞同：2
> 
> 时间：2012-08-15T05:49:24.407
> 
> 标签：email, smtp, attachment

我需要一个程序，用于从本地机器使用 SMTP 发送电子邮件。我需要发送大约 2000 封电子邮件。

电子邮件地址位于具有唯一 ID 号的 MS Excel 文档中。附件位于一个单独的文件夹中，具有与 Excel 文件夹相同的唯一 ID 号。每个收件人将根据 ID 号收到带有不同附件的相同电子邮件。

是否有任何免费或低成本的计划可以实现这一目标？

如果不是，那么编写这样的程序的最好和最快的方法是什么？

**MS Excel 数据示例：**

DWEL1859 jack@bla.com

DSYD1514 caleb@bla.com

DSYD1738 jen@bla.com

DNSW2736 显示@bla.com

DPRE2510 roger@bla.com

**zip 文件名示例：**

DNSW2736.zip

DPRE2510.zip

DSYD1514.zip

DSYD1738.zip

DWEL1859.zip

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T20:51:24.520

将[PHPMailer](http://phpmailer.worxware.com/)与任何数据库服务器（即 MySQL）和包含一些琐碎逻辑的 PHP 脚本一起使用。如果您在实现过程中需要帮助，请在电子邮件上给我写信（请参阅帐户）。

# android - Icecream Sandwich 下的数组索引越界错误，但不是 2.3.5

> ID：11964655
> 
> 赞同：1
> 
> 时间：2012-08-15T05:49:33.520
> 
> 标签：android, android-4.0-ice-cream-sandwich, indexoutofboundsexception

我有一个 listView，它是通过 SQL 数据库中的自定义游标加载的。它用于从不同活动的主列表中删除项目。每一行都有一个复选框，当用户单击“删除行”的删除按钮时，该行的“一行”复选框出现了一个隐藏的删除按钮。

在我运行 2.3.5 的 HTC Desire HD 上，它运行良好，我没有任何问题，但是在我朋友的手机、Galaxy Note 和 S3 上，运行 Ice cream sandwhich 会发生错误。在运行 icecream sandwhich 的手机上，如果他们选中每一行的复选框，然后单击最后一行的删除按钮，则应用程序会因*arrayIndexOutOfBounds*错误而崩溃。此块中出现错误

```
if ( isChecked )
                {
                   // Make deleteButton appear 
                   RelativeLayout ll = (RelativeLayout) buttonView.getParent();
                   deleteButton = (Button) ll.findViewById(R.id.deleteButton);
                   checked[position] = 1;
                   deleteButton.setVisibility(0);
                } 
```

在这一行：`checked[position] = 1;`在第 98 行。

任何人都可以解释为什么会这样吗？

错误日志在下面，我的代码在下面。

```
java.lang.ArrayIndexOutOfBoundsException: length=1; index=1
at com.Roardog.FidelrFull.DeleteCampaignCustomCursorAdapater$1.onCheckedChanged(DeleteCampaignCustomCursorAdapater.java:98)
at android.widget.CompoundButton.setChecked(CompoundButton.java:140)
at com.Roardog.FidelrFull.DeleteCampaignCustomCursorAdapater.getView(DeleteCampaignCustomCursorAdapater.java:86)
at android.widget.AbsListView.obtainView(AbsListView.java:2403)
at android.widget.ListView.measureHeightOfChildren(ListView.java:1251)
at android.widget.ListView.onMeasure(ListView.java:1162)
at android.view.View.measure(View.java:12912)
at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4698)
at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1385)
at android.widget.LinearLayout.measureVertical(LinearLayout.java:670)
at android.widget.LinearLayout.onMeasure(LinearLayout.java:563)
at android.view.View.measure(View.java:12912)
at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4698)
at android.widget.FrameLayout.onMeasure(FrameLayout.java:293)
at android.view.View.measure(View.java:12912)
at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4698)
at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1385)
at android.widget.LinearLayout.measureVertical(LinearLayout.java:670)
at android.widget.LinearLayout.onMeasure(LinearLayout.java:563)
at android.view.View.measure(View.java:12912)
at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4698)
at android.widget.FrameLayout.onMeasure(FrameLayout.java:293)
at com.android.internal.policy.impl.PhoneWindow$DecorView.onMeasure(PhoneWindow.java:2264)
at android.view.View.measure(View.java:12912)
at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1271)
at android.view.ViewRootImpl.handleMessage(ViewRootImpl.java:2678)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:137)
at android.app.ActivityThread.main(ActivityThread.java:4514)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:511)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:993)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:760)
at dalvik.system.NativeStart.main(Native Method) 
```

我的代码：

```
 public class DeleteCampaignCustomCursorAdapater extends CursorAdapter {

protected static final String TAG = null;
DatabaseHelper myDbHelper;
protected SQLiteDatabase db;
private final Activity context;

private LayoutInflater mInflater;
protected ListView mListView;

private Cursor c;
public static int[] checked;

TextView merchantNameView;
Button deleteButton;
CheckBox selectForDelete;
//ImageView moveButton;

public DeleteCampaignCustomCursorAdapater(Context context, Cursor c) {
    super(context, c);
    this.context = (Activity) context;
    mInflater = LayoutInflater.from(context);
    this.c = c;
    c.moveToFirst();
    initializeChecked();
}

@Override
public void bindView(View view, Context context, final Cursor cursor) {     

}

@Override
public View newView(Context context, Cursor cursor, ViewGroup parent) {
    return mInflater.inflate(R.layout.delete_campaign_row_layout, null);
}

@Override
public View getView(final int position, View convertView, ViewGroup parent) {
    Typeface tf = Typeface.createFromAsset(context.getAssets(), "fonts/Roboto-Regular.ttf"); //Create Roboto font       

    c.moveToPosition(position);

    myDbHelper = new DatabaseHelper(context); //Links to DatabaseHelper class

    if (convertView == null) {
        mInflater = context.getLayoutInflater();
        convertView = mInflater.inflate(R.layout.delete_campaign_row_layout, null);
    }       

    merchantNameView = (TextView) convertView.findViewById(R.id.deleteMerchantNameView);
    deleteButton = (Button) convertView.findViewById(R.id.deleteButton);
    selectForDelete = (CheckBox) convertView.findViewById(R.id.deleteCheckBox);     

    merchantNameView.setText(c.getString(c.getColumnIndex("merchantName")));
    merchantNameView.setTypeface(tf);
    merchantNameView.setTextColor(Color.parseColor("#000000"));

    final int  rowID = c.getInt(c.getColumnIndex("_id"));

    if (checked[position] == 0) {
        selectForDelete.setChecked(false);
    } else {
        selectForDelete.setChecked(true);
    }

    selectForDelete.setOnCheckedChangeListener(new OnCheckedChangeListener()
    {
        public void onCheckedChanged(CompoundButton buttonView, boolean isChecked)
        {
            if ( isChecked )
            {
               // Make deleteButton appear 
               RelativeLayout ll = (RelativeLayout) buttonView.getParent();
               deleteButton = (Button) ll.findViewById(R.id.deleteButton);
               checked[position] = 1;
               deleteButton.setVisibility(View.VISIBLE);
            }
            else {
                //Hide deleteButton
                RelativeLayout ll = (RelativeLayout) buttonView.getParent();
                deleteButton = (Button) ll.findViewById(R.id.deleteButton);
                //checked[position] = 1;
                deleteButton.setVisibility(View.INVISIBLE);
            }
        }
    });

    deleteButton.setOnClickListener(new OnClickListener(){
        public void onClick(View v) {

            if(rowID > 0) {
                //Log.d(TAG, "Button Click. rowID = "+rowID);                   

                myDbHelper.deleteRecordWithID(rowID); //Call deleteRecord on selected row
                c.requery(); //requery the cursor
                notifyDataSetChanged(); //notify the view the data set has changed 
                initializeChecked();  // re-set the checked array
            }                           
        }
    });

    return convertView;     
}

public void initializeChecked() {
    checked = new int[c.getCount()];
    int i = 0;
    while (i < c.getCount()) {
        checked[i] = 0;
        i++;
    }
} 
```

}

# visual-studio-2010 - 为应用程序创建设置

> ID：11964663
> 
> 赞同：0
> 
> 时间：2012-08-15T05:50:25.917
> 
> 标签：visual-studio-2010, installation

我想为我的应用程序创建设置，我想知道使用 和 创建设置的区别和`Visual Studio Installer`优势`InstallShield LE`。这些哪个更好？

我使用视觉工作室 2010。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T08:23:24.727

有关功能比较，请参阅[选择 Windows Installer 部署工具](http://msdn.microsoft.com/en-us/library/ee721500.aspx)。

该页面还警告说，Visual Studio 安装程序项目模板将不会包含在未来的版本中。

# database - db2 Express-C SAMPLE 数据库

> ID：11964674
> 
> 赞同：1
> 
> 时间：2012-08-15T05:52:27.797
> 
> 标签：database, db2

我在我的系统中安装了 db2 Express-C。我使用第一步向导创建了示例数据库。但我无法理解创建此示例数据库的用户 ID/密码是什么。

请帮忙。

问候，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T16:32:32.693

DB2 使用操作系统进行身份验证。因此，您可以用来登录系统的任何有效用户/密码都应该允许您连接和查询示例数据库。

DB2 设置实用程序将要求您提供用于管理 ID（也称为“实例所有者”）的用户名和密码，并将在您的系统上创建这些 ID。这些 ID 的默认值：`db2inst1`在 Linux/UNIX 上；`db2admin`在 Windows 上。

# jquery - 如何禁用液体 jquery 轮播中的下一个按钮？

> ID：11964676
> 
> 赞同：-2
> 
> 时间：2012-08-15T05:52:35.613
> 
> 标签：jquery

我正在使用 jQuery Liquid Carousel 插件，但我不知道如何禁用上一个和下一个按钮。你能帮帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T22:12:58.010

在文件 jquery.liquidcarousel.js 中进行以下更改：

在第 110 行添加以下代码`$('> .wrapper > ul', divobj).animate({'marginLeft': -(currentposition * totalwidth)}, options.duration);`：

```
if (currentposition+visiblelis >= totallis ) {
  $(this).addClass("disabled");
}
$('> .previous', divobj).removeClass('disabled'); 
```

在第 117 行的这段代码紧随其后`$('> .previous', divobj).click(function(){`：

```
$('> .next', divobj).removeClass('disabled');
if ((currentposition - visiblelis) <= 0) {
  $(this).addClass("disabled");
} 
```

该代码将一个`disabled`类添加到下一个和上一个按钮。然后，您可以根据需要设置它们的样式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T05:54:32.647

从下载链接上方的[文档中：](http://www.nikolakis.net/liquidcarousel/)

```
$(document).ready(function() {
    $('#liquid').liquidcarousel({
        hidearrows: true    //hide arrows if all of the list items are visible
    });
}); 
```

# java - 16 位灰度的 tiff 规范

> ID：11964677
> 
> 赞同：0
> 
> 时间：2012-08-15T05:52:42.213
> 
> 标签：java, c++, tiff, codec, specifications

对于 x 射线应用程序，我需要一个 16 位灰度 tiff 图像。但是，通过阅读 tiff 规范（修订版 6.0，最终版 - 1992 年 6 月 3 日），我发现灰度图像指定了 4 位和 8 位（参见第 4 节）。

有更新的规范吗？我在哪里可以买到？或者有人可以向我解释 16 位灰度规范，以便我可以对其进行编码（在 C/C++ 和 Java 中）？它只是设置`BitsPerSample = 16`还是我必须做其他事情？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T08:58:21.427

libtiff 支持 16 bpp 图像。由 libtiff 生成的此类图像可以被其他程序（例如 ImageJ）识别 - 您可以将其用于测试。libtiff 库可在此处获得[http://www.libtiff.org/](http://www.libtiff.org/)并可用于 C/C++ 程序。

# objective-c - shouldReloadTableForSearchString 在执行前会等待一段时间吗？

> ID：11964687
> 
> 赞同：0
> 
> 时间：2012-08-15T05:54:18.240
> 
> 标签：objective-c

我正在实现搜索自动完成。我在没有 UISearchDisplayController/UISearchBar 的情况下这样做

一个反复出现的问题是，如果我在家伙按下按钮后立即开始做某事，那么程序就不是“活泼”的。

一种解决方法是使用计时器。

然后我听说 UISearchController 有一个委托要调用。

那位代表会解决我的问题吗？委托人具体是做什么的？按下按钮后等待一段时间？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T07:20:11.183

我的经验是，`searchDisplayController:shouldReloadTableForSearchString:`当搜索字段中的文本发生更改时会立即调用它。所以这对你的问题没有帮助。

# gnuplot - Gnuplot：如何在同一图中绘制不同的重叠数据时设置外观优先级

> ID：11964690
> 
> 赞同：4
> 
> 时间：2012-08-15T05:54:45.560
> 
> 标签：gnuplot

我正在使用普通命令在同一图表中绘制来自不同文件的数据：

```
> plot "foo1" title1..., \
> "foo2" title2... 
```

假设 foo2 中的某些点与 foo1 中的其他点重叠。因此，由于 foo2 是最后一个被绘制的，因此其中的重叠数据将覆盖 foo1 的数据（我为它们选择了不同的颜色）。现在，我需要将数据从 title1 排列到 title2，因此我先绘制 foo1，然后绘制 foo2，但我还需要 foo1 的数据出现在 foo2 的重叠数据之上。

有没有办法做到这一点？

我希望我的问题很清楚。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T07:36:47.830

不幸的是，您不能直接更改数据的堆叠顺序。但是，您可以尝试这样的事情（如果我正确理解您的问题）：

```
plot   NaN    title   'title1', \
      'foo2' title   'title2', \
      'foo1' notitle lt 1 
```

第一个 plot 命令不绘制任何内容，但它为图例添加了正确的标题和线条样式。（请注意，`NaN`仅当 x 和 y 范围以某种方式设置时才有效，在这种情况下，通过其余数据被绘制。）第二个命令（在逗号之后）正常绘制第二组数据。第三行将第一组数据绘制在第二组之上，并用于`lt 1`匹配图例中条目的线型。

（额外的空间只是为了让事情很好地排列。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T11:09:59.900

```
gnuplot> set key invert
gnuplot> plot x title "title2", -2*x title "title1" 
```

将按倒序列出密钥

```
title1
title2 
```

但在 foo2 上绘制 foo1。

# java - 控制 xmpp 服务器中聊天室用户的数量

> ID：11964691
> 
> 赞同：-6
> 
> 时间：2012-08-15T05:54:49.127
> 
> 标签：java, plugins, components, xmpp, openfire

我正在使用 xmpp 服务器（例如 openfire）设计实时聊天引擎，我希望能够限制可以进入聊天室的用户数量，“编程室”下一个房间应该只有 30 人进入房间的人，从第 31 个人起应该被分配到“编程室 2”，一旦用户数量达到 30，将自动创建，并且一旦编程室 1 中的用户下降到 30 个以下进入编程的新用户房间应分配给编程室1。我应该使用插件/组件来实现这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T05:41:22.983

正如您在上面的评论中所建议的那样，我不会下地狱，而是​​为您提供一种方法。

创建一个服务器端组件。您的客户向它发送一些协议（例如[XEP-0050](http://xmpp.org/extensions/xep-0050.html)），然后该服务向您的客户发送到正确房间的邀请。如果您希望现有客户能够加入，也可以接受纯文本消息。

该组件将需要加入每个房间以跟踪使用其存在的参与者的数量。因此，只需让组件根据需要创建每个房间，然后再邀请任何参与者。

# css - 强制 div 包含浮动的子 div

> ID：11964696
> 
> 赞同：17
> 
> 时间：2012-08-15T05:55:26.460
> 
> 标签：css, wordpress, html, css-float, themes

我正在尝试在 Wordpress 中自定义第二十一主题。它有一个 2 列布局，设置如下：

```
<div id="main">
     <div id="primary"></div>
     <div id="secondary"></div>
</div> 
```

和

```
#main {
    clear: both;
    padding: 1.625em 0 0;
}
#primary {
    float: left;
    margin: 0;
    width: 100%;
}
#secondary {
    float: right;
    margin-right: 7.6%;
    width: 18.8%;
} 
```

我不确定其中是否还有其他相关的 css 属性`style.css`我没有识别出来。无论如何，孩子 divs 躺在外面`#main`。如何强制将子 div 包含在其中`#main`？（除了减少 的宽度`#primary`，这对我没有影响）

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-08-15T05:57:07.757

您需要添加`overflow: auto`到`#main`：

```
#main {
    clear: both;
    padding: 1.625em 0 0;
    overflow: auto;
} 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-08-15T07:57:13.213

您应该将 clearfix 方法与伪元素 :after 一起使用，因为在您的情况下， clear 并没有真正应用在孩子之后。

```
#main:after {
    content: ".";
    display: block;
    clear: both;
    visibility: hidden;
    line-height: 0;
    height: 0; 
} 
```

[http://jsfiddle.net/zfsjb/](http://jsfiddle.net/zfsjb/)

**编辑 2020：**

一段时间以来，这个更简单的解决方案也同样有效：

```
#main::after {
    content: "";
    display: table;
    clear: both;
} 
```

此外，现在建议使用`::after`而不是`:after`匹配其他伪元素。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-15T06:02:51.283

尝试 `width: 100%; position:absolute`给予`#main`.

***[这](http://jsfiddle.net/blasteralfred/NjdJG/1/)***是一个有效的现场演示

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2020-04-22T23:14:26.557

在某些情况下，您只需将 min-height 应用于父元素

# regex - 数据注释正则表达式检查指定数字之间的数字

> ID：11964697
> 
> 赞同：2
> 
> 时间：2012-08-15T05:55:31.893
> 
> 标签：regex, asp.net-mvc-3

如何编写包含格式如**00:00的正则表达式**

**00 之前：**必须是 0-24 之间的数字和**00 之后：**必须是 0-59 之间的数字

我在下面有我的代码，但不知何故它无法正常工作。

```
[RegularExpression(@"[0-24]+:[0-59]", ErrorMessage = "Format was invalid")] 
```

例如

00:59 被接受

25:60 不被接受

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T07:12:35.897

像这样简单的事情呢？

```
[RegularExpression(@"(([0-1]?[0-9])|([2][0-3])):([0-5]?[0-9])", ErrorMessage = "Format was invalid")] 
```

它匹配从`00:00`到的任何时间`23:59`。请注意，它不需要书面的前导零，因此也将接受像`7:00`或`7:3`七点后三分钟的时间（这与您提出问题的方式一致）。

如果您希望它需要前导零，只需删除问号...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T06:48:33.503

试试这个`"([0-9]{1,2}|100):(1?[0-9]{1,2}|200)"`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-15T06:54:06.490

试试这个：`\b(?:2[0-4]|1?\d):(?:5\d|[1-4]?\d)\b`

前导零：
`\b(?:2[0-4]|1\d|0?\d):(?:5\d|[1-4]\d|0?\d)\b`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-15T07:10:31.537

为什么你需要解决每一个问题。`REGEX`你不应该把事情复杂化。分解代码。这将使你的代码更具可读性和流畅性。

下面的方法产生了完美的匹配。

```
 public IEnumerable<string> getValues(string s)//this method returns the valid matches from s
    {
        Regex r=new Regex(@"\d{1,}:\d{1,}");
        foreach(Match m in r.Matches(s))
        {
        string[] str=m.Value.Split(':');

        if((int.Parse(str[0])>=0 && int.Parse(str[0])<=24) && (int.Parse(str[1])>=0&&int.Parse(str[1])<=59))
        yield return str[0]+":"+str[1];
        }
    } 
```

通过使用 for-each 语句来使用上述方法！

```
foreach(string s in getValues("5:16 100:200"))//getValues method yields the perfect match
Console.WriteLine(s);//5:16 
```

# visual-studio-2010 - 为 Android 安装 Xamarin Mono

> ID：11964700
> 
> 赞同：5
> 
> 时间：2012-08-15T05:55:43.647
> 
> 标签：visual-studio-2010, mono, xamarin.android, monodevelop, xamarin

我正在尝试为 Android 安装 Xamarin 的 Mono，最初它说为此我需要 JDK、Android SDK、Mono Develop，然后是最重要的软件包，即用于 Visual Studio 和 Mono Develop 的 Android 的 Mono ...

所以我尝试了手动安装：

我有JDK。我下载了 Monodevelop 及其先决条件。我下载了适用于 Windows7 的 Android SDK 修订版 20，然后为了完全安装 Android AVD 和 SDK，我安装了 SDK 平台工具、Google USB 驱动程序、系统映像（仅适用于 API 14）和 SDK平台 14..

现在我尝试了 Xamarin，它说 Android SDK 没有安装，将被下载并安装..所以我查看了日志并下载了 SDK Platforms 7,8,10,12

现在你可以在手动安装以下所有 sdk 平台后告诉你吗？

android-7 ("Android SDK Platform 2.1_r3")
android-8 ("Android SDK Platform 2.2_r3")
android-10 ("Android SDK Platform 2.3.3._r2")
android-12 ("Android SDK Platform 3.1, 修订版3")
android-14 ("Android SDK 平台 4.0")

我只想让 Xamarin 检测到我安装了 Android SDK。

**我是否必须安装这些版本的系统映像才能让 Xamarin 检测 Android SDK？**我只有 API 14 的系统映像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T18:42:06.390

作为一般经验法则，依靠 Xamarin 的自动安装过程，我的运气要好得多。他们已经非常彻底地检测（并自动下载）所有需要的组件。您有机会查看他们的文档[吗](http://docs.xamarin.com/android/getting_started/installation/Installation_for_Windows)？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-26T20:03:14.930

如果您想在 Visual Studio 中使用 Xamarin 的 Mono for Android 并希望 Visual Studio 检测您的 android sdk，请转到

> Visual Studio -> 工具 -> Xamarin -> Android 设置

并设置**Android SDK 位置**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-19T04:03:51.327

Xamarin 的跟踪器上已经有许多关于安装程序的错误报告，例如

[https://bugzilla.xamarin.com/show_bug.cgi?id=859](https://bugzilla.xamarin.com/show_bug.cgi?id=859)

因此，如果您找不到与您遇到的问题相匹配的现有项目，您应该报告新项目。

# c - 字节数组中下一个字节的大小

> ID：11964702
> 
> 赞同：-1
> 
> 时间：2012-08-15T05:56:16.743
> 
> 标签：c, arrays, byte

我有一个 unsigned char 并向它添加整数，但我想获取`sizeof`下一个字节（即`sizeof` `unsigned short int`或`unsigned int`等等）。

以下代码演示了我想要的：

```
#include <stdio.h>

static void write_ushort(unsigned char *b, unsigned short int value) { b[1] = value >> 8; b[0] = value; }
static void write_ulong(unsigned char *b, unsigned long int value) { write_ushort(b + 2, value >> 16); write_ushort(b, value); }

static unsigned short int read_ushort(const unsigned char *b) { return b[1] << 8 | b[0]; }
static unsigned long int read_ulong(const unsigned char *b) { return read_ushort(b + 2) <<16 | read_ushort(b); }

int main() {
     unsigned char b[2];
     unsigned int v0;       /* 4 */
     unsigned short int v1; /* 2 */

     v0 = 200; v1 = 1235;
     write_ushort(&b[0], v0); write_ulong(&b[1], v1);

     /* what i expect printf to output is:
      * 4 2 
      * but it obviously outputs 1 1 */
     printf("%d %d\n", read_ushort(&b[0]), read_ulong(&b[1]));
     printf("%d %d\n", (int)sizeof(b[0]), (int)sizeof(b[1]));
     return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T06:03:57.583

C 是静态类型的，你不能仅仅通过分配一些东西来改变变量（或数组）的数据类型。实际上，您根本无法更改变量的数据类型：变量（几乎完全）对应于某个内存块，其大小在编译时定义。您可以强制转换变量，以便将它们视为特定操作的不同类型，但内存块的大小始终相同。

* * *

而且，由于变量只是一块内存，因此计算机（或编译器）无法知道您正在使用`char[2]`数组来存储 a`short`或 a `long`。您必须自己跟踪这一点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-15T06:05:54.753

这是不可能的。运算符将`sizeof`返回类型的大小，或变量声明类型的大小。您无法从中删除任何其他内容，并且在将数字分配给新变量之前，您的代码不会跟踪数字存储在哪种类型的变量中。

无论`v0`or的类型如何`v1`，当它们存储在数组的元素中时，它们都会转换为`unsigned char`.

如果你想`4 2`作为输出，你需要传递`sizeof(v0)`和`sizeof(v1)`到`printf`，或者以其他方式跟踪它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-15T06:23:03.087

这是一个主要问题：

```
write_ulong(&b[1], v1); 
```

您获取第二个字节（双字节数组的）并将其`write_ulong`作为*四*字节数组处理。这意味着您要在原始数组之外写入几个字节`b`并覆盖堆栈。这是未定义的行为，会使您的程序表现得非常奇怪。

# git - msysgit - 如何使用 gitk 在提交忽略大小写时搜索字符串

> ID：11964704
> 
> 赞同：0
> 
> 时间：2012-08-15T05:56:52.747
> 
> 标签：git, msysgit, gitk

我敢肯定这个问题看起来很简单。我有一个 git 存储库，我正在 gitk 中查看它。有一个选项：

查找`Next` `prev`提交添加/删除字符串：*一些字符串* `IgnCase` `All fields`

有些提交包含*Some String*（就像我刚刚对它的大小写一样），如果我完全按照大小写搜索它，gitk 将显示匹配项。但是，如果我像上面那样使用*一些字符串*进行搜索，则没有匹配项。也许已经很晚了，我很累，但为什么这不起作用？这里有人用msysgit吗？我正在使用 git 版本 1.7.11.msysgit.1。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T21:15:13.597

gitk`git diff-tree -S<string>`在这种情况下内部调用，它执行区分大小写的搜索。事实上，`git diff-tree`似乎甚至接受一个（有点无证的）“-i”选项来忽略这种情况，但 gitk 并没有利用它。简而言之，这是 gitk 中的一个错误，因为它应该在搜索添加/删除的字符串时禁用“IgnCase”或使用“-i”。

# oracle - 在 Dapper.Net 中指定类型映射

> ID：11964708
> 
> 赞同：0
> 
> 时间：2012-08-15T05:57:17.397
> 
> 标签：oracle, dapper

Dapper.Net 中有没有办法插入代码以进行类型之间的映射？我将 Dapper.Net 与 oracle 一起使用，而 Dapper.Net 不会将我的 int16（这就是我的布尔值在 oracle 中表示的方式）转换为布尔值。我查看了代码，我认为 Dapper.Net 期望从 DataReader 返回的类型与对象上的类型相匹配。我想我可以更新代码来做我想做的事，但是我必须从一个版本到另一个版本来维护它。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-08-15T17:15:07.347

一种选择是在查询中进行强制转换，例如：

```
declare @val as int;
set @val = 1;
select CAST(@val as bit); 
```

注意：上面的代码是针对 SQL Server 的，但你应该明白...

# iphone - iOS Bar 顶部类似于 UINavigationBar styleBlack

> ID：11964709
> 
> 赞同：0
> 
> 时间：2012-08-15T05:57:17.367
> 
> 标签：iphone, ios, xcode, uinavigationcontroller, uinavigationbar

我没有使用导航控制器，但我想在 UIViewController 的顶部创建一个类似于 UINavigationBar 且样式为 UIBarStyleBlack 的栏。

我怎么能做这样的事情？谢谢！

iOS、xcode 4.3.3、ARC

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T06:03:37.760

你应该遵循这个：

通常导航栏高度是`44.0f`；

```
- (void)viewDidLoad
{
    UINavigationBar *navBar = [[UINavigationBar alloc] initWithFrame:CGRectMake(0, 0, [UIApplication sharedApplication].statusBarFrame.size.width, "your_want_height")];
    navBar.barStyle = UIBarStyleBlack;

    [[self view] addSubview:navBar];

    [super viewDidLoad];
} 
```

# javascript - Backbone.js 在保存前修改模型中的数据

> ID：11964713
> 
> 赞同：3
> 
> 时间：2012-08-15T05:57:43.090
> 
> 标签：javascript, backbone.js

我想知道当我在模型上调用`set`or`save`方法时如何转换数据。专门将输入的日期字符串转换为纪元时间。

我知道我可以在视图中转换它，但据我所知，这在我的验证中效果不佳。

模型代码在[这里，](https://github.com/tominated/vendotron/blob/master/src/app/models/receipt.js)如果您有兴趣。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T08:15:21.053

我可以收集到你有两个选择：

### 1 在您的视图中转换它们

这意味着您可以为视图滚动自己的转换，或者使用 Backbone.modelbinder 之类的东西为您进行转换。然后你必须修改你的验证方法来接受一个纪元日期。我个人更喜欢这个，我认为它适合 UI 来处理验证用户输入的格式正确并转换为正确的单位，并让模型处理验证值是否在可接受的范围内。

### 2 在您的模型中转换它们

Backbone 不提供这种开箱即用的功能。如果您将某物设置为某物，则没有简单的方法将其转换为其他东西，尤其是在`validate`and之间`set`。基本上你最好的选择是`set`使用类似的东西来推出你自己的 -function

```
// Inside the set function
...
if (!this._validate(attrs, options)) return false; // real line in the set func
// insert something like this, after validate you know the values are eligible for conversion
attrs = this.convert(attrs); // a custom func that converts attributes to right units
...
// set continues as usual 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-15T08:41:59.507

您可以覆盖模型中的同步方法：

```
, sync: function(method, model) {
    if(method === 'update'){
        // change you model here
    }
} 
```

这将在数​​据发送到后端服务器之前调用。“方法”表示“创建”或“更新”。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-15T07:52:54.917

根据消息来源， validate 是在设置和保存之前调用的唯一回调。~~您可以直接在属性对象上设置验证方法中的值。~~不幸的是，此时您无法对属性进行任何更改。

您可以使用像[backbone.getters.setters](https://github.com/berzniz/backbone.getters.setters)这样的插件来执行此操作，因为它看起来[不会是](https://github.com/documentcloud/backbone/issues/1043)添加到主干的功能。

# c# - 为什么线程进入睡眠模式C#

> ID：11964716
> 
> 赞同：1
> 
> 时间：2012-08-15T05:58:07.543
> 
> 标签：c#, .net, multithreading

我有这段代码运行了大约 2 个小时。之后程序停止回答，我在 VS 中暂停它并检查它在哪一行执行。我在 Parallel 语句中停下来，说了一些关于“等待线程加入并停止睡眠”的内容。

很明显，我的多线程经验很少，所以我不知道为什么会这样。我认为进入 while 的线程将被隔离并等待在 foreach 中启动的所有其他线程。

```
while (true)
        {
        Parallel.ForEach(servers, server => // It stopped here
        {

            Console.WriteLine(string.Format("Checking: {0} Thread: {1}", server.Hostname, Thread.CurrentThread.ManagedThreadId));
            try
            {
               // Do some network stuff
            }
            catch (Exception e)
            {
                Console.WriteLine(e.Message.ToString());
            }
        });
} 
```

更新 1

做一些网络工作是在 1500 毫秒内进行一些 UDP 发送和接收超时。我这里也有一些基于实体框架的数据库。所以很可能会出错。但是我仍然不确定是什么原因造成的。如果套接字（我的 UDP 东西和 DB 东西）正在运行并超过超时，它们将引发一个将被“处理”的异常

这还不够吗？我可以为整个线程设置某种超时。如果它还没有加入 5000 毫秒杀死它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T06:07:40.827

“做一些网络工作”将是我看到的第一件事（特别是：它是否有可能无限期地阻塞 - 可能在`Read`没有发送但没有关闭的流上没有超时）。如果任何“做一些网络工作”代码块，那将阻止整个`Parallel.ForEach`，因为它不会从*每个*项目完成`.ForEach`之前返回。

 *发现`Parallel.ForEach`等待连接并不意外（毕竟`Parallel.ForEach` *是拆分和连接） - 重要的问题是：**还发生了什么*，即*其他*线程在做什么。

但是，我还想问一下是否有人只是简单地按下`pause`了键盘（暂停控制台输出），或者不小心在控制台区域上单击拖动（可以进入复制/粘贴模式，这再次暂停控制台输出）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T06:29:27.890

如果您希望这只需要几秒钟，请在没有的情况下运行代码`Parallel.ForEach`，然后您将能够轻松查看阻塞的内容，因为它都在您的主线程上。

如果您在 VS2010 上执行此操作，那么您还可以通过使用 Visual Studio 中的“并行堆栈”调试窗口来查看发生了什么。见这里：http: [//msdn.microsoft.com/en-us/library/dd998398.aspx](http://msdn.microsoft.com/en-us/library/dd998398.aspx)

如果您没有多线程编程经验，那么我会从一个简单且`Thread`基于标准的程序开始，并熟悉调试工具（例如，您将需要线程调试窗格），然后再开始使用 Task Parallel 进行调试图书馆 ( `Parallel.[...]`)。*

# python - 探索 Python 练习

> ID：11964720
> 
> 赞同：0
> 
> 时间：2012-08-15T05:58:31.997
> 
> 标签：python, python-3.x

我正在从Timothy Budd的*Exploring Python一书中学习 Python。*本章的练习之一是：

15\. `randint`random 模块的函数可用于产生随机数。例如，对 的调用`random.randint(1, 6)`将以相等的概率产生值 1 到 6。编写一个循环 1000 次的程序。在每次迭代中，它都会调用两次`randint`来模拟掷骰子。计算两个骰子的总和，并记录每个值出现的次数。在循环之后，打印总和数组。您可以使用本章前面显示的惯用语来初始化数组：

`times = [0] * 12 # make an array of 12 elements, initially zero`

我可以在数组中打印总和，但我不明白记录每个值出现的次数的概念。另外，有什么目的`times = [0]`？这是我打印总和的代码：

```
 #############################################
#   Program to print the sum of dice rolls  #
#############################################

from random import randint
import sys

times = [0] * 12

summation = []

def diceroll():

    print "This program will print the"
    print "sum of numbers, which appears"
    print "after each time the dice is rolled."
    print "The program will be called 1000 times"

    for i in range(1,1000):

        num1 = randint(1,6)
        num2 = randint(1,6)

        sum = num1 + num2
        summation.append(sum)
        #times[i] = [i] * 12
    print summation
    #print times

diceroll() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T06:08:53.477

`times[0] * 12`启动一个包含 12 个值为 0 的元素的列表。接下来要做的是

```
times[s] += 1 #adds 1 to the number of times s occurs 
```

这类似于使用 dict 对值进行编码，但更简单。

`times = [0]`初始化一个名为 times 长度为 1 且值为 0 的列表。习惯用法`times = [0] * 12`表示 times 是一个包含 12 个零的列表。

如果您希望能够在没有 keyerror when 的情况下使用它`num1==num2==6`，您需要这样做，`times = [0]*13`因为 python 是一个 0 索引系统。

旁注：不要`sum`用作变量名，因为它是内置函数（预定义）并且您不想覆盖它。使用`times[sum([num1,num2])] += 1`或`times[num1+num2]`代替。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T06:28:43.473

要计算出现次数：

```
times = [0]*13
for _ in range(1000):
    sum_ = randint(1, 6) + randint(1, 6)
    times[sum_] += 1

print(times[2:]) 
```

sum_ 的可能值包括 2...12。可能`times`的索引包括 0...12。

`times[i]`对应于`sum_ == i`1000 次尝试中出现的次数。

注意：`times[0]`并且`times[1]`总是为零，因为`sum_ > 1`

`[x]*3`产生`[x, x, x]`它是一个更好的版本：

```
L = []
L.append(x)
L.append(x)
L.append(x) 
```

关于您的代码的其他评论：

*   `print something`在 Python 3 上是一个错误
*   `for i range(1, 1000)`是错的。它产生从 1 到 999 的 i（包括 999 次迭代而不是 1000 次）。`range`不包括上限，因为它对编程间隔的客户化。

# java - 构建应用程序时出错

> ID：11964722
> 
> 赞同：0
> 
> 时间：2012-08-15T05:58:45.560
> 
> 标签：java

当我参与构建应用程序特定应用程序时，我得到了类似这样的错误。任何人请帮助我在我的应用程序中找到问题。

```
warning: [options] bootstrap class path not set in conjunction with -source 1.6
D:\Sirojan's Files\OOP\AsiaHospital\src\java\com\asiahospital\servlet\captcha\CaptchaServlet.java:9: error: package com.sun.image.codec.jpeg does not exist
import com.sun.image.codec.jpeg.JPEGCodec;
D:\Sirojan's Files\OOP\AsiaHospital\src\java\com\asiahospital\servlet\captcha\CaptchaServlet.java:10: error: package com.sun.image.codec.jpeg does not exist
import com.sun.image.codec.jpeg.JPEGImageEncoder;
D:\Sirojan's Files\OOP\AsiaHospital\src\java\com\asiahospital\servlet\captcha\CaptchaServlet.java:40: error: cannot find symbol
            JPEGImageEncoder jpegEncoder = JPEGCodec.createJPEGEncoder(jpegOutputStream);
  symbol:   class JPEGImageEncoder
  location: class CaptchaServlet
D:\Sirojan's Files\OOP\AsiaHospital\src\java\com\asiahospital\servlet\captcha\CaptchaServlet.java:40: error: cannot find symbol
            JPEGImageEncoder jpegEncoder = JPEGCodec.createJPEGEncoder(jpegOutputStream);
  symbol:   variable JPEGCodec
  location: class CaptchaServlet
4 errors
1 warning
D:\Sirojan's Files\OOP\AsiaHospital\nbproject\build-impl.xml:851: The following error occurred while executing this line:
D:\Sirojan's Files\OOP\AsiaHospital\nbproject\build-impl.xml:284: Compile failed; see the compiler error output for details.
BUILD FAILED (total time: 2 seconds) 
```

这个错误说 Import JPEGImageEncode 但我已经在特定的 Servlet 中导入。下面的最后两个错误行。

```
851: <webproject2:javac destdir="${build.classes.dir}" gensrcdir="${build.generated.sources.dir}"/> 
```

## 284：

这是我的验证码 Servlet

```
package com.asiahospital.servlet.captcha;

import com.asiahospital.util.MyCaptchaService;
import com.octo.captcha.service.CaptchaServiceException;
import com.sun.image.codec.jpeg.JPEGCodec;
import com.sun.image.codec.jpeg.JPEGImageEncoder;
import java.awt.image.BufferedImage;
import java.io.ByteArrayOutputStream;
import java.io.IOException;
import javax.servlet.ServletException;
import javax.servlet.ServletOutputStream;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

public class CaptchaServlet extends HttpServlet {

    @Override
    protected void doGet(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {
        byte[] captchaChallengeAsJpeg = null;
        // the output stream to render the captcha image as jpeg into
        ByteArrayOutputStream jpegOutputStream = new ByteArrayOutputStream();
        try {
            // get the session id that will identify the generated captcha.
            // the same id must be used to validate the response, the session id
            // is a good candidate!
            String captchaId = request.getSession().getId();
            // call the ImageCaptchaService getChallenge method
            BufferedImage challenge = MyCaptchaService.getInstance().getImageChallengeForID(captchaId,
                    request.getLocale());

            // a jpeg encoder
            JPEGImageEncoder jpegEncoder = JPEGCodec.createJPEGEncoder(jpegOutputStream);
            jpegEncoder.encode(challenge);
        } catch (IllegalArgumentException e) {
            response.sendError(HttpServletResponse.SC_NOT_FOUND);
            return;
        } catch (CaptchaServiceException e) {
            response.sendError(HttpServletResponse.SC_INTERNAL_SERVER_ERROR);
            return;
        }

        captchaChallengeAsJpeg = jpegOutputStream.toByteArray();

        // flush it in the response
        response.setHeader("Cache-Control", "no-store");
        response.setHeader("Pragma", "no-cache");
        response.setDateHeader("Expires", 0);
        response.setContentType("image/jpeg");
        ServletOutputStream os = response.getOutputStream();
        os.write(captchaChallengeAsJpeg);
        os.flush();
        os.close();

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T06:05:23.533

`com.sun.image.codec.jpeg.JPEGCodec`是 Sun 专有的 API，您不应使用它。我认为您应该阅读[此线程](http://www.java.net/node/662849)并使用图像 I/O 重新实现。

# php - 回声 $xml_data->asXML(); 什么都不输出

> ID：11964727
> 
> 赞同：2
> 
> 时间：2012-08-15T05:59:21.310
> 
> 标签：php, xml-parsing, simplexml

这是一个（非常）简化的 PHP 文件，说明了问题（包括我正在使用的 XML）：

```
<?php
$xml_data = new SimpleXMLElement('http://www.americanhistoryusa.com/wp-content/campaign_trail/election_map_2012.xml', NULL, TRUE);
print_r($xml_data); //Outputs expected XML data in print_r
echo $xml_data->asXML(); //Outputs absolutely nothing
?> 
```

*   我 1000% 确定 $xml_data 是一个 simpleXML 对象
*   我见过使用相同的语法 $xml_data->asXML(); 在大约 20 个不同的地方。
*   如果这需要任何潜在的兼容性/弃用问题，我正在使用 PHP 版本 5.2.17？

这里可能出了什么问题？我想做的就是以标准文本形式回显 $xml_data 。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T06:17:48.597

`// Outputs absolutely nothing`只是因为您在浏览器中检查它，浏览器不会为您显示xml内容。（您可以检查 html 源代码，就在那里。）

或者，如果您想在浏览器中显示它，请尝试

```
echo "<pre>".htmlentities($xml_data->asXML())."</pre>"; 
```

# android - 在 android 2.2 和 2.3 上播放视频，但在 Android 4.0.4 上不播放

> ID：11964730
> 
> 赞同：3
> 
> 时间：2012-08-15T05:59:40.783
> 
> 标签：android, media-player, android-videoview, live-streaming

我正在开发 android 应用程序来播放直播。他们在 OS 2.2 和 2.3 上运行良好。给我们的新设备是 OS 4.0.4，每次我都会出错；onErrorListener() 方法中的媒体错误未知。这是我的代码

```
 mVideoView = new VideoView(this);// (VideoView)
    mVideoView.setId(id_mVideoview);

    RelativeLayout.LayoutParams lp = new RelativeLayout.LayoutParams(
            LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT);
    lp.addRule(RelativeLayout.ALIGN_PARENT_LEFT);
    lp.addRule(RelativeLayout.ALIGN_PARENT_RIGHT);
    lp.addRule(RelativeLayout.ALIGN_PARENT_TOP);
    lp.addRule(RelativeLayout.ALIGN_PARENT_BOTTOM);

    mVideoView.setLayoutParams(lp);

    mVideoView.setOnKeyListener(this);
    mVideoView.setOnErrorListener(new MediaPlayer.OnErrorListener() {

        public boolean onError(MediaPlayer arg0, int arg1, int arg2) {
            // TODO Auto-generated method stub
            mHandler.removeCallbacksAndMessages(null);
            Toast.makeText(
                    streamplayer_filmstrip.this," Video cannot be        played", Toast.LENGTH_LONG)
                    .show();
            try {
                Thread.sleep(3000);
                Go_Back();
            } catch (InterruptedException e) {
                // TODO Auto-generated catch block
                Log.d("VidError",
                        "Exception :: " + e.toString() + e.getMessage());
                Toast.makeText(streamplayer_filmstrip.this,
                        "On Error Ex ::" + e.toString(), Toast.LENGTH_LONG)
                        .show();
                e.printStackTrace();
            }
            return true;
        }
    });

    mVideoView.setOnPreparedListener(new MediaPlayer.OnPreparedListener() {

        public void onPrepared(MediaPlayer arg0) {
                    // doneSomething        
                    });

       mVideoView.setVideoURI(Uri.parse(getStreamURL("some_url_for_live_stream")));

        mVideoView.postInvalidateDelayed(100);
        mVideoView.setMediaController(null);
        if (mView1.getVisibility() == View.GONE)
            mVideoView.requestFocus();
        else {
            ll_PopUp.bringToFront();
            mView1.requestFocus();
        }
        mVideoView.start(); 
```

非常感谢任何帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T09:38:58.353

根据设备类型，Android 中视频的处理方式不同，您应该提及您的设备以及您使用的流媒体类型，android 支持 rtsp 流媒体，对于其他版本，您的设备可能支持也可能不支持流媒体类型。

# linux - 如何在 Netbeans 中显示 unicode 变量字符串

> ID：11964735
> 
> 赞同：0
> 
> 时间：2012-08-15T06:00:34.323
> 
> 标签：linux, netbeans, netbeans-7

我最近改用 Netbeans 来开发我的 C++ 代码，但我遇到了一个奇怪的问题。在尝试逐步观看程序时，Netbeans 没有正确显示 Unicode 变量的值，而 ASCII 字符没有任何问题。我检查了我的环境设置，但找不到任何有用的东西。谁能告诉我如何解决这个问题？（我在 ubuntu 中使用 Netbeans）

最好的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T15:33:54.407

您在控制台中看到输出时遇到问题吗？如果是这样，请查看：[Netbeans 控制台不显示孟加拉语 unicode 字符](https://stackoverflow.com/questions/7219249/netbeans-console-does-not-display-bangla-unicode-characters)以获得可能的解决方案。

# css - 使用带有 line-height 属性的列 div 将文本框与其标签对齐

> ID：11964739
> 
> 赞同：0
> 
> 时间：2012-08-15T06:01:26.810
> 
> 标签：css

[我使用此处](https://stackoverflow.com/a/11767328/1484513)提出的行高方法将文本框与其标签对齐。我并没有简单地使用 width 属性，因为我希望它能够在标签文本发生变化时动态调整。为了让 Firefox（没有尝试过其他浏览器）将行高应用到带有输入的列，我不得不使用这个 hack（注意`<div class="hack">`）：

**HTML**

```
 <div class="textbox-column label">
        <div>User Name:</div>
        <div>Password:</div>
    </div>
    <div class="textbox-column input">
        <div><div class="hack">#</div><input type="textbox" name="username" /></div>
        <div><div class="hack">#</div><input type="password" name="password" /></div>
    </div>
    <div class="clear"></div> 
```

**CSS**

```
div.clear {
    clear:  both;
}

.textbox-column {
    line-height:1.6em;
}
.textbox-column.label {
    float:  left;
    margin-right:1em;
}
.textbox-column.input {
    float:  right;
}
.textbox-column .hack {
    display: inline;
    width: 1em;
    margin-right: -1em;
} 
```

任何人都可以提出更清洁的解决方案吗？

这是此代码的现场演示：http: [//jsfiddle.net/fbe7P/](http://jsfiddle.net/fbe7P/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T06:10:58.790

当事物组合在一起时，CSS 效果最好，所以我会将控件分组到行中。

此外，这种方法的优点是它对于小屏幕尺寸的降级效果很好。

**HTML**：

```
<div class="row">
    <label for="username">Username:</label>
    <input type="text" id="username" />
</div>

<div class="row">
    <label for="password">Password:</label>
    <input type="password" id="password" />
</div>​ 
```

**CSS**：

```
.row {
    overflow: auto;
}

.row label {
    float: left;
    min-width: 100px;
}

.row input {
    float: right;
} 
```

**演示：http: [//jsfiddle.net/ezp9H/2/](http://jsfiddle.net/ezp9H/2/)**

# rabbitmq - 芹菜工人/服务器可以接受来自非芹菜生产者的任务吗？

> ID：11964742
> 
> 赞同：6
> 
> 时间：2012-08-15T06:02:11.637
> 
> 标签：rabbitmq, celery

我想使用使用 java nio 编写的彗星服务器来发送实时更新。接收信息时，我希望它扫描数据，并通过rabbitmq 将任务发送到工作线程。理想情况下，我希望 celery 服务器位于 rabbit 的另一端，管理一个处理这些任务的工作线程池。

但是，据我了解，celery 是在rabbitmq 的两端工作的，它本质上是通过嵌入消费者和生产者的代码中来扮演生产者和消费者的角色。有没有办法像我上面描述的那样设置芹菜？谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-15T09:05:01.303

不必使用 Celery 发布消息。您可以从您自己的应用程序向 RabbitMQ 或其他代理发布消息，并使用 Celery 来消费任务。

Celery 使用简单的消息[协议](http://docs.celeryproject.org/en/latest/internals/protocol.html)。您可以在应用程序中实现客户端。

如果您不想实现协议的客户端，您可以实现一个简单的 http 服务器，它接受请求并进行适当的调用。像[这样](https://github.com/mher/flower/blob/master/flower/urls.py#L50)。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2016-01-23T13:06:33.407

是的，当然！

您可以添加`Custom Message Consumers`到 celery 应用程序。

请参考 celery 文档中的[Extensions and Bootsteps](http://docs.celeryproject.org/en/latest/userguide/extending.html)。

这是上面链接中的示例代码的一部分：

```
from celery import Celery
from celery import bootsteps
from kombu import Consumer, Exchange, Queue

my_queue = Queue('custom', Exchange('custom'), 'routing_key')

app = Celery(broker='amqp://')

class MyConsumerStep(bootsteps.ConsumerStep):

    def get_consumers(self, channel):
        return [Consumer(channel,
                         queues=[my_queue],
                         callbacks=[self.handle_message],
                         accept=['json'])]

    def handle_message(self, body, message):
        print('Received message: {0!r}'.format(body))
        message.ack()
app.steps['consumer'].add(MyConsumerStep) 
```

测试它：

> python -m celery -A 主要工作者

另请参阅：[将 Celery 与现有的 RabbitMQ 消息一起使用](https://stackoverflow.com/a/12689936/3199890)

# linq - Linq 加入存在

> ID：11964743
> 
> 赞同：0
> 
> 时间：2012-08-15T06:02:41.100
> 
> 标签：linq, join, contains

我正忙着重写一个系统，并且正在使用 Linq 查询从数据库中提取数据。我习惯于普通的旧 TSQL 和存储过程，所以我的 Linq 技能不是最好的。我有一个 sql 查询，我尝试在 Linq 中重写它，其中包含一个连接、where 子句和 IN 语句。我做对了，但是当我运行 sql 查询时，我得到的值与 Linq 查询不同。某处我错过了一些东西，找不到原因。

这是SQL：

```
select 
    isnull(Sum(QtyCC) + Sum(QtyEmployee), 0) *
    isnull(Sum(UnitPrice), 0)[TotalRValue]             
from 
    tbl_app_KGCWIssueLines a
        inner join tbl_app_KGCWIssue b on b.IssueNrLnk = a.IssueNrLnk
where   
    b.CreationDate >= '2011-02-01' and 
    a.IssueNrLnk IN (
        select 
            IssueNrLnk
        from 
            tbl_app_KGCWIssue
        where   
            CustomerCode = 'PRO002' and   
            ISNULL(Tier1,'') = 'PRO002' and   
            ISNULL(Tier2,'') = 'HAMD01' and   
            ISNULL(Tier3,'') = '02' and   
            ISNULL(Tier4,'') = '02001' and  
            ISNULL(Tier5,'') = 'PTAHQ001' and   
            ISNULL(Tier6,'') = '035' and   
            ISNULL(Tier7,'') = '' and   
            ISNULL(Tier8,'') = '' and   
            ISNULL(Tier9,'') = '' and   
            ISNULL(Tier10,'') = ''
) 
```

这是Linq：

```
ctx.ObjectContext.tbl_app_KGCWIssue
    .Join(ctx.ObjectContext.tbl_app_KGCWIssueLines, 
        i => i.IssueNrLnk, l => l.IssueNrLnk, (i, l) => new { i, l })
    .Where(o => o.i.CreationDate >= IntervalStartDate)
    .Where(p => ctx.ObjectContext.tbl_app_KGCWIssue
        .Where(a => 
            a.CustomerCode == CustomerCode && 
            a.Tier1 == employee.Tier1 && 
            a.Tier2 == employee.Tier2 && 
            a.Tier3 == employee.Tier3 && 
            a.Tier4 == employee.Tier4 && 
            a.Tier5 == employee.Tier5 && 
            a.Tier6 == employee.Tier6 && 
            a.Tier7 == employee.Tier7 && 
            a.Tier8 == employee.Tier8 && 
            a.Tier9 == employee.Tier9 && 
            a.Tier10 == employee.Tier10)
        .Select(i => i.IssueNrLnk)
        .Contains(p.l.IssueNrLnk))
    .Sum(p => p.l.UnitPrice * (p.l.QtyEmployee + p.l.QtyCC)); 
```

# c# - 检查字符串是否包含列表中的元素并将其存储

> ID：11964747
> 
> 赞同：0
> 
> 时间：2012-08-15T06:03:10.657
> 
> 标签：c#, asp.net, list

我的目标是检查字符串是否包含列表中的任何字符串值，存储该值并将其包装在 HTML 标记中。我有点迷失在这里。

我的列表：

```
public List<string> AccessModifiers
{
    get { return _accessModifiers ?? (_accessModifiers = new List<string>()); }
} 
```

使用单独的方法添加值：

```
AccessModifiers.Add("public");
AccessModifiers.Add("private");
AccessModifiers.Add("protected");
AccessModifiers.Add("internal");
AccessModifiers.Add("protected internal");
AccessModifiers.Add("void"); 
```

假设我将文本`protected void TagListView_ItemDataBound(object sender, ListViewItemEventArgs e)`发送到下面的代码中，我想要的是获取关键字**并将 matchItems**`protected`包装`void`在我的 HTML 标记中。感觉 Find 方法应该检查是否找到了该项目，而不是整个列表，但我在这里有点迷失了。这是我到目前为止得到的：

 **```
 foreach (var item in AccessModifiers)
        {
            if (UsedItems == null) // If the session is null...
            {
                UsedItems = new List<string>(); // ...a new one is initiated
            }

            if(!UsedItems.Contains(item)) // Check if the iterated item is found in the session-list
            {
                bool match = AccessModifiers.Any(ArticleTextBox.Text.Contains);
                string matchedItem = AccessModifiers.Find(ArticleTextBox.Text.Contains);

                if (match == true)
                {
                    string openTag = "<span class='accessModifiers'>";
                    string closeTag = "</span>";
                    string newModifier = openTag + matchedItem + closeTag;
                    newText = newText.Replace(matchedItem, newModifier);
                    UsedItems.Add(matchedItem);  // Add the matchedItem (used item) to the session-list not to be iterated again
                }
            }
        }
        return newText; 
```

我此时只能获取`protected`要存储的关键字，而不是`void`. 看起来它会比我迄今为止想出的更简单。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T06:07:49.217

> 看起来它会比我迄今为止想出的更简单。

恰恰相反。特别是，虽然您给出的示例很简单，但一般情况并非如此：

```
public static void thisvoidmethodisstatic()
{
    Console.WriteLine("private within text");
} 
```

基本上，您需要能够更好地理解代码结构的代码。简单的搜索和替换不会削减它。

[我在 csharpindepth.com 上使用](http://csharpindepth.com/CodeFormatterTool.aspx)的代码荧光笔是基于 Jared Parsons 编写的 VB 荧光笔。我会看看我是否能找到原始源 - 但如果没有，我相信还有其他可用的开源代码荧光笔。

编辑：如果您真的*对*只是进行简单的搜索和替换感到满意，那么您肯定会使它变得比您需要的更复杂。

*   您正在遍历所有访问修饰符并在循环*中*查找所有这些修饰符
*   我强烈建议摆脱条件列表分配 - 总是事先分配一个空列表。除此之外，它还避免了您必须在其他地方检查无效性。

然后你就得到了：

```
foreach (var modifier in AccessModifiers)
{
    if (ArticleTextBox.Text.Contains(modifier))
    {
        UsedItems.Add(modifier);
        string openTag = "<span class='accessModifiers'>";
        string closeTag = "</span>";
        string newModifier = openTag + matchedItem + closeTag;
        newText = newText.Replace(matchedItem, newModifier);
    }
} 
```**

# java - 连接错误 Java MySQL

> ID：11964753
> 
> 赞同：2
> 
> 时间：2012-08-15T06:03:48.477
> 
> 标签：java, mysql, jdbc

我已经安装了 MySQL 连接器 J、WAMP [MySQL 附带的] 和 Java JDK 1.7，但它总是通过异常**com.mysql.jdbc.Driver**

编码

```
import java.sql.*;

public class sou
{
   public static void main (String[] args)
   {
       Connection conn = null;
       try
       {
           String userName = "root";
           String password = "";
           String url = "jdbc:mysql://localhost/cms";
           Class.forName ("com.mysql.jdbc.Driver").newInstance ();
           conn = DriverManager.getConnection (url, userName, password);
            conn.close();
       }
       catch (Exception e)
       {
           System.err.println (e.getMessage());
       }
   }
} 
```

我将其编译为

```
 C:\Users\Sou\Desktop>javac -cp "D:\Program Files\MySQL\Connector J 5.1.20.0\mysql-connector-java-5.1.20-bin.jar" sou.java 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T06:08:31.347

`mysql-connector-java-5.1.20-bin.jar`在编译和运行应用程序时，您必须包含在您的 CLASSPATH 中。

```
C:\Users\Sou\Desktop>javac -cp .;"D:\Program Files\MySQL\Connector J 5.1.20.0\
                                    mysql-connector-java-5.1.20-bin.jar" sou.java

C:\Users\Sou\Desktop>java -cp .;"D:\Program Files\MySQL\Connector J 5.1.20.0\
                                    mysql-connector-java-5.1.20-bin.jar" sou 
```

并且无需调用 newInstance() 方法。

```
 Connection conn = null;
   try{
       String userName = "root";
       String password = "";
       String url = "jdbc:mysql://localhost/cms";
       Class.forName ("com.mysql.jdbc.Driver");
       conn = DriverManager.getConnection (url, userName, password);
   }
   catch (Exception e){
       System.err.println (e.getMessage());
   }finally{
       if(conn!=null){
          try{
             conn.close();
          }catch(Exception ex) { }
       }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T06:12:04.380

你可以试试这个：

```
DriverManager.registerDriver(new com.mysql.jdbc.Driver()); 
```

代替

```
Class.forName ("com.mysql.jdbc.Driver").newInstance (); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T13:31:05.323

将此代码插入您的程序以检查类路径 System.out.println(System.getProperty("java.class.path"));

# iphone - 这是正确的语法吗，myField_ = [newValue retain]？

> ID：11964761
> 
> 赞同：0
> 
> 时间：2012-08-15T06:05:00.217
> 
> 标签：iphone, objective-c

我正在尝试学习Objective C。我遇到了编译器在幕后生成的以下代码`@property(nonatomic, retain) NSString* myField`

```
-(NSString*) myField
{
   return myField_; //assuming myField_ is the name of the field.
}

-(void) setMyField:(NSString*) newValue
{
  if(newValue != myField_)
  {
     [myField_ release];
     myField_ = [newValue retain];
  }
} 
```

现在我的问题是；为什么要在 newValue 上调用保留？相反，应使用以下语法：

```
myField_ = newValue;
[myField_ retain]; 
```

请告知为什么不使用上述语法，因为根据我的理解，我们想保留 ? 指向的对象`myField_`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T06:15:33.760

它们是相同的（两者都是正确的）。您不**复制**对象 - 保留返回与保留相同的指针，因此编写起来更短更简洁

```
ivar = [newObj retain]; 
```

而不是单独分配和保留对象。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-15T06:18:08.247

两种语法都是正确的。在第一种情况下，我们还保留了指向的对象，`myField`因为我们分配`[newValue retain]`了它。

# javascript - JS 或 JQUERY 中是否有“startscroll”和“stopscroll”事件？

> ID：11964763
> 
> 赞同：2
> 
> 时间：2012-08-15T06:05:09.363
> 
> 标签：javascript, jquery, scrollbar, dom-events, javascript-framework

我正在寻找“startscroll”和“stopscroll”事件来跟踪用户何时开始和停止使用窗口滚动。纯 JavaScript 或 jQuery 框架中有事件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T07:23:59.777

有`window.onscroll`, 和一个[jQuery 函数](http://api.jquery.com/scroll/)来包装它。

# php - Ajax 在服务器返回结果时没有显示响应

> ID：11964765
> 
> 赞同：1
> 
> 时间：2012-08-15T06:05:14.637
> 
> 标签：php, ajax

Ajax 向服务器发送[GET](http://questionbank.freevar.com/site/agent_manager_response.php?cmd=fsave&id=1&phone=25411577856&account_active=1&fname=shantanu&lname=saha&time_zone=2&street=asdf%20lsjdf&suite=asdf&ring=0&city=dhaka&state=bangladesh&zip=52145&call_time=110&call_length=2.50&call_count=152)请求。服务器也返回成功结果。

```
Server response:
[{"result":"success"}] 
```

但是ajax 没有显示任何responseText。Firebug 以红色显示获取请求。 ![在此处输入图像描述](../Images/f7f195bffc641fcc9cef80e6cea48d17.png)

Ajax 代码部分：

```
var params = "&id=" +id + "&phone="+phone + "&account_active=" + activeAccount + "&fname="+fname + "&lname="+lname + "&time_zone="+timezone + "&street="+street+"&suite="+suite+"&ring="+ring+"&city="+city+"&state="+state +"&zip="+zip+"&call_time="+callTime +"&call_length="+callLength+"&call_count="+callCount;  

var xmlhttp = getXMLObject();
xmlhttp.open("GET",'agent_manager_response.php?cmd=fsave'+params,true);
xmlhttp.onreadystatechange=function(){
   if(xmlhttp.readyState==4 && xmlhttp.status==200){
    var data = eval(xmlhttp.responseText);
       if(data[0].result == "success"){
        alert('Successfully saved');
       }
      else{
        alert("Error saving data\nError: " + data[0].result);
      }
    }
}
xmlhttp.send(null); 
```

服务器代码：

```
$result = mysql_query($query,$con);
$data=array();
if(!$result)
     array_push($data,array('result'=>mysql_error()));
else
     array_push($data,array('result'=>'success'));

echo json_encode($data); 
```

Ajax 响应 DOM 选项卡（来自 firebug）

```
DONE 4  
HEADERS_RECEIVED  2
LOADING  3
OPENED   1
UNSENT   0
getchannel  undefined
mozBackgroundRequest  false
multipart    false
onloadend   null
onuploadprogress  null
readyState    4
response     ""
responseText   ""
responseType   ""
responseXML   null
status      0
getstatusText  ""
getupload    undefined
withCredentials   false
abort    abort()
addEventListener  addEventListener()
dispatchEvent   dispatchEvent()
getAllResponseHeaders   getAllResponseHeaders()
getInterface    getInterface()
getResponseHeader   getResponseHeader()
open   open()
overrideMimeType    overrideMimeType()
removeEventListener removeEventListener()
send      send()
sendAsBinary  sendAsBinary()
setRequestHeader   setRequestHeader() 
```

网络标签状态： ![在此处输入图像描述](../Images/3ca92c8a9980da5cd6bb24fe512bd2e9.png)

# 已编辑

这就是我在 net 选项卡中的全部内容： ![在此处输入图像描述](../Images/92228cd350d45c72781bb076655e3ce9.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T07:02:23.983

添加内容类型：

```
xmlhttp.setRequestHeader('Content-Type','application/json'); 
```

和变化：

```
var data = eval(xmlhttp.responseText); 
```

至

```
var data = eval( '(' + xmlhttp.responseText + ')' ); 
```

# javascript - Javascript，如果鼠标在某个位置，则停止动画

> ID：11964766
> 
> 赞同：0
> 
> 时间：2012-08-15T06:05:20.863
> 
> 标签：javascript, jquery

我被这个问题困住了，想不出除此之外的方法。看看图片

[http://i.stack.imgur.com/7xxjS.png](https://i.stack.imgur.com/7xxjS.png)

![问题的参考图片](../Images/7c68f9bf31312210215916697de24579.png)

现在的问题是，div 不是 li 的一部分，并且在离开 li（并进入 div）时，li 会倒塌。这需要处理，我被困在如何做到这一点上。

下面是javascript代码

```
 a.cache.brand_nav.find("li a").hover(function (c) {
        if (a.isTablet && c.currentTarget.href !== f) d.location = c.currentTarget.href;
        else {
            a.cache.brand_nav.find("li a").css('top', '0px'); //Collapsing all li's before expanding one
            c = b(this);
            c.stop(true, true).animate({ top: '-' + c.find("img").height() + 'px' }, 250, 'easeInCirc');
            $('#bgIdeas').stop(true, true).animate({ bottom: '+' + parseInt(parseInt(c.find("img").height())).toString() + 'px' }, 500, 'easeInCirc', false);
            $('.outerBGs').hide();
            $('#backgrounds').hide();
            if (this.className == 'ideas') {
                $('#ideasBG').stop(true, true).show(5000, 'easeOutExpo');
                $('#bgIdeas').empty();
                $('#bgIdeas').append('<p style=" position:absolute; left:22%; margin-top:10px;"><img src="images/ideas/ideas_worldofideas_thumb.jpg"><br>World of Ideas</p>         <p style=" position:absolute; left:32%; margin-top:10px;"><img src="images/ideas/ideas_history_thumb.jpg"><br>History</p>           <p style=" position:absolute; left:42%; margin-top:10px;"><img src="images/ideas/ideas_gulahmed_thumb.jpg"><br>About Gul Ahmed</p>          <p style=" position:absolute; left:52%; margin-top:10px;"><img src="images/ideas/ideas_partner_thumb.jpg"><br>Be an Ideas Partner</p>');
            }
            else
                if (this.className == 'women') {
                    $('#womenBG').stop(true, true).show(5000, 'easeOutExpo');
                    $('#bgIdeas').empty();
                    $('#bgIdeas').append('<p style=" position:absolute; left:42%; margin-top:10px;"><img src="images/women/women_fabrics_thumb.jpg"><br>Fabric</p>          <p style=" position:absolute; left:52%; margin-top:10px;"><img src="images/women/women_readytowear_thumb.jpg"><br>Ready to Wear</p>         <p style=" position:absolute; left:62%; margin-top:10px;"><img src="images/women/women_shoes_thumb.jpg"><br>Shoes</p>           <p style=" position:absolute; left:72%; margin-top:10px;"><img src="images/women/women_bags_thumb.jpg"><br>Bags</p>');
                }
                else
                    if (this.className == 'men') {
                        $('#menBG').stop(true, true).show(5000, 'easeOutExpo');
                        $('#bgIdeas').empty();
                        $('#bgIdeas').append('<p style=" position:absolute; left:20%; margin-top:10px;"><img src="images/men/men_fabrics_thumb.jpg"><br>Fabric</p>          <p style=" position:absolute; left:30%; margin-top:10px;"><img src="images/men/men_readytowear_thumb.jpg"><br>Ready to Wear</p>         <p style=" position:absolute; left:61%; margin-top:10px;"><img src="images/men/men_shoes_thumb.jpg"><br>Shoes</p>           <p style=" position:absolute; left:71%; margin-top:10px;"><img src="images/men/men_accesories_thumb.jpg"><br>Accessories</p>');
                    }
                    else
                        if (this.className == 'kids') {
                            $('#kidsBG').stop(true, true).show(5000, 'easeOutExpo');
                            $('#bgIdeas').empty();
                            $('#bgIdeas').append('<p style=" position:absolute; left:30%; margin-top:10px;"><img src="images/kids/kids_readytowear_thumb.jpg"><br>Ready to Wear</p>         <p style=" position:absolute; left:40%; margin-top:10px;"><img src="images/kids/kids_shoes_thumb.jpg"><br>Shoes</p>         <p style=" position:absolute; left:50%; margin-top:10px;"><img src="images/kids/kids_accessories_thumb.jpg"><br>Accessories</p>');
                        }
                        else
                            if (this.className == 'homes') {
                                $('#homesBG').stop(true, true).show(5000, 'easeOutExpo');
                                $('#bgIdeas').empty();
                                $('#bgIdeas').append('<p style=" position:absolute; left:30%; margin-top:10px;"><img src="images/home/bed_linen_thumb.jpg"><br>Bed Linen</p>            <p style=" position:absolute; left:40%; margin-top:10px;"><img src="images/home/bed_basics_thumb.jpg"><br>Bed Basics</p>            <p style=" position:absolute; left:50%; margin-top:10px;"><img src="images/home/kitchen_textile_thumb.jpg"><br>Kitchen Textile</p>          <p style=" position:absolute; left:60%; margin-top:10px;"><img src="images/home/bath_thumb.jpg"><br>Bath Accessories</p>            <p style=" position:absolute; left:70%; margin-top:10px;"><img src="images/home/home_accessories_thumb.jpg"><br>Home Accessories</p>');
                            }
    }
    },
            function () {
                c = b(this);
                    $('.outerBGs').stop(true, true).hide(5000, 'easeOutExpo');
                $('#backgrounds').stop(true, true).show(1000, 'easeOutExpo');
                $('#bgIdeas').stop(true, true).animate({ bottom: '0px' }, 250, 'easeInCirc');
                c.stop(true, true).animate({ top: '0px' }, 250, 'easeInCirc');
                //            $(document).unbind('mousemove');
                //            $(document).mousemove(function (e) {
                //                var offset = $('#bgIdeas').offset();
                //                result = offset.left <= e.pageX && offset.left + $('#bgIdeas').outerWidth() > e.pageX && offset.top <= e.pageY && offset.top + $('#bgIdeas').outerHeight() > e.pageY;
        //                //To see if mouse coordinates are under the area of div.
        //                //alert(parseInt(parseInt(offset.left) + parseInt($('#bgIdeas').outerWidth())) + '     ' + e.pageX + '         ' + parseInt(parseInt(offset.top) + parseInt($('#bgIdeas').outerHeight())) + '        ' + e.pageY);
        //                                        
        //                if (result == false) {
        //                    clearInterval(myRecFunc);
        //                    $('.bgs').show();
        //                    continueSlideShow();
        ////                    $('#bgIdeas').stop(true, true).animate({bottom: "0px"},500, "easeOutExpo", function () {$(document).unbind('mousemove');});
        ////                    c.stop(true, true).animate({top: "0px"},{ duration: 500, queue: false });

        //                    
        //                }
        //                else {
        //                }
        //            });
    }); 
```

上面注释的代码，实际上是我之前通过 mousemove 事件尝试的一种方法，通过捕获鼠标位置并限制函数在鼠标在 DIV 上时进入代码，但它会导致随机运行不正常，我想这一定是因为绑定和解绑事件的速度如此之快。拜托，我需要这方面的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T06:53:42.173

这可以使用两个类来完成，每个类都有`display:block`.

每当 li 至少有一个这些类时，它就会显示出来。所以 li 本身和 div 各自删除一个显示的类 on`mouseover`并删除它自己的（各自的）类 on `mouseout`。

[这是一个例子](http://jsfiddle.net/xmeQT/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T07:48:41.957

这是一个更好，完全不同的答案

[例子](http://jsfiddle.net/qdbE5/)

`div`在和的最低共享父级上放置一个委托侦听器`li`。在示例中，这是`body`. 然后，该侦听器检查事件是否在这两个元素之一上，如果不是，则对`li`.

编辑以包含子元素。

# c# - 实现 2 个类似类的更好方法

> ID：11964771
> 
> 赞同：4
> 
> 时间：2012-08-15T06:05:39.473
> 
> 标签：c#, xml, serialization

我正在使用 C#从[XPDL 标准导入和导出。](http://www.wfmc.org/xpdl.html)

我已经使用[XPDL 2.1](http://www.xpdl.org/documents.html)为类编写了层次结构，并使用`XmlSerializer`. 我需要实现[XPDL 2.2](http://www.xpdl.org/standards/xpdl-2.2/XPDL%202.2%20%282012-08-30%29.pdf)。

类的结构发生了变化。还有其他参数。有`Artifacts`哪些是根类的子类的列表，但较新的版本`DataObject`从所有工件中都丢失了。DataObjects 从一个额外的 List 移动到`WorkflowProcess`.

我需要支持[XPDL 2.1](http://www.xpdl.org/documents.html)和[XPDL 2.2](http://www.xpdl.org/standards/xpdl-2.2/XPDL%202.2%20%282012-08-30%29.pdf)。实现它们的最佳方法是什么？

我可以看到**3**种方式：

1.  复制并粘贴现有层次结构并进行必要的修复（太糟糕了！）
2.  创建一个基类并创建两个子类。一个用于 2.1，另一个用于 2.2（但维护起来会不会太复杂？）
3.  使用`enum`变量实现条件序列化。该类将包含 2.1 和 2.2 的超集（此选项似乎过于复杂）

请让我知道是否有更好的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-24T21:53:56.360

在您的解决方案中创建两个额外的单独项目。第一个应该包含要从 XPDL 2.1 解析的类。

第二个是 2.2，它应该包含第一个项目文件夹中的所有 cs 文件作为链接。不要手动管理它们，而是将这些行添加到您的第二个项目文件中：

```
<Compile Include="..\ParserXPDL21\Classes\**\*.cs">
  <Link>Classes\file.cs</Link>
</Compile> 
```

请记住，每次从第一个项目中添加或删除文件时都要重新加载第二个项目，否则 Visual Studio 将无法编译它，直到您这样做。

对于第二个项目，在项目属性中声明一个条件常量：XDPL22

现在您可以像这样修改第一个项目文件以在同一个文件中维护两个版本：

```
#if !XDPL22
namespace ParserXPDL21
#else
namespace ParserXPDL22
#endif
{
    [Serializable]
    public class Root
    {
#if !XDPL22
        public Artifact[] Artifacts { get; set; }
#endif
        public int NormalProperty1 { get; set; }
        public int NormalProperty2 { get; set; }
        public int NormalProperty3 { get; set; }

    }
} 
```

之后，您可以从主项目中引用这两个项目，并使用两个不同版本的类。

我知道这似乎是一种非常优雅的方式，但是当您必须制作大量重复的代码时它会有所帮助。

您仍然需要一种方法来检查您要阅读的 XPDL 版本。可能您可以只查看文件扩展名，但如果它与您可以尝试读取 2.2 相同，并且如果它引发异常或数据不正确认为这是 2.1，或者您可以使用 XmlReader 手动读取 XML 并检查在反序列化之前。

# facebook - Facebook like 按钮盒

> ID：11964775
> 
> 赞同：-2
> 
> 时间：2012-08-15T06:06:00.630
> 
> 标签：facebook

每个人..

我的问题是我在我的网站中动态生成的 php 页面中添加了类似 facebook 的按钮。 [这是这样一个页面](http://www.lankainstitute.com/1281/Namal%20Sanjeewa/)

但它没有按我的预期工作。当我喜欢 facebook 时不显示我喜欢的信息。

非常感谢任何评论。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T06:21:25.113

您`og:url`的 OpenGraph 元标记中有 URL 编码形式，这是错误的。

您的页面位于：

```
http://www.lankainstitute.com/1281/Namal%20Sanjeewa/ 
```

这是您应该在`og:url`标签中使用的 URL，而不是：

```
http%3A%2F%2Fwww.lankainstitute.com%2F1281%2FNamal%2520Sanjeewa%2F 
```

顺便说一句，您应该使用[调试工具](http://developers.facebook.com/tools/debug/)来发现 OpenGraph 数据中的错误。

# c# - 如何获取上下文菜单单击发生位置的父对象属性

> ID：11964777
> 
> 赞同：0
> 
> 时间：2012-08-15T06:06:13.803
> 
> 标签：c#, windows-phone-7, xaml, contextmenu

我正在尝试根据上下文菜单的单击事件为我的应用程序创建辅助活动磁贴，并且我需要公开 ContextMenu 父对象的一些属性，但我不确定如何执行此操作。基本上，我的 MainPage 上有两个 HubTiles，每个都使用相同的 ContextMenu 点击事件。在 ContextMenu click 事件中`MenuItem_Tap`，我调用了一个方法，该方法`CreateLiveTile`应该获取 HubTile 的属性，其中发生了 contextmenu 单击，以便在将固定到开始屏幕的辅助磁贴中使用。我所拥有的如下，但我不知道如何公开发生 ContextMenu 点击的 HubTile 的属性

主页.xaml

```
 <ListBox Grid.Row="0" x:Name="tileList" toolkit:TiltEffect.IsTiltEnabled="True">
                <ListBox.ItemsPanel>
                    <ItemsPanelTemplate>
                        <toolkit:WrapPanel Orientation="Horizontal" />
                    </ItemsPanelTemplate>
                </ListBox.ItemsPanel>
                <ListBox.ItemTemplate>
                    <DataTemplate>
                        <toolkit:HubTile Title="{Binding Title}" Margin="3"
                                         Notification="{Binding Notification}"
                                         DisplayNotification="{Binding DisplayNotification}"
                                         Message="{Binding Message}"
                                         GroupTag="{Binding GroupTag}"
                                         Source="{Binding ImageUri}"
                                         Tap="hubTile_Tap">
                            <toolkit:ContextMenuService.ContextMenu>
                                <toolkit:ContextMenu x:Name="menu">
                                    <toolkit:MenuItem Header="pin to start" Tap="MenuItem_Tap"/>
                                </toolkit:ContextMenu>
                            </toolkit:ContextMenuService.ContextMenu>
                        </toolkit:HubTile>

                    </DataTemplate>
                </ListBox.ItemTemplate>
            </ListBox> 
```

MainPage.xaml.cs

```
public MainPage()
    {
        InitializeComponent();

        CreateHubTiles();
    }

private void CreateHubTiles()
    {
        List<TileItem> tileItems = new List<TileItem>() 
        {
            new TileItem() { ImageUri = "/Images/shareStatusImage.jpg", Title = "status", /*Notification = "last shared link uri",*/ Message = Settings.statusMessage.Value, GroupTag = "TileGroup" },
            new TileItem() { ImageUri = "/Images/shareLinkImage.jpg", Title = "link", /*Notification = "last shared status message",*/ Message = "last shared link uri", GroupTag = "TileGroup" }, 
        };

        this.tileList.ItemsSource = tileItems;
    }

private void MenuItem_Tap(object sender, System.Windows.Input.GestureEventArgs e)
    {
        //How to expose which HubTile was selected and its properties?
        //HubTile tap = sender as HubTile;  //not working, sent from ContextMenu not HubTile

        //(sender as MenuItem).
        //(sender as UIElement).
        //string parent = VisualTreeHelper.GetParent((sender as DependencyObject)).ToString();

        //attempt to pass the selected HubTile instance to CreateLiveTiles method
        CreateLiveTile(tap);
    }

    private void CreateLiveTile(HubTile hubtile)
    {
        string _title = hubtile.Title.ToString();

        //var Tile = ShellTile.ActiveTiles.FirstOrDefault(x => x.NavigationUri.ToString().Contains("DefaultTitle=" + LiveTile.Title));
        var Tile = ShellTile.ActiveTiles.FirstOrDefault(x => x.NavigationUri.ToString().Contains("DefaultTitle=" + _title));

        if (Tile == null)
        {
            try
            {
                var LiveTile = new StandardTileData
                {
                    Title = hubtile.Title,
                    BackgroundImage = ((System.Windows.Media.Imaging.BitmapImage)hubtile.Source).UriSource,
                    //Count = 1,
                    BackTitle = hubtile.Title,
                    //BackBackgroundImage = new Uri("", UriKind.Relative),
                    BackContent = hubtile.Message,
                };

                ShellTile.Create(new Uri("/MainPage.xaml?DefaultTitle=" + LiveTile.Title, UriKind.Relative), LiveTile);
            }
            catch (Exception)
            {
                MessageBox.Show("This tile could not be pinned", "Warning", MessageBoxButton.OK);
            }
        }
        else
        {
            MessageBox.Show("This tile has already been pinned", "Notice", MessageBoxButton.OK);
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T06:33:25.047

`PlacementTarget`是您要查找的内容，如果发件人是 MenuItem，则其父项将是 ContextMenu 并且您可以从中获取放置此 contextMenu 的 PlacementTarget。

```
private void MenuItem_Tap(object sender, System.Windows.Input.GestureEventArgs e)
{
   HubTitle tap = (((sender as MenuItem).Parent as ContextMenu).PlacementTarget
                                                            as HubTitle);

   //attempt to pass the selected HubTile instance to CreateLiveTiles method
   CreateLiveTile(tap);
} 
```

# c# - 缺少命名空间或程序集引用时出错

> ID：11964781
> 
> 赞同：5
> 
> 时间：2012-08-15T06:06:46.993
> 
> 标签：c#, .net, console-application

我正在编写正确的代码，但出现错误 - 缺少命名空间或程序集引用。代码有问题还是我遗漏了什么？

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace ConsoleApplication5
{
    class Program
    {
        static void Main(string[] args)
        {
            int i = 0;
            int sum = 0;
            int[] arr = new int[] { 1, 2 };

            do
            {
                {
                    sum += arr[1];
                    Console.WriteLine("Wow");
                    i++;
                }
            }
            while (i < 3);
        }
    }
} 
```

> 错误是：错误无法使用集合初始化程序初始化类型“int”，因为它没有实现“System.Collections.IEnumerable”

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2015-03-04T15:12:00.077

我的命名空间以`Console`(ie `MyProject.Console`) 结尾，这弄乱了对`Console.Write`. 在这种情况下，要么编写完全限定名称，`System.Console.Write`要么更改命名空间。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-08-15T06:11:52.773

> 我正在编写正确的代码

不要从这个假设开始。始终假设编译器是正确的，而您的代码是错误的。

您没有显示任何`using`指令。在这种情况下，您只需要

```
using System; 
```

（无论是在代码的最顶部还是在`namespace`声明中。）

或将您的`WriteLine`电话更改为：

```
System.Console.WriteLine("Wow"); 
```

如果这*不能解决*它（或者如果您已经有了这样的`using`指令但忘记包含它），那么您的项目可能有些损坏 - 它不像您使用任何外来类型。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-15T06:11:02.920

导入`System`命名空间或只使用`System.Console.WriteLine("...");`

```
using System;

namespace TestNs
{
   public class Test
    {
      static void Main() 
       {
         Console.WriteLine("Hello World");
        }
     }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2021-01-02T08:06:38.033

我遇到了类似的问题。我使用的命名空间名称以 .Console 结尾，因此与 System.Console 发生冲突

```
using System;

namespace Test.Console
{
    class Program
    {
        static void Main(string[] args)
        {
            Console.WriteLine("Hello World!");
        }
    }
} 
```

我将 Test.Console 更改为 Test.ConsoleApp，并为我解决了问题

```
using System;

namespace Test.ConsoleApp
{
    class Program
    {
        static void Main(string[] args)
        {
            Console.WriteLine("Hello World!");
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-15T06:11:37.407

您的控制台应用程序的最低要求应该有这个

```
using System;
using System.Collections.Generic;
using System.Text;

namespace TestConsole
{
    class Program
    {
        static void Main(string[] args)
        {
        }
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-15T07:16:15.767

感谢大家的帮助，我设法在你们的帮助下解决了这个问题:)

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace ConsoleApplication5
{
    class Program
    {
        static void Main(string[] args)
        {

            int i = 0; //initialize integer i=0
            int sum = 0; // initialize integer sum = 0;
            int[] arr = new int[]{1, 2, 3, 4}; // array containing 4 integers elements
            do
            {

                {
                    sum+=arr[i];    //sum each integer in array and store it in var sum

                    i++;        //increment i for each element of array
                    Console.WriteLine(sum); //output the var sum conatining values after each increment
                }

            }
            while(i<=3); //check condition for number of elements in array

        }
    }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-08-13T22:57:03.657

使用命名空间 of`Myproject.App`也会导致问题，方式与`MyProject.Console`（根据上面contactmatt的回答）相同。

# c# - C#统一方法始终检查串行com端口是否在多个按钮上打开

> ID：11964786
> 
> 赞同：0
> 
> 时间：2012-08-15T06:07:44.327
> 
> 标签：c#

通常我会这样做来检查：

```
 if (sp.IsOpen)
            {
                return;
            }
            else MessageBox.Show("Please open COM port.", "Status",   MessageBoxButtons.OK, MessageBoxIcon.Error); 
```

但是我的winform中有很多按钮。大约20个按键，每个按键在发射前需要检查COM口是否打开。

唯一的方法是在每个按钮中添加上述编码吗？

还是有一次性的方法？

# iphone - 如何使用默认初始值在 iphone 应用程序中加载 UISlider 然后我们可以增加

> ID：11964790
> 
> 赞同：-5
> 
> 时间：2012-08-15T06:08:42.710
> 
> 标签：iphone, objective-c, ipad, uislider

我希望我在 UISlider 中有 4 个值，并且我希望在加载应用程序时应该选择一个默认值。

我希望在加载时显示初始值。

```
 slider=[[UISlider alloc] initWithFrame:CGRectMake(290, 152, 160, 36)];
      slider.minimumValue=0;
      slider.maximumValue=3;
      [slider addTarget:self action:@selector(sliderAction:) forControlEvents:UIControlEventValueChanged]; 
```

滑块事件

```
 -(IBAction)sliderAction:(id)sender 
     {
          NSString*testing=[[NSString alloc] initWithFormat:@"%d",(int)slider.value];
          if([testing isEqualToString:@"0"])
          {
              sliderLabel.text=@"5 (gal/acre)";
              sliderValue=@"5";
          }
          else if([testing isEqualToString:@"1"])
          {
              sliderLabel.text=@"10 (gal/acre)";
              sliderValue=@"10";
          }
          else if([testing isEqualToString:@"2"])
          {
              sliderLabel.text=@"15 (gal/acre)";
              sliderValue=@"15";
          }
          else 
          {
              sliderLabel.text=@"20 (gal/acre)";
              sliderValue=@"20";          
          }    
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T07:16:43.950

如果您需要滑块能够选择离散值 0.0、1.0、2.0 或 3.0，您可能需要处理两个控制器事件：

```
[slider addTarget:self action:@selector(handleSliderValueChanged:) forControlEvents:UIControlEventValueChanged];
[slider addTarget:self action:@selector(handleSliderTouchUpInside:) forControlEvents:UIControlEventTouchUpInside]; 
```

前者需要控制值的变化，后者在用户移开手指后固定滑块销的位置。

要获得谨慎的滑块值，我们可以将其四舍五入：

```
- (float)roundedSliderValue:(UISlider *)slider
{
    return roundf([slider value]);
} 
```

当用户移动滑块时，我们需要获取谨慎的引脚位置：

```
- (void)handleSliderValueChanged:(UISlider *)slider
{
    int idx = (int)[self roundedSliderValue:slider];

    switch (idx) {
    // update UI
    }
} 
```

在使用完成移动滑块后，我们需要更正引脚位置并将值保存为默认值

```
- (void)handleSliderTouchUpInside:(UISlider *)slider
{
    float val = [self roundedSliderValue:slider]
    [slider setValue:val animated:YES];
    [[NSUserDefaults standardUserDefaults] setFloat:val forKey:@"SliderValue"];
} 
```

您可以使用 将`NSUserDefaults`所选值存储为默认值并将其加载到`viewDidLoad`

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    float sliderVal = [[NSUserDefaults standardUserDefaults] floatForKey:@"SliderValue"];
    [self.slider setValue:sliderVal];
} 
```

# excel - 无法获取工作表函数类错误的相关属性

> ID：11964791
> 
> 赞同：1
> 
> 时间：2012-08-15T06:08:46.657
> 
> 标签：excel, vba

当我尝试获取两个数组**Arr1**和**Arr2的相关系数时，我在 VBA 中遇到了这个错误**

```
Dim arr1() As Variant
Dim arr2() As Variant

arr1 and arr2 are initialized in the function.

Dim result As Double
result = Application.WorksheetFunction.Correl(arr1, arr2) 
```

该`Correl`方法抛出异常

“无法获取工作表函数类的相关属性”

任何想法可能是异常的原因。

编辑 ：

我认为当数组之一的所有元素都相同时会出现此问题。在这种情况下，相关系数会导致#DIV0 错误。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T06:38:43.197

基兰，

防止此错误的两种可能的解决方案...但是查看您的数据会更有帮助

1.  您的一个（或两个）变体数组包含字符串而不是数字
2.  您的数组大小不相等

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T06:29:44.260

我认为您忘记了初始化数组。

这个非常简单的例子有效：

```
Public Sub Test()
    Dim arr1() As Variant
    Dim arr2() As Variant
    Dim result As Double

    arr1() = Array(1, 2, 3, 4)
    arr2() = Array(1, 2, 3, 4)

    result = Application.WorksheetFunction.Correl(arr1, arr2)

    MsgBox ("The result is: " & result)
End Sub 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-05-14T01:43:22.737

与许多工作表函数一样，for 的参数`Application.WorksheetFunction.Correl`必须具有 Range，而不是 Variant 类型。

此外`Correl`，这两个范围中的任何一个的函数标准偏差都不能为 0。

空值而不是零有时也会导致此错误。

不遵循这些规则，会导致 OP 遇到完全相同的错误。

```
Dim A as Range, B as Range
Dim myStDevA as Double, myStDevB as Double, myCorrel as Double

myStDevA = Application.WorksheetFunction.StDev(A)
myStDevB = Application.WorksheetFunction.StDev(B)

If myStDevA <> 0 and myStDevB <> 0 Then myCorrel = Application.WorksheetFunction.Correl(A,B) 
```

# python - Python 正则表达式：匹配一个命名组或另一个

> ID：11964798
> 
> 赞同：4
> 
> 时间：2012-08-15T06:09:43.530
> 
> 标签：python, regex

我有一个字符串，可以包含以下内容：

```
lots of text Nov 30  2011 lots more of text 
```

或者

```
lots of text Nov 30 12:48 lots more of text 
```

我要匹配的是该行内的日期。我想要得到的是第一行的以下内容：

```
{'date': 'Nov 30  2011', 'time': None} 
```

或第二行：

```
{'date': None, 'time': 'Nov 30 12:48'} 
```

所以我的尝试是这样的：

```
re.match(
    '^.+((?P<date>\w{3} \d{1,2}  \d{4})|(?P<time>\w{3} \d{1,2}:\d{2})).+', 
    line
) 
```

但这不起作用，它返回`None`。我尝试了其他一些组合，但都没有奏效。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T06:17:26.920

您错过了`<time>`小组中的那一天（例如*“Nov 12:48”*）：

```
(?P<date>\w{3} \d{1,2}  \d{4})|(?P<time>\w{3} \d{1,2} \d{1,2}:\d{2}) 
```

此外，您可能可以匹配该模式而无需`^.+(...).+`- 它除了要求至少在您的日期之前和之后的字符之外并没有增加太多。我还建议用`\s+`or替换空格`+`（空格加号，或者`[ ]+`如果您希望它可见）-在某些地方有双空格，这不太健壮。

另一种选择是避免重复 - 将日期保留在自己的组中，并在时间和年份之间添加交替：

```
(?P<date>\w{3}\s+\d{1,2})\s+(?:(?P<year>\d{4})|(?P<time>\d{1,2}:\d{2})) 
```

工作示例：**[http](http://rubular.com/r/g81Kudu0dY)** ://rubular.com/r/g81Kudu0dY （无名称）

# android - 如何为用户提供在 android 应用程序中选择音乐的选项？

> ID：11964801
> 
> 赞同：0
> 
> 时间：2012-08-15T06:10:08.150
> 
> 标签：android, android-music-player

我是 Android 新手，我需要一条途径来满足我的要求。在我的应用程序中，我需要为用户提供一个选项来从应用程序中选择他们的播放列表。这可能吗？请确认。

我使用以下示例代码进行了尝试，在以下代码中，我尝试从 sd 卡获取文件并在列表视图中显示它们。当我尝试运行应用程序时，我强制关闭。如果我做错了什么，请您调查一下并建议我。

我的测试课。

```
public class TestMediaActivity extends Activity {
/** Called when the activity is first created. */

private static final String MEDIA_PATH = new String("/sdcard/");
private List<String> songs = new ArrayList<String>();
private MediaPlayer mp = new MediaPlayer();
private int currentPosition = 0;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    updateSongList();
}
public void updateSongList() 
{
    System.out.println("In the updateSongList");
    File home = new File(MEDIA_PATH);
    if (home.listFiles(new Mp3Filter()).length > 0) 
    {
        System.out.println("\n In the condition length>0");
            for (File file : home.listFiles(new Mp3Filter())) {
                    songs.add(file.getName());
            }

            setListAdapter( new ArrayAdapter<String>(this,R.layout.test_item, songs));
    }

}

private void setListAdapter(ArrayAdapter<String> arrayAdapter) {
    // TODO Auto-generated method stub
    System.out.println("In the setListAdapter");
}
protected void onListItemClick(ListView l, View v, int position, long id)
{
    currentPosition = position;
    playSong(MEDIA_PATH + songs.get(position));
}
private void playSong(String songPath) {
    try {

            mp.reset();
            mp.setDataSource(songPath);
            mp.prepare();
            mp.start();

            // Setup listener so next song starts automatically
            mp.setOnCompletionListener(new OnCompletionListener() {

                    public void onCompletion(MediaPlayer arg0) {
                            nextSong();
                    }

            });

    } catch (IOException e) {
            Log.v(getString(R.string.app_name), e.getMessage());
    }
}
private void nextSong() {
    if (++currentPosition >= songs.size()) {
        // Last song, just reset currentPosition
        currentPosition = 0;
} else {
        // Play next song
        playSong(MEDIA_PATH + songs.get(currentPosition));
}
}

} 
```

支持类是，

```
public class Mp3Filter implements FilenameFilter 
{

@Override
public boolean accept(File dir, String filename) {
    // TODO Auto-generated method stub
    System.out.println("In the Mp3Filter");
    return (filename.endsWith(".mp3"));
   }

} 
```

而日志猫中的错误是....

```
 08-15 14:49:35.800: E/AndroidRuntime(31871): FATAL EXCEPTION: main
 08-15 14:49:35.800: E/AndroidRuntime(31871): java.lang.RuntimeException: Unable to       start activity     ComponentInfo{com.vsoft.TestMedia/com.vsoft.TestMedia.TestMediaActivity}:  java.lang.NullPointerException
08-15 14:49:35.800: E/AndroidRuntime(31871):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2781)
08-15 14:49:35.800: E/AndroidRuntime(31871):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2797)
08-15 14:49:35.800: E/AndroidRuntime(31871):    at android.app.ActivityThread.access$2300(ActivityThread.java:135)
08-15 14:49:35.800: E/AndroidRuntime(31871):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2132)
08-15 14:49:35.800: E/AndroidRuntime(31871):    at android.os.Handler.dispatchMessage(Handler.java:99)
08-15 14:49:35.800: E/AndroidRuntime(31871):    at android.os.Looper.loop(Looper.java:143)
08-15 14:49:35.800: E/AndroidRuntime(31871):    at android.app.ActivityThread.main(ActivityThread.java:4914)
08-15 14:49:35.800: E/AndroidRuntime(31871):    at java.lang.reflect.Method.invokeNative(Native Method)
08-15 14:49:35.800: E/AndroidRuntime(31871):    at java.lang.reflect.Method.invoke(Method.java:521)
08-15 14:49:35.800: E/AndroidRuntime(31871):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:858)
08-15 14:49:35.800: E/AndroidRuntime(31871):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)
08-15 14:49:35.800: E/AndroidRuntime(31871):    at dalvik.system.NativeStart.main(Native Method)
08-15 14:49:35.800: E/AndroidRuntime(31871): Caused by: java.lang.NullPointerException
08-15 14:49:35.800: E/AndroidRuntime(31871):    at  com.vsoft.TestMedia.TestMediaActivity.updateSongList(TestMediaActivity.java:36)
08-15 14:49:35.800: E/AndroidRuntime(31871):    at com.vsoft.TestMedia.TestMediaActivity.onCreate(TestMediaActivity.java:29)
08-15 14:49:35.800: E/AndroidRuntime(31871):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1065)
08-15 14:49:35.800: E/AndroidRuntime(31871):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2745)
08-15 14:49:35.800: E/AndroidRuntime(31871):    ... 11 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T06:18:25.967

这绝对是可能的。您可能希望`ListView`使用可检查的列表项来显示歌曲。然后连接`ListView`到`SimpleAdapter`你写的一个。`Adapter`需要从 SD 卡（或保存它们的任何地方）中获取歌曲名称，然后提供适当`ListView`的列表项。

**编辑**

```
File home = new File(MEDIA_PATH); 
```

是问题所在。`home`是`null`。原因`null`是找不到文件。您不应该使用它`/sdcard/`来访问 SD 卡，因为 SD 卡目录是设备相关的。你想要的是：

```
File sdCard = Environment.getExternalStorageDirectory(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T08:23:00.850

我从来没有尝试过使用音频，但你不能只用过滤器“audio/*”创建一个意图并调用活动以获得结果吗？

# html - 限制仅在页脚上方的内容

> ID：11964802
> 
> 赞同：1
> 
> 时间：2012-08-15T06:10:24.747
> 
> 标签：html, css

在我的网站中，我有一个高度为 100px 的页脚，页脚的 css 如下所示：

```
.footnote {
  width: 95%;
  height: 100px;

  position: fixed;
  background: url('../images/coolfooter.png') bottom center;

  bottom: 40px;
  left: 30px;
 } 
```

问题是如果我的网页上有太多内容，内容就会开始与页脚重叠。

![在此处输入图像描述](../Images/c26b3a1b3ca5930baa6133725c7d7145.png)

我想将内容限制为始终以某种方式仅出现在页脚上方，以免内容与页脚重叠。如何才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T06:19:48.273

你试过z-index吗？正如其他人所说，不看 html 就很难说。我不是 100% 确定你要的是什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T06:17:04.453

您基本上需要确保内容的底部边距大于或等于页脚的高度，或者（如果内容位于某种容器中）它的容器的底部填充等于或大于页脚的高度。

这是一个相当流行的参考站点，用于执行所谓的“粘性页脚”：[http ://www.cssstickyfooter.com/](http://www.cssstickyfooter.com/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T06:24:21.247

**添加`overflow:auto`到`div.content`应该足够了。**

```
<html>
<head>
  <style type="text/css">
    div.header
    {
      top:0px;
      height:100px;
      max-height:120px;
      min-height:100px;
    }
    div.content
    {
      height:600px;
      max-height:750px;
      overflow:auto;
    }
    div.footer
    {
      height:100px;
      max-height:120px;
      min-height:100px;
      clear:both;
    }
  </style>
</head>
  <body>
    <div class="header"></div
    <div class="content"></div>
    <div class="footer"></div>
  </body>
</html> 
```

# internet-explorer - 如何在 IE 扩展中截取当前网页

> ID：11964809
> 
> 赞同：3
> 
> 时间：2012-08-15T06:11:04.687
> 
> 标签：internet-explorer, browser-extension, webpage-screenshot

到目前为止，我们已经用 Firefox、Safari 和 Chrome 的扩展完成了当前页面的截图——这或多或少都很容易。然而，似乎根本没有任何关于 IE 扩展开发的官方文档，而且在非官方文档中也没有找到任何与截图相关的内容。

这甚至可能吗？谁能指出我正确的方向？谢谢 ：）

# git - 如何使用 .gitignore 忽略目录 (/dir/) 但保留同名的子目录 (/other/dir/)？

> ID：11964814
> 
> 赞同：0
> 
> 时间：2012-08-15T06:11:57.570
> 
> 标签：git

我`dir`在我正在处理的应用程序的顶级目录中有一个目录，我想忽略它。因此，我已将其包含`dir/`在我的`.gitignore`文件中。但是，在另一个文件夹中，我有一个名为`dir`（特别是`other/dir/`）的不同目录。如何在`dir`不忽略子目录的情况下忽略顶层？

会`!other/dir/`做的伎俩？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T06:22:24.783

你可以试试这样的东西吗？

```
/dir/ 
```

然后它应该只忽略`dir`根目录下的文件夹。

# box2d - 我应该删除使用 b2World::CreateBody() 创建的 b2Body 实例吗？

> ID：11964819
> 
> 赞同：0
> 
> 时间：2012-08-15T06:13:08.163
> 
> 标签：box2d

我`b2World::CreateBody()`用来创建一些`b2Body`实例。我应该`delete`在删除实例时明确它们，还是在实例被销毁`b2World`时自动发生这种情况？`b2World`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T06:20:49.337

不，你不必。

```
/// Destruct the world. All physics entities are destroyed and all heap memory is released.
    ~b2World(); 
```

# blackberry - TextField 水平滚动

> ID：11964821
> 
> 赞同：2
> 
> 时间：2012-08-15T06:13:21.657
> 
> 标签：blackberry, horizontal-scrolling, labelfield

[嗨，我已经通过这个链接LabelField Marquee](https://stackoverflow.com/questions/2613062/how-can-i-display-scroll-text-like-marque-in-blackberry-using-j2me)实现了水平滚动文本。但我有一个问题，文本滚动得很好，但它被覆盖在添加的原始文本上。有人知道如何解决这个问题吗？我也尝试通过`invalidate()`但没有用来刷新视图。我添加了我面临的问题的屏幕截图。

任何帮助都是不言而喻的。

谢谢你。

![在此处输入图像描述](../Images/0408fe5b138a384d60c6e8946c98e836.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T14:06:14.253

我建议您将绘画方法更改为下一个：

```
 public void paint(Graphics graphics) {
    currentText = this.getText();
    if (currentChar < currentText.length()) {
        currentText = currentText.substring(currentChar);

    }
    graphics.drawText(currentText, 0, 0, DrawStyle.ELLIPSIS, 200);
} 
```

所以不要调用`super.paint()`你的`paint`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T10:36:14.133

我已经（以更简单的方式）重写了您链接的答案。它工作正常。

```
import net.rim.device.api.ui.Graphics;
import net.rim.device.api.ui.Font;
import net.rim.device.api.ui.DrawStyle;
import java.util.Timer;
import java.util.TimerTask;
import net.rim.device.api.ui.Field;
import net.rim.device.api.ui.component.LabelField;
import net.rim.device.api.ui.container.MainScreen;

public class MyScreen extends MainScreen {

    public MyScreen() {

        super();

        MarqueeLabel testLabel2 = new MarqueeLabel("This is a long long " +
                "long long long long long long long long long long long " +
                "long long marquee", Field.FOCUSABLE);
        add(testLabel2);

    }

    class MarqueeLabel extends LabelField {

        // Here MarqueeLabel code from your SO linked example

    }

} 
```

# c# - 当我在 C# 中使用 xx.Contains 时出现错误消息

> ID：11964823
> 
> 赞同：0
> 
> 时间：2012-08-15T06:14:05.673
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, razor

我正在 ASP MVC Razor 文件中尝试以下代码：

```
 var topic = ViewData["TopicID"];
        var mustBeReplaced = string.Empty;
        var topicValue = Model.Topic;
        var replaceResult = string.Empty;
        if (topic.Contains(topicValue)) {
            mustBeReplaced = "value=\"" + topicValue + "\"";
            replaceResult = mustBeReplaced + " selected=\"selected\"";
            topic = topic.Replace(mustBeReplaced, replaceResult);             
        } 
```

但我收到一条错误消息：

object' 不包含 'Contains' 的定义和最佳扩展方法重载

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-15T06:15:54.963

```
var topic = ViewData["TopicID"]; 
```

返回对象。您需要转换为字符串。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-15T06:17:26.670

尝试这个

```
 var topic = (string)ViewData["TopicID"];
    var mustBeReplaced = string.Empty;
    var topicValue = "11111";
    var replaceResult = string.Empty;
    if (topic.Contains(topicValue))
    {
        mustBeReplaced = "value=\"" + topicValue + "\"";
        replaceResult = mustBeReplaced + " selected=\"selected\"";
        topic = topic.Replace(mustBeReplaced, replaceResult);
    } 
```

# java - 添加使用到 ldap 时出错 [LDAP：错误代码 17 - javaSerializedData：属性类型未定义]

> ID：11964825
> 
> 赞同：1
> 
> 时间：2012-08-15T06:14:43.083
> 
> 标签：java, ldap, openldap, ldapconnection

我使用此代码片段将用户添加到 ldap

```
**public DirContext getLDAPDirContext() throws NamingException {
    final Hashtable envValues = new Hashtable();
    // Assign the JNDI environment values in Map
    envValues.put(Context.INITIAL_CONTEXT_FACTORY, "com.sun.jndi.ldap.LdapCtxFactory");
    envValues.put(Context.PROVIDER_URL, url);
    envValues.put(Context.SECURITY_PRINCIPAL,dn); // specify the username
    envValues.put(Context.SECURITY_CREDENTIALS,password);           // specify the password
    return new InitialDirContext(envValues);
}
public static void main(String arg[]) throws NamingException {
    LdapNew ldapNew = new LdapNew();
    String groupDN ="ou=user,dc=ldap,dc=***,dc=***";
    BasicAttributes myAttrs = new BasicAttributes(true);  //Basic Attributes
    myAttrs.put("uid","chamils");
    myAttrs.put("objectClass","top");
    myAttrs.put("objectClass","dcObject");
    myAttrs.put("objectClass","organization");
    myAttrs.put("objectClass", "inetOrgPerson");
    myAttrs.put("cn","FNAME LNAME");
    myAttrs.put("displayname", "FNAME LNAMEE");
    myAttrs.put("givenname","Chamilseeee");
    myAttrs.put("sn","Thanthrimudaliged");
    myAttrs.put("mail","*******");
    DirContext ctx = ldapNew.getLDAPDirContext();
    ctx.bind("uid=chamils,ou=user,dc=ldap,dc=****,dc=***",myAttrs);
}** 
```

但它给

> 线程“主”javax.naming.directory.InvalidAttributeIdentifierException 中的异常：[LDAP：错误代码 17 - javaSerializedData：属性类型未定义]；剩余名称 'uid=chamils,ou=user,dc=ldap,dc= ***,dc=***' 在 com.sun.jndi.ldap.LdapCtx.processReturnCode(LdapCtx.java:2987) 在 com.sun.jndi.ldap.LdapCtx 的 com.sun.jndi.ldap.LdapCtx.mapErrorCode(LdapCtx.java:3110)。 processReturnCode(LdapCtx.java:2794) 在 com.sun.jndi.ldap.LdapCtx.c_bind(LdapCtx.java:397) 在 com.sun.jndi.ldap.LdapCtx.c_bind(LdapCtx.java:354) 在 com.sun .jndi.toolkit.ctx.ComponentContext.p_bind(ComponentContext.java:596) 在 com.sun.jndi.toolkit.ctx.PartialCompositeContext.bind(PartialCompositeContext.java:183) 在 com.sun.jndi.toolkit.ctx.PartialCompositeContext .bind(PartialCompositeContext.java:173) 在 javax.naming.InitialContext.bind(InitialContext.java:400) 在 LdapNew.main(LdapNew.java:49) 在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 在 sun。反射.NativeMethodAccessorImpl.invoke（NativeMethodAccessorImpl。java:39) 在 sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) 在 java.lang.reflect.Method.invoke(Method.java:597) 在 com.intellij.rt.execution.application.AppMain.main (AppMain.java:120)

这是为什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T11:02:54.637

您需要添加`include schema/java.schema`到您的 OpenLDAP 配置。

# eclipse - Eclipse Juno - 从 Indigo 导入透视图？

> ID：11964826
> 
> 赞同：1
> 
> 时间：2012-08-15T06:14:46.493
> 
> 标签：eclipse, eclipse-indigo, eclipse-juno

我在使用 Eclipse Indigo 的同一个项目上运行新安装的 Eclipse Juno，并注意到它没有保留我的观点 - 有没有办法导入这些？

导入/导出首选项不会获取视角。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T23:10:53.283

@PaulWebster 的回答是正确的。

> Eclipse 4.2 不能从 workbench.xml 中提取旧的透视图并将它们传输到 workbench.xmi。请参阅 bugs.eclipse.org/bugs/show_bug.cgi?id=378811 – Paul Webster

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T06:40:39.283

通过使用 Juno 中的 Indigo 工作区，您应该能够从 Indigo 中保留您的透视图以及其他工作区设置。

为此，请打开 Indigo 并通过转到 File -> Switch Workspace -> Other 来复制工作区的路径。

（在 Juno 中使用 Indigo 工作区文件夹之前，可能值得对其进行备份。）

现在关闭 Indigo，打开 Juno 并通过转到 File -> Switch Workspace -> Other 并粘贴您从 Indigo 复制的路径并按 Enter 键切换到上述工作区。

Juno 将重新启动，然后您应该拥有所有观点。

# swt - 如何将参数化命令传递给 CommandContributionItem

> ID：11964829
> 
> 赞同：2
> 
> 时间：2012-08-15T06:15:03.013
> 
> 标签：swt, eclipse-rcp

使用 Eclipse 和 SWT，我目前正在尝试将`CommandContributionItem`（CCI）作为具有两个文本字段的`Button`a 。`ViewPart`当我按下按钮时，`ParameterizedCommand`应该使用文本字段的当前文本值作为参数来调用我。

我能够像这样将文本字段的初始值传递给 CCI：

```
public void createPartControl(Composite parent) {
    parent.setLayout(new GridLayout(1, false));

    text = new Text(parent, SWT.BORDER);
    text.setLayoutData(new GridData(SWT.FILL, SWT.CENTER, true, false, 1, 1));

    text_1 = new Text(parent, SWT.BORDER);
    text_1.setLayoutData(new GridData(SWT.FILL, SWT.CENTER, true, false, 1, 1));

    Map<String, String> params = new HashMap<String, String>();
    params.put("myString", text.getText());
    params.put("mySecondString", text_1.getText());

    CommandContributionItemParameter p = new CommandContributionItemParameter(getSite(),
            "commandSyso","com.voo.example.commandparameter.simple.sysoCommand",  CommandContributionItem.STYLE_PUSH);
    p.label = "My Label";
    p.parameters = params;
    CommandContributionItem item = new CommandContributionItem(p);
    item.fill(parent);
} 
```

但它是静态的一次性通行证。有没有办法在每次调用 CCI 时动态更新它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T19:42:16.323

`CommandContributionItem`参数本质上是静态的。您不能修改它们，只能创建`CommandContributionItem`.

使用命令时， 的实现`IHandler`应该使用`ExecutionEvent.getApplicationContext()`. 如果是`IEvaluationContext`，则可以使用`org.eclipse.ui.handlers.HandlerUtil`

但是在您的示例中，您需要某种方式将 2 个文本字段的值提供给框架，或者通过实现一个`ISelectionProvider`, an `ISourceProvider`（您可以在其中以新名称提供每个文本字段），或者让您的处理程序检查然后`IViewPart`通过访问器访问信息。

# java - 是什么导致 Bamboo 在 java.net.URLClassLoader.findClass(libgcj.so) 失败

> ID：11964830
> 
> 赞同：0
> 
> 时间：2012-08-15T06:15:16.747
> 
> 标签：java, war, bamboo

这是我的错误日志显示的内容：

```
/WEB-INF/lib/jetty-http-7.2.1.v20101111.jar,file:webapp/WEB-INF/lib/jetty-io-7.2
.1.v20101111.jar,file:webapp/WEB-INF/lib/jetty-jndi-7.2.1.v20101111.jar,file:web
app/WEB-INF/lib/jetty-plus-7.2.1.v20101111.jar,file:webapp/WEB-INF/lib/jetty-sec
urity-7.2.1.v20101111.jar,file:webapp/WEB-INF/lib/jetty-server-7.2.1.v20101111.j
ar,file:webapp/WEB-INF/lib/jetty-servlet-7.2.1.v20101111.jar,file:webapp/WEB-INF
/lib/jetty-util-7.2.1.v20101111.jar,file:webapp/WEB-INF/lib/jetty-webapp-7.2.1.v
20101111.jar,file:webapp/WEB-INF/lib/jetty-xml-7.2.1-atlassian-3.jar,file:webapp
/WEB-INF/lib/mail-1.4.1.jar,file:./], parent=gnu.gcj.runtime.ExtensionClassLoade
r{urls=[], parent=null}}
   at java.net.URLClassLoader.findClass(libgcj.so.7rh)
...
   at java.lang.Class.initializeClass(libgcj.so.7rh)
   ...1 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T06:15:16.747

这是由于服务器丢失了到 Internet 的默认路由。出于某种原因，Bamboo 需要访问互联网（许可证检查？）。

在诊断问题时，我发现默认路由丢失，当我恢复默认路由时，竹子又开始运行了。

# javascript - 点击事件上的 javascript 在 img 标签上无法正常工作

> ID：11964842
> 
> 赞同：0
> 
> 时间：2012-08-15T06:16:20.423
> 
> 标签：javascript, asp.net

我正在尝试使用以下代码打开图像点击链接

```
 <img src="AllScripts/SliderImages/images/1Main.png" alt="" title="" onclick="openSliderImage(id);"  onmouseover="this.style.cursor='hand'"  width="800px" height="300px" id="http://www.google.com" /> 
```

它工作正常，但是当使用 c# 生成图像时，使用 response.write 代码编写代码它不起作用并继续以下链接

```
http://localhost:1234/AllScripts/SliderImages/images/1Main.png 
```

以下代码用于编写html

```
 <% {

                               Response.Write(SlidingImages);
                       }

                    %> 
```

我知道它选择`image src`而不是`image id`图像点击，但为什么呢？这是javascript函数

```
 function openSliderImage(id) {
            alert(id);
            window.open(id, '_blank');
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T06:19:07.293

更改 id （因为您引用了一个名为 id 的 javascript 变量，所以您想要定位图像 id 然后使用`this.id`

```
<img src="AllScripts/SliderImages/images/1Main.png" alt="" title="" onclick="openSliderImage(this.id);"  onmouseover="this.style.cursor='hand'"  width="800px" height="300px" id="http://www.google.com" /> 
```

我还想说您可以删除 onmouseover 并使用 CSS 设置它（如果使用 IE7+）img:hover （或设置一个 cssClass 以便不是所有图像都将成为目标）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T06:24:27.247

使用这样的 id 打开链接似乎是一种 hack。我只是将 url 输出到 like 链接，它必须直接作为函数的参数打开。

```
<img id="googleImg" onclick="openSliderImage('http://www.google.com');" src="AllScripts/SliderImages/images/1Main.png" alt="" title=""   onmouseover="this.style.cursor='hand'"  width="800px" height="300px" /> 
```

您的代码无法运行，因为它将查找名为“id”的 javascript 变量。

# android - 相对布局中的 ArrayAdapter - Android

> ID：11964844
> 
> 赞同：2
> 
> 时间：2012-08-15T06:16:24.923
> 
> 标签：android, android-relativelayout, android-arrayadapter

我正在尝试通过实现[developer.android.com](http://developer.android.com)上给出的示例来重新熟悉 Android 。

我正在RelativeLayouts 上尝试[这个例子](http://developer.android.com/guide/topics/ui/layout/relative.html#Example)。虽然布局对我来说很清楚，但我无法为那里给出的微调器添加功能。这是我想做的事情：
让用户可以选择从未来 7 天的任何一天中选择一个日期来设置警报。为此，我想使用`ArrayAdapter`每次启动应用程序时动态设置的微调器来填充微调器。的内容`ArrayAdapter`将是当前日期和接下来的 7 天。我无法初始化`ArrayAdapter`.
鉴于内容是动态的，是否`ArrayAdapter`最好使用数据结构？

编码：

```
activity_main.xml:

<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <EditText android:id="@+id/reminderName"
        android:hint="@string/reminderNameString"
        android:layout_height="wrap_content"
        android:layout_width="fill_parent"
        />

    <Spinner android:id="@+id/dateSelect"
        android:layout_below="@id/reminderName"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_toLeftOf="@+id/timeSelect"
        android:hint="@string/selectDate"
        />

    <Spinner android:id="@id/timeSelect"
        android:hint="@string/selectTimeString"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_below="@id/reminderName"
        />

    <Button android:id="@+id/setButton"
        android:hint="@string/setString"
        android:layout_below="@id/timeSelect"
        android:layout_alignRight="@id/reminderName"
        android:layout_height="wrap_content"
        android:layout_width="wrap_content"
        android:onClick="onSet"
        />

    <TextView android:id="@+id/text"
        />

</RelativeLayout> 
```

主要功能：

```
package com.example.relativelayout;

import java.util.ArrayList;
import java.util.Date;

import android.app.Activity;
import android.os.Bundle;
import android.util.Log;
import android.view.Menu;
import android.view.View;
import android.widget.ArrayAdapter;
import android.widget.Spinner;

public class MainActivity extends Activity {

    Spinner dates;
    Spinner times;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        /* This function must move like so:
         * 1\. Generate the dates.
         * 2\. Add them to an arrayList
         * 3\. Set the data via an adapter into the spinner.
         * 4\. Set the layout.
         */

        super.onCreate(savedInstanceState);

        Log.v(this.toString(), "Loaded the layout");

        //init ArrayList object to store all the dates.
        ArrayList<String> dates_list = new ArrayList<String>(8);  //there are always only 7 days.

        Date d = new Date();  //initialize the date to current date and time.
        dates_list.add(d.toString());
        //GregorianCalendar g = new GregorianCalendar();
        Log.v(this.toString(), "Current date = " + d.toString());

        for(int i = 0; i < 7; i++) {
            if( (d.getMonth() % 2 != 0) || (d.getMonth() == 8) ) {
                //the month has 31 days.
                int dateAdj = d.getDate();
                if( (dateAdj + i) > 31 ) {
                    dateAdj = (dateAdj + i) - 31;
                    d.setDate(dateAdj);
                    d.setMonth(d.getMonth() + 1);
                } else {
                    d.setDate((dateAdj + 1));
                }
            } else {  //the month has only 30 days
                int dateAdj = d.getDate();
                if( (dateAdj + i) > 30 ) {
                    dateAdj = (dateAdj + i) - 30;
                    d.setDate(dateAdj);
                    d.setMonth(d.getMonth() + 1);
                } else {
                    d.setDate((dateAdj + 1));
                }
            }           
            dates_list.add(d.toString());  //add it to the list.
            //Log.v(this.toString(), "The date today = " + d.toString());
        }

        Log.v(this.toString(), "Printing details of the arrayList");

        /*for(int i = 0; i < 8; i++) {
            Log.v(this.toString(), "Date in position " + i + " " + dates_list.get(i));
        }*/

        //have all the dates in the prescribed format. add it to the spinners.
        ArrayAdapter<String> array_adapter_dates = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, dates_list);

        Log.v(this.toString(), "Adding dates to array adapters.");

        //init the spinner from the layouts.
        dates = (Spinner) findViewById(R.id.dateSelect);  //got the spinner
        array_adapter_dates.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);

        Log.v(this.toString(), "Spinners initialized. Moving to apply adapters to the spinner.");

        //apply adapter to the spinner.
        dates.setAdapter(array_adapter_dates);

        Log.v(this.toString(), "Applied adapter to the spinner.");

        //set the layout
        setContentView(R.layout.activity_main);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    public void onSet(View view) {
        /*This is the function called when the Set button is pressed.
         *  1\. Take the details of the spinners.
         *  2\. Flash them.
         *  3\. Set an alarm with it.
         */

        Log.v(this.toString(), "onSet() function inboked.");        
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T07:51:27.793

您必须创建一个 Arraylist，然后将 date.tostring 添加到此 arraylist 而不是将 Date 对象添加到适配器。

使用这个 ArrayList 创建一个 ArrayAdapter

```
array_adapter_dates = new ArrayAdapter<String>(this,android.R.layout.simple_list_item_1, Arraylist<String>) 
```

# kml - kml 地标作为标签

> ID：11964851
> 
> 赞同：1
> 
> 时间：2012-08-15T06:17:23.860
> 
> 标签：kml, google-earth

我正在从事 GE 本地自行车测绘项目，我正在使用地标创建带有链接描述的标签，用于地图上的道路/小径。虽然用户可以单击地图上的地标/标签进行描述；随着地图的增长，标签也会造成视觉混乱。标签/描述的地标当前与 lineStrings 一起存储在每条道路的文件夹中。

如果能够在不打开每个单独的道路文件夹以取消/选择每个道路文件夹的情况下关闭或打开所有标签，那就太好了。大多数道路的名称也可以在底层的 Google 地球混合图层上找到，因此标签和描述很有帮助，但不是绝对必要的。

下载[https://sites.google.com/site/tuobikes/kml/hullcrabtree.kmz](https://sites.google.com/site/tuobikes/kml/hullcrabtree.kmz)作为示例。

有没有办法将一组地标定义为子类型，以便将它们作为一个组全部打开或关闭？例如，placemark type=label 或 placemark type=photo... 这似乎是有用的功能，但我在 kml 参考中没有看到它

将标签/描述的地标一起存储在与道路的 lineStrings 分开的文件夹中是解决问题的唯一方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T14:53:40.603

除了打开/关闭一组相关地标的文件夹之外，我不知道任何其他方式。

也就是说，考虑使用一个或多个 KML[区域](https://developers.google.com/kml/documentation/regions)来减少混乱：

"*区域*是一个强大的 KML 功能，它允许您在不牺牲性能的情况下向 Google 地球添加非常大的数据集。只有当数据落在用户的视图中并占据屏幕的特定部分时，才会加载和绘制数据。使用区域，您可以提供数据的不同细节层次，只有当数据填满屏幕的一部分时才会加载精细的细节，该部分足够大以使细节可见。”

# iphone - iPhone：此类不符合键警报视图的键值编码

> ID：11964856
> 
> 赞同：0
> 
> 时间：2012-08-15T06:17:39.150
> 
> 标签：iphone, objective-c, ios, xcode

在过去的 5 个小时里，我一直在为这个错误而头疼。我已经完成了所有我能做的谷歌搜索，但似乎没有一个解决方案对我有用，所以我将解释我的特殊情况，看看你们是否能找出我的问题。

我的主 UI 是一个内部有 6 个视图的视图。每个视图都包含一个图像和一个标签。我可以这样做以将对象包含在一起吗？

无论如何，我从文件所有者那里删除了所有连接，然后重新开始。我按下 ctrl 并将鼠标拖到主视图上以将其附加到我的视图中。运行项目：很好，没有错误。

连接其中一个子视图，bam！错误立即弹出。

我的文件所有者的自定义类设置为我的 UIViewController 类。

我在标头中正确定义了 IBOutlets，并在实现中进行了综合。

让我知道你需要什么来帮助我。

** 编辑 **

我设置了一个断点，发现标有 --> <-- 的行是罪魁祸首：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds];
    self.viewController = [[UIViewController alloc] initWithNibName:@"View_main" bundle:nil];
    self.window.rootViewController = self.viewController;

--> [self.window makeKeyAndVisible]; <--

    return YES;
} 
```

编译器抛出的错误是：

```
Terminating app due to uncaught exception 'NSUnknownKeyException', reason: '[<UIViewController 0x6c6a0d0> setValue:forUndefinedKey:]: this class is not key value coding-compliant for the key myView.' 
```

欢迎所有帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T07:10:36.913

> 我的文件所有者的自定义类设置为我的 UIViewController 类。

这是模棱两可的，并且与：

```
self.viewController = [[UIViewController alloc] initWithNibName:@"View_main" bundle:nil]; 
```

您正在使用“香草” UIViewController 而不是您的自定义子类（您没有提到其类名）。当 nib 加载并尝试连接您的插座时，它们不存在，因此引发异常。更改 alloc/init 以使用您的 UIViewController 子类：

```
#import "View_main.h"

...

self.viewController = [[View_main alloc] initWithNibName:@"View_main" bundle:nil]; 
```

并确保视图控制器的自定义类在 nib 中也设置为 View_main。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-15T06:23:20.523

检查这个链接[你会在这里找到答案](http://www.raywenderlich.com/10209/my-app-crashed-now-what-part-1)

> 加载指向实际不存在的属性的 nib 时，通常会出现错误“此类与键 XXX 的键值编码不兼容”。这通常发生在您从代码中删除插座属性时，而不是从 nib 中的连接中删除。

# javascript - 如何创建像 Stack Overflow 那样的视觉差异视图？

> ID：11964860
> 
> 赞同：12
> 
> 时间：2012-08-15T06:18:15.313
> 
> 标签：javascript, version-control

Stack Overflow 的 diff 视图非常好。我想用 来做这个`javascript`，但我不知道如何开始，谁能给点建议？

如： ![StackOverflow 的差异视图](../Images/e60e6ae2818f81ac088db10204ee182c.png)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-15T10:06:54.957

你可以试试[google-diff-match-patch](https://code.google.com/p/google-diff-match-patch/)项目，这个项目提供了强大的算法来执行同步纯文本所需的操作。

演示：http: [//jsfiddle.net/N6bAn/](http://jsfiddle.net/N6bAn/)

代码：

```
<div class="test">
    <div id="oldStr" class="text">the stackoverflow question and answer version control is very well,i want to do this use javascript,but i don't know how to start,who can give some suggestion?thanks</div>
    <div id="newStr" class="text">Stack Overflow's diff view is very good. I want to do this using  javascript,but i don't know how to start,who can give some suggestion?thanks</div>
</div>
<input type="button" value="GO" onclick="launch()" />
<div class="test">
    <div class="text" id="outputOldStr"></div>
    <div class="text" id="outputNewStr"></div>
</div>
<script type="text/javascript">
    var dmp = new diff_match_patch();

    function launch() {
        var text1 = document.getElementById('oldStr').innerHTML;
        var text2 = document.getElementById('newStr').innerHTML;
        dmp.Diff_EditCost = 8;

        var d = dmp.diff_main(text1, text2);
        dmp.diff_cleanupEfficiency(d);
        var oldStr = "", newStr = "";
        for (var i = 0, j = d.length; i < j; i++) {
            var arr=d[i];
            if (arr[0] == 0) {
                oldStr += arr[1];
                newStr += arr[1];
            } else if (arr[0] == -1) {
                oldStr += "<span class='text-del'>" + arr[1] + "</span>";
            } else {
                newStr += "<span class='text-add'>" + arr[1] + "</span>";
            }
        }
        document.getElementById('outputOldStr').innerHTML = oldStr;
        document.getElementById('outputNewStr').innerHTML = newStr;
    }
</script> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-15T06:25:50.327

有一些 JavaScript 库可以进行差异可视化。这些是我找到的几个例子：

*   [https://github.com/cemerick/jsdifflib](https://github.com/cemerick/jsdifflib)
*   [http://prettydiff.com/](http://prettydiff.com/)

我没有尝试过任何一个，所以很遗憾我不能告诉你哪个最适合你的需要，但可能值得一试。

**更新**

jsdifflib 看起来很有希望，有[一个可用的演示](http://cemerick.github.com/jsdifflib/demo.html)，您可以尝试。

# javascript - 使用 PhoneGapBuild 时访问设备内存

> ID：11964862
> 
> 赞同：0
> 
> 时间：2012-08-15T06:18:24.303
> 
> 标签：javascript, cookies, cordova, filesystems

当我的 PhoneGap 应用程序启动时，我需要保存一些简单的种子数据来生成一些用户保存的信息，所以我只需要一个简单的数组或字符串来保存到设备。我很懒，我使用的是PhoneGapBuild，而不是在本地设置PhoneGap。

这种方法的问题是我无法修改源文件，否则这些文件会授予对 cookie 功能和文件系统内容的访问权限。

我希望有一种简单的方法来存储我忽略的一些数据（我已经查看了 cookie、文件系统访问和可能的数据库插件），并且可以与 PGB 一起编译。

文件系统访问甚至可以在本地使用 PGB 吗？我一直没能做到，但我还没有*真正*努力过。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T09:10:16.593

我忽略了一些事情。本地存储对象。它在本地存储数据，只能由保存它的浏览器访问。它是一个 html5 功能，幸运的是它适用于 Apache Cordova - PhoneGap 浏览器/包装器。您可以这样使用它们：

```
localStorage.myData = 'string';
// or
localStorage['myData'] = 'string';
// or
localStorage.setItem('myData', 'string'); 
```

并返回

```
localStorage.myData;
// or
localStorage['myData'];
//or
localStorage.getItem('myData'); 
```

WAY 比文件 API 更容易使用，如果你想存储数组，使用

```
localStorage.myArray = JSON.stringify(array); 
```

并返回

```
JSON.parse(localStorage.myArray); 
```

非常感谢[如何在 localStorage 中存储数组？](https://stackoverflow.com/questions/3357553/how-to-store-an-array-in-localstorage)

# jquery-mobile - 用于移动设备的 Twitter 引导程序

> ID：11964867
> 
> 赞同：2
> 
> 时间：2012-08-15T06:19:12.643
> 
> 标签：jquery-mobile, twitter-bootstrap

如果我想在移动设备上开发 Web 应用程序，我应该使用 Twitter Bootstrap 还是 Jquery Mobile？Twitter Bootstrap 是否适合移动设备？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T18:20:32.750

Bootstrap 3 首先是为移动端构建的，你可能想看看 GitHub 上的 3.0 分支。我没有在我的应用程序 Django Market b/c 中使用 jquery mobile 我将不得不更改后端并且不想投资。Bootstrap 3.0 恕我直言，由于其强大和简单，它将为其他框架提供大量“竞争”

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-15T06:23:57.530

从 2.0 版开始，Bootstrap 完全兼容移动设备。实际上还有[另一个问题](https://stackoverflow.com/questions/8213657/is-twitters-bootstrap-mobile-friendly-like-skeleton)。

您可能要记住的一件事是它们的构建目的。jQuery mobile 的创建和维护考虑到了移动兼容性，而 Bootstrap 将它作为附加提供（这意味着它不会是它的主要优先级）。如果引导程序中没有您特别感兴趣的内容，我会选择 jQuery mobile。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-15T06:24:46.083

取决于你想做什么.. Twitter bootstrap 是一个 CSS 框架，上面有一些 javascripts。虽然 jquery Mobile 是创建原生移动感觉的 javascript.. 所以基本上它们是完全不同的..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-13T20:05:41.700

根据我的经验，我将 jQuery Mobile 用于一个简单的信息应用程序。我在基本代码上花了几天时间，然后我在平板电脑、手机上使用 PhoneGap 进行了测试，结果并不好。Android和iOS设备的转换仍然存在一些问题。

# gmail - Gmail：使用脚本从垃圾箱移动到存档

> ID：11964870
> 
> 赞同：0
> 
> 时间：2012-08-15T06:19:43.197
> 
> 标签：gmail, google-apps-script

我正在尝试通过 Google Apps 脚本中的 GMAIL 服务将线程从垃圾箱移至 GMail 存档。如果我这样做，什么也不会发生：

```
var threads = GmailApp.getTrashThreads(0, 100);
for (var i = 0; i < threads.length; i++) {
    threads[i].moveToArchive();
} 
```

我做错了什么还是这是一个错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T06:57:18.550

从垃圾箱移至存档似乎不起作用。请提交问题跟踪报告。但是，作为一种解决方法，这将执行以下操作：

线程[i].moveToInbox().moveToArchive();

虽然说实话，代码会非常慢并且可能会超时。这会*快得多*：

```
var threads = GmailApp.getTrashThreads(0, 100);
GmailApp.moveThreadsToInbox(threads);
GmailApp.moveThreadsToArchive(threads); 
```

# autohotkey - 自动热键添加使前面的 0 保持不变

> ID：11964872
> 
> 赞同：1
> 
> 时间：2012-08-15T06:19:56.647
> 
> 标签：autohotkey

我现在正在重新学习 AHK，但遇到了一个我似乎无法解决的问题。

在我的表单上，我有一个文本框，默认设置为：0000

当我点击“开始”按钮时，我需要在循环的每次迭代中为此添加 1..

即：0001、0002、0003、0004 等。

我已经尝试搜索谷歌以查看是否有答案，但无济于事。到目前为止，我所拥有的一切都删除了前面的 0。

```
guiControlGet, txtLst,, last

tot := %txtLst%+1 
```

我也试过： `tot := 1+%txtLst%`和类似的东西：`tot := 0001 + %txtLst%`都无济于事。

欢迎提出任何建议。我会尝试任何东西真的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T17:32:20.340

您将 0000 视为整数。没有这样的整数`0001`。
您需要进行浮点加法。
这是一个使用计时器的测试示例：

```
number := 0000

SetTimer, Add, 1000

Add:
number += 0.0001
StringTrimLeft, temp, number, 2
StringTrimRight, OutputVar, temp, 2 
traytip,, %OutputVar%
Return 
```

`number += 0.0001`将产生`0.000100`第一次定时器调用`Add`。
`StringTrimLeft`并可`StringTrimRight`用于删除第一个和最后两个字符。

如果出于某种原因您始终希望前面三个零：

```
number := 0000

SetTimer, Add, 1000

Add:
number += 1
OutputVar := 000 number
traytip,, %OutputVar%
Return 
```

手动参考：
[SetTimer](http://l.autohotkey.net/docs/commands/SetTimer.htm)
[+=](http://l.autohotkey.net/docs/Variables.htm#Operators)
[StringTimLeft](http://l.autohotkey.net/docs/commands/StringTrimLeft.htm)
[StringTrimRight](http://l.autohotkey.net/docs/commands/StringTrimLeft.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T08:54:51.377

你试过这个...

```
ProcessCounter := 1
Processed = % Edit Point . SubStr("0000"ProcessCounter, -3)
msgbox, %Processed% 
```

# sql - 如何阻止 Postgres 将记录创建详细信息输出到终端（rails c/dev 模式）？1000 个“看跌期权”正在减慢我的程序

> ID：11964873
> 
> 赞同：0
> 
> 时间：2012-08-15T06:19:57.803
> 
> 标签：sql, ruby-on-rails, database, postgresql, shell

我知道所有这些“放置”到我的命令行都会减慢我的 Rails 服务器，即使在我所在的开发模式下也是如此。我该如何阻止它这样做？

现在我正在手动将文件添加到我的数据库中，我不需要处于生产模式......我从来没有处于生产模式......我只是一个学生！但我**知道**这件事在我的程序运行时会减慢它的速度。当程序不必与显示器“交谈”时，我已经看到程序的速度有多快。我如何缩写所有这些冗长？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T06:38:10.897

您可以`config.log_level`在 config/environments/development.rb中设置

默认情况下，它将`:debug`处于开发阶段，将其设置为`:info`将停止查询日志记录。如果它只是您希望静音的代码的一部分，您可以改为

```
ActiveRecord::Base.silence do
  #code executed here will not log queries
end 
```

# c# - datagridview 显示从 sql 数据库中选择的行？

> ID：11964875
> 
> 赞同：0
> 
> 时间：2012-08-15T06:20:07.293
> 
> 标签：c#, database

我是 C# 程序员。目前，我正在尝试在 datagrid-viewer 的 sql 数据中添加 5 列中的 3 列（fileId、filePath、authorName、fileContent、DateSend）；fileId 和 fileContent 列是隐藏的。非常感谢！

```
 con = new SqlConnection("Data Source=LEO-PC\\SQLEXPRESS;Initial Catalog = datashare;Integrated Security = True");
        cmd = new SqlCommand("select * from maintable", con);
        con.Open();
        SqlDataReader sqlRead;
        try
        {
            sqlRead = cmd.ExecuteReader();
            while (sqlRead.Read())
            {
               //Adding to datagrid
            }
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message);
        }
        finally
        {
            con.Close();
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T06:57:19.973

要隐藏 2 个字段，请在网格中创建一个 OnRowCreated 事件：

> OnRowCreated="gridView1_RowCreated"

请记住使用

```
SqlDataReader reader = cmd.ExecuteReader();     
gridView1.DataSource = reader; 
```

并且gridview必须有属性必须是`AutoGeneretedColumns = "true"`

然后按如下方式创建事件：

```
protected void gridView1_RowCreated(object sender, GridViewRowEventArgs e)
{
            if (e.Row.RowType == DataControlRowType.Header)
            {
                for (int i = 0; i < e.Row.Cells.Count; i++)
                {
                    DataControlFieldCell cell =
                        (DataControlFieldCell) e.Row.Cells[i];

                    if (cell.ContainingField.HeaderText == "fileId")
                    {
                        e.Row.Cells[i].Visible = false;
                        cell.Visible = false;
                    }

                    if (cell.ContainingField.HeaderText == "fileContent")
                    {
                        e.Row.Cells[i].Visible = false;
                        cell.Visible = false;
                    }
                }
            }

            if (e.Row.RowType == DataControlRowType.DataRow)
            {
                for (int i = 0; i < e.Row.Cells.Count; i++)
                {
                    DataControlFieldCell cell =
                        (DataControlFieldCell) e.Row.Cells[i];

                    if (cell.ContainingField.ToString() == "fileId")
                    {
                        cell.Visible = false;
                    }

                    if (cell.ContainingField.ToString() == "fileContent")
                    {
                        cell.Visible = false;
                    }
                }
            }
} 
```

这可能不是最有效的方式，但它使用代码来达到目的。绑定列时，应该能够使用 gridview 模板隐藏列。

# c# - 将“数组列表”转换为“列表” '（或'列表 ') 使用 LINQ

> ID：11964877
> 
> 赞同：19
> 
> 时间：2012-08-15T06:20:20.930
> 
> 标签：c#, linq, collections

我想使用 LINQ将一个转换`ArrayList`为一个。`List<string>`我试过`ToList()`了，但这种方法不起作用：

```
ArrayList resultsObjects = new ArrayList();
List<string> results = resultsObjects.ToList<string>(); 
```

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-08-15T06:25:52.937

您的代码*实际上*显示了一个`List<ArrayList>`而不是单个`ArrayList`. 如果你真的只有一个`ArrayList`，你可能想要：

```
ArrayList resultObjects = ...;
List<string> results = resultObjects.Cast<string>()
                                    .ToList(); 
```

`Cast`调用是必需的，因为`ArrayList`它是弱类型的——它只实现`IEnumerable`，而不是`IEnumerable<T>`。LINQ to Objects 中几乎所有的 LINQ 运算符都基于`IEnumerable<T>`.

这是假设`ArrayList`真正的值是字符串。如果不是，您需要向我们提供有关如何将每个项目转换为字符串的更多信息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-15T06:25:59.613

我假设您的第一行是`ArrayList resultsObjects = new ArrayList();`.

如果里面的对象`ArrayList`是特定类型的，你可以使用[`Cast<Type>`](http://msdn.microsoft.com/en-us/library/bb341406.aspx)扩展方法：

```
List<string> results = resultsObjects.Cast<string>().ToList(); 
```

如果有`ArrayList`要*转换*为字符串的任意对象，可以使用：

```
List<string> results = resultsObjects.Cast<object>().Select(x => x.ToString())
                                                    .ToList(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-01-02T21:28:24.803

您还可以使用 LINQ 的 OfType<> 方法，具体取决于您是否要在 arrayList 中的一项不可转换为所需类型时引发异常。如果您的 arrayList 中有不是字符串的对象，OfType() 将忽略它们。

```
var oldSchoolArrayList = new ArrayList() { "Me", "You", 1.37m };
var strings = oldSchoolArrayList.OfType<string>().ToList();
foreach (var s in strings)
    Console.WriteLine(s); 
```

输出：

```
Me
You 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-15T06:38:37.380

您可以使用方法将`ArrayList`元素转换为`object[]`数组`ArrayList.ToArray()`。

```
 List<ArrayList> resultsObjects = new List<ArrayList>();
 resultsObjects.Add(new ArrayList() { 10, "BB", 20 });
 resultsObjects.Add(new ArrayList() { "PP", "QQ" });

 var list = (from arList in resultsObjects
                       from sr in arList.ToArray()
                        where sr is string 
                         select sr.ToString()).ToList(); 
```

# web-applications - 如何测试将文档上传到 web 应用程序？

> ID：11964883
> 
> 赞同：1
> 
> 时间：2012-08-15T06:21:00.747
> 
> 标签：web-applications, tdd

我正在定制一个 Web 应用程序，它涉及上传一些文件，然后移动，然后根据我的操作，应用程序应该执行一些操作。具体来说，我正在定制 Alfresco Community 版本（最新的 SVN 版本，应该是 4.0+）。

我想为这个功能做一些测试（不要在将来破坏它）。

什么测试框架应该最适合我的目的，以及为这种行为创建和运行自动化测试的（通用）步骤是什么？

如果测试应用程序还可以检查电子邮件以查看我的应用程序是否发送了它，您将获得奖励 :)

[编辑] 在此处添加一个示例：我想创建一个测试，它将执行以下操作：- 登录到应用程序 - 导航到应用程序的某个部分 - 单击一个按钮（由纯 javascript 制成，无标记） -此按钮打开一个上传表单 - 使用该表单从我的计算机中选择两个示例文件 - 单击“提交” - 验证文件是否已上传

# perl - Perl WWW::Mechanize Parse Content 问题？

> ID：11964887
> 
> 赞同：2
> 
> 时间：2012-08-15T06:21:39.487
> 
> 标签：perl, www-mechanize

我正在使用 Perl 的 WWW::Mechanize 库从网站上抓取内容。但是，我注意到网页的原始 HTML 源代码和 WWW::Mechanize 解析的内容不同。因此，我的脚本中的一些功能被破坏了。

所以，这是脚本（一个子集，只是为了演示错误/问题）

```
#! /usr/bin/perl

use WWW::Mechanize;
use warnings;

$mech=WWW::Mechanize->new();
$mech->stack_depth(0);

$url="http://www.example.com";

$mech->get($url);

print $mech->content; 
```

简短的代码，它将连接到网站并检索整个 HTML 页面。

我运行脚本并将输出重定向到一个文本文件，以便我可以分析它们。

```
perl test.pl >> source_code.txt 
```

现在，当我比较 source_code.txt 和浏览器（Firefox）显示的网站的实际源代码时，存在差异。

例如：

```
<tr>
<td nowrap="nowrap">This is Some Text</td>
<td align="right"><a href="http://example.com?value=key">Some more Text</a></td>
</tr><tr> 
```

上面的源代码是在浏览器中观察到的。（查看页面源功能）

但是，在文本文件中，source_code.txt（由 WWW::Mechanize 生成）

表明：

```
<tr>
<td nowrap="nowrap">This is some text</td>
<td align="right">This is some more text</td>
</tr><tr> 
```

如您所见，嵌套在第二组标签之间的锚标签被删除了。

这是一个已知问题还是我需要使用 $mech->content 以外的其他东西来查看源代码？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T19:00:04.813

这是一种称为[“用户代理嗅探”](http://en.wikipedia.org/wiki/User_agent#User_agent_sniffing)的常见行为，例如对于盲人用户，页面将显示不同。您可以使用不同的插件在浏览器中更改您的用户代理字符串，也可以像[@LHMathies](https://stackoverflow.com/users/582206/lhmathies)所说的那样，在 WWW::Mechanize 中查看[UserAgent.pm](http://search.cpan.org/~gaas/libwww-perl-6.04/lib/LWP/UserAgent.pm)和[Mechanize->new](http://search.cpan.org/~jesse/WWW-Mechanize-1.72/lib/WWW/Mechanize.pm#new%28%29)

例子 ：

```
my $mech = WWW::Mechanize->new( agent => 
     'Mozilla/5.0 (Windows; U; MSIE 9.0; Windows NT 9.0; en-US)' 
); 
```

另请参阅[常见用户代理字符串列表](http://www.useragentstring.com/pages/useragentstring.php)。

# c# - 没有自动完成功能的 C# 组合框

> ID：11964888
> 
> 赞同：0
> 
> 时间：2012-08-15T06:21:43.263
> 
> 标签：c#, winforms

我对 Windows 窗体中的 C# 组合框有一个小问题。我创建了一个组合框，我不希望用户在其中输入值，用户应该只选择其中可用的值。我应该怎么办？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T06:23:00.963

将组合框的下拉样式属性更改为 DropDownList

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T06:24:04.083

将 DropDownStyle 设置为`"DropDownList"`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T06:24:51.960

将 dropdownstyle 属性更改为下拉列表。

# cocoa-touch - 如何在情节提要中定义表格视图单元格以在代码中使用？

> ID：11964890
> 
> 赞同：0
> 
> 时间：2012-08-15T06:21:54.910
> 
> 标签：cocoa-touch, uitableview, storyboard, uistoryboard

我的情节提要上有一个 TableViewController 有一些单元格（静态），我想在点击单元格时添加复选标记，我如何能够从情节提要中调用各个单元格而无需在代码中构建它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T06:26:06.967

在您的表视图的委托中：

```
- (void)tableView:(UITableView *)tv didSelectRowAtIndexPath:(NSIndexPath *)ip
{
     MyCustomCell *cell = [tv cellForRowAtIndexPath:ip];

    // add the checkmark to the cell
    [cell.contentView addSubview:checkmarkIcon];
} 
```

# node.js - mongoose：mongodb update with multi true 不更新所有文档

> ID：11964892
> 
> 赞同：2
> 
> 时间：2012-08-15T06:22:16.523
> 
> 标签：node.js, mongodb, mongoose

mongodb update with multi true 不会更新所有文档，而只是更新最初的 1 或 2 个文档。这是查询。是因为我使用的限制吗？无论如何，我删除了限制，它仍然没有更新匹配标准找到的所有 31 个文档。猫鼬更新语法有什么问题吗？

```
db.update({biztype:msg.biztype, 'g_location': {$near: [msg.lng, msg.lat], $maxDistance:10/111.12}},{
                        $push:{fromusers:{
                            ip: ip,
                            msg: msg.msg,
                            u_name: msg.name,
                            u_mobile: msg.mobile,
                            u_email: msg.email,
                            comment_date: new Date()
                        }}
                    }, false, true).
                    limit(10); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T17:34:49.253

了解`db`是 Mongoose 模型后，您需要修改参数列表以与[Mongoose 更新](http://mongoosejs.com/docs/api.html#model_Model.update)兼容：

```
db.update({biztype:msg.biztype, 'g_location': {$near: [msg.lng, msg.lat], $maxDistance:10/111.12}},
    {
        $push:{fromusers:{
            ip: ip,
            msg: msg.msg,
            u_name: msg.name,
            u_mobile: msg.mobile,
            u_email: msg.email,
            comment_date: new Date()
        }}
    },
    { multi: true }, // <== This boolean option goes into the options parameter
    function (err, numberAffected) {
        // Your callback, if needed
    }
); 
```

# php - 如何使用 PHP 捕获 windows 用户详细信息

> ID：11964894
> 
> 赞同：-1
> 
> 时间：2012-08-15T06:22:34.580
> 
> 标签：php, windows

我想知道当他/她使用 PHP 登录公司网络的 Intranet 时，我从哪里获取或如何获取用户详细信息，例如用户名、ID 号和电子邮件？

我想使用这些详细信息来自动对正在开发的 Web 应用程序的用户进行身份验证。

我已阅读有关 AUTH_USER 的信息，但我在哪里或如何访问该变量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T06:31:43.133

[您可以通过PHP LDAP](http://php.net/manual/en/function.ldap-search.php)函数完成大部分您想做的事情。唯一的问题是您需要为每个用户获取一个唯一的项目。您将需要做更多的研究，但我很确定如果您使用 IIS 而不是 Apache 作为网络服务器，那么在另一端获取该人的登录名/用户名会有一些怪癖或技巧 - 你可以然后使用以下方式查询 LDAP：

```
<?php
// $ds is a valid link identifier for a directory server

// $person is all or part of a person's name, eg "Jo"

$dn = "o=My Company, c=US";
$filter="(|(sn=$person*)(givenname=$person*))";
$justthese = array("ou", "sn", "givenname", "mail");

$sr=ldap_search($ds, $dn, $filter, $justthese);

$info = ldap_get_entries($ds, $sr);

echo $info["count"]." entries returned\n";
?> 
```

Apache 只会将 AUTH_USER 作为空白返回。一种解决方法是为他们的登录创建一次性请求，将其存储在 cookie 中，并使用相同的 LDAP 查询来获取有关用户的最新信息。

# python - 在 Python 中，统计类中变量的数量或防止添加新的类变量

> ID：11964895
> 
> 赞同：3
> 
> 时间：2012-08-15T06:22:36.947
> 
> 标签：python, class, variables, count

在python中，有没有办法在定义对象后防止添加新的类变量？

例如：

```
class foo:
    def __init__(self):
        self.a = 1
        self.b = 2
        self.c = 3

bar = foo()
try:
    bar.d = 4
except Exception, e:
    print "I want this to always print" 
```

或者，有没有办法计算对象中变量的数量？

```
class foo:
    def __init__(self):
        self.a = 1
        self.b = 2
        self.c = 3
    def count(self):
        ...

bar = foo()
if bar.count() == 3:
    print "I want this to always print" 
```

我想到这样做的唯一方法是使用字典或列表：

```
class foo:
    def __int__(self):
        self.dict = {'foo':1, 'bar':2} 
        self.len  = 2
    def chk():
        return self.len == len(self.list) 
```

然而，这样做对 python 来说感觉相当麻烦。（obj.dict['foo']）。如果可能的话，我更喜欢 obj.foo 。

我想拥有它，这样当我打算更改现有变量时，我就不会意外地声明一个变量。

```
f = foo()
f.somename = 3
...
f.simename = 4 #this is a typo

if f.somename == 3:
    solve_everything() 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-15T06:41:23.027

我建议使用`__setattr__`来避免`__slots__`.

弄乱 时总是要小心`__setattr__`，因为它负责设置*所有*实例属性，包括您在`__init__`. 因此，它必须有某种方式知道何时允许设置属性，何时拒绝设置。在这个解决方案中，我指定了一个特殊属性来控制是否允许新属性：

```
class A(object):
    def __init__(self):
        self.a = 1
        self.b = 2
        self.c = 3
        self.freeze = True

    def __setattr__(self, attr, value):
        if getattr(self, "freeze", False) and not hasattr(self, attr):
            raise AttributeError("You shall not set attributes!")
        super(A, self).__setattr__(attr, value) 
```

测试：

```
a = A()
try:
    a.d = 89
except AttributeError:
    print "It works!"
else:
    print "It doesn't work."
a.c = 42
print a.a
print a.c
a.freeze = False
a.d = 28
a.freeze = True
print a.d 
```

结果：

```
有用！
1
42
28

```

另请参阅[gnibblers 的答案](https://stackoverflow.com/a/11965358/566644)，该答案将这个概念巧妙地包装在类装饰器中，因此它不会弄乱类定义，并且可以在多个类中重用而无需重复代码。

* * *

**编辑：**

一年后回到这个答案，我意识到上下文管理器可能会更好地解决这个问题。这是 gnibbler 类装饰器的修改版本：

```
from contextlib import contextmanager

@contextmanager
def declare_attributes(self):
    self._allow_declarations = True
    try:
        yield
    finally:
        self._allow_declarations = False

def restrict_attributes(cls):
    cls.declare_attributes = declare_attributes
    def _setattr(self, attr, value):
        disallow_declarations = not getattr(self, "_allow_declarations", False)
        if disallow_declarations and attr != "_allow_declarations":
            if not hasattr(self, attr):
                raise AttributeError("You shall not set attributes!")
        super(cls, self).__setattr__(attr, value)
    cls.__setattr__ = _setattr

    return cls 
```

以下是如何使用它：

```
@restrict_attributes
class A(object):
    def __init__(self):
        with self.declare_attributes():
            self.a = 1
            self.b = 2
            self.c = 3 
```

因此，每当您想设置新属性时，只需使用上述`with`语句即可。也可以从实例外部完成：

```
a = A()
try:
    a.d = 89
except AttributeError:
    print "It works!"
else:
    print "It doesn't work."
a.c = 42
print a.a
print a.c
with a.declare_attributes():
    a.d = 28
print a.d 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-15T06:24:15.433

> 在python中，有没有办法在定义对象后防止添加新的类变量？

是的。[`__slots__`](http://docs.python.org/reference/datamodel.html#slots). 但*请*仔细阅读注释。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-15T07:12:08.003

基于[lazyr的答案的类装饰器怎么样](https://stackoverflow.com/a/11965077/174728)

```
def freeze(cls):
    _init = cls.__init__
    def init(self, *args, **kw):
        _init(self, *args, **kw)
        self.freeze = True
    cls.__init__ = init 

    def _setattr(self, attr, value):
        if getattr(self, "freeze", None) and (attr=="freeze" or not hasattr(self, attr)):
            raise AttributeError("You shall not set attributes!")
        super(cls, self).__setattr__(attr, value)
    cls.__setattr__ = _setattr

    return cls

@freeze
class foo(object):
    def __init__(self):
        self.a = 1
        self.b = 2
        self.c = 3

bar = foo()
try:
    bar.d = 4
except Exception, e:
    print "I want this to always print" 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-15T06:29:19.737

1.  防止使用`__slots__`类属性添加新属性：

    ```
    class foo(object):
        __slots__ = ['a', 'b', 'c']
        def __init__(self):
            self.a = 1
            self.b = 2
            self.c = 3

    bar = foo()

    try:
        bar.d = 4
    except Exception as e:
        print(e,"I want this to always print") 
    ```

2.  计数属性：

    ```
    print(len([attr for attr in dir(bar) if attr[0] != '_' ])) 
    ```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-15T06:25:01.040

使用它来计算实例的 no.of 属性：

```
>>> class foo:
    def __init__(self):
        self.a = 1
        self.b = 2
        self.c = 3

>>> bar=foo()
>>> bar.__dict__
{'a': 1, 'c': 3, 'b': 2}
>>> len(bar.__dict__)  #returns no. of attributes of bar
3 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-15T06:39:19.390

你的意思是新的*类*变量还是新的*实例*变量？后者看起来像你的意思，而且更容易做到。

根据 Ignacio Vazquez-Abrams 的回答，[`__slots__`](http://docs.python.org/reference/datamodel.html#slots)可能就是您想要的。只需`__slots__ = ('a', 'b', 'c')`在您的班级内部进行，这将阻止创建任何其他属性。请注意，这仅适用于您的类的实例——仍然可以设置类级别的属性，并且子类可以添加他们喜欢的任何属性。他是对的——有一些奇怪的地方，所以在你开始到处撒插槽之前阅读链接的文档。

如果您不使用插槽，`return len(vars(self))`请作为建议`count`方法的主体。

作为插槽的替代方案，您可以定义`__setattr__`拒绝任何不在“已知良好”列表中的属性，或者在`frozen`属性在结尾设置为 True后拒绝任何新属性`__init__`，等等。这很难正确，但更灵活。

如果您确实希望实例在初始化后完全只读，并且您使用的是最新版本的 Python，请考虑定义其`namedtuple`子类或子类。元组子类也有一些限制；如果你需要走这条路，我可以扩展它，但除非你有理由不这样做，否则我会坚持使用插槽。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-26T21:14:32.080

假设您现在希望您的类具有一组固定的可变和不可变属性？我破解[了 gnibbler 的答案](https://stackoverflow.com/a/11965358/566644)，使类属性在初始化后不可变：

```
def frozenclass(cls):
    """ Modify a class to permit no new attributes after instantiation.
        Class attributes are immutable after init.
        The passed class must have a superclass (e.g., inherit from 'object').
    """
    _init = cls.__init__
    def init(self, *args, **kw):
        _init(self, *args, **kw)
        self.freeze = True
    cls.__init__ = init

    def _setattr(self, attr, value):
        if getattr(self, "freeze", None):
            if attr=="freeze" or not hasattr(self, attr):
                raise AttributeError("You shall not create attributes!")
            if hasattr(type(self), attr):
                raise AttributeError("You shall not modify immutable attributes!")
        super(cls, self).__setattr__(attr, value)
    cls.__setattr__ = _setattr

    return cls 
```

还有一个例子：

```
@frozenclass
class myClass(object):
    """ A demo class."""
    # The following are immutable after init:
    a = None
    b = None
    c = None

    def __init__(self, a, b, c, d=None, e=None, f=None):
        # Set the immutable attributes (just this once, only during init)
        self.a = a
        self.b = b
        self.c = c
        # Create and set the mutable attributes (modifyable after init)
        self.d = d
        self.e = e
        self.f = f 
```

# java - Eclipse 插件问题：图标/图像在本地显示正常，但不能从 jar/更新站点显示。

> ID：11964896
> 
> 赞同：1
> 
> 时间：2012-08-15T06:22:39.560
> 
> 标签：java, eclipse, image, eclipse-plugin

我目前有一个带视图的 Eclipse 插件。在 src 文件夹中，有一个图标文件夹，其中包含一些我想在我的插件中使用的图像。在我的程序中，我使用以下行：

```
public static final Image anImage = new Image(null, "sample_image.gif"); 
```

然后继续在某处使用该图像。当我在本地运行我的程序时，这项工作有效，但是当我将插件导出到 jar，然后将其安装到新的 Eclipse 时，插件会中断。当我在代码中取出图像使用时，插件在没有图像的情况下正常工作。我想知道正确的方法是什么才能让我的图像在导出的 jar 文件中用于插件安装。

我有一个与此类似的先前问题和 SO 问题，有人建议使用 Classloader.getResource()。我没有太多运气试图让它工作，而且似乎没有必要，因为默认情况下，如果您使用 PDT 生成的 Eclipse 视图插件演示模板，它带有一个使用“ sample.gif"，据我所知，它工作正常。

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-15T07:16:01.370

通常，您应该使用图标文件夹方法。确保在 build.properties 文件中导出文件夹（在 bin.includes 部分下）。如果您使用 MANIFEST.MF 编辑器并勾选“构建”选项卡的“二进制构建”部分中的图标文件夹。src 文件夹的处理方式不同 - 它假定有要编译的代码并且包含编译后的输出，而不是原始文件夹。当使用工作区中的插件从 Eclipse 运行时，它“工作”，因为使用工作区目录而不是编译的插件。您可以使用[AbstractUIPlugin](http://help.eclipse.org/juno/index.jsp?topic=%2Forg.eclipse.platform.doc.isv%2Freference%2Fapi%2Forg%2Feclipse%2Fui%2Fplugin%2FAbstractUIPlugin.html)中的 imageDescriptorFromPlugin 加载图像。例如使用；

```
Image img = AbstractUIPlugin.imageDescriptorFromPlugin("you.bundle.id", "/icons/sample_image.gif").createImage(); 
```

# java - 使用 XStream 解析嵌套标签

> ID：11964902
> 
> 赞同：0
> 
> 时间：2012-08-15T06:23:18.637
> 
> 标签：java, xml, xstream

我正在使用一个名为 Socrata 的数据库 API 来解析回收服务的信息。可以在此处找到此服务的 XML 输出示例：

[http://www.datakc.org/api/views/zqwi-c5q3/rows.xml?search=%22computer%22](http://www.datakc.org/api/views/zqwi-c5q3/rows.xml?search=%22computer%22)

正如您可能知道的那样，这看起来就像*糟糕的 XML*。我遇到的问题是包含行列表的标签被调用`row`（没有属性）并且每一行也被调用`row`（有属性）。这似乎会让 XStream 搞得一团糟，我根本找不到用 XStream 处理这些数据的方法。

你们中的任何一个 XStream/XML 专家都知道我能做什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T22:46:44.340

该解决方案不是很直观，但我设法弄清楚了。首先，我必须声明一个代表响应标签的类。此类还包含回收服务列表的容器。这是该类的外观：

```
@XStreamAlias("response")
public class QueryResponse {

    @XStreamAlias("row")
    private RecycleServices services;

    public RecycleServices getServices() {
        return services;
    }

    public void setServices(RecycleServices services) {
        this.services = services;
    }

} 
```

RecycleServices 类是这里真正的技巧，它包装了 RecycleService 类的隐式列表。

```
@XStreamAlias("row")
public class RecycleServices {

    @XStreamImplicit(itemFieldName = "row")
    private List<RecycleService> services = new ArrayList<RecycleService>();

    public List<RecycleService> getServices() {
        return services;
    }

    public void setServices(List<RecycleService> services) {
        this.services = services;
    }

} 
```

RecycleService 类只是每个回收服务行的直接表示，与这个问题的答案并不真正相关。我对此感到有些沮丧，我希望这可以帮助那里的人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T10:05:41.900

这更像是一种解决方法而不是解决方案，但是通过使用 XSLT 将 DOM 重写为 XStream 能够更好地使用的东西，可以克服行/元素命名。

# perl - 删除指定字符前后的空格

> ID：11964906
> 
> 赞同：0
> 
> 时间：2012-08-15T06:23:23.847
> 
> 标签：perl, removing-whitespace

```
LIST.txt
ark = 1  bark= 2  car  =3  dorm    =4
ark=8  bark  = 25  car  =  33  dorm  =5 
```

我有一个名为 LIST.txt 的文件，如上所示。我希望输出像 OUTPUT.txt 中所示

```
OUTPUT.txt
ark=1  bark=2  car=3  dorm=4
ark=8  bark=25  car=33  dorm=5 
```

我没有成功删除“=”前后的空格。我试图删除空格的方法给我带来了这样的结果

```
ark=1bark=2car=3dorm=4
ark=8bark=25car=33dorm=5 
```

谁能帮我解决这个问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-15T06:26:17.767

```
perl -pe 's/\s*=\s*/=/g' LIST.txt 
```

输出

```
ark=1  bark=2  car=3  dorm=4
ark=8  bark=25  car=33  dorm=5 
```

# selenium - Selenium 2 - 无法在 IE 上找到元素

> ID：11964907
> 
> 赞同：0
> 
> 时间：2012-08-15T06:23:27.117
> 
> 标签：selenium

我用 selenium 2 编写了一个测试程序，它在 Firefox 上运行良好。

但是当我用 IE9 尝试它时，它没有找到元素。

例如：

```
WebElement sh = driver.findElement(By.id("sh"));
sh.click(); 
```

在 Firefox 中可以正常工作，但在 IE9 中不行。

我阅读了[下一个讨论](https://stackoverflow.com/questions/5574802/selenium-2-0b3-ie-webdriver-click-not-firing)，但它对我没有帮助（我尝试了所有建议） - 它甚至没有找到元素，所以我不确定这是同一个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-23T22:01:17.170

我遇到了同样的问题，测试在 FF 中有效，但在 IE 或 Chrome 中无效。到目前为止，我发现的唯一解决方案是使用 JavascriptExecutor。

```
((JavascriptExecutor) webDriver).executeScript("arguments[0].click();", yourWebElement); 
```

希望你觉得这很有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T07:49:33.133

问：我的 XPath 在一个浏览器中查找元素，但在其他浏览器中找不到。为什么是这样？答：简短的回答是，每个受支持的浏览器处理 XPath 略有不同，您可能会遇到这些差异之一。长答案在 XpathInWebDriver 页面上。

[http://code.google.com/p/selenium/wiki/FrequentlyAskedQuestions#Q:_My_XPath_finds_elements_in_one_browser,_but_not_in_others._Wh](http://code.google.com/p/selenium/wiki/FrequentlyAskedQuestions#Q:_My_XPath_finds_elements_in_one_browser,_but_not_in_others._Wh)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-05-25T07:39:16.583

它需要在所有区域中设置相同的安全级别。为此，请按照以下步骤操作：

打开 IE

转到工具-> Internet 选项-> 安全

将所有区域（Int​​ernet、本地 Intranet、受信任的站点、受限制的站点）设置为相同的保护模式，启用或禁用都无关紧要。

最后，通过右键单击右上角的齿轮并启用状态栏将缩放级别设置为 100%。默认缩放级别现在显示在右下方。

# php - 如何在控制器的 symfony 存储库查询中放置 where 子句

> ID：11964909
> 
> 赞同：0
> 
> 时间：2012-08-15T06:23:41.010
> 
> 标签：php, symfony, doctrine-orm

最初我正在使用这个

```
$entities = $em->getRepository('AcmePanduBundle:Checklist')->findAll(); 
```

现在我希望如果`pid`变量存在，那么它应该用一些东西过滤查询

```
$entities = $em->getRepository('AcmePanduBundle:Checklist')->findAll('where pid=1') 
```

如果它不存在，那么 findAll 应该可以工作。

我可以在控制器中执行此操作，还是必须在存储库类中创建自定义函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T07:44:03.987

当然，您可以在控制器中执行此操作：

```
$entities = (isset($pid))
    ? $em->getRepository('AcmePanduBundle:Checklist')->findByPid($pid)
    : $em->getRepository('AcmePanduBundle:Checklist')->findAll(); 
```

但是，这是自定义存储库的用途。如果您计划在多个地方复制此逻辑，我肯定会创建一个。

它看起来像：

```
// src/Acme/PanduBundle/Repository/ChecklistRepository.php
namespace Acme\PanduBundle\Repository;

use Doctrine\ORM\EntityRepository;

class ChecklistRepository extends EntityRepository
{
    public function findAllWithOptionalPid($pid = null)
    {
        if($pid)
            return $this->findByPid($pid);
        return $this->findAll();
    }
} 
```

...并且不要忘记在您的 Doctrine 配置中引用此存储库。不知道您使用什么方法进行配置（xml、yml、注释），但这里的文档：[http ://symfony.com/doc/current/book/doctrine.html#custom-repository-classes](http://symfony.com/doc/current/book/doctrine.html#custom-repository-classes)

一旦完成，任何控制器调用`$em->getRepository('AcmePanduBundle:Checklist')->findAllWithOptionalPid($pid);`都将按照您的预期工作，无论是否使用 $pid 变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T07:43:57.133

使用[findBy 或动态方法](http://symfony.com/doc/current/book/doctrine.html#fetching-objects-from-the-database)，如“findByPid”

```
$repository = $em->getRepository('AcmePanduBundle:Checklist');
if ($pid) {
    $entities = $repository->findBy(array('pid' => $pid));
    // or: $entities = $repository->findByPid($pid);
} else {
    $entities = $repository->findAll();
} 
```

# javascript - 将文本区域中的 Javascript 注入 Iframe

> ID：11964910
> 
> 赞同：1
> 
> 时间：2012-08-15T06:23:42.327
> 
> 标签：javascript, html, css, iframe, code-injection

我试图制作一个像[Tinkerbin](http://tinkerbin.com/)这样的代码游乐场。

它基本上将 CSS / HTML / Javascript 代码从不同的文本区域中提取出来，并将其注入到 iframe 中。它还应该立即更新 iframe。

但是我有点坚持注入Javascript。

* * *

***看，到目前为止我做了什么：***

```
(function() {
    $('.grid').height( $(window).height() );    

    var contents = $('iframe').contents(),
        body = contents.find('body'),
        styleTag = $('<style></style>').appendTo(contents.find('head'));

    $('textarea').keyup(function() {
        var $this = $(this);
        if ( $this.attr('id') === 'html') {
            body.html( $this.val() );
        } 
        if ( $this.attr('id') === 'css') {
            styleTag.text( $this.val() );
        }
    });

})(); 
```

这确实注入了 CSS 和 HTML，但没有注入 Javascript。

我尝试添加

```
 scriptTag = $('<script></script>').appendTo(contents.find('head')); 
```

和

```
 if ( $this.attr('id') === 'javascript') {
            scriptTag.text( $this.val() );
        } 
```

但它没有用

* * *

***有人可以帮我吗？***

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T06:33:14.823

我想你可能需要同时注入脚本标签和内容，因为插入`<script>`标签会导致浏览器运行脚本。如果稍后插入脚本内容，可能无法运行，但我不确定。试试这样：

```
$('<script></script>')
      .text($('theinputselectorhere').val())
      .appendTo(contents.find('head')); 
```

# c - 使用 sigwait 时我们应该关心 EINTR 吗？

> ID：11964913
> 
> 赞同：3
> 
> 时间：2012-08-15T06:24:10.633
> 
> 标签：c, multithreading, signals

在多线程应用程序中，所有线程都会阻塞所有信号，并且单个线程使用`sigwait`. 现在我们应该在其他线程中`EINTR`使用系统调用后`read`考虑吗？`write`

```
while (true)
{
    num = read(fd, buf, size);
    if (num == -1 && errno == EINTR)
        continue;
    else if (num > 0)
        /* handle the buf and read more */
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T06:40:34.837

`EINTR`仅当系统调用被信号处理程序中断时才返回。如果所有信号都被阻止在进行系统调用的线程的信号掩码中，则不会发生这种情况。

# python - python中的时隙可用性

> ID：11964920
> 
> 赞同：0
> 
> 时间：2012-08-15T06:24:31.693
> 
> 标签：python

我正在像这样在 python 中为我的应用程序编写一个插槽预订算法

```
from datetime import datetime, timedelta

appointments = [(datetime(2012, 5, 22, 10), datetime(2012, 5, 22, 10, 30)),
                (datetime(2012, 5, 22, 12), datetime(2012, 5, 22, 13)),
                (datetime(2012, 5, 22, 15, 30), datetime(2012, 5, 22, 17, 10))]

hours = (datetime(2012, 5, 22, 9), datetime(2012, 5, 22, 18))

def get_slots(hours, appointments, duration=timedelta(hours=1)):
    slots = sorted([(hours[0], hours[0])] + appointments + [(hours[1], hours[1])])
    for start, end in ((slots[i][1], slots[i+1][0]) for i in range(len(slots)-1)):
        assert start <= end, "Cannot attend all appointments"
        while start + duration <= end:
            print "{:%H:%M} - {:%H:%M}".format(start, start + duration)
            start += duration 
```

如果我在 9 小时到 18 小时内检查特定日期的时段，这对我来说很好，但它不能满足我对每周或每月可用性的要求。因为我想在 9 小时到 18 小时之间检查每周或每月的可用性。

请帮助我改进我的代码，以便它可以检查数周和数月的 9 小时到 18 小时之间的可用时段。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T07:30:41.323

我认为您打算将其`hours`应用于一周或一个月中的每一天（也许休息几天除外？），因此您可以将其更改为使用`time`对象。然后对于每一天，您可以`datetime.combine`创建从前一天结束到今天开始的间隔。不要忘记再创建一个从最后一天结束时开始的间隔。

# c# - 此行已属于此表

> ID：11964924
> 
> 赞同：3
> 
> 时间：2012-08-15T06:25:00.447
> 
> 标签：c#, ado.net

我从以下代码中收到错误“此行已属于此表”：

```
public static DataTable AddNewAllocations(string pCaseNo, ref DataTable pTable)
    {
        try
        {
            string sqlText = "SELECT UserID FROM tblUsers;";
            aSqlQuery aQ = new aSqlQuery(sqlText, "table");
            DataTable userTable = aQ.TableResult;

            foreach (DataRow userRow in userTable.Rows)
            {
                int allocAlready = 0;
                foreach (DataRow allocRow in pTable.Rows)
                {
                    if (allocRow["FeeEarner"].ToString() == userRow["UserID"].ToString())
                    {
                        allocAlready = 1;                            
                    }
                }
                if (allocAlready == 0)
                {
                    string strUser = userRow["UserID"].ToString();          
                    decimal fees = cTimesheet.UserFees(strUser, pCaseNo);
                    int intCaseNo = Int32.Parse(pCaseNo);
                    if (fees > 0)
                    {
                        Object[] array = new object[8];
                        array[0] = 0;
                        array[1] = intCaseNo;
                        array[2] = DateTime.Today;
                        array[3] = strUser;
                        array[4] = fees;
                        array[5] = 0;
                        array[6] = fees;
                        array[7] = true;
                        pTable.Rows.Add(array);
                    }
                }
            }
            return pTable;
        }

        catch (Exception eX)
        {
            throw new Exception("cAllocation: Error in NewAllocations()" + Environment.NewLine + eX.Message);
        } 
```

当我单步执行代码时，我可以看到第二次抛出错误，访问以下行：

```
pTable.Rows.Add(array); 
```

鉴于每次代码进入循环时我都会创建一个新的对象数组，我无法理解为什么我会收到此错误消息，这表明我正在多次添加同一行。当行每次由新的对象数组生成时，为什么代码将每个循环视为添加相同的数据行？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2016-01-06T15:52:59.897

另一种方法是在循环开始时创建一个 NewRow()，分配其数据，然后在循环底部创建 Rows.Add()。

```
{       
        // initialization code 
        // ...

        foreach (DataRow row in dt.Rows)
        {
            row.Delete();
        }
        Oda.Update(ds, "USERTABLE");

        DataRow  dr;

        foreach (var userRecord in urList)
        {
            dr = dt.NewRow();
            dr["username"] = userRecord.userName;
            dr["firstname"] = userRecord.firstName;
            dr["lastname"] = userRecord.lastName;
            dr["createdon"] = userRecord.createdOn;

            dt.Rows.Add(dr);
        }
        Oda.Update(ds, "USERTABLE");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T13:25:22.733

最终起作用的代码是这样的：

```
public static DataTable AddNewAllocations(string pCaseNo, DataTable pTable)
    {
        try
        {
            DataTable newTable = NewAllocationTable(); 

            string sqlText = "SELECT UserID FROM tblUsers;";
            aSqlQuery aQ = new aSqlQuery(sqlText, "table");
            DataTable userTable = aQ.TableResult;

            foreach (DataRow userRow in userTable.Rows)
            {
                int allocAlready = 0;
                foreach (DataRow allocRow in pTable.Rows)
                {
                    if (allocRow["FeeEarner"].ToString() == userRow["UserID"].ToString())
                    {
                        allocAlready = 1;                            
                    }
                }

                if (allocAlready == 0)
                {
                    string strUser = userRow["UserID"].ToString();          
                    decimal fees = cTimesheet.UserFees(strUser, pCaseNo);
                    int intCaseNo = Int32.Parse(pCaseNo);
                    if (fees > 0)
                    {
                        Object[] array = new object[8];
                        array[0] = 0;
                        array[1] = intCaseNo;
                        array[2] = DateTime.Today;
                        array[3] = strUser;
                        array[4] = fees;
                        array[5] = 0;
                        array[6] = fees;
                        array[7] = true;
                        newTable.Rows.Add(array);
                    }
                }
            }

            foreach (DataRow row in pTable.Rows)
            {
                newTable.ImportRow(row);
            }

            newTable.DefaultView.Sort = "AllocID";
            return newTable;
        }

        catch (Exception eX)
        {
            throw new Exception("cAllocation: Error in NewAllocations()" + Environment.NewLine + eX.Message);
        }
    } 
```

我认为关键是使用 ImportRow 而不是 Rows.Add。我仍然在我的方法中使用 Rows.Add，但仅在将行添加到新创建的表时。然后，我遍历作为参数传入的现有表，并使用 ImportRow 将参数表的每一行添加到新创建的表中。然后，我在我的 return 语句中传递新的组合表，而不是修改后的参数表。

# html - 限制浏览器调整 div 的大小

> ID：11964927
> 
> 赞同：3
> 
> 时间：2012-08-15T06:25:24.463
> 
> 标签：html, css

我有一个网站，其中的布局如下所示：

![在此处输入图像描述](../Images/6149cabd76ec1a6b3046473ebfb08a9a.png)

内容的css`main`如下：

```
.home {margin:178px 0 0 100px;width:800px;padding:0 10px 0px 10px;float:left;height:auto!important;height:310px;min-height:310px;} 
```

问题是，每当我调整浏览器的大小时，主要内容 div 而不是停留在那里，并且浏览器获得水平滚动条会自动向下移动。

如果我将浏览器调整回原来的大小，主 div 甚至不会回到原来的位置。我该如何纠正这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T06:33:30.210

**在 a 中添加两个元素（左，右）`container div`，并给这个容器一个`min-width`**

```
<head>
  <style type="text/css">
    body {
      min-width:750px;
      min-height:500px;
    }
    div.container {
      min-width:600px;
      min-height:450px;
    }
    div.left, div.right {
      min-height:400px;
    }
  </style>
</head>
<body>
  <div class="header"></div>
  <div class="container">
    <div class="left"></div>
    <div class="right"></div>
  </div>
  <div class="footer"></div>
</body> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T16:56:31.907

[这是带有彩色列背景](http://www.ejeliot.com/blog/61)（如有必要）和[jsfiddle](http://jsfiddle.net/lalatino/hBDqg/)的两列全屏布局：

```
<!DOCTYPE html>
<html>
<head>
<style type="text/css">
html,body {
  margin:0;
  padding:0;
  height:100%;
  background-color:#ccc;
}

#header {
  background-color:#ccf;
}

#container {
  position:relative;
  min-height:80%;
  border:4px solid red;
  overflow:hidden;
}

#left {
  float:left;
  width:200px;
  background-color:#cfc;
  padding-bottom:9999px;
  margin-bottom:-9999px;
}

#main {
  position:relative;
  margin-left:200px;
  background-color:#ffc;
  padding-bottom:9999px;
  margin-bottom:-9999px;
}

#footer {
  background-color:#fcc;
}
</style>
</head>
<body>
<div id="header">HEADER</div>
<div id="container">
  <div id="left">LEFT</div>
  <div id="main">MAIN</div>
  <div style="clear:both"></div>
</div>
<div id="footer">FOOTER</div>
</body>
</html> 
```

# c# - 如何定义和编组 BSTR* 类型

> ID：11964931
> 
> 赞同：0
> 
> 时间：2012-08-15T06:25:56.317
> 
> 标签：c#, c++, marshalling, com-interop, unmarshalling

我想知道如何将字符串类型编组为 BSTR* 类型。详细说明一下，C++结构如下：

```
struct MyStruct
{
     BSTR* string;
     int a;
} 
```

我需要在 C# 端定义一个新的结构，我尝试了 string[] 和 IntPtr[] 但这并没有成功。

谢谢你的帮助！

编辑：C++结构：

```
 struct HTTPTEXTRENDERERFILTERINFO {
        enum { UTC, GMT } eTimestamp;
        BOOL    bEnableCCIngest;
        LONG    lQueueSizeTreshold; 
        LONG    lSendTimeTreshold;  
        BYTE    btBroadcastUrlCount;
        BSTR*   pbstrBroadcastUrls;                                
        LONG    lInputPinsNum;      
    }; 
```

和函数的原型：

```
HRESULT HTTPTextRendererFilter::SetConfig(IN const HTTPTEXTRENDERERFILTERINFO& Config) 
```

c#结构：

> [StructLayout(LayoutKind.Sequential, CharSet = CharSet.Unicode)] public struct HttpTextRenderFilterInfo { public enum TimestampType : int { UTC, GMT };
> 
> ```
>  public TimestampType Timestamp;
>     public int EnableCCIngest;
>     public int QueueSizeTreshold; 
>     public int SendTimeTreshold;  
>     public byte BroadcastUrlCount;
>     [MarshalAs(UnmanagedType.BStr)]
>     public string pbstrBroadcastUrls;        
>     public int lInputPinsNum;     
> }; 
> ```

原型：

```
 [PreserveSig]
    int SetConfig([In] ref HttpTextRenderFilterInfo config); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T06:29:13.823

尝试这个：

```
[StructLayout(LayoutKind.Sequential, CharSet=CharSet.Unicode)]
struct MyStruct
{
   [MarshalAs(UnmanagedType.BStr)] public String myString;
   public int a;
} 
```

# c++ - 我必须删除分配给新的 wchar_t 吗？

> ID：11964933
> 
> 赞同：1
> 
> 时间：2012-08-15T06:25:59.480
> 
> 标签：c++

可以说我有这样的课程：

```
class LolClass {
    LPWSTR* stuff;
    LolClass::LolClass(LPWCHAR lols) {
        stuff = new LPWSTR[100];
        for (int i = 0; i < 100; i++) {
            stuff[i] = new wchar_t[wcslen(lols)+1];
            wcsncpy(stuffs[i], lols, wcslen(lols)+1);
        }
    }
    LolClass::~LolClass() {
        delete[] stuff;
    }
} 
```

所以如果我打电话

```
LolClass* veryfunny = new LolClass(L"lol!"); 
```

它会让我 100 大声笑，问题是当我打电话时

```
delete veryfunny; 
```

它会删除指针数组，但不会删除单个 wchar_t，如果我尝试循环遍历 wchar_t 并删除它们，那么我只会崩溃，我不知道该怎么办，因为我知道即使在我删除之后它们仍然存在非常有趣（我通过在类外传递其中一个指针进行检查）

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-15T06:32:49.270

如果你打电话

```
LolClass* veryfunny = new LolClass(L"lol!"); 
```

那么您最终将需要致电：

```
delete veryfunny; 
```

但是对于数组，您需要`delete[]`：`stuff[i] = new wchar_t[n]; delete [] stuff[i];`

在您的代码中，您需要首先循环遍历元素，然后`stuff`遍历数组本身。`delete[]``delete[]``stuff`

或者只使用`std::vector<std::wstring>`.

* * *

*更新：*据我了解，您实际上并不担心删除`*veryfunny`，而是担心如何为`LolClass`. 请注意，析构函数也会为全局和自动对象调用，例如，因此*如何*实例化对象`{ LolClass x(L"hello"); } /* boom */`并不重要。无论如何，您都必须正确上课。*`LolClass`*

 ** * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-15T07:19:48.300

大卫施瓦茨毕竟赢了，wchar 没有让自己被删除，因为他们没有被 null 终止*

# assembly - 从汇编语言运行另一个程序

> ID：11964935
> 
> 赞同：4
> 
> 时间：2012-08-15T06:26:07.157
> 
> 标签：assembly, x86, masm

我目前正在 Windows 7 MASM32 中学习 x86 汇编语言，我想制作一个可以打开记事本的脚本。我在谷歌上看过，似乎找不到任何东西。我怎样才能做到这一点？

任何帮助，将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T06:32:21.240

查看 CreateProcess 或 ShellExecute

```
push    offset proc_info        ;; lpProcessInformation
        push    offset startup_info     ;; lpStartupInfo
        push    offset new_dir          ;; lpCurrentDirectory
        push    00h             ;; lpEnviroment (get from calling process)
        push    00h             ;; dwCreatingFlags
        push    00h             ;; lpInheritHandles = FALSE
        push    00h             ;; lpThreadAttributes
        push    00h             ;; lpProcessAttributes (default process descriptor)
        push    offset params           ;; lpCommandLine =
        push    offset app          ;; lpApplicationName
                extrn    CreateProcessA: proc
        call    CreateProcessA

;; ...

proc_info:
pi_hProcess     dd      ?
pi_hThread      dd      ?
pi_dwProcessId      dd      ?
pi_dwThreadId       dd      ?
;;---------------------------------------------------------------
startup_info:
si_cb           dd      si_len
si_lpReserved       dd      0   ;; NULL
si_lpDesktop        dd      0   ;; NULL
si_lpTitle      dd      0   ;; NULL
si_dwX          dd      0
si_dwY          dd      0
si_dwXSize      dd      0
si_dwYSize      dd      0
si_XCountsChar      dd      0
si_YCountsChar      dd      0
si_dwFillAttribute           dd     0
si_dwFlags      dd      0  
si_wShowWindow      dw      0   ;; SW_HIDE
si_cbReserved2      dw      0
si_lpReserved2      dd      0   ;; NULL
si_hStdInput        dd      0   ;;
si_hStdOutput       dd      0   ;;   IGNORED
si_hStdError        dd      0   ;;
si_len          equ     $-startup_info 
```

# android - 无法启动 Android 模拟器：“无法从快照加载 VM”

> ID：11964938
> 
> 赞同：9
> 
> 时间：2012-08-15T06:26:54.817
> 
> 标签：android, eclipse, android-emulator

我尝试从 Eclipse 启动 android 模拟器，但模拟器无法启动。

当我尝试启动它时，我收到以下错误：

> 模拟器：错误：无法从快照加载 VM。已为不同的硬件配置保存快照。

有什么建议吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-08-15T06:36:51.807

也许尝试在 Android 虚拟设备管理器中禁用硬件快照？它应该安装在您安装 android SDK 的任何位置。

![在此处输入图像描述](../Images/b912a5c82104704f7ce61b2d1fb240a7.png)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-09T15:35:10.120

I was having this exact problem. The way I resolved it was to edit the AVD and disable the snapshot from the Android Virtual Device Manager like above and also delete the snapshot files **snapshots.img** and **snapshots.img.default-boot.ini** (disabling snapshot won't delete them automatically). Then edit the AVD and re-enable the snapshot.

This won't entirely resolve the problem at least in my case. I re-enabled snapshot and kept getting the error and tried the above steps several times. The cause for me was that after I launched the AVD I was closing the Virtual Device Manager window. Leaving the manager window open until after I've closed the AVD window solved it for me!

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-18T18:37:52.093

我需要重新创建虚拟设备。没有它，它就会产生一个或其他问题。

# telerik-mvc - 用于 ASP.NET MVC2 (VS2008) 的 Telerik 网格

> ID：11964944
> 
> 赞同：0
> 
> 时间：2012-08-15T06:27:35.027
> 
> 标签：telerik-mvc

ASP.NET MVC2 (VS2008) 的 Telerik 网格是否存在？如果是这样，请提供试用版的链接。

我们需要这样一个带有工具栏和其他标准选项的网格。

先感谢您。

戈兰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T08:49:45.503

Telerik 不再提供 MVC2/VS2008 包装器。当前产品 Kendo UI Complete for ASP.NET MVC 仅支持 MVC3+ 和 VS2010+。

# python - 通过网络传输协议缓冲区的规范方法？

> ID：11964945
> 
> 赞同：7
> 
> 时间：2012-08-15T06:27:42.227
> 
> 标签：python, sockets, networking, protocol-buffers

我正在尝试在网络程序中使用 Google 的协议缓冲区（protobuf）和 Python，使用裸套接字。我的问题是：发送方发送消息后，接收方如何知道发送了什么样的消息？例如，假设我有消息定义：

```
message StrMessage {
    required string str = 1;
}

message IntMessage {
    required int32 num = 1;
} 
```

现在，发送器生成 a `StrMessage`，对其进行序列化，并通过网络发送序列化的字节。接收者如何知道使用 StrMessage 而不是 IntMessage 反序列化字节？我试过做两件事：

```
// Proposal 1: send one byte header to indicate type
enum MessageType {
    STR_MESSAGE = 1;
    INT_MESSAGE = 2;
}

// Proposal 2: use a wrapper message
message Packet {
    optional StrMessage m_str = 1;
    optional IntMessage m_int = 2;
} 
```

不过，这些看起来都不是很干净，而且都需要我手动列出所有的消息类型。有没有规范/更好的方法来处理这个问题？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-15T07:03:14.757

之前已经讨论过这个问题，例如[protobuf list 上的这个线程](https://groups.google.com/d/msg/protobuf/WY77sRrt_GI/30-hPfqn9XUJ)，但根本*没有*规范/事实上的方式来做到这一点。

就个人而言，我喜欢这种`Packet`方法，因为它使所有内容都自包含（实际上，在 protobuf-net 中，我有特定的方法来处理该格式的数据，只需返回`StrMessage`/ `IntMessage`，将`Packet`层作为一个不重要的实现细节，实际上永远不会得到使用），但由于肯顿之前的提议从未得到实施（AFAIK），这**完全**是个人品味的问题。

# android - 如何在 SherlockActivity 上使用 ActionBar 打开一个透明的 SherlockActivity？

> ID：11964946
> 
> 赞同：1
> 
> 时间：2012-08-15T06:27:44.270
> 
> 标签：android, android-layout, android-actionbar, transparent, actionbarsherlock

我想在 SherlockActivity 上用 Actionbar 打开一个透明的 SherlockActivity。请检查随附的屏幕截图。

如何使用 ActionBarSherlock 实现这种布局？

![布局](../Images/d831ef839545c7fa52e9692b2f22bec4.png)

更大的图片：[https ://lh5.googleusercontent.com/-YGQsgT4dyHU/UCp0ohkAHyI/AAAAAAAAB-M/4DDmBML8m5M/s1600/fancy_screenshot_2.png](https://lh5.googleusercontent.com/-YGQsgT4dyHU/UCp0ohkAHyI/AAAAAAAAB-M/4DDmBML8m5M/s1600/fancy_screenshot_2.png)

# c# - 异步读取未知数据长度

> ID：11964947
> 
> 赞同：3
> 
> 时间：2012-08-15T06:27:46.587
> 
> 标签：c#, stream, network-programming, task-parallel-library

我想实现从 a 读取的异步读取，`Stream`直到找到特定的终止字节。我真的不知道在找到给定字节之前我必须阅读多长时间，我想避免让线程等待结果。其他东西稍后会读取相同的流，这意味着我不能在终止字节之后读取太远。

到目前为止，我已经使用`BeginRead`and`EndRead`函数对和递归`AsyncCallback`. 这很好用，但我有点担心如果长度很长，这将如何扩展，因为如果所有读取同步完成，它有时会产生相当令人印象深刻的调用堆栈。

```
public void ReadUntilSpecificByte(Stream stream, byte terminator, Action<byte[]> onComplete)
{
    var output = new List<byte>();
    var buffer = new byte[1];
    Action[] readAction = { null };
    readAction[0] = () => stream.BeginRead(buffer, 0, 1, asyncResult =>
        {
            stream.EndRead(asyncResult);
            if (buffer[0] == terminator)
            {
                onComplete(output.ToArray());
            }
            else
            {
                output.Add(buffer[0]);
                readAction[0]();
            }
        }, stream);
    readAction[0]();
} 
```

我是否在担心可能不是问题的事情，或者这是否可以以更智能的方式编写，以在更多的堆栈空间中运行？不幸的是，我不能使用 c# 4.5，我认为这会使这项任务更加顺利。流本身通常是 a`NetworkStream`或 a `SslStream`。

**编辑：**我采用了 Marc 建议的方法，并为所有读取做了一个内部缓冲区，保持 2k 缓冲区。这是一个可行的解决方案，可能会更好地利用潜在的昂贵读取，因为它总是从底层套接字读取尽可能多的内容。如果可以避免这种情况仍然会很酷，但我想这是完全异步的代价的一部分。

# sql-server - 从 SQL 查询规范 OU 名称

> ID：11964948
> 
> 赞同：0
> 
> 时间：2012-08-15T06:27:49.713
> 
> 标签：sql-server, active-directory

有没有办法使用 SQL 来获取组织单位的规范名称？我找不到这样的属性

# javascript - 如何在不分配给数组变量的情况下读取数组数据

> ID：11964949
> 
> 赞同：2
> 
> 时间：2012-08-15T06:28:00.173
> 
> 标签：javascript, jquery

我有一个文件`data.json`。它有以下数据

```
[
"101 200",
"102 201",
"102 202",
"103 202"
] 
```

如何使用 javascript 读取这些数据？请注意，它没有分配给任何变量，并且文件的名称以结尾，`.json`但里面的数据看起来不像 json 数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T06:36:14.197

[`ajax`使用该方法](http://api.jquery.com/jQuery.ajax/)获取文件（确保您的服务器`application/json`对 JSON 文件使用正确的 Content-Type HTTP 标头 ( )）。

当结果被传递到成功处理程序时，它将以 JavaScript 数组的形式呈现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T06:45:52.593

***[工作演示](http://jsfiddle.net/ANGH5/)***。（注意：仅适用于 HTML5）

编码：

```
 function readSingleFile(evt) {
    //Retrieve the first (and only!) File from the FileList object
    var f = evt.target.files[0]; 

    if (f) {
      var r = new FileReader();
      r.onload = function(e) { 
          var contents = JSON.parse(e.target.result);
          console.log(contents);  
      }
      r.readAsText(f);
    } else { 
      alert("Failed to load file");
    }
  }

  $("#foo").change(readSingleFile); 
```

# android - 如何在不扩展活动类中显示 toast 消息

> ID：11964951
> 
> 赞同：4
> 
> 时间：2012-08-15T06:28:14.893
> 
> 标签：android

嗨，这是我的助手类，我在其中检查内部连接和 xml 解析并将此类用于另一个活动问题是当服务器连接正常但当服务器没有响应或无效输入代码突然停止时，我发现 asyntask 来解决这个问题isse 但我的问题是如何在这段代码中使用 AsyncTask ？或者如果服务器没有响应错误消息连接错误 aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa 显示在日志上但不显示在 toast 上，我该怎么做才能使我的应用程序在服务器没有响应时不会爆炸？任何想法？

```
 public class AgAppHelperMethods {

     private static final String LOG_TAG = null;

     private static AgAppHelperMethods instance = null;

     public static String varMobileNo;
     public static String varPinNo;
     String[][] xmlRespone = null;

     public static String getUrl() {
         String url = "https://demo.accessgroup.mobi/";
         return url;
     }

     public static String[][] AgAppXMLParser(String parUrl) {
         String _node, _element;
         String[][] xmlRespone = null;
         try {
             String url = AgAppHelperMethods.getUrl() + parUrl;
             URL finalUrl = new URL(url);
             DocumentBuilderFactory dbf =
                 DocumentBuilderFactory.newInstance();
             DocumentBuilder db = dbf.newDocumentBuilder();
             Document doc = db.parse(new InputSource(finalUrl.openStream()));
             doc.getDocumentElement().normalize();

             NodeList list = doc.getElementsByTagName("*");
             _node = new String();
             _element = new String();
             xmlRespone = new String[list.getLength()][2];

             for (int i = 0; i < list.getLength(); i++) {
                 Node value = list.item(i).getChildNodes().item(0);
                 _node = list.item(i).getNodeName();
                 _element = value.getNodeValue();
                 xmlRespone[i][0] = _node;
                 xmlRespone[i][1] = _element;
             } //end for
         } //end try
         catch (Exception e) {
             // Toast.makeText(context, "error  server not responding " +  
             e.getMessage(), Toast.LENGTH_LONG).show();
         Log.e(LOG_TAG, "Connection Error aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa",
             e);
         // Do something else, if wanted.
     }
     return xmlRespone;
 } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-15T06:33:29.807

创建一个全局变量，如：

```
Context mContext; 
```

然后向您的类添加一个构造函数，在其中您接受一个[Context](http://developer.android.com/reference/android/content/Context.html)参数并将其分配给 mContext ，例如：

```
public AgAppHelperMethods(Context context) {
      mContext = context;
} 
```

在您的活动中创建一个对象，例如：

```
AgAppHelperMethods helper = new AgAppHelperMethods(getBaseContext()); 
```

最后，展示你的 Toast 用法：

```
 Toast.makeText(mContext, "error  server not responding " + e.getMessage(), Toast.LENGTH_LONG).show(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T07:21:04.520

在您的应用程序类中创建 myToast 方法，例如

```
public void myToast(String msg) {
    Toast.makeText(this, msg, Toast.LENGTH_SHORT).show();
} 
```

并将以下代码添加到您的课程中，

```
private MyApplication application;
public AgAppHelperMethods(Context context) {
  application = (MyApplication)context.getApplication();
} 
```

最后，在你想要的地方调用 myToast 方法，比如

```
applicaion.myToast("msg you want to show"); 
```

注意：将 MyApplication 替换为您的应用程序类

我没有测试过，但这可能对你有用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-15T06:32:42.793

您需要在 toast 中定位您的 applicationContext，我在任何地方都看不到您这样做？而且您已经对您的吐司信息的第一行进行了评论？

编辑：也非常糟糕的代码样式来捕获异常 e。您应该尝试缩小要捕获的异常类型。

# c# - c# 中的线程和 bucles（Windows 窗体）

> ID：11964952
> 
> 赞同：-5
> 
> 时间：2012-08-15T06:28:15.953
> 
> 标签：c#, winforms, multithreading

我正在使用第三方库，该库使用返回消息字符串的函数。我的问题是我不知道什么时候会收到这条消息，我需要用 C# 构建一个在文本框中显示消息的应用程序。

注意：我可以在程序运行时收到“n”条消息。

根据我读到的是我需要使用线程，但不是如何。

我试图这样做，但没有得到想要的结果：

```
Thread p1 = new Thread(new ThreadStart(myfuntion));
p1.Start();

public myfunction()
{
    while (true)
    {
        textbox.text = myobj.messages;
    }
} 
```

请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T07:06:11.240

我喜欢使用 BackGroundWorker。线程仍然会导致锁定，因为线程将从表单本身产生。

```
 private void backgroundWorker1_DoWork(object sender, DoWorkEventArgs e)
    {
        // Do not access the form's BackgroundWorker reference directly.
        // Instead use the reference provided by the sender parameter
        BackgroundWorker bw = sender as BackgroundWorker;

        // Extract the argument
        RequestEntity arg = (RequestEntity)e.Argument;

        // Start the time consuming operation
        Poll poll = new Poll();
        e.Result = poll.pollandgetresult(bw, arg);

        // If operation was cancelled by user
        if (bw.CancellationPending)
        {
            e.Cancel = true;
        }
    } 
```

关于代码项目的好文章...... [阅读](http://www.codeproject.com/Articles/20627/BackgroundWorker-Threads-and-Supporting-Cancel)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T07:28:06.210

由于您使用的是表单，因此您可以使用`System.Windows.Forms.Timer`一定的间隔。

```
private void StartPollingMessage()
{
    System.Windows.Forms.Timer myTimer = new Timer();
    myTimer.Tick += new EventHandler(myTimer_Tick);
    myTimer.Interval = 200;
    myTimer.Start();
}

void myTimer_Tick(object sender, EventArgs e)
{
    textBox1.Text = myobj.messages;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T06:39:58.407

您最好使用`Task`并且必须使用`Invoke`，因为您无法从另一个线程更新 GUI。

```
Task.Factory.StartNew(myfunction);

public void myfunction()
{
    while (true)
    {
        textBox1.Invoke(new Action(() => textBox1.Text = myobj.messages));
    }
} 
```

但是，我对这段代码并不满意。此代码始终在更新 gui。您可能希望在每次迭代之间等待`Thread.Sleep(milliseconds)`或使用库中的某些东西，当有一个消息时向您发送消息，而您不必自己检查它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-20T19:18:46.560

```
void Main()
{
    //this is the line when you start calling the external method
    Parallel.Invoke(() => YourMethod);
}

public void YourMethod()
{
    string s = ExternalMethod();
    //now you can use BackgroundWorker to update the UI or do the same thing as @Amiram Korach suggested
}

public string ExternalMethod()
{
    Thread.Sleep(10000); // the operation to retrieve the string can take 1 hour for example
    return "String that you want to retrieve";
}

// Define other methods and classes here 
```

# c# - 如何检查应用了哪些过滤器

> ID：11964955
> 
> 赞同：9
> 
> 时间：2012-08-15T06:28:26.953
> 
> 标签：c#, winforms, savefiledialog

我正在开发以 xpdl 格式导出数据。有 2 个选项 - 版本 2.1 和 2.2。我正在使用 SaveFileDialog，但如何区分这两个选项？

```
 SaveFileDialog dlg = new SaveFileDialog();
        dlg.Filter = "xpdl 2.1|*.xpdl|xpdl 2.2|*.xpdl";
        if (dlg.ShowDialog() == System.Windows.Forms.DialogResult.OK)
        {
            //how can I check, which format is selected?
        } 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-15T06:29:14.987

[您可以通过检查FilterIndex](http://msdn.microsoft.com/en-us/library/system.windows.forms.filedialog.filterindex)属性来获取或设置对话框的选定过滤器。正如 msdn 中所述：

> 第一个过滤器条目的索引值为 1。

因此，对于您的任务，它将是：

```
 SaveFileDialog dlg = new SaveFileDialog();
        dlg.Filter = "xpdl 2.1|*.xpdl|xpdl 2.2|*.xpdl";
        if (dlg.ShowDialog() == System.Windows.Forms.DialogResult.OK)
        {
            switch (dlg.FilterIndex)
            {
                case 1:
                    //selected xpdl 2.1
                    break;
                case 2:
                    //selected xpdl 2.2
                    break;
            }
        } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-09-02T08:23:05.870

拆分过滤器列表。然后查看FilterIndex。

```
SaveFileDialog dlg = new SaveFileDialog();
dlg.Filter = "xpdl 2.1|*.xpdl|xpdl 2.2|*.xpdl";
if (dlg.ShowDialog() == System.Windows.Forms.DialogResult.OK)
{
    string[] filterstring = saveFilaDialog.Filter.Split('|');
    MessageBox.Show(filterstring[(saveFilaDialog.FilterIndex - 1) * 2]);
} 
```

# asp.net-mvc-3 - 如何在 mvc3 中使用 Simple Injector 注册自定义 ModelMetadataProvider

> ID：11964956
> 
> 赞同：3
> 
> 时间：2012-08-15T06:28:29.117
> 
> 标签：asp.net-mvc-3, inversion-of-control, simple-injector

当我尝试使用简单的注入器注册模型元数据提供程序时，我没有收到任何错误，但是当我访问实例时，默认情况下是 mvc 中的一个。

我尝试注册简单注射器的方式如下；

```
public static class SimpleInjectorInitializer{
    public static void Initialize(){
        var container = new Container(new ContainerOptions AllowOverridingRegistrations = true});
        InitializeContainer(container);
        container.RegisterMvcControllers(Assembly.GetExecutingAssembly());
        container.RegisterMvcAttributeFilterProvider();
        container.Verify();
        DependencyResolver.SetResolver(new SimpleInjectorDependencyResolver(container));
    }
    private static void InitializeContainer(Container container){   
        container.Register<ModelMetadataProvider, MyMetadataProvider>();
    } 
```

}

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-15T07:23:50.927

如果我没记错的话，您必须将您的自定义元数据提供程序显式注册到 MVC：

```
ModelMetadataProviders.Current =
    new MyMetadataProvider(); 
```

如果您还需要将此实例注入到从容器解析的类型中，您还需要在容器中注册它：

```
ModelMetadataProviders.Current =
    new MyMetadataProvider();

container.RegisterSingle<ModelMetadataProvider>(
    ModelMetadataProviders.Current); 
```

如果您希望容器将依赖项注入您的 custom `MyMetadataProvider`，您需要执行以下操作：

```
container.RegisterSingle<ModelMetadataProvider, MyMetadataProvider>();

container.Verify();

// Call this after you're done configuring the container.
ModelMetadataProviders.Current = 
   container.GetInstance<ModelMetadataProvider>(); 
```

由于`ModelMetadataProviders.Current`是单例，因此`ModelMetadataProvider`必须是单例，或者至少，在应用程序的生命周期内对其进行缓存并从多个线程同时访问应该不是问题。当您将依赖项注入其中时，这可能不适合您的自定义提供程序（因为这些依赖项的生命周期可能比单例生活方式更短）。

在这种情况下，您应该创建一个代理提供者来回调`DependencyResolver`：

```
public DependencyResolverModelMetadataProvider : ModelMetadataProvider
{
    public override IEnumerable<ModelMetadata> GetMetadataForProperties(
        object container, Type containerType)
    {
        return GetProvider().GetMetadataForProperties(
            container, containerType);
    }

    public override ModelMetadata GetMetadataForProperty(
        Func<object> modelAccessor, Type containerType, string propertyName)
    {
        return GetProvider().GetMetadataForProperty(
            modelAccessor, containerType, propertyName);
    }

    public override ModelMetadata GetMetadataForType(
        Func<object> modelAccessor, Type modelType)
    {
        return GetProvider().GetMetadataForType(
            modelAccessor, modelType);
    }

    private static ModelMetadataProvider GetProvider()
    {
        return (ModelMetadataProvider)
            DependencyResolver.Current.GetService(
                typeof(ModelMetadataProvider));
    }
} 
```

由于此代理将`DependencyResolver`在每次调用时调用（并且不包含任何状态），因此您可以安全地创建单个实例并将其存储到`ModelMetadataProviders.Current`属性中。

在这种情况下，您的配置将如下所示：

```
// register the proxy that calls back into the container.
ModelMetadataProviders.Current =
    new DependencyResolverModelMetadataProvider();

// Register it as transient.
container.Register<ModelMetadataProvider, MyMetadataProvider>(); 
```

如果您希望您的自定义提供程序装饰原始提供程序，您需要将此原始提供程序注入您的自定义提供程序的属性中（还有其他方法，但这是最简单的方法）：

```
var original = ModelMetadataProviders.Current;

// register the proxy that calls back into the container.
ModelMetadataProviders.Current =
    new DependencyResolverModelMetadataProvider();

// Register it as transient.
container.Register<ModelMetadataProvider, MyMetadataProvider>();

container.RegisterInitializer<MyMetadataProvider>(prov =>
{
    // The decorated provider is put as a property on the
    // MyMetadataProvider class.
    prov.DecoratedProvider = original;
}); 
```

另一种方法是将自定义注册`MyMetadataProvider`为装饰器类：

```
container.RegisterSingle<ModelMetadataProvider>(
    ModelMetadataProviders.Current);

container.RegisterDecorator(
    typeof(ModelMetadataProvider),
    typeof(MyMetadataProvider));

ModelMetadataProviders.Current =
    new DependencyResolverModelMetadataProvider(); 
```

通过注册`MyMetadataProvider`为装饰器，它将包裹在原始注册的`ModelMetadataProvider`（将被注入到`MyMetadataProvider`. 你需要`SimpleInjector.Extensions.dll`项目来获取`RegisterDecorator`扩展。

# debian - 我可以用 LAMP 安装 Phusion 乘客吗？

> ID：11964957
> 
> 赞同：0
> 
> 时间：2012-08-15T06:28:32.913
> 
> 标签：debian

是否可以同时使用 PHP 和 Ruby on Rails？我想在使用 WordPress 博客的同时开发一个 Ruby on Rails 应用程序。如果是这样，有没有人有任何好的指南？我看到了使用 Debian Squeeze 设置 Phusion Passenger 的指南，但我不确定它会与 PHP 一起运行吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T18:30:05.730

只需配置`mod_php`或`FastCGI`像往常一样在虚拟主机中设置即可。

乘客更容易设置：`a2enmod passenger`并将您的虚拟主机设置`DocumentRoot`为`$PROJECT/public`.

他们根本不会互相干扰。

# python - 如何使用 urllib3 和应用引擎直接响应发布请求？

> ID：11964962
> 
> 赞同：1
> 
> 时间：2012-08-15T06:29:05.503
> 
> 标签：python, google-app-engine, urllib3

我正在尝试使用应用程序引擎与第三方建立持久连接。具体来说，我正在连接一个实时竞价环境，我需要在 100 毫秒内做出响应，因此持久连接大大加快了这个过程。

为了做到这一点，我正在尝试使用 urllib3（如果有更好的方法请告诉我）当我的请求处理程序的 post 方法被调用时，我想写回调用 url 以保持连接打开。我了解如何使用 urllib3 打开请求，但是如何保持调用处理程序上的 post 方法时创建的连接。

目前我正在尝试：

```
http = urllib3.PoolManager()
r = http.request('POST', self.request.url, fields={"foo":"bar"}) 
```

但我担心这样做会打开一个全新的连接。

谢谢，山姆

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T07:34:15.533

没有办法使用 AppEngine 实现与服务器的持久连接，根据设计，应用引擎上的每个请求在完成发送后都会关闭。

> **URL Fetch 服务不支持持久**的HTTP 连接。当应用程序使用 URLConnection 对象访问响应数据时，App Engine 会调用 URL Fetch 服务来完成请求。访问响应数据后，无法修改请求数据。
> 
> 应用无法为请求设置显式连接超时。

# response - 如何将响应消息附加到文本文件？

> ID：11964965
> 
> 赞同：0
> 
> 时间：2012-08-15T06:29:16.060
> 
> 标签：response, wso2, vfs

我需要将响应消息写入“response.xml”文件。并且响应应该附加到这个文件中，我将参数“Append”设置为true，但是没有用，每次都被完全覆盖。任何人都可以帮助我吗？谢谢和最好的问候。

```
<proxy xmlns="http://ws.apache.org/ns/synapse" name="EndpointTest" transports="https,http" statistics="disable" trace="disable" startOnLoad="true">
   <target>
      <inSequence>
         <log level="full" />
      </inSequence>
      <outSequence>
         <log level="full" />
         <send>
            <endpoint>
               <address uri="vfs:file:///usr/local/wso2esb-4.0.3/Log" format="pox" />
               <property name="OUT_ONLY" value="true" />
               <property name="transport.vfs.Append" value="true" />
               <property name="transport.vfs.ReplyFileName" value="response.xml" />
            </endpoint>
         </send>
         <send />
      </outSequence>
      <endpoint>
         <address uri="http://172.21.13.151:18989/aaadc/services/receiveMsg" format="pox" />
      </endpoint>
   </target>
</proxy> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T11:51:43.827

从服务级别删除 append= true 参数并与端点 url 一起使用，例如：

```
vfs:file:///usr/local/wso2esb-4.0.3/Log?transport.vfs.Append=true 
```

# jquery - jQuery 滚动一页导航菜单 Bug

> ID：11964970
> 
> 赞同：0
> 
> 时间：2012-08-15T06:29:44.353
> 
> 标签：jquery, html, css

我的导航菜单遇到了一个错误，当您加载页面时它工作正常，在您单击导航页面后它会滚动到特定点，并且它还会向 li 广告一个活动类，因此它看起来突出显示（活动) 但是在我打开一个不同的页面然后单击菜单中的任何导航链接后，它应该返回到它所做的主页，但似乎在获取该部分的位置并添加活动的给它上课。我非常感谢对此的任何帮助，这是该网站的链接：

[http://staging.creativemagma.com/trinity/](http://staging.creativemagma.com/trinity/)

加载站点，测试导航，然后打开一个生物帖子并单击导航中的任何链接以体验问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T07:26:18.780

您的问题是，当用户在主页上滚动到确切点时，是通过 jQuery 处理的，而当用户使用诸​​如[http://staging.creativemagma.com/trinity/#about](http://staging.creativemagma.com/trinity/#about)之类的链接从其他页面访问主页时，它还没有滚动仅由本机浏览器方法控制 - 仅在视口中显示具有所需 ID 的元素

要更正此问题，您必须将其添加到您的 jquery 代码中：

```
$('body').animate({
            scrollTop: $($('.anchor#'+document.location.href.split('#')[1])).offset().top
        }, 1500,'easeInOutExpo'); 
```

加载页面后，我们获取 url 哈希并搜索具有以下 id 的元素（span.anchor）并将整个文档滚动到它

# django - Django 模板 {%for%} 标签每 4 个元素添加 li

> ID：11964972
> 
> 赞同：18
> 
> 时间：2012-08-15T06:29:52.997
> 
> 标签：django, django-templates

我需要在模板中表示集合并将每四个元素包装在

```
<li></li> 
```

模板应该是这样的：

```
<ul>
    <li>
         <a></a>
         <a></a>
         <a></a>
         <a></a>
    </li>
    <li>
         <a></a>
         <a></a>
         <a></a>
         <a></a>
    </li>
    <li>
         <a></a>
         <a></a>
         <a></a>
         <a></a>
    </li>
</ul> 
```

所以我需要在 {% for %}

```
{% for obj in objects %}
 {#add at 1th and every 4th element li wrap somehow#}
    <a>{{object}}</a>
 {# the same closing tag li#}
{% endfor %} 
```

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2012-08-15T06:46:25.493

以下应该使用内置模板标签解决您的问题：

```
<ul>
    <li>
    {% for obj in objects %}
        <a>{{ obj }}</a>

    {# if the the forloop counter is divisible by 4, close the <li> tag and open a new one #}
    {% if forloop.counter|divisibleby:4 %}
    </li>
    <li>
    {% endif %}

    {% endfor %}
    </li>
</ul> 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-08-15T08:02:50.923

您可以使用前面提到的 divisibleby 标记，但出于清除模板的目的，我通常更喜欢返回生成器的辅助函数：

```
def grouped(l, n):
    for i in xrange(0, len(l), n):
        yield l[i:i+n] 
```

示例简单视图：

```
from app.helpers import grouped

def foo(request):
    context['object_list'] = grouped(Bar.objects.all(), 4)
    return render_to_response('index.html', context) 
```

示例模板：

```
{% for group in object_list %}
   <ul>
        {% for object in group %}
            <li>{{ object }}</li>
        {% endfor %}
   </ul>
{% endfor %} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-15T06:33:50.860

您可以使用 divisibleby 内置过滤器，[这里是 django 文档的链接](https://docs.djangoproject.com/en/dev/ref/templates/builtins/?from=olddocs#divisibleby)

所以这样的事情会起作用

```
{% if value|divisibleby 4 %}
#your conditional code
{% endif %} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-10-10T02:51:18.083

如果你想通过检查第一个 forloop 和最后一个 forloop 来工作，你可以使用这个：

```
<ul>
{% for obj in objects %}
{% if forloop.first %}
    <li>
{% endif %}
        <a>{{obj}}</a>
{% if forloop.counter|divisibleby:4 and not forloop.first %}
    </li>
    <li>
{% endif %}
{% if forloop.last %}
    </li>
{% endif %}
{% endfor %}
</ul> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-15T06:36:06.130

我个人会考虑在将视图中的元素传递给模板之前将它们分开，然后使用嵌套的 for 循环。除此之外，您实际上只有 Vaibhav Mishra 提到的过滤器或模板标签选项。

# java - handler.removeCallbacks(runnable) 不起作用:(

> ID：11964973
> 
> 赞同：0
> 
> 时间：2012-08-15T06:30:02.440
> 
> 标签：java, android, timer, handler

我有一个代码

```
Handler handlerTimer2 = new Handler();
Runnable runnableTimer2 = new Runnable() {

    public void run() {
        try { afficherTimer2(); } catch (Exception e) {}
    }

};

public void afficherTimer2() {

    Log.d(MainActivity.APP, "ok afficher Timer 2");

    if (waitingBarTime < 15100) {
        waitingBar.setVisibility(ProgressBar.VISIBLE);
        waitingBar.setProgress((int)waitingBarTime);
        waitingBarTime = waitingBarTime + 1000;
        Log.d(MainActivity.APP, ""+waitingBarTime);
    }
    else
    {
        if (clientFound == true && waitingBarTime > 15000) {
            waitingBar.setVisibility(ProgressBar.INVISIBLE);
            clientFound = false;
            pointOfView.clear();
            parkDataBol = false;
            postForNewTaxi();
            waitingBarTime = 15200;
            runnable.run();
            handlerTimer2.removeCallbacks(runnableTimer2);
        }
        else
        {
            handlerTimer2.removeCallbacks(runnableTimer2);
            handlerTimer2.removeCallbacks(runnableTimer2, null);
            Log.d(MainActivity.APP, "ok afficher Timer 2 else 2");
        }

    }
    handlerTimer2.postDelayed(runnableTimer2, 1000);
} 
```

但是当代码进入handlerTimer2.removeCallbacks(runnableTimer2); 它仍然运行处理程序：S 完成后如何停止此处理程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T06:35:26.967

有没有可能，这条线：

```
handlerTimer2.postDelayed(runnableTimer2, 1000); 
```

导致定时器即使在它被删除后仍然运行？

# php - 附属公司如何跟踪购物车？

> ID：11964975
> 
> 赞同：1
> 
> 时间：2012-08-15T06:30:25.320
> 
> 标签：php, javascript, pixel, affiliate, tracker

所以我们有一个合作伙伴在他们的网站上销售产品。我们希望跟踪用户从我们网站购买的商品数量。

例如，我们推荐用户从我们的合作伙伴网站购买某种产品。用户单击链接并转到产品页面。他决定从我们的合作伙伴网站购买其中的 5 件，而不是购买一件。

我们如何跟踪用户购买的商品数量？像素跟踪器只能捕获这么多，对吧？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T06:40:07.697

根据我自己的理解，像素跟踪通常不会跟踪确切的购物车内容。相反，它记录总交易金额，并根据该金额计算“回扣”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T07:20:23.950

如果您正在自定义编写跟踪解决方案，并且您的会员同意诚实设置，并且设置正确，那么它可以收集的东西不乏。

无论您是在 JavaScript 中构建跟踪链接，还是只是给他们一个`<img>`或`<script>`标记，带有空格的 url（如果界面很简单，JS 解决方案更可能实现无头痛）：

例如

```
// Pixel-tracker for MyStoreAffiliate
(function () {
    var script = document.createElement("script"),
        sale = {
            items : "<server template to insert item-names>",
            total_sale_value : "<server template - insert profit/commission/whatever>",
            unique_sale_id : "<server transaction id>"
        };

    script.onload = (function (sale) { Tracking_lib.track_sale(sale); }(sale));
    script.src = "//domain.com/tracker.js";
    document.getElementsByTagName("script")[0].parentElement.appendChild(script);
}()); 
```

在您的跟踪库中，您真正要做的就是设置您的跟踪 URL，并以某种方式调用它 (AJAX/img.src/script.src)。

如您所见，您可以跟踪您的伴侣愿意向您展示的任何内容。当然，这就是诀窍。

我的日常工作是在自定义情况下为 GA 设置跟踪。并使用 Adob​​e 的分析软件做同样的事情。GA 和 SiteCatalyst 都为我们提供了填写所有详细信息的有用理由。附属像素，不是那么多。除非我们达成某种个人协议，或者获得折扣/福利/等，否则会员跟踪只会填写基本必需品。

祝你好运。

# google-maps - 获取我所在位置附近的餐厅

> ID：11964976
> 
> 赞同：2
> 
> 时间：2012-08-15T06:30:43.460
> 
> 标签：google-maps, google-maps-api-3, google-latitude

我试图找到一个合适`Google Places API`的，可以接收`My Location`并返回附近的`restaurants`.

目前，我只能在“特定”城市找到餐馆。

```
https://maps.googleapis.com/maps/api/place/textsearch/xml?query=restaurants+in+Sydney&sensor=true&key=*MyKey* 
```

有没有办法实现这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T17:54:17.780

这是你想要的？

```
https://maps.googleapis.com/maps/api/place/search/xml?location=49.260691,-123.137784&radius=500&sensor=false&key=*PlacesAPIKey*&types=restaurant 
```

类型是可选的

# android - 如何在android中使用标签进行布局？

> ID：11964977
> 
> 赞同：-4
> 
> 时间：2012-08-15T06:30:53.137
> 
> 标签：android

我是安卓新手。我不知道从哪里开始，以实现这种布局

![在此处输入图像描述](../Images/5d08026143e8abe36b8bff821d83d334.png)

我想在顶部有一个 Horizo​​ntalScrollView，它有一些 4-6 个按钮/图像，单击时将布局的主体更改为不同的 ListView，具体取决于单击的按钮/图像。我不知道这是在相同的活动还是不同的活动中完成。

我一直在寻找选项卡式布局，但找不到我想要的。

任何帮助是极大的赞赏。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T06:51:43.183

如果你愿意`Near by - Offer - Cards`，那就是[`ViewPagerIndicator`](http://viewpagerindicator.com/) 这部分`Near by - Shopping - Electronics`看起来像`tabhost`定制的`tabwidget`。正常，tabhost 适合屏幕中的所有标签小部件，但如果您希望它可滚动。添加 tabwidget`HorizontalScrollView`并添加`android:fillViewport="true"`. 此处详细 [介绍 Android 中的滚动选项卡](http://blog.uncommons.org/2011/04/18/scrolling-tabs-in-android/)

# android - Webview Android 4.0 视频自动启动

> ID：11964978
> 
> 赞同：1
> 
> 时间：2012-08-15T06:30:56.867
> 
> 标签：android, html5-video, android-webview

为什么我的视频无法自动启动，我使用的是三星 Galaxy Tab 2 10.1，但似乎没有视频属性有效。

如您所见，我没有在控件中添加任何内容，我仍然有播放按钮。自动播放已正确设置，但视频不会自行启动。

任何想法 ？

```
 <video  id="myvideo" width="800px" height="250px"  autoplay="autoplay" controls   >
      <source src="/public/files/vide1.mp4" type="video/mp4"  />
    </video> 
```

# python - 立即检查一组变量的布尔值

> ID：11964979
> 
> 赞同：4
> 
> 时间：2012-08-15T06:30:56.860
> 
> 标签：python, boolean

我有大约 10 个布尔变量，`x=True`如果所有这 10 个变量值都为 True，我需要设置一个新的布尔变量。如果其中一个为 False，则设置`x= False`我可以以某种方式执行此操作

```
if (a and b and c and d and e and f...):
    x = True
else:
    x=False 
```

这显然看起来很丑陋。请提出更多的pythonic解决方案。

丑陋的部分是`a and b and c and d and e and f...`

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-15T06:32:16.693

假设您在列表/元组中有布尔值：

```
x = all(list_of_bools) 
```

或正如@minopret 所建议的那样

```
x= all((a, b, c, d, e, f)) 
```

例子：

```
>>> list_of_bools = [True, True, True, False]
>>> all(list_of_bools)
False
>>> list_of_bools = [True, True, True, True]
>>> all(list_of_bools)
True 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T08:10:40.117

```
is_all_true = lambda *args:all(args)

a = True
b = True
c = True

print is_all_true(a,b,c) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-15T06:39:42.277

虽然 using`all`是`one and preferably only obvious way to do it`Python 中的，但这里有另一种方法可以使用[operator模块中的](http://docs.python.org/library/operator)[and_](http://docs.python.org/library/operator#operator.and_)函数和 reduce

```
>>> a = [True, True, False]
>>> from operator import and_
>>> reduce(and_, a)
False
>>> b = [True, True, True]
>>> reduce(and_, b)
True 
```

**编辑：**正如邓肯所说，`and_`是按位运算`&`符而不是逻辑`and`. 它仅适用于布尔值，因为它们将被强制转换为 int（1 或 0）

根据评论，人们应该真正使用 BIF`all`来实现 OP 的要求。我想添加这个作为答案，因为我发现它有时很有用，例如，使用 Q 对象在 Django 中构建复杂的数据库查询以及在其他一些情况下。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-15T06:32:32.847

```
x = a and b and c and d and e ... 
```

如果它必须计算多次，请考虑使用获取所有布尔值的函数（最好作为列表或元组，而不假设其大小）。

# solr - 如何在 solr 中提升具有不同内容的文档

> ID：11964980
> 
> 赞同：0
> 
> 时间：2012-08-15T06:31:02.790
> 
> 标签：solr, lucene, search-engine, dismax

我已经用 Apache Nutch 抓取了一个网站并将其索引到 Solr。我网站的每个页面都有相同的标题，而且结果仅在内容字段中找到。那么我不能像这样提升字段：内容^ 0.5标题^ 2因为我的结果完全在内容字段中。在每个页面中都存在一个h2 html标签中的短语，如果短语（在h2 html标签中）我想提升一个文档) 包含搜索它的单词。我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T06:45:15.503

您可以使用[Edismax](http://lucidworks.lucidimagination.com/display/solr/The+Extended+DisMax+Query+Parser) (extended [Dismax](http://lucidworks.lucidimagination.com/display/solr/The+DisMax+Query+Parser#TheDisMaxQueryParser-DisMaxParameters) ) Parser 根据匹配提升结果。
它允许基于个人术语匹配（qf 和 qs）、短语匹配与短语 slop（ps 和 ps）和 shingle 匹配（pf2 和 pf2）来增强匹配。
您可以配置请求处理程序以相应地提高匹配的相关性。

# python - TypeError: object.__new__() 没有参数

> ID：11964981
> 
> 赞同：11
> 
> 时间：2012-08-15T06:31:11.360
> 
> 标签：python

我一直在研究 Python The Hard Way 并且遇到上述错误并且不知道为什么。我删除了大部分我认为可以的填充文本。对不起，如果它有点长。

```
from sys import exit
from random import randint

class Game(object):

    def __int__(self, start):
        self.quips = [
             "You died. You kinda suck at this.",
             "Your mom would be proud. If shw were smarter.",
             "Suck a loser.",
             "I have a small puppy that's better at this."
        ]
        self.start = start

    def play(self):
        next_room_name = self.start

        while True:
            print "\n-------"
            room = getattr(self, next_room_name)
            next_room_name = room()

    def death(self):
            print self.quips[randint(0, len(self.quips)-1)]
            exit(1)

    def central_corridor(self):
        print "The Gothons of Planet Percal #25 have invaded your ship and destroyed"

        action = raw_input("> ")

        if action == "shoot!":
            print "Quick on the draw you yank out your blaster and fire it at the Gothon."
            return 'death'

        elif action == "dodge!":

            print "Like a world class boxer you dodge, weave, slip and slide right"
            return 'death'

        elif action == "tell a joke":

            print "Lucky for you they made you learn Gothon insults in the academy."
            return 'laser_weapon_armory'

        else:
            print "DOES NOT COMPUTE!"
            return "central_corridor"

    def laser_weapon_armory(self):
        print "You do a dive roll into the Weapon Armory, crouch and scan the room"
        print "for more Gothons that might be hiding. It's dead quiet, to quiet,"
        print "You stand up and run to the far side of the room and find the"
        print "neutron bomb in its container. There's a keypad lock on the box"
        print "and you need the code to get the bomb out. If you get the code"
        print "get the bomb. The code is 3 digits."
        code = "%d%d%d" % (randint(1,9), randint(1,9), randint(1,9))
        guess = raw_input("[keypad]")
        guesses = 0

        while guess != code and guesses < 10:
            print "BZZZZEDDD!"
            guesses += 1
            guess = raw_input("[keypad]> ")

        if guess == code:
            print "The container clicks open and seal breaks, letting gas out."
            print "You grab the neutron bomb and run as fast as you can to the"
            print "bridge where you must place it in the right spot."
            return 'the_bridge'

        else:
            print "The lock buzzes one last time and then you hear a sickening"
            print "melting sound as the mechanism is fused together."
            print "You decide to sit there, and finally the Gothons blow up"
            print "ship from their ship and you die."
            return 'death'

    def the_bridge(self):
        print "You burst onto the Bridge with the netron destruct bomb"

        action = raw_input("> ")

        if action == "throw the bomb":
            print "In a panic you throw the bomb at the group of Gothons"
            return 'death'

        elif action == "slowly place the bomb":
            print "You point your blaster at the bomb under your arm"
            return 'escape_pod'

        else:
            print "DOES NOT COMPUTE!"
            return "the_bridge"

    def escape_pod(self):
        print "You rush through the ship desperately trying to make it to"

        good_pod = randint(1,5)
        guess = raw_input("[pod #]> ")

        if int(guess) != good_pod:
            print "You jump into pod %s and hit the eject button." % guess
            return 'death'

        else:
            print "You jump into pod %s and hit the eject button." % guess
            print "time. You won!"
            exit(0)

a_game = Game("central_corridor")
a_game.play() 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-15T06:33:49.810

你拼错了`__init__`：

```
def __int__(self, start):
        ^ no "i" 
```

# java - java，mysql使用preparedStatement插入多个表

> ID：11964982
> 
> 赞同：0
> 
> 时间：2012-08-15T06:31:17.693
> 
> 标签：java, mysql, insert, prepared-statement

好的，我要改写这个问题，因为我之前让它有点太复杂了。

我想拿这个：

```
con.setAutoCommit(false);
String tempforbatch;
Statement stmt = con.createStatement();
for (int i = 0; i < tables.length; i++) {
     tempforbatch = "INSERT INTO " + tables[i] + " VALUES ('" + values[i] + "')";
     stmt.addBatch(tempforbatch);
}
stmt.executeBatch(); 
```

并将其变成完全相同的东西，仅使用：

```
PreparedStatement stmt = con.prepareStatement("INSERT INTO table_name VALUES (?, ?)"); 
```

其中 'table_name' 可以根据每次循环中的表 [i] 被替换。

到目前为止，我已经尝试了我能想到的所有可能的方法，结果都是一样的，要么对 sql 无效，要么每次都错过了除了最后一个 INSERT 之外的所有方法。

最后，我想制作一个循环来批量处理所有插入，也许是 100 个，也许是 1000 个，我不知道。无论如何，我希望它循环和批处理所有插入，然后在所有插入完成后执行批处理。另一种方法是自己执行每一个插入，这首先会扼杀使用批处理功能的原因。

如果只有一种方法可以做到这一点：

```
PreparedStatement stmt = con.prepareStatement("INSERT INTO ? VALUES (?, ?)");
...loop code here....
stmt.setTable(1, "table1");
stmt.setString(2, "value1");
stmt.setString(3, "value2");
stmt.addBatch();
...end loop here....
stmt.executeBatch(); 
```

但是，众所周知，.setTable 不存在 :( 如果存在，则可以将其放入循环中，并为每次通过循环赋予不同的表值。这种类型的循环现在可以正常工作，只要将其全部提供给同一张桌子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T07:15:38.460

从其他例子来看（比如[java中的PreparedStatement.addBatch有什么限制吗？](https://stackoverflow.com/questions/4392091/preparedstatement-addbatch-in-java-has-any-restrictions)）当你多次调用prepareStatement时，你不能只调用一次executeBatch。对 prepareStatement 的每次调用，虽然它可以对 addBatch 进行多次调用，但必须有自己对 executeBatch 的调用。

因此，为了尽量减少 Java 和 MySQL 之间的通信，我会考虑在 MySQL 中使用存储过程。和往常一样进行优化，我会先尝试简单的方法，然后再得出结论认为实际上需要更复杂的方法（存储过程）。

我还看到其他人在使用 executeBatch 时关闭了自动提交。

# c - 在C中创建***对象（指向指针的指针）

> ID：11964985
> 
> 赞同：0
> 
> 时间：2012-08-15T06:31:26.373
> 
> 标签：c, linux, pointers

我正在尝试编写一个函数来创建一个连续的内存块并将其分配给一个 3d 数组。该代码的工作原理是它允许我使用内存，并且当我使用存储在使用此函数创建的对象中的数据时，结果看起来是正确的。但是，当我尝试释放使用此函数分配的内存时，我立即收到 glibc 错误。这是功能：

```
void *** matrix3d(int size, int rows, int cols, int depth) {
    void ***result;

    int col_size = depth * size;
    int row_size = (sizeof(void *) + col_size) * cols;
    int data_size = (rows * cols * depth + 1) * size;
    int pointer_size = rows * sizeof(void **) + cols * sizeof(void *);
    int i, j;
    char *pdata, *pdata2;

    if((result = (void ***) malloc(pointer_size + data_size)) == NULL)
            nerror("ERROR: Memory error.\nNot enough memory available.\n", 1);

    pdata = (char *) result + rows * sizeof(void **);

    if((long) pdata % (col_size + sizeof(void *)))
            pdata += col_size + sizeof(void *) - (long) pdata % (col_size + sizeof(void *));

    for(i = 0; i < rows; i++) {
            result[i] = pdata;

            pdata2 = pdata + cols * sizeof(void *);

            for(j = 0; j < cols; j++) {
                    result[i][j] = pdata2;
                    pdata2 += col_size;
            }

            pdata += row_size;
    }

    return result;
} 
```

它以这种方式调用：

```
double ***positions = (double ***) matrix3d(sizeof(double), numResidues, numChains, numTimesteps);

for(i = 0; i < numResidues; i++)
    for(j = 0; j < numChains; j++)
        for(k = 0; k < numTimesteps; k++)
             positions[i][j][k] = 3.2;

free(positions); 
```

我做错了什么？感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T06:35:35.997

> 我做错了什么？

你的代码很难理解（你玩`pdata`了很多），但 99% 的你都在写超出分配的空间，而且你弄乱了 glibc 留下的簿记。

> 我可以很好地使用我写的数据。唯一的问题是当我尝试免费使用时。

那是因为`glibc`只有在你打电话时才有机会看到你搞砸了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T06:53:06.380

请原谅我亲爱的莎莉阿姨。

```
int data_size = (rows * cols * depth + 1) * size; 
```

这应该是：

```
int data_size = (rows * cols * (depth + 1)) * size; 
```

运行下面的代码`valgrind`立即发现了错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T06:44:09.147

您正在做的是一次分配，然后将其转换为三指针，这意味着您必须处理很多偏移量。

更多的分配可能会更好：

```
char ***result = malloc(sizeof(char **) * rows);

for(i = 0; i < rows; i++) {
    result[i] = malloc(sizeof(char *) * cols);

    for(j = 0; j < cols; j++) {
        result[i][j] = malloc(sizeof(char) * size);

        /* Copy data to `result[i][j]` */
    }
} 
```

释放时，您必须释放所有分配：

```
for(i = 0; i < rows; i++) {
    for(j = 0; j < cols; j++) {
        free(result[i][j]);
    }

    free(result[i]);
}

free(result); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-15T07:00:28.940

像这样的事情是错误的伟大候选人

```
pdata = (char *) result + rows * sizeof(void **); 
```

完全没有理由规避编译器为您执行的地址计算。

# html - 下拉菜单闪烁问题

> ID：11964986
> 
> 赞同：-1
> 
> 时间：2012-08-15T06:31:27.150
> 
> 标签：html, css, drop-down-menu

我的下拉菜单有问题。当您触摸其顶部和顶部两侧时，它会闪烁。您可以在此处查看示例[http://jsfiddle.net/bombula/TKwNS/](http://jsfiddle.net/bombula/TKwNS/)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T07:30:01.457

写了这段代码希望对你有帮助

```
$(function () {
    $('.dropdown_menu').hover(
            function () {
                $('ul#submenu').slideDown("1000"); 
            });
    $('.dropdown_menu').mouseleave(
         function () {
                $('ul#submenu').stop().slideUp("1000"); 
            });
});​ 
```

# silverlight - 沙盒应用程序模式下 Cocoa WebView 中的 Silverlight

> ID：11964988
> 
> 赞同：0
> 
> 时间：2012-08-15T06:31:36.513
> 
> 标签：silverlight, cocoa, webview, sandbox, entitlements

问题很简单，我有一个 WebView 可用于浏览某些可能包含 silverlight 应用程序的页面。

在非沙盒模式下一切正常。

在沙盒模式下，所有 webkit 插件都可以工作，除了 Silverlight：没有抛出异常，沙盒日志中没有任何内容，页面中只有一个空的 silverlight 应用程序占位符。

我想知道是否有人偶然发现了同样的问题并找到了使其工作的方法:)

更新：我在我的权利文件中添加了以下键/值，但它没有帮助

```
<key>com.apple.security.temporary-exception.mach-lookup.global-name</key>
<array>
    <string>com.apple.WebKit.PluginAgent</string>
</array> 
```

更新 2：silverlight 版本 5.1.10411.0，Mac OSX：10.8 (12A269)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T13:50:14.010

我让它在 Mac OS X Lion 10.7.4 (11E53) 上工作，使用：

```
<key>com.apple.security.temporary-exception.mach-lookup.global-name</key>
<array>
    <string>com.apple.WebKit.PluginAgent</string>
</array> 
```

在 .entitlements 文件中。在 WebView 中测试了 Silverlight 和 flash 插件。

# css - 浮动右元素对齐底部CSS？

> ID：11964995
> 
> 赞同：2
> 
> 时间：2012-08-15T06:32:28.513
> 
> 标签：css, css-float

这是我的设置：

我有一个评论容器 div。在这个 div 里面，我还有三个 div。两个是左浮动，一个是右浮动。

[http://imgur.com/hkLI5](http://imgur.com/hkLI5)

这 3 个 div 周围有圆角边框。我认为很容易分辨上图中哪些是左浮动和右浮动。

在三个浮动的div之后，有一个看不见的“清晰” div，

```
<div style="clear:both; border:none;"></div> 
```

我的问题是，我似乎无法找到一种方法让“一些测试信息”div 一直滑到我的评论底部（这样它的底部就在“清晰”div 的顶部上方。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-15T06:37:09.407

浮动不是那样工作的。元素将始终像 [在此处插入明喻] 一样浮动到顶部。

您可能不得不放弃该`float`方法并使用`absolute`定位，类似于

```
bottom:0;
left:0; 
```

如果你这样做，你还需要设置一个`top`属性，所以它不会堆叠在 stats 部分的顶部。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-15T06:55:00.357

在容器 div 内添加评论 div 并`"some test info" div`在此容器内添加，这使其成为一种简单的 css 样式，这将始终编辑评论 div 下方的 div

```
<head>
  <style type="text/css">
    div.comment_and_edit_container {
      float:left;
    }
    div.comment, div.edit {
      display:block;
    }
    div.comment {
      min-width:500px;
    }
  </style>
</head>
<div class="comment_and_edit_container">
  <div class="comment"></div>
  <div class="edit"></div>
</div> 
```

# dojo - 在某些（奇怪的）情况下，现有的小部件在小部件模板中不可用

> ID：11964998
> 
> 赞同：0
> 
> 时间：2012-08-15T06:32:47.763
> 
> 标签：dojo, js-amd

这花了我一段时间。许久。我一次解决了两个问题（循环依赖，通过重构修复，以及*这个*问题）。要将这个问题放到 JSFiddle 中需要做很多工作......但我认为这是值得的。所以：

[http://jsfiddle.net/EVbTL/3/](http://jsfiddle.net/EVbTL/3/)

我定义了三个小部件：

*   r.AppMainScreen -- 这是主应用程序的小部件。简单：只有一堆选项卡和一个包含一个简单按钮的按钮，它是：

    ```
    // SUbmit form
    this.form.onSubmit = function(e){
        e.preventDefault();
        console.log("HERE");
        dialog = new r.RetypePasswordDialog();
        dialog.show();           
        return false;
    } 
    ```

相当无趣。

*   r.RetypePasswordDialog() -- 代表对话框的模板化小部件。唯一有趣的是：

    `< input name="password" id="${id}_password" data-dojo-attach-point="password" data-dojo-type="app.ValidationPassword" />`

这是一个简单的自定义小部件，在这个文件中定义，它进行验证。注意：我知道在这里为这个小工作创建一个子类是没有意义的。请记住，这是一个*示例*。

*   r.ValidationPassword()

带有一些额外验证的增强 ValidationTextBox。

如果你点击按钮，你会得到：

```
Uncaught Error: Could not load class 'app.ValidationPassword 
```

……？！？app.ValidationPassword*肯定*已经被定义了。它应该在那里可用。一开始，我以为是因为一个循环依赖（昨天很有趣：我不得不学习AMD循环依赖同时试图解决这个问题......）

如果取消注释此行，则在脚本中执行：

```
TEST = new r.RetypePasswordDialog(); 
```

整个事情都有效。这是一个毫无意义的例子，我无法弄清楚为什么这会或应该有所作为。

最欢迎解释......我找不到任何解释！

谢谢，

默克。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T09:30:34.067

```
app = new r.AppMainScreen( {}); 
```

您在这里重新定义了全局`app`变量，但试图在别处将其用作您的类型系统的基础对象。用于`var`将变量范围限定为函数。