# StackOverflow 问答 11207000-11207999

# javascript - iOS PhoneGap 调试工作流程

> ID：11207001
> 
> 赞同：9
> 
> 时间：2012-06-26T12:08:41.673
> 
> 标签：javascript, ios, xcode, cordova

你如何在 Xcode 中调试 javascript？

我可以做的一件事是在 OS X Chrome 浏览器中打开页面，但这自然不适用于涉及本机代码的应用程序流。是否有我缺少的智能 Xcode 技巧。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-25T13:09:51.417

随着 iOS 6 的发布，Apple 为他们的 Mobile Safari 和 Mac Safari 6 一起发布了远程 Web Inspector，这是巨大的。基本上，您拥有常规 Safari 中 Web Inspector 的所有功能和强大功能，适用于您的移动应用程序，包括 Phonegap 应用程序。我使用了 weinre，这使得它在较新版本的 iOS 中已经过时（但不适用于旧版本的 iOS、Android 等非 iOS 设备，或者如果您使用的是 Windows）。

以下是它的工作原理（需要 Mac，运行 iOS 6+ 模拟器的 xCode 4.5+ 或 iOS 6+ 设备，以及 Mac 上的 Safari 6+）：

在您的 ios 模拟器或 ios 设备中，打开 settings --> Safari --> Advanced --> Web Inspector --> (turn On) 。（这在模拟器中默认开启，但值得检查）

在 Safari 中，启动 phoneGap/cordova 应用程序并加载并运行后，从“开发”菜单访问 iPhone 模拟器或您的设备。您可以在 Safari 的“高级首选项”中启用“开发”菜单（如果尚未启用）。

更多讨论在底部： [http ://www.mobilexweb.com/blog/iphone-5-ios-6-html5-developers](http://www.mobilexweb.com/blog/iphone-5-ios-6-html5-developers)

（另外，如果您在某处读到“秘密私有接口”，这将不再起作用。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T15:38:48.927

尝试使用 weinre，它是在移动设备上调试 javascript 应用程序的一个非常好的工具。

[http://people.apache.org/~pmuellr/weinre/docs/latest/](http://people.apache.org/~pmuellr/weinre/docs/latest/)

尽管您仍然无法像在桌面上提供的那样逐步调试脚本，但它提供的细节比 xcode（~ 用于 javascript）要详细得多。

# javascript - javascript线程

> ID：11207007
> 
> 赞同：3
> 
> 时间：2012-06-26T12:08:57.867
> 
> 标签：javascript

[http://jsfiddle.net/andersb79/SNTb3/1/](http://jsfiddle.net/andersb79/SNTb3/1/)

在此示例中，当您单击运行时。得到 1000 次问候后，该 div 被动画化。如果我在开头评论 for 循环并在另一个 for 循环中评论动画在追加运行之前开始。

但随后动画运行不流畅。你能以某种方式让这件事发生吗？或者在javascript中是不可能的。

我希望它在动画的同时加载 divDocument。我并不是说它应该是实时添加的，但我不希望它弄乱动画，我不想通过在动画之前添加 1000 条记录来浪费时间是开始了。

希望你能理解我的问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T12:13:47.407

如果您要一次性添加 10000 个元素，它将*阻止*任何其他活动，直到它完成。

如果你开始动画然后添加，它很生涩，因为有一段时间系统忙于添加 div，然后突然意识到它在动画后面运行，它必须急于赶上。请注意，动画不会*与*元素的添加交错。

解决这个问题的最好方法是*批量*添加元素，`setTimeout`每次都用来触发下一批。

批处理使后台线程有时间运行任何其他事件，例如动画处理程序。

有关使用批处理的工作演示，请参阅[http://jsfiddle.net/alnitak/yETt3/](http://jsfiddle.net/alnitak/yETt3/)。样本的核心是这样的：

```
 var n = 0,
        batch = 100;

    function nextBatch() {
        for (var i = 0; i < batch && n < 10000; ++i, ++n) {
            $("#divDocument").append("<div>hello</div>");
        }
        if (n < 10000) {
            setTimeout(nextBatch, 0);
        }
    }

    setTimeout(nextBatch, 0); 
```

它一次添加 100 个元素，`setTimeout`调用允许事件处理线程跳入并处理动画和其他 UI 事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T12:14:13.980

例如，您可以使用 setTimeout

```
$(document).ready(function () {

            $(".openWindow").click(function () {

                setTimeout(function() {

                var divToShow = $("#divDocument");

                var windowWidth = $(window).width();
                var leftOut = (windowWidth * -1);
                var leftIn = windowWidth + 500;

                divToShow.css({ left: leftIn });
                divToShow.show();
                divToShow.animate({ left: 0 }, 400, function () {
                    divToShow.addClass("visibleDiv");
                });

            }, 2000);

                for (var i = 0; i < 10000; i++) {
                    $("#divDocument").append("<div>hello</div>");
                } 

            });

        }); 
```

如果要在添加元素后运行动画，则必须为附加元素创建函数，并在此函数结束时调用动画。如果你想以异步方式运行它，你必须使用 setTimeout(func, 0) 进行动画和元素添加。

# drupal - 带有视图的作者节点页面

> ID：11207011
> 
> 赞同：2
> 
> 时间：2012-06-26T12:09:07.477
> 
> 标签：drupal, drupal-7, drupal-views

我有一个站点，其中可以有多个节点作者。我对此的解决方案是添加到我的内容类型中的称为*附加作者的自定义用户参考字段。*因此，如果三个人写了一篇文章，那么发表文章的人会将另外两个人输入到这个*额外的作者*字段中。

我遇到的问题如下：我正在尝试创建一个包含所有作者节点列表的页面（带有视图）——这些节点可以是他作为作者的节点，也可以是**他**在其他作者下被引用的节点。我希望在 url (mysite.com/people/john-smith) 中指定作者，但如果我在视图中使用上下文过滤器，我似乎找不到使用 OR 的选项 - 例如从 url 获取作者 ID并显示他是作者的节点或他在其他作者之下的节点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T18:37:21.710

我在这里没有看到任何问题：?? 为什么不将“作者字段”添加到您的字段中？
如果您没有通过正常方式找到它，请在“关系”中查找它，
Goodluck

# javascript - 改变锚点“位置”的好方法？

> ID：11207012
> 
> 赞同：0
> 
> 时间：2012-06-26T12:09:09.560
> 
> 标签：javascript, html, css

所以我一直在尝试建立一个新网站...... [http://zergxost.com/test.html](http://zergxost.com/test.html) - 完全加载需要相当长的时间，这就是免费主机的价格......

它是原始的，悬停按钮没有预加载，顶部的徽标是草图等等......但这不是我的问题 - 我实际上需要帮助来整理一件事 - 锚点。

您会看到，如果您尝试单击它们（内容部分中的那些），标题显得有点太高，并且由于菜单而无法看到。您对如何解决此问题有任何提示吗？谢谢。

另外，如果你今天感觉特别大方，你有没有想到不会破坏我的布局的 js 滚动条？再次感谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T13:17:45.560

看起来您的`<div id="content">`div 没有足够的空间将其从`<div id="shelf">`. 你的解决办法是增加属性往下`top`推。`content``shelf`

所以代替这个：

`div#content {top: 155px;}`

你应该有这个：

`div#content {top: 190px;}`

...或任何您认为适合您的设计的数字。这应该可以解决每个锚点的问题。

# php - 以正确的方式迭代数组

> ID：11207019
> 
> 赞同：-2
> 
> 时间：2012-06-26T12:09:33.730
> 
> 标签：php

> **可能重复：**
> [php循环通过关联数组](https://stackoverflow.com/questions/11189879/php-loop-through-associative-arrays)
> [php数组，循环获取确切值](https://stackoverflow.com/questions/11202747/php-array-loop-to-get-the-exact-value)

这个问题我已经发了好几次了，只是因为我似乎无法解决它，这是我最后一次发布它，我做了一些更改，我希望我能解决它，否则我将退出！

所以关键是我有这个代码，我有这个 $friendlikesid 有这样的结构

```
data {
name;
category;
id
} 
```

我需要遍历所有的 id 以找到一个特定的。现在我的代码是这样的，但它不能正常工作，它应该打印不喜欢特定 id 的朋友。

```
for($i=0;$i<count($fbfriendlikes);$i++)
 { 
     if ($fbfriendlikes[data][$i][id] == 191777737516178) 
     {
        $return .= '<div class="fimage">'.$image.'</div>';
        $link = '<a href="'.$protocol . '://www.facebook.com/profile.php?id='.$fbid.'" target="_blank">'.$fbname.'</a>';    
        $return .= '<div class="flink">'.$link.'</div>';
        break;
    }
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T12:15:55.743

试试这个希望它会工作，否则

**在foreach循环下的if语句中**回显$row['data']['id']查看值****

 **```
foreach($fbfriendlikes as $row){
if ($row['data']['id'] == 191777737516178) {
 $return .= '<div class="fimage">'.$image.'</div>';
            $link = '<a href="'.$protocol . '://www.facebook.com/profile.php?id='.$fbid.'" target="_blank">'.$fbname.'</a>';    
            $return .= '<div class="flink">'.$link.'</div>';
            break;
            }
} 
```**

# php - PHP：搜索数组

> ID：11207022
> 
> 赞同：0
> 
> 时间：2012-06-26T12:09:39.123
> 
> 标签：php

我得到两个数组

```
Array
(
    [0] => 1990
    [1] => 1991
    [2] => 1992
    [3] => 1993
    [4] => 1994
    [5] => 1995
    [6] => 1996
    [7] => 1997
    [8] => 1998
    [9] => 1999
    [10] => 2000
    [11] => 2001
    [12] => 2002
    [13] => 2003
    [14] => 2004
    [15] => 2005
    [16] => 2006
    [17] => 2007
    [18] => 2008
    [19] => 2009
    [20] => 2010
    [21] => 2011
    [22] => 2012
    [23] => 2013
) 
```

和

```
Array
(
    [0] => Array
        (
            [year] => 2011
            [conv_value] => 80
        )

    [1] => Array
        (
            [year] => 2012
            [conv_value] => 95
        )

    [2] => Array
        (
            [year] => 2004
            [conv_value] => 60
        )

    [3] => Array
        (
            [year] => 2000
            [conv_value] => 55
        )

) 
```

并希望从第一个数组中的第二个数组中找到年份的匹配项并创建一个长度正好为第一个数组搜索的新数组应该如下所示：

如果找到年份，则将设置一个新索引名称**conv_value**包含来自第二个数组索引**conv_value**的值，如果未找到，则**conv_value**将为空。

像这样

```
Array
(
    [0] => Array
        (
            [year] => 1990
            [conv_value] => 
        )

    [1] => Array
        (
            [year] => 1991
            [conv_value] => 
        )

    [2] => Array
        (
            [year] => 1992
            [conv_value] => 
        )

    [3] => Array
        (
            [year] => 1993
            [conv_value] => 
        )

    [4] => Array
        (
            [year] => 1995
            [conv_value] => 
        )

    [5] => Array
        (
            [year] => 1996
            [conv_value] => 
        )

    [6] => Array
        (
            [year] => 1997
            [conv_value] => 
        )

    [7] => Array
        (
            [year] => 1998
            [conv_value] => 
        )

    [8] => Array
        (
            [year] => 1999
            [conv_value] => 
        )

    [9] => Array
        (
            [year] => 2000
            [conv_value] => 55
        )

    [10] => Array
        (
            [year] => 2001
            [conv_value] => 
        )

    [11] => Array
        (
            [year] => 2002
            [conv_value] => 
        )

    [12] => Array
        (
            [year] => 2003
            [conv_value] => 
        )

    [13] => Array
        (
            [year] => 2004
            [conv_value] => 95
        )

    [14] => Array
        (
            [year] => 2005
            [conv_value] => 
        )

    [15] => Array
        (
            [year] => 2006
            [conv_value] => 
        )

    [16] => Array
        (
            [year] => 2007
            [conv_value] => 
        )

    [17] => Array
        (
            [year] => 2008
            [conv_value] => 
        )

    [18] => Array
        (
            [year] => 2009
            [conv_value] => 
        )

    [19] => Array
        (
            [year] => 2010
            [conv_value] => 
        )
    [20] => Array
        (
            [year] => 2011
            [conv_value] => 80
        )

    [21] => Array
        (
            [year] => 2012
            [conv_value] => 95
        )

    [22] => Array
        (
            [year] => 2013
            [conv_value] => 
        )

    ) 
```

我编写了脚本

```
for ( $y = 0; $y < sizeof($cc); $y++ ){
    for ( $z = 0; $z < sizeof($years); $z++ ){
        if ($cc[$y]['year'] == $years[$z]) {
            echo 'Hay<br>';
        }else{
            echo 'Nahee hay<br>';
        }
    }
} 
```

但没有得到结果..

我在哪里做错了。？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T12:13:21.550

尝试使用 in_array ...

```
if (in_array($cc[$y]['year'], $years)) { 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T04:53:54.263

这是很长的代码，但我写了它并解决了我的问题：

```
<?php
                // all years                
                for ($i = 1990; $i <= (date('Y')+1); $i++){
                    $years[] = $i;
                }

                // db years
                $i=0;
                foreach ( $cur_conv as $key ){
                    $cc[$i]['year'] = $key['year'];
                    $cc[$i]['conv_value'] = $key['conv_value'];
                    $i++;
                }

                // make array which contain only years
                for($i=0; $i<sizeof($cc); $i++){
                    $db_years[] = $cc[$i]['year'];
                }

                // finally search local array in db array
                for($j=0; $j<count($years); $j++)
                {
                    $index = array_search($years[$j], $db_years);

                    if ( $index === FALSE )
                    {
                        $new_arr[$j]['year'] = $years[$j];
                        $new_arr[$j]['conv_value'] = '';

                    } else {

                        $new_arr[$j]['year'] = $cc[$index]['year'];
                        $new_arr[$j]['conv_value'] = $cc[$index]['conv_value'];
                    }
                }
                ?> 
```

# java - 如何解决“非法混合排序规则”SQLException？

> ID：11207027
> 
> 赞同：4
> 
> 时间：2012-06-26T12:10:04.720
> 
> 标签：java, mysql, jdbc, collation

我查看了mysql参考，在这里，在stackoverflow中，看起来很多人在字符编码方面遇到了困难，但我找不到这个问题的明确答案：

一个 java 程序正在使用 mysql 数据库，当查询中有特殊字符，如 ű,ő（但 á,é,í,ó,ú 有效）时，它会抛出 SQLException：

```
 Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");
    Connection conn = DriverManager.getConnection(
            "jdbc:odbc:<database>", "<user>", "<pass>"
            );

    PreparedStatement stmt = conn.prepareStatement(
            " select username, priority " +
            " from users " +
            " where username like ?");
            //" where username like ? collate latin2_general_ci");
    stmt.setString(1, "Ernő");
    ResultSet rs = stmt.executeQuery();
    while(rs.next()) {
        System.out.println(rs.getString("username") + "  " + rs.getInt("priority"));
    } 
```

例外：

```
Exception in thread "main" java.sql.SQLException:
[MySQL][ODBC 5.1 Driver][mysqld-5.1.63-0ubuntu0.10.04.1]
Illegal mix of collations (latin2_hungarian_ci,IMPLICIT)
and (latin1_swedish_ci,COERCIBLE) for operation 'like' 
```

表结构为：

```
CREATE TABLE `users` (
`username` varchar(45) COLLATE latin2_hungarian_ci NOT NULL,
`password` varchar(45) COLLATE latin2_hungarian_ci NOT NULL,
`priority` tinyint(4) NOT NULL,
`idCimlistaFK` int(10) unsigned DEFAULT NULL,
`timestamp` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
PRIMARY KEY (`username`),
KEY `fk_users_tbl_Cimlista1` (`idCimlistaFK`),
CONSTRAINT `fk_users_tbl_Cimlista1` FOREIGN KEY (`idCimlistaFK`)
REFERENCES `tbl_cimlista` (`id_Cimlista`) ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE=InnoDB DEFAULT CHARSET=latin2 COLLATE=latin2_hungarian_ci 
```

当我试图在注释行中强制进行排序时：

```
" where username like ? collate latin2_general_ci"); 
```

它还会引发异常：

```
COLLATION 'latin2_general_ci' is not valid for CHARACTER SET 'latin1' 
```

有谁知道，如何解决这个问题（可能在java中）？（我不希望更改数据库，因为它是一个遗留系统。）

**更新：**

根据 Rahul Agrawal 的建议，我使用了以下网址：

```
"jdbc:mysql://localhost:3306/database?characterEncoding=latin2" 
```

它确实有效，但是，我注意到了一个副作用。当我使用测试服务器更新和插入数据时，它在 Win XP 机器上运行 mysql，一切正常。但是当我更新数据并将数据插入到运行 Ubuntu 的生产服务器时，我确实得到了行，其中有 ?-符号而不是 ő,ű-字母。从那以后，我通过一种解决方法解决了这个问题，但是很高兴看到和理解，出了什么问题，这里有什么问题。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-26T12:42:43.963

您需要使用 UTF-8 字符集

在连接 URL 中试试这个

```
jdbc:mysql://localhost:3306/testdb?characterEncoding=utf8 
```

数据库 CHARSET=utf8

数据库排序规则 = utf8_general_ci

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-11-15T18:45:19.183

由于显而易见的原因，您并不总是可以更改数据库列。在这些时候，正则表达式可以帮助您。

您可以使用以下内容：

```
String output = input.replaceAll("[^\\u0020-\\u007e\\u00a0-\\u00ff]",
                                     replaceWithWhateverYouWant); 
```

# modelica - Modelica.Media：BaseProperties 与 setState_XXX

> ID：11207029
> 
> 赞同：0
> 
> 时间：2012-06-26T12:10:16.493
> 
> 标签：modelica

[Modelica 标准库](https://modelica.org/libraries/Modelica/)附带`Modelica.Media`提供流体热力学特性的库。引用[Modelica.Media 文档](https://build.openmodelica.org/Documentation/Modelica.Media.UsersGuide.MediumUsage.BasicUsage.html)：

> Modelica.Media 中的媒体模型由包提供，继承自部分包`Modelica.Media.Interfaces.PartialMedium`。每个包都定义：
> 
> *   [...]
> *   一个`BaseProperties`模型，用于计算流体的基本热力学性质；
> *   `setState_XXX`从不同的输入参数（例如密度、温度和组成，将是 setState_dTX）计算热力学状态记录的函数；
> *   [...]
> 
> 如上所述，有两种不同的使用媒体库的基本方法，将在下一节中更详细地描述。
> 一种方法是使用模型 BaseProperties。
> [...]
> 第二种方法是使用 setState_XXX 函数来计算热力学状态记录，从中可以计算所有其他热力学状态变量 [...]

我的同事更喜欢`BaseProperties`（他花大部分时间建模组件），
我更喜欢`setState_XXX`函数（我花大部分时间编写属性库）。
现在我们想一起开发一个简单而小型的组件库，也许我们应该同意使用这两种方法中的一种。

你能推荐一本解释这两种方法的优缺点的[出版物吗？](https://modelica.org/publications)提倡使用该`setState_XXX`功能的出版物当然是首选... ;-)

是否有一些简单的规则来决定在对组件（例如非常简单的涡轮机）进行建模时使用两种方法中的哪一种？Modelica.Fluid 中的组件似乎同时使用了两者。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T09:46:22.503

用于计算属性的两种类型的模式都可以用于所有类型的组件，但 BaseProperties 的设计目的是使 Modeller 的生活更容易用于具有动态状态的组件，即通常用于存储体积中的质量和能量。您只需要编写守恒方程，实例化 BaseProperties，将相关变量等同起来，就完成了。对于具有固定质量和能量平衡的组件（如简单的阀门、泵和涡轮机）来说，这通常是多余的（比最低要求更多的方程）。对于这种类型的组件（无动态状态），setState_xxx 方法提供了一种使用最少必要数量的方程的方法。我认为这也是您将在 Modelica.Fluid 中看到的内容：BaseProperties 与动态方程一起用于质量和能量存储，

方程的最小数量并不是计算效率的全部，但在一般模型中，不应计算超过实际需要的数量。

# jquery - twitter bootstrap datepicker 分配给一个字段

> ID：11207037
> 
> 赞同：-1
> 
> 时间：2012-06-26T12:10:35.433
> 
> 标签：jquery, datepicker, twitter-bootstrap

嗨，我对此[http://dl.dropbox.com/u/143355/datepicker/datepicker.html](http://dl.dropbox.com/u/143355/datepicker/datepicker.html) twitter 引导插件有疑问。

如何更改此代码，以便我可以将 datepicker 分配给我想要的字段？我试过这样

```
$('[data-datepicker]').each(function(){
   new DatePicker(this, option);
});

new DatePicker($('#date'), options); 
```

而且每次都搞定`Datepicker is undefined`。如何使它工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T13:34:05.940

您不能使用`Datepicker`，因为它包含在插件*命名空间*中。你应该使用它：

```
$('#date').datepicker(options); 
```

并删除这样的`data-datepicker`属性：

```
<input id="date" type="text"/> 
```

* * *

对于大家的信息，这是**插件的来源**：[https ://github.com/twitter/bootstrap/pull/657](https://github.com/twitter/bootstrap/pull/657)

# google-maps-api-3 - 谷歌已开始以粉色突出显示搜索区域。Google Maps API 3 中是否提供此功能？

> ID：11207045
> 
> 赞同：26
> 
> 时间：2012-06-26T12:11:25.497
> 
> 标签：google-maps-api-3

自 2012 年 1 月起，Google 开始以挑选颜色突出显示搜索区域。在此处查看详细信息：http: [//googlesystem.blogspot.in/2012/01/highlight-areas-in-google-maps.html](http://googlesystem.blogspot.in/2012/01/highlight-areas-in-google-maps.html)

有谁知道这是否可以使用谷歌地图 API 3 以编程方式完成？我想在上面的链接中突出显示的地图中显示我的城市。

我已经尝试过搜索城市的 Geocode API。该 API 只为我提供经纬度信息。它对我绘制城市边界没有帮助。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-06-26T13:54:38.727

不，它在 API 中不可用。

（将来*可能*会提供。Google Maps 的功能确实会迁移到 API 中，**但**Google 不会提前发布公告，也没有人有水晶球。）

您需要找到城市边界并自己画线。边界数据几乎可以肯定是美国的公共领域。其他司法管辖区可能不会那么容易接受。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-01-04T11:57:46.210

尽管我的回答很老，但每次我查询边界框时，我的回答可能会帮助到这里的人：

是的，我们可以使用谷歌的地理编码服务获得谷歌用来突出显示区域的边界框坐标。在以下来自 Google 的示例中检查 API 调用的响应。

[https://developers.google.com/maps/documentation/javascript/examples/geocoding-simple?refresh=1](https://developers.google.com/maps/documentation/javascript/examples/geocoding-simple?refresh=1)

# sql-server - SQL 报告服务：第一次调用很慢

> ID：11207049
> 
> 赞同：19
> 
> 时间：2012-06-26T12:11:36.400
> 
> 标签：sql-server, reporting-services, ssrs-2008

我已经安装了 SQL 报告服务器 (2008 R2)，其中包含一些报告。但我有一些性能问题。

当天对服务器的第一次调用（例如在报告界面上进行）非常慢（充其量是 30-45 秒）。

然后报告生成“快速”（1-2 秒）。

对服务器的下一次调用总是禁食，直到第二天。我的印象是它在内存中加载了很多东西。但是什么可能需要 30-45 秒才能加载到内存中？？？以及如何只加载一次？

服务器足够好（四核，8GB 内存，目前从未接近其容量）。

问题是什么？我该如何解决这个问题？

那些报告将在一周内仅发布 4-5 次，因此如果我无法更改，它们将总是很慢。而且由于它可供客户使用，我只是无法让他们理解这一点（并且报告是通过网站调用的，所以我冒着超时的风险）。

非常感谢你

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-06-26T14:25:30.773

这似乎是一个SSRS问题。你的报告没有任何问题。

在长时间不活动后第一次访问 SSRS 时，加载 SSRS 需要更多时间，这是“正常的”。该问题是由 SSRS 的工作方式和 SSRS 在特定时间段后定期重新启动应用程序域的方式引起的。应用程序域重新启动后，第一次向 SSRS 请求时，它需要加载所有设置，并且需要相当长的时间。

[这个](http://www.pawlowski.cz/2011/07/solving-issue-long-starting-report-ssrs-2008/)博客节目是解决这种情况的方法

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-04-25T20:34:53.017

这是我为解决问题而编写的 powershell 脚本。它被设置为每天凌晨 1:00 运行的任务：

```
Stop-Service "SQL Server Reporting Services (MSSQLSERVER)"
Start-Service "SQL Server Reporting Services (MSSQLSERVER)"
$wc = New-Object system.net.webClient
$cred = [System.Net.CredentialCache]::DefaultNetworkCredentials
$wc.Credentials = $cred
$src = $wc.DownloadString("http://localhost/Reports/Pages/Report.aspx?ItemPath=***NAME OF HOME PAGE***") 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T12:14:55.860

我能想出的最佳解决方案是使用 windows 服务中的 windows 批处理命令向报告的 http 页面发出“curl”命令。这在用户进来之前每天早上都会运行页面。

不再有权访问代码（工作是前一段时间），但这个问题显示了如何使用 curl：

[http://blogs.plexibus.com/2009/01/15/rest-esting-with-curl/](http://blogs.plexibus.com/2009/01/15/rest-esting-with-curl/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-07-23T21:27:53.533

正如 Diego 所说，SSRS 存在一些问题。关于您的服务器配置，第一次调用它很慢。我建议您在 rsreportserver.config 中添加以下配置（如果您不知道位于 C:\Program Files\Microsoft SQL Server\MSRS10.MSSQLSERVER\Reporting Services\ReportServer\ 中）

如果要增加 SSRS 使用的最大内存：（即 7 GB）

```
<WorkingSetMaximum>7000000</WorkingSetMaximum> 
```

如果要提高第一次通话，可以设置（以分钟为单位）

```
<RecycleTime>4320</RecycleTime> 
```

实际上 SSRS 有一个重置（回收）时间来清理其缓冲区。默认情况下，它设置为 720 分钟（12 小时），这就是为什么如果您每天早上打开报告，它实际上加载速度非常慢。您可以根据需要将回收时间设置得更高（2-3 天）。我不建议使用更长的时间，因为缓冲区会填满并且您只会得到空白页，因此您必须手动重新启动 Reporting Services。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-26T12:26:14.423

它可能与 SQL Server 完全无关。试试看是否不是代码签名撤销列表检查问题，请参阅[修复由于代码签名验证导致的应用程序启动缓慢](http://rusanu.com/2009/07/24/fix-slow-application-startup-due-to-code-sign-validation/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-05-21T15:11:45.083

我将页面上的主查询和下拉控件转换为从存储过程加载，它在加载过程中产生了 5 秒的差异。避免使用任何内联查询。

# linker - 将 protobuf 库与代码链接（Google 协议缓冲区）

> ID：11207053
> 
> 赞同：7
> 
> 时间：2012-06-26T12:11:53.357
> 
> 标签：linker, protocol-buffers

尝试编译测试代码时出现链接错误。我在 Windows 7 上使用 cygwin。 ./configure、make、make test 和 make install 等初始步骤运行良好

我还可以使用 protoc 命令生成 .pb.cc 和 .pb.h。

但是当我尝试编译我的测试代码时，会出现很多链接错误。我确定这些错误是因为它无法链接到库。

Cygwin 在 /usr/local/lib 中有 protobuf 静态库和链接库。包含文件存在于 /usr/local/include

我尝试使用 -lprotobuf，但它返回错误说 -lprotobuf not found

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-26T12:14:48.130

很难说问题出在哪里，因为您既不包含 makefile 也不包含错误，但我的猜测是`/usr/local/lib`在查找库时该路径未包含在搜索路径中。

尝试添加`-L/usr/local/lib`之前`-lprotobuf`。

# c#-4.0 - Windows窗体应用程序中的后台工作线程问题

> ID：11207066
> 
> 赞同：3
> 
> 时间：2012-06-26T12:12:38.257
> 
> 标签：c#-4.0

我将报告从数据集导出到 execel 文件，我有很多报告，所以它占用了我很多时间，所以我尝试通过后台工作人员解决这个问题，因为我正在处理 windows 窗体应用程序，但是新问题来吧，当开始执行报告时，我的表单没有响应，我无法移动表单或单击停止按钮（停止应用程序）。

这是我的代码示例：

```
#region x Report 

PrimaryReportsThreads++;
ADIR_Parameters ADIR_Parms = ConfigManager.GetADIRParameters();
BackgroundWorker ADIR_worker = new BackgroundWorker();
AllThreads.Add(ADIR_worker);
ADIR_worker.DoWork += new DoWorkEventHandler(ADIR_worker_DoWork);
ADIR_worker.RunWorkerCompleted += new RunWorkerCompletedEventHandler(worker_RunWorkerCompleted);
ADIR_worker.RunWorkerAsync(ADIR_Parms);

#endregion 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T20:01:31.057

听起来像 COM 问题。可能您应该尝试使用[MTA，而不是 STA](https://stackoverflow.com/questions/127188/could-you-explain-sta-and-mta)

有用的链接：

[http://msdn.microsoft.com/en-us/library/ms809971.aspx](http://msdn.microsoft.com/en-us/library/ms809971.aspx)

[http://msdn.microsoft.com/en-us/library/system.threading.apartmentstate.aspx](http://msdn.microsoft.com/en-us/library/system.threading.apartmentstate.aspx)

# php - 什么是“原始 HTTP 标头”？“HTTP 标头”和“原始 HTTP 标头”有什么区别？

> ID：11207070
> 
> 赞同：7
> 
> 时间：2012-06-26T12:12:51.640
> 
> 标签：php, zend-framework, http-headers, httpresponse

在 Zend Framework 的响应类中，有两个不同的数组用于存储标头：`_headers[]`和`_headersRaw[]`. 并且有适当的方法来设置每一个：

`setHeader(), getHeaders(), clearHeader()`和

`setRawHeader(), getRawHeaders(), clearRawHeaders()`.

有“标题”和“原始标题”的原因是什么？这些标头中的每一个在实践中是否有某种特殊的用法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T12:26:25.230

使用 setHeader 你设置键值对而不用担心那里的格式，例如

```
$this->getResponse()->setHeader('Content-type','json'); 
```

而在 setRawHeader() 的情况下，您将整个/完整的标题放在正确的格式下

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-02T21:43:27.260

我来晚了一点...

Raw 表示标头不是 URL 编码的，而如果省略单词“raw”，则标头是编码的。例如：

```
$header = 'http://www.mywebsite.com?q=string'; // this is raw, no encoding

echo $header; // no encoding so output is -> http://www.mywebsite.com?q=mystring

echo rawurlencode($header); // URL-encoded so output is -> http%3A%2F%2Fwww.mywebsite.com%3Fq%3Dstring 
```

特殊字符：/？= 已被 URL 编码为

%3A %2F %3F %3D

分别。

# javascript - 在 DropdownLists 的 Selected 索引更改事件上使用 javascript 更改 Gridview 文本框的可见属性 true 不工作

> ID：11207074
> 
> 赞同：0
> 
> 时间：2012-06-26T12:13:05.247
> 
> 标签：javascript, asp.net

当用户更改 Dropdownlists selectedIndexchange 事件时，我正在使 Gridview 的文本框可见真或假，因为我已经完成了以下代码

我的 .CS 文件代码如下：

```
protected void gvTaskList_RowDataBound(object sender, GridViewRowEventArgs e)
    {
        try
        {
            if (e.Row.RowType == DataControlRowType.DataRow)
            {
                HiddenField hdn = (HiddenField)e.Row.FindControl("hdnStatus");
                DropDownList ddl = (DropDownList)e.Row.FindControl("ddlStatus");
                TextBox txt = (TextBox)e.Row.FindControl("txtVal");
                if (ddl != null)
                {
                    ddl.Items.Add("Not Started");
                    ddl.Items.Add("In Progress");
                    ddl.Items.Add("Complete");

                    if (hdn != null)
                    {
                        ddl.SelectedValue = hdn.Value;
                    }
                    //ddl.SelectedIndexChanged += new EventHandler(ddl_SelectedIndexChanged);
                    ddl.Attributes.Add("onChange", "return myFun(" + "'" + txt.ClientID + "'" +");");
                }
            }
        }
        catch (Exception ex)
        {
            Utility.ErrorList("EmpTaskList--RowdataBound", ex.ToString());
        }
    } 
```

注意：我的组合框和文本框都在 EditTmplate

Javascript代码如下

```
<script type="text/javascript">
function myFun(txtControl) {

    var v = document.getElementById("<%=" + txtControl + "%>");
    alert(v);
} 
```

当我调用更改下拉列表索引函数并且警报显示为空时。

那么有人可以建议我我做错了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T12:23:45.327

我认为您不希望在`getElementById`通话中使用服务器端标签：

```
var v = document.getElementById(txtControl); 
```

# php - 加密后的php脚本解密后如何运行返回的php脚本（开发一种保护php代码的加密/解密工具）

> ID：11207082
> 
> 赞同：0
> 
> 时间：2012-06-26T12:13:33.543
> 
> 标签：php, c, linux, encryption

我想保护我的网络服务器上的 php 代码。因此，我使用 C 开发了一个加密/解密应用程序。在如下所示的过程中，我成功加密了所有 php 文件：

php 源代码(php 文件) --> 编码器工具 --> 加密代码

然后，我开发了一个名为“MyDecrptionFunc”的 php 扩展，它获取一个加密代码并将其解密并返回解密。但我不知道如何运行返回的 php 脚本。我使用了如下代码的 eval 函数，它起作用了：

```
<?php eval(MyDecrptionFunc("Encrypted Code")); ?> 
```

但我不想使用 eval 函数。我希望 php 脚本在我调用 php 扩展时运行，如下面的代码：

```
<?php MyDecrptionFunc("Encrypted Code"); ?> 
```

所以，我认为我必须从用 c 编写的 php 扩展运行解密代码，但我不知道该怎么做。

PS：
我所有的开发都是在Linux环境中。
源 php 文件还包含 html、java 脚本和 css。
php脚本与数据库有关。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T12:19:47.933

您可能可以更改您的 http 服务器设置：替换 php 处理程序以调用您的解码器（或围绕它的脚本）。服务器将指定环境中的原始请求，因此被调用的脚本/解密应用程序通过 php 解释器通过管道将其解密并运行哪个 php 文件。您将执行的 php 文件的输出转发到 Web 服务器（通过其套接字）。

慢，但可能工作。

我在专有环境中从事软件业务 15 年的个人经验：加密 php 文件以保护知识产权是不必要的、烦人的且容易出错。不要这样做，你不会真正得到任何东西。

# ios - 如何将版权信息添加到 Nib 文件？

> ID：11207088
> 
> 赞同：6
> 
> 时间：2012-06-26T12:13:46.223
> 
> 标签：ios, xcode, xib, nib, copyright-display

我刚刚完成了对 Apple 的一个示例应用程序的完全重写 [1]，我将在 BSD 许可下将我的代码作为源代码仅发布在 GitHub 上。

将 BSD 许可证文本添加到 .h 和 .m 文件很容易，我可以将版权信息添加到我将包含的 .png 资产中，但我不知道如何将必要的许可证信息添加到 xib文件。XCode 会在编辑后重新生成文件，因此手动添加到 xml 注释的任何内容都将被删除。

为了完整起见，我想将许可证添加到 nib 文件中，但我并没有挂断 - 所以任何人都可以提供任何建议吗？

[1] 该应用程序是 AccelerometerGraph，重写包括在单独的图表上显示每个加速度计通道，提供额外的信号输入（正弦、步进和脉冲）以及额外的滤波器（巴特沃斯一阶和二阶低高和带通）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-26T13:29:23.340

我不认为您可以在`xib`级别上做任何事情，因为即使是 IB 检查员也没有任何您可以为此编辑的相关字段。一种解决方案可能是`NSObject`在您的`xib`（根级别）中添加一个，命名它`Copyright`（或其他）并在该`Notes`字段（身份检查器）中添加您的信息。

现在，如果不想在您的文件中添加新对象`xib`来保存此信息，您可以将您的版权声明添加到`File's Owner`注释字段中。无论哪种方式，信息都将包含在 xml 中。

**我知道**这有点骇人听闻，但这只是一个想法。如果有人能想出一个更合适的方法来实现这一点，我也很高兴知道。

![在此处输入图像描述](../Images/ee9b213afbf33d0f120aa7bb5c1384db.png)

# java - Java 执行 Linux 命令

> ID：11207096
> 
> 赞同：1
> 
> 时间：2012-06-26T12:14:18.450
> 
> 标签：java, linux

我想编写一个执行一些 Linux 命令的 java 代码：

```
String cmd = "cd /home/arps/FBI" ;

Process p=Runtime.getRuntime().exec(cmd);

String [] arr = new String [9] ;
 arr[0] = "cd /home/arps/FBI" ;
 for(int n = 1 ; n < 9 ; n++){
 String command = "mv" + "  " +  "/home/arps/FBI/hr" + n + ".txt" + "    " + "/home/arps/FBI/hrs" + n +".txt" ;
 arr[n] = command ;
}

 Process pp=Runtime.getRuntime().exec(arr); 
```

在上面的代码中：我尝试将名为 hr1, hr2 .... 的 8 个文件重命名为 hrs1 , hrs2 ... 等。在 cd 命令中，我尝试输入所需的目录。但是，我也使用了绝对路径。但是代码给出了错误：

```
java.io.IOException: Cannot run program "cd": java.io.IOException: error=2, No such file or directory

java.io.IOException: Cannot run program "mv  /home/arps/FBI/hr1.txt    /home/arps/FBI/hrs1.txt": java.io.IOException: error=2, No such file or directory 
```

任何人都可以帮助我为什么会发生这种情况，尽管我手动执行了这些命令手段`"mv /home/arps/FBI/hr1.txt /home/arps/FBI/hrs1.txt"`并正确执行？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-26T12:31:53.870

`cd`是当前 shell 的内置命令——你不能执行它——它是一个内置的 shell，因为 cwd 是一个进程级别的设置，所以一个新进程有它自己的值。[无法](https://stackoverflow.com/questions/840190/changing-the-current-working-directory-in-java)从 java 进程中更改 cwd 。

的[数组参数版本](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Runtime.html#exec%28java.lang.String%5B%5D%29)用于`exec`执行单个命令，您自己拆分参数，而不是执行多个命令。

因此，您要么需要提供完整路径，要么自己用 Java 实现副本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T12:37:40.833

将程序的最后一行从

```
Process pp=Runtime.getRuntime().exec(arr); 
```

到：

```
 for (String cmdLine: arr) {
    Process pp=Runtime.getRuntime().exec(cmdLine); 
```

根据[RunTime 文档](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Runtime.html#exec%28java.lang.String%29)，您将分别执行每一行。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-26T12:45:23.873

您最好编写一个 shell 脚本来满足您的需要并从 Java 中调用它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T12:31:35.400

arr 数组必须存储命令的参数。不是单独的命令。参考我的问题。 [从java运行shell命令](https://stackoverflow.com/questions/2460297/run-shell-command-from-java)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-26T12:45:14.277

如果`ls -l /home/arps/FBI/hrs1.txt`如您在评论中所说的那样没有输出任何内容，那么您尝试重命名的文件根本不存在，因此例外是正确的。

PS：恕我直言，这不是在 Java 中完成的。为此类事情使用脚本语言。更容易和更小的代码。对于每个问题，尝试使用正确的工具，而不是一个工具解决所有问题。

# c++ - 计算碰撞中两个正 方形的重叠

> ID：11207097
> 
> 赞同：0
> 
> 时间：2012-06-26T12:14:20.653
> 
> 标签：c++, collision, overlapping, surface

我正在尝试计算两个碰撞矩形的重叠区域。

我发现**分离轴定理**可以计算它们是否*发生*碰撞，但我不确定我可以用它来计算碰撞区域*吗*？

如果是，请告知我必须执行哪种计算？

基本上，我需要计算一张图片的隐藏部分的百分比（例如，矩形 A 是一张 256*256 的图片），并且另一张图片与它重叠，我想获得隐藏部分与全局相比的百分比图片的表面。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T13:16:03.243

检查边缘的交叉点。没有边缘相交（容易，100% 或 0% 重叠）或某些边缘重叠。在后一种情况下，您有偶数个交叉点（忽略边缘接触的点）。跟踪生成的凸重叠多边形并计算其面积。

# javascript - 如何创建一个新文件

> ID：11207099
> 
> 赞同：2
> 
> 时间：2012-06-26T12:14:22.793
> 
> 标签：javascript, android, html, cordova

PhoneGap - 如何在`assets/www/example/hallo.text` 我的错误中创建一个新文件是`"Error fileSystem"`

```
window.requestFileSystem = window.requestFileSystem || window.webkitRequestFileSystem;
window.requestFileSystem(LocalFileSystem.PERSISTENT, 0, gotFS, fail);

function fail() {
  confirm('Error  fileSystem');
}

function gotFS(fileSystem) {
  fileSystem.root.getFile("file:///android_asset/www/example/hallo.text", {
    create: true
  }, gotFileEntry, fail);
}

function gotFileEntry(fileEntry) {
  fileEntry.createWriter(gotFileWriter, fail);
}

function gotFileWriter(writer) {
  writer.write("hallo");
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T12:34:23.193

HTML 文件系统 API 在沙盒文件系统中运行。您不能参考完整文件系统的绝对路径；相反，您的 Web 应用程序的所有文件系统都存在于设备真实火力系统内的浏览器生成的子目录中。

出于安全原因，这是故意这样做的，因此 Web 应用程序只能覆盖或读取它们创建的文件。否则，Web 上的任何页面都可能读取整个硬盘驱动器的所有私有内容。

您应该使用不合格的文件路径`www/example/hallo.text`（假设这些目录存在），或者只是`hallo.text`在沙盒文件系统中创建文件。不要使用绝对`file:`路径。

此外，您的错误函数 ,`fail`可能提供了带有错误信息的参数。尝试向函数添加一个参数，`function fail(error) ...`并打印出`error`更多调试信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T12:35:40.983

首先，确保“您”有权在目标文件夹中写入（您的设备可能需要具有 root 权限才能在某些文件夹中写入）。

之后，按照此处的说明进行操作：[http ://www.anddev.org/working_with_files-t115.html](http://www.anddev.org/working_with_files-t115.html)

# android - Android：制作原生视频播放器时应该使用什么？

> ID：11207101
> 
> 赞同：2
> 
> 时间：2012-06-26T12:14:29.140
> 
> 标签：android, c++, video, android-ndk, ffmpeg

目前我正在研究一个原生视频播放器项目，最初我尝试使用 ffmpeg 作为解码器并将字节返回给 java，然后我使用 View::onDraw 和 Canvas 来显示帧。不幸的是，这种方法的性能不好，所以我想知道除了传递给java之外，是否还有其他方法可以用来显示帧？

另外，除了显示帧之外，如何使用 C/C++ 和 NDK 播放声音？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T08:09:40.423

您可以使用 ffmpeg [http://ffmpeg.org](http://ffmpeg.org)和/或 libtheora [http://www.theora.org](http://www.theora.org)来解码视频帧。然后只需使用渲染到纹理通过 OpenGL ES 2 显示结果。有关详细信息，请参阅[http://www.gamedev.net/topic/570295-opengl-and-xvidtheoraanything](http://www.gamedev.net/topic/570295-opengl-and-xvidtheoraanything)。

对于音频，您可以使用 OpenAL。这是 Android 端口： http: [//pielot.org/2010/12/14/openal-on-android](http://pielot.org/2010/12/14/openal-on-android)

# bash - 在bash中将一行拆分为单词

> ID：11207102
> 
> 赞同：5
> 
> 时间：2012-06-26T12:14:32.930
> 
> 标签：bash

我想把一行分成单词。我知道这可以用这个来完成

```
For word in $line; do echo $word; done 
```

但我想组 3-3 个单词。所以我的问题是，如何将一行分成 3-3 个单词？

例如

```
Input : I am writing this line for testing the code.  

Output :  
I am writing
this line for
testing the code. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T14:37:10.553

一次读三个单词。将要读取的行设置为余数：

```
while read -r remainder
do
    while [[ -n $remainder ]]
    do
        read -r a b c remainder <<< "$remainder"
        echo "$a $b $c"
    done
done < inputfile 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-26T13:04:18.970

粘贴命令呢

```
for word in $line; do echo $word; done | paste - - -
for word in $line; do echo $word; done | paste -d" " - - - 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T14:28:42.683

简单的正则表达式练习。

```
sed -e "s/\([^\ ]*\ [^\ ]*\ [^\ ]*\)\ /\1\\`echo -e '\n\r'`/g" 
```

唯一棘手的部分是在 sed 中获取新行，因为没有标准。

```
$ echo "I am writing this line for testing the code."|sed -e "s/\([^\ ]*\ [^\ ]*\ [^\ ]*\)\ /\1\\`echo -e '\n\r'`/g"
I am writing
this line for
testing the code. 
```

别客气。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-26T15:58:49.797

只需使用`set`将您的输入设置为位置参数，并以三个为一组进行处理。这样你就不需要任何花哨或特定于 bash 的东西：

```
line="I am writing this line for testing the code."

set junk $line
shift
while [ $# -ge 3 ]; do
  echo "Three words: $1 $2 $3"
  shift 3
done 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-26T12:42:04.607

有一个非通用的直接解决方案：

```
#!/bin/bash
path_to_file=$1
while read line
do
counter=1;
    for word in $line
    do
        echo -n $word" ";
    if (($counter % 3 == 0))
      then
        echo "";
    fi
    let counter=counter+1;
    done
done < ${path_to_file} 
```

将其保存在脚本中，为其命名（例如 test.sh）并将其设置为执行模式。如果您的文本保存在“myfile.txt”中，则像这样调用它：

```
test.sh myfile.txt 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-26T12:47:37.943

作为开始，您可以使用它，它将每个单词读入一个数组

```
#!/bin/bash

total=0
while read
do
    for word in $REPLY
    do
        A[$total]=$word
        total=$(($total+1))
    done
done < input.txt

for i in "${A[@]}"
do
    echo $i
done 
```

下一步是使用`seq`或类似的方法循环遍历数组并以三个为一组进行打印。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-26T12:48:08.597

这是可能解决方案的示例。

```
#!/bin/bash

line="I am writing this line for testing the code."

i=0
for word in $line; do
    ((++i))
    if [[ $i -eq 3 ]]; then
        i=0
        echo "$word"
    else
        echo -ne "$word "
    fi
done 
```

# php - 如何将foreach用于数组

> ID：11207106
> 
> 赞同：1
> 
> 时间：2012-06-26T12:14:43.903
> 
> 标签：php, arrays, foreach

我正在尝试显示“名称”对象，但它不起作用。我似乎在使用 foreach 错误..我 print_r for $a 它显示了数组。有人可以帮忙吗。

```
public function product(){
        $st = $this->db->prepare("select id, name, description, price from deals where quantity > 0 order by id desc");
        $st->execute();

        if ($st->rowCount() == 0){
            echo "There are no products to display";
        } else {
            $a = $st->fetch(PDO::FETCH_OBJ)

            foreach ($a as $products){
                echo $products->name;
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T12:16:15.367

我不认为你需要一个 foreach 循环来完成你正在做的事情。

```
while( $products = $st->fetch(PDO::FETCH_OBJ) )
{
    echo $products->name;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T12:19:35.590

fetch() 只返回一行。您的 foreach 正在遍历 fetch() 返回的对象的所有属性，即列名。

# java - 在另一个 TimeZone 中解析格式化的日期字符串到日期对象不起作用

> ID：11207110
> 
> 赞同：3
> 
> 时间：2012-06-26T12:14:50.320
> 
> 标签：java, timezone

我正在尝试将格式化的日期字符串转换为日期对象。日期字符串被格式化为其他时区。

当我这样做时`sdf.parse(String)`，它会返回我的系统日期对象。

代码如下，

```
static Date convertGMTTime(String timeZone, long longDate){
    Date convertedTime = null;
    SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");

    try{
        Date date = new Date(longDate);
        System.out.println("timezone: "+timeZone +", timestamp: "+date);
        Locale locale = Locale.ENGLISH;
        TimeZone destTimeZone = TimeZone.getTimeZone(timeZone);// TimeZone.getDefault();
        System.out.println("Source timezone: "+destTimeZone);
/*          DateFormat formatter = DateFormat.getDateTimeInstance(
                    DateFormat.DEFAULT,
                    DateFormat.DEFAULT,
                    locale);
        formatter.setTimeZone(destTimeZone);*/
        sdf.setTimeZone(destTimeZone);
        String convertedDateStr = sdf.format(date);
        System.out.println("convertedDateStr: "+convertedDateStr);
        convertedTime = sdf.parse(convertedDateStr);
        System.out.println("convertedTime: "+convertedTime + "sdf: "+sdf.getTimeZone());
    }catch(Exception e){
        e.printStackTrace();
    }
    return convertedTime;
} 
```

如果有人能提供帮助并指出我哪里出错了，我将不胜感激。提前致谢。

输出：

> 时区：大西洋/佛得角，时间戳：2012 年 6 月 26 日星期二 17:38:11 IST
> 源时区：sun.util.calendar.ZoneInfo[id="Atlantic/Cape_Verde",offset=-3600000,dstSavings=0,useDaylight=false,过渡=6,lastRule=null]
> 
> 转换日期：2012-06-26 11:08:11
> 
> 转换时间：星期二 6 月 26 日 17:38:11 IST 2012
> sdf:sun.util.calendar.ZoneInfo[id="Atlantic/Cape_Verde",offset=-3600000,dstSavings=0,useDaylight=false,transitions=6,lastRule=null ]

* * *

分享更多细节，当我使用另一个 sdf 对象（没有为其设置时区）时，它确实返回了正确的时间和日期，但时区仍然是从系统时钟中选择的

代码

```
static Date convertGMTTime(String timeZone, long longDate){
    Date convertedTime = null;
    SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
    SimpleDateFormat sdfParse = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
    try{
        Date date = new Date(longDate);
        TimeZone destTimeZone = TimeZone.getTimeZone(timeZone);// TimeZone.getDefault();
        System.out.println("Source timezone: "+destTimeZone);
        sdf.setTimeZone(destTimeZone);
        String convertedDateStr = sdf.format(date);
        System.out.println("convertedDateStr: "+convertedDateStr );
        convertedTime = sdfParse.parse(convertedDateStr,new ParsePosition(0));
        System.out.println("convertedTime: "+convertedTime + "sdf: "+sdf.getTimeZone());
    }catch(Exception e){
        e.printStackTrace();
    }
    return convertedTime;
} 
```

输出

```
Source timezone: sun.util.calendar.ZoneInfo[id="Atlantic/Cape_Verde",offset=-3600000,dstSavings=0,useDaylight=false,transitions=6,lastRule=null]

convertedDateStr: 2012-06-26 12:24:56

convertedTime: Tue Jun 26 12:24:56 IST 2012 

sdf: sun.util.calendar.ZoneInfo[id="Atlantic/Cape_Verde",offset=-3600000,dstSavings=0,useDaylight=false,transitions=6,lastRule=null] 
```

我知道当我不将时区分配给 sdf 时，它需要系统时区，但为什么它不显示系统时区的时间？我在时区中显示它，就像在字符串中一样，但时区不同。

Ans 当我设置时区时，它会根据我的系统时间返回日期对象，而不管 sdf 是否设置了其他时区。

谁能解释一下 sdf.parse 和 sdf.format 的功能行为。

对我来说，sdf.setTimeZone() 在我们使用格式时确实会产生影响，而当我们使用 sdf.parse() 时它会失效。我觉得很奇怪。

感谢在这方面的帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-26T12:39:41.157

您已经有一个日期（或日期的毫秒数），所以没有什么要转换的。日期没有任何时区。这是一个普遍的瞬间。仅当您**显示**此日期时，时区才相关，因为日期 65647678000 在某些时区可能是 12:38，但在某些其他时区可能是 10:38。当您**解析**日期的字符串表示时，它也很重要，因为 10:38 在某些时区是 65647678000，但在其他时区是 65657678000。

虽然您不显示 Date 对象或将 String 解析为 Date，但您不需要关心时区。并选择显示/解析时使用的时区，设置时区`DateFormat`，然后使用`DateFormat.format()`/`DateFormat.parse()`格式化/解析日期。

当您用于`Date.toString()`显示日期时，它将始终使用您当前的时区。

我发现不将日期视为一天、一个月、一年、一个小时等，而是将其视为一个时刻，更容易理解我的意思：“当肯尼迪被枪杀时”。“当肯尼迪被枪杀时”对每个人来说都是同一个时刻。但是，如果您在达拉斯时区代表“肯尼迪被枪杀”的时刻，则与在巴黎时区代表同一时刻时得到的结果不同。

# java - 使用 JAVA 进行图像细化

> ID：11207116
> 
> 赞同：2
> 
> 时间：2012-06-26T12:15:13.023
> 
> 标签：java, image-processing

我在java中编写了一些代码将彩色图像转换为黑白图像，然后尝试对该灰度图像执行细化。黑白转换成功完成，但图像细化仍然没有给出正确的输出。请帮助我解决我的问题。我的代码如下：

```
//colored image to black and white conversion; black and white image to thinned image.

public static void main(String[] args) 
{
    try
    {
        //colored image path
        BufferedImage colored_image = ImageIO.read(new File("D:\\logo.jpg"));
        //getting width and height of image
        double image_width = colored_image.getWidth();
        double image_height = colored_image.getHeight();
        BufferedImage img = colored_image;

        //drawing a new image
        BufferedImage bimg = new BufferedImage((int)image_width, (int)image_height, BufferedImage.TYPE_BYTE_GRAY);
        Graphics2D gg = bimg.createGraphics();
        gg.drawImage(img, 0, 0, img.getWidth(null), img.getHeight(null), null);

        //saving black and white image onto drive
        String temp = "logo in blackAndwhite.jpeg";
        File fi = new File("D:\\" + temp);
        ImageIO.write(bimg, "jpg", fi);

        //thinning by resizing gray scale image to desired eight and width
        BufferedImage bimg2 = new BufferedImage((int)image_width, (int)image_height, BufferedImage.TYPE_INT_ARGB);
        Graphics2D g2 = bimg2.createGraphics();

        // Perform your drawing here
        g2.setColor(Color.BLACK);
        g2.drawLine(0, 0, 200, 200);

       //saving thinned image onto drive
       String temp2 = "logo thinned.jpeg";
       File fi2 = new File("D:\\" + temp2);
       ImageIO.write(bimg2, "jpg", fi2);
       //g2.dispose();
    }
    catch (Exception e)
    {
        System.out.println(e);
    }       
 } 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T12:23:05.823

检查 java.awt.geom.AffineTransform

```
AffineTransform tx = new AffineTransform();
tx.scale(20, 30);
AffineTransformOp afop = new AffineTransformOp(tx,
   AffineTransformOp.TYPE_BILINEAR);
BufferedImage bi = afop.filter(ogininal, null);
Icon icon = new ImageIcon(bi);  //here icon will be your thumbnail image 
```

# delphi - 为 tComboBox 重置 PasswordChar 失败

> ID：11207117
> 
> 赞同：2
> 
> 时间：2012-06-26T12:15:13.097
> 
> 标签：delphi

我的用户在组合框中输入密码，所以我想显示`*`用户键入的内容。到目前为止没有问题。下面显示的例程完美运行。但是，我也想让用户选择显示密码。当我使用 SetPasswordChar=false 调用下面的例程时，它会发送参数为零的 EM_SETTPASSWORDCHAR。我希望组合框显示用户输入的文本。但它仍然显示`*`。知道我错过了什么吗？

```
//==============================================================================
// SetComboBoxPasswordChar
//------------------------------------------------------------------------------
// Set the Password Char for a tComboBox.
//
// This is done using by sending an EM_SETPASSWORDCHAR message to the edit box
// sub-control of the combo box.
//
//http://msdn.microsoft.com/en-us/library/windows/desktop/bb761653(v=vs.85).aspx
//
// wParam - The character to be displayed in place of the characters typed by
// the user. If this parameter is zero, the control removes the current password
// character and displays the characters typed by the user.
//==============================================================================

procedure SetComboBoxPasswordChar
            ( const nComboBox        : tComboBox;
              const nSetPasswordChar : boolean    );
var
  C : integer;
  H : tHandle;
begin

  // Get handle of the combo box

  H := nComboBox . Handle;

  // Get handle of the edit-box portion of the combo box

  H := GetWindow ( H, GW_CHILD );

  // If nSetPasswordChar is true,
  // set password char to asterisk
  // Otherwise, clear the password char

  if nSetPasswordChar then
    C := ord('*')
  else
    C := 0;

  SendMessage ( H, EM_SETPASSWORDCHAR, C, 0 );
end; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T14:27:52.753

我怀疑（并且刚刚通过 XE2 中的快速测试应用程序确认）这是因为您只是假设编辑控件 `HWND`是由`GetWindow(H, GW_CHILD);`. :-) 该`COMBOBOX`控件实际上由三个`HWND`值组成：一个用于整个控件，一个用于编辑部分，一个用于下拉列表。

获取所需句柄的更正确方法是使用[GetComboBoxInfo](http://msdn.microsoft.com/en-us/library/windows/desktop/bb775939%28v=vs.85%29.aspx)并使用[COMBOBOXINFO](http://msdn.microsoft.com/en-us/library/windows/desktop/bb775798%28v=vs.85%29.aspx)`hwndItem`结构的成员：

```
var
  CBI: TComboBoxInfo;
begin
  // ..... Other code
  CBI.cbSize := SizeOf(CBI);
  H := nComboBox.Handle;
  if GetComboBoxInfo(H, CBI) then
    SendMessage(cbi.hwndItem, EM_SETPASSWORDCHAR, C, 0);
end; 
```

为了快速、简单地说明它的工作原理，将 a`TComboBox`放在一个新的空白表单上，为事件处理程序添加一个事件处理`ComboBox1.OnDblClick`程序，然后将以下代码添加到您的表单中：

```
const
  PasswordChars: array[Boolean] of Integer = (0, Ord('*'));
var
  Ch: Integer = 0;
  UsePWdChar: Boolean = False;

procedure TForm1.ComboBox1DblClick(Sender: TObject);
var
  Ch: Integer;
  CBI: TComboBoxInfo;
begin
  CBI.cbSize := SizeOf(CBI);
  UsePwdChar := not UsePwdChar;
  Ch := PasswordChars[UsePwdChar];
  if GetComboBoxInfo(ComboBox1.Handle, CBI) then
    SendMessage(cbi.hwndItem, EM_SETPASSWORDCHAR, Ch, 0)
end; 
```

`ComboBox1`这将使用编辑控件中的默认值，并在每次双击组合框时`ComboBox`在密码字符和无密码字符之间来回切换。`*`

# java - 尝试从手机获取 KML 节点值时获取空值，但不是在具有 android 的模拟器上

> ID：11207118
> 
> 赞同：0
> 
> 时间：2012-06-26T12:15:18.817
> 
> 标签：java, android

我目前正在设计一个需要在 MapView 上绘制路线的应用程序。为了使其正常运行，我需要从我获得的 KML 文档中获取数据：

[http://maps.google.com/maps?f=d&hl=en&saddr=-33.882993,18.63486&daddr=-33.870162,18.657837&ie=UTF8&0&om=0&output=kml](http://maps.google.com/maps?f=d&hl=en&saddr=-33.882993,18.63486&daddr=-33.870162,18.657837&ie=UTF8&0&om=0&output=kml)

我创建了一个测试项目以确保正确接收此数据。问题是它可以在我的模拟器上完美运行，但不能在实际的安卓手机上运行。

以下代码在单击按钮时启动一个线程，获取输入流响应 (KML)。

```
public void onClick(View v) {
        if (v.getId()== R.id.btn1)
        {   
              new Thread() {
                 @Override
                 public void run() {
                    String url = "http://maps.google.com/maps?f=d&hl=en&saddr=-33.882993,18.63486&daddr=-33.870162,18.657837&ie=UTF8&0&om=0&output=kml";
                    InputStream is = getConnection(url);

                    mRoad = RouteProvider.getRoute(is);
                    mHandler.sendEmptyMessage(0);
                 }
             }.start(); 
        }   

}

private InputStream getConnection(String url) {
    InputStream is = null;
    try {
           HttpURLConnection conn = (HttpURLConnection)new URL(url).openConnection();
            conn.connect();
            is = conn.getInputStream();
            conn = null;
    } catch (MalformedURLException e) {
            e.printStackTrace();
    } catch (IOException e) {
            e.printStackTrace();
    }
     return is;
    } 
```

目前，getRoute() 需要做的就是提供 KML 文档中“LineString”元素的内容。这些内容是可用于绘制路线的坐标列表。

```
public class RouteProvider {
    /** Gets data from KML response **/
    public static Road getRoute(InputStream is) {
        Road road = new Road();

        try 
        {
            Document xmlDoc = DocumentBuilderFactory.newInstance().newDocumentBuilder().parse(is);
            NodeList a = xmlDoc.getElementsByTagName("LineString");
            System.out.println(a.item(0).getTextContent());
            road.mName = a.item(0).getTextContent();

        } catch (SAXException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        } catch (ParserConfigurationException e) {
            e.printStackTrace();
        }   

        return road;
      } 
```

在我正在运行的模拟器上，road.mName 中显示了正确的值，这是一个坐标列表。在Android手机上它显示为null？

我正在为 Eclipse 上的 Android 2.3.3 构建，我使用三星 Galaxy S2 进行测试。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T09:20:28.373

毕竟不需要使用KML。只是使用谷歌地图来提供 xml 格式。容易得多。 [https://developers.google.com/maps/documentation/directions/](https://developers.google.com/maps/documentation/directions/)

# objective-c - 用鼠标绘制OpenGL

> ID：11207119
> 
> 赞同：0
> 
> 时间：2012-06-26T12:15:19.223
> 
> 标签：objective-c, xcode, cocoa, opengl

如果我尝试使用加载的纹理来纹理绘制线

```
glLineWidth(10);
glEnable(GL_TEXTURE_2D);
glEnable(GL_BLEND);
glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);
glBindTexture(GL_TEXTURE_2D, brushTextura);
glEnable(GL_LINE_SMOOTH);
glBegin(GL_LINES);
glVertex2f(location.x, location.y);
glVertex2f(prevLocation.x, prevLocation.y);
glEnd();
glFlush();
glDisable(GL_LINE_SMOOTH);
glDisable(GL_BLEND);
glDisable(GL_TEXTURE_2D); 
```

它什么也没画。当我使用相同的代码，但绘制的不是 GL_LINES，而是 GL_POINTS 时，一切正常。[图片链接在这里](http://s16.postimage.org/sdbzgpzir/Screen_Shot_2012_06_26_at_3_10_35_PM.png)。

如果我在这里不使用纹理并使用 GL_LINES，它会按应有的方式绘制线条，但看起来不太好。[图片链接在这里](http://s16.postimage.org/fkja31yj7/Screen_Shot_2012_06_26_at_3_01_50_PM.png)。任何绘制漂亮、平滑纹理线条的解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T12:31:24.890

一条线不会“神奇地”将纹理用作沿着线的路径应用的一种刷子。您实际上必须提供一些纹理坐标，但这些坐标只会从纹理中取出切片，而不是将其用作“画笔”。

如果点对您有用，则仅在启用点精灵的情况下，因为一个点将仅对单个纹理像素进行采样并将其分布在其整个区域上。

老实说，我认为你的整个尝试都是有缺陷的。通常在使用刷子进行绘制时，您会将其绘制为在规则的小距离上的大量纹理四边形。

# iphone - 文档目录中损坏的图像

> ID：11207121
> 
> 赞同：0
> 
> 时间：2012-06-26T12:15:24.683
> 
> 标签：iphone, directory, document

我正在从服务器获取图像的 URL，并使用以下方法将此图像转换为 png 格式： NSData *data1 = [NSData dataWithData:UIImagePNGRepresentation(img)]; [data1 writeToFile:pngFilePath atomically:YES];

但是当我在模拟器上完成该过程后检查它们时，某些图像已损坏。因此，这些图像不会在需要的地方显示在应用程序上。

请参阅附件图像，因为某些图像已损坏。

![在此处输入图像描述](../Images/8b9c8be10e2821d0212bd9804af23752.png)

**更新**

我正在循环中调用一个方法，该方法从服务器并行获取图像并 didFinishLoading 我正在执行此操作： UIImage *img = [UIImage imageWithData:self.data];

```
NSArray *split = [self.strImageName componentsSeparatedByString:@"/"];

int arrCount=[split count];
NSString *imageName=[split objectAtIndex:arrCount-1];

NSString *docDirec = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];

NSString *pngFilePath=nil
pngFilePath = [NSString stringWithFormat:@"%@/Thumbs/%@",docDirec,imageName];

NSData *data1 = [NSData dataWithData:UIImagePNGRepresentation(img)];
[data1 writeToFile:pngFilePath atomically:YES];

[self.data release]; //don't need this any more, its in the UIImageView now
self.data=nil; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T12:51:47.603

我有类似的问题，我使用下面的代码解决了它

```
- (void)viewWillDisappear:(BOOL)animated
{

    if  (self.m_objWebManager != nil)//Webmanager is class for downloading the images as a background thread
    {
        [self.m_objWebManager cancelCommunication];

        [self.m_objWebManager release];

        self.m_objWebManager = nil;
    }

} 
```

# qt - 如何绘制我的opengl背景以保持良好的性能？

> ID：11207123
> 
> 赞同：1
> 
> 时间：2012-06-26T12:15:34.240
> 
> 标签：qt, opengl, background

我每帧都画我的背景：

```
void Window::paintGL()
{
    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);
    glLoadIdentity();
    glEnable(GL_BLEND);
    glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);

    backgrd->Draw();

    texture = text->loadTexture(text->amis_path.toStdString(),text->w,text->h);
    amis->Draw();

    texture = text->loadTexture(text->enemis_path.toStdString(),text->w,text->h);
    for (int i = 0; i<liste_enemis.length(); i++){
        liste_enemis[i]->Draw();
    }

    for (int i = 0; i<liste_missiles.length(); i++){
        liste_missiles[i]->Draw();
    }
    swapBuffers();
} 
```

但是当我运行游戏时，fps 非常糟糕（1fps）。

编辑 ：

好吧，我试图一次将我的背景加载到纹理中，但它不起作用：

```
Background::Background(int w, int h)
{
    width = w;
    height = h;
    glGenTextures(1, &texture);
    glBindTexture(GL_TEXTURE_2D, texture);
    glTexParameteri(GL_TEXTURE_2D,GL_TEXTURE_MAG_FILTER,GL_NEAREST);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_NEAREST);
    glTexImage2D(GL_TEXTURE_2D,0, GL_RGBA, back.width(), back.height(), 0,
    GL_RGBA, GL_UNSIGNED_BYTE, back.bits());
    glTexEnvf(GL_TEXTURE_ENV, GL_TEXTURE_ENV_MODE, GL_MODULATE);
}

void Background::Draw(){
    glEnable(GL_TEXTURE_2D);
    glBindTexture(GL_TEXTURE_2D,texture);
    glPushMatrix();
    glTranslatef(width/2, height/2, 0.0f);
    glBegin(GL_QUADS);
    glTexCoord2d(0,0); glVertex3f(-width/2, -height/2, 0.0f);
    glTexCoord2d(0,1); glVertex3f(-width/2, height/2, 0.0f);
    glTexCoord2d(1,1); glVertex3f(width/2, height/2, 0.0f);
    glTexCoord2d(1,0); glVertex3d(width/2, -height/2, 0.0f);
    glEnd();
    glPopMatrix();
} 
```

构造函数使用 glTexImage2D(...) 加载背景并将其链接到“纹理”变量。然后在我的paintGL() 函数中，我调用Background::Draw() 函数。

但是当我运行游戏时，没有背景。

如果我将 glTexParameteri(...) 和 glTexImage2D(...) 函数从构造函数移动到 Draw 函数，它就可以工作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T12:43:35.357

您正在重新加载每一帧的纹理，这就是导致您的性能的原因（它也会立即消耗您的内存）。

Instead of reloading the texture every frame, load them only once, and then switch between textures using `glBindTexture`

# asp.net-mvc-3 - 如何生成动作链接标题？

> ID：11207126
> 
> 赞同：-1
> 
> 时间：2012-06-26T12:15:38.453
> 
> 标签：asp.net-mvc-3, actionlink

我是 mvc3 的新手。我通过 mvc3 创建了一个 Web 项目。在我的客户模型的索引页面上，我添加了以下生成结果的代码，如下所示 -

![在此处输入图像描述](../Images/efed78e82139789de048b2b906ccdde2.png)

```
<span class="callSapn">@if (item.Calls.Count != 0)
{
@Html.Label("Calls(");
@Html.DisplayFor(modelItem => item.Calls.Count);
@Html.Label(")");
}</span> 
```

**我想将 Html.ActionLink 赋予整个 span**，这意味着 span 生成的结果将是 Actionlink 的标题。

这个怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T12:23:10.870

如果你想让 span 元素变成可点击的超链接，你可以试试这个

```
<a href="@Url.Action("YourActionName")" >
  <span class="callSapn">Your span content goes here</span>
</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T12:18:44.170

```
@Html.ActionLink(string.Format("Calls({0})", item.Calls.Count), "action_name") 
```

如果动作在当前控制器中。否则所有其他重载都接受链接文本：http: [//msdn.microsoft.com/en-us/library/dd505040](http://msdn.microsoft.com/en-us/library/dd505040)

# javascript - jQuery更改元素属性并返回编辑的Html Source？

> ID：11207128
> 
> 赞同：2
> 
> 时间：2012-06-26T12:15:40.640
> 
> 标签：javascript, jquery, html, dom

实际上我正在做的是找到`<img>`图像标签并获取其`src`属性来更改它们。

我已经到了这一点，但问题更多是：要取回`edited`html 源代码（放入数据库中。）

说得更简洁明了，我要抓取一些`Dynamic Html Containers`，然后更改图像路径并将整个源块保存回来。

举个简单的例子，如果我在里面搜索`$(div.container).html()`：

```
<div class="container">
    <..> .. </..>
    <..>
        <img src="images/apple.jpg" />
        <..>
            <img src="images/banana.jpg" />
        </..>
    </..>
</div> 
```

*   首先，假设`<..>`代表任何以前不可知的 html 标签。

然后我会得到：

```
var dom_contents = $("div.container").html(); 
```

*   现在我`html source`在目标容器中得到了原件`<div>`
*   然后让我们说我需要为它的文件夹更改`<img src`每个`sample/`。然后它将是`fruits/apple.jpg`和`fruits/banana.jpg`..等。

我仍然得到一些东西，比如：

```
$("div.container).each(function() {
    var arr = $(this).find("img");
    for (var i=0; i<arr.length; i++) {
        var img_src = $(arr[i]).attr("src");
        /*
         * I NEED TO CHANGE THE IMAGE SRC HERE
         */
    }
}); 
```

*   ** 最后，我需要将**整个编辑的 html 源代码**保存到数据库中。**

    *   那么我该如何改变`<img src=''`..和
    *   我如何`whole edited html source`从 jQuery 中得到这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T12:20:58.353

如下修改每个图像的源属性。你不需要写回html。源 html 将被更新：

```
$("div.container").each(function() {
    $(this).find("img").each(function() {
        $(this).attr("src", "/image/url/file.png");
    });
}); 
```

要获取容器的 html 源代码，请使用以下命令：

```
$("div.container").html(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T12:21:45.037

这将设置属性：

```
$(arr[i]).attr("src", mynewsrcvalue); 
```

完成后，只需在 AJAX 请求中发送`innerHTML`(or ) 即可。`.html()`但是如果你想把这些东西放在数据库中，为什么不首先在服务器端操作源呢？

# mongodb - 在mongodb中保存大字符串

> ID：11207129
> 
> 赞同：1
> 
> 时间：2012-06-26T12:15:41.860
> 
> 标签：mongodb

我开始使用 mongodb 进行数据存储。在 mysql 中，我使用 mysql 保存了一个 300KB 大小的字符串

```
COMPRESS(value) 
```

节省磁盘空间的功能。

mongodb 中是否有等价物？

我使用python，但我认为这并不重要。

另外我不想使用编程语言的任何压缩（即

```
zlib.compress(value) 
```

在蟒蛇）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T12:19:57.590

[JIRA](http://jira.mongodb.org)中有几张关于此的票，但它们都未分配且未解决。这意味着（目前）您必须在应用程序中执行此操作。

# c# - 在树状结构数据检索方面需要帮助

> ID：11207132
> 
> 赞同：0
> 
> 时间：2012-06-26T12:15:59.020
> 
> 标签：c#, .net, algorithm

我有一个 HierarchyNode 类型的“高级对象”，它将具有相同类型 HierarchyNode 的子节点（每个子节点可能有它们的子节点）。

我应该从“上级对象”中读取所需父节点的子节点。所以我的代码如下（调用者——superiorObject.IdentifySubNodeOfRequestedNode(...)）。但是在 foreach 循环中 stopRecursiveCall 是错误的，即使 if 循环被执行并且也不是所有的代码返回值异常。如何解决这个问题并返回子节点，或者还有其他更好的解决方案吗？谢谢

```
public List<HierarchyNode> IdentifySubNodeOfRequestedNode(int reqstedId, Boolean stopRecursiveCall)
{
    if (this.UserId == reqstedId)
    {
        stopRecursiveCall = true;
        return this.ChildNodes;
    }

    foreach (HierarchyNode childNode in this.ChildNodes)
    {
         childNode.IdentifySubNodeOfRequestedNode(reqstedId, stopRecursiveCall);
         if (stopRecursiveCall)
             break;
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T12:23:47.773

不需要布尔

```
public class HierarchyNode
{
    private decimal UserId;
    private List<HierarchyNode> ChildNodes;

    public List<HierarchyNode> IdentifySubNodeOfRequestedNode(int reqstedId)
    {
        if (this.UserId == reqstedId)
        {
            return this.ChildNodes;
        }

        return this.ChildNodes.
            Select(childNode => childNode.IdentifySubNodeOfRequestedNode(reqstedId)).
            FirstOrDefault(children => children != null);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T12:22:49.113

您的算法有几个源于潜在主要问题的缺陷：您试图将算法的主要目的（查找并返回某些内容）和临时优化（一旦找到该内容就停止循环）分开。

在伪代码中，您的算法应该做的是：

```
find(id):
  if (this.id == id):
    return this.children
  foreach (child in this.children): 
    found = child.find(id)
    if (found != null): 
      return found
  return null 
```

这将查找值的行为和停止递归的行为联系在一起（返回值时递归停止）。

# android - Android Jsoup html到字符串？

> ID：11207134
> 
> 赞同：1
> 
> 时间：2012-06-26T12:16:06.750
> 
> 标签：android, html, jsoup

我是 Jsoup Html 到字符串解析器的新手。

我正在使用这个 html 链接[点击](http://www.ndtv.com/article/india/pranab-mukherjee-resigns-as-finance-minister-pm-to-take-additional-charge-says-sources-236331)

我想获得图像和故事内容和标题。

如果你知道 Jsoup 请在这里回答。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T23:29:32.687

试试这个文本

```
Element images = doc.select("div#storycontent"); 
```

在那之后：

```
System.out.println("imaString "+images.text()); 
```

对于图像，您需要在“doc”中找到“img”标签以获取 URL。

# android - 从 android 应用程序连接到 IIS 上的 ASP.NET 页面时出现错误请求

> ID：11207135
> 
> 赞同：0
> 
> 时间：2012-06-26T12:16:08.483
> 
> 标签：android, asp.net, iis, httpconnection

我有一个 ASP.NET 网站部署到 IIS，其中有几个 ashx 返回 JSON 以供 Android 应用程序使用。我已经使用基本身份验证实现了身份验证逻辑。

问题：从 Android 访问时，服务器响应是 400 Bad request。httperr 日志文件显示“400 - 主机名 -”。

*   当我从 Android 模拟器在 localhost 上试用它时它可以工作
*   它在从浏览器访问服务器上的 ashx 文件时有效
*   它在 Fiddler 中复制调用时有效

（如果我将 Fiddler 与 Android 模拟器一起使用，则响应将为 -1（并在 Fiddler 中查看发送的原始数据，它似乎从 url 中丢失了主机） - 但这是另一个问题，所以不要纠缠于此，我只是想我会提到它......）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T07:56:51.947

原来我的问题（和解决方案）与此线程中的相同：

[在 android 上具有授权的 HTTP POST 请求](https://stackoverflow.com/questions/5092561/http-post-request-with-authorization-on-android)

# ruby-on-rails - rails 3.1 select_tag 用法

> ID：11207136
> 
> 赞同：0
> 
> 时间：2012-06-26T12:16:13.700
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3.1, ruby-on-rails-3.2

我在页面顶部有一个 select_tag 字段，并尝试获取所选选项以根据用户选择更改页面上的内容。

我是一名学习者，已经找到了一些信息，但没有详细的示例和关于如何最好地实现和实施的良好解释。

**场景如下：** 我在项目和文档之间有一个 belongs_to 关联，并且在我的一个列出文档的视图中，我只想在选择标记中显示属于当前选定项目的所有文档。

想到将选定项目的 id 传递给文档索引操作，该操作仅通过 link_to 标记显示指定项目 id 的文档。因此，这将在视图中使用正确的文档刷新页面，但我认为这不是正确的方法，并且我不能使用 link_to 标签作为 select_tag 中的选项。任何人都可以帮助并提供一个例子吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T12:40:18.273

在您的控制器中：

```
def index
  if params[:project]
    @documents = Document.where(:project => params[:project]
  else
    @projects = Project.all
  end
end 
```

在您的表单/视图中：

```
<%= form_tag 'projects', :method => :get do %>
  <%= options_from_collection_for_select(@projects, :id, :name)
  <%= submit_tag %>
<% end %>

<% if @documents %>
  <%= @documents.each do |d| %>
    ....
  <% end >
<% end %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T13:55:01.593

我建议使用 form.select 方法和 options_for_select ，如

```
f.select :attribute, options_for_select(@array, default_value) 
```

在您的控制器中，您应该使用提交的参数创建或更新

```
n = record.new(:attribute => params[:attribute]) 
```

玩得开心

# c - x86/x64 平台上的嵌入式开发通常使用哪些 C 编译器？

> ID：11207141
> 
> 赞同：0
> 
> 时间：2012-06-26T12:16:39.407
> 
> 标签：c, compiler-construction, embedded, intel

x86/x64 平台上的嵌入式开发通常使用哪些 C 编译器？

GCC常用吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T13:04:46.633

如前所述，它取决于嵌入式系统的架构。但是，通常情况下，我为所讨论的体系结构找到了一个“移植的”gcc 交叉编译器。另一个流行的编译器是[Keil](http://www.keil.com/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T12:52:21.093

取决于架构。

如果你有一个奇特的架构，比如说一个由第三方定制的标准模型 CPU（例如修改过的 MIPS，比如 PSP 上的 Allegrex），那么标准的 GCC 可能不会输出最优化的代码。您将不得不使用他们自己的工具/编译器（或修改 GCC 本身以添加对该架构的修改）。

如果它是 GCC 支持的标准架构/CPU，那么 GCC 应该与任何其他 C 编译器一样好，甚至更好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T12:45:44.153

我也在研究嵌入式系统（主要是 DSP 处理器）。我通常只使用 GCC 在 LINUX 机器上测试和模拟我的初始代码。但要创建一个真正适用于 DSP 的代码集，我必须使用单独的编译器（VisualDSP++，它是由 ADI 为自己的 DSP 处理器集开发的）。您可能需要与嵌入式系统的制造商核实要使用的特定编译器。

安树

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T14:02:17.707

自由软件 (GNU)：绝对是 GCC。

ARM 的专有软件可能是 Keil 或 IAR C 编译器。IAR 还支持许多其他处理器和更简单的微控制器。

# c# - 判断结果是否多于请求（分页）的最佳方法？

> ID：11207146
> 
> 赞同：1
> 
> 时间：2012-06-26T12:16:43.690
> 
> 标签：c#, sql, pagination

我正在运行一个检索 20 行的查询（例如）。我想知道是否有 21 个，以便我可以相应地启用“下一页”按钮。目前，我正在检索 pageSize + 1 并返回一个布尔值作为 out 参数，根据是否检索到 21 个（在这种情况下）行来为其分配值，但实际上只会将 20 个作为列表返回。这意味着我正在检索一个额外的查询，然后我会忽略这对于性能来说并不理想，并且我不想运行 count(*) 因为它完全是另一个查询。

注意：使用 pageddatasource 并不是一个真正的选择，必须坚持使用 rowlimit 并开始行。

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T12:23:18.493

2个查询：

1.  结果页面
2.  然后结果总数

第一个查询将包含页面和页面大小，第二个查询将为您提供总行数。使用此信息，您可以计算总页数并将其呈现给用户。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T12:26:15.220

您可以使用嵌套查询，如下所示：

```
 select    TOP 20 *,
           (select count(*) from tableName) as TotalCount
 from      tableName 
```

然后每一行都会有总列，所以你可以检查一下。

或者，您可以使用此语法，避免嵌套选择。当您有其他谓词（不必在嵌套选择中重复）时，这将变得更加方便：

```
 select    TOP 20 *, count(*) over() as TotalCount
 from      tableName 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T12:30:58.363

1.  获取count(*) 一次。用它来显示页数。
2.  用户每次点击页码，获取20条记录

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-26T12:25:51.027

我怀疑在同一个数据库访问中检索一个额外的行（21 对 20）在性能方面几乎可以忽略不计。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-26T12:36:24.603

这是一个使用 row_number 的

```
–-Change these two variable to parameters of your
–-actual stored procedure

Declare @PageNumber int
Declare @PageSize int

–-Assume we need page 6 i.e. records from 51-60
Select @PageNumber=6
Select @PageSize=10

–-Select only those records which
–-fit into a single page
Select Top(@PageSize) * from
(
Select
RowID=ROW_NUMBER() OVER (ORDER BY Name),
ProductID,Name,ProductNumber,ListPrice,
TotalRows=Count(*) OVER() --Count all records
from Production.Product
) A
Where A.RowId > ((@PageNumber-1)*@PageSize) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-26T12:29:32.313

尝试这个

```
Select *,Row_Number .... as RowNo
into #Table
from Table

Select * 
from #Table
WHERE RowNo > @FirstRec AND RowNo < @LastRec

Select count(*)
from #Table 
```

# web-services - 如何绕过 CDN ping 原始网页？

> ID：11207149
> 
> 赞同：2
> 
> 时间：2012-06-26T12:16:56.867
> 
> 标签：web-services, ping

我住在波兰的华沙。我正在 ping 任何美国网页（如 www.nba.com）：

```
$ ping www.nba.com
PING a1570.gd.akamai.net (213.155.152.161) 56(84) bytes of data.
64 bytes from 213-155-152-161.customer.teliacarrier.com (213.155.152.161): icmp_req=1 ttl=58 time=6.90 ms
64 bytes from 213-155-152-161.customer.teliacarrier.com (213.155.152.161): icmp_req=2 ttl=58 time=5.68 ms 
```

我收到的时间大约是 7-10 毫秒，而从波兰到美国的往返距离（包裹来回）大约是 16000 公里（16*10^6 米）。c=3*10^8 米/秒。距离/c = 0,05 秒 = 50 毫秒。

所以我想，一些网页缓存在其他一些服务器上，例如在西欧（5 毫秒，意味着离我的地方不到 750 公里）。那我怎么能ping通原来的美国网页呢？

还是我错过了什么？

EDIT1：好的，我错过了，我实际上在伦敦 ping a1570.gd.akamai.net，但距离仍然太远（> 750 公里）。是 ping 时间计数器错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T12:24:44.727

您不是在 ping `www.nba.com`，而是他们正在使用的 CDN 服务器之一，即：

```
a1570.gd.akamai.net (213.155.152.161) 
```

此 Akamai 服务器[位于伦敦](http://www.infosniper.net/index.php?ip_address=213.155.152.161&map_source=1&overview_map=1&lang=1&map_type=1&zoom_level=7)。因此，您的 ping 非常快，证明 CDN 确实有效。

# javascript - 获取Jquery中单选按钮组的ID

> ID：11207150
> 
> 赞同：0
> 
> 时间：2012-06-26T12:16:57.057
> 
> 标签：javascript, jquery

我有一组名为“periodType”的单选按钮。该组中有一个单选按钮，其行为方式与其他单选按钮相同，只是它显示了一个额外的 div。我如何才能知道该特定单选按钮何时被选中，因为下面的更改功能对于组中的所有单选按钮都非常通用：

```
 $('input[name="periodType"]').change(function() {
        if(this.checked) {
            //do something (for all radio buttons)
            //If unique radio button also do this
        }
    }); 

    <input type="radio" name="periodType" default>
<input type="radio" name="periodType" default>
<input type="radio" name="periodType" default>
<input type="radio" name="periodType" default> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T12:20:16.450

您可能想为您的无线电输入添加一个值：

```
<input type="radio" name="periodType" value="one" default>
<input type="radio" name="periodType" value="two" default>
<input type="radio" name="periodType" value="three" default>
<input type="radio" name="periodType" value="four" default> 
```

然后查询该值：

```
$('input[name="periodType"]').change(function() {
  if (this.value == 'three' && this.checked) {
    //do something (for all radio buttons)
    //If unique radio button also do this
  }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T15:05:36.817

可能你正在寻找这样的东西。我已将每个收音机添加到其自己的 div 中，只是为了显示更改时的行为。请让我知道，如果你有任何问题。

* * *

```
 <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
            "http://www.w3.org/TR/html4/loose.dtd">
    <html>
    <head>
        <title></title>
        <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>

        <style type="text/css">
            .selected{background-color: #fad42e;}
            .notSelected{background-color: #6f6e73;}
        </style>
        <script type="text/javascript">

            $(document).ready(function () {

                $('input[name="periodType"]').change(function() {
                    $(this).parent('div').removeClass();
                    $(this).parent('div').addClass('selected');

                    $('input[name="periodType"]')
                            .parent('div')
                            .not($(this).parent("div"))
                            .each(function(e){
                                $(this).removeClass();
                                $(this).addClass("notSelected");
                            });
                });

            });

        </script>
    </head>
    <body>

    <div>
        <input type="radio" name="periodType" >
    </div>
    <div>
        <input type="radio" name="periodType" >
    </div>
    <div>
        <input type="radio" name="periodType" >
    </div>
    <div>
        <input type="radio" name="periodType" >
    </div>

    </body>
    </html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T12:20:47.153

```
$('input[name="periodType"]').change(function() {
        if(this.checked) {
            //do something (for all radio buttons)
            //If unique radio button also do this
           var idval = $(this).attr("id");
           if (idval == "something")
           {
             //do something
            }
        }
    }); 
```

# .net - 创建动态数组以获取每周数据

> ID：11207151
> 
> 赞同：0
> 
> 时间：2012-06-26T12:16:59.650
> 
> 标签：.net

我需要获取如下所示格式的 JSON 数据

```
{
    "SalesDetails":["Sales1,Sales30"]
    ,
    "Sales1":
    [
    {"name":"Porsche","quantity":"2"},
    {"name":"Jaguar","quantity":"30"}
     ]
}    ,
    "Sales30":
    [
    {"name":"Porsche","quantity":"29"}
     ]
} 
```

“Sales1”、“Sales2”....的数量不固定。它是动态的。它可以是 20 或 60 等。我无法在我的班级中创建那么多属性，例如

```
class x
{
 public type Sales1 {get;set;}
 public type Sales30 {get;set;}
 .....
 public type SalesN{get;set;}
} 
```

有没有办法将这些创建为动态属性或任何其他解决方案并获得所需格式的结果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T12:56:14.390

将 JSON 数据反序列化为 Dictionary 对象。然后，您可以通过将“Sales”与迭代器连接起来并将其用作键或使用`foreach`.

[http://procbits.com/2011/04/21/quick-json-serializationdeserialization-in-c/](http://procbits.com/2011/04/21/quick-json-serializationdeserialization-in-c/)

# xcode - 将图像保存到沙箱？

> ID：11207154
> 
> 赞同：0
> 
> 时间：2012-06-26T12:17:09.323
> 
> 标签：xcode, image, sandbox

我有一个 for 循环，它运行下面的代码以从服务器下载大量图像（有点像一本图像书）。

```
-(id)imageRequest:(NSString *)imageurl :(const float *)width :(const float *)height
{
    UIImageView *imageView = [[UIImageView alloc] initWithFrame:CGRectMake(0, 0, *width, *height)];
    [imageView setImageWithURL:[NSURL URLWithString:imageurl] placeholderImage:[UIImage imageNamed:@"abc.jpg"]];
    return imageView;
} 
```

但我想将这些图像保存在沙盒中，这样即使没有互联网，应用程序也可以访问它们。但是，当互联网中断时，我如何保存它们并以允许应用程序仍以正确顺序将它们作为图像书加载的方式打开它们？

我一直在看这个 [http://www.makebetterthings.com/iphone/image-caching-in-iphone-sdk/](http://www.makebetterthings.com/iphone/image-caching-in-iphone-sdk/)

抱歉，我是 xcode 的新手，但非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T00:37:59.693

setImageWithURL: placeholderImage: 不是 UIImageView 函数，我在一个名为 SDWebImage ( [github](https://github.com/rs/SDWebImage/) ) 的 uiimageview 类别中看到它，因此您可以使用它来缓存图像并在互联网关闭时打开它们。您可以尝试使用 hjcache 到 ( [github](https://github.com/markofjohnson/HJCache) ) 或 AFnetworkin ( [github](https://github.com/AFNetworking/AFNetworking/) )。但我建议您使用 SDWebImage，因为它简单而强大。

# javascript - JavaScript 从字符串解析 int

> ID：11207158
> 
> 赞同：1
> 
> 时间：2012-06-26T12:17:16.527
> 
> 标签：javascript, jquery, regex

我有字符串：“您可以为主题投票 36 次，为评论投票 84 次”。

我需要从字符串中获取数字 84（数字可以不同）。

我该怎么做？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-26T12:18:20.487

试试这个：

```
/^You can vote \d\d times for topics and (\d\d) times for comments$/.exec(str); 
```

或者：

```
/^You can vote \d+ times for topics and (\d+) times for comments$/.exec(str); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T12:24:03.447

或者试试这个不同的：**demo** [http://jsfiddle.net/GyK7J/](http://jsfiddle.net/GyK7J/)

**代码**

```
var s = "You can vote 36 times for topics and 84 times for comments".;
var firstnumber = parseInt(/vote\s(\d+)/.exec(s)[1], 10);
var second = /and\s([\d+]+)/.exec(s)[1]; 
```

# mysql - 模式所有单词都必须出现在正则表达式中

> ID：11207159
> 
> 赞同：-4
> 
> 时间：2012-06-26T12:17:17.763
> 
> 标签：mysql, regex

我想匹配一个必须存在两个单词的模式，但我不能让我的正则表达式工作。

结果为空。为什么？

```
select 'only test bla dido simple' REGEXP '^(\\?=.*\\?(simple))(\\?=.*\\?(only))*$'; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T13:31:13.857

您的结果实际上为零，而不是`NULL`. MySQL`REGEXP`运算符返回 0 表示不匹配，返回 1 表示匹配。（如您所知，`NULL`在 RDBMS 的世界中具有特定的含义。）

所以问题是，你的特定正则表达式匹配什么？让我们解构它。

```
 '^(\\?=.*\\?(simple))(\\?=.*\\?(only))*$' 
```

它以 开头`^`和结尾`$`，因此它必须匹配整个字符串，而不是子字符串。

它由两个连接的表达式组成，两者的形式

```
(\\?=.*\\?(word)) 
```

据我所知，你想匹配：

1.  可选的反斜杠
2.  一个等号
3.  任何长度为零或更长的字符串，吞噬输入
4.  另一个可选的反斜杠
5.  这个单词

我无法弄清楚你希望通过这个复杂的匹配序列来完成什么。您的输入文本中没有任何等号。

你可以使用这个语句。当然，它返回零，因为 simple 一词仅在您的输入文本中出现在该词之后。

```
 SELECT 'only test bla dido simple' REGEXP '^.*(simple).*(only).*$' 
```

MySQL 不处理`(?=pattern)`前瞻表达式，如果那是你想要做的。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-26T13:19:01.403

**对于简单**的单词，**只有**常规的正则表达式是`^(?=.*\bsimple\b)(?=.*\bonly\b).*$`.

*要通过mysql*接受这个正则表达式，您必须根据需要添加转义`\`字符 - 这现在是您的任务。

# google-maps - 谷歌地图 z-Index 值

> ID：11207162
> 
> 赞同：2
> 
> 时间：2012-06-26T12:17:29.963
> 
> 标签：google-maps, google-maps-api-3, google-maps-markers

我正在创建一个 Google Maps Mashup，并希望增加其中一个标记的 z-index，以便某些缩小的人可以看到它。

[http://startupsradar.com/](http://startupsradar.com/)

我希望红色标记始终显示在上方。

标记的默认 zIndex 是多少？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T13:02:33.507

标记的 zIndex 值可以达到最大值 google.maps.Marker.MAX_ZINDEX。因此，如果您希望您的标记高于一切，请将 zIndex 设置为 (google.maps.Marker.MAX_ZINDEX + 1)。例如 **marker.setZIndex(google.maps.Marker.MAX_ZINDEX + 1);**

# html - 在单击链接时为网络博客实现弹出页面

> ID：11207167
> 
> 赞同：0
> 
> 时间：2012-06-26T12:17:53.170
> 
> 标签：html

我该如何实施这样的事情？（点击网站功能）

[http://ideas-to-implement.blogspot.in/](http://ideas-to-implement.blogspot.in/)

我已经有了一个模板，我想用这个覆盖它。我知道如何在网页中弹出图像（单击图像会放大它，我的意思是）。我尝试在网页上使用相同的逻辑，但它不起作用。

另外，这只是我的经理要求我做的事情（而且我只有 JSP、php 和其他 Web 技术的第一手知识）。所以，请帮帮我。不是那些作业问题之一。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T13:07:50.100

You need to open a page in a popup?

Try [http://fancybox.net/](http://fancybox.net/) It's like a modal box, but you can put pages in it. If you use .jsp and struts2 it's very easy.

Is this what you are looking for?

# performance - Grails 中的惰性下拉菜单

> ID：11207170
> 
> 赞同：0
> 
> 时间：2012-06-26T12:17:59.587
> 
> 标签：performance, grails

我试图像在 Excel 中一样在 Grails 自动过滤器中实现。我的想法是创建一个 Taglib

```
class FilterPanelTagLib {
static namespace = 'x'
def filterPanel = {attrs, body ->

    StringBuffer content = new StringBuffer()
    List lines = attrs.lines
    def filter = attrs.filter
    out << "<form>"
    long start = System.currentTimeMillis()
    attrs.columns.each{col->
        if(col != ''){
            List tmp = getColumnValues(lines,col)
            def value = filter?filter[col]:""
            out << "<th>" + g.select(
                onchange:"submit()",
                name:"filter."+col,
                from:tmp, 
                value:value, 
                noSelection:['ALL':'ALL'])+"</th>"
        }else {
            out << "<th> </th>"
        }
    }
    out << "</form>"
    println ((System.currentTimeMillis()-start)/1000 + " filterPanelTagLib".center(40,"-"))

}

private List getColumnValues(List lines, String column){
    List result = lines.collect{it[column]}.unique().sort() << 'ALL'
    return result
} 
```

并像这样在 GSP 中使用它：

```
<x:filterPanel filter="${filter}" lines="${taskList}" columns="['id',
        'label',
        'activity',
        'assignee'
        '',
        '']"/> 
```

它工作正常。我在控制器中将所选保管箱的值作为 params.filter 获取，并且可以使用 criteriaBuilder 来获取过滤后的列表。

问题是创建每个下拉列表内容的性能。我已经测试了一个包含 1000 个项目的列表，大约需要 3 秒。30.000 的目标性能为 <2 秒

欢迎提出任何建议！

# oracle - 找出上次更新表格的人员和方式？

> ID：11207171
> 
> 赞同：0
> 
> 时间：2012-06-26T12:18:00.223
> 
> 标签：oracle, ddl

我需要找出谁`alter table`在某个表上执行了最后一条语句以及语句本身是什么。使用“Oracle Database 10g Enterprise Edition Release 10.2.0.3.0 - Prod”

我找到了最后一次 ddl 修改的日期：

```
select last_ddl_time from dba_objects where object_name = 'table1' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T14:47:00.800

如果未启用审核，您可能需要深入[了解 logminer](http://docs.oracle.com/cd/B10500_01/server.920/a96521/logminer.htm)

# javascript - 如何在 envjs 中使用 requireJs

> ID：11207174
> 
> 赞同：0
> 
> 时间：2012-06-26T12:18:04.657
> 
> 标签：javascript, unit-testing, requirejs, envjs

有人可以给我一些关于如何将**[bumblebee](https://github.com/ryangreenhall/bumblebee)**与**requireJs**结合起来的提示吗？BumbleBee 结合了 Rhino、JSpec、[Envjs](http://www.envjs.com/doc/guides#running-rhino)和 Ant 来提供一个“开箱即用”的 JavaScript 测试工具包。它对我们非常有用，因为它可以在 ubuntu-boxes 的终端中进行简单的独立运行。

我们基于 requireJs-Modules 的整个 JS 代码，并且看起来，如果从 envjs/bumblebee/rhine 的规范文件中需要它们，则不会加载所需的模块*（什么样的东西可能对此负责），*可能是由于requireJs中的异步事实。

**我做了什么：**

1.  我按照上面提到的[github 站点](https://github.com/ryangreenhall/bumblebee)上的说明设置了 BumbleBee 环境
2.  命令“ant examples”工作正常，两个测试用例都运行成功
3.  我将 require-jquery.js 添加到依赖项（替换最初设置的 jquery.js）（这种方式遵循教程[“如何将 jQuery 与 requireJS 一起使用”](http://requirejs.org/docs/jquery.html) - 它在我们的整个 Web 应用程序中成功运行（并且工作正常）
4.  我写了一些requireJS-Modules，在spec-files中需要它们，并且很快检测到它们不会被加载（spec-files将被加载，并且require-method将被执行，但不是ins内容）
5.  然后我使用这些[设置提示](http://requirejs.org/docs/node.html)将requireJS与Node结合起来（这里也提到了rhino）

**这些文件可能很有趣：**

lib/bumblebee.js（我认为它是整个测试套件的入口点）：

```
load('dependencies/js/env.rhino.1.2.js');
window.location="examples/fixture/fixture.html";

load('dependencies/js/jspec/jspec.js');
load('dependencies/js/require-jquery.js');

var runSpec = function(spec) {
    JSpec.exec(spec);
};

define(function(require) {
    console.log("A1");
    var dep = require('dependency');

    //The value returned from the function is
    //used as the module export visible to Node.
    return function () {};
});

require(['dependency'], function(d){
    console.log("A2");
} );

console.log("A3");

var specs = arguments;

jQuery.each(specs, function(index, spec) {
    runSpec(spec);
});

JSpec
  .run({ reporter: JSpec.reporters.Terminal, fixturePath: 'spec/fixtures' })
  .report(); 
```

只有“A3”会打印到控制台，这里永远不会执行基于需求的代码。

然后我将define/require-parts放入示例文件中的规范文件中，并且还检测到，我不能将模块与require一起使用，因为它们不会被加载并且不会被加载。

考虑来自 BambleBee-Examples 的原始规范文件：

```
describe('Greeter', function() {

    load('examples/src/greeter.js');

    it('greets people', function() {
      expect(example.greeter().greet()).to(eql, 'Hello!');
    });
}); 
```

当我现在使用 requireJS 特定的模块时，它们也不会被加载：

```
describe('Greeter', function() {

    load('examples/src/greeter.js');

    require(['dependency'], function(d){
        // do something with D...
        console.log("This will **NEVER** be printed");
    } );

    console.log("This **WILL** be printed");
    it('greets people', function() {
      expect(example.greeter().greet()).to(eql, 'Hello!');
    });
}); 
```

**问题**：

有没有办法将 Envjs 与 requireJS 结合起来，或者 EnvJS 对我们来说是错误的测试工具吗？非常感谢任何提示！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T02:52:03.747

This is a known issue. You can refer to [https://github.com/envjs/env-js/issues/7](https://github.com/envjs/env-js/issues/7) to get detailed discussion between envjs and requirejs. My solution is to use Phantomjs to run jasmine specs with CI, and you can find the sample project at [https://github.com/xiaocong/xiaocong.github.com/tree/master/examples/coffee-bbb-amd-backbone-rest-contacts](https://github.com/xiaocong/xiaocong.github.com/tree/master/examples/coffee-bbb-amd-backbone-rest-contacts)

# java - Android中的评论表单

> ID：11207175
> 
> 赞同：0
> 
> 时间：2012-06-26T12:18:08.543
> 
> 标签：java, android, wordpress

我想制作一个评论表单，以便从 Android 应用程序向基于 Wordpress 的网站提交评论。这是我的第一个 Android 应用程序，我从来没有这样做过，所以任何建议都会很棒。

我想我可以使用 Http 请求来发送帖子数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T12:25:53.980

根据Wordpress 支持论坛的[这篇帖子](http://wordpress.org/support/topic/android-and-wordpress-api)，最好的方法是查看[官方 Android 应用程序](http://android.wordpress.org/)，它是开源的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T12:21:57.380

取一个名称值对并以给定格式添加 keyId 及其值

```
 nameValuePairs.add(new BasicNameValuePair("Cmnt_Key", strcmnt)); 
```

在下面的函数中传递了链接的 url 和 namevaluepair

```
 public static HttpResponse postData(String strUrl, List<NameValuePair> nameValuePairs) 
{
    // Create a new HttpClient and Post Header
    HttpClient httpclient = new DefaultHttpClient();
    HttpPost httppost = new HttpPost(strUrl);
    try 
    {
        // Add your data
        httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

        // Execute HTTP Post Request
        response = httpclient.execute(httppost);

    }
    catch (ClientProtocolException e) 
    {
        // TODO Auto-generated catch block
    }
    catch (IOException e) 
    {
        // TODO Auto-generated catch block
    }
    return response;
} 
```

# c - 将不同的单词保存到链表中

> ID：11207176
> 
> 赞同：-1
> 
> 时间：2012-06-26T12:18:10.677
> 
> 标签：c, copy, linked-list, distinct

基本上我在这里有 2 个链表：list 和 distinct。有几组词早先已保存到“列表”结构中。打算编写一个程序，该程序将找到不同/唯一的单词并将其保存到“不同”结构中。这是我到目前为止基于我的指针概念得到的。但是，当我尝试打印“不同”时，程序崩溃:(如果我错了，请纠正我。

```
struct list {
char string[50];
struct list *next;
};

struct distinct {
char string[50];
struct distinct *next; 
};

void checkdistinct() { 

 list *ori = NULL;
 distinct *copy = NULL;
 distinct *check = NULL;

if(ori == NULL && copy == NULL) { //first time.
    ori = ori->next;
    copy = copy->next;
    copy = (distinct*)malloc(sizeof(distinct));
    strcpy(copy->string, ori->string);
    ori = ori->next;
    copy = copy->next;
}
else {}

while(ori!=NULL) {
    check = check->next;

   while(check != NULL) {
    if(strcmp(ori->string, check->string)!=0) {
        check = check->next;
    }
    else {
        ori = ori->next;
        check = NULL;
    }

 }

    //only compare same casing words, for now.
    copy = (distinct*)malloc(sizeof(distinct));
    strcpy(copy->string, ori->string);
    ori = ori->next;
    copy = copy->next;      
 }
} 
```

当我尝试在 main 中打印时，它会崩溃:(如果您需要对代码的额外评论，请回复。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T13:16:38.267

在您的代码中， distinct 不是变量的名称，而是结构的名称。您似乎误解了指针，希望这会有所帮助，尽管它与您的问题没有直接关系。

我省略了很多错误检查以使代码看起来更简单。

```
typedef struct listnode {
    char string[50];
    struct listnode *next;
} list_node;

typedef struct listbase {
    list_node *head;
    int numberOfElements;
} list;

/* Add a new string at the start of the list
*/
void ListPrepend(list *myList, char *myString) {
    list_node *newNode = malloc(sizeof *newNode); /* create node to store string */

    strcpy(newNode->string, myString); /* copy string into node */
    newNode->next = myList->head;      /* New node now followed by whole list */
    myList->head = newNode;            /* List now starts with new node */
    myList->numberOfElements++;
}

/* Add a new string at the end of the list
*/
void ListAppend(list *myList, char *myString) {
    list_node *newNode = malloc(sizeof *newNode), /* create node to store string */
              *currentNode = myList->head; /* pointer to node so we can find the end */

    strcpy(newNode->string, myString); /* copy string into new node */
    newNode->next = NULL;              /* Nothing following this node */

    if ( myList->head == NULL ) {
        myList->head = newNode; /* we didn't have a start node so assign it */
    } else {
        /* if there is a next node, move to it */
        while ( currentNode->next != NULL ) {
            currentNode = currentNode->next;
        }
        /* there is no next node so add new node on the end */
        currentNode->next = newNode;
    }
    myList->numberOfElements++;
}

/* Show the list in order head to tail
*/
void ListDisplay(list *myList) {
    list_node *currentNode = myList->head;

    while ( currentNode != NULL ) {
        printf("%s\n", currentNode->string);
        currentNode = currentNode->next;
    }
}

int main() {
    list distinct = {0}; /* Now there is a variable called distinct */
    char name[][20] = {"Lim Zheng Yue", "Monkey", "Dave"};

    ListAppend(&distinct, name[0]);
    ListAppend(&distinct, name[1]);
    ListPrepend(&distinct, name[2]);
    ListDisplay(&distinct);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T12:22:41.577

这三行可能是罪魁祸首之一：

```
if(ori == NULL && copy == NULL) { //first time.
    ori = ori->next;
    copy = copy->next; 
```

在这里检查 if`ori`和`copy`are `NULL`，然后*立即*取消引用这些`NULL`指针！

# java - java：如何从数据库中获取值到jTable中

> ID：11207183
> 
> 赞同：0
> 
> 时间：2012-06-26T12:18:32.043
> 
> 标签：java, mysql, swing, netbeans, jdbc

我创建了一个 jTable。我想将数据从两个不同的表中显示到表中，即表员工和表 intime。我为此使用了两个结果集，但它在 jTable 中显示了最后一个结果集的值。我的代码是

```
public void showDailyReport()
{
try
{
        Connect c=new Connect();//connection to database
        con=(Connection) c.getConnection();
        st1=con.prepareStatement("select employee_id,employee_name from tbl_employee");
        rs1=st1.executeQuery();
        st2=con.prepareStatement("select intime from tbl_intime");
        rs2=st2.executeQuery();
        table_daily.setModel(DbUtils.resultSetToTableModel(rs1));
        table_daily.setModel(DbUtils.resultSetToTableModel(rs2));

}
catch(Exception e)
{
   System.out.println(e); 
}
} 
```

请帮我重新编码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T12:20:08.947

因为你正在覆盖它

```
 table_daily.setModel(DbUtils.resultSetToTableModel(rs1));
    table_daily.setModel(DbUtils.resultSetToTableModel(rs2)); 
```

如果要将第二个结果集中的添加数据附加到模型而不是覆盖

# android - 难以启动通过应用程序安装的应用程序（同时）

> ID：11207187
> 
> 赞同：0
> 
> 时间：2012-06-26T12:18:51.070
> 
> 标签：android

我是 android 新手..实际上我正在尝试通过我的应用程序增加 android 手机的 RAM 内存..为此我创建了一个活动，我可以从中启动手机中存在的其他应用程序。这种方法成功地减少了 RAM 内存.但我面临一个困难，因为我在启动应用程序后看不到家长活动。我需要在启动后立即推动其他活动（已启动）在后台运行，并且始终需要父活动可见..

```
package com.android;

import java.util.List;
import android.app.Activity;
import android.app.ActivityManager;
import android.app.ActivityManager.MemoryInfo;
import android.content.ActivityNotFoundException;
import android.content.ComponentName;
import android.content.Context;
import android.content.ContextWrapper;
import android.content.Intent;
import android.content.pm.PackageManager;
import android.content.pm.ResolveInfo;
import android.os.Bundle;
import android.os.Handler;
import android.widget.LinearLayout;
import android.widget.Toast;
/**
 * GraphViewDemo creates some dummy data to demonstrate the GraphView component.
 * @author Arno den Hond
 **/
public class VsActivity extends Activity {
  /**
     * Variable Array for GraphView
     * verlabel : Background Height Values
     * horlabel : Background Width Values
     * values : Max Values of Foreground Active Graph
     */
    private float[] values = new float[60]; 
    long availableMegs;
    private String[] verlabels = new String[]     { "500","450","400","350","300","250","200","150","100","50","0"};
    private String[] horlabels = new String[] {"0","10", "20", "30", "40", "50", "60"};
    private GraphView graphView;
    private LinearLayout graph;
    private boolean runnable = false;
    public static int datasend,test=0;
    int cnt=0;
    Activity activity = this.activity;
    static int count=0;
    @Override
    public void onCreate(Bundle savedInstanceState){
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        graph = (LinearLayout)findViewById(R.id.graph);
        graphView = new GraphView(this, values, "TEST GRAPH", horlabels, verlabels,    GraphView.LINE);
        graph.addView(graphView);
        runnable = true;
        startDraw.start();
    }

    @Override
    public void onDestroy(){
        super.onDestroy();
        runnable = false;
    }

    public void setGraph(){
        int i,j;
        count=count+10;
        try{
                j=values.length-1;
        for(i=0; i<values.length-1; i++){
            values[i] = values[i+1];
        }
        MemoryInfo mi = new ActivityManager.MemoryInfo();
        ActivityManager activityManager = (ActivityManager) getApplicationContext()
            .getSystemService(ACTIVITY_SERVICE);
        activityManager.getMemoryInfo(mi);
        datasend= (int)((mi.availMem / 1048576));
 values[values.length-1] = (float) datasend;        
graph.removeView(graphView);
        graph.addView(graphView);
        }
        catch (Exception e){
            // e.printstacktrace();
        }
    } 

private void  launchComponent(String packageName, String name){
    System.out.println("launch application "+datasend);
    Intent launch_intent = new Intent("android.intent.action.MAIN");
    launch_intent.addCategory("android.intent.category.LAUNCHER");
    launch_intent.setComponent(new ComponentName(packageName, name));
    launch_intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
    if(datasend > 24){
        System.out.println("launch application inside if "+packageName+"   "+name);
    this.startActivity(launch_intent);
    }
}

public void startApplication(){
    String application_name = "";
    test=1;
    //ContextWrapper activity = this.activity;
    try{
        System.out.println("Start application ");
        Intent intent = new Intent("android.intent.action.MAIN");
        intent.addCategory("android.intent.category.LAUNCHER");
        List<android.content.pm.PackageInfo> packageList;
        intent.addFlags(Intent.FLAG_ACTIVITY_NO_ANIMATION);
        PackageManager pm = this.getPackageManager();
        packageList = pm.getInstalledPackages(0);
        List<ResolveInfo> resolveinfo_list = pm.queryIntentActivities(intent, 0);

        for(ResolveInfo info:resolveinfo_list){
            application_name = info.activityInfo.packageName;
            System.out.println(info.activityInfo.packageName+"    "+info.activityInfo.name);
            //if(info.activityInfo.packageName.equalsIgnoreCase(application_name)){
                launchComponent(info.activityInfo.packageName, info.activityInfo.name);
              //  break;
           // }
        }
    }
    catch (ActivityNotFoundException e) {
        Toast.makeText(activity.getApplicationContext(), "There was a problem loading the application: "+application_name,Toast.LENGTH_SHORT).show();
    }
}
public Handler handler = new Handler(){
    @Override
    public void handleMessage(android.os.Message msg){
        switch(msg.what){

        case 0x01:
           setGraph();
          // if(test == 0){
          startApplication();//}
           break;
        }
    }
};

public Thread startDraw = new Thread(){
    @Override
    public void run(){
        while(runnable){
            handler.sendEmptyMessage(0x01);
            try{
                MemoryInfo mi = new ActivityManager.MemoryInfo();
                ActivityManager activityManager = (ActivityManager)getSystemService(ACTIVITY_SERVICE);
                activityManager.getMemoryInfo(mi);
                long ava = mi.availMem / 1048576L;
                //count=(int)ava;
                //System.out.println("SUDARHAN RAMAN    "+ava+"   "+count);
                Thread.sleep(1000);
            } catch (Exception e){
                // e.printstacktrace();
            }
        }
    }
};
} 
```

这里的 GraphView 是一个视图，它将使用 Canvas.drawline(...) 绘制一个图形 在上面的代码**中 startapplication()**将启动子（安装在我们手机中的应用程序）活动。

请帮助...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T12:28:03.850

```
 Intent i = new Intent(Intent.ACTION_MAIN);
            PackageManager manager = mContext.getPackageManager();
            i = manager.getLaunchIntentForPackage(_AppPkgName);
            i.addCategory(Intent.CATEGORY_LAUNCHER);
            startActivity(i); 
```

# c++ - C++ Boost Multi Index，Modify 需要 Functor，编译失败

> ID：11207189
> 
> 赞同：12
> 
> 时间：2012-06-26T12:18:56.420
> 
> 标签：c++, boost, multi-index

我已经建立了一个 Windows C++ Visual Studio 项目 (VS9) 来测试 Boost::Multi_Index 的使用。正在设置容器以存储指向自定义对象 FC::ClientOrder 的共享指针。为了测试，对象很简单，只存储一个字符串和一个char变量。升压版本是 1_46_0

我已将 Multi_Index 容器配置为索引共享指针作为标识，并使用成员函数访问两个成员变量。这似乎很好，而且效果很好。

我对 modify() 方法有问题。我意识到如果我想更新作为索引一部分的任何成员变量，我必须使用 modify()。我还意识到我必须首先使用 find() 在容器中定位 FC::ClientOrder 对象，然后将迭代器传递给 modify() 以进行更改。

如果我通过身份找到 FC::ClientOrder 共享指针，共享指针本身，一切正常，并且 modify() 很高兴。

如果我通过成员函数 clOrdID() 找到 FC::ClientOrder 共享指针（基本上是在其 ID 上查找订单，非常常见的用法），那么 modify() 函数会失败，即使语法相同。我收到一个编译器错误，这似乎表明存在类型问题，但我发现很难理解出了什么问题。

modify() 是否仅适用于基于标识索引的迭代器？如果是这样，要通过它的 clOrdID 编辑订单，我必须进行两次查找，一次查找容器中的订单（并获取它的 spOrder 变量），然后根据 spOrder 值创建一个迭代器。这似乎违背了能够通过 clOrdID() 值提取订单的目标。

我想我误解了 modify() 函数的要求。现在，我可以通过使用双重查找来解决这个问题，但如果有人有解决方案，我将不胜感激。我对 Functors 很陌生，所以也许我误解了 modify() 需要什么。

提前感谢您的帮助，我们将不胜感激。示例代码块应遵循...

```
///////////////////////////////////////////////////////////////////////////////
// FILE #1: FCClientOrder.h
///////////////////////////////////////////////////////////////////////////////

#ifndef FCClientOrder_H
#define FCClientOrder_H

#include <string>                                                               // Changed to use std::string

////////////////////////////////////////////////////////////////////////////////
// ClientOrder v3: RAM definition of a market order - stripped out for testing

namespace FC
{

class ClientOrder
{
public:

    ClientOrder();                                                              // Default Ctor

    virtual ~ClientOrder();                                                     // Dtor

    //////////////////////
    // ACCESSOR FUNCTIONS

    std::string clOrdID(void) const;                                            // Get
    void clOrdID(const std::string& sClOrdID);                                  // Set

    char ordStatus(void) const;                                                 // Get
    void ordStatus(char cOrdStatus);                                            // Set

    ///////////////////
    // PUBLIC STATICS

    static void change_status_static(std::tr1::shared_ptr<FC::ClientOrder> spOrder,char cOrdStatus);    // Static method to change status

    // Functor
    struct change_status_by_sp
    {
        change_status_by_sp(char cOrdStatus)                                            // Ctor
        :   _cOrdStatus( cOrdStatus )
        {}

        void operator()(std::tr1::shared_ptr<FC::ClientOrder> spOrder)          // Functor
        { spOrder->ordStatus( _cOrdStatus ); }

    private:
        char _cOrdStatus;
    };

private:

    ////////////////////
    // PRIVATE MEMBERS

    std::string                 m_sClOrdID;                                     // Client order ID
    char                        m_cOrdStatus;                                   // Order Status

}; // end of class ClientOrder

} // end of namespace FC

#endif // FCClientOrder_H

///////////////////////////////////////////////////////////////////////////////
// FILE #2: FCClientOrder.cpp
///////////////////////////////////////////////////////////////////////////////

#include "stdafx.h"
#include "FCClientOrder.h"

namespace FC
{

    ClientOrder::ClientOrder()
    { ordStatus( '0' ); }

    ClientOrder::~ClientOrder()                                                     // Dtor
    {}

    ///////////////////////////////////////////////////////////////////////////
    // PUBLIC FUNCTIONS
    //

    void ClientOrder::change_status_static(std::tr1::shared_ptr<FC::ClientOrder> spOrder,char cOrdStatus)
    { spOrder->ordStatus( cOrdStatus ); }

    ///////////////////////////////////////////////////////////////////////////
    // GET/SET FUNCTIONS
    //

    std::string ClientOrder::clOrdID(void) const                                // Get Client Order ID
    { return m_sClOrdID; }
    void ClientOrder::clOrdID(const std::string& sClOrdID)
    { m_sClOrdID = sClOrdID; }

    char ClientOrder::ordStatus(void) const
    { return m_cOrdStatus; }
    void ClientOrder::ordStatus(char cOrdStatus)
    { m_cOrdStatus = cOrdStatus; }

} // end of namespace FC

///////////////////////////////////////////////////////////////////////////////
// FILE #3: MIC Definition, and member declaration
///////////////////////////////////////////////////////////////////////////////

    typedef std::tr1::shared_ptr<FC::ClientOrder>           spClientOrder;
    typedef boost::multi_index::multi_index_container
    <
        spClientOrder,                                                      // Contained type, shared pointer to ClientOrder
        boost::multi_index::indexed_by
        <
            boost::multi_index::ordered_unique                              // 0 index - shared pointer index
            <
                boost::multi_index::identity<spClientOrder>,
                std::less<spClientOrder>
            > ,
            boost::multi_index::ordered_unique                              // 1 index - ClientOrderID
            <
                boost::multi_index::const_mem_fun< FC::ClientOrder, std::string, &FC::ClientOrder::clOrdID >
            > ,
            boost::multi_index::ordered_non_unique                          // 2 index - Order Status
            <
                boost::multi_index::const_mem_fun< FC::ClientOrder, char, &FC::ClientOrder::ordStatus > ,
                std::less<char>
            > 
        >
    > OrderMIC;

    // Member in working class
    OrderMic        m_micOrders;

///////////////////////////////////////////////////////////////////////////////
// FILE #4: Utility Functions to update the MIC via .modify()
///////////////////////////////////////////////////////////////////////////////

    bool XMLTestApp::updateOrder(spClientOrder spOrder,char cOrdStatus)                 // Order Status is an index, so you must modify via MIC member functions
    {
        OrderMIC::nth_index<0>::type& index = m_micOrders.get<0>();
        OrderMIC::nth_index<0>::type::iterator i = index.find( spOrder );
        OrderMIC::nth_index<0>::type::iterator iEnd = index.end();
        if ( i != iEnd )
        {
            // FOUND
            // i points at the order to change
            return m_micOrders.modify(i,FC::ClientOrder::change_status_by_sp(cOrdStatus));
        }

        return false;
    }

    bool XMLTestApp::updateOrder(const std::string& sClOrdID,char cOrdStatus)                   // Order Status is an index, so you must modify via MIC member functions
    {
        OrderMIC::nth_index<1>::type& index = m_micOrders.get<1>();
        OrderMIC::nth_index<1>::type::iterator i = index.find( sClOrdID );
        OrderMIC::nth_index<1>::type::iterator iEnd = index.end();
        if ( i != iEnd )
        {
            // FOUND

            // Option1 - This works, but does another lookup via alternative fn
            return updateOrder( *i,cOrdStatus );                                                // <- Works

            // Option2 - Attempt to use static fn, fails
            //spClientOrder spOrder = *i;
            //return m_micOrders.modify(i,FC::ClientOrder::change_status_static(spOrder,cOrdStatus));

            // Option3 - Attempt to use *i as spOrder, fails
            //return m_micOrders.modify(i,FC::ClientOrder::change_status_by_sp(cOrdStatus));
        }

        return false;
    }

// FILE #5: Compile Error

1>------ Build started: Project: XMLTest, Configuration: Debug Win32 ------
1>Compiling...
1>XMLTestApp.cpp
1>c:\program files\microsoft visual studio\myprojects\xmltest\xmltest\xmltestapp.cpp(931) : error C2664: 'bool boost::multi_index::detail::ordered_index<KeyFromValue,Compare,SuperMeta,TagList,Category>::modify<FC::ClientOrder::change_status_by_sp>(boost::multi_index::detail::bidir_node_iterator<Node>,Modifier)' : cannot convert parameter 1 from 'boost::multi_index::detail::bidir_node_iterator<Node>' to 'boost::multi_index::detail::bidir_node_iterator<Node>'
1>        with
1>        [
1>            KeyFromValue=boost::multi_index::identity<FC::XMLTestApp::spClientOrder>,
1>            Compare=std::less<FC::XMLTestApp::spClientOrder>,
1>            SuperMeta=boost::multi_index::detail::nth_layer<1,FC::XMLTestApp::spClientOrder,boost::multi_index::indexed_by<boost::multi_index::ordered_unique<boost::multi_index::identity<FC::XMLTestApp::spClientOrder>,std::less<FC::XMLTestApp::spClientOrder>>,boost::multi_index::ordered_unique<boost::multi_index::const_mem_fun<FC::ClientOrder,std::string,::>>,boost::multi_index::ordered_non_unique<boost::multi_index::const_mem_fun<FC::ClientOrder,char,::;>,std::less<char>>>,std::allocator<FC::XMLTestApp::spClientOrder>>,
1>            TagList=boost::mpl::vector0<boost::mpl::na>,
1>            Category=boost::multi_index::detail::ordered_unique_tag,
1>            Node=boost::multi_index::detail::ordered_index_node<boost::multi_index::detail::ordered_index_node<boost::multi_index::detail::ordered_index_node<boost::multi_index::detail::index_node_base<FC::XMLTestApp::spClientOrder,std::allocator<FC::XMLTestApp::spClientOrder>>>>>,
1>            Modifier=FC::ClientOrder::change_status_by_sp
1>        ]
1>        and
1>        [
1>            Node=boost::multi_index::detail::ordered_index_node<boost::multi_index::detail::ordered_index_node<boost::multi_index::detail::index_node_base<FC::XMLTestApp::spClientOrder,std::allocator<FC::XMLTestApp::spClientOrder>>>>
1>        ]
1>        and
1>        [
1>            Node=boost::multi_index::detail::ordered_index_node<boost::multi_index::detail::ordered_index_node<boost::multi_index::detail::ordered_index_node<boost::multi_index::detail::index_node_base<FC::XMLTestApp::spClientOrder,std::allocator<FC::XMLTestApp::spClientOrder>>>>>
1>        ]
1>        No user-defined-conversion operator available that can perform this conversion, or the operator cannot be called
1>Build log was saved at "file://c:\Program Files\Microsoft Visual Studio\MyProjects\XMLTest\XMLTest\Debug\BuildLog.htm"
1>XMLTest - 1 error(s), 0 warning(s)
========== Build: 0 succeeded, 1 failed, 0 up-to-date, 0 skipped ========== 
```

// 解决方案（由 stefaanv 提供）

我使用 modify() 作为 m_micOrders 的成员函数。我应该一直使用 modify() 作为迭代器适用的索引对象的成员函数，这样 updateOrder() 函数应该被更正为看起来像这样......

```
bool XMLTestApp::updateOrder(const std::string& sClOrdID,char cOrdStatus)
    { 
        OrderMIC::nth_index<1>::type& index = m_micOrders.get<1>(); 
        OrderMIC::nth_index<1>::type::iterator i = index.find( sClOrdID ); 
        OrderMIC::nth_index<1>::type::iterator iEnd = index.end(); 
        if ( i != iEnd ) 
        { 
            // FOUND 
            return index.modify(i,FC::ClientOrder::change_status_by_sp(cOrdStatus)); 
        } 
        return false; 
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-14T12:06:09.563

^(（由[stefaanv](https://stackoverflow.com/users/104774/stefaanv)提供的解决方案从原始问题复制而来。我把这个听了，这样问题就不会再显示为*未回答*了。@ [Steve Hibbert](https://stackoverflow.com/users/653966/steve-hibbert)：随时自己再次复制它作为另一个答案并接受它。）)

`modify()`被用作 的成员函数`m_micOrders`。相反，`modify()`应该被用作迭代器适用的索引对象的成员函数，这样`updateOrder()`函数应该被更正为看起来像这样......

```
bool XMLTestApp::updateOrder(const std::string& sClOrdID,char cOrdStatus)
    { 
        OrderMIC::nth_index<1>::type& index = m_micOrders.get<1>(); 
        OrderMIC::nth_index<1>::type::iterator i = index.find( sClOrdID ); 
        OrderMIC::nth_index<1>::type::iterator iEnd = index.end(); 
        if ( i != iEnd ) 
        { 
            // FOUND 
            return index.modify(i,FC::ClientOrder::change_status_by_sp(cOrdStatus)); 
        } 
        return false; 
    } 
```

# jquery - JqPlot 2 Y轴：只显示左轴的水平网格线

> ID：11207193
> 
> 赞同：3
> 
> 时间：2012-06-26T12:19:03.270
> 
> 标签：jquery, graphics, jqplot

有人知道我如何隐藏辅助 y 轴的水平网格线（右）？

有时，问题的图片比长篇描述更容易理解：

谢谢

![在此处输入图像描述](../Images/6672369a376ba933c0b0c245c54a7b88.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T13:50:38.600

看到你的代码会有很多好处。无论如何，我认为你应该为适当的轴设置`showGridline`选项，你就完成了。`tickOptions`

```
 axes: {    
      grid: {
         drawBorder: false
      },
      yaxis: {
         tickOptions: {
            showGridline: false
         }
      }     
  } 
```

[上述解决方案首先在这里提出。](https://groups.google.com/forum/?fromgroups#!topic/jqplot-users/XYnpxb5t3q8)

在你的情况下，这将是`y2axis`你所追求的。

# jquery - 表格行在 HTML 中折叠，但不是来自 JQuery 脚本

> ID：11207203
> 
> 赞同：2
> 
> 时间：2012-06-26T12:19:40.593
> 
> 标签：jquery, css

如果表行不包含数据，我正在尝试使它们折叠。这些行从 JQuery 脚本中得到更改。如果我将表格放在我的 HTML 中，我知道它们会崩溃。我可以创建许多行并使用`display:block`or`display:none`并且行按预期折叠/显示。这是标记：

```
<table style="border-collapse:collapse;">
    <tr style="display:block;">
        <td id="someid">Test</td>
        <td>Some text</td>
    </tr>
</table> 
```

这是我用来更改的示例代码`<tr>`：

```
var newtr = "<tr style='display:none;'><td id='someid'></td><td></td></tr>"
$("td#someid").parent().replaceWith(newtr); 
```

行的内容会发生变化，但不会折叠。我正在使用 Firebug 来查看`display:none`正在插入的内容。还有什么我想念的吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T12:23:29.577

为什么不添加`hide()`：

```
$("td#someid").parent().replaceWith(newtr).hide(); 
```

**[这里的工作示例](http://jsfiddle.net/KmxRB/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T12:24:19.577

而不是替换`tr`; *如果您想清除字段并隐藏行*，我建议您简单地隐藏行然后清除单元格，这样的事情应该可以解决问题：

```
// this will explicitly set the CSS display property to none and clear the children
$('td#someid').parent().css('display', 'none').children('td').each(function()
{
    $(this).text('');
});

// or you could hide the parent and then clear the children
$('td#someid').parent().hide().children('td').each(function()
{
    $(this).text('');
}); 
```

# objective-c - 不能使用 <"Programming Objective-c 4th edition" Stephen Kochan> 书中的相同代码

> ID：11207204
> 
> 赞同：0
> 
> 时间：2012-06-26T12:19:45.897
> 
> 标签：objective-c, c

为什么它说**MathOps**类别中的**分子和分母**是未声明的变量？

 **它在**第 11 章和**程序**11.1中**

无法理解为什么它不起作用，因为它与书中的代码相同，没有任何错误。

请帮忙

代码：

```
 #import <Foundation/Foundation.h>  
#import "complex.h"  
#import "Fraction.h"  
#import "XYPoint.h"  

@interface Fraction (MathOps)  
-(Fraction *)add:(Fraction *) f;  
-(Fraction *)mul:(Fraction *) f;  
-(Fraction *)sub:(Fraction *) f;  
-(Fraction *)div:(Fraction *) f;  

@end  

@implementation Fraction (MathOps)  
-(Fraction *)add:(Fraction *) f  
{  
    Fraction *result = [[Fraction alloc]init];  

    result.numerator = (numerator * f.denominator)+(denominator * f.numerator);   

// numerator and denominator: Using undeclared variables.  

    result.denominator = denominator * f.denominator;  
}  
-(Fraction *)mul:(Fraction *) f  
{  
    Fraction *result = [[Fraction alloc]init];  
    result.numerator = numerator * f.numerator;  
    result.denominator = denominator * f.denominator;  

    // numerator and denominator: Using undeclared variables.  
}  
-(Fraction *)sub:(Fraction *) f {}  
-(Fraction *)div:(Fraction *) f {}  
@end  

typedef Fraction *FractionObj;  
int main (int argc, const char * argv[])  
{  

    @autoreleasepool {  
        complex *imaginary= [[complex alloc]init];  
        complex *real = [[complex alloc]init];  
        complex *results;  

        [real setReal:1];  
        [real setImaginary:2];  
        [real print];  

        [imaginary setReal:2];  
        [imaginary setImaginary:1];  
        [imaginary print];  

        results = [real add: imaginary];  
        [results print];  
        NSLog(@"FRACTIONS!");  
        Fraction *a = [[Fraction alloc]init];  
        Fraction *b = [[Fraction alloc]init];  
        id resultFraction;  

        [a setTo:20 over:3];  
        [b setTo:1 over:3];  
        [b minusSign];  
        [a minusSign];  

        id ab = a;  
        id ba = b;  
        [ab print: 0];  
        NSLog(@"-");  
        [ba print: 0];  
        NSLog(@"=");  
        resultFraction = [ab multiplyN: ba];  
        [resultFraction print: 1];  

      XYPoint *xy = [[XYPoint alloc]init];  

        [xy setX:100 andY:110];  
        [xy print];  

        NSLog(@"VERIFYING \n \n \n");  
        Fraction *fraction = [[Fraction alloc]init];  
        complex *Complex = [[complex alloc]init];  
        id number = [[complex alloc]init];  

        if([fraction isMemberOfClass: [complex class]])  
            NSLog(@"Fraction is member of class complex");  
        if([Complex isMemberOfClass: [NSObject class]])  
            NSLog(@"complex is member of class NSObject");  
        if([Complex isKindOfClass: [NSObject class]])  
            NSLog(@"complex is kind of class NSObject");  
        if([fraction isKindOfClass: [Fraction class]])  
            NSLog(@"Fraction is kind of class Fraction");  
        if([fraction respondsToSelector: @selector(print)])  
           NSLog(@"Fraction respond to selector print");  
        if([Complex respondsToSelector: @selector(print)])  
           NSLog(@"Complex responds to print");  
        if([Fraction instancesRespondToSelector: @selector(print)])  
           NSLog(@"Fraction's instances respond to print");  
        if([number respondsToSelector: @selector (print)])  
           NSLog(@"number responds to print");  
        if([number isKindOfClass: [complex class]])  
           NSLog(@"number is kind of class complex");  
        if([[number class] respondsToSelector:@selector (alloc)])  
           NSLog(@"Number class responds to alloc");  

        if([a counter]!=1){ NSLog(@"%i times was invoked method multiplyN", a.counter); }  
        else { NSLog(@"Only %i time was invoked method multiplyN", a.counter);}  

        typedef enum {Sunday, Monday, Tuesday, Wednesday, Thursday, Friday} Day;  

    }  

    return 0;  
} 
```

**分数.h**：

```
 @interface Fraction : NSObject
@property int numerator, denominator, counter;

//methods
@end 
```

**分数.m**

```
@implementation
@synthesize numerator, denominator, counter;

//methods

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T12:33:20.953

你可能想检查你的分数类文件.h，检查你是否有一个分子和分母的集合属性。

```
@property(nonatomic, ...) Type *numerator
@property(nonatomic, ...) Type *denominator 
```

而且在你的 .m 文件中，应该有

```
@synthesize numerator, denominator 
```

或者，在您的 xcode 中，按住 Command 键的同时将鼠标指向该分子或分母，然后单击变量，xcode 会将您带到声明变量的文件，如果未声明，则不会发生任何事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T13:01:28.007

尝试`self.`在代码中添加前缀：

```
result.numerator = (self.numerator * f.denominator)+(self.denominator * f.numerator); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T13:50:26.150

看起来您正在使用分子和分母，而之前没有任何变量设置。您可能会对这些变量与其他变量具有相同名称这一事实感到困惑，但如果它们与调用它们的文件没有关联，那么您的程序将无法识别它们。您的 synthesize 语句可能需要移到您的 @implementation 语句下方。我对您显示的代码不包含分子和分母的声明这一事实感到有些困惑，我相信您的编译器也是如此。**

# java - 如何在 JFrame 窗口的菜单栏中禁用图标化按钮？

> ID：11207206
> 
> 赞同：0
> 
> 时间：2012-06-26T12:19:53.087
> 
> 标签：java, swing, button, jframe

如何禁用 JFrame 窗口中的图标化按钮？类似 setResizable 的东西，但用于最小化按钮

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T12:23:47.923

您可以使用 JDialog，它本身没有最小化按钮。

事实上，最小化、关闭和最大化/取消最大化按钮是由操作系统本身绘制的。这意味着您不能在 Java 中真正禁用它们。

这就是为什么我的建议是使用 JDialog。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T13:20:28.357

首先，您可以使用 setUndecorated(boolean) 方法。它可能会禁用标题栏和边框。

最后，您将在框架顶部或其他位置创建图标标签和关闭按钮。

但是这种方式会失去框架的边框外观。如果选择这种方式，则必须创建大量代码。

事实上，如果你不能使用 JNI，这种方式可能是唯一的。

# asp.net - 使用时 ViewState 大小错误 控制

> ID：11207210
> 
> 赞同：0
> 
> 时间：2012-06-26T12:20:00.507
> 
> 标签：asp.net

我有一个应用程序，我在其中使用图像控件在产品 UserControl 上创建图像库。当我访问任何产品以查看其细节时，它工作正常；但是，一种产品存在一些问题。如果我访问该特定产品，它会在我的错误日志中引发异常。例外是：

> ViewState 大小 5044！

画廊的控制代码是：

```
<div class="mainImage">
            <asp:Image ID="ImageControl" runat="server" BorderWidth="0" CssClass="productImage" />
            <asp:Image ID="NoIcon" runat="server" SkinID="NoIcon" Visible="false" EnableViewState="false" CssClass="productImage"/>
            <asp:Image ID="NoThumbnail" runat="server" SkinID="NoThumbnail" Visible="false" EnableViewState="false" CssClass="productImage"/>
            <asp:Image ID="NoImage" runat="server" SkinID="NoImage" Visible="false" EnableViewState="false" CssClass="productImage"/>
</div> 
```

我一直在寻找，但无法找出问题所在。任何人的帮助将不胜感激。

# iphone - iCloud 基本 URL 空

> ID：11207213
> 
> 赞同：0
> 
> 时间：2012-06-26T12:20:10.010
> 
> 标签：iphone, ios, ipad, url, icloud

我有以下代码，并正在尝试访问 iCloud 目录。

```
(void) reloadFiles{
    NSFileManager *fileManager = [NSFileManager defaultManager]; 

    NSString *containerID=@"KSC75JA957.Dcdmc.TinyPix";

    NSURL *cloudURL = [fileManager URLForUbiquityContainerIdentifier:nil];

    NSLog(@"got cloudURL %@", cloudURL); 

    self.query = [[NSMetadataQuery alloc] init];

    query.predicate = [NSPredicate predicateWithFormat:@"%K like '*.tinypix'", NSMetadataItemFSNameKey];

    query.searchScopes = [NSArray arrayWithObject:NSMetadataQueryUbiquitousDocumentsScope];

    [query startQuery];                       
} 
```

但是，当我运行我的应用程序时，我无法获取云 url。并收到以下错误。

```
 got cloudURL (null)

 item update error: 0, Error

 Domain=LibrarianErrorDomain Code=10 "The operation couldn‚Äôt be completed. 

(LibrarianErrorDomain error 10 - Unable to configure the collection.)"

 UserInfo=0xce65470 {NSDescription=Unable to configure the collection.} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T10:27:06.587

你确定你在设备上启用了 icloud 吗？参考[这个](https://stackoverflow.com/questions/11515986/icloud-error-the-operation-couldnt-be-completed-librarianerrordoman-error-10)：

```
this is the error that occurs when you haven't enabled iCloud on the device on which you are testing. once i enabled iCloud on the device, the error stopped occurring in my log.

and so now i know what error to check for in order to present the user with a dialog saying "connecting to iCloud won't work until you sign up for iCloud in the system preferences". 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T10:19:55.090

您首先需要在开发者门户网站上为您的应用程序启用 iCloud 支持。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-24T15:18:56.757

“无法配置集合”意味着文档同步以某种方式被禁用。

您是否已登录 iCloud 并启用了“文档和数据”？ `cloudURL`如果`nil`由于这两个原因之一未启用文档同步。

如果`cloudURL`是`nil`，则不应尝试使用 iCloud。

# wcf - 如何解释：WCF Performance counters Calls per second 和 Calls Duration

> ID：11207221
> 
> 赞同：0
> 
> 时间：2012-06-26T12:20:32.717
> 
> 标签：wcf, performancecounter

我在操作级别监视 WCF 的两个性能计数器： - 呼叫持续时间 - 每秒呼叫数

我已经为 perfmon 中的数据计数器日志设置了一个采样间隔。我不确定如何解释这些计数器。

所以假设我们每秒钟采样一次。
来自 MSDN：

Calls Duration：
调用此操作的平均持续时间。平均持续时间根据以下公式计算：(N1-N0)/(D1-D0)。

Calls Per Second：每秒
调用此操作的次数。
此计数器的性能计数器类型为 PERF_COUNTER_COUNTER，其值使用以下公式计算。

(N 1 - N 0 ) / ( (D 1 -D 0 ) / F)

我有这两个性能计数器的日志，持续一个小时。
通话时长的示例日志：

```
Timestamp              Call Duration
06/25/2012 17:58:52.755 0.05476632
06/25/2012 17:58:53.753 0
06/25/2012 17:58:54.751 0
06/25/2012 17:58:55.765 0
06/25/2012 17:58:56.764 0.058265824
06/25/2012 17:58:57.762 0
06/25/2012 17:58:58.760 0
06/25/2012 17:58:59.758 0
06/25/2012 17:59:00.757 0
06/25/2012 17:59:01.755 0
06/25/2012 17:59:02.753 0
06/25/2012 17:59:03.752 2.90697808 
```

示例日志：每秒调用次数：

```
Timestamp              Calls per second
06/25/2012 17:48:08.752 1.001692492
06/25/2012 17:48:09.750 0
06/25/2012 17:48:10.764 0.986190617
06/25/2012 17:48:11.762 1.00156982
06/25/2012 17:48:12.761 0
06/25/2012 17:48:13.759 0
06/25/2012 17:48:14.757 0.994411867
06/25/2012 17:48:15.756 0
06/25/2012 17:48:16.754 0 
```

我想从这些数据中回答的是：
“n”个通话中有多少个通话时间超过 2 秒？
更多信息[在这里](http://blogs.msdn.com/b/wenlong/archive/2007/09/07/how-to-use-performance-counters-to-diagnose-performance-of-wcf-applications.aspx)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T13:10:24.570

**(N1-N0)/(D1-D0)**表示**(DataFromSample2 - DataFromSample1) / (TimeAtSample2 - TimeAtSample1)**

因此，您获得的 Call Duration 和 Calls per second 的值是当前样本和先前样本的平均值，这些计数器无法判断“在“n”个呼叫中，有多少个呼叫花费了 2 秒以上？”。

您可以创建客户计数器价值，请参阅[LINK](http://blogs.msdn.com/b/adamhems/archive/2008/12/04/using-custom-performance-counters-to-measure-multi-threaded-operation-durations.aspx)

# android - SQLite 数据库在我的模拟器上运行，但不适用于我的设备

> ID：11207222
> 
> 赞同：0
> 
> 时间：2012-06-26T12:20:33.873
> 
> 标签：android

我正在开发一个 android 应用程序，我将我的 sqlite 数据库导入到 android 项目中.. 数据库在模拟器上运行良好，但是当我在我的设备上尝试该应用程序时它不起作用并输出一条消息：不幸的是，appname 有停了下来。

我将数据库放在项目的 assets 文件夹中，然后使用此代码复制它：

```
try {           
    String destPath = "/data/data/" + getPackageName() + "/databases/MyDB";
    File f = new File(destPath);            
    if (!f.exists()) {          
        CopyDB( getBaseContext().getAssets().open("mydb"), 
                new FileOutputStream(destPath));
    }
} catch (FileNotFoundException e) {         
    e.printStackTrace();

} catch (IOException e) {
    e.printStackTrace();
} 
```

复制数据库功能：

```
public void CopyDB(InputStream inputStream, OutputStream outputStream) 
    throws IOException {
    //---copy 1K bytes at a time---
    byte[] buffer = new byte[1024];
    int length;
    while ((length = inputStream.read(buffer)) > 0) {
        outputStream.write(buffer, 0, length);
    }
    inputStream.close();
    outputStream.close();
} 
```

DBAdapter 类：

```
public class DBAdapter {
public static final String KEY_ROWID = "_id";
public static final String KEY_NAME = "username";
public static final String KEY_PASSWORD = "password";

private static final String DATABASE_NAME = "MyDB";
private static final String DATABASE_TABLE = "users";
private static final int DATABASE_VERSION = 4;

private final Context context;    

private DatabaseHelper DBHelper;
private SQLiteDatabase db;

public DBAdapter(Context ctx) 
{
    this.context = ctx;
    DBHelper = new DatabaseHelper(context);
}

private static class DatabaseHelper extends SQLiteOpenHelper 
{
    DatabaseHelper(Context context) 
    {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);
    }

    @Override
    public void onCreate(SQLiteDatabase db) 
    {

    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) 
    {

    }
}    

//---opens the database---
public DBAdapter open() throws SQLException 
{
    db = DBHelper.getWritableDatabase();
    return this;
}

//---closes the database---    
public void close() 
{
    DBHelper.close();
}

//---retrieves all the users---
public Cursor getAllusers() 
{
    return db.query(DATABASE_TABLE, new String[] {KEY_ROWID, KEY_NAME,
            KEY_PASSWORD}, null, null, null, null, null);
}

//---retrieves a particular user---
public User getuser(String username) throws SQLException 
{

    Cursor mCursor =
            db.query(true, DATABASE_TABLE, new String[] {KEY_ROWID,
            KEY_NAME, KEY_PASSWORD}, KEY_NAME + "=" + "'"+username+ "'", null,
            null, null, null, null);
    if(mCursor.moveToFirst())
    {
        mCursor.moveToFirst();
        User u=new User(Integer.valueOf(mCursor.getString(0)),mCursor.getString(1),mCursor.getString(2));
        return u;
    }else
        return null;

} 
```

}

非常感谢你提前

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T12:40:47.650

如果没有看到您的 LogCat，就很难猜出错误可能是什么。

查看我做同样事情的应用程序，我看到的唯一区别在于复制功能，涉及操作顺序和附加方法。

最后在您的 CopyDB 方法中尝试此操作：

```
outputStream.flush(); 
outputStream.close(); 
inputStream.close(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T12:27:05.713

导入`SQLite`数据库基本上是个坏主意。您最好从`raw xml`. 本[教程](http://coenraets.org/blog/android-samples/androidtutorial/)应该有所帮助。至于这个问题，您可以通过清除/卸载应用程序的数据来解决它。

# javascript - 如何为选择框中的选项添加背景图像？

> ID：11207223
> 
> 赞同：3
> 
> 时间：2012-06-26T12:20:35.367
> 
> 标签：javascript, jquery, html, css, cross-browser

谁能给我一个跨浏览器支持的解决方案来解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T12:24:59.927

您可以使用此参考中的自定义 jquery 插件：

[http://www.marghoobsuleman.com/jquery-image-dropdown](http://www.marghoobsuleman.com/jquery-image-dropdown)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T12:28:27.220

HTML:- 您可以使用如下内联样式，

```
<select>
    <option style="background-image:url(1stimage.gif);">1</option>
    <option style="background-image:url(2ndimage.gif);">2</option>
    <option style="background-image:url(3rdimage.gif);">3</option>
</select> 
```

上面的代码可以在 Firefox 和 Webkit 浏览器中运行。对于其他浏览器，您可以使用 JQuery UI，请在下面找到链接

[http://docs.jquery.com/UI/Selectable](http://docs.jquery.com/UI/Selectable)

编辑：您也可以试试这个[http://www.jankoatwarpspeed.com/post/2009/07/28/reinventing-drop-down-with-css-jquery.aspx](http://www.jankoatwarpspeed.com/post/2009/07/28/reinventing-drop-down-with-css-jquery.aspx)

# sharepoint-2010 - 使用 Sharepoint 中的自定义控件扩展页面属性

> ID：11207228
> 
> 赞同：0
> 
> 时间：2012-06-26T12:21:10.980
> 
> 标签：sharepoint-2010, properties, custom-controls

Sharepoint 在多查询方面非常有限，因为它将信息保存在字符串中。所以我改变了`Elements (MultiLookup-> elementIds`propertyPage 上的 Page-Property ""

到插入的列表“PageElements”：“

> (SingleLookup)pageId , (singleLookup) elementId"

因为这对于我的内容管理员来说很难维护，所以我希望他们可以像以前一样在页面属性中输入该信息，而不是在“PageElements”中添加行

因此，我想添加一个处理该问题的控件。

我**不需要**解决如何实现该特定功能的任务，*而是*一般提示如何将*任何*自定义控件添加到 Page 属性中。

我的起点链接会非常好。我似乎没有找到合适的词来向谷歌提供我的主题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T11:51:33.680

通过使用具有该逻辑的自定义字段类型解决了这个问题。在这里基本描述：http: [//avinashkt.blogspot.de/2011/07/creating-custom-field-in-sharepoint.html](http://avinashkt.blogspot.de/2011/07/creating-custom-field-in-sharepoint.html)

# objective-c - 单元格数据不更新

> ID：11207234
> 
> 赞同：0
> 
> 时间：2012-06-26T12:21:42.567
> 
> 标签：objective-c, ios, xcode, xcode4

我正在阅读一些关于编辑数据存储在服务器中的表格单元格的教程。一切正常 - 我可以编辑表格单元格并单击“保存”按钮，但如果我返回表格概览，它不会更新。我有 3 个表字段：

*   标题字段
*   作者字段
*   文本字段

我不知道问题是否来自这段代码，但我想是的。教程示例只有 2 个字段，我需要 3 个字段，但我不知道如何为 3 个文本字段实现这段代码：

```
- (BOOL)textFieldShouldReturn:(UITextField *)textField { 
    [textField resignFirstResponder];
    if (textField == titleField) {
        [authorField becomeFirstResponder];
    }
    if (titleField == authorField) {
        [self save];
    }
    return YES;
} 
```

我已经试过`if (titleField == authorField == atextField)`了，但是错误信息说：`Comparison between pointer and integer ('int' and 'UITextField')`。我也试过`if (titleField == authorField && titleField == atextField && authorField == atextField){`了，我没有收到错误，但这并没有改变数据不会更新更改的事实。

上面的代码应该是什么样子的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T12:29:27.657

那些 IF 没有意义，你不能这样做：

```
if (titleField == authorField == atextField) 
```

因为您将第一个 == 的结果与文本字段进行比较，所以指针和整数之间的比较错误。

在第二个中，

```
if (titleField == authorField && titleField == atextField && authorField == atextField) 
```

这永远不会被调用，因为 titleField 不能同时是 3 个东西。

我的第一个想法是做这样的事情：

```
 if (textField == titleField) {
            [authorField becomeFirstResponder];
        }
    else if ((textField == authorField){
            [atextField becomeFisrtResponder];
     else if (titleField == atextField) {
            [self save];
        } 
```

我认为这就是你想要做的。

# twitter-bootstrap - 带有 Bootstrap 折叠插件的 Javascript 切换

> ID：11207238
> 
> 赞同：9
> 
> 时间：2012-06-26T12:22:02.697
> 
> 标签：twitter-bootstrap, toggle, collapse

我尝试以编程方式使用 Bootstrap 折叠插件的切换功能。当我单击手风琴标题中的链接时，我设法切换了一个 div，但它只工作一次，也就是说我不能再次单击以隐藏 div。

这是我的代码：

```
<div id="accordion" class="accordion">
    <div class="accordion-group">
        <div class="accordion-heading">
            <a id="program${bean.id}" data-parent="#accordion" 
                   class="accordion-toggle">
            ...
            </a>
        </div>
        <div id="collapse${bean.id}" class="accordion-body collapse">
            <div class="accordion-inner">
            ...
        </div>
    </div>
</div> 
```

后来在 JSP 中：

```
$.each($('#accordion a.accordion-toggle'), function(i, link){
    $(link).on('click', 
        function(){
            // ...
            $('#collapse' + id_of_a_bean).collapse({
                toggle : true,
                parent : '#accordion'
            });
            // ...
        }
    )
}); 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-06-26T12:49:04.400

我猜这发生在很多人身上。

当您调用该`collapse`函数（仅供参考或任何引导函数）时，如果您传递一个对象，则意味着您**启动**了折叠。该选项仅*在调用*( [doc](http://twitter.github.com/bootstrap/javascript.html#collapse) )时`toggle`切换一次。

 *您必须使用参数调用一次，然后仅使用操作调用，作为字符串。

```
$.each($('#accordion a.accordion-toggle'), function(i, link){
    var $collapsible = $('#collapse' + id_of_a_bean); // Let's be thorough

    $collapsible.collapse({
        toggle : true, // May not be necessary anymore
        parent : '#accordion'
    });

    $(link).on('click', 
        function(){
            // ...
            $collapsible.collapse('toggle'); // Here is the magic trick
            // ...
        }
    );
}); 
```

现场演示：http: [//jsfiddle.net/Sherbrow/uycBa/](http://jsfiddle.net/Sherbrow/uycBa/)

准确地说，你只能调用一次 init 进程，因为如果你已经在同一个元素上完成了它，它就会中止。这就是为什么它只工作了一次。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-09-19T02:12:02.267

类似的问题，我只是检查元素是否可见：

```
$("#myDiv").is(":visible") ? $("#myDiv").collapse('hide') : /*do nothing*/; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-09-11T15:53:03.177

我发现简单地调用折叠两次，一次使用父项，一次没有，这个技巧非常好 - 由于层次结构，这个解决方案在我的解决方案中更可取。

```
onclick="
$('@("#collapse" + lead.LeadId)').collapse({parent: '#accordion', toggle: true});
$('@("#collapse" + lead.LeadId)').collapse('toggle');" 
```*

# c# - 使用 SQL Server 在 C# 中复制带有额外列的表

> ID：11207239
> 
> 赞同：-5
> 
> 时间：2012-06-26T12:22:03.300
> 
> 标签：c#, sql-server

我有两张表，它们唯一的区别是其中一张表中缺少一列。我从两个单独的数据集中获取表格。我想将所有带有附加列的数据移动到新数据集。

我该如何处理这个操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T12:24:59.317

我建议在 SQL 中执行所有这些操作，并在需要时从 C# 运行语句。

否则循环遍历其中一个结果集并将它们逐行添加到另一个结果集。

SQL：

```
INSERT INTO t1(col1, col2, col3)
SELECT col1, col2, NULL AS col3
FROM t2 
```

或者如果您只想选择结果（不更新表）：

```
SELECT *
   FROM t1

UNION ALL

SELECT *, NULL
   FROM t2 
```

# xcode - Xcode 的代码感知和语法着色仅适用于项目中的某些文件

> ID：11207242
> 
> 赞同：3
> 
> 时间：2012-06-26T12:22:13.297
> 
> 标签：xcode, syntax-highlighting

> **可能重复：**
> [xcode 代码感知颜色/完成不起作用](https://stackoverflow.com/questions/1627033/xcode-code-sense-color-completion-not-working)
> [代码在 Xcode 4 中丢失语法颜色](https://stackoverflow.com/questions/5288697/code-loses-syntax-color-in-xcode-4)

在我的项目中，一些文件有语法着色和补全，但在一些文件（.h 和 .m）中，它不起作用。有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T12:31:28.990

转到您的组织者并在项目选项卡中找到您的项目并单击“删除派生数据”这会强制 XCode 重新索引所有内容并且不会伤害任何内容。它通常对我有用，尽管有时 XCode 很麻烦。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T12:44:31.157

这些文件要么是新创建的文件，而您在将它们添加到项目时忘记将它们添加到目标（您的应用程序的目标）中，要么是 Xcode 通常的索引问题。

对于案例 1：

选择其中一个未编制索引的文件并打开文件检查器。在目标成员下方，选中您的目标框。清洁和建造。重新启动 Xcode 不会受到伤害。

对于案例 2：

请参阅丹克里克的[回答](https://stackoverflow.com/a/11207396/692507)。

# c# - WCF Percall 模式和线程静态变量

> ID：11207243
> 
> 赞同：1
> 
> 时间：2012-06-26T12:22:14.933
> 
> 标签：c#, .net, wcf, c#-4.0

我们有多个 WCF 服务都使用 InstanceContextMode=PerCall 并且所有 WCF 服务实例都是通过使用 Unity (IOC) 和实现 IInstanceProvider 生成的。

相关标识符用于审计具有相同标识符的所有方法调用和数据库进程。

为了实现这一点，通过实现 IDispatchBehavior 来创建端点行为，并在 AfterReceiveRequest 方法中生成 guid 并将其分配给 ThreadStatic ( `CommonData`) 属性。此属性可以在应用程序的所有层中访问。以下代码块显示了 CommonData 的填充和 CommonData 类；

```
public object AfterReceiveRequest(ref Message request, IClientChannel channel, InstanceContext instanceContext)
        {
            CommonData.ClearDictionary();
            //the lines between are deleted as they are not relevant to the question

            CommonData.Current.Add(MessageHeaderCodes.CorrelationId, Guid.NewGuid().ToString());    
            return null;
        } 
```

和 commondata 类：

```
public class CommonData
    {            
        [ThreadStatic]
        private static Dictionary<string, string> headerData;    

        public static Dictionary<string, string> Current
        {
            get
            {
                if (headerData == null)
                {
                    headerData = new Dictionary<string, string>();
                }
                return headerData;
            }            
        }

        private CommonData()
        {

        }

        public static string GetHeader(string header)
        {
            string headerValue = string.Empty;
            KeyValuePair<string, string> headerKeyValuePair = CommonData.Current.SingleOrDefault(p => p.Key == header);
            headerValue = headerKeyValuePair.Value;
            return headerValue;
        }

        public static void ClearDictionary()
        {
            Current.Clear();
        }
    } 
```

这里的问题如下；在某些服务中，开发人员报告相关标识符返回 null。由于问题是间歇性的，目前不可能有完整的堆栈跟踪。此外，他们表示重置 IIS 可以暂时解决此问题。

任何帮助表示赞赏...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T12:57:13.563

这并不能真正回答您的问题，并且会成为评论，除非我想要一些代码...

我对您的 GetHeader 方法感到困惑。你为什么要`.FirstOrDefault()`在字典上做一个 Linq，而不仅仅是：

```
public static string GetHeader(string header)
{
    if(CommonData.Current.ContainsKey(header))
        return CommonData.Current[header];
    return null;
} 
```

* * *

除此之外，我实际上没有看到您的代码有任何问题。我很好奇开发人员从哪里获得空标识符。他们当然必须确保他们在调用调度程序的同一线程上。如果在任何地方使用任何异步进程或 ThreadPool 在另一个线程上运行某些东西，则 [ThreadStatic] 将不存在。

有一次我（非常愚蠢地）`[ThreadStatic]`从一个由终结器调用的方法中引用了我的变量，该方法在 GC 线程上运行，所以我的线程静态始终为空。哎呀:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T13:50:21.337

几件事：首先，您的 Threadstatic 值创建由 ThreadLocal 更好地实现。每当您需要初始化 threadstatic 字段时，基本上就是这种情况。利用

```
private static ThreadStatic<Dictionary<string, string>> headerData = new ThreadStatic<Dictionary<string, string>>(() => new Dictionary<string, string>()); 
```

其次，为了从字典中获取值，您正在寻找的是 TryGetValue 方法。即不是 Contains-Get 对（因为它不需要两次哈希查找），当然也不是 SingleOrDefault。

第三，要拥有一个可靠的 ID 来识别一次服务调用中发生的任何事情，只需将其作为所有后续方法调用的参数之一即可。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-07T10:49:09.340

正如 Blam 建议的那样，我使用 OperationContext.Current 通过编写扩展来存储自定义对象。下面是扩展：

```
public class OperationContextExtension : IExtension<OperationContext>
{
    public void Attach(OperationContext owner)
    {
        this.Current = new Dictionary<string, string>();
    }

    public void Detach(OperationContext owner)
    {
        this.Current = null;
    }

    public Dictionary<string,string> Current { get; set; }
} 
```

另一方面，我必须向域对象添加 System.ServiceModel 引用。虽然它似乎不是一个正确的方式，因为域对象可以访问服务层，但它解决了我的问题。

# php - 使用 Wordpress plugins_url 函数给出 403 禁止错误

> ID：11207244
> 
> 赞同：0
> 
> 时间：2012-06-26T12:22:15.963
> 
> 标签：php, wordpress, file-get-contents

我正在编写一个插件并试图获取文本文件的内容。这是有效的：

```
$ipn_log = WP_PLUGIN_DIR."/plugin-folder/filename.txt"; 
$log_contents = file_get_contents($ipn_log); 
```

但是，Wordpress Codex 说插件不应该使用`WP_PLUGIN_DIR`，而是使用`plugins_url`函数： http: [//codex.wordpress.org/Determining_Plugin_and_Content_Directories](http://codex.wordpress.org/Determining_Plugin_and_Content_Directories)

所以，我尝试这样做：

```
$ipn_log = plugins_url( 'filename.txt', __FILE__ );
$log_contents = file_get_contents($ipn_log); 
```

当我使用时`plugins_url`，我得到一个 403 禁止错误。知道为什么吗？我不应该`WP_PLUGIN_DIR`这样做吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T14:56:20.857

您的服务器可能不允许使用[_url_fopen](http://www.php.net/manual/en/filesystem.configuration.php#ini.allow-url-fopen)，或者您的 URL 可能没有正确编码。[http://php.net/manual/en/function.file-get-contents.php](http://php.net/manual/en/function.file-get-contents.php)

# python - 使用python向多个用户发送邮件

> ID：11207257
> 
> 赞同：1
> 
> 时间：2012-06-26T12:23:01.923
> 
> 标签：python, email, smtplib, spam-prevention

我最近发现了一个使用 python 发送电子邮件的代码。它仅适用于单个用户，因此我对其进行了修改，以从 txt 文件中获取电子邮件，该文件将电子邮件存储在每一行，然后向他们发送邮件。但是我发现邮件最终进入垃圾邮件文件夹（如果是 Gmail）或垃圾文件夹（如果是 hotmail 或 live）。是否可以更改代码以使邮件进入收件箱而不是被过滤为垃圾邮件？我是不是搞错了什么？

```
import smtplib,sys

server = 'smtp.gmail.com'
port = 587

sender = 'my-username@gmail.com'
subject = 'Gmail SMTP Test'
body = 'blah blah blah'

"Sends an e-mail to the specified recipient."

session = smtplib.SMTP(server, port)

session.ehlo()
session.starttls()
session.ehlo
session.login(sender, 'my-password!')

f = open('emails.txt')
for line in f:
  recipient = line
  print recipient
  headers = ["From: " + sender,
       "Subject: " + subject,
       "To: " + recipient]
  headers = "\r\n".join(headers)
  session.sendmail(sender, recipient, headers + "\r\n\r\n" + body)

f.close()
session.quit() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T12:32:28.340

这是一个非常难的问题，因为垃圾邮件的分类不是你做的。（显然！如果有人可以让他们的消息“不是垃圾邮件”，那么垃圾邮件发送者当然也会这样做。）

如果您正在认真考虑发送大型电子邮件、涉及身份验证服务器等，您应该做很多事情。除非您是专家，否则您应该聘请邮件公司的服务来做这些事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T14:06:55.783

我在使用 PHP 发送电子邮件时遇到了类似的问题，只需更改主题和正文，我就能够将我的电子邮件从垃圾邮件文件夹中取出 - 使它们更有意义且不像测试。

尝试不同的事情——比如“杰克商店的发票”或“向你介绍 Twitter”。或者只是从实际电子邮件中获取主题和正文并将其放入您的测试中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-23T06:36:46.213

是的，有一种方法，但有浪费时间的方法.....

这是您的代码：

放入 sleep 方法并用此代码替换

```
 import smtplib,sys
    import time
    server = 'smtp.gmail.com'
    port = 587

    sender = 'my-username@gmail.com'
    subject = 'Gmail SMTP Test'
    body = 'blah blah blah'

    "Sends an e-mail to the specified recipient."

    session = smtplib.SMTP(server, port)

    session.ehlo()
    session.starttls()
    session.ehlo
    session.login(sender, 'my-password!')

    f = open('emails.txt')
    for line in f:
      recipient = line
      print recipient
      headers = ["From: " + sender,
           "Subject: " + subject,
           "To: " + recipient]
      headers = "\r\n".join(headers)
      session.sendmail(sender, recipient, headers + "\r\n\r\n" + body)
      time.sleep(3)
    f.close()
    session.quit() 
```

如果有任何其他问题评论.... :)

# python - 为创建类中定义的类创建类实例的参考

> ID：11207261
> 
> 赞同：1
> 
> 时间：2012-06-26T12:23:13.233
> 
> 标签：python, class, jython

我有以下结构：

```
class foo(object):
  class bar(object):
    def __init__(self, parent):
      self._parent=parent             #this

    def worker(self):
      return self._parent.name

  def __init__(self, name):
    self.name=name

  def giveNamePointer(self):
    return self.bar(self)             #and this 
```

哪个工作正常，但是我想知道在特殊情况下是否有一种隐式或更简单的方法来获取对创建实例的引用，即创建的实例是在创建类中定义的类。

**编辑**：这对我有帮助吗：[实施描述](http://docs.python.org/reference/datamodel.html#implementing-descriptors)，如果是的话如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T12:30:19.667

不[，显式优于隐式。](http://www.python.org/dev/peps/pep-0020/)

（在另一个类中定义一个类并没有什么特别之处。）

# asp.net-mvc - 从数据库下载 XML 文档

> ID：11207266
> 
> 赞同：0
> 
> 时间：2012-06-26T12:23:30.067
> 
> 标签：asp.net-mvc, asp.net-mvc-3

假设我有一些`XElement element`（我可以从数据库中加载它）。我需要在页面上放置一个链接，以便在单击它后用户可以下载从`element.ToString()`. 在用户单击此链接之前，我不想将此文档保存到文件中。

怎么做？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T12:28:55.940

您可以在将 XML 返回给客户端之前将其保存在服务器上：

```
string file = Server.MapPath("~/somefolder/somefile.xml");
File.WriteAllText(file, element.ToString()); 
```

# java - 从此字符串中获取日期

> ID：11207268
> 
> 赞同：1
> 
> 时间：2012-06-26T12:23:34.623
> 
> 标签：java, date, simpledateformat

我需要从这个字符串中获取一个日期对象：这是一个例子）

```
M-27\nJUN-2012  DayOfWeek-dd\nMONTH-yyyy 
```

不可能？我不知道如何为此使用 simpledateformat .. \n 是一个换行符。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T12:30:53.320

[SimpleDateFormat](http://docs.oracle.com/javase/1.4.2/docs/api/java/text/SimpleDateFormat.html)的文档似乎没有将一周中的几天作为单个字母。我会采用一个子字符串来删除该字母和破折号：

```
27\nJUN-2012 
```

然后我将`dd\nMMM-yyyy`用作您在 SimpleDateFormat 的构造函数中使用的字符串。

这应该完全符合您的要求。由于您将月份中的日期作为数字，因此对于创建日期对象而言，星期几并不重要。如果您真的想知道星期几，请参阅此处：[如何通过特定日期确定星期几？](https://stackoverflow.com/questions/5270272/how-to-determine-day-of-week-by-passing-specific-date)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T12:36:08.990

尝试遵循 SimpleDateFormat：

```
String dateS = "M-27\nJUN-2012";  // your date string
SimpleDateFormat fmt = new SimpleDateFormat("dd\nMMM-yyyy"); // formatter
Date date = fmt.parse(dateS.substring(2));
System.out.println(date); 
```

你真的可以去掉星期几，因为日、月和年定义了这一天。

# vb.net - 本地连接和使用 Visual basic 更改 IP 地址

> ID：11207271
> 
> 赞同：0
> 
> 时间：2012-06-26T12:23:45.733
> 
> 标签：vb.net, vb.net-2010

我需要能够查看当前的本地连接，然后单击要更改的连接，然后使用 Visual Basic 更改内部 IP 地址以及网关和子网掩码。我还没有在网上找到任何有用的信息，我只是想知道 Visual Basic 是否有可能，如果可以的话怎么做.. 任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T12:27:55.143

您可以使用一些 Windows 脚本。它有点乱，但您可以在 VB.Net 中创建脚本，将其写入您的硬盘驱动器，然后执行它。完成后，您可以删除脚本。

这是更改 IP 地址（和其他一些相关字段）的脚本示例：http: [//www.wincert.net/forum/topic/40-change-ip-configuration-via-vb-script/](http://www.wincert.net/forum/topic/40-change-ip-configuration-via-vb-script/)

然后，您将通过调用在 VB.Net 中执行它

```
Process.Start("<The path of your .vbs file here>") 
```

祝你好运。

# php - PHP页面重定向成功否则显示错误

> ID：11207274
> 
> 赞同：0
> 
> 时间：2012-06-26T12:23:52.283
> 
> 标签：php, javascript, mysql, redirect

我有一个 ecrtst.php，它有 3 个输入字段，在提交时 - submit-ecr.php。我需要将数据写入 mysql 表，验证是否没有空白字段。当我提交所有值时它工作正常，成功提交后它会返回到 ecrtst.php，但是当我留下空白字段时，它无法显示错误。

让我知道我们是否可以在 javascript 或 php 中显示错误，然后返回上一页。

**ecrtst.php 文件：**

```
<?php
$dbservertype='mysql';
$servername='localhost';
$dbusername='hitec';
$dbpassword='!@#';
$dbname='hitec';

connecttodb($servername,$dbname,$dbusername,$dbpassword);
function connecttodb($servername,$dbname,$dbuser,$dbpassword)
{
global $link;
$link=mysql_connect ("$servername","$dbuser","$dbpassword");
if(!$link){die("Could not connect to MySQL");}
mysql_select_db("$dbname",$link) or die ("could not open db".mysql_error());
}
//////// End of connecting to database ////////
?>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head id="Head1" runat="server">
<title>ECR</title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<style type="text/css">
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.min.js"></script>
<script type="text/javascript">
    $(function () {
    $("form:not(.filter) :input:visible:enabled:first").focus();
    });
</script>

</head>

<body document.f1.ecrno.focus();">
<table width="100%"  border="0" cellpadding="0" cellspacing="0" bgcolor="#026465">
  <tr>
<td><div align="center"><center class="style6">ECR</center>
<center>

<?php
$rowec=mysql_query("SELECT Ecrno FROM ECRHDR_draft WHERE usr='$user'");
$rowec2=mysql_fetch_assoc($rowec);
$rowec3=$rowec2['Ecrno'];
?>
<form name='f1' id='f1'>
<table width="600" border="0" cellspacing="1" cellpadding="0">
  <tr>
    <td width="60"><span class='style5'>ECR No.</span></td>
    <td width="99"><input name="ecrno" type="text" size="10" maxlength="10" value="<?=$rowec3;?>" onchange="showecr(this.value);"></td>
<?php
$rowarea=mysql_query("SELECT Area FROM ACMAST");
$rowarea2=mysql_fetch_assoc($rowarea);
$rowarea3=$rowarea2['Area'];
?>
    <td width="180"><select name='area' onchange="showarea(this.value);">
    <option value='<?=$rowarea3;?>'> <?=$rowarea3;?> <option>
    <option value='Rajajinagar'>Rajajinagar</option>
    <option value='Jayanagar'>Jayanagar</option>
    <option value='Chennai'>Chennai</option>
    </select></td>
<?php $script_dt = date('d/m/Y'); ?>
<td width="72"><span class='style5'>ECR Date:</span></td>
<td width="189"><input name="ecrdate" type="text" size="10" maxlength="10" value="<?=$script_dt;?>" onchange="showecrdate(this.value);"> <span class='style5'>(d/m/yyyy)</span>        </td>
  </tr>
</table>
<a href="submit-ecr.php" target="_parent" accesskey="s" ><input name="SAVE" type="button" value="SAVE ECR !">
</form>
</center>
</body>
</html> 
```

**提交-ecr.php 文件：**

```
<?php
ob_start();

$con = mysql_connect("localhost","hitec","@#");
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }
mysql_select_db("hitec", $con);

 //-----Checking for blank fields in ECRHDR-draft file. ------------------------//

 $rowexist=mysql_query("select Ecrno from ECRHDR_draft WHERE usr='$user'");
 $data=mysql_fetch_array($rowexist);

  if ($data[Ecrno] <= 0 || $data[Ecrno]='')
  {
  echo "<span class='sty1'><center>DONOT LEAVE EMPTY FIELDS for ECR No.</CENTER><br>    <br></span>";
  echo " <span class='sty1'><center><a href=\"javascript:PreviousPage();\">CLICK HERE TO GO BACK !!!!</a></CENTER></span>";
  }

$URL="http://www.samplesite.info/svga//ecrtst.php";

header('WWW-Authenticate: Negotiate');
header('WWW-Authenticate: NTLM', false);
header ('Location:'.$URL);

mysql_close($con);
ob_flush();?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T12:31:12.367

你在做什么有点古怪。不要回显错误，而是在文件顶部使用 启动 PHP 会话`session_start()`，然后将错误消息存储在会话中，如`$_SESSION['dberror'] = 'You didn\'t fill out all the fields.';`.

重定向后，在其他页面上检查错误`session_start(); if (isset($_SESSION['dberror'])) { echo $_SESSION['dberror']; unset($_SESSION['dberror']); }`。

# c - 函数返回指针数组后的赋值

> ID：11207279
> 
> 赞同：0
> 
> 时间：2012-06-26T12:23:56.177
> 
> 标签：c

这是我感到困惑的代码。如果有人更正了此代码，那会很有帮助吗？

```
 int (*(x)())[2];
int main()
{
   int (*(*y)())[2]=x;

   x();
   return 0;
}

int (*(x)())[2]
{
  int **str;
  str=(int*)malloc(sizeof(int)*2);
  return str;
} 
```

x返回时如何分配指针数组？仅使用malloc解决方案？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T18:16:47.493

目前尚不清楚您要完成什么，因此我将介绍不止一种可能性。

首先，复习一下如何在 C 中读写复杂的声明：

请记住，`()`and`[]`比 unary 具有更高的优先级*，指针数组也是*`*`如此，while`*a[]`是*指向*数组的指针；同样，是*返回指针的函数*，而是*指向函数*的指针。 *`(*a)[]`*`*f()`*`(*f)()`***

 ***当你试图阅读一个毛茸茸的声明时，从最左边的标识符开始，然后记住上面的规则。因此，

```
 int (*(x)())[2]; 
```

读作

```
 x            -- x
       (x)           -- x
       (x)()         -- is a function
      *(x)()         -- returning a pointer
     (*(x)())[2]     -- to a 2-element array
 int (*(x)())[2]     -- of int 
```

在这种情况下，紧挨着的括号`x`是多余的，可以删除：`int (*x())[2];`.

以下是如何编写和使用这样的函数：

```
int (*x())[2]
{
  int (*arr)[2] = malloc(sizeof *arr);  // alternately, you could simply write
  return arr;                           // return malloc(sizeof (int [2]));
}                                       // type of *arr == int [2]

int main(void)
{
  int (*p)[2] = NULL;                   // alternately, you could write
  ...                                   // int (*p)[2] = x();
  p = x();
  ...
  free(p);
} 
```

请注意`arr`，`p`, 和的声明`x()`看起来都一样——它们都符合模式`int (*_)[2];`。 **这很重要**。如果您将一件事声明为`T (*p)[N]`，将另一件事声明为`T **q`，则它们的*类型不同*并且可能不兼容。指向数组的`T`指针与指向 的指针的类型不同`T`。

如果您的目标是创建一个指向返回*函数*的指针数组`int`，那么您的类型将如下所示`int (*f[2])();`，其内容为

```
 f          -- f
      f[2]       -- is a 2-element array
     *f[2]       -- of pointers
    (*f[2])()    -- to functions
int (*f[2])();   -- returning int 
```

这看起来像下面这样：

```
int foo() {...}
int bar() {...}

int main(void)
{
  int (*f[2])() = {foo, bar};
  ...
} 
```

如果你想要一个返回的函数`f`，那就有点棘手了。C 函数不能返回数组类型；它们只能返回指向数组的指针，因此您的函数声明将构建为

```
 g            -- g
        g()          -- is a function
       *g()          -- returning a pointer
      (*g())[2]      -- to a 2-element array
     *(*g())[2]      -- of pointers
    (*(*g())[2])()   -- to functions
int (*(*g())[2])()   -- returning int 
```

这样的野兽会像这样使用：

```
int foo() {...}
int bar() {...}

int (*(*g())[2])()
{
  int (*(*f)[2])() = malloc(sizeof *f);
  (*f)[0] = foo;     // the type of the *expressions* foo and bar
  (*f)[1] = bar;     // is `int (*)()`, or pointer to function
  return f;          // returning int
}

int main(void)
{
  int (*(*p)[2])();
  int x, y;
  ...
  p = g();
  x = (*(*p)[0])();
  y = (*(*p)[1])();
  ...
  free(p);
  ...
} 
```

请注意，您还可以使用替换方法从外向内构建毛茸茸的声明。所以，

```
int x();                   -- x is a function returning int
int (*p)();                -- replace x with (*p) to get a pointer to a function
                                 returning int
int (*a[2])();             -- replace p with a[2] to get an array of pointers 
                                 to functions returning int
int (*(*q)[2])();          -- replace a with (*q) to get a pointer to an array
                                 of pointers to functions returning int
int (*(*g())[2])();        -- replace q with g() to get a function returning
                                 a pointer to an array of pointers to functions
                                 returning int. 
```

相同的结果，不同的路径。我更喜欢第一种方法，但任何一种都应该有效。

许多人建议使用`typedef`以使内容更易于阅读：

```
typedef int ifunc();        // ifunc is a synonym for "function returning int"
typedef ifunc *pifunc;      // pifunc is a synonym for "pointer to function
                            //   returning int
typedef pifunc farr[2];     // farr is a synonym for "2-element array of
                            //   pointer to function returning int
typedef farr *pfarr;        // pfarr is a synonym for "pointer to 2-element
                            //   array of pointer to function returning int

pfarr g() 
{
  pfarr f = malloc(sizeof *f);
  (*f)[0] = foo;
  (*f)[1] = bar;
  return f;
}

int main(void)
{
  pfarr p = g();
  int x, y;
  x = (*(*p)[0])();
  y = (*(*p)[1])();
  ...
} 
```

是的，声明更容易阅读，但声明 of`p`和表达式之间没有联系`(*(*p)[1])()`。你必须回过头`typedefs`来理解*为什么*这个表达式是这样写的，为每个`typedef`.

是的，诸如此类`int (*(*g())[2])()`的声明旨在使您的眼睛呆滞，将所有内容隐藏在 a 后面`typedef`会使情况变得更糟 IMO。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T12:41:11.047

不明白你想做什么，也许这可以帮助

```
#include<stdio.h>      // printf
#include<stdlib.h>     // malloc free

int *x();              // forward declaration because used before definition

int main() {
    int *y=x();        // y is a pointer on int 
    printf ("%d %d\n", y[0], y[1]);
    free(y);           // must call free because dynamic allocation
    return 0;
}

int *x() {
    int *res;
    res=(int*)malloc(sizeof(int)*2);   // dynamic allocation of an array of two int
    // should check res != NULL
    res[0]=10;
    res[1]=20;
    return res;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T12:58:43.680

下面的代码将为您提供一个指向函数的指针数组，并且适用于分配、传递数组的标准过程。

```
#include <stdio.h>
#include <stdlib.h>

typedef int (*XFunc())();

XFunc *x[2]; /* array of XFunc pointers */

int f1()
{
    printf("1\n");
    return 1;
}

int f2()
{
    printf("2\n");
    return 2;
}

int main()
{
    x[0] = (XFunc*)f1;
    x[1] = (XFunc*)f2;

    x[0]();
    x[1]();    

    return 0;
} 
```

上面的指针`x`将指向（固定）数组中的第一个元素，这个指针值是将分配给另一个变量的值。***

# git - 在 git submodule/repository 中只放一个文件

> ID：11207284
> 
> 赞同：4
> 
> 时间：2012-06-26T12:24:02.417
> 
> 标签：git, github

我在 git 源代码存储库中有一个特定文件，其中包含生产设置/密码。我想限制这个文件，以便只有生产团队的成员才能看到它。但是，我想控制它的变化。

我想过在 git 中使用一个子模块，然后限制对新存储库的访问。但是，git 似乎需要子模块的整个子目录，而我只想添加一个特定的文件。作为开发工具工作方式的副作用，我无法为配置文件创建子目录。

谁能给我一些指导，看看是否有办法为这些文件创建几乎与另一个存储库的合并点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-26T13:26:41.107

唯一的方法似乎是编写 git 挂钩来加密您想要保密的部分。否则 git 在 repo 级别处理文件，而不是作为单个实体。

*   检查[这篇关于存储库访问控制](https://wincent.com/wiki/Git_repository_access_control)和[关于更新偏执挂钩的文章](http://git.kernel.org/?p=git/git.git;a=blob;f=contrib/hooks/update-paranoid;hb=HEAD)

# php - PCharts 标注 X 轴

> ID：11207286
> 
> 赞同：0
> 
> 时间：2012-06-26T12:24:15.980
> 
> 标签：php, pchart

是否可以只用最小值和最大值标记 x 轴，而不是在两者之间设置值？

有关我正在绘制的内容的更多信息：我正在绘制大量日期数据集。目前我将它缩放到 0-100 的比例来绘制它。我只想将 0 标记为最低日期，将 100 标记为最高日期。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T12:30:59.167

看着[`setFixedScale()`](http://pchart.sourceforge.net/documentation.php?topic=pChart#)

```
$Test->setFixedScale(0,100,1); 
```

这将显示`0`为最小值，然后显示`100`为最大值

# css - Wordpress 父/子主题未在 ie7+8 中加载 js

> ID：11207290
> 
> 赞同：0
> 
> 时间：2012-06-26T12:24:31.070
> 
> 标签：css, wordpress-theming, media-queries, modernizr

我在对新客户站点进行故障排除时遇到问题。

我正在使用 CSS 媒体查询，但由于某种原因，modernizr/respond.js 不适用于 IE7 和 8——我整个上午都在查看这个问题，但无法修复它。想知道一双新鲜的眼睛是否能发现任何我看不到的东西......？

网站在这里：[http ://cy4or.co.uk](http://cy4or.co.uk)

更新：我想知道这是否与 Wordpress 中的父/子主题有关。以前这个站点使用一个主题，我后来将该主题拆分为父主题和子主题，（我认为）这就是问题开始的时候。

更新 2：它**肯定**与父/子主题有关。只激活了它们的父级，一切正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-28T05:47:21.543

我也遇到了**Respond.js**没有解析我的 WordPress 父/子主题配置中的媒体查询的问题，这涉及`@import`在子 CSS 文件中使用来拉入父主题 CSS。然后我发现根据[Respond.js 文档](https://github.com/scottjehl/Respond)：

> Respond.js 不解析通过 @import 引用的 CSS，也不适用于样式元素中的媒体查询，因为这些样式无法重新请求解析。

由于我使用的是 Sass，因此我的解决方案是 @import *Sass*文件，而不是 CSS 文件：

```
@import '../parent/scss/style.scss'; 
```

这会将父 CSS 编译为子主题中的单个 style.css 文件，并且 Respond.js 会按预期呈现媒体查询。如果您没有使用预处理器或有其他原因加载父 CSS 文件本身，则可以使用`wp_enqueue_style`.

```
function link_parent_theme_style() {
    wp_enqueue_style( 'parent-style', get_template_directory_uri() . '/style.css' );
    wp_enqueue_style( 'child-style', get_stylesheet_uri() );
}
add_action('wp_enqueue_scripts', 'link_parent_theme_style'); 
```

从技术上讲，这个问题应该是“ *Respond.js not working with WordPress parent/child theme* ”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T12:56:00.910

您的页面没有验证，JavaScript 很可能需要一个正确验证的页面才能获得最佳执行机会而不会出错。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T14:18:31.527

所以事实证明这个问题有点棘手。

我正在使用 .less 来编译我的 css，但由于某种原因，在使用 Child 主题并在 style.css 顶部导入父 css 时，它在 ie8 及以下版本中不起作用。

我希望我可以扩展“它不起作用”，但经过 2 天的故障排除后，我真的无法告诉你问题出在哪里。

最后我求助于将子 css 直接添加到标题中，然后是父 css：

```
<link rel="stylesheet" href="http://site.com/wp-content/themes/Parent/style.css">
<link rel="stylesheet" href="http://site.com/wp-content/themes/Child/style.css"> 
```

这对我有用，我知道这并不理想，但我可以忍受。如果有人对使用 .less 应用程序成功编译子主题和父主题 css 有任何了解，我想知道。

# android - 选项卡主机和多个活动（UINavigationController 等效）

> ID：11207291
> 
> 赞同：1
> 
> 时间：2012-06-26T12:24:34.830
> 
> 标签：android, android-activity, uinavigationcontroller, android-tabhost

我目前正在将 iOS 应用程序移植到 Android

iOS 应用使用标签栏 + 导航控制器（在每个标签内）加载多个视图

我想在 Android 上保持相同的设计，但我有点困惑

我尝试“startActivityForResult”来加载 TabHost 被删除的另一个活动

我也尝试用 setContentView 替换视图，我正在工作，但是由于某些选项卡需要超过 10 个子屏幕，代码会非常优雅。

所以我正在寻找一种解决方案，在同一个选项卡中加载另一个 Activity，并使用类似 UINavigationController 的功能

例如：如果我有三个选项卡 A、B、C，在选项卡上 AI 可以在按下某个按钮的同时转到 A1，如果我按下返回按钮，我希望显示 A

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T12:33:01.037

您可以使用**Fragment**或**ActivityGroup**。

Fragment 是不推荐使用 ActivityGroup 的最新解决方案。

你可以参考：

*   活动组 =>[这个](http://www.jtben.com/document/695851)，[这个](https://stackoverflow.com/questions/1306689/launching-activities-within-a-tab-in-android)，[这个](https://stackoverflow.com/questions/5856795/how-to-handle-android-tabhost-tab-with-multiple-activities-within-single-tab)，[这个](http://web.archive.org/web/20100816175634/http://blog.henriklarsentoft.com/2010/07/android-tabactivity-nested-activities/)
*   片段 =>[这个](http://android.codeandmagic.org/2011/07/android-tabs-with-fragments/)，[这个](https://stackoverflow.com/questions/6987334/tabs-in-android-using-fragments)

# algorithm - 在类或对象中（在 Scala 中）编写算法有什么缺点？

> ID：11207293
> 
> 赞同：4
> 
> 时间：2012-06-26T12:24:42.470
> 
> 标签：algorithm, class, scala, object

```
class A {
  def algorithmImplementation (...) = { ... }
}

object A {
  def algorithmImplementation (...) = { ... }
} 
```

应该在哪些情况下`class`使用以及应该在哪些情况下`object`使用（用于实现算法，例如 Dijkstra-Algorithm，如上所示）？

做出此类决定时应考虑哪些标准？

目前，我真的看不出使用 a`class`有什么好处。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-26T13:40:45.320

如果您只有一个实现，这在很大程度上可能是一个判断电话。你提到了 Dijkstra 的算法，它在图上运行。现在您可以编写该算法以将图形对象作为显式参数。在这种情况下，该算法可能会出现在 Graph 单例对象中。然后它可能被称为 Graph.shortestPath(myGraph,fromNode,toNode)。

或者您可以在 Graph 类中编写算法，在这种情况下，它不再将图形作为显式参数。现在它被称为 myGraph.shortestPath(fromNode,toNode)。

当有一个主要参数（例如，图形）时，后一种情况可能更有意义，尤其是作为算法的一种上下文的参数。但这可能归结为您喜欢哪种语法。

However, if you have multiple implementations, the balance tips more toward the class approach, especially when the choice of which implementation is better depends on the choice of representation. 例如，您可能有两种不同的 shortestPath 实现，一种在邻接矩阵上效果更好，另一种在邻接列表上效果更好。使用类方法，您可以轻松地为两种不同的表示形式创建两个不同的图类，并且每个类都可以有自己的最短路径实现。然后，当您调用 myGraph.shortestPath(fromNode,toNode) 时，您会自动获得正确的实现，即使您不知道 myGraph 是使用邻接矩阵还是邻接列表。（这就是 OO 的重点。）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-26T13:48:37.810

类可以有覆盖实现的子类，对象不能被子类化。类也可以是类型参数，而对象不能。

该对象只有一个实例，或者每个容器至少有一个实例。一个类有多个实例。这意味着可以使用值对类进行参数化

```
class A(param1 : int, param2 : int) {
    def algorithmImplementation(arg : List[String]) = // use arg and params
} 
```

这可以像这样重复使用

```
val A42_13 = new A(42, 13)
val result1 = A42_13.algorithmImplementation(List("hello", "world"))
val result2 = A42_13.algorithmImplementation(List("goodbye", "cruel", "world")) 
```

将所有这些与您的 Djikstra 算法示例相关联：假设您想要编写一个可跨多种节点类型重用的算法实现。然后，您可能希望按节点类型、用于测量距离的度量类型以及用于计算距离的函数进行参数化。

```
val Djikstra[Node, Metric <: Comparable[Metric]](distance : (Node, Node) => Metric) {
    def compute(node : Node, nodes : Seq[Node]) : Seq[Metric] = {...}
} 
```

您为程序中使用的每种不同类型的节点/度量/距离函数创建一个 Djikstra 实例，并重用该实例，而无需在每次计算 Djikstra 时传递所有这些信息。

总之，类更灵活。当您需要灵活性时使用它们。否则对象很好。

# python - 如何从 python 访问 clearquest oracle 数据库？

> ID：11207296
> 
> 赞同：0
> 
> 时间：2012-06-26T12:24:45.507
> 
> 标签：python, oracle, clearquest

在工作中我们必须使用 ClearQuest。最近我有必要进行一些“复杂”的查询，我发现使用 CQ 查询编辑器非常困难。

我曾考虑使用 python 直接连接到数据库并进行自己的查询，以便我可以自动运行脚本，但我无法连接到数据库。

我已经按照这个答案的提示[https://stackoverflow.com/a/1870849/156459](https://stackoverflow.com/a/1870849/156459)

但没有任何成功。

我已经将 cx_Oracle.makedsn 返回值与 CQ 客户端为 windows 发送的返回值进行了比较，两者都是相等的。

我得到的错误是 "ORA-01017: Invalid username/password; login denied" 。我已经仔细检查了用户和密码并且是正确的。

我在运行我的脚本时捕获了 oracle 服务器和我的计算机之间的 TSN 数据包，我看到了一些对我来说罕见的东西：我的计算机请求连接，服务器回答 Accept ...

任何帮助都会（非常）受欢迎。

谢谢你的时间！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-30T13:45:48.290

检查您的密码是否包含任何需要转义的字符。

[![转义字符](../Images/2b039bd5963c21ab682a734a181f8de3.png "单击以导航到源。")](http://www.robvanderwoude.com/escapechars.php)

# c# - 将数据集导出到excel时如何使标题字体加粗？

> ID：11207297
> 
> 赞同：5
> 
> 时间：2012-06-26T12:24:49.807
> 
> 标签：c#, asp.net, export-to-excel, htmlwriter

在这里，我将数据集中的数据表导出到 excel。如何使单独的数据表的标题字体看起来很粗体。这是我的代码

```
HttpContext.Current.Response.Clear();
HttpContext.Current.Response.AddHeader("content-disposition", "attachment;filename=" + fileName + "");
HttpContext.Current.Response.ContentType = "application/vnd.ms-excel";
StringWriter stringWriter = new StringWriter();
HtmlTextWriter htmlWrite = new HtmlTextWriter(stringWriter);
DataGrid dataExportExcel = new DataGrid();
foreach (DataTable table in dtInputParameters.Tables)
{
   dataExportExcel.DataSource =  table;
   dataExportExcel.DataBind();
   dataExportExcel.RenderControl(htmlWrite);
   htmlWrite.WriteLine("<br/>");
   // htmlWrite.AddStyleAttribute(System.Web.UI.HtmlTextWriterStyle.FontWeight, "bold");
}
StringBuilder sbResponseString = new StringBuilder();
sbResponseString.Append("<html xmlns:v=\"urn:schemas-microsoft-com:vml\" xmlns:o=\"urn:schemas-microsoft-com:office:office\" xmlns:x=\"urn:schemas-microsoft-com:office:excel\" xmlns=\"http://www.w3.org/TR/REC-html40\"> <head><meta http-equiv=\"Content-Type\" content=\"text/html;charset=windows-1252\"><!--[if gte mso 9]><xml><x:ExcelWorkbook><x:ExcelWorksheets><x:ExcelWorksheet><x:Name>" + worksheetName + "</x:Name><x:WorksheetOptions><x:Panes></x:Panes></x:WorksheetOptions></x:ExcelWorksheet></x:ExcelWorksheets></x:ExcelWorkbook></xml><![endif]--></head> <body>");
sbResponseString.Append(stringWriter + "<table width='800' height='100' align='center' style='text-align:center'");
sbResponseString.Append("</table></body></html>");
HttpContext.Current.Response.Write(sbResponseString.ToString());
HttpContext.Current.Response.End(); 
```

有什么建议吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-26T12:34:45.373

您需要在 DataGrid 上设置 HeaderStyle 以使用粗体。就这样。

```
dataExportExcel.HeaderStyle.Font.Bold=true; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-05T09:19:43.550

```
Cursor.Current = Cursors.WaitCursor;
        try
        {
            SaveFileDialog sfd = new SaveFileDialog();
            sfd.FileName = "Total Expiry Inventories Data ";
            sfd.DefaultExt = "xls";
            sfd.Filter = "xlsx files(*.xlsx)|*.xlsx";
            if (sfd.ShowDialog() != System.Windows.Forms.DialogResult.OK)
            {
                return;
            }

            Excel.Application ExcelApp = new Excel.Application();
            Excel.Workbook workbook = ExcelApp.Workbooks.Add(Excel.XlWBATemplate.xlWBATWorksheet);
            Excel.Worksheet worksheet1 = (Excel.Worksheet)workbook.Worksheets[1];
            worksheet1.Name = "Expiry Data";
            for (int i = 1; i < GrdViewData.Columns.Count + 1; i++)
            {
                worksheet1.Cells[1, i] = GrdViewData.Columns[i - 1].HeaderText;
                worksheet1.Cells[1, i].Font.Bold = true;

            }
            for (int i = 0; i < GrdViewData.Rows.Count; i++)
            {
                for (int j = 0; j < GrdViewData.Columns.Count; j++)
                {
                    worksheet1.Cells[i + 2, j + 1] = GrdViewData.Rows[i].Cells[j].Value.ToString();
                }
            }
            worksheet1.Rows.Font.Size = 12;
            //  Excel.Range range_Consolidated = worksheet1.Rows.get_Range("a1", "d1");
            // range_Consolidated.Font.Bold = true;

            // range_Consolidated.Font.Italic = true;

            string ExcelFileName = sfd.FileName;
            workbook.SaveAs(ExcelFileName);
            workbook.Close(false, ExcelFileName, Missing.Value);
            ExcelApp.Quit();

            ExcelApp = null;
            GC.Collect();
            GC.WaitForPendingFinalizers();
            MessageBox.Show("File Saved! you can open it from\n  '" + sfd.FileName + "'", "EXPORT", MessageBoxButtons.OK, MessageBoxIcon.Information);
        }

        catch (Exception ex)
        {
            MessageBox.Show(ex.Message);
        }
        finally
        {
        } 
```

# ipad - iPad UINavigationbar 默认颜色？

> ID：11207298
> 
> 赞同：1
> 
> 时间：2012-06-26T12:24:59.020
> 
> 标签：ipad, uinavigationbar, rgb, uinavigationitem

有谁知道 iPad 导航项的默认颜色（以 rgb 为单位）？我正在构建一个通用应用程序，并希望导航栏具有相同的颜色。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T07:20:06.333

我有点晚了，但你为什么不在模拟器上启动你的应用程序并截图呢？然后你可以从图像中获取颜色。这是我用模拟器得到的灰色：

```
R: 113 G: 120 B: 128
HEX: #717880 
```

# python - 如何在 django 中使用 url 模式搜索字符串？

> ID：11207302
> 
> 赞同：4
> 
> 时间：2012-06-26T12:25:06.213
> 
> 标签：python, django

我想为每个创建的帐户创建一个个人资料页面。创建后，可以像访问用户配置文件一样

[http://example.com/username](http://example.com/username)

但在创建之前，我应该验证该 url 已经可用并且未被现有的 url 模式采用。例如：会有一个类似的页面

[http://example.com/about](http://example.com/about)

现在“关于”不是一个有效的用户。但它是一个有效的 url 模式。我应该能够防止创建名称为“about”的用户。为此，除了检查具有该名称的用户是否已经存在之外，我还需要检查 url 模式。这该怎么做？

一个简单的方法是为个人资料页面设置一个如下的 url 模式： [http ://example.com/user/username](http://example.com/user/username)

**但我强烈要求拥有如下 [http://example.com/username的个人资料页面](http://example.com/username)**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T12:34:15.327

您可以简单地尝试将地址解析为视图：

```
from django.core.urlresolvers import resolve
from myapp.views import user_profile_view

try:
    my_view = resolve("/%s/" % user_name)
    if my_view == user_profile_view:
        # We match the user_profile_view, so that's OK.
    else:
        # oops, we have another view that is mapped on that URL
    # you already have something mapped on this address
except:
    # app doesn't have such path 
```

编辑：

您还可以通过其他方式进行检查：

```
def user_profile_view(request, user_name):
    # some code here

user_profile_view.name = "User Profile View" 
```

然后上面的检查可能是：

```
if getattr(my_view, "name", None) == "User Profile View":
    ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T12:45:35.040

您可以添加自定义表单字段验证。看看这个帖子。 [Django 和自定义表单验证](https://stackoverflow.com/questions/489252/django-and-custom-form-validation)

`raise forms.ValidationError(u'please choose another username')` 检查并提出错误。

或者您可以尝试将以下内容设置为您的用户的 url， `example.com/user/<username>/`

**编辑 1：** [您可以将其用作所有无效用户名的列表](http://www.quora.com/How-do-sites-prevent-vanity-URLs-from-colliding-with-future-features?__snids__=4909005)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T13:03:57.670

我不认为你可以用`django.core.urlresolvers.resolve`. 请注意，它只检查固定 url 的模式，而不是 url 的可变部分。在您的情况下，您很可能将“用户名”作为传递给视图的可变参数。此模式也将匹配不存在的用户名。所以检查模式不是很好的解决方案。

更好的方法是分离出不同命名空间中的静态页面或其他页面。例如[http://example.com/static/about](http://example.com/static/about)

或者您可以为您的站点设置预定义的关键字/保留字词，例如 [“关于”，...]，并在创建用户时根据用户名检查它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T13:09:04.810

将您的用户名视图放在 urls.py 的末尾，以便首先检查其他 url 规则。

那么最简单的方法是拥有一个无效用户名列表，这些用户名应该在用户注册验证中使用。

```
def clean_username(self):
    INVALID_USERNAMES = ('about', 'admin', 'register', '...')

    username = self.cleaned_data['username']
    try:
        user = User.objects.get(username=username)
    except User.DoesNotExist:
        pass
    else:
        raise forms.ValidationError(u'%s already exists' % username )

    if username in INVALID_USERNAMES:
        raise forms.ValidationError(u'%s is not a valid username' % username )

    return username 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-26T13:48:47.717

首先，用户名的 url 规则：

```
url(r'^(?P<username>[-\w]+)/$', 'membership.views.profile', name='profile'), 
```

确保用户名不与现有的 url 规则冲突有点困难。

我通常处理这个问题的方法是为 url 添加唯一性：

```
url(r'^user/(?P<username>[-\w]+)/$', 'membership.views.profile', name='profile'), 
```

如果您绝对必须让配置文件的 url 以用户名开头，那么您可以尝试使用以下方法获取 url：[https](https://stackoverflow.com/a/2094270/884453) ://stackoverflow.com/a/2094270/884453然后确保用户名都是唯一的针对其他用户名和路由

# 编辑

在我写这篇文章的时候，有人发布了一个很酷的想法，让验证器变得更有意义。

用来`from django.core.urlresolvers import resolve`检查它的唯一性是一个很好的解决方案

```
from django.core.exceptions import ValidationError
from django.core.urlresolvers import resolve

def validate_unique_resolve(value):
    urlroute = True
    try:
        urlroute = resolve(path, urlconf)
    except urlresolvers.Resolver404:
        urlroute = False

    if urlroute != False :
        raise ValidationError(u'%s is a reserved url pattern' % value) 
```

# entity-framework - 如何避免每次都生成数据库表

> ID：11207307
> 
> 赞同：0
> 
> 时间：2012-06-26T12:25:32.797
> 
> 标签：entity-framework, entity-framework-4.1

我正在使用 MVC 3。我使用模型优先方法。

我在模型文件夹中创建了产品实体。其中包含

```
ProductID
Name ---properties. 
```

然后，我从该模型创建 SQL 表，它完美地生成了 SQL 表。（我右键单击模型图像并选择“从模型生成数据库...”选项，然后弹出包含所有数据库脚本的 SQL 窗口并执行它。）

现在问题来了，如果我想对该模型进行更改。我每次都必须重新创建表，所以我的数据会丢失。是否每次更改模型时都必须生成SQL表？

如何避免？

# hadoop - 在使用 MapReduce 执行字数统计时，是否可以在 map 函数中将数据拆分为单词？

> ID：11207316
> 
> 赞同：1
> 
> 时间：2012-06-26T12:26:10.440
> 
> 标签：hadoop, mapreduce

我找到了完成此操作的大量文档和示例，但我认为如果在 map() 函数中完成拆分，这将无法利用分布式系统的强大功能。

我在这个分析中正确吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T13:46:23.003

输入文件被拆分并分布在整个服务器集上，允许并行执行映射。您还希望利用映射输出的分区来实现将每个单词的计数收集到一个服务器（分区）所需的排序。通过这种方式，单词的实际计数也可以并行进行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T07:51:45.047

你是对的，在[WordCount 示例](http://hadoop.apache.org/common/docs/r0.20.2/mapred_tutorial.html#Example%3a+WordCount+v1.0)中，`Mapper`有一些工作要做：对于他提供的每一行，他必须将其拆分为单词并将它们作为键值对发出。

但是您还必须注意，并行化的第一步`Mapper`甚至在开始之前就已经完成：（[`TextInputFormat`](http://hadoop.apache.org/common/docs/current/api/org/apache/hadoop/mapred/TextInputFormat.html)在示例中明确提到）将输入文件拆分为行。然后将这些包分发到不同`Mappers`的地方 - 并行！

实现“`Mappers`业务逻辑”，即将这些行拆分为单词。对我来说这很好。作为替代方案，您可以实现自己的[`FileInputFormat`](http://hadoop.apache.org/common/docs/current/api/org/apache/hadoop/mapred/FileInputFormat.html)（或者扩展`TextInputFormat`），它不仅可以逐行拆分输入，还可以逐字拆分。这也是有效的，但是您唯一要做的`Mapper`就是获取输入值并将其作为输出键以及“1”作为输出值发出。你更喜欢后者吗？

***答案是：**据`InputFormat`我所知，它并没有并行运行。但是`Mappers`做。`Mappers`所以对我来说，由许多人负责标记化而不是一个单一的班级听起来更好`InputFormat`。*

[本教程](http://developer.yahoo.com/hadoop/tutorial/module4.html#closer)很好地描述了 Hadoop 和 MapReduce 的内部结构。在`InputSplits`他们说的段落中：

> 通过分块处理文件，我们允许多个映射任务并行操作单个文件。如果文件非常大，这可以通过并行性显着提高性能。

我希望这可以帮到你 ：-）

# c++ - 用于选择机器组的数据结构

> ID：11207319
> 
> 赞同：10
> 
> 时间：2012-06-26T12:26:20.363
> 
> 标签：c++, algorithm, data-structures, software-design

我有这个旧的批处理系统。调度程序将所有计算节点存储在一个大数组中。现在大部分都可以了，因为大多数查询都可以通过过滤满足查询的节点来解决。

我现在遇到的问题是，除了一些基本属性（cpu 数量、内存、操作系统）之外，还有这些奇怪的分组属性（城市、infiniband、网络暂存）。

现在这些问题是，当用户请求具有 infiniband 的节点时，我不能只给他任何节点，但我必须给他连接到一个 infiniband 交换机的节点，以便节点实际上可以使用 infiniband 进行通信。

这仍然可以，当用户只请求一个这样的属性时（我可以为每个属性分区数组，然后尝试分别选择每个分区中的节点）。

问题来自于组合多个这样的属性，因为那样我将不得不生成子集（主数组的分区）的所有组合。

好消息是大多数属性都处于子集或等价关系中（对于一个 infiniband 交换机上的机器在一个城市中是有意义的）。但不幸的是，这并不完全正确。

是否有一些好的数据结构来存储这种半分层的大部分树状的东西？

***编辑：示例***

```
node1 : city=city1, infiniband=switch03, networkfs=server01
node2 : city=city1, infiniband=switch03, networkfs=server01
node3 : city=city1, infiniband=switch03
node4 : city=city1, infiniband=switch03
node5 : city=city2, infiniband=switch03, networkfs=server02
node6 : city=city2, infiniband=switch03, networkfs=server02
node7 : city=city2, infiniband=switch04, networkfs=server02
node8 : city=city2, infiniband=switch04, networkfs=server02 
```

用户要求：

```
2x node with infiniband and networkfs 
```

所需的输出将是：`(node1, node2)`或`(node5,node6)`或`(node7,node8)`。

在一个好的情况下，这个例子不会发生，但在某些情况下，我们实际上有这些奇怪的跨站点连接。如果 in 中的节点`city2`都在 infiniband 上`switch04`，那将很容易。不幸的是，现在我必须生成具有相同 infiniband 交换机和相同网络文件系统的节点组。

实际上问题要复杂得多，因为用户不需要请求整个节点，而且属性很多。

编辑：为查询添加了所需的输出。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T13:40:33.660

假设您有 p 个分组属性和 n 个机器，基于存储桶的解决方案是最容易设置的，并且提供 O(2 ^p ·log(n)) 访问和更新。

*   您为每组属性创建一个桶堆（因此您将有一个用于“infiniband”的桶堆，一个用于“networkfs”的桶堆和一个用于“infiniband × networkfs”的桶堆）——这意味着 2 ^p桶堆。
*   每个桶堆包含一个用于每个值组合的桶（因此“infiniband”桶将包含一个用于键“switch04”的桶和一个用于键“switch03”的桶） - 这意味着总共最多 n·2 ^p个桶拆分跨越所有桶堆。
*   每个存储桶都是服务器列表（可能分为可用和不可用）。bucket-heap 是一个标准堆（请参阅 参考资料`std::make_heap`），其中每个桶的值是该桶中可用服务器的数量。
*   每个服务器都存储对包含它的所有存储桶的引用。
*   当您查找与某个属性组匹配的服务器时，您只需在该属性组的相应存储桶中查找，然后沿着堆向下查找一个足够大的存储桶以容纳所请求的服务器数量。这需要 O(log(p)·log(n))。
*   当服务器被标记为可用或不可用时，您必须更新包含这些服务器的所有存储桶，然后更新包含这些存储桶的存储桶堆。这是一个 O(2 ^p ·log(n)) 操作。

如果您发现自己拥有太多属性（并且 2 ^p变得失控），该算法允许从其他桶堆按需构建一些桶堆：如果用户请求“infiniband × networkfs”但您只有一个可用于“infiniband”或“networkfs”的桶堆，您可以将“infiniband”桶堆中的每个桶单独变成一个桶堆（使用惰性算法，因此您不必处理如果第一个有效，则所有存储桶）并使用惰性堆合并算法找到合适的存储桶。然后，您可以使用 LRU 缓存来决定存储哪些属性组以及按需构建哪些属性组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T13:35:48.707

我的猜测是，不会有一个“简单、高效”的算法和数据结构来解决这个问题，因为你所做的类似于*求解一组联立方程*。假设总共有 10 个类别（如和） `city`，并且用户为其中的 3 个指定了所需的值。假设用户要求 5 个节点。然后，您的任务是推断剩余 7 个类别的值，以便至少存在 5 个记录，其所有 10 个类别字段都等于这些值（指定的 3 个和推断的 7 个）。可能有多种解决方案。`infiniband``network`

尽管如此，只要没有太多不同的类别，并且每个类别中没有太多不同的可能性，您可以进行简单的暴力递归搜索以找到可能的解决方案，在每个递归级别您考虑一个特定类别，并且“尝试”每一种可能性。假设用户要求记录，并且可以通过、等`k`选择规定任意数量的要求：`required_city``required_infiniband`

```
either(x, y) := if defined(x) then [x] else y

For each city c in either(required_city, [city1, city2]):
  For each infiniband i in either(required_infiniband, [switch03, switch04]):
    For each networkfs nfs in either(required_nfs, [undefined, server01, server02]):
      Do at least k records of type [c, i, nfs] exist?  If so, return them. 
```

该`either()`函数只是一种将搜索限制在包含用户为其提供约束的点的子空间的方法。

基于此，您将需要一种方法来快速查找任何给定`[c, i, nfs]`组合的点（行）数——嵌套哈希表可以很好地解决这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T13:56:29.307

第 1 步：为每个属性创建一个索引。例如，对于每个属性+值对，创建具有该属性的节点的排序列表。将每个这样的列表放入某种关联数组中 - 这类似于 stl 映射，每个属性一个，由值索引。这样，当您完成后，您将拥有一个近乎恒定的时间函数，该函数可以向您返回与单个属性+值对匹配的节点列表。该列表仅按节点编号排序。

第 2 步：给定一个查询，对于所需的每个属性+值对，检索节点列表。

第 3 步：从最短的列表开始，将其称为列表 0，将其与其他每个列表进行比较，依次从列表 0 中删除不在其他列表中的元素。

您现在应该只拥有具有请求的所有属性的节点。

您的另一个选择是使用数据库，它已经设置为支持这样的查询。它可以通过带有 SQL 扩展的 BerkeleyDB 之类的东西在内存中完成。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-26T14:16:50.800

如果按查询中提到的每个标准对列表进行排序是可行的（或者让列表按每个相关标准预先排序），那么这非常有效。

“相对标准”是指不是“x 必须为 5”形式的标准，过滤起来很简单，但“x 必须与结果集中的每个项目相同”形式的标准。如果还有“x 必须为 5”形式的条件，则首先过滤这些条件，然后执行以下操作。

它依赖于对多个列使用稳定的排序来快速找到匹配的组（无需尝试组合）。

复杂性是节点数 * 查询中的条件数（对于算法本身）+ 节点数 * log（节点数）* 条件数（对于排序，如果不是预排序）。所以节点*日志（节点）*标准。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace bleh
{
    class Program
    {
        static void Main(string[] args)
        {
            List<Node> list = new List<Node>();

            // create a random input list
            Random r = new Random();
            for (int i = 1; i <= 10000; i++)
            {
                Node node = new Node();
                for (char c = 'a'; c <= 'z'; c++) node.Properties[c.ToString()] = (r.Next() % 10 + 1).ToString();
                list.Add(node);
            }

            // if you have any absolute criteria, filter the list first according to it, which is very easy
            // i am sure you know how to do that

            // only look at relative criteria after removing nodes which are eliminated by absolute criteria
            // example 
            List<string> criteria = new List<string> {"c", "h", "r", "x" };
            criteria = criteria.OrderBy(x => x).ToList();

            // order the list by each relative criteria, using a ***STABLE*** sort
            foreach (string s in criteria)
                list = list.OrderBy(x => x.Properties[s]).ToList();

            // size of sought group
            int n = 4;

            // this is the algorithm
            int sectionstart = 0;
            int sectionend = 0;
            for (int i = 1; i < list.Count; i++)
            {
                bool same = true;
                foreach (string s in criteria) if (list[i].Properties[s] != list[sectionstart].Properties[s]) same = false;
                if (same == true) sectionend = i;
                else sectionstart = i;
                if (sectionend - sectionstart == n - 1) break;
            }

            // print the results
            Console.WriteLine("\r\nResult:");
            for (int i = sectionstart; i <= sectionend; i++)
            {
                Console.Write("[" + i.ToString() + "]" + "\t");
                foreach (string s in criteria) Console.Write(list[i].Properties[s] + "\t");
                Console.WriteLine();
            }
            Console.ReadLine();
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-06-26T17:03:07.970

我会做这样的事情（显然你应该将它们映射到int，而不是字符串，并使用int作为代码）

```
struct structNode
{
    std::set<std::string> sMachines;
    std::map<std::string, int> mCodeToIndex;    
    std::vector<structNode> vChilds;        
};

void Fill(std::string strIdMachine, int iIndex, structNode* pNode, std::vector<std::string> &vCodes)
{
    if(iIndex < vCodes.size())
    {           
        // Add "Empty" if Needed
        if(pNode->vChilds.size() == 0)
        {
            pNode->mCodeToIndex.insert(pNode->mCodeToIndex.begin(), make_pair("empty", 0));
            pNode->vChilds.push_back(structNode());
        }

        // Add for "Empty"
        pNode->vChilds[0].sMachines.insert(strIdMachine);
        Fill(strIdMachine, (iIndex + 1), &pNode->vChilds[0], vCodes );

        if(vCodes[iIndex] == "empty")
            return;

        // Add for "Any"        
        std::map<std::string, int>::iterator mIte = pNode->mCodeToIndex.find("any");
        if(mIte == pNode->mCodeToIndex.end())
        {
            mIte = pNode->mCodeToIndex.insert(pNode->mCodeToIndex.begin(), make_pair("any", pNode->vChilds.size()));
            pNode->vChilds.push_back(structNode());     
        }

        pNode->vChilds[mIte->second].sMachines.insert(strIdMachine);
        Fill(strIdMachine, (iIndex + 1), &pNode->vChilds[mIte->second], vCodes );

        // Add for "Segment"
        mIte = pNode->mCodeToIndex.find(vCodes[iIndex]);
        if(mIte == pNode->mCodeToIndex.end())
        {
            mIte = pNode->mCodeToIndex.insert(pNode->mCodeToIndex.begin(), make_pair(vCodes[iIndex], pNode->vChilds.size()));
            pNode->vChilds.push_back(structNode());                 
        }

        pNode->vChilds[mIte->second].sMachines.insert(strIdMachine);
        Fill(strIdMachine, (iIndex + 1), &pNode->vChilds[mIte->second], vCodes );

    }
}

//////////////////////////////////////////////////////////////////////
// Get
//
// NULL on empty group
//////////////////////////////////////////////////////////////////////
set<std::string>* Get(structNode* pNode, int iIndex, vector<std::string> vCodes, int iMinValue)
{       
    if(iIndex < vCodes.size())
    {       
        std::map<std::string, int>::iterator mIte = pNode->mCodeToIndex.find(vCodes[iIndex]);       
        if(mIte != pNode->mCodeToIndex.end())
        {
            if(pNode->vChilds[mIte->second].sMachines.size() < iMinValue)
                return NULL;
            else
                return Get(&pNode->vChilds[mIte->second], (iIndex + 1), vCodes, iMinValue);
        }
        else
            return NULL;        
    }

    return &pNode->sMachines;   
} 
```

用您的样本填充树

```
structNode stRoot;

    const char* dummy[] = { "city1", "switch03", "server01" };  
    const char* dummy2[] = { "city1", "switch03", "empty" };
    const char* dummy3[] = { "city2", "switch03", "server02" };
    const char* dummy4[] = { "city2", "switch04", "server02" };

    // Fill the tree with the sample    
    Fill("node1", 0, &stRoot, vector<std::string>(dummy, dummy + 3));
    Fill("node2", 0, &stRoot, vector<std::string>(dummy, dummy + 3));
    Fill("node3", 0, &stRoot, vector<std::string>(dummy2, dummy2 + 3));
    Fill("node4", 0, &stRoot, vector<std::string>(dummy2, dummy2 + 3));
    Fill("node5", 0, &stRoot, vector<std::string>(dummy3, dummy3 + 3));
    Fill("node6", 0, &stRoot, vector<std::string>(dummy3, dummy3 + 3));
    Fill("node7", 0, &stRoot, vector<std::string>(dummy4, dummy4 + 3));
    Fill("node8", 0, &stRoot, vector<std::string>(dummy4, dummy4 + 3)); 
```

现在您可以轻松获得所需的所有组合，例如您查询的内容如下：

```
vector<std::string> vCodes;
    vCodes.push_back("empty"); // Discard first property (cities)
    vCodes.push_back("any");   // Any value for infiniband
    vCodes.push_back("any");   // Any value for networkfs (except empty)

    set<std::string>* pMachines = Get(&stRoot, 0, vCodes, 2); 
```

例如，只有交换机 03 上的 City02 网络不为空

```
vector<std::string> vCodes;
    vCodes.push_back("city2"); // Only city2
    vCodes.push_back("switch03");   // Only switch03
    vCodes.push_back("any");   // Any value for networkfs (except empy)

    set<std::string>* pMachines = Get(&stRoot, 0, vCodes, 2); 
```

# web-services - 嵌入式 linux 客户端和身份验证

> ID：11207321
> 
> 赞同：0
> 
> 时间：2012-06-26T12:26:25.957
> 
> 标签：web-services, authentication

我需要为运行 linux 的远程设备提出一个方案，以通过 https 将数据推送到 Web 服务。我不确定我想如何处理身份验证。任何人都可以通过在请求本身的正文中包含某种身份验证来查看任何安全风险吗？我正在考虑让请求正文为 JSON，它看起来像这样：

```
{
  'id':'some unique id',
  'password':'my password',
  'data':1234
} 
```

如果 JSON 中的 ID 和密码与我的数据库中的不匹配，则请求将被拒绝。

这有问题吗？有没有更好的方法来确保只有我的客户可以推送数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T12:30:22.770

该方案是原始的，但它有效。

通常首选真正的会话，因为它提供了一些优点：

*   身份验证和请求分离
*   会话中的请求历史记录
*   凭据仅针对多个请求发送一次
*   灵活改变认证策略
*   ...

# asp.net - 在 ASP.NET MVC 3 中以编程方式更改 Web Config 中的自定义错误模式

> ID：11207323
> 
> 赞同：4
> 
> 时间：2012-06-26T12:26:33.763
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, web-config

如何以编程方式更改 web.config 文件中的自定义错误模式？我需要更改以下内容：

```
<?xml version="1.0" encoding="UTF-8"?>
<configuration>
<configSections />

...

<system.web>
....

<customErrors mode="RemoteOnly">
   <error statusCode="404" redirect="~/errors/404" />
</customErrors> 
```

到

```
<customErrors mode="off">
   <error statusCode="404" redirect="~/errors/404" />
</customErrors> 
```

有人对此有任何想法吗？

**更新**

作为**CoDe aDDict 的**回答，我尝试使用它：

```
Configuration config = WebConfigurationManager.OpenWebConfiguration("~");
CustomErrorsSection CustomErrorsection = (CustomErrorsSection)config.GetSection("system.web/customErrors");
CustomErrorsection.Mode = CustomErrorsMode.Off;
config.Save(); 
```

但有一个例外：

```
Access to the path 'D:\Projects\MyProject\web.config' is denied. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T12:31:35.523

[几天前我发现了一个示例，该示例在自定义错误配置中发生了很大变化](http://labs.episerver.com/en/Blogs/Ted-Nyberg/Dates/112276/2/Programmatically-configure-customErrors-redirects/)

```
public static void ConfigureCustomErrors()
    {
        Configuration config = 
        WebConfigurationManager.OpenWebConfiguration("~");

        CustomErrorsSection section = 
            (CustomErrorsSection)config.GetSection(
                "system.web/customErrors");

        //Verify that customErrors exists in web.config
        if (section != null)
        {
            //Only configure if customErrors is enabled 
            if (section.Mode != CustomErrorsMode.Off)
            {
                if(!section.IsReadOnly() && 
                    !section.SectionInformation.IsLocked)
                {
                    //Collection of new redirects to add to 
                    //the customErrors element
                    CustomErrorCollection redirectsToAdd = 
                       new CustomErrorCollection();

                    //Page ID of the page to be used for 
                    //custom error redirects
                    int redirectPageId = 0;

                    //Get existing redirects, if any
                    CustomError redirect404 = 
                        section.Errors["404"];
                    CustomError redirect500 = 
                        section.Errors["500"];

                    //Get URL for 404 redirects
                    int.TryParse(
                        ConfigurationManager.AppSettings[
                             "FileNotFoundPageId"], 
                             out redirectPageId);
                    string fileNotFoundURL = 
                        ToolBox.GetSimpleAddress(
                        DataFactory.Instance.GetPage(
                        new PageReference(redirectPageId));

                    //Get URL for server error redirects
                    int.TryParse(
                        ConfigurationManager.AppSettings[
                        "GenericErrorPageId"], 
                        out redirectPageId);
                    string serverErrorURL = 
                        ToolBox.GetSimpleAddress(
                        DataFactory.Instance.GetPage(
                        new PageReference(redirectPageId)));

                    //If the 404 redirect hasn't been 
                    //specified or if its redirect 
                    //URL is invalid
                    if (fileNotFoundURL!=string.Empty && 
                       (redirect404 == null || 
                       redirect404.Redirect!=
                          fileNotFoundURL))
                    {
                        //Add new 
                        if (redirect404 == null)
                        {
                            CustomError fileNotFoundError = 
                            new CustomError(404,
                            fileNotFoundURL);

                            redirectsToAdd.Add(
                               fileNotFoundError);
                        }
                        else //Modify existing
                        {
                            redirect404.Redirect = 
                                fileNotFoundURL;
                        }
                    }

                    //If the 500 redirect hasn't been 
                    //specified or if its redirect 
                    //URL is invalid
                    if (fileNotFoundURL != string.Empty && 
                        (redirect500 == null || 
                        redirect500.Redirect != 
                           fileNotFoundURL))
                    {
                        //Add new 
                        if (redirect500 == null)
                        {
                            CustomError serverError = 
                            new CustomError(500, 
                            serverErrorURL);

                            redirectsToAdd.Add(serverError);
                        }
                        else //Modify existing redirect
                        {
                            redirect500.Redirect = 
                                serverErrorURL;
                        }
                    }

                    //Add any new redirects
                    foreach (
                        CustomError redirectToAdd in 
                        redirectsToAdd)
                    {
                        section.Errors.Add(redirectToAdd);
                    }

                    //Save web.config if its 
                    //contents have changed
                    config.Save();
                }
            }
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T15:34:52.960

为了更新您的 web.config 文件，运行您的应用程序池的进程/身份将需要对 web.config 文件具有修改（写入）访问权限。您收到错误消息，因为您的应用程序没有写入 web.config 文件的权限。添加适当的权限，并且已说明的内容将毫无例外地起作用。现在说了这么多...

**免责声明**

配置文件驱动您的应用程序，具有应用程序中路径的身份验证/授权信息、用于编码/解码身份验证票证的机器密钥（可能）、SQL 连接字符串等。让您的应用程序可写这些可能是一个令人讨厌的安全问题. 我已作出免责声明。请小心 ：）

# c++ - 如何使用 Visual Basic 创建登录应用程序（使用 WebHttpRequest）

> ID：11207324
> 
> 赞同：0
> 
> 时间：2012-06-26T12:26:35.573
> 
> 标签：c++, vb.net

嘿，我在 C++ 方面一点经验都没有，因为我需要在明年开始在我的大学学习，不过，我一直在创建一个基于浏览器的游戏，我正在寻找将其转换为 pc 应用程序的人.

不过，我想知道如何让该应用程序通过 POST 将 http 请求发送到我的网络服务器上的用户名 / pw 的文件。

在阅读了所有教程之后，我得出结论，没有一个值得花时间阅读，因为它们都基于自己的数据库，我正在寻找一个连接到 maestro 服务器并从那里请求数据的教程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T08:11:40.540

我已经能够找到一个会在 Delphi 中执行此操作的朋友，因为我不希望用户仅为此应用程序下载网络框架。

所以最适合任何应用程序的程序是 Delphi Prism XE（即使它是 Visual Studio 的插件）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T20:32:24.710

这可能不是您正在寻找的答案，但您可以考虑两种替代更纯 C++ 应用程序的方法。

1.  如果您已经有一个可以运行的浏览器游戏，请尝试使用相同的代码并将 html/javascript/whatever 放入一个文件中，并为该文件添加一个“.hta”扩展名。它基本上在浏览器中打开以运行您的文件，但从用户的角度来看，它更像是一个应用程序。（而且，尽管我讨厌 Windows，但如果我可以这么说的话，创建它们非常有趣）。但是，使用此选项的源代码很容易阅读，因为它可以重命名为文本文件（或 html 文件）。

2.  您可以使用 Visual C++（或 VB.net，您已标记到问题，以及“Visual”C#）来创建一个主要由浏览器视图组成的应用程序。它可能是一个“独立”应用程序（但将完全依赖于 .Net 框架 - 可能是您想要的，也可能不是您想要的），它与上面的选项基本完成相同，但补充说您可以“隐藏”您的文件应用。

使用上述两个替代方案，您可以相对快速地创建一个应用程序来加载您的文件，我假设您已经创建了这些文件。请注意，上述替代方案均不适用于 Windows 操作系统以外的任何设备。

如果上述两种选择不是您想要的，或者您对其中任何一种有疑问，我很乐意提供帮助。

# spring-mvc - 结合 mvc:interceptors & mvc:resources 只缓存静态资源

> ID：11207327
> 
> 赞同：3
> 
> 时间：2012-06-26T12:26:58.390
> 
> 标签：spring-mvc

我正在尝试将 Spring MVC 配置为具有以下方案：

*   任何以“{context}/resources”开头的 url 都应该是可缓存的
*   任何其他 url 都不应该是可缓存的（在我的情况下，“资源”的所有内容都是动态页面）

第一部分很容易使用 mvc:resource ：

```
<mvc:resources mapping="/resources/**" location="..." cache-period="3600"/> 
```

我有点迷失了第二部分。默认情况下，“动态资源”似乎没有与缓存相关的信息（没有缓存控制标头、没有编译指示等）。有些浏览器可能会缓存东西（FF），有些可能不会（Chrome），这是可以理解的。

有很多关于如何使用 WebContentInterceptor 和 WebContentInterceptor 的组合来使某些页面可缓存的帖子：

```
<mvc:interceptors>
    <mvc:interceptor>
        <mvc:mapping path="/foobar/**"/>
        <bean id="webContentInterceptor" class="org.springframework.web.servlet.mvc.WebContentInterceptor">
            <property name="cacheSeconds" value="0"/>
            <property name="useExpiresHeader" value="true"/>
            <property name="useCacheControlHeader" value="true"/>
            <property name="useCacheControlNoStore" value="true"/>
        </bean>
    </mvc:interceptor>
</mvc:interceptors> 
```

但是，在我的情况下，这是不可用的，因为我没有要匹配的路径表达式（众所周知，排除是不可能的）。

那么有没有一种方法可以表达这一点： * 做 mvc:resources 为资源做的事情 * 为所有其他页面做“某事”？

我能看到的唯一选择是编写一个自定义拦截器，它会检查某个东西是否是资源，但这听起来有点奇怪，不能全局定义缓存属性。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-21T12:38:11.910

Spring MVC 的行为正是您想要的方式。*WebContentInterceptor仅拦截**文本/html*资源请求并将缓存控制添加到请求中。

对所有 url 执行此操作的方法是将*<mvc:mapping>*排除在配置之外：

```
<mvc:interceptors>
    <bean id="webContentInterceptor" class="org.springframework.web.servlet.mvc.WebContentInterceptor">
        <property name="cacheSeconds" value="0"/>
        <property name="useExpiresHeader" value="true"/>
        <property name="useCacheControlHeader" value="true"/>
        <property name="useCacheControlNoStore" value="true"/>
    </bean>
</mvc:interceptor> 
```

此外，由于*<mvc:interceptors>*和*<mvc:resources>*是独立的，因此这两个标签的任何特定顺序都不重要（与[此处](https://stackoverflow.com/questions/8586880/how-do-i-intercept-requests-of-static-resources-marked-by-mvcresource-tag-in)答案中的建议不同）。

# string - Windows 电话字符串和本地化

> ID：11207328
> 
> 赞同：1
> 
> 时间：2012-06-26T12:27:00.007
> 
> 标签：string, localization, resources, windows-phone

普通的 Windows Phone 设备填充了许多字符串资源 - 例如“设置”，“设置”下方是“位置”等。至少 en-GB UI 语言是这种情况。我想访问设备加载字符串的完整列表，不仅适用于 en-GB，而且适用于每种 UI 支持的语言。也就是说，我正在寻找 en-GB UI 字符串的完整列表，以及它们在全套 UI 支持语言中的并行翻译。谁能帮我找到他们？我需要特殊的 SDK 吗？微软只是在某个地方“发布”它们吗？还是我需要编写一些 C# 来查询电话程序集？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T13:08:44.777

操作系统和本机应用程序使用的字符串不能通过任何公共方法获得。

如果您正在寻找翻译您的应用程序，您需要将上下文中的文本翻译到您使用它的位置。这不是一个直接的复制和粘贴练习。这意味着您不能只是重复使用来自其他来源的翻译。（除非它是完全相同的上下文。）

# c# - 如何强制用户在数据库字段中输入值

> ID：11207332
> 
> 赞同：1
> 
> 时间：2012-06-26T12:27:53.173
> 
> 标签：c#, sql-server, window

使用我的应用程序，我想确保用户在文本框中没有输入任何值，然后单击
保存按钮以在 sqlserver db 中发送数据。数据库端验证可防止这种违规行为并设置我的应用程序将捕获并显示的 ErrorMessage给用户的有意义的信息
。对于每个必填字段，我将其设置为 NOT NULL。但是当我测试时，我仍然可以输入
输入空文本框值，它会被插入而没有值。我错过了什么？

```
string connectionstring = "Data Source=abcdef;Initial Catalog=HMS;Persist Security Info=True;User ID=sysad;Password=abcdef";
        SqlConnection connection = new SqlConnection(connectionstring);

        string SelectStatement = "SELECT * FROM tablename where RegistrationNo = @RegistrationNo";
        SqlCommand insertcommand = new SqlCommand(SelectStatement, connection);
        insertcommand.Parameters.AddWithValue("@RegistrationNo", textBox10.Text);
        SqlDataReader reader;
        try
        {
            connection.Open();
            reader = insertcommand.ExecuteReader();

            while (reader.Read())
            {
                textBox11.Text = reader["RegistrationNo"].ToString();
                textBox1.Text = reader["Appearance"].ToString();
                textBox2.Text = reader["VolumePH"].ToString();
                textBox3.Text = reader["Mobility"].ToString();
                textBox4.Text = reader["Viability"].ToString();
                textBox5.Text = reader["Head"].ToString();
                textBox6.Text = reader["MiddlePiece"].ToString();
                textBox7.Text = reader["Tail"].ToString();
                textBox8.Text = reader["SpermCount"].ToString();
                dateTimePicker1.Text = reader["Date"].ToString();
                textBox9.Text = reader["Comment"].ToString();

            }//end while
            reader.Close();
        }
        catch (Exception ex)
        {
            throw ex;

        }//end catch 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-26T12:30:45.920

> 我错过了什么？

`null`我认为您缺少和空字符串之间的区别。

数据库区分`null`和`empty`。如果你`ToString`成功了，那么你有一个非空字符串，所以 DB 很乐意接受它作为一个有效值。

一般来说，使用 DB 进行用户端验证是有些浪费的：如果知道该字段不能为空，则应在 UI 中检查；数据库验证应作为保持数据模型完整性的最后手段。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T12:33:49.567

您可以在服务器端代码中使用 requiredfield 验证器并进行验证。如果它是空字符串，则返回错误本身。

去 sql server 并抛出错误是不好的。

```
if(txtBox.Text.Trim() == string.Empty)
  //throw "cannot be null error to user; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T12:36:55.583

按下按钮时检查字段可能是个好主意。例子：

```
private void button_Click(object sender, EventArg e){
   if (textbox1.Text == ""){
      MessageBox.Show("Your message to the user");
   }
} 
```

希望能帮助到你

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T12:45:36.040

最好在用户界面中检查用户输入。如果用户必须输入一些值，您应该在尝试将其插入数据库之前对其进行检查。

# django-database - django.db.utils.IntegrityError：（1062，“重复条目'22-add_'键'content_type_id'”）

> ID：11207334
> 
> 赞同：1
> 
> 时间：2012-06-26T12:27:57.627
> 
> 标签：django-database, django-orm

我正在使用 django 多数据库路由器概念，有多个具有不同数据库的站点。基本数据库用户将使用所有其他子站点登录。

当我在基本站点中尝试**同步**数据库时，它可以正常工作（在任何时候），但是尝试**与**其他站点同步数据库只能在第一次工作，如果我们下次继续尝试，它会抛出如下所示的整体错误

*   **django.db.utils.IntegrityError：（1062，“重复条目'22-add_somesame'键'content_type_id'”）**

一旦我删除了该项目中的多个数据库路由器设置，就意味着 syncdb 可以正常工作（在任何时候）。

那么这与多个数据库路由器有关吗？还是什么？

请哪位大神给点意见，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T13:15:28.443

这里的问题在于 db 路由器和 django 系统对象。我在多个数据库和路由器上遇到了同样的问题。我记得这里的问题是 auth.permission 内容类型，它们混合在数据库之间。否则，syncdb 脚本会尝试在所有数据库中创建这些，然后它会为某些对象创建权限内容类型，该 id 已为本地模型保留。

我有以下

```
BASE_DB_TYPES = (
 'auth.user',
 'auth.group',
 'auth.permission',
 'sessions.session', 
```

)

然后在数据库路由器中：

```
def db_for_read(self, model, **hints):
    if hasattr(model, '_meta') and str(model._meta) in BASE_DB_TYPES:
        return 'base_db' # the alias of base db that will store users
    return None # the default database, or some custom mapping 
```

**编辑**：

此外，异常可能会说您正在`add_somesame`为您的模型“ ”声明权限“ `somesame`”，而 Django 会自动为所有对象创建`add_`, `delete_`,权限。`edit_`

# javascript - 想为谷歌地图中的标记创建信息窗口

> ID：11207339
> 
> 赞同：0
> 
> 时间：2012-06-26T12:28:06.420
> 
> 标签：javascript, asp.net, google-maps

我想创建这样一种标记，它将显示各种信息，例如从数据库、图像、按钮、标签等获取数据的表格，但我无法这样做，所以我的问题是..还有其他方法吗？当我单击相应的标记来执行我的任务时，应该打开哪个信息窗口？，我也曾在 Modal Dailog Box 上工作过，而且如果我正在使用警报框，但这也对我没有帮助，所以任何建议......谢谢大家..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T13:11:21.243

[带有信息窗口的标记](http://www.geocodezip.com/v3_MW_example_map1.html)

[带有来自 xml 的 infowindows 的标记](http://www.geocodezip.com/v3_MW_example_map3.html)

[带有来自 FusionTables 的信息窗口的标记](http://www.geocodezip.com/v3_FusionTables_GViz_infowindows.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T02:00:10.743

单击标记不必创建信息窗口。单击标记触发和事件，您可以决定接下来会发生什么。这包括你上面所说的一切

- 从数据库中获取数据 - 显示图像 - 创建或删除按钮

以及更多。

事件侦听器内部是您要放置新代码的地方。

# ruby-on-rails - Capistrano 本地 git 存储库克隆到远程请求密码，尽管 SSH 密钥

> ID：11207341
> 
> 赞同：0
> 
> 时间：2012-06-26T12:28:15.130
> 
> 标签：ruby-on-rails, git, capistrano

Capistrano 完全陌生。

我有一个要发布到远程服务器的本地 git 存储库。我在这里遵循了其他答案并提出了以下配置：

```
require 'bundler/capistrano'

set :application, "app_name"
set :repository, '~/Dropbox/app/.git'
set :user, 'user_name'
set :deploy_to, 'ssh://remote_host/~/railsApps/app_name'
set :scm_verbose, true
set :deploy_via, :copy

default_run_options[:pty] = true

server "remote_server", :web, :app, :db, :primary => true

set :scm, :git
set :branch, "master"

ssh_options[:keys] = %w(~/.ssh/id_rsa)

after "deploy:restart", "deploy:cleanup" 
```

这不再要求远程服务器的密码，但总是失败并出现以下错误：

```
The --deployment flag requires a Gemfile.lock. Please make sure you have checked your Gemfile.lock into version control before deploying. 
```

我肯定在我的 git 存储库中包含了 Gemfile.lock 文件。

如果我将 Capistrano 配置更改为从我推送到的远程 git 文件夹（位于同一服务器中）进行克隆，那么我不会收到错误消息，但每次我尝试连接时都会询问我的密码。

请帮忙。

**请注意**，从 CLI 用于常规 SSH 连接时，SSH 密钥配对可以正常工作。

**解决方案**

感谢 Tigraine，我能够解决它。希望这对其他人有所帮助，这就是最终的诀窍：

Tigraine 是正确的，因为路径是远程服务器的本地路径，但是在尝试使用本地路径时出现错误，Capistrano 一直在我的本地计算机上搜索并在找不到这些路径时抛出错误。

我所要做的就是将其添加`local_repository`到配置中，然后一切正常。所以我改变的位是这些：

```
set :local_repository, '~/Dropbox/app_name/.git'
set :repository, '~/railsApps/app_name.git'
set :deploy_to, '~/railsApps/app_name' 
```

该`local_repository`路径在我的机器上是本地的，`repository`并且`deploy_to`路径在远程服务器上是本地的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T13:24:34.630

首先：Capistrano 总是在你部署到的远程服务器**上执行它的命令。**这意味着您使用的所有路径`set :deploy_to`都是服务器上的本地路径。

在我的情况下，配置看起来像这样：

```
set :scm, 'git'
set :repository,  "<repo url>"
set :branch, 'master'
set :git_shallow_clone, 1
set :scm_verbose, true

set :deploy_to, '/var/www/app'
set :deploy_via, :remote_cache 
```

这里重要的部分是`:deploy_to`服务器上的本地路径而*不是 SSH 路径*。**这是您的配置错误的地方**！

如果您查看命令 capistrano 然后运行，这将变得更加重要。例如，它通常会做类似的事情`bash cd /var/www/app && bundle instal ...`。如果路径不是本地路径，则该命令很可能会失败。

其次，这也意味着 Capistrano**将从**您的远程服务器部署到您的 Git 服务器，因此您必须确保远程服务器可以访问 Git 服务器。因此`ssh_options[:keys]`，指定用于连接到该 remote_server 的本地 SSH 密钥，而在服务器`~/.ssh/id_rsa.pub`上将使用默认密钥 from。

您可以通过包含`ssh_options[:forward_agent] = true`. 这将简单地将您的本地 SSH 代理套接字转发到服务器并使用它（很好，因为您的密钥永远不会离开您的机器）

可以在[此处找到有关 SSH 代理转发的更多信息](http://unixwiz.net/techtips/ssh-agent-forwarding.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T13:50:12.833

要检查的东西：

在远程服务器中检查 .ssh 文件夹，并确保将您的 ssh 密钥（id_rsa.pub）添加到授权密钥中，并且没有附加空格。

从运行 cap 脚本的本地文件夹执行 ssh-add。

检查远程.ssh文件夹的权限，它应该是700，里面的文件有600权限。

```
If I change the Capistrano configuration to clone from the remote git folder to which I push (which is in that same server) then I don't get an error but it asks for my password every time I try to connect. 
```

现在从 git 克隆它，

# php - 用于 endicia 的热敏打印机 API

> ID：11207344
> 
> 赞同：0
> 
> 时间：2012-06-26T12:28:32.617
> 
> 标签：php

我们想知道-我们如何使用endicia api通过热敏打印机打印运输标签-我们已经尝试过ZPLII和EPL2-基本上我们正在尝试从我们的站点调用endicia API并尝试在我们的服务器上打印标签-我们正在解码格式的图像 - 我们如何通过热敏打印机打印 - 我们正在使用 PHP。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T09:41:51.230

尝试使用 jZebra [http://code.google.com/p/jzebra/](http://code.google.com/p/jzebra/)它被设计为网页和操作系统之间的接口

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-14T22:45:33.107

我这样做的方法是使用shiprush endicia（使用shiprush sdk），我向它发送一个XML块，它运行endicia发货并将epl直接发送到打印机，所以我不会进入标签打印的中间.

# asp.net - 如何访问保存在 App_Data 文件夹中的数据库

> ID：11207345
> 
> 赞同：1
> 
> 时间：2012-06-26T12:28:33.450
> 
> 标签：asp.net, sql-server, database, sql-server-express, appdata

当我尝试访问保存在“App_Data”文件夹中的 MS-SQL 数据库时遇到问题。我在 web.config 文件中的连接字符串是-

```
<add name="ConnectionString" connectionString="Data Source=.\SQLEXPRESS;Integrated Security=SSPI;AttachDBFilename=|DataDirectory|\CRMDb.mdf;User Instance=true" providerName="System.Data.SqlClient"/> 
```

例外是-

> 建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。（提供者：SQL 网络接口，错误：26 - 错误定位服务器/指定的实例）

任何相关的帮助将不胜感激。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T12:34:14.680

首先要做的事情是：你的机器上安装了 SQL Express 吗？如果没有，你可以在[这里](http://www.microsoft.com/en-us/download/details.aspx?id=29062)免费获得。

如果您确实安装了 SQL Express，请检查您的 SQL Express 实例是否正在运行。如果它没有运行，请打开命令提示符（[以管理员身份](http://technet.microsoft.com/en-us/library/cc947813%28v=ws.10%29.aspx)）并执行以下命令：

```
net start mssql$sqlexpress 
```

# linux - 递归压缩文件夹，保存给定的子文件夹（Linux）

> ID：11207348
> 
> 赞同：22
> 
> 时间：2012-06-26T12:28:45.133
> 
> 标签：linux, zip, directory

在 Linux zip 中，除了给定的子路径之外，是否可以递归地压缩文件夹？

例如，压缩“base_folder”及其除“base_folder/sub_folder”之外的所有子文件夹。

是否可以？如果是这样，怎么办？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-06-26T12:39:51.377

`zip -r base_folder.zip base_folder -x base_folder/sub_folder/\* base_folder/another_sub_folder/\*`

（我已将您在评论中提供的经验中改进的信息纳入其中。）

了解更多信息：`man zip`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-26T15:33:38.957

您可以使用`tar`with `--exclude`，并使用`-z`选项来 gzip 输出 tar 文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T12:48:08.943

找到文件，排除文件夹，将剩余的文件 xargs 到 tar 或 zip 或其他任何东西：

```
find /in/your/dir | grep -v 'name_of_dir_to_be_excluded' | xargs tar jcvf nameOfArchive.tar.bz2 
```

# javascript - 限制 App Store 上的移动应用程序

> ID：11207350
> 
> 赞同：1
> 
> 时间：2012-06-26T12:29:05.420
> 
> 标签：javascript, ios, mobile, cordova

我正在开发一个我们希望限制访问的移动应用程序。我正在使用 Phonegap Build 并在`config.xml`文件上设置配置。有一个名为`target-device`（仅适用于 iOS）的属性可以设置为`handset`，`tablet`或者`universal`它应该根据设备阻止应用程序安装。

将其设置为允许`handset`应用程序在智能手机和平板设备上运行，但这不是我想要的。这种行为在 App Store 上是否相同，还是仅限于智能手机？

**编辑：此问题仅适用于 iOS 设备**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T14:08:06.560

我相信`config.xml`您所说的文件是针对 PhoneGap Build 的，它与常规`PhoneGap`（现在`Cordova`）不同。

根据他们关于 PhoneGap Build config.xml 的文档，它声明该`target-device`设置仅适用于 iOS 构建，因此此设置不会用于您的 Android 构建。

[https://build.phonegap.com/docs/config-xml](https://build.phonegap.com/docs/config-xml)

> ```
> target-device with possible values handset, tablet, or universal
>      example: <preference name="target-device" value="universal" />
>      please note that this currently only applies to iOS builds; by default all builds are universal 
> ```

我认为你最好的选择是使用 Eclipse、Android SDK 等和 PhoneGap (Corvoda) 而不是 PhoneGap Build 服务，因为它会给你你想要的控制。有关设置说明，请参阅：

[http://docs.phonegap.com/en/1.8.1/guide_getting-started_android_index.md.html#Getting%20Started%20with%20Android](http://docs.phonegap.com/en/1.8.1/guide_getting-started_android_index.md.html#Getting%20Started%20with%20Android)

# javascript - 间隔一段时间后更改 div 的背景颜色

> ID：11207356
> 
> 赞同：2
> 
> 时间：2012-06-26T12:29:17.937
> 
> 标签：javascript, html, colors

嘿，我正在尝试更改 div 的背景颜色。我写了一个脚本来改变身体的背景颜色。代码如下

```
<script>
colors = new Array('black', 'red', 'green');
function annoyingEffect(tic){
tic %= colors.length;
document.bgColor = colors[tic];
setTimeout("annoyingEffect("+(tic+1)+")", 2000);}
</script>
<body onload="annoyingEffect(0)">

</body> 
```

但是如果我尝试添加一个 div 并在其中插入 onload="annoyingEffect(0)" 函数，它就不起作用。我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T12:35:35.700

[这是一个示例](http://jsfiddle.net/NSJDR/5/)（http://jsfiddle.net/NSJDR/5/）如何更改正文和`<div>`：

```
<html>
    <head>
        <script type="text/javascript">
            colors = new Array('blue', 'red', 'green', 'yellow', 'brown', 'orange');

            function annoyingEffect(tic){
                tic %= colors.length;
                document.bgColor = colors[tic];
                setTimeout("annoyingEffect("+(tic+1)+")", 1000);
            }

            function annoyingEffectOnDiv(tic, divId){
                tic %= colors.length;
                divVar = document.getElementById(divId);
                divVar.style.background = colors[tic];
                setTimeout("annoyingEffectOnDiv("+(tic+1)+", '"+divId+"')", 1000);
            }

        </script>
    </head>

    <body onload="annoyingEffect(0); annoyingEffectOnDiv(2, 'divtest');">
        <div id="divtest">
            <label>HELLOOOOOA :D</label>
        </div>
    </body>
</html>​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T12:34:19.010

我认为这条线

```
setTimeout("annoyingEffect("+(tic+1)+")", 2000); 
```

应该

```
setTimeout(function(){ annoyingEffect(tic+1); }, 2000); 
```

函数参数不作为字符串传递

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T12:35:37.897

见演示：http: [//jsfiddle.net/rathoreahsan/Fr6tW/](http://jsfiddle.net/rathoreahsan/Fr6tW/)

添加你的JS：

```
document.getElementById('customid').style.background = colors[tic]; \*your div id*\ 
```

**HTML**

```
<body onload="annoyingEffect(0)">
    <div id="customid"></div>
</body> 
```

**Javascript**

```
colors = new Array('black', 'red', 'green');
function annoyingEffect(tic){
    tic %= colors.length;
    //document.bgColor = colors[tic];
    document.getElementById('customid').style.background = colors[tic];   
    setTimeout("annoyingEffect("+(tic+1)+")", 2000);} 
```

# linux - 存储常用命令的linux命令

> ID：11207361
> 
> 赞同：2
> 
> 时间：2012-06-26T12:29:30.830
> 
> 标签：linux, ubuntu

linux是否有命令允许我将我经常使用的命令推送到堆栈或其他东西中，以便我可以轻松地从中获取它们并尽可能多地在最常用的命令之间跳转。

我知道我们可以为命令创建别名，但这不是我在这里寻找的。我的情况更像是我有一些可怕的长目录，我需要能够快速而频繁地在它们之间切换。例如。

```
cd /pathA/pathB/pathC/pathD/
cd /pathE/pathF/pathG/pathH/
vim /pathA/pathB/pathC/pathD/test.txt
....... 
```

我真的不想在这里为每个命令创建别名，因为路径也经常变化，我不想不断更新我的别名。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T12:31:10.253

关于目录，您可以将路径推送到堆栈上

```
pushd path_you_want_to_store
popd 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T12:34:49.050

好吧，你的 shell 的历史功能可以让你回忆以前的命令。

在最后 2 个目录之间来回切换的快速命令是

```
cd - 
```

就更多目录而言，我在 my 中使用这组别名`.tcshrc`来跟踪它们。如果我在一个目录中我想记住我只是说

```
keep 
```

或者

```
keep2 
```

然后我可以通过简单地输入回到那里

```
cd $k 
```

或者

```
cd $k2 
```

如果我想查看我“保存”的目录，我输入

```
ks 
```

我还可以将这些变量用于其他操作，例如`cp/mv`（我经常这样做是为了节省输入长路径名）。

您没有指定您的 shell，所以这是使用的，`tcsh`但只要您知道如何设置等效别名，就可以轻松地适应任何其他 shell。这使我最多可以保存 6 个不同的目录，您可以决定设置多少。

这是我自己的“本土”解决方案，在过去 10 多年里一直很好地为我服务，可能还有其他的，也许是“内置的”。在这一点上，我会自动并且经常使用它们，以至于我什至不认为它们是别名。

```
alias keep   'set k=`pwd`'
alias keep2  'set k2=`pwd`'
alias keep3  'set k3=`pwd`'
alias keep4  'set k4=`pwd`'
alias keep5  'set k5=`pwd`'
alias keep6  'set k6=`pwd`'
alias ks     'echo $k; echo $k2; echo $k3; echo $k4; echo $k5; echo $k6' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T12:46:00.470

写一次你的“长路径”，下次按 获取它`"Ctrl + r"`。

你需要先按`"Ctrl + r"`。然后开始输入您的“长路径”，它将开始显示您已经输入的路径。

要查找更多旧记录（与您键入的文本相同）的存在，请按住`"Ctrl + r"`，它将显示旧记录。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-10-20T02:59:06.647

还要检查 CDPATH 变量，它可以包含您想要跳转到的公共目录的列表 - 例如：

```
export CDPATH=/pathA/pathB/pathC
cd pathD
# now you're at /pathA/pathB/pathC/pathD 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-11-09T08:09:28.680

如果您觉得该命令会经常使用，您可以添加一个标签

> 命令#有用

然后

> `[ctrl+r]` `#useful`

# php - 在一个页面中添加多个框并保存每个框的信息

> ID：11207364
> 
> 赞同：0
> 
> 时间：2012-06-26T12:29:38.323
> 
> 标签：php, javascript

我有这个任务 - 制作一个简单的 CMS，其中一项能力应该是创建一个页面并添加管理员想要的任意数量的框，然后能够使用 ckeditor 编辑每个框，当然还有页面应该在前端可见。

现在我只是使用 CodeIgniter 试图让事情变得简单，但对于这个任务我想不出纯 PHP 解决方案。我不太喜欢 JS 和它的库/框架，那么您认为学习曲线最小的解决方案是什么？我不能在这方面投入太多时间，所以我正在寻找一种易于实施的解决方案（如果有的话）？

# python - Python 窗口定位？

> ID：11207368
> 
> 赞同：7
> 
> 时间：2012-06-26T12:30:12.890
> 
> 标签：python, window, gtk, positioning, pygtk

我试图在与另一个窗口相同的位置打开一个新窗口。

我的代码：

```
window2.set_position(window1.get_position()) 
```

但它不起作用。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-26T12:38:02.723

`set_position`只是设置一个一般提示（例如居中的窗口）。你需要的`move`方法：

`window2.move(pos_x, pos_y)`

见这里： http://faq.pygtk.org/index.py?req=show& [file=faq10.003.htp](http://faq.pygtk.org/index.py?req=show&file=faq10.003.htp)

# c# - 水晶报表、子报表流、多列方向

> ID：11207377
> 
> 赞同：4
> 
> 时间：2012-06-26T12:30:41.707
> 
> 标签：c#, crystal-reports

我们在 Crystal Reports 中有一份报告。在该报告上，每一页都有一个通用标题，然后我们有多个项目。当前项目从左到右显示，当 fillend 时它转到第二行。所以它看起来像这样：

```
HEADER
A   B
C   D
E   F 
```

我们想要的是首先填充第一列，然后填充第二列，这样它就显示出来了

```
HEADER
A  D
B  E
C  F 
```

这可能吗？

问候帕特里克

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T12:54:20.187

看看下面的照片。它应该可以解决您的问题。通过部分专家，选择“详细信息”部分并勾选“多列格式”。出现一个新选项卡 - “布局”，您可以在其中配置您认为合适的列。 ![图1](../Images/928b26aaaea62e2c4a77cad33daa6827.png)

![图2](../Images/a5a4be967f1f8f6f0bfc16df266be372.png)

# iphone - 如何获取我在 iphone 中向谁发送电子邮件的数据

> ID：11207382
> 
> 赞同：5
> 
> 时间：2012-06-26T12:30:57.117
> 
> 标签：iphone, objective-c

我想显示我从我的应用程序向其发送电子邮件的电子邮件列表。（我没有从我的 iphone 中获取电子邮件）。我想要在“收件人”地址中输入的电子邮件。

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T12:37:22.907

你应该参考这个[博客](http://jomnius.blogspot.in/2011/02/how-to-find-mfmailcomposeviewcontroller.html)。该博客解释了如何获取收件人电子邮件地址列表表单`MFMailComposeViewController`。

希望它可以帮助你。

# c++ - C++：在 if/else 中声明：var 未在此范围内声明

> ID：11207388
> 
> 赞同：1
> 
> 时间：2012-06-26T12:31:10.033
> 
> 标签：c++, gcc, variable-declaration

我不了解 C++ 中的某些内容，gcc 不喜欢我该如何进行。
我做了：

```
 if (!fModeMdi)
            MyFirstClass* main = (MyFirstClass*) fMaino;
    else
            MySecondClass* main = (MySecondClass*) fMdio;
    ...
    ...
    int i = main->GetNum(); 
```

我得到这个错误：

```
file.C:211:16: warning: unused variable 'main' [-Wunused-variable]
file.C:213:15: warning: unused variable 'main' [-Wunused-variable]
file.C:219:9: error: 'main' was not declared in this scope 
```

我不能`main`在我的标题中声明，因为他的类型取决于`fModeMdi`布尔值。
请问我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T12:33:39.760

如何在 if 语句之前定义变量，并在其中分配它？

```
MyFirstClass* main = 0; // use nullptr if you have access to a C++11 compiler

if (!fModeMdi)
    main = (MyFirstClass*) fMaino;
else
    main = (MySecondClass*) fMdio; 
```

由于您在 if 语句中定义了它，在它之后，该变量已经超出范围并且无法再被引用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-26T12:39:18.410

如果`MyFirstClass`并且`MySecondClass`通过继承*相关*，那么您可以按照@unkulunkulu 在他的回答中建议的操作。

但是，如果`MyFirstClass`和`MySecondClass`是*不相关*的类，那么您可以将模板用作：

```
if (!fModeMdi)
{
    do_work(static_cast<MyFirstClass*>(fMaino));
}
else
{
    do_work(static_cast<MySecondClass*>(fMaino));
} 
```

其中`do_work`是一个函数模板，实现为：

```
template<typename T>
void do_work(T *obj)
{
    int i = obj->GetNum();

    //do rest of the work here....
} 
```

请注意，即使它们是相关的，这个模板解决方案也可以工作！！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-26T12:39:13.607

在循环中分配 i 的值。

```
int i;
if (!fModeMdi){
        MyFirstClass* main = (MyFirstClass*) fMaino;
        i = main->GetNum();
}else{
        MySecondClass* main = (MySecondClass*) fMdio;
        i = main->GetNum();
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-26T12:34:57.947

以下应该工作。在 c++ 中，变量的范围在括号 {} 内，即只能在括号内识别。一旦你出去，程序就不知道了。

```
MyFirstClass* main =0; 
MySecondClass* main2 =0; 

if (!fModeMdi)
            main = (MyFirstClass*) fMaino;
    else
            main2 = (MySecondClass*) fMdio; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-26T12:36:35.607

C++ 是一种静态类型语言，在这一行

```
 int i = main->GetNum(); 
```

编译器必须在编译时知道 的类型`main`（静态，因此得名）。您不能使 type of`main`依赖于某些 value `fModeMdi`，这仅在运行时才知道。如果您的每个类都包含`GetNum`在语句之后使用的方法和其他方法，则`if`可以考虑将它们移动到这样的基类：

```
class MyBaseClass {
public:
    virtual int GetNum() = 0;
}

class MyFirstClass : public MyBaseClass {
    // ...
};

class MySecondClass : public MyBaseClass {
    // ...
};

MyBaseClass* main = 0;
if (!fModeMdi)
            main = (MyFirstClass*) fMaino;
    else
            main = (MySecondClass*) fMdio;
    ...
    ... 
```

然后这是合法的

```
 int i = main->GetNum(); 
```

实际上，适当的设计（将通用方法移动到基类）可能会完全消除对这个`if`语句的需要。这就是所谓的多态性，其全部目的是消除对这些`if`或`switch`语句的需要。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-26T13:06:45.460

If `main` may not be polymorphic, then what appears to be the right solution is a functor (or [function object](http://en.wikipedia.org/wiki/Function_object)). [boost function](http://www.boost.org/doc/libs/1_49_0/doc/html/function/tutorial.html) and [boost bind](http://www.boost.org/doc/libs/1_49_0/libs/bind/bind.html) provide these libraries.

Ignoring the memory leak in the below program, we bind the object `new A()` or `new B()` to their respective `GetNum()` calls and wrap them in a callable object, `f`. We call `f()` when needed.

```
#include <boost/function.hpp>
#include <boost/bind.hpp>
#include <iostream>

class A {
     public:
    int GetNum() { return 0; }
};

class B {
    public:
    int GetNum() { return 0; }
};

int main(int args, char** argv)
{

    bool p = true;
    boost::function<int()> f;
    int i;

    if ( p ) {
        f = boost::bind(&A::GetNum, new A());
    }
    else {
        f = boost::bind(&B::GetNum, new B());
    }

    i = f();

    std::cout<<i<<std::endl;

    return 0;
} 
```

# android - 在Android中获取“SocketException：对等方重置连接”

> ID：11207394
> 
> 赞同：41
> 
> 时间：2012-06-26T12:31:26.570
> 
> 标签：android, localhost, socketexception, peer

`http://127.0.0.1/...`我的应用程序需要通过（本地主机 URL）联系它正在使用的同一设备。

出于某种原因，当我到达带有 JSON 内容的网站时，大约有 50% 的时间（也许正好是 50%）出现异常：

> java.net.SocketException：recvfrom 失败：ECONNRESET（对等方重置连接）

对于另外 50%，我得到了非常好的结果。我试图进行民意调查（甚至民意调查之间的延迟很大），但我一直得到同样奇怪的结果。

我已经搜索了互联网和这里，但我不确定它为什么会发生。peer是否意味着是客户端造成的？为什么会发生，我应该如何处理？

一些网站说这是很常见的事情，但我没有找到在这种情况下最好的做法。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-06-27T13:30:35.247

好的，答案是这是服务器的错 - 它必须在每次请求后关闭连接。

可能是Android保留了一个连接池并使用旧的连接池或类似的东西。

无论如何，现在它可以工作了。

* * *

编辑：根据 API `HttpURLConnection`，这也可以在客户端解决：

> 此类返回的输入和输出流没有缓冲。大多数调用者应该用 BufferedInputStream 或 BufferedOutputStream 包装返回的流。只进行批量读取或写入的调用者可能会忽略缓冲。当向服务器或从服务器传输大量数据时，使用流来限制一次在内存中的数据量。除非您需要将整个主体同时存储在内存中，否则将其作为流处理（而不是将整个主体存储为单字节数组或字符串）。
> 
> 为了减少延迟，此类可以为多个请求/响应对重用相同的底层 Socket。因此，HTTP 连接的打开时间可能会超过必要的时间。对 disconnect() 的调用可能会将套接字返回到连接的套接字池。在发出任何 HTTP 请求之前，可以通过将 http.keepAlive 系统属性设置为 false 来禁用此行为。http.maxConnections 属性可用于控制每个服务器的空闲连接数。

取自： [developer.android.com/reference/java/net/HttpURLConnection.html](http://developer.android.com/reference/java/net/HttpURLConnection.html)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-11-26T15:06:56.567

尝试在连接之前为您的**HttpURLConnection**设置此属性：

```
conn.setRequestProperty("connection", "close"); 
```

这将禁用默认开启的“ *keep-alive ”属性。*

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-02-13T13:57:57.727

这是我知道的一个旧线程。但这可能会对某人有所帮助。

就我而言，此错误是由 .NET WCF (soap) 服务引起的。返回结果中的一个对象具有一个具有 get{} 属性但没有 set{} 属性的 DataMember。

要进行序列化，每个 DataMember 都应该有 get{} 和 set{} 可用。我实现了一个空集{}（由于我的业务规则而为空），问题就解决了。

我的场景是一个特定的错误服务器实现，但也许它会帮助某人在故障排除时节省时间。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-26T13:03:30.417

`Connection reset by peer`当我访问某些网页或下载文件（从我的应用程序或 Android 浏览器）时，我遇到了很多这样的问题。

原来是我的 3G 运营商阻止了连接（例如`.exe`，禁止下载文件）。

您在 Wifi 上是否有同样的问题？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-05-28T05:35:26.613

在我的情况下，问题已通过从运营商生成的 APN 中清除代理地址和端口来解决。正如我所测试的，使用远程服务器的IP地址而不是域名也可以解决问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-02-08T06:10:58.077

在我们的例子中，问题出在服务器端（IIS 中的应用程序池配置）。我通过将 Maximum Worker Processes 设置为 1 来解决它。将其设置为大于 1 的值将启用 Web Garden，这似乎是问题所在。

# ios - 让 Chrome 伪装成 iPad

> ID：11207395
> 
> 赞同：4
> 
> 时间：2012-06-26T12:31:28.777
> 
> 标签：ios, objective-c, ipad, google-chrome

我确信我看到有人在 Chrome 中冒充 iPad Safari。你知不知道怎么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T12:33:27.163

浏览器通过 HTTP 请求标头中的“用户代理”字符串标识自己

您可以更改它[https://chrome.google.com/webstore/detail/djflhoibgkdhkhhcedjiklpkjnoahfmg?hl=en-US&gl=US](https://chrome.google.com/webstore/detail/djflhoibgkdhkhhcedjiklpkjnoahfmg?hl=en-US&gl=US)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-26T12:35:14.753

这是一个教程，向您展示如何完成此操作。您只需将用户代理更改为与 ipad safari 相同的用户代理

[使用 Chrome 用户代理字符串获取 Ipad 界面](http://www.guidingtech.com/2803/get-ipad-interface-chrome-user-agent-string/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T12:34:26.287

我可能错了，但我认为这主要与`user-agent`浏览器发送的字符串有关。在测试访问场景时，从 Windows PC 模拟其他浏览器（例如 Safari 或 Mobile Safari）很有用。这可以通过 Chrome 在启动应用程序时使用以下语法来完成。此示例模拟 iPhone 上的移动 safari 浏览器。试试这个 -

```
chrome.exe --user-agent="Mozilla/5.0 (iPhone; U; CPU like Mac OS X; en) AppleWebKit/420+ (KHTML, like Gecko) Version/3.0 Mobile/1A543 Safari/419.3" 
```

有许多“用户代理”字符串可以添加到这种语法中，谷歌搜索应该会找到所需的正确字符串。

这在测试期间非常有用，当人们想知道来自不同浏览器的请求进入时后端系统的行为方式。

# sqlalchemy - 在 SQLAlchemy 中创建子请求

> ID：11207400
> 
> 赞同：0
> 
> 时间：2012-06-26T12:31:41.500
> 
> 标签：sqlalchemy

我尝试在 SQLAlchemy (ORM) 中执行以下请求：

SELECT id, ref_prog FROM stepvand_1c_1t.equipment_day_hour WHERE id IN (SELECT id FROM stepvand_1c_1t.equipment WHERE equipment_type='L')

我做了：

```
subq = session.query(Equipment)
subq = subq.filter(Equipment.equipment_type == "L").subquery()

query = session.query(EquipmentDayHour)
query = query.filter(EquipmentDayHour.id.in_(subq)) 
```

但这不起作用...

Python 告诉我子请求的列太多。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T13:08:12.520

I think you should only change one line of your sample code:

```
# error: includes all columns of Equipment
`subq = session.query(Equipment)`
# correct: include only ID column
`subq = session.query(Equipment.id)` 
```

However, I believe that you can do this without subquery:

```
query = (session.query(EquipmentDayHour).
         # version-1: if you have a relationship between EquipmentDayHour and Equipment
         join(Equipment).
         # version-2: if you do not have such relationship
         #join(Equipment, EquipmentDayHour.id==Equipment.id).
         filter(Equipment.equipment_type == "L")
        ) 
```

# c++ - C++：我可以强制我的程序员为每个类定义复制构造函数吗？

> ID：11207402
> 
> 赞同：3
> 
> 时间：2012-06-26T12:31:57.397
> 
> 标签：c++, visual-c++

我可以强迫我的程序员为从基类继承的每个类定义复制构造函数吗？基类可以被实例化。

我的意思是如果我有

```
class A {
public
  A(const A&);
};

class B : public A {
public
  B(const B&); // I want to force my programmers to write this line, any idea????
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T08:03:56.943

也许答案在[CRTP](http://en.wikipedia.org/wiki/Curiously_recurring_template_pattern)中。

我现在能想到的最接近的解决方案是一个伪基础和一个带有私有抽象 copy_construct 函数的 CRTP，以提醒程序员。

```
template <class Derived>
class Base {
private:
    virtual void copy_construct(const Derived& d) = 0;

      //btw; unfortunately this isn't possible: 
      //virtual Derived(const Derived& b) = 0;
};

class PseudoBase : public Base<PseudoBase>
{
public:
    PseudoBase() {};
    PseudoBase(const PseudoBase& pd) 
    { 
        copy_construct(pd); 
    }

private:       
    void copy_construct(const PseudoBase& rhs) 
    {
        //copy code
    }
};

class Derived : public Base<Derived>
{
  //Programmer forgot about copy constructing    

};

int _tmain(int argc, _TCHAR* argv[])
{
    PseudoBase pb0;
    PseudoBase pb1 = pb0;

    Derived d0;
    Derived d1 = d0;

    return 0;
} 
```

构建将失败：

```
1>d:\source\test\test\test\test.cpp(42): error C2259: 'Derived' : cannot instantiate abstract class
1>          due to following members:
1>          'void Base<Derived>::copy_construct(const Derived &)' : is abstract
1>          with
1>          [
1>              Derived=Derived
1>          ]
1>          d:\source\test\test\test\test.cpp(9) : see declaration of 'Base<Derived>::copy_construct'
1>          with
1>          [
1>              Derived=Derived
1>          ] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-10-11T14:46:08.203

我知道这是一个老问题，但我相信按照休伯特的回答，有一种方法可以做到这一点*。*您可以定义一个抽象类，强制所有子类使用模板实现一些复制方法：

```
template <class X>
class IsCopyable{
protected:
    virtual void copy(const X&) = 0
}; 
```

然后你像这样利用 CRTP：

```
template <class Y>
class AbstractClass : public IsCopyable<Y>{
    ...
}; 
```

假设我们使用 ConcreteClass.h 从 AbstractClass 继承：

```
class ConcreteClass : public AbstractClass<ConcreteClass>{
private:
    virtual void copy(const ConcreteClass&) override; // from IsCopyable abstract class
public:
    ConcreteClass();
    ConcreteClass(const ConcreteClass&);
}; 
```

在 ConcreteClass.cpp 中：

```
#include "ConcreteClass.h"

void copy(const ConcreteClass& copyme){ // ConcreteClass is forced to implement this
    ...
}

ConcreteClass(const ConcreteClass& copyme){ // unfortunately, it's not forced to implement this
    copy(copyme);
} 
```

它并没有真正强制从 IsCopyable 继承的类包含复制构造函数本身，但我认为这是下一个最好的事情。有什么想法/改进吗？

* * *

## 回答 #3

> 赞同：-5
> 
> 时间：2012-06-26T13:47:47.277

我强烈认为错误和运行时崩溃将迫使您的开发人员编写那段代码

# git - 如何用同事分支的内容覆盖我的分支？

> ID：11207403
> 
> 赞同：0
> 
> 时间：2012-06-26T12:31:59.923
> 
> 标签：git, merge, repository, branch

我正在与我的同事一起使用 GIT 作为源代码存储库。假设他在分支 chris 上工作，我在分支 mike 上工作。有一次，他将我的分支 mike 中的**部分**内容合并到他的分支 chris 中。我不再对我的分支麦克风进行任何更改。后来他做了更多的开发。

现在，我想保留我的分支最新内容（作为 chris）。换句话说，我想用来自 chris 的内容覆盖 mike 中的所有内容。

我怎样才能做到这一点？

谢谢，迈克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T12:40:14.477

假设您在“mike”分支上：

`git reset --hard chris`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T12:41:38.863

如果我理解正确，那么您应该能够从 chris 到 mike 进行快进合并。例如：

```
git fetch --all
git checkout mike
git merge origin/chris 
```

另一方面，如果你想*删除*你的“mike”分支并用“chris”的副本替换它，那么你可以这样做：

```
git fetch --all
git checkout master
git branch -D mike
git checkout -b mike origin/chris 
```

不过，在对存储库进行此类手术之前，请确保您有可靠的备份。恢复 tarball 或备份比展开复杂的合并更容易。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-26T12:42:24.513

就如此容易。

1）检查你的分支*麦克*

`git checkout mike`

2) 合并你同事的分支*chris*

`git merge chris`

不会有任何冲突，因为您的同事已经合并了您的更改。

# svn - 谷歌代码 SVN 签入错误

> ID：11207404
> 
> 赞同：0
> 
> 时间：2012-06-26T12:32:01.277
> 
> 标签：svn, ubuntu

尝试签入我的代码时出现以下错误：

```
$> sudo svn commit --username <my username>
   svn: Commit failed (details follow):
   svn: access to '/svn/!svn/act/<a guid>' forbidden 
```

这是一个新项目。我已经阅读了很多关于套管的内容，但我只是从 Goggle Code 网站上复制了结帐语句并添加了一个文件夹。

我正在从终端运行带有 SVN 版本 1.6.17 的 Ubuntu 12.04 LTS。

非常感谢大家的帮助，

理查德·休斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T12:57:15.320

看看[这个问题](https://stackoverflow.com/questions/5937159/svn-erroraccess-to-svn-myservice-svn-act-d99e498e-9a8d-374c-a3e4-fde21198bfa)和[这个](https://stackoverflow.com/questions/5572575/svn-error-when-commiting-access-denied-foobar-mkactivity-myrepo)问题的答案，我会说你应该验证你第一次签出存储库时使用的大小写。

# google-maps - jquery移动搜索最近的餐馆

> ID：11207411
> 
> 赞同：0
> 
> 时间：2012-06-26T12:32:34.943
> 
> 标签：google-maps, jquery-mobile

我对 jquery mobile 有点陌生我正在开发一个应用程序，它将在 gps 的用户位置附近找到最近的限制。我应该如何处理以及如何使用 google api。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T12:59:43.437

Google Maps [place-search API](https://developers.google.com/maps/documentation/javascript/reference#PlaceSearchRequest)是您的朋友。

**types**参数将允许您将结果限制为[餐厅](https://developers.google.com/maps/documentation/places/supported_types)类型的结果。此外，**半径**参数允许您指定到给定位置的最大距离（以米为单位）。

其他可能很方便的是[距离矩阵函数](https://developers.google.com/maps/documentation/javascript/distancematrix)，它允许您计算从一个点到多个位置的距离，如此[SO question](https://stackoverflow.com/questions/11043668/android-map-apis/11043972#11043972)中所述。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T13:13:31.340

谷歌的替代品：

*   [https://gist.github.com/2504683](https://gist.github.com/2504683)（非官方 OpenTable API）
*   [http://blog.foursquare.com/2012/01/18/find-what-you%E2%80%99re-craving-and-check-out-the-menu-too/（FourSquare](http://blog.foursquare.com/2012/01/18/find-what-you%E2%80%99re-craving-and-check-out-the-menu-too/)）
*   [http://openmenu.org/api/docs/restaurant.php](http://openmenu.org/api/docs/restaurant.php) (OpenMenu)

HTML5 地理位置

*   [http://html5demos.com/geo](http://html5demos.com/geo)
*   [http://dev.w3.org/geo/api/spec-source.html](http://dev.w3.org/geo/api/spec-source.html)

# c# - 如何为 GridViews 使用 RowCreated 事件

> ID：11207412
> 
> 赞同：3
> 
> 时间：2012-06-26T12:32:35.470
> 
> 标签：c#, gridview, event-handling

**问题：**

我想在 gridview 数据绑定的中间添加标题。我更新了 DataTable 以包含标题及其正确位置（我在调试期间检查过，它们在那里）。在包含标题的新行上，不需要的字段之一（不需要，因为标题不需要该信息）在其中有一个名为“Subheader”的标志。

**背景资料：**

所以我的数据表行包含一个服务器名称，以及服务器所属的组。我更新了 DataTable，因此它插入了一个新行，其中服务器名称是标题文本。此新行所属的服务器组是“Subheader”。我的数据表包含的信息比我的 gridview 显示的要多。我的 gridview 只需要一列，但有一列`visibility=false;`用于保存服务器组。

**我想要达到的目标：**

因此，当我将此数据表绑定到 gridview 时，我希望所有非标题行都成为指向另一个位置的链接。作为标题的所有数据行我只想保持原样。

**代码：**

```
 private void CurrentServers_RowCreated(Object sender, GridViewRowEventArgs e)
    {

        if (e.Row.RowType == DataControlRowType.DataRow)
        {
            if(e.Row.Cells[1].Text != "Subheader")
            {
                e.Row.Cells[0].Text = "<a href='/EventViewer.aspx?m=" + e.Row.Cells[0].Text + "&s=&e=Application&r=25'>" + e.Row.Cells[0].Text + "</a>";
            }
        }

    } 
```

**问题：**

这是行不通的。`e.Row.Cells[1].Text != "Subheader"`总是返回真。在调试中，我检查了它的值，`e.Row.Cells[1].Text`并且其中某处有我需要的信息。

1.  这是我应该处理的正确事件吗？
2.  我如何访问这些数据？`e.Row.Cells[1].Text`并且`e.Row.Cells[1].ToString()`不要返回我想要的结果，即使在调试时我可以找到我想要的值`e.Row`
3.  我已经尝试确切地找到它是如何工作的，但无法找到答案。如果我的 GridView 只有 2 个数据表列的列，则`e.Row.Cells`只有我的 gridview 需要的 2 个单元格，或者这是否发生在它分解数据表之前（即它是否具有我的数据表具有的所有列）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T12:44:28.170

根据您绑定数据的方式以及获取服务器组的方式，您可以执行以下操作：

在显示非标题行内容的项目模板中，使用两个占位符代替纯文本，一个将保存非超链接文本的标签，另一个将保存超链接。您将两个控件绑定到您使用的任何文本属性。并将这些占位符的可见性设置为`Eval("ServerGroup").ToString().ToLowerInvariant().Equals("subheader")`和`!Eval("ServerGroup").ToString().ToLowerInvariant().Equals("subheader")`。这样您就不必编写代码来执行控制操作，也不必一起使用 RowDataBound 事件。

让我知道这是否没有意义:)

编辑：

```
<asp:GridView ID=".." runat="server" ...>
    <Columns>
        <asp:TemplateField>
            <ItemTemplate>
                <asp:PlaceHolder id="phTextContent" runat="server" visible='<%# Eval("ServerGroup").ToString().ToLowerInvariant().Equals("subheader") %>'>
                    <asp:Label id="lblServerGroup" runat="server" text='<%#Eval("ServerGroup")%>'/>
                </asp:PlaceHolder>

                <asp:PlaceHolder id="phTextContent" runat="server" visible='<%# !Eval("ServerGroup").ToString().ToLowerInvariant().Equals("subheader") %>'>
                    <asp:HyperLink id="hlServerGroup" runat="server" Text='<%#Eval("ServerGroup")%>' NavigateUrl='<%#string.Fromat("/MyAction.aspx?param=", Eval("Param"))%>'/>
                </asp:PlaceHolder>
            </ItemTemplate>
        </asp:TemplateField>
    </Columns>
</asp:GridView> 
```

# ruby-on-rails-3 - 使用多态模型渲染 RABL 部分

> ID：11207413
> 
> 赞同：3
> 
> 时间：2012-06-26T12:32:36.783
> 
> 标签：ruby-on-rails-3, rabl

我有一个数据模型，其中 a`User`可以喜欢 a`Project, Suggestion, Comment`或其他对象。模型设置正确，`likes/show.rabl`如果我们只是为了支持`Project`孩子，它就可以工作

```
object @like
attributes :id, :created_at, :target_type, :target_id, :user_id
child :user => :user do
  extends "users/show"
end
child :target do
  node do |project|
    partial('projects/show', :object => project)
  end
end 
```

但是，我希望能够`suggestions/show, comments/show`根据`target_type`.

我试过这个，但它不工作：

```
child :target do |u|
  u.target.map do |r|
    if r.is_a?(Suggestion)
      partial("suggestions/show", :object => r)
    elsif r.is_a?(Project)
      partial("projects/show", :object => r)
    end
  end
end 
```

我明白了`undefined method target for <Rabl::Engine:0x69fb988>`。但是，在第一种情况下我没有收到此错误。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T21:33:32.770

您是否尝试过使用`extends`而不是`partial`？

也许你可以尝试这样的事情？

```
child :target do |u|
  u.target.map do |r|
    if r.is_a?(Suggestion)
      extends "suggestions/show"
    elsif r.is_a?(Project)
      extends "projects/show"
    end
  end
end 
```

在这种情况下，当您使用 时`extends`，您不需要传入 an，`:object`因为您已经在使用 object 进行迭代的范围内`r`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-27T09:59:37.747

这就是我最终使用的并且有效。

感谢这篇文章：[https ://github.com/nesquena/rabl/issues/273#issuecomment-6580713](https://github.com/nesquena/rabl/issues/273#issuecomment-6580713)

```
child :target do
  node do |r|
    if r.is_a?(Suggestion)
      partial("suggestions/show", :object => r)
    elsif r.is_a?(Project)
      partial("projects/show", :object => r)
    end
  end
end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-08-22T13:27:39.313

还有另一种方法可以做到这一点，您不必列出所有可能的多态关系。它可能有点hacky，但它有效。

像这样：

```
child :target do |u|
  # The regexp snippet selects everything from the last / and to the end
  extends u.to_partial_path.gsub(/\/([^\/]+)$/, '/show')
end 
```

这使用了`.to_partial_path`你的对象。如果您的对象被调用`Suggestion`，`.to_partial_path`则将返回`suggestions/suggestion`。这就是为什么我`gsub()`用`/`.`/show`

使用此解决方案，您不必在每次添加另一个多态关系时更新此文件。你只需要确保新对象有一个名为的 rabl 模板`show.json.rabl`

# tridion - FieldOperator 类不包含静态常量

> ID：11207414
> 
> 赞同：2
> 
> 时间：2012-06-26T12:32:44.277
> 
> 标签：tridion, tridion-2011

我想在代理查询中使用 FieldOperator 根据元数据中的日期选择组件表示。为此，我使用了 CustomMetaValueCriteria。

```
CustomMetaValueCriteria yearCriteria = new CustomMetaValueCriteria(
  new CustomMetaKeyCriteria("sort_date"), 
  new DateTime(Convert.ToInt32(NewsYear), 12, 31), 
  FieldOperator.LESS_OR_EQUAL_THAN); 
```

似乎 LESS_OR_EQUAL_THAN、GREATER_OR_EQUAL_THAN 和 LIKE 等静态常量不公开可用。我正在使用 SDL Tridion 2011 SP1。有人有解决方案吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-26T12:58:55.287

字段运算符可用作 Criteria 类的静态属性。例如：

```
Criteria.GreaterThan
Criteria.Equal 
```

等等

# google-apps-script - 是否可以将触发器添加到其他人的电子表格？

> ID：11207419
> 
> 赞同：2
> 
> 时间：2012-06-26T12:33:08.300
> 
> 标签：google-apps-script, google-apps

我有一个使用 OAuth2 请求访问其他人的 Google 文档的应用程序。我希望能够使用这些访问权限做的一件事是在用户的电子表格之一上添加触发器。

问题...是否可以使用该用户的有效 OAuth 访问令牌将触发器添加到由不同用户 ID 拥有的电子表格？

我目前看到的唯一方法是通过 Google Apps 脚本，但我看不到如何在其他人的电子表格上添加触发器，即使使用有效的访问令牌也是如此。我是对的，还是有办法？还有其他方法吗（除了 Google Apps 脚本）？

谢谢，

汤姆。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T21:43:34.527

要将触发器添加到您具有编辑权限的另一个用户的工作表，请使用以下带有相关电子表格 ID 的行。

```
ScriptApp.newTrigger("myFunction").forSpreadsheet("id of my spreadsheet").onEdit().create(); 
```

# php - 当codeigniter单元测试通过时Jenkins自动构建

> ID：11207425
> 
> 赞同：2
> 
> 时间：2012-06-26T12:33:18.823
> 
> 标签：php, jenkins, phpunit, simpletest

我正在使用 php-codeigniter 框架并执行单元测试我使用简单测试框架。

    Simple-test 在运行测试用例时生成一个 xml 报告，该报告存储在一个文件中。应用程序和测试文件都在 jenkins 中提交。
    每当我执行提交时，我需要自动运行 unit_test.php 并根据 xml 文件输出生成构建。

有没有可能的方法......？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T14:17:45.117

您可以从[jenkins 的 PHP 模板开始](http://jenkins-php.org/)。

您需要在 CI 框中设置 Apache Ant 并配置 xml 模板以运行所需的不同指标，例如 phpUnit、phpLOC、phpMD、phpCPD 等。

根据每个指标的输出，您可以标记构建是否失败、通过或仅保留指标以供进一步参考。

对于简单测试~~，您可能需要进一步挖掘，因为它没有记录在案的过程 ~~ [这是一个链接](http://www.michaelpeacock.co.uk/blog/entry/jenkins-ci-an-introduction-for-php-developers)

# solr - 索引由solr中的空格分隔的文本文件的每个单词？

> ID：11207430
> 
> 赞同：0
> 
> 时间：2012-06-26T12:33:29.373
> 
> 标签：solr, solr-cell

我在我的应用程序中实现 solr 3.6。因为我的文本文件中有以下数据..

**

> date=2011-07-08 time=10:55:06 timezone="IST" device_name="CR1000i" device_id=C010600504-TYGJD3 deployment_mode="Route" log_id=031006209001 log_type="Anti Virus" log_component="FTP" log_subtype= "清理" status="Denied" priority=Critical fw_rule_id="" user_name="hemant" virus="codevirus" FTP_URL="ftp.myftp.com" FTP_direction="download" filename="hemantresume.doc" file_size="550k " file_path="deepti/virus.lnk 的快捷方式" ftpcommand="RETR" src_ip=10.103.6.100 dst_ip=10.103.6.66 protocol="TCP" src_port=2458 dst_port=21 dstdomain="myftp.cpm" sent_bytes=162 recv_bytes= 45 message="从服务器 ftp.myftp 下载大小为 550k 的文件 resume.doc。com 无法完成，因为文件感染了病毒 codevirus"

**

现在我想根据键值对拆分上述数据..并希望根据键对每个值进行索引..我希望更改应该在配置文件中..我已经通过 tokenizer 可以在其中 whitespaceokenizer工作。但希望整个结构被索引。所以有人可以帮我吗？？？谢谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T14:04:46.913

据我所知，没有分词器可以做到这一点。

**使用静态字段：**

您必须将所有“键”定义为 schema.xml 中的字段。它们应该具有相关类型（日期、字符串等）。

使用这些字段创建一个 POJO 并解析此键/值对并填充 POJO。使用 solrj 将此 pojo 添加到 solr。

**使用动态字段：**

在这种情况下，您不需要在模式中定义键，而是使用动态字段（基于数据类型）。您仍然需要解析键/值对并添加到 solr 文档。这些字段需要使用 solrInputdoc.addField 方法添加。

当您定义添加新的键/值对时，客户端仍然需要知道这个新键的存在。但是您的索引器不需要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T14:59:43.113

这不能用分词器完成。为每个字段调用标记器，但您需要在将数据交给字段之前进行处理。

Transformer 可能会这样做，或者您可以在将其作为 XML 提交之前进行一些简单的转换。编写读取该格式并为 Solr 提交生成正确 XML 格式的东西应该不难。在 Python 中肯定不会很难。

对于此输入：

```
date=2011-07-08 time=10:55:06 timezone="IST" device_name="CR1000i" 
```

您需要在模式中创建匹配字段，并生成：

```
<doc>
  <field name="date">2011-07-08</field>
  <field name="time">2011-07-08</field>
  <field name="timezone">IST</field>
  <field name="device_name">CR1000i</field>
  ... 
```

同样在此预处理中，您几乎肯定希望将前三个字段转换为 UTC 中的单个日期时间。

有关 Solr XML 更新格式的详细信息，请参见：[http ://wiki.apache.org/solr/UpdateXmlMessages](http://wiki.apache.org/solr/UpdateXmlMessages)

此时 Apache wiki 已关闭，因此如果出现错误页面，请重试。

# javascript - Jquery 从跨度中删除文本

> ID：11207432
> 
> 赞同：8
> 
> 时间：2012-06-26T12:33:41.310
> 
> 标签：javascript, jquery

我是 JQuery 的新手，并且真的很努力如何执行我想要的查询。

我正在使用 SharePoint，当使用外部数据列并将其设置为必填字段时，错误消息始终出现，直到您填写数据。与其他类型的列不同，它们仅在您单击确定/保存后才出现，而不是填写数据。因此，我需要仅从这些类型的列中删除错误消息文本。

我假设我需要在包含单词“外部数据”的 .ms-error 类中搜索 span 并将其隐藏。

通过使用 IE 开发人员工具栏，我已经确定了该区域。

```
 <table class="ms-usereditor" id="ctl00_m_g_05df537a_596b_443a_a11e_764069facec8_ctl00_Field_External_539c53fe_8334_43c8_b089_cc28d7895e68_Picker_OuterTable" style="border-collapse: collapse;" border="0" cellSpacing="0" cellPadding="0">
    <tbody>
     <tr>
     <td colSpan="3">
       <span class="ms-error" id="ctl00_m_g_05df537a_596b_443a_a11e_764069facec8_ctl00_Field_External_539c53fe_8334_43c8_b089_cc28d7895e68_Picker_errorLabel">
           Text - You must specify a value before using the Check button. You can also use Select button to choose External Data.
        </span>
      </td>
      </tr>
    </tbody>
</table> 
```

请有人可以帮助我使用 JQuery。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-06-26T12:38:24.320

```
var spans = $('.ms-error');

spans.text(''); // clear the text
spans.hide(); // make them display: none
spans.remove(); // remove them from the DOM completely
spans.empty(); // remove all their content 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-26T12:35:38.707

`$('span.ms-error:contains("External Data")').hide();`

如果您确定这些`span`'s 在某个`table`或 a中`div`，则将其专门定位在那些中以使脚本更好地执行。

例如。

`$('.ms-usereditor span.ms-error:contains("External Data")').hide();`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-04-24T00:24:34.453

这是更优化和更快的方法：

```
$(".ms-usereditor span[class^='ms-error']:contains('External Data')").hide() 
```

此外，当您需要一种正则表达式模式来查找所有匹配的节点或具有相似类名的节点时，这种语法非常有用。假设，您需要找到一些*.ms-error-1* *.ms-error-abc*。因此，相同的语法可以工作，甚至更好的是你可以这样做：

```
$(".ms-usereditor span[class^='ms-error-']:contains('External Data')").hide() 
```

# java - 在android中使用边缘检测选择区域后裁剪图像

> ID：11207437
> 
> 赞同：5
> 
> 时间：2012-06-26T12:34:04.343
> 
> 标签：java, android, image-processing, opencv, edge-detection

我想稍后自动选择页面区域进行裁剪。我认为边缘检测可能很有用，并使用精明的边缘检测来查找图像的边缘。现在我有了这张图！但我不清楚将页面区域选择为矩形。任何人都可以为这个问题提出一种方法或实现吗？我真正想做的是如下选择页面区域。![](../Images/d6b6d42f18209e74ac4b415db1eec572.png) 有没有其他方法可以做到这一点？我还在使用matlab进行数字图像处理的介绍书中看到了边界检测。但我对此并不熟悉。我可以将其用于此目的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-10-12T08:06:26.240

我假设你有“Canny-ed”形象。现在您可以使用 `Imgproc.findCountours`, 来查找和存储边缘（您需`List<MatOfPoint>`要这样做）。在使用之前，`findContours`我会玩`Imgproc.dilate`，这可能有助于找到轮廓（它“增肥”线条，所以我们确信`findContours`不会错过你的目标）。然后您只需要使用`Imgproc.boudningRect`即可获得您的投资回报率。然后只需使用此 ROI 裁剪图像。

# database - 为从 Access 中的列表视图中选择的客户添加订单

> ID：11207439
> 
> 赞同：0
> 
> 时间：2012-06-26T12:34:11.150
> 
> 标签：database, listview, ms-access, vba

我按照这个很棒的指南来帮助我向我的 Access 数据库添加搜索功能：

[http://www.techrepublic.com/blog/howdoi/how-do-i-populate-an-access-list-control-with-the-results-of-a-dynamic-search/108](http://www.techrepublic.com/blog/howdoi/how-do-i-populate-an-access-list-control-with-the-results-of-a-dynamic-search/108)

最后它说：

“如果您正在构建报价单或订单，请使用列表控件的 Click 或 Double Click 事件将记录复制到临时表。为每个搜索任务使用固定查询很容易实现。”

我设法在列表框中显示所有搜索结果，**我希望能够单击客户以突出显示它们，然后按一个按钮将订单添加到所选客户。**我一直在想我该怎么做，我真的无法理解它。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T09:21:30.357

这取决于您如何构建数据库。我的猜测是一种简单的方法是：

*   与客户创建一张桌子；
*   创建一个“订单”表，其中包含您通过外键链接客户的订单
*   您将客户加载到列表框中。在使名称可见时，它实际上是您在单击列表框时检索到的 ID。您可以通过向导在表格的设计视图中进行配置。您可以通过列表框上的事件（例如单击）使其他表单出现。
*   如果您设法检索了客户的 ID，并且您拥有与订单相关的数据（可以轻松地从表单对象中提取并加载到变量中的数据），那么您需要一个插入语句并将值插入“订单" 表（包括通过外键链接的客户 ID）。
*   这样所有的订单记录都链接到客户，以后可以查询。

由于我对您的其他请求的了解有限，我无法在您的数据库设计的其余部分为您提供任何进一步的帮助。我希望我的回复能对您有所帮助，并且我正确理解了您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T10:41:24.817

您可以通过以下方式从列表框中访问信息：

```
List.Value 
```

或者，如果它不是第一列，则：

```
List.Column(0,0) 
```

0 是列和行引用。

您也可以考虑在列表框上使用列表视图，然后您可以使用以下代码访问列表视图控件的相关部分：

```
ListView.SelectedItem 
```

或者，如果它不是第一列，则：

```
ListView.SelectedItem.SubItems(3) 
```

3 是列参考

# jquery - 位于鼠标旁边的jquery div根据浏览器窗口大小移动

> ID：11207443
> 
> 赞同：0
> 
> 时间：2012-06-26T12:34:17.370
> 
> 标签：jquery, html, css, positioning

当用户将鼠标悬停在映射图像上的区域上时，隐藏的 div 会显示出来。但我需要将隐藏的 div 定位在鼠标旁边。它目前将自己定位在距鼠标一定距离的位置，该距离取决于浏览器窗口的大小。

jQuery：

```
$(document).ready(function(){
    $(".hover_link").mousemove(function(e){         
        $("#box1").show();         
        $(".box").css({             
            top: (e.pageY - 240) + "px",             
            left: (e.pageX - 90) + "px"        
        });    
    });     
    $(".hover_link").mouseout(function(e){         
        $("#box1").hide();     
    });
}); 
```

CSS：

```
.hover_link{
    display:block;
}
.box{
    float: left;
    vertical-align: top;
    display:none;
    height: 80px;
    width: 250px;
    background-color: #FFF;
    position: absolute;
    z-index: 1000;
    padding:10px 10px 10px 0;
    }
    .boxinner{
    text-align:left;
    max-width:140px;
    padding-left:10px;
    height:80px;
    float:left;
    vertical-align:top;
    } 
```

HTML：

```
<img src="http://www.poltairhomes.com/images/swmap.jpg" width="900" height="642" border="0" usemap="#Map" />
<map name="Map" id="Map">
<area class="hover_link" shape="circle" coords="574,143,10" href="http://www.poltairhomes.com/trecerus-farm" />
</map>
<div class="box" id="box1" align="center">
    <div class="boxinner">
        <img src="http://www.poltairhomes.com/images/homethumb1.png" width="80px" height="80px" />
    </div>
    <div class="boxinner">Trecerus Farm Development: 22 Two, Three &amp; Four bed homes.
    </div>
</div> 
```

网站：[http ://www.poltairhomes.com/developments/](http://www.poltairhomes.com/developments/)

提前谢谢了。

**编辑：**我现在已将我的 jquery 更新为以下内容，但现在隐藏的 div 根本不显示：

```
$(document).ready(function(){
    $(".hover_link").mousemove(function(e){         
        $("#box1").show();         
        $(".box").css({             
            top: ((e.pageY - $("#main").offest().left) + 10) + "px",             
            left: ((e.pageX - $("#main").offset().top) + 10) + "px"        
        });    
    });     
    $(".hover_link").mouseout(function(e){         
        $("#box1").hide();     
    });
}); 
```

**编辑 2：** jquery 现在如下，但同样，隐藏的 div 似乎没有显示：

```
$(document).ready(function(){
    $(".hover_link").mousemove(function(e){         
        $("#box1").show();
            var main = $("#main");
            var offset = main.offset();
            var mouseY = (e.pageY - main.offset.left); 
            var mouseX = (e.pageX - main.offset.top);        
            $(".box").css({             
                top: (mouseY + 10) + "px",             
                left: (mouseX + 10) + "px"        
            });    
        });     
    $(".hover_link").mouseout(function(e){         
        $("#box1").hide();     
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T12:43:51.670

当您将*top*和*left*属性设置为具有*position:absolute的元素时，这些值是与具有**position:relative*的第一个父元素的距离。

您的*.singular .hentry*的 CSS设置*位置：相*对于您的 div 所在的文章元素。因此，当您设置*top:50px*时，这意味着它应该距离该文章元素的顶部 50px，而不是距离页面顶部的 50px。

从文章元素中删除*position:relative*或计算 div 的坐标，以便它们相对于文章元素而不是整个页面。

编辑：另外，你不应该从*e.pageX*和*e.pageY*中减去 div 的尺寸。*top*和*left*值指定 div 左上角的开始位置。您可以将 5px 添加到两个值，使其显示在光标旁边。

EDIT2：这对我有用：

```
$(".hover_link").mouseover(function(e) {
    $("#box1").show();
    var offset = $('#mapwrapper').offset();
    $(".box").css({
      top: (e.pageY - offset.top + 10) + "px",
      left: (e.pageX - offset.left + 10) + "px"
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T10:51:51.270

所以！最后的问题是我让 jquery 在页面上居中的固定宽度 div 内的 div 上运行。

为了解决这个问题，我基本上检测到了 html 文档宽度，减去了 div 的固定宽度，然后将余数除以 2，给了我需要用来抵消鼠标计算的左边距，以便让隐藏的 div 弹出无论窗口大小如何，都在鼠标旁边。

该站点的标题也是固定大小的，因此我从鼠标位置减去它的高度，以使隐藏到 div 的位置正确定位在另一个轴上。

最终小提琴： http: [//jsfiddle.net/3kWq7/10/](http://jsfiddle.net/3kWq7/10/) 最终结果：http: [//jsfiddle.net/3kWq7/10/embedded/result/](http://jsfiddle.net/3kWq7/10/embedded/result/) 最终jquery：

```
$(document).ready(function(){
    $(".hover_link").mousemove(function(e){         
        $($(this).attr('rel')).show();
        var padding = parseInt(jQuery("#page").css("margin-right"));
        var margin = $(document).width() - 900;
        var marginleft = margin / 2;        
            $(".box").css({             
            top: (e.pageY - 200) + "px",             
            left: (e.pageX - marginleft + 10) + "px"        
        });    
    });     
    $(".hover_link").mouseout(function(e){         
        $($(this).attr('rel')).hide();   
    });
}); 
```

感谢所有帮助过的人！

# php - 使用 jquery.ajax 执行 php post

> ID：11207444
> 
> 赞同：0
> 
> 时间：2012-06-26T12:34:17.530
> 
> 标签：php, jquery, post

我正在尝试运行[本教程](http://net.tutsplus.com/tutorials/javascript-ajax/submit-a-form-without-page-refresh-using-jquery/)

我还没有实现验证部分，但我的问题不应该基于此。这是我的代码：

```
<script type="text/javascript">
$("#submitbutton").click(function () {
  var content = $.("#contentarea").val();
  $.ajax({
    type: "POST",
    url: "addArticle.php",
    data: content,
    success: $.("#addArticle").append("<p>ok</p>")
  });
  return false;
})
</script> 
```

正如在演示中看到的那样，它不应该因为 return false 语句而刷新页面，并且应该做一个 post 而不是 get。但它也没有。它将继续重新加载页面并将给定的内容作为参数附加到 url。我如何防止这种情况/我的失败在哪里？

[这是整个事情](http://pastebin.com/iZue8X5L)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T12:39:53.107

您遵循的教程不正确。除了单击其提交按钮之外，还有更多提交表单的方法（例如，您可以`return`在文本字段中按下）。您需要将代码绑定到表单的`submit()`事件而不是按钮的`click()`事件。

完成此操作后，使用浏览器内调试器检查提交表单时代码是否正在实际运行。

此外，`success`参数需要是一个函数：

```
submit: function() { $("#addArticle").append("<p>ok</p>") } 
```

**编辑**：另外，你已经写`$.(`了`$(`好几次了。这会导致运行时错误，可能会导致阻止提交的代码失败。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T14:13:23.030

不错不错...

少一些神经之后，它起作用了。我决定使用[jquery 表单插件](http://www.malsup.com/jquery/form/#getting-started)

但是，我打赌你会喜欢的，我不知道它为什么会起作用：

```
 <script> 

        $(document).ready(function() { 

            $('#addForm').ajaxForm(function() { 
                alert("ok"); 
            }); 
        }); 
    </script> 

    <div id="addArticle">
        <form id="addForm"  method="post" action="addArticle.php">

                <textarea id="contentarea" required="required" name="content">    </textarea>
                <br />
                <input type="submit" id="submitbutton">
        </form>
    </div> 
```

我想作者做得很好，只是想把我的解决方案告诉那个在谷歌上搜索这个问题的未来人。

# c - C中的DFT函数实现

> ID：11207467
> 
> 赞同：3
> 
> 时间：2012-06-26T12:35:33.037
> 
> 标签：c, fft

我正在 DSP 处理器上实现 BFSK 实现，目前正在使用 C 在 LINUX 机器上对其进行仿真。我正在研究解调功能，它涉及对传入数据进行 FFT。出于模拟目的，我有一个用于 DFT 的预定义函数，即：

```
void dft(complex_float* in, complex_float* out, int N, int inv)
{
    int i, j;
    float a, f;
    complex_float s, w;
    f = inv ? 1.0/N : 1.0;
    for (i = 0; i < N; i++) {
        s.re = 0;
        s.im = 0;
        for (j = 0; j < N; j++) {
            a = -2*PI*i*j/N;
        if (inv) a = -a;
        w.re = cos(a);
        w.im = sin(a);
        s.re += in[j].re * w.re - in[j].im * w.im;
        s.im += in[j].im * w.re + in[j].re * w.im;
    }
    out[i].re = s.re*f;
    out[i].im = s.im*f;
} 
```

这`complex_float`是一个定义如下的结构：

```
typedef struct {
 float re;
 float im;
} complex_float; 
```

在`dft()`函数中，参数`N`表示 DFT 点的数量。

我的疑问是由于该算法还涉及跳频序列，因此在解调信号时，我需要检查信号在不同频率分量的DFT幅度。

在 MATLAB 中，这非常简单，因为 FFT 函数也涉及采样频率，我可以找到任何频率点的功率

```
powerat_at_freq = floor((freq * fftLength) / Sampling_freq) 
```

但是 C 函数不涉及任何频率，那么如何确定任何特定频率下 DFT 的幅度呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T12:49:28.757

FFT 表中特定频率的索引计算如下：

```
int i = round(f / fT*N) 
```

其中`f`是所需频率，`fT`是采样频率，`N`是 FFT 点数。FFT 应该足够细粒度（即 N 应该很大）以覆盖所有频率。如果 FFT 中不存在精确频率，则将使用最接近的频率。有关 FFT 索引与频率的更多信息：

[如何获得 FFT 中每个值的频率？](https://stackoverflow.com/questions/4364823/how-to-get-frequency-from-fft-result)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T17:50:17.643

表示的频率取决于馈入它的数据的采样率（如果是 FFT，则除以长度）。因此，任何 DFT 或 FFT 都可以表示您想要的任何频率，只需以正确的采样率为其提供适量的数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T15:44:31.650

您可以参考在 FFT 应用领域著名且有用的 FFTW 库。

官方网站是：[http ://www.fftw.org/](http://www.fftw.org/)

顺便说一句，matlab的FFT函数也是通过FFTW库实现的。

# php - preg_match 在 foreach 循环中显示第一个匹配项

> ID：11207482
> 
> 赞同：2
> 
> 时间：2012-06-26T12:36:37.287
> 
> 标签：php, regex, preg-match

我有一系列模式：

```
$patterns= array(
    '#http://(www\.)?domain-1.com/.*#i',
    '#http://(www\.)?domain-2.com/.*#i',
    ...
); 
```

我有一个长字符串，其中包含多个文本和 url 我想匹配字符串中出现的第一个 url，我只试过这个：

```
foreach ($patterns as $pattern) {
    preg_match($pattern, $the_string, $match);
    echo '<pre>'; print_r($match); echo '</pre>';
} 
```

它返回空数组，其中某些模式和包含 url 但取决于数组顺序的数组不匹配`$patterns`，

我怎样才能找到首先发生的这些模式的任何匹配项。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T13:08:05.120

你基本上有三个选择：

1.  匹配一个[通用的 URL 模式](http://rodneyrehm.de/t/url-regex.html#gruber+revised)，然后根据你所拥有的模式运行该 URL。如果没有匹配，则继续使用通用模式的第二个结果。
2.  使用标志运行所有模式`PREG_OFFSET_CAPTURE`以获得模式匹配的偏移量。找到最低的偏移量，返回你的结果
3.  将您的各种模式组合成一个模式。请注意，模式的长度有限制（[编译形式为 64K](http://mushclient.com/pcre/pcre.html#SEC3)）

* * *

选项 2：

```
<?php

$text = "hello world http://www.domain-2.com/foo comes before http://www.domain-1.com/bar";
$patterns= array(
    '#http://(www\.)?domain-1.com/[^\s]*#i',
    '#http://(www\.)?domain-2.com/[^\s]*#i',
);

$match = null;
$offset = null;
foreach ($patterns as $pattern) {
    if (preg_match($pattern, $text, $matches, PREG_OFFSET_CAPTURE)) {
        if ($matches[0][1] < $offset || $offset === null) {
            $offset = $matches[0][1];
            $match = $matches[0][0];
        }
    }
}

var_dump($match); 
```

请注意，我更改了您的演示模式。我将`.*`(anything)替换为`[^\s]*`(everything but space) 以防止模式匹配超出预期

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T12:50:35.180

我猜你正在寻找这个：

```
foreach ($patterns as $pattern) {
    if (preg_match($pattern, $the_string, $match)) {
        echo '<pre>'; print_r($match); echo '</pre>';
        break;
    }
} 
```

**更新：**

然后我认为你应该使用偏移链接这个：

```
$matches = array();
foreach ($patterns as $pattern) {
    if (preg_match($pattern, $the_string, $match, PREG_OFFSET_CAPTURE)) {
        $matches[$match[0][1]] = $match[0][0];
    }
}
echo reset($matches); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T13:13:47.103

除了一次评估所有字符串并抓住最早的字符串之外，我想不出任何办法：

```
$easliestPos = strlen($the_string) + 1;
$earliestMatch = false;

foreach ($patterns as $pattern) { 
    if (preg_match($pattern, $the_string, $match)) { 
        $myMatch = $match[0];
        $myMatchPos = strpos($myMatch, $the_string);
        if ($myMatchPos < $easliestPos ) {
            $easliestPos = $myMatchPos;
            $earliestMatch = $myMatch ;
        }
    }
 }

 if ($earliestMatch ) {
    echo $earliestMatch;
 } 
```

# ios - 如何在 iOS 中正确地将 NSDictionary 转换为 json 格式？

> ID：11207483
> 
> 赞同：22
> 
> 时间：2012-06-26T12:36:43.910
> 
> 标签：ios, json, format, nsdictionary

我正在尝试向我的服务器发送一个 json 文件。json 格式应如下所示：

```
{
    "eventData": {
        "eventDate": "Jun 13, 2012 12:00:00 AM",
        "eventLocation": {
            "latitude": 43.93838383,
            "longitude": -3.46
        },
        "text": "hjhj",
        "imageData": "raw data",
        "imageFormat": "JPEG",
        "expirationTime": 1339538400000
    },
    "type": "ELDIARIOMONTANES",
    "title": "accIDENTE"
} 
```

我对此进行了硬编码并像这样工作：

```
NSString *jsonString = @"{\"eventData\":{\"eventDate\":\"Jun 13, 2012 12:00:00 AM\",\"eventLocation\":{\"latitude\":43.93838383,\"longitude\":-3.46},\"text\":\"hkhkjh\",\"imageData\":\"\",\"imageFormat\":\"JPEG\",\"expirationTime\":1339538400000},\"type\":\"Culture\",\"title\":\"accIDENTE\"}"; 
```

所以我想做同样的事情，但使用 NSDictionary 当然我不想硬编码我的所有数据。所以我正在创建一个这样的 NSDictionary：

```
NSMutableDictionary *eventLocation = [NSMutableDictionary dictionaryWithObjectsAndKeys:@"43.93838383",@"latitude",@"-3.46", @"longitude" , nil];

    NSMutableDictionary *eventData = [NSMutableDictionary dictionaryWithObjectsAndKeys:eventLocation,@"eventLocation", nil];
                        [eventData setObject:@"Jun 13, 2012 12:00:00 AM" forKey:@"eventDate"];
                        [eventData setObject:@"hjhj" forKey:@"text"];
                        [eventData setObject:@"raw data" forKey:@"imageData"];
                        [eventData setObject:@"JPEG" forKey:@"imageFormat"];
                        [eventData setObject:@"1339538400000" forKey:@"expirationTime"];

    NSMutableDictionary *finalDictionary = [NSMutableDictionary dictionaryWithObjectsAndKeys:eventData,@"eventData", nil];
                        [finalDictionary setObject:@"ELDIARIOMONTANES" forKey:@"type"];
                        [finalDictionary setObject:@"accIDENTE" forKey:@"title"]; 
```

现在我必须将其转换为正确的 json 格式，以便我可以将其发送到我的服务器。我试过用这个：

```
NSError *error;
        NSData *jsonData = [NSJSONSerialization dataWithJSONObject:finalDictionary 
                                                           options:NSJSONWritingPrettyPrinted
                                                             error:&error] 
```

但现在当我打印 jsonData 我得到这个：

```
jsonData: <7b0a2020 22657665 6e744461 74612220 3a207b0a 20202020 22696d61 6765466f 726d6174 22203a20 224a5045 47222c0a 20202020 22746578 7422203a 2022686a 686a222c 0a202020 2022696d 61676544 61746122 203a2022 72617720 64617461 222c0a20 20202022 65787069 72617469 6f6e5469 6d652220 3a202231 33333935 33383430 30303030 222c0a20 20202022 6576656e 744c6f63 6174696f 6e22203a 207b0a20 20202020 20226c6f 6e676974 75646522 203a2022 2d332e34 36222c0a 20202020 2020226c 61746974 75646522 203a2022 34332e39 33383338 33383322 0a202020 207d2c0a 20202020 22657665 6e744461 74652220 3a20224a 756e2031 332c2032 30313220 31323a30 303a3030 20414d22 0a20207d 2c0a2020 22747970 6522203a 2022454c 44494152 494f4d4f 4e54414e 4553222c 0a202022 7469746c 6522203a 20226163 63494445 4e544522 0a7d> 
```

这究竟是什么？我怎样才能将该字典转换为完全像这样：

```
{
    "eventData": {
        "eventDate": "Jun 13, 2012 12:00:00 AM",
        "eventLocation": {
            "latitude": 43.93838383,
            "longitude": -3.46
        },
        "text": "hjhj",
        "imageData": "raw data",
        "imageFormat": "JPEG",
        "expirationTime": 1339538400000
    },
    "type": "ELDIARIOMONTANES",
    "title": "accIDENTE"
} 
```

如果可能的话，我希望上述格式是一个 NSString 因为那是我发送到服务器的内容并且它正在工作。我的意思是 NSString ，像这样的 json 格式。非常感谢您阅读这一切！:D

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-06-26T12:37:59.213

您的转换很好， NSData 看起来像那样，因为它是一堆字节！

您需要将其转换为字符串，试试这个：

```
NSString* aStr;
aStr = [[NSString alloc] initWithData:aData encoding:NSUTF8StringEncoding]; 
```

方法：

```
+ (NSData *)dataWithJSONObject:(id)obj options:(NSJSONWritingOptions)opt error:(NSError **)error 
```

返回一个 NSData 对象， NSData 只是一个字节表示的对象包装器，所以你的字典在那里，但是以字节表示的形式。

然后你使用：

```
- (instancetype)initWithData:(NSData *)data encoding:(NSStringEncoding)encoding 
```

此方法使用您提供的编码将您的字节表示形式转换为字符串。

# android - 在电子邮件正文中嵌入内联图像

> ID：11207484
> 
> 赞同：0
> 
> 时间：2012-06-26T12:36:49.533
> 
> 标签：android

在我的应用程序中，我必须在正文中发送图像而不是作为附件。我花了一个多星期，没有发现成功。我已经通过 Java 邮件 API 实现了相同的功能。但需要有意识地实施。我试过的是：

```
Spanned emailText11 =   Html.fromHtml("<body><p><img src=\"http://www.datarecoverydownloadwebsite.com/drdwebsite/image/pen-drive1.jpg\" alt=\"Smiley face\" align=\"bottom\" width=\"32\" height=\"32\" /></p></body>", new Html.ImageGetter() {
            @Override
            public Drawable getDrawable(String source) {
                 Drawable drawFromPath;
                 int path = Inline_Image_Gmail.this.getResources().getIdentifier(source, "drawable", "com.package..."); 
                 drawFromPath = (Drawable) Inline_Image_Gmail.this.getResources().getDrawable(path);
                 drawFromPath.setBounds(0, 0, drawFromPath.getIntrinsicWidth(), drawFromPath.getIntrinsicHeight());
                 return drawFromPath;

            }
    }, null); 
```

emailIntent.putExtra(Intent.EXTRA_STREAM,emailText11);

我用谷歌搜索了很多，答案是不可能的。如果没有，任何人都可以清除我的原因。

谢谢。

# linker - 如何使用“RW数据压缩”使arm链接器正确解压第二个？

> ID：11207489
> 
> 赞同：1
> 
> 时间：2012-06-26T12:37:00.063
> 
> 标签：linker, embedded, arm

标题：如何在第一个和第二个区域都应用“RW 数据压缩”时使 arm 链接器解压缩第二个加载区域？

我有一个下面的分散文件（我的复杂分散文件的简单版本）

```
LOAD_REGION_01 0x0
{
    EXECUTION_REGION_01  0x0
    {
        ABC.o (+RO,+RW)
    }
}

LOAD_REGION_02 +0x0
{
   EXECUTION_REGION_02  0x100
   {
      DEF.o (+RO,+RW)
   }
} 
```

RW 数据压缩是自动应用的，我得到了一个大小为 0x40 的二进制文件（对于 LOAD_REGION_01 为 0x20，对于 LOAD_REGION_02 为 0x20），得到了如下 MAP 文件的 link.info。

```
Load Region LOAD_REGION_01 (Base: 0x0, Size: 0x30, Max: 0x000000a0, ABSOLUTE)
    Execution Region EXECUTION_REGION_01 (Base:0x0,Size:0x30,Max:0xffffffff,ABSOLUTE, COMPRESSED[0x20])

Load Region LOAD_REGION_02 (Base: 0x30, Size: 0x30, Max: 0x000000a0, ABSOLUTE)
    Execution Region EXECUTION_REGION_02 (Base:0x0,Size:0x30,Max:0xffffffff,ABSOLUTE, COMPRESSED[0x20]) 
```

我发现压缩后加载区域的大小是0x20，但是第二个加载区域的起始地址是0x30！并且，第一个区域的解压缩工作正常，但是 arm 尝试从地址“0x30”而不是“0x20”解压缩第二个区域。

因此，会产生错误的解压结果。如何使arm链接器正确解压第二个？或者我如何为第二个加载区域 LOAD_REGION_02 的加载地址分配属性 +0 （因为大小加载区域 1 可能会改变......）？

我阅读了所有用户手册，但没有答案...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T13:12:36.007

您的问题似乎是两个加载区域都被声明为从地址 0 开始。

通过快速阅读 ARM 文档，我看到了解决它的两个选项：

1.  使用一个加载区域和两个执行区域：

    ```
    LOAD_REGION_01 0x0
    {
       EXECUTION_REGION_01  0x0
       {
          ABC.o (+RO,+RW)
       }
       EXECUTION_REGION_02  0x100
       {
          DEF.o (+RO,+RW)
       }
    } 
    ```

2.  使用两个具有非重叠地址的加载区域。如果我阅读正确，+0*应该可以工作。*

    ```
    LOAD_REGION_01 0x0
    {
       EXECUTION_REGION_01  0x0
       {
          ABC.o (+RO,+RW)
       }
    }
    LOAD_REGION_02 +0
    {
       EXECUTION_REGION_02  0x100
       {
          DEF.o (+RO,+RW)
       }
    } 
    ```

# path - openlayers中的路径fillOpacity不起作用

> ID：11207490
> 
> 赞同：0
> 
> 时间：2012-06-26T12:37:02.713
> 
> 标签：path, openlayers, openstreetmap

我正在我的 OSM 地图上使用 OpenLayers 绘制一个多边形。毕竟我正在执行这些行：

```
polygonFeature = new OpenLayers.Feature.Vector(
                new OpenLayers.Geometry.Polygon([linear_ring]), null, style_green); 
```

style_green 在哪里

```
var style_green =
{
    strokeColor: "#000000",
    strokeOpacity: 0.3,
    strokeWidth: 1,
    fillColor: "#00FF00",
    fillOpacity: 0.3,
}; 
```

但由于某种原因 strokeOpacity 和 fillOpacity 不起作用，向我展示了实心多边形：

![在此处输入图像描述](../Images/ca673061615b3e5b0c2d88c38e6797d7.png)

但是，由 openlayers 代码创建的 path 的 html 属性看起来是合法的：

![在此处输入图像描述](../Images/787ace215d366262f9ef73e60927eb34.png)

我该如何解决这个问题？

谢谢！

# android - 自定义按钮大小（以像素为单位）

> ID：11207492
> 
> 赞同：0
> 
> 时间：2012-06-26T12:37:06.010
> 
> 标签：android

最后我完成了我的工作，现在我需要把它交给设计师。应用程序有一些按钮和复选框。

那么问题是她应该为每个屏幕尺寸（ldpi、mdpi、hdpi、xhdpi）绘制多大的按钮和复选框，或者她可以只为按钮绘制一个图像，为复选框绘制另一个图像，并且可以缩放？

已经谢谢你了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T13:49:36.463

这真的取决于你的按钮有多大。您可以查看以下链接的尺寸：http: [//developer.android.com/images/screens_support/screens-densities.png](http://developer.android.com/images/screens_support/screens-densities.png)

但我同意 Mikelsreal（创建 9 个补丁图像）。

以您喜欢的任何尺寸创建按钮图像。

*   在图像上方添加黑色像素以设置图像应水平拉伸的位置。
*   在图像左侧添加黑色像素以设置图像应垂直拉伸的位置。
*   在内容可以垂直放置的右侧添加黑色像素
*   在图像下方添加黑色像素以设置内容可以水平放置的位置

将图像重命名为：yourImageName.9.png

它应该可以工作。更多信息检查（developer.android.com/tools/help/draw9patch.html）

# jquery - 在jquery中获取单元格的空白值

> ID：11207494
> 
> 赞同：1
> 
> 时间：2012-06-26T12:37:15.733
> 
> 标签：jquery, html

我正在选择拖动考试时间单元格的时间段。选择时间段后，我在文本框中输入学生姓名，然后单击选择学生按钮，然后学生姓名进入所选时间段。

使用下面的代码，我得到了突出显示单元格的开始时间和结束时间，但它显示了空白值。我的代码有什么问题。

```
var mins = $('td.csstd:first');
var hrs = mins.parent().prevAll().andSelf().find('td:first-child').
    filter(function () { 
        return $.trim($(this).text()) !== ''; 
    }).last();
alert(hrs.text() + mins.text()); 
```

[在此处查看演示](http://jsbin.com/akabas/edit#preview)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T12:50:55.583

我认为您遇到的问题出在这一行

```
return $.trim($(this).text()) !== ''; 
```

'this' 不是指任何值。您需要将变量“min”和“hrs”设置为变量，然后将其放入此位置。为了测试，当你把'hrs'放到这个位置时，它会返回一个值。

# performance - R：通过引用传递数据帧

> ID：11207497
> 
> 赞同：24
> 
> 时间：2012-06-26T12:37:33.907
> 
> 标签：performance, r, dataframe, data.table, proto

R 具有按值传递的语义，可以最大限度地减少意外的副作用（一件好事）。但是，当代码被组织成许多函数/方法以实现可重用性/可读性/可维护性时，以及当代码需要通过例如大数据帧、通过一系列转换/操作来操作大型数据结构时，传递值语义会​​导致大量的数据复制和大量的堆颠簸（一件坏事）。例如，在作为函数参数传递的堆上占用 50Mb 的数据帧将至少复制与函数调用深度相同的次数，并且调用堆栈底部的堆大小将为 N* 50MB。如果函数从调用链的深处返回一个转换/修改的数据帧，那么复制会增加另一个 N。

SO问题[避免传递数据框的最佳方法是什么？](https://stackoverflow.com/questions/596819/what-is-the-best-way-to-avoid-passing-a-data-frame-around)涉及这个主题，但措辞方式避免直接询问传递引用问题，而获胜的答案基本上是说：“是的，传递值是 R 的工作方式”。这实际上并不是 100% 准确的。R 环境支持按引用传递语义，而诸如[proto](http://code.google.com/p/r-proto/)之类的 OO 框架广泛使用此功能。例如，当一个 proto 对象作为函数参数传递时，它的“魔法包装器”是按值传递的，对于 R 开发人员来说，语义是按引用传递的。

似乎通过引用传递大数据框将是一个常见问题，我想知道其他人是如何处理它的，以及是否有任何库可以实现这一点。在我的搜索中，我没有发现一个。

如果没有可用的东西，我的方法是创建一个包装数据框的原型对象。我会很感激有关应该添加到该对象以使其有用的语法糖的指针，例如，重载 $ 和 [[ 运算符，以及我应该注意的任何陷阱。我不是 R 专家。

与 R 很好地集成的与类型无关的按引用传递解决方案的加分点，尽管我的需求完全是数据帧。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-06-26T12:53:06.543

问题的前提（部分）不正确。R 以传递承诺的方式工作，只有在传递承诺时对数据帧进行进一步分配和更改时，才会以您概述的方式重复复制。因此，副本的数量将不是 N*size，其中 N 是堆栈深度，而是其中 N 是进行分配的级别数。但是，您是对的，环境可能很有用。我看到你已经找到了'proto'包的链接。还有一个相对较新的“参考类”，有时称为“R5”，其中 R/S3 是在 R 中复制的 S3 的原始类系统，而 R4 将是最近的类系统，似乎主要支持BioConductor 软件包开发。

以下是 Steve Lianoglou 的一个示例链接（在讨论引用类优点的线程中），该示例将环境嵌入到 S4 对象中以避免复制成本：

[https://stat.ethz.ch/pipermail/r-help/2011-September/289987.html](https://stat.ethz.ch/pipermail/r-help/2011-September/289987.html)

Matthew Dowle 的 'data.table' 包创建了一个新的数据对象类，其使用“[”的访问语义与常规 R data.frames 的访问语义不同，它实际上是作为传递引用工作的。它具有卓越的访问和处理速度。它也可以依靠数据框语义，因为在后来的几年中，这些对象现在继承了“data.frame”类。

您可能还想调查[Hesterberg 的数据框包](http://timhesterberg.home.comcast.net/~timhesterberg/Rpackages/TwoPackages5.pdf)。

# playframework - 播放框架是否支持像 rails 这样的嵌套路由？

> ID：11207503
> 
> 赞同：3
> 
> 时间：2012-06-26T12:37:49.780
> 
> 标签：playframework, routes, url-routing, playframework-2.0

Rails 可以映射在逻辑上是其他资源的子资源的资源 例如在 URL 中

```
/magazines/:magazine_id/ads/:id show    display a specific ad belonging to a specific magazine 
```

是否可以在游戏中做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-26T12:53:23.787

Play 不在乎参数是否代表某种关系，这是控制器的工作。

当然可以这样做：

```
GET /some/:parent/:child   controllers.Application.getRelated(parent: Long, child: Long) 
```

在控制器中：

```
public static Result getRelated(Long parent, Long child) {
    return ok(SomeFinder(parent,child));
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T12:51:08.853

是的，这是可能的。它在您的路由文件中应该如下所示：

```
GET   /magazines/:magazine_id/ads/:id/show   controllers.MyController.show(magazine_id: Long, id: Long) 
```

在你的控制器中

```
public static Result show(Long magazine_id, Long id) {
    ...
} 
```

# python - 在 VisualStudio 2005 C/C++ 中嵌入 wxPython 失败

> ID：11207513
> 
> 赞同：0
> 
> 时间：2012-06-26T12:38:25.210
> 
> 标签：python, visual-studio, visual-c++, wxpython

当我尝试像这样在 C 中嵌入 python wx 时：

```
#include "stdafx.h"
#ifdef _DEBUG
  #undef _DEBUG
  #include <Python.h>
  #define _DEBUG
#else
  #include <Python.h>
#endif

int _tmain(int argc, _TCHAR* argv[])
{
  PyObject* pyModule;
  Py_Initialize();
  //_pyModule = PyImport_ImportModule("__main__");
  //_pyModule = PyImport_ImportModule("csi");
  pyModule = PyImport_ImportModule("wx");
  if(!pyModule)
    PyErr_Print();
  return 0;
} 
```

它失败：

```
->Traceback (most recent call last):
  File "C:\Python27\lib\site-packages\wx-2.8-msw-ansi\wx\__init__.py", line 45, in <module>
  from wx._core import *
  File "C:\Python27\lib\site-packages\wx-2.8-msw-ansi\wx\_core.py", line 4, in <module>
  import _core_
  ImportError: DLL load failed: The specified module could not be found. 
```

msvc*90.dll 文件可能有问题吗？

我正在为 Python 2.7 使用 VS2005、Python 2.7、wxPython 2.8.12.1 (ansi)

安装了更多 MS VC++ 2008/2010 Redistributables。

感谢帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T12:54:43.050

最后我找到了解决方案：

这是一个清单问题。感谢微软的 dll 地狱......

这有助于：

```
//_core_.pyd ImportError
// _core_.pyd is in fact a dll. it can be renamed.
// The problem is that _core_.pyd depends on some Microsoft.VC90.CRT libraries
//this dependency must be added to make it work
#pragma comment(linker, "\"/manifestdependency:type='win32' name='Microsoft.VC90.CRT' version='9.0.21022.8' processorArchitecture='x86' publicKeyToken='1fc8b3b9a1e18e3b' language='*'\"") 
```

# apache - 配置 Tomcat 以利用浏览器缓存？

> ID：11207515
> 
> 赞同：6
> 
> 时间：2012-06-26T12:38:32.013
> 
> 标签：apache, jsf, tomcat, servlets, pagespeed

我在我们的网络应用程序上运行 Google 的[Page Speed](https://developers.google.com/speed/pagespeed/)来分析和优化我们的网站。

Page Speed 中列出的[Web 性能最佳实践](https://developers.google.com/speed/docs/best-practices/caching#LeverageBrowserCaching)下的众多项目之一说： *“为了充分利用在所有浏览器中一致缓存的全部优势，我们建议您将 Web 服务器配置为显式设置缓存标头并将它们应用于所有可缓存的静态资源，不仅仅是一小部分（如图片）。可缓存资源包括 JS 和 CSS 文件、图片文件和其他二进制对象文件（媒体文件、PDF、Flash 文件等）。一般来说，HTML 不是静态的，并且不应该被认为是可缓存的。”*

如何配置 tomcat 以实现相同的功能？我知道它可以通过过滤器通过放置一些 HTTP 标头来完成，但是我们可以通过配置而不接触代码来完成它吗？

*编辑*：我们使用 JSF 1.2 仅作为信息，尽管我认为这与这个问题的上下文无关。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-10T21:15:13.233

如果您使用的是 Tomcat7，则有一个内置过滤器。 [http://tomcat.apache.org/tomcat-7.0-doc/config/filter.html#Expires_Filter](http://tomcat.apache.org/tomcat-7.0-doc/config/filter.html#Expires_Filter)

我们使用美妙的 URlRewriteFilter 来做到这一点。无需更改代码，只需配置到 web.xml，仅此而已。链接和规则如下。

[http://tukey.org/urlrewrite/](http://tuckey.org/urlrewrite/)

```
 <rule>
        <from>^.*\.(js|css|gif)$</from>
        <set type="expires">6 hours</set>
  </rule> 
```

# xml - 用于 Linux 的 xml 查看器

> ID：11207516
> 
> 赞同：23
> 
> 时间：2012-06-26T12:38:32.817
> 
> 标签：xml, linux, ubuntu, xml-visualizer

我想查看大型 XML 文件。我尝试了[XML Copy Editor](http://xml-copy-editor.sourceforge.net/index.php?page=ubuntu)，但它仅在一行中显示 XML 数据，这意味着它没有以正确的格式显示。我在 Google 上看到了 XML Copy Editor 的截图，看起来相当不错。

有人知道如何在 XML Copy Editor 中以正确的格式查看 XML 文件吗？

或者任何其他适用于 Ubuntu 的优秀 XML 查看器？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-11-18T00:59:56.490

你们中没有人建议 Emacs、Vim、Geany 或其他文本编辑器显然不使用企业级 XML 数据......

要了解实际情况，请获取一些平均复杂的 OpenDocument（Open/Libre Office ".odt" 文件，最好带有一些表格和图像）并尝试使用您的 Emacs 或 Vim 对其进行编辑。尝试创建一个新的，预先填写所有必填字段。创建一个新表，或插入一个新图像。使用好的 XML 编辑器，您所需要的只是“右键单击 -> 插入”。

不幸的是，好的 XML 编辑器要花钱。Altova 的 XMLSpy 大约 1000 美元，OxygenXML 少一点。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2018-03-15T07:30:58.803

结合**xmllint**和**less**是一个很好的直觉（@kokosing 的荣誉），是的，**可以使用 less 来突出显示语法！**这是完整且可行的解决方案：

```
xmllint --format yourfile | highlight --syntax=xml --out-format=xterm256 | less -R -N 
```

诀窍是使用：

1.  另一个进行语法高亮的实用程序（高亮可以做到）。
2.  在 less 中使用`-R`(raw) 选项，以便它尊重转义序列；`N`简单地提供行号，这很好。

它工作得非常好，所以[我在 github](https://github.com/fralau/xmlshow)上发布了一个名为*xmlshow*的 bash 脚本的解决方案。

**注意：**下次您使用 less 时，我建议您按下`h`以（重新）发现其惊人的功能范围。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-06-26T12:43:26.040

如果你喜欢使用命令行界面，你会喜欢使用[xmllint](http://linux.about.com/library/cmd/blcmdl1_xmllint.htm)工具来正确格式化 xml 文件，然后你可以使用常规**的 less**来查看这个大的 xml 文件。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-06-26T13:34:02.663

[我最喜欢的编辑器是jEdit](http://jedit.org/)，它恰好可以很好地处理 XML 。jEdit 有大量的功能，使其适用于多种用途，并且是跨平台的，因此我可以在所有计算机上使用相同的编辑器。

jEdit 有几个 XML 插件来进行验证、搜索、转换等。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-06-26T13:40:35.843

检查[Conglomerate](http://www.conglomerate.org/)，它旨在成为每个人都可以使用的 XML 编辑器。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-05-17T09:58:21.903

Checkout [QXmlEdit](http://qxmledit.org)和[CAM XML Editor](http://www.cameditor.org/)都是开源的，可用于 Linux，并且在[sourceforge.net](https://sourceforge.net)上有很好的评价。这些 XML 编辑器可在 Wikipedia [Comparison of XML editors中找到](https://en.wikipedia.org/wiki/Comparison_of_XML_editors)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-04-28T00:39:58.320

> 有人知道如何以正确的格式在 xml 复制编辑器中查看 xml 文件吗？

```
XML > Pretty-print (F11) 
```

您还可以从“文件”菜单中“打开大文档...”

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2020-12-11T09:08:20.617

我来这里是为了寻找一个 XML 工具，结果我已经在使用它了。

[Visual Studio Code](https://code.visualstudio.com/)（像啤酒一样免费）可以很好地读取大型 XML 文件。只需几秒钟即可加载一个 177MB 的 XML 文件。

包括突出显示和折叠。虽然没有 XML 验证，但扩展可以解决这个问题。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2020-06-10T01:18:11.323

我发现最好的一个是[XmlMind](https://www.xmlmind.com/xmleditor/)。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-06-26T12:52:37.210

[在 Linux 中进行 XML 编辑的](https://stackoverflow.com/questions/3429557/xml-editing-in-linux)人们喜欢 400 美元的程序 oxygenXML。[http://alternativeto.net/SearchResult.aspx?search=tag:xml-editor](http://alternativeto.net/SearchResult.aspx?search=tag:xml-editor)上的人喜欢 Geany。抱歉，我不知道您使用 XML Copy Editor 遇到的困难的答案。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-03-27T11:01:23.657

`Sublime Text`相当快。它在 Ubuntu 软件中可用

要缩进使用插件`Indend XML`： [https ://stackoverflow.com/a/44750933/2601507](https://stackoverflow.com/a/44750933/2601507)

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2019-01-11T13:47:32.067

我要说`xml copy`。为什么？因为它似乎工作正常。

如果它`xml`在线，那么这听起来像是那个文件的问题，也许。漏洞？佩布卡克？

`xml`我稍微弄乱了一个文件，然后按下`F11`漂亮的打印，视图就固定了。值得注意的是，关于数据，xml 都在一条线上并不重要。

这是一个很好的问题，但我认为潜在的问题更多是关于使用。也许。以供参考：

[https://en.wikipedia.org/wiki/Comparison_of_XML_editors](https://en.wikipedia.org/wiki/Comparison_of_XML_editors)

我检查了许可证`xml copy`，它看起来`GPL 3`很容易从 apt 安装。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2017-10-10T20:54:33.463

老问题，但[Notepadqq](https://launchpad.net/~notepadqq-team/+archive/ubuntu/notepadqq)非常适合查看 XML 树。这是著名的 Windows 记事本++ 的“兄弟”。

# sql - 序列化程序集不会上传到数据库

> ID：11207519
> 
> 赞同：4
> 
> 时间：2012-06-26T12:38:49.157
> 
> 标签：sql, sql-server, serialization, clr, sqlclr

我有一个调用简单 HTTP Web 服务的 CLR 项目。它以 x64 为目标，我只有在完成以下链接中概述的步骤后才能正确序列化它，该链接讨论了使 VS2010 指向正确的目标架构 (x64) 所需的更改——这些更改只需要卸载和更改 . csproj 文件有一些额外的行来引用 sgen.exe 的正确版本：http: [//geekswithblogs.net/akraus1/archive/2011/12/10/148002.aspx](http://geekswithblogs.net/akraus1/archive/2011/12/10/148002.aspx)

现在，我可以通过将“生成序列化程序集”设置为打开来构建这个项目及其 .XmlSerializers.dll。我想这样做是因为我的 CLR 项目将部署在数据库上，并且我不希望它运行时序列化任何对象，因为我的数据库中没有引用这些 DLL，我不想给我的 CLR 项目权限出于安全原因高于EXTERNAL_ACCESS，因为这将用于安全性很重要的生产环境，并且还因为我的数据库不可信。

长话短说，我正在按照以下链接中的指南将我的序列化程序集上传到数据库中，但出现错误： http: [//footheory.com/blogs/bennie/archive/2006/12/07/invoking-a -web-service-from-a-sqlclr-stored-procedure.aspx](http://footheory.com/blogs/bennie/archive/2006/12/07/invoking-a-web-service-from-a-sqlclr-stored-procedure.aspx)

错误是：为程序集“.XmlSerializers”创建程序集失败，因为程序集是为不受支持的公共语言运行时版本构建的。

有谁知道如何通过强制 sgen.exe 序列化支持 CLR 的程序集版本来纠正此问题？万岁堆栈。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T13:16:31.657

SQL Server 2005/2008/2008R2 仅支持 .Net 2.0。您需要更改您的项目以针对它，请参阅[如何：以特定的 .NET Framework 版本或配置文件为目标](http://msdn.microsoft.com/en-us/library/bb398202.aspx)。您*不需要*为构建目标指定 x64，SQLCLR 程序集应该是通用目标构建的。

也就是说，从 SQLCLR 调用 Web 服务是一个**非常非常糟糕的主意**。不要这样做。让外部进程处理 HTTP 调用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T19:16:17.820

我发现问题实际上不是我使用 .NET 3.5 作为目标，而是我引用了错误版本的 sgen.exe 工具，在这种情况下我需要 x64 版本的 6.0A（转换为 .NET 3.5) 在此路径：C:\Program Files\Microsoft SDKs\Windows\v6.0A\Bin\x64\sgen.exe。现在我能够构建正确版本的序列化程序集，上传它，也可以使用它。

# php - getJSON - 为什么它不起作用？

> ID：11207524
> 
> 赞同：0
> 
> 时间：2012-06-26T12:38:59.050
> 
> 标签：php, javascript, jquery, json

为什么 getJSON 方法只适用于本地文件？如果我想从本地获取 json，它可以工作，但是如果我用 http 设置 url，它就不起作用。为什么？

```
<!DOCTYPE html>
<html>
    <script src="http://code.jquery.com/jquery-latest.js"></script>
    </head>
    <script>
        $.getJSON("http://www.address.com/getTables.php", function (data) {
            $.each(data, function (i, table) {
                $("#tables").append("<p>" + table.id + " " + table.tabname + "</p>");
            });
        });
    </script>

    <body>
        <div id="tables"></div>
    </body>

</html> 
```

返回的 JSON：

```
[{ "id":"12", "tabname":"cukry" }, { "id":"11", "tabname":"table" }] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T12:40:45.950

听起来您可能遇到了[同源策略](http://en.wikipedia.org/wiki/Same_origin_policy)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T07:11:20.417

正如马特所说，这是因为[同源政策](http://en.wikipedia.org/wiki/Same_origin_policy)。尝试使用 JSONP。您只需要像这样将回调添加到您的请求 URL：

```
$.getJSON("http://www.address.com/getTables.php?jsoncallback=?", function (data) {
        $.each(data, function (i, table) {
            $("#tables").append("<p>" + table.id + " " + table.tabname + "</p>");
        });
    }); 
```

[在此处](http://en.wikipedia.org/wiki/JSONP)查看有关 JSONP的更多信息

# c# - 如何将数组拆分为特定大小的块？

> ID：11207526
> 
> 赞同：43
> 
> 时间：2012-06-26T12:39:03.843
> 
> 标签：c#, arrays, split

下午，

我需要将数组拆分为更小的“块”。

我传递了大约 1200 个项目，需要将它们拆分为更易于处理的数组，每个数组包含 100 个项目，然后我需要对其进行处理。

任何人都可以提出一些建议吗？

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2012-06-26T13:07:53.527

Array.Copy 自 1.1 以来就已经存在，并且在分块数组方面做得非常出色。

```
string[] buffer;

for(int i = 0; i < source.Length; i+=100)
{
    buffer = new string[100];
    Array.Copy(source, i, buffer, 0, 100);
    // process array
} 
```

并对其进行扩展：

```
public static class Extensions
{
    public static T[] Slice<T>(this T[] source, int index, int length)
    {       
        T[] slice = new T[length];
        Array.Copy(source, index, slice, 0, length);
        return slice;
    }
} 
```

并使用扩展：

```
string[] source = new string[] { 1200 items here };

// get the first 100
string[] slice = source.Slice(0, 100); 
```

更新：我认为您可能不希望`ArraySegment<>` 进行性能检查，因为它只是使用原始数组作为其源并维护一个 Offset 和 Count 属性来确定“段”。不幸的是，没有办法将段作为数组检索，所以有些人已经为它编写了包装器，比如这里：[Arr​​aySegment - Returning the actual segment C#](https://stackoverflow.com/questions/5756692/arraysegment-returning-the-actual-segment-c-sharp)

```
ArraySegment<string> segment;

for (int i = 0; i < source.Length; i += 100)
{
    segment = new ArraySegment<string>(source, i, 100);

    // and to loop through the segment
    for (int s = segment.Offset; s < segment.Array.Length; s++)
    {
        Console.WriteLine(segment.Array[s]);
    }
} 
```

* * *

## Array.Copy 与 Skip/Take 与 LINQ 的性能

测试方法（在Release模式下）：

```
static void Main(string[] args)
{
    string[] source = new string[1000000];
    for (int i = 0; i < source.Length; i++)
    {
        source[i] = "string " + i.ToString();
    }

    string[] buffer;

    Console.WriteLine("Starting stop watch");

    Stopwatch sw = new Stopwatch();

    for (int n = 0; n < 5; n++)
    {
        sw.Reset();
        sw.Start();
        for (int i = 0; i < source.Length; i += 100)
        {
            buffer = new string[100];
            Array.Copy(source, i, buffer, 0, 100);
        }

        sw.Stop();
        Console.WriteLine("Array.Copy: " + sw.ElapsedMilliseconds.ToString());

        sw.Reset();
        sw.Start();
        for (int i = 0; i < source.Length; i += 100)
        {
            buffer = new string[100];
            buffer = source.Skip(i).Take(100).ToArray();
        }
        sw.Stop();
        Console.WriteLine("Skip/Take: " + sw.ElapsedMilliseconds.ToString());

        sw.Reset();
        sw.Start();
        String[][] chunks = source                            
            .Select((s, i) => new { Value = s, Index = i })                            
            .GroupBy(x => x.Index / 100)                            
            .Select(grp => grp.Select(x => x.Value).ToArray())                            
            .ToArray();
        sw.Stop();
        Console.WriteLine("LINQ: " + sw.ElapsedMilliseconds.ToString());
    }
    Console.ReadLine();
} 
```

* * *

结果（以毫秒为单位）：

```
Array.Copy:    15
Skip/Take:  42464
LINQ:         881

Array.Copy:    21
Skip/Take:  42284
LINQ:         585

Array.Copy:    11
Skip/Take:  43223
LINQ:         760

Array.Copy:     9
Skip/Take:  42842
LINQ:         525

Array.Copy:    24
Skip/Take:  43134
LINQ:         638 
```

* * *

## 回答 #2

> 赞同：45
> 
> 时间：2012-06-26T13:08:44.680

您可以使用`LINQ`按块大小对所有项目进行分组，然后创建新数组。

```
// build sample data with 1200 Strings
string[] items = Enumerable.Range(1, 1200).Select(i => "Item" + i).ToArray();
// split on groups with each 100 items
String[][] chunks = items
                    .Select((s, i) => new { Value = s, Index = i })
                    .GroupBy(x => x.Index / 100)
                    .Select(grp => grp.Select(x => x.Value).ToArray())
                    .ToArray();

for (int i = 0; i < chunks.Length; i++)
{
    foreach (var item in chunks[i])
        Console.WriteLine("chunk:{0} {1}", i, item);
} 
```

请注意，没有必要创建新数组（需要 CPU 周期和内存）。`IEnumerable<IEnumerable<String>>`当你省略这两个时，你也可以使用`ToArrays`。

这是运行代码：http: [//ideone.com/K7Hn2](http://ideone.com/K7Hn2)

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2015-05-22T07:59:55.383

[在这里，](http://www.codeproject.com/Tips/394498/How-to-Split-an-Array-into-Multiple-Arrays)我找到了另一个 linq 解决方案：

```
int[] source = new[] { 1, 2, 3, 4, 5, 6, 7, 8, 9 };
int i = 0;
int chunkSize = 3;
int[][] result = source.GroupBy(s => i++ / chunkSize).Select(g => g.ToArray()).ToArray();

//result = [1,2,3][4,5,6][7,8,9] 
```

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2012-06-26T12:41:10.310

您可以使用`Skip()`和`Take()`

```
string[] items = new string[]{ "a", "b", "c"};
string[] chunk = items.Skip(1).Take(1).ToArray(); 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2012-06-26T12:44:35.457

```
 string[]  amzProductAsins = GetProductAsin();;
    List<string[]> chunks = new List<string[]>();
    for (int i = 0; i < amzProductAsins.Count; i += 100)
    {
        chunks.Add(amzProductAsins.Skip(i).Take(100).ToArray());
    } 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2015-12-10T17:17:06.737

您可以使用[List.GetRange](https://msdn.microsoft.com/en-us/library/21k0e39c(v=vs.110).aspx)：

```
for(var i = 0; i < source.Count; i += chunkSize)
{
    List<string> items = source.GetRange(i, Math.Min(chunkSize, source.Count - i));
} 
```

虽然不如 Array.Copy 快，但我认为它看起来更干净：

```
var list = Enumerable.Range(0, 723748).ToList();

var stopwatch = new Stopwatch();

for (int n = 0; n < 5; n++)
{
    stopwatch.Reset();
    stopwatch.Start();
    for(int i = 0; i < list.Count; i += 100)
    {
        List<int> c = list.GetRange(i, Math.Min(100, list.Count - i));
    }
    stopwatch.Stop();
    Console.WriteLine("List<T>.GetRange: " + stopwatch.ElapsedMilliseconds.ToString());

    stopwatch.Reset();
    stopwatch.Start();
    for (int i = 0; i < list.Count; i += 100)
    {
        List<int> c = list.Skip(i).Take(100).ToList();
    }
    stopwatch.Stop();
    Console.WriteLine("Skip/Take: " + stopwatch.ElapsedMilliseconds.ToString());

    stopwatch.Reset();
    stopwatch.Start();
    var test = list.ToArray();
    for (int i = 0; i < list.Count; i += 100)
    {
        int length = Math.Min(100, list.Count - i);
        int[] c = new int[length];
        Array.Copy(test, i, c, 0, length);
    }
    stopwatch.Stop();
    Console.WriteLine("Array.Copy: " + stopwatch.ElapsedMilliseconds.ToString());

    stopwatch.Reset();
    stopwatch.Start();
    List<List<int>> chunks = list
        .Select((s, i) => new { Value = s, Index = i })
        .GroupBy(x => x.Index / 100)
        .Select(grp => grp.Select(x => x.Value).ToList())
        .ToList();
    stopwatch.Stop();
    Console.WriteLine("LINQ: " + stopwatch.ElapsedMilliseconds.ToString());
} 
```

以毫秒为单位的结果：

```
List<T>.GetRange: 1
Skip/Take: 9820
Array.Copy: 1
LINQ: 161

List<T>.GetRange: 9
Skip/Take: 9237
Array.Copy: 1
LINQ: 148

List<T>.GetRange: 5
Skip/Take: 9470
Array.Copy: 1
LINQ: 186

List<T>.GetRange: 0
Skip/Take: 9498
Array.Copy: 1
LINQ: 110

List<T>.GetRange: 8
Skip/Take: 9717
Array.Copy: 1
LINQ: 148 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-06-26T12:41:46.637

使用 LINQ，可以使用 Take() 和 Skip() 函数

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-01-15T18:38:11.740

通用递归扩展方法：

```
 public static IEnumerable<IEnumerable<T>> SplitList<T>(this IEnumerable<T> source, int maxPerList)
    {
        var enumerable = source as IList<T> ?? source.ToList();
        if (!enumerable.Any())
        {
            return new List<IEnumerable<T>>();
        }
        return (new List<IEnumerable<T>>() { enumerable.Take(maxPerList) }).Concat(enumerable.Skip(maxPerList).SplitList<T>(maxPerList));
    } 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2016-02-28T22:22:34.180

如果您有一个要划分的数组，但通过这个简单的解决方案，您可以将缺少的元素平等地共享到各个“块”中。

```
int[] arrInput = new int[] { 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12 };
var result = SplitArrey(arrInput, 5);
foreach (var item in result) {
  Console.WriteLine("   {0}", String.Join(" ", item));
} 
```

功能是：

```
public static List<int[]> SplitArrey(int[] arrInput, int nColumn) {

        List<int[]> result = new List<int[]>(nColumn);

        int itemsForColum = arrInput.Length / nColumn;  
        int countSpareElement = arrInput.Length - (itemsForColum * nColumn);    

        // Add and extra space for the spare element
        int[] newColumLenght = new int[nColumn];
        for (int i = 0; i < nColumn; i++)
        {
            int addOne = (i < countSpareElement) ? 1 : 0;
            newColumLenght[i] = itemsForColum + addOne;
            result.Add(new int[itemsForColum + addOne]);
        }

        // Copy the values
        int offset = 0;
        for (int i = 0; i < nColumn; i++)
        {
            int count_items_to_copy = newColumLenght[i];
            Array.Copy(arrInput, offset, result[i], 0, count_items_to_copy);
            offset += newColumLenght[i];
        }
        return result;
    } 
```

结果是：

```
1 2 3
4 5 6
7 8
9 10
11 12 
```

# hbase - 如何设置hbase集群的启动参数

> ID：11207528
> 
> 赞同：0
> 
> 时间：2012-06-26T12:39:16.393
> 
> 标签：hbase, cluster-computing

如何设置hbase集群的启动参数，如：

区域服务器：

```
-Xms16g -Xmx16g -Xmn2g -XX:SurvivorRatio=2 -XX:+UseCMSInitiatingOccupancyOnly -XX:CMSInitiatingOccupancyFraction=85 
```

数据节点：

```
-Xms2g -Xmx2g 
```

如何设置这个启动参数？它们是在启动 hbase 集群中`hbase-env.sh`还是在启动之前设置的？`hbase-site.xml`

我注意到只有一个`maxheapsize`选项`hbase-env.sh`，那么如何设置其他参数？详细点，谢谢 :)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T19:52:05.977

您会注意到这是分别在 hbase-env.sh 和 hadoop-env.sh 中的 HBASE_OPTS 和 HADOOP_OPTS 设置，您可以在这些文件中设置上述内容。

# android - 在不使用 AsyncTask 的情况下动态更新 TextField

> ID：11207529
> 
> 赞同：1
> 
> 时间：2012-06-26T12:39:16.633
> 
> 标签：android

我有一个简短的问题。如何在不使用 AsyncTask 的情况下更新 TextField？在我的 Activity 类中，我有一个这样的函数：

```
private void CheckBlueToothState(){

      if (bluetoothAdapter == null){
            status.setText("Bluetooth NOT support.");
        }else{
            if (bluetoothAdapter.isEnabled()){
                if(bluetoothAdapter.isDiscovering()){
                    status.setText("Bluetooth is currently in device discovery process.");
                }else{
                    status.setText("Bluetooth is Enabled");
                    search.setEnabled(true);
                }
            }else{
                status.setText("Bluetooth is NOT Enabled");
                Intent enableBtIntent = new Intent(BluetoothAdapter.ACTION_REQUEST_ENABLE);
                startActivityForResult(enableBtIntent, REQUEST_ENABLE_BT);
            }
        }
    } 
```

它检查设备是否有蓝牙，它是启用还是禁用，你希望得到图片。所以再次回答我的问题。如果我打开蓝牙，如何动态更改文本字段`status`，反之亦然？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-26T12:42:30.100

注册[`BroadcastReceiver`](http://developer.android.com/reference/android/content/BroadcastReceiver.html)意图操作`BluetoothAdapter.ACTION_STATE_CHANGED`并将您的文本更新代码移动到`onReceive`方法中。

示例代码可以在[这里](https://stackoverflow.com/questions/9693755/detecting-state-changes-made-to-the-bluetoothadapter)找到。

# iphone - 单击表格视图单元格中的下载按钮时，在相应单元格中显示进度视图

> ID：11207535
> 
> 赞同：1
> 
> 时间：2012-06-26T12:39:43.720
> 
> 标签：iphone

我是 iphone 新手。我在我的项目中遇到了一些任务（即），我有一个 66 行的表格视图。我为每个单元格放置了不同的书名，并为每本书放置了一个下载按钮。我的要求是当我们单击下载按钮时，它仅在该特定单元格中显示进度视图，但我正在进入该特定单元格，但是当我拖动表格视图时，它也会在某些单元格中显示进度视图。这是因为出列可重用性概念，但我不知道如何避免这个问题。我希望即使在拖动 tableview 之后它也会在单元格上显示进度视图，我单击下载按钮（单元格）

这是我下面的代码..

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{

    // Return the number of sections.
    return 1;
}
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{

    return 66;

}

- (UITableViewCell *)tableView:(UITableView *)_tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UIButton *downloadButton = nil;
    CustomCell *cell = [_tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil) 
    {
  //here custom cell is another class in that we have the title label declaration
        cell = [[CustomCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier];
         downloadButton = [UIButton buttonWithType:UIButtonTypeCustom];
        downloadButton.frame = CGRectMake(220,10,50,30);
        [downloadButton setImage:[UIImage imageNamed:@"download.png"] forState:UIControlStateNormal];
        [downloadButton addTarget:self action:@selector(downloadButtonClicked:) forControlEvents:UIControlEventTouchUpInside];
        downloadButton.backgroundColor = [UIColor clearColor];
        downloadButton.userInteractionEnabled = YES;
        downloadButton.highlighted = YES;
        downloadButton.tag = indexPath.row;
        NSLog(@"tag is %d",indexPath.row);
        [cell.contentView addSubview:downloadButton];
}    

   NSString *titleLabel = [[appDelegate getBookNames]objectAtIndex:indexPath.row];
    cell.TitleLabel.text = titleLabel;

    return cell;
}

-(void)downloadButtonClicked:(id)sender{
  int index = [sender tag];
    NSLog(@"index of the cell is %d",index);
    UIButton *button = (UIButton*)sender;

    UITableViewCell *cell = (UITableViewCell *)[[button superview] superview];

    UILabel *titleLabel = (UILabel *)[cell viewWithTag:100];

    NSLog(@"label text =%@",titleLabel.text);
    selectedBookTitle = titleLabel.text;
    NSString* documentsPath = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];
    NSMutableArray *allDownloadLinks;
    biblePlayerViewController = [[BiblePlayerViewController alloc]init]; 
   allDownloadLinks = [biblePlayerViewController allDownloadLinks];
    NSLog(@"all Download Links are %@",allDownloadLinks);
    biblePlayerViewController.indexOfSelectedBookTitle = [[appDelegate getBookNames]indexOfObject:selectedBookTitle];

    Download* download = [Download downloadWithTitle:selectedBookTitle url:[NSURL URLWithString:[NSString stringWithFormat:@"http://www.audiotreasure.com/%@.zip",[allDownloadLinks objectAtIndex:(biblePlayerViewController.indexOfSelectedBookTitle)]]]PathtoSave:documentsPath];
    [[DownloadManager sharedDownloadManager] queueDownload: download];

   UITableViewCell *tableViewCell = [tableView cellForRowAtIndexPath:indexPath];

    progressView.frame = CGRectMake(10, 40, 300, 20);
    [tableViewCell.contentView addSubview:progressView];

} 
```

[我的项目的屏幕截图](http://i.stack.imgur.com/f9Rdi.png)是[我在模拟器中的上述代码的输出]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T12:51:49.703

您应该每次在 cellForRow 中将单元格设为 nil。这样它就不会每次都被重复使用和分配。在你的情况下它应该工作得很好，因为你的 tableview 不是很大。只需在 cell == nil 检查之前添加以下行：

```
cell = nil; 
```

它现在应该可以工作了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T13:31:06.930

我有同样的问题，避免它的一种方法是在下载过程中锁定表格的滚动能力。

# string - 替换字符串两个不同的部分

> ID：11207540
> 
> 赞同：2
> 
> 时间：2012-06-26T12:39:57.853
> 
> 标签：string, excel, replace, vba

我正在从一系列文件名中提取一列数据。我所有的文件名都是以下形式的字符串：

`Temporary PSD Report 'Month' 2011.xls`

我`Replace`用来从每个月中提取月份，目前我分两个阶段进行操作，但似乎有点笨拙。`AND`有没有办法在同一个字符串中使用某种类型的多个替换？

```
 Dim strfilename As String
    Dim mnth As String
    Dim mnthshrt As String

    mnth = Replace(strfilename, "Temporary PSD Report ", "")
    mnthshrt = Replace(mnth, " 2011.xls", "") 
```

我尝试使用`&`并`AND`引用要删除的两个部分，但它对原始字符串没有影响或产生错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T12:56:55.137

您还可以在每个空格字符处拆分字符串并取第 4 个单词（索引从 0 开始）：

```
s = "Temporary PSD Report 'Month' 2011.xls"
mth = Split(s, " ")(3) 
```

# java - 滚动窗格中可调整大小的画布或面板

> ID：11207552
> 
> 赞同：0
> 
> 时间：2012-06-26T12:40:39.070
> 
> 标签：java, awt

我想创建具有 Canvas 或 Panel 的 java 小程序。现在，当我开始使用 drawstring() 输入数据时，Canvas 或 Panel 的高度应该动态增加并且滚动条应该可见。

我怎样才能实现这样的小程序？

请让我知道，即使这可以通过使用 Canvas 或 Panel 以外的控件来实现。

先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T20:47:46.677

使用摇摆。为什么要在 a`JTextArea`或`JEditorPane`可以轻松绘制文本时绘制文本？

将`JTextComponent`a 放入 a`JScrollPane`中，将其放入 a 中，将 a`JPanel`添加`JPanel`到 a`JApplet`中。任务完成。

# php - 推进基于连接表列的过滤？

> ID：11207564
> 
> 赞同：4
> 
> 时间：2012-06-26T12:41:13.593
> 
> 标签：php, propel

如何根据 Propel 中连接表的列进行过滤？

像：

```
$results = FooQuery::create()->joinBar()->filterByBarSurname('surname'); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-26T12:47:31.857

您必须使用[文档](http://www.propelorm.org/reference/model-criteria.html#embedding_a_related_query)`use`中描述的方法：

```
$results = FooQuery::create()
  ->useBarQuery()
    ->filterBySurname('surname')
  ->endUse()
  ->find();

// example Query generated for a MySQL database
$query = 'SELECT foo.* from foo
INNER JOIN bar ON foo.BAR_ID = bar.ID
WHERE bar.SURNAME = :p1'; // :p1 => 'surname' 
```

如果您**必须**使用`join()`，我认为您不能使用`filterByXXX`方法，而是使用旧的`where`：

```
$results = FooQuery::create()
  ->join('Foo.Bar')
  ->where('Bar.surname = ?', 'surname')
  ->find(); 
```

# objective-c - 子类化和“提升”对象

> ID：11207567
> 
> 赞同：0
> 
> 时间：2012-06-26T12:41:33.547
> 
> 标签：objective-c, ios, subclassing

我有一堂课：

```
BasicObject : NSObject

AdvObject : BasicObject 
```

在其他类中，我通过以下方式创建一个实例：

```
BasicObject *bObj = [[BasicObject alloc] initWithSomething:propertyOne andSomethingElse:propertyTwo]; 
```

BasicObject 有两个属性：

```
@interface BasicObject : NSObject

-(id)initWithSomething:propertyOne andSomethingElse:propertyTwo;

@property (strong,nonatomic) NSString* propertyOne;
@property (strong,nonatomic) NSArray* propertyTwo; 
```

然后在初始化程序中：

```
-(id)initWithSomething:propertyOne andSomethingElse:propertyTwo
{
    if (self = [super init])
    {
        _propertyOne = propertyOne;
        _propertyTwo = propertyTwo;

        if(!propertyTwo) //this is not valid condition i know, not important here
          {
             AdvObject *aObj = [[AdvObject alloc] initWithBasic:self]; //here it what i'm more concern about
             return aObj;
          }
    }

    return self;
} 
```

所以在初始化程序中的 AdvObject 类中我有：

```
@implementation AdvObject

@synthesize basics = _basics;

-(id)initWithBasic:(BasicObject *)bObj
{
    if(self = [super init]) {
        _basics = bObj;
    }

    return self;
} 
```

之后，当我返回这个对象时，我当然有一个正确填充的 object.basics，但是为什么我不能访问 object.propertyOne？（这是零）。我做错了什么？这是一个正确的设计吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T12:59:34.273

或者，您可以避免整个模式过于聪明，并创建一个根据传递给它的参数返回 a`BasicObject`或 an的类工厂方法。`AdvObject`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T13:29:15.940

您的`init...`方法需要做一些不同的事情，如下所示：

```
- (id)initWithSomething:propertyOne andSomethingElse:propertyTwo
{
    if (self = [super init])
    {
        if (!propertyTwo)
        {
             self = [[AdvObject alloc] initWithBasic:self];
        }

        _propertyOne = propertyOne;
        _propertyTwo = propertyTwo;
    }

    return self;
} 
```

我实际上并没有用 ARC 尝试过这个，所以你需要仔细测试一下。

# java - 将单行 HTML 文件划分为格式良好的 HTML 文件

> ID：11207569
> 
> 赞同：0
> 
> 时间：2012-06-26T12:41:42.653
> 
> 标签：java, html, parsing

我有一个 HTML 文件，其中所有标签都在一行中。我想将每个标签分开并将其放在自己的行上。最终目标是拥有一个格式良好的 HTML 文件。

例如

`<html><head><title>StackOverflow</title></head><body></body></html>`

将转换为：

```
<html>
    <head>
        <title>
        StackOverflow
        </title>
    </head>
    <body>
    </body>
</html> 
```

是否有现有的 Java 库可以处理这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T12:55:02.527

您的问题与格式良好的 HTML 文件无关。即使 html 标签在同一行，也不意味着 html 格式不正确。你真正需要的只是一个格式化程序，它基本上会让你的 html 更易于阅读。您可以查看[JTidy](http://jtidy.sourceforge.net/)，它还可以选择进行语法检查。

# mysql - 如何在不违反唯一约束的情况下交换 MySQL 中两行的值？

> ID：11207574
> 
> 赞同：46
> 
> 时间：2012-06-26T12:42:01.020
> 
> 标签：mysql

我有一个带有优先级列的“任务”表，它有一个唯一的约束。

我试图交换两行的优先级值，但我一直违反约束。我在类似情况的某处看到了这个声明，但不是在 MySQL 中。

```
UPDATE tasks 
SET priority = 
CASE
    WHEN priority=2 THEN 3 
    WHEN priority=3 THEN 2 
END 

WHERE priority IN (2,3); 
```

这将导致错误：

```
Error Code: 1062\. Duplicate entry '3' for key 'priority_UNIQUE' 
```

是否可以在不使用虚假值和多个查询的情况下在 MySQL 中完成此操作？

编辑：

这是表结构：

```
CREATE TABLE `tasks` (
  `id` int(11) NOT NULL,
  `name` varchar(200) DEFAULT NULL,
  `priority` varchar(45) DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `priority_UNIQUE` (`priority`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 
```

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-06-26T13:05:46.747

> *是否可以在不使用虚假值和多个查询的情况下在 MySQL 中完成此操作？*

**没有。**（没有我能想到的）。

The problem is how MySQL processes updates. MySQL (in difference with other DBMS that implement `UPDATE` properly), processes updates in a broken manner. It enforces checking of `UNIQUE` (and other) constraints after every single row update and not - as it should be doing - after the whole `UPDATE` statement completes. That's why you don't have this issue with (most) other DBMS.

For some updates (like increasing all or some ids, `id=id+1`), this can be solved by using - another non-standard feature - an `ORDER BY` in the update.

For swapping the values from two rows, that trick can't help. You'll have to use `NULL` or a bogus value (that doesn't exist but is allowed in your column) and 2 or 3 statements.

You could also temporarily remove the unique constraint but I don't think that's a good idea really.

* * *

So, if the unique column is a signed integer and there are no negative values, you can use 2 statements wrapped up in a transaction:

```
START TRANSACTION ;
    UPDATE tasks 
    SET priority = 
      CASE
        WHEN priority = 2 THEN -3 
        WHEN priority = 3 THEN -2 
      END 
    WHERE priority IN (2,3) ;

    UPDATE tasks 
    SET priority = - priority
    WHERE priority IN (-2,-3) ;
COMMIT ; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-05-05T03:54:04.313

I bumped into the same issue. Had tried every possible single-statement query using CASE WHEN and TRANSACTION - no luck whatsoever. I came up with three alternative solutions. You need to decide which one makes more sense for your situation. In my case, I'm processing a reorganized collection (array) of small objects returned from the front-end, new order is unpredictable (this is not a swap-two-items deal), and, on top of everything, change of order (usually made in English version) must propagate to 15 other languages.

1.  1st method: Completely DELETE existing records and repopulate entire collection using the new data. Obviously this can work only if you're receiving from the front-end everything that you need to restore what you just deleted.

2.  2st method: This solution is similar to using bogus values. In my situation, my reordered collection also includes original item position before it moved. Also, I had to preserve original index value in some way while UPDATEs are running. The trick was to manipulate bit-15 of the index column which is UNSIGNED SMALLINT in my case. If you have (signed) INT/SMALLINT data type you can just invert the value of the index instead of bitwise operations.

First UPDATE must run only once per call. This query raises 15th bit of the current `index` fields (I have unsigned smallint). Previous 14 bits still reflect original index value which is never going to come close to 32K range.

```
UPDATE *table* SET `index`=(`index` | 32768) WHERE *condition*; 
```

Then iterate your collection extracting original and new index values, and UPDATE each record individually.

```
foreach( ... ) {
    UPDATE *table* SET `index`=$newIndex WHERE *same_condition* AND `index`=($originalIndex | 32768);
} 
```

This last UPDATE must also run only once per call. This query clears 15th bit of the `index` fields effectively restoring original index value for records where it hasn't changed, if any.

```
UPDATE *table* SET `index`=(`index` & 32767) WHERE *same_condition* AND `index` > 32767; 
```

3.  Third method would be to **move** relevant records into temporary table that doesn't have a primary key, UPDATE all indexes, then **move** all records back to first table.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-03-10T09:53:43.197

Bogus value option:

Okay, so my query is similar and I've found a way to update in "one" query. My `id` column is PRIMARY and `position` is part of a UNIQUE group. This is my original query that doesn't work for swapping:

```
INSERT INTO `table` (`id`, `position`)
  VALUES (1, 2), (2, 1)
  ON DUPLICATE KEY UPDATE `position` = VALUES(`position`); 
```

.. but position is an unsigned integer and it's never 0, so I changed the query to the following:

```
INSERT INTO `table` (`id`, `position`)
  VALUES (2, 0), (1, 2), (2, 1)
  ON DUPLICATE KEY UPDATE `position` = VALUES(`position`); 
```

.. and now it works! Apparently, MYSQL processes the values groups in order.

Perhaps this would work for you (not tested and I know almost nothing about MYSQL):

```
UPDATE tasks 
SET priority = 
CASE
    WHEN priority=3 THEN 0 
    WHEN priority=2 THEN 3 
    WHEN priority=0 THEN 2 
END 

WHERE priority IN (2,3,0); 
```

Good luck.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-09-23T08:12:09.257

Had a similar problem.

I wanted to swap 2 id's that were unique AND was a FK from an other table.

The fastest solution for me to swap two unique entries was:

1.  Create a ghost entry in my FK table.
2.  Go back to my table where I want to switch the id's.
3.  Turned of the FK Check `SET FOREIGN_KEY_CHECKS=0;`
4.  Set my first(A) id to the ghost(X) fk (free's A)
5.  Set my second (B) id to A (free's B)
6.  Set A to B (free's X)
7.  Delete ghost record and turn checks back on. `SET FOREIGN_KEY_CHECKS=1;`

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2014-12-17T13:30:38.517

Not sure if this would violate the constraints, but I have been trying to do something similar and eventually came up with this query by combining a few of the answers I found:

```
UPDATE tasks as T1,tasks as T2 SET T1.priority=T2.priority,T2.priority=T1.priority WHERE (T1.task_id,T2.task_id)=($T1_id, $T2_id) 
```

The column I was swapping did not use a unique, so I am unsure if this will help...

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2012-06-26T13:51:12.667

you can achieve swapping your values with your above mentioned update statement, with a slight change in your key indexes.

```
CREATE TABLE `tasks` (   `id` int(11) NOT NULL,   `name` varchar(200) DEFAULT NULL,   `priority` varchar(45) DEFAULT NULL,   PRIMARY KEY (`id`,`priority`) ) ENGINE=InnoDB DEFAULT CHARSET=utf8; 
```

This will have a primary key index as a combination of id and priority. you cna then swap values.

```
UPDATE tasks 
SET priority = 
CASE
    WHEN priority=2 THEN 3 
    WHEN priority=3 THEN 2 
END 

WHERE priority IN (2,3); 
```

I dont see any need of user variables or temp variables here. Hope this solves your issue :)

# http - 如何使用 ZendCache 缓存不同的 http 方法，GET 与 POST？

> ID：11207575
> 
> 赞同：0
> 
> 时间：2012-06-26T12:42:03.563
> 
> 标签：http, zend-framework, caching

我怎样才能使 Zend Cache 在不同的 http 方法之间产生差异？

现在，例如，如果我进行 GET 调用，它会被缓存并且在之后工作当然更快，但是如果我在同一个 uri 之后进行 POST 调用，它会将来自此 uri 上最后一个缓存的 GET 的数据发回给我。

所以基本上，我认为它使用 uri 作为缓存项目的 id，而不是调用的类型。在这种情况下该怎么办？我有一个完整的客户端，我尝试从中缓存结果。

```
 protected function _initCache()
     {

  $dir = APPLICATION_PATH .'/../public/tmp/cache/' ;

         $frontendOptions = array(
             'lifetime' => 10,
             'content_type_memorization' => true,
            'default_options'           => array(
            'cache' => true,
            'cache_with_get_variables' => true,
            'cache_with_post_variables' => true,
            'cache_with_session_variables' => true,
            'cache_with_cookie_variables' => false,
                 'automatic_cleaning_factor' => 0,
             ),
         'regexps' => array(
                 '^/api/' => array('cache' => true),
                 '^/api2/' => array('cache' => true),
                  )
         );

         $backendOptions = array(
                   'cache_dir' =>$dir,
       'hashed_directory_level' => 1
         );

         $cache = Zend_Cache::factory('Page',
                              'File',
                              $frontendOptions,
                              $backendOptions);

         Zend_Db_Table_Abstract::setDefaultMetadataCache($cache);
         Zend_Registry::set('Cache', $cache);

     } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T14:17:03.347

您已明确指定：

```
 'cache_with_get_variables' => true,
        'cache_with_post_variables' => true, 
```

因此，如果 $_GET 和 $_POST 变量在两个请求上相同，那么您在每个请求上都会收到相同的缓存结果。简单的解决方案是指定一个 $_POST only 参数来区分请求。

# php - 跟踪用户访问我的网站所遵循的链接

> ID：11207577
> 
> 赞同：1
> 
> 时间：2012-06-26T12:42:13.093
> 
> 标签：php, url, hyperlink, web-crawler

我想像谷歌分析一样跟踪用户访问我网站的链接？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T12:43:07.293

除非您与其他网站有关系并且他们允许您向链接添加跟踪详细信息，否则您无法可靠地获取此信息。您可以从 HTTP 请求标头中获取引荐来源信息，但它们并不完全可靠。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-26T12:47:35.510

```
if (isset($_SERVER['HTTP_REFERER'])) {
    if (preg_match('/^https?\:\/\/(www\.)?\mywebsite\.(com|org|net)$/im', $_SERVER['HTTP_REFERER'])) {
        // from your website //
    } else {
        // from other website //
    }
} else {
    // direct typing in browser //
} 
```

以上正则表达式仅匹配

```
http://website.com
https://website.com
https://www.website.com
http://www.website.com 
```

编写自己的正则表达式。希望这对您有所帮助。谢谢你。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-26T12:45:33.750

您可以检查[$_SERVER['HTTP_REFERER']](http://php.net/manual/en/reserved.variables.server.php)值，它将包含用户单击以访问您的页面的 URL。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T12:45:04.993

您可以使用 $_SERVER 数组的“HTTP_REFERER”属性，但它们不是 100% 可靠的

正如约翰康德所说

# html - CSS下拉菜单问题，垂直对齐

> ID：11207582
> 
> 赞同：0
> 
> 时间：2012-06-26T12:42:27.587
> 
> 标签：html, css

我试图水平和垂直对齐列表中的顶部锚标记。 [http://jsfiddle.net/Hk7HC/](http://jsfiddle.net/Hk7HC/)

但我正在做一场噩梦。我的“上市优势”右侧的下拉菜单也会跳到列表的顶部..啊！任何帮助将不胜感激 ：）

```
 <div id = "menu">
        <ul id="nav">
            <li class="rhombusStart">&nbsp;</li>
            <li class="rhombus"><a class="rhlink" href="#"><span>Home</span></a></li>
            <li class="rhombus"><a class="rhlink" href="#"><span>Market <br> Update</span></a></li>
            <li class="rhombus"><a class="rhlink" href="#"><span>Membership</span></a></li>
            <li class="rhombus"><a class="rhlink" href="#"><span>FISC Info</span></a>
                <ul>
                    <li><a class="linkchild" href="#">About the FISC</a></li>
                    <li><a class="linkchild" href="#">International</a></li>
                    <li><a class="linkchild" href="#"><img class = "arrow" src="Images/arrow.png" alt="&#9658;">Advantages of listing</a> 
                        <ul>
                            <li><a class="linkchild" href="#">Advantages of Listing</a></li>
                            <li><a class="linkchild" href="#">Products</a></li>
                        </ul>
                    </li>
                    <li><a class="linkchild" href ="#">Links</a></li>
                </ul>
            </li>
            <li class="rhombus"><a class="rhlink" href="#"><span>Contact Us</span></a>
                 <ul>
                    <li><a class="linkchild" href="#">About US</a></li>
                     <li><a class="linkchild" href="#">Details</a></li>
                    <li><a class="linkchild" href="#">Location</a></li>
                  </ul>
            </li>
            <li class="rhombusEnd">&nbsp;</li>
        </ul>
    </div>

/*******************************************
 Menu Styling
*******************************************/
#menu {
    margin: 0 auto;
    padding-left: 2%;
    width: 1024px;
    height: 3.5em;
    position: relative;
    top: 0;
    background-color: rgb(255,194,14);
    border: 1px solid rgb(140,51,61)
}
#nav {
     margin:0;
     padding:0;
     list-style-type:none;
     list-style-position:outside;
     position:relative;
     height:3.5em;
     background-color: rgb(255,194,14);
     display: table;
}

#nav ul {
     margin:0;
     padding:0;
     list-style-type:none;
     list-style-position:outside;
     position:relative;
     background-color: rgb(255,194,14);
}

#nav a.linkchild:link,
#nav a.linkchild:active,
#nav a.linkchild:visited {
    display:block;
    padding:0px 5px;
    text-decoration:none;
    background: #b95d73; /* Old browsers */
    color: white;
}

#nav a.rhlink:link, #nav a.rhlink:active, #nav a.rhlink:visited {
    display: block;
    padding: 0px 5px;
    text-decoration: none;
    color: inherit;
}

#nav li.rhombus:hover {
    background: #b95d73;
    color: white;
    text-decoration: none;
}

#nav a.linkchild:hover {
   background: rgb(118,0,18);
   color: white;
}

#nav > li {
    float:left;
    position:relative;
}

#nav > li.rhombus {
    float:left;
    position: relative;
    -webkit-transform-origin:0 0;
    -moz-transform-origin:0 0;
    -ms-transform-origin:0 0;
    -o-transform-origin:0 0;
    transform-origin:0 0;
    -webkit-transform:skew(35deg);
    -moz-transform:skew(35deg);
    -ms-transform:skew(35deg);
    -o-transform:skew(35deg);
    transform:skew(35deg);
    border-right: 1px solid rgb(239,89,24);
    border-left: 1px solid rgb(255,244,80);
    background-color: rgb(255,194,14);
    font-family: Georgia;
    color: rgb(131,0,26);
    width: 8em;
    text-align: center;
    height: 3.5em;
}
#nav > li.rhombusStart {
    float:left;
    position: relative;
    -webkit-transform-origin:0 0;
    -moz-transform-origin:0 0;
    -ms-transform-origin:0 0;
    -o-transform-origin:0 0;
    transform-origin:0 0;
    -webkit-transform:skew(35deg);
    -moz-transform:skew(35deg);
    -ms-transform:skew(35deg);
    -o-transform:skew(35deg);
    transform:skew(35deg);
    border-right: 1px solid rgb(239,89,24);
    background-color: rgb(255,194,14);
    width: 1em;
    height: 3.5em;

}
#nav > li.rhombusEnd {
    float: left;
    position: relative;
    -webkit-transform-origin: 0 0;
    -moz-transform-origin: 0 0;
    -ms-transform-origin: 0 0;
    -o-transform-origin: 0 0;
    transform-origin: 0 0;
    -webkit-transform: skew(35deg);
    -moz-transform: skew(35deg);
    -ms-transform: skew(35deg);
    -o-transform: skew(35deg);
    transform: skew(35deg);
    border-left: 1px solid rgb(255,244,80);
    background-color: rgb(255,194,14);
    width: 1em;
    height: 3.5em;
}   

li.rhombus > a span {
    -webkit-transform:skew(-35deg);
    -moz-transform:skew(-35deg);
    -ms-transform:skew(-35deg);
    -o-transform:skew(-35deg);
    transform:skew(-35deg);

    text-decoration: none;
    vertical-align: middle;
    display: table-cell;     
 }

li.rhombus > ul {
    -webkit-transform-origin:0 0;
    -moz-transform-origin:0 0;
    -ms-transform-origin:0 0;
    -o-transform-origin:0 0;
    transform-origin:0 0;
    -webkit-transform:skew(-35deg);
    -moz-transform:translate(0,1px) skew(-35deg);
    -ms-transform:skew(-35deg);
    -o-transform:skew(-35deg);
    transform:skew(-35deg);
}

#nav ul {
    position:absolute;
    top:3.5em;
    left:0;
    width:15em;
    display:none;
}

#nav li ul a {
    width:15em;
    float:left;
    border-bottom: 1px, solid, rgb(145,0,34);
    border-top: 1px, solid, rgb(178,77,101);
    display: block;
    line-height: 2em;
    text-align: left;
    display: table-cell; 
}

#nav ul ul {
    top:auto;
}

#nav li ul ul {
    left:15em;
    margin:0px 0 0 10px;
}

#nav li:hover ul ul,
#nav li:hover ul ul ul,
#nav li:hover ul ul ul ul {
    display:none;
}

#nav li:hover ul,
#nav li li:hover ul,
#nav li li li:hover ul,
#nav li li li li:hover ul {
    display:block;
}

img.arrow 
{
    float: right;
    vertical-align: middle;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T12:50:42.973

为您的父级锚点提供`line-height`与导航高度相同的 a 会使文本垂直居中。

`line-height:3.5em;`

在此处查看更新的 jsfiddle：http: [//jsfiddle.net/Hk7HC/4/](http://jsfiddle.net/Hk7HC/4/)

还要修复您的弹出菜单，删除`top:auto`并使用`margin-top`如下：

```
#nav ul ul {
//removed top:auto
}

#nav li ul ul {
    left:15em;
    margin:8px 0 0 10px; //adjusted top-margin to 8px
} 
```

请参阅固定垂直对齐和弹出窗口的工作示例：http: [//jsfiddle.net/Hk7HC/8/](http://jsfiddle.net/Hk7HC/8/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T12:48:01.737

尝试将此添加到您的锚标签：

```
 text-align: center;
 display: inline-block; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T12:54:25.507

添加你的 CSS

`line-height :3.5em`在`#nav > li.rhombus`

并替换`display:table-cell`为`li.rhombus > a span``display:block`

**请参阅工作示例：http:** [//jsfiddle.net/rathoreahsan/Hk7HC/7/](http://jsfiddle.net/rathoreahsan/Hk7HC/7/)

# iframe - 在 Iframe Portlet 中自定义页面

> ID：11207587
> 
> 赞同：0
> 
> 时间：2012-06-26T12:42:51.720
> 
> 标签：iframe, integration, portlet, liferay-6

有没有办法使用额外的 css 或 javascript 以某种方式自定义 iframe portlet 中页面的外观和感觉？**[这个问题](http://www.liferay.com/community/forums/-/message_boards/message/4380535)**的一个答案暗示它是可能的，但尚不清楚它究竟是如何可能的。

**环境：** *Liferay 6.1.0，IBM WAS v7.0*

[*我知道这可以使用 Web 代理 Portlet 来实现，但由于其自身的复杂性，它目前不是一个选择。*]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T12:59:29.903

我认为最好的方法是让其他系统接受一些参数并进行此更改。因此，在您的 iframe portlet 中，您可以将一些参数传递给其他系统，例如 showSpecificBranding，并根据该参数显示不同的样式

# backbone.js - Backbone.js 错误 - 未捕获的类型错误：对象 [对象对象] 没有方法“设置”

> ID：11207588
> 
> 赞同：7
> 
> 时间：2012-06-26T12:42:53.000
> 
> 标签：backbone.js

我的代码：

我是 Backbone.js 的新手，正在尝试使用 Backbone.js 和 PHP 构建应用程序。当我尝试调用`add`路由器时，出现错误：

> 未捕获的类型错误：对象 [object Object] 没有方法“设置”。

请帮我找出我的错误。

谢谢。

```
 // Models
    window.Users = Backbone.Model.extend({
        urlRoot:"./bb-api/users",
        defaults:{
            "id":null,
            "name":"",
            "email":"",
            "designation":""
        }
    });

    window.UsersCollection = Backbone.Collection.extend({
        model:Users,
        url:"./bb-api/users"
    });

    // Views

    window.AddUserView = Backbone.View.extend({

        template:_.template($('#new-user-tpl').html()),

        initialize:function(){
            this.model.bind("click", this.render, this);
        },

        render:function(){
            $(this.el).html(this.template(this.model.toJSON()));
            return this;
        },

        events:{
            "click .add":"saveUser"
        },

        saveUser:function(){ alert('saveUser');
            this.model.set({
                name:$("#name").val(),
                email:$("#email").val(),
                designation:$("#designation").val()
            });

            if(this.model.isNew()){
                this.model.create(this.model);
            }
            return false;
        }
    });

    // Router
    var AppRouter = Backbone.Router.extend({

        routes:{
            "":"welcome",
            "users":"list",
            "users/:id":"userDetails",
            "add":"addUser"
        },

        addUser:function(){ 
            this.addUserModel = new UsersCollection();
            this.addUserView = new AddUserView({model:this.addUserModel});
            $('#content').html(this.addUserView.render().el);
        }

    });

    var app = new AppRouter();
    Backbone.history.start(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-27T04:19:08.983

正如评论中所建议的，问题从这里开始：

```
this.addUserModel = new UsersCollection();
this.addUserView = new AddUserView({model:this.addUserModel}); 
```

并在这里完成：

```
saveUser:function(){ alert('saveUser');
    this.model.set({ 
```

通过传递集合代替模型会造成混乱，结果是稍后在`saveUser`函数中您尝试在实例上调用`Backbone.Model`方法 ( `set`) 。`Backbone.Collection`

* * *

注意：从 1.0.0 版开始，`Backbone.Collection`现在有一个`set`方法。在以前的版本中，例如问题作者使用的版本，该方法被称为`update`.

* * *

您可以采取几个步骤来澄清此代码。对于初学者，我将重命名您的模型和集合类，以便清楚模型是*单数*形式而集合是*复数*形式：

`window.Users`=>`window.User`

`window.UsersCollection`=>`window.Users`

接下来，我将创建一个新`User`模型，而不是一个`Users`集合，并将其传递给您的视图：

```
this.addUserModel = new User();
this.addUserView = new AddUserView({model:this.addUserModel}); 
```

最后，我会删除这些行：

```
if(this.model.isNew()){
    this.model.create(this.model);
} 
```

一方面，模型将始终是新的（因为您只是在传递它之前创建它），但更重要的是，您不需要调用`Collection`'s`create`方法，因为该方法会创建一个新模型，而您已经创建了一个模型. 也许您应该添加的是：

```
this.model.save(); 
```

如果您的意图是将模型保存到您的服务器。

由于您已经为模型指定了 a `urlRoot`，因此您应该只需要创建一个新模型，将其传递给您的视图，让您的视图根据 DOM 元素填充其属性，最后将该模型的属性保存到您的服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-06T06:30:30.093

我认为您面临对象范围的问题。当事件触发时，它会将事件对象发送到该函数。试试这个它可能会用初始化中的当前视图声明全局变量

```
initialize : function(){ self = this; } 
```

然后将其更改为自我，

```
 saveUser:function(){ alert('saveUser');
        self.model.set({
            name:$("#name").val(),
            email:$("#email").val(),
            designation:$("#designation").val()
        });

        if(self.model.isNew()){
            self.model.create(this.model);
        }
        return false;
    } 
```

# xpath - html源代码上的xpath

> ID：11207592
> 
> 赞同：0
> 
> 时间：2012-06-26T12:43:16.497
> 
> 标签：xpath

嗨，我想提取下面带有标签的 html 文件中的所有便利设施，`alt="Has amenity / Allowed"`例如电视、互联网……我做了以下代码：

```
var descriptionNode = htmlDocument.DocumentNode.SelectSingleNode("//div[@id='amenities']//li//"); 
```

但它不会过滤其中`alt="...."`的`<img>`内容，它只显示所有文本（在我的情况下是便利设施）。如果我添加`("//div[@id='amenities']//li//img")`它不会显示任何内容。我也尝试使用包含但没有结果。

```
<div id="amenities" style="display:none" class="details_content">
            <ul>
                    <li>
                          <img alt="Doesn't have amenity / Not allowed" class="amenity-icon" height="17" src="//a1.muscache.com/airbnb/static/page3/v3/no_amenity-7229ab239bb2e3d81da7aa5034c265d4.png" title="Doesn't have amenity / Not allowed" width="17" />
                        <p>Smoking Allowed </p>
                    </li>
                    <li>
                          <img alt="Doesn't have amenity / Not allowed" class="amenity-icon" height="17" src="//a1.muscache.com/airbnb/static/page3/v3/no_amenity-7229ab239bb2e3d81da7aa5034c265d4.png" title="Doesn't have amenity / Not allowed" width="17" />
                        <p>Pets Allowed </p>
                    </li>
                    <li>
                          <img alt="Has amenity / Allowed" class="amenity-icon" height="17" src="//a2.muscache.com/airbnb/static/page3/v3/has_amenity-3f3ba6d898588b24e37211888d98713f.png" title="Has amenity / Allowed" width="17" />
                        <p>TV </p>
                    </li>
                    <li>
                          <img alt="Doesn't have amenity / Not allowed" class="amenity-icon" height="17" src="//a1.muscache.com/airbnb/static/page3/v3/no_amenity-7229ab239bb2e3d81da7aa5034c265d4.png" title="Doesn't have amenity / Not allowed" width="17" />
                        <p>Cable TV </p>
                    </li>
                    <li>
                          <img alt="Has amenity / Allowed" class="amenity-icon" height="17" src="//a2.muscache.com/airbnb/static/page3/v3/has_amenity-3f3ba6d898588b24e37211888d98713f.png" title="Has amenity / Allowed" width="17" />
                        <p>Internet <a class="tooltip" title="Internet (wired or wireless)"><img alt="Questionmark_hover-aaf1c7ee20bcff9b9ed6e8e5ef1af8e3" src="//a2.muscache.com/airbnb/static/icons/questionmark_hover-aaf1c7ee20bcff9b9ed6e8e5ef1af8e3.png" style="width:12px; height:12px;" /></a></p>
                    </li>
                    <li>
                          <img alt="Has amenity / Allowed" class="amenity-icon" height="17" src="//a2.muscache.com/airbnb/static/page3/v3/has_amenity-3f3ba6d898588b24e37211888d98713f.png" title="Has amenity / Allowed" width="17" />
                        <p>Wireless Internet <a class="tooltip" title="A wireless router that guests can access 24/7."><img alt="Questionmark_hover-aaf1c7ee20bcff9b9ed6e8e5ef1af8e3" src="//a2.muscache.com/airbnb/static/icons/questionmark_hover-aaf1c7ee20bcff9b9ed6e8e5ef1af8e3.png" style="width:12px; height:12px;" /></a></p>
                    </li>
                    <li>
                          <img alt="Has amenity / Allowed" class="amenity-icon" height="17" src="//a2.muscache.com/airbnb/static/page3/v3/has_amenity-3f3ba6d898588b24e37211888d98713f.png" title="Has amenity / Allowed" width="17" />
                        <p>Air Conditioning </p>
                    </li>
                    <li>
                          <img alt="Has amenity / Allowed" class="amenity-icon" height="17" src="//a2.muscache.com/airbnb/static/page3/v3/has_amenity-3f3ba6d898588b24e37211888d98713f.png" title="Has amenity / Allowed" width="17" />
                        <p>Heating </p>
                    </li>
            </ul>
            <ul>
                    <li>
                          <img alt="Has amenity / Allowed" class="amenity-icon" height="17" src="//a2.muscache.com/airbnb/static/page3/v3/has_amenity-3f3ba6d898588b24e37211888d98713f.png" title="Has amenity / Allowed" width="17" />
                        <p>Elevator in Building </p>
                    </li>
                    <li>
                          <img alt="Has amenity / Allowed" class="amenity-icon" height="17" src="//a2.muscache.com/airbnb/static/page3/v3/has_amenity-3f3ba6d898588b24e37211888d98713f.png" title="Has amenity / Allowed" width="17" />
                        <p>Handicap Accessible <a class="tooltip" title="The property is easily accessible.  Guests should communicate about individual needs."><img alt="Questionmark_hover-aaf1c7ee20bcff9b9ed6e8e5ef1af8e3" src="//a2.muscache.com/airbnb/static/icons/questionmark_hover-aaf1c7ee20bcff9b9ed6e8e5ef1af8e3.png" style="width:12px; height:12px;" /></a></p>
                    </li>
                    <li>
                          <img alt="Doesn't have amenity / Not allowed" class="amenity-icon" height="17" src="//a1.muscache.com/airbnb/static/page3/v3/no_amenity-7229ab239bb2e3d81da7aa5034c265d4.png" title="Doesn't have amenity / Not allowed" width="17" />
                        <p>Pool <a class="tooltip" title="A private swimming pool"><img alt="Questionmark_hover-aaf1c7ee20bcff9b9ed6e8e5ef1af8e3" src="//a2.muscache.com/airbnb/static/icons/questionmark_hover-aaf1c7ee20bcff9b9ed6e8e5ef1af8e3.png" style="width:12px; height:12px;" /></a></p>
                    </li>
                    <li>
                          <img alt="Has amenity / Allowed" class="amenity-icon" height="17" src="//a2.muscache.com/airbnb/static/page3/v3/has_amenity-3f3ba6d898588b24e37211888d98713f.png" title="Has amenity / Allowed" width="17" />
                        <p>Kitchen <a class="tooltip" title="Kitchen is available for guest use"><img alt="Questionmark_hover-aaf1c7ee20bcff9b9ed6e8e5ef1af8e3" src="//a2.muscache.com/airbnb/static/icons/questionmark_hover-aaf1c7ee20bcff9b9ed6e8e5ef1af8e3.png" style="width:12px; height:12px;" /></a></p>
                    </li>
                    <li>
                          <img alt="Doesn't have amenity / Not allowed" class="amenity-icon" height="17" src="//a1.muscache.com/airbnb/static/page3/v3/no_amenity-7229ab239bb2e3d81da7aa5034c265d4.png" title="Doesn't have amenity / Not allowed" width="17" />
                        <p>Parking Included </p>
                    </li>
                    <li>
                          <img alt="Doesn't have amenity / Not allowed" class="amenity-icon" height="17" src="//a1.muscache.com/airbnb/static/page3/v3/no_amenity-7229ab239bb2e3d81da7aa5034c265d4.png" title="Doesn't have amenity / Not allowed" width="17" />
                        <p>Doorman </p>
                    </li>
                    <li>
                          <img alt="Doesn't have amenity / Not allowed" class="amenity-icon" height="17" src="//a1.muscache.com/airbnb/static/page3/v3/no_amenity-7229ab239bb2e3d81da7aa5034c265d4.png" title="Doesn't have amenity / Not allowed" width="17" />
                        <p>Gym <a class="tooltip" title="Guests have free access to a gym"><img alt="Questionmark_hover-aaf1c7ee20bcff9b9ed6e8e5ef1af8e3" src="//a2.muscache.com/airbnb/static/icons/questionmark_hover-aaf1c7ee20bcff9b9ed6e8e5ef1af8e3.png" style="width:12px; height:12px;" /></a></p>
                    </li>
                    <li>
                          <img alt="Doesn't have amenity / Not allowed" class="amenity-icon" height="17" src="//a1.muscache.com/airbnb/static/page3/v3/no_amenity-7229ab239bb2e3d81da7aa5034c265d4.png" title="Doesn't have amenity / Not allowed" width="17" />
                        <p>Hot Tub </p>
                    </li>
            </ul>
            <ul>
                    <li>
                          <img alt="Doesn't have amenity / Not allowed" class="amenity-icon" height="17" src="//a1.muscache.com/airbnb/static/page3/v3/no_amenity-7229ab239bb2e3d81da7aa5034c265d4.png" title="Doesn't have amenity / Not allowed" width="17" />
                        <p>Indoor Fireplace </p>
                    </li>
                    <li>
                          <img alt="Has amenity / Allowed" class="amenity-icon" height="17" src="//a2.muscache.com/airbnb/static/page3/v3/has_amenity-3f3ba6d898588b24e37211888d98713f.png" title="Has amenity / Allowed" width="17" />
                        <p>Buzzer/Wireless Intercom </p>
                    </li>
                    <li>
                          <img alt="Doesn't have amenity / Not allowed" class="amenity-icon" height="17" src="//a1.muscache.com/airbnb/static/page3/v3/no_amenity-7229ab239bb2e3d81da7aa5034c265d4.png" title="Doesn't have amenity / Not allowed" width="17" />
                        <p>Breakfast <a class="tooltip" title="Breakfast is provided."><img alt="Questionmark_hover-aaf1c7ee20bcff9b9ed6e8e5ef1af8e3" src="//a2.muscache.com/airbnb/static/icons/questionmark_hover-aaf1c7ee20bcff9b9ed6e8e5ef1af8e3.png" style="width:12px; height:12px;" /></a></p>
                    </li>
                    <li>
                          <img alt="Doesn't have amenity / Not allowed" class="amenity-icon" height="17" src="//a1.muscache.com/airbnb/static/page3/v3/no_amenity-7229ab239bb2e3d81da7aa5034c265d4.png" title="Doesn't have amenity / Not allowed" width="17" />
                        <p>Family/Kid Friendly <a class="tooltip" title="The property is suitable for hosting families with children."><img alt="Questionmark_hover-aaf1c7ee20bcff9b9ed6e8e5ef1af8e3" src="//a2.muscache.com/airbnb/static/icons/questionmark_hover-aaf1c7ee20bcff9b9ed6e8e5ef1af8e3.png" style="width:12px; height:12px;" /></a></p>
                    </li>
                    <li>
                          <img alt="Doesn't have amenity / Not allowed" class="amenity-icon" height="17" src="//a1.muscache.com/airbnb/static/page3/v3/no_amenity-7229ab239bb2e3d81da7aa5034c265d4.png" title="Doesn't have amenity / Not allowed" width="17" />
                        <p>Suitable for Events <a class="tooltip" title="The property can accommodate a gathering of 25 or more attendees."><img alt="Questionmark_hover-aaf1c7ee20bcff9b9ed6e8e5ef1af8e3" src="//a2.muscache.com/airbnb/static/icons/questionmark_hover-aaf1c7ee20bcff9b9ed6e8e5ef1af8e3.png" style="width:12px; height:12px;" /></a></p>
                    </li>
                    <li>
                          <img alt="Has amenity / Allowed" class="amenity-icon" height="17" src="//a2.muscache.com/airbnb/static/page3/v3/has_amenity-3f3ba6d898588b24e37211888d98713f.png" title="Has amenity / Allowed" width="17" />
                        <p>Washer <a class="tooltip" title="Paid or Free, in building"><img alt="Questionmark_hover-aaf1c7ee20bcff9b9ed6e8e5ef1af8e3" src="//a2.muscache.com/airbnb/static/icons/questionmark_hover-aaf1c7ee20bcff9b9ed6e8e5ef1af8e3.png" style="width:12px; height:12px;" /></a></p>
                    </li>
                    <li>
                          <img alt="Has amenity / Allowed" class="amenity-icon" height="17" src="//a2.muscache.com/airbnb/static/page3/v3/has_amenity-3f3ba6d898588b24e37211888d98713f.png" title="Has amenity / Allowed" width="17" />
                        <p>Dryer <a class="tooltip" title="Paid or Free, in building"><img alt="Questionmark_hover-aaf1c7ee20bcff9b9ed6e8e5ef1af8e3" src="//a2.muscache.com/airbnb/static/icons/questionmark_hover-aaf1c7ee20bcff9b9ed6e8e5ef1af8e3.png" style="width:12px; height:12px;" /></a></p>
                    </li> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T12:55:43.547

它不是按属性过滤的，`alt`因为您没有告诉它。您需要应用一个谓词，就像您目前的情况一样`id`：

```
//div[@id='amenities']//li[img/@alt='Has amenity / Allowed'] 
```

`li`这仅选择其内部图像具有所需`alt`属性的那些标签。

# icons - 如何重置 Windows XP 中的默认 .EXE 图标

> ID：11207593
> 
> 赞同：3
> 
> 时间：2012-06-26T12:43:24.063
> 
> 标签：icons, registry, default, exe

在使用 nlite 删除某些不需要的组件后，我安装了 Windows XP。我以前试过这个，只是现在我选择了注册表编辑，它使 Windows 显示默认的可执行图标，而不是程序的默认图标。

这与图标缓存无关，因为它是单个注册表编辑，它只是不允许程序使用自己的图标。我的电脑、我的文档等其他图标可以正常工作，这只会影响 .exe 文件。

如何撤消此操作？我很确定它涉及注册表编辑，我只是​​不知道我应该更改什么键。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T13:26:18.067

我找到了解决方案。

首先打开`regedit.exe`然后找到这个key：

```
 [HKEY_LOCAL_MACHINE\SOFTWARE\Classes\exefile\DefaultIcon] 
```

将 (Default) 的值更改为 %1 并刷新图标缓存。操作方法如下：[Windows 图标缓存](http://smallvoid.com/article/windows-icon-cache.html)

# iis - URL 重写在 HTTPS 中不起作用

> ID：11207594
> 
> 赞同：1
> 
> 时间：2012-06-26T12:43:24.263
> 
> 标签：iis, https

URL 重写已在我的应用程序中完成，它将根据传递给页面的值充当 http 和 https。需要映射的扩展已添加到在开发环境中运行良好的 IIS 应用程序映射中。但是在测试站点中，http 站点运行良好，而 https 则没有。

例如：[http](http://test1.com) ://test1.com正在工作，而[https://test1.com](https://test1.com)不工作

谁能告诉我哪里出错了？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T13:11:04.657

当 Java 应用程序连接到 SSL 主机时，它必须能够验证其签名者。但是对于做自我证书，它可能会为您带来问题。如果进行验证，请按照我的建议使用 SSLPoke 类。如果您无法在几行 Java 中为您的服务器建立简单的 SSL 套接字连接，那么我建议您使用付费证书。谁的 CA 链*可能*可以通过现有的 JRE 证书 cacerts 文件进行验证。

# testing - 尝试使用 Selenium RC

> ID：11207598
> 
> 赞同：0
> 
> 时间：2012-06-26T12:43:34.387
> 
> 标签：testing, selenium, automated-tests

我是硒的新手。我正在尝试为我大学中的一个项目配置 selenium，例如使用 phppgadmin 配置的项目。没有 .jar 文件，我不需要运行任何东西，甚至不需要安装库等……我不知道这是 RC Server 还是 Webdriver。

另外，我想使用 PHPUnit 格式，因为这样我可以从 Firefox Selenium IDE 插件中导出测试用例。有办法做到这一点吗？互联网上有很多信息、webdrivers 等，但我相信 phppgadmin 这样做的方式是最好的方式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T02:56:38.010

如果您只是在寻找从 IDE 导入的快速而肮脏的 Selenium 1 可能适合您。如果将来您打算继续您的大学项目，我强烈建议您学习 Selenium Webdriver (Selenium 2)。

顺便说一句：您可以从 selenium IDE 中以您想要的任何语言导出测试，PHP 只是众多选择之一，包括（Java (JUnit)、Java (TestNG)、Ruby 和 Python）。如果您对 PHPUnit 感兴趣，请看这里[http://www.phpunit.de/manual/3.1/en/selenium.html](http://www.phpunit.de/manual/3.1/en/selenium.html)，这将为您提供如何开始编写 Selenium 测试的背景知识。

如果您要使用 selenium RC，请访问[http://seleniumhq.org/download/](http://seleniumhq.org/download/)。下载 Selenium 服务器。使用 java -jar 命令启动服务器。所以 java -jar /path/to/sel/selenium-server-standalone-2.24.1.jar。这将启动 RC 服务器，当您有兴趣运行一些测试时，执行测试，然后 selenium 服务器将处理其余的

# javascript - HTML5 Canvas：绘制完成时获取事件

> ID：11207606
> 
> 赞同：27
> 
> 时间：2012-06-26T12:44:21.237
> 
> 标签：javascript, canvas, html5-canvas, dom-events, drawimage

我正在将图像绘制到画布元素。然后，我有依赖于要完成的过程的代码。我的代码如下所示：

```
var myContext = myCanvasElement.getContext('2d'),
    myImg = new Image();

myImg.onload = function() {
    myContext.drawImage(containerImg, 0, 0, 300, 300);
};

myImg.src = "someImage.png"; 
```

所以现在，我想在 drawImage 完成时收到通知。我检查了规范，但找不到事件或传递回调函数的可能性。到目前为止，我只是设置了一个超时，但这显然不是很可持续。你怎么解决这个问题？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-06-26T12:45:52.240

像几乎所有 Javascript 函数一样，它`drawImage`是*同步*的，即它只会在它实际完成它应该做的事情后才返回。

也就是说，与大多数其他 DOM 调用一样，它*应该做*的是排队等待下次浏览器进入事件循环时重新绘制的事物列表。

没有可以专门注册的事件来告诉您什么时候发生，因为当可以调用任何此类事件处理程序时，重绘已经发生了。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-08-13T15:31:45.767

[Jef Claes在他的网站上](http://www.jefclaes.be/2010/12/html5-drawing-images-to-canvas-gotcha.html)很好地解释了这一点：

> 当脚本已经被解释和执行时，浏览器会异步加载图像。如果图像未完全加载，画布将无法呈现它。
> 
> 幸运的是，这并不难解决。我们只需要等待开始绘制，直到我们收到来自图像的回调，通知加载已完成。

```
<script type="text/javascript">        
window.addEventListener("load", draw, true);

function draw(){                                    
    var img = new Image();
    img.src = "http://3.bp.blogspot.com/_0sKGHtXHSes/TPt5KD-xQDI/AAAAAAAAA0s/udx3iWAzUeo/s1600/aspnethomepageplusdevtools.PNG";                
    img.onload = function(){
        var canvas = document.getElementById('canvas');
        var context = canvas.getContext('2d');    

        context.drawImage(img, 0, 0);        
    };            
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-26T13:32:42.547

当图像加载时，您已经有一个事件，并且您做一件事（绘制）。为什么不做另一个并调用将做任何你想做的事情的函数`drawImage`呢？从字面上看：

```
myImg.onload = function() {
    myContext.drawImage(containerImg, 0, 0, 300, 300);
    notify(); // guaranteed to be called after drawImage
}; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-10-19T02:57:30.617

`drawImage()`因为 2D 画布上的任何绘图方法本身“大部分”是同步的。
您可以假设任何需要回读像素的代码都将具有更新的像素。此外，`drawImage`特别是，您甚至可以假设图像将“同步”完全解码，这可能需要一些时间来处理大图像。

*从技术上讲，在大多数现代配置中，实际的绘画工作将推迟到 GPU，这意味着一些并行化和一些异步性，但回读将等待 GPU 完成它的工作并在这段时间内锁定 CPU。*

然而，在画布上绘图只是将画布完全渲染到监视器的第一步。
然后画布需要通过 CSS 合成器，在那里它将沿着页面的其余部分绘制。这是推迟到下一个渲染步骤的内容。
`alert()`Chrome 中的当前确实阻止了 CSS 合成器，因此，即使画布缓冲区的实际像素已经更新，这些更改还没有被 CSS 合成器反映。（*在 Firefox`alert()`中触发一种“旋转事件循环”，它允许 CSS 合成器仍然启动，即使事件循环的全局任务被暂停*）。

为了与 CSS 合成器挂钩，有一种[`requestPostAnimationFrame`方法](https://github.com/WICG/request-post-animation-frame)正在酝酿中，但显然最近被 Chrome 实验放弃了。

我们可以同时使用它`requestAnimationFrame`和一个 MessageEvent 来填充它以尽快挂钩到下一个任务（`setTimeout`通常优先级较低）。

现在，即使这`requestPostAnimationFrame`只是浏览器合成器启动时的一个事件，该图像仍然需要一段时间才能到达操作系统合成器和监视器（大约是一个完整的垂直同步帧）。

Windows 上的某些 Chrome 配置可以访问允许浏览器直接与 OS 合成器对话并绕过 CSS 合成器的快捷方式。要启用此选项，您可以使用[`desynchhronized`](https://html.spec.whatwg.org/multipage/canvas.html#dom-canvasrenderingcontext2dsettings-desynchronized)设置为 true 的选项创建 2D 上下文。但是，此选项仅在少数配置中受支持。

下面是几乎所有这些的演示：

```
// requestPostAnimationFrame polyfill
if (typeof requestPostAnimationFrame !== "function") {
  (() => {
    const channel = new MessageChannel();
    const callbacks = [];
    let timestamp = 0;
    let called = false;
    let scheduled = false; // to make it work from rAF
    let inRAF = false; // to make it work from rAF
    channel.port2.onmessage = e => {
      called = false;
      const toCall = callbacks.slice();
      callbacks.length = 0;
      toCall.forEach(fn => {
        try {
          fn(timestamp);
        } catch (e) {}
      });
    }
    // We need to overwrite rAF to let us know we are inside an rAF callback
    // as to avoid scheduling yet an other rAF, which would be one painting frame late
    // We could have hooked an infinite loop on rAF, but this means
    // forcing the document to be animated all the time
    // which is bad for perfs
    const rAF = globalThis.requestAnimationFrame;
    globalThis.requestAnimationFrame = function(...args) {
      if (!scheduled) {
        scheduled = true;
        rAF.call(globalThis, (time) => inRAF = time);
        globalThis.requestPostAnimationFrame(() => {
          scheduled = false;
          inRAF = false;
        });
      }
      rAF.apply(globalThis, args);
    };
    globalThis.requestPostAnimationFrame = function(callback) {
      if (typeof callback !== "function") {
        throw new TypeError("Argument 1 is not callable");
      }
      callbacks.push(callback);
      if (!called) {
        if (inRAF) {
          timestamp = inRAF;
          channel.port1.postMessage("");
        } else {
          requestAnimationFrame((time) => {
            timestamp = time;
            channel.port1.postMessage("");
          });
        }
        called = true;
      }
    };
  })();
}

// now the demo

// if the current browser can use desync 2D context
// let's try it there too
// (I couldn't test it myself, so let me know in comments)
const supportsDesyncContext = CanvasRenderingContext2D.prototype.getContextAttributes && 
  document.createElement("canvas")
    .getContext("2d", { desynchronized: true })
    .getContextAttributes().desynchronized;

test(false);
if (supportsDesyncContext) {
  setTimeout(() => test(true), 1000);
}

async function test(desync) {
  const canvas = document.createElement("canvas");
  document.body.append(canvas);
  const ctx = canvas.getContext("2d", { desynchronized: desync });
  const blob = await fetch("https://upload.wikimedia.org/wikipedia/commons/4/47/PNG_transparency_demonstration_1.png")
    .then((resp) => resp.ok && resp.blob());
  const bitmap = await createImageBitmap(blob);
  ctx.drawImage(bitmap, 0, 0, 300, 150);
  // schedule our callback after rendering
  requestPostAnimationFrame(() => {
    alert("Right after CSS compositing");
  });
  // prove that we actually already painted on the canvas
  // even if the CSS compositor hasn't kicked in yet
  const pixelOnCanvas = ctx.getImageData(120,120,1,1).data;
  alert("Before CSS compositing." + (desync ? " (desynchronized)": "") + "\nPixel on canvas: " + pixelOnCanvas);
}
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2021-10-18T22:40:28.007

@MikeGledhill 的答案（已被删除）本质上是答案的开始，尽管它可以更好地解释它，并且浏览器当时可能并不都有`requestAnimationFrame`可用的 API：

像素的绘制发生在下一个动画帧中。这意味着如果您调用`drawImage`，屏幕像素实际上不会在那个时候更新，而是在下一个动画帧中更新。

这没有什么活动。

但！我们可以使用`requestAnimationFrame`在绘制（显示更新）发生之前为下一帧安排回调：

```
myImg.onload = function() {
    myContext.drawImage(containerImg, 0, 0, 300, 300);

    requestAnimationFrame(() => {
      // This function will run in the next animation frame, *right before*
      // the browser will update the pixels on the display (paint).

        // To ensure that we run logic *after* the display has been
        // updated, an option is to queue yet one more callback
        // using setTimeout.
        setTimeout(() => {
            // At this point, the page rendering has been updated with the
            // `drawImage` result (or a later frame's result, see below).
        }, 0)
    })
}; 
```

这里发生了什么：

该`requestAnimtionFrame`调用安排了一个函数，该函数将在浏览器更新显示像素之前被调用。本次回调完成后，浏览器会在后续的tick中继续同步更新显示像素，非常类似于微任务。

类似于浏览器更新显示的“微任务”，发生在您的`requestAnimationFrame`回调之后，并且发生*在*`Promise.resolve().then()`用户使用或`await`语句在回调中创建的所有用户创建的微任务之后。这意味着不能在绘制任务发生后立即（同步）触发延迟代码。

保证在下一个绘制任务之后触发逻辑的唯一方法是使用`setTimeout`（[或`postMessage`技巧](https://stackoverflow.com/questions/18826570/settimeout0-vs-window-postmessage-vs-messageport-postmessage)）从动画帧回调中将*宏任务*（而不是微任务）排队。从`requestAnimationFrame`回调排队的宏任务将在所有微任务和类似微任务的任务*之后*触发，包括更新像素的任务。setTimeout（或 postMessage）宏任务不会在动画帧微任务之后同步触发。

这种方法虽然并不完美。*大多数情况下*，从`setTimeout`（更可能是）排队的宏任务将*在下一个动画帧和绘制周期之前*`postMessage`触发。但是，由于(and ) 的规范，不能保证延迟将与我们指定的完全相同（在此示例中），并且浏览器可以自由使用启发式和/或硬编码值（如 2ms）来确定何时是运行（宏任务）回调的最快时间。*`setTimeout``postMessage``0``setTimeout`*

 *由于宏任务调度的这种非保证的非同步性质，虽然实际上不太*可能*，但您的`setTimeout`（或`postMessage`）回调可能不仅在当前动画帧（以及更新显示的绘制周期）之后触发，而且在下*一个*动画帧（及其绘制任务）之后，这意味着宏任务回调对于您所针对的帧而言触发的可能性很小。使用`postMessage`代替时，此几率会降低`setTimeout`。

话虽如此，除非您尝试编写捕获绘制像素并将它们与预期结果或类似结果进行比较的测试，否则您可能不应该做这种事情。

通常，您应该使用 来安排任何绘图逻辑（fe `ctx.drawImage()`）`requestAnimationFrame`，永远不要依赖绘制更新的实际时间，并假设用户将看到浏览器 API 保证您指定他们看到的内容（浏览器有自己的自己的测试以确保其 API 工作）。

最后，我们不知道您的实际目标是什么。这个答案很可能与该目标无关。

* * *

`postMessage`这是使用技巧的相同示例：

```
let messageKey = 0

myImg.onload = function() {
    myContext.drawImage(containerImg, 0, 0, 300, 300);

    requestAnimationFrame(() => {
      // This function will run in the next animation frame, *right before*
      // the browser will update the pixels on the display (paint).

        const key = "Unique message key for after paint callback: "+ messageKey++

        // To ensure that we run logic *after* the display has been
        // updated, an option is to queue yet one more callback
        // using postMessage.

        const afterPaint = (event) => {
            // Ignore interference from any other messaging in the app.
            if (event.data != key) return

            removeEventListener('message', afterPaint)

            // At this point, the page rendering has been updated with the
            // `drawImage` result (or a later frame's result, but
            // more unlikely than with setTimeout, as per above).
        }

        addEventListener('message', afterPaint)

         // Hack: send a message which arrives back to us in a
         // following macrotask, more likely sooner than with
         // setTimeout.
        postMessage(key, '*')
    })
}; 
```*

# c# - DataGrid 中的组合框（c# wpf）

> ID：11207607
> 
> 赞同：1
> 
> 时间：2012-06-26T12:44:27.730
> 
> 标签：c#, wpf

示例组合框：

```
<DataGridComboBoxColumn
Header="Status"
SelectedItemBinding="{Binding status}"
ItemsSource="{Binding status}"
Width="98.8"
/> 
```

mysql web 服务器上的源数据

```
MySqlCommand cmd = new MySqlCommand("select id,user_name,user_phone,user_email,payment_method,amount,user_comment,delivery_city,delivery_address,status from `request`", conn);
DataTable dt = new DataTable();
dt.Load(cmd.ExecuteReader());
dataGrid1.ItemsSource = dt.DefaultView; 
```

所以我建了一个表，所有数据都在那里，除了`Status`是空的，为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T13:33:11.447

ItemsSource 必须是一个集合。如果您需要枚举集合，请参阅此链接的底部。 [http://msdn.microsoft.com/en-us/library/system.windows.controls.datagridcomboboxcolumn.aspx](http://msdn.microsoft.com/en-us/library/system.windows.controls.datagridcomboboxcolumn.aspx)

如果集合是动态的，那么您需要一个具有返回集合的属性的类。

# iphone - UIImageView 缩放、点击、手势不起作用

> ID：11207615
> 
> 赞同：2
> 
> 时间：2012-06-26T12:44:41.633
> 
> 标签：iphone, ios, image, scrollview

我正在使用 Apple 代码来缩放`UIImageView`点击和手势。但它不起作用？

请参阅此 Apple 链接[Apple 代码以通过点击和手势进行图像缩放](http://developer.apple.com/library/ios/#samplecode/ScrollViewSuite/Listings/1_TapToZoom_Classes_RootViewController_m.html)

```
-(void)veiwDidLoad
{
    [super viewDidLoad];// Edited my self 

    imageView.userInteractionEnabled = YES; // Edited my self

    //All code below same.... like Apple's code

    // set the tag for the image view
    [imageView setTag:ZOOM_VIEW_TAG];

    // add gesture recognizers to the image view
    UITapGestureRecognizer *singleTap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(handleSingleTap:)];
    UITapGestureRecognizer *doubleTap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(handleDoubleTap:)];
    UITapGestureRecognizer *twoFingerTap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(handleTwoFingerTap:)];

    [doubleTap setNumberOfTapsRequired:2];
    [twoFingerTap setNumberOfTouchesRequired:2];

    [imageView addGestureRecognizer:singleTap];
    [imageView addGestureRecognizer:doubleTap];
    [imageView addGestureRecognizer:twoFingerTap];

    [singleTap release];
    [doubleTap release];
    [twoFingerTap release];

    // calculate minimum scale to perfectly fit image width, and begin at that scale
    float minimumScale = [imageScrollView frame].size.width  / [imageView frame].size.width;
    [imageScrollView setMinimumZoomScale:minimumScale];
    [imageScrollView setZoomScale:minimumScale];
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T12:49:55.260

确保将 imageView 设置为`userInteractionEnabled = YES;`..`NO`默认情况下分配给它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T03:04:17.990

将函数名称从

```
-(void) veiwDidLoad 
```

至

```
-(void) viewDidLoad 
```

我也有这样的问题，解决了吗？

# android - Android：传递结果 ResultInfo 失败。意图显然是空的？

> ID：11207617
> 
> 赞同：1
> 
> 时间：2012-06-26T12:44:58.357
> 
> 标签：android, file, audio, android-intent, android-activity

我试图让用户选择一个**音频文件**并存储该音频文件的路径。我这样做是通过使用**ACTION_GET_CONTENT Intent**来实现的，这样用户就可以选择一个应用程序来选择文件。但由于某种原因，在**onActivityResult**方法中，**Intent 数据以****null**形式返回，如错误消息中所示。Logcat 错误信息和相关代码如下。任何帮助将不胜感激。

**主要编辑：-此错误仅在我按下后退按钮或取消时发生！选择音乐文件实际上工作正常。对于那个很抱歉。尽管如此，错误仍然存​​在。**

LogCat 错误：-

```
06-26 16:36:25.238: E/AndroidRuntime(24759): java.lang.RuntimeException: Failure delivering result ResultInfo{who=null, request=1, result=0, data=null} to activity {com.packagename.appname.activityname}: java.lang.NullPointerException 
```

调用放置在 onCreate() 中调用的方法中的选择器活动：-

```
Intent intent = new Intent(Intent.ACTION_GET_CONTENT);
intent.setAction(Intent.ACTION_PICK);
intent.setType("audio/*");
startActivityForResult(intent, audioreminder); 
```

onActivityResult() 方法：-

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    SharedPreferences flags = this.getSharedPreferences(
            "screen_on_flags", MODE_WORLD_READABLE);
    SharedPreferences.Editor editor = flags.edit();
    String FilePath = data.getData().getPath();
    switch (requestCode) {
    case audioreminder: {
        if (resultCode == RESULT_OK) {
            editor.putString("audioreminderpath", FilePath);
            editor.commit();
        } else if (resultCode == RESULT_CANCELED){
            CheckBoxPreference other_audioreminder = (CheckBoxPreference) findPreference("other_audioreminder");
            other_audioreminder.setChecked(false);
            }
        break;
    }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T12:50:20.530

我用过，这个代码..

```
Intent intent = new Intent(Intent.ACTION_PICK, android.provider.MediaStore.Audio.Media.EXTERNAL_CONTENT_URI);
startActivityForResult(Intent.createChooser(intent, "Gallery"), audioreminder); 
```

此外，`onActivityResult()`检查`Intent data`是否为空

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {

    if(data != null)
    {
    SharedPreferences flags = this.getSharedPreferences(
            "screen_on_flags", MODE_WORLD_READABLE);
    SharedPreferences.Editor editor = flags.edit();
    String FilePath = data.getData().getPath();
    switch (requestCode) {
    case audioreminder: {
        if (resultCode == RESULT_OK) {
            editor.putString("audioreminderpath", FilePath);
            editor.commit();
        } else if (resultCode == RESULT_CANCELED){
            CheckBoxPreference other_audioreminder = (CheckBoxPreference) findPreference("other_audioreminder");
            other_audioreminder.setChecked(false);
            }
        break;
    }
   }
  }
 else
 {
 Log.e("Intent data:" , "null")
 }
} 
```

试试这个，让我知道会发生什么..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T12:47:23.420

不，错误说的是您的`onActivityResult()`方法抛出了 a `NullPointerException`，而不是数据必然是`null`。您需要调试以查看错误在您的方法中的位置。

# javascript - jQuery post不返回数据

> ID：11207620
> 
> 赞同：0
> 
> 时间：2012-06-26T12:45:10.863
> 
> 标签：javascript, jquery, http-post

我的一个主要主机出现问题，它不想返回任何游戏查询，因此我制作了一个脚本并将其上传到另一台可以获取游戏服务器数据的主机。向我的主主机添加了一个 jquery 脚本，但它似乎没有获取帖子数据。我在那个页面上有一个回声，所以我应该看到结果数据，但它没有显示。

jQuery代码

```
<script type='text/javascript'>
    $(document).ready(function(){
        $("input.senddata").click(function() {
            var ipForm = $('input[name="ip_submit"]').val();
            var gameForm = $( 'select[name="game_submit"]' ).val()
            $.post('http://gamepwn.net/serversdotee/add-server.php', { ip: ipForm, game: gameForm }, function(data) {
              $('.result').html(data);
            });
        });
    });
</script> 
```

有没有人知道我可以用来实现这一目标的不同解决方案，或者我的代码的任何修复？

# cakephp - CakePHP 2.0 路由和分页问题

> ID：11207622
> 
> 赞同：2
> 
> 时间：2012-06-26T12:45:22.067
> 
> 标签：cakephp, routing

在我的路线配置中，我只使用自定义路线。现在我遇到了分页问题，​​在它运作良好之前。

路线：

```
// view all posts by year and month
Router::connect('/blog/:year/:month/*', array(
 'controller' => 'posts',
 'action' => 'index',
 'month' => null
), array(
  'pass' => array(
    'year',
    'month'
  ),
  'year' => '[12][0-9]{3}',
  'month' => '0[1-9]|1[012]'
)); 
```

这应该执行以下操作：/blog/2012/ 应该列出 2012 年的所有帖子，而月份不相关。/blog/2012/05/ 应该列出 2012 年 5 月以来的所有帖子，月份是相关的。我在末尾添加了 /* 以使用 /blog/2012/05/page:2，它现在可以正常工作了。但是，/blog/2012/page:2 不起作用，page:2 被假定为一个月，并且由于不匹配的正则表达式，转换为''，因此数据库查询查找一个月''。

我可能不知何故没有完全掌握路由，以及如何声明可以传递和不能传递的变量，但是我如何重写这个配置以使其工作，而不从根本上改变它？我真的认为这是一个配置问题。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T15:45:09.857

If you disabled all the default Cake routes, it will stop the pagination working, you can get the routes used for pagination only by adding:

`Router::connectNamed(false, array('default' => true));`

[http://book.cakephp.org/2.0/en/development/routing.html#controlling-named-parameters](http://book.cakephp.org/2.0/en/development/routing.html#controlling-named-parameters)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T06:57:20.977

In order to solve this in a pragmatic and maybe not that elegant way, I came up with the following. First I connected the page named parameter:

```
Router::connectNamed(array('page' => '[\d]+'), array(
 'default' => false,
 'greedy' => false
)); 
```

[according to the cookbook](http://book.cakephp.org/2.0/en/development/routing.html#controlling-named-parameters), this will only enable the page named parameter and disable all others, and it will only accept numerical values.

I am not sure whether this was particularly connected to my specific issue though.

Secondly, I reread the cookbook and saw [here](http://book.cakephp.org/2.0/en/development/routing.html#routes-configuration) that the order of connections in routes.php really matters. I.e., when an url has to be routed, connections at the top of the file have higher priority over connections at the bottom. Thus, I came up with this configuration order:

```
 // view all posts by year and month
 Router::connect('/blog/:year/:month/*', array(
    'controller' => 'posts',
    'action' => 'index'
  ), array(
    'year' => '[12][0-9]{3}',
    'month' => '0[1-9]|1[012]'
  ));

  // view all posts by year
 Router::connect('/blog/:year/*', array(
    'controller' => 'posts',
    'action' => 'index'
 ), array('year' => '[12][0-9]{3}'));

  // view all posts
  Router::connect('/blog/*', array(
     'controller' => 'posts',
     'action' => 'index'
  )); 
```

Before, it was reversed, i.e. /blog/* was connected first. Because of the greedy star, this "swallowed" everything, also stuff like /blog/2012/, where 2012 was just passed as an argument. Whereas now, I can come up with /blog/2012/page:2, /blog/2012/05/page:2, and "fake" urls like /blog/2012/5ssfd/page:2 will map to /blog/2012/page:2, i.e. in this case, the first connection wasn't matched, so it jumps to the second connection. The reason I did it this way is that I wasn't able to do stuff like /blog/:year/:month/page:page and thus avoid the greedy star (maybe somebody knows how to do this).

# asp.net - 在 IIS 7.5 窗口 2008 R2 上配置 ASP.NET 1.1 应用程序

> ID：11207623
> 
> 赞同：0
> 
> 时间：2012-06-26T12:45:22.673
> 
> 标签：asp.net, windows-server-2008-r2, asp.net-1.1

我在 IIS 7.5 的窗口 2008 R2 上部署了 asp.net 1.1 应用程序（vs2003）。

在浏览默认页面时，它会给出错误的 httphandle。

我想知道 asp.net 1.1 应用程序是否与 IIS 7.5 兼容或者是

# xslt - 使用 xslt 拆分标签的值

> ID：11207626
> 
> 赞同：2
> 
> 时间：2012-06-26T12:45:31.720
> 
> 标签：xslt, xslt-1.0

资源：

```
 <Data>
     <value>M1,M2,M3,M4,M5,M6</value>
  </Data> 
```

需要将它们显示为

输出：

```
 <ABCD>
        <value1>M1</value1>
        <value2>M2</value2>
        <value3>M3</value3>
        <value4>M4</value4>
        <value5>M5</value5>
        <value6>M6</value6>
    </ABCD> 
```

XSLT：

我实际上想根据“，”拆分值并将它们放在不同的变量中。使用 str-split()，我可以将它加载到不同的变量中吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T03:39:29.607

**这个 XSLT 1.0 转换**：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="/*">
  <ABCD>
    <xsl:apply-templates/>
  </ABCD>
 </xsl:template>

 <xsl:template match="value/text()" name="split">
  <xsl:param name="pText" select="."/>
  <xsl:param name="pOrd" select="1"/>

  <xsl:if test="$pText">
    <xsl:element name="value{$pOrd}">
      <xsl:value-of select=
        "substring-before(concat($pText, ','), ',')"/>
    </xsl:element>

    <xsl:call-template name="split">
      <xsl:with-param name="pText" select="substring-after($pText, ',')"/>
      <xsl:with-param name="pOrd" select="$pOrd+1"/>
    </xsl:call-template>
  </xsl:if>
 </xsl:template>
</xsl:stylesheet> 
```

**应用于提供的 XML 文档时：**

```
<Data>
    <value>M1,M2,M3,M4,M5,M6</value>
</Data> 
```

**产生想要的正确结果**：

```
<ABCD>
   <value1>M1</value1>
   <value2>M2</value2>
   <value3>M3</value3>
   <value4>M4</value4>
   <value5>M5</value5>
   <value6>M6</value6>
</ABCD> 
```

**说明**：

1.  递归命名模板，当传递的文本参数变为空字符串时具有停止条件。

2.  正确使用**[`xsl:element`](http://www.w3.org/TR/1999/REC-xslt-19991116#section-Creating-Elements-with-xsl%3aelement)**和**[AVT](http://www.w3.org/TR/1999/REC-xslt-19991116#attribute-value-templates)**。

3.  正确使用标准 XPath 函数**[`substring-before()`](http://www.w3.org/TR/xpath/#function-substring-before)**和**[`substring-after`](http://www.w3.org/TR/xpath/#function-substring-after)**

4.  正确使用**[哨兵](http://en.wikipedia.org/wiki/Sentinel_value)**来简化代码并提高效率。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T12:47:21.923

如果您有权访问 EXSLT，则可以使用`str:split()`.

```
<xsl:apply-templates select='str:split(/Data/value, ",")' /> 
```

[此处可运行的示例](http://www.xmlplayground.com/mV69jJ)

# asp.net - 电子邮件进入垃圾邮件而不是收件箱

> ID：11207629
> 
> 赞同：2
> 
> 时间：2012-06-26T12:45:34.483
> 
> 标签：asp.net, dns, sendmail, domainkeys, pointers

我们在 godaddy.com 有一个域名“www.mycloudcctv.com”，我们创建了一个指向 212.78.237.157 的子域 cam.mycloudcctv.com 我们有一个在第三方服务器 (212.78.237.157) 上运行的应用程序。此应用程序希望使用电子邮件地址“alerts@mycloudcctv.com”代表我们发送电子邮件。以下代码片段 (ASP.NET) 用于从 (212.78.237.157) 发送电子邮件

```
    var mailClient = new SmtpClient();

    mailClient.Credentials = new NetworkCredential { UserName = "alerts@mycloudcctv.com", Password = "xyz" };

    邮件客户端.端口 = 25;
    mailClient.Host = "smtpout.secureserver.net";
    mailClient.EnableSsl = false;

    var mail = new MailMessage("alerts@mycloudcctv.com", "azharmalik3@hotmail.com", "测试 Smtp 服务器", "测试 mycloudcctv 服务器") { IsBodyHtml = true };
    //现在发送消息
    mailClient.Send(邮件);

```

一切正常，并且正在发送电子邮件，但它们最终会出现在 gmail/hotmail/yahoo 的垃圾邮件/垃圾文件夹中。您能否向我们提供必要的信息，以便我们的电子邮件进入收件箱而不是垃圾邮件文件夹？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T12:51:24.740

这是一个包含许多复杂问题的大问题，但它实际上归结为三个主要领域：

1.  电子邮件是否来自已被授权为指定域发送电子邮件的服务器？

2.  电子邮件的内容是否只是超链接，是否包含会触发垃圾邮件刺客将其标记为垃圾邮件的文本。

3.  您的服务器是否被列入垃圾邮件黑名单

对于第 1 点，了解如何为发送权限设置 SPF 记录。[http://www.mydigitallife.info/how-to-set-up-and-create-sender-policy-framework-spf-domain-dns-txt-record-with-wizard/](http://www.mydigitallife.info/how-to-set-up-and-create-sender-policy-framework-spf-domain-dns-txt-record-with-wizard/)

对于第 2 点，获取一份垃圾邮件刺客副本并通过它运行您的电子邮件以查看分数。 [http://spamassassin.apache.org/](http://spamassassin.apache.org/)

对于第 3 点[http://whatismyipaddress.com/blacklist-check](http://whatismyipaddress.com/blacklist-check)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T12:51:37.470

这并不容易。你必须做的事情很少。例如 SendGrid 有一些指导方针：

[http://support.sendgrid.com/entries/21194967-deliverability-101](http://support.sendgrid.com/entries/21194967-deliverability-101)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T13:50:00.190

我发现这篇博文非常有用！好好读一读，它涵盖了到目前为止已经提到的很多要点：

[http://www.codinghorror.com/blog/2010/04/so-youd-like-to-send-some-email-through-code.html](http://www.codinghorror.com/blog/2010/04/so-youd-like-to-send-some-email-through-code.html)

# scheduled-tasks - 任务计划程序启动失败

> ID：11207632
> 
> 赞同：6
> 
> 时间：2012-06-26T12:45:38.473
> 
> 标签：scheduled-tasks, windows-server-2008-r2

上周末，我在 Windows 任务计划程序中遇到了**启动失败**。详情如下——

```
> Log Name:      Microsoft-Windows-TaskScheduler/Operational Source:    
> Microsoft-Windows-TaskScheduler Date:          6/24/2012 1:14:16 PM
> Event ID:      101 Task Category: Task Start Failed Level:        
> Error Keywords:      (1) User:          SYSTEM Computer:      Some
> Computer Name Description: Task Scheduler failed to start "some file
> path" task for user "author". Additional Data: Error Value:
> 2147549186\. Event Xml: <Event xmlns="http://schemas.microsoft.com/win/2004/08/events/event">  
> <System>
>     <Provider Name="Microsoft-Windows-TaskScheduler" Guid="{DE7B24EA-73C8-4A09-985D-5BDADCFA9017}" />
>     <EventID>101</EventID>
>     <Version>0</Version>
>     <Level>2</Level>
>     <Task>101</Task>
>     <Opcode>101</Opcode>
>     <Keywords>0x8000000000000001</Keywords>
>     <TimeCreated SystemTime="2012-06-24T20:14:16.003204300Z" />
>     <EventRecordID>2091795</EventRecordID>
>     <Correlation />
>     <Execution ProcessID="936" ThreadID="812" />
>     <Channel>Microsoft-Windows-TaskScheduler/Operational</Channel>
>     <Computer>Some Computer Name</Computer>
>     <Security UserID="" />   </System>   <EventData Name="TaskStartFailedEvent">
>     <Data Name="TaskName">some file path</Data>
>     <Data Name="UserContext">author</Data>
>     <Data Name="ResultCode">2147549186</Data>   </EventData> </Event> 
```

首先，错误代码**“错误值：2147549186”**是什​​么意思。
其次，这个问题的原因可能是什么。
最后，这个问题的解决方案是什么。

我衷心感谢您的回复：）

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-02T17:53:42.417

因此，在更改运行任务的帐户的密码后，我的服务器上也遇到了同样的问题。为了解决这个问题，我对需要我重新输入帐户密码的任务设置进行了更改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-05T17:23:45.820

我对相同的错误代码有同样的问题。您可以尝试更改以下内容。===报价开始===在任务调度器中，点击计划作业属性>>>然后设置

在最后列出的选项中：“如果任务已经在运行，则适用以下规则：”从下拉列表中选择“停止现有实例”。

[http://answers.microsoft.com/en-us/windows/forum/windows_vista-windows_programs/task-scheduler-failed-to-start-additional-data/96994b77-d690-4403-8b51-4e1d0ae998e1](http://answers.microsoft.com/en-us/windows/forum/windows_vista-windows_programs/task-scheduler-failed-to-start-additional-data/96994b77-d690-4403-8b51-4e1d0ae998e1)

# .net - Nuget repositories.config 文件的用途是什么？

> ID：11207635
> 
> 赞同：56
> 
> 时间：2012-06-26T12:45:45.377
> 
> 标签：.net, visual-studio, nuget

文件是什么`packages/repositories.config`？它应该保持在版本控制之下吗？

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2012-07-02T12:08:29.113

根据 Nuget 开发人员 David Ebbo 的说法

> 如果您使用 Package Restore 工作流程，您可以完全从源代码管理中省略 Packages 文件夹（包括此文件）。

[https://stackoverflow.com/a/7297465/284795](https://stackoverflow.com/a/7297465/284795)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-06-26T13:08:23.750

如果您在文本编辑器中打开它，您将看到它是`packages.config`您的解决方案的所有文件的列表。

它应该保持在版本控制之下吗？那要看。NuGet 的内置包还原功能将重新创建此文件，因为它在`packages.config`构建项目时为每个项目使用该文件。但是，TeamCity 的包还原功能使用`packages/repositories.config`.

如果启用了 NuGet 的包还原，为什么还要使用 TeamCity 包还原？如果你有一个带有 NuGet 包的 Silverlight 项目，由于某种原因，在使用 MSBuild 构建时包还原会出现问题。有关更多详细信息，请查看我关于该问题的问题。 [PackageRestore、Silverlight 和 MSBuild 的问题](https://stackoverflow.com/questions/8435938/issue-with-packagerestore-silverlight-and-msbuild)

# javascript - window.parent.location.href 不能在 asp.net 中使用 ajaxcontroltoolkit

> ID：11207637
> 
> 赞同：0
> 
> 时间：2012-06-26T12:45:46.933
> 
> 标签：javascript, ajaxcontroltoolkit, registerstartupscript, clientscript

我正在使用 iframe 从父页面打开新的 .aspx 页面。子页面正在使用 ajaxcontroltoolkit(ajax CalendarExtender)。现在在提交表单时，我想关闭 iframe 并返回父页面。为此，我正在使用以下代码。

```
ClientScript.RegisterStartupScript(this.GetType(), "scriptid", window.parent.location.href='ViewVendors.aspx'", true); 
```

如果我从子页面中删除 ajax 控件但不适用于 ajax 控件，则此文件有效。我想同时使用 calenderExtender 和 iframe 。我该如何使用它以及这种所谓的异常行为有什么问题。

这是我的提交按钮事件处理程序的代码。

```
protected void btnUpdate_Click(object sender, EventArgs e)
{
    try
    {
        objVendor.VendorID = Convert.ToInt64(Request.QueryString["Id"]);
        objVendor.Name = txtName.Text;
        objVendor.BillingAddress = txtBillingAddress.Text;
        objVendor.ShippingAddress = txtShippingAddress.Text;
        objVendor.ContactPersonName = txtContactPerson.Text;
        objVendor.ContactNumber = txtContactNumber.Text;
        objVendor.EmailID = txtEmailID.Text;
        objVendor.VendorSinceDate = Convert.ToDateTime(txtVendorDate.Text);
        objVendor.IsActive = Convert.ToBoolean(rdblStatus.SelectedValue);
        objVendor.Logo = FileUpload();
        int intResult = objVendor.UpdateVendor();
        if (intResult > 0)
        {
            ScriptManager.RegisterStartupScript(this.Page, this.GetType(), "window.parent.location.href='ViewVendors.aspx'", "scriptid", true);
            //ClientScript.RegisterStartupScript(this.GetType(), "scriptid", "window.parent.location.href='ViewVendors.aspx'", true);
        }
    }
    catch (Exception ex)
    {
        lblMessage.Text = ex.Message;
        lblMessage.CssClass = "ERROR";
    }
} 
```

//编辑现在，只要我不向子页面添加日历扩展器，我的代码就可以正常工作。当我在子页面中添加日历扩展器时，它显示错误“无法修改控件集合，因为控件包含代码块（即 <% ... %>）”。如果我删除压延机，它再次运行良好。通过谷歌搜索，我发现 Javascript 标记中的 <% %> 正在产生问题。我该如何解决它以及为什么在这种情况下压延控制会产生问题？

这是我的脚本的代码。

```
<script type="text/javascript">
    function uploadStarted() {
        $get("imgDisplay").style.display = "none";
    }
    function uploadComplete(sender, args) {
        var imgDisplay = $get("imgDisplay");
        //  var imgPhoto = $get("#imgPhoto");
        var imgPhoto = document.getElementById('<%=imgPhoto.ClientID %>');
        imgDisplay.src = "images/loader.gif";
        imgPhoto.style.display = "none";
        imgDisplay.style.cssText = "";
        var img = new Image();
        img.onload = function () {
            imgDisplay.style.cssText = "height:100px;width:100px";
            imgDisplay.src = img.src;
        };
        img.src = "<%=ResolveUrl(UploadFolderPath) %>" + args.get_fileName();

    }
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T12:57:01.560

您需要使用页面上的[ScriptManager](http://msdn.microsoft.com/en-us/library/system.web.ui.scriptmanager.aspx)实例注册您的 JavaScript - 如果您使用 AJAX，您应该已经拥有该实例。它有自己可以使用的[RegisterStartupScript方法。](http://msdn.microsoft.com/en-us/library/system.web.ui.scriptmanager.registerstartupscript.aspx)

# node.js - bundledDependencies 相对于 npm 中的普通依赖项的优势

> ID：11207638
> 
> 赞同：91
> 
> 时间：2012-06-26T12:45:48.980
> 
> 标签：node.js, npm, dependencies

npm 允许我们指定[`bundledDependencies`](https://docs.npmjs.com/files/package.json#bundleddependencies)，但是这样做有什么好处呢？我想如果我们想绝对确保我们得到正确的版本，即使我们引用的模块被删除，或者捆绑可能有速度优势？

任何人都知道`bundledDependencies`正常依赖的优势吗？

* * *

## 回答 #1

> 赞同：111
> 
> 时间：2014-07-30T18:34:12.967

***对于快速阅读***者：此 QA 是关于[package.json](https://www.npmjs.org/doc/files/package.json.html) bundledDependencies 字段，*而不是*关于[package](https://www.npmjs.org/package/bundled-dependencies)。

# bundledDependencies 做什么

“bundleDependencies”正是它们的名字所暗示的。应该在您的项目中的依赖项。所以功能和普通依赖基本一样。它们在运行时也会被打包`npm pack`。

# 何时使用它们

正常的依赖项通常是从 npm 注册表安装的。因此，捆绑的依赖项在以下情况下很有用：

*   您想重用不是来自 npm 注册表或已修改的第三方库
*   您想将自己的项目重新用作模块
*   你想用你的模块分发一些文件

这样，您不必创建（和维护）自己的 npm 存储库，但可以获得与 npm 包相同的好处。

# 何时*不*使用捆绑的依赖项

在开发时，我认为重点不是防止意外更新。我们有更好的工具，即代码存储库（git、mercurial、svn...）或现在锁定文件。

要固定您的软件包版本，您可以使用：

*   **选项 1：**使用 node 8 附带的较新的 NPM 版本 5。它使用`package-lock.json`文件（请参阅[node 博客](http://blog.npmjs.org/post/154473364440/npm5-specifications-and-our-rfc-process)和 node 8 版本）

*   **选项2：**使用[纱线](https://yarnpkg.com)代替`npm`. 它是来自 facebook 的包管理器，比它更快`npm`，它使用[`yarn.lock`](https://yarnpkg.com/en/docs/yarn-lock)文件。否则它使用相同的方法`package.json`。

> 这与其他包管理器（如 Bundler 或 Cargo）中的锁定文件相当。它类似于 npm 的 npm-shrinkwrap.json，但它不是有损的，并且可以创建可重现的结果。

`npm`实际上从 中复制了该功能`yarn`。

*   **Option3：**这是以前推荐的方法，我不再推荐了。这个想法是使用`npm shrinkwrap`大部分时间，有时将整个东西（包括 node_module 文件夹）放入您的代码存储库中。或者可能使用[shrinkpack](https://github.com/JamieMason/shrinkpack)。当时的最佳实践在[node.js 博客](http://blog.nodejs.org/2012/02/27/managing-node-js-dependencies-with-shrinkwrap/)和[Joyent 开发者](https://www.joyent.com/developers/node/deploy#shrinkwrap)网站上进行了讨论。

# 也可以看看

这有点超出了问题的范围，但我想提一下最后一种依赖关系（我知道的）：[对等依赖关系](https://nodejs.org/en/blog/npm/peer-dependencies/)。另请参阅这个[相关的 SO 问题](http://stackoverflow.com/questions/18875674/whats-the-difference-between-dependencies-devdependencies-and-peerdependencies)，可能还有`yarn`关于[bundledDependencies](https://yarnpkg.com/lang/en/docs/dependency-types/#toc-bundleddependencies)的文档。

* * *

## 回答 #2

> 赞同：50
> 
> 时间：2012-07-02T11:13:18.907

Node 目前最大的问题之一是它的变化速度有多快。这意味着生产系统可能非常脆弱，`npm update`很容易破坏东西。

使用 bundledDependencies 是解决此问题的一种方法，它可以确保，正如您正确推测的那样，无论其他情况发生什么变化，您都将始终提供正确的依赖项。

您还可以使用它来捆绑您自己的私有捆绑包，并将它们与安装一起交付。

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2013-02-10T17:43:36.787

Other advantage is that you can put your internal dependencies (application components) there and then just require them in your app as if they were independent modules instead of cluttering your lib/ and publishing them to npm.

If/when they are matured to the point they could live as separate modules, you can put them on npm easily, without modifying your code.

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-08-09T11:30:31.693

我很惊讶我还没有在这里看到这个，但是当仔细选择时，`bundledDependencies`可以用来生成一个可分发的包`npm pack`，它将在`npm`未配置的系统上运行。如果您的系统没有联网/不在互联网上，这将很有帮助：将您的包放在拇指驱动器（或其他任何东西）上并解压缩 tarball，然后`npm run`或`node index.js`它就可以工作。

也许有更好的方法来捆绑你的应用程序以“离线”运行，但如果有的话，我还没有找到。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-08-21T17:56:58.757

在操作上，我将 bundledDependencies 视为模块的私有模块存储，其中依赖项更加公开，在您的模块及其依赖项（和子依赖项）之间解决。您的模块可能依赖于旧版本，例如 react，但依赖项需要最新和最好的。您的包/安装将导致您的固定版本在 中`node_modules/$yourmodule/node_modules/react`，而您的依赖项将获得他们的版本`node_modules/react`（或者`node_modules/$dependency/node_modules/react`如果他们如此倾向于）。

一个警告：我最近遇到了一个依赖项，它没有正确配置它对 react 的依赖关系，并且在 bundledDependencies 中做出反应会导致该依赖模块在运行时失败。

# android - Android：对从 SharedPreferences 检索到的数据进行排序

> ID：11207640
> 
> 赞同：1
> 
> 时间：2012-06-26T12:45:52.680
> 
> 标签：android, sorting, sharedpreferences

我正在尝试在 Android 中存储数据。我正在使用`SharedPreferences`. 我正在使用以下方法检索这些数据：

```
 SharedPreferences myPrefs = this.getSharedPreferences("myPrefs", MODE_WORLD_READABLE);
            Map<String, ?> keys = myPrefs.getAll();
            for (Map.Entry<String, ?> entry : keys.entrySet()) {
                Log.i("map values", entry.getKey());
                            //some code
 } 
```

**编辑：**

但是检索到的数据与插入的顺序不同。如何获得相同的订单？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T12:55:32.997

将结果复制`Map`到 的实现中`SortedMap`，例如`TreeMap`。

像这样（**按键**排序）：

```
SharedPreferences myPrefs = this.getSharedPreferences("myPrefs", MODE_WORLD_READABLE);
TreeMap<String, ?> keys = new TreeMap<String, Object>(myPrefs.getAll());
for (Map.Entry<String, ?> entry : keys.entrySet()) {
    Log.i("map values", entry.getKey());
    //some code
} 
```

要按**值排序并且** *不丢失任何键值对*（因为 Map 很容易允许重复值映射到不同的键），您需要首先将其转换为 a`List`并对其进行排序。

```
 List<Pair<Object, String>> sortedByValue = new LinkedList<Pair<Object,String>>();
    for (Map.Entry<String, ?> entry : keys.entrySet()) {
        Pair<Object, String> e = new Pair<Object, String>(entry.getValue(), entry.getKey());
        sortedByValue.add(e);
    }

    // Pair doesn't have a comparator, so you're going to need to write one.
    Collections.sort(sortedByValue, new Comparator<Pair<Object, String>>() {
        public int compare(Pair<Object, String> lhs, Pair<Object, String> rhs) {
            // This is a naive and shitty comparator, but it works for
            // arbitrary objects. Sort of. Tweak depending on the order you need.
            String sls = String.valueOf(lhs.first);
            String srs = String.valueOf(rhs.first);
            int res = sls.compareTo(srs);
            // Sort on value first, key second
            return res == 0 ? lhs.second.compareTo(rhs.second) : res;
        }
    });

    for (Pair<Object, String> pair : sortedByValue) {
        Log.i("map values", pair.first + "/" + pair.second);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-03T09:39:48.753

添加一个带有顺序的属性，像这样...首先保存设置...

```
public static void saveSettings(final Editor editor, final String [] order) {
    final String csl = toString(order);//comma separated
    editor.putString("insert_order", csl);
    for (int i = 0; i < values.length; i++) {
        editor.putString(values[i], your_value[i]);
    }
} 
```

现在加载它们：

```
public static List<String> loadSetting(final SharedPreferences preferences) {
    final List<String> inOrder = new ArrayList<>(); 
    final String[] ordering = preferences.getString("insert_order", "").split(",");
    for (final String item : ordering) {
        final String value = (String) preferences.getString(item, "");
        inOrder.add(value);
    }
    return inOrder;
} 
```

# c++ - 为开源 C++ 库做贡献

> ID：11207643
> 
> 赞同：-4
> 
> 时间：2012-06-26T12:46:19.940
> 
> 标签：c++, boost

我应该如何通过 SVN 获得它？我可以使用 Eclipse 及其 Subversive Team Provider 插件来管理我的更改吗？那么，如果我做了一些更改，我该如何提交，谁认为我的更改是友好且足够好的？老实说，我想尝试为一些库做出贡献，因为这种贡献为我提供了学习 C++ 细节的动力。

我搜索并阅读了一些关于 Boost 的信息，但我认为它太复杂了，不能作为一个起点。

因此，您能否提供一条开始并成为开源库贡献者的途径？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-26T12:48:28.003

好吧，第一步是实际阅读常见问题解答。这总是一个好的开始。

尤其是“我如何为发展做出贡献？” 问题。

[http://www.boost.org/users/faq.html](http://www.boost.org/users/faq.html)

# php - 数据库生活在过去？

> ID：11207644
> 
> 赞同：4
> 
> 时间：2012-06-26T12:46:23.000
> 
> 标签：php, mysql, date

我的 MySQL 数据库中有事件，所有事件都有一个日期。当我执行 SQL 查询以获取未来的所有事件时，我收到一个错误......虽然，事件的日期是在未来。当我将 SQL 请求更改为选择过去的日期时，我得到了未来的日期......
下面的 SQL 语句以前工作过，但由于某种原因它停止工作......

我使用这个 SQL 请求：

```
$sql = "SELECT * FROM calendar WHERE date >= CURDATE() order by `date`"; 
```

结果我得到一个空数组......
但是，如果我将查询更改为此，我将获得数据库中的所有事件：

```
$sql = "SELECT * FROM calendar WHERE date <= CURDATE() order by `date`"; 
```

这是我的数据库数据。在我看来，所有的数据都在未来...... ![在此处输入图像描述](../Images/6951c0aee3584a6783649f14463344be.png)

表格的格式`date`是默认的日期类型：
![在此处输入图像描述](../Images/ebe04823ae4fa5f781cfc242625a41fd.png)

当我向我的服务器询问`echo date("Y-m-d");`我得到今天日期的时间时......

那么我在哪里犯错呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T12:59:11.153

您可能检查了错误的日期字段。您有创建日期和预定日期吗？

我现在正在服用感冒药，我可能会发疯，但你的日期表不可能是你日历项目的日期，提交的 id 只是一个 int(2)，看起来有点小。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T13:03:42.190

也许更简单的东西？我注意到表中的列名称是`date`，它也是返回日期时间值的日期部分的函数 date() 的名称。如果是这样的话

```
$sql = "SELECT * FROM calendar c WHERE c.`date` <= CURDATE() order by `date`"; 
```

会成功的。即使不是 mysql 本身，您使用的 gui 应用程序（对我来说似乎是 phpmyadmin）也可能会感到困惑。

（顺便说一句，您忘记了`date`order by 子句中的结束标记）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T12:51:18.737

得到一个空集意味着没有找到匹配的东西。我会看看你的日期格式。我唯一在想的另一件事是它正在比较一个不匹配的类型，所以只返回一个空集。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-26T12:56:57.500

使用 DATEDIFF ：

[日期差异](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_datediff)

WHERE DATEDIFF(date, CURDATE) > 0

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-26T12:50:46.663

在进行查询之前，请运行以下命令：

```
SET time_zone = '-2:00'; // or whatever your time zone is. 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-27T08:12:00.490

不要问我如何或为什么，但我已经截断了我的表并重新插入了一些数据，我的查询似乎工作得很好：

```
$sql = "SELECT * FROM `calendar` WHERE `date` >= CURDATE() order by `date`"; 
```

所以，尽管问题似乎可以通过截断我的表来解决，但我想知道为什么问题的答案......任何人都可以提供给我吗？

# java - 如何在 Glass Fish Server/Apache Tomcat 上部署 Rest Web 服务？

> ID：11207649
> 
> 赞同：0
> 
> 时间：2012-06-26T12:46:58.457
> 
> 标签：java, web-services, rest

我使用 Net Beans 作为编辑器开发了一个简单的 Rest Web 服务。我还直接从 Net Beans 将它部署在我机器上的 Glass Fish Server 上，但现在我想将该 Web 服务部署在可能没有安装 Net Beans 的另一台机器上它上面将安装 Glass Fish Server/Apache Tomcat Server 那么我应该如何在该机器上部署该 Web 服务？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T15:29:08.550

只需将您的应用程序导出为 war.. 然后您可以将其部署在任何 servlet 容器或应用程序服务器上，如 tomcat、jetty 或 glassfish..

# nginx - 如何在 PlayFramework2 中获取用户的 IP？

> ID：11207654
> 
> 赞同：4
> 
> 时间：2012-06-26T12:47:35.320
> 
> 标签：nginx, playframework-2.0

出于安全原因，有时需要通过 IP 阻止用户。就我而言，我想在（SQL）数据库中管理 IP 黑名单。我想我可以根据动作组合处理过滤器部分，但为此我需要用户的 IP。

**那么，如何获取用户的IP呢？**

PS：应用程序在 nginx 代理后面运行。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-27T08:51:51.063

如果你玩！app 位于 nginx（或任何其他反向代理）之后，`request.remoteAddress()`只会返回您的 nginx 主机的 IP 地址。为了检索客户端的真实 IP，您应该在 nginx 的 proxy_pass 配置中包含以下内容：

```
location / {
  proxy_pass        http://play-app:9000;
  proxy_set_header  X-Real-IP  $remote_addr;
} 
```

这会将客户端 IP 作为参数添加到标头

文档：[Nginx](http://wiki.nginx.org/HttpProxyModule)

然后在您的游戏中！应用程序，你会像这样检索它：

```
request.headers.get("X-Real-IP") //In Java
request.headers.get("X-Real-IP") //In Scala 
```

文档：[Java](http://www.playframework.org/documentation/api/2.0.2/java/play/mvc/Http.RequestHeader.html#headers%28%29) , [Scala](http://www.playframework.org/documentation/api/2.0.2/scala/index.html#play.api.mvc.Request)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-26T15:42:31.157

现在可以使用 Play **2.0.2+**：[RequestHeader.remoteAddress()](http://www.playframework.org/documentation/api/2.0.2/java/play/mvc/Http.RequestHeader.html#remoteAddress%28%29)

爪哇：

```
String ip = request().remoteAddress(); 
```

斯卡拉：

```
Action { request =>
    val ip = request.remoteAddress()
} 
```

# cordova - 使用 phonegap 从外部网页访问设备功能

> ID：11207666
> 
> 赞同：1
> 
> 时间：2012-06-26T12:48:12.653
> 
> 标签：cordova

我有适用于 ios 的 phonegap 应用程序，其中包含一个用于加载外部 url 的 web 视图。

从该外部 url 我尝试访问设备功能，如设备名称、相机等。

但问题是，我在包含外部 url 的网络服务器中复制了 cordova.js 文件。在那个网址中，我添加了这些东西。

```
<script type="text/javascript" src="cordova-1.7.0.js"/>
<script type="text/javascript">
document.addEventListener('deviceready',onDeviceReady',false);
function onDeviceReady(){
} 
```

Javascript 本身没有执行 document.addEventListener 行..它不理解“deviceready”事件..我无法访问设备功能..帮助我..过去 10 天我对这些事情感到震惊..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T11:20:09.470

```
/* enter code here */ function onBodyLoad()
            {       
                document.addEventListener("deviceready", onDeviceReady, false);
            } 
```

使用这个，在身体负荷上调用函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-30T18:43:28.097

问题通过以下方式解决。

1.  在访问 cordova 插件文件之前，使用 stringByEvaluatingJavascriptFromString 方法在 webview 中执行 javascript 文件。

2.  如果您从外部服务器访问本机功能，请实例化插件并使用其中的功能

# wolfram-mathematica - 使用分段的 Mathematica 绘图问题

> ID：11207668
> 
> 赞同：0
> 
> 时间：2012-06-26T12:48:18.560
> 
> 标签：wolfram-mathematica, plot, piecewise

我正在尝试在我的一个问题中使用分段进行绘图，并且我有两个变量：x 和 psi。但是，各个函数仅对“x”的定义范围有效，并且 psi 范围是相同的。我正在尝试制作这些的 3D 图——我基本上只有 Plot3D[p,{x,0,1},{psi,0.01,1}] ---> 这些范围适用于整个绘图范围和各个函数的我的 x 范围已经在 Piecewise 函数中定义。

我收到以下错误：说 Plot::exclul: ...... 必须是等式列表或 \ 实值函数。

谁能帮我解决这个问题。我正在尝试遵循与以下相同的程序：[如何将 Piecewise[] 与可变数量的图形/间隔一起使用](https://stackoverflow.com/questions/8612775/how-can-i-use-piecewise-with-a-variable-number-of-graphs-intervals) 但是，我不知道如何处理绘图部分。

谢谢。

以下是我的代码：

```
j = 10; 
s = 0; r = 0;

K[x_, psi_] := 
  Sum[Sin[n*Pi*x]*
    Sin[n*Pi*
      psi]*(2*Exp[-(n*Pi)^2*
         Abs[s + r]] - (Exp[-(n*Pi)^2*Abs[s - r]] - 
         Exp[-(n*Pi)^2*(s + r)])/(n*Pi)^2 ), {n, 1, j}];

TL[x_, psi_] = Integrate[K[x - y, psi]*y, {y, -10, 10}];

TU[x_, psi_] = Integrate[K[x - y, psi]*(1 - y), {y, -10, 10}];

eq = {TL[x, psi], TU[x, psi]};
cond = {{0 <= x <= 0.5, 0.01 <= psi <= 1}, {0.5 < x <= 1, 
    0.01 <= psi <= 1}};
p = Piecewise[{eq, cond}];

Plot3D[p, {x, 0, 1}, {psi, 0.01, 1}] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T15:17:32.527

这是一个工作版本：

```
time = AbsoluteTime[];
j = 10; s = 0; r = 0;
K[x_, psi_] :=
  Sum[Sin[n*Pi*x]*Sin[n*Pi*psi]*
    (2*Exp[-(n*Pi)^2*Abs[s + r]] -
      (Exp[-(n*Pi)^2*Abs[s - r]] -
         Exp[-(n*Pi)^2*(s + r)])/(n*Pi)^2), {n, 1, j}];
TL[x_, psi_] := Integrate[K[x - y, psi]*y, {y, -10, 10}];
TU[x_, psi_] := Integrate[K[x - y, psi]*(1 - y), {y, -10, 10}];
Plot3D[Piecewise[
  {{TL[x, psi], 0 <= x <= 0.5}, {TU[x, psi], 0.5 < x <= 1}}],
 {x, 0, 1}, {psi, 0.01, 1}]
ToString[Round[AbsoluteTime[] - time]] <> " seconds" 
```

![在此处输入图像描述](../Images/3995b2bec55b3c9eac7c0c972c40719c.png)

# tridion - 如果我们在 XSLT TBB(XSLT Mediator) 中有类别 tcm id，如何获取关键字列表

> ID：11207673
> 
> 赞同：3
> 
> 时间：2012-06-26T12:48:48.393
> 
> 标签：tridion, tridion-2011

我正在使用 SDL tridion 2011 SP1。

我想使用 XSLT Mediator 获取给定类别下的关键字列表。

有没有人遇到过这种情况，如果有，请分享您的看法。

但是当我实际查看 Category Item XML 时，它没有任何与其关键字相关的信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T12:59:04.217

您将需要创建一个 C# TBB 以将类别关键字插入包中，然后将其作为 XSLT 中的参数进行访问。

您可以使用一段 c#，如下所示：

```
class GetCategoryKeywords : TemplateBase
    {
        public override void Transform(Engine engine, Package package)
        {
            Initialize(engine, package);
            String webDavPathCategory = package.GetValue("CategotryWebDavPath");
            Category cat = (Category)engine.GetObject(webDavPathCategory);
            XmlDocument keywordsXml = new XmlDocument();
            keywordsXml.LoadXml(cat.GetListKeywords().OuterXml);
            Item output = package.CreateXmlDocumentItem(ContentType.Xml, keywordsXml);
            package.PushItem("CategoryKeywords", output);
        }
    } 
```

这将在包含关键字的名为 CategoryKeywords 的包中放置一个 XML 文档。然后，当您调用 XSLT 中介时，将“Include Package Paramters”值设置为 true，并将参数添加到 XSLT 的顶部，如下所示：

```
<xsl:param name="CategoryKeywords"/> 
```

然后，您可以将新参数作为变量进行循环，对它执行所需的任何 XPath 查询。以下示例可能会有所帮助：

```
<xsl:variable name="URI" select="$CategoryKeywords//tcm:ListUsedItems/tcm:Item[@Title=$VALUE]/@ID" />

<xsl:for-each select="$CategoryKeywords//tcm:ListItems/tcm:Item">
    Do something
<xsl:for-each> 
```

# javascript - 如何使用 Javascript 函数来命名变量？

> ID：11207678
> 
> 赞同：4
> 
> 时间：2012-06-26T12:48:59.203
> 
> 标签：javascript, variables

我希望能够使用函数创建变量，例如：

```
function createVar(a,b){
    var [a]name[b];
} 
```

因此，如果我调用该函数`createVar(prefix,suffix)`，我最终会得到一个名为`prefixnamesuffix`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T12:51:17.323

您不能以这种方式创建局部变量，但可以使用字符串创建属性。

```
function createVar(obj, a, b)
{
   obj[a+'name'+b] = foo;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T14:14:41.970

```
function createVar(a, b, value) {
    // declare the variable on current context(default is window),
    // and set value, default is undefined
    this[a + 'name' + b] = value;
} 
```

用于：

```
createVar('a', 'b');
// variable anameb now is declare, but it's value is undefined
console.log(anameb); // -> undefined

createVar('prefix', 'suffix', 'optional');
// variable prefixnamesuffix now is exist in window
console.log(prefixnamesuffix); // -> 'optional' 
```

或者：

```
var obj = {};
createVar.call(obj, 'pre', 'suf', 'defValue');
// variable prenamesuf is now exist in obj, but not exist in window
console.log(obj.prenamesuf); // -> 'defValue'
console.log(prenamesuf); // ReferenceError: prenamesuf is not defined 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-25T13:46:12.603

这是可能的——有点棘手。

这一切都始于了解变量的范围。让我们看一个基本的简单示例：

```
var myvar = 'I see'; 
```

这将创建一个名为`myvar`您可以访问的基本级别的变量，例如`alert(myvar);`which will，在这种情况下，警报“我看到了”。

这实际上是在 window 对象上创建一个属性。因此，`var myvar = 'I see';`与 相同`window['myvar'] = 'I see';`。

也可以用这种方式创建复杂的对象。

更多示例：

```
window['fred'] = 'howdy fred';// create fred property
var regularfred = 'howdy fred'; // create regularfred property
window['town'] = {}; // create town object
window['town']['george'] = 'georgetown'; //create town.george property
alert(fred + ":" + regularfred); // alerts "howdy fred:howdy fred"
alert(fred == regularfred);// alerts true
alert(this['town']['george']);// alerts "georgetown"

function createvar(a, b) {
    this[a + 'name' + b] = "fredling";
    alert(this[a + 'name' + b]);// alerts "fredling"
    alert(window[a + 'name' + b]);// alerts "fredling"
}
var hi = 'hi';
var lo = 'loook';
createvar(hi, lo);
alert(this[hi + 'name' + lo]);// alerts "fredling" 
```

要求工作示例：http: [//jsfiddle.net/pGWZN/](http://jsfiddle.net/pGWZN/)

# javascript - div 悬停另一个绝对中心 jquery

> ID：11207680
> 
> 赞同：0
> 
> 时间：2012-06-26T12:49:01.177
> 
> 标签：javascript, jquery, html

我想在绝对中心显示一个 div.text（图像中的红色）悬停一个 div.image（黑色）。我考虑使用 javascript 获取每个图像的大小，而不是为 div.text 提供 css。它适用于 WP，因此每个图像都有不同的高度（有时也有不同的宽度），并且它必须获得所有图像的大小。

非常感谢。

![http://jeandetremontels.fr/images/stack.png](../Images/f9685848f2ed5ebea025faa4e94459bd.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T15:37:28.267

一种快速的方法是创建一个包含一个单元格的表格，垂直/水平居中，将样式设置为“display: none;”，根据图像的 .height() 和 .width() 调整表格的大小，并将表格设为绝对在图像上具有高 z-index 的位置。然后在显示其上方表格的图像上设置悬停行为，并在悬停时再次隐藏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T15:39:20.933

您可以使用 JQuery UI 定位插件。

[http://jqueryui.com/demos/position/](http://jqueryui.com/demos/position/)

```
$("#MyDiv").position({
  my : "center center",
  at : "center center",
  of : "#MyImage"
}); 
```

演示：http: [//jsfiddle.net/thinkingsites/QYH8w/1/](http://jsfiddle.net/thinkingsites/QYH8w/1/)

# c# - NInject 扩展工厂

> ID：11207681
> 
> 赞同：2
> 
> 时间：2012-06-26T12:49:03.713
> 
> 标签：c#, dependency-injection, inversion-of-control, ninject, factory

在阅读了关于**NInject v3**的新文档以及如何使用*Factory Extension*之后，显然我仍然没有完全理解它，因为我的代码到处抛出异常......

我得到了这个例外，如果人们愿意，我可以粘贴整个内容，但我会尽量保持简短。

> 激活 IDeployEntityContainer 时出错 没有匹配的绑定可用，并且类型不是自绑定的。

这是我的代码... Ninject Bind Module 类

```
class MyNinjectModule : NinjectModule {
    public override void Load() {
        ...
        Bind<IDeployEntityFactory>().ToFactory();
        Bind<IDeployEntityContainer>().To<DeployEntityContainer>();
        ...
    }
} 
```

使用工厂的类

```
class DeployController : IDeployController {

    private readonly IDeployEntityFactory _entityFactory;

    public DeployController(..., IDeployEntityFactory entityFactory) {
        ...
    }

    public void Execute() {
       ...
       //I get the Exception on this line...
       _entityFactory.GetDeployEntity<IDeployEntityContainer>();
       ...
    }
} 
```

工厂接口

```
public interface IDeployEntityFactory
{
    T GetDeployEntity<T>();
} 
```

工厂实施

```
public class DeployEntityFactory : IDeployEntityFactory
{
    private readonly IResolutionRoot _resolutionRoot;

    public DeployEntityFactory(IResolutionRoot resolutionRoot)
    {
        _resolutionRoot = resolutionRoot;
    }

    public T GetDeployEntity<T>()
    {
        return _resolutionRoot.Get<T>();
    }
} 
```

> 在幕后，Ninject 将创建一个实现指定工厂接口的代理并拦截所有方法，使代理的行为类似于...

我知道，如果我不需要在工厂内创建对象时做一些特殊/自定义的事情，我就不必实际创建自己的实现。

资料来源：[http ://www.planetgeek.ch/2011/12/31/ninject-extensions-factory-introduction/](http://www.planetgeek.ch/2011/12/31/ninject-extensions-factory-introduction/)

**编辑1：**

只是为了确保我为您提供了查看问题所需的所有信息，我正在添加 DeployEntityContainer 类/接口

```
public abstract class DeployEntityBase : IDeployEntity
{
    ...
    protected readonly IDeployEntityFactory _entityFactory;

    protected DeployEntityBase(..., IDeployEntityFactory entityFactory)
    {
        ...
        _entityFactory = entityFactory;
        ...
    }
    ...
}

public class DeployEntityContainer : DeployEntityBase, IDeployEntityContainer
{
    ...
    public DeployEntityContainer(..., IDeployEntityFactory entityFactory)
        : base(..., entityFactory)
    {
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T10:19:14.517

我最终只是将绑定更改为普通绑定，

```
Bind<IMyFactory>().To<MyFactory>().InSingletonScope(); 
```

它奏效了！我的第一个想法是大声笑，但这也很有意义。

使用`ToFactory()`绑定它从未使用过我的工厂实现，它只是从定义的接口生成一个。

现在它使用我的实现。工厂有点改变：从在工厂中更新内核或在构造函数中注入它，现在我注入`IResolutionRoot`了`Get<T>();`我的对象。

这是用于澄清的新代码。

```
class MyNinjectModule : NinjectModule {
    public override void Load() {
        ...
        Bind<IDeployEntityFactory>().To<DeployEntityfactory>().InSingletonScope();
        Bind<IDeployEntityContainer>().To<DeployEntityContainer>();
        ...
    }
}

public class DeployEntityFactory : IDeployEntityFactory
{
    private readonly IResolutionRoot _resolutionRoot;
    ...
    public DeployEntityFactory(..., IResolutionRoot resolutionRoot)
    {
        ...
        _resolutionRoot = resolutionRoot;
    }

    public T GetDeployEntity<T>()
    {
        return _resolutionRoot.Get<T>();
    }
} 
```

如果这不是正确的方法，我希望有人可以阐明它并以正确的方式通知我......我想@remogloor 会知道这样的事情。:)

# firefox - Firefox 的 Facebook 评论框问题

> ID：11207683
> 
> 赞同：1
> 
> 时间：2012-06-26T12:49:09.360
> 
> 标签：firefox, comments, facebook-comments

我遇到了 Firefox 的问题，我的 fb 评论框显示在 chrome 和 safari 上，但 firefox 除外。

```
<div id="fb-root"></div>
<script>(function(d, s, id) {
var js, fjs = d.getElementsByTagName(s)[0];
if (d.getElementById(id)) {return;}
js = d.createElement(s); js.id = id;
js.src = "//connect.facebook.net/en_US/all.js#xfbml=1";
fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>

<div class="fb-comments" data-href="xxxxxx" data-num-posts="10" data-width="500"></div>
</b:if> 
```

这是 html 开始标签

```
<html xmlns:fb="http://ogp.me/ns/fb#"> 
```

# wcf - 从远程计算机访问 wcf svc 文件时找不到资源错误

> ID：11207685
> 
> 赞同：0
> 
> 时间：2012-06-26T12:49:17.690
> 
> 标签：wcf, iis-7, wcf-hosting

我在 IIS 中托管了一个简单的 wcf 服务，并且可以从 IIS 服务器计算机访问它而没有任何问题。但是，当我从任何其他机器访问它时，我收到错误： `"Server Error in '/' Application.The resource cannot be found."`我将一个 aspx 文件放在与 svc 文件相同的位置，并且可以从所有机器访问；排除连接问题。请就此发表您的想法。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-26T14:29:27.447

它可能是部署或配置问题。它可以与 MIME 类型有关。所以请重新检查您的部署过程。

请参考以下链接：

1.  [在 IIS 7 和 Windows Server 2008 上托管 WCF 服务](http://blah.winsmarts.com/2008-4-Host_a_WCF_Service_in_IIS_7_-and-amp;_Windows_2008_-_The_right_way.aspx)
2.  [在 IIS 7 中设置启用 netTcpBinding 的 WCF 服务](http://galratner.com/blogs/net/archive/2010/10/08/setting-up-a-nettcpbinding-enabled-wcf-service-in-iis-7.aspx)

# php - WSDL：W3C XML Schema 的根元素应该是

> ID：11207689
> 
> 赞同：0
> 
> 时间：2012-06-26T12:49:28.723
> 
> 标签：php, vb.net, wsdl

我有一个可以从 php 客户端调用的 php web 服务。我需要从 vb.net 应用程序调用此 Web 服务。当我尝试添加对此 Web 服务的引用时，我收到此错误：

W3C XML Schema 的根元素应该是`<schema>`

这是我的 wsdl 文件的顶部：

```
<?xml version="1.0"?>
<!--                    partie 1 : Definitions                               -->
<definitions    name="raidService" 
            targetNamespace="http://mydomain/webservice/raidService.wsdl" 
            xmlns:typens="urn:eRaid" 
            xmlns:xsd="http://www.w3.org/2001/XMLSchema" 
            xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" 
            xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/" 
            xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" 
            xmlns="http://schemas.xmlsoap.org/wsdl/"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T13:38:48.897

这是整个wsdl：

```
<?xml version="1.0"?>
<!--                    partie 1 : Definitions                               -->
<definitions    name="eRaid" 
            targetNamespace="eRaid" 
            xmlns:typens="urn:eRaid" 
            xmlns:xsd="http://www.w3.org/2001/XMLSchema" 
            xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" 
            xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/" 
            xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" 
            xmlns="http://schemas.xmlsoap.org/wsdl/">

<!--                    partie 2 : Types                                     -->
    <types>
            <xsd:schema     xmlns="http://www.w3.org/2001/XMLSchema" 
                    targetNamespace="urn:eRaid">
            </xsd:schema>
    </types> 

<!--                    partie 3 : Message                                   -->
    <message name="getDbFileHashRequest">
        <part name="algo" type="xsd:string"/>
        <part name="fichier" type="xsd:string"/>
    </message>
    <message name="getDbFileHashResponse">
            <part name="return" type="xsd:string"/>
    </message>

    <message name="sendStatusRequest">
            <part name="return" type="xsd:integer"/>
            <part name="return" type="xsd:integer"/>
            <part name="return" type="xsd:string"/>
    </message>

<!--                    partie 4 : Port Type                                 -->
    <portType name="eRaidPort">
            <!-- partie 5 : Operation -->
            <operation name="getDbFileHash">
                    <input message="typens:getDbFileHashRequest"/>
                    <output message="typens:getDbFileHashResponse"/>
            </operation>
            <operation name="sendStatus">
                    <input message="typens:sendStatusRequest"/>
            </operation>
    </portType>

<!--                    partie 6 : Binding                                   -->
    <binding name="eRaidBinding" type="typens:eRaidPort">
            <soap:binding style="rpc"              transport="http://schemas.xmlsoap.org/soap/http"/>
            <operation name="getDbFileHash">
                    <soap:operation soapAction="getDbFileHashAction"/>
                    <input name="getDbFileHashRequest">
                            <soap:body      use="encoded"   
                                            namespace="urn:eRaid"        
                                            encodingStyle="http://schemas.xmlsoap.org/soap/encoding/"/>
                    </input>
                    <output name="getDbFileHashResponse">
                            <soap:body      use="encoded"   
                                            namespace="urn:eRaid" 
                                              encodingStyle="http://schemas.xmlsoap.org/soap/encoding/"/>
                    </output>
            </operation>
            <operation name="sendStatus">
                    <soap:operation soapAction="sendStatusAction"/>
                    <input name="sendStatusRequest">
                            <soap:body      use="encoded"   
                                            namespace="urn:eRaid"        
                                              encodingStyle="http://schemas.xmlsoap.org/soap/encoding/"/>
                    </input>
            </operation>
    </binding>

<!--                    partie 7 : Service                                   -->
    <service name="eRaidService">
            <documentation>Retourne une phrase simple </documentation>
            <!-- partie 8 : Port -->
            <port name="eRaidPort" binding="typens:eRaidBinding">
                   <soap:address location="http://localhost/webServiceTest/MyService.php"/> <!-- modifier ce chemin vers server.php -->
                </port>
        </service>
</definitions> 
```

# php - 如何使用 php 创建博客 xml 提要？

> ID：11207694
> 
> 赞同：-3
> 
> 时间：2012-06-26T12:49:54.057
> 
> 标签：php, xml

如何使用 php 创建博客 xml 提要？

```
<?xml version='1.0' encoding='UTF-8'?><ns0:feed xmlns:ns0="http://www.w3.org/2005/Atom"><ns0:generator>Blogger</ns0:generator><ns0:entry><ns0:category scheme="http://www.blogger.com/atom/ns#" term="$category" /><br/><ns0:category scheme="http://schemas.google.com/g/2005#kind" term="http://schemas.google.com/blogger/2008/kind#post" /><ns0:id>$postid</ns0:id><ns0:content type="html">$content</ns0:content><ns0:published>$published</ns0:published><ns0:title type="html">$title</ns0:title></ns0:entry></ns0:feed>
            回答 #1

赞同：0

时间：2012-06-26T13:05:08.923

如果我理解你的问题，我的回复希望对你有帮助

```
$slideshow [] = array('item' => $new[$j], 'source' => $x,'zoom' => $y); 

   $doc = new DOMDocument();
   $doc->formatOutput = true;

  $r = $doc->createElement( "slideshow" );
  $doc->appendChild( $r );

  foreach( $slideshow as $item )
  {
  $b = $doc->createElement( "item" );

  $source = $doc->createElement( "source" );
  $source->appendChild(
  $doc->createTextNode( $item['source'] )
  );
  $b->appendChild( $source );

  $zoom = $doc->createElement( "zoom" );
  $zoom->appendChild(
  $doc->createTextNode( $item['zoom'] )
  );
  $b->appendChild( $zoom );

  $r->appendChild( $b );

  }
  echo $doc->saveXML();
  $doc->save("abc.xml") 
```

```

# jquery - 具有推送效果的滑动联系表单使用 jQuery UI 保留页面内容的向下滑动

> ID：11207698
> 
> 赞同：0
> 
> 时间：2012-06-26T12:50:00.833
> 
> 标签：jquery, jquery-ui, slide, contact-form

我正在使用以下内容使用 jQuery 向下滑动联系表单：

```
$("#panel").slideDown(1000); 
```

这里发生的是页面的其余内容向下滑动以容纳联系表格，这是我想要的，而不是“推送”联系表格到页面上，这样表格底部首先显示，它“显示”了表格，因此顶部首先显示。我想要“推送”效果，从这里搜索看来，包括 jQuery UI 和以下内容就可以了。

```
$("#panel").show("slide", { direction: "up" }, 1000); 
```

它确实如此。但是，现在页面的其余内容并没有随着表单向下滑动，而是突然跳到正确的位置以容纳表单。

如何实现这两种效果，即向下“推”表单和向下滑动页面内容？

**HTML**

```
<div id="panel">

<div id="contact-form">

*FORM*

</div></div> 
```

**CSS**

```
#panel {
    display:none;
}

#contact-form {
    width: 840px;
    height:auto;
    position:relative;
    left:50%;
    margin-left:-420px;
} 
```

# c# - 如何在新对象上加载属性？

> ID：11207702
> 
> 赞同：0
> 
> 时间：2012-06-26T12:50:24.920
> 
> 标签：c#, entity-framework, entity-framework-4.1, ef-code-first

基本上，我有一些类似的东西：

```
public class Product
{
public int ID {Get;Set;}
public string foo {Get;Set;}
public string bar {Get;Set;}
public virtual SubProduct subproduct{get;set;}
public int SubProductID{get;set;}
}

public class SubProduct
{
public int ID {Get;Set;}
public string foo {Get;Set;}
} 
```

我有一个方法，它接受一个字符串并通过 foo 进行搜索 -

`var correctproduct = (db.product.SingleOrDefault(x => x.foo == my_string);`

并且，如果它可以找到它，我使用正确的产品，但是，如果它不存在（通过检查`if correctproduct==null`，我创建一个新对象并执行`.SaveChanges();`.

但是，我直接进入下一部分，我将与子产品进行交互。我创建新对象的部分分配了一个数值给`subproduct`，但是，试图扩展，我只是得到`Object reference not set to an instance of an object`. 下次运行时，它可以完美运行。

我有一个想法，我可以在哪里搜索 id 的子产品并将对象`subproduct`直接分配给属性，但是，我认为这不是最好的方法。我也觉得我的使用`SingleOrDefault`只是一种 hack，我想知道我是否可以就最好的方法获得一些反馈？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T13:28:04.380

您可以使用以下代码，

```
objectProduct.subProduct = new SubProduct{ ID = id,foo = value }; 
```

# rest - 在两阶段提交协议中回滚失败时会发生什么

> ID：11207704
> 
> 赞同：4
> 
> 时间：2012-06-26T12:50:33.117
> 
> 标签：rest, transactions, jta

我正在尝试通过 REST 在 Java 中实现分布式服务的事务。我有一些问题要问。

1.  当资源做出肯定答复并且在阶段 2 中它们未能提交时会发生什么？
2.  我试图搜索，但不幸的是，我找不到正确的答案来解决 2PC 协议中回滚失败时会发生什么。我知道它是一个阻塞协议，它会无限期地等待响应，但是在现实世界的场景中会发生什么？
3.  分布式事务管理的其他协议是什么？
4.  我阅读了有关事务实现的 JTA 的信息，但是还有其他可用于实现事务的实现吗？任何回复都会有所帮助。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T10:25:43.443

我没有这些问题的答案，但我为我的具体案例创建了一个具体的方法。因此，如果有人需要针对相同情况进行交易，请在此处发布。

由于在我的情况下，数据库（或索引器，它也作为服务运行）中的当前条目没有变化，但系统中不同位置只有新条目，因此错误失败无害，但错误成功有害。因此，对于我的特殊情况，我遵循以下策略：

一世。所有资源都在数据库中的行中添加了一个事务 ID。在协调器请求资源的第一阶段，所有资源在数据库中使用协调器生成的事务 id 进行条目。

ii. 在第一阶段之后，当所有资源都回复肯定时，这意味着资源已经对数据库进行了更改，协调器在自己的日志中记录事务成功并将其传达给资源。所有资源使插入的数据行中的事务状态成功。

iii. 一项服务不断运行以搜索数据库并通过向协调器询问状态来更正事务状态。如果没有条目或失败条目，则事务返回失败状态，并在服务上更新。在获取数据时，如果数据库中有一个带有失败标签的条目，那么它总是与协调器检查事务状态，如果没有失败条目，它会过滤结果。因此，不提供没有信息或存在故障信息的那些数据条目。所以结果总是一致的。

这种策略为我的案例提供了一种原子性方法。

# java - JTextArea 是否适合我的目的？

> ID：11207710
> 
> 赞同：0
> 
> 时间：2012-06-26T12:51:03.043
> 
> 标签：java, swing, jtextarea

我想创建一个文本区域，用户在其中输入一些文本，按下回车键，然后将该文本发送到一个对其进行处理的类（例如更改单词的顺序），然​​后在下一行显示编辑后的文本在文本区域。

此外，如果用户在第一个编辑文本之后的行上写了一些东西并再次按下回车 - 只有最后一行被发送到编辑类。如果他愿意，用户也应该能够编辑所有行。类似于 Wolfram Mathematica 中的文本区域，如果人们知道的话。

我是 Java 新手，我不知道是否必须使用 JTextArea 并自己设计某种类来做到这一点，或者已经有一些东西可以帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T12:55:07.783

使用 JTextArea 这是可能的，但我会创建一个新的类，它扩展了 JTextArea。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T13:18:44.637

是的，您可以使用 JTextArea 做到这一点。我不会像之前建议的那样扩展它，但我会添加一个 KeyListener 并实现您感兴趣的特定方法。例如，您对输入 Enter 的时间感兴趣；所以你可以做这样的事情：

```
public void keyTyped(KeyEvent e) {
  //look for the ENTER key and perform specific processing
  int keyCode = e.getKeyCode();
  switch(keyCode) { 
    case KeyEvent.VK_ENTER:
      //do stuff
    break;
  }
} 
```

# c# - 在 C# 中序列化 XML

> ID：11207726
> 
> 赞同：0
> 
> 时间：2012-06-26T12:52:07.817
> 
> 标签：c#, xml, serialization

我通常在网上搜索我的答案，但这次我画的是空白。我正在使用 VS2005 编写代码以将 xml 发布到 API。我在 C# 中设置了类，并将其序列化为 XML 文档。课程如下：

```
[Serializable]
    [XmlRoot(Namespace = "", IsNullable = false)]
    public class Request
    {
        public RequestIdentify Identify;

        public string Method;

        public string Params;

    }

    [Serializable]
    public class RequestIdentify
    {
        public string StoreId;

        public string Password;
    } 
```

当我序列化这个时，我得到：

```
<?xml version="1.0" encoding="UTF-8"?>
<Request xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
   <Identify>
      <StoreId>00</StoreId>
      <Password>removed for security</Password>
   </Identify>
   <Method>ProductExport</Method>
   <Params />
</Request> 
```

但 API 返回“未发送 XML”错误。

如果我直接以字符串形式发送 xml：

```
string xml = @"<Request><Identify><StoreId>00</StoreId><Password>Removed for security</Password></Identify><Method>ProductExport</Method><Params /></Request>"; 
```

有效地发送此 xml（“请求”标签中没有架构信息）：

```
<Request>
   <Identify>
      <StoreId>00</StoreId>
      <Password>Removed for security</Password>
   </Identify>
   <Method>ProductExport</Method>
   <Params />
</Request> 
```

看来识别XML没问题。

所以我想我的问题是如何将我当前的类更改为序列化为 XML 并像第二种情况一样获取 XML？我假设我需要另一个“父”类来包装现有的类，并在这个“父”或类似的东西上使用 InnerXml 属性，但我不知道该怎么做。

为这个问题道歉，我只使用 C# 3 个月，我是一名实习开发人员，必须在工作中自学！

哦，PS我不知道为什么，但是VS2005真的不想让我用私有变量设置这些类，然后在公共等价物上使用getter和setter，所以我现在让它们写出来。

提前致谢 ：-）

更新：

与大多数事情一样，如果您不确定需要问什么或如何措辞，则很难找到答案，但是：

一旦我知道要寻找什么，我就找到了我需要的答案：

删除 XML 声明：

```
XmlWriterSettings writerSettings = new XmlWriterSettings();
writerSettings.OmitXmlDeclaration = true;
StringWriter stringWriter = new StringWriter();
using (XmlWriter xmlWriter = XmlWriter.Create(stringWriter, writerSettings))
{
    serializer.Serialize(xmlWriter, request);
}
string xmlText = stringWriter.ToString(); 
```

删除/设置命名空间（感谢上面帮助找到这个的回复！）：

```
XmlSerializerNamespaces ns = new XmlSerializerNamespaces();
ns.Add("", ""); 
```

感谢所有回答或指出我正确方向的人的帮助！是的，一旦我知道自己在问什么，我确实找到了要阅读的文章 :-) 这是我自学 3 个月以来第一次陷入困境，所以我认为我做得很好......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T13:01:55.120

来自 Rydal 的博客：

> 默认情况下，XmlDocument 对象将命名空间分配给 XML 字符串，并且还包括声明作为 XML 文档的第一行。我绝对不需要或使用这些，因此，我需要删除它们。这就是你如何去做。

[从 XML 序列化中删除声明和命名空间](http://blog.dotnetclr.com/archive/2008/01/29/removing-declaration-and-namespaces-from-xml-serialization.aspx)

# java - Android倒计时，这是正确的方法吗？

> ID：11207727
> 
> 赞同：0
> 
> 时间：2012-06-26T12:52:15.513
> 
> 标签：java, android, datetime

我懂了。但我似乎无法弄清楚如何获得剩余的天数/小时/分钟/秒数。我在调试模式下运行它，它产生了：2776799998。2776799998 以毫秒为单位，在 2 天 1 小时 15 分钟内是非常多的。（是在发布此内容时）。

正确的方法是什么？

```
Calendar cal = Calendar.getInstance();
cal.set(2012, 6, 28, 16, 0);
long endTime = cal.getTimeInMillis(); 
long currentTime = System.currentTimeMillis();
long remaining = endTime - currentTime;

long seconds = remaining / 1000;
long minutes = seconds / 60;
long hours = minutes / 60;
long days = hours / 24; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T12:57:00.653

从[日历的 javadoc](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Calendar.html#set%28int,%20int,%20int,%20int,%20int%29)：

> 月份值从 0 开始。例如，0 表示一月。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-26T12:56:56.490

Calendar API 上的[月份](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Calendar.html#MONTH)从 0 开始。所以 6 对应于 7 月。也许那是你的问题。

# reflection - Guice 对象的类层次结构问题

> ID：11207729
> 
> 赞同：3
> 
> 时间：2012-06-26T12:52:21.020
> 
> 标签：reflection, guice, objectify

我正在尝试使用 Guice 来实例化我的 Objectify DAO。我的层次结构如下：

```
public class EmpresaDao extends ObjectifyDao<Empresa> { ... }

public class ObjectifyDao<T> extends DAOBase { ... } 
```

当我使用“ `new EmpresaDao()`”时，`getClass().getGenericSuperclass()`给了我：

```
[INFO] superclass -> br.com.xxxxx.server.service.ObjectifyDao<br.com.xxxxx.domain.Empresa> 
```

当我使用“ `injector.getInstance(EmpresaDao.class)`”时，`getClass().getGenericSuperclass()`给了我：

```
[INFO] superclass -> class br.com.xxxx.server.service.EmpresaDao 
```

显然，我想让 Guice 用 DI 实例化我的对象。

有人可以解释为什么会这样吗？

有没有办法（用 Guice 实例化）获得与“new ()”相同的超类？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T19:09:14.997

感谢 Stuart McCulloch，他[在这里帮助了我](https://groups.google.com/forum/?fromgroups#!topic/google-guice/4CJDdRs4zhk)

可以禁用 AOP（使用 Guice whitout AOP），这给了我我想要的东西（br.com.xxxxx.server.service.ObjectifyDao）（未测试）

但是我想在我的工具包上安装 AOP，所以我通过从 Guice 生成的代理类中获取 TypeArguments 来解决：

```
 clazz = (Class<T>) ((ParameterizedType) TypeLiteral.get(getClass()).getSupertype(ObjectifyDao.class).getType()).getActualTypeArguments()[0]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-26T13:52:56.900

发生这种情况是因为 Guice 通过动态创建字节码并从 EmpresaDao 继承来代理 EmpresaDao。

# c++ - 在具有属性的向量中查找元素

> ID：11207731
> 
> 赞同：1
> 
> 时间：2012-06-26T12:52:29.113
> 
> 标签：c++, stl

> **可能重复：**
> [如何在结构或类的向量中快速搜索具有特定值的对象？C++](https://stackoverflow.com/questions/9718341/how-to-make-a-fast-search-for-an-object-with-a-particular-value-in-a-vector-of-s)

有没有比使用迭代器更快地在向量内找到具有某些参数的指定值的对象并在找到时停止的方法？我有矢量图

在哪里

```
class Simple{
public:
string name;
int id;
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-26T12:54:04.197

在不了解向量（排序或未排序等）的情况下，您可以获得的最快速度是线性时间（很像使用迭代器）。

但是你可以用[`std::find_if`](http://www.cplusplus.com/reference/algorithm/find_if/)它来美化代码——尽管它仍然会在线性时间内运行。

如果您多次查询容器，您可能需要对其进行排序 ( `O(n*log(n))`)，然后使用二分搜索 ( `O(log(n))`)。但这只有在查询数量与元素数量相当的情况下才有意义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T12:59:44.177

*   如果您使用排序向量，则可以使用二进制搜索。
*   您可以替换`std::vector<Simple>`为`std::map<int, std::string>`.

# php - HTML 帮助 - 找到将隐藏值添加到 td 字段的方法

> ID：11207733
> 
> 赞同：2
> 
> 时间：2012-06-26T12:52:31.537
> 
> 标签：php, html

我有一个 HTML 表，我正在其中构建一个编辑函数来更改该表中的一个字段。我希望您能帮助我找到一种方法来存储此字段中列出的数据的 ID。事实上，我有一个包含列出数据的对象`RoleName`，在 a`<td>`中，我也想存储它的 id，执行以下操作：

```
 foreach ($accountUsers as $accountUser){
      <td value="$accountUser->roleID">$accountUser->getRoleName()</td> 
```

问题是它`value`不是 a 的属性`td`。我的限制是我必须继续使用表格。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T12:55:17.073

如果我正确理解了您的问题，您可以使用 HTML5[`data-*`](http://www.whatwg.org/specs/web-apps/current-work/multipage/elements.html#attr-data-%2a)属性在元素上存储任意数据：

```
<td data-value="$accountUser->roleID">$accountUser->getRoleName()</td> 
```

**更新**（见评论）

您可以通过 jQuery[`data`](http://api.jquery.com/data/)方法访问这些数据：

```
var value = $(yourTd).data("value"); 
```

或者，您可以使用本机[`getAttribute`](https://developer.mozilla.org/en/DOM/element.getAttribute)方法：

```
var value = yourTd.getAttribute("data-value"); 
```

# android - 长按也会触发常规点击

> ID：11207737
> 
> 赞同：0
> 
> 时间：2012-06-26T12:52:39.670
> 
> 标签：android

> **可能重复：**
> [Android：为什么长按也会触发正常点击？](https://stackoverflow.com/questions/5428077/android-why-does-long-click-also-trigger-a-normal-click)

Android的复制[：为什么长按也会触发正常点击？](https://stackoverflow.com/questions/5428077/android-why-does-long-click-also-trigger-a-normal-click)和[LongClick 事件也触发 Click 事件](https://stackoverflow.com/questions/742171/longclick-event-also-triggers-click-event)，但那些不包含我的问题的解决方案。

我的 OnLongClickListener 返回`true`，但我仍然在它之后得到 OnClick，同样是我返回 false。为什么？

# java - 字符串比较

> ID：11207739
> 
> 赞同：4
> 
> 时间：2012-06-26T12:52:53.887
> 
> 标签：java, null, nullpointerexception

有谁知道为什么`String.compareTo`没有编程为在参数方面表现得更优雅`null`？

在我看来，下一个序列应该返回“1”，或者至少 javadoc 在 NPE 方面应该更具体。`equals()`在这种情况下返回，`false`我猜应该是一致的。`equals``compareTo`

例如

```
String nullString = null;
System.out.println ("test".equals(nullString));
System.out.println ("test".compareTo(nullString)); 
```

正在抛出 NPE：

```
false
Exception in thread "main" java.lang.NullPointerException
    at java.lang.String.compareTo(String.java:1177) 
```

添加到它。如果你要在你的代码中做这个 compareTo，你会验证空值吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-26T12:54:46.533

因为它是（强调添加）的[记录行为：`compareTo()`](http://docs.oracle.com/javase/7/docs/api/java/lang/Comparable.html)

> 当且仅当具有与类的每个and相同的布尔值时，类的自然排序`C`被称为*与 equals 一致*。请注意，**它不是任何类的实例，**即使返回，也**应该抛出一个**。`e1.compareTo(e2) == 0``e1.equals(e2)``e1``e2``C`**`null``e.compareTo(null)``NullPointerException`**`e.equals(null)``false`

至于`.equals()`返回`false`而不是 NPEing，再次，它在[文档](http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#equals%28java.lang.Object%29)中：

> 对于任何非空引用值`x`，`x.equals(null)`应该返回`false`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-26T12:54:28.970

来自[javadoc](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html#compareTo%28java.lang.Object%29)

将此字符串与另一个对象进行比较。如果 Object 是 String，则此函数的行为类似于 compareTo(String)。否则，它会抛出 ClassCastException（因为字符串只能与其他字符串相比较）。

然而，唯一的其他选择是抛出一个`ClassCastException`，因为空引用有一个定义明确的异常，所以会抛出 NPE。

执行以下代码：

```
void do()
{
    String s = null;
    System.out.println(s instanceof String); 
} 
```

产生错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T12:57:52.953

一般认为，Java SE 类库文档明确说明 when`null`是有效参数。当没有提到`null`是有效参数时，您应该假设它不是，并且可能会立即抛出异常，或者稍后抛出异常。

在这种情况下，`Comparable`接口的 javadoc 明确指出这`null`不是`Comparable,compareTo`. （您可以`String.compareTo`通过单击“指定者”链接从 javadoc 到达那里。）

# sql - SQL server-2008

> ID：11207744
> 
> 赞同：-2
> 
> 时间：2012-06-26T12:53:17.677
> 
> 标签：sql, windows-server-2008

请帮我解决这个问题是什么

```
ID  Name    Items
101 A   x
102 B   Y
101 A   Z
102 B   S
102 B   J
101 A   Q 
```

现在我必须展示

```
Id      Name    Items
101         A   X
                Z
                Q
102         B   Y
                S
                J 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T14:20:20.030

这是一个 SQL 示例，它生成类似于您问题中的临时表，然后使用 CTE（通用表表达式）和`case`语句输出数据。在 MS SQL Server 2008 R2 中测试。

```
CREATE TABLE #test (
    id INT,
    Name varchar,
    items varchar
);
INSERT INTO #test VALUES
(101, 'A',  'x'),
(102, 'B',  'Y'),
(101, 'A',  'Z'),
(102, 'B',  'S'),
(102, 'B',  'J'),
(101, 'A',  'Q');

WITH tmp AS (
    SELECT CAST(id AS varchar) AS id
        , name
        , items
        , row_number() OVER (PARTITION BY id ORDER BY id) AS rn
    FROM #test
)
SELECT
     (CASE WHEN rn = 1 THEN id   ELSE '' END) AS id
    ,(CASE WHEN rn = 1 THEN name ELSE '' END) AS name
    ,items
FROM tmp;

DROP TABLE #test; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T12:58:37.557

您不能在 sql 查询中完全做到这一点。如果它只是你想要的顺序，那么这个：

```
 select id, name, items 
 from tableName
 order by id, name, items desc 
```

但这不是你想要的，不是吗？

# sql-server-2005 - Sql server 中的日期时间格式

> ID：11207746
> 
> 赞同：-2
> 
> 时间：2012-06-26T12:53:36.130
> 
> 标签：sql-server-2005

我在 sql 表 DateIn 中有字段，表中的日期存在，如 '01/04/2012 00:00:00'。当我在查询分析器上运行查询时 DateIn 就像“2012-04-01 00:00:00.000”一样，我正在从文本框中传递日期，例如“dd/mm/yyyy”格式但不起作用。我有一个函数，我将日期变量 Dim StrDate 作为 DateTime 从文本框传递给查询。请指导我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T13:10:34.960

如果该列是，`datetime`请停止认为它是以某种格式存储的，例如`mm/dd/yyyy`or `dd/mm/yyyy`。日期/时间值在内部存储，没有应用任何这种区域格式 - 这正是 Management Studio 向您呈现的方式。`yyyymmdd`您应该使用for 日期文字编写查询，例如：

```
SELECT <cols> 
FROM dbo.table 
WHERE DateIn >= '20120601'
AND DateIn < '20120626'; 
```

如果其他用户执行，如果机器上的区域设置发生更改，或者如果您将代码移动到另一台服务器，则其他任何操作都可能无法正常工作。请参见：

*   [BETWEEN 和魔鬼有什么共同点？](https://sqlblog.org/2011/10/19/what-do-between-and-the-devil-have-in-common)

*   [要改掉的坏习惯：错误处理日期/范围查询](https://sqlblog.org/2009/10/16/bad-habits-to-kick-mis-handling-date-range-queries)

还要确保您使用的是字符串分隔符。如果你说：

```
WHERE DateIn > 01/06/2012 
```

这与以下内容相同：

```
WHERE DateIn > (1 divided by 6 divided by 2012) 
```

由于整数数学，这会产生：

```
WHERE DateIn > 0 
```

在 SQL Server 中，日期/时间为 0 `'1900-01-01'`- 因此此子句将返回所有非 NULL 行。

# git - 本地执行的 Git 拉钩脚本

> ID：11207749
> 
> 赞同：3
> 
> 时间：2012-06-26T12:53:45.023
> 
> 标签：git

我想为每个与 git 服务器联系的命令 git push 和 pull 提示确认 [yes/no]。有没有办法包含任何命令/脚本来实现这一点？所以用户可以给出输入，之后只有 git 继续进行该操作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T11:59:34.710

首先，我认为你不会因为这种变化而交到很多朋友。如果有人输入`git pull`，他已经证明他愿意联系远程服务器。在我看来，在这种情况下，没有必要用确认对话框来惹恼用户。

无论如何，如果你**想**确认每个`pull`and `push`，钩子不是正确的工具，因为拉/推钩子只存在于服务器端。客户端没有`pre-pull`, `post-pull`,`pre-push`或`post-push`钩子。所以，我们必须抛弃钩子的想法。

您可以为and命令取[别名](https://stackoverflow.com/questions/2553786/how-do-i-alias-commands-in-git)，以便用查询是否真的应该拉/推它们来包围它们。`pull``push`

查询很简单：

```
echo -n "really push? [y/n] "
read -s -n 1 really
if [[ $really == "y" ]]; then 
  # PULL/PUSH HERE
else 
  echo "aborting"
fi 
```

[不幸](https://stackoverflow.com/a/11226146/520162)的是，您不能为别名使用相同的名称。所以，很容易想到

```
[alias]
    push = "!echo -n \"really push? [y/n]\";read -s -n 1 really;if [[ $really == \"y\" ]];then git push; else echo \"aborting\"; fi" 
```

不起作用。

**但是**您还有另外两个选择来实现您想要的：

*   使用 git bord 表示并调用别名`safepush`/`safepull`或类似的东西
*   `.bashrc`在你的for `git pull`and中设置一个别名`git push`（请参阅SU 上的[这个问题](https://superuser.com/questions/105375/bash-spaces-in-alias-name)以设置实际上是*函数的多字**别名*）

 ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T13:11:21.417

我相信您正在寻找[Git hooks](http://git-scm.com/book/en/Customizing-Git-Git-Hooks#Client-Side-Hooks)。

不过，您必须自己将钩子放在那里。我认为您不能让用户将（客户端）钩子与其余代码一起拉动。*

# java - 使用 Jsoup 解析 HTML 文档后丢失 unicode/ASCII 元素

> ID：11207750
> 
> 赞同：1
> 
> 时间：2012-06-26T12:53:47.677
> 
> 标签：java, character-encoding, jsoup

当我解析一个包含 unicode/ASCII 元素的 HTML 页面时，我解决了一个奇怪的行为。这里以 git://gist.github.com/2995626.git 为例。

执行的是：

```
File layout = new File(html_file);
Document doc = Jsoup.parse(layout, "UTF-8");
System.out.println(doc.toString()); 
```

我期望的是 HTML 三角形，但它被转换为“â–¼”。你有什么建议吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T04:16:45.163

Jsoup 完全能够使用 UTF-8 解析 HTML。更重要的是，它已经是它的默认字符编码。您的问题是在其他地方引起的。根据目前提供的信息，我可以看到两个可能的问题原因：

1.  HTML 文件最初不是使用 UTF-8 保存的（或者可能是之前的一步；它最初不是使用 UTF-8 读取的）。
2.  标准输出（去哪里`System.out`）不使用 UTF-8。

如果您确保两者都设置正确，那么您的问题应该会消失。如果不是，那么根据您问题中迄今为止提供的信息，还有另一个可能的原因是不可猜测的。至少，这个博客应该带来很多新的见解：[Unicode - How to get the characters right？](http://balusc.blogspot.com/2009/05/unicode-how-to-get-characters-right.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-23T10:58:07.450

这是由unicode引起的问题。在这里，您可以有一个示例。您可以尝试下面的代码。结果将向您显示您编写的代码不起作用的原因。

```
public static void main(String[] argv) {

    String test = "Ch\u00e0o bu\u1ed5i s\u00e1ng";

    System.out.println(unicode2String(test));
}
/**
 * unicode 转字符串
 */
public static String unicode2String(String unicode) {

    StringBuffer string = new StringBuffer();

    String[] hex = unicode.split("\\\\u");
    string.append(hex[0]);
    for (int i = 1; i < hex.length; i++) {
        // 转换出每一个代码点
        int data = Integer.parseInt(hex[i], 16);

        // 追加成string
        string.append((char) data);
    }

    return string.toString();
} 
```

也许你的代码应该如下：

```
System.out.println(unicode2String(doc.toString())); 
```

# java - 地方详细信息请求失败 - 参考太长

> ID：11207751
> 
> 赞同：2
> 
> 时间：2012-06-26T12:53:49.937
> 
> 标签：java, google-maps, google-places-api

我有一个小型 java 应用程序，给定 google 地方的引用列表，必须取回每个所说的 google 地方的 ID（长话短说，我们存储地点的引用而不是他们的 ID，直到现在才意识到引用每个地方都不是唯一的）。

我的应用程序在列表中大约 95% 的位置上都能完美运行，但某些记录的状态码为“NOT_FOUND”而失败。一些调查显示，这些特定地点的地点参考（与[https://maps.googleapis.com/maps/api/place/details/json?sensor=false&key=myApiKey](https://maps.googleapis.com/maps/api/place/details/json?sensor=false&key=myApiKey)前缀结合使用时）大约 2 个字符太长了一个网址。最后几个字符被截断。

我最初的想法是我只会向 google 地方 API 发出 POST 请求，但是当我将其作为 POST 请求发送到时，我会从 google 服务器返回“REQUEST_DENIED”状态代码。

无论如何，这是否存在，或者这只是谷歌地点 API 的一个紧急错误（现在地点的数量已经将参考推得太长了？）。

我还应该注意，失败的地方都是我们的应用程序最近添加的。

这是我当前（为 95% 工作）代码的样子：

```
public static JSONObject getPlaceInfo(String reference) throws Exception
{
URL places = new URL("https://maps.googleapis.com/maps/api/place/details/json?sensor=false&key="+apiKey+"&reference="+reference);
    URLConnection con = places.openConnection();
    BufferedReader in = new BufferedReader(new InputStreamReader(con.getInputStream()));
    StringBuffer input = new StringBuffer();
    String inputLine;
    while ((inputLine = in.readLine()) != null) 
        input.append(inputLine);
    in.close();

    JSONObject response = (JSONObject) JSONSerializer.toJSON(input.toString());
    return response;
} 
```

这就是我的“ACCESS_DENIED”邮政编码的样子：

```
public static JSONObject getPlaceInfo(String reference) throws Exception
{
    String data = URLEncoder.encode("sensor", "UTF-8") + "=" + URLEncoder.encode("true", "UTF-8");
    data += "&" + URLEncoder.encode("key", "UTF-8") + "=" + URLEncoder.encode(apiKey, "UTF-8");
    data += "&" + URLEncoder.encode("reference", "UTF-8") + "=" + URLEncoder.encode(reference, "UTF-8");

    URL places = new URL("https://maps.googleapis.com/maps/api/place/details/json");
    URLConnection con = places.openConnection();

    con.setDoOutput(true);
    OutputStreamWriter wr = new OutputStreamWriter(con.getOutputStream());
    wr.write(data);
    wr.flush();

    BufferedReader in = new BufferedReader(new InputStreamReader(con.getInputStream()));
    StringBuffer input = new StringBuffer();
    String inputLine;
    while ((inputLine = in.readLine()) != null) 
        input.append(inputLine);
    in.close();

    JSONObject response = (JSONObject) JSONSerializer.toJSON(input.toString());
    return response;
} 
```

失败的参考示例如下：

```
CnRtAAAAxm0DftH1c5c6-krpWWZTT51uf0rDqCK4jikWV6eGfXlmKxrlsdrhFBOCgWOqChc1Au37inhf8HzjEbRdpMGghYy3dxGt17FEb8ys2CZCLHyC--7Vf1jn-Yn1kfZfzxznTJAbIEg6422q1kRbh0nl1hIQ71tmdOVvhdTfY_LOdbEoahoUnP0SAoOFNkk_KBIvTW30btEwkZs 
```

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T15:47:28.417

您在正文中发送请求参数，API 不支持。关于 GET 和请求参数有一个很好的答案：

[带有请求正文的 HTTP GET](https://stackoverflow.com/questions/978061/http-get-with-request-body)

以下代码应适用于地方详细信息请求：

```
private static final String PLACES_API_BASE = "https://maps.googleapis.com/maps/api/place";
private static final String TYPE_DETAILS = "/details";
private static final String OUT_JSON = "/json";

HttpURLConnection conn = null;
StringBuilder jsonResults = new StringBuilder();
try {
    StringBuilder sb = new StringBuilder(PLACES_API_BASE);
    sb.append(TYPE_DETAILS);
    sb.append(OUT_JSON);
    sb.append("?sensor=false");
    sb.append("&key=" + API_KEY);
    sb.append("&reference=" + URLEncoder.encode(reference, "utf8"));

    URL url = new URL(sb.toString());
    conn = (HttpURLConnection) url.openConnection();
    InputStreamReader in = new InputStreamReader(conn.getInputStream());

    // Load the results into a StringBuilder
    int read;
    char[] buff = new char[1024];
    while ((read = in.read(buff)) != -1) {
        jsonResults.append(buff, 0, read);
    }
} catch (MalformedURLException e) {
    return null;
} catch (IOException e) {
    return null;
} finally {
    if (conn != null) {
        conn.disconnect();
    }
}

try {
    // Create a JSON object hierarchy from the results
    JSONObject jsonObj = new JSONObject(jsonResults.toString()).getJSONObject("result");
    jsonObj.getString("name");
} catch (JSONException e) {
    Log.e(LOG_TAG, "Error processing JSON results", e);
} 
```

# facebook - facebook api返回“在等待未完成的响应时获得EOF”错误消息

> ID：11207752
> 
> 赞同：2
> 
> 时间：2012-06-26T12:53:58.727
> 
> 标签：facebook, facebook-graph-api

我代表他们通过我的应用程序将图像发布到用户墙上（他们在活动中走到镜头前）。我的应用程序上周成功运行，现在它无法运行并报告“在等待出色响应时获得 EOF”。

有一个相关的错误报告，但它是针对 iphone 应用程序的，而我的是基于 Web 的 php。

任何人都可以阐明此错误消息吗？我的代码在下面，但它在图片处理和数据库调用方面分解了很多..

```
//initial calling code

$data = array('title' => $station_info->title,
              'message' => $station_info->message,
              'token' => $result['access_token'],
              'item' => $item,
              'pic_source' => $image,
              'fb_id' => $result['fb_id'],
              'album_id' => $station_info->pic_station_album_id,
              'user_id' => $user_id_data['id'],
              );

//$result = $this->__do_facebook_image_post($data);     
$feedback = "FACEBOOKIMG: " . $this->__do_facebook_image_post($data, 'x');  

///processing code

private function __do_facebook_image_post($data,$type = "normal"){

        $attachment =  array(
                'title' => $data['title'],
                'message' => $data['message'],
                'token' => $data['token']
        );

        if($type =="normal"){

            $folder = "webcam";
        }else if($type="x"){
            $folder = "x";

        }

        $upload_path = FCPATH . "/pic_uploads/".$folder."/".$data['item'];

        echo $upload_path;

        if(is_file($upload_path))
        {       
            $attachment['source'] =  '@' . realpath(FCPATH . "/img_uploads/".$folder."/". $upload_path);            
        }
        else
        {           
            $attachment['source'] =  '@' . realpath(FCPATH . "/img_uploads/".$folder."/". $data['pic_source']);         
        }

        return $this->facebook_img_post($data['fb_id'],$attachment,$this->__get_facebook_album_id($data['album_id'],$data['user_id'],$data['token']),$data['token']);

    }

private function __do_facebook_image_post($data,$type = "normal"){

        $attachment =  array(
                'title' => $data['title'],
                'message' => $data['message'],
                'token' => $data['token']
        );

        if($type =="normal"){

            $folder = "webcam";
        }else if($type="x"){
            $folder = "x";

        }

        $upload_path = FCPATH . "/pic_uploads/".$folder."/".$data['item'];

        echo $upload_path;

        if(is_file($upload_path))
        {       
            $attachment['source'] =  '@' . realpath(FCPATH . "/img_uploads/".$folder."/". $upload_path);            
        }
        else
        {           
            $attachment['source'] =  '@' . realpath(FCPATH . "/img_uploads/".$folder."/". $data['pic_source']);         
        }

        return $this->facebook_img_post($data['fb_id'],$attachment,$this->__get_facebook_album_id($data['album_id'],$data['user_id'],$data['token']),$data['token']);

    }

private function __post_to_facebook($url,$attachment)
    {   
        $ch = curl_init();
        curl_setopt($ch, CURLOPT_URL,$url);
        curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, FALSE); // This i added as the URL is https
        curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 2);      // This i added as the URL is https
        curl_setopt($ch, CURLOPT_RETURNTRANSFER,1);
        curl_setopt($ch, CURLOPT_POST, true); // Do I need this ?
        curl_setopt($ch, CURLOPT_POSTFIELDS, $attachment);
        $result= curl_exec($ch);
        curl_close ($ch);   

        return $result;
    }

    function facebook_img_post($fb_id,$data,$album_id ='')
    {

        if(!empty($album_id)){
            $url = "https://graph.facebook.com/".$album_id."/photos";   
        }else{
            $url = "https://graph.facebook.com/".$fb_id."/photos";
        }       

        $attachment =  array(
            'access_token' => $data['token'],
            'message'=> $data['message'],
            'source' => $data['source'] . ";type=".get_mime_by_extension($data['source'])
        );

        return $this->__post_to_facebook($url,$attachment);     
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T11:05:36.917

返回的错误消息与问题并不真正匹配。

我在尝试上传照片但未传递正确的文件路径时修复了此错误。

# c# - C# 不信任已安装的证书

> ID：11207755
> 
> 赞同：3
> 
> 时间：2012-06-26T12:54:14.327
> 
> 标签：c#, iis, ftp, x509certificate2

[我在IIS](http://en.wikipedia.org/wiki/Internet_Information_Services)中使用我自己创建的[SSL](http://en.wikipedia.org/wiki/Transport_Layer_Security)证书设置了一个[FTP](http://en.wikipedia.org/wiki/File_Transfer_Protocol)服务器（使用[Makecert.exe](http://msdn.microsoft.com/en-us/library/bfsktky3%28v=vs.110%29.aspx)和[Pvk2Pfx](http://msdn.microsoft.com/en-us/library/windows/hardware/ff550672%28v=vs.85%29.aspx)）。我将[PFX](https://en.wikipedia.org/wiki/X.509#Certificate_filename_extensions)文件归因于我的 FTP 服务器。

我有一个连接到 FTP 服务器的 C# 脚本，并且总是收到以下错误消息：

> System.Security.Authentication.AuthenticationException：根据验证程序，远程证书无效。

我在本地计算机和用户的“受信任的根证书颁发机构”中安装了证书。

由于它没有进行身份验证，因此我通过商店的 C# 进行了查看：

```
X509Store store = new X509Store(StoreName.AuthRoot, StoreLocation.LocalMachine);
store.Open(OpenFlags.ReadOnly | OpenFlags.OpenExistingOnly);

foreach (X509Certificate2 mCert in store.Certificates)
{
     var friendlyName = mCert.Issuer;
     Console.WriteLine(friendlyName);
}
store.Close(); 
```

但是我的证书没有列出。当我打开[MMC 控制台](https://en.wikipedia.org/wiki/Microsoft_Management_Console)时，我看到了我的证书。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T14:46:11.177

通常，C# 不信任没有受信任根证书的证书——例如自签名证书。`ServicePointManager`允许添加一个您可以自己处理信任的功能。

```
// Callback used to validate the certificate in an SSL conversation
private static bool ValidateRemoteCertificate(
    object sender,
    X509Certificate certificate,
    X509Chain chain,
    SslPolicyErrors policyErrors)
{
    if (Convert.ToBoolean(ConfigurationManager.AppSettings["IgnoreSslErrors"]))
    {
        // Allow any old dodgy certificate...
        return true;
    }
    else
    {
        return policyErrors == SslPolicyErrors.None;
    }
}

private static string MakeRequest(string uri, string method, WebProxy proxy)
{
    HttpWebRequest webRequest = (HttpWebRequest)WebRequest.Create(uri);
    webRequest.AllowAutoRedirect = true;
    webRequest.Method = method;

    // Allows for validation of SSL conversations
ServicePointManager.ServerCertificateValidationCallback += new RemoteCertificateValidationCallback(
    ValidateRemoteCertificate);

    if (proxy != null)
    {
        webRequest.Proxy = proxy;
    }

    HttpWebResponse response = null;
    try
    {
        response = (HttpWebResponse)webRequest.GetResponse();
        using (Stream s = response.GetResponseStream())
        {
            using (StreamReader sr = new StreamReader(s))
            {
                return sr.ReadToEnd();
            }
        }
    }
    finally
    {
        if (response != null)
            response.Close();
    }
} 
```

来自博客文章*[如何以编程方式接受无效的 SSL 证书](http://blog.jameshiggs.com/2008/05/01/c-how-to-accept-an-invalid-ssl-certificate-programmatically/)*。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T10:04:53.793

作为一种快速解决方法，您可以接受以下所有证书：

```
ServicePointManager.ServerCertificateValidationCallback += (o, c, ch, er) => true; 
```

# c# - 如何使用 SharpZipLib 在 C# 中创建超过 7 GB 的 zip 文件？

> ID：11207760
> 
> 赞同：3
> 
> 时间：2012-06-26T12:54:47.050
> 
> 标签：c#, zip

我想用 C# 创建一个包含将近 8 GB 数据的 zip 文件。我正在使用以下代码：

```
using (var zipStream = new ZipOutputStream(System.IO.File.Create(outPath)))
{
    zipStream.SetLevel(9); // 0-9, 9 being the highest level of compression

    var buffer = new byte[1024*1024];

    foreach (var file in filenames)
    {
        var entry = new ZipEntry(Path.GetFileName(file)) { DateTime = DateTime.Now };

        zipStream.PutNextEntry(entry);

        var bufferSize = BufferedSize;
        using (var fs = new BufferedStream(System.IO.File.OpenRead(file), bufferSize))
        {
            int sourceBytes;
            do
            {
                 sourceBytes = fs.Read(buffer, 0, buffer.Length);
                 zipStream.Write(buffer, 0, sourceBytes);
             } while (sourceBytes > 0);
         }
     }

     zipStream.Finish();
     zipStream.Close();
 } 
```

此代码适用于 1 GB 以下的小文件，但当数据达到 7-8 GB 时会引发异常。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T13:28:10.263

正如其他人所指出的那样，实际的例外对回答这个问题会有很大帮助。但是，如果您想要一种更简单的方法来创建 zip 文件，我建议您尝试[http://dotnetzip.codeplex.com/](http://dotnetzip.codeplex.com/)上提供的 DotNetZip 库。我知道它支持 Zip64（即更大的条目然后 4.2gb 和更多然后 65535 条目），因此它可能能够解决您的问题。然后自己使用文件流和字节数组也更容易使用。

```
using (ZipFile zip = new ZipFile()) {
    zip.CompressionLevel = CompressionLevel.BestCompression;
    zip.UseZip64WhenSaving = Zip64Option.Always;
    zip.BufferSize = 65536*8; // Set the buffersize to 512k for better efficiency with large files

    foreach (var file in filenames) {
        zip.AddFile(file);
    }
    zip.Save(outpath);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T13:08:14.960

您正在使用 SharpZipLib，对吗？我不确定这是否是一个有效的解决方案，因为我不知道它会引发什么异常，但根据[这篇文章](http://blog.tylerholmes.com/2008/12/windows-xp-unzip-errors-with.html)和[这篇文章](https://stackoverflow.com/questions/1422520/c-sharp-with-sharpziplib-compatibility-of-sharpziplib-with-winzip-and-xp)，它可能是`Zip64`. 使用与此类似的代码启用它（来自第二个链接的帖子）：

```
UseZip64 = ICSharpCode.SharpZipLib.Zip.UseZip64.Off 
```

或者，根据第一篇文章，在创建存档时指定存档的大小，这应该会自动`Zip64`解决问题。直接来自第一个链接帖子的示例代码：

```
using (ZipOutputStream zipStream = new ZipOutputStream(File.Create(zipFilePath)))
{
 //Compression level 0-9 (9 is highest)
 zipStream.SetLevel(GetCompressionLevel());

 //Add an entry to our zip file
 ZipEntry entry = new ZipEntry(Path.GetFileName(sourceFilePath));
 entry.DateTime = DateTime.Now;
 /* 
 * By specifying a size, SharpZipLib will turn on/off UseZip64 based on the file sizes. If Zip64 is ON
 * some legacy zip utilities (ie. Windows XP) who can't read Zip64 will be unable to unpack the archive.
 * If Zip64 is OFF, zip archives will be unable to support files larger than 4GB.
 */
 entry.Size = new FileInfo(sourceFilePath).Length;
 zipStream.PutNextEntry(entry);

 byte[] buffer = new byte[4096];
 int byteCount = 0;

 using (FileStream inputStream = File.OpenRead(sourceFilePath))
 {
     byteCount = inputStream.Read(buffer, 0, buffer.Length);
     while (byteCount > 0)
     {
         zipStream.Write(buffer, 0, byteCount);
         byteCount = inputStream.Read(buffer, 0, buffer.Length);
     }
 }
} 
```

# c# - 使用带有 Ninject.Web.WebApi 的 ASP.Net MVC 4 Web API 的问题

> ID：11207766
> 
> 赞同：26
> 
> 时间：2012-06-26T12:55:12.590
> 
> 标签：c#, ninject, asp.net-mvc-4, asp.net-web-api

我正在尝试将新的 ASP.Net MVC 4 Web API 项目模板与 Ninject 一起使用，但遇到了以下错误：

> 来自程序集“Ninject.Web.WebApi，版本=3.0.0.0，文化=中性，PublicKeyToken=c7192dc5380945e7”的“Ninject.Web.WebApi.Filter.DefaultFilterProvider”类型中的方法“GetFilters”没有实现。

我正在使用 ASP.Net MVC 4 -> Web API 模板在 Visual Studio 2010 中创建一个全新的项目，并且我正在使用最新的 Ninject NuGet 包：

*   忍者 3.0.1.10
*   Ninject.Web.Common 3.0.0.7
*   Ninject.Web.WebApi 3.0.0.2

我已经尝试过[这个问题](https://stackoverflow.com/questions/10849132/mvc4-rc-webapi-binding-with-ninject)中提出的解决方案，但是我没有任何运气 - 如果我删除对 Ninject.Web.WebApi 的引用，那么 MVC 永远不会使用 Ninject。我还注意到他们提到**了 Ninject.MVC3，**但是我使用的是新的**Ninject.WebApi**插件。

我正在使用在 NuGet 安装期间创建的**NinjectWebCommon.cs**中的默认绑定代码，并尝试在**RegisterServices()中注册一项简单的服务**

```
[assembly: WebActivator.PreApplicationStartMethod(typeof(mkts.web.App_Start.NinjectWebCommon), "Start")]
[assembly: WebActivator.ApplicationShutdownMethodAttribute(typeof(mkts.web.App_Start.NinjectWebCommon), "Stop")]

namespace mkts.web.App_Start
{
    using System;
    using System.Web;

    using Microsoft.Web.Infrastructure.DynamicModuleHelper;

    using Ninject;
    using Ninject.Web.Common;
    using mkts.service;

    public static class NinjectWebCommon 
    {
        private static readonly Bootstrapper bootstrapper = new Bootstrapper();

        /// <summary>
        /// Starts the application
        /// </summary>
        public static void Start() 
        {
            DynamicModuleUtility.RegisterModule(typeof(OnePerRequestHttpModule));
            DynamicModuleUtility.RegisterModule(typeof(NinjectHttpModule));
            bootstrapper.Initialize(CreateKernel);
        }

        /// <summary>
        /// Stops the application.
        /// </summary>
        public static void Stop()
        {
            bootstrapper.ShutDown();
        }

        /// <summary>
        /// Creates the kernel that will manage your application.
        /// </summary>
        /// <returns>The created kernel.</returns>
        private static IKernel CreateKernel()
        {
            var kernel = new StandardKernel();
            kernel.Bind<Func<IKernel>>().ToMethod(ctx => () => new Bootstrapper().Kernel);
            kernel.Bind<IHttpModule>().To<HttpApplicationInitializationHttpModule>();

            RegisterServices(kernel);
            return kernel;
        }

        /// <summary>
        /// Load your modules or register your services here!
        /// </summary>
        /// <param name="kernel">The kernel.</param>
        private static void RegisterServices(IKernel kernel)
        {
            //Test binding
            kernel.Bind<IStudentService>().To<StudentService>();
        }        
    }
} 
```

我的控制器：

```
namespace mkts.web.Controllers
{
    public class HomeController : Controller
    {
        private readonly IStudentService studentService;

        public HomeController(IStudentService studentService)
        {
            this.studentService = studentService;
        }

        public ActionResult Index()
        {
            return View();
        }
    }
} 
```

非常感谢您对此的任何帮助。

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2012-06-26T17:13:09.600

Ninject.WebApi 是针对 Beta 编写的，现在已弃用。

删除它，安装 Ninject.MVC3。

现在你需要一个自制的 IDependencyResolver 和 IDependencyScope。我在这里发布了一个演练 - [http://www.strathweb.com/2012/05/using-ninject-with-the-latest-asp-net-web-api-source/](http://www.strathweb.com/2012/05/using-ninject-with-the-latest-asp-net-web-api-source/)

# perl - 使用 Crypt::CBC 进行数据加密

> ID：11207776
> 
> 赞同：0
> 
> 时间：2012-06-26T12:55:47.930
> 
> 标签：perl, encryption

我们使用 Perl 的模块 Crypt::CBC 来加密数据。代码看起来像

```
use Crypt::CBC;
my $cipher = Crypt::CBC->new( -key    => 'herearemykey',
                              -cipher => 'Blowfish'
                            );

my $ciphertext = $cipher->encrypt($password); 
```

但是对于相同的纯文本，我们会得到不同的密文。是否有任何其他方法可以将纯文本结果加密为相同的密文？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T15:10:02.470

如果您想要给定的明文使用相同的密文，您还必须将相同的 IV（初始化向量）传递给 CBC - 如下所示：

```
 my $cipher = Crypt::CBC->new( -key => 'herearemykey',
                               -cipher => 'Blowfish', 
                               -iv => 'randomXY', 
                               -header => 'none' ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T13:16:21.820

给定相同的纯文本，为什么您希望加密结果保持不变？这样做提供了不需要提供的信息。如果您坚持，您可能会考虑提供一个通用的，如此[处](https://metacpan.org/module/Crypt%3a%3aCBC)`salt`所述。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T14:04:10.387

[这被认为是CBC 模式](http://en.wikipedia.org/wiki/Block_cipher_modes_of_operation#Cipher-block_chaining_.28CBC.29)中密码的一个特性。有一个初始随机IV，然后每个明文块与前一个密文块进行异或。这可以防止在直接的 ECB 模式下可能发生的某些巧妙攻击，其中两个相同的明文块会出现相同的结果。

密文完全相同并不重要。它只需要在另一端正确解密。通常，除非您有特定的理由不这样做，否则请始终使用 CBC 模式。即使您有特定的原因，也可能有比直接、幼稚的 ECB 模式更好的选择。

# iphone - 更改 didSelectRowAtIndexPath 上的 iPhone tableview 单元格标签文本

> ID：11207780
> 
> 赞同：1
> 
> 时间：2012-06-26T12:56:27.537
> 
> 标签：iphone, uilabel, tableview, didselectrowatindexpath

我想更改 didSelectRowAtIndexPath 上的自定义 UITableviewCell 文本的文本，我正在使用以下代码：-

```
 - (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
 UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath];
cell.lblName.text=@"cambridge";
[tableView deselectRowAtIndexPath:indexPath animated:NO];

 } 
```

但我收到“**在非结构或联合的情况下请求成员 'levelNo'** ”。但是我可以将它设置为 cellForRowAtIndexPath。 ***请帮忙***

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T12:58:04.390

尝试

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
 YourCustomCell *cell = (YourCustomCell*)[tableView cellForRowAtIndexPath:indexPath];
 cell.lblName.text=@"cambridge";
 [tableView deselectRowAtIndexPath:indexPath animated:NO];

 //update your data, your data source must be mutable
 //in case your array content are NSString, just do
  [yourMutableArrayDataSource replaceObjectAtIndex:indexPath.row withObject:@"cambridge"];

 //or if your data array holds NSDictionary. you can just initialize new dictionary 
 //as a replacement of the object in case you dont want your dictionary to be mutable
 NSDictionary *tempDict = [NSDictionary dictionaryWithObjectsAndKeys:@"cambridge",@"text",@"yourOtherData",@"otherData" nil];
  [yourMutableArrayDataSource replaceObjectAtIndex:indexPath.row withObject:tempDict];

 } 
```

正如***Maulik***所提到的（谢谢），当单元格滚动时， lblName 文本将变回其原始文本。您可能想要更新数据源以保留新数据。**答案已编辑

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T13:06:07.083

```
(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath    
{
  UITableViewCell *cell = (UITableViewCell *)[tableView cellForRowAtIndexPath:indexPath];
 cell.lblName.text=@"New text Here";
 [tableView deselectRowAtIndexPath:indexPath animated:NO];
 [tableView reloadData];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T13:10:12.877

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath 
{
 YourCustomCell *cell = (YourCustomCell*)[tableView cellForRowAtIndexPath:indexPath];
 cell.lblName.text=@"cambridge";
 [tableView deselectRowAtIndexPath:indexPath animated:NO];
} 
```

通过上面的***janusfidel***代码，标签的文本将被更改。但是当您滚动表格时，我猜值会更改为原始值。

当您想要更改原始数据时，您还需要更新您的数据源（即您的数组）。

# c# - 是否可以创建 zedgraph 垂直标记？

> ID：11207781
> 
> 赞同：2
> 
> 时间：2012-06-26T12:56:33.010
> 
> 标签：c#, charts, zedgraph

我想知道，是否可以在*zedgraph*中创建垂直标记？
我想渲染所有图表点并将垂直标记作为当前位置的指示器。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T13:09:02.237

在之前的项目中，我使用以下代码来获得这种效果。

```
int i = myPane.AddYAxis("");
myPane.YAxisList[i].Color = Color.Orange;
myPane.YAxisList[i].Scale.IsVisible = false;
myPane.YAxisList[i].MajorTic.IsAllTics = false;
myPane.YAxisList[i].MinorTic.IsAllTics = false;
myPane.YAxisList[i].Cross = pointOnXAxisThatIWantToMark; 
```

在这种情况下，我添加了两个轴来标记我的图表上的某些限制。

![在此处输入图像描述](../Images/08cdfbee8b8144b8158de22b3c2d65f8.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T07:15:45.843

您可以将`SymbolType`曲线的 设置为`SymbolType.VDash`。

例如，要为 a 设置符号`LineItem`，您可以直接在构造函数中进行（`curve1`在下面的源代码中），也可以在将其分配给曲线 ( `curve2`) 之前对其进行自定义。

这段代码：

```
var curve1 = new LineItem(null, new[] { 0.1, 0.5, 0.9 }, 
             new[] { 0.8, 0.3, 0.1 }, Color.Blue, SymbolType.VDash);
zedGraphControl1.GraphPane.CurveList.Add(curve1);

var curve2 = new LineItem(String.Empty)
    {
        Points = new PointPairList(
                 new[] { 0.1, 0.5, 0.9 }, new[] { 0.2, 0.5, 0.9 }),
        Color = Color.Red,
        Symbol = new Symbol(SymbolType.VDash, Color.Black) 
                 { Size = 20f, Border = new Border(Color.Black, 6f)}
    };
zedGraphControl1.GraphPane.CurveList.Add(curve2); 
```

生成以下图表：

![非定制和定制标记](../Images/a3f67586f8186f6f36ff533952a4ddbf.png)

# c - 读取和写入内存位置

> ID：11207783
> 
> 赞同：10
> 
> 时间：2012-06-26T12:56:36.630
> 
> 标签：c

在谷歌做了很多研究后，我发现了这个程序：

```
#include <stdio.h>

int main()
{
    int val;
    char *a = (char*) 0x1000;
    *a = 20;
    val = *a;
    printf("%d", val);
} 
```

但它会引发运行时错误，在`*a = 20`.

那么如何读写特定的内存位置呢？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-26T13:03:40.330

您正在这样做，除非在您的系统上您无法写入此内存导致分段错误。

分段错误（通常缩写为 segfault）、总线错误或访问冲突通常**是尝试访问 CPU 无法物理寻址的内存**。当硬件通知操作系统有关内存访问冲突时，就会发生这种情况。然后操作系统内核向导致异常的进程发送一个信号。默认情况下，接收信号的进程会转储核心并终止。也可以覆盖默认信号处理程序以自定义处理信号的方式。

如果您有兴趣了解更多信息，请在维基百科上查找 MMU。

以下是如何合法地从堆中请求内存。该`malloc()`函数需要一些字节作为参数来分配。请注意，在您完成使用后，`malloc()`应通过`free()`调用同一内存来匹配每个内存。该`free()`调用通常应与您调用的函数在同一函数中`malloc()`。

```
#include <stdio.h>
int main()
{
    int val;
    char *a;

    a = (char*)malloc(sizeof(char) * 1);

    *a = 20;
    val = (int)*a;
    printf("%d", val);

    free(a);

    return 0;
} 
```

您还可以通过非常简单的方式在堆栈上分配内存，如下所示：

```
#include <stdio.h>
int main()
{
    int val;
    char *a;
    char b;

    a = &b;
    *a = 20;
    val = (int)*a;

    printf("%d", val);

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-06-26T12:59:49.157

这会引发[段违规](http://en.wikipedia.org/wiki/Segmentation_fault)（SEGFAULT），因为您不知道该地址中放入了什么。最有可能的是内核空间，托管环境不希望您随意写入另一个应用程序的内存。您应该只写入您知道您的程序可以访问的内存，否则您将在运行时出现莫名其妙的崩溃。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-26T12:59:12.493

如果您在用户空间（您是）中运行代码，那么您获得的所有地址都是***虚拟地址***而不是***物理地址***。您不能只假设并写入任何虚拟地址。
实际上，对于虚拟内存模型，您不能仅仅假设任何地址都是有效地址。由内存管理器将有效地址返回给编译器实现，编译器实现将其处理给您的用户程序，而不是相反。

为了使您的程序能够写入地址：

1.  它应该是一个有效的虚拟地址
2.  它应该可以访问您程序的地址空间

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-26T12:59:29.903

你不能随便写任何地址。您只能修改程序可以写入的内存内容。

如果您需要修改某些变量的内容，这就是为什么要使用指针。

```
char a = 'x';
char* ptr = &a; // stored at some 0x....
*ptr = 'b'; // you just wrote at 0x.... 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-26T13:00:33.390

发出许可后，操作系统将保护内存空间免受随机访问。

你没有指定确切的错误，但我猜你得到一个“ `segmentation fault`”，这将清楚地表明内存访问冲突。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-26T12:59:11.473

您可以写入特定的内存位置。

但只有当您有权写入该位置时。

您得到的是禁止您写入的操作系统`0x1000`。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-06-26T13:01:44.463

这是将数据写入内存位置 0x1000 的正确方法。但是在这个虚拟内存时代，你几乎永远不会提前知道你想要写入的实际内存位置，所以这种东西从来没有被使用过。

如果您能告诉我们您要解决的*实际问题，也许我们可以提供帮助。*

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-06-26T13:02:40.467

您不能随机选择一个内存位置并写入。内存位置必须分配给您并且必须是可写的。

一般来说，您可以获取变量的引用/地址`&`并在其上写入数据。或者您可以使用 malloc() 请求堆上的空间来写入数据。

该答案仅涵盖如何在内存上写入和读取数据。但是我没有介绍如何以正确的方式进行操作，以便程序正常运行。其他答案可能比我的更好。

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2014-11-10T01:45:58.473

首先，您需要确定要写入的内存位置。然后，检查您是否有足够的写入权限。

# c# - 多列插入中的默认命令参数

> ID：11207785
> 
> 赞同：1
> 
> 时间：2012-06-26T12:56:40.987
> 
> 标签：c#, sql, sql-server, .net-3.5

我要在具有大量列的表上进行一系列插入，例如：

```
INSERT INTO Table1 (A,B,C,...,Z) VALUES (@a,@b,@c,...,@z) 
```

所有字段（A 到 Z）都可以为空。如果未能显式设置已写入命令文本的命令参数，则无法执行插入。

由于列名不是真正连续的（都有相当随机的名称），是否有一种简单的方法可以循环遍历命令文本中的参数并将它们设置为`DBNull.Value`？还是我必须手动写出：

```
cmd.Parameters.AddWithValue("@a", DBNull.Value);
cmd.Parameters.AddWithValue("@b", DBNull.Value);
cmd.Parameters.AddWithValue("@c", DBNull.Value);
...
cmd.Parameters.AddWithValue("@z", DBNull.Value); 
```

或者是构建实际使用的列并将它们连接在一起（和使用的参数），然后设置使用的参数的正确解决方案？

我倾向于回避查询的串联解决方案，以避免潜在的注入攻击。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T13:00:19.857

这是将每个参数设置为 null 的更简洁/更简洁的方法：

```
foreach (var param in new[] { "@a", "@b", ... })
    cmd.Parameters.AddWithValue(param, DBNull.Value); 
```

我也倾向于回避连接解决方​​案，但是如果您的列具有在数据库中定义的默认值，那么这可能会有所不同，如果您在`insert`语句中明确将它们设置为 null，则这些默认值会（？）被覆盖。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T13:02:24.263

是的，您可能会编写代码来读取列名并将它们设置为默认值 NULL，其缺点是读取系统数据库需要更高的权限。

我强烈建议您考虑编写一个存储过程，例如，

```
CREATE PROCEDURE [dbo].[spInsertTable1]
    @a type = NULL,
    @b type = NULL,
    @c type = NULL,
    -- ...
    @z type = NULL
AS
BEGIN
    INSERT INTO Table1 (A, B, C, ...., Z) VALUES
    (@a, @b, @c, ..., @z)
END 
```

你可以他们这样称呼它，

```
command.CommandText = "dbo.spInsertTable1";
command.CommandType = CommandType.StoredProcedure;
command.Paramaters.AddWithValue("@a", somevalue);
// No more are needed the stored procedure will default them to NULL. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T13:03:50.987

您需要先对表执行某些操作以获取表定义，然后您可以遍历该定义并构建您的参数。

因此，您可以执行“从 tableName 中选择前 0 *”，将其检索到数据读取器中，然后像这样遍历字段：

```
 for(int i=0;i<reader.FieldCount;i++)
 {
    cmd.Parameters.AddWithValue("@" + reader.GetName(i), DBNull.Value);
 } 
```

假设每个字段都以相同的方式表示为参数。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-26T13:04:21.700

一种解决方案是创建一个存储不同参数名称的数组，如果您没有设置它们的值，则对其进行迭代以将它们中的每一个设置为 DBNull，如下所示：

```
// Assume paramNames is an array of strings containing each paramter name
foreach(strign param in paramNames)
{
    // Note: 'SettingValue()' and 'value' are a placeholders, as I don't 
    // know how you're determining which parameters are being used.
    if( SettingValue(param) )
    {
        cmd.Parameters.AddWithValue(param, value);
    }
    else
    {
        cmd.Parameters.AddWithValue(param, DBNull.Value);
    }
} 
```

我同意回避串联解决方案。要问自己的一件事是：如果您的插入中有这么多未使用的（和可为空的）参数，为什么首先要有它们？您应该能够在不包括它们的情况下执行 INSERT。

如果您需要它们以供将来参考，您可以在数据库中创建一个存储过程，而不是使用参数化查询，并为可为空的参数提供默认值。然后，您只需指定正在使用的参数。

# php - 绘制访问、页面查看、点击的图表

> ID：11207787
> 
> 赞同：-2
> 
> 时间：2012-06-26T12:56:56.473
> 
> 标签：php, javascript

我想为用户访问、页面查看、点击量绘制图表以显示在我的网站仪表板中。如何更好地在 php 中执行此操作？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T13:03:40.520

我认为最好使用像[http://www.analytics7.com/](http://www.analytics7.com/)
这样的分析小部件， 如果你已经有了数据，你可以使用 HighCharts -> [http://www.highcharts.com/](http://www.highcharts.com/)或 dygraphs -> [http:// dygraphs.com/](http://dygraphs.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T13:04:08.160

[高图](http://www.highcharts.com/)

[谷歌图表](https://developers.google.com/chart/)

[jQplot](http://www.jqplot.com/)

我个人使用过 highcharts ，它真的很棒而且有据可查。

# extjs - 如何制作 ExtJS 递归模板以输出任何 javascript 对象？

> ID：11207795
> 
> 赞同：2
> 
> 时间：2012-06-26T12:57:07.550
> 
> 标签：extjs, extjs4, extjs4.1

我在看下面的视频，想知道是否可以制作一个递归模板来输出 DOM 中任何对象的所有属性/方法名称？--
[http://dev.sencha.com/deploy/ext-4.1.0-gpl/docs/index.html#!/video/17905336](http://dev.sencha.com/deploy/ext-4.1.0-gpl/docs/index.html#!/video/17905336)

这是一个纯 javascript 示例，我对在 extjs 中使用 XTemplate 感到好奇——http: [//jsfiddle.net/SLJZ3/](http://jsfiddle.net/SLJZ3/)

```
var mObj = {};
mObj.mArr = [];
mObj.mArr.push({id:['id1','id2','id3']});
mObj.mArr.push({days:['Monday','Tuesday','Wednesday','Thursday']});
mObj.mArr.push({colors:['orange','red','blue','green','yellow','white']});
mObj.mArr.push(function isTrue(){return true;});

function r(obj) {
    if (obj)
        for (var key in obj) {
            if (typeof obj[key] == "object")
                r(obj[key]);
            else if (typeof obj[key] == "function")
              document.writeln("<span style='color:silver'>" + obj[key] + "</span><br/>");
            else if (typeof obj[key] != "function")
                document.writeln(obj[key] + "<br/>")
        }

    return;
} 

r(mObj);​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T14:52:44.817

[XTemplate](http://docs.sencha.com/ext-js/4-0/#!/api/Ext.XTemplate)允许在模板中执行自定义函数甚至任意内联代码（请参阅链接文档页面中的相应部分），所以我想从技术上讲，您可以从 XTemplate 中调用递归函数，但这并不比直接调用递归函数更好。

**我在这里看到了您的想法 - 将标记带到您的输出函数之外，但如果您想迭代一个对象**，恐怕 XTemplate 不会很有帮助，因为它只有用于迭代**数组**的构造。

“自动填充数组”中的示例说：

```
<tpl for=".">...</tpl>       // loop through array at root node 
```

所以你只能写这样的模板：

```
<p>Name: {name}</p>
<tpl for="days">
    ...iterate days array
</tpl>
<tpl for="colors">
    ...iterate colors array
</tpl> 
```

那就是当您知道数据对象中应该有哪些属性时。

或者，您可以为输出的不同类型的数据定义单独的模板。

# ios - 为 CGLayer 创建 CGContext

> ID：11207801
> 
> 赞同：0
> 
> 时间：2012-06-26T12:57:22.550
> 
> 标签：ios, core-graphics, cgcontext, cglayer

我想预渲染一些图形`CGLayer`以便将来快速绘图。

我发现`CGLayerCreateWithContext`需要一个`CGContext`参数。在`drawRect:`方法中很容易找到。但我需要创建一个`CGLayer`外部的`drawRect:`. 我应该去哪里`CGContext`？

我应该简单地创建临时`CGBitmapContext`并使用它吗？

更新：我需要在 drawRect 之外创建 CGLayer：因为我想在渲染之前初始化 CGLayer。可以在第一次 drawRect 调用时初始化一次，但这对我来说不是一个漂亮的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T06:53:41.973

没有理由在外面做`drawRect:`，事实上在里面做也有一些好处。例如，如果您更改视图的大小，图层仍然会以正确的大小制作（假设它基于您的视图的图形上下文，而不仅仅是任意大小）。这是一种常见的做法，我认为在外部创建它不会有任何好处。`CGContextDrawLayer`无论如何，大部分 CPU 周期都将被花费。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-14T19:53:46.450

你可以通过这个函数创建它，你可以在渲染块中渲染你的内容

```
typedef void (^render_block_t)(CGContextRef);

- (CGLayerRef)rendLayer:(render_block_t) block {
    UIGraphicsBeginImageContext(CGSizeMake(100, 100));
    CGContextRef context = UIGraphicsGetCurrentContext();
    CGLayerRef cgLayer = CGLayerCreateWithContext(context, CGSizeMake(100, 100), nil);
    block(CGLayerGetContext(cgLayer));
    UIGraphicsEndImageContext();
    return cgLayer;
} 
```

我前几天写的。我用它在可变线程中绘制一些 UIImages。[您可以在https://github.com/PengHao/GLImageView/](https://github.com/PengHao/GLImageView/)上下载代码， 文件路径为 GLImageView/GLImageView/ImagesView.m

# intellij-idea - 如何刷新 IntelliJ 模块中的 MANIFEST.MF 文件？

> ID：11207804
> 
> 赞同：6
> 
> 时间：2012-06-26T12:57:50.527
> 
> 标签：intellij-idea

我为我的模块添加了更多依赖项。但是，jar 神器似乎并没有意识到这一点。我是否必须删除并重新创建 jar 工件才能将新的依赖项包含在清单和 jar 中？

谢谢。

# android - 具有 OpenGL 和触摸屏功能的视觉正确旋转

> ID：11207805
> 
> 赞同：1
> 
> 时间：2012-06-26T12:57:50.640
> 
> 标签：android, opengl-es, rubiks-cube

我一直在尝试为 android 做魔方。我有一个关于轮换的问题。我想在视觉上正确地旋转一个图形。这意味着如果用户触摸屏幕并在将手指向右移动后，一个图形会从观察点的一侧向右旋转。但是当我进行一些旋转时，图形开始朝不正确的方向移动。我知道这取决于那个轴正在改变他们的情况。但是我尝试使用逆模型矩阵来获得必要的坐标，但我还没有得到结果。任何人都可以在鼠标或触摸屏的帮助下给我示例或链接 3D 图形的视觉正确旋转吗？

```
 //get vector 3D of touch
   Vector3f touchVector = getRubikSystemCoordinates(mTouchX,mTouchY,square.rubikRotationMatrix);
   //Get vector 3D of move     
   Vector3f moveVector = getRubikSystemCoordinates(mMoveX,mMoveY,square.rubikRotationMatrix);
        //get direction of motion
        float direction = touchVector.substractFrom(moveVector); 
        //get axis for rotation
        Vector3f axis = touchVector.vectorProductTo(moveVector);
        //normalize axis
        axis.normalize();
        //get angle of rotation
        float angle = direction.length;
        //make identity Quad
        Quaternion quad = new Quaternion();
        //make rotation quad
        quad.makeRotationKvaternion(angle,axis);
        //from quad recieve matrix
        Matrix4f matrix = quad.toMatrix();
        //multiply to current modelview matrix
        gl.glMultMatrixf(matrix.returnArray(),0);
        //save rotation matrix
        square.rotationMatrix = square.rotationMatrix.multiply(matrix);
        //save modelView matrix
        square.saveModelView(square.initMatrix.returnArray()); 

      // touch coords to current modelView coords
      private Vector3f getRubikSystemCoordinates(float x, float y, Matrix4f matrix){
       // touch coords to normal coords of screen 
       Vector2f normalCoords = (new Vector2f(x,y)).toNormalScreenCoordinates(Settings.viewPort[2],Settings.viewPort[3]);
        // to sphere coords in 3D
        Vector3f sphereVector = new Vector3f(normalCoords.x,normalCoords.y, FloatMath.sqrt(2-normalCoords.x*normalCoords.x-normalCoords.y*normalCoords.y));
        //Get inverse matrix from ModelView Matrix
        Matrix4f m = matrix.inverseMatrix();
        //Get vector for current modelView 3D coords
        Vector3f vector = m.multiplyToVector(vector);
        // make normalize vector
        vector.normalize();
        return vector;
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T20:51:57.003

您正在寻找的是名为*轨迹球*旋转。你会在互联网上找到大量的java资源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T17:07:37.467

您可能将旋转存储为三个角度。改用矩阵。仅为此旋转创建一个单独的变换矩阵。每次用户旋转对象时，都会将旋转应用于此矩阵。这样，运动将始终相对于当前方向。

# php - 数据库托管与项目托管分开

> ID：11207808
> 
> 赞同：0
> 
> 时间：2012-06-26T12:57:57.743
> 
> 标签：php, database, hosting

我正在使用两家共享托管公司，我想在其中一家中安装 thebuggenie，但遇到了两种不同的复杂情况。一个共享主机有 PHP 5.3，但只允许两个数据库。另一个共享主机有 PHP 5.2.x 并允许 40 个数据库。提供两个数据库的那个已经打包好了，由于buggenie只能安装在PHP 5.3以上，我可以在一个允许5.3的主机上安装项目文件，在另一个允许40个数据库的主机公司中安装数据库。如果是这样，如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T13:31:07.533

看看 upgradephp - [http://include-once.org/p/upgradephp/](http://include-once.org/p/upgradephp/) ...这是一个包含，您可以在“旧”版本的 php 上使用，它将提供当前 5.3 或 5.4 的功能。 .. 所以在你的“共享主机有 PHP 5.2.x 并允许 40 个数据库”中包含这个，它会给你 5.3/5.4 的功能。

我现在已经多次使用它来托管服务，这些服务采用缓慢的方式来“升级”php 以支持任何新功能。

从他们的网站：“有了‘upgrade.php’，您可以使用较新 PHP 版本（目前最高 5.3/5.4）的许多功能，而不会失去对旧解释器和过时网络服务器设置的兼容性。它负责模拟任何功能（及其原始名称）在运行时丢失。”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T15:11:18.777

这是一个相关的答案，只是为了让您知道，有时托管公司会提供旧版本的 php 作为“默认”版本，但他们也安装了最新版本。可以通过 .htaccess 激活它，因此您可以包含此行以激活特定文件夹中的 php 5.3

```
AddHandler application/x-httpd-php53 .php 
```

# dynamics-crm-2011 - 在销售订单详细信息表单上添加指向销售订单的链接

> ID：11207810
> 
> 赞同：2
> 
> 时间：2012-06-26T12:58:07.770
> 
> 标签：dynamics-crm-2011

销售订单明细显然与销售订单相关，为 N:1。它甚至有`salesorderid`领域。但是这个字段既不会显示在表单编辑器上，也不会显示在视图编辑器上。

我是否必须编写自定义代码才能在销售订单详细信息表单和视图中显示指向销售订单的链接？还是有一些众所周知的黑客可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T18:48:22.213

我还没有尝试过，但是如果您正在寻找想法，您是否尝试过直接在 custom.xml 文件中编辑 FormXML？( [http://crmblog.sentri.com/2011/05/importing-customizations-in-crm-2011.html](http://crmblog.sentri.com/2011/05/importing-customizations-in-crm-2011.html) )

在customizations.xml 中更改实体formXML。典型的表单控件位于选项卡 -> 部分 -> 行 -> 单元格中，例如客户事件：

```
<row>
                          <cell auto="false" showlabel="true" locklevel="0" rowspan="1" colspan="2" id="{82172fc9-a003-4203-87e6-73c8808ae942}" labelid="{bbfe38a0-67e7-4854-9bfd-1a861e5bac76}">
                            <labels>
                              <label description="Customer" languagecode="1033" />
                            </labels>
                            <control id="customerid" classid="{270BD3DB-D9AF-4782-9025-509E298DEC0A}" datafieldname="customerid" disabled="false">
                              <parameters>
                                <AutoResolve>true</AutoResolve>
                                <DisableMru>false</DisableMru>
                              </parameters>
                            </control>
                          </cell>
                        </row> 
```

您可以尝试为单元格和标签生成一个新的 guid，给控件一个 uniqueId 并使 datafieldname="salesorderid"

它在语法上是正确的，但如果他们在设计时阻止它，我会保持警惕，这可能是有原因的。祝你好运。

# algorithm - 一个while循环被执行了多少次？

> ID：11207812
> 
> 赞同：0
> 
> 时间：2012-06-26T12:58:14.960
> 
> 标签：algorithm

昨天我申请了计算机工程硕士学位，这是他们的问题之一。我无法解决它，所以我很好奇。

```
...
i = 1;
while (i <= n)
{
    i = i * 2;
}
... 
```

这个while循环会被执行多少次，请以公式的形式给出你的答案。例如：登录 n...

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-26T13:03:11.343

在循环的第 x^次`i`迭代中，等于 2 ^x（您可以通过归纳轻松证明这一点）。假设循环在 X 次迭代后停止，这意味着 n < 2 ^X。这也意味着在迭代 X-1 时循环仍在运行，因此 2 ^(X-1) ≤ n。换句话说 ：

2 ^(X-1) ≤ n < 2 ^X

从那里，很容易找到 X 作为 log [2] (n) 的函数。

# sql-server-2008 - 一个选择语句中的不同条件

> ID：11207813
> 
> 赞同：2
> 
> 时间：2012-06-26T12:58:19.257
> 
> 标签：sql-server-2008, select, where-clause

你怎么能有`Select`两列并让每一列测试它自己的条件而不是其他的？

假设我有一个选择`Count`表中的每条记录。在一个列中，我想要本周的所有记录，在第二列中，我想要自年初以来的所有记录。

我有两个条件，但它们都适用于特定的列：

```
 WHERE date BETWEEN @Monday AND @SUNDAY  /* Weekly */
        WHERE date >= @JanuaryFirst             /* Annual */ 
```

但不能就这么说，因为我只会得到这两个专栏的本周记录。我以为我可以使用一个`IF`条件，但我认为我不能简单地说“如果你是 A 列测试，如果不是第二个测试”。

![在此处输入图像描述](../Images/dd79201fa602fdb45b2879b6aeb6112c.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T13:22:31.543

这是一个不会产生多次扫描的版本：

```
select vehicule,
  weekly = SUM(CASE WHEN date BETWEEN @Monday AND @SUNDAY THEN 1 ELSE 0 END),
  annual = SUM(CASE WHEN date >= @JanuaryFirst THEN 1 ELSE 0 END)
from dbo.tablename AS t
GROUP BY vehicule; 
```

或者你也可以尝试稍微不那么冗长的：

```
select vehicule,
  weekly = COUNT(CASE WHEN date BETWEEN @Monday AND @SUNDAY THEN 1 END),
  annual = COUNT(CASE WHEN date >= @JanuaryFirst THEN 1 END)
from dbo.tablename AS t
GROUP BY vehicule; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T13:07:21.607

Use INNER SELECTS, like this:

```
select vehicule,
       (select count(*) from tablename t1 where t1.vehicule = t.vehicule and date BETWEEN @Monday AND @SUNDAY) as 'Weekly',
       (select count(*) from tablename t1 where t1.vehicule = t.vehicule and date >= @JanuaryFirst) as 'Annual'
from tablename t 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-26T13:21:56.553

如果要避免子查询，可以使用：

```
select vehicule,
sum(case when date BETWEEN @Monday AND @SUNDAY then 1 else 0 end)  as 'Weekly',
sum(case when date >= @JanuaryFirst then 1 else 0 end)  as 'Annual' 
group by vehicule 
```

# delphi - delphi E2003未声明的标识符'self'

> ID：11207818
> 
> 赞同：0
> 
> 时间：2012-06-26T12:58:41.307
> 
> 标签：delphi, identifier, self

我需要一点帮助；我正在帮助一个朋友将一个多年前构建的 Delphi 应用移植到较新版本的 Windows，因为它目前只能在 Windows 95 上运行。

该代码利用 Woll2Woll 的 3rd 方库进行数据库操作。

这些库之一会生成错误 E2003 Undeclared identifier: 'self'。

我通过谷歌浏览了许多网站，并且我对 Delphi 的了解有限（源于我大约 12 年前的 Pascal 培训，并推断出我稍微生锈的 PHP、BASH、ColdFusion 和 ASP 编码技能），我遇到了砖墙 - 我时间紧迫，无法理解我在网络上遇到的信息。

有问题的代码段来自 wwwQuery.pas 文件，如下所示：

```
 {$ifdef wwDelphi3Up}
    procedure TwwQuery.OpenCursor(InfoQuery: Boolean);
   {$else}
   procedure TwwQuery.OpenCursor;
   {$endif}
    begin
       {$ifdef wwDelphi3Up}
       inherited OpenCursor(InfoQuery);
       {$else}
       inherited OpenCursor;
       {$endif}
       //Modded by Arie
       //wwSaveAnswerTable(self, Handle, FAnswerTable);
       wwSaveAnswerTable(self, Handle, 'FAnswerTable');
    end; 
```

确切的错误消息是：

```
[DCC Error] wwQuery.pas(243): E2003 Undeclared identifier: 'self'
[DCC Error] wwQuery.pas(244): E2029 '.' expected but ';' found
[DCC Fatal Error] wwcommon.pas(285): F2063 Could not compile used unit 'wwQuery.pas' 
```

第 243 行是倒数第二行，就在结尾的上方；

wwSaveAnswerTable 函数如下所示：

```
Function wwSaveAnswerTable(ADataSet: TDBDataSet; AHandle: HDbiCur; tableName: string): boolean; 
```

我必须将 Self 参数更改为什么才能停止编译错误？

谢谢一叠。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T13:18:36.713

该问题与编译器定义 wwDelphi3Up 或任何相关的代码有关。

正如您看到的下一条错误消息：[DCC 错误] wwQuery.pas(244): E2029 '.' 预期但';' 成立

编译器期望程序结束，并且行 wwSaveAnswerTable(self, Handle, 'FAnswerTable'); 不在 OpenCursor 方法中编译。这就是Self没有被定义的原因。

您不需要更改参数，因为肯定会影响功能。

如果您不使用古老版本的 Delphi，请尝试在没有定义的情况下编译它：

```
procedure TwwQuery.OpenCursor(InfoQuery: Boolean);
begin
   inherited OpenCursor(InfoQuery);
   wwSaveAnswerTable(self, Handle, 'FAnswerTable'); // Here prob FAnswerTable without quotes
end; 
```

# php - 未定义索引：is_ajax

> ID：11207819
> 
> 赞同：1
> 
> 时间：2012-06-26T12:58:42.453
> 
> 标签：php, javascript, jquery, ajax

我尝试用 ajax 构建一个小日志。我遵循了一个指南，但他在 php 中构建时没有类和函数。当我尝试通过将其放入类和函数中来重建整个应用程序时，我收到此错误：`Undefined index: is_ajax`

和我的代码：

```
<?php
  class Login{
    public function LoggedIn(){
      $is_ajax = $_REQUEST['is_ajax'];
      if(isset($is_ajax) && $is_ajax)
      {
        $username = $_REQUEST['username'];
        $password = $_REQUEST['password'];

        if($username == 'demo' && $password == 'demo')
        {
          echo "success";   
        }
      }
    }
  }
?> 
```

看法：

```
public function DoLoginBox() {
    $Login = new Login();
    //inloggning form-tagg...
    return '<p>&nbsp;</p>
        <div id="content">
          <h1>Login Form</h1>
          <form id="form1" name="form1" action="'. $Login ->LoggedIn(). '"  method="post">
            <p>
              <label for="username">Username: </label>
              <input type="text" name="username" id="username" />
            </p>
            <p>
              <label for="password">Password: </label>
              <input type="password" name="password" id="password" />
            </p>
            <p>
              <input type="submit" id="login" name="login" />
            </p>
          </form>
            <div id="message"></div>
        </div>';
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T13:24:24.837

并非所有浏览器和服务器都支持 HTTP_X_REQUESTED_WITH 标头。您应该使用专用的 get 或 post 请求，例如`?is_ajax=1`

请参阅相关线程：[PHP 中是否存在 $_SERVER['HTTP_X_REQUESTED_WITH'] ？](https://stackoverflow.com/questions/2579254/php-does-serverhttp-x-requested-with-exist-or-not)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T13:02:58.933

你应该使用

```
if(!empty($_SERVER['HTTP_X_REQUESTED_WITH']) && strtolower($_SERVER['HTTP_X_REQUESTED_WITH']) == 'xmlhttprequest') { 
```

代替

```
if(isset($is_ajax) && $is_ajax) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T13:03:08.570

更改此行：

```
$is_ajax = $_REQUEST['is_ajax']; 
```

进入：

```
$is_ajax = !empty($_REQUEST['is_ajax']); 
```

你可以删除`isset($is_ajax)`

**注意**：为此`javascript`，执行 AJAX 请求的 必须将`is_ajax=1`（或其他一些非空值）添加到请求中！开箱即用不会发生这种情况。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T13:03:55.870

线

```
$is_ajax = $_REQUEST['is_ajax']; 
```

每次调用 LoggedIn() 函数时都会执行此操作，无论它是否为 AJAX（我猜您是从浏览器添加参数 is_ajax）。

而是使用类似的东西

```
if(isset($_REQUEST['is_ajax'])) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-26T13:09:50.803

未定义索引：XYZ 表示，您有一个数组，并且您按索引请求它的项，但该索引不存在。

例子：

```
$array = array("a"=>1,"c"=>3);
echo($array["b"]); 
```

您可以检查是否存在：

```
if(!isset($array["b"]))die("Missing XYZ!"); 
```

# iphone - 如何使用应用程序访问本机 SQLite 数据库

> ID：11207821
> 
> 赞同：0
> 
> 时间：2012-06-26T12:58:43.943
> 
> 标签：iphone, html, sqlite, ios5

我想使用 HTML 5 为 iphone、ipad 和 android 制作应用程序。

此应用程序将在 ipad/iphone/android 上安装时创建一个 SQLite 数据库或放置一个预填充的 SQLite 数据库文件。

我想将它保存在安装我的应用程序的文件夹中。

例如

ApplicationName- 文件（我有应用程序的所有文件）

ApplicationName- DB（我将在其中拥有我的 sqllite 数据库）

我想使用 javascript 连接到 SQLiteDB。

我可以使用 Javascript 或 jquery 从我的应用程序访问特定位置的数据库吗？

你能建议我一些方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T20:43:11.480

我建议您查看 Apache Cordova（旧的 Phonegap）以了解他们如何处理事情或使用他们自己的解决方案来处理这类事情。

但是如果真的要一个人走，就需要搭建2套框架调用原生代码，或者使用web sql database(inactive)之类的。

iOS [http://blog.techno-barje.fr/post/2010/10/06/UIWebView-secrets-part3-How-to-properly-call-ObjectiveC-from-Javascript/](http://blog.techno-barje.fr/post/2010/10/06/UIWebView-secrets-part3-How-to-properly-call-ObjectiveC-from-Javascript/)

安卓 [http://labs.mwrinfosecurity.com/blog/2012/04/30/building-android-javajavascript-bridges/](http://labs.mwrinfosecurity.com/blog/2012/04/30/building-android-javajavascript-bridges/)

# sql - 在 SQL Server 中使用临时表对数据进行排序

> ID：11207822
> 
> 赞同：2
> 
> 时间：2012-06-26T12:58:44.390
> 
> 标签：sql, sql-server, tsql

最近，我遇到了一种在 SELECT 查询中对数据进行排序的模式（不确定，可能是反模式）。该模式更像是一种用于排序数据的冗长且非声明性的方式。该模式是将实际表中的相关数据转储到临时表中，然后将 orderby 应用于临时表上的字段。我想，有人这样做的唯一原因是提高性能（我对此表示怀疑）而没有其他好处。

例如，假设有一个用户表。该表可能包含数百万行。我们要检索名字以“G”开头并按名字排序的所有用户。在这种情况下实现 SQL 查询的自然且更具声明性的方式是：

**更自然和声明的方式**

```
SELECT * FROM Users
WHERE NAME LIKE 'G%'
ORDER BY Name 
```

**详细方式**

```
SELECT * INTO TempTable
FROM Users
WHERE NAME LIKE 'G%'

SELECT * FROM TempTable
ORDER BY Name 
```

在这种情况下，我有几个问题：

1.  如果名字字段上**没有索引**，两种方式之间是否会有任何性能差异。如果是的话，哪一个会更好。

2.  如果名字字段上有**索引**，两种方式之间是否会有任何性能差异。如果是的话，哪一个会更好。

3.  SQL Server 优化器不应该为这两种方式生成相同的执行计划吗？

4.  从锁定/阻塞之类的任何其他方面编写详细的方式有什么好处吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T13:05:20.853

Reguzlarly：不知道自己在做什么的人的反模式。

有时：好的，因为 SQL Server 有一个无法以其他方式解决的问题——不过，虽然没有见过这个问题。

它使事情变慢，因为它强制 tmpddb 表首先完全填充，否则查询可能会更有效地解析。

上次看到那是3年前的事了。由于不聪明并使用 tempdb 表，我们得到了 3 倍的速度；）

答案：

1：不，显然它仍然需要表扫描。

2：可能 - 取决于数据量，但按索引查找的索引将已按顺序包含数据（因为索引按内容排序）。

3：没有。明显地。查询计划优化是逐语句进行的。通过削减 2 中的执行，查询优化器不能将连接合并到第一条语句中。

4：仅当您遇到查询优化器问题或您可以加入多少表的限制时 - 不是在那种退化的情况下（在技术意义上退化 - 即非常简单）。但是，如果您需要加入许多表，最好采用临时步骤。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T13:42:49.467

如果您想要通过 on 进行排序的字段没有被索引，您可以将所有内容放入临时表并对其进行索引，然后进行排序，它可能会更快。您必须进行测试才能确定。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T13:31:18.123

我能想到的第二种方法从来没有任何好处。

这意味着如果数据可用，预购的 SQL Server 将无法利用这一点，并在计划中添加不必要的阻塞运算符和额外的排序。

在数据不可用的情况下，预先订购的 SQL Server 将在内存中或`tempdb`无论如何在工作表中对其进行排序，并且添加显式`#temp`表只会增加不必要的额外步骤。

**编辑**

我想第二种方法可以带来明显好处的一种情况可能是，如果存在`ORDER BY`导致 SQL Server 选择一个不同的计划，结果证明是次优的。在这种情况下，我将通过改进统计信息或使用提示/查询重写来避免不受欢迎的计划，以不同的方式解决这个问题。

# android - 如果满足某些条件，则在启动时启动备用活动

> ID：11207824
> 
> 赞同：0
> 
> 时间：2012-06-26T12:58:55.003
> 
> 标签：android, android-activity, oncreate

*   我正在创建一个需要在开始显示活动之前先设置一些设置的应用程序。我希望该应用程序检查首选项文件（包含这些设置）是否存在，如果它确实存在移动到特定活动或保留在主要活动中（因为设置活动是我的主要活动）。

*   我尝试在启动时使用 startactivty()，但它会在几分之一秒内显示设置菜单，然后再转到显示活动。

*   我该怎么做？

    我尝试了以下代码：

    ```
     super.onCreate(savedInstanceState);
        setContentView(R.layout.main);          
            SharedPreferences prefsfile = getSharedPreferences("myfile",0); 

            if( prefsfile!=null & Timetablledisplay.flag==0){
                Intent i=new Intent(ProjectBunkitActivity.this,Timetablledisplay.class);
                startActivity(i);
            } 
    ```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T13:26:10.530

您应该在需要时`LAUNCHER` `Activity`调用`startActivity()`新的`Activity`（*加号* `finish()`）。通过这种方式，新的将在“幕后”推出，然后再尝试夸大任何布局。`onCreate()``setContentView()``Activity`

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    SharedPreferences prefs = getSharedPreferences("myFile", 0); 

    if(prefs != null && ActivityOne.flag == 0) {
        Intent i = new Intent(this, ActivityOne.class);
        startActivity(i);
    } else {
        Intent i = new Intent(this, ActivityTwo.class);
        startActivity(i);
    }

    finish();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T13:17:40.717

解决此问题的潜在解决方法的一种选择是采用稍微不同的方法：

您可以从一个空白的活动开始，而不是启动到设置，然后决定是否进入 Timetablleddisplay 活动，该活动只是决定启动哪个活动。

活动可能是这样的：

```
super.onCreate(savedInstanceState);      
    SharedPreferences prefsfile = getSharedPreferences("myfile",0); 

    if( prefsfile!=null && Timetablledisplay.flag==0){
        Intent i=new Intent(CURRENT.this,Timetablledisplay.class);
        startActivity(i);
        finish();
    }
    else
    {
        Intent i=new Intent(CURRENT.this,ProjectBunkitActivity.class);
        startActivity(i);
        finish();
    } 
```

# android - 从相机捕获的图像应为纵向模式

> ID：11207828
> 
> 赞同：1
> 
> 时间：2012-06-26T12:59:04.840
> 
> 标签：android, android-imageview, android-orientation

用户可以`camera`在任何模式下捕获图像，但我想将结果限制为仅纵向（结果应仅纵向）。

为了实现这一点，我正在使用`ExifInterface`并且在某些方面我也成功了，它在**LG 和 HTC 设备**中运行良好，但**在三星设备中无法运行**。

*代码：*

```
 ExifInterface exif = new ExifInterface(path);
                 orientation = exif.getAttributeInt(ExifInterface.TAG_ORIENTATION, 1);
                 Log.e("orientation",""+orientation);
                 Matrix m=new Matrix();

                 if((orientation==3)){

                 m.postRotate(180);
                 m.postScale((float)bm.getWidth(), (float)bm.getHeight());

//               if(m.preRotate(90)){
                 Log.e("in orientation",""+orientation);

                 bitmap = Bitmap.createBitmap(bm, 0, 0,bm.getWidth(),bm.getHeight(), m, true);
                 return  bitmap;
                 }
                 else if(orientation==6){

                  m.postRotate(90);

                  Log.e("in orientation",""+orientation);

                  bitmap = Bitmap.createBitmap(bm, 0, 0,bm.getWidth(),bm.getHeight(), m, true);
                     return  bitmap;
                 }

                 else if(orientation==8){

                  m.postRotate(270);

                  Log.e("in orientation",""+orientation);

                  bitmap = Bitmap.createBitmap(bm, 0, 0,bm.getWidth(),bm.getHeight(), m, true);
                     return  bitmap;
                 }
                 return bitmap;
             }
             catch (Exception e) {
             }
             return null;
         } 
```

你的建议是可观的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-12-29T05:42:23.170

试试这个它对我有用

```
public static Bitmap scaleImage(Context context, Uri photoUri) throws IOException {
            InputStream is = context.getContentResolver().openInputStream(photoUri);
            BitmapFactory.Options dbo = new BitmapFactory.Options();
            dbo.inJustDecodeBounds = true;
            BitmapFactory.decodeStream(is, null, dbo);
            is.close();

            int rotatedWidth, rotatedHeight;
            int orientation = getOrientation(context, photoUri);

            if (orientation == 90 || orientation == 270) {
                rotatedWidth = dbo.outHeight;
                rotatedHeight = dbo.outWidth;
            } else {
                rotatedWidth = dbo.outWidth;
                rotatedHeight = dbo.outHeight;
            }

            Bitmap srcBitmap;
            is = context.getContentResolver().openInputStream(photoUri);
            if (rotatedWidth > 100 || rotatedHeight > 100) {
                float widthRatio = ((float) rotatedWidth) / ((float) 100);
                float heightRatio = ((float) rotatedHeight) / ((float) 100);
                float maxRatio = Math.max(widthRatio, heightRatio);

                // Create the bitmap from file
                BitmapFactory.Options options = new BitmapFactory.Options();
                options.inSampleSize = (int) maxRatio;
                srcBitmap = BitmapFactory.decodeStream(is, null, options);
            } else {
                srcBitmap = BitmapFactory.decodeStream(is);
            }
            is.close();

            /*
             * if the orientation is not 0 (or -1, which means we don't know), we
             * have to do a rotation.
             */
            if (orientation > 0) {
                Matrix matrix = new Matrix();
                matrix.postRotate(orientation);

                srcBitmap = Bitmap.createBitmap(srcBitmap, 0, 0, srcBitmap.getWidth(),
                        srcBitmap.getHeight(), matrix, true);
            }

            String type = context.getContentResolver().getType(photoUri);
            ByteArrayOutputStream baos = new ByteArrayOutputStream();
            if (type.equals("image/png")) {
                srcBitmap.compress(Bitmap.CompressFormat.PNG, 100, baos);
            } else if (type.equals("image/jpg") || type.equals("image/jpeg")) {
                srcBitmap.compress(Bitmap.CompressFormat.JPEG, 100, baos);
            }
            byte[] bMapArray = baos.toByteArray();
            baos.close();
            return BitmapFactory.decodeByteArray(bMapArray, 0, bMapArray.length);
        }

        public static int getOrientation(Context context, Uri photoUri) {
            /* it's on the external media. */
            Cursor cursor = context.getContentResolver().query(photoUri,
                    new String[] { MediaStore.Images.ImageColumns.ORIENTATION }, null, null, null);

            if (cursor.getCount() != 1) {
                return -1;
            }

            cursor.moveToFirst();
            return cursor.getInt(0);
        }
        private void openGalleryImage(Intent data) 
        {
            Uri selectedimg = data.getData();
            Uri uriselectedimage=data.getData();
            mString=uriselectedimage.getPath();
            try 
            {
                mInputStream= getContentResolver().openInputStream(selectedimg);
            }
            catch (FileNotFoundException e) 
            {
                e.printStackTrace();
            }

            String[] path = { MediaStore.Images.Media.DATA };
            Cursor c =  getContentResolver().query(selectedimg, path, null, null,null);
            c.moveToFirst();
            int columnIndex = c.getColumnIndex(path[0]);
            selectedImagePath=c.getString(columnIndex);
            uri_outputFileUri= Uri.parse(selectedImagePath);
            c.close();
        }

        private void saveImage(String mPath) 
        {

            System.out.println("Paths  "+mPath);
                mediaDir= new File(Environment.getExternalStorageDirectory() +"/MyFolder");
                mediaDir.mkdir();

            File myImage = new File(mediaDir, Long.toString(System.currentTimeMillis()) + ".png");

            try 
            { 
                FileOutputStream out = new FileOutputStream(myImage);
                mbitmap_outputImage=BitmapFactory.decodeFile(mPath);    
                mbitmap_outputImage=Bitmap.createScaledBitmap(mbitmap_outputImage, 390, 310, true);
                mbitmap_outputImage.compress(Bitmap.CompressFormat.PNG, 100, out); 
                img.setImageBitmap(mbitmap_outputImage);
                out.flush();    
                out.close();

            } 
            catch (Exception e)
            { 
                e.printStackTrace(); 
            }  

        } 
```

# javascript - 重用相同的 shortcut.js 函数来处理键盘输入

> ID：11207829
> 
> 赞同：2
> 
> 时间：2012-06-26T12:59:11.107
> 
> 标签：javascript, keyboard-shortcuts, keyboard-events

我正在使用[shortcut.js](http://www.openjs.com/scripts/events/keyboard_shortcuts/)来处理键盘输入，我想知道是否有更有效的方法来实现我的目标（目前大部分相同的代码都被复制和粘贴）。

例如，我有：

```
 shortcut.add("0",function() {
    points = -1;
    sec = 0;
  }); 

  shortcut.add("1",function() {
    points = 1;
    sec = 0;
  }); 

  shortcut.add("2",function() {
    points = 2;
    sec = 0;
  }); 

  shortcut.add("3",function() {
    points = 3;
    sec = 0;
  }); 
```

理想情况下，我可以概括该函数，以便将输入的任何键实际分配给 points 变量，*除非*用户输入 0。在这种情况下，points 变量设置为 -1。

关于如何实现这一点的任何想法？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T13:03:19.073

带有闭包的循环应该可以解决问题：

```
for (var i = 0; i <= 9; ++i) {
    (function(i) {  // Capture current value of 'i' in this scope.
        shortcut.add(i.toString(), function() {
            points = i || -1;  // 'i' if 'i' is not 0, else -1.
            sec = 0;
        });
    })(i);
} 
```

*更新以下评论：*那么为什么我们需要在这里关闭？最后是什么`(i);`意思？

基本上，我们需要一个闭包，因为传递给的匿名函数`shortcut.add()`不会立即被调用，而是在未来某个时间，在循环终止之后。`i`函数通过引用而不是值捕获，这意味着它们将*在运行时*`i`看到当前的值，而不是*在定义时*。

 **因此，如果我们`shortcut.add()`直接从循环体中调用，我们传递的所有匿名函数最终都会`i`在循环终止后看到当前的值，这将始终是相同的 ( `10`)。

在每次迭代中创建一个新变量看起来可以工作，但没有：

```
for (var i = 0; i <= 9; ++i) {
    var _i = i;  // Create new variable containing current value of 'i'.
    shortcut.add(i.toString(), function() {
        points = _i || -1;  // Won't work, '_i' is always 9.
        sec = 0;
    });
} 
```

由于`for`循环体在 Javascript 中没有自己的作用域，`_i`因此在函数作用域中结束，与 , 相同`i`，并将以相同的方式捕获（其最终值将`9`代替，`10`因为`++i`不适用于它）。

所以，我们真正需要的是在每次迭代中都有一个新的作用域。为此，我们可以在循环中定义一个函数，并立即调用它，并将当前值传递给它`i`：

```
var newScope = function(i) {
    // Here, the value of 'i' will be the one current when 'newScope' is called
    // and will not change, even if 'i' is captured by other functions.
};
newScope(i);  // Call function with current value of 'i'. 
```

最后，我们可以在不引入`newScope`名称的情况下直接将调用运算符`()`应用于函数定义：

```
(function(i) {
    // Here, the value of 'i' will be the one current when this function is
    // called and will not change, even if 'i' is captured by other functions.
})(i);  // Call function with current value of 'i'. 
```

我希望这能适当地回答您的问题，如果没有，请随时留下进一步的评论。有关闭包的更多信息，请参阅[MDN 上的闭包](https://developer.mozilla.org/en/JavaScript/Guide/Closures)。**

# gwt - GWT 中的事件处理

> ID：11207835
> 
> 赞同：0
> 
> 时间：2012-06-26T12:59:24.513
> 
> 标签：gwt, uibinder

我想做这样的事情：我想要一个单元格表，其中每个单元格都是我编写的一个类。我需要为单元格表添加一个点击事件。那么我怎样才能得到点击了哪个单元格。由于 Cell 是我定义的一个类，基于单击的单元格，我需要执行一些操作。我可以以某种方式获取单击的单元格的对象详细信息。例如

我需要一个类似于单元格表的 excel 表，excel 表中的每个单元格都是我定义的一个类，假设该类包含如下值：

```
CellClass{
 boolean isempty;
 string name;
 int id;
} 
```

现在，如果我单击 excel 表，如何获取单击了哪个单元格，以便我可以告诉用户单元格的名称以及它是否为空。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T13:26:14.303

使用 ClickableTextCell 制作可点击的单元格。请参阅下面的代码详细信息：

```
nameCell = new ClickableTextCell() {
            @Override
            public void render(com.google.gwt.cell.client.Cell.Context context,
                    String data, SafeHtmlBuilder sb) {
                super.render(context, "", sb);

                    sb.appendHtmlConstant("<input type=text value='"+data+"' />);

        };

        nameColumn = new Column<Document, String>(nameCell) {

            @Override
            public String getValue(Document object) {
                //code
            }
        }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T13:27:43.570

请注意，每个 Column 只有一个 Cell 实例，并非每个值都由一个 Cell 实例表示。您上面描述的结构将是您在 CellTable.setRowData 中设置的数据的结构。

[Cell 必须通过AbstractCell](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/index.html?com/google/gwt/cell/client/AbstractCell.html)中的超级构造函数或[Cell](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/index.html?com/google/gwt/cell/client/AbstractCell.html)`getConsumedEvents`中定义的方法来声明它感兴趣的事件。在你的情况下，“点击”事件。

然后，您可以在自定义单元格中实现该`onBrowserEvent`方法并对点击做出反应。上下文将传递给此方法，指示事件引用的行和列（请参阅[Cell.Context](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/index.html?com/google/gwt/cell/client/Cell.Context.html)）以及与单击关联的键和值。

在您的情况下，自定义 Cell 看起来像这样：

```
public class MyCell extends AbstractCell<String> {
    public MyCell() {
        super("click");
    }

    @Override
    public void onBrowserEvent(Context context, Element parent, String value, NativeEvent event, ValueUpdater<String> valueUpdater) {
        // Handle the click event.
        if ("click".equals(event.getType())) {
            // Ignore clicks that occur outside of the outermost element.
            EventTarget eventTarget = event.getEventTarget();
            if (parent.getFirstChildElement().isOrHasChild(Element.as(eventTarget))) {
                doAction(value, valueUpdater);
            }
        }
    }
} 
```

您还可以在[列](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/index.html?com/google/gwt/user/cellview/client/Column.html)级别拦截事件。

[您可以在开发指南](https://developers.google.com/web-toolkit/doc/latest/DevGuideUiCustomCells#cell-onBrowserEvent)中找到更多信息

# java - cvHaarDetectObjects() 方法有什么作用？

> ID：11207840
> 
> 赞同：7
> 
> 时间：2012-06-26T12:59:35.397
> 
> 标签：java, image-processing, opencv, javacv

请一些专家解释一下我们是否可以使用**cvHaarDetectObjects()**方法来检测正方形并获取宽度和高度？我找到了一个使用这种方法进行人脸检测的代码，但我需要知道我是否可以将它用于矩形检测。

```
 String src="src/squiredetection/MY.JPG";
    IplImage grabbedImage = cvLoadImage(src);
    IplImage grayImage    = IplImage.create(grabbedImage.width(),  grabbedImage.height(), IPL_DEPTH_8U, 1);

        cvCvtColor(grabbedImage, grayImage, CV_BGR2GRAY);

        CvSeq faces = cvHaarDetectObjects(grayImage, cascade, storage, 1.1, 3, 0);//*
        for (int i = 0; i < faces.total(); i++) {
            CvRect r = new CvRect(cvGetSeqElem(faces, i));
            cvRectangle(grabbedImage, cvPoint(r.x(), r.y()), cvPoint(r.x()+r.width(), r.y()+r.height()), CvScalar.RED, 1, CV_AA, 0);
         /*   hatPoints[0].x = r.x-r.width/10;    hatPoints[0].y = r.y-r.height/10;
            hatPoints[1].x = r.x+r.width*11/10; hatPoints[1].y = r.y-r.height/10;
            hatPoints[2].x = r.x+r.width/2;     hatPoints[2].y = r.y-r.height/2;*/
          //  cvFillConvexPoly(grabbedImage, hatPoints, hatPoints.length, CvScalar.GREEN, CV_AA, 0);
        } 
```

当我使用上述方法时，它会引发以下异常

```
OpenCV Error: Bad argument (Invalid classifier cascade) in unknown function, file C:\slave\WinInstallerMegaPack\src\opencv\modules\objdetect\src\haar.cpp, line 1036
Exception in thread "main" java.lang.RuntimeException: C:\slave\WinInstallerMegaPack\src\opencv\modules\objdetect\src\haar.cpp:1036: error: (-5) Invalid classifier cascade

    at com.googlecode.javacv.cpp.opencv_objdetect.cvHaarDetectObjects(Native Method)
    at com.googlecode.javacv.cpp.opencv_objdetect.cvHaarDetectObjects(opencv_objdetect.java:243)
    at squiredetection.Test2.main(Test2.java:52 I have put * on this line) 
```

请提供简单的代码示例。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-28T10:42:41.093

`cvHaarDetectObjects()`不仅用于检测对象或形状，还取决于`HaarCascade`分类器。

如果您通过`face haarcascade xml`，那么它将返回一个人脸数组，或者也可以使用`eye`,`nose`等 HaarCascade XML 文件。您也可以`haarcascade xml`通过使用创建自己的正样本和负样本来进行自定义`opencv_traincascade.exe`

```
CvSeq faces = cvHaarDetectObjects(grayImage, classifier, storage,
                1.1, 3, CV_HAAR_DO_CANNY_PRUNING);

for (int i = 0; i < faces.total(); i++) {
   // its ok
} 
```

[opencv 文档](http://docs.opencv.org/modules/objdetect/doc/cascade_classification.html)的详细信息

对于矩形检测：

> 中有一个矩形检测的例子`OpenCV`，他们用它来检测棋盘中的正方形。查看`squares.c`..\OpenCV\samples\c\ 目录。

在 opencv 中查看这个[棋盘检测示例](http://www.code.opencv.org/projects/opencv/repository/entry/trunk/opencv/samples/cpp/squares.cpp)

*未知函数错误中的无效分类器级联*意味着您传递的分类器格式不正确或缺少某些内容。检查您的分类器 xml 文件是否有效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T13:33:39.160

`cvHaarDetectObjects`返回在图像中检测到的多个人脸。您必须声明一个 CvSeq 数组来存储结果，而不仅仅是单个 CvSeq。

```
// There can be more than one face in an image.
// So create a growable sequence of faces.
// Detect the objects and store them in the sequence
CvSeq* faces = cvHaarDetectObjects( img, cascade, storage,
                                    1.1, 2, CV_HAAR_DO_CANNY_PRUNING,
                                    cvSize(40, 40) ); 
```

上面的代码是从这个站点提取的：

[http://opencv.willowgarage.com/wiki/FaceDetection](http://opencv.willowgarage.com/wiki/FaceDetection)

# jquery - 无法显示 jquery 移动对话框

> ID：11207841
> 
> 赞同：1
> 
> 时间：2012-06-26T12:59:38.033
> 
> 标签：jquery, jquery-mobile

我正在使用库 1.1。我正在尝试显示一个简单的对话框，我不想加载一个页面，我只想显示来自同一页面的 div 标签内容。

除了标准 1.1 参考之外，我是否需要添加任何特殊的 jquery 参考？

可以说我有这个

```
 <a href="#dialog" data-role="button" data-rel="dialog" data-transition="fade" data-inline="true">Find</a>

        <div data-role="dialog" id="dialog">
            <div data-role="header" data-theme="e">
                <h1>Foo</h1>
            </div>
            <div data-role="content" data-theme="e">
                <p>Bar</p>
            </div>
        </div> 
```

单击要显示的对话框的按钮时，我需要对页面执行什么操作？

完整的输出html

```
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<title>Plenfy</title>
<meta name="viewport" content="width=device-width" />
<script type="text/javascript" src="../../Scripts/jquery-1.7.1.js"></script>
<link href="/favicon.ico" rel="shortcut icon" type="image/x-icon" />
<link href="/Content/mobile/jquery.mobile-1.1.0.css" rel="stylesheet" type="text/css"      /> 
```

```
 <img src="/Content/mobile/images/logo-80.png"/>
 <p>
 </p>
 <ul data-role="listview" data-inset="true">
<li><a href="/Account/join">Join</a></li>
<li><a href="/Account/Login">Log In</a></li>
<li><a href="/contact-us">Contact Us</a></li>
</ul>   
       </div>
        <div data-role="page" id="start">
            <a href="#dialog" data-role="button" data-rel="dialog" data-transition="fade" data-inline="true">Find</a>
        </div>
        <div data-role="dialog" id="dialog">
            <div data-role="header" data-theme="e">
                <h1>Foo</h1>
            </div>
            <div data-role="content" data-theme="e">
                <p>Bar</p>
            </div>
        </div>
        ?

    </div>

</div>

<script src="/Scripts/mobile/jquery-1.6.4.js" type="text/javascript"></script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T13:13:25.997

不要忘记包含 jQuery Mobile (css **AND js** ) 和 jQuery Core 1.6.4 **OR** 1.7.1，如[jQuery Mobile Docs](http://jquerymobile.com/test/docs/about/getting-started.html)中所述。

并确保您的页面结构有效：

```
<div data-role="page" id="start"> 
    <a href="#dialog" data-role="button" data-rel="dialog" data-transition="fade" data-inline="true">Find</a>
</div> 

<div data-role="dialog" id="dialog">
    <div data-role="header" data-theme="e">
        <h1>Foo</h1>
    </div>
    <div data-role="content" data-theme="e">
        <p>Bar</p>
    </div>
</div>​ 
```

[工作jsfiddle示例](http://jsfiddle.net/4Bgx7/1185/)

**根据您的完整 html 更新：**

不包括 jQuery 1.7.1 AND 1.6.4，删除 jQuery 1.6.4 的 script 标签，并在包括 jquery 1.7.1 之后包括**jQuery Mobile JS 。**您的包含应如下所示：

```
<script type="text/javascript" src="../../Scripts/jquery-1.7.1.js"></script>
<script type="text/javascript" src="/Content/mobile/jquery.mobile-1.1.0.js"></script>
<link href="/Content/mobile/jquery.mobile-1.1.0.css" rel="stylesheet" type="text/css"/> 
```

# actionscript-3 - ColumnChart：在 actionscript 中的 columneries 上设置颜色

> ID：11207847
> 
> 赞同：1
> 
> 时间：2012-06-26T13:00:07.717
> 
> 标签：actionscript-3, apache-flex

我正在ActionScript 中为我的*ColumnChart动态创建**ColumnSeries*，但我似乎无法掌握如何在 ActionScript 中动态设置每个*ColumnSeries*的颜色。

 **columnSeries.fill *=#someCOlor*在 AS 中不起作用？有谁知道我怎么能做到这一点？最好的方法是定义一个具有例如 10 种颜色的数组，然后将它们分配到不同的 columnSeries。

下面的代码显示了我如何创建我的*ColumnSeries*。任何帮助都非常有用:)

```
 var newSeries:Array = new Array();

            var columnSeries:ColumnSeries;
            for(var i:int = 0; i < list.length; i++)
            {
                columnSeries = new ColumnSeries();
                columnSeries.dataProvider = data;
                columnSeries.yField = DynDiagramData.valueKey +i;
                columnSeries.xField =  "genLabel";
                columnSeries.displayName = "someName";
                newSeries.push(columnSeries);                   
            }

            columnChart.series = newSeries; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T13:38:20.213

试试 'columnSeries.setStyle("fill", <value>);'**

# javascript - Google Maps API 中的扭曲信息框

> ID：11207848
> 
> 赞同：10
> 
> 时间：2012-06-26T13:00:13.213
> 
> 标签：javascript, google-maps

我正在使用 Google Maps 的 API 并在地图中添加了一些标记。每个标记都有一个包含不同内容的信息框。一切正常，但外观很糟糕。

如下图所示，它看起来有点扭曲。有什么线索吗？

[图片 http://box.jisko.net/i/d8353364.png](http://box.jisko.net/i/d8353364.png)

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-26T13:14:56.160

好的。@geocodezip 是对的。Bootstrap 确实与谷歌地图发生冲突，这已经在这里解决了：[Twitter Bootstrap CSS 影响谷歌地图](https://stackoverflow.com/questions/9141249/twitter-bootstrap-css-affecting-google-maps)

谢谢 ：）

# javascript - 如何包装 div 的内容并在最后添加…？

> ID：11207849
> 
> 赞同：0
> 
> 时间：2012-06-26T13:00:13.937
> 
> 标签：javascript, php, jquery, text, word-wrap

我有一个`div`显示内容的。我的要求是如果超过 10 个字符，则必须显示

```
10 characters + '...' 
```

我可以使用 jQuery 和 PHP。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T13:19:59.287

要将文本限制为仅显示，特别是 10 个字符会很棘手，因为您需要根据字体设置计算文本宽度。

如果您使用像 em 这样的单位，则无需为此烦恼，并且显示的文本几乎与您想要的宽度相同。

有一个可编辑的例子：

[http://jsfiddle.net/flaviocysne/88nLY/2/](http://jsfiddle.net/flaviocysne/88nLY/2/)

基于这些站点示例：

[http://www.quirksmode.org/css/textoverflow.html](http://www.quirksmode.org/css/textoverflow.html)

[http://davidwalsh.name/css-省略号](http://davidwalsh.name/css-ellipsis)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-04-22T15:34:59.397

如果你使用 php，你可以使用函数**substr($text, $start, $length) ，**[这里](https://www.php.net/manual/en/function.substr.php)的文档是这样的：

```
<?php

$test = "Lorem ipsum dolor sit amet consectetur adipisici";
// fonction to split the part of text if necessary
$result = strlen($test)>10 ? substr($test, 0, 10).'....': $test;
// to display the text: and don't check the length of string
echo $result;
```

所以在 jQuery 中，你有太多的功能**substr**文档：[这里](https://www.w3schools.com/jsref/jsref_substr.asp) 是这样的：

```
$(document).ready(function() {
 let text = "Lorem ipsum dolor sit amet consectetur adipisici"
 let result = text.length > 10 ? text.substr(0, 10)+"..." : text;

 alert(result);
});
```

我希望它对你有帮助

# dojo - Dojo Tollkit - Dialog 内 ScrollableView 的高度

> ID：11207854
> 
> 赞同：1
> 
> 时间：2012-06-26T13:00:20.223
> 
> 标签：dojo

[我使用来自http://ajax.googleapis.com/ajax/libs/dojo/1.7.2/dojo/dojo.js](http://ajax.googleapis.com/ajax/libs/dojo/1.7.2/dojo/dojo.js)的 Dojo Toolkit 1.7.2

我需要在对话框中显示可滚动（通过帮助触摸）内容。此外，如果可能的话，我也需要在对话框内的视图之间进行转换，就像在移动设备上一样。

我做什么（代码的简化版本）：

```
var dialog = new Dialog();
var view = new ScrollableView({
    selected: true
});

//add some content inside view. Content heigh is greater than height of dialog. 
```

如果我这样做，对话框会尝试适应内容的整个高度。

下一次尝试：

```
var dialog = new Dialog({
    style: {
        width: 600,
        height: 400
    }
}); 
```

或者

```
dialog.resize({w: 600, h: 400}); 
```

现在对话框具有固定高度，但内部 ScrollableView 实例不会滚动到其内容的底部。

当我深入研究源代码时，我发现 ScrollableView 继承自 dojox/mobile/_ScrollableMixin，后者继承自 dojox/mobile/scrollable。

dojox `resize()`/mobile/scrollable 函数使用窗口高度来计算滚动功能。

有没有办法在不实现我自己的 ScrollableView 版本的情况下获得我需要的东西？

* * *

解决方案：

```
var dialogRect = domGeometry.getMarginBox(dialog.domNode);
var headerRect = domGeometry.getMarginBox(dialog.titleBar);
var containerNodePaddingTop = domStyle.get(dialog.containerNode, "paddingTop");
var containerNodePaddingBottom = domStyle.get(dialog.containerNode, "paddingBottom");

var viewHeight = dialogRect.h - headerRect.h - containerNodePaddingTop - containerNodePaddingBottom;
var view = new ScrollableView({
    selected: true,
    height: viewHeight.toString() + "px"
});
// or
// view.set("height", viewHeight.toString() + "px"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T09:18:39.143

以这种方式修复它：

```
var Name = 'yourdialogid';
dojo.query("#"+Name+" .dijitDialogPaneContent").forEach(function(node, index, arr){
   dojo.style(node,"overflow","auto");
   dojo.style(node,"height",(dojo.position(dijit.byId(Name).domNode).h-80)+"px");
}); 
```

# php - 将 REST URI 解析为类/方法

> ID：11207856
> 
> 赞同：1
> 
> 时间：2012-06-26T13:00:23.030
> 
> 标签：php, .htaccess, url, rest

我已经在这个主题上寻找了一段时间，这个具体问题的方式似乎并不多。我确实在数百个我认为可以回答我的问题的答案中找到了[一个](https://stackoverflow.com/questions/7518835/how-are-uris-handled-in-a-rest-api)，但我想确定这一点。我的问题是，处理 REST URI 服务器端的最佳和最常见的方法是什么？

详细地说，如果我有一个 URI，www.example.com/resources/resourceID，我知道我需要设置一个 .htaccess 文件来处理它并将其定向到正确的位置。我只是不确定拥有一个简单地解析 URI 并将请求发送到特定类的 PHP 调度程序是否更干净（即处理所有 HTTP 方法和消费者可以使用的所有可能请求组合的一些巨型 switch 语句）或让 .htaccess 解析它们。也就是说，我是使用 .htaccess 文件将示例 URI 路由到说 restHandler.php 还是只是用正则表达式解析它以转到名为“资源”的类。

这可能会回答我自己的问题，但我对 .htaccess 方法的问题是，像 www.example.com/resources1/resource1ID/resources2/resource2ID 这样的东西很难在正则表达式中捕获，并将其发送到适当的文件，所以我倾向于 PHP 中的处理程序。但是对我来说，拥有一个大的 'ol switch/ifelse 语句来处理我允许的每个可能的组合似乎仍然不干净。这真的是最干净的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T13:13:00.560

最好的解决方案是两者的混合：用于`.htaccess`捕获整个`/resources1/resource1ID/resources2/resource2ID`部分并重定向到一个固定的入口点，在该入口点这将作为参数传递——例如，

```
example.com/dispatch.php?route=/resources1/resource1ID/resources2/resource2ID 
```

然后，您的 PHP 代码可以利用您希望的尽可能丰富的信息来决定如何处理这些信息，包括它可以在运行时自行收集的信息（例如通过[反射](http://www.php.net/manual/en/reflection.examples.php)）。通常，此调度程序将利用某种*路由*¹ 来确定应调用哪个控制器和动作，然后使用某种类型的参数*绑定*² 以使用适当的参数调用该动作。

它也可以通过一个巨大的`switch`声明来完成，但这可能不是最好的主意。;-)

* * *

¹ 路由：将 URL 模式映射到控制器操作；[这是适用于 ASP.NET 的相关阅读](http://msdn.microsoft.com/en-us/library/cc668201.aspx#url_patterns)，但该概念对所有 MVC 框架都是通用的

² 绑定：弄清楚 URL 中的参数如何映射到实现控制器操作的方法的形式参数

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T13:12:20.583

我使用 .htaccess 重写对我的 PHP 路由器的所有请求，该路由器解析 URI 并使用 PHP 的自动加载来加载适当的控制器（传递 URI 的剩余 RESTful 部分）。然后每个控制器负责确定 URI 中的其他内容是操作/参数。

仍然很脏，但它被分成小块。

# html - 在谷歌浏览器上出现锚点文本颜色的边框

> ID：11207857
> 
> 赞同：0
> 
> 时间：2012-06-26T13:00:29.887
> 
> 标签：html, css, google-chrome, border

在谷歌浏览器上，如果我有`div`一个锚点，边框会随机变为文本颜色。如果我检查元素，颜色会立即切换回正确的颜色。有没有办法解决这个错误？

这是html：（它不会每次都发生，自发地它会是错误的颜色）

```
<a href="/about"><div class="navc">
    <div class="navt"><?php echo $lang['0']; ?></div>
</div>
</a> 
```

这是CSS：

```
#nav
{
float:left;
width:100%;
height:30px;
background:url('../images/nav.png') repeat-x;
border:1px solid #C2C1C1;
text-shadow:0 1px 0 white
}

#nav a
{
color:black;
text-decoration:none
}

.navc
{
padding:0 10px;
border-left:1px solid #C2C1C1;
border-right:1px solid #EEE;
float:left;
height:100%
}

.navt
{
padding-top:6px
} 
```

如下图所示，关于导航按钮的边框是错误的

![边界错误](../Images/39c44d3fd671d35488569f9bbd7a2532.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T22:26:19.437

我只花了 3 个小时就解决了这个错误（在这样的日子里，我觉得 Webkit 和 Trident 一样糟糕）......但这是答案：

仅当您在`(<a>)`具有已访问的“href”值的锚点中有内联元素时才会发生这种情况。如：

```
<a href="http://www.google.com"><span>Button</span></a> 
```

为了解决这个问题，我添加了以下 CSS：

```
a {color: blue}

a span,
a:visited span /* Webkit will render a blue border unless this is explicitly specified */
{
    border: 1px solid red;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T15:41:12.523

我找到了解决方案，

如果我使用 a`span`而不是 a `div`，则问题似乎不会发生。

编辑-自从它成为一个跨度以来，它发生了一次，刷新了，从那以后就没有发生过。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-18T17:32:53.660

我刚刚遇到了这样的一些标记：

```
<a href="http://www.google.com" class="outer-link">
    <img src="http://google.com/gif.png" />
</a> 
```

我的风格是这样的：

```
img { border: 2px solid gray; } 
```

灰色边框变成了蓝色链接颜色，这是我修复它的方法：

```
.outer-link { color: gray; } 
```

因此，即使 img 的边框错误，它也会默认为我指定的灰色边框颜色。我知道这有点hacky，但它有效。

# cocoa - Cocoa 可以自动处理法语本地化字符串的缩略词吗？

> ID：11207860
> 
> 赞同：1
> 
> 时间：2012-06-26T13:00:35.387
> 
> 标签：cocoa, localization, nsstring

我有一个`NSString`类似“你赢了。是查克·诺里斯。”的本地化。这个的法语翻译是“Gagne. il s'agissait bien de Chuck Norris”。但是当名字以元音开头时，它应该说“Gagné. il s'agissait bien d'Alfred Hitchcock”。

是否`NSString`为这些情况提供支持，或者我是否需要手动翻译每种可能性？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-26T13:09:21.657

如果您尝试使用 之类的工具进行本地化`NSLocalizedString()`，那么很多语言（尤其是那些具有语法性别的语言）中都会出现这样的变体，并且处理起来很麻烦。没有内置的 change-strings-if-starting-with-a-vowel 方法，但是这样的东西是必要的（伪代码）：

```
if (language == LANG_FRENCH) {
    if (myName.startsWith(ANY_VOWEL)) {
        result = format(@"Gagné ... d'%@", myName);
    } else {
        result = format(@"Gagné ... de %@", myName);
    }
} 
```

**为什么我给你伪代码而不是真实代码？**因为这是做这项工作的*错误方法。*它很乱，很丑，而且有很多边缘情况。例如，法语中的字母“H”可以是“送气”或“不送气”，一个取“l'/d'”，另一个取“le/la/de”（比较“l'hôtel”和“le hockey”。）区别是任意的，*不能*仅通过检查单词的拼写来确定。

与其尝试将格式字符串与名称匹配，不如尝试将格式字符串更改为中性。而不是`"Il s'agissait bien d'%@."`，请尝试`"Le nom? C'est %@!"`使名称的性别和拼写不影响本地化。不同的语言在这里会有不同的选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-15T23:05:39.963

请看一下[https://github.com/tr8n/tr8n_objc_clientsdk](https://github.com/tr8n/tr8n_objc_clientsdk)

它提供对语言上下文规则和语言案例的支持。

在您的示例中，您将使用以下宏本地化英文字符串：

```
Tr8nLocalizedStringWithTokens(
    @"You win. It was {name}.", 
    @{"name": @"Chuck Norris"}
); 
```

{name} 是一个数据令牌。

法语的翻译将使用语言大小写，如下所示：

```
"You win. It was {name}." = "Gagne. Il s'agissait bien {name::d_de}" 
```

其中 (::d_de) 定义为 Tr8n 的语言大小写规则，如下：

```
if (match "/^[aeiouAEIOU]/" @value) 
then (prepend "d'" @value) 
else (prepend "de " @value) 
```

如果您需要它作为资本，请使用：

```
{name::D_De} 
```

另外，如果您需要将名称加粗，请使用 Attributed String 宏，如下所示：

```
Tr8nLocalizedAttributedStringWithTokens(
      @"You win. It was [bold: {name}].", 
      @{
         @"name": @"Chuck Norris", 
         @"bold": @{@"font": @{@"style": @"bold"}}
      }
); 
```

翻译成法语将是：

```
"You win. It was [bold: {name}]." = "Gagne. Il s'agissait bien [bold: {name::d_de}]" 
```

顺便说一句，也完全支持性别依赖。让我知道这个案例，我会告诉你如何使用它们。

披露：我是该库的创建者和维护者。如果您发现任何语言都缺少某些规则，请告诉我，我很乐意添加它们。

# sql - 用于过滤数据的 SQL 查询

> ID：11207861
> 
> 赞同：4
> 
> 时间：2012-06-26T13:00:35.480
> 
> 标签：sql, r

我正在处理一些 sql 查询以从表中获取一些数据；我对相同的数据进行了 2 次查询，但都给出了另一个结果。2个查询是：

```
SELECT Samples.Sample,
       data_overview.Sample_Name,
       data_overview.Sample_Group,
       data_overview.NorTum,
       data_overview.Sample_Plate,
       data_overview.Sentrix_ID,
       data_overview.Sentrix_Position,
       data_overview.HybNR,
       data_overview.Pool_ID
FROM tissue INNER JOIN (
                            ( patient INNER JOIN data_overview
                                ON patient.Sample = data_overview.Sample)
                        INNER JOIN Samples ON
                          (data_overview.Sample_id = Samples.Sample_id) AND
                          (patient.Sample = Samples.Sample)
                        ) ON
                        (tissue.Sample_Name = data_overview.Sample_Name)  AND 
                        (tissue.Sample_Name = patient.Sample_Name)
     WHERE data_overview.Sentrix_ID= 1416198
          OR data_overview.Pool_ID='GS0005701-OPA'
          OR data_overview.Pool_ID='GS0005702-OPA'
          OR data_overview.Pool_ID='GS0005703-OPA'
          OR data_overview.Pool_ID='GS0005704-OPA'
          OR data_overview.Sentrix_ID= 1280307
     ORDER BY Samples.Sample;") 
```

另一个是

```
SELECT Samples.Sample,
       data_overview.Sample_Name,
       data_overview.Sample_Group,
       data_overview.NorTum,
       data_overview.Sample_Plate,
       data_overview.Sentrix_ID,
       data_overview.Sentrix_Position,
       data_overview.HybNR,
       data_overview.Pool_ID
FROM tissue INNER JOIN 
                      (
                         (patient INNER JOIN data_overview 
                               ON patient.Sample = data_overview.Sample)
                          INNER JOIN Samples ON
                              (data_overview.Sample_id = Samples.Sample_id)
                              AND (patient.Sample = Samples.Sample)) ON
                              (tissue.Sample_Name = data_overview.Sample_Name)
                          AND (tissue.Sample_Name = patient.Sample_Name)
          WHERE ((
                    (data_overview.Sentrix_ID)=1280307)
                AND (
                     (data_overview.Pool_ID)="GS0005701-OPA"
                     OR (data_overview.Pool_ID)="GS0005702-OPA"
                     OR (data_overview.Pool_ID)="GS0005703-OPA" 
                     OR (data_overview.Pool_ID)="GS0005704-OPA"))
                     OR (((data_overview.Sentrix_ID)=1416198))
ORDER BY data_overview.Sample; 
```

顶部的那个工作得很好，但它仍然不会过滤 sentrix_ID。第二个 1 是使用 Access 创建的，但是当我尝试在 R 中运行此查询时，它给出了意外的符号错误。因此，如果有人知道如何使用给定的参数创建过滤 POOL_ID 和 Sentrix_id 的查询，请提前感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T15:43:57.507

也许你的意思是：

```
 ...
 WHERE data_overview.Sentrix_ID IN (1280307,1416198 )
   AND data_overview.Pool_ID IN ("GS0005701-OPA", "GS0005702-OPA", "GS0005703-OPA" ,"GS0005704-OPA")
   ; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T13:16:11.360

是否将 where 子句制作成这样：

```
 WHERE Sentrix_ID = 1280307 AND (Pool_ID = 'VAL1' OR Pool_ID = 'VAL2' OR Pool_ID = 'VAL3') 
```

即确保“或”组件周围有括号？

# matlab - Matlab中的K均值距离参数 - 不同的结果

> ID：11207865
> 
> 赞同：0
> 
> 时间：2012-06-26T13:00:47.767
> 
> 标签：matlab, statistics, cluster-analysis, k-means

我有一个我正在使用的 300x5000 的矩阵，我想测试哪个距离计算参数最有效。我得到以下结果：

'Sqeuclidean' = 17 次迭代，距离总和 = 25175.4

“相关性” = 9 次迭代，距离总和 = 32.7

'Cityblock' = 34 次迭代，距离总和 = 105175.3

'余弦' = 11 次迭代，距离总和 = 11.9

我无法理解为什么结果变化如此之大以及如何选择最有效的距离参数。有什么建议吗？

编辑：

我有 300 个功能，每个功能有 5000 个实例。该函数如下所示：

[idx, ctrs, sumd, d] = kmeans(matrix, 25, 'distance', 'cityblock', 'replicate', 20)

通过交换距离参数。这些特征已经标准化。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T09:30:25.370

不同的距离值

*   距离函数
*   数据集
*   规范化

一般**没有可比性**。现实中的简单示例：以“米”或“英寸”为单位测量距离，您会得到截然不同的结果。以米为单位的结果不会更好，因为它是**在不同的尺度上测量的**。所以你**不能比较不同结果的方差**。

请注意，k-means 仅适用于*欧式*距离，可能无法与其他距离函数收敛。恕我直言，L_p 规范应该没问题，在 TF-IDF 上也可能是余弦。但我不知道有什么证据。

哦，k-means 对高维数据的效果真的很差。它适用于低维。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T16:46:17.330

正如 slayton 评论的那样，您确实需要定义“最佳”对您的特定问题意味着什么。

唯一重要的是距离函数对数据的聚类程度。一般来说，聚类高度依赖于距离函数。您选择的两个指标（迭代次数、距离总和）与聚类的效果完全无关。

你需要知道你想要通过集群实现什么，并且你需要一些指标来衡量你实现该目标的程度。如果有一个客观指标来确定您的集群有多好，那么就使用它。通常，指标比较模糊：当我可视化数据时，这看起来是否正确。查看您的数据，并查看每个距离函数如何对数据进行聚类。选择似乎生成最佳聚类的距离函数。对数据的几个子集执行此操作，以确保您的直觉是正确的。您还应该尝试了解每个距离函数给您的结果。

最后，一些问题适用于特定的距离函数。如果您的问题具有空间特征，那么欧几里得（几何）距离通常是一个自然的选择。对于不同的问题，其他距离函数会表现得更好。

# marionette - 如何将特定 itemView 分配给 CompositeView 集合中的某个模型？

> ID：11207866
> 
> 赞同：2
> 
> 时间：2012-06-26T13:00:49.130
> 
> 标签：marionette

我正在使用backbone.marionette 并希望对传递给CompositeView 的集合中的某些项目使用不同的视图。这可能吗？

```
var vText = Backbone.Marionette.ItemView.extend({
    template : "forms/form-element",
    className : "control-group"
});

var vCheckbox = Backbone.Marionette.ItemView.extend({
    template : "forms/form-element-checkbox",
    className : "control-group"
});

var vForm = Backbone.Marionette.CompositeView.extend({
    tagName : 'form',
    template : 'forms/form',
    className : 'crud-form form-horizontal',
    itemView : // use different view for specific items based on collection modelData
}) 
```

我试过了：

```
itemView : function(model) {

        switch(model.get('inputType')) {
            case "checkbox":
                return vCheckbox;
            break;
            default:
                return vText;
            break;  
        }
    } 
```

但不起作用。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T14:49:03.790

目前不直接支持此功能，但根据您的项目需求添加不会太难

[https://github.com/derickbailey/backbone.marionette/blob/master/src/backbone.marionette.collectionview.js#L105-115](https://github.com/derickbailey/backbone.marionette/blob/master/src/backbone.marionette.collectionview.js#L105-115)

这是检索`itemView`视图设置值的函数。您可以在您的特定视图中覆盖它：

```
 Backbone.Marionette.CompositeView.extend({

  // ...

  getItemView: function(){
    return this.itemView();
  }

}); 
```

这似乎也应该直接添加到木偶中。你能在 github 问题列表中添加一个问题吗？[https://github.com/derickbailey/backbone.marionette/issues](https://github.com/derickbailey/backbone.marionette/issues)从票中链接回此 SO 帖子。

# javascript - 将面板移动到外部类时，Ext JS 布局崩溃

> ID：11207867
> 
> 赞同：1
> 
> 时间：2012-06-26T13:00:58.717
> 
> 标签：javascript, layout, extjs, extjs4.1

这是我在 Ext JS 中的第一个大项目，所以请理解 :) 我正在构建一个基于门户示例的应用程序。我需要创建的是简单的布局，顶部有工具栏，底部有状态栏，标签面板占据整个屏幕。像这样： ![布局](../Images/cbb16503485fe77fcad4333d457ec23e.png)

基本思想是将每个大控件放在单独的文件中，以便更改应用程序的某些部分。

我的目录结构如下所示：

```
root
--layout.html
--js
----App.js
----Components
------StatusBar.js
------UserInfo.js
------MenuBar
--------UserMenuBar.js
------Dashboard
--------UserDashboard.js 
```

我的 App.js 看起来像这样：

```
Ext.ns('Holidays');

Ext.Loader.setConfig({
enabled: true,
disableCaching: true
});

Ext.Loader.setPath('Holidays', 'js');
Ext.Loader.setPath('Holidays.Components', 'js/Components');
Ext.Loader.setPath('Ext.ux', 'js/ux');

Holidays.application = null;

Ext.application({
name: "Holidays",
launch: function () {
    Holidays.application = this;
    this.createLayout();
    Holidays.application = this;
    Ext.fly(document.body).on('contextmenu', this.onContextMenu, this);
},
onContextMenu: function (e, target) {
    if (!e.ctrlKey) {
        e.preventDefault();
    }
},

createLayout: function () {

    this.menuBar = Ext.create("Holidays.Components.MenuBar.UserMenuBar");
    this.statusBar = Ext.create("Holidays.Components.StatusBar");
    this.centerView = Ext.create("Holidays.Components.Dashboard.UserDashboard");

    this.centerPanel = Ext.create("Ext.tab.Panel", {
        xtype: 'tabpanel',
        border: false,
        region: 'center',
        bodyStyle: 'background:#DBDBDB',
        plugins: Ext.create('Ext.ux.TabCloseMenu')

    });

    Ext.create('Ext.container.Viewport', {
        layout: 'fit',
        items: [{
            xtype: 'panel',
            border: false,
            layout: 'border',
            items: [
            this.centerPanel],
            bbar: this.statusBar,
            tbar: this.menuBar
        }]

    });

    this.addItem(this.centerView);
},

addItem: function (item) {
    this.centerPanel.add(item);
    item.show();
},

getStatusbar: function () {
    return this.statusBar;
},

getCenterView: function () {
    return this.centerView;
}
});

Holidays.getApplication = function () {
return Holidays.application;
}; 
```

Dashboard.js 看起来像这样：

```
Ext.define('Holidays.Components.Dashboard.UserDashboard', {
extend: 'Ext.panel.Panel',
alias: 'widget.UserDashboard',
layout: 'border',
padding: 5,
closable: false,
title: 'Holiday planner',
initComponent: function () {

    this.tree = Ext.create("Ext.panel.Panel", {
        region: 'west',
        split: true,
        title: 'Categories',
        width: 300,
        collapsible: true,
        animCollapse: false
    });

    //this.tree = Ext.create("Holidays.Components.UserInfo");THIS WON'T WORK :(

    this.grid = Ext.create("Ext.panel.Panel", {
        title: 'Plan urlopu',
        region: 'center',
        split: true,
    });

    this.history = Ext.create("Ext.panel.Panel", {
        collapsed: true,
        collapsible: true,
        region: 'east',
        split: true,
        width: 300,
        animCollapse: false,
        title: 'test'
    });

    this.items = [this.tree, this.grid, this.history];

    this.callParent();
},

getScheduler: function () {
    return this.grid;
}
}); 
```

如果我将左侧面板移动到外部文件，我的布局崩溃面板在折叠时不应该有动画，当我折叠它并尝试恢复我的工具栏和状态栏消失时：/

这是我的代码：[http ://dl.dropbox.com/u/1206389/layout.zip](http://dl.dropbox.com/u/1206389/layout.zip)

我的问题是：

1.  如何创建布局并将部分分离到外部文件？
2.  我必须为每个控件创建别名吗？有什么好处？
3.  如何使用 Ext.Loader 按需更正加载组件（在我的例子中是接口的一部分）
4.  如何将状态栏和工具栏添加到视口？我做对了吗？

最后我的布局正确吗？欢迎任何建议:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T18:57:03.280

设置后，您的条形`animCollapse: true`将消失。此行为不取决于配置类型。尝试在嵌入式中启用它，酒吧会崩溃。

1.  请参阅[应用程序架构](http://docs.sencha.com/ext-js/4-1/#!/guide/application_architecture)主题
2.  不，你没有。`alias: 'widget.blah'`只是`xtype: 'blah'`和的简单简写`Ext.widget('blah')`
3.  加载器默认为你做
4.  只需在视口中心放置一个面板，将其布局设置为`border`，配置子项并使用自身的[tbar](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.panel.Panel-cfg-tbar) / [bbar](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.panel.Panel-cfg-bbar)

# javascript - jQuery字符串中的Javascript变量

> ID：11207868
> 
> 赞同：1
> 
> 时间：2012-06-26T13:00:59.563
> 
> 标签：javascript, jquery, variables

谁能帮助我在这里做错了什么？

[演示](http://jsfiddle.net/HapSB/)

**HTML**

```
<div id="usercurrentccbox">
    <div class="cardChoice">
        <label for="mastercard"></label>
    </div>
</div> 
```

**查询**

```
$(document).ready(function(){
    var cct = "mastercard";
    //$('#usercurrentccbox .cardChoice label[for=mastercard]').addClass("active");
        $('#usercurrentccbox .cardChoice label[for="'+cct+'"').addClass("active");
}); 
```

**CSS**

```
 label{
    position:relative;
    float:left;
    width:200px;
    height:170px;
    border:1px solid #000;
}

label.active{
    border: 1px solid #d6d6d6;
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-26T13:02:10.767

您似乎缺少`]`选择器中的关闭。

```
// corrected
$('#usercurrentccbox .cardChoice label[for="'+cct+'"]').addClass("active");
//                                                  ^ over here 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T13:03:13.420

```
 $('#usercurrentccbox .cardChoice label[for="'+cct+'"]').addClass("active"); 
```

你只是忘记了结束]

# ruby-on-rails - Ruby on Rails Pinterest 按钮 媒体图像

> ID：11207869
> 
> 赞同：1
> 
> 时间：2012-06-26T13:01:02.417
> 
> 标签：ruby-on-rails, ruby, haml, pinterest

我有一个使用 ruby​​ on rails 和 haml 的博客，我将 pinterest 按钮添加到模板中，以便它出现在每篇文章中。现在我希望将博客文章的预览图像自动插入到媒体参数中。我只是不知道如何获取预览图像或（如果这对于 rails/haml 不可能）要在 pinterest 弹出窗口中显示的帖子的第一张图像。感谢您的帮助！

```
%a.pinterest-share-button{:title => "Pin It", 
                          :class => "pin-it-button", 
                          :href => "http://pinterest.com/pin/create/button/?url=#{request.url}&media{CODE HERE}&description=#{@post.title}", 
                          :rel => "nofollow", 
                          :target => "_blank", 
                          "count-layout" => "horizontal"} 
<img border="0" src="//assets.pinterest.com/images/PinExt.png" title="Pin It" /> 
```

# c# - REST 服务，List 返回 ArrayOf Prefix

> ID：11207872
> 
> 赞同：3
> 
> 时间：2012-06-26T13:01:11.150
> 
> 标签：c#, .net, wcf

我对 .NET 编码真的很陌生。我一直在尝试创建一个休息网络服务。

这是代码：

```
namespace RestService
{
    [ServiceContract]
    public class RestServiceImpl
    {
        [OperationContract]
        [WebInvoke(Method = "GET", UriTemplate = "foo")]
        List<Data> test()
        {
            OrderList ol = new OrderList();
            List<Data> comments = new List<Data>();
            comments.Add(new Data { Name = "sdf" });
            comments.Add(new Data { Name = "sdf" });
            ol.Order = comments;
            return ol.Order;
        }

       [CollectionDataContract]
       public class OrderList: List<Data>
       {
           [DataMember]
           public List<Data> Order{ get; set; }
       }

       [DataContract(Name = "Data")]
       public class Data
       {
           [DataMember]
           public string Name;
       }
   }
} 
```

这是我得到的输出

```
<ArrayOfData>
    <Data>
        <Name>sdf</Name>
    </Data>
    <Data>
        <Name>sdf</Name>
    </Data>
</ArrayOfData> 
```

我期望得到的是

```
<OrderList>
    <Data>
        <Name>sdf</Name>
    </Data>
    <Data>
        <Name>sdf</Name>
    </Data>
</OrderList> 
```

希望有人能告诉我我错过了什么。

编辑：如果我更改代码，所以我返回 orderlist obj 而不仅仅是订单*facepalm*

```
 OrderList test()
  {
        OrderList ol = new OrderList();
        List<Data> comments = new List<Data>();
        comments.Add(new Data { Name = "sdf" });
        comments.Add(new Data { Name = "sdf" });
        ol.Order = comments;
        return ol;
   }

[CollectionDataContract (Name = "OrderList")]
    public class OrderList: List<Data>
    {

       [DataMember]
       public List<Data> Order{ get; set; }

    } 
```

它仍然没有给我我所期望的它只是给了我以下内容：

```
<OrderList/> 
```

并且列表中没有任何元素，仍然有帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T13:13:55.287

尝试使用`Name property`.

```
 [CollectionDataContract(Name="OrderList")]
   public class OrderList: List<Data> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T13:13:39.813

设置 Name 和 ItemName 属性。请参阅[MSDN](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.collectiondatacontractattribute.aspx)。

# objective-c - 在 NSArray 中读取 MKMapViews 的注释

> ID：11207875
> 
> 赞同：0
> 
> 时间：2012-06-26T13:01:29.113
> 
> 标签：objective-c, xcode

我试图以这种方式在许多 MKMapViews 中找到注释的坐标：

```
NSMutableArray *latitudes = [NSMutableArray array];

for (MKMapView *map in MapViewArray)
{
  NSString *latitude = [NSString stringWithFormat:@"%.2f", [map.annotations lastObject].coordinate.latitude];                       
  [latitudes addObject: latitude];
}

NSMutableArray *longitudes = [NSMutableArray array];

for (MKMapView *map in MapViewArray)
{
     NSString *longitude = [NSString stringWithFormat:@"%.2f", [map.annotations lastObject].coordinate.latitude];

    [longitudes addObject: longitude];
} 
```

这段代码虽然给了我这个错误：

```
property 'coordinate' not found on object of type id 
```

我该如何解决？

数组中的地图视图属于这种类型：

```
@property (nonatomic, retain) IBOutlet MKMapView *mapView2; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T13:38:07.880

您必须指定 MKAnnotation 协议才能使其编译：

```
NSMutableArray *latitudes = [NSMutableArray array];
NSMutableArray *longitudes = [NSMutableArray array];

for (MKMapView *map in MapViewArray)
{
    id<MKAnnotation> annotation = [map.annotations lastObject];
    NSString *latitude = [NSString stringWithFormat:@"%.2f", annotation.coordinate.latitude];                       
    NSString *longitude = [NSString stringWithFormat:@"%.2f", annotation.coordinate.latitude];        
    [longitudes addObject: longitude];
    [latitudes addObject: latitude];
} 
```

我还优化了您的代码以仅使用一个循环。

# php - 我需要在我的 ajax 页面结果中添加分页

> ID：11207878
> 
> 赞同：1
> 
> 时间：2012-06-26T13:01:37.110
> 
> 标签：php, jquery, ajax

我为我的城市选项卡创建了 ajax 代码，以显示来自 ajax 的各个城市数据。

我使用了以下代码：

```
function showBrandData(str)
    document.getElementById("dvloader").style.display = 'block';                                
    jQuery('#txtDisplayBrands').slideDown("slow");

    if (str=="")
    {
        document.getElementById("txtDisplayBrands").innerHTML="";
        return;
    }
    if (window.XMLHttpRequest)
    {// code for IE7+, Firefox, Chrome, Opera, Safari
        xmlhttp=new XMLHttpRequest();
    }
    else
    {// code for IE6, IE5
        xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
    }

    xmlhttp.onreadystatechange=function()
    {
        if (xmlhttp.readyState==4 && xmlhttp.status==200)
        {
            document.getElementById("dvloader").style.display = 'none';
            document.getElementById("txtDisplayBrands").innerHTML=xmlhttp.responseText;
        }
    }
    xmlhttp.open("GET","http://localhost/demostore/getBrandData.php?q="+str+"&page=1",true);
    xmlhttp.send();
} 
```

以下是我加载以上 ajax 内容的 div

```
 <!-- div to display brands products -->
    <div id="txtDisplayBrands"></div> 
```

现在我使用以下 jquery 插件对我的项目进行分页 [http://cssglobe.com/post/9801/easy-paginate-jquery-plugin-for-pagination](http://cssglobe.com/post/9801/easy-paginate-jquery-plugin-for-pagination)

但是当我在我的 ajax 响应中使用它时，分页不起作用。

你能帮我看看我做错了什么吗？

感谢和问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T13:11:12.940

该站点的默认代码：

```
<script type="text/javascript">

  jQuery(function($){ 
  $('ul#items').easyPaginate();
  }); 

</script> 
```

在页面加载时调用。之后您的 ajax 调用将被执行，因此您需要在 ajax 调用中加载的元素上调用分页代码。

考虑在 if 语句中添加它 if (xmlhttp.readyState==4 && xmlhttp.status==200)

# android - 浮动片段

> ID：11207879
> 
> 赞同：2
> 
> 时间：2012-06-26T13:01:38.840
> 
> 标签：android, android-fragments

我正在尝试通过将其膨胀并使用 FragmentTransaction 将其添加到 Activity 来动态创建一个浮动片段。

当我将它添加到容器中（添加到我在容器中创建的 FrameLayout 中）时，它下面的所有部分都被向下推并且所有视图都发生了变化（我希望视图在有或没有片段的情况下看起来相同） .

我查看了 DialogFragment 的实现，它浮动并且不更改视图，我看到它使用：FragmentTransaction.add(int containerViewId...) 方法，其中 0 作为 containerViewId。在 Google 文档中，它只是写道：“如果为 0，则不会将其放入容器中”。当我将 0 放入 containerViewId 并从视图中删除 FrameLayout 时，片段没有出现。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T14:28:11.817

我认为您面临的问题来自这样一个事实，即您将浮动片段添加`FrameLayout`到已经存在的布局的子元素中，正如您已经看到的那样，它将修改当前布局以为新片段腾出空间。例如，如果您当前的布局是这样的（这只是一个示例）：

```
<LinearLayout>
    <FrameLayout android:id="@+id/here_add_floating_fragment"/>
    <the rest of the layout file with the content that should hold its position />
</LinearLayout> 
```

如果浮动片段被添加到`FrameLayout`像上面那样的布局中，那么其余的视图确实会被移动以腾出空间。

为防止这种情况，您必须修改布局，以便`FrameLayout`保持当前布局，如下所示：

```
<FrameLayout android:id="@+id/here_add_floating_fragment"> 
      <LinearLayout>
          <the rest of the layout file with the content that should hold its position />
      </LinearLayout>
</FrameLayout> 
```

现在，当您添加新片段时，当前片段`Views`将保持原位，片段将作为`FrameLayout`其子堆栈出现在上方。

# ruby-on-rails - 难道我们不能有更简单的redirect_to 参数吗？

> ID：11207881
> 
> 赞同：0
> 
> 时间：2012-06-26T13:01:50.853
> 
> 标签：ruby-on-rails, ruby

在学习 Rails 时，我在 Sam Ruby 的书中找到了这个例子：

**应用程序/控制器/line_items_controller.rb**

```
def create
        @cart = current_cart
        product = Product.find(params[:product_id])
        @line_item = @cart.line_items.build
        @line_item.product = product

        respond_to do |format|
          if @line_item.save
            # this following line is strange for me 
            format.html { redirect_to(@line_item.cart, :notice => 'Line item was successfully created.') }
            format.xml  { render :xml => @line_item, :status => :created, :location => @line_item }
          else
            format.html { render :action => "new" }
            format.xml  { render :xml => @line_item.errors,
              :status => :unprocessable_entity }
          end
        end
  end 
```

为什么不`redirect_to(@line_item.cart,...)`只是替换为的部分`redirect_to(@cart,...)`？

事实上，@cart 是一个可访问的实例变量。

`@line_item`在这个例子中我们是否被迫使用来检索购物车？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T13:09:55.233

此示例中是否涉及某种嵌套路由？你可以简单地做一个`redirect_to @cart`例子应该仍然有效。

试试看。但它应该根据我的理解工作。也许作者希望在他重定向到的购物车中更具表现力。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T14:14:07.850

在这些时候，我们必须假设作者试图传达，

**“保存此 line_item 后，转到具有此 line_item 的购物车”** => 可读性。

无论如何，一个好的代码应该提供两件事，

1.  可读性。
2.  未来修改的空间。

我从经验和现实中意识到它们的必要性。（不是书本）

得到正确的输出后可以考虑优化。

如我错了请纠正我。

# c# - 如何用 Unity 映射泛型类型？

> ID：11207886
> 
> 赞同：2
> 
> 时间：2012-06-26T13:01:59.237
> 
> 标签：c#, .net, dependency-injection, unity-container, ioc-container

我正在尝试使用 Unity Configuration 向类属性添加依赖项，并且我尝试注入的类型是通用的。

我有界面

```
public interface ISendMessage
{
    void Send(string contact, string message);
} 
```

班级

```
public class EmailService : ISendMessage
{
    public void Send(string contact, string message)
    {
        // do
    }
} 
```

班级

```
public class MessageService<T> where T : ISendMessage
{          
} 
```

我尝试通过其他类中的构造函数注入来使用它

```
public MyService(MessageService<ISendMessage> messageService)
{
} 
```

我如何注射`MessageService<EmailService>`而不是`MessageService<ISendMessage>`？

我尝试通过 app.config

```
<alias alias="MessageService'1" type="MyNamespace.MessageService'1, MyAssembly" />
    <alias alias="EmailMessageService'1" type="MyNamespace.MessageService'1[[MyNamespace.EmailService, MyAssembly]], MyAssembly" /> 
```

我收到错误

> 无法解析类型名称或别名 MessageService'1。请检查您的配置文件并验证此类型名称。

以及如何传入`MessageService<T>`实现参数`MessageService<EmailService>`？

谢谢

**更新**

我将我的课程修改为以下内容：

```
public class MessageService<T> where T : ISendMessage
    {
        private T service;

        [Dependency]
        public T Service
        {
            get { return service; }
            set { service = value; }
        }
} 
```

并使用配置

```
<alias alias="ISendMessage" type="MyNamespace.ISendMessage, MyAssembly" />
    <alias alias="EmailService" type="MyNamespace.EmailService, MyAssembly" />

<register type="ISendMessage" mapTo="EmailService">
        </register> 
```

有用 ：-）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-26T13:17:47.600

您不能简单地将 a`MessageService<ISendMessage>`转换为 a `MessageService<EmailService>`。为此，您需要`MessageService<T>`变体。仅接口（和委托）支持方差。这不是 Unity 的事情，这是 .NET 框架的“限制”（并且从 4.0 开始支持 C#）。所以需要实现如下接口：

```
// note the 'out' keyword!!
public interface IMessageService<out T> 
    where T : ISendMessage
{
    T GetSendMessage();
} 
```

该类`MessageService<T>`将必须实现此接口。但即使使用此代码，Unity 也不会自动注入此代码。您必须在这两种类型之间进行映射。例如，这是一个可能的注册：

```
container.Register<MessageService<ISendMessage>>(
    new InjectionFactory(c =>
        c.Resolve<MessageService<EmailService>>())); 
```

请注意，我使用基于代码的配置。尽可能避免使用基于 XML 的配置，因为 XML 配置脆弱、容易出错、功能较弱且难以维护。仅注册在部署期间或之后实际需要的类型（就个人而言，即使那样我也不会使用您的 DI 容器的 XML API）。

# jpa - 当目标具有复合键时@OneToMany 关系？

> ID：11207887
> 
> 赞同：2
> 
> 时间：2012-06-26T13:02:03.827
> 
> 标签：jpa, eclipselink

嗨，我想为我的一个项目建立一对多的关系，但从未填充过列表。

我有一个父源类

```
@Entity
@Inheritance(strategy=InheritanceType.TABLE_PER_CLASS)
public class ParentJob {
  @Id
  @Column(name = "ID")
  int id;
} 
```

一个孩子

```
@Entity
public class TakeJob extends ParentJob {
  @OneToMany(fetch = FetchType.EAGER, cascade=CascadeType.REMOVE)
  @JoinColumn(name="FK_JOBID", referencedColumnName="ID")
  private List<JobRelation> jobRelations;
} 
```

和目标实体

```
@Entity
public class JobRelation {
  @EmbeddedId
  private JobRelationPK JobRelationPK;
} 
```

有PK

```
@Embeddable
public class JobRelationPK implements Serializable {
  private long fkSomething;
  @Column(name = "FK_JOBID")
  private long fkJobId;
} 
```

现在正如我所说，如果我访问它，列表不会填充。我对 JoinColumn 的语法特别感兴趣，因为我为“名称”输入的内容并不重要，即使它完全是垃圾。我必须注意我放在那里的东西还是我可以放'name =“COLUMN_NAME_IN_JOBRELATION”'

编辑：我正在使用 EclipseLink 2.3.2

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T16:52:32.783

这里的问题可能与您期望如何设置 JobRelation 表的“FK_JOBID”字段有关。

您对其进行映射的方式使其可通过嵌入式 JobRelationPK 的 fkJobId 属性和 TakeJob 的 jobRelations 映射写入。如果您仅在 JobRelation 实体中设置它，那么 TakeJob 集合将仅在刷新时反映更改 - JPA 要求您维护关系，以便它们与数据库中的内容保持一致。这意味着您仍然必须将 JobRelation 添加到 TakeJob 的集合中，以便引用与数据库中的内容同步，或者在提交更改后刷新它。

但是因为您有两个到该字段的映射，所以需要将连接列设置为只读以避免写入问题。

更好的解决方案可能是在 JobRelation 上设置一个 ManyToOne 关系到 TakeJob，然后将 TakeJob 的 jobRelations 映射设置为由这个新映射映射（而不是使用 joincolumn）。如果使用 JPA 2.0，则可以将新映射指定为 @MapsId("fkJobId")。就像是：

```
@Entity public class JobRelation {
   @EmbeddedId
   private JobRelationPK JobRelationPK;
   @ManyToOne
   @MapsId("fkJobId")
   private TakeJob job;
 } 
```

这将允许在插入时使用来自引用的 TakeJob Id 的值设置嵌入的 fkJobId 属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T14:15:02.967

您首先应该在将注释放在实体层次结构中的位置上保持一致。始终将它们放在字段上，或始终将它们放在吸气剂上。您的 getter 上的注释将被忽略，因为 @Id 注释已放在`id`字段上。

修复此问题后，`name`in`@JoinColumn`必须是连接列的名称...。所以它必须是 JobRelation 表中列的名称，它是 TakeJob 表的外键。

# django - virtualenv 站点包目录未更新

> ID：11207890
> 
> 赞同：1
> 
> 时间：2012-06-26T13:02:21.843
> 
> 标签：django, virtualenv, pip, easy-install

我正在使用此处详细介绍的 virtualenv 设置[http://hackercodex.com/guide/python-install-django-on-mac-osx-lion-10.7/](http://hackercodex.com/guide/python-install-django-on-mac-osx-lion-10.7/)。它在我之前的项目中运行良好，并且在该环境中安装了任何依赖项。

现在，当我创建一个新的 virtualenv 并尝试安装 django 时，它说它已经安装了。

```
$ easy_install django
Searching for django
Best match: Django 1.4
Django 1.4 is already the active version in easy-install.pth

Using /Users/tharshan/sites/env/django_base/lib/python2.7/site-packages
Processing dependencies for django
Finished processing dependencies for django 
```

我应该解释一下 django_base 是另一个 virtualenv 的名称，它是我以前的项目。smpmc 是我的新项目的名称。它应该在 /Users/tharshan/sites/env/smpmc/lib/python2.7/site-packages 文件夹中安装站点包。

我确保也停用了我以前的环境，然后再激活这个。我似乎无法在此安装任何软件包，因为它似乎将所有安装重定向到我的旧项目。

一定是激活脚本中的某个错误？

后激活

```
proj_name=${VIRTUAL_ENV##*/}

# Add the active project to the PYTHONPATH
if [ -d ~/Sites/env/$proj_name/lib/python2.7/site-packages ]; then
  add2virtualenv ~/Sites/env/$proj_name/lib/python2.7/site-packages
fi

# "cd" into the virtualenv, or its "project" folder if there is one
if [ -d ~/Sites/env/$proj_name/project ]; then
  cd ~/Sites/env/$proj_name/project
else
  cd ~/Sites/env/$proj_name
fi 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T18:07:17.440

您是否在激活之前的 virtualenv 的情况下创建了新的虚拟环境？最好的办法是删除新 virtualenv 的 hole 文件夹并重新开始。尝试首先使用临时虚拟环境进行操作，并确保正确停用和激活所有虚拟环境。祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T21:40:34.227

还可以查看 virtualenvwrapper。它使使用 virtualenv 变得轻而易举。有一个很好的教程：http: [//jamiecurle.co.uk/blog/installing-pip-virtualenv-and-virtualenvwrapper-on-os-x/](http://jamiecurle.co.uk/blog/installing-pip-virtualenv-and-virtualenvwrapper-on-os-x/)

# c# - 向asp页面添加多个控件

> ID：11207891
> 
> 赞同：-1
> 
> 时间：2012-06-26T13:02:22.467
> 
> 标签：c#, asp.net, controls

单击按钮时，我正在尝试向页面添加一组控件。我需要多次添加同一组控件，可能是无限次。目前，添加控件按钮单击有效，当您单击它的第 2 次、第 3 次、第 4 次...等时，它无法正常工作。它覆盖并替换了页面上当前的控件，因此只显示了一组控件。

这是我创建和添加控件的代码，这发生在点击事件中

```
 Label contactTypeLabel = new Label();
        contactTypeLabel.Text = "Contact Type" + contactCount.ToString();
        contactTypeLabel.ID = "contactLabel" + contactCount.ToString();
        this.panelContacts.Controls.Add(contactTypeLabel);
        DropDownList contactTypeDropDownList = new DropDownList();
        //loading dropdown
        this.panelContacts.Controls.Add(contactTypeDropDownList);
        this.panelContacts.Controls.Add(new LiteralControl("<br />")); 
```

这是我的控件要添加到的面板..

```
<asp:UpdatePanel ID="UpdateContacts" runat="server">
                <ContentTemplate>
                    <asp:Panel ID="panelContacts" runat="server">

                    </asp:Panel>

                </ContentTemplate>
                <Triggers>
                    <asp:AsyncPostBackTrigger ControlID="btnAddContacts" EventName="Click" />
                </Triggers>
            </asp:UpdatePanel> 
```

**我最终做的是使用 jQuery 创建/删除控件。工作得更好，更容易！**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T13:08:19.883

我相信中继器将是您最好的选择。

[http://xaeryan.blogspot.ca/2009/09/dynamically-adding-removing-textboxes.html](http://xaeryan.blogspot.ca/2009/09/dynamically-adding-removing-textboxes.html)

它允许您动态添加所需的任何 asp.net 控件的新行。

希望这可以帮助，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T13:07:29.190

In every postback that happens when you click the button is recreating your page. You must keep the state of the page, by adding the controls in a list or something similar in session or viewstate.

So when pageload happens, you can add the controls again.

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-26T13:05:22.857

您需要了解 ASP.NET 的工作原理。这不是错误或类似问题，只是您不知道它是如何工作的。每次页面加载时，您都必须添加所有这些控件。您需要添加之前的那些人，以及“新”的人。你需要以某种方式保持一些状态

# browser - 打印预览注册商标特殊字符不加上标

> ID：11207894
> 
> 赞同：0
> 
> 时间：2012-06-26T13:02:24.603
> 
> 标签：browser, printing, special-characters, print-preview

注册商标特殊字符打印预览不上标

如何让它们在打印预览（和实际打印的页面）中显示上标？

qa.crfhealth.com

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T17:24:48.987

[http://qa.crfhealth.com](http://qa.crfhealth.com)页面在印刷版中不包含注册标志 ® 或商标标志 ™（可能是您所指的字符），因为它们仅出现在导航菜单中，其中被打印样式表规则省略。

例如，页面[http://qa.crfhealth.com/?q=solutions-services/ecoa-modalities](http://qa.crfhealth.com/?q=solutions-services/ecoa-modalities)甚至在印刷版中也包含注册标志。在屏幕上，这个角色几乎难以辨认；在打印预览中，它是一个大圆圈 R，几乎位于基线上。这是由打印样式表[http://qa.crfhealth.com/sites/all/themes/crf/css/print.css?m5kd7z](http://qa.crfhealth.com/sites/all/themes/crf/css/print.css?m5kd7z)引起的，差异是由于 Myriad 之间的风格差异（使用的嵌入字体屏幕）和 Arial（印刷版中使用的字体）。

如果由于营销或法律部门（唯一关心此类字符的人）的要求需要使用注册标志和商标标志，请询问他们希望它们如何显示，显示一些替代字形。然后使用 CSS 分别设置这些字符的字体。这意味着对于所有媒体都具有类似 CSS 代码（如果需要类似上标的外观）的看起来很傻的标记，`<span class=R>&reg;</span>`或者更老实说，`<font class=R>>&reg;</font>`带有类似 CSS 代码的标记。`.R { font-family: Calibri, Lucida Sans Unicode }`

# http - 负数组大小异常

> ID：11207897
> 
> 赞同：5
> 
> 时间：2012-06-26T13:02:39.333
> 
> 标签：http, post, blackberry, java-me

我是黑莓新手，我正在尝试将搜索词发布到 xml 中的服务器。但我不断收到此错误`Request Failed. Reason Java.lang.NegativeArraySizeException`。

我想在解析数据之前检查连接是否有效，所以从这个连接中，我期望接收到 xml 中的响应文本。下面是代码：

```
public void webPost(String word) {
    word = encode (word);
    String responseText;
    try{
        HttpConnection connection = (HttpConnection)Connector.open("http://some url.xml");
        connection.setRequestMethod(HttpConnection.POST);
        connection.setRequestProperty("Content-Type","application/x-www-form-urlencoded");
        String postData = "username=loginapi&password=myapilogin&term="+ word;
        connection.setRequestProperty("Content-Length",Integer.toString(postData.length()));
        connection.setRequestProperty("User-Agent","Profile/MIDP-2.0 Configuration/CLDC-1.0");
        OutputStream requestOut = connection.openOutputStream();
        requestOut.write(postData.getBytes());

        InputStream detailIn = connection.openInputStream();
        byte info[]=new byte[(int)connection.getLength()];
        detailIn.read(info);
        detailIn.close();
        requestOut.close();
        connection.close();
        responseText=new String(info);
        requestSuceeded(requestOut.toString(), responseText);
    }
    catch(Exception ex){
        requestFailed(ex.toString());
    }
}

private void requestSuceeded(String result, String responseText) {
    if(responseText.startsWith("text/xml")) { 
        String strResult = new String(result); 
        synchronized(UiApplication.getEventLock()) { 
            textOutputField.setText(strResult); 
        } 
    } else{ 
        synchronized(UiApplication.getEventLock()) { 
            Dialog.alert("Unknown content type: " + responseText); 
        } 
    } 
} 

public void requestFailed(final String message) { 
    UiApplication.getUiApplication().invokeLater(new Runnable() { 
        public void run() { 
            Dialog.alert("Request failed. Reason: " + message); 
        } 
    }); 
} 

private String encode(String textIn) {
     //encode text for http post
    textIn = textIn.replace(' ','+');
    String textout = "";
    for(int i=0;i< textIn.length();i++){
        char wcai = textIn.charAt(i);
        if(!Character.isDigit(wcai) && !Character.isLowerCase(wcai) && !Character.isUpperCase(wcai) && wcai!='+'){
            switch(wcai){
                case '.':
                case '-':
                case '*':
                case '_':
                    textout = textout+wcai;
                    break;
                default:
                    textout = textout+"%"+Integer.toHexString(wcai).toUpperCase();//=textout.concat("%").concat(Integer.toHexString(wcai));
            }
        }else{
            textout = textout+wcai;//=textout.concat(wcai+"");
        }
    }
    return textout;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T13:15:25.490

**connection.getLength()**正在返回**-1**。

在创建信息数组之前，请检查连接的长度。

```
int length = (int) connection.getLength();

if(length > 0){
     byte info[]=new byte[length];
     // perform operations

}else{
     System.out.println("Negative array size");
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T13:07:12.240

`connection.getLength()`当您尝试在此处初始化数组时，我假设返回 -1：

```
byte info[]=new byte[(int)connection.getLength()]; 
```

这就是 NegativeArraySizeException 的原因。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-26T13:08:43.300

我猜你什么时候做

```
byte info[]=new byte[(int)connection.getLength()]; 
```

InputStream 不知道它的长度，所以它返回 -1。

见[http://www.velocityreviews.com/forums/t143704-inputstream-length.html](http://www.velocityreviews.com/forums/t143704-inputstream-length.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-26T14:51:38.943

参考： http: [//supportforums.blackberry.com/t5/Java-Development/HttpConnection-set-to-POST-does-not-work/mp/344946](http://supportforums.blackberry.com/t5/Java-Development/HttpConnection-set-to-POST-does-not-work/m-p/344946)

Ref1：[Blackberry 发送 HTTPPost 请求](https://stackoverflow.com/questions/5005648/blackberry-send-a-httppost-request)

Ref2： http: [//www.blackberryforums.com/developer-forum/181071-http-post-passing-parameters-urls.html](http://www.blackberryforums.com/developer-forum/181071-http-post-passing-parameters-urls.html)

像这样的东西：

```
URLEncodedPostData postData = new URLEncodedPostData(URLEncodedPostData.DEFAULT_CHARSET, true); 
postData.append("name",name); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-27T11:46:28.247

找到了！我忘记打开输出流连接

`requestOut = connection.openOutputStream();`

我介绍了`ByteArrayOutpuStream` 它帮助我最终显示输入流。我也改变了发送参数的方式，改用`URLEncodedPostData`type 。由于服务器将我以前的请求解释为 GET 而不是 POST。而我现在要做的就是解析进来的信息。

```
try{
     connection = (HttpConnection)Connector.open("http://someurl.xml",Connector.READ_WRITE);
     URLEncodedPostData postData = new URLEncodedPostData(URLEncodedPostData.DEFAULT_CHARSET, false);
     postData.append("username", "loginapi");
     postData.append("password", "myapilogin");
     postData.append("term", word);

     connection.setRequestMethod(HttpConnection.POST);
     connection.setRequestProperty("Content-Type","application/x-www-form-urlencoded");
     connection.setRequestProperty("User-Agent","Profile/MIDP-2.0 Configuration/CLDC-1.0");
     requestOut = connection.openOutputStream();
     requestOut.write(postData.getBytes());
     String contentType = connection.getHeaderField("Content-type"); 
     detailIn = connection.openInputStream();         
     int length = (int) connection.getLength();
     ByteArrayOutputStream baos = new ByteArrayOutputStream(); 
     if(length > 0){
         byte info[] = new byte[length];
         int bytesRead = detailIn.read(info);
         while(bytesRead > 0) { 
             baos.write(info, 0, bytesRead); 
             bytesRead = detailIn.read(info); 
             }
         baos.close();
         connection.close();
         requestSuceeded(baos.toByteArray(), contentType);

         detailIn.read(info);
     }
     else
     {
          System.out.println("Negative array size");
     }
           requestOut.close();
           detailIn.close();
           connection.close();
    } 
```

PS。我发布了上面的代码来帮助任何有同样问题的人。

聚苯乙烯。我还使用了[Kalai 的格式](https://stackoverflow.com/a/11208116/839601)，它非常有用。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-11-21T08:12:17.847

java.lang.NegativeArraySizeException 表示您正在尝试初始化一个负长度的数组。

唯一初始化的代码是 -

```
byte info[]=new byte[(int)connection.getLength()]; 
```

您可能希望在初始化数组之前添加长度检查

# javascript - 从 iframe 更改父 URL

> ID：11207900
> 
> 赞同：56
> 
> 时间：2012-06-26T13:02:55.290
> 
> 标签：javascript, iframe, parent

需要帮助解决一个简单的问题！它具有以下标准：

1) 单击 iframe 更改父页面中的图像链接，单击另一个 iframe 图像链接将父更改为另一个页面（见下文）。

听起来可能很简单，但我已经用谷歌搜索了好几天，并查看了许多论坛。代码可以是 html css 或 js，但请尽可能简单地回答任何问题，并发布一个完整的工作示例，因为我是编码新手或重新编码测试站点： http: [//www.howiepotter.com/parent。 html](http://www.howiepotter.com/parent.html)

![在此处输入图像描述](../Images/fdb91d00cf9450936f293f29cdc78419.png)

* * *

## 回答 #1

> 赞同：83
> 
> 时间：2012-06-26T13:10:31.527

[http://reference.sitepoint.com/html/a/target](http://reference.sitepoint.com/html/a/target)

> “_最佳”
> 
> 加载顶级框架集中的内容（实际上是整个浏览器窗口），无论当前框架位于多少嵌套级别

```
<a href="page" target="_top">Replace parent url!</a> 
```

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2012-06-26T13:07:44.370

Change your link from this:

```
<a href="link-here.html"> 
```

To this:

```
<a href="#" onclick="top.window.location.href='yourURL';"> 
```

If you want, you could just put the `onclick` handler on the image instead and get rid of the anchor.

Note that this is not the correct place to have javascript (handlers should be bound from a .js file, not in markup), but i get the feeling you are looking for a surgical answer and don't care much for best practices.

edit: as Victor Nicollet pointed out, this will throw a security exception if your iframe and parent page do not share domains. see [http://en.wikipedia.org/wiki/Same_origin_policy](http://en.wikipedia.org/wiki/Same_origin_policy)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2020-06-25T13:58:22.933

就我而言，我使用了以下内容

```
if (window.self !== window.top) { // checking if it is an iframe
  window.parent.location.href = websiteUrl;
} else {
  window.location.href = websiteUrl;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-05-22T01:27:19.950

如果@biziclop 决定删除他的答案，因为他似乎威胁要在评论中这样做，这又是他的答案，非常有用：

[http://reference.sitepoint.com/html/a/target](http://reference.sitepoint.com/html/a/target)

> “_最佳”
> 
> 加载顶级框架集中的内容（实际上是整个浏览器窗口），无论当前框架位于多少嵌套级别

```
<a href="page" target="_top">Replace parent url!</a> 
```

# wso2 - wso2 carbon 是否支持 Excel 的参数？

> ID：11207903
> 
> 赞同：0
> 
> 时间：2012-06-26T13:03:01.283
> 
> 标签：wso2

我使用 wso2 carbon 从 excel 电子表格和 google 电子表格中获取数据，并且有 2 个问题。

1.  有没有办法将电子表格的位置/名称传递到服务中，这样它就不会被硬编码？

2.  有没有办法形成一个查询来过滤返回的数据（即，仅当 A 列的值为“yes”时才返回 B 列和 C 列）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T05:26:11.370

我相信您指的是 WSO2 数据服务服务器功能。请在下面找到我对您的问题的回答。

1.有没有办法将电子表格的位置/名称传递到服务中，这样它就不会被硬编码？

> > 数据服务的主要思想是将数据源公开为 Web 服务。例如，如果您采用电子表格等平面文件数据源，则电子表格被视为数据源，并且数据服务允许您将存储在电子表格中的所有数据公开为 Web 服务。因此，随着该概念的发展，您必须在数据服务中为每个电子表格配置数据源。但是，目前 WSO2 数据服务服务器为您提供了在同一个数据服务描述符文件（也称为 DBS 文件）中配置多个数据源的能力。因此，您可以配置包含多个电子表格的多个数据源。然后，您可以在配置查询时使用相关数据源。

1.  有没有办法形成一个查询来过滤返回的数据（即，仅当 A 列的值为“yes”时才返回 B 列和 C 列）？

> > 目前，我们不通过 WSO2 DSS 版本 2.6.3 和之前的版本提供此功能。但是，这将在我们将于本月初发布的最新版本 (DSS 3.0.0) 中提供。有了它，您将能够以类似 SQL 的方式查询 Excel 或 Google 电子表格。

希望这可以帮助！

问候， 普拉巴斯

# c# - 缺少 Html 实体解码支持 C# WPF 中的 BY NAME 用于特殊字母/字符

> ID：11207911
> 
> 赞同：3
> 
> 时间：2012-06-26T13:03:33.613
> 
> 标签：c#, .net, wpf, html-entities

我在解码 HTML 实体时遇到问题。我试过同时使用

```
System.Net.WebUtility.HtmlDecode() 
```

并希望这仅仅是因为这是 HttpUtilities 的轻量级版本，我尝试过

```
HttpUtility.HtmlDecode() 
```

也是。

我的问题是我需要从实体名称解码，而不是实体编号。（请参阅此列表[http://www.w3schools.com/tags/ref_entities.asp](http://www.w3schools.com/tags/ref_entities.asp)）

上述两种方法都解码实体编号，而不是实体名称。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T13:22:41.717

我真的没有看到你的问题。如果我通过 测试解码`WebUtility.HtmlDecode`，则您发布的链接中列出的所有实体名称都将被解码：

```
var encoded = "&quot;&apos;&amp;&lt;&gt;&iexcl;&cent;&pound;&curren;" +
              "&yen;&brvbar;&sect;&uml;&copy;&ordf;&laquo;&not;&shy;&reg;" +
              "&macr;&deg;&plusmn;&sup2;&sup3;&acute;&micro;&para;&middot;" +
              "&cedil;&sup1;&ordm;&raquo;&frac14;&frac12;&frac34;&iquest;" +
              "&times;&divide;&Agrave;&Aacute;&Acirc;&Atilde;&Auml;&Aring;" +
              "&AElig;&Ccedil;&Egrave;&Eacute;&Ecirc;&Euml;&Igrave;&Iacute;" +
              "&Icirc;&Iuml;&ETH;&Ntilde;&Ograve;&Oacute;&Ocirc;&Otilde;" +
              "&Ouml;&Oslash;&Ugrave;&Uacute;&Ucirc;&Uuml;&Yacute;&THORN;" +
              "&szlig;&agrave;&aacute;&acirc;&atilde;&auml;&aring;&aelig;" +
              "&ccedil;&egrave;&eacute;&ecirc;&euml;&igrave;&iacute;&icirc;" +
              "&iuml;&eth;&ntilde;&ograve;&oacute;&ocirc;&otilde;&ouml;" +
              "&oslash;&ugrave;&uacute;&ucirc;&uuml;&yacute;&thorn;&yuml;";
var expected = "\"'&<>¡¢£¤¥¦§¨©ª«¬­®¯°±²³´µ¶·¸¹º»¼½¾¿×÷ÀÁÂÃÄÅÆÇÈÉÊËÌÍÎÏÐÑÒÓ" +
                "ÔÕÖØÙÚÛÜÝÞßàáâãäåæçèéêëìíîïðñòóôõöøùúûüýþÿ";

Console.WriteLine(System.Net.WebUtility.HtmlDecode(encoded) == expected); 
```

这个小片段产生真实的。

在*编码*方面：该`HtmlEncode`功能实现为以这种方式工作。除了自己实施之外，您几乎无能为力，我不建议这样做（如果您真的不需要，请不要重新发明轮子）。另请参阅有关编码的 SO 问题：[C# HtmlEncode - ISO-8859-1 Entity Names vs Numbers](https://stackoverflow.com/questions/4853920/c-sharp-htmlencode-iso-8859-1-entity-names-vs-numbers)

# jquery - 使用Jquery通过数组中的值索引并将属性应用于元素

> ID：11207920
> 
> 赞同：1
> 
> 时间：2012-06-26T13:04:00.337
> 
> 标签：jquery

我想添加与数组匹配的元素的 rel 属性，例如数组是：

```
var targetVal = ['1','2','4']; 
```

和5个具有相同类的元素：

```
<a class="link" href="1.html">
<a class="link" href="2.html">
<a class="link" href="3.html">
<a class="link" href="4.html">
<a class="link" href="5.html"> 
```

我想用 rel 属性定位第 2、3 和 5 行。

```
 $(".link").each(function(index) {
       $(this).attr("rel", "group");
    }); 
```

如何根据数组制作上述脚本索引？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T13:07:38.340

您可以使用[$.each()](http://api.jquery.com/jQuery.each/)来遍历您的数组，并使用[eq()](http://api.jquery.com/eq/)来获取特定索引处的链接：

```
var $links = $(".link");
$.each(targetVal, function(value) {
    $links.eq(value).attr("rel", "group");
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T13:09:48.397

```
var targetVal = ['1','2','4'];

$.each(targetVal, function(index, val) {
       console.log(val);
       $('.link').eq(val).attr("rel", "group");
}); 
```

jsFiddle 示例[http://jsfiddle.net/roXon/T7zR8/](http://jsfiddle.net/roXon/T7zR8/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T13:22:09.773

这将是更优化的，只评估一次链接集，并直接访问该列表而不是使用`.eq()`：

```
var targetVal = [1, 2, 4];
var links = $('.link');
$.each(targetVal, function(i, n) {
    links[n].setAttribute('rel', 'group');
}); 
```

或者，在较新的浏览器上，并且没有 jQuery：

```
var targetVal = [1, 2, 4];
var links = document.querySelectorAll('.link');
while (targetVal.length) {
    links[targetVal.pop()].setAttribute('rel', 'group');
} 
```

# c# - RavenDB 使用 StartsWith 搜索多个术语中的每一个

> ID：11207932
> 
> 赞同：7
> 
> 时间：2012-06-26T13:04:49.697
> 
> 标签：c#, linq, ravendb

当在编译时不知道术语时，是否有推荐的方法来使用 StartsWith 搜索多个术语中的每一个？

我设想这样的事情：

```
var searchTerms = "John Doe".Split(new[] { ' ' }, StringSplitOptions.RemoveEmptyEntries);
var query = session.Query<Person, PersonIndex>()
                   .Where(x => x.FirstName.StartsWithAnyOf(searchTerms) ||
                               x.LastName.StartsWithAnyOf(searchTerms)); 
```

该查询相当于：

```
var query = session.Query<Person, PersonIndex>()
                   .Where(x => x.FirstName.Starts(searchTerms[0]) ||
                               x.LastName.StartsWith(searchTerms[0]) ||
                               x.FirstName.Starts(searchTerms[1]) ||
                               x.LastName.StartsWith(searchTerms[1])); 
```

是在运行时（PredicateBuilder 或类似）构建 LINQ 查询的答案吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-29T18:51:54.133

使用 LuceneQuery（可能需要使用子条款，具体取决于您在做什么）：

```
var searchTerms = "John Doe".Split(new[] { ' ' }, StringSplitOptions.RemoveEmptyEntries);

var query = session.Advanced.LuceneQuery<Person, PersonIndex>();
query = query.OpenSubclause(); // optional

foreach (var term in terms)
{
    query = query.WhereStartsWith("FirstName"), term).OrElse();
    query = query.WhereStartsWith("LastName"), term).OrElse();
}

query = query.WhereEquals("Id", null);
query = query.CloseSubclause(); // if OpenSubclause() was used 
```

如果您想要强类型变量名称，请查看以下答案：[https ://stackoverflow.com/a/301957/941536](https://stackoverflow.com/a/301957/941536)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T06:52:30.310

你想做什么？您可能最好使用分析字段，然后发出 a`.Search`而不是 a `.Where`。

# java - playframework 2.0-java 中的日期在表单中给出了无效值

> ID：11207933
> 
> 赞同：2
> 
> 时间：2012-06-26T13:04:53.440
> 
> 标签：java, forms, date, playframework-2.0

我有一个我定义的表格：

```
@Required
@Formats.DateTime(pattern="dd/MM/yyyy")
    public Date mDate; 
```

现在我的模板中有：

```
@helper.inputDate(
                myForm("mDate")
        ) 
```

但是当我提交表单时，我收到一个错误值无效。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-08T19:02:55.477

这真的很晚，但希望它对偶然发现这个问题的人有所帮助。

如果您进入 chrome dev tools 或 firebug，当显示错误消息时您会看到如下内容：

```
<input type="date" id="start" name="start" value="2013-12-31"> 
```

这意味着发送回服务器的格式是 yyyy-MM-dd 而不是 dd/MM/yyyy。

将模型字段装饰器更改为：

```
@Required
@Formats.DateTime(pattern = "yyyy-MM-dd")
    public Date mDate; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-11T19:11:25.253

检查 mDate 字段的类型。一定是`java.util.Date`，不是`java.sql.Date`。

# javascript - jqplot 单个点标签

> ID：11207939
> 
> 赞同：2
> 
> 时间：2012-06-26T13:05:25.683
> 
> 标签：javascript, jqplot

我想为每个条设置不同的 pointLabel 设置，所以如果一个值像 1 一样小，它将显示位置：'e' 而不是位置：'w'。我正在尝试以下...

```
series: [{pointLabels: {show: true, location: 'e'}},
         {pointLabels: {show: true, location: 'w'}}] 
```

只是作为一个测试，但它似乎不起作用。我应该删除 seriesDefaults 块吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T14:08:39.447

按照您尝试的方式，它应该可以正常工作。不用担心`seriesDefaults`它的设置会被`series`. [这是展示它工作的代码示例。](http://jsfiddle.net/Boro/CxsXk/18/)在示例中，四个图表标签被设置为显示在不同的位置。

*如果您仍然有问题，请构建一个展示问题的示例，例如，在[http://jsfiddle.net](http://jsfiddle.net)上，以便我们看到它。*

# java - 启用/禁用另一个类的表单按钮

> ID：11207940
> 
> 赞同：0
> 
> 时间：2012-06-26T13:05:26.817
> 
> 标签：java, swing, jframe, jbutton

您好，我的问题是：我无法启用另一个类的表单按钮。我的表单类是

```
public class FileSending {
   //Function for enabling the button 
   public void activate_btnSEND (boolean flag) {
       SendFile.setEnabled(flag);      
   }    
} 
```

我调用这个函数的类如下：

```
public class SMS {
   Public void split(){
      if(check_string.equalsIgnoreCase("0001"))  {                
           JOptionPane.showMessageDialog(null, " Recepient Has Accepted The" +
                                " Request.Connection Has Been Established :) ");  
           FileSending setBtn = new FileSending();
           setBtn.activate_btnSEND(true);               
      }
   }
} 
```

我调试了代码以检查传递给 flag 的值，该值为*"True"*。它也进入 if 条件，但未启用 Button。我不明白这里发生了什么！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T18:10:31.170

检查您是否创建了多个 FileSending 类的对象...。您不能创建多个该类的对象...检查一个对象是否创建为您的 GUI 类的一部分，而另一个对象是 SMS 的一部分班级..

仅使用 FileSending 类的一个对象

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T13:14:49.863

您的代码中的一些要点：

1.  首先，您正在启用/禁用，如果标志为真，则使其可见。你应该使用[`setEnabled(b)`](http://docs.oracle.com/javase/7/docs/api/java/awt/Component.html#setEnabled%28boolean%29)，所以`SendFile.setVisible(true);`会变成`SendFile.setEnabled(true);`
2.  **永远不要**像这样比较布尔值`if(flag == true)`，它应该只是`if(flag)`
3.  你的方法应该是这样的：

    ```
    public void changeStateOfButton (boolean flag) {
    //now what ever you pass will decide whether to enable or disable the button.
      myButton.setEnabled(flag); 
    } 
    ```

4.  或者更好的是，您应该将[JToggleButton](http://docs.oracle.com/javase/7/docs/api/javax/swing/JToggleButton.html)用于此类事情。

5.  还可以提高您的变量命名技巧。

* * *

我所说的一个小例子：

```
public class TestButtonEnable {
  public static void main(String[] args) {
      JFrame frame = new JFrame("TestButtonEnable");
      frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
      frame.setSize(200, 200);
      frame.setLayout(new BorderLayout());
      JButton button = new JButton("Enable that button");
      final MyPanel panel = new MyPanel();
      button.addActionListener(new ActionListener() {
          @Override
          public void actionPerformed(ActionEvent e) {
              JOptionPane.showMessageDialog(null, "Some message. :)");
              panel.changeStateOfButton(true); // call second class method here
          }
      });
      frame.add(button, BorderLayout.NORTH);
      frame.add(panel, BorderLayout.SOUTH);
      frame.setVisible(true);
  }
} 
```

第二类包含 jbutton：

```
class MyPanel extends JPanel {
    private JButton button;
    public MyPanel() {
        button = new JButton("Enable me");
        button.setEnabled(false); // disabled by default
        this.add(button);
    }
    public void changeStateOfButton (boolean flag) {
        button.setEnabled(flag); 
    }
} 
```

# django - 使用 Komodo IDE 7 调试 django 不会在断点处中断

> ID：11207941
> 
> 赞同：0
> 
> 时间：2012-06-26T13:05:27.770
> 
> 标签：django, komodo

我将 Komodo IDE 7 与使用 Python27 的 Django 1.4 一起使用。

我一直在使用 Komodo IDE 7 的远程调试选项，但它似乎没有响应我的断点。如果我打破我的模型 decleration/setting.py 它确实是第一次中断，但它似乎在第一次初始化后“断开连接”。

我正在运行调试器的命令是：

```
set KOMODO_PATH="%ProgramFiles%\ActiveState Komodo IDE 7\lib\support\dbgp\bin"
c:\python27\python %KOMODO_PATH%\pydbgp.py -d localhost:9000 manage.py runserver --noreload 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T13:01:11.980

发现这是 Komodo 7.02 中的一个错误。似乎 Django 1.4 使用了与 Komodo 不兼容的多线程机制。

提交了一个错误，但有一段时间有一个解决方法：在启动 manage.py 时使用 --nothreading。

但是，它似乎对性能影响很大！

# php - 动态设置 PayPal 标题文本？

> ID：11207943
> 
> 赞同：1
> 
> 时间：2012-06-26T13:05:30.960
> 
> 标签：php, paypal, paypal-sandbox

我在我的网站中的一个名为商店的部分中进行贝宝集成，用户可以从我的商店出售他的产品。当客户在我的网站上从他的商店购买东西时，我正在存储我的卖家的贝宝账户直接向他付款。是否有任何 PayPal 变量，如**cpp_header_image**（用于将图像作为标题发送）来发送应显示在结帐页面中的文本。

**注意：**我传递的卖家电子邮件 ID 不是我的（因为每个卖家都有自己的 Paypal Business 电子邮件 ID）？

# css - 自定义背景图片

> ID：11207947
> 
> 赞同：0
> 
> 时间：2012-06-26T13:05:47.943
> 
> 标签：css, background

如何在 css 中创建这样的背景（中间和最后一个块具有流体高度）：

![bg](../Images/cc431861bbb7e1db287a7dd084b4ad3d.png)

有什么好的教程吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T13:16:31.673

您将制作顶部和底部`div`元素并将它们的 css 设置如下：

```
#topBGDiv 
{
    width: 100%;
    height: 125px; // Make this the height of the background image in pixels
    background-image: url('dark-gray-ribbon.jpg');
    background-repeat: repeat-x;
    overflow: hidden;
}

#bottomBGDiv 
{
    width: 100%;
    height: 110px; // Make this the height of the background image in pixels
    background-image: url('light-gray-ribbon.jpg');
    background-repeat: repeat-x;
    overflow: hidden;
} 
```

使用这样的图像作为顶部的背景图像：

![在此处输入图像描述](../Images/69e7f4949f2a6f4024ac51ecf8e2a82a.png)

底部是这样的：

![在此处输入图像描述](../Images/25ae8485a59b5d3499a36e1207f43e4a.png)

最后，将页面背景颜色的 CSS 设置为中间颜色。所以，像这样：

```
body
{
    background-color: #C0C0C0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T13:27:00.637

你可以这样写：

```
#top,#bottom
{
    height: 110px; // Make this the height of the background image in pixels
    background: url('BG.jpg') repeat-x left top;
}

#bottom
{
    background-position:left bottom;
} 
```

# javascript - GetElementById 在 iframe 中形成“主”

> ID：11207948
> 
> 赞同：0
> 
> 时间：2012-06-26T13:05:53.057
> 
> 标签：javascript, iframe, master-pages

好的，这是在 javascript 中，所以我在母版页的内容占位符中有一个 iframe。像这样的东西。

1-MasterPage

2-contentePlaceHolder

3-iframe

当我在 iframe 中时，如何从 masterPage 获取带有“GetElementById”的控件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T13:08:14.400

不幸的是，你不能。您的 iFrame 不知道持有它的母版页。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T13:15:02.680

如果您的父页面和 iframe src 都在同一个域上，那么使用[JQuery](http://www.jquery.com)您可以从 iframe 的 src 页面执行以下操作：

`$(parent.document).find('#myElement').hide('slow');`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T13:39:41.037

试试这个：
假设 masterpage 和 iframe src 属于同一个域，假设你在 iframe 中有一个按钮，在该按钮的 'onclick' 事件上编写以下代码：

```
var P = parent.document.getElementById("element_id") ; 
```

# symfony - 删除 OneToOne 单向关系

> ID：11207949
> 
> 赞同：2
> 
> 时间：2012-06-26T13:05:56.140
> 
> 标签：symfony, doctrine-orm

我有一个名为 Upload 的实体和另一个名为 Shop

商店只能上传一个

```
class Shop
{
    /**
     * @var integer $id
     *
     * @ORM\Column(name="id", type="integer")
     * @ORM\Id
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    private $id;

    /**
     * @var Upload
     *
     * @ORM\OneToOne(targetEntity="Vendor\SystemBundle\Entity\Upload",cascade={"all"})
     */
    private $myfile;
}

class Upload
{
    /**
     * @var integer $id
     *
     * @ORM\Column(name="id", type="integer")
     * @ORM\Id
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    private $id;

    /**
     * @var string $name
     *
     * @ORM\Column(name="name", type="string")
     */
    private $name;

    /**
     * @var string $path
     *
     * @ORM\Column(name="path", type="string")
     */
    private $path;

    /**
     * @var string $uniqId
     *
     * @ORM\Column(name="uniqId", type="string", nullable=true)
     */
    private $uniqId;

    /**
     * @var integer $size
     *
     * @ORM\Column(name="size", type="integer", nullable=true)
     */
    private $size;

    /**
     * @var string $extension
     *
     * @ORM\Column(name="extension", type="string", nullable=true)
     */
    private $extension;
} 
```

！因为我的类 Shop 是自动生成的，所以我无法在我的类上传中指定关系

有没有办法删除关系并删除相应的项目。

现在，如果我想删除我的实体上传，它说我有一个外键约束（这是正常的），所以我试图直接从 Shop 中删除关系，但我不知道该怎么做

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T20:41:09.550

你是用`php app/console doctrine:generate:entity`命令生成的吗？

如果要删除关系，请删除部分

```
/**
 * @var Upload
 *
 * @ORM\OneToOne(targetEntity="Vendor\SystemBundle\Entity\Upload",cascade={"all"})
 */
private $myfile; 
```

然后做

```
php app/console doctrine:generate:entities Your\Entity\Path\
php app/console doctrine:schema:update --force 
```

所以它重新创建了getter和setter并从数据库中删除了约束

# xslt - 图像到 xslt 中的 base64

> ID：11207950
> 
> 赞同：0
> 
> 时间：2012-06-26T13:06:04.567
> 
> 标签：xslt

我需要将图像转换为 base64binary 内容。我们可以在 xslt 中做到这一点吗？我能够使用 saxon:string-to-base64Binary 扩展函数将字符串转换为 base64。但是如何将图像转换为base64。任何人都可以帮助解决这个问题。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T13:29:38.867

没有内置函数或 Saxon 扩展函数可以做到这一点。您必须编写自己的扩展函数。

# perl - 这个与 Lucene 相关的代码实际上是做什么的？

> ID：11207952
> 
> 赞同：0
> 
> 时间：2012-06-26T13:06:09.293
> 
> 标签：perl, lucene

```
 #usr/bin/perl
 use Plucene::Document;
 use Plucene::Document::Field;
 use Plucene::Index::Writer;
 use Plucene::Analysis::SimpleAnalyzer;
 use Plucene::Search::HitCollector;
 use Plucene::Search::IndexSearcher;
 use Plucene::QueryParser;

 my $content = "I am the law";
 my $doc = Plucene::Document->new;
 $doc->add(Plucene::Document::Field->Text(content => $content));
 $doc->add(Plucene::Document::Field->Text(author => "Philip Johnson"));

 my $analyzer = Plucene::Analysis::SimpleAnalyzer->new();
 my $writer = Plucene::Index::Writer->new("my_index", $analyzer, 1);
 $writer->add_document($doc);
 undef $writer; # close

 my $searcher = Plucene::Search::IndexSearcher->new("my_index");

 my @docs;
 my $hc = Plucene::Search::HitCollector->new(collect => sub {
         my ($self, $doc, $score) = @_;
         push @docs, $searcher->doc($doc);
 });

 $searcher->search_hc($query => $hc); 
```

尽我所能，我不明白这段代码的作用。我了解熟悉的 Perl 语法以及在这方面发生了什么……但什么是 Lucene 文档、Index::Writer 等？最重要的是，当我运行这段代码时，我希望会生成一些东西……但我什么也看不到。

我知道分析器是什么...感谢在 CPAN 中链接的此文档：http: [//onjava.com/pub/a/onjava/2003/01/15/lucene.html](http://onjava.com/pub/a/onjava/2003/01/15/lucene.html?page=2) ?page=2 。但我只是不明白为什么我运行这段代码而且它似乎没有做任何事情......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T13:49:12.003

你从哪里得到这个代码？它是POD 文档开头*概要*中代码的副本。[`Plucene`](https://metacpan.org/module/Plucene)

我想这是有人开始学习的尝试`Plucene`。模块概要中的代码并不一定意味着自己实现有用的东西。

正如您所指的文档所述，*Lucene 是一个 Java 库，可为应用程序添加文本索引和搜索功能。它不是一个可以下载、安装和运行的完整应用程序。*

你从哪里得到应该运行你展示的代码的想法？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T14:02:36.290

Lucene 是一个搜索引擎，旨在非常快速地搜索大量文本。

我的 perl 不强，但从我对 Lucene 对象的理解来看：

```
my $content = "I am the law";
my $doc = Plucene::Document->new;
$doc->add(Plucene::Document::Field->Text(content => $content));
$doc->add(Plucene::Document::Field->Text(author => "Philip Johnson")); 
```

这部分创建一个新的文档对象并向其添加两个文本字段，内容和作者，以准备将其作为可搜索数据添加到 lucene 索引文件中。

```
my $analyzer = Plucene::Analysis::SimpleAnalyzer->new();
my $writer = Plucene::Index::Writer->new("my_index", $analyzer, 1);
$writer->add_document($doc);
undef $writer; # close 
```

这部分创建索引文件并添加先前创建的文档来执行该索引。此时，您的应用程序目录中应该有一个“my_index”文件夹，其中包含多个索引文件，其中包含文档数据作为可搜索文本。

```
my $searcher = Plucene::Search::IndexSearcher->new("my_index");

my @docs;
my $hc = Plucene::Search::HitCollector->new(collect => sub {
       my ($self, $doc, $score) = @_;
       push @docs, $searcher->doc($doc);
});

$searcher->search_hc($query => $hc); 
```

这部分尝试在上面创建的索引文件中搜索您刚刚用于创建索引文件的相同文档数据。据推测，此时您将在 @docs 中获得搜索结果，您可能希望将其显示给用户（但在此示例中不是）。

这似乎是一个在 perl 中使用 Lucene 的“hello world”应用程序。在现实生活中的应用程序中，我没有看到您会创建索引文件然后从同一段代码中搜索它的场景。

# clojure - 在 Clojure 中为 Java 互操作创建 Java 枚举

> ID：11207954
> 
> 赞同：4
> 
> 时间：2012-06-26T13:06:20.307
> 
> 标签：clojure, clojure-java-interop

我不知道如何在 Clojure 中创建 Java 枚举。我想创建一个使用 Java 接口的 Java 枚举，然后将其传递给 Java 方法，这一切都在 Clojure 中。我想这样做以使用 neo4j 图形库（我不想使用某人的预建界面，我想编写自己的互操作代码）。

我在互联网上搜索，看起来我可以使用代理方法，但我一辈子都无法让它工作。这是我需要在 Clojure 中编写的等效 Java 代码：

```
private static enum RelTypes implements RelationshipType
{
    KNOWS
} 
```

这是我的尝试（这是不对的：（）：

```
(proxy [org.neo4j.graphdb.RelationshipType] [] (KNOWS)) 
```

我还想知道是否有一个好的网站可以记录我所缺少的此类内容。我知道 Clojure 站点上的 Clojure 文档，这确实很有用，但例如使用示例，我并不总是能找到我需要的东西。也许我需要一本好的参考书？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-26T13:27:30.187

为什么不直接在 Java 中创建枚举？有时回到 Java 是最简单的答案。

这是一个[非常古老的线程](http://markmail.org/message/zatkdrrunyp4mhpv)，关于使用代理来定义 Rich Hickey 和 Stuart Sierra 的枚举以及使用[gen-class](http://clojure.org/compilation)的一些替代方案。我认为代理路径应该适合您：

```
(proxy [Enum org.neo4j.graphdb.RelationshipType] [ "KNOWS" 1 ]) 
```

但这不会生成您希望外部 Java 用户使用的任何内容，在这种情况下，gen-class 可能是更好的解决方案。

# c++ - 错误：从 'char*' 转换为 'unsigned int' 失去精度

> ID：11207956
> 
> 赞同：1
> 
> 时间：2012-06-26T13:06:34.870
> 
> 标签：c++, c, pointers

我正在编译一个代码，这给了我以下函数的错误：

```
inline char *align(char *var, DataType_e type)
{
    return (DataTypeSize[type] == 0) ? var :
        (char*) (((unsigned int)(var) + DataTypeSize[type]-1) /
                 DataTypeSize[type] * DataTypeSize[type]);
} 
```

以下错误符合 "(unsigned int)(var)" ：

```
error: cast from 'char*' to 'unsigned int' loses precision 
```

如果我将“unsigned int”更改为“unsigned long”，编译工作但我在运行程序时没有得到预期的结果。关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T13:37:16.690

在 C中，`[u]intptr_t`如果您需要将指针转换为整数类型，则应该使用（但首先应该避免）。

如果它们存在，则保证这些类型不会丢失信息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-26T13:50:03.810

该`uintptr_t`类型与指向 POD 的指针大小相同。指向其他数据类型的指针，尤其是指向成员函数的指针，可以更大。

```
inline char *align(char *var, DataType_e type)
{
    size_t alignSize = DataTypeSize[type];

    if (1 >= alignSize) {
        return var;
    }

    uintptr_t varInt = reinterpret_cast<uintptr_t>(var);
    varInt = alignSize * ((varInt + alignSize - 1) / alignSize);

    return reinterpret_cast<char *>(varInt);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T13:16:37.533

当您要使用指针进行数学运算时，您应该使用指针算术而不是将指针值转换为“int”或“long”，计算并转换回指针。这很容易产生不好的结果，因为编译器不能遵守计算的对齐规则。

我很确定您示例中函数的“意外”结果与演员阵容完全无关。您应该更多地解释使用这些`DataSize[type]`值完成的计算以及您想用它实现什么。

# java - JFreeChart : Zoom-in for domain axis is not working when CategoryAxis is used

> ID：11207957
> 
> 赞同：0
> 
> 时间：2012-06-26T13:06:36.880
> 
> 标签：java, jfreechart

I am using jfreechart library to draw a series chart. I have taken values on y-axis, time on x-axis and 3 categories as series. Everything is fine but I'm not able to zoom-in domain axis although it's working fine for range axis. Is this possible?

Following lines of code may help you to find some scenario of my code:

```
final ChartPanel chartPanel = new ChartPanel(chart);
chartPanel.setDomainZoomable(true);
chartPanel.setRangeZoomable(true);
this.add(chartPanel, BorderLayout.CENTER); 
```

and

```
//set plot specifications 
final CategoryPlot plot = (CategoryPlot) chart.getPlot();
plot.setBackgroundPaint(new Color(0xffffe0));
plot.setDomainGridlinesVisible(true);
plot.setDomainGridlinePaint(Color.lightGray);
plot.setRangeGridlinePaint(Color.lightGray);

//CUSTOMIZE DOMAIN AXIS
final CategoryAxis domainAxis = (CategoryAxis) plot.getDomainAxis();

//customize domain label position
domainAxis.setCategoryLabelPositions(
       CategoryLabelPositions.createUpRotationLabelPositions(Math.PI / 6.0)
); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T15:23:39.753

看起来您使用的`CategoryPlot`是不支持在域范围内缩放的

![在此处输入图像描述](../Images/ea7b1d0950cb3c825bdca26f506a2539.png)

`XYPlot`如果您正在使用图表工厂，要允许缩放域轴切换到 a ，代码是

```
JFreeChart chart = ChartFactory.createXYLineChart(...); 
```

如果您能够将情节投射到`CategoryPlot`出现问题的地方。我已经检查过`LineChartDemo3` ，这段代码会导致错误（`java.lang.ClassCastException`）：

```
try {
        final CategoryPlot cplot = (CategoryPlot) chart.getPlot();
    } catch (Exception e) {
        e.printStackTrace();
    } 
```

# linux - Paintevent Consuming Huge amount of CPU in Qt

> ID：11207958
> 
> 赞同：3
> 
> 时间：2012-06-26T13:06:38.893
> 
> 标签：linux, qt, cpu-usage, repaint, qpainter

I have a problem with Paintevent in Qt. Paintevent thread is utilizing almost all amount of CPU when started.

Code in constructor of my main widget.

```
Display_dialog::Display_dialog(QWidget *parent):QDialog(parent),
ui(new Ui::Display_dialog)
{
     ui->setupUi(this);
     pRedraw_Timer = new QTimer(this);
     connect( pRedraw_Timer, SIGNAL(timeout()), this, SLOT(update()));
     pRedraw_Timer->start( 15 );
} 
```

And in my paintevent,

```
 void MyDialog::paintEvent(QPaintEvent *event)
 {
 } 
```

Nothing at all in Paintevent!!!But running this piece of code consumes 100% of CPU [`CPU is Single core 1 Ghz Processor`].

And when I stop(`pRedraw_Timer->stop()`) this pRedraw_Timer which calls update, for ex: On a button click the usage comes down to 1% or under 10% almost instantly!!!!

My requirement is plotting a graph depending upon input from serial port. So i need to constantly update the view using update. But while plotting, any interrupt(high priority) seems to disturb the plotting, as cpu switches for handling the interrupt. After handling interrupt, plotting comes back to normal. My question is how and why is this paintevent thread consuming 100% CPU even if its not doing anything at all. How can I change this Scenario?

**EDIT**(for kuba ober): Well there are several other functions and slots. But nothing is invoked unless I call it or Trigger a Signal. I am not doing anything at all. Just after running the program, it consumes all cpu. Remember only constructor of main dialog is called.

# javascript - How to merge objects attributes from reduce to rereduce function in CouchDB

> ID：11207961
> 
> 赞同：1
> 
> 时间：2012-06-26T13:07:01.903
> 
> 标签：javascript, views, couchdb, reduce

This is my JSON schema:

```
{"emp_no": ..,
"salary": ..,
"from_date": ..,
"to_date": ..,
"type" : "salaries"}

{"emp_no": ..,
"title": ..,
"from_date": ..,
"to_date" : ..,
"type" : "titles"} 
```

What i wanted to do, is to find the average salary for each active title. Active titles are document with "from_date" attribute set to "9999-01-01"

Here is my Map Function

```
function(doc) {
if (doc.type == 'salaries') {
        var dateSalaries = null;
        dateSalaries = doc.to_date.split("-");
        if(dateSalaries[0].localeCompare("9999") == 0){
            emit(doc.emp_no, ["salary", doc.salary] );
        }
    } else if (doc.type == 'titles') {
        var dateTitles = null;
        dateTitles = doc.to_date.split("-");
        if(dateTitles[0].localeCompare("9999") == 0){
            emit(doc.emp_no, ["title", doc.title]);
        }
    }
} 
```

Here is the resulting key value pairs emited:

[http://i.imgur.com/o1Qxz.png](http://i.imgur.com/o1Qxz.png)

Now, i want to reduce it into single key-value pair, with the value outputted is set into javascript object like this

```
{
    "engineer" : 64342,
    "senior engineer" : 123111,
    "staff" : ...,
    "senior staf" : ...,
    .
    .
    .
} 
```

Here's how i planned to do it: First, in reduce step, i'm gonna return object that merge properties from the same emp_no. Then, in reduce step, i'm gonna create a new object that has properties name based on reduced value before.

It's hard to explain, so here is my reduce function:

```
function(keys, values, rereduce) {
    var i, l, attr, sal, rv = {};
    if (rereduce) {
        for (i = 0, l = values.length; i<l ; ++i) {
            if (values[i].hasOwnProperty('salary')) {
                attr = values[i].title;
                sal = values[i].salary;
                if (rv[attr] instanceof Array) {
                    rv[attr].push(sal);
                } else{
                    rv[attr] = [];
                    rv[attr].push(sal);
                }
            }           
        }

        for (var x in rv) {
            if (rv.hasOwnProperty(x)) {
                var totalSalary = 0;
                for (i = 0, l = values.length; i<l ; i++) {
                    totalSalary += rv[x][i];
                }
                rv[x] = totalSalary / rv[x].length;
            }
        }

    } else {
        for (i = 0, l = values.length; i<l ; i++) {
            switch (values[i][0]) {
                case "title" : rv["title"] = values[i][1]; break;
                case "salary": rv["salary"] = values[i][1]; break;
            }
        }
    }
    return rv;
} 
```

The resulting value here is reduced value, which is what i expected: [http://i.imgur.com/SnlOU.png](http://i.imgur.com/SnlOU.png)

But, when i set the grouping value to 'none' in futon, it's not what i wanted:

```
{Senior Engineer: null, Assistant Engineer: null, Technique Leader: null} 
```

Could someone help me to solves this?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T14:14:10.220

您正在将 CouchDB 推到非常接近它的极限 — 使用 reduce 函数来执行连接和所有操作。

您的问题来自这样一个事实，即 CouchDB 可能应用零个、一个或多个 rereduce 步骤，但您的代码假定将执行一个 rereduce 步骤。我怀疑`null`你得到的结果来自这样一个事实，即最后的 rereduce 步骤应用于一些来自 reduce 步骤的结果和一些来自 rereduce 步骤的结果。

这是一个小图。M是map step，R是reduce step，RR是rereduce step。

```
[X] [X] [X] [X] [X] [X] [X] [X] [X] [X] 
 |   |   |   |   |   |   |   |   |   | 
(M) (M) (M) (M) (M) (M) (M) (M) (M) (M)
 |   |   |   |   |   |   |   |   |   | 
(==R==) (==R==) (==R==) (==R==) (==R==)
   |       |       |       |       | 
  (== R R ==)     (== R R ==)      | 
       |               |           | 
      (====== R R ======)          | 
               |                   | 
              (======== R R ========)
                         |
                         v
                        [X] 
```

对于 CouchDB reduce 视图，reduce 步骤输出的数据必须与 rereduce 步骤输出的数据具有相同的格式。特别是，这意味着您需要存储 (sum,count) 对，而不是存储平均值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T00:25:25.487

如果您可以将头衔和薪水放在同一个员工文档中，那会让您的生活变得更轻松。

```
{
"name" : "Joe",
"title" : "Plumber",
"salary" : 60000
} 
```

然后您可以轻松地`emit(doc.title, doc.salary)`使用内置的`_stats`reduce 功能并查看每个职位的薪水统计信息。

# multithreading - Camel file consumer template - threads remaining alive

> ID：11207962
> 
> 赞同：7
> 
> 时间：2012-06-26T13:07:05.033
> 
> 标签：multithreading, file, apache-camel, out-of-memory, consumer

I have a problem very similar to [http://camel.465427.n5.nabble.com/FTP-ConsumerTemplate-Threads-remaining-alive-td5548338.html](http://camel.465427.n5.nabble.com/FTP-ConsumerTemplate-Threads-remaining-alive-td5548338.html).

How do you kill Camel locked threads on different endpoints? I tried to remove endpoints and stop ConsumerTemplate after setting doneUoW, but those didn't work.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-28T20:52:07.330

尝试添加`&disconnect=true`您的 FTP URI。这样，它将释放连接，同时，这可能会生成您锁定的线程。

# powershell - Powershell Insert SMTP Array into proxyAddresses for ADGroup

> ID：11207969
> 
> 赞同：1
> 
> 时间：2012-06-26T13:07:27.400
> 
> 标签：powershell

How would one insert an array full of smtp email addresses into an AD Group. I've tried this:

```
Set-QADGroup $_ -ObjectAttributes @{proxyAddresses = $email_smtp_array} 
```

But this does not work.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T13:17:18.647

试试这样：

```
Set-QADGroup $_ -ObjectAttributes @{proxyAddresses = $($email_smtp_array)} 
```

如果设置为根据交换配置更新地址，此命令不会覆盖 Exchange 策略。

# c# - 有没有办法使用 C# 将相同的控件放在不同的选项卡中？

> ID：11207975
> 
> 赞同：-3
> 
> 时间：2012-06-26T13:07:46.760
> 
> 标签：c#, .net, winforms, tabcontrol

有没有办法使用 C# 将相同的控件放在不同的选项卡中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T13:10:02.993

不能。任何控件都只能有一个父控件。如果控件也在两个地方，它的位置会是什么？

我建议您有两个控件，它们具有一个共同的“核心”对象，其中包含您真正想要在两个控件之间共享的所有内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T13:13:39.917

您不能将同一控件实例放置在两个不同的选项卡中，但您可以创建一个自定义用户控件，其中包含每个选项卡中所需的控件，然后使用该用户控件的实例填充每个选项卡。

在我看来，微软关于创建自定义用户控件的[演练](http://msdn.microsoft.com/en-us/library/a6h7e207%28v=vs.71%29.aspx)非常好。

# asp.net - ASP.net: Can I have 2 different versions of same dll/assembly in the bin folder?

> ID：11207976
> 
> 赞同：5
> 
> 时间：2012-06-26T13:07:47.643
> 
> 标签：asp.net, iis, dll

I am working on a large web application implemented in ASP.net. The main part of application, much of it implemented by a 3rd party, is managed by others so I don't have much control over it.

I have implemented 8 ASP.net custom controls which compile to separate DLLs and are put into the application's bin folder. These controls have to link to a couple of DLLs (or should that be assemblies?) from the main application which are also stored in the bin folder. Let's call them `MainAppCore1.dll` and `MainAppCore2.dll`. These seem to be managed .NET code.

My problem is that the main application has been updated, and worse looks like regularly being updated in the near future, due to to bugs problems I have compiled all my controls against the original version of the main app dlls, so now they won't load. Obviously I can solve the issue by recompiling all the controls against the new versions of `MainAppCore1.dll` and `MainAppCore2.dll` but am looking for a smarter way

My question is: is it possible to keep **2 versions** of the main app dlls in the bin folder so that my controls will keep working (probably) each time the main app is upgraded?

I don't want to have to edit the `web.config` file by the way as this would be politically complicated.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T13:19:14.253

简而言之，**您不能**。从广义上讲，只有在 GAC（全局程序集缓存）文件夹中才能在一个文件夹中拥有两个版本的 .net 程序集，这是一个特殊文件夹，可以运行多个版本的 .Net 程序集，并且您的控制程序集可以指向 GAC 中的特定版本，不管那里有多少个版本。一种可能的解决方案是要求您的第 3 方供应商强命名他们的 MainCore1.dll 并将其安装在 GAC 中，每次版本更改时，然后在您的 web.config 中您可以指向特定版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T13:16:35.973

将您的 8 个自定义控件放在他们自己的库项目中，并从主要项目中引用该项目。大概一切都在源代码控制中，因此当您执行“获取最新”时不应该有任何版本控制问题。

# javascript - 在 iPad 2 上播放一次后视频海报消失

> ID：11207990
> 
> 赞同：0
> 
> 时间：2012-06-26T13:08:10.280
> 
> 标签：javascript, ipad, html, video, mediaelement.js

在 iPad 2 上，我们遇到了视频播放后视频海报图像消失的问题。它显示黑色图像而不是海报图像。

页面加载时显示海报图像没有问题。它只是在视频结束后不再显示。

你有没有遇到过这样的事情并且有一个已知的解决方案？

我不确定这是否重要，但我们使用 MediaElement.js。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T13:57:17.710

我在 iphone 3GS 上遇到了同样的问题，作为一种解决方法，我将海报帧存储在 Javascript 对象中，然后在视频播放完毕后替换它们。也许这对您也有用，因为您在页面加载时显示了海报框架。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T15:23:14.560

视频播放完毕后，不应显示海报图像。您需要自己构建一些可以重新显示它的东西，例如 Neil 提到的。